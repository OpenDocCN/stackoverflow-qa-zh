# StackOverflow 问答 10494000-10494999

# php - 设置动态“找到”类的静态成员

> ID：10494002
> 
> 赞同：0
> 
> 时间：2012-05-08T06:54:13.173
> 
> 标签：php, class, inheritance, properties, static

尝试通过在获取当前类的类型后引用它们来设置一个数组和一个计数，它们都是静态成员。目的是拥有我已加载的特定类型的所有项目的全局列表，但我希望将它们拆分为每个特定类的静态属性。问题是我将从基类继承一些类，但我希望附加“子”类中的静态属性。

这是我的目标，给予或接受：

```
$Class = get_class($this);
($Class)::$List[($Class)::$Count++] = $this; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:05:47.020

在 PHP 5.3 及更高版本中，您可以使用[后期静态绑定](http://www.php.net/manual/en/language.oop5.late-static-bindings.php)来访问被覆盖的静态变量。简短的版本是在访问静态变量时使用`static`而不是或类名。`self`例如：

```
<?php
abstract class A {
    public function __construct() {
        static::$List[] = $this;
    }
}

class B extends A { 
    public static $List = array();
}

class C extends A {
    public static $List = array();  
}
$b = new B();
$c1 = new C();
$c2 = new C();
$c3 = new C();

echo '#objects of class C: ', count(C::$List), "\n";
var_dump(C::$List); 
```

请记住，如果子类定义了构造函数，它必须显式调用父类的构造函数。

# actionscript-3 - Actionscript 项目的 ByteArray 问题

> ID：10494006
> 
> 赞同：0
> 
> 时间：2012-05-08T06:54:30.153
> 
> 标签：actionscript-3, apache-flex, actionscript

我正在尝试在 FDT 5 IDE 中为此库创建一个项目我创建了一个新项目：

`File->New FDT Project->Web->AS3`然后完成

在此处复制文件表格：[https ://github.com/jwagener/recorder.js/tree/master/flash](https://github.com/jwagener/recorder.js/tree/master/flash)

但是 IDE 显示项目中存在问题：

```
Description Resource    Path    Location    Type Could not resolve type reference to 'flash.utils.ByteArray' at line 576 column
25\. MultipartURLLoader.as   /recorder/src/ru/inspirit/net   Unknown Flash Problem Could not resolve type reference to 'flash.utils.ByteArray' at line 581 column
39\. MultipartURLLoader.as   /recorder/src/ru/inspirit/net   Unknown Flash Problem Incompatible types ByteArray and ByteArray. Found at line 184 column
37\. MultipartURLLoader.as   /recorder/src/ru/inspirit/net   Unknown Flash Problem Incompatible types ByteArray and ByteArray. Found at line 447 column
24\. MultipartURLLoader.as   /recorder/src/ru/inspirit/net   Unknown Flash Problem Unexpected Token playingProgressTimerHandler at line 103 column 69\.   Recorder.as /recorder/src   Unknown Flash Problem Unexpected Token playingProgressTimerHandler at line 103 column
69\. Recorder.as /recorder/src   Unknown Flash Problem Unexpected Token statusHandler at line 186 column
61\. Recorder.as /recorder/src   Unknown Flash Problem Unexpected Token statusHandler at line 186 column
61\. Recorder.as /recorder/src   Unknown Flash Problem Wrong number of arguments. Expect at least 2 but have found 1\. Found at line 103 column 25\.   Recorder.as /recorder/src   Unknown Flash Problem Wrong number of arguments. Expect at least 2 but have found 1\. Found at line 186 column 15\.   Recorder.as /recorder/src   Unknown Flash Problem You cannot assign 'ByteArray' to 'ByteArray'. Found 'fileContent;' at line 189 column
21\. MultipartURLLoader.as   /recorder/src/ru/inspirit/net   Unknown Flash Problem You cannot assign 'ByteArray' to 'ByteArray'. Found 'fileContent;' at line 583 column
22\. MultipartURLLoader.as   /recorder/src/ru/inspirit/net   Unknown Flash Problem 
```

我对 AS 开发真的很陌生，我只想重新编译 sa 说的库。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:06:28.683

您需要先完成 FDT 设置教程。如果我没记错的话，您需要 Flash Player 9+ 才能使用 ByteArray 类。但是，Flash Player 11 是您最安全的选择。下载 Flex SDK 并使用以下两个教程之一进行设置：

[http://fdt.powerflasher.com/2008/10/creating-flash-player-10-projects-with-fdt-beta/](http://fdt.powerflasher.com/2008/10/creating-flash-player-10-projects-with-fdt-beta/) http://www.applicationdomain.net/post/2008/05/26/Setting- up-FDT-for-Flash-Player-10

希望有帮助。

# android - 想要在 Android 2.2 中进行拼写检查

> ID：10494008
> 
> 赞同：2
> 
> 时间：2012-05-08T06:54:48.440
> 
> 标签：android

想知道任何用于在 android 中进行拼写检查的库。我查看了[http://code.google.com/p/google-api-spelling-java/](http://code.google.com/p/google-api-spelling-java/)和 jOrtho 但在 android 中都没有。

有没有办法在 android 中实现拼写检查，因为我找不到任何库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:03:00.447

一种简单的方法是检测每个以空格分隔的单词，然后检查单词的“字典”或“地图”。您可以通过查看包含所有单词的文件来检查它是否是真实单词，例如 unix/linux 系统上的 /usr/share/dict/words。[这里](https://stackoverflow.com/questions/2294915/what-algorithm-gives-suggestions-in-a-spell-checker)的链接也可能有帮助。

# openid - 我作为 openid 提供者

> ID：10494010
> 
> 赞同：0
> 
> 时间：2012-05-08T06:54:53.913
> 
> 标签：openid, google-openid, openid-provider

我有一个使用 openid 的网站，我将其作为 openid 提供者。

是否有可能在其他 openid 提供者网站上显示我的 openid 提供者作为身份提供者，如 google、Yahoo 等，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:35:26.950

有两种方法可以做：

1.  要么请求代码提供者在主列表中设置您的应用程序。例如，stackoverflow 向管理员请求或请求您为使​​用 openid 提供免费代码的开发人员

2.  您创建自己的实用程序并尝试使用 GIT 或 CVS 在开发人员之间分发，因为它会自动将您的网站提升为提供商网站之一。

没有其他方法可以让您的网站变得如此受欢迎，成为其中之一。

# mysql - 通过jsp中的路径从数据库中检索文件

> ID：10494013
> 
> 赞同：0
> 
> 时间：2012-05-08T06:55:10.303
> 
> 标签：mysql, html, jsp, hyperlink

我想通过存储在数据库表中的路径（本地服务器路径）下载文件，我已经完成了编码部分以在 html 表中查看数据库，但我不知道如何超链接表以便从存储在服务器中的输出文件夹下载文件（任何类型和大小）。这是jsp代码：

```
<%@ page import="java.io.*,java.sql.*"%>

<%
String id=request.getParameter("id");
Class.forName("com.mysql.jdbc.Driver").newInstance();  
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306  /ksa","root","root");  
Statement st=con.createStatement();
ResultSet rs=st.executeQuery("Select id,file_path,file_date from file12 where id like '"+id+"%'"); 
%>
<table cellpadding="15" border="1">
<%
while(rs.next()){
%>
<tr>
<td><%=rs.getString("id")%> </td>
<td><%=rs.getString("file_path")%> </td>
<td><%=rs.getString("file_date")%> </td>
</tr>
<%}%>
</table> 
```

上面的代码将从数据库中检索表到 html 表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:07:21.547

```
 <%@ page import="java.io.*,java.sql.*"%>
 <%
   String id=request.getParameter("id");
   Class.forName("com.mysql.jdbc.Driver").newInstance();  
   Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/ksa","root","root");  
   Statement st=con.createStatement();
   ResultSet rs=st.executeQuery("Select id,file_path,file_date from file12 where id like '"+id+"%'"); 
   %>
  <table cellpadding="15" border="1">
  <%
    while(rs.next()){
  %>
  <tr>
    <td><a href="<%=rs.getString("file_path")%>"> click here to download the file with  id :<%=rs.getString("id")%> </a> </td>

    </tr>
 <%}%>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:32:39.880

如果 rs.getString("file_path") 返回的路径是 /home/Desktop/output/something.jpeg 表示您无法下载。因为当您单击给定链接时，它肯定会显示 PAGE NOT FOUND (404) 异常。

"> 点击此处下载文件

请注意您的网址，它看起来像

[http://localhost:8080/prjname/home/Desktop/output/something.jpeg](http://localhost:8080/prjname/home/Desktop/output/something.jpeg)

所以在这种情况下我们可以将路径传递给一个servlet，通过这个servlet我们可以下载文件。

# sql - 关于 SQL Server 存储过程参数

> ID：10494021
> 
> 赞同：0
> 
> 时间：2012-05-08T06:56:14.197
> 
> 标签：sql, sql-server

我想分页，但是下面的存储过程是错误的，因为使用了`@size`，而正确的方法是如何完成这个存储过程

谢谢！！！

```
CREATE PROCEDURE message_devidepage
    @size int,
    @page int
AS
BEGIN
    SELECT TOP @size * from   --point out @size is wrong 
        (
        SELECT ROW_NUMBER() OVER (ORDER BY createTime desc) AS RowNumber,* FROM message
        ) ed
    WHERE RowNumber > @size*(@page-1);
END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:04:49.730

将变量括在括号中，例如：

```
declare @i int
set @i = 1
select top (@i) * from sys.tables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:02:01.617

那是因为`TOP`需要一个常数值。但是，您可以使用`SET ROWCOUNT`SET [ROWCOUNT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188774.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:02:17.927

你不能这样做：

```
SELECT * from 
......
WHERE RowNumber BETWEEN @size*(@page-1) AND @size*(@page) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:08:22.113

如果您使用的是 SQL Server 2005 或更高版本，则可以使用 RowNumber。对于早期版本的 SQL Server，您可以设置 RowCount。

# facebook - Facebook 应用程序 - 如果用户没有足够的积分余额想要继续使用我自己的付款方式

> ID：10494023
> 
> 赞同：0
> 
> 时间：2012-05-08T06:56:21.340
> 
> 标签：facebook

对于我的 facebook 应用程序使用**facebook 积分**订阅如果用户没有足够的积分余额想要从 facebook 支付中退出想要继续使用我自己的付款方式

[https://developers.facebook.com/docs/credits/](https://developers.facebook.com/docs/credits/)

在 facebook 文档中，这里没有给出任何方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:15:43.453

如果该应用程序是游戏，那么您的建议是明确违反政策的。如果它不是游戏，您可以检测到用户在未完成购买的情况下退出了支付对话框，并向他们显示接收项目/服务的替代选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:22:34.900

根据我们无法检索用户信用余额的 facebook 规则，facebook 没有将信用余额检查选项提供给应用程序......

# android - 无法在 ActivityGroup 持有的 PreferenceScreen 中加载 ListPreference 对话框

> ID：10494026
> 
> 赞同：2
> 
> 时间：2012-05-08T06:56:28.640
> 
> 标签：android, listpreference

我`ActivityGroup`在某个选项卡上实现了。其中一个屏幕`ActivityGroup`是 a`PreferenceScreen`并且由 a 组成`ListPreference`。

单击时`ListPreference`会引发异常，并且无法加载对话框。这是异常的完整堆栈跟踪：-

```
05-08 12:05:31.545: E/AndroidRuntime(247): Uncaught handler: thread main exiting due to uncaught exception
05-08 12:05:31.585: E/AndroidRuntime(247):  android.view.WindowManager$BadTokenException: Unable to add window -- token    android.app.LocalActivityManager$LocalActivityRecord@44ec8ac8 is not valid; is your activity running?
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.view.ViewRoot.setView(ViewRoot.java:468)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.app.Dialog.show(Dialog.java:239)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.preference.DialogPreference.showDialog(DialogPreference.java:307)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.preference.DialogPreference.onClick(DialogPreference.java:265)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.preference.Preference.performClick(Preference.java:811)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:190)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.widget.ListView.performItemClick(ListView.java:3285)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1640)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.os.Handler.handleCallback(Handler.java:587)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.os.Looper.loop(Looper.java:123)
05-08 12:05:31.585: E/AndroidRuntime(247):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-08 12:05:31.585: E/AndroidRuntime(247):  at java.lang.reflect.Method.invokeNative(Native Method)
05-08 12:05:31.585: E/AndroidRuntime(247):  at java.lang.reflect.Method.invoke(Method.java:521)
05-08 12:05:31.585: E/AndroidRuntime(247):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-08 12:05:31.585: E/AndroidRuntime(247):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-08 12:05:31.585: E/AndroidRuntime(247):  at dalvik.system.NativeStart.main(Native Method) 
```

我还尝试实现 DialogPreference 而不是 ListPreference，但它仍然以相同的方式崩溃。

在添加`Activity`到`ActivityGroup`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:12:19.750

通过将父级的上下文设置为 listpreference 解决了这个问题。

谢谢。

# android - Android Geocoder 返回空地址

> ID：10494029
> 
> 赞同：7
> 
> 时间：2012-05-08T06:56:59.960
> 
> 标签：android, geocoding

我正在尝试从 Geocoder 获取位置地址，我能够获取纬度和经度，但它返回的地址长度为零。

这是我的代码片段

```
 double longi = location.getLongitude();
            double latt = location.getLatitude();

            Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.ENGLISH);

            String add="";
            try {

                List<Address> address = geocoder.getFromLocation(latt/1E6,longi/1E6, 1);

                System.out.println("in location listener "+address.size());

                int i=0;

                if(address.size()>0)
                {
                    for(i=0;i<address.get(0).getMaxAddressLineIndex();i++)
                    {
                        add += address.get(0).getAddressLine(i);
                    }

                    Toast toast  = new Toast(getApplicationContext());
                    toast.makeText(getApplicationContext(), add, Toast.LENGTH_LONG).show();
                }   

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

请帮我把它弄对。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:08:53.847

如果平台中没有后端服务，Geocoder 查询方法将返回一个空列表。使用 isPresent() 方法确定是否存在 Geocoder 实现。

有关详细信息，请参阅[地理编码器文档](http://developer.android.com/reference/android/location/Geocoder.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:17:04.823

我认为您的项目没有针对正确的 AVD。要使用地理位置，您必须将其指向实现 google API 的 avd。一旦你改变它，一切都会好起来的。

[安装 Google API 插件](https://developers.google.com/android/add-ons/google-apis/installing?hl=fr-FR)

# python - 设置 SQLAlchemy 自动增量起始值

> ID：10494033
> 
> 赞同：30
> 
> 时间：2012-05-08T06:57:05.880
> 
> 标签：python, sqlalchemy, auto-increment

SQLAlchemy 中的`autoincrement`参数似乎只有`True`and `False`，但我想设置预定义值，即下一次插入完成时`aid = 1001`通过自动增量。`aid = 1002`

在 SQL 中，可以更改如下：

```
ALTER TABLE article AUTO_INCREMENT = 1001; 
```

我正在使用`MySQL`并且我尝试过以下操作，但它不起作用：

```
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()
class Article(Base):
    __tablename__ = 'article'
    aid = Column(INTEGER(unsigned=True, zerofill=True), 
                autoincrement=1001, primary_key=True) 
```

那么，我怎样才能得到呢？提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-08T14:03:10.793

您可以通过使用[`DDLEvents`](http://docs.sqlalchemy.org/en/rel_0_7/core/events.html?highlight=after_create#sqlalchemy.events.DDLEvents). 这将允许您在运行之后运行其他 SQL 语句`CREATE TABLE`。查看链接中的示例，但我猜您的代码将类似于以下内容：

```
from sqlalchemy import event
from sqlalchemy import DDL
event.listen(
    Article.__table__,
    "after_create",
    DDL("ALTER TABLE %(table)s AUTO_INCREMENT = 1001;")
) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-08T08:51:16.090

根据[文档](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#sqlalchemy.schema.Column.__init__)：

> autoincrement – 此标志可以设置为 False 以指示不应被视为“自动增量”列的整数主键列，即在 INSERT 时隐式生成值的整数主键列，其值通常通过DBAPI cursor.lastrowid 属性。它默认为 True 以满足具有单个整数主键列的表的常见用例。

因此，`autoincrement`这只是一个标志，让`SQLAlchemy`您知道它是否是您要增加的主键。

您要做的是创建一个自定义的自动增量*序列*。

因此，我*认为*您的示例应该类似于：

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.schema import Sequence

Base = declarative_base()

class Article(Base):
    __tablename__ = 'article'
    aid = Column(INTEGER(unsigned=True, zerofill=True), 
                 Sequence('article_aid_seq', start=1001, increment=1),   
                 primary_key=True) 
```

注意，我不知道您是否使用`PostgreSQL`，所以如果您使用，请注意[以下几点](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#defining-sequences)：

> Sequence 对象还实现了特殊功能以适应 Postgresql 的 SERIAL 数据类型。PG 中的 SERIAL 类型会自动生成一个在插入过程中隐式使用的序列。这意味着如果一个 Table 对象在其主键列上定义了一个序列，以便它与 Oracle 和 Firebird 一起工作，那么该序列将妨碍 PG 通常使用的“隐式”序列。对于这个用例，将标志 optional=True 添加到 Sequence 对象 - 这表明只有在数据库没有提供其他选项来生成主键标识符时才应该使用 Sequence。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T18:37:01.897

我无法使用 mysql 和 flask-migrate 获得其他答案，因此我在迁移文件中执行了以下操作。

```
from app import db
db.engine.execute("ALTER TABLE myDB.myTable AUTO_INCREMENT = 2000;") 
```

请注意，如果您重新生成迁移文件，这将被覆盖。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-23T14:47:16.403

我知道这是一个老问题，但我最近不得不弄清楚这一点，并且没有一个可用的答案是我所需要的。我发现的解决方案依赖`Sequence`于[SQLAlchemy](https://docs.sqlalchemy.org/en/14/dialects/postgresql.html?highlight=sequence)。无论出于何种原因，当我在上面提到`Sequence`的构造函数中调用构造函数时，我无法让它工作。`Column`作为说明，我使用的是 PostgreSQL。

对于您的回答，我会这样说：

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Sequence, Column, Integer

import os
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Sequence, Integer, create_engine
Base = declarative_base()

def connection():
    engine = create_engine(f"postgresql://postgres:{os.getenv('PGPASSWORD')}@localhost:{os.getenv('PGPORT')}/test")
    return engine

engine = connection()

class Article(Base):
    __tablename__ = 'article'
    seq = Sequence('article_aid_seq', start=1001)
    aid = Column('aid', Integer, seq, server_default=seq.next_value(), primary_key=True)

Base.metadata.create_all(engine) 
```

然后可以在 PostgreSQL 中调用：

```
insert into article (aid) values (DEFAULT);
select * from article;

 aid  
------
 1001
(1 row) 
```

希望这对某人有所帮助，因为我花了一段时间

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-26T01:15:50.143

您可以使用`mysql_auto_increment`table create 选项来完成。也有`mysql_engine`和`mysql_default_charset`选项，这可能也很方便：

```
article = Table(
    'article', metadata,
    Column('aid', INTEGER(unsigned=True, zerofill=True), primary_key=True),
    mysql_engine='InnoDB',
    mysql_default_charset='utf8',
    mysql_auto_increment='1001',
) 
```

以上将生成：

```
CREATE TABLE article (
    aid INTEGER UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT, 
    PRIMARY KEY (aid)
)ENGINE=InnoDB AUTO_INCREMENT=1001 DEFAULT CHARSET=utf8 
```

# java - 当我们已经有主键时（场景）以及 GUID 列如何有意义？

> ID：10494034
> 
> 赞同：0
> 
> 时间：2012-05-08T06:57:13.503
> 
> 标签：java, database, sql-server-2005

在我的旧 Web 应用程序中，这是 sql server 2005 中客户表的结构：-

```
custId, custName,custAddress,custGUID
1        scott    mark       B36AF54E-F2B5-4845-9595-AC05K898AE14 
```

我的问题是关于被声明为 uniqueIdentifier() 的列 custGUID，它是 GUID）。我没有得到主键和 uniqueIdentifier 之间的区别以及引入额外列作为 guid 的原因。根据不同的站点，我知道 uniqueIdentifier 在整个 sqlserver 2005 中是唯一的，但主键是唯一的，在该特定方面是唯一的桌子 。但我无法想到任何将任何列设为跨 sql server 的 GUID/唯一的场景。想了解 GUID 列何时以及如何有意义？由于所有团队成员都是新人，无法弄清楚其中的奥秘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:04:37.217

这是一个很难回答的问题，因为这样做有很多原因，其中大多数根本不好。

您可能正在查看一个遗留应用程序，其中数据存储在多个服务器上。为了避免在最终合并数据时覆盖数据，引入了 GUID 列。

我以前在应用程序中看到过这种情况，例如，员工在他们的笔记本电脑上拥有该程序的副本，并且在没有可靠互联网连接的情况下远程工作。因此，所有发票等都链接到 GUID 而不是客户 ID，这使得以后可以将所有数据合并到一个数据库中，而不会冒以错误方式相互链接的风险。

您的陈述是正确的，唯一标识符应该已经足够了，但请考虑一下如果同时运行多个数据库会发生什么。例如，您最终可能有五个客户，每个客户的客户 ID 为 4。如果让我猜测，我会说这就是最初的设计师走这条路的原因。

# javascript - Paydirt 主页上幻灯片放映的令人敬畏的放大镜/放大效果

> ID：10494039
> 
> 赞同：3
> 
> 时间：2012-05-08T06:57:34.723
> 
> 标签：javascript, html, slideshow, effect, loupe

我完全被[https://paydirtapp.com/](https://paydirtapp.com/)上的幻灯片所震撼，有人知道它是如何实现的吗？我猜这是一些复杂的 html5 canvas mumbo-jumbo 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:25:38.643

**TL;DR** : 使用浏览器的检查器找出所有内容！

画布的使用可能没有您期望的那么多。使用浏览器检查器，您可以快速查看此处发生的基本情况：

![浏览器检查器](../Images/ea58fc92949d34055941cb38f0acbd3b.png)

从上面可以看出，有三个主要组件：放大镜、屏幕截图和消息。使用 CSS3，为放大镜的每个部分（阴影、发光和画布）制作投影和圆形效果（box-shadow 和border-radius）。

画布部分只是放大镜下的图像。使用画布可以模糊图像（当放大镜动画时。这三个元素的容器管理移动和调整大小（缩放）。圆形裁剪效果仅使用边框半径样式完成。

该`image_wrapper`课程包含游览所经过的所有个人屏幕截图。有比所需分辨率更高的图像可能是因为画布元素不必为版本中的“缩放”加载单独的图像。

然后是`magnifier_message`只包含文本的类。它是通过 javascript 更新的——这里没什么特别的。

总而言之，包含这三个元素的父级具有（OSX 桌面的）背景图像。

对于画布工作 - 它不适合胆小的人 - 它们位于`/assets/promo-0e644...js`文件下的 javascript 中。Webkit 的检查器可以重新格式化 javascript，因此如果您想好好阅读，它的可读性会更高（它是窗口底部的花括号按钮）：

![javascript魔术](../Images/dffcc5da2b338d22e78101baf202531d.png)

可悲的是，杂耍并没有优雅地退化（或任何[渐进增强](http://www.alistapart.com/articles/understandingprogressiveenhancement/)的迹象）:(

# excel - Excel Application.WorksheetFunction.CountIf 使用相对引用

> ID：10494041
> 
> 赞同：1
> 
> 时间：2012-05-08T06:57:46.253
> 
> 标签：excel, countif, vba

我会尽量保持简单和不具体。我有三列，a，b，c。Col C 在单元格 C1-C100 中有一百个随机数。Col A 在单元格 C1:C5 中有五个随机数。

对于每个单元格 B1:B5，我想输入 col a 中的数字出现在 col c 中的次数。如果您将公式直接写入单元格 B1，它将是：

> =COUNTIF($C:$C, $A1)

然后，您将向下拖动以填充单元格 B2:B5

我想使用 VBA 的 Application.WorksheetFunction.CountIf 函数来做到这一点（我的实际项目比这复杂得多，需要自动填充单元格）。

```
Dim colb As Range
Set colb = Range("$B1:$B5")

Dim colc As Range
Set colc = Range("$C:$C")

Dim cola As Range
Set cola = Range("$A:$A")

For Each bcell In colb
    bcell.Formula = Application.WorksheetFunction.CountIf(colc, bcell.Offset(0, -1))
Next bcell 
```

这可以正常工作。但是我想知道它是否可以在没有 For-Each 循环的情况下完成，并且没有指定要填充 B 中的多少个单元格（识别 A 何时达到其最后一个值，并相应地停止填充 B，a la

```
Dim colb As Range
Set colb = Range("$B:$B") 
```

在我看来，关键的一行是这样的：

```
colb.Formula = Application.WorksheetFunction.CountIf(colc, cola) 
```

但这不起作用。我要问的有可能吗？我想让 Excel 一次填充整个范围会比循环更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:24:47.880

您可以使用评估：

```
Sub testeval()
Dim vArr As Variant
Dim nARows As Long
Dim nCRows As Long
Dim oSht1 As Worksheet
Dim strSheet As String

Set oSht1 = ActiveSheet
strSheet = oSht1.Name & "!"
nARows = oSht1.Range("A1").Offset(oSht1.Rows.Count - 1).End(xlUp).Row
nCRows = oSht1.Range("C1").Offset(oSht1.Rows.Count - 1).End(xlUp).Row
vArr = oSht1.Evaluate("=INDEX(COUNTIF(" & strSheet & "$C1:$C" & CStr(nCRows) & "," & strSheet & "$A1:$A" & CStr(nARows) & "),0,1)")
oSht1.Range("$B1").Resize(UBound(vArr), 1) = vArr
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:29:53.140

您不需要循环，也不需要使用工作表函数 :) 这将满足您的要求。

```
Range("$B1:$B5").Formula="=COUNTIF($C:$C, $A1)" 
```

**例子**

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim colb As Range

    Set ws = Sheets("Sheet1")
    Set colb = ws.Range("$B1:$B5")

    colb.Formula = "=COUNTIF($C:$C, $A1)"
End Sub 
```

# javascript - HTML5 Canves 中的渐变位置

> ID：10494043
> 
> 赞同：0
> 
> 时间：2012-05-08T06:57:50.743
> 
> 标签：javascript, html, css

我正在 html5 Canves 中构建动态报告我想在 html5 中添加 2 个颜色渐变。我的代码如下

```
var gradient = content.createLinearGradient(0, 0, 0, 30);  
gradient.addColorStop(0, "rgb(255, 255, 255)");  
gradient.addColorStop(1, "rgb(0, 0, 0)");  

content.save();  
content.fillStyle = gradient;  
content.fillRect(0, 0, 100, 30);  
content.restore(); 
```

看起来不错，但是当我改变盒子渐变的位置时，请看下面的代码。

```
var gradient = content.createLinearGradient(0, 100, 0, 30);  
gradient.addColorStop(0, "rgb(255, 255, 255)");  
gradient.addColorStop(1, "rgb(0, 0, 0)");  

content.save();  
content.fillStyle = gradient;  
content.fillRect(0, 100, 100, 30);  
content.restore(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:33:18.407

createLinearGradient 采用 x1, x2, y1, y2，并从 (x1, y1) 到 (x2, y2) 进行渐变。

填充矩形是不同的。它需要 x, y, w, h，并从 (x, y) 组成一个宽度为 w 和高度为 h 的矩形。

您现在的代码创建了一个从 (0, 100) 到 (0, 30) 的倒置渐变，并尝试将其应用于从 (0, 100) 开始到 (100, 130) 结束的矩形，因为它是 100 宽和 30 高。您看到的是纯色，因为渐变是在填充矩形之外绘制的。

简单的解决方法是调整渐变结束的位置：

```
var gradient = content.createLinearGradient(0, 100, 0, 130);
gradient.addColorStop(0, "rgb(255, 255, 255)");
gradient.addColorStop(1, "rgb(0, 0, 0)");

content.save();
content.fillStyle = gradient;
content.fillRect(0, 100, 100, 30);
content.restore(); 
```

请记住，在它们看起来正确之前，不要只玩数字。始终阅读文档并确保您知道要发送的参数:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:26:47.297

你可以试试**[梯度生成器](http://www.colorzilla.com/gradient-editor/)**。

希望这可以帮助。

# python - Python 3.2 for 循环

> ID：10494044
> 
> 赞同：-1
> 
> 时间：2012-05-08T06:57:52.317
> 
> 标签：python, for-loop, python-3.2

感谢您花时间帮助我。上个学期我一直在学习 Python 3.2，所以我的知识只不过是一个新手。我在 Windows 7 上，使用 Python 3.2 并使用 Python 的 IDLE。

我正在使用 for 循环以类似滚动的方式打印一系列字符串。我的意思是 IDLE 会一个字母一个字母地打印字符串。下面是我正在使用的代码。

```
import os, sys, time

message=('Enter string in here. It will print what is in here letter by letter.')

for line in message:
    print(line,end='')
    sys.stdout.flush()
    time.sleep(0.03) 
```

我的问题是：如果用户要在整个字符串打印期间随时按“输入”，有没有办法打印整个字符串（消息）。因此，即使用户在开始时点击“输入”；将打印整个字符串。

再次感谢您抽出宝贵时间帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-08T12:27:28.360

您的代码有点令人困惑，因为您的循环谈论的是行，但不是在行上工作。

```
message=('Enter string in here. It will print what is in here letter by letter.') 
```

所以消息是一个字符串

```
for line in message: 
```

如果我们遍历一个字符串，我们会得到字符。所以每次循环我们都会设置`line`到下一个字符。像这样命名变量只会让任何阅读它的人感到困惑，包括你自己。

> 如果用户在整个字符串打印期间随时点击“输入”，有没有办法打印整个字符串（消息）。因此，即使用户在开始时点击“输入”；将打印整个字符串。

我认为您要问的是是否可以免疫输入将光标移动到下一行。[这个问题](https://stackoverflow.com/questions/7715594/how-to-reset-cursor-to-the-beginning-of-the-same-line-in-python)详细介绍了许多这样做的方法，wim 在他的回答中有一个例子。不过，这只是部分解决方案，对于这种类型的事情，我更喜欢使用诅咒（请参阅链接）。

如果这不是您要问的，那么我认为您需要重新提出您的问题。

# c - 获得数字的所有倍数的更快方法？

> ID：10494045
> 
> 赞同：-2
> 
> 时间：2012-05-08T06:57:56.247
> 
> 标签：c, math, optimization

我正在尝试使用 for 循环打印从 N 到 K 的数字 N 的所有倍数

```
 for(i=N;i<=K;i+=N)
        printf("%d\n", i); 
```

我相信这是 O(n) 但我想知道是否有更快的方法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:02:05.343

由于您的输出大小为 K/N，因此您的解决方案必须至少为 O(K/N)（或您所说的 O(n)），否则您将无法创建整个输出。

但是，可以进行非算法优化，例如最小化对 printf 的调用次数（尽管我不确定这是否会对性能产生任何实际影响）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:12:10.143

由于在循环算法中没有什么可以优化的，剩下的就是重量级了`printf`。您可以在此处实现您自己的（非标准）版本`itoa()`，将整数转换为数字序列。

但是这里到底是什么太慢了？您是否受 I/O 限制？CPU 受限？还是只是好奇？

# wpf - xaml 图像未显示 .source

> ID：10494046
> 
> 赞同：0
> 
> 时间：2012-05-08T06:58:05.950
> 
> 标签：wpf, image, xaml

一般来说，我是 xaml 和 wpf 的新手。我正在尝试使图像出现在用户控件中，这是我使用的代码：

```
 BitmapImage captchaSource = new BitmapImage();
                        captchaSource.BeginInit();
                        captchaSource.UriSource = new Uri(_captchaData.ImgUrl);
                        captchaSource.EndInit();
                        captchaImg.Source = captchaSource; 
```

这是用户界面代码：

```
<Image Height="105" HorizontalAlignment="Left" Margin="12,38,0,0" Name="captchaImg" Stretch="Fill" VerticalAlignment="Top" Width="276" Grid.ColumnSpan="2" /> 
```

但什么也没有发生。没有图像出现。这是 _captchaData.ImgUrl [http://www.google.ro/images/srpr/logo3w.png中的网址](http://www.google.ro/images/srpr/logo3w.png)

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:06:52.240

从[上一个问题](https://stackoverflow.com/questions/3148163/wpf-image-urisource-and-data-binding-using-http-url)：

> “WebURL 不能作为 BitmapImage 的 UriSource 属性的源提供。如果是 weburl，则需要在本地下载该图像并将该路径绑定到 UriSource。”

# javascript - Java 脚本货币格式 - 将代码转换为 Google Apps 脚本

> ID：10494047
> 
> 赞同：-1
> 
> 时间：2012-05-08T06:58:08.033
> 
> 标签：javascript, google-apps-script, currency, number-formatting

谁能告诉我如何修改它以在 Google Apps 脚本中工作

```
 function formatCurrency(symbol, amount) {
               aDigits = amount.toFixed(2).split(".");
               aDigits[0] = aDigits[0].split("").reverse().join("")
                       .replace(/(\d{3})(?=\d)/g,"$1,").split("").reverse().join("");
               return symbol + aDigits.join(".");
} 
```

将它用于货币格式化会很棒。

谢谢，

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:26:50.080

它对我来说很好。我只是在调试器中运行它：[https ://docs.google.com/macros](https://docs.google.com/macros)

```
function formatCurrency(symbol, amount) {
  var aDigits = amount.toFixed(2).split(".");
  aDigits[0] = aDigits[0].split("").reverse().join("")
    .replace(/(\d{3})(?=\d)/g,"$1,").split("").reverse().join("");
  return symbol + aDigits.join(".");
}

function test() {
  var foo = formatCurrency('$', 3.5);
  debugger;
} 
```

将其粘贴，保存，将“选择功能”下拉菜单更改为“测试”并运行它。

* * *

我进行了编辑以声明未声明的变量`aDigits`，但 Google Apps 脚本不需要声明即可工作。但是`var`，关键字应该在那里，否则`aDigits`会泄漏到全局范围内。

# php - 用php下载文件失败

> ID：10494049
> 
> 赞同：1
> 
> 时间：2012-05-08T06:58:19.453
> 
> 标签：php

我拥有的文件是：

```
$file_path='CSVs/data'.time().'TaskID_'.$this->task_id.'.csv'; 
```

然后我把它附加到这个函数上。

```
$save_to="Y:\SEO\Avi\BackLinks";
$this->download_remote_file(
    "http://212.13.98.158/backlinks/".$file_path, $save_to);

function download_remote_file($file_url, $save_to)
{
    $content = file_get_contents($file_url);
    file_put_contents($save_to, $content);
} 
```

该文件应检索文件内容并将其复制到目录中。

我得到的错误与 404 和该文件夹不存在有关。但我确实知道该文件夹存在..而且我很确定链接是指向资源的正确链接

**更新：** 做出改变..这个简单的例子..让我 403 被禁止。说文件或目录不存在。

```
 $save_to="Y:\SEO\Avi\BackLinks\data1335692353TaskID_122.csv";
      $this->download_remote_file("http://212.199.198.158/backlinks/CSVs/data1335692353TaskID_122.csv", $save_to); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:31:05.817

看看你的 file_path: `212.13.98.15/backlinks/data1335692201TaskID_122.csv`。这不是帖子中的路径：`$file_path='CSVs/data'.time().'TaskID_'.$this->task_id.'.csv'`; 删除**CSV/**

那么文件名及其扩展名呢？您需要他们告诉以哪个名称写入文件。

你`$save_to`必须是一种`$save_to="Y:\SEO\Avi\BackLinks\abc.cvs";`

**更新**- 分别尝试每个操作。首先，回显 get_file_contents 或其中的几行。然后尝试在您的保存路径上放置一个简单的“hello.txt”或其他任何内容。

如果那样你会收到同样的错误 - 检查权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:14:25.480

可能远程文件不存在。您用于`time()`构建文件路径：此函数每秒返回不同的值，因此您可以正确打印出现有文件的路径，但一秒钟后路径更改并且您无法下载它。

# android - 在android中禁用编辑文本框后，启用编辑文本框的焦点取决于复选框不起作用

> ID：10494050
> 
> 赞同：0
> 
> 时间：2012-05-08T06:58:27.400
> 
> 标签：android

我试图禁用和启用edittext框的焦点取决于复选框。选中复选框时，文本框是可聚焦的，如果未选中，则文本框应该是不可聚焦的。当我尝试在使用复选框禁用文本框后启用对文本框的聚焦时，它不起作用。这是我的代码。

```
 check_box.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                if(isChecked){
                    txt_time.setFocusable(true);
                } else {
                    txt_time.setFocusable(false);
                }

            }
        }); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:24:45.350

尝试

使能够：

```
txt_time.setFocusableInTouchMode(true);
txt_time.setFocusable(true); 
```

禁用：

```
txt_time.setFocusableInTouchMode(false);
txt_time.setFocusable(false); 
```

代替

使能够：

```
txt_time.setFocusable(true); 
```

禁用：

```
txt_time.setFocusable(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:05:20.790

代替

```
txt_time.setFocusable(true); 
```

尝试

```
txt_time.setEditable(true); 
```

# jakarta-ee - 发生异常时如何从 PDFwriter 取回输出流

> ID：10494054
> 
> 赞同：1
> 
> 时间：2012-05-08T06:58:46.137
> 
> 标签：jakarta-ee, struts, itext

我正面临响应已经提交的问题，因为在创建 PDF 时，如果发生某种错误，则会引发异常，异常处理程序会尝试将其转发到某个错误区域。请帮助我如何丢弃当前的文件处理并获取响应？

提前致谢

**编辑**

```
PdfWriter pdfWriter = PdfWriter.getInstance(document, outputStream);
pdfWriter.setPageEvent(new PageEvents()); 
createPDF(document, fileName, headerNames, headerValues, imageNameList, pageType);     
document.close(); 
outputStream.close(); 
```

如果发生错误`createPDF()`，例如找不到图像，则它会捕获`DocumentException`异常并将自定义异常抛出给动作类，并且动作类会尝试像这样转发响应

```
catch (CustomException e) {
    String csvText = Message.PDF_NOT_GENERATED; 
    forward = mapping.findForward("displayError");
    return (forward); 
} 
```

但是由于pdfwriter，由于输出流被writer占用，服务器在控制台上抛出*响应已经提交*的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-04T16:57:13.490

在关闭输出流的地方创建一个 finally 块，例如：

```
finally {
   if(outStream != null) {
            try {
                outStream.flush();
                outStream.close();
            } catch (IOException e) {
                res.setStatus(HttpStatus.INTERNAL_SERVER_ERROR.value());
                throw new Exception(e);
            }
} 
```

# c++ - 指定函数参数类型，但不指定变量

> ID：10494056
> 
> 赞同：8
> 
> 时间：2012-05-08T06:58:49.570
> 
> 标签：c++, function, parameters, c++11

我以前见过这样的示例代码

```
class C
{
    C();
    ~C();
    foo(T1, T2);
}

C::foo(T1, T2)
{
    //not using T1/T2
} 
```

与这样的传统代码相比

```
class D
{
    D();
    ~D();
    bar(T1 t1, T2 t2);
}

D::bar(T1 t1, T2 t2)
{
    //using t1 and t2
} 
```

我想知道不为可用性定义类型变量的目的是什么？大多数人这样做只是为了暗示api的那些参数当前没有使用，而是为了确保将来的向后兼容性？

是否可能用于 RTTI，或者引用静态变量（尽管我看到的各种示例都没有将它用于此目的，它们甚至没有模板化函数，变量根本没有使用）。我试过搜索这个功能，但我什至不确定它叫什么或搜索什么。

基本上，使用这种方法的原因/好处/缺点是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T07:08:54.783

通常这样做是为了抑制有关未使用变量的编译器警告。当您不创建变量名时，编译器不会警告您该变量未在函数中使用。

就像您所说的那样，通常不会将参数用于特定实现：

```
class an_iface
{
public:
    an_iface();

    virtual int doSomething(int valNeeded)=0;
}

#define NOT_SUPPORTED -1
class something : public an_iface
{
public:
    something();
    int doSomething (int) { return NOT_SUPPORTED; }
}

class somethingMore : public an_iface
{
public:
    somethingMore();
    int doSomething(int stuff) { return stuff * 10; }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T08:33:32.803

除了@dag 提到的之外，没有参数名称的函数定义在模板特化中找到了它的用途。我知道您已经提到您发布的示例中没有模板，但为了完整起见，我想发布这个用例：

假设您已经为容器定义了一个`erase`函数。`std`但是您希望`erase_helper`根据容器类型来做不同的实际工作。一种常见且可接受的做法是使用`traits`.

```
// Tags for containers
struct vector_tag {};
struct map_tag {};

// Trait class
template <typename C> struct container_traits;

// Specialization of trait class
template <typename T, typename A>
  struct container_traits<std::vector<T, A>>
  {
    typedef vector_tag category;
  };

template <typename K, typename V, typename C, typename A>
  struct container_traits<std::map<K, V, C, A>>
  {
    typedef map_tag category;
  };

// Helper function
template <typename Container, typename X>
  void erase_helper(Container& c, const X& x, vector_tag)  // <-- no param name
  {
    // Erase element from vector
  }

template <typename Container, typename X>
  void erase_helper(Container& c, const X& x, map_tag)  // <-- no param name
  {
    // Erase element from map
  }

// Function interface
template <typename Container, typename X>
  void erase(Container& c, const X& x)
  {
    erase_helper(c, x, typename container_traits<Container>::category());
  } 
```

你可以在这里看到，`erase_helper`第三个参数没有名字。参数类型告诉编译器在模板实例化阶段选择正确的函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T07:24:15.287

在更多情况下，参数设计在实现之前，更直接地受到架构的影响

参数可能未使用，因为：

1.  重载具有比派生类中所需参数更多的虚函数
2.  由于历史原因存在参数，并且不想更改 api
3.  考虑未来的需要

# android - 如何在android的webView中设置印地语字体

> ID：10494058
> 
> 赞同：3
> 
> 时间：2012-05-08T06:59:09.757
> 
> 标签：android

我想将 webview 的默认字体更改为自定义字体。我在我的 Android 应用程序中使用 webview。

我尝试通过将自定义字体放在资产中来获取自定义字体的实例。但仍然无法将 webview 的默认字体设置为我的字体。

这是我尝试过的：

```
WebView myWebView = (WebView) findViewById(R.id.myWebView);
myWebView.setBackgroundColor(0x00000000);
myWebView.getSettings().setJavaScriptEnabled(true);
myWebView.loadUrl("file:///android_asset/Hindi/MyHTMLinHindi.html"); 
```

在css文件中我试过：

```
@font-face {
  font-family:Mangal;
  src: url("file:///android_asset/Fonts/mangal.ttf")
  }
  body {
  font-family:Mangal;
  } 
```

请给我建议任何方式.. 提前谢谢..

# tridion - 将启用内联编辑添加到组件模板后预览组件时出错

> ID：10494064
> 
> 赞同：2
> 
> 时间：2012-05-08T06:59:32.307
> 
> 标签：tridion

我正在为 SDL Tridion 2011 SP1 中 Dreamweaver TBB 中的组件启用 SiteEdit 2009。

内容 XML：

```
<Content>
    <AAA>
        <BBB>
            <CCC>Title 1</CCC>
            <DDD>Name 1</DDD>
        </BBB>
        <BBB>
            <CCC>Title 2</CCC>
            <DDD>Name 2</DDD>
        </BBB>
    </AAA>

    <AAA>
        <BBB>
            <CCC>Title 1</CCC>
            <DDD>Name 1</DDD>
        </BBB>
        <BBB>
            <CCC>Title 2</CCC>
            <DDD>Name 2</DDD>
        </BBB>
    </AAA>

</Content> 
```

字段说明如下：

*   AAA - 可重复的嵌入式架构
*   BBB - AAA 中的可重复嵌入模式

Dreamweaver TBB 是：

```
<!-- TemplateBeginRepeat name="AAA" -->

    <!-- TemplateBeginRepeat name="Field.BBB" -->
        <div>@@RenderComponentField(FieldPath+".CCC", 0)@@ </div>
        <div>@@RenderComponentField(FieldPath+".DDD", 0)@@ </div>
    <!-- TemplateEndRepeat -->

<!-- TemplateEndRepeat --> 
```

我在组件模板中添加了这个 TBB 并预览了组件。它显示了没有错误的确切预览。

我的组件模板的高级源代码如下所示：

```
<TemplateInvocation>Dreamweaver TBB</TemplateInvocation>
<TemplateInvocation>Enable Inline Editing</TemplateInvocation> 
```

当我将 SiteEdit 2009 的“启用内联编辑”添加到组件模板时，它显示此错误：

```
Debugging was started in process 'TcmTemplateDebugHost' with id 9244
Object reference not set to an instance of an object.
at Tridion.ContentManager.Templating.Templates.EnableInlineEditing.FindItemFieldXPath(String[] parts, Int32 currentIndex, ItemFields fields, Boolean& isMultiValue)
at Tridion.ContentManager.Templating.Templates.EnableInlineEditing.FindItemFieldXPath(String[] parts, Int32 currentIndex, ItemFields fields, Boolean& isMultiValue)
at Tridion.ContentManager.Templating.Templates.EnableInlineEditing.FindItemFieldXPath(String[] parts, Int32 currentIndex, ItemFields fields, Boolean& isMultiValue)
at Tridion.ContentManager.Templating.Templates.EnableInlineEditing.DetermineXPathForField(TcmUri componentUri, String fieldName, Boolean& isMultiValue)
at Tridion.ContentManager.Templating.Templates.EnableInlineEditing.ProcessComponentFieldTag(ITcdlTag tag)
at Tridion.ContentManager.Templating.TcdlParser.ProcessText(String text, TagHandler tagHandler, Boolean& wasModified)
at Tridion.ContentManager.Templating.TcdlParser.ProcessText(String text, TagHandler tagHandler)
at Tridion.ContentManager.Templating.TcdlParser.Process(Item item, TagHandler tagHandler)
at Tridion.ContentManager.Templating.Assembly.AssemblyMediator.Transform(Engine engine, Template template, Package package)
at Tridion.ContentManager.Templating.Assembly.CSharpSourceCodeMediator.RunTemplate(Engine engine, Package package, String templateUri, String className)
at Tridion.Templating.CSharpTemplate.CSharpSourceTemplate.Transform(Engine __engine, Package __package)
at Tridion.ContentManager.Templating.Assembly.CSharpSourceCodeMediator.Transform(Engine engine, Template template, Package package)
at Tridion.ContentManager.Templating.Engine.ExecuteTemplate(Template template, Package package)
at Tridion.ContentManager.Templating.Engine.InvokeTemplate(Package package, TemplateInvocation templateInvocation, Template template)
at Tridion.ContentManager.Templating.Compound.CompoundTemplateMediator.Transform(Engine engine, Template templateToTransform, Package package)
at Tridion.ContentManager.Templating.Engine.ExecuteTemplate(Template template, Package package)
at Tridion.ContentManager.Templating.Engine.InvokeTemplate(Package package, TemplateInvocation templateInvocation, Template template)
at Tridion.ContentManager.Templating.Engine.TransformPackage(Template template, Package package)
at Tridion.ContentManager.Templating.Debugging.DebuggingEngine.Run()
at Tridion.ContentManager.Templating.Debugging.DebugSession.Run() 
```

任何人都可以分享他们对此的看法吗？

它是 SiteEdit 2009 的限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:38:13.957

看起来您已经阅读了此答案并尝试应用它：[如何在 SDL Tridion 2011 SP1 中处理 Dreamweaver TBB 中的嵌套重复区域](https://stackoverflow.com/questions/10309577/how-to-handle-nested-repeating-regions-in-dreamweaver-tbbs-in-sdl-tridion-2011-s/10322575#10322575)

在那种情况下，您是否也遵循了该答案中的调试提示？如果是这样，您看到的输出是什么？

> 许多人在编写这样的结构时遇到问题。我也不例外，我刚刚发现通过知道关键变量是：Field、FieldPath 和 TemplateRepeatIndex，我可以让大多数情况正常工作。如有疑问，只需将此片段嵌入到每个 TemplateBeginRepeat 内的 DWT 中。

```
(FieldPath=@@FieldPath@@, TemplateRepeatIndex=@@TemplateRepeatIndex@@) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:02:05.933

我猜这些行有问题：

> @@RenderComponentField(FieldPath+".CCC", 0)@@

我会尝试写出 FieldPath+".CCC" 连接，看看你实际上可以得到那个值。我的印象是，通过连接两个字符串是不可能获得字段值的，并且只能在`@@string_field_name${templateRepeatIndex}@@`（与重复索引连接的字段值）**上实现，但我已经有一段时间没有尝试过了，所以真的看看你是否可以先得到输出的值**

如果您仍然无法解决它，您是否可以提供实际的组件 XML 和实际的 DWT 代码？根据提供的示例代码提供解决方案并不容易。

谢谢

# php - SMTP 服务器响应：501 <>：本地部分缺失或格式错误

> ID：10494065
> 
> 赞同：2
> 
> 时间：2012-05-08T06:59:33.583
> 
> 标签：php, email, smtp

我正在使用 mime_mailer.php 发送电子邮件。当我发送电子邮件时，它显示以下错误：

```
Warning:    mail() [function.mail]: SMTP server response: 501 <>: missing or malformed local part
Script:     /ppm/lm_response.php
File:   mime_mailer.php
Line:   33
Time:   2012-05-08 23:55:50 (PDT)
Warning:    Cannot modify header information - headers already sent by (output started at D:\xampp\htdocs\ppm\common.php:275)
Script:     /ppm/lm_response.php
File:   lm_response.php
Line:   44
Time:   2012-05-08 23:55:50 (PDT) 
```

标题看起来像这样：

```
To: abc@ourdomain.com
From: def@ourdomain.com
X-Mailer: PHP/5.2.9 
Content-Type: text/html; charset=iso-8859-1 
Cc: ghi@ourdomain.com, 
MIME-Version: 1.0
Content-Type: multipart/related; boundary="mime_boundry_multipart/related_c6644189126a16de6271c67af235ddd0x" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:53:03.840

我敢打赌它抱怨抄送：字段中的空地址。去掉后面的逗号，你应该没问题。

# mysql - 引用`标识符`时出现MySQL错误

> ID：10494067
> 
> 赞同：1
> 
> 时间：2012-05-08T06:59:41.897
> 
> 标签：mysql

不知何故，我不能在查询中使用引号。
例如，一个简单的查询：

```
create table `T1`( `f1` integer ); 
```

给出一个错误：

```
错误代码：1064。您的 SQL 语法有错误；
检查与您的 MySQL 服务器版本相对应的手册在第 1 行的 ' `T1`(`f1` integer) '
附近使用正确的语法。

```

为什么会这样？
我正在使用 MySQL 服务器 5.5.20 和 MySQL Workbench。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:46:25.177

语法是正确的，
但是在`table`.

# android - Android、SQLite 事务和进程冻结

> ID：10494069
> 
> 赞同：0
> 
> 时间：2012-05-08T06:59:59.430
> 
> 标签：android, sqlite, transactions

我正在处理大量用于验证 AsyncTask 对象中的本地数据存储的 XML 数据。首先，我尝试将事务用于这些操作，但是当事务正在进行时，用户的任何其他操作都会使应用程序冻结并等待事务完成，有时甚至使应用程序停止响应。

事务被分为几个步骤，有时每次迭代可以计算到数百个。由于我从使用事务到非常慢但解决了冻结的实时查询的问题 - 导致非常耗电的应用程序。

我的问题是；有没有办法阻止事务锁定数据库？还是我的问题是交易前准备不足造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:24:01.153

事务往往会在执行业务时锁定您的表，因此您无法同时在同一个实例上执行事务和非事务查询。

但是，您需要做的是首先处理您的数据 (xml)（这可能很耗时），然后在您准备好数据后启动事务。

PS 我个人建议您在插入多条记录时使用事务（以一种有效的方式），因为它创建一个*日志文件*来处理所有插入并大大加快 SQLite 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T14:58:27.660

让你的交易更小，不要忘记（就像我一样）如果抛出异常仍然结束交易 - 使用try，catch，finally......

# c# - C# 中 lambda 变量的作用域是什么？

> ID：10494074
> 
> 赞同：65
> 
> 时间：2012-05-08T07:00:34.600
> 
> 标签：c#, lambda, scope

我对 lambda 变量的范围感到困惑，例如以下

```
var query = 
    from customer in clist
    from order in olist
    .Where(o => o.CustomerID == customer.CustomerID && o.OrderDate ==  // line 1
        olist.Where(o1 => o1.CustomerID == customer.CustomerID)        // line 2
             .Max(o1 => o1.OrderDate)                                  // line 3
    )
    select new {
        customer.CustomerID,
        customer.Name,
        customer.Address,
        order.Product,
        order.OrderDate
    }; 
```

在第 1 行中，我声明了一个 lambda 变量 'o'，这意味着我不能在第 2 行中再次声明它（或者如果我尝试这样做，至少编译器会抱怨）但是即使 'o1' 已经存在，它也不会抱怨第 3 行??

lambda 变量的作用域是什么？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-05-08T07:07:02.963

括号给出了线索​​ - lambda 变量在它声明的范围内被捕获：

```
.Where(o => ... olist.Where(o1 => ...).Max(o1 => ...))
  //  |----------------------------------------------| scope of o
  //                       |---------|                 scope of first o1
  //                                      |---------|  scope of second o1 
```

请注意，这两个变量没有重叠`o1`，但它们都重叠（或隐藏）`o`变量，因此不能使用相同的名称。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-08T07:03:23.117

lambda 参数的范围等于 lambda 表达式主体的整个范围，包括任何内部 lambda 表达式或范围。

如果我们扩展您的 lambda 表达式的语法并添加一些友好的缩进，它可能会变得更清晰（尽管可能没有[yamen 的图解答案](https://stackoverflow.com/a/10494156/106224)那么清晰！）：

```
.Where(o => {
    return o.CustomerID == customer.CustomerID
        && o.OrderDate == olist.Where(
            o1 => o1.CustomerID == customer.CustomerID
        )
        .Max(
            o1 => o1.OrderDate
        );
}) 
```

请注意，您的`.Where().Max()`呼叫位于外部`.Where()`. 外部 lambda 中的`o`in 被内部 lambda 中的外部 lambda 封装（这称为*闭包*），因此它已经存在于内部 lambda 的范围内，并且不能作为参数重用。

您可以重用`o1`，因为您的两个内部 lambda 彼此完全分开，因此它不会超出任何一个的范围。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T07:05:45.703

如果一个作用域包含另一个作用域，则不能在两个作用域中使用相同的变量名。

在您的问题中，`o`是在外部范围中引入的，因此它不能在第二个`Where()`或 in 中再次使用`Max()`，因为这些范围包含在外部范围中。

另一方面，您可以`o1`在两个内部范围中使用，因为一个不包含另一个，所以那里没有歧义。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-08T07:03:05.093

因为 lamda 是你代码中匿名函数的替换

**相同范围**

```
Where(o => o.CustomerID == customer.CustomerID && o.OrderDate ==   //line 1
         olist.Where(o1 => o1.CustomerID == customer.CustomerID)   //line 2 
```

是变量“o”所在的函数范围

在第三行，这是变量的新片段，即新函数范围

**不同的范围**

```
 .Max(o1 => o1.OrderDate)   )        //line 3 
```

所以这是第1行和第2行中的共振，第1行中定义的变量“o”不能在第2行中定义，因为相同的scrop和第2行中定义的“o1”可以在第3行中再次定义，因为它在不同的函数范围内

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T07:03:59.900

C# 不支持这样的阴影。

原因`o1`再次起作用，是它不会影响以前的`o1`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-08T07:07:34.890

它与任何其他变量相同。的范围`o`是第一个中的整个表达式`Where`，因此您不能在第二个中再次使用它，第二个在第一个中。但是范围`o1`只是你的第二个中的表达式`Where`，所以你可以在你的第二个`Max`之外的表达式中使用它`Where`。在代码中：

```
// o scope lasts until the first bracket is closed
Where(o => o.CustomerID == customer.CustomerID && o.OrderDate ==
// o1 scope lasts until the second bracket is closed; the first is not yet closed here
        olist.Where(o1 => o1.CustomerID == customer.CustomerID)
// The second bracket is closed, so o1 is already out of scope; o is still in scope
             .Max(o1 => o1.OrderDate)
)
// The first bracket is closed, so o is finally out of scope 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-08T07:14:16.447

我试着按照你的代码把它画成这样......

```
.Where(o => o.CustomerID == customer.CustomerID && o.OrderDate ==  // line 1
        olist.Where(o1 => o1.CustomerID == customer.CustomerID)        // line 2
             .Max(o1 => o1.OrderDate)                                  // line 3
    ) 
```

相当粗略的解释方式，但你的括号决定了范围。你的第二个 o1 没有嵌套在第二个里面，否则你会遇到同样的问题

```
//outermost where

((BEGIN-o

//inner where

(BEGIN-o1 END-o1)

//max

(BEGIN-o1 END-o1)

END-o)) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-08T12:56:29.077

```
var external = 1;

//This is a scope
Action scope = new Action(() =>
{
    //myVar is not accessible from outside
    var myVar = 0 + external;
    Console.WriteLine(myVar); //outputs 1
});

//Call the scope
scope();
//Console.WriteLine(myVar);//Will not compile 
```

编译代码时，Action 中声明的 void 中的所有逻辑 `()=>{ ... }`都将移动到名称错误的类型上的方法。

当新创建的函数到达堆栈上的那个位置时，运行时将调用它。

您可以通过各种方式将值传递到范围/ lambda，这对于将它们取出是相同的。

在 lambda 中声明的变量不能以其声明的名称在外部访问。

也可以利用反射来提取损坏的名称，但我不确定您是否需要。（如果我错了，请告诉我。）

# asp.net-mvc-3 - 在局部视图中编辑集合

> ID：10494075
> 
> 赞同：2
> 
> 时间：2012-05-08T07:00:35.253
> 
> 标签：asp.net-mvc-3, entity-framework-4.3, entity-framework-migrations

我在更新对象的子集合（[外键约束，带有子对象集合的 EF](https://stackoverflow.com/questions/10170101/foreign-key-constraint-ef-with-collection-of-childobjects/)）时遇到问题，使用本指南解决了这个问题：http: [//www.codetuning.net/blog/post/Binding-Model-Graphs-with- ASPNETMVC.aspx](http://www.codetuning.net/blog/post/Binding-Model-Graphs-with-ASPNETMVC.aspx)

在清理我的代码时，我将集合编辑移至局部视图。

```
@Html.Partial("_AttendeeInformationFields", Model.CaptureAttendeeInformationFields) 
```

部分视图如下所示

```
@model ICollection<EventModel.Models.AttendeeInformationField>
<table id="CaptureAttendeeInformationFields">
    <tr>
        <th>@Html.GetDisplayName(model => model.FirstOrDefault().Name)</th>
        <th>@Html.GetDisplayName(model => model.FirstOrDefault().Required)</th>
        <th>@Html.GetDisplayName(model => model.FirstOrDefault().FieldType)</th>
        @*<th>@Html.GetDisplayName(model => model.FirstOrDefault().InputType)</th>*@
    </tr>
    @Html.EditorForModel()
</table>
@Html.LinkToAddNestedForm("Lägg till", "#CaptureAttendeeInformationFields", ".AttendeeInformationField", "CaptureAttendeeInformationFields", typeof(EventModel.Models.AttendeeInformationField))
@Html.ValidationMessageFor(model => model) 
```

然后我有一个AttendeeInformationField 的EditorTemplate，看起来像这样

```
@model EventModel.Models.AttendeeInformationField
<tr class="AttendeeInformationField">
@using (Html.BeginCollectionItem("CaptureAttendeeInformationFields"))
{
    <td>@Html.TextBoxFor(model => model.Name) @Html.HiddenFor(model => model.MagnetEventId) @Html.HiddenFor(model => model.Id)</td>
    <td>@Html.CheckBoxFor(model => model.Required)</td>
    <td>@Html.DropDownListFor(model => model.FieldType, new SelectList(Enum.GetValues(typeof(EventModel.Models.FieldType)), Model.FieldType))</td>
    @*<td>@Html.TextBoxFor(model => model.InputType)</td>*@
}
</tr> 
```

BeginCollectionItem 来自本指南： http: [//ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/](http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/) 这有助于我做两件事 1 . 索引不再是一个从 0 开始的连续整数系列，我可以重新排序我的项目，以及添加/删除而不用担心破坏序列。2\. 部分似乎失去了上下文，我的控件得到了像“[0].Required”这样的名称，它应该是“CaptureAttendeeInformationField[0].Required”。BeginCollectionItem 负责这个。

当前的问题是这些修复似乎不兼容。我想这可能与第一篇文章中的免责声明有关：

> 在这个实现中，我们假设索引是一个从 0 开始的整数

我希望有人能指出我正确的方向。在此解决方案中添加项目有效。

**丑陋的解决方案** 我当然希望这不是唯一的方法，但现在我已经解决了这样的问题：

```
foreach (var attendeeInformationField in viewModel.AttendeeInformationFields)
        {
            var attendeeInformationFieldId = attendeeInformationField.Id;
            var originalAttendeeInformationField = original.CaptureAttendeeInformationFields.FirstOrDefault(aif => aif.Id == attendeeInformationFieldId);
            if (originalAttendeeInformationField==null)
            {
                original.CaptureAttendeeInformationFields.Add(attendeeInformationField);
            }
            else
            {
                if (originalAttendeeInformationField != attendeeInformationField)
                {
                    originalAttendeeInformationField = attendeeInformationField;
                    originalAttendeeInformationField.FieldType = attendeeInformationField.FieldType;
                    //originalAttendeeInformationField.InputType = attendeeInformationField.InputType;
                    originalAttendeeInformationField.Name = attendeeInformationField.Name;
                    originalAttendeeInformationField.Required = attendeeInformationField.Required;
                }
            }
        } 
```

我一点也不喜欢它，但它确实有效。必须有更好的方法来做到这一点。

# email - Magento 更改密码重置电子邮件模板

> ID：10494076
> 
> 赞同：1
> 
> 时间：2012-05-08T07:00:46.330
> 
> 标签：email, templates, magento, forgot-password

我正在使用 magento 1.6.1.0 构建一个电子商务网站。我正在使用一种扩展程序，它会强制用户在进入网站之前登录。一切正常，问题仅在于忘记密码重置链接。该扩展程序也阻止了此重置密码链接。我没有得到那个扩展团队的任何支持。

今天早上我在电子邮件模板中工作以更改 magento 默认徽标。那时我有一个想法，在创建新帐户时，我们将获得电子邮件、密码的详细信息。为什么我们不能使用该电子邮件模板而不是重置密码链接模板？

我尝试复制粘贴所有内容 from `account_new.html`to `account_password_reset_confirmation.html`from`app/locale/en_US/template/email`

完成这些更改后，我收到一封带有 emailL:xxx@mydomain.com 和密码的电子邮件：

我收到的邮件是空密码字段。

请指导我将忘记密码的模板从更改为`account_password_reset_confirmation.html`，`account_new.html`以便我可以直接发送密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T08:34:55.380

如果您使用，我可以调试您的代码吗

```
$customer = Mage::getModel("customer/customer");
         $customer->setWebsiteId(Mage::app()->getWebsite()->getId());
         $customer->getPassword(); 
```

它不会工作。密码将在数据库中加密。所以你不能利用它。唯一的方法是生成新密码并在数据库中更新它并将新密码发送到用户邮件。

生成自定义密码的示例代码

```
$alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789";     //Random password generation
             $pass = array(); //remember to declare $pass as an array
             $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache
             for ($i = 0; $i < 6; $i++) {
                 $n = rand(0, $alphaLength);
                 $pass[] = $alphabet[$n];
             }
             $newpassword =implode($pass); 
```

# matlab - 从数组中选择比其他数字大得多的数字

> ID：10494078
> 
> 赞同：3
> 
> 时间：2012-05-08T07:00:48.170
> 
> 标签：matlab, math, numbers

假设有一个由 n 个元素组成的数组，并且在 n 个元素中，有一些数字比其他的大得多。

所以，我可能有：

```
16, 1, 1, 0, 5, 0, 32, 6, 54, 1, 2, 5, 3 
```

`32`在这种情况下，我会对 和`16`感兴趣`54`。

或者，我可能有：

```
32, 105, 26, 5, 1, 82, 906, 58, 22, 88, 967, 1024, 1055 
```

在这种情况下，我会对`1024`、和感兴趣。`906``967``1055`

我正在尝试编写一个函数来提取感兴趣的数字。问题是我无法定义一个阈值来确定什么是“更大”，而且我不能只告诉它获得`x`最大的数字，因为这两者都会根据调用函数的对象而有所不同。

我有点卡住了。有谁知道如何攻击这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:06:34.143

仅仅取所有大于平均值的数字并不能一直减少它。例如，如果您只有一个更大的数字，但更多的数字彼此接近。一个大的数字不会使均值发生很大的变化，这会导致取太多的数字：

```
data = [ones(1,10) 2*ones(1,10) 10];
data(data>mean(data))

ans =

      2     2     2     2     2     2     2     2     2     2    10 
```

如果你看看数字之间的差异，这个问题就解决了：

```
>> data = [16, 1, 1, 0, 5, 0, 32, 6, 54, 1, 2, 5, 3];
sorted_data = sort(data);
dd = diff(sorted_data);
mean_dd = mean(dd);
ii = find(dd> 2*mean_dd,1,'first');
large_numbers = sorted_data(ii:end);

large_numbers =

   6    16    32    54 
```

阈值（在本例中为 2）让您可以理解数字必须大于“多少”的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T18:52:52.243

如果是我，我会使用更多的统计洞察力，这将为将来的代码提供最大的灵活性。

```
x           = [1 2 3 2 2 1 4 6 15 83 2 4 22  81 0  8 7 7 7 3 1 2 3]
EpicNumbers = x( x>(mean(x) + std(x)) ) 
```

然后，您可以增加或减少标准偏差的数量以扩大或收紧您的阈值。

```
LessEpicNumbers = x( x>(mean(x) + 2*std(x)) )
MoreEpicNumbers = x( x>(mean(x) + 0.5*std(x)) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:07:03.053

一个简单的解决方案是使用 find 和基于平均值（或其倍数）的阈值：

```
a = [16, 1, 1, 0, 5, 0, 32, 6, 54, 1, 2, 5, 3]
find(a>mean(a)) 
```

# ruby - Haml 将输入元素呈现为转义

> ID：10494079
> 
> 赞同：1
> 
> 时间：2012-05-08T07:01:02.710
> 
> 标签：ruby, ruby-on-rails-3, firefox, haml

我有一个喜欢的火腿；

```
= form_for @company, :html => {:multipart => true}, :url => update_user_company_path do |f|
  .field
    Title:#{f.text_field :name}
  = f.fields_for :attachments do |builder|
    - if builder.object.new_record?
      .field
        = builder.hidden_field :name, :value => 'logo'
        = builder.file_field :file
    - elsif builder.object.name.eql?('logo') && !builder.object.file.url.eql?('/files/original/missing.png')
      .field
        %span.thumbnail
          = link_to "Delete", delete_company_attachment_path(@company, builder.object), :method => :delete, :class => "remove_image"
          = image_tag builder.object.file.url, :style => "height:86px;width:125px"
  = f.submit 'Ok' 
```

Chrome 按预期呈现此代码，但在 Firefox 中是这样的；

```
<form method="post" id="edit_company_29" enctype="multipart/form-data" class="edit_company" action="/users/25/company" accept-charset="UTF-8"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="put" name="_method"><input type="hidden" value="thisismytokenvalue=" name="authenticity_token"></div>
  <div class="field">
    Title:<input type="text" value="sdgdfgghjh" size="30" name="company[name]" id="company_name">
  </div>
  &lt;input id="company_attachments_attributes_0_id" name="company[attachments_attributes][0][id]" type="hidden" value="114" /&gt;&lt;input id="company_attachments_attributes_1_id" name="company[attachments_attributes][1][id]" type="hidden" value="115" /&gt;<div class="field">
    <input type="hidden" value="logo" name="company[attachments_attributes][2][name]" id="company_attachments_attributes_2_name">
    <input type="file" name="company[attachments_attributes][2][file]" id="company_attachments_attributes_2_file">
  </div>
  <input type="submit" value="Ok" name="commit">
</form> 
```

为什么一个元素被转义。如果你检查haml，你可以看到我没有放它们。

*   它从哪里来的？
*   为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T21:02:39.403

哇...我刚刚遇到了类似的问题。我的猜测是，如果您将 nil 传递给 form_builder 的 fields_for，则 hidden_​​input 不会随 html_safe 返回。为了快速解决这个问题，添加一个

```
-else
  ="" 
```

在整个 elsif 块之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T06:09:34.340

您必须返回块中以外`nil`的内容。`fields_for`

在 @lulalala的帮助下，[mattwildig](https://stackoverflow.com/users/474597/lulalala)[在 Haml 4.0.4 中修复了这个问题](https://github.com/haml/haml/issues/439)。以下是对问题的解释：

> 助手为每条记录生成一个隐藏的`#fields_for`输入字段，并将其添加到捕获块的结果中。通常返回值`capture`是 a `SafeBuffer`，所以不会被转义。但是，如果块没有向缓冲区写入任何内容，则 Haml`String`从`capture`. 隐藏的输入元素被连接到这个字符串，并且当它与其余条目组合时，由于它是 a`String`被添加到 a `SafeBuffer`，它被转义。

# arrays - 如何在最大值中使用for循环迭代地为变量赋值？

> ID：10494085
> 
> 赞同：1
> 
> 时间：2012-05-08T07:01:41.727
> 
> 标签：arrays, for-loop, maxima

我正在使用 for 循环将值分配给 xmaxima 中的变量，更准确地说是矩阵。这些值似乎存储在各个索引中，但我无法通过调用矩阵变量名称来调用整个矩阵值。

例如：

假设我正在分配`xreal[1]=5; xreal[2]=6;...... xreal[5]=9`. 我希望 xreal 拥有`[5 6 7 8 9]`，这没有发生。

下面是我的代码。这样做的正确方法是什么？

```
k:1;
for i from 1 thru length(xvals) do (
(if(imagpart(xvals[i]) = 0) then xreal[k]:xvals[i]),k:k+1
); 
```

这里，

```
xreal[1]; gives 0.06111
xreal[2]; gives 0.080 and so on. 
```

但`xreal`只是给出“xreal”，即变量名本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:34:20.570

您必须先简单地初始化矩阵。

例子：

```
(%i1)  m:zeromatrix(1,3);
(%o1)  [0 0 0]

(%i2)  for i from 1 thru 3 do (
       m[1,i]: i);
       m;
(%o2)  [1 2 3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T14:40:28.397

这是一个更简单的方法。

制作清单（如果 imagpart（xvals[s]）=0.....，i,1，长度（xvals））

# entity-framework - 为什么在使用 LINQ to Entities Include() 时没有包含我的参考属性之一？

> ID：10494086
> 
> 赞同：0
> 
> 时间：2012-05-08T07:01:42.630
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

我有以下属性声明和映射（精简类）：

```
public class Consumer: AuditableEntity
{
    public virtual Consumer Parent { get; set; }
    public virtual User User { get; set; }
    public virtual Role Role { get; set; }
    public virtual ICollection<Consumer> Consumers { get; set; }
}

public ConsumerMap()
{
    HasRequired(t => t.Role)
        .WithMany(t => t.Consumers)
        .Map(a => a.MapKey("RoleId"))
        .WillCascadeOnDelete(false);
    HasRequired(t => t.User)
        .WithOptional(t => t.Consumer)
        .Map(a => a.MapKey("UserId"))
        .WillCascadeOnDelete(false);
} 
```

手动数据库查询确认所有连接都成功，事实上，手动执行 EF 发送的查询是成功的。然而，当我使用以下查询时，返回`User`的两个`Consumer`对象的属性为空：

```
return CurrentDbContext.Consumers.Include("User").Include("Role").Where(e => !e.IsDeleted); 
```

# netbeans - “外部”JAR 在哪里？

> ID：10494090
> 
> 赞同：0
> 
> 时间：2012-05-08T07:02:41.430
> 
> 标签：netbeans, ant, ide, build, package

带有 JAR 的 lib 文件夹在哪里？从另一个目录加载 JAR 有什么魔力吗？

**具体来说，beanbinding-1.2.1.jar 在哪里，另一个 jar 是 swing-layout-1.0.4.jar？**

图片 ![在此处输入图像描述](../Images/1b83d0de3aa01c5c6068a88f15012179.png)

目录结构：

```
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ tree fud/
fud/
├── build.xml
├── manifest.mf
├── nbproject
│   ├── build-impl.xml
│   ├── genfiles.properties
│   ├── private
│   │   ├── private.properties
│   │   └── private.xml
│   ├── project.properties
│   └── project.xml
└── src
    └── dur
        └── bounceme
            └── net
                └── view
                    ├── NewJFrame.form
                    └── NewJFrame.java

7 directories, 10 files
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ head fud/build.xml 
<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See commented blocks below for -->
<!-- some examples of how to customize the build. -->
<!-- (If you delete it and reopen the project it will be recreated.) -->
<!-- By default, only the Clean and Build commands use this build script. -->
<!-- Commands such as Run, Debug, and Test only use this build script if -->
<!-- the Compile on Save feature is turned off for the project. -->
<!-- You can turn off the Compile on Save (or Deploy on Save) setting -->
<!-- in the project's Project Properties dialog box.-->
<project name="fud" default="default" basedir=".">
thufir@dur:~/NetBeansProjects$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:05:28.840

您可以选择在 Add Library 下方添加 Jar/Folder。使用那个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:14:53.487

仅供参考，我得到以下结构：

```
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ tree fud/
fud/
├── build.xml
├── lib
│   ├── beans-binding
│   │   ├── beansbinding-1.2.1-doc.zip
│   │   └── beansbinding-1.2.1.jar
│   ├── CopyLibs
│   │   └── org-netbeans-modules-java-j2seproject-copylibstask.jar
│   ├── nblibraries.properties
│   └── swing-layout
│       ├── swing-layout-1.0.4-doc.zip
│       ├── swing-layout-1.0.4.jar
│       └── swing-layout-1.0.4-src.zip
├── manifest.mf
├── nbproject
│   ├── build-impl.xml
│   ├── genfiles.properties
│   ├── private
│   │   ├── config.properties
│   │   ├── private.properties
│   │   └── private.xml
│   ├── project.properties
│   └── project.xml
└── src
    └── dur
        └── bounceme
            └── net
                └── view
                    ├── NewJFrame.form
                    └── NewJFrame.java

11 directories, 18 files
thufir@dur:~/NetBeansProjects$ 
```

通过单击项目属性，如下所示：

![在此处输入图像描述](../Images/308c409eb71fcc9f239ac279a6e2c280.png)

但不明白这个 JAR**以前在**哪里。

# java - Java VisualVM 挂起连接到从 Eclipse 启动的本地进程

> ID：10494095
> 
> 赞同：39
> 
> 时间：2012-05-08T07:02:59.627
> 
> 标签：java, visualvm

我正在尝试将使用 jdk1.7.0_04 安装的 jvisualvm 连接到本地运行的 java 进程。当我这样做时，jvisualvm 在左下角显示一个进度条，说明它连接到进程，然后再也没有响应。

我尝试连接的 java 进程仍然可以正常工作。

我可以使用 jstack 获取 visualvm 的线程转储，显示 1 个阻塞线程。

```
AWT-EventQueue-0" prio=6 tid=0x04a1a000 nid=0x1110 waiting for monitor entry [0x062af000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at com.sun.tools.visualvm.core.model.ModelFactory.getModel(ModelFactory.java:76)
        - waiting to lock <0x289584f0> (a com.sun.tools.visualvm.jvmstat.application.JvmstatApplication)
        at com.sun.tools.visualvm.core.datasource.descriptor.DataSourceDescriptorFactory.getDescriptor(DataSourceDescriptorFactory.java:49) 
```

我无法连接到任何 java 进程，即使是一个只等待用户输入的微不足道的进程。jdk1.6.0_32 我也有同样的问题。

-- 我发现这只会影响我从 Eclipse 启动的 Java 进程。可以从调试角度启动命令 eclipse 并打开进程属性。从命令提示符启动相同的进程（使用我从 eclipse 复制的命令）允许来自 jvisualvm 和 jconsole 的连接。

完整的线程转储：

```
2012-05-10 13:18:47
Full thread dump Java HotSpot(TM) Client VM (23.0-b21 mixed mode, sharing):

"Inactive RequestProcessor thread [Was:TimedSoftReference/org.openide.util.TimedSoftReference]" daemon prio=2 tid=0x00e12800 nid=0xa5c in Object.wait() [0x0587f000]
java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x22d6a578> (a java.lang.Object)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:1880)
    - locked <0x22d6a578> (a java.lang.Object)

Locked ownable synchronizers:
    - None

"pool-4-thread-1" prio=6 tid=0x063ddc00 nid=0x1a70 waiting on condition [0x0750f000]
java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x23440068> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Locked ownable synchronizers:
    - None

"pool-3-thread-1" prio=6 tid=0x00fe7400 nid=0x16a0 waiting on condition [0x05a7f000]
java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x28a7ccd8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Locked ownable synchronizers:
    - None

"Timer-1" daemon prio=2 tid=0x04c63800 nid=0x1f00 in Object.wait() [0x07f1f000]
java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x289e6688> (a java.util.TaskQueue)
    at java.util.TimerThread.mainLoop(Timer.java:552)
    - locked <0x289e6688> (a java.util.TaskQueue)
    at java.util.TimerThread.run(Timer.java:505)

Locked ownable synchronizers:
    - None

"TimerQueue" daemon prio=6 tid=0x04b82c00 nid=0x124 waiting on condition [0x070df000]
java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x285f8b20> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)
    at java.util.concurrent.DelayQueue.take(DelayQueue.java:220)
    at javax.swing.TimerQueue.run(TimerQueue.java:171)
    at java.lang.Thread.run(Thread.java:722)

Locked ownable synchronizers:
    - <0x2862c110> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

"Thread-3" daemon prio=6 tid=0x04b7b400 nid=0x1c18 in Object.wait() [0x06edf000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28562950> (a java.util.LinkedList)
    at java.lang.Object.wait(Object.java:503)
    at java.util.prefs.AbstractPreferences$EventDispatchThread.run(AbstractPreferences.java:1476)
    - locked <0x28562950> (a java.util.LinkedList)

Locked ownable synchronizers:
    - None

"DataSourceWindowManager Processor" daemon prio=2 tid=0x04b28c00 nid=0x11e0 runnable [0x06cdf000]
java.lang.Thread.State: RUNNABLE
    at sun.tools.attach.WindowsVirtualMachine.connectPipe(Native Method)
    at sun.tools.attach.WindowsVirtualMachine.execute(WindowsVirtualMachine.java:100)
    at sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:58)
    at sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:79)
    at sun.tools.attach.HotSpotVirtualMachine.loadAgent(HotSpotVirtualMachine.java:103)
    at com.sun.tools.visualvm.jmx.impl.JmxModelImpl$LocalVirtualMachine.loadManagementAgent(JmxModelImpl.java:676)
    - locked <0x23440218> (a com.sun.tools.visualvm.jmx.impl.JmxModelImpl$LocalVirtualMachine)
    at com.sun.tools.visualvm.jmx.impl.JmxModelImpl$LocalVirtualMachine.startManagementAgent(JmxModelImpl.java:633)
    - locked <0x23440218> (a com.sun.tools.visualvm.jmx.impl.JmxModelImpl$LocalVirtualMachine)
    at com.sun.tools.visualvm.jmx.impl.JmxModelImpl$ProxyClient.tryConnect(JmxModelImpl.java:450)
    at com.sun.tools.visualvm.jmx.impl.JmxModelImpl$ProxyClient.connect(JmxModelImpl.java:420)
    at com.sun.tools.visualvm.jmx.impl.JmxModelImpl.connect(JmxModelImpl.java:200)
    at com.sun.tools.visualvm.jmx.impl.JmxModelImpl.<init>(JmxModelImpl.java:170)
    at com.sun.tools.visualvm.jmx.impl.JmxModelProvider.createModelFor(JmxModelProvider.java:45)
    at com.sun.tools.visualvm.jmx.impl.JmxModelProvider.createModelFor(JmxModelProvider.java:22)
    at com.sun.tools.visualvm.core.model.ModelFactory.getModel(ModelFactory.java:91)
    - locked <0x289f8fe0> (a com.sun.tools.visualvm.jvmstat.application.JvmstatApplication)
    at com.sun.tools.visualvm.tools.jmx.JmxModelFactory.getJmxModelFor(JmxModelFactory.java:49)
    at com.sun.tools.visualvm.application.views.threads.ApplicationThreadsViewProvider.resolveThreads(ApplicationThreadsViewProvider.java:63)
    at com.sun.tools.visualvm.application.views.threads.ApplicationThreadsViewProvider.supportsViewFor(ApplicationThreadsViewProvider.java:29)
    at com.sun.tools.visualvm.application.views.threads.ApplicationThreadsViewProvider.supportsViewFor(ApplicationThreadsViewProvider.java:25)
    at com.sun.tools.visualvm.core.ui.DataSourceViewsManager.getViews(DataSourceViewsManager.java:116)
    at com.sun.tools.visualvm.core.ui.DataSourceWindowManager.openWindowAndAddView(DataSourceWindowManager.java:169)
    at com.sun.tools.visualvm.core.ui.DataSourceWindowManager.access$000(DataSourceWindowManager.java:30)
    at com.sun.tools.visualvm.core.ui.DataSourceWindowManager$1.run(DataSourceWindowManager.java:80)
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1385)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:1929)

Locked ownable synchronizers:
    - None

"AWT-EventQueue-0" prio=6 tid=0x049fa000 nid=0x1b90 waiting on condition [0x062af000]
java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x28310488> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.awt.EventQueue.getNextEvent(EventQueue.java:511)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:213)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)

Locked ownable synchronizers:
    - None

"AWT-Windows" daemon prio=6 tid=0x049cc000 nid=0x12b0 runnable [0x0608f000]
java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(WToolkit.java:299)
    at java.lang.Thread.run(Thread.java:722)

Locked ownable synchronizers:
    - None

"AWT-Shutdown" prio=6 tid=0x049cb400 nid=0x1954 in Object.wait() [0x05e8f000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28430620> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:503)
    at sun.awt.AWTAutoShutdown.run(AWTAutoShutdown.java:287)
    - locked <0x28430620> (a java.lang.Object)
    at java.lang.Thread.run(Thread.java:722)

Locked ownable synchronizers:
    - None

"Java2D Disposer" daemon prio=10 tid=0x010a4000 nid=0x1dd4 in Object.wait() [0x05c8f000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28378258> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
    - locked <0x28378258> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
    at sun.java2d.Disposer.run(Disposer.java:145)
    at java.lang.Thread.run(Thread.java:722)

Locked ownable synchronizers:
    - None

"CLI Requests Server" daemon prio=6 tid=0x01058000 nid=0x1a58 runnable [0x0567f000]
java.lang.Thread.State: RUNNABLE
    at java.net.TwoStacksPlainSocketImpl.socketAccept(Native Method)
    at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:183)
    - locked <0x28378700> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:522)
    at java.net.ServerSocket.accept(ServerSocket.java:490)
    at org.netbeans.CLIHandler$Server.run(CLIHandler.java:1042)

Locked ownable synchronizers:
    - None

"Active Reference Queue Daemon" daemon prio=2 tid=0x01028c00 nid=0x17b4 in Object.wait() [0x049af000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28378878> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
    - locked <0x28378878> (a java.lang.ref.ReferenceQueue$Lock)
    at org.openide.util.lookup.implspi.ActiveQueue$Impl.run(ActiveQueue.java:64)
    at java.lang.Thread.run(Thread.java:722)

Locked ownable synchronizers:
    - None

"Timer-0" daemon prio=6 tid=0x01015400 nid=0x1ce8 in Object.wait() [0x047af000]
java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28378910> (a java.util.TaskQueue)
    at java.util.TimerThread.mainLoop(Timer.java:552)
    - locked <0x28378910> (a java.util.TaskQueue)
    at java.util.TimerThread.run(Timer.java:505)

Locked ownable synchronizers:
    - None

"Service Thread" daemon prio=6 tid=0x00e7b400 nid=0x4a8 runnable [0x00000000]
java.lang.Thread.State: RUNNABLE

Locked ownable synchronizers:
    - None

"C1 CompilerThread0" daemon prio=10 tid=0x00e76000 nid=0x13e0 waiting on condition [0x00000000]
java.lang.Thread.State: RUNNABLE

Locked ownable synchronizers:
    - None

"Attach Listener" daemon prio=10 tid=0x00e74400 nid=0x448 waiting on condition [0x00000000]
java.lang.Thread.State: RUNNABLE

Locked ownable synchronizers:
    - None

"Signal Dispatcher" daemon prio=10 tid=0x00e73000 nid=0x1eb4 runnable [0x00000000]
java.lang.Thread.State: RUNNABLE

Locked ownable synchronizers:
    - None

"Finalizer" daemon prio=8 tid=0x00e60400 nid=0x1f28 in Object.wait() [0x03b1f000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28378b58> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
    - locked <0x28378b58> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

Locked ownable synchronizers:
    - None

"Reference Handler" daemon prio=10 tid=0x00e5ec00 nid=0x1d40 in Object.wait() [0x0391f000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x283782e8> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0x283782e8> (a java.lang.ref.Reference$Lock)

Locked ownable synchronizers:
    - None

"main" prio=6 tid=0x00db8000 nid=0x12f0 waiting on condition [0x00000000]
java.lang.Thread.State: RUNNABLE

Locked ownable synchronizers:
    - None

"VM Thread" prio=10 tid=0x00e5d000 nid=0xbf8 runnable 

"VM Periodic Task Thread" prio=10 tid=0x00e7e800 nid=0x1fcc waiting on condition 

JNI global references: 656 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-25T14:43:57.657

请检查您的网络配置。

我遇到了同样的问题。当我使用“无代理”设置网络配置时，它可以工作。主菜单：`tools/options/network/no proxy`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-11-17T14:30:01.083

在 VisualVM 邮件列表中找到这个：[https ://java.net/projects/visualvm/lists/users/archive/2016-06/message/7](https://java.net/projects/visualvm/lists/users/archive/2016-06/message/7)

添加了这个：

```
-J-Dorg.netbeans.profiler.separateConsole=true 
```

到我的 jvisualvm.exe 快捷方式，它可以工作！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-03-24T03:45:39.493

尝试将以下 VM 参数添加到“运行配置”中：

```
-Djava.rmi.server.hostname=localhost 
```

[![运行配置](../Images/0a99f8d72b51aaab03611efb5b324776.png)](https://i.stack.imgur.com/ZqNUR.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-22T21:02:51.313

我遇到了同样的问题，我在代理后面。选择“无代理”或“手动代理设置”可解决此问题。

这么简单的事情，我在这上面浪费了几个小时......

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-03T16:47:44.533

就我而言，解决方案是使用 32 位 jsdk。
使用参数 --trace 诊断启动 jvisualvm ..

我的日志包含：
`Cannot load C:\Program Files\Java\jdk1.7.0_45\jre\bin\server\jvm.dll. %1 is not a valid Win32 application. (193) Falling back to running Java in a separate process; DLL cannot be loaded (64-bit DLL?).`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-11T07:26:07.110

有时 Skype 位于奇怪的端口上……这至少有两次让我非常头疼，当它选择 8080 时，我认为我的 Tomcat 已损坏。事实证明（在完全无知和毫无戒心的一个小时左右之后），Skype 正在使用该端口......

还有一个问题：您是从 Eclipse 以“运行”还是“调试”模式启动程序的？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-17T00:10:26.500

在 eclipse runConfigurations 增强选项卡中添加以下参数

-XX:+StartAttachListener

这将允许 visualVM 立即连接，并且示例和分析将起作用。

# java - 如何在 GWT 中使用 PropertyChangeListner？或者有什么更好的方法吗？

> ID：10494097
> 
> 赞同：0
> 
> 时间：2012-05-08T07:03:22.147
> 
> 标签：java, gwt, file-upload, propertychangelistener

我正在尝试从 GWT 中的 servlet 获取上传进度信息，但`SubmitCompleteHandler`在服务器上传完成和 servlet 重新调整响应后返回。是否可以使用 获取上传进度`PropertyChangeListener`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:51:06.777

是的，您可以使用它`PropertyChangeListener`来实现上传进度信息的显示。这是很好的[样本](http://www.adrianwalker.org/2011/03/gwt-file-upload-with-event-based.html)。

例如，我知道早期的 Gmail 使用 SWFUpload。您可以通过[SWFUpload-GWT](http://code.google.com/p/swfupload-gwt/)使用它。这种方法的主要优点是不需要任何特殊的服务器代码。

看看这些库：

*   [GWT 上传](http://code.google.com/p/gwtupload/)。它很容易集成并在所有浏览器中正常工作。它使用 ajax 请求来计算进度。

*   GWTChismes 中的 GWTCProgressBar 小[部件](http://code.google.com/p/gwtchismes/)

*   具有某些功能的[文件上传器](https://github.com/kompot/gwtupld/)

*   [GwtSwfExt](http://code.google.com/p/gwtswfext/)

# c# - 为PC分配多个IP地址时如何获取默认IP地址

> ID：10494101
> 
> 赞同：0
> 
> 时间：2012-05-08T07:03:31.757
> 
> 标签：c#, .net, ip, wmi, multihomed

当多个 IP 地址分配给 PC 时，即如果 PC 是多宿主的，如何获得不包括 127.0.0.1 环回地址的默认 IP 地址。

以下代码在一台 PC 上返回正确的默认 IP 地址，但在另一台 PC 上返回不正确的 IP 地址，因此必须有其他解决方案。

```
 private string[] GetDefaultIPWithSubnet()
    {
        ManagementClass mc = new ManagementClass("Win32_NetworkAdapterConfiguration");
        ManagementObjectCollection moc = mc.GetInstances();
        string[] ipSubnet = new string[2];
        foreach (ManagementObject mo in moc)
        {
            if ((bool)mo["IPEnabled"])
            {
                try
                {
                    string[] ips = (string[])mo["IPAddress"];
                    string[] subnets = (string[])mo["IPSubnet"];
                    ipSubnet[0] = ips[0].ToString();
                    ipSubnet[1] = subnets[0].ToString();
                    break;
                }
                catch (Exception ex)
                {
                    return null;
                }
            }
        }
        return ipSubnet;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:24:35.870

```
public static void GetDefaultIp()
{
    NetworkInterface[] adapters = NetworkInterface.GetAllNetworkInterfaces();
    foreach (NetworkInterface adapter in adapters)
    {
        if (adapter.OperationalStatus == OperationalStatus.Up && adapter.NetworkInterfaceType == NetworkInterfaceType.Ethernet) 
        {
            IPInterfaceProperties properties = adapter.GetIPProperties();
            foreach (var x in properties.UnicastAddresses)
            {
                if (x.Address.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork)
                    Console.WriteLine(" IPAddress ........ : {0:x}", x.Address.ToString());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T09:00:57.287

我认为您的意思是具有默认路由的接口。[您可以使用GetIpForwardTable](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365953%28v=vs.85%29.aspx)函数获取 IPv4 路由表（快速 google 显示它可以通过 p/invoke 调用）并查找 0.0.0.0 目标路由（`route print`在命令行运行以检查路由表的外观）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:17:42.937

我认为您误解了 IPEnabled 的含义，[据我所知](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394217%28v=vs.85%29.aspx)，如果在接口上启用了 TCP/IP，则该参数为 TRUE。所以我认为这不是你要找的。

# javascript - 无法从服务器端读取隐藏字段值

> ID：10494102
> 
> 赞同：3
> 
> 时间：2012-05-08T07:03:54.753
> 
> 标签：javascript, asp.net, postback

我有一个 aspx 页面 (default.aspx)，我在其中加载了一个用户控件 (tree.ascx)。

在 tree.ascx 里面有一个隐藏的字段。

```
<asp:HiddenField ID="HiddenField1" runat="server"/> 
```

我正在使用 javascript 为隐藏字段分配一个值。

```
document.getElementById('<%=HiddenField1.ClientID%>').value = "some text here";
alert(document.getElementById('<%=HiddenField1.ClientID%>').value);
document.getElementById('form1').submit(); 
```

警报显示的值非常好。这意味着该值被正确插入到隐藏字段中。

但是当我发回服务器并检查该值时，它始终为空。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            // do something.
        }
        else
        {                
            string str = this.HiddenField1.Value;              
        }
    } 
```

我的代码总是在这里得到一个空字符串。不知何故，回发正在从隐藏字段中删除值。

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:24:22.573

尝试使用以下语法。即使在回发之后它也对我有用。

ASPX 代码

```
<asp:HiddenField runat="server" ID="aspHiddenField" />
<input type="hidden" id="inputHidden" value='<%= aspHiddenField.ClientID %>' /> 
```

JavaScript 代码

```
var inputHidden = document.getElementById('inputHidden');
$("#" + inputHidden.value).val("some text"); 
```

代码背后

```
if (!string.IsNullOrEmpty(aspHiddenField.Value))
 {
//Your code goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:43:04.000

检查您的控件是否在母版页内，如果是，那么您需要像那样访问它，第一个母版页->在母版页内查找控件的值，它肯定会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:56:40.673

将您的隐藏字段放在更新面板中，例如：

```
<asp:UpdatePanel ID="UpnlHidden" runat="server">
<ContentTemplate>
<asp:HiddenField ID="HiddenField1" runat="server"/>
</ContentTemplate>
</asp:UpdatePanel> 
```

这对你有用:-)

# java - 从命令行运行 Eclipse 项目

> ID：10494109
> 
> 赞同：8
> 
> 时间：2012-05-08T07:04:09.573
> 
> 标签：java, eclipse, command-line

我有两个关于从命令行编译和运行 Eclipse java 项目的问题。当我刚刚从 Eclipse IDE 运行时，这可以正常工作。我尝试使用谷歌搜索，但无法真正让事情正常工作。任何帮助深表感谢。

问题 1：当我尝试从与 .java 文件所在目录不同的位置编译时，它会抛出错误“**无法读取：myfile.java** ”。但是如果我迁移到这个目录，那么它就会编译。
我给出的命令是（在其他目录中时）：
*javac -cp C:\ABC\src\XYZ myfile.java*
我在 XYZ 目录中给出的命令：
*javac myfile.java*
这生成了两个 .class 文件myfile.class 和 Testing_Thread.class（我猜这是因为我的代码中有一个线程）

问题2：在我编译到它的目录后，当我尝试运行程序时，我得到错误“**线程中的异常“main”java.lang.NoClassDefFoundError：myfile（错误名称：XYZ/myfile.java）** “即使我试图从 XYZ 目录运行。当我尝试从其他地方运行时，我也会遇到同样的错误。
我在 XYZ 目录中给出的命令：
*java myfile*
我在其他地方给出的命令：
*java -cp C:\ABC\src\XYZ myfile*

如果有任何帮助，我还会附上我的目录结构的层次结构：
![在此处输入图像描述](../Images/bdbd0667f730533c1f50ea7e65b04a90.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T07:52:37.333

这些示例假定以下源结构：

```
C:\temp\compile-test\src\a\b\c\D.java 
```

D.java 在哪里：

```
package a.b.c;

public class D { } 
```

第一个问题，**无法读取： myfile.java**，是因为使用**`cp`**命令行选项指向您的源代码是不正确的。

```
C:\temp\compile-test\src>javac -cp c:\temp\compile-test\src\a\b\c D.java
javac: file not found: D.java
Usage: javac <options> <source files>
use -help for a list of possible options 
```

这应该是以下内容，`javac`从您的源文件夹运行，我们可以使用源文件的相对路径（注意 -`javac`从这里的源文件夹运行）：

```
C:\temp\compile-test\src>javac a\b\c\D.java 
```

或者这个，我们指定源文件的完整路径，并且`javac`可以从任何地方运行（注意 -`javac`从`C:\`这里运行）：

```
C:\>javac temp\compile-test\src\a\b\c\D.java 
```

以上两个选项都将导致您的类文件被创建在与源相同的文件夹中。IE：

```
C:\temp\compile-test\src\a\b\c\D.class 
```

对于第二个问题，如果您尝试从包的“内部”运行具有包名称的类，这将导致名称错误（注意 -`java`在此处从包的“内部”运行）：

```
C:\temp\compile-test\src\a\b\c>java D
Exception in thread "main" java.lang.NoClassDefFoundError: D (wrong name: a/b/c/D)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: D.  Program will exit. 
```

要运行`D`该类，您应该位于包“根”，并提供[完全限定的类名](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getName%28%29)。IE：

```
C:\temp\compile-test\src>java a.b.c.D
Exception in thread "main" java.lang.NoSuchMethodError: main 
```

注意我得到一个异常，因为`D`该类没有 main 方法，因此无法运行。为了解决这个问题，我们添加了一个 main 方法：

```
package a.b.c;

public class D {
    public static void main(String[] args) {
        System.out.println("main");
    }
} 
```

并重新运行：

```
C:\temp\compile-test\src>java a.b.c.D
main 
```

# java - Android 的 GZIPInputStream 是否存在泄漏问题

> ID：10494110
> 
> 赞同：1
> 
> 时间：2012-05-08T07:04:18.153
> 
> 标签：java, android, memory-leaks, gzipinputstream

我发现对于某些情况（GZIPInputStream throw IOException），存在泄漏-在第一条语句中构造的 GZIPInputStream 的 Inflater 成员未通过函数“end()”正确释放。在这种情况下，GZIPInputStream 没有被构造，所以调用函数不能关闭它。GZIPInputStream 真的错了吗？

```
public GZIPInputStream(InputStream is, int size) throws IOException {
    super(is, new Inflater(true), size);
    byte[] header = new byte[10];
    readFully(header, 0, header.length);
    int magic = getShort(header, 0);
    if (magic != GZIP_MAGIC) {
        throw new IOException(String.format("unknown format (magic number %x)", magic));
    }
    ......
} 
```

# git - 创建一个本地分支并使用我的主分支的前两个提交推送到远程

> ID：10494112
> 
> 赞同：0
> 
> 时间：2012-05-08T07:04:29.463
> 
> 标签：git, github

我有一个典型的问题，如下所示：

1）我正在处理一个问题 X，我为那个问题做了 2 次提交，但我被困在两者之间，没有将更改推送到我的远程仓库。

我在 master 分支上的 git status 说

您的分支领先 2 次提交。

2）我现在被分配了一个新任务，我想将我在 master 分支中所做的 2 次提交推送到我现在要创建的本地分支中。

我尝试实现与以下相同：1）git log（在master上并注意到提交编号让我们称之为1111（对于提交1，旧提交）和2222（对于提交2，最新提交）2）git checkout -b my_local_branch 3） git 樱桃挑选 1111

现在，有冲突。有人可以告诉我我应该做什么。也许应用最新的提交，因为我觉得我的本地分支没有那些提交（我可能错了），因为当我这样做时

git status （在我的 local_branch 上），我没有看到我的分支领先于任何提交。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:24:55.943

我想这会奏效。

在您的主分支上，运行`git branch -b my-local`. 检查您的提交 1111 和 2222 是否正常

返回主分支：`git checkout master`.

运行`git rebase -i`，并删除提交 1111 和 2222。

现在 master 分支去掉了 1111 和 2222，你可以开始你的新任务了。（并且提交 1111 和 2222 在您的本地分支中。）

# java - 通过 slf4j 配置 log4j

> ID：10494119
> 
> 赞同：3
> 
> 时间：2012-05-08T07:04:50.790
> 
> 标签：java, log4j, config, slf4j

我们有一个使用 log4j 进行日志记录的独立 java 项目，我们不通过类路径配置来配置 log4j。我们在我的代码中配置它如下：

```
String configLocation = System.getProperty("S_HOME") + File.separator + "config" + File.separator + "xxxLog.properties";
PropertyConfigurator.configure(configLocation) 
```

但是如果我们转移到 slf4j，我如何通过 slf4j 配置 log4j？

THKS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:55:30.673

您不能为此使用 slf4j，您只需保留 log4j 的旧配置代码。

slf4j 不处理配置部分，这对于所有支持的日志记录系统都很难概括。slf4j 只是一个用于处理调度到特定日志实现的日志调用的 API。它还提供了许多桥接器，例如将 java.util.logging 重定向到 slf4j。

日志输出发生的事情不是 slf4j API 的一部分。

# svn - 如何获取 Svn 更改的文件内容

> ID：10494121
> 
> 赞同：0
> 
> 时间：2012-05-08T07:05:04.300
> 
> 标签：svn, xslt, xml-parsing, cruisecontrol.net

我使用了以下命令

```
svn diff D:\QATV2Demo -r 12414:12416 
```

这给了我以下结果文本文件

索引：D:/QATV2Demo/Main.msbuild

```
 ===================================================================

--- D:/QATV2Demo/Main.msbuild   (revision 12414)

+++ D:/QATV2Demo/Main.msbuild   (revision 12416) 
```

@@ -39,7 +39,7 @@

```
 AssemblyFile="$(ToolsBinPath)\MSBuild.Community.Tasks.dll" />
<PropertyGroup>
-    <FxCop_CriticalErrors>10</FxCop_CriticalErrors>
+    <FxCop_CriticalErrors>0</FxCop_CriticalErrors>
<FxCop_Errors>0</FxCop_Errors>
  <FxCop_CriticalWarnings>0</FxCop_CriticalWarnings>
   <FxCop_Warnings>0</FxCop_Warnings>     

Index: D:/QATV2Demo/QATV2Demo/QATConstant.cs
===================================================================
--- D:/QATV2Demo/QATV2Demo/QATConstant.cs       (revision 12414)
+++ D:/QATV2Demo/QATV2Demo/QATConstant.cs       (revision 12416)
@@ -9,7 +9,7 @@
 {
     public static readonly string PAGE_DATA_DROP_DOWN_MODE = "D";
     public static readonly string PAGE_DATA_GRID_MODE = "G";
-        public static readonly string REPORT = "Report";
+        public static readonly string REPORT = "Report1";
    public static readonly string ITEM_COUNT = "ItemCount";
 }
 } 
```

现在我需要提取那些显示实际内容差异的 - 和 + 行。我怎么能做到这一点是否有任何命令以 XML 格式给我这个结果，以便我可以通过 xslt 解析它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:02:37.523

svn diff 有一个 --xml 标志，用于在 xml 中输出。然后，您可以将 xml 合并到 Cruisecontrol 构建日志中并使用 xsl 对其进行转换。当您需要差异的存储库与 Cruisecontrol 项目的源代码控制断开连接时，这很有用。

# rubygems - Bundler 无法获取 json 1.6.5

> ID：10494124
> 
> 赞同：0
> 
> 时间：2012-05-08T07:05:10.913
> 
> 标签：rubygems, bundler

我正在尝试在生产机器中为我的应用程序捆绑 gems，但今天它一直失败并出现以下错误消息：

```
Gem::RemoteFetcher::FetchError: too many connection resets (http://cachefly.mirrors.rubygems.org/gems/json-1.6.5.gem) 
```

捆绑包试图从下镜像而不是主网站获取有什么原因吗？我仍然可以从下载 gem 文件`http://rubygems.org/gems/json-1.6.5.gem`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:11:11.303

rubygems.org 重定向该请求。它与捆绑器无关。

```
$ wget  http://rubygems.org/gems/json-1.6.5.gem
--2012-05-08 00:09:44--  http://rubygems.org/gems/json-1.6.5.gem
Resolving rubygems.org... 204.232.149.26, 204.232.149.25
Connecting to rubygems.org|204.232.149.26|:80... connected.
HTTP request sent, awaiting response... 302 Moved Temporarily
Location: http://cachefly.mirrors.rubygems.org/gems/json-1.6.5.gem [following]
--2012-05-08 00:09:44--  http://cachefly.mirrors.rubygems.org/gems/json-1.6.5.gem
Resolving cachefly.mirrors.rubygems.org... 205.234.175.175
Connecting to cachefly.mirrors.rubygems.org|205.234.175.175|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 424960 (415K) [application/octet-stream]
Saving to: `json-1.6.5.gem'

100%[======================================>] 424,960     2.38M/s   in 0.2s    

2012-05-08 00:09:45 (2.38 MB/s) - `json-1.6.5.gem' saved [424960/424960] 
```

# python - ImageEditor 选择图像的一部分以在 Plone 中添加评论

> ID：10494127
> 
> 赞同：1
> 
> 时间：2012-05-08T07:05:18.060
> 
> 标签：python, plone

我需要一个具有 Plone 4.1 中标记设置器功能的图像编辑器，其中可以选择图像的一部分。可以在此选择标记上设置注释，以便在工作流进入时进行编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:58:53.277

[http://plone.org/products/collective.imagetags](http://plone.org/products/collective.imagetags)可能更接近你想要的。

# algorithm - NP-hard 和 undecidable 问题之间的关系

> ID：10494133
> 
> 赞同：16
> 
> 时间：2012-05-08T07:05:41.007
> 
> 标签：algorithm, np-hard, decidable

我对不可判定问题和 NP 难题之间的关系有点困惑。NP难问题是不可判定问题的子集，还是它们只是相同且相等，还是它们不可比较？

对我来说，我一直在和我的朋友争论，不可判定的问题是 NP 难题的超集。会存在一些在 NP 中不难但无法确定的问题。但是我发现这个论点很弱并且有点困惑。是否存在不可判定的 NP 完全问题。NP难有什么问题是可判定的吗？？

一些讨论会有很大帮助！谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T09:00:43.440

Undecidable = 某些输入无法解决。无论您给算法多少（有限）时间，某些输入总是会出错。

NP-hard ~= 超多项式运行时间（假设 P != NP）。这是手波，但基本上 NP-hard 意味着它至少与 NP 中最难的问题一样难。

肯定有 NP-hard 的问题不是不可判定的（= 是可判定的）。SAT 说，任何 NP 完全问题都是其中之一。

是否存在非 NP 难的不可判定问题？我不这么认为，但要排除它并不容易——我没有看到一个明显的论点，即必须从 SAT 减少所有可能的不可判定问题。可能会有一些奇怪的无法确定的问题，这些问题不是很有用。但是标准的不可判定问题（比如停机问题）是 NP 难的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T08:58:05.150

NP-hard 是一个*至少*与任何 NP-complete 问题一样难的问题。

因此，一个不可判定的问题可能是 NP 难的。如果一个问题的预言机将使解决 NP 完全问题变得容易（即可在多项式时间内解决），则该问题是 NP 难的。我们可以想象一个不可判定的问题，如果给定一个预言机，NP 完全问题将很容易解决。例如，显然*每个*解决停机问题的预言机也可以解决一个 NP 完全问题，因此每个图灵完全问题也是 NP 困难的，因为它的（快速）预言机将使解决 NP 完全问题成为微风。

因此，图灵完备的不可判定问题是 NP-hard 问题的一个子集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T17:21:38.333

不可判定的问题，例如图灵停机问题只是 NP-Hard。

```
 <---------NP Hard------>
|------------|-------------||-------------|------------|--------> Computational Difficulty

|<----P--->|

|<----------NP---------->|

|<-----------Exponential----------->|

|<---------------R (Finite Time)---------------->| 
```

在这个图中，那个小管道显示了 NP 和 NP-Hard 的重叠，它显示了 NP-Completeness，即一组既是 NP 又是 NP-Hard 的问题。

不可判定的问题是 NP Hard 问题，它们没有解决方案并且不在 NP 中。

# iphone - 如何将在线图像保存到iphone相册

> ID：10494138
> 
> 赞同：0
> 
> 时间：2012-05-08T07:05:58.683
> 
> 标签：iphone

我的应用程序是基于图像的应用程序。

有一个在线搜索选项。如果我们按下一个按钮，就会有一个 webview 控制器和

转到谷歌主页。我们可以搜索图片。我的要求是选择一张图片并保存

在相册中

怎么可能。

问候

白菊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:21:55.197

将图像下载到 UIImage 中：

[在 iOS 中创建带有 URL 的 UIImage](https://stackoverflow.com/questions/7694215/create-a-uiimage-with-a-url-in-ios)

将 UIImage 保存到相册：

[如何将图片保存到 iPhone 照片库？](https://stackoverflow.com/questions/178915/how-to-save-picture-to-iphone-photo-library)

你不觉得在 Stack Overflow 上进行这些搜索很容易吗？

# ruby-on-rails - Omni auth 为 Twitter (Rails) 配置强制登录

> ID：10494143
> 
> 赞同：0
> 
> 时间：2012-05-08T07:06:15.287
> 
> 标签：ruby-on-rails, omniauth

我正在使用 OmniAuth gem 进行 Twitter 身份验证，我正在尝试`force_login = true`在omniauth 中进行配置，这样每次用户尝试添加 Twitter 帐户时，都会提示他登录。

现在，如果用户已经登录，则会显示他的帐户。

我测试并发现如果我可以在 url 中传递“force_login = true”，我可以完成这项工作。但不确定如何通过配置omniauth 来实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:08:00.980

这可以通过在文件中添加`authorize_params: {force_login: 'true'}`提供程序配置来实现。`/config/initializers/omniauth.rb`

# ruby-on-rails - Rails 3 ActiveRecord插入自动增量字段问题

> ID：10494144
> 
> 赞同：1
> 
> 时间：2012-05-08T07:06:20.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, tiny-tds

我正在使用：
**Rails 3.0.9
Activerecord-sqlserver-adapter 3.0.15
TinyTds
MSSQL 2005**

我有下表：

```
CREATE TABLE [dbo].[eclaims](
    [id_app] [int] IDENTITY(1,1) NOT NULL,
    [id_user] [int] NOT NULL,
    [property] [varchar](4) NOT NULL,
    [app_number] [varchar](15) NULL,
    [patent_number] [varchar](15) NULL,
    [native_number] [varchar](20) NULL,
    [title] [nvarchar](max) NULL,
    [applicants] [nvarchar](max) NULL,
    [receive_date] [datetime] NULL,
        [change_date] [datetime] NOT NULL CONSTRAINT [DF_eclaims_change_date]  DEFAULT (getdate()),
     CONSTRAINT [PK_eclaims] PRIMARY KEY CLUSTERED 
    (
        [id_app] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO
    SET ANSI_PADDING OFF
    GO
    ALTER TABLE [dbo].[eclaims]  WITH CHECK ADD  CONSTRAINT [FK_eclaims_users] FOREIGN KEY([id_user])
    REFERENCES [dbo].[users] ([id])
    GO
    ALTER TABLE [dbo].[eclaims] CHECK CONSTRAINT [FK_eclaims_users] 
```

型号为：

```
# coding: utf-8
class Eclaim < ActiveRecord::Base
end 
```

如您所见，有一个名为 id_app 的自动增量字段。
当我尝试在 MSSQL 控制台中执行查询`insert into eclaims (id_user, [property], title) values (1, 2, 'Alex')`时，一切都很完美。

但是当我尝试`Eclaim.create(:id_user => 1, :property => 'inv', :change_date => Time.now )`

我收到这样的错误**`TinyTds::Error: DEFAULT or NULL are not allowed as explicit identity values.: INSERT INTO [eclaims] ([id_app], [id_user], [property], [app_number], [patent_number], [native_number], [title], [applicants], [receive_date], [change_date]) VALUES (NULL, 1, N'inv', NULL, NULL, NULL, NULL, NULL, NULL, '2012-05-08 06:39:14.882')`**

为什么 ActiverRecord 不会自动插入自增字段**id_app**？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:02:39.017

Rails 是所有约定，它假定 'id' 列是主键。但是，由于您选择将 'id_app' 设置为表的主键，因此您也应该将其告知 Rails。

Use [set_primary_key(value = nil, &block)](http://apidock.com/rails/v3.0.9/ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods/set_primary_key) to set 'id_app' as the primary key and it should work.

# java - 将 Java Double Infinity 和 NaN 值存储到 MS SQL 2008 数据库

> ID：10494146
> 
> 赞同：7
> 
> 时间：2012-05-08T07:06:24.087
> 
> 标签：java, sql-server, hibernate, double, infinity

在我们的业务逻辑中，我们必须处理正值和负值`Double.Infinity`以及`Double.NaN`值。

我们必须将这些值存储到 Microsot SQL Server 2008 数据库中。问题是 Microsot SQL Server 不支持 infinity 或 nan 值。（[SQL Server 2005 的问题描述](http://connect.microsoft.com/SQLServer/feedback/details/239674/storing-ieee-754-floats-in-sql-server-2005-nan-infinity)，也适用于 MS SQL Server 2008）。

我们使用 Hibernate 3.6.7 作为我们的 JPA 实现和 Microsoft 的 sqljdbc4 驱动程序版本 4.0.2206.100。

我们试图通过像这样将 JPA 实体的列定义设置为 VARCHAR 来解决这个问题

```
@Column(columnDefinition = "VARCHAR(40)")
private Double foo; 
```

这似乎没有任何效果，即使列定义在数据库中正确更改为 VARCHAR。似乎无穷大值在 JDBC 驱动程序的验证中被捕获，因为我们在尝试插入`Double.Infinity`值时得到以下堆栈跟踪：

```
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The incoming tabular data  stream (TDS) remote procedure call (RPC) protocol stream is incorrect. Parameter 6 (""): The supplied value is not a valid instance of data type float. Check the source data for invalid values. An example of an invalid value is data of numeric type with scale greater than precision.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeUpdate(SQLServerPreparedStatement.java:314)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:94)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:57)
    ... 79 more 
```

欢迎任何关于如何解决此问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:53:59.327

这是解决此问题的简单解决方法：`String`用于字段类型并在 getter 和 setter 中进行转换。这样您就不必更改您的业务逻辑，并且可以很好地封装实际的转换逻辑。

```
// Column definition is not a necessity here
@Column(columnDefinition = "VARCHAR(40)")
private String foo;

public Double getFoo() {
    return this.foo != null ? Double.valueOf(this.foo) : null;
}

public void setFoo(Double d) {
    this.foo = d != null ? d.toString() : null;
} 
```

# extjs - 使用柱形图在 extjs 中创建瀑布图

> ID：10494147
> 
> 赞同：0
> 
> 时间：2012-05-08T07:06:25.513
> 
> 标签：extjs

我正在尝试查找 ExtJs 是否有瀑布图。我在 ExtJs 的任何地方都没有找到这个图表。现在，我在想如果我们可以使用柱形图创建瀑布图，我们只需要更改柱形图每一列的基本起点。如果我们在柱形图中有一些属性或属性，请告诉我，我们可以更改每列的基本起点，使其看起来像瀑布图。

请分享链接。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:19:09.303

我使用 highchart 来做到这一点。我认为没关系。

[http://jsfiddle.net/jlbriggs/q6ubs](http://jsfiddle.net/jlbriggs/q6ubs)

# iphone - 什么是 iOS 4.2（及更高版本）相当于 Android 的 RecognitionListener？

> ID：10494148
> 
> 赞同：1
> 
> 时间：2012-05-08T07:06:26.453
> 
> 标签：iphone, ipad, ios-4.2

Android SDK 有一个 API，可让您[直接](http://developer.android.com/reference/android/speech/package-summary.html)访问 Google 语音搜索，而不必通过其众所周知的[用户界面实现](https://play.google.com/store/apps/details?id=com.google.android.voicesearch&hl=en)。

该 API 的核心是[RecognitionListener 接口](http://developer.android.com/reference/android/speech/RecognitionListener.html)。

iOS 4.2（及更高版本）中是否有与此等价的功能？

如果是这样，我应该在 iOS SDK 中搜索什么术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:24:42.763

最接近语音识别的是使用[UIDictationPhrase](https://developer.apple.com/documentation/uikit/uidictationphrase)，它是[UITextInput 协议](https://developer.apple.com/documentation/uikit/uitextinput)的一部分。但是请记住，此 API 从 iOS 5.1 开始可用。

# c# - 使用 c# 在 facebook 粉丝页面中发布图像

> ID：10494154
> 
> 赞同：1
> 
> 时间：2012-05-08T07:06:50.320
> 
> 标签：c#, facebook, winforms

我希望使用 winform 应用程序在我的 Facebook 粉丝页面上发布图像，但代码不起作用。`FacebookOAuthException`发生错误。有谁知道如何处理这个问题？

```
var fb = new FacebookClient(_accessToken);

dynamic parameters = new ExpandoObject();
        parameters.message = txtMessage.Text;
        parameters.access_token = _accessToken;
        parameters.source = new FacebookMediaObject
        {
            ContentType = "image/jpeg",
            FileName = Path.GetFileName(ofd.FileName)
        }.SetValue(File.ReadAllBytes(ofd.FileName));

        FacebookClient app = new FacebookClient(_accessToken);

var result = app.Post("/" + [page id] + "/feed", parameters); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:18:39.890

you need to replace this line

> var result = app.Post("/" + [page id] + "/feed", parameters);

by

> var result = app.Post("/" + [Album id] + "/feed", parameters);

to get album Id you can get from

```
 string AlbumId;
        dynamic albums = app.Get("me/albums");
        foreach (dynamic albumInfo in albums.data)
        {
          if( albumInfo.name == "Timeline Photos" ) AlbumId=albumInfo.id; break;
        } 
```

# spring - TestNG + Spring + Maven = 无法加载上下文

> ID：10494159
> 
> 赞同：0
> 
> 时间：2012-05-08T07:07:20.137
> 
> 标签：spring, maven, testng

我正在使用带有surefire插件的Maven通过扩展AbstractTestNGSpringContextTests来运行TestNG测试，即使它在类路径中，它似乎也没有加载上下文，并且测试在我的ide中正常工作，但在maven中没有。

@ContextConfiguration(locations = Array("classpath*:/com/gottex/gottware/server/offlinepuwithdummydatafeed.xml")) 我的 xml 在 src/test/com/gottex/gottware/server 下

我的父母 pom 包含：

```
 <build>
    <defaultGoal>package</defaultGoal>
    <testResources>
        <testResource>
            <directory>src/test/java</directory>
            <includes>
                <include>**/*.xml</include>
                <include>**/*.properties</include>
            </includes>
        </testResource>
    </testResources>

    <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <verbose>true</verbose>
                    <forkMode>never</forkMode>

                </configuration>

            </plugin> ... 
```

我的孩子 pom 不包含任何依赖关系..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:27:46.870

经过长时间的调试，我终于找到了问题所在。它位于 ClassLoader 级别，并在调试时显示自己

**org.springframework.core.io.support.PathMatchingResourcePatternResolver** 方法里面的*findAllClassPathResources*

```
protected Resource[] findAllClassPathResources(String location) throws IOException {
        String path = location;
        if (path.startsWith("/")) {
            path = path.substring(1);
        }
        Enumeration resourceUrls = getClassLoader().getResources(path);
        Set<Resource> result = new LinkedHashSet<Resource>(16);
        while (resourceUrls.hasMoreElements()) {
            URL url = (URL) resourceUrls.nextElement();
            result.add(convertClassLoaderURL(url));
        }
        return result.toArray(new Resource[result.size()]);
    } 
```

这是在加载上下文时完成的，并产生以下结果：

*   当您在想法中运行时，ClassLoader 是 java.net.URLClassLoader 并且可以正常工作
*   当通过 Maven-Surefire 插件运行测试时，使用不同的类加载器：ClassRealm[plugin>org.apache.maven.plugins:maven-surefire-plugin:2.9, parent: sun.misc.Launcher$AppClassLoader@61ba34f2]

第二个 classLoader 返回一个没有“moreElements”的枚举 resourceUrls，因此不会加载上下文，但框架不会抛出任何失败。

# c# - 在两种状态之间切换 - 优雅的方式

> ID：10494162
> 
> 赞同：2
> 
> 时间：2012-05-08T07:07:56.593
> 
> 标签：c#, logic

在两种状态之间切换的简单示例：

```
if (this.lblColorChange.BackColor == Color.Red)
{
    this.lblColorChange.BackColor = Color.Blue;
} 
else
{
    this.lblColorChange.BackColor = Color.Red;
} 
```

它工作得很好，但是有没有其他方法来编码这个切换？可能更短，更优雅的逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:09:53.083

如果 if-else 子句中只有一个语句，那么我们可以删除花括号。所以你的代码会像

```
if (this.lblColorChange.BackColor == Color.Red)
    this.lblColorChange.BackColor = Color.Blue;
else
    this.lblColorChange.BackColor = Color.Red; 
```

**或者**

我们可以使用三元运算符

```
this.lblColorChange.BackColor = 
          this.lblColorChange.BackColor == Color.Red ? Color.Blue : Color.Red; 
```

`this`如果它们不会引起任何冲突，我们也可以从我们的声明中删除。

```
lblColorChange.BackColor = 
                lblColorChange.BackColor == Color.Red ? Color.Blue : Color.Red; 
```

# javascript - 脱机工作时清单文件在 ipad 设备上不起作用

> ID：10494163
> 
> 赞同：0
> 
> 时间：2012-05-08T07:07:56.967
> 
> 标签：javascript, html

我的网页无法在 ipad 设备上离线运行 下面是我的网页的网址

[http://celeritas-solutions.com/pah_brd_v1/](http://celeritas-solutions.com/pah_brd_v1/)

```
 <!DOCTYPE HTML>
 <html manifest=brd.manifest>
  <head>
    <meta http-equiv=Content-Type content="text/html; charset=utf-8">
        <meta name=viewport content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>
        <meta name=apple-mobile-web-app-status-bar-style content=black />
        <meta name=apple-mobile-web-app-capable content=yes />
        <link rel=apple-touch-icon href=brd_icon.png />
        <title>BRD</title>
        <link type="text/css" href=newstyle_tester.css rel=stylesheet />
        <script src="js/jquery-1.7.2.min.js"></script>
        <script src="js/jquery.queryloader2.js"></script>
        <script src="js/script.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:14:42.047

您的清单文件以文本/纯文本的 MIME 类型提供。那应该是 text/cache-manifest 否则浏览器会忽略它。

# javascript - 如何将 xsl 变量作为参数传递给脚本标签中的 javascript 函数？

> ID：10494164
> 
> 赞同：4
> 
> 时间：2012-05-08T07:08:02.660
> 
> 标签：javascript, xslt

我尝试了以下代码：

```
<xsl:variable name="xx" select="'40967.6424503935'"/>
<script type="text/javascript">
   time({$xx});
</script> 
```

我的意图是通过 time() 中的 document.write() 显示文本。但它没有给出任何结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:15:08.613

花括号用于“属性值模板”，但在这种情况下，您不是在此处创建属性，而只是一个普通的文本节点。我认为你需要做这样的事情

```
<xsl:variable name="xx" select="'40967.6424503935'"/>
<script type="text/javascript">
   time(<xsl:value-of select="$xx" />);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T05:16:40.140

上面的代码片段应该有一个小的更正。参数应在单个引号内传递。

```
<xsl:variable name="xx" select="'40967.6424503935'"/>
<script type="text/javascript">
   time('<xsl:value-of select="$xx" />');
</script> 
```

这将起作用。

# java - 在构造函数中初始化

> ID：10494166
> 
> 赞同：5
> 
> 时间：2012-05-08T07:08:05.113
> 
> 标签：java, c++, constructor, initialization

我见过很多代码，其中编码人员为类定义了一个*init()*函数，并在创建实例后首先调用它。

在构造函数中进行所有初始化是否有任何危害或限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:15:40.963

当多个构造函数调用相同的初始化代码时，通常是为了可维护性和减少代码大小：

```
class stuff 
{
public:
    stuff(int val1) { init(); setVal = val1; }
    stuff()         { init(); setVal = 0; }

    void init()     { startZero = 0; }

protected:
    int setVal;
    int startZero;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T08:04:49.733

恰恰相反：通常最好将所有初始化都放在构造函数中。在 C++ 中，“最佳”策略通常是将初始化放在初始化列表中，以便使用正确的值直接构造成员，而不是默认构造，然后分配。在 Java 中，您希望避免使用函数（除非它是`private`或`final`），因为动态解析可能会将您置于尚未初始化的对象中。

您使用`init()`函数的唯一原因是因为您有很多具有显着共性的构造函数。（在 C++ 的情况下，您仍然需要权衡默认构造之间的差异，然后是赋值与使用正确值的立即构造。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:17:50.360

在 Java 中，保持构造函数简短并将初始化逻辑移动到`init()`方法中是有充分理由的：

*   构造函数不是继承的，因此任何子类都必须重新实现它们或提供链接的存根`super`
*   您不应该在构造函数中调用可覆盖的方法，因为您会发现对象处于部分初始化的不一致状态

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:14:59.457

这是一个设计选择。你想让你的构造函数尽可能简单，所以很容易阅读它在做什么。这就是为什么您经常会看到调用其他方法或函数的构造函数，具体取决于语言。它允许程序员阅读和遵循逻辑，而不会迷失在代码中。

在构造函数中，您可能会很快遇到一个场景，您希望触发大量事件。好的设计要求您将这些序列分解为更简单的方法，以使其更具可读性并且在将来更易于维护。

所以，不，没有伤害或限制，这是一种设计偏好。如果您需要在构造函数中完成所有初始化，那么就在那里进行。如果您只需要稍后完成，则将其放入稍后调用的方法中。无论哪种方式，这完全取决于您，并且没有硬性或快速的规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T08:27:39.440

它是一种设计模式，与从对象构造函数内部抛出的异常有关。

在 C++ 中，如果从对象构造函数内部抛出异常，则该对象被语言运行时视为根本未构造。因此，当对象超出范围时，不会调用对象析构函数。

这意味着如果您在构造函数中有这样的代码：

```
int *p1 = new int;
int *p2 = new int; 
```

和你的析构函数中这样的代码：

```
delete p1;
delete p2; 
```

由于没有更多可用内存，构造函数内部**p2**的初始化失败，然后**new**运算符抛出 bad_alloc 异常。此时您的对象尚未完全构造，即使**p1**的内存已正确分配。如果发生这种情况，将不会调用析构函数，并且您正在泄漏 p1。

因此，您在构造函数中放置的代码越多，发生错误的可能性就越大，从而导致潜在的内存泄漏。

这是设计选择的主要原因，毕竟这并不太疯狂。

在 Herb Sutter 的博客上了解更多信息：[C++ 中的构造函数异常](http://herbsutter.com/2008/07/25/constructor-exceptions-in-c-c-and-java/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T19:02:24.560

如果你有多个同一个类或不同类的对象需要用指针相互初始化，这样至少有一个循环的指针依赖，你不能单独在构造函数中完成所有的初始化。（当另一个对象尚未创建时，您将如何使用指向另一个对象的指针/引用来构造第一个对象？）

这很容易发生的一种情况是在不同组件交互的事件模拟系统中，因此每个组件都需要指向其他组件的指针。

由于不可能在构造函数中进行所有初始化，因此至少一些初始化必须在 init 函数中进行。这就引出了一个问题：在 init 函数中应该完成哪些部分？灵活的选择似乎是在 init 函数中进行所有指针初始化。然后，您可以按任何顺序构造对象，因为在构造给定对象时，您不必担心是否已经拥有指向它需要了解的其他对象的必要指针。

# asp.net-mvc-3 - ASP.NET MVC 3 中 ModelState.IsValid 的限制

> ID：10494168
> 
> 赞同：4
> 
> 时间：2012-05-08T07:08:22.613
> 
> 标签：asp.net-mvc-3, model-view-controller, validation, modelstate, validationattribute

我总是使用`ModelState.IsValid`来检查我在服务器端正确验证的所有模型验证，但我认为使用它有一个限制。例如，我定义了一个`Remote`验证属性，但如果我禁用`javascript`则不`ModelState.IsValid`检查远程验证并始终返回 true，问题出在哪里？这是限制`ModelState.IsValid`还是我的错？如有必要，我可以添加我所有的实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:13:47.860

这个问题已经出现过几次了。答案是：它不在服务器端验证，您必须自己执行验证操作。另请参阅以下 SO 帖子：

*   [asp.net mvc 3服务器端远程验证无法通过提琴手提交](https://stackoverflow.com/questions/7547674/asp-net-mvc-3-serverside-remote-validation-not-working-on-submit-through-fiddler)
*   [RemoteAttribute 验证器不会触发服务器端](https://stackoverflow.com/questions/5393020/remoteattribute-validator-does-not-fire-server-side)

当然，无论如何都能够在服务器端验证它会很好。幸运的是，一些好人为此做了一个实现。您可以找到他的简短博客文章：[http](http://www.tugberkugurlu.com/archive/asp-net-mvc-server-side-remote-validation) ://www.tugberkugurlu.com/archive/asp-net-mvc-server-side-remote-validation 。

# drupal - Drupal 7 ubercart 产品套件的产品套件

> ID：10494170
> 
> 赞同：0
> 
> 时间：2012-05-08T07:08:26.733
> 
> 标签：drupal, cck, ubercart

我需要创建一个新的内容类型，它将包含产品套件的集合。

我怎样才能创建一个包含现有产品套件的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:54:59.293

查看[参考模块](http://drupal.org/project/references)

# android - 继续使用启动时启动的应用实例

> ID：10494171
> 
> 赞同：0
> 
> 时间：2012-05-08T07:08:47.717
> 
> 标签：android, instance, boot, restart, reusability

我有一个应用程序会在启动后延迟几秒钟自动启动。顺便说一句：这不是邪恶的！用户必须自己启用！当我现在点击应用程序的图标时，我希望打开已在启动时启动的相同实例。我不希望应用程序重新启动。但这就是现在发生的事情。

背景：我正在向 TextView 写入一些调试信息。当应用程序在启动时启动时，它会立即进入后台`moveTaskToBack(true)`，因为它当然不应该覆盖屏幕。用户应该看到 IDLE 屏幕。因此，只有在手动打开应用程序时，应用程序（以及此输出）才能变得可见。

这是 AndroidManifest.xml：

```
<application android:icon="@drawable/fritzbox"
             android:label="@string/app_name"
             android:allowTaskReparenting="true"
             android:persistent="true">

    <uses-library android:name = "com.google.android.maps"              />

    <receiver android:name=".BootUpReceiver">
        <intent-filter>
            <action   android:name = "android.intent.action.BOOT_COMPLETED" />
            <category android:name = "android.intent.category.DEFAULT"      />
        </intent-filter>
    </receiver>

    <activity android:name =".WiFiOnDemandActivity"
              android:label="@string/app_name"
              android:allowTaskReparenting="true"
              android:launchMode="singleInstance">
        <intent-filter>
            <action   android:name = "android.intent.action.MAIN"       />
            <category android:name = "android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<uses-permission android:name="android.permission.INTERNET"               />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"   />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.VIBRATE"                />
<uses-permission android:name="android.permission.READ_CONTACTS"          />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"   />
<uses-permission android:name="android.permission.WAKE_LOCK"              />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

如您所见，我已经尝试过`android:launchMode`,`android:allowTaskReparenting`和`android:persistent`. 接收 BOOT_COMPLETED 广播的广播接收器会创建一个 PendingIntent，它与 AlarmManager 一起调度。所以应用程序在启动`START_DELAY`后 15 秒 ( ) 启动。这是代码：

```
public class BootUpReceiver extends BroadcastReceiver implements Defines
{       
    private AlarmManager  mAlarmManager  = null;
    private Intent        mIntent        = null;
    private PendingIntent mPendingIntent = null;

    @Override
    public void onReceive( final Context context, final Intent intent)
    {
        mAlarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE   );

        mIntent       = new Intent ( context, WiFiOnDemandActivity.class );         
        mIntent.setAction(intent.getAction());
        mIntent.addFlags ( Intent.FLAG_ACTIVITY_NEW_TASK );

        mPendingIntent       = PendingIntent.getActivity( context, 0, mIntent, 0);

        mAlarmManager.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime() + START_DELAY, mPendingIntent );
    }
} 
```

奇怪的是，有时它似乎按预期工作（没有重新启动），但有时却没有！

谢谢！

伯恩德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:21:40.110

一定要显示你的代码，但这不能保证。如果内存不足，系统可能会随时终止您的进程，因此当您通过启动器启动时，您可能会获得一个新进程。是什么让您认为您需要完全相同的实例？

# ios - UIDatePicker 中的最小和最大日期

> ID：10494174
> 
> 赞同：57
> 
> 时间：2012-05-08T07:09:00.430
> 
> 标签：ios, objective-c, nsdate, nsdatepicker

我想从日期选择器中获取最小和最大日期，但最小日期应该是当前日期的“- 18”，最大日期应该是当前日期的“- 100”。

假设当前年份是 2018 年，那么我想要最小日期 2000 年和最大日期 1918 年。

到目前为止我所做的是：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [gregorian components:NSYearCalendarUnit fromDate:[NSDate date]];

NSInteger year = [components year];

int mindt = year - 18;

int maxdt = year -100;

   // NSDate * MinDate = [components year] - 18;

   // NSDate * MaxDate =  [components year] - 100;

   // self.datePicker.minimumDate = MinDate;

   // self.datePicker.maximumDate = MaxDate; 
```

但我无法将此整数转换为我的日期格式..

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-08T07:31:46.613

试试这个：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *currentDate = [NSDate date];
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setYear:-18];
NSDate *minDate = [gregorian dateByAddingComponents:comps toDate:currentDate  options:0];
[comps setYear:-150];
NSDate *maxDate = [gregorian dateByAddingComponents:comps toDate:currentDate  options:0];
[comps release];

self.datePicker.minimumDate = minDate;
self.datePicker.maximumDate = maxDate; 
```

它可以很容易地翻译成 Swift 4.2：

```
 let calendar = Calendar(identifier: .gregorian)

    let currentDate = Date()
    var components = DateComponents()
    components.calendar = calendar

    components.year = -18
    components.month = 12
    let maxDate = calendar.date(byAdding: components, to: currentDate)!

    components.year = -150
    let minDate = calendar.date(byAdding: components, to: currentDate)!

    picker.minimumDate = minDate
    picker.maximumDate = maxDate 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2018-05-30T07:02:00.263

看看这个 Swift 版本。用户负值 (-)**减去**和正值**添加**日期组件。

***1.设置最短日期***

```
 yourDatePicker.minimumDate = Calendar.current.date(byAdding: .year, value: -1, to: Date()) 
```

***2.设置最大日期***

```
 yourDatePicker.maximumDate = Calendar.current.date(byAdding: .year, value: 1, to: Date()) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-01-10T09:27:12.057

## **斯威夫特 5.1**

```
extension UIDatePicker {
    func set18YearValidation() {
        let currentDate: Date = Date()
        var calendar: Calendar = Calendar(identifier: Calendar.Identifier.gregorian)
        calendar.timeZone = TimeZone(identifier: "UTC")!
        var components: DateComponents = DateComponents()
        components.calendar = calendar
        components.year = -18
        let maxDate: Date = calendar.date(byAdding: components, to: currentDate)!
        components.year = -150
        let minDate: Date = calendar.date(byAdding: components, to: currentDate)!
        self.minimumDate = minDate
        self.maximumDate = maxDate
    } } 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-02-07T09:18:31.040

这就是 2017 年的样子（Swift 3）

```
 var components = DateComponents()
    components.year = -100
    let minDate = Calendar.current.date(byAdding: components, to: Date())

    components.year = -18
    let maxDate = Calendar.current.date(byAdding: components, to: Date())

    datePicker.minimumDate = minDate
    datePicker.maximumDate = maxDate 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-04-02T13:40:56.557

在**Swift 2.1**中：

```
 let currentDate: NSDate = NSDate()

    let calendar: NSCalendar = NSCalendar(calendarIdentifier: NSCalendarIdentifierGregorian)!
    // let calendar: NSCalendar = NSCalendar.currentCalendar()
    calendar.timeZone = NSTimeZone(name: "UTC")!

    let components: NSDateComponents = NSDateComponents()
    components.calendar = calendar

    components.year = -18
    let minDate: NSDate = calendar.dateByAddingComponents(components, toDate: currentDate, options: NSCalendarOptions(rawValue: 0))!

    components.year = -150
    let maxDate: NSDate = calendar.dateByAddingComponents(components, toDate: currentDate, options: NSCalendarOptions(rawValue: 0))!

    self.dateOfBirthUIDatePicker.minimumDate = minDate
    self.dateOfBirthUIDatePicker.maximumDate = maxDate

    print("minDate: \(minDate)")
    print("maxDate: \(maxDate)") 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-06-02T15:35:52.873

**斯威夫特 3.0**

```
 let gregorian: NSCalendar = NSCalendar(calendarIdentifier: NSCalendar.Identifier.gregorian)!
    let currentDate: Date = Date()
    let components: NSDateComponents = NSDateComponents()

    components.year = -150
    let minDate: Date = gregorian.date(byAdding: components as DateComponents, to: currentDate, options: NSCalendar.Options(rawValue: 0))!

    components.year = -16
    let maxDate: Date = gregorian.date(byAdding: components as DateComponents, to: currentDate, options: NSCalendar.Options(rawValue: 0))!

    self.datepicker.minimumDate = minDate
    self.datepicker.maximumDate = maxDate 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-07-04T06:56:19.110

> ** UIDatePicker 中的最小和最大日期：#Swift

**如果您想选择两个日期值之间的最小和最大日期，请使用以下简单代码：**

***例如：最小日期：01-04-2017 和最大日期：31-03-2018***

```
let calendar = Calendar.current
var minDateComponent = calendar.dateComponents([.day,.month,.year], from: Date())
minDateComponent.day = 01
minDateComponent.month = 04
minDateComponent.year = 2017

let minDate = calendar.date(from: minDateComponent)
print(" min date : \(String(describing: minDate))")

var maxDateComponent = calendar.dateComponents([.day,.month,.year], from: Date())
maxDateComponent.day = 0
maxDateComponent.month = 03 + 1
maxDateComponent.year = 2018

let maxDate = calendar.date(from: maxDateComponent)
print("max date : \(String(describing: maxDate))")

picker.minimumDate = minDate! as Date
picker.maximumDate =  maxDate! as Date 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-07-22T05:05:42.740

在 Objective C 中，NSDateComponents *comps = [[NSDateComponents alloc] init];

```
NSDateComponents *components = [calendar components:(NSCalendarUnitYear | NSCalendarUnitMonth | NSCalendarUnitDay) fromDate:[NSDate date]];

NSInteger year = components.year;
NSInteger month = components.month;
NSInteger day = components.day;
NSInteger minimumYear = year - 1900;//Given some year here for example
NSInteger minimumMonth = month - 1;
NSInteger minimumDay = day - 1;
[comps setYear:-minimumYear];
[comps setMonth:-minimumMonth];
[comps setDay:-minimumDay];
NSDate *minDate = [calendar dateByAddingComponents:comps toDate:currentDate options:0];

[datePicker setMinimumDate:minDate];
[datePicker setMaximumDate:[NSDate date]]; 
```

最短日期是 1900 年 1 月 1 日。我希望它对你们所有人都有效.. :)

在 Swift 2.0 或更高版本中

```
 let calendar = NSCalendar(calendarIdentifier:NSCalendarIdentifierGregorian);

    let todayDate = NSDate()

    let components = calendar?.components([NSCalendarUnit.Year,NSCalendarUnit.Month,NSCalendarUnit.Day], fromDate: todayDate)
    let minimumYear = (components?.year)! - 1900
    let minimumMonth = (components?.month)! - 1
    let minimumDay = (components?.day)! - 1

    let comps = NSDateComponents();
    comps.year = -minimumYear
    comps.month = -minimumMonth
    comps.day = -minimumDay

    let minDate = calendar?.dateByAddingComponents(comps, toDate: todayDate, options: NSCalendarOptions.init(rawValue: 0))

    datePicker.minimumDate = minDate
    datePicker.maximumDate = datePicker.date 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-29T08:59:33.463

**斯威夫特 4.1**

> 我已经为基于 Calendar.Component 的所有类型的限制创建了我的扩展

```
extension UIDatePicker {

    func setLimit(forCalendarComponent component:Calendar.Component, minimumUnit min: Int, maximumUnit max: Int) {

        let currentDate: Date = Date()
        var calendar: Calendar = Calendar(identifier: Calendar.Identifier.gregorian)

        guard let timeZone = TimeZone(identifier: "UTC") else { return }
        calendar.timeZone = timeZone

        var components: DateComponents = DateComponents()
        components.calendar = calendar

        components.setValue(-min, for: component)
        if let maxDate: Date = calendar.date(byAdding: components, to: currentDate) {
            self.maximumDate = maxDate
        }

        components.setValue(-max, for: component)
        if let minDate: Date = calendar.date(byAdding: components, to: currentDate) {
            self.minimumDate = minDate
        }
    }

} 
```

我们可以这样使用它：

```
self.datePicker.setLimit(forCalendarComponent: .year, minimumUnit: 13, maximumUnit: 100) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-05T09:37:10.750

另一个案例：

假设我想将出生日期显示为日期选择器，Dob 在 1/1/1980 到 1/1/2000 的范围内。

```
@IBOutlet var datePicker: UIDatePicker!

override func viewDidLoad() {
        super.viewDidLoad()        
        datePicker.datePickerMode = UIDatePickerMode.date       

        // 01/01/1980 to 01/01/2000

        let calendar = Calendar.current
        var minDateComponent = calendar.dateComponents([.day,.month,.year], from: Date())
        minDateComponent.day = 01
        minDateComponent.month = 01
        minDateComponent.year = 1980

        let minDate = calendar.date(from: minDateComponent)
        print(" min date : \(minDate)")

        var maxDateComponent = calendar.dateComponents([.day,.month,.year], from: Date())
       maxDateComponent.day = 01
        maxDateComponent.month = 01
        maxDateComponent.year = 2000

        let maxDate = calendar.date(from: maxDateComponent)
        print("max date : \(maxDate)")

        self.datePicker.minimumDate = minDate! as Date
        self.datePicker.maximumDate =  maxDate! as Date

} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-11-18T04:15:30.330

**斯威夫特 4.0**

UIDatePicker 扩展

```
extension UIDatePicker {
    func set18YearValidation() {
        let currentDate: NSDate = NSDate()
        let calendar: NSCalendar = NSCalendar(calendarIdentifier: NSCalendar.Identifier.gregorian)!
        calendar.timeZone = NSTimeZone(name: "UTC")! as TimeZone
        let components: NSDateComponents = NSDateComponents()
        components.calendar = calendar as Calendar
        components.year = -18
        let maxDate: NSDate = calendar.date(byAdding: components as DateComponents, to: currentDate as Date, options: NSCalendar.Options(rawValue: 0))! as NSDate
        components.year = -150
        let minDate: NSDate = calendar.date(byAdding: components as DateComponents, to: currentDate as Date, options: NSCalendar.Options(rawValue: 0))! as NSDate
        self.minimumDate = minDate as Date
        self.maximumDate = maxDate as Date
    } } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-12-28T11:47:46.447

如果要将当前日期设置为日期选择器的最小值，请使用以下代码行：

```
datePicker.minimumDate = Date() 
```

# php - 在 PHP 中将段落分解为句子

> ID：10494176
> 
> 赞同：12
> 
> 时间：2012-05-08T07:09:17.420
> 
> 标签：php, string, explode, text-segmentation

我一直在使用

```
explode(".",$mystring) 
```

将段落拆分为句子。但是，这不包括以不同标点符号结束的句子，例如！? : ;

有没有办法使用数组作为分隔符而不是单个字符？或者是否有另一种使用各种标点符号进行拆分的巧妙方法？

我试过了

```
explode(("." || "?" || "!"),$mystring) 
```

希望，但它没有工作......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-08T07:21:42.157

您可以[`preg_split()`](http://php.net/preg_split)结合[PCRE 前瞻条件](http://www.regular-expressions.info/lookaround.html)`.`在每次出现, `;`, `:`, `?`, , ..后拆分字符串`!`，同时保持实际标点符号完整：

代码：

```
$subject = 'abc sdfs.    def ghi; this is an.email@addre.ss! asdasdasd? abc xyz';
// split on whitespace between sentences preceded by a punctuation mark
$result = preg_split('/(?<=[.?!;:])\s+/', $subject, -1, PREG_SPLIT_NO_EMPTY);
print_r($result); 
```

结果：

```
Array
(
    [0] => abc sdfs.
    [1] => def ghi;
    [2] => this is an.email@addre.ss!
    [3] => asdasdasd?
    [4] => abc xyz
) 
```

您还可以通过插入否定的lookbehind断言来为不应拆分为自己的句子的*缩写词（先生、夫人、博士、..）添加黑名单：*

```
$subject = 'abc sdfs.   Dr. Foo said he is not a sentence; asdasdasd? abc xyz';
// split on whitespace between sentences preceded by a punctuation mark
$result = preg_split('/(?<!Mr.|Mrs.|Dr.)(?<=[.?!;:])\s+/', $subject, -1, PREG_SPLIT_NO_EMPTY);
print_r($result); 
```

结果：

```
Array
(
    [0] => abc sdfs.
    [1] => Dr. Foo said he is not a sentence;
    [2] => asdasdasd?
    [3] => abc xyz
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T07:13:11.713

你可以做：

```
preg_split('/\.|\?|!/',$mystring); 
```

或（更简单）：

```
preg_split('/[.?!]/',$mystring); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T07:14:56.260

假设您实际上想要带有最终结果的标点符号，您是否尝试过：

```
 $mystring = str_replace("?","?---",str_replace(".",".---",str_replace("!","!---",$mystring)));
 $tmp = explode("---",$mystring); 
```

这将使您的标点符号保持完整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T07:14:47.200

```
preg_split('/\s+|[.?!]/',$string); 
```

一个可能的问题可能是如果有一个电子邮件地址，因为它可能会在中途将其拆分到一个新行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T07:12:08.133

使用[preg_split](http://www.php.net/manual/en/function.preg-split.php)并给它一个像 [\.|\?!] 这样的正则表达式来分割

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T07:13:04.407

```
$mylist = preg_split("/[.?!:;]/", $mystring); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T07:13:56.400

爆炸不能有多个分隔符。这`preg_split();`就是为了。但即便如此，它也会在分隔符处爆炸，因此您将返回没有标点符号的句子。您可以更进一步地使用 preg_split 并将其标记为使用 PREG_SPLIT_DELIM_CAPTURE 在它们自己的元素中返回它们，然后运行一些循环来爆破句子并在返回的数组中跟随标点符号，或者只使用`preg_match_all();`：

```
preg_match_all('~.*?[?.!]~s', $string, $sentences); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T07:15:05.873

你可以试试`preg_split`

```
$sentences = preg_split("/[.?!:;]+/", $mystring); 
```

请注意，这将删除标点符号。如果您还想去掉前导或尾随空格

```
$sentences = preg_split("/[.?!:;]+\s+?/", $mystring); 
```

# ios - 将 TabBarController 更改为分段控件

> ID：10494186
> 
> 赞同：1
> 
> 时间：2012-05-08T07:09:52.750
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uisegmentedcontrol

在 iOS 5 Recipes 一书中，Core Data 章节示例有一个 3 部分的选项卡栏控制器，用于通过导航栏上的 + 按钮选择要添加的数据实体（TableView 格式）并查看。我想要一个用于相同目的但位于顶部的 3 段分段控件。在这方面我没有发言权。原始代码仅使用 1 个视图控制器，但创建了 3 个不同的 ivars（每个部分一个）。3 个实体是教师、仪器和学生。

我最大的问题似乎是编写 AppDelegate 的 didFinishLaunchingWithOptions 方法。

这是原始代码（AppDelegate.m）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];
    NSLog(@"%@", [self managedObjectModel]);
    self.teacherTable = [[MainTableViewController alloc] init];
    NSLog(@"%@", [self managedObjectModel]);
    self.teacherTable.entityDescription = [NSEntityDescription entityForName:@"Teacher" inManagedObjectContext:self.managedObjectContext];
    self.teacherTable.managedObjectContext = self.managedObjectContext;
    self.teacherTable.title = @"Teachers";

    self.studentTable = [[MainTableViewController alloc] init];
    self.studentTable.entityDescription = [NSEntityDescription entityForName:@"Student" inManagedObjectContext:self.managedObjectContext];
    self.studentTable.managedObjectContext = self.managedObjectContext;
    self.studentTable.title = @"Students";

    self.instrumentTable = [[MainTableViewController alloc] init];
    self.instrumentTable.entityDescription = [NSEntityDescription entityForName:@"Instrument" inManagedObjectContext:self.managedObjectContext];
    self.instrumentTable.managedObjectContext = self.managedObjectContext;
    self.instrumentTable.title = @"Instruments";

    self.teacherNavcon = [[UINavigationController alloc] initWithRootViewController:self.teacherTable];
    self.studentNavcon = [[UINavigationController alloc] initWithRootViewController:self.studentTable];
    self.instrumentNavcon = [[UINavigationController alloc] initWithRootViewController:self.instrumentTable];

    self.tabBarController = [[UITabBarController alloc] init];
    [self.tabBarController setViewControllers:[NSArray arrayWithObjects:self.teacherNavcon, self.studentNavcon, self.instrumentNavcon, nil]];

    [self.window addSubview:self.tabBarController.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

谢谢您的帮助！

# c# - 我如何知道我的 Windows 服务是否正常工作？

> ID：10494197
> 
> 赞同：4
> 
> 时间：2012-05-08T07:10:58.870
> 
> 标签：c#, unit-testing, testing, windows-services, timer

我已经建立了一个 Windows 服务，每 5 分钟用我的电子邮件收件箱填充一个数据库。

我在我的 Windows 服务中使用了一个类，该类获取我的电子邮件并将它们写入我的数据库，该类已经过测试并且可以工作。

我需要 Windows 服务做的就是使用计时器并每 5 分钟调用一次课程，但我不知道发生了什么，因为我什至无法测试我的 Windows 服务。

请有人告诉我要做什么来测试，如果有办法测试，或者只是眨眼运气并祈祷它有效，哈哈。

每次您想测试服务时是否必须卸载并重新安装，或者是否有更新服务选项？**请回答这个我真的很感兴趣，即使这不是我的主要问题。**

这是我的 Windows 服务，如果你能指出任何令人惊奇的错误，因为我无法测试它们。我想如果有人能看我的**计时器可能是错的？**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Timers;

namespace EmailWindowsService
{
    public partial class MyEmailService : ServiceBase
    {
        private Timer scheduleTimer1 = null;
        private DateTime lastRun;
        private bool flag;

        public MyEmailService()
        {
            InitializeComponent();
            if (!System.Diagnostics.EventLog.SourceExists("MySource"))
            {
                System.Diagnostics.EventLog.CreateEventSource(
                    "MySource", "MyNewLog");
            }
            eventLogEmail.Source = "MySource";
            eventLogEmail.Log = "MyNewLog";

            scheduleTimer1 = new Timer();
            scheduleTimer1.Interval = 5 * 60 * 1000;
            scheduleTimer1.Elapsed += new ElapsedEventHandler(scheduleTimer_Elapsed);
        }

        protected override void OnStart(string[] args)
        {
            flag = true;
            lastRun = DateTime.Now;
            scheduleTimer.Start();
            eventLogEmail.WriteEntry("Started");
        }

        protected override void OnStop()
        {
            scheduleTimer.Stop();
            eventLogEmail.WriteEntry("Stopped");
        }
        protected override void OnPause()
        {
            scheduleTimer.Stop();
            eventLogEmail.WriteEntry("Paused");
        }
        protected override void OnContinue()
        {
            scheduleTimer.Start(); ;
            eventLogEmail.WriteEntry("Continuing");
        }
        protected override void OnShutdown()
        {
            scheduleTimer.Stop();
            eventLogEmail.WriteEntry("ShutDowned");
        }

        protected void scheduleTimer_Elapsed(object sender, ElapsedEventArgs e)
        {
            RetriveEmailClass Emails = new RetriveEmailClass();
            if (flag == true)
            {

                eventLogEmail.WriteEntry("In getting Email Method");
                Emails.ServiceEmailMethod();
                lastRun = DateTime.Now;
                flag = false;
            }
            else if (flag == false)
            {
                if (lastRun.Date < DateTime.Now.Date)
                {
                    Emails.ServiceEmailMethod();
                    eventLogEmail.WriteEntry("In getting Email Method");
                }
            }
        }
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:17:28.427

你当然可以测试它。所有你需要的是

1.  启动服务
2.  观察它在 5 分钟后触发了预期的呼叫
3.  （请注意，它每 5 分钟触发一次预期的呼叫，持续几次）

您可以手动测试它，或者（最好）创建/使用自动化测试工具，它允许您重复可靠地测试，只要您想要多次。即使使用简单的批处理文件也可以做到这一点。

要检测计时器是否正常工作，您可以检查其日志文件。当然，如果您使被调用的类方法可配置而不是硬编码它，它也会有所帮助。因此，您可以使用不会淹没您的收件箱的虚拟工作者类运行您的自动化测试 :-)

为了使其更具可测试性，您也可以从服务类中提取计时逻辑，以便它可以从常规应用程序中运行。然后您可以更轻松地对其进行测试，甚至使用 NUnit 之类的单元测试框架。这使您可以使用不同的时间间隔等进行更彻底的测试。服务类本身几乎变成了一个空壳，其唯一的工作就是启动和调用其他类。如果您已经验证包含真实程序逻辑的所有类（即所有可能失败的代码）都经过单元测试并且工作正常，那么您可以更有信心地相信您的整个应用程序，当从其较小的部分集成时，也可以正常工作.

### 更新

查看您的代码，您似乎没有`flag`在任何地方进行初始化，因此其默认值为`false`. 您应该`true`在构造函数中将其初始化，否则即使计时器正确触发，您的电子邮件检索器也不会被调用。

要将间隔设置为 1 分钟，我的第一个猜测是

```
scheduleTimer1.Interval = 1 * 60 * 1000; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T07:23:47.847

James Michael Hare 在他的[博客上](http://geekswithblogs.net/BlackRabbitCoder/)写了关于他制作的一个非常好的模板/框架，使开发（和调试）Windows 服务变得更加容易：[C# 工具箱：可调试、自安装的 Windows 服务模板 (1 of 2)](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/09/23/c-windows-services-1-of-2-creating-a-debuggable-windows.aspx)

它为您提供了快速入门所需的所有基础知识。最重要的是，它为您提供了一种非常好的方式来调试您的服务，就好像它是一个常规的控制台应用程序一样。我还可以提到它提供了开箱即用的功能来安装（和卸载）您的服务。这篇文章的第二部分可以[在这个链接](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/10/07/c-windows-services-2-of-2-self-installing-windows-service-template.aspx)中找到。

我自己用过几次，真的可以推荐它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:20:24.697

在另一个类中重构你的逻辑。

编写一个调用此类的简单控制台应用程序

像普通应用程序一样对其进行测试。

一旦它独立运行，它应该作为服务运行。请注意权限和服务注册，那里有几个问题（例如拥有 sys 用户或桌面会话）。

一个好的做法是使用系统日志（例如，您可以使用 eventvwr 检查的日志）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:19:46.240

1.将此行添加到您要中断的地方，然后您可以调试您的服务。

```
System.Diagnostics.Debugger.Break(); 
```

或者

2.尝试从流程资源管理器附加到您的服务进度，然后您也可以调试您的服务。

或者

3.使用日志文件记录您的服务在做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T07:26:30.263

您可以将调试器附加到从 Visual Studio 运行的服务实例。单击主菜单中的“调试”，“附加到进程...”，从列表中选择您的服务进程，然后单击“附加”。

如果需要调试服务的启动，需要使用`System.Diagnostics.Debugger.Break()`.

# php - 用户登录时是否必须保存会话？

> ID：10494203
> 
> 赞同：0
> 
> 时间：2012-05-08T07:11:28.810
> 
> 标签：php, facebook

我开始使用 PHP SDK 开发 Facebook 应用程序，我对身份验证/登录过程有两个疑问。

我有这个代码：

```
 require_once("facebook.php");

  $config = array();
  $config[‘appId’] = 'xxxxxx';
  $config[‘secret’] = 'xxxxxx';
  $config[‘fileUpload’] = false; // optional

  $facebook = new Facebook($config);

  $user = $facebook->getUser(); 
```

现在我有第一个疑问，做类似的事情：

```
if ($user === 0) { .... } 
```

问题：-它是否检查用户是否已登录或用户是否已授权该应用程序？（显然当`$user != 0`）

然后，我显示身份验证对话框，让用户选择是否授权我的应用程序，以这种方式：

```
$loginUrl = $facebook->getLoginUrl(array{
     'scope' => 'read_stream',
     'redirect_uri' => 'https://www.myapp.com/login.php'
});
echo("<script> top.location.href='" . $loginUrl . "'</script>"); 
```

问题：如果 $user 返回 0 ，我是否必须使用此代码？我的意思是，这段代码的范围是什么？登录 Facebook 或应用程序授权？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:23:17.830

> 它是否检查用户是否已登录或用户是否已授权该应用程序？

它检查用户是否登录到 facebook 并授权应用程序（使用有效令牌）。

> 如果 $user 返回 0 ，我是否必须使用此代码？我的意思是，这段代码的范围是什么？登录 Facebook 或应用程序授权？

此代码的范围是应用授权。

如果`$user`为 0，则使用该段代码重定向到 Facebook 的授权/登录页面（如果用户尚未授权该应用程序，或者他已授权但令牌无效），之后它将被重定向到`https://www.myapp.com/login.php?state=$s&code=$NEW_TOKEN` facebook php 库将处理`$_REQUEST['code']`，以便 $user 将返回用户的 facebook ID。

# sql - 让 Oracle 将 OR 连接的谓词转换为 UNION ALL 操作

> ID：10494205
> 
> 赞同：10
> 
> 时间：2012-05-08T07:11:44.833
> 
> 标签：sql, oracle, optimization, union, union-all

`UNION`在某些情况下，`UNION ALL`查询可以胜过使用`OR`-connected 谓词的等效查询。据我所知，这部分是因为`UNION`子选择可以并行执行，因此它们可以有自己的“子计划”，特定于`OR`-connected 谓词的每个部分，由于更简单的适用查询转换，这可能更加优化。

但是`OR`，即使将子查询分解应用于`UNION ALL`解决方案，编写连接的谓词通常也更具可读性和简洁性。我的问题是：有没有办法向 Oracle 表明，一个单一的、昂贵的`OR`连接谓词应该转换为一个`UNION ALL`操作？如果有这样的提示/方法，在什么情况下可以应用（例如，谓词所涉及的列上是否需要存在任何约束等）？一个例子：

```
CREATE TABLE a AS
  SELECT 1 x, 2 y FROM DUAL UNION ALL
  SELECT 2 x, 1 y FROM DUAL;

-- This query...
SELECT * FROM a
WHERE x = 1 OR y = 1

-- Is sometimes outperformed by this one, for more complex table sources...
-- Note: in my case, I can safely apply UNION ALL. I know the two predicates to
-- be mutually exclusive.
SELECT * FROM a
WHERE x = 1
UNION ALL
SELECT * FROM a
WHERE y = 1 
```

请注意，我知道[`/*+ USE_CONCAT */`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#SQLRF50501)提示：

```
SELECT /*+ USE_CONCAT */ * FROM a
WHERE x = 1 OR y = 1 
```

但它似乎并没有产生我需要`UNION ALL`的东西（执行计划中没有强制操作）：

```
-------------------------------------------
| Id  | Operation         | Name | E-Rows |
-------------------------------------------
|   0 | SELECT STATEMENT  |      |        |
|*  1 |  TABLE ACCESS FULL| A    |      2 |
------------------------------------------- 
```

也许，这个提示有一些限制？我为此提供了 Oracle 11g2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:41:14.700

我相信这可能与您在`OR`谓词中使用的列上存在的索引有关。

我在 11gR2 中使用以下内容进行了测试。

```
create table scott.test as 
select level l, 
       decode(mod(level,2), 1, 1, 2) x, 
       decode(mod(level,2), 1, 2, 1) y, 
       dbms_random.value(1, 3) z from dual 
connect by level < 1000;
/

begin
   dbms_stats.gather_table_stats('scott', 'test');
end;
/ 
```

然后我在 TOAD 中解释了以下查询，( `EXPLAIN PLAN FOR`)

```
select x, y, z from scott.test
    where (floor(z) = 1 and x = 1) or (floor(z) = 2 and y = 1)
    ;

SELECT STATEMENT Optimizer Mode=ALL_ROWS        10          4                                
  TABLE ACCESS FULL COS_DM.TEST 10      280     4   

select /*+ USE_CONCAT */ x, y, z from scott.test
where (floor(z) = 1 and x = 1) or (floor(z) = 2 and y = 1)
;

SELECT STATEMENT Optimizer Mode=ALL_ROWS        10          4                                
  TABLE ACCESS FULL COS_DM.TEST 10      280     4                                

select x, y, z from test where (floor(z) = 1 and x = 1)
union all
select x, y, z from test where (floor(z) = 2 and y = 1)
;

SELECT STATEMENT Optimizer Mode=ALL_ROWS        10          8                                
  UNION-ALL                                              
    TABLE ACCESS FULL   COS_DM.TEST 5   140     4                                
    TABLE ACCESS FULL   COS_DM.TEST 5   140     4 
```

所以看起来提示不起作用。然后我在 x & y 列中添加了一个索引：

```
create index test_x on test (x, y);

begin
   dbms_stats.gather_table_stats('scott', 'test');
end;
/ 
```

现在重新运行查询：

```
select x, y, z from scott.test
    where (floor(z) = 1 and x = 1) or (floor(z) = 2 and y = 1)
    ;

SELECT STATEMENT Optimizer Mode=ALL_ROWS        10          4                                
  TABLE ACCESS FULL COS_DM.TEST 10      280     4   

select /*+ USE_CONCAT */ x, y, z from scott.test
where (floor(z) = 1 and x = 1) or (floor(z) = 2 and y = 1)
;

SELECT STATEMENT Optimizer Mode=ALL_ROWS        10          8                                
  CONCATENATION                                              
    TABLE ACCESS FULL   COS_DM.TEST 5   140     4                                
    TABLE ACCESS FULL   COS_DM.TEST 5   140     4                                

select x, y, z from test where (floor(z) = 1 and x = 1)
union all
select x, y, z from test where (floor(z) = 2 and y = 1)
;

SELECT STATEMENT Optimizer Mode=ALL_ROWS        10          8                                
  UNION-ALL                                              
    TABLE ACCESS FULL   COS_DM.TEST 5   140     4                                
    TABLE ACCESS FULL   COS_DM.TEST 5   140     4 
```

似乎在添加索引之后（即使它**没有被使用**）优化器决定使用提示！

也许你可以试试这个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T09:56:40.417

在某些情况下，优化器会忽略提示，您必须以不同的方式编写查询。使用 UNION ALL 重写所有查询的替代方法，您可以只重写子句：

```
SELECT * FROM a /* ... you can put here more joins with many tables ... */
WHERE a.rowid in (
    select innerQry.rowid from a innerQry where /*your first clause of OR*/innerQry.x = 1
    union all
    select innerQry.rowid from a innerQry where /*your second clause of OR*/innerQry.y = 1
) 
```

# python - 为什么对 Sybase db 的 pyodbc 查询返回带有一些垃圾的部分数据？

> ID：10494206
> 
> 赞同：0
> 
> 时间：2012-05-08T07:11:47.150
> 
> 标签：python, sap-ase, pyodbc

我最近开始使用 Windows 7 机器。我正在尝试使用 32 位 ASE 驱动程序（Adaptive Server Enterprise）查询 Sybase 数据库。机器上安装的 Sybase 客户端是 v15.5。

问题是，当我查询小数据时，我得到了正确的结果，但是如果预期的结果超过 40 行，我就会得到一个错误。

```
 >>> x = smd.Query("select ric_code as ric, weight, adjusted_weight as adjweight,
  currency as currency, close_price as last from v_temp_idx_comp where index_ric_
 code='.HSI'")
 Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
   File "s:\quant\python\v1.0\smd.py", line 15, in Query
     result = x.fetchall()
 pyodbc.Error: ('HY000', 'The driver did not supply an error!') 
```

我不确定如何解决此错误。我可以采取哪些步骤来进一步调试？我可以使用一些命令行工具来进一步调查吗？isql怎么样？他们会使用相同的底层驱动程序吗？

仅供参考，查询没有问题。该查询在我以前使用 Merant 驱动程序的机器上运行良好。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:34:43.777

我刚看到你的这篇文章，因为我遇到了完全相同的问题。（Windows 7 和 Sybase ASE 15.5 [在我的例子中只有 python 2.7.2]。）

我想我刚刚发现了我的问题：我正在查询的表中的一列被定义为具有“bigint”数据类型。因为这对我来说是一个新表，所以我删除了该表并仅使用“int”作为数据类型重新创建它，现在它工作得很好。我很幸运，因为事实证明我真的不需要“bigint”类型的额外容量——“int”对于我正在做的事情来说已经足够了。

# sql - SQL JOIN 子句

> ID：10494210
> 
> 赞同：-1
> 
> 时间：2012-05-08T07:12:13.390
> 
> 标签：sql

我遇到了这个问题：

```
SELECT CHILD_NAME, EMP_NAME
FROM CUSTOMER LEFT JOIN EMPLOYEE
ON CUSTOMER.CHILD_NAME = EMPLOYEE.EMP_NAME
ORDER BY CHILD_NAME ASC; 
```

我想出了一列（child_name）子名称，但第二列（emp_name）是空的！我错过了什么？我正在使用 Access 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:17:31.813

LEFT JOIN 意味着您将从第一个表中获取所有内容，即使它在第二个表上没有相应的行，如果您只有第一个表中的哪些行在第二个表上有匹配的行使用 INNER JOIN .

# c# - C# webservice 客户端不使用 java 服务器

> ID：10494212
> 
> 赞同：1
> 
> 时间：2012-05-08T07:12:40.097
> 
> 标签：c#, java, web-services, client

我正在开发一个webservice，它在服务器中是java，在客户端必须是c#。只有一个字符串作为 in 参数，作为 out 参数，它将返回一个具有以下结构的“对象”：

*   字符串编码错误
*   字符串描述错误
*   Object2[] 数组数据

像这样的“Object2”：

*   字符串 firstDataArray
*   Int secondDataArray

我创建了一个 java 客户端，它可以完美运行，但是 c# 客户端不起作用。它表示对象的“EndElement”不是预期的（意味着对象的结尾，而不是 object2），并且预期是“codError”元素。

该方法不返回对象数组，仅返回一个对象。

我使用了httpanalyzer，以及从java客户端和c#客户端，服务器重新调整了一个格式良好的xml，它的包含是它应该是的（在两个客户端中）。

我在 java 中使用 eclipse 和 axis2，在 c# 中使用 Visual Studio 2005 和 2008。

有什么问题？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:22:58.737

因为 java 和 C# 的元数据类型完全不同，所以不能将 java 的数据类型转换为 c#。

我建议你返回 XML 数据格式来使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:41:41.850

（制作一个 AXIS-Java-Server 并）使用 Java-Server 的 WSDL 创建 C#-Client。在 Visual Studio 命令提示符下有一个用于创建 Java 服务器的 C# 类的工具，名为`SvcUtil.exe`

这就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:14:33.707

问题是axis和eclipse自动生成的WSDL是错误的，所以服务器发给客户端的XML也是错误的。我认为这是自下而上创建 Web 服务时的常见问题。自上而下创建它们要好得多。

服务器发送给客户端的 XML 类似于（只是错误的部分）：

```
<descError>OK</descError>
<codError>0</codError>
<object2>
    <object2>
        <firstDataArray>John</firstDataArray>
        <secondDataArray>35</secondDataArray>
    </object2>
    <object2>
        <firstDataArray>Andrew</firstDataArray>
        <secondDataArray>76</secondDataArray>
    </object2>
    <object2>
        <firstDataArray>Walter</firstDataArray>
        <secondDataArray>23</secondDataArray>
    </object2>
</object2> 
```

那里有一个“object2”标签，不应该。它可以使用 eclipse 为 java 创建一个客户端，但它不能在 c# 中

我刚刚使用自上而下的实现创建了相同的 Web 服务，现在效果很好！！

非常感谢大家！！

# jquery - jQuery Mobile 现有的操作栏实现？

> ID：10494213
> 
> 赞同：2
> 
> 时间：2012-05-08T07:12:47.043
> 
> 标签：jquery

我想知道 jQuery Mobile 库是否有可用的操作栏实现。谢谢！

# php - 如何使用 Recordset 中的条目作为 MYSQL 查询中的条件

> ID：10494215
> 
> 赞同：0
> 
> 时间：2012-05-08T07:12:57.953
> 
> 标签：php, mysql, dreamweaver, recordset

我第一次尝试使用 PHP，所以我希望这不是一个明显的问题。我在一个数据库中有两张表，一张叫用户，另一张叫文章。在用户表中有一个字段，其中包含用户想要关注的类别。在 Dreamweaver 中使用记录集，我可以通过记录集获取当前用户的信息。这在下面的代码中完成。

```
'$row_UserDets['CatFollow']' 
```

目前该字段中有逗号分隔的值，但是我可以更改它。我现在想搜索文章表的类别字段并返回具有这些类别的所有结果。到目前为止，我已经尝试过了。

```
$query_usernews = "SELECT * FROM Articles WHERE CategoryOne IN ($row_UserDets['CatFollow']); $usernews = mysql_query($query_usernews, $database name) or die(mysql_error()); 
```

我希望这是有道理的。我已经以多种不同的格式尝试了几次。正如我所说，我是新手，我可能一直在以完全错误的方式去做。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:32:37.707

尝试类似：

```
$query_usernews = "SELECT * FROM Articles WHERE CategoryOne IN ({$row_UserDets['CatFollow']})"; 
```

或者简单地说：

```
$query_usernews = "SELECT * FROM Articles WHERE CategoryOne IN (" . $row_UserDets['CatFollow'] . ")"; 
```

正如 Romain 在评论中所说，您需要对您的代码进行[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)证明（mysql_real_escape，或[PDO](http://php.net/manual/en/book.pdo.php) + [Prepared statements](http://www.php.net/manual/en/pdo.prepared-statements.php)）。

# css - 未知的伪元素或伪类 ::selection [selection]

> ID：10494217
> 
> 赞同：5
> 
> 时间：2012-05-08T07:13:06.980
> 
> 标签：css, selection, pseudo-element

未知的伪元素或伪类 ::selection [selection] 在 w3c 验证中验证时显示错误，我也在 css 级别 3 中尝试过但未解决。

请回复如何在 w3c 中验证它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T07:16:12.687

[https://developer.mozilla.org/En/CSS/::selection](https://developer.mozilla.org/En/CSS/::selection)

> 目前， ::selection CSS 伪元素不在标准轨道上的任何规范中。

W3C 验证器可能不会验证非标准的东西。

# android - 从库中选择照片，将背景图像替换为所选照片

> ID：10494218
> 
> 赞同：0
> 
> 时间：2012-05-08T07:13:08.960
> 
> 标签：android, select, photo

我正在我的应用程序中处理用户个人资料的照片部分。我的活动上有一个带有背景图像的按钮。当我单击按钮时，它将重定向到画廊，我想选择一个图像。所选图像将替换按钮中的背景。
下面是我的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Choose Picture" 
android:background="@drawable/icon_user"
android:id="@+id/ChoosePictureButton"/>
</LinearLayout> 
```

怎么做？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:31:05.833

要从图库中选择图像，请在按钮的 OnClicklisterner 中包含以下内容

> ```
> Intent intent = new Intent();
> intent.setType("image/*");
> intent.setAction(Intent.ACTION_GET_CONTENT);
> intent.addCategory(Intent.CATEGORY_OPENABLE);
> startActivityForResult(intent, SELECT_PICTURE); 
> ```

```
private static final int SELECT_PICTURE = 1;
private String  selectedImagePath;

  @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE)
            {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                try {
                    FileInputStream fileis=new FileInputStream(selectedImagePath);
                    BufferedInputStream bufferedstream=new BufferedInputStream(fileis);
                    byte[] bMapArray= new byte[bufferedstream.available()];
                    bufferedstream.read(bMapArray);
                    Bitmap bMap = BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length);
                    //Here you can set this /Bitmap image to the button background image

                    if (fileis != null) 
                    {
                        fileis.close();
                    }
                    if (bufferedstream != null) 
                    {
                        bufferedstream.close();
                    }
                } catch (FileNotFoundException e) {                 
                    e.printStackTrace();
                } catch (IOException e) {                   
                    e.printStackTrace();
                }               
            }
        }
    }

public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:51:36.217

使用下面的代码，它可以帮助你。

我在图像上使用了与按钮相同的方式。

```
add_image = (ImageView) findViewById(R.id.add_imagev);

add_image.setOnClickListener(this);

public void onClick(View v) {
  // TODO Auto-generated method stub
  if (v == add_image) {

    Intent i = new Intent(Intent.ACTION_PICK,
                          MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

    i.setType("image/*");
    startActivityForResult(i, 1);
  }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);

  if (requestCode == 1 && resultCode == RESULT_OK) {
    Uri u = (Uri) data.getData();
    // Toast.makeText(getApplicationContext(), ""+u, 1).show();
    String[] filePathColumn = { MediaStore.Images.Media.DATA };
    Cursor cursor = getContentResolver().query(u, filePathColumn, null, null, null);
    cursor.moveToFirst();
    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    filePath = cursor.getString(columnIndex);
    // Toast.makeText(getApplicationContext(), ""+filePath, 1).show();
    cursor.close();
    add_image.setImageURI(u);
  }
} 
```

如果它对您来说已满，请选择正确。

# ipad - 如何在 UISplitView 中隐藏主视图

> ID：10494221
> 
> 赞同：0
> 
> 时间：2012-05-08T07:13:21.380
> 
> 标签：ipad

我试图在横向模式下隐藏 UISplitView 中的主视图。我想通过单击按钮来执行此操作。在我的导航栏中，我有一个单击按钮，我想在横向模式下隐藏主视图。此外，如果主视图被隐藏，则单击同一按钮时，它应该显示主视图。所有这些都需要在主视图中完成。我提到了以下功能

```
-(BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
return YES;
} 
```

但是，尽管单击按钮，它仍会在视图加载时隐藏主视图。下面是我的详细视图代码

```
- (void)setDetailItem:(id)newDetailItem {
if (detailItem != newDetailItem) {
[detailItem release];
detailItem = [newDetailItem retain];

        // Update the view.
        NSLog(@"Detail item in detail view::%@",detailItem);
        NSString *imageName = [NSString stringWithFormat:@"%@.jpg",[detailItem description]];
        NSLog(@"Image name is::%@",imageName);
        self.imageToDisplay.image = [UIImage imageNamed:imageName];
        [self configureView];
    }

    if (mainpopover != nil) {
        [mainpopover dismissPopoverAnimated:YES];
    }        
}

- (void)configureView 
{
    // Update the user interface for the detail item.  
    detailDescriptionLabel.text = [detailItem description];

    openInButton = [[UIBarButtonItem alloc] initWithTitle:@"OpenIn" style:UIBarButtonItemStyleDone target:self action:@selector(openIn)];
    favoritesButton = [[UIBarButtonItem alloc] initWithTitle:@"*" style:UIBarButtonItemStyleDone target:self action:@selector(markFavorite)];
    emailButton = [[UIBarButtonItem alloc] initWithTitle:@"E" style:UIBarButtonItemStyleDone target:self action:@selector(emailFile)];
    uploadButton = [[UIBarButtonItem alloc] initWithTitle:@"#" style:UIBarButtonItemStyleDone target:self action:@selector(uploadFile)];

    self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:openInButton, favoritesButton,emailButton, uploadButton, nil];
}

#pragma mark -
#pragma mark Split view support

-(void)splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc
{
    barButtonItem.title = @"Quicksync";
    self.navigationItem.leftBarButtonItem = barButtonItem;
    self.mainpopover = pc;
}

// Called when the view is shown again in the split view, invalidating the button and popover controller.
-(void)splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    myBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"<" style:UIBarButtonItemStyleDone target:self action:@selector(hideMasterScreen)];
    self.navigationItem.leftBarButtonItem = myBarButtonItem;
    self.mainpopover = nil;
}

// Called when the hidden view controller is about to be displayed in a popover.
- (void)splitViewController:(UISplitViewController*)svc popoverController:(UIPopoverController*)pc willPresentViewController:(UIViewController *)aViewController
{
    // Check to see if the popover presented from the "Tap" UIBarButtonItem is visible.
    if ([barButtonItemPopover isPopoverVisible]) {
        // Dismiss the popover.
        [barButtonItemPopover dismissPopoverAnimated:YES];
    } 
}

-(BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
    return YES;
} 
```

# android - 保持应用程序在后台运行

> ID：10494222
> 
> 赞同：11
> 
> 时间：2012-05-08T07:13:33.937
> 
> 标签：android, background

我想让我的应用程序在后台运行
我有一个应用程序将用户的位置发送到我们的服务器
我有以下代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LocationManager locationManager;
    String context = Context.LOCATION_SERVICE;
    locationManager = (LocationManager)getSystemService(context);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    String provider = locationManager.getBestProvider(criteria, true);

    updateWithNewLocation(null);

    locationManager.requestLocationUpdates(provider, (10*60*1000), 10,
                                           locationListener);
}
private final LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
      updateWithNewLocation(location);
    }

    public void onProviderDisabled(String provider){
      updateWithNewLocation(null);
    }

    public void onProviderEnabled(String provider){ }
    public void onStatusChanged(String provider, int status, 
                                Bundle extras){ }
  };
  public void updateWithNewLocation(Location location) {

        if (location != null) {
            Dbhelper helper = new Dbhelper(this);
            final SQLiteDatabase db = helper.getWritableDatabase();
            long time = System.currentTimeMillis();
            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
            final String curTime = df.format(time);
            final double lat = location.getLatitude();
            final double lng = location.getLongitude();
            final double alt = location.getAltitude();
            System.out.println(lat);
            System.out.println(lng);
            System.out.println(alt);
            db.execSQL("INSERT INTO location (longitude,latitude,altitude,tgl_buat) VALUES " +
            "('"+lng+"','"+lat+"','"+alt+"','"+curTime+"')");
            db.close();
            /*Timer timer = new Timer();
            timer.scheduleAtFixedRate(new TimerTask(){
                @Override
                public void run(){
                    db.execSQL("INSERT INTO location (longitude,latitude,altitude,tgl_buat) VALUES " +
                            "('121.2149012','-6.217837','0.0','2012-05-07 10:20:01')");
                    db.close();
                }
            }, 10*60*1000, 10*60*1000);*/

          } 
       } 
```

我希望我的应用程序在后台运行。我希望它在手机打开时自动启动

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T07:16:03.500

您的问题的一个非常简单的答案是使用[Service](http://developer.android.com/reference/android/app/Service.html)。它将允许您在后台执行各种任务，并且是将您的位置静默*发送到服务器的最佳选择。*

阅读[此](https://stackoverflow.com/a/2779589/966550)答案以获得帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:37:26.557

您可以使用让您的应用程序在后台运行`Service`

我希望这个[链接](http://marakana.com/forums/android/examples/60.html)对你有帮助

请阅读[文档](http://developer.android.com/reference/android/app/Service.html)以获取更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:10:06.140

你应该使用 a`Service`和 a`BroadcastReceiver`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:16:21.400

在 a 中运行您的后台逻辑`Service`，如果您想提供良好的 UX 体验（并且还具有更高的优先级），则将 a 发布`Notification`到状态栏（使用`NotificationManager`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-23T18:48:14.257

# GrabLocationDetails.java

将此代码用作您的`GrabLocationDetails.java`

```
 public class GrabLocationDetails extends Service implements LocationListener {

        double lat,lng;
        private LocationManager locationManager;
        private String provider;
        boolean isGps;
        private ArrayList<String> mList;
        Context GLDContext;

        public GrabLocationDetails(Context cont){
            this.GLDContext=cont;
        }
        public GrabLocationDetails(){}
        @Override
        public void onCreate() {
            super.onCreate();
            mList = new ArrayList<String>();
            isGps = false;
            lat=0.0;
            lng=0.0;
        }

        @Override
        public int onStartCommand(Intent intent, int flags, int startId) {

            //super.onStart(intent, startId);

            try {
                locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                Criteria criteria = new Criteria();
                provider = locationManager.getBestProvider(criteria, false);
                LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
                boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);
                if (!enabled) {
                    isGps = false;
                    ListAddItem(isGps);
                    SendBroadcast();
                } else {
                    isGps = true;
                    Location location = locationManager.getLastKnownLocation(provider);
                    lat=(location.getLatitude());
                    lng=(location.getLongitude());
                    ListAddItem(true);
                    SendBroadcast();
                    locationManager.requestLocationUpdates(provider, 400, 1, this);
                }

            } catch (Exception e) {
                ListAddItem(isGps);
                SendBroadcast();
            }
            return super.onStartCommand(intent, flags, startId);
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            //locationManager.removeUpdates(this);
        }

        public  void SendBroadcast(){
            Intent broadcastIntent = new Intent();
            broadcastIntent.setAction(CommandExecutionModule.LocationDetails);
            broadcastIntent.putExtra("Data", mList);
            sendBroadcast(broadcastIntent);

        }
        public void ListAddItem(boolean GPS) {
            //if(!GPS)
            //mList.add("0");
            //else
            //mList.add("1");
            mList.add(Double.toString(lat));
            mList.add(Double.toString(lng));
        }

        /**************************************************************************************************************/

        @Override
        public void onLocationChanged(Location location){
            locationManager.requestLocationUpdates(provider, 400, 1, this);
            mList.clear();
            lat = (location.getLatitude());
            lng = (location.getLongitude());
            ListAddItem(isGps);
            SendBroadcast();
            locationManager.removeUpdates(this);
            stopSelf();
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            locationManager.requestLocationUpdates(provider, 400, 1, this);
        }

        @Override
        public void onProviderEnabled(String provider){
            isGps=true;
        }
        @Override
        public void onProviderDisabled(String provider){
            isGps=false;
            lat=0.0;
            lng=0.0;
            mList.clear();
            ListAddItem(isGps);
            //SendBroadcast();
        } 
```

# php - htacess如何将两个查询字符串转换为一个url

> ID：10494223
> 
> 赞同：0
> 
> 时间：2012-05-08T07:13:35.927
> 
> 标签：php, mysql, apache, mod-rewrite, url-rewriting

```
 Options +FollowSymlinks
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^news/([^/]+)  /casino2/newsdetail.php?newsid=$1 [NC] 
```

目前使用上面的代码转换`http://localhost/casino2/newsdetail.php?newsid=3`到 `http://localhost/casino2/news/3` 现在有什么问题我试图从两个查询字符串中创建一个 url，比如如果 url 是`localhost/casino2/newsdetail.php?newsid=3`& `pagename=article` url 应该 `localhost/casino2/news/article`是可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:04:03.027

首先，这些规则似乎与您所说的相反 - 即它们将“/localhost/casino2/news/4711”重写为“/casino2/newsdetail.php?newsid=4711”。

如果这是你真正的意思，你需要做的是将两个项目保存到两个变量中，而不是只保存一个变量，如下所示：

```
RewriteRule ^news/([^/]+)/([^/]+)  /casino2/newsdetail.php?newsid=$1&pagename=$2 [NC] 
```

如果newsid总是1，这样你就不需要将它传递给php，你只需在你的替换中创建它，就像这样

```
RewriteRule ^news/([^/]+)  /casino2/newsdetail.php?newsid=1&pagename=$1 [NC] 
```

这将创建以下重写：

/news/article -> /casino2/newsdetail.php?newsid=1&pagename=article /news/somethingelse -> /casino2/newsdetail.php?newsdetail=1&pagename=article

但是，如果您希望能够选择不同的 newssid，则需要将其传递到某个地方——作为 URL 的一部分或作为查询字符串。

需要明确的是，规则的应用方式是

```
RewriteRule "What the URL looks like in the browser" "What my web server expects" 
```

如果你有问题，我强烈建议你打开很多调试日志，这将是一个很大的帮助。相关的配置行是

```
RewriteLog /path/to/logfile
RewriteLogLevel 3 
```

# java - Spring 应用程序正在从我的所有属性文件中加载属性，而不仅仅是我在 context:property-placeholder 中指定的那些

> ID：10494226
> 
> 赞同：0
> 
> 时间：2012-05-08T07:13:45.113
> 
> 标签：java, spring, jpa, maven, properties

我有一个 spring 应用程序，我试图为不同的部署场景进行不同的配置。例如，对于集成测试，我希望我的应用程序使用内存数据库中的 H2，但对于部署到我们的预生产环境，我想配置一个远程 MySql 数据源。在进行了一些挖掘之后，我找到了一种方法，该方法依赖于在我的应用程序上下文中使用元素来指定我想要加载的属性文件。这是我的 applicationContext.xml 中的相关片段：

```
<context:property-placeholder location="classpath:META-INF/spring/database_${spring.profiles.active}.properties"/> 
```

然后我在我的 Maven POM 文件中定义 spring.profiles.active 属性，如下所示：

```
<properties>
        <spring.profiles.active>localdev</spring.profiles.active>
        ...
</properties> 
```

当我运行“mvn test”时，这将允许我的应用程序可以使用属性值（这就是我执行单元测试并尝试解决此问题的方式）

我有几个不同的数据库配置属性文件，它们并排存在于我的 /src/main/resources/META-INF/spring 文件夹中，这是我的项目文件夹结构的相关子集：

```
META-INF
|
+--spring
|  |
|  +--database_build.properties
|  +--database_localdev.propertes
|  +--applicationContext.xml
|
+--persistence.xml 
```

以下是两个属性文件的内容：

database_build.properties

```
#Updated at Thu Apr 26 17:35:43 PDT 2012
#Thu Apr 26 17:35:43 PDT 2012
database.persistenceUnit=persistenceUnitH2
database.driverClassName=org.h2.Driver
database.url=jdbc\:h2\:mem\:;MODE=MySQL;INIT=create schema IF NOT EXISTS TTS_ADMIN;TRACE_LEVEL_SYSTEM_OUT=3
database.username=sa
database.password= 
```

database_localdev.properties

```
#Updated at Thu Apr 26 17:35:43 PDT 2012
#Thu Apr 26 17:35:43 PDT 2012
database.persistenceUnit=persistenceUnitMySql
database.driverClassName=com.mysql.jdbc.Driver
database.url=jdbc\:mysql\://localhost\:3306/TTS_ADMIN
database.username=ttsaSchemaMgrUsr
database.password=password 
```

这里是引用这些属性值来设置数据源的 applicationContext.xml 的相关部分

```
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="true"/>
        <property name="testOnReturn" value="true"/>
        <property name="testWhileIdle" value="true"/>
        <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
        <property name="numTestsPerEvictionRun" value="3"/>
        <property name="minEvictableIdleTimeMillis" value="1800000"/>
        <property name="validationQuery" value="SELECT 1"/>
</bean>
...
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" depends-on="liquibase" id="entityManagerFactory">
        <property name="persistenceUnitName" value="${database.persistenceUnit}"/>
        <property name="dataSource" ref="dataSource"/>
</bean> 
```

从这个配置中可以看出，要加载的持久性单元由 database.persistenceUnit 属性的值决定。这是我的 persistence.xml 文件，其中定义了两个持久性单元：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <!-- An MySql persistence unit -->
    <persistence-unit name="persistenceUnitMySql" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <!-- value="create" to build a new database on each run; value="update" to modify an existing database; value="create-drop" means the same as "create" but also drops tables when Hibernate closes; value="validate" makes no changes to the database -->
            <property name="hibernate.hbm2ddl.auto" value="validate"/>
            <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
            <property name="hibernate.connection.charSet" value="UTF-8"/>
            <!-- Uncomment the following two properties for JBoss only -->
            <!-- property name="hibernate.validator.apply_to_ddl" value="false" /-->
            <!-- property name="hibernate.validator.autoregister_listeners" value="false" /-->
        </properties>
    </persistence-unit>

    <!-- An in-memory persistence unit -->
    <persistence-unit name="persistenceUnitH2" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <!-- value="create" to build a new database on each run; value="update" to modify an existing database; value="create-drop" means the same as "create" but also drops tables when Hibernate closes; value="validate" makes no changes to the database -->
            <property name="hibernate.hbm2ddl.auto" value="create"/>
            <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
            <property name="hibernate.connection.charSet" value="UTF-8"/>
            <!-- Uncomment the following two properties for JBoss only -->
            <!-- property name="hibernate.validator.apply_to_ddl" value="false" /-->
            <!-- property name="hibernate.validator.autoregister_listeners" value="false" /-->
        </properties>
    </persistence-unit>

</persistence> 
```

现在，问题是无论我是否将 spring.profiles.active 属性设置为“build”或“localdev”，我总是会获取 database_localdev.properties 文件的属性值。我已打开跟踪日志记录，当活动配置文件为“localdev”时，我在日志文件中看到以下行：

```
2012-05-07 17:47:17,155 [main] INFO  org.springframework.context.support.PropertySourcesPlaceholderConfigurer - Loading properties file from class path resource [META-INF/spring/database_localdev.properties] 
```

当活动配置文件为“构建”时，我在日志文件中看到了这一点

```
2012-05-07 17:47:17,155 [main] INFO  org.springframework.context.support.PropertySourcesPlaceholderConfigurer - Loading properties file from class path resource [META-INF/spring/database_build.properties] 
```

因此，由于我的 context:property-placeholder 设置，似乎正在尊重 spring.active.profile 值并且正在加载正确的文件。但是，“构建”文件似乎总是被加载，并且似乎总是优先于“localdev”文件中定义的属性。我能够在“localdev”文件中获得要兑现的属性值的唯一方法是注释掉“build”文件中的所有行。

我目前对正在发生的事情感到困惑。是否有其他一些我没有考虑到的规则会导致我的两个属性文件都被加载？

**编辑** 我的 POM 中与资源过滤和属性处理相关的部分：

```
<resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
...
                 <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <version>1.0-alpha-2</version>
                <executions>
                  <execution>
                    <phase>initialize</phase>
                    <goals>
                      <goal>read-project-properties</goal>
                    </goals>
                    <configuration>
                      <files>
                        <file>${basedir}/src/main/resources/META-INF/spring/database_build.properties</file>
                      </files>
                    </configuration>
                  </execution>
                </executions>
           </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:52:00.327

从 POM 片段中可以看出，您正在过滤资源，使用始终从 database_build.properties 文件中读取的属性。

这意味着 applicationContext.xml 中的占位符在构建期间由 maven 使用这些属性填充，并且没有任何内容可供占位符配置器真正配置。Spring 只读取您告诉它的属性文件，但到那时已经太晚了。

# css - 与 php 一起使用 css 时出现错误？

> ID：10494230
> 
> 赞同：0
> 
> 时间：2012-05-08T07:14:05.433
> 
> 标签：css, button, hover

嗨，我也是 css 和 php 的新手，我尝试在我的 php 网站中使用它，我有如下 css，我试图在悬停时更改图像，但我收到错误，我的半图像仅更改...

![在此处输入图像描述](../Images/51bb368b7d0d0402dbf177996bffa5a7.png)

虽然我使用的图像是，

![在此处输入图像描述](../Images/f44d405c6a4f338ff84712590ef052ea.png)

![在此处输入图像描述](../Images/eb0e9c0f3947842ee5fdaa861d6e5fae.png)

我的CSS代码是，

```
#header #nav a {
    float:left;
    margin-left:7px; 
    padding-left:17px; 
    background:url("../design/nav-l.png") 0 -35px no-repeat; 
    text-decoration:none;
}
#header #nav a span {
    float:left; 
    display:block; 
    padding-right:17px; 
    background:url("../design/nav-r.png") 100% -35px no-repeat; 
    line-height:35px;
}
#header #nav a:hover { background-position:0 -100px; }
#header #nav a:hover span { background-position:100% -70px; } 
```

希望您的回复提前谢谢！

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:22:44.200

In the code below nav-r is your small image where nav-bg is your big bg image

```
#header #nav a {
    color: #fff;
    float:left;
    margin-left:7px; 
    padding-left:17px; 
    background:url("nav-r.png") 0 -35px no-repeat; 
    text-decoration:none;
}
#header #nav a span {
    float:left; 
    display:block; 
    padding-right:17px; 
    background:url("nav-bg.png") 100% -35px no-repeat; 
    line-height:35px;
}
#header #nav a:hover { background-position:0 -70px; }
#header #nav a:hover span { background-position:100% -70px; }
</style>
</head>
<body>
<div id='header'>
    <div id='nav'>
        <a href='#'><span>Rajan Rawal</span></a>
    </div>
</div>
</body>
</html> 
```

Once you check this out properly then you just change the below css and see magic

```
#header #nav a {
    color: #fff;
    float:left;
    margin-left:7px; 
    padding-left:17px; 
    background:url("nav-r.png") 0 0 no-repeat; 
    text-decoration:none;
}
#header #nav a span {
    float:left; 
    display:block; 
    padding-right:17px; 
    background:url("nav-bg.png") 100% 0 no-repeat; 
    line-height:35px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:52:02.810

您不能在同一个 CSS 值上混合 % 和 px。

```
background:url("../design/nav-r.png") 100% -35px no-repeat;
#header #nav a:hover span { background-position:100% -70px; }
```

这两行是无效的 CSS，可能导致解析器崩溃。首先使用 %*或*px 设置它们，但不能同时使用两者。

```
background-position: 100px -35px; <--- OK  
background-position: 100% 50% <--- OK  
background-position: 100% 100px <--- Invalid
```

如果在那之后 UI 的行为不正确，您应该使用像 Firebug 这样的网络检查器或浏览器内置的检查器来查看引擎盖下发生了什么。这通常会为您提供有关您的样式有什么问题的重要线索。

如果您在尝试使用网络检查器自己解决问题后仍然遇到问题，请更新问题的更多细节（您尝试了什么，结果如何），我们将更好地帮助您解决问题:)

# javascript - 如何在 IE 上的对象中显示远程 html？

> ID：10494231
> 
> 赞同：0
> 
> 时间：2012-05-08T07:14:05.890
> 
> 标签：javascript, internet-explorer, html

我尝试将 html 嵌入到无法在 IE 上显示的对象中。这是js代码

```
 document.getElementById('one').innerHTML = '<'+'object id="foo" name="foo" type="text/html" data="'+which.href+'"><\/object>'; 
```

这是html

```
<div id="one"><object id="foo" name="foo" type="text/html" data="$jsurl/animate/right/ap2.html"></object></div> 
```

该代码在其他浏览器上正确显示，但在 IE 上不能正确显示，并且 IFRAME 不是一个选项，因为我需要它透明才能覆盖在 div 之上。

需要知道如何在 IE 或任何其他选项上显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:18:47.223

您可以使用 XmlHttpRequest 对象获取远程 HTML 文件的内容，然后将 HTML 代码作为 div 的 innerHTML 插入。

代码可能是这样的：

```
var request = null;

if (window.XMLHttpRequest) {
     // If IE7, Mozilla, Safari, and so on: Use native object.
      request = new XMLHttpRequest();
}
else if (window.ActiveXObject) {
     // ...otherwise, use the ActiveX control for IE5.x and IE6.
     request = new ActiveXObject('MSXML2.XMLHTTP.3.0');
}

request.open('GET', '$jsurl/animate/right/ap2.html', false); 
request.send();

if (request.status == 200) {
    document.getElementById('one').innerHTML = request.responseText;
} 
```

# html - 没有 Javascript 的文本框值

> ID：10494249
> 
> 赞同：-2
> 
> 时间：2012-05-08T07:15:08.460
> 
> 标签：html, css

有没有没有 Javascript 的选项可以在文本框上放置一个消失的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:18:02.407

尽管您的问题尚不清楚，但我认为以下代码可能会对您有所帮助。

```
<input type="text" placeholder="test"> 
```

但请记住，IE9 以下不支持占位符，因为它是 html5 的代码。

# android - 方向更改后更改选项卡后选项卡内容保持可见

> ID：10494252
> 
> 赞同：12
> 
> 时间：2012-05-08T07:15:13.437
> 
> 标签：android, tabs, actionbarsherlock

我用来在我的应用程序`ActionBarSherlock`中实现一个`ActionBar`带有选项卡的选项卡。当我启动应用程序并从选项卡切换到选项卡时，一切都很好。但是，当我从纵向模式更改为横向模式时，上次活动的选项卡的内容仍然可见。更改为另一个选项卡会导致在旧内容之上绘制新内容（见图）。

![在此处输入图像描述](../Images/307722b6b7c84fcc5af6c0356426bc0d.png)

我的主要课程：

```
public class TreinVerkeer extends SherlockFragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setupTabs(savedInstanceState);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    private void setupTabs(Bundle savedInstanceState) {
        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        Tab tab = actionBar.newTab().setText("STATIONS").setTabListener(new TabListener<StationsFragment>(this, "stations", StationsFragment.class));
        actionBar.addTab(tab);

        tab = actionBar.newTab().setText("ROUTE").setTabListener(new TabListener<RouteFragment>(this, "route", RouteFragment.class));
        actionBar.addTab(tab);

        tab = actionBar.newTab().setText("DELAYS").setTabListener(new TabListener<DelaysFragment>(this, "delays", DelaysFragment.class));
        actionBar.addTab(tab);

        if (savedInstanceState != null) {
            actionBar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
    }
} 
```

TabListener（来自[Android 开发者网站上的“添加导航选项卡”，](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)有一些小的改动）：

```
public class TabListener<T extends SherlockFragment> implements com.actionbarsherlock.app.ActionBar.TabListener {
    private SherlockFragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /**
     * Constructor used each time a new tab is created.
     * 
     * @param activity
     *            The host Activity, used to instantiate the fragment
     * @param tag
     *            The identifier tag for the fragment
     * @param clz
     *            The fragment's Class, used to instantiate the fragment
     */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

和`StationsFragment`（`RouteFragment`和`DelaysFragment`是相同的，只有不同的文字）

```
public class StationsFragment extends SherlockFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.stationsfragment, container, false);
    }
} 
```

有了这个布局文件`StationsFragment`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Stations" />

</LinearLayout> 
```

最后是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TreinVerkeer"
            android:label="@string/app_name"
            android:theme="@style/Theme.Sherlock.Light" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

在启动应用程序之前我遇到了同样的问题（所以甚至没有改变方向），这是通过`setContentView(R.layout.main)`在`onCreate`主类中删除来解决的。但是，我找不到解决方案。谁能帮我这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-08T07:22:39.983

`FragmentManager`将在配置更改时自动恢复当前显示的任何片段（和历史记录）。在创建和附加新实例之前调用`findFragmentByTag`以查看目标片段的实例是否已经存在。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-08T10:00:14.700

感谢 Jake，我更新了`onTabSelected`这样的方法：

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);

    // Check if the fragment is already initialized
    if (mFragment == null && preInitializedFragment == null) {
        // If not, instantiate and add it to the activity
        mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName());
        ft.add(android.R.id.content, mFragment, mTag);
    } else if (mFragment != null) {
        // If it exists, simply attach it in order to show it
        ft.attach(mFragment);
    } else if (preInitializedFragment != null) {
        ft.attach(preInitializedFragment);
        mFragment = preInitializedFragment;
    }
} 
```

*此答案仅用于澄清目的，学分归 Jake :)*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-05T19:11:58.133

除了 Niek 发布的更改之外，您还需要进行一些微不足道的更改。主要只是将Activity改为SherlockFragmentActivity。

为了他人的利益，这是我的最终版本，它似乎可以正常工作。

```
 public static class TabListener<T extends SherlockFragment> implements ActionBar.TabListener
   {
      private SherlockFragment mFragment;
      private final SherlockFragmentActivity mActivity;
      private final String mTag;
      private final Class<T> mClass;

      /** Constructor used each time a new tab is created.
       * @param activity  The host Activity, used to instantiate the fragment
       * @param tag  The identifier tag for the fragment
       * @param clz  The fragment's Class, used to instantiate the fragment
       */
      public TabListener(Activity activity, String tag, Class<T> clz)
      {
         mActivity = (SherlockFragmentActivity) activity;
         mTag = tag;
         mClass = clz;
      }

      public void onTabSelected(Tab tab, FragmentTransaction ft)
      {
         // Check if the fragment has already been initialised
         SherlockFragment  preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);
         if (mFragment != null)
         {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
         }
         else if (preInitializedFragment != null)
         {
            mFragment = preInitializedFragment;
            ft.attach(mFragment);
         }
         else
         {
            // Not found, so instantiate and add it to the activity
            mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
         }
      }

      public void onTabUnselected(Tab tab, FragmentTransaction ft)
      {
         if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
         }
      }

      public void onTabReselected(Tab tab, FragmentTransaction ft)
      {
         // User selected the already selected tab. Usually do nothing.
      }
   } 
```

# magento - 在 magento 会话上显示徽标

> ID：10494259
> 
> 赞同：0
> 
> 时间：2012-05-08T07:15:44.713
> 
> 标签：magento

我为每个客户上传了不同的 2 个徽标，我需要在登录后在 magento 目录上显示他们自己的徽标 - 这可能吗？徽标必须在客户登录时从 media/avatar/dummy.jpg 中获取。

目前我在`header.phtml`档案中，任何建议

```
<?php if ($this->getIsHomePage()):?>
    <h1 class="logo">
        <strong><?php echo $this->getLogoAlt() ?></strong>
        <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo">
            <img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" />
        </a>
    </h1>
<?php else:?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:33:40.003

如果您有可管理数量的自定义徽标 - 即几个，而不是数百个 - 我建议使用客户组。将每个客户分配到他们自己的组，然后在您的标题代码中您可以使用`Mage::getSingleton('customer/session')->getCustomerGroupId();`来获取当前客户的组 ID。

然后，您可以根据返回的组 ID 修改您认为合适的徽标 URL。

# c++ - Mongoose Web 服务器获取当前工作线程

> ID：10494266
> 
> 赞同：0
> 
> 时间：2012-05-08T07:16:16.660
> 
> 标签：c++, c, linux, mongoose-web-server

我正在使用 x 个线程启动 mongoose Web 服务器。有没有一种方法可以在所有 x 线程都忙时进行记录，以便在需要时增加线程数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:29:18.690

如果不更改 Mongoose 的代码，这是不可能的。例如，我会更改以下`static void worker_thread(struct mg_context *ctx)`功能`mongoose.c`：

1.  当工作线程在 while 循环内时`while (consume_socket(ctx, &conn->client))`，您可以认为工作线程很忙。
2.  在`close_connection(conn);`工作线程空闲以处理套接字队列中的新事件之后。

您可以使用该点来计算繁忙线程的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:57:26.487

正如 diewie 所建议的，您可以：

*   将“int num_idle”添加到结构 mg_context
*   在 consumer_socket 中，执行：

    ```
    ctx->num_idle++;

    // If the queue is empty, wait. We're idle at this point.
    while (ctx->sq_head == ctx->sq_tail && ctx->stop_flag == 0) {
      pthread_cond_wait(&ctx->sq_full, &ctx->mutex);
    }

    ctx->num_idle--;
    assert(ctx->num_idle >= 0);
    if (ctx->num_idle == 0) {
      ... your code ...
    } 
    ```

# windows - 驱动程序加载机制 Windows vs Linux

> ID：10494270
> 
> 赞同：-1
> 
> 时间：2012-05-08T07:16:40.783
> 
> 标签：windows, linux, operating-system

为什么我们必须重新启动 Windows 才能使新安装的设备驱动程序生效？驱动程序加载机制与 Linux 有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:08:12.310

Windows could load your function driver dynamically by using CreateService and StartService. Also, you can use ZwLoadDriver to load a driver. But, you have to load some types of driver after restart such as class driver, filter driver etc. Because these drivers are depended on other system drivers. If your driver is loaded too late. Your driver won't work correctly. For more detail, please check MSDN. You can control the order of driver loading accurately by using registry.

# php - NSData / NSString 持久化会话和 HTTP Auth 与名称/值对

> ID：10494271
> 
> 赞同：2
> 
> 时间：2012-05-08T07:16:41.347
> 
> 标签：php, ios, session, rest

**Q1：**如果我使用或分别从我的应用程序中填充一个`NSData`或`NSString`对象的内容，后续请求是否会在同一会话中注册到 Web 服务器上（在我的情况下为 PHP）？还是他们都会来创建新的会话？`dataWithContentsOfURL``stringWithContentsOfURL`

**Q2：**如果有的话，使用基于 HTTP 的身份验证（如在 RESTful 服务中）与通过 https 提交 u/p 对有什么优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:30:52.083

Q1：不，他们不保持会话，您至少需要使用`NSURLConnection`
Q2：不同之处在于 HTTPS 连接是加密的，很难被嗅探或劫持，并且在基于 HTTP 的身份验证中，凭据实际上是以纯文本形式发送，因此如果有人在嗅探网络，则可以轻松找到它们...

# ruby-on-rails - 动态列名

> ID：10494276
> 
> 赞同：3
> 
> 时间：2012-05-08T07:16:58.780
> 
> 标签：ruby-on-rails

我尝试使用语言环境：

在*routes.rb*我有：

```
scope "(:locale)", :locale => /en|ro|ru/ do
  resources :catalogs
end 
```

在 *application_controller.rb* 我有

```
# tell the I18n library where to find your translations
I18n.load_path += Dir[Rails.root.join('lib', 'locale', '*.{rb,yml}')]

# set default locale to something other than :en
I18n.default_locale = :en

before_filter :set_locale

def set_locale
  I18n.locale = params[:locale] || I18n.default_locale
end 
```

在数据库中，我有一个包含列的表：catalog_name_en; catalog_name_ro 和 catalog_name_ru

在视图*list.html.erb*我添加以下代码：

```
<% @catalogs.each do |catalog| %>

    <tr>
        <td class="center"><%= catalog.id %></td>
        <td class="center"><%= "catalog.catalog_name#{locale}" %> </td>
    </tr>
<% end %> 
```

在 html 页面中，我只看到“catalog.catalog_name_en”，但没有看到 catalog_name_en 列的值。帮助我PLZ。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T07:22:32.683

您可以尝试使用：

```
<%= catalog.attributes["catalog_name_#{locale}"] %> 
```

或者更短但等效（如评论中所述）：

```
<%= catalog["catalog_name_#{locale}"] %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:35:05.453

您还可以使用[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)：

```
catalog.send("catalog_name_#{locale}") 
```

# c# - 这些 .NET 控件有什么问题？

> ID：10494283
> 
> 赞同：0
> 
> 时间：2012-05-08T07:17:15.503
> 
> 标签：c#, asp.net, .net, user-controls, webforms

代码 ：

```
foreach (HtmlGenericControl div in panelCategorieGuida.Controls.OfType<HtmlGenericControl>())
{
    HiddenField hf = div.Controls.OfType<HtmlGenericControl>().LastOrDefault();
} 
```

它说“我不能将 HtmlGenericControl 隐式转换为 HiddenField”。另外，如果我写`(HiddenField)div.Controls.OfType<HtmlGenericControl>().LastOrDefault()`它不起作用。

div 的最后一个元素（它是一个 HtmlGenericControl）始终是一个 HiddenField 元素。

为什么？我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:19:29.220

难道不应该像

```
HiddenField hf = div.Controls.OfType<HiddenField>().LastOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:19:16.727

```
foreach (var div in panelCategorieGuida.Controls.OfType<HtmlGenericControl>())
{
    var hf = div.Controls.OfType<HiddenField>().LastOrDefault();
} 
```

您的初始代码只是执行了以下操作：

*   将列表过滤为元素，这些元素的类型`HtmlGenericControl`
*   取最后一个（或默认值）
*   将其转换为`HiddenField`（隐式和/或显式）

现在：除非最后一个类型为 的元素`HtmlGenericControl`不是真实的，否则`HiddenField`您将获得无效的强制转换异常。您可以将元素过滤为`HiddenField`（正如我所做的那样），或者更确切地说采用以下代码：

```
var hf = div.Controls.OfType<HtmlGenericControl>().LastOrDefault() as HiddenField; 
```

这是一个“安全演员”......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:30:16.690

我认为@Pranay Rana 是对的。如果您显式转换也失败了，我认为您需要检查您想要的元素是否是隐藏字段。此外，您的代码有一些问题。在继续之前，您应该始终进行一些验证。如果没有，也许在测试阶段，你的代码运行良好。但在生产后期可能会遇到一些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:19:36.773

如果你**知道**它是一个 HiddenField，这应该可以工作：

```
HiddenField hf = div.Controls.LastOrDefault() as HiddenField; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T07:21:28.410

我认为您应该首先检查它是否是隐藏字段

```
if( div.Controls.OfType<HtmlGenericControl>().LastOrDefault() is HiddenField)
{
  /// rest of the processing code 
} 
```

**这可能会解决您的问题，因为您获得的元素可能不是隐藏字段元素**

# json - 将 JSON.parse 委派给网络工作者是否值得（在 Chrome 扩展/FF 插件中）？

> ID：10494285
> 
> 赞同：3
> 
> 时间：2012-05-08T07:17:30.313
> 
> 标签：json, firefox, google-chrome, web-worker

我正在编写一个 Chrome 扩展程序，它将大量数据存储在浏览器的 localStorage 中，并在每次页面加载时对其进行解析。现在随着数据大小的增加，页面加载时间/性能开始下降。所以我想将解析委托给网络工作者。但我怀疑它是否值得。我能做的就是将我的字符串传递给这样的工人。

```
worker.postMessage(localStorage['myObj']); 
```

我打算将这个字符串解析成 JSON 并将其发送回主线程，就像这样

```
worker.onMessage(function(myObj){
    //Then Play around with my object here.
}); 
```

但是当我在这个方法的性能方面进行搜索时，包括消息发布和监听开销，以及一些浏览器不允许在消息中发送 JSON 对象以及一些在发送时自动序列化它的事实，我怀疑这种方法是否值得.

由于我的应用程序只是一个 Chrome 扩展程序和一个 Firefox 插件，我只关心这两个浏览器。如果这种方法适用于这两种浏览器，有人可以建议我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-05-26T08:23:41.797

当前接受的答案是完全不正确的。做你问的事情是完全可行的，下面的例子。

是否**值得**做是您必须在真实场景中检查真实数据的事情。将 JSON 文本发送给 worker 并让它返回解析的结果会产生开销（这很可能涉及一些幕后的序列化，尽管它可能不是 JSON），并且现代浏览器非常快速地解析 JSON。

我怀疑开销不值得，但也许在巨大的 JSON 字符串上，如果浏览器的本机序列化机制比 JSON 快得多，或者发生在主 UI 线程以外的线程上，也许它可能是。

* * *

使用 worker 解析 JSON 的示例：

```
// This stands in for 'worker.js':
var blob = new Blob([
  'this.onmessage = function(message) {\n' +
    'postMessage(JSON.parse(message.data));\n' +
  '};'
  ], { type: "text/javascript" });
var workerUrl = URL.createObjectURL(blob);

// Main script:
var w = new Worker(workerUrl/*"worker.js"*/);
w.onmessage = function(message) {
    display("Got response: typeof message.data: " + typeof message.data);
    display("message.data.for = " + message.data.foo);
};

display('Posting JSON \'{"foo":"bar"}\' to worker');
w.postMessage('{"foo":"bar"}');

function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = String(msg);
    document.body.appendChild(p);
}
```

```
body {
  font-family: monospace;
}
```

结果：

```
将 JSON '{"foo":"bar"}' 发布到工作人员
得到响应：typeof message.data: object
message.data.for = bar

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:18:53.397

只有字符串，而不是对象，可以传入和传出 WebWorkers。如果您将字符串解析为 WebWorker 中的 JSON 对象，则需要将该对象字符串化，然后在将其从 worker 传递到主脚本时重新解析它。显然，这将导致 JSON 被不必要地双重解析，因此是个坏主意。

**2017 更新**：现在不仅允许使用字符串。请参阅一些（更新的）答案和评论以供参考。

# oracle - 对于给定的年份间隔，获取一年中每周的天数（星期一、星期二、网络、...、太阳）

> ID：10494287
> 
> 赞同：1
> 
> 时间：2012-05-08T07:17:41.643
> 
> 标签：oracle, dayofweek, monthcalendar

我想为此“在给定的几年间隔内获得一年中每周的天数（星期一，星期二，网络，...，太阳）”找到所有解决方案

有人知道其他答案吗？请分享它;）

这是我的查询:)

```
WITH dat AS
(SELECT &&start_year + level - 1 cur_year, DECODE(MOD(&start_year + level - 1, 4), 0, 0, 1) no_leap, 
TO_NUMBER(TO_CHAR(TO_DATE('01.01.'||TO_CHAR(&start_year + level - 1)), 'D')) d
FROM dual
CONNECT BY LEVEL < &end_year - &start_year + 2)
SELECT cur_year,
51 + DECODE(no_leap, 1, DECODE(d, 1, 2, 1), DECODE(d, 1, 2, 7, 2, 1)) mon,
51 + DECODE(no_leap, 1, DECODE(d, 2, 2, 1), DECODE(d, 2, 2, 1, 2, 1)) tue,
51 + DECODE(no_leap, 1, DECODE(d, 3, 2, 1), DECODE(d, 3, 2, 2, 2, 1)) wed,
51 + DECODE(no_leap, 1, DECODE(d, 4, 2, 1), DECODE(d, 4, 2, 3, 2, 1)) thu,
51 + DECODE(no_leap, 1, DECODE(d, 5, 2, 1), DECODE(d, 5, 2, 4, 2, 1)) fri,
51 + DECODE(no_leap, 1, DECODE(d, 6, 2, 1), DECODE(d, 6, 2, 5, 2, 1)) sat,
51 + DECODE(no_leap, 1, DECODE(d, 7, 2, 1), DECODE(d, 7, 2, 6, 2, 1)) sun
FROM dat; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:17:14.657

您应该利用 Oracle 的日期算术。当您将两个日期相减时，将返回一个数字，即两个日期之间的天数。如果没有整数差，则返回实际差：

```
SQL> select sysdate - to_date('20120504 15', 'yyyymmdd hh24') from dual;

SYSDATE-TO_DATE('2012050415','YYYYMMDDHH24')
--------------------------------------------
                                  3.76489583 
```

请注意，这不包括`timestamp`，仅包括`date`数据类型。做`timestamp`算术返回一个`interval`数据类型。

大多数解决方案是

```
with dates as ( 
  select to_char(to_date('&start_year','yyyy') + level, 'fmDAY') as days
    from dual
  connect by level < to_date('&end_year','yyyy') - to_date('&start_year','yyyy')
          )
  select ... 
```

注意格式模型的[`fm`修饰符](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#SQLRF00216)；这将删除尾随空格。

作为一般规则，在处理日期时，总是最好使用*日期*，而不是数字或字符。您的`connect by`条款`CONNECT BY LEVEL < &end_year - &start_year + 2`虽然很简单，但为了使您的解决方案发挥作用，您需要做很多额外的工作。

# php - 在 Codeigniter 中定义应用程序常量

> ID：10494292
> 
> 赞同：12
> 
> 时间：2012-05-08T07:17:53.357
> 
> 标签：php, codeigniter

我想知道在 Codeigniter 中定义应用程序常量的简洁方法。我不想更改 codeigniter 的任何本机文件。因此，我不想将其定义`application/config/constants.php`为当我需要迁移到较新版本的 code-igniter 时，我将无法直接复制 codeigniter 的本机文件。

我创建了一个文件`application/config/my_constants.php`并在那里定义了我的常量。'define('APP_VERSION', '1.0.0');'

我加载它使用`$this->load->config('my_constants');`

但我收到一个错误

`Your application/config/dv_constants.php file does not appear to contain a valid configuration array.`

请建议我一种在代码点火器中定义应用程序级常量的干净方法。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-08T07:46:12.717

不使用`application/config/constants.php`就是废话！那是您*应该*放置常量的**唯一位置。**如果您担心升级，请不要更改其中的文件。*`system`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-13T13:56:45.277

只是一个完整的答案。（没有一个答案显示如何使用声明的常量）

过程很简单：

1.  定义一个常数。打开`config/constants.php`并添加以下行：

    `define('SITE_CREATOR', 'John Doe')`

2.  在另一个文件中使用这个常量：

    `$myVar = 'This site was created by '.SITE_CREATOR.' Check out my GitHub Profile'`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T12:18:18.440

`define()`您的 my_constants.php 文件应如下所示，而不是 using ：

```
$config['app_version'] = '1.0.0'; 
```

不过要小心命名数组键，你不想与任何东西冲突。

如果您需要使用`define()`，我建议在主 index.php 文件中进行，尽管您仍然需要使用`APP_VERSION`来获取值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-07T10:26:16.550

```
 config file (system/application/config/config.php) to set configuration related variables.

    Or use 

    constant file (system/application/config/constants.php) to store site preference constants.

  =======================
  DEFINE WHAT YOU WANT
  =======================
  $config['index_page'] = 'home';
  $config['BASEPATH'] = 'PATH TO YOUR HOST'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T09:28:53.950

请参考这个：

[http://ellislab.com/forums/viewthread/56981/](http://ellislab.com/forums/viewthread/56981/)

将变量定义为常量并在数组上添加值

```
$ORDER_STATUS  = array('0'=>'In Progress','1'=>'On Hold','2'
                 =>'Awaiting Review','3'=>'Completed','4'
                 =>'Refund Requested','5'=>'Refunded'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-27T10:01:57.030

您可以通过将常量添加到您自己的配置文件中来实现您的目标，例如`my_config.php`.

您可以将此文件保存在`application/config`文件夹中，如下所示： `application/config/my_config.php`.

为您编写的每个应用程序都有一个单独的配置文件是很常见的，因此这将很容易维护并被其他 CI 程序员理解。

您可以指示 CI 自动加载此文件，也可以根据需要手动加载它。请参阅“配置类”的 CI 手册。*

# html-encode - Windows 中的特殊字符显示正确，Linux 中只是问号

> ID：10494295
> 
> 赞同：0
> 
> 时间：2012-05-08T07:18:04.853
> 
> 标签：html-encode

为什么我在 Windows 中得到正确的 š、č、ž 等字母，但在 Linux 中却是问号？我正在使用 UTF8 编码：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

我还将文件保存为 utf-8 类型的文件。可能是因为我在 Windows 中创建和编辑了文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:01:17.770

由于您使用的是 HTML，因此这里有一些[Slavic Characters 的直接 HTML 代码](http://webdesign.about.com/od/localization/l/blhtmlcodes-cz.htm)。

如果这不能解决问题，那么我在 SQL 开发中看到了这个问题；JimR 对了一半：不支持字符，而不是字体。

您的*字体与您的**字符集*无关紧要，即字符是否存在于您的上下文中。真正的问题变成了“您当前的 Linux 环境是否支持其字符集中的该字符？”

如果您不确定，请尝试将 UTF-8[换成 ISO/IEC 8859-16](http://en.wikipedia.org/wiki/ISO/IEC_8859-16)。如果您需要 UTF-8 中的其他字符，则需要一些额外的编码，但由于它是斯洛伐克周边地区的标准字符集，因此不应该有它不起作用的原因。

如果失败了，那么问题显然在某种程度上是您的 Linux 发行版。

祝你好运！

# css - Gwt 应用程序上的“粘性”面板

> ID：10494301
> 
> 赞同：0
> 
> 时间：2012-05-08T07:18:49.097
> 
> 标签：css, gwt, gquery

我有一个`HorizontalPanel`跨越页面宽度的 GWT 应用程序，用作应用程序的“顶栏”。但是，我想让它“粘性”，即当页面内容增长时，当滚动条出现时，滚动时我希望所说`HorizontalPanel`的内容保持在顶部。是否可以使用 GWT 和/或 GQuery 的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:39:44.263

通过使用 CSS：

向您的 Horizo​​ntalPanel 添加/设置一个 CSS 类

```
myHorizontalPanel.setStyleName("onTop"); 
```

在你的css文件中：

```
.onTop{
  position: fixed;
  top: 0px;
  left: 0px;
  /* adapt width and heigth to fit your needs */
  width:100%;
  height:40px;
} 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:45:07.040

您可以使用`DockLayoutPanel`来划分页面。把你的酒吧`g:north`和滚动面板上`g:center`。这样，如果滚动面板内的内容溢出，滚动条将仅出现在“内容”部分。

```
<g:DocLayoutPanel unit="PX">
    <g:north size="40"> <!-- you must provide a fixed size, you can change it later -->
       your bar content
    </g:north> 
    <g:center>
      <g:ScrollPanel> <!-- it will be stretched to ocuppy all available space -->
         here goes your content
      </g:ScrollPanel>
    </g:center>
</g:DocLayoutPanel> 
```

# inheritance - 以另一个形式实现一个接口

> ID：10494303
> 
> 赞同：2
> 
> 时间：2012-05-08T07:18:57.117
> 
> 标签：inheritance, interface, struct, go, base-class

我希望实现`fmt.Stringer`接口的`String`方法。但是，对于从 派生的一组类型`Node`，它们的`String`实现将是围绕`Print`它们必须提供的接口方法的包装器。如何`String`自动提供所有类型的实现`Node`？如果我`String`在某些基类上提供默认值，我将无法访问派生类型（以及接口方法`Print`）。

```
type Node interface {
    fmt.Stringer
    Print(NodePrinter)
}

type NodeBase struct{}

func (NodeBase) String() string {
    np := NewNodePrinter()
    // somehow call derived type passing the NodePrinter
    return np.Contents()
}

type NodeChild struct {
    NodeBase
    // other stuff
}

func (NodeChild) Print(NodePrinter) {
    // code that prints self to node printer
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:28:01.373

Go[明确声明](http://golang.org/doc/effective_go.html#embedding)这是不可能的：

> 当我们嵌入一个类型时，该类型的方法成为外部类型的方法，但是当它们被调用时，方法的接收者是内部类型，而不是外部类型。

对于解决方案，我推荐这样的东西：

```
func nodeString(n Node) string {
    np := NewNodePrinter()
    // do stuff
    n.Print(np)
    return np.Contents()
}

// Now you can add String method to any Node in one line
func (n NodeChild) String() string { return nodeString(n) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:03:11.713

在 Go 语言中，不支持获取对象 ( `NodeChild`) 的包含对象 ( `NodeBase`)。但是您可以自己实现此功能：

```
type Node interface {
    fmt.Stringer
    Print(NodePrinter)
}

type NodeBase struct {
    Self Node
}

func (n NodeBase) String() string {
    np := NewNodePrinter()
    n.Self.Print(np)
    return np.Contents()
}

type NodeChild struct {
    NodeBase
    // other stuff
}

func NewNodeChild() *NodeChild {
    var n NodeChild
    n.Self = &n
    return &n
}

func (*NodeChild) Print(NodePrinter) {
    // code that prints self to node printer
} 
```

更普遍：

```
type Object struct {
    Self interface{}
}

type NodeBase struct {
    Object
}

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T13:27:03.690

如果您希望它对未来的更改更加灵活，即如果您的节点对象需要不同的代码来打印自己并且您有一些通用的打印代码，并且您希望具有可插入性，请考虑以下事项：

```
package main 

type printableNode struct{
    // define whatever a printer needs to be able to print a node
}

type Node interface {
    // or return some other type that can be handled by NodePrinter
    Printable() printableNode
}

type NodeBase struct{}

// printable representation of a nodebase
func (nb NodeBase) Printable() printableNode {
}

type NodeChild struct {
    NodeBase
    // other stuff
}

//  may make use of nc.Nodebase.Printable()
func (nc NodeChild) Printable() printableNode {
}

type Print struct{Node}

// do the common stuff, in other places you may define other printers
// this way
func (pr Print) String() string {
    // do something with pr.Node.Printable() and return a string
}

// you may also use a simple function that receives a node and returns a string
func Print2(n Node) string {
   // do something with n.Printable() and return a string
}

func main() {
    nb := Nodebase{}
    // use it to print
    fmt.Println(Print{nb})
    // or (simpler)
    fmt.Println(Print2(nb))
} 
```

# php - Symfony 2推进：构建模型没有显示错误？

> ID：10494304
> 
> 赞同：1
> 
> 时间：2012-05-08T07:18:58.130
> 
> 标签：php, symfony, propel

我正在尝试构建这样的模型：

`php app/console propel:build-model --verbose`

我得到：

> [Propel] 你正在运行命令：propel:build-model
> 
> [推进] 错误
> 
> “om”任务过程中出现错误。要获取更多详细信息，请使用“--verbose”选项运行命令。

我怎样才能看到错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:07:55.340

我降级到 PHP 5.3，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T10:26:11.797

我有同样的错误，它来自于我忘记在表中定义主键的事实。

# iphone - iphone中的iAd处理？

> ID：10494305
> 
> 赞同：4
> 
> 时间：2012-05-08T07:18:58.380
> 
> 标签：iphone, ios, iad

我有一些以下要求，我不知道我们是否可以在 iPhone 中做到这一点。要求就像

```
1.Can i open ad in safari browser after click.

2.Can i open ad in application itself in webView.

3.If i open ad in webview in that if i click particular link that link can open in safari browser. 
```

如果有人知道这一切。请帮我。我会感激的。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:22:21.513

这不是 iAd 的工作方式，您使用 iAd 实施广告横幅，而 Apple 会推送您的内容以填充它，而您对此的控制非常有限。

按照您的要求，我建议您制作自己的广告，而不是 iAd。这样做，您可以在用户单击它时（在合理范围内）实现您想要的任何事情。

前任。

```
- (void)callUpAd
{
UIView *myAdSubView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 40)];
//add your ad material here
[self.view addSubview:myAdSubView];
} 
```

# json - 使用 Spring 全局配置 Jackson 属性？

> ID：10494306
> 
> 赞同：0
> 
> 时间：2012-05-08T07:19:05.930
> 
> 标签：json, spring, jackson

我正在使用 Jackson，想知道是否可以使用 resources.xml 设置全局属性？

示例：在某些地方我需要做：

```
jsonMapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false); 
```

很高兴我可以使用 spring resources.xml 配置 Jackson 以执行此全局操作，有关如何执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:12:31.857

您可以轻松地做到这一点，只需扩展`org.codehaus.jackson.map.ObjectMapper`类并在构造函数中指定所有属性（或者您也可以接受映射）：然后在您需要的地方自动装配您自己的 ObjectMapper。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:55:09.020

不是开箱即用的——但也许有人可以构建这样的扩展，作为杰克逊模块发布？

# python - 在 Python 中解析时间字符串

> ID：10494312
> 
> 赞同：79
> 
> 时间：2012-05-08T07:19:36.583
> 
> 标签：python, datetime, datetime-parsing

我有一个日期时间字符串，我不知道如何在 Python 中解析它。

字符串是这样的：

```
Tue May 08 15:14:45 +0800 2012 
```

我试过了

```
datetime.strptime("Tue May 08 15:14:45 +0800 2012","%a %b %d %H:%M:%S %z %Y") 
```

但是Python提出了

```
'z' is a bad directive in format '%a %b %d %H:%M:%S %z %Y' 
```

根据 Python 文档：

> %z UTC 偏移量，格式为 +HHMM 或 -HHMM（如果对象是幼稚的，则为空字符串）。

**解析这个时间字符串的正确格式是什么？**

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-08T07:28:36.833

`datetime.datetime.strptime` has problems with timezone parsing. Have a look at the [`dateutil` package](https://dateutil.readthedocs.io/en/stable/):

```
>>> from dateutil import parser
>>> parser.parse("Tue May 08 15:14:45 +0800 2012")
datetime.datetime(2012, 5, 8, 15, 14, 45, tzinfo=tzoffset(None, 28800)) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-08T07:29:05.443

Your best bet is to have a look at [`strptime()`](http://docs.python.org/library/time.html#time.strptime)

Something along the lines of

```
>>> from datetime import datetime
>>> date_str = 'Tue May 08 15:14:45 +0800 2012'
>>> date = datetime.strptime(date_str, '%a %B %d %H:%M:%S +0800 %Y')
>>> date
datetime.datetime(2012, 5, 8, 15, 14, 45) 
```

Im not sure how to do the +0800 timezone unfortunately, maybe someone else can help out with that.

The formatting strings can be found at [http://docs.python.org/library/time.html#time.strftime](http://docs.python.org/library/time.html#time.strftime) and are the same for formatting the string for printing.

Hope that helps

Mark

PS, Your best bet for timezones in installing pytz from pypi. ( [http://pytz.sourceforge.net/](http://pytz.sourceforge.net/) ) in fact I think pytz has a great datetime parsing method if i remember correctly. The standard lib is a little thin on the ground with timezone functionality.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-09T15:03:19.990

这是一个 stdlib 解决方案，它支持输入时间字符串中的可变 utc 偏移量：

```
>>> from email.utils import parsedate_tz, mktime_tz
>>> from datetime import datetime, timedelta
>>> timestamp = mktime_tz(parsedate_tz('Tue May 08 15:14:45 +0800 2012'))
>>> utc_time = datetime(1970, 1, 1) + timedelta(seconds=timestamp)
>>> utc_time
datetime.datetime(2012, 5, 8, 7, 14, 45) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T07:50:17.027

它已经在 SO 中讨论过很多次。简而言之，不支持“%z”，因为平台不支持。我的解决方案是一个新的，只是跳过时区。：

```
 datetime.datetime.strptime(re.sub(r"[+-]([0-9])+", "", "Tue May 08 15:14:45 +0800 2012"),"%a %b %d %H:%M:%S %Y") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T07:24:31.483

```
In [117]: datetime.datetime.strptime?
Type:           builtin_function_or_method
Base Class:     <type 'builtin_function_or_method'>
String Form:    <built-in method strptime of type object at 0x9a2520>
Namespace:      Interactive
Docstring:
    string, format -> new datetime parsed from a string (like time.strptime()). 
```

# javascript - 有没有办法使用 JavaScript 通过类名获取元素？

> ID：10494318
> 
> 赞同：-3
> 
> 时间：2012-05-08T07:20:08.173
> 
> 标签：javascript

使用 JavaScript 通过类名获取元素的最佳方法是什么？

我可以只使用类似 document.getElementByClassName('myClass') 的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:21:43.497

是的[`getElementsByClassName()`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)，这里有一个[浏览器支持列表](http://caniuse.com/#search=getelements)，上面写着“除 IE8 及以下版本之外的所有最新浏览器”

```
var elements = document.getElementsByClassName('myClass'); 
```

此外，还有[`querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)使用 CSS 选择器的。它与 jQuery 的做法非常相似。[这是它的浏览器支持列表](http://caniuse.com/#search=queryse)，其中还显示“除 IE7 及以下的所有最新浏览器”

```
var elements = document.querySelectorAll('.myClass'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:35:23.063

我更喜欢 jQuery。尝试一下：

```
var elements = jQuery(".myClass"); 
```

这将收集所有具有 class = "myClass" 的元素。如果你想迭代并用这些元素做一些事情：

```
jQuery(".myClass").each( function() {
    // Getting element:
    var element = jQuery(this);

    doSomeStuff(element)
}); 
```

# javascript - JS Bookmarklet 在外部查看器中打开 PDF 文件？

> ID：10494320
> 
> 赞同：0
> 
> 时间：2012-05-08T07:20:18.267
> 
> 标签：javascript, bookmarklet, mendeley

我有一个程序（Mendeley），它尝试通过访问 URL：（而不是）打开`PDF`本地存储的文件。这会导致我的浏览器出现错误（并非意外）。`http://path.to/file.pdf``file://path.to/file.pdf`

我想做的是`javascript bookmarklet`使用地址栏中的 URL（除了 http 部分之外基本上是正确的）并在外部查看器中打开文件（在我的例子中是 Acrobat）。我的最新创作（受 SO 上其他示例的启发）：

```
javascript:var a = (location.pathname); 
var b = ('file://schbs02'+a);  
window.location =  (b);` 
```

这不起作用；在 Chrome（最新版本）中没有任何反应。小书签的固有限制（出于安全目的）是它们无法打开本地文件还是代码有问题？

# regex - 如何向后可视化选择计算？

> ID：10494321
> 
> 赞同：1
> 
> 时间：2012-05-08T07:20:19.033
> 
> 标签：regex, search, vim, select

我想向后视觉选择一个计算pe

```
200 + 3 This is my text -300 +2 + (9*3)
                        |-------------|*

This is text 0,25 + 2.000 + sqrt(15/1.5)
             |-------------------------|* 
```

原因是我会在插入模式下使用它。编写计算后，我想选择计算（使用地图）并将计算结果放在文本中。

正则表达式必须做的是：
- 从光标（参见`*`上面的示例）向后选择到计算的开始
（包括`\/-+*:.,^`）。
- 计算只能从 log/sqrt/abs/round/ceil/floor/sin/cos/tan 或正数或负数
开始 - 计算也可以从行首开始，但永远不会回到上一行

我尝试了各种方式，但找不到正确的正则表达式。
我注意到向后搜索与向前搜索不同。

有人能帮我吗？

**编辑**
忘了提到它还必须**包括**“=”，如果有一个，如果“=”在光标之前，或者光标和“=”之间只有空格。
它不得包含其他“=”符号。

```
200 + 3 = 203 -300 +2 + (9*3) =
          |-------------------|<SPACES>*

200 + 3 = 203 -300 +2 + (9*3)
          |-----------------|<SPACES>* 
```

`*`= 光标所在的位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T23:51:25.740

在纯 vim 中接近的正则表达式是

```
\v\c\s*\zs(\s{-}(((sqrt|log|sin|cos|tan|exp)?\(.{-}\))|(-?[0-9,.]+(e-?[0-9]+)?)|([-+*/%^]+)))+(\s*\=?)?\s* 
```

有一些限制：不解析子表达式（包括函数参数）。您需要使用适当的语法解析器来做到这一点，我不建议在纯 vim ^(1中这样做)

## 运算符映射

要像使用文本对象一样使用它，请在 $MYVIMRC 中使用类似的内容：

```
func! DetectExpr(flag)
    let regex = '\v\c\s*\zs(\s{-}(((sqrt|log|sin|cos|tan|exp)?\(.{-}\))|(-?[0-9,.]+(e-?[0-9]+)?)|([-+*/%^]+)))+(\s*\=?)?\s*' 
    return searchpos(regex, a:flag . 'ncW', line('.'))
endf

func! PositionLessThanEqual(a, b)
    "echo 'a: ' . string(a:a)
    "echo 'b: ' . string(a:b)
    if (a:a[0] == a:b[0])
        return (a:a[1] <= a:b[1]) ? 1 : 0
    else
        return (a:a[0] <= a:b[0]) ? 1 : 0
    endif
endf

func! SelectExpr(mustthrow)
    let cpos  = getpos(".")
    let cpos  = [cpos[1], cpos[2]] " use only [lnum,col] elements
    let begin = DetectExpr('b')
    if ( ((begin[0] == 0) && (begin[1] == 0))
      \ || !PositionLessThanEqual(begin, cpos) )
        if (a:mustthrow)
            throw "Cursor not inside a valid expression"
        else
            "echoerr "not satisfied: " . string(begin) . " < " . string(cpos)
        endif
        return 0
    endif
    "echo "satisfied: " . string(begin) . " < " . string(cpos)

    call setpos('.', [0, begin[0], begin[1], 0])
    let end = DetectExpr('e')
    if ( ((end[0] == 0) || (end[1] == 0))
      \ || !PositionLessThanEqual(cpos,  end) )
        call setpos('.', [0, cpos[0], cpos[1], 0])
        if (a:mustthrow)
            throw "Cursor not inside a valid expression"
        else
            "echoerr "not satisfied: " . string(begin) . " < " . string(cpos) . " < " . string(end) 
        endif
        return 0
    endif
    "echo "satisfied: " . string(begin) . " < " . string(cpos) . " < " . string(end) 

    norm! v
    call setpos('.', [0, end[0],   end[1],   0])
    return 1
endf

silent! unmap X
silent! unmap <M-.>

xnoremap <silent>X :<C-u>call SelectExpr(0)<CR>
onoremap <silent>X :<C-u>call SelectExpr(0)<CR> 
```

现在您可以对光标位置周围（或之后）最近的表达式进行操作：

*   `v``X` - [v]通常选择 e[X]pression
*   `d``X` - [d]删除当前的 e[X]pression
*   `y``X` - [y]ank 当前 e[X]pression
*   `"a``y``X` - ID。注册`a`

作为一个技巧，使用以下内容从 OP 获得确切的 ascii 艺术（使用*virtualedit*进行演示）：

## 插入模式映射

回复聊天：

```
" if you want trailing spaces/equal sign to be eaten:
imap <M-.> <C-o>:let @e=""<CR><C-o>"edX<C-r>=substitute(@e, '^\v(.{-})(\s*\=?)?\s*$', '\=string(eval(submatch(1)))', '')<CR>

" but I'm assuming you wanted them preserved:
imap <M-.> <C-o>:let @e=""<CR><C-o>"edX<C-r>=substitute(@e, '^\v(.{-})(\s*\=?\s*)?$', '\=string(eval(submatch(1))) . submatch(2)', '')<CR> 
```

允许您`Alt-.`在插入模式下点击，并且当前表达式被它的评估替换。在插入模式下，光标最终位于结果的末尾。

```
200 + 3 This is my text -300 +2 + (9*3)

This is text 0.25 + 2.000 + sqrt(15/1.5) 
```

通过按`Alt-.`入插件 3 次进行测试：

```
203 This is my text -271

This is text 5.412278 
```

## 为了好玩：ascii 艺术

### ``v``X```o``y```o``Esc```````<``j```P```v``X````r``-````r``|```e``.`

自己轻松测试：

```
:let @q="vXoyo\x1b`<jPvXr-r|e.a*\x1b"
:set virtualedit=all 
```

现在你可以`@``q`在任何地方，它会用 ascii 装饰最近的表达式:)

```
200 + 3 = 203 -300 +2 + (9*3) =
|-------|*
          |-------------------|*

200 + 3 = 203 -300 +2 + (9*3)
          |-----------------|*
|-------|*

This is text 0,25 + 2.000 + sqrt(15/1.5)
             |-------------------------|* 
```

* * *

¹考虑使用Vim的python集成做这样的解析

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:58:34.753

毕竟用正则表达式来实现这似乎是一项相当复杂的任务，所以如果你能以任何方式避免它，请尝试这样做。

我创建了一个适用于几个示例的正则表达式 - 试一试，看看它是否有效：

```
^(?:[A-Za-z]|\s)+((?:[^A-Za-z]+)?(?:log|sqrt|abs|round|ceil|floor|sin|cos|tan)[^A-Za-z]+)(?:[A-Za-z]|\s)*$ 
```

您感兴趣的部分应该在第一个匹配组中。

如果您需要解释，请告诉我。

编辑：

`^`- 匹配一行的开头

`(?:[A-Za-z]|\s)+`- 匹配所有字母或空格一次或多次

匹配并捕获以下 3 个：
`((?:[^A-Za-z]+)?`- 匹配不是字母的所有内容（即在您的案例编号或运算符中）

`(?:log|sqrt|abs|round|ceil|floor|sin|cos|tan)`- 匹配您的关键字之一

`[^A-Za-z]+)`- 匹配不是字母的所有内容（即在您的案例编号或运算符中）

`(?:[A-Za-z]|\s)*`- 匹配所有字母或空格零次或多次

`$`- 匹配行尾

# c# - LINQ 分组和忽略列

> ID：10494324
> 
> 赞同：1
> 
> 时间：2012-05-08T07:20:28.677
> 
> 标签：c#, linq, entity-framework, group-by, linq-to-objects

我正在使用 EF 和 LINQ。我的数据库表中有以下内容

```
branchId      Name        ItemId          CategoryId
2             Test1       1               1
5             Test1       1               1
3             Test1       1               2
2             Test2       2               1
7             Test2       2               1 
```

我需要按 ItemId 分组，BranchId 应该被忽略，所以输出应该是

```
Name  ItemId  CategoryId
Test1 1       1
Test1 1       2
Test2 2       2 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:32:30.603

您需要在多列上应用分组依据，因此您需要使用如下代码在多列上进行分组...。

```
var numberGroups = from it in context.items
                   group it by new { it.ItemId,it.Name,it.CateogryID } into g
                   select new { ItemID = g.Key.ItemID, Name= g.Key.Name
                                CategoryID = g.Key.CategoryID }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:26:06.600

```
var query = from item in context.Item
            group by item.Name,ItemId,item.CategoryId
           select item.Name,Item.Id,item.CategoryId; 
```

# memory-management - 写入全局或本地内存会使内核执行时间增加 10000 %

> ID：10494326
> 
> 赞同：6
> 
> 时间：2012-05-08T07:21:03.713
> 
> 标签：memory-management, opencl

我有以下 OpenCL 内核：

```
kernel void ndft(
    global float *re, global float *im, int num_values,
    global float *spectrum_re, global float *spectrum_im,
    global float *spectrum_abs,
    global float *sin_array, global float *cos_array,
    float sqrt_num_values_reciprocal)
{
    // MATH MAGIC - DISREGARD FROM HERE -----------

    float x;
    float y;
    float sum_re = 0;
    float sum_im = 0;

    size_t thread_id = get_global_id(0);
    //size_t local_id = get_local_id(0);

    // num_values = 24 (live environment), 48 (test)
    for (int i = 0; i < num_values; i++)
    {
        x = cos_array[thread_id * num_values + i] * sqrt_num_values_reciprocal;
        y = sin_array[thread_id * num_values + i] * sqrt_num_values_reciprocal;
        sum_re = sum_re + re[i] * x + im[i] * y;
        sum_im = sum_im - re[i] * y + x * im[i];
    }

    // MATH MAGIC DONE ----------------------------

    //spectrum_re[thread_id] = sum_re;
    //spectrum_im[thread_id] = sum_im;
    //spectrum_abs[thread_id] = hypot(sum_re, sum_im);
    float asdf = hypot(sum_re, sum_im); // this is just a dummy calculation
}
```

像这样，执行时间大约是 15 us（工作组大小 = 567，14 个工作组，总共 7938 个线程）。

但是，当然，我需要以某种方式检索操作的结果，这就是最后几行的用途（已注释掉）。一旦我执行了这些内存操作中的一个（不管`spectrum_X`是`global`，如示例中的 还是`local`），内核的执行时间就会增加到 ~1.4 到 1.5 毫秒。

我认为执行时间的增加是某种固定的开销，所以我只会积累更多的数据，这样由于这种影响而损失的相对时间量就会最小化。但是当我将线程数加倍（即数据量的两倍）时，执行时间也会加倍（达到 2.8 ~ 3.0 毫秒）。

我发现，即使我只取消注释*其中*一行，我也有相同的执行时间，就好像我取消了所有三行的注释一样。即使我添加`if (thread_id == 0)`并运行它，我也有相同的执行时间。但是，这种方式太慢了（我的应用程序的上限约为 30 us）。当我在 CPU 上使用普通 C 代码运行它时，它的性能甚至快了大约 5 倍。

现在我显然做错了，但我不确定从哪里开始寻找解决方案。

* * *

当我评论 talonmies 的回答时，我还做了以下事情：

从上面的代码中，我使最后 4 行看起来像

```
//spectrum_re[thread_id] = sum_re;
//spectrum_im[thread_id] = sum_im;
spectrum_abs[thread_id] = hypot(sum_re, sum_im);
//float asdf = hypot(sum_re, sum_im);
```

正如预期的那样，执行时间约为 1.8 毫秒。为我的系统生成的汇编代码是：

```
//
// Generated by NVIDIA NVVM Compiler
// Compiler built on Tue Apr 03 12:42:39 2012 (1333449759)
// Driver 
//

.version 3.0
.target sm_21, texmode_independent
.address_size 32

.entry ndft(
    .param .u32 .ptr .global .align 4 ndft_param_0,
    .param .u32 .ptr .global .align 4 ndft_param_1,
    .param .u32 ndft_param_2,
    .param .u32 .ptr .global .align 4 ndft_param_3,
    .param .u32 .ptr .global .align 4 ndft_param_4,
    .param .u32 .ptr .global .align 4 ndft_param_5,
    .param .u32 .ptr .global .align 4 ndft_param_6,
    .param .u32 .ptr .global .align 4 ndft_param_7,
    .param .f32 ndft_param_8
)
{
    .reg .f32   %f;
    .reg .pred  %p;
    .reg .s32   %r;

    ld.param.u32    %r3, [ndft_param_2];
    // inline asm
    mov.u32     %r18, %envreg3;
    // inline asm
    // inline asm
    mov.u32     %r19, %ntid.x;
    // inline asm
    // inline asm
    mov.u32     %r20, %ctaid.x;
    // inline asm
    // inline asm
    mov.u32     %r21, %tid.x;
    // inline asm
    add.s32     %r22, %r21, %r18;
    mad.lo.s32  %r11, %r20, %r19, %r22;
    setp.gt.s32     %p1, %r3, 0;
    @%p1 bra    BB0_2;

    mov.f32     %f46, 0f00000000;
    mov.f32     %f45, %f46;
    bra.uni     BB0_4;

BB0_2:
    ld.param.u32    %r38, [ndft_param_2];
    mul.lo.s32  %r27, %r38, %r11;
    shl.b32     %r28, %r27, 2;
    ld.param.u32    %r40, [ndft_param_6];
    add.s32     %r12, %r40, %r28;
    ld.param.u32    %r41, [ndft_param_7];
    add.s32     %r13, %r41, %r28;
    mov.f32     %f46, 0f00000000;
    mov.f32     %f45, %f46;
    mov.u32     %r43, 0;
    mov.u32     %r42, %r43;

BB0_3:
    add.s32     %r29, %r13, %r42;
    ld.global.f32   %f18, [%r29];
    ld.param.f32    %f44, [ndft_param_8];
    mul.f32     %f19, %f18, %f44;
    add.s32     %r30, %r12, %r42;
    ld.global.f32   %f20, [%r30];
    mul.f32     %f21, %f20, %f44;
    ld.param.u32    %r35, [ndft_param_0];
    add.s32     %r31, %r35, %r42;
    ld.global.f32   %f22, [%r31];
    fma.rn.f32  %f23, %f22, %f19, %f46;
    ld.param.u32    %r36, [ndft_param_1];
    add.s32     %r32, %r36, %r42;
    ld.global.f32   %f24, [%r32];
    fma.rn.f32  %f46, %f24, %f21, %f23;
    neg.f32     %f25, %f22;
    fma.rn.f32  %f26, %f25, %f21, %f45;
    fma.rn.f32  %f45, %f24, %f19, %f26;
    add.s32     %r42, %r42, 4;
    add.s32     %r43, %r43, 1;
    ld.param.u32    %r37, [ndft_param_2];
    setp.lt.s32     %p2, %r43, %r37;
    @%p2 bra    BB0_3;

BB0_4:
    // inline asm
    abs.f32     %f27, %f46;
    // inline asm
    // inline asm
    abs.f32     %f29, %f45;
    // inline asm
    setp.gt.f32     %p3, %f27, %f29;
    selp.f32    %f8, %f29, %f27, %p3;
    selp.f32    %f32, %f27, %f29, %p3;
    // inline asm
    abs.f32     %f31, %f32;
    // inline asm
    setp.gt.f32     %p4, %f31, 0f7E800000;
    mov.f32     %f47, %f32;
    @%p4 bra    BB0_6;

    mov.f32     %f48, %f8;
    bra.uni     BB0_7;

BB0_6:
    mov.f32     %f33, 0f3E800000;
    mul.rn.f32  %f10, %f8, %f33;
    mul.rn.f32  %f47, %f32, %f33;
    mov.f32     %f48, %f10;

BB0_7:
    mov.f32     %f13, %f48;
    // inline asm
    div.approx.f32  %f34, %f13, %f47;
    // inline asm
    mul.rn.f32  %f39, %f34, %f34;
    add.f32     %f38, %f39, 0f3F800000;
    // inline asm
    sqrt.approx.f32     %f37, %f38;      // <-- this is part of hypot()
    // inline asm
    mul.rn.f32  %f40, %f32, %f37;
    add.f32     %f41, %f32, %f8;
    setp.eq.f32     %p5, %f32, 0f00000000;
    selp.f32    %f42, %f41, %f40, %p5;
    setp.eq.f32     %p6, %f32, 0f7F800000;
    setp.eq.f32     %p7, %f8, 0f7F800000;
    or.pred     %p8, %p6, %p7;
    selp.f32    %f43, 0f7F800000, %f42, %p8;
    shl.b32     %r33, %r11, 2;
    ld.param.u32    %r39, [ndft_param_5];
    add.s32     %r34, %r39, %r33;
    st.global.f32   [%r34], %f43;    // <-- stores the hypot's result in spectrum_abs
    ret;
} 
```

事实上，我所有的计算操作都在那里 - 很多加法/乘法以及函数`sqrt`。`hypot`从上面的 asm 代码中，我删除了倒数第二行：

`st.global.f32 [%r34], %f43;`

这是实际将数据存储在全局数组中的行`spectrum_abs`。然后我使用`clCreateProgramWithBinary`并使用了修改后的 asm 代码文件作为输入。执行时间减少到 20 我们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T10:44:08.050

我猜你正在看到编译器优化的效果。

NVIDIA 编译器非常积极地消除不直接参与写入全局内存的“死代码”。因此，在您的内核中，如果您不编写`sum_re`or `sum_im`，编译器将优化整个计算循环（可能还有其他所有内容），并为您留下一个空内核，其中仅包含一个空操作。您看到的 15 微秒执行时间主要只是内核启动开销，而没有太多其他内容。当您取消注释全局内存写入时，编译器会将所有计算代码留在原处，您会看到代码的真实执行时间。

因此，您可能应该问的真正问题是如何优化该内核以将其执行时间从当前所需的 1.5 毫秒减少到您的（非常雄心勃勃的）30 微秒目标。

* * *

尽管对原始答案表示怀疑，但这里有一个完整的重现案例，它支持断言这是与编译器相关的效果：

```
#include <iostream>
#include <OpenCL/opencl.h>

size_t source_size;
const char * source_str =
"kernel void ndft(                                                                     \n" \
"    global float *re, global float *im, int num_values,                               \n" \
"    global float *spectrum_re, global float *spectrum_im,                             \n" \
"    global float *spectrum_abs,                                                       \n" \
"    global float *sin_array, global float *cos_array,                                 \n" \
"    float sqrt_num_values_reciprocal)                                                 \n" \
"{                                                                                     \n" \
"    // MATH MAGIC - DISREGARD FROM HERE -----------                                   \n" \
"                                                                                      \n" \
"    float x;                                                                          \n" \
"    float y;                                                                          \n" \
"    float sum_re = 0;                                                                 \n" \
"    float sum_im = 0;                                                                 \n" \
"                                                                                      \n" \
"    size_t thread_id = get_global_id(0);                                              \n" \
"                                                                                      \n" \
"    for (int i = 0; i < num_values; i++)                                              \n" \
"    {                                                                                 \n" \
"        x = cos_array[thread_id * num_values + i] * sqrt_num_values_reciprocal;       \n" \
"        y = sin_array[thread_id * num_values + i] * sqrt_num_values_reciprocal;       \n" \
"        sum_re += re[i] * x + im[i] * y;                                              \n" \
"        sum_im -= re[i] * y + x * im[i];                                              \n" \
"    }                                                                                 \n" \
"                                                                                      \n" \
"    // MATH MAGIC DONE ----------------------------                                   \n" \
"                                                                                      \n" \
"    //spectrum_re[thread_id] = sum_re;                                                \n" \
"    //spectrum_im[thread_id] = sum_im;                                                \n" \
"    //spectrum_abs[thread_id] = hypot(sum_re, sum_im);                                \n" \
"}                                                                                     \n";

int main(void)
{
    int err;

    cl_device_id device_id;  
    clGetDeviceIDs(NULL, CL_DEVICE_TYPE_GPU, 1, &device_id, NULL);
    cl_context context = clCreateContext(0, 1, &device_id, NULL, NULL, &err);
    cl_program program = clCreateProgramWithSource(context, 1, (const char **)&source_str, (const size_t *)&source_size, &err);

    err = clBuildProgram(program, 1, &device_id, NULL, NULL, NULL);

    cl_uint program_num_devices;
    clGetProgramInfo(program, CL_PROGRAM_NUM_DEVICES, sizeof(cl_uint), &program_num_devices, NULL);

    size_t * binaries_sizes = new size_t[program_num_devices];
    clGetProgramInfo( program, CL_PROGRAM_BINARY_SIZES, program_num_devices*sizeof(size_t), binaries_sizes, NULL);

    char **binaries = new char*[program_num_devices];
    for (size_t i = 0; i < program_num_devices; i++)
        binaries[i] = new char[binaries_sizes[i]+1];

    clGetProgramInfo(program, CL_PROGRAM_BINARIES, program_num_devices*sizeof(size_t), binaries, NULL);
    for (size_t i = 0; i < program_num_devices; i++)
    {
        binaries[i][binaries_sizes[i]] = '\0';
        std::cout << "Program " << i << ":" << std::endl;
        std::cout << binaries[i];
    }
    return 0;
} 
```

编译并运行后，它会从 OpenCL 运行时发出以下 PTX 代码：

```
Program 0:
bplist00?^clBinaryDriver\clBinaryData_clBinaryVersionWCLH 1.0O!.version 1.5
.target sm_12
.target texmode_independent

.reg .b32  r<126>; /* define r0..125 */ 
.reg .b64  x<126>; /* define r0..125 */ 
.reg .b32  f<128>; /* define f0..127 */ 
.reg .pred p<32>; /* define p0..31 */ 
.reg .u32  sp;

.reg .b8   wb0,wb1,wb2,wb3; /* 8-bit write buffer */ 
.reg .b16  ws0,ws1,ws2,ws3; /* 16-bit write buffer */ 
.reg .b32  tb0,tb1,tb2,tb3; /* read tex buffer */ 
.reg .b64  vl0,vl1; /* 64-bit vector buffer */ 
.reg .b16  cvt16_0,cvt16_1; /* tmps for conversions */ 

.const .align 1 .b8 ndft_gid_base[52];
.local .align 16 .b8 ndft_stack[8];
.entry ndft(
    .param.b32 ndft_0  /* re */,
    .param.b32 ndft_1  /* im */,
    .param.b32 ndft_2  /* num_values */,
    .param.b32 ndft_3  /* spectrum_re */,
    .param.b32 ndft_4  /* spectrum_im */,
    .param.b32 ndft_5  /* spectrum_abs */,
    .param.b32 ndft_6  /* sin_array */,
    .param.b32 ndft_7  /* cos_array */,
    .param.f32 ndft_8  /* sqrt_num_values_reciprocal */
) {
    mov.u32 sp, ndft_stack;
    mov.u32 r0, 4294967295;
    ld.param.u32 r1, [ndft_2 + 0];
LBB1_1:
    add.u32 r0, r0, 1;
    setp.lt.s32 p0, r0, r1;
    @p0 bra LBB1_1;
LBB1_2:
    ret;
} 
```

IE。不包含任何计算循环的内核存根。当内核的最后三行中的三个全局内存写入未注释时，它会发出：

```
Program 0:
S.version 1.5inaryDriver\clBinaryData_clBinaryVersionWCLH 1.0O
.target sm_12
.target texmode_independent

.reg .b32  r<126>; /* define r0..125 */ 
.reg .b64  x<126>; /* define r0..125 */ 
.reg .b32  f<128>; /* define f0..127 */ 
.reg .pred p<32>; /* define p0..31 */ 
.reg .u32  sp;

.reg .b8   wb0,wb1,wb2,wb3; /* 8-bit write buffer */ 
.reg .b16  ws0,ws1,ws2,ws3; /* 16-bit write buffer */ 
.reg .b32  tb0,tb1,tb2,tb3; /* read tex buffer */ 
.reg .b64  vl0,vl1; /* 64-bit vector buffer */ 
.reg .b16  cvt16_0,cvt16_1; /* tmps for conversions */ 

.const .align 1 .b8 ndft_gid_base[52];
.local .align 16 .b8 ndft_stack[8];
.entry ndft(
    .param.b32 ndft_0  /* re */,
    .param.b32 ndft_1  /* im */,
    .param.b32 ndft_2  /* num_values */,
    .param.b32 ndft_3  /* spectrum_re */,
    .param.b32 ndft_4  /* spectrum_im */,
    .param.b32 ndft_5  /* spectrum_abs */,
    .param.b32 ndft_6  /* sin_array */,
    .param.b32 ndft_7  /* cos_array */,
    .param.f32 ndft_8  /* sqrt_num_values_reciprocal */
) {
    mov.u32 sp, ndft_stack;
    cvt.u32.u16 r0, %tid.x;
    cvt.u32.u16 r1, %ntid.x;
    cvt.u32.u16 r2, %ctaid.x;
    mad24.lo.u32 r0, r2, r1, r0;
    mov.u32 r1, 0;
    shl.b32 r2, r1, 2;
    mov.u32 r3, ndft_gid_base;
    add.u32 r2, r2, r3;
    ld.const.u32 r2, [r2 + 40];
    add.u32 r0, r0, r2;
    ld.param.u32 r2, [ndft_2 + 0];
    mul.lo.u32 r3, r0, r2;
    shl.b32 r3, r3, 2;
    mov.f32 f0, 0f00000000 /* 0.000000e+00 */;
    ld.param.f32 f1, [ndft_8 + 0];
    ld.param.u32 r4, [ndft_7 + 0];
    ld.param.u32 r5, [ndft_6 + 0];
    ld.param.u32 r6, [ndft_5 + 0];
    ld.param.u32 r7, [ndft_4 + 0];
    ld.param.u32 r8, [ndft_3 + 0];
    ld.param.u32 r9, [ndft_1 + 0];
    ld.param.u32 r10, [ndft_0 + 0];
    mov.u32 r11, r1;
    mov.f32 f2, f0;
LBB1_1:
    setp.ge.s32 p0, r11, r2;
    @!p0 bra    LBB1_7;
LBB1_2:
    shl.b32 r1, r0, 2;
    add.u32 r2, r8, r1;
    st.global.f32 [r2+0], f0;
    add.u32 r1, r7, r1;
    st.global.f32 [r1+0], f2;
    abs.f32 f1, f2;
    abs.f32 f0, f0;
    setp.gt.f32 p0, f0, f1;
    selp.f32 f2, f0, f1, p0;
    abs.f32 f3, f2;
    mov.f32 f4, 0f7E800000 /* 8.507059e+37 */;
    setp.gt.f32 p1, f3, f4;
    selp.f32 f0, f1, f0, p0;
    shl.b32 r0, r0, 2;
    add.u32 r0, r6, r0;
    @!p1 bra    LBB1_8;
LBB1_3:
    mul.rn.f32 f3, f2, 0f3E800000 /* 2.500000e-01 */;
    mul.rn.f32 f1, f0, 0f3E800000 /* 2.500000e-01 */;
LBB1_4:
    mov.f32 f4, 0f00000000 /* 0.000000e+00 */;
    setp.eq.f32 p0, f2, f4;
    @!p0 bra    LBB1_9;
LBB1_5:
    add.f32 f1, f2, f0;
LBB1_6:
    mov.f32 f3, 0f7F800000 /* inf */;
    setp.eq.f32 p0, f0, f3;
    setp.eq.f32 p1, f2, f3;
    or.pred p0, p1, p0;
    selp.f32 f0, f3, f1, p0;
    st.global.f32 [r0+0], f0;
    ret;
LBB1_7:
    add.u32 r12, r3, r1;
    add.u32 r13, r4, r12;
    ld.global.f32 f3, [r13+0];
    mul.rn.f32 f3, f3, f1;
    add.u32 r13, r9, r1;
    ld.global.f32 f4, [r13+0];
    mul.rn.f32 f5, f3, f4;
    add.u32 r12, r5, r12;
    ld.global.f32 f6, [r12+0];
    mul.rn.f32 f6, f6, f1;
    add.u32 r12, r10, r1;
    ld.global.f32 f7, [r12+0];
    mul.rn.f32 f8, f7, f6;
    add.f32 f5, f8, f5;
    sub.f32 f2, f2, f5;
    mul.rn.f32 f4, f4, f6;
    mul.rn.f32 f3, f7, f3;
    add.f32 f3, f3, f4;
    add.f32 f0, f0, f3;
    add.u32 r11, r11, 1;
    add.u32 r1, r1, 4;
    bra LBB1_1;
LBB1_8:
    mov.f32 f1, f0;
    mov.f32 f3, f2;
    bra LBB1_4;
LBB1_9:
    div.approx.f32 f1, f1, f3;
    mul.rn.f32 f1, f1, f1;
    add.f32 f1, f1, 0f3F800000 /* 1.000000e+00 */;
    sqrt.approx.ftz.f32 f1, f1;
    mul.rn.f32 f1, f2, f1;
    bra LBB1_6;
} 
```

我认为这是非常无可辩驳的证据，它是编译器优化导致运行时差异的原因，并且仅取决于内存写入是否包含在内核代码中。

* * *

我想最后一个问题就是为什么这么慢（不管这是否是由编译器优化引起的争论）。您看到的 1.5 毫秒运行时间是代码性能的真实反映，真正的问题是为什么。从我阅读您的内核代码来看，答案似乎在于内存访问模式，这对 GPU 来说非常可怕。在计算循环中，您有两个具有非常大的跨度的全局内存读取，如下所示：

```
x = cos_array[thread_id * num_values + i] * sqrt_num_values_reciprocal; 
```

根据您的代码中的注释`num_values`是 24 或 48。这意味着内存读取不可能合并，并且 Fermi GPU 上的 L1 缓存也不会有太大帮助。这将对内存带宽利用率产生巨大的负面影响，并使代码非常慢。如果您坚持输入数据的顺序，那么更快的解决方案是使用扭曲来计算一个输出（因此将扭曲范围缩小到最终总和）。这会将读取步幅从 24 或 48 减少到 1，并合并来自这两个大型输入数组的全局内存读取。

`re`在循环内部，对于and的 24 或 48 个元素，还会重复获取全局内存`im`：

```
 sum_re += re[i] * x + im[i] * y;
    sum_im -= re[i] * y + x * im[i]; 
```

这是不必要的，并且浪费了大量的全局内存带宽或缓存效率（GPU 没有足够的寄存器来让编译器将每个数组保存在寄存器中）。`__local`让每个工作组将这两个数组一次读入内存数组并在计算循环中使用本地内存副本会好得多。如果您让每个工作组计算多次，而不是只计算一次，那么您可能会节省大量的全局内存带宽并摊销初始读取，直到它几乎是空闲的。

# python - 无法从模板中的 for 循环中得到我想要的东西？

> ID：10494329
> 
> 赞同：1
> 
> 时间：2012-05-08T07:21:12.450
> 
> 标签：python, django, google-app-engine, templates

我有这样的模板：

```
{% for a in As%}
    <div>blah--blah--</div>
    <input type="hidden" name="doSomeThingTarget" value={{a.xx}}>
    <input type="hidden" name="submit" value="doSomeThing">
{% endfor%} 
```

循环可能会执行几次，并显示一些提交按钮。

在python文件中，我编码：

```
target = self.request.get('doSomeThingTarget') 
```

你知道，我尝试使用`value={{a.xx}}`将值保存在特定循环中，因此，当我单击其中一个按钮时，我可以弄清楚我需要处理的目标是什么。但是无论我点击哪个，我都会得到第一个循环的值。我的代码有什么问题？我怎样才能实现我的意图？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:14:54.513

您正在定义一个表单，其中包含具有相同名称的隐藏输入元素的多个副本。结果，您只能获得一份副本（尽管如果您使用`get_all`，您将获得所有这些副本的数组）。

相反，您应该在循环中包含表单开始和结束标记，使每次迭代都有自己的形式。

# iphone - 为图像分配值/数字/整数

> ID：10494337
> 
> 赞同：0
> 
> 时间：2012-05-08T07:21:46.410
> 
> 标签：iphone, ios, xcode

我怎样才能在这里改进我​​的代码，它有一个图像数组来拥有/分配一个特定的整数、值或数字。每当它显示时，我都可以以编程方式在其上画一个圆圈。有人可以建议一种方法吗？

```
- (void)awakeFromNib
{    
    if (self) {

        self.images = [NSMutableArray arrayWithObjects:@"111.jpg",
                       @"112.jpg",
                       @"113.jpg",
                       @"114.jpg",
                       @"115.jpg",
                       @"116.jpg",
                       @"117.jpg",
                       @"118.png",
                       @"119.jpg",
                       @"120.jpg",
                       nil];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:44:00.123

Create an array of NSDictionaries (instead of strings) and each dictionary can contain a key for the image name plus whatever other keys you want to add. Or even better, create an array of your own custom object (subclass NSObject) and then you can access the properties of each entry in the array without having to do a dictionary lookup.

Here is some sample code for the NSDictionary method:

```
- (id)init
{
    ...
    images = [[NSMutableArray alloc] init];
    ...
}

- (void)dealloc
{
    ...
    [images release];
    [super dealloc];
}

- (void)addImagesToArrayWithImageName:(NSString *)imageName andTag:(int)tag
{
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    [dict setObject:imageName forKey:@"imageName"];
    [dict setObject:[NSNUmber numberWithInt:tag] forKey:@"tag"];
    [images addObject:dict];
}

- (void)awakeFromNib
{
    [self addImagesToArrayWithImageName:@"111.jpg" andTag:0];
    [self addImagesToArrayWithImageName:@"112.jpg" andTag:1];
    ...
} 
```

# iphone - NS 字典的 NSarray

> ID：10494338
> 
> 赞同：1
> 
> 时间：2012-05-08T07:21:47.927
> 
> 标签：iphone, nsarray

我正在从字典值数组中加载 UItableview 中的一些值。然后我通过添加另一个键值对象来更改数组中的字典，如下所示

```
NSMutableDictionary *rowDict = [tableList objectAtIndex:arrayindex];
[rowDict setObject:@"download successfull" forKey:@"downloadstatus"]; 
```

但是在此之后，当我尝试从数组中的字典中检索值时，如下所示

```
NSMutableDictionary *rowDict = [tableList objectAtIndex:arrayindex];
NSString *SelectedState = (NSString*)[rowDict objectForKey:@"downloadstatus"]; 
```

它崩溃了......任何人都可以帮我解决这个问题

这是我控制台上的崩溃显示

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSConcreteMutableData objectForKey:]: unrecognized selector sent to instance 0x61a8270'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x003b0be9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x015c15c2 objc_exception_throw + 47
    2   CoreFoundation                      0x003b26fb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x00322366 ___forwarding___ + 966
    4   CoreFoundation                      0x00321f22 _CF_forwarding_prep_0 + 50
    5   SifyMyStorage                       0x0003b35b -[DownloadListViewController tableView:cellForRowAtIndexPath:] + 314
    6   UIKit                               0x00ec67fa -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 634
    7   UIKit                               0x00ebc77f -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:] + 75
    8   UIKit                               0x00ed1450 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1561
    9   UIKit                               0x00ec9538 -[UITableView layoutSubviews] + 242
    10  QuartzCore                          0x009f4451 -[CALayer layoutSublayers] + 181
    11  QuartzCore                          0x009f417c CALayerLayoutIfNeeded + 220
    12  QuartzCore                          0x009ed37c _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 310
    13  QuartzCore                          0x009ed0d0 _ZN2CA11Transaction6commitEv + 292
    14  QuartzCore                          0x00a1d7d5 _ZN2CA11Transaction17observer_callbackEP19__CFRunLoopObservermPv + 99
    15  CoreFoundation                      0x00391fbb __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 27
    16  CoreFoundation                      0x003270e7 __CFRunLoopDoObservers + 295
    17  CoreFoundation                      0x002efbd7 __CFRunLoopRun + 1575
    18  CoreFoundation                      0x002ef240 CFRunLoopRunSpecific + 208
    19  CoreFoundation                      0x002ef161 CFRunLoopRunInMode + 97
    20  GraphicsServices                    0x02ead268 GSEventRunModal + 217
    21  GraphicsServices                    0x02ead32d GSEventRun + 115
    22  UIKit                               0x00e6142e UIApplicationMain + 1160
    23  SifyMyStorage                       0x000020b8 main + 102
    24  SifyMyStorage                       0x00002049 start + 53
)
terminate called after throwing an instance of 'NSException' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:57:58.140

```
See if you have allocated the object and also get the count of dictionary , if the value is being added also see if u have declared NSmutabledictionary or just NSdictionary ... a view at your class having the code would be more helpful to sort out your problem 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:21:47.347

好的，有几件事：

- 您发布的代码很好。那不是问题。(NSString *) 强制转换是不必要的，但不是问题。

- 您的 NSArray 表格列表存在问题。如果您真的只将 NSMutableDictionary 添加到数组中，那么要么您做错了，要么您的数组超出了范围，当您认为您正在访问您的数组时，您正在访问该位置的内存中的其他内容。

-您如何在控制器中保留对 tablelist 的引用？

- 将您的第二个代码块更改为此，我敢打赌您会找到您的问题（这些对象之一上的保留计数 == 0）：

```
NSLog(@"retain count=%d",[tableList retainCount]);
NSMutableDictionary *rowDict = [tableList objectAtIndex:arrayindex];
NSLog(@"retain count=%d",[rowDict retainCount]);
NSString *SelectedState = [rowDict objectForKey:@"downloadstatus"]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-08T09:40:25.893

你没有分配 NSMutableDictionary 所以 NSMutableDictionary 是空的并且你的应用程序崩溃了。

```
NSMutableDictionary *rowDict = [[NSMutableDictionary alloc]init];

rowDict = [tableList objectAtIndex:arrayindex];
NSString *SelectedState = [rowDict objectForKey:@"downloadstatus"]; 
```

祝你好运

# java - 字符数组替换字符

> ID：10494341
> 
> 赞同：0
> 
> 时间：2012-05-08T07:22:00.610
> 
> 标签：java, json, escaping

我正在非常复杂的框架中创建 json 响应，并且遇到了 json 转义的问题。

我可以抓住`char[]`我想逃避的文字。进行转义的正确（以及最好的性能）方法是什么。请记住，它不是用字符替换字符 - 它是（大部分）用两个字符替换一个字符，因此必须重新排列数组。

使用通用（Apache、Google、...）库将不胜感激。

* * *

编辑：

Gson 库对于我的目的来说看起来不错，但是代码段存在问题：

```
Gson gson2 = new Gson();
String json = gson2.toJson(new String(buf)); 
```

因为它也对 html 进行编码。我的任务是只对给定的 HTML 标记进行 json 编码，所以我不想将标签编码为`\u003e`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:27:10.450

I alway use Gson from Google. It work fine for me and no escaping problems I meat ever. Try it.

```
Gson gson = new Gson();

// To json:
String result = gson.toJson(yourObject);

// From json:
YourObject object= gson.fromJson(result, YourObject.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:55:16.360

你需要

```
GsonBuilder builder = new GsonBuilder();
builder.disableHtmlEscaping();
String result = builder.create().toJson(yourObject); 
```

# vb.net - 如何使用word temp-let在word文档中打印新行

> ID：10494342
> 
> 赞同：1
> 
> 时间：2012-05-08T07:22:01.843
> 
> 标签：vb.net, winforms, ms-word

我正在尝试添加新行。但我收到如下错误：3 处没有行位置。

```
 If OperCnt <> 0 Then

                   If myxmlnode.BaseName = "Oper" Then
                      If I < OperCnt Then
                         myxmlnode.Range.Text = DsOper.Tables(0).Rows(I).Item("operationseq").ToString
                        setuptime = setuptime + DsOper.Tables(0).Rows(I).Item("setup")
                        runtime = runtime + DsOper.Tables(0).Rows(I).Item("runtime")
                        OperQty = CType(myDB.RetrieveData("select isnull(SUM(TRXQUANTITY),0) AS TRXQTY from sbm_laboractivity where wo_guid = '" & DsOper.Tables(0).Rows(I).Item("wo_guid") & "' and operationseq = '" & DsOper.Tables(0).Rows(I).Item("operationseq") & "'"), Double)
                    End If
                    If I = OperCnt - 1 Then myxmlnode.Range.Select() : I = I + 1 : GoTo ee
                    myxmlnode.Range.Select()
                    Travelerdoc.ActiveWindow.Selection.InsertRowsBelow()
                    I = I + 1

Here i am trying to add new row

               If myxmlnode.BaseName = "WC" Then myxmlnode.Range.Text =" "
               If myxmlnode.BaseName = "Desc" Then myxmlnode.Range.Text = DsOper.Tables(0).Rows(I - 1).Item("OPS_Note").ToString
              If myxmlnode.BaseName = "LC" Then myxmlnode.Range.Text = ""
              If myxmlnode.BaseName = "Setup" Then myxmlnode.Range.Text = ""
              If myxmlnode.BaseName = "RunTime" Then myxmlnode.Range.Text = ""
              If myxmlnode.BaseName = "Qty" Then myxmlnode.Range.Text = ""
              If myxmlnode.BaseName = "CompQty" Then myxmlnode.Range.Text = ""
              If myxmlnode.BaseName = "RemQty" Then myxmlnode.Range.Text = ""
              If myxmlnode.BaseName = "TotalSetup" Then myxmlnode.Range.Text = ""
              If myxmlnode.BaseName = "TotalRunTime" Then myxmlnode.Range.Text = ""
        End If
      End If 
```

你能对此提出任何建议吗？

# database - YII 的 audittrail 模块是否支持 DB 更新的并发？

> ID：10494344
> 
> 赞同：1
> 
> 时间：2012-05-08T07:22:14.760
> 
> 标签：database, yii

我想存储对 YII 模型所做的修改日志。

我看到有一个名为[audittrail](http://www.yiiframework.com/extension/audittrail)的不错的模块 ，它使用的`afterSave`行为应该可以解决问题，但我担心它在数据库的高负载下会如何表现（即数据库相同行更新的高并发性） .

有没有人使用过这种方法（无论是`afterSave`模块本身还是模块本身）？它会给我带来并发问题吗？

# php - 如何确保一次加载 PHP 脚本

> ID：10494347
> 
> 赞同：1
> 
> 时间：2012-05-08T07:22:25.087
> 
> 标签：php

我有一个带有 PHP 的 cronjob 系统。我有一个名为 cron.php 的文件，想检查它是否未加载，请加载它。对我来说非常重要的是这个文件只运行一次，我需要定义它已经运行的方式。我不能使用任何系统功能，如 exec,system,... 你有什么解决方案吗？

**注意：**我通过 CURL 运行我的脚本，并且 include_one 和 require_once 不适用于这种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T08:06:32.427

您可以使用[`flock()`](http://php.net/manual/en/function.flock.php)锁定 php 文件本身，如下所示：

```
<?php

class Lock{
    private $fp;
    function __construct(){
        $this->fp=fopen(__FILE__,'r');
        if (!flock($this->fp,LOCK_EX|LOCK_NB)) {
            die('already running !'.PHP_EOL);
        }       
    }
    function __destruct(){
        flock($this->fp,LOCK_UN);
        fclose($this->fp);  
    }
}

$lock=new Lock();

// simulate some processing
sleep(60);

echo "END";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T08:23:09.223

If you are using cURL then I believe your are using cURL to request a page such as `http://domain.com/cron.php`. The machine requesting the script via cURL/wget/browser/etc has no way of knowing if the script is already being executed on the server. However, you can configure your `cron.php` script to run only once:

```
<?php
// attempt to obtain a lock
$fp = fopen(basename(__FILE__) . ".lock", "w");
if (flock($fp, LOCK_EX | LOCK_NB) === false) {
    echo basename(__FILE__) . ": already running\n";
    exit(-1);
}

// code goes here
echo date("Y-m-d H:i:s") . ": cron job started\n";
sleep(30);
echo date("Y-m-d H:i:s") . ": cron job ended\n";

// release the lock
flock($fp, LOCK_UN);
fclose($fp); 
```

The sample code uses PHP [`flock`](http://php.net/manual/en/function.flock.php) function. The `LOCK_EX` flag tells PHP that it needs to obtain an exclusive lock; i.e. no other process is allowed to access the file. The `LOCK_NB` tells PHP that it should not block (wait for the lock to be released) and return `false` immediately. Together, the two switches assure that a second process cannot lock the file while the first one has it locked.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T07:35:42.913

您的问题本质上等同于“检查 php 脚本是否仍在运行”

请参考这里

[检查 php 脚本是否仍在运行](https://stackoverflow.com/questions/2634379/check-if-a-php-script-is-still-running)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T07:36:31.970

如果我对您的理解正确，您想防止您的 cron.php 脚本被 cron 再次启动，它不是从另一个 PHP 脚本调用的吗？（在这种情况下， require_once 将是正确的答案）

据我了解，您需要存储一个指示您的脚本正在运行的标记，并在脚本末尾删除该标记。

根据您的环境，您可以创建一个小文件，即`.lock`在您的数据库中存储一个 status = locked 条目。

编辑：这是一个使用文件方法的小代码示例：

```
<?php
// cron.php
$path = '/path/to/your/data/directory/';
if (file_exists($path . '.lock') {
   die('cron.php is already running');
}
// if script reaches this point, it is not locked -> create a lock
file_put_contents($path . '.lock', 'lockfile created at ' . now());

//... your code....

//unlocking
unlink($path . '.lock');
?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T07:24:45.193

你可以只使用[require_once](http://www.php.net/manual/en/function.require-once.php)或[include_once](http://www.php.net/manual/en/function.include-once.php)吗？

`require_once`如果无法评估文件，将抛出 PHP 致命错误（将停止执行）。 `include_once`将引发 PHP 警告（可能会继续执行）。

```
// Require tasks.php to run once
require_once 'path/to/tasks.php';

// Attempt to run tasks.php and only once
include_once 'path/to/tasks.php'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T07:29:43.090

you can use `require_once` or `include_once`

The general syntax of both the include and require statements are as follows:

```
include "file_to_load.php";
include_once "file_to_load.php"; 
```

When the `include_once/require_once` statements are used, the file cannot be loaded or executed multiple times. If an attempt is made to load a file twice using one of these two methods, it will be ignored. Because it is unacceptable to define the same function multiple times within a script, these functions allow the developer to include a script as needed without having to check whether it has been previously loaded.

**NOTE** The capability to return values from external files is limited only to the `include_once` statements. The `require_once` statements cannot be used in this fashion.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T07:29:56.703

```
include_once('class.php'); 
```

php.net states

> The include_once statement includes and evaluates the specified file during the execution of the script. This is a behavior similar to the include statement, with the only difference being that if the code from a file has already been included, it will not be included again. As the name suggests, it will be included just once.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T07:31:40.030

您可以使用 require_once 或 include_once。

如果您对使用什么感到困惑，那么这两者之间的区别在于

require_once 将停止执行前面的代码，trwos 致命错误，如果没有找到提到的文件，所以如果你想要前面的代码继续即使文件没有找到，那么不要使用它。

其中 include_once 将继续执行前面的代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-08T08:18:06.037

在这种情况下，您可以使用数据库，在数据库和第二列中输入页面以检查它是否已加载（例如，`'0'`如果尚未加载并且`'1'`已加载）。最初保留该行的值，因为`'0'`在加载页面时将该列更新为`'1'`.

# java - java - 如何在java中的子类中使用方法使用字段？

> ID：10494351
> 
> 赞同：2
> 
> 时间：2012-05-08T07:22:55.773
> 
> 标签：java, inheritance, methods, field, superclass

代码：

```
ClassA extends ClassBase {

 protected IntefaceA parA;
 .... }

 InterfaceA extends InterfaceBase

ClassBase {

 protected IntefaceBase parB;

 public method1() {

  parB.someMethod();
} 
```

代码：

```
ClassA testClass=new ClassA();
testClass.setParA(new InterfaceA {....}; );
testClass.method1(); 
```

我收到空指针异常，因为方法metho1 使用来自ClassBase 的类变量，method1 使用的是parB。是否可以让方法 1 使用 paraA？如果没有，我需要将method1的所有代码从基类复制并粘贴到后代。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:30:32.497

您不能在Java 中覆盖字段，即您不能说以子类的方法`parA`覆盖`parB`基类的方法的方式覆盖。

您需要做的是为变量提供一个*访问方法*，您可以覆盖`getPar`该变量以返回。`parB``ClassA``parA`

然后在`method1`，当您需要访问时，`parA`您只需通过此方法。由于 Java 中的所有方法都是[虚拟](http://en.wikipedia.org/wiki/Virtual_function)的，因此将调用子类的`getPar`方法，即使是从内部调用`ClassBase`。

```
interface InterfaceBase {
    void someMethod();
}

interface InterfaceA extends InterfaceBase {
    ...
}

class ClassA extends ClassBase {

    protected InterfaceA parA;

    @Override
    protected InterfaceA getPar() {
        return parA;
    }
}

class ClassBase {
    protected InterfaceBase parB;

    public void method1() {
        InterfaceBase parObj = getPar().someMethod();

        // Big method... no need for code duplication.
    }

    protected InterfaceBase getPar() {
        return parB;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:31:36.127

Java 中不能覆盖字段，只能覆盖方法。因此，您可以做的是将您的`parA`/`parB`成员隐藏在`protected virtual`getter 后面，并且只能通过 getter 方法访问它们。然后覆盖 getter`ClassA`以返回`parA`而不是`parB`：

```
ClassBase {
  private IntefaceBase parB;

  protected IntefaceBase getPar() {
    return parB;
  }

  public method1() {
    getPar().someMethod();
  }
}

ClassA extends ClassBase {
  private IntefaceA parA;

  protected IntefaceBase getPar() {
    return parA;
  }
} 
```

# bash - 在子shell返回之前有什么方法可以退出主shell吗？

> ID：10494360
> 
> 赞同：1
> 
> 时间：2012-05-08T07:23:49.907
> 
> 标签：bash

众所周知，在 bash 中，如果我们启动一个进程，例如“bash another.sh”，main bash 会等待 another.sh 完成，然后执行 main bash 中剩余的代码，有什么方法可以退出在 another.sh 返回之前的主外壳？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:33:50.257

如果您希望能够在进程完成之前退出 shell，您可以在[xls 的语句](https://stackoverflow.com/a/10494406/885443)前面加上[nohup](http://linux.die.net/man/1/nohup)：

```
nohup bash another.sh & 
```

`SIGHUP`那么您新启动的进程在注销时将不会收到，并将继续在后台运行。

# actionscript-3 - 如何将控制栏添加到标题栏正下方的 Flex Spark 面板组件

> ID：10494364
> 
> 赞同：0
> 
> 时间：2012-05-08T07:24:13.180
> 
> 标签：actionscript-3, apache-flex, flex4.5, flex-spark

我正在尝试在标题栏下方的 Flex Spark 面板组件中添加一个控制栏。它是作为火花控制条的控制条工作的。为了实现它，我可以添加组件来实现它，我创建了一个皮肤和一个扩展 spark 类的 as3 类。但它不起作用。谁能帮我吗。我是火花组件的新手。我需要帮助。

皮肤：CustoPanel\src\skin\CustomPanelSkinHeaderControlBar.mxml

```
 <?xml version="1.0" encoding="utf-8"?>

<!--

ADOBE SYSTEMS INCORPORATED
Copyright 2008 Adobe Systems Incorporated
All Rights Reserved.

NOTICE: Adobe permits you to use, modify, and distribute this file
in accordance with the terms of the license agreement accompanying it.

-->

<!--- The default skin class for a Spark Panel container.  

    @see spark.components.Panel

    @langversion 3.0
    @playerversion Flash 10
    @playerversion AIR 1.5
    @productversion Flex 4
-->
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
             xmlns:s="library://ns.adobe.com/flex/spark"
             xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
             minWidth="131" minHeight="127" blendMode="normal" mouseEnabled="false"
             alpha.disabled="0.5"
             alpha.disabledWithControlAndHeaderBar="0.5"
             alpha.disabledWithControlBar="0.5"
             alpha.disabledWithHeaderBar="0.5">

    <fx:Metadata>
        <![CDATA[ 
        /** 
         * @copy spark.skins.spark.ApplicationSkin#hostComponent
         */
        /* [HostComponent("spark.components.Panel")] */
        [HostComponent("customCompo.ExtPanel")]
        ]]>
    </fx:Metadata> 

    <fx:Script fb:purpose="styling">
        <![CDATA[
        import mx.core.FlexVersion;

        /* Define the skin elements that should not be colorized. 
        For panel, border and title background are skinned, but the content area, background, border, and title text are not. */
        /* static private const exclusions:Array = ["background", "titleDisplay", "contentGroup", "controlBarGroup", "border"]; */
        static private const exclusions:Array = ["background", "titleDisplay", "contentGroup", "controlBarGroup", "headerControlBarGroup", "border"];

        /* exclusions before Flex 4.5 for backwards-compatibility purposes */
        /* static private const exclusions_4_0:Array = ["background", "titleDisplay", "contentGroup", "controlBarGroup"]; */
        static private const exclusions_4_0:Array = ["background", "titleDisplay", "contentGroup", "controlBarGroup", "headerControlBarGroup"];

        /**
         * @private
         */
        override public function get colorizeExclusions():Array 
        {
            // Since border is styleable via borderColor, no need to allow chromeColor to affect
            // the border.  This is wrapped in a compatibility flag since this change was added  
            // in Flex 4.5
            if (FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_5)
            {
                return exclusions_4_0;
            }

            return exclusions;
        }

        /**
         * @private
         */
        override protected function initializationComplete():void
        {
            useChromeColor = true;
            super.initializationComplete();
        }

        /**
         * @private
         */
        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            if (getStyle("borderVisible") == true)
            {
                border.visible = true;
                background.left = background.top = background.right = background.bottom = 1;
                contents.left = contents.top = contents.right = contents.bottom = 1;
            }
            else
            {
                border.visible = false;
                background.left = background.top = background.right = background.bottom = 0;
                contents.left = contents.top = contents.right = contents.bottom = 0;
            }

            dropShadow.visible = getStyle("dropShadowVisible");

            var cr:Number = getStyle("cornerRadius");
            var withControls:Boolean = 
                (currentState == "disabledWithControlBar" || 
                 currentState == "normalWithControlBar");

            if (cornerRadius != cr)
            {
                cornerRadius = cr;

                dropShadow.tlRadius = cornerRadius;
                dropShadow.trRadius = cornerRadius;
                dropShadow.blRadius = withControls ? cornerRadius : 0;
                dropShadow.brRadius = withControls ? cornerRadius : 0;

                setPartCornerRadii(topMaskRect, withControls); 
                setPartCornerRadii(border, withControls); 
                setPartCornerRadii(background, withControls);                
            }

            if (bottomMaskRect) setPartCornerRadii(bottomMaskRect, withControls); 

            borderStroke.color = getStyle("borderColor");
            borderStroke.alpha = getStyle("borderAlpha");
            backgroundFill.color = getStyle("backgroundColor");
            backgroundFill.alpha = getStyle("backgroundAlpha");

            super.updateDisplayList(unscaledWidth, unscaledHeight);
        }

        /**
         * @private
         */  
        private function setPartCornerRadii(target:Rect, includeBottom:Boolean):void
        {            
            target.topLeftRadiusX = cornerRadius;
            target.topRightRadiusX = cornerRadius;
            target.bottomLeftRadiusX = includeBottom ? cornerRadius : 0;
            target.bottomRightRadiusX = includeBottom ? cornerRadius : 0;
        }

        private var cornerRadius:Number;
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
        <s:State name="normalWithControlBar" stateGroups="withControls" />
        <s:State name="disabledWithControlBar" stateGroups="withControls" />
        <s:State name="normalWithControlAndHeaderbar" stateGroups="withControls" />
        <s:State name="disabledWithControlAndHeaderBar" stateGroups="withControls" />
        <s:State name="normalWithHeaderBar"/>
        <s:State name="disabledWithHeaderBar"/>
    </s:states>

    <!-- drop shadow can't be hittable so it stays sibling of other graphics -->
    <!--- @private -->
    <s:RectangularDropShadow id="dropShadow" blurX="20" blurY="20" alpha="0.32" distance="11" 
                             angle="90" color="#000000" left="0" top="0" right="0" bottom="0"/>

    <!-- drop shadow can't be hittable so all other graphics go in this group -->
    <s:Group left="0" right="0" top="0" bottom="0">

        <!-- top group mask -->
        <!--- @private -->
        <s:Group left="1" top="1" right="1" bottom="1" id="topGroupMask" >
            <!--- @private -->
            <s:Rect id="topMaskRect" left="0" top="0" right="0" bottom="0">
                <s:fill>
                    <s:SolidColor alpha="0"/>
                </s:fill>
            </s:Rect>
        </s:Group>

        <!-- bottom group mask -->
        <!--- @private -->
        <s:Group left="1" top="1" right="1" bottom="1" id="bottomGroupMask" 
                 includeIn="disabledWithControlAndHeaderBar,disabledWithControlBar,normalWithControlAndHeaderbar,normalWithControlBar">
            <!--- @private -->
            <s:Rect id="bottomMaskRect" left="0" top="0" right="0" bottom="0">
                <s:fill>
                    <s:SolidColor alpha="0"/>
                </s:fill>
            </s:Rect>
        </s:Group>

        <!-- layer 1: border -->
        <!--- @private -->
        <s:Rect id="border" left="0" right="0" top="0" bottom="0" >
            <s:stroke>
                <!--- @private -->
                <s:SolidColorStroke id="borderStroke" weight="1" />
            </s:stroke>
        </s:Rect>

        <!-- layer 2: background fill -->
        <!--- Defines the appearance of the PanelSkin class's background. -->
        <s:Rect id="background" left="1" top="1" right="1" bottom="1">
            <s:fill>
                <!--- @private
                      Defines the  PanelSkin class's background fill. The default color is 0xFFFFFF. -->
                <s:SolidColor id="backgroundFill" color="#FFFFFF"/>
            </s:fill>
        </s:Rect>

        <!-- layer 3: contents -->
        <!--- Contains the vertical stack of titlebar content and controlbar. -->
        <s:Group left="1" right="1" top="1" bottom="1" id="contents">
            <s:layout>
                <s:VerticalLayout gap="0" horizontalAlign="justify" />
            </s:layout>

            <!--- @private -->
            <s:Group id="topGroupMaskImp" mask="{topGroupMask}">

                <!-- layer 0: title bar fill -->
                <!--- @private -->
                <s:Rect id="tbFill" left="0" right="0" top="0" bottom="1">
                    <s:fill>
                        <s:LinearGradient rotation="90">
                            <s:GradientEntry color="0xE2E2E2" />
                            <s:GradientEntry color="0xD9D9D9" />
                        </s:LinearGradient>
                    </s:fill>
                </s:Rect>

                <!-- layer 1: title bar highlight -->
                <!--- @private -->
                <s:Rect id="tbHilite" left="0" right="0" top="0" bottom="0">
                    <s:stroke>
                        <s:LinearGradientStroke rotation="90" weight="1">
                            <s:GradientEntry color="0xEAEAEA" />
                            <s:GradientEntry color="0xD9D9D9" />
                        </s:LinearGradientStroke>
                    </s:stroke>
                </s:Rect>

                <!-- layer 2: title bar divider -->
                <!--- @private -->
                <s:Rect id="tbDiv" left="0" right="0" height="1" bottom="0">
                    <s:fill>
                        <s:SolidColor color="0xC0C0C0" />
                    </s:fill>
                </s:Rect>

                <!-- layer 3: text -->
                <!--- @copy spark.components.Panel#titleDisplay -->
                <s:Label id="titleDisplay" maxDisplayedLines="1"
                         left="9" right="3" top="1" bottom="0" minHeight="20"
                         verticalAlign="middle" textAlign="start" fontWeight="bold">
                </s:Label>
            </s:Group>

            <!--
                Note: setting the minimum size to 0 here so that changes to the host component's
                size will not be thwarted by this skin part's minimum size.   This is a compromise,
                more about it here: http://bugs.adobe.com/jira/browse/SDK-21143
            -->

            <!--Header ControlBar-->
            <!--- @private -->
            <s:Group id="topGroup" minWidth="0" minHeight="0"
                     includeIn="normalWithControlAndHeaderbar,disabledWithControlAndHeaderBar,normalWithHeaderBar,disabledWithHeaderBar" >

                <s:Group left="0" right="0" top="0" bottom="0" mask="{bottomGroupMask}">

                    <!-- layer 0: control top bar divider line -->
                    <s:Rect left="0" right="0" top="0" height="1" alpha="0.22">
                        <s:fill>
                            <s:SolidColor color="0x000000" />
                        </s:fill>
                    </s:Rect>

                    <!-- layer 1: control top bar highlight -->
                    <s:Rect left="0" right="0" top="1" bottom="0">
                        <s:stroke>
                            <s:LinearGradientStroke rotation="90" weight="1">
                                <s:GradientEntry color="0xE5E5E5" />
                                <s:GradientEntry color="0xD8D8D8" />
                            </s:LinearGradientStroke>
                        </s:stroke>
                    </s:Rect>

                    <!-- layer 2: control top bar fill -->
                    <s:Rect left="1" right="1" top="2" bottom="1">
                        <s:fill>
                            <s:LinearGradient rotation="90">
                                <s:GradientEntry color="0xDADADA" />
                                <s:GradientEntry color="0xC5C5C5" />
                            </s:LinearGradient>
                        </s:fill>
                    </s:Rect>
                </s:Group>
                <!-- layer 3: top control bar -->
                <!--- @copy spark.components.Panel#controlBarTopGroup -->
                <s:Group id="headerControlBarGroup" left="0" right="0" top="1" bottom="1" minWidth="0" minHeight="0">
                    <s:layout>
                        <s:HorizontalLayout paddingLeft="10" paddingRight="10" paddingTop="3" paddingBottom="3" gap="10" />
                    </s:layout>
                </s:Group>
            </s:Group>

            <!--x-Header control Bar-->

            <!--- @copy spark.components.SkinnableContainer#contentGroup -->
            <s:Group id="contentGroup" width="100%" height="100%" minWidth="0" minHeight="0">
            </s:Group>

            <!--- @private -->
            <s:Group id="bottomGroup" minWidth="0" minHeight="0"
                     includeIn="disabledWithControlAndHeaderBar,disabledWithControlBar,normalWithControlAndHeaderbar,normalWithControlBar" >

                <s:Group left="0" right="0" top="0" bottom="0" mask="{bottomGroupMask}">

                    <!-- layer 0: control bar divider line -->
                    <s:Rect left="0" right="0" top="0" height="1" alpha="0.22">
                        <s:fill>
                            <s:SolidColor color="0x000000" />
                        </s:fill>
                    </s:Rect>

                    <!-- layer 1: control bar highlight -->
                    <s:Rect left="0" right="0" top="1" bottom="0">
                        <s:stroke>
                            <s:LinearGradientStroke rotation="90" weight="1">
                                <s:GradientEntry color="0xE5E5E5" />
                                <s:GradientEntry color="0xD8D8D8" />
                            </s:LinearGradientStroke>
                        </s:stroke>
                    </s:Rect>

                    <!-- layer 2: control bar fill -->
                    <s:Rect left="1" right="1" top="2" bottom="1">
                        <s:fill>
                            <s:LinearGradient rotation="90">
                                <s:GradientEntry color="0xDADADA" />
                                <s:GradientEntry color="0xC5C5C5" />
                            </s:LinearGradient>
                        </s:fill>
                    </s:Rect>
                </s:Group>
                <!-- layer 3: control bar -->
                <!--- @copy spark.components.Panel#controlBarGroup -->
                <s:Group id="controlBarGroup" left="0" right="0" top="1" bottom="1" minWidth="0" minHeight="0">
                    <s:layout>
                        <s:HorizontalLayout paddingLeft="10" paddingRight="10" paddingTop="7" paddingBottom="7" gap="10" />
                    </s:layout>
                </s:Group>
            </s:Group>
        </s:Group> <!--skl oph e-->
    </s:Group>
</s:SparkSkin> 
```

自定义面板类：

```
 package customCompo
{
    import mx.core.mx_internal;
    import mx.utils.BitFlagUtil;

    import spark.components.Group;
    import spark.components.Panel;
    import spark.layouts.supportClasses.LayoutBase;

    use namespace mx_internal;

    [SkinState("normalWithControlAndHeaderbar")]

    [SkinState("disabledWithControlAndHeaderBar")]

    [SkinState("normalWithHeaderBar")]

    [SkinState("disabledWithHeaderBar")]

    [AccessibilityClass(implementation="spark.accessibility.PanelAccImpl")]

    public class ExtPanel extends Panel
    {
        public function ExtPanel()
        {
            super();
        }

        mx_internal static const HEADER_CONTROLBAR_PROPERTY_FLAG:uint = 1 << 0;
        mx_internal static const HEADER_LAYOUT_PROPERTY_FLAG:uint = 1 << 1;
        mx_internal static const HEADER_VISIBLE_PROPERTY_FLAG:uint = 1 << 2;

        mx_internal var headerControlBarGroupProperties:Object = { visible: true };

        public var headerControlBarGroup:Group;

        //----------------------------------
        //  headerControlBarContent
        //---------------------------------- 

        [ArrayElementType("mx.core.IVisualElement")]

        public function get headerControlBarContent():Array
        {
            if (headerControlBarGroup)
                return headerControlBarGroup.getMXMLContent();
            else
                return headerControlBarGroupProperties.controlBarContent;
        }

        /**
         *  @private
         */
        public function set headerControlBarContent(value:Array):void
        {
            if (headerControlBarGroup)
            {
                headerControlBarGroup.mxmlContent = value;
                headerControlBarGroupProperties = BitFlagUtil.update(headerControlBarGroupProperties as uint, 
                    HEADER_CONTROLBAR_PROPERTY_FLAG, value != null);
            }
            else
                headerControlBarGroupProperties.headerControlBarContent = value;

            invalidateSkinState();
        }

        //----------------------------------
        //  headerControlBarLayout
        //---------------------------------- 

        public function get headerControlBarLayout():LayoutBase
        {
            return (headerControlBarGroup) 
            ? headerControlBarGroup.layout 
                : headerControlBarGroupProperties.layout;
        }

        /**
         *  @private
         */
        public function set headerControlBarLayout(value:LayoutBase):void
        {
            if (headerControlBarGroup)
            {
                headerControlBarGroup.layout = value;
                headerControlBarGroupProperties = BitFlagUtil.update(headerControlBarGroupProperties as uint, 
                    HEADER_LAYOUT_PROPERTY_FLAG, true);
            }
            else
                headerControlBarGroupProperties.layout = value;
        }

        //----------------------------------
        //  headerControlBarVisible
        //---------------------------------- 

        public function get headerControlBarVisible():Boolean
        {
            return (headerControlBarGroup) 
            ? headerControlBarGroup.visible 
                : headerControlBarGroupProperties.visible;
        }

        /**
         *  @private
         */
        public function set headerControlBarVisible(value:Boolean):void
        {
            if (headerControlBarGroup)
            {
                headerControlBarGroup.visible = value;
                headerControlBarGroupProperties = BitFlagUtil.update(headerControlBarGroupProperties as uint, 
                    HEADER_VISIBLE_PROPERTY_FLAG, value);
            }
            else
                headerControlBarGroupProperties.visible = value;

            invalidateSkinState();
            if (skin)
                skin.invalidateSize();
        }

        //--------------------------------------------------------------------------
        //
        //  Overridden methods
        //
        //--------------------------------------------------------------------------

        /**
         *  @private
         */
        /*override protected function initializeAccessibility():void
        {
            if (Panel.createAccessibilityImplementation != null)
                Panel.createAccessibilityImplementation(this);
        }*/

        /**
         *  @private
         */
        override protected function partAdded(partName:String, instance:Object):void
        {
            super.partAdded(partName, instance);

            /*if (instance == titleDisplay)
            {
                titleDisplay.text = title;
            }
            else if (instance == controlBarGroup)*/

            if (instance == headerControlBarGroup)
            {
                // copy proxied values from controlBarGroupProperties (if set) to contentGroup
                var newHeaderControlBarGroupProperties:uint = 0;

                if (headerControlBarGroupProperties.headerControlBarContent !== undefined)
                {
                    headerControlBarGroup.mxmlContent = headerControlBarGroupProperties.headerControlBarContent;
                    newHeaderControlBarGroupProperties = BitFlagUtil.update(newHeaderControlBarGroupProperties, 
                        HEADER_CONTROLBAR_PROPERTY_FLAG, true);
                }

                if (headerControlBarGroupProperties.layout !== undefined)
                {
                    headerControlBarGroup.layout = headerControlBarGroupProperties.layout;
                    newHeaderControlBarGroupProperties = BitFlagUtil.update(newHeaderControlBarGroupProperties, 
                        HEADER_LAYOUT_PROPERTY_FLAG, true);
                }

                if (headerControlBarGroupProperties.visible !== undefined)
                {
                    headerControlBarGroup.visible = headerControlBarGroupProperties.visible;
                    newHeaderControlBarGroupProperties = BitFlagUtil.update(newHeaderControlBarGroupProperties, 
                        HEADER_VISIBLE_PROPERTY_FLAG, true);
                }

                headerControlBarGroupProperties = newHeaderControlBarGroupProperties;
            }
        }

        override protected function partRemoved(partName:String, instance:Object):void
        {
            super.partRemoved(partName, instance);

            if (instance == headerControlBarGroup)
            {
                // copy proxied values from contentGroup (if explicitely set) to contentGroupProperties

                var newHeaderControlBarGroupProperties:Object = {};

                if (BitFlagUtil.isSet(controlBarGroupProperties as uint, HEADER_CONTROLBAR_PROPERTY_FLAG))
                    newHeaderControlBarGroupProperties.headerControlBarContent = headerControlBarGroup.getMXMLContent();

                if (BitFlagUtil.isSet(controlBarGroupProperties as uint, HEADER_LAYOUT_PROPERTY_FLAG))
                    newHeaderControlBarGroupProperties.layout = headerControlBarGroup.layout;

                if (BitFlagUtil.isSet(controlBarGroupProperties as uint, HEADER_VISIBLE_PROPERTY_FLAG))
                    newHeaderControlBarGroupProperties.visible = headerControlBarGroup.visible;

                headerControlBarGroupProperties = newHeaderControlBarGroupProperties;

                headerControlBarGroup.mxmlContent = null;
                headerControlBarGroup.layout = null;
            }
        }

        override protected function getCurrentSkinState():String
        {
            var state:String = enabled ? "normal" : "disabled";
            if (headerControlBarGroup)
            {
                if (BitFlagUtil.isSet(headerControlBarGroupProperties as uint, HEADER_CONTROLBAR_PROPERTY_FLAG) &&
                    BitFlagUtil.isSet(headerControlBarGroupProperties as uint, HEADER_VISIBLE_PROPERTY_FLAG))
                    state += "WithHeaderBar";
            }
            else
            {
                if (headerControlBarGroupProperties.headerCcontrolBarContent &&
                    headerControlBarGroupProperties.visible)
                    state += "WithHeaderBar";
            }
            return state;
        }

    }
} 
```

应用程序 ：

```
 <s:HGroup width="100%" horizontalAlign="center">

    <customCompo:ExtPanel width="400" height="200" title="RABBIT :" skinClass="skin.CustomPanelSkinHeaderControlBar">

            <customCompo:headerControlBarContent>
                <s:Label text="Peacock" />

            </customCompo:headerControlBarContent>
        </customCompo:ExtPanel>

    </s:HGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:37:13.337

谢谢大家。我已经能够解决它。

扩展面板类：PanelWithHeaderBar.as

```
package components.panelWithHeader
{
    import mx.core.mx_internal;
    import mx.utils.BitFlagUtil;

    import spark.components.Group;
    import spark.components.Panel;
    import spark.layouts.supportClasses.LayoutBase;

    use namespace mx_internal;

    public class PanelWithHeaderBar extends Panel
    {
        mx_internal static const HEADERBAR_PROPERTY_FLAG:uint = 1 << 0;

        mx_internal var headerBarGroupProperties:Object = { visible: true };

        /*Adding headerBar optional skin part */
        [SkinPart(required="false")]
        public var headerBarGroup:Group;

        public function PanelWithHeaderBar()
        {
            super();
        }

        /*Adding new headerBar field indicating if panel adds headerBar (invalidating skin state in setter)*/
        public function get headerBarContent():Array
        {
            if (headerBarGroup)
                return headerBarGroup.getMXMLContent();
            else
                return headerBarGroupProperties.headerBarContent;
        }
        public function set headerBarContent(value:Array):void
        {
            if (headerBarGroup)
            {
                headerBarGroup.mxmlContent = value;
                headerBarGroupProperties = BitFlagUtil.update(headerBarGroupProperties as uint, 
                                                CONTROLBAR_PROPERTY_FLAG, value != null);
            }
            else
                headerBarGroupProperties.headerBarContent = value;

            invalidateSkinState();
        }

        /* Header Bar Layout*/
        public function get headerbarLayout():LayoutBase
        {
            return (headerBarGroup) 
                ? headerBarGroup.layout 
                : headerBarGroupProperties.layout;
        }

        /**
         *  @private
         */
        public function set headerbarLayout(value:LayoutBase):void
        {
            if (headerBarGroup)
            {
                headerBarGroup.layout = value;
                headerBarGroupProperties = BitFlagUtil.update(headerBarGroupProperties as uint, 
                                            LAYOUT_PROPERTY_FLAG, true);
            }
            else
                headerBarGroupProperties.layout = value;
        }

        /* Header Bar Visiblity*/

        public function get headerBarVisible():Boolean
        {
            return (headerBarGroup) 
                ? headerBarGroup.visible 
                : headerBarGroupProperties.visible;
        }

        /**
         *  @private
         */
        public function set headerBarVisible(value:Boolean):void
        {
            if (headerBarGroup)
            {
                headerBarGroup.visible = value;
                headerBarGroupProperties = BitFlagUtil.update(headerBarGroupProperties as uint, 
                    VISIBLE_PROPERTY_FLAG, value);
            }
            else
                headerBarGroupProperties.visible = value;

            invalidateSkinState();
            if (skin)
                skin.invalidateSize();
        }

        /*Overriding partAdded()/partRemoved() functions to add headerBar event handler */
        override protected function partAdded(partName:String, instance:Object):void
        {
            super.partAdded(partName, instance);

            if (instance == headerBarGroup)
            {
                // copy proxied values from controlBarGroupProperties (if set) to contentGroup
                var newHeaderBarGroupProperties:uint = 0;

                if (headerBarGroupProperties.headerBarContent !== undefined)
                {
                    headerBarGroup.mxmlContent = headerBarGroupProperties.headerBarContent;
                    newHeaderBarGroupProperties = BitFlagUtil.update(newHeaderBarGroupProperties, 
                        CONTROLBAR_PROPERTY_FLAG, true);
                }

                if (headerBarGroupProperties.layout !== undefined)
                {
                    headerBarGroup.layout = headerBarGroupProperties.layout;
                    newHeaderBarGroupProperties = BitFlagUtil.update(newHeaderBarGroupProperties, 
                        LAYOUT_PROPERTY_FLAG, true);
                }

                if (headerBarGroupProperties.visible !== undefined)
                {
                    headerBarGroup.visible = headerBarGroupProperties.visible;
                    newHeaderBarGroupProperties = BitFlagUtil.update(newHeaderBarGroupProperties, 
                        VISIBLE_PROPERTY_FLAG, true);
                }

                headerBarGroupProperties = newHeaderBarGroupProperties;
            }
        }

        /**
         *  @private
         *  
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 1.5
         *  @productversion Flex 4
         */
        override protected function partRemoved(partName:String, instance:Object):void
        {
            super.partRemoved(partName, instance);

            if (instance == headerBarGroup)
            {
                // copy proxied values from contentGroup (if explicitely set) to contentGroupProperties

                var newHeaderBarGroupProperties:Object = {};

                if (BitFlagUtil.isSet(headerBarGroupProperties as uint, HEADERBAR_PROPERTY_FLAG))
                    newHeaderBarGroupProperties.headerBarContent = headerBarGroup.getMXMLContent();

                if (BitFlagUtil.isSet(headerBarGroupProperties as uint, LAYOUT_PROPERTY_FLAG))
                    newHeaderBarGroupProperties.layout = headerBarGroup.layout;

                if (BitFlagUtil.isSet(headerBarGroupProperties as uint, VISIBLE_PROPERTY_FLAG))
                    newHeaderBarGroupProperties.visible = headerBarGroup.visible;

                headerBarGroupProperties = newHeaderBarGroupProperties;

                headerBarGroup.mxmlContent = null;
                headerBarGroup.layout = null;
            }
        }

        /**
         *  @private
         *  
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 1.5
         *  @productversion Flex 4
         */
        override protected function getCurrentSkinState():String
        {
            var state:String = enabled ? "normal" : "disabled";
            if (headerBarGroup)
            {
                if (BitFlagUtil.isSet(headerBarGroupProperties as uint, HEADERBAR_PROPERTY_FLAG) &&
                    BitFlagUtil.isSet(headerBarGroupProperties as uint, VISIBLE_PROPERTY_FLAG))
                    state += "WithHeaderBar";
            }
            else
            {
                if (headerBarGroupProperties.headerBarContent &&
                    headerBarGroupProperties.visible)
                    state += "WithHeaderBar";
            }
            if (controlBarGroup)
            {
                if (BitFlagUtil.isSet(controlBarGroupProperties as uint, CONTROLBAR_PROPERTY_FLAG) &&
                    BitFlagUtil.isSet(controlBarGroupProperties as uint, VISIBLE_PROPERTY_FLAG))
                    state += "WithControlBar";
            }
            else
            {
                if (controlBarGroupProperties.controlBarContent &&
                    controlBarGroupProperties.visible)
                    state += "WithControlBar";
            }

            return state;
        }
    }
} 
```

面板的皮肤：PanelWithHeaderBarSkin.mxml

```
<?xml version="1.0" encoding="utf-8"?>

<!--

ADOBE SYSTEMS INCORPORATED
Copyright 2008 Adobe Systems Incorporated
All Rights Reserved.

NOTICE: Adobe permits you to use, modify, and distribute this file
in accordance with the terms of the license agreement accompanying it.

-->

<!--- The default skin class for a Spark Panel container.  

    @see spark.components.Panel

    @langversion 3.0
    @playerversion Flash 10
    @playerversion AIR 1.5
    @productversion Flex 4
-->
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:fb="http://ns.adobe.com/flashbuilder/2009" blendMode="normal" mouseEnabled="false" 
    minWidth="131" minHeight="127" alpha.disabled="0.5" alpha.disabledWithControlBar="0.5">
    <fx:Metadata>[HostComponent("components.panelWithHeader.PanelWithHeaderBar")]</fx:Metadata>

    <fx:Script fb:purpose="styling">
        /* Define the skin elements that should not be colorized. 
        For panel, border and title background are skinned, but the content area and title text are not. */
        static private const exclusions:Array = ["background", "titleDisplay", "contentGroup", "controlBarGroup", "headerBarGroup"];

        /**
         * @private
         */  
        override public function get colorizeExclusions():Array {return exclusions;}

        /**
         * @private
         */
        override protected function initializationComplete():void
        {
            useChromeColor = true;
            super.initializationComplete();
        }

        /**
         * @private
         */
        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            if (getStyle("borderVisible") == true)
            {
                border.visible = true;
                background.left = background.top = background.right = background.bottom = 1;
                contents.left = contents.top = contents.right = contents.bottom = 1;
            }
            else
            {
                border.visible = false;
                background.left = background.top = background.right = background.bottom = 0;
                contents.left = contents.top = contents.right = contents.bottom = 0;
            }

            dropShadow.visible = getStyle("dropShadowVisible");

            var cr:Number = getStyle("cornerRadius");
            var withControls:Boolean = 
                (currentState == "disabledWithControlBar" || 
                 currentState == "normalWithControlBar"||
                 currentState == "disabledWithHeaderBar" ||
                 currentState == "normalWithHeaderBar" ||
                 currentState == "disabledWithHeaderBarWithControlBar" ||
                 currentState == "normalWithHeaderBarWithControlBar");

            if (cornerRadius != cr)
            {
                cornerRadius = cr;

                dropShadow.tlRadius = cornerRadius;
                dropShadow.trRadius = cornerRadius;
                dropShadow.blRadius = withControls ? cornerRadius : 0;
                dropShadow.brRadius = withControls ? cornerRadius : 0;

                setPartCornerRadii(topMaskRect, withControls); 
                setPartCornerRadii(border, withControls); 
                setPartCornerRadii(background, withControls);                
            }

            if (bottomMaskRect) setPartCornerRadii(bottomMaskRect, withControls); 

            borderStroke.color = getStyle("borderColor");
            borderStroke.alpha = getStyle("borderAlpha");
            backgroundFill.color = getStyle("backgroundColor");
            backgroundFill.alpha = getStyle("backgroundAlpha");

            super.updateDisplayList(unscaledWidth, unscaledHeight);
        }

        /**
         * @private
         */  
        private function setPartCornerRadii(target:Rect, includeBottom:Boolean):void
        {            
            target.topLeftRadiusX = cornerRadius;
            target.topRightRadiusX = cornerRadius;
            target.bottomLeftRadiusX = includeBottom ? cornerRadius : 0;
            target.bottomRightRadiusX = includeBottom ? cornerRadius : 0;
        }

        private var cornerRadius:Number;
    </fx:Script>

    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
        <s:State name="normalWithControlBar" stateGroups="withControls" />
        <s:State name="disabledWithControlBar" stateGroups="withControls" />
        <s:State name="normalWithHeaderBar" stateGroups="withControls" />
        <s:State name="disabledWithHeaderBar" stateGroups="withControls" />
        <s:State name="normalWithHeaderBarWithControlBar" stateGroups="withControls" />
        <s:State name="disabledWithHeaderBarWithControlBar" stateGroups="withControls" />
    </s:states>

    <!-- drop shadow can't be hittable so it stays sibling of other graphics -->
    <!--- @private -->
    <s:RectangularDropShadow id="dropShadow" blurX="20" blurY="20" alpha="0.32" distance="11" 
                             angle="90" color="#000000" left="0" top="0" right="0" bottom="0"/>

    <!-- drop shadow can't be hittable so all other graphics go in this group -->
    <s:Group left="0" right="0" top="0" bottom="0">

        <!-- top group mask -->
        <!--- @private -->
        <s:Group left="1" top="1" right="1" bottom="1" id="topGroupMask" >
            <!--- @private -->
            <s:Rect id="topMaskRect" left="0" top="0" right="0" bottom="0">
                <s:fill>
                    <s:SolidColor alpha="0"/>
                </s:fill>
            </s:Rect>
        </s:Group>

        <!-- bottom group mask -->
        <!--- @private -->
        <s:Group left="1" top="1" right="1" bottom="1" id="bottomGroupMask" 
                 includeIn="normalWithControlBar, disabledWithControlBar">
            <!--- @private -->
            <s:Rect id="bottomMaskRect" left="0" top="0" right="0" bottom="0">
                <s:fill>
                    <s:SolidColor alpha="0"/>
                </s:fill>
            </s:Rect>
        </s:Group>

        <!-- layer 1: border -->
        <!--- @private -->
        <s:Rect id="border" left="0" right="0" top="0" bottom="0" >
            <s:stroke>
                <!--- @private -->
                <s:SolidColorStroke id="borderStroke" weight="1" />
            </s:stroke>
        </s:Rect>

        <!-- layer 2: background fill -->
        <!--- Defines the appearance of the PanelSkin class's background. -->
        <s:Rect id="background" left="1" top="1" right="1" bottom="1">
            <s:fill>
                <!--- @private
                      Defines the  PanelSkin class's background fill. The default color is 0xFFFFFF. -->
                <s:SolidColor id="backgroundFill" color="#FFFFFF"/>
            </s:fill>
        </s:Rect>

        <!-- layer 3: contents -->
        <!--- Contains the vertical stack of titlebar content and controlbar. -->
        <s:Group left="1" right="1" top="1" bottom="1" id="contents">
            <s:layout>
                <s:VerticalLayout gap="0" horizontalAlign="justify" />
            </s:layout>

            <!--- @private -->
            <s:Group id="topGroup" mask="{topGroupMask}">

                <!-- layer 0: title bar fill -->
                <!--- @private -->
                <s:Rect id="tbFill" left="0" right="0" top="0" bottom="1">
                    <s:fill>
                        <s:LinearGradient rotation="90">
                            <s:GradientEntry color="0xE2E2E2" />
                            <s:GradientEntry color="0xD9D9D9" />
                        </s:LinearGradient>
                    </s:fill>
                </s:Rect>

                <!-- layer 1: title bar highlight -->
                <!--- @private -->
                <s:Rect id="tbHilite" left="0" right="0" top="0" bottom="0">
                    <s:stroke>
                        <s:LinearGradientStroke rotation="90" weight="1">
                            <s:GradientEntry color="0xEAEAEA" />
                            <s:GradientEntry color="0xD9D9D9" />
                        </s:LinearGradientStroke>
                    </s:stroke>
                </s:Rect>

                <!-- layer 2: title bar divider -->
                <!--- @private -->
                <s:Rect id="tbDiv" left="0" right="0" height="1" bottom="0">
                    <s:fill>
                        <s:SolidColor color="0xC0C0C0" />
                    </s:fill>
                </s:Rect>

                <!-- layer 3: text -->
                <!--- @copy spark.components.Panel#titleDisplay -->
                <s:Label id="titleDisplay" maxDisplayedLines="1"
                         left="9" right="3" top="1" bottom="0" minHeight="20"
                         verticalAlign="middle" textAlign="start" fontWeight="bold">
                </s:Label>
            </s:Group>

            <!--
                Note: setting the minimum size to 0 here so that changes to the host component's
                size will not be thwarted by this skin part's minimum size.   This is a compromise,
                more about it here: http://bugs.adobe.com/jira/browse/SDK-21143
            -->
            <s:Group id="topHeaderGroup" minWidth="0" minHeight="0"
                     includeIn="normalWithHeaderBar, disabledWithHeaderBar, disabledWithHeaderBarWithControlBar, normalWithHeaderBarWithControlBar">

                <s:Group left="0" right="0" top="0" bottom="0" mask="{topGroupMask}">

                    <s:Rect left="0" right="0" top="0" bottom="0">
                        <s:stroke>
                            <s:LinearGradientStroke rotation="90" weight="1">
                                <s:GradientEntry color="0xE5E5E5" />
                                <s:GradientEntry color="0xD8D8D8" />
                            </s:LinearGradientStroke>
                        </s:stroke>
                    </s:Rect>

                    <s:Rect left="1" right="1" top="0" bottom="1">
                        <s:fill>
                            <s:LinearGradient rotation="90">
                                <s:GradientEntry color="0xDADADA" />
                                <s:GradientEntry color="0xC5C5C5" />
                            </s:LinearGradient>
                        </s:fill>
                    </s:Rect>
                </s:Group>

                <!-- layer 0: header control bar -->
                <!--- @copy spark.components.Panel#headerBarGroup -->
                <s:Group id="headerBarGroup" left="0" right="0" top="1" bottom="1" minWidth="0" minHeight="0">
                    <s:layout>
                        <s:HorizontalLayout paddingLeft="5" paddingRight="5" paddingTop="3" paddingBottom="3" gap="5" />
                    </s:layout>
                </s:Group>

            </s:Group>

            <!--- @copy spark.components.SkinnableContainer#contentGroup -->
            <s:Group id="contentGroup" width="100%" height="100%" minWidth="0" minHeight="0">
            </s:Group>

            <!--- @private -->
            <s:Group id="bottomGroup" minWidth="0" minHeight="0"
                     includeIn="normalWithControlBar, disabledWithControlBar , disabledWithHeaderBarWithControlBar, normalWithHeaderBarWithControlBar" >

                <s:Group left="0" right="0" top="0" bottom="0" mask="{bottomGroupMask}">

                    <!-- layer 0: control bar divider line -->
                    <s:Rect left="0" right="0" top="0" height="1" alpha="0.22">
                        <s:fill>
                            <s:SolidColor color="0x000000" />
                        </s:fill>
                    </s:Rect>

                    <!-- layer 1: control bar highlight -->
                    <s:Rect left="0" right="0" top="1" bottom="0">
                        <s:stroke>
                            <s:LinearGradientStroke rotation="90" weight="1">
                                <s:GradientEntry color="0xE5E5E5" />
                                <s:GradientEntry color="0xD8D8D8" />
                            </s:LinearGradientStroke>
                        </s:stroke>
                    </s:Rect>

                    <!-- layer 2: control bar fill -->
                    <s:Rect left="1" right="1" top="2" bottom="1">
                        <s:fill>
                            <s:LinearGradient rotation="90">
                                <s:GradientEntry color="0xDADADA" />
                                <s:GradientEntry color="0xC5C5C5" />
                            </s:LinearGradient>
                        </s:fill>
                    </s:Rect>
                </s:Group>
                <!-- layer 3: control bar -->
                <!--- @copy spark.components.Panel#controlBarGroup -->
                <s:Group id="controlBarGroup" left="0" right="0" top="1" bottom="1" minWidth="0" minHeight="0">
                    <s:layout>
                        <s:HorizontalLayout paddingLeft="5" paddingRight="5" paddingTop="3" paddingBottom="3" gap="10" />
                    </s:layout>
                </s:Group>
            </s:Group>
        </s:Group>
    </s:Group>
</s:SparkSkin> 
```

应用程序 ：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" 
               xmlns:panelWithHeader="components.panelWithHeader.*">
    <fx:Script>
        <![CDATA[
            import components.panelWithHeader.skin.PanelWithHeaderBarSkin;

            import mx.controls.Alert;

            protected function btnRabbit_clickHandler(event:MouseEvent):void
            {
                Alert.show("You clicked Header bar button");
            }

            protected function btnCat_clickHandler(event:MouseEvent):void
            {
                Alert.show("You clicked Control bar button");
            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:HGroup verticalCenter="0" horizontalCenter="0">

        <s:Panel height="300" width="400">
        </s:Panel>

        <panelWithHeader:PanelWithHeaderBar skinClass="components.panelWithHeader.skin.PanelWithHeaderBarSkin"
                                            height="300" width="400"
                                            title="Panel with header and control bar">
            <panelWithHeader:headerBarContent >
                <s:Button label="RABBIT" id="btnRabbit" click="btnRabbit_clickHandler(event)"/>
                <s:DropDownList>
                    <s:dataProvider>
                        <s:ArrayList source="[One,Two,Three,Four,Five,Six,Seven,Eight,Nine,Ten]" />
                    </s:dataProvider>
                </s:DropDownList>
            </panelWithHeader:headerBarContent>

            <panelWithHeader:controlBarContent >
                <s:Button label="CAT" id="btnCat" click="btnCat_clickHandler(event)"/>
            </panelWithHeader:controlBarContent>

        </panelWithHeader:PanelWithHeaderBar>

        <panelWithHeader:PanelWithHeaderBar skinClass="components.panelWithHeader.skin.PanelWithHeaderBarSkin"
                                            height="300" width="400"
                                            title="Panel with TabBar and ButtonBar">
            <panelWithHeader:headerBarContent >
                <s:VGroup width="100%" gap="3" >
                    <s:TabBar width="100%" dataProvider="{myViewStack}">
                        <!--<mx:ArrayCollection>
                            <fx:String>Flash</fx:String> 
                            <fx:String>Director</fx:String> 
                            <fx:String>Dreamweaver</fx:String> 
                            <fx:String>ColdFusion</fx:String> 
                        </mx:ArrayCollection>-->
                    </s:TabBar>
                    <s:ButtonBar width="100%" dataProvider="{myViewStack02}">
                        <!--<mx:ArrayCollection>
                        <fx:String>Flash</fx:String> 
                        <fx:String>Director</fx:String> 
                        <fx:String>Dreamweaver</fx:String> 
                        <fx:String>ColdFusion</fx:String> 
                        </mx:ArrayCollection>-->
                    </s:ButtonBar>
                </s:VGroup>
            </panelWithHeader:headerBarContent>

            <s:VGroup height="100%" width="100%">

                <mx:ViewStack id="myViewStack" borderStyle="solid" width="100%" height="100%">

                    <s:NavigatorContent id="search" label="Search">
                        <s:Label text="Search Screen"/>
                    </s:NavigatorContent>

                    <s:NavigatorContent id="custInfo" label="Customer Info">
                        <s:Label text="Customer Info"/>
                    </s:NavigatorContent>

                    <s:NavigatorContent id="accountInfo" label="Account Info">
                        <s:layout>
                            <s:VerticalLayout horizontalAlign="center" verticalAlign="middle"/>
                        </s:layout>
                        <s:Label text="Account Info"/>
                    </s:NavigatorContent>
                </mx:ViewStack>

                <mx:ViewStack id="myViewStack02" borderStyle="solid" width="100%" height="100%">

                    <s:NavigatorContent id="search02" label="Search 02">
                        <s:Label text="Search Screen 02"/>
                    </s:NavigatorContent>

                    <s:NavigatorContent id="custInfo02" label="Customer Info 02">
                        <s:layout>
                            <s:VerticalLayout horizontalAlign="center" verticalAlign="middle"/>
                        </s:layout>
                        <s:Label text="Customer Info 02"/>
                    </s:NavigatorContent>

                    <s:NavigatorContent id="accountInfo02" label="Account Info 02">
                        <s:Label text="Account Info 02"/>
                    </s:NavigatorContent>
                </mx:ViewStack>

            </s:VGroup>

        </panelWithHeader:PanelWithHeaderBar>

    </s:HGroup>

</s:Application> 
```

# objective-c - Mac 10.6 及更高版本的可用启动磁盘空间出错

> ID：10494373
> 
> 赞同：0
> 
> 时间：2012-05-08T07:24:39.233
> 
> 标签：objective-c, macos, cocoa, nsfilemanager

我正在使用以下代码来获取启动磁盘的可用磁盘空间。

```
NSFileManager *fm = [NSFileManager defaultManager];

double freeSpace = 0.0;
NSDictionary *attr = [[NSFileManager defaultManager] attributesOfFileSystemForPath:@"/" error:nil];
if (!error) {
    freeSpace = [[attr objectForKey:NSFileSystemFreeSize] doubleValue];
}
//Convert from bytes to GB.
freeSpace = freeSpace/(1024*1024*1024); 
```

但是对于**MacOS 10.6 及更高版本，它给出的 size 错误**。过了一会儿，我发现对于 10.5，我们需要将它除以 ( **1024*1024*1024** ) 以获得正确的可用大小。对于 10.6 及更高版本，我必须将其除以 ( **1000*1000*1000** ) 以获得正确的大小（当我们右键单击 HardDisk -> Get Info 时会显示在 Finder 中）。现在，我认为除以 1000 而不是 1024 是从 KB 转换为 MB 或其他什么的正确方法。那么为什么在 Mac 10.6 及更高版本中会这样呢？

是否有任何其他功能可以使可用的启动磁盘空间正确到小数点后 2 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:46:18.263

除了某些类型的软盘驱动器外，磁盘驱动器一直以 1000 的幂进行描述和销售。内存使用 1024 的幂，传统上 (ab) 使用 SI 的 1000 幂前缀。程序员倾向于遵循内存约定，但它从来都不是通用的和明确的。

1999 年，IEC 建议仅对 1000 的幂使用 SI 前缀（kilo、mega 等），并为 1024 的幂使用[一组新的前缀](http://en.wikipedia.org/wiki/Kibibyte)。从 10.6 开始，Mac OS X 对磁盘和文件遵循此建议——因此更多与宣传的磁盘大小非常匹配——但继续使用 SI 前缀表示 RAM 的 1024 次幂。

# sql - SQL Server SELECT 查询，行数据到列转换，如 PIVOT

> ID：10494383
> 
> 赞同：2
> 
> 时间：2012-05-08T07:25:10.437
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

![我当前在已用表中](../Images/37d7b5850e3cd09587d4148d37bf3836.png)

那是我的桌子`#EmployeeTemp`。

我想做的是检索如下数据。

![像那种风格显示](../Images/10f17232bd11df2cd13dec0e4e8e0fae.png)

所以首先，我使用下面的查询来检索我想要的数据。

```
CREATE TABLE #EmployeeTemp
(Employee_Name VARCHAR(50),
Confirmed_Date DATETIME,
Field_Type VARCHAR(50),
Field_Value VARCHAR(50))

INSERT INTO #EmployeeTemp VALUES ('John', '2009/1/1', 'Title', 'Programmer');
INSERT INTO #EmployeeTemp VALUES ('John', '2009/1/1', 'Department', 'IT Department');
INSERT INTO #EmployeeTemp VALUES ('John', '2011/1/1', 'Title', 'Sr. Programmer');
INSERT INTO #EmployeeTemp VALUES ('David', '2010/1/1', 'Title', 'Software Engineer');
INSERT INTO #EmployeeTemp VALUES ('David', '2010/1/1', 'Department', 'IT Department');

SELECT * FROM #EmployeeTemp

SELECT 
MyEmployee.Confirmed_Date,
MyEmployee.Employee_Name,   
Title = MAX(MyEmployee.Field_Value),
Department = (SELECT 
                    Field_Value
                FROM #EmployeeTemp
                WHERE Field_Type = 'Department'
                AND Employee_Name = MyEmployee.Employee_Name
                GROUP BY Employee_Name, Field_Value)
FROM #EmployeeTemp AS MyEmployee
WHERE MyEmployee.Confirmed_Date IN (SELECT MAX(Confirmed_Date) FROM #EmployeeTemp GROUP BY Employee_Name)
GROUP BY MyEmployee.Employee_Name, MyEmployee.Confirmed_Date
ORDER BY MyEmployee.Confirmed_Date DESC 
```

它按我的意愿工作。但我想问的是，您能否给我任何建议以更专业的方式编写查询。

每一个建议都将不胜感激。

我使用的是 Microsoft SQL Server 2008 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:58:51.187

这个问题非常主观，所以在我看来是一个更优雅的解决方案，在别人看来可能是一个不太优雅的解决方案。但是，这是我将采用的方法，使用 SQL-Server PIVOT 功能。

```
;WITH Employees AS
(   SELECT  *, 
            MAX(Confirmed_Date) OVER(PARTITION BY Employee_Name, Field_Type) [MaxFieldConfirmedDate],
            MAX(Confirmed_Date) OVER(PARTITION BY Employee_Name) [MaxConfirmedDate]
    FROM    #EmployeeTemp
)
SELECT  *
FROM    (   SELECT  MaxConfirmedDate [Confirmed_Date], Employee_name, Field_Type, Field_Value
            FROM    Employees
            WHERE   Confirmed_Date = MaxFieldConfirmedDate
        ) data
        PIVOT
        (   MAX(Field_Value)
            FOR Field_Type IN ([Title], [Department])
        ) Pvt 
```

我更喜欢这种方法的原因首先是它在服务器上的工作量更少（与这个相比，在检查查询的实际执行计划时，这个相对于批处理的成本为 27%，而你的）。其次，如果您需要添加更多字段，则只需扩展以下行即可：

```
FOR Field_Type IN ([Title], [Department]) 
```

例如，使用以下额外数据：

```
INSERT INTO #EmployeeTemp VALUES ('John', '2011/1/1', 'Test', 'Test');
INSERT INTO #EmployeeTemp VALUES ('David', '2010/1/1', 'Test', 'Test'); 
```

你只需要制作这条线：

```
FOR Field_Type IN ([Title], [Department], [Test]) 
```

获得输出中所需的额外列。

# css - 引导固定内容窗格

> ID：10494384
> 
> 赞同：3
> 
> 时间：2012-05-08T07:25:14.463
> 
> 标签：css, twitter-bootstrap

是否有一种“干净”的方式来制作引导标准的 2 列布局，侧边栏（项目列表）长且可滚动且主要内容区域固定？我想使用主要内容区域通过拦截左侧的链接来​​注入 ajax 内容，所以我希望它始终可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:32:01.013

只需添加`position: fixed`到您的侧边栏类和您认为合适的样式。在此处查看带有 Bootstrap 的示例：http: [//jsfiddle.net/eterpstra/nxrpu/1/](http://jsfiddle.net/eterpstra/nxrpu/1/)

# iphone - 在没有开发人员程序的设备上安装 iOS 应用程序，iOS 5.1

> ID：10494398
> 
> 赞同：18
> 
> 时间：2012-05-08T07:26:07.207
> 
> 标签：iphone, ios, xcode, ios5, iphone-developer-program

我正在尝试将我的 iOS 应用程序安装到运行 iOS 5.1 的设备上。它目前尚未越狱，但如果需要的话，我会这样做。

当我运行 iOS 5.0.1 时，我关注了这个线程：[如何将 iPhone 应用程序从 Xcode 部署到真正的 iPhone 设备？](https://stackoverflow.com/questions/246422/how-can-i-deploy-an-iphone-application-from-xcode-to-a-real-iphone-device)并创建了一个自签名证书，它就像一个魅力。

更新到 Xcode 4.3.2 和 iOS 5.1 后我无法让它工作

我也试过关注这个线程但没有成功：[Test iOS app on device without apple developer program or jailbreak](https://stackoverflow.com/questions/4952820/test-ios-app-on-device-without-apple-developer-program-or-jailbreak)

**那么如何在不成为开发人员计划成员的情况下将我的应用程序从 Xcode 4.3.2 安装到运行 iOS 5.1 的 iPhone 4 上？**

编辑：我现在可以将应用程序放到 iPhone 上。但是当我尝试启动它们时，它们崩溃了，甚至启动图像都没有出现。我已经越狱了设备，安装了 Appsync，编辑了 SDKSettings.plist 并将构建属性更改为“不要编码签名”。

这是我尝试启动应用程序时控制台给我的信息，我在 Xcode 中没有收到任何崩溃日志：

```
May  8 18:25:35 unknown SpringBoard[54] <Warning>: Unable to obtain a task name port right for pid 1017: (os/kern) failure
May  8 18:25:35 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.KerschApps.Test[0x2fa8]) Exited: Killed: 9
May  8 18:25:35 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.KerschApps.Test[0x2fa8]) Throttling respawn: Will start in 2147483647 seconds
May  8 18:25:35 unknown SpringBoard[54] <Warning>: Application 'Test' exited abnormally with signal 9: Killed: 9
May  8 18:25:36 unknown kernel[0] <Debug>: AMFI: hook..execve() killing pid 1017: no code signature 
```

**为什么我的所有应用程序在模拟器中运行良好时都会在 iPhone 中崩溃？**

谢谢/蒂姆

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T03:55:50.863

我遇到了和你完全相同的问题，让应用程序在 iOS 5.1 和 Xcode 4.3.2 上运行，我刚刚设法让它在这里使用这种方法几乎完美地工作：

[使用 Xcode 4.3.2 为 iOS 5.1 构建应用程序](http://androidnirvana.comule.com/wordpress/2012/05/building-apps-for-ios-5-1-with-xcode-4-3-2-without-code-signing-and-developer-provisioning-profile/)

它基于[iPhone Dev wiki 中的这个](http://iphonedevwiki.net/index.php/Xcode#Developing_without_Provisioning_Profile)，但我必须包含一些更改 - -gta 开关会导致构建错误，并且说明并不完全明确。完整的教程在该博客文章中，但步骤基本上是：

1.  创建名为“iPhone Developer”的自签名证书
2.  重新打开 Xcode 项目构建设置中的“代码签名身份” - 以使用您的自签名证书“​​iPhone 开发人员”
3.  按照说明更改 info.plist 的出现
4.  下载ldid，使其可执行
5.  创建 python 脚本，将其粘贴在 /usr/bin 中，相应地更改 python 脚本引用
6.  更改 iPhoneCodeSign.xcspec 以使用 ldid3.py
7.  通过 ssh 触摸在设备上创建 tdmtanf 文件
8.  不要将 -gta 标志放在“其他代码签名标志”中

我碰巧使用 Unity 进行调试，因此使用 -gta 进行 Xcode 调试的缺乏并没有打扰我——显然 Objective C 开发人员将需要这个功能，所以希望有人可以扩展它，如果他们让它工作。我目前正在我的 iPhone 5.1 上使用我的应用程序的开发版本，并且手指交叉你可以获得相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T06:26:02.437

我不知道你是否解决了你的问题，但我遇到了和你一样的问题。我将解释如何解决。

要求：

Xcode 4.3.2，带有 iOS 5.1.x 的 iPhone，Mac。

您所需要的只是自动签署您的应用程序。您所做的所有步骤都是正确的，因此当您从 Xcode 构建应用程序时，您需要对其进行签名。在钥匙串中创建一个自我证书，然后进入 xcode 编译应用程序的文件夹（通过终端），然后编写：

```
mac$ platform=/Developer/Platforms/iPhoneOS.platform
mac$ allocate=${platform}/Developer/usr/bin/codesign_allocate
mac$ export CODESIGN_ALLOCATE=${allocate}
mac$ codesign -fs "Name" Program 
```

其中“Name”是证书的名称，Program 是 Program.app 的名称（您必须指定 .app）。通过 ssh 或cyberduck 或iTunes 将您的应用程序复制到/Applications 中......然后重新开始享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T13:04:25.390

我试图做同样的事情，但有几次失败了，然后我找到了[Moustafa Hassan 的博客](http://mouhassan.wordpress.com/2013/02/15/using-xcode-without-provisioning-profile/#comment-413)，里面有我成功使用的步骤。

它可以在 OS X 10.8.4（在我的 Hackintosh 上）和我的 iPad 上的 iOS 6.1.2 上使用 Xcode 4.6.3 进行良好的测试

该页面包含一步一步的示例和图片来完成这项工作。只需大约 15 分钟。

我能想到的唯一没有在页面上列出的是如何在 OS X 设备上访问 /usr/local/bin。这很容易通过在终端[1]中显示隐藏文件来完成。

[1]：默认写入 com.apple.Finder AppleShowAllFiles YES

# c# - 列表清除时会话被清除

> ID：10494399
> 
> 赞同：0
> 
> 时间：2012-05-08T07:26:08.063
> 
> 标签：c#, list, session

```
static List<string> keywordList = new List<string>();

protected void btnEnter_Click(object sender, EventArgs e)
{
    lbxKeywords.Items.Add(tbxKeyword.Text);
    keywordList.Add(tbxKeyword.Text);
    tbxKeyword.Text = string.Empty;
}

protected void btnSearch_Click(object sender, EventArgs e)
{
    Session["keywords"] = keywordList;
    keywordList.Clear();
    Response.Redirect("Results.aspx");
} 
```

当我清除列表会话时变为空。这是为什么？

谢谢。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:29:20.357

那是因为您存储在会话变量中的只是对列表的引用，而不是列表的副本。

为会话变量创建列表的副本：

```
Session["keywords"] = new List<string>(keywordList); 
```

# sql - 在单个 T-SQL 语句中多次返回时间戳

> ID：10494401
> 
> 赞同：2
> 
> 时间：2012-05-08T07:26:15.927
> 
> 标签：sql, sql-server-2008, tsql, azure-sql-database

我有一个程序返回特定 timeZone 的日期时间。

```
CREATE Function [dbo].GetMyDate()  
Returns DATETIME  
As  
Begin  
 Return DateAdd(Hour,1,GetUTCDATE())  
End 
```

如果我在一个 T-SQL 语句中调用它两次或三次，它会给我完全相同的时间戳吗？还是会返回不同的时间戳？

例如，

```
SELECT 1 FROM TABLE_A WHERE GetMyDate() between GetMyDate() AND GetMyDate() 
```

如果我执行上述语句，它是否***总是***给出“1”？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:54:05.823

随着对函数的调用之间的时间推移， is 不会返回相同的`DateTime`，即使在同一语句中多次使用也不返回，因此：

```
SELECT 1 FROM TABLE_A WHERE GetMyDate() between GetMyDate() AND GetMyDate() 
```

不会总是返回 1。实际上，很多情况下它不会。

但是，以下将：

```
DECLARE @myDate DATETIME
SET @myDate = GetMyDate()

SELECT 1 FROM TABLE_A WHERE @myDate BETWEEN @myDate AND @myDate 
```

**编辑**
附带说明：如果 SQL 服务器处理时间下降到毫秒，这将更加明显。因为它没有，所以对函数的所有三个调用都有可能在相同的毫秒间隔内执行。在这种情况下，你得到`1`. 如果 SQL Server 处理毫秒，您将永远不会`1`使用第一条语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T08:17:22.940

*您可以将其发布为答案吗...*

**简而言之，不，它不会。**

`DateTime`测试场景中的函数执行了 3 次。现在考虑到 SQL Server 的数据类型仅精确到0.000、0.003[或 0.007 秒的舍入增量](http://msdn.microsoft.com/en-us/library/ms187819.aspx)，您**可以**在调用之间获得不同的结果。您在测试场景中看不到它们的唯一原因是所有调用都在相同的时间间隔内返回。

**概念证明**

以下脚本可能需要一段时间才能执行，但当三个单独的调用不在同一时间间隔内发生时，它将停止。

```
SET NOCOUNT ON 
DECLARE @Var INTEGER = 1 
WHILE @Var = 1 
BEGIN 
  SELECT @Var = COUNT(*) 
  WHERE  dbo.GetMyDate() BETWEEN dbo.GetMyDate() AND dbo.GetMyDate()   

  SELECT @Var 
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:45:02.253

简短的回答：没有。

我已经在长时间运行的查询中测试了你的函数，我可以告诉你它并不总是返回相同的日期和时间。对于每条记录，该函数都被请求并返回一个新的日期和时间。理论上你可以说时间上的差异与查询从第一条记录到最后一条记录的运行时间相同。如果您的查询运行 3 秒，则第一行将返回 9:34:48（例如），最后一条记录将返回 9:34:51。所有其他记录以秒或毫秒为单位返回它们自己的差异。

但是，如果函数在一行中被多次询问（就像你的例子），那么返回的时间似乎是一样的。我认为这是因为运行查询所需的时间太小而无法返回不同的时间。如果函数本身需要更多时间，那么它仍然有可能返回不同的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:45:28.430

这个小程序显示实际的日期时间不同。首先，经过 5 次迭代，毫秒数会有所不同。在 apx 之后。14000-15000 次迭代秒数会有所不同。因此，您将获得不同的值，具体取决于对函数的调用之间进行了多少处理。

```
declare @i  int 
set @i = 0
while (@i < 100000)
begin 
     set @i = @i + 1
     print convert(nvarchar(6), @i) + ' ' + convert(nvarchar(50),dbo.GetMyDate(), 121)

end 
```

# intellij-idea - IDEA 使用哪个文件来显示 Android 项目的名称？

> ID：10494402
> 
> 赞同：1
> 
> 时间：2012-05-08T07:26:27.283
> 
> 标签：intellij-idea

IDEA 使用 Android 项目中的哪个文件在最近项目列表中显示项目名称？

![](../Images/330fe2dd1d9efe39d45d14bc2931ad5b.png)

如果我想将我的第 8 个项目的显示名称更改为“我更改的项目”，我应该编辑哪个文件？这是手动编辑某个文件还是可以通过 Ctrl+F6 以更快的方式完成？

我问这是因为重命名模块不会更改显示名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:32:37.500

根据[项目格式](http://www.jetbrains.com/idea/webhelp/project.html)，IDEA 使用 .ipr 文件（特别是其名称）或隐藏在 .idea 目录下的某些文件。

无论如何，要更改项目（显示）名称：

## 使用较新的基于目录格式的项目

^(（如果您不确定您的项目使用的是哪种格式，请先尝试一下。）)

不要编辑任何文件；相反，打开**项目结构**对话框（Ctrl-Alt-Shift-S 或 ⌘;），然后在项目的常规设置下，更改项目名称。

![在此处输入图像描述](../Images/52a5368f439696587c0418a4f1892f9f.png)

## 使用旧的基于文件的格式的项目

在您的情况下，找到扩展名为**.ipr**的主项目设置文件`LibraryTest.ipr`，然后简单地重命名它。还要重命名随附的**.iws**文件。

（注意：在执行此操作之前关闭项目。此外，如果有同名的 .iml 模块文件，请不要理会它。如果要更改模块的名称，请通过项目结构设置进行。）

该项目将首先从最近的项目列表中消失；您必须使用“打开项目”并找到新重命名的 .ipr 文件才能打开它。

# ruby-on-rails - 从 ruby on rails 生成受密码保护的 zip 文件

> ID：10494403
> 
> 赞同：3
> 
> 时间：2012-05-08T07:26:27.223
> 
> 标签：ruby-on-rails, zip

有没有人有幸在 Rails 中创建受密码保护的 zip 文件？

我花了很多时间试图让 Chilkat 的 64 位 linux gem 在 OSX 上运行。我将它列为已安装在我的 gem 列表中，但我无法实例化任何东西。

我在 1.9.2、3.2.3、OSX 上。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T07:48:26.370

你试过 ZipRuby 吗？它似乎有一种[加密方法](https://bitbucket.org/winebarrel/zip-ruby/wiki/Home)。

```
Zip::Archive.encrypt('filename.zip', 'password') 
```

抱歉，我自己没有尝试过，所以不能绝对确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T07:55:38.580

现在，可以使用[RubyZip](https://github.com/rubyzip/rubyzip)库。请注意，截至目前，它被标记为“实验性”。但是，它有效。另请注意，尚不支持 AES 加密。

[https://github.com/rubyzip/rubyzip#password-protection-experimental](https://github.com/rubyzip/rubyzip#password-protection-experimental)

# sql - sql update column 2 with column 1 data

> ID：10494412
> 
> 赞同：0
> 
> 时间：2012-05-08T07:27:12.510
> 
> 标签：sql, wordpress, sql-update

Wordpress has 2 columns in its ***wp_posts*** table

*   post_date (the actual date post was published)
*   post_modified (the last time the post was modified)

I want to update/change/replace post_modified values with the values of post_date but haven't a clue how to except knowing I need a sql query.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:31:15.407

Maybe something like this:

```
UPDATE wp_posts
SET post_modified= post_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:31:22.420

```
Update wp_posts
set w1.post_modified = w2.post_date
from wp_posts w1, wp_posts w2 
where w1.IdCol = w2.IdCol 
```

# wordpress - 如何禁用 wordpress 可视化和 HTML 编辑器？

> ID：10494414
> 
> 赞同：0
> 
> 时间：2012-05-08T07:27:31.997
> 
> 标签：wordpress, text-editor

是否可以同时删除 wordpress 用户的 Visual 和 HTML 编辑器？我知道禁用可视化编辑器的选项，但我也想禁用 HTML 编辑器，并希望有一个纯文本区域。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:38:33.813

如果不破解核心（永远不应该这样做），就无法更改 Post 或 Page 内容类型。

您可以创建不支持“编辑器”但支持“摘录”（接受纯文本）的[自定义帖子类型。](http://codex.wordpress.org/Post_Types)[请参阅register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type)函数的“支持”参数。

# tcp - TCP 上的校验和

> ID：10494416
> 
> 赞同：4
> 
> 时间：2012-05-08T07:27:39.530
> 
> 标签：tcp, network-programming, checksum, crc

TCP是否不负责通过在传输过程中发生丢失等任何必要的事情来确保通过线路完整发送流？

它没有做好它的工作吗？

为什么更高的应用层协议及其应用程序仍然执行校验和？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:31:50.373

虽然 TCP 确实包含自己的校验和，但它只是一个 16 位校验和，而且 TCP 校验和机制肯定有可能漏掉多位传输错误。这是非常罕见的，但它仍然是可能的，事实上我已经看到它发生（几十年一两次）。

一个健壮的协议将希望使用更高级别的散列函数来确保传输数据的完整性。话虽如此，传输少量数据的应用程序并没有遇到这个麻烦。批量传输应用程序（例如包管理器或自动更新机制）通常会使用加密哈希函数来增加数据完整性的保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:59:01.590

TCP 确保 TCP 数据包可靠地传递，使用校验和捕获传输过程中引入的错误，并根据需要重新传输丢失或损坏的数据包。当一个数据包被传输时，它被保留在一个重传队列中，直到对等主机确认接收；如果在某个超时期限内没有收到确认，则重新传输数据包。但是主机不会永远重新传输一个数据包——如果一个数据包反复失败，那么 TCP 最终会放弃并关闭连接。

更高级别的协议假设 TCP 工作可靠（一个公平的假设）并使用它们自己的校验和或其他任何东西来检查更高级别的数据流是否安全到达。我写了很多有问题的套接字应用程序，它们搞砸了他们自己的更高级别的缓冲区并破坏了应用程序数据流！

在任何具有强大应用程序的生产级 TCP/IP 堆栈中，我认为您可以确信问题在于您的连接中断。或者你可能有一个错误的应用程序，但我怀疑你的 fetch/wget 是错误的。

# forms - Making a POST request in Selenium without filling a form?

> ID：10494417
> 
> 赞同：15
> 
> 时间：2012-05-08T07:27:41.000
> 
> 标签：forms, testing, post, selenium, request

I have an application A that should handle a form submit made with POST method. The actual form, that initiates the request, is in totally separate application B. I am testing application A using Selenium, and I like to write a test case for form submit handling.

How to do this? Can this be done in Selenium at all? Application A does not have a form that can initiate this request.

Note, that the request must use POST, otherwise I could just use WebDriver.get(url) method.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-01-22T19:33:37.880

使用 selenium，您可以执行任意 Javascript，包括[以编程方式提交表单](https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Submitting_forms_and_uploading_files)。

使用 Selenium Java 执行最简单的 JS：

```
if (driver instanceof JavascriptExecutor) {
    System.out.println(((JavascriptExecutor) driver).executeScript("prompt('enter text...');"));
} 
```

使用 Javascript，您可以创建一个 POST 请求，设置所需的参数和 HTTP 标头，然后提交它。

```
// Javascript example of a POST request
var xhr = new XMLHttpRequest();
// false as 3rd argument will forces synchronous processing
xhr.open('POST', 'http://httpbin.org/post', false);
xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
xhr.send('login=test&password=test');
alert(xhr.response); 
```

> 在现代前沿浏览器中，您还可以使用[`fetch()`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options).

如果您需要将响应文本传递给 selenium，则不要`alert(this.responseText)`使用`return this.responseText`or并将(or )`return this.response`的结果分配给变量（如果使用 python）。对于将或相应的java。[**`execute_script`**](https://selenium.dev/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html?highlight=execute_script#selenium.webdriver.remote.webdriver.WebDriver.execute_script)[**`execute_async_script`**](https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.execute_async_script)[**`executeScript()`**](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/JavascriptExecutor.html#executeScript-java.lang.String-java.lang.Object...-)[**`executeAsyncScript()`**](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/JavascriptExecutor.html#executeAsyncScript(java.lang.String,java.lang.Object...))

这是python的完整示例：

```
from selenium import webdriver

driver = webdriver.Chrome()

js = '''var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://httpbin.org/post', false);
xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

xhr.send('login=test&password=test');
return xhr.response;'''

result = driver.execute_script(js); 
```

`result`将包含您的 JavaScript 的返回值，前提是 js 代码是同步的。设置`false`为第三个参数以`xhr.open(..)`强制请求同步。将第三个参数设置为`true`或省略它将使请求异步。

> ❗️ 如果您正在调用**异步**js 代码，请确保[**`execute_script`**](https://selenium.dev/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html?highlight=execute_script#selenium.webdriver.remote.webdriver.WebDriver.execute_script)您使用而不是使用[**`execute_async_script`**](https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.execute_async_script)，否则该调用将不会返回任何内容！

> 注意：如果您需要将字符串参数传递给 javascript，请确保始终使用转义它们`json.dumps(myString)`，否则当字符串包含单引号或双引号或其他棘手字符时，您的 js 将中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T08:09:00.820

我认为使用 Selenium 是不可能的。没有办法使用 Web 浏览器无中生有地创建 POST 请求，而 Selenium 通过操纵 Web 浏览器来工作。我建议您使用 HTTP 库来发送 POST 请求，并与您的 Selenium 测试一起运行。（您使用的是什么语言/测试框架？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-31T01:39:46.493

我发现的最简单的方法是仅出于提交 POST 请求的目的制作中间页面。让 selenium 打开页面，提交表单，然后获取最终页面的来源。

```
from selenium import webdriver
html='<html><head><title>test</title></head><body><form action="yoursite.com/postlocation" method="post" id="formid"><input type="hidden" name="firstName" id="firstName" value="Bob"><input type="hidden" name="lastName" id="lastName" value="Boberson"><input type="submit" id="inputbox"></form></body></html>'
htmlfile='/tmp/temp.html'
    try:
        with open(htmlfile, "w") as text_file:
            text_file.write(html)
    except:
        print('Unable to create temporary HTML file')
from selenium.webdriver.support.ui import WebDriverWait
driver = webdriver.Firefox()
driver.get('file://'+htmlfile)
driver.find_element_by_id('inputbox').click();
#wait for form to submit and finish loading page
wait = WebDriverWait(driver, 30)
response=driver.page_source 
```

# asp.net - Why do mobile views in ASP.NET MVC display differently on different servers?

> ID：10494419
> 
> 赞同：17
> 
> 时间：2012-05-08T07:27:46.053
> 
> 标签：asp.net, asp.net-mvc, mobile, asp.net-mvc-4

I am using the new ASP.NET MVC 4 beta and am trying to create a system that mostly works with responsive design, but for one specific view I am using a mobile view to render a specific view for mobile devices.

My structure is simply that I have a Show.cshtml and following that I have a Show.mobile.cshtml.

If I make my site available from my dev machine through IIS Express this view displays correctly for iPad, iPhone, Android phones and mobile Opera, and it also works the same if I make a local publish to IIS 7.5 on my dev machine.

The problem comes when we deploy to a live server, we have tried deploying on two different servers. Then the mobile view will only be served to iPhones, no other mobile devices. This is consistently so. Our servers set up have been both Windows 2003/IIS6 and Windows 2008 R2/IIS7.5 and it works the same on both, only iPhone gets served the mobile view.

What might be the cause of this?

I have not added anything custom in global.asax for this.

**UPDATE**

After some more research it seems clear to me that the default behavior for DisplayMode and mobile views depends on the Request.Browser.IsMobileDevice flag. This flag in turn seems to rely on the .browser files that are in the Config/Browsers-folder of the .NET Framework folder.

On my dev machine I have different .browser files than those that are present on the servers I have deployed to. So far I have tried to deploy the ones I have on my machine in the App_Browsers-folder of the web app, but that did not fix my issue. Might this be the way to go?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T11:33:12.350

这不是您问题的完整答案，但我认为它仍然会有所帮助。

以我的经验，ASP.NET 不太擅长解决浏览器功能。所以，我可以推荐查看[51Degrees.Mobi Foundation](http://51degrees.codeplex.com/)。史蒂文·桑德森对此有一篇很好的博客文章：

[使用 51Degrees.Mobi Foundation 在 ASP.NET MVC 3 上进行准确的移动浏览器检测](http://blog.stevensanderson.com/2010/12/17/using-51degreesmobi-foundation-for-accurate-mobile-browser-detection-on-aspnet-mvc-3/)

我不完全确定，但您应该能够轻松地将其连接到 ASP.NET MVC 4 DisplayMode 基础架构。这是一个很好的资源：

[51Degrees.mobi 和 MVC4](http://51degrees.mobi/Support/Blogs/tabid/212/EntryId/26/51Degrees-mobi-and-MVC4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T12:10:57.507

我认为我在下面给出的解决方案就是答案（它工作了一会儿），但一段时间后它仍然切换到错误的视图。

像互联网的其他部分一样，我[从 Nuget 安装了 51 Degrees](http://www.nuget.org/packages/51Degrees.mobi) 这运行良好，而且很容易设置

* * *

（下面对我不起作用，但也许对你有用） [http://www.nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes](http://www.nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes)

看起来这是一个已知的错误：[http ://aspnetwebstack.codeplex.com/workitem/280?PendingVoteId=280](http://aspnetwebstack.codeplex.com/workitem/280?PendingVoteId=280)

根据上面的 codeplex 链接，请记住确保这一点：

> 对于自定义已注册视图引擎列表的一小部分项目（例如，在 Global.asax 中），您应该确保您引用的是 Microsoft.Web.Mvc.FixedRazorViewEngine 或 Microsoft.Web.Mvc.FixedWebFormViewEngine，而不是核心运行时二进制文件中的类

# heroku - Heroku - how to run Schedluer addon 4x per day?

> ID：10494420
> 
> 赞同：1
> 
> 时间：2012-05-08T07:27:55.287
> 
> 标签：heroku, cron, scheduler

I have an app hosted on Heroku and this app need to run some task several times per day, lets say 4 times (and in the best way - I would like to set up, which hour will be the task run - eg. 1\. task at 1AM, 2\. at 5AM, 3\. at 11AM and 4\. at 8PM).

Heroku offers the addon called [Scheduler](https://addons.heroku.com/scheduler). Is there any way to run tasks by the time scheme above?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:46:41.003

You can run the scheduler hourly but you'd need to check what hour it currently is via;

`[1,5,11,20].include?(Time.now.hour)`

in the task that you want to run to have it run at 1am, 5am, 11am and 8pm as per your question.

# amazon-s3 - Best Practices on how to maintain images on S3 with the same name and invalidate the cache

> ID：10494422
> 
> 赞同：2
> 
> 时间：2012-05-08T07:28:09.233
> 
> 标签：amazon-s3, http-headers, amazon-web-services, amazon-cloudfront

I would like to understand if there are any best practices on how to maintain images on S3 and use cloudfront to access them. The reason why am asking this question is because of how S3 and cloudfront work together.

I upload an image, set an expiry using the meta tags on S3 and try to use the cloudfront URL I get the desired image. The problem is when I try to update the same image and it does not immediately reflect until the set expiry on the meta tags in met.

Is there a good way to get the latest image if there is a change on S3?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T18:39:30.930

您需要告诉 CloudFront 它已缓存的文件已更改，以便它将从 S3 获取更新的版本。为此，您使CloudFront 上的文件[无效。](http://aws.amazon.com/about-aws/whats-new/2010/08/31/cloudfront-adds-invalidation-feature/)然后下次请求该文件时，CloudFront 将返回 S3 以获取最新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:42:25.523

虽然您可以使用 Cloudfront 的无效功能，但我认为它具有传播延迟，因此如果您对图像/css/js 进行重大更改，可能会出现问题。

我们经历了类似的进展，确保更改总是在进入 Cloudfront 之前立即传播，然后在进入 Cloudfront 之后再次传播。我假设许多其他人也与我编写的脚本的更多升级/更新相吻合，我决定让其他人使用它（[这里有更多历史](https://github.com/alltuition/version-tags#history)！）

该脚本托管在这里：[https ://github.com/alltuition/version-tags](https://github.com/alltuition/version-tags)

基本上它是一个 Python 或 Django 脚本，它使用 Linux 命令和 git 历史记录来确定对媒体文件进行了哪些文件修改，然后使用 sed 将所有引用更新到修改文件的不同路径。（文件必须从允许您使用通配符别名的服务器提供（自述文件提供了 Nginx、Apache 和 Django 开发服务器的说明。））

对媒体文件的所有更改都会立即在用户的浏览器中更新，因为第一个获得第一个修改过的 html 页面的人请求了一个不在 Cloudfront 缓存中的 url，因此 Cloudfront 去获取文件的新版本。这也意味着您可以将所有媒体文件设置为永不过期。

# c++ - 验证 116725 = 116 * 725 与否？C/C++

> ID：10494423
> 
> 赞同：0
> 
> 时间：2012-05-08T07:28:16.923
> 
> 标签：c++, c

问题：输入一个整数例如：ABCD，验证是不是ABCD = AB*CD

（注意我们不知道这个数字有多少位数，只知道它是一个正整数

是的，如果位数是奇数，我们可以断定结果为否，立即通过...眼睛大声笑）

例如：

```
 Enter a number: 88
    Output: No

    Enter a number: 12600
    Output: No

    Enter a number: 116725
    Output: Yes, 116 * 725 = 116725 (**this is just example, 

not actual result, just help to understand how output look like**) 
```

问题是，你**不能**使用**array**，**[jump](http://en.wikipedia.org/wiki/C_syntax#Jump_statements)**和**bitwise**来解决这个问题。是的，如果我们可以使用数组，那就没什么好说的了，把输入数放在一个数组中，检查前半部分乘另一半......bla..bla......我需要**IDEA**的帮助而不使用数组来解决这个问题，现在我被困住了！非常感谢你！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T08:32:48.987

您的程序可以安全地输出`No`每个输入。证明：

您正在寻找整数 A 和 B，使得 A*B = A*10^k + B，其中 A 和 B > 0 且 B < 10^k。

如果 A*B = A*10^k + B，则 B = 10^k + B/A > 10^k。但是 B 必须小于 10^k，所以这是矛盾的。因此不存在这样的A和B。

* * *

更长的证明：

您正在寻找整数 A 和 B，使得 A*B = A*10^k + B，其中 A 和 B > 0 且 B < 10^k。

两边减去B得到(A-1)*B = A*10^k。

由于 A 是右手边的一个因数，它也是左手边的一个因数。但是 A 和 A-1 互质，所以 A 必须整除 B。所以，对于某个整数 n，B = n*A。

现在我们有 A*B = A*10^k + n*A，或 A*B = (10^k + n)*A。由于 A > 0，我们可以将两边除以 A 得到 B = 10^k+n。但这是不可能的，因为 B 应该小于 10^k！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T07:31:26.940

对您的 6 位数号码的一点提示：

*   获得最后 3 位数字使用`% 1000`
*   要获得前 3 位数字，请使用`(int) X/1000`.

请注意`1000 == 10^3`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-08T08:32:37.627

编写一个程序，要求输入，然后打印“否”。

完毕。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T07:50:09.193

目前还不清楚您要做什么。ABCD == AB*CD 建议四位数字。对于一个四位数的数字`x`，上面的测试将是`x == (x / 100) * (x % 100)`。对于六位数字，请替换 `100`为`1000`，更一般地，对于偶数的`n`数字 `n`，请使用`10^(n/2)`。但是，如果`n`很奇怪，我不确定您在寻找什么，并且您给出的最后一个示例不符合您提到的标准；如果您可以排列每一半的数字，那么问题就会变得更加复杂。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T07:40:18.533

您可以读取一个字符串，将其在中间拆分并将两个部分都转换为 int。

您还可以读取一个 int，计算位数（编写自己的循环或使用 log 函数）并在计算出的位数后拆分 int。

您还可以编写一个循环，该循环采用 int ABCD，将其拆分为 ABC 和 D，并将数字从 ABC 移动到 D，而两者的位数不同（您不需要在这里计算位数，您可以进行非常简单的比较）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T08:02:53.633

要获得位数，请计算您必须将数字除以 10 的次数，直到它小于 1。

对于 116725，您需要除以 10 六次。之后，如果数字是奇数，您可以打印 no 或像 James Kanze 和 ProblemFactory 描述的那样计算结果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T12:13:19.503

这是一个完整的“C/C++”解决方案：

```
#include <stdio.h>

int main(void) {
    while (fgetc(stdin) != '\n');
    return puts("No.");
} 
```

# html - HTML join with Ruby, How can i do this?

> ID：10494425
> 
> 赞同：0
> 
> 时间：2012-05-08T07:28:26.740
> 
> 标签：html, ruby-on-rails, ruby

how can i join the ruby code with the html code? I want that the html "href" link with the path (ruby). Could somebody help me? For example: `<li class="active"><a href="#">Home</a></li> , the href linked to Ruby <%= link_to "Home", root_path %> .`

Ill want that my Button Home, for example is linked with the Ruby root_path.

**HTML Code**

```
>  <div class="navbar navbar-fixed-top">
>           <div class="navbar-inner">
>             <div class="container">
>               <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
>                 <span class="icon-bar"></span>
>                 <span class="icon-bar"></span>
>                 <span class="icon-bar"></span>
>               </a>
>               <a class="brand" href="#">My Workingtimes</a>
>               <div class="nav-collapse">
>                 <ul class="nav">
>                   <li class="active"><a href="#">Home</a></li>
>                   <li><a href="#about">Log In</a></li>
>                   <li><a href="#contact">Sign In</a></li>
>                 </ul>
>               </div><!--/.nav-collapse -->
>             </div>
>           </div>
>         </div> 
```

**RUBY CODE**

```
<div id="container">

    <div id="content">
        <% if flash[:notice] %>
        <p id="notice">
            <%= flash[:notice] %>
        </p>
        <% end %>

        <% if flash[:alert] %>
        <p id= "alert">
            <%= flash[:alert] %> 
        </p>
        <% end %>
    </div>
    <div id="footer">
    <%= link_to "Home", root_path %> |
    <%= link_to "Sign In", new_user_path %> |
        <% if user_signed_in? %>
        <%= link_to "Logout", logout_path, method: :delete %> |
        <%= link_to "My Workingtimes", mytimes_path %>
        <% else %>
        <%= link_to "Login", login_path %>
        <% end %> 
        <%= yield %>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:34:08.967

例如，您可以运行`rake routes`并查看`root_path`指向的内容。

除非您没有进行任何更改，否则它可能指向`/`，在这种情况下您可以拥有`href = "/"`

这是假设您*绝对*需要在`HTML`. 否则，我强烈建议您将其转换`.html`为`.html.erb`然后使用`<%= link_to "Home", root_path %>`您提到的类似内容。

# c# - 如何解读 iPhone 的加速度计读数

> ID：10494426
> 
> 赞同：6
> 
> 时间：2012-05-08T07:28:34.473
> 
> 标签：c#, iphone, accelerometer, kinect

我正在尝试构建一个基于 Kinect 和 iPhone 的应用程序。

我正在尝试根据 kinect 返回的轨迹计算我的手在 XY 和 Z 轴上随时间的加速度。基本上，我选择了 0.5 秒或 15 帧（`dt`）和 3 个点（`x0`和`x1`）的标准时间间隔，时间间隔为 0.5`x2`秒。首先我要提一下，这 3 个点的位置以米为单位。通过使用这些点，我正在计算两个速度（`v0 = (x1 - x0) / dt`和`v1 = (x2 - x1) / dt`）。最后，通过使用这些速度，我计算`x1`和`x2`as之间的加速度`acc = (v1 - v0) / dt`。

我在每一帧重复这些计算，我得到一个加速度数组。

正如我所说，我还有一部 iPhone，我想看看我的 iPhone 在哪只手上，左手还是右手。我想通过尝试将我的手的加速度与保持在正确位置的 iPhone 的加速度相匹配来做到这一点，这样我就有了相同的轴系。

唯一的问题是我的加速度和手机的加速度之间存在巨大差异。

每个轴的手机加速度读数介于 -2 和 2 之间，而我的在 -10 和 10 之间。我应该如何解释 iPhone 加速度以获得类似的测量以米/秒为单位进行挖掘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T21:21:21.477

iPhone 上的加速度计数据以 g 力为单位提供。x 轴与手机屏幕的上边缘对齐，y 轴与左边缘对齐，如果您正在看它，z 轴会直接从屏幕朝向您。因此，当您的手机正面朝上放在桌子上时，您应该分别获得`(0, 0, -1)`x、y 和 z 轴的值。如果您掉下手机，当它处于自由落体状态时，您应该得到`(0, 0, 0)`.

假设您在移动手机时保持手机这样对齐，以获得以米/秒平方为单位的 3 维加速度：

```
- (void)accelerometer:(UIAccelerometer*)accelerometer didAccelerate:(UIAcceleration*)acceleration
{
    float g = 9.80665f;
    float x = acceleration.x * g;
    float y = acceleration.y * g;
    float z = (acceleration.z + 1.0f) * g;
    // x, y, and z now hold the absolute acceleration in ms^-2
} 
```

请注意，您必须减去地球重力的影响才能获得相对于客厅而不是相对于 4 维时空的加速度。

另请注意，iPhone 加速度计噪音很大，即使手机处于静止状态，这些值也会抖动，因此您需要应用一些平滑处理。但是，如果您使用与您似乎对位置数据所做的类似的技术，将每帧的值放入一个数组中以获得过去 0.5 秒的滚动平均值，这已经为您平滑了数据。

需要注意的另一件事是 iPhone 加速度计的峰值约为 2.3g。这些 g 力并不难实现（例如，如果您一起拍手），因此您可能会超过它们，并且积累数据的技术将不是很可靠。

# session - 粘性和非粘性会话

> ID：10494431
> 
> 赞同：286
> 
> 时间：2012-05-08T07:29:03.053
> 
> 标签：session, sticky-session

我想知道粘性会话和非粘性会话之间的区别。从网上阅读后我的理解是：

**Sticky**：只有一个会话对象会在那里。

**非粘性会话**：每个服务器节点的会话对象

* * *

## 回答 #1

> 赞同：671
> 
> 时间：2012-11-30T08:57:25.730

当您的网站仅由一个 Web 服务器提供服务时，对于每个客户端-服务器对，都会创建一个会话对象并保留在 Web 服务器的内存中。来自客户端的所有请求都转到此 Web 服务器并更新此会话对象。如果在交互期间需要将某些数据存储在会话对象中，则将其存储在此会话对象中，并在会话存在时一直保留在那里。

但是，如果您的网站由位于负载均衡器后面的多个 Web 服务器提供服务，则负载均衡器将决定每个请求应该发送到哪个实际（物理）Web 服务器。例如，如果负载均衡器后面有 3 个 Web 服务器 A、B 和 C，则 www.mywebsite.com 可能[从](http://www.mywebsite.com/index.jsp)服务器 A 提供，[www.mywebsite.com](http://www.mywebsite.com/login.jsp)从服务器 B 提供，而[www.mywebsite.com](http://www.mywebsite.com/accoutdetails.php) / 由服务器 C 提供。

现在，如果请求是从（物理上）3 个不同的服务器提供的，每个服务器都为您创建了一个会话对象，并且因为这些会话对象位于三个独立的盒子上，所以没有直接的方法可以知道会话对象中有什么的另一个。为了在这些服务器会话之间进行同步，您可能必须将会话数据写入/读取到所有人通用的层中 - 例如数据库。现在，为此用例向数据库写入数据和从数据库读取数据可能不是一个好主意。现在，**粘性会话**的作用来了。

如果负载均衡器被指示使用粘性会话，那么您的所有交互都将发生在同一台物理服务器上，即使存在其他服务器也是如此。因此，在您与本网站的整个交互过程中，您的会话对象将是相同的。

总而言之，在粘性会话的情况下，您的所有请求都将被定向到同一个物理 Web 服务器，而在非粘性负载均衡器的情况下，可以选择任何 Web 服务器来处理您的请求。

例如，您可以在此处阅读有关 Amazon 的 Elastic Load Balancer 和粘性会话：http: [//aws.typepad.com/aws/2010/04/new-elastic-load-balancing-feature-sticky-sessions.html](http://aws.typepad.com/aws/2010/04/new-elastic-load-balancing-feature-sticky-sessions.html)

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2016-09-13T11:14:15.127

我在这里给出了更多细节的答案： [https ://stackoverflow.com/a/11045462/592477](https://stackoverflow.com/a/11045462/592477)

或者你可以在那里阅读==>

当您使用负载平衡时，这意味着您有多个 tomcat 实例并且您需要划分负载。

*   **如果您使用没有粘性会话的会话复制：**假设您只有一个用户使用您的网络应用程序，并且您有 3 个 tomcat 实例。该用户向您的应用程序发送多个请求，然后负载均衡器会将其中一些请求发送到第一个 tomcat 实例，并将其中一些请求发送到第二个实例，其他一些发送到第三个实例。
*   **如果您使用没有复制的粘性会话：**假设您只有一个用户在使用您的 Web 应用程序，而您有 3 个 tomcat 实例。该用户向您的应用程序发送多个请求，然后负载均衡器将第一个用户请求发送到三个 tomcat 实例之一，该用户在其会话期间发送的所有其他请求将发送到同一个 tomcat 实例。在这些请求期间，如果您关闭或重新启动此 tomcat 实例（使用的 tomcat 实例），负载均衡器会将剩余请求发送到仍在运行的另一个 tomcat 实例，但是由于您不使用会话复制，因此接收的实例 tomcat剩余的请求没有用户会话的副本，那么对于这个 tomcat，用户开始一个会话：尽管网络应用程序仍在运行，但用户失去了他的会话并与网络应用程序断开连接。
*   **如果您使用带有会话复制的粘性会话：**假设您只有一个用户在使用您的 Web 应用程序，而您有 3 个 tomcat 实例。该用户向您的应用程序发送多个请求，然后负载均衡器将第一个用户请求发送到三个 tomcat 实例之一，该用户在其会话期间发送的所有其他请求将发送到同一个 tomcat 实例。在这些请求期间，如果您关闭或重新启动此 tomcat 实例（使用的 tomcat 实例），负载均衡器会将剩余请求发送到仍在运行的另一个 tomcat 实例，因为您使用会话复制，接收剩余请求的实例 tomcat 具有用户会话的副本，然后用户继续他的会话：用户继续浏览您的网络应用程序而不会断开连接，tomcat 实例的关闭不会影响用户导航。

# asp.net - What this dynamic query missing and doesn't return a result?

> ID：10494432
> 
> 赞同：0
> 
> 时间：2012-05-08T07:29:03.273
> 
> 标签：asp.net, sql-server, tsql

I have following scalar function but the problem is that it doesn't return actual result but returns a query.

Could somebody guide me on it what I am missing here or making wrong?

I have formed the following function

```
ALTER function test(@QueId int, @Answer varchar(250)) RETURNS VARCHAR(500) AS   
BEGIN  
   DECLARE @STR varchar(4000) 
   DECLARE @QRY AS VARCHAR(1000)

   SELECT @QRY=
     'SELECT @str = COALESCE(@str + '';'','''') + AnswerText '+  
     'FROM SurveyQuestionAnswerTypes WHERE AnswerType=(Select AnswerType From SurveyQuestions Where QuestionID=' + 
     CAST(@QueId AS VARCHAR(4)) + ')AND AnswerValue in (' + replace(@Answer,'^',',') +')'

   --EXEC sp_executesql @QRY, '@STR VARCHAR(4000)', @STR
   RETURN @QRY 
END 
```

Instead of returning a result it returns

```
SELECT @str = COALESCE(@str + ';','') + AnswerText 
FROM SurveyQuestionAnswerTypes 
WHERE AnswerType = (Select AnswerType 
                    From SurveyQuestions 
                    Where QuestionID=25)AND AnswerValue in (3,4,5,6) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:34:28.903

好吧 - 它返回查询，因为您告诉它这样做！

查看您的代码：您已经注释掉了实际**执行**动态 SQL ( `EXEC sp_executsql .....`) 的行，而是将查询 ( `@QRY`) 作为字符串返回：

```
--EXEC sp_executesql @QRY, '@STR VARCHAR(4000)', @STR
RETURN @QRY 
```

只需更改它以执行查询而不是返回其字符串表示形式......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:03:42.557

您不能执行“exec”或“sp_executesql”，也不能在函数中执行存储过程。

你可以参考这个 [博客](http://blog.sqlauthority.com/2007/05/29/sql-server-user-defined-functions-udf-limitations/)

或者这个[问题](https://stackoverflow.com/questions/4585502/call-sql-from-a-user-defined-function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:48:24.703

试试这个语法，这可能对你有用：

```
Exec (@QRY) 
```

# web-services - 401 error if I connect from my ASP.NET app. to CrmDiscoveryService.asmx (CRM 2011)

> ID：10494437
> 
> 赞同：0
> 
> 时间：2012-05-08T07:29:27.113
> 
> 标签：web-services, dynamics-crm, dynamics-crm-2011, dynamics-crm-4, claims-based-identity

I have to use CrmDiscoveryService.asmx for DYNAMICS CRM 2011 because of the compatability to CRM 4.0\. I impemented IFD authentification algorithm and now it doesnt works:

I can connect me successfully to CrmDiscoveryService.asmx from Browser (anonymous connection enabled) URL: *https://internalcrm.organme>.com:444/mscrmservices/2007/spla/crmdiscoveryservice.asmx*

But if I try to get connected with the same URL from ASP.NET - i receive 401 error. Code:

```
RetrieveCrmTicketRequest crmTicketRequest = new RetrieveCrmTicketRequest();
crmTicketRequest.OrganizationName = OrgUniqueName;
crmTicketRequest.UserId = "bnet"+"\\"+"izz";
crmTicketRequest.Password = "pass";
CrmDiscoveryService discoveryService = serviceHandler.CreateCrmDiscoveryService(crmDiscoveryServiceUrl);
discoveryService.UseDefaultCredentials = true;
RetrieveCrmTicketResponse crmTicketResponse =
(RetrieveCrmTicketResponse)discoveryService.Execute(crmTicketRequest);

//Trust all certificates
System.Net.ServicePointManager.ServerCertificateValidationCallback =
((sender, certificate, chain, sslPolicyErrors) => true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:30:12.280

从检索可用组织列表开始可能是有意义的，例如[使用 CrmDiscoveryService Web 服务的示例：IFD](http://msdn.microsoft.com/en-us/library/cc151010.aspx)

```
// Configure an instance of the CrmDiscoveryService Web service proxy.
CrmDiscoveryService disco = new CrmDiscoveryService();
disco.Url = "https://localhost/MSCRMServices/2007/SPLA/CrmDiscoveryService.asmx";

//Retrieve a list of available organizations from the CrmDiscoveryService Web service.
RetrieveOrganizationsRequest orgRequest = new RetrieveOrganizationsRequest();
// Substitute an appropriate domain, username, and password here.
orgRequest.UserId = domain + "\\" + username;
orgRequest.Password = password;
RetrieveOrganizationsResponse orgResponse = (RetrieveOrganizationsResponse)disco.Execute(orgRequest);

//Find the target organization.
OrganizationDetail orgInfo = null;

foreach (OrganizationDetail orgdetail in orgResponse.OrganizationDetails)
{
    if (orgdetail.OrganizationName.Equals("AdventureWorksCycle"))
    {
        orgInfo = orgdetail;
        break;
    }
}

// Check whether a matching organization was not found. 
if (orgInfo == null)
    throw new Exception("The specified organization was not found.");

//Retrieve a CrmTicket from the CrmDiscoveryService Web service.
RetrieveCrmTicketRequest ticketRequest = new RetrieveCrmTicketRequest();
ticketRequest.OrganizationName = orgInfo.OrganizationName;
ticketRequest.UserId = domain + "\\" + username;
ticketRequest.Password = password;
RetrieveCrmTicketResponse ticketResponse =
    (RetrieveCrmTicketResponse)disco.Execute(ticketRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:36:43.033

正如 paramosh 所说，尝试在发现服务上设置凭据：

discoveryService.Credentials = new System.Net.NetworkCredential("izz", "password", "bnet");

# testing - How to run loadrunner to test business processes

> ID：10494440
> 
> 赞同：0
> 
> 时间：2012-05-08T07:29:40.807
> 
> 标签：testing, loadrunner, business-process

I'm a newbie to loadrunner, and encountered a problem when using it: I run loadrunner to test one of the business processes just like a WorkFlow something , when the recording work done, the process state is changed to Done, no more existed vie normal browsing, after that, I set 10 Vuser to run the script, of couse they all fail. I know a little thing about the correlation, but I feel it' s not the solution of my situation, what i'm gonna do about it? could you give me some addvice? thank you so much

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:47:50.363

你接受过培训吗？

你第一年有指定的导师吗？

# android - Android Paint PorterDuff.Mode.CLEAR

> ID：10494442
> 
> 赞同：8
> 
> 时间：2012-05-08T07:29:43.413
> 
> 标签：android, bitmap, android-canvas

我正在开发类似于 Android SDK 中的手指画演示的画布上绘制的应用程序。我的问题是当我使用`PorterDuff.Mode.CLEAR`. 绘制和画布时，如果我尝试擦除某些东西，它工作正常。但是，如果我尝试将图像保存为`PNG`文件，橡皮擦的笔划会变成黑色，我不确定为什么会发生这种情况。这是我正在做的一个例子：

```
@Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(mPath, mPaint);
    } 
```

橡皮擦：

```
case ERASE_MENU_ID:
            mPaint.setXfermode(new PorterDuffXfermode(
                                                    PorterDuff.Mode.CLEAR));
            return true; 
```

以及我如何保存图像：

```
 Calendar currentDate = Calendar.getInstance();
            SimpleDateFormat formatter= new SimpleDateFormat("yyyyMMMddHmmss");
            String dateNow = formatter.format(currentDate.getTime());
            File dir = new File(mImagePath);
            if(!dir.exists())
                dir.mkdirs();

            File file = new File(mImagePath + "/" + dateNow +".png");

            FileOutputStream fos;
            try {
                fos = new FileOutputStream(file);
                mBitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
                fos.close();
                Toast.makeText(getApplicationContext(), "File saved at \n"+mImagePath + "/" + dateNow +".png", Toast.LENGTH_LONG).show();
            } catch (FileNotFoundException e) {
                Log.e("Panel", "FileNotFoundException", e);
            } 
            catch (IOException e) {
                Log.e("Panel", "IOEception", e);
            }
            return true; 
```

这是一个图像示例：

这是我的画布在保存之前的样子：

![在此处输入图像描述](../Images/f77d7f7ff18444711c50295dac11f191.png)

这是保存在 SD 卡上后的图像：

![在此处输入图像描述](../Images/f62d9c052a4cb39c57e3906cd7ee9ab1.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T08:25:22.217

fingerpaint 代码的问题是你看到的和压缩成 png 的不一样。看看 onDraw()。首先你把屏幕画成白色。然后添加位图。因为您使用了 Porter Duff Clear，所以位图的擦除部分包含实际透明的黑色像素（值 0x00000000）。但是因为你有白色背景，所以这些*黑色*像素显示为白色。

要解决此问题，请更改您的保存代码以执行与绘制代码相同的操作

```
 try {
                    fos = new FileOutputStream(file);
                    Bitmap saveBitmap = Bitmap.createBitmap(mBitmap);
                    Canvas c = new Canvas(saveBitmap);
                    c.drawColor(0xFFFFFFFF);
                    c.drawBitmap(mBitmap,0,0,null);
                    saveBitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
                    saveBitmap.recycle();
... 
```

或者不要使用 PortDuff.Clear：

```
 case ERASE_MENU_ID:
        mPaint.setColor(Color.WHITE); 
```

# c# - 显示窗口时发送的消息

> ID：10494445
> 
> 赞同：0
> 
> 时间：2012-05-08T07:30:03.160
> 
> 标签：c#, wpf

我正在全局创建一个窗口对象并仅在必要时显示它，大部分时间窗口将处于不可见模式。只要窗口可见，我就有一些工作要做。谁能告诉我应该覆盖哪条消息来放置调用window.show方法时应该执行的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:36:35.563

[IsVisibleChanged](http://msdn.microsoft.com/en-us/library/system.windows.uielement.isvisiblechanged.aspx)应该做你想做的。

```
private void Window_IsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
{
  if ((bool)e.NewValue == true)
  {
     //Do what you need here
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:38:54.060

查看[Window 类文档](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)以及[Window 生命周期](http://msdn.microsoft.com/en-us/library/ms748948.aspx#Window_Lifetime_Events)。现在，我们可以得出结论，您（可能）需要[IsVisibleChanged 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.isvisiblechanged.aspx)。

# file - Managing Uploaded File Validation using Servlet

> ID：10494448
> 
> 赞同：2
> 
> 时间：2012-05-08T07:30:08.407
> 
> 标签：file, servlets, time, process, upload

I have the below requirement

A large text file around 10Mb to 25Mb (With 50,000 to 100,000 lines of data) is uploaded into the web application. I have to validate the file line by line and write the output to another location and then display a message to the user.
The App Server is WebLogic and its is accessed through Web Server through Apache Bridge. Apache Bridge times out pretty quickly during the upload + processing activity. Is there any way to solve this issue without changing the timeout of the Apache Bridge

What is best possible solution ? Below are my current thoughts.

**Soln 1** Upload the file and return back to the page. Then trigger a Ajax to run the validation in a separate thread and check its status through further Ajax requests.
**Soln 2**. Use sc_partial_content(206) http Code to keep the connection alive.

# python - 如何使用 epydoc 在 Python 文档中包含 Graphviz 图？

> ID：10494459
> 
> 赞同：2
> 
> 时间：2012-05-08T07:31:19.493
> 
> 标签：python, graphviz, dot, epydoc

[Epydoc 文档](http://epydoc.sourceforge.net/epydoc.html#graph-directives)说您可以通过该`dotgraph`指令在源代码中包含 Graphviz 图。

但是，如果尝试这个：

```
#: .. dotgraph:: Test
#:    graph name {
#:      a -- b -- c;
#:      b -- d;
#:    } 
```

我得到的只是一个错误说法`Unknown directive type "dotgraph"`。我使用最新的`epydoc`（v3.0.1）并`dot`在我的系统中正确安装。

我怎样才能`epydoc`制作图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:09:26.253

检查“dotpath：”变量的 epydoc 配置文件。确保将此变量设置为 dot 可执行文件的文件系统路径。

# asp.net-mvc - 绑定不起作用+一切都与示例中的相同

> ID：10494460
> 
> 赞同：0
> 
> 时间：2012-05-08T07:31:19.543
> 
> 标签：asp.net-mvc, binding, telerik

这是示例：[http ://demos.telerik.com/aspnet-mvc/razor/grid/ajaxbinding](http://demos.telerik.com/aspnet-mvc/razor/grid/ajaxbinding)

```
@(Html.Telerik().Grid<AXBCore.AccountTemplate>()
    .Name("Grid1")
    .Columns(columns =>
    {
        columns.Bound(p => p.Name).Width(110);
        columns.Bound(p => p.Amount).Width(110);
        columns.Bound(p => p.Timestamp).Width(110);
    })
    .DataBinding(dataBinding => dataBinding.Ajax().Select("_AjaxBinding", "Settings"))
    .Pageable()
    .Sortable()
    .Scrollable()
    .Groupable()
    .Filterable()
) 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:30:57.890

答案很简单。我有两个同名的网格。所以，第二个没用。

# javascript - 使用 Javascript 压缩 URL 中的 AJAX 哈希

> ID：10494470
> 
> 赞同：1
> 
> 时间：2012-05-08T07:31:44.677
> 
> 标签：javascript, ajax, url, compression

我正在开发一个使用 Knockout 和 Sammy 来记录 AJAX 历史的 AJAX 应用程序。该应用程序使用一组过滤器、排序选项和分页来让用户搜索 35000 条记录。

当前 URL 哈希采用以下形式：

```
http://domain/Search/{SearchTerms}/PageIndex 
```

例如：

```
http://localhost/search/#0%20-%205%C4%80square%20meter/1 
```

在服务器上解析搜索词以将它们与可用的过滤器相匹配。我不能使用 ID 或其他东西，因为过滤器集每天都在重建（当后端数据更新时），唯一保持不变的是描述。

这是构建哈希的 javascript 代码：

```
var hash = '';

ko.utils.arrayForEach(self.SelectedItems(), function (item) {
    hash = hash + item.Description + ' ';
});

hash = encodeURIComponent($.trim(hash));
hash = hash + '/' + self.HuidigePagina();

location.hash = hash; 
```

问题是加入所有项目描述可能会变得非常长。有没有办法可以压缩这部分，然后当我用 javascript 将它发送到服务器时解压缩它？

我在使用 LZW 压缩的 stackoverflow 上找到了一些答案，但它并没有给我原来的字符串。

# rspec - 使用 webkit 运行 capybara 时出现“失败/错误：无法从回溯中找到匹配行”

> ID：10494478
> 
> 赞同：0
> 
> 时间：2012-05-08T07:32:22.223
> 
> 标签：rspec, capybara, capybara-webkit

当我这样运行时，`:focus => true`它工作正常：

```
it "should send by email to new user", :js => true, :focus => true do
  ...
end 
```

但是，当我删除`:focus => true`并运行完整的测试套件时，我在该测试中收到此错误。

```
Failure/Error: Unable to find matching line from backtrace 
```

这似乎与`:js => true`可能有关，因为这是我开始使用它的第一个测试。当我自己运行一个测试时，capybara-webkit 会在屏幕上打印一堆警告。

但是当我运行完整的套件时，我没有看到来自 webkit 的警告，所以它几乎就像它没有被加载一样。

有任何想法吗？谢谢我真的很感激！

如果您对此感到好奇，这里是我的 gemfile 的相关部分：

```
group :test do                       
  gem "rspec-rails",                 '2.10.1'
  gem "ruby_gntp",                   '0.3.4'
  gem 'capybara',                    '1.1.2'
  gem 'capybara-webkit',             '0.11.0'  # requires "brew install qt"
  gem 'guard-rspec',                 '0.6.0'
  gem 'mocha',                       '0.10.0'
  gem 'spork',                       '~> 1.0rc'
  gem 'guard-spork',                 '0.5.2'
  gem 'launchy',                     '2.0.5'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:31:23.480

嗯，我似乎解决了它，但我认为它与水豚或 webkit 没有任何关系。这似乎是我遇到的事件机器中的一个问题。在 Rails.env.test 中，我基本上取消了对 EventMachine 的所有调用`send_data`。我仍然不确定为什么它无法获得回溯。

# wordpress - 仅将 / 根目录重写到特定页面

> ID：10494481
> 
> 赞同：0
> 
> 时间：2012-05-08T07:32:32.617
> 
> 标签：wordpress, apache, mod-rewrite

我有一个 wordpress 网站，我正在尝试只更改主页。这意味着，当人们访问 www.example.com 时，他们将被重定向到 www.example.com/page.html 。所有其他请求都应该去他们通常去的地方——一个wordpress永久链接。

试过这个，但它不起作用。所有请求都转到 page.html

```
RewriteRule /$ http://www.example.com/page.html$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:43:33.720

Use ruler for your index page, not for redirecting itself:

```
 DirectoryIndex page.html 
```

# cxf - 使用 JDK 1.5 实现 JAX-WS 的 CXF

> ID：10494484
> 
> 赞同：1
> 
> 时间：2012-05-08T07:32:40.507
> 
> 标签：cxf, jdk1.5

当我用谷歌搜索时，我发现 JAX-WS 实现是随 JDK 1.6 rt.jar 一起提供的。

但我想在 JDK 1.5 中使用 JAX-WS CXF 实现。

我无法为此找到正确的 Maven 依赖项。

任何人都可以分享有关此的任何好的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:37:41.570

那这个呢？

> *   GroupId：com.sun.xml.ws
> *   ArtifactId：jaxws-rt
> *   版本：2.1.3

[资源](https://blogs.oracle.com/enterprisetechtips/entry/using_jax_ws_with_maven)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T12:10:27.960

请对我们的 POM 文件使用以下依赖项，我希望它就足够了。

```
<dependency>
<groupId>org.apache.cxf</groupId>
<artifactId>cxf-bundle</artifactId>
<version>2.7.2</version>
</dependency> 
```

谢谢！

# sdk - 使用 Lync 2010 SDK 创建会议

> ID：10494485
> 
> 赞同：0
> 
> 时间：2012-05-08T07:32:42.710
> 
> 标签：sdk, lync, lync-2010

我知道当 Lync 也安装在计算机上时，我们可以使用 Outlook 创建电话会议。我假设这个插件使用了 Lync SDK。

我应该在哪里查看 SDK 才能创建电话会议，然后检索它的 URL 和其余元数据（使用 Lync 客户端）？

## **编辑：**

我设法创建了新的对话（使用自动化），但我找不到任何方法来创建会议或将对话转换为会议。我注意到有一些会议属性，比如 URI，但它们从未设置过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-03T16:04:44.427

您可以通过将虚拟 uri (a@b, dummy@dumber.dumb) 添加到参与者列表来升级到会议。这对于拨出电话很容易，但在拨入电话时会出现问题，因为您必须停止视频并在升级过程中的特定点重新启动它，否则 Lync 会挂起。请注意，升级过程需要一些时间，就像在 Microsoft 的客户端中一样，并且当升级持续时，虚拟对象会被丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:08:57.517

您不能（我不相信）使用 Lync SDK 将对话升级为会议 - 您必须使用 UCMA SDK 来执行此操作。

这里有一个类似的主题：[通过 Lync api 创建一个只有一个用户的会议 - 现在开会](https://stackoverflow.com/questions/6423608/creating-a-conference-with-only-one-user-via-lync-api-meet-now)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:16:07.330

***注册表编辑器***

`ConfJoinLink`请参阅PublicMeeting 中的xml 元素`HKEY_CURRENT_USER\Software\Microsoft\Communicator\ConfAddin\xxx@yyy.fr`

***样本：***

```
string confJoinLink = ...; //("conf:sip:xxx@yyy.fr;gruu;opaque=app:conf:focus:id:PK382RG3?conversation-id=w8YL86ez1f")

IAsyncResult ar = _automation.BeginStartConversation(confJoinLink, 0, StartConversationWithConferenceUriCallback, _automation); 
```

# c - 如何使用 C 从注册表中读取存储在键中的值

> ID：10494487
> 
> 赞同：0
> 
> 时间：2012-05-08T07:32:52.253
> 
> 标签：c, registry, registrykey

您好我正在尝试使用 C 代码读取存储在注册表项中的值。我试过下面的代码。它不会产生任何编译错误。但我只得到字符串的第一个字母作为输出。这是我的代码示例

```
#include "stdafx.h"
#include <windows.h>
#include <malloc.h>
#include <stdio.h>

#define TOTALBYTES    8192
#define BYTEINCREMENT 4096
#define BUFFER 8192

int _tmain(int argc, _TCHAR* argv[])
{
char value[255];
DWORD BufferSize = BUFFER;
RegGetValue(HKEY_LOCAL_MACHINE, TEXT("SOFTWARE\\Test\\subkey"), TEXT("blockedurlslist"), RRF_RT_ANY, NULL, (PVOID)&value, &BufferSize);
printf("%s",value);
system("pause");
} 
```

如果有人有想法，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:13:04.273

首先，您没有检查调用是否`RegGetValue`成功。始终检查 Win32 API 调用的返回值。

但是正在发生的事情非常清楚。每当函数返回仅包含第一个字符的字符串时，最可能的原因是该函数正在返回您将其解释为 ANSI 的 UTF-16 数据。您的字符串将包含一个以 UTF-16 编码的英文字符，第二个字节为 0。当解释为 ANSI 时，0 被视为字符串终止符。

您需要将缓冲区声明为包含宽字符有效负载。既然你正在使用，`TCHAR`那么你会这样做：

```
TCHAR value[255]; 
```

缓冲区大小为

```
DWORD BufferSize = sizeof(value); 
```

您需要更改您`printf`的才能打印出宽字符串。

如果我是你，我不会使用`TCHAR`. 我建议您决定在整个代码中使用 Unicode。它使您更容易理解，我怀疑您现在是否需要支持 Windows 98。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:59:54.193

返回的电话是什么？如果它没有返回`ERROR_SUCCESS`，它就失败了。您可以在调用后检查 的值，`BufferSize`以了解 API 声称返回了多少数据。

正如评论中指出的那样，您应该说：

```
char value[BUFFER];
DWORD BufferSize = sizeof value; 
```

从现在开始，您就缓冲区大小向 API 撒谎，这会导致缓冲区覆盖。

也许它以 16 位字符返回数据，而您正在使用 8 位调用进行打印，因此将散布的 0 字节解释为字符串终止符。

# css - 为什么我的 DIV 之间有间隙？

> ID：10494490
> 
> 赞同：0
> 
> 时间：2012-05-08T07:32:59.213
> 
> 标签：css, html, vertical-alignment

[为什么我正在处理](http://www.sarahcage.co.uk/)的这个网站有空白？我尝试将边距、填充等设置为 0px，但似乎没有任何影响。

*编辑 - 道歉；我搞砸了网站的链接。现在已修复。*

![突出显示 div 之间的间隙的图像](../Images/63dbc7cc2cd75015021cc3625179e033.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:52:22.950

您可能插入了一些您忘记的样式。从图片来看，我假设您的 html 看起来像这样

```
<ul id="nav">
    <li><a href="#">Home</a></li>
    <li><a href="#">Blog</a></li>
    <li><a href="#">Gallery</a></li>
</ul>

<div id="something">
</div> 
```

您的导航链接或列表项看起来好像它们的边距为 5 像素，而您的 div 看起来它的顶部和底部边距为 20 像素。尝试将此添加到您尝试修复的元素中以进行故障排除。

```
margin: 0 !important;
padding: 0 !important;
border: 0 !important; 
```

这应该覆盖之前可能有冲突的任何 css 样式。如果它不起作用，那么我们需要查看代码以帮助进一步排除故障。

[更新] 你应该声明一个 DOCTYPE 而不是简单地放置 html 标签。中心标签已弃用。

要修复间距，请尝试以下操作：

```
#nav ul{
    list-style-type:none;
    margin:0;
    padding:0;    
    /* REMOVE
    padding-top:6px;
    padding-bottom:6px;  
    */
}  
/***********************************
-- ADD
***********************************/
hr {
    margin: 0;
}
h2 {
    margin: 0;
} 
```

您将填充和边距更改为 0，但在 ul.xml 中再次添加了它。hr 标签导致了您的一些间距，而标题标签导致了其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:36:37.233

给边框零宽度

```
style="border:0px" 
```

或者给颜色检查它是否是边界

```
style="border-color:red" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:34:50.593

HR（行）和 H2（主标题）默认是 Block 元素，它们有换行符和边距。您应该修改这些元素的边距或将显示设置为内联 (display:inline)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:37:42.517

也试试：

```
 border-collapse: collapse;
    border: 0; 
```

# android - 生成的图像无法在 TabHost 上看到

> ID：10494493
> 
> 赞同：0
> 
> 时间：2012-05-08T07:33:25.503
> 
> 标签：android, android-tabhost

我已经从用户输入数据生成了 QR 码图像。生成二维码图像后，我启动了一个 TabActivity。

在这个活动中，我有三个选项 ( `Home | Image | Options`)。

我在`Image`TabMenu 上显示了生成的图像。但此时我无法看到图像。我将路径存储在 SqliteDatabase 中。

当我关闭应用程序并再次打开它并转到`Image`TabMenu 图像显示完美。

**我尝试过的。**

也试过把代码放进去，`onResume()`但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:50:14.720

刚刚找到解决方案。

通过Java的并发，并添加了AsyncTask。

花费大量时间的工作（保存图像），保存在`onPreExecute()`. 并从`onPostExecute()`.

现在它正在完全运行。

# asp.net - ASP.NET 2.0 VS2010 中哪个 ReportViewer 版本？

> ID：10494495
> 
> 赞同：0
> 
> 时间：2012-05-08T07:33:36.767
> 
> 标签：asp.net, visual-studio-2010, version, report-viewer2010

我正在 VS2010 上构建一个 WebApp (ASP.NET 2.0 C#)。

应用程序运行良好，我认为我添加了报告功能，所以我安装了 ReportViewer 2010。

当我从工具箱中拖动 ReportViewer 控件并运行页面时，我遇到了某种程序集引用错误，因此我在 Reference 中添加了 Microsoft.ReportViewer.WebForm。但是只有 8.0.0.0 版本。

当我尝试跑步时，它给了我：

```
The base class includes the field 'ReportViewer1', but its type (Microsoft.Reporting.WebForms.ReportViewer) is not compatible with the type of control (Microsoft.Reporting.WebForms.ReportViewer). 
```

我认为这是因为我没有引用 Microsoft.Reporting.WebForm 10.0.0.0。任何人都知道为什么我的参考列表中没有它，我如何在那里得到它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:08:12.107

VS 2010 通常适用于 Microsoft.Reporting.WebForm 10.0.0.0。我想知道为什么你最终使用了超级旧版本 8.0.0.0。但是，您可以在 web.config 中[手动添加或删除引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.80%29.aspx)和/或手动`Microsoft.Reporting.WebForm 8.0.0.0`替换`Microsoft.Reporting.WebForm 10.0.0.0`。

如果由于某种原因您没有在您的机器上安装它，您可以安装[Microsoft Report Viewer 2010 Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=6442)。

虽然我也使用 ASP.Net 2.0，`Microsoft.Reporting.WebForm 10.0.0.0`但到目前为止我没有任何问题。编译器警告框架 4.0 被引用`Microsoft.Reporting.WebForm`并建议升级到 ASP.Net 4.0

# ssao - 如何为 Horde3d 实现环境光遮蔽 (SSAO)？

> ID：10494499
> 
> 赞同：0
> 
> 时间：2012-05-08T07:33:56.237
> 
> 标签：ssao, horde3d

我已经阅读了几篇关于 ssao 效应的博客文章，但到目前为止，我不知道从哪里开始我的初学者关于 GPU 编程的整个事情。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:36:01.367

[http://kuko.serveblog.net/2012/05/08/horde3d-ssao-effect-ambient-occlusion-tutorial/](http://kuko.serveblog.net/2012/05/08/horde3d-ssao-effect-ambient-occlusion-tutorial/)

# jquery - 如果 Dom 对象只有一个元素，则 Jquery 变量返回未定义

> ID：10494501
> 
> 赞同：0
> 
> 时间：2012-05-08T07:34:05.157
> 
> 标签：jquery, wordpress, dom, html-parsing

我在我的 wordpress 插件上使用此代码来返回用户在 wordpress 媒体上传器中选择的图像的 src。

如果只有上传者屏幕返回的图像，此代码不返回图像src的问题。

jQuery代码：

```
window.send_to_editor = function(html) {
alert(html);
imgurlv = jQuery(html).find('img').attr('src');
alert(imgurlv);
     jQuery(targetfield3).val(imgurlv);
     tb_remove();
} 
```

例子：

上传者返回的代码是：

```
<a class="shutterset_" href='http://localhost/1/wp-content/gallery/bm/01.jpg' title=''><img src='http://localhost/1/wp-content/gallery/bm/thumbs/thumbs_01.jpg' alt='01' class='ngg-singlepic ngg-none' /></a> 
```

img src 是这样返回的：[http://localhost/1/wp-content/gallery/bm/thumbs/thumbs_01.jpg](http://localhost/1/wp-content/gallery/bm/thumbs/thumbs_01.jpg)

但是如果上传者返回的代码是这样的：

```
<img src='http://localhost/1/wp-content/gallery/bm/thumbs/thumbs_01.jpg' alt='01' class='ngg-singlepic ngg-none' /> 
```

jquery 代码返回**undefined**。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:40:45.000

你可以破解它：

```
imgurlv = jQuery("<div>" + html + "</div>").find('img').attr('src'); 
```

问题是，“查找”查看当前元素的*子*元素。在第二种情况下，`img`元素是顶级元素，因此它的子元素都没有`src`要查找的属性。

# php - 免费且易于使用的 PHP 库，用于绘制优雅的甘特图

> ID：10494508
> 
> 赞同：0
> 
> 时间：2012-05-08T07:34:36.063
> 
> 标签：php, html, gantt-chart

**用于绘制优雅甘特图**的最佳免费且**易于使用的**PHP 库是什么？我检查了[JpGraph](http://jpgraph.net/)，但也许还有其他好的选择可以考虑。例如，[pChart](http://www.pchart.net/)提供了很好的界面，但它似乎不允许创建甘特图。

# facebook - facebook 社交图 - 获取某个地区（国家/城镇）的事件

> ID：10494510
> 
> 赞同：1
> 
> 时间：2012-05-08T07:34:45.143
> 
> 标签：facebook, events, facebook-graph-api, social-graph

是否可以在没有 facebook 用户/页面的情况下从 facebook 获取选定城镇的所有事件？

# java - 添加源代码来构建路径？

> ID：10494511
> 
> 赞同：0
> 
> 时间：2012-05-08T07:34:50.167
> 
> 标签：java, eclipse

我下载了一个 API，但里面没有 jar 文件。它有包（文件夹）和源代码。我尝试在 Eclipse 中以各种方式添加它，但是当我在带下划线的红色类名上按 F2 时，我仍然没有得到“import ....”。我一直在 Eclipse 中添加项目和罐子，它已经工作了。由于这是源代码，我应该采取任何额外的步骤来使其工作吗？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:40:57.677

如果您可以使用源（.java 文件），您必须创建一个新的**源文件夹**，然后将源树（根包，例如文件夹`com`或`org`）复制到新的**源文件夹**中，只需使用标准文件资源管理器并复制和粘贴：

![在此处输入图像描述](../Images/cd59b3f863fa69cb479acab8af3c0570.png)

**编辑：**您也可以将源文件添加到现有的源文件夹中，但我会避免这样做。最好的解决方案是创建一个单独的 Java 项目，其中只包含外部库的源文件。您还需要适当的代码管理，以免意外更改外部源文件！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:39:45.637

您可以从 API 打包中收到的类创建 jar，并将该 jar 放入项目的类路径中

享受 ！！！

# objective-c - NSMutableString 不在指定位置插入字符串

> ID：10494520
> 
> 赞同：0
> 
> 时间：2012-05-08T07:35:39.540
> 
> 标签：objective-c

我有一个 NSString 对象“testtimeFrame”，我将其转换为 NSMutableString 对象“mutable”并执行 insertStringAtIndex 方法。我的 testtimeframe 值为 05-8-2012，我想在 8 之前插入“0”，但它显示为 80 08..

```
NSMutableString * mutable = [NSMutableString stringWithString:testtimeFrame];
[mutable insertString:@"0" atIndex:3];
NSLog(@"my day is:%@",mutable); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:38:51.210

是的，这是正确的行为。请记住，索引始终从 0 开始！

```
0: 0
1: 5
2: -
3: 8 
```

所以你的代码很好！我刚刚跑了：

```
NSMutableString * mutable = [NSMutableString stringWithString:@"05-8-2012"];
[mutable insertString:@"0" atIndex:3];
NSLog(@"my day is:%@",mutable); 
```

而且效果很好！

您可能有以下问题：`testtimeframe`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T07:38:17.667

显而易见的解决方案是给它一个索引 2 而不是 3。

也就是说，该`insertString:atIndex`方法的文档听起来像是您的原始代码应该可以工作：

> 新字符从 anIndex 开始，从 anIndex 到末尾的现有字符移动 aString 的长度。

由于 '8' 字符位于索引 3，听起来你的 0 应该被放置在那里并且 8 向右移动了一个位置，产生了所需的 '08'

# iphone - 在 PaintingView.m 之外更改 GLPaint 画笔大小

> ID：10494525
> 
> 赞同：0
> 
> 时间：2012-05-08T07:35:58.093
> 
> 标签：iphone, objective-c, ios, xcode, size

我需要在 PaintingView.m 视图之外更改 GLPaint 的画笔大小。我怎样才能做到这一点？我首先考虑使用 NSNotification 将值传输到 PaintingView.m 控制器 - 尽管从那里我不完全确定该怎么做，因为画笔大小是在 .h 文件中定义的？

如果可能的话，请提供一些想法和一个小例子。

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:47:05.403

Use `NSUserDefaults` For store size value of brush and pass this `NSUserDefaults` value in .m file. Now, you can change your NSUserDefaults value from anywhere in application and also in delegate file as well using Notification. So, Whatever size store in `NSUserDefaults` that will automatically come in .m file.

Hope, this may help you..

# sql - TSQL：字符串错误的日期时间

> ID：10494528
> 
> 赞同：0
> 
> 时间：2012-05-08T07:36:12.523
> 
> 标签：sql, string, tsql, sql-server-2005, datetime

有一些与此相关的帖子，但我对 TSQL 很陌生，所以我无法理解它们，所以请原谅。

我的程序有：

```
 BEGIN TRY

        INSERT INTO  dbo.myprocedure(
         Mydate

     )
     VALUES(
     CONVERT(DATETIME, @mydate, 102)
) 
```

如果我以这种方式执行它：

```
EXEC mydbo.dbo.myprocedure @mydate = 'May 8 2012 9:21AM' 
```

我收到此错误：从字符串转换日期时间时转换失败。

我该如何解决这个问题？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:42:55.203

如果您查看[CONVERT 的文档](http://msdn.microsoft.com/en-us/library/ms187928.aspx)，您会看到格式 102 是 ANSI 格式，或者`yyyy.mm.dd`. 所以传递一个日期`2012.05.08`应该是可行的。

它看起来像`2012.05.08 9:41`并且`2012.05.08 9:41AM`也会起作用，但这超出了记录的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:39:20.423

也许是这样的：

```
EXEC mydbo.dbo.myprocedure @mydate = '2012/05/08 09:21:00' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:41:12.753

更改`CONVERT(DATETIME, @mydate, 102)`为`CONVERT(DATETIME, @mydate, 100)`

要不就`CONVERT(DATETIME, @mydate)`

参考MSDN 上的[CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/aa226054.aspx) 和[http://www.sqlusa.com/bestpractices/datetimeconversion/](http://www.sqlusa.com/bestpractices/datetimeconversion/)

# c# - 在执行期间拦截进程

> ID：10494532
> 
> 赞同：0
> 
> 时间：2012-05-08T07:36:15.847
> 
> 标签：c#, winapi

我正在开发一个应用程序必须拦截一个进程并阻止它完全执行，直到验证用户凭据。我不知道去哪里或开始研究。

我知道这是可能的，因为 Kaspersky AntiVirus 有类似的东西 - 当您启动应用程序 A 时，它会检查应用程序 A 的白名单，如果找不到，它会停止执行并提示用户问题 - 仅当用户单击允许时，继续执行。

# javascript - 使用 Linqjs 和 Knockout 进行延迟加载

> ID：10494533
> 
> 赞同：1
> 
> 时间：2012-05-08T07:36:18.700
> 
> 标签：javascript, knockout.js

是否可以在淘汰数据绑定阶段使用 Enumerable？如果我首先执行 ToArray，我只能让它工作，这将消耗 Enumerable

[http://jsfiddle.net/xZmWx/](http://jsfiddle.net/xZmWx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:35:07.377

您可以编写自己的 foreach 变体来使用 Enumerables。

```
ko.bindingHandlers['foreach2'] = {
    makeTemplateValueAccessor: function(valueAccessor) {
        return function() {
            var bindingValue = ko.utils.unwrapObservable(valueAccessor());

            if (bindingValue instanceof Enumerable) {
                bindingValue = bindingValue.ToArray();
            }

            // If bindingValue is the array, just pass it on its own
            if ((!bindingValue) || typeof bindingValue.length == "number")
                return { 'foreach': bindingValue, 'templateEngine': ko.nativeTemplateEngine.instance };

            // If bindingValue.data is the array, preserve all relevant options
            return {
                'foreach': bindingValue['data'],
                'includeDestroyed': bindingValue['includeDestroyed'],
                'afterAdd': bindingValue['afterAdd'],
                'beforeRemove': bindingValue['beforeRemove'],
                'afterRender': bindingValue['afterRender'],
                'templateEngine': ko.nativeTemplateEngine.instance
            };
        };
    },
    'init': function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        return ko.bindingHandlers['template']['init'](element, ko.bindingHandlers['foreach2'].makeTemplateValueAccessor(valueAccessor));
    },
    'update': function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        return ko.bindingHandlers['template']['update'](element, ko.bindingHandlers['foreach2'].makeTemplateValueAccessor(valueAccessor), allBindingsAccessor, viewModel, bindingContext);
    }
}; 
```

[http://jsfiddle.net/madcapnmckay/QeEQg/](http://jsfiddle.net/madcapnmckay/QeEQg/)

希望这可以帮助。

# android - 如何使用 Eclipse 在图形布局中使用 android xml？

> ID：10494542
> 
> 赞同：0
> 
> 时间：2012-05-08T07:36:39.893
> 
> 标签：android, eclipse, android-layout

我有一台具有 4GB RAM 和双核 cpu 的 iMac，但是当我尝试使用 android xml 放置文本、图像、按钮并在相对布局中使用对齐时，它的工作速度非常慢，最后如果我工作一段时间，eclipse 正在崩溃错误提示 Java 堆空间不足。

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:57:57.120

我已经更改了 eclipse 可用的最大堆大小，但它会工作几分钟或一个小时，然后你会收到相同的错误消息。为此，请遵循以下说明：

1.  转到eclipse lanucer图标并右键单击并选择
2.  打开内容->MacOS->eclipse.ini
3.  将内存增加到合适的值。

请在以下链接中向 Eclipse 推荐如何增加堆内存： [http ://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)

它将向您显示一个示例 ini 文件。

Stil eclipse 遭受内存泄漏，但这只是一种解决方法。

# c# - System.Collections.Generic.List 之间的区别 .ToArray() 和 System.Linq.Enumerable.ToArray ()?

> ID：10494545
> 
> 赞同：3
> 
> 时间：2012-05-08T07:37:09.770
> 
> 标签：c#, wcf, linq, web-services, soap

我最近在使用某种网络方法时遇到了很大的问题：

`void CheckGfiHelpdesks(string ticket, GfiCheck[] newHelpdeskChecks, GfiCheck[] otherChecks)`

我一直在用这段代码调用该方法：

`List<GfiCheck> newFailedChecks = new List<GfiCheck>();`

`List<GfiCheck> otherFailedChecks = new List<GfiCheck>();`

`//do some work, create new GfiCheck items, fill the lists`

`Webclient.CheckGfiHelpdesks(Ticket, newFailedChecks.ToArray(), otherFailedChecks.ToArray());`

newFailedChecks 和 otherFailedChecks 是列表。当该方法作为 SOAP 服务在 IIS 上运行时，这一直运行良好。

但是，在我将完全相同的方法复制到 WCF 服务后，调用产生了“400 错误请求”异常。

最终我发现 .ToArray() 确实是问题所在。这：

`Webclient.CheckGfiHelpdesks(Ticket, newFailedChecks.ToArray<GfiCheck>(), otherFailedChecks.ToArray<GfiCheck>());`

即使用`System.Linq.Enumerable.ToArray<T>()`而不是`System.Collections.Generic.List<T>.ToArray()`最终解决了问题并且异常消失了。

这种差异的解释是什么？数组是数组，但显然不是？

确切的例外是：

> System.ServiceModel.ProtocolException
> 
> 远程服务器返回意外响应：(400) 错误请求。

堆栈跟踪：

> 服务器堆栈跟踪：
> 
> 在 System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse（HttpWebRequest 请求，HttpWebResponse 响应，HttpChannelFactory 工厂，WebException responseException，ChannelBinding 通道绑定）
> 
> 在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（时间跨度超时）
> 
> 在 System.ServiceModel.Channels.RequestChannel.Request（消息消息，TimeSpan 超时）
> 
> 在 System.ServiceModel.Dispatcher.RequestChannelBinder.Request（消息消息，TimeSpan 超时）
> 
> 在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）
> 
> 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime 操作)
> 
> 在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）

>

> 在 [0] 处重新抛出异常：
> 
> 在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage（IMessage reqMsg，IMessage retMsg）
> 
> 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke（MessageData& msgData，Int32 类型）
> 
> 在 MonitoringService.BL.CentronService.ICentronService.CheckGfiHelpdesks（字符串票证，GfiCheck[] newHelpdeskChecks，GfiCheck[] otherChecks）
> 
> 在 C:\Users\sohrm\documents\visual studio 2010\Projects\MonitoringService\MonitoringService.BL\Service References\CentronService 中的 MonitoringService.BL.CentronService.CentronServiceClient.CheckGfiHelpdesks(String ticket, GfiCheck[] newHelpdeskChecks, GfiCheck[] otherChecks) \Reference.cs:Zeile 5368。
> 
> 在 C:\Users\sohrm\documents\visual studio 2010\Projects\MonitoringService\MonitoringService.BL\ConnectorBL.cs:Zeile 120 中的 MonitoringService.BL.ConnectorBL.CheckHelpdesks(List`1 clients)。
> 
> 在 C:\Users\sohrm\documents\visual studio 2010\Projects\MonitoringService\MonitoringService.Client\MainForm.cs:Zeile 124 中的 MonitoringService.WinForm.MainForm.LoadChecks()。
> 
> 在 C:\Users\sohrm\documents\visual studio 2010\Projects\MonitoringService\MonitoringService.Client\MainForm.cs:Zeile 114 中的 MonitoringService.WinForm.MainForm.btnLoad_Click(Object sender, EventArgs e)。
> 
> 在 System.Windows.Forms.Control.OnClick(EventArgs e)
> 
> 在 DevExpress.XtraEditors.BaseButton.OnClick(EventArgs e)
> 
> 在 DevExpress.XtraEditors.BaseButton.OnMouseUp(MouseEventArgs e)
> 
> 在 System.Windows.Forms.Control.WmMouseUp（消息和 m，MouseButtons 按钮，Int32 点击）
> 
> 在 System.Windows.Forms.Control.WndProc（消息和 m）
> 
> 在 DevExpress.Utils.Controls.ControlBase.WndProc（消息和 m）
> 
> 在 DevExpress.XtraEditors.BaseControl.WndProc（消息和消息）
> 
> 在 System.Windows.Forms.Control.ControlNativeWindow.OnMessage（消息& m）
> 
> 在 System.Windows.Forms.Control.ControlNativeWindow.WndProc（消息和 m）
> 
> 在 System.Windows.Forms.NativeWindow.DebuggableCallback（IntPtr hWnd，Int32 msg，IntPtr wparam，IntPtr lparam）
> 
> 在 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW（味精和味精）
> 
> 在 System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop（IntPtr dwComponentID，Int32 原因，Int32 pvLoopData）
> 
> 在 System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner（Int32 原因，ApplicationContext 上下文）
> 
> 在 System.Windows.Forms.Application.ThreadContext.RunMessageLoop（Int32 原因，ApplicationContext 上下文）
> 
> 在 System.Windows.Forms.Application.Run（窗体 mainForm）
> 
> 在 C:\Users\sohrm\documents\visual studio 2010\Projects\MonitoringService\MonitoringService.Client\Program.cs:Zeile 22 中的 MonitoringService.WinForm.Program.Main()。
> 
> 在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
> 
> 在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，证据 assemblySecurity，String [] args）
> 
> 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> 
> 在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
> 
> 在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔 ignoreSyncCtx）
> 
> 在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
> 
> 在 System.Threading.ThreadHelper.ThreadStart()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:24:09.377

`System.Collections.Generic.List<T>.ToArray()`和之间应该没有区别`System.Linq.Enumerable.ToArray<T>()`。让我们看看里面发生了什么：

[`System.Collections.Generic.List<T>`](http://msdn.microsoft.com/en-us/library/x303t819%28v=vs.95%29.aspx)只需创建新数组并将内部项目数组复制到它：

```
public T[] ToArray()
{
    T[] destinationArray = new T[this._size];
    Array.Copy(this._items, 0, destinationArray, 0, this._size);
    return destinationArray;
} 
```

[`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)无法访问列表的内部项目数组，因此它通过缓冲区创建数组：

```
public static TSource[] ToArray<TSource>(this IEnumerable<TSource> source)
{
    if (source == null)    
        throw Error.ArgumentNull("source");

    Buffer<TSource> buffer = new Buffer<TSource>(source);
    return buffer.ToArray();
} 
```

缓冲区内会发生什么？`List<T>`是一个`ICollection<T>`因此它只是调用`CopyTo`实现`List<T>`：

```
internal Buffer(IEnumerable<TElement> source)
{
   TElement[] array = null;
   ICollection<TElement> is2 = source as ICollection<TElement>;
   length = is2.Count;
   if (length > 0)
   {
       array = new TElement[length];
       // implemented as Array.Copy(this._items, 0, array, 0, this._size);
       is2.CopyTo(array, 0);
   }

   this.items = array;
   this.count = length;
} 
```

如您所见，项目通过列表的方法 CopyTo 复制到新数组中，该方法与 ToArray 方法中的操作完全相同。但是`System.Linq.Enumerable`你有一个小缺点 - 将列表项复制到缓冲区后，创建另一个数组，并将缓冲区中的项复制到该数组：

```
internal TElement[] ToArray()
{
   if (this.count == 0)        
       return new TElement[0];

   if (this.items.Length == this.count)        
       return this.items;

   TElement[] destinationArray = new TElement[this.count];
   Array.Copy(this.items, 0, destinationArray, 0, this.count);
   return destinationArray;
} 
```

因此，在这两种情况下，列表中的项目都通过相同的方法复制到新数组`Array.Copy`。但如果`Enumerable`这种情况发生两次。如果我`ToArray`处理`List`.

# batch-file - 如何根据程序的输出创建目录并将文件复制到其中

> ID：10494547
> 
> 赞同：0
> 
> 时间：2012-05-08T07:37:31.787
> 
> 标签：batch-file

我正在尝试执行以下操作，Verify.exe 爬取目录结构并一一检查文件是否存在任何缺陷。文件作为命令行参数传递给 verify.exe。如果在文件中发现任何缺陷，它会打印一个错误代码（一行字符串）。如果文件是合法的，则不会打印任何内容。我想为每个错误代码创建一个文件夹，并将错误文件复制到该文件夹​​中，以便查看它。如果文件没有错误，则什么也不做。

需要检查的文件位于 D:\Test\docs\r1 - 出于测试目的，我在 D:\Test\docs\r1 中只有一个文件。

```
::@echo off
CD D:\Test\doc\r1\
FOR /R %%a IN (*) DO (
 ECHO %%a
 FOR /F %%b IN ('D:\Test\doc\Verify.exe /i:"%%a"') do SET MyVAR=%%b
 IF NOT "%MyVAR%" == "" (
  ECHO "IF one"
  IF EXIST D:\Test\doc\%MyVAR% (
  ECHO "IF two"
  MD D:\Test\doc\%MyVAR%
  )
  COPY %%a D:\Test\doc\%MyVAR%
 )
 SET MyVAR=
 ECHO "------------------------"
) 
```

我在命令行上得到以下回声。

```
D:\Test\doc>CD D:\Test\doc\r1\

D:\Test\doc\r1>FOR /R %a IN (*) DO (
ECHO %a
 FOR /F %b IN ('D:\Test\doc\Verify.exe /i:"%a"') do SET MyVAR=%b
 IF NOT "" == "" (
ECHO "IF one"
 IF EXIST D:\Test\doc\ (
ECHO "IF two"
 MD D:\Test\doc\
)
 COPY %a D:\Test\doc\
)
 SET MyVAR=
 ECHO "------------------------"
)

D:\Test\doc\r1>(
ECHO D:\Test\doc\r1\A5 Incident Management.doc
 FOR /F %b IN ('D:\Test\doc\Verify.exe /i:"D:\Test\doc\r1\A5 Incident Management.doc"') do SET MyVAR=%b
 IF NOT "" == "" (
ECHO "IF one"
 IF EXIST D:\Test\doc\ (
ECHO "IF two"
 MD D:\Test\doc\
)
 COPY D:\Test\doc\r1\A5 Incident Management.doc D:\Test\doc\
)
 SET MyVAR=
 ECHO "------------------------"
)
D:\Test\doc\r1\A5 Incident Management.doc

D:\Test\doc\r1>SET MyVAR=0x8004170b
"------------------------"
D:\Test\doc\r1> 
```

有人可以帮我解决以下问题..

*   循环已经运行了 3 次
*   没有创建文件夹
*   将 exe 命令行输出分配给 MyVar 似乎存在问题

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:35:44.937

假设您的`verify.exe`命令的输出是正确的，您可能应该**启用延迟扩展**（在批处理文件的顶部）：

```
SETLOCAL ENABLEDELAYEDEXPANSION 
```

并使用`!`循环中使用的变量的语法（替换`%MYVAR%`为`!MYVAR!`）

否则，在 for 循环中，`%MYVAR%`仅在第一次运行之前评估（没有定义值）。

# oracle - “sqlplus /”如何工作

> ID：10494550
> 
> 赞同：2
> 
> 时间：2012-05-08T07:37:42.270
> 
> 标签：oracle, unix, sqlplus

我想知道 sqlplus 如何在连接语句“sqlplus /”中获取用户名和密码。

如果我想用不同的用户连接“sqlplus /”，我该如何更改配置。它可能看起来很尴尬，但在我的脚本中“sqlplus /”是硬编码的，我们无法更改它。只是我想使用相同的命令与不同的用户联系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:50:44.047

从 Oracle 文档：

> /
> 
> 表示使用操作系统身份验证的默认登录。在默认登录中，SQL*Plus 通常会尝试使用用户名 OPS$name 让您登录，其中 name 是您的操作系统用户名。请注意，前缀“OPS$”可以设置为任何其他文本字符串。
> 
> 例如，您可能希望将 INIT.ORA 参数文件中的设置更改为 LOGONname 或 USERIDname。有关操作系统身份验证的信息，请参阅 Oracle9i 数据库管理员指南。

因此，它使用您的操作系统详细信息来构建您的 Oracle 用户名，这意味着您可能无法设置任意名称。

用于指定前缀的 Oracle 初始化参数是[`OS_AUTHENT_PREFIX`](http://docs.oracle.com/cd/B12037_01/server.101/b10755/initparams147.htm)及其默认值 id `OPS$`。

如果您无法更改调用 sqlplus 的脚本，您*可以*做的一件事是在 Oracle 脚本之前的路径中插入您*自己的sqlplus 脚本，如下所示（未彻底测试）：*

```
#!/bin/bash
if [[ "$1" != "/" ]] ; then
    $ORACLE_HOME/bin/sqlplus "$@"
    exit
fi
shift
$ORACLE_HOME/bin/sqlplus $MY_ORA_USER/$MY_ORA_PWD "$@" 
```

这将是您的脚本调用的那个，它会检查第一个参数以查看它是否是简单的`/`. 如果不是，它将`sqlplus`使用相同的参数调用真实的。

否则，它将替换为由环境变量`/`形成的用户/密码。`MY_ORA_*`

# android - NullPointerException“在 com.jayway.android.robotium.solo.ViewFetcher.getNonDecorViews”

> ID：10494554
> 
> 赞同：1
> 
> 时间：2012-05-08T07:38:12.287
> 
> 标签：android, junit

我在 Junit 中遇到了这个问题。我创建了一个引用 Library 项目的 Android 应用程序。我编写了一个在 Android 应用程序项目上运行的 Android 测试项目。

运行测试用例时出现以下错误：

> ```
> java.lang.NullPointerException
> at com.jayway.android.robotium.solo.ViewFetcher.getNonDecorViews(ViewFetcher.java:188)
> at com.jayway.android.robotium.solo.ViewFetcher.getAllViews(ViewFetcher.java:112)
> at com.jayway.android.robotium.solo.Waiter.clickableItemsExist(Waiter.java:164)
> at com.jayway.android.robotium.solo.Waiter.waitForClickableItems(Waiter.java:150)
> at com.jayway.android.robotium.solo.Solo.clickOnView(Solo.java:787)
> at com.mycompany.myproject.test.LoginActivityInstrumentation.enterSessionPin(LoginActivityInstrumentation.java:149)
> com.mycompany.myproject.test.LoginActivityTest.testEnterButtonCase1(LoginActivityTest.java:174)
> at java.lang.reflect.Method.invokeNative(Native Method)
> at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
> at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
> at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186)
> at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
> at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
> at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
> at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551) 
> ```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:53:24.807

将 robots.jar 更新到 3.2.1 后得到修复

# c# - 带有部分 POCO 类的 ObjectContext.ExecuteStoreQuery 抛出 System.IndexOutOfRangeException

> ID：10494559
> 
> 赞同：2
> 
> 时间：2012-05-08T07:38:28.607
> 
> 标签：c#, entity-framework

我从事一个使用 Entity Framework 4.0 进行数据访问的项目。除了“正常”用法外，我们还使用它通过调用存储过程的 ObjectContext.ExecuteStoreQuery 检索 POCO 类。POCO 类是部分的，并且具有数据库中不存在的属性。这会导致 ExecuteStoreQuery 为每个找不到的属性引发 System.IndexOutOfRangeException。异常由 CLR 在内部处理，但它一直在发生，它让一切都慢下来。我尝试切换到 EF 4.1 并在数据库中不存在的属性上使用 [NotMapped] 属性，但同样的事情发生了。

有没有办法避免这种情况？（由于项目处于最后阶段，主要的架构更改并不是一个真正的选择）

# c# - ObjectListView FormatRow 闪烁

> ID：10494560
> 
> 赞同：2
> 
> 时间：2012-05-08T07:38:30.317
> 
> 标签：c#, winforms, devexpress, objectlistview

我在显示`TabPage`许多控件时遇到了问题 - 加载（更改`SelectedTabPage`）时显示第一个控件和最后一个控件之间的时间太长，而且看起来很糟糕。我尝试使用双缓冲，但没有帮助。我已将所有控件放在一个中，`UserControl`希望它能以某种方式帮助加载控件。最后为了防止它，我使用了我在stackoverflow上找到的方法：

```
 protected override CreateParams CreateParams
 {
   get
    {
       CreateParams cp = base.CreateParams;
       cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
       return cp;
    }
 } 
```

它解决了我的问题，但不幸的是导致了另一个问题。现在将鼠标光标从 objectListView 移动到 Devexpress.xtraTabPage（或从 xtraTabPage 到 OLV）会导致`ObjectListView.FormatRow`闪烁（`backColor`,`FrontColor`等`strikeout`消失一毫秒）

所以这是我的问题。有什么办法可以阻止这种奇怪的闪烁吗？或者也许还有其他方法可以一次显示 userControl 中的所有控件？

在`UserControl`(Controls from `Devexpress`: a few `TextEdits`, `xtraTabControl`, some `CheckEdits`, `RadioButtons`, date and `TimeEdits`, `BrightIdeasSoftware.ObjectListView`and 3中加载控件`LookUpEdits`。加载`LookUpEdits`弹出窗口时会显示另外使它看起来很糟糕的原因。

# java - 哪个性能更好： test != null 或 null != test

> ID：10494563
> 
> 赞同：13
> 
> 时间：2012-05-08T07:38:41.147
> 
> 标签：java, null

考虑以下两行代码

```
if (test ! = null) 
```

和

```
if (null != test) 
```

在性能方面，上述两个陈述有什么区别吗？我见过很多人使用后者，当被问到时，他们说这是没有充分理由的最佳实践。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-08T07:41:54.500

没有不同。

第二个仅仅是因为 C/C++ 程序员总是做赋值而不是比较。

例如

```
// no compiler complaint at all for C/C++
// while in Java, this is illegal.
if(a = 2) {
}
// this is illegal in C/C++
// and thus become best practice, from C/C++ which is not applicable to Java at all.
if(2 = a) {
} 
```

而java编译器会产生编译错误。

所以我个人更喜欢第一个，因为可读性，人们倾向于从左到右阅读，`if test is not equal to null`而不是`null is not equal to test`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-08T07:41:56.447

它们完全相同。使用 equals 时，第二个是有意义的：

```
if("bla".equals(test)) 
```

永远不能抛出一个`NullPointerException`while：

```
if(test.equals("bla")) 
```

能够。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T07:41:28.540

没有性能差异，但我个人觉得第二个令人困惑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T07:41:18.230

第二个对我来说就像“尤达条件”，即`if(2 == x) ...`可读性要差得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T07:41:51.613

最好的做法是避免大多数现代 IDE 会出现的一些基本错字，因为有时您想在不为空的更复杂类型之间进行比较，最终导致意外分配。所以模式保持不变，但我从未见过这与性能有关，也从未见过它生成特殊的字节码。

这个想法是首先获得静态的已知值，因此在执行比较时不能抛出任何奇怪的异常。

不过，这两种方法都不是“更正确”，因此完全由您决定要使用什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T07:42:01.520

没有区别。但是在第二种方式中，您可以避免像`test = null`. 因为第二种方式你会得到编译器错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T07:43:56.150

使用后者不是最佳实践。两者是等价的，但前者更容易阅读。

这种“最佳实践”来自不存在布尔值的 C 语言。而是使用整数，`if (foo = 1)`这不是语法错误，而是与`if (foo == 1)`.

在 Java 中，if 中只能包含布尔表达式，这种做法没有多大意义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T08:04:10.743

两种形式之间没有真正的不同。没有性能问题，但有以下注意事项：

*   第一种形式对于代码阅读器是可读的，因为人们通常从左到右阅读代码。
*   第二种形式更适合代码编写者，因为在 java`=`中，运算符用于赋值，`==`运算符用于等效测试，但人们通常使用 in`if`语句`=`而不是，因为 null 不能在赋值语句中使用，因此`==`第二种方法开发人员会得到。`Compile-Time-Error``Left-Side`

# java - 按下后退按钮会话不会破坏

> ID：10494571
> 
> 赞同：2
> 
> 时间：2012-05-08T07:39:27.810
> 
> 标签：java, spring, hibernate, jsp, session

我面临一个奇怪的问题。我的注销代码如下：

```
@RequestMapping(value = "/logout", method = RequestMethod.GET)
    public String thanks(HttpSession session) {
        session.removeAttribute("parentEmail");
        session.invalidate();
        return "redirect:parent-login";
    } 
```

但注销后我得到链接`/logout?email=xyz@xyz.com`

所以当我在最后访问的页面上再次按下返回按钮时，可以更新数据。电子邮件我已设置为会话属性。

谁能告诉我为什么会得到这个网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:52:56.447

> 默认情况下，所有模型属性都被视为在重定向 URL 中作为 URI 模板变量公开。在剩余的属性中，那些是原始类型或原始类型的集合/数组的属性会自动附加为查询参数。

使用 redirectAttributes.addAttribute() 附加所需的查询参数。您还应该通过将该对象设置为 null model.addAttribute("parentLogin",null); 来使 ModelMap 中的任何与身份验证相关的对象无效。

所以你的方法应该是这样的：

```
 @RequestMapping(value = "/logout", method = RequestMethod.GET)
public String thanks(Model model,RedirectAttributes redirectAttributes,HttpSession session) {
 redirectAttributes.addAttribute("logout", "1234");
 model.addAttribute("parentLogin",null);
 session.removeAttribute("parentEmail");
 session.invalidate();
 return "redirect:parent-login";
} 
```

# php - 在 PHP 中的 CURDATE() 函数上添加天数

> ID：10494572
> 
> 赞同：0
> 
> 时间：2012-05-08T07:39:32.130
> 
> 标签：php

我目前正在尝试在 PHP 中为当前日期函数添加天数，但我不确定如何。下面是我的代码..

```
function due(){
    $it=$_POST['item_name'];
    $ab="select duration from item where item_name='$it'";
    $cd=mysql_query($ab);

    while($mn=mysql_fetch_array($cd)) {
        $interval=$_POST['duration'];
        $due='DATE_ADD(CURDATE(),INTERVAL'.$interval.'DAYS )';

        $gh=$_POST['request_name'];
        $ij=$_POST['requestid'];
        $ef="insert into request (due_date) values ('$due') where request_name='$gh' && requestid='$ij'";
        $kl=mysql_query($ef);
    }
} 
```

DURATION 是我想添加到当前日期的天数

***我会进一步阐述我的问题

DURATION 被插入到一个表 (TBL_A) CURDATE() 值被插入到另一个表 (TBL_B)

我会使用 FUNCTION DUE() 来选择 DURATION 并添加到 CURDATE() 因为 DUE_DATE DUE_DATE 被插入到 TBL_B

DURATION 因 TBL_A 中的 item_name 而异

在另一个程序中选择了 DUE_DATE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:46:33.830

You use `DATE_ADD(CURDATE(), INTERVAL X DAY)` (not DAYS)

*from the MYSQL reference website. Check the docs!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:54:06.990

如果你想使用 php，最简单的方法是使用 mktime

mktime ([ int $hour = date("H") [, int $minute = date("i") [, int $second = date("s") [, int $month = date("n") [ , int $day = date("j") [, int $year = date("Y") [, int $is_dst = -1 ]]]]]]])

它将类似于 date("Ymd", mktime(0,0,0,date('m'), date('j')+$neededamountofdays), date('Y'));

# javascript - Javascript if 语句与比较

> ID：10494573
> 
> 赞同：3
> 
> 时间：2012-05-08T07:39:39.493
> 
> 标签：javascript

在 if 语句中 JavaScript 将条件包装成布尔值是真的吗？

```
if(x) => if(Boolean(x)) 
```

在比较中，JavaScript 将比较元素包装成一个数字是真的吗？

```
a == b => Number(a) == Number(b) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:47:28.277

是的，不。

对于第一部分，**是**的，这基本上就是 javascript 所做的。

但对于后者，**没有**。并非 JavaScript 中的所有内容都可以转换为数字。例如：

```
Number('abc') // => NaN 
```

并且 Not-A-Numbers 不相等：

```
NaN == NaN // => false 
```

所以是这样的：

```
Number('abc') == Number('abc') // => false! 
```

但这实际上是平等比较的。

```
'abc' == 'abc' // => true 
```

**作为旁注**`===`，在 JavaScript中使用可能会更好，它还会检查被比较的值的类型：

```
0 == '0' // => true
0 === '0' // => false, because integer is not a string 
```

更多细节`===`可以[在这里阅读](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:49:20.080

1.  是的，这是真的，`x`在这种情况下在布尔上下文中进行评估，因此`Boolean(x)`应用了等效项。

2.  不，那不是真的。它看起来只是这样，因为[强制相等运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators) `==`试图将`a`and转换`b`为相同的类型。`Number()`仅当其中一个`a`或`b`已经是`Number`. 例如：

* * *

```
>>> 0x2A == 42
true   // both 'a' and 'b' are numbers.

>>> "0x2A" == 42
true   // 'a' is a string whose number coercion is equal to 'b'.

>>> "0x2A" == "42"
false  // 'a' and 'b' are different strings. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T08:08:35.397

> 在 if 语句中 JavaScript 将条件包装成布尔值是真的吗？

*通常*是的。

> 在比较中，JavaScript 将比较元素包装成一个数字是真的吗？

*绝对*没有。

## 解释

来自[JavaScript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)。

该`if`声明在**第 12.5 节**中定义为：

> if ( 表达式 ) 语句 else 语句

它说*表达式*将被评估，转换，`GetValue()`然后在`ToBoolean()`转换后进行测试。

然后第**一个断言为真**（但见下文），`if`语句的条件被评估为作为参数传递给`Boolean`函数。请回想一下 JavaScript 如何处理类型转换为布尔值（**第 9.2 节**）：

*   `undefined`并将`null`值转换为`false`.
*   数字转换为`false`if ±0`NaN`否则它们将转换为`true`.
*   如果为空，则字符串将转换为`false`，否则始终转换为`true`无论其内容。
*   对象总是转换为`true`.

因为调用`GetValue()`严格来说这个断言并不*总是*正确的，请看一下标准描述如何工作的**第 8.7.1 节**，这里可能会在调用之前`GetValue()`发生一些*神奇*的转换。`ToBoolean()`

运算符的`==`定义见**第 11.9.3 节**。
正如您所看到的，它没有指定操作数必须是（或将被视为）数字，运算符的行为是不同的，并受一系列基于操作数类型的规则的约束。那么你的**第二个断言是 false**。它们是数字的情况（或其中一个是数字）只是算法中的一种特殊情况，请注意，在算法的第 4 点，它表示如果其中一个是数字而另一个是字符串然后它将被转换为`ToNumber()`，仅在这种情况下（具有此转换的所有含义）。

如果您认为可以比较函数、字符串或数字，这很直观，并非每种类型都可以转换为数值。

# javascript - 表单数据和请求有效负载有什么区别？

> ID：10494574
> 
> 赞同：44
> 
> 时间：2012-05-08T07:39:40.900
> 
> 标签：javascript, jquery, ajax

当我在 send() 方法中发送 AJAX Post 请求并在 queryString 中发送参数时，

Chrome Developer Tool 的 XHR 捕获工具会显示请求负载下的参数。当我使用 jquery 的 post 函数时，该工具在表单数据部分下显示参数。

有什么不同 ？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-08T09:55:01.970

您没有提供足够的信息如何使用发送功能，但我假设您没有设置 mime 类型来指定您正在发送表单数据

```
xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
```

在这种情况下，发送的数据在您对查询字符串进行编码时进行编码

```
xhr.send("name=foo&value=bar"); 
```

否则它不会被开发者工具解释为表单数据。

jquery 在这方面为您完成了大部分工作。

**更新：**明确回答有什么区别......

*   如果一个请求（通常是 POST）将`Content-type`标头设置为`application/x-www-form-urlencoded`正文，则预计将采用标准查询字符串的形式，其中 url 编码的*键值*`=`*对*由`&`. **表单数据**部分然后显示键值参数（当查看解析时）。这种方式在过去更为常见，因为它是 HTML 表单的默认设置。

*   其他情况显示在**请求有效负载**部分（现在为了可读性以及 JSON 等常见格式进行了解析）。

# php - 从 $_SESSION 获取 var 会引发错误

> ID：10494576
> 
> 赞同：0
> 
> 时间：2012-05-08T07:39:46.547
> 
> 标签：php

在传递`$_SESSION['var']`给函数时，如果`$_SESSION['var']`未设置，我会收到通知：

```
Notice: Undefined index: var in scripname.php on line 49 
```

有没有更安全的方法来获取，如果未设置`$_SESSION['var']`，这会给我吗？`0``$_SESSION['var']`

先感谢您！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:41:48.813

```
$var = isset($_SESSION['var']) ? $_SESSION['var'] : 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T08:01:05.553

```
if (isset($_SESSION['var']))
{
    echo "session is set";
}
else
{
    echo "session is not set";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:41:40.723

```
if (isset($_SESSION['var'])){
    // Do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:41:51.580

```
if(!array_key_exists('var',$_SESSION))
{
    $var = 0;
}
else
{
    $var = $_SESSION['var'];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T07:42:04.203

采用

```
if(isset($_SESSION['var']))
    // do 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T07:51:28.367

怎么样：

```
$var = @$_SESSION['var']; 
```

# netty - 带有 netty OIO 的每个通道模型的单线程

> ID：10494578
> 
> 赞同：0
> 
> 时间：2012-05-08T07:39:54.517
> 
> 标签：netty

使用 Netty OIO 的每通道单线程模型是否意味着一次可以在单个通道上执行写入或读取操作？我正在编写具有少量连接（~20）的分布式应用程序，并且我正在考虑使用 Netty OIO。但是，当相应的工作线程被写入阻塞时，不要在某个通道上接收消息时阻塞对我来说非常重要？有没有办法用 Netty OIO 实现这一点，即我可以有一个线程在一个通道上写入，一个线程在同一个通道上读取吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:10:46.887

在 OIO 中，写入永远不会被读取阻塞。因此，您可以在等待数据接收时将内容写入 Channel。

# html - 如何在 playframework2.0 中发布外部引用

> ID：10494580
> 
> 赞同：0
> 
> 时间：2012-05-08T07:40:21.180
> 
> 标签：html, playframework, playframework-2.0

我有一个学校项目，我想为此开发一个类似于（但简化）reddit 的 Web 应用程序。[reddit](http://www.reddit.com/)我的问题是我似乎无法发布指向 localhost:9000/ 之外的引用/超链接。下例模具中的所有标签都被更改，从而指向 localhost:9000/www.google.ro 。

```
<!-- language: html -->
<a href="www.google.ro"> Go to google </a> 
```

所有超链接都是相对的。我该如何解决这个问题？基本上，阻止解释器修改我的超链接？

很抱歉格式不好。这是我在这里的第一篇文章:)。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:10:57.603

写`<a href="http://www.google.ro">Go to google</a>`

# java - FindClass("..","[I") 做什么？

> ID：10494581
> 
> 赞同：1
> 
> 时间：2012-05-08T07:40:31.223
> 
> 标签：java, c, java-native-interface

我遇到了以下片段：

```
jobjectArray result;
 int i;
 jclass intArrCls = (*env)->FindClass(env,"[I"); // will return an array class
 if(intArrCls == NULL) {
     return NULL;
 }
 result = (*env)->NewObjectArray(env,size,intArrCls,NULL); 
```

在上面的代码片段中，`(*env)->FindClass(env,"[I")`返回了什么？表示什么`"[I"`？我检查了 DOCS 但不明白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:42:53.733

> *表示什么`"[I"`？*

`[I`是 type 的字节码表示法`int[]`。

除其他地方外，这在此处记录：[`Class.getName()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getName%28%29)

# winapi - 在大型数组上使用 VirtualAlloc 保留与提交+保留内存的好处

> ID：10494588
> 
> 赞同：5
> 
> 时间：2012-05-08T07:41:02.250
> 
> 标签：winapi, memory-management, virtual-memory, virtualalloc

我正在编写一个 C++ 程序，它基本上适用于非常大的数组。在 Windows 上，我使用 VirtualAlloc 为我的数组分配内存。现在我完全理解了使用 VirutalAlloc 保留和提交内存的区别；但是，我想知道将内存逐页提交到保留区域是否有任何好处。特别是，MSDN ( [http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx) ) 包含对 MEM_COMMIT 选项的以下解释：

除非/直到实际访问虚拟地址，否则不会分配实际的物理页面。

我的实验证实了这一点：我可以保留和提交几 GB 的内存，而不会增加我的进程的内存使用量（如任务管理器中所示）；只有当我实际访问内存时才会分配实际内存。

现在我看到了很多例子，他们认为应该保留大部分地址空间，然后逐页提交内存（或在一些更大的块中，取决于应用程序的逻辑）。然而，正如上面所解释的，在访问内存之前似乎并没有提交内存。因此，我想知道逐页提交内存是否有任何真正的好处。事实上，由于许多系统调用实际提交内存，逐页提交内存实际上可能会减慢我的程序速度。如果我一次提交整个区域，我只需支付一个系统调用，但内核似乎足够聪明，实际上只分配我实际使用的内存。

如果有人能向我解释哪种策略更好，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T23:50:13.703

不同之处在于提交“支持”页面文件的内存。举个例子：

1.  给定 2GB 的物理内存和 2GB 的交换空间（为此假设固定大小的交换空间）。
2.  预留 6GB - 好的。
3.  提交第一个 2GB - 好的。
4.  提交剩余的 4GB - 失败。
5.  将交换文件扩展至 8GB
6.  提交剩余的 4GB - 成功。

使用 MEM_COMMIT 的原因主要是为了抑制运行时错误（应用程序稳定性）。如果您有一个按需提交页面的进程，那么如果它超过可用的内存+交换量，那么在提交过程中总是有可能失败。当内存由页面文件支持时，您就可以*有力*地保证内存从现在到您释放它为止都可以使用。

选择一种方式有很多原因，我认为没有任何完美的科学可以决定哪种方式。**仅在非常大的稀疏数组场景中才需要**MEM_RESERVE ，例如：最多具有 25-33% 利用率的多千兆字节数组（一种用于加速哈希表的流行技术等）。

几乎所有其他东西都是灰色区域，您可能会采取任何一种方式——预先 MEM_COMMIT 将使您自己的应用程序更加稳定，并且基本上将其优先于物理内存，而不是可能按需分配的竞争应用程序。（如果您先抓住内存，那么当物理内存耗尽时，您的应用程序将是最后一个存在）同时，如果您实际上并没有使用所有内存，那么您最终可能会限制您的多任务处理潜力客户端的机器或通过不断增长的页面文件造成不必要的磁盘空间浪费。

# javascript - 性能问题 KineticJS

> ID：10494589
> 
> 赞同：2
> 
> 时间：2012-05-08T07:41:05.263
> 
> 标签：javascript, canvas, kineticjs

我对画布很陌生，所以我需要一些输入。

我不想用它的股票创建一个图书馆概览，所以我必须处理大约 2k+ 个矩形。问题是，拖动和缩放的性能不是很好，fps 下降到 10 以下。这很丑陋，所以我希望能提供一些输入，做什么更好或以其他方式提高我的（基本）脚本的性能.

[http://jsfiddle.net/kHGvh/13/embedded/result/](http://jsfiddle.net/kHGvh/13/embedded/result/)
[http://jsfiddle.net/kHGvh/13/](http://jsfiddle.net/kHGvh/13/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:26:19.777

出于好奇，我只是使用[Fabric.js尝试了同样的事情。](http://fabricjs.com)

我确实看到了明显更好的性能[——http://jsfiddle.net/M7n4p/](http://jsfiddle.net/M7n4p/)

请注意，我使用的是实验性“group_rewrite”分支 — [https://github.com/kangax/fabric.js/branches](https://github.com/kangax/fabric.js/branches)

FWIW，这是用于创建它的代码（只是为了让您与 Kinetic.js 进行比较）。

标记：

```
<canvas id="c" width="1200" height="600" style="border:1px solid #ccc"></canvas> 
```

JS：

```
var canvas = new fabric.Canvas('c');

var rects = [ ];
for (var i = 1; i <= 47; i++) {
  for (var j = 1; j <= 42; j++) {
    var rect = new fabric.Rect({
      left: i*28,
      top: j*18,
      width: 20,
      height: 10,
      fill: 'green'
    });
    rects.push(rect);
  }
}

canvas.add(new fabric.Group(rects)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:50:27.180

创建可拖动网格时，我也遇到了同样的问题。但是，我认为对此几乎没有人可以做。

您可以考虑减少您拥有的细胞数量。2k+ 个矩形是至少 2k+ 个在画布上跟踪形状的对象。拖动事件每秒至少发生 10 帧，您每秒有 20k+ 次计算和对象访问！它引起问题的形状的剪切数量。

# linux - Linux：写入被分成 512K 块

> ID：10494593
> 
> 赞同：5
> 
> 时间：2012-05-08T07:41:16.450
> 
> 标签：linux, linux-kernel, kernel, block, scsi

我有一个生成大量 SCSI 写入的用户空间应用程序（详情如下）。但是，当我查看到达 SCSI 目标的 SCSI 命令（即存储，由 FC 连接）时，某些东西会将这些写入分成 512K 块。

该应用程序基本上直接将 1M 大小的直接写入设备：

```
fd = open("/dev/sdab", ..|O_DIRECT);
write(fd, ..., 1024 * 1024); 
```

此代码导致发送两个 SCSI WRITE，每个 512K。

但是，如果我发出直接 SCSI 命令，没有块层，写入不会拆分。我从命令行发出以下命令：

```
sg_dd bs=1M count=1 blk_sgio=1 if=/dev/urandom of=/dev/sdab oflag=direct 
```

我可以看到一个 1M 大小的 SCSI WRITE。

问题是，什么是拆分写入，更重要的是，它是否可配置？Linux 块层似乎是有罪的（因为 SG_IO 没有通过它）并且 512K 似乎太随意了，不是某种可配置的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-12-19T04:26:27.720

如对[“为什么我的 IO 请求的大小被限制为大约 512K” Unix 和 Linux 堆栈交换问题的回答以及内核块层的“](https://unix.stackexchange.com/q/529529/109111)[当 2MB 变成 512KB](https://kernel.dk/when-2mb-turns-into-512k.pdf) ”文档的“设备限制”部分中所述维护者 Jens Axboe，这可能是因为您的设备和内核有大小限制（在 中可见`/sys/block/<disk>/queue/`）：

*   `max_hw_sectors_kb`硬件可以接受的单个 I/O 的最大大小
*   `max_sectors_kb`块层将发送的最大大小
*   `max_segment_size`以及`max_segments`DMA 引擎对分散聚集 (SG) I/O 的限制（每个段的最大大小和单个 I/O 的最大段数）

当 I/O 来自的缓冲区不连续时，段限制很重要，在最坏的情况下，每个段可以小到页面（在 x86 平台上为 4096 字节）。这意味着一个 I/O 的 SG I/O 可以限制为 4096 * 的大小`max_segments`。

> 问题是，什么是分裂写

正如您猜到的那样，Linux 块层。

> 而且，更重要的是，它是否可配置？

您可以摆弄，`max_sectors_kb`但其余部分是固定的，并且来自设备/驱动程序限制（所以我猜测在您的情况下可能不是，但由于内存碎片较少，您可能会在重新启动后直接看到更大的 I/O）。

> 512K 似乎太随意了，不是某种可配置的参数

该值可能与片段 SG 缓冲区有关。假设您在 x86 平台上并且有一个这样`max_segments`的`128`：

```
4096 * 128 / 1024 = 512 
```

这就是 512K 的来源。

额外的喋喋不休：根据[https://twitter.com/axboe/status/1207509190907846657](https://twitter.com/axboe/status/1207509190907846657)，如果您的设备使用 IOMMU 而不是 DMA 引擎，那么您不应该受到分段限制......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:24:58.643

块驱动程序的每个请求属性有一个最大扇区。我必须检查如何修改它。您曾经能够通过 blockdev --getmaxsect 获得这个值，但我没有在我的机器的 blockdev 上看到 --getmaxsect 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T20:59:04.853

责任确实在块层上，SCSI层本身与大小无关。您应该检查底层是否确实能够传递您的请求，尤其是对于直接 io，因为它可能被分成许多小页面，并且需要一个比硬件可以支持的更长的分散收集列表或甚至只是驱动程序（libata 是/有点受限）。

您应该查看并调整 /sys/class/block/$DEV/queue 那里有各种文件，最有可能匹配您需要的是 max_sectors_kb 但您可以尝试一下，看看哪些适合您。您可能还需要调整分区变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T17:47:59.300

查看以下文件应该会告诉您逻辑块大小是否不同，在您的情况下可能是 512。但是，我不确定您是否可以写入这些文件来更改这些值。（即逻辑块大小）

```
/sys/block/<disk>/queue/physical_block_size 
/sys/block/<disk>/queue/logical_block_size 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T02:56:33.107

试试 ioctl(fd, BLKSECTSET, &blocks)

# android - SurfaceView 不断过度绘制菜单

> ID：10494598
> 
> 赞同：2
> 
> 时间：2012-05-08T07:41:30.513
> 
> 标签：android

当我创建一个 SurfaceView 然后尝试打开菜单时，菜单卡在 SurfaceView 下。当我将surfaceView 设置为透明时，这在SurfaceView 为空时有效，但是一旦它被填充，它将不允许任何东西在它前面。

有谁知道如何解决这个问题？这是我的初始化：

```
 private void init(Context context) {
    this.context = context;
    SurfaceHolder holder = getHolder();
    holder.setFormat(PixelFormat.TRANSPARENT);
    holder.addCallback(this); 
```

![菜单上的 SurfaceView](../Images/5796e0fa4ac6cb620de1987788280239.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:47:37.570

我不知道强制 android 菜单在表面上透支的可能性。我前段时间有一个 GLSurface 是实现我自己的菜单并将其添加到表面之后的视图列表中。这是一个示例（无法编译）：

```
 surface = new GLSurfaceView(this, handler);
   menu = new MenuView(context);

   menu.setOption("Option 1");
   menu.setOption("Option 2");

   surface.setRenderer(new OpenGLRenderer(handler));
   setContentView(surface);

   addContentView(menu, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,   ViewGroup.LayoutParams.WRAP_CONTENT)); 
```

# matlab - 在不使用 eig 函数的情况下在 MATLAB 中查找特征值

> ID：10494601
> 
> 赞同：-2
> 
> 时间：2012-05-08T07:41:42.350
> 
> 标签：matlab, eigenvalue

我试图在不使用 eig 函数的情况下找到矩阵的特征值（我的作业是这样说的）。在 Matlab 中，我定义了矩阵和单位矩阵。但我无法建立这个等式：

```
A - x*I 
```

x 这里是 lambda，A 是我应该找到其特征值的矩阵，I 是单位矩阵。如果你知道如何找到特征值，你应该明白这一点。我怎么能通过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:48:10.287

你可以在这里得到一些灵感：[http ://en.wikipedia.org/wiki/Eigenvalue_algorithm](http://en.wikipedia.org/wiki/Eigenvalue_algorithm)

如果矩阵是固定大小的，您可以轻松地自己`det(A-lambda*eye)=0`解决并使用它。

通过[幂迭代](http://en.wikipedia.org/wiki/Power_iteration)，您已经可以找到主要特征值，并且我知道该算法有一个扩展，也可以找到其他特征值，但不记得它是如何工作的:(

# android - Android video stream calculate frame rate or video streaming speed

> ID：10494609
> 
> 赞同：2
> 
> 时间：2012-05-08T07:42:13.790
> 
> 标签：android, video-streaming, frame-rate

I want to calculate video speed on android. I have found that it is dependent of frame rate. How can I calculate streaming video from some url and calculate its frame rate in android application?

# sql - How to use transactions in multiple SQL procedures?

> ID：10494611
> 
> 赞同：0
> 
> 时间：2012-05-08T07:42:40.490
> 
> 标签：sql, sqltransaction

I would like to start a transaction through a sql procedure, run other 2 procedure, and then run the first procedure with command: 'commit'. Do you believe that this could be possible? I tried but received an error. *Transaction count after EXECUTE indicates a mismatching number of BEGIN and COMMIT statements. Previous count = 0, current count = 1.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:49:30.283

发生这种情况是因为 SQL Server 并不真正支持嵌套事务。

如果您在嵌套的存储过程（不是事务）中提交或回滚，那么您将生成错误 266，因为启动和输入时 @@TRANCOUNT 不匹配。

您应该在同一个 SPROC 中配对 BEGIN TRAN 和 COMMIT。

如果没有嵌套事务的概念，那么您需要在同一个存储过程中进行回滚/提交。您可以使用 SET XACT_ABORT ON 抑制由不匹配的@@TRANCOUNT 引起的错误 266。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T08:15:22.510

不确定 sql server 中的嵌套事务，但你可以试试这个

```
Begin Try
 Begin Transaction1
  Call Proc1
   Call Proc2
   Call Proc3
 Commit
 End Transaction
Catch
 Rollback 
```

# c++ - How to test encrypting algorithms?

> ID：10494617
> 
> 赞同：-2
> 
> 时间：2012-05-08T07:43:04.937
> 
> 标签：c++, c, algorithm, encryption, des

We have to implement the DES algorithm. We want to code some functions, but we don't know how to test our DES algorithm.

Are there any well-known tools/libraries that we can use to test our encrypting and decrypting functions? We need a 3rd party tool to tell people that our version really works.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:54:33.937

我假设您将 DES 用作 3DES 的一部分，对于 3DES，美国国家标准与技术研究院 (NIST) 发布了大量可用于验证您的实现的测试向量：

[http://csrc.nist.gov/groups/STM/cavp/index.html](http://csrc.nist.gov/groups/STM/cavp/index.html)

此外，您可以测试与其他已知库（例如 OpenSSL）的互操作性（加密/解密）。如果加密的密文和解密的明文相同，则您的实现正确的可能性很高。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T13:37:53.243

Java 实现了很多安全算法： [http ://www.oracle.com/technetwork/java/javase/tech/index-jsp-136007.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136007.html)

```
Cipher desCipher = Cipher.getInstance("DES/CBC/NoPadding");
DESKeySpec desSpec = new DESKeySpec(desKey);
SecretKey des = SecretKeyFactory.getInstance("DES").generateSecret(desSpec);
desCipher.init(Cipher.ENCRYPT_MODE, des , ivSpec); 
```

# java - SQLite With List

> ID：10494619
> 
> 赞同：0
> 
> 时间：2012-05-08T07:43:17.680
> 
> 标签：java, android, sqlite, list

I have an activity that contains a List. This list will take the data from SQLite:

```
public class RecentCases extends Activity {

Button GoToCaseInfo, CreateNewFormB;
RecentCaseClass recent1;

        // the adapter class..
    class RecentCasesInfoAdapter extends ArrayAdapter<RecentCaseClass>

   {
    public RecentCasesInfoAdapter() {

        super(RecentCases.this, R.layout.recent_cases_row);
    }

    public View getView(final int position, View convertView,
            ViewGroup parent)

    {

        recent1 = this.getItem(position);

        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.recent_cases_row, parent,
                false);
        // this is our row items..
        TextView recentName = (TextView) row
                .findViewById(R.id.tvrecentName);
        TextView recenInfo = (TextView) row.findViewById(R.id.recent_info);
        ImageView recentImg = (ImageView) row.findViewById(R.id.list_image);

        // TODO What's the info they want
        // String CaseTime = recent1.getTime();
        // recentName.setText(recent1.getName());
        // recenInfo.setText("His/her age: " + recent1.getAge() +
        // " year old"
        // + " Lost sicnce :" + CaseTime);

        String CasePicPath;

        // TODO Linear or ??
        RelativeLayout rowLayout = (RelativeLayout) row.findViewById(R.id.row_layout);
        rowLayout.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            // go to 
            Intent k = new Intent(RecentCases.this, Case_Information.class);
            startActivity(k);
        }
    });

        return row;

    }
    }

        protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recent_cases);

    // Moving to Create New Form Activity
    CreateNewFormB = (Button) findViewById(R.id.cretnwfrmRC);
    CreateNewFormB.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Intent k = new Intent(RecentCases.this, CreateNewForm.class);
            startActivity(k);

        }
    });

    // For list
    // Intilaize
    ListView RecentCasesListView = (ListView)     findViewById(R.id.recent_cases_list);

    // create adapter
    RecentCasesInfoAdapter recentCasesInfoAdapter = new    RecentCasesInfoAdapter();

    // 1-First receives MMS OnReceive Class 2- Assign the MMS info to Static
    // Array 3- Assign the array to the adapater
    // for(MedicineClass m: Model.getMedList()) MedicineInfoAdapter.add(new
    // MedicineClass(m));
    recentCasesInfoAdapter.add(recent1);

    // after fill the adapter.. assign the list to the adapter
     RecentCasesListView.setAdapter(recentCasesInfoAdapter);

}
   } 
```

and this is the class

```
 public class RecentCaseClass {

private String pic;
private String name;
private String gender;
private int age;
private String clothes;
private String MoreInfo;
private String time;
private String location;
private int ID;

public String getPic() {
    return pic;
}

public void setPic(String pic) {
    this.pic = pic;
}
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getGender() {
    return gender;
}

public void setGender(String gender) {
    this.gender = gender;
}

public int getAge() {
    return age;
}

public void setAge(int age) {
    this.age = age;
}

public String getClothes() {
    return clothes;
}

public void setClothes(String clothes) {
    this.clothes = clothes;
}

public String getMoreInfo() {
    return MoreInfo;
}

public void setMoreInfo(String moreInfo) {
    MoreInfo = moreInfo;
}

public String getTime() {
    return time;
}

public void setTime(String time) {
    this.time = time;
}

public String getLocation() {
    return location;
}

public void setLocation(String location) {
    this.location = location;
}

public int getID() {
    return ID;
}

public void setID(int iD) {
    ID = iD;
}

  } 
```

The SMS will come to my app then i will save in SQLite then i should show it in my app

1.  How can i take data from SQLite and show it in list?
2.  If I delete the row information from SQLite how can i delete the row in list?
3.  Should i change the adapter?

============================UPDATE===========================

I add this to my project but I did not change any thing just added this class:

```
 public class RecentClassAdapter extends BaseAdapter{

        private RecentCases RecentCases;
        static public List<RecentCaseClass> listOfRCases;
        RecentCaseClass entry;
        int caseId;

        public RecentClassAdapter(RecentCases recentcases, List<RecentCaseClass> listOfCaseParameter) {
            this.RecentCases = recentcases;
            this.listOfRCases = listOfCaseParameter;

        }

        public int getCount() {
            return listOfRCases.size();
        }

        public Object getItem(int position) {
            return listOfRCases.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup viewGroup) {

             entry = listOfRCases.get(position);
             caseId = entry.getID();

             if (convertView == null) {

                LayoutInflater inflater = (LayoutInflater) RecentCases.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = inflater.inflate(R.layout.recent_cases_row, null);
              }

            // this is row items..
            // Set the onClick Listener on this button
             //ConfExpandRegion = (Button) convertView.findViewById(R.id.expand);
            //Button Cancelb = (Button) convertView.findViewById(R.id.cancelCase);
            TextView RCase = (TextView) convertView.findViewById(R.id.tvrecentName);
            RCase.setText(entry.getName());
            Toast.makeText(RecentCases, "inside getview" + entry.getAge(), 0).show(); 

        public void add(RecentCaseClass RCaseClass) {
            // TODO Auto-generated method stub
            listOfRCases.add(RCaseClass);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:45:50.943

You have to create a custom array adapter and fetch the data from Database row by row and populate in your Listview with getView method.

Here is a example for custom array adapter

[http://android-er.blogspot.in/2010/06/custom-arrayadapter-with-with-different.html](http://android-er.blogspot.in/2010/06/custom-arrayadapter-with-with-different.html)

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

# html - 何时调用主体 onLoad？

> ID：10494620
> 
> 赞同：7
> 
> 时间：2012-05-08T07:43:27.773
> 
> 标签：html, jsp

我需要了解何时`onload`调用身体

[我在w3school](http://www.w3schools.com/tags/tag_body.asp)读到，这`onload=Script to be run when a document load`是什么意思？

这是否意味着

1.  html/jsp 页面在渲染正文中的任何元素（如任何`table`或 jsp 脚本）之前被加载，例如：`<%= request.getParameter("NAME") %>`
2.  还是在呈现页面/正文之后？

例如：我有一堆参数`(<%= request.getParameter("NAME") %>,...)`，所以为了使用它们，我会将它们放在一些隐藏的表单项中，然后在身体负载时我可以使用它们吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T07:49:21.923

与[w3schools](http://w3fools.com)不同，[MDN 解释了事件何时触发](https://developer.mozilla.org/en/DOM/window.onload)：

> load 事件在文档加载过程结束时触发。至此，文档中的所有对象都在 DOM 中，所有图片和子帧都加载完毕。

这样 DOM 树就准备好了*，*所有元素都已经加载完毕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T09:42:43.463

`onLoad`在成功完成 dom 树后触发该事件，例如成功加载主体内的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:37:11.543

Onload 在 DOM 完全加载时执行。这意味着它在页面结束后执行。当您想在文档完全加载时执行某些任务时，这很有用。

您可以通过多种方式做到这一点，但这里的方式很少

```
<body onload="YOUR ACTION"> 
```

类似于

```
<script type="text/javascript>
window.onload=function(){
   //YOUR ACTION  
}
</script> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-08T07:46:33.563

当DOM 树准备好时触发[onload 事件。](https://developer.mozilla.org/en/DOM/window.onload)这意味着您页面上的所有元素都可用于脚本。Document.onload 可能在页面渲染或图像加载之前触发。

# c# - 在 Metro 风格应用程序中启动网络摄像头

> ID：10494629
> 
> 赞同：0
> 
> 时间：2012-05-08T07:43:58.477
> 
> 标签：c#, windows-runtime

我正在构建一个 win8 应用程序，它只需要启动网络摄像头来拍照。

我已经看到了给出的示例代码`MSDN`，`Camera captures`但我只想要应该启动`onclick`的`CAPTURE`按钮`webcam`，拍照并保存它。

在示例代码中，他们让用户从列表框中选择选项，然后`selectionchanged`调用所需的函数。我的问题是我不需要任何列表框。他们还使用了一个`SuspensionManager`我不理解的类。我真的很困惑。

有人可以告诉我一条出路吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T07:47:49.010

试试这个：

```
using Windows.Media.Capture;

var ui = new CameraCaptureUI();
ui.PhotoSettings.CroppedAspectRatio = new Size(4, 3);
var file = await ui.CaptureFileAsync(CameraCaptureUIMode.Photo);

if (file != null) 
{
   var bitmap = new BitmapImage();
   bitmap.SetSource(await file.OpenAsync(FileAccessMode.Read));
   Photo.Source = bitmap;
} 
```

从[这里取](http://blogs.msdn.com/b/jimblizzard/archive/2012/04/26/simple-camera-capture-in-window-8-metro-style-application.aspx)

# javascript - Parsing XML in a Web Worker

> ID：10494632
> 
> 赞同：9
> 
> 时间：2012-05-08T07:44:13.577
> 
> 标签：javascript, xml, web-worker, domparser

I have been using a DOMParser object to parse a text string to an XML tree. However it is not available in the context of a Web Worker (and neither is, of course, document.ELEMENT_NODE or the various other constants that would be needed). Is there any other way to do that?

Please note that I do not want to manipulate the DOM of the current page. The XML file won't contain HTML elements or anything of the sort. In fact, I do not want to touch the document object at all. I simply want to provide a text string like the following:

```
<car color="blue"><driver/></car> 
```

...and get back a suitable tree structure and a way to traverse it. I also do not care about schema validation or anything fancy. I know about [XML for <SCRIPT>](http://xmljs.sourceforge.net/index.html "XML for <SCRIPT>"), which many may find useful (hence I'm linking to it here), however its licensing is not really suitable for me. I'm not sure if jQuery includes an XML parser (I'm fairly new to this stuff), but even if it does (and it is usable inside a Worker), I would not include an extra ~50K lines of code just for this function.

I suppose I could write a simple XML parser in JavaScript, I'm just wondering if I'm missing a quicker option.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T09:19:21.943

根据[规范](http://dev.w3.org/html5/workers/#apis-available-to-workers)

> 在本规范的这个版本中，工作人员无法使用 DOM API（节点对象、文档对象等）。

我想这就是为什么 DOMParser 不可用的原因，但我真的不明白为什么做出这个决定。（在 WebWorker 中获取和处理 XML 文档似乎不无道理）

但您可以导入其他可用工具：[“JavaScript 中的跨平台 XML 解析”](http://xmljs.sourceforge.net/index.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-07T09:11:11.137

在这一点上，我喜欢分享我的解析器：[https ://github.com/tobiasnickel/tXml](https://github.com/tobiasnickel/tXml)

使用它的 tXml() 方法，您可以将字符串解析为一个对象，并且它只需要 0.5kb 压缩 + gzipped

# php - graph generation in csv file

> ID：10494633
> 
> 赞同：0
> 
> 时间：2012-05-08T07:44:19.950
> 
> 标签：php, csv, graph

I have generated a graph based on the user, stored in database. This graph is generating in a web page. But I am thinking to generate this graph to a csv file. But I don't know whether it is possible or not. If so, please help me out.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-08T07:46:52.657

You can use this PHP function [PHP file-put-contents()](http://php.net/manual/en/function.file-put-contents.php)

# sql - 在 SQL Server CE 中获取格式化日期

> ID：10494638
> 
> 赞同：2
> 
> 时间：2012-05-08T07:44:44.200
> 
> 标签：sql, date, sql-server-ce

如何在 SQL Server CE 中获取格式化日期？

我在包含 的表上有一个列`Date`，但列类型是`nvarchar`

```
ID     Date
----------------------
1      05/08/2012
2      10/08/2012
3      05/10/2012 
```

日期格式是`MM/dd/yyyy`，但它是`nvarchar`.

另外，我想要一个`WHERE`子句来选择特定日期的 ID。我怎样才能做到这一点？这适用于 SQL Server CE。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:47:19.053

您需要使用 convert 或 cast 函数来覆盖它...

```
cast(datecolumn as DateTime) 
```

或者

```
 CONVERT(datetime,datecolumn,101) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T11:41:09.377

对于当前日期，您可以使用：

```
SELECT CONVERT(nvarchar,GETDATE(),101) 
```

> **输出：（**截至回答日期）
> 
> 2016 年 5 月 31 日

# javascript - 来自其他域的弹出窗口的javascript回调可能吗？

> ID：10494649
> 
> 赞同：1
> 
> 时间：2012-05-08T07:46:01.417
> 
> 标签：javascript, xss

我正在寻找一种纯 javascript 方式来：

```
* refer to a javascript from a different domain than the current page.
* the javascript launches(after a user click) a popup to the same domain the javascript is loaded from.
* the popup calls a callback, in the current page, when a result in the popup window is achieved.
* no additional server files on the domain of the current page. 
```

真的有可能还是它违反了所有的 xss 保护？我相信 Facebook 已经取得了成就。在那里 fb 连接 api。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:59:46.560

您可以使用 HTML5 的 postMessage，但它不适用于旧版浏览器。EasyXDM 通过在旧版浏览器上使用 hack，允许所有浏览器使用此功能。对于这种情况，最简单的方法是让弹出窗口在完成时重定向回第一个域，并在调用回调的重定向到页面上使用 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:12:03.217

Facebook 已经取得了成就，但他们似乎也依赖 Flash 来支持旧版浏览器。

@see [http://hustoknow.blogspot.de/2011/06/deconstructing-facebooks-flash-cross.html](http://hustoknow.blogspot.de/2011/06/deconstructing-facebooks-flash-cross.html)

在我当前的项目中，我们只是使用后备解决方案转储 IE7 并继续使用 HTML5s postMessage -> [http://caniuse.com/#search=postMessage](http://caniuse.com/#search=postMessage)

# c++ - 使应用程序/服务尝试在任务管理器中结束/终止其进程将导致“无法终止进程”

> ID：10494654
> 
> 赞同：3
> 
> 时间：2012-05-08T07:46:23.063
> 
> 标签：c++, windows, winapi, windows-7

我有一个 Avast 防病毒软件，它有一个进程“AvastSvc.exe”。如果我尝试在 Windows 任务管理器中结束/终止该进程，则会出现一个带有以下消息的窗口：“无法终止进程”、“无法完成操作。”、“拒绝访问”。尝试结束某些系统 Windows 进程（如 winlogon.exe）可能具有相同的行为（尽管有一次我设法杀死 winlogon.exe 并让我的机器挂起！）。

我希望我的应用程序（可能转换为服务）以相同的方式运行。我怎样才能做到这一点？

[Disable Windows Task Manager so he can't kill my process](https://stackoverflow.com/questions/7254595/disable-windows-task-manger-so-he-cant-kill-my-process)是一个类似的问题，它有很多有趣的答案，但它们似乎没有采用上述防病毒软件使用的技术并导致“无法终止进程”消息。

[http://forums.codeguru.com/showthread.php?t=503337](http://forums.codeguru.com/showthread.php?t=503337)有一个关于如何防止*停止*服务的解决方案（例如，通过 services.msc 控制台），但我需要防止在任务管理器中*结束/终止*其进程。

我在 Windows 7 下用 C++/winapi 编写应用程序，没有 CLR/.Net。

权限更新：防病毒进程 AvastSvc.exe 归“系统”帐户所有。但是，我有“系统”帐户拥有的其他进程，它们是可杀死的，而杀毒软件则不是。另外，我比较了防病毒进程和可杀进程的可执行权限和所有者，我看不出有什么区别。

更新用户控制和软件用途：软件功能介于系统和商业软件之间。软件的性质要求它永久运行。应用程序本身会有一个“关闭”动作，我们希望鼓励用户使用它并阻止他们杀死进程（这类似于防病毒软件所做的）。我知道完全阻止用户杀死它是不可能的，但我想让它变得更难。这个问题*具体*关于上面描述的方式（“无法终止进程”），某些服务（如 Avast）用来防止杀死他们的进程。对我来说，实现相同的行为就足够了。此外，如果用户不喜欢/不再需要该软件，他们将能够卸载该软件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T07:56:08.183

这不是通过代码实现的（好吧，它可能是针对关键的 Windows 系统进程，但您 [可能] 不是编写操作系统的组件），而是通过访问权限实现的。

您可以通过提升为管理员然后尝试终止 Avast 的进程来证明这一点。这次应该会成功。或者，您可以获取可执行文件（可能还有它所在的文件夹）的所有权，然后尝试终止该进程。再次，它应该是成功的。

Windows 不允许应用程序对计算机施加比用户更多的权力。如果你拥有这台机器并拥有适当的权限，你可以做任何你想做的事情，包括终止正在运行的进程。值得庆幸的是，作为开发人员，您无法阻止此操作。

用户始终处于最终控制之中。试图创造另一种情况是病毒和其他恶意软件开发人员定期进行的一场战斗 - 并且失败了。由于我对帮助任何人编写恶意软件不感兴趣，这就是我要说的全部内容。

除了编写恶意软件之外，我无法想象应用程序中这个“功能”的动机是什么。如果您只是试图阻止普通用户杀死对业务系统至关重要的进程，那么您应该降低标准用户帐户的权限，这样他们就无法篡改这些东西。因此，这可能是组策略的工作，而不是代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T15:24:08.073

我发现[防止用户进程被进程资源管理器中的“结束进程”杀死中](https://stackoverflow.com/questions/6185975/prevent-user-process-from-being-killed-with-end-process-from-process-explorer)提供的函数 ProtectProcess()完全符合我正在寻找的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T09:47:10.917

1.  通过从 eprocess 结构中删除它来隐藏您的进程
2.  发出无法被其他进程取消或完成的持久 I/O 请求
3.  创建线程来调试你自己的进程
4.  从内存中创建单独的进程/es 来监视主进程并在被另一个进程终止后从内存中重新启动它

# scala - 如何重定向登录akka？

> ID：10494656
> 
> 赞同：4
> 
> 时间：2012-05-08T07:46:29.180
> 
> 标签：scala, logging, akka

我正在使用 scala 2.9 和 akka 2.0 实现分布式数据库。我当前的问题是我想将标准日志记录重定向到文件而不是标准输出。我真的不想使用 SLF4J 或 SLF4S。有没有一种简单的方法来重定向日志输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T08:06:10.493

用于记录的 akka 文档说，您可以像这样在配置中注册处理程序：

```
akka {
  # Event handlers to register at boot time (Logging$DefaultLogger logs to STDOUT)
  event-handlers = ["akka.event.Logging$DefaultLogger"]
  # Options: ERROR, WARNING, INFO, DEBUG
  loglevel = "DEBUG"
} 
```

还有一个 SLF4J 处理程序

```
akka.event.slf4j.Slf4jEventHandler 
```

使用它，您可以添加任何符合 SLF4J 的库，例如 logback，以便将您的日志写入您想要的任何位置。

编辑：

要使用 logback 记录到文件，您必须将 logback 添加为依赖项，将 Slf4jEventHandler 添加到您的配置中：

```
akka {
  # Event handlers to register at boot time (Logging$DefaultLogger logs to STDOUT)
  event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
  # Options: ERROR, WARNING, INFO, DEBUG
  loglevel = "DEBUG"
} 
```

并将 logback 配置添加到您的项目中，类似于这样（取自 logback 文档）：

```
<configuration>

  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>testFile.log</file>
    <append>true</append>
    <!-- encoders are assigned the type
         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
    <encoder>
      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
  </appender>

  <root level="DEBUG">
    <appender-ref ref="FILE" />
  </root>
</configuration> 
```

由于 akka 中的异步日志记录，您不能在日志模式中使用 %thread 变量，而是使用`sourceThread`MDC 中的变量。您可以在此页面底部阅读相关内容：http: [//doc.akka.io/docs/akka/2.0/scala/logging.html](http://doc.akka.io/docs/akka/2.0/scala/logging.html)

您不必在代码中显式使用 slf4j 或 logback，只需使用普通的 akka 日志记录，处理程序将处理其他所有事情。

# javascript - 如何在表格中查找单元格的行号和列号

> ID：10494661
> 
> 赞同：11
> 
> 时间：2012-05-08T07:46:44.950
> 
> 标签：javascript, dom

不使用 jQuery，即使在表格中也能获得 onClick 的 Row 和 Col (X, Y) 的最有效方法是什么？

我认为只为表格分配一个点击监听器，让它冒泡到顶部会很好，但实际上它只是给了我[HTMLTableElement](https://developer.mozilla.org/en/DOM/HTMLTableElement)。我想从中得到的是 Col 编号和来自这个听众的 Row 编号。那可能吗？

```
window.onload = function () {
 document.getElementsByTagName('table')[0].addEventListener('click', function() {
  alert(this.tagName);
 }, false);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T07:54:36.773

您可以绑定到表格，但这会使您有可能在单元格之间的间距内单击（没有行或单元格索引）。在下面的示例中，我决定绑定到单元格本身，从而确保我始终拥有行和单元格索引。

```
var tbl = document.getElementsByTagName("table")[0];
var cls = tbl.getElementsByTagName("td");

function alertRowCell(e){
  var cell = e.target || window.event.srcElement;
  alert( cell.cellIndex + ' : ' + cell.parentNode.rowIndex );
}

for ( var i = 0; i < cls.length; i++ ) {
  if ( cls[i].addEventListener ) {
    cls[i].addEventListener("click", alertRowCell, false);
  } else if ( cls[i].attachEvent ) {
    cls[i].attachEvent("onclick", alertRowCell);
  }
} 
```

演示：http: [//jsbin.com/isedel/2/edit#javascript,html](http://jsbin.com/isedel/2/edit#javascript,html)

我想您也可以安全地绑定到表本身，并对源元素执行检查以查看它是否是单元格：

```
var tbl = document.getElementsByTagName("table")[0];

function alertRowCell (e) {
  var cell = e.target || window.event.srcElement;
  if ( cell.cellIndex >= 0 )
    alert( cell.cellIndex + ' : ' + cell.parentNode.rowIndex );
}

if ( tbl.addEventListener ) {
  tbl.addEventListener("click", alertRowCell, false);
} else if ( tbl.attachEvent ) {
  tbl.attachEvent("onclick", alertRowCell);
} 
```

演示：http: [//jsbin.com/isedel/5/edit](http://jsbin.com/isedel/5/edit)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-29T11:41:39.283

这是最简单的方法。

```
window.onload = function () {
  document.querySelector('#myTable').onclick = function(ev) {
    var rowIndex = ev.target.parentElement.rowIndex;
    var cellIndex = ev.target.cellIndex;
    alert('Row = ' + rowIndex + ', Column = ' + cellIndex);
  }
}
```

```
<table border="1" id="myTable">
    <tr>
        <td>first row first column</td>
        <td>first row second column</td>
    </tr>
    <tr>
        <td>second row first column</td>
        <td>second row second column</td>
    </tr>
    <tr>
        <td>third row first column</td>
        <td>third row second column</td>
    </tr>
</table>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:50:18.473

```
window.onload = function () {
 document.getElementsByTagName('table')[0].addEventListener('click', function(e) {
  alert(e.target);
 }, false);
} 
```

# ruby - 我可以以编程方式使 Rake 任务静音吗？

> ID：10494664
> 
> 赞同：3
> 
> 时间：2012-05-08T07:46:56.590
> 
> 标签：ruby, rake

我有一个依赖于 Rake::PackageTask 的 Rake 任务。我需要日志中我自己任务的输出，但我不需要包任务的 1000 多行输出。

有什么办法可以让 Rake::PackageTask 静音吗？或者有没有一种方法可以以编程方式使任何任务静音，而无需指定`rake --silent`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:05:56.143

您可以在调用静默 rake 任务之前将日志重定向到 /dev/null。然后恢复它们..

```
dev_null = Logger.new("/dev/null")
Rails.logger = dev_null
ActiveRecord::Base.logger = dev_null
Rake::Task['blah_blak'].invoke

#then restore the logger back 
```

# eclipse - Eclipse 中的 Tomcat IPath 错误

> ID：10494665
> 
> 赞同：0
> 
> 时间：2012-05-08T07:47:03.950
> 
> 标签：eclipse, tomcat

我在 Eclipse (Galileo) 中的 Tomcat 服务器有问题。我已经使用以下版本进行了测试：5.5.28、6.0.26、6.0.29 和 7.0.10 但是当我尝试配置它时单击服务器时仍然出现此错误（服务器启动时也会弹出错误）：

```
An error has occurred. See error log for more details.
org.eclipse.wst.server.core.model.ServerBehaviourDelegate.getTempDirectory(Z)Lorg/eclipse/core/runtime/IPath; 
```

这是什么错误，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:18:19.297

必须下载 Eclipse Galileo J2EE 版本。这有正确的 WTP 版本。

# php - 测试锁定文件

> ID：10494668
> 
> 赞同：0
> 
> 时间：2012-05-08T07:47:16.683
> 
> 标签：php

我[锁定了一个文件](https://stackoverflow.com/questions/10487505/changing-a-files-single-character/10487534#10487534)，并试图测试系统对锁定文件的反应。我希望其他进程等待该进程被释放，直到他们可以`require_once`再次获得该文件并且不会返回错误。

问题是无论我做什么，我似乎都无法锁定文件并在另一个进程请求文件时进行一些等待，并查看系统对该锁定文件的反应。

我试过
1.`sleep()`它不起作用，它停止了整个 php 引擎。
2\. 我创建了一个批处理文件，它只是暂停，直到您按 Enter 键。并使用`exec("cmd.exe /c START c:\\1.bat");`

所以预感是所有进程实际上都是一个串行任务队列，所以如果一个因任何原因暂停，其他所有进程也是如此吗？

那么如何测试文件是否被锁定？
但是当然，如​​果我是对的，那么如果其他进程无论如何都无法访问它，那么锁定文件有什么意义呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:16:16.340

```
$file = fopen('somefile.php', 'r+');

while(!flock($file, LOCK_SH | LOCK_NB)) {
    sleep(1);
}

require 'somefile.php'; 
```

由于flock 似乎在php 脚本中不起作用，您需要检查是否存在锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:51:41.847

由`require_once`php处理。因此，您不能简单地为它获取锁 AFAIK。如果您查看文件锁定，请参阅[this](http://docstore.mik.ua/orelly/webprog/pcook/ch18_25.htm)
它指出，每当您尝试访问锁定的文件时都应该使用锁。

# c# - C#.NET中操作MS word文档有多少种方法

> ID：10494672
> 
> 赞同：1
> 
> 时间：2012-05-08T07:47:24.030
> 
> 标签：c#, .net, ms-office

我想知道有没有其他方法可以让我们在 C#.NET 平台上操作 MS Word。或者我们只能使用 Office.Interop 来实现？

我对此有点困惑。你能解释一些技能或资源让我一步一步地找出来。谢谢。

我可以自己处理“互操作”，也可以通过谷歌搜索。我想知道一些新的东西，所以我可以通过你的解释找到答案。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:34:11.393

有几种方法可以在没有 Office 和 Interop 的情况下使用 Microsoft Word 文档。

1.  开放式XML
2.  第 3 方组件

**开放式XML**

您所需要的只是[OpenXML SDK](http://msdn.microsoft.com/en-us/office/ee330856)。有一组 .NET 类允许您完全操作或创建 Word 文档，当然是在 OpenXML 格式 - docx 中。例如[，在第 9 频道上](http://channel9.msdn.com/Blogs/donovanf/Introduction-to-Open-XML-SDK-20-Solution-Development-Part-2)搜索到带有 OpenXML 介绍链接的视频，供您开始，以及有关它的[文章。](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/06/02/4730.aspx)

使用 OpenXML 被认为是操作 docx 的低级方式

**第 3 方组件**

例如，在我的几个项目中，我们使用[了 Aspose 组件](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)。它可以使开发更容易，并且不仅限于 OpenXML 格式，因此您可以操作 doc/docx。但是使用 OpenXML，您可以完全控制代码生成的内容，并且使用第三方组件，您依赖于外部组件，在极少数情况下，这些组件可能会生成您所期望的内容。

我敢肯定还有很多其他的第 3 方。但是 Aspose 就是这样，我已经在 2 个生产项目中使用过，它似乎对他们来说已经足够好了。

您可以查看 Aspose[演示](http://www.aspose.com/demos/.net-components/aspose.words/default.aspx)。

# database - Hibernate EntityManager persist() 和数据库往返次数

> ID：10494673
> 
> 赞同：2
> 
> 时间：2012-05-08T07:47:25.560
> 
> 标签：database, spring, hibernate, jpa, hibernate-entitymanager

现在我正在使用 entitymanager 使用我的 dao 使用这样的代码将对象实体列表插入数据库。

```
@Transaction
public void insertBatch(List<EntityObject> o){
    for(int i=0;i<o.size();i++){
         em.persist(o);
         if(o.size % 100 == 0){ //equal to JDBC batch size
              em.flush();
              em.clear();
         }
    }
} 
```

当我通过将其添加到应用程序上下文中来监视 sql 语句时

```
 <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                           <property name="showSql" value="true"/>
        </bean>
    </property> 
```

控制台中的结果将如下所示

```
Hibernate: insert into TABLE (FIELD1, FIELD2) values (?, ?)
Hibernate: insert into TABLE (FIELD1, FIELD2) values (?, ?)
...
...
...//untill reach 100 lines.
Hibernate: insert into TABLE (FIELD1, FIELD2) values (?, ?) 
```

我的问题是。这是否意味着每次我调用此方法时，它都会与数据库进行 100 次往返，还是只进行 1 次往返？

任何答案或见解将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:42:19.423

如果您需要在休眠 jpa 中进行批处理，请尝试设置

```
<property name="hibernate.jdbc.batch_size" value="100" /> 
```

根据 JPA 规范：

> 托管实体 X 将在事务提交时或之前或作为刷新操作的结果输入到数据库中。

因此，刷新是数据库往返。

顺便说一句，如果您将 hibernate-jpa 与 spring（事务）一起使用，那么 spring 将为您管理事务。你不需要调用 em.flush （理想情况下）

# android - android登录应用程序在两个意图之间切换

> ID：10494680
> 
> 赞同：1
> 
> 时间：2012-05-08T07:47:46.197
> 
> 标签：android

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        txtUserName=(EditText)this.findViewById(R.id.txtUname);
        txtPassword=(EditText)this.findViewById(R.id.txtPwd);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);
        btnLogin.setOnClickListener(new OnClickListener() {

             Button next = (Button) findViewById(R.id.Button01);
   error1:   next.setOnClickListener(new View.OnClickListener() {   

           public void onClick(View view) {
           Intent myIntent = new Intent(view.getContext(), AddName.class);
           startActivityForResult(myIntent, 0); 
       }}
   error2:  )

       };

    if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
           Toast.makeText(LoginappActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
          } else{
           Toast.makeText(LoginappActivity.this, "Invalid Login",Toast.LENGTH_LONG).show(); 
           }
             }

    } 
```

我创建了一个登录应用程序来从一个意图更改为另一个意图。另一个 .java 工作正常

*   error1：令牌上的语法错误，应改为 AnnotationName

*   error2: 此行有多个标记
    - `Syntax error, insert "EnumBody" to complete EnumDeclaration`
    - `Syntax error, insert "enum Identifier" to complete EnumHeaderName`
    - `Syntax error, insert ")" to complete Expression`
    -`Syntax error, insert "}" to complete ClassBody`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:52:22.373

在函数`}}`的末尾你有一些额外的东西。`onClick`它应该是：

```
next.setOnClickListener(new View.OnClickListener() {   

       public void onClick(View view) {
           Intent myIntent = new Intent(view.getContext(), AddName.class);
           startActivityForResult(myIntent, 0); 
       }
}); 
```

顺便说一句，我发现 onClickListener 在另一个 onClickListener 中的用法非常令人困惑。你应该把它们分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:57:00.047

它必须像：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

     txtUserName = (EditText) this.findViewById(R.id.txtUname);
     txtPassword = (EditText) this.findViewById(R.id.txtPwd);
    Button btnLogin = (Button) this.findViewById(R.id.btnLogin);

    btnLogin.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if ((txtUserName.getText().toString()).equals(txtPassword.getText()
            .toString())) {
        Toast.makeText(DelActivity.this, "Login Successful",
                Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(DelActivity.this, "Invalid Login",
                Toast.LENGTH_LONG).show();
    }
        }
    });

    Button next = (Button) findViewById(R.id.button1);
    next.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            //Intent myIntent = new Intent(view.getContext(), AddName.class);
            //startActivityForResult(myIntent, 0);
        }
    });

} 
```

# c++ - 创建一个 boost 共享指针向量

> ID：10494682
> 
> 赞同：0
> 
> 时间：2012-05-08T07:47:56.387
> 
> 标签：c++, boost, shared-ptr

我遇到了一个问题，想知道是否有人可以帮助我。

在我的一堂课（例如class1）中，我有一个

`typedef boost::shared_ptr <class-one-object>`

`typedef std::vector<class-one-object>`

在另一个类（例如class2）中，我需要再次创建一个向量，以便遍历它

`class-one-object`

所以我正在尝试以下

```
class1::ImportTableObject& table = configPtr->getTable();    
std::vector<class1::class-one-object>::const_iterator* iter = table.begin(); 
```

这引发了以下编译错误：

```
cannot convret `__gnu_cxx::__normal_iterator<boost::shared_ptr<class1::class-one-object>*, std::vector<boost::shared_ptr<class1::class-one-object>,
 std::alloctor<boost::shared_ptr<class1::class-one-object> > > to '__gnu_cxx::__normal_iterator<const class1::class-one-object*, std::vector<class1::class-one-object> 
```

等等等等

任何人都可以帮助我吗？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T07:50:26.290

`begin`不返回指向迭代器的指针，它返回一个迭代器。

```
std::vector<class1::class-one-object>::const_iterator iter = table.begin() 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:26:10.793

从错误消息中可以得出结论，您基本上混合了容器：一个包含指向“class-one-object”的共享指针，第二个包含“class-one-object”。看起来这应该有效：

```
std::vector<boost::shared_ptr<class1::class-one-object> >::const_iterator iter = table.begin(); 
```

但你可能想实现这样的目标：

```
std::vector<class1::class-one-object> vec;
const class1::class-one-object* ptr = (*iter).get();
if (ptr)
    vec.push_back(*ptr); 
```

最好的祝福。

# qt - 在捕获屏幕时屏蔽 QT 小部件

> ID：10494701
> 
> 赞同：1
> 
> 时间：2012-05-08T07:49:37.120
> 
> 标签：qt, capture, screen-capture, image-capture

我有一个用于捕获屏幕的 Win 和 Mac 的 Qt 4.8 应用程序。

我的桌面上有一个 QT 小部件（始终在顶部），*在我的捕获期间不应捕获*它。应该捕获在 QWidget 后面运行的应用程序/桌面，而不是 QT 小部件。我的 QT 应用程序的 UI 应该被屏蔽以防止捕获。

有什么办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T22:54:54.767

主要问题是：您是否可以控制截屏？如果您要截取屏幕截图，那将是可行的，但特定于平台。您需要获取屏幕上所有窗口的内容，除了您不想看到的窗口，并从中构建屏幕截图。

如果它是第三方屏幕抓取工具，例如 Windows 上的 Ctrl-PrtSc 或 OS-X 上的 Grab，那么除非操作系统提供一些 API 可以让您隐藏小部件，否则您将不走运。

您想要的功能并不常见，所以我怀疑是否有任何可移植的，甚至理智的方式来实现您想要的。

# linq - 在 Linq to SQL 中将字符串转换为枚举

> ID：10494704
> 
> 赞同：4
> 
> 时间：2012-05-08T07:50:01.390
> 
> 标签：linq, linq-to-sql, c#-3.0, type-conversion

如何使用 C# 在 Linq 中将字符串转换为枚举？

下面的类型转换是否也适用于 linq？：

```
(Audience)Enum.Parse(typeof(Audience), value, true); 
```

如果是，请告诉我如何使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T08:17:02.143

鉴于枚举

```
enum Foo{A, B, C} 
```

下面的代码执行从`enum`到的转换，`string`反之亦然：

```
var values = 
from name in Enum.GetNames(typeof(Foo))
select (Foo)Enum.Parse(typeof(Foo), name, true); 
```

所以，是的，铸造工作。但是，请记住，上面的查询将抛出一个`ArgumentException`if`Enum.Parse`方法接收一个无法解析的值。

此更新版本仅返回成功解析的值

```
enum Foo{A, B, C}

var values =  
   from name in Enum.GetNames(typeof(Foo))
   where Enum.IsDefined(typeof(Foo), name)
   select (Foo)Enum.Parse(typeof(Foo), name, true); 
```

# c# - 实体框架通用方法和反射

> ID：10494712
> 
> 赞同：0
> 
> 时间：2012-05-08T07:50:25.150
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, reflection

我正在尝试一种通用存储库方法，在控制器类中

```
var result = typeof(ISiteRepository)
      .GetMethod("UpdateLanguage")
      .MakeGenericMethod(objectType)
      .Invoke(this.siteRepository, new object[] { obj }); 
```

它在下面给了我一个错误，例如

**GenericArguments[0], 'Site.City', , on 'Void UpdateLanguageT' 违反了类型 'T' 的约束。**

## 领域类

```
public abstract class Entity : IEntity
 {
  [Key]
  public virtual int Id { get; set; }

 }

 public class Language:Entity
 {
  public string Name { get; set; }
  public int LanguageId { get; set; }
 }

 public abstract class Language<T> : Language where T : Language
 {
  public ICollection<T> Languages { get; set; }
 }

 public class City : Language<CityLanguage>
 {
  public int CountryId { get; set; }
  public string Code { get; set; }
  public virtual Country Country { get; set; }
 }

 public class CityLanguage : Language
 {
  public string Description { get; set; }
 } 
```

存储库类

* * *

```
 public interface ISiteRepository
 {
  void UpdateLanguage<T>(T entity) where T : Language<T>;
 }

 public class SiteRepository : ISiteRepository
 {
  public SiteRepository(DbContext context)
   : base(context)
  {
  }

 public void UpdateLanguage<T>(T entity) where T : Language<T>
  {
      var item = GetByKey<T>(entity.Id);
      var languages = entity.Languages;

   }

 } 
```

控制器

* * *

```
 public partial class SiteSettingsController : BaseController
 {

ISiteRepository siteRepository;

public SiteSettingsController(ISiteRepository siteRepository)
{
 this.siteRepository = siteRepository;
}

[HttpPost]
public virtual ActionResult LanguageObjectUpdate(LanguageListModel model,string type)
{

  //type like City
 Type objectType = Type.GetType(type);

 var obj = Activator.CreateInstance(objectType);

 obj.GetType().GetProperty("Id").SetValue(obj, model.Id, null);

 Type languageObjectType = objectType.GetProperty("Languages").DeclaringType.GetGenericArguments()[0];

 object objectLanguages = GetGenericListInstance(languageObjectType);

 foreach (var language in model.Languages)
 {
  object languageObject = Activator.CreateInstance(languageObjectType);

  languageObject.GetType().GetProperty("LanguageId").SetValue(languageObject, language.LanguageId, null);

  foreach (var languageItem in language.Items)
  {
   languageObject.GetType().GetProperty(languageItem.Label).SetValue(languageObject, languageItem.Value, null);
  }

  ((IList)objectLanguages).Add(languageObject);
 }

 obj.GetType().GetProperty("Languages").SetValue(obj, objectLanguages, null);

 var result = typeof(ISiteRepository)
  .GetMethod("UpdateLanguage")
  .MakeGenericMethod(objectType)
  .Invoke(this.siteRepository, new object[] { obj });

 return PartialView("Result";
}

private static object GetGenericListInstance(Type languageObjectType)
{
 Type listType = typeof(List<>);

 Type[] listTypeGenericArguments = { languageObjectType };

 Type objectLanguagesType = listType.MakeGenericType(listTypeGenericArguments);

 object objectLanguages = Activator.CreateInstance(objectLanguagesType);
 return objectLanguages;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:30:10.520

您的通用方法`UpdateLanguage<T>(T entity)`必须`T`是`Language<T>`. 但既然`Language<>`是一门课，那似乎有点难获得。您得到的错误表明不满足约束。

# php - 这个函数调用的操作顺序是什么？

> ID：10494715
> 
> 赞同：1
> 
> 时间：2012-05-08T07:50:41.173
> 
> 标签：php

```
<?php

class MyClass
{
    static function test()
    {
        echo "Victor";
    }

    static function result()
    {
        echo "My name is ".self::test();
    }
}

MyClass::result();

?> 
```

我很困惑为什么`self::test()`在命令的其余部分之前执行或相反。提前感谢您的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:59:23.183

因为要获得需要回显的字符串需要“准备”。所以在输出之前它需要知道它的返回值是什么。它首先执行，结果包含在字符串中。实际上，`self::test();`不返回值，而是回显一些文本。

# forms - 在 symfony 中向数据库添加日期

> ID：10494719
> 
> 赞同：0
> 
> 时间：2012-05-08T07:50:51.813
> 
> 标签：forms, date, symfony1, symfony-1.4

我正在尝试使用 symfony 的 sfwidgetdate 将日期字段添加到 mysql 数据库中，但它不起作用。在 schema.yml 中，我将数据类型设置为“日期”

sfwidget 是

```
 "start_date" => new sfWidgetFormDate(array("format" => "%year% %month%")) 
```

在我放的模板中

```
<?php echo $form['start_date']->render();?> 
```

**我用教义**

编辑.. 日期值作为数组传递

# jquery - 用 attr() 简化 Jquery 代码？

> ID：10494721
> 
> 赞同：0
> 
> 时间：2012-05-08T07:51:16.430
> 
> 标签：jquery, attr

我正在编写具有不同汽车类型的滑块。

现在我已经设置了一个针对每个类和 ID 的代码，但是应该有更短的方法来做到这一点？

这是我重复的 jquery 代码的示例：

```
$("a.id-159").on('click', function() {
    $('.car').find('.carBox.active').fadeOut(200);
    $('.ui-carousel').find('a.active').removeClass("active");
    $("a.id-159").addClass("active");
    $('#id-159').fadeIn(1000).addClass("active");
});

$("a.giulietta").on('click', function() {
    $('.car').find('.carBox.active').fadeOut(200);
    $('.ui-carousel').find('a.active').removeClass("active");
    $("a.giulietta").addClass("active");
    $('#giulietta').fadeIn(1000).addClass("active");
}); 
```

我的 HTML

```
<div id="carouselslider">
<div id="carousel">

        <a class="mito-qv" ><img src="tl_files/motorvillage/images/inhalte/NEUEWAGEN/alfa-romeo/thumb/MiToQV_thumb.jpg" alt="MiTo QV" width="150" height="107" />
        <span>MiTo QV</span></a>

        <a class="giulietta" ><img src="tl_files/motorvillage/images/inhalte/NEUEWAGEN/alfa-romeo/thumb/Giulietta_thumb.jpg" alt="Giulietta" width="150" height="107" />
        <span>Giulietta</span></a>

        <a class="id-159" ><img src="tl_files/motorvillage/images/inhalte/NEUEWAGEN/alfa-romeo/thumb/159MY_thumb.jpg" alt="159" width="150" height="107" />
        <span>159</span></a>

        <a class="id-159sw" ><img src="tl_files/motorvillage/images/inhalte/NEUEWAGEN/alfa-romeo/thumb/159STWI_thumb.jpg" alt="159SW" width="150" height="107" />
        <span>159SW</span></a>

        <a class="id-8c" ><img src="tl_files/motorvillage/images/inhalte/NEUEWAGEN/alfa-romeo/thumb/8C_Spider_thumb.jpg" alt="8C" width="150" height="107" />
        <span>8C</span></a>

</div>
<a href="#" id="ui-carousel-next"><span>next</span></a>
<a href="#" id="ui-carousel-prev"><span>prev</span></a> 
```

有没有办法缩短这个？

谢谢你的帮助！

罗吉尔

感谢您的输入！我已将不同的输入组合到此：

```
$("#carousel").children("a").on('click', function() {
    $('.car').find('.carBox.active').fadeOut(200);
    $('.ui-carousel').find('a.active').removeClass("active");
    var h = $(this).attr('class');
    $('#'+h).fadeIn(1000).addClass("active");
    $(this).addClass("active");
}); 
```

它完美地工作:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:19:12.733

```
$("a.id-159, a.giulietta").on('click', function() {
    $('.car').find('.carBox.active').fadeOut(200);
    $('.ui-carousel').find('a.active').removeClass("active");
    $(this).addClass("active");
    var h = $(this).attr('class').replace(/^.*(id-159|giulietta).*$/, "$1");
    $('#'+h).fadeIn(1000).addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:53:59.457

这可能是缩短它的一种方法：

```
$("#carousel").children("a").on('click', function() {
    $('.car').find('.carBox.active').fadeOut(200);
    $('.ui-carousel').find('a.active').removeClass("active");
    $(this).addClass("active");
    $(this).fadeIn(1000).addClass("active");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:54:36.647

通过组合选择器来尝试这个`,`。

```
$("a.id-159, a.giulietta").on('click', function() {
    $('.car').find('.carBox.active').fadeOut(200);
    $('.ui-carousel').find('a.active').removeClass("active");

    if ($(this).hasClass('id-159')) {
        $('#id-159').fadeIn(1000).addClass("active");
        $("a.id-159").addClass("active");
    }
    else {
        $("a.giulietta").addClass("active");
        $('#giulietta').fadeIn(1000).addClass("active");
    }
}); 
```

# jquery - 如何选择混合输入的组元素之一？

> ID：10494722
> 
> 赞同：2
> 
> 时间：2012-05-08T07:51:25.203
> 
> 标签：jquery, forms, jquery-selectors, radio-button, dom-traversal

如何选择混合输入的组元素之一？

我有以下代码：

```
<div class="item">
  <input type="radio" name="group1" value="value1">Value1</input>
  <input type="radio" name="group1" value="value2">Value2</input>
  <input type="radio" name="group1" value="value3">Value3</input>
  <textarea name="group1"></textarea>
</div>
  <div class="item">
  <input type="radio" name="group2" value="value1">Value1</input>
  <input type="radio" name="group2" value="value2">Value2</input>
  <input type="radio" name="group2" value="value3">Value3</input>
  <textarea name="group2"></textarea>
</div> 
```

我想：当我们点击textarea时，radiobuttons应该失去`checked`属性。像：

```
$('.item textarea').on('click', function(){
  $($(this).parent + 'input[type="radio":checked]').each(function(){
    $(this).checked = false;
  });
}); 
```

但它不起作用。我认为`parent`对象的问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:53:50.237

你的变种有很多问题。首先，您的选择器构造存在问题：`$($(this).parent + 'input[type="radio":checked]')`. 在这里，您将 jQuery 对象与不正确的字符串选择器混合在一起。此外，父元素采用方法`parent()`而不是属性。然后，jQuery 对象没有`checked`属性。

考虑到所描述的所有问题，我们可以得到这个可行的代码：

```
$('.item textarea').on('click', function() {
    $(this).siblings(":radio").prop("checked", false);
}); 
```

**演示：http:** [//jsfiddle.net/TEk9c/](http://jsfiddle.net/TEk9c/)

顺便说一句，如果您需要在用户`textarea`不仅使用鼠标`click`而且使用键盘输入时取消选中所有无线电，您可以使用`focus`事件来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:59:37.723

如果要基于`name`属性，可以使用[Attribute Equals Selector](http://api.jquery.com/attribute-equals-selector/)：

```
$('.item textarea').on('click', function() {
    $(':radio[name="' + this.name + '"]').prop("checked", false);
}); 
```

如果您需要的单选按钮总是相同`div.item`，您甚至可以编写更严格的解决方案。在这个例子中，首先我们找到最近的具有类的父类`item`，并在其中搜索具有相同`name`属性的收音机。

```
$('.item textarea').on('click', function() {
    $(this).closest('.item')
        .find(':radio[name="' + this.name + '"]')
            .prop("checked", false);
}); 
```

**一个有效性说明**：`<input>`是一个[*void 元素*](http://www.w3.org/TR/html-markup/syntax.html#void-element)，它里面不能有内容和关闭属性。你必须使用一个[`<label>`](https://developer.mozilla.org/en/HTML/Element/label)元素来给它一个，嗯，标签：

```
<label><input type="radio" name="group1" value="value1" /> Value1</label> 
```

[添加了标签的 jsFiddle Demo](http://jsfiddle.net/VhTuU/)

# java - 我是否需要扩展 ClassLoader 以重定向 Web 应用程序资源加载？

> ID：10494725
> 
> 赞同：2
> 
> 时间：2012-05-08T07:51:50.110
> 
> 标签：java, web-applications, classloader

我的问题有两个。首先，我将解释这个问题，其次，假设解决方案是实现一个类加载器，那么如何在 Web 应用程序上执行此操作。

我的问题是：我们公司正在使用另一家公司制作的框架。它使用 xml 文件生成网页，这些 xml 文件位于另一个库（jar 文件）中。它并不意味着是动态的，因为这些库是经常生成的（每周？），但它们决定了有多少字段，它收集什么类型的信息（日期时间、组合框等）等等。

现在我的公司提出了一个问题，是否可以动态地移动这些字段（通过动态，我的意思是理想情况下您可以刷新页面并查看对布局所做更改的效果）。我做了一些初步测试，发现修改 xml 确实会在网页上产生预期的效果，但是，由于这些 xml 文件位于 jars 中，这意味着我有两种可能性：

1.  创建一个在我的 Web 应用程序范围之外修改 jar 的工具，尽管这显然意味着它绝对不能是动态的。此外，为了管理该工具，我必须在 Web 应用程序之外创建一个界面。此外，我似乎无法摆脱这样一种印象，即这是一种令人难以置信的 hacky 方法，我应该不惜一切代价避免这种解决方案。
2.  我实现了一个类加载器（特别是`getResourceAsStream`），当我看到加载一个这样的 xml 文件的调用，而不是执行默认行为时，我根据原始生成 xml 文件，根据需要修改信息，然后将资源返回到调用者（在这种情况下是第三方框架）。

第一个问题是，#2 是我最好的选择还是存在其他选择（或者我应该坚持 #1）？

我的第二个问题是，假设我应该实现自己的类加载器，我怎样才能最好地在我的 Web 应用程序上做到这一点？我正在使用 Tomcat 7，但如果可能的话，我希望解决方案独立于我正在使用的 Web 容器。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:24:59.023

您可能可以简单地将 jar 分解到类路径上的目录并即时更新 XML 文件。这不会考虑应用程序中的任何内部缓存（如果有的话，那是一个不同的问题），但它实现起来很简单，并且不会让您陷入充满恶作剧的 ClassLoader 业务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:47:25.300

我不确定我是否理解你的问题。但我想你可以尝试使用 thinkworks 的 xstream api。它可以为你动态生成 xml，给你一个 Java 对象，从这一点开始你可以按照你的方式处理这些 xml现在生成您的网页。我知道这个答案非常琐碎，但是如果这可以引导您找到一个新的 api，可以帮助您以最小的麻烦生成 xml 的新方法，那么我想它会很好地满足您的目的。

# android - ICS 4.0.4 上的安全元素访问控制

> ID：10494726
> 
> 赞同：11
> 
> 时间：2012-05-08T07:52:00.740
> 
> 标签：android, nfc

我将我的 Android 手机更新到 4.0.4，我注意到系统文件夹中出现了一个新文件*nfcee access.xml*。据我了解，该文件的想法是保留签名列表，并仅允许访问 SE 和相关意图，以访问使用此签名之一签名的包。到目前为止，这个列表中当然是谷歌钱包的签名。

有谁知道将来进入这个列表的过程是怎样的？是否需要直接向 Google 请求许可？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T20:51:06.403

如果你root你的手机，你可以修改文件。该文件包含允许访问安全元件 (SE) 的签名和包名称的列表。签名是十六进制编码的 X.509 证书。要创建一个，只需`<debug />`在文件中包含标签，它将打印到 logcat 被拒绝 SE 访问的应用程序的十六进制编码签名，以便轻松剪切并粘贴到此文件中。

要创建可以访问 SE 的应用，您需要将此权限添加到清单中：

```
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

要实际访问 SE，您需要通过导入来访问隐藏的 API `com.android.nfc_extras`：

```
import com.android.nfc_extras.NfcAdapterExtras;
import com.android.nfc_extras.NfcAdapterExtras.CardEmulationRoute;
import com.android.nfc_extras.NfcExecutionEnvironment; 
```

实现这一点的最简单方法是在 Android 源代码树中编译您的应用程序，方法是将其放入`packages/apps`并从那里构建它。您需要将以下行添加到`Android.mk`makefile 以访问 SE API：

```
LOCAL_JAVA_LIBRARIES := com.android.nfc_extras 
```

中的功能`com.android.nfc_extras`允许启用和禁用 SE，向它发送命令并从它接收响应（类似于`IsoDep.transceive()`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T08:22:02.373

This is interesting indeed. If entering your certificate and package name in this file is all that is needed, you shouldn't need to talk to Google, just get whoever is building the ROM (yourself if custom ROM, or a particular carrier) to include it. The bigger problem though is, who do you need to talk to to get the CardManager keys. If it is the carrier, you can also get them to pre-install your applet, so you might not need the keys at runtime (unless you want to use a secure channel to your applet).

Update: Here's a summary of SE support in Android and some more info on how to use the embedded one. In short, it does work, but you can only query stuff of course. It runs JavaCard and is GP 2.1.1 compatible, uses 3DES keys for the secure channel.

[http://nelenkov.blogspot.com/2012/08/accessing-embedded-secure-element-in.html](http://nelenkov.blogspot.com/2012/08/accessing-embedded-secure-element-in.html)

[http://nelenkov.blogspot.com/2012/08/android-secure-element-execution.html](http://nelenkov.blogspot.com/2012/08/android-secure-element-execution.html)

BTW, here's the currently allowed cert on my GN 4.0.4\. A package is not specified, so any app signed with it will get access to the SE:

```
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            a8:cd:17:c9:3d:a5:d9:90
        Signature Algorithm: sha1WithRSAEncryption
        Issuer: C=US, ST=California, L=Mountain View, O=Google Inc., OU=Android, CN=Google NFC
        Validity
            Not Before: Mar 24 01:06:53 2011 GMT
            Not After : Aug  9 01:06:53 2038 GMT
        Subject: C=US, ST=California, L=Mountain View, O=Google Inc., OU=Android, CN=Google NFC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T21:48:09.603

需要注意的是：如果您可以将您的应用程序放在 nfcee_access 列表中，您可以执行以下操作：

*   启用 UICC（SIM 卡）并启用嵌入式安全元件（如果存在）
*   打开与嵌入式安全元件的通信通道并交换数据
*   **如果**UICC 想要向您发送数据（您将只是接收者），则从 UICC（SIM 卡）接收交易数据。

如果您将手机植根，则可以完成所有这些操作。无需破解 nfcee_access 列表即可，您只需拦截到 nfc-chip 的所有流量即可。

即使使用有根电话，您也不能做的事情：

*   在 UICC/eSE 上安装小程序
*   记录/监控/影响嵌入式安全元件/UICC 和外部阅读器（例如黑客支付系统）之间的数据传输。

**警告：当且仅当**您拥有访问嵌入式 SE 的知识和安全访问密钥时，您几乎可以做任何事情。但是，如果您有这些信息，您就不会询问堆栈溢出问题。:-)

这个知识是一个保守的秘密，除非你是像谷歌、万事达卡、签证、美国运通等这样的大公司，否则没有人会告诉你这个秘密。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:25:44.110

答案是否定的，您不能对安全元件做任何事情。只有 SE 所有者或发行人可以允许访问 SE - 即它是 Google 本身，或者可能是 First Data (http://www.firstdata.com/en_us/products/merchants/mobile-commerce/trusted-service-manager -solution.html），但我认为这家公司只对谷歌钱包本身负责，而不对 SE 管理负责——这可能由 SK C&C 完成——我不知道......

也采取这种方式 - 使用嵌入式安全元件的先决条件是您提供优质服务并且您是 Google 合作伙伴或其他手机制造商合作伙伴（除非您来自 Facebook 或类似公司，节省您的时间并且不要尝试）。这并不容易，而且 99.99% 的服务都不存在。

关于安全元件，您现在可以等到 SWP 和 SIM 卡变得更流行和可接受的解决方案，因为您可能更容易在国家层面与 MNO 签订合同，或者希望使用 NFC-WI 和 SD 卡解决方案，或者使用贴纸或外部iPhone 的 iCarte 等配件。

BR 斯坦

# asp.net - 花费 200 万条记录的 Asp.Net GridView

> ID：10494729
> 
> 赞同：2
> 
> 时间：2012-05-08T07:52:12.550
> 
> 标签：asp.net, .net, sql-server, telerik

我做了一项任务，从 sqlserver 获取超过 200 万条记录并将它们填充到 Asp.net GridView 中。

问题是，查询需要超过 2 分钟才能获得记录，而我的查询现在已经完全优化。

当我通过分页从一个页面移动到另一个页面时，它需要再次同时访问服务器。

所以我需要一个解决方案，它在页面移动期间不需要时间，或者在每个请求中只获得 50 或 100 条记录。

谢谢，瑙曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:01:05.300

在 GridView 中使用分页 -[检查此链接](http://www.4guysfromrolla.com/articles/031506-1.aspx)

还可以调整显示属性，例如具有可用可见单元格的显示标题，以更快地加载网格。如果您使用 jQuery 而不是从服务器端绑定网格数据，那就更好了。

[使用此链接开始](http://weblogs.asp.net/ahmedmoosa/archive/2010/10/30/bind-gridview-using-jquery.aspx)

除了使用 GridView，您还可以使用中继器甚至 jQuery 模板，也可以使用自定义分页。那会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:04:53.287

如果您要获取 1000 条记录并使用分页仅显示 50 条，这真的是一种浪费。最好每次显示 50 条记录，这样会快得多。通过以下链接：[使用 SQL Server 存储过程在 ASP.Net GridView 中自定义分页](http://www.aspsnippets.com/Articles/Custom-Paging-in-ASP.Net-GridView-using-SQL-Server-Stored-Procedure.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:54:39.970

这是sqlserver的问题...

优化数据库，分离数据库和表

# android - DummyLocationProvider 问题

> ID：10494730
> 
> 赞同：0
> 
> 时间：2012-05-08T07:52:16.140
> 
> 标签：android

我正在尝试获取纬度和经度，下面是执行此操作的类...但是我在

位置 l = locMgr.getLastKnownLocation(bestProvider);

在 longt = Double.toString(loc.getLongitude());

即使在电话上，提供者也始终显示为 DummyLocationProvider

```
public class Util implements LocationListener {

public static LocationManager locMgr;
private static List<String> providers;
private static String bestProvider;
private Context context;
public static String lat;
public static String longt;

public Util(Context context) {  
    this.context = context;     
    if(locMgr == null)          //Get LocationManager
        locMgr = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
}

public void getLocations() {
    //List All providers
    providers = locMgr.getAllProviders();

    //Get criteria
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);

    //Get best provider
    bestProvider = locMgr.getBestProvider(criteria, false);       
    printProvider(bestProvider);

    //Get Last known location
    Location l = locMgr.getLastKnownLocation(bestProvider);
     if(l==null)
        System.out.println("im null");
    printLocation(l);

}

private void printLocation(Location loc) {

    if(loc == null) {       //means there is no recent location
            getNewLocation();

    }else
            lat = Double.toString(loc.getLatitude());
            longt = Double.toString(loc.getLongitude()); 
            System.out.println("cached " + lat + " " + longt);

}

private void printProvider(String provider) {
    System.out.println(provider);
    LocationProvider info = locMgr.getProvider(provider);
    System.out.println("provider= " + info.toString() + "\n\n");
}

private boolean getNewLocation() {

    if(locMgr.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {                //This is executed since it can get locations faster than gps (is executed only if use wireless networks for locations is selected)

            locMgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
            return true;

    }else if(locMgr.isProviderEnabled(LocationManager.GPS_PROVIDER)) {      //This is exceuted if n/w locations is turned off &  gps is turned on

            locMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
            return true;
    }else {                 //executed when gps & location by network is turned off..             
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:28:22.030

请修改您的代码，它可能对您有所帮助..

```
Location l = context.locMgr.getLastKnownLocation(bestProvider); 
```

# c# - 扩展的 WPF 工具包：RichTextBox 中的“空白”文本

> ID：10494733
> 
> 赞同：1
> 
> 时间：2012-05-08T07:52:23.567
> 
> 标签：c#, wpf, xaml

我在我的应用程序中使用 Extended WPF Toolkit 中的 RichTextBox。我将文本框的内容（带格式）保存在数据库中，当用户清除文本框时，这会导致一些问题。

当用户清除文本时，格式 (XAML) 仍保存在数据库中。

```
<toolkit:RichTextBox
x:Name="TbDesc"
Grid.Row="2"
Margin="3"
Text="{Binding Project.Description, UpdateSourceTrigger=PropertyChanged}"
AcceptsReturn="True"
AcceptsTab="True"
VerticalScrollBarVisibility="Auto">
<toolkit:RichTextBox.Resources>
<Style TargetType="{x:Type Paragraph}">
<Setter Property="Margin" Value="0" />
</Style>
</toolkit:RichTextBox.Resources>
<toolkit:RichTextBox.TextFormatter>
<toolkit:XamlFormatter />
</toolkit:RichTextBox.TextFormatter>
</toolkit:RichTextBox> 
```

如果没有文本，我想清除数据库中的单元格，但 RichTextBox 的文本属性仍然包含格式化 XAML，因此，它存储在数据库中。

# .net - 如何将标签文本更改为已保存文件的名称

> ID：10494734
> 
> 赞同：0
> 
> 时间：2012-05-08T07:52:28.807
> 
> 标签：.net, vb.net, label, savefiledialog

我正在尝试将 Label.text 更改为我要保存的文件的名称选择。这是代码：

```
Dim saveDlg As SaveFileDialog = New SaveFileDialog
    saveDlg.Filter = "JPEG (*.jpeg)|*.jpeg |All Files |*.*"
    saveDlg.Title = "Save Picture"
    saveDlg.InitialDirectory = My.Computer.FileSystem.SpecialDirectories.Desktop
    Try
        If saveDlg.ShowDialog() = DialogResult.OK Then
            PictureBox1.Image.Save(saveDlg.FileName, System.Drawing.Imaging.ImageFormat.Jpeg)
            Txtfile.Text = saveDlg.FileName
            label14.text = ????? 
        End If
    Catch ex As Exception
        'Do Nothing
    End Try 
```

我想将标签文本更改为文件保存的名称，我只想显示名称而不是整个路径。

提前感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:58:16.677

使用[Path.GetFileName(saveDlg.FileName)](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx#Y0)方法。

# html - 将当前地理位置保存到变量

> ID：10494740
> 
> 赞同：1
> 
> 时间：2012-05-08T07:53:04.620
> 
> 标签：html, geolocation, latitude-longitude

如何使用 HTML5 地理定位 API 将 lat 和 lng 值保存到变量中？

这是我的代码，从 w3schools 复制而来。如何将坐标保存到`var x= position.coords.latitude;` 和 var之类的变量中，`y= position.coords.longitude;` 而不是像现在的代码那样显示值？我是 javascript 的初学者，所以我不知道该怎么做

```
 <!DOCTYPE html>
<html>
<body>
<p id="demo">Click the button to get your coordinates:</p>
<button onclick="getLocation()">Try It</button>
<script>

var x=document.getElementById("demo");
window.onload = function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.watchPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
function showPosition(position)
  {
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br />Longitude: " + position.coords.longitude;  
  }
</script>
</body>
</html> 
```

在我的应用程序中，我需要每分钟将这些变量的值发送到服务器。使用 watchposition 进行地理定位或执行每分钟获取当前位置的函数会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:28:01.687

将它们添加到变量中非常简单：

```
var lat = position.coords.latitude;
var lon = position.coords.longitude; 
```

或作为一个对象：

```
var coords = {lat: "", lon: ""}; 
```

然后在代码中使用该对象：

```
function showPosition(position)
{
   coords.lat = position.coords.latitude;
   coords.lon = position.coords.longitude;

   x.innerHTML="Latitude: " + coords.lat + 
   "<br />Longitude: " + coords.lon;  
} 
```

至于将变量发送到服务器，这取决于您的服务器端技术是什么，但您会在 google 上找到很多示例。

```
function sendToServer(){
   // here you can reuse the object to send to a server
   console.log("lat: " + coords.lat);
   console.log("lon: " + coords.lon);
} 
```

# sql - 遇到一种奇怪的查询写法

> ID：10494741
> 
> 赞同：0
> 
> 时间：2012-05-08T07:53:18.053
> 
> 标签：sql

这似乎是stackoverflow上最愚蠢的问题，但我只是想知道你为什么要写这样一个查询：

```
Select e1.Emploee_ID, e1.Departement_ID From Employee e 
Inner join Employee E1 on e.employee_id= e1.Employee_ID
Inner join Departement d on d.dep_id= e1.departement_id 
```

为什么我们必须加入员工？我明显的查询是

```
select e.employee_ID, e.Departement_id from employee e 
inner join  Departement d on d.dep_id= e1.departement_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:03:55.533

使用内部连接引用 PK**是多余**的。

您通常会加入同一个表以链接另一条记录，例如，如果您有一个引用员工老板的 FK 列。

`Boss_ID`假设您在表中有一个可为空的外键列`Employee`

```
Select e.Employee_ID, boss.Employee_id, d.Departement_ID 
From Employee e  
LEFT OUTER JOIN Employee boss on boss.Employee_ID=e.Boss_ID
INNER JOIN Departement d on d.dep_id= e.departement_id 
```

请注意，我使用 LEFT OUTER JOIN 来获取没有老板的员工。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:58:09.143

我能看到什么。您不需要此连接。

```
Inner join Employee E1 on e.employee_id= e1.Employee_ID 
```

这两个查询将给出相同的结果。我在桌子上看不到`JOIN`两次ing的点。`Employee`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:00:44.163

在此查询中，我看不到任何将 Employee 加入 Employee 的理由。过去，我偶尔会在同一个查询中使用同一个表的两个子集，但这里没有发生类似的情况。在我看来，这似乎是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:02:18.700

如果 **employee_id**是PK，那么它没有意义，但如果不是，这两个查询将返回不同的结果。

第一个查询不会返回 NULLemployee_id，并且会为出现 N 次的多个条目返回**N^2 个**结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T08:05:02.760

更简单的是：

> select e.employee_ID, d.dep_name from employee e,Departement d where d.dep_id= e.departement_id

# android - 意图中的附件问题

> ID：10494742
> 
> 赞同：1
> 
> 时间：2012-05-08T07:53:43.447
> 
> 标签：android, android-intent, email-attachments

我一直在使用我使用的 Android 程序来发送带有附件（文本/纯文本）的电子邮件`Intent`但是`Intent.ACTION_SEND`，`Intent.putParcelableArrayListExtra(android.content.Intent.EXTRA_STREAM, uri)`当我尝试通过多次调用将多个文件附加到同一封邮件时`Intent.putExtra(android.content.Intent.EXTRA_STREAM, uri)`，它无法正常工作。电子邮件中未显示任何附件。在此先感谢

```
 final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
      System.out.println(emailText+emailTo);
      emailIntent.setType("text/plain");
      emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,emailText);
      emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
      emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{emailTo});

      //has to be an ArrayList
      ArrayList<Uri> uris = new ArrayList<Uri>();

      //convert from paths to Android friendly Parcelable Uri's
      try
      {
            for (String file : filePaths)
            {
                File fileIn = new File(context.getFilesDir(),file);
                System.out.println(fileIn+"yes");
                Uri u =  Uri.fromFile(fileIn);
                uris.add(u);
                System.out.println(u);
            }
      emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM,uris);
      context.startActivity(Intent.createChooser(emailIntent, "Send mail..."));
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:14:09.663

使用 ACTION_SEND_MUTIPLE 而不是 ACTION_SEND

[http://developer.android.com/reference/android/content/Intent.html#ACTION_SEND_MULTIPLE](http://developer.android.com/reference/android/content/Intent.html#ACTION_SEND_MULTIPLE)

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T10:15:00.620

**确保第二个参数*文件*只提供一个有效的文件名。你的问题可能在那里...**

```
File fileIn = new File(context.getFilesDir(),file); 
```

以下代码可以正常工作..

```
Intent emailIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);
//...
ArrayList<Uri> uris = new ArrayList<Uri>();
uris.add(Uri.parse("file://" + Environment.getExternalStorageDirectory().getPath() + "/HOME/Pictures/1.png"));
uris.add(Uri.parse("file://" + Environment.getExternalStorageDirectory().getPath() + "/HOME/Pictures/2.png"));
uris.add(Uri.parse("file://" + Environment.getExternalStorageDirectory().getPath() + "/HOME/Pictures/3.png"));
uris.add(Uri.parse("file://" + Environment.getExternalStorageDirectory().getPath() + "/HOME/Pictures/4.png"));
emailIntent.putParcelableArrayListExtra(android.content.Intent.EXTRA_STREAM, uris);
startActivity(emailIntent); 
```

# php - apc_exists & apc_add 死锁？(apc & PHP)

> ID：10494744
> 
> 赞同：7
> 
> 时间：2012-05-08T07:53:58.333
> 
> 标签：php, apc

我想知道是否有人发现与或`apc_exists()`一起使用时导致整个 WAMP 服务器挂起的任何奇怪行为？经过长时间的“调试”和最小化问题后，我最终得到了导致我的 WAMP 崩溃的以下代码。`apc_add()``apc_store()`

据我所知，它需要 1`apc_exists()`和 2`apc_add()`访问不同的密钥。[因此听起来像是一个死锁问题] 我在 chrome 中运行这个脚本，然后按下 F5 键，直到我让 rand-thingy 发生两次。在那个时候或第一次它通常会挂起。

```
<?php
$result = "asdfioasdjfoasdjf";
if(apc_exists("asdf")) {
    echo("#1<br/>");
    apc_add("launcher", $result, 1);
} else {
    echo("#2<br/>");
    $result = "asdfasdfasdf";
    apc_add("launcher", $result, 10);
}
if(rand(0,100) < 4) {
    echo("#stored data!<br/>");
    apc_add("asdf", "2130130", 1);
}
?> 
```

我的系统/设置：
Windows 7 64bit
WAMP 2.2d 32bit
PHP 版本 5.3.10
apc 版本 3.1.9 | $修订：325040 $

我在代码中做错了吗？这与 windows / wamp 有关还是存在于其他环境和 php/apc-versions 中？在上述情况下，如果我替换`apc_exists()`为`apc_fetch()`，系统不会崩溃，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T16:18:34.780

我相信我找到了原因。这一切都归结为这个很好的[答案](https://stackoverflow.com/a/4532905/1329367)：

首先，重要的是要知道，如果一个人试图存储一个已经存在的具有特定 TTL 的密钥，并且该 ttl 尚未通过，则会创建一个新条目；密钥是否相同并不重要，内部*将*有两个相同密钥的条目。

其次，APC 可能会失败（未命中）。即使没有明显的原因。为什么？APC 显然是为了速度而不是一致性而创建的，这意味着当 APC 驱动程序忙于进行一些清理时，即使数据存在，它也会简单地返回 NULL 而不是等到它完成。这个的长版本在这里： http: [//ppadvent.org/2010/share-and-enjoy-by-gopal-vijayaraghavan](http://phpadvent.org/2010/share-and-enjoy-by-gopal-vijayaraghavan)

那么问题中提到的具体情况是怎么回事？每个请求之间的时间短于 1 秒，即密钥的指定 TTL，因此如果您尝试将密钥存储在此处，可能会发生重复。“但是，它正在使用 apc_add，那不应该保证密钥仅在它不存在时才被存储吗？” 显然不是 :) 这就是导致死锁随机的原因：有时 apc_add 会按您的预期工作，而其他一些会“错过”，也就是说，即使存在另一个密钥，apc_add 也无法理解。如果 TTL=0，这*可能*不是问题，因为在这种情况下，密钥会被简单地覆盖，但在问题的特定情况下，

由于现在内部有两个具有相同键的条目，所以当使用 apc_exists 时，它会混淆并挂起。

要点：不要在 APC 上存储标志，并始终准备一个备用案例以防它“错过”。APC 似乎在仅用于存储其他地方存在的东西的副本时效果最好（即文件或数据库条目）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:22:40.760

我相信它没有明确提到，但死锁*只*发生在`apc_exists`函数中。`apc_fetch`似乎没有遇到任何僵局。我发现更改`apc_store`for`apc_add`对死锁没有影响，它们发生在两个函数中。

使用的存在检查`apc_fetch`可能如下所示：

```
public function has($key) {
    apc_fetch($key, $exists);
    return $exists;
} 
```

# web-services - 在 amazon s3 中下载分段上传的一部分

> ID：10494746
> 
> 赞同：0
> 
> 时间：2012-05-08T07:54:00.553
> 
> 标签：web-services, amazon-s3, amazon-web-services, cloud

是否可以在亚马逊 S3 中下载多部分上传的一部分？

那是。我已经上传了 10 个部分中的 5 个，然后我意识到我需要重写这些上传部分的一部分，我可以下载那部分重写需要重写的部分并再次上传。还是我需要在本地缓存所有上传的部分才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:10:06.430

为什么要下载上传的部分？您可以更改文件的一部分并重新上传，它将覆盖该部分，然后您可以合并所有部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:38:01.337

你想做的事情是不可能的。一旦文件完成，其部分就不能被替换。

# .net - 从控制台应用程序创建 XAML

> ID：10494751
> 
> 赞同：0
> 
> 时间：2012-05-08T07:54:22.327
> 
> 标签：.net, wpf

我决定将一些 UI 生成卸载到后端，并将其流式传输到客户端。这将允许我在不重新部署客户端的情况下进行一些 UI 更改。

应该直截了当。在服务器端：

```
 string controlToStream = XamlWriter.Save(rootControl); 
```

在客户端：

```
 var stringReader = new StringReader(value);
  var xmlTextReader = new XmlTextReader(stringReader);
  var control = XamlReader.Load(xmlTextReader); 
```

但是，如何在不在链中引入成熟的 WPF 应用程序的情况下访问服务器上的 WPF？服务器代码是典型的 RPC 类型代码块，每次请求进入时都会执行。有没有办法在控制台应用程序中获得对 XAML/控件创建的轻量级访问？

谢谢！

**解决方案更新以供将来参考：**

1.  在控制台应用程序中添加对 WPF dll（在我的情况下为 PresentationCore、Windowsbase、PresentationFramework、System.Xaml）的引用

2.  确保只从 STA 线程调用它们。ParallelExtensionsExtras 的 StaTaskScheduler 派上用场：http: [//blogs.msdn.com/b/pfxteam/archive/2010/04/07/9990421.aspx](http://blogs.msdn.com/b/pfxteam/archive/2010/04/07/9990421.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:02:21.323

我不确定您到底认为什么是“轻量级”，但您可以从控制台应用程序访问所有 WPF 库。

如果出于某种原因不想使用它们，可以将 XAML 视为普通 XML，并仅使用 XML 库来生成它。尽管这很可能需要更多的工作。

# c# - 结合 BindingList 数据源的 DataGridView 性能

> ID：10494757
> 
> 赞同：3
> 
> 时间：2012-05-08T07:54:38.300
> 
> 标签：c#, performance, datagridview, drawing, bindinglist

我正在构建一个必须显示从外部系统接收到的数据的应用程序。这些数据可以很快进入，而每行占用的字节量相对较小。这意味着每个时间单位必须添加很多行。我目前处于接收数据的速度比我可以处理的速度更快的地步，这意味着我的内存使用量正在上升。

我认为其中很大一部分与绘制实际的dataGridView有关。我对 dataGridView 做了一些小调整，希望它已经可以提高性能。（例如禁用自动尺寸、特殊样式等）

在最近的一次添加中，我添加了行的着色，这是必需的。目前我的应用程序工作如下：

1.  我从外部系统接收数据
2.  我通过一个线程将数据放在一个队列（ConcurrencyQueue）中
3.  另一个线程从该队列中获取数据，对其进行处理并将其添加到绑定到表的 BindingList 中。

实际添加发生在具有 2 个参数的函数中： 1\. 包含列项目的列表（项目） 2\. 行的颜色。（颜色）

它看起来如下（半伪）：

```
/* Store the color for the row in the color list so it is accessible from the event */  

rowColors.Add(rowColor);    //Class variable that stored the colors of the rows used in the DataGridCellFormatting event

/* Create the row that is to be added. */
ResultRow resultRow = new ResultRow();

foreach(item in items)
{
    resultRow.Set(item); /* It's actually a dictionary because some fields are optional, hence this instead of a     direct constructor call) */
}

bindingList.Add(resultRow);

/* Row coloring based on error is done in the OnCellFormatting() */

/* Auto scroll down */
if (dataGrid.Rows.Count > 0)
{
    dataGrid.FirstDisplayedScrollingRowIndex = dataGrid.Rows.Count - 1;
} 
```

如上面的代码所示，我收到的颜色被添加到一个列表中，该列表用于 datagridview 的事件，如下所示：

```
void DataGridCellFormattingEvent(object sender, DataGridViewCellFormattingEventArgs e)
{
    // done by column so it happens once per row
    if (e.ColumnIndex == dataGrid.Columns["Errors"].Index)
    {
        dataGrid.Rows[e.RowIndex].DefaultCellStyle.BackColor = rowColors[e.RowIndex];
}
} 
```

BindingList 定义如下：

绑定列表绑定列表；

其中 ResultRow 是一个具有如下结构的类：

```
public class ResultRow
{
    private int first = 0;
    private string second = "";
    private UInt64 third = 0;
    private IPAddress fourth = null;
    //etc

    public ResultRow()
    {
    }

    public void Set (<the values>) //In actuallity a KeyValuePair
    {
        //field gets set here
    }

    public UInt64 Third
    {
        get { return third; }
        set { third = value; }
    }

    /* etc. */ 
```

我可以做一些相对简单的事情来提高性能吗？我正在考虑可能在处理繁忙时禁用数据网格的绘制，并在完成时绘制。（虽然不是首选）另一件事可能是不那么频繁地更新，而不是在每个收到的项目之后更新。（不过，BindingList 似乎会在添加某些内容时自动更新 DataGridView）

我希望有人愿意/能够提供帮助。

-编辑-

当它以上述方式处理数据时，尤其是在一段时间之后，表单的响应能力也很差。（即使上述过程发生在后台工作人员和后台线程中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T08:25:02.980

由于网格中的行数过多，性能可能会在一段时间后下降。你应该试试[虚拟模式。](http://msdn.microsoft.com/en-us/library/15a31akc.aspx)

但首先，尝试推迟网格的更新并批量添加新条目，即降低更新频率。因此，在每次批量更新之前：

```
// stop raising update events
bindingList.RaiseListChangedEvents = false; 
```

之后：

```
// restore update events, raise reset event
bindingList.RaiseListChangedEvents = true;
bindingList.ResetBindings() 
```

在最后一行之后继续滚动到最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:18:55.873

是的，您可以采取一些措施来加快速度。

首先 - 虚拟化数据网格。这是 winforms 数据网格的内置机制，它只会填充行并为可见的数据项绘制客户区域。因此，如果您的控件仅显示 20 行（以及其他行的滚动条），那么实际上只有 20 个项目作为 UI 处理到数据网格中。然后，当您滚动网格以查看其他项目时，数据网格会根据需要填充并显示请求的行。您需要对此进行一些修改（需要订阅 CellValueNeeded 事件），并且您可能需要编辑您的 bindingsource 数据项。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms171622.aspx](http://msdn.microsoft.com/en-us/library/ms171622.aspx)。

您可以做的第二件事是在填充数据“块”时暂停 UI 更新。正如您已经指出的，当您向其添加项目时，bindinglist 将自动更新网格。但是通过暂停 UI 更新，然后以一定的时间间隔（比如每秒）重新启用，您将以不太恒定的速率传输数据。但是请注意，仍然需要对数据进行相同的处理，因此这不太可能完全解决您的数据，并且可能更有效地减少屏幕闪烁。请参阅`Control.SuspendLayout()`和`Control.ResumeLayout()`了解更多信息。

在我看来，虚拟化将是您最有效的工具，因为它的唯一目的是改进非常大数据集的网格功能。

# html - 使用 Sencha Touch 2 + PhoneGap 将数据从 Web 服务复制到本地存储

> ID：10494760
> 
> 赞同：1
> 
> 时间：2012-05-08T07:54:56.123
> 
> 标签：html, cordova, sencha-touch, extjs, sencha-touch-2

伙计们，我是 Sencha Touch 2 的新手……我尝试在商店中使用以下代码调用 Web 服务并将其显示在列表中……

```
Ext.define("NotesApp.store.Notes", {
    extend: "Ext.data.Store",
    config: {
        model: "NotesApp.model.Note",
        proxy: {
            type: 'jsonp',
            url: 'http://someURL/ServiceSencha.php',
            id: 'notes-app-store',
            extraParams: {
                type: 'fetch'
            },
            reader: {
                type: 'json',
                rootProperty: 'Data'
            }
        },
        sorters: [{ property: 'dateCreated', direction: 'ASEC'}],
        grouper: {
            sortProperty: "dateCreated",
            direction: "ASEC",
            groupFn: function (record) {

                if (record && record.data.dateCreated) {
                    return record.data.dateCreated.toDateString();
                } else {
                    return '';
                }
            }
        }
    }
}); 
```

上面的代码工作正常..

所以现在我正在尝试从 web 服务复制整个数据并将其本地存储在 HTML5 localStorage 中。

请各位大侠帮帮我怎么做...

# java - 使用填充密码解密时，输入长度必须是 16 的倍数

> ID：10494764
> 
> 赞同：19
> 
> 时间：2012-05-08T07:55:02.997
> 
> 标签：java

我有一个服务器和客户端套接字程序，服务器向客户端发送加密消息，即服务器端代码：

```
cipher2 = Cipher.getInstance("AES"); 
secretKeySpec = new SecretKeySpec(decryptedText, "AES");
cipher2.init(Cipher.ENCRYPT_MODE, secretKeySpec);
feedback = "Your answer is wrong".getBytes();
cipher2.doFinal(feedback);
dos.writeInt(feedback.length);
dos.write(feedback); 
```

客户端代码：

```
int result_len = 0;
result_len = din.readInt();            
byte[] result_Bytes = new byte[result_len];
din.readFully(result_Bytes);
cipher2 = Cipher.getInstance("AES");
cipher2.init(Cipher.DECRYPT_MODE, aesKey);             
byte[] encrypt = cipher2.doFinal(result_Bytes); 
```

异常抛出`byte[] encrypt = cipher2.doFinal(result_Bytes);`

```
javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher
    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:750)
    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:676)
    at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:313)
    at javax.crypto.Cipher.doFinal(Cipher.java:2086) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2019-09-12T08:16:16.170

这是一个非常古老的问题，但我的回答可能会对某人有所帮助。

*   在 encrypt 方法中，不要忘记将您的字符串编码为 Base64
*   在解密方法中，不要忘记将您的字符串解码为 Base64

**下面是工作代码**

```
 import java.util.Arrays;
    import java.util.Base64;

    import javax.crypto.Cipher;
    import javax.crypto.SecretKey;
    import javax.crypto.spec.SecretKeySpec;

    public class EncryptionDecryptionUtil {

    public static String encrypt(final String secret, final String data) {

        byte[] decodedKey = Base64.getDecoder().decode(secret);

        try {
            Cipher cipher = Cipher.getInstance("AES");
            // rebuild key using SecretKeySpec
            SecretKey originalKey = new SecretKeySpec(Arrays.copyOf(decodedKey, 16), "AES");
            cipher.init(Cipher.ENCRYPT_MODE, originalKey);
            byte[] cipherText = cipher.doFinal(data.getBytes("UTF-8"));
            return Base64.getEncoder().encodeToString(cipherText);
        } catch (Exception e) {
            throw new RuntimeException(
                    "Error occured while encrypting data", e);
        }

    }

    public static String decrypt(final String secret,
            final String encryptedString) {

        byte[] decodedKey = Base64.getDecoder().decode(secret);

        try {
            Cipher cipher = Cipher.getInstance("AES");
            // rebuild key using SecretKeySpec
            SecretKey originalKey = new SecretKeySpec(Arrays.copyOf(decodedKey, 16), "AES");
            cipher.init(Cipher.DECRYPT_MODE, originalKey);
            byte[] cipherText = cipher.doFinal(Base64.getDecoder().decode(encryptedString));
            return new String(cipherText);
        } catch (Exception e) {
            throw new RuntimeException(
                    "Error occured while decrypting data", e);
        }
    }

    public static void main(String[] args) {

        String data = "This is not easy as you think";
        String key = "---------------------------------";
        String encrypted = encrypt(key, data);
        System.out.println(encrypted);
        System.out.println(decrypt(key, encrypted));
      }
  } 
```

**对于生成密钥，您可以使用下面的类**

```
 import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.util.Base64;

import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;

public class SecretKeyGenerator {

    public static void main(String[] args) throws NoSuchAlgorithmException {

        KeyGenerator keyGenerator = KeyGenerator.getInstance("AES");

        SecureRandom secureRandom = new SecureRandom();
        int keyBitSize = 256;
        keyGenerator.init(keyBitSize, secureRandom);

        SecretKey secretKey = keyGenerator.generateKey();

 System.out.println(Base64.getEncoder().encodeToString(secretKey.getEncoded()));
    }

} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-04-14T17:45:40.260

有类似的问题。但了解根本原因很重要，并且可能因不同的用例而异。

**场景 1**
您正试图解密一个最初未正确编码的值。

```
byte[] encryptedBytes = Base64.decodeBase64(encryptedBase64String); 
```

如果由于某种原因字符串配置错误或未正确编码，您将看到错误“使用填充密码解密时输入长度必须是 16 的倍数”

**场景 2**
现在，如果您在 url 中使用此编码字符串（尝试在 url 中传递 base64Encoded 值，它将失败。您应该执行 URLEncoding 然后传递令牌，它将起作用。

**场景 3**
与其中一家供应商集成时，我们发现我们必须使用 URLEncoder 对 Base64 进行加密，但随后我们不需要对其进行解码，因为它是由供应商内部完成的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-20T08:58:01.140

我知道这条消息很旧并且很久以前 - 但我也遇到了完全相同的错误：

我遇到的问题与加密文本被转换为字符串的事实以及`byte[]`尝试解密它时有关。

```
 private Key getAesKey() throws Exception {
    return new SecretKeySpec(Arrays.copyOf(key.getBytes("UTF-8"), 16), "AES");
}

private Cipher getMutual() throws Exception {
    Cipher cipher = Cipher.getInstance("AES");
    return cipher;// cipher.doFinal(pass.getBytes());
}

public byte[] getEncryptedPass(String pass) throws Exception {
    Cipher cipher = getMutual();
    cipher.init(Cipher.ENCRYPT_MODE, getAesKey());
    byte[] encrypted = cipher.doFinal(pass.getBytes("UTF-8"));
    return encrypted;

}

public String getDecryptedPass(byte[] encrypted) throws Exception {
    Cipher cipher = getMutual();
    cipher.init(Cipher.DECRYPT_MODE, getAesKey());
    String realPass = new String(cipher.doFinal(encrypted));
    return realPass;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T08:02:29.170

看看这个答案：[Encrypt and decrypt with AES and Base64 encoding](https://stackoverflow.com/questions/3954611/aes-encript-and-decript-problem-with-apache-base64)

# actionscript-3 - 如何使 SpriteAsset 在 flex 中可见/不可见？

> ID：10494767
> 
> 赞同：0
> 
> 时间：2012-05-08T07:55:53.270
> 
> 标签：actionscript-3, apache-flex

我有 SpriteAsset 对象作为 DisplayObject。我想让它在运行时可见/不可见。我用过类似的东西.. objSpriteAsset.visible = false; 但它只是使它被禁用（不可点击）但可见。没有为 SpriteAsset 类定义 setVisible()。有什么解决办法吗？

# javascript - 如何在 JavaScript 中使用 nodejs 加密模块

> ID：10494771
> 
> 赞同：0
> 
> 时间：2012-05-08T07:56:27.223
> 
> 标签：javascript, node.js, node-crypto

有什么方法可以在 JavaScript 中使用 nodejs“crypto”模块，而无需实际使用 node。

或者是否有任何类似的 javascript 库可以完成“加密”所做的所有事情

就像我在 nodejs 的帮助下需要下面的 javascript 代码

```
 var crypto = require('crypto'),
     hash = crypto.createHash('sha256'),
     hmac = crypto.createHmac('sha256', someKey); 
```

**基本上我需要在javascript中复制下面而不使用节点**

```
var bytesToSign = hash.update(stringToSign).digest(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:12:12.583

node.js 加密模块基于 openssl 库

你可以试试[这个](http://www.bichlmeier.info/sha256.html)sha256 摘要的原生 js 实现

# c++ - 旋转加载在 IDirect3DSurface9 上的大图像

> ID：10494774
> 
> 赞同：0
> 
> 时间：2012-05-08T07:56:45.087
> 
> 标签：c++, directx, directx-9

我必须旋转大于 4096x4096 的图像。（即 4096x8192）。

图像从文件加载到使用以下方法调用创建的 IDirect3DSurface9：

```
CreateOffscreenPlainSurface(width, height, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, &surface.s, NULL); 
```

简单的图像操作（平移和缩放）是在 StretchRect 函数的帮助下完成的。但是，当要在表面上旋转图像时，我必须锁定源图像和目标图像的矩形。然后我必须在 CPU 中旋转太慢的图像。这是一个简单地将表面旋转 90 度的示例代码。

```
SurfaceScopedLock srcImageLock(*srcImage.s, &result);
SurfaceScopedLock dstImageLock(*dstImage.s, &result);
D3DLOCKED_RECT& lrSrc = srcImageLock.getLockedRect();
D3DLOCKED_RECT& lrDst = dstImageLock.getLockedRect();

//Format is D3DFMT_A8R8G8B8 = 4 bytes per pixel so we cast it to unsigned int
unsigned int* sourceImgData = ((unsigned int*)lrSrc.pBits);
unsigned int* destImgData = ((unsigned int*)lrDst.pBits);
int srcStep = lrSrc.Pitch / sizeof(unsigned int);
int dstStep = lrDst.Pitch / sizeof(unsigned int);
for (int i = 0; i < srcImage.height; i++)
{
    for (int j = 0; j < srcImage.width; j++)
    {
        int srcIndex = i * srcStep + j;
        int dstIndex = j * dstStep + i;
        destImgData[dstIndex] = sourceImgData[srcIndex];
    }
} 
```

有没有办法通过任何方法加速这个过程？即将表面分割成多个纹理，旋转每个纹理并将它们合并回来。如果是这样，有人可以提供代码示例吗？

笔记：

*   目标表面由 CreateRenderTarget 函数创建，它是可锁定的。
*   SurfaceScopedLock 是 IDirect3DSurface9.LockRect 和 UnlockRect 函数的包装器。

# java - 这些类型是如何区分的？

> ID：10494781
> 
> 赞同：1
> 
> 时间：2012-05-08T07:57:13.227
> 
> 标签：java, primitive-types

我在这里读到[@java.sun](http://java.sun.com/docs/books/jni/html/objtypes.html)，它*`int[] iarr`*是一个原始数组并且*`int[][] arr2`*是一个对象数组。原始类型和对象类型有什么区别？以上两者有何不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:02:05.163

`int[]`是一个原始数组，因为它包含原始类型的元素`int`。每个数组本身都是对象，因此基元数组也是对象。

`int[][]`是 的数组`int[]`，即 的每个元素都`int[][]`包含整数数组。但是由于数组是一个对象`int[][]`，它包含对象，而不是整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T08:01:24.820

从您提供的链接：

> 原始数组包含原始类型的元素，例如 int 和 boolean。对象数组包含引用类型的元素，例如类实例和其他数组

在第一种情况下，每个数组元素都是一个`int`，它是一个原始类型，从而产生一个*原始数组*。在第二种情况下，数组的每个元素都是`int[]`，它是一个数组，因此是一个对象（数组本身就是一个对象）。

# c# - LINQ to SQL 的内存泄漏

> ID：10494783
> 
> 赞同：2
> 
> 时间：2012-05-08T07:57:28.347
> 
> 标签：c#, .net, linq-to-sql

我有一个程序，它将从数据库中读取 100 万条记录，并在经过一些处理后将记录插入到另一个表中。因此，程序调用 DAO API 来获取 100 万条记录并在内存中循环它们。插入也是使用 DAO API 来进行插入。每个 DAO API 部分都实现为

```
 public static void Main(string[] args)
    {
        List<TableA> tableAs = GetTableAs();
        TableB tableB = null;
        foreach (var tableA in tableAs) {
           tableB.id = tableA.id;
           // ...
           // here I copy/modify records from table A
           // ...
           InsertTableB(tableB);
        } 
    }

    public static List<TableA> GetTableAs()
    {
        using (var ctx = new TableDataContext())
        {
            var entities = from e in ctx.tableAs
                           select e;
            return new List<tableA>(entities);
        }
    }

    public static void InsertTableB(TableB tableB)
    {
        using (var ctx = new TableDataContext())
        {
            ctx.tableBs.InsertOnSubmit(tableB);
            ctx.SubmitChanges();
        }
    } 
```

我的程序在插入 500k 后会遇到“内存不足”异常，并且非常一致。而且我注意到循环时内存使用量不断增加。我什至强制垃圾收集也无法回收任何内存。我与 LINQ 的交互是否有任何问题，导致内存被阻塞而不被释放。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:07:19.310

首先，我认为您应该重新考虑编写该代码的方式，现在它的效率非常低，例如您每次都重新创建上下文，为什么不只保留一个上下文？

更好的是，将其重写为单个 SQL 语句会为您省去所有麻烦。

重新创建上下文在 CPU 方面是相当繁重的，如果您只需要一个连接，正如您在上面的示例中所示，那么多次创建它就是浪费资源。

其次，LINQ to SQL 对您创建、编辑、修改的每个对象进行更改跟踪，因此它知道要处理哪些对象。并且可能是您的记忆问题的根源。

所以我建议使用 ObjectTrackingEnabled = false 看看会发生什么。

最后你想看看批量插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T14:39:47.127

尝试使用 linq2sql 插入超过 3000000 行时，我遇到了同样的问题。插入 700k 后出现 OutOfMemoryException。最后，我只是处理以前的 DataContext 并在 100k 之后创建新的，甚至不关闭跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:55:14.910

问题很可能不在于 .NET CLR 中的内存泄漏，而可能在于上述 LINQ to SQL 代码需要执行的大量内存。

请先参考这篇 MSDN 博文：http: [//blogs.msdn.com/b/tom/archive/2008/04/10/chat-question-memory-limits-for-32-bit-and-64-bit -processes.aspx](http://blogs.msdn.com/b/tom/archive/2008/04/10/chat-question-memory-limits-for-32-bit-and-64-bit-processes.aspx)

由于我没有任何硬件规格，我将假设内存限制为 2800MB，就像上面的文章一样。

```
1,000,000 records <= 2800MB
1,000,000 records <= 23,488,102,400 bits
1 record <= 23488.1024 bits
1 record <= 2.8672KB 
```

理论上，这意味着从表 A 复制到内存中的每条记录不应超过 2.8672KB。

但是，由于 CLR 涉及的其他开销，实际值通常较低，这反映在从表 A 深度复制 500,000 条记录然后插入表 B 后引发的 OutOfMemoryException。

诚然，有一些方法可以增加可以保存在内存中的记录数量，就像其他海报所建议的那样，但随着表 A 中记录数量的增加，问题很可能会再次出现。

一个可行的替代方案可能是在底层 SQL Server 数据库中创建一个存储过程并执行它。

# sharepoint-2010 - 尝试添加带有图像的列表项时，共享点中的 Com 异常

> ID：10494786
> 
> 赞同：0
> 
> 时间：2012-05-08T07:58:04.087
> 
> 标签：sharepoint-2010

我无法将新闻添加到我的 sharepoint 网站上的页面列表。例外：

```
 System.Runtime.InteropServices.COMException: Cannot complete this action.
 Please try again.

 <nativehr>0x80004005</nativehr><nativestack></nativestack> 
```

只有设置新闻中的图像字段才能重现问题！

我的新闻有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:32:49.250

不确切知道问题的根源是什么，但是当从站点中删除定义和内容类型并再次添加异常时，异常消失了。

# asp.net - 级联组合框无法正常工作

> ID：10494787
> 
> 赞同：1
> 
> 时间：2012-05-08T07:58:05.227
> 
> 标签：asp.net, combobox

我有两个组合框（国家和州）。组合框 2（州）应使用组合框 1（国家）中选择的值加载关联的州。

问题是，第一次选择国家组合框项目时，会在第二个组合框中加载正确的关联国家。但是，当在组合框 1 中选择另一个值时。组合框内的值仍显示旧值。

**注意：-**第二次 NewValues 在组合框 2 中正确加载。但是当单击组合框箭头时不会显示这些值（只有旧值可见）。但是，如果我们在第二个组合框中键入任何内容，则会显示新值。

**问题：- 我希望每次将新值加载到第二个组合框中，它应该在单击组合框箭头时显示。不仅仅是在输入内容之后。**

班级：-

```
protected void Countries_SelectedIndexChanged(Object sender, Telerik.Web.UI.RadComboBoxSelectedIndexChangedEventArgs e)
{
    int countryIDselected = Convert.ToInt32(Countries.SelectedValue);
    bool AdvanceSearchFlag = true;
    Session["AdvanceSearchFlag"] = AdvanceSearchFlag;
    Session["countryIDselected"] = countryIDselected.ToString();

    int totalStates = States.Items.Count;
    int xyz = totalStates - 1;        if (totalStates != 0)
    {
        while (totalStates > 0)
        {
            States.Items.Remove(totalStates - 1);
            totalStates --;
        }
    }
    States.Items.Clear();
}

protected void States_ItemsRequested(object sender, Telerik.Web.UI.RadComboBoxItemsRequestedEventArgs e)
{
    foreach (StateyLookupInfo state in StateLookupList.GetList(false))
    {
        RadComboBoxItem item = new RadComboBoxItem(State.StateName, State.StateID.ToString());
        comboBox.Items.Add(item);
    }
} 
```

ASPX:-

```
<telerik:RadComboBox ID="Countries" runat="server" AutoPostBack="True" OnSelectedIndexChanged="Countries_SelectedIndexChanged" />
<telerik:RadComboBox ID="States" runat="server" AutoPostBack="True" EnableLoadOnDemand="true" OnItemsRequested="States_ItemsRequested" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:40:30.980

您是否尝试设置 EnableLoadOnDemand="false"？

# jquery - 通过jQuery从文件上传框中获取数据

> ID：10494788
> 
> 赞同：0
> 
> 时间：2012-05-08T07:58:06.437
> 
> 标签：jquery, wordpress, contact-form-7

我已经在我的站点中实现了联系表 7，现在我想使用该[`attr('value', val)`函数](http://api.jquery.com/attr)获取文件输入框的值。

当我在我的 Firefox 控制台中运行它时它正在工作，但是当我在我的文件中使用它时它不起作用。

我的代码如下所示：

```
var val = jQuery(".filebrowse").val();
jQuery('.file-input').attr('value', val); 
```

我的联系表格 7 输入文件框有一个类`.filebrowse`，我想将它的值提取到我的输入框中哪个类是`.file-input`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:33:03.480

```
jQuery(".filebrowse").each(function(index,value){

  jQuery('.file-input')[index].val(value);

}); 
```

# python - 如何将字符串文字转换为字符串？

> ID：10494789
> 
> 赞同：16
> 
> 时间：2012-05-08T07:58:08.800
> 
> 标签：python, string, string-literals

我想将字符串文字转换为`r"r'\nasdf'"`字符串（`'\\nasdf'`在这种情况下）。

另一种情况：`r"'\nasdf'"`对`'\nasdf'`. 我希望你能明白。

这很重要，因为我有一个 python 脚本解析器，它想知道字符串文字的确切内容。

是`eval`一个聪明的解决方案吗？字符串文字在 (with `tokenize`) 之前被过滤，不应导致安全责任。没有比评估文字*更崇高的解决方案吗？*也许是解析器库？

**编辑**：添加了其他示例，以避免误解。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-08T08:31:54.943

你想要[`ast`模块](http://docs.python.org/library/ast.html)：

```
>>> import ast
>>> raw = r"r'\nasdf'"
>>> ast.literal_eval(raw)
'\\nasdf'
>>> raw = r"'\nasdf'"
>>> ast.literal_eval(raw)
'\nasdf' 
```

这是一种评估/解析包含 Python 源代码的字符串的安全方法（不同于`eval()`）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T07:59:52.290

是的，有：

```
>>> s = r'\nasdf'
>>> s.decode('string-escape')
'\nasdf' 
```

# ios - 按下 segue 时停止动画导航栏

> ID：10494794
> 
> 赞同：0
> 
> 时间：2012-05-08T07:58:22.787
> 
> 标签：ios, navigation, uinavigationbar, uistoryboardsegue

我有大小提示的导航栏。当推送到目标 segue 时，我在父导航栏中设置的图像将导航栏动画呈现为子导航栏的默认设置。如何停止此动画并保留子导航栏的大小和默认样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:02:50.050

`navigationBar`在_

```
-(void) viewWillAppear:(BOOL)animated 
```

要重置更改，您可以`navigationBar`在子视图`viewWillAppear`或根视图中返回默认设置

```
-(void) viewWillDisappear:(BOOL)animated 
```

更好的选择取决于您需要什么。

# c# - 从 JPG 读取 EXIF 数据

> ID：10494796
> 
> 赞同：5
> 
> 时间：2012-05-08T07:58:29.780
> 
> 标签：c#, jpeg, exif

我需要分析数千个 jpeg 文件（通过检索 EXIF 数据）。这是超过 50 GB 的数据。我无法读取整个文件，因为它会花费太多时间。

C# 中是否有任何方法可以仅从这些文件中读取 EXIF 数据，而无需加载和解压缩整个 jpeg 文件？

编辑：为什么我需要快速方法？
我已经尝试了这个问题的解决方案：[How to get the EXIF data from a file using C#](https://stackoverflow.com/questions/58649/how-to-get-the-exif-data-from-a-file-using-c-sharp)
And for 1000 images with total size ~ 1GB it takes 3 minutes to analyze. 因此，对于更大 (50G) 的照片库，可能需要 2 个小时。当您需要几乎即时的信息时，例如：“您的客户首选使用什么缩放”，它太慢了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T08:04:49.403

您将在[ExifLib - A Fast Exif Data Extractor for .NET 2.0+](http://www.codeproject.com/Articles/36342/ExifLib-A-Fast-Exif-Data-Extractor-for-NET-2-0)（以及一个完整项目）中找到一些代码示例，展示了如何读取获取 EXIF 信息所需的最少数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-03T13:26:32.920

我最近将我的 Java*元数据提取器*库移植到 .NET。它自 2002 年以来一直很活跃，并通过广泛使用进行了大量测试。在我的测试中，它翻阅了 2GB 的图像，在我的机器上大约 4 秒内提取了所有元数据。您可以通过告诉它只读取特定类型的元数据（例如 Exif）来进一步优化。它支持许多图像/视频格式和许多元数据类型。

在[GitHub](https://github.com/drewnoakes/metadata-extractor-dotnet)和[NuGet](https://www.nuget.org/packages/MetadataExtractor)上可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T12:35:40.760

[GdPicture.NET Imaging SDK](http://www.gdpicture.com/products/gdpicture-net)从版本 10 开始提供了一种新的图像解析机制，允许直接访问图像元数据（EXIF、GPS、XMP、IPTC...）而无需解码像素。它支持 90 多种图像格式，包括 JPEG、TIFF、RAW 和 WebP。

这是 GdPicture.NET 知识库的链接，该知识库演示了如何使用 C# 和 VB.NET（也支持许多其他语言）提取元数据：[教程](http://guides.gdpicture.com/content/webframe.html#Accessing%20image%20metadata%20in%20direct%20access%20mode.html)

如果有人需要进一步的信息，我很乐意提供帮助。

免责声明：我是 GdPicture.NET 的产品架构师。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:03:16.347

您不需要解压缩任何东西，Exif 信息保存在图像之前的标头中，因此您需要做的就是打开文件，读取 exif 标头并解码您需要的任何内容。这是如果您手动读取 exif 数据（这并不难）。

如果您只需要尺寸，那就在前面

编辑：请注意 exif 数据实际上不必在前面，但它几乎总是在前面，因此可以安全地假设它通常会比不是在前面要快得多。

另外，您是否检查过使用标准 API 是否“太慢”？我不会想到 50G 需要那么长时间（或者如果以不同的方式进行操作必然会更快）。

# javascript - 在 Arduino 上与 Javascript 共享 C 变量

> ID：10494797
> 
> 赞同：1
> 
> 时间：2012-05-08T07:58:30.200
> 
> 标签：javascript, c, arduino

我正在 Arduino 上编写一个简单的 Web 服务器。我基本上通过 C 代码中的方法将 HTML、CSS 和 Javascript 发送给客户端。现在我需要一个 Javascript if-case 中的 C 变量，我需要在不使用 ASP.NET 的情况下完成它。

```
client.println("if (%c == 1) {",stat[0]); 
```

我尝试更改数据类型，尝试使用带有加号的 Java 风格，甚至尝试先将其存储在字符串中，然后将其发送；没有任何效果。

stat[0] 被声明并随时间变化。

我从编译器得到的错误：

*Webserver4.cpp:217:40: 错误: 重载 'println(const char [15], byte&)' 的调用不明确 C:\mpide-0023-windows-20111221\hardware\pic32\cores\pic32/Print.h: 66:7：注意：候选人是：void Print::println(char, int)* (...)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:32:11.637

正如评论者所指出的，它可能应该`if (%c == 1)`在发出的 Javascript 代码中。

另外，请注意您发出的表达式是恒定的，因此您也可以重构您的 C 代码以直接发出正确的代码（如果`if`计算结果为 true，则采用的代码），并降低发出的代码。

您没有显示 的​​ C 声明`stat`，这使得很难确定您做对了。对于`%c`格式化代码和数组索引，它应该是一个字符数组，这有点奇怪，因为您发出的代码是与整数进行比较的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:00:55.110

编译问题是由于对象`printXxx()`上可用的函数`client`不支持`printf`格式说明符。虽然不清楚它的类型`client`是什么，但它显然是内置 Arduino 类的子[`Print`](https://github.com/arduino/Arduino/blob/master/hardware/arduino/cores/arduino/Print.h)类。

要使用格式说明符，您必须分两步进行，例如（注意`byte`Arduino 中的 a 实际上是 a`uint8_t`并且`PRIu8`是这种类型的格式说明符）：

```
#define __STDC_LIMIT_MACROS 1
#include <inttypes.h>

// ...

char ifStatement[13];
sprintf(ifStatement, "if (%" PRIu8 " == 1) {", stat[0]);
client.println(ifStatement);

client.println("// JavaScript code to execute if stat[0] == 1");

client.println("}"); 
```

另外，请注意，这假设它`stat[0]`始终是一个数字。如果它有两个或多个数字，`ifStatement`缓冲区将溢出，破坏内存。

但是，由于（[正如 unwind 指出的那样](https://stackoverflow.com/a/10495196/4023)）JavaScript if 语句从浏览器的角度来看基本上是恒定的，因此在 Arduino 代码中执行此操作可能会更简单：

```
if (stat[0] == 1) {
    client.println("// JavaScript code to execute if stat[0] == 1");
} 
```

# c# - 从 ClassLibrary 项目文件（即 ASP.net 中的 DLL 文件）获取所有方法失败？

> ID：10494807
> 
> 赞同：0
> 
> 时间：2012-05-08T07:59:08.657
> 
> 标签：c#, asp.net, dll, methods, reference

我已经使用 3 种方法从 ClassLibrary 项目创建了一个 DLL，但它只显示了该 DLL 文件中的一个方法。为什么会这样？为什么我看不到 DLL 中的所有方法？我已经更新了构建 ClassLibrary 项目并再次在 Web 项目中引用，但它仍然只显示 3Methods 中的一种方法。请帮助...！

在 DLL 文件中 3Methods： 方法 1：

```
private DataTable SearchConstituencyDetails(int ConstituencyNumber, int Partnumber, int SerialInPart, string tabltoconnect, string conString)
{
// Some code here
} 
```

方法二：

```
public DataTable NameSearch(string searchExpression, string sAge, char language, string conString)
{
//Some code here
} 
```

方法三：

```
private DataRow SearchConstTable(int ConstituencyNumber, int Partnumber, int SerialInPart, string conString)
{
//some code here
} 
```

但只能检索： asp.net 项目中此 DLL 中的**public DataTable NameSearch(string searchExpression, string sAge, char language, string conString)**方法，而不是所有三种方法为什么会发生这种情况..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:01:48.657

将 Private 访问器更改为 Public，它将起作用。

# iphone - 以编程方式从 iPhone 获取 IMEI 号码

> ID：10494811
> 
> 赞同：0
> 
> 时间：2012-05-08T07:59:25.020
> 
> 标签：iphone, ios5

> **可能重复：**
> [如何在 iPhone 上获取 IMEI？](https://stackoverflow.com/questions/823181/how-to-get-imei-on-iphone)

如何以编程方式从 iPhone 获取 IMEI？

有没有我必须添加到我的项目中的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:00:45.863

```
NSString *imeinumber = [[NetworkController sharedInstance] IMEI]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T08:02:05.177

您无法通过公共 API 获取 IMEI。如果您想获得一些设备标识符以在您的应用程序中使用，您必须使用 UIDevice 类中定义的 uniqueIdentifier 属性——它正是为了这个目的而存在的。

```
NSString* uniqueID = [UIDevice currentDevice].uniqueIdentifier; 
```

您可以使用私有框架获取 IMEI - 请参阅[此问题](https://stackoverflow.com/questions/823181/how-to-get-imei-on-iphone)，但您的应用将被应用商店拒绝。

# mysql - Django 数据库设置错误

> ID：10494818
> 
> 赞同：0
> 
> 时间：2012-05-08T08:00:07.377
> 
> 标签：mysql, django, orm

我执行以下操作：

我的脚本.py

```
# settings.py
from django.conf import settings
from django.db import models
from myApp.models import *

    settings.configure(
        DATABASE_ENGINE    = 'django.db.backends.mysql',
        DATABASE_NAME      = 'Test',
        DATABASE_USER      = 'root',
        DATABASE_PASSWORD  = 'testpw',
        DATABASE_HOST      = '/var/run/mysql',
        DATABASE_PORT      = '3306',
        INSTALLED_APPS     = ('myApp')
    )

    from django.db import models
    from myApp.models import * 
```

使用以下 settings.py

```
DATABASE_ENGINE    = 'mysql'
DATABASE_NAME      = 'Test'
DATABASE_USER      = 'root'
DATABASE_PASSWORD  = 'testpw'
DATABASE_HOST      = '/var/run/mysql'
DATABASE_PORT      = '3306'
INSTALLED_APPS     = ('myApp') 
```

我的设置有误，但不知道错误是什么。数据库运行良好，可通过密码和用户名访问...在我的 manage.py 中，我接下来执行：`"DJANGO_SETTINGS_MODULE", "standAlone.myScript"`

这是我的错误： `raise ImproperlyConfigured("settings.DATABASES is improperly configured. "django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:38:50.417

从 Django 1.2 开始，`DATABASE_*`不推荐使用设置系列以支持新`DATABASES`设置。在 1.4 中它被完全删除，这意味着从 1.4 开始您*必须*使用该`DATABASES`设置。

请参阅文档： [https](https://docs.djangoproject.com/en/dev/ref/settings/#databases) ://docs.djangoproject.com/en/dev/ref/settings/#databases https://docs.djangoproject.com/en/dev/internals/deprecation/#id1

**更新：** 重写

```
 DATABASE_ENGINE    = 'django.db.backends.mysql',
    DATABASE_NAME      = 'Test',
    DATABASE_USER      = 'root',
    DATABASE_PASSWORD  = 'testpw',
    DATABASE_HOST      = '/var/run/mysql',
    DATABASE_PORT      = '3306', 
```

到

```
DATABASES = {
    'default' : {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'Test',
        'USER': 'root',
        'PASSWORD': 'testpw',
        'HOST': '/var/run/mysql',
        'PORT': '3306',
    }
} 
```

你已经准备好了。

**更新：**
作为旁注，不要尝试`settings.configure`在命令行脚本中使用，推荐的运行批处理作业的方法是创建[管理命令](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)。这样您就不必重复设置或弄乱环境，并且由于使用与常规 Web 应用程序相同的机制加载设置，因此可以保证它们是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T07:06:53.053

确保使用正确的数据库配置更新了 settings.py 文件，然后尝试 python manage.py syncdb 并检查是否有错误

# iphone - 获取图像的选定（摩擦）区域的坐标，如应用程序 Cinemagram

> ID：10494820
> 
> 赞同：2
> 
> 时间：2012-05-08T08:00:18.763
> 
> 标签：iphone, ios, xcode

获取图像的选定（摩擦）区域的坐标，如应用程序 Cinemagram

任何帮助我将如何进行摩擦以选择所需的图像区域，例如应用程序 Cinemagram

我也想像应用程序一样获取选定（或摩擦）图像区域的坐标

电影摄影

# ruby - Ruby if 语句评估

> ID：10494821
> 
> 赞同：1
> 
> 时间：2012-05-08T08:00:27.640
> 
> 标签：ruby

我想从 post 参数中迭代一个键值对数组：

```
Parameters:
  {"utf8"=>"✓",
  "authenticity_token"=>"c6VYssp33I075nfv1ViPty38+aZSkWM/jh6oll2pYS8=", 
  "permission"=>
    {"employment_id"=>"7", 
     "organisation_level"=>"all_below", 
     "permissions"=>"view_permissions", 
     "users"=>"", 
     "organisation"=>"", 
     "functions"=>"", 
     "statistics"=>""}, 
  "commit"=>"Opslaan"} 
```

我从这些参数中取出权限映射并尝试处理它。基本上我想检查**键是否不是employment_id 并且值是否存在**。

```
params.each do |k,v|
  if(!(k.eql?"employment_id") && v.present?)
   p v
  end

end 
```

在为每个运行 if 语句时，我遇到了一些奇怪的行为，**我想知道是否有人可以对这种情况有所了解**

我最终得到了这个 if 语句，它像我期望的那样工作和评估。它仅在值不是`""`或`nil`并且键不是时打印值`employment_id`

```
if(!(k.eql?"employment_id") && v.present?)
  p v
end 
```

但是，以下 2 个 if 语句无法按我的预期工作。两者都打印所有值。他们评估，`true`而我认为他们不应该。

```
if(!k.eql?"employment_id" && v.present?)
  p v 
end 
```

和

```
if !k.eql?"employment_id" && v.present?
  p v 
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T08:11:10.493

造成您困惑的原因是操作的优先级，尤其是在您省略括号的情况下。在您的情况下，这些语句的评估如下：

```
if(!k.eql?"employment_id" && v.present?)
# equivalent to 
if (!(k.eql?("employment_id" && v.present?)))

if !k.eql?"employment_id" && v.present?
# equivalent to 
if !k.eql?("employment_id" && v.present?) 
```

在这里，`"employment_id" && v.present?`评估为`true`。所以本质上，你问的是`!k.eql?(true)`哪个，`k`作为一个字符串总是评估为`true`（因为否定）。

为了规避这个问题，请确保正确使用括号。最好您应该将它们用于这样的方法调用

```
k.eql?("employment_id") 
```

而不是喜欢

```
(k.eql? "employment_id") 
```

这样，您就可以清楚地说明方法参数是什么，并避免歧义，然后需要优先解决这些歧义。如果参数真的很清楚，我个人倾向于只省略方法括号。尤其是在像你这样的更复杂的陈述中，省略它们并因此降低清晰度是没有多大意义的。

# git - 如何在 git 中找到 HEAD？

> ID：10494825
> 
> 赞同：0
> 
> 时间：2012-05-08T08:00:40.417
> 
> 标签：git, head

可能是由于误用`git reset ...`，我失去了 HEAD 的踪迹。我在一个提交中，它非常落后于我所做的最后一次提交，如下图所示：

COMMIT n <- 期望回到这里 COMMIT n-1 ... ... <-- HEAD 在这里

并且 ORIG_HEAD 出于某种原因变得与 HEAD 相同。那么我怎样才能让 HEAD 回到我的最后一次提交呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:00:58.690

运行`git reflog show master`以显示 master 分支的 reflog 历史记录。

# css - 设计只允许内容滚动的网页 - Dreamweaver

> ID：10494832
> 
> 赞同：0
> 
> 时间：2012-05-08T08:01:21.133
> 
> 标签：css, html, dreamweaver

**我打算使用 Dreamweaver 设计一个网页，该网页仅滚动页面上的内容。滚动时使背景图像无效。**

**Sub Qstn - 当页面向下滚动网页时，如何允许始终位于顶部的标题处于活动状态。Facebook.com 将此功能归因于蓝色标题始终保持活动状态。**

我期待在 Dreamweaver 中进行指令设计。使用其他方法和软件工具对响应表示赞赏。如果两个问题的答案是分开的，我会很高兴的。

**内容 - 即基本上是 LOGO、文字、图片以及背景图像上方的任何内容。*

**标题 - 即通常是 LOGO 的位置​​，主要是放置菜单的位置。我希望你明白我在 Facebook 中指的是什么。*

提前感谢和干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:17:08.833

我可以将您链接到正确的方向。

正如在使用固定标题滚动到锚点时提到的[，隐藏在标题后面的内容、边距和顶部填充不起作用，](https://stackoverflow.com/questions/4835885/scroll-to-anchor-with-fixed-header-content-hidden-behind-header-margin-and-top)您可以在[http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo上获得子问题的答案/#method-D](http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/#method-D) 注意当内容上下滚动时导航是如何固定的。

请在 w3schools [http://www.w3schools.com/css/tryit.asp?filename=trycss_background-attachment](http://www.w3schools.com/css/tryit.asp?filename=trycss_background-attachment)上查看有关固定背景的演示。希望这可以帮助。

对于其中的很多内容，您至少需要一些 html/css 知识 Dreamweaver 在您需要学习 html 和 css 之前只能做这么多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:13:03.703

关于固定标题：

在 CSS 中，这是通过以下方式实现的：

```
#header {
    position: fixed;
}
#content {
    padding-top: enough; /* otherwise the header would hide the beginning of content */
} 
```

这种方法有很多问题：

*   按空格滚动一页将忽略部分页面被固定内容占用的事实。内容不再完全占据一页的高度，略少。
*   固定页脚更糟糕：通过链接和表单元素使用键盘选项卡，但它们会出现在固定页脚下方。请不要这样做，或者有办法在每个用户的基础上禁用它。
*   它将在上网本上占用有用的屏幕空间；1024 x **600**像素减去操作系统栏、窗口栏、浏览器菜单：没有那么多高度了！
*   用户知道您的标题或菜单在哪里：在页面顶部。他们知道网络是如何工作的，没关系。您仍然可以提供“转到顶部”链接/快捷方式，它们在长页面上很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:35:36.830

```
background: url("asdf.jpg") fixed; 
```

# facebook - 使用 HTTP 和 HTTPS 返回不同的 getUser()

> ID：10494833
> 
> 赞同：0
> 
> 时间：2012-05-08T08:01:22.993
> 
> 标签：facebook, http, redirect, https, zero

我向您发送此消息是因为我在为 Facebook 上的比赛创建应用程序时遇到了困难。

我的应用程序有两个不同的 URL，一个在 HTTPS 中，另一个在 HTTP 中。但是当用户访问与她的安全设置不对应的这个 url 之一时，getUser() 方法返回 0，我被重定向到我的应用程序的主页，而不是我通过的 app_data 参数的目标页面在 Facebook URI 中。

问题是什么 ？该怎么办？先感谢您

对不起我的英语不好，我是法国人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:44:55.543

我以前也遇到过同样的问题，不仅是我和你，很多开发人员都遇到过同样的问题。我花了四天时间解决它，我尝试了大量的解决方案，但没有任何结果。最后我解决了它并得到了问题：我确定配置和其他事情......然后解决方案是将您的应用程序托管在具有真实域的网络托管服务器上。然后将您的应用程序配置为使用此域...

我建议您尝试此解决方案。

# javascript - javascript点击更改href并在新窗口中打开

> ID：10494835
> 
> 赞同：0
> 
> 时间：2012-05-08T08:01:24.820
> 
> 标签：javascript, jquery, django, django-socialauth

我有一个 Django 项目，它为用户提供了将用户帐户与 Twitter 和 Facebook 等社交网络帐户相关联的可能性。这适用于 Django Social Auth，它基本上提供了一个标签来了解当前用户是否已经关联了帐户。它允许以下代码相应地显示 URL：

```
<fieldset id="social_associations" class="">
    <legend>Social Associations</legend>

{% for key, value in social_auth.items %}
    <img src="/static/img/{{ key }}_icon.png" alt="{{ key }}" width="25" height="25" />
    {% if value %}
        <a href="/social/disconnect/{{ key }}">Disconnect from {{ key }}</a>
    {% else %}
        <a href="/social/login/{{ key }}">Associate your account to {{ key }}</a>
    {% endif %}
    <br />
{% endfor %}
</fieldset> 
```

这是 Django 模板代码，执行时将给出以下 html（当然，显示的 hrefs 会根据用户的个人资料而变化，如果帐户与社交网络相关联，这里我会同时显示连接（用于 Facebook）和断开（对于 Twitter）URL）：

```
<fieldset id="social_associations" class="">
<legend>Social Associations</legend>
<img width="25" height="25" alt="twitter" src="/static/img/twitter_icon.png">
<a href="/social/disconnect/twitter">Disconnect from twitter</a>
<br>
<img width="25" height="25" alt="facebook" src="/static/img/facebook_icon.png">
<a href="/social/login/facebook">Associate your account to facebook</a>
<br>
</fieldset> 
```

这工作正常，但有各种缺点。首先，单击时，链接将通过打开关联/断开页面失去当前导航。这可以通过不打开它们来解决，如果存在的话，只需用 javascript 调用 GET（我记得用 javascript 调用 POST 来发送一些数据，GET 也必须是可能的？）。然后另一个缺点是点击时链接不会自动更新，必须重新加载页面。这可以通过更改 href 来解决，如果它是 'associate' 则显示 'disconnect'，如果它是 'disconnect' 则显示 'associate' 并切换 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:50:58.803

## 不是最好的方法……</h2>

……但速度很快（使用 jQuery）。您应该能够通过创建例如相应的 ajax 视图来改进它。

（未经测试的代码，但给出一个想法）

```
$('a', '#social_associations').live('click', function(e){
    e.preventDefault();
    $('#social_associations').load($(this).attr('href') + ' #social_associations');
}); 
```

# java - VM 特定的 HTTP 代理身份验证

> ID：10494836
> 
> 赞同：1
> 
> 时间：2012-05-08T08:01:34.100
> 
> 标签：java, http, proxy, ntlm

我认为这应该很容易用谷歌找到，但是在彻底搜索并试图理解实际实现但没有完全成功之后，我想这里有人可能有一个想法：Are the implementation specific details on HTTP proxy authentication in Oracle's Java VM （Java 6）记录在某处？

如果没有，也许有人可以对我们遇到的一些问题有所了解：

*   系统属性 http.proxyUser 和 http.proxyPassword 显然不再支持。那是对的吗？

*   如果代理提供多个身份验证方案，则使用哪种身份验证方案？好像是第一个。实际上这并不重要，但 NTLM 方案的实现似乎表现不同，因此在我们的案例中了解实际使用哪种方案很重要。

*   如果 Java 决定使用 NTLM 进行身份验证，则并不总是使用提供的 Authenticator。至少在 Windows 下，使用当前进程所有者的凭据进行身份验证尝试。从实际实现中并不明显，但我在网上发现的其他讨论表明，如果第一次尝试失败，则在第二次尝试中使用来自 Authenticator 的凭据。在我们的例子中，IIS 代理在第一次身份验证尝试时返回“502 bad gateway”错误，因此 Java 实现可能假定问题与身份验证凭据无关，因此在没有进一步身份验证尝试的情况下立即失败。有人可以确认这是正确的吗？

# android - 重新绑定后台服务进程（Android）

> ID：10494838
> 
> 赞同：1
> 
> 时间：2012-05-08T08:01:39.200
> 
> 标签：android, service, background

我一直在对此进行一些研究，但没有找到明确的答案。

功能挑战是：

a) 使用布局启动活动 (OK)

b) 按按钮（标记为 START）单击 is 启动后台服务（确定）

c) 虽然活动可以关闭，但后台服务必须继续运行（OK）

d) 后台进程还在，我可以在我的通知中看到（OK）

e) 活动从通知重新开始（OK）

f) 活动必须连接到流程并取回它的状态。只需检查服务是否正在运行并将开始-停止按钮的标签从 (b) 设置为 STOP。

e) 点击按钮将停止服务，这样就可以了。

以下是一些细节：

与我的服务 LogoTimerService 的连接是在这样的活动中完成的：

```
private ServiceConnection mConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        // We've bound to LocalService, cast the IBinder and get
        // LocalService instance
        LogoTimerServiceBinder binder = (LogoTimerServiceBinder) service;
        mService = binder.getService();
        mBound = true;
    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
        mBound = false;
    }
}; 
```

ON RESUME 我调用这个函数来实际连接：

```
private void connectLogoTimerService() {
    Log.i(tag, "-connecting service");

    Intent intent = new Intent(this, LogoTimerService.class);
    startService(intent);
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE);

    if (mService!=null) 
        Log.i(tag, "-SERVICE BOUND");
    else
        Log.i(tag, "-Service NOT bound");
} 
```

当我第一次启动应用程序时，我收到第二条（未绑定）消息。

**为什么不绑定？是要慢吗？（好像在玩。）**

如果我不破坏活动，则会找到 mService。

**我怎样才能同步这个，所以我可以恢复状态？**

我启动并绑定服务。它是否正确？

我可以看到该服务正在使用此代码运行（我在此站点上找到了它，谢谢）：

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager
            .getRunningServices(Integer.MAX_VALUE)) {
        if (LogoTimerService.class.getName().equals(
                service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:10:17.213

回答您的第一个问题是因为 bindService 是“异步”的。您将在调用 onServiceConnected 之前输入 if 语句。

# android - 尝试录制视频时出现 VerifiyAndSetParameter 错误

> ID：10494839
> 
> 赞同：0
> 
> 时间：2012-05-08T08:01:45.397
> 
> 标签：android, video-capture

我一直在尝试创建一个应用程序来记录视频并将其上传到 S3 存储桶。我一直在使用（稍作改动）[Android 捕获视频意图文章](http://developer.android.com/guide/topics/media/camera.html#intent-video)。但是当录制结束时，我会得到一个错误列表。（我使用的是 Galaxy S2 手机，因此受支持）。

**CameraActivity 的代码：**

```
 Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
        fileUri = SavingMedia
                .getOutputMediaFileUri(SavingMedia.MEDIA_TYPE_VIDEO);
        path = fileUri.toString();

        intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 30);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
        intent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION,
                ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0.2);

        startActivityForResult(intent, CAPTURE_VIDEO_REQUEST_CODE); 
```

**LogCat 输出：**

```
05-08 10:46:31.875: E/CameraInput(2595): Recording is not ready (iPeer 0xfbb3c iState 2 iWriteState 1 iClockState 0), frame dropped
05-08 10:46:31.910: E/CameraInput(2595): Recording is not ready (iPeer 0xfbb3c iState 2 iWriteState 1 iClockState 0), frame dropped
05-08 10:46:31.945: E/CameraInput(2595): Recording is not ready (iPeer 0xfbb3c iState 2 iWriteState 1 iClockState 0), frame dropped
05-08 10:46:31.975: E/CameraInput(2595): Recording is not ready (iPeer 0xfbb3c iState 2 iWriteState 1 iClockState 0), frame dropped
05-08 10:46:33.455: E/yamaha::media::Parameters(2595): SalesCode = PTR
05-08 10:46:33.705: E/CameraInput(2595): Unsupported parameter(x-pvmf/media-input-node/cap-config-interface;valtype=key_specific_value)
05-08 10:46:33.705: E/CameraInput(2595): VerifiyAndSetParameter failed on parameter #0
05-08 10:46:33.705: E/audio_input(2595): unsupported parameter: x-pvmf/media-input-node/cap-config-interface;valtype=key_specific_value
05-08 10:46:33.705: E/audio_input(2595): VerifyAndSetParameter failed
05-08 10:46:33.740: E/AndroidRuntime(29786): FATAL EXCEPTION: main
05-08 10:46:33.740: E/AndroidRuntime(29786): java.lang.NullPointerException
05-08 10:46:33.740: E/AndroidRuntime(29786):    at java.io.File.fixSlashes(File.java:205)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at java.io.File.init(File.java:189)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at java.io.File.<init>(File.java:139)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1206)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:812)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.sec.android.app.camera.CeStateRecording.handleRequest(CeStateRecording.java:69)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.sec.android.app.camera.CeRequestQueue.startFirstRequest(CeRequestQueue.java:123)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.sec.android.app.camera.CeRequestQueue.access$200(CeRequestQueue.java:32)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.sec.android.app.camera.CeRequestQueue$MainHandler.handleMessage(CeRequestQueue.java:60)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at android.os.Looper.loop(Looper.java:123)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at java.lang.reflect.Method.invokeNative(Native Method)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at java.lang.reflect.Method.invoke(Method.java:507)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-08 10:46:33.740: E/AndroidRuntime(29786):    at dalvik.system.NativeStart.main(Native Method)
05-08 10:46:33.770: E/(2806): Dumpstate > /data/log/dumpstate_app_error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:10:47.947

伙计，您应该看到以下问题的答案，它对我有用，绝对对您有用。

[Android：视频录制引发错误](https://stackoverflow.com/questions/10545760/android-video-recording-throws-error)

注意：我有以下相同的错误

在 com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1206)

解决方案：在 Android 2.2、2.3 中工作......我已经完成了以下过程来拍摄照片

```
int CAMERA_WITH_VIDEO_DATA = 2;
//start photo capture activity...

 Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE, null);
 startActivityForResult(intent, CAMERA_WITH_VIDEO_DATA);

....
....

private void saveVideoFileOnActivityResult(Intent videoIntent){
   FileInputStream fis = null;
   FileOutputStream fos = null;
   File mCurrentVideoFile = null;
   try {
         mCurrentVideoFile = new File("path_to_your_file");
         AssetFileDescriptor videoAsset = getContentResolver().openAssetFileDescriptor(videoIntent.getData(), "r");
         fis = videoAsset.createInputStream();
         //File videoFile = new File(Environment.getExternalStorageDirectory(),"<VideoFileName>.mp4"); 
         fos = new FileOutputStream(mCurrentVideoFile);

         byte[] buffer = new byte[1024];
         int length;
         while ((length = fis.read(buffer)) > 0) {
               fos.write(buffer, 0, length);
          }       
         //fis.close();
         //fos.close();
   } catch (IOException e) {
      // TODO: handle error
     e.printStackTrace();
   }finally{
       try {
           if(fis!=null)
              fis.close();
           if(fos!=null)
              fos.close();
       } catch (Exception e2) {
        // TODO: handle exception
        e2.printStackTrace();
       }
   } 
   }
....
....

 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
switch (requestCode) {
case CAMERA_WITH_VIDEO_DATA:
//pass data to above method to save it.
saveVideoFileOnActivityResult(data);
break;

default:
break;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:43:25.843

好的，我改进了我的 Logcat 以查看错误从哪里开始，程序失败的第一行是：

```
05-08 10:46:33.740: E/AndroidRuntime(29786):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1206) 
```

一个快速的谷歌搜索把我带到了[这个地方](http://www.www.dektak.com/questions/10545760/android-video-recording-throws-error)，显然它`MediaStore.EXTRA_OUTPUT` **不能**正常工作并且有问题。

这是那里写的答案：

> 实际上，我发现在某些情况下 MediaStore.EXTRA_OUTPUT 无法正常工作，所以另一种技巧是将捕获的视频文件存储在 onActivityResult()

```
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
   super.onActivityResult(requestCode, resultCode, intent);

   if (resultCode == RESULT_OK) {   
      try {
          AssetFileDescriptor videoAsset = getContentResolver().openAssetFileDescriptor(intent.getData(), "r");
          FileInputStream fis = videoAsset.createInputStream();
          File videoFile = new File(Environment.getExternalStorageDirectory(),"<VideoFileName>.mp4"); 
          FileOutputStream fos = new FileOutputStream(videoFile);

          byte[] buffer = new byte[1024];
          int length;
          while ((length = fis.read(buffer)) > 0) {
             fos.write(buffer, 0, length);
         }       
         fis.close();
         fos.close();
         } catch (IOException e) {
            // TODO: handle error
        }
   }
} 
```

# sql - MS ACCESS SQL：如何进行嵌套计数

> ID：10494847
> 
> 赞同：0
> 
> 时间：2012-05-08T08:02:12.557
> 
> 标签：sql, ms-access-2007

我正在尝试计算 userid = 1 的消息数，然后计算所有其他 userid 的消息数并打印出消息数 = userid = 1 的消息数的人的姓名。

所以我需要做一个嵌套计数。我有 2 张桌子。消息和用户。

例如：

```
SELECT COUNT(*)
FROM MESSAGES
WHERE user_id = 1 
```

结果是2。那么我需要

```
SELECT COUNT(*)
FROM MESSAGES
WHERE COUNT(*) = 2 
```

我如何为此进行嵌套计数，以便我可以执行类似的操作

```
SELECT USER.user_name
FROM MESSAGES INNER JOIN USER ON MESSAGES.user_id = USER.user_id
WHERE COUNT(*) = (    
SELECT COUNT(*)
FROM MESSAGES
WHERE user_id = 1
) 
```

上面的例子对我不起作用。我正在使用 MsAccess。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:09:49.370

尝试使用`HAVING`语法

```
SELECT USER.user_name
FROM MESSAGES INNER JOIN USER ON MESSAGES.user_id = USER.user_id
GROUP BY MESSAGES.user_id, USER.user_name
HAVING COUNT(*) = (    
SELECT COUNT(*)
FROM MESSAGES
WHERE user_id = 1
) 
```

# arm - ARM：APCS 和 AAPCS ABI 有什么区别？

> ID：10494848
> 
> 赞同：9
> 
> 时间：2012-05-08T08:02:18.357
> 
> 标签：arm

我目前正在将一个为 ARM 编写的编译器移植到另一个目标架构。`ABI`我发现ARM存在两种不同的类型：`APCS_ABI`和`AAPCS_ABI`.

我用谷歌搜索并参考了 ARM 手册，但没有发现它们之间的区别。

然而，在编译器后端的实现中，这两种`ABIs`处理方式不同，并且有不同的实现。

顺便说一下，`APCS`是ARM Procedure Call Standard的缩写，是`AAPCS`ARM Architecture的Procedure Call Standard的缩写。（他们的意思不是一样吗？）

`APCS`那么和 和有什么区别`AAPCS`呢？为什么定义了两种不同的类型`ABIs`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T08:17:50.443

从[ARM 文档](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf)，

> PCS 过程调用标准。
> 
> ARM 体系结构的 AAPCS 过程调用标准（本标准）。（**现行标准**）
> 
> APCS ARM 过程调用标准（**已过时**）。

此外，来自同一个文档，

> **AAPCS 体现了 APCS 的第五次主要修订**和 TPCS 的第三次主要修订。它构成了 ARM 体系结构的完整 ABI 规范的一部分。

所以你可以忘记过时的`APCS`并开始关注`AAPCS`

# python - 旧式类、新式类和元类

> ID：10494853
> 
> 赞同：5
> 
> 时间：2012-05-08T08:02:30.793
> 
> 标签：python, class, metaclass, new-style-class

`object`在 Python 2.x 中，所有新样式的类都隐式或显式继承自。然后看看这个：

```
>>> class M(type):
...     pass
...
>>> class A:
...     __metaclass__ = M
...
>>> class B:
...     pass
...
>>> a = A()
>>> b = B() 
```

```
>>> type(A)
<class '__main__.M'>
>>> type(a)
<class '__main__.A'> 
```

这是否意味着`A`是新式班？但无论如何`A`都不会继承`object`，对吧？

```
>>> type(B)
<class 'classobj'>
>>> type(b)
<type 'instance'> 
```

好的，`B`是经典的课程，不是吗？

```
>>> isinstance(A, object)
True
>>> isinstance(B, object)
True 
```

为什么是both`A`和`B`的实例`object`？

如果`B`是 的一个实例`object`，那么`type(B)`不会是`classobj`，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T08:43:56.640

关于元类，您可以在此处阅读：http: [//docs.python.org/reference/datamodel.html#customizing-class-creation](http://docs.python.org/reference/datamodel.html#customizing-class-creation)。通常，元类旨在与新样式类一起使用。当你写：

```
class M(type):
    pass 
```

你使用：

```
class C:
    __metaclass__ = M 
```

您将创建一个新样式对象，因为定义 M 的方式（默认实现用于`type`创建新样式类）。您始终可以实现自己的元类，该元类将使用`types.ClassType`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:46:12.253

关于插槽，您可以在这里阅读[http://docs.python.org/release/2.5.2/ref/slots.html](http://docs.python.org/release/2.5.2/ref/slots.html)，一个片段：

> 默认情况下，新旧类的实例都有一个用于属性存储的字典。

对于您可以添加的新型类`__slots__`，将不会创建每个对象的字典。

# jquery - 通过识别活动链接的位置来制作菜单悬停动画

> ID：10494857
> 
> 赞同：0
> 
> 时间：2012-05-08T08:02:59.373
> 
> 标签：jquery, menu, jquery-animate, mouseover, mouseout

Soo，我有这个脚本：[我的 jsfiddle](http://jsfiddle.net/Autodealers/q2AVN/)

如您所见，它在悬停菜单项时会产生动画，但是当 li 中断时，活动 div 将忽略它并决定飞走。

我建议访问我的链接以更好地理解我的问题。关于如何解决这个问题的任何想法？

先感谢您！
亲切的问候，
乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:39:57.447

动画找到 li 悬停位置的索引（例如，如果它是第 5 个，则 index = 5 `li`），并简单地将绝对定位元素的左边距计算为悬停项目宽度的许多倍。动画没有考虑浮动下降，包括垂直定位。

而不是这样，动画绝对定位元素的 left 和 top 属性，使其与悬停的项目相同。

我在这里做了这个：http: [//jsfiddle.net/q2AVN/7/](http://jsfiddle.net/q2AVN/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:22:46.587

One possible idea is to make menu items not to break. Otherwise it will be hard to rewrite the animation.

In order to do that you can use CSS style `white-space: nowrap` applied to the parent element (i.e. `ul` or `div`) and setting style `display: inline-block` (instead of `float: left`) to `li` elements.

# php - 选择查询的变化

> ID：10494858
> 
> 赞同：3
> 
> 时间：2012-05-08T08:03:06.283
> 
> 标签：php, mysql

我有这样的邻接列表模式结构

![在此处输入图像描述](../Images/e72e655996d75f3db77bb641b18322dd.png)

通过这个查询

```
SELECT t1.name AS lev1, t2.name as lev2, t3.name as lev3, t4.name as lev4
FROM category AS t1
LEFT JOIN category AS t2 ON t2.parent = t1.category_id
LEFT JOIN category AS t3 ON t3.parent = t2.category_id
LEFT JOIN category AS t4 ON t4.parent = t3.category_id
WHERE t1.name = 'ELECTRONICS'; 
```

得到这样的结果

![在此处输入图像描述](../Images/7470607cd2aeec87dd43a34cc7e7c85d.png)

但我想得到这样的结果，有什么选择吗

![在此处输入图像描述](../Images/3d7dc23efb070ad219f5be8a1a0f1b03.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:18:28.770

不幸的是，使用当前设置很难计算一个类别的子类别数量。不仅菜单的深度受`LEFT JOIN`您添加的 's 数量的限制，而且也无法分辨哪些类别直接链接到超过一级深度的类别。

这个问题的一个很好的解决方案是`nested set`为你的菜单使用一个结构，[你可以在这里阅读更多](http://en.wikipedia.org/wiki/Nested_set_model)。更多解释如何在[此处](http://www.fliquidstudios.com/2008/12/23/nested-set-in-mysql/)使用 mysql 执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:54:27.390

您将需要一个 UNION，我建议删除相应级别的条目重复项。此外，如果您打算像在 Web 应用程序中一样向用户展示，则无需包含“NULL”值......

```
select L1.Category_ID,
       L1.name, 
       "1" as HierarchyLevel, 
       count( L2.Category_ID ) as NextLevelCount
   from Category L1
        LEFT JOIN Category L2
           on L1.Category_ID = L2.Parent
   where L1.name = "ELECTRONICS"
   group by L1.Category_ID
UNION
select L2.Category_ID,
       L2.name, 
       "2" as HierarchyLevel,
       count( L3.Category_ID ) as NextLevelCount
   from Category L1
        JOIN Category L2
           on L1.Category_ID = L2.Parent
           LEFT JOIN Category L3
              on L2.Category_ID = L3.Parent
   where L1.name = "ELECTRONICS"
   group by L2.Category_ID
UNION
select L3.Category_ID,
       L3.name, 
       "3" as HierarchyLevel,
       count( L4.Category_ID ) as NextLevelCount
   from Category L1
        JOIN Category L2
           on L1.Category_ID = L2.Parent
           JOIN Category L3
              on L2.Category_ID = L3.Parent
              LEFT JOIN Category L4
                 on L3.Category_ID = L4.Parent
   where L1.name = "ELECTRONICS"
   group by L3.Category_ID
UNION
select L4.Category_ID,
       L4.name, 
       "4" as HierarchyLevel,
       1 as NextLevelCount
   from Category L1
        JOIN Category L2
           on L1.Category_ID = L2.Parent
           JOIN Category L3
              on L2.Category_ID = L3.Parent
              JOIN Category L4
                 on L3.Category_ID = L4.Parent
   where L1.name = "ELECTRONICS" 
```

这显然固定为 4 个级别，但会将它们合并到一个列表中，但没有您提供的重复项。我还添加了层次结构级别，仅供参考。为了获得每个级别的计数，您必须执行 LEFT JOIN 到下一个级别，否则，您将错过您尝试检索的级别的可能项目，但其他项目应保留为 INNER JOIN。

如果您正在处理产品，我认为如果不是经过 4 层深他们就找不到东西，那就是一个更大的问题 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:12:52.970

作为一个兴趣点，因为它可能工作量太大并且与您必须成为“答案”的不同，我建议您研究“修改的预排序树遍历”的概念。Gijs Van Tulder有一个很好的[解释](http://www.sitepoint.com/hierarchical-data-database-2/)。

它将需要表上的附加字段来存储层次结构数据，并需要额外的代码来维护该结构，但它可以使树结构*更*容易在关系数据库引擎中处理。

基本上，除了`parent_id`我们用树存储的通常情况外，我们还存储 a`left`和 a`right`值。`node.left > parent.left`正确填充后，只需选择所有节点 where和，就可以轻松获得“节点的所有子节点” `node.right < parent.right`，而不管节点的深度如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:15:13.890

你可以这样做：

```
SELECT name FROM category WHERE name = 'ELECTRONICS'

UNION

SELECT t2.name FROM t2 INNER JOIN category as t1 ON t2.parent = t1.category_id WHERE t1.name = 'ELECTRONICS'

UNION

SELECT t3.name FROM t3 INNER JOIN category as t1 ON t3.parent = t1.category_id WHERE t1.name = 'ELECTRONICS'

UNION

SELECT t4.name FROM t4 INNER JOIN category as t1 ON t4.parent = t1.category_id WHERE t1.name = 'ELECTRONICS' 
```

# visual-c++ - 检查 Visual C++ 6.0 项目是否支持 unicode？

> ID：10494859
> 
> 赞同：0
> 
> 时间：2012-05-08T08:03:08.437
> 
> 标签：visual-c++, visual-c++-6

我需要知道 Visual C++ 6.0 项目是否支持 Unicode。我该如何检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:10:10.153

如果项目是使用 Unicode 支持编译的，那么将定义预处理器指令`UNICODE`（或）。`_UNICODE`测试以查看是否已定义将为您提供答案：

```
#if defined(UNICODE) || defined(_UNICODE)
    // The project is compiled for Unicode
#else
    // The project is NOT compiled for Unicode
#endif 
```

您也可以在项目的设置中检查这一点。

1.  从“项目”菜单中，单击“设置”。
2.  选择“C/C++”选项卡。
3.  在“预处理器定义”部分，检查是否存在`UNICODE`和`_UNICODE`。

如果您有一个当前*不是*针对 Unicode 的项目，但您想看看它是否*可以*，那么最好的办法是定义这些预处理器指令，然后尝试编译您的项目。如果它成功了，那么你就设置好了。如果失败，请检查并更正编译器发出的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:10:00.460

```
#ifdef UNICODE
#   error Success!
#endif 
```

# java - 需要关于地图验证路径框架的建议

> ID：10494865
> 
> 赞同：9
> 
> 时间：2012-05-08T08:03:44.723
> 
> 标签：java, algorithm, perl, geolocation, geospatial

我面临的问题如下：

给定定义迷宫边界的两个多边形和中间的路径（见下图），我想知道我何时越过迷宫的边界。

关于我的输入：

*   一个文件定义两个多边形的边缘（仅连接直线的点）
*   一份包含我访问过的所有航点的文件，按出现顺序排列

我需要根据在受限区域中花费的时间来计算该路径的分数。

**最好的方法是什么？（算法/技术/库）我没有技术限制，所以解决方案可以是任何东西，例如 Java、C、Perl（这是我最喜欢的）等**

我开始研究解决方案，但后来我意识到这个问题过去一定已经解决了数百万次，没有理由“重新发明轮子”:)

我是地理/几何类问题的新手，我将不胜感激任何关于我应该采取什么方法的建议。

干杯

![示例地图](../Images/27949ce480d3bc91ad5c4a1e86ba4281.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T08:27:32.263

这是 [多边形中的一个点](http://en.wikipedia.org/wiki/Point_in_polygon)

1.  从“一个文件定义两个多边形的边缘（仅连接直线的点）”构建多边形列表
2.  为每个“我访问过的航点”应用 point_in_polygon()（[perl 实现，你最喜欢的）](http://code.activestate.com/lists/perl-win32-users/394/)

# c++ - 如何确定知名组中用户的成员身份为Everyone

> ID：10494866
> 
> 赞同：1
> 
> 时间：2012-05-08T08:03:47.547
> 
> 标签：c++, windows, winapi, access-token

在我目前的工作中，我需要枚举 Windows 中知名组的成员，如每个人、交互式用户等。我可以找到一些“根据我”定义如何估计用户是每个人的成员，但这要困难得多获取其他组的信息。我遇到了[http://msdn.microsoft.com/en-us/library/windows/desktop/aa379554(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379554(v=vs.85).aspx)这几乎可以满足我的需要，因为我需要获得用户访问权限- 没有登录他/她的令牌（因为我不知道她/他的密码）。是否有可能在没有登录用户的情况下获得类似访问令牌的东西？我想在没有.NET 的情况下解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:54:26.840

每个人、交互式用户、经过身份验证的用户都不是真正的组。它们是出现在您的令牌中的 SID，但您不是其中的成员。

相反，如果您已通过身份验证，如果您是交互式的，则该属性会添加到您的令牌中。所以同一个用户可以通过网络连接，他们的令牌中不会有交互式用户。但如果他们通过终端服务登录，他们的代币将拥有交互式用户。

从这个例子可以看出，**这些伪组不是用户的属性，而是登录会话的属性**。因此，您无法枚举具有该属性的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:32:52.493

您必须查看[此 URL](http://www.codeproject.com/Articles/10042/The-Windows-Access-Control-Model-Part-1)。这是关于 SID、组、成员资格等的一系列非常好的文章......带有 C++ 示例。

# android - Smack 中的 SASL 和 SASL PLAIN 有什么区别？

> ID：10494872
> 
> 赞同：2
> 
> 时间：2012-05-08T08:04:26.707
> 
> 标签：android, xmpp, smack, asmack, sasl

我正在处理有关 IM 的事情。它涉及XMPP。我在 Android 上开发了一个应用程序，所以我使用了 aSmack。我想登录谷歌谈话，在这里（链接如下）

[https://developers.google.com/talk/open_communications](https://developers.google.com/talk/open_communications)

说 google talk 只支持 SASL PLAIN。但是当我在 INTERNET 中搜索时，很多人说 google talk 不支持 SASL，所以需要此代码：

```
 connectionConfig.setSASLAuthenticationEnabled(false); 
```

我很困惑; 谁能告诉我哪个是正确的或 SASL 和 SASL PLAIN 之间的区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:45:26.367

[**SASL**是一种用于身份验证的框架和协议](https://www.rfc-editor.org/rfc/rfc4422)，旨在嵌入到其他协议中，以便可以重用这些库。

[**SASL PLAIN**](https://www.rfc-editor.org/rfc/rfc4616)是您可以通过 SASL 使用[的特定身份验证机制。](https://www.rfc-editor.org/rfc/rfc4616)

还有许多[其他的 SASL 机制](http://www.iana.org/assignments/sasl-mechanisms/sasl-mechanisms.xml)，它们在协议、服务器和客户端中具有不同程度的支持。XMPP 中主要使用的是 PLAIN、DIGEST-MD5（[旧 XMPP RFC](https://www.rfc-editor.org/rfc/rfc3920)中强制要求）和[SCRAM-SHA-1](https://www.rfc-editor.org/rfc/rfc5802)（[新 XMPP RFC](https://www.rfc-editor.org/rfc/rfc6120)中[强制要求](https://www.rfc-editor.org/rfc/rfc6120#section-13.8.1)）。

无论如何，回答你的问题：

如果你禁用 SASL，那么 Smack 可能会使用所谓的[legacy authentication](http://xmpp.org/extensions/xep-0078.html)。如果您不使用 TLS 加密连接，这似乎可以解决问题，因为许多服务器不允许 PLAIN 通过未加密的连接。

# javascript - 脚本激活时淡出 div

> ID：10494873
> 
> 赞同：0
> 
> 时间：2012-05-08T08:04:28.610
> 
> 标签：javascript, css, dom-events, fade

我试图在 JavaScript 代码激活后立即淡出媒体徽标。

[http://rayku.com/start](http://rayku.com/start)

当用户开始在文本框中输入时，会出现一个表单。在那一刻，我想让媒体图标淡出。

你知道我如何在代码中进行编辑吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:10:39.993

由于徽标是表单的背景图像，您将无法将它们淡出，但您可以将 background-image 规则设置为“none”。

使用以下内容创建一个新的 css 类：

```
.theNewClass {background-image:none;} 
```

每当用户在搜索框中输入内容并出现注册表单时，您将“theNewClass”添加到您的注册表单。当注册表被取消时，您再次从注册表中删除“theNewClass”，徽标将重新出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:09:57.983

尝试使用 jQuery fadein()

```
jQuery(document).ready(function (){

}); 
```

# c# - 等待应用程序窗口打开然后做一些事情

> ID：10494874
> 
> 赞同：1
> 
> 时间：2012-05-08T08:04:39.807
> 
> 标签：c#

我对 C# 很陌生，但我学得很快。我已经看到了各种答案，但我不确定它们是否适合，或者我只是没有得到它们。

我有一个业务需求来编写 ac# 应用程序，该应用程序位于系统托盘中，并在 Internet Explorer 中执行特定操作时运行。这个动作（目前）是关于 Internet Explorer 窗口的打开。我需要该应用程序不断监视以查看此窗口是否打开，然后运行一些代码，例如关闭关于窗口并显示一个消息框。

我已经设法让系统托盘部分工作，我将如何监控窗口是否存在？

编辑回答评论中的一些问题：在工作中，我们使用仅在 IE 中运行的预订系统，我们正在寻找一种方法来自动化我们手动流程的一部分，为此我们认为我们可以拥有以下过程：进入预订，点击帮助>关于，系统托盘应用程序关闭窗口并运行一些代码来更新数据库。差不多就是这样。

我看过以下一些内容： [如何检查窗口是否已打开并关闭](https://stackoverflow.com/questions/7240709/how-to-check-if-window-is-opned-and-close-it) [c#：如何检查我的机器上是否打开了另一个应用程序窗口（即遍历所有打开的窗口）？](https://stackoverflow.com/questions/5883294/c-how-do-check-if-another-application-window-is-open-on-my-machine-i-e-iter)

我想我明白我必须查看正在运行的进程并检查相关的程序属性以查看它是否具有正确的窗口名称？我确定我可以让它工作（最终）但是它是等待那个窗口打开我卡住的部分，C# 有等待还是我必须编写一个函数来不断检查窗口是否打开？

**编辑**

我已经接受了@Adrian 的回答，因为它看起来确实想要我想要的；然而，在阅读了所有评论后，我去找我的经理，我们讨论了这个问题。现在，我们将通过右键菜单中的文本框让用户将预订号输入到 C# 应用程序中。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:13:14.890

您可能想使用 FindWindowEx API 调用

有关示例代码，请参见此处：

[http://www.pinvoke.net/default.aspx/user32/findwindowex.html](http://www.pinvoke.net/default.aspx/user32/findwindowex.html)

然后 SendMessage 关闭窗口。

[http://www.pinvoke.net/default.aspx/user32/SendMessage.html](http://www.pinvoke.net/default.aspx/user32/SendMessage.html)

但是出于安全原因，您将仅限于可以从其他应用程序捕获/使用的事件。除非应用程序明确允许此类交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T00:00:34.163

您可以做的是使用 AutoIt。它是一个免费的桌面自动化工具，还提供了一个用于集成的 .NET 类库。有了这个，您可以检查并等待某个窗口打开相当容易。

您可以从这里下载此工具： [https ://www.autoitscript.com](https://www.autoitscript.com)

# java - 将字符串时间戳转换为日期

> ID：10494876
> 
> 赞同：4
> 
> 时间：2012-05-08T08:04:47.467
> 
> 标签：java, date, format, timestamp

如何将字符串时间戳（如**“Thu Jun 07 13:01:59 IST 2007” ）转换为****java**中的日期格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:16:01.910

```
String ds = "Thu Jun 07 13:01:59 IST 2007";
SimpleDateFormat f = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
Date d = f.parse(ds); 
```

正如其他人提到的，答案在文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:10:46.200

您可以使用日期格式：

```
DateFormat dateFormat = new SimpleDateFormat("E M d HH:mm:ss z yyyy");
Date date = dateFormat.parse("Thu Jun 07 13:01:59 IST 2007"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T08:12:40.883

首先，创建 javadocs 中指定的日期和时间模式字符串[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，然后调用[`parse`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)将字符串转换为`Date`对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T08:13:13.160

使用`SimpleDateFormat`. 像这样的东西：

```
DateFormat fmt = new SimpleDateFormat("EEE MMM d hh:mm:ss Z yyyy");
Date date = fmt.parse(str); 
```

# asp.net - ASP VB - 从服务器调用函数

> ID：10494884
> 
> 赞同：0
> 
> 时间：2012-05-08T08:05:19.213
> 
> 标签：asp.net, vb.net

我有一个使用以下代码填充来自访问数据库的数据的 aspx 页面：

```
<asp:datalist id="bookData" runat="server" RepeatDirection="Horizontal" RepeatColumns="3">
                    <ItemTemplate>
                    <div align="left" style="padding:15;font-size:8pt;font-family:Verdana">
                        <div style="font:12pt verdana;color:darkred">
                        <i><b>
                        <%# DataBinder.Eval(Container.DataItem, "BookTitle")%>
                        </b></i>
                        </div>
                          <br/>
                        <b>Genre - </b>
                        <%# DataBinder.Eval(Container.DataItem, "BookGenreTitle")%>
                        <br />
                        <b>Author - </b>
                        <%# DataBinder.Eval(Container.DataItem, "Firstname")%> <%# DataBinder.Eval(Container.DataItem, "Lastname")%>
                        <br />
                        <input type="button" name="AddBookbutton" id='Container.DataItem(BookID)' value="Add" />
                        <br/>
                     </div>
                    </ItemTemplate>
                </asp:datalist> 
```

我希望每个数据条目都有一个与之关联的按钮，该按钮可以调用服务器函数将数据提交到数据库。我目前已经实现了按钮，但不知道如何调用一个能够检测单击了哪个按钮的函数。

有谁能帮忙吗？=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:01:27.973

您需要将您的更改`<input>`为 a `<asp:Button>`，然后您可以`ItemCommand`利用`DataList`

如果你看一下这里，这是一个关于如何使用它的教程。[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemcommand.aspx)

# jquery - 防止谷歌地图信息窗口冒泡

> ID：10494885
> 
> 赞同：1
> 
> 时间：2012-05-08T08:05:22.133
> 
> 标签：jquery, google-maps

我有一个谷歌地图应用程序，它显示在下拉菜单中。下拉列表侦听单击事件以关闭下拉列表。

不幸的是，谷歌地图[infoWindow 也会](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)触发一个点击事件，当 infoWindow 关闭时，它会冒泡到我的下拉菜单并关闭它。

目前，我正在通过使用正则表达式分析 event.target 的 innerHTML 属性来帮助自己。

1.  有没有办法在不接触谷歌地图代码的情况下防止 infoWindow 事件冒泡？

2.  如果 1\. 不可能，你能推荐一种面向未来的方法来检查 event.target 吗？

谢谢！

# php - 在php的下拉框中设置起始行值

> ID：10494887
> 
> 赞同：1
> 
> 时间：2012-05-08T08:05:49.637
> 
> 标签：php, html

我有一张日期表：

**id,日期字段,日字段,月年字段**

1,2012-05-01，2012年5月，星期二

2,2012-05-02，2012年5月，星期三

我正在使用一个下拉框，我在其中选择 DISTINCT 月年字段。如果月份是例如 2012 年 6 月，我希望下拉框默认为页面打开时的那个。我不知道该怎么做。如果我使用 WHERE 子句，它仅显示例如 Jun-2012。目前它默认为第一行，即 May-2012。我尝试了 ORDER BY 变量 ($date_start1) 但这不起作用。

```
<?php
$date_start1 = "Jun-2012"; //just for testing purposes, will change later so that it gets the current Month.
echo $date_start1;
$sql2 = "SELECT DISTINCT monthyearfield FROM trn_cal";
$res2 = mysql_query($sql2);
echo "<form method='post'>";
$dropdown = "<select name='myvalue'>";
while ($row2 = mysql_fetch_assoc($res2)) {
    $my = $row2['monthyearfield'];
    $dropdown .= "\r\n<option value='{$row2['id']}'>{$row2['monthyearfield']}</option>";
}
$dropdown .= "\r\n</select>";
echo $dropdown;
echo "<input type=submit name=Submit value='Go'>";
$data1 = mysql_real_escape_string($_POST["myvalue"]);
echo "</form>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:15:47.823

您可以使用 php [`date`*^([docs])*](http://php.net/manual/en/function.date.php)函数并添加一个 if 来检查它。像：

```
$cur_date = date('M-Y');
while ($row2 = mysql_fetch_assoc($res2)) {       
    $selected = "";
    if ($row2['monthyearfield'] == $cur_date) {
       $selected = "selected='selected'";
    }
    $dropdown .= "\r\n<option value='{$row2['id']}' {$selected}>{$row2['monthyearfield']}</option>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:11:08.090

只需编辑这一行：

```
$dropdown .= "\r\n<option value='{$row2['id']}'>{$row2['monthyearfield']}"; 
```

> if ($row2['monthyearfield']== 'Jun-2012') $dropdown .="selected=selected";
> 
> $dropdown .=' /option> ';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:13:06.027

```
while ($row2 = mysql_fetch_assoc($res2)) {
    $my = $row2['monthyearfield'];
    $selected = "";
    if ( $my == $date_start1 ) {
      $selected = " selected='selected'";
    }
    $dropdown .= "\r\n<option value='{$row2['id']}'{$selected}>{$row2['monthyearfield']}</option>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T08:16:40.950

你想订购你的结果，还是你想在你的选项列表中自动选择一个特定的项目？我建议这是最后一个，不是吗？

所以，给“”标签，它包含应该自动选择的值，“selected='selected'属性/值。

费：

```
<select>
    <option>Bar</option>
    <option selected="selected">Foo</option>
    <option>FooBar</option>
</select> 
```

所以标题为“Foo”的项目将被自动选中。

# spring - Spring 2 JDBC 数据源配置

> ID：10494889
> 
> 赞同：4
> 
> 时间：2012-05-08T08:05:59.433
> 
> 标签：spring, jdbc

我目前正在研究一个使用 Spring 和 Spring JDBC 的应用程序。

[http://static.springsource.org/spring/docs/2.0.x/reference/jdbc.html](http://static.springsource.org/spring/docs/2.0.x/reference/jdbc.html)

我无法从文档中找到配置设置的方式/位置，例如设置池大小、重新连接、借用测试。

我在这里错过了什么吗？我是春天的新手。是这个普通的 JDBC 选项不允许我做所描述的事情，还是我需要像 c3po 库这样的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T08:18:28.070

这些属性不是 Spring 的一部分，而是底层`DataSource`实现。首先，您必须包含一些数据库池库，例如[dbcp](/questions/tagged/dbcp "显示标记为“dbcp”的问题")：

```
<dependency>
    <groupId>commons-dbcp</groupId>
    <artifactId>commons-dbcp</artifactId>
    <version>1.4</version>
</dependency> 
```

添加此库后，您可以配置提供的`DataSource`实现：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="username" value="user" />
    <property name="password" value="pwd" />
    <property name="url" value="some:url" />
    <property name="driverClassName" value="some.class.Driver" />
    <property name="initialSize" value="5" />
    <property name="maxActive" value="10" />
    <property name="testOnBorrow" value="true" />
    <property name="validationQuery" value="SELECT 1" />
</bean> 
```

您还可以选择不同的`DataSource`实现，例如[c3p0](/questions/tagged/c3p0 "显示标记为“c3p0”的问题")。最后，您可以`DataSource`在应用程序服务器中进行配置，例如使用[jndi](/questions/tagged/jndi "显示标记为“jndi”的问题")。Spring JDBC 支持使用提供的任何`DataSource`实现。Spring 还附带了一些非常简单[`DriverManagerDataSource`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/DriverManagerDataSource.html)的用于测试的内容。

# c++ - ns3 buffer.h 断言失败

> ID：10494892
> 
> 赞同：0
> 
> 时间：2012-05-08T08:06:19.607
> 
> 标签：c++, ns-3

我为 ns3 创建了一个新应用程序，它似乎运行正常，但是，在执行几秒钟后（在正确接收到许多数据包之后），出现以下错误：

断言失败。cond="m_current + delta <= m_dataEnd"，文件=./ns3/buffer.h，行=678

有什么想法会导致此错误，以及如何绕过/纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:23:09.120

This is just an assumption, but it seems that you have a buffer overflow, i.e. the current size exceeds it's maximum size. Maybe you can clear the buffer or increase its size. As the message tells you, the error occurs on line 678 in the buffer.h file. You could look at this position to have an idea, which operation causes the assertion and maybe this helps you finding out what you have to do to avoid this message.

# objective-c - ABAddressBook ABSourceName

> ID：10494897
> 
> 赞同：6
> 
> 时间：2012-05-08T08:06:47.873
> 
> 标签：objective-c, ios, abaddressbook

如何获取`ABAddressBook`源名称以显示它？（我知道枚举`kABSourceTypeLocal`，，`kABSourceTypeExchange`...）

我不是指您使用*`ABRecordCopyValue`(source, `ABSourceNameProperty`)*获得的源类型名称，而是在 Apple 的 Contacts-App 中作为表格部分显示的真实名称，例如：“Exchange Google”或“iCloud”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:59:30.383

如果您查看[ABSource Reference](http://developer.apple.com/library/ios/DOCUMENTATION/AddressBook/Reference/ABSourceRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40009534-CH1-SW1)，您可以看到它们有一个名为的属性`kABSourceNameProperty`，其中包含“源名称”。以下是获取所有源名称的方法：

```
NSMutableArray *sourceNames = [[NSMutableArray alloc] init];
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef sourcesArray = ABAddressBookCopyArrayOfAllSources(addressBook);

for (CFIndex i = 0; i < CFArrayGetCount(sourcesArray); i++) {
    ABRecordRef source = (ABRecordRef)CFArrayGetValueAtIndex(sourcesArray, i);
    CFStringRef sourceName = (CFStringRef)ABRecordCopyValue(ABRecordGetRecordID(source, kABSourceNameProperty);

    if(sourceName){
        [sourceNames addObject: (__bridge_transfer NSString *)sourceName];
    }
}

CFRelease(sourcesArray);
CFRelease(addressBook); 
```

希望这可以帮助！

# android - 从 youtube 返回到我的 android 应用程序

> ID：10494899
> 
> 赞同：1
> 
> 时间：2012-05-08T08:07:05.517
> 
> 标签：android, android-intent, youtube

在我的应用程序中，单击特定按钮时，youtube 应用程序将启动并播放一些视频。这是相同的代码。

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:0ee3R3tfdd4"));
startActivity(i); 
```

视频播放完毕后是否可以关闭 youtube 应用程序并优雅地返回到我的应用程序（无需用户按下后退按钮）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:09:38.623

**不**，这是不可能的。

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:0ee3R3tfdd4"));
startActivity(i); 
```

使用此代码，您将打开第三方 youtube 应用程序，因此您无法对其进行任何类型的控制。

您必须按返回按钮才能返回您的应用程序。或者将您自己`VideoView`的集成到您的应用程序中以显示 youtube 视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:10:57.653

这显然必须在您无法做到的 youtube 应用程序中完成。但是，如果您使用视频视图在自己的活动/片段中播放视频，则可以这样做。

# asp.net - 需要帮助将 DataTable 转换为 XML VB.NET

> ID：10494902
> 
> 赞同：2
> 
> 时间：2012-05-08T08:07:20.793
> 
> 标签：asp.net, xml, vb.net, linq, datatable

我需要帮助将 DataTable 转换为 XML。我已经使用 LINQ 完成了它，但我无法完全按照我的要求完成。我做了一张图片，以便您可以轻松理解。XML 需要采用某种格式，如下所示，所以我不能只使用 dt.writexml()。艺术家 ID 需要自动编号。歌曲按艺术家分组。更喜欢 Linq 中的解决方案，因为这是我在整个项目中使用的，但我无法在这里得到我想要的。列名是已知的，因此您可以在代码中使用类似的内容。row.Field(Of String)("title")

非常感谢 。我是认真的。抱歉英语不好。

![在此处输入图像描述](../Images/3d34779b2b0935089dfcc71f094b807a.png)

CreateDatatable - 这个简单的代码应该创建一个数据表

```
 Dim dTable As New DataTable
            dTable.Columns.Add("Title")
            dTable.Columns.Add("Artist")
            dTable.Columns.Add("Album")

            dTable.Rows.Add("Baby one more time", "Britney Spears", "Baby one more time")
            dTable.Rows.Add("Crazy", "Britney Spears", "Best of")
            dTable.Rows.Add("Every time", "Britney Spears", "Best of")
            dTable.Rows.Add("Black and White", "Michael Jackson", "Best of")
            dTable.Rows.Add("You are not alone", "Michael Jackson", "Best of")
            dTable.Rows.Add("Smile", "Michael Jackson", "Best of") 
```

我现在所拥有的。它会将它的数据表转换为 xml，而不需要分组和专辑索引。

```
 Dim xmlDoc As New XDocument(
      From row In dt.Rows
      Select XElement("SONG",
      From column In dt.Columns
            Select
                New XAttribute(column.Name, row.Item(column.Name))
             )
      ) 
```

好吧..我还有更多代码..它将查询第一个创建的xml并进行分组，但在歌曲元素中仍然有album="albumname"作为属性。它应该只是从数据表到 xml 的一个查询 .. 我讨厌不得不再次查询 xml 来重新格式化它。

```
 Dim replacement = New XDocument(New XElement("root", 
    original.Descendants("Song")
    .GroupBy(Function(x) Convert.ToString(x.Element("artist").value))
    .[Select](Function(songsForArtist, index) 
     New XElement("artist", New XAttribute("id", index + 1),
     New XAttribute("name", songsForArtist.Key), songsForArtist)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:43:48.110

我希望你能把它转换成 VB.NET

```
 using System;
    using System.Linq;
    using System.Data;
    using System.Xml.Linq;

    namespace ConsoleApplication3
    {
        class Program
        {
            static void Main(string[] args)
            {
                var dTable = new DataTable();
                dTable.Columns.Add("Title");
                dTable.Columns.Add("Artist");
                dTable.Columns.Add("Album");

                dTable.Rows.Add("Baby one more time", "Britney Spears", "Baby one more time");
                dTable.Rows.Add("Crazy", "Britney Spears", "Best of");
                dTable.Rows.Add("Every time", "Britney Spears", "Best of");
                dTable.Rows.Add("Black and White", "Michael Jackson", "Best of");
                dTable.Rows.Add("You are not alone", "Michael Jackson", "Best of");
                dTable.Rows.Add("Smile", "Michael Jackson", "Best of");

                var query = dTable.AsEnumerable().
                    GroupBy(row => row.Field<string>("Artist")).
                    Select(
                        (grp, i) => new XElement("Artist",
                            new XAttribute("ID", i + 1),
                            new XAttribute("ARTISTNAME", grp.Key),
                                grp.Select(song => new XElement("SONG",
                                    new XAttribute("artistID", i + 1),
                                    new XAttribute("title", song.Field<string>("Title")),
                                    new XAttribute("album", song.Field<string>("Album"))
                                    )
                                )
                        )
                    );

                var xml = new XElement("Music", query);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:00:35.633

您可以为此使用 dotnet 类型的数据集。数据集具有从/到 xml 加载和保存其内容的方法。

此 xsd 将为您提供所需的 xml 格式，其中包含自动增量 id-s 嵌套子表和 xml-attributes 而不是 tablefields 的 xml-elements。

将此添加到您的项目并从中生成一个类型化的数据集。

```
 <xs:schema id="Music" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop">
      <xs:element name="Music" msdata:IsDataSet="true" msdata:Locale="en-US">
        <xs:complexType>
          <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element name="Artist">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Song" minOccurs="0" maxOccurs="unbounded">
                     <xs:annotation>
                        <xs:appinfo>
                           <msdata:Relationship name="SongsOfArtist" msdata:parent="Artist" msdata:child="Song" msdata:parentkey="ID" msdata:childkey="artistid" msprop:Generator_UserRelationName="SongsOfArtist" msprop:Generator_RelationVarName="relationSongsOfArtist" msprop:Generator_UserChildTable="Song" msprop:Generator_UserParentTable="Artist" /></xs:appinfo></xs:annotation>
                    <xs:complexType>
                      <xs:attribute name="SongID" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="1" type="xs:long" msdata:AllowDBNull="false" use="prohibited" />
                      <xs:attribute name="artistid" msdata:AutoIncrementSeed="1" type="xs:long" use="required" />
                      <xs:attribute name="title" msprop:DateTimeMode="UnspecifiedLocal" type="xs:string" />
                      <xs:attribute name="album" msprop:DateTimeMode="UnspecifiedLocal" type="xs:string" />
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
                <xs:attribute name="ID" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="1" type="xs:long" use="required" />
                <xs:attribute name="ARTISTNAME" msprop:DateTimeMode="UnspecifiedLocal" type="xs:string" />
              </xs:complexType>
            </xs:element>
          </xs:choice>
        </xs:complexType>
        <xs:unique name="Song_Constraint1" msdata:ConstraintName="Constraint1">
          <xs:selector xpath=".//Song" />
          <xs:field xpath="@SongID" />
        </xs:unique>
        <xs:unique name="Constraint2">
          <xs:selector xpath=".//Song" />
          <xs:field xpath="@artistid" />
        </xs:unique>
        <xs:unique name="Constraint1">
          <xs:selector xpath=".//Artist" />
          <xs:field xpath="@ID" />
        </xs:unique>
        <xs:keyref name="SongsOfArtist" refer="Constraint1" msdata:IsNested="true">
          <xs:selector xpath=".//Song" />
          <xs:field xpath="@artistid" />
        </xs:keyref>
      </xs:element>
    </xs:schema> 
```

如果 vs2010 xsd 编辑器仍然支持此文件中的所有 xsd 设置，我不确定。如果您使用 vs 2010 编辑它，可能会丢失一些设置。使用 vs2003-xsd 编辑器它可以工作。

# sql - SQL Server：输出插入的.Id 与插入的临时用户定义表连接

> ID：10494903
> 
> 赞同：3
> 
> 时间：2012-05-08T08:07:32.383
> 
> 标签：sql, tsql

我遇到了一个问题。我使用带有用户定义表 ( `@logs`) 的存储过程。我使用 command 将其插入到其他数据库表 ( `InOutLog`) 中，`OUTPUT into`在那里我得到了`inserted`id。

主要问题是我想将我的用户定义表插入到 2 个数据库表中：

1.  `InOutLog`，我在哪里插入 id 和..
2.  想要获取插入的 id 和其他定义的表值 ( `l.Title+';'+l.Comment`) 并将其插入到表中`MessageLog`

但我无法访问`l.Title+';'+l.Comment`。我也找不到任何简单的解决方案来将我的用户定义表和临时表与插入的 id 值合并..

这是代码：

```
insert into InOutLog(NFCId, UserID, DateEnter, DateLeave, ProjectId, 
Status, ServerDateEnter)
output inserted.Id, inserted.DateLeave, l.Title+';'+l.Comment, inserted.UserId 
into MessageLog(TagLogId, MessageDate, Answer, UserId)
  select l.NFCTagId, l.UserId, l.ScanDate, l.StartDate, @projectID, 0, getdate()
  from @logs l 
```

有什么建议么？在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T08:15:18.400

使用 MERGE 而不是 INSERT。

这允许您访问 INSERTions 的 OUTPUT 子句中的源表。

示例：[http ://sqlblog.com/blogs/jamie_thomson/archive/2010/01/06/merge-and-output-the-swiss-army-knife-of-t-sql.aspx](http://sqlblog.com/blogs/jamie_thomson/archive/2010/01/06/merge-and-output-the-swiss-army-knife-of-t-sql.aspx)

# java - 如何在 cacls 中输入文件夹/文件的路径名和用户名/主机名

> ID：10494906
> 
> 赞同：1
> 
> 时间：2012-05-08T08:07:43.570
> 
> 标签：java, file, file-permissions, cacls

我尝试了以下语法：

```
public class Main {
private static String isi;

public static void main(String[] args) throws InterruptedException, IOException {

   String host = "";
   String dir = "" ;

    Scanner inputScanner = new Scanner(System.in);
    System.out.println("insert the path of folder or file:" );
    dir = inputScanner.next();
    File f = new File(dir);
  //  dir = isi;

    System.out.println("insert the username:"  );
    host = inputScanner.next();

    System.out.println();
    System.out.println();
    System.out.println(f);
    System.out.println(host);

    perm(f, host);
}

public static  void perm(File src, String user) throws InterruptedException, IOException {
    // win32 command line variant
    Process p = Runtime.getRuntime().exec("cacls " + src.getPath() + " /E /C /P " + user + ":n");
    p.waitFor(); }   } 
```

但是，对象“f”和参数 host 没有被 void perm 调用。为什么会这样？

我需要你的帮助。我很感谢你的帮助和建议。

# android - 在微调器中选择值并将该值的 id 传递给 android 中的服务器

> ID：10494909
> 
> 赞同：0
> 
> 时间：2012-05-08T08:08:24.660
> 
> 标签：android

我从 JSON 响应中获得了“client_id”和“组织”列表，需要将这些组织列表传递给 spinner，但是当用户从 spinner 中选择组织名称时，需要将与该组织关联的 client_id 传递给服务器。

这是我的代码。

```
 try {

      //*** Getting Array of Attributes
            attributes = jsonreturn.getJSONObject(TAG_ATTRIBUTE);
            String status = attributes.getString(TAG_VALIDCODE);
            JSONObject clients = jsonreturn.getJSONObject(TAG_CLIENTS);
            JSONArray client = clients.getJSONArray(TAG_CLIENT);

            final String[] list_client_id = new String[client.length()+1];
            list_client_id[0]= "Select Client";
            final String[] list_client_name = new String[client.length()];

       if(status.equals("200")){

     for(int i = 0; i < client.length(); i++)

         {
            JSONObject clientlist = client.getJSONObject(i);

     //***** Storing each JSON item in variable
             String client_id = clientlist.getString(TAG_CLIENT_ID);
             String organization = clientlist.getString(TAG_ORGANIZATION);

          list_client_id[i+1]= clientlist.getString(TAG_CLIENT_ID);
          list_client_name[i]= clientlist.getString(TAG_ORGANIZATION);
         }
       }

       else{
            Toast.makeText(this, "Invalid Details", 1000).show();       }

        ClientNameSpinner = (Spinner)findViewById(R.id.ClientId);

        ArrayAdapter<String> adapter = new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, list_client_name);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        ClientNameSpinner.setAdapter(adapter);

       /* ArrayAdapter<String> adapterid = new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, list_client_id);
        adapterid.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        ClientNameSpinner.setAdapter(adapterid);*/

}
            catch (JSONException e)
            {
            e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:11:15.703

```
ClientNameSpinner .setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        // 
    }

    @Override
    public void onNothingSelected(AdapterView<?> parentView) {
        // 

    }

}); 
```

# web-services - 根据输入加载不同的属性文件

> ID：10494915
> 
> 赞同：1
> 
> 时间：2012-05-08T08:09:02.893
> 
> 标签：web-services, spring, internationalization

我正在开发一个调用 java web 服务的应用程序（使用 Jersey1.8）。我需要根据对 Web 服务的输入（用户的语言首选项）调用多个属性文件。如果用户的语言偏好是西班牙语，那么我需要加载西班牙语的属性文件。有没有办法做到这一点？请帮我。提前致谢。

*   注意：Web 服务接受 Json 对象并返回 Json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:13:18.603

使用java资源包并根据您要上传的语言设置正确的名称将解决您的问题

# xml - Hibernate/JPA，从 XML 获取实体对象

> ID：10494917
> 
> 赞同：0
> 
> 时间：2012-05-08T08:09:22.613
> 
> 标签：xml, hibernate, jpa

让我有一些实体

```
@Entity
public class User implements Serializable 
{

   @Id
   private long id;

   @Column  
   private String code;
//...   
} 
```

我想为使用这个实体的逻辑编写 UnitTest。
我可以从某些 XML 中获取数据吗？（没有连接到数据库）
我想在 UnitTest EntityManager 中写一些 XML，ctreate 使用 XML 而不是数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:48:43.703

请检查[DBUnit](http://www.dbunit.org/components.html#FlatXmlDataSet)

# c# - ASP.NET CommandName 和 CommandArgument 值是如何存储的？

> ID：10494938
> 
> 赞同：5
> 
> 时间：2012-05-08T08:11:06.830
> 
> 标签：c#, asp.net, .net, viewstate

有谁知道控件的 CommandName 和 CommandArgument 属性存储在哪里？我对检索它们不感兴趣，只是想了解更多关于 ASP.NET 内部结构和未来页面大小的考虑。:)

我创建了一个简单的页面，其中包含 3 个按钮，它们的 commandArg 和 CommandName 设置如下：

```
<asp:Button Text="Click1" runat="server" CommandArgument="1" CommandName="Delete" OnCommand="CommandExec" />
<asp:Button Text="Click2" runat="server" CommandArgument="2" CommandName="Save" OnCommand="CommandExec" />
<asp:Button Text="Click3" runat="server" CommandArgument="3" CommandName="Copy" OnCommand="CommandExec" /> 
```

将 CommandArgument 或 CommandName 更改为相当大的值不会影响 ViewState 内容和大小，那么这些值存储在哪里？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:22:55.720

它保存在视图状态中，请参阅此帖子：[http ://www.west-wind.com/weblog/posts/2006/Feb/20/ViewState-and-OnItemCommand-on-an-ASPNET-Repeater](http://www.west-wind.com/weblog/posts/2006/Feb/20/ViewState-and-OnItemCommand-on-an-ASPNET-Repeater)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T08:25:05.027

这些值确实存储在`ViewState`

如果您要使用`GridView`带有和不带有 CommandArguments/Names 等的按钮进行简单测试...然后您可以看到 ViewState 更大。

但是，这些值永远不会是非常大的对象或任何东西，所以我个人不会担心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T08:34:46.333

如果您想了解 ASP.NET 内部原理，我仍然认为最好的书是[Nikhil Kothari 和 Vandana Datye 的《开发 ASP.NET 服务器控件和组件》](http://www.microsoft.com/learning/en/us/book.aspx?id=5728&locale=en-us)。它是为 .NET 1.x 编写的，所以有点过时，但仍然很好地涵盖了基本架构。

在您的示例中， ViewState 大小不受影响的原因是在处理标记时的 Init 阶段未跟踪 ViewState 。标记中设置为固定值的属性值将在编译 ASP.NET 页面时生成的代码中硬连线。

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms972976.aspx)很好地概述了 ViewState。

如果将按钮放在数据绑定控件（如中继器或 GridView）中，您将看到 ViewState 增长，并使用数据绑定语法为每行的 CommandArgument 设置不同的值。

# javascript - 为什么插件没有动态初始化

> ID：10494946
> 
> 赞同：-2
> 
> 时间：2012-05-08T08:11:41.067
> 
> 标签：javascript, jquery

```
$("#" + IdToInitialize).cycle("destroy").cycle({
    fx: $("#cyclescroll").val(),
    easing: $("#cyclebounce").val(),
    speed: 1000,
    timeout: 2000
}); 
```

这里有什么问题，为什么循环插件没有用新设置再次初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:27:54.227

试试这种方式： -

```
$("#" + IdToInitialize).cycle("destroy");
$("#" + IdToInitialize).cycle({
    fx: $("#cyclescroll").val(),
    easing: $("#cyclebounce").val(),
    speed: 1000,
    timeout: 2000 
}); 
```

确保

`$("#cyclescroll").val()`应该返回值 as `fade, scrollUp, shuffle` `$("#cyclebounce").val()`应该返回值 as `easeInOutBack, easeOutBack`

参考**[周期选项](http://jquery.malsup.com/cycle/options.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:19:55.920

您用于重新初始化插件的值之一不正确。Eitehr IdToInitialize、fx 或 easing 不正确。

[http://jsfiddle.net/ny2Tj/3/](http://jsfiddle.net/ny2Tj/3/)

单击按钮时，以下内容按预期工作：

```
<div id="sliders">
<div id="slideshow">
<img src="http://scienceblogs.com/startswithabang/upload/2012/04/why_should_there_be_dark_matte/AS17-148-22727_lrg-thumb-500x500-74032.jpeg" />
<img src="http://weblogs.marylandweather.com/4526619322_1912218db8.jpg" />
<img src="http://www.silverstar-academy.com/Blog/wp-content/uploads/2012/03/03-14-12N00184967.jpg" />
<img src="http://cdn.the2012scenario.com/wp-content/uploads/2011/11/sunspot-500x500.jpg" />
</div>
<div id="pager"></div>
</div>

<button id="reinit">Reinit</button> 
```

JS：

```
$('#slideshow').cycle({fx:'scrollHorz', pager: '#pager'});
$('#reinit').click(function() {
$('#slideshow').cycle('destroy').cycle({fx:'scrollVert'}); // change effect remove pager    
}); 
```

# python - Excel python COM 对象的文档？

> ID：10494948
> 
> 赞同：3
> 
> 时间：2012-05-08T08:11:50.047
> 
> 标签：python, excel, com, documentation

我想使用 Python 和 COM 来处理 Excel 文件中的数据和公式。我已经查看了 python 中的几个模块，但我还没有找到对阅读公式的支持。所以我被迫使用COM。我不知道该怎么称呼它，但是否有类似 python 上可用的所有类和方法的文档，COM for excel。这里和那里有一些示例代码，但我似乎找不到任何我想做的详尽文档。

```
import win32com
import win32com.client
xl = win32com.client.Dispatch("Excel.application")
xl.__doc__ 
```

我以为最后一行会打印 Excel 应用程序的方法或文档列表

```
sel = xl.Selection 
```

当我在 xl 之后按 TAB 时，上面的 Selection() 方法不显示。我只知道有一个选择方法，因为我是从 pyxll 示例模块中读取它的。所以我认为TAB 菜单中没有包含更多的方法。

```
sel.Value = "Hello!"
sel.font.bold = true

Traceback (most recent call last):
File "<pyshell#8>", line 1, in <module>
sel.font.bold = true
NameError: name 'true' is not defined

sel.font.bold = 1
sel.font = "Constantia"

Traceback (most recent call last):
File "<pyshell#10>", line 1, in <module>
sel.font = "Constantia"
File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 570, in  __setattr__
raise AttributeError("Property '%s.%s' can not be set." % (self._username_, attr))
AttributeError: Property '<unknown>.font' can not be set. 
```

所以我在猜测这个，但我想通过适当的文档来学习，所以我知道我可以使用哪些对象/方法。谁能指出我正确的方向？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:42:45.533

我们最近在这些接口上苦苦挣扎。尝试[使用 Microsoft 网站上](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.application.aspx)的帮助页面。

这些示例使用 C# / VB.NET 编写，因此如果您了解其中一种语言会有所帮助……玩得开心！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:30:29.487

`True`区分大小写：`sel.font.bold=True`有效。

字体可以像这样设置为 Constantia `sel.font.Name="Constantia"`：.

我也不知道任何 PythonCOM 文档，但是该界面几乎可以将 Visual Basic 属性转换为 Python，因此您可以按照 VBA 文档进行操作，在许多情况下，VBA 代码几乎可以逐字运行，当然您必须更改 VBA样板和控制结构到它们的 Python 等价物。

# c# - 嗅探和篡改网站的请求和响应，如何防止？

> ID：10494952
> 
> 赞同：1
> 
> 时间：2012-05-08T08:12:16.420
> 
> 标签：c#, asp.net, web-services, sniffing, tampering

我正在研究有关我的网站的安全性和其他内容。
在我的国家，在线支付就像贝宝一样工作。
意思是你应该通过post方法将一些参数如Amount、MerchantID、ReturnURL、ResNum(OrderID)传递给银行，银行会在付款后将一些参数如MID、Status、ResNum传递给你。
在此请求和响应期间，有人可以使用以下软件嗅探和篡改：
[http](http://www.fiddler2.com/fiddler2/)
://www.fiddler2.com/fiddler2/ 请观看此视频：
[http](http://www.fiddler2.com/fiddler/help/video/)
://www.fiddler2.com/fiddler/help/video/ i对其进行测试，它也可以使用证书在 https 上运行。
哇...

1.  我怎样才能防止这种嗅探和篡改？
    银行网站中有一个名为 VerifyTransaction 的函数，它在付款后在卖方端调用，此函数返回金额。
    此功能位于银行端的 Web 服务上。
    主要问题是：
2.  有人可以嗅探和篡改银行和卖家之间的网络服务吗？
    意思是提琴手可以做到这一点或其他工具吗？
    如果是，我们如何防止这种嗅探和篡改（Web 服务）？

非常感谢关注

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:45:32.860

Fiddler 运行在 Web 浏览器运行的同一个客户端上，都在同一个用户的控制下，所以它不能做任何你不能用浏览器做的事情（但可能要付出更多的努力）。

永远不能保证从客户端到您的服务器的数据已经由 HTML/JavaScript/etc 发送。你为他们服务。这就是为什么你永远不应该信任用户输入的原因，例如，总是在服务器端进行数据验证（并且只在客户端进行额外的验证以提高可用性）。这就是银行和卖家之间调用网络服务的原因，以确保交易细节是正确的。

通过适当的 TLS 设置，可以防止篡改和嗅探卖方服务器和银行服务器之间的流量。

# wpf - WPF 共享属性

> ID：10494953
> 
> 赞同：1
> 
> 时间：2012-05-08T08:12:27.030
> 
> 标签：wpf, textbox, styles

我有一个问题，我想这是我在 WPF 中缺少的一些基本知识。

我将默认宽度（generix.XML）设置为文本框，文本框有一些最小宽度

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Setter Property="OverridesDefaultStyle" Value="True"/>
    <Setter Property="Foreground" Value="Black"/>
    <Setter Property="KeyboardNavigation.TabNavigation" Value="None"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="MinWidth" Value="50"/>
</Style> 
```

我有两个包含文本框的不同控件。两个文本框具有相同的宽度。我向其中一个控件添加一些属性，该控件将声明文本框的宽度，并将覆盖其宽度声明，以使文本框“找到”该属性。

这是一些描述我的要求的图：

![控制](../Images/f90ac333c893cf7a6833fcd714dded61.png)

更新：

我只是发现我没有再描述一件进口的事情。我有一些使用文本框的 DataTemplate。正如我在上面所写的，我有两个具有相同 DataType (MyData) 的控件，我还创建了 DateTemplate 来显示 MyData。我希望每个控件都显示不同宽度的文本框（来自数据模板）。

更新 2：这里有更多代码

1-我的数据的dataTemplate在哪里使用文本框

```
<DataTemplate DataType="{x:Type ml:MyData}">
    <Border  BorderBrush="Transparent" ClipToBounds="True"  Style="{StaticResource errorBorder}">
        <TextBox Text="{Binding MyText}"/>
    </Border>
</DataTemplate> 
```

2-我使用使用文本框的数据模板的方式。

```
<ContentPresenter Grid.Column="1" Margin="10,1,10,1" HorizontalAlignment="Left" Content="{Binding}" /> 
```

此 contentPresentor 显示在两个不同的控件中。正如我之前写的，我希望每个控件都以不同的宽度显示文本框

看起来我错过了一些基本知识（附加属性？逻辑/视觉树？）。

谢谢，莱昂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:11:41.273

好问题，DataTemplate 的主要思想是您对某些数据有特定的图形表示。[您可以在MSDN](http://msdn.microsoft.com/en-us/library/ms742521.aspx)中阅读有关它的更多信息。
如果您想自定义您的 TextBox，并在不同的 UserControls 中拥有不同的属性，您可能需要使用[ControlTemplate](http://www.wpftutorial.net/templates.html)。问题是，如果您想控制特定控件的属性（在本例中为带有一些边框的 TextBox），您应该使用 ControlTemplate。您的 XAML 应类似于：

```
<ControlTemplate TargetType="{x:Type TextBox}">
        <--! define the ControlTemplate here with some Width property-->
<ControlTemplate> 
```

并且使用它的控件将具有 TextBox （正如您定义的那样，带有边框）：

```
<TextBox Grid.Column="1" Margin="10,1,10,1" HorizontalAlignment="Left" Content="{Binding}" Width="50"/> 
```

# python - 使用 Sphinx 记录带有命令行参数的脚本时出现异常

> ID：10494958
> 
> 赞同：0
> 
> 时间：2012-05-08T08:12:43.597
> 
> 标签：python, python-sphinx

有什么方法可以使用 Sphinx 来记录 python 脚本的命令行输入？我能够记录函数或方法的输入，但我不知道如何记录脚本的输入。我一直在尝试遵循与函数相同的语法，方法是在源文件中添加`.. automodule:: scriptLDOnServer`scriptLDOnServer 是我的 python 脚本（对应于我的主脚本）的行。

问题是我收到这样的错误：

```
__import__(self.modname)
File "/home/ubuntu/SVNBioinfo/trunk/Code/LD/scriptLDOnServer.py", line 10, in <module>
    genotype_filename=sys.argv[7];
IndexError: list index out of range 
```

似乎 Sphinx 正在尝试获取命令行输入，但在我的源文件中没有输入，因此导入失败。有没有办法解决这个问题？我应该在源代码中使用另一个命令而不是模块吗？

很抱歉不是很清楚，但很难解释这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:57:24.880

导入文件时失败，因为您试图`sys.argv[7]` *在导入时*访问。这不是你应该做的事情。这种可能失败的代码应该在`if __name__ == '__main__':`块或函数中，以便在导入代码时不会执行。

这普遍成立。你不应该*编写无法导入或有*任何*被导入副作用的代码。

*[* 适用条件。但在打破这条规则之前，你最好有很好的理由。]*

# xml - XML XSLT 命名空间

> ID：10494966
> 
> 赞同：0
> 
> 时间：2012-05-08T08:13:08.743
> 
> 标签：xml, xslt, namespaces

我有一个名称空间为“tns”的 xml 文件。我想使用 xslt 而不在任何地方使用“tns”，而是使用匹配的模板，而不是声明一次 tns 命名空间并使用该模板。我想将根 tns:cv (xml) 与我的根 cv (xsl) 匹配 我的 xslt 有什么问题，因为它显示 xml 元素，但不显示其中的内容？

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="multiLanguageToSingle.xslt"?>
<tns:cv xmlns:tns="http://www.i8c.be/CvService/1.0">
    <tns:generalLanguage>nl</tns:generalLanguage>
    <tns:careerPath>
        <tns:current>
            <tns:company language="nl">
                <tns:companyName></tns:companyName>
                <tns:description></tns:description>
            </tns:company>
        </tns:current>
        <tns:former>
            <tns:company language="nl">
                <tns:companyName></tns:companyName>
                <tns:description></tns:description>
            </tns:company>
        </tns:former>
    </tns:careerPath>
    <tns:companyDetails>
        <tns:address> 
```

我想对上述 xml 使用 xsl（前几行）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tns="http://www.i8c.be/CvService/1.0">
<xsl:output method="xml" omit-xml-declaration="no" indent="yes" />
    <xsl:template match="/">
    <xsl:apply-templates select="/tns:cv" />
  </xsl:template>

<xsl:template match="/tns:cv">
<cv xsi:schemaLocation="http://www.i8c.be/CvService/1.0 cvDataTemplate.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<xsl:variable name="language" select='"nl"'/>
    <careerPath>
        <current>
        <xsl:for-each select="cv/careerPath/current/company[@language=$language]">
            <companyName><xsl:value-of select="companyName"/></companyName>
            <description><xsl:value-of select="description"/></description>
        </xsl:for-each>
        </current>

        <former>
        <xsl:for-each select="cv/careerPath/former/company[@language=$language]">
            <companyName><xsl:value-of select="companyName"/></companyName>
            <description><xsl:value-of select="description"/></description>
        </xsl:for-each>
        </former>
    </careerPath> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:33:00.820

关于命名空间，需要意识到的重要一点是，XML 文件中的命名空间并不是真正的`tns`东西——它只是实际命名空间的文件本地名称/缩写，即`http://www.i8c.be/CvService/1.0`. 现在，您在 xslt 文件中选择了相同的缩写（这对可读性很有意义，但就工具而言是完全可选的）。因此，您不能期望`cv/careerPath/current/company[@language=$language]`匹配任何内容，原因有两个：

*   XML 文件的默认命名空间中没有`careerPath`元素。对于 XPath 字符串的其他组件，这将需要是`tns:careerPath`，并且类似。
*   您正在请求与您的最顶层`tns:cv`元素的匹配，因为它已经是上下文节点，因为它位于其上的`xsl:tenplate`匹配中。由于该节点不包含子节点，因此以空节点集`cv`开头的 XPath 。`cv/`

因此，删除`cv/`查询开头的

*   添加命名空间限定符或
*   `xmlns="http://www.i8c.be/CvService/1.0"`通过放置一些足够远的元素来更改 XSLT 文件中的默认名称空间。（请注意，这也会影响输出的非限定元素名称。）

# cakephp - cake php默认路由不起作用

> ID：10494968
> 
> 赞同：0
> 
> 时间：2012-05-08T08:13:12.223
> 
> 标签：cakephp, routing

我想为 cakephp 之类的东西定义主路由。

```
Router::connect('/:lang/:plugins/:controller/:action/*', array('lang' => 'eng', 'controller' => 'index', 'action' => 'index', 'plugin' => null), array('lang' => '[a-z]{3}')); 
```

但默认不起作用。当我输入这些错误消失：

```
/           Error: Controller could not be found.
/eng        Error: EngController could not be found.
/eng/pages  Error: EngController could not be found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:18:40.530

路由错误的意思是您要求它使用的控制器不存在。我假设您使用的是 CakePHP 2，所以请确保您的控制器文件名是这样的：

`EngController.php`

在该控制器文件中，它类似于：

```
<?php
App::uses('AppController', 'Controller');
/**
 * Eng Controller
 *
 */
class EngController extends AppController {

/**
 * Scaffold
 *
 * @var mixed
 */
    public $scaffold;

} 
```

**编辑：**
我又看了一遍这条路线，而你`'lang' => 'eng'`在路线的起点。您遇到的错误来自认为`eng`是控制器的路线。完全删除此部分，它应该修复它。

# c++ - 什么是 C++ 的调试模式？

> ID：10494969
> 
> 赞同：4
> 
> 时间：2012-05-08T08:13:12.380
> 
> 标签：c++, debugging

从这里：http: [//google-glog.googlecode.com/svn/trunk/doc/glog.html](http://google-glog.googlecode.com/svn/trunk/doc/glog.html)

> 调试模式支持
> 特殊的“调试模式”日志记录宏仅在调试模式下有效，并且在非调试模式编译时被编译为无。

“调试模式”是什么意思 wrt C++ 程序？

当我们在其上使用 GDB 时，我们可以说程序处于调试模式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T08:19:54.997

“调试模式”有三个方面。

许多库（包括标准库）在调试模式下编译时会插入调试帮助代码（数组边界检查、不变断言等）。他们在生产/非调试模式下删除这些检查以提高性能。

编译器有调试开关。库用于检测您是否为调试而编译的设置调试宏，并在生成的二进制文件中插入调试符号。这有助于调试器在正在运行的二进制代码和生成它的源代码之间建立链接。

在调试器中运行程序是一种“运行时调试模式”。您可以在调试器中运行可执行文件，无论它是否是为调试而构建的。您将通过调试构建获得更多信息。

这三种“调试模式”都是独立的。您可以（通常）通过手动设置适当的宏/定义来编译生产构建中的库调试检查，而无需要求编译器输出调试符号。

这些都不是特定于 C++（或 C）的。许多其他语言都有这些概念。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T08:17:51.347

“调试模式”可以指很多东西，但在这种情况下，它指的是没有`NDEBUG`定义宏的编译。从您链接到的页面（强调我的）：

> DFATAL 严重性在调试模式下记录一个 FATAL 错误**（即，没有定义 NDEBUG 宏）**，但通过自动将严重性降低为 ERROR 来避免在生产中停止程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T08:18:02.183

C++ 程序（如 C）通常具有基于预处理器宏的不同构建配置，可以从命令行传递。

规范的调试模式标志是宏`NDEBUG`，如果定义，则表示您*未*处于调试模式。（它可以更清楚地命名`PRODUCTION`，但遗憾的是它是根据它不是什么来命名的。）

`NDEBUG`是标准的，也是古老的。它由头文件使用`<cassert>`，在 C 中被称为`<assert.h>`。它的官方功能是使`assert`宏成为空操作，但它通常也会影响 C++ 标准库在检查边界和要求方面。

例如，`g++ -DNDEBUG myProg.cpp -o myProg`应该在没有与调试相关的运行时特性的情况下进行编译。

请注意，这与为调试器生成符号支持不同，后者由`-g`GCC 或其他平台的其他标志控制。

# windows - 插孔音频连接套件 + Windows 音频

> ID：10494973
> 
> 赞同：0
> 
> 时间：2012-05-08T08:13:19.870
> 
> 标签：windows, audio, jack

我需要执行以下操作：

获取系统音频输出（Windows 中的“您所听到的”）以进行一些处理...

我的想法是将音频输出传递给 Jack 客户端，然后传递给我的程序。

我的操作系统是 Win7 64 位，我正在使用 VC++ (VS2005)

有人对如何做到这一点有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:33:17.777

您很可能需要从立体声混音中捕获音频。

[有关更多详细信息，请参阅本文](http://msdn.microsoft.com/en-us/library/ms713735%28VS.85%29.aspx)

# sql - 合并两个选择查询sql

> ID：10494977
> 
> 赞同：4
> 
> 时间：2012-05-08T08:13:44.890
> 
> 标签：sql, oracle, multiple-select-query

嘿，我正在使用 oracle sql 创建数据库。

我现在正在处理查询，我想出了两个单独的查询，我想合并它们以获得结果。

我创建的第一个查询是找出表演的总收入：

```
 SELECT SUM(bookings * CategoryPrice )AS Total_Money_Made
    FROM ( SELECT CategoryPrice , count(*) AS bookings
       FROM Booking b
       JOIN performance per
         ON b.performanceid =  per.performanceid
       JOIN Production p
         ON per.productionid = p.productionid          
      WHERE per.performanceid IN (1, 2, 3, 4)
      GROUP BY CategoryPrice) 
```

这给了我一个结果：

## TOTAL_MONEY_MADE

```
 337.5 
```

然后我有另一个查询，计算出总特许权：

```
 SELECT SUM(ConsessionAmount * 2) AS Total_Consession_Money
      FROM( SELECT COUNT (*) AS ConsessionAmount
FROM Booking 
WHERE 
Consession = 'Yes' AND PerformanceID = '1' OR 
Consession = 'Yes' AND PerformanceID = '2' OR 
Consession = 'Yes' AND PerformanceID = '3' OR 
Consession = 'Yes' AND PerformanceID = '4' ) 
```

这给了我以下结果：

## TOTAL_CONSESSION_MONEY

```
 18 
```

现在我想要一种方法，可以从第一个查询中减去第二个查询的结果。是否可以？我该怎么做？我认为这与子查询有关，但我不太确定。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T08:18:32.230

你可以这样做：

```
WITH TOTAL_MADE
AS
(   
    SELECT SUM(bookings * CategoryPrice )AS Total_Money_Made
    FROM ( SELECT CategoryPrice , count(*) AS bookings
       FROM Booking b
       JOIN performance per
         ON b.performanceid =  per.performanceid
       JOIN Production p
         ON per.productionid = p.productionid          
      WHERE per.performanceid IN (1, 2, 3, 4)
      GROUP BY CategoryPrice)
), TOTAL_CONSESSION
AS
(
    SELECT SUM(ConsessionAmount * 2) AS Total_Consession_Money
      FROM( SELECT COUNT (*) AS ConsessionAmount
    FROM Booking 
    WHERE 
    Consession = 'Yes' AND PerformanceID = '1' OR 
    Consession = 'Yes' AND PerformanceID = '2' OR 
    Consession = 'Yes' AND PerformanceID = '3' OR 
    Consession = 'Yes' AND PerformanceID = '4' )
)
SELECT
    TOTAL_CONSESSION.Total_Consession_Money-
    TOTAL_MADE.Total_Money_Made AS Something
FROM
    TOTAL_MADE,
    TOTAL_CONSESSION; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:19:26.163

您可以使用括号在选择句子中使用选择

```
select (put your second query here) - (put your first select here) from dual 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:18:53.860

尝试类似：

```
SELECT Total_Money_Made - Total_Consession_Money FROM

( SELECT SUM(bookings * CategoryPrice )AS Total_Money_Made, ( SELECT SUM(ConsessionAmount * 2) AS Total_Consession_Money
      FROM( SELECT COUNT (*) AS ConsessionAmount
FROM Booking 
WHERE 
Consession = 'Yes' AND PerformanceID = '1' OR 
Consession = 'Yes' AND PerformanceID = '2' OR 
Consession = 'Yes' AND PerformanceID = '3' OR 
Consession = 'Yes' AND PerformanceID = '4' )
    FROM ( SELECT CategoryPrice , count(*) AS bookings
       FROM Booking b
       JOIN performance per
         ON b.performanceid =  per.performanceid
       JOIN Production p
         ON per.productionid = p.productionid          
      WHERE per.performanceid IN (1, 2, 3, 4)
      GROUP BY CategoryPrice) ) 
```

# ruby-on-rails-3 - 不知道如何在 Rails 3 中制作搜索表单

> ID：10494978
> 
> 赞同：0
> 
> 时间：2012-05-08T08:13:50.470
> 
> 标签：ruby-on-rails-3, forms, search, ruby-1.9

我需要在我的 rails 3.2.3 应用程序中使用搜索表单，但我不知道该怎么做，昨天我修复了它，但后来我删除了它:(。

这是我的控制器和模型：

控制器

```
class BedrijfsgegevensController < ApplicationController   
  def index
    @bedrijfsgegevens = Bedrijfsgegeven.all
    @bedrijfsgegevens = Bedrijfsgegeven.search(params[:search])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @bedrijfsgegevens }
    end
  end

  # GET /bedrijfsgegevens/1
  # GET /bedrijfsgegevens/1.json
  def show
    @bedrijfsgegeven = Bedrijfsgegeven.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @bedrijfsgegeven }
    end
  end

  # GET /bedrijfsgegevens/new
  # GET /bedrijfsgegevens/new.json
  def new
    @bedrijfsgegeven = Bedrijfsgegeven.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @bedrijfsgegeven }
    end
  end

  # GET /bedrijfsgegevens/1/edit
  def edit
    @bedrijfsgegeven = Bedrijfsgegeven.find(params[:id])
  end

  # POST /bedrijfsgegevens
  # POST /bedrijfsgegevens.json
  def create
    @bedrijfsgegeven = Bedrijfsgegeven.new(params[:bedrijfsgegeven])

    respond_to do |format|
      if @bedrijfsgegeven.save
        format.html { redirect_to @bedrijfsgegeven, notice: 'Bedrijfsgegeven was successfully created.' }
        format.json { render json: @bedrijfsgegeven, status: :created, location: @bedrijfsgegeven }
      else
        format.html { render action: "new" }
        format.json { render json: @bedrijfsgegeven.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /bedrijfsgegevens/1
  # PUT /bedrijfsgegevens/1.json
  def update
    @bedrijfsgegeven = Bedrijfsgegeven.find(params[:id])

    respond_to do |format|
      if @bedrijfsgegeven.update_attributes(params[:bedrijfsgegeven])
        format.html { redirect_to @bedrijfsgegeven, notice: 'Bedrijfsgegeven was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @bedrijfsgegeven.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /bedrijfsgegevens/1
  # DELETE /bedrijfsgegevens/1.json
  def destroy
    @bedrijfsgegeven = Bedrijfsgegeven.find(params[:id])
    @bedrijfsgegeven.destroy

    respond_to do |format|
      format.html { redirect_to bedrijfsgegevens_url }
      format.json { head :no_content }
            end
        end
    end 
```

模型

```
class Bedrijfsgegeven < ActiveRecord::Base

    def search
    @search = Bedrijfsgegeven.search() do
    keywords(params[:search])
    end
    end

    def self.search(search)
        if search
        find(:all, :conditions => ['Voornaam LIKE ?', "%#{search}%"])
    else
        find(:all)
    end
  end

    validates :voornaam, 
              :achternaam, 
              :woonplaats, 
              :telefoon, 
              :website, 
              :email, 
              :presence => true

  attr_accessible :achternaam, :email, :telefoon, :voornaam, :website, :woonplaats
end 
```

我希望有人能帮我解决这个问题。

格茨基斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:44:09.870

您是否阅读/观看过以下 railscast：

[http://asciicasts.com/episodes/240-search-sort-paginate-with-ajax](http://asciicasts.com/episodes/240-search-sort-paginate-with-ajax)

每次我需要基本搜索时都会帮助我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:13:40.173

我会建议您开始使用存储库，这将使您免受这些意外删除的影响。您可以在 bitbucket.org 上获得 5 个免费存储库。git 和 mercurial 都很棒。

# objective-c - 使用多层时无法释放未使用的 CALayer 内存

> ID：10494980
> 
> 赞同：3
> 
> 时间：2012-05-08T08:14:14.763
> 
> 标签：objective-c, memory-management, uiimage, calayer, instruments

我在我的应用程序中使用多个 CALayer，并以大 UIImage 作为内容。不幸的是，当我不需要图层或图像时 - 内存没有被释放。

我用来创建图层的代码是：

```
UIImage *im = [UIImage imageNamed:@"image_1.jpg"];
CALayer * l = [CALayer layer];
[l setBounds:CGRectMake(0, 0, 1024, 768)];
[l setPosition:CGPointMake(512, 384)];
[l setAnchorPoint:CGPointMake(0.5, 0.5)];
[l setHidden:NO];
[l setContents:(id) im.CGImage];
[self.layer addSublayer:l]; // self is a subclass of UIView
[self.tmpArr addObject:l]; // self.tmpArr contains the layers I am using (one in this example) 
```

我用来释放图层的代码及其内容是：

```
CALayer * l = [self.tmpArr objectAtIndex:i];
[l removeFromSuperlayer];
[l setHidden:YES];
[l setContents:nil];
[self.tmpArr removeAllObjects]; 
```

当我使用仪器内存分析器时，我看到实际内存在创建层时增加，但在释放时从未减少。因为我使用的是 ARC，所以我不能使用 release。我在这里做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T09:00:56.847

UIImage 的`imageNamed:`方法使用静态缓存，仅在内存紧张的情况下才释放。

您的选择是：

1.  改为使用`-[UIImage imageWithContentsOfFile:]`。
2.  忽略问题。当内存通知进来时，缓存被清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T15:54:58.563

只是为了记录另一个答案。我在代码中创建的图像是在运行时使用`CGImageCreateWithImageInRect`. 生成的对象是 CGImageRef。我只是忘记释放它，`CGImageRelease`导致内存消耗逐渐增加，在 3 或 4 个动画之后，应用程序由于内存限制而崩溃。

总是释放一个`CGImageRef`.

# iphone - 最有效的图像更新方法

> ID：10494983
> 
> 赞同：3
> 
> 时间：2012-05-08T08:14:24.233
> 
> 标签：iphone, xcode, image

我只是在获得一些建议后，重新向我的应用程序添加新图像的最有效方法。

我需要每隔几周将 80 多张新的 300 x 100 像素图像存储到我的应用程序中。

我担心在后台下载这些图像需要很长时间。

更新和存储此图像数据的最有效方法是什么？

最有效的方法是简单地将应用程序更新发布到 iTunes 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:40:17.297

你可以使用[SDWebImage](https://github.com/rs/SDWebImage) ，你不必担心缓存等

Web Image 这个库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

它提供：

一个向 Cocoa Touch 框架添加 Web 图像和缓存管理的 UIImageView 类别 异步图像下载器 具有自动缓存过期处理的异步内存 + 磁盘图像缓存 保证不会多次下载相同的 URL 保证不会出现虚假 URL t 一次又一次地重试表演！

# android - 为什么这段代码返回异常？

> ID：10494984
> 
> 赞同：-3
> 
> 时间：2012-05-08T08:14:52.993
> 
> 标签：android, database, nullpointerexception

有人可以告诉我，为什么这个代码：

```
Boolean done = db.delete(ACCOUNTS_TABLE, KEY_ROWID, getIds(accounts)) > 0; 
```

返回这个异常？

> 05-08 10:09:36.074: E/AndroidRuntime(1955): java.lang.NullPointerException

函数返回字符串数组，所以一切都应该没问题

## 解决方案

在删除 db 上调用的 close() 之前

但现在它返回了这个异常：

> android.database.sqlite.SQLiteBindOrColumnIndexOutOfRangeException：绑定或列索引超出范围：句柄 0x1eef920

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:17:22.323

如果这确实是异常中提到的有问题的行，那几乎可以肯定是因为它`db`是一个空引用，或者可能是因为`getIds`抛出了异常。

如果没有更多信息，这有点难以判断，但作为开始，我会预先放入一些东西来转储`db`变量，或者预先或作为`try/catch`调用周围块的一部分。

# javascript - Facebook like url 不再起作用，因为 Facebook 删除了旧的应用页面

> ID：10494986
> 
> 赞同：1
> 
> 时间：2012-05-08T08:14:54.097
> 
> 标签：javascript, facebook, facebook-like

几周以来，[我们 Facebook 应用程序](http://apps.facebook.com/lindoplay)上的“赞”按钮不再起作用。我想我知道问题是什么：

首先，我们有标准的 Facebook 应用页面，我给这个应用提供了以下漂亮的 url：facebook.com/LindoPlay.Keno 这是我们在 Facebook 应用上用于点赞按钮的 url。

```
 <fb:like href="http://www.facebook.com/LindoPlay.Keno" show_faces="false"></fb:like> 
```

现在 Facebook 删除了所有旧的 Facebook 应用程序页面，这意味着 URL facebook.com/LindoPlay.Keno 现在只是重定向到我们的 Facebook 应用程序。从那时起，like 按钮不再适用于此 URL。

如果我在点赞按钮 (apps.facebook.com/lindoplay) 中使用应用程序 URL，它确实有效。但只有330个赞。另一个 URL (www.facebook.com/LindoPlay.Keno) 有 1600 多个赞。

所以简而言之，问题是：有没有办法让[http://www.facebook.com/LindoPlay.Keno](http://www.facebook.com/LindoPlay.Keno) URL 在“赞”按钮中再次工作并让我们的 1600 个赞回来？

谢谢，特里斯坦

# java - 如何为没有源代码的类生成 JavaDoc 文档？

> ID：10494988
> 
> 赞同：3
> 
> 时间：2012-05-08T08:15:00.363
> 
> 标签：java, reflection, documentation, javadoc

我想在一个我没有源代码的 jar 中生成一些基本的 html 接口文档（当然没有注释）。我该怎么做呢？

classdoc [Class Doc][1]http://classdoc.sourceforge.net/ 的旧工具可用于 java 1.3，用于提供此服务。在我看来，这可以通过使用反射来完成。

关于如何在 1.6 或 1.7 类上执行这个看似简单的任务的任何想法或示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:54:05.637

可能有自动化解决方案，但我不知道。我最好的选择是手动编写一些代码，这些代码将生成带有 javadoc 的虚拟 java 文件。您必须使用以下内容浏览 jar 文件：

```
ArrayList<Class> classes = new ArrayList<Class>();    
    JarFile jfile = new JarFile("your jar file name");
    String pkgpath = pckgname.replace(".", "/");     
    for (Enumeration<JarEntry> entries = jfile.entries(); entries.hasMoreElements();) {
        JarEntry element = entries.nextElement();     
        if(element.getName().startsWith(pkgpath)
            && element.getName().endsWith(".class")){     
            String fileName = element.getName().substring(pckgname.length() + 1);     
            classes.add(Class.forName(pckgname + "." + fileName .split("\\.")[0]));     
        }     
    } 
```

然后对于每个类，您必须浏览它们的方法，以最终写下看起来像 jar 文件中原始类的虚拟类。在代码将虚拟方法写入文件的同时，使其还根据参数和返回类型编写 javadoc 注释。

完成此操作后，使用 javadoc 从您的虚拟类生成文档。

这可能有点长，但这是我对这个的猜测......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:09:49.670

你可以用它`jar tvf yourjar.jar`来列出类，以及`javap`反汇编类，它会产生一个非常清晰的文档。

# node.js - 如何使用 Google Analytics 跟踪 node.js RESTful 服务的使用情况？

> ID：10494991
> 
> 赞同：13
> 
> 时间：2012-05-08T08:15:20.483
> 
> 标签：node.js, google-analytics, server-side

我已经编写了一个 RESTful node.js 服务作为[http://www.cross-copy.net](http://www.cross-copy.net)的后端，并且不仅想跟踪 Web 客户端的使用情况，还想跟踪使用的其他客户端（如命令行或应用程序）设备间复制/粘贴服务。是否可以将 Google Analytics JavaScript API 嵌入到 node.js 应用程序中并进行服务器端跟踪？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-09T13:00:30.063

由于所有答案都很老，我会提到一个新的 npm 包： [https ://www.npmjs.com/package/universal-analytics](https://www.npmjs.com/package/universal-analytics)

它真的很棒，而且非常易于使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-29T03:42:07.323

安装通用分析

`npm install universal-analytics --save`

在您的路线文件中，需要该模块。（将**process.env.GA_ACCOUNT**替换为“UA-12345678-1”之类的字符串）

```
// Init GA client
var ua = require('universal-analytics');
var visitor = ua(process.env.GA_ACCOUNT); 
```

现在在您的端点函数中，您可以跟踪页面浏览量。（将**request.url**替换为当前的 url 字符串，如`'/api/users/1'`）

```
// Track pageview
visitor.pageview(request.url).send(); 
```

阅读有关 UA的[文档以获取有关此模块的更多信息。](https://github.com/peaksandpies/universal-analytics)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T14:35:44.450

你不能只将 ga.js 放到你的 Node 项目中。它必须加载到浏览器中才能正常运行。

我不相信 Node 还没有任何东西（如果我错了，请纠正我！），但你应该能够轻松地调整现有的 PHP 类来进行服务器端的日志记录：

[https://developers.google.com/analytics/devguides/collection/other/mobileWebsites](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)

您可以看到请求跟踪 GIF 的 URL 是如何在 ga.php 中构建的。将 ga.php 翻译成 JS 就可以了。

```
$utmGifLocation = "http://www.google-analytics.com/__utm.gif";

// Construct the gif hit url.
$utmUrl = $utmGifLocation . "?" .
    "utmwv=" . VERSION .
    "&utmn=" . getRandomNumber() .
    "&utmhn=" . urlencode($domainName) .
    "&utmr=" . urlencode($documentReferer) .
    "&utmp=" . urlencode($documentPath) .
    "&utmac=" . $account .
    "&utmcc=__utma%3D999.999.999.999.999.1%3B" .
    "&utmvid=" . $visitorId .
    "&utmip=" . getIP($_SERVER["REMOTE_ADDR"]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T10:29:04.003

正如 Brad 理所当然地难过的那样，Node 没有任何东西......所以我在过去几天写了一个为此量身定制的 nodejs 模块，并刚刚在 NPM 上发布了它：[node-ga](https://npmjs.org/package/node-ga/)

该模块仍然很新（几乎没有在宠物项目的生产环境中尝试过），所以请不要犹豫，提供您的意见:)

* * *

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-29T08:58:17.740

我尝试了 node-ga，但没有让事件跟踪工作。[nodealytics](https://github.com/skookum/nodealytics)完成了这项工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-30T12:01:49.923

请参阅[Core Reporting API 客户端库和示例代码 (v3)](https://developers.google.com/analytics/devguides/reporting/core/v3/gdataLibraries)。

还有以下版本：[Google APIs **Client Library for Node.js** (alpha)](https://github.com/google/google-api-nodejs-client/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-16T22:48:59.847

我编写了一个脚本来使用来自 Googles Analytics Core Reporting API (v3) 的 Node.js 查询数据。[此处](http://robstechlog.com/2017/07/16/query-google-analytics-via-node-js/)提供了脚本和详细的设置说明。

这是脚本部分：

```
'use strict';
var googleapi = require('googleapis');
var ApiKeyFile = require('mywebsiteGAapi-6116b1dg49a1.json');
var viewID = 'ga:123456700';

var google = getdefaultObj(googleapi);
var Key = getdefaultObj(ApiKeyFile);

function getdefaultObj(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var jwtClient = new google.default.auth.JWT(Key.default.client_email, null, Key.default.private_key, ['https://www.googleapis.com/auth/analytics.readonly'], null);
jwtClient.authorize(function (err, tokens) {
  if (err) {
    console.log(err);
    return;
  }
  var analytics = google.default.analytics('v3');
  queryData(analytics);
});

function queryData(analytics) {
  analytics.data.ga.get({
    'auth': jwtClient,
    'ids': viewID,
    'metrics': 'ga:users,ga:pageviews',
    'start-date': 'yesterday',
    'end-date': 'today',
  }, function (err, response) {
    if (err) {
      console.log(err);
      return;
    }
    console.log(JSON.stringify(response, null, 4));
  });
} 
```

# iphone - copyItemAtPath 在模拟器上工作，但在设备上失败

> ID：10494994
> 
> 赞同：2
> 
> 时间：2012-05-08T08:15:34.127
> 
> 标签：iphone, objective-c, ios, xcode, nsfilemanager

我有这段代码将 .txt 文件从主包复制到文档目录。这适用于模拟器，但无法在设备上运行。我通过删除文档目录中的 txt 文件并再次运行应用程序来验证它是否可以在模拟器上运行。当我在设备上运行应用程序时，copyItemAtPath 失败。这是我的代码。

```
 BOOL success;
     NSFileManager *fileManager = [NSFileManager defaultManager];
     NSError *error;
     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
     NSString *documentsDirectory = [paths objectAtIndex:0];

     NSString *writableDBPath= [documentsDirectory  stringByAppendingPathComponent:@"zipFileName.txt"];
     success = [fileManager fileExistsAtPath:writableDBPath];
     if (success)
     {
        return;
     }

     // The writable database does not exist, so copy the default to the appropriate location.
     NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"zipFileName.txt"];
     success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
     if (!success) {
        NSAssert1(0, @"Failed to create writable database file with message '%@'.",   [error localizedDescription]);
     } 
```

我尝试再次清洁和构建，我什至重新启动手机但没有任何效果。

**错误**：2012-05-08 16:13:19.487 balita[162:707] *** -[ViewController currentJsonFile] 中的断言失败，/Users/diffy/Documents/balita/balita/ViewController.m:144 2012-05-08 16 :13:19.496 巴利塔[162:707]****由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法创建带有消息的可写数据库文件”操作无法完成。（可可错误 260。）'。' ** * 首先抛出调用堆栈：*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:05:05.433

`Foundation/FoundationErrors.h`给你`NSFileReadNoSuchFileError = 260, // Read error (no such file)`

这意味着在构建期间文件不再复制到应用程序包中。

模拟器包仍然具有该文件，因为在构建期间将新文件复制到那里，但即使在您执行目标清理时也不会删除先前复制的文件。

要重现模拟器的问题，您可以从那里删除应用程序（长按或从模拟器目录中删除应用程序文件夹）并重新安装它。

要解决此问题，请将文件添加到`Copy Bundle Resources`目标阶段并检查文件是否已添加到项目中并且存在。*

# iphone - 我什么时候应该使用保留、分配、复制、非原子

> ID：10494997
> 
> 赞同：0
> 
> 时间：2012-05-08T08:16:01.800
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

> **可能重复：**
> [@property 和保留、分配、复制、非原子](https://stackoverflow.com/questions/2255861/property-and-retain-assign-copy-nonatomic)

有人可以向我提供有关属性的概述：`retain`, `assign`, `copy`, `nonatomic`. 我是 iPhone 开发的新手，我不知道如何以及何时使用这些

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:48:20.493

如果您使用自己的 getter/setter，那么这些关键字没有多大意义，但如果您使用 @property/@synthesize，那么您需要使用这些关键字。

*   保留：在这种情况下，您会得到额外的对象，即该对象的保留计数对于每个保留增加 1，如果您使用 arc，则需要释放它。当您不希望该值时使用保留在对象上设置时释放它。同时保留创建一个强引用，并且一个对象在其所有强引用被释放之前不能被释放。

*   复制：复制只是保留的反向，因为它只是提供要处理的对象的副本，并且复制对象上更改的实际值不会反映在真实对象上。当 setter 参数可能是可变的但您不能在没有警告的情况下更改属性的内部状态时，应该使用复制访问器。

*   赋值：赋值通常用于非对象数据类型。

*   非原子：非原子提供线程安全，而默认原子不提供线程安全，但原子的读/写是线程安全的，它使用对象级锁来确保读/写的序列化。此外，从 getter 或返回的值无论其他线程同时执行什么，通过 setter 设置总是完全检索或设置。如果您指定 strong、copy 或 retain 而未指定 nonatomic，则在引用计数环境中，对象属性的合成 get 访问器使用锁并保留并自动释放返回的值。