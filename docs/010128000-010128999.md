# StackOverflow 问答 10128000-10128999

# c# - 使用户控制全屏

> ID：10128008
> 
> 赞同：1
> 
> 时间：2012-04-12T16:44:19.830
> 
> 标签：c#, .net, user-controls, fullscreen

我正在开发一个可重用的用户控件，除其他功能外，它还应提供全屏模式。

但是如何做到这一点呢？

通常，应该最大化容器窗体，而不是 UserControl。

有没有办法强制 UserControl 临时占据整个屏幕？

我知道这不是通常应该做的事情，但我有理由这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:00:21.243

您应该能够通过从容器中删除控件来重新使用该控件，然后创建一个全屏无边框表单。

```
private void OnGoFullScreenMode()
{
     this.Controls.Remove(goLiveControl);
     this.ShowFullScreen(goLiveControl);
}

private void ShowFullScreen(UserControl userControl)
{
     Form fullScreenForm = new Form();
     fullScreenForm.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
     fullScreenForm.WindowState = FormWindowState.Maximized;
     fullScreenForm.ShowInTaskbar = false;
     userControl.Dock = DockStyle.Fill;
     fullScreenForm.Controls.Add(userControl);            
     fullScreenForm.Show();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T16:46:14.560

暂时将控件移动到一个新的无边框窗体并使该窗体全屏显示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T16:48:20.420

您可以从用户控件中创建一个临时窗口以提供全屏显示。

# jquery-mobile - jQueryMobile pageinit 和 ajax

> ID：10128009
> 
> 赞同：0
> 
> 时间：2012-04-12T16:44:28.957
> 
> 标签：jquery-mobile, cordova

现在我有这个代码使用phonegap和jquerymobile

```
$( '#user_detail' ).live( 'pageinit',function(event) {
    $.ajax({ 
        url: 'http://localhost/get_user.php',
        success: function(txt) {
            $("#details").append(txt);
        }
    });
} 
```

但是，在服务器端更新数据时，不会反映更改。任何人都可以指出我出了什么问题？是因为缓存，因为我试图在 ajax 上将缓存设置为 false。

如果 android 应用程序关闭并打开，则会填充数据

编辑，

现在，一旦加载了phonegap应用程序，它就会获取所有数据，`#details` **但是当对`get_user.php`数据进行更改时不会反映出来，我必须关闭应用程序并在android中重新打开以更新更改。**

如果我来回移动到其他页面并且数据应该在那里，我应该怎么做才能自动填充它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:15:09.237

您的问题很令人困惑，我无法知道您的数据是否没有反映出来，或者您在 get_user.php 中的代码更改是否没有反映出来。

但我想问题是您使用过的事件。使用`pageshow`event 而不是`pageinit`，我认为它会解决您的问题。

```
$( '#user_detail' ).live( 'pageshow',function(event) {
    $.ajax({ 
        url: 'http://localhost/get_user.php',
        success: function(txt) {
            $("#details").append(txt);
        }
    });
} 
```

# ruby-on-rails - 示例应用请求（Rails+MonogDB+Elasticsearch+Tire）

> ID：10128010
> 
> 赞同：1
> 
> 时间：2012-04-12T16:44:29.540
> 
> 标签：ruby-on-rails, ruby, mongodb, elasticsearch, tire

由于几乎没有使用 mongoDB 在 Rails 中使用 Tyre 的在线教程，我只请求一个基本的示例 rails 应用程序，该应用程序具有搜索功能并配置为 mongoDB（例如博客），我将自己跟踪代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:49:03.073

你可以在这里找到这个应用程序

[https://github.com/cousine/bloggy](https://github.com/cousine/bloggy)

# java - Java中的异常类组织

> ID：10128012
> 
> 赞同：1
> 
> 时间：2012-04-12T16:44:44.670
> 
> 标签：java, exception, code-organization, file-organization

我有很多异常类。Fe：InvalidMethodParameterException、EntityNotFoundException 等。都有一些代码，如 xxx.yyy.zzz 和描述文字。问题是：是否有任何最佳实践和技术来组织课程及其代码/文字。目前，我正在做的是将所有代码和文字放在其他类甚至属性文件中（（。在我看来，这非常令人沮丧，因为要添加一个异常，我必须对其他文件进行另一项更改，而不是一个.为了抛出异常，我使用了一个带有静态方法的类，它抛出它们。这些方法和方法不是我创建的，而是我工作的地方。所以我想提供其他更有效的方法。例如，当我提供使用只是简单地将每个异常文字和代码存储在自己的类中，他们只是忽略说它'

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:00:11.257

我认为提高开发人员效率的系统架构将远远优于提高执行效率的系统架构，因为前者可以轻松包含后者。如果对单个模块进行更改需要您打开和修改多个模块，则该设计并没有提高开发人员的效率。[我最喜欢的编程书](https://rads.stackoverflow.com/amzn/click/com/0132350882)建议异常类型由异常处理程序驱动。类似于以下内容：

```
Version 1:
void tryToDoSomething(bool arg) {
    try {
        doSomething(arg); //Throws MyException
    } catch (MyException e) {
        if (e.errorMessage == "Try a different argument")
            tryToDoSomething(!arg);
        else if (e.errorMessage == "Try again")
            tryToDoSomething(arg);
    }
}
Version 2:
//Split the exception so that it can be handled differently
void tryToDoSomething(bool arg) {
    try {
        doSomething(arg); //Throws InvalidArgumentException, NotReadyException
    } catch (InvalidArgumentException e) {
        tryToDoSomething(!arg);
    } catch (NotReadyException e) {
        tryToDoSomething(arg);
    }
} 
```

除了自我记录之外，现代编译器还可以优化抛出以显着加快版本 2。这就是实际创建异常的原因，作为编译器可以理解的用户定义类型，以替换以前必须传递和手动检查的迟钝错误代码。

无论如何，如果错误代码旨在传达给用户，我认为它们不是异常而是错误，应该这样抛出。您可能会设计类似 ErrorFactory 的东西，它会接受一个字符串错误代码并抛出正确的派生类型，或者您可以直接抛出。另一方面，如果错误代码**没有**到达用户，为什么还要使用它们呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:16:14.930

您可以将它们全部集中到一个类中，这会将所有内容放入一个外部类中：

```
public OurExceptionsClassTM {

    static final String
        ERROR1 = "123.acd.243",
        ERROR2 = "124.axd.543",
        ... ;

    public static class InvalidMethodParameterException extends Exception { ... }
    ...

    public static throwSpecialException(){ ... }
    ...

} 
```

这解决了必须更改多个文件的问题，并且或多或少地保持您的同事习惯的方式。

您还可以使其更加模块化，例如为每个项目设置不同的外部扩展类。关键是与任何给定异常相关的所有内容仍将与该异常保持在一起。

# html - 带有嵌入字体的 Pixel Perfect HTML to PDF？

> ID：10128013
> 
> 赞同：1
> 
> 时间：2012-04-12T16:44:51.877
> 
> 标签：html, embedded-fonts, pixel-perfect

我已经把头撞到墙上了一段时间......我可以用 Flash + Fpdf 做到这一点（参见[http://santaspencil.com/desktop](http://santaspencil.com/desktop)）。

但是，由于 Flash 在移动平台上没有得到很好的支持，我觉得我需要迁移到其他东西（HTML5？）。我发现的唯一问题是，我无法在网页中嵌入字体以准确查看它们在 PDF 中呈现时的效果……除非我使用 Flash。

这可以做到吗？... 嵌入字体可以与 HTML5 一起使用，以呈现像素完美的 PDF 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-26T17:43:52.730

我发现做到这一点的最好方法是在服务器端构建一个动态页面，然后使用 URLtoPDF 服务器插件作为浏览器 UserAgent 访问该页面，以便字体像在浏览器中一样呈现，然后它将转换将呈现的页面转换为 PDF 并返回您可以`wget`存储、下载或打印的文件 URL。

# android - 自定义视图刷新：postInvalidate vs drawableStateChanged：我应该使用哪一个？

> ID：10128019
> 
> 赞同：0
> 
> 时间：2012-04-12T16:45:17.890
> 
> 标签：android, android-view

我创建了一个与以下内容没有什么不同的自定义进度条： [http](http://weavora.com/blog/2012/02/23/android-progressbar-with-text/) ://weavora.com/blog/2012/02/23/android-progressbar-with-text/ 或[http://colintmiller.com/2010/10/how-to-在 android 上添加文本-over-a-progress-bar-on/](http://colintmiller.com/2010/10/how-to-add-text-over-a-progress-bar-on-android/)

我注意到在与画布相关的操作期间，例如覆盖 onDraw 方法中的 canvas.drawText()，两位作者都选择以某种方式使视图状态无效。

一个使用 postInvalidate()，另一个使用 drawableStateChanged()。

没有人解释他们的理由。

有人可以阐明哪一种是最“合适的”前进方式吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:54:00.917

答案是 postInvalidate()，因为 drawableStateChanged() 根本不起作用，句号（即永远不会调用 onDraw）。

# mysql - 将工程 ERD 转发到 Mysql

> ID：10128021
> 
> 赞同：0
> 
> 时间：2012-04-12T16:45:28.443
> 
> 标签：mysql, sql, reverse-engineering, mysql-workbench

MySQL Wrokbench 的免费版不支持从 ERD 转换为模式的正向/反向工程功能，反之亦然。那里有免费的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:32:01.757

我不太明白你问的确切含义。但我所知道的是，GPL 和企业版的 MySQL Workbench 具有相同的功能。

# mysql - MySQL 和自动增量一致性

> ID：10128022
> 
> 赞同：2
> 
> 时间：2012-04-12T16:45:29.360
> 
> 标签：mysql, auto-increment

我想在插入后立即获取表的自动增量 ID。LAST_INSERT_ID() 应该可以工作，但它是 100% 完整的证明吗？这意味着如果两个语句在存储过程中同时执行，它将使用该上下文中的最后一个 ID，还是来自已建立的其他连接？

```
INSERT INTO foo (auto,text)
    VALUES(NULL,'text');         # generate ID by inserting NULL
INSERT INTO foo2 (id,text)
    VALUES(LAST_INSERT_ID(),'text');  # use ID in second table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:03:29.193

MySQL手册说这个

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

> **重要** 如果您使用单个 INSERT 语句插入多行，LAST_INSERT_ID() 仅返回为第一个插入行生成的值。这样做的原因是可以轻松地针对其他服务器重现相同的 INSERT 语句。
> 
> 如果 INSERT 或 UPDATE 语句中的所有行都成功，则 LAST_INSERT_ID() 的值将在所有版本中保持一致。
> 
> 当前执行的语句不影响 LAST_INSERT_ID() 的值。
> 
> 如果前面的语句返回错误，则 LAST_INSERT_ID() 的值未定义。对于事务表，如果语句由于错误而回滚，则 LAST_INSERT_ID() 的值未定义。对于手动 ROLLBACK，LAST_INSERT_ID() 的值不会恢复到事务之前的值；它保持在回滚点的状态。

所以是的，这是最好的方法，前提是您使用单个插入查询而不是分组查询

# java - 无法将jsp页面添加到xhtml页面？

> ID：10128023
> 
> 赞同：2
> 
> 时间：2012-04-12T16:45:30.387
> 
> 标签：java, jsp, jsf, xhtml, facelets

我正在尝试按照[how-to-include-a-jsp-page-in-a-facelets-page 将](https://stackoverflow.com/questions/6106703/how-to-include-a-jsp-page-in-a-facelets-page)`jsp`页面包含在我的页面中，但找不到类，不知道为什么当应用程序构建良好时会出现此运行时异常。`xhtml``UIComponentBase`

我正在使用`Mojarra 2.1.7`，这是堆栈跟踪：

```
 Servlet.service() for servlet Faces Servlet threw exception: java.lang.ClassNotFoundException
: javax.faces.component.UIComponentBase
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200) [:1.6.0_18-ea]
        at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_18-ea]
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188) [:1.6.0_18-ea]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307) [:1.6.0_18-ea]
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) [:1.6.0_18-ea]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252) [:1.6.0_18-ea]
        at java.lang.Class.forName0(Native Method) [:1.6.0_18-ea]
        at java.lang.Class.forName(Class.java:247) [:1.6.0_18-ea]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:284) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1152) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:886) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.doLoadClass(BaseClassLoader.java:505) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:450) [jboss-classloader.jar:2.2.0.GA]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252) [:1.6.0_18-ea]
        at java.lang.ClassLoader.defineClass1(Native Method) [:1.6.0_18-ea]
        at java.lang.ClassLoader.defineClass(ClassLoader.java:621) [:1.6.0_18-ea]
        at org.jboss.classloader.spi.base.BaseClassLoader.access$200(BaseClassLoader.java:52) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:650) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:609) [jboss-classloader.jar:2.2.0.GA]
        at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_18-ea]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:608) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:585) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseDelegateLoader.loadClass(BaseDelegateLoader.java:156) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.filter.FilteredDelegateLoader.doLoadClass(FilteredDelegateLoader.java:141) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.filter.FilteredDelegateLoader.loadClass(FilteredDelegateLoader.java:132) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoadingTask$ThreadTask.run(ClassLoadingTask.java:461) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoaderManager.nextTask(ClassLoaderManager.java:262) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoaderManager.process(ClassLoaderManager.java:161) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:260) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1152) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:886) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.doLoadClass(BaseClassLoader.java:505) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:450) [jboss-classloader.jar:2.2.0.GA]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252) [:1.6.0_18-ea]
        at java.lang.Class.forName0(Native Method) [:1.6.0_18-ea]
        at java.lang.Class.forName(Class.java:247) [:1.6.0_18-ea]
        at org.jboss.classloader.plugins.loader.ClassLoaderToLoaderAdapter.loadClass(ClassLoaderToLoaderAdapter.java:184) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoadingTask$ThreadTask.run(ClassLoadingTask.java:461) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoaderManager.nextTask(ClassLoaderManager.java:262) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.ClassLoaderManager.process(ClassLoaderManager.java:161) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:260) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1152) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:886) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.doLoadClass(BaseClassLoader.java:505) [jboss-classloader.jar:2.2.0.GA]
        at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:450) [jboss-classloader.jar:2.2.0.GA]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:300) [:1.6.0_18-ea]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252) [:1.6.0_18-ea]
        at com.sun.faces.util.Util.loadClass(Util.java:293) [:2.1.7-SNAPSHOT]
        at com.sun.faces.application.ApplicationImpl.newThing(ApplicationImpl.java:1715) [:2.1.7-SNAPSHOT]
        at com.sun.faces.application.ApplicationImpl.createComponentApplyAnnotations(ApplicationImpl.java:1894) [:2.1.7-SNAPSHOT]
        at com.sun.faces.application.ApplicationImpl.createComponent(ApplicationImpl.java:1164) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.createComponent(ComponentTagHandlerDelegateImpl.java:524) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:168) [:2.1.7-SNAPSHOT]
        at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120) [:2.1.7-SNAPSHOT]
        at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98) [:2.1.7-SNAPSHOT]
        at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:195) [:2.1.7-SNAPSHOT]
        at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120) [:2.1.7-SNAPSHOT]
        at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93) [:2.1.7-SNAPSHOT]
        at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152) [:2.1.7-SNAPSHOT]
        at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774) [:2.1.7-SNAPSHOT]
        at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100) [:2.1.7-SNAPSHOT]
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [:2.1.7-SNAPSHOT]
        at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [:2.1.7-SNAPSHOT]
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [:2.1.7-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.0.0.Final]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.0.0.Final] 
```

有什么想法、建议吗？

# java - 维护客户端http客户端-服务器连接的正确方法？

> ID：10128024
> 
> 赞同：0
> 
> 时间：2012-04-12T16:45:34.070
> 
> 标签：java, android, google-app-engine, servlets, client-server

我正在尝试构建一个 Android 应用程序，其中客户端从应用程序向服务器进行身份验证，并且在身份验证之后，客户端从服务器发送和接收消息。我的服务器是谷歌应用引擎服务器，所以我使用 Http 请求（doPost）进行通信。

我已经完成的目标是：
1\. 创建客户资料。
2\. 向服务器发送配置文件数据
3\. 将配置文件存储在服务器上
4\. 从服务器上的数据库登录注册配置文件
5\. 发送客户端 ok 消息以获得良好的身份验证。

现在我的问题是如何保持这种联系？
因为一两分钟后是http连接，我不确定连接是否会超时。并且再次进行身份验证包括再次访问数据库似乎是错误的.. 这样做的正确方法是什么。代码示例或好的教程将不胜感激。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:22:53.937

您可以在成功登录时为每个客户端在服务器上创建 Http 会话，并且对于来自客户端的每个后续请求，只需获取已经创建的会话。此外，您可以在会话中保留客户端特定数据。这里的链接[http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html)。然后您可以在服务器端的 web.xml 中指定超时。希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:50:29.893

HTTP 不是基于会话的协议。保持开放连接纯粹是提高效率；它没有为您提供任何将请求相互关联的内在方式，也不应该这样使用。

相反，如 Ganesh 建议的那样，使用基于 cookie 的会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:51:26.907

一个解决方案是使用 Https。它有一个具有挑战性的机制来保护客户端和服务器之间的通信通道。

您也可以像 OAuth 协议那样做。在良好的 OAuth 上，服务器为客户端提供一个令牌，客户端必须在每次请求时重新发送该令牌。

有一个[用于 OAuth 的 android 库](http://donpark.org/blog/2009/01/24/android-client-side-oauth)，并且很确定有一个可以低成本集成到您的服务器中。

只是想法，我真的不是网络专家:)

# php - PHP 页面的页面布局模式

> ID：10128029
> 
> 赞同：1
> 
> 时间：2012-04-12T16:45:41.263
> 
> 标签：php, layout

我对PHP有点了解，但从未深入研究过，但现在我将开发一些真正的网站。

我有一个疑问是关于编写常见的 HTML 元素，如 Doctype、head 和固定布局，如菜单或顶部。我总是创建一个名为 Layout 的类来编写页面的这些部分，因此，在每个页面中，我都会调用 Layout 类的方法来构建布局和基本的 HTML 元素。

我的问题是是否有另一种方法可以做到这一点，而无需在每个页面中调用 Layout 方法，或者可能不需要 Layout 类。类似于每个页面的基本 HTML 的模式文件或类似的东西。

那么，是否存在或需要在我的代码中调用以生成基本的 HTML 内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:07:14.823

您可以尝试使用[Twig](http://twig.sensiolabs.org/)或[Smarty 之](http://www.smarty.net/)类的模板引擎。在另一种情况下，如果想要保持简单，您可以制作一个文件，例如`posts.php`并包含部分内容，例如`header.php`或`footer.php`包含其数据

```
<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <title>HEY</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <?php include_once('header.php'); ?>

        <?php $posts = ["a", "b", "c"]; ?>
        <?php foreach ($posts as $post): ?>
            <div><?php echo $post; ?></div>
        <?php endforeach; ?>

        <?php include_once('footer.php'); ?>
    </body>
</html> 
```

# django - 自定义 django 设置文件原始模板

> ID：10128035
> 
> 赞同：0
> 
> 时间：2012-04-12T16:46:07.837
> 
> 标签：django, templates, path, settings, customizing

`settings.py`每次开始一个新的 django 项目时，每个人都必须更改文件。我认为这个例程适用于每个运行`manage.py startproject myproject`命令的人，当你必须输入相同的管理员名称、时区、templates_dir ......每个可怕的时间。

所以我想是否有办法让这个例行修改从一开始就为你预设？

我知道有一个`startproject`命令用来准备设置文件的模板文件，我只是在任何地方都找不到它。有人可以给我那个文件的路径吗？

明知我正在使用 ubuntu 和 django 1.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:07:49.970

一旦找到 Django 安装（我会在 中搜索它`/usr/share/pyshared/django`，至少在 Debian 上是这个位置；在 Gentoo 上是`/usr/lib/python<version>/site-packages/django`），包内的位置是`conf/project_template`.

无论如何，我通常不建议修改由包管理器安装的包的内容，而是考虑使用带有本地定制 Django 安装的 virtualenv。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:20:02.167

我只是在我的主目录中保留了一个自定义的 settings.py 并在运行后将其复制到项目目录中`startproject`。简单有效。

# php - 在页面 tpl 上打印内容类型名称

> ID：10128038
> 
> 赞同：0
> 
> 时间：2012-04-12T16:46:16.337
> 
> 标签：php, drupal

下面的代码将排除在页面和故事类型上打印的内容类型“名称”。问题，我该如何做与此相反的操作并仅在 Page 和 Story 类型上打印内容类型名称？

```
 <?php
    if (!in_array($node->type, array('story', 'page'))) {
    print node_get_types('name', $node);
    }
    ?> 
```

我删除了（！），它的工作原理。如何将 css 样式嵌入到这个脚本中。当我以这种方式尝试时出现错误。我只需要在 Page 或 Story 类型上显示的样式。

```
 <?php
    if (in_array($node->type, array('story', 'page'))) {
    <div class="mystyle">
    print node_get_types('name', $node);
    </div>
    }
    ?> 
```

我在使用“打印”时获得了 CSS 样式

```
 <?php
    if (in_array($node->type, array('story', 'page'))) {
    { print '<div class="mystyle"> ';
    print node_get_types('name', $node);
    }
    print '</div>';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:50:46.733

假设我正确理解了这个问题，只需删除 not (!) 运算符，例如：

```
<?php
if (in_array($node->type, array('story', 'page'))) {
     print node_get_types('name', $node);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:50:36.460

只需删除`!`运算符：

```
if (in_array($node->type, array('story', 'page'))) {
  print node_get_types('name', $node);
} 
```

# javascript - 将元素的宽度相加，直到达到天花板

> ID：10128041
> 
> 赞同：2
> 
> 时间：2012-04-12T16:46:26.750
> 
> 标签：javascript, jquery

我有一个标题文本更改长度。我还有一组具有静态长度的徽标。

**问题：**当标题（文本）变得太长或太短时，徽标要么不能有效地利用空间，要么徽标最终会转到另一行。

**简单的解决方案**我想要一个脚本，将徽标的宽度逐个加起来，当满足某个宽度时，它会停止显示徽标。

# 例如：

- 标志是隐藏的。
- 标题空间为 400 像素
- 容器为 800
像素 - 剩余空间为 400 像素
- 脚本将逐个添加徽标，直到满足 400 像素
- 如果第 4 个徽标为 450 像素，则不会显示该徽标或任何之后的其他标志。

[http://jsfiddle.net/FDkRN/](http://jsfiddle.net/FDkRN/)

我尝试了我所知道的，但我对 js 还是很陌生，所以任何帮助都会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:54:33.353

Does this achieve what you are wanting to do, without the use of javascript?

[http://jsfiddle.net/FDkRN/3/](http://jsfiddle.net/FDkRN/3/)

I'm assuming #container would be a #header type div - so you have hide the overflow on that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:57:49.417

修复标题的宽度，使其不会越界，并将您的徽标容器设置为隐藏溢出内容

```
h5 { width: 800px; }
#logos ul { white-space: nowrap; width: 400px; overflow: hidden; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:56:52.173

这是我使用 jQuery 处理它的方法，但您可能想要使用@mikevoermans 的答案。

```
var sum = 0;
$("#logos>ul>li").each( function() {
    sum += $(this).width();
    if (sum > 200) {
       $(this).hide();  
    }
}); 
```

[摆弄](http://jsfiddle.net/FDkRN/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:57:24.517

你应该这样做，但这是一个不好的做法。

css

```
#logos li { display:none; } 
```

​</p>

```
$("#logos ul li").each(function(){
    if ($(this).parents("#logos").width() < 200) 
        $(this).show();
});​​​ 
```

[http://jsfiddle.net/ocanal/FDkRN/7/](http://jsfiddle.net/ocanal/FDkRN/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T16:57:51.380

这将添加总徽标宽度并在达到某个最大宽度后隐藏所有徽标：

```
​​$(document).ready(function(){

var maxWidth = 200;
var totalWidth = 0;

    $('#logos li').each(function(){
        var logoWidth = parseInt($(this).width());

        if(totalWidth + logoWidth > maxWidth)
        {
           $(this).hide();   
        }

        totalWidth += logoWidth;
    });

});​ 
```

`$(this).remove()`如果要删除元素而不仅仅是隐藏，也可以使用。

# hash - 为有序集组合哈希

> ID：10128042
> 
> 赞同：2
> 
> 时间：2012-04-12T16:46:30.113
> 
> 标签：hash, sequence, xor, hash-of-hashes

组合来自不同对象的两个哈希值的一种公认方法是使用 XOR。这是有道理的，但正如 Thomas Pornin 在下面的帖子中的第二条评论中所提到的，XOR 是可交换的，这意味着如果您对集合中的每个元素进行哈希处理并将它们与 XOR 组合，那么您执行的任何顺序都将始终导致相同的哈希：

[为什么 XOR 是组合哈希的默认方式？](https://stackoverflow.com/questions/5889238/why-is-xor-the-default-way-to-combine-hashes)

什么是组合您希望依赖于顺序的哈希的好方法？如果它特定于大小，那么 32 位和 64 位的一些已知技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:47:10.077

为了使生成的哈希顺序相关，算法中必须有一些顺序（即非静态）方面。最常见的技术可能是[循环冗余](http://www.hackersdelight.org/crc.pdf)校验 (CRC)。

CRC 可以在硬件中实现为具有 XOR 反馈的移位寄存器。这种移位寄存器充当确定性随机数发生器。如果初始状态相同，它将始终经历相同的状态序列。这些状态用于 CRC 签名计算，以可重复的方式异或数据。

要组合两个哈希值，您可以将它们与来自 CRC 算法的第三个值进行异或。这可以从查找表中计算或获取。-

流行的CRC码：

```
09 bits (CRC-8)
17 bits (CRC-16)
33 bits (CRC-32)
65 bits (CRC-64) 
```

[Classless.Hasher](https://bitbucket.org/jayclassless/classless-hasher/wiki/Home)提供了更多细节。

C# 实现可以在[HashLib](http://hashlib.codeplex.com/)中找到。

# meteor - 使用 Meteor 的文字转语音？

> ID：10128043
> 
> 赞同：1
> 
> 时间：2012-04-12T16:46:33.307
> 
> 标签：meteor

为有认知障碍的用户开发问卷应用程序。不同程度的自闭症，不同类型的脑损伤，不同类型的脑出生缺陷。

得到了一个使用 HTML/CSS/Coffeescript/LocalStorage 的原型。真正的应用程序将是我第一次进入完整的客户端/服务器应用程序领域。

2个问题。大量的图形和文本到语音。

我们必须假设我们的用户无法阅读。每个屏幕将有一到三个平均为 75k 的图像。对于文本到语音，每一位文本都需要可点击或可悬停。

我们的原型使用名为 Festvox/Festival 的 TTS 引擎。

那么，Meteor 将如何发送大量图像？我是否应该假设我们的应用程序将从 node.js 端发送图像和数据并从我们的服务器发送 TTS？关于连接有多困难的任何想法？

谢谢，

查理马吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:56:17.417

对于图像，我认为这些将在未来得到更好的处理，正如代码注释中所述，但目前这些可以放在公共文件夹中。这些现在将由流星服务器提供，但将来可能会提供其他服务。

至于 TTS，现在在另一台服务器/虚拟服务器上实现这一点可能更容易，流星服务器传达所需的内容，然后提供服务。在将 TTS 包添加到流星/节点之前，我认为这是您前进的唯一途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-15T15:40:14.913

我刚刚找到了[https://github.com/yogiben/meteor-tts](https://github.com/yogiben/meteor-tts)，它看起来很有希望。目前有一个小问题，我认为这与没有正确的 API 密钥有关，并且还需要互联网连接。可能不够可靠，无法满足您的需求，但我会看看能否解决 API 密钥问题。

# c++ - 位域结构赋值意外行为

> ID：10128044
> 
> 赞同：2
> 
> 时间：2012-04-12T16:46:34.883
> 
> 标签：c++, c

我不知道为什么，但位字段分配没有按预期工作。可能只是一件愚蠢的事情，但我无法找到问题所在。

任何帮助都非常受欢迎。

```
typedef struct  a {
    unsigned char a1 :1;
    unsigned char a2 :3;
    unsigned char a3 :2;
    unsigned char a4 :2;
} __attribute__((packed)) mystruct;

int main() {
    mystruct d;
    d.a1 = 0;
    d.a2 = 2;
    d.a3 = 1;
    d.a4 = 2;

    unsigned char *val = (unsigned char*) &d;

    printf("%02X \n", *val);
    printf("%02X \n", sizeof(hola));

    exit(0);
} 
```

返回输出：

```
94
01 
```

预期输出：

```
26
01 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T18:13:50.503

ASCII艺术：

```
 MSB                                LSB
+----+----+----+----+----+----+----+----+
|a4.1|a4.0|a3.1|a3.0|a2.2|a2.1|a2.0| a1 |
+----+----+----+----+----+----+----+----+
| 1  | 0  | 0  | 1  | 0  | 1  | 0  | 0  |
+----+----+----+----+----+----+----+----+
|        0x9        |        0x4        |
+----+----+----+----+----+----+----+----+ 
```

如前所述，行为是实现定义的；这是组织数据的两种合法方式之一，并且似乎是您机器上选择的格式。另一种行为是。

```
 MSB                                LSB
+----+----+----+----+----+----+----+----+
| a1 |a2.2|a2.1|a2.0|a3.1|a3.0|a4.1|a4.0|
+----+----+----+----+----+----+----+----+
| 0  | 0  | 1  | 0  | 0  | 1  | 1  | 0  |
+----+----+----+----+----+----+----+----+
|        0x2        |        0x6        |
+----+----+----+----+----+----+----+----+ 
```

这显然是您预期的行为。

由于它是实现定义的，因此您可以查看手册并找到编译器的功能，因为编译器必须记录其行为。

如果您担心可移植性，您将需要考虑如何组织您的结构定义以按照您需要的方式在您使用的每个平台上工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T16:49:52.040

几乎所有关于位域的东西都是实现定义的。尤其是单位中的位顺序。

> （C99，6.7.2.1p10）“单元内位域的分配顺序（高位到低位或低位到高位）是实现定义的。”

在您的实现中，这些位首先存储在一个单位 lsb（最低有效位）中，而不是您所期望的首先存储在 msb（最高有效位）中。

你所拥有的是：

```
[a1.0] [a2.0] [a2.1] [a2.2] [a2.0] [a3.1] [a4.0] [a4.1] 
   0      0      1      0      1      0      0      1
 bit 0                     -                      bit 7

 lsb                       -                      msb 
```

也就是说，`0x94`如果您认为最左边的位是最低有效位。

# iphone - iOS 5：如何将 Storyboard 中的 UITableView 链接到自定义子类 UIViewTableController？

> ID：10128048
> 
> 赞同：1
> 
> 时间：2012-04-12T16:47:00.113
> 
> 标签：iphone, ios5

我在 Xcode 4.2 中创建了一个自定义表视图控制器，并在 Storyboard 的视图中创建了一个 UITableView。如何将 UITableView（未出现在我的代码中）链接到我的自定义视图控制器？（它是 UITableViewController 的子类）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:48:51.733

1.  将一个实例`UITableViewController`从检查器拖到 IB 中的舞台，情节提要。
2.  Cmd+N 并从模板中选择`NSObject`类的实例或`UITableViewController`.
3.  如果您`NSObject`在步骤 2 中选择，请确保在头文件中更改`NSObject`为。`UITableViewController`
4.  将其保存为`CustomTableViewController`.
5.  在 IB 中，将类设置`UITableViewController`为`CustomTableViewController`。
6.  在实现中`CustomTableViewController`，您可以`tableView`通过调用`self.tableView`.

如果有任何部分不清楚，请告诉我。

# javascript - 有没有办法将变量传递到 Meteor 中的模板中？

> ID：10128053
> 
> 赞同：63
> 
> 时间：2012-04-12T16:47:17.077
> 
> 标签：javascript, templates, meteor

我一直在用 Meteor 进行实验，但遇到了一些我无法弄清楚的事情。为了好玩，我试图制作一台老虎机。我有以下 HTML：

```
<div class="slot-wrapper">
  {{> slot}}
  {{> slot}}
  {{> slot}}
</div>

<template name="slot">
  <div class="slot">
    <div class="number"><span>{{ number }}</span></div>
    <div class="divider"></div>
  </div>
</template> 
```

我想为每个插槽设置不同的号码。是否可以将变量传递给模板？像这样的东西：

```
<div class="slot-wrapper">
  {{> slot 1}}
  {{> slot 2}}
  {{> slot 3}}
</div>

<template name="slot">
  <div class="slot">
    <div class="number"><span>{{ number i}}</span></div>
    <div class="divider"></div>
  </div>
</template> 
```

也许我正在以错误的方式思考这个问题，并且有更好的方法。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-08-01T23:26:26.683

以前的所有答案都是矫枉过正或过时的。从 Meteor 0.8.x 开始，您可以直接从 HTML+空格键代码将静态参数传递到模板中：

```
<div class="slot-wrapper">
  {{> slot number="1"}}
  {{> slot number="2"}}
  ...
</div>

<template name="slot">
  <div class="number"><span>{{number}}</span></div>
</template> 
```

您所要做的就是`key="value"`在`{{> template}}`包含调用中传递参数：

```
{{> slot number="1"}} 
```

[在Spacebars Secrets: Exploring Meteor Templates](https://www.discovermeteor.com/blog/spacebars-secrets-exploring-meteor-new-templating-engine/)中了解更多信息。

* * *

如果您想将调用者模板的数据传递给子/嵌套/被调用模板，请执行以下操作：不传递任何内容。相反，从嵌套模板访问父数据上下文`../`：

```
<div class="slot-wrapper">
  {{> slot number="1"}}
  {{> slot number="2"}}
  ...
</div>

<template name="slot">
  <div>Machine name: {{../name}}</div>
  <div class="number"><span>{{number}}</span></div>
</template> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-28T09:59:19.147

原来还有另一种方式。

我试图通过谷歌搜索各种搜索来找出如何做到这一点，并找到了这个问题，但没有任何适合我的目的。除非您想将嵌套模板放在父模板中的不同位置，否则 TomUnite 的答案有效。

因此，经过大量搜索，我在流星代码库中找到了“一个”答案。（不是说这是确定的答案，但确实有效）

```
<template name="slots">
  {{> slot one}}
  <div>..something else</div>
  {{> slot three}}
  {{> slot two}}
</template>

<template name="slot">
  <div class="slot">
    <div class="number"><span>{{number}}</span></div>
    <div class="divider"></div>
  </div>
</template> 
```

如您所见，我们可以按任何顺序指定模板实例。第二个参数实际上是一个应该定义的变量，所以：

```
Template.slots.one = {
  number: 1
}
Template.slots.two = {
  number: 2
}
Template.slots.three = {
  number: 3
} 
```

这可以通过循环或在 slot 对象上使用 underscore.js 函数 _.extend 制成更简洁的代码。此外，我们可以将多个数据字段传递到这些对象中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-02T02:47:28.423

我想将此作为评论留下，因为这只是对 Joc 答案的澄清，但不能，所以这里加上我使用的示例。

只能将一个参数传递给模板：

```
{{> singleItemInfo arg1}} 
```

此参数必须是一个对象，例如：

```
{
    number: 1,
    number2: 2,
    numberComposite: {
        subnum1: 10,
        subnum2: 20
    }
}; 
```

可以通过它们的键访问参数值，并且可以切换范围以获取具有

`{{#with numberComposite}}`

这是示例的完整代码：

<html文件>

```
<body>
    {{ itemsView }}
</body>

<template name="itemsView">
    {{> singleItemInfo arg1}}
</template>

<template name="singleItemInfo">
    arg1 = {{ number }}
    arg2 = {{ number2 }} 
    {{#with numberComposite}}
        subArg1 = {{ subnum1 }}
        subArg2 = {{ subnum2 }}
    {{/with}}
</template> 
```

<javascript 文件>

```
Template.itemsView.arg1 = {
    number: 1,
    number2: 2,
    numberComposite: {
        subnum1: 10,
        subnum2: 20
    }
}; 
```

输出：

```
arg1 = 1 arg2 = 2 subArg1 = 10 subArg2 = 20 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-04T09:53:46.910

更好的答案：

在新的 Blaze 布局下可用于使模板上下文敏感的两种解决方案是：

1）直接将参数传递给模板

```
{{> contextSensitiveTemplate  context_1='x' context_2='y' }} 
```

2）在模板中使用理解上下文的助手。像这样调用助手：

```
{{ contextHelperName ../.. .. this }} 
```

和

```
Template.contextSensitiveTemplate.contextHelperName = function(parent_template, current_template, current_value_inside_each_loop) {
  return context_dependent_value_or_html     
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-12T17:57:18.233

这就是我为实现它所做的。我对 Meteor 还很陌生，所以可能有更好的方法：

插槽.html：

```
<head>
  <title>Slot</title>
</head>

<body>
  <div class="slot-wrapper">
    {{> slots}}
  </div>
</body>

<template name="slots">
  {{#each slots}}
    {{> slot}}
  {{/each}}
</template>

<template name="slot">
  <div class="slot">
    <div class="number"><span>{{number}}</span></div>
    <div class="divider"></div>
  </div>
</template> 
```

插槽.js：

```
if (Meteor.is_client) {
  Template.slots.slots = function () {
    var returnArray = new Array();
    returnArray[0] = { 'number': 10 };
    returnArray[1] = { 'number': 87 };
    returnArray[2] = { 'number': 41 };
    return returnArray;
  };
}

if (Meteor.is_server) {
  Meteor.startup(function () {
    // code to run on server at startup
  });
} 
```

希望这对您有所帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-04T20:29:27.350

我通常使用这两个 Handlebars 助手：

```
Handlebars.registerHelper('partial', function(templateName, options) {
    return new Handlebars.SafeString(Template[templateName](options.hash));
});

Handlebars.registerHelper('partialWithContext', function(templateName, context, options) {
    var extendedContext = _.extend(context, options.hash);
    return new Handlebars.SafeString(Template[templateName](context));
}); 
```

您可以像这样使用它（假设您有一个名为 的模板`menuItem`）：

```
{{partial 'menuItem' command='Open'}} 
```

或者在迭代中（假设您有一个名为 的模板`userProfile`）：

```
{{#each regularUsers}}
    {{partialWithContext 'userProfile' . isAdmin=false}}
{{/each}}

{{#each admins}}
    {{partialWithContext 'userProfile' . isAdmin=true}}
{{/each}} 
```

使用空格键，您可以实现类似的行为。在`partial.js`：

```
Template.partialWithContext.chooseTemplate = function (name) {
    return Template[name];
}; 
```

在`partial.html`：

```
<template name="partialWithContext">
    {{#with chooseTemplate name}}
        {{#with ../data}}
            {{> ..}}
        {{/with}}
    {{/with}}
</template> 
```

像这样使用它：

```
{{#each commands}}
    {{> partialWithContext name="commandListItem" data=this isAdmin=false}}
{{/each}}
{{#each adminCommands}}
    {{> partialWithContext name="adminCommandListItem" data=this isAdmin=true}}
{{/each}} 
```

希望它能起到作用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-17T18:44:08.110

`this`当你只传递一个参数时使用。

```
<div class="slot-wrapper">
    {{> slot 1}}
    {{> slot 2}}
</div>

<template name="slot">
    <div class="slot">
        <div class="number"><span>{{this}}</span></div>
        <div class="divider"></div>
    </div>
</template> 
```

不需要javascript来做到这一点。如果您需要的不仅仅是争论，请尝试 Dan 的方式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-23T10:04:30.653

此信息已过时，此处详细描述了 Blaze 布局引擎的传递参数： [https ://www.discovermeteor.com/blog/spacebars-secrets-exploring-meteor-new-templating-engine/](https://www.discovermeteor.com/blog/spacebars-secrets-exploring-meteor-new-templating-engine/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-16T00:57:11.653

这里有很多很好的信息。我的具体情况是我也想传入一些模板数据。

我想让子 Blaze 组件可重用，所以必须传入所有数据。例如，假设这个组件显示一个等级（即 A、B、C 等）。在一个页面上，我想使用该组件两次：你的成绩和你同学的平均成绩。

这是子组件...

等级.html

```
<template name="Grade">
    <h3>{{title}}</h3>
    <div>{{grade}}</h3>
</template> 
```

标题可以在父级中硬编码，但成绩来自分贝。这是我对父母进行编码的方式...

GradePage.html

```
<template name="GradePage">
    {{> Grade grade=gradeYours title="Your Grade" }}
    {{> Grade grade=gradeClass title="Class Grade" }}
</template> 
```

GradePage.js（在现实生活中它是反应式的，但在这里简化了）

```
Template.GradePage.helpers({
    gradeYours: function () {
        return 'A-';
    },
    gradeClass: function () {
        return 'B+';
    }
}); 
```

就是这样。子组件根本不需要伸手去获取它的值。

# php - 创建足球投注系统 [PHP & WordPress]

> ID：10128058
> 
> 赞同：-4
> 
> 时间：2012-04-12T16:47:49.937
> 
> 标签：php, wordpress, system

如果我要创建一个小型在线足球投注“系统”，用户可以在每个文本框中输入两个数字，代表所选球队的进球数（即阿森纳 3 - 0 切尔西）。然后，根据现实生活中的结果，用户应该获得一种货币奖励（仅在网站上 - 不是在现实生活中），100P 表示正确下注，50P 表示几乎，最后 0 表示完全错误 - 只是为了举个例子。

我将如何去创造它？我猜我会使用一个相当简单的 PHP 吗？我在 CMS WordPress 上运行该项目，因此我认为用户集成、存储货币的数据库等已经可用，以及其他非常有用的系统功能。我可能会在我的网站中手动输入真实的正确值，以减轻编程的痛苦，但它需要一个自动功能才能将积分传送到相应的用户帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:53:57.417

1.  create betting form in html
2.  submit user's bet to a SQL database table "bats" attached to their username and the gameid of a particular game
3.  have another table "scores" with the actual score for that game attached to the gameid
4.  when the user logs in / views their bets page if the score is in the "scores" table (rather than the row being null / whatever default value) it will then issue them a score
5.  simple PHP can determine how far off they were

Theres the breakdown, go use google

# sharepoint - SharePoint：从特定语言文件夹中注册 css 文件

> ID：10128060
> 
> 赞同：1
> 
> 时间：2012-04-12T16:47:57.077
> 
> 标签：sharepoint

我的 css 文件在`_layouts/MyProject/css/styles.css`里面，我需要从后面的代码中注册它。为此，我应该使用`CssRegistration.Register`方法：

```
CssRegistration.Register("MyProject/css/styles.css"); 
```

但是你会得到这个异常：

> 无法为“1033/styles/MyProject/css/styles.css”创建缓存安全 URL，找不到文件。请验证该文件是否存在于 layouts 目录下。

因为 SharePoint 期望 css 文件位于特定语言文件夹中，例如 English `1033/styles`。

*似乎没有参数可以关闭此行为！*

另一方面非常相似的任务，javascript文件的注册，支持这样的要求，见第三个参数`localizable`：

```
ScriptLink.Register(Page, "MyProject/js/script.js", false); 
```

为什么逻辑上相同的两个类具有如此不同的接口？有什么方法可以从特定语言的文件夹中注册 css 吗？或者唯一的方法是将相同的 css 文件分发到那些 LCID 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:19:13.540

您可以改为创建一个新`CssRegistration`控件并将其添加到页面中。然后在路径中包含“/_layouts/”文件夹

```
CssRegistration cssRegistration = new CssRegistration
{
  After = "corev4.css",
  Name = "/_layouts/MyProject/css/styles.css"
};
Controls.Add(cssRegistration); 
```

# java - JTable - 选定行点击事件

> ID：10128064
> 
> 赞同：32
> 
> 时间：2012-04-12T16:48:16.977
> 
> 标签：java, swing, linked-list, jtable, jtextfield

我有一个 Jtable，它通过 AbstractTableModel 填充了链表。

我想要做的是当我单击（鼠标左键单击）JTable 中的一行时，链接列表是搜索（在这种情况下它包含电影标题）并在 Jtextboxes 中显示链接列表中的值

我该怎么做呢？

这是代码

*   GUI_g：[http ://pastebin.com/J3qtjn8J](http://pastebin.com/J3qtjn8J)
*   程序表模型：http : [//pastebin.com/Dwkc9Cz3](http://pastebin.com/Dwkc9Cz3)
*   处理： http: [//pastebin.com/qHnkvCbr](http://pastebin.com/qHnkvCbr)
*   主要： http: [//pastebin.com/K4yGYX9H](http://pastebin.com/K4yGYX9H)

我猜它会将所选行中的数据检索到一个数组中，将其拆分，然后将其放入 jtextareas 中。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2015-10-05T05:55:26.410

我是这样做的：

```
table.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
        public void valueChanged(ListSelectionEvent event) {
            // do some actions here, for example
            // print first column value from selected row
            System.out.println(table.getValueAt(table.getSelectedRow(), 0).toString());
        }
    }); 
```

此代码对鼠标单击和键盘上的项目选择作出反应。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-04T22:14:59.123

```
 private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {                                     
     JTable source = (JTable)evt.getSource();
            int row = source.rowAtPoint( evt.getPoint() );
            int column = source.columnAtPoint( evt.getPoint() );
            String s=source.getModel().getValueAt(row, column)+"";

            JOptionPane.showMessageDialog(null, s);

} 
```

如果要单击 jtable 中的单元格或行，请使用这种方式

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T19:51:33.540

要了解选择了哪一行，请添加一个[`ListSelectionListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/ListSelectionListener.html)，如示例中的[*如何使用表格*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中所示[`SimpleTableSelectionDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#eg)。A[`JList`](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)可以直接从链表的`toArray()`方法中构造出来，你可以添加一个合适的监听器来了解细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T18:23:39.423

我建议为此使用[Glazed Lists](http://www.glazedlists.com/)。它使将数据结构映射到表模型变得非常容易。

要对 JTable 上的鼠标单击做出反应，请使用 ActionListener：[JLabel 或 JTable 单元上的 ActionListener](https://stackoverflow.com/questions/1378096/actionlistener-on-jlabel-or-jtable-cell)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-15T19:42:59.143

从[源代码](https://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableFilterDemoProject/src/components/TableFilterDemo.java)进行一些增强和编辑：

```
public class RowSelectionListener implements ListSelectionListener {

    @Override
    public void valueChanged(ListSelectionEvent event) {

        int viewRow = table.getSelectedRow();

        if (!event.getValueIsAdjusting() && viewRow != -1) {

            int columnIndex = 1;

            // Better to access table row using modelRow rather than viewRow
            int modelRow = table.convertRowIndexToModel(viewRow);

            // Access value at selected row at the second column (columnIndex = 1)
            Object modelvalue = table.getModel().getValueAt(modelRow, columnIndex);

            // Not recommended: same as above but access row using viewRow
            Object tablevalue = table.getValueAt(viewRow, columnIndex);

            // Print cell value
            System.out.println(modelvalue + "=" + tablevalue);
        }
    }
} 
```

然后添加`ListSelectionListener`到`JTable`：

```
 table.getSelectionModel().addListSelectionListener(new RowSelectionListener()); 
```

## 重要的提示：

`viewRow`并`modelRow`在应用时变得有效不同`TableRowSorter`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-08T18:09:54.477

您可以使用该`MouseClicked`事件：

```
private void tableMouseClicked(java.awt.event.MouseEvent evt) {
 // Do something.
} 
```

# iphone - UIPIckerView 显示图像和字符串

> ID：10128068
> 
> 赞同：0
> 
> 时间：2012-04-12T16:48:20.847
> 
> 标签：iphone, objective-c, ios, uipickerview

我有一个带有 3 个组件的 UIPickerView，我需要前 2 个组件来显示字符串，而第三个组件来显示图像。我可以通过实现两者来做到这一点：

```
- (NSString *) pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 

- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
          forComponent:(NSInteger)component reusingView:(UIView *)view 
```

还是我需要创建标签并只实施`viewForRow`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:43:36.960

```
 - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
      forComponent:(NSInteger)component reusingView:(UIView *)view
    {
UILabel *firstLabel = [[UILabel alloc] initWithFrame:CGRectMake(100, 0, 60, 32)];
firstLabel.text = [array1 objectAtIndex:row];
firstLabel.textAlignment = UITextAlignmentLeft;
firstLabel.backgroundColor = [UIColor clearColor];

UILabel *secondLabel = [[UILabel alloc] initWithFrame:CGRectMake(165, 0, 60, 32)];
secondLabel.text = [array2 objectAtIndex:row];
secondLabel.textAlignment = UITextAlignmentLeft;
secondLabel.backgroundColor = [UIColor clearColor];

UIImage *img = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png",[countries objectAtIndex:row]]];

UIImageView *icon = [[UIImageView alloc] initWithImage:img];        
temp.frame = CGRectMake(170, 0, 30, 30);

UIView *tmpView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 290, 32)] autorelease];
[tmpView insertSubview:icon atIndex:0];
[tmpView insertSubview:firstLabel atIndex:0];
[tmpView insertSubview:secondLabel atIndex:0];
[tmpView setUserInteractionEnabled:NO];
[tmpView setTag:row];
[channelLabel release];
[temp release];
return tmpView;

    } 
```

# mysql - MySQL中少于X个字符的查询结果

> ID：10128069
> 
> 赞同：2
> 
> 时间：2012-04-12T16:48:27.110
> 
> 标签：mysql, select, character

一些提交者提交的位置字符串太短。如何查询它们以在 phpMyAdmin 中删除它们？

查询看起来像这样（结尾显然是伪代码）：

```
SELECT `post_id` FROM `wp_postmeta` 
WHERE `meta_key` = 'location' 
AND `meta_value` HAS LESS THAN 10 CHARACTERS 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:50:54.417

```
SELECT `post_id` FROM `wp_postmeta` WHERE `meta_key` = 'location' AND CHAR_LENGTH(meta_value) < 10 
```

# algorithm - 计算任何 30 天期间的最大总和

> ID：10128070
> 
> 赞同：1
> 
> 时间：2012-04-12T16:48:30.290
> 
> 标签：algorithm, math

我的数据如下：

```
Date        Value
2011-01-01  1
2011-01-02  5
2011-01-03  30
   .....
2012-01-01  4 
```

我想计算我的数据中哪个 30 天的时间段具有最大的值总和。

不确定我的问题是否有意义，因为我的数学头脑不好，很难解释。

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:12:10.940

这应该为你做。它假定基于零 (0) 的阵列系统。

```
总和 <- 0
对于 i = 0 到 29
  总和 <- 总和 + 值（i）

最大值 <- 总和
开始 <- 0

对于 i = 30 到 value.lengh-1
  sum <- sum - value(i-30) + value(i)
  如果总和 > 最大值则
    最大值 <- 总和
    开始 <- i-29

```

这里`max`包含 30 个连续值的最大总和，并`start`包含 30 天最大运行的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:01:27.093

伪代码：

```
MaxStartDate = FirstDate
MaxTotal = -1   (something that is definitely below your possible total)

for n=0 to lastDate-30
{
    tempMax = 0

    for m=n to n+29
        tempMax = tempMax + date(m)

    if tempMax > MaxTotal
    {
        MaxTotal = tempMax
        MaxStartDate = date(n)
    }
} 
```

当 for 循环结束时，MaxTotal 将是您最高的 30 天总数，MaxStartDate 将是 30 天集合中的第一天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:03:30.163

```
for first 30 days in your data, compute the sum of all values
let this be called as max_sum
let start_date be the first date in the input data

Loop 'i' from 1 to (total dates - 30)
    temp_sum = (temp_sum + value of date (30+i) - value of date (i))
    if max_sum < temp_sum
       max_sum = temp_sum
       start_date= ith date 
```

的最终值`max_sum`是以任何 30 天`start_date`为起点的值的最大总和。

# c++ - 在 C++ 中检测 WM_KEYUP 和 WM_KEYDOWN 事件

> ID：10128071
> 
> 赞同：1
> 
> 时间：2012-04-12T16:48:33.040
> 
> 标签：c++, winapi, user-interface, user-input

我正在编写一个游戏，并希望能够检测同时按下两个箭头键的时间。

例如 ：

如果按下 UP 和 LEFT ：我想让角色向西北移动
如果单独按下 UP ：我想让角色向北
移动只向北移动。

我尝试使用 4 个布尔值来实现这一点，它们会跟踪已按下哪个箭头键。

```
LRESULT CALLBACK WindowProc (HWND   hwnd,
                         UINT   msg,
                         WPARAM wParam,
                         LPARAM lParam)
{

      //Variables and stuff initialized

   switch (msg)
   {
    case WM_CREATE:{//Stuff to initialize windows info}break;

    case WM_COMMAND:{//Stuff that responds to menubar selections}break;

    case WM_KEYDOWN:
   {
       switch(wParam)
       {
       case VK_UP:{moveUp=true;}break;

               case VK_DOWN:{moveDown=true;}break;

       case VK_LEFT:{moveLeft=true;}break;

       case VK_RIGHT:{moveRight=true;}break;

       //More cases for handling W,Q,A,S,D and SPACE inputs

       default: //Stop moving character

       }
   }

   //Make changes to player input over here
   case WM_KEYUP:
   {
       switch(wParam)
       {
                //Cases for handling ESCAPE, P, R, W and SPACE inputs

            case VK_UP:{moveUp=false;}break;

                case VK_DOWN:{moveDown=false;}break;

                case VK_LEFT: {moveLeft=false;}break;

            case VK_RIGHT:{moveRight=false;}break;
       }//end switch

   }//end WM_KEYUP

   break;

   case WM_PAINT:{}break;

   case WM_SIZE:{}break;

   case WM_DESTROY:{}break;

   }//end switch

   return DefWindowProc (hwnd, msg, wParam, lParam);
} 
```

而且它不起作用...如果我只是捕获 WM_KEYDOWN 事件，则会设置 moveUp、moveDown 和布尔值...但是如果我使用 WM_KEYDOWN 代码使它们为假，则根本不会检测到它们。

不知道为什么会这样。在我的游戏中使用字符键进入特定模式时遇到了同样的问题。只要按下“Q”，我就希望游戏处于特殊模式，并在发布时退出该模式。但即使这样也不起作用，就像这个箭头键不起作用一样。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-14T13:56:43.927

我看到的直接问题是缺少的`break;`声明`case WM_KEYDOWN:`

这意味着每次`case WM_KEYDOWN:`将 moveX 设置为 true时都会`case WM_KEYUP:`立即将其设置回 false。您说当您“只是捕捉`WM_KEYDOWN`事件”时正确设置了 moveX 变量，这表明这确实是问题所在。注释掉后，控制将在中断之前`case WM_KEYUP:`流入`case WM_PAINT:`（您可能不会注意到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:53:42.090

Maybe the [GetAsyncKeyState](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx) function would be of use to you.

# php - 在 html 文件中回显 php 输出

> ID：10128076
> 
> 赞同：0
> 
> 时间：2012-04-12T16:49:01.887
> 
> 标签：php, html, echo

我有一个 php 代码，它给了我以下输出：（它是一个数组）

```
<img src="images/image0.jpg" />
<img src="images/image1.jpg" />
<img src="images/image2.jpg" />
<img src="images/image3.jpg" />
<img src="images/image4.jpg" />
<img src="images/image5.jpg" />
<img src="images/image6.jpg" />
<img src="images/image7.jpg" />
<img src="images/image8.jpg" /> 
```

我想在我的 html 文件中打印或回显或复制或调用该确切输出。我应该怎么办？

这是我的代码php代码供参考：

```
<?php
//PHP SCRIPT: getimages.php
    header('content-type: application/x-javascript');

    function returnimages($dirname="./images") {
         $pattern="([^\s]+(\.(?i)(jpg|png|gif|bmp))$)";     //  http://www.mkyong.com/regular-expressions/how-to-validate-image-file-extension-with-regular-expression/
         $files = array();
         if($handle = opendir($dirname)) {
            while(false !== ($file = readdir($handle))){
                if(preg_match($pattern, $file)){ //if this file is a valid image 
                    $files[] = $file;
                } 
            }

            closedir($handle);
        }
        //sort($files);         // http://php.net/manual/en/function.sort.php
        natcasesort($files);    // case insensitive "natural order" algorithm :: http://php.net/manual/en/function.natcasesort.php

        return($files);
    }

    $images = returnimages(); //will get the array containing the images
    foreach($images as $img)
    {
      echo '<img src="images/' . $img . '" />' . "\n";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:57:48.123

```
<?php

$output = '<img src="images/image0.jpg" />
<img src="images/image1.jpg" />
<img src="images/image2.jpg" />
<img src="images/image3.jpg" />
<img src="images/image4.jpg" />
<img src="images/image5.jpg" />
<img src="images/image6.jpg" />
<img src="images/image7.jpg" />
<img src="images/image8.jpg" />';

$file = 'images.html';
file_put_contents($file, $output);

?> 
```

或者，如果您想更改现有脚本：

```
foreach($images as $img)
{
  echo '<img src="images/' . $img . '" />' . "\n";
  $output .= '<img src="images/' . $img . '" />' . "\n";
}

$file = 'images.html';
file_put_contents($file, $output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:01:13.783

这已经在 HTML 网页中呼应了

```
foreach($images as $img)
{
  echo '<img src="images/' . $img . '" />' . "\n";
} 
```

如果您需要将其保存到文件中，请使用

```
$file = 'images.html';
file_put_contents($file, $output); 
```

正如电台所说

# inheritance - Yii - 如何处理扩展 CFormModel 和 CFormModel

> ID：10128078
> 
> 赞同：1
> 
> 时间：2012-04-12T16:49:13.293
> 
> 标签：inheritance, yii, gii

假设我有一个名为“人”的数据库表。

此表中 70% 的字段是由用户提交表单创建的，另外 30% 是由其他数据填充的字段。

为了描述这个表，我使用 Gii 创建了一个扩展 CActiveRecord 的模型 (People.php)。

然后我意识到要显示我需要扩展 CFormModel 的表单。该类只需要向用户显示并收集 70% 的数据库字段的数据。它的唯一目的是显示表单并收集数据。

我的问题是，当我已经有一个名为 People 的模型类时，如何做到这一点？

谢谢你。希望有道理，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:13:10.390

您也可以使用[CActiveForm](http://www.yiiframework.com/doc/api/1.1/CActiveForm/)类创建表单，该类可以直接将表单字段与模型字段相关联。

如果你也从 Gii 生成你的控制器和视图，那会容易得多，然后你可以随意定制它。

# asp.net - ViewState、Session 和 StateServer

> ID：10128079
> 
> 赞同：1
> 
> 时间：2012-04-12T16:49:15.740
> 
> 标签：asp.net, session, webforms, viewstate

我有一个复杂的、非常复杂的`ASP.NET`WebForm，其中包含一个大型`ViewState`. 目前，为了降低对浏览器的影响（通过缩小 __VIEWSTATE 隐藏输入字段），我使用`PageAdapter`and`SessionPageStatePersister`将.`ViewState``Session`

但是，我想将会话模式从 更改`InProc`为`StateServer`，这样既可以降低 RAM 使用率，又可以避免站点重新启动和应用程序池回收问题。我是否需要将 ViewState 从 Session 中撤出？还是可以保持原样？

将来，我也想进行负载平衡，但我听说我可以只使用“粘性会话”，所以这可能不会强迫我进入 StateServer。

注意：我目前正在使用`.NET 2.0`（集成），但我愿意更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:30:18.353

在走这条路线之前，我还会考虑其他一些选择......

我首先要研究的是 ViewState 压缩，它可以将 ViewState 的大小减少多达 60%。Telerik 提供了一个很好的压缩模块，你可以在[这里找到](http://blogs.telerik.com/blogs/posts/09-02-27/optimization-tip-radcompression-for-viewstate.aspx)

其次，您可以在 ViewState 字段上设置最大长度，这将强制 ASP.NET 将 ViewState 划分为多个隐藏字段。这通常会产生更好的页面性能。您可以`PageStateFieldLength`像`web.config`这样设置：

```
<pages maxPageStateFieldLength="100"></pages> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:03:53.797

`SessionPageStatePersister`将您的 Viewstate 存储在 Session 对象中，*无论您的 Session 碰巧存储在哪里*。它完全不知道您的会话是 InProc、SQL 还是 StateServer，它应该继续工作而无需您做任何事情。

# r - 如何读取 R 中不同文件夹中的多个二进制文件？

> ID：10128084
> 
> 赞同：-1
> 
> 时间：2012-04-12T16:49:29.313
> 
> 标签：r

下面的代码是在一个文件夹中读取和循环通过多个二进制 (365) 文件一年。事实上我有很多年的文件夹，一个文件夹里有2000年的365个文件，另一个文件夹里有2001年的365个文件等等。

我的问题是如何从一年循环到另一年（从一个文件夹到另一个文件夹）？

```
setwd("C:\\PHD\\Climate Data\\Wind\\")
listfile<-dir()
for (i in c(1:365)) {
  conne <- file(listfile[i], "rb")
  file<- readBin(conne, integer(), size=2,  n=360*720, signed=T)
  file<-file-273.15 #
  close(conne)
  to.write = file(paste("C:\\PHD\\Climate Data\\Out\\Temperature_",i,".dat",sep=""),"wb")
  writeBin(file, to.write)
  close(to.write) 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:11:16.463

您需要采取一些步骤：

*   您可以使用`list.files`在目录结构中创建文件列表。请务必设置`recursive`为`TRUE`以遍历整个树，并设置`full.names`为`TRUE`以获取包括子目录在内的文件的名称。
*   一旦您阅读了此文件列表，我将使用`ldply`该`plyr`文件包来获取所有文件。

最后，读取所有数据的（未经测试的伪）代码示例如下所示：

```
list_of_files = list.files("datadir", recursive = TRUE, full.names = TRUE)
dat = l_ply(list_of_files, function(fname) {
    dum_data = readBin(fname)
    writeBin(dum_data)
  }) 
```

`dat`现在将是一个`data.frame`包含数据和相关时间的。只需将函数替换为您喜欢的任何内容即可使其适用于您的示例。

# java - 使用外部属性文件执行 jar

> ID：10128086
> 
> 赞同：3
> 
> 时间：2012-04-12T16:49:35.507
> 
> 标签：java, properties, jar

我有一个带有 main-class 的 jar，可以像这样执行：java -jar test.jar

在罐子里我有类似的东西

```
public static void main(String[] args) throws IOException {
    InputStream is = ClassLoader.getSystemClassLoader().getResourceAsStream("config.properties");
    Properties prop = new Properties();
    prop.load(is);
    //then I wanna fetch all the properties in the config.properties file
} 
```

我同时运行：

1.  java -jar test.jar

2.  java -jar test.jar -cp /tmp（config.properties 所在的位置）

3.  java -jar test.jar -cp /tmp/config.properties （显然它不起作用，但让你知道我想在这里实现什么）

代码不起作用，尽管我将 config.properties 文件的路径放在我的 $PATH 和 $CLASSPATH 下，但所有三个都抛出 NPE。

关键是，从长远来看，我会将配置文件放在 ${my-config-path} 中，并正确读取/处理它。但暂时我只想要一些快速而肮脏的东西。

1.  我不想在我的 jar 中包含属性文件。
2.  我想将它保存在外部类路径或路径中，当我执行 jar 时，它会毫无问题地找到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:03:55.783

一旦指定`-jar`了所有类路径选项，就会被忽略。

相反，指定默认配置位置（如在用户的主目录中）并允许在命令行上覆盖。

有多种命令行解析选项，最简单的用选项信息注释类属性，例如，长短选项名称、用法等。

或者使用一个`-D`选项并检索适当的系统属性。

另一个选择是`Preferences`API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T22:39:45.597

一个示例

```
@Echo off
java -cp "C:/***/***" -Dlog4j.configuration=file:C:/***/***/log4j.properties com.****.****.MainMethod %1 %2 ...
pause 
```

# java - 播放框架 - 缓慢的 csv 传输率

> ID：10128087
> 
> 赞同：0
> 
> 时间：2012-04-12T16:49:45.830
> 
> 标签：java, networking, playframework

使用 play framework 1.2.3 创建了一个图表来显示一些服务器的 CPU/内存。

为了制作图表，我创建了一个包含所有信息的 CSV 文件。此 CSV 文件大小约为 1.29MB。

我的问题是配置播放框架的服务器和我的电脑之间传输缓慢。传输文件大约需要 22 秒。如果我直接复制文件，我会得到大约 1.5Mb/s！这使得图表需要大约 30 秒来显示数据。

名称 方法 状态 类型 发起者大小 时间 data.csv GET 200 OK text/csv jquery-1.7.1.min.js:5 1.29M 25.17s

有可能提高这个传输率吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:36:56.920

您可以尝试压缩并上传文件。请显示复制上传文件的方法。

# java - JPA @Id 和 insertable = false，updatable = false 抛出异常

> ID：10128092
> 
> 赞同：7
> 
> 时间：2012-04-12T16:50:20.683
> 
> 标签：java, jpa, jpa-2.0, eclipselink

我正在使用 Oracle 数据库，并且在插入之前我有用于生成和存储 ID 的序列和触发器。

```
CREATE SEQUENCE CASE_SEQ START WITH 1001 INCREMENT BY 1 NOMAXVALUE; 

CREATE OR REPLACE TRIGGER CASE_TR_SEQ
BEFORE INSERT ON CASE FOR EACH ROW
BEGIN
  SELECT CASE_SEQ.NEXTVAL INTO :NEW.CASE_ID FROM DUAL;
END;
/ 
```

然后我有一个带有属性的简单实体：

```
@Id
@Column(name = "CASE_ID", insertable = false, updatable = false)
private Long caseId; 
```

...当我尝试构建项目时，我得到：

```
Exception [EclipseLink-46] (Eclipse Persistence Services - 2.3.2.v20111125-r10461):
org.eclipse.persistence.exceptions.DescriptorException
Exception Description: There should be one non-read-only mapping defined for the
primary key field [CASE.CASE_ID]. 
```

当我删除可插入或可更新关键字时，它就可以工作。我知道有很多解决方案如何使用 JPA 生成 ID，JPA 也可以使用（调用）oracle 序列来设置（生成）ID。但我试着理解为什么我的解决方案是错误的。为什么我不能将这两个关键字与 @Id 注释一起使用？我的想法是：我想禁止 JPA 插入或更新 caseId。

1）什么是正确的解决方案？我应该只使用@Id：

```
@Id
@Column(name = "CASE_ID")
private Long caseId; 
```

或者更好（更安全）也定义 insertable=false ：

```
@Id
@Column(name = "CASE_ID", insertable = false)
private Long caseId; 
```

2）我知道@Id的updatable = false没有意义（更新主键没有意义，但可以通过原始sql），但它是什么意思（你有一些有益的例子）：

```
@Id
@Column(name = "CASE_ID", updatable = false)
private Long caseId; 
```

# 编辑 2012-04-13

我做了一些测试：

实体

```
@Id
@Column(name = "CASE_ID")
private Long caseId; 
```

JPA 日志

```
INSERT INTO CASE (CASE_ID, CASE_DATE, INFO) VALUES (?, ?, ?)
bind => [3 parameters bound]|#] 
```

所以这是不安全的，因为 JPA 尝试存储 CASE_ID（然后由触发器由 Oracle 序列中的 ID 替换）。

实体

```
@Id
@Column(name = "CASE_ID", insertable = false)
private Long caseId; 
```

创建方法

```
public void createCase(final Case caseData) {
    caseData.setCaseId(-1001L);
    em.persist(caseData);
} 
```

JPA 日志

```
INSERT INTO CASE (CASE_DATE, INFO) VALUES (?, ?)
bind => [2 parameters bound]|#] 
```

这很好，因为 CASE_ID 不是插入命令的一部分。

并且 CASE_ID 的更新是不可能的，因为注释 ID：

```
public void update() {
    Case update = em.find(Case.class, 1023L);
    update.setCaseId(1028L);
}

Exception [EclipseLink-7251] (Eclipse Persistence Services - 2.3.2.v20111125-r10461):
org.eclipse.persistence.exceptions.ValidationException
Exception Description: The attribute [caseId] of class
[com.wordpress.kamiluv.jsfprototype.model.entity.Case] is mapped to a primary
key column in the database. Updates are not allowed. 
```

所以现在最后一个版本看起来是最安全的，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:59:54.533

您当前使用 JPA 注释说您有一个无法以任何方式插入或更新的 @Id 列。您必须能够在插入或更新之前设置 id，但 JPA 不知道如何设置。如果您不想在代码中设置 id，则需要在 @Id 上使用 @GeneratedValue 注释来告诉 JPA 使用什么策略（以下之一：TABLE、SEQUENCE、IDENTITY、AUTO）。

# android - 带有 Theme.NoTitleBar.Fullscreen 的 Android 布局错误

> ID：10128100
> 
> 赞同：2
> 
> 时间：2012-04-12T16:50:40.747
> 
> 标签：android, layout, fullscreen

我在清单中使用此标签使我的应用程序在没有通知栏的情况下全屏显示：

```
<activity ...
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" /> 
```

我的观点是线性布局。

它主要工作，但从有标题栏的屏幕转换时布局有点小故障。例如，当第一次启动应用程序时，整个应用程序布局在屏幕上向下移动通知栏的大小（所以我在屏幕底部的按钮被向下移动）。

打开选项菜单会正常将其移回屏幕，除非我切换到另一个具有通知栏的活动，然后再切换回来，它将再次向下移动。

关于如何解决这种故障行为的任何想法？

我在 Android 2.3.4 上使用 Android 2.1 SDK。

# java - 用于生成和使用生成的决策树的 Java 库

> ID：10128104
> 
> 赞同：0
> 
> 时间：2012-04-12T16:50:51.270
> 
> 标签：java, data-mining, weka, id3, decision-tree

我正在寻找一个 Java 库，它不仅可以使用 ID3 或 C4.5 算法构建决策树，还可以以某种合适的格式存储新构建的树。问题是我打算使用决策树引擎作为某种用户需求推断系统，即在使用训练数据生成决策树之后，我想给它输入（来自用户的数据）并将输出用作给用户的建议。简单地说，我只是不想能够遍历生成的树并根据输入数据集得到结果。我还想不仅构建二叉决策树，而且还想为每个父节点构建具有可变数量的子节点的树（这意味着某些节点可能有两个子节点，有些节点可能有三个，这都取决于父节点中检查的属性值）。我刚开始使用决策树，在这个领域没有太多经验。我使用谷歌搜索，开始查看 WEKA，但我不确定它是否满足我的要求。任何指导都会有很大帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:23:47.383

Weka 是*最*先进的分类工具，包括 C4.5。一定要试一试。

事实上，许多其他工具（KNIME、Rapidminer）通常只是围绕着 Weka，本质上是做一些数据预处理、用户界面、实验运行等，但主要任务委托给 Weka。

在我看来，Weka 的设计并不完美，但它是分类和预测的参考实现。**所以试试吧！**当您正在研究*其他*任务（例如集群或异常检测）时，请改用其他工具，例如 ELKI。Wekas 聚类算法是最小的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:33:46.893

选择 weka，它很流行、性能好、稳定、有据可查，人们将能够帮助你。

# svn - 使用 Team City 从 SVN 签出一个文件

> ID：10128107
> 
> 赞同：5
> 
> 时间：2012-04-12T16:51:06.623
> 
> 标签：svn, continuous-integration, teamcity

这可能吗？现在我正在使用构建工件依赖项（我将来自另一个构建配置的文件保存在 .zip 中，并将该工件作为依赖项添加到构建配置中我需要的地方）。但我认为这种方式会更有效率。

我已经看到这可以使用命令行 svn 来完成，但如果可能的话，我想使用 Team City 的 vcs root + checkout 规则概念来完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:59:22.110

是Team City自己做不到的；它的结帐规则只处理目录。事实上，[用户已经请求了此功能](http://youtrack.jetbrains.com/issue/TW-3460)，但它仍在等待中。我刚刚投了票。如果您看到并需要它，也请投票。

猜猜我会从命令行执行此操作。[方法如下](https://stackoverflow.com/questions/122107/checkout-one-file-from-subversion)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T10:18:34.067

我能够使用“编辑结帐规则”使其在 TC 中工作。

因此，假设您有一个大根 repo (BIG_REPO)，其中有多个巨大的子文件夹和一个您想要签出的文件 (THE_FILE)。这是一种方式：

1.  创建并附加新的 SVN 存储库
2.  作为 REPO URL 使用这种 URL：[https://SvnRepoOfYourCompany/svnrep/BIG_REPO/THE_FILE](https://SvnRepoOfYourCompany/svnrep/BIG_REPO/THE_FILE)
3.  转到附加回购的“编辑结帐规则”并使用此规则：

    +：。=> THE_FILE

4.  运行构建并验证文件确实已被签出

5.  派对辛苦

希望这可以帮助。奇怪的是，这仍然不是 TC 中的一项功能……也许有一天。

# internationalization - 从 GNU aspell 字典中获取单词列表

> ID：10128109
> 
> 赞同：2
> 
> 时间：2012-04-12T16:51:13.067
> 
> 标签：internationalization, aspell

我下载了用于孟加拉语词典支持的 aspell 包。从 tarball 中，我能够分离出 bn.wl 文件，它只是一个大约 100,000 个单词的列表，每行一个。

问题是编码显然是 13194-bn，并且我打开文件的任何文本编辑器都显示垃圾（每行一个垃圾字）。它可能期待 utf8 或其他东西。

如何将此文件转换为可读形式？我尝试使用 iconv 但它显然无法识别编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:44:45.747

aspell -l bn 转储大师

这行得通！

# c# - 有没有办法让三元运算短路？

> ID：10128110
> 
> 赞同：4
> 
> 时间：2012-04-12T16:51:14.067
> 
> 标签：c#, ternary-operator

我可以写

```
if(Model.DecisionReason != null && Model.DecisionReason.Length > 35)
    return Model.DecisionReason.Substring(0, 32) + "...";
else
    return Model.DecisionReason; 
```

并且将短路`&&`中的比较，防止在为空时出现异常。但是，如果我写`if``Model.DecisionReason`

```
return (Model.DecisionReason != null && Model.DecisionReason.Length > 35) ?
     Model.DecisionReason.Substring(0, 32) + "..." :
     Model.DecisionReason; 
```

没有短路，我遇到了异常。有没有办法让它短路，或者我是否被迫将长度比较包装在`if`检查空或嵌套三元组（不是最易读的）中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T16:52:36.750

您编写的两个代码示例将具有相同的行为。这不是`if`短路，而只是`&&`表达式本身的核心组成部分。

# mysql - 为什么这 2 个（相似的？）MySQL 查询的执行时间差异如此之大？

> ID：10128116
> 
> 赞同：2
> 
> 时间：2012-04-12T16:51:27.743
> 
> 标签：mysql, select, indexing

我有表`players`、`players_to_teams`和`accounts`。 对和`players_to_teams`有一个 FK 。 有一个并且有一个。和都被索引。`players``accounts``players``FirstName``accounts``Name``FirstName``Name`

跑步

```
SELECT players_to_teams.id
FROM players_to_teams
INNER JOIN players
ON players.id = players_to_teams.player_id
ORDER BY players.FirstName 
```

在 0.004 秒内执行。

```
SELECT players_to_teams.id
FROM players_to_teams
INNER JOIN accounts
ON accounts.id = players_to_teams.account_id
ORDER BY accounts.Name 
```

执行时间超过 7 秒。

有 30,000 个帐户记录和 250,000 个玩家记录。

`EXPLAIN`可以在这里找到：[https ://gist.github.com/2368906](https://gist.github.com/2368906)

这些查询不应该在相似的时间空间中执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:02:18.260

另一个可能有帮助的选项...我记得在某处读过...如果您在帐户 ID 和名称上都有一个索引作为单个索引（id，名称），那么引擎不必回到原始数据记录来提取名称值并可以直接从索引中提取它......从而节省了从匹配项上读取完整记录的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:55:11.070

您较慢的查询需要一个临时表来对结果集进行排序，而另一个可以使用 FirstName 上的索引，从而避免一起排序。（额外：使用索引；使用临时；使用文件排序）

您可以尝试强制对帐户进行索引，看看您是否可以超越优化的？

```
SELECT players_to_teams.id
FROM players_to_teams 
INNER JOIN accounts FORCE INDEX(Name)
ON accounts.id = players_to_teams.account_id
ORDER BY accounts.Name 
```

另一种选择是使用直接连接重写查询，并首先列出帐户表。

当帐户的行数较少时，为什么它目前首先选择 player_to_teams，我没有任何好的答案。

# regex - 对齐小数点vim

> ID：10128117
> 
> 赞同：2
> 
> 时间：2012-04-12T16:51:30.040
> 
> 标签：regex, vim

我有一列数据，如下所示：

```
0.934 
-0.3423
2.346621
0.0032 
```

我想要这样的东西：

```
 0.934 
-0.3423
 2.346621
 0.0032 
```

VIM 中是否有正则表达式或插件可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:22:51.397

有[对齐插件](http://www.vim.org/scripts/script.php?script_id=294)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:12:04.100

在`linux`你可以这样做：

```
:%!tr . ' ' | xargs printf '\%10s.\%-10s\n' 
```

### 输出：

```
 0.934
    -0.3423
     2.346621
     0.0032 
```

中有一个`printf()`函数`vim`。所以你可以在 vim 中玩这个技巧：

```
:%s/\v(.*)\.(.*)/\=printf('%10s.%-10s', submatch(1), submatch(2)) 
```

# asp.net - 尝试拆分文件名，以便我可以将其放入 3 个单独的字符串中

> ID：10128121
> 
> 赞同：0
> 
> 时间：2012-04-12T16:51:41.137
> 
> 标签：asp.net, vb.net

我正在将文件上传到一个目录，我也只是获取文件本身而不是目录和文件夹。

例如`6122002_Abstract_9-11-07.pdf`，通过使用此代码，我只能得到这个`hpf.FileName.Substring(hpf.FileName.LastIndexOf("\") + 1)`。

我想要做的是将 6122002、摘要和 07 年 9 月 11 日的日期分开，这样我就可以将其插入 sql 数据库。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:55:18.040

如果你有这个`6122002_Abstract_9-11-07.pdf` 尝试类似

```
Dim Arr() As String
str = "6122002_Abstract_9-11-07.pdf"
Arr = str.Split("_") 
```

所以数组将包含*6122002*，*Abstract*和*9-11-07.pdf*

**更新**

```
Dim number As String = Arr(0)
Dim name AS String = Arr(1)
Dim date As String = Arr(2).Substring(0, Arr(2).Length-4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:54:59.557

要获取没有路径且没有扩展名的文件名，您可以使用

```
IO.Path.GetFileNameWithoutExtension(f) 
```

而且您可能应该希望将日期部分作为 DateTime。您可以创建一个在其构造函数中采用文件名并将部分解析为属性的类，例如

```
Module Module1

    Public Class Paper
        Public Property SerialNumber As UInt64
        Public Property Type As String
        Public Property PublishedDate As DateTime

        Public Sub New(filename As String)
            Dim parts() As String = IO.Path.GetFileNameWithoutExtension(filename).Split("_"c)
            ' You should check there are three parts here.
            ' Also, you could use TryParse to make sure the parsing works.
            Me.SerialNumber = UInt64.Parse(parts(0))
            Me.Type = parts(1)
            Dim dateformats() As String = {"dd-MM-yy"} ' could add more if required
            Me.PublishedDate = DateTime.ParseExact(parts(2),
                                                   dateformats,
                                                   New Globalization.CultureInfo("en-GB"),
                                                   Globalization.DateTimeStyles.None)

        End Sub

    End Class

    Sub Main()
        Dim fs = IO.Directory.GetFiles("C:\temp\threeparts")
        Dim papers As New List(Of Paper)

        For Each f In fs
            papers.Add(New Paper(f))
        Next

        For Each p In papers
            Console.WriteLine("Serial: {0}, Type: {1}, Published: {2}", p.SerialNumber, p.Type, p.PublishedDate.ToString("dd-MMM-yyyy"))
        Next

        Console.ReadLine()

    End Sub

End Module 
```

# javascript - “fadeOut”立即触发后的“click”？

> ID：10128123
> 
> 赞同：1
> 
> 时间：2012-04-12T16:51:56.610
> 
> 标签：javascript, jquery

我需要每 20 秒一个接一个地运行 3 个 jquery 操作。

我需要：

1.  第一的`fadeOut()` `#recent`
2.  然后当完成`click()` `.next`
3.  然后`fadeIn` `#recent()`再一次

不确定它有什么不同，但它`.next`是`#recent`.

这是我到目前为止所拥有的：

```
$('#recent').fadeOut();
$('#recent .next').click();
$('#recent').fadeIn(); 
```

问题是在fadeOut() 完成之前点击触发。

谢谢 C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:57:52.977

问题是*一旦*`click`调用模拟事件就会触发它，因为它*不是*动画事件队列的一部分。

 **最简单的方法是使用 [on completed] 回调[`fadeOut`](http://api.jquery.com/fadeOut/)：

```
$('#recent').fadeOut(function () {
  $('#recent .next').click()
}).fadeIn() 
```

请注意，`fadeIn`动画已在动画队列*中*注册，因此“按预期工作”，即使不在回调中也是如此。

快乐编码。**

# ios - 如何在 UIView 中获取所有 UILabel

> ID：10128124
> 
> 赞同：7
> 
> 时间：2012-04-12T16:52:01.490
> 
> 标签：ios, objective-c, uiview, uilabel, subviews

我需要一种方法来获取 a 中的所有`UILabel`s`UIView`而不必遍历`UIView`.

我有许多其他类型的视图，`UIButton`s，`UIImageView`s，当我只需要 s 时，浏览所有这些视图太长了`UILabel`。

我试图避免这样的事情：

```
for (UIView *view in myView.subviews) 
{
    if([view isKindOfClass:[UILabel class]])
    {
        UILabel *lbl = (UILabel*)view;
    }
} 
```

有可能还是我在做梦？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:01:11.243

创建一个`NSArray`ivar，您可以将所有`UILabel`' 添加到其中。

如果您在代码中执行此操作，那么当您创建`UILabel`只是做

```
NSMutableArray *labels = [[NSMutableArray alloc] init];

// Repeat this for al labels
UILabel *label = [[UILabel alloc] in...
[labels addObject:label];

// Then
self.labels = [labels copy]; 
```

如果您使用 IB，请像这样声明您的财产

```
@property (nonatomic, strong) IBOutletCollection(UILabel) NSArray *labels; 
```

并将所有标签连接到此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-15T22:33:15.887

伙计，你需要使用递归。（如果你不想使用标签）

试试这个。

```
-(UIView *)checkChild:(UIView *)view{

    NSArray *arrayView = view.subviews;
    UIView *returnView = nil;

    for (UIView *auxView in arrayView) {
        if ([auxView isKindOfClass:[UILabel class]]) {
            return auxView;
        }else{
            returnView = [self checkChild:auxView];
        }
    }
    return returnView;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-16T21:52:15.993

我喜欢@SiddharthaMoraes 的方法，但将其更改为收集在其路径上找到的所有元素。我一直在寻找`UILabels`my 的内部`UIViewController`，但找不到它们，因为它们嵌套在 another`UIView`中，所以这种递归应该可以解决问题：

```
-(NSMutableArray *)checkChild:(UIView *)view{

    NSArray *arrayView = view.subviews;
    NSMutableArray *arrayToReturn = [NSMutableArray new];

    for (UIView *auxView in arrayView) {
        if ([auxView isKindOfClass:[MyLabel class]]) {
            [arrayToReturn addObject:auxView];
        }else if( auxView.subviews ){
            [arrayToReturn addObjectsFromArray:[self checkChild:auxView]];
        }
    }
    return arrayToReturn;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T16:56:05.797

您可以为标签设置标签属性..像这样......

```
label.tag = 100;

UILabel *lbl = [yourView viewWithTag:100]; 
```

# c# - A better way to handle NullReferenceExceptions in C#

> ID：10128125
> 
> 赞同：5
> 
> 时间：2012-04-12T16:52:02.223
> 
> 标签：c#, exception-handling

I recently had a coding bug where under certain conditions a variable wasn't being initialized and I was getting a `NullReferenceException` . This took a while to debug as I had to find the bits of data that would generate this to recreate it the error as the exception doesn't give the variable name.

Obviously I could check every variable before use and throw an informative exception but is there a better (read less coding) way of doing this? Another thought I had was shipping with the `pdb` files so that the error information would contain the code line that caused the error. How do other people avoid / handle this problem?

Thanks

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T16:57:51.557

首先：不要在一个语句中做太多。如果您在一行中有大量的取消引用操作，那么找到罪魁祸首将变得更加困难*。*得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)对此也有帮助——如果你有类似`order.SalesClerk.Manager.Address.Street.Length`的情况，那么当你遇到异常时，你有很多选择可以涉足。（我对得墨忒耳法则*并不*教条，但一切都要适度……）

其次：更喜欢强制转换 using `as`，除非对象是不同的类型是*有效*的，这通常会在之后立即进行空检查。所以在这里：

```
// What if foo is actually a Control, but we expect it to be String?
string text = foo as string;
// Several lines later
int length = text.Length; // Bang! 
```

在这里，我们会得到一个 NullReferenceException 并最终将其追溯到`text`null ——但是您将不知道这`foo`是因为它是 null 还是因为它是一个意外的类型。如果它*真的*应该是 a `string`，则改为：

```
string text = (string) foo; 
```

现在您将能够区分这两种情况。

第三：正如其他人所说，验证您的数据 - 通常是公共和潜在内部 API 的参数。我在[Noda Time](http://noda-time.googlecode.com)的足够多的地方这样做，我有一个实用程序类来帮助我整理检查。例如（来自[`Period`](http://code.google.com/p/noda-time/source/browse/src/NodaTime/Period.cs)）：

```
internal LocalInstant AddTo(LocalInstant localInstant,
                            CalendarSystem calendar, int scalar)
{
    Preconditions.CheckNotNull(calendar, "calendar");
    ...
} 
```

您也应该*记录*什么可以和不可以为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T17:00:13.737

在很多情况下，几乎不可能计划和解释可能在应用程序执行流程中的任何给定点发生的每种类型的异常。防御性编码仅在某一点上有效。诀窍是将可靠的诊断堆栈整合到您的应用程序中，它可以为您提供有关未处理错误和崩溃的有意义的信息。在应用程序域级别拥有一个好的顶级（最后一搏）处理程序将对此有很大帮助。

是的，发布 PDB（即使是发布版本）是获得完整堆栈跟踪的好方法，可以查明错误的确切位置和原因。但是，无论您选择何种诊断方法，都需要从一开始就将其融入应用程序的设计中（理想情况下）。改造现有的应用程序可能是乏味的，而且是时间/金钱密集型的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T16:58:27.390

很抱歉，我将始终进行检查以验证我在特定方法中使用的任何对象都不为空。

这很简单

```
if( this.SubObject == null )
{
    throw new Exception("Could not perform METHOD - SubObject is null.");
}
else
{
...
} 
```

否则我想不出任何彻底的方法。无论如何不进行这些检查对我来说没有多大意义；我觉得这只是一种很好的做法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T17:00:12.970

首先，您应该*始终*验证您的输入。如果`null`不允许，则抛出`ArgumentNullException`.

现在，我知道这有多痛苦，因此您可以研究为您完成此操作的程序集重写工具。这个想法是你会有一种属性来标记那些不能是的参数`null`：

```
public void Method([NotNull] string name) { ... 
```

重写者将填补空白......

或者一个简单的扩展方法可以使它更容易

```
name.CheckNotNull(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T17:18:22.770

如果您只是在寻找一种更紧凑的方式来针对具有空引用进行编码，请不要忽视空合并运算符`??` [MSDN](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

显然，这取决于你在做什么，但它可以用来避免额外的 if 语句。

# javascript - how to give the url of a jsp page to open pop up which is in WEB-INF folder while using springs frame work

> ID：10128128
> 
> 赞同：1
> 
> 时间：2012-04-12T16:52:10.837
> 
> 标签：javascript, springsource

In my project i have requirement to open a jsp page as a popup from another jsp for that i use the javascript code as follows

> window.open('popup.jsp','popupname','//properties of popup window ')

here in url if i mention as of above then i have to keep that jsp page in webcontent folder

now my question is If i want to keep that jsp page in WEB-INF folder how i have to mention the url.

I tried to give url like WEB-INF/popup.jsp but it is not working. but if i create a new folder in webcontent and try to acess it like createdfolder/popup.jsp its working.

Can anyo one help me one this issue how i have the url to acess the jsp page in WEB-INF.

Note:-I am using springs frame work in my project.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:10:14.120

您必须使用`viewResolver`才能找到`jsp pages`里面的内容`WEB-INF`

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean> 
```

将此添加到您的控制器中

```
@RequestMapping("/popup.htm")
    public String showPopupPage(){
        return "popup";
    } 
```

在你的jsp页面中添加这个

```
window.open('popup.htm','popupname','//properties of popup window ') 
```

# jquery - Jquery 没有在 Listview tr 点击事件上触发

> ID：10128142
> 
> 赞同：0
> 
> 时间：2012-04-12T16:53:21.810
> 
> 标签：jquery, listview

我能够让它在 Gridview 上工作。最终，我试图在单击时突出显示一行。为了测试，我正在使用警报。

这是jQuery：

```
$(document).ready(function() {
  $('#WhiteRow tr').click(function() {
    event.preventDefault();
    alert("white");
  }); 
```

这是HTML：

```
<asp:Panel ID="GridViewDrillIntoCell_Panel_All"
     runat="server"
     width="2000px" 
     height="380px"
>
<asp:ListView ID="GridViewDrillIntoCell_All" 
     runat="server" 
     ScrollBars="Vertical"
     ItemPlaceholderID= "myItemPlaceHolder" 
     UseAccessibleHeader="True"
     AutoGenerateColumns="false"
     HeaderStyle-CssClass="HeaderCss2" 
     OnSelectedIndexChanged="GV_Scorecard_Tab1_SelectedIndexChanged"
     OnRowDataBound="GridViewDrillIntoCell_All_RowDataBound"
> 
  <LayoutTemplate> 
    <div id="Listview">
      <table border="0" cellpadding="1">
        <tr id="HeadingRow">
          <th id="hcol1" style="width:50px">Client</th>
        </tr>
        <tr>
          <asp:PlaceHolder ID="myItemPlaceHolder" runat="server">
          </asp:PlaceHolder>
        </tr>
      </table>
    </div>
  </LayoutTemplate>
  <ItemTemplate>
    <tr id="WhiteRow">
      <td id="col1" class="ListViewStyle" style="width:50px"> 
        <%# Eval("LMClient")%>
      </td> 
    </tr> 
  </AlternatingItemTemplate>      
</asp:ListView></asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:56:56.937

我认为您的选择器不正确。

`#WhiteRow tr`表示选择`tr`id 为的元素中的所有元素`WhiteRow`。因此，您正在寻找行中的行。

# jquery - Index of a class using jQuery

> ID：10128143
> 
> 赞同：0
> 
> 时间：2012-04-12T16:53:26.497
> 
> 标签：jquery, indexing, click

I have a set of a tags that contain the class navLink.

```
<li><a href="whatever0.html" class="naviLink"><img src="some-image0.jpg" /></a></li>
<li><a href="whatever1.html" class="naviLink"><img src="some-image1.jpg" /></a></li>
<li><a href="whatever2.html" class="naviLink"><img src="some-image2.jpg" /></a></li> 
```

I have another area of the page where it contains the same number of elements (in this case 3). They are in the same order.

```
<div id="main_navi">
<ul>
<li>Some Content 0</li>
<li>Some Content 1</li>
<li>Some Content 2</li>
</ul>
</div> 
```

The jQuery plugin I'm using automatically makes everything inside #main_navi into links in a carousel type system. When you click the li tag, it scrolls to the image associated with it. I think that behavior is fine.

**Here is my issue:** My client in their infinite wisdom wants the default behavior to change when you click on the li to take you to the page that corresponds to that image (in this case what is in the whatever.html link.

So far I did this:

```
$("#main_navi li").click(function() {
  // to find out which li was clicked on
  var index = $(this).index();

  // then i want to grab what url it was referencing..
  alert($('.naviLink').eq(index).attr('href'));
  });

}); 
```

**However**: when I click on the first link Some Content 0, it alerts the url for the last link (whatever2.html). What I'm I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:57:28.683

您似乎错过了您的 href 的初始报价。

```
<li><a href="whatever0.html" class="naviLink"><img src="some-image0.jpg" /></a></li>
<li><a href="whatever1.html" class="naviLink"><img src="some-image1.jpg" /></a></li>
<li><a href="whatever2.html" class="naviLink"><img src="some-image2.jpg" /></a></li> 
```

编辑：这应该涵盖你。

```
$("#main_navi li").on("click", function() {
    alert($('.naviLink').eq($(this).index()).attr('href'));
}); 
```

[JSFiddle](http://jsfiddle.net/post_erasmus/dxtwy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:07:55.600

它对我不起作用。我的 html 代码是

```
<input type="button"   class="buttonclose  marleft fleft clrPric" value="X">
<input   type="button"   class="buttonclose  marleft fleft clrPric" value="X"> 
<input type="button"  class="buttonclose  marleft fleft clrPric" value="X">
<input type="button"   class="buttonclose  marleft fleft clrPric" value="X"> 
```

我给了 jquery 像 $('.clrPric').click(function(){ console.log($(this).index());});

它在控制台中仅显示 7。此类没有其他元素。我想获取单击按钮的编号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:08:35.937

你可以试试这个

```
$("#main_nav li").click(function () {
    var index = $(this).index();

$('.naviLink').each(function(index2){

if(index == index2)
{
     alert($(this).attr('href'));
}

});

}); 
```

# c# - C# - Issues Selecting XML with Linq

> ID：10128145
> 
> 赞同：0
> 
> 时间：2012-04-12T16:53:35.500
> 
> 标签：c#, xml, linq, windows-phone-7

I am trying to pull an event description in XML, but I am having trouble accessing the data.

I am trying to access the eventDetailsValue element.

Here is a sample of my code:

(version 1)

```
 XElement doc = XElement.Parse(e.Result);

evtDesc = doc.Element("eventDetails").Element("eventDetails").Element("eventDetailsValue").Element("eventDetailsValue").Value; 
```

(version2)

```
XElement doc = XElement.Parse(e.Result);

var xGood = from detaildoc in doc.Descendants("eventDetails")
from d in detaildoc.Elements("eventDetail").Elements("eventDetailsValue")
select d; 
```

I have tried the following for a different element and it worked:

```
GeoLat = Convert.ToDouble(doc.Element("latitude").Value); 
```

Here is a sample of the xml result (i removed the values for simplicity):

```
<event>
  <longitude></longitude> 
  <latitude></latitude> 
  <category></category> 
  <dma></dma> 
  <activeAdvantage></activeAdvantage> 
  <seoUrl></seoUrl> 
  <assetID></assetID> 
  <eventID></eventID> 
  <eventDetailsPageUrl></eventDetailsPageUrl> 
- <mediaTypes>
  <mediaType></mediaType> 
  <mediaType></mediaType> 
  <mediaType></mediaType> 
  <mediaType></mediaType> 
  <mediaType></mediaType> 
  </mediaTypes>
  <eventContactEmail /> 
  <eventContactPhone /> 
  <eventName></eventName> 
  <eventDate></eventDate> 
  <eventLocation></eventLocation> 
  <eventAddress></eventAddress> 
  <eventCity></eventCity> 
  <eventState></eventState> 
  <eventZip></eventZip> 
  <eventCountry></eventCountry> 
  <usatSanctioned></usatSanctioned> 
  <regOnline></regOnline> 
  <eventCloseDate></eventCloseDate> 
  <currencyCode></currencyCode> 
  <eventTypeID></eventTypeID> 
  <eventType></eventType> 
  <hasEventResults></hasEventResults> 
  <hasMetaResults></hasMetaResults> 
  <showMap></showMap> 
  <eventContactEmail /> 
  <eventContactPhone /> 
  <displayCloseDate></displayCloseDate> 
  <excludedFromEmailing></excludedFromEmailing> 
  <regOpensMessage /> 
  <regFunnel></regFunnel> 
  <isValid></isValid> 
  <displayRegistration></displayRegistration> 
- <channels>
- <channel>
  <channelName></channelName> 
  <primaryChannel></primaryChannel> 
  </channel>
  </channels>
- <eventDetails>
- <eventDetail>
  <eventDetailsName></eventDetailsName> 
  <eventDetailsOrder></eventDetailsOrder> 
  <eventDetailsValue></eventDetailsValue> 
  </eventDetail>
- <eventDetail>
  <eventDetailsName></eventDetailsName> 
  <eventDetailsOrder></eventDetailsOrder> 
  <eventDetailsValue></eventDetailsValue> 
  </eventDetail>
  </eventDetails>
  <eventDonationLinks /> 
  <eventSanctions /> 
- <eventCategories>
- <eventCategory>
  <categoryID></categoryID> 
  <categoryGroupCount></categoryGroupCount> 
  <categoryName></categoryName> 
  <categoryType></categoryType> 
  <categoryOrder></categoryOrder> 
  <numRegistered></numRegistered> 
  <maxRegistrations></maxRegistrations> 
  <percentFull></percentFull> 
  <displayDate></displayDate> 
  <closeDate></closeDate> 
  <actualCloseDate></actualCloseDate> 
  <isExpired></isExpired> 
- <priceChanges>
- <priceChange>
  <price></price> 
  <priceUntilDate></priceUntilDate> 
  </priceChange>
  </priceChanges>
  </eventCategory>
  </eventCategories>
  <eventUrl></eventUrl> 
  <eventContactUrl></eventContactUrl> 
  <eventImageUrl></eventImageUrl> 
  </event> 
```

Any help would be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:02:03.957

Try this query:

```
var xGood = from detaildoc in doc.Descendants("eventDetails")
select new 
{
Value = detaildoc.Elements("eventDetail").Elements("eventDetailsValue").Value
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:35:16.747

The eventDetailsValue is in an array of eventDetail elements. So you need to diferentiate which element in the array you want. With this (and these LinqToXml extensions: [http://searisen.com/xmllib/extensions.wiki](http://searisen.com/xmllib/extensions.wiki)) you can write it like this:

```
XElement doc = XElement.Parse(e.Result);
var details = doc.GetEnumerable("eventDetails/eventDetail", x => new
{
    Name = x.Get("eventDetailsName", string.Empty),
    Order = x.Get("eventDetailsOrder", string.Empty),
    Value = x.Get("eventDetailsValue", string.Empty)
}); 
```

`details` is an `IEnumerable<object>` of Name's, Order's and the Value(s) you want. You can now loop through details and get the value(s) you want. I made Name, Order and Value all be strings, but by calling `Get<type>("name", defaultValueByType)` you can have them be other types instead.

You can loop through them like this:

```
foreach(var detail in details)
{
    string value = detail.Value;
} 
```

GetEnumerable is shorthand (in this case) for:

```
doc.Element("eventDetails").Elements("eventDetail").Select(x => new ...) 
```

But it does null checking for you, which if your xml always produces the above xml, there would be no problems to do it long hand. And Get returns the proper value.

**Note:** Because this is a `WindowsPhone7` project, you'll have to set a compiler flag of `WindowsPhone7` so that the extensions compile without complaint (hopefully/I haven't tested it).

# function - 如何使用 GetProcAddress 函数调用 MessageBox？

> ID：10128148
> 
> 赞同：4
> 
> 时间：2012-04-12T16:53:46.980
> 
> 标签：function, call, dllimport, dllexport, getprocaddress

我想以这种方式调用 MessageBox() 函数：

1）。加载所需的库
2)。获取函数地址
3). 称它为

因此，对于我理解的目标，我应该在 MessageBox 函数中定义具有所有类型参数的新类型。

它返回 INT 并接受：HWND、LPCSTR、LPCSTR、UNIT。

所以我注册了新类型：

```
typedef int(__stdcall *msgbox)(HWND, LPCSTR, LPCSTR, UINT); 
```

我在调用此类函数时遇到问题。这种方式适用于所有功能还是仅适用于导出？
我怎样才能以这种方式准确地调用 MessageBox？

完整代码：

```
#include <iostream>
#include <windows.h>

using namespace std;

typedef int(__stdcall *msgbox)(HWND, LPCSTR, LPCSTR, UINT);

int main(void)
{
    HINSTANCE__ *hModule = LoadLibrary(L"\\Windows\\System32\\User32.dll");
    msgbox *me = 0;

    if(hModule != 0)
    {
        me = (msgbox*)GetProcAddress(hModule, "MessageBox");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:31:28.397

您为什么将所有内容都声明为指针？

[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)返回 an `HMODULE`，而不是 an `HINSTANCE__ *`（它将与后者一起使用，但最好遵守文档）。

同样，`msgbox`is `typedef`'d 到函数指针类型，所以`me`是 a `msgbox`，而不是 a `msgbox *`。

失败的原因`GetProcAddress`是因为 user32.dll 导出了 2 个函数，`MessageBoxA`而`MessageBoxW`. 当您简单地调用`MessageBox`代码时，Windows.h 中定义的宏会将其替换为 2 个实际函数名称之一，具体取决于您是否正在编译`UNICODE`。但是，当您尝试直接访问导出的函数时，您需要明确指定要获取指向的指针。

```
#include <iostream>
#include <windows.h>

typedef int(__stdcall *msgbox)(HWND, LPCSTR, LPCSTR, UINT);

int main(void)
{
  HMODULE hModule = ::LoadLibrary(L"User32.dll");
  msgbox me = NULL;

  if( hModule != NULL ) {
    me = reinterpret_cast<msgbox>( ::GetProcAddress(hModule, "MessageBoxA") );
  }

  if( me != NULL ) {
    (*me)( NULL, "I'm a MessageBox", "Hello", MB_OK );
  }

  if( hModule != NULL ) {
    ::FreeLibrary( hModule );
  }
} 
```

# algorithm - Is this solvable in polynomial (or pseudo-polynomial) time?

> ID：10128150
> 
> 赞同：10
> 
> 时间：2012-04-12T16:53:50.757
> 
> 标签：algorithm, optimization, mathematical-optimization, traveling-salesman, np

I'm trying to come up with a reasonable algorithm for this problem:

Let's say you have a bunch of balls. Each ball has at least one color, but can also be multicolored. Each ball has a weight and a value associated with it. There are also a bunch of boxes which are each only one color. Each box has a maximum number of balls it can hold. The goal is to maximize the sum of the value in the boxes while staying under some total weight, *W*, and the only rule is:

In order to place a ball in a box, it has to at least have the box's color on it

(For example, you can put a blue and green ball into a blue box or a green box, but not into a red box.)

I've dome some research and this seems similar to the knapsack problem and also similar to being solvable by the Hungarian algorithm, but I can't quite seem to reduce it to either problem.

I'm just curious is there's some kind of dynamic programming algorithm for this type of problem to make it solvable in polynomial time, or if it's just the traveling salesman problem in disguise. Would it help if I knew there were at most X colors? Any help is greatly appreciated. I could also formalize the problem a bit with variable names if it would help. Thanks!

Here's a simple example:

**Maximum weight:** 5

**Balls:**

1 red ball - (value = 5, weight = 1)

1 blue ball - (value = 3, weight = 1)

1 green/red/blue ball - (value = 2, weight = 4)

1 green/blue ball - (value = 4, weight = 1)

1 red/blue ball - (value = 1, weight = 1)

**Boxes:**

1 red (holds 1 ball)

1 blue (holds 2 balls)

1 green (holds 1 ball)

**Optimal Solution:**

red ball in red box

blue ball and red/blue ball in blue box

green/blue ball in green box

Total value: 13 (5 + 3 + 1 + 4)

Total weight: 4 (1 + 1 + 1 + 1)

Note: even though the green/red/blue ball was more valuable than the red/blue ball, it's weight would have put us over the limit.

**Edit:**

One clarifying point: balls with the same color combination will not necessarily have the same weights and values. For example, you could have a red ball with value 3 and weight 1 and another red ball with value 2 and weight 5.

**Edit 2:**

We can assume integer weights and values if it helps us come up with a dynamic programming algorithm.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:48:56.187

如果盒子的数量没有限制，那么通过从[3 分区](http://en.wikipedia.org/wiki/3-partition_problem)减少（设置 n/3 个盒子并使用值 = 权重使所有事物变成彩虹色），这个问题是强 NP 难的。

如果盒子的数量是恒定的，那么就有一个通过动态规划的伪多项式时间算法，其中每个 DP 状态由每个盒子的填充程度组成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T17:10:27.150

这至少和背包问题一样复杂——考虑一个所有球都是红色的并且只有一个红色盒子的情况。

如果具有相同颜色组合的球必须具有相同的重量和值，请考虑当您有红色/蓝色、红色/绿色等球且只有一个红色框的情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T17:16:14.207

这个问题是NP完全的，因为它包含了背包问题。

也就是说，它不仅仅是类似于背包问题：如果有一个碗，所有的球都有那个碗的颜色，碗里的最大球数是球的总数，那么问题就是背包问题.

如果一个算法可以在多项式时间内解决这个问题，它就可以在多项式时间内解决任何背包问题。但是，由于背包问题是 NP 完全的，所以这个问题也是。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T17:11:10.397

背负式的减量如下。给定您的背包实例，您将创建一个球和箱子问题的实例：对于背包实例的每个项目，您都有一个与该项目具有相同重量和价值的球。然后你有一个代表背包的盒子。球和盒子都是蓝色的。盒子的容量是背包问题中给出的极限。给定您的问题的解决方案，我们在盒子里有一组球，其总重量最多为背包限制，并且其总价值最大化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T17:13:07.127

在这种情况下，你能做的最好的事情就是得到一个最优解的近似值——背包问题本身在多项式时间内是不可解的。如果您可以为它生成一个好的算法，您可能仍然可以在多项式时间内获得好的（尽管不能保证是最佳的）结果。

# excel - Formula for creating identity column in Excel

> ID：10128153
> 
> 赞同：1
> 
> 时间：2012-04-12T16:53:59.017
> 
> 标签：excel, formulas

I'm sure my terminology is off, I just want a formula to put in a column in excel where each cell equals the cell above it + 1\. End result I make the first cell 1 and the rest count up from there. Maybe there's a more correct way to do this. Suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-24T22:55:41.250

一个更通用的方法（不复制等）是系列填充，在主页 > 编辑 - 填充下的功能区上。使用起始值（`1`在示例中）为起始单元格播种，如有必要，重新选择它，并如图所示是否将`1`一列向下递增一百次：

[![SO10128153 示例](../Images/f6545b84033fdadbec7ad24888119122.png)](https://i.stack.imgur.com/cVPF7.jpg)

可以跨行，日期等，但主要优势`=A1+1`可能是不涉及公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-15T17:08:08.907

```
=IF(B2<>"",A2+1) 
```

这是一种仅在开始填写行的其余部分后才填充数字的方法。我有一个宏可以做到这一点，但是团队不能使用宏，所以我发现这个公式就足够了。

# android - displaying downloaded images in my phone gallery

> ID：10128155
> 
> 赞同：1
> 
> 时间：2012-04-12T16:54:01.387
> 
> 标签：android, mediastore

I'm trying to tell my app to make some images which are already downloaded appear in the gallery of my phone. the images are well download and displayed in my app, they have no extension, their names are only a md5.

here is how i'm trying to do so:

```
public static void makePhotoAppearOnGallery(Activity activity, String md5) {
        final String extStorageDirectory = Environment
                .getExternalStorageDirectory().toString();
        final String festivalDirectory_path = extStorageDirectory
                + Constants.IMAGES_STORAGE_PATH;
        File imageOutputFile = new File(festivalDirectory_path, "/");
        if (imageOutputFile.exists() == false) {
            imageOutputFile.mkdirs();
        }
        File imageFile = new File(imageOutputFile, md5);
        Bitmap bm = decodeFile(imageFile.getAbsoluteFile());
        OutputStream outStream = null;
        try {
            outStream = new FileOutputStream(imageFile);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        bm.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
        try {

            outStream.flush();
            outStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            MediaStore.Images.Media.insertImage(activity.getContentResolver(), festivalDirectory_path, festivalDirectory_path+"/"+md5, "myDownloadedPics");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        scanFile(imageFile,activity);

    }
     public static void scanFile(File downloadedFile, Context mContext){
         Uri contentUri = Uri.fromFile(downloadedFile);
         Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
         mediaScanIntent.setData(contentUri);
         mContext.sendBroadcast(mediaScanIntent);
     } 
```

the app crashes on this line:

```
MediaStore.Images.Media.insertImage(activity.getContentResolver(), festivalDirectory_path, festivalDirectory_path+"/"+md5, "myDownloadedPics"); 
```

with this message:

> java.io.FileNotFoundException: /mnt/sdcard/data/com.example.app/images: open failed: EISDIR (Is a directory)

Does anyone know from what it comes?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:34:34.000

我有同样的问题。事实证明，当存在具有相同文件名的文件夹时会发生此错误。例如，我有一个名为“log.txt”的文件夹。

# c++ - 将数组作为模板类型传递

> ID：10128159
> 
> 赞同：9
> 
> 时间：2012-04-12T16:54:36.920
> 
> 标签：c++, templates

我需要将数组作为模板类型传递。怎么可能达到。例如，我想要这样的东西。

```
Fifo<array, Q_SIZE> f; // This is a queue of arrays (to avoid false sharing) 
```

我应该用什么代替*数组*？*假设我需要一个int*数组。另请注意，我不想要`std::vector`或指向数组的指针。我想要整个基本数组，相当于说*int array[32]*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:10:05.507

试试这个：

```
Fifo<int[32], Q_SIZE> f; 
```

像这样：

```
#include <iostream>
template <class T, int N>
struct Fifo {
  T t;
};

int main () {
 const int Q_SIZE  = 32;
 Fifo<int[32],Q_SIZE> f;
 std::cout << sizeof f << "\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T17:14:32.273

如果你想在创建队列时传递*数组类型，你可以写*

```
template <typename Array>
struct Fifo;

template <typename T, int size>
struct Fifo<T[size]>
{

}; 
```

要不就

```
template <typename Array>
struct Fifo
{
}; 
```

并像使用它一样

```
int main()
{
    Fifo<int[10]> fa;

} 
```

然后，您应该明白，这`int[10]`与 完全不同`int[11]`，一旦创建， `Fifo<int[10]>`您就不能再在此处存储大小为 11 或 9 的数组了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-01T02:10:04.033

C++ 11 中的`std::end`函数有一个数组类型的重载，很好地证明了这一点。
这是它的可能实现：

```
template< class T, std::size_t N >
T* end(T(&array)[N]) {
    return array + N;
} 
```

如果您需要一个包装数组的对象，模板化工厂函数将有助于创建它：

```
template< class T, std::size_t N >
struct fifo {
    T(&array)[N];
};

template< class T, std::size_t N >
fifo<T,N> make_fifo(T(&array)[N]) {
    return Fifo<T,N>{ array };
}

int main() {
    int arr[] = { 1,2,3,4,5 };

    // Create object from array using template argument deduction
    auto fifo = make_fifo(arr);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T17:16:40.140

好吧，我找到了解决方案。我可以将数组包装在一个结构中，如下所示。

```
typedef struct
{
 int array[32];
} my_array; 
```

然后我可以按如下方式使用它。

```
Fifo<my_array, Q_SIZE> f; 
```

# jquery - 在rails 3中的表行上多次出现jquery对话框 - 我该怎么做？

> ID：10128160
> 
> 赞同：0
> 
> 时间：2012-04-12T16:54:37.763
> 
> 标签：jquery, ruby-on-rails-3.1, dialog

我要完成的任务：

我有一个 Rails 3 应用程序，它为一家电信公司处理工作订单。工单控制器的索引页面以每页最多 30 行的形式显示分页工单。

客户希望能够从此页面更新两个字段。它们是*Technician ETA*和*Work Order Status*。我编写了一些代码来使用 jquery 对话框弹出窗口来提供部分表单（每个字段一个）以进行更新。

到目前为止，我已经能够让弹出窗口为表单部分提供服务，但它们仅适用于第一行。页面上后续行的链接不起作用。我希望这是因为包含对部分调用的 div 必须为每一行（在这种情况下为每个工作订单）唯一命名。

目前我只是试图解决让每一行的对话框弹出迭代在前端工作的问题。这就是我目前的代码：

.js：

```
$(document).ready(function() {
$('div#status-chg-form').dialog({ autoOpen: false });
$('#statuslink').click(function(){ $('div#status-chg-form').dialog('open'); });
});

$(document).ready(function() {
$('div#eta-chg-form').dialog({ autoOpen: false });
$('#etalink').click(function(){ $('div#eta-chg-form').dialog('open'); });
}); 
```

渲染部分的 div（在我的索引视图中）：

```
<div id="status-chg-form" title="CHANGE WORK ORDER STATUS" style="display:none"><%= render :partial => 'statusform' %></div>
<div id="eta-chg-form" title="CHANGE TECHNICIAN ETA" style="display:none"><%= render :partial => 'etaform' %></div> 
```

和链接（在我的索引视图中）：

```
<a href="#" id="statuslink"><%= status_display %></a> 
```

（注意：status_display 变量已正确填充）

```
<% if work_order.soft_completion_datetime.blank? %>
    <a href="#" id="etalink"><%= "No ETA Entered" %></a>
<% else %>
    <a href="#" id="etalink"><%= work_order.soft_completion_datetime.strftime('%m/%d/%Y %I:%M %p') %></a>
<% end %> 
```

我想我可以使用工作订单行中的 id 作为每次出现对话框的唯一标识符，但我不是一个经验丰富的 jquery 编码器，所以我需要更大的头脑来指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:15:00.987

好的，所以我对这个问题有部分解决方案，但我仍然对 jquery 有一些困难。

为了唯一标识对话框 div 和相应的链接，我这样做了：

对于状态：

```
 <% statusidname = "statuslink-" + work_order.id.to_s %>
            <%= link_to (status_display, "#", :id => statusidname, :onclick => "statusdialog('#{work_order.id.to_s}')") %>    
            <% statusdivname = "status-chg-form-" + work_order.id.to_s %>
            <%= content_tag :div, :class => statusdivname, :style =>"display:none" do %>
               <%= render :partial => 'statusform' %>
            <% end %> 
```

对于预计到达时间：

```
 <% etaidname = "etalink-" + work_order.id.to_s %>    
       <% if work_order.soft_completion_datetime.blank? %>
         <%= link_to ("No ETA Entered", "#", :id => etaidname, :onclick => "etadialog('#{work_order.id.to_s}')") %>
       <% else %>
         <%= link_to (work_order.soft_completion_datetime.strftime('%m/%d/%Y %I:%M %p'), "#", :id => etaidname, :onclick => "etadialog('#{work_order.id.to_s}')") %>
       <% end %>
       <% etadivname = "eta-chg-form-" + work_order.id.to_s %>
       <%= content_tag :div, :class => etadivname, :style =>"display:none" do %>
          <%= render :partial => 'etaform' %>
       <% end %> 
```

总之，基本上这段代码创建了名为 statuslink-999 和 etalink-999 的链接和名为 status-chg-form-999 和 eta-chg-form-999 的 div，其中 999 是 work_order.id 从而唯一地命名每个链接和 div每一行。

这是我的.js。它目前不工作。我无法弄清楚我在这里到底做错了什么，但脚本没有收到 rowid。

```
$(function statusdialog(rowid) {
$('div#status-chg-form-'+rowid).dialog({ autoOpen: false });
$('#statuslink-'+rowid).click(function(){ $('div#status-chg-form-'+rowid).dialog('open'); });
});

$(function etadialog(rowid) {
$('div#eta-chg-form-'+rowid).dialog({ autoOpen: false });
$('#etalink-'+rowid).click(function(){ $('div#eta-chg-form-'+rowid).dialog('open'); });
}); 
```

# ios - Removal of TestFlight apps?

> ID：10128162
> 
> 赞同：5
> 
> 时间：2012-04-12T16:54:39.590
> 
> 标签：ios, testflight

Is there a way to remvoe TestFlight apps from users that have installed them? Also is there a way that TestFlight can bake into the app some sort of password that the users all have to log in with (in case of a lost phone, we don't want our developement apps exposed).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:05:21.170

如果保持不变，您的应用程序的配置最终将自动过期。即使没有使用 TestFlight 删除应用程序的本机能力，应用程序仍然存在过期日期。

那仍然会留下您的问题，即“输入密码提示”并将应用程序本身从设备中物理删除。

第一部分，应用程序检查身份验证可以通过实施具有更强大的 SDK 的解决方案来解决，该 SDK 恰好具有这种安全意识的方法。据我所知，基于 TestFLight 的特征网格，这超出了他们工具的能力。

第二部分，从设备中删除应用程序本身，将通过使用能够使用 MDM（移动设备管理）进行设备级控制的工具来完成。具体来说，您希望寻找可以选择性地控制单个应用程序的东西，而不必应用一揽子 MDM 策略。再次基于 TestFlight 的知识和基于他们的网页，这也不是 TestFlight 能够做到的。

有一些解决方案可以准确地为您提供所需的内容 - 简单的 beta 测试，增加了强制应用程序签入和重新验证的能力，以及完成后从设备中删除应用程序的能力测试。如果您点击您选择的搜索引擎，您可以在这里找到一些工具，这些工具可以为您的所有问题提供“是”的答案。该列表很短，因此很容易找到。:)

如果它对您有任何帮助，我与其中一家公司 AppBlade 有联系，并且很乐意回答有关此类事情的问题。我们位于[https://AppBlade.com](https://AppBlade.com)，欢迎您给我们打电话，甚至登录该工具，看看它是如何为您自己工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:03:42.150

不幸的是，您无法通过 TestFlight 删除已安装在设备上的应用程序，除非您在设备本身上执行此操作。至于密码，TestFlight 也不完全支持。但是，您可以通过代码在应用程序的所有 Beta 版本中设置密码锁定功能。抱歉，这可能不是您想听到的答案，但 TestFlight 仍处于早期阶段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:43:53.880

您无法从用户设备中删除应用程序，但 TestFlight 正在他们的“Area51”中测试一个选项，如果有可用的版本，则强制用户更新到新版本。

如果您不再希望测试人员访问您的应用程序，您可能可以添加一个仅显示一些信息屏幕的新版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-16T15:14:36.997

当您单击构建时，有一种方法可以使应用商店连接中的构建过期。

另一种方法是，如果您想摆脱它作为测试打开应用程序页面并单击停止测试。

# ruby-on-rails - Ruby 控制台/终端以最佳方式显示图像

> ID：10128165
> 
> 赞同：0
> 
> 时间：2012-04-12T16:54:49.607
> 
> 标签：ruby-on-rails, ruby, ascii

这只是出于好奇。

如果我有 jpeg 文件或 gif 或其他东西。是否可以在终端/rails 控制台上显示它（如果可能的话，以彩色显示）（你知道......就像那些 ASCII 8 位样式图像）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:09:15.323

您可以使用以下[要点](https://gist.github.com/612099#)可能是您正在寻找的。

![例子](../Images/3f5007ac1ab51d72b447359bf3b043b9.png)

# java - Unable to figure how to store "Save As" text in a string and use it

> ID：10128167
> 
> 赞同：0
> 
> 时间：2012-04-12T16:54:56.573
> 
> 标签：java, swing, awt, jfilechooser

![enter image description here](../Images/57514fb55277d5ce15422fe7a27761f7.png)

I am new to UI design in Java. I am trying to create a GUI to download a file off the Internet and save it on your hard drive. I have got the code working except for one thing which I want to add. I have added a `JFileChooser` which lets the user select the destination folder. But I am unable to figure out how to change the `filename` to the one which user enters in the `Save As` bar on the `JFileChooser` menu.

**Browse Button**

```
browseButton.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e)
{
    chooser = new JFileChooser();
    chooser.setCurrentDirectory(null);
    chooser.setDialogTitle("Select folder to save");
    chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
    chooser.setAcceptAllFileFilterUsed(true);

    //chooser.showDialog(downloadButton, "Save");
    if(chooser.showSaveDialog(downloadButton) == JFileChooser.APPROVE_OPTION)
    {
        System.out.println("The location to save is: " + chooser.getCurrentDirectory());
        DESTINATION_FOLDER = chooser.getCurrentDirectory().toString();
    }
} 
```

});

**Download Button**

```
URLConnection connection = downloadUrl.openConnection();

input = new BufferedInputStream(connection.getInputStream());
output = new FileOutputStream(DESTINATION_FOLDER + "/" + filename); 
```

Here `filename` should be the one which user enters. Pointers on how to get this done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:09:37.540

实际上，您不需要从`Save As`JFileChooser 的 Bar 中获取 FileName。这样做：

```
 browseButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e){
        chooser = new JFileChooser();
        chooser.setCurrentDirectory(null);
        chooser.setDialogTitle("Select folder to save");
        //Don't use the 'FileSelectionMode();'. Let it be Default.
        chooser.setAcceptAllFileFilterUsed(true);
   if(chooser.showSaveDialog(downloadButton) == JFileChooser.APPROVE_OPTION)
   {
    file = chooser.getSelectedFile();
    //file should be declared as a File.
     System.out.println("The location to save is: " + chooser.getCurrentDirectory();));
     System.out.println("The FileName is: " + file.getName()); 
   }
} 
```

下载按钮：

```
 URLConnection connection = downloadUrl.openConnection();
   input = new BufferedInputStream(connection.getInputStream());
   output = new FileOutputStream(file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:17:54.430

在没有看到更多代码的情况下，我建议的最好方法是在您正在工作的课程中创建一个全局字符串。

```
public class gui extends JFrame{
    public String filePath="";
    public static void main(String args[]){
        //button code
        browseButton.addActionListener(new ActionListener())
        saveAsButton.addActionListener(new ActionListener())
        URLConnection connection = downloadUrl.openConnection();

    }

public void actionPerformed(ActionEvent e)
{
    if (e.getActionCommand().equals("browseButton"){
        chooser = new JFileChooser();
        chooser.setCurrentDirectory(null);
        chooser.setDialogTitle("Select folder to save");
        chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
        chooser.setAcceptAllFileFilterUsed(true);

        //chooser.showDialog(downloadButton, "Save");
        if(chooser.showSaveDialog(downloadButton) == JFileChooser.APPROVE_OPTION)
        {
            System.out.println("The location to save is: "+chooser.getCurrentDirectory());
            filePath = chooser.getCurrentDirectory().toString();
        }
    else{
        //save as button selected
        input = new BufferedInputStream(connection.getInputStream());
        output = new FileOutputStream(filePath);
    }
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:52:02.870

添加这一行：

```
chooser.setDialogType(JFileChooser.SAVE_DIALOG); 
```

完整代码：

```
browseButton.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e)
{
    chooser = new JFileChooser();
    chooser.setCurrentDirectory(null);
    chooser.setDialogTitle("Select folder to save");
    chooser.setDialogType(JFileChooser.SAVE_DIALOG);
    chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
    chooser.setAcceptAllFileFilterUsed(true);

    //chooser.showDialog(downloadButton, "Save");
    if(chooser.showSaveDialog(downloadButton) == JFileChooser.APPROVE_OPTION)
    {
        System.out.println("The location to save is: " + chooser.getCurrentDirectory());
        DESTINATION_FOLDER = chooser.getCurrentDirectory().toString();
    }
} 
```

# javascript - iframe 内容不出现

> ID：10128169
> 
> 赞同：1
> 
> 时间：2012-04-12T16:55:00.307
> 
> 标签：javascript, jquery, html, iframe

我有这段代码，有时有效，有时无效：

```
 var urlThemes2="../usuarios/"+parent.parent.parent.Nb_Global_usuario+"/aplicaciones/"+parent.parent.parent.Nb_Global_aplicacion+"/appfiles/includes/themes/";
    alert("preview")
    $("#listaTemas2").attr("src","Nb_ListaTemas.php?urlThemes="+urlThemes2); 
```

在 Chrome 的检查器中显示定义的 iframe 的“src”，但不显示 html 内容。

有什么解决办法吗？

谢谢，

# git - 处理gitorious中的合并请求并从远程参考中提取

> ID：10128170
> 
> 赞同：0
> 
> 时间：2012-04-12T16:55:04.190
> 
> 标签：git, gitorious

我正在尝试使用gitorious的合并请求功能。我可以看到合并请求，但在**将要合并的 Commits**标题下我只是有一个错误：

```
An error has occured. Please try again later. 
```

![在此处输入图像描述](../Images/da3df1b34c3f43c589cf4ab83e39f71d.png)

任何想法如何追踪？同样在如何处理合并请求的帮助部分中，它说：

```
# Fetch the merge request into this branch
git pull \
  git://git.site.com/1-10-core/core.git \
  refs/merge-requests/1 
```

我试过了，但我得到了错误

```
fatal: Couldn't find remote ref refs/merge-requests/1 
```

这是`git config -l`返回的部分内容：

```
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
remote.origin.url=git@git.site.com:1-10-core/core.git
branch.master.remote=origin
branch.master.merge=refs/heads/master 
```

这就是我的`.git/config`

```
 repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = git@git.site.com:1-10-core/core.git
[branch "master"]
        remote = origin
        merge = refs/heads/master 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:12:46.580

这很可能是由源存储库中不存在的远程引用“refs/merge-requests/1”引起的。合并请求 #1 的 Gitorious 视图和您的 git pull 操作都指向这一点。

# python - 如何运行带有字符串格式的命令？

> ID：10128172
> 
> 赞同：0
> 
> 时间：2012-04-12T16:55:12.317
> 
> 标签：python, command, string-formatting

我正在使用 subprocess 模块在 python 中运行命令。但问题是我还想在命令中包含一个字符串（用于文件名）。

我想做的一个例子：

```
 from subprocess import call

  command = "cd/DirectoryName"

  call = [(command)] 
```

在这个特定示例中，我希望 DirectoryName 是由用户确定的变量。

我尝试过的无济于事：

```
 Desktop=raw_input()
  cmd="'cd %s'(Desktop/)"
  call([cmd]) 
```

这是我尝试在 python shell 中运行这些命令时遇到的错误。

```
 Chicken='Chicken'
    command = 'say %s' % (Chicken)
    print command
    say Chicken
    call([command])

    Traceback (most recent call last):
    File "/Applications/WingIDE.app/Contents/MacOS/src/debug/tserver/_sandbox.py", line 1,     in <module>
    # Used internally for debug sandbox under external interpreter
    File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
    File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
    File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/subprocess.py", line 1228, in _execute_child
    raise child_exception
    OSError: [Errno 2] No such file or directory 
```

刚试过这个，它使shell崩溃。

```
 Chicken="Chicken"
    print Chicken
    Chicken
    call[("say %s" % (Chicken)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:59:02.817

这不是字符串插值的工作方式。

```
cmd='cd %s' % (Desktop,) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:00:00.320

首先，

```
cmd="'cd %s'(Desktop/)" 
```

似乎它不会“打印”%s。

也许

```
cmd="'cd %s/'%(Desktop)" 
```

但是我仍然不知道这是否会进行插值，因为它在字符串中可以使用“调用”函数和 python 命令——那不会在命令行上调用它吗？

# css - CSS3 盒子阴影

> ID：10128175
> 
> 赞同：1
> 
> 时间：2012-04-12T16:55:19.960
> 
> 标签：css

我正在使用 CSS3 属性

```
box-shadow: 2px 2px 2px 2px #CCCCCC; 
```

它在右侧和底部产生了这种奇怪的效果。如何使阴影在所有方面都相等？

![在此处输入图像描述](../Images/d779c08b48a972058a02ee28d6c2021b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:57:40.020

采用

```
box-shadow: 0 0 2px 2px #CCCCCC; 
```

反而

看到这个[jsFiddle](http://jsfiddle.net/jackdent/nA7uw/1/)

前两个数值指定阴影的相对 x 和 y 偏移。因此，您的阴影被（2px，2px）或向右2px，向下2px的矢量移位/偏移。

第三个数值指定模糊，第四个指定阴影大小/散布，第五个指定颜色（十六进制）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T16:58:19.837

用这个：

```
box-shadow: 0px 0px 2px 2px #CCCCCC; /* Horizontal Length: px, Vertical Length: px, Blur Radius: px, Spread: px, Color */ 
```

你可以在这里测试 CSS3：http: [//css3generator.com/](http://css3generator.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T16:59:13.987

box-shadow 定义为：水平偏移 - 垂直偏移 - 阴影扩散 - 模糊大小 - 颜色

你可以这样做：`box-shadow: 0 0 2px 2px #ccc;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T16:59:02.477

您可以通过将前 2 个值设置为 0px 来做到这一点：

```
box-shadow: 0px 0px 2px 2px #CCCCCC; 
```

查看更多：[w3schools](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)

# java - 在 Java 中使用数组显示统计信息

> ID：10128177
> 
> 赞同：0
> 
> 时间：2012-04-12T16:55:21.180
> 
> 标签：java, arrays, statistics

我正在尝试使用 Java 中的数组从一个简单的文本文件中显示统计信息。我知道我应该做什么，但我真的不知道如何编码。那么任何人都可以向我展示如何执行此操作的示例代码。

因此，假设文本文件名为 gameranking.txt，其中包含以下信息（这是一个简单的 txt 文件，用作示例）：

```
Game Event, 1st place, second place, third place, fourth place
World of Warcraft, John, Michael, Bill, Chris
Call of Duty, Michael, Chris, John, Bill
League of Legends, John, Chris, Bill, Michael. 
```

我的目标是显示统计数据，例如有多少第一名、第二名……每个人在如下表中获胜

```
Placement     First place, second, third, fourth
John            2            0       1      0
Chris           0            2       0      1
etc... 
```

我的想法：
首先，我会阅读 gameranking.txt 并将其存储到“输入”。然后我可以使用while循环读取每一行并将每一行存储到一个名为“line”的字符串中，然后我将使用数组方法“split”提取每个字符串并将它们存储到单独的数组中。之后，我会计算每个人赢得的位置，并使用 printf 将它们显示在一个整洁的表格中。

我的第一个问题是我不知道如何为这些数据创建数组。我是否首先需要通读文件并查看每行和每列中有多少个字符串，然后相应地创建数组表？或者我可以在读取每个字符串时将它们存储在一个数组中吗？

我现在拥有的伪代码如下。

*   计算有多少行并将其存储在行中
*   计算有多少列并将其存储在列中
*   创建一个数组
*   `String [] [] gameranking = new String [row] [column]`
*   接下来读取文本文件并将信息存储到数组中

使用：

```
while (input.hasNextLine) {
    String line = input.nextLine();
    while (line.hasNext()) {
        Use line.split to pull out each string
        first string = event and store it into the array
        second string = first place
        third string =...... 
```

*   在代码中的某处，我需要计算位置....

有人可以告诉我我应该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:20:08.580

我不会编写完整的程序，但我会尝试解决每个问题并给你一个简单的建议：

读取初始文件，您可以使用 BufferedReader 获取每一行并将其存储在字符串中（或者如果您愿意，可以使用 LineNumberReader）

```
BufferedReader br = new BufferedReader(new FileReader(file));
String strLine;
while ((strLine = br.readLine()) != null)   {
......Do stuff....
} 
```

此时，在 while 循环中，您将遍历字符串（因为它是逗号分隔的，您可以使用它来分隔每个部分）。对于每个子字符串，您可以 a) 将其与第一个、第二个、第三个、第四个进行比较以获得位置。b) 如果不是其中任何一个，那么它可以是游戏名称或用户名

您可以通过位置或第 n 个子字符串来计算（即，如果这是第 5 个子字符串，它可能是第一个游戏名称。因为您有 4 个玩家，下一个游戏名称将是第 10 个子字符串，等等）。请注意，我忽略了“游戏事件”，因为这不是模式的一部分。您可以使用 split 来执行此操作或许多其他选项，而不是尝试解释我会给您一个指向我找到的教程的链接：http: [//pages.cs.wisc.edu/~hasti/cs302/examples /解析/parseString.html](http://pages.cs.wisc.edu/~hasti/cs302/examples/Parsing/parseString.html)

至于制表结果，基本上你可以为每个玩家获取一个 int 数组，用于跟踪他们的第 1、2、3、奖励等。

```
int[] Bob = new int[4]; //where 0 denotes # of 1st awards, etc.
int[] Jane = new int[4]; //where 0 denotes # of 1st awards, etc. 
```

显示表格是组织数据并在 GUI 中使用 JTable 的问题：http: [//docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

好吧...这是我写的，我相信有一种更清洁、更快捷的方法，但这应该给你一个想法：

```
String[] Contestants = {"Bob","Bill","Chris","John","Michael"};

int[][] contPlace=new int[Contestants.length][4];
String file = "test.txt";

public FileParsing() throws Exception {
    Arrays.fill(contPlace[0], 0);
    Arrays.fill(contPlace[1], 0);
    Arrays.fill(contPlace[2], 0);
    Arrays.fill(contPlace[3], 0);
    BufferedReader br = new BufferedReader(new FileReader(file));
    String strLine;
    while((strLine=br.readLine())!=null){
        String[] line = strLine.split(",");
        System.out.println(line[0]+"/"+line[1]+"/"+line[2]+"/"+line[3]+"/"+line[4]);
        if(line[0].equals("Game Event")){
            //line[1]==1st place;
            //line[2]==2nd place;
            //line[3]==3rd place;
        }else{//we know we are on a game line, so we can just pick the names
            for(int i=0;i<line.length;i++){
                for(int j=0;j<Contestants.length;j++){
                    if(line[i].trim().equals(Contestants[j])){
                        System.out.println("j="+j+"i="+i+Contestants[j]);
                        contPlace[j][i-1]++; //i-1 because 1st substring is the game name
                    }

                }
            }
        }
    }
    //Now how to get contestants out of the 2d array
    System.out.println("Placement  First Second Third Fourth");
    System.out.println(Contestants[0]+" "+contPlace[0][0]+" "+contPlace[0][1]+" "+contPlace[0][2]+" "+contPlace[0][3]);
    System.out.println(Contestants[1]+" "+contPlace[1][0]+" "+contPlace[1][1]+" "+contPlace[1][2]+" "+contPlace[1][3]);
    System.out.println(Contestants[2]+" "+contPlace[2][0]+" "+contPlace[2][1]+" "+contPlace[2][2]+" "+contPlace[2][3]);
    System.out.println(Contestants[3]+" "+contPlace[3][0]+" "+contPlace[3][1]+" "+contPlace[3][2]+" "+contPlace[3][3]);
    System.out.println(Contestants[4]+" "+contPlace[4][0]+" "+contPlace[4][1]+" "+contPlace[4][2]+" "+contPlace[4][3]);

} 
```

如果您需要填充参赛者数组或跟踪比赛，则必须插入适当的代码。另请注意，如果您想做除了显示它们之外的任何事情，使用这种二维数组方法可能不是最好的。您应该能够获取我的代码，添加一个 main，然后查看它运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:04:24.263

因为它是一个文本文件，所以使用 Scanner 类。它可以自定义，以便您可以逐行、逐字或自定义分隔符读取内容。

readfromfile 方法一次读取一行纯文本文件。

```
 public static void readfromfile(String fileName) {
  try {
   Scanner scanner = new Scanner(new File(fileName));
   scanner.useDelimiter(",");
   System.out.println(scanner.next()); //instead of printing, take each word and store them in string array
   scanner.close();
  } catch (FileNotFoundException e) {
   e.printStackTrace();
  }
 } 
```

这会让你开始。

# visual-studio-2010 - Visual Studio 2010 突然停止显示调试输出

> ID：10128179
> 
> 赞同：2
> 
> 时间：2012-04-12T16:55:33.290
> 
> 标签：visual-studio-2010, debugging

因此，我正在开发一个 Silverlight 应用程序，在一次构建和运行与下一次之间，我的调试输出消失了。在我有几十行 Debug.Writeline 文本之前，我现在只有模块加载和线程消息。

是的，我处于调试模式（与发布模式相比）。

是的，我的输出窗口显示“显示来自：调试的输出”。

是的，当我右键单击输出窗口时，会检查每个选项。

不，我的工具>选项>调试>常规>“将所有输出文本重定向到即时窗口”未选中。

我所能想到的（这是一个疯狂的猜测）是，出于某种原因，VS 调试器没有像应有的那样附加到 Silverlight 应用程序。

奇怪的是，这几天一直在发生，出乎意料。同样突然，我所有的调试信息又开始出现了。

这非常令人沮丧。

编辑：当然，在周末返回项目后，所有的调试消息都回来了。不知道是什么导致了这个问题，所以我相信它会再次发生。

现在的问题是：如果问题在不久的将来再次出现，我是否应该保留这个问题？未授予的赏金会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:51:47.733

我发现了同样的问题，只是通过设置**选项**→**调试**→**输出窗口**→**线程退出消息**到`true`输出窗口开始发送正确的消息！？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-02T23:10:20.943

我有完全相同的问题。出乎意料的是，debug.print 停止工作。就我而言，它曾经进入即时窗口。那里空无一物。输出窗口中没有任何内容。我遵循了几个建议但无济于事，直到我在[http://www.experts-exchange.com/questions/26894732/Debug-Print-and-Debug-Write-no-longer-work-in-Visual-Studio找到了这个-2010.html](http://www.experts-exchange.com/questions/26894732/Debug-Print-and-Debug-Write-no-longer-work-in-Visual-Studio-2010.html)

**“输出/调试”窗格中有一个上下文菜单。“程序输出”菜单项被意外清除。**

检查了该项目，它再次开始工作（即使我的输出是即时窗口）。终于解脱了...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T13:47:11.407

确保定义了 DEBUG 条件编译符号。[Debug 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.aspx)建议您“在使用命令行编译代码时将 /d:DEBUG 选项添加到编译器命令行，或将 #define DEBUG 添加到文件顶部” 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T19:08:37.950

检查立即窗口。检查选项。有一个通用设置说“将调试输出发送到即时窗口”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T13:38:31.423

您是否创建或修改了应用程序配置？如果是：VS 最初创建的配置确实包含启用调试所需的接线配置。不确定 Silverlight 中是否有对应的内容，但在 WPF 环境中，只需替换它们`app.config`就会产生与您体验相同的效果。

# ruby-on-rails-3 - Windows上的Rails命令在执行前有延迟

> ID：10128181
> 
> 赞同：0
> 
> 时间：2012-04-12T16:55:38.313
> 
> 标签：ruby-on-rails-3, windows-7, cmd

我在 Windows 下使用 Ruby on Rails，安装了[railsinstaller](http://railsinstaller.org/)。一切正常，除了任何命令，例如`rails console`或`bundle exec rake db:migrate`在执行前平均需要 8 秒。（`rails s`并且`rails -v`是例外，大约需要 1 到 2 秒才能启动，这仍然异常高）。我不是在谈论整个命令的时间，只是在我按下回车键和看到第一个输出之间的时间。

在此期间，我的处理器的一个核心以 100% 的速度工作，并且硬盘上没有负载。我真的觉得我在等待某种超时到期，因为我不明白为什么`rails console`要占用那么多处理能力（我有一个 Core 2 Duo 处理器）。

你有遇到过这样的问题吗？会是什么？我该如何调查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:06:27.207

它正在启动您的 Rails 环境，而不仅仅是加载可执行文件。它不是特定于 Windows 的。在我的 Core2 Duo iMac 上大约需要 10 秒。我在 Linux 机器上看到过类似的延迟。这是一篇文章，它提供了一些可能会有所帮助的提示。

[rails-3-osx-加速控制台加载时间](https://stackoverflow.com/questions/4736546/rails-3-osx-speed-up-console-loading-time)

# javascript - .ajaxStop 中的代码不断重复

> ID：10128182
> 
> 赞同：0
> 
> 时间：2012-04-12T16:55:39.310
> 
> 标签：javascript, ajax, jquery

我想要的是仅在加载特定 div 的所有内容并且完成与该 div 相关的所有 ajax 请求时才运行一个函数。所以我有这段代码：

```
$('#calendar-cont').ajaxStop(function() {
       getEventsData();// a function that contains some ajax requests

}); 
```

问题是`getEventsData()`包含其他一些 ajax 请求，并且由于我不明白的原因（但我认为与 ajax 请求有关`getEventsData()`），这个函数一遍又一遍地运行。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:51:19.027

`ajaxStop`不特定于某个元素，所以`ajaxStop`会在里面的ajax请求`getEventsData()`完成后调用，所以你有一个无限循环。

# java - 使用 JMock 为简单的 spring JDBC DAO 编写单元测试

> ID：10128185
> 
> 赞同：1
> 
> 时间：2012-04-12T16:55:48.807
> 
> 标签：java, spring-jdbc, jmock

我正在为 spring jdbc dao 编写单元测试。测试的方法是：

```
public long getALong() {
return simpleJdbcTemplate.queryForObject("sql query here", new RowMapper<Long>() {
  public Long mapRow(ResultSet resultSet, int i) throws SQLException {
    return resultSet.getLong("a_long");
  }
}); 
```

}

这是我在测试中的内容：

```
public void testGetALong() throws Exception {
    final Long result = 1000L;
    context.checking(new Expectations() {{
      oneOf(simpleJdbcTemplate).queryForObject("sql_query", new RowMapper<Long>() {
        public Long mapRow(ResultSet resultSet, int i) throws SQLException {
          return resultSet.getLong("a_long");
        }
      });
      will(returnValue(result));
    }});
    Long seq = dao.getALong();
    context.assertIsSatisfied();
    assertEquals(seq, result);
  } 
```

自然，测试不起作用（否则，我不会在这里问这个问题）。问题是测试中的rowmapper与DAO中的rowmapper不同。所以没有达到预期。

我试图`with`绕过 sql 查询和`with(any(RowMapper.class))`rowmapper。它也不起作用，抱怨“并非所有参数都给出了明确的匹配器：要么所有参数都必须由匹配器指定，要么所有参数都必须由值指定，你不能混合匹配器和值”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:03:42.720

也为查询字符串提供匹配器，例如

```
 oneOf(simpleJdbcTemplate).queryForObject(
      with( equal("sql_query") ),
      with( any(RowMapper.class) )
  ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:53:04.380

我想你可能在这里遗漏了几点。您的第一次尝试在模拟中重现了目标代码的行为。你真正想测试什么？

对于这种测试，我更喜欢编写一个针对真实数据库的集中测试。多年前我尝试模拟出 JDBC 并后悔了。在这种代码中通常失败的是与数据库的关系，而不是 java 代码本身。

这实际上是一个查询（它不会改变对象外部世界的状态），所以我倾向于使用`allowing()`子句而不是`oneOf()`. 这是相同的底层机制，但更好地表达了意图。

最后，与其`context.assertIsSatisfied()`直接调用，不如考虑使用

```
@RunWith(JMock.class) 
```

在测试的顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:53:59.640

我通过在最后添加解决了这个问题`with(any(Object.class))`。

```
oneOf(jdbcTemplate).queryForObject(with(equal("sql_query")), with(any(RowMapper.class)), with(any(Object.class))); 
```

我认为 jmock 无法找到正确的调用方法，因为 queryForObject 方法过载太多了。

# python - 选择最小化投资组合方差的权重

> ID：10128187
> 
> 赞同：0
> 
> 时间：2012-04-12T16:55:51.963
> 
> 标签：python, numpy

我正在寻找一种方法来选择最小化投资组合方差的权重。

例如：

我有 3 项资产；它们的返回值在下面的数组中给出：

```
import numpy as np
x = np.array([[0.2,-0.1,0.5,-0.2],[0, -0.9, 0.8, 0.2],[0.4,0.5,-0.3,-.01]]) 
```

只要它们的权重之和加到 1，我就可以按我的意愿对它们进行加权。我正在寻找能够最小化投资组合方差的权重。

以下是随机选择权重的两个示例：

```
weight_1 = [0.3,0.3,0.4]

weighted_x_1 = [ele_x*ele_w for ele_x,ele_w in zip (x,weight_1)]

var_1 = np.var(sum(weighted_x_1))

weight_2 = [-0.2,0.4,0.8]

weighted_x_2 = [ele_x*ele_w for ele_x,ele_w in zip (x,weight_2)]

var_2 = np.var(sum(weighted_x_2)) 
```

输出：

```
>>> var_1
0.02351675000000001
>>> var_2
0.012071999999999999 
```

第二种方式更好。

是否有可以为我执行此操作的 Python（或 Python 库）方法？如果没有任何关于我应该使用什么方法来执行上述操作的建议，欢迎提出。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:00:58.777

请参阅此问题的已接受答案：[Finance Lib with portfolio optimization method in python](https://stackoverflow.com/questions/4119054/finance-lib-with-portfolio-optimization-method-in-python)

相关位在这里：

> 这是我找到的一篇文章的引述。
> 
> 一些研究表明，“平均方差投资组合优化”可以产生良好的结果。我在留言中讨论过这个
> 
> 为了实现这种方法，需要的输入是收益的协方差矩阵，它需要历史股票价格，可以使用“Python 报价采集器” [http://www.openvest.org/Databases/ovpyq](http://www.openvest.org/Databases/ovpyq)获得。
> 
> 对于预期回报——嗯。我引用的一篇论文发现，假设所有股票的预期回报相等，可以得出合理的结果。
> 
> 然后需要一个“二次规划”求解器，它似乎由 CVXOPT Python 包处理。
> 
> 如果有人在 Python 中实现该方法，我会很高兴听到它。
> 
> R中有一个“回测”包（可从Python调用的开源统计包）[http://cran.r-project.org/web/packages/backtest/index.html](http://cran.r-project.org/web/packages/backtest/index.html) “用于探索基于投资组合的金融工具假设（股票、债券、掉期、期权等）。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-08T19:07:02.110

我的完整解决方案可以[在 PDF](https://github.com/RoyiAvital/StackExchangeCodes/blob/master/StackOverflow/Q44984132/Q44984132.pdf)中查看。

诀窍是将向量`x_i`作为矩阵的列`X`。
然后写问题变成了一个凸问题，解决方案限制在单位单纯形上。

我使用[Projected Sub Gradient Method](https://en.wikipedia.org/wiki/Subgradient_method)解决了它。
我计算了目标函数的 Gradient 并创建了[Unit Simplex](https://math.stackexchange.com/a/2338491/33)的投影。

现在只需要迭代它们。
我使用[CVX](http://cvxr.com/)验证了我的解决方案。

```
% StackOverflow 44984132
% How to calculate weight to minimize variance?
% Remarks:
%   1\.  sa
% TODO:
%   1\.  ds
% Release Notes
% - 1.0.000     08/07/2017
%   *   First release.

%% General Parameters

run('InitScript.m');

figureIdx           = 0; %<! Continue from Question 1
figureCounterSpec   = '%04d';

generateFigures = OFF;

%% Simulation Parameters

dimOrder    = 3;
numSamples = 4;

mX = randi([1, 10], [dimOrder, numSamples]);
vE = ones([dimOrder, 1]);

%% Solve Using CVX

cvx_begin('quiet')
    cvx_precision('best');
    variable vW(numSamples)
    minimize( (0.5 * sum_square_abs( mX * vW - (1 / numSamples) * (vE.' * mX * vW) * vE )) )
    subject to
        sum(vW) == 1;
        vW >= 0;
cvx_end

disp([' ']);
disp(['CVX Solution -                       [ ', num2str(vW.'), ' ]']);

%% Solve Using Projected Sub Gradient

numIterations   = 20000;
stepSize        = 0.001;
simplexRadius   = 1; %<! Unit Simplex Radius
stopThr         = 1e-6;

hKernelFun  = @(vW) ((mX * vW) - ((1 / numSamples) * ((vE.' * mX * vW) * vE)));
hObjFun     = @(vW) 0.5 * sum(hKernelFun(vW) .^ 2);
hGradFun    = @(vW) (mX.' * hKernelFun(vW)) - ((1 / numSamples) * vE.' * (hKernelFun(vW)) * mX.' * vE);

vW = rand([numSamples, 1]);
vW = vW(:) / sum(vW);

for ii = 1:numIterations
    vGradW = hGradFun(vW);
    vW = vW - (stepSize * vGradW);

    % Projecting onto the Unit Simplex
    % sum(vW) == 1, vW >= 0.
    vW = ProjectSimplex(vW, simplexRadius, stopThr);
end

disp([' ']);
disp(['Projected Sub Gradient Solution -    [ ', num2str(vW.'), ' ]']);

%% Restore Defaults

% set(0, 'DefaultFigureWindowStyle', 'normal');
% set(0, 'DefaultAxesLooseInset', defaultLoosInset); 
```

[您可以在StackOverflow Q44984132 存储库](https://github.com/RoyiAvital/StackExchangeCodes/tree/master/StackOverflow/Q44984132)中查看完整代码（也提供 PDF）。

该解决方案取自[StackOverflow Q44984132](https://stackoverflow.com/questions/44984132/how-to-calculate-weight-to-minimize-variance)。

# python - 在 Django 中，是从 self 获取对象列表并使用相关名称还是从对象本身获取对象列表并使用过滤器更好？

> ID：10128191
> 
> 赞同：0
> 
> 时间：2012-04-12T16:56:09.887
> 
> 标签：python, django, django-models, django-queryset

标题可能令人困惑，但我不知道如何解释它。这是一个例子。

做这样的事情会更好吗

```
class UserType( models.Model ) :
    def user_count( self ) :
        return self.userprofile_set.count() 
```

还是这样？

```
class UserType( models.Model ) :
    def user_count( self ) :
        # Does "user_types = self" work? I'm not sure.
        return UserProfile.filter( user_types = self.pk ).count() 
```

在哪里

```
class UserProfile( models.Model ) :
    user_types = models.ManyToManyField( UserType ) 
```

`UserType.user_count()`只返回`UserProfile`拥有特定`UserType`.

对不起，如果这是一个愚蠢的，微不足道的问题，但我很好奇。也许一些 Django 专家可以深入了解实际的 SQL 性能或其他东西:-)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:07:59.863

他们是一样的。选择你喜欢的任何东西。

在我看来，第一个看起来更干净。第二个似乎有点不正确，因为 user_types 不是单个 pk 值。

顺便说一句，建议始终指定一个[related_name](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)属性。

例如，如果它是：

```
user_types = models.ManyToManyField(UserType, related_name='profiles') 
```

进而：

```
return self.profiles.count() 
```

看起来更干净了。

但是两条语句生成的sql是一样的，我们只能说first是second的快捷方式。所以这与 sql 性能无关

# sql - 在动态 SQL UNION 中包含 sys.databases 名称作为列

> ID：10128192
> 
> 赞同：0
> 
> 时间：2012-04-12T16:56:15.037
> 
> 标签：sql, database, dynamic, union

我已经成功编写了代码来动态联合多个数据库中的简单选择语句的结果。我想将数据库名称本身作为一个字段包含在内，以便我可以识别每条记录。修改下面的代码以实现这一目标的最佳方法是什么？

我目前的结果看起来像

字段 2、字段 3、字段 4 b、c、d 2、3、4

我不知道包含 (b,c,d) 的行来自哪个数据库。

我想确保我看到 field1, field2, field3, field4 First_DatabaseName, b,c,d Second_DatabaseName,2,3,4

在上面，我可以看到包含 (b,c,d) 的行来自 First_Database

```
DECLARE @sql varchar(max)

SELECT @sql = ISNULL(@sql + 'union all ',' ') + ' SELECT * FROM ' + name + '.dbo.CombinedProvider '
FROM   sys.databases
WHERE  name in ('First_DatabaseName', 'Second_DatabaseName')

EXEC (@sql) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:05:16.147

只需将名称添加到您正在使用的子查询中：

```
SELECT @sql = COALESCE(@sql + 'union all ',' ') + ' SELECT '''+name+''' as dbname, c.* FROM ' + name + '.dbo.CombinedProvider c'
FROM   sys.databases
WHERE  name in ('First_DatabaseName', 'Second_DatabaseName') 
```

顺便说一句，您正在使用不受支持的技术来进行聚合字符串连接。您可能想了解“for xml path('')”作为替代技术。查看[http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)了解更多关于此主题的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:45:14.307

在每列后使用“AS”并在列中包含源数据库名称。

```
DECLARE @sql varchar(max)

SELECT @sql = ISNULL(@sql + 'union all ',' ') + ' SELECT ColName as [First_DatabaseName_ColName], ColName2 as [Second_DatabaseName_ColName2], FROM ' + name + '.dbo.CombinedProvider '
FROM   sys.databases
WHERE  name in ('First_DatabaseName', 'Second_DatabaseName')

EXEC (@sql) 
```

# axapta - 一个接一个地运行批处理作业

> ID：10128193
> 
> 赞同：1
> 
> 时间：2012-04-12T16:56:15.313
> 
> 标签：axapta, x++

我一个接一个地向批处理提交作业。

我如何控制第二个批处理作业仅在第一个批处理作业完成时运行。

现在这两个工作同时执行，我不想发生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:31:32.373

有两种选择。您可以通过代码或仅通过手动设置来完成此操作。手动方法相当简单，只需转到（基本>查询>批处理作业），创建一个新的批处理作业并保存。然后单击“查看任务”并创建一个新任务，这将是您的第一个批处理任务。选择您的班级、**描述**、批次组等，然后保存。点击“参数”设置参数。

之后，您可以设置您的依赖任务。确保你的任务都有描述。添加您的第二批任务并保存。然后在左下角，单击要设置条件的任务，然后在此处添加一行并设置条件，以便一个任务在第二个任务完成之前不会执行。

通过 X++ 代码，您将创建一个[BatchHeader](http://msdn.microsoft.com/en-us/library/cc576259%28v=ax.50%29.aspx)，您可以在其中设置与我们刚刚手动执行的基本相同的操作。您使用 .addDependency 使一项任务依赖于另一项任务的完成。 [本演练](http://msdn.microsoft.com/en-us/library/cc636647.aspx)将帮助您开始创建批处理标头的工作，您只需尝试使依赖项工作即可。

# java - 应用程序警报导致奇怪的错误，直到我按下后退按钮

> ID：10128194
> 
> 赞同：0
> 
> 时间：2012-04-12T16:56:16.233
> 
> 标签：java, android, alarm, android-alarms, alarms

我的应用程序中有一个警报，每 10 分钟通知我一次。它工作正常，但是每次警报通知我时，我的应用程序名称都会在屏幕中间显示为一个框，并且在按下返回按钮之前我无法按下任何东西。真的很奇怪！

**这是我的代码：**

```
 // Alert Code
    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("Confirmation");
    alertDialog.setMessage("Are you sure you want to send this report?");
    run(gotDataS);

    // Timer Code
    pendingIntent = PendingIntent.getService(CreateNewForm_3.this, 0,
            new Intent(NewForm_3.this, MyAlarmService.class), 0);
    Send.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            alertDialog.setButton("OK",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                                        int which) {

                        Toast.makeText(NewForm_3.this, "Sent", 0)
                                .show();

                        long firstTime = SystemClock.elapsedRealtime();
                        am = (AlarmManager) getSystemService(ALARM_SERVICE);
                        am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                               firstTime + 10 * 1000, 30 * 1000, pendingIntent);
                        // firstTime Will be the current_time + ( 10 * 60 * 1000)  =)
                        // 10* 1000 will be (10 * 60 * 1000)
                        new Handler().postDelayed(new Runnable() {
                            public void run() {
                                bCancel.performClick();
                            }
                        }, (30 * 1000));
                        // ( 30 * 1000) will be firstTime + ( 2- duration)

                        Intent toRecentCases = new Intent(CreateNewForm_3.this,
                                LMPActivity.class);
                        startActivity(toRecentCases);
                    }
                });

            alertDialog.setButton2("No",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                            int which) {
                        // Here you can add functions
                    }
                });

            alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog.show();
        }

    });

    bCancel.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            am.cancel(pendingIntent);
        }
    });

    //For Notification -3-
    final AlertDialog alertDialog3 = new AlertDialog.Builder(this).create();
    alertDialog3.setTitle("Confirmation");
    alertDialog3.setMessage("Are you sure you want to quite?");

    // Press cancel button it will move user to actvity p
    Cancelb.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            alertDialog3.setButton("OK",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                            int which) {

                        Intent toRecentCases = new Intent(NewForm_3.this,
                                                          LMPActivity.class);
                        startActivity(toRecentCases);
                    }
                });

            alertDialog3.setButton2("No",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // Doing nothing!
                        }
                    });

            alertDialog3.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog3.show();
        }
    });

} 
```

**这是显示对话框活动**

```
public class ShowingDialog extends Activity {

    boolean b;
    String CancelMsg;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        //For Notification -1-
        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Confirmation");
        alertDialog.setMessage("Do you really want it?");

        // For Notification -2-
        final AlertDialog alertDialog2 = new AlertDialog.Builder(this).create();
        alertDialog2.setTitle("Confirmation");
        alertDialog2.setMessage("Are you sure you want it?");

        alertDialog.setButton("yes", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int which) {
               Intent intent= new Intent(ShowingDialog.this,MyPage.class);
               startActivity(intent);
           ;
           }
        });

        alertDialog.setButton2("no",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,
                        int which) {

                    alertDialog2.setButton("yes", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            // Here you can add functions
                            // Sending a Message to server that the plaintiff found the case
                            // For Sending SMS with cancel Request
                            // Getting Case_ID + putting it inside CancelMsg
                               CancelMsg = "Case_ID cancel";
                            if (!b) {
                                try {
                                    sendSMS("5556", CancelMsg);
                                    Toast.makeText(ShowingDialog.this, "Sent", Toast.LENGTH_LONG)
                                            .show();
                                } catch (Exception e) {
                                    // TODO Auto-generated catch block
                                    Toast.makeText(ShowingDialog.this, e.getMessage(),
                                            Toast.LENGTH_LONG).show();
                                }
                            }
                        }
                    });

                    alertDialog2.setButton2("no", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            // Here you can add functions
                            // Do nothing
                        }
                    });

                    alertDialog2.setIcon(android.R.drawable.ic_dialog_alert);
                    alertDialog2.show();
                }
            });

            alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog.show();
        }

        public void sendSMS(String number, String msg) throws Exception {
            if (!b) {
                SmsManager smsManager = SmsManager.getDefault();
                smsManager.sendTextMessage(number, null, msg, null, null);
            }
            b = true;
        }
    } 
```

**在清单中：**

```
<activity
    android:name=".ShowingDialog"
    android:theme="@android:style/Theme.Dialog" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:08:33.170

看起来你并没有超载 back 语句，所以当你点击 back 按钮时，你正在返回你的 Back Stack。Android 文档对此有更多信息：

*[任务和回栈](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)*

# qt - 鼠标交互的设计模式

> ID：10128200
> 
> 赞同：3
> 
> 时间：2012-04-12T16:56:38.983
> 
> 标签：qt, design-patterns

我需要一些关于什么是一般鼠标交互的“理想”设计模式的意见。

这里是简化的问题。我有一个小型 3d 程序（QT 和 openGL），我使用鼠标进行交互。每个交互通常不仅仅是一个函数调用，它主要由多达 3 个函数调用（启动、执行、完成）执行。例如，相机旋转：这里的初始函数调用将传递当前的第一个鼠标位置，而执行函数调用将更新相机等。

然而，对于只有几个交互，硬编码这些（在 MousePressEvent、MouseReleaseEvent、MouseMoveEvent 或 MouseWheelEvent 等）并不是什么大问题，但如果我考虑一个更高级的程序（例如 20 个或更多交互），那么需要一个适当的设计。

因此，您将如何在 QT 中设计这样的交互。

我希望我的问题足够清楚，否则不要抱怨:-)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:02:31.790

我建议使用多态性和工厂方法模式。这是一个例子：

在我的 Qt 程序中，我有带有 mousePressEvent、mouseMoveEvent 和 mouseReleaseEvent 的 QGraphicsScenes 和 QGraphicsItems，它们看起来像这样：

```
void CustomItem::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
  // call factory method, which returns a subclass depending on where click occurred
  dragHandler = DragHandler::createDragHandler(event /* and other relevant stuff */);
}

void CustomItem::mouseMoveEvent(QGraphicsSceneMouseEvent *event)
{
  dragHandler->onMouseMove(event);
}

void CustomItem::mouseReleaseEvent(QGraphicsSceneMouseEvent *event)
{
  dragHandler->onMouseRelease(event);
  delete dragHandler;
} 
```

在这种特殊情况下的想法是，根据我在 CustomItem 上单击的位置，鼠标按下、移动和释放将具有不同的功能。例如，如果我点击项目的边缘，拖动会调整它的大小，但如果我点击项目的中间，拖动会移动它。DragHandler::onMouseMove 和 DragHandler::onMouseRelease 是由子类重新实现的虚函数，以根据鼠标按下的位置提供我想要的特定功能。不需要 DragHandler::onMousePress 因为那基本上是构造函数。

这当然是一个相当具体的示例，可能并不完全符合您的要求，但它让您了解如何使用多态性来清理鼠标处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:25:05.573

我发现 Apple 的[UIGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)设计非常好且可扩展。

这个想法是解耦手势（或交互）的识别和将被触发的动作。

您需要实现一个基本或抽象的 GestureRecognizer 类，该类能够基于事件 MousePressEvent、MouseReleaseEvent、MouseMoveEvent 或 MouseWheelEvent 等识别特定交互或手势。 GestureRecongnizers 具有定期报告更改的目标。

例如，您非常基本的课程就像：（对不起，我可怜的半 C++ 伪代码......最近我不怎么用它）

```
class Recognizer {
int state; // ex: 0:possible, 1:began, 2:changed, 3:ended/recognized 4:cancelled
protected:
void setTarget(void &theTarget); // or even better a touple, target/method. In this case target is assumed to have a method gestureHandle(Recognizer *r);
virtual void mouserPress() = 0;
virtual void mouserRelease() = 0;
virtual void mouserMove() = 0;
virtual void mouserWheel() = 0;
...
} 
```

如果您想检测鼠标滑动

```
class SwipeRecognizer : Recognizer {
int direction; // ex: 0:left2right 1:bottom2top 2:...
private:
void mouserPress() {
    state = 0; // possible. You don't know yet is the mouse is going to swipe, simple click, long press, etc.
    // save some values so you can calculate the direction of the swipe later 
    target.gestureHandle(this);
};
void mouserMove() {
    if (state == 0) {
        state = 1; // it was possible now you know the swipe began!
        direction = ... // calculate the swipe direction here
    } else if (state == 1 || state == 2) {// state is began or changed
        state = 2; // changed ... which means is still mouse dragging
        // probably you want to make more checks here like you are still swiping in the same direction you started, maybe velocity thresholds, if any of your conditions are not met you should cancel the gesture recognizer by setting its state to 4
    }
    target.gestureHandler(this);
};
void mouserRelease() {
    if (state == 2) { // is swipping
        state = 3; // swipe ended
    } else {
        state = 4; // it was not swiping so simple cancel the tracking
    }
    target.gestureHandler(this);
};
void mouserWheel() {
    // if this method is called then this is definitely not a swipe right?
    state = 4; // cancelled
    target.gestureHandler(this);
} 
```

只需确保在事件发生时调用上述方法，并且它们应该在需要时调用目标。

这就是目标对我的看法：

```
class Target {
...
void gestureHandler(Recognizer *r) {
    if (r->state == 2) {
        // Is swipping: move the opengl camera using some parameter your recognizer class brings
    } else if (r->state == 3) {
        // ended: stop moving the opengl camera
    } else if (r->state == 4) {
        // Cancelled, maybe restore camera to original position?
    }
} 
```

UIGestureRecognizer 的实现非常好，将允许为同一个识别器注册多个目标/方法，并将多个识别器注册到同一个视图。UIGestureRecognizers 有一个委托对象，用于获取有关其他手势识别器的信息，例如，是否可以同时检测到两个手势，或者一旦检测到另一个手势就必须失败，等等。

某些手势识别器将需要比其他手势识别器更多的覆盖，但最大的优点是它们的输出是相同的：通知当前状态（和其他信息）的处理程序方法。

我认为值得一看

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:25:42.600

Qt 让这一切变得非常简单。

而不是你过去写的所有`switch mouse_mode:`东西，只需让每个鼠标事件处理函数发出一个信号，即。mouseDown/mouseUp/mousePosition 并使用信号/插槽将它们路由到适当的模型函数。

然后，您可以通过将不同的 SLOTS 连接/断开 Mouse...Event() 中发送的信号来适应鼠标的不同用途（选择、旋转、编辑等）

# svn - Subversion由于“先前的操作尚未完成”而卡住？

> ID：10128201
> 
> 赞同：237
> 
> 时间：2012-04-12T16:56:42.977
> 
> 标签：svn, tortoisesvn

如果我尝试更新我的 subversion 存储库，它说我必须运行清理。如果我运行清理，它说文件丢失。（我从我的家用电脑上删除了今天早上未能提交的文件的 MASSIVE 目录，但后来我从工作中提交了相同的文件集，现在我的家庭仓库已经破产了）。所以，清理说：

Cleanup failed to process blablabla Can't set file blablabla read-write: 系统找不到指定的文件。

如果我更新它说：

> 命令：更新错误：之前的操作还没有完成；如果中断，请运行“清理”错误：请执行“清理”命令。完全的！：

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2014-03-28T15:54:58.190

通常不需要新的结帐或复制。

[在此（链接](http://www.anujvarma.com/svn-cleanup-failedprevious-operation-has-not-finished-run-cleanup-if-it-was-interrupted/)）的帮助下，我刚刚解决了与“先前操作尚未完成”错误有关的类似问题

似乎 svn 在处理命令/操作时有时会卡住。所有这些操作都存储在 .svn 文件夹中的数据库文件 wc.db 中。

通过将[SQLite](http://www.sqlite.org/download.html)下载到我的结帐目录并运行

```
sqlite3.exe .svn/wc.db "select * from work_queue" 
```

您可以获得所有待处理操作的列表。这些操作是错误所指的“未完成”的操作。

通过运行

```
sqlite3.exe .svn/wc.db "delete from work_queue" 
```

所有旧操作都从工作队列中删除，错误消失。不需要新的结帐或任何东西

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2013-10-21T09:18:55.480

运行控制台`svn cleanup`为我解决了同样的问题。

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2012-04-12T18:28:08.263

我也遇到过类似的情况。您是否尝试过从工作区的根目录运行清理？我知道有时从子目录（问题所在）进行清理不起作用，而从工作区的根目录进行清理则可以。

如果仍然失败，因为您在某处删除了子目录。尝试从子目录中删除更高的 1 级（假设不是根目录），然后重新尝试更新和清理。

如果清理尝试在任何级别都没有成功，那么答案很遗憾是签出一个新的工作副本。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-09-10T17:34:44.930

我只是有一个类似的问题。运行 Process Explorer 显示另一个程序 (Notepad++) 有一个 SVN 试图删除的文件夹的文件句柄。当我关闭记事本++时，“清理”能够成功运行。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-12-21T09:53:34.357

我在这里尝试了投票最多的答案和其他一些无济于事的答案。我的`WORK_QUEUE`桌子是空的，我无法尝试在更高的文件夹中进行清理。*以下是*有效的（这是通过 Tortoise SVN）；

*   右键单击文件夹
*   转到 TortoiseSVN -> 清理...
*   确保选项`Break Locks`被勾选，然后单击确定

清理操作现在成功完成，我可以继续。无需下载 sqlite3 或其他复杂的解决方案。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2014-08-25T11:59:36.810

添加一个已经在 SVN 中的 jar 后，我遇到了这个问题，我添加了同名的新版本。

在 Eclipse 我试过这个

1.  右键单击文件夹 > 团队 > 刷新/清理。
2.  清理、构建和刷新我的应用程序。
3.  重新启动 Eclipse。

使用上述步骤，我可以同步。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-01-08T16:55:35.297

在文件打开时尝试运行清理给我带来了问题。一旦我关闭了我的应用程序（Visual Studio），我就运行清理并且它成功了

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-07-17T08:53:26.133

我使用乌龟SVN。清理失败时，检查清理选项

确保勾选了**Break Locks**选项。

清理步骤

*   探索文件夹中的鼠标左键
*   选择“乌龟 SVN”->“清理...”菜单
*   检查“**打破锁定**”并按“确定”

它已经回答了，但有时图片有帮助

[![在此处输入图像描述](../Images/d518d903c2ee774d729573bb844c10d9.png)](https://i.stack.imgur.com/BiUhY.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-05-19T14:36:12.240

我遇到了同样的问题，在我的情况下，我在我的意思的应用程序中使用了 svn tortoise。在 root 模式下使用 windows 的 cmd shell 我应用了 svn cleanup 然后 svn update.... 然后你可以回到应用模式 a 并且它会完美地工作！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-07-04T12:28:24.907

我也遇到了我尝试过的同样问题：

1.尝试杀死与svn相关的进程，即TSVNCache.exe和TortoiseProc 2.恢复未版本化的文件并删除我在svn中的相同文件。3.cleanup 使用命令提示符“svn cleanup”

最后当重新启动桌面时它对我有用，所以重新启动系统对我有用

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-11T14:14:58.697

我尝试将 .svn 文件夹删除到其他位置并将其放回同一根文件夹中。在我尝试更新 SVN 之后，它得到了更新。我不知道它是如何工作的。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-07-09T19:03:24.680

I had the same problem, and somehow found that I had a hidden .svn file at the c:\ level. Once I deleted this hidden folder (.svn), everything worked okay. I must have unintentionally created a working directory at the root drive.

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-03-20T11:58:51.807

就我而言，我运行 gulp-watch 导致了问题。停止它后，我可以执行清理命令。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-07-19T21:49:14.670

我已经看到了几个问题`svn`，包括这个，通过删除/创建`.svn/tmp`目录来解决。然后运行`svn cleanup`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-05-29T09:57:18.307

在我的情况下，在我关闭 Visual Studio 并重试 CleanUp 之后，它就可以工作了。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-06-15T09:18:59.740

我今天在尝试提交到 SVN 时解决了这个错误。该错误是真实的，TortoiseSVN 无法访问我尝试提交的文件。此文件已在 Windows 中运行“以管理员身份”程序时保存。这意味着该文件具有管理员访问权限，但不能从我的帐户访问（TortoiseSVN 作为交互式用户运行）。我在我的 Windows 帐户下获得了指定文件的所有权，之后清理就可以继续了。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-10-16T10:59:16.653

对我有用的解决方法：

1.  剪切目录的内容并将其复制到另一个文件夹。
2.  从命令行对空文件夹运行清理。
3.  将文件复制回原始文件夹中。

完成，但我无法解释为什么会发生这种情况。如果您不删除文件，则清理命令会说他无法读取/写入这些文件。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-07-31T05:21:39.290

从主文件夹中删除 svn 并将其替换为您从 elsewere 获得的另一个可行副本。然后更新。svn 文件夹通常是一个隐藏文件夹。因此，请确保在执行上述步骤之前取消隐藏文件夹。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-10-11T08:24:33.030

就我而言，尝试从 IDE 中提交时出现错误。当我在资源管理器中使用 TortoiseSVN 执行相同目录的提交时，操作成功。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-08-03T07:44:04.600

我有一个错误，例如“无法更改文件'/Users/Code/UnitTest.cpp'的权限：没有这样的文件或目录”。颠覆者对不再存在的文件感到困惑。我只是做了类似“echo ABCD >> /Users/Code/UnitTest.cpp”的操作来创建文件的副本，然后进行清理。有效。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2014-02-12T09:24:51.997

我有同样的问题，什么对我有用：

1.  将您的文件夹和文件复制到另一个地方，比如说一个文件夹（我最近更改了我的文件并且承诺失败并导致了已解决的问题）
2.  签出一个新的工作副本
3.  将更改的文件从文件夹复制到工作副本并覆盖现有文件。提交/更新现在应该可以工作

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-02-15T09:00:06.287

在我的情况下，一个后台 Java 虚拟机实例正在运行，杀死了哪个清理成功。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-09-29T14:53:39.367

我最初在尝试使用 TortoiseSVN 时遇到了这个问题。最初，TortoiseSVN clean up 和 console svn cleanup 都以与原始海报相似的消息失败。

但是我的解决方案（偶然发现）只是等待几分钟。我认为 TSVNCache 在签入时保留了其中一些文件。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-04-13T12:50:50.410

当您尝试进行 SVN 切换/清理时文件仍处于打开状态时，可能会发生这种情况。

我有一个分支，在那里我创建了一个新文件，我在另一个应用程序中打开了该文件。切换到另一个分支无法删除导致切换失败的文件。这也是导致`svn cleanup`失败的原因，但是这在 Tortoise SVN UI 中并未显示为原因。

`svn cleanup`从控制台窗口（在根文件夹上）运行清楚地显示错误`file\location\file.ext: The process cannot access the file because it is being used by another process`

关闭任何打开的文件句柄/窗口并运行控制台`svn cleanup`然后允许清理正常工作。

长话短说 -`svn cleanup`在控制台中运行以查看更详细的错误。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2016-03-21T12:21:08.063

我在使用外部设备时发生了这种情况，其中一个损坏了。我不得不去那个文件夹并执行清理。然后清理工作适用于整个工作副本。

示例：使用 external `^/widgets/foo common/foo-widget`，首先对文件夹执行清理`common/foo-widget`。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-05-28T17:24:28.087

除了 Sigurd V 的回答（您应该先尝试一下），一些较大的代码库有多个“.svn”文件夹，它不一定是根目录中具有锁定任务的那个。

如果是这种情况，您必须检查每一项。如果您已经拥有 SQLite 和 Powershell，您可以快速找到有问题的目录。

要查找哪些文件夹被锁定运行（替换`path\to\sqlite.exe`）：

`Get-ChildItem -Path . -Filter '.svn' -Recurse -Hidden | foreach { $toFind = $_.FullName + "\wc.db" ; gci $toFind | foreach { echo $_.FullName ; path\to\sqlite.exe $_.FullName "select * from work_queue" } }`.

这给出了 .svn 目录的列表，并且在每个目录的下方，是所有当前任务的列表。

如果有任何未完成的任务，对于每一个运行（替换`path\to\sqlite.exe`和`path\to\.svn\wc.db`）：

`path\to\sqlite.exe path\to\.svn\wc.db "delete from work_queue"`

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-09-18T06:29:24.530

在日食中；

1.  右键单击您的项目文件夹 > 团队 > 刷新/清理。
2.  在 Eclipse 窗口中，选择 Project 菜单项下的 clean 选项
3.  最后重启Eclipse

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2017-08-10T14:56:31.680

我从我的开发人员那里拿走了 .svn 文件夹，并用这个替换了我的 .svn 文件夹。它对我有用。不知道还有什么后果！

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-04-22T09:27:55.463

请按照以下步骤操作。

`svn`1）通过.（根文件夹或子文件夹）转到您无法成功清理的目录。

2）`.svn`在目录中选择文件夹，剪切该文件夹并将其粘贴到单独的驱动器或单独的位置（在svn目录之外）

3）现在，回到目录 - 右键单击​​并选择`TortoiseSVN -->Repo-browser`

4）`Checkout`文件夹（它不会执行新的结帐）。

5）你所有的项目都会重新版本化，它会修复svn的内部问题，问题应该得到解决。

# jackson - Jackson2 自定义解串器工厂

> ID：10128202
> 
> 赞同：6
> 
> 时间：2012-04-12T16:56:47.123
> 
> 标签：jackson

我将杰克逊 1.6 代码移植到杰克逊 2 并偶然发现了一个已弃用的代码。

我在杰克逊 1.6 中所做的是：

```
CustomDeserializerFactory sf = new CustomDeserializerFactory();
mapper.setDeserializerProvider(new StdDeserializerProvider(sf));
sf.addSpecificMapping(BigDecimal.class, new BigDecimalDeserializer());
t = mapper.readValue(ts, X[].class); 
```

任何人都知道如何在杰克逊2中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-04T13:27:58.190

要添加一个工厂——不仅仅是一个反序列化器——不要使用`SimpleModule`. 创建您自己的`Module`并在其中创建一个`Deserializers`添加到`SetUpContext`. 该`Deserializers`对象将可以访问工厂所做的类似方法，您可以获得有关所需反序列化器的额外类型信息。

它看起来像这样（注意它不需要是内部类）：

```
public class MyCustomCollectionModule extends Module {

@Override
public void setupModule(final SetupContext context) {
    context.addDeserializers(new MyCustomCollectionDeserializers());
}

private static class MyCustomCollectionDeserializers implements Deserializers {

    ... 

    @Override
    public JsonDeserializer<?> findCollectionDeserializer(final CollectionType type, final DeserializationConfig config, final BeanDescription beanDesc, final TypeDeserializer elementTypeDeserializer, final JsonDeserializer<?> elementDeserializer) throws JsonMappingException {

        if (MyCustomCollection.class.equals(type.getRawClass())) {
            return new MyCustomCollectionDeserializer(type);
        }
        return null;
    }

    ...
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:43:26.177

在杰克逊 2.0 中：

1.  创建一个`Module`（通常`SimpleModule`）
2.  向它注册自定义处理程序。
3.  打电话`ObjectMapper.registerModule(module);`。

这在 Jackson 1.x 上也可用（从 1.8 左右开始）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:56:52.823

这是在 Jackson 2.x 中注册模块（在本例中为 Joda 日期处理）的示例：

```
 ClientConfig clientConfig = new DefaultClientConfig();

    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new JodaModule());
    mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);

    JacksonJsonProvider provider = new JacksonJsonProvider();
    provider.configure(SerializationFeature.INDENT_OUTPUT, true);
    provider.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);

    provider.setMapper(mapper);
    clientConfig.getSingletons().add(provider);

    Client client = Client.create(clientConfig); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T23:48:28.977

[举例@StaxMan 答案](https://stackoverflow.com/a/10144911/2979435)

基本上你需要创建一个模块（`SimpleModule`），添加一个反序列化器并注册这个模块

```
final SimpleModule sm = new SimpleModule();
        sm.addDeserializer(Date.class, new JsonDeserializer<Date>(){

            @Override
            public Date deserialize(JsonParser p, DeserializationContext ctxt)
                    throws IOException {
                try {
                    System.out.println("from my custom deserializer!!!!!!");
                    return new SimpleDateFormat("yyyy-MM-dd").parse(p.getValueAsString());
                } catch (ParseException e) {
                    System.err.println("aw, it fails: " + e.getMessage());
                    throw new IOException(e.getMessage());
                }
            }
        });

        final CreationBean bean = JsonUtils.getMapper()
                .registerModule(sm)
//                .setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"))
                .readValue("{\"dateCreation\": \"1995-07-19\"}", CreationBean.class); 
```

这是一个完整的例子

```
import java.io.IOException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.databind.DeserializationContext;
import com.fasterxml.jackson.databind.JsonDeserializer;
import com.fasterxml.jackson.databind.module.SimpleModule;

/**
 * @author elvis
 * @version $Revision: $<br/>
 *          $Id: $
 * @since 8/22/16 8:38 PM
 */
public class JackCustomDeserializer {

    public static void main(String[] args) throws IOException {

        final SimpleModule sm = new SimpleModule();
        sm.addDeserializer(Date.class, new JsonDeserializer<Date>(){

            @Override
            public Date deserialize(JsonParser p, DeserializationContext ctxt)
                    throws IOException {
                try {
                    System.out.println("from my custom deserializer!!!!!!");
                    return new SimpleDateFormat("yyyy-MM-dd").parse(p.getValueAsString());
                } catch (ParseException e) {
                    System.err.println("aw, it fails: " + e.getMessage());
                    throw new IOException(e.getMessage());
                }
            }
        });

        final CreationBean bean = JsonUtils.getMapper()
                .registerModule(sm)
//                .setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"))
                .readValue("{\"dateCreation\": \"1995-07-19\"}", CreationBean.class);

        System.out.println("parsed bean: " + bean.dateCreation);
    }

    static class CreationBean {
        public Date dateCreation;
    }

} 
```

# python - Python对串口/以太网的冷漠

> ID：10128209
> 
> 赞同：4
> 
> 时间：2012-04-12T16:57:05.047
> 
> 标签：python, tcp, serial-port

我正在尝试与使用相同协议的设备进行通信，无论您是通过 TCP 套接字还是串行端口与之通信。无论哪种方式，它都是一个基于 ASCII 命令的界面，您可以在提示符处键入命令，然后输入一个换行符，您会得到一个换行符的响应，然后是一个新的提示符。

```
> IDENTIFY
DEVICE_TYPE_RESPONSE
> TEST POWER
OK
> 
```

该程序可以并且应该阻塞，直到它得到新的提示，但需要有一个超时，这样你就不会永远等待，以防设备突然死亡。该超时应该是几秒钟，以免错误地标记网络故障，但不应该强迫我在获得提示字符后等待几秒钟。

我喜欢某种抽象接口的方法，以便不关心底层通信层是什么。只需将一个打开的套接字或一个打开的串行端口传递给它，让一切发生。有什么好的方法可以做到这一点吗？最好能够在 Python 2.6 下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:08:15.960

您可以在 Twisted 中实现该协议，它允许您使用 TCP 或串行端口作为传输而不更改您的协议实现。Twisted 还允许您设置超时/延迟回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:24:51.750

Python 的串行包提供了很多有用的东西，包括一些[基于 TCP/IP 桥接的串行](http://pyserial.sourceforge.net/examples.html#tcp-ip-serial-bridge)。如果您想使用 ASCII/Telnet 与它交谈，那么您可能希望将“--convert”选项与简单串行到网络 (TCP/IP) 重定向器一起使用。

此外，您可能想看看在[Linux 环境中将串行端口数据转换为 TCP/IP 的其他相关问题](https://stackoverflow.com/questions/484740/converting-serial-port-data-to-tcp-ip-in-a-linux-environment)

# jquery - jQuery 用 var 替换 attr 源

> ID：10128210
> 
> 赞同：0
> 
> 时间：2012-04-12T16:57:09.513
> 
> 标签：jquery

如何使用 var 更改图像源属性

```
$(this).attr('src','' +myVar+ '')

var myVar = "img/image.png"; 
```

我试过这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:59:56.307

那是您的实际源代码吗？因为您在使用它*之后*定义了变量。换线就行了。（而且不需要`''+myVar+''`，直接使用变量即可。）

如果它仍然不起作用，请确保它`this`指的是您要更改的图像元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:58:12.737

只需使用：

```
var myVar = '/img/image.png';
$(this).attr('src', myVar) 
```

传递给的参数`attr()`可以是带引号的字符串`"/img/image.png"`，也可以是“包含”该字符串的变量。如果你传递一个变量，它不需要被引用，尽管你必须在使用它之前定义变量。

此外，为了稍微提高性能（非常*轻微*），您可以避免包装`this`到 jQuery 对象中`$(this)`并简单地使用（在定义变量之后）：

```
this.src = myVar; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T16:58:13.600

只是`$(this).attr('src', myVar);`

并确保 myVar 在执行上述行时在范围内定义。

# php - FTP_DELETE 不起作用？

> ID：10128216
> 
> 赞同：1
> 
> 时间：2012-04-12T16:57:33.780
> 
> 标签：php, oop, magento

嘿伙计们，我的脚本在这里应该*做一些事情*然后删除一个文件，不幸的是我的文件永远不会取消链接。我想知道这可能是什么原因？权限是我唯一能想到的，或者输出缓冲区可能搞砸了？我真的不知道，但希望得到一些关于如何处理它的建议。问题有问题的是最后一个 IF() 块。

```
public function remoteFtp() {
    $enabled = Mage::getStoreConfig('cataloginventory/settings/use_ftp');
    $remove = Mage::getStoreConfig('cataloginventory/settings/ftp_remove_file');
    if ($enabled == 0) {
        return true;
    }

    $base_path = Mage::getBaseDir('base');

    $ftp_url = Mage::getStoreConfig('cataloginventory/settings/ftp_url');
    $ftp_user = Mage::getStoreConfig('cataloginventory/settings/ftp_user');
    $ftp_pass = Mage::getStoreConfig('cataloginventory/settings/ftp_password');
    $ftp_remote_dir = Mage::getStoreConfig('cataloginventory/settings/ftp_remote_dir');
    $ftp_filename_filter = Mage::getStoreConfig('cataloginventory/settings/ftp_remote_filename');

    $ftp_file = $base_path . '/edi/working/working.edi';

    $handle = fopen($ftp_file, 'w');
    $conn_id = ftp_connect($ftp_url);

    ftp_login($conn_id, $ftp_user, $ftp_pass) or die("unable to login");

    if ($ftp_remote_dir) {
        ftp_chdir($conn_id, $ftp_remote_dir);
    }

    //is there a file
    $remote_list = ftp_nlist($conn_id, ".");

    $exists = count($remote_list);

    if ($exists > 0) {
        $len = strlen($ftp_filename_filter) - 1;

        foreach ($remote_list as $name) {
            if (substr($ftp_filename_filter, 0, 1) == "*") {

                if (substr($name, '-' . $len) == substr($ftp_filename_filter, '-' . $len)) {
                    $ftp_remote_name = $name;
                }
            }
            if (substr($ftp_filename_filter, strlen($name) - 1) == "*") {
                if (substr($ftp_filename_filter, 0, $len) == substr($name, 0, $len)) {
                    $ftp_remote_name = $name;
                }
            }
            if ($ftp_filename_filter == $name) {
                $ftp_remote_name = $name;
            }
        }
    }

    if (ftp_fget($conn_id, $handle, $ftp_remote_name, FTP_ASCII, 0)) {
        echo "successfully written to $ftp_file <br />";
        if ($remove == 1) {
            ftp_delete($conn_id, $ftp_remote_name);
        }
    } else {
        echo "There was a problem while downloading $ftp_remote_name to $ftp_file <br />";
    }

    ftp_close($conn_id);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:59:00.100

答案是系统变量`$remove = Mage::getStoreConfig('cataloginventory/settings/ftp_remove_file');`设置为 BOOL(false)

# linq - 尝试字符串。加入 IList 并将结果输出到控制台

> ID：10128218
> 
> 赞同：1
> 
> 时间：2012-04-12T16:57:44.703
> 
> 标签：linq, c#-4.0

使用 "string.Join(",", test);" 有效，但由于某种原因，我得到以下输出：

“Ilistprac.Location，Ilistprac.Location，Ilistprac.Location”

我尝试了 ToString、Convert.ToString 等，但仍然得到该输出。

所有的 IList 接口也是用 IEnurmerable 实现的（除非有人希望我在此列出）。

```
class IList2
{
    static void Main(string[] args)
    {

     string sSite = "test";

 string sBldg = "test32";
     string sSite1 = "test";
     string sSite2 = "test";

     Locations test = new Locations();
     Location loc = new Location();
     test.Add(sSite, sBldg)
     test.Add(sSite1)
     test.Add(sSite2)
     string printitout = string.Join(",", test); //having issues outputting whats on the list

     }
 }
string printitout = string.Join(",", test.ToArray<Location>);

public class Location
{
    public Location()
    {

    }
    private string _site = string.Empty;
    public string Site
    {
        get { return _site; }
        set { _site = value; }
    }
}

public class Locations : IList<Location>
{
    List<Location> _locs = new List<Location>();

    public Locations() { }

    public void Add(string sSite)
    {
        Location loc = new Location();
        loc.Site = sSite;

        loc.Bldg = sBldg;
        _locs.Add(loc);
    }

    private string _bldg = string.Empty;

    public string Bldg

    {

        get { return _bldg; }

        set { _bldg = value; }

    }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:04:35.107

您需要为每个元素提供一个有用的实现`ToString`。默认实现将只返回类型的名称。请参阅[文档](http://msdn.microsoft.com/en-us/library/dd992421.aspx)。`Location``Join`

所以如果你有这样的类型

```
class SomeType
{
    public string FirstName { get; private set;  }
    public string LastName { get; private set; }

    public SomeType(string first, string last)
    {
        FirstName = first;
        LastName = last;
    }

    public override string ToString()
    {
        return string.Format("{0}, {1}", LastName, FirstName);
    }
} 
```

您需要指定应如何将其表示为字符串。如果你这样做，你可以像这样使用 string.Join 来产生下面的输出。

```
var names = new List<SomeType> { 
    new SomeType("Homer", "Simpson"), 
    new SomeType("Marge", "Simpson") 
};

Console.WriteLine(string.Join("\n", names)); 
```

输出：

```
Simpson, Homer
Simpson, Marge 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T17:04:37.697

如果您想保持当前的方法，您必须覆盖`ToString()`您的类以提供一些有意义的输出，例如：`Location`

```
public override string ToString()
{
    return Site;
} 
```

# jquery - 每 30 秒自动返回家中

> ID：10128226
> 
> 赞同：2
> 
> 时间：2012-04-12T16:57:57.717
> 
> 标签：jquery

如何让网站每 30 秒自动返回一次？

我正在设计一个将显示在医院大厅中的站点，该站点在触摸屏上运行，以获取一般信息。在一个人停止使用它后，我们需要自动返回到主站点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:02:00.650

查看Paul Irish 的这个不错的 jQuery [**idletimer插件和**](http://paulirish.com/2009/jquery-idletimer-plugin/)[**这里的演示**](http://paulirish.com/demo/idle-timer)

基本上它会在指定的空闲时间后触发回调函数，您可以在其中将其转发回主页。

用法：

```
// idleTimer() takes an optional argument that defines the idle timeout
// timeout is in milliseconds; defaults to 30000
$.idleTimer(10000);

$(document).bind("idle.idleTimer", function(){
 // function you want to fire when the user goes idle
});     

$(document).bind("active.idleTimer", function(){
 // function you want to fire when the user becomes active again
});

// pass the string 'destroy' to stop the timer
$.idleTimer('destroy'); 
```

**请注意涵盖的事件：** 'mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove'[来自源代码](https://github.com/paulirish/jquery-idletimer/blob/master/jquery.idle-timer.js#L100)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:16:07.517

如果是触摸屏，只需点击即可打破空闲时间，所以

```
var idle, isIdle;
function createIdle() {
idle = window.setTimeout("alert('hey where are you?')",5000);
}

$("*").click(function(){ 
    clearTimeout(idle);
    createIdle();
});
createIdle();​ 
```

[http://jsfiddle.net/ocanal/CEEuA/1/](http://jsfiddle.net/ocanal/CEEuA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:04:07.933

我发现这个代码示例是最有用的。

[http://www.bedroomlan.org/coding/detecting-%E2%80%98idle%E2%80%99-and-%E2%80%98away%E2%80%99-timeouts-javascript](http://www.bedroomlan.org/coding/detecting-%E2%80%98idle%E2%80%99-and-%E2%80%98away%E2%80%99-timeouts-javascript)

```
setIdleTimeout(30000); // 30 seconds
document.onIdle = function() {window.location = 'URL to navigate to'} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T17:02:26.093

您也可以使用[刷新元标记](http://www.htmlcodetutorial.com/document/index_tagsupp_4.html)仅使用 html 标记来执行此操作，并避免一起使用 javascript：

```
<meta HTTP-EQUIV="REFRESH" content="30; url=http://www.yourdomain.com/"> 
```

这假定用户执行的每个操作都将从当前页面导航到新页面。如果是这种情况，那么通过将其添加到每个页面的头部，只要用户在 30 秒内没有导航到另一个页面，浏览器就会重定向回索引。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T17:03:26.810

我同时使用了元刷新

`<meta http-equiv="REFRESH" content="30;url=http://www.the-domain.com">`

和一个延迟的 window.location

`window.setTimeout("location='http://www.the-domain.com'",30000);`

去做这个。

# excel - Enterprise Architect 和 Excel 中的需求管理

> ID：10128235
> 
> 赞同：5
> 
> 时间：2012-04-12T16:58:19.913
> 
> 标签：excel, enterprise-architect

我正在开始一个新项目，并希望使用 Enterprise Architect 进行需求管理。

在一个软件中定义需求、关联用例、设计元素、测试等看起来非常好。

我成功地创建了一个配置文件，该配置文件可以满足具有预定义标记值的企业内容的拖动自定义要求。

我的问题是要求必须在 3 个级别进行管理。团队、管理层和客户。管理层和客户都使用 Excel 进行通信。

我的问题是，可以执行以下操作： - 在 EA 中使用预定义的标签值创建需求图 - 在 Excel 中导出需求（使用预定义的标签值） - 我无法导出我的预定义标签值。- 修改 excel 文件 - 从 excel 导入并更新 EA 中的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:14:24.073

是的，您可以使用 CSV 导入/导出来执行此操作。

在 CSV 导入/导出中包含标记值的功能是最近才添加的，因此请确保您运行的是最新的 EA（在撰写本文时，最新版本是 9.3.931）。

假设您在一个包中满足了所有要求，请执行以下操作：

1.  在项目浏览器中右键单击包，选择 Import/Export -> CSV Import/Export。
2.  单击打开的对话框右上角的编辑/新建按钮。
3.  从可用字段列表中，选择 GUID、类型、名称、注释和您使用的任何其他字段（例如难度）。
4.  单击添加标记值字段 -> 值。
5.  如果您所使用的标记是在正确部署的 UML 配置文件中定义的，那么您可以在列表中找到它。否则，单击“其他元素”按钮并导航到您的要求之一；这将允许您选择即时创建的标签。
6.  回到规范对话框，确保您选择了正确的分隔符（右上角）并为规范设置名称。其他对话框选项可以留空，但将 Requirement 指定为默认类型可能是个好主意。保存规范并关闭对话框（当然，您只需创建一次规范）。
7.  在“导入/导出”对话框中，指定文件名并选择“导出”。单击运行以导出需求。

要重新导入，只需在 CSV 导入/导出对话框中选择导入而不是导出。

两个关键字段是 GUID 和类型。当您将需求发送给管理层和客户时，您可能希望隐藏这些列，并告知他们不应篡改这些列。

GUID 是唯一标识符。只要在文件中，EA 就可以重新导入文件并更新您的建模需求。

对于文件中添加的任何新需求，类型需要设置为需求。您不需要设置 GUID。EA 会在导入过程中询问您是创建一个还是完全忽略该条目；告诉它创建一个，需求将被添加到您的模型中。但是必须设置类型字段，否则 EA 将不知道要创建什么。

EA 不会做的是从您的模型中删除需求（如果它们已从文件中删除）。这是您必须手动管理的内容。（如果您正在从事的项目需求数量实际上会随着时间的推移而减少，请给我打电话。）

If your requirements are in several packages you can still import / export them this way, but it's a little bit more complex: you'll need to set the Preserve Hierarchy option in the CSV specification and use a couple of special columns, but that's pretty well described in the help file.

# php - PHP Cookie破坏不起作用，我做错了什么？

> ID：10128248
> 
> 赞同：2
> 
> 时间：2012-04-12T16:58:52.390
> 
> 标签：php, .htaccess, mod-rewrite, cookies

我正在使用 RewriteRule 在 htaccess 中创建烹饪。在我的测试中，我根本无法让这个 cookie 消失。这是我创建 cookie 的方式，我在[这个线程](https://stackoverflow.com/questions/10112530/i-need-to-write-a-url-that-is-301d-to-a-session-variable)中得到了帮助：

```
[L,CO=redirect_indicator:yes:.www.example.com,R=301] 
```

所以 cookie 有默认的过期时间，应该只是浏览会话的持续时间。我试图在我的脚本结束时销毁它，我只是得到令人困惑的结果。

因此，我将在脚本顶部执行此操作以查看 cookie 以进行测试：

```
var_dump($_COOKIE['redirect_indicator']); 
```

然后在我的脚本结束时，我运行以下命令（[在这里的另一个堆栈线程](https://stackoverflow.com/questions/2310558/how-to-delete-all-cookies-of-my-website-in-php)的帮助下）我也尝试了比这更简单的销毁脚本，但似乎没有一个可以解决问题：

```
if (isset($_SERVER['HTTP_COOKIE'])) {
    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
    foreach($cookies as $cookie) {
        $parts = explode('=', $cookie);
        $name = trim($parts[0]);
        setcookie($name, '', time()-1000);
        setcookie($name, '', time()-1000, '/');
    }
} 
```

现在在该代码部分之后，我也再次运行它：

```
var_dump($_COOKIE['redirect_indicator']); 
```

事实上，cookie 不存在！这很好，但是当我在不应生成 cookie 的页面上再次运行脚本时，cookie 仍然会在我的第一个 var_dump 期间出现。

有没有办法摆脱这个 cookie，或者我会永远受制于浏览器存储的内容。当我重新启动浏览器时它确实消失了，但是在脚本执行后我需要这个东西消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:35:14.047

一些想法：

(1) 在您的脚本中，您读出 $_COOKIE，然后覆盖一个 cookie，然后再次查看 $_COOKIE。$_COOKIE 同时更新了吗？[正如用户在http://www.php.net/manual/en/reserved.variables.cookies.php](http://www.php.net/manual/en/reserved.variables.cookies.php)上提供的注释所说：

" **$_COOKIE 的值由用户代理请求中收到的 cookie 的内容决定。**

**如果你设置了一个cookie（即发送到浏览器），它不会在下一个请求之前被发回，因此数据不会出现在$_COOKIE 中。**"

您对 $_COOKIE 的第二次调用只是保留了此变量在脚本开头保存的值。查看您的浏览器以查看您的 cookie 是否已更改或删除，而不是 $_COOKIE。

(2) 在您链接到的线程中，它说您的 .htaccess 应该说：

```
RewriteRule ^example/directory/go\.php$ example.com/go.php [L,CO=tracker:yes:.example.com,R=301] 
```

不是：

```
[L,CO=redirect_indicator:yes:.www.example.com,R=301] 
```

当你写。会不会是您忘记了该行的第一部分，因此您的 [flags] 会应用于任何 RewriteRule 位于其之上的内容，甚至应用于被调用的每个页面？

(3) 为什么不在重定向中传递旧 URL 而不是将其保存在 cookie 中：

```
 RewriteRule ^(example/directory/go\.php)$ example.com/go.php?old=$1 [R=301] 
```

然后您可以在 go.php 中解析 $_GET['old']。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:06:26.627

```
setcookie($name, '', time()-1000); 
```

以上确实是设置了过去的过期时间，这是删除 cookie 的唯一方法 - 但是，在用户关闭所有浏览器窗口之前，cookie 不会从用户计算机中删除。

如果您需要 cookie 不再影响脚本，请将值重置为稍后可以定义为异常的值，例如“删除”

```
if(isset($_COOKIE['redirect_indicator']) && $_COOKIE['redirect_indicator'] !== 'delete') 
```

# xcode - cocos2d 创建一个圆形并将其用作精灵

> ID：10128249
> 
> 赞同：3
> 
> 时间：2012-04-12T16:58:56.093
> 
> 标签：xcode, cocos2d-iphone, shape, geometry, primitive

所以我想在 cocos2d 上用图元创建一个圆形，然后将它用作精灵，请问我该怎么做？我知道我必须使用这样的东西：

`glLineWidth(16); glColor4ub(0, 255, 0, 255); drawCircle( ccp(s.width/2, s.height/2), 100, 0, 10, NO);` 但我很难理解它是如何工作的以及如何将它用作精灵

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:03:10.063

你真的需要 CCSprite 实例吗？你可以创建一个 CCNode 的子类，然后在它的

```
- (void) draw 
```

方法把你的代码放在那里。你的圈子将有它的中心位置 (0.f, 0.f)

```
@implementation MyScene

- (void) onEnter
{
    [super onEnter];
    CCNode* myNode = [MyNodeSubclass node];
    [node setPosition: someRandomPosition ];
    [self addChild: node];
}

@end

@implementation MyNodeSubclass

- (void) draw
{
    glColor4f(255, 255, 255, 255);
    CCPoint center = ccp(0.f, 0.f);
    CGFloat radius = 10.f;
    CGFloat angle = 0.f;
    NSInteger segments = 10;
    BOOL drawLineToCenter = YES;

    ccDrawCircle(center, radius, angle, segments, drawLineToCenter);    
}

@end 
```

在这里写了这段代码，没有从 xcode 复制，但它应该可以按您的意愿工作。ccDrawCircle 是一个 cocos2d 函数，在 CCDrawingPrimitives.h 中声明

# java - Uri 对所有内容进行编码，包括未保留的字符

> ID：10128258
> 
> 赞同：1
> 
> 时间：2012-04-12T16:59:29.570
> 
> 标签：java, android, encoding, utf-8

我需要匹配我的服务器的 oauth 签名基础，它在签名之前对所有内容进行编码。

使用 Uri.encode 而不是 Urlencoder.encode(base, UTF-8) 对空格和 + 进行正确编码，但是我还需要对未保留字符 ("_-!.~'()*") 进行编码。

为他们编写我自己的实用程序并不难，但如果不需要手动更改，那就太好了。是否已经有一个实用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:02:41.457

原来只有几个字符需要额外的编码。对于大众：

```
public static String encode(String base){
    String encoded = Uri.encode(base);
    encoded = encoded.replace("(", "%28");
    encoded = encoded.replace(")", "%29");
    encoded = encoded.replace("!", "%21");
    encoded = encoded.replace("\'", "%27");
    encoded = encoded.replace("*", "%2A");

    return encoded;
} 
```

# c# - 使用 Bouncy Castle 进行 C# RSA 解密

> ID：10128261
> 
> 赞同：9
> 
> 时间：2012-04-12T16:59:46.337
> 
> 标签：c#, java, cryptography, rsa, bouncycastle

我得到了一个 Base64 编码的加密字符串，它是在 Java 中使用 Bouncy Castle 加密的。下面的示例 Java 代码段：

```
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
cipher.init(Cipher.ENCRYPT_MODE, key.getPublic());
byte[] encryptedText = cipher.doFinal("xxxxx|xxxxx".getBytes("UTF-8"));
String encodedText = new BASE64Encoder().encode(encryptedText); 
```

我需要使用 Bouncy Castle 解密生成的字符串，但在 C# 中，我得到了一个关于如何在 Java 中执行此操作的代码片段，但我无法将其转换为 C#（原因是我们正在构建一个 .net 站点，并且将成为 Java 站点中的 iFrame。Java 站点将把 RSA 加密字符串传递给 .NET 站点）。下面要解密的示例 Java 代码：

```
Cipher cipherDec = Cipher.getInstance("RSA/ECB/PKCS1Padding");
cipherDec.init(Cipher.DECRYPT_MODE, key.getPrivate());
byte[] decodedText = new BASE64Decoder().decodeBuffer(encodedText);
byte[] decryptedText = cipherDec.doFinal(decodedText);
String finalValue = new String(decryptedText, "UTF-8"); 
```

我已经从[http://www.bouncycastle.org/csharp/](http://www.bouncycastle.org/csharp/)下载了示例，但似乎没有输入字符串值进行加密的示例，然后通过加密/解密过程。

我得到了**模数**、**公共指数**、**私人**指数、**素数 P**、**素数 q**、**素数指数 p**、**素数指数 q**和**crt 系数**的值。

我已经看到我可以使用以下内容：

```
IAsymmetricBlockCipher signer = new Pkcs1Encoding(new RsaEngine());
signer.Init(true, pubParameters); 
```

但是该`signer`对象似乎没有与上面的 Java 示例相同的方法。

我唯一可以使用的方法是

```
ProcessBlock(byte[] inbuf, int inOff, int inLen); 
```

但是我看不到如何在我的上下文中使用它。

这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T07:24:05.360

为了帮助别人，最终转换的代码如下：

```
RsaKeyParameters privParameters = new RsaPrivateCrtKeyParameters(mod, pubExp, privExp, p, q, pExp, qExp, crtCoef);
RsaKeyParameters pubParameters = new RsaKeyParameters(false, mod, pubExp);
IAsymmetricBlockCipher eng = new Pkcs1Encoding(new RsaEngine());
eng.Init(false, privParameters);
byte[] encdata = System.Convert.FromBase64String("{the enc string}");
encdata = eng.ProcessBlock(encdata, 0, encdata.Length);
string result = Encoding.UTF8.GetString(encdata); 
```

mod、pubExp 等都是 BigInteger 值：

```
static BigInteger mod = new BigInteger("big int value"); 
```

需要以下`using`指令：

```
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Parameters;
using Org.BouncyCastle.Crypto.Engines;
using Org.BouncyCastle.Crypto.Encodings;
using Org.BouncyCastle.Math; 
```

可以从 bouncycastle 网站获得。[http://www.bouncycastle.org/csharp/](http://www.bouncycastle.org/csharp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:04:45.433

您是否尝试过将 base 64 字符串转换为字节数组，然后使用进程块方法？可能不止这些，但这绝对是我要迈出的第一步。

这是如何执行此操作的示例：http: [//msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T22:36:18.730

我不确定我是否理解您为什么必须使用 Bouncycastle。以下小代码片段显示了仅使用 .NET 类的 RSA 加密/解密示例：

```
using System;
using System.Text;
using System.Security.Cryptography;

namespace RsaForDotNet
{
    class Program
    {
        static void Main(string[] args)
        {
            RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(512);
            var encrypted_msg = rsa.Encrypt(Encoding.UTF8.GetBytes("Secret Data"), false);
            var encoded_msg = Convert.ToBase64String(encrypted_msg);
            Console.WriteLine(encoded_msg);
            var decoded_msg = Convert.FromBase64String(encoded_msg);
            var decrypted_msg = Encoding.UTF8.GetString(rsa.Decrypt(decoded_msg, false));
            Console.WriteLine(decrypted_msg);
        }
    }
} 
```

# c++ - 我应该 clear() 容器作为参数传入，还是换入一个新对象？

> ID：10128276
> 
> 赞同：4
> 
> 时间：2012-04-12T17:00:22.800
> 
> 标签：c++, stl, exception-safety

我正在讨论如何正确处理容器作为参数。

我们有一个接受容器参数的函数，并希望返回仅填充了函数放入其中的容器：

```
class bar;

void foo(std::vector<bar> &bars) 
{
   //do stuff that fills bars.
   //exceptions may be thrown.
   //we may also legally return early 
   return;
} 
```

在讨论的一方面，有人说我们应该`bars.clear()`先运行该函数。

例如：

```
void foo(std::vector<bar> &bars) 
{
   bars.clear();
   //do stuff that fills bars.
   //exceptions may be thrown.
   //we may also legally return early 
   return;
} 
```

我自己的偏好是尽可能接近强异常保证，这意味着制作一个本地容器，填充它并在返回之前进行交换，否则保持`bars`不变。

例如：

```
void foo(std::vector<bar> &bars) 
{
   std::vector<bar> localBars;
   //do stuff that fills localBars.
   //exceptions may be thrown.
   //we may also legally return early 
   if (returnEarly)
   {
       bars.swap(localBars);
       return;
   }
   //do more stuff that may change localBars

   bars.swap(localBars);
   return;
} 
```

第一个例子是“经典”方法；在做任何事情之前清除你的参数并从那里开始。

对我来说，第二种方法设置了强大的异常保证（假设函数所做的任何事情都不能改变内部状态），并且避免了 clear() 调用。

选择一种方法而不是另一种方法有什么优点或缺点吗？

请注意，对于此功能，不需要强大的异常保证；如果函数在参数中没有失败，或者在它到达异常处理程序时，它所做的任何事情都会很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:07:52.493

您提到了使用交换的一个优点：它提供了强大的异常保证。这是否真的重要是另一个问题：如果客户端传递的参数会在异常传播时立即被破坏（在我看到的代码中几乎总是这种情况），那真的没关系。

还有另一个重要区别：`clear()`不释放内存或减少容量。如果客户端代码在循环中调用您的函数，并且在循环外部定义了向量，则向量将很快达到其最大大小，并且在填充它时不会有任何重新分配。当然，使用交换策略，您总是会重新分配。如果你不关心这种性能问题，你应该返回向量，而不是将非常量引用作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:08:33.060

swap() 在异常方面更好。如果容器很大并且您有内存限制，则 clear 可能具有优势。更实用/更清洁的风格可以是：

```
std::vector<bar> void foo()
{
    std::vector<bar> bars;
    ...
    return bars;
} 
```

RVO 将在大部分时间处理它，并且使用 c++11 并移动构造函数/赋值它将非常有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:38:40.787

两者真的很不一样。

优点`clear`：

*   重用内存
*   没有留下过时的信息`bars`

优点`swap`：

*   强大的异常保证

*这个问题一般*不能回答，你*在你的情况下*寻求什么语义/保证？

# ravendb - 不支持 ShardedDocumentStore 和 Sharded Linq 查询的索引创建失败

> ID：10128277
> 
> 赞同：0
> 
> 时间：2012-04-12T17:00:24.640
> 
> 标签：ravendb, sharding

我刚刚用 RavenDB 实现了分片。第一次运行时，代码如下：

```
tempShardedDocumentStore = new ShardedDocumentStore(new ShardStrategy(), shards);
tempShardedDocumentStore.Initialize();

IndexCreation.CreateIndexes(typeof(RavenDataAccess).Assembly, tempShardedDocumentStore); 
```

...产生此错误：

System.TypeInitializationException：'WriteToRaven.Data 的类型初始化程序。RavenDataAccess' 引发了异常。---> System.NotSupportedException：**分片文档存储没有数据库命令。**您需要显式使用分片实例来访问数据库命令

首先，ShardedDocumentStore 确实有 DatabaseCommands：

![在此处输入图像描述](../Images/f6a454ca0ecf575fb4730ae8782f86b4.png)

其次，如果那行不通，是否应该这样做？

```
IndexCreation.CreateIndexes(typeof(RavenDataAccess).Assembly, shards[0]); 
```

如果是这样，现在我的 linq 查询将不起作用：

System.NotSupportedException： Raven.Client.Shard.ShardedDocumentSession.QueryT**目前不支持分片 linq 查询**

```
using (IDocumentSession ravenSession = GetRavenSession())
{
    return ravenSession.Query<T>().OrderByDescending(orderByClause).FirstOrDefault();
} 
```

我怎样才能让它工作？

注意：GetRavenSession() 从上面显示的分片文档存储中返回 OpenSession()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T14:56:39.910

Bob Horn，您使用的是什么版本？我们最近改进了分片支持。我们现在支持 linq 分片，以及创建索引。

# vb.net - VB.NET Focus() 和 BringToFront() 的区别

> ID：10128281
> 
> 赞同：1
> 
> 时间：2012-04-12T17:00:44.750
> 
> 标签：vb.net, winforms

我正在 WinForms 中开发一个应用程序，我有 2 个 MDI 孩子，我想知道 Form.Focus 和 Form.BringToFront 之间的区别

我想知道在单击相应表单的标题栏时要使用哪一个，以便在我拖放表单时弹出它

如果您在调用 Form.Show 之后设置子表单 mdiParent 属性，那么它会弄乱所有子表单的焦点，因此对我来说，在 MDI 父级中拖放 MDI 子级不会将表单集中在 Drag start 上，但仅在 MouseUp 之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:16:55.053

Focus() 将焦点设置为 U 元素。BringToFront() 将您的元素置于其他元素之上（与您的元素重叠）。

因此，如果您在表单上使用 BringToFront()，它将被带到您 MDI 环境中窗口的前面。但这并不意味着你的表格会获得焦点。如果您使用 Focus()，您的表单将获得焦点：例如，您将能够通过键盘与表单交互。但这并不意味着形式将被置于其他形式之上。所以也许你应该同时使用这两种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:32:31.397

当我打开 MDI 子窗体时，我在 MDI 父窗体中创建以下函数：

```
Public Sub ShowMDIChild(f As Form)
    f.MdiParent = Me
    f.Show()
End Sub 
```

“f”参数是我希望打开的新形式：

```
MyMDIPParent.ShowMDIChild(New Hospitals) 
```

# vb.net - ReportViewer 10 在 ASP.NET 应用程序中使用时呈现空白屏幕

> ID：10128285
> 
> 赞同：2
> 
> 时间：2012-04-12T17:01:01.257
> 
> 标签：vb.net, visual-studio-2010, ssrs-2008

我有一个用 VS 2010 编写的 .NET 应用程序，目标 .NET 版本是 4.0，使用 ReportingServices 版本 10 控件。我的 SSRS 服务器是 SQL Server 2008 Enterprise。Web 服务器是 Windows Server 2008 R2 64 位上的 IIS 7.5。我确实审查[了这个问题和答案](https://stackoverflow.com/questions/5623695/reportviewer-10-0-on-iis-7-5-not-rendering)，但它并没有解决我的问题。

自去年 8 月到大约一周前，该应用程序一直运行良好。在应用程序中包含的五份报告中，三份仍在工作，但两份已停止工作。当 RS 控件出现在屏幕上时，我收到消息它正在加载，带有旋转的绿色圆圈。最终，这停止了，我剩下的只是没有报告的控制标题。我可以看到参数已正确填充，我可以单击查看报告，但我从未在屏幕上看到实际报告。

我确实访问了报告管理器 (SSRS) 站点并验证了报告按预期工作。生成确实需要大约五分钟，用户可以接受。他们知道它正在咀嚼大量数据来生成报告。我不能做快照，因为他们每次运行时都希望数据是实时的。

我假设在某处存在某种超时，但找不到它。我确实发现的一件事是，在 SQL Server 完成为报告生成结果集之前加载消息消失了，这让我相信超时是在应用程序本身中。由于同一 Web 服务器上的其他报告应用程序运行良好（不同的应用程序都属于同一网站），我不相信存在超时。我确实为 ServerReport 部分找到了一个 Timeout 标记，并将其设置为一个高得离谱的值，但没有成功。我也重新发布了报告和申请，但没有成功。代码包含在下面。提前感谢您的帮助！

.ASPX 页面中的相关代码：

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>

<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<rsweb:ReportViewer ID="ReportViewer" runat="server" Width="100%" 
    ProcessingMode="Remote" Font-Names="Arial" Font-Size="8pt" 
    ShowCredentialPrompts="False" SizeToReportContent="True" ShowParameterPrompts="true"
    ShowRefreshButton="True" ShowFindControls="True" ShowPageNavigationControls="true" Height="500px">
    <ServerReport DisplayName="Cluster Net Change" ReportPath="/Enrollment Reports/Cluster Net Change" 
        ReportServerUrl="http://reports.pinnacle.inside.pisd/reportserver" Timeout="6000000" />
</rsweb:ReportViewer> 
```

web.config 中的相关部分：

```
<assemblies>
  <add assembly="System.DirectoryServices.Protocols, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
  <add assembly="Microsoft.ReportViewer.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
  <add assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
</assemblies>

<buildProviders>
  <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
</buildProviders>

<httpHandlers>
  <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</httpHandlers>

<handlers>
  <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

# mysql - 合并表上的 mysqldump

> ID：10128288
> 
> 赞同：1
> 
> 时间：2012-04-12T17:01:19.397
> 
> 标签：mysql, mysqldump, myisam

我似乎无法使用 mysqldump 转储已创建为 MyISAM 合并表的表。

当我尝试这样做时，它只是转储一个包含创建表语法的文件（正确），但不转储基础表中的任何数据。

这是预期的还是已知的错误？如何在 MRG_MyISAM 表上复制 mysqldump 的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:35:05.480

这应该是可以预料的。MERGE 表只是 MyISAM 表的映射。

您必须转储基础表。

如果你想要某种模拟来 mysqldump 一个 MERGE 表（对于一个名为 mydb.mymergetable 的表，其存储引擎是 Mrg_MyISAM）

```
USE mydb
CREATE TABLE myhardtable LIKE mymergetable;
ALTER TABLE myhardtable ENGINE=MyISAM;
INSERT INTO myhardtable SELECT * FROM mymergetable; 
```

现在，只需这样做：

```
mysqldump -u... -p... mydb myhardtable > /root/MyMergeData.sql 
```

你也可以这样做

```
SELECT * INTO OUTFILE '/root/MyMergeData.sql'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
FROM mydb.myhardtable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:25:14.083

MySQL 列出了 MyISAM 合并表的一些常见问题。如果没有更多代码，我无法确定您的具体问题，但这是一个很好的起点：[http ://dev.mysql.com/doc/refman/5.1/en/merge-table-problems.html](http://dev.mysql.com/doc/refman/5.1/en/merge-table-problems.html)

# ruby-on-rails - 我在哪里放置我的 resque-retry 失败后端代码？

> ID：10128292
> 
> 赞同：5
> 
> 时间：2012-04-12T17:01:30.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, resque, resque-retry

[resque-retry](https://github.com/lantins/resque-retry) gem的README 讨论了在实现时更改失败的后端实现。

> `MultipleWithRetrySuppression`是一个多重失败的后端，带有重试抑制。
> 
> 这是一个使用 Redis 故障后端的示例：
> 
> ```
> require 'resque-retry'
> require 'resque/failure/redis'
> 
> # require your jobs & application code.
> 
> Resque::Failure::MultipleWithRetrySuppression.classes = [Resque::Failure::Redis]
> Resque::Failure.backend = Resque::Failure::MultipleWithRetrySuppression 
> ```
> 
> 如果作业失败，但**可以并且将**重试，则失败详细信息不会记录在 Redis 失败队列中*（通过 resque-web 可见）*。
> 
> 如果作业失败，但**不能或不会**重试，则失败将记录在 Redis 失败队列中，就像正常失败*（不重试）*一样。

我不确定该代码应该放在我的 Rails 应用程序的哪个位置。我是否应该将它放入任何随机初始化程序文件中，例如`config/initializers/resque.rb`？或者我的应用程序中还有其他地方应该去哪里？文档不清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:08:25.627

看起来初始化程序是最好的选择。除非有人提出更好的建议，否则接受此作为最佳答案。

# javascript - 拉斐尔图标大小

> ID：10128294
> 
> 赞同：2
> 
> 时间：2012-04-12T17:01:38.573
> 
> 标签：javascript, raphael, graphael

我的网站上有几个 Raphael 图标，如下所示：

```
var emailIcon = Raphael("js-email-icon");
    emailIcon.path('M28.516,7.167H3.482l12.517,7.108L28.516,7.167zM16.74,17.303C16.51,17.434,16.255,17.5,16,17.5s-0.51-0.066-0.741-0.197L2.5,10.06v14.773h27V10.06L16.74,17.303z').attr({fill: '#ff00ff', stroke: "none"}); 
```

如何让图标变大？

谢谢！

mb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T00:04:31.050

使用变换方法：[http ://raphaeljs.com/reference.html#Element.transform](http://raphaeljs.com/reference.html#Element.transform)

例如，要将其设为正常大小的 150%：

```
var emailIcon = Raphael("js-email-icon");
var iconPath = emailIcon.path('M28.516,7.167H3.482l12.517,7.108L28.516,7.167zM16.74,17.303C16.51,17.434,16.255,17.5,16,17.5s-0.51-0.066-0.741-0.197L2.5,10.06v14.773h27V10.06L16.74,17.303z').attr({fill: '#ff00ff', stroke: "none"});
iconPath.transform("s1.5"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T02:16:53.330

如果您有一个实际的 svg 文件可供使用，我建议的最简单方法是使用 Adob​​e Illustrator 或[Inkscape](http://inkscape.org)等程序来修改图标的大小。完成后，只需提取路径信息，就会出现一个更大的图标。

这些程序将为您完成所有杂乱的路径计算，并让您在应用代码之前查看它的外观。但是，在使用 Inkscape 时要小心，因为有时它不会修改路径，只是向对象添加一个变换，这对我们 Raphael 用户没有任何作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:05:39.387

编辑：好的，意识到你可能没有使用 .css() 来自的 jQuery。

我建议使用 jquery 并尝试：

```
$(emailIcon.path('M28.516,7.167H3.482l12.517,7.108L28.516,7.167zM16.74,17.303C16.51,17.434,16.255,17.5,16,17.5s-0.51-0.066-0.741-0.197L2.5,10.06v14.773h27V10.06L16.74,17.303z').attr({fill: '#ff00ff', stroke: "none"}) ).css({width: "500px", height: "500px"}); 
```

我只是把一切都包装成`attr`这样`$(...).css({width:'500px',height:'500px'})`

或者

```
$(emailIcon.path(...).attr({fill...stroke...})).css({width:'500px',height:'500px'}); 
```

如果你不想使用 jQuery，那么只要 Rapheal .attr() 函数返回一个 DOM ELEMENT，你可以这样做：

```
var tmp = emailIcon.path(...).attr({fill...stroke...});
tmp.style.width= '500px';
tmp.style.height= '500px'; 
```

# c - 2way缓存关联？我从内存中读取多少字节？

> ID：10128295
> 
> 赞同：1
> 
> 时间：2012-04-12T17:01:49.070
> 
> 标签：c, caching, memory, memory-management

给定代码：

```
void transpose2(array dst,array src)
{
  int i,j;
  for ( i=0; i<4; i++) {
    for ( j=0; j<4; j++) {
     dst[i][j] = src[j][i];
    }
  }
} 
```

假设：

*   int 是 4 个字节

*   `src`数组从地址开始`0`，`dst`从地址开始`64`

*   缓存的大小是`32`字节，一开始缓存是空的

假设我有一个`32`字节大小的缓存，在直写、写入分配和 LRU 下，使用 2way 集关联方法，其中每个块都是`8`字节：

当我从内存中读取时，我每次从内存中获取多少字节？

是吗`4`？`8`

我很确定的是缓存有 4 个单元或行，每行有 8 个字节。这是正确的吗？

**2way**部分有点令人困惑，我认为每种方式都有`4`字节，对吧？如果我错了，请纠正我...

然后当我从内存中“取”一个块时，我只是不完全理解有多少字节！！？

提前致谢

罗恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:04:51.050

缓存方式（也称为关联性）不会影响传输发生时传输的数据量；块大小**是**块大小。

关联性只是衡量缓存中有多少个可能的位置可以存储来自内存的给定块。所以：

*   对于直接映射缓存（关联性=1），内存地址`xyz`将*始终*映射到相同的缓存位置。
*   对于双向缓存，`xyz`可以映射到两个缓存位置中的任何一个。
*   对于全关联缓存，`xyz`可以映射到缓存中的*任何位置*。

我真的没有在这里说任何没有在例如维基百科上解释过的东西：[http](http://en.wikipedia.org/wiki/CPU_cache#Associativity) ://en.wikipedia.org/wiki/CPU_cache#Associativity 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:04:22.440

当 CPU 从不在高速缓存中的块中引用（加载或存储）一个字时，该块被请求到内存中。因此，使用提供的参数，每次缓存未命中都涉及从内存到缓存的 8 字节传输。

与术语相关，您的缓存有 4 个条目、容器或缓存行（32 字节/8 字节/块）。由于它是 2 路关联的，因此有 2 组 2 个条目。偶数地址的块映射到集合 0，而奇数地址的块映射到集合 1。

块地址是通过移动字地址 log2(block_size) 位（缓存中的 3 位）获得的。例如：

*   地址 64 属于块 8
*   地址 72 属于块 9

# objective-c - Objective-C：获取触发 UIEvent 的 UITouch

> ID：10128300
> 
> 赞同：3
> 
> 时间：2012-04-12T17:02:07.773
> 
> 标签：objective-c, ios, uiview, multi-touch, uitouch

我在文档中找不到任何地方。当在我的 UIView 子类上调用此消息时：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

如何获得调用此消息的联系方式？

在 NSSet 和 UIEvent 上，我只能获得一组触摸，但没有唯一标识符，因此我可以确定哪个触摸触发了消息。

**PS：**为什么他们会发送所有触摸的NSSet，以及从那里获得相同集合的可能性`[[event allTouches] anyObject]`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T17:28:30.623

您无法触摸，因为有时多次触摸会触发消息*。*如果用户在屏幕上有两根手指，并且都移动了，那么您可以获得一个`touchesMoved:withEvent:`同时更新两个触摸的单指。

您需要处理`touches`集合中的每一次触摸。如果您为视图禁用了多点触控，这样您就知道集合中只会有一次触控，您可以使用`touches.anyObject`来获取触控。但如果您没有禁用多点触控，则需要循环遍历集合中的所有触控。

该消息包括一组单独的触摸，`event.allTouches`因为用户可能有三个手指向下但只移动其中一个或两个。该`touches`集合仅包含移动的触摸，但`event.allTouches`包含用户的所有触摸，包括自上一条消息以来未移动的触摸。

触摸的唯一标识符是`UITouch`对象本身。当用户将手指放在屏幕上时，iOS 会创建一个`UITouch`对象。当用户移动他的手指时，它会更新该对象。因此，您可以将`UITouch`对象用作 中的键`NSDictionary`，或者您可以使用 . 将自己的对象附加到它`objc_setAssociatedObject`。

# wpf - 指定 ImageSource 时 MultiBinding 与 Binding 的特殊行为

> ID：10128307
> 
> 赞同：3
> 
> 时间：2012-04-12T17:02:35.953
> 
> 标签：wpf, binding, multibinding, imagesource

使用转换器绑定到 的`Source`属性时，我遇到了一种特殊行为。`Image`

看来，如果我使用一个简单`Binding`的 a`IValueConverter`返回与图像的相对路径相对应的字符串，则一切正常并显示图像。

另一方面，如果我将 a`MultiBinding`与 a`IMultiValueConverter`返回相同的字符串一起使用，则绑定不起作用，并且此错误消息将显示在 VS2010 输出窗口中：

> System.Windows.Data 错误：5：BindingExpression 生成的值对目标属性无效。；Value='' MultiBindingExpression:目标元素是'Image' (Name=''); 目标属性是“源”（类型“ImageSource”）

我发现要让它起作用，我不能返回一个简单的字符串（甚至不能返回一个`Uri`）。相反，我必须在我的转换器中创建一个 ImageSource （`BitmapImage`实际上是 a ）并返回它。

你知道为什么会发生这种奇怪的行为吗？`Binding`这是and之间的已知区别`MultiBinding`，还是一个错误？

我发现[了另一个可能与此相关的 stackoverflow 主题](https://stackoverflow.com/questions/8909511/binding-vs-multibinding-different-results)，Alvin 在其中发表了关于解决绑定时间的评论：

> 我认为 MultiBinding 是在 TextBlock 渲染之后进行的，并且在 TextBlok 渲染之前进行（单个）Binding – Avlin

为了说明这个问题，我写了一个可以[下载和测试](http://dl.dropbox.com/u/61987557/MultiBindingOnImageSource.zip)的小项目。

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:06:09.880

我会假设这是设计使然，但为了确保您需要询问其中一位开发人员，不同之处在于没有将[类型转换](http://msdn.microsoft.com/en-us/library/cc645047.aspx)应用于返回的值`MultiBindings`，人们经常会遇到这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-18T09:16:20.643

我的工作如下（简化代码！）

我的 XAML：

```
<MediaElement LoadedBehavior="Play" Stretch="UniformToFill">
    <MediaElement.Source>
        <MultiBinding Converter="{StaticResource ActionMedia_Converter}"> 
            <Binding Path="HomeW_Background_FileName" />
            <Binding Path="HomeW_Background_FileType" />
        </MultiBinding>
    </MediaElement.Source>
</MediaElement>
```

我的转换器：

```
Public Class ActionMedia_Converter
	Implements IMultiValueConverter

	Public Function Convert(values As Object(), TargetType As Type, parameter As Object, culture As CultureInfo) As Object Implements IMultiValueConverter.Convert
		Dim ImageSource As String

		ImageSource = String.Concat(values(0), ".", values(1))

		Dim MyUri = New System.Uri(ImageSource)

		Return MyUri

	End Function

	Public Function ConvertBack(values As Object, targetTypes As Type(), parameter As Object, culture As CultureInfo) As Object() Implements IMultiValueConverter.ConvertBack
		Return Binding.DoNothing
	End Function

End Class
```

# java - 在 java 中使用 GUI 进行控制台输入和输出

> ID：10128309
> 
> 赞同：2
> 
> 时间：2012-04-12T17:02:58.480
> 
> 标签：java, user-interface, console-application

如何将控制台信息输出到 GUI？我有一个具有 GUI 的应用程序，直到我让用户在类似于 linux 中的 CLI 的目录中移动。那么我如何将控制台的输出和输入移植到 GUI 中。JPanel 是要走的路还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:55:20.390

从技术上讲，如果您愿意，您可以使用它`JTextArea`来完成此操作。`append()`您可以使用 JTextArea 的方法来编写您通常会在控制台上编写的内容，而不是将您通常编写的内容写入控制台，例如一些信息告诉程序员某事成功或不成功（当然是为了排除故障） 。例子：

```
javax.swing.JTextArea guiConsole = new JTextArea(10,10); //Just so you know what this is
System.out.println("This sentence is printed to the real console.");
guiConsole.append("But this one is printed to the GUI Console we made."); 
```

[有关详细信息，请参阅 API](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T02:37:40.067

我知道这是 2 年前的事了，但是对于任何其他试图完成同样事情的人来说，有一个 Java 文件可以将输入和输出信息的功能添加到 GUI 控制台，可以在[这里](http://crownlessking.com/projects/gui_console_input_output_in_java_jtextarea)找到。

# python - 生成 Iron Python UnitTest 结果

> ID：10128314
> 
> 赞同：0
> 
> 时间：2012-04-12T17:03:12.647
> 
> 标签：python, unit-testing, ironpython, cruisecontrol.net

我目前有几个 Iron python 模块，每个模块都有一个实现 unittest.TestCase 的类。

我正在通过 .bat 文件运行测试类，如下所示：

```
@set IRONPYTHONPATH=..\TestProject\bin;
@ipy -m unittest -v TestClass1 TestClass2 
```

这些行运行 TestClass1 和 TestClass2 及其所有内部测试，结果输出到控制台。

我现在需要的是能够将此测试模块集成到 Cruise Control 流程（调用 MSBuild）中。如果测试失败，Cruise Control 需要能够读取错误，所以我想也许我可以以某种方式生成一个带有结果的 xml 文件。所以我的问题是：

1.  有没有办法从 IronPython 测试中生成结果文件，以便稍后将其输入 Cruise Control？
2.  从命令行调用测试类是一个糟糕的设计（也就是它会限制 IronPython 的结果报告功能吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:41:36.543

您可以将控制台的输出设置为如下文件：

```
 System.IO.FileStream fs = new System.IO.FileStream("c:\\temp\\ipy.log", System.IO.FileMode.Create);
       engine.Runtime.IO.SetOutput(fs, Encoding.ASCII); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:43:53.210

[unittest-xml-reporting](https://github.com/danielfm/unittest-xml-reporting)应该给你你想要的。不过，我不知道它是否适用于 IronPython。

# user-interface - 非联系人用户的 Lync 可用性

> ID：10128315
> 
> 赞同：2
> 
> 时间：2012-04-12T17:03:17.653
> 
> 标签：user-interface, contact, lync, suppression

我正在编写启用 UI 抑制的自定义 Lync 客户端。客户需要拥有的组件之一是员工搜索表单，该表单将用于添加联系人和邀请员工进行对话。此表单将在 DataGridView 中加载员工并显示他们的可用性（在线、离线、空闲等）。

然而，问题是可用性似乎只对我已经联系过的用户正确显示。其他所有人都将其 ContactAvailability 设置为 None。

是否可以获得不是联系人的 Lync 用户的可用性？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:08:36.187

我找到了解决方案。我需要使用 ContactSubscription 类：http: [//msdn.microsoft.com/en-us/library/hh380135.aspx](http://msdn.microsoft.com/en-us/library/hh380135.aspx)

这个链接也被证明有帮助：[http ://rcosic.wordpress.com/2011/11/02/starting-with-lync-clients-api/](http://rcosic.wordpress.com/2011/11/02/starting-with-lync-clients-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:30:10.230

查询存在：

```
 _appEndPoint.PresenceServices.BeginPresenceQuery(new List<string>() {  "UriToQuery"  }, new string[] { "state" }, EndgetNotification, null, null);

    protected void EndgetNotification(object sender, RemotePresentitiesNotificationEventArgs e)
    {

       if (e.Notifications.Count > 0)
            {
              string strPresence =e.Notifications[0].AggregatedPresenceState.Availability.ToString();
             }
     } 
```

# c# - 如何在浏览器中打开Word文档？

> ID：10128323
> 
> 赞同：0
> 
> 时间：2012-04-12T17:03:49.193
> 
> 标签：c#, asp.net

我想在浏览器中打开二进制 Word 文档文件，而不是从物理路径。使用下面给出的代码，我可以在浏览器中打开 PDF 文件，但不能打开其他文件。

代码：

```
byte[] obFile = null;
obFile = (byte[])fds.Tables[0].Rows[0]["File"]; 
String aFileName = "abc"; 
Response.Expires = 0; 
Response.ClearContent(); 
Response.Buffer = true; 
Response.BufferOutput = true; 
Response.ContentType = "application/msword;name=abc.docx"; 
Response.AddHeader("content-transfer-encoding", "binary"); 
Response.AddHeader("content-length", obFile.Length.ToString()); 
Response.AddHeader("Content-Disposition", "inline; filename=abc.docx"; 
Response.CacheControl = "public"; 
Response.ContentEncoding = System.Text.Encoding.GetEncoding(1251); 
Response.OutputStream.Write(obFile, 0, obFile.Length); 
Response.End(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:10:08.660

Word 的默认行为是在浏览器窗口之外打开文档。这是客户端设置，不能从服务器端代码更改。

查看[如何配置 Internet Explorer 以在适当的 Office 程序中打开 Office 文档，而不是在](http://support.microsoft.com/?scid=kb;en-us;162059)支持站点上的 Internet Explorer 如何重新配置**​​您的**计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:37:30.783

您可以使用 Flash/ Silverlight 库来显示文档。Microsoft 也有 Office Web Apps（需要许可证），可以在浏览器上显示和编辑 Office 文档

# php - 打开一个外部 URL 并继续我自己的网页

> ID：10128326
> 
> 赞同：0
> 
> 时间：2012-04-12T17:03:57.357
> 
> 标签：php, javascript, url

以下是我用于通过外部站点发送 SMS 的 URL 示例：

[http://bulksms.poweredsms.com/send.php?usr=rajdeeps&pwd=pass123&ph=xxxxxxxxxxx&sndr=textid&text=hi](http://bulksms.poweredsms.com/send.php?usr=rajdeeps&pwd=pass123&ph=xxxxxxxxxxx&sndr=textid&text=hi)

但是，如果我将用户重定向到此 URL，他们将不会被重定向回我的网站。但是我有代码要执行/页面来显示发送消息。

如何加载 URL 以发送消息而不会失去对向用户显示的内容的控制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:11:52.757

您将希望在服务器端执行此操作，例如使用[cURL](http://www.php.net/manual/en/book.curl.php)。

```
 // create curl resource 
    $ch = curl_init(); 

    // set url 
    curl_setopt($ch, CURLOPT_URL, "http://bulksms.poweredsms.com/send.php?usr=rajdeeps&pwd=pass123&ph=xxxxxxxxxxx&sndr=textid&text=hi"); 

    //return the transfer as a string 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

    // $output contains the output string 
    $output = curl_exec($ch); 

    // close curl resource to free up system resources 
    curl_close($ch);

    // $output now contains the response from poweredsms.com 
```

# jquery - 将 css 转换为 jquery

> ID：10128331
> 
> 赞同：0
> 
> 时间：2012-04-12T17:04:21.163
> 
> 标签：jquery, css

我有这个CSS：

```
@media only screen and (max-height: 620px) {
#howto img {
    margin-left:150px;
}
.boilerplate {
    text-align:right;
}
.footer .boilerplate .links {
    float:right;
}
.footer {
    text-align:right !important;
} 
```

}

我想用 jQuery 做这个 css。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:10:45.913

试试这个：

```
$("document").ready(function(){  
    if ($(window).width() <= 620) {
      $("#howto img").css("margin-left", "150");
      $(".boilerplate").css("text-align", "right");
      $(".footer .boilerplate .links").css("float", "right");
      $(".footer").css("text-align", "right");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:08:49.710

例如

```
$("document").ready(function(){
  $(".boilerplate").css("text-align","right");
}); 
```

但是您必须在 jquery 中制作每种样式。另一种可能性是使样式完全由数据库驱动并循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:21:13.053

```
$(window).resize(function(){  
    if ($(window).width() <= 620) {
      $("#howto img").css("margin-left", "150");
      $(".boilerplate").css("text-align", "right");
      $(".footer .boilerplate .links").css("float", "right");
      $(".footer").css("text-align", "right");
    }else{    /*Asuming you didn't have any inline style before*/
         $('#howto img,.boilerplate,.footer,.footer .boilerplate .links').removeAttr('style'); 
         /*To restore de original styles*/
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-29T06:07:05.850

你试过[豆汤](http://www.beansoup.de/csstoscript.php)吗？他们有一个不错的 CSS 到 jQuery 转换器。

有时，转换存在一些问题，但大多数都很好。

# javascript - CRM 2011 Outlook 客户端中的随机 JavaScript 错误

> ID：10128333
> 
> 赞同：4
> 
> 时间：2012-04-12T17:04:30.290
> 
> 标签：javascript, dynamics-crm-2011

我们收到了一些仅在 Outlook 客户端中发生的 JavaScript 错误。它们是零星的，难以复制。它们往往来自订购单。示例包括：

*   “无法从已释放的脚本中执行代码...”来自订单上的地址查找
*   来自“_static/_controls/ribbon/ribbon.js”的“this.$B_1' is null or not an object”（试图运行报告）

有没有人看到这些问题或有解决问题的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:01:28.597

这与您的 JavaScript 有关。我主要在升级中看到了这一点。不幸的是，解决问题很痛苦。如果您使用 setTimout，请先查看该代码。

# c++ - 包含来自另一个目录的标头时，Visual Studio 链接错误

> ID：10128337
> 
> 赞同：4
> 
> 时间：2012-04-12T17:04:42.193
> 
> 标签：c++, visual-studio, linker

简短的问题是：**如何使用 Visual Studio 创建/编译/运行在不同目录中具有源代码的项目。**

以下是具体细节：

我在一个目录中有一个类定义文件 (.hpp) 和实现文件 (.cpp)，在另一个目录中有一个 main.cpp 文件。在 Visual Studio 2008 中，我创建了一个新项目并将 main.cpp 放入该项目中。我将类文件目录添加到附加包含目录中（右键单击项目 -> 项目属性 -> 配置属性 - C/C++ - 常规 -> 附加包含目录 = C:\Test\cpp）。

当我这样做时，智能感知在编辑 main.cpp 时工作正常。当我构建项目时，它编译得很好，但我得到了链接错误，例如：

> 错误 LNK2019：函数 _main 中引用的未解析的外部符号“public：int __thiscall Test::add(int)”(?add@Test@@QAEHH@Z)。

据我所知，Visual Studio 实际上并没有编译 Test.cpp（我没有看到任何为它制作的 .obj 文件）。在编译/构建 main.cpp 之前，我曾尝试将其分开编译，但这没有任何区别。有没有解决的办法？当我在网上搜索答案时，我看到很多人忘记包含链接器的库，但我没有处理任何库。

我还通过将 Test.hpp 和 Test.cpp 移动到与 main.cpp 相同的目录来验证此代码可以正确编译和运行 - 没有任何问题。我会坚持这种设置，但我需要能够为我正在处理的项目使用来自不同目录的源代码。

这是3个文件：

1.  C:\Test\cpp\Test.hpp

    ```
    #ifndef TEST_H
    #define TEST_H

    class Test
    {
    private:
      int mynum;

    public:
      Test();
      int add(int num);

    };
    #endif //TEST_H 
    ```

2.  C:\Test\cpp\Test.cpp

    ```
    #include "Test.hpp"

    Test::Test()
    {
      mynum = 0;
    }

    int Test::add(int num)
    {
      return mynum += num;
    } 
    ```

3.  C:\Visual Studio 项目\MyProject\main.cpp

    ```
    #include <iostream>
    #include <Test\Test\Test.hpp>

    int main(int argc, char *argv[])
    {
      Test test;
      std::cout << "Add 5 = " << test.add(5) << std::endl;
      return 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T17:17:11.803

底线是你必须编译 Test.cpp 并以某种方式链接它。两种选择：

1.  将 Test.cpp 添加到您的项目中
2.  创建一个库项目，比如 TestLib。将 Test.cpp 添加到该项目并编译它。然后将您的主项目与 TestLib 链接。

在第二种情况下，您可以在 VisualStudio 中拥有依赖项目。这样它将正确地拉出正确的调试/发布/等。构建主项目时的 lib 版本。它还将从正确的文件夹中获取它。例如，无需手动弄乱链接器设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:07:22.050

添加`Test.h`和`Test.cpp`到项目（你应该能够从资源管理器中拖动文件）。

您还需要指定附加的包含目录，但听起来您已经完成了排序。

# php - 如何使用 Zend_Gdata 获取 Google 日历活动开始时间？

> ID：10128343
> 
> 赞同：0
> 
> 时间：2012-04-12T17:04:57.523
> 
> 标签：php, zend-framework, calendar, gdata

目前我正在做一个项目，我需要使用 API 访问谷歌日历数据 - 一切正常，但我无法获取事件开始时间/结束时间 - 最重要的信息。

我正在使用 Zend 框架和 Zend_Gdata 库，不幸的是 zend 的文档并不详细

如何获取所需的事件数据？或者也许我应该使用另一个库？

这是我获取事件提要的功能：

```
public function getEvents($future_only = TRUE,$force_refresh = FALSE) {

    if (($this->events != NULL) && $force_refresh == FALSE) {
        return $this->events;
    } else {
        if ($this->getService() != NULL) {
            $service = $this->getService();
            try {

                $query = $service->newEventQuery($this->url);
                $query->setUser(null);
                $query->setProjection(null);
                $query->setVisibility(null);
                $query->setOrderby('starttime');
                if ($future_only) {
                    $query->setFutureevents('true');
                } else {
                    $query->setFutureevents('false');
                }

                $event_feed = $service->getCalendarEventFeed($query);

                $this->events = $event_feed;

                return $event_feed;
            } catch (Exception $exc) {
                .
                .
                .
                return NULL;
            }
        } else {
            return NULL;
               }
           }
        } 
```

以及我试图获取事件信息的示例测试代码：

```
 $gcalendar = new  Common_Model_GoogleCalendar();

             $events = $gcalendar->getEvents();

            if($events){

            foreach ($events as $evt) {
                echo $evt->title.'<br />';
                echo $evt->id.'<br />';
                echo $evt->published.'<br />';
                Zend_Debug::dump($evt->getWhen());       //returns empty array

            }
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T10:59:51.510

不确定您现在是否已经对此进行了排序，但除了 @Ashley 的贡献之外，这是如何开始`getWhen()`工作的：

```
$when = $evt->getWhen();
echo $when[0]->getStartTime();
echo $when[0]->getEndTime(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:22:36.927

您的变量`$events`将是 的实例`Zend_Gdata_Calendar_EventEntry`，它继承`Zend_Gdata_Kind_EventEntry`了具有功能的`getWhen`。

IE：

`$when = $evt->getWhen();`

[http://framework.zend.com/manual/en/zend.gdata.calendar.html](http://framework.zend.com/manual/en/zend.gdata.calendar.html)

# c# - 如何同步任务？

> ID：10128345
> 
> 赞同：21
> 
> 时间：2012-04-12T17:05:05.187
> 
> 标签：c#, asynchronous, task, microsoft-metro, windows-runtime

假设我有一个保存到文件的异步方法：

```
async Task SaveToFileAsync()
{
   var file = await folder.GetFileAsync ( ...)
   var stream = file.OpenFileAsync(...)
   ///etc

} 
```

现在想象一下 SaveToFileAsync 被同时调用了两次。这是一个问题，因为您不能同时在同一个文件上写入

如果这是常规方法， lock() 将解决此问题：

```
void SaveToFile()
{
   lock(something)
   {
      /// code here
   }
} 
```

但是，异步方法中不允许使用锁定。

当然，可以调用 Monitor.Enter() 或使用互斥体，但这些对象使用线程，而不是任务。因此，它们不是答案。

那么既然 lock() 不是一个选项，那么如何同步多个任务呢？特别是，我应该编写什么代码来确保一次只调用一次“SaveToFileAsync”？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-12T17:10:11.543

对于异步互斥机制，请查看

    [构建异步协调原语，第 6 部分：AsyncLock](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266988.aspx)

您可以使用以下`AsyncLock`类：

```
private readonly AsyncLock m_lock = new AsyncLock();

async Task SaveToFileAsync()
{
    using (await m_lock.LockAsync()) 
    { 
        var file = await folder.GetFileAsync(...);
        var stream = await file.OpenFileAsync(...);
        // etc
    }
} 
```

# javascript - 杜威十进分类法的三重下拉菜单

> ID：10128349
> 
> 赞同：1
> 
> 时间：2012-04-12T17:05:32.337
> 
> 标签：javascript, html, document-classification

[杜威十进分类](http://en.wikipedia.org/wiki/Dewey_Decimal_Classification)法 (DDC) 是一种对书籍和文本进行分类的非常有用的方法。所以我试图找到一个实现它的三重下拉菜单。我用许多不同的方式搜索了它，但找不到任何东西。

我很久以前就看到了[双下拉菜单](http://www.trans4mind.com/personal_development/JavaScript/Doublemenu.htm)和最近的[三重下拉菜单](http://www.trans4mind.com/personal_development/index.html)，所以我可以自己实现这个。认为我的幸运猜测是，对 javascript 不太了解，我可以花费很多时间来实现它。

因此，我的问题。**你知道我在哪里可以找到一个已经为实现 DDC 的下拉菜单制作的 javascript 代码吗？**此外，当您选择所有字段时，它不需要重定向到另一个页面，因为它是用于需要其他字段的提交页面。这可能是被黑客入侵的想法。

如果您发布的不是 DDC，而是使用[通用十进制分类](http://en.wikipedia.org/wiki/Universal_Decimal_Classification)的一些代码，这也是有效的。只是我更喜欢DDC。

如果我在任何地方都找不到它，我会尝试自己做并发布代码。

它应该以这种方式工作：第一个下拉菜单有以下选项：

*   计算机科学、信息和一般工作
*   哲学和心理学
*   宗教
*   社会科学
*   语言
*   科学（包括数学）
*   技术与应用科学
*   艺术和娱乐
*   文学
*   历史和地理

如果您选择了“科学”，那么第二个下拉菜单将获取这些值：

*   科学
*   数学
*   天文学和相关科学
*   物理
*   化学与相关科学
*   地球科学
*   古生物学；古动物学
*   生命科学
*   植物
*   动物科学/动物

假设现在您选择了“物理”，那么第三个下拉菜单将是这样的：

*   经典力学；固体力学
*   流体力学; 液体力学
*   气体力学
*   声音和相关振动
*   光和超光现象
*   热
*   电力和电子
*   磁性
*   现代物理学

如果您选择了“Heat”，那么下拉菜单的值将是：opt1=5, opt2=3, opt3=6，因为“Heat”对应于 536。

[您可以在Wikipedia](http://en.wikipedia.org/wiki/List_of_Dewey_Decimal_classes)中查看完整结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:10:39.407

非 AJAXy 方法是将所有内容加载到同一页面上。菜单不需要 AJAX，只有非常简单的 JavaScript。该页面会大得多，但不会令人望而却步，因此我认为不会，相关代码可以放入单独的 .js 文件中，然后可以在客户端缓存，并且只需要下载一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:04:54.117

进行搜索时，我发现[了这个页面](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/188368/dynamically-populating-drop-down-values)，其中一个人的问题基本相同。有一个名为[essential](http://www.daniweb.com/members/383844/essential)的用户的回复。他似乎采用了明显的方法，AJAX，而最初的提问者似乎认为它成功了。

响应如下：

* * *

如果您更喜欢在页面中使用 AJAX，则可以实现这一点。为了获得它的基本知识，这里有一个简单的演示。

这个例子有 2 个单独的 html 文档：main.html 包含整个脚本，request.html 包含另一个选项，将根据请求注入到 main.html。

这是 main.html 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<title>JavaScript Demo</title>
<script type="text/javascript">
// <![CDATA[
/* No editing required -
   For demonstrational purposes only. */

// Declaring variables
var ajax, update, xmlData, getOptions;
var obj, select, option;

// This is a simple prototype that will skip the long declaration of ( element.getElementsByTagName( tagName )[reference] ).
// And now can be defined as element.obj( tagName, reference )
obj = Object.prototype.obj = function( tn, ref ) {
   if (( tn ) && ( typeof ref === "number" ) && ( ref !== null )) {
   return ( this.getElementsByTagName( tn )[ ref ] );
   } else {
   return (  this.getElementsByTagName( tn ));
   } 
};

// This is the function reference which is the one who handle's and process the request sent by the XMLHttpRequest object.

// And considered as the most important part of the whole program. 
getOptions = function() {
select = xmlData.responseXML.obj("select", 0)
option = select.obj("option");
oLen = option.length;
   for ( x = 0; x < oLen; x++ ) { document.obj("select")["lists"].remove( x );
document.obj("select")["lists"].add( new Option( option[x].childNodes[0].nodeValue,  option[x].getAttribute("value") ), x );
   }
};

ajax = function ( url ) {
xmlData = null;
   if ( window.XMLHttpRequest ) {
   xmlData = new XMLHttpRequest();
   } else if ( window.ActiveXObject ) {
      try {
      xmlData = new ActiveXObject("Microsoft.XMLHTTP");
      } catch( e ) {
          xmlData = new ActiveXObject("Msxml2.XMLHTTP");
      }
   }
   if ( xmlData !== null ) {
   xmlData.onreadystatechange = getOptions; 
   xmlData.open("GET", url, true);
   xmlData.send( null );
   } else {
     alert("\nYour browser does not support AJAX Request!"); 
   }
};

update = function( sel ) {
sel = ( document.getElementById ) ? document.getElementById( sel ) : document.all.sel;

index = sel.selectedIndex;

ajax( sel.options[index].value );
return;
}
// ]]>
</script>
</head>
<body>
<div id="content">
<form id="ajaxForm" action="#" onsubmit="return false;">
<div>
<select id="lists" name="lists" size="1" onchange="update( this.id );">
<option value="">Default List</option>
<option value="">Default List</option>
<option value="">Defaut List</option>
<option value="request.html">AJAX Demo - Request Lists!</option>
</select>
</div>
</form>  
</div>
</body>
</html> 
```

这适用于request.html

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Request Page</title>
  </head>
  <body>
    <div id="content">
      <form id="frm" action="*" onsubmit="return false;">
        <div>
          <select id="sel" name="sel" size="1" onchange="ajax.listed(this.id);">
            <option value="">Requested List</option>
            <option value="">Requested List</option>
            <option value="">Requested List</option>
            <option value="main.html">AJAX Demo - Default Page!</option>
          </select>
        </div>
      </form>
    </div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:31:36.257

由于 javascript 的“高级”代码与其他编程语言非常相似，因此花费的时间比预期的要少。在一些 bash 脚本的帮助下，不需要手动执行重复性任务，只需大约 20 小时。我真的不认为在这里粘贴大约 3000 行 javascript 是一个好主意，所以，正如我首先要求的那样，我在这里发布了 html 以及ddc.js 的[这个链接。](http://newfutureuniversity.org/development/ddc/ddc.js)此外，您可以在此处对其进行测试并[在此处](http://newfutureuniversity.org/development/ddc/)查看说明。这两个链接都来自我的页面，其中涉及一些轻量级的 php，我不会发布，因为它不太相关（在注释中的第二个链接中解释）。

html:

```
<script language="JAVASCRIPT" src="ddc.js" type="text/javascript"></script>
<h1>Dewey Decimal Classification</h1><br><br>
    <form style="text-align: center;" onLoad="msDDC()" name="formDDC" method="POST">
        <select name="classesDDC" style="width: 300px; height: 24px; font-size: 14px;" onChange="changeDivisions()">
        <option value="">Select a class</option>
        <option value="0">0\. Computer science, knowledge & systems</option>
        <option value="1">1\. Philosophy and psychology</option>
        <option value="2">2\. Religion</option>
        <option value="3">3\. Social sciences</option>
        <option value="4">4\. Language</option>
        <option value="5">5\. Science</option>
        <option value="6">6\. Technology</option>
        <option value="7">7\. Arts</option>
        <option value="8">8\. Literature</option>
        <option value="9">9\. History, geography & biography</option>
    </select><br><br>
    <select name="divisionsDDC" style="width: 300px; height: 24px; font-size: 14px;" onChange="changeSections()">
        <option value="">Divisions will appear here</option>
    </select><br><br>
    <select name="sectionsDDC" style="width: 300px; height: 24px; font-size: 14px;">
        <option value="">Sections will appear here</option>
    </select><br><br>
    <input type="submit" value="Go!" style="width: 300px; height: 24px; font-size: 14px;">
    </form> 
```

# python - DFS 中（非常慢的）深拷贝的任何替代方法？

> ID：10128351
> 
> 赞同：2
> 
> 时间：2012-04-12T17:05:33.553
> 
> 标签：python, algorithm, deep-copy, depth-first-search

我有一个包含 81 个顶点的漂亮图（一个列表）（每个顶点都是 Vertex 类的一个实例）。每个顶点有 20 个邻居。每个顶点都有许多可能的值（范围从 1 到 9），给定问题的一些初始约束，平均为 4 或 5。我在此图上实现了一个简单的 DFS，它采用可能值较少的节点， foreach 值构建另一个只有一个可能值的“深度复制”图，最后递归地将“深度复制”图再次传递到 DFS。问题在于速度；cProfiling 我的代码我发现我的 Mac 用来解决这个问题的 641 秒中有 635 秒被 copy.deepcopy 使用。有没有解决这个问题的方法？这是我的 DFS：

```
def dfs(graph):
    global initial_time_counter

    if all(len(i.possible_values)==1 for i in graph):
        sys.exit("Done in: %s" % (time.time()-initial_time_counter))

    #find out the non-solved vertex with minimum possible values
    min_vertex=sorted(filter(lambda x: len(x.possible_values)>1,graph),
                      key=lambda x: len(x.possible_values))[0]

    for value in min_vertex.possible_values:

        sorted_graph_copy=sorted(copy.deepcopy(graph), key=lambda x: len(x.possible_values))
        min_vertex_copy=filter(lambda x: len(x.possible_values)>1,sorted_graph_copy)[0]
        sorted_graph_copy.remove(min_vertex_copy)

        if min_vertex_copy.try_value(value): #Can this vertex accept value -> value?
            min_vertex_copy.set_value(value) #Yes, set it.
            sorted_graph_copy.append(min_vertex_copy) #Append it to the graph.
            dfs(sorted_graph_copy) #Run the DFS again.
    return False 
```

PS作为你们中最聪明的人可能已经理解这个问题通常被称为数独。请注意，我不是在寻找特定于数独的答案，而是以抽象的方式分析问题。

**[编辑]**

同样的问题，用顶点的纯字符串表示来解决，需要 < 0.75 秒才能解决。如果将来有人遇到类似问题，我将发布整个代码以供参考：

```
import sys,time

def srange():
    return [[x,y] for x in range(9) for y in range(9)]

def represent_sudoku(sudoku):
    print "\n".join(["|".join([str(elem) for elem in line]) for line in sudoku])

#Hard sudoku
sudoku=[[4, 0, 0, 0, 0, 0, 8, 0, 5], [0, 3, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 7, 0, 0, 0, 0, 0], [0, 2, 0, 0, 0, 0, 0, 6, 0], [0, 0, 0, 0, 8, 0, 4, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 6, 0, 3, 0, 7, 0], [5, 0, 0, 2, 0, 0, 0, 0, 0], [1, 0, 4, 0, 0, 0, 0, 0, 0]]

represent_sudoku(sudoku)

def get_nbs(x,y,sudoku,also_incomplete=False):
    line_nbs=sum([elem for elem in sudoku[y] if ((elem!=[0] and len(elem)==1) or also_incomplete)],[])

    column_nbs=sum([sudoku[xline][x] for xline in range(9) if ((sudoku[xline][x]!=[0] and len(sudoku[xline][x])==1) or also_incomplete)],[])

    area_nbs=[[j for j in i[(x/3)*3:(x/3)*3+3] if ((j!=[0] and len(j)==1) or also_incomplete)] for i in sudoku[(y/3)*3:(y/3)*3+3]]

    area_nbs=sum(sum(area_nbs,[]),[])    

    if not also_incomplete:
        return list(set(line_nbs+column_nbs+area_nbs))

    return line_nbs+column_nbs+area_nbs

for x,y in srange():
    sudoku[y][x]=[sudoku[y][x]]

def base_cleanup(sudoku):
    while 1:
        something_changed=False
        for x,y in srange():
            if sudoku[y][x]==[0] or len(sudoku[y][x])>1:
                possible_values=range(1,10) if sudoku[y][x]==[0] else sudoku[y][x]
                sudoku[y][x]=list(set(possible_values)-set(get_nbs(x,y,sudoku)))
                if sudoku[y][x]==[]:
                    return False
                something_changed=True if possible_values!=sudoku[y][x] else False
            else:
                sudoku[y][x]=sudoku[y][x]
        if not something_changed:
            break
    return sudoku

def dfs(graph):
    global s

    if graph==False:
        return False

    if all(sum([[len(elem)==1 for elem in line] for line in graph],[])):
        represent_sudoku(graph)
        sys.exit("Done in: %s" % (time.time()-s))

    enumerated_filtered_sudoku=filter(lambda x: len(x[1])>1, enumerate(sum(graph,[])))
    sorted_enumerated_sudoku=sorted(enumerated_filtered_sudoku,key=lambda x: len(x[1]))
    min_vertex=sorted_enumerated_sudoku[0]

    possible_values=[value for value in min_vertex[1]]

    for value in possible_values:        
        graph_copy=[[elem for elem in line] for line in graph]

        y,x=elements_position[min_vertex[0]]

        if not any(value==i for i in get_nbs(x,y,graph_copy)):
            graph_copy[y][x]=[value]
            if base_cleanup(graph_copy)!=False:
                graph_copy=base_cleanup(graph_copy)
                if graph_copy:
                    dfs(graph_copy)

    return False

sudoku = base_cleanup(sudoku)

elements_position = {i:srange()[i] for i in range(81)}
s = time.time()

dfs(sudoku) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-01T08:11:45.350

cPickle 比 deepcopy 快：

# Line # Hits Time Per Hit % Time Line Contents

```
15                                           @profile
16                                           def test():
17       100       967139   9671.4     95.0      b = deepcopy(a)
18                                               #c = copy(a)
19                                               #d = ujson.loads(ujson.dumps(a))
20                                               #e = json.loads(json.dumps(a))
21                                               #f = pickle.loads(pickle.dumps(a, -1))
22       100        50422    504.2      5.0      g = cPickle.loads(cPickle.dumps(a, -1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:58:02.580

Deepcopy 可能比简单地复制相同数量的数据要慢*很多，这可能是因为检测循环需要付出所有努力。*如果您以一种避免循环的方式自己复制图形（很容易，因为您知道网络拓扑）而不是委托给 deepcopy，那么它可能会给您带来很大的加速。复制一个非常简单的数据结构元素（使用理解），我得到了 50% 的加速，如果复杂的数据结构能节省更多，我也不会感到惊讶。

当然，如果您可以避免在每个步骤中制作整个状态的完整副本，则可以获得更大的加速。例如，由于您首先搜索深度，您可以切换方法来维护撤消堆栈：只需记录您从中选择的每个选项列表，并在回溯时恢复它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:15:14.223

你需要复制整个图表吗？通常，您只会在搜索的任何步骤中修改其中的一小部分，因此使用不可变数据结构并仅重建所需的数据可能更有效。这不适用于循环，但我怀疑你的图表是一个列表？

我在 clojure 中解决了一个类似的问题，它对不可变结构具有本机支持，并设法以这种方式获得合理的效率。但我不知道任何用于 python 的不可变数据结构库（某处有一个写时复制列表包——这就足够了吗？）

[只是用一个简单的例子来澄清 - 你是对的，元组是不可变的，所以如果你有一个由这样的元组组成的树：`(1, (2, 3), (4, (5, 6)))`那么你可以`(1, (2, 99), (4, (5, 6)))`通过创建两个元组来生成这样的新树 - 你可以复制`(4, (5, 6))`没有做一个深拷贝。clojure 有什么，而我不知道 python 有什么，是遵循相同原则的更复杂的结构（如哈希表）。它使 dfs 变得非常容易，因为您根本不必担心“上游”更改值。]

ps只有通过做你正在做的事情，并看到所涉及的成本，我才理解norvig方法的优雅......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:19:58.640

我并不完全了解数独的细节，但是如果您使用图形的单个副本并为每个节点提供一个包含以下内容的类：

1) 相邻顶点列表 2) 一个“已访问”标志，可用于跟踪已看到和未看到的内容

?

您的深度优先搜索仍然可以是递归的，但您无需打包图形的修改子集，只需将节点标记为“已访问”并继续，直到无处可去。如果您的图表已连接，它似乎应该可以工作......

# php - 共享动态 URL

> ID：10128355
> 
> 赞同：0
> 
> 时间：2012-04-12T17:05:57.930
> 
> 标签：php, facebook, facebook-opengraph

我有一个音乐网站，可以播放来自 youtube、vevo 和其他媒体网站的音乐。问题是，即使我定义 t=`<?php echo $name; ?>`

它将在 sharer.php 链接栏上显示歌曲的名称，facebook 仍然不会呈现正确的标题。

你可以试着看看我想在这里解释什么：

[http://www.soundwavez.net/video/fWNaR-rxAic](http://www.soundwavez.net/video/fWNaR-rxAic)

如果点击分享，在链接栏中会显示歌曲的标题，定义为：t=

但 facebook 不会刮掉实际标题并将其放在共享帖子上。

这就是我所做的： `<meta property="og:title" content="<?php echo $name; ?>" />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:13:48.863

尝试在页眉中添加 Open Graph 数据。 [http://ogp.me/](http://ogp.me/)

这是一个例子：

```
<html prefix="og: http://ogp.me/ns#">
<head>
    ...
    <meta property="og:title" content="SONG_TITLE">
    <meta property="og:type" content="music.song">
    <meta property="og:url" content="PAGE_URL">
    <meta property="og:image" content="ALBUM_COVER">
</head> 
```

# jpa-2.0 - 使用 JPA 进行延迟加载与急切加载

> ID：10128356
> 
> 赞同：4
> 
> 时间：2012-04-12T17:05:58.677
> 
> 标签：jpa-2.0, loading, lazy-evaluation, eager

我正在尝试让一些 JPA 工作。我有一个表，它有另一个表的外键。当我生成 JPA 实体时，我会在这些变量上获得一对多的注释......我还需要做什么才能让所有表回到结果集中？如果我确实调用它。这是我正在尝试做的一个例子。

```
@OneToMany(mappedBy="resourceId")
private List<DistributionLink> distributionLinkCollection; 
```

@OneToMany 注释坐得很漂亮......

我正在考虑取回所有值，我只需要调用调用此表的命名查询吗？

```
qLaunchArr = (QuickLaunch[])emf.createNamedQuery("QuickLaunch.getQuickLaunch").getResultList().toArray(); 
```

我是否认为我还将获得包含所有结果集的 DistributionLinks 数组？现在我知道这与急切加载与延迟加载有关。究竟是什么，我不确定。我知道延迟加载只加载显式调用的@oneToMany 属性（我认为）？我怎样才能取回我需要的所有收藏品。我是否需要遍历结果集并调用命名查询以使用命名查询获取所有结果集？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:35:53.410

当您根据是否仍在事务上下文中选择延迟加载某些内容时，当您使用 getter 获取子集合时，JPA 应该自动为您获取它。因此，如果数据离开具有获取父对象的实体管理器的会话 bean，您将无法自动实例化延迟加载的集合。

如果您选择使用 EAGER 获取策略，则该集合的每个实例都将被预先实例化，并且可以在任何地方使用。

一个很好的折衷方案，可以让您避免限制您的设计决策（但仍然允许您利用延迟加载来避免在每次获取这些记录时加载您不需要的内容）以仅处理获取这些记录的 bean 中的这些集合父实体将是当您提前知道您将需要该集合时，坚持您的查询：

```
JOIN FETCH distributionLinks 
```

# android - Android - 更改 android 操作栏的位置

> ID：10128357
> 
> 赞同：3
> 
> 时间：2012-04-12T17:06:04.750
> 
> 标签：android, android-animation, android-actionbar

我正在尝试构建一个**像 Facebook 和 Path 应用程序这样的滑出式菜单**。我想在操作栏的右端放置一个按钮，该按钮将触发打开和关闭菜单。当菜单滑入以使其可见时，我想将主视图与操作栏一起滑出左侧。

其他一切正常。我使用的开源代码位于 - [https://github.com/gitgrimbo/android-sliding-menu-demo](https://github.com/gitgrimbo/android-sliding-menu-demo)

但我不知道是否也可以将**幻灯片动画应用于操作栏**？如果没有，我相信设计我自己的操作栏并包含在活动布局中是要走的路。我将不胜感激有关此事的任何专家指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:03:36.173

据我所知，这是不可能的。ActionBar 对象不继承自 View，因此您无法获取任何布局参数。我相信它实际上位于提供给您活动的窗口之外。因此，对于您所描述的效果，可能需要自定义操作栏。或者，您可能会考虑在您的活动上覆盖一个透明/半透明的操作栏，当该面板弹出时显示/隐藏（如此[处](http://developer.android.com/guide/topics/ui/actionbar.html#Removing)所述） - 只是一个想法，但最终做您认为为您的应用程序提供最佳 UX 的操作。

# c# - 如何使用 Surface SDK 禁用惯性？

> ID：10128359
> 
> 赞同：0
> 
> 时间：2012-04-12T17:06:09.860
> 
> 标签：c#, wpf, slider, pixelsense

我正在使用 Surface SDK 来支持多点触控。我需要同时移动 2 个滑块...

我创建了一些 SurfaceSlider，效果很好，除了控件在移动后会产生一些惯性......

有没有办法消除惯性？我在网上搜索过，但没有找到任何东西......他们不提供选项或类似的东西......

如果您需要更多信息来解决我的问题，请告诉我...

谢谢

更新：我尝试过像这样制作自己的滑块，但它不起作用......

```
public class WtoSurfaceSlider : SurfaceSlider
{

    #region " Ctors "
    static WtoSurfaceSlider()
    {
        // Override metadata with style defined in themes xaml
        DefaultStyleKeyProperty.OverrideMetadata(typeof(WtoSurfaceSlider), new FrameworkPropertyMetadata(typeof(WtoSurfaceSlider)));
    }

    public WtoSurfaceSlider()
    {
        Name = "New" + GetType().Name;
    }
    #endregion

    #region " Method "

    protected override void OnManipulationDelta(ManipulationDeltaEventArgs e)
    {
        if (e.IsInertial)
        {
            e.Complete();
            e.Handled = true;
        }
    }

    #endregion

} 
```

**编辑**

最后，我通过 Eli Arbel 的评论找到了我的答案。我在资源 xaml 文件中声明了我的 SurfaceSlider，所以我没有 .cs。所以这对我来说很好：

```
public class WtoSurfaceThumb : SurfaceThumb
{

    #region " Ctors "

    static WtoSurfaceThumb()
    {
        // Override metadata with style defined in themes xaml
        DefaultStyleKeyProperty.OverrideMetadata(typeof(WtoSurfaceThumb), new FrameworkPropertyMetadata(typeof(WtoSurfaceThumb)));
    }

    public WtoSurfaceThumb()
    {
        Name = "New" + GetType().Name;

        PreviewFlicked += new FlickEventHandler(WtoSurfaceThumb_PreviewFlicked);
    }

    #endregion

    #region " Method "

    private void WtoSurfaceThumb_PreviewFlicked(object sender, FlickEventArgs e)
    {
        e.Handled = true;
    }

    #endregion

} 
```

我用 WtoSurfaceThumb 替换了我的应用程序中的所有 SurfaceThumb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:15:21.083

您可以使用以下事件：

```
<s:SurfaceSlider s:SurfaceThumb.PreviewFlicked="OnPreviewFlicked" /> 
```

并将其标记为已处理：

```
private void OnPreviewFlicked(object sender, FlickEventArgs e)
{
    e.Handled = true;
} 
```

作为旁注 - 如果您不需要轻弹功能，您可以使用普通滑块。多点触控内置于 WPF 4 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:00:24.160

将处理程序添加到滑块的 OnManipulationDelta 方法...

[如何在 ScatterView 中禁用惯性](https://stackoverflow.com/questions/2978239/how-to-disable-inertia-in-scatterview)

[http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfaceslider.onmanipulationdelta.aspx](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfaceslider.onmanipulationdelta.aspx)

# python - 根据项目条件在两个列表上查找索引

> ID：10128360
> 
> 赞同：7
> 
> 时间：2012-04-12T17:06:18.537
> 
> 标签：python, list, data-structures, indexing

假设我有两个列表。它们是从 -5 到 5 的书籍评级列表。

我想知道 list1 的元素是什么时候，`>= 1`而 list2 的元素是什么时候`== 0`，例如。

```
list1 = [3, 3, 1, 0, 3, 0, 3, 0, 0, -3, 0, 5, 3, 0, 1, 0, 0, 5, 3, 0, 0, 0, 0, 1, 0, 3, 0, 1, 0, 0, 3, 5, 3, 3, 0, 0, 0, 5, 0, 5, 0, 3, 3, 0, -3, 0, 0, 5, 1, 5, 3, 0, 3, 0, 0]
list2 = [5, 0, 0, 0, 0, 0, 5, 0, 0, 1, 0, 5, 3, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 3, 0, 5, 0, 0, 0, 0, 5, 5, 5, 3, 0, 0, 0, 3, 0, 0, 0, 5, 3, 0, 0, 0, 0, 5, 0, 5, 3, 0, 0, 0, 0] 
```

`list1[1] = 3`并且`list2[1] = 0`，我希望能够找到发生这种情况的所有不同索引。

抱歉，如果这令人困惑，但我真的不知道该怎么说。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T17:08:39.270

```
>>> [i for i, v in enumerate(list1) if v>=1 and list2[i]==0]
[1, 2, 4, 14, 18, 27, 39, 48, 52] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T17:12:05.463

另一种变体：

```
>>> [i for i, (l1, l2) in enumerate(zip(list1, list2)) if l1 >= 1 and l2 == 0]
[1, 2, 4, 14, 18, 27, 39, 48, 52] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T17:08:42.607

```
>>>idx_list = [i for i in range(len(list1)) if list1[i] > 1 and list2[i] == 0] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T17:15:38.237

使用 NumPy 数组，这可以通过逻辑索引实现：

```
 import numpy as np
 list1 = np.array([1, -1, 0, 0, 1])
 list2 = np.array([0, 5, 0, 0, 0])

 # Option 1, multiply the logicals together.
 inds = np.where( (list1 >= 1)*(list2 == 0) )[0]

 # Option 2, pure logicals.
 inds = np.where( (list1 >= 1) & (list2 == 0) )[0] 
```

现在`inds[0] = 0`和`inds[1] = 4`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T17:11:34.070

我发现这更具可读性。

```
>>> from itertools import count
>>> [i for i,one,two in zip(count(0), list1, list2) if one >= 1 and two == 0]
[1, 2, 4, 14, 18, 27, 39, 48, 52] 
```

这是[`itertools.count`文档](http://docs.python.org/py3k/library/itertools.html#itertools.count)。

# symfony-sonata - Symfony2 SonataAdmin 错误保存与媒体具有多对多关系的实体。消息：实体未配置为级联持久

> ID：10128361
> 
> 赞同：0
> 
> 时间：2012-04-12T17:06:23.467
> 
> 标签：symfony-sonata

当我尝试保存与 Sonata 的媒体实体的多对多关系链接的实体时，我收到错误：实体未配置为级联持久

我在两个表之间创建了实体类，名为 EntityMedias。

现在我有 Entity -1----N- EntityMedias -N----1- Media

并且注解在EntityMedias中设置了两个多对一关系，一个与Entity相关，一个与Media相关。

如何使用级联 Persist 配置实体？我试图将选项 cascade=persist 添加到列符号中，但它不起作用。

在 EntityAdmin 中，我使用 sonata_type_collection 来显示实体内部的 $entityMedias 关系。

如果我不向新实体添加任何媒体，一切正常。

任何帮助将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T05:36:53.610

You have to observe the syntax for Doctrine to actually pick this up. If you have

```
/**
 * @ORM\ManyToMany(targetEntity="Entity", mappedBy="medias") 
 */
protected $medias; 
```

you would have to turn this into that:

```
/**
 * @ORM\ManyToMany(targetEntity="Entity", mappedBy="medias", cascade={"persist"}) 
 */
protected $medias; 
```

I took this from the relevant documentation [here](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#owning-side-and-inverse-side "Association Mapping - Doctrine 2.0 documentation") and [here](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations "Working with associations - Doctrine 2.0 documentation").

# jquery - 是否有一个 jQuery 事件可以触发 *after* 锚点单击完成？

> ID：10128365
> 
> 赞同：1
> 
> 时间：2012-04-12T17:06:38.013
> 
> 标签：jquery, events

这是给你的！

是否有某种 jQuery 事件会*在*锚点单击事件完成后而不是之前触发？

我希望用户单击`<a href="/someurl" target="_blank">link</a>`然后相应地打开新选项卡，然后在当前页面（不是新选项卡）上，在新选项卡打开后，重定向到另一个页面。所以我一直在寻找一个可以做到这一点的活动。

然而，就目前而言，该事件似乎发生在锚标签点击完成其业务之前，但是在那个阶段重定向会中断锚点击。

注意：我在新页面的锚点单击浏览器操作上使用“_blank”的原因是，浏览器弹出窗口阻止程序不会像您通过 javascript 调用此类操作时那样妨碍它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:12:45.653

只需添加一个`click`处理程序和`return true;`. 这不会阻止浏览器处理实际点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:11:31.080

当您让`click`事件调用一个方法时会发生什么，该方法又`setTimeout`使用委托调用该方法以更改`document.location`?

# linux - 共享对象库和 MPI

> ID：10128366
> 
> 赞同：0
> 
> 时间：2012-04-12T17:06:45.310
> 
> 标签：linux, shared-libraries, mpi, dlopen

我正在开发一个使用 MPI 创建并行进程的项目，每个进程都使用 dlopen() 加载已构建为共享对象库的模块。我正在编写的模块之一使用 3rd 方库 (HDF)。当我运行程序时，dlopen 抛出错误：dlopen failed: /home/jwomble/QTProjects/Sur​​rogateModule/libsurrogate.so: undefined symbol: H5T_NATIVE_INT32_g

未定义的符号在 HDF 库中。如何从 HDF 库中加载符号？

目前，我的 make 文件如下所示：

```
CC        = mpicc

INCDIR    = -I /home/jwomble/QTProjects/STARExecutive/src/star_comm \
        -I /home/jwomble/QTProjects/STARExecutive/src/executive \
        -I /home/jwomble/QTProjects/Star \
    -I ./phdf/include

CFLAGS    = -Wall -rdynamic -g -fPIC $(INCDIR)

all: libsurrogate.so

libsurrogate.so:    SurrogateModule.o
    $(CC) -shared --export-dynamic -o $@ $<

SurrogateModule.o:  SurrogateModule.c
    $(CC) $(CFLAGS) -lhdf5 -c $< 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:11:15.307

您实际上并没有链接到 hdf5。`-l`与 .一起使用时，标志是无用的`-c`。

移动`-lhdf5`到 libsurrogate.so 的链接应该可以解决问题。

# c# - 如何在图片框中获取屏幕的位置

> ID：10128369
> 
> 赞同：0
> 
> 时间：2012-04-12T17:06:53.600
> 
> 标签：c#, winforms, picturebox

我在运行时复制图片框时遇到问题，需要屏幕相对于图片框的当前位置

在这行代码中，图片框的位置，但我需要相对于屏幕的位置。我们有什么办法吗？

```
// gfxScreenshot.CopyFromScreen(pictureBox1.Bounds.X, pictureBox1.Bounds.Y, 0, 0, pictureBox1.Bounds.Size, CopyPixelOperation.SourceCopy);

 if (saveScreenshot.ShowDialog() == DialogResult.OK)
    {

       bmpScreenshot = new Bitmap(pictureBox1.Bounds.Width, pictureBox1.Bounds.Height, PixelFormat.Format32bppArgb);

       gfxScreenshot = Graphics.FromImage(bmpScreenshot);

       gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);

       bmpScreenshot.Save(saveScreenshot.FileName, ImageFormat.Png);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:21:58.543

要获取图片框本身位置的屏幕坐标，请使用：

```
var screenPosition = form.PointToScreen(pictureBox1.Location); 
```

获取图片框内某个点的屏幕坐标：

```
var screenPosition = pictureBox1.PointToScreen(new Point(10, 10)); 
```

这将为您提供图片框中位置 (10, 10) 的屏幕坐标。

# objective-c - 一个窗口能否以模态方式呈现（作为它自己的窗口，而不是作为一张纸）仅用于另一个窗口？

> ID：10128370
> 
> 赞同：0
> 
> 时间：2012-04-12T17:06:54.213
> 
> 标签：objective-c, cocoa

在 Cocoa 中，是否可以仅相对于另一个窗口以模态方式将窗口呈现**为窗口**（*而不是工作表）？*特别是，我想提出一个警报，以防止用户仅与它通知用户的窗口进行交互（当然，直到用户已经处理--关闭--警报）。虽然阻止用户与调用中指定的窗口进行交互以呈现警报，但她能够继续与其他窗口进行交互。我要重申：在这种情况下，将警报显示为表格不是可接受的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:39:12.880

表格是使一个窗口模式相对于另一个窗口模式的标准方法——尤其是对于警报——因此 Apple 没有提供方便的 API 来以其他方式执行此操作。问你自己：

*   为什么您认为工作表是不可接受的解决方案？
*   你想用这个不能用工作表做的模态窗口做什么？
*   通过在常见场景中使用不常见的 UI 为您的用户提供什么价值？

如果您真的想在不使用工作表 API 的情况下将一个窗口模式变为另一个模式，那么实现它只需考虑“窗口模式”的含义......您似乎已经完成了：

> ...阻止用户仅与窗口交互的警报...

因此，您真正需要做的是阻止用户与该窗口进行交互。有很多方法可以做到这一点，包括：

*   禁用窗口中的所有控件
*   让窗口中的任何事件处理自定义视图注意您的警报是否可见，并在这种情况下忽略事件
*   在所有窗口内容之上分层一个视图，以防止点击到达下面的视图
*   子类化`NSApplication`并覆盖`sendEvent:`以忽略窗口中的事件（这真的是矫枉过正并且可能有问题）

除此之外，您可能希望将警报附加到窗口，以便它们一起移动并且不要在 Exposé 中做奇怪的事情：请参阅`-[NSWindow addChildWindow:ordered:]`。

# websocket - Meteor 是否使用 SockJS 作为其主要的浏览器-服务器通信机制？

> ID：10128371
> 
> 赞同：6
> 
> 时间：2012-04-12T17:06:56.727
> 
> 标签：websocket, long-polling, meteor

我注意到这里的 Meteor 流包包含 SockJS： [https ://github.com/meteor/meteor/tree/master/packages/stream](https://github.com/meteor/meteor/tree/master/packages/stream)

基于一些提交消息，我猜 Meteor 使用 SockJS 轮询作为它的主要浏览器-服务器通信机制。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:45:26.403

看起来像。但它现在不使用代码中注释的 websockets 或流：

```
self.socket = new SockJS(self.url, undefined, { debug: false, protocols_whitelist: [        
    **// only allow polling protocols. no websockets or streaming.        
    // streaming makes safari spin, and websockets hurt chrome.**        
    'xdr-polling', 'xhr-polling', 'iframe-xhr-polling', 'jsonp-polling'      ]}); 
```

# c# - “十进制”和“十进制”的区别？类型，何时使用它们中的任何一个

> ID：10128374
> 
> 赞同：0
> 
> 时间：2012-04-12T17:07:09.870
> 
> 标签：c#, nullable

任何人都可以帮助我理解`decimal`和`decimal?`或`int`和之间的区别`int?`吗？

我什么时候应该使用它们以及使用它们中的任何一个有什么好处。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T17:08:17.183

**带有 ? 的数据类型 是可为空的类型。它们也可以保存空值**
查看此[源链接](http://www.c-sharpcorner.com/UploadFile/mosessaur/nullabletypes08222006164135PM/nullabletypes.aspx)

> *   可空类型表示可以分配空值的值类型变量。您不能基于
>     引用类型创建可为空的类型。（引用类型已经支持空值。）
> *   语法 T? （在 C# 中）是 System.Nullable 的简写，其中 T 是值类型。这两种形式可以互换。
> *   以与普通值类型相同的方式将值分配给可空类型，例如：C#：`int? x = 10; or double? d = 4.108;`
>     
>     
>     
>     VB.NET：`Dim x As Nullable(Of Integer) = 10`或`Dim d As Nullable(Of Double) = 4.108`
>     
>     
> *   使用 System.Nullable.GetValueOrDefault 方法返回分配的值，或者如果值为 null，则返回基础类型的默认值，例如
>     
>     
>     
>     C#: int j = x.GetValueOrDefault();
>     
>     
>     
>     VB.NET：`Dim j as Integer = x.GetValueOrDefault()`
>     
>     
> *   使用 HasValue 和 Value 只读属性测试 null 并检索值。
>     
>     
> *   如果变量包含值，则 HasValue 属性返回 true，如果为 null，则返回 false。
> *   如果赋值，则 Value 属性返回一个值，否则抛出 System.InvalidOperationException。
> *   可空类型变量的默认值将 HasValue 设置为 false。值未定义。
>     **在 C# 4.0 中**
> *   使用 ？？(C#) 运算符分配默认值，当当前值为 null 的可空类型分配
>     给不可空类型时，将应用该默认值，例如

```
int? x = null; 
int y = x ?? -1; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T17:09:30.253

`?`类型描述它可以为空。`int?`and是and`decimal?`的简写。`Nullable<int>``Nullable<decimal>`

这允许变量保持其类型或空值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:10:15.503

这 ？form 只是意味着它是一个可为空的值类型。`Nullable<decimal>`这是or的快捷方式`Nullable<int>`。当您希望能够指示没有为该变量分配值时，是使用它的好时机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:15:53.230

一个用例是如果你有类似 a 的东西，`DateTime`并且你想表明你还没有给它赋值。您可以将其设置为 null，而不是将其设置为 01/01/1970 之类的“魔术日期”。更直接！

# ruby - 如何在 Jruby 中编组包含数组的类

> ID：10128375
> 
> 赞同：1
> 
> 时间：2012-04-12T17:07:10.443
> 
> 标签：ruby, arrays, serialization, jruby, marshalling

我有一个包含许多类实例的二维数组。该类包含 4 个数组。我想使用 Marshal 将二维数组保存到磁盘或从磁盘加载。我已经成功地将 Marshal 用于其他包含类的二维数组，但这些类不包含数组。这是给我带来麻烦的类的定义。

```
class Light
       attr_accessor :R,:G,:B,:A

       def initialize(i)

            @R = Array.new(4, i)
            @G = Array.new(4, i)
            @B = Array.new(4, i)
            @A = Array.new(4, i)

       end

       @R
       @G
       @B
       @A

end 
```

我尝试在 Light 类中定义我自己的 marshal 函数：

```
def marshal_dump
    {'R' => @R,'G' => @G,'B' => @B,'A' => @A}
end

def marshal_load(data)
    self.R = data['R']
    self.G = data['G']
    self.B = data['B']
    self.A = data['A']
end 
```

这是包含此类的二维数组的创建

```
def createLightMap(width,height)
     a = Array.new(width) { Light.new(0.7) }
     a.map! { Array.new(height) { Light.new(0.7) } }
     return a
end

@lightMap = createLightMap(10,10) 
```

这是我保存和加载的方式

```
#save
File.open('lightData','w') do |file|
     Marshal.dump(@lightMap, file)
end

#load
@lightMap = if File.exists?('lightData')
                  File.open('lightData','w') do |file|
                       Marshal.load(file)
                  end
             else
                  puts 'no light data found'
             end 
```

加载时，我收到错误“在‘加载’中：转储格式错误（未链接，索引：-96）（参数错误）”

我尝试过使用和不使用自定义转储/加载编组功能。我正在使用 jruby 1.5.1，ruby 1.8.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T04:35:11.530

我认为问题不是 Marshal 转储/加载，可能只是文件 I/O。这对我来说很好（没有自定义编组）：

```
class Light
  # You might want to downcase these variables as capitalized 
  # variables in Ruby generally denote constants
  attr_accessor :R,:G,:B,:A

  def initialize(i)
    @R = Array.new(4, i)
    @G = Array.new(4, i)
    @B = Array.new(4, i)
    @A = Array.new(4, i)
  end

  def ==(other)
    @R == other.R && @G == other.G && @B == other.B && @A == other.A
  end
end

# Method names are generally underscored / snake cased
# (JRuby is even smart enough to map this to Java's camel casing).
# Also should probably attach this method to a class or module to prevent
# polluting global namespace
def create_light_map(width,height)
  a = Array.new(width) { Light.new(0.7) }
  # Note you don't need explicit returns - the last value evaluated is the return value
  a.map { Array.new(height) { Light.new(0.7) } } # You can also lose the ! on map
end

# Same casing style applies to variables
light_map = create_light_map(10,10)
# => [[#<Light:0x5ec736e4 @A=[0.7, 0.7, 0.7, 0.7], ...

# Note with marshaled data you should probably open file in binary mode
File.open('/tmp/lightData','wb') { |f| f.write(Marshal.dump(light_map)) }
# => 5240

light_map_demarshaled = File.open('/tmp/lightData','rb') { |f| Marshal.load(f.read) }
# => [[#<Light:0x6a2d0483 @A=[0.7, 0.7, 0.7, 0.7], ...

light_map_demarshaled == light_map
# => true 
```

# sql - 优化 Sqlite 查询：在子查询中分组

> ID：10128379
> 
> 赞同：2
> 
> 时间：2012-04-12T17:07:26.837
> 
> 标签：sql, performance, sqlite

我有一个非常简单的 Sqlite 模式，用于按用户操作记录每日计数以及按天和操作记录的各种用户操作延迟百分位数：

```
create table user_actions (
  id integer primary key,
  name text not null
)

create table action_date_count (
  action_id integer not null
    references user_actions(id) on delete restrict on update restrict,
  date integer not null,
  count integer not null,
  unique (action_id, date) on conflict fail
)

create table latency_percentiles (
  action_id integer not null
    references user_actions(id) on delete restrict on update restrict,
  date integer not null,
  percentile integer not null,
  value real not null,
  unique (action_id, date, percentile) on conflict fail
) 
```

在这里，所有日期都存储为每天午夜的 Unix 时间戳（如果有帮助，我可以更改它）。

现在这是我正在努力解决的一个查询：显示上周按平均音量降序排列的操作，包括 50%、90%、95% 级别的平均延迟百分位数。我想出了一个巨大的查询，解释计划说需要 17 个步骤，而且速度很慢。有人可以改进吗？

```
select ua.id, ua.name, ac.avg_count, al50.avg_lat_50, al90.avg_lat_90, al95.avg_lat_95
  from
    user_actions as ua,
    (
      select adc.action_id as action_id, avg(adc.count) as avg_count
      from
        action_date_count as adc,
        (select max(date) as max_date from action_date_count) as md
      where
        julianday(md.max_date, 'unixepoch', 'localtime') - julianday(adc.date, 'unixepoch', 'localtime') between 1 and 7
      group by action_id
    ) as ac,
    (
      select lp.action_id as action_id, avg(lp.value) as avg_lat_50
      from
        latency_percentiles as lp,
        (select max(date) as max_date from action_date_count) as md
      where
        lp.percentile = 50 and
        julianday(md.max_date, 'unixepoch', 'localtime') - julianday(lp.date, 'unixepoch', 'localtime') between 1 and 7
      group by action_id
    ) as al50,
    (
      select lp.action_id as action_id, avg(lp.value) as avg_lat_90
      from
        latency_percentiles as lp,
        (select max(date) as max_date from action_date_count) as md
      where
        lp.percentile = 90 and
        julianday(md.max_date, 'unixepoch', 'localtime') - julianday(lp.date, 'unixepoch', 'localtime') between 1 and 7
      group by action_id
    ) as al90,
    (
      select lp.action_id as action_id, avg(lp.value) as avg_lat_95
      from
        latency_percentiles as lp,
        (select max(date) as max_date from action_date_count) as md
      where
        lp.percentile = 95 and
        julianday(md.max_date, 'unixepoch', 'localtime') - julianday(lp.date, 'unixepoch', 'localtime') between 1 and 7
      group by action_id
    ) as al95
  where ua.id = ac.action_id and ua.id = al50.action_id and ua.id = al90.action_id and ua.id = al95.action_id
  order by ac.avg_count desc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:17:22.400

我假设你已经索引了和表`date`上的列。`action_date_count``latency_percentiles`

那么问题是 sqlite 无法使用您提供的查询的日期索引。您可以通过调整日期比较来解决此问题。

**而不是这个：**

```
julianday(md.max_date, 'unixepoch', 'localtime') - julianday(lp.date, 'unixepoch', 'localtime') between 1 and 7 
```

**做这个：**

```
lp.date between md.max_date - 7 * 24 * 3600 and md.max_date 
```

您还可以通过在`latency_percentiles (date, percentile, value)`. YMMV。

# php - 高效插入复杂数据mysql

> ID：10128380
> 
> 赞同：1
> 
> 时间：2012-04-12T17:07:29.007
> 
> 标签：php, mysql

我尝试将一些复杂的数据插入到 mysql 数据库中，但我的实现性能存在问题。我的数据看起来像：

```
user1
  question1_1
    answer1_1_1
    answer1_1_2
    answer1_1_3
    ...
  question1_2
    answer1_2_1
    answer1_2_2
    ...
  ...
 user 2
 ... 
```

为此，我在我的数据库中定义了 3 个表

```
users columns[userid, name,...]
questions columns[questionid, userid, questiontext]
answers columns[answerid, questionid, answertext] 
```

我收到一大堆要插入数据库的数据。因为表是链接的，所以我现在有一个实现，可以插入用户、检索 ID 并在问题的 VALUES 中使用它......它可以工作，但我收到“超过 30 秒的最大执行时间”，因为单独的数量mysql 插入语句。

我当前的代码如下所示：

```
for ($i=0; $i<sizeof($users); $i++)
{
  $user = $users[$i];
  $sqlstr = "INSERT INTO users (username) VALUES ('".$users[$i]->id."')";

  mysql_query($sqlstr);
  $userid = mysql_insert_id(); 

  for ($j=0; $j<sizeof($user->question); $j++)
  {
    $question = $user->question[$j];

    $sqlstr = "INSERT INTO question (userid,creator,date) VALUES (".$userid.",'".$question->creator."','".$question->date."')";

    mysql_query($sqlstr);
    $questionid = mysql_insert_id(); 

    $rows = array();
    $sqlstr = "INSERT INTO answers (questionid,name,value) VALUES ";
    for ($k=0; $k<sizeof($question->answers); $k++)
    {
      $rows[] = "('".$questionid."','".$question->answers[$k]->name."','".$question->answers[$k]->value."')";
    }
    $sqlstr = $sqlstr.implode(',',$rows);
    mysql_query($sqlstr);
  }
} 
```

鉴于前一个插入的 ID 用于下一个插入语句，我如何将单独的插入语句组合成一个大语句？我尝试了 LAST_INSERT_ID() 但这不能按预期工作。它似乎引用了该表的最后一个 ID。

或者是否有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:47:54.500

您可以将 sql 语句包装在事务中。请参阅[dev.mysql.com/doc](http://dev.mysql.com/doc/refman/5.5/en/commit.html) 这可能会加快数据库的填充速度，同时仍然允许您继续发出小的单个插入语句。

当您启动事务时，所有磁盘访问都将暂停，直到您提交为止。这意味着您的所有插入将一次性写入磁盘。此外，所有内务更新只需编写一次。

例如

```
mysql_query('START TRANSACTION');
<your code>
mysql_query('COMMIT'); 
```

*注意*：中止事务（使用`ROLLBACK`）可能会非常慢。

# android - 缓存生成的二维码

> ID：10128384
> 
> 赞同：0
> 
> 时间：2012-04-12T17:07:47.313
> 
> 标签：android, caching, qr-code

我使用 zxing 对二维码进行编码并将其存储为位图，然后将其显示在`ImageView`. 由于图像生成时间很重要，我计划将其移至单独的线程（我认为 AsyncTaskLoader 会很好）。

问题是 - 它是一个图像，我知道为了避免内存泄漏，永远不应该在 Activity 中存储对它的强引用。

那么你会怎么做呢？**如何缓存图像以在配置更改（手机旋转）中幸存并通常避免生成它`onCreate()`？**

请指出我正确的方向。

**编辑：** 或者，如果我仍然使用 AsyncTaskLoader，我应该让它完成它的工作并将位图保留在那里？我的意思是，它应该返回它加载的数据（在这种情况下生成）并在需要时返回它，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:32:58.557

那么这是一个非常常见的问题：

[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state) [Activity 在轮换时重启 Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android) [如何在 Android 上将对象从一个 Activity 传递到另一个 Activity](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

您可能必须使用 Parceable 对象。 [http://chmcguir.wordpress.com/2012/02/12/parcelable-how-to-pass-data-between-android-activities/](http://chmcguir.wordpress.com/2012/02/12/parcelable-how-to-pass-data-between-android-activities/)

**编辑：**

这是有关该主题的官方文章。它使用 onRetainNonConfigurationChange() 来传递位图

> 例如，Photostream 从可绘制对象中提取位图并仅传递位图，而不传递可绘制对象。最后，请记住 onRetainNonConfigurationChange() 应该只用于保留加载成本高的数据。否则，保持简单，让 Android 做所有事情。

[http://developer.android.com/resources/articles/faster-screen-orientation-change.html](http://developer.android.com/resources/articles/faster-screen-orientation-change.html)

# java - 如何在java中获取一组最新的日期变量

> ID：10128387
> 
> 赞同：7
> 
> 时间：2012-04-12T17:07:50.627
> 
> 标签：java, compare, max, java.util.date

我有大约 8 个日期变量（java.util.Date）具有不同的变量名。选择这些日期的最新（最大值）的最有效/最佳方式是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-12T17:15:37.800

理想情况下，将它们存储在一个集合中——无论如何，这对你的程序设计来说可能是有意义的。如果你有一个 List 对象，你可以这样做：

```
Collections.max(dates); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T17:15:40.190

将它们放在 List 中并使用`Collections.max`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T17:15:57.000

由于您将所有日期存储在不同的变量中，因此您需要执行以下 varargs 函数并将所有变量传递给它：

```
protected Date getMostRecentDate(Date ... dates) {
    Arrays.sort(dates);
    return myDateArray[dates.length - 1];
} 
```

然后你会这样称呼它：

```
Date mostRecent = getMostRecentDate(date1, date2, date3 /* etc.*/); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T17:15:20.560

`Date`具有可比性，因此将它们全部添加到列表中，并用于`Collections.max()`查找最大（最新）日期：

```
List<Date> dates = new ArrayList<Date>();
dates.add(foo);
dates.add(bar);
... etc
Date latest = Collections.max(list); 
```

实际上，如果你想变得花哨，你可以这样做：

```
public static <T extends Comparable<T>> T max(T... items) {
    return Collections.max(Arrays.asList(items));
} 
```

并这样称呼它：

```
Date latest = MyClass.max(foo, bar, fred); 
```

但它也适用于任何`Comparable`：

```
Integer biggest = MyClass.max(3, 7, 4, 1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T17:16:37.580

将它们全部添加到集合中然后对其进行排序，或者将它们添加到首先排序的集合中，例如 PriorityQueue：

```
PriorityQueue<Date> dateQ = new PriorityQueue<Date>();
dateQ.add(someDate);
dateQ.add(anotherDate);
dateQ.add(thirdDate); // etc...
System.out.println("Max date is: " + dateQ.peek()); 
```

# file-upload - 在 Nginx 中使用 UploadProgress 与 Lighttpd 与 Upload Progress 模块有什么不同？

> ID：10128389
> 
> 赞同：1
> 
> 时间：2012-04-12T17:07:59.190
> 
> 标签：file-upload, nginx

我有一个应用程序可以使用 UploadProgress 和 Lighttpd 成功跟踪上传进度，我正在将其移植到 Nginx。

阅读文档后：[http](http://wiki.nginx.org/HttpUploadProgressModule) : //wiki.nginx.org/HttpUploadProgressModule 我不太清楚它们是否以相同的方式工作。

目前，流程如下：

1.  我有一个带有表单的 HTML 页面，其操作是同一页面上的 iframe（因此上传不会让访问者离开它）。

2.  我安装了uploadprogress PHP 扩展，并将其安装为Lighttpd 模块。

3.  然后，一旦我提交了文件，我就会向我的 PHP 脚本发出 AJAX 请求，该脚本使用 uploadprogress_get_info() 来获取有关文件上传进度的信息，并将其报告回来。

好像使用 Nginx，没有 PHP 扩展，¿所以我如何获得进度信息（字节总数与发送的字节数）？¿ 什么进程/脚本或任何东西可以更新进度条？

完整解释 Nginx 上传进度模块如何在幕后工作以及所有组件如何相互关联（我的 html 页面、表单提交到的 php 页面、nginx、文件等）

谢谢！

# emacs - Emacs“Mx 术语”提示

> ID：10128392
> 
> 赞同：5
> 
> 时间：2012-04-12T17:08:15.003
> 
> 标签：emacs, editor, elisp

当我在 Emacs 23.3.1 中启动终端时，它会提示我“运行程序：/usr/local/bin/bash”。我怎样才能摆脱这个提示？我想将 F4 绑定到启动终端，而不会每次都提示我输入相同的 shell。

就像是：

```
(global-set-key [f4] 'term) 
```

但这不起作用。它将启动一个终端，但它仍然提示我再次进入 shell。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T17:26:55.630

```
(global-set-key [f4] '(lambda () (interactive) (term (getenv "SHELL")))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:49:19.300

如果您喜欢在 emacs 中使用术语，可以查看[multi term](http://emacs-fu.blogspot.fr/2010/06/console-apps-in-emacs-with-multi-term.html)。

# javascript - jQuery/Javascript - 检查元素是否存在于 iframe 中

> ID：10128400
> 
> 赞同：1
> 
> 时间：2012-04-12T17:08:39.837
> 
> 标签：javascript, jquery, iframe

是否可以检查元素是否存在于 iframe 中？我知道由于同源策略，不可能在外国主机上操作某些东西。但是如果我只是想知道一个元素是否存在呢？

```
<body id="parent">
  <iframe src="foreign host">
    <span id="exist">
      Yes, Yes. I'am here.
    </span>
  </iframe>
</body> 
```

我试图用jquery解决这个问题：

```
$('iframe:first').contents().find('#exist').length throws out a 
```

访问属性“ownerDocument”错误的权限被拒绝

我不想更改外国文件中的某些内容。所以没有危险。为什么会被拒绝？

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:21:49.983

抱歉，同源策略不允许这样做，因为您可以读取另一个域上的个人信息或进行网络钓鱼，只需嵌入完整的文档 iframe。

有替代解决方案：

*   在没有安全性的情况下运行浏览器：pe: 'chromium-browser --disable-web-security'
*   做一个代理并像客户端一样进行http连接。在与您的页面相同的域中创建代理。

如果它在同一个域中，任何其他评论都可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:17:26.890

您应该像这样为您的 iframe 标签分配一个 ID：

```
<iframe src="blah.html" id="blah"></iframe> 
```

然后，您可以通过执行以下操作在 jQuery 中引用该 iframe：

```
var iframe = $("#blah"); 
```

完成后，您可以使用刚刚创建的 iframe var 上的 contents() 函数来访问其 DOM。

# sql-server-2005 - 关于 > 用户“（空）”登录失败。原因：未与受信任的 SQL Server 连接关联

> ID：10128402
> 
> 赞同：0
> 
> 时间：2012-04-12T17:08:49.457
> 
> 标签：sql-server-2005, iis-7, login, connection-string, trusted

我在我的工作站上的 VS2010 中开发的 .net 4.0 下的 C# 中有一个 aspx 页面，该页面位于一个名为“DOMDEV”的域中，试图在独立的 W2K3 Std Edition SP2 上访问 MS-SQL Server 2000 DE。我的域凭据是

用户：DOMDEV\MyName 密码：p@ssword

MS-SQL Server 2K DE 的安全设置为 Windows 身份验证模式，由于公司规定不能更改为混合模式。

我的连接字符串在 aspx 的 web.config 文件中如下所示： Data Source=standAlone.myCompany.com\SQL01;Initial Catalog=db_001;Integrated Security=SSPI;

当我在工作站上的 VS2010 中执行 Ctrl-F5 时，页面执行良好并从独立服务器中提取所有数据。

当我将页面发布到 Window Server 2K8 Enterprise 并尝试通过我的 IE 9 请求页面时，我收到以下错误：用户“（空）”登录失败。原因：未与受信任的 SQL Server 连接关联。

为什么它可以在我的设备上运行而无需设置任何东西，但在 W2K8 上却不行？从我的 VS IIS 发送的安全信息与 W2K8 的 IIS7 有什么不同？W2K8 IIS7 上的网站设置为启用 Windows 身份验证启用匿名身份验证：应用程序池标识

如何/我可以做些什么来配置 W2K8 以让 IIS 7 像我的设备上的 IIS 一样工作？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:25:39.277

我正在与这个错误作斗争..终于我找到了解决方案......现在一切正常..

尝试以下步骤..

在服务器机器中设置访客帐户“已打开” 在 Sql Server 中的安全 > 登录下添加新登录名“服务器名\访客” 相应地将此登录名添加到数据库中 授予所需权限

问候

哈里斯·P·奈尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:11:50.613

我尝试了 IIS 7 设置，发现以下配置效果很好。

第一部分：在数据库服务器上创建本地用户

1.  打开开始 > 管理工具 > 计算机管理
2.  展开计算机管理（本地）> 本地用户和组> 用户
3.  添加一个您喜欢的名称的新用户（例如 yourNewUser; pwd: 987poi!@）
4.  在本地（BUILD-IN）管理员组中添加新用户
5.  无需在设置为 Windows 身份验证模式的数据库上设置任何内容

第二部分：在 Web 服务器上创建本地用户

1.  打开开始 > 管理工具 > 服务器管理器
2.  展开左侧导航 Server Manager (yourServerName) > Configuration > Local Users and Groups > Users
3.  添加一个具有您刚刚在数据库服务器上所做的相同信息的新用户
4.  不需要额外的设置/权限/组（最低权限）。默认情况下，它仅在“用户”中

第三部分：向 .NET 临时文件夹添加权限

1.  32 位：转到您的 X:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files 文件夹，确保新用户对该文件夹具有写入权限
2.  64 位：转到您的 X:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files 文件夹，确保新用户对该文件夹具有写入权限

第 IV 部分：选项 1：配置 Web 服务器

1.  打开开始 > 管理工具 > 服务器管理器
2.  展开左侧导航 Server Manager (yourServerName) > Roles > Web Server (IIS) > Internet Information Services (IIS) Manager
3.  在 Internet 信息服务 (IIS) 管理器的导航（左中）中，单击您的 Web 应用程序
4.  在 IIS 部分中，双击“身份验证”图标
5.  Authenticaiton 窗格中有 6 个设置。通过单击设置的名称，您将能够在右侧的“操作”窗格中启用/禁用/编辑它们。将它们设置如下：

    *   匿名身份验证 - 已启用 - 应用程序池标识
    *   ASP.NET 模拟 - 已启用 - 特定用户：yourNewUser (987poi!@)
    *   禁用其余的
6.  每次发布 Web 应用程序时，都需要仔细检查设置是否仍然存在

第 IV 部分：选项 2：设置 web.config 文件

1.  转到您正在发布的 Web 应用程序的 web.config 文件，确保您的 system.web 块中有以下行

    <identity impersonate="true" password="987poi!@" userName="yourNewUser" />

2.  此选项不适用于本地工作站的 IIS（至少它不适用于我的。）

现在来自用户工作站的请求，页面将提供所需的数据。

*此解决方案也适用于带有 .net4 的带有 IIS6 的 Windows Server 2003*

# mysql - 使用 JBDC 和应用 MVC 设计模式的 Java EE 连接到 MySQL

> ID：10128416
> 
> 赞同：0
> 
> 时间：2012-04-12T17:10:15.800
> 
> 标签：mysql, model-view-controller, servlets, jdbc, classnotfoundexception

我正在为 Java Web Developers 和 Tomcat v7.0 使用 Eclipse Java EE IDE。我配置了服务器并将动态 Web 项目与 tomcat 相关联。我在本地工作（本地主机）。

我有我的 Connection 课程，这是：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class Conexion {

    private static Connection conexion = null;

    private Conexion() {

    }

    public static Connection getInstancia() {
        if (conexion == null) {
            try {
                Class.forName("com.mysql.jdbc.Driver");
                conexion = DriverManager.getConnection(
                        "jdbc:mysql://localhost/Esquema_VentaLibros","gustavo", "123581321");

            } catch (SQLException sqlex) {
                sqlex.printStackTrace();
            } catch(ClassNotFoundException cnfex) {
                cnfex.printStackTrace();
            }
            return conexion;
        }
        else {
            return conexion;
        }
    }

} 
```

在我的 index.jsp 文件中，我有一个用户可以登录的表单。根据登录是否正确，我想通过名为的控制器重定向到一个视图（Welcome.jsp）或另一个视图（Denegate.jsp）`ControladorLogin`

所以，在我的`ListaDeQueries`课堂上，我有登录方法，就是这个

```
public class ListaDeQueries {

    private static PreparedStatement pst;
    private static String query = "";

    public static boolean loguear(String usr, String pass) {
        query = "select * from Usuario where username = ? and password = ?";

        try {
            pst = Conexion.getInstancia().prepareStatement(query);
            pst.setString(1, usr);
            pst.setString(2, pass);
            pst.executeQuery();
            return true;
        } catch (SQLException e) {
            e.printStackTrace();
            return false;
        }

    }

} 
```

然后在我的 Servlet 中`ControladorLogin`调用这样的方法，如下所示：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        if(ListaDeQueries.loguear(request.getParameter("usuario"), request.getParameter("clave"))) {
            request.getRequestDispatcher("Welcome.jsp").forward(request, response);
        }
        else {
            request.getRequestDispatcher("Denegate.jsp").forward(request, response);
        }
    } 
```

这是我的小表格`index.jsp`：

```
<form method="post" action="ControladorLogin">
        Usuario: <input type="text" name="usuario"/> <br/>
        Clave: <input type="password" name="clave"/> <br/>
        <input type="submit" value="Entrar"/>
    </form> 
```

***问题是我得到了 MySQL 驱动程序的 ClassNotFoundException*** :`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`，但我正确地添加了库。在项目的属性 > Java 构建路径 > 库 > 添加外部 JAR，然后添加此文件中的 jar： [http ://www.mysql.com/downloads/connector/j/](http://www.mysql.com/downloads/connector/j/)

这是完整的 StackTrace：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at edu.itla.diaz.modelo.Conexion.getInstancia(Conexion.java:18)
    at edu.itla.diaz.modelo.ListaDeQueries.loguear(ListaDeQueries.java:15)
    at edu.itla.diaz.controladores.ControladorLogin.doPost(ControladorLogin.java:30)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
04/12/2012 01:04:45 PM org.apache.catalina.core.StandardWrapperValve invoke
GRAVE: Servlet.service() para servlet edu.itla.diaz.controladores.ControladorLogin lanzó excepción
java.lang.NullPointerException
    at edu.itla.diaz.modelo.ListaDeQueries.loguear(ListaDeQueries.java:15)
    at edu.itla.diaz.controladores.ControladorLogin.doPost(ControladorLogin.java:30)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:37:45.153

尽管您提到了添加 jar。但是过去很多次，我都经历过`java.lang.ClassNotFoundException`jar 是否不在物理位置。

我建议将`mysql-jdbc.jar`物理位置放置在`/WEB-INF/lib`您的项目目录中。然后 Eclipse 将负责其余的工作。

将第三方依赖项放在`/WEB-INF/lib`目录下也是一个好习惯。

# java - Java 项目无法引用另一个项目

> ID：10128419
> 
> 赞同：1
> 
> 时间：2012-04-12T17:10:26.700
> 
> 标签：java, rest, jax-rs, noclassdeffounderror, buildpath

我正在使用 Eclipse。我正在构建一个 RESTful 项目 (WarehouseService)，它在构建路径中包含另一个项目 (WarehouseEntity)。当 WarehouseService 从 WarehouseEntity 实例化***StockTakeService***类的对象时（如下所示），

```
@POST
@Consumes("application/xml")
public Response updateStockTake(String input){
    warehouse.entity.StockTake st = null;

    try{
        StockTakeService sts = new StockTakeService();

        SAXParserFactory saxFactory = SAXParserFactory.newInstance();
        SAXParser saxParser = saxFactory.newSAXParser(); 
```

我收到以下错误。

```
Apr 13, 2012 12:41:31 AM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
java.lang.NoClassDefFoundError: service/warehouse/entity/StockTakeService
    at warehouseservice.jaxrs.StockTake.updateStockTake(StockTake.java:36)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:187)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:70)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:279)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:86)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:136)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:74)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1357)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1289)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1239)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1229)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:420)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:497)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:684)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: service.warehouse.entity.StockTakeService
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
... 31 more

Apr 13, 2012 12:41:31 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet JAX-RS Servlet threw exception
java.lang.ClassNotFoundException: service.warehouse.entity.StockTakeService
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at warehouseservice.jaxrs.StockTake.updateStockTake(StockTake.java:36)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:187)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:70)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:279)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:86)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:136)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:74)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1357)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1289)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1239)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1229)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:420)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:497)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:684)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

WarehouseService 是我的 RESTful 项目，而 WarehouseEntity 是我的 JPA 项目。

我试图包含另一个项目（WarehouseDBSync），并从 WarehouseDBSync 实例化一个类对象。同时发生。

我是 RESTful 和 JPA 的新手。我不知道我是否需要配置任何东西。我觉得将项目包含在构建路径中不起作用，但我不知道我还能做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:27:33.923

如果您在 Eclipse 中包含另一个项目（Java 构建路径 -> 项目），您的类将在“编译”时可用。如果您还想将其 Jar 部署到服务器（可能是 lib 目录），您还必须在与“Java Build Path”相同的菜单中的“Deploy Assembly”中写入一个条目。

# fancybox - 花式框弹出窗口底部的 div

> ID：10128423
> 
> 赞同：0
> 
> 时间：2012-04-12T17:10:35.450
> 
> 标签：fancybox, fixed

我正在使用 Fancybox (fancyapps.com) 来使用弹出 ajax 窗口。我需要在弹出窗口的右下角放置一个 div，但我不知道该怎么做。

我尝试了 position:fixed 但然后 div 对齐到屏幕底部而不是弹出底部。我正在使用 Ajax 而不是 iframe 在弹出窗口中显示内容。

感谢所有输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:19:32.380

首先，您需要将 div 放在外部弹出 div 内。假设 div 有 id="lower-right-corner"。那么css将是：

```
#lower-right-corner{

position: absolute;
right: 0;
bottom:0;

} 
```

这是假设弹出外部 div 的位置不是静态的。您可以在此处找到有关 CSS 定位的更多信息：

[http://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

# java - ClassCastException：带有 android SimpleExpandableListAdapter 的 java.util.HashMap

> ID：10128426
> 
> 赞同：1
> 
> 时间：2012-04-12T17:10:44.753
> 
> 标签：java, android, hashmap, expandablelistview, classcastexception

我正在尝试为我的移动计算类创建一个简单的 RSS 提要阅读器应用程序。我创建了一个类来管理和保存 RSS 数据。

```
@SuppressWarnings("unchecked")
    SimpleExpandableListAdapter rssItemList = new SimpleExpandableListAdapter(
            this,                       // context (this class)
            createTitleList(),          // Creating group List
            R.layout.parent_row,        // Group item layout XML
            new String[]{"titles"},     // the key of group item
            new int[]{R.id.itemTitle},  // ID of each group item.-Data under the key goes into this TextView
            createChildList(),          // childData describes second-level entries
            R.layout.child_row,         // Layout for sub-level entries(second level)
            new String[]{"desc"},       // Keys in childData maps to display
            new int[]{R.id.itemDesc}    // Data under the keys above go into these TextViews
    );
    setListAdapter(rssItemList); 
```

我的问题是显示它，我正在尝试使用 ExpandableListView，当我尝试展开列表中的项目时，我不断收到错误消息。

```
E/AndroidRuntime( 2542): FATAL EXCEPTION: main
E/AndroidRuntime( 2542): java.lang.ClassCastException: java.util.HashMap
E/AndroidRuntime( 2542):        at android.widget.SimpleExpandableListAdapter.getChildrenCount(SimpleExpandableListAdapter.java:255)
E/AndroidRuntime( 2542):        at android.widget.ExpandableListConnector.refreshExpGroupMetadataList(ExpandableListConnector.java:561)
E/AndroidRuntime( 2542):        at android.widget.ExpandableListConnector.expandGroup(ExpandableListConnector.java:682)
E/AndroidRuntime( 2542):        at android.widget.ExpandableListView.handleItemClick(ExpandableListView.java:567)
E/AndroidRuntime( 2542):        at android.widget.ExpandableListView.performItemClick(ExpandableListView.java:527)
E/AndroidRuntime( 2542):        at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
E/AndroidRuntime( 2542):        at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime( 2542):        at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 2542):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime( 2542):        at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime( 2542):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 2542):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime( 2542):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime( 2542):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime( 2542):        at dalvik.system.NativeStart.main(Native Method) 
```

我不明白为什么会出现此错误，因为我制作组和子列表映射的代码几乎相同。

```
@SuppressWarnings({ "unchecked", "rawtypes" })
private List createTitleList(){
    ArrayList itemTitles = new ArrayList();
    ArrayList<ItemData> entriesList = (ArrayList<ItemData>) feed.getMessages();

    for(int i = 0; i < entriesList.size(); i++){
        HashMap m = new HashMap();

        m.put("titles", entriesList.get(i).getTitle());

        itemTitles.add(m);
    }

    return itemTitles;
}

@SuppressWarnings({ "unchecked", "rawtypes" })
private List createChildList(){
    ArrayList itemDesc = new ArrayList(); // item description list
    ArrayList<ItemData> entriesList = (ArrayList<ItemData>) feed.getMessages();

    for(int i = 0; i < entriesList.size(); i++){
        HashMap<String, String> m = new HashMap<String, String>();

        m.put("desc", entriesList.get(i).getDescription());

        itemDesc.add(m);
    }

    return (List)itemDesc;
} 
```

需要明确的是，它将显示组列表，但不会展开以显示子列表。

为了未来的谷歌人的利益，我一直在使用以下教程：

[Android中的可扩展ListView](http://www.coderzheaven.com/2011/04/10/expandable-listview-in-android-using-simpleexpandablelistadapter-a-simple-example/)

[可扩展列表](http://mylifewithandroid.blogspot.com/2008/05/expandable-lists.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:22:02.870

查看 SimpleExpandableListAdapter 的代码（我从未使用过，所以我在这里可能错了），groups 字段被声明为

```
List<? extends Map<String, ?>> 
```

而孩子们应该

```
List<? extends List<? extends Map<String, ?>>> 
```

也就是说，孩子应该是地图列表的列表，而不是您似乎提供的地图列表。

我建议删除那些禁止泛型类型警告的行，并实际修复警告，而不仅仅是隐藏它们。他们确实防止了这种失败，而且很少有情况实际上是不可避免的。

# c# - 复制工作表并将其链接指向自身？

> ID：10128429
> 
> 赞同：1
> 
> 时间：2012-04-12T17:10:47.223
> 
> 标签：c#, excel-interop

我正在将多个工作表从一个工作簿复制到另一个工作簿。第一张表包含一些数据，所有其他表都使用如下公式从文本框中链接到这些数据：='Cover Sheet'!A2

但是，新文档更改了公式以保持其与原始工作簿的链接，并添加了文件引用：='C:\Users...\AppData\Local\Temp[tmpD474.tmp]Cover Sheet'!A4

是否可以让它逐字复制公式，以便它们指向新工作簿的封面？如果不是，那么我有一个完全不同的问题：如何使用 c# interop 更改 Excel 文本框的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:28:51.307

我想出了如何更改文本框的内容。首先，您必须在 Excel 中命名文本框，然后调用[Worksheet](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.worksheet.aspx)。[Shapes](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.shapes.item.aspx) .Item("") 将 TextBox 作为[Shape](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.shape.aspx)对象，然后通过设置[TextBox](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.textbox.aspx) .TextFrame.Characters.Text 属性来修改文本。

# cookies - 从经典的 asp 页面在 http 请求中传递 cookie

> ID：10128432
> 
> 赞同：1
> 
> 时间：2012-04-12T17:10:53.747
> 
> 标签：cookies, asp-classic, httprequest, httpresponse

我有一个有趣的场景需要帮助。

我有一个经典的asp页面。此页面的功能是对外部 url 执行 http 请求并处理来自它的响应。

例如 page.asp 向 page2.aspx 发出一个 http 请求

两个页面都在同一个域下。

我需要做的是将http请求中浏览器page.asp请求中关联的所有cookie传递给page2.aspx。

这可能吗？如果可以，我如何通过类 asp 代码实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:17:31.197

将 ASPX 请求上的 HTTP“Cookie”标头设置为 ASP 页中收到的“Cookie”标头的值。

`Request.Headers('Cookie')`应该有你想要的值。

# python - 权限被拒绝尝试使用线程队列的多个文件的 HTTP Post

> ID：10128435
> 
> 赞同：0
> 
> 时间：2012-04-12T17:11:08.467
> 
> 标签：python, multithreading, http, upload, queue

我有一个应用程序（通常）一次只尝试一个 http 发布一个或两个文件，但这可能会导致要上传的文件积压（基于文件大小/网络速度）。我想我可能会尝试一个线程队列系统，以便用户可以继续填充队列，而在后台，线程队列会咀嚼要发送的文件。

我试图扼杀[这个答案](https://stackoverflow.com/questions/3472515/python-urllib2-open-is-slow-need-a-better-way-to-read-several-urls)来工作，但无济于事。

这是我的代码：

```
import threading, urllib2, Queue, os
from poster.encode import multipart_encode
from poster.streaminghttp import register_openers

path = "path/to/files/"

urls_to_load = [os.path.join(path,x) for x in os.listdir(path)]

def read_url(file, queue):
    register_openers()
    datagen, headers = multipart_encode({"myfile": open(file, "rb")})
    request = urllib2.Request("http://localhost/appname/upload", datagen, headers)
    queue.put(urllib2.urlopen(request).read())

def fetch_parallel():
    result = Queue.Queue()
    threads = [threading.Thread(target=read_url, args = (url,result)) for url in urls_to_load]
    for t in threads:
        t.start()
    for t in threads:
        t.join()
    return result

result = Queue.Queue()
for url in urls_to_load:
    read_url(url,result)
print result 
```

但是，我收到权限错误：

```
Traceback (most recent call last):
  File "C:/Users/tmiller/Desktop/multiBro.py", line 78, in <module>
    datagen, headers = multipart_encode({"myfile": open(i, "rb")})
IOError: [Errno 13] Permission denied: 'the file' 
```

我认为发生了一些访问冲突，但我该如何防止这种情况发生？

Web 服务器本质上是在运行[this](http://webpy.org/cookbook/storeupload/)。谢谢！

# mysql - 最佳观看次数策略

> ID：10128437
> 
> 赞同：5
> 
> 时间：2012-04-12T17:11:12.720
> 
> 标签：mysql, wordpress, optimization

我目前正在使用用户 IP、查看日期等将每个视图存储在数据库中。但是我的网站有大量点击量，它增加了数据库锁定时间并降低了性能。

我正在考虑将计数保存在文件中 1 小时，然后更新数据库，但有人告诉我，我们不将文件操作用于重负载站点。

请建议我执行此操作的最佳策略。

注意：我不需要计算唯一视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:35:48.537

您的网络服务器日志已经为您跟踪了大部分数据。

我的建议是每小时轮换一次日志，然后安排一个生成汇总统计数据并将它们存储在数据库中的计划作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T18:05:39.100

There's already a plugin that does this very effectively (though you'd have to work out using the data to sort posts and so on): BAW Post Views Count. It stores everything in postmeta, so it's easy to get to, and maintains daily and other totals in separate meta entries. I use it on several sites, with periods of 50,000 page views a day, and it doesn't slow anything down.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:16:29.487

直接在 MySQL 中保存和更新这些信息应该没有任何问题。每小时 3000 次点击意味着每秒少于一个查询。对这个表使用 InnoDB 存储引擎应该可以消除锁定问题。但是 InnoDB 有很多选项，需要正确配置才能有效地工作——这很重要。

根据您的评论，我认为您正在寻找的结构类似于：

```
id - page id
type - period length, could be 'day', 'week', 'month'
period - date when period starts, could be integer written as YYYYMMDD or YYYYMM 
       - depending on the contents of 'type' field
count - hit count for a url over given period 
```

主键是`(type, period, id)`. 还索引`(id, period)`和索引`(type, period, count)`以提高效率：

```
SELECT * 
FROM ... 
WHERE type='week' 
  and period = 20120409 
ORDER BY count DESC 
```

创建页面时，为每个时期插入 count = 0 的记录。当页面被点击时，运行一个简单的更新：

```
UPDATE table 
SET count = count + 1 
WHERE id = $page_id 
  AND period IN (201204, 20120409) 
```

它将更新“日”、“周”和“月”统计数据的所有三个记录。

# c# - ORDER BY 给出错误的订单

> ID：10128441
> 
> 赞同：3
> 
> 时间：2012-04-12T17:11:27.300
> 
> 标签：c#, sql-server, sql-order-by

我的 C# 程序中有一条 SQL 语句，如下所示：

```
SELECT * FROM XXX.dbo.XXX 
WHERE Source = 'OH'
  AND partnum = '1231202085' 
ORDER BY partnum, Packaging, Quantity 
```

在 SQL Server 管理中运行此查询时，结果按预期排序。我的前 3 个结果具有相同的部分和包装，数量分别为 32.0、50.8 和 51.0。

但是，当我从程序运行查询时，数量为 50.8 的结果集是第一个返回的。Quantity 的数据类型是十进制(18,9)。我试过强制转换，它似乎不是数据类型问题。

我不明白为什么它的数量中等。

* * *

谢谢你们的快速回复，但是经过更多测试后，我发现我的问题是在我的 C# 代码中，而不是在 sql 中。

得到查询结果后，我已经：

`if (PurchOrder.Read())`
`while (PurchOrder.Read())`

忽略第一次读取实际上会读取我的第一个结果的事实，然后会得到我的第二个结果。

我将 if 语句替换为：

`if (PurchOrder.HasRows == true)`

一切看起来都很好。

再次感谢您的回复。抱歉误导性问题。

-科迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:17:49.937

如果 partnum 是字母数字，它不会按数字顺序排序，除非你

*   Left Pad partnum 输出完全相同的字符数

*   使用一些专门的字母数字排序进行排序。我通常使用：

    ```
    order by
    RIGHT(REPLICATE('0', 1000) + LTRIM(RTRIM(CAST([field_name] AS VARCHAR(8000)))), 1000) 
    ```

当然，如果您的字段较小，您可以使用低得多的填充数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:18:00.793

从 SQL Server 端，只要 partnum、packing 和 quantity 是一个数字/浮点字段，这应该可以正常工作。让我担心的是，如果包装或零件编号是`10`之前出现的文本类型变量`2`。

为避免这种情况，您必须在执行之前将数据类型`CONVERT`或整数/小数类型。[在BOL](http://msdn.microsoft.com/en-us/library/ms130214%28v=sql.90%29.aspx)中查找 CAST / Convert 。`CAST``ORDER BY`

例如这个：

```
CREATE TABLE #test
(
 mytest varchar(10)
)

INSERT INTO #test(mytest) VALUES('10')
INSERT INTO #test(mytest) VALUES('1')
INSERT INTO #test(mytest) VALUES('2')
INSERT INTO #test(mytest) VALUES('12')
INSERT INTO #test(mytest) VALUES('20')

SELECT * FROM #test ORDER BY mytest
DROP TABLE #test 
```

产生不正确的排序。并且可以这样处理：

`SELECT * FROM #test ORDER BY CAST(mytest AS INT)`

就客户端（C#）而言，您是否将其存储在某种网格视图中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:14:01.937

谢谢你们的快速回复，但是经过更多测试后，我发现我的问题是在我的 C# 代码中，而不是在 sql 中。

得到查询结果后，我已经：

if (PurchOrder.Read()) 而 (PurchOrder.Read())

忽略第一次读取实际上会读取我的第一个结果的事实，然后会得到我的第二个结果。

我将 if 语句替换为：

if (PurchOrder.HasRows == true)

一切看起来都很好。

再次感谢您的回复。抱歉误导性问题。

-科迪

# c++ - 是否可以使用 Clang 3.1 和 VC11 Beta 头文件编译 C++ 源代码？

> ID：10128444
> 
> 赞同：0
> 
> 时间：2012-04-12T17:11:39.670
> 
> 标签：c++, visual-c++, c++11, clang, visual-c++-2012

我正在尝试在 Windows 上使用带有 clang 的 stl 标头编译一个相当简单的“hello world”程序，但我无法做到这一点。

我已经使用 VC11 Beta 从存储库编译了 Clang 3.1，没有问题。现在我正在尝试使用已经编译的 Clang 来使用 VC11 标头编译一个“hello world”示例，但是我得到了一堆错误，这似乎表明 Clang 正在迷失在 VC11 上模拟可变参数模板的一些宏魔法中，虽然我没有直接使用这个宏魔法。

我的包含目录：

*   C:\Program 文件 (x86)\Microsoft Visual Studio 11.0\VC\include
*   C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\atlmfc\include
*   C:\Program Files (x86)\Windows Kits\8.0\Include\um
*   C:\Program Files (x86)\Windows Kits\8.0\Include\shared
*   C:\Program Files (x86)\Windows Kits\8.0\Include\winrt

我收到如下错误：

> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\xstddef:1094:24: 错误：'_Nil' 没有引用值

还有一堆其他与宏有关的东西。

有人能够克服这个宏观问题吗？扩展此宏时，clang 预处理器是否存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:23:25.460

Microsoft 的 C++ 标头涉及尚不支持的扩展和特性。Clang 可以在 Windows 上使用 C 头文件构建程序，但还不能使用 C++ 头文件。

由于 C 运行时有效，您可能能够使用仅依赖于 C 运行时的不同 C++ 标准库。我还没有尝试过，但也许 libc++ 可以这样使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:01:56.307

我非常确定您将无法使用 clang 来编译某些头文件，例如 C:\Program Files (x86)\Windows Kits\8.0\Include\winrt。原因是因为 Windows 8 带来了带有一些扩展的 C++ 版本。这个版本被称为**C++/CX**。

一些扩展（如**ref class**）不是标准的 C++。我相信这会导致构建消息说您正在尝试编译一些可变参数模板。

# ios - setNeedsDisplayInMapRect 不会触发新的 drawMapRect：调用

> ID：10128447
> 
> 赞同：8
> 
> 时间：2012-04-12T17:11:54.483
> 
> 标签：ios, mkmapview, mapkit, mkoverlay

我正在使用自定义`MKOverlay/MKOverlayView`完全覆盖谷歌底图，我自己的瓷砖是异步加载的。`canDrawMapRect:zoomScale:`当我收到对我的覆盖视图的调用（并在这种情况下返回 FALSE）时，我遵循请求卸载的图块的模式，然后`setNeedsDisplayInMapRect:zoomScale:`在图块可用时调用。

这一切通常都有效，并且似乎在模拟器中完美运行。

然而，在设备上，我有时会在覆盖层中看到一个“洞”——一块缺失的瓷砖。

我可以看到请求了磁贴，并且请求完成了。我可以看到我打电话给我`setNeedsDisplayInMapRect:zoomScale:`，并且我正在传递原件`MKMapRect`，`MKZoomScale`其中提供了`canDrawMapRect:zoomScale:`. 但我也可以看到，从不要求覆盖层重绘该图块（`canDrawMapRect:zoomScale:`也`drawMapRect:zoomScale:inContext:`不会再次调用该图块）。

我需要了解为什么会发生这种情况以及如何纠正它。

这是我的 MKOverlayView 子类中的相关代码：

```
- (BOOL) canDrawMapRect: (MKMapRect) mapRect zoomScale: (MKZoomScale) zoomScale 
{
    NSUInteger zoomLevel = [self zoomLevelForZoomScale:zoomScale];
    CGPoint mercatorPoint = [self mercatorTileOriginForMapRect:mapRect];
    NSUInteger tilex = floor(mercatorPoint.x * [self worldTileWidthForZoomLevel:zoomLevel]);
    NSUInteger tiley = floor(mercatorPoint.y * [self worldTileWidthForZoomLevel:zoomLevel]);

    NSURL* tileUrl = [self tileURLForZoomLevel: zoomLevel tileX: tilex tileY: tiley];

    ASIHTTPRequest* tileRequest = [ASIHTTPRequest requestWithURL: tileUrl];
    tileRequest.downloadCache = [ASIDownloadCache sharedCache];
    [tileRequest setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy];

    if ( NO == [[ASIDownloadCache sharedCache] isCachedDataCurrentForRequest: tileRequest] )
    {
        [tileRequest setCachePolicy: ASIAskServerIfModifiedWhenStaleCachePolicy];
        tileRequest.delegate = self;
        tileRequest.userInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSValue value: &mapRect withObjCType: @encode( MKMapRect )],       @"mapRect",
                                [NSValue value: &zoomScale withObjCType: @encode( MKZoomScale )],   @"zoomScale",
                                [NSNumber numberWithInt: tilex], @"tilex",
                                [NSNumber numberWithInt: tiley], @"tiley",
                                nil];

        [_tileRequestStack addOperation: tileRequest];

        NSLog( @"canDrawMapRect: %d, %d - REQUESTING", tilex, tiley );

        return NO;
    }

    NSLog( @"canDrawMapRect: %d, %d - READY", tilex, tiley );

    return YES;
}

- (void) drawMapRect: (MKMapRect) mapRect zoomScale: (MKZoomScale) zoomScale inContext: (CGContextRef) context 
{
    NSUInteger zoomLevel = [self zoomLevelForZoomScale:zoomScale];

    CGPoint mercatorPoint = [self mercatorTileOriginForMapRect:mapRect];

    NSUInteger tilex = floor(mercatorPoint.x * [self worldTileWidthForZoomLevel:zoomLevel]);
    NSUInteger tiley = floor(mercatorPoint.y * [self worldTileWidthForZoomLevel:zoomLevel]);

    NSLog( @"drawMapRect:  %d, %d", tilex, tiley );

    NSURL* tileUrl = [self tileURLForZoomLevel: zoomLevel tileX: tilex tileY: tiley];
    NSData* tileData = [[ASIDownloadCache sharedCache] cachedResponseDataForURL: tileUrl];

    UIGraphicsPushContext(context);

    if ( tileData != nil )
    {
        UIImage* img = [UIImage imageWithData: tileData];

        if ( img != nil )
        {
            [img drawInRect: [self rectForMapRect: mapRect] blendMode: kCGBlendModeNormal alpha: 1.0 ];
        }
        else 
        {
            NSLog( @"oops - no image" );
        }

        CGSize s = CGContextConvertSizeToUserSpace( context, CGSizeMake( 40, 1 ));

        UIFont* f = [UIFont systemFontOfSize: s.width];

        [[UIColor blackColor] setFill];

        [[NSString stringWithFormat: @"%d,%d", tilex, tiley] drawInRect: [self rectForMapRect: mapRect] withFont: f];
    }

    UIGraphicsPopContext();
}

- (void) requestFinished: (ASIHTTPRequest *) tileRequest
{
    NSValue* mapRectValue =  [tileRequest.userInfo objectForKey: @"mapRect"];
    MKMapRect mapRect;  [mapRectValue getValue: &mapRect];

    NSValue *zoomScaleValue = [tileRequest.userInfo objectForKey:@"zoomScale"];
    MKZoomScale zoomScale; [zoomScaleValue getValue: &zoomScale];

    NSLog( @"requestFinished: %d, %d, %lf", 
          [[tileRequest.userInfo objectForKey:@"tilex"] intValue], 
          [[tileRequest.userInfo objectForKey:@"tiley"] intValue], 
          zoomScale  );

    [self setNeedsDisplayInMapRect: mapRect zoomScale: zoomScale];
} 
```

**编辑**： [我猜这可能是问题所在。](https://stackoverflow.com/questions/8157349/setneedsdisplayinrect-called-during-drawlayerincontext)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:35:19.097

我遇到了一个与此处描述的问题非常相似的问题。在我的情况下，我无法重现所需的行为（在[http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKOverlayView_class/Reference/Reference.html#//apple_ref/occ/instm/中描述MKOverlayView/setNeedsDisplayInMapRect:zoomScale](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKOverlayView_class/Reference/Reference.html#//apple_ref/occ/instm/MKOverlayView/setNeedsDisplayInMapRect:zoomScale) :) 即使有最简单的代码：

```
- (BOOL)canDrawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale {
    NSLog(@"This should trace forever");

    [self setNeedsDisplayInMapRect:mapRect zoomScale:zoomScale];
    return NO;
} 
```

或更接近我的原始代码：

```
- (BOOL)canDrawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale {
    NSLog(@"This should trace forever");

    [SomeAsynchronousRequestWithCompletionHandler:^{
        [self setNeedsDisplayInMapRect:mapRect zoomScale:zoomScale];
    }];
    return NO;
} 
```

在这两种情况下，*setNeedsDisplayInMapRect:zoomScale:*从未被调用过一次。

当我开始运行*setNeedsDisplayInMapRect:zoomScale:*时，情况发生了变化， dispatch_async 被分派到 canDrawMapRect 运行所在的同一个队列中，例如：

```
- (BOOL)canDrawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale {

    dispatch_queue_t queue = dispatch_get_current_queue();

    NSLog(@"This should trace forever");

    dispatch_async(queue, ^{
        [self setNeedsDisplayInMapRect:mapRect zoomScale:zoomScale];
    });

    return NO;
} 
```

或包含异步作业：

```
- (BOOL)canDrawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale {
    NSLog(@"This should trace forever");

    dispatch_queue_t queue = dispatch_get_current_queue();

    [SomeAsynchronousRequestWithCompletionHandler:^{
        dispatch_async(queue, ^{
            [self setNeedsDisplayInMapRect:mapRect zoomScale:zoomScale];
        });
    }];
    return NO;
} 
```

使用 dispatch_async - 我可以看到*“这应该永远跟踪”*字符串被无休止地跟踪。我原来的问题也完全消失了。

后期更新：目前，我使用 dispatch_get_main_queue() 调用*setNeedsDisplayInMapRect:zoomScale:* like

```
- (BOOL)canDrawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale {
    NSLog(@"This should trace forever");

    [SomeAsynchronousRequestWithCompletionHandler:^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [self setNeedsDisplayInMapRect:mapRect zoomScale:zoomScale];
        });
    }];
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:28:42.143

上面的答案对我不起作用。从我使用的 NSLog 打印输出中，我可以看到正在使用不同的线程，尽管在 canDrawMapRect 中获取了 dispatch_get_current_queue() 并将其存储以供以后使用。至少在 iPad 4.3 模拟器中就是这种情况，我没有在设备上尝试过。

我的解决方案不太令人满意且更容易出错，即在调用前等待 x 时间。

```
-(void)setNeedsDisplay:(WebRequest*)webRequest
{  
   [webRequest retain];
   dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.25 * NSEC_PER_SEC), dispatch_get_main_queue(), 
   ^{
      [webRequest autorelease];
      [delegate setNeedsDisplayInMapRect:webRequest.request.requestedMapRect 
                              zoomScale:webRequest.request.requestedScale];
   });     
} 
```

# coldfusion - CFWheels - 未插入记录

> ID：10128448
> 
> 赞同：1
> 
> 时间：2012-04-12T17:12:04.107
> 
> 标签：coldfusion, cfc, railo, cfwheels

一般来说，我是 CFWheels 和框架的新手。

我正在关注 Wheels 网站上的截屏视频：http: [//cfwheels.org/screencasts/](http://cfwheels.org/screencasts/)

我完全按照本教程进行操作......唯一的区别是，他的表被命名为“人”，而我的表被命名为“用户”。我进行了相应的更改，但其他一切都保持不变。

他的单数是“人”，我的是“用户”。

这是我的“User.cfc”控制器中的插入代码：

```
<cfcomponent extends="Controller" output="true">

    <cffunction name="register">

        <cfset user = model("user").new() />

    </cffunction>

    <cffunction name="create">

        <cfset params.user['userUUID'] = createUUID() />
        <cfset params.user['userCreated'] = createODBCDateTime(now()) />
        <cfset params.user['userModified'] = createODBCDateTime(now()) />

        <cfset user = model("user").new(params.user) />
        <cfset user.save() />

    </cffunction>

</cfcomponent> 
```

现在，我也在我的视图中使用表单助手等，如下所示：

```
<cfparam name="user" />

<cfoutput>

#startFormTag( action="create" )#

<fieldset>

    <legend>Register</legend>

    #textField( label="User Name http://#cgi.server_name#/user/", objectName="user", property="userName" )#
    #textField( label="Email Address", objectName="user", property="userEmail" )#
    #textField( label="Password", objectName="user", property="userPassword" )#
    #submitTag( value="Register" )#

</fieldset>

#endFormTag()#

</cfoutput> 
```

很简单吧？所以我不明白为什么它没有插入。它是否与命名我的 CFC“用户”以及将我的单数名称设置为“用户”的名为“用户”的表有关？

当我提交表单时，没有错误。它执行得很好，但是如果我查看数据库，什么都没有。

我想的一件事......是......究竟轮子是如何知道要寻找什么表的？对此似乎没有任何解释。也许它只是找到了错误的表？

非常感谢，迈克尔

* * *

解决了！

大家好，只是为可能遇到此问题的其他人提供的更新。没有发生任何事情的原因是因为我的数据库表要求某些字段不能为空。CFWheels 没有抛出任何错误。一旦我将值传递给这些字段就很好了；所以一定要检查一下！

希望有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:37:07.840

Michael，首先我建议您将控制器重命名为 Users.cfc（复数）。

在 Wheels（以及 Rails 和其他类似的配置框架约定）中，模型是单数的（User.cfc），而控制器和表是复数的（Users.cfc）。您的代码看起来都很可靠，唯一让我震惊的是您的控制器被标记为“User.cfc”。

我在创建/更新控制器方法中可能会做的一件事是这样的：

```
if (user.save()){
    flashInsert(success="The user was created successfully.");
    redirectTo(action="index");
} else {
    flashInsert(error="There was an error creating the user.");
    renderPage(action="new");
} 
```

user.save() 将返回一个布尔值，如果出现问题并且保存失败，此条件允许您进行一些实际的错误处理/调查。

关于 Wheels 如何知道要查找什么表的问题，Wheels 按照惯例这样做了。[在这里解释它是如何工作的]它会检查您的模型，并且对于每个模型，它将检查您的数据库中是否存在复数版本。因此，如果有一个名为“User”的模型，那么 Wheels 将期望有一个名为“Users”的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:09:28.310

迈克尔，

我对模型对象函数进行故障排除的第一步通常是转储结果 allErrors() 方法。尝试保存后立即添加此行。

```
<cfdump var=user.allErrors() label="User Save Errors" abort /> 
```

MC

# python - OperationalError：外键不匹配

> ID：10128452
> 
> 赞同：2
> 
> 时间：2012-04-12T17:12:09.440
> 
> 标签：python, sqlite, foreign-keys, mismatch

我有两张表要填写，“msrun”和“feature”。'feature' 有一个指向 'msrun' 表的 'msrun_name' 列的外键。在表格中插入工作正常。但是，当我尝试从“功能”表中删除时，出现以下错误：

```
pysqlite2.dbapi2.OperationalError: foreign key mismatch 
```

从SQLite手册中的外键规则：

```
- The parent table does not exist, or
- The parent key columns named in the foreign key constraint do not exist, or
- The parent key columns named in the foreign key constraint are not the primary key of the parent table and are not subject to a unique constraint using collating sequence specified in the CREATE TABLE, or
- The child table references the primary key of the parent without specifying the primary key columns and the number of primary key columns in the parent do not match the number of child key columns. 
```

我看不到我违反了什么。我的创建表如下所示：

```
DROP TABLE IF EXISTS `msrun`;
-- -----------------------------------------------------
-- Table `msrun`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `msrun` (
  `msrun_name` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `description` VARCHAR(500) NOT NULL );

DROP TABLE IF EXISTS `feature`;
-- -----------------------------------------------------
-- Table `feature`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature` (
  `feature_id` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `intensity` DOUBLE NOT NULL ,
  `overallquality` DOUBLE NOT NULL ,
  `charge` INT NOT NULL ,
  `content` VARCHAR(45) NOT NULL ,
  `msrun_msrun_name` VARCHAR(40) NOT NULL ,
  CONSTRAINT `fk_feature_msrun1`
    FOREIGN KEY (`msrun_msrun_name` )
    REFERENCES `msrun` (`msrun_name` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE UNIQUE INDEX `id_UNIQUE` ON `feature` (`feature_id` ASC);
  CREATE INDEX `fk_feature_msrun1` ON `feature` (`msrun_msrun_name` ASC); 
```

据我所知，父表存在，外键指向正确的父键，父键是主键，外键指定主键列。

产生错误的脚本：

```
from pysqlite2 import dbapi2 as sqlite
import parseFeatureXML

connection = sqlite.connect('example.db')
cursor = connection.cursor()    
cursor.execute("PRAGMA foreign_keys=ON")

inputValues = ('example', 'description')
cursor.execute("INSERT INTO `msrun` VALUES(?, ?)", inputValues)
featureXML = parseFeatureXML.Reader('../example_scripts/example_files/input/featureXML_example.featureXML')

for feature in featureXML.getSimpleFeatureInfo():
    inputValues = (featureXML['id'], featureXML['intensity'],
                   featureXML['overallquality'], featureXML['charge'], 
                   featureXML['content'], 'example')
    # insert the values into msrun using ? for sql injection safety
    cursor.execute("INSERT INTO `feature` VALUES(?,?,?,?,?,?)", inputValues)
connection.commit()

for feature in featureXML.getSimpleFeatureInfo():
    cursor.execute("DELETE FROM `feature` WHERE feature_id = ?", (str(featureXML['id']),)) 
```

* * *

## 编辑：

这些是具有链接到功能的外键的表。他们还没有被填满：

```
DROP TABLE IF EXISTS `convexhull`;
-- -----------------------------------------------------
-- Table `convexhull`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `convexhull` (
  `convexhull_id` INT PRIMARY KEY NOT NULL ,
  `mz` DOUBLE NOT NULL ,
  `rt` DOUBLE NOT NULL ,
  `feature_feature_id` VARCHAR(40) NOT NULL ,
  CONSTRAINT `fk_convexhull_feature`
    FOREIGN KEY (`feature_feature_id` )
    REFERENCES `feature` (`feature_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_convexhull_feature` ON `convexhull` (`feature_feature_id` ASC);

DROP TABLE IF EXISTS `position`;
-- -----------------------------------------------------
-- Table `position`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `position` (
  `position_id` INT PRIMARY KEY NOT NULL ,
  `dim0` INT NOT NULL ,
  `dim1` INT NOT NULL ,
  `feature_feature_id` VARCHAR(40) NOT NULL ,
  CONSTRAINT `fk_position_feature1`
    FOREIGN KEY (`feature_feature_id` )
    REFERENCES `feature` (`feature_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_position_feature1` ON `position` (`feature_feature_id` ASC);

DROP TABLE IF EXISTS `userParam_names`;
-- -----------------------------------------------------
-- Table `userParam_names`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `userParam_names` (
  `userParam_id` INT PRIMARY KEY NOT NULL ,
  `Name` VARCHAR(45) NOT NULL );

DROP TABLE IF EXISTS `feature_has_userParam_names`;
-- -----------------------------------------------------
-- Table IF EXISTS `feature_has_userParam_names`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature_has_userParam_names` (
  `feature_feature_id` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `userParam_names_userParam_id` INT NOT NULL ,
  CONSTRAINT `fk_feature_has_userParam_names_feature1`
    FOREIGN KEY (`feature_feature_id` )
    REFERENCES `feature` (`feature_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_feature_has_userParam_names_userParam_names1`
    FOREIGN KEY (`userParam_names_userParam_id` )
    REFERENCES `userParam_names` (`userParam_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_feature_has_userParam_names_userParam_names1` ON `feature_has_userParam_names` (`userParam_names_userParam_id` ASC);
  CREATE INDEX `fk_feature_has_userParam_names_feature1` ON `feature_has_userParam_names` (`feature_feature_id` ASC);

DROP TABLE IF EXISTS `userParam_value`;
-- -----------------------------------------------------
-- Table IF EXISTS `userParam_value`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `userParam_value` (
  `iduserParam_value` INT PRIMARY KEY NOT NULL ,
  `userParam_name` VARCHAR(45) NOT NULL ,
  `value` VARCHAR(45) NOT NULL );

DROP TABLE IF EXISTS `feature_has_userParam_names_has_userParam_value`;
-- -----------------------------------------------------
-- Table `feature_has_userParam_names_has_userParam_value`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature_has_userParam_names_has_userParam_value` (
  `feature_has_userParam_names_feature_feature_id` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `feature_has_userParam_names_userParam_names_userParam_id` INT NOT NULL ,
  `userParam_value_iduserParam_value` INT NOT NULL ,
  CONSTRAINT `fk_feature_has_userParam_names_has_userParam_value_feature_ha1`
    FOREIGN KEY (`feature_has_userParam_names_feature_feature_id` , `feature_has_userParam_names_userParam_names_userParam_id` )
    REFERENCES `feature_has_userParam_names` (`feature_feature_id` , `userParam_names_userParam_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_feature_has_userParam_names_has_userParam_value_userParam_1`
    FOREIGN KEY (`userParam_value_iduserParam_value` )
    REFERENCES `userParam_value` (`iduserParam_value` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_feature_has_userParam_names_has_userParam_value_userParam_1` ON  `feature_has_userParam_names_has_userParam_value` (`userParam_value_iduserParam_value` ASC);
  CREATE INDEX `fk_feature_has_userParam_names_has_userParam_value_feature_ha1` ON  `feature_has_userParam_names_has_userParam_value` (`feature_has_userParam_names_feature_feature_id` ASC, `feature_has_userParam_names_userParam_names_userParam_id` ASC); 
```

当我从 SQLite 管理器执行删除语句时，它确实有效。

* * *

## 编辑2：

完整追溯：

```
Traceback (most recent call last):
  File "/homes/ndeklein/workspace/MS/Trunk/PyMS_dev/database/test.py", line 25, in <module>
    cursor.execute("DELETE FROM `feature` WHERE feature_id = 'f_13020522388175237334'")
pysqlite2.dbapi2.OperationalError: foreign key mismatch 
```

正在做

```
DELETE FROM `feature` WHERE feature_id = 'f_13020522388175237334' 
```

在 SQLite 管理器中工作。

* * *

## 编辑 3

包括所有表格：

```
--------------------------------------------------------
-- pyMS database. Drops all tables before it makes them, should be changed before release
--------------------------------------------------------

DROP TABLE IF EXISTS `msrun`;
-- -----------------------------------------------------
-- Table `msrun`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `msrun` (
  `msrun_name` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `description` VARCHAR(500) NOT NULL );

DROP TABLE IF EXISTS `feature`;
-- -----------------------------------------------------
-- Table `feature`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature` (
  `feature_id` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `intensity` DOUBLE NOT NULL ,
  `overallquality` DOUBLE NOT NULL ,
  `charge` INT NOT NULL ,
  `content` VARCHAR(45) NOT NULL ,
  `msrun_msrun_name` VARCHAR(40) NOT NULL ,
  CONSTRAINT `fk_feature_msrun1`
    FOREIGN KEY (`msrun_msrun_name` )
    REFERENCES `msrun` (`msrun_name` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE UNIQUE INDEX `id_UNIQUE` ON `feature` (`feature_id` ASC);
  CREATE INDEX `fk_feature_msrun1` ON `feature` (`msrun_msrun_name` ASC);

DROP TABLE IF EXISTS `convexhull`;
-- -----------------------------------------------------
-- Table `convexhull`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `convexhull` (
  `convexhull_id` INT PRIMARY KEY NOT NULL ,
  `mz` DOUBLE NOT NULL ,
  `rt` DOUBLE NOT NULL ,
  `feature_feature_id` VARCHAR(40) NOT NULL ,
  CONSTRAINT `fk_convexhull_feature`
    FOREIGN KEY (`feature_feature_id` )
    REFERENCES `feature` (`feature_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_convexhull_feature` ON `convexhull` (`feature_feature_id` ASC);

DROP TABLE IF EXISTS `position`;
-- -----------------------------------------------------
-- Table `position`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `position` (
  `position_id` INT PRIMARY KEY NOT NULL ,
  `dim0` INT NOT NULL ,
  `dim1` INT NOT NULL ,
  `feature_feature_id` VARCHAR(40) NOT NULL ,
  CONSTRAINT `fk_position_feature1`
    FOREIGN KEY (`feature_feature_id` )
    REFERENCES `feature` (`feature_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_position_feature1` ON `position` (`feature_feature_id` ASC);

DROP TABLE IF EXISTS `userParam_names`;
-- -----------------------------------------------------
-- Table `userParam_names`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `userParam_names` (
  `userParam_id` INT PRIMARY KEY NOT NULL ,
  `Name` VARCHAR(45) NOT NULL );

DROP TABLE IF EXISTS `feature_has_userParam_names`;
-- -----------------------------------------------------
-- Table IF EXISTS `feature_has_userParam_names`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature_has_userParam_names` (
  `feature_feature_id` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `userParam_names_userParam_id` INT NOT NULL ,
  CONSTRAINT `fk_feature_has_userParam_names_feature1`
    FOREIGN KEY (`feature_feature_id` )
    REFERENCES `feature` (`feature_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_feature_has_userParam_names_userParam_names1`
    FOREIGN KEY (`userParam_names_userParam_id` )
    REFERENCES `userParam_names` (`userParam_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_feature_has_userParam_names_userParam_names1` ON `feature_has_userParam_names` (`userParam_names_userParam_id` ASC);
  CREATE INDEX `fk_feature_has_userParam_names_feature1` ON `feature_has_userParam_names` (`feature_feature_id` ASC);

DROP TABLE IF EXISTS `userParam_value`;
-- -----------------------------------------------------
-- Table IF EXISTS `userParam_value`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `userParam_value` (
  `iduserParam_value` INT PRIMARY KEY NOT NULL ,
  `userParam_name` VARCHAR(45) NOT NULL ,
  `value` VARCHAR(45) NOT NULL );

DROP TABLE IF EXISTS `feature_has_userParam_names_has_userParam_value`;
-- -----------------------------------------------------
-- Table `feature_has_userParam_names_has_userParam_value`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature_has_userParam_names_has_userParam_value` (
  `feature_has_userParam_names_feature_feature_id` VARCHAR(40) PRIMARY KEY NOT NULL ,
  `feature_has_userParam_names_userParam_names_userParam_id` INT NOT NULL ,
  `userParam_value_iduserParam_value` INT NOT NULL ,
  CONSTRAINT `fk_feature_has_userParam_names_has_userParam_value_feature_ha1`
    FOREIGN KEY (`feature_has_userParam_names_feature_feature_id` , `feature_has_userParam_names_userParam_names_userParam_id` )
    REFERENCES `feature_has_userParam_names` (`feature_feature_id` , `userParam_names_userParam_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_feature_has_userParam_names_has_userParam_value_userParam_1`
    FOREIGN KEY (`userParam_value_iduserParam_value` )
    REFERENCES `userParam_value` (`iduserParam_value` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_feature_has_userParam_names_has_userParam_value_userParam_1` ON  `feature_has_userParam_names_has_userParam_value` (`userParam_value_iduserParam_value` ASC);
  CREATE INDEX `fk_feature_has_userParam_names_has_userParam_value_feature_ha1` ON  `feature_has_userParam_names_has_userParam_value` (`feature_has_userParam_names_feature_feature_id` ASC, `feature_has_userParam_names_userParam_names_userParam_id` ASC);

DROP TABLE IF EXISTS `precursor`;
-- -----------------------------------------------------
-- Table `precursor`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `precursor` (
  `precursor_id` INT PRIMARY KEY NOT NULL ,
  `ion_mz` DOUBLE NOT NULL ,
  `charge_state` INT NOT NULL ,
  `peak_intensity` DOUBLE NOT NULL );

DROP TABLE IF EXISTS `spectrum`;
-- -----------------------------------------------------
-- Table `spectrum`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `spectrum` (
  `spectrum_index` INT PRIMARY KEY NOT NULL ,
  `ms_level` INT NOT NULL ,
  `base_peak_mz` DOUBLE NOT NULL ,
  `base_peak_intensity` DOUBLE NOT NULL ,
  `total_ion_current` DOUBLE NOT NULL ,
  `lowest_observes_mz` DOUBLE NOT NULL ,
  `highest_observed_mz` DOUBLE NOT NULL ,
  `scan_start_time` DOUBLE NOT NULL ,
  `ion_injection_time` DOUBLE NOT NULL ,
  `msrun_msrun_name` VARCHAR(40) NOT NULL ,
  `precursor_precursor_id` INT NOT NULL ,
  CONSTRAINT `fk_spectrum_msrun1`
    FOREIGN KEY (`msrun_msrun_name` )
    REFERENCES `msrun` (`msrun_name` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_spectrum_precursor1`
    FOREIGN KEY (`precursor_precursor_id` )
    REFERENCES `precursor` (`precursor_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_spectrum_msrun1` ON `spectrum` (`msrun_msrun_name` ASC);
  CREATE INDEX `fk_spectrum_precursor1` ON `spectrum` (`precursor_precursor_id` ASC);

DROP TABLE IF EXISTS `spectrum_has_feature`;
-- -----------------------------------------------------
-- Table `spectrum_has_feature`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `spectrum_has_feature` (
  `spectrum_spectrum_index` INT PRIMARY KEY NOT NULL ,
  `spectrum_msrun_msrun_name` VARCHAR(40) NOT NULL ,
  `spectrum_precursor_precursor_id` INT NOT NULL ,
  `feature_feature_id` VARCHAR(40) NOT NULL ,
  `feature_msrun_msrun_name` VARCHAR(40) NOT NULL ,
  CONSTRAINT `fk_spectrum_has_feature_spectrum1`
    FOREIGN KEY (`spectrum_spectrum_index` , `spectrum_msrun_msrun_name` , `spectrum_precursor_precursor_id` )
    REFERENCES `spectrum` (`spectrum_index` , `msrun_msrun_msrun_name` , `precursor_precursor_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_spectrum_has_feature_feature1`
    FOREIGN KEY (`feature_feature_id` , `feature_msrun_msrun_name` )
    REFERENCES `feature` (`feature_id` , `msrun_msrun_msrun_name` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_spectrum_has_feature_feature1` ON `spectrum_has_feature` (`feature_feature_id` ASC, `feature_msrun_msrun_name` ASC);
  CREATE INDEX `fk_spectrum_has_feature_spectrum1` ON `spectrum_has_feature` (`spectrum_spectrum_index` ASC, `spectrum_msrun_msrun_name` ASC, `spectrum_precursor_precursor_id` ASC); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:30:51.597

你提到它在 SQLite Manager 中工作。我也无法重现，所以我想知道 pysqlite2 的版本（或其 sqlite 版本）是否存在问题，或者代码中其他地方的一些副作用。

您可以发布 pysqlite2 及其 sqlite 的版本吗？我就是这样做的：

```
>>> from pysqlite2 import dbapi2 as sqlite
>>> sqlite.version
'2.3.5'
>>> sqlite.sqlite_version
'3.7.7.1' 
```

**更新**

你能运行这个程序，如果你仍然得到错误，请告诉我？

```
#!/usr/bin/python
from pysqlite2 import dbapi2 as sqlite

conn = sqlite.connect(':memory:')
cu = conn.cursor()
cu.executescript("""
DROP TABLE IF EXISTS msrun;
CREATE  TABLE IF NOT EXISTS msrun (
  msrun_name VARCHAR(40) PRIMARY KEY NOT NULL ,
  description VARCHAR(500) NOT NULL );

DROP TABLE IF EXISTS feature;
CREATE  TABLE IF NOT EXISTS feature (
  feature_id VARCHAR(40) PRIMARY KEY NOT NULL ,
  msrun_msrun_name VARCHAR(40) NOT NULL ,
  CONSTRAINT fk_feature_msrun1
    FOREIGN KEY (msrun_msrun_name )
    REFERENCES msrun (msrun_name )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE UNIQUE INDEX id_UNIQUE ON feature (feature_id ASC);
  CREATE INDEX fk_feature_msrun1 ON feature (msrun_msrun_name ASC);

DROP TABLE IF EXISTS convexhull;
CREATE  TABLE IF NOT EXISTS convexhull (
  convexhull_id INT PRIMARY KEY NOT NULL ,
  mz DOUBLE NOT NULL ,
  rt DOUBLE NOT NULL ,
  feature_feature_id VARCHAR(40) NOT NULL ,
  CONSTRAINT fk_convexhull_feature
    FOREIGN KEY (feature_feature_id )
    REFERENCES feature (feature_id )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX fk_convexhull_feature ON convexhull (feature_feature_id ASC);

DROP TABLE IF EXISTS position;
CREATE  TABLE IF NOT EXISTS position (
  position_id INT PRIMARY KEY NOT NULL ,
  dim0 INT NOT NULL ,
  dim1 INT NOT NULL ,
  feature_feature_id VARCHAR(40) NOT NULL ,
  CONSTRAINT fk_position_feature1
    FOREIGN KEY (feature_feature_id )
    REFERENCES feature (feature_id )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX fk_position_feature1 ON position (feature_feature_id ASC);

DROP TABLE IF EXISTS userParam_names;
CREATE  TABLE IF NOT EXISTS userParam_names (
  userParam_id INT PRIMARY KEY NOT NULL ,
  Name VARCHAR(45) NOT NULL );

DROP TABLE IF EXISTS feature_has_userParam_names;
CREATE  TABLE IF NOT EXISTS feature_has_userParam_names (
  feature_feature_id VARCHAR(40) PRIMARY KEY NOT NULL ,
  userParam_names_userParam_id INT NOT NULL ,
  CONSTRAINT fk_feature_has_userParam_names_feature1
    FOREIGN KEY (feature_feature_id )
    REFERENCES feature (feature_id )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_feature_has_userParam_names_userParam_names1
    FOREIGN KEY (userParam_names_userParam_id )
    REFERENCES userParam_names (userParam_id )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX fk_feature_has_userParam_names_userParam_names1 ON feature_has_userParam_names (userParam_names_userParam_id ASC);
  CREATE INDEX fk_feature_has_userParam_names_feature1 ON feature_has_userParam_names (feature_feature_id ASC);

DROP TABLE IF EXISTS userParam_value;
CREATE  TABLE IF NOT EXISTS userParam_value (
  iduserParam_value INT PRIMARY KEY NOT NULL ,
  userParam_name VARCHAR(45) NOT NULL ,
  value VARCHAR(45) NOT NULL );

DROP TABLE IF EXISTS feature_has_userParam_names_has_userParam_value;
CREATE  TABLE IF NOT EXISTS feature_has_userParam_names_has_userParam_value (
  feature_has_userParam_names_feature_feature_id VARCHAR(40) PRIMARY KEY NOT NULL ,
  feature_has_userParam_names_userParam_names_userParam_id INT NOT NULL ,
  userParam_value_iduserParam_value INT NOT NULL ,
  CONSTRAINT fk_feature_has_userParam_names_has_userParam_value_feature_ha1
    FOREIGN KEY (feature_has_userParam_names_feature_feature_id , feature_has_userParam_names_userParam_names_userParam_id )
    REFERENCES feature_has_userParam_names (feature_feature_id , userParam_names_userParam_id )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_feature_has_userParam_names_has_userParam_value_userParam_1
    FOREIGN KEY (userParam_value_iduserParam_value )
    REFERENCES userParam_value (iduserParam_value )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX fk_feature_has_userParam_names_has_userParam_value_userParam_1 ON  feature_has_userParam_names_has_userParam_value (userParam_value_iduserParam_value ASC);
  CREATE INDEX fk_feature_has_userParam_names_has_userParam_value_feature_ha1 ON  feature_has_userParam_names_has_userParam_value (feature_has_userParam_names_feature_feature_id ASC, feature_has_userParam_names_userParam_names_userParam_id ASC);
""")

conn.commit()
cu.execute("PRAGMA foreign_keys=ON")
cu.execute("INSERT INTO msrun VALUES (?,?)", ('bar', 'bar'))
cu.execute("INSERT INTO feature VALUES (?,?)", ('foo','bar'))
cu.execute("INSERT INTO feature VALUES (?,?)", ('foo1','bar'))
conn.commit()

cu.execute("SELECT * FROM feature")
print(cu.fetchall())

cu.execute("DELETE FROM feature WHERE feature_id=?", ("foo", ))
cu.execute("DELETE FROM feature WHERE feature_id=?", (str("foo1"), ))
conn.commit()

cu.execute("SELECT * FROM feature")
print(cu.fetchall()) 
```

**更新 2**

根据您发布的架构，您没有收到任何错误的事实应排除`features`表及其依赖项存在任何问题。根据sqlite docs，我现在假设您有一些其他外键来自/到`features`您未包含的表的任何后代/上升对象（例如，您未提及的某些表取决于您提到的某些表，这取决于`features`）。

以下是[关于外键的 sqlite 文档](http://www.sqlite.org/foreignkeys.html)的一部分，让我相信：

> 如果数据库模式包含需要查看多个表定义来识别的外键错误，则在创建表时不会检测到这些错误。相反，此类错误会阻止应用程序准备 SQL 语句，这些语句以使用外键的方式修改子表或父表的内容。更改内容时报告的错误是“DML 错误”，更改架构时报告的错误是“DDL​​ 错误”。因此，换句话说，需要同时查看子项和父项的错误配置的外键约束是 DML 错误。外键 DML 错误的英文错误消息通常是“**外键不匹配**”，但如果父表不存在，也可以是“没有这样的表”。

如果您没有注意到，您得到的错误与关于 FK 违规的错误不同：

```
pysqlite2.dbapi2.IntegrityError: foreign key constraint failed 
```

**更新 3**

您的问题在于`spectrum_has_feature`引用不存在的字段的FK `feature`：

```
CREATE  TABLE IF NOT EXISTS spectrum_has_feature (
<...>
FOREIGN KEY (feature_feature_id , feature_msrun_msrun_name )
REFERENCES feature (
    feature_id , 
    msrun_msrun_msrun_name ) -- <<< shouldn't this be msrun_msrun_name?
<...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T15:54:50.867

我更新到`Django==2.0`. 我需要的修复只是删除我编写的所有迁移`Django==1.11.6`并运行一个新`makemigrations`的`2.0`. 当然，如果我有任何托管我的应用程序的数据库需要维护迁移文件，我就无法做到这一点

# python - 保存python TempFile的快速方法？

> ID：10128455
> 
> 赞同：8
> 
> 时间：2012-04-12T17:12:21.823
> 
> 标签：python, temporary-files

我正在使用`tempfile.TemporaryFile`一些中间处理。该程序在关闭时很好地为我删除了临时文件，这正是我大部分时间想要的行为。但是有没有办法在发生（陷入）错误或其他异常情况时保存文件以供检查？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T17:16:13.493

寻找开头并使用[`shutil.copyfileobj()`](http://docs.python.org/library/shutil.html#shutil.copyfileobj)将数据复制到您创建的文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T17:17:36.567

使用`tempfile.mkstemp()`. 根据文档：

> 与 TemporaryFile() 不同，mkstemp() 的用户负责删除完成后的临时文件。

[在这里](http://docs.python.org/library/tempfile.html#tempfile.mkstemp)阅读更多。

# css - 使用 Firefox 浏览器时网站有太多填充

> ID：10128459
> 
> 赞同：0
> 
> 时间：2012-04-12T17:12:54.210
> 
> 标签：css, firefox, whitespace, padding

我的团队为大学写作会议创建了一个网站。我们的问题是，在使用火狐浏览器时，页面底部的空白区域太多，几乎是一整页的价值！

在 Safari 和资源管理器中，空白在页脚之后结束。

为什么在 Firefox 上会这样？

[这是](http://condor.depaul.edu/writing/ncptw2012/)网站的链接，下面是我们的 CSS 代码；

```
 /* CSS Reset */
* { margin:0; padding:0; }
html,
body {
    margin:0;
    padding:0;
    height:100%;  
    /* IE10 */ 
    background-image: -ms-linear-gradient(top, #FFFFFF 0%, #C2E6F6 100%);

    /* Mozilla Firefox */ 
    background-image: -moz-linear-gradient(top, #FFFFFF 0%, #C2E6F6 100%);

    /* Opera */ 
    background-image: -o-linear-gradient(top, #FFFFFF 0%, #C2E6F6 100%);

    /* Webkit (Safari/Chrome 10) */ 
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #FFFFFF), color-stop(1, #C2E6F6));

    /* Webkit (Chrome 11+) */ 
    background-image: -webkit-linear-gradient(top, #FFFFFF 0%, #C2E6F6 100%);

    /* Proposed W3C Markup */ 
    background-image: linear-gradient(top, #FFFFFF 0%, #C2E6F6 100%);
    background-attachment:fixed;
    font-family: 'Telex'; sans-serif;
}

h1 {
    font-family: 'Asap', sans-serif;
    font-size:50px;
    color:#FF3300;
}

h2 {
    font-family: 'Asap', sans-serif;
    font-size:40px;
    color:#FF9E00;
}

h3 {
    font-family: 'Asap', sans-serif;
    font-size:30px;
    color:#FF3300;
}
h3 a {font-family: 'Asap', sans-serif;
    font-size:30px;
    color:#FF3300;
}

p {
    font-family: 'Telex', sans-serif;
    font-size:18px;
    margin-top:1.2em;
    margin-bottom:1.2em;
}
p.normal {font-style:normal;}
p.italic {font-style:italic;}
p.oblique {font-style:oblique;}
table.center {
    margin-left:auto; 
    margin-right:auto;
}
ul {
    font-family: 'Telex', sans-serif;
}
ul li {
    font-family: 'Telex', sans-serif;
    margin-left:20px;
}
img.centered {
    display: block;
    margin-left: auto;
    margin-right: auto 
}
a img {
    border: none;
}
#container {
  position:relative;
  width:960px;
  margin:0 auto;
}
#header {
  height:175px;
  width:960px;
  margin: 0 auto 0 auto;
  position:relative;
}
#header h1 {
  display:block;
  float:left;
  width:600px;
  height:175px;
  background:url(img/ncptwbanner.gif) no-repeat 0 0;
  background-size:600px 175px;
  text-indent:-10000px;
  }
#header h1 a {
  display:block;
  position:absolute;
  width:600px;
  height:175px;
}  
#header h2 {
    display:block;
    float:right;  
    position:relative;
    width:315px;
    height:182px;
    margin:0;
    background:url(img/chicago_box.jpg) no-repeat 0 0;
    text-indent:-10000px;
  }
#navigation {
    width:960px;
    height:90px;
    margin:0 auto 0 auto;
}
#navigation ul {
  display:block;
  float:right;
  width:960px;
  height:90px;
  background:url(img/menu.jpg) no-repeat 0 0;
  list-style:none;
  padding:0;
}
#navigation ul li {
  display:block;
  float:left;  
  height:90px;
  text-indent:-10000px;
  margin-left:0px;
 }
#about {
  width:221px;
}
#call {
  width:203px;
}
#schedule {
  width:140px;
}
#explore {
  width:217px;
}
#register {
  width:179px;
}
#navigation ul li a {
  display:block;
  width:100%;
  height:100%;
}
#about a:hover {
  background:url(img/menu.jpg) no-repeat 0 -90px;
}
#call a:hover {
  background:url(img/menu.jpg) no-repeat -221px -90px;
}
#schedule a:hover {
  background:url(img/menu.jpg) no-repeat -424px -90px;
}
#explore a:hover {
  background:url(img/menu.jpg) no-repeat -564px -90px;
}
#register a:hover {
  background:url(img/menu.jpg) no-repeat -781px -90px; 
}
#body {
    display:relative;
    float:left;
    width:960px;
    margin-top: 15px;
    margin-bottom: 15px;
    padding:10px;
    -moz-box-shadow: 0 0 5px 5px #888;
    -webkit-box-shadow: 0 0 5px 5px#888;
    box-shadow: 0 0 5px 5px #888;
}

.imgLeft {
    display:inline-block;
    float:left;
    margin:2px;
    padding:0;
    border-style:solid;
    border-width:3px;
}
.imgRight {
    display:inline-block;
    float:right;
    margin: 2px;
    padding:0;
    border-style:solid;
    border-width:3px;
}
#featured_text {
    display:inline-block;
    float:left;
    width:520px;
    margin:auto;
    padding:4px;
}
#single_column_featured_text {
    display:block;
    float:left;
    width: 950px;
    margin: 0px 0px 0px 0px;
    padding: 0px 10px 0px;
}
#single_column_featured_text h1 {
    font-size:30px;
}
#second_column {
    display:inline-block;
    float:left;
    width:420px;
    margin:0;
    padding:4px;
}
#john_hancock {
    position:relative;
    width:142px;
    height:660px;
    float:left;
    left:-142px;
    bottom:660px;
    margin-left:-10px;
    padding:4px;
}
#sears_tower {
    position:relative;
    width:156px;
    height:822px;
    float:right;
    right:-156px;
    bottom:822px;
    margin-right:-45px;
    padding:4px;
}
footer { 
   position:absolute;
   bottom:0;
   width:100%;
   height:20px;   /* Height of the footer */
 }
#footer p {
  margin:0;
  padding:10px;
  font-size:.75em;
  text-align:center;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:27:51.337

问题来自`#john_hancock`和`#sears_tower`。它们拥有并且它们通过财产`position: relative`从其自然位置移动。`bottom`它的自然位置位于页面的底部空间。问题是设置了相对位置的元素仍然保留了最初为它们保留的空间。[查看此链接以获取更多信息。](http://www.w3.org/TR/CSS2/visuren.html#relative-positioning)

我认为你能做的最好的事情是稍微改变你的标记并用 CSS 显示这两个塔图像作为背景图像。这是更正确的，因为图像不是内容，而是风格。HTML 用于内容而不是样式。这样你就不会遇到这些布局问题。

# iphone - 我有一个 EXC_BAD_ACCESS，但我似乎无法找出原因

> ID：10128463
> 
> 赞同：1
> 
> 时间：2012-04-12T17:12:58.267
> 
> 标签：iphone, objective-c, ios, ios4

所以这是理解我的问题所需的背景代码。在我的视图控制器类中，我有一个方法可以创建一个名为 levelStart 的数组，然后将该数组发送到我的游戏类，该类使用该数组进行自我初始化，然后我有一组函数使用该数组“玩游戏” . 这是视图控制器代码：

```
 NSMutableArray* levelStart = [[NSMutableArray alloc] init];
    NSMutableArray* levelFinish = [[NSMutableArray alloc] init];
    NSString* startString = [[NSString alloc] initWithString:@"9999999999988888888998888888899888888889988888888998888888899888888889911888888991188888899999999999"];
    NSString* finishString = [[NSString alloc] initWithString:@"9999999999988888811998888881199888888889988888888998888888899888888889988888888998888888899999999999"];
    int currentsquare;
    for (int i = 0; i < 100; i++) {
        currentsquare = [startString characterAtIndex:i] - '0';
        if (currentsquare == 1) {
            NSNumber* numb1 = [[NSNumber alloc] initWithInt:1];
            [levelStart addObject:numb1];
        }
        if (currentsquare == 2) {
            NSNumber* numb2 = [[NSNumber alloc] initWithInt:2];
            [levelStart addObject:numb2];
        }
        if (currentsquare == 3) {
            NSNumber* numb3 = [[NSNumber alloc] initWithInt:3];
            [levelStart addObject:numb3];
        }
        if (currentsquare == 4) {
            NSNumber* numb4 = [[NSNumber alloc] initWithInt:4];
            [levelStart addObject:numb4];
        }
        if (currentsquare == 8) {
            NSNumber* numb8 = [[NSNumber alloc] initWithInt:8];
            [levelStart addObject:numb8];
        }
        if (currentsquare == 9) {
            NSNumber* numb9 = [[NSNumber alloc] initWithInt:9];
            [levelStart addObject:numb9];
        }
    }
    for (int i = 0; i < 100; i++) {
        currentsquare = [finishString characterAtIndex:i] - '0';
        if (currentsquare == 1) {
            NSNumber* fnumb1 = [[NSNumber alloc] initWithInt:1];
            [levelFinish addObject:fnumb1];
        }
        if (currentsquare == 2) {
            NSNumber* fnumb2 = [[NSNumber alloc] initWithInt:2];
            [levelFinish addObject:fnumb2];
        }
        if (currentsquare == 3) {
            NSNumber* fnumb3 = [[NSNumber alloc] initWithInt:3];
            [levelFinish addObject:fnumb3];
        }
        if (currentsquare == 4) {
            NSNumber* fnumb4 = [[NSNumber alloc] initWithInt:4];
            [levelFinish addObject:fnumb4];
        }
        if (currentsquare == 8) {
            NSNumber* fnumb8 = [[NSNumber alloc] initWithInt:8];
            [levelFinish addObject:fnumb8];
        }
        if (currentsquare == 9) {
            NSNumber* fnumb9 = [[NSNumber alloc] initWithInt:9];
            [levelFinish addObject:fnumb9];
        }
    }
    [startString release];
    [finishString release];
 //NOTE: I took out the intialization of control and level, both which work fine.
    myGame = [[Game alloc] initLevel:level With:levelStart AndFinish:levelFinish WithRows:10 WithColumns:10 WithControl:control]; 
```

在我的 Game 类中，这是初始化方法：

```
-(id)initLevel:(int)aLevel With:(NSMutableArray*)starter AndFinish:(NSMutableArray*)finisher WithRows:(int)rows WithColumns:(int)cols WithControl:(Coord)aControlSquare{
self = [super init];
if (self != nil){
    level = aLevel;
    squares = [[NSMutableArray alloc] init];
    squares = starter;
    finish = [[NSMutableArray alloc] init];
    finish = finisher;
}
return self;
} 
```

现在它一直冻结的方法是在游戏中，由 UIgesture 识别器触发，这里是它冻结的行：

```
 if ([[self squareForCoord:test] intValue] == 8) {
 ...
 } 
```

其中 squareForCord 获取测试坐标并返回该坐标处的 NSNumber。所以我确保我所有的测试都在界限内，并且它冻结的点在我的数组的范围内。我相信我正在正确初始化所有内容，但显然不是，这绝对不是发布发布的问题，所以我认为这一定是初始化问题，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:56:34.337

您的代码中存在一些问题，但我没有看到 EXC_BAD_ACCESS 源，但我对找到它有一些建议。

在此之前 - 以下是您可能想要修复的其他一些问题

1.  如果你像这样初始化本地字符串

    ```
    NSString* startString = @"9999999999988888888998888888899888888889988888888998888888899888888889911888888991188888899999999999"; 
    ```

    没有必要释放它们。这使您更有可能正确执行此操作。

2.  遍历字符时，不要硬编码长度。使用字符串的长度

    ```
    for (int i = 0; i < [startString length]; i++) { 
    ```

3.  你所有的 if 块都是这样的

    ```
    if (currentsquare == 1) {
        NSNumber* numb1 = [[NSNumber alloc] initWithInt:1];
        [levelStart addObject:numb1];
    } 
    ```

    可以通过这样做来替换（但是，请先阅读＃4）

    ```
    NSNumber* numb1 = [[NSNumber alloc] initWithInt:currentsquare];
    [levelStart addObject:numb1]; 
    ```

    无需检查每个可能的数字

4.  上面的代码泄漏了，所以真的应该是这样

    ```
    NSNumber* numb1 = [NSNumber numberWithInt:currentsquare];
    [levelStart addObject:numb1]; 
    ```

    每当您分配时，您可能需要释放，除非您将该责任转交给其他人。如果您阅读`addObject`文档，您会看到它调用了保留，因此它不对您的发布负责。在这种情况下 numberWithInt 返回一个自动释放的对象。

5.  这段代码

    ```
    squares = [[NSMutableArray alloc] init];
    squares = starter; 
    ```

    立即泄漏第一个数组。您将正方形设置为一个数组对象，然后设置一个完全不同的对象。对第一个的引用丢失了。应该删除第一行（与完成类似）。

如果这是一个新项目，那么我建议您立即将其转换为 ARC。这将使处理内存更容易。

但是，如果由于某种原因你不能，请阅读我写的解释 EXC_BAD_ACCESS 的博客：

[http://loufranco.com/blog/files/Understanding-EXC_BAD_ACCESS.html](http://loufranco.com/blog/files/Understanding-EXC_BAD_ACCESS.html)

简要（阅读后）这是我建议你做的

1.  运行分析并修复它发现的每一个错误。它使用与 ARC 相同的算法，并且很可能它指出的每个错误都是一个真正的问题（它会指出上面的问题 #4 和 #5）

2.  打开僵尸。我知道您认为您没有向已发布的对象发送消息，并且上面的代码中没有任何实例，但根据我所看到的，我认为很有可能存在。僵尸是保留计数为零的对象。当僵尸打开时，这些对象不再被释放，而是当你向它们发送消息时它们只会抱怨。

如果您在执行此操作后找不到问题，请查看博客中的其他建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:04:20.927

First off, do you ever release levelStart and levelFinish arrays in your first class implementation? If so this is the clear issue as you are not retaining these objects after you instantiate your second class. My suggestion is to use properties to hold your arrays in the second class. Something like

```
 @property (nonatomic, retain)  NSMutableArray      *squares;
 @property (nonatomic, retain)  NSMutableArray      *finish; 
```

In your declaration followed by:

```
@synthesize squares, finish; 
```

In your .m file and then finally make the assignments like so in your initializer:

```
 self.squares = starter;
   self.finish = finisher; 
```

Now you have a retained copy in the new class. Also I would consider using:

```
 myGame = [[Game alloc] initLevel:level With:[ levelStart autorelease ] AndFinish:[levelFinish autorelease] WithRows:10 WithColumns:10 WithControl:control]; 
```

for improved readability. Also, I would consider using ARC to avoid these problems.

# spring - ApplicationContextaware 工作

> ID：10128467
> 
> 赞同：3
> 
> 时间：2012-04-12T17:13:25.940
> 
> 标签：spring, applicationcontext

我需要知道 applicatoncontextaware 是如何工作的。我有 applicationContext.xml，它有一些导入资源（另一个 applicationContext）。我需要在我的 java 类中使用 applicationContext.xml 来使用其中的 spring bean。

我开始了解用于获取 java 类中的 spring bean 的 applicationcontextaware 类。Applicationaware 具有 set 和 getapplicationcontext() 方法。getapplicationcontext() 被定义为静态的。

applicationContextware如何加载applicationContext.xml？我是否需要提供 applicationContext.xml 的位置以便加载 applicationcontextaware？我如何在我的 java 类中使用它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T17:22:20.763

你混淆了几件事。首先我们在谈论[`ApplicationContextAware`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/ApplicationContextAware.html)类，对吧？它只有一种方法：

```
setApplicationContext(ApplicationContext applicationContext) 
```

您通常这样实现：

```
public class MyFancyBean implements ApplicationContextAware {

  private ApplicationContext applicationContext;

  void setApplicationContext(ApplicationContext applicationContext) {
    this.applicationContext = applicationContext;
  }

  public void businessMethod() {
    //use applicationContext somehow
  }

} 
```

但是，您很少需要`ApplicationContext`直接访问。通常，您启动它一次，然后让 bean 自动填充自己。

> 我需要在我的 java 类中使用 applicationContext.xml 来使用其中的 spring bean。

干得好：

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml"); 
```

请注意，您不必提及已包含在`applicationContext.xml`. 现在您可以简单地按名称或类型获取一个 bean：

```
ctx.getBean("someName") 
```

请注意，有很多方法可以启动 Spring - using `ContextLoaderListener`、`@Configuration`class 等。

# google-docs - 永久删除 Google 文档

> ID：10128468
> 
> 赞同：3
> 
> 时间：2012-04-12T17:13:27.610
> 
> 标签：google-docs, google-docs-api

我正在尝试使用 Java APIm 删除 Google 文档，它工作正常，但文档正在垃圾文件夹中。我希望文档即使从垃圾箱中也能永久删除。有人可以建议我如何解决这个问题吗？这是我一直用来删除文档的代码。

```
 DocsService docsService = new DocsService(domain);
    URL docURL = new URL("https://docs.google.com/feeds/default/private/full/"+resourceId+"?xoauth_requestor_id=" + loginUser);//No I18N
    DocumentListEntry sd=docsService.getEntry(docURL, DocumentListEntry.class);
    sd.delete(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:59:40.810

永久删除文件等同于使用查询参数“delete=true”（跳过垃圾箱）向文件的编辑 URL 发送 DELETE 请求：

```
DocsService docsService = new DocsService(domain);
URL docURL = new URL(
    "https://docs.google.com/feeds/default/private/full/"+resourceId+"?xoauth_requestor_id=" + loginUser + "&delete=true");
docsService.delete(docURL, "<ENTRY'S ETAG>"); 
```

如果你想绕过“etag”检查，你可以通过特殊值`"*"`。

# git - 如何在 git 中跳过提交？

> ID：10128473
> 
> 赞同：14
> 
> 时间：2012-04-12T17:13:42.590
> 
> 标签：git, git-commit

我有一些我不想在我的项目中提交的提交，但是有一个基于它们的提交，我确实想要在其中。这是我的 GitHub 存储库“网络”图（ASCII，因为我仍然无法发布图像）：

```
[]--[]--[_]
|        |
|        ------->|
---------->[·]--[·]--[*] 
```

(-> 表示合并)

我想删除在两个 [·] 提交中所做的更改，并将 [*] 一个基于上面的 [_] 一个。我尝试过合并和变基，但它们应用了不需要的提交的更改。是否可以？

对不起，如果我不清楚，英语不是我的母语。提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T17:32:18.103

我可以给你两个选择：

*   **交互式 rebase** ( `git rebase -i`) 为您呈现提交列表，编辑此列表将更改操作结果；允许您重新排序、删除或标记这些提交以进行杂项操作。在您的情况下，您可以将`[*]`'s 分支变基为`[_]`'s 并删除不需要的提交行。

*   **Cherrypick**允许您将*单个提交*的更改应用到另一个分支。在您的情况下，您可以简单地将cherrypick 提交`[*]`到`[_]`' 分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:30:02.657

你可以看看你`_`和[樱桃挑选](http://gitready.com/intermediate/2009/03/04/pick-out-individual-commits.html)的`*`。如果你想在一个单独的分支上这样做，你可以在这样做之前分支出来`_`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:22:00.937

您可以通过变基和压缩您不需要的提交来组合您的提交。可能是你没有做壁球和采摘。

[参考这个： http](http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html) ://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html

# c# - 使用 ErrorProvider 和验证事件进行表单验证

> ID：10128474
> 
> 赞同：4
> 
> 时间：2012-04-12T17:13:42.760
> 
> 标签：c#, winforms, validation, error-handling, errorprovider

我对使用验证还很陌生。我有一个 C# winform 项目，我想在关闭之前验证表单。但是，我只希望在单击按钮时进行此验证。所以我有一个像这样触发的事件：

```
if (!this.ValidateChildren())
{
   MessageBox.Show("Validation failed");
}
else
{
   MessageBox.Show("Validation passed with flying colours. :)");
   this.Close();
} 
```

如果验证成功，我只想关闭表单。很容易。但是，我不想在文本框失去焦点时运行验证，只有在验证整个表单时才运行。

我想要验证的每个控件，我都注册了“验证”事件。他们使用“e.Cancel = true;” 取消验证。我一直在使用 ErrorProvider 类来直观地支持这一点。

**所以基本问题是**，只有在我想要而不是在控件失去焦点时验证一组特定控件的最佳方法是什么？

编辑：目前作为一种解决方法，我有一个方法可以打开和关闭“CausesValidation”属性。我默认所有内容都不是 CauseValidation，在我使用事件验证整个表单之前启用它们，然后再次禁用它们。

我真的不认为这是一种理想的方法。还有更多“优雅”的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:44:33.470

[我认为这是使用错误提供程序组件](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)进行验证的最佳方式

（或）试试这个

[http://www.c-sharpcorner.com/uploadfile/john_charles/validating-data-entry-in-windows-forms-application/](http://www.c-sharpcorner.com/uploadfile/john_charles/validating-data-entry-in-windows-forms-application/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T05:43:39.380

我认为您正在寻找的是您在设置时获得的行为

```
form.Autovalidate = Disable 
```

或者

```
form.Autovalidate = EnableAllowFocusChange 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:41:42.937

我使用了以下几行：

1）在某种集合中定义要验证的控件。

2）编写一个验证例程，可能直接在按钮单击下，循环通过控件集合，检查控件内容的值/有效性。如果验证很复杂，可能会推迟每个控件的私有方法。

3) 如果控件的内容无效，请将其与验证消息一起传递给 ErrorProvider 的 SetError 方法。

4）根据有效状态，让表单关闭（DialogResult = OK）或保持表单打开（DialogResult = None）。

如果您这样做很多，您可以将验证重构为带有 ErrorProvider 的基本表单并从中继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-04T14:35:04.643

```
 private void TxtNama_Validating(object sender, CancelEventArgs e)
    {
        e.Cancel = string.IsNullOrEmpty(TxtNama.Text);
        this.errorProvider1.SetError(TxtNama, "Nama Barang Harus Diisi..!!");            
    }

    private void CmdSave_Click(object sender, EventArgs e)
    {
        if(this.ValidateChildren(ValidationConstraints.Enabled))
        {
            MessageBox.Show("Simpan Data Barang..?" , "SIMPAN DATA", MessageBoxButtons.OKCancel, MessageBoxIcon.Question);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T14:45:20.920

上面的例子工作得很好，但是将***errorProvider***对象与按钮结合起来很有趣。验证失败时让***object.ValidateChildren()***方法返回 false 需要一点时间。

关键似乎是将***CancelEventargs.Cancel***属性设置为 true；回想起来很明显，但也许这会节省其他人的时间。

```
 Form1.Autovalide = Disabled

    private void textBox2_Validating(object sender, CancelEventArgs e)
    {
       if (textBox2.Text.Length == 0)
       {
          errorProvider1.SetError(textBox2, "Must provide an entry.");
          e.Cancel = true;
       } else {
          errorProvider1.SetError(textbox2, "");
       }
    }

    private void button1_click(object sender, EventArgs e)
    {
       if (this.ValidateChildren(ValidationConstraints.Enabled | ValidationConstraints.ImmediateChildren))
       {
          MessageBox.Show("All's well.", "Valid", MessageBoxButtons.OK);
       }  else {
          MessageBox.Show("All is ruin and woe!", "Invalid", MessageBoxButtons.OK);
       }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-30T09:11:34.347

所以我知道我有点晚了。但是这个问题也让我很痛苦

我最终做的是使用取消按钮 MouseEnter 和 MouseLeave 事件

```
private void btnCancel_MouseEnter(object sender, EventArgs e)
        {
            AutoValidate = AutoValidate.Disable;
        }

private void btnCancel_MouseLeave(object sender, EventArgs e)
        {
            AutoValidate = AutoValidate.EnablePreventFocusChange;
        } 
```

当我输入要单击的按钮时，这将禁用验证，然后当单击取消按钮时，可以触发单击事件，我可以在其中执行任何所需的逻辑，包括清除错误。

# php - 使用（未知）可变数量的参数调用函数？

> ID：10128477
> 
> 赞同：4
> 
> 时间：2012-04-12T17:13:48.937
> 
> 标签：php, function, variadic

我需要将参数发送到函数

```
array_intersect_key() 
```

但有时我需要发送 2 个数组，有时 - 3 个或更多：

```
array_intersect_key($arr_1, $arr_2);
OR
array_intersect_key($arr_1, $arr_2, $arr_3, $arr_4); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T17:21:15.617

假设您想像这样创建自己的函数，关键是使用`func_get_args()`：

```
function mumble(){
    $args = func_get_args();
    foreach ($args as $arg){
        ... whatever
    }
} 
```

如果你只想用多个参数调用它，要么“就做”，要么使用`call_user_func_array()`：

```
$args = array();
... append args to $args
call_user_func_array('array_intersect_key', $args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:24:43.963

在询问标准功能之前，请先参考[http://php.net站点，因为您会在此处获得所有问题的解答。](http://php.net)

[http://php.net/manual/en/function.array-intersect-key.php](http://php.net/manual/en/function.array-intersect-key.php)

[http://php.net/manual/en/function.func-get-args.php](http://php.net/manual/en/function.func-get-args.php)

[http://php.net/manual/en/ref.funchand.php](http://php.net/manual/en/ref.funchand.php)

我收到了您的问题，这是您可以做到的一种方法：

```
$arr_of_arr = array($arr1, $arr2, $arr3, ..., $arrn); 
```

或者

```
$arr_of_arr = func_get_args();

if(count($arr_of_arr) > 1){
    for($i = 0; $i < count($arr_of_arr) - 1; $i++){
        if(! $i){
            $intersec = array_intersect_key($arr_of_arr[0], $arr_of_arr[1]);
            $i = 2;
        }
        else{
            $intersec = array_intersect_key($intersec, $arr_of_arr[$i++]);
        }
    }
} 
```

`$intersec`现在将包含交叉点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:20:34.160

```
call_user_func_array('foo', array('foo', 'bar', 'foo N'));

function foo($param1, $param2, $paramN) {
    // TADÁÁÁ
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:21:03.023

看看处理这个的[func_get_args() 方法](http://www.php.net/manual/en/function.func-get-args.php)；就像是：

```
function my_function() {
    $numArgs=func_num_args();
    if($numArgs>0) {
        $argList=func_get_args();
        for($i=0;$i<$numArgs;$i++) {
            // Do stuff with the argument here
            $currentArg=$argList[$i];
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T17:33:48.070

```
function foo()
{
    $numargs = func_num_args();
    echo "Number of arguments: $numargs<br />";
    $arg_list = func_get_args();
    foreach($arg_list  as $arg) {
        if(is_array($arg)) print_r($arg)."<br />";  
        else echo "<br />".$arg;
    }
}

foo(array(1,2,3), 2, 3); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-12T17:19:03.493

`array_intersect_key`已经有一个允许多个输入的原型：

```
array array_intersect_key ( array $array1 , array $array2 [, array $ ... ] ) 
```

所以我真的没有看到那里的问题。

# http - 从网络附加的虚拟目录中的 IIS 中的 HTTP 下载

> ID：10128480
> 
> 赞同：0
> 
> 时间：2012-04-12T17:14:03.663
> 
> 标签：http, iis, download, virtual-directory

我在从 IIS 中的映射文件夹下载文件（具有非标准扩展名）时遇到问题。“所有人”组对远程文件夹和共享文件夹具有完全访问权限。我可以下载 txt、mp3 文件，但是当我尝试获取 f4v/mp4 文件时，我得到 403：禁止错误。在 IIS 上添加了所有 MIME 类型（如果我在本地有这个文件夹，我可以获取所有类型的文件）。

任何想法，将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:51:32.770

当我需要通过 http 协议将 flash 文件从文件服务器下载到我们的网络服务器时，我遇到了同样的问题。我最终在文件服务器上安装了 IIS，并使用正确的 MIME 类型对其进行了配置，以便可以从网络服务器访问它。

# asp.net - 无法使用预编译的 ASP.NET 网站项目加载文件或程序集 App_Web_ *

> ID：10128482
> 
> 赞同：2
> 
> 时间：2012-04-12T17:14:21.340
> 
> 标签：asp.net, .net, web-site-project, precompiled

我在一个非常具体的页面上遇到了这个问题，我不知道如何解决它。我已经发现了几个 SO 问题（例如[ASP.NET 损坏的程序集“无法加载文件或程序集 App_Web_*”](https://stackoverflow.com/questions/784157/asp-net-corrupt-assembly-could-not-load-file-or-assembly-app-web)和[无法加载文件或程序集 App_Web_xxxxxxxx 或其依赖项之一](https://stackoverflow.com/questions/5538454/could-not-load-file-or-assembly-app-web-xxxxxxxx-or-one-of-its-dependencies)）并尝试了他们的解决方案，但无济于事。

回顾一下，这是我尝试过的：

*   `batch="false" numRecompilesBeforeAppRestart="50"`在 web.config 中设置

*   重新启动托管此网站的 IIS 网站

*   清除 ASP.NET 中的临时文件`%windir%\Framework64\v4.0.30319\Temporary ASP.NET Files`

*   已调动

...以及上述的任何组合，但无济于事。当我尝试从 VS 运行网站以及在没有预编译的情况下部署网站时，它工作得非常好。

以下是一些环境规格：

*   预编译是通过 Web 部署项目完成的。无论是 TFS 还是我进行了预编译都没有关系：问题仍然存在

*   .NET 版本为 4.0.30319

*   AppPool 设置：管道模式集成在 .NET 4.0 上

这是我打开时发生的特定错误`Customer.aspx`：

`Could not load file or assembly 'App_Web_qxcfa0wv, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.`

该页面注册了一个名为 的控件`UserManagement.ascx`，位于`~/Controls/UserManagement.ascx`。

该控件注册了另一个名为 的控件`UserDialog.ascx`，该控件位于`~/Controls/Dialogs/UserControl.ascx`。

最后一个控件使用一个`~/Controls/User.ascx`封装了用户数据的控件。没有进一步的依赖关系。

根据堆栈跟踪，错误位于`UserDialog.ascx`（`<%@ Control ... %>`指令）的第 1 行。

我不知所措。我的*猜测*是它不起作用，因为`~/Controls/Dialogs/UserDialog.ascx`需要一个位于父文件夹中的控件，这会导致在运行时出现一些过时的引用。有点像第一个 SO 问题中的问题描述。

但是，我不能简单地通过排除`~/Controls/User.ascx`控件来测试它，因为那样我在另一个使用的控件中遇到循环引用错误`~/Control/UserDialog.ascx`，即使该控件也没有注册任何其他控件。只有一个命名空间注册，大多数其他控件*都使用它。*

我会说循环引用和错误是相关的，但我不能完全说明如何。并非没有绘制整个依赖关系图。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:22:25.867

认真地将其转换为 Web 项目。将库和用户控件与网站模板一起使用时，这是一个已知问题。我在这里总结了一下：

[ASP.NET：网站与 Web 应用程序项目](http://codersbarn.com/post/2008/06/01/ASPNET-Web-Site-versus-Web-Application-Project.aspx)

有关 Rick Strahl 博客的更多信息（阅读评论）：

[了解 ASP.NET 2.0 中的页面继承](http://www.west-wind.com/weblog/posts/2005/Sep/12/Understanding-Page-Inheritance-in-ASPNET-20)

# c++ - 指向类方法调用的 C++ 指针

> ID：10128484
> 
> 赞同：0
> 
> 时间：2012-04-12T17:14:24.723
> 
> 标签：c++, pointers, methods

在我的 Tabla 类中，我有一个指向方法的公共指针：

```
public:
    int (Tabla :: *punterofunc)(int,int); 
```

在 main 中，我将它指向一个类方法：

```
tablita.punterofunc = &Tabla :: in_lineal; 
```

但是这个电话不起作用！

```
 tablita->punterofunc(num,0); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:22:15.867

我认为您正在寻找这种美味的语法：

```
((tablita).*(tablita.punterofunc))(num,0); 
```

`tablita.punterofunc`是成员函数指针。`p`在对象上调用指向成员函数的指针的一般语法`o`是：

```
((o).*(p))(args...); 
```

只需将其应用于您的代码即可。（有些括号可能并非在所有情况下都是必需的（不确定），但如果你坚持这样做，它应该一直有效。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:20:47.907

试试这个：

```
tablita.*punterofunc(num,0); 
```

# cross-browser - 基于文本的浏览器聊天示例

> ID：10128485
> 
> 赞同：1
> 
> 时间：2012-04-12T17:14:28.313
> 
> 标签：cross-browser, client-server, chat, livechat

鉴于有大量用于 Web 开发的新技术，我想知道其中哪些技术特别适合**快速**开发跨不同浏览器的最小多用户基于文本的聊天应用程序？任何基于 Java、Python 或 Javascript 的东西都特别受欢迎。

更具体地说，我还对这些技术如何处理以下场景感兴趣：

1.  通信延迟：当从客户端浏览器到服务器（反之亦然）的消息延迟（甚至丢失）时会发生什么？

2.  断开连接：当客户端断开连接时会发生什么？我们是否可以在断开连接时从确切状态恢复通信，以便在断开连接的客户端重新连接时所有先前的消息仍然存在。

我正在寻找实现此类聊天应用程序示例的链接以及上述建议/指针。谢谢！

# c - 需要适当的数据结构来处理来自多个客户端的消息

> ID：10128490
> 
> 赞同：1
> 
> 时间：2012-04-12T17:15:15.787
> 
> 标签：c, sockets, select

在我们的应用程序中，我们有一个服务器将连接到多个客户端。供您参考，它是单线程应用程序。每当客户端想要向其他客户端发送一些消息时，它将通过服务器。每当客户端向服务器发送消息时，它都会将消息存储到`Dqueue`. 服务器会从 中一一提取消息，`Dqueue`并调用`select()`并检查应该发送消息的通道是否可用。如果是，它会发送，否则它将插入到后面，以便我们可以处理其他消息。但是这种方法的问题是，假设客户端`C1`发送两条消息`S1`和`S2`。现在，当服务器尝试发送`S1`到其他客户端时`C2`, C2 很忙，因此它将消息 S1 推到队列的后面。现在假设在处理过程`S2`中，客户端已经准备好了。`C2`所以服务器现在可以发送了`S2`。但问题是消息会以`C2`相反的顺序 ( `S2` `S1`) 到达。

您能否建议哪种数据结构适合于此，以便我们可以保持相同的消息顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:51:52.393

不要使用单个队列来处理所有消息。每个客户端都需要自己的单独队列。当消息到达时，确定它的目的地客户端并将消息放在该客户端队列的末尾。然后更新您的服务器逻辑以仅将给定客户端队列中的顶部消息发送到该客户端。如果客户端很忙，请不要发送顶部消息。如果客户端已准备好，则发送顶部消息并将其从该客户端的队列中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:22:26.827

我假设一堆事情。也就是说，您或您组中的某个人将编写队列管理器，或者队列管理器可以接受您创建的参数。

副手，这听起来像你需要一个结构数组。根据您认为将使用该服务的客户端数量，它可能是固定的结构数组或分配的堆内存块。根据您管理客户端的方式，结构数组可以使用指向结构的指针，或者您可以为结构分配足够的存储空间。

我不知道您要存储哪些数据作为发送消息的一部分。也许如果你把字段写下来，那会有所帮助。

# ruby - 带有纯 Ruby 数据库的 Sinatra

> ID：10128504
> 
> 赞同：2
> 
> 时间：2012-04-12T17:16:11.090
> 
> 标签：ruby, sinatra

我想将一个纯 ruby​​ 数据库（kirbybase [http://www.netpromi.com/files/kirbybase_ruby_manual.html](http://www.netpromi.com/files/kirbybase_ruby_manual.html)）与 Sinatra 一起使用，所以在 ruby​​ 中我们会有这样的东西来显示记录：

```
require 'kirbybase'
db = KirbyBase.new
cars_tbl= db.get_table(:cars)
ferrari = cars_tbl.select { |r| r.recno == 9 }
puts ferrari 
```

或所有记录

```
results = cars_tbl.select(:name,:race,:color,:recno).sort(+:color) 
```

在不混淆“rubysh”kirbybase语法的情况下将其与Sinatra集成的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:44:46.770

要了解[sinatra-redis](https://github.com/bmizerany/sinatra-redis/)的书，您可以执行以下操作：

```
require 'sinatra'
require 'kirbybase'

helpers do
  # Create a helper to allow easier access to settings.kirby
  # Name it whatever you want
  def kirby
    settings.kirby
  end
end

configure do
  # Initialise kirby
  set :kirby, KirbyBase.new
end

get '/' do
  cars_tbl = kirby.get_table(:cars)
  ferrari = cars_tbl.select { |r| r.recno == 9 }
  "Car is #{ferrari}"
end 
```

# php - 在 PHP 中替换换行符的奇怪行为

> ID：10128508
> 
> 赞同：-1
> 
> 时间：2012-04-12T17:16:15.273
> 
> 标签：php, string, str-replace

我在 PHP 中遇到了一些奇怪的行为。我有来自输入的一串文本，`<textarea/>`似乎：

```
$text = str_replace(array("\r\n", "\r", "\n"), null, $text); 
```

成功删除换行符，而

```
$text = str_replace("\n", " ", $text)
$text = str_replace("\r\n", " ", $text)
$text = str_replace("\r", " ", $text) 
```

**编辑：上面的三个 str_replace 调用用于 \n、\r\n 和 \r**

没有成功删除换行符。我什至尝试添加：

```
$text = str_replace(PHP_EOL, " ", $text); 
```

但这并不能解决问题。我知道我正在用空格而不是 null 替换换行符，但我希望这也能工作。在进行 3-4 次 str_replace() 调用后，如果我：

```
echo nl2br($text); 
```

它实际上确实找到了一些剩余的换行符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:18:14.773

来自 textarea 的文本**总是**有`\r\n`换行符。

所以你应该这样做`$text = str_replace("\r\n", '', $text);`

有关更多信息，请参阅[规范](http://dev.w3.org/html5/spec/Overview.html#the-textarea-element)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:18:07.470

你应该使用：

```
$text = str_replace("\r\n", " ", $text)
$text = str_replace("\r", " ", $text)
$text = str_replace("\n", " ", $text) 
```

或者

```
$text = str_replace("\r\n", null, $text)
$text = str_replace("\r", null, $text)
$text = str_replace("\n", null, $text) 
```

# cassandra - 使用 Hector API 将数据插入新 Cassandra 数据库的最简单方法是什么？

> ID：10128513
> 
> 赞同：5
> 
> 时间：2012-04-12T17:16:46.690
> 
> 标签：cassandra, hector

我已经遵循了许多将数据插入 Cassandra 数据库的示例，并且每次我遇到有关未配置列族的异常时。

```
Exception in thread "main" me.prettyprint.hector.api.exceptions.HInvalidRequestException: InvalidRequestException(why:unconfigured columnfamily TestColumnFamily)
    at me.prettyprint.cassandra.service.ExceptionsTranslatorImpl.translate(ExceptionsTranslatorImpl.java:45)
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:252)
    at me.prettyprint.cassandra.model.ExecutingKeyspace.doExecuteOperation(ExecutingKeyspace.java:97)
    at me.prettyprint.cassandra.model.MutatorImpl.execute(MutatorImpl.java:243)
    at me.prettyprint.cassandra.model.MutatorImpl.insert(MutatorImpl.java:69)
    at CassandraInterface.main(CassandraInterface.java:101)
Caused by: InvalidRequestException(why:unconfigured columnfamily TestColumnFamily)
    at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:19477)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:1035)
    at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:1009)
    at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:246)
    at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:243)
    at me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation.java:103)
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:246)
    ... 4 more 
```

所以我查找了如何配置它们并发现

```
 BasicColumnFamilyDefinition cfdef = new BasicColumnFamilyDefinition();
    cfdef.setKeyspaceName(keyspaceName);
    cfdef.setName(columnFamilyName);
    cfdef.setKeyValidationClass(ComparatorType.UTF8TYPE.getClassName());
    cfdef.setComparatorType(ComparatorType.UTF8TYPE); 
```

那没有配置列族。

我发现的所有示例都是没有任何上下文的片段，所以我不知道要导入或设置什么。此外，一些示例似乎混合了 Hector API v2 和原始的 Hector API，所以当我使用它们时，会出现“找不到类”或“找不到函数”编译器错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:58:37.027

[Hector CassandraClusterTest.java](https://github.com/rantav/hector/blob/master/core/src/test/java/me/prettyprint/cassandra/service/CassandraClusterTest.java)

```
 @Test
 public void testAddDropColumnFamily() throws Exception {
      ColumnFamilyDefinition cfDef = HFactory.createColumnFamilyDefinition("Keyspace1", "DynCf");
      cassandraCluster.addColumnFamily(cfDef);
      String cfid2 = cassandraCluster.dropColumnFamily("Keyspace1", "DynCf");
      assertNotNull(cfid2);

      // Let's wait for agreement
      cassandraCluster.addColumnFamily(cfDef, true);
      cfid2 = cassandraCluster.dropColumnFamily("Keyspace1", "DynCf", true);
      assertNotNull(cfid2);
 } 
```

长话短说，在您尝试将数据插入其中之前，键空间和列族需要存在。你可以在你的代码中管理它，检查它们是否存在，使用上面的例子作为一个很好的参考——或者通过命令行界面（`cassandra-cli`）修改

[赫克托单元测试](https://github.com/rantav/hector/tree/master/core/src/test/java/me/prettyprint/cassandra)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:31:57.927

希望你现在已经能够做到这一点，但我就是这样做的。

我有一个 cassandra 安装（使用 1.1.4）并假设您创建了所有必要的目录：

```
/var/lib/cassandra
/var/lib/casandra/data
/var/lib/cassnadra/commitlogs
/var/lib/cassandra/saved_caches 
```

我开始使用：

```
bin/cassandra -f 
```

我创建了一个名为 schema_create.txt 的简单脚本：

> 使用 strategy_class = 'org.apache.cassandra.locator.SimpleStrategy' AND strategy_options:replication_factor='1'创建密钥空间测试；使用测试；CREATE COLUMFAMILY TestColumnFamily(userid varchar, firstname varchar, lastname varchar, PRIMARY KEY (userid));

然后，您可以从命令行使用 cassandra 附带的新 CQL 工具运行此脚本，如下所示：

```
bin/cqlsh --cql3 < schema_createt.txt 
```

这将在 cassandra 中安装一个名为 test 的键空间，其中包含一个名为 testcolumnfamily 的列族。

现在，在您的 java 应用程序中，您可以简单地创建一个具有 main 方法的测试类（如果使用 maven，我将假设您的开发环境具有所有必要的依赖项）：

> try{ Mutator mutator = HFactory.createMutator(kweyspace, stringSerializer.get()); mutator.addInsertion("iamauser", "tescolumnfamily", HFactory.createStringColumn("firstname", "John")); mutator.addInsertion("iamauser", "testcolumnfamily", HFactory.createStringColumn("lastname", "Smith")); mutator.execute(); } catch(HectorException Hex){ Hex.printStackTrace(); } 最后{ cluster.getConnectionManger().shutdown(); }

现在返回命令行并使用以下命令进入 cassandra：

```
$bin/cqlsh --cql3
use test;
select * from testcolumnfamily; 
```

这将使用密钥 iamauser 将一行数据插入到您的 cassandra db 中，并将其命名为 John Smith，您可以使用 cqlsh 工具进行验证，如上所示。

希望这可以帮助。

# javascript - 选择选择框选项时显示变量

> ID：10128519
> 
> 赞同：0
> 
> 时间：2012-04-12T17:17:01.560
> 
> 标签：javascript, jquery, html

例如选择框

```
<select>
  <option selected="" value="">Please Select</option>
  <option value='txt'>Text</option>
  <option value='int'>Numbers</option>
  <option value='bool' >Boolean</option>
</select> 
```

有一个字符串

```
$messageList=array ( 'txt'=>'text message', 'int'=>'int message',
                     'bool'=>'bool message'); 
```

我想要实现的是在选择选项时显示相应的消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:21:24.667

我不知道 php，但首先我认为您需要使用`json_encode`将 php 数组转换为 javascript 对象。[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

```
<?php
   $messageList=array ( 'txt'=>'text message', 'int'=>'int message','bool'=>'bool message');

   echo var msgs = json_encode($messageList);
?> 
```

然后在javascript中，

```
$('select').change (function () { 
    alert(msgs[$(this).val()]);
}); 
```

你还需要一个`class/id`选择。因为当您更改页面中任何选择框的选项时，将触发上述代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:25:50.447

假设您发布的数组是一个 JavaScript 对象（似乎您使用的是 PHP 的关联数组表示法）：

```
​var sel = document.getElementsByTagName('select')[0],
    $messageList= {
    'txt' : 'text message',
    'int' : 'int message',
    'bool' : 'bool message'
    };

sel.onchange = function(){
    var selected = this.value;
    alert($messageList[selected]);
};​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KEGdJ/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:44:53.747

如果你想用 jQuery 做到这一点：

```
$messageList= { 'txt':'text message', 'int':'int message','bool':'bool message' };

$('#choices').change( function() { alert( $messageList[ $(this).val() ] ); } );​ 
```

JFiddle在这里：

[http://jsfiddle.net/yCHqy/](http://jsfiddle.net/yCHqy/)

# c++ - 它无法将 C++ 映射结构编译为映射>

> ID：10128520
> 
> 赞同：0
> 
> 时间：2012-04-12T17:17:02.733
> 
> 标签：c++, map

我有一个带有stl map的c ++代码，第二个参数定义为一对

```
int keys[10] = {1, 1, 1, 2, 3, 4, 5, 7, 6, 6};
char s[5];
map< unsigned int, pair<string, int> > tmpMap;

for (int i=0; i<10; i++)
{
  if (tmpMap.find(keys[i])==tmpMap.end())
  {
    sprintf(s, "%i", keys[i]);
    tmpMap.insert(make_pair(keys[i], make_pair(s, 1)));
  }
  else tmpMap[keys[i]].second++;
}

for (map< unsigned int, pair<string, int> >::iterator it=tmpMap.begin();   it!=tmpMap.end(); ++it)
{
cout << (*it).first << "  " << (*it).second << endl;
} 
```

但是它编译失败，它说没有匹配运算符<<。但是 (*it).first 和 (*it).second 只是 string 和 int，为什么它不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T17:19:32.120

这不是真的，`first`是一个`unsigned int`，`second`而是一个，`pair<string,int>`因为映射的迭代器不会直接给你一对，而是一对键，值。

我想你应该这样做

```
pair<string,int> pair = (*it).second;
cout << pair.first << "  " << pair.second << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:23:38.480

你的 (*it).second 是 pair ，你需要有

```
cout << (*it).first << "  " << (*it).second.first << " " << 
(*it).second.first << endl; 
```

这是因为在迭代 map 时，您会得到对，然后第一个是键，第二个是值-在您的情况下也是一对。

# executable - 从 VB 执行 7-zip

> ID：10128522
> 
> 赞同：1
> 
> 时间：2012-04-12T17:17:14.040
> 
> 标签：executable, vb.net-2010, 7zip

好吧，我在从 VB 执行 7-zip 时遇到了一些麻烦。

这是我当前的代码：

```
ZipFileName = "\\network\path\PDFs\Test.zip "
PathToPDFs = "\\network\path\PDFs\*.pdf"
Arg1 = "a -tzip"

Process.Start("C:\Program Files\7-Zip\7z.exe" + Arg1 + Zipfilename + PathToPDFs) 
```

我不断得到的错误`The system cannot find the file specified`是`Win32Exception was unhandled`

我知道我的路径是正确的，并且该目录中有 PDF。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:19:45.400

你必须使用这个

```
Process.Start(
    "C:\Program Files\7-Zip\7z.exe",
    Arg1 + Zipfilename + PathToPDFs) 
```

第一个参数必须是只能执行的，而第二个参数必须是`ProcessInfo`带参数的字符串。
Tkae 看看这个[Microsoft 页面](http://msdn.microsoft.com/it-it/library/system.diagnostics.process.start.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:22:18.153

我用 gzip 做了类似的事情，如下所示：

```
Dim proc As System.Diagnostics.Process = New System.Diagnostics.Process()

proc.EnableRaisingEvents = False
proc.StartInfo.FileName = "d:\gnuwin32\bin\gzip"
proc.StartInfo.Arguments = My.Settings.GZIPFlags & " " & strDestDir & strFile
proc.Start()
proc.WaitForExit() 
```

# symfony - 我想在基本包中创建一个导航列表。如何允许其他捆绑包添加到该列表中？

> ID：10128524
> 
> 赞同：0
> 
> 时间：2012-04-12T17:17:30.207
> 
> 标签：symfony, bundle

我想在我的一个包（“基本”包）中创建一个导航列表，其中包含几个选项。如何允许其他捆绑包添加到该列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:58:42.547

我想要一个更详细的问题，但无论如何它都在这里。

首先，检查[KnpBundles](http://knpbundles.com/)中已经提供菜单功能的包。类似[KnpMenuBundle](http://github.com/KnpLabs/KnpMenuBundle)的东西。看起来不错？好吧，用它。

没有什么适合你的口味？然后自己滚。我会用这样的东西：

1.  `NavListManager`在基本包中创建一个类，`AbstractNavList`并由每个其他将选项添加到导航列表的包扩展一个类。

2.  每个包都应该提供一个`NavList`扩展类`AbstractNavList`。这些类应该提供导航列表选项。

3.  在您的基础包中，编辑`DependencyInjection\<MyBundle>Extension::load()`方法以`NavList`使用`$container->getParameter('kernel.bundles')`. 将每个收集的类包含在`NavListManager`.

4.  现在在模板中调用类似的东西`$navman->render()`来生成导航列表。

# php - Magento - 在顶级类别菜单名称旁边放一张图片

> ID：10128525
> 
> 赞同：0
> 
> 时间：2012-04-12T17:17:30.620
> 
> 标签：php, html, css, magento

我想在我的每个类别和子类别名称旁边放一个小图像图标（不要用图像替换类别名称，只需在类别名称后面放一个图像）。我已经尝试过覆盖 app/core/code/Mage/Catalog/Block/Navigation.php

我更改了_renderCategoryMenuItemHtml 之后在styles.css 中引用category_id 我正要在代码所在的位置添加背景图像

```
 $htmlLi .= '>';
$html[] = $htmlLi;

$html[] = '<a href="'.$this->getCategoryUrl($category).'"'.$linkClass.'>';
$html[] = '<span>' . $this->escapeHtml($category->getName()) . '</span>';
$html[] = '</a>'; 
```

和

```
$htmlLi .= '>';
$html[] = $htmlLi;

$html[] = '<a href="'.$this->getCategoryUrl($category).'"'.$linkClass.'>';
$html[] = '<span class="category_'.$this->getCurrentCategory()->getId().'">'.$this->escapeHtml($category->getName()).'</span>';
$html[] = '</a>'; 
```

但努力工作。我相信很多人可能想在类别名称之后显示一个小缩略图。但只是不知道任何简单或直接的方法来做到这一点。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:13:21.257

为什么不使用 CSS 背景图像？

加载 template/catalog/navigation/top.phtml 并为每个级别的 <li> 项添加一个新的类或 id，可能类似于：

```
class="nav-<?php echo $_category->getName() ?>" 
```

然后将这些类添加到您的 CSS 中，即：

```
.nav-shoes { background: url(images/nav-shoes.png) no-repeat; } 
```

或者更好的是，使用您要使用的所有图像构建一个精灵图像：

```
[class^="nav-"] { background: url(images/sprite.png) no-repeat; }
.nav-shoes { background-position: 10px 10px; } 
```

然后，您需要为每个图像找出背景位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T11:17:25.840

将此解决方案用于 Magento -1.8.*

进入 intp 模型文件。(/app/code/core/Mage/Catalog/Model/Observer.php)

在函数名称中：_addCategoriesToMenu

更新以下代码

```
 $categoryData = array( 
        'name' => $category->getName(),
        'id' => $nodeId,
        'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
        'is_active' => $this->_isActiveMenuCategory($category),
        'thumbnail' => Mage::getModel('catalog/category')->load($category->getId())->getThumbnail()

    ); 
```

然后进入 Html 文件夹。(app/code/core/Mage/Page/Block/Html/Topmenu.php)

在函数名称的第 128 行：_getHtml

更新以下代码行

```
 if($childLevel < 1 ){
        $urls = Mage::getBaseUrl('media').'catalog/category/'.$child->getData('thumbnail');
        $img = '<img src="'.$urls.'" />';
    }

    $html .= '<li ' . $this->_getRenderedMenuItemAttributes($child) . '>';
    $html .= '<a href="' . $child->getUrl() . '" ' . $outermostClassCode . '><span>'
        . $this->escapeHtml($child->getName()) . ' </span> '.$img.' </a>'; 
```

# r - 为具有特定日期格式的日期信息创建新列

> ID：10128529
> 
> 赞同：1
> 
> 时间：2012-04-12T17:17:45.493
> 
> 标签：r

亲爱的，我正在处理一个包含几年数据的文件，我正在尝试创建一个额外的列，它从日期列（例如 01/01/1997 12:00）读取年和月信息并创建一个新列月份和年份一起（例如 Jan-97）。

我不确定如何进行此操作，但我要编写的是下图中名为“new_date”的列：

![在此处输入图像描述](../Images/b639a93c30ef420d04655c3599cf167d.png)

我的样本数据：

```
Data <-
structure(list(date = structure(c(1L, 4L, 7L, 2L, 5L, 8L, 3L, 
6L, 9L), .Label = c("01/01/1997 12:00", "01/01/1998 15:00", "01/01/1999 18:00", 
"01/02/1997 13:00", "01/02/1998 16:00", "01/02/1999 19:00", "01/03/1997 14:00", 
"01/03/1998 17:00", "01/03/1999 19:00"), class = "factor"), value = c(29L, 
31L, 42L, 42L, 52L, 61L, 57L, 55L, 56L)), .Names = c("date", 
"value"), row.names = c(NA, -9L), class = "data.frame") 
```

如果您能建议我如何进行此操作，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:25:54.180

看看`?strptime`正确的格式。

首先将您的日期列设为日期：

```
dat$date <- as.POSIXct(dat$date, format='%d/%m/%Y %H:%M') 
```

然后使用您想要的格式制作新列：

```
dat$pretty.date <- format(dat$date, format='%b-%y')

> dat$pretty.date
[1] "Jan-97" "Feb-97" "Mar-97" "Jan-98" "Feb-98" "Mar-98" "Jan-99" "Feb-99" "Mar-99" 
```

# javascript - 以 Javascript PROPER 方式设置 asp:label 的 Text 属性

> ID：10128530
> 
> 赞同：22
> 
> 时间：2012-04-12T17:17:48.357
> 
> 标签：javascript, asp.net, label, code-behind

我在表单上有一系列文本框。当用户在这些文本框中插入数字时，会进行计算并`<asp:Label>`通过 JavaScript 更新控件以反映这些计算：

```
document.getElementById('<%=TotalLoans.ClientID %>').innerHTML = TotalLoans; 
```

这会正确更新 UI。但是，当我尝试访问代码隐藏中的值时，该`Text`属性为空。我想这是有道理的，因为我是`innerHTML`通过 JavaScript 更新属性的。

```
//TotalLoans.Text will always be equal to "" in this scenario
double bTotalLoans = string.IsNullOrEmpty(TotalLoans.Text) 
                   ? 0.00 
                   : Convert.ToDouble(TotalLoans.Text); 
```

如何以可以读取代码隐藏中的属性的方式更新 via JavaScript 的属性`Text`？`<asp:Label>`

### 更新

这是包含 41 个标签的大型表单上的一个小问题，每个标签都为用户显示一些计算的结果。听从 FishBasketGordo 的建议，我把我`<asp:Label>`的变成了残疾人`<asp:TextBox>`。我正在设置新文本框的值，如下所示：

```
 document.getElementById('<%=TotalLoans.ClientID %>').value = TotalLoans; 
```

同样，在代码隐藏中， 的值`TotalLoans.Text`始终等于“”。

我不介意改变我的处理方式，但这就是问题的症结所在。

我正在使用 JavaScript 来操作某些控件的属性值。单击“提交”时，我需要能够从后面的代码中访问这些操作值。

有什么建议我该怎么做？

### 更新 2

关于@James Johnson 的回答，我无法`.innerText`按照建议使用属性检索值。我已经`EnableViewState`在`<asp:Label>`. 还有什么我想念的吗？

我不明白为什么，当我输入文本框并提交表单时，我可以访问代码隐藏中的值，但是当我通过 JavaScript 以编程方式更改文本框或标签的文本时，我无法访问新值.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T17:53:35.690

## 将 HiddenField 控件放置在您的表单中。

```
<asp:HiddenField ID="hidden" runat="server" /> 
```

## 在表单中创建属性

```
protected String LabelProperty
{
    get
    {
        return hidden.Value;
    }
    set
    {
        hidden.Value = value;
    }
} 
```

## 从 JavaScript 更新隐藏字段值

```
<script>
   function UpdateControl() {
            document.getElementById('<%=hidden.ClientID %>').value = '12';
   }
</script> 
```

现在您可以直接通过`Postback`. 如果直接在后面的代码中使用`Label`Control 更新的值，它将丢失。`PostBack`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-15T05:22:39.157

这个适用于我的 asp 标签控件。

```
 function changeEmaillbl() {

         if (document.getElementById('<%=rbAgency.ClientID%>').checked = true) {
             document.getElementById('<%=lblUsername.ClientID%>').innerHTML = 'Accredited No.:';
         } 
     } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T09:38:54.540

使用以下代码

```
<span id="sptext" runat="server"></span> 
```

Java 脚本

```
document.getElementById('<%=sptext'%>).innerHTML='change text'; 
```

C＃

```
sptext.innerHTML 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T17:26:02.010

由于您已更新标签客户端，因此您需要回发以便您的服务器端代码反映更改。

如果你不知道怎么做，这就是我过去的做法。

创建一个隐藏字段：

```
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" /> 
```

创建一个附加了客户端和服务器端功能的按钮。您的客户端功能将填充您的隐藏字段，服务器端将读取它。确保首先调用您的客户端。

```
<asp:Button ID="_Submit" runat="server" Text="Submit Button" OnClientClick="TestSubmit();" OnClick="_Submit_Click" /> 
```

Javascript客户端功能：

```
function TestSubmit() {
              try {

             var message = "Message to Pass";
             document.getElementById('__EVENTTARGET').value = message;

           } catch (err) {
              alert(err.message);

          }

      } 
```

C# 服务器端函数

```
protected void _Submit_Click(object sender, EventArgs e)
{
     // Hidden Value after postback
     string hiddenVal= Request.Form["__EVENTTARGET"];
} 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T17:21:01.603

而不是`Label`使用文本输入：

```
<script type="text/javascript">
    onChange = function(ctrl) {
        var txt = document.getElementById("<%= txtResult.ClientID %>");
        if (txt){
            txt.value = ctrl.value;
        }           
    }
</script>

<asp:TextBox ID="txtTest" runat="server" onchange="onChange(this);" />      

<!-- pseudo label that will survive postback -->  
<input type="text" id="txtResult" runat="server" readonly="readonly" tabindex="-1000" style="border:0px;background-color:transparent;" />        

<asp:Button ID="btnTest" runat="server" Text="Test" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T17:34:05.347

Asp.net 代码隐藏首先在服务器上运行，然后页面呈现给客户端（浏览器）。Codebehind 无法访问客户端（javascript、html），因为它只存在于服务器上。

因此，要么使用 ajax 并将标签的值发送到后面的代码。您可以使用`PageMethods`，或者只是将页面发布到代码隐藏所在的服务器，因此代码隐藏可以知道更新的值:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T17:30:15.240

标签的信息存储在回发时的 ViewState 输入中（请记住，服务器对回发的表单值之外的页面一无所知，其中包括标签的文本）..您必须以某种方式在客户端将其更新为知道那个标签发生了什么变化，我猜这不值得你花时间。

我不完全确定您要在这里解决什么问题，但这可能会给您一些关于如何解决的想法：

您可以创建一个隐藏字段来与您的标签一起使用，并且每当您更新标签时，您也会更新该值。然后在后面的代码中将标签的 Text 属性设置为该隐藏字段中的内容.

# asp.net-mvc - SignalR 持久连接的超时时间是多少？

> ID：10128545
> 
> 赞同：4
> 
> 时间：2012-04-12T17:18:42.353
> 
> 标签：asp.net-mvc, signalr

我使用 SignalR 和 Asp.net MVC 创建了聊天应用程序。如果用户空闲了一段时间，他没有收到来自服务器的任何消息。

SignalR 持久连接是否有超时？

如果是，我该如何修改或重新激活我的连接？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T13:53:11.253

现在已在 Wiki 上更新[https://github.com/SignalR/SignalR/wiki/Configuring-SignalR](https://github.com/SignalR/SignalR/wiki/Configuring-SignalR)

**代码**

```
using System;
using SignalR;

namespace WebApplication1
{
    public class Global : System.Web.HttpApplication
    {
        void Application_Start(object sender, EventArgs e)
        {
            // Make connections wait 50s maximum for any response. After
            // 50s are up, trigger a timeout command and make the client reconnect.
            GlobalHost.Configuration.ConnectionTimeout = TimeSpan.FromSeconds(50);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T17:57:14.000

对于任何连接，SignalR 的默认超时为 110 秒。它将自动重新连接，您不应错过任何消息。听起来你还有其他问题。如果您想像这样调整 0.4 中的超时时间（假设为 asp.net）：

```
// Make idle connections reconnect every 60 seconds
AspNetHost.DependencyResolver.Resolve<IConfigurtionManager>().ReconnectTimeout = TimeSpan.FromSeconds(60); 
```

**确保**使用 SignalR.Infrastructure 添加以获取 Resolve 扩展方法（我们将在下一版本中修复此问题）。

# objective-c - 我应该使用什么限定符将块声明为 ivar？

> ID：10128552
> 
> 赞同：1
> 
> 时间：2012-04-12T17:19:56.780
> 
> 标签：objective-c, objective-c-blocks

例子：

```
typedef void(^responseBlock)(NSDictionary*, NSError *);
@interface MyClass : NSObject
{
    [??] 响应块响应处理器；
}

```

我应该在 [??] 括号中放入什么限定词？

我已经读过应该使用复制限定符设置块作为属性......但在这种情况下，我不需要将块作为属性公开。我只是希望它保持 ivar 但我如何指定副本？而且，在没有指定任何内容的情况下，使用的默认限定符是什么？__strong 是否与其他所有情况一样？

我在 ios5 上使用 ARC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:26:37.480

是的，块是 ObjC 中的对象，因此`__strong`是适当的限定符。由于这是默认设置，因此您实际上可以将其关闭。

您无法指定在没有属性的情况下在分配时复制块——这将是您的责任 ( `responseHandler = [someBlock copy];`)。您可以通过在 .m 文件中放置类扩展名来声明仅对此类本身可见的属性（对其他代码不可用）：

```
@interface MyClass ()
@property (copy) responseBlock responseHandler;
@end 
```

这（在合成后）将为您提供通常的访问器方法，当您使用它们时，它将为您处理副本。

另请注意，可以（[现在是推荐的过程](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html%23//apple_ref/doc/uid/TP30001163-CH12-TPXREF122)）在`@implementation`块中声明实例变量。听起来您希望这是一个私有属性（无属性访问），并且任何其他代码都看不到在那里声明的 ivars。（当然，如果您使用的是属性，则不需要这样做；`@synthesize`将为您创建 ivar。）

```
@implementation MyClass
{
    responseBlock responseHandler;
}

// Continue with implementation as usual 
```

# wpf - 需要在调查表中绑定来自不同来源和不同结构的 ComboBox 的 selectedValue

> ID：10128553
> 
> 赞同：1
> 
> 时间：2012-04-12T17:19:57.877
> 
> 标签：wpf, wcf-binding

我正在填写一份调查表。调查是从具有以下结构的对象创建的：

调查 --has--> 部分 --has--> 问题 --has--> QuestionOptions

每个 QuestionOption 都有：
QuestionID（与 Question 相关）
OptionText（ComboBox 中将显示什么（DisplayMemeber 绑定））
OptionValue（选项的得分，通常为 1-5（SelectedValuePath 绑定））

调查结果存储在以下结构中：

结果--有--> 答案

每个答案都有：
QuestionID（将答案链接到数据库中的调查选项）
分数（这来自 ComboBox 中用户的值选择器）

保存工作正常，但如果我需要编辑调查，我需要带回目前选择的结果。对象“ **Result** ”被完美填充，因此我拥有所有可用数据。

**问题**出在 GUI 中：
我应该如何使用存储的调查的相应值初始化或设置从 DataTemplate 创建的每个 ComboBox？考虑到 ComboBox 是从对象“ **Survey** ”生成的，答案在对象“ **Result** ” 中

用于 ComboBox 的 XAML 代码是：

```
<DataTemplate x:Key="QuestonTemplate">
            <StackPanel Margin="10,2,10,2" Orientation="Vertical">
                <TextBlock HorizontalAlignment="Left" Text="{Binding Path=QuestionText}" TextWrapping="Wrap" Height="Auto" Margin="5" FontSize="14" />
                <ComboBox x:Name="Options" Grid.Row="1" HorizontalAlignment="Left" Width="400"  Margin="10,0,10,0" 
                    Style="{StaticResource FlatComboBoxPaleYellow}"                              
                    ItemsSource="{Binding Path=QuestionOptions}" 
                    SelectedValuePath="OptionValue" 
                    DisplayMemberPath="OptionText"                         
                    SelectionChanged="Answer_SelectionChanged" />
            </StackPanel>
        </DataTemplate> 
```

我对 XAML 代码或 C#（甚至更好！我是老派）或任何建议持开放态度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:58:54.643

我建议您的 Question 对象包含一个附加属性：SelectedOption

这将是绑定到组合框的 SelectedItem 的数据：

```
<ComboBox x:Name="Options" Grid.Row="1" HorizontalAlignment="Left" Width="400"  Margin="10,0,10,0" 
                Style="{StaticResource FlatComboBoxPaleYellow}"                              
                ItemsSource="{Binding Path=QuestionOptions}" 
                SelectedValuePath="OptionValue" 
                DisplayMemberPath="OptionText"   
                SelectedItem="{Binding Path=SelectedOption}"                      
                SelectionChanged="Answer_SelectionChanged" /> 
```

然后在您的 Survey 对象中，对于 Questions 集合中的每个问题，在 Result 对象中找到与该问题相对应的任何答案，查找该问题的相应 QuestionOption 并将其分配给该 Question 对象的 SelectedOption 属性。

```
public class Question : INotifyPropertyChanged
{
    public QuestionOption SelectedOption
    {
        get
        {
            return _selectedOption;
        }
        set
        {
            if (value != _selectedOption)
            {
                _myList = value;
                OnPropertyChanged("SelectedOption");
            }
        }
    }
    private QuestionOption _selectedOption = new QuestionOption();

    // ... other properties ...
} 
```

# exchangewebservices - EWS 电子邮件正文返回为空？

> ID：10128554
> 
> 赞同：0
> 
> 时间：2012-04-12T17:20:02.513
> 
> 标签：exchangewebservices, outlook-redemption

我们正在转换处理我们发送的退回电子邮件的批处理作业。我们正在从 Redemption 切换到 EWS（刚刚从 Exchange 2003 升级到 Exchange 2010）。如您所知，退回的电子邮件有不同的形式。我已经能够处理我收到的所有测试用例电子邮件，除了以下形式的电子邮件：

```
您的邮件未到达部分或全部预期收件人。

      主题：你好
      发送时间：2012 年 4 月 1 日上午 8 点 16 分

无法联系到以下收件人：

      hi@foo.com 于 2012 年 4 月 1 日上午 8 点 19 分
            电子邮件系统无法传递邮件，但没有报告具体原因。检查地址，然后重试。如果仍然失败，请联系您的系统管理员。
             smtp.mydomain.com #5.0.0 smtp; 5.3.0 - 其他邮件系统问题 554-“投递错误：dd 此用户没有 foo.com 帐户 (hi@foo.com) [-5] - mail.foo.com”（投递尝试：0） >

```

这是outlook中显示的内容。当我使用 EWS 阅读电子邮件时，正文是空的。当我收到 EWS 的电子邮件时，我需要查看上面的信息。这些电子邮件有一个附件（这是原始电子邮件），尽管它在 Outlook 中看起来不是这样。我试图查看从 EWS 返回的几乎所有属性，但仍然能够找到上面的文本。Redemption 允许您使用 ReportText 查看此信息。我们特别寻找的是电子邮件错误传递代码。我们根据这段代码做不同的事情。

编辑：为了更清楚，我的其他测试用例上的 Body 属性不是空的。我正在加载电子邮件，例如：

```
 Dim emailPset = New PropertySet(BasePropertySet.FirstClassProperties)
            emailPset.RequestedBodyType = BodyType.Text
            Dim f = EmailMessage.Bind(email.Service, email.Id, emailPset) 
```

Update1：​​经过一些研究，我似乎需要能够在 PR_NDR_STATUS_CODE 和 PR_REPORT_TEXT 字段中读取邮件的收件人表。仍在搜索是否有办法在 EWS 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:11:20.360

我们能够获得足够的信息

```
smtp.mydomain.com #5.0.0 smtp; 5.3.0 - Other mail system problem 554-"delivery error: dd This user doesn't have a foo.com account (hi@foo.com) [-5] - mail.foo.com" (delivery attempts: 0)> 
```

通过告诉对象加载 MIME 内容，这是我们需要的部分。

绝对不是最直接的 API 使用，但希望我们不会再遇到任何问题。

# asp.net - HttpWebRequest 挂起

> ID：10128557
> 
> 赞同：1
> 
> 时间：2012-04-12T17:20:16.627
> 
> 标签：asp.net, httpwebrequest

在我目前正在处理的应用程序中，有一个后端 java 应用程序正在缓存一堆数据。asp.net 部分允许用户更新数据库表。每次更新数据库时，都应清除 Java 应用程序中的缓存。所以基本上我有一个 4 个 URL 的列表，每个 URL 都需要被点击才能清除缓存。我的基本解决方案是遍历每个 url 并创建一个 HttpWebRequest 然后获取响应。所以基本上我对每个请求都有这个：

```
var request = (HttpWebRequest)WebRequest.Create(url);
                request.Method = "POST";
                request.ContentLength = 0;

                using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
                {
                    Stream receiveStream = response.GetResponseStream();
                    StreamReader readStream = new StreamReader(receiveStream, Encoding.UTF8);
                    string responseString = readStream.ReadToEnd();

                    returnList.Add(string.Format("Refresh response from {0}.<br />{1}", url, responseString));

                    readStream.Close();
                    receiveStream.Close();
                } 
```

在我的本地机器上，一切都很好。但是当我部署到我们的开发服务器时，它只是挂起并且什么都不做。如果我删除`request.ContentLength = 0;`，那么远程服务器会抛出 411: Length expected 错误。

我真的被困在这里，任何帮助将不胜感激。

我遇到的 HttpWebRequest 问题的解决方案或调用每个 URL 的不同解决方案都可以，我并不挑剔。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:58:38.547

为什么使用 request.method 作为“POST”？您是否发布任何数据，如果没有尝试删除内容长度和请求方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:21:49.513

很确定这是一个网络问题。我尝试点击不同的 url（负载均衡器）并且没有任何问题，因此 Java 人员正在进行更改，所以我可以点击负载均衡器，并且请求最终到达的任何服务器都将确保清除所有服务器缓存。

正在运行的代码：

```
var request = (HttpWebRequest)WebRequest.Create(url);

            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                Stream receiveStream = response.GetResponseStream();
                StreamReader readStream = new StreamReader(receiveStream, Encoding.UTF8);
                string responseString = readStream.ReadToEnd();

                returnString = string.Format(@"Refresh response from<br />{0}{1}", url, responseString);

                readStream.Close();
                receiveStream.Close();
            } 
```

# sencha-touch - 无法覆盖 Sencha Touch 应用程序中的应用程序变量

> ID：10128568
> 
> 赞同：0
> 
> 时间：2012-04-12T17:20:52.103
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个 Sencha Touch 应用程序，我正在尝试为其设置一个全局变量。 **编辑：**更多说明，我需要能够在所有视图中访问这个全局变量。

我将应用程序上的变量设置为默认值，然后在启动期间覆盖它。但是，它不会被覆盖。

```
Ext.application({
    name: 'hd',
    isAuth: 'false',
    launch: function() {
       hd.app.isAuth = 'true';
       Ext.Msg.alert(hd.app.isAuth); //This always returns 'false'
    }
}); 
```

我没有收到任何控制台错误，也找不到遇到类似问题的人。我显然做错了。谁能告诉我正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:24:10.133

我认为`app`不应该出现在这里。此代码段提醒`true`：

```
Ext.application({
    name: 'hd',
    isAuth: 'false',
    launch: function() {
       hd.isAuth = 'true';
       Ext.Msg.alert(hd.isAuth); // will return true as I have tested
    }
}); 
```

祝你好运。

已编辑：这应该更改`hd.app.isAuth`为您的期望值

```
Ext.application({
    name: 'hd',
    isAuth: 'false',
    setIsAuth: function(value){
        this.isAuth = value;
    },
    launch: function() {
       hd.app.setIsAuth('true');
       Ext.Msg.alert(hd.app.isAuth);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:17:02.810

你可以在下面做

```
Ext.application({
name: 'hd',
launch: function() {
   this.isAuth = 'true';
   Ext.Msg.alert(hd.isAuth); //This returns 'true'
   this.isAuth = 'false';
   Ext.Msg.alert(hd.isAuth);//This returns 'false';
}}); 
```

# ruby-on-rails - Sorcery Gem - 外部提供者的自定义 user_info_mapping

> ID：10128572
> 
> 赞同：8
> 
> 时间：2012-04-12T17:21:08.867
> 
> 标签：ruby-on-rails, ruby, authentication, devise, sorcery

我正在使用 NoamB 的[Sorcery Authentication Gem](https://github.com/Sorcery/sorcery) 0.7.7版`Rails 3.2 App`

我正在寻找一种可能性，我可以如何连接一种方法，该方法正在为特定的`external login provider (e.g. facebook, twitter)`.

例如，我想将提供的语言环境更改为我在数据库中使用的格式，或者我想从 twitter 下载用户头像作为匹配过程的一部分。

默认情况下，只能通过这种方式处理`sorcery.rb`文件：

```
config.facebook.user_info_mapping = {:email => "email", :first_name => "first_name", :last_name => "last_name" ... 
```

我知道我可以在我的用户模型上使用 setter 方法实现这种行为，但我希望将这些东西与模型分开，并且我希望能够专门为每个提供者定义它们。

这可能吗？/ 实现这种扩展映射选项的最佳方式是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-11T19:21:41.637

看起来您可以通过扩展各种 Sorcery 提供程序类来将您想要的特定于应用程序的字段添加到用户信息哈希中来做到这一点。

例如，要使用 Twitter，您可能会定义如下内容：

```
config.external_providers = [:twitter] 
```

您可以将其更改为：

```
config.external_providers = [:TwitterWithAvatar] 
```

现在您需要在`TwitterWithAvatar`下定义提供程序`Sorcery::Providers`，并覆盖该`#get_user_hash`方法：

```
module Sorcery
  module Providers
    class TwitterWithAvatar < Twitter
      def get_user_hash(access_token)
        user_hash = super
        user_hash.merge(
          avatar: get_avatar(user_hash[:uid]),
        )
      end

      private

      def get_avatar(uid)
        # Some Twitter API call
      end
    end
  end
end 
```

现在您可以设置映射：

```
config.TwitterWithAvatar.user_info_mapping = {avatar: "avatar"} 
```

或者，由于您已经在使用自定义提供程序类，您可以将映射移动到该类中：

```
module Sorcery
  module Providers
    class TwitterWithAvatar < Twitter
      def user_info_mapping
        {
          avatar: "avatar",
          # ...
        }
      end
    end
  end
end 
```

（我没有尝试运行此代码，所以细节可能有点偏差，但从阅读 Sorcery 源代码来看，这看起来是正确的方向。）

# c# - 将 XSD 与包含一起使用

> ID：10128573
> 
> 赞同：19
> 
> 时间：2012-04-12T17:21:12.693
> 
> 标签：c#, xml, xsd, xml-namespaces

这是一个 XSD：

```
<?xml version="1.0"?>
<xsd:schema 
elementFormDefault='unqualified' 
attributeFormDefault='unqualified' 
xmlns:xsd='http://www.w3.org/2001/XMLSchema' 
>

  <xsd:simpleType name='TheSimpleType'>
    <xsd:restriction base='xsd:string' />
  </xsd:simpleType>
</xsd:schema> 
```

这是包含上述 XSD 的第二个 XSD：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsd:schema 
elementFormDefault='unqualified' 
attributeFormDefault='unqualified' 
xmlns:xsd='http://www.w3.org/2001/XMLSchema' 
targetNamespace='a'
xmlns='a'
>

  <xsd:include schemaLocation='Include.xsd' />

  <xsd:element name = "TheElement" >
  <xsd:complexType>
  <xsd:attribute name="Code" type="TheSimpleType" use="required"/>
  </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

我需要将（第二个）XSD 读入 C# 并且：

1.  检查它是否是有效的 XSD，并且
2.  验证文件。

下面是一些要在模式中读取的 C#：

```
 XmlSchemaSet schemaSet = new XmlSchemaSet();
    foreach (string sd in Schemas)
    {
        using (XmlReader r = XmlReader.Create(new FileStream(sd, FileMode.Open)))
        {
            schemaSet.Add(XmlSchema.Read(r, null));
        }
    }
    schemaSet.CompilationSettings = new XmlSchemaCompilationSettings();
    schemaSet.Compile(); 
```

.Compile() 失败，因为“类型 'a:TheSimpleType' 未声明，或者不是简单类型。”

但是，如果有以下任何一种情况，它就会起作用：

*   命名空间已从架构中删除，或者
*   命名空间被添加到包含中。

问题是：如何在不编辑模式的情况下让 C# 接受它？

我怀疑问题在于，虽然我已将两个模式都放入 XmlSchemaSet，但我仍然需要告诉 C# 一个包含在另一个中，即它自己没有解决。事实上，如果我只告诉 XmlSchemaSet 主 XSD（而不是包含）（都没有（或有）命名空间），那么“类型 'TheSimpleType' 没有声明，或者不是简单类型。”

因此，这似乎是一个关于解决的问题，包括：如何？！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T17:42:06.457

问题在于打开模式以在线阅读的方式：

```
XmlReader.Create(new FileStream(sd, FileMode.Open) 
```

我必须自己编写`XmlResolver`，然后才能看到如何解析包含文件的路径：它来自可执行文件的目录，而不是来自父模式的目录。问题是父模式没有得到它的 BaseURI 集。以下是必须打开模式的方式：

```
XmlReader.Create(new FileStream(pathname, FileMode.Open, FileAccess.Read),null, pathname) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T17:48:19.710

您可以使用 将[`XmlSchema.Includes`](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschema.includes.aspx)它们链接在一起。然后，您只需要将主架构添加到架构集中：

```
var includeSchema = XmlSchema.Read(XmlReader.Create(...), null);
var mainSchema = XmlSchema.Read(XmlReader.Create(...), null);

var include = new XmlSchemaInclude();
include.Schema = includeSchema;
mainSchema.Includes.Add(include);

var schemaSet = new XmlSchemaSet();
schemaSet.Add(mainSchema);
schemaSet.Compile(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-13T07:55:24.153

XmlSchemaSet 的默认行为是不尝试解析任何 XSD 包含的架构。为此，必须初始化 XmlResolver 属性。

```
XmlSchemaSet schemas = new XmlSchemaSet
{
    XmlResolver = new XmlUrlResolver()
}; 
```

此外，您必须`baseUri`按照@Richard Barraclough 的回答设置 XmlReader。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T08:44:12.357

试试这个：D

```
public static XmlSchema LoadSchema(string pathname)
{
    XmlSchema s = null;
    XmlValidationHandler h = new XmlValidationHandler();
    using (XmlReader r = XmlReader.Create(new FileStream(pathname, FileMode.Open)))
    {
        s = XmlSchema.Read(r, new ValidationEventHandler(h.HandleValidationEvent));
    }

    if (h.Errors.Count > 0)
    {
        throw new Exception(string.Format("There were {1} errors reading the XSD at {0}. The first is: {2}.", pathname, h.Errors.Count, h.Errors[0]));
    }

    return s;
}

public static XmlSchema LoadSchemaAndResolveIncludes(string pathname)
{
    FileInfo f = new FileInfo(pathname);
    XmlSchema s = LoadSchema(f.FullName);

    foreach(XmlSchemaInclude i in s.Includes)
    {
        XmlSchema si = LoadSchema(f.Directory.FullName + @"\" + i.SchemaLocation);
        si.TargetNamespace = s.TargetNamespace;
        i.Schema = si;
    }

    return s;
}

public static List<ValidationEventArgs> Validate(string pathnameDocument, string pathnameSchema)
{
    XmlSchema s = LoadSchemaAndResolveIncludes(pathnameSchema);

    XmlValidationHandler h = new XmlValidationHandler();

    XmlDocument x = new XmlDocument();
    x.Load(pathnameDocument);
    x.Schemas.Add(s);
    s.Compile(new ValidationEventHandler(h.HandleValidationEvent));
    x.Validate(new ValidationEventHandler(h.HandleValidationEvent));
    return h.Errors;
} 
```

特别注意`si.TargetNamespace = s.TargetNamespace;`.

显然，这假设包含被指定为相对于包含它们的架构的文件路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-15T10:31:23.800

这是我编写的用于处理 xsd 验证的方法。希望这对某人有所帮助。

```
 /// <summary>
        /// Ensure all xsd imported xsd documented are in same folder as master xsd
        /// </summary>
        public XsdXmlValidatorResult Validate(string xmlPath, string xsdPath, string xsdNameSpace)
        {
            var result = new XsdXmlValidatorResult();
            var readerSettings = new XmlReaderSettings {ValidationType = ValidationType.Schema};
            readerSettings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema; 
            readerSettings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
            readerSettings.Schemas.Add(null, xsdPath);

            readerSettings.ValidationEventHandler += (sender, args) =>
                {
                    switch (args.Severity)
                    {
                        case XmlSeverityType.Warning:
                            result.Warnings.Add(args.Message);
                            break;
                        case XmlSeverityType.Error:
                            result.IsValid = false;
                            result.Warnings.Add(args.Message);
                            break;
                    }
                };

            var reader = XmlReader.Create(xmlPath, readerSettings);

            while (reader.Read()) { }

            return result;
        } 
```

# c++ - 将 3d 模型加载到 OpenGL 场景中

> ID：10128576
> 
> 赞同：8
> 
> 时间：2012-04-12T17:21:15.673
> 
> 标签：c++, api, qt, opengl

我需要在我的项目中加载和存储 3d 模型并在 OpenGL 场景中渲染它们。我可以选择要导出的模型类型。dwg、max、step 和其他一些格式可用。刚刚发现 OpenGL 是低级 API，不包含任何解析 3d 模型文件的工具。我正在寻找一些库/API 来将 3d 文件结构转换为 OpenGL 基元（或其他一些原始数据）并将它们存储回具有指定格式的文件中。

例如我想加载一个[步骤](http://en.wikipedia.org/wiki/Standard_for_the_Exchange_of_Product_model_data)文件，旋转和缩放一些对象，然后保存修改后的文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T17:55:29.500

我认为 Assimp 可能是您正在寻找的：[http ://assimp.sourceforge.net/](http://assimp.sourceforge.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T18:44:18.203

C++ 3ds 加载器：

[http://www.spacesimulator.net/wiki/index.php?title=Tutorials:3ds_Loader](http://www.spacesimulator.net/wiki/index.php?title=Tutorials:3ds_Loader)

# python - 在 PYTHON 中打包命名元组数组

> ID：10128580
> 
> 赞同：0
> 
> 时间：2012-04-12T17:21:47.433
> 
> 标签：python, sockets, pack

我需要通过套接字发送一个命名元组数组。

要创建命名元组数组，我使用以下内容：

```
listaPeers=[]
for i in range(200):
     ipPuerto=collections.namedtuple('ipPuerto', 'ip, puerto')
     ipPuerto.ip="121.231.334.22"
     ipPuerto.puerto="8988"
     listaPeers.append(ipPuerto) 
```

现在已经填满了，我需要打包“listaPeers[200]”

我该怎么做？

就像是？：

```
packedData = struct.pack('XXXX',listaPeers) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:39:45.713

首先，您错误地使用了namedtuple。它应该看起来像这样：

```
 # ipPuerto is a type
 ipPuerto=collections.namedtuple('ipPuerto', 'ip, puerto')

 # theTuple is a tuple object
 theTuple = ipPuerto("121.231.334.22", "8988") 
```

至于包装，这取决于你想在另一端使用什么。如果数据将由 Python 读取，则可以使用 Pickle 模块。

```
import cPickle as Pickle
pickledTuple = Pickle.dumps(theTuple) 
```

您可以一次腌制整个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:42:50.250

它不是那么简单 - 是的，对于整数和简单数字，可以直接从命名元组打包到 struct 包提供的数据。

但是，您将数据保存为字符串，而不是数字 - 在端口的情况下转换为 int 是一件简单的事情 - 因为它是一个简单的整数，但在涉及 IP 时需要一些杂耍。

```
def ipv4_from_str(ip_str):
    parts = ip_str.split(".")
    result = 0
    for part in parts:
        result <<= 8
        result += int(part)
    return result

def ip_puerto_gen(list_of_ips):
    for ip_puerto in list_of_ips:
        yield(ipv4_from_str(ip_puerto.ip))
        yield(int(ip_puerto.puerto))

def pack(list_of_ips):
    return struct.pack(">" + "II" * len(list_of_ips),
                       *ip_puerto_gen(list_of_ips)
                       ) 
```

然后，您可以使用此处的“打包”功能来打包您似乎想要的结构。

但首先，尝试您错误地创建“listaPiers”这一事实（您的示例代码将因 IndexError 而失败） - 使用空列表，并在其上使用 append 方法插入具有 ip/port 对的新命名元组作为每个元素：

```
listaPiers = []
ipPuerto=collections.namedtuple('ipPuerto', 'ip, puerto')
for x in range(200):
   new_element = ipPuerto("123.123.123.123", "8192")
   listaPiers.append(new_element)

data = pack(listaPiers) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:08:23.420

如果服务器进程从不受信任的客户端接收腌制数据，则 ISTR 认为腌制在服务器进程中是不安全的。

您可能想为记录和字段（可能是 \0 和 \001 或 \376 和 \377）提供某种分隔符。然后将消息放在一起有点像一个文本文件，它被分成由空格和换行符分隔的记录和字段。或者就此而言，如果您的正常数据不包括这些，您可以使用空格和换行符。

我发现这个模块对于在基于套接字的协议中构建数据非常有价值： http: [//stromberg.dnsalias.org/~strombrg/bufsock.html](http://stromberg.dnsalias.org/~strombrg/bufsock.html) 它可以让您执行诸如“读取直到下一个空字节”或“读取接下来 10 个字符”——无需担心 IP 聚合或拆分数据包的复杂性。

# java - 访问 Struts 2 中的所有用户会话

> ID：10128587
> 
> 赞同：3
> 
> 时间：2012-04-12T17:22:04.510
> 
> 标签：java, jsp, jakarta-ee, struts2

我正在使用 JPA 构建一个 struts 2 应用程序。用户可以多次登录应用程序。我想

1.  用户能够在网格中查看他的所有会话并可能突出显示当前会话，并且用户可以选择一个会话并终止它。
2.  管理员还应该能够查看所有登录用户，还可以查看每个登录用户的所有会话，还可以选择终止任何会话。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T18:14:52.213

我想`HttpSessionBindingListener`这就是你要找的东西。我不会写下完整的代码，只是建议你一种方法：

您可以将静态字段（地图）添加到您`User class (DTO)`将存储所有活动的位置`sessions of users`。：

例如`private static Map<User, HttpSession> usersSessions= new HashMap<User, HttpSession>();`

然后制作`User class`工具`HttpSessionBindingListener`。通过这种方式，您可以指定`valueBound(HttpSessionBindingEvent event)`可以获取实际创建的方法`session`并将其放入您的方法中，`usersSessions`如下所示：

`usersSessions.put(this, event.getSession());`

然后在`valueUnbound(HttpSessionBindingEvent event)`方法中：

`usersSessions.remove(this);``users session`后删除`logout`。

这样你就拥有`Map`了所有你`active sessions`的信息，它属于哪个用户。IMO 你可以很容易地找出你的其他问题。

# javascript - 精美的自动滚动页面，加上“春天”效果

> ID：10128590
> 
> 赞同：3
> 
> 时间：2012-04-12T17:22:17.573
> 
> 标签：javascript, jquery, html, scroll, touch

我想在我的网站上实现触摸屏自动滚动。在 Ubuntu 和 Windows 8 的界面中可以看到其中的示例。

Ubuntu：

![在此处输入图像描述](../Images/027b31ef23178bb2621553ba903ed214.png)

视窗 8：

![在此处输入图像描述](../Images/acb3e274fa8a18d3b3db1d26f73a2c83.png)

如果您向下快速滚动页面，您松开后它会继续滚动并逐渐变慢。如果滚动已达到下限或上限，页面就会“弹出”。我认为这是一个非常有趣的，我想知道如何在 HTML 页面上实现它。有现成的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:11:37.293

我的建议是使用 scroll.js。它具有出色的滚动功能。使用它，你也会自动获得冲刺效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T13:16:03.893

这看起来像您正在寻找的东西吗？

[http://scripterlative.com/files/dragscroll.htm](http://scripterlative.com/files/dragscroll.htm)

它可能不完全适合，但您可以按照您想要的方式自定义它。

# splunk - 如何更改 splunk 时间表报告中的时间跨度？

> ID：10128597
> 
> 赞同：0
> 
> 时间：2012-04-12T17:22:40.513
> 
> 标签：splunk

我正在 splunk 中构建一个视图，并希望显示一个时间表。但是，我只想显示过去 24 小时的数据，而不是 splunk 默认的上周数据。我该怎么做呢？

当我只是进行搜索时，我可以在页面顶部选择时间跨度，但在创建仪表板图表时不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:57:16.917

实际上，在简单 XML 中，如果您使用“表单”元素而不是“仪表板”元素，那么您可以使用时间范围选择器。

```
<form>
 <label>My Lovely Splunk View</label>

<fieldset autoRun="true">

<input type="time" searchWhenChanged="true">
  <default>Last 60 minutes</default>  
</input>

</fieldset>

  <row>
    <chart>
      <searchName>My Search</searchName>
      <title>Cool Chart</title>
      <option name="charting.chart">line</option>
    </chart>
  </row>
</form> 
```

# javascript - Jquery添加事件

> ID：10128598
> 
> 赞同：0
> 
> 时间：2012-04-12T17:22:41.557
> 
> 标签：javascript, jquery

我想为一些动态添加的元素添加一个事件处理程序。我将我的问题简化为下面的基本代码。我正在使用新的 JQuery 1.7 on 功能说“嘿，对于 CancelSurvey id 元素中的所有标签，当它们被单击时调用此通知函数。”

```
function notify(event) {
    console.log(event.data.name);
}
$('#CancelSurvey').on('click', 'label', { name: $(this).attr("id") }, notify); 
```

我想将标签的 ID 作为参数“名称”传递。当我尝试提醒这一点时，它是未定义的（它们是在创建的 html 中定义的）。我相信在这种情况下使用 $(this) 并没有引用标签选择器。它实际上似乎是在引用文档本身。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:25:26.123

这是因为您正在评估`this`分配处理程序的封闭上下文，因此它不是对元素的引用。

由于您知道 ID，因此可以使用字符串。

```
$('#CancelSurvey').on('click', 'label', { name: 'CancelSurvey' }, notify); 
```

* * *

或者跳过事件数据，直接从处理程序中的元素获取

```
function notify(event) {
    console.log(this.id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:26:00.897

触发事件的 DOM 元素应该被传递到点击处理程序中，您可以在事件处理程序中以这种方式提取 ID。我很确定在处理程序中，`this`指向触发事件的 DOM 元素。

# c# - 表达式中的 SSRS 动态返回数据集集合字段

> ID：10128601
> 
> 赞同：0
> 
> 时间：2012-04-12T17:22:48.923
> 
> 标签：c#, sql, reporting-services

我编写了一个自定义程序集以从报告中获取参数值并从数据集集合中返回一个字段。

我的程序集返回正确的字段！name.value，但它向我显示了它的字符串表示形式。如何将其解析为实际字段！name.value 以显示数据集中的实际数据？

如果我手动输入 fields!name.value ，它可以很好地显示我的值。如果我用我的自定义代码解决它，它会在单元格中向我显示“fields！name.value”。

# java - Netty 的整数编码器解码器

> ID：10128603
> 
> 赞同：1
> 
> 时间：2012-04-12T17:22:52.950
> 
> 标签：java, netty

我想通过 Netty 通道流式传输一系列整数。现在，在我的代码`channel.write(Integer.valueOf(val)`中，我得到了`java.lang.IllegalArgumentException: unsupported message type: class java.lang.Integer`我理解的错误，因为我没有任何整数编码器/解码器作为管道中的处理程序。这个对吗？我必须编写自己的整数解码器还是有一个可用的？围绕这个主题的一些指导将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:22:37.260

是的，情况就是这样......您也可以将其写入 ChannelBuffer，然后将 ChannelBuffer 写入 Channel。

就像是：

```
ChannelBuffer buf = ChannelBuffers.buffer(4);
buf.writeInt(Integer.valueOf(val));
channel.write(buf); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:00:38.650

是的，你的理解是正确的。如果你的管道中没有合适`FrameEncoder`的，Netty 会举手说它不知道如何处理`Integer`.

如果要添加现成的组件，可以将[ObjectEncoder](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/handler/codec/serialization/ObjectEncoder.html)和[ObjectDecoder](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/handler/codec/serialization/ObjectDecoder.html)添加到管道中。否则，您将需要实现自己的帧编码器和解码器。

# matlab - 时间序列预测

> ID：10128605
> 
> 赞同：0
> 
> 时间：2012-04-12T17:23:02.703
> 
> 标签：matlab, neural-network

我有一个输入和目标系列。但是，目标序列比输入滞后 3 步。我还能使用 narx 或其他网络吗？

[http://www.mathworks.co.uk/help/toolbox/nnet/ref/narxnet.html](http://www.mathworks.co.uk/help/toolbox/nnet/ref/narxnet.html)

```
Predict: y(t+1)
Input:
x(t)  |?
x(t-1)|?
x(t-2)|?
x(t-3)|y(t-3)
x(t-4)|y(t-4)
x(t-5)|y(t-5)
... 
```

在我的训练过程中，我提前有 y(t-2), y(t-1), y(t)，但是当我在现实生活中进行预测时，这些值只能在 3 步后获得，因为我计算了 y从接下来的 3 个输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:17:19.963

定义您选择的窗口（您需要尝试不同的尺寸以查看哪个是最佳值）。现在把这个问题变成一个回归问题。使用 t=T-2...Tx 中的 xt 和 yt 值，其中 x-2 是窗口的大小。现在使用 regress() 训练回归模型并将其用于预测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:44:43.623

这里有一些选项

1）另外，你可以有两个输入和一个输出作为

x(t), y(t-3) -> y(t)

x(t-1),y(t-4) -> y(t-1)

x(t-2),y(t-5) -> y(t-2) ...

并预测单个输出 y(t)

2) 您也可以在 na = 0、nb > 0 和 nk = 3 的情况下使用 ar 或 arx。

3）此外，您可以有四个输入，其中 2 个输入是估计的，一个输出为

x(t), y(t-3), ye(t-2), ye(t-1) -> y(t)

x(t-1),y(t-4), y(t-3), ye(t-2) -> y(t-1)

x(t-2),y(t-5), y(t-4), y(t-3) -> y(t-2) ...

并使用第 3 行及更高行作为训练数据预测单个输出 y(t)

4）您可以按照步骤一或三设置输入/输出并使用 s4sid

我有类似的问题，但没有任何可衡量的输入。我试图看看随着预测距离和模型复杂性的增加有多少误差。但我只尝试了方法 2 并将 nb = 5 设置为 15 x 5 并将 nk 从 20 更改为 150 x 10 并绘制了最大误差的轮廓。就我而言，我对少于 20 个时间步长的预测不感兴趣。

# perl - 无法使用 Perl CGI->param() 设置参数

> ID：10128608
> 
> 赞同：1
> 
> 时间：2012-04-12T17:23:22.637
> 
> 标签：perl, web, cgi

我正在尝试设置一个参数以通过 param 函数传递到下一页。

我试过了

```
param(-name=>'foo',-value=>'the value');
param(-name=>'fooz',-values=>['an','array','of','values']);
param('foo3', 1); 
```

我的脚本重定向到另一个检查所有（参数），但没有运气。CGI 手册页暗示这应该“正常工作”。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:28:16.567

有几种方法可以做到这一点。

1.  借助[URI::QueryParam](http://p3rl.org/URI%3a%3aQueryParam)方法构建您的重定向 URI。

    ```
    use URI qw();
    use URI::QueryParam qw();

    my $q = CGI->new;
    my $u = URI->new($q->url);
    $u->query_param(foo => 'the value');
    $u->query_param_append(fooz => qw(an array of values));
    $u->query_param(foo3 => 1);
    $u->as_string   # expression returns serialised string 
    ```

2.  [将参数的状态保存](http://p3rl.org/CGI#SAVING-THE-STATE-OF-THE-SCRIPT-TO-A-FILE%3a)到文件中，然后从重定向页面加载该文件的状态。

    ```
    my $query = CGI->new;
    $query->save(\*FILEHANDLE);
    my $q = CGI->new(\*INFILEHANDLE); 
    ```

3.  通过 JavaScript 进行重定向，尽管这不会让您更改参数。

    ```
    my $q = CGI->new;
    print $q->header();
    print "window.location=\"$url\";\n\n" 
    ```

在我看来，我上面列出的第一个选项是最容易做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:55:03.167

你需要使用[`self_url`方法](http://p3rl.org/CGI#CREATING-A-SELF-REFERENCING-URL-THAT-PRESERVES-STATE-INFORMATION%3a)。

```
$cgi->param(-name=>'foo',-value=>'the value');
$cgi->param(-name=>'fooz',-values=>['an','array','of','values']);
$cgi->param('foo3', 1);
printf '<a href="%s">next page</a>', $cgi->self_url; 
```

这变成了 f.ex。`<a href="http://localhost:5000/foo.pl?foo=the%20value;fooz=an;fooz=array;fooz=of;fooz=values;foo3=1">next page</a>`.

# c# - 从 BackgroundWorker 使用 HwndSource

> ID：10128611
> 
> 赞同：0
> 
> 时间：2012-04-12T17:23:41.527
> 
> 标签：c#, wpf, mvvm, backgroundworker

我真的很绝望。我有 WPF MVVM 应用程序，我通过 USB 发送和接收一些数据包。我为此使用了一个库，而这个库需要 HwndSource。一切正常，但现在我需要发送很多数据包，这需要一些时间，所以我决定使用 BackgroundWorker 并显示 ProgressBar，但我不知道如何在 BackgroundWorker 中使用 HwndSource，因为我收到了这个错误：

> 调用线程必须是 STA，因为许多 UI 组件都需要这个。

谁能帮我解决这个问题？
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:31:35.503

你可以将`HwndSource`你的 UI 线程传递给你的`BackgroundWorker`吗？如果是这样并且不会导致任何性能问题，那将是最简单的。如果这会导致性能问题，最好的办法可能是创建自己的 STA 线程并在那里完成工作，而不是使用`BackgroundWorker`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:32:29.777

使用单独的线程时，它们需要位于 STA（单线程单元）中，而后台工作线程则不是这种情况。您可能必须按照[此答案中的说明自己创建线程](https://stackoverflow.com/questions/2329978/the-calling-thread-must-be-sta-because-many-ui-components-require-this)

```
Thread t = new Thread(ThreadProc); 
t.SetApartmentState(ApartmentState.STA); 
t.Start(); 
```

`ThreadProc`作为一个`delegate`类型`ThreadStart`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:49:04.023

听起来它正在工作，除非您尝试更新进度控件。在 BW 的 ProgressChanged 事件中，如果您尝试直接更新控件，则可能会遇到您遇到的错误。由于您使用的是 MVVM，因此在 ProgreeChanged 事件中，您应该更新绑定到进度控制的视图模型属性，如果您还没有这样做的话。

# php - 当我选择多个复选框进行删除时...只有最后一个复选框被删除！意味着它可以从数据库中删除 1 个数据

> ID：10128612
> 
> 赞同：1
> 
> 时间：2012-04-12T17:23:44.167
> 
> 标签：php, mysql

下面的代码！给我复选框和一个删除按钮，在输入标签中，所有复选框都具有相同的名称（复选）！可以使用 id 从数据库中检索复选框。

问题是：：当我选择多个复选框进行删除时......只有最后一个复选框被删除！意味着它可以从数据库中删除 1 个数据。

类似网址 -> [http://localhost/demo/delete.php?check=10&check=13&check=14&submit=Delete](http://localhost/demo/delete.php?check=10&check=13&check=14&submit=Delete)

当我选择一个多于 1 个复选框的复选框时，我需要从数据库中删除复选框数据！任何人都可以帮助我克服这个问题谢谢

1.  索引.php

    ```
    <?php
    $sql = mysql_connect('localhost', 'root', '');
    mysql_select_db('database_section', $sql);
    ?>
    <form name="checkbox" method="get" action="delete.php">
        <table>
            <tr>
                <?php
                $sql = "select * from data";
                $result = mysql_query($sql) or die(mysql_error());
                while ($row = mysql_fetch_array($result))
                {
                    ?>
                    <td><input type="checkbox" name="check" value="<?php echo $row['id']?>"><?php echo      $row['data'];?>
                    </td>
                    <?php
                }
                ?>
            <tr>
                <td><input type="submit" name="submit" value="Delete"></td>
            </tr>
        </table>
    </form> 
    ```

2.  现在，在下面的 delete.php..code 中......

    ```
    <?php
    $sql = mysql_connect('localhost', 'root', '');
    mysql_select_db('database_section', $sql);
    if ($_REQUEST['submit']) {
        $abc = $_GET['check'];
        $sql = "Delete from data where id=$abc";
        $result = mysql_query($sql) or die(mysql_error());
        if (isset($result)) {
            echo "data deleted";
        }
        else
        {
            echo "not possible";
        }

    }
    ?> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:27:53.380

使用复选框作为阵列支架。将其命名为 check[] 以保存所有选定的值。在发布后，您将获得选定的数组列表。

现在你的 $abc 将是一个数组，使用 delete.php 中的 foreach 来获取检查的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:28:29.010

更改`name="check"`为`name="check[]"`

在此处查看更多信息：[http ://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html](http://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:31:28.523

```
[...]
while ($row = mysql_fetch_array($result))
{
        ?>
        <td>
            <input type="checkbox" name="check[]" value="<?php echo $row['id']?>"><?php echo $row['data']; ?>
        </td>
    <?php
}
?>
[...] 
```

# perl - windows xp中的进程间通信

> ID：10128615
> 
> 赞同：0
> 
> 时间：2012-04-12T17:24:01.360
> 
> 标签：perl, tcp, ipc, tk

我对网络域知之甚少。如果是基本问题，请直接回答我的问题

例如，我想知道如何在 Windows XP 中使用TCP/ip 协议在**两个****应用程序之间进行通信**

 ****使用 Perl 和 TK 我正在构建一个带有入口小部件的 GUI，并且我有一个安装在系统中的其他外部应用程序，比如 APPLICATION.exe**

现在我需要使用**TCP**在我的 perl 程序和外部应用程序 APPLICATION.exe 之间 建立连接

出于测试目的，无论我在 GUI 条目中键入什么，这个外部应用程序都必须接收（希望它接收为字节），外部应用程序将发送一些数据，我需要在我的 perl 程序中处理这些数据。

我完全不知道这是简单的任务还是复杂的。
如果 perl 中存在任何用于类似编程的模块，请建议我。
如果有人可以通过示例为我提供答案，我将不胜感激。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:03:46.837

如果你以前做过网络编程，那很简单。如果不是，那么它是中等难度的，因为您需要首先掌握基本概念和术语 - 如有必要，请阅读有关该主题的书。

我建议使用[IO::Socket::IP](http://p3rl.org/IO::Socket::IP)。如果您有 Perl 5.14 或更高版本，您还可以使用与 Perl 一起分发的[IO::Socket::INET](http://p3rl.org/IO::Socket::INET)。有关代码示例和更多文档的链接，请参见[https://stackoverflow.com/a/8582550/46395](https://stackoverflow.com/a/8582550/46395)。**

# r - 测试字符是否在字符串中

> ID：10128617
> 
> 赞同：343
> 
> 时间：2012-04-12T17:24:08.217
> 
> 标签：r, regex, string, r-faq

我试图确定一个字符串是否是另一个字符串的子集。例如：

```
chars <- "test"
value <- "es" 
```

如果“value”作为字符串“chars”的一部分出现，我想返回 TRUE。在以下情况下，我想返回 false：

```
chars <- "test"
value <- "et" 
```

* * *

## 回答 #1

> 赞同：479
> 
> 时间：2012-04-12T17:28:43.197

使用 `grepl`功能

```
grepl( needle, haystack, fixed = TRUE) 
```

像这样：

```
grepl(value, chars, fixed = TRUE)
# TRUE 
```

使用`?grepl`以了解更多信息。

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2016-10-15T17:48:53.673

## 回答

唉，我花了 45 分钟才找到这个简单问题的答案。答案是：`grepl(needle, haystack, fixed=TRUE)`

```
# Correct
> grepl("1+2", "1+2", fixed=TRUE)
[1] TRUE
> grepl("1+2", "123+456", fixed=TRUE)
[1] FALSE

# Incorrect
> grepl("1+2", "1+2")
[1] FALSE
> grepl("1+2", "123+456")
[1] TRUE 
```

* * *

## 解释

`grep`以 linux 可执行文件命名，该可执行文件本身是“ **G** lobal Regular **E** **xpression** **P** rint”的首字母缩写词，它会读取输入行，然后在它们与您提供的参数匹配时打印它们。“全局”意味着匹配可以发生在输入行的任何位置，我将在下面解释“正则表达式”，但想法是它是匹配字符串的更聪明的方式（R 称之为“字符”，例如`class("abc")`）和“打印" 因为它是一个命令行程序，发出输出意味着它打印到它的输出字符串。

现在，该`grep`程序基本上是一个过滤器，从输入行到输出行。并且似乎 R 的`grep`函数同样会采用一组输入。由于我完全不知道的原因（我大约一个小时前才开始使用 R），它返回匹配索引的向量，而不是匹配列表。

但是，回到你最初的问题，我们真正想要的是知道我们是否在大海捞针中找到了针，一个真/假值。他们显然决定将这个函数命名`grepl`为“grep”，但带有一个“**逻辑**”返回值（他们称之为真假逻辑值，例如`class(TRUE)`）。

所以，现在我们知道这个名字来自哪里以及它应该做什么。让我们回到正则表达式。参数，即使它们是字符串，它们也用于构建正则表达式（以下简称：正则表达式）。正则表达式是一种匹配字符串的方法（如果这个定义激怒了你，那就放手吧）。例如，正则表达式`a`匹配字符`"a"`，正则表达式`a*`匹配字符`"a"`0 次或多次，正则表达式`a+`匹配字符`"a"`1 次或多次。因此，在上面的示例中，我们正在搜索的 needle 被`1+2`视为正则表达式时，表示“一个或多个 1 后面跟着一个 2”……但我们的后面跟着一个加号！

[![1+2 作为正则表达式](../Images/7583773d4a7872a7d67ed5a1a9de9f0f.png)](https://i.stack.imgur.com/cTye4.png)

所以，如果你使用了`grepl`without setting `fixed`，你的针会不小心变成干草堆，而且会经常意外地工作，我们可以看到它甚至适用于 OP 的示例。但这是一个潜在的错误！我们需要告诉它输入是一个字符串，而不是一个正则表达式，这显然`fixed`是用于的。为什么固定？没有线索，将此答案加入书签 b/c 您可能需要再查找 5 次才能记住它。

## 最后的一些想法

你的代码越好，你需要知道的历史就越少才能理解它。每个参数至少可以有两个有趣的值（否则它不需要是一个参数），文档在这里列出了 9 个参数，这意味着至少有 2^9=512 种调用它的方法，这需要做很多工作编写，测试和记住...解耦这些函数（将它们拆分，消除彼此的依赖关系，字符串事物与正则表达式事物不同，与向量事物不同）。一些选项也是互斥的，不要给用户错误的代码使用方式，即有问题的调用应该是结构上无意义的（例如传递一个不存在的选项），而不是逻辑上无意义的（你必须发出警告来解释它）。打个比方：用墙代替 10 楼一侧的前门，总比挂一个警告不要使用它的标志要好，但两者都比两者都好。在接口中，函数定义了参数应该是什么样子，而不是调用者（因为调用者依赖于函数，推断每个人可能想要调用它的所有内容都使得函数也依赖于调用者，并且这种类型周期性依赖会迅速阻塞系统，并且永远不会提供您期望的好处）。非常警惕模棱两可的类型，这是一个设计缺陷 推断每个人都可能想要调用它的所有内容，使得函数也依赖于调用者，并且这种类型的循环依赖会迅速阻塞系统，并且永远不会提供您期望的好处）。非常警惕模棱两可的类型，这是一个设计缺陷 推断每个人都可能想要调用它的所有内容，使得函数也依赖于调用者，并且这种类型的循环依赖会迅速阻塞系统，并且永远不会提供您期望的好处）。非常警惕模棱两可的类型，这是一个设计缺陷`TRUE`和`0`都是`"abc"`向量。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-04-12T17:28:40.123

你想要`grepl`：

```
> chars <- "test"
> value <- "es"
> grepl(value, chars)
[1] TRUE
> chars <- "test"
> value <- "et"
> grepl(value, chars)
[1] FALSE 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-03-14T09:46:12.033

使用`stringi`包中的此功能：

```
> stri_detect_fixed("test",c("et","es"))
[1] FALSE  TRUE 
```

一些基准：

```
library(stringi)
set.seed(123L)
value <- stri_rand_strings(10000, ceiling(runif(10000, 1, 100))) # 10000 random ASCII strings
head(value)

chars <- "es"
library(microbenchmark)
microbenchmark(
   grepl(chars, value),
   grepl(chars, value, fixed=TRUE),
   grepl(chars, value, perl=TRUE),
   stri_detect_fixed(value, chars),
   stri_detect_regex(value, chars)
)
## Unit: milliseconds
##                               expr       min        lq    median        uq       max neval
##                grepl(chars, value) 13.682876 13.943184 14.057991 14.295423 15.443530   100
##  grepl(chars, value, fixed = TRUE)  5.071617  5.110779  5.281498  5.523421 45.243791   100
##   grepl(chars, value, perl = TRUE)  1.835558  1.873280  1.956974  2.259203  3.506741   100
##    stri_detect_fixed(value, chars)  1.191403  1.233287  1.309720  1.510677  2.821284   100
##    stri_detect_regex(value, chars)  6.043537  6.154198  6.273506  6.447714  7.884380   100 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2017-06-14T02:38:39.913

此外，可以**使用“stringr”库来完成：**

```
> library(stringr)
> chars <- "test"
> value <- "es"
> str_detect(chars, value)
[1] TRUE

### For multiple value case:
> value <- c("es", "l", "est", "a", "test")
> str_detect(chars, value)
[1]  TRUE FALSE  TRUE FALSE  TRUE 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2015-01-25T09:04:18.830

万一您还想检查一个字符串（或一组字符串）是否包含多个子字符串，您也可以使用“|” 两个子串之间。

```
>substring="as|at"
>string_vector=c("ass","ear","eye","heat") 
>grepl(substring,string_vector) 
```

你会得到

```
[1]  TRUE FALSE FALSE  TRUE 
```

因为第一个词有子串“as”，最后一个词含有子串“at”

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2016-04-13T21:59:25.867

使用`grep`or`grepl` **但要注意是否要使用正则表达式**。

默认情况下，`grep`相关采用*正则表达式*进行匹配，而不是文字子字符串。如果您没有预料到，并且您尝试匹配无效的正则表达式，则它不起作用：

```
> grep("[", "abc[")
Error in grep("[", "abc[") : 
  invalid regular expression '[', reason 'Missing ']'' 
```

要进行真正的子字符串测试，请使用`fixed = TRUE`.

```
> grep("[", "abc[", fixed = TRUE)
[1] 1 
```

如果您确实想要正则表达式，那很好，但这不是 OP 似乎要问的。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-04-12T17:29:03.240

您可以使用`grep`

```
grep("es", "Test")
[1] 1
grep("et", "Test")
integer(0) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-07T16:34:43.677

这里有类似的问题：给定一个字符串和一个关键字列表，检测哪些关键字（如果有）包含在字符串中。

此线程的建议建议`stringr`'s`str_detect`和`grepl`. 以下是`microbenchmark`软件包中的基准：

使用

```
map_keywords = c("once", "twice", "few")
t = "yes but only a few times"

mapper1 <- function (x) {
  r = str_detect(x, map_keywords)
}

mapper2 <- function (x) {
  r = sapply(map_keywords, function (k) grepl(k, x, fixed = T))
} 
```

接着

```
microbenchmark(mapper1(t), mapper2(t), times = 5000) 
```

我们发现

```
Unit: microseconds
       expr    min     lq     mean  median      uq      max neval
 mapper1(t) 26.401 27.988 31.32951 28.8430 29.5225 2091.476  5000
 mapper2(t) 19.289 20.767 24.94484 23.7725 24.6220 1011.837  5000 
```

* * *

如您所见，超过 5,000 次关键字搜索迭代使用`str_detect`和`grepl`超过一个实用的字符串和关键字向量，`grepl`其性能比`str_detect`.

结果是一个布尔向量`r`，它标识字符串中包含哪些关键字（如果有的话）。

**因此，我建议使用`grepl`来确定字符串中是否有任何关键字。**

# django - 在 Django 模型中添加新字段后出错

> ID：10128620
> 
> 赞同：2
> 
> 时间：2012-04-12T17:24:31.727
> 
> 标签：django

在我更改模型和表单之前，我的 UserProfile 工作正常。我在模型中添加了一个 DateField 并更新了我的 Forms.py 和模板。还做了一个syncdb。

配置文件/models.py

```
class UserProfiles(models.Model):
    user = models.OneToOneField(User)
    #other fields here
    birthday = models.DateField() 
```

配置文件/forms.py

```
class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfiles
        fields = ('some_field', 'birthday', 'otherfields') 
```

个人资料/views.py

```
def editprofile(request):
    return render_to_response('profile_edit.html', {'form':UserProfileForm()}, context_instance=RequestContext(request)) 
```

这是它抛出的错误。

```
Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "E:\django-sample\proschools\..\proschools\profile\views.py" in generateprofile
  12\.             userprofile = UserProfiles.objects.get(user=request.user)
File "C:\Python27\lib\site-packages\django\db\models\manager.py" in get
  132\.         return self.get_query_set().get(*args, **kwargs)
File "C:\Python27\lib\site-packages\django\db\models\query.py" in get
  344\.         num = len(clone)
File "C:\Python27\lib\site-packages\django\db\models\query.py" in __len__
  82\.                 self._result_cache = list(self.iterator())
File "C:\Python27\lib\site-packages\django\db\models\query.py" in iterator
  273\.         for row in compiler.results_iter():
File "C:\Python27\lib\site-packages\django\db\models\sql\compiler.py" in results_iter
  680\.         for rows in self.execute_sql(MULTI):
File "C:\Python27\lib\site-packages\django\db\models\sql\compiler.py" in execute_sql
  735\.         cursor.execute(sql, params)
File "C:\Python27\lib\site-packages\django\db\backends\util.py" in execute
  34\.             return self.cursor.execute(sql, params)
File "C:\Python27\lib\site-packages\django\db\backends\mysql\base.py" in execute
  86\.             return self.cursor.execute(query, args)
File "C:\Python27\lib\site-packages\MySQLdb\cursors.py" in execute
  174\.             self.errorhandler(self, exc, value)
File "C:\Python27\lib\site-packages\MySQLdb\connections.py" in defaulterrorhandler
  36\.     raise errorclass, errorvalue

Exception Type: OperationalError at /profile/
Exception Value: (1054, "Unknown column 'profile_userprofiles.birthday' in 'field list'") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:29:11.847

如果表在您添加新列之前存在，`syncdb`则不会向其中添加新列！`syncdb` [不改变现有表](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-syncdb)。考虑使用[Django south](http://south.aeracode.org/)或手动添加列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:07:57.000

```
http://code.google.com/p/django-evolution/ 
```

当您运行 ./manage.py syncdb 时，Django 将查找已定义的任何新模型，并添加一个数据库表来表示这些新模型。但是，如果您对现有模型进行更改，./manage.py syncdb 不会对数据库进行任何更改。

这就是 Django Evolution 适合的地方。Django Evolution 是 Django 的一个扩展，它允许您跟踪模型随时间的变化，并更新数据库以反映这些变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:30:23.503

Syncdb 不会自动为您创建新字段。您必须完全删除表并运行 syncdb 才能将架构更改应用到数据库。

[大多数 django 开发人员使用名为south](http://south.aeracode.org/)的第三方应用程序来处理这些类型的迁移。South 将允许您添加字段并迁移数据库，而无需重新创建或手动更改数据库。

# javascript - 如何使用 Javascript 在 Gmail 中通过 x-gm-msgid 打开电子邮件

> ID：10128624
> 
> 赞同：1
> 
> 时间：2012-04-12T17:24:53.337
> 
> 标签：javascript, google-chrome-extension, gmail

我正在编写一个扩展，它显示指向 gmail 消息的链接。当用户界面在 Gmail 中加载时，我应该能够单击其中一个链接并让 Gmail 加载它（无需刷新）。我有“x-gm-msgid”可用，理论上，我应该能够导航到“https://mail.google.com/mail/u/0/#inbox/[x-gm-msgid]”。

我试过使用

```
location.hash = "#inbox/[x-gm-msgid]" 
```

我试过使用

```
history.pushState(null, null, "/mail/u/0/#inbox/[x-gm-msgid]") 
```

两者都不起作用。Gmail 只会阻止任何更改 URL 的尝试（除非它是通过用户交互完成的）

关于如何绕过这个限制的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:05:52.010

[chrome.tabs.update](https://code.google.com/chrome/extensions/tabs.html#method-update)应该可以工作。

> 修改选项卡的属性。updateProperties 中未指定的属性不会被修改。注意：无需在清单中请求“选项卡”权限即可使用此功能。

# jquery - 只触发一次 jquery .animate oninput

> ID：10128631
> 
> 赞同：0
> 
> 时间：2012-04-12T17:25:31.260
> 
> 标签：jquery

[http://jsfiddle.net/nFFuD/](http://jsfiddle.net/nFFuD/)

我正在尝试使用 jquery 为本示例中的搜索字段设置动画，使其移动到包含 div oninput 的顶部。我最初是使用 scriptaculous effect.move 来做到这一点，但我不能让事件只触发一次，所以如果有人在第一次击键后继续输入，效果会停止并从动画中的当前位置重新开始额外的击键，这是愚蠢的。我是使用 jquery 的新手，所以请放轻松，如果我不是很有意义。

编辑： ocanal 发布的示例肯定有效，但由于某种原因，当我应用它时它对我不起作用 - 这是我目前所拥有的 - 还试图在同一事件中淡化 div

```
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<title>Untitled</title>
<head>
<meta charset="utf-8">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$('#search').keypress(function() {

    $(this).animate({
    top: '0',
  });

    $('#icon).fadeOut('slow', function() {

    }); 

});​

</script>
<style type="text/css" media="screen">

body {
    margin: 0px;
    padding: 0px;
}

#container {
    position: relative;
    border: #000 1px solid;
    margin: 0px auto;
    width: 960px;
    height: 800px;
}

input {
    outline: none;
}

#icon {
    position: absolute;
    top: 80px;
    left: 370px;
    width: 200px;
}

#search {
    position: absolute;
    top: 300px;
    left: 230px;
            width: 500px;           
}

</style>
</head>
<body>  
<div id="container">
    <img id="icon" src="icon.png" alt="icon">           
    <input id="search" type="text" autofocus="autofocus">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:29:39.143

`change`像这样工作`blur`，所以我认为你应该使用按键事件来做到这一点，

```
$('#search').keypress(function() {

    $(this).animate({
    top: '0',
  });
});​ 
```

[http://jsfiddle.net/ocanal/nFFuD/7/](http://jsfiddle.net/ocanal/nFFuD/7/)

* * *

**编辑：**

你分享的代码不起作用，因为你应该在dom准备好时初始化事件函数，你不需要在jsFiddle中使用它，因为你可以选择脚本工作的时间。

```
$(document).ready(function() {
//your functions.
}); 
```

比它会起作用。

```
$(document).ready(function() {
  $('#search').keypress(function() {

      $(this).animate({
      top: '0',
    });

      $('#icon').fadeOut('slow', function() {

      }); 

  });
}); 
```

[这是你的工作代码](http://jsfiddle.net/ocanal/TA6mL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:31:25.077

您遇到了一些语法错误；在编写代码时，我建议使用 Firebug 甚至 Chrome/IE9 中的开发人员工具来捕获此错误。这段代码工作得很好：

```
$('#search').on('keyup',function(){
    $(this).animate({
        top:0
    });                  
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:30:00.837

您的语法有一些错误。尝试这个：

```
$('#search').change(function() {

    $(this).animate({
    top: '0'
  });

});​ 
```

*   不应该有`+=`。这意味着您将在当前顶部位置添加零并为其设置动画。`0`动画到实际顶部。
*   顶级属性后不应有逗号
*   您需要关闭`animate`函数的括号。
*   `$('this')`应该是`$(this)`。如果你用引号传递它，它实际上会寻找一个`<this>`当然不在你页面上的任何地方的元素，因为那不是有效的 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:33:46.137

您的脚本有一些问题。这是我认为您想做的工作版本：[jsfiddle](http://jsfiddle.net/nFFuD/10/)

```
$('#search').change(function() {
 $(this).animate({
   top: '0'
 })
}) 
```

首先，要调用函数内部的元素，它`$(this)`不是`$('this')`. 当某些东西用引号引起来时，它是在引用一个特定的元素。没有引号，它是一个变量。

您还需要去掉 . 后面的逗号`top: '0'`。它在现代浏览器中可以正常工作，但 IE 不允许。

您还缺少 animate 函数中的右括号。您应该使用控制台来发现这些错误。Firefox 中的 Firebug，或者，如果您使用的是 Chrome，请右键单击页面并单击“检查元素”。控制台通过向您显示错误来帮助您进行调试。您还可以使用 在那里发送警报`console.log()`。

# database - 持续集成环境中的集成测试：数据库和文件系统状态

> ID：10128640
> 
> 赞同：0
> 
> 时间：2012-04-12T17:25:54.250
> 
> 标签：database, filesystems, continuous-integration, automated-tests

我正在尝试为我的应用程序实现自动化集成测试。这是一个非常复杂的怪物。你可以说它的数据库和文件系统的一部分是它的状态的一部分，因为它将图像文件保存在硬盘驱动器中，并引用数据库中的那些文件。软件需要所有这些，在连贯的状态下，才能正常工作。

回到编写测试：要运行任何相关测试，我需要文件系统中的一些图像文件，以及在数据库中填写的某些记录。我想把所有这些都放在存储库中一个名为 TestEnvironmentData 的单独文件夹中，然后从持续集成服务器（Team City）中检索它们，但一位同事说 repo 已经很满了，我应该设置一个特殊目录和数据库，仅在持续集成服务器中。我不喜欢这样，因为测试成功取决于我手动维护服务器中的内容，并在每次测试变得繁琐之前恢复初始状态。

当你需要为这样的应用程序编写集成测试时，你们会怎么做？主要目标是拥有一个自动化测试工具来进行大规模重构。有很多意大利面条式的代码，应用程序的当前架构很难进行单元测试，这就是我决定首先进行集成测试的原因。

欢迎任何替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:01:29.170

首先，我们使用 Maven 来构建我们的代码。它就像 ant，但它在很多事情上都依赖于约定而不是配置，就像 Ruby On Rails 一样。其中一个约定是标准化的目录结构：

```
(project)----src----main----(language)
          |      |       \--resources
          |      \--test----(language)
          |              \--resources
          \--target---... 
```

使用这样的目录结构可以很容易地让您的应用程序资源和测试资源彼此靠近，但仍然能够构建用于测试或构建用于生产，或者只是构建两者但只是在运行测试后打包应用程序部分。

至于在测试之间重置数据库，您如何执行此操作在很大程度上取决于您使用的 DBMS。例如，如果您使用的是 MySQL，那么很容易以您想要的方式获取测试数据，并对文件执行 mysqldump，然后在测试前加载。对于其他 DBMS，您可能必须删除并重新创建表并重新加载数据，或者为起点制作单独的表并[使用 CREATE/SELECT sql 语句每次复制它](http://www.techonthenet.com/sql/tables/create_table2.php)。

“在测试之间重置数据库”步骤确实没有可靠的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:07:58.360

设置持续集成服务器时，开发人员的可重复性是关键。我为我的最后三位雇主设置了一个，我发现成功的关键是开发人员能够从他们的开发系统运行相同的测试，以获得与 CI 服务器相同的结果。

最简单的方法是将测试工件签入源代码控制，但您也可以使用您在构建步骤之一中复制它们的 Dropbox 或网络共享。

对于 .Net 解决方案，我一直使用 MsBuild，因为您可以最轻松地复制 Visual Studio 的构建过程并获得相同的二进制文件/可部署文件。至于保持数据库同步以便过去可以重复测试，我使用了 MbUnit 测试框架和 [Rollback] 属性，因为它会回滚测试中发生的对 Sql Server 的任何更改。我相信 Nunit 现在也有这个属性。

CI 服务器非常适合查找破坏现有功能的代码，但除非开发人员可以在他们的机器上重现错误，否则他们在一段时间内不会信任 CI 服务器。

# c# - 无法转换 lambda 表达式

> ID：10128641
> 
> 赞同：1
> 
> 时间：2012-04-12T17:25:54.463
> 
> 标签：c#, wcf, linq, web-services

如果我尝试：

```
List<Student> students = new List<Student>();
List<Group> Groups = new List<Group>();
Groups = students.Remove(f => f.StudentID.Equals(studentID)); 
```

我在这一行得到一个错误：`f => f.StudentID.Equals(studentID)`

我在以前的帖子中遇到了困难[https://stackoverflow.com/questions/10116685/linq-deleted-users-still-associated-with-groups](https://stackoverflow.com/questions/10116685/linq-deleted-users-still-associated-with-groups)和这里[WCF 中的删除方法](https://stackoverflow.com/questions/10126645/delete-method-in-wcf)

所以我想也许我可以删除组中包含的学生，但我收到一个错误，无法将 lambda 表达式转换为 Student 类型，因为它不是委托类型。

只是关于我要做什么的快速更新，假设**学生 A**可以属于多个组。然后，如果我删除该学生，则该学生不应再列出任何组。但确实如此。但是，如果我搜索让我们说**组计算**学生不在那里。似乎只有当我带学生并搜索他所属的组（即使他被删除）时，它才会返回我最初将他添加到的组。这不应该发生

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T17:31:02.740

如果您尝试传入谓词，则必须使用[RemoveAll](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)方法。[Remove](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)方法接受单个元素

```
var numRemoved = students.RemoveAll(f => f.StudentID == studentID); 
```

此外，RemoveAll 方法不会返回“更新”列表，它会更新列表。所以`students`将更新列表，即它不会有学生`StudentID == studentID`。

如果要保留`students`原样，请将元素复制到新列表

```
var newStudentList = new List<Student>(students); 
```

然后过滤该列表

PS 两个列表中的公共对象是相同的，即如果一个对象在一个列表中更新，它也会在第二个列表中更新。如果需要第二个副本，则必须实施深度克隆。这只是来自同一对象池的两个列表。

```
var numRemoved = newStudentList.RemoveAll(f => f.StudentID == studentID); 
```

随着您的更新，您似乎正在寻找

```
students.RemoveAll(s => s.StudentID == studentID);
Groups.ForEach(g => g.Groupsz.RemoveAll(gs => gs.StudentID == studentID)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:31:05.793

尝试`RemoveAll`............

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T17:32:16.460

`List<T>.Remove()`返回类型为`bool`. 所以你不会得到一个`List<Group>`from `List<Student>.Remove()`。

您可以使用`var removed = students.RemoveAll(f => f.StudentID.Equals(studentID));`获取从列表中删除的学生的列表。

但是您需要做更多的工作才能使该学生列表成为`List<Group>`. 您的问题中没有足够的信息来判断是否存在转换的可能性。

# iphone - 让 XCode 在 XCode 4.3(.1) 中包含、编译和链接现有 (C++) 代码库

> ID：10128646
> 
> 赞同：15
> 
> 时间：2012-04-12T17:26:06.400
> 
> 标签：iphone, c++, ios, xcode

我正在尝试将现有的 C++ 代码库“导入”到我的 XCode iOS 项目中。

问题是，xCode 不会编译（因此不会链接）我的代码。这是我到目前为止所做的：

*   文件 > 将文件添加到“项目”。我没有勾选“复制文件”，因为它是多个平台的共享代码库，并且源代码的多个副本不是一个选项。
*   我已经为“标题搜索路径”项目设置添加了适当的路径。包括头文件有效，我可以从我的 Objective-C++ (.mm) 文件中#include "stuff.h"。

但是，我找不到任何方法来实际告诉 XCode 编译 .cpp 文件？

几点：

*   我不是在寻找一种将其预编译到库中并以这种方式链接的方法
*   该项目是一个标准的 iOS Objective-C 项目。从中调用 C++ 代码（这不是问题）

**更新**

我已将代码库**目录**添加到目标的“编译源”中。我实际上必须在弹出的对话框中单击“添加其他...”，因为我无法选择对我的代码库的目录引用。

当我添加它时，XCode 会询问我是否要“创建外部构建系统项目”。我把它打勾，两个字段的默认值是“/usr/bin/make”和“$(ACTION)”。但是，我的代码库在构建过程中没有被编译。我必须编写自己的 Makefile 吗？

如果我不选择“创建外部构建系统项目”，则会在目标下创建一个目录引用，但在构建过程中不会编译并发出警告：

```
warning: no rule to process file '$(PROJECT_DIR)/../codebase'
of type folder for architecture i386 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-12T17:31:40.813

即使您不选中**Copy Files** ，在将文件添加到项目时也必须选中**Add to Targets**。

![在此处输入图像描述](../Images/cfea48613d2c4273c195a575725e0dcf.png)

如果您忘记这样做，您可以选择目标，转到**Build Phases**选项卡并将文件添加到**Compile Sources**。

![在此处输入图像描述](../Images/d8e27519db3ad105824425c6034bae3d.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T20:50:22.550

如果你去你的目标->构建阶段->编译源->“+”->“添加其他”->（选择你的外部源文件夹）->选择：为任何添加的文件夹创建组->未选中：复制项目进入目的地。

现在您的文件夹将在 XCode 中，模仿结构。如果您将源文件添加到 XCode 中的该文件夹，则源文件将被添加到您的外部源目录中。因此，使用多个 IDE 和必须管理源链接的便利性得到了解决。

捕获。您仍然必须手动将文件添加到“编译源”区域。这是相当简单的。只需单击并将源文件从 XCode 中的组目录拖到 Compile Sources 窗口中。所以现在添加源文件时有一个额外的步骤。忘记将它们添加到 Compile Sources 窗口将产生未解决的符号编译错误。

# jquery - jquery-ui坏了

> ID：10128651
> 
> 赞同：0
> 
> 时间：2012-04-12T17:26:33.990
> 
> 标签：jquery, jquery-ui

我两个月前创建的脚本一次都不起作用。我已尝试恢复备份文件，但没有任何更改。这个问题出现在所有使用来自 google apis Functions 脚本的网站上，我使用的是 .button() .corner()

链接和脚本：

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>       
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>  
<script src="http://malsup.github.com/jquery.corner.js"></script> 
```

错误：

> BlockquoteUncaught 异常：TypeError：无法将 '$("#BuyCredit")' 转换为对象
> 
> [在http://www.t-samp.net/credit-shop.php](http://www.t-samp.net/credit-shop.php)的 () 中的第 3 行第 6 列抛出错误：$("#BuyCredit").button().click(function() { 调用方式Function.prototype.apply() 来自[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)中 (b, f) 的第 2 行第 29359 列：if(c[ m].apply(b,f)===!1&&a.stopOnFalse) 从[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2 (b, c) 中的第 2 行第 30902 列调用/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js) : d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c)); 从第 2 行调用，[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js) (a) 中的第 19036 列：A.fireWith(c,[e]),e.fn.trigger&&e( c).trigger("准备好").off("准备好") 从 () 中的第 2 行第 28469 列调用[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js：c.removeEventListener](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js) ("DOMContentLoaded",B,!1),e.ready()

我的脚本：

```
<script>
    $(document).ready(function() {
      $("#BuyCredit").button().click(function() {
        $(".buycr").corner();
        $(".buycr").css("display","block");  
      }); 
    });
  </script> 
```

我的 HTML：

```
<div class="buycr" data-corner="15px">
  <div style="width:280px">Text</div>
</div>
<div style="width:100px">
      <span id="HideBox">Zavřít</span>
    </div> 
```

感谢您的任何反馈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:29:25.987

您正在链接到两个不同版本的 jQuery

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

尝试摆脱最新的（假设它之前在 1.7.2 上工作）。

**[编辑]**由于这不起作用，最好的猜测是任何东西`#BuyCredit`都不存在了。那将解释错误`Cannot convert '$("#BuyCredit")' to object`。

确保`#BuyCredit`您的页面上有一个。

# php - 从 PHP 中的 url 字符串获取变量

> ID：10128654
> 
> 赞同：0
> 
> 时间：2012-04-12T17:26:38.933
> 
> 标签：php, youtube

我正在编写一个嵌入 youtube 视频的程序。用户将提交 URL (http://www.youtube.com/watch?v=IoBP24I2lwA)，我需要将“IoBP24I2lwA”分开。问题是，并非所有 youtube 视频都以“v”变量结尾，所以我不能只做一个子字符串，直到它到达“=”符号。一些网址如下所示：“http://www.youtube.com/watch?v=IoBP24I2lwA&feature=brand”。

有没有办法只获取“v”变量，比如使用 $_GET['v']... 只是为了一个字符串？

谢谢，伊恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:27:31.057

你可以用[`parse_url()`](http://php.net/parse_url)and做到这一点[`parse_str()`](http://php.net/parse_str)：

```
$query = parse_url($str, PHP_URL_QUERY);
parse_str($query, $arr);
$v = $arr['v']; 
```

# javascript - jQuery jPlayer 没有在 iPad 上显示持续时间

> ID：10128659
> 
> 赞同：1
> 
> 时间：2012-04-12T17:26:58.427
> 
> 标签：javascript, jquery, ipad, jplayer

> **可能重复：**
> [HTML5 音频持续时间问题](https://stackoverflow.com/questions/10101446/html5-audio-duration-issue)

我在我的网站上使用 jPlayer，一切正常。即使在 Mac 上的 Safari 上。

但是在 iPad 中从 Safari 加载网站时，持续时间显示为 NaN（不是数字）。

这就是我启动播放器的方式：

```
$('#someId').jPlayer({
    supplied: 'mp3'
    ,swfPath: '/libjs_geral/jPlayer.2.1.0/js'                   
    ,wmode: 'window'
    ,ready: function () {
        $(this)
        .jPlayer('setMedia', { mp3: mp3Url })
        .jPlayer('play');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:06:38.463

检查您的服务器是否启用了范围请求。

从Jplayer 网站上的[这个页面：](http://jplayer.org/latest/developer-guide/#jPlayer-server-response)

> 您的服务器必须启用 Range 请求。这很容易通过查看服务器的响应是否在其标头中包含 Accept-Ranges 来检查。大多数 HTML5 浏览器允许在下载期间寻找新的文件位置，因此服务器必须允许请求新的 Range。
> 
> 无法接受字节范围请求会导致某些 HTML5 浏览器出现问题。通常无法从文件中读取持续时间，因为某些格式要求读取文件的开头和结尾以了解其持续时间。如果服务器上未启用 Range 请求，Chrome 往往是问题最多的浏览器，但所有浏览器都会有一些问题，即使只是您必须等待所有媒体加载完毕才能跳到最后.

# javascript - 当以不同的方法使用时，变量是“未定义的”？

> ID：10128661
> 
> 赞同：1
> 
> 时间：2012-04-12T17:27:09.003
> 
> 标签：javascript, variables, methods

我有这个用于设置对象的代码：

```
myObj.prototype.__init = function(a, b, c){
    this.a = a;
    this.b = b;
    this.c = c;
} 
```

然后在另一个函数中，我想使用方法`a`中的 I 设置`__init`：

```
myObj.prototype.myFunc = function(){
    var data = parse(a);
        //...
} 
```

问题`a`是`undefined`。我也试过`this.a`了，也有结果`undefined`。有趣的是，`console.log(myO)`在执行 a`var myO = new myObj();`并`myO.__init(myA, myB, myC);`打印带有`a`初始化字段的对象之后。那么我如何在`a`我的对象的那个函数中访问呢？

谢谢

编辑：这是对 myFunc 的调用：

```
someVar = new tccHandler.myObj();
someVar.__init(myA, myB, myC);
someVar.myFunc(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:30:06.160

我怀疑应该是`parse(this.a)`。

请记住，默认*情况下， 的属性不在*标识符*[*`this` read : variables] 的查找链中；只有“全局对象”（即）的词法*变量*和属性是。**`window`**

 **`a`是函数中的*变量*`__init`（作为函数参数），它命名的对象被分配给*属性* `this.a`，但`a`不是函数*的*变量`myFunc`。每个函数都引入了它*自己的*词法范围。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:30:51.813

在普通的 javascript 中，你会这样做：

```
myObj = function(a,b,c) {
    this.a = a;
    this.b = b;
    this.c = c;
} 
```

演示：

```
> var x = new myObj(1,2,3);
> x.a;
1 
```**

# android - 安卓应用数据安全

> ID：10128666
> 
> 赞同：0
> 
> 时间：2012-04-12T17:27:35.927
> 
> 标签：android, security, storage, sd-card

我正在从远程服务器下载文件以保存以在 android 设备上使用。这些文件主要是图像和音频，但我希望用户无法使用应用程序以外的方法访问这些数据。

问题是这些文件可能很大，这就是我使用外部存储的原因。这里的问题是用户可以通过将手机连接到计算机来访问存储在外部存储中的数据。

除了使用内部存储，我还有什么选项可以保护写入磁盘的文件吗？如果我必须使用内部存储，除了某些用户可能拥有少量内部存储这一事实之外，还有其他缺点吗？

谢谢你的时间！任何帮助都感激不尽！:)

编辑 1：正在下载的数据是付费内容（通过应用内计费）。这就是为什么我担心限制访问。

编辑 2：我已经添加了一个“。” 在我将数据保存到的文件夹之前。我更关心知道查看隐藏文件夹的“高级”用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:32:12.407

好像您正在从网络填充应用程序的缓存。始终建议将外部存储用于此类目的，因为某些用户可能没有足够的内部存储器来容纳它。

由于您下载的内容包括图像和音频，因此我不建议您使用加密/解密，因为它会减慢应用程序的处理速度。因此，如果您想放在外部存储器上并跳过其加密，那么您无能为力来保护您的数据。

我个人认为将此类数据保持原样（未加密）不会有任何危害/劣势。但是如果你有一些重要的文件，也许你可以只对那些特定的文件进行加密。

# java - 如何在 Java 中实现自定义本地 DNS 服务？

> ID：10128668
> 
> 赞同：2
> 
> 时间：2012-04-12T17:27:45.383
> 
> 标签：java, networking, dns

我有一个 Java 桌面应用程序（部署在 Windows 上），它需要了解一堆不同的主机名/IP。我更喜欢在软件中使用主机名，因为它比输入 IP 地址更具描述性/不那么脆弱。但是，这意味着 Windows 机器需要了解此映射。

他们正在与之交谈的桌面应用程序和服务器软件都部署在专用网络中。网络上没有我可以利用的现有 DNS 服务。

桌面正在与之通信的服务器软件已经有一个包含所有这些信息的主机文件。过去，我在桌面安装程序中包含了这个主机文件，基本上破坏了 Windows 机器的主机文件。这很丑陋，我不想再这样做了。我希望我基本上可以在我的桌面应用程序中部署我的主机文件，并在使用主机文件信息填充的应用程序内运行某种名称服务。这样我就不会影响其他应用程序，也不会弄乱桌面的主机文件。

我发现[这篇文章](http://rkuzmik.blogspot.ca/2006/08/local-managed-dns-java_11.html)描述了实现你自己的`NameService`类。这是我一直在寻找的解决方案，但是，它使用内部 Sun 类（我可以在这里逃脱，但我宁愿不必这样做）。此外，这篇文章很旧（2006 年）。在[Java 7 API](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html)中，不再列出文章提到的网络属性。有没有更好/更现代的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:03:29.033

尝试使用[JDNSS 之](http://jdnss.sourceforge.net/)类的项目。

但是，如果您在网络上搜索，您可以找到许多关于此主题的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:48:32.937

我不明白替换 NameServer 类等的复杂性。如果您只需要几个主机名-IP 映射，请拥有一个包含主机名和 IP 的数组，并在该数组中查找您的名称。或者有一个像主机一样格式化的文件，将文件放在您的应用程序文件夹中，然后从该文件中填充上述数组。

*好的*解决方案是拥有一个本地 DNS 服务器，例如 DNSMASQ 或 BIND。

# php - 如何在我的工作流程中使用 Git

> ID：10128672
> 
> 赞同：2
> 
> 时间：2012-04-12T17:27:56.563
> 
> 标签：php, git, webdav

我正在尝试学习如何在我的日常工作流程中使用 Git，但我对如何让它为我工作感到有些困惑。作为一名 Web 开发人员，我的工作方式是拥有两个 VPS——一个作为生产服务器，另一个作为开发服务器。在开发服务器上，我通常会创建一个指向源文件（位于 /home/public_html/dev.domain.co.uk/）的 webdav，并将其作为本地文件夹安装在我的 mac 上。这样，我可以在我的 IDE 中打开（或创建）PHP 文件，做我需要做的事情，保存文件，然后在我的浏览器中刷新测试链接。

现在，正如我所说，我想开始使用 Git 来跟踪我和我的同事对项目所做的所有修改。所以我的问题是我将如何做到这一点 - 我会在我的开发服务器上的 public_html 文件夹中创建一个存储库吗？当我在我工作的不同机器上克隆存储库时，我会挂载 webdav 并在其中克隆存储库吗？理想情况下，我想建立一个我自己和同事可以访问的在线存储库。

任何帮助和/或建议将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:32:22.423

我有类似的工作流程。我正在使用我的 IDE 通过 SSH 编辑文件，有效地直接在开发服务器上使用这些文件。我最终做的是通过 SSH 打开一个控制台到我的开发服务器，并在那里运行 git。我使用 Bitbucket 作为遥控器，并从那里推/拉，使我的所有更改都保持集中。我需要推送到生产服务器的内容，我从 Bitbucket 中提取，然后翻转符号链接，以便所有文件都立即更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:37:21.547

Git 是一个去中心化的版本控制系统，这意味着您不需要拥有“共享”存储库。但是，在协作时，特别是如果您不与同事密切合作，拥有一个带有“官方”存储库的中心点可能会很有吸引力。

现在在您的情况下，如果您想继续在测试机器上的 WebDAV 导出文件夹中工作，这取决于您是否与同事共享此文件夹。如果它是您的私人工作空间，请在那里创建您的 git 存储库并按照您的喜好使用它。

要设置将更改推送到的中央“官方”存储库，您有多种选择，具体取决于您的基础架构：

*   使用 GitHub 或 BitBucket 之类的第三方服务：这很容易设置和使用，但如果你想保持你的存储库私有，可能需要订阅费用。
*   使用您的开发服务器并通过 SSH 或 WebDAV 在共享位置设置存储库的克隆。这可能需要更多的维护，而且你不会得到 GitHub 之类的花哨的 WebUI。

您可能还想看看这篇关于开发[分支模型](http://nvie.com/posts/a-successful-git-branching-model/)的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:32:42.893

您可以使用[http://bitbucket.org 之](http://bitbucket.org)类的服务。

它是免费的，它允许创建私有和公共存储库。

提交更改后，只需`push`将其发送到服务器（他们会告诉您如何操作），然后让您的合作伙伴克隆该存储库，并`pull`在必要时从该存储库中克隆。

# php - PHP：html_entity_decode 删除/不显示字符

> ID：10128675
> 
> 赞同：2
> 
> 时间：2012-04-12T17:28:11.960
> 
> 标签：php, utf-8, html-entities, html-encode

我的网站上的 Â 字符有问题。

我有一个网站，用户可以使用所见即所得的编辑器（ckeditor）来填写他们的个人资料。内容在放入数据库之前通过 htmlpurify 运行（出于安全原因）。

数据库的所有表都设置为 UTF-8 字符集。我还在脚本执行开始时调用'SET NAMES utf-8'以防止出现问题（这已经工作了多年，因为我很长时间没有遇到这个问题了）。显示文本的网页的内容类型为 utf-8，我还使用 header() 函数来设置内容类型和字符集。

显示文本时一切似乎都很好，直到我尝试在内容上运行正则表达式。html_entity_decode（使用'utf-8'的编码参数调用）由于某种原因正在删除/不显示Â字符，并且它留下了导致我所有正则表达式失败的东西（似乎那里有一个字符，但我不能在源代码中查看它）。

如何防止和/或删除此字符，以便运行正则表达式？

**编辑：**我决定放弃 ckeditor 并使用本网站使用的降价格式，以获得更大的灵活性。从我记事起，我就讨厌所见即所得的编辑器。将所有配置文件更新为新格式将使我有机会删除所有有问题的文本并为网站提供一个全新的开始。感谢所有的投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:34:43.860

Since the character you are talking about exists within the ANSI charset, you can do this:

```
utf8_encode( preg_replace($match, $replace, utf8_decode($utf8_text)); 
```

This will however destroy any unicode character not existing within the ANSI charset. To avoid this you can always try using `mb_ereg_replace` which has multibyte (unicode) support:

`string mb_ereg_replace ( string $pattern , string $replacement , string $string [, string $option = "msr" ] )`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:30:06.017

您可能面临字符串实际上没有正确 UTF-8 编码的情况（正如您所写的那样，但事实并非如此）。然后可能会使用替换字符`html_entity_decode`删除任何无效的 UTF-8 字节序列（例如 的单字节字符集编码）。`Â`

根据您使用的 PHP 版本，您可以通过使用标志来更好地控制如何处理这个问题。

此外，要查找您看不到的字符，请创建[字符串的 hexdump](https://stackoverflow.com/q/1057572/367456)。

# http - HTTP 下载如何工作？

> ID：10128681
> 
> 赞同：8
> 
> 时间：2012-04-12T17:28:42.373
> 
> 标签：http, download

假设我想从 [http://www.xxx.ууу/example.pdf下载一个名为 example.pdf 的文件](http://www.xxx.%D1%83%D1%83%D1%83/example.pdf)

可能，我这样发送 GET 请求：

```
GET /example.pdf HTTP/1.1␍␊
 Host: www.xxx.yyy␍␊
 ␍␊ 
```

但接下来是什么？

http 标头的交换是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:31:39.167

我假设您已阅读有关 HTTP 协议的 Wikipedia 文章。如果您只需要更多示例，我强烈建议您下载 Wireshark。Wireshark 是一个非常强大的数据包嗅探器，它可以让你观察你和任何网站之间的数据包通信。此外，它实际上会分解数据包并以更“人性化”的方式告诉您它们的含义。它有一些学习曲线，但它可以教你很多关于包括 HTTP 在内的许多不同协议的知识。

[http://www.wireshark.org/](http://www.wireshark.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:39:00.347

[我不确定您的最终目标是什么，但您可以通过Live HTTP Headers](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/) Firefox 插件查看实时 http 标头交互。在 Chrome 中也可以，但需要做更多的[工作](http://blogs.agilefaqs.com/2011/06/02/how-to-access-raw-http-headers-in-chrome/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:31:34.917

检查[HTTP 1.1 RFC](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:32:28.633

您可能想查看[http://www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。而且，很少需要重新创建协议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-18T12:19:46.530

要回答此类 GET 请求，应传递具有以下标头的数据包：

```
HTTP/1.1 200 OK
Accept-Ranges: bytes
Content-Length: 6475593
Content-Type: application/x-msdownload
Etag: "qwfw473usll"
Last-Modified: Sun, 18 Jul 2021 12:02:31 GMT
Server: Caddy
Date: Sun, 18 Jul 2021 12:03:47 GMT 
```

在最后一行之后，您必须指定要传输的文件的 2 个 CRLF 和行字节。

# asp.net-mvc-3 - 来自控制器的 ASP.NET MVC3 视图的物理位置

> ID：10128684
> 
> 赞同：4
> 
> 时间：2012-04-12T17:28:54.547
> 
> 标签：asp.net-mvc-3, views, filepath

从动作内部获取将由 MVC 动作提供服务的视图的物理位置的正确方法是什么？

我需要文件的最后修改时间来发送响应标头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:48:22.230

获取视图物理位置的正确方法是映射其虚拟路径。可以从（派生自该类的`ViewPath`属性中检索虚拟路径，因此您的实例通常具有该属性）。`BuildManagerCompiledView``RazorView``IView`

这是您可以使用的扩展方法：

```
public static class PhysicalViewPathExtension
{
    public static string GetPhysicalViewPath(this ControllerBase controller, string viewName = null)
    {
        if (controller == null)
        {
            throw new ArgumentNullException("controller");
        }

        ControllerContext context = controller.ControllerContext;

        if (string.IsNullOrEmpty(viewName))
        {
            viewName = context.RouteData.GetRequiredString("action");
        }

        var result = ViewEngines.Engines.FindView(context, viewName, null);
        BuildManagerCompiledView compiledView = result.View as BuildManagerCompiledView;

        if (compiledView != null)
        {
            string virtualPath = compiledView.ViewPath;
            return context.HttpContext.Server.MapPath(virtualPath);
        }
        else
        {
            return null;
        }
    }
} 
```

像这样使用它：

```
public ActionResult Index()
{
    string physicalPath = this.GetPhysicalViewPath();
    ViewData["PhysicalPath"] = physicalPath;
    return View();
} 
```

或者：

```
public ActionResult MyAction()
{
    string physicalPath = this.GetPhysicalViewPath("MyView");
    ViewData["PhysicalPath"] = physicalPath;
    return View("MyView");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T08:27:30.483

这可以工作：

```
private DateTime? GetDate(string controller, string viewName)
{
    var context = new ControllerContext(Request.RequestContext, this);
    context.RouteData.Values["controller"] = controller;
    var view = ViewEngines.Engines.FindView(context, viewName, null).View as BuildManagerCompiledView;
    var path = view == null ? null : view.ViewPath;
    return path == null ? (DateTime?) null : System.IO.File.GetLastWriteTime(path);
} 
```

# sql - SQL - 对于每个（如果...那么...否则...）

> ID：10128689
> 
> 赞同：1
> 
> 时间：2012-04-12T17:29:24.693
> 
> 标签：sql, for-loop, if-statement

我正在尝试测试我创建的 sql 数据库。为此，我有 2 个表：项目和品牌。项目存储包括品牌名称在内的不同字段，品牌存储包括名称在内的其他字段。我想检查项目中的每个品牌，品牌表中都有对应的名称。我该怎么做？我想到了一些类似的东西：

```
"for each row in items"
if (count(select * from items join brands on items.brand = brands.name) == 0, select items.name, ''); 
```

但是我不知道如何在其中包含 for 语句......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:31:46.283

你可以试试这个：

```
SELECT items.name 
FROM items LEFT JOIN brands
    ON items.brand = brands.name
WHERE brands.name IS NULL
ORDER BY items.name 
```

通过此查询，您可以从项目表中获取所有记录，将它们与相应的品牌记录（如果存在）连接起来，最后获取没有品牌对应记录的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:16:56.903

```
 DECLARE @Number int;
 SET @Number = 50;
 IF @Number > 100
  PRINT 'The number is large.'; 
```

ELSE BEGIN IF @Number < 10 PRINT '数字很小。'; ELSE PRINT '这个数字是中等的。'; 结尾 ; 去

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:51:29.777

因此，您真正想知道的是品牌表中不存在品牌的所有商品。

他们是：

```
SELECT DISTINCT brand
FROM items i
WHERE NOT EXISTS (
  SELECT NULL
  FROM brands b
  WHERE i.brand = b.brand
) 
```

我建议你：

```
ALTER TABLE item WITH CHECK ADD CONSTRAINT item_FK_brand FOREIGN KEY (brand) REFERENCES brand (brand) 
```

# javascript - Backbone Javascript - 找不到函数？

> ID：10128694
> 
> 赞同：1
> 
> 时间：2012-04-12T17:29:39.770
> 
> 标签：javascript, backbone.js

我不断收到“filterMessages 不是函数”错误。这是 Backbone View 类 - 不知道为什么它找不到该功能。

这是 Firebug filterMessages 中的错误未定义第 152 行 (filterMessages("all").each(function(message) {

```
MessageListView = Backbone.View.extend({

    defaults : {
        filterString : "all"
    },

    initialize : function() {

        this.collection.on("add", function(model) {
            var view = new MessageView({model: model});
            $("div.cameras").prepend(view.render().el);
        });

        this.collection.on("remove", function(model) {
            var ID = model.id;
            $("#message-" + ID).parent("div.message").remove();
        });

        this.collection.on("reset", function(models) {
            $("div.cameras").empty();
            filterMessages("all").each(function(message) {
                var view = new MessageView({model: message});
                $("div.cameras").prepend(view.render().el);
            });

        });

    },

    setFilter : function(filterString) {
        this.filterString = filterString;
        this.collection.reset(this.collection);
    },

    filterMessages : function(filterString) {
        return this.collection.filter(function(model){

            if (filterString == "all")
            {
                return true;
            }
            else if (filterString == "active")
            {
                return model.get("ignore") == "0";
            }
            else if (filterString == "ignore")
            {
                return model.get("ignore") == "1";
            }
            else if (filterString == "flag")
            {
                return model.get("flag") == true;
            }

        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:32:49.690

您将希望在视图的上下文中调用它：

```
initialize : function() {

    var self = this;

    // code here

    this.collection.on("reset", function(models) {
        $("div.cameras").empty();
        self.filterMessages("all").each(function(message) {
            var view = new MessageView({model: message});
            $("div.cameras").prepend(view.render().el);
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T12:26:22.727

只需将“this”定义为内部函数外部的变量，因为在内部函数内部时它将采用不同的属性。

```
primaryFunction : function() {
    var self = this;

    innerFunction : function(filterString) {
        self.someOtherFunction();
    };
} 
```

# .net - .NET - 通过 WCF 传递带有属性的枚举

> ID：10128695
> 
> 赞同：1
> 
> 时间：2012-04-12T17:29:45.623
> 
> 标签：.net, wcf, serialization, attributes, enums

有谁知道是否可以通过 WCF 序列化和传递枚举及其相关属性？

例如：

```
public enum Dog
{
    [Description("German Shepard")]
    GERMAN_SHEPARD = 1,
    [Description("Labrador Retriever")]
    LABRADOR_RETRIEVER = 2
} 
```

然后，我想将此枚举的一个实例作为通过 WCF 公开的方法的返回值传递。当调用代码使用“添加服务引用”时，它应该能够重建描述属性。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:35:55.900

您应该设置要传输到共享程序集中的枚举和其他类型。然后，您可以使用该[`/r`标志`svcutil`来生成您的服务代理](http://blogs.msdn.com/b/youssefm/archive/2009/10/09/reusing-types-in-referenced-assemblies-with-svcutil-s-r-switch.aspx)，而不是使用“添加服务引用” 。

然后，您的客户端应用程序应改为从共享程序集中引用枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:39:30.707

您可能需要使用[DataContract 和 EnumMember](http://msdn.microsoft.com/en-us/library/aa347875.aspx)属性标记枚举，以便 WSDL 包含适当的值。

# javascript - 这段代码是如何工作的？

> ID：10128696
> 
> 赞同：1
> 
> 时间：2012-04-12T17:29:55.427
> 
> 标签：javascript, anonymous-function

几分钟前我正在查看一些代码，这让我感到困惑。

```
$("nav a").mouseenter(function() {
  audio.play();
}); 
```

我知道 '$' 是 jQuery for document.getElementById(""); mouseEnter 是“nav a”的事件处理程序，但函数是如何分配给事件的？它没有任何赋值运算符'='？

我现在对 jQuery 不太了解，因为我正试图完全降低 JavaScript。因此，当我将代码修改为纯 JavaScript 时，它似乎不起作用......

```
document.getElementById("playAudio").onclick(function () {
   audio.play();
}); 
```

我不明白为什么？我想这是相同的代码？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:42:12.000

mouseenter 是一个函数。如同：

```
var element = {elm: document.getElementById('test')};
element.mouseenter = function(func) {
    element['elm'].addEventListener('mouseenter', func);
};
element.mouseenter(function() {}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:32:10.313

您将一个函数对象（使用函数表达式创建）传递给`jQuery.mouseenter`，然后 jQuery 从那里获取它。

仅供参考，您在这里尝试了解的部分内容是文档对象模型 (DOM)。您正在尝试使代码成为纯 JavaScript + DOM API。学习 JS 和 DOM 的基础知识很好，但要注意 jQuery 消除了浏览器实现 DOM 中的许多不一致之处，例如注册事件侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:32:27.477

该函数被传递，并且该函数是匿名的（没有名称）。

你也可以这样做：

```
function foo() { audio.play(); }

$('nav a').mouseenter(foo); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:36:07.680

美元符号不仅限于`getElementById()`，它是 jQuery 对象，在您的情况下，它是调用`nav`元素然后`a`在`nav`. 抓取元素后，它会匿名附加事件，允许函数在事件触发时运行。

# javascript - 如何测试 DOM 中是否存在包含链接 href 的 HTML 链接元素 (a)？

> ID：10128697
> 
> 赞同：0
> 
> 时间：2012-04-12T17:29:56.990
> 
> 标签：javascript, jquery, html

在添加另一个链接之前，我正在尝试通过 HTML 文档中的 href 属性检查链接是否已经存在。

代码就像：

```
if (!$('a[href*="#businessInfoMenu"]')){
    //add new link   
} 
```

有没有人做过类似的东西？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:31:25.230

您可以检查`length`选择器以查看是否有任何匹配项：

```
if ($('a[href*="#businessInfoMenu"]').length == 0) {
    //add new link
} 
```

# formatting - 复制/粘贴到 Word 时如何保留 rstudio 的格式？

> ID：10128702
> 
> 赞同：37
> 
> 时间：2012-04-12T17:30:07.423
> 
> 标签：formatting, ms-word, rstudio

R、Rstudio 和 SO 的新手——对于任何失礼，我提前道歉。

我想在 Word 2010 中重现我的代码以完成家庭作业。脚本是用 rstudio 编写的，我想在粘贴到 Word 时保留 rstudio 的格式。原则上，我喜欢 rstudio 使用的字体颜色和间距。我发现当我从 SAS 粘贴到 Word 时，格式被保留，但这里没有骰子。

我通常会寻找复制特殊/粘贴特殊选项来执行此操作，但我找不到任何选项。当我尝试将特殊内容粘贴到 word 中时，只显示未格式化的文本选项。我宁愿不逐行重新格式化文本，因为我认为它在 rstudio 中看起来很不错。

我想尝试将 rstudio 中的脚本保存为可以保留其格式的某种格式，但我找不到任何方法来做到这一点。有谁知道我如何才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-13T18:56:48.357

目前尚不清楚您是从 RStudio 的脚本编辑器（有 4 或 5 种颜色）还是从 RStudio 中的 R 控制台（脚本 + 输出）（只有 2 种颜色）粘贴。

如果您是从控制台粘贴 - 请再次选中“Paste special”。应该有一个“HTML 格式”选项可以满足您的需要（尽管您可能需要调整字体大小以根据您的页边距使所有内容都适合）。

如果您是从脚本编辑器粘贴，那么直接复制粘贴解决方案就不走运了。但是有一个复制粘贴和复制粘贴的解决方案......

一种解决方案可能是使用[Notepad++](http://notepad-plus-plus.org/)。在 RStudio 中，保存您的脚本（带有“.R”扩展名），然后在 Notepad++ 中打开该脚本。（或从 RStudio 复制并粘贴到 Notepad++，但请确保将文件的语言——从“语言”菜单——设置为 R）。当您的脚本在 Notepad++ 中正确突出显示时，请转到“插件 > NppExport > 复制 HTML 到剪贴板”菜单以复制打开的文件。然后可以将其粘贴到 HTML 格式的 MS Word 中。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-06-15T14:29:16.187

以防万一其他人寻找这个问题......

使用 RStudio 将所有源代码保存在具有美观格式的 word 文档中的另一种方法是使用该`File/Compile Notebook`选项，选择 MS Word 作为输出格式。

使用此选项，`.docx`将生成一个包含脚本输出以及原始源代码的文档。不过，该脚本将被执行。

如果您不希望您的代码被评估（您只需要一个简单的复制粘贴），您可以`#+eval=FALSE`在脚本的开头添加，然后源代码将在 word 文档中复制而不被评估。

这种方法依赖于[knitr](http://yihui.name/knitr/options/)。如果有人想开始玩这个，这里有一个例子。

```
#' ---
#' title: "My homework"
#' author: John Doe
#' date: June 15, 2015
#' output: word_document
#' ---

# The header above sets some metadata used in the knitr output

# Conventional comments are formatted as regular comments

# Comments starting with "#+" control different knitr options.

#+echo=FALSE,message=FALSE,warning=FALSE
library(ggplot2)

#+echo=TRUE
#' Comments with a "+" sign are used to tell knitr what should be
#' done with the chunk of code:
#'
#'  - echo: Show the original code or not
#'  - eval: Run the original code or not
#'  - message: Print messages
#'  - warning: Print warnings
#'  - error: Print errors
#'  ...

#' Comments with an apostrophe "'" will be printed as regular text.
#' This is very useful to explain what you are actually doing!

# Regular comments can be used to document the code as usual
# Figures are printed:
ggplot(mpg, aes(x=cty, y=hwy)) + geom_point(aes(color=class))

#' Formatting **options** are possible.
#' Even [links](http://stackoverflow.com/questions/10128702/how-to-preserve-formatting-from-rstudio-when-copy-pasting-to-word)
#'

#' This will show all the packages and versions used to generate this document.
#' It can be used to make sure that your teacher has all he needs to run your script
#' if he/she wants to.
sessionInfo() 
```

![Word 文档示例](../Images/14a26f740152dbffe56a20ce5c12b32f.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-24T02:02:04.010

假设您可以访问互联网

1.  复制并粘贴到[gist.gisthub.com](https://gist.github.com/)
2.  选择“R”作为语言 - 这应该提供颜色
3.  点击创建（秘密或公开）要点
4.  从要点复制并粘贴到您的文字处理器。

与notepad++解决方案相比：

*   对您的代码进行在线备份，并记录您剪辑它的时间。
*   您无需安装任何其他软件，如果您是使用公共计算机的学生，这将非常有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-26T09:40:26.013

如果您只需要格式化的代码：

第 1 步：只需在代码开头添加 #+eval=FALSE 即可。

步骤2：然后转到文件-> 编织文档。在 msword/PDF/Html 中编译文件。

或者

只需在代码开头添加 #+eval=FALSE 即可。

按 CTRL+SHIFT+K，然后在 msword/PDF/Html 中编译文件。

如果您需要带有输出的代码，请不要在代码开头添加 #+eval=FALSE 并直接执行第 2 步。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-03T12:03:22.947

我同意 zeehio 的观点，即使用 Knitr 可能是最好的选择。但另一种方法是使用[Pretty R 工具和](http://www.inside-r.org/pretty-r)[此处](https://stackoverflow.com/questions/387453/how-do-you-display-code-snippets-in-ms-word-preserving-format-and-syntax-highlig)的“打开文档文本”步骤。基本上只需将您的代码复制并粘贴到漂亮的 R 中，然后将输出（不是 html）复制并粘贴到打开的文档中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T18:04:47.887

从 Rstudio 控制台窗口复制并粘贴到 Word 文档后，您需要突出显示所有刚刚复制的文本并将字体更改为 Courier New。这将为您提供与 Rstudio 控制台窗口中相同的间距和排列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-07T12:32:45.453

将代码从 Rstudio 编辑器复制粘贴到“visual studio code”，然后再次从那里复制到文字处理器中。为此，您必须首先在 Visual Studio 代码中安装 R 扩展。“Visual Studio 代码”本身就是一个 IDE，它也可能用于 R 语言，但现在我强调使用它来回答上述问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-21T17:48:28.917

在 RI 中使用 Monaco 编辑器字体。要在 Microsoft Word 中复制粘贴 R consol 的输出，我选择 consol 的输出，右键单击并复制并粘贴到我的 Word 文档中。将输出粘贴到 word 中后，我选择它并将其放入 Word 的 Monaco 字体中，并在必要时减小字体大小。

这很好地完成了这项工作，并且完美地保留了 R 控制台的输出样式以及编写的代码块。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-23T07:59:03.477

如果要在从 R 控制台处理选择时保留格式，则需要安装旧版本的 R Studio。版本 1.2.5042。它不适用于较新的版本

# gwt - GXT 注册表更新

> ID：10128706
> 
> 赞同：0
> 
> 时间：2012-04-12T17:30:14.833
> 
> 标签：gwt, gxt

我认为关于注册表我不太了解。

我有一个应用程序。有 3 个不同的选项卡。为了在标签 #3 上的网格中添加一行，您需要在标签 #1 和 #2 的网格中“选择”一行。当您在选项卡 #1 和 #2 中选择一行时，我保存该行的“ID”，在注册表中获取一个“sessionInfo”对象（只是一个包含一堆 java.Strings 的对象）。

如果我第一次转到选项卡#3（没有从#1 和#2 中选择网格行），我在尝试添加行时会出错（这是正确的，因为没有选择#1 和#2 上的任何内容）。然后我回到选项卡#1 和#2，从每个选项卡中选择一个网格行（更新注册表中的“sessionInfo”对象）。然后我回到＃3并尝试添加一行，但“sessionInfo”***似乎***没有更新？！？（即选定的字符串仍然是空的）

检查会话变量是在从 Add Button 的 SelectionListener.componentSelected() 方法调用的私有方法（在 onRender() 方法之外）中完成的。

〜r

PS：我怀疑这与 Registry 作为 Tab #3 类中的实例变量有关？！？

PPS：我还更新了一个 gxt.ui.client.widget.Status 小部件。当我得到它（也来自注册表）时，它***会***更新？！？！

PPPS：请不要将我指向标题为“Registry Pros and Cons”的主题。很高兴说不要使用注册表，然后除了“您的应用程序有问题”之外别无选择。（但是很清楚，不是很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:54:36.883

您仍然可以通过使用您自己的基于 hashMap 的类来创建某种注册表，以将您可能需要的通用数据存储在不同的地方。我不使用 Gxt，但使用 SmartGwt，你可以看看[这里](http://albuweb.blogspot.fr/2011/09/un-objet-session-session-object-to.html)也许它会有所帮助。

# iphone - 如何将启动图像更改为横向？

> ID：10128710
> 
> 赞同：3
> 
> 时间：2012-04-12T17:30:24.717
> 
> 标签：iphone, objective-c, xcode

如何将启动图像更改为横向？

当设备为横向模式时，我想设置不同的启动图像。

所以，我做了一个PNG文件（文件名：default-LandscapeLeft@2x~iphone.png）

并将其拖到支持文件夹中。

然后在设备横向模式下构建和运行。

但我只看到黑屏。我不知道原因。。

我怀疑是否需要修改 .plist 文件。

请高手帮忙....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:44:45.027

如果您使用的是 iPhone 或 iPod，并且您的应用同时支持纵向和横向模式，那么 iOS 始终以纵向模式启动它。启动后，如果设备处于横向模式，则 iOS 会告诉您的应用程序自动旋转到横向模式。这在[*iOS App Programming Guide: Launching in Landscape Mode 中*](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW9)有解释。

# iphone - iOS - 如何选择性地删除文档目录中超过一个月的文件

> ID：10128713
> 
> 赞同：6
> 
> 时间：2012-04-12T17:30:34.693
> 
> 标签：iphone, objective-c, ios, iphone-4

我正在将图像下载到我的应用程序中，几周后用户将不再关心。我将它们下载到应用程序中，因此不必每次启动都下载它们。问题是我不希望 Documents 文件夹随着时间的推移变得比它更大。所以我想我可以“清理”一个月以上的文件。

问题是，那里会有一些文件会超过一个月，但我不想删除。它们将是静态命名文件，因此它们很容易识别，并且只有 3 或 4 个。虽然我可能要删除几十个旧文件。所以这里有一个例子：

```
picture.jpg           <--Older than a month DELETE
picture2.jpg          <--NOT older than a month Do Not Delete
picture3.jpg          <--Older than a month DELETE
picture4.jpg          <--Older than a month DELETE
keepAtAllTimes.jpg    <--Do not delete no matter how old
keepAtAllTimes2.jpg   <--Do not delete no matter how old
keepAtAllTimes3.jpg   <--Do not delete no matter how old 
```

我怎样才能有选择地删除这些文件？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T19:07:26.233

删除超过两天的文件的代码。[原来我在这里](https://stackoverflow.com/questions/10072281/how-to-delete-files-from-iphones-document-directory-which-are-older-more-than-t/10072360#10072360)回答。我测试了它，它在我的项目中工作。

**PS 在删除 Document 目录中的所有文件之前要小心，因为这样做可能最终会丢失数据库文件（如果您正在使用..!!），这可能会给您的应用程序带来麻烦。这就是为什么我在那里保持条件。:-))**

```
// Code to delete images older than two days.
   #define kDOCSFOLDER [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]

NSFileManager* fileManager = [[[NSFileManager alloc] init] autorelease];
NSDirectoryEnumerator* en = [fileManager enumeratorAtPath:kDOCSFOLDER];    

NSString* file;
while (file = [en nextObject])
{
    NSLog(@"File To Delete : %@",file);
    NSError *error= nil;

    NSString *filepath=[NSString stringWithFormat:[kDOCSFOLDER stringByAppendingString:@"/%@"],file];

    NSDate   *creationDate =[[fileManager attributesOfItemAtPath:filepath error:nil] fileCreationDate];
    NSDate *d =[[NSDate date] dateByAddingTimeInterval:-1*24*60*60];

    NSDateFormatter *df=[[NSDateFormatter alloc]init];// = [NSDateFormatter initWithDateFormat:@"yyyy-MM-dd"];
    [df setDateFormat:@"EEEE d"]; 

    NSString *createdDate = [df stringFromDate:creationDate];

     NSString *twoDaysOld = [df stringFromDate:d];

    NSLog(@"create Date----->%@, two days before date ----> %@", createdDate, twoDaysOld);

    // if ([[dictAtt valueForKey:NSFileCreationDate] compare:d] == NSOrderedAscending)
    if ([creationDate compare:d] == NSOrderedAscending)

    {
        if([file isEqualToString:@"RDRProject.sqlite"])
        {

            NSLog(@"Imp Do not delete");
        }

        else
        {
             [[NSFileManager defaultManager] removeItemAtPath:[kDOCSFOLDER stringByAppendingPathComponent:file] error:&error];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T17:32:29.053

您可以获取文件创建日期，查看此[SO Post](https://stackoverflow.com/questions/2108953/iphone-how-do-you-find-the-creation-date-of-a-file)，然后比较日期。并为需要删除的文件和不删除的文件创建两个不同的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-05T17:06:59.057

我的两分钱值。更改符合要求以适应。

```
func cleanUp() {
    let maximumDays = 10.0
    let minimumDate = Date().addingTimeInterval(-maximumDays*24*60*60)
    func meetsRequirement(date: Date) -> Bool { return date < minimumDate }

    func meetsRequirement(name: String) -> Bool { return name.hasPrefix(applicationName) && name.hasSuffix("log") }

    do {
        let manager = FileManager.default
        let documentDirUrl = try manager.url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: false)
        if manager.changeCurrentDirectoryPath(documentDirUrl.path) {
            for file in try manager.contentsOfDirectory(atPath: ".") {
                let creationDate = try manager.attributesOfItem(atPath: file)[FileAttributeKey.creationDate] as! Date
                if meetsRequirement(name: file) && meetsRequirement(date: creationDate) {
                    try manager.removeItem(atPath: file)
                }
            }
        }
    }
    catch {
        print("Cannot cleanup the old files: \(error)")
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:59:54.167

要查找文件的创建日期，您可以参考一篇非常有用的 StackOverflow 帖子：

[iOS：如何找到文件的创建日期？](https://stackoverflow.com/questions/2108953/iphone-how-do-you-find-the-creation-date-of-a-file)

请参阅此帖子，这可能会帮助您删除它们。您可以大致了解从 Documents Directory 中删除这些数据需要做什么：

[如何从 iPhone 的文档目录中删除超过两天的文件](https://stackoverflow.com/questions/10072281/how-to-delete-files-from-iphones-document-directory-which-are-older-more-than-t)

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-10T19:02:25.143

这是一个不对日期使用字符串比较并在枚举器中预取修改时间的函数：

```
+ (NSArray<NSURL *> *)deleteFilesOlderThan:(NSDate *)earliestDateAllowed
                               inDirectory:(NSURL *)directory {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSDirectoryEnumerator<NSURL *> *enumerator =
        [fileManager enumeratorAtURL:directory
            includingPropertiesForKeys:@[ NSURLContentModificationDateKey ]
                               options:0
                          errorHandler:^BOOL(NSURL *_Nonnull url, NSError *_Nonnull error) {
                              NSLog(@"Failed while enumerating directory '%@' for files to "
                                         @"delete: %@ (failed on file '%@')",
                                         directory.path, error.localizedDescription, url.path);
                              return YES;
                          }];

    NSURL *file;
    NSError *error;
    NSMutableArray<NSURL *> *filesDeleted = [NSMutableArray new];
    while (file = [enumerator nextObject]) {
        NSDate *mtime;
        if (![file getResourceValue:&mtime forKey:NSURLContentModificationDateKey error:&error]) {
            NSLog(@"Couldn't fetch mtime for file '%@': %@", file.path, error);
            continue;
        }

        if ([earliestDateAllowed earlierDate:mtime] == earliestDateAllowed) {
            continue;
        }

        if (![fileManager removeItemAtURL:file error:&error]) {
            NSLog(@"Couldn't delete file '%@': %@", file.path, error.localizedDescription);
            continue;
        }
        [filesDeleted addObject:file];
    }
    return filesDeleted;
} 
```

如果您不关心被删除的文件，您可以让它返回`BOOL`以指示是否有任何错误，或者只是`void`想尽最大努力尝试。

要有选择地保留一些文件，请向应该匹配要保留的文件的函数添加一个正则表达式参数，并在 while 循环中添加一个检查（似乎最适合您的用例），或者如果有一个离散量具有不同模式的文件，您可以接受`NSSet`带有要保留的文件名的文件，并在继续删除之前检查是否包含在集合中。

这里也只是提到这一点，因为它可能与某些人相关：iOS 和 OSX 上的文件系统不会以超过一秒的精度存储 mtime，因此如果您需要毫秒精度或类似精度，请注意这一点。

如果您愿意，可以将相应的测试用例放入您的测试套件中：

```
@interface MCLDirectoryUtilsTest : XCTestCase

@property NSURL *directory;

@end

@implementation MCLDirectoryUtilsTest

- (void)setUp {
    NSURL *tempdir = [NSURL fileURLWithPath:NSTemporaryDirectory() isDirectory:YES];
    self.directory = [tempdir URLByAppendingPathComponent:[NSUUID UUID].UUIDString isDirectory:YES];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager createDirectoryAtURL:self.directory
          withIntermediateDirectories:YES
                           attributes:nil
                                error:nil];
}

- (void)tearDown {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager removeItemAtURL:self.directory error:nil];
}

- (void)testDeleteFilesOlderThan {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    // Create one old and one new file
    [fileManager createFileAtPath:[self.directory URLByAppendingPathComponent:@"oldfile"].path
                         contents:[NSData new]
                       attributes:@{
                           NSFileModificationDate : [[NSDate new] dateByAddingTimeInterval:-120],
                       }];
    [fileManager createFileAtPath:[self.directory URLByAppendingPathComponent:@"newfile"].path
                         contents:[NSData new]
                       attributes:nil];

    NSArray<NSURL *> *filesDeleted =
        [MCLUtils deleteFilesOlderThan:[[NSDate new] dateByAddingTimeInterval:-60]
                           inDirectory:self.directory];
    XCTAssertEqual(filesDeleted.count, 1);
    XCTAssertEqualObjects(filesDeleted[0].lastPathComponent, @"oldfile");
    NSArray<NSString *> *contentsInDirectory =
        [fileManager contentsOfDirectoryAtPath:self.directory.path error:nil];
    XCTAssertEqual(contentsInDirectory.count, 1);
    XCTAssertEqualObjects(contentsInDirectory[0], @"newfile");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-28T06:03:02.703

在 Swift 3 和 4 中，删除 DocumentsDirectory 中的特定文件

```
do{
    try FileManager.default.removeItem(atPath: theFile)
} catch let theError as Error{
    print("file not found \(theError)")
} 
```

# php - 好友列表数据库的简单设计

> ID：10128715
> 
> 赞同：1
> 
> 时间：2012-04-12T17:30:45.230
> 
> 标签：php, mysql

我在制作友谊系统数据库时遇到了一个小问题。现在我有一张叫朋友的桌子让我们说：

表友：

```
 you      friend      approve     since
_________________________________________________
   wetube    youtube     1           4-12-2012
   facebook  wetube      1           4-12-2012 
```

我有这个查询代码来获取名为 wetube 的用户的朋友。

```
mysql_query("SELECT f.* FROM friends f inner join users u on u.username =
f.you WHERE f.friend = 'wetube' UNION ALL SELECT f.* FROM friends f inner join users u on
u.username = f.friend WHERE f.you = 'wetube'"); 
```

现在我真正想要的是如何获取 wetube 的朋友并在他的页面上显示给他。

固定的：

最后我解决了这个问题。所以这是表格：

```
CREATE TABLE IF NOT EXISTS `friends` (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `you` varchar(255) NOT NULL,
  `friend` varchar(255) NOT NULL,
  `type` varchar(255) NOT NULL,
  `since` date NOT NULL,
  `message` text NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ; 
```

这是获取用户朋友的 php 代码

```
<?php
$username = $_SESSION['username'];
$friends_sql = mysql_query("SELECT * FROM friends WHERE (friend = '$username' OR you = '$username') ");
while($friends_row = mysql_fetch_assoc($friends_sql)){
if ($username == $friends_row['you']) {
echo $friends_row['friend']."<br/>";
} elseif($username == $friends_row['friend']) {
echo $friends_row['you']."<br/>";
}
}
?> 
```

自己试试吧 100% 有效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:37:29.073

```
$result = mysql_query("SELECT * FROM friends WHERE friend='wetube'");
$row = mysql_fetch_array($result);

echo $row['friend'], ' - ', $row['since']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:49:30.357

不是对您的问题的直接回答，但一个完全规范化的数据库将为该系统提供两个表。

由于这是一个多对多的关系，我会做这样的事情：

```
UsersTable
------------------
id: int, serial
name: varchar
email: varchar
... 
```

和

```
RelationshipTable
------------------
id: int, serial
user1_id: int, foreign key on UsersTable.id
user2_id: int, foreign key on UsersTable.id
approved: boolean
since: date 
```

使用正确设计和规范化的数据库，管理和创建查询将*更加*容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:44:51.793

wetube的所有朋友都是：

```
SELECT * FROM friends WHERE (friend = 'wetube' OR you = 'wetube') AND approve = 1 
```

我建议删除批准列，而是保留一个请求表。这意味着所有已批准的请求都在friends 表中，所有待处理的批准都在friend_request（或其他）表中。

这两个表设计更有效，因为当您想向朋友展示时（这可能很常见），您不必总是检查批准 = 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T17:47:39.927

也许不完全理解这一点。

从好友 f 中选择 * 其中 f.you = 'wetube' 或 f.friend = 'wetube'

猜猜你也在寻找用户信息，内部连接的原因。

也许删除批准列，并有 2 条记录。第二条记录是朋友批准成为朋友的时候。然后你可以很容易地看到你和谁是朋友，而他们反过来也是朋友。

```
wetube --> youtube
facebook --> youtube
youtube --> wetube  wetube would approve a friendship request for youtube, adding a record
wetube --> facebook 
```

然后你可以很容易地问谁是 wetube 的朋友。只是一个想法，可能不是您正在寻找的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T17:38:45.310

你的意思是只有在 [friend] 列中有 wetube 的行？您可能只是过度思考连接：

```
SELECT * FROM [friends] WHERE [friend] = 'wetube' 
```

如果您想要 wetube 在任一列中的位置：

```
SELECT * FROM [friends] WHERE [friend] = 'wetube' OR [you] = 'wetube' 
```

或者：

```
SELECT * FROM [friends] WHERE [friend] = 'wetube'
UNION ALL
SELECT * FROM [friends] WHERE [you] = 'wetube' 
```

# nhibernate - Fluent nHibernate 映射与三元映射表

> ID：10128716
> 
> 赞同：0
> 
> 时间：2012-04-12T17:30:48.377
> 
> 标签：nhibernate, fluent-nhibernate-mapping, ternary

拥有一个具有如下映射表结构的遗留数据库。我试图弄清楚如何流畅地映射这种关系。

有多个父表使用映射表来存储注释。

父表如下所示：
**P1 表**
ID iSomething

**P2 表**
ID iSomethingElse

有一个映射表，它将获取一个父表并将其映射到一个注释表。
**映射表**
ID i_RecordUniqueID
ID i_NoteID
ID i_RecordID

i_RecordID 列包含一个数值，指示 i_RecordUniqueID 值来自哪个父表。映射表只有这三列，是一个三元主键。

这是笔记表：
**笔记表**
ID i_NoteID

查找表 P1 注释的查询如下：

```
Select n.*
from P1 p
inner join Mapping m on p.iSomething = m.i_RecordUniqueID and m.i_RecordID = 1
inner join Note n on m.i_NoteID = n.i_NoteID 
```

查找表 P2 的注释的查询如下：

```
Select n.*
from P2 p
inner join Mapping m on p.iSomething = m.i_RecordUniqueID and m.i_RecordID = 2
inner join Note n on m.i_NoteID = n.i_NoteID 
```

在我的父表映射文件中，我有一个如下所示的关联。我不知道如何添加 i_RecordID 约束。

```
HasManyToMany<Note>(x => x.Notes)
  .Table("Mapping")
  .ParentKeyColumn("i_RecordUniqueID")
  .ChildKeyColumn("i_NoteID")
  .Cascade.All(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:54:13.187

FluentNHibernatew 还不支持 ManyToAny 映射。您可以将其映射为只读访问

```
// P1Map()
HasManyToMany(x => x.Notes)
  .Table("Mapping")
  .ParentKeyColumn("i_RecordUniqueID")
  .Where("i_RecordID == 1")
  .ChildKeyColumn("i_NoteID")
  .Cascade.All();

// P2Map()
HasManyToMany(x => x.Notes)
  .Table("Mapping")
  .ParentKeyColumn("i_RecordUniqueID")
  .Where("i_RecordID == 2")
  .ChildKeyColumn("i_NoteID")
  .Cascade.All(); 
```

或者你必须创建一个组件

```
ICollection<TableToNote> Notes;

public TableToNoteMap()
{
    ReferencesAny(x => x.Parent).IdentityColumn("i_RecordUniqueID").MetaTypeColumn("i_RecordID")...;

    References(x => x.Note);
} 
```

# mongodb - 是否可以为 mongodump 指定目录/文件夹？

> ID：10128719
> 
> 赞同：24
> 
> 时间：2012-04-12T17:30:52.770
> 
> 标签：mongodb, mongodump

我想通过 mongodump 命令上的开关指定[mongodump](http://www.mongodb.org/display/DOCS/Import+Export+Tools)转储到的目录。这可能吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-12T17:43:59.643

你不需要脚本。从[文档](http://docs.mongodb.org/manual/reference/program/mongodump/#bin.mongodump)：

> ## `--out <path>, -o <path>`
> 
> 指定 mongodump 将为转储数据库写入 BSON 文件的目录。

例子：

```
mongodump -o /mydir/ 
```

那里有很多其他选择，请查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-18T14:43:55.977

您可以通过在命令提示符中键入“mongodump --help”来查看 mongodump 的所有命令（注意。您必须位于包含 mongodump.exe 的文件夹中）。

您可以使用如下命令：

```
mongodump /host <hostIP> /port <port> /d <database> /c <collection> /o <outputDirectoryPath> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-04T07:50:46.203

它以 gzip 格式将 my_db 转储到可恢复的 tmp/my_db.dump 文件中

`mongodump --db my_db --gzip -o ./tmp/my_db.dump`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-21T15:21:49.340

当我使用 Windows 时，我总是使用下面的命令，因为它导出到带有导出日期的文件夹中：

```
setlocal enableextensions
set FOLDER_NAME=%DATE:/=_%
mongodump --uri "mongodb+srv://USER:PASSWORD@URL/DATABASE_NAME" -o C:\work\scheduled\dump\backup-%FOLDER_NAME% 
```

将命令保存在具有 bat 扩展名的文件中（例如，dump.bat）

# android - WHERE 子句中的 OR 操作

> ID：10128725
> 
> 赞同：0
> 
> 时间：2012-04-12T17:31:18.200
> 
> 标签：android

现在我的代码如下所示：

```
Cursor cursor = getContentResolver().query(messagesUri, null,"address=?", smsNo, null); 
```

其中`smsNo`是单例数组。

我想向这个数组添加元素并在 WHERE 子句中实现 OR 操作。这可以继续使用数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:35:18.537

我不太确定你在问什么，但你当然可以在这里继续使用数组。如果您询问如何扩展现有数组以包含更多项目，您可以使用 Arrays.copyOf(oldArray, newSize) 在其中腾出更多空间。然后你可以使用多个？查询字符串中的占位符以引用新项目。

例如：

```
 queryParameters = Arrays.copyOf(smsNo, 2);
 queryParameters[1] = "another number"

 Cursor cursor = getContentResolver().query(messagesUri, null,"address=? or address=?", queryParameters, null); 
```

# java - 如何在不使用图形类的情况下在 Java 中绘制单个像素？

> ID：10128730
> 
> 赞同：-1
> 
> 时间：2012-04-12T17:31:30.433
> 
> 标签：java, user-interface

我不想使用图形/绘图库。我能想到的唯一解决方案是创建数千个 1x1 jButton（这显然是不切实际的）。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:56:19.730

“不使用图形函数”绘制的唯一方法是使用适合实际图像的颜色映射的字节值填充原始 Raster。然后，您可以使用图形基元将生成的图像渲染到窗口中。

看看 BufferedImage，然后从那里返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:35:28.367

您可以通过扩展例如 JPanel 并覆盖 paintComponent 方法来创建自己的组件来做到这一点。

为什么不想使用Java提供的图形功能呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:55:01.973

您希望如何在不使用图形库的情况下将图片显示到屏幕上？您是否要编写本机方法来在计算机屏幕上显示像素？

# shell - 合并列 cut & cat

> ID：10128738
> 
> 赞同：1
> 
> 时间：2012-04-12T17:31:47.343
> 
> 标签：shell

我有 file.txt 3 列。

```
1 A B
2 C D
3 E F 
```

我想添加#1 作为#2 的结尾。结果应如下所示：

```
1A
2C
3E
1B
2D
3F 
```

我这样做是通过

```
cut -f 1,2 > tmp1
cut -f 1,3 > tmp2
cat *tmp * > final_file 
```

但我得到重复的线路！如果我检查最终输出：

`cat * | sort | uniq -d`

有很多重复的行，主文件中没有。

任何人都可以建议这样做的其他方式吗？我相信我尝试使用的那个太复杂了，这就是为什么我得到如此奇怪的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:55:40.977

```
pzanoni@vicky:/tmp$ cat file.txt 
1 A B
2 C D
3 E F
pzanoni@vicky:/tmp$ cut -d' ' -f1,2 file.txt > result
pzanoni@vicky:/tmp$ cut -d' ' -f1,3 file.txt >> result
pzanoni@vicky:/tmp$ cat result 
1 A
2 C
3 E
1 B
2 D
3 F 
```

我正在使用 bash

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:47:02.483

`cat file.txt | awk '{print $1 $2 "\n" $1 $3};'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:51:53.327

通过文件保存顺序

```
awk '
    {print $1 $2; pass2 = pass2 sep $1 $3; sep = "\n"} 
    END {print pass2}
' file.txt 
```

这个 ( `cat tmp* * > final_file`) 错误的原因：

*   我认为`*tmp`是一个错字
*   我假设此时该目录仅包含“tmp1”和“tmp2”

看看这些通配符将如何扩展：

*   `tmp*`扩展为“tmp1”和“tmp2”
*   `*`也扩展到“tmp1”和“tmp2”

所以你的命令行变成`cat tmp1 tmp2 tmp1 tmp2 > final_file`了，因此你得到了所有重复的行。

# sql - 使用 Windows 登录登录到 sql server 2008 和/或报告服务

> ID：10128739
> 
> 赞同：-1
> 
> 时间：2012-04-12T17:31:54.237
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services

我有混合模式身份验证的 sql server 2008 设置。我进入 sql server 并添加了一个新的登录名并引用了一个活动目录用户。

但似乎所有基于 Windows 身份验证的东西只适用于用于登录操作系统的任何东西。所以我在我的机器上在他们的域之外，我无法连接。但是即使我使用单独的远程桌面登录远程桌面进入服务器本身，即使在那台机器上，我也无法使用活动目录用户登录，因为在登录框中，如果我选择窗口身份验证，我无法指定一个不同的名称，并且 sql server auth 说无效登录。登录 sql server 时，我看不到如何提供 windows 用户名和密码。

还有，我的 .net 应用程序呢？我不想将 sql server auth 用户名/密码硬编码到我的加密连接字符串中，我想将 Windows 活动目录用户名/密码硬编码到连接字符串中。

然后是报告服务，aarrghhh.. 报告服务是否仅适用于 Windows 登录？如果是这样，那么我坚持让上述工作。如果没有，我如何配置一个 sql server 登录来让我访问我们所有的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:18:15.430

这是一个非常广泛的问题；我将对您解决的一些不同主题进行调查。我在一家托管服务提供商工作，我们有许多域之间没有信任，所以我每天都在处理这个问题。

是的，SQL Server Windows 身份验证确实希望使用运行客户端应用程序的凭据。您可以使用[RunAs /netonly 开关解决此问题：](http://codebetter.com/jameskovacs/2009/10/12/tip-how-to-run-programs-as-a-domain-user-from-a-non-domain-computer/)

> runas /netonly /user:domain\username “C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe”</p>

.NET 应用程序的身份验证是一个大话题。很多选项和章节，如果不是关于这方面的书籍。

关于 Reporting Services：大部分访问是通过浏览器进行的。因此，这将使用您提供给浏览器的任何凭据。在 IE 中，这是通过安全区域和设置来控制的，即是否应使用当前凭据或是否应提示您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:41:56.983

一些线索：

*   如果您是外部用户并且 SQL Server 处于混合模式，那么您将更容易让 SQL 登录未映射到 AD 用户（因此您使用 SQL 身份验证而不是 Windows 身份验证）。您可能有两个 SQL 登录 - 一个用于 Windows 身份验证，第二个用于 SQL 身份验证。
*   如果您的 .NET 应用程序没有硬编码密码，请在 ConnectionString 中使用 Windows 身份验证和可信连接模式。如果您的 .NET 应用程序是服务，请创建专用 AD 用户，然后创建映射到此 AD 用户的 SQL 登录。为您的 SQL 用户提供映射到 SQL 登录权限的任何需要。在专用 AD 用户的上下文中运行服务。如果应用程序由用户直接执行（.EXE 文件）也使用受信任的连接。为您的应用用户创建 AD 安全组。创建映射到此 AD 组的 SQL“组”登录。为您的 SQL“组”用户提供映射到 SQL 登录权限的任何需要。
*   无法在 ConnectionString 中使用 Windows 身份验证为 SQL 登录提供登录名和密码。您使用 TrustedConnection 进行 Windows 身份验证，使用登录名/密码进行 SQL 身份验证。
*   您可以在 SQL 会话中使用切换上下文 - `EXECUTE AS`，请参阅：http: [//msdn.microsoft.com/en-us/library/ms181362.aspx](http://msdn.microsoft.com/en-us/library/ms181362.aspx)

# symfony - Symfony2 警告：file_put_contents()：此流不支持独占锁

> ID：10128741
> 
> 赞同：4
> 
> 时间：2012-04-12T17:31:55.213
> 
> 标签：symfony

我的 symfony2 应用程序在我的笔记本电脑上运行良好，这是我的开发机器。但是当我将它上传到托管服务提供商时，我得到了错误说明

```
Warning: file_put_contents(): Exclusive locks are not supported for this stream in /somepath/vendor/doctrine/lib/Doctrine/ORM/Proxy/ProxyFactory.php line 155 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-03-02T09:48:15.427

在你的流浪者身上试试这个：

```
config.vm.synced_folder ".", "/vagrant", id: "v-root", mount_options: ["rw", "tcp", "nolock", "noacl", "async"], type: "nfs", nfs_udp: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-05T12:36:39.783

问题出在 NFS 选项中。默认情况下，NFS 使用 NLM 锁定。为了禁用它，您需要编辑`/etc/fstab`文件并`nolock`在 NFS 设置中添加选项

例子：

```
server:/path           /mountpath    nfs     nolock,nfsvers=2   0 0 
```

# awk - awk：在 END 块中捕获“退出”

> ID：10128743
> 
> 赞同：6
> 
> 时间：2012-04-12T17:31:59.113
> 
> 标签：awk

我`awk`用于在输出文件中格式化输入文件。我有几种模式来填充变量（例如示例中的“某些模式”）。这些变量以块中所需的格式打印`END`。输出必须在那里完成，因为不能保证输入文件中出现的顺序，但输出文件中的顺序必须始终相同。

```
BEGIN {
    FS = "=|,"
}

/some pattern/ {
    if ($1 == 8) {
        var = $1
    } else {
        # Incorrect field value
        exit 1
    }
}

END {
    # Output the variables
    print var
} 
```

所以我的问题是`exit`模式中的陈述。如果有一些错误并且调用了这个命令，那么根本不应该有输出或者最多是一个错误消息。但正如 gawk 手册（[此处](http://www.gnu.org/software/gawk/manual/html_node/Exit-Statement.html)）所说，如果`exit`在模式块中调用命令，则`END`至少会执行该块。有什么办法可以捕捉到`exit`类似的东西：

```
if (!exit_invoked) {
    print var
} 
```

或其他方式避免在`END`块中打印输出？

斯特凡

**编辑：**使用了 shellter 的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T17:47:02.183

您必须通过在行`exit_invoked`前设置来明确处理它`exit`，即

```
BEGIN {
    FS = "=|,"
}

/some pattern/ {
    if ($1 == 8) {
        var = $1
    } else {
        # Incorrect field value
        exit_invoked=1
        exit 1
    }
}

END {
    if (! exit_invoked  ) {
        # Output the variables
        print var
    }
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T12:19:39.813

```
END {
      # If here from a main block exit error, it is unlikely to be at EOF
      if (getline) exit 
      # If the input can still be read, exit with the previously set status rather than run the rest of the END block.

      ...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-27T12:36:12.353

作为短语法的粉丝并试图避免徒劳`{}`的 s 或稍后将它们添加到预先存在的程序中，而不是：

```
...
    else {
        exit_invoked=1
        exit 1
    }
...
END {
    if (! exit_invoked  ) {
        print var
    }
} 
```

我用：

```
 else 
        exit (e=1)            # the point
...
END {
    if(!e)
        print v
} 
```

# javascript - Meteor JS，在调试器中运行？

> ID：10128744
> 
> 赞同：5
> 
> 时间：2012-04-12T17:32:07.710
> 
> 标签：javascript, meteor

我很好奇是否有人有在调试器中运行流星的解决方案。我有一些在调试器中运行常规节点的经验，为此使用了 JetBrains Webstorm，但它似乎不支持流星（据我所知）。如果有人有解决方案，将不胜感激任何信息。看来，最终这需要可能让流星成为一个长期可行的平台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T06:25:56.457

看起来流星启动脚本此时不支持调试选项，但您可以自己解决这个问题：

在文本编辑器中打开流星启动脚本（用于 `which meteor`查找）

更改最后一行（添加 $NODE_DEBUG 参数）：

`exec "$DEV_BUNDLE/bin/node" $NODE_DEBUG "$METEOR" "$@"`

现在您可以像这样在调试模式下启动流星：

`NODE_DEBUG=--debug meteor`

# php - Codeigniter - 集成 tank_auth - 加载库的问题

> ID：10128752
> 
> 赞同：-1
> 
> 时间：2012-04-12T17:32:25.253
> 
> 标签：php, codeigniter, tankauth

这是一个很小的问题，但它困扰着我 - 我正在尝试将 tank auth 与我的 codeigniter 站点集成，因此我将 tank auth 控制器的一部分移动到我的主页控制器中。

我通常将整个控制器中使用的所有库/模型等加载为构造函数中的数组，例如

```
function __construct(){
    parent::__construct();
    $this->load->helper(array('form', 'url'));
    $this->load->library('form_validation', 'security', 'tank_auth');
    $this->lang->load('tank_auth');
} 
```

这是由于某种原因产生了一个空白站点（在此输出内容下方当然有一个索引控制器）

但是以下代码可以正常工作：

```
function __construct(){
    parent::__construct();
    $this->load->helper(array('form', 'url'));
    $this->load->library('form_validation');
    $this->load->library('security');
    $this->load->library('tank_auth');
    $this->lang->load('tank_auth');
} 
```

这不是我知道的主要问题，但我会很感激任何关于为什么这不起作用的想法 - 他们肯定在做同样的事情 - 我猜作为数组加载正在同时加载 tank auth 库和安全库，并且错误的是先加载 - 作为数组加载时有没有办法强制加载顺序？

非常感谢任何输入/想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:41:08.243

如果你想用来`load()`加载多个库，你必须传入一个数组。[参考](http://codeigniter.com/user_guide/general/libraries.html)。

```
$this->load->library(array('form_validation', 'security', 'tank_auth')); 
```

# matlab - 如何在 Matlab 中绘制偏转的二维光束？

> ID：10128757
> 
> 赞同：0
> 
> 时间：2012-04-12T17:32:30.823
> 
> 标签：matlab

考虑一个长度为 1 且宽度可变的二维光束，使得 h(x) 是光束在点 x 处的宽度（x 在 0 和 1 之间）。我们可以将其可视化地表示为 XY 平面中的一组点，由 0<=x<=1 和 -h(x)<=y<=h(x) 给出。我们可以很容易地在 Matlab 中绘制这个光束。

现在考虑相同的光束被偏转，并让 y=u(x) 是横断面中光束几何中心的方程（在之前的情况下，我们有 u(x) = 0）。问题是如何在 Matlab 中绘制这种偏转光束？

# java - HTMLEditorKit insertHTML 将换行标记添加到字符串

> ID：10128760
> 
> 赞同：3
> 
> 时间：2012-04-12T17:32:38.037
> 
> 标签：java, newline, htmleditorkit

```
HTMLEditorKit.insertHTML(doc, doc.getLength(), "Test", 0, 0, null); 
```

结果：

```
"Test
" 
```

-添加了'\n'

```
HTMLEditorKit.insertHTML(doc, doc.getLength(), "Test", 0, 0, HTML.Tag.B); 
```

结果：

```
"Test</b>" 
```

如何制作最后没有添加的文本？

我使用 JTextPane。使用 hTMLEditorKit.insertHTML 方法打包名为“append(string)”的方法以附加文本。

但是当我附加一些像“123”这样的字符串时；“456”；“789”；

我从来没有附加像“
”这样的字符串

该组件无法显示我想要的：

```
123456789 
```

它将像在 JTextPane 中一样显示文本：

```
123
456
789 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:17:38.877

首先，考虑到您在三个月前问过这个问题，我不知道您是否已经解决了您的问题，呵呵。但我也有这个问题，我想我会发布我是如何解决它的。

这可能是一个丑陋的解决方案，但我就是这样做的：

```
HTMLEditorKit.insertHTML(doc, doc.getLength(), "<span>Test</span>", 0, 0, HTML.Tag.SPAN); 
```

同样，以下连续的 insertHTML 调用将以您想要的方式打印数字：

```
HTMLEditorKit.insertHTML(doc, doc.getLength(), "<span>123</span>", 0, 0, HTML.Tag.SPAN);
HTMLEditorKit.insertHTML(doc, doc.getLength(), "<span>456</span>", 0, 0, HTML.Tag.SPAN);
HTMLEditorKit.insertHTML(doc, doc.getLength(), "<span>789</span>", 0, 0, HTML.Tag.SPAN); 
```

我不确定为什么仅在字符串中包含 span 标签是不够的，但您还必须通过函数调用传递 HTML.Tag.SPAN（这是我花了很长时间才弄清楚的原因）。*如果没有*指定 Tag 对象，它可能会覆盖添加换行符的默认行为。

这种方法的唯一问题是你得到所有这些跨度标签混乱的 html 文档，至少对我来说，这是不受欢迎的。

如果有任何其他（更优雅）的方式来操作 HTMLEditorKit 以不自动添加换行符，我很想知道它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T20:36:46.503

我认为这个问题有一个简单的解决方案，使用：

```
doc.insertString(doc.getLength(), "Test", null); 
```

当你想添加纯文本和 HTMLEditorKit.insertHTML 时 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:16:20.950

我发现 ：

您只需要将“”替换为 unicode 即可。您可以使用 documentFilter 或截取空格 keyStroke ：

```
protected class Filtre extends DocumentFilter implements Serializable {

    public Filtre() {
    }

    @Override
    public void insertString(DocumentFilter.FilterBypass fb, int offset, String str, AttributeSet attr) throws BadLocationException {
        replace(fb, offset, 0, str, attr);
    }

    @Override
    public void replace(DocumentFilter.FilterBypass fb, int offset, int length, String str, AttributeSet attrs) throws BadLocationException {
        String result = str.replaceAll(" ", "\u00A0");
        fb.replace(offset, length, result, attrs);
    } 
```

# extjs - Ext.get 和更新在 IE 中不起作用

> ID：10128766
> 
> 赞同：0
> 
> 时间：2012-04-12T17:33:09.903
> 
> 标签：extjs

我无法让 Ext.get 在 IE 中工作。在 FF、Chrome 甚至 Safari 中运行良好。

我的 HTML 如下所示：

```
<select id="products" onchange="getReleases()">
    <option value="select">Select</option>
</select> 
```

分机调用是这样的：

```
...
success: function(response) {

    alert("response.responseText: " + response.responseText);
    Ext.get("products").update(response.responseText);          
} 
```

我在警报功能中看到了结果。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:08:40.213

这似乎不是 Ext 的实际问题，而是 IE 的问题。您可以通过查看`Ext.get("products")`变量的结果来看到这一点。

```
var result = Ext.get("products");
console.log(typeof result !== "undefined"); 
```

我们可以从日志语句中看到它的结果不是未定义的（另外，如果它是未定义的，它将无法执行`update()`）。

这一切都假设 response.responseText 是`'<option value="select">Select1</option>'`我认为的形式，因为你让它在除 IE 之外的所有浏览器中正常工作。

看起来这是 IE 的 select 元素的 innerHTML 属性的已知问题。以下提供了解决方法的解释和链接：

[Javascript - innerHTML 不适用于 HTML 选择菜单](https://stackoverflow.com/questions/2738254/javascript-innerhtml-not-working-with-html-select-menus)

这是 MS 错误的链接：http: [//support.microsoft.com/kb/276228](http://support.microsoft.com/kb/276228)

# testing - 如何测试 Meteor 应用程序？

> ID：10128768
> 
> 赞同：41
> 
> 时间：2012-04-12T17:33:12.863
> 
> 标签：测试使用流星, testing, meteor, tdd

[测试使用流星](/questions/tagged/meteor "显示标记为“流星”的问题")框架开发的 Web 应用程序的推荐方法是什么？

关于 TDD 最佳实践的[流星非官方常见问题解答](https://github.com/oortcloud/unofficial-meteor-faq#what-are-the-best-practices-for-test-driven-development)条目非常简短。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T14:49:55.180

Sebastian Maier 有一个存储库，他在其中创建了一个流星应用程序并使用 Jasmine 对其进行测试。你可以看看，[这里有链接](https://github.com/sebastianmaier/meteor-jasmine)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T23:48:57.413

Meteor 文档在测试主题上是可悲的和/或故意保持沉默，除了这个引用：

> 我们非常小心地为核心 Meteor 包提供了最小的依赖集，因此您可以使用您最喜欢的模板、测试或 DOM 操作框架。

所以我想你可以随意测试，这应该是一个特性。

有许多很好的测试工具可以应用于 Meteor webapp，[Mocha](http://visionmedia.github.com/mocha/)就是一个例子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-23T07:30:02.030

在[2014 年 10 月 13 日发布的 v0.9.4 中](https://www.meteor.com/blog/2014/10/13/meteor-094-mobile-and-testing)，Meteor 有一个官方测试框架，[meteor-velocity](https://github.com/meteor-velocity/velocity)。它支持 Jasmine、Mocha 和 Selenium。

```
meteor run --test 
```

Velocity 背后的架构师出版了一本书，[Meteor Testing](http://www.meteortesting.com/)。

另见[http://velocity.meteor.com/](http://velocity.meteor.com/)

# go - 在 go 函数声明中的参数旁边时，“...”是什么意思？

> ID：10128771
> 
> 赞同：23
> 
> 时间：2012-04-12T17:33:18.617
> 
> 标签：go

我正在浏览一些用谷歌的 Go 语言编写的代码，我遇到了这个：

```
func Statusln(a ...interface{})
func Statusf(format string, a ...interface{}) 
```

我不明白是什么`...`意思。有人知道吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-12T17:41:32.017

这意味着您可以使用[可变数量的参数](http://golang.org/ref/spec#Passing_arguments_to_..._parameters)调用 Statusln 。例如，使用以下命令调用此函数：

```
Statusln("hello", "world", 42) 
```

将为参数 a 分配以下值：

```
a := []interface{}{"hello", "world", 42} 
```

因此，您可以遍历该切片 a 并处理所有参数，无论有多少。可变参数的一个很好且流行的用例是例如 fmt.Printf() ，它采用格式字符串和可变数量的参数，这些参数将根据格式字符串进行格式化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T17:35:05.433

它是可变长度参数

```
func Printf(format string, v ...interface{}) (n int, err error) { 
```

以这个签名为例。这里我们定义我们有一个要打印的字符串，但是这个字符串可以用可变数量的东西（任意类型）进行[插值](https://en.wikipedia.org/wiki/String_Interpolation)来替代（实际上，我从 fmt 包中获取了这个函数）：

```
fmt.Printf("just i: %v", i)
fmt.Printf("i: %v and j: %v",i,j) 
```

正如您在此处看到的，使用可变参数，一个签名适合所有长度。

此外，您可以指定一些确切的类型，例如`...int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-24T22:27:19.510

它们是*可变参数函数*。它们接受可变数量的参数。

*   [维基百科：可变参数函数](http://en.wikipedia.org/wiki/Variadic_function)
*   [举个例子：可变参数函数](https://gobyexample.com/variadic-functions)

# spring - java.lang.OutOfMemoryError：GC 开销限制超出了 Spring Hibernate Tomcat 6

> ID：10128772
> 
> 赞同：2
> 
> 时间：2012-04-12T17:33:19.277
> 
> 标签：spring, hibernate, out-of-memory

我在使用 Spring + Hibernate 的 Web 应用程序中遇到问题。

我随机收到错误

java.lang.OutOfMemoryError：超出 GC 开销限制

当 web 应用程序在 tomcat 中运行时

我尝试获取堆转储并使用 Eclipse MAT 对堆转储进行了分析

这是我的发现

Object org.hibernate.impl.SessionFactoryObjectFactory 持有 86% 的内存，这个对象的 Fashhashmap 实例持有超过 100000 个 Hashmap。在每个 Hashmap 中都有一个 org.hibernate.impl.SessionFactoryImpl 的实例，似乎 org.hibernate.impl.SessionFactoryImpl 被加载了几次并存储在 org.hibernate.impl.SessionFactoryObjectFactory 的 Fashhashmap 中

有人可以帮我找到这个问题的根本原因并提出一些解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:20:01.250

好吧，即使你得到了`SessionFactoryObjectFactory holds 86% of the memory`，对我来说似乎也不是原因。第一件事是在依赖任何内存分析工具之前，我们应该首先了解这个工具是如何预测`outofmemory`问题的。内存工具只是尝试捕获运行该工具后在应用程序中显示的即时 HIKES。我很确定您会得到相同的错误日志，但`Catalina web class loader`访问大量内存的工具提到了不同的原因，这是显而易见的和预期的。

所以我只是想弄清楚，您不是依赖任何此类工具（在特定情况/实现中可能正确），而是尝试挖掘您的应用程序源代码并尝试找到在哪里创建了不必要的临时对象。

出于调试目的，您可以打开 JVM 选项 -`-XX:-PrintGCDetails`以查看 GC 正在收集的确切内容。

有关更多信息，请参阅这些帖子/参考 - [http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#Options](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#Options) [java.lang.OutOfMemoryError：超出 GC 开销限制](https://stackoverflow.com/q/5839359/1130032)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T16:15:54.560

好吧，您的 GC 线程正在花费 98% 或更多的处理器时间来尝试清理对象。

工厂模式的想法是返回您希望创建的对象的非空实例，这通常通过在实例化后返回相同的实例来完成。

现在可能是您有 100,000 个不同的会话或诸如此类的东西，但我怀疑这是正确的，因此您需要检查您的代码以确保工厂方法调用正确关闭，并且可能没有缓存本地副本。

如果你确实有 100,000 个会话，那么好好看看创建它们的方法。分解长方法，以便循环和 while 结构由方法调用分隔，以便方法局部变量可以在超出范围时被清理。

还要确保这些较小的方法不是最终的，因为编译器会将最终方法拼接到单个堆栈帧中作为优化技术。

# knockout.js - 多视图，如何从第二个视图更改一个视图中的属性

> ID：10128775
> 
> 赞同：0
> 
> 时间：2012-04-12T17:33:38.233
> 
> 标签：knockout.js

这是 jsfiddle 代码：http: [//jsfiddle.net/8vQrA/](http://jsfiddle.net/8vQrA/)

我想从 View #2 更改 View #1 中的属性。初始化第 2 节时，第 1 节作为引用传递，我在那里更改了该属性，但在 html 中没有更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:49:46.207

您在视图 1 上的属性嵌套在`section1`对象中并且是可观察的，因此您需要将其设置为：

```
var section2View = function(s1){
    var self = this;
    self.s1 = s1;
    self.section2= { property: ko.observable("test2") };
    self.s1.section1.property("test3");
}; 
```

小提琴：http: [//jsfiddle.net/rniemeyer/8vQrA/1/](http://jsfiddle.net/rniemeyer/8vQrA/1/)

# performance - 为什么在 couchdb 上的相同查询需要不同的时间？

> ID：10128776
> 
> 赞同：0
> 
> 时间：2012-04-12T17:33:39.960
> 
> 标签：performance, couchdb

我有一个沙发数据库应用程序，对于大多数视图，我注意到服务器返回响应所花费的时间从 10 毫秒到 100 毫秒不等。我在服务器上没有任何并发​​写入操作，最多有 10 个并发读取请求。

我应该如何诊断问题？你我在哪里看？

我在具有 1GB RAM 的机架空间云机器上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:25:37.647

从[Couchdb 指南](http://guide.couchdb.org/draft/views.html)：

> 如果您仔细阅读最后几段，有一段很突出：“当您查询视图时，CouchDB 会获取源代码并为您在数据库中的每个文档上运行它。” 如果你有很多文件，那会花费相当多的时间，你可能想知道这样做是不是非常低效。是的，会的，但 CouchDB 旨在避免任何额外成本：它只在您第一次查询视图时遍历所有文档一次。如果更改了文档，则 map 函数仅运行一次，以重新计算该单个文档的键和值。

您很可能会看到视图被重新生成和重新缓存。

# php - 使用嵌套依赖项和工厂类执行单元测试

> ID：10128780
> 
> 赞同：16
> 
> 时间：2012-04-12T17:34:09.460
> 
> 标签：php, unit-testing, design-patterns, phpunit

我是单元测试和 PHPUnit 的新手，但我最近阅读了很多关于设计模式和隔离测试的内容，我决定重构我正在开发的应用程序以摆脱静态类、单例、硬编码依赖项和在全球范围内定义的任何其他内容，希望使其“可测试”，而不是在未来维护，因为它是一个长期项目。

到目前为止，我相信我了解单元测试背后的理论，但我想知道，在将对象的嵌套依赖关系委托给工厂的情况下，应该如何进行单元测试，说工厂，或者只是对它进行测试是多余的? 测试依赖“链”是否同步运行的最佳方法是什么？

让我来说明问题。假设您有以下“遗留”代码：

```
class House {
    protected $material;
    protected $door;
    protected $knob;

    public function __construct() {
        $this->door = new Door();
        $this->knob = $this->door->getKnob();
        $this->material = "stone";

        echo "House material: ".$this->material . PHP_EOL . "<br/>";
        echo "Door material: ".$this->door->getMaterial() . PHP_EOL . "<br/>";
        echo "Knob material: ".$this->knob->getMaterial() . PHP_EOL . "<br/>";
    }
}

class Door {
    protected $material;
    protected $knob;

    public function __construct() {
        $this->knob = new Knob();
        $this->material = "wood";
    }

    public function getKnob() {
        return $this->knob;
    }

    public function getMaterial () {
        return $this->material;
    }

}

class Knob {
    protected $material;

    public function __construct() {
        $this->material = "metal";
    }

    public function getMaterial () {
        return $this->material;
    }
}

$house = new House(); 
```

这（据我的理解）对单元测试不利，因此我们将硬编码的依赖项替换为 DI + 工厂类：

```
class House {
    protected $material;
    protected $door;
    protected $knob;

    public function __construct($door) {
        $this->door = $door;
        $this->knob = $this->door->getKnob();
        $this->material = "stone";

        echo "House material: ".$this->material . PHP_EOL . "<br/>";
        echo "Door material: ".$this->door->getMaterial() . PHP_EOL . "<br/>";
        echo "Knob material: ".$this->knob->getMaterial() . PHP_EOL . "<br/>";
    }
}

class Door {
    protected $material;
    protected $knob;

    public function __construct($knob) {
        $this->knob = $knob;
        $this->material = "wood";
    }

    public function getKnob() {
        return $this->knob;
    }

    public function getMaterial () {
        return $this->material;
    }

}

class Knob {
    protected $material;

    public function __construct() {
        $this->material = "metal";
    }

    public function getMaterial () {
        return $this->material;
    }
}

class HouseFactory {
    public function create() {
        $knob = new Knob();
        $door = new Door($knob);
        $house = new House($door);

        return $house;
    }
}

$houseFactory = new HouseFactory();
$house = $houseFactory->create(); 
```

现在（再一次，据我了解）House、Door 和 Knob 可以使用模拟依赖项进行单元测试。但：

1) HouseFactory 现在会发生什么？

应该只是：

*   不测试它，因为它还没有任何值得测试的应用程序逻辑，而工厂通常保持这种状态。假设如果房屋、门和旋钮的独立测试通过了工厂应该没问题。
*   以某种方式重构工厂，即使用类中的函数来获取每个实例，这样可以通过 PHPUnit 覆盖这些函数以返回模拟对象，以防万一类中有一些额外的逻辑可以使用一些测试未来。

2）一次设置依赖于多个（非模拟）依赖项的测试是否可行？我知道这在技术上不是单元测试（也许是集成测试？）但我想使用 PHPUnit 仍然完全可行？鉴于上面的示例，我希望能够设置一个测试，不仅可以单独测试 House、Door、Knob 和 HouseFactory，还可以测试真实对象彼此交互的结果，也许还有它们的一些模拟的函数，例如处理数据的函数。PHPUnit 对于这种测试来说是一个糟糕的选择吗？

在此先感谢您的时间。我意识到我所做的一些假设可能不正确，因为我显然不是这方面的专家；欢迎和赞赏更正。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:45:02.653

工厂就像`new`关键字一样。你测试`new`关键字吗？不，你测试你是否可以构造一个类。但这独立于工厂本身和单元的一部分，因此已经是单元测试的一部分。

2）称为集成测试。你也可以用 PHPUnit 做到这一点。

* * *

> ***编辑**- 由于评论中有一些讨论：*

就单元测试而言，您可以对工厂的用途进行单元测试：返回具体类型、类型或*任何*类型。

这没有什么问题，但是通常没有必要，因为返回类型的构造函数已经在单元测试中，而且测试真的很简单，只是数据检查，闻起来像集成测试。如果无法提供依赖项，那些将工厂中的类型作为依赖项（并且也在单元测试中）的类型也会使编译/执行失败。因此，工厂的一切都已经过测试，甚至来自双方。如果工厂没有被消耗，那么你就不需要测试它。

我建议你创建一次纯TDD风格的工厂，所以预先制定使用然后你就会对此有所感觉。您可能想要测试工厂类的其他方面，但这可能更多地属于集成而不是单元测试。

而且我不想给人一种印象，即您的其他单元实际上应该对工厂创建方法进行硬编码调用，而不是注入依赖项。因为你不应该`new`在你的单位内使用，你也不应该在`Factory::create`其中使用。与 类似`new`，类名 ( `Factory`) 是硬编码的，而不是注入的。这是一个隐藏的依赖。但是不应该隐藏依赖关系；但可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-23T16:46:59.630

您可以使用继承对其进行测试。

只需用 FakeHouse 扩展 House 进行测试，然后检查 $material、$door 和 $knob 等在测试后是否发生了变化。

# python - 重定向后获取部分 URL

> ID：10128781
> 
> 赞同：1
> 
> 时间：2012-04-12T17:34:10.723
> 
> 标签：python

好的，这基本上就是我想要做的：

URL [http://anidb.net/perl-bin/animedb.pl?show=animelist&adb.search="Cowboy Bebop"&do.search=search](http://anidb.net/perl-bin/animedb.pl?show=animelist&adb.search=%22Cowboy%20Bebop%22&do.search=search)重定向到[http://anidb.net/perl-bin/animedb.pl ?show=anime&aid=23](http://anidb.net/perl-bin/animedb.pl?show=anime&aid=23)

假设我想在 XML 文件中记下 ID（在该示例中为 23）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:50:21.033

提供重定向信息的`urlopen`has 方法的结果。`geturl`然后您可以使用正则表达式对其进行解析。

```
import urllib2
import re

url = 'http://anidb.net/perl-bin/animedb.pl?show=animelist&adb.search=%22Cowboy%20Bebop%22&do.search=search'
headers = {"User-agent": "Mozilla/5.0"}
request = urllib2.Request(url, None, headers)
result = urllib2.urlopen(request)
r =  re.search("aid=(\d+)", result.geturl())
print r.group(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:37:11.080

做这个：

```
var uri = window.location.href
var params = uri.split("?")[1].split("&");

args = {};
for(var i=0; i<params.length; i++) {
    p = params[i].split("=");
    args[p[0]] = p[1];
}
alert(args['aid']); 
```

[编辑：锯蟒标签]

因此，在 python 中，如果你有一个 URL，你可以非常相似地拆分它：

```
uri = "http://anidb.net/perl-bin/animedb.pl?show=anime&aid=23"
params = uri.split('?')[1].split('&')

args={}
for kv in params:
     p = kv.split('=')
     args[p[0]] = p[1] 
```

但是同样，我不知道 python 在您的问题中发挥作用，因为似乎受到攻击的脚本是 perl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:25:24.023

与实际的编码问题无关。但是您可能想要使用[AniDB 搜索数据](http://wiki.anidb.net/w/HTTP_API_Definition#Search)而不是查询他们的网站。

# dialog - FB.ui - 提交后再次出现发送对话框

> ID：10128782
> 
> 赞同：2
> 
> 时间：2012-04-12T17:34:37.030
> 
> 标签：dialog, facebook-javascript-sdk, send, fb.ui

我们看到 Facebook 发送对话框（Javascript SDK、**FB.ui**方法）有一些奇怪的行为。单击发送按钮后，对话框消失，然后重新出现。在没有任何用户操作的情况下，该对话框会在一段时间后消失，但这种延迟会有所不同（从一瞬间到几秒钟不等）。

消息传递没有问题。

如何重现：

[https://apps.facebook.com/barclays_pingit/](https://apps.facebook.com/barclays_pingit/)

1.  点击“告诉朋友”标题下的“发送消息”
2.  添加收件人和消息
3.  点击“发送”

或者：

1.  点击“制作自己的视频”
2.  选择一个朋友，他们欠你多少钱，为了什么
3.  点击“制作视频”
4.  您可以跳到视频末尾，然后单击“将视频发送到...”
5.  添加消息 点击“发送”

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:23:11.040

对不起，我不能给你答案，但由于我有同样的问题，这里有一个快速补丁：

```
 var callback = function callback(response) {
          var clear_callback = function(){
            $('.fb_dialog').remove();
          };
          var arr = [250,1000,2000,3000,4000,5000,7000];
          for (var i in arr)
          {
            setTimeout(clear_callback,arr[i]);
          }
        }

        FB.ui(obj, callback); 
```

# javascript - Chrome 应用程序丢失本地存储

> ID：10128783
> 
> 赞同：4
> 
> 时间：2012-04-12T17:34:59.057
> 
> 标签：javascript, google-chrome, google-chrome-extension, local-storage

我在 Chrome 商店中有一个便笺应用程序，它使用 localStorage 对象来记住笔记。它似乎工作正常，但每次我推出更新时，人们都会报告他们丢失了所有笔记。这*从来没有*发生在我身上，一次也没有。

如果我什至不能复制它，我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T15:33:22.277

你如何发送更新？问题可能是应用 ID 正在更改。要查看是否是这种情况，请修改应用程序以某种方式报告 chrome.runtime.id 的值并将其发送回给您。

如果是这种情况，您可以通过在 manifest.json 中包含一个键属性来修复 ID。要获取 key 属性的值，请通过将 CRX 文件拖到 Extensions 页面或从 Chrome Web Store 安装应用程序并找到 INSTALLED manifest.json 文件。（有一个关于在哪里可以找到它的文档……不记得 URL，但你可以用谷歌搜索它。）然后将 key 属性复制到你的 source manifest.json 文件中。

更新：找到链接。[http://developer.chrome.com/apps/manifest/key.html](http://developer.chrome.com/apps/manifest/key.html)

# asp.net - Formview.ChangeMode 不起作用

> ID：10128795
> 
> 赞同：0
> 
> 时间：2012-04-12T17:35:58.723
> 
> 标签：asp.net, formview

这是我的网页：

```
<asp:FormView
  ID = "frmView1"
  DefaultMode = "Insert"
  runat = "server"
 >
  <ItemTemplate>
      Item Template
  </ItemTemplate>
  <InsertItemTemplate>
      Insert Item Template
  </InsertItemTemplate>    
</asp:FormView>

<asp:Button ID="btnSubmit" Text="Submit" runat="server" /> 
```

这是代码隐藏：

```
Private Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click
    frmView1.ChangeMode(FormViewMode.ReadOnly)
End Sub 
```

当我单击 btnSubmit 时，formview 没有显示任何内容！这是在代码后面更改模式的正确方法吗？

此外，如果这样写，则在后面的代码中而不是 ChangeMode 中：

```
frmView1.DefaultMode = FormViewMode.ReadOnly 
```

forview 显示 InsertItemTemplate 的内容。有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:48:56.507

除非您绑定，否则 FormView 不会显示，如下所示：

```
using(SqlDataAdapter adapter = new SqlDataAdapter(sql,connection))
{
   DataTable table = new DataTable();
   adapter.Fill(table);
   FormView1.DataSource = table;
   FormView1.DataBind();   
} 
```

如果您的数据源不返回任何值，只需添加 EmptyDataTemplate 标记以显示空消息。

```
 <EmptyDataTemplate>
    There is nothing to see here.
</EmptyDataTemplate> 
```

按照本[教程](http://www.learn-asp.net/asptutorials/FormView.aspx)以及[MSDN上的更多信息](http://msdn.microsoft.com/en-us/library/ms228089.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:48:41.410

在您的代码中

```
<asp:Button ID="btnSubmit" Text="Submit" runat="server" /> 
```

必须改为

```
<asp:Button ID="btnSubmit" Text="Submit" runat="server" command="ChangeModeToReadOnly" OnCommand="Button_Command" /> 
```

而不是实现 OnClick 事件实现这个

```
Protected Sub Button_Command(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.CommandEventArgs)
   Select Case e.CommandName
     Case "ChangeModeToReadOnly"
       frmView1.ChangeMode(FormViewMode.ReadOnly)
   End Select
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:03:38.687

您可以尝试添加以下**DataBound**函数

```
protected void myFormView_DataBound(object sender, EventArgs e)
{
    frmView1.ChangeMode(FormViewMode.ReadOnly);
} 
```

语法在`C#`

# jquery - Jquery IE7 Id附加问题

> ID：10128804
> 
> 赞同：3
> 
> 时间：2012-04-12T17:36:30.877
> 
> 标签：jquery, css

所以我有以下 Jquery

```
 $j("a#Pinterest").html("<img src='/images/Social Media/pinterest.png'>"); 
```

并标记如下；

```
<a id="Pinterest"></a> 
```

效果很好，但是用户可以选择在一个页面上添加多个，我注意到在 IE7 中只有第一个锚点附加了图像，而其他锚点则没有。在所有其他浏览器中，它们都会附加图像。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:38:58.507

`id`在 html 页面上必须是唯一的。您只能使用同一个 ID 一次。请改用`class`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:39:47.740

**HTML**

```
<a class="Pinterest"></a>
<a class="Pinterest"></a> 
```

**JS**

```
$j("a.Pinterest").html("<img src='/images/Social Media/pinterest.png'>"); 
```

Id 应该是唯一的，但您可以将 class 用于使用相同类名的一组元素。

# javascript - Javascript：警告一个带有连字符的数字

> ID：10128806
> 
> 赞同：0
> 
> 时间：2012-04-12T17:36:54.230
> 
> 标签：javascript, onclick, alert

我试图提醒一个带有连字符的数字，但是它一直在计算数字......

```
HTML / PHP
    echo '<input type="submit" name="remove" value="remove" onclick="removeEntry(' .
          $row['Incident'] . ',' . $row['Fogbugz Number'] . ')" />'; 
```

这已经过测试并将正确的值返回到表单（检查页面的来源）

```
"onClick="removeEntry(123456-001111, 123456)" 
```

这是我尝试使用 javascript 时发生的情况：

```
Javascript
    function removeEntry(incident, fogbugz){
        alert(incident);
    } 
```

这会导致一个带有 122345 的警报框。但是我希望它返回“123456-001111”

我努力了：

```
alert(toString(incident));

alert(incident.toString());

alert(str(incident));

alert(incident.value);

incident = incident.value
alert(incident); 
```

我无法弄清楚这个:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:39:31.563

首先尝试将参数作为字符串传递；就像是：

```
onClick="removeEntry('123456-001111',123456);" 
```

按照您现在的方式，当页面代码加载时，这些数字会相互减去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:40:20.687

看看你在做什么：

```
onClick="removeEntry(123456-001111, 123456) 
```

您正在减去两个数字，而不是显示字符串。它需要报价！

```
onClick="removeEntry('123456-001111', 123456) 
```

# visual-studio - 在哪里物理存储 VisualSvn 分支或主干以进行编译

> ID：10128810
> 
> 赞同：2
> 
> 时间：2012-04-12T17:37:09.507
> 
> 标签：visual-studio, branch, visualsvn

我将 Visual SVN 与 Visual Studio 2010 一起使用，并希望在我的解决方案的功能分支上工作。我已阅读此处的[文档](http://www.visualsvn.com/support/svnbook/branchmerge/using/)和有关分支[的书。](http://svnbook.red-bean.com/en/1.7/svn-book.pdf)我是 Visual SVN 的新手，似乎没有想到应该将我用来实际开发和编译项目的不同版本的文件的副本保存在哪里。我知道对于 SVN，存储库基本上包含文件的“虚拟”副本。我是否需要单独的本地副本，以便一个文件夹仅包含主干副本中的那些文件，而某个单独的文件夹将包含分支的完整解决方案？

据我了解，Visual Svn 可以让我在任何我想要的地方制作本地副本，但我正试图找出一种合乎逻辑的方法来做到这一点。如果我的应用程序的这些几乎相同版本有两个单独的文件夹，我在 Visual Studio 的开始菜单中不会有两个无法区分的条目吗？如果我将鼠标悬停在上面，他们会列出不同的路径。我是否错过了重点，或者我只是对这样做的方式感到尴尬？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:34:56.670

是的，我认为这只是主观的。第一次使用 SVN 对我来说是一样的，但是...在不同的文件夹中检查主干和分支（以有意义的方式命名每个文件夹）然后为不同文件夹中的不同解决方案创建两个不同的桌面快捷方式并返回编码...

# css - Twitter Bootstrap 2.0 中的中心导航栏

> ID：10128812
> 
> 赞同：23
> 
> 时间：2012-04-12T17:37:20.367
> 
> 标签：css, navigation, twitter-bootstrap, responsive-design, centering

假设我们有以下使用 Twitter Bootstrap 2.0 的导航栏标记。

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner pull-center">
      <ul class="nav">
      <li class="active"><a href="#">HOME</a></li>                        
      <li><a href="#contact">CONTACT</a></li>
      </ul>        
  </div>
</div> 
```

`.nav`内部居中的最佳方式是什么`navbar-inner`？

我只是想出了添加自己的 CSS 样式：

```
@media (min-width: 980px) {
    .pull-center {
        text-align: center;
    }
    .pull-center > .nav {
        float:none;
        display:inline-block;
        *display: inline; *zoom: 1;
        height: 32px;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T00:56:27.983

覆盖导航栏中容器的宽度从`auto`to `960px`。

```
.navbar-inner .container {width:960px;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-01T13:14:45.883

To align it in the center with a dynamic width, I used the following:

HTML:

```
<div class="navbar">
  <div class="navbar-inner">
    <ul class="nav">
      ....
    </ul>
  </div>
</div> 
```

CSS:

```
.navbar .navbar-inner {
    text-align: center;
}
.navbar .navbar-inner .nav {
    float: none;
    display:inline-block;
} 
```

Didn't test it, but I guess only `display:inline-block;` could be a problem, which is supported in all browsers except for IE7 and lower..

[http://caniuse.com/inline-block](http://caniuse.com/inline-block)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T17:06:22.420

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T12:48:38.537

只需按照[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)使用容器类就可以使我的导航居中；但是，它是固定宽度并且格式关闭（导航栏的高度增加了，很可能我做错了）。

最好让导航以基于百分比的流畅宽度居中，并具有基于某些最小支持的设备屏幕尺寸的最小宽度和 nowrap。（我是响应式媒体查询的新手，也许这是基于百分比的更好选择。）

仍在研究最小宽度和 nowrap，但引导容器类固定宽度的另一种替代方法是添加 navbar-inner 的子项。我想知道是否有内置的引导解决方案，例如 row-fluid 和 spanN 类，但我也无法在导航中正确格式化。

```
<div style="margin-left: 15%; margin-right: 15%;"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T23:06:15.607

我发现这有用且干净：

```
<div class="navbar navbar-fixed-top">
  <div class="container">
      <ul class="nav">
      <li class="active"><a href="#">HOME</a></li>                        
      <li><a href="#contact">CONTACT</a></li>
      </ul>        
  </div>
</div> 
```

其中，CSS 是：

```
.container {left:auto;right:auto} 
```

这将使 div 在当前导航栏宽度的基础上居中。

响应性是分开管理的。

# java - 随着注入类型的变化，Guice 的行为方式有何不同

> ID：10128816
> 
> 赞同：3
> 
> 时间：2012-04-12T17:37:39.973
> 
> 标签：java, dependency-injection, guice

假设我们有以下代码：

```
public interface Rock {
    // Minerals are a concrete class; omitted for brevity
    public Minerals getMinerals();
}

public class Granite implements Rock {
    // @Inject #1 - field
    private Minerals minerals;

    // @Inject #2 - constructor
    public Granite(Minerals mins) {
        super();
        setMinerals(mins);
    }

    public Minerals getMinerals() {
        return minerals;
    }

    // @Inject #3 - setter
    public void setMinerals(Minerals mins) {
        minerals = mins
    }
}

public class RockModule extends AbstractModule {
    public void configure(Binder guiceBinder) {
        Minerals m = new Minerals(true, 3, MineralEnum.Sedimentary);

        guiceBinder.bind(Minerals.class).toInstance(m);
        guiceBinder.bind(Rock.class).to(Granite.class);
    }
}

public class TestInjections {
    public static void main(String[] args) {
        RockModule mod = new RockModule();
        Injector injector = Guice.createInjector(mod);

        Granite gran = injector.getInstance(Granite.class);
    }
} 
```

我已经注释掉了 3 个`@Inject`注释，因为它们是这里的变量——我想知道 Guice 在所有 3 种情况下（字段级、构造函数级或设置器级注入）的行为方式。

*   `Granite`实例是否**总是**注入`Minerals`模块中配置的实例？注入类型（三种中的每一种）如何影响`Granite`注入器返回的实例 - 还是它们都相同？
*   如果我根本没有`Minerals`在模块中显式绑定**并且** `Minerals`没有定义公共的无参数构造函数怎么办？对于所有三种注入场景，Guice 如何实例化`Minerals`要为请求`Granite`对象返回的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:44:31.827

1.  `Minerals`无论您选择哪种注入技术，都将始终注入到 中`Granite`，但有些注入比其他注入“更干净” - 例如，选项 1 使您对注入的完成方式的控制较少，选项 3 意味着您的课程不能不可变的。
2.  如果`Minerals`未绑定、缺少公共无参数构造函数并且缺少`@Inject`构造函数，则 Guice 会引发异常，除非您使用`@Inject(optional = true)`.

# javascript - 在 mootools 可排序表中对整数列进行排序

> ID：10128817
> 
> 赞同：2
> 
> 时间：2012-04-12T17:37:44.357
> 
> 标签：javascript, mootools

我正在弄乱 mootools 中的可排序表，您可以在其中单击 th 并对表中的值进行排序。

但是，它似乎将整数值视为文本。如何声明表列数据类型以避免此问题？

这是一个要演示的小提琴：http: [//jsfiddle.net/mBmc3/1/](http://jsfiddle.net/mBmc3/1/)

如果单击“值”标题，您将看到该列像字符串一样排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:44:00.777

创建表对象时，必须指定在对数据进行排序时使用哪个解析器：

```
var myTable = new HtmlTable({
    properties: {
        border: 1,
        cellpadding: 3
    },
    headers: ['values', 'label'],
    sortable: true,
    parsers: ['number','string']
}); 
```

选项对象末尾的那一行：

```
parsers: ['number','string'] 
```

...将每一列映射到特定的解析器。解析器用于将每一列的数据格式化为它应该被排序的类型。否则，每一列都被视为一个字符串。

jsFiddle：http: [//jsfiddle.net/d3DLG/](http://jsfiddle.net/d3DLG/)

**文档**

*   Mootools `HtmlTable.Sort`- [http://mootools.net/docs/more/Interface/HtmlTable.Sort](http://mootools.net/docs/more/Interface/HtmlTable.Sort)

# assembly - 有没有模拟显卡的程序

> ID：10128818
> 
> 赞同：1
> 
> 时间：2012-04-12T17:38:10.227
> 
> 标签：assembly, video-card

我对汇编语言很陌生，我想与显卡接口来绘制像素或其他东西。我想知道是否有一个我可以使用的程序，我可以使用它来在程序或屏幕中绘制一个像素。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:44:13.940

[EASy68K](http://www.easy68k.com/)是一个支持图形和声音的 68k 系统模拟器。

[MARS](http://courses.missouristate.edu/KenVollmar/MARS/)是 MIPS 的另一种，具有图形输出支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:05:07.223

试试[QEMU之类的模拟器](http://wiki.qemu.org/Main_Page)

# c# - 将字符串转换为 1 项数组的最快方法是什么

> ID：10128819
> 
> 赞同：0
> 
> 时间：2012-04-12T17:38:11.957
> 
> 标签：c#

假设我想要这样的东西：

```
string s = "hello";
string[] array = s.ToStringArray() 
```

并且`array[0]`（唯一的元素）持有值 >> “hello”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T17:39:53.900

```
string[] array= new string[] { s }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T17:40:25.870

最简单的方法：

```
string[] array = { s }; 
```

此外，您可以使用`var`关键字：

```
var array = new string[] { s }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T17:40:56.760

In`c#`类型由编译器推断。

```
var s = "hello";
var array = new [] { s }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T00:56:06.243

如果你想要功能方式来做到这一点，我最好的猜测是：

```
string a = "abcd";
var b = a.Split("".ToCharArray()); 
```

但正如其他人所说 - 没有内置函数可以将字符串转换为单项数组。

**编辑**：刚刚注意到您需要将数组传递给方法。在这种情况下，最好的解决方案是方法重载，它接受字符串参数，然后将其转换为数组 + 执行所需的方法，如下所示：

```
public WhateverMethodType Method(string param){
    return Method(new string[] { param });
}

public WhateverMethodType Method (string[] param){
    // <...>
} 
```

希望对你有所帮助。

# c# - 如何让一个方法接受两种类型的数据作为参数？

> ID：10128823
> 
> 赞同：1
> 
> 时间：2012-04-12T17:38:28.850
> 
> 标签：c#, .net, arraylist, hashtable, arguments

我有一个方法，接受一个哈希表（是的，我知道，它已经过时了..）作为参数：

```
public static LuaTable HashtableToLuatable(Hashtable t, int depth = 1) 
```

这可以正常工作。

现在我也想接受一个 ArrayList 作为第一个参数，所以你可以让 't' 同时具有 Hashtable 和 ArrayList 的值。目前我已经将该方法复制粘贴了两次，如下所示：

```
public static LuaTable ArraylistToLuatable(ArrayList t, int depth = 1) 
```

其余的完全一样。

我认为有一种方法可以合并它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T17:41:20.987

这两个类都实现了 ICollection 接口，因此如果您的“通用代码”将与 ICollection 接口的定义相违背，您可以将其用于您的参数类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:42:16.130

您已经展示了一个方法重载的示例，到目前为止，您所做的工作在 C# 框架内工作。

问题是，该方法必须如何处理传入的值。必须有一些方法将它们视为“等效”。一种方法是如果两种类型都实现相同的接口。

[ArrayList 实现](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)：IList、ICollection、IEnumerable

[哈希表实现](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)：IDictionary、ICollection、IEnumerable

如果方法体内的代码只是将第一个参数视为集合，则可以将方法签名更改为：

```
public static LuaTable HashtableToLuatable(ICollection t, int depth = 1) 
```

如果您的实现不使用或不需要 ICollection 中的所有内容，则可以改为指定

```
public static LuaTable HashtableToLuatable(IEnumerable t, int depth = 1) 
```

与 ICollection 相比，更多的对象实现了 IEnumerable，因此使用 IEnumerable（如果可能）将允许在以后传递不同类型的对象时具有更大的灵活性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T17:43:49.117

两种类型都实现`IEnumerable`and `ICollection`，因此重写您的方法签名以使用其中之一：

```
public static LuaTable EnumerableToLuaTable(IEnumerable t, int depth = 1) 
```

或者

```
public static LuaTable CollectionToLuaTable(ICollection t, int depth = 1) 
```

如果您`IEnumerable`不需要.`ICollection``ICollection`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T17:45:38.697

这两种（非常过时的）类型都实现了两个通用接口，即；`IEnumerable`和`ICollection`。因此，您可以根据这些接口设置通用约束。

```
static void ArraylistToLuatable<T>( T collection ) where T : IEnumerable
{
    foreach( var item in collection )
    {
        // do something
    }
} 
```

当然，这仍然很糟糕，因为`item`它将是 type `object`，这对你的`ArrayList`论点比你的`HashTable`论点更有效，因为在幕后，你必须以某种方式处理 a `DictionaryEntry`，这意味着你必须在方法中检查它的类型并适当地投你的`item`。

您确定不能使用更新的通用集合类型吗？当您从 DLL 中获取它们时，是否可以将它们包装在一个通用集合中？我想这取决于你需要多少这种东西。如果只是一种或两种方法，这种方式可能没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T17:46:20.157

你可以试试泛型，如果这对你有用..

```
public static LuaTable <T> HashtableToLuatable(T t, int depth = 1) where T : ICollection 
```

如果上述内容不适合您的情况，您也可以派生自己的数据类型。

# android - Android：从模板文件创建 TextView 并附加到现有的 TextView

> ID：10128829
> 
> 赞同：-1
> 
> 时间：2012-04-12T17:38:56.147
> 
> 标签：android, textview

我有一个简单的 TextView 模板`simple_txt.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="30dp"
    android:textSize="18sp" >
</TextView> 
```

我有一个主要的布局。我还有一些其他的TextView：

```
...
<TextView
    android:id="@+id/main_text_view"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
/> 
... 
```

所以我需要从模板创建一些 TextViews`simple_txt.xml`并附加到 *main_text_view*（simple_txt 在 main_text_view 之后）。

我知道可以将任何视图添加到布局（addView），但它会在布局内部添加一个视图，而不是在旁边。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:45:46.573

将您的文本视图包裹在另一个布局中，例如 LinearLayout。使用 LayoutInflater 创建新的 TextView，然后将它们插入到围绕原始 TextView 的布局中。例子：

```
<LinearLayout android:id="@+id/textViewContainer" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:orientation="vertical">
    <TextView
        android:id="@+id/main_text_view"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        /> 
</LinearLayout> 
```

接着

```
ViewGroup group = ((ViewGroup)findViewById(R.id.textViewContainer));
group.addView (
     LayoutInflater.from(this).inflate(R.layout.simple_text, group)); 
```

# python - SVN 相关，与“主干/分支”概念有关

> ID：10128835
> 
> 赞同：0
> 
> 时间：2012-04-12T17:39:20.597
> 
> 标签：python, svn, testing, software-design

我一直在尝试 SVN 一段时间。我有一个小测试项目来测试作为 SVN 管理员和 SVN 用户的不同方面。这里先做一点介绍。

我有一个脚本：

```
<repos>/python/testScript/trunk/testScript.py 
```

此脚本检查环境变量 $LOCALSITE 并列出结果。今天我发现了一个错误，如果那个环境会破坏脚本。变量未设置。所以我立即分支到：

```
<repos>/python/testScript/branches/branch-00.01.xx/testScript.py 
```

并且还推送了一个标签：

```
<repos>/python/testScript/tags/0.1.1/testScript.py 
```

所以这个第一个标签仍然继承了“未设置 $LOCALSITE 时失败”的错误。就像树干仍然遭受同样的问题一样。

我推送标签的原因是我 %100 确信该脚本将在正确设置 $LOCALSITE 的环境中执行。所以它不会破裂。人们可以像往常一样继续使用“tag-0.1.1”。

但是我仍然想解决这个问题。所以这是一个问题：

我已经在“branch-00.01.xx/testScript.py”上修复并测试了这个问题，所以现在我知道“branch-00.01.xx”正在工作，除非有更多隐藏的错误。那是正确的步骤吗？还是我应该修好后备箱？

现在我该怎么办？我应该将固定分支推送到新标签吗？还是我应该修复主干并杀死分支“branch-00.01.xx”？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:20:24.660

分支模型假设当你完成一个特性的工作时，你会将它合并回主干。无需标记它，因为您不想将其暴露给外界。（实际上，您可以直接在主干上完成此修复，但我知道您正在探索该过程）。

由于您刚刚开始，我建议您看一下 mercurial：它的语法非常类似于 svn，但它是下一代“分布式”版本控制。我不是说垃圾话 svn，它是一个很棒的系统，但这也是你想知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:59:56.263

不同的网站以不同的方式解决这个问题。很多都是政策问题。

我见过的最好的方式，IMO：

1）Trunk 是相对免费的，但可能有一个政策，如果没有首先运行自动化测试，就不能将任何东西签入到 Trunk 中。这往往会减少在主干上等待的人能够很好地工作以测试不相关的更改。

2）分支仍在变化，但变化会逐渐变慢。可以评估签入主干的事物以签入相关分支。一段时间后，一个分支可能会被“冻结”，例如通过设置一个提交钩子来拒绝所有在签入中不包含一些魔术 cookie 的提交。如果有人非常想要（通过查看提交历史），这很容易解决，但它消除了对冻结分支的意外签入。

3) 当一个给定的分支看起来相当稳定时，它会在打包以供 Q/A 之前被复制到一个标签中。标签一旦创建就永远不会改变，作为一个参考点——尽管理论上 SVN 将它们视为同样可变的——差异再次是一个政策问题。

这一切中令人讨厌的部分是 SVN 外部引用。如果你没有，分支和标记很容易 - 只需 svn copy 就完成了。如果你有它们，你最终会编写一个脚本来调整外部引用，作为分支/标记过程的一部分。但有时外部参考确实很有用。我一直在尝试在分支期间“内部化”所有外部引用 - IOW 将所有外部引用复制为新创建的分支的一部分，以保持分支和标记简单。然后，当有重要的修复时，开发人员需要检查更多的地方，但到目前为止，至少在我的个人项目中，这似乎是帮助而不是障碍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:49:09.000

在某种程度上，您选择什么并不重要，因为主干/分支只是为了方便起见的逻辑概念（名称）并且没有技术差异。

以我的经验，你通常会想到你进行最新和最伟大开发的主干，同时为你已经推送给客户并且可能需要稍后继续工作的版本留下分支，但不想担心正在进行的主干更改会破坏事情.

# javascript - 原型函数和json符号函数的区别？

> ID：10128837
> 
> 赞同：3
> 
> 时间：2012-04-12T17:39:26.930
> 
> 标签：javascript, json, prototype, javascript-objects, object-literal

我在下面创建了两个员工类，一个使用构造函数，另一个使用 JSON 表示法。在构造函数中，该`print`函数是由原型创建的，因此只保留一份副本，对象（`emp1`和`emp2`）共享该`print`函数。

**问题：**在 JSON 表示法 ( `EmployeeNew`) 中，`print`函数是否会仅作为一份副本保存在内存中？还是每个对象都会保留自己的副本？这两种方法的根本区别是什么？哪个最适合哪个场景？

```
var Employee = function (name) {
    this.name = name;
};

Employee.prototype.print = function () {
    console.log(this.name);
}

var emp1 = new Employee("jack"),
    emp2 = new Employee("mark");

emp1.print();
emp2.print();

var EmployeeNew = {
    init: function (name) { this.name = name; },
    print: function () {
        console.log(this.name);
    }
};

var empNew1 = Object.create(EmployeeNew),
    empNew2 = Object.create(EmployeeNew)

empNew1.init("jack")
empNew1.print();
empNew2.init("jack");
empNew2.print(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:47:32.463

您的两个代码示例通常是等效*的（除了一些与问题无关的小细节）*。

这个...

```
Object.create(EmployeeNew) 
```

...创建一个以`EmployeeNew`对象为原型的新对象。所以`print`和`init`函数是共享的。

```
console.log(empNew1.init === empNew2.init); // true
console.log(empNew1.print === empNew2.print); // true 
```

* * *

为了进一步说明，这是一个采用以下步骤的示例...

1.  创建一个`EmployeeNew`对象以供使用`Object.create`
2.  使用创建 2 个独特的对象`Object.create`
3.  验证新对象是否可以使用提供的功能`EmployeeNew`
4.  添加一个新函数到`EmployeeNew`
5.  查看步骤 2 中的对象是否可以使用该新功能

* * *

***第 1 步：**创建`EmployeeNew`对象*

```
var EmployeeNew = {
    init: function (name) { this.name = name; },
    print: function () {
        console.log(this.name);
    }
}; 
```

***第 2 步：**使用创建 2 个唯一对象`Object.create`*

```
var empNew1 = Object.create(EmployeeNew),
    empNew2 = Object.create(EmployeeNew) 
```

***第 3 步：**验证新对象是否可以使用`EmployeeNew`*

```
empNew1.init("jack");
empNew1.print();
empNew2.init("jack");
empNew2.print(); 
```

***第四步：**添加新功能`EmployeeNew`*

```
EmployeeNew.foo = function() {
    console.log( 'Foo was invoked' );
}; 
```

***第 5 步：**查看第 2 步中的对象是否可以使用该新功能*

```
empNew1.foo();  // logs 'Foo was invoked'
empNew2.foo();  // logs 'Foo was invoked' 
```

* * *

因此，您可以看到`empNew1`并`empNew2`能够观察到 的变化`EmployeeNew`。这是因为当我们`EmployeeNew`作为第一个参数传递给 时`Object.create`，我们创建了一个新对象，并`EmployeeNew`设置`prototype`为该对象的。

简单来说，当我们查找一个属性时，例如 on `empNew1`，如果`empNew1`没有该属性，它会*自动查找其原型*以查看该属性是否存在于该对象上。如果是这样，它会使用它。

* * *

关于你的评论...

> *“......假设，如果创建 this.name 作为属性（名称：“”）是名称属性也将被视为原型......”*

是的，如果我们这样做...

```
EmployeeNew.name = "unknown" 
```

...然后该属性将在所有具有`EmployeeNew`原型对象的实例之间共享。

## 但

因为`.name`原型上的属性是不可变的*原始*值*（字符串）*，如果我们尝试写入该属性，会发生该`.name`属性*自动*直接添加到实例的情况。

继续上面的例子......

```
EmployeeNew.name = "unknown"; 
```

现在之前创建的实例将引用该属性...

```
empNew1.name;  // "unknown"
empNew2.name;  // "unknown" 
```

...但是现在让我们在一个实例上更新属性...

```
empNew1.name = "bubba";

empNew1.name;  // "bubba"
empNew2.name;  // "unknown" 
```

这是因为`empNew1`now 有自己的`.name`属性来引用`"bubba"`. 这会在 的原型上*隐藏*属性，因此对该属性的搜索永远不会扩展到原型对象。`.name``empNew1`

由于`empNew2`没有分配 a `.name`，它仍然会查找该属性的原型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:53:46.110

*这两种情况是等价的，如果使用new*及其所有初始参数或使用*init*方法创建新对象，您只需要考虑对您的编码风格更直观的方法。

*Class*实现的一个优点是，如果您在*Class*定义中编写对象（我知道，它不是原型），您可以创建内部私有属性，而仅使用原型您不能（除非您使用特殊符号，例如下划线前缀）。最后只是风格问题，你觉得什么更舒服。

# django - Django get 方法产生错误

> ID：10128838
> 
> 赞同：0
> 
> 时间：2012-04-12T17:39:28.143
> 
> 标签：django, django-models

我正在关注一本 Django 书籍（Django 1.0 Web Site Development）。我发现这本书虽然直截了当且易于阅读，但却遗漏了一些小细节。但是，我遇到的这个错误，我一直无法在线找到解决方案。谢谢你的帮助。

下面，我将 Tag 类添加到我的 models.py 文件中。

```
from django.db import models
from django.contrib.auth.models import User

class Link(models.Model):
    url = models.URLField(unique=True)

class Bookmark(models.Model):
    title = models.CharField(max_length=200)
    user = models.ForeignKey(User)
    link = models.ForeignKey(Link)

class Tag(models.Model):
    name = models.CharField(max_length=64, unique=True)
    bookmarks = models.ManyToManyField(Bookmark) 
```

然后我尝试在 python shell 上运行以下代码：

```
from bookmarks.models.import *
bookmark = Bookmark.objects.get(id=1) 
```

结果，我收到以下错误：

```
Traceback (most recent call last):
File "(console)", line 1, in (module)
File "c:\Python27\lib\site\-packages\django\db\models\manager.py", line 132, in get
   return self.get_query_set().get(*args, **kwargs)
File "c:\Python27\lib\site-packages\django\db\models\query.py", line 349, in get
   % self.model._meta.object_name)
DoesNotExist: Bookmark matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:45:29.940

您是否在表中添加了任何数据`Bookmark`？如果没有与您的查询对应的记录，[`DoesNotExist`则由 get 引发。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get)即如果没有对应的记录`id=1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:45:44.333

错误意味着它所说的。如果数据库中没有与给定条件相匹配的对象，`DoesNotExist`则会引发. 在这种情况下，这意味着数据库中没有 ID 等于 1 的对象。`QuerySet.get()``QuerySet``Bookmark`

# android - 使用缩放和滚动打开 ImageView

> ID：10128842
> 
> 赞同：11
> 
> 时间：2012-04-12T17:39:37.340
> 
> 标签：android, button, scroll, imageview, zooming

我想通过按下按钮在 ImageView 中打开一个图像。我需要图像是可缩放和可滚动的。我将如何最好地实现这一目标？谢谢！

图像可以是 PNG 或 JPG

**太感谢了！**

这是我的新代码，您不介意浏览一下并给我一个解决我所有关于*TAG*、*ZOOM*等问题的解决方案......我也知道我需要将我的图像*资源*添加到它

```
 package com.DS;

import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.FloatMath;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class CheatMathActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button button1 = (Button) findViewById(R.id.button1);
    button1.setOnTouchListener(new View.OnTouchListener(){
        public void onTouch(View v) {
   //Opens Algebra Image 
             public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub
                     ImageView view = (ImageView) v;
                     view.setScaleType(ImageView.ScaleType.MATRIX);
                     float scale;

                     dumpEvent(event);
                     // Handle touch events here...

                     Matrix matrix;
                    Matrix savedMatrix;
                    PointF start;
                    Object mode;
                    float oldDist;
                    PointF mid;
                    switch (event.getAction() & event.ACTION_MASK) 
                     {
                         case MotionEvent.ACTION_DOWN:   // first finger down only
                                                             savedMatrix.set(matrix);
                                                             start.set(event.getX(), event.getY());
                                                             Log.d(TAG, "mode=DRAG"); // write to LogCat
                                                             mode = DRAG;
                                                             break;

                         case MotionEvent.ACTION_UP: // first finger lifted

                         case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                                             mode = NONE;
                                                             Log.d(TAG, "mode=NONE");
                                                             break;

                         case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                                             oldDist = spacing(event);
                                                             Log.d(TAG, "oldDist=" + oldDist);
                                                             if (oldDist > 5f) {
                                                                 savedMatrix.set(matrix);
                                                                 midPoint(mid, event);
                                                                 mode = ZOOM;
                                                                 Log.d(TAG, "mode=ZOOM");
                                                             }
                                                             break;

                         case MotionEvent.ACTION_MOVE:

                                                             if (mode == DRAG) 
                                                             { 
                                                                 matrix.set(savedMatrix);
                                                                 matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                                             } 
                                                             else if (mode == ZOOM) 
                                                             { 
                                                                 // pinch zooming
                                                                 float newDist = spacing(event);
                                                                 Log.d(TAG, "newDist=" + newDist);
                                                                 if (newDist > 5f) 
                                                                 {
                                                                     matrix.set(savedMatrix);
                                                                     scale = newDist / oldDist; // setting the scaling of the
                                                                                                 // matrix...if scale > 1 means
                                                                                                 // zoom in...if scale < 1 means
                                                                                                 // zoom out
                                                                     matrix.postScale(scale, scale, mid.x, mid.y);
                                                                 }
                                                             }
                                                             break;
                     }

                     view.setImageMatrix(matrix); // display the transformation on screen

                     return true; // indicate event was handled
                }
                private float spacing(MotionEvent event) 
                {
                    float x = event.getX(0) - event.getX(1);
                    float y = event.getY(0) - event.getY(1);
                    return FloatMath.sqrt(x * x + y * y);
                }

                /*
                 * --------------------------------------------------------------------------
                 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
                 * Description: calculates the midpoint between the two fingers
                 * ------------------------------------------------------------
                 */

                private void midPoint(PointF point, MotionEvent event) 
                {
                    float x = event.getX(0) + event.getX(1);
                    float y = event.getY(0) + event.getY(1);
                    point.set(x / 2, y / 2);
                }

                /** Show an event in the LogCat view, for debugging */
                private void dumpEvent(MotionEvent event); 
                {
                    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
                    StringBuilder sb = new StringBuilder();
                    int action = event.getAction();
                    int actionCode = action & MotionEvent.ACTION_MASK;
                    sb.append("event ACTION_").append(names[actionCode]);

                    if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
                    {
                        sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
                        sb.append(")");
                    }

                    sb.append("[");
                    for (int i = 0; i < event.getPointerCount(); i++) 
                    {
                        sb.append("#").append(i);
                        sb.append("(pid ").append(event.getPointerId(i));
                        sb.append(")=").append((int) event.getX(i));
                        sb.append(",").append((int) event.getY(i));
                        if (i + 1 < event.getPointerCount())
                            sb.append(";");
                    }

                    sb.append("]");
                    Log.d("Touch Events ---------", sb.toString()); 

            }   

    }

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
            // TODO Auto-generated method stub
            return false;
        }

});
    final Button button2 = (Button) findViewById(R.id.button2);
    button2.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
    //Opens Next Subset Image   
        }
    });

}
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
     ImageView view = (ImageView) v;
     view.setScaleType(ImageView.ScaleType.MATRIX);
     float scale;

     dumpEvent(event);
     // Handle touch events here...

     Matrix matrix;
    Matrix savedMatrix;
    PointF start;
    Object mode;
    float oldDist;
    PointF mid;
    switch (event.getAction() & event.ACTION_MASK) 
     {
         case MotionEvent.ACTION_DOWN:   // first finger down only
                                             savedMatrix.set(matrix);
                                             start.set(event.getX(), event.getY());
                                             Log.d(TAG, "mode=DRAG"); // write to LogCat
                                             mode = DRAG;
                                             break;

         case MotionEvent.ACTION_UP: // first finger lifted

         case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                             mode = NONE;
                                             Log.d(TAG, "mode=NONE");
                                             break;

         case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                             oldDist = spacing(event);
                                             Log.d(TAG, "oldDist=" + oldDist);
                                             if (oldDist > 5f) {
                                                 savedMatrix.set(matrix);
                                                 midPoint(mid, event);
                                                 mode = ZOOM;
                                                 Log.d(TAG, "mode=ZOOM");
                                             }
                                             break;

         case MotionEvent.ACTION_MOVE:

                                             if (mode == DRAG) 
                                             { 
                                                 matrix.set(savedMatrix);
                                                 matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                             } 
                                             else if (mode == ZOOM) 
                                             { 
                                                 // pinch zooming
                                                 float newDist = spacing(event);
                                                 Log.d(TAG, "newDist=" + newDist);
                                                 if (newDist > 5f) 
                                                 {
                                                     matrix.set(savedMatrix);
                                                     scale = newDist / oldDist; // setting the scaling of the
                                                                                 // matrix...if scale > 1 means
                                                                                 // zoom in...if scale < 1 means
                                                                                 // zoom out
                                                     matrix.postScale(scale, scale, mid.x, mid.y);
                                                 }
                                             }
                                             break;
     }

     view.setImageMatrix(matrix); // display the transformation on screen

     return true; // indicate event was handled
}
private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/*
 * --------------------------------------------------------------------------
 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
 * Description: calculates the midpoint between the two fingers
 * ------------------------------------------------------------
 */

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}

/** Show an event in the LogCat view, for debugging */
private void dumpEvent(MotionEvent event) 
{
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);

    if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
    {
        sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }

    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) 
    {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }

    sb.append("]");
    Log.d("Touch Events ---------", sb.toString()); 

}
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-12T17:50:20.540

或者使用[TouchImageView](http://github.com/MikeOrtiz/TouchImageView)代替 ImageView。这是一门做得很好的课程，我自己也用过——只要在需要可缩放图像视图的地方加入他的视图即可。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T17:42:13.933

只需在您的活动中添加以下这些方法。此外，您需要按如下方式调用此方法，并且您的活动必须实现`OnTouchListener`。

`imaveViewInstance.setOnTouchListener(this);`

```
 @Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
     ImageView view = (ImageView) v;
     view.setScaleType(ImageView.ScaleType.MATRIX);
     float scale;

     dumpEvent(event);
     // Handle touch events here...

     switch (event.getAction() & event.ACTION_MASK) 
     {
         case MotionEvent.ACTION_DOWN:   // first finger down only
                                             savedMatrix.set(matrix);
                                             start.set(event.getX(), event.getY());
                                             Log.d(TAG, "mode=DRAG"); // write to LogCat
                                             mode = DRAG;
                                             break;

         case MotionEvent.ACTION_UP: // first finger lifted

         case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                             mode = NONE;
                                             Log.d(TAG, "mode=NONE");
                                             break;

         case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                             oldDist = spacing(event);
                                             Log.d(TAG, "oldDist=" + oldDist);
                                             if (oldDist > 5f) {
                                                 savedMatrix.set(matrix);
                                                 midPoint(mid, event);
                                                 mode = ZOOM;
                                                 Log.d(TAG, "mode=ZOOM");
                                             }
                                             break;

         case MotionEvent.ACTION_MOVE:

                                             if (mode == DRAG) 
                                             { 
                                                 matrix.set(savedMatrix);
                                                 matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                             } 
                                             else if (mode == ZOOM) 
                                             { 
                                                 // pinch zooming
                                                 float newDist = spacing(event);
                                                 Log.d(TAG, "newDist=" + newDist);
                                                 if (newDist > 5f) 
                                                 {
                                                     matrix.set(savedMatrix);
                                                     scale = newDist / oldDist; // setting the scaling of the
                                                                                 // matrix...if scale > 1 means
                                                                                 // zoom in...if scale < 1 means
                                                                                 // zoom out
                                                     matrix.postScale(scale, scale, mid.x, mid.y);
                                                 }
                                             }
                                             break;
     }

     view.setImageMatrix(matrix); // display the transformation on screen

     return true; // indicate event was handled
}
private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/*
 * --------------------------------------------------------------------------
 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
 * Description: calculates the midpoint between the two fingers
 * ------------------------------------------------------------
 */

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}

/** Show an event in the LogCat view, for debugging */
private void dumpEvent(MotionEvent event) 
{
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);

    if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
    {
        sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }

    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) 
    {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }

    sb.append("]");
    Log.d("Touch Events ---------", sb.toString());
} 
```

# c# - 如何在不调整可编辑单元格中的编辑框大小的情况下将 DataGrid 中的内容居中？

> ID：10128847
> 
> 赞同：0
> 
> 时间：2012-04-12T17:39:55.433
> 
> 标签：c#, wpf, xaml

我正在使用以下代码让我的数据网格的单元格在中心显示文本：

```
 <Style x:Key="CenteredTextColumn" TargetType="{x:Type DataGridCell}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridCell}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                        <ContentPresenter VerticalAlignment="Center" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="Foreground" Value="Black">                
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FFE3ECF7" Offset="0"/>
                            <GradientStop Color="#FF71DDF9" Offset="1"/>
                            <GradientStop Color="#FF5091DC" Offset="0.546"/>
                        </LinearGradientBrush>
                    </Setter.Value>
            </Setter>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
            </Trigger>
            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                <Setter Property="BorderBrush" Value="{DynamicResource {x:Static DataGrid.FocusBorderBrushKey}}"/>
            </Trigger>                  
        </Style.Triggers>
    </Style> 
```

它工作正常，除了当我编辑单元格的内容时，它看起来像这样：

![文本框太小](../Images/9eefea427e41dbf21f49fd76bfaf9a4e.png)

我可以使用 setter 调整文本框的大小：

```
 <Trigger Property="IsEditing" Value="True">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type DataGridCell}">
                            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                <ContentPresenter VerticalAlignment="Stretch" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>               
            </Trigger> 
```

但这会导致文本框中的文本向上移动：

![发错地方的文字](../Images/1de7c164ac835196947642d8e2bc1a74.png)

如何使文本框在不移动文本的情况下占用整个单元格？

**更新**当我使用以下模板时：

```
<ControlTemplate TargetType="{x:Type DataGridCell}">
                    <Grid VerticalAlignment="Center">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <ContentPresenter VerticalAlignment="Stretch" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                    </Grid>
                </ControlTemplate> 
```

我的网格选择得到了整理：

![在此处输入图像描述](../Images/9c54544ac653382595815092eaa3346c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:03:19.523

将它放在拉伸工作的网格中吗？虽然这会为每个单元格添加一个额外的控件..

```
<ControlTemplate TargetType="{x:Type DataGridCell}">
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="White">
            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                <ContentPresenter VerticalAlignment="Center" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
            </Border>
        </Grid>
    </ControlTemplate> 
```

另外，感谢屏幕截图，DataGrid 的 SelectionUnit 看起来是一个 Row，您的应用程序需要吗？如果不是，则指定 SelectionUnit="Cell" 并强制活动选择的颜色为白色，也将解决问题

# actionscript-3 - 保存时 Flash CS5 没有响应

> ID：10128848
> 
> 赞同：0
> 
> 时间：2012-04-12T17:39:58.087
> 
> 标签：actionscript-3, flash, action, flash-cs5

我有一个越来越大的项目。大意味着库中的大量库资产和非常复杂的文件夹结构。FLA 文件本身为 3,700kb，导出的 SWF 为 630kb……不太大。我做得更大。

从昨天开始，当我保存 FLA 时，会出现保存对话框，然后我在对话框上没有响应，我必须 ctrl-alt-delete 从闪存中删除。昨天一天中至少发生了 5 次。它不是每次都这样做，但是在我第一次打开它之后，它的保存速度会逐渐变慢，然后出现无响应。

我四处搜索，adobe 论坛上有一个关于它的大线程，但没有真正的解决方案。人们说它在 CS5 .5 中是固定的，但这不是我的选择。有没有人经历过这个或有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:04:26.270

我以前经历过这种情况，并在我的图书馆中找到了一个损坏的图像。首先，尝试保存和压缩。

如果 Flash 在此过程中崩溃，或者在您进行常规保存时仍然无法正常工作，请浏览您的库并在库预览打开的情况下一次单击一个图像。库中的一项应该会导致 Flash 冻结，这就是您的问题图像。

重新打开 Flash，隐藏库的预览窗口，然后删除有问题的文件。现在尝试定期保存。如果它仍然崩溃，请对剩余的图像重复上述步骤以查找更多损坏的图像。希望这对您有用，您的里程可能会有所不同。

# git - GIT - 整个更改集在未知点逆转

> ID：10128850
> 
> 赞同：0
> 
> 时间：2012-04-12T17:40:09.063
> 
> 标签：git, github

我遇到了一些难以追踪到底发生了什么的情况。我们有一个“开发”和“主”分支。新的更改从“master”中获取，然后合并到“development”中，然后一旦好我们将新分支合并到“master”中。

在过去几周的某个时候，开发中发生了一系列巨大的变化。我不知道这是怎么发生的，也不知道这怎么可能。无论如何，如果我可以进入文件的历史记录并查看反转它的合并，那就太好了，但它显示的最后一次合并似乎是一年前的。

我能想到的唯一真正的方法是逐个检查提交哈希并将头重置到它们，看看我在哪里。但这似乎不切实际。有更简单的方法吗？

或者有没有办法查看过去的合并，看看哪些文件受到了它的影响？就像当你合并一个分支时，你总是会在控制台中看到哪些文件在哪些行发生了更改。但是在 git 文件历史记录中，大部分内容可能不会显示出来。

还有谁知道为什么会发生这种情况？我已经看到它发生了几次。有时我在合并时会抓住它。就像我将一个新分支合并到另一个分支中一样，我知道我在最后一次提交中只更改了一个文件，但它更改了大量其他文件。Master 分支在大量更新方面落后了大约一年，所以我出于某种原因在考虑，当从 master 创建一个新分支并将其合并到 dev 时，它也会切换所有其他文件。奇怪的是，因为我们总是这样做，而且 99% 的时间只更改更改的文件。我不明白！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:45:38.943

这里有几个 git 技巧可以帮助你。

首先，`git show <commit hash>`将向您展示在特定提交中所做的所有更改。`git blame <filename>`将向您显示一个文件，并逐行告诉您哪些提交更改了该文件。

[添加以回应评论]：

`git diff <ref1>...<ref2>`将显示两次提交之间的总差异。在合并的情况下这有点奇怪，您可能想要做的是类似于`git diff HEAD <merge_parent_1>`and的事情`git diff HEAD <merge_parent_2>`，看看每个分支带来了什么。

最后，如果您有一个已知良好的旧提交（假设您使用 找到了它`git show`），您可以使用`git bisect`单步执行二进制搜索来找到出现问题的提交。

# jquery - iframe 上的飞出菜单

> ID：10128855
> 
> 赞同：0
> 
> 时间：2012-04-12T17:40:23.517
> 
> 标签：jquery, css

`ul`我使用标签 ang jQuery创建了一个弹出菜单。没有问题，然而，用户想要嵌入一个带有视频播放器的 iframe。

不幸的是，iframe 总是位于弹出菜单的顶部。这是一个例子：

[http://jsfiddle.net/9GV7Y/3/](http://jsfiddle.net/9GV7Y/3/)

无论我尝试什么 CSS 技巧，iframe 都拒绝遵守。

有任何想法吗？

**编辑**小提琴在 Firefox 中工作正常，但不是 IE 或 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:01:35.220

我怀疑swf上设置的wmode属性是透明的。这使得 flash 有时会出现在所有其他元素上（无论 z-index 元素有什么）。

我检查了您的代码，并在某些地方发现了 wmode=transparent 。尝试将 wmode=transparent 替换为 wmode=opaque。

# javascript - 通过 Response.Write() 写回一个函数

> ID：10128859
> 
> 赞同：-1
> 
> 时间：2012-04-12T17:40:39.210
> 
> 标签：javascript, asp.net, vb.net

我正在尝试在 aspx 页面中使用 response.write 返回一个 javascript 函数。问题是我返回的函数有很多引号，它们与 repsonse.write 语法冲突。这是一个示例代码：

```
Response.Write("        If hello.StartsWith("H", StringComparison.InvariantCultureIgnoreCase) OrElse hello.StartsWith("W", System.StringComparison.InvariantCultureIgnoreCase) Then") 
```

这给了我一个问题，因为里面的引号会提前切断响应。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:45:10.110

不是最好的方法，[`RegisterClientScriptBlock`](http://msdn.microsoft.com/en-us/library/btf44dc9.aspx)更好，但如果您发出 JavaScript 而不是 VB.NET 代码，这将起作用：

```
Response.Write("<script>alert('test');</script>") 
```

*注意：如果您需要转义字符串，请在 Google 或此站点中进行简单搜索，就可以了。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:54:58.463

```
Use chr(34) for quote as shown below to create a string of js function: 

sJavaScript = sJavaScript & vbTab & vbTab & "if(TheForm."
sJavaScript = sJavaScript & "FieldName" & ".value == " & Chr(34) & Chr(34)
sJavaScript = sJavaScript & ")" & vbCrLf & vbTab & vbTab & vbTab & "{" & vbCrLf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:55:09.137

如果您输出的函数是 javascript，那么一种方法是使用单引号。从 javascript 的角度来看，单引号和双引号对于字符串文字或多或少是可以互换的（尽管我确信在某些情况下这不是真的——我只是不太了解 javascript，无法说出它们是什么）。

```
Response.Write("        If hello.StartsWith('H', ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:01:45.630

您可以在您的 javascript 中用单 qoute 替换双 qoute ，就像在 javascript 中一样 " 和 ' 做同样的事情，c# 不会反对单 qoute 但 RegisterClientScriptBlock 可能是最好的选择。

# javascript - JavaScript 鼠标悬停

> ID：10128865
> 
> 赞同：0
> 
> 时间：2012-04-12T17:41:19.303
> 
> 标签：javascript

我为一个广告位建立了主页接管。我的问题：当我将鼠标悬停在背景区域时，鼠标指针不会改变。关于如何做到这一点的任何想法？我的代码在下面...链接有效，但鼠标悬停无效：

```
<script type='text/javascript'>

    (function($){
    $(document).ready(function(){
$(document).click(function(e){
        if(e.target.nodeName == "HTML" || e.target.nodeName == "BODY"){
         document.body.style.cursor = 'wait';
     window.open('http://www.google.com/');
   }
})
   })
 })(jQuery);
 </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:43:40.420

你可以用 CSS 做到这一点：

```
element {
    cursor: pointer;
} 
```

看这个[例子](http://jsfiddle.net/jackdent/eRxXD/)

# c# - 从 XML 文件动态创建 SQL 表

> ID：10128866
> 
> 赞同：0
> 
> 时间：2012-04-12T17:41:19.830
> 
> 标签：c#, xml, linq, stored-procedures

我想在 C# 中使用 Linq to XML 将 xml 文件加载到 xml 对象模型中。然后，我想基于 xml 文件动态构建 SQL 数据库结构（使用存储过程）。这是 xml 文件的样子：

```
<root>
    <level 1>
       <level 2>
          <level 3>
             "Requirement abc"
          </level 3>
       </level 2>
          "Requirement xyz"
          <level 3>
             "Requirement efg"
          </level 3>
       <level 2>
          <level 3>
             <level 4>
               "Requirement mno"
             </level 4>
          </level 3>
      </level 2>
          <level 3>
             <level 4>
                "Requirement hij"
             </level 4>
          </level 3>
      <level 2>
          <level 3>
             <level 4>
                "Requirement klm"
             </level 4>
          </level 3>
      </level 2>
    </level 1>
</root> 
```

想法是将这个 xml 文件读入内存，对其进行分析，然后使用存储过程在 SQL 数据库中重新创建结构。有人对执行此操作的最佳方式有什么建议吗？另外，我希望使用 c# 中的代码片段来读取这个 xml 文件，然后遍历它（可能递归地）以找出结构。我不确定是否可以传入整个xml文档对象，或者是否必须将文档分解为参数然后以这种方式传递给sp。我将不胜感激任何建议（和 c# 代码）！

# google-docs-api - Google 文档查看器的 API

> ID：10128871
> 
> 赞同：6
> 
> 时间：2012-04-12T17:41:35.497
> 
> 标签：google-docs-api

请参考来自[Google Documents List API Group的以下](https://groups.google.com/forum/?fromgroups#!topic/google-documents-list-api/HOvorImoAM8)[线程](https://groups.google.com/forum/?fromgroups#!topic/google-documents-list-api/HOvorImoAM8)，有人请给我建议一个解决方案。

```
 Hi again Jags,

    Sorry, I missed one thing, you might be able to use the embed link, i.e. that link with rel http://schemas.google.com/docs/2007#embed. That will give you a link to embed the resource.

    Regards

    On Tue, Mar 27, 2012 at 10:59 AM, Ali Afshar wrote:
    Hi Jags,

    Sorry, there is no real API there as such to do what you want to achieve. You should probably export it as a format that you can embed in your page.

    Regards

    On Sat, Mar 17, 2012 at 3:18 AM, Jags wrote:
    Hi,

    Can someone help me in figuring out if there is an API available to use Google Docs Viewer where I want to upload a document and it should give me a Google Docs View Url for the document so that I can embed it in our website. Currently in Docs Viewer, the only option I find is viewing a publicly available document by passing the url for it as a param as in http://docs.google.com/viewer?url=xxxxxxxxxx. Is this the only way that I can view in Google Docs. Please someone assist if I missing something.
  If this isn't possible by Docs Viewer is it supported in Google Docs where I'll upload it to user's google account and thereafter even the author of the document should have just a VIEW only option for the document.

    TIA,
    Jagadeesh 
```

现在有人可以提供一个 Java 示例代码来将“xmlns”设置为文档条目的“http://schemas.google.com/docs/2007#embed”。我收到一个 InvalidEntryException。 所以请建议我一个可能的解决方案来解决这个问题。`com.google.gdata.util.InvalidEntryException: Invalid request URI GData`invalidRequestUri`Invalid request URI`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:08:14.743

+1 to this one

> Blockquote Now can someone please provide me a Java sample code to set the 'xmlns' as 'http://schemas.google.com/docs/2007#embed' to the document entry. I am getting an InvalidEntryException. com.google.gdata.util.InvalidEntryException: Invalid request URI GDatainvalidRequestUriInvalid request URI So please suggest me a possible solution to resolve this.

After reading this [thread](https://groups.google.com/forum/?fromgroups#!topic/google-documents-list-api/HOvorImoAM8), even I'm looking for a java example ob how to set the 'xmlns' as 'http://schemas.google.com/docs/2007#embed' to the document entry.

# css - 页脚扩展颜色css

> ID：10128875
> 
> 赞同：0
> 
> 时间：2012-04-12T17:42:10.723
> 
> 标签：css

我对最后一分钟的更改请求有疑问，基本上客户决定更改页脚颜色，我找不到可行的解决方案，在大屏幕上显示时在孔位上扩展它并且不剪切颜色并返回正文颜色。

[网站](http://stage2.andresmijares.com/)

我想做一些添加推送类的事情，但是我打破了网站的响应能力，我将不胜感激任何建议。我不希望将 html 或正文颜色更改为白色，我想让它按原样工作。

感谢先进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:53:18.653

所以基本上你的目标是确保整个页脚区域（从页脚顶部到窗口底部）是白色的？

如果这就是您想要的，那么恐怕更改`<body>`确实是您最好的选择（您应该始终假设这`<body>`将决定页脚背景）。

您需要做的是将页脚*上方*的所有内容包装在容器 div 中，然后将您的身体样式切换到容器。好消息是，根据您网站的模板化方式，这应该只是调整一两个布局文件的问题。

***最终结果是，背景`<body>`给人一种页脚延伸到窗口底部的错觉。***

像这样...

```
<body>
    <div id="container">
        <!-- all your stuff -->
    </div><!-- #container -->
    <footer>
        <!--footer stuff-->
    </footer>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:50:44.227

该网站看起来很不错。

不幸的是，我认为您无法更改页脚背景颜色及其下方的所有内容，而无需更改正文颜色，您只需添加一个在页眉 TAG 之前开始并在页脚之前结束的包装器即可轻松解决标签。

```
<div id="wrapper">
<header>...</header>
....
</div>
<footer>...</footer> 
```

我知道这是你想要避免的，但我不认为有任何“更好”的解决方案，任何其他解决方案都会暗示 Javascript 使页脚增长，这并不好：P

祝你好运

# asp.net - 在 WCF 中同时支持 Mtom 和 Text 作为 MessageEncoding

> ID：10128887
> 
> 赞同：3
> 
> 时间：2012-04-12T17:42:52.857
> 
> 标签：asp.net, wcf, iis, wcf-binding, mtom

我有一个 WCF 服务，它有一个带有以下签名的方法：

```
object GetCommand(Guid apiKey, SocialService service, string name, object argument); 
```

它使用对象作为返回类型和最后一个参数的原因是因为它应该可以将任何类型作为参数传递并返回任何类型。

无论如何，我正在传递一个对象，其中包含以下属性：

```
public byte[] Photo { get; set; } 
```

为了启用大消息，我想开始使用 Mtom，而我之前使用纯文本作为 MessageEncoding 类型。

问题是，我希望它向后兼容，因此当前已经配置的客户端应该继续使用纯文本编码，而新客户端应该能够通过 web.config 使用 Mtom。

我的问题是：是否可以在默认情况下（现有客户端）继续使用纯文本作为 MessageEncoding 并同时提供 Mtom 编码？

我已经尝试了一些配置，比如定义具有不同绑定配置的多个端点，但我无法让它工作：

**服务器**

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpTextBinding_SocialProxy" />
            <binding name="BasicHttpMtomBinding_SocialProxy" maxReceivedMessageSize="5242880" messageEncoding="Mtom">
                <readerQuotas maxStringContentLength="655360" maxArrayLength="1310720" maxNameTableCharCount="1310720" maxBytesPerRead="327680" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <services>
        <service name="SocialProxyService">
            <endpoint name="BasicEndpoint_SocialProxy" address="" contract="InfoCaster.SocialProxy.ISocialProxy" binding="basicHttpBinding" bindingConfiguration="BasicHttpTextBinding_SocialProxy" />
            <endpoint name="MtomEndpoint_SocialProxy" address="" contract="InfoCaster.SocialProxy.ISocialProxy" binding="basicHttpBinding" bindingConfiguration="BasicHttpMtomBinding_SocialProxy" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true" />
                <!-- To receive exception details in faults for debugging purposes, set the value below to true. Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

**客户**

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_SocialProxy" messageEncoding="Mtom" />
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://socialproxy.local/socialproxy.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_SocialProxy"
            contract="Webservice.SocialProxy" name="BasicHttpBinding_SocialProxy" />
    </client>
</system.serviceModel> 
```

**问题是：**

如果我没有在客户端设置 Mtom messageEncoding，那么一切都通过纯文本进行。但是当我将它设置为使用 Mtom 时，我会得到一个异常：

```
The remote server returned an error: (415) Cannot process the message because the content type 'multipart/related; type="application/xop+xml";start="<http://tempuri.org/0>";boundary="uuid:65a6b418-8eb3-4c76-b4c0-ea3486a56892+id=2";start-info="text/xml"' was not the expected type 'text/xml; charset=utf-8'.. 
```

任何人都可以帮助我吗？:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:06:25.363

如果要添加新端点（用于较新的客户端），则该端点需要位于不同的地址中。由于您没有收到任何错误，我想您在元素的`name`属性中的名称不正确。`<service>`请记住，name 属性应包含服务类的*完全限定名称*。如果您的服务类位于 namespace `InfoCaster.SocialProxy`，则您的服务配置应如下定义：

```
<services> 
    <service name="InfoCaster.SocialProxy.SocialProxyService"> 
        <endpoint name="BasicEndpoint_SocialProxy" address="" contract="InfoCaster.SocialProxy.ISocialProxy" binding="basicHttpBinding" bindingConfiguration="BasicHttpTextBinding_SocialProxy" /> 
        <endpoint name="MtomEndpoint_SocialProxy" address="newClients" contract="InfoCaster.SocialProxy.ISocialProxy" binding="basicHttpBinding" bindingConfiguration="BasicHttpMtomBinding_SocialProxy" /> 
    </service> 
</services> 
```

客户会有类似的东西

```
<client>  
    <endpoint address="http://socialproxy.local/socialproxy.svc/newClients"  
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_SocialProxy"  
        contract="Webservice.SocialProxy" name="BasicHttpBinding_SocialProxy" />  
</client> 
```

现在，如果您想要一个*可以*同时支持文本和 MTOM 的端点，即发送文本的客户端接收文本响应，而发送 MTOM 的客户端接收回 MTOM 响应，您仍然可以这样做。您需要一个自定义编码器，我在[http://blogs.msdn.com/b/carlosfigueira/archive/2011/02/16/using-mtom-in-a-wcf-custom-的帖子中写了一个编码器.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/02/16/using-mtom-in-a-wcf-custom-encoder.aspx)。

# google-maps-api-3 - 将 Google Maps InfoBox 用于存储在数组中的点

> ID：10128892
> 
> 赞同：0
> 
> 时间：2012-04-12T17:43:24.267
> 
> 标签：google-maps-api-3

我已经在一个相当简单的应用程序中成功使用了 InfoBox，但我正在努力让它在稍微复杂一点的东西上工作。当然，我错过了一些简单的东西。

目的是显示带有酒店和最近机场的地图。然后信息框显示酒店的名称（非常简单：没问题）和服务机场的航班列表（问题！）。酒店详细信息作为 URL 中的参数传递。机场详细信息是存储在脚本中的数组。

我遇到的问题是，当我单击机场图标时，地图会跳转到机场数组中的最后一个机场，并显示最后一个机场的信息框内容。

您可以在[http://http://new.littlehotels.co.uk/maps/map_airport_spain.php?lat=39.755688&lng=2.636354&zoom=9&hotel=Hotel%20Colorado 看到问题](http://http://new.littlehotels.co.uk/maps/map_airport_spain.php?lat=39.755688&lng=2.636354&zoom=9&hotel=Hotel%20Colorado)。

代码是：

```
<?php 
$hotel = $_GET['hotel'];
?>

<!DOCTYPE html>
<html>
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
    <title>Little Hotels - Google Map</title>
<meta name="description" content="Little Hotels provides maps showing the location of hotels, using Google Maps to create both a street/road map and a satellite image.">
<meta name="keywords" content="Little Hotels, Little Hotels of Spain, Spain, Little Hotels of Morocco, Morocco, Little Hotels of France, France, mainland spain, balearic, balearics, canary, canaries, small, hotel, hotels, map, google map, holiday, holidays">
<style type="text/css">
html { height: 100% }
body{ height: 100%; margin: 0; padding: 0; font-family: Arial, Helvetica, sans-serif; font-size:12px; color:#333333;}
a:link, a:visited, a:hover {color: #FF6600; text-decoration: none; font-weight: bold;}
h1{font-size: 16px; color: #2B8CB9; font-weight: bold;}
#content{padding: 0 5px 0; width: 640px;}
#map_canvas { height: 100%; font-family:Helvetica, Arial, sans-serif; font-size:12px; font-weight:bold; color:#4d6eb0;}
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
<script type="text/javascript" src="../js/infobox.js"></script>
<script type="text/javascript" src="../js/downloadxml.js"></script>
<script type="text/javascript"> 
//<![CDATA[
     // global "map" variable
      var map = null;

  var hotelimage = new google.maps.MarkerImage('../images/hotel_icon.gif',
      new google.maps.Size(32, 37),
      new google.maps.Point(0,0),
      new google.maps.Point(16, 35));
  var shadow = new google.maps.MarkerImage('../images/hotel_shadow.png',
      new google.maps.Size(51, 37),
      new google.maps.Point(0,0),
      new google.maps.Point(16, 35));

// A function to create the markers and set up the event window function 
function createMarker(latlng, hotel) {
    var contentString = hotel;
    var marker = new google.maps.Marker({
        map: map,
        position: latlng,
        icon: image,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });

    google.maps.event.addListener(marker, 'click', function() {
        var ib = new InfoBox(ibOptions);
        boxText.innerHTML = contentString;
        ib.open(map, marker);
        });
}

// This function picks up the click and opens the corresponding info window
function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

// InfoBox
 var boxText = document.createElement("div");
        boxText.style.cssText = "border: 1px solid #4d6eb0; margin-top: 8px; background: white; padding: 5px;";

        var ibOptions = {
                 content: boxText
                ,disableAutoPan: false
                ,maxWidth: 0
                ,pixelOffset: new google.maps.Size(10, -50)
                ,zIndex: null
                ,boxStyle: { 
                  width: "160px"
                 }
                ,closeBoxMargin: "10px 2px 2px 2px"
                ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
                ,infoBoxClearance: new google.maps.Size(1, 1)
                ,isHidden: false
                ,pane: "floatPane"
                ,enableEventPropagation: false
        };
////////////////////////7

function initialize() {
      var lat = 0;
      var lng = 0;
      var zoom = 0;
      var hotelname = 0;
      var query = location.search.substring(1);
      var pairs = query.split("&");
      for (var i=0; i<pairs.length; i++) {
    var pos = pairs[i].indexOf("=");
    var argname = pairs[i].substring(0,pos).toLowerCase();
    var value = pairs[i].substring(pos+1);
        if (argname == "lat") {lat = parseFloat(value);}
        if (argname == "lng") {lng = parseFloat(value);}
        if (argname == "zoom") {zoom = parseInt(value);}
        if (argname == "hotel") {hotelname = unescape(value);}
      }
    var thisLatlng = new google.maps.LatLng(lat, lng);
  var myOptions = {
center: thisLatlng,
zoom: zoom,
mapTypeId: google.maps.MapTypeId.ROADMAP,
   streetViewControl: false,
   zoomControl: true,
   zoomControlOptions: {
    style: google.maps.ZoomControlStyle.SMALL
   }
   }

   var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);

  setMarkers(map, airports);

//////////////////////
  var hotelmarker = new google.maps.Marker({
      position: thisLatlng,
      map: map,
      icon: hotelimage,
      shadow: shadow,
      zIndex: 9999
  });
      google.maps.event.addListener(hotelmarker, 'click', function() {
        var ib = new InfoBox(ibOptions);
        boxText.innerHTML = hotelname;
        ib.open(map, hotelmarker);
        });

////////////////////

  google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
        });

}

var airports = [
// This section was common to airport_float.php and flights.php, may still go with flights.php
[38.287242,-0.557299,'<b><u>Flights Guide - Alicante airport</u></b><br><table class="verdana"><tr><td width="135">Belfast </td><td>Aer Lingus, EasyJet, Flybe, Thomson </td></tr><tr><td>Birmingham </td><td>bmibaby, Monarch, Ryanair, Thomson </td></tr><tr><td>Blackpool </td><td>Jet2 </td></tr><tr><td>Bournemouth </td><td>Ryanair </td></tr><tr><td>Bristol </td><td>EasyJet, Ryanair, Thomson </td></tr><tr><td>Cardiff </td><td>bmibaby, Thomson </td></tr><tr><td>Cork </td><td>Aer Lingus </td></tr><tr><td>Doncaster Sheffield </td><td>Ryanair, Thomson </td></tr><tr><td>Dublin </td><td>Aer Lingus, Flybe, Ryanair </td></tr><tr><td>Durham Tees Valley </td><td>Ryanair, Thomson </td></tr><tr><td>East Midlands </td><td>bmibaby, Jet2, Ryanair, Thomson </td></tr><tr><td>Edinburgh </td><td>EasyJet, Flybe, Ryanair </td></tr><tr><td>Exeter </td><td>Flybe </td></tr><tr><td>Glasgow </td><td>EasyJet, Flybe, Jet2, Ryanair, Thomson </td></tr><tr><td>Guernsey </td><td>Flybe </td></tr><tr><td>Isle of Man </td><td>Flybe </td></tr><tr><td>Jersey </td><td>Flybe </td></tr><tr><td>Kerry </td><td>Ryanair </td></tr><tr><td>Knock </td><td>Ryanair </td></tr><tr><td>Leeds Bradford </td><td>Jet2, Flybe, Ryanair </td></tr><tr><td>Liverpool </td><td>EasyJet, Ryanair, </td></tr><tr><td>London Gatwick </td><td>EasyJet, Monarch, Ryanair, Thomson </td></tr><tr><td>London Luton </td><td>EasyJet, Monarch </td></tr><tr><td>London Stansted </td><td>airberlin, EasyJet, Ryanair </td></tr><tr><td>Manchester </td><td>EasyJet, Flybe, Jet2, Monarch, Thomson </td></tr><tr><td>Newcastle </td><td>EasyJet, Flybe, Jet2, Thomson </td></tr><tr><td>Newquay </td><td>Ryanair </td></tr><tr><td>Norwich </td><td>Thomson </td></tr><tr><td>Southampton </td><td>Flybe </td></tr></table>'],
[36.848101,-2.371502,'<b><u>Flights Guide - Almeria airport</u></b><br><table class="verdana"><tr><td width="130">Birmingham </td><td>Monarch </td></tr><tr><td>East Midlands </td><td>bmibaby </td></tr><tr><td>London Gatwick </td><td>EasyJet </td></tr><tr><td>London Stansted </td><td>Ryan Air </td></tr><tr><td>Manchester </td><td>Monarch </td></tr></table>'],
[43.559434,-6.032181,'<b><u>Flights Guide - Asturias (Oviedo) airport</u></b><br><table class="verdana"><tr><td width="130">Stansted</td><td>EasyJet</td></tr></table>'],
[41.29896,2.076931,'<b><u>Flights Guide - Barcelona airport</u></b><br><table class="verdana"><tr><td width="130">Belfast </td><td>Aer Lingus, EasyJet </td></tr><tr><td>Bristol </td<td>EasyJet </td></tr><tr><td>Cork </td><td>Aer Lingus </td></tr><tr><td>Doncaster Sheffield </td><td>EasyJet </td></tr><tr><td>Dublin </td><td>Aer Lingus, Ryanair </td></tr><tr><td>East Midlands </td><td>bmibaby </td></tr><tr><td>Edinburgh </td><td>Ryanair </td></tr><tr><td>Leeds Bradford </td><td>Jet2, Ryanair </td></tr><tr><td>Liverpool </td><td>EasyJet </td></tr><tr><td>London City </td><td>BA Cityflyer </td></tr><tr><td>London Gatwick </td><td>EasyJet </td></tr><tr><td>London Heathrow </td><td>British Airways </td></tr><tr><td>London Luton </td><td>EasyJet </td></tr><tr><td>London Stansted </td><td>airberlin, EasyJet </td></tr><tr><td>Manchester </td><td>Monarch </td></tr><tr><td>Newcastle </td><td>EasyJet </td></tr></table>'],
[43.305194,-2.906055,'<b><u>Flights Guide - Bilbao airport</u></b><br><table class="verdana"><tr><td width="130">Dublin </td><td>Aer Lingus </td></tr><tr><td>London Heathrow </td><td>Vueling </td></tr><tr><td>London Stansted </td><td>EasyJet </td></tr></table>'],
[36.152638,-5.348368,'<b><u>Flights Guide - Gibraltar airport</u></b><br><table class="verdana"><tr><td width="130">London Gatwick </td><td>EasyJet </td></tr><tr><td>London Heathrow </td><td>British Airways </td></tr><tr><td>Liverpool </td><td>EasyJet </td></tr><tr><td>London Luton </td><td>Monarch </td></tr><tr><td>Manchester </td><td>Monarch </td></tr></table>'],
[41.898827,2.765465,'<b><u>Flights Guide - Girona airport</u></b><br><table class="verdana"><tr><td width="130">Birmingham </td><td>Ryanair,Thomson </td></tr><tr><td>Bournemouth </td><td>Ryanair </td></tr><tr><td>Bristol </td><td>Ryanair </td></tr><tr><td>Dublin </td><td>Ryanair </td></tr><tr><td>East Midlands </td><td>Ryanair </td></tr><tr><td>Glasgow </td><td>Ryanair </td></tr><tr><td>Liverpool </td><td>Ryanair </td></tr><tr><td>London Gatwick </td><td>Ryanair,Thomson </td></tr><tr><td>London Luton </td><td>Ryanair </td></tr><tr><td>London Stansted </td><td>Ryanair </td></tr><tr><td>Manchester </td><td>Thomson </td></tr><tr><td>Newcastle </td><td>Ryanair </td></tr></table>'],
[37.185963,-3.776894,'<b><u>Flights Guide - Granada airport</u></b><br><table class="verdana"><tr><td>No flights from UK or Ireland at the moment</td></tr></table>'],
[38.876334,1.367626,'<b><u>Flights Guide - Ibiza airport</u></b><br><table class="verdana"><tr><td width="130">Aberdeen </td><td>Thomson </td></tr><tr><td width="130">Belfast </td><td>EasyJet, Jet2, Thomson </td></tr><tr><td>Birmingham </td><td>Monarch, Ryanair, Thomson </td></tr><tr><td>Bournemouth </td><td>Ryanair, Thomson </td></tr><tr><td>Bristol </td><td>EasyJet, Thomson </td></tr><tr><td>Cardiff </td><td>Bmibaby, Thomson </td></tr><tr><td>Doncaster Sheffield </td><td>Thomson </td></tr><tr><td>Dublin </td><td>Aer Lingus, Ryanair </td></tr><tr><td>East Midlands </td><td>Bmibaby, Ryanair, Thomson </td></tr><tr><td>Edinburgh </td><td>Jet2, Thomson </td></tr><tr><td>Exeter </td><td>Thomson </td></tr><tr><td>Glasgow </td><td>EasyJet, Ryanair, Thomson </td></tr><tr><td>Leeds Bradford </td><td>Jet2, Ryanair </td></tr><tr><td>Liverpool </td><td>EasyJet, Ryanair </td></tr><tr><td>London Gatwick </td><td>EasyJet, Monarch, Thomson </td></tr><tr><td>London Luton </td><td>EasyJet, Thomson </td></tr><tr><td>London Stansted </td><td>EasyJet, Ryanair, Thomson </td></tr><tr><td>Manchester </td><td>Jet2, Monarch, Thomson </td></tr><tr><td>Newcastle </td><td>EasyJet, Jet2, Thomson </td></tr><tr><td>Norwich </td><td>Thomson </td></tr></table>'],
[36.750164,-6.06411,'<b><u>Flights Guide - Jerez airport</u></b><br><table class="verdana"><tr><td width="130">London Stansted</td><td>Ryanair</td></tr></table>'],
[43.302071,-8.380938,'<b><u>Flights Guide - La Coruña airport</u></b><br><table class="verdana"><tr><td width="130">London Heathrow</td><td>Vueling</td></tr></table>'],
[40.46889,-3.56884,'<b><u>Flights Guide - Madrid airport</u></b><br><table class="verdana"><tr><td width="130">Bristol </td><td>EasyJet </td></tr><tr><td>Dublin </td><td>Aer Lingus, Ryan Air </td></tr><tr><td>Edinburgh </td><td>EasyJet </td></tr><tr><td>Liverpool </td><td>EasyJet </td></tr><tr><td>London City </td><td>BA Cityflyer </td></tr><tr><td>London Gatwick </td><td>EasyJet, Ryanair </td></tr><tr><td>London Heathrow </td><td>British Airways, Iberia </td></tr><tr><td>London Luton </td><td>EasyJet </td></tr><tr><td>London Stansted </td><td>Ryanair </td></tr></table>'],
[36.675578,-4.494438,'<b><u>Flights Guide - Malaga airport</u></b><br><table class="verdana"><tr><td width="130">Belfast </td><td>Aer Lingus, EasyJet, Flybe, Thomson </td></tr><tr><td>Birmingham </td><td>bmibaby, Monarch, Ryanair, Thomson </td></tr><tr><td>Blackpool </td><td>Jet2 </td></tr><tr><td>Bournemouth </td><td>Ryanair, Thomson </td></tr><tr><td>Bristol </td><td>EasyJet, Ryanair, Thomson </td></tr><tr><td>Cardiff </td><td>bmibaby, Thomson </td></tr><tr><td>Cork </td><td>Aer Lingus, Ryanair </td></tr><tr><td>Doncaster Sheffield </td><td>Thomson </td></tr><tr><td>Dublin </td><td>Aer Lingus, Flybe, Ryanair </td></tr><tr><td>East Midlands </td><td>bmibaby, Ryanair, Thomson </td></tr><tr><td>Edinburgh </td><td>Flybe, Jet2, Ryanair </td></tr><tr><td>Exeter </td><td>Flybe </td></tr><tr><td>Glasgow </td><td>EasyJet, Flybe, Ryanair, Thomson </td></tr><tr><td>Guernsey </td><td>Flybe </td></tr><tr><td>Jersey </td><td>Flybe </td></tr><tr><td>Leeds Bradford </td><td>Flybe, Jet2, Ryanair </td></tr><tr><td>Liverpool </td><td>EasyJet, Ryanair </td></tr><tr><td>London Gatwick </td><td>airberlin, Aer Lingus, EasyJet, Monarch, Thomson </td></tr><tr><td>London Heathrow </td><td>British Airways </td></tr><tr><td>London Luton </td><td>EasyJet, Monarch, </td></tr><tr><td>London Stansted </td><td>EasyJet, Ryanair </td></tr><tr><td>Manchester </td><td>EasyJet, Flybe, Monarch, Jet2, Thomson </td></tr><tr><td>Newcastle </td><td>EasyJet, Flybe, Jet2, Thomson </td></tr><tr><td>Shannon </td><td>Ryanair </td></tr><tr><td>Southampton </td><td>Flybe </td></tr></table>'],
[39.549059,2.731476,'<b><u>Flights Guide - Mallorca airport (Palma de Mallorca)</u></b><br><table class="verdana"><tr><td width="135">Aberdeen </td><td>Thomson </td></tr><tr><td>Belfast </td><td>EasyJet, Jet2, Thomson </td></tr><tr><td>Birmingham </td><td>bmibaby, Monarch, Ryanair, Thomson </td></tr><tr><td>Blackpool </td><td>Jet2 </td></tr><tr><td>Bournemouth </td><td>Ryanair, Thomson </td></tr><tr><td>Bristol </td><td>EasyJet, Ryanair, Thomson </td></tr><tr><td>Cardiff </td><td>Bmibaby, Thomson </td></tr><tr><td>Cork </td><td>Aer Lingus, Thomson </td></tr><tr><td>Derry </td><td>Thomson </td></tr><tr><td>Dublin </td><td>Aer Lingus, Ryanair, Thomson </td></tr><tr><td>Doncaster Sheffield </td><td>EasyJet, Thomson </td></tr><tr><td>Durham Tees Valley </td><td>Thomson </td></tr><tr><td>East Midlands </td><td>bmibaby, Jet2, Ryanair, Thomson </td></tr><tr><td>Edinburgh </td><td>EasyJet, Flybe, Jet2, Ryanair, Thomson </td></tr><tr><td>Exeter </td><td>Flybe, Thomson </td></tr><tr><td>Glasgow </td><td>EasyJet, Flybe, Jet2, Ryanair, Thomson </td></tr><tr><td>Guernsey </td><td>Flybe </td></tr><tr><td>Humberside </td><td>Thomson </td></tr><tr><td>Jersey </td><td>Flybe </td></tr><tr><td>Leeds Bradford </td><td>Flybe, Jet2, Ryanair, Thomson </td></tr><tr><td>Liverpool </td><td>EasyJet, Ryanair </td></tr><tr><td>London Gatwick </td><td>airberlin, EasyJet, Monarch, Thomson </td></tr><tr><td>London Luton </td><td>EasyJet, Monarch, Thomson </td></tr><tr><td>London Stansted </td><td>airberlin, EasyJet, Ryanair, Thomson </td></tr><tr><td>Manchester </td><td>bmibaby, EasyJet, Flybe, Jet2, Monarch, Thomson </td></tr><tr><td>Newcastle </td><td>EasyJet, Flybe, Jet2, Thomson </td></tr><tr><td>Norwich </td><td>Thomson </td></tr><tr><td>Shannon </td><td>Ryanair, Thomson </td></tr><tr><td>Southampton </td><td>Flybe, Thomson </td></tr></tr></table>'],
[39.864821,4.226303,'<b><u>Flights Guide - Menorca airport (Mahon)</u></b><br><table class="verdana"><tr><td width="135">Aberdeen </td><td>Thomson </td></tr><tr><td>Belfast </td><td>Jet2 </td></tr><tr><td>Birmingham </td><td>Monarch Thomson </td></tr><tr><td>Bristol </td><td>EasyJet, Thomson </td></tr><tr><td>Cardiff </td><td>Bmibaby, Thomson </td></tr><tr><td>Doncaster Sheffield </td><td>Thomson </td></tr><tr><td>East Midlands </td><td>bmibaby, Thomson </td></tr><tr><td>Edinburgh </td><td>Jet2 </td></tr><tr><td>Exeter </td><td>Thomson </td></tr><tr><td>Glasgow </td><td>Thomson </td></tr><tr><td>Leeds Bradford </td><td>Jet2 </td></tr><tr><td>Liverpool </td><td>EasyJet </td></tr><tr><td>London Gatwick </td><td>EasyJet, Monarch, Thomson </td></tr><tr><td>London Luton </td><td>EasyJet, Monarch, Thomson </td></tr><tr><td>London Stansted </td><td>Thomson </td></tr><tr><td>Manchester </td><td>EasyJet, Monarch, Thomson </td></tr><tr><td>Newcastle </td><td>EasyJet, Jet2, Thomson </td></tr><tr><td>Norwich </td><td>Thomson </td></tr></table>'],
[37.775192,-0.817623,'<b><u>Flights Guide - Murcia airport</u></b><br><table class="verdana"><tr><td width="130">Belfast </td><td>Jet2 </td></tr><tr><td>Birmingham </td><td>bmibaby, Ryanair </td></tr><tr><td>Blackpool </td><td>Jet2 </td></tr><tr><td>Bournemouth </td><td>Ryanair </td></tr><tr><td>Bristol </td><td>EasyJet </td></tr><tr><td>Cardiff </td><td>bmibaby </td></tr><tr><td>Dublin </td><td>Ryanair </td></tr><tr><td>East Midlands </td><td>Ryanair </td></tr><tr><td>Edinburgh </td><td>Jet2 </td></tr><tr><td>Glasgow </td><td>Ryanair </td></tr><tr><td>Leeds Bradford </td><td>Jet2, Ryanair </td></tr><tr><td>Liverpool </td><td>Ryanair </td></tr><tr><td>London Gatwick </td><td>EasyJet </td></tr><tr><td>London Luton </td><td>Ryanair </td></tr><tr><td>London Stansted </td><td>Ryanair </td></tr><tr><td>Manchester </td><td>Jet2 </td></tr><tr><td>Newcastle </td><td>EasyJet, Jet2 </td></tr></table>'],
[41.147509,1.156311,'<b><u>Flights Guide - Reus airport</u></b><br><table class="verdana"><tr><td width="130">Belfast </td><td>Thomson </td></tr><tr><td>Birmingham </td><td>Ryanair, Thomson </td></tr><tr><td>Bristol </td><td>Ryanair, Thomson </td></tr><tr><td>Cardiff </td><td>Thomson </td></tr><tr><td>Cork </td><td>Thomson </td></tr><tr><td>Derry </td><td>Thomson </td></tr><tr><td>Doncaster Sheffield </td><td>Thomson </td></tr><tr><td>Dublin </td><td>Ryanair, Thomson </td></tr><tr><td>East Midlands </td><td>Ryanair, Thomson </td></tr><tr><td>Glasgow </td><td>Ryanair, Thomson </td></tr><tr><td>Liverpool </td><td>Ryanair </td></tr><tr><td>London Gatwick </td><td>Thomson </td></tr><tr><td>London Luton </td><td>Ryanair, Thomson </td></tr><tr><td>London Stansted </td><td>Ryanair </td></tr><tr><td>Manchester </td><td>Jet2, Thomson </td></tr><tr><td>Newcastle </td><td>Thomson </td></tr><tr><td>Shannon </td><td>Thomson </td></tr></table>'],
[43.423315,-3.824015,'<b><u>Flights Guide - Santander airport</u></b><br><table class="verdana"><tr><td width="130">Dublin</td><td>Ryanair</td></tr><tr><td>London Stansted</td><td>Ryanair</td></tr></table>'],
[42.898604,-8.420506,'<b><u>Santiago de Compostela airport</u></b><br><table class="verdana"><tr><td width="130">Dublin</td><td>Aer Lingus</td></tr><tr><td>London Stansted</td><td>Ryanair</td></tr></table>'],
[37.423139,-5.899572,'<b><u>Flights Guide - Seville airport</u></b><br><table class="verdana"><tr><td width="130">Bristol </td><td>Ryanair </td></tr><tr><td>Dublin </td><td>Ryanair </td></tr><tr><td>Liverpool </td><td>Ryanair </td></tr><tr><td>London Gatwick </td><td>Ryanair </td></tr><tr><td>London Stansted </td><td>Ryanair </td></tr><tr><td>London Heathrow </td><td>Vueling </td></tr></table>'],
[39.492119,-0.476704,'<b><u>Flights Guide - Valencia airport</u></b><br><table class="verdana"><tr><td width="130">Bristol </td><td>EasyJet, Ryanair </td></tr><tr><td>Dublin </td><td>Ryanair </td></tr><tr><td>East Midlands </td><td>Ryanair </td></tr><tr><td>London Gatwick </td><td>EasyJet </td></tr><tr><td>London Stansted </td><td>Ryanair </td></tr></table>'],
[41.70701,-4.846344,'<b><u>Flights Guide - Valladolid airport</u></b><br><table class="verdana"><tr><td width="130">Stansted</td><td>Ryanair</td></tr></table>'],
[42.883134,-2.730618,'<b><u>Flights Guide - Vitoria airport</u></b><br><table class="verdana"><tr><td>No flights from UK or Ireland at the moment</td></tr></table>'],
[41.663359,-1.008167,'<b><u>Flights Guide - Zaragoza airport</u></b><br><table class="verdana"><tr><td width="130">Stansted</td><td>Ryanair</td></tr></table>']
// End of common section
];

function setMarkers(map, locations) {
var airimage = new google.maps.MarkerImage(
  '../images/air_icon.png',
      new google.maps.Size(32, 37),
      new google.maps.Point(0,0),
      new google.maps.Point(16, 35));

var airshadow = new google.maps.MarkerImage(
  '../images/hotel_shadow.png',
      new google.maps.Size(51, 37),
      new google.maps.Point(0,0),
      new google.maps.Point(16, 35));

  for (var i = 0; i < locations.length; i++) {
    var airport = locations[i];
    var infocontent = airport [2]
    var myLatLng = new google.maps.LatLng(airport[0], airport[1]);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: airimage,
        shadow: airshadow
    });
      google.maps.event.addListener(marker, 'click', function() {
        var ib = new InfoBox(ibOptions);
        boxText.innerHTML = infocontent;
        ib.open(map, marker);
        });
}
}

//]]>
</script> 
</head> 

<body onload="initialize()"> 
<div id="content">
<h1>Location - <?php echo $hotel; ?></h1>
<span class="verdana"><br /></span>
<table border=1 bordercolor="#666666">
      <tr>
        <td>
<div id="map_canvas" style="width: 640px; height: 450px"></div>
        </td>
      </tr>
</table>
<br />
</div>
</body> 
</html> 
```

还有各种琐事需要整理，例如信息框选项的格式，但首先我需要让事情正常工作。我怀疑问题出在脚本末尾附近的“addListener”中，但我只是看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:19:46.680

好的，我已经取得了一些进展。我之前发现一个 div 对 InfoBox 来说就足够了，所以我在循环之外定义它。然后，您需要一个闭包`innerHTML`才能持续存在。我注意到内容是静态的

```
 var infocontent = airport [2] 
```

所以我`infocontent + i`在循环中添加了。

```
 var ib = new InfoBox(ibOptions);

  for (var i = 0; i < locations.length; i++) {
    var airport = locations[i];
    var infocontent = airport [2]
    var myLatLng = new google.maps.LatLng(airport[0], airport[1]);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: airimage,
        shadow: airshadow
    });

    (function(i) {
      google.maps.event.addListener(marker, 'click', function() {
        boxText.innerHTML = infocontent + i;
        ib.open(map, this);
        });
    })(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:59:04.100

*再见！*

@Chang 有正确的想法，但闭包当然应该包括`airport`定义`[i]`

```
 var ib = new InfoBox(ibOptions);

  for (var i = 0; i < locations.length; i++) {
    (function(i) {
    var airport = locations[i];
    var infocontent = airport [2]
    var myLatLng = new google.maps.LatLng(airport[0], airport[1]);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: airimage,
        shadow: airshadow
    });
      google.maps.event.addListener(marker, 'click', function() {
        boxText.innerHTML = infocontent;
        ib.close();
        ib.open(map, marker);
        });
    })(i); 
  } 
```

当我测试时，我注意到信息框变得很大。我给你的两个想法是：

1.  更改`boxStyle`：在我的浏览器 Chrome 中，简单但丑陋，因为滚动条与框不对齐。

    ```
     var ibOptions = {
             content: boxText
            ,disableAutoPan: false
            ,maxWidth: 0
            ,pixelOffset: new google.maps.Size(10, -50)
            ,zIndex: null
            ,boxStyle: { 
              width: "180px", // widened because of the scrollbar
              height: "150px",
              overflow: "auto"
             } 
    ```

2.  更改表格的样式。在您的情况下，您将表格样式称为“verdana”。不那么难看，但需要工作，所以它不是那么碍事..

    .verdana { 显示：块；最大高度：150px；溢出-y：自动；}

*再见！*

# python - 需要一些关于 django 评论应用的 BaseCommentAbstractModel 的解释

> ID：10128894
> 
> 赞同：0
> 
> 时间：2012-04-12T17:43:27.193
> 
> 标签：python, django

```
class BaseCommentAbstractModel(models.Model):
    """
    An abstract base class that any custom comment models probably should
    subclass.
    """

    # Content-object field
    content_type   = models.ForeignKey(ContentType,
            verbose_name=_('content type'),
            related_name="content_type_set_for_%(class)s")
    object_pk      = models.TextField(_('object ID'))
    content_object = generic.GenericForeignKey(ct_field="content_type", fk_field="object_pk")

    # Metadata about the comment
    site        = models.ForeignKey(Site)

    class Meta:
        abstract = True

    def get_content_object_url(self):
        """
        Get a URL suitable for redirecting to the content object.
        """
        return urlresolvers.reverse(
            "comments-url-redirect",
            args=(self.content_type_id, self.object_pk)
        ) 
```

我有两个与此模型代码相关的问题。

1.  `models.TextField(_('object ID'))`对象 ID 可能是此 TextField 的详细名称，它如何反映在数据库中？
2.  为什么 Django 依赖`abstract`Meta 内部类的字段而不是使用 abc(AbstractBaseClass) 模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:05:24.130

1.  这确实是那个冗长的名字。我假设您理解这是用于本地化字符串`_`的调用。`ugettext_lazy`这是字段的详细名称。详细名称未在数据库中表示。数据库中字段的名称是 object_pk。

2.  我不是 django 开发人员，所以我不能以权威说话，但有些事情是显而易见的。ABC 是 Python 2.6 中的新功能。这是一个问题，因为从最新版本开始，最低 python 版本终于移到了 2.5。近来，这种情况很快就发生了变化。例如，只有在 django 1.2 上才需要 python 2.4。抽象模型至少早在 django 1.0 就已经存在，我认为甚至更早（虽然我不能确定）所以即使 ABC 是合适的（我不确定这是因为模型有点复杂），由于所需的python版本，它目前不适合django。

此外，管理代表数据库的类而不仅仅是数据结构也有一些复杂性。我不确定这对抽象模型有多大影响，但例如，您不能对作为 Field 实例的 django 属性执行字段隐藏。

# c++ - 非常简单的多维数组程序打开Visual Studio JIT？

> ID：10128898
> 
> 赞同：0
> 
> 时间：2012-04-12T17:43:52.080
> 
> 标签：c++, algorithm

我正在尝试使用多维数组编写一个复杂的井字游戏。这是一段应该打印的代码：

```
 g | g | g
----------
 g | g | g
----------
 g | g | g 
```

其中 g 是从 g[1][1] 到 g [3][3] 的多维数组，其中 g[3][3] 是一个字符串。下面的程序应该打印上面板上***的第一行***。

```
#include <iostream>
#include <string>
using namespace std;

int main() {
    string g[3][3];
    g[1][1] = " ";
    g[2][1] = " ";
    g[3][1] = " ";
    g[1][2] = " ";
    g[2][2] = " ";
    g[3][2] = " ";
    g[1][3] = " ";
    g[2][3] = " ";
    g[3][3] = " ";
    cout << " " << g[1][1] << " " << "|" << " " << g[2][1] << " " << "|" << " " << g[3][1];
    cout << "----------------";
} 
```

在控制台上方运行此程序时，会打开一个控制台，并且在“TESTIFICATE.exe”[2812] 中出现未处理的 win32 异常。我得到一个窗口，我应该在其中选择一个调试器。选择编译器时，Visual Studio 2010 会打开，我面前会出现一些奇怪的头文件。

请注意，上面的程序是主程序的一部分，在我添加那段代码之前它工作得很好，我从中得到了未处理的 win32 异常消息。这在我之前的程序中从未发生过，而且由于程序相对简单，因此不应该发生这种情况。

额外细节：

*   操作系统：Windows XP 专业版 SP3；
*   我安装了 Visual Studio 2010（不是特快版）
*   我正在使用 Codeblocks IDE；
*   编译后，我的 IDE 中没有任何警告或错误。

如果需要任何进一步的详细信息，请在评论中发布，我会发布它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:46:46.507

数组索引从`0`所以`g[3][3]`是无效的内存访问开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:47:13.440

你有一个错误。

`g[1][1]`应该是`g[0][0]`，`g[2][2]`应该是`g[1][1]`，等等。

# django - 如何将 json 发布到 Django

> ID：10128900
> 
> 赞同：2
> 
> 时间：2012-04-12T17:43:56.690
> 
> 标签：django

将 json 发布到 Django 的正确方法是什么？我曾尝试使用视图，但我不确定如何处理 csrf。还有另一种绕过视图并简单地接受json帖子的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:54:05.500

视图是处理帖子数据的东西。没有“绕过视图”的概念，因为这是处理请求的工作完成的地方。

这可能是您正在寻找的： [https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

这将向您展示如何使用 ajax 处理 csrf 令牌（即使用 cookie）。

我还可能建议您放慢速度并尝试完成此处的教程： [https ://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

如果您了解各个部分（模型、视图、模板、url、表单等）如何组合在一起，您可能会更轻松地使用 django。

由于您已添加这些是 API 调用，因此最简单的做法是将这些视图标记为 csrf_exempt。此外，正如您可能猜想的那样，从模型创建 API 是一项常见任务（我假设您的 API 映射到模型，因为这是常见情况，您没有指定）您可能不想重新发明轮子，而是使用活塞或美味的馅饼，让您更轻松：http: [//djangopackages.com/grids/g/api/](http://djangopackages.com/grids/g/api/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:18:09.820

在任何 API 视图上使用[`@csrf_exempt`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt)装饰器。

# android - 获取android视频中的帧数

> ID：10128907
> 
> 赞同：3
> 
> 时间：2012-04-12T17:44:41.717
> 
> 标签：android, video, frame

我的 SD 中存储了一个视频文件 我已经可以访问该文件

我想获取该视频中的帧数，捕捉帧等

基本上我想减少视频中的帧数..任何线索？？？

# solr - 基于 live_date、标题和关键字的 Solr 提升

> ID：10128910
> 
> 赞同：1
> 
> 时间：2012-04-12T17:44:46.273
> 
> 标签：solr, runtime

我想根据 live_date、标题和关键字来提升内容。

1）我可以使用 qf 和 pf 来提升标题和关键字：

```
?q=mySearchTerm&fl=id,title,live_date,content,score&sort=score desc&qf=title^2.0 keywords^1.2 content^1.0&pf=title^2.0 keywords^1.2 content^1.0 
```

2）我可以通过使用函数来计算live_datetime到现在并应用recip函数来提升live_date：

```
?q={!boost b=$recency v=$qq}&recency=recip(ms(NOW/HOUR,live_datetime),3.16e-11,0.08,0.05)&qq="mysearchTerm"&sort=score desc 
```

3）我怎样才能结合1）和2），以便我可以同时提升live_date +标题和关键字？我试过这个但失败了。谁能在这里指出这个问题？谢谢。

```
?q={!boost b=$recency v=$qq}&recency=recip(ms(NOW/HOUR,live_datetime),3.16e-11,0.08,0.05)
&qq="mysearchTerm"&qf=title^2.0 keywords^1.2 content^1.0&pf=title^2.0 keywords^1.2 content^1.0&fl=live_datetime,score 
```

请指教。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:56:16.743

> ```
> ?q={!boost b=$recency v=$qq}&recency=recip(ms(NOW/HOUR,live_datetime),3.16e-11,0.08,0.05)
> &qq="mysearchTerm"&qf=title^2.0 keywords^1.2 content^1.0&pf=title^2.0
> keywords^1.2 content^1.0&fl=live_datetime,score 
> ```

根据您说*确实*有效的示例，我怀疑您在 solrconfig.xml 中为您的请求处理程序配置了“defType=dismax”或“defType=edismax”——这是您的示例 #1 会注意您的唯一原因qf 和 pf 参数。

defType 仅适用于解析当前上下文的主查询（即：顶级请求中的“q”；子查询中的 v），在您的示例 #2 和 #3 中，您使用 localparam 语法来覆盖它。为了确保使用 dismax/edismax 解析您的“qq”参数，您需要将 defType 指定为正在解析 qq 的上下文的本地参数...

```
?q={!boost b=$recency defType=edismax v=$qq}&recency=recip(ms(NOW/HOUR,live_datetime),3.16e-11,0.08,0.05)&qq="mysearchTerm"&qf=title^2.0 keywords^1.2 content^1.0&pf=title^2.0 keywords^1.2 content^1.0&fl=live_datetime,score
...OR...
?q={!boost b=$recency defType=dismax v=$qq}&recency=recip(ms(NOW/HOUR,live_datetime),3.16e-11,0.08,0.05)&qq="mysearchTerm"&qf=title^2.0 keywords^1.2 content^1.0&pf=title^2.0 keywords^1.2 content^1.0&fl=live_datetime,score 
```

或者，如果您正在使用 edismax，那么您可以使用 edismax 解析器的“boost”参数以更简单的语法来完成相同的事情，而不是使用“boost”QParser 来包装“edismax”QParser...

```
?q="mysearchTerm"&boost=recip(ms(NOW/HOUR,live_datetime),3.16e-11,0.08,0.05)&qf=title^2.0 keywords^1.2 content^1.0&pf=title^2.0 keywords^1.2 content^1.0&fl=live_datetime,score 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:22:09.957

为什么不使用增强功能，例如：

?q="mysearchTerm"&qf=title^2.0 关键字^1.2 内容^1.0&pf=title^2.0 关键字^1.2 内容^1.0&fl=live_datetime,score&bf=recip(ms(NOW/HOUR,live_datetime),3.16e-11, 0.08,0.05)^5

# python - 使用 Python 将 XML 转为 MYSQL

> ID：10128921
> 
> 赞同：2
> 
> 时间：2012-04-12T17:45:14.543
> 
> 标签：python, xml

我有以下 test.xml

```
<root>
<parent>
    <ID>1</ID>
    <child1>Value1</child1>
    <child2>value11</child2>
    <child3>
       <subchild>value111</subchild>
    </child3>
</parent>
<parent>
    <ID>2</ID>
    <child1>value2</child1>
    <child2>value22</child2>
    <child2>value333</child2>
</parent>
<parent>
    <ID>3</ID>
    <child1>value3</child1>
    <child2>value33</child2>
</parent>
<parent>
    <ID>4</ID>
    <child1>value4</child1>
    <child2>value44</child2>
</parent>
</root> 
```

我想要完成的是以下内容：我想遍历 test.xml 并且对于每个父节点，我想将所有子节点放在一个字典中，其中标签是索引，文本是值，一旦我得到到父级的末尾将其添加到数据库并重置字典并移动到下一个父级。

所以对于我想要的第一个父母

```
 insert = {'ID':1,'child1':'value1','child2':'value11','subchild':'value111'} 
```

在 SQL 查询中使用它，然后移动到下一个父级重置字典并执行相同的操作。并非每个父母都有相同数量的孩子，有些孩子有子孩子。

我尝试过：

```
 value = []
    tag = []

    from elementtree import ElementTree as ET
    for parent in tree.getiterator():
        for child in parent:
             value.append(child.text)
             tag.append(child.tag) 
```

但我无法弄清楚如何获得我想要的结果。为了使帖子尽可能简单，我省略了检索和打开 xml。这是我尝试使用的方法，但我认为它不正确，因为我无法在父标记末尾停止迭代以插入。

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:23:07.007

[使用lxml](http://lxml.de/index.html#download)库试试这个：

```
from lxml import etree

source = """
<root>
<parent>
    <ID>1</ID>
    <child1>Value1</child1>
    <child2>value11</child2>
    <child3>
       <subchild>value111</subchild>
    </child3>
</parent>
<parent>
    <ID>2</ID>
    <child1>value2</child1>
    <child2>value22</child2>
    <child2>value333</child2>
</parent>
<parent>
    <ID>3</ID>
    <child1>value3</child1>
    <child2>value33</child2>
</parent>
<parent>
    <ID>4</ID>
    <child1>value4</child1>
    <child2>value44</child2>
</parent>
</root>
"""

document = etree.fromstring(source)
inserts = []

id_number = 3

for parent in document.findall('parent'):
    insert = {}
    cont = 0
    for element in parent.iterdescendants():
        if element.tag == 'ID':
            if element.text == str(id_number):
                cont = 1
        if element.getchildren() == []:
            insert[element.tag] = element.text
    if cont:
        inserts.append(insert)

print inserts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:50:32.877

python 还附带了一个 etree API（它没有漂亮的打印和 lxml 具有的一些其他功能）：[http ://docs.python.org/library/xml.etree.elementtree.html](http://docs.python.org/library/xml.etree.elementtree.html)

# c# - MVC：重新填充过滤器表单的字段而不使用模型

> ID：10128924
> 
> 赞同：1
> 
> 时间：2012-04-12T17:45:32.077
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, razor

我需要在一个视图中重新填充一种过滤器，在该视图中我不能使用模型来执行此操作（已经使用模型来带来一个对象的 IEnumerable，以便创建一个表）。

如何填写过滤器输入，这样用户就不必自己动手了？

我正在使用 ASP.NET MVC3。

图形示例，因此更清楚：

```
public ViewResult Consulta(string dominio, string cliente, DateTime?
desde, DateTime? hasta, int? estado, string origen, int? reclamoid)
{
    var reclamos = db.Reclamos.Where(/*Apply filters, etc*/);
    return View(reclamos.ToList());
} 
```

正如你所看到的，这些太多了，不能只为每个过滤器使用一个 ViewBag，所以我想知道是否有办法以复数方式做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:55:05.937

我知道您说没有使用模型，但您的理由是您当前的模型是表格的 IEnumerable。为什么不创建一个视图模型，将当前的 IEnumerable 作为属性以及您需要的其余属性？比使用 ViewBag 更好的做法。

就像是：

```
public class MyViewModel
{
    public IEnumerable<RowData> TableRows { get; set; } //your table rows
    public string Dominio { get; set; }
    public string Cliente { get; set; }
    public DateTime? Desde { get; set; }
    public int? Estado { get; set; }
    public string Origen { get; set; }
    public int? Reclamoid { get; set; } 
} 
```

然后在您的视图中将您的模型声明为：

```
@model MyViewModel 
```

然后你可以在视图中做：

```
@Html.EditorFor(m => m.Dominio)
//then editors for the rest of the model fields

//then you can populate your tablerows using Model.TableRows 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T18:03:46.970

Mattytommo 有一个如何创建一个新的复杂模型的例子，但我还有另外两种方法。

首先是创建一个定义更好的复杂模型，因为这为您提供了一个更明确的模型。它包含您的过滤器和孤立的结果。

```
 public class MyFilterModel
 {
     public string Dominio { get; set; } 
     public string Cliente { get; set; } 
     public DateTime? Desde { get; set; } 
     public int? Estado { get; set; } 
     public string Origen { get; set; } 
     public int? Reclamoid { get; set; }  
 }

 public class MyViewModel
 {
      public MyFilterModel Filters {get;set;}
      public IEnumerable<DataRow> Results {get;set;}
 } 
```

另一种选择是保留现有模型，但使用 ViewBag 或 ViewData 来传递过滤器模型：

```
 public class MyFilterModel
 {
     public string Dominio { get; set; } 
     public string Cliente { get; set; } 
     public DateTime? Desde { get; set; } 
     public int? Estado { get; set; } 
     public string Origen { get; set; } 
     public int? Reclamoid { get; set; }  
 } 
```

在您的控制器中

```
 public ViewResult Consulta(MyFilterModel filters)  
 {  
      ViewBag.Filters = filters;
     var reclamos = db.Reclamos.Where(/*Apply filters, etc*/);  
     return View(reclamos.ToList());  
 } 
```

在你看来

```
 @model MyViewModel
 @{
      MyFilterModel filters = ViewBag.Filters as MyFilterModel;
 }

 @Html.EditorFor(m => filters.Dominio) 
```

# c# - 访问 Token 后调用 Google API 获取 profiledata

> ID：10128929
> 
> 赞同：1
> 
> 时间：2012-04-12T17:45:46.043
> 
> 标签：c#, oauth, google-api

我对 OAuth Arena 和 Google ApI 非常陌生，但我在这里想要实现的目标非常简单。

用户点击 Google Connect 按钮和我的网络服务应该能够从 Google 服务器获取所有用户个人资料信息：

我已经编写了获取 AccessToken 的代码（我还没有测试它）但是假设它工作正常，现在我应该如何要求 Google API 给我用户配置文件？我确实在 GoogleConsumer 类中看到了名为 Get Contacts 的静态函数，但我没有看到任何获取 profiledata 的选项。可能有什么我想念的吗？

这是我获取accessToken的代码：

```
IConsumerTokenManager tokenManager = 
                              new LocalTokenManager(consumerKey,consumerSecret);
var googleConsumer = 
               new WebConsumer(GoogleConsumer.ServiceDescription, tokenManager);
var tokenResult = googleConsumer.ProcessUserAuthorization();
return tokenResult.AccessToken; 
```

现在，我如何从中获取用户配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:55:41.367

获得 Access_Token（访问类型离线；并设置范围/权限以便您获取用户信息）后，您可以尝试以下操作（未经测试，如果发生任何错误，请告诉我）：

```
string userInfo = "";

HttpWebRequest req = (HttpWebRequest)WebRequest.Create(action);
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        StreamReader sr = new StreamReader(resp.GetResponseStream());
        userInfo = "https://www.googleapis.com/oauth2/v1/userinfo?access_token=" + "YOUR_ACCESSTOKEN";
        sr.Close();

            JObject jsonResp = JObject.Parse(userInfo);
            string info="";
            info += "<h3>" + jsonResp.Root["name"] + "</h3>";
            info += "<img src='" + jsonResp.Root["picture"] + "' width='120'/><br/>";
            info += "<br/>ID : " + jsonResp.Root["id"];
            info += "<br/>Email : " + jsonResp.Root["email"];
            info += "<br/>Verified_email : " + jsonResp.Root["verified_email"];
            info += "<br/>Given_name : " + jsonResp.Root["given_name"];
            info += "<br/>Family_name : " + jsonResp.Root["family_name"];
            info += "<br/>Link : " + jsonResp.Root["link"];
            info += "<br/>Gender : " + jsonResp.Root["gender"];

Response.Write(info); 
```

流程：使用访问令牌请求 google userinfo url，获取响应并显示信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-13T14:44:15.220

让我知道您对使用他们的 GET 方法访问个人资料的谷歌信息有何看法，在此处描述[https://developers.google.com/+/api/latest/people/get](https://developers.google.com/+/api/latest/people/get)？这是我的 C# 示例。

```
string urlGoogle = "https://www.googleapis.com/plus/v1/people/me";
HttpWebRequest client = HttpWebRequest.Create(urlGoogle) as HttpWebRequest;
client.Method = "GET";
client.Headers.Add("Authorization", "Bearer " + accessToken);

using (HttpWebResponse response = (HttpWebResponse)client.GetResponse())
{
     using (Stream dataStream = response.GetResponseStream())
     {
           using (StreamReader reader = new StreamReader(dataStream))
           {
                 if (response.StatusCode == HttpStatusCode.OK)
                 {
                     var json = new JavaScriptSerializer();
                     var data = json.Deserialize<IDictionary<string, object>>(reader.ReadToEnd());
    //....... here in data you have all json fields for the profile
```

# html - 显示用户 HTML - 使用 iframe 的替代方法

> ID：10128931
> 
> 赞同：0
> 
> 时间：2012-04-12T17:45:50.083
> 
> 标签：html

我有一个 HTML 编辑器，允许用户编辑他们的页面。我正在使用 iframe 预览编辑。

我正在寻找一种无需在 iframe 中呈现 HTML/CSS 的解决方案。我知道使用 iframe 可以防止 HTML/CSS 与父站点发生冲突。只是想知道是否有其他显示用户 HTML/CSS 内容的方法，而不必担心在预览时可能会更改父/主网站。

如果 DIV 是一个选项，我将如何保护它的显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:56:52.403

不。还有其他方法，但是从您的评论看来，您正在寻找一种更轻松的方法，而其他一切都将变得非常繁重且更难以维护。

# php - 在 Javascript 函数中将变量插入 DIV

> ID：10128932
> 
> 赞同：0
> 
> 时间：2012-04-12T17:45:52.373
> 
> 标签：php, javascript, jquery, wordpress, simplemodal

如果我说错了术语，只是把它放在那里，对于初学者来说，我在 Javascript 方面的经验实际上不到 4 小时。我想要做的是在 javascript 中预定义的 DIV 的末尾添加一个变量。

例如这里是变量：

```
<?php 
    $n = rand(10e16, 10e20);
    $x = base_convert($n, 10, 36);
?> 
```

这是正在使用的变量：

```
<input type="button" name="osx<?php echo $x;?>" value="View" class="osx<?php echo $x;?>" id="osx<?php $x;?>"/>

<div id="osx-modal-content<?php echo $x;?>" style="display:none"> 
```

在javascript函数中，我目前有这个：

```
jQuery(function ($) {
var OSX = {
    container: null,
    init: function () {
        $("[id^=osx").click(function (e) {
            e.preventDefault(); 
            $("[id^=osx-modal-content]").modal({OPTIONS}); 
```

还有这个：

```
 open: function (d) {
        var self = this;
        self.container = d.container[0];
        d.overlay.fadeIn('slow', function () {
            $("[id^=osx-modal-content]" + $x, self.container).show(); 
```

显然Begins With 不是最好的解决方案。因为当一个 onclick 事件发生时，它会激活页面上所有以 osx-modal-content 开头的 DIVS。所以需要微调。

我将如何将变量添加到 javascript 中，所以它就像....

```
$("osx" + $x).click(function (e) {
$("#osx-modal-content" + $x).modal({OPTIONS});
$("#osx-modal-content" + $x, self.container).show(); 
```

例如，假设 $x = 12345 所以 Javascript 会将其读取为.....

```
 $("osx12345")      etc..........
 $("#osx-modal-content12345")    etc.......
 $("#osx-modal-content12345", self.container   etc....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:17:07.893

```
<script>
var osx = "osx<?php echo $x;?>";
</script> 
```

然后你可以在你的 jQuery 选择器中使用 osx 变量

# awk - 尝试使用 AWK 删除 html 文件中的一团文本

> ID：10128933
> 
> 赞同：1
> 
> 时间：2012-04-12T17:46:05.357
> 
> 标签：awk

我正在尝试删除许多文件中的一团文本。这个 glob 被插入到文件的中间。

在我的 bash 脚本中，我使用 AWK 来尝试删除它。

命令是这样的：

```
awk '/</SCRIPT>/{p=1;print}</script>/{p=0}!p' 
```

哪里`</SCRIPT>`是起点，哪里是终点。

目标是让 awk 在文件中删除所有以开头`</SCRIPT>`和结尾的文本`</script>` 以及介于两者之间的所有内容，并且保持顶部和底部 html 不变。

我在脚本的开头和结尾添加了一个 -x 和一个 +x，以查看它在哪里失败。

awk 告诉我：

```
awk: /</SCRIPT/>{p=1;print}/</script>{p=0}!p
awk:                        ^ syntax error 
```

SS64 告诉我：

> gawk' 将在以下任何一项之后忽略换行符：
> 
> ```
>  , { ? : || && do else" 
> ```

所以我想我需要在我的 awk 命令中隔离“<”，但它没有被列为一个麻烦的变量......

我该怎么做，为什么 awk 没有像这样抱怨呢？

```
awk: /</SCRIPT/>{p=1;print}/</script>{p=0}!p
awk:  ^ syntax error        ^ syntax error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:52:56.680

您需要逃避`/`比赛内部：

```
awk '/<\/SCRIPT>/{p=1;print} /<\/script>/{p=0}!p' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:05:47.870

If you're trying to remove beginning and ending tag and all the text in between then you should use:

```
awk '/<\/SCRIPT>/{p=1}; !p; /<\/script>/{p=0}' file 
```

# mysql - 对于每个 X，找到该 X 的平均 Y。 4 查询

> ID：10128935
> 
> 赞同：0
> 
> 时间：2012-04-12T17:46:21.403
> 
> 标签：mysql

关系：

```
Product( maker, model, type )
PC( model, speed, ram, hd, price)
Laptop( model, speed, ram, hd, screen, price)
Printer( model, color, type, price) 
```

我目前正在尝试自学 MySQL 工作。我买了一本书，正在解决一些示例问题。我停下来试图弄清楚如何构建这些查询。

1.  查找每种不同速度的 PC 的平均价格
2.  查找每个制造商的笔记本电脑的平均屏幕尺寸
3.  找到至少生产三种不同型号电脑的制造商
4.  为每个销售 pc 的制造商查找 pc 的最高价格
5.  求 pc 速度每高于 2.0 的平均价格

我可以轻松地对列进行平均“SELECT AVG(price) FROM pc”，但我不确定如何为每个 x 找到它的 y 平均值。问题 1、2、4、5 的结构是这样的，问题 3 我认为其中会有一个子查询，我认为会找到与模型、其中每台电脑的制造商的关系。但我不确定如何做第二部分“制造商至少生产三种不同的型号”

```
(SELECT model, maker FROM product NATURAL JOIN pc WHERE type = 'pc') 
```

有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:49:07.283

1/ for X 是通过使用 a 完成的`GROUP BY`：

```
`SELECT speed, AVG(price) FROM PC GROUP BY speed` 
```

2/ 非常相似.. 阅读[GROUP BY Mysql 文档](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)后，您能找到它吗？

```
SELECT maker, AVG(speed) 
FROM product p 
JOIN laptop l 
ON p.type="Laptop" AND p.model = l.model
GROUP BY maker 
```

逻辑：同样是 1，但这里我们需要 maker。所以我们需要从 Product 中添加列。我们用笔记本电脑加入产品，然后按制造商分组。

3/ 也是分组依据，你会想要使用 HAVING。试试看，如果您需要更多帮助或解决方案，请在评论中询问。

```
SELECT maker, COUNT(*)  
FROM Product p 
JOIN PC  
ON p.type="OC" AND p.model = pc.model
GROUP BY maker
HAVING COUNT(*) > 3 
```

同2：与PC连接产品，现在按制造商分组，现在只保留计数高于3的行。您确实也可以使用子查询来做到这一点：

```
`SELECT maker 
from product p 
where (
  select COUNT(*) 
  from PC 
  where p.type="PC" and p.model = PC.model) 
> 3` 
```

4/ 将被分组，并与产品加入以获得制造商

想再试一次吗？您提出的第一个解决方案是：

```
SELECT maker, MAX(DISTINCT price) AS MaxPrice 
FROM (
  SELECT model, maker, price 
  FROM product 
  NATURAL JOIN pc 
  WHERE type = 'pc') AS t5 
GROUP BY maker 
```

*   您不需要 MAX 中的 DISTINCT，最大值始终是最大值，即使两行具有相同的最大值。GROUP BY 也是一种独特的方式。
*   您在这里的子查询并不是真正需要的，如果您决定子查询，请考虑您需要哪些列（您需要模型吗？为什么？）。
*   是否愿意尝试与 3 中相同的逻辑，并进行连接？

5/ 类似于 1，但带有 WHERE 子句。没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T09:30:12.387

## (2) 对于平均屏幕尺寸：

SELECT maker AS Maker, AVG(screen) AS Avg_Screen_Size FROM Product JOIN Laptop ON Product.model=Laptop.model AND Product.type='Laptop' GROUP BY maker

对。

您的查询结果：

制造商 Avg_Screen_Size

13

乙 14

C 12

==================================================== =====

## (3) 对于 3 种不同型号的 PC：

SELECT Product.maker, COUNT(Product.model) FROM Product WHERE Product.type='PC' GROUP BY maker HAVING COUNT(Product.model) >=3

对。

您的查询结果：

制作者

3

==================================================== =======

## (4) 最高价格：

SELECT DISTINCT maker, MAX(PC.price) AS Max_Price from Product, PC WHERE Product.type='PC' AND PC.price=(SELECT DISTINCT MAX(price) FROM PC WHERE PC.model=Product.model) GROUP BY maker

对。

您的查询结果：

制造商 Max_Price

980.0000

B 850.0000

E 350.0000

==================================================== ================

## (5) 对于速度 20 以上的平均价格：

SELECT DISTINCT speed, AVG(PC.price) AS AVG_Price FROM PC INNER JOIN Product ON PC.model=Product.model WHERE PC.speed>20 GROUP BY PC.speed

对。

您的查询结果：

速度 AVG_Price

750 900.0000

800 970.0000

900 980.0000

# android - android audiomanager 改变增益

> ID：10128937
> 
> 赞同：1
> 
> 时间：2012-04-12T17:46:38.803
> 
> 标签：android, android-audiomanager

我正在开发一个应用程序来录制语音。我想增加 MIC 的增益。

在 Audiorecord 过程中，我是否必须使用 AudioManager 来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:15:08.867

指向有关此问题的有用链接的指针位于：

[我们可以增加安卓手机的麦克风增益吗？](https://stackoverflow.com/questions/3780382/can-we-increase-the-gain-of-mic-of-an-android-phone)

我最初会尝试 setStreamVolume() 方法，尽管这也取决于设备的硬件和驱动程序。因为有这么多不同的制造商和设备，您可能难以建立可靠的基线值。

# jsf - Richfaces 4.1 和 JSF 2.1.7：资源都在正文而不是 html 文档的头部

> ID：10128939
> 
> 赞同：2
> 
> 时间：2012-04-12T17:46:43.587
> 
> 标签：jsf, richfaces, jboss7.x, mojarra

我想知道是否有人遇到过类似的问题。

我刚刚尝试升级到 JBoss AS 7.1.1，它预装了 JSF 2.1.7。在我使用 JSF 2.0.4 之前，RichFaces 一切都很好（顺便说一句，我在两种情况下都使用 4.1.0.Final）。现在使用 Mojarra 2.1.7，似乎我所有的 Richfaces 资源，例如 javax.faces.resource/richfaces.js.seam 和 javax.faces.resource/richfaces-event.js.seam 都包含在渲染的主体中html页面而不是头部。我收到很多 Richfaces is not defined 错误，因为我试图在代码的其他地方使用 js richfaces 方法。它只是不起作用，因为所有richfaces js文件都加载到正文中。

我曾尝试在线研究此问题，但找不到任何相关信息。我的文档中有一个 h:head 标签，所以这不是问题。

任何帮助，将不胜感激。谢谢。

# java - 如何在 PDF 中显示出现在 JPanel 上的图像

> ID：10128940
> 
> 赞同：0
> 
> 时间：2012-04-12T17:46:44.217
> 
> 标签：java, swing, pdf, itext

我编写了一个 Java 代码，它`JPanel`在单击按钮时显示折线图。我想要的是使用 Java PDF 库[itextpdf](http://itextpdf.com/)在我的 PDF 文件中显示该折线图。问题是文件夹中没有创建饼图的图像。我可以轻松地将现有图像（例如饼图）粘贴到 PDF 文件中。因此，在这种情况下（当我没有饼图的任何图像文件时），请告诉我如何在 PDF 中显示此图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:43:58.523

可能是其中之一可能会有所帮助

[http://www.javaworld.com/javaworld/jw-12-2006/jw-1209-swing.html](http://www.javaworld.com/javaworld/jw-12-2006/jw-1209-swing.html)

或者

[如何使用 iText 将 Swing 组件绘制到 PDF 文件？](https://stackoverflow.com/questions/425590/how-do-i-paint-swing-components-to-a-pdf-file-with-itext)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-13T06:31:52.480

有很多用于 Java 的商业和开源 PDF 查看器。他们怎么了？

# css - 如何在图片下写标题？

> ID：10128950
> 
> 赞同：147
> 
> 时间：2012-04-12T17:47:35.207
> 
> 标签：css, html

我有两个需要保持内联的图像；我想在每张图片下写一个标题。

```
<center>
   <a href="http://example.com/hello">
       <img src="hello.png" width="100px" height="100px">
   </a>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
   <a href="http://example.com/hi">
       <img src="hi.png" width="100px" height="100px">
   </a>
</center> 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2012-04-12T17:50:09.987

[Figure](https://developer.mozilla.org/en-US/docs/HTML/Element/figure)和[Figcaption](https://developer.mozilla.org/en-US/docs/HTML/Element/figcaption)标签：

```
<figure>
    <img src='image.jpg' alt='missing' />
    <figcaption>Caption goes here</figcaption>
</figure> 
```

必须喜欢 HTML5。

* * *

见样品

```
#container {
    text-align: center;
}
a, figure {
    display: inline-block;
}
figcaption {
    margin: 10px 0 0 0;
    font-variant: small-caps;
    font-family: Arial;
    font-weight: bold;
    color: #bb3333;
}
figure {
    padding: 5px;
}
img:hover {
    transform: scale(1.1);
    -ms-transform: scale(1.1);
    -webkit-transform: scale(1.1);
    -moz-transform: scale(1.1);
    -o-transform: scale(1.1);
}
img {
    transition: transform 0.2s;
    -webkit-transition: -webkit-transform 0.2s;
    -moz-transition: -moz-transform 0.2s;
    -o-transition: -o-transform 0.2s;
}
```

```
<div id="container">
    <a href="#">
        <figure>
            <img src="http://lorempixel.com/100/100/nature/1/" width="100px" height="100px" />
            <figcaption>First image</figcaption>
        </figure>
    </a>
    <a href="#">
        <figure>
             <img src="http://lorempixel.com/100/100/nature/2/" width="100px" height="100px" />
            <figcaption>Second image</figcaption>
        </figure>
    </a>
</div>
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-12T18:08:47.607

**CSS**

```
#images{
    text-align:center;
    margin:50px auto; 
}
#images a{
    margin:0px 20px;
    display:inline-block;
    text-decoration:none;
    color:black;
 } 
```

**HTML**

```
<div id="images">
    <a href="http://xyz.com/hello">
        <img src="hello.png" width="100px" height="100px">
        <div class="caption">Caption 1</div>
    </a>
    <a href="http://xyz.com/hi">
        <img src="hi.png" width="100px" height="100px"> 
        <div class="caption">Caption 2</div>
    </a>
</div>​ 
```

[小提琴来了。](http://jsfiddle.net/heera/LLmqb/3/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-21T16:39:14.473

将图像（假设它的宽度为 140 像素）放入链接中：

```
<a><img src='image link' style='width: 140px'></a> 
```

接下来，将标题放在 a 中，并使其宽度小于您的图像，同时使其居中：

```
<a>
  <img src='image link' style='width: 140px'>
  <div style='width: 130px; text-align: center;'>I just love to visit this most beautiful place in all the world.</div>
</a> 
```

接下来，在链接标签中，为链接设置样式，使其不再看起来像链接。你可以给它任何你想要的颜色，但只需删除你的链接可能带有的任何文本装饰。

```
<a style='text-decoration: none; color: orange;'>
  <img src='image link' style='width: 140px'>
  <div style='width: 130px; text-align: center;'>I just love to visit this most beautiful place in all the world.</div>
</a> 
```

我将带有标题的图像包装在一个链接中，这样没有文本可以将标题排除在外：标题通过链接与图片相关联。这是一个例子：[http ://www.alphaeducational.com/p/okay.html](http://www.alphaeducational.com/p/okay.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-12T17:52:42.973

```
<div style="margin: 0 auto; text-align: center; overflow: hidden;">
  <div style="float: left;">
    <a href="http://xyz.com/hello"><img src="hello.png" width="100px" height="100px"></a>
    caption 1
  </div>
 <div style="float: left;">
   <a href="http://xyz.com/hi"><img src="hi.png" width="100px" height="100px"></a>
   caption 2                      
 </div>
</div> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-09-18T14:54:58.480

对于响应式图像。您可以在图形标签中添加图片和源标签。

```
<figure>
  <picture>
    <source media="(min-width: 750px)" srcset="images/image_2x.jpg"/>
    <source media="(min-width: 500px)" srcset="images/image.jpg" />
    <img src="images.jpg" alt="An image">
  </picture>
  <figcaption>Caption goes here</figcaption>
</figure> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-12T18:00:30.430

CSS 是你的朋友；不需要中心标签（更不用说它已经很贬值了），也不需要过多的不间断空格。这是一个简单的例子：

**CSS**

```
.images {
    text-align:center;
}
.images img {
    width:100px;
    height:100px;
}
.images div {
    width:100px;
    text-align:center;
}
.images div span {
    display:block;
}
.margin_right {
    margin-right:50px;
}
.float {
    float:left;
}
.clear {
    clear:both;
    height:0;
    width:0;
} 
```

**HTML**

```
<div class="images">
    <div class="float margin_right">
        <a href="http://xyz.com/hello"><img src="hello.png" width="100px" height="100px" /></a>
        <span>This is some text</span>
    </div>
    <div class="float">
        <a href="http://xyz.com/hi"><img src="hi.png" width="100px" height="100px" /></a>
        <span>And some more text</span>
    </div>
    <span class="clear"></span>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-11T09:40:24.090

To be more semantically correct and answer the OPs orginal question about aligning them side by side I would use this:

**HTML**

```
<div class="items">
<figure>
    <img src="hello.png" width="100px" height="100px">
    <figcaption>Caption 1</figcaption>
</figure>
<figure>
    <img src="hi.png" width="100px" height="100px"> 
    <figcaption>Caption 2</figcaption>
</figure></div> 
```

**CSS**

```
.items{
text-align:center;
margin:50px auto;}

.items figure{
margin:0px 20px;
display:inline-block;
text-decoration:none;
color:black;} 
```

[https://jsfiddle.net/c7borg/jLzc6h72/3/](https://jsfiddle.net/c7borg/jLzc6h72/3/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-22T05:58:18.740

HTML5 中的`<figcaption>`标签允许您在图像中输入文本，例如：

```
<figcaption>
Your text here
</figcaption>. 
```

然后，您可以使用 CSS 将文本定位在图像上应位于的位置。

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2012-04-12T19:56:50.407

```
<table>
<tr><td><img ...><td><img ...>
<tr><td>caption1<td>caption2
</table> 
```

风格随心所欲。

# sql - SQL prestashop stats order total by customers group

> ID：10128956
> 
> 赞同：0
> 
> 时间：2012-04-12T17:48:20.530
> 
> 标签：sql, prestashop

我尝试在 prestashop 中按客户组导出我的订单总额

这是我对第 3 组的请求，例如：

```
SELECT ROUND(SUM(IFNULL(o.`total_paid_real`, 0 ) / cu.conversion_rate), 2) as totalMoneySpent
FROM `ps_orders` o
LEFT JOIN `ps_currency` cu ON o.id_currency = cu.id_currency
LEFT JOIN `ps_customer` c ON c.id_default_group= 3
WHERE o.valid = 1; 
```

其他版本（相同结果，所有组的总数）

```
SELECT ROUND( SUM( IFNULL(o.`total_paid_real`, 0 ) / cu.conversion_rate), 2 ) as totalMoneySpent
FROM `ps_orders` o
LEFT JOIN `ps_currency` cu ON o.id_currency = cu.id_currency
#LEFT JOIN `ps_customer` c ON c.id_default_group=3
WHERE o.valid = 1 
AND o.id_customer IN( SELECT c.id_customer FROM `ps_customer` c  WHERE c.id_default_group=3 )
 ; 
```

我的问题是 c.id_default_group 永远不会改变结果，

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-31T21:09:50.433

```
SELECT c.group_id, ROUND(SUM(IFNULL(o.`total_paid_real`, 0 ) / cu.conversion_rate), 2) as totalMoneySpent
FROM `ps_orders` o
LEFT JOIN `ps_currency` cu ON o.id_currency = cu.id_currency 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:48:32.093

一旦你应用了聚合函数`SUM`，你必须`GROUP BY`为了获得多行的聚合结果（否则聚合将单独应用于每一行，违背了它自己的目的）。

```
SELECT c.group_id, ROUND(SUM(IFNULL(o.`total_paid_real`, 0 ) / cu.conversion_rate), 2) as totalMoneySpent
FROM `ps_orders` o
LEFT JOIN `ps_currency` cu ON o.id_currency = cu.id_currency
LEFT JOIN `ps_customer` c ON c.id_default_group= 3
WHERE o.valid = 1
GROUP BY c.group
ORDER BY c.group 
```

假设`group_id`标识您在问题中提到的客户组。

# emacs - 我想从本机 windows emacs 应用程序运行 cygwin bash shell

> ID：10128961
> 
> 赞同：1
> 
> 时间：2012-04-12T17:49:01.480
> 
> 标签：emacs, cygwin

我已按照[如何从 Emacs 中运行 Cygwin Bash Shell 中的说明进行操作？](https://stackoverflow.com/questions/235254/how-can-i-run-cygwin-bash-shell-from-within-emacs)这个问题，我更进一步并添加了`(setq explicit-bash-args '("--login" "-i"))`命令，但是当我键入时，emacs 继续只显示 dos 提示符`M-x shell`。总而言之，我的 .emacs 文件如下所示：

```
(defun cygwin-shell ()
  "Run cygwin bash in shell mode."
  (interactive)
  (let ((explicit-shell-file-name "C:/cygwin/bin/bash"))
    (call-interactively 'shell)))
(setq explicit-bash-args '("--login" "-i"))` 
```

请对答案保持温和，因为我正处于著名的垂直 emacs 学习曲线的底部！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:18:28.003

如果您实现了该问题的*答案*，请注意您必须执行`M-x cygwin-shell`启动 bash。如果您想将它用于`M-x shell`您需要调用的所有内容

```
(setq explicit-shell-file-name "C:/cygwin/bin/bash") 
```

* * *

既然你说你正在学习，这里有一些尝试时的提示。

*   键入`C-x C-f ~/.emacs`以在您的用户路径中打开您的 .emacs 文件。
*   最后在上面输入你的函数
*   `M-x load-file [RET] .emacs`：加载缓冲区（无需重新启动 emacs）
*   `C-h a`: 如果你对一些具体的动作感兴趣，可以查一下
*   `C-h v [RET] variable`：可以检查变量，`explicit-bash-args`例如检查值

而且，顺便说一句，我不确定“--login -i”是做什么的，但是有人在评论中说你应该有这样的“ls”可以工作。如果 PATH 环境变量中有 cygwin bin 路径，bash 无论如何都会找到 ls 。也不需要转义路径变量，这是由 bash 处理的（`echo $PATH`当你让它工作时做一个 in bash，你会看到）。

# jquery - CSS 样式不适用于替换为 jQuery 的内容

> ID：10128967
> 
> 赞同：0
> 
> 时间：2012-04-12T17:49:23.057
> 
> 标签：jquery, ajax, google-chrome, replacewith

我有一个用 jQuery 动态替换的 div。

我做这样的事情：

```
$.get(url, function(result){
  $("#myDiv").replaceWith($(result));
} 
```

请求正确并且标记加载没有问题，但是即使 ajax 调用（“return”）返回的内容与 #myDiv 完全相同（它包含具有相同 id 的元素），一些样式应用不正确。

最奇怪的是，使用 Chrome 时，如果我右键单击样式错误的元素并选择“检查元素”，则样式会很好地加载。

这在 IE8 上正常工作。

关于在 Chrome 上可能导致此问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:58:51.003

其实我只是找到了一个解决方案。

样式不正确的元素是具有绝对位置的 div。

我只设置了底部位置，而不是左侧（0）。

我明确地将 CSS 中的 left 设置为 0，现在它看起来很好。

显然，由于某种原因，Chrome 中的默认位置不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:54:35.550

听起来重绘没有触发。您可以尝试在替换后强制更改样式，如下所示：

```
$(some_selector_in_the_result).css('display','block'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:52:35.210

你在任何地方都使用 jQuery 函数 removeAttr('style') 吗？众所周知，它有时会导致 Chrome 或其他 webkit 浏览器出现问题。见[http://bugs.jquery.com/ticket/9699](http://bugs.jquery.com/ticket/9699)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:53:00.873

Chrome 的 DOM 选择器比 IE8 的要严格得多。

我建议按类而不是 ID 来定位元素，即使它是该元素独有的。

# jboss - java.security.KeyStoreException：未找到 BKS

> ID：10128972
> 
> 赞同：1
> 
> 时间：2012-04-12T17:49:35.100
> 
> 标签：jboss, https

我是 SSL 证书生成的新手，我已经生成了 BKS 类型的 SSL 证书。但是在 Jboss 启动期间，我遇到了异常：-saying “java.security.KeyStoreException: BKS not found”。以下是我正在执行的创建密钥库文件的步骤。

keytool -genkey -alias abcd -keystore C:/abcd.keystore -storepass abcd -storetype BKS -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath c:/bcpkix-jdk15on-147.jar

我正在使用 JBoss 4.2.3 GA。

请帮我解决这个问题。

谢谢你，普鲁特维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:52:37.330

确保您遵循这些步骤

```
http://docs.jboss.org/jbossweb/3.0.x/ssl-howto.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:59:01.800

错误“BKS not found”意味着它正在寻找一个名为 BKS 的别名。您能否传递实际错误以及 ssl 连接器定义 (server.xml) 的详细信息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T08:10:53.637

您可以尝试将提供程序添加到 java.security 文件中，如[Java 中不同类型的密钥库中所述 - BKS](http://www.pixelstech.net/article/1467528503-Different-types-of-keystore-in-Java----BKS)

> security.provider.N=org.bouncycastle.jce.provider.BouncyCastleProvider

**N**表示提供者列表中的提供者索引。

# javascript - IE 抛出 JavaScript 错误：属性 'googleMapsQuery' 的值为 null 或未定义，而不是 Function 对象（在其他浏览器中有效）

> ID：10128973
> 
> 赞同：12
> 
> 时间：2012-04-12T17:49:44.193
> 
> 标签：javascript, function, internet-explorer-9, undefined, runtime-error

我在 IE 9 中遇到了 JavaScript 范围的真正问题。

这是在我的文档正文中（是的，我意识到脚本应该放在头部以获得正确的 HTML，但我以前从未让它破坏过脚本）。该脚本在正文中，因为我不想弄乱仅与此页面相关的脚本的共享标题页面：

```
<script type="text/javascript">
function googleMapsQuery(accountNum) {
    // function code is here (omitted for brevity)
}
</script> 
```

这是在`td`块内的`tr`块内的块内的块内的`tbody`块内的`table`块内的`form`块内`body`：

```
<button id="google-422111" onclick="googleMapsQuery(422111)" type="button">Google This!</button> 
```

我什至将脚本块移到表单上方，以防脚本函数声明的顺序相关（不是）。

该脚本在 FireFox 和 Chrome 中完美运行，但在 IE 9（打开或不打开兼容性视图）中，我收到此错误：

> SCRIPT5007：属性“googleMapsQuery”的值为 null 或未定义，而不是函数对象

我研究了 JavaScript 范围，但我无法弄清楚为什么 IE 认为 'googleMapsQuery' 是一个属性，以及为什么它是未定义的。这是一个函数，我定义了它！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-07-15T11:28:13.457

我在属性为空或未定义时遇到了类似的问题。

这最终是 IE 的文档模式被默认为 IE7 标准。这是因为兼容模式被自动设置为用于所有 Intranet 站点（**工具**>**兼容性视图设置**>**在兼容性视图中显示 Intranet 站点**）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-13T19:43:16.607

我找到了答案，尽管我报告了什么，但它不是特定于浏览器的。该错误出现在我的函数代码中，并且会发生在任何浏览器中。归结为这一点。我的代码中有两行是特定于 FireFox/FireBug 的。他们使用了console.log。在 IE 中，他们抛出了一个错误，所以我将它们注释掉（或者我是这么认为的）。我做了一个糟糕的工作来评论它们，并打破了我的功能中的括号。

原始代码（其中包含console.log）：

```
if (sxti.length <= 50) console.log('sxti=' + sxti);
if (sxph.length <= 50) console.log('sxph=' + sxph); 
```

损坏的代码（注释内的括号错位）：

```
if (sxti.length <= 50) { //console.log('sxti=' + sxti); }
if (sxph.length <= 50) { //console.log('sxph=' + sxph); } 
```

固定代码（注释外的固定括号）：

```
if (sxti.length <= 50) { }//console.log('sxti=' + sxti);
if (sxph.length <= 50) { }//console.log('sxph=' + sxph); 
```

所以，这是我自己草率的编码。该函数确实没有定义，因为语法错误使其无法关闭。

哦，生活和学习。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T18:06:29.680

您是否尝试将分号添加到`onclick="googleMapsQuery(422111);"`. 我没有足够的代码来测试缺少的分号是否会导致错误，但 ie 对语法更挑剔。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-30T12:36:02.963

在我的特殊情况下，我在组织中使用的旧网站上遇到了类似的错误。为了解决这个问题，我不得不将该网站列为“受信任的网站”。

为此：

*   单击**工具**按钮，然后单击 Internet 选项。
*   转到**安全**选项卡。
*   单击**受信任的站点**，然后单击站点按钮。
*   输入网站的 url，然后单击**Add**。

我把这个放在远程情况下，它会帮助别人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-09T20:00:13.637

所以我遇到了类似的情况，也有同样的错误。我忘了我在我的开发机器上更改了兼容模式，并且我的 javascript 中也有一个 console.log 命令。我在 IE 中更改了兼容模式，并删除了 console.log 命令。没有更多的问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-19T07:47:18.363

就在几分钟前，我遇到了同样的问题。我遇到的问题是在放置您的 jQuery 后启动其他 jQuery 脚本。毕竟它会正常工作。

# continuous-integration - Travis 个人私有仓库

> ID：10128976
> 
> 赞同：18
> 
> 时间：2012-04-12T17:49:52.213
> 
> 标签：continuous-integration, travis-ci

我正在开发一个私人仓库，我需要为我的应用程序集成 CI。如何为我的私人仓库集成 travis。或者是否有可能在我们的服务器上有 travis

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T19:25:20.710

[Travis Pro](http://about.travis-ci.org/docs/user/travis-pro/)支持私有 github 存储库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T02:12:18.130

还有其他托管 CI 服务。例如，您可以使用[Circle](https://circleci.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-07T11:25:58.297

此外，如果在本地运行 Travis 检查就足够了，请参阅：[https ://github.com/PaulRosset/previs](https://github.com/PaulRosset/previs)

# ruby-on-rails - 验证电子邮件地址是贝宝用户

> ID：10128979
> 
> 赞同：5
> 
> 时间：2012-04-12T17:50:16.050
> 
> 标签：ruby-on-rails, ruby, paypal

我想验证一个电子邮件地址是 PayPal 用户。是否有 API 调用可以做到这一点？

有没有这样做的红宝石库？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T02:52:57.463

来自[PayPal 的 Adaptive Accounts平台的](https://www.x.com/developers/paypal/products/adaptive-accounts)[GetVerifiedStatus](https://www.x.com/developers/paypal/documentation-tools/api/getverifiedstatus-api-operation)将为您完成这项工作。

PayPal 没有任何用于 Ruby 中自适应帐户的[代码示例](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples#adaptiveaccounts)或[SDK](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#adaptiveaccounts)，但我确实找到了有人[在 Ruby 中为 GetVerifiedStatus 编写了代码](http://curry.byteally.com/finding-verification-status-of-a-paypal-account-ruby-on-rails-paypal-adaptive-accounts-getverifiedstatus/)。

您需要让它检查他们拥有的帐户类型的唯一更改是更改

```
if @xml['accountStatus']!=nil
    account_status = @xml['accountStatus'][0]
    #its pretty obvious from here init?
    if account_status.to_s() == "VERIFIED"
        render :text => "Account verified"
    else
        render :text => "Oopsy! Yet to be verified"
    end
else
    render :text => "Gee! sorry! something went seriously wrong"
end 
```

到

```
if @xml['accountType']!=nil
    account_type = @xml['accountType'][0]
    #its pretty obvious from here init?
    if account_type.to_s() == "Business"
        render :text => "Business account!"
    elseif account_type.to_s() == "Premier"
        render :text => "Premier Account!"
    elseif account_type.to_s() == "Personal"
        render :text => "Personal account!"
    else
        render :text => "Account type not null but not a valid PayPal account type."
    end
else
    render :text => "Gee! sorry! something went seriously wrong"
end 
```

**注意**：PayPal 显然没有更新他们的 API 参考页面，所以现在使用[Adaptive Accounts 指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptiveAccounts.pdf)中第 65-66 页中包含的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-01T15:09:30.787

查看[adaptiveaccounts-sdk-ruby gem](https://github.com/paypal/adaptiveaccounts-sdk-ruby)。它允许您获取有关贝宝帐户的信息。

查看[示例应用程序](https://paypal-sdk-samples.herokuapp.com/adaptive_accounts)以了解 api 可以做什么。

这是一个例子：

```
require 'paypal-sdk-adaptiveaccounts'
@api = PayPal::SDK::AdaptiveAccounts::API.new( :device_ipaddress => "127.0.0.1" )

# Build request object
@get_verified_status = @api.build_get_verified_status({
  :emailAddress => "newEmailAddress@paypal.com",
  :matchCriteria => "NONE" })

# Make API call & get response
@get_verified_status_response = @api.get_verified_status(@get_verified_status)

# Access Response
if @get_verified_status_response.success?
  @get_verified_status_response.accountStatus
  @get_verified_status_response.countryCode
  @get_verified_status_response.userInfo
else
  @get_verified_status_response.error
end 
```

[这](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_adaptiveaccounts.pdf)是贝宝的自适应账户官方文档

# cocos2d-iphone - 花栗鼠的临时速度爆发

> ID：10128980
> 
> 赞同：1
> 
> 时间：2012-04-12T17:50:16.363
> 
> 标签：cocos2d-iphone, chipmunk

我正在开发一款游戏，您必须注意在屏幕周围弹跳的球（在屏幕边缘弹跳）。我正在使用 cocos2d 和花栗鼠。在花栗鼠中，我定义了 0 重力和 0 摩擦，这样弹跳的球在每次弹跳后都保持原来的速度。

但是，我想介绍一种特殊类型的弹跳球，它会在几秒钟内暂时提高速度，然后恢复到原来的速度。

有没有一种很好的花栗鼠方式来做到这一点，一种可以添加的临时冲动？还是我必须通过存储原始速度并跟踪提升速度已经运行了多长时间（多少个周期）并在“提升”期结束时重置原始速度来手动完成很长的路要走？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:39:08.307

Chipmunk 不提供计时器等类似功能，但 Cocos2D 提供。

# xml - 比较两个 XML 文件或两个 DataSet 并获得差异

> ID：10128988
> 
> 赞同：1
> 
> 时间：2012-04-12T17:50:43.350
> 
> 标签：xml, datatable

**问题 ：**

我有两个 XML 文件，一个带有预期结果，一个带有检测到的结果。结构完全相同，只是值发生了变化。我想比较并了解两者之间的区别。

我对 Microsoft XMLDiffPatch 工具有所感受，但我无法直接检索不同的值。

**例子 ：**

文件 1

```
<NameValue>
  <Name>PARAM_Currency</Name>
  <Value>USD</Value>
  <Type>VARCHAR</Type>
</NameValue> 
```

文件 2

```
<NameValue>
  <Name>PARAM_Currency</Name>
  <Value>CAD</Value>
  <Type>VARCHAR</Type>
</NameValue> 
```

我想要返回三个值，名称、预期值和检测到的值。

PARAM_Currency, USD, CAD

我虽然比较两个 DataSet 或 DataTable，但我不确定这是一个好方法。

# .net - 为什么在混合模式程序集中不支持强版本控制？

> ID：10128990
> 
> 赞同：2
> 
> 时间：2012-04-12T17:50:44.957
> 
> 标签：.net, c++-cli, clr

我有一个应用程序使用插件模型在运行时加载程序集的情况。大多数这些程序集对随时间修改的公共程序集有进一步的依赖性。

例如，插件 A 依赖于版本 1 的 Common，插件 B 依赖于版本 2 的 Common。

插件是自包含的，并且公共程序集是强命名的，因此在纯托管环境中加载了不同的 Common 程序集，并且在来自不同 Common 版本的类型之间没有意外转换的危险，并且一切正常。

当从混合模式程序集加载时，这是一个要求，我们处于第一个加载的程序集“获胜”的情况。因此，在示例中，插件 B 将尝试加载 Common v1，在我们的例子中，由于旧版本的程序集中缺少一些类型，因此会引发 TypeLoadException。

我们如何强制 C++/CLI 环境遵守插件中引用的验证？

我们尝试过：

1.  /FU 编译器选项针对适当的版本

2.  #针对适当的版本使用

3.  .NET 参考对话框中使用强命名组件的特定版本参考。

这些都不能有效地让 V2 程序集被引用。

更新：这里有更多关于系统的细节，它很敏感，所以我会坚持上面的 A/B 语言。

CommonAssembly.dll v1 和 v2 (C#) 强命名

PluginA：使用 /clr 编译的 C++/CLI，使用 /FU 编译器选项引用的 CommonAssembly v1

PluginB：使用 /clr 编译的 C++/CLI，使用 /FU 编译器选项引用的 CommonAssembly v2

主应用程序：非托管——在运行时加载 PluginA 和 PluginB，没有直接引用。

非托管应用程序加载 PluginA，后者加载 CommonAssembly v1。然后应用程序尝试加载需要 CommonAssembly v2 的 PluginB。CLR 尝试改用 v1，但出现 TypeLoadException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:21:17.507

混合模式程序集包含一个本机部分，您不能将此本机部分的多个副本加载到单个进程中。

混合模式程序集也不能很好地与 AppDomains 配合使用，因为本机部分是进程范围的。

重命名其中一个版本可能会有一些运气，因为这就是 Windows 跟踪本机 DLL 的方式。

# xslt - 返回一组元素的页码（针对 XSLT 1.0/msxsl 的优化）

> ID：10128993
> 
> 赞同：1
> 
> 时间：2012-04-12T17:50:52.827
> 
> 标签：xslt, xslkey

这不是“我如何做 xxx”，而是“我如何以最佳方式做 xxx？” （真的希望挑战漂浮 Dimitre 的船......）

由于 XSL 处理器的限制（msxsl - 基本上是带有 node-set()、replaces() 和 matches() 扩展函数集的 XSLT 1.0），以下所有内容都变得复杂了。

我正在从书中的某些元素中生成一些元数据 - 比如说章节和 div[title] 元素（为了简化我们的数据模型）。

书中的页码由混合文本节点中的处理指令给出，可能如下所示：

```
<?Page pageId="256"?> 
```

我的元素需要关联的页码要么是第一个后代（如果分页符本质上是一章内的第一条内容（即章节从一个新页面开始）），或者前面的第一个::processing-instruction('Page')。

让我们组成一个示例文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<book>
    <chapter>
        <title><?Page pageId="1"?>Chapter I</title>
        <div>
            <p>Introduction to Chapter</p>
            <p>Second paragraph <?Page pageId="2"?>of introduction</p>
        </div>
        <div>
            <title>Section I</title>
            <p>A paragraph</p>
            <p>Another paragraph<?Page pageID="3"?></p>
        </div>
    </chapter>
    <chapter>
        <title><?Page pageId="4"?>Chapter II</title>
        <div>
            <p>Introduction to Chapter</p>
            <p>...</p>
        </div>
    </chapter>
</book> 
```

（请注意，虽然这里的每一章都从一个新页面开始，但我们通常不能保证这一点。在第 1 章的末尾有一个空白页，这是我们常见的）。

我想得到一些这样的信息（我对 XSLT 基础知识很好，我们有兴趣选择页码）：

```
<meta>
    <meta>
        <field type="title">Chapter I</field>
        <field type="page">1</field>
        <meta>
            <field type="title">Section I</field>
            <field type="page">2</field>
        </meta>
    </meta>
    <meta>
        <field type="title">Chapter II</field>
        <field type="page">4</field>
    </meta>
</meta> 
```

我可以使用 xsl:when 语句和后代轴来做各种事情来决定哪个页码是合适的，但我更喜欢在处理指令上做一些巧妙的匹配，因为目前在大书上使用后代轴正在做事情太慢而无法使用。键会很好，但是由于在 @use 或 @match 属性中既不能使用变量，也不能使用其他键（同样不能使用序列构造函数），事情变得更加复杂。

目前，我有兴趣为其查找页码的元素是在一个键中定义的（现实世界的数据要复杂得多），如下所示：

```
<xsl:key name="auth" match="chapter|div[title]" use="generate-id()"/> 
```

任何建议或指点都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:27:34.133

**这是一个使用密钥的解决方案，它可能是有效的**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kPage"
   match="chapter/title/processing-instruction('Page')"
   use="generate-id(..)"/>

 <xsl:key name="kPage"
   match="processing-instruction('Page')"
   use="generate-id(following::div[title][1]/title)"/>

 <xsl:template match="*">
  <xsl:apply-templates select=
   "*[1]|following-sibling::*[1]"/>
 </xsl:template>

 <xsl:template match="chapter/title[1] | div/title[1]">
  <meta>
    <field type="title"><xsl:value-of select="."/></field>
    <field type="page">
      <xsl:variable name="vPiText"
           select="key('kPage', generate-id())[last()]"/>
      <xsl:value-of select=
      "translate($vPiText,
                 translate($vPiText, '01234567890', ''),
                 ''
                 )"/>
    </field>

    <xsl:apply-templates select="*[1]|following-sibling::*[1]"/>
  </meta>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<book>
    <chapter>
        <title>
            <?Page pageId="1"?>Chapter I</title>
        <div>
            <p>Introduction to Chapter</p>
            <p>Second paragraph 
                <?Page pageId="2"?>of introduction</p>
        </div>
        <div>
            <title>Section I</title>
            <p>A paragraph</p>
            <p>Another paragraph
                <?Page pageID="3"?></p>
        </div>
    </chapter>
    <chapter>
        <title>
            <?Page pageId="4"?>Chapter II</title>
        <div>
            <p>Introduction to Chapter</p>
            <p>...</p>
        </div>
    </chapter>
</book> 
```

**产生了想要的正确结果**：

```
<meta>
   <field type="title">Chapter I</field>
   <field type="page">1</field>
   <meta>
      <field type="title">Section I</field>
      <field type="page">2</field>
   </meta>
</meta>
<meta>
   <field type="title">Chapter II</field>
   <field type="page">4</field>
</meta> 
```

# ruby-on-rails - 可以在不擦除数据库的情况下 rake db:schema:load

> ID：10128995
> 
> 赞同：2
> 
> 时间：2012-04-12T17:51:02.740
> 
> 标签：ruby-on-rails, migration

我一直在处理我的开发数据库，​​并准备将其转移到生产中。我在 Rails 之外进行了一些编辑，所以我的所有更改都没有迁移。我知道我可以`rake db:schema:dump`生成一个 schema.rb 文件，但是我可以将它应用于已经填充的生产数据库而不擦除数据吗？类似于`rake db:schema:load`不擦除数据的东西？

如果没有，我是否只需要手动创建能够赶上生产数据库的迁移？如果我确实进行了这些迁移，那么将来`rake db:migrate`对 dev 框的所有调用是否都会失败，因为迁移中的更改已经存在于 dev db 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:21:59.660

问题`rake db:schema:load`在于它将强制创建表，您可以在以下位置看到`db/schema.rb`：

```
create_table :users, :force => true do |t|
  # etc
end 
```

我建议您创建缺少的迁移。`schema_migrations`您可以通过手动将时间戳添加到表中来修复本地开发数据库。这就是手动更改架构的结果。

我个人始终确保`rake db:migrate:reset`（删除所有表并从头开始迁移）将产生相同`db/schema.rb`的`rake db:schema:dump`结果。数据库模式中的任何更改都必须通过迁移自动化。您甚至可以通过运行`rake db:migrate:reset`而不是断言它`db/schema.rb`与源代码控制中的内容没有变化，从而使其成为 CI 脚本的一部分。

# java - 如何将光标放在 NetBeans Java 文件模板中？

> ID：10128996
> 
> 赞同：4
> 
> 时间：2012-04-12T17:51:11.163
> 
> 标签：java, netbeans, code-templates

在 NetBeans 中创建接口、类等时，我希望光标位于 JavaDoc 区域。您可以`${cursor}`用于非基于文件的模板，但这不适用于文件模板。

```
<#if package?? && package != "">
package ${package};

</#if>
/**
 * ${cursor}     <-- Inserts a message that "cursor" is an unknown variable. :(
 *
 * @author ${user}
 */
public class ${name}
{

} 
```

文件模板是否有类似的机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:06:00.130

由于某种原因，此功能尚未实现（尚未）。有关详细信息，请参阅[此问题](http://netbeans.org/bugzilla/show_bug.cgi?id=211872)。

# java - 如何创建不可变类

> ID：10128999
> 
> 赞同：-3
> 
> 时间：2012-04-12T17:51:21.887
> 
> 标签：java

我想让下面的类不可变。谁能提供一个在java中创建不可变类的简单示例？

```
class Emp implements Comparable
{
      String name,job;
      int salary;
      public Emp(String n,String j,int sal)
      {
         name=n;
         job=j;
         salary=sal;
       }
      public void display()
      {
        System.out.println(name+"\t"+job+"\t"+salary);
       }
     public boolean equals(Object o)
      {

        // use a shortcut comparison for slightly better performance; not really required  
            if (this == o)  
            {  
                return true;   
            }  
            // make sure o can be cast to this class  
            if (o == null || o.getClass() != getClass())  
            {  
                // cannot cast  
                return false;  
            }            
            // can now safely cast       
          Emp p=(Emp)o;
          return this.name.equals(p.name)&&this.job.equals(p.job) &&this.salary==p.salary;
       }
      public int hashCode()
       {
          return name.hashCode()+job.hashCode()+salary;
       }

       public int compareTo(Object o)
       {
          Emp e=(Emp)o;
          return this.name.compareTo(e.name);
           //return this.job.compareTo(e.job);
        //   return this.salary-e.salary;

        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:54:13.753

只需将类的所有字段标记为`final`，并且不要将它们分配给除类的构造函数之外的任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:56:03.957

此外，最好将类设为 final，或者只提供私有构造函数和静态工厂方法。这意味着人们不能继承你的类并覆盖你的方法。

例如：

```
public class Immutable {
    private final String value;
    private Immutable(String value) {
        this.value = value;
    }
    public static Immutable create(String value) { return new Immutable(value); }
    public String getValue() { return value; }
} 
```