# StackOverflow 问答 10127000-10127999

# jquery - tagit 自动完成功能不适用于 IE9

> ID：10127000
> 
> 赞同：1
> 
> 时间：2012-04-12T15:39:40.893
> 
> 标签：jquery, python, forms, jquery-ui-autocomplete, tag-it

我正在尝试使用 tagit 自动完成（[http://webspirited.com/tagit/](http://webspirited.com/tagit/)）。演示页面适用于所有浏览器。我在 forms.py 中有一个用于自动完成小部件的类，其中我有以下 tagit 代码

```
js = "$('#%s').tagit({\
    tagSource: '%s?type=%s',\
    minLength:2,\
    select:true,\
    initialTags: %s,\
    allowNewTags: false, \
});" % \
(autocomplete_id, url, name, json.dumps(tags));
return u"<ul%s /><script type='text/javascript'>%s</script>" % (flatatt(auto_final_attrs), js) 
```

网址是：

```
http://localhost:8000/search/terms/auto?type=naics_code 
```

url 被命中并且 json 响应数据出现在 IE9 控制台中。但是，不会出现自动完成框。这个问题只存在于IE9中。我正在使用 jquery 1.7.1 和 jquery-ui-1.8.2-custom。我也用 jquery-1.8.18-custom 尝试过，但没有任何变化。如果我使用一些预定义的标签数组，`tagSource`它在 IE9 中可以正常工作，但如果我尝试从 url 获取数据，即使我对 url 进行硬编码，它也不起作用。

我想在发布问题时实现我们在 Stack Overflow 上的 Tags 选项，但显示的数据应该来自 url。我的问题是它不适用于 IE9，但不适用于所有其他浏览器。我没有为旧版本的 IE 尝试它，因为我们正在为 IE9+ 实现项目

任何帮助是极大的赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:00:28.843

查看此模板：[http ://tag-it-autocomplete.heroku.com/](http://tag-it-autocomplete.heroku.com/)

它适用于自动完成（AJAX 之一，而不仅仅是预加载的标签）。

这是来源：[https ://github.com/makaroni4/tag-it-autocomplete](https://github.com/makaroni4/tag-it-autocomplete)

Tagit 配置如下所示：

```
$(document).ready(function() {
  $("#mytags").tagit({
    tagSource: function(search, showChoices) {
      var that = this;
      $.ajax({
        url: "/tags/autocomplete.json",
        data: {q: search.term},
        success: function(choices) {
          showChoices(that._subtractArray(choices, that.assignedTags()));
        }
      });
    },
    show_tag_url: "/tags/",
    singleField: true,
    singleFieldNode: $('#submit_tag_names')
  });
}); 
```

这里**q** - 是获取请求的参数，**“/tags/”** - 每个标签的路径，所以如果你有'rails'标签将是带有'/tags/rails'路径的链接。

似乎这是您使用 Tag-it 所需的一切！

# javascript - 将真/假绑定到 Knockout JS 中的单选按钮

> ID：10127001
> 
> 赞同：84
> 
> 时间：2012-04-12T15:39:46.943
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, knockout-2.0

在我的视图模型中，我有一个值为真或假的 IsMale 值。

在我的 UI 中，我希望将其绑定到以下单选按钮：

```
<label>Male
   <input type="radio" name="IsMale" value="true" data-bind="checked:IsMale"/>
</label> 
<label>Female
   <input type="radio" name="IsMale" value="false" data-bind="checked:IsMale"/>
</label> 
```

我认为的问题是`checked`需要一个字符串“true”/“false”。所以我的问题是，我怎样才能得到这个带有这个 UI 和模型的 2-way 绑定？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-12-24T17:24:04.320

我知道这是一个旧线程，但我遇到了同样的问题，并发现了一个更好的解决方案，可能在这个问题得到正式回答后被添加到淘汰赛中，所以我会把它留给有同样问题的人。

目前不需要扩展器、自定义绑定处理程序或计算。只需提供一个“checkedValue”选项，它将使用它而不是 html 'value' 属性，并且您可以通过它传递任何 javascript 值。

```
<input type="radio" name="a" data-bind="checked:IsChecked, checkedValue: true"/>
<input type="radio" name="a" data-bind="checked:IsChecked, checkedValue: false"/> 
```

或者：

```
<input type="radio" name="b" data-bind="checked:Quantity, checkedValue: 1"/>
<input type="radio" name="b" data-bind="checked:Quantity, checkedValue: 2"/>
<input type="radio" name="b" data-bind="checked:Quantity, checkedValue: 3"/> 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-04-12T15:57:51.297

一种选择是使用[可写的计算 observable](http://knockoutjs.com/documentation/computedObservables.html#writeable_computed_observables)。

在这种情况下，我认为一个不错的选择是使可写计算的可观察对象成为可观察对象的“子可观察对象” `IsMale`。您的视图模型如下所示：

```
var ViewModel = function() {
   this.IsMale = ko.observable(true);

   this.IsMale.ForEditing = ko.computed({
        read: function() {
            return this.IsMale().toString();  
        },
        write: function(newValue) {
             this.IsMale(newValue === "true");
        },
        owner: this        
    });          
}; 
```

您可以将其绑定在您的 UI 中，例如：

```
<label>Male
   <input type="radio" name="IsMale" value="true" data-bind="checked:IsMale.ForEditing"/>
</label> 
<label>Female
   <input type="radio" name="IsMale" value="false" data-bind="checked:IsMale.ForEditing"/>
</label> 
```

示例：http: [//jsfiddle.net/rniemeyer/Pjdse/](http://jsfiddle.net/rniemeyer/Pjdse/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-12T15:54:15.090

这对我有用：

[http://jsfiddle.net/zrBuL/291/](http://jsfiddle.net/zrBuL/291/)

```
<label>Male
   <input type="radio" name="IsMale" value="1" data-bind="checked:IsMale"/>
</label> 
<label>Female
   <input type="radio" name="IsMale" value="0" data-bind="checked:IsMale"/>
</label> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-29T00:59:32.707

```
ko.bindingHandlers['radiobuttonyesno'] = {
    'init': function (element, valueAccessor, allBindingsAccessor) {
        var stateHandler = function (property, allBindingsAccessor, key, value, checkIfDifferent) {
            if (!property || !ko.isObservable(property)) {
                var propWriters = allBindingsAccessor()['_ko_property_writers'];
                if (propWriters && propWriters[key])
                    propWriters[key](value);
            } else if (ko.isWriteableObservable(property) && (!checkIfDifferent || property.peek() !== value)) {
                property(value);
            }
        };

        var updateHandler = function () {
            var valueToWrite;

            if ((element.type == "radio") && (element.checked)) {
                valueToWrite = element.value;
            } else {
                return; // "radiobuttonyesno" binding only responds to selected radio buttons
            }

            valueToWrite = (valueToWrite === "True") ? true : false;

            var modelValue = valueAccessor(), unwrappedValue = ko.utils.unwrapObservable(modelValue); //can be true of false

            stateHandler(modelValue, allBindingsAccessor, 'checked', valueToWrite, true);
        };
        ko.utils.registerEventHandler(element, "click", updateHandler);

        // IE 6 won't allow radio buttons to be selected unless they have a name
        if ((element.type == "radio") && !element.name)
            ko.bindingHandlers['uniqueName']['init'](element, function () { return true });
    },
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());

        value = value ? "True" : "False";

        if (element.type == "radio") {
            element.checked = (element.value == value);
        }
    }
}; 
```

使用这个 binder 而不是创建愚蠢的 ko 计算 observables。

例子：

```
<label>Male
        <input type="radio" name="IsMale" value="True" data-bind="radiobuttonyesno:IsMale"/>
     </label> 
     <label>Female
        <input type="radio" name="IsMale" value="False" data-bind="radiobuttonyesno:IsMale"/>
     </label> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-24T15:53:07.983

一旦您发现**单选按钮的初始匹配只想匹配一个字符串**并且想要将值设置为字符串，**只需将初始值转换为字符串即可。**我不得不用 Int 值来解决这个问题。

设置好 observables 后，将值转换为字符串，KO 将从那里发挥它的魔力。如果您使用单独的线进行映射，请在这些线中进行转换。

在示例代码中，我使用 Json 在单个命令中映射整个模型。然后让 Razor 在引号之间插入值以进行转换。

```
script type="text/javascript">
    KoSetup.ViewModel = ko.mapping.fromJS(@Html.Raw(Json.Encode(Model)));
    KoSetup.ViewModel.ManifestEntered("@Model.ManifestEntered");       //Bool
    KoSetup.ViewModel.OrderStatusID("@Model.OrderStatusID");           //Int
</script> 
```

在开发过程中，我在网页底部使用了“将其全部转储到屏幕上”。

```
<h4>Debug</h4>
<pre data-bind="text: ko.toJSON($data, null, 2)"></pre> 
```

这是数据值，**之前**

```
"OrderStatusID": 6,
"ManifestEntered": true, 
```

并且，**之后**

```
"OrderStatusID": "6",
"ManifestEntered": "True", 
```

在我的项目中，我不需要转换布尔值，因为我可以使用没有同样挫败感的复选框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-28T04:47:57.797

为什么不简单地真假而不是 1 和 0？

```
 <label>Male
    <input type="radio" name="IsMale" value="true" data-bind="checked:IsMale"/>
 </label> 
 <label>Female
    <input type="radio" name="IsMale" value="false" data-bind="checked:IsMale"/>
 </label> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-06T12:33:37.353

您还可以使用[扩展器](http://knockoutjs.com/documentation/extenders.html)，以便将它们重用于更多可观察对象：

```
ko.extenders.boolForEditing = function (target, allowNull) {
    var result = ko.computed({
        read: function () {
            var current = target();
            var newValue = null;
            if (current === undefined || current === null || current === '') {
                if (!allowNull) {
                    newValue = 'false';
                }
            } else {
                newValue = current ? 'true' : 'false';
            }
            return newValue;
        },
        write: function (newValue) {
            var current = target();
            var valueToWrite = null;
            if (newValue === undefined || newValue === null || newValue === '') {
                if (!allowNull) {
                    valueToWrite = false;
                }
            } else {
                valueToWrite = newValue === 'true';
            }
            // only write if it changed
            if (valueToWrite !== current) {
                target(valueToWrite);
            } else {
                if (newValue !== current) {
                    target.notifySubscribers(valueToWrite);
                }
            }
        }
    }).extend({
        notify: 'always'
    });

    result(target());

    return result;
}; 
```

然后像这样使用它：

```
this.IsMale.forEditing = this.IsMale.extend({boolForEditing: true}); 
```

提供的参数`boolForEditing`指示该值是否可以为空。

见[http://jsfiddle.net/G8qs9/1/](http://jsfiddle.net/G8qs9/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-30T09:24:46.407

在对 3.0 之前的旧版本淘汰赛进行了大量研究之后，可能有两个最佳选择

创建一个像

```
ko.extenders["booleanValue"] = function (target) {
    target.formattedValue = ko.computed({
        read: function () {
            if (target() === true) return "True";
            else if (target() === false) return "False";
        },
        write: function (newValue) {
            if (newValue) {
                if (newValue === "False") target(false);
                else if (newValue === "True") target(true);
            }
        }
    });

    target.formattedValue(target());
    return target;
}; 
```

要在模型上使用扩展器，您需要执行以下操作：

```
function Order() {
  this.wantsFries= ko.observable(false).extend({ booleanValue: null });
}

<span>Do you want fries with that?</span>
<label>
  <input type="radio" name="question" value="True"
             data-bind="value: wantsFries.formattedValue" /> Yes
</label>
<label>
  <input type="radio" name="question" value="False"
             data-bind="value: wantsFries.formattedValue" /> No
</label> 
```

来源：[http ://www.timlabonne.com/2013/02/building-a-knockout-js-extender-for-boolean-values/](http://www.timlabonne.com/2013/02/building-a-knockout-js-extender-for-boolean-values/)

# android - 使用菜单转到android中的另一个类

> ID：10127002
> 
> 赞同：1
> 
> 时间：2012-04-12T15:39:51.367
> 
> 标签：android, android-menu

我想在android中使用菜单功能从一个类导航到另一个类..我该怎么做？请帮助...这是我的代码：

```
 public boolean onCreateOptionsMenu(Menu menu)
 {

    menu.add("View Map");
     MenuInflater inflater= getMenuInflater();
     inflater.inflate(R.menu.menu, menu);
     return true;

 }
 @Override
 public boolean onOptionsItemSelected(MenuItem item)
 {
     switch(item.getItemId())
     {
     case R.id.viewMap: {
         Intent in=new Intent(Service.this,Map.class);
                             startActivity(in);}
                             break;
     }          
     return true;
 } 
```

我收到这些错误：

```
04-12 21:27:01.436: E/AndroidRuntime(543): FATAL EXCEPTION: main
04-12 21:27:01.436: E/AndroidRuntime(543): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.aid/com.aid.Map}: java.lang.NullPointerException
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.os.Looper.loop(Looper.java:130)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-12 21:27:01.436: E/AndroidRuntime(543):  at java.lang.reflect.Method.invokeNative(Native Method)
04-12 21:27:01.436: E/AndroidRuntime(543):  at java.lang.reflect.Method.invoke(Method.java:507)
04-12 21:27:01.436: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-12 21:27:01.436: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-12 21:27:01.436: E/AndroidRuntime(543):  at dalvik.system.NativeStart.main(Native Method)
04-12 21:27:01.436: E/AndroidRuntime(543): Caused by: java.lang.NullPointerException
04-12 21:27:01.436: E/AndroidRuntime(543):  at com.aid.Map.onCreate(Map.java:59)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-12 21:27:01.436: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:07:00.247

您正确启动了活动，但地图活动中有错误。您在 Map.java 第 59 行中得到一个空指针异常，该异常会使您的应用程序崩溃。这些行指出了错误：

```
E/AndroidRuntime(543): Caused by: java.lang.NullPointerException 04-12 21:27:01.436:            
E/AndroidRuntime(543): at com.aid.Map.onCreate(Map.java:59) 04-12 21:27:01.436: 
```

# jquery - jquery/coffeescript插件从插件外部访问方法

> ID：10127007
> 
> 赞同：1
> 
> 时间：2012-04-12T15:40:02.833
> 
> 标签：jquery, function, plugins, coffeescript, public

我知道这个问题已经被问过好几次了，但是所有的答案都让我感到困惑，因为我不确定如何让咖啡脚本代码编译成指定的 jquery 代码。

这是我到目前为止所拥有的：

```
pluginName = 'tagbox'

states = 
  none: 0
  typing: 1
  altering: 2        

defaults =
  editing: true
  tags: []

class Plugin
  constructor: (@element, options) ->
    @options = $.extend {}, defaults, options
    @_defaults = defaults
    @_states = states
    @state = states.none
    @_name = 'tagbox'
    @currentTag = $("<div class='ui-individualtag'></div>")

  # this is the public method I want
  setCurrentTag: (tagText) ->
    @currentTag.text(tagText)

$.fn[pluginName] = (options) ->
  @each ->
    if !$.data(this, "plugin_#{pluginName}")
      $.data(@, "plugin_#{pluginName}", new Plugin(@, options))
)(jQuery, window, document) 
```

然后在另一个脚本中，我希望能够像这样访问 setCurrentTag 方法：

```
tagbox = $('#tagbox').tagbox()
tagbox.setCurrentTag("hello world") 
```

让我知道它是否有助于在 jquery 中显示它编译成的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:42:53.003

你的问题是`tagbox`：

```
tagbox = $('#tagbox').tagbox() 
```

将是一个 jQuery 对象，并且没有`setCurrentTag`方法。您不想尝试更改它，因为这会破坏通常的 jQuery 链接行为。解决此问题的一种方法是为`tagbox`插件提供足够的智能来解析其参数，以便您可以传递方法名称：

```
$('#tagbox').tagbox('setCurrentTag', 'hello world') 
```

这是[jQuery-UI](http://jqueryui.com/)采用的方法，所以很多 jQuery 人应该熟悉它。

你需要做的就是修改你`$.fn.tagbox`的看起来更像这样：

```
$.fn[pluginName] = (options = {}) ->
  if $.isPlainObject options
    @each ->
      if !$.data(@, "plugin_#{pluginName}")
        $.data(@, "plugin_#{pluginName}", new Plugin(@, options))
  else
    args = Array.prototype.slice.call(arguments);
    @each ->
      p = $.data(@, "plugin_#{pluginName}")
      p[args[0]](args[1]) 
```

演示：http: [//jsfiddle.net/ambiguous/q2U7d/](http://jsfiddle.net/ambiguous/q2U7d/)

需要注意的一些事项：

1.  我添加了一个默认值 ( `(options = {}) ->`)，这样它`options`就会一直存在。
2.  我们可以使用 来检查我们是否有一个选项对象[`$.isPlainObject`](http://api.jquery.com/jQuery.isPlainObject/)，如果没有选项，那么我们可以假设我们正在做一个方法调用。这就是为什么我们想要**1**中的默认值。
3.  我们使用`Array.prototype.slice.call`hack 将类数组转换[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)为真正的数组，以使其更易于使用。我们不必这样做，但如果我们想使用 Array 方法（例如`pop`）并且无论如何我们需要在回调`arguments`内部引用外部，它可以避免一些混乱：是上下文敏感的，就像在 (Coffee|Java) 中一样脚本。`@each``arguments``this`

# javascript - SoundManager2 onplay 事件配置不起作用

> ID：10127009
> 
> 赞同：2
> 
> 时间：2012-04-12T15:40:13.747
> 
> 标签：javascript, audio, google-analytics, soundmanager2

我使用[SoundManager2](http://www.schillmania.com/projects/soundmanager2/)在我的网站上播放声音。

现在我想在每次用户播放声音时发送一个谷歌分析事件。

SoundManager2 的文档说您可以通过设置属性来捕捉“播放中”事件，但是在使用[360-ui-player](http://www.schillmania.com/projects/soundmanager2/demo/360-player/)时，这不起作用。

我像这样初始化 SoundManager2：

```
<link rel="stylesheet" type="text/css" href="/app/sm/360/360player.css" />
<link rel="stylesheet" type="text/css" href="/app/sm/flashblock.css" />

<script src="/app/sm/360/berniecode-animator.js" type="text/javascript"></script>
<script src="/app/sm/soundmanager2-nodebug-jsmin.js" type="text/javascript"></script>
<script src="/app/sm/360/360player.js" type="text/javascript"></script>

<script type="text/javascript">
  soundManager.url = '/app/sm/swf/';
  threeSixtyPlayer.config = {
    playNext: false, 
    autoPlay: false, 
    allowMultiple: false,
    loadRingColor: '#ccc',
    playRingColor: '#AB3C2E',
    backgroundRingColor: '#eee',
    animDuration: 500,
    onplay: function() {
      alert('Playing!'); // DOES NOT WORK!
    },
    animTransition: Animator.tx.veryBouncy
  }        
</script> 
```

**有没有人对此有有效的解决方案？**

我读到了人们在 SoundManager 源代码中更改 createSound() 函数的解决方案，但我很想看到一个解决方案，而无需像这样更改库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T22:28:09.053

今天我在soundmanager2的defaultOptions中设置的“onplay”回调也遇到了类似的问题，当360player播放歌曲时，soundmanager2没有调用它。

我发现 360player.js 调用`soundManager.createSound()`指定了它自己的“onplay”回调（`threeSixtyPlayer.events.play()`函数），从而覆盖了我的默认回调。

另外，请注意：没有`threeSixtyPlayer.config.onplay`可以为我所看到的设置属性。

一个非侵入性的解决方案应该是封装回调，例如：

```
var onplay360 = threeSixtyPlayer.events.play;

var myOnplay = function(){
  ... your stuff... ;
  onplay360.apply(this); // forces the scope to 'this' = the sound object
};

threeSixtyPlayer.events.play = myOnplay; 
```

希望这可以帮助。

干杯，马可

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:38:32.340

我有同样的问题。我搜索了答案，但似乎没有太多关于 360player.js 的文档。我想你只需要研究代码。我尝试了 Marco 的方法，但这对我不起作用。实际上对我有用的东西要简单得多。

```
threeSixtyPlayer.events.play = function(){ 
    //Do Something here like...
    alert('Are you serious?');
} 
```

这应该给你一个良好的开端。我相信其他事件也可以通过这种方式挂钩。

# actionscript-3 - 音量控制

> ID：10127013
> 
> 赞同：0
> 
> 时间：2012-04-12T15:40:23.633
> 
> 标签：actionscript-3

我有很多游戏反过来加载主要的主要 swf。

我在主菜单上有静音和取消静音按钮，每个游戏都有相同的按钮。

当我卸载/加载游戏时，我希望音量保持不变，这样他们的玩家就不必一直关闭音量。

AudioOff 是音量关闭时显示的按钮，AudioOn 是音量打开时显示的按钮。

关于如何做到这一点的任何想法？

编辑：

我现在得到的代码在游戏中保持音量打开或关闭，但按钮显示不正确，此代码..

```
if (SoundVolume.volume == 1)
{
    AudioOn.visible = false;
    AudioOff.visible = true;
}

if (SoundVolume.volume == 0)
{
    AudioOff.visible = false;
    AudioOn.visible = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:56:47.617

您可以使用 Flash Cookies 来存储用户的声音偏好： [http ://www.republicofcode.com/tutorials/flash/as3sharedobject/](http://www.republicofcode.com/tutorials/flash/as3sharedobject/)

如果保存的 cookie 首选项是静音所有声音，您可以使用以下代码：

```
var s:SoundTransform = new SoundTransform();
s.volume=0;
SoundMixer.soundTransform=s; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:57:39.530

你用什么来改变/加载/卸载游戏？

如果有一个主类在所有它后面运行，你可以有一个或两个变量与音量和开/关，每个游戏都可以在加载时获取值。每当其中一个游戏更改值时，他们应该将其传递回主类。

如果它为每个页面加载一个单独的页面，您需要对 cookie 做一些事情。您可以在每个游戏中使用 SharedObject 和菜单来保存音量和开/关变量。实际上，这对这两种情况都有效。SharedObject 教程[在这里](http://www.republicofcode.com/tutorials/flash/as3sharedobject/)。

# database-connection - 如何在 Hector API 中关闭与 Cassandra 集群的连接？

> ID：10127015
> 
> 赞同：1
> 
> 时间：2012-04-12T15:40:26.897
> 
> 标签：database-connection, cassandra, hector

这听起来像是一个愚蠢的问题，但我实际上查了一下，却找不到任何东西。我知道关闭数据库连接是一种很好的做法，这样您就不会意外地因未关闭的连接而使数据库陷入困境。但是，似乎没有任何 Hector API 函数可以“关闭”连接。

Cassandra 数据库完全有可能接受命令而不是连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:53:47.943

Hector 为您管理连接池。您不需要“关闭”连接。

Hector 默认打开 1/3 的 maxActive 连接（默认为 50）。这允许 Hector 在操作进入时快速响应并且不会浪费时间打开连接。这对于“热”等待请求的 Web 容器特别有用。

当 JVM 关闭时，连接将关闭。

# ndepend - NDepend CQL 查询为 LOC 返回 N/A

> ID：10127016
> 
> 赞同：1
> 
> 时间：2012-04-12T15:40:42.903
> 
> 标签：ndepend, cql

使用以下 CQL 查询：

```
SELECT  NAMESPACES WHERE NameLike "Test$" ORDER BY NbLinesOfCode DESC 
```

我得到一些结果显示“N/A”而不是 NbLinesOfCode 的数字。任何人都知道为什么会发生这种情况以及如何解决它？

注意：我尝试将 NbLinesOfCode 更改为 NbILInstructions，结果记录均未显示 N/A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:36:41.913

这里可能有两件事：

*   如果[NbLinesOfCode](http://www.ndepend.com/Metrics.aspx#NbLinesOfCode)和[NbILInstructions](http://www.ndepend.com/Metrics.aspx#NbILInstructions)都显示 N/A，则表示命名空间没有任何代码，并且只包含没有代码的类型（如接口、委托或枚举）
*   如果只有[NbLinesOfCode](http://www.ndepend.com/Metrics.aspx#NbLinesOfCode)显示 N/A 但[NbILInstructions](http://www.ndepend.com/Metrics.aspx#NbILInstructions)显示某些内容，则意味着 NDepend 无法访问程序集 PDB。更多信息见：[了解 NDepend 分析输入](http://www.ndepend.com/Doc_CI_Inputs.aspx)

# python - 元组字典的列表理解

> ID：10127017
> 
> 赞同：0
> 
> 时间：2012-04-12T15:40:42.880
> 
> 标签：python

这有可能作为列表理解吗？

```
points = []
for partial in partials:
    for point in partials[partial]:
        if point[0] == time:
            points.append(partial) 
```

在python3中？

谢谢，

巴里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:42:14.393

Yes.

```
points = [partial
          for partial in partials
          for point in partials[partial]
          if point[0] == time] 
```

(Not sure what this is useful for, but at least this will do the same as your original code.)

# clojure - 过滤具有复杂嵌套结构的地图

> ID：10127023
> 
> 赞同：6
> 
> 时间：2012-04-12T15:41:03.277
> 
> 标签：clojure

什么是对复杂嵌套结构的嵌套字段施加条件的最佳方法，例如......

```
{
    :aa {:a "a_val",:b "b_val"},
    :qq {:abc 
            {
                :x1 {:x "abc",:u "ee"},
                :x2 {:y "abc",:i "ee"},
                :x3 {:x "abc",:i "ee"}
        }   
        },
    :ww {:xyz {
                :y1 {:x "abc",:u "ee"},
                :y2 {:y "abc",:i "0"},
                :y3 {:x "abc",:i "ee"}
              } 
        }
} 
```

我想检查“i”部分是否存在并且在 aa、qq 和 ww 中的每一个中都具有值“0”，并且取决于对 aa、qq 和 ww 的排除（或执行任何操作）。例如，如果“ww”在那个位置有“i”=“0”，那么得到如下图

```
{
    :ww {:xyz {
            :y1 {:x "abc",:u "ee"},
            :y2 {:y "abc",:i "0"},
            :y3 {:x "abc",:i "ee"}
            }   
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:08:23.110

```
user> (defn vvals [m] (when (map? m) (vals m)))
'user/vvals
user> (filter #(some #{"0"} (for [v (vvals (val %)), v (vvals v)] (:i v))) xx)
([:ww {:xyz {:y3 {:x "abc", :i "ee"}, :y2 {:y "abc", :i "0"}, :y1 {:x "abc", :u "ee"}}}]) 
```

# prolog - 如何写三个参数的关系

> ID：10127025
> 
> 赞同：0
> 
> 时间：2012-04-12T15:41:07.687
> 
> 标签：prolog

我想在序言中写一个关系，它需要三个参数。根据第一个和第二个参数，该值应分配给第三个参数。

例如：CctypeInt 是 0..2 关系（CctypeInt,[0-{2,3,4}, 1-{2,3}, 2-{2}],Ru1）

如果 CctypeInt 值为 0，则 {2,3,4} 应分配给 Ru1 如果 CctypeInt 值为 1，则 {2,3} 应分配给 Ru1 如果 CctypeInt 值为 2，则 {2} 应分配给 Ru1

列表中的第二个参数指示应该为 wchich CCtypeInt 值分配相应的列表。

我们如何定义与上述行为的关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:44:32.957

```
relation(CctypeInt,List,Ru1) :-
    member(CctypeInt-Ru1,List). 
```

# asp.net - 3次无效登录尝试后显示recapacha？

> ID：10127027
> 
> 赞同：0
> 
> 时间：2012-04-12T15:41:19.967
> 
> 标签：asp.net, vb.net, recaptcha

```
Private Sub CheckLogin()

If Failed == 3
    'show recapacha
    If Page.IsValid Then
    CheckLogin2()
    End If
End If
Else
Try
    'login code
    ' on password fail Failed+1
End Try
End If 
```

我拥有的是一个登录表单，但我不想在有 3 次无效登录尝试之前显示 recapacha。我不确定最好的方法。以上是一些样机代码，可以了解我的前进方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:57:27.127

```
Private Sub CheckLogin()

    'after the three attempts 
    If (LoginCount = 3) Then
        'show captcha code
        Return
    End If
    'your login code if found unsuccessful increase the counter
    LoginCount += 1

End Sub 
```

> 增加计数器并检查登录尝试次数的属性

```
Public Property LoginCount() As Integer
    Get
        If (ViewState("LoginCount") = Nothing) Then
            ViewState("LoginCount") = 0
        End If
        Return DirectCast(ViewState("LoginCount"), Integer)
    End Get
    Set(ByVal value As Integer)
        ViewState("LoginCount") = value
    End Set
End Property 
```

# jquery - Method 'slice' in IE8

> ID：10127031
> 
> 赞同：0
> 
> 时间：2012-04-12T15:41:33.617
> 
> 标签：jquery

Object doesn't support property or method 'slice'

```
jquery.js?ver=1.4.4 
```

I use slider "Coda-Slider". And It doesn't work in IE8. But if I include jquery-1.3.2.min.js, it work and in IE8, and in all other browsers. But I need exactly jQuery v.1.4.4.

What I should do?

# ruby-on-rails - bundle install fails with 'ERROR: Gem bundler not installed'

> ID：10127034
> 
> 赞同：2
> 
> 时间：2012-04-12T15:41:51.327
> 
> 标签：ruby-on-rails, gem, bundler

I have bundler-1.1.3 installed. I have an app that I am trying to get to run. but when I do

```
$cd my_app 
$bundle install 
```

the command fails with this error:

```
ERROR: Gem bundler not installed 
```

I can run bundle install from anywhere else on the sytem, but not within the app folder. What could be the problem ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T22:44:01.123

The .rvmrc file in the directory of the app is saying it needs 1.9.2 to run. RVM has a concept of gem sets that are associated with different versions of ruby on your comptuer. You probably don't have the bundler gem installed under your 1.9.2 version of ruby but another version, perhaps 1.8.7 or 1.9.3.

```
$ cd my_app
$ rvm use 1.9.2
$ gem install bundle
$ bundle install 
```

# c - x86 addl 与 subl

> ID：10127036
> 
> 赞同：5
> 
> 时间：2012-04-12T15:41:56.380
> 
> 标签：c, assembly, compiler-construction, x86, clang

我只是注意到 Clang 编译了这个语句（当然没有任何优化）：

```
--x; /* int x; */ 
```

进入：

```
addl    $4294967295, %ecx       ## imm = 0xFFFFFFFF 
```

为什么？使用`addl`而不是“明显”有什么好处`subl`吗？或者它只是一个实施事实？

让我着迷的是这个：

```
x -= 1; 
```

变成：

```
subl    $1, %eax 
```

叮当信息：

```
Apple clang 3.0 版 (tags/Apple/clang-211.12) (基于 LLVM 3.0svn)
目标：x86_64-apple-darwin11.2.0
线程模型：posix

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T07:31:37.047

这种行为与 clang 处理预减量的方式有关，而不是像 sub-and-assign 这样的二元运算符。请注意，我将尝试在 clang 级别解释为什么您会看到这种行为。我不知道为什么选择以这种方式实现它，但我想这只是为了便于实现。

我在这里引用的所有函数都可以在 class `ScalarExprEmitter`inside 中找到`lib/CodeGen/CGExprScalar.cpp`。

该函数以相同的方式处理前/后减量/增量：根据表达式分别是增量还是减量，发出`EmitScalarPrePostIncDec`LLVM`add`指令，其中一个`1`或作为第二个参数。`-1`

所以，

```
--x 
```

最终会在 LLVM IR 中像

```
add i32 %x, -1 
```

很自然地，它转换为 x86 就像

```
add $0xffffffff, %ecx 
```

另一方面，二元运算符的处理方式都不同。在你的情况下，

```
x -= 1 
```

将由`EmitCompoundAssign`which 依次调用来处理`EmitSub`。将发出类似于以下 LLVM IR 的内容：

```
sub i32 %x, 1 
```

# ios - 在 iTunes Connect 上线之前更改版本

> ID：10127037
> 
> 赞同：4
> 
> 时间：2012-04-12T15:41:56.567
> 
> 标签：ios, app-store-connect, itunes-store, itunes-app

我有一个应用程序已提交到 iTunes 连接中的应用商店并获得批准但尚未发布。（发布日期定在未来）。版本号为 1.0.0。

在应用程序发布之前，我的客户决定他想要进行一些更改。于是我加了一个1.0.1版本，并提交到了应用商店。它也已获得批准并没有发布。

我的客户再次决定要进行一些更改。我现在制作了 1.0.2 版。我现在不能再在 iTunes connect 中添加一个版本，因为 1.0.1 还没有发布。

我的客户想在下周发布该应用程序以配合营销活动。我想计划在 iTunes 连接中发布 1.0.1 并提交 1.0.2。

我的问题是：

1.  当我发布 1.0.1 时，它会进入应用商店吗？我认为（并且不希望）不会，因为该应用程序的发布日期仍为未来设定，但我想确定一下。

2.  另一种方法是完全删除 1.0.1，但我认为没有办法做到这一点。我最初描述的方式是完成我想要的适当方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:49:47.030

1.  是的，只要您自动或手动发布，它就会实时推送到 App Store。
2.  我不确定您是否可以删除已被接受和批准的更新。我的建议是悄悄地发布它并立即提交您的 1.0.2 更新。等待时间大约为 5-6 个工作日，如果您想在营销活动的最后期限之前满足客户的要求，您没有很大的窗口。

# java - Java 6 中的 NTFS 文件权限

> ID：10127039
> 
> 赞同：1
> 
> 时间：2012-04-12T15:42:08.020
> 
> 标签：java, permissions, file-permissions, jdk1.6

可以使用 Java 6 检索 NTFS 文件系统中文件的所有权限吗？我知道在 Java 7 中它非常简单。任何人都知道一些框架来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:02:56.623

我不相信 Java 6 有底层的操作系统钩子来处理这个问题。您找到的任何库或代码示例都必须使用本机代码或类似 Runtime.exec() 的东西。如果你真的需要这个功能，你可能只想写一个函数来调用适当的 Windows 命令来检索这些权限。

另外，看看这个问题，就类似的主题进行一次很好的对话：[我如何以编程方式更改文件权限？](https://stackoverflow.com/questions/664432/how-do-i-programmatically-change-file-permissions)

# c# - Does MVC-3 include a library for composing rich (HTML) emails quickly and automatically?

> ID：10127045
> 
> 赞同：2
> 
> 时间：2012-04-12T15:42:19.467
> 
> 标签：c#, asp.net-mvc-3, email

I'd like my MVC-3 application to send out nicely formatted status emails. Is there a standard library that I can use to handle the dirty work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:25:27.357

No, MVC does not include anything related to sending emails. But it doesn't need to, because this functionality is built into .NET. There are many many many tutorials on how to send html emails in .NET. It's not a lot of code to do it either.

[http://www.4guysfromrolla.com/articles/080206-1.aspx](http://www.4guysfromrolla.com/articles/080206-1.aspx)

[http://www.4guysfromrolla.com/webtech/080801-1.shtml](http://www.4guysfromrolla.com/webtech/080801-1.shtml)

[http://www.search-this.com/2009/02/05/aspnet-sending-email-both-in-html-and-plain-text/](http://www.search-this.com/2009/02/05/aspnet-sending-email-both-in-html-and-plain-text/)

etc.. etc.. etc...

There are various third party libraries that improve things, such as MvcMailer, FluentEmail, etc.. Just search for email in NuGet and see the list.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T15:45:55.617

Take a look at [MvcMailer](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)

# coldfusion - ColdFusion组件中cfscript内的查询对象中的SQL中的单引号

> ID：10127046
> 
> 赞同：1
> 
> 时间：2012-04-12T15:42:27.830
> 
> 标签：coldfusion, hql, cfc

有点混乱的标题，但我会在这里尽量清楚。当在内部使用查询对象时`<cfscript>`，您的表单中有一些 sql：

```
 SELECT city + ', ' + state + ' ' + zip as Address2
 FROM users WHERE user_id = :userid 
```

ColdFusion 将出错。`:userid`是我使用添加的参数，当我删除状态和 zip 之间`addParam`的查询时，查询工作得很好。`' '`出于某种原因，添加该空间会导致查询对象出现问题，并且它在`:`符号附近给了我不正确的语法。

当我简单地使用时，这个查询也可以正常工作`<cfquery>`，但我想在`<cfscript>`. 有任何想法吗？这是一个错误吗？还是我错过了什么？

编辑：我正在使用 Coldfusion 9，MS SQL 2005，这是在 CFC 内使用 cfscript 语法完成的。像这样：

```
component
{
  public function getAgent(member_id)
  {
    qryAgent = new query(dataSource="Members");
    qryAgent.setName("get_agent");
    qryAgent.addParam(name="memberid",value=member_id,cfsqltype="CF_SQL_INTEGER");

    result = qryAgent.execute(sql="SELECT FirstName, LastName, FirstName + ' ' + LastName as FullName FROM Member m WHERE m.member_id = :memberid");
    return result.getResult();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:40:03.717

从发布的代码来看，您的语法对于 MS SQL 来说看起来很可靠。我在安装了 ACF 9 和 MS SQL Server 2008 的本地机器上运行了以下测试（我知道您使用的是 2005，但对于字符串连接之类的东西应该是相同的）。

```
<cfscript>
    qry = new query();
    qry.setDatasource("mydsn");
    qry.setName("myqry");
    qry.addParam(name="userid",value="3735",cfsqltype="cf_sql_integer");
    result = qry.execute(sql="SELECT firstname + ' ' + lastname AS fullname FROM mydb where userid = :userid");
    writeDump(result);
</cfscript> 
```

在浏览器中运行它会返回一个正确连接的“全名”值。

碰巧，这段代码片段是否有助于发现完整 cfscript 查询中的任何异常情况？如果没有，您是否可以发布更多与设置查询服务相关的代码？

编辑：我还使用以下 'result =' 表达式运行它，使其更像您正在执行的连接：

```
result = qry.execute(sql="SELECT firstname + ', ' + lastname + ' ' + email AS fullname FROM mydb where userid = :userid"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:17:55.463

在调试并找到答案后，我发现其他人已经在这里找到了这个：http: [//forums.adobe.com/thread/683656?](http://forums.adobe.com/thread/683656?tstart=-4) tstart=-4并且 adobe 已在 CF 9.0.1 中修复了它

问题出现在文件夹 ColdFusion9\CustomTags\com\adobe\coldfusion\query.cfc 中的 query.cfc 文件中。replaceDelimsWithMarkers 函数调用了 listtoarray（我的版本中的第 346 行）。此调用没有将第三个参数 includeEmptyFields 设置为 true，这导致我的 sql 字符串被破坏。

这可以通过添加 true 的第三个参数来手动修复。

# com - How do I convert a COM assembly to a CLR Assembly?

> ID：10127049
> 
> 赞同：3
> 
> 时间：2012-04-12T15:42:46.800
> 
> 标签：com

How Can I convert a COM server to a CLR Assembly so that I don't have to initially rewrite anything.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T21:54:18.567

****我在此处为 OP 发布了此内容，因为他们最初将其发布为对问题的编辑。****

我决定将其转换为 CLR 程序集，而不是在 .Net 中重写 COM 服务器（使用 C++/MFC 于 1992 年编写）。要获取 COM 程序集 (add32.exe) 并从 .Net 客户端使用它，我们需要创建一个可调用的包装器。使用 Visual Studio 命令提示符（以管理员身份）运行所有工具。

**步骤 1：使用强名称签署 COM 程序集**

![在此处输入图像描述](../Images/d6e650d17c7746e81e7083b4cfe14659.png)

**步骤 2：将 COM 类型库中的定义转换为 CLR 程序集**

使用工具 Tlbimp.exe 将 COM 类型库中的定义转换为 CLR 程序集。Tlbimp.exe 的输出是一个二进制文件（程序集），其中包含原始类型库中定义的类型的运行时元数据。输出是一个 DLL 文件。我指定了一个命名空间，以便我们可以轻松地将元数据包含在 .Net COM 客户端中。

![在此处输入图像描述](../Images/6ab3cb80743c8c3cebbfc7fbb427be2f.png)

**第 3 步：使用 ILDASM.EXE 查看程序集。**

![在此处输入图像描述](../Images/80fac5714402bb38b4edb5a743ee0ef9.png)

要使用 CLR 程序集，我们在解决方案中为它创建一个引用。浏览 dll 文件并将其添加为参考。

![在此处输入图像描述](../Images/8c7fc47c671d062e6e94d1cac444108f.png)

使用 COM 对象的客户端应使用步骤 2 中创建的命名空间导入元数据。

```
#using "Add32Pkg"; 
```

然后，使用 COM 功能：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using Add32Pkg;

namespace TestAdd32
{

    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {

            Add32Server Add32 = new Add32Server();
            Add32.Init(201);
        }
    }
} 
```

# django - 子类化模型字段时，不处理 __init__ 的参数

> ID：10127050
> 
> 赞同：0
> 
> 时间：2012-04-12T15:42:48.640
> 
> 标签：django, django-models

我有一个 models.ForeignKey 的子类，其唯一目的是使用自定义小部件：

```
from django.db import models
from .models import Images

class GAEImageField(models.ForeignKey):
    def __init__(self, **kwargs):
        super(GAEImageField, self).__init__(Images, **kwargs)

    def formfield(self, *args, **kwargs):
        field = forms.ModelChoiceField(self, widget=ImageUploadWidget, *args, **kwargs)
        field.queryset = Images.objects.all()
        return field 
```

问题是，当我尝试使用此字段时，`__init__`将忽略任何参数。例如，如果我尝试这个模型：

```
class SomethingWithImage(models.Model):
    name = models.CharField('Awesome name', max_length=64)
    image = GAEImageField(verbose_name='Awesome image', blank=True) 
```

...尽管我指定了verbose_name，但生成表单上的标签将是“图像”，即使我使用空白=真，尝试指定空值也会引发错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:19:48.013

嗯，问题出在你的`formfield`方法上。例如，如果您查看默认使用的实现`ForeignKey`，您会看到它调用`super`. 我会推荐这样的东西：

```
def formfield(self, **kwargs):
    defaults = {
        'widget': ImageUploadWidget,
    }
    defaults.update(kwargs)
    return super(GAEImageField, self).formfield(**defaults) 
```

问题是，表单字段不会从模型字段中提取任何信息。表单字段可以完全独立于模型使用，它们不必由模型字段支持。这意味着所有设置，例如字段是否必需，其标签等都必须作为参数传递给它们的构造函数。模型字段负责创建表单字段的适当实例，包括所有设置。的默认实现`django.db.models.fields.Field.formfield`负责处理这就是您通常要调用父方法的原因。

至于`blank`问题，也可以设置`null=True`，否则即使表单接受空值，数据库也会拒绝它。另外，请注意修改`null`after的值`syncdb`已经运行需要数据库迁移。

# junit - How to programmatically execute a test suite using JUnit4?

> ID：10127052
> 
> 赞同：10
> 
> 时间：2012-04-12T15:42:55.237
> 
> 标签：junit, automated-tests, junit4, test-suite

I am trying to invoke a JUnit Test suite using the API. I know that you can suite up test classes using the following:

```
@RunWith(Suite.class)
@Suite.SuiteClasses({
  Test1.class,
  Test2.class, ...
}) 
```

But, is there a way to trigger the entire suite using the Java API, using JUnitCore for example?

For example, you can trigger a test by using the following code:

```
Runner r = 
try {
  r = new BlockJUnit4ClassRunner(Class.forName(testClass));
} catch (ClassNotFoundException | InitializationError e) {
  // handle
}
JUnitCore c = new JUnitCore();
c.run(Request.runner(r)); 
```

**Update:**

From the API, it seems that the Suite class itself is a runner, hence the following code seems to work:

```
Suite suite = new Suite(klass, new RunnerBuilder() {
... // Implement methods
});
JUnitCore c = new JUnitCore();
c.run(Request.runner(suite)); 
```

But I am not sure if this is a recommended approach or if there is any downside to writing the above code.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T18:41:26.233

只需将套件类的名称指定给 JUnitCore：

```
Computer computer = new Computer();

JUnitCore jUnitCore = new JUnitCore();
jUnitCore.run(computer, MySuite.class); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T09:01:12.420

您也可以使用命令提示符作为

**java org.junit.runner.JUnitCore 测试类名**

# winapi - Select all text in edit contol by clicking Ctrl+A

> ID：10127054
> 
> 赞同：9
> 
> 时间：2012-04-12T15:43:06.570
> 
> 标签：winapi, visual-c++

How to select all text in edit control by pressing `Ctrl`+`A`? I can catch `Ctrl`+`A` for parent window in WndProc. But I don't know how to catch `ctrl`+`a` which are applied for edit control. Also I tried to use accelerators, but again it applies only for parent window. Thanks. EDIT: 1-st the simplest method This method Based on @phord's answers in this question: [win32 select all on edit ctrl (textbox)](https://stackoverflow.com/questions/291792/win32-select-all-on-edit-ctrl-textbox/315720#315720)

```
while( (bRet = GetMessage( &msg, NULL, 0, 0 )) != 0)
{ 
    if (bRet == -1)
    {
        // handle the error and possibly exit
    }
    else
    {
        if (msg.message == WM_KEYDOWN && msg.wParam == 'A' && GetKeyState(VK_CONTROL) < 0)
    {
        HWND hFocused = GetFocus();
        wchar_t className[6];
        GetClassName(hFocused, className, 6);
        if (hFocused && !wcsicmp(className, L"edit"))
            SendMessage(hFocused, EM_SETSEL, 0, -1);
    }
    TranslateMessage(&msg);
    DispatchMessage(&msg);
    }
} 
```

EDIT: 2-nd method Need to use CreateAcceleratorTable + TranslateAccelerator functions:

//global variables:

```
enum {ID_CTRL_A = 1};
HACCEL accel; 
```

//main procedure

```
ACCEL ctrl_a;
ctrl_a.cmd = ID_CTRL_A; // Hotkey ID
ctrl_a.fVirt = FCONTROL | FVIRTKEY;
ctrl_a.key = 0x41; //'A' key
accel = CreateAcceleratorTable(&ctrl_a, 1); //we have only one hotkey 
```

//How GetMessage loop looks

```
while( (bRet = GetMessage( &msg, NULL, 0, 0 )) != 0)
{ 
    if (bRet == -1)
    {
        // handle the error and possibly exit
    }
    else
    {
        if (!TranslateAccelerator(hWnd, accel,  &msg))
        {
            TranslateMessage(&msg); 
            DispatchMessage(&msg); 
        }
    }
} 
```

//in WndProc we must add next cases

```
case WM_COMMAND:
{
    if (LOWORD(wParam) == ID_CTRL_A && HIWORD(wParam) == 1)
    {
        //on which control there was pressed Ctrl+A
        //there is no way of getting HWND through wParam and lParam
        //so we get HWND which currently has focus.
        HWND hFocused = GetFocus();
        wchar_t className[6];
        GetClassName(hFocused, className, 6);
        if (hFocudsed && !wcsicmp(className, L"edit"))
            SendMessage(hFocused, EM_SETSEL, 0, -1);
    }
}
break;
case WM_DESTROY:
{
   DestroyAcceleratorTable(accel);
   PostQuitMessage(0);
}
break; 
```

As you can see this is pretty simple.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-18T03:16:40.253

无需处理 WM_KEYDOWN！我知道这里的大多数示例（以及 CodeProject 和许多其他地方）都说有，但它并不能解决每当出现未处理的 WM_CHAR 时产生的蜂鸣声。

相反，试试这个：

```
LRESULT CALLBACK Edit_Prc(HWND hwnd,UINT msg,WPARAM wParam,LPARAM lParam){
  if(msg==WM_CHAR&&wParam==1){SendMessage(hwnd,EM_SETSEL,0,-1); return 1;}
  else return CallWindowProc((void*)WPA,hwnd,msg,wParam,lParam);
} 
```

请记住使用 WPA=SetWindowLong(...) 将 EDIT 控件子类化到此 Edit_Prc() ，其中 WPA 是 CallWindowProc(...) 的窗口过程地址

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T03:19:07.610

首先更改编辑控件的 WindowProc：

```
if (!(pEditProc = (WNDPROC)SetWindowLong(hEdit, GWL_WNDPROC, (LONG)&EditProc)))
{
    assert(false);
    return false;
} 
```

然后在新窗口proc中，处理ctrl+a：

```
LRESULT CALLBACK EditProc( HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam )
{
    if (msg == WM_KEYDOWN) {
        if (GetKeyState(VK_CONTROL) & 0x8000 && wParam == 'A') {
            SendMessage(hwnd, EM_SETSEL, 0, -1);
        }
    }
    return CallWindowProc(pEditProc, hwnd, msg, wParam, lParam);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-25T06:43:54.370

好消息！

似乎编辑控件（不是多行）现在在 Win10 上原生支持 Ctrl + A。

我当前的 Windows SDK 版本是 10.0.17763.0。

仅在使用纯 Windows API 创建的简单 GUI 应用程序上进行测试。

MFC APP 应该有相同的结果。

测试二进制平台为x86，操作系统为Win10 x64。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-07T13:35:52.230

# 菜鸟证明版本？

我也使用加速器表编写了自己的版本。这稍微清除了 WinMain，我试图让所有东西都尽可能地证明 n00b（因为我是其中之一）。由于不需要枚举，因此也省略了枚举。

*如前所述，我只是使用winapi的初学者，所以如果我错了，请务必纠正我。*

在“Resource.h”中，我定义了两个 ID，一个用于我们将使用的加速器表，一个用于我们将使用的 selectall 命令。

**Resource.h 内部：**

```
#define IDR_ACCEL1 101
#define ID_SELECT_ALL 9003 
```

然后在资源文件中（在 vs2017 中这是*PROJECTNAME* .rc）我们定义了加速器表。 ***项目名称.rc*：**

```
IDR_ACCEL1 ACCELERATORS
{
    0x41, ID_SELECT_ALL, VIRTKEY, CONTROL // ctrl-A
} 
```

## 描述

0x41 是 virtkey 'a'。

ID_SELECT_ALL（将是命令的 ID，这应该是我们在 Resource.h 文件中定义的 ID。

VIRTKEY 关键字指示应将 0x41 解释为虚拟键。

CONTROL 是将 a 与 (ctrl+a) 组合所需的修饰符。

**然后在 WinMain 函数中加载加速器：**

```
HACCEL hAccel = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDR_ACCEL1));
if (hAccel == NULL)
{
    MessageBox(NULL, _T("Failed to load accelerator table!"),_T("Error"), MB_OK | MB_ICONEXCLAMATION);
    return 0;
} 
```

注意：在尝试定义 hAccel 之后，我们会检查是否分配了有效句柄。虽然这不是必需的，但我相信这是更好的约定。

**之后我们将 TranslateAccelerator 函数添加到消息循环中，因此可以在窗口过程中处理命令：**

```
BOOL bRet;
while (bRet = GetMessage(&Msg, NULL, 0, 0) > 0)
{
    if (bRet == -1)
    {
        // Error handling can be done here.
    }
    else if (!TranslateAccelerator(hwnd, hAccel, &Msg))
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
} 
```

**然后最后在Window过程里面** **我们添加如下代码：**

```
switch(msg)
{
    case WM_COMMAND:
       {
            switch (LOWORD(wParam))
            {
                case ID_SELECT_ALL:
                {
                    HWND hEdit;
                    hEdit = GetDlgItem(hwnd, IDC_MAIN_EDIT)  // Define IDC_MAIN_EDIT with an integer value in "Resource.h".
                }
                break;
            }
       break;
       }
} 
```

注意：传递给 WM_COMMAND 的消息是我们为 ctrl+a 加速定义的 ID。

我希望这将有助于其他 n00bies。

# javascript - 我们怎样才能在我们想要的任何时候加载一个对象？

> ID：10127057
> 
> 赞同：1
> 
> 时间：2012-04-12T15:43:14.443
> 
> 标签：javascript, jquery, html

我有个问题。我想知道是否有人告诉我如何在需要时使用 jquery 加载对象。例如，如果我单击按钮，则会加载图像。我的意思是不显示对象，我的意思是在单击按钮之前不会下载图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:44:47.240

在您的 HTML 中创建一个带有空`src`属性的图像标签，然后添加此 jQuery 代码，根据需要修改选择器。

```
$(function() {
    $("#myButton").click(function() {
        $("#myImage").attr("src", "myimgsrc.jpg");
    });
}); 
```

# android - 打算从原始文件夹播放声音

> ID：10127059
> 
> 赞同：1
> 
> 时间：2012-04-12T15:43:24.993
> 
> 标签：android, android-intent

我想使用系统音频/视频播放器从我的原始文件夹播放声音，但在触发意图时，我不断收到相同的“未找到处理意图的活动”消息（异常）。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse("android.resource://mypackagename/" + R.raw.audiofile), "audio/*"); 
startActivity(intent); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:07:00.017

Intent 系统的工作方式是，您的应用程序基本上是在说：“嘿，Android，我有这个 url，我想*查看*它。手机上是否有可以执行此操作的应用程序？”

对于 http url，您已经在手机上安装了浏览器，对于 google play url，它会向您显示 google play 商店作为选项等。如果您的手机上没有可以处理音频的应用程序资源（默认情况下没有安装任何对 android 意味着什么的资源）。

就像 Dirk 说的，你必须使用 MediaPlayer 来播放你的资源。MediaPlayer 页面非常漂亮：http: [//developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:21:17.683

请尝试以下操作（其中 soundfile 是原始文件夹中的文件名，不带扩展名。请仅使用小写字符）：

```
MediaPlayer player = MediaPlayer(this,R.raw.soundfile);

player.prepare();
player.start(); 
```

. . .

```
player.stop();
player.reset();
player.release();
player = null; 
```

[在这里](http://www.androiddevblog.net/android/playing-audio-in-android)找到。

# c++ - 打印用户给出的倒数的算法？

> ID：10127069
> 
> 赞同：3
> 
> 时间：2012-04-12T15:43:53.260
> 
> 标签：c++, algorithm

我用 C++ 编写了一个小程序，提示用户输入，用户给出一个数字，然后计算机显示数字反转。

例如：17 变为 71。123 变为 321。

这是程序：

```
#include <iostream>
#include <string>  //for later use.
using namespace std;

int rev(int x)
{
    int r = 0;
    while(x)
    {
        r = (r*10) + (x%10);
        x = x/10;
    }
    return r;
}

int main()
{
    int nr;
    cout << "Give a number: ";
    cin >> nr;
    rev(nr);
    cout << nr; 
    return 0;
} 
```

程序的最终结果：打印相同的数字，函数没有效果。我究竟做错了什么？我尝试了几种解决方案，但无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T15:46:33.050

您需要更改`rev(nr);`为`nr = rev(nr);`

或者将您的功能更改为：

```
void rev(int& x)
{
    int r = 0;
    while(x)
    {
        r = (r*10) + (x%10);
        x = x/10;
    }
    x = r;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T15:47:47.997

你做对了，但你没有抓住你的返回值（反转值）。

要解决这个问题，只需分配或打印返回值：

```
cout << rev(nr); 
```

或者

```
nr = rev(nr);
cout << nr; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T16:00:23.013

虽然可能不符合预期的精神，但简单的答案是，如果您只想反向显示它，您可以作弊并只使用字符串：

```
std::string input;

std::cin >> input;

std::cout << std::string(input.rbegin(), input.rend()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T15:46:58.840

您实际上并没有使用`rev`返回的值。您只是使用`nr`传递给 rev 的值，并且由于您不通过引用传递，因此 rev 不会在本地受到影响。

你想说的是：

```
int nr;
cout << "Give a number: ";
cin >> nr;
int result = rev(nr);
cout << result; 
return 0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T16:07:48.563

STL 中有一个`std::reverse`函数用于集合。

```
#include <algorithm>
#include <iostream>
#include <string>

int main() {

  long int i = 0;
  do {
    std::cout << "Gimme a number: " << std::endl;
  } while (not (std::cin >> i)); // make sure it *is* a number

  std::string display = std::to_string(i); // C++11

  std::reverse(display.begin(), display.end());

  std::cout << display << "\n";
} 
```

# objective-c - 方法、算法和 NSValue 问题中的递归性

> ID：10127073
> 
> 赞同：0
> 
> 时间：2012-04-12T15:44:08.203
> 
> 标签：objective-c, algorithm

```
-(BOOL)isInArray:(CGPoint)point{
    if ([valid count]==0) {
        return NO;
    }

    for (NSValue *value in valid) {
        CGPoint er=[value CGPointValue];

        if( CGPointEqualToPoint(point,er)) return NO;
    }
    return YES;
}

-(void)check:(CGPoint)next{

if (!next.y==0) {

    int ics=(int) next.x;
    int igrec=(int)next.y;

    if (mat[ics][igrec]==mat[ics-1][igrec]){

        if (![self isInArray:next]) {
            [valid addObject:[NSValue valueWithCGPoint:next]];
            NSLog(@"valid y!=0 : %@",valid);

            [self check:CGPointMake(ics-1, igrec)];
        }
    }
} 
```

}

y 是列，x 是行，mat 是 C 矩阵

我在这里尝试做的是：我`next`在矩阵中得到一个点， `mat`（我将使用 struct，但对于测试范围，我使用 CGPoint ..它基本上是同一件事），对于这一点，我检查它是否在第一行，如果不是，我检查值是否等于上面行的值。如果是，我将点的坐标添加到数组中并移动到上面的值（递归）。我也有左、右和下方的 ifs ......但想法是一样的。

我的问题：

*   出于某种原因，它不能正常工作，即使垫子上满是 1 值
*   我用来存储点的 NSMutableArray 始终为空（请注意，NSLog 被调用，因此它应该已经添加了一个对象）
    *   递归是否适用于方法？
    *   如果你有更好的想法如何做到这一点......我在听

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:39:33.687

“有效”数组为零，因为您尚未分配它。（你可以向 nil 指针发送一个 addObject: 消息或任何消息——它只是不做任何事情。）确保你有

```
valid = [[NSMutableArray alloc] init]; 
```

在您调用此代码之前的某个地方。

此外，“！next.y==0”是有问题的。它可能与 "next.y != 0" 相同，即使！== 的优先级更高，但我不能保证。这就是我现在发现的所有内容，而没有真正理解这段代码试图做什么..

* * *

哦，另一个快速说明：不要编写自己的 isInArray，只需使用 NSArray 的 containsObject:。然后检查方法的内部部分（第二个缩进）是

```
NSValue* pointVal = [NSValue valueWithCGPoint:next];

if ( ![valid containsObject:pointVal] )
{
    [valid addObject:next];
    [self check:CGPointMake(ics-1, igrec)];
} 
```

或者，如果您不关心有效数组中点的顺序，您可以使用 NSMutableSet 而不必担心检查该点是否已经在集合中。

是的，方法中的递归很好。它们实际上与 C 函数相同，只是带有几个隐藏参数（自指针和方法名称）并通过调度函数调用。

# spring - spring security - 为什么不在登录表单中使用“spring-security-redirect”参数重定向到特定页面

> ID：10127074
> 
> 赞同：4
> 
> 时间：2012-04-12T15:44:10.553
> 
> 标签：spring, security, spring-security, spring-3

默认情况下，当用户提交登录表单并通过身份验证时，他会被重定向到他希望访问的最后一个 URL，在他注销之前（从**请求缓存**中获取）或根 URL。此外，如果`spring-security-redirect`在表单提交请求中找到“ ”参数，我们将被重定向到该参数的值。

我希望使用这个功能，但是在[这个](http://forum.springsource.org/showthread.php?105833-Login-success-URL-for-each-browser-tab#4)线程中，**Luke Taylor**提到这将是一个安全风险，我们应该为此使用一个额外的表单字段，然后自定义我们的 LoginSuccessHandler 来检索和使用我们希望的表单字段.

我无法理解他提到的安全风险，以及我们不应该使用 Spring Security 已经提供的功能，而不是使用我们自己的自定义逻辑的原因。我想要使​​用该功能的原因与上述线程中的 OP 相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:52:17.973

背后的攻击是某种[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)（CSRF-Attack）

如果攻击者 (A) 将修改后的链接发送给某人 (B) 并且 B 快速查看此链接并看到它是您的应用程序，他可能会单击此链接。

B 人输入他的凭据并登录。

但现在重定向已执行，使用该人 B 的凭据！

所以想象你有一个应用程序，每个用户都可以通过调用[http://yourApp/spendSomeMoney=100](http://yourApp/spendSomeMoney=100)来花一些钱 ——（*该应用程序的第一个错误是这是一个 GET 而不是一个 POST*）

现在想象（A）发送（B）这个链接： [http://yourApp/login.jsp?spring-security-redirect=http://yourApp/spendSomeMoney=100](http://yourApp/login.jsp?spring-security-redirect=http://yourApp/spendSomeMoney=100)

你看到了问题。

*一般来说，我强烈建议使用一些 CSRF 保护过滤器，无论我是否使用该重定向。*

# html - 无法在 IE 9 中获得 Quicktime 播放

> ID：10127078
> 
> 赞同：3
> 
> 时间：2012-04-12T15:44:11.507
> 
> 标签：html, video, internet-explorer-9, html5-video, quicktime

我正在尝试从移动设备上传一部电影以在浏览器中播放。它在 Chrome 和 FF 和 IE9（兼容模式）中运行良好，但我无法让它在 IE9 中播放，而不是在兼容模式下。

我的嵌入代码是：

```
<video id='vid' class='video' width='274' height='169' controls='controls' preload='load' autoplay='autoplay'>
  <source src='/videos/vid1.mov'  />
  <object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" width="320" height="256" >
    <param name="src" value='/videos/vid1.mov'>
    <param name="autoplay" value="true">
    <param name="loop" value="false">
    <param name="controller" value="true">
    <embed src='/videos/vid1.mov'  width="274" height="169" autoplay="true" loop="false" controller="true" pluginspage="http://www.apple.com/quicktime/"></embed>
  </object>
</video> 
```

起初我只是在尝试 Html5 嵌入代码，但这不起作用，所以将它换成 object 并 embed 也不起作用。我发现我可以在这里结合两者：http: [//www.w3schools.com/html/html_videos.asp](http://www.w3schools.com/html/html_videos.asp) 但它仍然无法正常工作。

在花了 2 个小时谷歌搜索并尝试了不同的变体之后，我需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:03:07.327

IE9 的 HTML5 规范仅支持 H.264 视频编码，因此值得检查 .mov 是否正确编码 [http://blogs.msdn.com/b/ie/archive/2010/04/29/html5-video.aspx](http://blogs.msdn.com/b/ie/archive/2010/04/29/html5-video.aspx)

它还可以帮助提供至少 2 种格式的视频，因为并非所有浏览器都支持一种特定格式。也许是.mp4 和.mov？如果你真的很想用 .ogv 交换 .mov，添加一个基于 flash 的后备作为你的对象标签，你应该已经做好了准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:28:47.793

**将 mime 类型（服务器将其传递给浏览器）从 video/quicktime 更改为 video/mp4**。最简单的方法是将其添加到您的 .htaccess 文件中：

```
AddType video/mp4 .mov 
```

一旦你有了这个，一切都应该是好的。您可能会看到的唯一另一件事是来自 iPhone 的视频被向左旋转 90 度。这是 iOS 存储的原始格式。您必须在 iPhone 或服务器上处理这些问题

# iphone - 无法自定义 rightBarButtonItem

> ID：10127086
> 
> 赞同：1
> 
> 时间：2012-04-12T15:44:36.287
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, rightbarbuttonitem

我有两个 viewController，每个都需要导航栏右上角的登录按钮。

在 viewController1#viewDidLoad 中，我`rightBarButtonItem`这样设置（缩写）：

```
// set up the login button on the right
UIButton *loginButton = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage *loginImage = [UIImage imageNamed:@"btn_login.png"];
[loginButton setBackgroundImage:loginImage forState:UIControlStateNormal];
[loginButton setFrame:CGRectMake(0, 0, loginImage.size.width, loginImage.size.height)];
[loginButton setTag:1111111];
UIBarButtonItem *loginItem = [[UIBarButtonItem alloc] initWithCustomView:loginButton];
self.navigationItem.rightBarButtonItem = loginItem;
[loginItem release]; 
```

我标记它以便在 中`viewWillAppear`，我可以`viewWithTag:1111111`根据用户是否登录来确定它是否需要隐藏或可见。简单。

```
((UIButton *)[self.navigationController.view viewWithTag:LOGIN_BUTTON_TAG]).hidden = true; 
```

当 viewController2 被推入堆栈时，我基本上运行相同的代码来设置我的`rightBarButtonItem`，但我给它一个不同的标签（即 222222）。

在 viewController2#viewWillAppear 中，当我查找 时`viewWithTag:222222`，它返回为 null，因此我无法隐藏/显示它。

我注意到，如果我使用与 viewController1 (1111111) 中相同的标签，我就可以使用它。

为什么是这样？我的标签实际上是作为常量设置在文件顶部的，因此将随机数从 vc1 复制到 vc2 似乎不太优雅，只是为了让它工作。相反，我想了解为什么 vc2 的标签没有应用于`rightBarButtonItem`，以及为什么 vc1 的标签仍然保留，即使我在不​​同的 viewController 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:57:19.290

如果我正确理解你在做什么，我会尝试的第一件事是在这行之前检查两个视图控制器：

```
((UIButton *)[self.navigationController.view viewWithTag:LOGIN_BUTTON_TAG]).hidden = true; 
```

放一个

```
NSLog("View is %@", self.navigationController.view); 
```

检查您是否将 viewWithTag 发送到正确的视图。对此不确定，但是您是否尝试通过 UIViewcontroller 访问视图、控制器、加载在 UINavigationcontroller 中？在这种情况下，我会使用：

```
(UIButton *)[[[self.navigationController visibleViewController] view] viewWithTag:LOGIN_BUTTON_TAG]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:07:04.497

最简单最可扩展的解决方案是避免`viewWithTag:`像瘟疫一样使用。

制作`UIBarButtonItem`一个 ivar，然后您就可以立即访问它而没有任何歧义。

代替

```
[loginButton setTag:1111111]; 
```

和

```
self.loginButton = loginButton; 
```

然后检索这样做

```
self.loginButton; 
```

代替

```
(UIButton *)[[[self.navigationController visibleViewController] view] viewWithTag:LOGIN_BUTTON_TAG]; 
```

我知道哪个对我来说看起来更优雅和健壮

# java - 将字符串对象表示为 2D 欧几里得图中的一个点

> ID：10127088
> 
> 赞同：-3
> 
> 时间：2012-04-12T15:44:38.780
> 
> 标签：java, string, graph, representation

请告诉我是否有一种方法可以通过将字符串对象导出（或者我可以说映射）为“x”和“y”的数值来使用（x，y）坐标在二维图形上绘制一个点。示例：我有一个字符串“abcd”。这需要表示为欧几里得图中的一个点。首选语言是Java。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T15:50:57.930

是的，至少有一种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T15:20:05.667

用于值的东西：

*   字符串的哈希
*   字符串的长度
*   所有字符的数字加法
*   所有字符的[一些数学函数]

将其中一个用于 x，另一个用于 y。你去吧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T10:16:33.997

您可以尝试将字符串提供给垃圾邮件过滤器（x = spamminess）以及根据词汇和语法复杂性（y = 可读性）给出可读性分数的东西。或者编写一些使用 StackOverflow API 将其作为问题或答案提交的东西，并绘制它获得了多少赞成票。

此外，尝试将字符串本身作为程序进行评估 - 如果它终止，则绘制一个 0，如果它没有终止，则绘制一个 1（您可能需要等待一段时间才能确定此结果）。

# javascript - 在 Openlayers 中组合两个 OCG 过滤器

> ID：10127098
> 
> 赞同：0
> 
> 时间：2012-04-12T15:45:16.140
> 
> 标签：javascript, filter, openlayers

我需要结合两个 OCG 过滤器。每个都可以单独工作，但如果我使用 Filter.Logical.OR 将它们组合起来，第一个只能工作。

```
var c_filter = new OpenLayers.Filter.Logical({ 
type: OpenLayers.Filter.Logical.OR, 
filters: [ 
new OpenLayers.Filter.Comparison({ 
    type: OpenLayers.Filter.Comparison.EQUAL_TO, 
    matchCase:false, 
    property: 'id', 
    value:(document.getElementById("Text")).value     
    }),   
new OpenLayers.Filter.Comparison({ 
    type: OpenLayers.Filter.Comparison.LIKE, 
    matchCase:false, 
    property: 'name', 
    value: "*" +(document.getElementById("Text")).value + "*"   
    }),   
    ] 
}); 
```

我使用 openlayers 2.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:28:55.877

尝试在第二个过滤器后删除逗号（，），它不应该在那里。

如果这没有帮助，我会尝试单独创建过滤器并将它们添加到“或”过滤器：

```
orFilter.filters.push(equalToFilter);
orFilter.filters.push(likeFilter); 
```

# c# - 非静态表达式 > 可以访问“这个”

> ID：10127103
> 
> 赞同：8
> 
> 时间：2012-04-12T15:45:28.327
> 
> 标签：c#, linq, linq-to-sql, lambda, expression-trees

我有一个数据库表`Item`并使用 linq-to-sql 访问它。

我可以为 Items 定义一个自定义 Method IsSpecial()，如果 Item.id 的平方根是偶数，则返回 true：

```
partial class Item
{
    public static Expression<Func<Item, bool>> IsSpecial = (i => Math.Sqrt(i.Id)%2==0);
} 
```

然后我可以在 linq-to-sql 查询中使用该属性，如下所示：

```
 datacontext.Item.Where(Item.IsSpecial) 
```

现在出于美学原因，我想将 IsSpecial 设为非静态并对其进行修改，以便我可以这样称呼它：

```
 datacontext.Item.Where(i => i.IsSpecial()) 
```

理想情况下，这也允许组合语句，而上述（工作）snytax 不允许：

```
 datacontext.Item.Where(i => i.IsSpecial() && i.Id >100) 
```

定义此方法的正确语法是什么？

这不起作用：

```
partial class Item
{
    public Expression<Func<bool>> IsSpecial = ( () => Math.Sqrt(this.Id)%2==0 );
    // 'this' keyword not available in current context
} 
```

* * *

*编辑：* 我开始怀疑我要求的是语法根本不允许的东西

我想我可以忍受`datacontext.Item.Where(Item.IsSpecial).Where(i => i>100)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:26:36.143

> ```
> partial class Item
> {
>     public static Expression<Func<Item, bool>> IsSpecial = (i => Math.Sqrt(i.Id)%2==0);
> } 
> ```

建议：添加`readonly`关键字。

> 然后我可以在 linq-to-sql 查询中使用该属性，如下所示：
> 
> ```
> datacontext.Item.Where(Item.IsSpecial) 
> ```

对，因为`Where`接受类型为 的参数`Expression<Func<Item, bool>>`，即`Item.IsSpecial`。

> 现在出于美学原因，我想将 IsSpecial 设为非静态并对其进行修改，以便我可以这样称呼它：
> 
> ```
> datacontext.Item.Where(i => i.IsSpecial()) 
> ```

这不起作用的原因是因为`IsSpecial`它不是一个函数，它是一个表达式树。`()`只能应用于函数。表达式树描述了一个函数，但不是一个函数。您可以使用以下方法创建一个真正的函数`expression.Compile()`：

```
datacontext.Item.Where(i => (IsSpecial.Compile()) (i)) 
```

但是，这不起作用，因为再次`Where`传递了一个表达式树，并且`IsSpecial.Compile()`实际上并没有被调用。LINQ to SQL 尝试将其转换为 SQL，但由于无法识别而失败`Expression.Compile`，并引发异常。

但是，如果您可以`(IsSpecial.Compile())`在 LINQ to SQL 之前更换看到它...

这就是[LINQKit](http://www.albahari.com/nutshell/linqkit.aspx)的用武之地：

它只提供了一点表达式树操作来使其工作。

```
datacontext.Item.AsExpandable().Where(i => (IsSpecial.Compile()) (i)) 
```

`.AsExpandable()`创建一个包装器来`datacontext.Item`预过滤表达式。

> 理想情况下，这也允许组合语句，而上述（工作）snytax 不允许：
> 
> ```
> datacontext.Item.Where(i => i.IsSpecial() && i.Id >100) 
> ```

没问题：

```
datacontext.Item.AsExpandable().Where(i => (IsSpecial.Compile()) (i) && i.Id > 100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:36:53.743

您可以直接使用 IsSpecial：

```
partial class Item
{
     public static Expression<Func<Item, bool>> IsSpecial = (i => Math.Sqrt(i.Id)%2==0);
}

datacontext.Item.Where(Item.IsSpecial) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:21:51.837

尝试将 IsSpecial 的赋值放在构造函数中，并让所有其他构造函数委托给它，或者您可以使用 OnCreated 等分部方法将表达式分配给 IsSpecial。代替`partial class Item`

```
partial void OnCreated()
{
     IsSpecial = () => Math.Sqrt(this.Id)%2==0;
} 
```

这样做将始终分配 IsSpecial，并允许访问“this”。

# php - 安全的用户身份验证框架、库

> ID：10127105
> 
> 赞同：13
> 
> 时间：2012-04-12T15:45:31.130
> 
> 标签：php, authentication

我知道这个问题已经被问了不止一次，但我在这里找到的大多数答案根本没有帮助我。

自从我开始编写代码以来，我已经使用了三种基于 cookie 的自制不同身份验证实现。我从未对注入或劫持采取太多立场，但这次我试图将其纳入我的用户身份验证和提交表单中。

由于有数以千计的用户身份验证脚本可供选择，我想问一下您会推荐我使用哪些框架或脚本？我尝试了一些，但没有人真正完成这项工作？我没有使用 Zend、Codeigniter 或类似的任何 php 框架。

我也计划使用 SSL，但在某些网站上，我的 cms 将不会使用 SSL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T15:51:25.353

试试这个：[http ://ulogin.sourceforge.net/](http://ulogin.sourceforge.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-22T05:14:47.957

如果您需要一个身份验证库...

*   不依赖于单个框架，并且
*   适用于多个数据库系统（例如 MySQL、PostgreSQL、SQLite 等）

...那么[https://github.com/delight-im/PHP-Auth](https://github.com/delight-im/PHP-Auth)可能适合您。

它很现代（PHP 5.6+），安全又方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:42:28.853

[Symfony2](http://symfony.com/)提供了一个安全组件，它可以作为一个**独立**的PHP 库使用。

*   文档：[Symfony2 - 安全](http://symfony.com/doc/current/book/security.html)
*   从[GitHub下载](https://github.com/symfony/Security)

# asp.net-mvc-3 - 具有搜索功能的 MVC3 ActionLink

> ID：10127108
> 
> 赞同：0
> 
> 时间：2012-04-12T15:45:37.870
> 
> 标签：asp.net-mvc-3, actionlink

我想通过链接进行搜索功能。

目前，我在主页上有搜索框。它正在搜索框工作。

但是，我不知道如何将一些参数传递给控制器​​中的 Search 方法。

当我像这样编码时，控制器中的 searchString 为“空”。

如何通过 actionLink 获取 serachString 参数？

你可以帮帮我吗？也许看起来很容易。请帮助我或建议我。谢谢。

```
//mac.cshtml

<h3>CPU Processor</h3>
<ul>
    <li>@Html.ActionLink("Intel Core i5", "Search", "Store", new { @searchString = "i5"})</li>
    <li>@Html.ActionLink("Intel Core i7", "Search", "Store", new { @searchString = "i7" })</li>
</ul> 
```

```
//Search method in StoreController
public ActionResult Search(string searchString)
    {

        var product = from a in _db.Product.Include(a => a.Category)
                      select a;
        if (!String.IsNullOrEmpty(searchString))
        {
            product = product.Where(a => a.model.ToUpper().Contains(searchString.ToUpper())
                               || a.Category.name.ToUpper().Contains(searchString.ToUpper()));
        }
        return View(product.ToList());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:55:23.297

您没有为 Html.ActionLink 使用正确的重载

看

[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)

你应该做

```
@Html.ActionLink("Intel Core i7", "Search", "Store", new { @searchString = "i7" }, null) 
```

它经常与“对象”作为参数混淆。

顺便说一句，这个方法很危险（获取参数），如果你在 linq2entities 中，ToUpper 方法将不起作用

# google-maps - Google Geocoding API 使用限制如何适用于 [Sales]force.com？

> ID：10127112
> 
> 赞同：1
> 
> 时间：2012-04-12T15:45:47.730
> 
> 标签：google-maps, salesforce, policy, visualforce

以下是 Google 在其开发人员指南页面上指定的使用限制：

*   Google Maps JavaScript API v3 => 允许营利性网站每天生成多达 25,000 个地图加载
*   Google Geocoding API => 受每天 2,500 个地理定位请求的查询限制
*   Google Maps API for Business => 每天最多可以执行 100,000 个请求

我正在尝试使用上述任何一种方法与 Salesforce.com (SFDC) 平台上的 Visualforce 一起使用 [*]

我了解公共网站的[请求是按 IP](https://stackoverflow.com/questions/6425752/google-maps-api-v3-usage-limits-is-per-website-visitor-or-per-web-server)的。现在对于 SFDC，特定服务器上可能有许多不同的组织（例如，NA1）。因此，使用 SFDC 和 Google Maps API 的两家不同公司的 URL 可能位于[https://na1.salesforce.com/something_here](https://na1.salesforce.com/something_here)，它们的请求应单独计算。

会这样吗？每个 API 会发生什么情况？

[*]SFDC 是用于我们讨论目的的 SaaS 云。所有用户都通过同一页面登录，但他们可以登录到不同的“orgs”/“organizations”，但他们的 URL 可能看起来相似

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:49:19.510

SO上的这个问题解决了直接从visualforce页面运行的地理编码API，[Salesforce：Google maps query status 620 G_GEO_TOO_MANY_QUERIES](https://stackoverflow.com/questions/7168116/salesforce-google-maps-query-status-620-g-geo-too-many-queries) ，它似乎意味着没有密钥，限制是共享的。我怀疑除非你打算放弃你正在开发的应用程序，否则你几乎会被迫选择升级后的 API 密钥。要解决此问题，您可能需要考虑的一件事是将地图部分托管在另一个位置，并将其 iframe 放入 Salesforce。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:38:29.060

在这里区分服务器端和客户端限制很重要。[服务器端地理编码 api](https://developers.google.com/maps/documentation/geocoding/)将根据请求来自多少台机器（我假设 NA1 不是 1 台大型服务器）在共享 Salesforce 实例中强制执行 2500 限制。使用免费地理编码 API 的多个组织都将共享相同的服务器端地理编码限制。实际上，我在使用 Google 自己的 App Engine 平台时遇到了同样的限制，其中一堆应用程序共享相同的出站 IP 地址。

对于任何类型的保证性能，您都需要从您自己的服务器发送查询或使用 Maps for Business 路线，该路线可让您对查询进行身份验证以获得更高的限制。

[通过 JavaScript API 进行的客户端地理编码](https://developers.google.com/maps/documentation/javascript/geocoding)没有这些服务器限制，因此如果用户使用 JS API 执行任何类型的操作来触发一两个地理编码是最佳途径。

您已经可以通过注册 API 密钥创建自己的“存储桶”来跟踪每天 25K 的地图加载。

# c# - 与实例变量同名的局部变量 = 意外结果

> ID：10127113
> 
> 赞同：7
> 
> 时间：2012-04-12T15:45:50.157
> 
> 标签：c#, instance-variables, local-variables

ASP.NET 4.0 网络表单项目。我的代码隐藏中有以下内容。

```
public partial class _Default : System.Web.UI.Page
{
    private string testVar;

    protected override void OnInit(EventArgs e)
    {
        string testVar = "test";
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        var whatsTheValue = testVar;
    }
} 
```

我在每个方法中设置了一个断点。当局部变量 ,`testVar`设置在 中时`OnInit`，如果我快速查看实例变量，它也有值“test”。当我玩到 时`Page_Load`，实例变量的值为`null`。

我偶然遇到了这个，但这种行为让我感到困惑。我真的很惊讶它可以编译。我本来希望看到一些关于有两个同名变量的警告。话虽如此，让我更加困惑的是，实例变量在 OnInit 中获取了赋值，但在退出该方法时立即丢失了它。

有人可以向我解释这种行为吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T16:48:04.663

BrokenGlass 的回答当然是正确的；你一开始并没有看这个领域。当地人*隐藏*领域。

但是，我注意到没有人解决您问题的这一部分：

> 我真的很惊讶它可以编译。我本来希望看到一些关于有两个同名变量的警告。

在这种情况下，C# 编译器不会发出错误或警告，因为这样做会产生一种“脆弱的基类故障”形式。假设您有以下代码：

```
class B { }

class D : B 
{ 
    void M() 
    { 
        int x;
        ... 
```

其中 B 由组织中的一个团队制作，D 由完全不同的团队制作。然后有一天 B 的维护者决定添加一个需要受保护字段的功能：

```
class B { protected int x; } 
```

**当你重新编译 D 时，它应该报错吗？** 如果是这样，那么完全不同的团队中的某个人刚刚破坏了*您的*代码！C# 已经过精心设计，以最大限度地减少（尽管不是消除）这种破坏。

请注意，如果您*在同一代码块中*重新使用 x 来表示两个不同的事物，C#*确实*会出错。例如：

 *```
class B { protected int x; }
class D : B 
{ 
    void M() 
    { 
        x = 123; // meaning this.x inherited from B
        if (whatever)
        {
            int x = 10;
            ... 
```

这是非法的，因为现在在 M 的主体中，简单名称`x`用于表示`this.x` *和*局部变量`x`。因为这可能会令人困惑并且是一种糟糕的编程习惯，所以我们将其设为错误。但是，如果你真的想要，那么你可以通过确保用法在 *完全独立的块中来消除错误：

```
class B { protected int x; }
class D : B 
{ 
    void M() 
    { 
        {
            x = 123; // meaning this.x inherited from B
        }
        if (whatever)
        {
            int x = 10; 
```

现在这些块不重叠，因此编译器假定您知道自己在做什么并允许代码编译。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T15:47:42.630

> 如果我快速查看实例变量，它也有值“test”。当我玩到 Page_Load 时，实例变量的值为空。

您**没有**看到实例变量，而是看到了局部变量。永远不会设置实例变量，因为局部作用域变量在其作用域生命周期内隐藏了实例变量。

从规范：

> **3.7.1 名称隐藏**
> 
> 实体的范围通常包含比实体的声明空间更多的程序文本。特别是，实体的范围可能包括引入新声明空间的声明，这些声明空间包含同名实体。**这样的声明会导致原始实体被隐藏**。相反，当实体没有隐藏时，它被称为可见。
> 
> 当范围通过嵌套重叠以及范围通过继承重叠时，就会发生名称隐藏。这两种隐藏类型的特征将在以下部分中描述。
> 
> 由于嵌套命名空间或命名空间内的类型、类或结构内的嵌套类型**以及参数和局部变量声明的结果，可能会发生通过嵌套隐藏名称**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:49:44.500

> '在每个方法中设置一个断点。在 OnInit 中设置局部变量 testVar 时，如果我快速查看实例变量，它也有值“test”。当我玩到 Page_Load 时，实例变量的值为空。

问题是VisualStudio的Watch基于断点提示时刻的变量命名。因此，当在方法内部遇到断点时`OnInit`，即使调试器显示*实例*变量具有值，这也是数据的错误*可视化*。

所以一切都很好，只是数据的*可视化*是不正确的。*

# scala - 与参与者并行化的最小工作单元是什么？

> ID：10127116
> 
> 赞同：16
> 
> 时间：2012-04-12T15:46:04.853
> 
> 标签：scala, actor, akka

虽然 Scala Actors 被描述为轻量级的，但 Akka Actors 更是如此，使用它们显然有一些开销。

所以我的问题是，值得与 Actor 并行化的最小工作单元是什么（假设它可以并行化）？只有在存在一些潜在的延迟或有*很多*繁重的计算时才值得吗？

我正在寻找可以轻松应用于日常工作的一般经验法则。

编辑：到目前为止的答案让我意识到我感兴趣的实际上可能与我最初提出的问题*相反。*所以：

假设用参与者构建我的程序非常合适，因此不会产生额外的开发开销（甚至比非参与者实现产生的开发开销*更少*），但它执行的工作单元非常小 - 是否存在在哪一点上使用演员会损害性能并且应该避免？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T18:03:50.837

是否使用actor主要不是工作单元的问题，它的主要好处是使并发程序更容易正确处理。作为交换，您需要根据不同的范例为您的解决方案建模。

因此，您需要首先决定是否使用并发（这可能是由于性能或正确性），然后是是否使用参与者。后者在很大程度上是一个口味问题，尽管使用 Akka 2.0 我需要充分的理由不这样做，因为您基本上可以免费获得可分发性（向上和向外），而且开销很小。

如果您仍想另辟蹊径，我们的性能测试的经验法则可能是目标消息处理速率不应高于每秒几百万。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T15:55:20.940

对于日常工作，我的经验法则是，如果它需要几毫秒，那么它可能值得并行化。尽管交易率高于此（通常不超过几十微秒的开销），但我喜欢远离开销占主导地位的情况。当然，可能需要比几毫秒长得多的时间才能*真正*值得并行化。您总是必须平衡编写更多代码所花费的时间与运行它所节省的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:21:00.917

如果工作单元中没有预期的副作用，那么最好在运行时做出工作拆分的决定：

```
protected T compute() {
  if (r – l <= T1 || getSurplusQueuedTaskCount() >= T2)
    return problem.solve(l, r);
// decompose
} 
```

在哪里：

T1 = N / (L * Runtime.getRuntime.availableProcessors())

N - 单位工作量

L = 8..16 - 负载系数，手动配置

T2 = 1..3 - 所有偷窃后工作队列的最大长度

这是包含更多细节和数据的演示文稿：

[http://shipilev.net/pub/talks/jeeconf-May2012-forkjoin.pdf](http://shipilev.net/pub/talks/jeeconf-May2012-forkjoin.pdf)

# c# - DLL 方法需要等待表单发回引用变量才能继续

> ID：10127118
> 
> 赞同：-1
> 
> 时间：2012-04-12T15:46:09.430
> 
> 标签：c#, winforms

我有一个 dll，其中包含一个方法，该方法显示一个表单并将一个对象和两个引用变量传递给它：

```
public void MyMethod(..variables, ref DataString, ref DataCount) 
{
    // Code to create object..
    Form myForm = New Form(MyObject, ref DataString, ref DataCount);
    myForm.Show();
} 
```

但是，我不希望在用户在“myForm”上完成大量工作并且我知道引用变量已填充之前关闭该方法。

让 MyMethod 等到用户完成表单后再退出的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:20:04.630

只需使用

```
myForm.ShowDialog(); 
```

这将强制`MyMethod`等到`myForm`关闭。

# css - 创建打印样式表的最佳方法

> ID：10127128
> 
> 赞同：1
> 
> 时间：2012-04-12T15:47:05.240
> 
> 标签：css, printing, stylesheet

我正在为我的网站编写打印样式表。我注意到大多数现代浏览器甚至 Internet Explorer 都可以选择以“缩小到适合”的方式打印页面。

我想知道编写打印 css 文件是否有问题，以便以这种打印方法为目标，或者以 100% 宽度设置为目标更好？

Shrink to Fit 似乎是 IE9 中的默认设置。据我所知，Chrome 使用 Shrink to fit 作为打印的唯一方式。在我看来，Firefox 有太多的选择。您可以设置自定义宽度，缩小以适应（顺便说一句，它实际上在 Firefox 最新版本中不起作用，但这是一个已知的错误，所以我认为它不能在那里工作。希望他们能尽快修复它）。

在 IE9、Chrome 和 Firefox 设置为 60% 的情况下，我的样式表与 Shrink to Fit 选项配合得很好

# c# - 为什么要删除 String.Trim 制表符？

> ID：10127132
> 
> 赞同：3
> 
> 时间：2012-04-12T15:47:17.200
> 
> 标签：c#, string, trim, tabular

Microsoft Doc 说`String.Trim`

> 从当前 String 对象中删除所有前导和尾随空白字符。

但是制表符也被删除了。制表符是否定义为空白字符？
如果我不想`\t`被删除，`Trim`我想我必须自己实现，对吧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T15:49:41.380

Tab 字符被认为是空格，但您不必自己实现它。只需使用需要修剪字符列表的[重载：](http://msdn.microsoft.com/en-us/library/d4tt83f9.aspx)

```
char[] charsToTrim = { '*', ' ', '\''};
string banner = "*** Much Ado About Nothing ***";
string result = banner.Trim(charsToTrim); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T15:49:03.077

制表符被认为是空格。

[这](http://msdn.microsoft.com/en-us/library/t809ektx.aspx)包含在 C# 中被视为空白的列表，位于 Remarks 标题下。

Trim 或者允许您设置要删除的字符，您可以手动声明要修剪的内容，将制表符留在外面而不修剪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:50:48.217

是的，制表符被认为是空白。但是，[Trim](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)有一个重载，可以获取`char[]`并删除这些字符。

# javascript - 为什么对象响应未定义？

> ID：10127135
> 
> 赞同：1
> 
> 时间：2012-04-12T15:47:19.003
> 
> 标签：javascript, vk

```
<script src="http://vkontakte.ru/js/api/openapi.js" type="text/javascript">
</script>
<div id="login_button" onclick="VK.Auth.login(getit);"></div>
<script language="javascript">
VK.init({
    apiId: 2903251
});
function getit(response) {
    if (response.session) {
        var id = response.session.mid;
    }
    VK.Api.call('users.get', {uids: id, fields: 'sex,photo_big'}, function(r) {
        if(r.response) {
            alert(r.response.sex);
            console.log(r.response);
        }
    });
}
VK.UI.button('login_button');
</script> 
```

为什么`alert(r.response.sex)`显示未定义，但控制台日志一切正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:11:42.283

解决了。解决方案：r.response[0].sex

# emacs - 如何使用行号对缓冲区进行htmlfontify？

> ID：10127138
> 
> 赞同：2
> 
> 时间：2012-04-12T15:47:24.717
> 
> 标签：emacs

如何将缓冲区 htmlfontify 或 htmlize 为 html，当打开 html 时，每行都有行号？目前，似乎 htmlfontify-buffer 和 htmlize-buffer 函数即使在 linum-mode 开启时也无法生成行号。

我知道如果需要，org export 可以为块生成行号。但我不知道如何将它应用于整个缓冲区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:27:26.977

前段时间在 gnu.emacs.help 组上有一个简短的“讨论”：http: [//lists.gnu.org/archive/html/help-gnu-emacs/2011-05/msg00283.html](http://lists.gnu.org/archive/html/help-gnu-emacs/2011-05/msg00283.html)

我因此提议

(shell-command-on-region (point-min) (point-max) "nm" (concat (buffer-name) ".html") nil)

马蒂亚斯

# c# - 使用外部进程冻结 UI

> ID：10127143
> 
> 赞同：1
> 
> 时间：2012-04-12T15:47:52.360
> 
> 标签：c#, .net, winforms

我已经实现了以下代码（改编自[教程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)），以便运行命令提示符窗口、运行程序并读取输出。该代码是从嵌套在用户控件中的 ButtonClick 事件处理程序调用的。

我的印象是，由于这些方法是“异步的”，这将允许我的程序的其余部分在外部进程运行时运行。但是，情况似乎并非如此，因为我的 UI 将在操作运行时冻结。我应该补充一点，当 cmd 进程结束时收到的输出是正确的。

很抱歉转储大量这样的代码，只是不知道此时还能做什么！

任何帮助将不胜感激。

```
public static void runExternalProcess()
{
    StringBuilder output = new StringBuilder();

    Process cmd = new Process();
    cmd.StartInfo.FileName = "cmd.exe";          
    cmd.StartInfo.UseShellExecute = false;
    cmd.StartInfo.CreateNoWindow = true;
    cmd.StartInfo.RedirectStandardOutput = true;

    cmd.OutputDataReceived += new DataReceivedEventHandler(outputEventHandler);        
    cmd.StartInfo.RedirectStandardInput = true;        
    cmd.Start();
    cmd.BeginOutputReadLine();      

    StreamWriter sortStreamWriter = cmd.StandardInput; 
    StreamWriter sw = cmd.StandardInput;

    if (sw.BaseStream.CanWrite)
    {
        sw.WriteLine("ping www.google.com");
    }

    sw.Close();

    cmd.WaitForExit();

    MessageBox.Show(output.ToString());

    cmd.Close();
}

private static void outputEventHandler(object sendingProcess, DataReceivedEventArgs e)
{
    if (!String.IsNullOrEmpty(e.Data))
    {
        output.Append(e.Data + Environment.NewLine);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:53:20.690

你的问题在这里：

```
cmd.WaitForExit(); 
```

这是一个阻塞调用。

如果要响应进程退出而不阻塞，则需要为 Exited 事件添加处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T15:58:58.743

如何注册[`Exited`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)活动并在`MessageBox`那里展示：

```
StringBuilder output = new StringBuilder();
Process cmd = new Process();

public void RunExternalPing()
{
   cmd.StartInfo.FileName = "cmd.exe";
   cmd.StartInfo.UseShellExecute = false;
   cmd.StartInfo.CreateNoWindow = true;
   cmd.StartInfo.RedirectStandardOutput = true;
   cmd.StartInfo.RedirectStandardInput = true;

   cmd.EnableRaisingEvents = true;
   cmd.OutputDataReceived += 
      new DataReceivedEventHandler(cmd_OutputDataReceived);
   cmd.Exited += new EventHandler(cmd_Exited);

   cmd.Start();
   cmd.BeginOutputReadLine();
   StreamWriter sw = cmd.StandardInput;
   sw.WriteLine("ping www.google.com");
   sw.Close();
}

void cmd_Exited(object sender, EventArgs e)
{
   MessageBox.Show(output.ToString());
   cmd.Dispose();
}

private void cmd_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
   if (!String.IsNullOrEmpty(e.Data))
   {
      output.Append(e.Data + Environment.NewLine);
   }
} 
```

来自 MSDN：

> 当关联进程退出时，有两种方式得到通知：同步和异步。同步通知依赖于调用 WaitForExit 方法来暂停应用程序的处理，直到相关组件退出。异步通知依赖于 Exited 事件。在任何一种情况下，必须将 EnableRaisingEvents 设置为 true，Process 组件才能接收进程已退出的通知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T15:53:47.280

所有这些代码都是线性的，如果您不想冻结您所在的线程，您应该创建一个新线程并在该线程完成时执行回调。

查看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.90%29.aspx)。

# c++ - 右值的 c_str() - 不安全？

> ID：10127150
> 
> 赞同：3
> 
> 时间：2012-04-12T15:48:23.057
> 
> 标签：c++

谁能解释为什么以下在 at`0xFFFFFFFF`处发生访问冲突而崩溃`avformat_open_input`？

```
std::string u8(const std::wstring& str)
{
    return boost::locale::conv::utf_to_utf<char>(str);
}

AVFormatContext* open_input(const std::wstring& filename)
{
    AVFormatContext* context = nullptr;
    avformat_open_input(&context, u8(filename).c_str(), nullptr, nullptr);
    avformat_find_stream_info(context, nullptr);
    return context;
} 
```

而以下工作：

```
AVFormatContext* open_input(const std::wstring& filename)
{
    auto u8filename = u8(filename);
    AVFormatContext* context = nullptr;
    avformat_open_input(&context, u8filename.c_str(), nullptr, nullptr);        
    avformat_find_stream_info(context, nullptr);
    return context;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:58:53.340

的结果`u8(filename).c_str()`应该可以使用，直到`avformat_open_input`返回。它可能会保存您给它的指针，然后在`avformat_find_stream_info`.

发布这些 avformat 函数或其实现的文档，以便我们查看它是否真的在这样做。

* * *

看起来并没有`avformat_open_input`做错什么。现在我怀疑在程序的早期某处发生了未定义的行为。尝试使用 valgrind 或静态分析之类的工具，看看是否有任何结果。

# iphone - 拆分视图中的 UISegmentedControl 宽度

> ID：10127151
> 
> 赞同：0
> 
> 时间：2012-04-12T15:48:23.243
> 
> 标签：iphone, ios, orientation, uisplitviewcontroller

我在不同的视图控制器中有几个 UISegmentedControls。在 iPad 上，当设备改变方向时，我会重新对齐其中的段，以便它们与下面的 UITableViews 对齐。我看到的问题是，虽然为 UISegmentedControl 设置了调整大小掩码并且没有我的任何代码，但它会调整大小以填充正确的宽度，一旦我尝试更改其中的段的宽度，分段将不会拉伸一直到最后，否则它们会太大而超过。

这似乎只发生在控件处于拆分视图中时。

```
- (void)orientationChanged:(NSNotification *)notification {
    [self setHeaderWidths];
}

-(void)setHeaderWidths{
    int totalWidth = self.segSorter.bounds.size.width;
    int areaWidth = 100,
        priceWidth = 100;
    int padding = 35;
    [self.segSorter setWidth:totalWidth -padding- areaWidth-priceWidth forSegmentAtIndex:0];
    [self.segSorter setWidth:areaWidth forSegmentAtIndex:1];
    [self.segSorter setWidth:priceWidth forSegmentAtIndex:2];
} 
```

最初我认为这可能是由动画引起的，但即使添加延迟以使旋转动画完全完成也不会影响宽度。拆分视图中的控件是否给出了错误的宽度或其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:18:36.010

您可能会考虑的一种选择是简单地重新创建控件或删除然后重新添加段。

在不知道控件内部发生了什么的情况下，当您更改宽度时，如果您正在调整的第一个（例如增加宽度）会导致宽度总和超出范围怎么办？在不知道该逻辑如何在内部工作的情况下，当我遇到类似这样的事情时，这些事情看起来像是在为简单的更改而战，更容易推出一种方法来根据需要重新创建控件（或删除并重新添加）元素）在指定的大小。

# zend-framework - Zend_Test_PHPUnit 如何打印异常/输出？

> ID：10127154
> 
> 赞同：0
> 
> 时间：2012-04-12T15:48:42.027
> 
> 标签：zend-framework, phpunit

如何在我的测试用例中回显来自控制器操作的 html/xml 输出？

这是我的测试用例：

```
public function testCreateAccountIsASuccessfulRequest()
{
    $this->dispatch('/v2/user/create-account');

    $this->assertFalse($this->response->isException());

    $this->assertNotRedirect();
} 
```

在命令行中打印：

```
test# /usr/local/bin/phpunit --verbose Controllers_UserControllerTest.php
PHPUnit 3.6.10 by Sebastian Bergmann.

F

Time: 0 seconds, Memory: 12.50Mb

There was 1 failure:

1) Controllers_UserControllerTest::testCreateAccountIsASuccessfulRequest
Failed asserting that true is false.

/path/to/tests/Controllers/UserControllerTest.php:17
/usr/local/bin/phpunit:46

FAILURES!
Tests: 1, Assertions: 1, Failures: 1.
test# 
```

我不确定实际的例外是什么。怎么看？另外，我怎样才能看到控制器动作的实际输出？那么它发送到浏览器的 HTML/XML 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:51:50.590

上帝我今天很慢：

```
public function testCreateAccountIsASuccessfulRequest()
{
    $this->dispatch('/v2/user/create-account');

    echo $this->getResponse()->getBody();

    $this->assertFalse($this->response->isException());

    $this->assertNotRedirect();
} 
```

# iphone - 仅自动旋转 UITabBar 中的某些选项卡？（iOS 5）

> ID：10127155
> 
> 赞同：1
> 
> 时间：2012-04-12T15:48:49.567
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbar

我有一个带有 5 个标签的 UITabBar。我只希望为 UIViewController 启用自动旋转，该 UIViewController 被推送到选项卡 #3 深处的堆栈中。所以要清楚：点击 UITabBar item 3，你会得到 tabbar item #3 的根 UIView，它不应该自动旋转。点击并将另一个 UIViewController 推入堆栈（通过 UINavigationController）。再次点击，将另一个 UIViewController 推入堆栈。只有在这里这个 UIView 才能自动旋转。

其他 4 个选项卡根本不应该旋转——不是选项卡的根视图，也不是选项卡的任何子视图。

有人能告诉我应该使用什么方法吗？我读到每个选项卡都需要对 willAutorotateToInterfaceOrientation 响应“是”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:59:59.380

# scala - 在 Play Framework 2.0 模板中使用选项助手

> ID：10127156
> 
> 赞同：21
> 
> 时间：2012-04-12T15:48:55.760
> 
> 标签：scala, playframework-2.0

我正在尝试使用`views.html.helper.select`（[此处](http://www.playframework.org/documentation/api/2.0/scala/index.html#views.html.helper.select)的文档）。我不知道scala，所以我正在使用java。我需要将 Seq[(String)(String)] 类型的对象传递给模板，对吗？就像是：

```
@(fooForm:Form[Foo])(optionValues:Seq[(String)(String)])

@import helper._

@form(routes.foo){
  @select(field=myForm("selectField"),options=optionValues)
} 
```

我不知道如何在 java 中创建 Seq[(String)(String)]。我需要用我的枚举类中的对 (id,title) 填充这个集合。

有人可以告诉我一些如何使用选择助手的例子吗？

我在用户组上找到[了这个](https://groups.google.com/forum/?fromgroups#!topic/play-framework/9-dYG1wZkS0)帖子，但凯文的回答对我没有多大帮助。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-13T07:58:46.520

正确的类型是：`Seq[(String, String)]`. 它意味着一个字符串对的序列。在 Scala 中，有一种使用箭头定义对的方法：`a->b == (a, b)`。所以你可以写例如：

```
@select(field = myForm("selectField"), options = Seq("foo"->"Foo", "bar"->"Bar")) 
```

但是还有另一个帮助器，如文档中所示，用于构建选择选项序列：`options`，因此您可以将上述代码重写为：

```
@select(myForm("selectField"), options("foo"->"Foo", "bar"->"Bar")) 
```

如果您的选项值与其标签相同，您甚至可以将代码缩短为：

```
@select(myForm("selectField"), options(List("Foo", "Bar"))) 
```

（注意：在 Play 2.0.4`options(List("Foo", "Bar"))`中无法编译，所以你可以试试这个`options(Seq("Foo", "Bar"))`）

要从 Java 代码中填充选项，更方便的方法是使用[`options`](http://www.playframework.org/documentation/api/2.0/scala/index.html#views.html.helper.options$)采用 a`java.util.List<String>`作为参数的重载函数（在这种情况下，选项值将与其标签相同）或采用`java.util.Map<String, String>`.

# git - 管理 git 分支

> ID：10127159
> 
> 赞同：0
> 
> 时间：2012-04-12T15:49:19.473
> 
> 标签：git

我正在寻找一些关于如何使用 Git 实现以下目标的建议：

分支：master（稳定分支）不稳定

所有工作都在不稳定的分支中完成，其中代码可能在任何时候都不起作用，但我推送它以保存我的进度。当我达到一个稳定点时，我想让 master 和不稳定的完全一样。我不想在合并和选择不稳定的分支状态时经历我的所有更改，我只希望它使用不稳定的分支状态并使 master 完全相同。它可能需要删除一些文件，添加一些文件，更改一些文件。我不想将所有提交从不稳定复制到 master，而只是添加一个包含所有更改的新提交。

我见过的唯一两种成功做到这一点的方法是

```
git checkout master
git reset --hard unstable 
```

但这似乎复制了不稳定的所有提交，然后我无法将 master 推送到远程（被远程拒绝）或

```
git checkout master
rm -rf ./* 
```

然后从另一个分支复制所有文件并提交。

必须有更好的方法来做到这一点，或者可能是完全不同的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:07:57.540

```
git checkout master
git merge --squash unstable
git commit 
```

将使用自上次合并以来所做的所有更改（不稳定分支中的提交）进行一次提交。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T16:18:19.547

听起来`master`在您开发时不会改变`unstable`。您有两种选择，具体取决于您希望最终树的外观。

假设您从这棵树开始：

```
A---B         (master)
     \
      C---D   (unstable) 
```

如果您只想`master`快进到`unstable`（单个主干，`master`并`unstable`指向同一个提交）：

```
git checkout master
git rebase unstable 
```

结果树：

```
A---B---C---D  (master, unstable) 
```

如果您想要合并提交（`unstable`分支，然后合并回`master`）：

```
git checkout master
git merge --no-ff unstable 
```

结果树：

```
A---B-------D'  (master)
     \     /
      C---D     (unstable) 
```

**更新**正如@KurzedMetal 指出的那样，您不需要这些选项中的任何一个。我认为他的回答是正确的。之后的树`git merge --squash unstable master; git commit`看起来像：

```
A---B---------E  (master)
     \
      C---D      (unstable) 
```

`master`注意和之间没有关系`unstable`。在此之后，您可能希望使用以下命令进行重置`unstable`：

```
git checkout unstable
git reset --hard master 
```

导致：

```
A---B---E       (master, unstable) 
```

不过，我不确定您为什么要使用此策略。失去所有这些历史对我来说似乎是不明智的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:56:04.877

`git checkout master`

`git merge unstable`

那么您将有一个合并提交，并且您在 master 中的状态将与不稳定分支完全相同。

一旦你认为你的合并中断了，你可以回退一个提交（合并提交），然后回到原始状态。孩子的东西:)

# templates - 如何在多个页面上使用typo3流体模板？

> ID：10127160
> 
> 赞同：0
> 
> 时间：2012-04-12T15:49:23.267
> 
> 标签：templates, typo3

我的页面树结构如下所示：

ROOT
- 第 1
页 - 第 2
页 --- 第 a 页
--- 第 b
页 --- 第 c
页 - 第 3
页 --- 第 d
页 --- 第 e 页

我在根页面中定义了一个流体模板。
带有小写字母的页面应使用与根模板相同的扩展模板 XY。
如何多次分配模板？

我不想将扩展模板分配给第 1 页，而将另一个扩展模板分配给第 3 页，其中包含相同的排版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:52:49.150

您可以在更高级别上添加模板，并在更下一级清除不需要的属性（基本上颠倒您的概念）。

或者您正在模板记录中使用“下一级模板”属性：

![](../Images/7b59588890986d595d1fefd4d162e43c.png)

无论哪种方式，尽量简化你的模板结构，它会为你省去一些麻烦。

# gps - 在 Windows Phone 中计算速度

> ID：10127161
> 
> 赞同：4
> 
> 时间：2012-04-12T15:49:26.797
> 
> 标签：gps, windows-phone

我正在开发一个 Windows Phone 7 应用程序，我想看看用户的速度有多快。

现在，我正在存储记录的最后 2 个位置（和时间戳）。我正在使用[此处](http://www.movable-type.co.uk/scripts/latlong.html)建议的方法找到 2 个位置之间的距离。然后我找到时间差（时间戳2 - 时间戳1）并使用公式速度=（距离/时间）计算速度。

我是在使用正确的方法还是应该使用[GeoCoordinate.Speed](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.speed%28v=vs.92%29.aspx)属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:54:35.777

我不明白你为什么不应该只使用[GeoCoordinate.Speed](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.speed%28v=vs.92%29.aspx)属性！

[GeoCoordinate](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate%28v=vs.92%29.aspx)类已经为您提供了运动的速度和路线（航向），那么为什么不直接使用它呢？

# google-maps-api-3 - 获取大约 50 米外的路线

> ID：10127163
> 
> 赞同：0
> 
> 时间：2012-04-12T15:49:29.320
> 
> 标签：google-maps-api-3

我有一个 api3 地图，它使用

```
var orchards = new google.maps.LatLng(52.512565,-2.7595); 
```

我想添加“获取路线”，它的工作正常，只是它在一个稍微不同的地方结束。方向结束于沿路约 100 米处的一所房子 - 不是地图的纬度/经度所在的位置。宾馆的邮政编码是 SY6 7DQ，但方向的终点是 SY6 7DG

我怎样才能得到在正确的地方结束的方向。

你可以在这里看到我的意思：http: [//www.dev.ee-web.co.uk/orchards/index.php ?option=com_content&view=article&id=6&Itemid=106](http://www.dev.ee-web.co.uk/orchards/index.php?option=com_content&view=article&id=6&Itemid=106)

这是我正在使用的功能：

```
 function calcRoute() {
directionsVisible=true;
//  alter print text
document.getElementById('printMe').innerHTML = " Print directions";

// remove marker
marker.setMap(null);     
var start = document.getElementById("startFrom").value;
var end = "52.512565,-2.7595";
var request = {
    origin:start, 
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};
directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  }
}); 
```

}

我尝试将正确的邮政编码放入谷歌地图，但产生的数字仍然指向错误的地方。

我真的很感激任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:58:56.797

当您在道路上指定 LatLng 时，看起来方向非常准确。我的猜测是最初的结果并不令人满意，因为标记不在路上。

转到此页面并单击您希望路线结束的道路并从右侧复制 latLng 值。粘贴到您的`var end = ...`我建议保存精度。

[https://files.nyu.edu/hc742/public/googlemaps/geocodeUK.html](https://files.nyu.edu/hc742/public/googlemaps/geocodeUK.html)

# vb.net - 在 vb.net 中单击时创建选项卡？

> ID：10127164
> 
> 赞同：0
> 
> 时间：2012-04-12T15:49:31.393
> 
> 标签：vb.net, user-interface, project

我正在制作一个程序作为个人项目，其中一部分需要我单击一个按钮，然后创建一个新选项卡，其中将在同一个按钮上创建单击标签并显示在选项卡中。

如何在 vb.net 中单击时创建一个选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:56:11.373

假设您正在谈论 Windows 窗体：

在 a 上`TabControl`，有一个[TabPages](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.tabpages.aspx)属性，它是该控件上所有标签页的集合。此集合具有`Add`添加新标签页的方法。

例子：

```
Dim newTabPage As New TabPage()
'Add controls to this new tab page here

myTabControl.TabPages.Add(newTabPage) 
```

# python - 如何使用django在html文件上打印给定url的所有链接

> ID：10127169
> 
> 赞同：0
> 
> 时间：2012-04-12T15:49:42.033
> 
> 标签：python, django, django-templates, beautifulsoup

我的views.py中有这段代码：

```
from django.http import HttpResponse, Http404
from django.shortcuts import render_to_response

from bs4 import BeautifulSoup
import urllib

def extract_links(request):
    starting_link = urllib.urlopen("http://www.finalyearondesk.com")
    soup = BeautifulSoup(starting_link)
    all_links = soup.findAll('a', href = True)          
    return render_to_response('extracted_links.html',{'all_links': all_links }) 
```

在这我使用BeautifulSoup。我正在模板文件中编写此代码：extracted_links.html：

```
{% for final_links in all_links %}
    {{ final_links['href'] }}    # {{ final_links.href }} did not print anything
{% endfor %} 
```

但问题是它显示错误：

```
Could not parse the remainder: '['href']' from 'final_links['href']' 
```

任何建议如何解决这个问题？如果我在一个简单的 python 文件上使用这个函数，它就可以正常工作，但不能在 django 模板上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:51:32.597

如果`all_links`是一个`dict`s 的列表，每个都有键，`href`那么执行以下操作来访问`href`Django 模板中的值：

```
{% for final_links in all_links %}
    {{ final_links.href }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:05:51.130

尝试：

```
{% for final_links in all_links %}
   {{ final_links.attrMap.href }}
{% endfor %} 
```

我是从以下会议中得出的：

```
>>> import urllib
>>> from BeautifulSoup import BeautifulSoup as BS
>>> start = urllib.urlopen('http://blog.tkbe.org')
>>> soup = BS(start)
>>> all_links = soup.findAll('a', href=True)
>>> first = all_links[0]
>>> first
<a href="http://blog.tkbe.org/" title="TKBE" rel="home">TKBE</a>
>>> dir(first)
[..., 'attrMap', 'attrs', ...]
>>> first.attrs
[(u'href', u'http://blog.tkbe.org/'), (u'title', u'TKBE'), (u'rel', u'home')]
>>> first.attrMap
{u'href': u'http://blog.tkbe.org/', u'rel': u'home', u'title': u'TKBE'} 
```

如果您的 BeautifulSoup 版本有其他属性，您可以类似地找到它们。

您可能必须在视图中提取它们，而不是在模板中，例如：

```
all_links = [link.attrMap['href'] for link in all_links] 
```

在您的退货声明之前（或您需要在您的 BeautifulSoup 版本中访问的任何属性）。

# android - ArrayAdapter 导致崩溃

> ID：10127175
> 
> 赞同：0
> 
> 时间：2012-04-12T15:49:56.277
> 
> 标签：android, listview, android-arrayadapter

我正在尝试实现一个数组适配器，每次活动开始时都会出错。

这是我的课，我已经注意到导致崩溃的行。

```
public class Attend extends Activity{

ListView amattendees;
ListView pmattendees;
String attendingAm[];
String attendingPm[];
JSONParser jParser = new JSONParser();
 JSONObject json_event;
 String json_name = null;
 String json_badge_id = null;
 String json_venue_id = null;
 String json_event_id = null;
 String json_id = null;
 String json_date = null;
 String json_amLesson = null;
 String json_pmLesson = null;
 String json_youtubeid = null;
 String json_lessonHTML = null;
 String json_active = null;
 String json_created = null;
 String json_attending = null;
 String json_status = null;
 String fragmented = null;
 String json_title = null;
 String json_event_description = null;

 String[] participants = null;
 String setAttending_response = "Attend";
 String scannedBar = "default";
 SharedPreferences settings;
 String json_videopath;
 String str_accesstoken;
 Context context;
 VideoView youtubeVideo;
 String sAttending = "false";
 String home_venue_long = null;
 String home_venue_lat = null;
 private static final int REQUEST_BARCODE = 0;
 double my_longitude;
 double my_latitude;
 String json_venue_distance;
 String json_nearest_venue;
 String json_nearest_venue_logo;
 String json_nearest_venue_long;
 String json_nearest_venue_lat;
 String  json_participants_arr[];

 public String[] createArrayFromJSON(JSONArray json_array_participants){
      String json_participants[] = new String[json_array_participants.length()];
      json_participants_arr = new String[json_array_participants.length()];
 for(int i = 0; i < json_participants.length; i++){
     try{
         json_participants[i] = json_array_participants.getString(i);   
         json_participants_arr[i] = json_array_participants.getString(i);  
        }
        catch(JSONException e){
         e.getStackTrace();
        }
  }
 return json_participants;
 }

 public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.attend);            

        amattendees = (ListView)findViewById(R.id.amattendees);
        pmattendees = (ListView)findViewById(R.id.pmattendees);

         try{
                //get the JSON values from the URL.
                JSONObject json = jParser.getJSONFromUrl("http://ajsonfeed.com?hi=23849348934");

               json_event = json.getJSONObject("event");
               json_name = json_event.getString("name");
               json_status = json.getString("status");
               json_badge_id =  json_event.getString("badge_id");
               json_venue_id = json_event.getString("venue_id");
               json_event_id = json_event.getString("event_id");
               json_id = json_event.getString("id");
               json_date = json_event.getString("date");
               json_amLesson = json_event.getString("amLesson");
               json_pmLesson = json_event.getString("pmLesson");
               json_youtubeid= json_event.getString("youtubeId");
               json_lessonHTML = json_event.getString("lessonHTML");
               json_active = json_event.getString("active");
               json_created = json_event.getString("created");
               json_attending = json_event.getString("attending");
               fragmented = json_event.getString("fragmented");
               JSONArray json_array_participants = json_event.getJSONArray("participants");   

               createArrayFromJSON(json_array_participants);

                }
                catch(JSONException e){
                    e.getStackTrace();
                } 
```

这条线崩溃了。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,android.R.id.text1, json_participants_arr); 
```

.

```
 }

} 
```

来自 logcat 的错误日志：

```
04-12 16:58:32.683: E/AndroidRuntime(7920): FATAL EXCEPTION: main
04-12 16:58:32.683: E/AndroidRuntime(7920): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.jujitsu.app.com/org.jujitsu.app.com.Attend}: java.lang.NullPointerException
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.os.Looper.loop(Looper.java:143)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.app.ActivityThread.main(ActivityThread.java:4196)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at java.lang.reflect.Method.invoke(Method.java:507)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at dalvik.system.NativeStart.main(Native Method)
04-12 16:58:32.683: E/AndroidRuntime(7920): Caused by: java.lang.NullPointerException
04-12 16:58:32.683: E/AndroidRuntime(7920):     at java.util.Arrays$ArrayList.<init>(Arrays.java:47)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at java.util.Arrays.asList(Arrays.java:169)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:138)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at org.jujitsu.app.com.Attend.onCreate(Attend.java:124)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
04-12 16:58:32.683: E/AndroidRuntime(7920):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
04-12 16:58:32.683: E/AndroidRuntime(7920):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:52:54.250

像这样做：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1,
                      createArrayFromJSON(json_array_participants)); 
```

并将其移动到 json 的`try`块中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:09:23.583

好吧，唯一可以为 null 的就是你的 json_participants_arr，所以一定有一些 ArrayAdapter 构造函数不喜欢的地方。它在您的 try/catch 中初始化。您是否查看了该 catch 堆栈跟踪以查看它是否由于某种原因而失败？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:12:19.050

你有一个空指针异常`json_participants_arr`，可能是因为`JSONException`你几乎抓住然后忽略了一些东西。（不要那样做），把 try/catchs 拿出来看看你得到了什么异常。

一旦你把它理顺了，你还想回来并通过在 UI 线程上发出网络请求来修复它（jParser.getJSONFromUrl 行，查看[加载程序](http://developer.android.com/guide/topics/fundamentals/loaders.html)或[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)）。根据您使用的操作系统版本，这实际上可能是您的潜在问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:18:19.043

像这样使用它...

```
String[] arrParticipants = createArrayFromJSON(json_array_participants);

ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1,android.R.id.text1, arrParticipants ); 
```

# matlab - 如何创建 3D 联合密度图 MATLAB？

> ID：10127177
> 
> 赞同：0
> 
> 时间：2012-04-12T15:49:59.880
> 
> 标签：matlab, plot, probability, histogram

我在从数据创建联合密度函数时遇到问题。我所拥有的是将股票中的队列大小作为两个向量保存为：

```
X = [askQueueSize bidQueueSize]; 
```

然后我使用 hist3-function 创建一个 3D 直方图。这就是我得到的： http: [//dl.dropbox.com/u/709705/hist-plot.png](http://dl.dropbox.com/u/709705/hist-plot.png)

我想要的是对 Z 轴进行归一化，使其从 [0 1] 开始。

我怎么做？或者有人在股票上有很好的*联合密度matlab函数吗？*

这类似于（[如何在 MatLab 中绘制概率密度函数？](https://stackoverflow.com/questions/5757387/how-to-draw-probability-density-function-in-matlab)），但在 2D 中。

我想要的是 3D 和`x:ask queue, y:bid queue, z:probability`.

如果有人可以帮助我，将不胜感激，因为我在这里碰壁了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:47:10.497

我看不到这样做的简单方法。您可以使用从 hist3 获取直方图计数

```
[N C] = hist3(X); 
```

我们的想法是将它们标准化：

```
N = N / sum(N(:)); 
```

但我找不到一种很好的方法将它们绘制回直方图（您可以使用`bar3(N)`，但我认为轴标签需要手动设置）。

我最终得到的解决方案涉及修改`hist3`. 如果您可以访问此（`edit hist3`），那么这可能对您有用，但我不确定法律情况是什么（您需要统计工具箱的许可证，如果您复制 hist3 并自己修改它，这可能不是合法的）。

`surf`无论如何，我找到了为绘图准备数据的地方。有 3 个矩阵对应于 x、y 和 z。就在计算 z 矩阵的内容之前（第 256 行），我插入了：

```
n = n / sum(n(:)); 
```

这对计数矩阵进行了归一化。

最后，绘制直方图后，您可以使用以下命令设置轴限制：

```
xlim([0, 1]); 
```

如有必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T14:45:35.577

在 mathworks 论坛的一个人的帮助下，这是我最终得到的很好的解决方案：

（data_x 和 data_y 是要在 hist3 计算的值）

```
x = min_x:step:max_x; % axis x, which you want to see
y = min_y:step:max_y; % axis y, which you want to see

[X,Y] = meshgrid(x,y); *%important for "surf" - makes defined grid*

pdf = hist3([data_x , data_y],{x y}); %standard hist3 (calculated for yours axis)
pdf_normalize = (pdf'./length(data_x)); %normalization means devide it by length of 
                                         %data_x (or data_y)
figure()
surf(X,Y,pdf_normalize) % plot distribution 
```

这给了我 3D 的联合密度图。可以通过计算曲面上的积分来检查：

```
integralOverDensityPlot = sum(trapz(pdf_normalize)); 
```

当变量*step*变为零时，变量*integralOverDensityPlot*变为 1.0

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-16T18:58:39.920

有一种快速的方法可以使用 hist3 函数执行此操作：

```
[bins centers] = hist3(X); % X should be matrix with two columns
c_1 = centers{1};
c_2 = centers{2};
pdf = bins / (sum(sum(bins))*(c_1(2)-c_1(1)) * (c_2(2)-c_2(1))); 
```

如果你“整合”这个，你会得到 1。

```
sum(sum(pdf * (c_1(2)-c_1(1)) * (c_2(2)-c_2(1)))) 
```

# tomcat - 配置 - TomCat 上的锁定调用/线程 - 供应商说重新启动

> ID：10127180
> 
> 赞同：1
> 
> 时间：2012-04-12T15:50:25.933
> 
> 标签：tomcat

首先，我是一个 .NET 人，所以我在这里有点不习惯。

我的客户的供应商有一个托管在 Tomcat 中的产品 API。该服务似乎“坚持”了几天前的请求。

我的信念是，他们的 API 代码中没有适当的错误处理，只是陷入了无休止的循环，一遍又一遍地重试请求。他们不会说问题出在哪里，而只是告诉我的客户重新启动 Tomcat。

这已经成为一个问题，供应商现在建议安排一个任务来每天重新启动 Tomcat。但是，有些服务会在整个晚上按需调用 API（来自零售消费者）。

那里的专家可以支持我吗？我不相信需要重新启动的 Tomcat 本身存在任何问题。有太多建立在它之上的“严肃”应用程序永远不会容忍这个错误。他们（供应商）*必须*是糟糕的编码。或者是否存在可能导致这些“死线程”的已知配置/平台问题？

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:28:41.987

要分析卡住的线程，您需要获取线程转储并将它们传递给供应商（或编写代码的人）进行分析。如果您不知道如何进行线程转储，您可以谷歌查找适合您环境的过程。
卡住的线程可能是由于线程持有网络资源而不放手造成的。糟糕的编码也可能是一个问题。
定期重新启动不是最佳选择，但在您找到永久解决方案之前，它可能是一种临时解决方法。

# c# - 带有 MVC 的 Facebook C# SDK

> ID：10127181
> 
> 赞同：1
> 
> 时间：2012-04-12T15:50:40.167
> 
> 标签：c#, facebook, asp.net-mvc-3, facebook-c#-sdk

我正在使用 Facebook C# SDK 和 MVC 3 开发一个 facebook 应用程序。

我遇到的问题之一是：多个版本的 Facebook SDK API 有几个不一致的版本。几乎每个版本的 API 都会发生变化，并且在一个版本中有效的内容在另一个版本中无效。API 版本之间也有重大变化。

我正在使用最新版本。（6.0.12）。我找不到任何有关如何使用 API 的文档。

API 网站有很多*TODO*页面。(http://csharpsdk.org/) 并且文档不简洁。

我应该使用另一个 SDK 吗？你有什么建议吗？或者有没有我可以用于这个版本的样本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:59:20.473

我和你在同一条船上。我已经关注了 Facebook c# SDK 团队成员的博客文章，以及他们对 API 进行最新主要重新工作的原因。我很乐观，认为这是一个健康的决定，而是利用从服务器到客户端的大部分工作。

最后，我认为它将使我们的应用程序受益于比以前使用早期 SDK 更具可扩展性和性能的解决方案。如果您的应用程序得到病毒式传播，这是一件好事。早期版本有很好的和大量的示例和文档，我只希望团队能够及时提供新版本。

对我来说，我目前在 prod 中有一个 v5.0x 解决方案，我非常渴望使用更新的 SDK，但我也在坚持寻找好的示例，希望在接下来的几个月里有一些魔力。这真的是一个关于你能等多久的问题，我认为这是目前最好的 SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:36:31.197

如果有人像我一样遇到 FB 破坏旧版本的问题，这是我创建的一个简短的教程

[http://theocdcoder.com/tutorial-integrating-facebook-authentication-asp-net-mvc-3/](http://theocdcoder.com/tutorial-integrating-facebook-authentication-asp-net-mvc-3/)

# php - 即使在编译后也没有在 php 中启用 PNCTL

> ID：10127183
> 
> 赞同：0
> 
> 时间：2012-04-12T15:50:45.543
> 
> 标签：php, pcntl, process-control

我刚刚用 --enable-pcntl 编译了我的 PHP，但是当我尝试访问 PHP 中的过程控制函数时，我得到：

```
Fatal error: Call to undefined function pcntl_fork() 
```

我错过了什么吗？我的 apache 没有用 prefork 编译。这是工作所必需的吗？

完整的 PHP 编译标志：

```
'./configure' 
'--prefix=/usr/local/lib64/php' 
'--with-libdir=lib64' 
'--with-apxs2=/usr/local/lib64/apache2/bin/apxs' 
'--with-mysql' 
'--enable-xml' 
'--with-curl' 
'--with-gd' 
'--enable-soap' 
'--with-xmlrpc' 
'--with-mysqli' 
'--with-unixODBC=/usr/' 
'--with-pdo-mysql' 
'--with-oci8=shared,instantclient,/usr/lib/oracle/11.2/client64/lib' 
'--with-mcrypt' 
'--enable-mbstring' 
'--with-zlib=/usr' 
'--with-openssl' 
'--enable-sockets' 
'--with-mssql=/usr/local' 
'--enable-ftp' 
'--enable-zip' 
'--enable-pcntl' 
```

阿帕奇模块：

```
core mod_so http_core event mod_authn_file mod_authn_core mod_authz_host mod_authz_groupfile mod_authz_user mod_authz_core mod_access_compat mod_auth_basic mod_reqtimeout mod_filter mod_mime mod_log_config mod_env mod_headers mod_setenvif mod_version mod_unixd mod_dav mod_status mod_autoindex mod_dav_fs mod_dir mod_alias mod_rewrite mod_php5 
```

编辑： **也许我不够清楚。我不会使用来自 Web 服务器的 pcntl 函数。我想重申，我的 pcntl 函数也没有在命令行中工作。对此有任何想法吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:15:19.273

确保您没有多个 PHP 副本，因为它们可以以不同的方式进行配置。

# jquery - 使用 jquery 访问 colorbox iframe 内容

> ID：10127185
> 
> 赞同：2
> 
> 时间：2012-04-12T15:50:47.103
> 
> 标签：jquery, iframe, jquery-selectors, colorbox

我尝试访问由 jquery colorbox 插件生成的 iframe 的内容几个小时都没有成功。

这是我的代码：

```
 $(".ListView li a").colorbox({ 

iframe:true,
width: "50%",
height: "50%",
opacity: 0.5,
onComplete: function() { 
alert("complete");
$("iframe").contents().find("p").css("color","#f00");   
}
}); 
```

它加载一个文件并显示它。如此精细。当 iframe 加载完成时，也会抛出警报消息。但我无法通过 jquery 选择器访问框架内的元素。iframe 内的所有 p 元素都没有发生任何事情。

两者都不

```
 if($("iframe").contents().length > 0)
{
alert("exists");    
} 
```

也不

```
 if($("iframe").length > 0)
{
alert("exists");    
} 
```

是成功的。页面上没有其他iframe，我也尝试插入类名。

对于直接插入 html 而不是由颜色框生成的“普通”iframe，我的功能正在运行。

谢谢

生成的代码：

```
<div id="colorbox" class="" style="display: block; padding-bottom: 50px; padding-right: 50px;    top: 128px; left: 476px; position: absolute; width: 902px; height: 207px;">
<div id="cboxWrapper" style="height: 257px; width: 952px;">
<div>
<div style="clear: left;">
<div id="cboxMiddleLeft" style="float: left; height: 207px;"></div>
<div id="cboxContent" style="float: left; width: 902px; height: 207px;">
<div id="cboxLoadedContent" style="display: block; width: 902px; overflow: auto; height: 187px;">
<iframe class="cboxIframe" frameborder="0" name="cbox1334265249803" src="qtest.html">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<body>
<a href="#">Link</a>
<p>Formatted Text</p>
</body>
</html>
</iframe>
</div>
<div id="cboxLoadingOverlay" style="float: left; display: none;"></div>
<div id="cboxLoadingGraphic" style="float: left; display: none;"></div>
<div id="cboxTitle" style="float: left; display: block;"></div>
<div id="cboxCurrent" style="float: left; display: none;"></div>
<div id="cboxNext" style="float: left; display: none;"></div>
<div id="cboxPrevious" style="float: left; display: none;"></div>
<div id="cboxSlideshow" style="float: left; display: none;"></div>
<div id="cboxClose" style="float: left;">close</div>
</div>
<div id="cboxMiddleRight" style="float: left; height: 207px;"></div>
</div>
<div style="clear: left;">
</div>
<div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div>
</div>
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable" style="display: none; z-index: 1000; outline: 0px none;" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-box-trash-dialog"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T02:24:55.440

使用 iframe，一旦 iframe 元素添加到文档中，onComplete 实际上就会触发。如果要查询内容，则必须等到 DOM 准备好。父文档无法知道 iframe 的 DOM 何时准备就绪，它只能监听窗口的 onload 事件。

但是，您可以通过将 fastIframe 属性设置为 false 来告诉 colorbox 等待并在 iframe 的 onload 事件触发后触发 onComplete 函数。例子：

```
$('a.example').colorbox({iframe:true, fastIframe:false, width:500, height:500}) 
```

当然，这一切都假设 iframe 来自与父级相同的域，并且没有安全限制阻止您访问 iframe 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:57:45.477

有一个访问 iframe 内容的 corss-browser 解决方案，您可以在[此处](http://roneiv.wordpress.com/2008/01/18/get-the-content-of-an-iframe-in-javascript-crossbrowser-solution-for-both-ie-and-firefox/)阅读。

此外，您可以使用 jquery 访问 iFrame 的内容，在[此处](http://api.jquery.com/contents/)阅读更多内容。

两种解决方案都通过 ID 找到您的 iframe，因此您需要一个 id 才能使用这些解决方案。我希望这有帮助。

# php - PHP for 循环运行超出预期

> ID：10127188
> 
> 赞同：0
> 
> 时间：2012-04-12T15:50:53.313
> 
> 标签：php, mysql

我正在为我的网站制作一个 ajax 评论系统，并且我正在查询我的数据库以获取具有特定字段的任何评论。然后我查看返回结果的数量是否大于 3，或者小于/等于 3（我对 3 有特定原因）。如果它大于 3，我设置一个变量 = 3，但如果它小于/等于 3，我将变量设置为等于返回的行数（`mysql_num_rows()`)。然后我在循环之前回显一些文本，然后在循环中回显内容，然后在循环之后回显更多内容。出于某种原因，我的 for 循环运行时间超过了给定时间。非常奇怪的是，它在移动到下一条评论并回显 3 次之前，重复了相同的评论 3 次。在 for 循环之后，我总共有 9 条评论。这不适用于我的设计，因为我只能放置 3 条评论。我的 for 循环嵌套在一段时间内，因为我需要多次查询才能根据我发送给 php 的信息获取所需的信息（这也是具体原因）。另一件事，PHP 仅在返回结果的数量**大于时才会回显评论 9 次**如果小于 3，则 3 可以正常工作。我已经检查了此代码 50 次，但我找不到任何东西。也许你们可以。这是我正在使用的代码：

* * *

```
 $comments = mysql_query("SELECT * FROM comments WHERE profid = '".$row['id']."'");
                $numComments = mysql_num_rows($comments);
                $totalCommComments = 0;
                if ($numComments > 0) {
                    if (mysql_num_rows($comments) > 3) {
                        $totalCommComments = 3;
                        echo '
        <div class="comments">
            <div class="commContainer">
                <ul class="'.$totalCommComments.'Comm">';
                        while ($get1 = mysql_fetch_array($comments)) {
                        for ($l = 1;$l<$totalCommComments;$l++) {
                            echo 'STUFF IS ECHOED HERE';
                        }
                        }  
                        echo '
                 </ul>
            </div>
       </div>'; 
```

* * *

我知道变量`$totalCommComments`设置为 3，因为我可以在`<ul>`.

PS。这不是完整的代码，只是相关的代码。其他一切都在查询不同的数据库以获取进行此查询所需的其他信息。

* * *

**非常感谢**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:58:35.747

```
$comments = mysql_query("SELECT * FROM comments WHERE profid = {$row['id']}");
$numComments = mysql_num_rows($comments);
if ($numComments > 0) { ?>
   <div class="comments">
       <div class="commContainer">
           <ul class="shortComments">
               <?php $i = 0;
               while ($i++ < 3 && $get1 = mysql_fetch_assoc($comments)) { ?>
                   <li class='comment'><?=$get1['comment']?></li>
               <?php } ?>
           </ul>
       </div>
   </div>
<?php } ?> 
```

试试看。你那里有很多冗余代码

有很多不同的方法我可以继续编辑这个，如果你让我们知道你想要做什么，我可以更新这个代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:06:04.737

去掉 while 语句中的 for ，

```
while ($get1 = mysql_fetch_array($comments)) {
                    for ($l = 1;$l<$totalCommComments;$l++) {
                        echo 'STUFF IS ECHOED HERE';
                    }
                    } 
```

应该只是

```
while ($get1 = mysql_fetch_array($comments)) {

                        echo $get1['whatever'];

                    } 
```

这个 while 将自动循环所有评论，你要添加的是使返回结果增加三倍的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:10:31.897

$numComments is the number of comments, $totalCommComments might be 0 or 3\. You have a while which has $numComments iteration and for each iteration you have a for with either 0 or 3 iterations. This means that you will have $numComments * $totalCommComments iterations, which is perfectly normal.

In my opinion you should have a single loop, where your indexing and loop condition should be corrected.

# json - 基于Web的shp到json转换

> ID：10127190
> 
> 赞同：0
> 
> 时间：2012-04-12T15:51:01.057
> 
> 标签：json, xml, google-maps, shapefile

我目前正在开展一个学校项目，该项目使用存储在 shapefile 中的数据和一个带有位图的 xml 文件以及应该覆盖图像的 WGS 坐标来实现 Google 地图。

需要构建的 Web 应用程序要求用户上传这些原始文件，并且结果应该在 Google 地图中可见。

有什么方法可以将这些 shapefile 转换为 .json，使用 PHP 或 javascript，并获取存储在 .xml 文件中的坐标以获取 WGS 坐标。这需要基于 Web 完成，因此单独的工具和软件是不够的。

这些坐标和 .json 文件需要存储在数据库中，这些记录将用于放置在谷歌地图上，并在结果坐标上进行适当的覆盖。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T16:23:36.200

js-shapefiles-to-geojson 脚本完全在客户端的浏览器中呈现 shapefile 和 dbf 文件。

回购：[https](https://github.com/wavded/js-shapefile-to-geojson)
://github.com/wavded/js-shapefile-to-geojson 演示：[http ://wavded.github.io/js-shapefile-to-geojson/](http://wavded.github.io/js-shapefile-to-geojson/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:33:59.287

所有的处理都需要在服务器端完成。我能够在这里找到用 php 编写的 shapefile 阅读器类，

[http://www.phpclasses.org/package/1741-PHP-Read-vectorial-data-from-geographic-shape-files.html](http://www.phpclasses.org/package/1741-PHP-Read-vectorial-data-from-geographic-shape-files.html)

听起来您对如何从那里解决其余问题有了相当不错的处理。

# c++ - 从 Direct Input 和 GetDeviceState() (C++) 接收键状态

> ID：10127199
> 
> 赞同：-1
> 
> 时间：2012-04-12T15:51:22.097
> 
> 标签：c++, windows, directinput

我正在使用直接输入为键盘输入制作包装器。为了获取关键状态，`GetDeviceState()`使用 char 缓冲区调用该函数。

这一切都很好，但是现在要发送键事件，我必须遍历缓冲区并检查所有被按下的键。我希望会有一个回调，而不是只传递按下的键码。

如果有人有直接输入的经验，遍历键码缓冲区是检查按键的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:21:12.033

那个答案是`GetDeviceData()`改用。您将能够获得是否按下或释放键以及按下的键的偏移量，这与我正在寻找的非常接近，因为现在我可以启动自己的回调，如果没有按下任何键，则开销是最小。

# c# - 将一个列表转换为另一种列表类型

> ID：10127203
> 
> 赞同：1
> 
> 时间：2012-04-12T15:51:49.800
> 
> 标签：c#, linq, linq-to-sql, linq-to-entities

我在下面这样做-有更好的方法吗？将一个列表转换为另一个列表而不创建新对象？

```
DataContext c = new DataContext();
List<X> x=
context.X.Where(a => a.date>Datetime.Now>).ToList();            
        foreach(var a in x)
        {
            Y y= new Y();
            y.Name= a.Name;                
            c.Ys.InsertOnSubmit(y);
        }

        c.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:00:33.250

你可以试试：

```
var ys = context.X
                .Where(x => x.date > DateTime.Now)
                .Select(x => new Y { Name = x.Name });

c.Ys.InsertAllOnSubmit(ys); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:00:11.490

不知道缩短多少会使它*变得更好*。也许这会有所帮助：

您投射到一个列表中，`Y`因此您不必`Y`在循环中创建新的。

```
List<Y> list_of_ys =
context.X.Where(a => a.date>Datetime.Now)
         .Select(s => new Y(){Name=s.Name})
         .ToList()

foreach(var y in list_of_ys)
{        
   c.Ys.InsertOnSubmit(y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:43:26.303

```
public IList<IPoint> Points
{
    get
    {
        return points.ConvertAll<IPoint>(
            delegate(RandomPoint point)
            {
                return point;
            });
    }   

} 
```

例如，如果您有一个接口及其实现，那么您可以使用上面示例中的 ConvertAll 方法，其中 IPoint 是一个接口，而 RandomPoint 是一个派生自该接口的类。

# xcode - SDL.framework 和 Xcode 表现不佳

> ID：10127209
> 
> 赞同：1
> 
> 时间：2012-04-12T15:52:24.967
> 
> 标签：xcode, macos, frameworks, sdl

我正在使用 SDL 的 Mac OS X 上构建游戏。但是，SDL.framework 表现出特殊的行为。

如果 SDL.framework 存在于 /Library/Frameworks 以及应用程序包中，GDB 会吐出以下内容：

> objc[40787]：SDLTranslatorResponder 类在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL 中实现.framework/Versions/A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。objc [40787]：类 SDL_QuartzWindow 在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL 中实现.framework/Versions/A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。对象 [40787]: SDL_QuartzWindowDelegate 类在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL.framework/Versions/ 中都实现了A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。objc[40787]：类 SDL_QuartzView 在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL 中实现.framework/Versions/A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。/Frameworks/SDL.framework/Versions/A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。objc[40787]：类 SDL_QuartzView 在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL 中实现.framework/Versions/A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。/Frameworks/SDL.framework/Versions/A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。objc[40787]：类 SDL_QuartzView 在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL 中实现.framework/Versions/A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。SDL_QuartzView 类在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL.framework/Versions/ 中实现A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。SDL_QuartzView 类在 /Users/Hinchy/Library/Developer/Xcode/DerivedData/Here_Comes_Launchman-abjymmujvjzdemcsrkkcmonahuva/Build/Products/Debug/Here Comes Launchman.app/Contents/MacOS/../Frameworks/SDL.framework/Versions/ 中实现A/SDL 和 /Library/Frameworks/SDL.framework/Versions/A/SDL。将使用两者之一。哪一个是未定义的。

然后游戏继续在第一个 SDL_PollEvent 处以 EXC_BAD_ACCESS 符号崩溃。

如果 SDL.framework 仅存在于应用程序包中（或根本不存在），则游戏根本拒绝启动。

如果 SDL.framework 仅存在于 /Library/Frameworks 中，则游戏可以正常运行。

这*仅*适用于 SDL.framework，而不适用于我在项目中使用的其他 SDL 衍生产品（SDL_image、SDL_mixer 等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:52:37.317

查看这篇文章： [在 Mac App Bundle 中嵌入框架](https://stackoverflow.com/questions/12499232/embedding-frameworks-in-a-mac-app-bundle?rq=1)

改变

> 运行路径搜索路径”构建设置为“@loader_path/../Frameworks”

正如建议的那样，从我的输出中删除了该消息，并且还允许它在我的 /Library/Frameworks 文件夹中没有 SDL.framework 的情况下运行。

# meteor - 流星网络框架支持哪些网络浏览器？

> ID：10127211
> 
> 赞同：18
> 
> 时间：2012-04-12T15:52:27.603
> 
> 标签：meteor

具体支持哪些版本的 Internet Explorer 浏览器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T21:34:39.600

核心 Meteor 包支持 IE6 及更高版本。我修复了`unsupported.html`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-18T13:46:12.623

根据 Meteorpedia，以下是支持的浏览器及其版本：

> *   Android 股票浏览器（基于 Webkit）
> *   铬合金
> *   火狐 7+
> *   iOS浏览器
> *   IE8+
> *   野生动物园 4+
> *   桌面歌剧
> *   移动歌剧

更多信息请访问：[Meteorpedia 支持的浏览器](http://meteorpedia.com/read/Supported_Browsers)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T16:05:49.117

如果您查看浏览器支持的源代码，看起来就像 IE 5 之上的任何东西。应该有一个浏览器支持页面，但它看起来已禁用。

我正在努力修复静态浏览器，以便搜索引擎和旧浏览器获得某种形式的页面。

# c# - 字典失去了它的价值

> ID：10127212
> 
> 赞同：0
> 
> 时间：2012-04-12T15:52:29.180
> 
> 标签：c#, dictionary

```
 Dictionary<string, string> f = new Dictionary<string, string>();
        Dictionary<int, Dictionary<string, string>> lines = new Dictionary<int, Dictionary<string, string>>();

        while ((line = sr.ReadLine()) != null)
        {
            lineArr = line.Split(',');
            int x = 0;
            foreach (string field in lineArr)
            {
                f.Add(keys[x], field);
                x++;
            }
            lines.Add(lineIndex, f);
            f.Clear();
            lineIndex++; 
```

字典 f 是临时的，我想将它的值存储在另一个字典中，但是一旦我清除（）它，字典行中的值就会丢失，我想它会提供某种参考。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T15:54:10.400

移动`f`循环内的声明。这样您就不必每次都清空它并且引用保持不变：

```
Dictionary<int, Dictionary<string, string>> lines = new Dictionary<int, Dictionary<string, string>>();

while ((line = sr.ReadLine()) != null)
{
    Dictionary<string, string> f = new Dictionary<string, string>();

    lineArr = line.Split(',');
    int x = 0;
    foreach (string field in lineArr)
    {
        f.Add(keys[x], field);
        x++;
    }
    lines.Add(lineIndex, f);

    lineIndex++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T15:55:23.957

变量`f`持有对 a 的引用`Dictionary<string, string>`对象的引用。当您将它添加到另一个字典时，您并没有创建一个新对象，而只是对同一对象的另一个引用。

我强烈建议在`f = new Dictionary<string, string>()`这里选择阻力最小的路径。

# pyqt - 在 PyQt 中获取操作系统主题颜色值

> ID：10127215
> 
> 赞同：2
> 
> 时间：2012-04-12T15:52:41.767
> 
> 标签：pyqt, background-color

我只想在悬停并选择它时获取任何小部件（按钮、列表项、文本框）的背景颜色值，我希望在我的自定义样式表中使用它。

为了更好地理解，我附上了以下在 Ubuntu 中拍摄的屏幕截图。这同样适用于 Windows。

带有悬停效果：
![滞留效应](../Images/3cb12cc51b9b29b29a5bbc9c09be4721.png)

具有选定的效果：
![具有选定的效果](../Images/601a58378244602c98aa6ee9dd417dae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:28:53.753

`QPalette.color()`键返回选定的颜色`QPalette.Highlight`。在样式表中，您可以使用`{ background-color: palette(highlight) }`.

悬停背景颜色似乎不是`QPalette`颜色的一部分，但显然要么作为本机小部件 API (gtk) 的一部分绘制，要么硬编码到`QStyle`类中。

# cakephp - CakePHP2.0中如何用testAction传递参数

> ID：10127216
> 
> 赞同：0
> 
> 时间：2012-04-12T15:52:42.500
> 
> 标签：cakephp, testing, parameters, phpunit, cakephp-2.0

我想用这个头文件测试一个函数：

```
public function includeNumComments($posts){ 
```

其中 $post 是一个数据数组。

我想知道如何测试将一系列帖子传递给它的方法。

我已经尝试过这样的事情，但它不起作用：

```
$result = $this->testAction("/comments/includeNumComments/", array('data' => $posts));

$result = $this->testAction("/comments/includeNumComments/", array($posts)); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T15:20:56.343

这是正确的案例，它对我有用。希望能帮助到你：

```
public function testAddUser() {
    $data = array(
        'User' => array(
            'id' => 12,
            'username' => 'testname1',
            'password' => 'Pass@123!',
            'email' => 'test@example.com'
        )
    );
    $result = $this->testAction(
        '/users/add',
        array('data' => $data, 'method' => 'post')
    );
    debug($result);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:07:29.903

那并没有真正使用`testAction`，因为您不能通过 HTTP 传递数组。没有办法通过网站上的表格或链接来做到这一点。

您可以将其作为正常功能进行测试：

```
$result = $this->CommentsController->includeNumComments($posts); 
```

# powerbuilder - 在 PowerBuilder 中为多个目标制作一个 exe

> ID：10127217
> 
> 赞同：0
> 
> 时间：2012-04-12T15:52:44.903
> 
> 标签：powerbuilder

我有 3 个 PB 目标，每个目标都考虑一个模块及其 exe，但现在我需要在 3 个模块之间进行集成，并且我需要成为一个 exe。我建议创建新目标并在其中调用所有其他 3 个模块，但我需要用户感觉使用一个 exe。我为每个模块使用 Outlook 界面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:04:19.057

It's entirely possible to make a new target using PBLs (**P** ower **B** uilder object **L** ibraries - spaces required by SO editor for bolding to work, sorry) from existing targets and create a new target using an existing application object or different application object. There are a few things you'll need to watch out for.

References to other objects in your code will translate to references to the compiled versions of those objects, so if A references B in Target1, then if B compiles a little differently in Target123, then A may not work correctly. You'll find yourself doing a lot more Full Builds when you switch between projects.

Of course, you'll need to watch for code-level issues like compatibility of global variables, and whether code from Target1 objects use the global variables differently than objects in Target2 (or expect exclusive use of the variables).

Duplicate objects (same name, same type, different PBLs) is an issue to be aware of, especially if objectA in Target1 has different code than objectA in Target2\. You don't mention PFC in your question, but you've tagged PFC; if you have custom extensions in each target or if each target is based on a different version of PFC, duplicate objects will be a massive issue for you. When you unify PBL lists, the first object in target library order will get picked up, and the others ignored. PBL Peeper ([www.techno-kitten.com](http://www.techno-kitten.com), a little self-promotion) will help you identify duplicates and compare them.

There are probably plenty more issues you'll need to deal with, including a design of what is going to happen to the application experience when these are "integrated". This might be trivial, or it might be a nightmare.

Good luck,

Terry.

# c# - C# Outlook 互操作。Outlook 未关闭

> ID：10127219
> 
> 赞同：1
> 
> 时间：2012-04-12T15:52:53.130
> 
> 标签：c#

以下问题让我发疯。在 C# 中，我试图确保在运行一些代码以获取所有日历事件后关闭 Outlook，但无论我尝试什么，它都不会。谁能帮我？

```
private void button1_Click(object sender, EventArgs e)
{
    Microsoft.Office.Interop.Outlook.Application outlookApp = null;
    Microsoft.Office.Interop.Outlook.NameSpace mapiNamespace = null;
    Microsoft.Office.Interop.Outlook.MAPIFolder CalendarFolder = null;
    Microsoft.Office.Interop.Outlook.Items outlookCalendarItems = null;

    outlookApp = new Microsoft.Office.Interop.Outlook.Application();
    mapiNamespace = outlookApp.GetNamespace("MAPI");

    CalendarFolder = mapiNamespace.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderCalendar);
    outlookCalendarItems = CalendarFolder.Items;

    outlookCalendarItems.IncludeRecurrences = true;
    foreach (Microsoft.Office.Interop.Outlook.AppointmentItem item in outlookCalendarItems)
    {
        if (item.IsRecurring)
        {
            Microsoft.Office.Interop.Outlook.RecurrencePattern rp = item.GetRecurrencePattern();
            DateTime first = new DateTime(2008, 8, 31, item.Start.Hour, item.Start.Minute, 0);
            DateTime last = new DateTime(2008, 10, 1);
            Microsoft.Office.Interop.Outlook.AppointmentItem recur = null;

            for (DateTime cur = first; cur <= last; cur = cur.AddDays(1))
            {
                try
                {
                    recur = rp.GetOccurrence(cur);
                    MessageBox.Show(recur.Subject + " -> " + cur.ToLongDateString());
                }
                catch
                {
                }
            }
        }
        else
        {
            MessageBox.Show(item.Subject + " -> " + item.Start.ToLongDateString());
            break;
        }
    }

    ((Microsoft.Office.Interop.Outlook._Application)outlookApp).Quit();
    //outlookApp.Quit();
    //(outlookApp as Microsoft.Office.Interop.Outlook._Application).Quit();

    outlookApp = null;

    System.Runtime.InteropServices.Marshal.ReleaseComObject(outlookCalendarItems);
    System.Runtime.InteropServices.Marshal.ReleaseComObject(CalendarFolder);
    System.Runtime.InteropServices.Marshal.ReleaseComObject(mapiNamespace);
    //System.Runtime.InteropServices.Marshal.ReleaseComObject(outlookApp);

    System.Runtime.InteropServices.Marshal.FinalReleaseComObject(outlookCalendarItems);
    System.Runtime.InteropServices.Marshal.FinalReleaseComObject(CalendarFolder);

    System.Runtime.InteropServices.Marshal.FinalReleaseComObject(mapiNamespace);
    //System.Runtime.InteropServices.Marshal.FinalReleaseComObject(outlookApp);
    GC.Collect();
    GC.WaitForPendingFinalizers();

    mapiNamespace = null;
    CalendarFolder = null;
    outlookCalendarItems = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:12:31.617

您是否调试过代码以查看应用程序是否曾经访问 OutlookApp.Quit() 命令？

解决此问题的唯一其他方法是彻底杀死进程“Outlook.exe”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:06:01.350

临时硬核解决方案：

```
public static class OutlookKiller
{
        [DllImport("user32.dll", EntryPoint = "GetWindowThreadProcessId", SetLastError = true,
CharSet = CharSet.Unicode, ExactSpelling = true,
CallingConvention = CallingConvention.StdCall)]
    private static extern long GetWindowThreadProcessId(long hWnd, out long lpdwProcessId);

    public static void Kill(ref Microsoft.Office.Interop.Outlook.Application app)
    {
        long processId = 0;
        long appHwnd = (long)app.Hwnd;

        GetWindowThreadProcessId(appHwnd, out processId);

        Process prc = Process.GetProcessById((int)processId);
        prc.Kill();
    }
} 
```

# ruby-on-rails - 提交后在同一个视图上显示一条消息

> ID：10127222
> 
> 赞同：2
> 
> 时间：2012-04-12T15:53:04.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个非常基本的应用程序，它有 1 个控制器，它有新的和创建方法和一个 form_for，用于使用传递的参数在数据库中创建一个条目。

当我点击提交时，显示视图被呈现。有没有办法不让页面重定向，所以视图与表单保持不变，并且在视图顶部显示一条 Flash 消息？

我试过 flash[:notice] 和 flash.now[:notice] 但没有运气。

这是我的创建控制器

```
def create
@campaign = Campaign.new(params[:campaign])

respond_to do |format|
  if @campaign.save
    flash[:notice] = "Success"
    # format.html { redirect_to(@campaign, :notice => 'Successfully created.') }
    # format.xml  { render :xml => @campaign, :status => :created, :location => @campaign }
  else
    format.html { render :action => "new" }
    format.xml  { render :xml => @campaign.errors, :status => :unprocessable_entity }
  end
end 
```

结尾

# javascript - 如何在运行 perl 机械化脚本时操作 DOM 元素？

> ID：10127231
> 
> 赞同：0
> 
> 时间：2012-04-12T15:53:35.467
> 
> 标签：javascript, perl, progress-bar, perl-module, www-mechanize

[这篇文章](https://stackoverflow.com/questions/1937780/how-can-i-add-a-progress-bar-to-wwwmechanize)讨论了如何通过计算 www::mechanize Perl 脚本下载文件的百分比来通过进度条通知用户。

我需要通知我的用户 www::mechanize 脚本的进度，但不一定是剩余百分比。该脚本正在通过用户的帐户进行迁移并获取数据，这些数据的大小可能会有很大差异，因此百分比因子是未知的。

如果我可以通过一些 js DOM div 写入（在 perl 脚本运行时显示“加载器”图像的对话框中）显示“进度”，那么这就足够了。

我可以像这样注入js脚本吗：

```
<script>
$('#formboxtext').html('Logging into account ...');
</script> 
```

进入 Perl 脚本以向我的用户显示进度？还是必须在更新 DOM 之前返回 Perl 脚本？（答案似乎是“不”。）

我需要 JavaScript::SpiderMonkey 和 WWW::Scripter 模块来实现这一点，还是解决方案更简单？

**编辑：**

我正在扩展一个基于 PHP 的 CMS。我使用 Perl 和模块 www::Mechanize 编写了一个屏幕抓取脚本，该模块遍历另一个站点上用户帐户的几页以检索到 mySQL 数据库。Perl 脚本完成后，我将以 php 形式显示收集到的内容供用户保存。收集过程从 10 秒到 1 分钟不等。我想在脚本导航收集信息的用户帐户页面时显示进度。

首先，我为用户提供了一个 jQuery 模式对话框（调用一个 php 文件以使用用户名和密码输入的形式填充其内容），用于登录到他们的个人帐户。我在这个对话框中显示了一个加载器图像和一个请求耐心的句子，但我想使用 jQuery 重写这个句子 (div)，因为 Perl 脚本在页面中导航，将进度发送回显示；例如，“我现在在这里。现在我在这里。” 如果发生错误（即登录错误），那么我可以重写模式对话框并照常提供解决方案。如果成功，那么我将关闭对话框并在表单输入中显示收集的信息，以便保存到我的数据库中 - 在产生模式对话框的 php 页面上。

如果所有这些都需要多个 DOM、分叉进程并将控制权从一个脚本执行返回到另一个脚本执行……那么我肯定是在我的头上。但是，我想学习它。:) 我将不胜感激有关阅读和学习内容的概述。如果它实际上比我意识到的要简单得多，那么我也会很感激这个答案。

感谢 daxim 和 reinierpost 的耐心和建议。谢谢你的帮助。

**答案：** 回顾：对我来说，我决定通过估计所需时间来伪造显示进度的进度条。效果很好。[这篇文章](https://stackoverflow.com/questions/10304602/proc-open-extending-file-descriptor-numbers-to-enable-status-feedback-from-a)展示了如何将 perl 脚本的输出复制回调用 php 脚本，但是将这些信息反馈回原始 DOM 变得过于复杂，不值得。由于传递给 perl 脚本的各种参数改变了进程和输出，它变得更加复杂。“伪造它”被证明是一个很好的解决方案。嘿，现在我明白为什么我的女朋友会这样做了！:)

PS。我给 daxim 打了绿色的复选标记，因为他回答了我的其他问题并且对我帮助很大，尽管他在这个问题上有点摸不着头脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:21:34.507

[不要像https://stackoverflow.com/a/1938448](https://stackoverflow.com/a/1938448)那样将进度打印到 STDOUT，而是将数字公开为 Web 服务。这应该足够了：

```
sub {
    return [200, [Content_Type => 'text/plain'], [$PROGRESS]]
} 
```

在客户端，使用[jQuery get](http://api.jquery.com/jQuery.get/)每隔半秒左右轮询一次 Web 服务，并使用[jQuery Progressbar](http://docs.jquery.com/UI/Progressbar)来显示它。

* * *

**编辑**：代码示例

```
use 5.010;
use strictures;
use DBI qw();
use Plack::Request qw();
use POSIX qw(floor);
use Forks::Super qw(fork);
use WWW::Mechanize qw();

sub db_connect {
    return DBI->connect('dbi:SQLite:dbname=/var/tmp/progress.db');
}

sub {
    my ($env) = @_;
    my $req = Plack::Request->new($env);
    if ('/progress' eq $req->path_info) {
        return [200,
            [Content_Type => 'text/html'],
            [db_connect->selectrow_array('select progress from progress')]
        ]
    } else {
        fork(sub => sub {
            state $total = 0;
            my $dbh = db_connect;
            $dbh->do('delete from progress');
            $dbh->do('insert into progress (progress) values (0)');
            WWW::Mechanize->new->get(
                'http://localhost:5000/VBoxGuestAdditions_4.0.4.iso', # large-ish file
                ':read_size_hint' => 1024**2,
                ':content_cb' => sub {
                    my ($data, $response, $proto) = @_;
                    $total += length($data);
                    my $size = $response->header('Content-Length');
                    $dbh->do(
                        'update progress set progress = ?', {}, floor(($total/$size)*100)
                    );
sleep 1;
                },
            );
        }) unless defined db_connect->selectrow_array('select progress from progress');
        return [200,
            [Content_Type => 'text/html'],
            [q~<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" />
<style>
#progress { width: 80em; height: 5em; border: 1px solid black; }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script>
jQuery(document).ready(function() {
    // TODO: stop the timer if progress == 100 or no response
    var timer = setInterval(function() {
        jQuery.ajax({ async: false, cache: false, dataType: 'html', url: 'http://localhost:5001/progress' }).done(function(progress) {
            jQuery('#progress').progressbar({ value: parseInt(progress) });
        });
    }, 500);
});
</script>
</head>
<body>
<h1>downloading your stuff</h1>
<div id="progress"><div>
</body>
</html>~]
        ]
    }
}; 
```

# c - OpenMP 和函数

> ID：10127233
> 
> 赞同：0
> 
> 时间：2012-04-12T15:53:43.317
> 
> 标签：c, thread-safety, openmp

如果我有这样的循环

```
int main (){
....

for (i=0; i< N; i++)
{
  /*Do some calculations*/
  for (j=0; j<M; j++)
  {
    /*Do more calculations*/
    compute_x( some pointers as args );
  }
  compute_y(some pointer as args);
}
...

return value;
}

and 

void compute_x( some pointers as args )
{
  /* some calculations*/
  for (h=0; h<COUNT; h++)
  {
   ...
  }
}
} 
```

和 compute_y() 类似。

我的问题是，如果我使用 OpenMP 指令并行化主循环中的外循环，

```
#pragma omp parallel for schedule (runtime) private ( ...)
for (i=0; i< N; i++)
{
 ...
} 
```

函数的行为`compute_x()`和`compute_y()`?? 据我了解，它们将由每个线程执行，因此 for 循环`compute_x()`将由每个线程从 0 执行到 COUNT 。

如果这是正确的，我还能做些什么来在函数的 for 循环中分担工作负载`compute_x()`（假设没有数据依赖性）。我的第一个猜测是让函数 compute_x() 和 compute_y() 内联，但函数相当大，而且它们还调用其他函数，幸运的是，它们也可以并行执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:03:48.070

如果外循环有足够的迭代来保持所有内核忙碌，则没有理由将并行化扩展到内循环。这只会创建更多不必要的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:16:36.377

如果您`some pointers as args`对每个线程都不同（每个线程不同`i`）或者如果它们带有`const`修饰符，即没有线程可以通过指针修改内容，那么不会发生任何意外。

坏事是当您的不同线程共享相同的指针并同时写入/读取它们指向的数据时，您可能会得到意想不到的结果。

# java - 如何显示某个类的所有可用方法（java）

> ID：10127235
> 
> 赞同：0
> 
> 时间：2012-04-12T15:53:46.253
> 
> 标签：java

> **可能重复：**
> [我可以得到一个类的所有方法吗？](https://stackoverflow.com/questions/5266532/can-i-get-all-methods-of-a-class)

有没有办法在java中显示某个类的所有可用方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:56:10.927

通过反思：

```
public static void main(String[] args){
    for (Method method : YourClass.class.getMethods()) {
        System.out.println(method.getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T15:54:56.000

您可以使用 Java[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)来获取有关类的所有信息。

# css - ttf2eot - Mac OS X 上的输入路径是什么？

> ID：10127238
> 
> 赞同：0
> 
> 时间：2012-04-12T15:53:57.010
> 
> 标签：css, shell, command-line

我使用 Mac OS X Lion 并安装了 MacPorts 和工具 ttf2eot 将 .ttf 字体转换为 .eot。

当我按照此处所述使用它时：[http](http://code.google.com/p/ttf2eot/) ://code.google.com/p/ttf2eot/我收到错误：

```
-MacBook-Pro:~ $ ttf2eot < pacifico.ttf > pacifico.eot
-bash: pacifico.ttf: No such file or directory 
```

pacifico.ttf 必须在哪个文件夹中才能找到？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:56:36.303

当您像这样在命令行上输入文件名时，它会在当前文件夹中查找该文件。

```
ttf2eot < pacifico.ttf > pacifico.eot 
```

`pacifico.ttf`在当前文件夹中查找，`~`在这种情况下是（您的主文件夹）。

您还可以使用绝对路径：

```
ttf2eot < /path/to/pacifico.ttf > pacifico.eot 
```

# html - 在嵌入式 Pdf/Applet 上浮动 Div Safari 的解决方案

> ID：10127239
> 
> 赞同：1
> 
> 时间：2012-04-12T15:54:01.377
> 
> 标签：html, pdf, z-index

我有导航菜单 html，我希望能够在它下面的对象顶部打开。外汇。小程序或嵌入的 pdf 文件。但是，将 div 浮动在嵌入元素或小程序上并不适用于所有浏览器（需要 safari、ie8+、firefox、chrome）。不起作用我的意思是它没有出现在顶部。

查看各种[帖子](https://stackoverflow.com/questions/593176/div-layer-on-top-of-pdf)，我得出以下代码：

```
 <!DOCTYPE html>
<html>
<head>
     <script type="text/javascript">
        function showHideElement(element){
            var elem = document.getElementById(element);

            if (elem.style.display=="none"){
                elem.style.display="block"
            }
            else{
                elem.style.display="none"
            }
        }
    </script>
    <style>
        div:hover {
            background-color:red !important;
        }
    </style>
</head>
<body>
    <div style="position:absolute;height:100px;width:100px;background-color:Yellow;" onclick="showHideElement('Iframe1');">click me to toggle elem (ie)</div>
    <div style="position:absolute;z-index:100;background-color:Green;height:100px;width:100px;margin-left:200px;"></div>

    <div style="position:absolute;z-index:20;margin-left:200px;">
    <iframe visible="true"  id="Iframe1" height="100" width="100" runat="server" frameborder="0" scrolling="auto" >

     </iframe>
     </div>

    <div style="position:absolute;z-index:10;margin-left:100px;">
        <iframe visible="true" style="z-index:1" id="ipdf" src="http://www.irs.gov/pub/irs-pdf/fw4.pdf" height="1000" width="1000" runat="server" frameborder="0" scrolling="auto" >
        </iframe>
     </div>
</body>
</html> 
```

这适用于除 Safari 之外的所有浏览器，是否也可以在 Safari 上运行（我使用的是 5.1.4 Windows）？

我在以前的帖子中没有看到 Safari 的提及...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:44:12.183

我自己仍在寻找解决方案。到目前为止，我没有发现任何适用于 Safari 的东西。我尝试将嵌入的 PDF 包装在 iframe 中，在 div 中，将其设置为可见性：隐藏，显示：无，和/或两者都在单击事件上（因此弹出模式对话框显示在 PDF 区域的顶部) 等。 Safari 无法正常工作。不过，这确实很奇怪。在工作中，我使用的是 Windows 7 PC，当鼠标悬停在任务栏上打开的应用程序的图标上时，会出现一个预览窗口，其中包含该应用程序的微型版本。当我将鼠标悬停在我打开的 Safari 上时，出现的图像显示我的修复工作正常！当我单击图像以使实际的 Safari 窗口出现在最前面时……一切都再次“损坏”了。现在这很奇怪。

如果您找到适用于 Safari 的有效解决方案，请与我联系，我也会这样做。

# visual-studio-2010 - 如何通过 b2 使用 pdb 文件构建 boost 库

> ID：10127241
> 
> 赞同：3
> 
> 时间：2012-04-12T15:54:13.277
> 
> 标签：visual-studio-2010, boost

基于这个优秀的[教程](https://stackoverflow.com/questions/2629421/how-to-use-boost-in-visual-studio-2010)，我能够毫无问题地构建 boost 库。但是，我找不到任何生成的 PDB 文件。

> boost_1_49_0>b2 --prefix=c:\temp\boost1.49 --toolset=msvc-10.0 --build-type=complete

因为我已经为 boost 构建了 .lib 和 .dll 文件。为了生成所有相应的 pdb，我还应该做些什么最小构建？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T16:33:47.753

来自[“内置功能”](http://www.boost.org/boost-build2/doc/html/bbv2/overview/builtins/features.html)

当您致电 b2 尝试使用`--debug-symbols=on`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T20:49:23.030

您可以通过稍微调整 msvc.jam 直接在必要的目录（调试器可能需要）中为静态库构建 pdb。找到`rule archive`并改变

```
PDB_NAME on $(>) = $(<[1]:S=.pdb) ; 
```

例如：

```
PDB_NAME on $(>) = "c:\\Lib\\boost\\stage\\lib\\$(<[1]:S=.pdb:G=)" ; 
```

（免责声明：我只是模糊地知道那个神秘的表达是什么意思，从来没有在任何地方看到它的记录，这纯粹是我的猜测，因此不能保证，但它对我有用）。

DLL 的 PDB 由链接器构建，因此您可以在例如 project-config.jam 中设置其选项：

```
import toolset ;
using msvc ;
toolset.flags msvc.link LINKFLAGS <link>shared : "/PDB:c:\\Lib\\boost\\stage\\lib\\" : unchecked ; 
```

我确信有一种方法可以自动从系统中获取输出目录。如果有人知道这一点，请更新。

# sencha-touch-2 - 如何调试 Sencha Touch 2 应用程序？

> ID：10127244
> 
> 赞同：1
> 
> 时间：2012-04-12T15:54:20.973
> 
> 标签：sencha-touch-2

如何调试 Sencha touch 2？我一直在使用 Sencha Designer 创建 Sencha Touch 2 项目。我使用 Chrome 进行测试，现在我想对我的一些代码进行断点，我该怎么做？每次我刷新页面时，断点都消失了。我读了一些我需要在 URL 中使用“？断点”的东西，但我不知道为什么到目前为止还没有工作：

[http://localhost/googlemaps/app.html?breakpoint](http://localhost/googlemaps/app.html?breakpoint)

我还意识到我要调试的文件有一个“_dc”参数：

[http://localhost/googlemaps/app/view/detalleMapa.js?_dc=1334242199729](http://localhost/googlemaps/app/view/detalleMapa.js?_dc=1334242199729)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T17:32:10.473

使用 Chrome，您可以从扳手菜单 > 工具 > 开发者工具（键盘快捷键为“Ctrl+Shift+I”）启动“[开发者工具”窗口。](https://developers.google.com/chrome-developer-tools/)

从那里，您可以选择“脚本”选项卡，然后在页面的所有 javascript 文件列表中选择您的脚本。

显示 javascript 文件后，单击行号以添加断点。

如果你想调试动态加载的代码（详见[Ext.Loader](http://docs.sencha.com/touch/2-0/#!/api/Ext.Loader)），你应该在你的应用程序中添加如下内容：

```
Ext.Loader.setConfig({disableCaching: false}); 
```

最后，重新加载您的页面，如果再次加载相同的文件，Chrome 将在执行该行时中断执行。

调试愉快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T16:54:30.567

所以仅供参考...我发现（搜索“如何调试 Sencha Touch 2 应用程序？ - 第 1 部分”）您可以简单地添加“调试器；” 到您的脚本以使 Chrome 调试器在此时中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T00:32:53.450

使用 chrome，我们获得了 sencha 的扩展，称为“App Inspector for sencha，使用该扩展，您可以查看组件并进行调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T18:47:18.320

将手机连接到 PC 并将其放入 hte 浏览器：

铬：//检查/#设备

# java - 计算整数素因数中每个数字的出现次数

> ID：10127247
> 
> 赞同：0
> 
> 时间：2012-04-12T15:54:29.597
> 
> 标签：java, algorithm, math, primes

我想计算一个整数的每个素因子的数量。例如 18=2^1*3^2。我想得到每个素数的所有指数部分。对于数字 18，它是 1+2=3。
下面是生成整数的所有质因数的程序。

```
 Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();
    for (int i = 2; i <= n / i; i++) {
        while (n % i == 0) {
            System.out.print(i + ", ");
            n /= i;
        }
    }
    if (n > 1)
        System.out.print(n + ", "); 
```

对于输入 18，此程序打印 2, 3, 3, . 至于完成我的要求，要计算每个素数的出现，我可以先将它们全部添加到一个列表中，然后`for`从列表的开始到结束的循环可以计算每个数字的出现。但这个想法对我来说似乎并不好。不必要我`for`为所有素数添加一个循环，它只是告诉我这个素数在列表中出现了 n 次。
任何更好的方法来获得整数的单个素数的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:05:34.700

是的，正如@attila 和@robert 所说：

```
import java.util.Scanner; 
import java.util.TreeMap; 

public class Test{
    public static void main( String args[] ){
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        TreeMap<Integer, Integer> factors = new TreeMap<Integer, Integer>(); 

        for (int i = 2; i <= n / i; i++) {
            int count = 0; 

            while (n % i == 0) {
                System.out.print(i + ", ");
                n /= i;
                count ++; 
            }
            if( count > 0 ) 
                factors.put( i, count ); 
        }
        if (n > 1){
            System.out.print(n + ", ");
            factors.put( n, 1 ); 
        }
        System.out.println(); 

        System.out.println( "-------------" ); 
        for( Integer factor : factors.keySet() ){
            System.out.println( factor + "^" + factors.get( factor ) ); 
        }
    }
} 
```

我正在使用树形图，因为它使因子保持自然顺序，这很整洁:) 你也可以使用应该更快一点的哈希图。但是素数分解的实现应该很慢，我认为这并不重要:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:00:33.597

每次执行时`n/=i;`，都会遇到一个因素。因此，通过在该点增加一个计数器（从 0 开始），您可以获得分解过程结束时的因子总数。

请注意，您需要额外的 if 才能正确处理素数。对于素数，您找不到任何因子，因此计数器将为 0——在这种情况下，您需要在循环之后将其设置为 1（一个因子：自身）

# php - 何时实现 javascript MVC 框架

> ID：10127253
> 
> 赞同：5
> 
> 时间：2012-04-12T15:54:54.867
> 
> 标签：php, javascript, ajax, model-view-controller

我在一家专门为初创公司提供网络应用程序的小型网络机构工作。我正在推动我的老板使用 javascript mvc 标准（我正在使用[BackboneJS](http://documentcloud.github.com/backbone/)）和模板（使用[underscore](http://documentcloud.github.com/underscore/)）将更多资源用于在客户端构建健壮的框架

我意识到在某些情况下，健壮的 javascript 框架是有意义的（例如，复杂的单页 Web 应用程序），而在其他情况下可能不值得付出努力（博客文章列表，可以使用 php 模板化）

我们正在尝试为何**时在页面上实现 javascript 框架**以及何时依赖 php 进行模板和服务器请求制定标准。

我希望互联网社区的一些人对这个问题有一些想法，或者可以参考我关于这个主题的文章。我有一些自己的想法，但“专家意见”会更受我的管理团队的影响......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:15:52.743

您可能需要考虑最终用户是谁。对于速度较慢的设备（办公室台式机、3 年前的笔记本电脑等），庞大的客户端框架可能会导致缺乏，最终浏览页面可能不会很有趣。

因此，如果该网站专注于老年人、非技术人员或办公室工作人员，您可能希望轻松使用 javascript。

# matlab - MATLAB中的高斯拉普拉斯算子（LOG）边缘检测器

> ID：10127264
> 
> 赞同：1
> 
> 时间：2012-04-12T15:55:23.327
> 
> 标签：matlab, computer-vision

我打算在matlab中执行高斯边缘算子的拉普拉斯算子..

这是我所拥有的知识

```
LOG operators are second-order deriatives operator. Second order deriatives operator result in zero-crossing. At the step, position where 1st deriative is maximum is where the second deriative has zero crossing. 
```

我使用的掩码是 mask = [0 1 0; 1 -4 1; 0 1 0];

原图是

![在此处输入图像描述](../Images/13c4e5b20e67833f32c75dce6a1cdd0c.png)

我得到的输出来自原始图像

![在此处输入图像描述](../Images/bee09c6b905c0b9f6d25a738986eb09e.png)

我的问题是为什么图像中的边缘看起来是白色而不是黑色（= 0）。应该是黑色的吗？我是对还是错？谁能解释一下？

卷积函数：

```
function [ I2 ] = image_convolution(I,w,G)
m= (w-1)/2;
N= size(I,1);
M=size(I,2);
for i=1:N
    for j=1:M
        if (i > N-m-1 || j > M-m-1 || i<m+1 || j <m+1)
            I2(i,j) = 0;
            continue;
        end
        sum1 = 0;
        for u=1:w
            for v=1:w
                sum1 = sum1+I(i+u-m-1,j+v-m-1)*G(u,v);
            end
        end
        I2(i,j)=sum1;
    end
end

end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T20:49:34.783

一个简单的测试可以回答你所有的问题：

```
log_mask = [0 1 0; 1 -4 1; 0 1 0];

vertical_bar = zeros(11);
vertical_bar(:,5) = 1;
bar_filtered = image_convolution(vertical_bar, 3, log_mask)

box = zeros(11);
box(3:7,3:7) = 1;
box_filtered = image_convolution(box, 3, log_mask)

figure;
subplot(2,2,1); imshow(vertical_bar,[]); title('Vertical Bar');
subplot(2,2,2); imshow(bar_filtered,[]);title('Vertical Bar LoG Filtered');
subplot(2,2,3); imshow(box,[]);title('Box');
subplot(2,2,4); imshow(box_filtered,[]);title('Box LoG Filtered');

# Output:
#
# bar_filtered =
# 0     0     0     0     0     0     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     1    -2     1     0     0     0     0     0
# 0     0     0     0     0     0     0     0     0     0     0
# 0     0     0     0     0     0     0     0     0     0     0

#box_filtered =

# 0     0     0     0     0     0     0     0     0     0     0
# 0     0     1     1     1     1     1     0     0     0     0
# 0     1    -2    -1    -1    -1    -2     1     0     0     0
# 0     1    -1     0     0     0    -1     1     0     0     0
# 0     1    -1     0     0     0    -1     1     0     0     0
# 0     1    -1     0     0     0    -1     1     0     0     0
# 0     1    -2    -1    -1    -1    -2     1     0     0     0
# 0     0     1     1     1     1     1     0     0     0     0
# 0     0     0     0     0     0     0     0     0     0     0
# 0     0     0     0     0     0     0     0     0     0     0
# 0     0     0     0     0     0     0     0     0     0     0 
```

过滤结果以图形方式显示： ![在此处输入图像描述](../Images/cbccfeaa48bb6ffa8e584d6602caf660.png)

看？*正如您所料，恰好*在边框上的像素确实具有负值。另一方面，边框旁边的像素具有正值！比信号恒定区域上的值更大。这些是您在结果中看到的“白色”值。

从数学上讲，这也很容易解释。看看你用的面膜

![使用的 LoG 掩码](../Images/829059844989945aceae2549c969120f.png)

我已经绘制了它，以便更容易看到大山谷周围的小山峰。简单来说，就是让边界周围的过滤值比其他像素有更大的幅度，从而产生“边界识别”的效果。

我已经绘制了使用 matlab 函数创建的掩码`fspecial('log')`。在这个制作中，山峰更容易被发现。 ![在此处输入图像描述](../Images/f328a00de11b233ae85aca8dd8ef4399.png)

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:23:42.620

这与计算卷积的方式有关。当您的内核（您的掩码）在边框中进行卷积时，内核会到达原始图像之外的区域。有一些关于在那里做什么的选择：

*   您可以假设该外部区域中的值为 0，
*   具有与边框相同的值，
*   或与图像的另一侧相同，就好像图像是周期性的（圆形）。

当图像外部的区域被假定为零并且边界值很高（例如在您的图像中）时，将检测到边缘，因为您正在从一个高值步进到零。

如果使用 imfilter，该函数默认假定该区域为 0。您可以使用选项“复制”（因此外部区域与边界相同），它应该可以解决这个问题。

您可以在官方文档中阅读更多相关信息：http: [//www.mathworks.com/help/toolbox/images/ref/imfilter.html](http://www.mathworks.com/help/toolbox/images/ref/imfilter.html)

此外，您生成的图像具有不同的大小，因为结果中包含外部区域。如果您使用 imfilter，则默认情况下会裁剪此区域。

我假设您使用的是 conv2 函数，默认情况下它同时存在这两个问题。

PS：我有一段时间没用过这个了。让我知道 imfilter 是否像我说的那样工作，或者您需要其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T01:21:55.163

只是一个简单的解决方案：使用

`imshow(image,[])`

代替

`imshow(image)`

# simplemodal - SimpleModal (jQuery) 在被 Javascript 调用时会丢失 CSS 格式

> ID：10127266
> 
> 赞同：0
> 
> 时间：2012-04-12T15:55:34.957
> 
> 标签：simplemodal

我需要从 Javascript 调用 SimpleModal 对话框...

我指的是[http://www.ericmmartin.com/projects/simplemodal-demos/上的可下载“确认覆盖”演示](http://www.ericmmartin.com/projects/simplemodal-demos/)

如果我使用...

```
<input type='button' name='confirm' class='confirm' value='Demo'/> 
```

...一切正常。但如果我改用......

```
<script type="text/javascript">
  $('#confirm').modal();
</script> 
```

...“确认”DIV 的文本内容将显示，但没有任何 CSS 格式。

怎么了？非常感谢您的帮助。

----------------------- 已编辑 -------------- ----

回答我自己的问题......谢谢你，乔，为我指明了正确的方向......

原始的 CSS 包含这样的定义......

```
#confirm {display:none;}

#confirm-overlay {background-color:#eee; cursor:wait;}

#confirm-container {height:140px; width:420px; ...} 
```

显然，#confirm-overlay 和 #confirm-container 仅在第一种方法调用 SimpleModal 时使用。

如果我将所有格式都放入#confirm，它似乎可以很好地使用 JavaScript：

```
#confirm {display:none; background-color:#eee; cursor:wait; height:140px; width:420px; ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:59:18.040

尝试

```
...
$('#confirm').addClass('confirm').modal();
... 
```

或者只是添加你的 CSS

```
#confirm{[style];} 
```

这样您就可以通过 ID 设置元素的样式，而不是依赖于应用到它的类。或者，简单地说，在 HTML 中应用该类。

# javascript - 将图像拖到网页上并在上传时立即显示预览

> ID：10127268
> 
> 赞同：1
> 
> 时间：2012-04-12T15:55:41.210
> 
> 标签：javascript, jquery, html, image, drag-and-drop

我正在尝试创建一个在线编辑器，用户可以 1）从他的磁盘中拖动图像并将其拖放到页面上。2）页面然后在后台显示图像的预览，同时在后台上传图像（iframe 的假 ajax 或其他东西，我可以这样做）。

1) 和 2) 的最佳/推荐解决方案是什么？还要考虑我已经在我的应用程序的其他部分使用 jQuery。

# install4j - install4j 是否具有用于处理 Windows 短 (8.3) 文件名的内置操作/API？

> ID：10127269
> 
> 赞同：1
> 
> 时间：2012-04-12T15:55:42.903
> 
> 标签：install4j

我正在使用 install4j 为需要在属性文件中搜索并替换为安装目录的 Windows 短文件名/路径的应用程序构建安装程序。我已经有一个“修改文本文件”操作，它执行以下操作：

```
Search Value:  INCHOME=C:\dev\inc\1.0
Replace Value: INCHOME=${installer:sys.installationDir} 
```

在我的情况下，这通常是 C:\Program Files\InControl。

我需要能够更改 ${installer:sys.installationDir} 的值，因此将“C:\Program Files\InControl”更改为“C:\PROGRA~1\InControl”，尽管这当然可能会因Windows 对此有规定。

我已通读以下网址提供的解决方案：

[http://dolf.trieschnigg.nl/eightpointthree/eightpointthree.html](http://dolf.trieschnigg.nl/eightpointthree/eightpointthree.html)

这似乎是一种普遍接受/使用的溶液。install4j 是否有内置的东西来处理这个问题，还是我需要包含这样的东西作为自定义代码？

如果我必须将其作为自定义代码包含在内，如何包含本机 Windows 库？

我在 com.install4j.api.windows.WinFileSystem 或其他任何地方都找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:31:25.453

它不在 API 中，但您可以使用

```
com.install4j.runtime.installer.platform.win32.FolderInfo.getShortPathName(String longPathName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:28:22.093

好的，开始工作了。上面的路径略有不同，我不得不使用 jad 反编译类来找到它，但是以下（添加了 FileInfo 类）有效：

```
import com.install4j.runtime.installer.platform.win32.*;

String incHome = (String)context.getVariable("sys.installationDir");
String incHomeShort = FolderInfo.getShortPathName(incHome);

context.setVariable("incHomeShort", incHomeShort); 
```

谢谢！

# c# - 为什么这个 asp.net Web 应用程序项目在更改配置时不编译？

> ID：10127270
> 
> 赞同：0
> 
> 时间：2012-04-12T15:55:45.560
> 
> 标签：c#, asp.net

昨天，在一个单独的问题中，我试图弄清楚为什么从服务器上的工作站点中提取的源代码存在问题。

该服务器包含一个功能齐全的网站/数据库（.Net 2）。

当我将代码拉到我的盒子时它不会运行。经过一番挠头，并在 dll 上自由使用 Reflector，很明显我的源代码与 bin fodler dll 中的源代码不匹配。

然后我注意到我有 Designer.cs 文件，这意味着它是一个 Web 应用程序项目，而不是一个网站。

然后我在服务器上创建了一个子域，在那里复制了代码，一切正常。因此，我更改了 web.config 文件，期望它强制重新编译并显示与本地相同的行为。只有它没有。

从 bin 文件夹中删除 app.dll 会导致错误，但再次没有使 applciation 重新编译/重新生成 dll。

所以我认为我在知识上遇到了一个空白。我可以更改一个 aspx 文件并在网站上查看更改。所以我假设后面的所有代码都是离线编译的，然后上传，但 aspx 文件仍然像往常一样提供 html。

那么，这是基于 Web 的应用程序而不是网站的标准行为吗？如果是这样，我有什么办法可以在服务器上重建它，以向我的客户证明最新的代码库不在服务器上，这将比他预期的要大得多？

# javascript - 将 innerhtml 与事件一起替换

> ID：10127271
> 
> 赞同：0
> 
> 时间：2012-04-12T15:55:54.593
> 
> 标签：javascript, jquery

我想用 clone1 或 clone2 替换 thisOne 的 innerhtml。

我已经想出了如何用克隆的元素替换整个 thisOne 元素，但我宁愿不这样做，因为我将数据存储在 li 元素中。

我还想出了如何在克隆 innerhtml、clone(true) 那个冗余标签元素周围放置一个单独的 div 标签，并将冗余标签及其 innerhtml 附加到 thisOne 中，但这些似乎是对标签的浪费。

我还发现 html() 不会带来事件，并且每次我交换 html 时都不想重新声明它们。

有什么建议么？谢谢

```
<ul>
<li id="thisOne" data-attr="whatever"></li>
</ul>

<ul style="display: none">
<li id="clone1">
<a href="#" class="doSomething1">Click</a>
<button class="doSomething3">Click</button>
</li>
<li id="clone2">
<a href="#" class="doSomething2">Click</a>
<button class="doSomething4">Click</button>
</li>
</ul>

....

$("clone1 a").click(function(){alert("hi");}); 
```

添加的以下新代码似乎不起作用。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Dialogs</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js" language="javascript"></script>
<script type="text/javascript">
$(document).ready(function(){    
    $("#cloneIt").click(function(){$('#newLocation').html($('#clone').html());});
    $("#clone a").on("click", function(){alert("click");});
    $("#clone select").on("change", function(){alert("change");});

});
</script>

</head>
<body>
<input type="button" value="Clone it" id="cloneIt" />

<div id="newLocation"></div>

<div id="clone" style="display: none">
<a href="#">Click Me</a>
<select><option>Hello</option><option>Goodby</option></select>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:04:08.463

您可以迭代子代，而不是将克隆的每个附加到`thisOne`

```
 $("#clone1, #clone2").each(function() {
        $(this).children().each(function() {
                $("#thisOne").append($(this).clone(true));
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:08:55.997

您必须委托该事件，以便它也等待选择器的未来出现。

像这样很容易

```
$("#clone1 a").on("click", function(){alert("hi");}); 
```

# php - 十六进制编码字符串中的 ISO-8859-1 字符（ASCII 之外）？

> ID：10127272
> 
> 赞同：2
> 
> 时间：2012-04-12T15:55:55.840
> 
> 标签：php, string, hex, iso-8859-1

例如。输入：

```
Riferimento-a-‚¬-9-90
```

输出：

```
Riferimento-a-%E2%82%AC-9-90
```

请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:01:10.870

要将 ISO-8859-1 字符串转换为三元组/百分比编码，请使用[`rawurlencode`](http://php.net/rawurlencode)：

```
$encoded = rawurlencode($str); 
```

但是，您粘贴到问题中的字符串不是 ISO-8859-1 编码的，如果它包含`BPH`(Break Permitted Here) 控制字符，它是一个不可打印的字符。与三元组/十六进制编码字符串一样，以下 PHP 表示法也是二进制安全的：

```
$str = "Riferimento-a-\xE2\x82\xAC-9-90"; 
```

将其作为 UTF-8 编码的字符串，结果如下：

```
Riferimento-a-€-9-90 
```

`%E2%82%AC`是 EURO SIGN (U+20AC) 的 urlencoded UTF-8 编码。

这可能是您正在寻找的。

松散相关：[如何使用 PHP 替换字符串中的非 SGML 字符？](https://stackoverflow.com/a/9737335/367456)

* * *

您在评论中还问：

> 如何转换`&egrave;`为`%hex`？

由于没有`&egrave;`( `è`) 涉及，我想你并不是很清楚你在这里问什么。但我先从你问的开始，因为它最简单。这是一个两步过程：

![渲染?grid=%2B--------%2B+++%2B--------%2B---------%2B+++%2B-----%2B-- ----%2B+++%2B---%2B----%2B%0D%0A%7C+cFDA+++%7C+++%7C+解码+++++++++++%7C+++%7C+编码+++++%7C+++%7C+cFDA+++%7C%0D% 0A%7C+实体+%2B--%3E%2B------%2B--%3E%2B---------- -%2B--%3E%2B+实体+%7C%0D%0A%7C+%26Name%3B+%7C+++%7Chtml_entity_decode%7C+++%7Crawurlencode%7C+++%7C+%25HEX+++%7C%0D%0A%7C++++%7Bd%7D% 7C+++%7C++cDBF++++++++++++%7C+++%7C++c1AB++++++%7C+++%7C+++++%7Bd%7D%7C%0D%0A%2B--------%2B+++%2B--------% 2B---------%2B+++%2B-----%2B------%2B+++%2B--------%2B&scale=1&background=FFFFFF&E=on&timeout=10](../Images/ff3c7f33a8df5e18db037e87481e7fb6.png)

您首先将命名的 HTML 实体转换为目标字符编码中的标准字符：

```
$entity = '&egrave;';
$iso_8859_1 = html_entity_decode($entity, NULL, 'ISO-8859-1'); 
```

然后将其转换为 '%hex' 编码，通常称为 urlencoding：

```
$hex = rawurlencode($iso_8859_1); 
```

基本上就是这样。如果您尝试转换目标编码中不存在的实体，则它不会被转换，因此无论字符编码如何都会保留信息。

但是，我认为这只是为您提供信息，因为除了运行这些转换之外，您还有其他一些问题。

> 在 phpmyadmin 中，它显示为`"Riferimento-a-â‚¬-9-90"`，我想将其转换为`"Riferimento-a-%E2%82%AC-9-90"`

您还没有分享显示的内容实际上是如何以文本表示的，但是因为您询问了命名的 HTML 实体（例如`&egrave;`），所以我假设您`â‚¬ / %E2%82%A`特别关注该部分：

```
â    %E2    Windows-1252    LATIN SMALL LETTER A WITH CIRCUMFLEX (U+00E2)
‚    %82    Windows-1252    SINGLE LOW-9 QUOTATION MARK (U+201A)
¬    %AC    Windows-1252    NOT SIGN (U+00AC) 
```

您为这些字符提供的有关 ISO-8859-1 的信息是错误的，因为在 ISO-8859-1`‚ / %82`中不存在，在那个地方是一些 C1 集控制代码。所以我假设它[在 HTML 文档](http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html#character-encodings-0)`Windows-1252`中很常见。

正如您所写，您从数据库中接收数据，我假设 phpmyadmin 将您在数据库中的 UTF-8 文本显示为 Windows-1252：

```
MySQL      : UTF-8:         \xE2\x82\xAC (€)    
PHPMyAdmin : Windows-1252:  \xE2\x82\xAC (â‚¬) 
```

如果您现在从数据库中获取 UTF-8 编码的数据，则只需在其上运行`rawurlencode`即可获得您要求的十六进制编码。

# c# - C# datetime.tryparse 可以处理错误日期

> ID：10127279
> 
> 赞同：-2
> 
> 时间：2012-04-12T15:56:24.930
> 
> 标签：c#, datetime

//错误字符串日期

```
string s = "2012-4-5-02";
DateTime dt;
if (DateTime.TryParse(s,out dt))
    MessageBox.Show(dt.ToString("yyyy-MM-dd"));
else
    MessageBox.Show("error date"); 
```

// output : 2012-04-05 // 为什么能输出好的日期格式？不是显示“错误日期”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T15:58:23.433

`TryParse`并且`Parse`相对宽松——比我个人喜欢的宽松。

如果您想要更严格的解析过程，请使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T15:58:20.797

如果您希望它无法将**明确**的日期格式传递给`TryParseExact`，否则`DateTime`将对您的日期可能意味着什么做出最好的猜测，然后将其吐出。

# java - 使 TestNG @Factory 测试用例按照提供的顺序运行

> ID：10127280
> 
> 赞同：3
> 
> 时间：2012-04-12T15:56:29.860
> 
> 标签：java, testng

我有一些继承的 TestNG 代码，使用 @Factory 创建测试用例。一切正常。然而，即使测试用例在从 @Factory 方法返回时肯定是按顺序排列的，它们也不会按该顺序执行。我想执行它们以便于调试（如果将测试放在一起比一些随机顺序对开发人员来说更容易）。

是否有捷径可寻？

我正在使用 TestNG 5.9，但如果需要可以升级。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:32:25.637

我目前正在尝试做同样的事情。我发现以下内容可能对您有所帮助：

[http://beust.com/weblog2/archives/000479.html](http://beust.com/weblog2/archives/000479.html)

[http://testng.org/doc/documentation-main.html#methodinterceptors](http://testng.org/doc/documentation-main.html#methodinterceptors)

如果我为我的问题找到某种解决方案，如果你愿意，我可以在这里添加一些代码。

**编辑**

我正在检查 2 种 TestClasses 应该按照 TestNG 执行的顺序 1 2 1 2 1 2 而不是 1 1 1 2 2 2

```
public class ExampleInterceptor implements IMethodInterceptor {

@Override
public List<IMethodInstance> intercept(List<IMethodInstance> paramList, ITestContext paramITestContext) {

     //You have to watch out to get the right test if you have other tests in oyur suite        
    if (!paramITestContext.getName().equals("UnwantedTest")) {
        for (IMethodInstance iMethodInstance : paramList) {
            Object[] obj = iMethodInstance.getInstances();
            if (obj[0] instanceof Class1) {
                //DO your stuff like putting it in a list/array
            } else {
                //DO your stuff like putting it in a list/array with the other Testclasses
            }
        }
    }
    List<IMethodInstance> result = new ArrayList<IMethodInstance>();

            //Put the results in the results

    }
    return result;
} 
```

}

希望有帮助。如果你有问题问。

# python - 在 matplotlib 中叠加 imshow 图

> ID：10127284
> 
> 赞同：27
> 
> 时间：2012-04-12T15:56:41.143
> 
> 标签：python, numpy, matplotlib

我想在同一个 imshow 图上比较两组不同的数据，以便轻松查看差异。我的第一直觉是让颜色图中的颜色透明（尤其是较低的值），但我无法让它工作：

```
from matplotlib.colors import colorConverter
import matplotlib.pyplot as plt
import numpy as np

# create dummy data
zvals =  np.random.rand(100,100)*10-5
zvals2 = np.random.rand(100,100)*10-5

# generate the transparent colors
color1 = colorConverter.to_rgba('white',alpha=0.0)
color2 = colorConverter.to_rgba('black',alpha=0.8)

# make the colormaps
cmap1 = mpl.colors.LinearSegmentedColormap.from_list('my_cmap',['green','blue'],256)
cmap2 = mpl.colors.LinearSegmentedColormap.from_list('my_cmap2',[color1,color2],256)

img2 = plt.imshow(zvals,interpolation='nearest',cmap=cmap1,origin='lower')
img3 = plt.imshow(zvals2,interpolation='nearest',cmap=cmap2,origin='lower')

plt.show() 
```

没有错误，但第二张图的白色和黑色不显示任何透明度。我还尝试了 colorConverter 方法在正常 plt.plot 情况下设置颜色，尽管显示了正确的颜色，但颜色也没有变得透明。

任何关于如何覆盖/比较 imshow 图的额外建议将不胜感激

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-12T16:23:50.260

您可以在命令中设置`alpha`参数。`imshow`

在你的例子中，`img3 = plt.imshow(zvals2, interpolation='nearest', cmap=cmap2, origin='lower', alpha=0.6)`

# 编辑：

感谢您的澄清。以下是您可以执行的操作的说明：

*   首先，选择一个[matplotlib 颜色图](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)对象（在您的情况下，对于白色和黑色，您可以采用“二进制”颜色图）。如果您想要的颜色图尚不存在，或者像您一样创建您自己的颜色图。
*   然后初始化这个颜色图对象：这将导致它在内部创建一个名为“_lut”的数组，其中包含 rgba 值。
*   然后，您可以根据要实现的目标填充 alpha 值（在您的示例中，创建一个从 0 到 0.8 的数组）
*   然后您可以使用此颜色图

以下是使用您的代码的示例：

```
from matplotlib.colors import colorConverter
import matplotlib.pyplot as plt
import numpy as np
import matplotlib as mpl

# create dummy data
zvals = np.ones((100,100))# np.random.rand(100,100)*10-5
zvals2 = np.random.rand(100,100)*10-5

# generate the colors for your colormap
color1 = colorConverter.to_rgba('white')
color2 = colorConverter.to_rgba('black')

# make the colormaps
cmap1 = mpl.colors.LinearSegmentedColormap.from_list('my_cmap',['green','blue'],256)
cmap2 = mpl.colors.LinearSegmentedColormap.from_list('my_cmap2',[color1,color2],256)

cmap2._init() # create the _lut array, with rgba values

# create your alpha array and fill the colormap with them.
# here it is progressive, but you can create whathever you want
alphas = np.linspace(0, 0.8, cmap2.N+3)
cmap2._lut[:,-1] = alphas

img2 = plt.imshow(zvals, interpolation='nearest', cmap=cmap1, origin='lower')
img3 = plt.imshow(zvals2, interpolation='nearest', cmap=cmap2, origin='lower')

plt.show() 
```

![图片](../Images/e7d478922abfe956e9e636071b82d81c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-23T03:42:06.033

如果定制cmap，可以轻松解决over-ray问题

```
cmap1 = matplotlib.colors.ListedColormap(['none', 'green'])
cmap2 = matplotlib.colors.ListedColormap(['none', 'red'])

img2 = plt.imshow(~~~ cmap=cmap1 ~~~)
img3 = plt.imshow(~~~ cmap=cmap2 ~~~) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-21T19:38:27.403

此处链接的答案涉及屏蔽您的输入数组，对我来说似乎效果更好： [根据 Matplotlib 中的像素值设置透明度](https://stackoverflow.com/questions/17170229/setting-transparency-based-on-pixel-values-in-matplotlib)

# firefox - 跟踪来自网络检查员的服务器推送消息

> ID：10127285
> 
> 赞同：0
> 
> 时间：2012-04-12T15:56:48.493
> 
> 标签：firefox, google-chrome, firebug, fiddler, web-inspector

这个疑问其实源于我对 websockets 的一个疑问…… [socket.io 和 websockets 的区别](https://stackoverflow.com/questions/10112178/differences-between-socket-io-and-websockets/10112562#10112562)

我在想为什么像 google Chrome's/firebug/fiddler 这样的网络检查员在使用 websockets/channel-api 等推送技术时无法跟踪消息，（或者有没有办法做到这一点？）这是因为我们正在从 http 升级我们的连接?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:09:42.767

WebSockets 没有使用 HTTP 请求。当您在 JS 中创建 WebSocket 时，浏览器会创建与服务器的 TCP Socket 连接，并且此连接被处理为基于流的（因为 TCP），当浏览器接收到足够的单个消息数据时，它会使用传递解帧数据的 onmessage 事件通知 WebSocket 对象。

从技术上讲，实现对所有传入消息的自己的跟踪并将它们放在控制台中应该不难。但请注意，大多数可能使用 WebSockets 的复杂实时应用程序都有太多数据，这会极大地降低 Inspector 的速度，有时会在一秒钟内发送数百条消息。

恕我直言，主流浏览器何时实现具有高级过滤功能的 WebSockets 日志系统，这将允许仅显示必要的消息，这只是时间问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T22:38:49.280

这篇文章的答案已经过时了。正如作者所说，这只是时间问题。Chrome 现在有相当好的 WebSocket 检查日志记录

[http://blog.kaazing.com/2012/05/09/inspecting-websocket-traffic-with-chrome-developer-tools/](http://blog.kaazing.com/2012/05/09/inspecting-websocket-traffic-with-chrome-developer-tools/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:37:32.847

Fiddler*确实*跟踪 WebSocket 消息，但由于它们不是 HTTP，它们不会直接呈现在 Session 列表中。请参阅[http://blogs.msdn.com/b/fiddler/archive/2011/11/22/fiddler-and-websockets.aspx](http://blogs.msdn.com/b/fiddler/archive/2011/11/22/fiddler-and-websockets.aspx)

# java - 逐点图像处理 - 直方图均衡（处理）

> ID：10127287
> 
> 赞同：2
> 
> 时间：2012-04-12T15:56:55.277
> 
> 标签：java, image-processing, processing

我真的对这种技术感到困惑。我知道直方图是每个值的频率（我正在处理灰度图像）并且我已经制作了一种方法来做到这一点：

```
int[] populateHist (PImage x)
{
  x.loadPixels();
  int[] out = new int[256];
  for (int i = 0; i < x.pixels.length; i++)
  {
     out[(int)red(x.pixels[i])]++;
  }
  return out;
} 
```

以及累积数组的扩展函数：

```
int[] spreadFunc (int[] a)
{
  int[] out = new int[256];
  for (int i = 0; i < a.length; i++)
  {
    if (i == 0)
    {
      out[i] = (a[i]);
    }
    else
    out[i] = (a[i]) + (a[i-1]);
  }
  return out;
} 
```

下一步是对这些值进行归一化，那么取最大值并将所有值除以相同的某个数字，这样最大值现在是 255 是否正确？

另外，我感到困惑的另一件事是，即使在对直方图进行归一化之后，我如何才能使用散布像素值重新创建图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:30:53.070

首先，您获得 CDF（累积分布函数）。这基本上是您的“扩展函数”，但您应该对其进行规范化，使其从 0 变为 1（除以像素数，使用双精度数）。

其次，您重新映射像素的值`y = cdf(x)*255`

或者只是`y = cdf(x)` 将最小值-最大值线性地重新映射到 0-255 范围，这基本上是一样的。

参见例如[http://en.wikipedia.org/wiki/Histogram_equalization#Implementation](http://en.wikipedia.org/wiki/Histogram_equalization#Implementation)

# soap - WSO2ESB - 向请求添加复杂的 SOAP 标头

> ID：10127288
> 
> 赞同：0
> 
> 时间：2012-04-12T15:57:00.820
> 
> 标签：soap, wso2, wso2esb

我想在 WSO2ESB 中添加复杂的 SOAP Header 来请求。使用 Header 调解器，只能添加简单的值标头。如何在 WSO2ESB 中添加复杂的 SOAP 标头来请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:07:22.887

WSO2 ESB，将支持从下一个主要版本添加复杂的 xml 标头。您可以使用丰富的调解器作为替代方案。

请参考示例 #15。
[http://wso2.org/project/esb/java/4.0.3/docs/samples/message_mediation_samples.html#Sample15](http://wso2.org/project/esb/java/4.0.3/docs/samples/message_mediation_samples.html#Sample15)

# import - PHPExcel 从 url 导入文件

> ID：10127289
> 
> 赞同：1
> 
> 时间：2012-04-12T15:57:02.863
> 
> 标签：import, phpexcel

我想从网站导入带有 phpexcel 的 .tsv 文件。使用语言环境文件正在工作，但如果我在“http://...”上更改文件位置，则无法正常工作。

```
$inputFileType = 'CSV';
$data = 'http://www.domain.com/file.tsv';
$objReader = PHPExcel_IOFactory::createReader($inputFileType);
$objReader->setDelimiter("\t");
$objPHPExcel = $objReader->load($data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:25:03.053

PHPExcel 使用 file_exists() 在打开文件之前对其进行测试。file_exists() 需要 stat() 支持，它可用于流包装器的有限子集，例如 file:// ftp:// 和 ssh2.sftp，但不适用于 http://

您需要先将文件拉取到服务器的本地文件系统。

# mysql - 如果表有索引，ormlite createTableIfNotExists 将失败

> ID：10127296
> 
> 赞同：1
> 
> 时间：2012-04-12T15:57:44.230
> 
> 标签：mysql, indexing, ormlite

我有一个像这样的简单课程：

```
@DatabaseTable(tableName = "VlpTag")
public class VlpTag implements Serializable {

    private static final long serialVersionUID = -4912974444196844860L;

    @DatabaseField(generatedId = true)
    private int id;

    @DatabaseField(foreign = true, columnName = "buid", canBeNull = false, foreignAutoCreate = true, foreignAutoRefresh = true)
    private VlpVirtualApp vApp;

    @DatabaseField
    private long lastUpdated;

    @DatabaseField(index=true)
    private String tagValue;

    @DatabaseField(dataType = DataType.ENUM_INTEGER)
    private TagType tagType;

    public static enum TagType {
        UUID, TAG
    };

    public VlpTag() {
        // needed by ormlite
    }
} 
```

然后，如果表不存在，我使用 TableUtils 创建表：

```
TableUtils.createTableIfNotExists(MySQLConnection.getInstance()
            .getConnection(), VlpTag.class); 
```

如果表不存在，则没有问题，虽然表存在，但 ORMLite 会引发异常说索引存在：

```
java.sql.SQLException: SQL statement failed: CREATE INDEX `VlpTag_tagValue_idx` ON `VlpTag` ( `tagValue` )
    at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
    at com.j256.ormlite.table.TableUtils.doStatements(TableUtils.java:464)
    at com.j256.ormlite.table.TableUtils.doCreateTable(TableUtils.java:440)
    at com.j256.ormlite.table.TableUtils.createTable(TableUtils.java:220)
    at com.j256.ormlite.table.TableUtils.createTableIfNotExists(TableUtils.java:61)
    at com.banctecmtl.ca.vlp.controller.listvmupdater.DatabaseUpdater.<init>(DatabaseUpdater.java:47)
    at com.banctecmtl.ca.vlp.controller.listvmupdater.ListVMUpdater.<init>(ListVMUpdater.java:42)
    at com.banctecmtl.ca.vlp.controller.VlpController.<init>(VlpController.java:75)
    at com.banctecmtl.ca.vlp.view.webview.server.VlpControllerServiceImpl.init(VlpControllerServiceImpl.java:32)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:433)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:616)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Duplicate key name 'VlpTag_tagValue_idx'
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
    at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:1362)
    at com.j256.ormlite.jdbc.JdbcCompiledStatement.runExecute(JdbcCompiledStatement.java:62)
    at com.j256.ormlite.table.TableUtils.doStatements(TableUtils.java:458)
    ... 29 more 
```

此错误已[在错误列表中报告](http://sourceforge.net/tracker/?func=detail&aid=3437795&group_id=297653&atid=1255989)，我想知道它是否已解决，因为我有同样的问题。我使用 MYSQL 和`ormlite-core-4.33.jar`.

我在这里做错了什么，还是有问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:30:55.783

我添加了针对此问题的修复程序。见[https://github.com/ethangui/ormlite-core-4.42-sources](https://github.com/ethangui/ormlite-core-4.42-sources)

构造 CREATE TABLE 语句时

原始解决方案：

添加 PRIMARY KEY 语句后：

`CREATE TABLE IF NOT EXIST table_name ...columns... PRIMARY KEY (id)`

它连接：

`,CREATE INDEX index_name ON column name;`

这基本上使它成为两个独立的 SQL 查询。首先它创建表，然后添加索引。它按预期工作 - 创建表并添加索引 - 除非表已经存在适当的。在这种情况下，第一条语句什么也不做，而第二条语句仍然试图创建一个索引，这随后会失败。

我的解决方案：我没有在 CREATE TABLE 之后添加另一个查询，而是将 ADD INDEX 移到了第一个语句中。所以，

`CREATE TABLE IF NOT EXIST table_name ...columns... PRIMARY KEY (id)`

然后

`,KEY index_name (column_name);`

因此，如果表存在，则将跳过整个语句，因此不会创建表或索引。

注意事项：

1.  当前实现仅检查 index=true 数据字段注释以添加索引。

2.  如果表预先存在而没有索引，则仍然会跳过整个语句，因此不会添加索引。

3.  只用 MySQL 测试过。

# multithreading - QRunnable - 如何使用它，示例

> ID：10127301
> 
> 赞同：6
> 
> 时间：2012-04-12T15:57:59.713
> 
> 标签：multithreading, qt, qtconcurrent

可以指出使用 QRunnable 作为 QtConcurrent 的替代方案的一些代码：我在 Qtdoc 中找不到任何 QRunnable 示例。

你有没有为同一个应用程序尝试过 QRunnable 和 QtConcurrent，你能评论一下比较的性能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T16:12:19.547

`QRunnable`是一个接口。因此，与其寻找“`QRunnable`示例”，不如寻找（例如）“`QThreadPool`示例”，例如：

[http://doc.qt.io/qt-4.8/thread-basics.html#example-1-using-the-thread-pool](http://doc.qt.io/qt-4.8/thread-basics.html#example-1-using-the-thread-pool)

如果您在该页面上进一步阅读，它会提到 Q​​tConcurrent 的真正价值在于您正在执行类似于将 STL 算法应用于 STL 容器的操作。当您只有一堆相当不相关的任务要执行时，使用带有 QRunnable 的线程池会更好。

QtConcurrent 建立在 QThreadPool 之上。它在符号上很方便，让您不必自己编写模式，但不会从本质上加快您编写代码的速度。但是...从 QtConcurrent 模式（例如 MapReduce）的角度思考可能会帮助您看到原本不会想到的并行性机会，并且编写更少的代码意味着更容易尝试替代方法并比较它们的性能。

# elmah - Elmah 错误过滤器

> ID：10127302
> 
> 赞同：3
> 
> 时间：2012-04-12T15:58:01.717
> 
> 标签：elmah

我在 web.config 中有一个 Elmah 过滤器设置来停止通知某些错误消息。但他们似乎仍然通过了。可能是什么原因？

```
 <httpModules>
  <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
  <add name="SecuritySwitch" type="SecuritySwitch.SecuritySwitchModule, SecuritySwitch" />
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
  <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
</httpModules>

<errorFilter>
  <test>
    <regex binding="Exception.Message" pattern="(?ix: \b This \b.+?\b is \b.+?\b an \b.+?\b invalid \b.+?\b webresource \b.+?\b request \b )" />
  </test>
  <test>
    <regex binding="Exception.Message" pattern="(?ix: \b Path \b.+?\b eurl.axd \b )" />
  </test>
  <test>
    <regex binding="Exception.Message" pattern="(?ix: \b potentially \b.+?\b dangerous \b.+?\b value \b.+?\b detected \b.+?\b client \b )" />
  </test>
</errorFilter> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T14:32:53.493

我相信你只能有一个测试元素。关键是从一个`<or></or>`元素开始并将过滤器嵌套在其中。这当然对我们有用。

```
<errorFilter>
    <test>
        <or>
            <!-- Don't email 404 errors -->
            <and>
                <equal binding="HttpStatusCode" value="404" type="Int32" />
                <regex binding="FilterSourceType.Name" pattern="mail" />
            </and>
            <!-- Don't log cancelled downloads -->
            <and>
                <equal binding="HttpStatusCode" value="500" type="Int32" />
                <equal binding="Context.Request.ServerVariables['URL']" value="/Download.aspx" type="String" />
                <or>
                    <regex binding="BaseException.Message" pattern="0x80070016" caseSensitive="false" />
                    <regex binding="BaseException.Message" pattern="0x800704CD" caseSensitive="false" />
                </or>
            </and>
            <!--Viewstate Corruption-->
            <or>
                <regex binding="Exception" type="System.Web.HttpException" pattern="System.FormatException: Invalid length for a Base-64 char array." caseSensitive="false" />
                <regex binding="Exception" type="System.Web.HttpException" pattern="System.FormatException: Invalid character in a Base-64 string." caseSensitive="false" />
            </or>
            <!-- IE8 Bug -->
            <and>
                <regex binding="Context.Request.ServerVariables['HTTP_USER_AGENT']" pattern="Trident\/4\.0" />
                <or>
                    <equal binding="Context.Request.ServerVariables['URL']" value="/ScriptResource.axd" type="String" />
                    <equal binding="Context.Request.ServerVariables['URL']" value="/WebResource.axd" type="String" />
                </or>
            </and>
        </or>
    </test>
</errorFilter> 
```

更多信息在这里：

[http://www.diaryofaninja.com/blog/2011/09/20/adding-filters-to-your-elmah-installation](http://www.diaryofaninja.com/blog/2011/09/20/adding-filters-to-your-elmah-installation)

# javascript - 查看元素时运行 jQuery 函数

> ID：10127303
> 
> 赞同：0
> 
> 时间：2012-04-12T15:58:05.030
> 
> 标签：javascript, jquery

目前，当单击一个元素时，我会运行一个加载更多按钮，如下所示：

```
<script type="text/javascript">
     $(document).on('click', '#loadmore', function() {

         etc....
     });
</script> 
```

但是当一个 div 进入浏览器的视图时，有没有办法让它运行？真的把它变成一个无限的负载？我一直在四处寻找，找不到任何解决方案，但这似乎是可能的。

那么用户将浏览页面，查看元素`<div id="#loadmore">`并且功能运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:00:09.967

你可以试试这个插件[jquery-appear](http://code.google.com/p/jquery-appear/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:28:55.657

您也可以使用以下方法，即使我建议使用 xdazz 建议的库版本

```
//returns the size of the whole html
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

//returns the size of the browser window
function viewport() {
    var e = window, a = 'inner';
    if ( !( 'innerWidth' in window ) ){
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
}

//register a scroll listener, that checks if you are at the end of the page
$(window).scroll(function(){
    if( $(window).scrollTop()+viewport()["height"] >= getDocHeight() ){
         //your method here
         loadMore();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:45:24.290

```
if(window.addEventListener)
{
window.addEventListener("scroll", function() {
          var div = document.getElementById("myDiv");
          if(div.offsetTop <= window.innerHeight)
          {
               clearInterval(timer);
               // call your functions here
          });
}
else if(window.attachEvent)
{
     window.attachEvent("onscroll", function() {
          var div = document.getElementById("myDiv");
          if(div.offsetTop <= window.innerHeight)
          {
               clearInterval(timer);
               // call your functions here
          })
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-12T16:02:29.547

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

jquery可见选择器将起作用

# php - 如何在函数（）中使用来自其他 php 脚本的 php 变量

> ID：10127305
> 
> 赞同：0
> 
> 时间：2012-04-12T15:58:13.753
> 
> 标签：php, variables, joomla, include, scope

我已经搜索了 stackoverflow 和其他一些网站，并尝试了几个小时的新代码组合，但我放弃了.. 我有 2 个 php 文件，一个名为 getimages.php，另一个名为 mod_slidepluslight.php 我正在使用 Joomla作为 CMS 并使用灯箱制作了幻灯片模块，现在我想通过 .xml 文件中设置的模块参数从 Joomla 内的文件夹中检索图像。我通过使用以下代码做到了这一点：

```
$imagePath = $params->get('imagePath', 'banners'); 
```

现在，当我尝试声明这个变量并在我的代码中使用它时，它什么也没做。

```
function returnimages($relPath = "/KVD/images/") { 
$dirname = $_SERVER['DOCUMENT_ROOT'] . $relPath . $imagePath; 
```

$imagePath 应该添加在 /KVD/images/......./ 之后或现在的位置。getimages.php 的整个代码如下所示：

```
Header("content-type: application/x-javascript");

$imagePath = $params->get('imagePath', 'banners/');

function returnimages($relPath = "/KVD/images/") { 
$dirname = $_SERVER['DOCUMENT_ROOT'] . $relPath . $imagePath; 
$files = array(); 
$curimage = 0; 
if($handle = opendir($dirname)) { 
while(false !== ($file = readdir($handle))){ 
if (preg_match('/\.(jpg|jpeg|gif|png)$/', $file)){ 
print_r ('galleryarray['.$curimage.']="'. $relPath . $file .'";'); 
$curimage++; 
} 
} 

closedir($handle); 
} 
return($files); 
} 

print 'var galleryarray=new Array();'; //Define array in JavaScript 
returnimages() //Output the array elements containing the image file names 
```

谢谢，科恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:02:37.437

yoo 在函数内调用 $imagePath 但 $imagePath 超出函数范围！您可以将 $imagePath 作为参数发送给函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:04:42.160

请记住变量的范围：您的`returnimages()`函数将无法访问 $imagePath 变量，直到您将其全球化或将其传递给函数。

只需在功能代码顶部添加：

```
global $imagePath; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:16:19.177

您需要考虑不同的方法。当创建一个将使用另一个脚本的模块时，这个另一个脚本应该是一个助手。

看一下：

[http://docs.joomla.org/Creating_a_Hello_World_Module_for_Joomla_1.5](http://docs.joomla.org/Creating_a_Hello_World_Module_for_Joomla_1.5)

如果您将 getimages.php 的内容作为帮助程序提供，如上面链接中所述，您将能够在该脚本中使用您的参数。

# asp.net - SqlMembershipProvider 在哪里存储访问角色？

> ID：10127307
> 
> 赞同：0
> 
> 时间：2012-04-12T15:58:15.913
> 
> 标签：asp.net, web-config, asp.net-membership, membership-provider

我的会员提供者数据库包括一组`aspnet_Membership`表。

我正在尝试向应用程序添加一些访问规则。

(1) 在`web.config`例如

```
<location path='..'>...<allow roles='admin'>..</location> 
```

(2) 或通过`Web Site Administration Tool >> Manage Access rules`?

他们两个都可以工作。

(2) 中创建的规则存储在哪里？我在数据库中找不到它们。

我想（1）和（2）是在不同级别设置规则。

关于安全性和功能，我应该使用哪种方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:08:14.340

1 和 2 方法都存储在同一个 Web.config 中。您需要单击***Show All Files***。

![在此处输入图像描述](../Images/1399236d636834fbf857913cd7d146d5.png)

# c++ - 数组和指针

> ID：10127309
> 
> 赞同：0
> 
> 时间：2012-04-12T15:58:22.100
> 
> 标签：c++, arrays, pointers

作为 C++ 的初学者，我正在努力理解指针和数组。我写了以下程序：

```
int main (void){
int p[3]={0};
int * iptr = new int [4];

iptr++;
*iptr=2;
iptr++;
*iptr=3;

for (int i=0;i<4;i++){
    cout << "iptr: " << *iptr << endl;
    iptr++;
}

return 0;
} 
```

但是我没有得到预期的结果。我本来希望元素 [1] 和 [2] 分别具有值 2 和 3。但是我得到的结果如下：

```
iptr: 3
iptr: -842150451
iptr: -33686019
iptr: 0 
```

有人可以告诉我我的理解哪里出错了吗？

谢谢丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T16:03:43.453

> 作为 C++ 的初学者，我正在努力理解指针和数组

任何人都可以给你的最好建议：不要。指针和数组不值得努力。使用像`std::vector`or这样的 C++ 工具`std::array`，您的生活将变得无比轻松。如果你需要的话，在掌握了其余的语言之后再回来学习它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T15:59:57.070

问题在这里：

```
int * iptr = new int [4];

iptr++;
*iptr=2;
iptr++;
*iptr=3; 
```

调用后`iptr++`，`iptr`将不再指向数组的开头。设置值后，应重置`iptr`为原始位置 ( `iptr -= 2`) 或使用辅助指针。

所以2个可能的解决方案：

```
iptr++;
*iptr=2;
iptr++;
*iptr=3;

iptr -= 2;

for (int i=0;i<4;i++){
    cout << "iptr: " << *iptr << endl;
    iptr++;
} 
```

或（清洁工）：

```
int* aux = iptr;
aux++;
*aux=2;
aux++;
*aux=3;

for (int i=0;i<4;i++){
    cout << "iptr: " << *iptr << endl;
    iptr++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T15:59:37.227

你已经跑过了数组的末尾。您正在打印的内容可能恰好在内存中，但从技术上讲，这是未定义的行为。

`iptr`是指向 4 个元素的数组的第一个元素的指针：

```
int * iptr = new int [4]; 
```

`iptr`指向此之后的第二个元素：

```
iptr++;
*iptr=2; // set second element to 2 
```

`iptr`指向之后的第三个元素：

```
iptr++;
*iptr=3; // set third element to 3 
```

这里什么都没有 reset `iptr`，所以它仍然指向第三个元素。

```
for (int i=0;i<4;i++){
    cout << "iptr: " << *iptr << endl;
    iptr++;
} 
```

所以你打印：

第三个元素，设置为三个：

```
iptr: 3

```

第四个元素，未由您的程序设置为任何特定值

```
iptr：-842150451

```

在这里结束，未定义的行为，但可能您的实现只是打印附近的内存。

```
iptr：-33686019
iptr: 0

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T16:02:09.637

指针不会自动返回到您最初设置它们的位置。使用后

```
iptr++; 
```

它现在指向新地址，即元素[2]

对于循环，使用另一个临时指针。不要增加原来的。看这个：

```
int arr[4];

int* iptr = arr;

iptr++; 
iptr = 2;
iptr++; 
iptr = 3;

for (int i=0;i<4;i++){
    cout << "arr: " << arr[i] << endl;        
} 
```

# c# - linq 查询语法，如何生成两个列表的组合

> ID：10127310
> 
> 赞同：1
> 
> 时间：2012-04-12T15:58:22.333
> 
> 标签：c#, linq

我有树对象。

一个对象`EFacebook`，非常简单，带有一个名为 的属性`id`。

```
class EFacebook
{
   public string id { get; set; }
} 
```

A `EUser`，更复杂。`EUser`得到一个内部列表，`EProvider`每个`EProvider`都有一个类型。像：

```
class EUser
{
    public string name { get; set; }
    public List<EProvider> EProviders { get; set; }
}

class EProvider
{
   public enum EnumType
   {
      facebook = 1,
      twitter = 2
   }
   public string id { get; set; }
   public EnumType type { get; set; }
} 
```

还有两个列表：（提供者列表，内部用户，是可选的，可为空的）：

```
// list of facebooks
List<EFacebook> facebooks = new List<EFacebook>();

facebooks.Add(new EFacebook { id = "1" });
facebooks.Add(new EFacebook { id = "2" });
facebooks.Add(new EFacebook { id = "3" });

// list of users
List<EUser> users = new List<EUser>();
List<EProvider> ps1 = new List<EProvider>();

ps1.Add(new EProvider { id = "1", type = EProvider.EnumType.facebook });
ps1.Add(new EProvider { id = "2", type = EProvider.EnumType.twitter });

List<EProvider> ps2 = new List<EProvider>();
ps2.Add(new EProvider { id = "3", type = EProvider.EnumType.facebook });
ps2.Add(new EProvider { id = "4", type = EProvider.EnumType.twitter });

EUser u1 = new EUser { name = "somea", EProviders = ps1 };
EUser u2 = new EUser { name = "someb", EProviders = ps2 };
EUser u3 = new EUser { name = "somec" };

users.Add(u1);
users.Add(u2);
users.Add(u3); 
```

现在，我需要根据和`facebooks`之间的关系获取两个子列表。这意味着，一个只包含 2 的对象的列表，因为我没有一个类型为 2 的提供者的用户，以及一个包含 1 和 3 的对象的列表，因为我确实有一个类型为 a 的用户和1 和3。`facebook.id``user.eprovider(of enum facebook).id``EFacebook``facebook``id``facebook``id``EFacebook``facebook``id``provider``facebook``id``id`

我尝试了很多，但它不起作用：

```
/*var xaa = users.Select(z => z.EProviders.Where(x => x.ProviderType == 
    EProvider.EnumProviderType.Facebook).Select(x => x.Ip).Zip(z);*/

/*var a = users.Select(x => x.EProviders.Where(y => y.ProviderType == 
    EProvider.EnumProviderType.Facebook));*/

/*
var outra = facebooks.Where(x=>                 
var a = from i in users
    where i.EProviders != null && i.EProviders.Any(j => j.ProviderType == 
    EProvider.EnumProviderType.Facebook)
from j in i.EProviders
join k in facebooks on j.Ip equals k.id
select k;

var b = facebooks.Except(a);
*/ 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:18:17.720

怎么样：

```
// Create an enumerable of all IDs of Facebook providers from the users list
var facebookIds = users
    // Exclude all users with a null EProviders list
    .Where(u => u.EProviders != null)
    // For each user, select all EProviders with type == facebook
    // and use SelectMany to flatten them into a single enumerable
    .SelectMany(u => u.EProviders.Where(p => p.type == EProvider.EnumType.facebook));

// Use Join to find all facebooks whose IDs also exist in the facebookIds set constructed above
var facebooksWithUsers = facebooks.Join(facebookIds, f => f.id, p => p.id, (f, p) => f);

// Use Except to find the opposite subset
var facebooksWithoutUsers = facebooks.Except(facebooksWithUsers);

// Write the contents of the two sets to the console
Console.WriteLine("facebooksWithUsers:");
foreach (var fb in facebooksWithUsers)
{
    Console.WriteLine(fb.id);
}

Console.WriteLine();
Console.WriteLine("facebooksWithoutUsers:");
foreach (var fb in facebooksWithoutUsers)
{
    Console.WriteLine(fb.id);
} 
```

这输出：

```
facebooksWithUsers：
1
3

facebooksWithoutUsers：
2

```

# jpa - 指标字段值缺少类 - EclipseLink 异常

> ID：10127312
> 
> 赞同：1
> 
> 时间：2012-04-12T15:58:24.763
> 
> 标签：jpa, jaxb, eclipselink, unmarshalling

我收到以下错误：

```
Exception [EclipseLink-43] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Missing class for indicator field value [Component_Price_List] of type [class java.lang.String].
Descriptor: XMLDescriptor(com.celfocus.ufe.data.domains.productCatalog.PriceListItem --> []) 
```

这是我的 ComponentPriceList.class

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Component_Price_List")
@Entity
@Table(name="PC_COMPONENT_PRICE_LIST")
public class ComponentPriceList
    extends PriceListItem
{
private static final long serialVersionUID = 1L;
} 
```

我的 PriceListItem.class 是：

```
@Entity
@DiscriminatorColumn(name="PRICE_LIST_ITEM")
@Inheritance(strategy = InheritanceType.JOINED)
@Table(name="PC_PRICE_LIST_ITEM")
public abstract class PriceListItem
    extends LaunchEntity
{

private static final long serialVersionUID = 1L;

      ......
 } 
```

我不明白这是怎么发生的。我能做些什么来解决这个问题？谢谢

# c# - 使用 LINQ 从二维数组中进行选择和排序

> ID：10127313
> 
> 赞同：0
> 
> 时间：2012-04-12T15:58:27.060
> 
> 标签：c#, linq

如果我有这样的二维字符串数组；

```
{
    {"12", "Animal", "Cat"}
    {"20", "Animal", "Dog"}
    {"6", "Vegetable", "Carrot"}
    {"5", "Mineral", "Iron"}
} 
```

如何使用 LINQ 来选择数据和排序，比如第二个“列”？（最好是 C# linq）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T16:01:04.083

就像是：

```
var sorted = array.OrderBy(x => x[1])
                  .ToArray(); // Or ToList, or nothing... 
```

目前尚不清楚“选择数据”是什么意思。就个人而言，我会尝试创建一个更强类型的数据模型，而不仅仅是为每一行设置一个字符串数组。当然，您也可以使用 LINQ 轻松做到这一点：

```
var sorted = array.Select(row => new Item {
                             Id = int.Parse(row[0]),
                             Category = row[1],
                             Name = row[2]
                          });
                  .OrderBy(x => x.Category)
                  .ToArray(); 
```

编辑：对于第一个查询表达式版本：

```
var sorted = (from x in array
              orderby x[1]
              select x).ToArray(); 
```

如您所见，它比直接使用扩展方法更混乱。两种形式都值得适应，因此您可以在任何给定情况下选择最简单的一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:27:13.813

即使它只是数据的临时存储，我也会使用匿名类型来使代码更清晰，除非所需的最终结果是排序的字符串数据（即，如果您的任务是对文本文件进行排序）。

假设您有 a`string[][]`而不是`string[,]`，我会这样做：

```
var query = from row in array
            let record = new { ID = int.Parse(row[0]), Category = row[1], Name = row[2] }
            orderby record.Category
            select record;

var sortedData = query.ToArray(); 
```

扩展方法语法：

```
var sortedData = array
    .Select(row => new { ID = int.Parse(row[0]), Category = row[1], Name = row[2] })
    .OrderBy(record => record.Category)
    .ToArray(); 
```

# css - 无论 div 是否展开，都在垂直中间制作图标

> ID：10127315
> 
> 赞同：0
> 
> 时间：2012-04-12T15:58:30.943
> 
> 标签：css

我希望警告图标始终显示在垂直中间。就我而言，错误消息的数量将被更改。

以下是我的代码，还附上了输出截图。![在此处输入图像描述](../Images/935705aa95065ed2d784c4aaffde9815.png)

谁能帮我？非常感谢！

```
<style type="text/css">
    #errorMessage{
        padding:5px;

    }

    #icon, #message{
        float:left;
        padding: 5px;
        border:#666 1px solid;
    }

</style>

<div id="errorMessage">
   <div id="icon">

        <img src="images/Warning.png" alt="success" width="28px" />

    </div>
    <div id="message">
        <p>Message1 Message1 Message1 Message1 Message1</p>
        <p>Message2 Message2 Message2 Message2 Message2</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:11:43.937

就我个人而言，我会做一些不同的事情。我会让图标成为整个 div 的背景图像，添加一点填充，然后像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/XvAnU/)**一样垂直居中。由于背景 CSS 位置为 50%，因此无论容器变得多高，图像都将始终位于中间。

HTML：

```
<div id="errorMessage">
    <div id="message">
        <p>Message1 Message1 Message1 Message1 Message1</p>
        <p>Message2 Message2 Message2 Message2 Message2</p>
        <p>Message1 Message1 Message1 Message1 Message1</p>
        <p>Message2 Message2 Message2 Message2 Message2</p>        
    </div>
</div> 
```

CSS：

```
#errorMessage{
    padding:5px 5px 5px 40px;
    overflow:auto;
    background: url(http://cdn1.iconfinder.com/data/icons/oxygen/32x32/actions/list-remove.png) no-repeat 0% 50%;
}

#message{
    float:left;
    padding: 5px;
    border:#666 1px solid;
} 
```

# php - PHP 处理大文件上传的理想 Web 服务器？

> ID：10127319
> 
> 赞同：2
> 
> 时间：2012-04-12T15:58:41.677
> 
> 标签：php, apache, http, upload, nginx

我正在技术上指定一个文件上传 API，该 API 将处理大量大 (250MB+) 文件。

我想尽可能避免的是网络服务器在文件上传期间占用了整个内存负载，我知道在某种程度上是可以避免的。

此外，我不能使用 Flash 或 Silverlight 来拆分文件，这可能会显着减少内存使用量。

我了解 PHP 在很大程度上依赖于其主机 Web 服务器软件的上传性能。考虑到这一点，Apache 是最适合这项工作的，还是我应该考虑使用 nginx 或其他？

如果 PHP 本身是最大的瓶颈，那么是否值得考虑某种混合解决方案？如果是这样，它会是什么语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:18:53.540

尽管 Daniel Ribeiro 说了什么，我还是建议您让这些上传远离 Apache。您需要一个基于事件的服务器（Apache 的实现很好，但恕我直言，不如 nginx / lighttpd 好）。问题只是间接地出现在内存上——它与客户端数量和带宽有关。拆分文件并没有真正的帮助。

OTOH，没有什么可以阻止您使用 nginx 来处理上传和 apache 来为网站的其余部分提供服务。

您将从调整 TCP/IP 堆栈以处理 LFN（大拥塞窗口、tcp 窗口缩放）中获得很多好处。

> 我了解 PHP 在很大程度上依赖于其主机 Web 服务器软件的上传性能

上传的性能与 PHP 无关，除非您尝试使用原始套接字/Web 套接字和后端的 PHP 实现上传。实际上，从 nginx 调用（分叉）PHP 解释器来处理文件是有意义的——因为这*仅在文件上传时启动*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:01:28.667

您可以同时使用 Apache 和 Nginx，这**真是**太棒了！

两者之间的一些比较是：

*   Apache 是一个基于进程的服务器；nginx，一个基于事件的服务器。
*   Nginx 和 Lighttpd 可能是最著名的两个异步服务器；
*   Apache 无疑是最著名的基于进程的服务器。

[更多信息在这里](http://www.wikivs.com/wiki/Apache_vs_nginx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T16:03:41.510

我会考虑将[nginx](http://nginx.org/)与[文件上传](http://www.grid.net.ru/nginx/upload.en.html)模块一起使用，因为您可以避免通过 PHP 传递上传。

# jquery-ui - 嵌套手风琴 - 单击子项时如何保持父项打开

> ID：10127331
> 
> 赞同：0
> 
> 时间：2012-04-12T15:59:33.573
> 
> 标签：jquery-ui, knockout.js, jquery-ui-accordion

我们正在尝试使用嵌套手风琴构建一个数据驱动的列表。在我们的第一个原型中，它运行良好，但我们对实现进行了硬编码，并且有明显不同的手风琴。

现在，当我们开始动态加载时，看起来结构就在那里，但我们不再有不同的手风琴，所以它们不会独立运行。有什么我们可以添加到自定义绑定中来使其工作的东西吗？或者我们可以设置一些其他属性来保持子手风琴分开。

这个例子只嵌套了 2 层，但我们最终需要支持 4 层。

这是当前的原型：http: [//jsfiddle.net/blunde/agjFn/](http://jsfiddle.net/blunde/agjFn/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:02:26.787

这是一个 JSFiddle，我相信它可以解决您遇到的问题。

[http://jsfiddle.net/JasonMore/gbhfT/6/](http://jsfiddle.net/JasonMore/gbhfT/6/)

看法

```
<div data-bind="foreach: items, accordion: {}">
    <h3>
        <a href="#" data-bind="text: id"></a>
    </h3>
    <div>    
        <span data-bind="text: name"></span>
        <div data-bind="foreach: items, accordion: {}">
            <h3>
                <a href="#" data-bind="text: id"></a>
            </h3>
            <div data-bind="text: name">
            </div> 
        </div>
        <button data-bind="click: add">Add Sub Item</button>
    </div> 
</div>
<button data-bind="click: add">Add Item</button>
<hr/> 
```

Javascript

```
ko.bindingHandlers.accordion = {
    init: function(element, valueAccessor) {
        var options = valueAccessor() || {};
        setTimeout(function() {
            $(element).accordion(options);
        }, 0);

        //handle disposal (if KO removes by the template binding)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            $(element).accordion("destroy");
        });
    },
    update: function(element, valueAccessor) {
        var options = valueAccessor() || {};
        $(element).accordion("destroy").accordion(options);
    }
}

function Item(id, name, subItems) {
    var self = this;

    //properties
    this.id = ko.observable(id);
    this.name = ko.observable(name);
    this.items = ko.observableArray(subItems);

    //actions
    this.add = function() {
        self.items.push(new Item(4, "bar"));
    };
}

var viewModel = {
    items: ko.observableArray([
        new Item(1, "one", 
            [
             new Item(11, "one-one"), 
             new Item(12, "one-two")
            ]),
        new Item(2, "two", []), 
        new Item(3, "three", []) 
    ]),

    add: function() {
        viewModel.items.push(new Item(4, "foo"));
    }
};

ko.applyBindings(viewModel);​ 
```

​</p>

通过将 foreach 更改为模板，您应该能够使这项工作深入 n 级。 [http://knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

我希望这有帮助！

杰森

# f# - 将有区别的联合与记录类型相结合

> ID：10127337
> 
> 赞同：7
> 
> 时间：2012-04-12T15:59:51.093
> 
> 标签：f#

我试图了解受歧视的工会和记录类型；特别是如何组合它们以获得最大的可读性。这是一个例子 - 假设一个运动队可以有积分（联赛积分和净胜球），或者它可以被停赛，在这种情况下它没有积分或净胜球。以下是我试图表达的方式：

```
type Points = { LeaguePoints : int; GoalDifference : int }

type TeamState = 
    | CurrentPoints of Points
    | Suspended

type Team = { Name : string; State : TeamState }

let points = { LeaguePoints = 20; GoalDifference = 3 }

let portsmouth = { Name = "Portsmouth"; State = points } 
```

问题出现在最后一行的末尾，我说“State = points”。我得到“表达式应该有 TeamState 类型，但这里有 Points 类型”。我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T16:12:55.447

要为 pad 的答案添加一些细节，您的初始版本不起作用的原因是分配给的`State`值的类型应该是 type 的可区分联合值`TeamState`。在你的表达中：

```
let portsmouth = { Name = "Portsmouth"; State = points } 
```

...的类型`points`是`Points`。在 pad 发布的版本中，表达式`CurrentPoints points`使用构造函数`TeamState`来创建一个可区分的联合值，表示`CurrentPoints`. union 为您提供的另一个选项是`Suspended`，可以这样使用：

```
let portsmouth = { Name = "Portsmouth"; State = CurrentPoints points }
let portsmouth = { Name = "Portsmouth"; State = Suspended } 
```

如果你没有使用构造函数的名称，那么你将如何构造一个暂停的团队是不清楚的！

最后，您还可以将所有内容都写在一行上，但这不那么可读：

```
let portsmouth = 
  { Name = "Portsmouth"
    State = CurrentPoints { LeaguePoints = 20; GoalDifference = 3 } } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T16:02:31.020

```
let portsmouth = { Name = "Portsmouth"; State = CurrentPoints points } 
```

# android - 在android中创建的文件的奇怪名称

> ID：10127339
> 
> 赞同：1
> 
> 时间：2012-04-12T15:59:58.663
> 
> 标签：android, eclipse

我正在使用以下代码

```
 Integer val = myReceipt.receiptId ;
                    String fileName = "image" + "_" + title.getText().toString()+"_" + val.toString(); 
                    photo = this.createTemporaryFile(fileName, ".jpg");
                    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
                    uriOfPhoto = Uri.fromFile(photo);
                    startActivityForResult(intent, RESULT_CAMERA_SELECT);
                  }
                }

            private File createTemporaryFile(String part, String ext) throws Exception
            {
                File tempDir = new File (Environment.getExternalStorageDirectory() + "/Catch All Keeper/Receipts");
                if(!tempDir.exists())
                {
                    tempDir.mkdir();
                }
                tempDir.canWrite();
                return File.createTempFile(part, ext, tempDir);
            }
        }); 
```

现在，它应该给文件命名，`image_title_val`但它给出了一个奇怪的名字`image_title_(some random numbers).jpg`

谁能告诉这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:02:40.937

您正在使用 File.createTempFile 获取唯一名称。该函数分配您看到的随机数。参数部分传入的fileName字符串作为前缀生成临时文件名。

# python - nginx 烧瓶 gunicorn python .... 从哪里开始？

> ID：10127342
> 
> 赞同：0
> 
> 时间：2012-04-12T16:00:02.937
> 
> 标签：python, linux

我是一个重度 Windows 用户（一直在 Windows 环境中编程和管理服务器），开始学习 unix，并想了解事情在 linux 上是如何工作的（使用 debian）。我开始了解操作系统级别的工作原理，但是在使用 python 在这个新环境中开发应用程序时，我有点不知所措。有烧瓶、芹菜、柴油、gunicorn、nginx、django 和更多其他包和/或框架。

有谁知道理解所有这些组件的好方法？也许是一本好书或网络链接？我的目标是了解并知道在开发过程中何时使用某些包和/或框架。

提前感谢您提供的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:08:31.620

您提到了许多相关（和可互换）的技术。

例如 Django 和 Flask 是*web 框架*。Nginx 是 Apache 中的*Web 服务器*。gunicorn 是一个*符合 WSGI 的 HTTP 服务器*，可用于将Django（Web 框架）*粘合*到 Nginx（Web 服务器）。基本上：

```
Web Framework <-> Glue <-> Web Server 
```

例子：

```
Django <-> fcgi <-> Apache
Flask <-> uWSGI <-> Nginx 
```

最好的开始方法是使用流行的（高度支持和有据可查的）解决方案来实现上述目标。为此，我建议[部署 Django](https://docs.djangoproject.com/en/dev/howto/deployment/)（个人偏好）。这样做应该让您了解构建块是如何相互连接的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:48:11.077

首先使用[flask](http://flask.pocoo.org/)开发一个基本的hello_world web 应用程序（主页上有一个用7 行代码实现的），然后搞砸它。在需要部署生产应用程序之前，甚至不必担心了解 gunicorn、nginx 或 celery。一旦你这样做了，阅读他们的文档并在谷歌上搜索那些写过他们设置和维护这些工具的经验的人的博客文章，一切都会逐渐开始变得有意义。此外，当您决定部署您的应用程序时，例如使用 webfaction 或其他托管公司，请注意他们会提供各种支持文档，甚至可能会为您处理 nginx 和服务器配置的其他方面。所以换句话说，不要想太多——只要潜入！

# ruby-on-rails - 如何存储 heroku 配置变量以供工头使用？

> ID：10127353
> 
> 赞同：0
> 
> 时间：2012-04-12T16:00:34.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, foreman

我部署在 heroku 上并使用工头来管理我们不同的服务器。

我有各种各样的环境变量在 Heroko 上用于 S3 配置参数之类的东西。

如何配置它们？我已经使用 heroku 的`heroku config:set`命令手动设置了它们，但工头也支持使用`.env`文件。但是如果我使用 `.env` 文件，我应该签入吗？如果没有，我如何在heroku上维护它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:05:32.673

我建议将您的 .env 文件添加到您的 .gitignore 中，这样它就不会提交给 git。也许可以在那里留下一个示例，以便其他开发人员知道他们在提取新代码时需要设置什么。

您可以`heroku config`像已经完成的那样通过命令来管理它们，或者编写一个脚本来迭代您的 .env 文件并将它们设置在您的 heroku 应用程序上——当然前提是它们适用于正确的环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:45:38.317

Heroku CLI还有一个[Heroku Config 插件](https://github.com/ddollar/heroku-config)，它为您提供了一种推/拉 Heroku 环境以在本地使用的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T11:57:05.293

另一个不错的选择：
Kenneth Reitz 为此目的创建了一个名为[autoenv](https://github.com/kennethreitz/autoenv)的工具，并且他编写了这[本食谱](https://github.com/kennethreitz/autoenv/wiki/Cookbook)。

# objective-c - UIAlertViews：他们住在哪里？

> ID：10127354
> 
> 赞同：0
> 
> 时间：2012-04-12T16:00:36.997
> 
> 标签：objective-c, xcode, cocoa-touch, uialertview

当我的应用程序需要显示带有进度指示器或活动指示器的警报视图时，我的应用程序有很多页面和很多次。我可以在我的 rootviewcontroller 中将它们声明为类属性，然后在其他地方显示/隐藏它们，或者这是一种不好的做法。我有由代表处理的 URL 请求（增加进度条）。我担心将它作为 rvc 的属性会使其有点脆弱。但与此同时，我不想制作 10 亿次警报视图，因为这也可能会变得混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:10:59.687

您当然可以在 AppDelegate 之类的地方使用单个 UIAlertView，但这违背了 MVC 的目的。更好的方法是让每个视图控制器管理自己的警报视图。

话虽如此，如果您只需要一个活动指示器/进度视图来向用户显示您正在做一些工作，那么弹出警报视图并不是真正必要的。总的来说，警报视图对用户体验来说是突兀的，并且实际上应该只用于*提醒*用户正在发生的事情，即出现问题并立即要求他们注意。对于纯粹的进度/加载，将指示器添加为主视图的子视图就足够了，并且可以平滑整体用户体验。

# html - CSS/HTML - 居中绝对定位图像

> ID：10127355
> 
> 赞同：0
> 
> 时间：2012-04-12T16:00:40.967
> 
> 标签：html, css, center, css-position

我在这方面已经有一段时间了，似乎无法掌握它。我想知道如何使我的“.logo”类居中？

```
#wrap {
    width: 960px;
    height: auto;
    min-height: 700px;
    margin: 0 auto;
}

.logo {
    background: url(../images/logo.png);
    width: 269px;
    height: 126px;
    z-index: 1000;
    position: absolute;
}        

<div id="wrap">
    <div class="logo"></div>
    <div id="nav"></div>
</div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:49:30.597

由于您有一个固定宽度的容器来保存绝对元素，因此您实际上需要做的就是添加：

```
left: 50%;
margin-left: -134px; 
```

到.logo，你很好。margin-left 应该是绝对元素宽度的 1/2。假设您只选择水平中心。垂直与顶部/边距顶部类似，但这需要固定高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:09:42.387

只需添加背景位置：中心中心；并更好地定义背景：

```
background-image: url() 
background-repeat: no-repeat; 
background-position: center center; // you can have top bottom left right as well 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:27:02.917

使用边距：0 自动；

通过将其左右边距宽度设置为“自动”，此徽标水平居中。这是使用 CSS 实现水平居中的首选方式

示例 CSS

```
 .logo{
                background: url(../images/logo.png);
                width: 269px;
                height: 126px;
                z-index: 1000;
                margin:0px auto; //or margin:0 auto;
                 } 

                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:06:51.700

我将创建一个`div`与`right`和`left`属性相同的对象，将我的对象放在 div 中，然后将子对象的`margin-right`和属性设置为或将属性设置为。这应该使大多数对象居中。`margin-left``auto``text-align``center`

顺便说一句，小心绝对定位。它会变得丑陋。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T16:17:00.703

有一些解决方案。一个关于绝对的词，它是“婊子”。

[http://jsfiddle.net/UY2FC/4/](http://jsfiddle.net/UY2FC/4/)

[http://jsfiddle.net/UY2FC/3/](http://jsfiddle.net/UY2FC/3/)

[http://jsfiddle.net/UY2FC/1/](http://jsfiddle.net/UY2FC/1/)

每个人都做同样的工作，但有细微的差别。

不过，z-index 是怎么回事？你在掩饰什么吗？

# c++ - c ++：查找以system（）启动的进程的pid

> ID：10127359
> 
> 赞同：1
> 
> 时间：2012-04-12T16:01:02.640
> 
> 标签：c++, system, fork

当使用 fork() 创建子进程时，我们会得到子进程的 pid，如[这里](https://stackoverflow.com/q/8397816/984260)和许多其他地方所示。

有没有办法可以对 system() 函数做同样的事情？我在看这个的原因是，fork 似乎减慢了我的程序（fork 可能有 15-20 秒的开销），可能是由于它的开销，我想试试 system() 函数是否可以避免这种情况。

感谢帮助。

# sql - 如何使用 ST_DWithin 找到近点？

> ID：10127364
> 
> 赞同：4
> 
> 时间：2012-04-12T16:01:16.770
> 
> 标签：sql, gis, postgis

这是我第一次创建 GIS 查询。在我的数据库的一个表中，有一列带有点类型。每条记录是一台 ATM 机。我想编写一个查询来获取我所在位置附近 1 公里范围内的 ATM 机。如何在 SQL 查询中使用 ST_DWithin 来查找记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:44:02.900

```
SELECT *
  FROM atm_finder
  WHERE ST_Distance(ST_Transform(ST_GeomFromText('POINT([Lon] [Lat])',4326),26986),ST_Transform(location,26986)) <= 1000 
```

其中 [Lon] & [Lat] - 点的 GPS 坐标。但就您第一次使用 POINT 类型而言：

```
SELECT AddGeometryColumn('atm_finder', 'location', 4326, 'POINT', 2); 
```

当然，在此之前，您应该重命名字段“位置”（为了不丢失数据）并用这些数据填充新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:58:24.077

我不太清楚 ST_DWithin 如何与两点一起使用......

类似的东西。

```
select atm.id
from atm_finder atm
where ST_Distance(<your location>, atm.location) <= 1000 

//1000 = meters, works fine with geography types
//have to check your projection with geometry types 
```

顺便说一句，您的表格的创建方式对我来说看起来很奇怪......

# vim - 避免输入文本搜索 vim 命令历史

> ID：10127367
> 
> 赞同：1
> 
> 时间：2012-04-12T16:01:33.180
> 
> 标签：vim

我经常在 vim 脚本和用户命令中使用 / 搜索和替换命令。一个令人讨厌的副作用是，当输入 / 后跟光标向上时，搜索会出现在搜索命令历史记录中。我可以阻止 vim 将脚本中的搜索输入历史记录吗？另外：在脚本或用户命令中进行此类搜索后，是否有比搜索 /I_DO_NOT_EXIST_IN_THIS_FILE 等非常不可能的表达式更好的方法来删除突出显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:06:02.820

键入`:noh`以取消突出显示。

键入`:call search('I_DO_NOT_EXIST_IN_THIS_FILE')`以在没有搜索历史的情况下进行搜索。

您还`:call histdel('/', -1)`可以删除搜索历史中的最新条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:21:55.467

我使用 F9 关闭/打开上一个搜索的突出显示：

```
" Highlight searches 
set hlsearch
noremap <F9> :set hlsearch! hlsearch?<CR> 
```

# asp.net-mvc-3 - 在首先使用 EF 代码时，在 MVC ViewModel 中查询多对多关系并将其显示在视图中的正确方法是什么？

> ID：10127369
> 
> 赞同：0
> 
> 时间：2012-04-12T16:01:57.950
> 
> 标签：asp.net-mvc-3, ef-code-first, many-to-many, viewmodel

这必须非常简单，但我没有找到很多例子。我想获取所有带有相应标签的帖子并显示在视图中。基本上是一个简单的博客类型的东西。这是我的模型、视图模型、控制器和视图的代码。一切都可以减去标签，所以我的语法显然有问题。

```
public class MeWallPost
{
    public virtual int MeWallPostId { get; set; }

    public virtual string PostTitle { get; set; }        
    public virtual string PostContent { get; set; 
    public virtual DateTime PublishDate { get; set; }

    public virtual ICollection<MeWallPostMeTag> MeWallPostMeTags { get; set; }
}

public class MeTag
{
    public virtual int MeTagId { get; set; }

    public virtual string Name { get; set; }

    public virtual ICollection<MeWallPostMeTag> MeWallPostMeTags { get; set; }
}

public class MeWallPostMeTag
{
    [Key, Column(Order = 0)]
    public virtual int MeWallPostId { get; set; }
    [Key, Column(Order = 0)]
    public virtual int MeTagId { get; set; }

    public virtual MeWallPost MeWallPost { get; set; }
    public virtual MeTag MeTag { get; set; }
}

----

public class MeWallPostViewModel
{
    public string PostTitle { get; set; }
    public string PostContent { get; set; }
    public DateTime PublishDate { get; set; }

    private IEnumerable<MeTag> _Tags = new List<MeTag>();
    public IEnumerable<MeTag> Tags
    {
        get { return _Tags; }
        set { _Tags = value; }
    }

    public IEnumerable<MeWallPostViewModel> GetPosts()
    {
        var db = new DatselleDB();

        return from post in db.MeWallPosts             
               select new MeWallPostViewModel
               {
                   PostTitle = post.PostTitle,
                   PostContent = post.PostContent,
                   PublishDate = post.PublishDate,
                   Tags = post.MeWallPostMeTags.Select(a => a.MeTag)
               };
    }
}

-----

public ViewResult Index()
{
   return View(new MeWallPostViewModel());
}

------

@foreach (var item in Model.GetPosts()) {
<div class="postItem clear">
    <h3>@Html.DisplayFor(modelitem => item.PostTitle)</h3>
    <span class="date">@Html.DisplayFor(modelitem => item.PublishDate)</span>
    <p>@Html.DisplayFor(modelItem => item.PostContent)</p> 
    @foreach (var tag in Model.Tags) {
        @Html.DisplayFor(modelItem => tag.Name.ToString())
    }
</div> 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:50:46.550

[Raphaël Althaus 关于您的视图模型和控制器代码是正确的](https://stackoverflow.com/a/10127411/304832)。试试这个：

视图模型：

```
public class MeWallPostViewModel
{
    public string PostTitle { get; set; }
    public string PostContent { get; set; }
    public DateTime PublishDate { get; set; }

    public MeTagViewModel[] Tags { get; set; }

    public class MeTagViewModel
    {
        public int MeTagId { get; set; }
        public string Name { get; set; }
    }
} 
```

控制器：

```
public ViewResult Index()
{
    MeWallPostViewModel[] viewModels = null;
    using (var db = new DatselleDB())
    {
        viewModels = db.MeWallPosts
           .Include(p => p.MeWallPostMeTags.Select(t => t.MeTag))           
           .Select(p => new MeWallPostViewModel
           {
               PostTitle = p.PostTitle,
               PostContent = p.PostContent,
               PublishDate = p.PublishDate,
               Tags = p.MeWallPostMeTags.Select(t => 
                   new MeWallPostViewModel.MeTagViewModel
                   {
                       MeTagId = t.MeTagId,
                       Name = t.Name,
                   })
                   .ToArray()
               ),
           })
           .ToArray();
    }
    return View(viewModels);
} 
```

看法：

```
@model IEnumerable<MeWallPostViewModel>

@foreach (var item in Model)
{
    <div class="postItem clear">
        <h3>@Html.DisplayFor(m => item.PostTitle)</h3>
        <span class="date">@Html.DisplayFor(m => item.PublishDate)</span>
        <p>@Html.DisplayFor(m => item.PostContent)</p> 
        foreach (var tag in item.Tags)
        {
            @Html.DisplayFor(m => tag.Name)
        }
    </div> 
} 
```

另一个想法：

使用[AutoMapper](http://automapper.org/)清理控制器`Select`和`ToArray`代码。

**回复评论**

对于您的第一个问题，[请阅读此内容](https://stackoverflow.com/a/1106012/304832)。基本上，除非您以后需要添加或删除项目，否则不要将其转换为列表。在将实体转换为视图模型的情况下，您应该很少需要在从数据库中查询出来后添加或删除项目。

关于你的第二个问题，看我的事后想法。使用 AutoMapper，您的控制器代码最终可能如下所示：

```
public ViewResult Index()
    {
        // same # of lines as your original GetPosts (not counting this comment)
        MeWallPost[] entities = null;
        using (var db = new DatselleDB())
        {
            entities = db.MeWallPosts
               .Include(p => p.MeWallPostMeTags.Select(t => t.MeTag))
               .ToArray();
        }

        // technically, CreateMap should not be in the controller, but instead
        // bootstrapped once from the composition root (global.asax)
        Mapper.CreateMap<MeTag, MeWallPostViewModel.MeTagViewModel>();
        Mapper.CreateMap<MeWallPost, MeWallPostViewModel>()
            .ForMember(d => d.Tags, o => o.ResolveUsing(s => 
                Mapper.Map<MeWallPostViewModel.MeTagViewModel[]>
                    (s.MeWallPostMeTags.Select(a => a.MeTag))))
        ;

        var viewModels = Mapper.Map<MeWallPostViewModel[]>(entities);
        return View(viewModels);
    } 
```

同样在您的问题中，您将一个实体与视图模型混合在一起：

```
public class MeWallPostViewModel
{
    private IEnumerable<MeTag> _Tags = new List<MeTag>();
    public IEnumerable<MeTag> Tags
    {
        get { return _Tags; }
        set { _Tags = value; }
    } 
```

每次从实体 DTO 到视图模型时，您应该为原始实体的导航和（在您的情况下）要包含在视图中的集合属性实现单独的视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:04:57.737

编辑：对不起。

你的代码有点奇怪。

*   不要将 db 放在您的视图模型中
*   您的 GetPosts 方法没有任何意义（与类及其属性无关......为什么？）

我至少会做（远非好，但已经更好）

将您的 GetPosts() 方法作为私有方法放在控制器中（这不是最好的方法，但这会更好）。

我希望你的数据库实现 Disposable，所以使用它

然后

```
public ViewResult Index() {
   return View(GetPosts())
} 
```

你的视图索引应该有@model IEnumerable

然后在你看来

```
@foreach (var post in Model) {
 bla bla
} 
```

**编辑2：** 顺便说一句，尝试调试您的查询以查看它是否返回任何内容

# redis - 我应该如何在 celery Tasks 中处理我的 redis 连接？

> ID：10127370
> 
> 赞同：5
> 
> 时间：2012-04-12T16:02:05.143
> 
> 标签：redis, celery

我有一个 celery 服务器来处理我的应用程序的一些计数器

```
class IncrementStatsCounterTask(Task):
    def run(self, count, shortcode, stat_type, operator_id, date,  **kwargs):
        r_server = redis.Redis(settings.REDIS_HOST)
        key = key_mask % {
            'shortcode': shortcode,
            'stat_type': stat_type,
            'operator_id': operator_id,
            'date': date.strftime('%Y%m%d')
        }

        return key, r_server.incr(key, count) 
```

这一切都很好，但是每次我的任务运行时都会打开和关闭redis连接。有没有更好的方法来处理连接？也许有某种持久连接？

我正在运行最新的 django-celery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:20:12.800

在[python redis 库](http://pypi.python.org/pypi/redis/)中，您可以使用连接池。只需在您的一个模块中全局创建一个池，并将其用于每个新连接。

# naming-conventions - 当用作类名前缀时，“M”是什么意思？

> ID：10127377
> 
> 赞同：1
> 
> 时间：2012-04-12T16:02:27.090
> 
> 标签：naming-conventions

我正在维护一个旧的 C++/MFC 代码库，其中相当多的类名都以“M”为前缀（例如`MAdrSet`，`MDialogBase`等等）。到目前为止，我一直无法弄清楚这个前缀的含义——前缀出现或不出现的位置没有可识别的模式。

我一直在考虑 MFC 命名约定，它在类名前加上“C”（例如`CWnd`，`CDialog`），意思是“类”。有谁知道类似的命名约定，可能在 Windows/MFC 世界中，对于“M”类名称前缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:11:09.070

我得出的结论是，类名的“M”前缀是一种私有命名约定，在过去的一段时间内有效，但同时由于我的一些复制粘贴而陷入悲惨和混乱的境地前辈。

我目前最好的猜测是“M”前缀最初的意思是“实现”，而常见的“I”代表“接口”。自从我写了这个问题以来，我遇到了更多的“M”类，并且至少其中一些实现了同名的接口（例如`MWriter`implements `IWriter`）。

# javascript - 所见即所得编辑器的 RTL 支持

> ID：10127381
> 
> 赞同：2
> 
> 时间：2012-04-12T16:02:36.577
> 
> 标签：javascript, wysiwyg

如何为我的所见即所得编辑器包含 RTL（从右到左）支持。我已经试过了`document.execCommand('dirRTL', false, null)`。但它不起作用。但是 Gmail 是如何做到的。我错过了什么吗？

谢谢，高瑟姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-07T13:13:53.457

execCommand 中没有可用于文本方向的命令。
下面是我使用“insertHTML”在插入点插入 HTML 字符串的解决方案。

```
//Consider tag as the name of the command to execute eg. bold,underline,justifyRight,...

if(tag=='rtl' || tag=='ltr' ){
    var s=document.getSelection();			
    if(s==''){
        document.execCommand("insertHTML", false, "<p dir='"+tag+"'></p>");
    }else{
        document.execCommand("insertHTML", false, "<span dir='"+tag+"'>"+ document.getSelection()+"</span>");
    }
}else{
    //Default
    document.execCommand(tag,false,null);
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T11:08:36.923

This is quite an old question, anyway I have just implemented a solution for that so I share it.

I use the [bootstrap-wysihtml5-rails gem](https://github.com/Nerian/bootstrap-wysihtml5-rails), which is based on [bootstrap3-wysiwyg](https://github.com/bootstrap-wysiwyg/bootstrap3-wysiwyg) code.

The editor is created with an iframe, so what I do is simply:

```
<script>
$(window).load(function() {
  $('iframe.wysihtml5-sandbox').each(function(i) {
    $(this).contents().find("body").css({'direction':'rtl', 'font-family':'Arial'});
  });
})
</script> 
```

(I use `each` function since I have several editors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:31:09.777

好消息是，当涉及到 RTL（从右到左）文档方向时，操作系统会处理真正的问题。您只需定位要应用 RTL 的元素并将文本对齐添加到 RIGHT 并将方向添加到 RTL。只有当您开始输入阿拉伯文时，您才会看到真正的结果，因为不仅书写将从右到左开始，而且它的方向也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-11T08:05:19.807

最佳解决方案：编辑文件：wysihtml5-0.3.0.js 并找到 wysihtml5.dom.setAttributes 行并添加以下行：“direction”：“rtl”，

# actionscript-3 - 将 AS3 数据保存到 XML 文件

> ID：10127385
> 
> 赞同：0
> 
> 时间：2012-04-12T16:02:44.357
> 
> 标签：actionscript-3

我从主菜单 swf 外部加载了大量游戏 swf。

我要做的是获取他们输入到文本字段中的播放器的名称并将其发送到 XML 文件。在每场比赛结束后，我想将完成时间也发送到 XML 文件。

我遇到的问题是我不知道要在 XML 文件中创建一个新用户，然后将默认时间 00:00:00 替换为播放器设置的时间。

NameTextField 是文本字段的名称。

Hourtext、Minutetext 和 Secondtext 是计时器的名称。（它们的顺序类似于 Hourtext ':' Minutetext ':' Secondtext。

Flash MainMenu.swf 中的 AS3 代码

```
var XMLLoader:URLLoader = new URLLoader();
var Bytes:ByteArray = new ByteArray();
var FileRef:FileReference = new FileReference();

XMLLoader.addEventListener(Event.COMPLETE, XMLLoaded );
XMLLoader.load( new URLRequest("GameTimes.xml"));

function XMLLoaded(e:Event):void
{
    var XMLDoc:XML = new XML( e.target.data );
    //trace( XMLDoc.Users.User.(@Name == "Name01").Game.(@Title == "Game01"));
} 
```

GameTimes.xml 中的 XML 代码

```
<?xml version="1.0" encoding="utf-8"?>

    <Company>
        <Users>
            <User Name = "Name01">
                <Game Title = "Game01">00:00:00</Game>
                <Game Title = "Game02">00:00:00</Game>
                <Game Title = "Game03">00:00:00</Game>
                <Game Title = "Game04">00:00:00</Game>
                <Game Title = "Game05">00:00:00</Game>
                <Game Title = "Game06">00:00:00</Game>
                <Game Title = "Game07">00:00:00</Game>
                <Game Title = "Game08">00:00:00</Game>
            </User>
            <User Name = "Name02">
                <Game Title = "Game01">00:00:00</Game>
                <Game Title = "Game02">00:00:00</Game>
                <Game Title = "Game03">00:00:00</Game>
                <Game Title = "Game04">00:00:00</Game>
                <Game Title = "Game05">00:00:00</Game>
                <Game Title = "Game06">00:00:00</Game>
                <Game Title = "Game07">00:00:00</Game>
                <Game Title = "Game08">00:00:00</Game>
            </User>
        </Users>
    </Company> 
```

谢谢你的帮助 ：）

编辑：

提交按钮时的代码（提交名称输入到文本字段）

```
Cmpany.Users.appendChild("User Name = " NameTextField.text );
trace( XMLDoc.Users.appendChild(HourText.text)); 
```

我得到的错误

```
ReferenceError: Error #1065: Variable TCMText is not defined. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:21:18.423

使用 appendChild 创建新的 XML 节点（您的用户）。

所以你的XML.company.users.appendChild（你的新用户节点）。

# css - 如何在图像映射的鼠标悬停时更改超链接的颜色属性？

> ID：10127388
> 
> 赞同：0
> 
> 时间：2012-04-12T16:02:54.777
> 
> 标签：css, colors, hyperlink, imagemap

几分钟前我正在浏览其他用户问题..它导致我尝试更改鼠标悬停在我的图像地图上的超链接的悬停颜色。

知道如何为我拥有的 1 个超链接完成此操作吗？

[http://www.urlgone.com/d7ccf8/](http://www.urlgone.com/d7ccf8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:18:08.297

如我所见，您正在使用 jquery。所以做这样的事情：

```
<script>
    $(document).ready(function() {
        $("area[shape='poly']").mouseover(function() {
            var id = $(this).attr('id');
            $('a.staffs').removeClass('active'); //make other link not ative
            $('a.staff-' + id).addClass('active');
        }).mouseout(function() {
            $('a.staffs').removeClass('active');
        });
    });
</script> 
```

和 CSS（你必须将其更改为你的样式）：

```
<style>
    .active {
        color:red;
        text-decoration:underline;  
    }
</style> 
```

# java - 由 Generic ArrayList 支持的 Java Generic 类

> ID：10127390
> 
> 赞同：0
> 
> 时间：2012-04-12T16:02:59.797
> 
> 标签：java, generics

我写了一个非常简单的类`Sack`，它以无特定顺序保存一些数据，实际数据由 ArrayList 保存。我实现了该类及其方法，对我来说一切看起来都很好，但我在我的测试器类中收到编译时错误。

麻袋类：

```
public class Sack<E>
{
  //I suspect this might be the culprit, not sure if I can do this
  //but it compiles fine, should this maybe be of type Object?
  ArrayList<E> contents = new ArrayList<E>(); 

  public void add(E item)
  {
     contents.add(item);
  }

  public boolean contains(E item)
  {
     return contents.contains(item);              
  }

  public boolean remove(E item)
  {
     return contents.remove(item);
  }

  public Object removeRandom()
  {
     if(isEmpty())
     {
        return null;
     }
     else
     {
        int index = (int)(Math.random() * size());
        return contents.remove(index);
     }
  }

  public int size()
  {
     return contents.size();
  }

  public boolean isEmpty()
  {
     return contents.isEmpty();
  } 
```

}

主类：

```
public class SackDriver
{
    Sack<Integer> s = new Sack<Integer>();
    Integer i       = new Integer(2);

    s.add(new Integer(1)); //<- Error
    s.add(i);              //<- Error
    s.add(3);              //<- Error
    s.add(4);              //<- Error
    s.add(5);              //<- Error
    s.add(6);              //<- Error

    System.out.println("Size: " + s.size() + " Contains: " + s.contains(5));    
} 
```

这是我在每次调用 add() 时收到的错误：

```
SackDriver.java:11: error: <identifier> expected
                    s.add(x); 
```

不知道我在这里做错了什么，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:04:09.317

```
Sack<Integer> s = new Sack<Integer>();
Integer i       = new Integer(2);

s.add(new Integer(1)); //<- Error
s.add(i);              //<- Error
s.add(3);              //<- Error
s.add(4);              //<- Error
s.add(5);              //<- Error
s.add(6);              //<- Error

System.out.println("Size: " + s.size() + " Contains: " + s.contains(5)); 
```

这需要在方法、构造函数或静态块中，而不仅仅是在类中。它与泛型无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:08:44.840

您必须在方法或块中使用此代码，您无法在此处对其进行操作。IE

```
void test(){
s.add(new Integer(1)); //<- Error     s.add(i);              //<- Error     s.add(3);              //<- Error     s.add(4);              //<- Error     s.add(5);              //<- Error     s.add(6);              //<- Error      System.out.println("Size: " + s.size() + " Contains: " + s.contains(5));

} 
```

或使用

```
class SackDriver {    

        Sack<Integer> s = new Sack<Integer>();     
        Integer i       = new Integer(2);     
        {
        s.add(new Integer(1)); 
        //<- Error     
        s.add(i);              
        //<- Error     
        s.add(3);             
        //<- Error    
        s.add(4);            
        //<- Error    
        s.add(5);             
        //<- Error    
        s.add(6);              
        //<- Error     
        System.out.println("Size: " + s.size() + " Contains: " + s.contains(5)); 
        }

} 
```

# oauth - 自动 AWeber 身份验证？如何在无需登录的情况下以编程方式访问一位用户的数据？

> ID：10127391
> 
> 赞同：2
> 
> 时间：2012-04-12T16:03:13.187
> 
> 标签：oauth, aweber

如何使用 AWeber API 自动检查给定用户列表中是否存在电子邮件地址？AWeber 范式让我感到莫名其妙，他们的文档很差。从本质上讲，您获得的是能够将 AWeber 登录表单放在您的网站上（就像这个：[https](https://www.aweber.com/login.htm) ://www.aweber.com/login.htm ），所以任何 AWeber 用户都可以使用我的网站登录到他们的AWeber 帐户并查看其订阅者和列表数据。这是没用的。

API 密钥没有实际意义：它们只是确定是的，我是开发人员，是的，我已经注册了我的应用程序。API 密钥与用户数据 *无关。*

这根本不是 MailChimp 处理登录的方式：每个用户都可以下载自己的 API 密钥并使用它们进行身份验证，然后以编程方式从他们的列表中检索订阅者数据。

我需要做的是在我的网站上创建一个“会员区”，为了让访问者看到会员专享内容中的内容，他们必须加入我的列表。这是一个简化的登录表单，只要求输入电子邮件地址（不需要密码）。但是我看不到如何使用 AWeber 复杂的 oAuth 限制来做到这一点。我目前检查电子邮件地址的唯一方法是登录我自己的表单（[https://www.aweber.com/login.htm](https://www.aweber.com/login.htm)表单的本地副本），然后检查电子邮件地址。这不会以编程方式工作。如果我不能自动访问订阅者数据，那么 API 的意义何在？

如何自动进行身份验证，以便我的应用程序可以从我的用户列表中检索订阅者信息，而无需我登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T18:27:25.787

消费者密钥标识您的应用程序，访问密钥是应用程序访问帐户的关键，两者都是向 API 发出请求所必需的。

有一个用于访问 aweber 帐户的订阅者数据的 php 快速入门。[http://engineering.aweber.com/quick-start-api-script-in-php/](http://engineering.aweber.com/quick-start-api-script-in-php/) 生成访问密钥后，您必须存储它们以备将来请求。

# excel - 在 Excel 中锁定选择框大小

> ID：10127392
> 
> 赞同：2
> 
> 时间：2012-04-12T16:03:23.460
> 
> 标签：excel, excel-2007, selection, drop-down-menu

这似乎是一件简单的事情，但我无法弄清楚，或者在网上找到它。

如果我在一列中选择 5 个单元格（比如 A1:A5），并且我想将此选择形状（列 1:5）移动到（到 B1:B5）；有捷径可以做到这一点吗？目前我点击了左箭头，选择框的大小变成了 B1，我必须点击 shift 并选择 B2:B5。理想情况下，我想找到一个“锁定”选择框形状的热键。

有同事建议写一个宏，但是很多情况下是无效的。例如，如果我想用一行或不同大小的形状做同样的事情，而不是一列，该怎么办。excel似乎内置了这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:29:16.770

我不确定宏如何无效。我会编写类似于下面的程序，然后将它们分配给热键。请让我知道这对你有没有用。

```
Option Explicit

Public rowDim As Long
Public colDim As Long
Public putSel as Boolean

Sub togglePutSel()

putSel = Not putSel

End Sub

Sub GetSelShape()

rowDim = Selection.Rows.Count
colDim = Selection.Columns.Count
putSel = True

End Sub

Sub PutSelShape()

Selection.Resize(rowDim, colDim).Select

End Sub 
```

如果您想让它在您按下箭头键时工作，那么在您的工作表代码中，您可以使用它。您可能想快速检查一下，`rowDim`并且`colDim`不是 0。唯一的问题是，除非您创建触发器来停止调用，否则您将被这种行为所困扰`PutSelShape`。因此，我建议使用一个宏（热键为`GetSelShape`）来切换它，另一个热键为`togglePutSel`.

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

If putSel Then
  Call PutSelShape
End If

End Sub 
```

# ruby-on-rails - 为什么使用“self”来访问 ActiveRecord/Rails 模型属性？

> ID：10127393
> 
> 赞同：14
> 
> 时间：2012-04-12T16:03:25.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

在我的整个应用程序`self.`中没有必要引用用户名。`name`工作正常。

为什么以下代码需要`self`按预期工作？

```
class User< ActiveRecord::Base
    before_save :validate_name

def validate_name
    if self.name.nil? || self.name.empty?
        self.name= "Mr. No Name"
    end
end 
```

顺便说一句，我知道这`validates_presence_of`可以用来阻止保存，但如果没有给出名称，我想用默认值保存。

导轨 3.0.7。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-12T16:06:05.103

通常的用途`self`是强制 Ruby 将其识别为方法调用，而不是将其误解为变量。在没有事先了解名为 的方法的情况下`day=`，`day = "x"`Ruby 将其视为变量赋值。`self.day = "x"`始终是方法调用。

之所以麻烦，是因为`name`和`name=`方法是在解析 User 类文件之后动态添加的。在使用模型时，Rails 所做的第一件事是为关联的数据库字段创建方法，但这会在您的`user.rb`文件被解析之后发生。

# java - 当我的矩阵“非正定”时有什么问题？

> ID：10127394
> 
> 赞同：-1
> 
> 时间：2012-04-12T16:03:35.943
> 
> 标签：java, math, matrix

我正在使用 Jahmm java lib 进行分类。我想做一些测试，所以我生成了一些随机数据集。

我以这种格式创建数据集：

```
[val_1.1 val_1.2 val_1.3];[val_2.1 val_2.2 val_2.3]; [val_3.1 val_3.2 val_3.3] etc... 
```

我使用随机函数，以便

```
 val_1.1 == val_1.2 == val_1.3 
```

和

```
val_2.1 == val_2.2 == val_2.3 
```

等等。

当我使用此数据集调用以下函数时，它会引发 IllegalArgumentException

```
static double[][] decomposeCholesky(double[][] m)
{
    if (!isSquare(m))
        throw new IllegalArgumentException("Matrix is not square");

    double[][] l = matrix(nbRows(m), nbColumns(m));

    for (int j = 0; j < nbRows(m); j++)
    {
        double[] lj = l[j];
        double d = 0.;

        for (int k = 0; k < j; k++) {
            double[] lk = l[k];
            double s = 0.;

            for (int i = 0; i < k; i++)
                s += lk[i] * lj[i];

            lj[k] = s = (m[j][k] - s) / l[k][k];
            d = d + s * s;
        }

        if ((d = m[j][j] - d) <= 0.)
            throw new IllegalArgumentException("Matrix is not positive " + 
            "defined");

        l[j][j] = Math.sqrt(d);
        for (int k = j+1; k < nbRows(m); k++)
            l[j][k] = 0.;
    }

    return l;
} 
```

所以我的序列矩阵不是“正定义的”，但它是什么意思？应该对我的数据集做些什么来避免它？

我数学不好！提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:12:15.707

我认为代码的作者的意思是“肯定的”。矩阵必须是正定矩阵才能被 Cholesky 分解分解。正式定义是一个方阵 A 是正定的当且仅当，对于所有向量 x：

x'Ax > 0

所有正定矩阵都是关于对角线和正方形对称的，所以一个好的开始是在测试中只使用正方形对称矩阵，看看它是如何工作的。为了绝对确保矩阵是正定的，您可以测试其所有特征值以查看它们是否每个 > 0。我不知道 JAHMM 是否有获取矩阵特征值的方法，但如果有，您可以这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T16:37:17.447

我不知道那个图书馆，但我认为你的意思是“肯定的”而不是“肯定的”。

事情是这样的：如果你有一个正常的数字，你可以通过查看符号轻松判断它是正数还是负数（或零）。确定性是该想法在矩阵世界中的扩展，在矩阵世界中，仅查看符号不再起作用，因为有些条目可能是正数，有些可能是负数。

确定性有许多不同的定义（可以证明是相等的），你可以在这里找到它们： [http ://en.wikipedia.org/wiki/Positive-defined_matrix#Characterizations](http://en.wikipedia.org/wiki/Positive-definite_matrix#Characterizations)

现在，问题在于，当您平等地选择行时，并不能保证正定性。事实上，3x3 矩阵总是半正定的，永远不会是正定的。
我环顾四周；这里有一些提示如何生成正定矩阵： [https ://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/04LinearAlgebra/posdef/](https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/04LinearAlgebra/posdef/)

`( rand(n, n) + (n - 1)*eye( n ) )`

所以你生成anxn矩阵，其中所有条目都是0到1之间的随机数，然后添加单位矩阵乘以n-1，在你的情况下是[2,0,0];[0,2,0];...

希望有帮助...

* * *

ps我忘了你的矩阵也必须是对称的，因为你想在它上面做一个cholesky。但这很简单，只需要生成上面提到的矩阵 A，然后选择 B = 1/2 * ( A + A.transposed() ); 这个矩阵 B 仍然是正定的，它也是对称的:)

# android - 在关闭应用程序之前保存值？

> ID：10127396
> 
> 赞同：2
> 
> 时间：2012-04-12T16:03:41.670
> 
> 标签：android, string, save

我想在关闭应用程序之前保存一些值。但我不知道是否必须创建一个新文件（.txt）并将其保存；或者我可以更改 strings.xml 文件，当我下次打开应用程序时，保存的值将是正确的保存值，或者是我在第一次使用之前定义它们的 walues。我知道存在从 strings.xml 文件读取的非常简单的方法，因此我认为必须有一种方法可以在关闭之前在此文件中设置值（但我在网上找不到）。感谢您提供任何示例或您的建议和解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:34:06.493

Android 提供了 SharedPreferences 类来帮助您保存简单的应用程序数据。您可以使用 SharedPreferences 类来保存配置信息或任何您想要的。当您将应用程序置于后台或关闭它时，将调用 onStop()。你可以重写它来实现你想要的。

SharedPreferences 类的使用非常简单：

第 1 步：使用 SharedPreferences 对象编写

```
//Create a object SharedPreferences from getSharedPreferences("name_file",MODE_PRIVATE) of Context
private SharedPreferences pref;
pref = getSharedPreferences("info", MODE_PRIVATE);
//Using putXXX - with XXX is type data you want to write like: putString, putInt...   from      Editor object
Editor editor = pref.edit();
editor.putString("key5","value5");
//finally, when you are done saving the values, call the commit() method.   
editor.commit() 
```

step2：使用 SharedPreferences 对象读取

```
//get SharedPreferences from getSharedPreferences("name_file", MODE_PRIVATE)
SharedPreferences shared = getSharedPreferences("info",MODE_PRIVATE)
//Using getXXX- with XX is type date you wrote to file "name_file"
 String string_temp = shared.getString("key5"); 
```

MODE_PRIVATE 常量表示共享首选项文件只能由创建它的应用程序打开。

共享首选项文件保存为文件`/data/data/<package_name>/shared_prefs`夹中的 XML 文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:07:12.147

在您的活动的覆盖 onStop() 方法中执行您的保存操作。至于在哪里/如何保存：按照这里的例子：

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:06:48.863

您可以使用首选项来完成。检查本教程和示例

[http://www.vogella.com/articles/Android/article.html#preferences](http://www.vogella.com/articles/Android/article.html#preferences)

如果必须在多个活动之间共享数据，则使用 Shared Preferences

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:08:17.463

更好地使用共享偏好来保存数据，但如果您认为自己保存了更多数据，那么最好使用数据库或将其保存为文件。

参考这个[链接](http://developer.android.com/guide/topics/data/data-storage.html)

# eclipse - .odb 文件在哪里？

> ID：10127398
> 
> 赞同：0
> 
> 时间：2012-04-12T16:03:53.187
> 
> 标签：eclipse, google-app-engine, jpa

我正在使用带有 JPA 的 Google App Engine，现在当我运行已部署的项目时，我可以在 DataStore Viewr 中使用数据库。
当我在本地模式下运行时，我在哪里可以找到 odb 文件？

当我与 JPA 合作时，我将方向设置为：

```
emf = Persistence.createEntityManagerFactory("$objectdb/db/profiles.odb"); 
```

但现在当我使用：

```
emf = Persistence.createEntityManagerFactory("transactions-optional"); 
```

我不知道在哪里可以找到 odb 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:56:07.160

Google App Engine 的实现不是基于 ObjectDB，所以 GAE 中没有 ObjectDB 数据库 odb 文件格式的数据库。

# php - 如何通过激活按钮来增加数字，以便每次增加按钮时都能访问功能？

> ID：10127399
> 
> 赞同：1
> 
> 时间：2012-04-12T16:04:00.953
> 
> 标签：php, javascript, function

我正在尝试创建一个按钮，无论何时单击它（Onclick）

```
<button onClick="showUser(<?php echo $b?>)">Back</button> 
```

它更改一个值（数字），以便可以通过能够显示信息的函数检索该数字。示例我正在调用下一步和返回按钮 - 如果单击下一步按钮，我希望它在每次单击它时不断增加它的值，以便当它的数字增加时，将根据该数字访问不同的信息，例如当我第一次单击按钮（值为 1）信息将可见然后当我再次单击时它将增加到（2）并且我将能够看到其他信息，问题是每当我尝试增加值时，值只增加一次。

我这样做是为了显示信息，并且每次用户单击这些按钮下一步和返回时，都会按顺序显示信息 - 从数据库中获取。我正在使用 javascipt、php 和 sql。

我说的可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:33:02.437

您可以使用一个对象，在其中设置点击时需要更新的两个变量： var obj = { nextClicked : 0, prevClicked : 0 };

```
function buttonClick(type) {
    if(type == "prev") {
         obj.nextClicked++;
    }
    if(type == "next") {
         obj.prevClicked++
    }
}
<button type="button" onclick="buttonClick('next')">Next</button>
<button type="button" onclick="buttonClick('prev')">Prev</button> 
```

由于您使用的是 ajax，因此变量不会重置，除非您刷新页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:07:44.267

您可以使用 php[会话](http://php.net/manual/en/features.sessions.php)来存储您当前所在的“页面”编号，然后根据单击的按钮增加或减少（您可以使用 ajax 或简单的表单来发送事件数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:23:48.297

使用隐藏字段来保存值，并使用 onclick 函数来增加它并提交表单。

```
 <?

 if(!isset($_GET['count'])) {
  $count = 0;
  } else {
  $count = $_GET['count'];
  }

  ?>

   <script type='text/javascript'>
   function submitForm(x) {
     if(x == 'prev') {
     document.getElementById('count').value--;
     } else {
     document.getElementById('count').value++;
     }

     document.forms["form"].submit();
   }
   </script>

   <form action='hidfield.php' method='get' name='form'>
   <input type='hidden' name='count' id='count' value='<?php echo $count; ?>'>
   </form>

   <input type='submit' name='prev' value='prev' onclick="submitForm('prev')">
   <input type='submit' name='next' value='next' onclick="submitForm('next')"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:24:21.770

将此添加到您的网页并刷新几次。

```
<?php
session_start();
echo $_SESSION['count']++; 
```

可以在这里测试：

[http://codepad.viper-7.com/qXdj8M](http://codepad.viper-7.com/qXdj8M)

# d3.js - 带负值的条形图

> ID：10127402
> 
> 赞同：28
> 
> 时间：2012-04-12T16:04:10.373
> 
> 标签：d3.js

我需要创建一个可以有负值的 d3 条形图。理想情况下，轴零位置应该根据数据的范围来计算，但我会接受一个假设对称正负范围的解决方案，即它总是在图表的中间。

这是我想要实现的一个例子。

![带负值的条形图](../Images/1ecf50df40f65ddf84ef2da0db09eb84.png)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-12T16:28:08.973

好的，假设您有一个数字数组作为数据集，其中包括一些正值和负值：

```
var data = [-15, -20, -22, -18, 2, 6, -26, -18]; 
```

您需要两个刻度来构建条形图。您需要一个定量刻度（通常是[线性刻度](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear)）来计算沿*x*轴的条形位置，并需要第二个[序数刻度](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-ordinal)来计算沿*y*轴的条形位置。

对于定量尺度，您通常需要计算数据的域，该域基于最小值和最大值。一个简单的方法是通过[d3.extent](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_extent)：

```
var x = d3.scale.linear()
    .domain(d3.extent(data))
    .range([0, width]); 
```

您可能还希望[调整](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_nice)比例以稍微圆整范围。再举一个例子，有时您希望零值位于画布中间，在这种情况下，您需要取最小值和最大值中的较大者：

```
var x0 = Math.max(-d3.min(data), d3.max(data));

var x = d3.scale.linear()
    .domain([-x0, x0])
    .range([0, width])
    .nice(); 
```

或者，您可以硬编码您想要的任何域。

```
var x = d3.scale.linear()
    .domain([-30, 30])
    .range([0, width]); 
```

对于*y*轴，您需要使用[rangeRoundBands](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-ordinal_rangeRoundBands)将垂直空间划分为每个条的带。这还允许您指定条形之间的填充量。序数比例通常与一些识别数据一起使用，例如名称或唯一 ID。但是，您也可以将序数比例与数据的索引结合使用：

```
var y = d3.scale.ordinal()
    .domain(d3.range(data.length))
    .rangeRoundBands([0, height], .2); 
```

现在您已经有了两个比例尺，您可以创建矩形元素来显示条形图。一个棘手的部分是，在 SVG 中，矩形是根据其左上角定位（`x`和属性）的。`y`所以我们需要使用*x*和*y*尺度来计算左上角的位置，这取决于相关值是正还是负：如果值为正，则数据值确定右边缘条的左边缘，如果为负，则确定条的左边缘。因此这里的条件：

```
svg.selectAll(".bar")
    .data(data)
  .enter().append("rect")
    .attr("class", "bar")
    .attr("x", function(d, i) { return x(Math.min(0, d)); })
    .attr("y", function(d, i) { return y(i); })
    .attr("width", function(d, i) { return Math.abs(x(d) - x(0)); })
    .attr("height", y.rangeBand()); 
```

最后，您可以添加一个轴以在顶部显示刻度线。您还可以计算填充样式（甚至是渐变）来改变区分正值和负值的外观。把它们放在一起：

*   [带负值的条形图](http://bl.ocks.org/2368837)

# c# - 动态文本字段不会在回发时保留数据

> ID：10127404
> 
> 赞同：0
> 
> 时间：2012-04-12T16:04:29.680
> 
> 标签：c#, asp.net, controls, dynamic-controls

我创建了一个允许用户动态添加更多文本框的网络表单。现在，当单击按钮添加另一个字段时，它会回发到自身。在 Pre_Init 中添加控件。但是，当页面自行重建时，文本框名称每次都不同，因此数据不会在每次回发时保留。

```
protected void Page_PreInit(object sender, EventArgs e)
{

    MasterPage master = this.Master; //had to do this so that controls could be added. 
    createNewTextField("initEnumValue",true);
    RecreateControls("enumValue", "newRow");
}
private int FindOccurence(string substr)
{
    string reqstr = Request.Form.ToString();

    return ((reqstr.Length - reqstr.Replace(substr, "").Length) / substr.Length);
}
private void RecreateControls(string ctrlPrefix, string ctrlType)
{
    string[] ctrls = Request.Form.ToString().Split('&');
    int cnt = FindOccurence(ctrlPrefix);
    //Response.Write(cnt.ToString() + "<br>");
    if (cnt > 0)
    {
        for (int k = 1; k <= cnt; k++)
        {
            for (int i = 0; i < ctrls.Length; i++)
            {
                if (ctrls[i].Contains(ctrlPrefix  + k.ToString()) && !ctrls[i].Contains("EVENTTARGET"))
                {
                    string ctrlID = ctrls[i].Split('=')[0];

                    if (ctrlType == "newRow")
                    {

                        createNewTextField(ctrlID,false);
                    }
                    break;
                }
            }
        }
    }
}
protected void addEnum_Click(object sender, ImageClickEventArgs e)
{

    int cnt = FindOccurence("enumValue");
    createNewTextField("enumValue" + Convert.ToString(cnt + 1),false);
   // Response.Write(cnt.ToString() + "<br>");
}
private void createNewTextField(string ID, bool button)
{
    Response.Write(ID + "<br/>"); //this is where I'm getting different names each time there is a postback
    if (ID != "initEnumValue") //create new line starting with the second tb. 
    {
        LiteralControl newLine = new LiteralControl();
        newLine.Text = "<br />";
        this.plhEnum.Controls.Add(newLine);
    }

    TextBox newTb = new TextBox();
    newTb.ID = ID;
    this.plhEnum.Controls.Add(newTb);

    if (button) //create the button only on the first one. 
    {
        LiteralControl space = new LiteralControl();
        space.Text = "&nbsp;";
        this.plhEnum.Controls.Add(space);
        ImageButton imgbutton = new ImageButton();
        imgbutton.ID = "addEnum";
        imgbutton.ImageUrl = "~/images/add.png";
        imgbutton.Click += new ImageClickEventHandler(addEnum_Click);
        imgbutton.CausesValidation = false;

        this.plhEnum.Controls.Add(imgbutton);
    }

    //endEnumRow();
    //this.plhEnum.Controls.Add(newTb);
} 
```

我已经尝试过这个解决方案[如何从 ASP .NET MVC 中的动态生成控件中获取数据？](https://stackoverflow.com/questions/661575/how-can-i-get-data-from-dynamic-generated-controls-in-asp-net-mvc)

# iphone - iOS：使用 CLLocationManager 获得准确的反向地理编码？

> ID：10127405
> 
> 赞同：1
> 
> 时间：2012-04-12T16:04:32.500
> 
> 标签：iphone, ios, gps, location, cllocationmanager

**背景：**我想让用户在他们想要的时候在几秒钟内得到他们的位置。但是，位置大多是不准确的。我想询问用户是否愿意再试一次以获得更准确的地址。

**问题：**如何编码以保证下一个猜测总是比上一个猜测更好。

**我试过的：**

```
CLLocationManager *locationManager;

- (CLLocationManager *)locationManager {
    if (locationManager != nil) {
        return locationManager;
    }
    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [locationManager setDelegate:self];
    return locationManager;
}

-(void)myLocationClickedWithCount: (int) count{
    [[self locationManager] startUpdatingLocation];
    CLLocation *location = [locationManager location];
    CLGeocoder *locationGeocoded = [[CLGeocoder alloc] init];
    [locationGeocoded reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        if (!placemark){
            if (count > 0){
                //placemark not available, try again after 1 second
                sleep(1);
                [self myLocationClickedWithCount:count-1];
            }
            else{
                //Unable to get location after 3 tries
                UIAlertView *locationNotFoundAlert = [[UIAlertView alloc]initWithTitle:@"Unable to Locate" message:@"Would you like to try again?" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
                locationNotFoundAlert.tag = locationNotFoundAlertTag;
                [locationNotFoundAlert show];
            }
        }else{
            // got location but not accurate.
            if (location.horizontalAccuracy > accuracyRadius) {
                UIAlertView *locationInaccurateAlert = [[UIAlertView alloc]initWithTitle:@"Inaccurate Location" message:[NSString stringWithFormat:@"Your GPS shows the radius of %.2f meters. Would you like to try again?",location.horizontalAccuracy] delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
                locationInaccurateAlert.tag = locationInaccurateAlertTag;
                [locationInaccurateAlert show];
            }else {
                address.text = placemark;
            }
        }
    }];
} 
```

* * *

**更新** 当用户再次询问时，猜测可能需要更长的时间。我只是想知道我应该如何编码。IE：我应该`[[self locationManager] startUpdatingLocation];`再打电话吗？还是会重置我到目前为止的位置。因此，如何根据 GPS 拥有的当前信息第二次改进我的猜测（GPS 开启时间越长，准确度就越高？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:18:22.977

对于通过代码的准确性，您无能为力...除了

```
 [locationManager setDesiredAccuracy:kCLLocationAccuracyBest]; 
```

您已经完成了...据我所知，如果您使用的是 3G 或 EDGE，那么您的精度会大大提高（可以达到 5-10m 的精度水平）。

您可以参考Apple 的[这篇](http://support.apple.com/kb/HT1975)文章，其中讨论了 iphone GPS 精度的工作原理......

希望这有帮助..

# powershell - 选择 AD 成员属性 + 额外列

> ID：10127410
> 
> 赞同：0
> 
> 时间：2012-04-12T16:04:50.800
> 
> 标签：powershell, active-directory

我正在获取某个组的 AD 成员并列出该组的某些属性。我似乎无法使用以下代码获取组名：

```
Import-Module ActiveDirectory 
$strIdentity = "TestGroup"
$GroupMembers = Get-ADGroupMember -Identity $strIdentity -Recursive 
$GroupMembers | select $strIdentity, Name, ObjectClass | sort name | Format-Table 
```

当我得到输出时，我得到 a`{}`而不是`TestGroup`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:45:40.047

用`$strIdentity`双引号括起来：

```
$GroupMembers | select "$strIdentity",Name, ObjectClass ... 
```

如果上述方法不起作用，请尝试使用[计算属性](http://technet.microsoft.com/en-us/library/ff730948.aspx)：

```
$GroupMembers | select @{Name='GroupName';Expression={$strIdentity}},Name, ObjectClass ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:36:47.200

`Select-Object`用于选择对象的属性，因此选择`$strIdentity`在这里没有任何意义。从您的 Select 语句中省略该部分。

但我认为你想要做的是添加一个属性来反映父组名称。

```
$groupmembers | select @{Name="Group";Expression={$strIdentity}}, Name, ObjectClass 
```

请记住，这完全是关于对象而不是文本。

# mysql - 左连接显示所有行

> ID：10127418
> 
> 赞同：1
> 
> 时间：2012-04-12T16:05:35.060
> 
> 标签：mysql, left-join

```
SELECT 
    CH.ChannelName, COUNT(O.OrderID) AS Orders
FROM
    Channels CH
LEFT JOIN Programs P USING (ChannelID)
LEFT JOIN Codes C USING (ProgramID)
LEFT JOIN Order O USING (CodeID)
WHERE
    O.OrderDate = '2012-04-11'
GROUP BY 
    CH.ChannelName
WITH ROLLUP 
```

此查询仅返回有订单的渠道。如何显示所有频道，即使该特定频道的订单表中没有订单？所以基本上，所有频道都会列出来，如果那个频道没有订单，我需要显示零。

我知道解决这个问题可能很简单。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:09:18.630

您的 where 子句将查询限制为对该日期有订单的渠道，但是如果您将该条件移到 join 语句中，它将为您提供所需的结果：

```
SELECT 
    CH.ChannelName, COUNT(O.ID) AS Orders
FROM
    Channels CH
LEFT JOIN Programs P USING (ChannelID)
LEFT JOIN Codes C USING (ProgramID)
LEFT JOIN Order O ON CH.CodeID = O.CodeID AND O.OrderDate = '2012-04-11'
GROUP BY 
    CH.ChannelName
WITH ROLLUP 
```

请注意，应该`COUNT(O.ID)`让 SQL 只计算具有非空订单的行。在这种情况下，对于没有订单的渠道，您将正确地获得零订单计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:11:56.713

```
SELECT 
    CH.ChannelName, COUNT(O.OrderID) AS Orders
FROM
    Channels CH
LEFT JOIN Programs P USING (ChannelID)
LEFT JOIN Codes C USING (ProgramID)
LEFT OUTER JOIN Order O USING (CodeID)
WHERE
    O.OrderDate = '2012-04-11'
GROUP BY 
    CH.ChannelName
WITH ROLLUP 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:14:47.550

尝试这个：

```
SELECT CH.ChannelName, SUM(O.OrderDate = '2012-04-11') AS Orders
FROM Channels CH
LEFT JOIN Programs P USING (ChannelID)
LEFT JOIN Codes C USING (ProgramID)
LEFT JOIN Order O USING (CodeID)
GROUP BY CH.ChannelName
WITH ROLLUP 
```

# c# - 如何使用 Jquery Ajax 从服务器获取 UserControl 的内容？

> ID：10127419
> 
> 赞同：1
> 
> 时间：2012-04-12T16:05:40.390
> 
> 标签：c#, jquery, asp.net, .net

使用 UpdatePanel 的 Asp.Net ajax 实现真的很慢，有经验的人知道整个 ViewState 被发送到服务器，即使我们只对部分回发感兴趣。所以我开始使用 Jquery，但我不知道如何从 Jauery 向服务器发出请求并在输出中获取 UserControl 的 HTML？UserControl 反过来可能有一些控件，如文本框等。

简而言之，我想要一些 Asp.Net MVC 具有的功能，它使用`RenderPartial`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:31:51.517

在 的上下文中`Page`，您可以加载控件并呈现其输出。

```
Control myControl = Page.LoadControl("myControl.ascx");
myControl.RenderControl(System.Web.UI.HtmlTextWriter); 
```

但这只是获取控件将输出到页面的 html。如果您的控件没有更多事件并且只是在加载时执行某些操作，这很好，但是如果您想从它回发，那么这将不起作用（如评论中所述。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:30:54.157

根据我的经验，有时，尝试直接调用用户控件很痛苦。

我有时将我的 userControl 放在一个空白页中，然后简单地做一个 $.get( 所以，对于每个 userControl，我必须制作一个专用的空白页......

其他时候，userControl 已经嵌入到已命名 div 容器内的现有页面中。然后我在页面上调用 $.load( ，以容器 div 为目标。在这种情况下，我不必创建页面，但我会浪费带宽并丢失脚本和样式标签（jQuery 从 v1.4 开始清理它们）

# c# - C# 十进制舍入不一致？

> ID：10127427
> 
> 赞同：39
> 
> 时间：2012-04-12T16:06:11.287
> 
> 标签：c#, rounding

我一直在与来自 SQL Decimal (38,30) 的 C# 中的小数精度作斗争，我终于把它一直做到了四舍五入。我知道我可能在这里忽略了显而易见的事情，但我需要一点洞察力。

我遇到的问题是 C# 没有产生我认为是一致的输出。

```
decimal a = 0.387518769125m;
decimal b = 0.3875187691250002636113061835m;

Console.WriteLine(Math.Round(a, 11));
Console.WriteLine(Math.Round(b, 11));
Console.WriteLine(Math.Round(a, 11) == Math.Round(b, 11)); 
```

产量

```
0.38751876912
0.38751876913
False 
```

呃，0.38751876913？真的吗？我在这里想念什么？

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms131275.aspx)：

> 如果小数位为奇数，则改为偶数。否则，它保持不变。

为什么我看到不一致的结果？额外的精度不会改变“小数位中的数字”......

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-12T16:13:23.103

来自 MSDN：

> **`d`**`decimals`如果小数位**右侧**有**一个非零数字****且其值为`5`**，则小数位上的数字如果是奇数则向上舍入，如果是偶数则**保持不变**。如果`d`小数位数少于`decimals`,`d`则原样返回。

在你的第一种情况下

```
decimal a = 0.387518769125m;
Console.WriteLine(Math.Round(a, 11)); 
```

第 11 位的右边有**一个数字，****这个数字是`5`**。因此，**由于位置 11 是偶数，所以它保持不变**。因此，你得到

```
0.38751876912 
```

在你的第二种情况下

```
decimal b = 0.3875187691250002636113061835m;
Console.WriteLine(Math.Round(b, 11)); 
```

第 11 位的右边没有**一个数字。**因此，这是直接向上的小学四舍五入；如果下一个数字大于 4，则四舍五入，否则向下舍入。由于第 11 位右边的数字大于 4（它是 5），所以我们四舍五入，所以你看

```
0.38751876913 
```

> 为什么我看到不一致的结果？

你不是。结果与文档完全一致。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-12T16:10:34.170

来自 MSDN - [Math.Round 方法（十进制，Int32）](http://msdn.microsoft.com/en-us/library/zy06z30k.aspx)：

> 如果 d 中小数点右侧有一个非零数字且其值为 5，则小数点位置的数字如果是奇数则四舍五入，如果是偶数则保持不变。如果 d 的小数位数少于小数，则 d 原样返回。
> 
> 此方法的行为遵循 IEEE 标准 754 第 4 节。这种四舍五入有时称为四舍五入或银行家四舍五入。它可以最大限度地减少因在单个方向上持续舍入中点值而导致的舍入误差。

注意**单个非零数字**的使用。这对应于您的第一个示例，但**不是**第二个示例。

和：

> 要控制 Round(Decimal, Int32) 方法使用的舍入类型，请调用 Decimal.Round(Decimal, Int32, MidpointRounding) 重载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T16:12:23.997

“d 中小数点右侧的单个非零数字，其值为 5”部分解释了结果。只有当要舍入的部分正好是 0,5 时，舍入规则才起作用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-12T17:00:16.500

让我们将两个数字都向左移动 11 位：

> 38751876912.5
> 38751876912.50002636113061835

使用银行家四舍五入，我们将第一个四舍五入。在*每个*中点舍入系统下，我们将第二个数字向上舍入*（因为它不在中点处）*。

.Net 正在做的正是我们所期望的。

# dns - 如何检索服务器中托管的域列表

> ID：10127432
> 
> 赞同：0
> 
> 时间：2012-04-12T16:06:45.420
> 
> 标签：dns, server-administration

有什么方法可以检索服务器列表中托管的域列表，fe 试图找出同一服务器上托管的其他域的数量，并共享公共资源。

如果这可以在 bash 下使用，则更好。

/萨留斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:48:35.110

您可以使用or ...查询此[在线服务](http://www.yougetsignal.com/tools/web-sites-on-web-server/)，但表单发布的过程看起来有点奇怪（使用前请查看 HTML 源代码）。`wget``curl`

基本上，这是在域名数据库中查找 IP 地址。

# xml - Upshot.js 和 LINQ to XML

> ID：10127434
> 
> 赞同：4
> 
> 时间：2012-04-12T16:06:49.210
> 
> 标签：xml, asp.net-mvc, upshot

使用 Upshot 和 DbDataController 似乎都很好。我想知道 Upshot 是否与普通的 ApiController 兼容？

例如，一个 Api Controller Post 方法接受一个模型，然后以某种方式将该模型添加到 XML 文件中。客户端使用 Upshot 发布数据并仍然收到验证错误？

有没有其他人玩过 Upshot 到这种程度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:27:34.400

SPA 使用 upshot.js，这是一个与 Entity Framework 紧密相关的 javascript 框架。因此，如果您想使用 SPA 功能，则需要使用 DataController 和 EF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:23:27.663

您可以从 DataController 继承，它通常可以正常工作 - 从我所见，它不使用 EF。

唯一的问题是，当您进行更新时，您需要接受一个 ChangeSet 而不是您的实体 - 但您可以在 ChangeSet 中四处寻找受影响的实体。

这基本上是因为当您提交更改时，它会将其包装在附加信息中，而不是简单地使用您的实体或实体集合提交 JSON 对象。

不过，您可以为 Upshot 创建一个自定义数据提供程序来解决这个问题 - 尽管我还没有开始创建它（还）。如果我这样做，我将开源它，尽管我非常喜欢接收 ChangeSet，因为它实际上包含有关已更改内容等的所有信息，所以我倾向于处理此服务器端，除非数据传输/安全性（？）是一个问题。无论哪种方式，很高兴有这个选项。

# javascript - 有没有办法在 Firefox 侧边栏中加载页面时应用不同的 CSS？

> ID：10127436
> 
> 赞同：2
> 
> 时间：2012-04-12T16:06:53.247
> 
> 标签：javascript, html, css, firefox

我想制作一个用户脚本或样式表来重新格式化某些页面，以便在 Firefox 侧边栏中获得更佳的查看效果。有没有办法告诉侧边栏中已经加载了一个页面？纯 CSS 解决方案会很棒，但 JavaScript 也完全可以接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:02:57.167

要为窄显示（如侧边栏）设置不同的页面样式，您可以使用[css3 媒体查询](http://css-tricks.com/css-media-queries/)。

# linux - 如何禁用根设备上的文件系统缓存？

> ID：10127451
> 
> 赞同：2
> 
> 时间：2012-04-12T16:07:50.207
> 
> 标签：linux, qemu

我有一个运行在 KVM/QEMU 之上的 ARM 虚拟机，并有一个文件作为根文件系统挂载。虚拟机没有网络，所以 NFS 挂载根是不可能的。我正在测试一种特定的 IO 传输机制，所以我有点坚持我所拥有的。

我想将文件发送到来宾，所以我想将文件挂载到主机上，向其中写入内容，然后卸载它以强制刷新。文件系统的内容是微不足道的，我有一个备份，所以我没有损坏的问题。同样，性能也不是问题。

问题是，当我做这个 mount-write-unmount 事情时，客人永远看不到文件。我猜这是内核文件系统缓存的结果，当我执行 ls 时，文件不存在。我猜关于文件系统的元数据被缓存在内存中，并且文件系统的更新永远不会出现。

我猜如果我禁用文件系统缓存，那么所有读取都将被强制写入磁盘，导致文件系统被命中，并且我的文件出现。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:08:46.147

我能想到这个：

```
sync
echo 3 > /proc/sys/vm/drop_caches 
```

还有这个：

```
qemu -drive cache=none,file=file.img 
```

# android - 显示数据库中的图标

> ID：10127452
> 
> 赞同：0
> 
> 时间：2012-04-12T16:07:56.543
> 
> 标签：android, sqlite, icons, android-listview

`onCreate()`方法：

```
public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.database);

       ListView lv=(ListView)findViewById(R.id.mylist);    
       dbh = new DatabaseHelper(this);
       c = dbh.getReadableDatabase().rawQuery("SELECT _id, " + 
                        DatabaseHelper.NAME + 
                ", " + DatabaseHelper.LASTNAME + 
                ", " + DatabaseHelper.ans2 + 
                " FROM " +
                DatabaseHelper.TABLE_NAME, null); // initializing 

       String[] dataFrom ={DatabaseHelper.NAME, DatabaseHelper.LASTNAME, DatabaseHelper.ans2};
       int[] dataTo = {R.id.name, R.id.value1, R.id.value2};

       SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                    R.layout.row, c, dataFrom, dataTo);
       lv.setAdapter(adapter);
       registerForContextMenu(lv);

    } 
```

我的`row.xml`文件显示所有数据：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="left"
    android:layout_weight="30"
    android:id="@+id/name"
    />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
   android:layout_weight="40"
    android:gravity="center_horizontal"
    android:id="@+id/value1"
    />
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="30"
    android:gravity="right"
    android:id="@+id/value2"
    />

<ImageView
  android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   android:gravity="right"
   android:src="@drawable/ic_launcher"
   android:id="@+id/icon"
   />

</LinearLayout> 
```

我已经成功地用 SQLite 创建了一个表。我想在每个数据库行中显示一个图标，该图标将被显示（使用`ListView`），并且该图标应该取决于该行中的某个元素。例如，如果性别 ( `DatabaseHelper.SEX`) 是男性，那么我们将显示一个男性图标，如果性别是女性，我们将显示一个女性图标。如果您查看我的 xml 文件，我已经显示了一个图标（这是默认的 android 图标，但这不是我想要的）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:37:01.623

您可以创建自己的适配器（扩展`SimpleCursorAdapter`）并仅覆盖该`bindView()`方法并根据需要设置图标：

```
class CustomAdapter extends SimpleCursorAdapter {

    public CustomAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        // let the adapter fill the other items in the row
        super.bindView(view, context, cursor); 
       // find the icon in the list row
        ImageView icon = (ImageView) view.findViewById(R.id.icon); 
       // I don't know how you set up the DatabaseHelper.SEX column in your 
       //database, I assumed you have an int value, 0 for male and 1 for female
        int sex = cursor.getInt(cursor.getColumnIndex("sex"));
        if (sex == 0) {
                            //if male
            icon.setImageResource(R.drawable.male_icon);
        } else {
                            //if female
            icon.setImageResource(R.drawable.female_icon);
        }
    }

} 
```

为您使用此适配器`ListView`，当然不要忘记将`DatabaseHelper.SEX`列添加到查询中：

```
c = dbh.getReadableDatabase().rawQuery("SELECT _id, " + 
                        DatabaseHelper.NAME + 
                ", " + DatabaseHelper.LASTNAME + 
                ", " + DatabaseHelper.ans2 + ", " + DatabaseHelper.SEX +
                " FROM " +
                DatabaseHelper.TABLE_NAME, null); // initializing 
```

编辑：

或者您可以使用`ViewBinder`：

```
c = dbh.getReadableDatabase().rawQuery("SELECT _id, " + 
                        DatabaseHelper.NAME + 
                ", " + DatabaseHelper.LASTNAME + 
                ", " + DatabaseHelper.ans2 + ", " + DatabaseHelper.SEX + 
                " FROM " +
                DatabaseHelper.TABLE_NAME, null); // initializing 

       String[] dataFrom ={DatabaseHelper.NAME, DatabaseHelper.LASTNAME, DatabaseHelper.ans2, DatabaseHelper.SEX};
       int[] dataTo = {R.id.name, R.id.value1, R.id.value2, R.id.icon};

       SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                    R.layout.row, c, dataFrom, dataTo);
       adapter.setViewBinder(new ViewBinder(){

            @Override
            public boolean setViewValue(View view, Cursor cursor,
                    int columnIndex) {
                if (view.getId() == R.id.icon) {
                    int sex = cursor.getInt(columnIndex);
                    if (sex == 0) {
                        ((ImageView) view).setImageResource(R.drawable.male_icon);
                    } else if (sex == 1){
                        ((ImageView) view).setImageResource(R.drawable.female_icon);
                    }

                    return true;    
                } else {
                    return false;
                }

            }

        });
   lv.setAdapter(adapter); 
```

# wpf - 使用 ScrollBar WPF 调整 TextBox 内容

> ID：10127454
> 
> 赞同：0
> 
> 时间：2012-04-12T16:08:06.870
> 
> 标签：wpf, events, scrollbar

我正在使用 3.5 .Net 框架。我在堆栈面板中的滚动条旁边有一个文本框。我希望当用户单击滚动条的“向上”箭头时，文本框的内容会增加，而当单击滚动条的“向下”箭头时，文本框的内容会减少。问题是我不确定我需要触发哪个事件来执行此操作。我试过 MouseDown、MouseUp、PreviewMouseDown（它会触发，但我不知道如何区分是单击了向上箭头还是向下箭头）、PreviewMouseUp（同样的问题）、StylusUp、StylusDown、PreviewStylusDown、PreviewStylusUp、StylusButtonDown、StylusButtonUp 和的预览也。在调试时，我正在使用消息框让我知道我已输入该事件，但没有显示（PreviewMouseDown 除外）。对 WPF 相当陌生，

有谁知道我应该寻找哪个事件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:09:37.550

您不应该为此滥用 ScrollBar，而是创建一个带有两个按钮的新控件。

# java - 磁盘上的 Java 数组批量刷新

> ID：10127455
> 
> 赞同：3
> 
> 时间：2012-04-12T16:08:07.047
> 
> 标签：java, arrays

我有两个包含数百万个条目的数组（int 和 long）。到目前为止，我正在使用 DataOutputStream 并使用长缓冲区，因此磁盘 I/O 成本变低（nio 也或多或少与我有巨大的缓冲区相同，因此 I/O 访问成本低）具体来说，使用

```
DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream("abc.txt"),1024*1024*100));

for(int i = 0 ; i < 220000000 ; i++){
    long l = longarray[i];
    dos.writeLong(l);
} 
```

但要做到这一点需要几秒钟（超过 5 分钟）。实际上，我想要批量刷新（某种主内存到磁盘内存映射）。为此，我在[这里](http://www.cs.berkeley.edu/~bonachea/java/dist/doc/html/ti/io/BulkDataInputStream.html)和[这里](http://www.cs.berkeley.edu/~bonachea/java/dist/doc/html/ti/io/BulkDataOutputStream.html)找到了一个不错的方法。但是，无法理解如何在我的 javac 中使用它。任何人都可以帮我解决这个问题或以任何其他方式很好地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:47:26.357

在我的机器上，3.8 GHz i7 和 SSD

```
DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream("abc.txt"), 32 * 1024));

long start = System.nanoTime();
final int count = 220000000;
for (int i = 0; i < count; i++) {
    long l = i;
    dos.writeLong(l);
}
dos.close();
long time = System.nanoTime() - start;
System.out.printf("Took %.3f seconds to write %,d longs%n",
        time / 1e9, count); 
```

印刷

```
Took 11.706 seconds to write 220,000,000 longs 
```

* * *

使用内存映射文件

```
final int count = 220000000;

final FileChannel channel = new RandomAccessFile("abc.txt", "rw").getChannel();
MappedByteBuffer mbb = channel.map(FileChannel.MapMode.READ_WRITE, 0, count * 8);
mbb.order(ByteOrder.nativeOrder());

long start = System.nanoTime();
for (int i = 0; i < count; i++) {
    long l = i;
    mbb.putLong(l);
}
channel.close();
long time = System.nanoTime() - start;
System.out.printf("Took %.3f seconds to write %,d longs%n",
        time / 1e9, count);

// Only works on Sun/HotSpot/OpenJDK to deallocate buffer.
((DirectBuffer) mbb).cleaner().clean();

final FileChannel channel2 = new RandomAccessFile("abc.txt", "r").getChannel();
MappedByteBuffer mbb2 = channel2.map(FileChannel.MapMode.READ_ONLY, 0, channel2.size());
mbb2.order(ByteOrder.nativeOrder());
assert mbb2.remaining() == count * 8;
long start2 = System.nanoTime();
for (int i = 0; i < count; i++) {
    long l = mbb2.getLong();
    if (i != l)
        throw new AssertionError("Expected "+i+" but got "+l);
}
channel.close();
long time2 = System.nanoTime() - start2;
System.out.printf("Took %.3f seconds to read %,d longs%n",
        time2 / 1e9, count);

// Only works on Sun/HotSpot/OpenJDK to deallocate buffer.
((DirectBuffer) mbb2).cleaner().clean(); 
```

在我的 3.8 GHz i7 上打印。

```
Took 0.568 seconds to write 220,000,000 longs 
```

在较慢的机器上打印

```
Took 1.180 seconds to write 220,000,000 longs
Took 0.990 seconds to read 220,000,000 longs 
```

* * *

> 这里有没有其他方法可以不创建它？因为我的主内存上已经有那个数组，我不能分配超过 500 MB 的空间来做到这一点？

这不使用少于 1 KB 的堆。如果您查看在此调用之前和之后使用了多少内存，您通常会发现根本没有增加。

> 另一件事，这是否提供了有效的加载也意味着 MappedByteBuffer？

根据我的经验，使用内存映射文件是迄今为止最快的，因为您减少了系统调用和复制到内存的次数。

> 因为，在一些文章中我发现 read(buffer) 这提供了更好的加载性能。（我检查了一个，真正更快的 2.2 亿 int 数组 -float 数组读取 5 秒）

我想读那篇文章，因为我从未见过。

> 另一个问题：readLong 在读取代码输出文件时出错

证明的部分性能是以本机字节顺序存储值。writeLong/readLong 总是使用大端格式，这在英特尔/AMD 系统上要慢得多，这些系统本身就是小端格式。

您可以将字节顺序设为大端，这会减慢速度，或者您可以使用本机排序（DataInput/OutputStream 仅支持大端）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:46:13.553

> 我正在使用 16GB 内存和 2.13 GhZ [CPU] 运行它的服务器

我怀疑这个问题与您的 Java 代码有关。

您的文件系统似乎非常慢（*至少*比本地磁盘所期望的慢十倍）。

我会做两件事：

1.  仔细检查您实际上是在写入本地磁盘，而不是网络共享。请记住，在某些环境中，主目录是 NFS 挂载。
2.  请您的系统管理员查看机器，找出磁盘如此缓慢的原因。如果我站在他们的立场上，我会先检查日志并运行一些基准测试（例如使用[Bonnie++](http://www.coker.com.au/bonnie++/)）。

# javascript - 如何验证手机号码

> ID：10127457
> 
> 赞同：0
> 
> 时间：2012-04-12T16:08:13.047
> 
> 标签：javascript

我必须验证手机号码，我的要求是：

1.filed 不能为空 2.如果用户输入字母值，它会弹出“不允许使用字母” 3\. 字段必须以“+”号开头 4.如果提交的值小于 13，它会弹出“请输入有效”电话号码”

我正在使用此代码..

```
function validateForm()
{

    var cell = document.reg_form.cellno.value;
            if(cell.length==0) 
            {
                alert("Please enter cell number");
                reg_form.cellno.focus();
                return false;
            }

           if(isNaN(cell)||cell.indexOf(" ")!=-1)
              {
                 alert("Enter numeric value")
                 return false; 
              }

            if (cell.charAt(0)!="+")
              {
                alert("Cell no should start with +");
                return false
              }

                if(cell.length < 13) 
               {
              alert("You have entered wrong number");
              reg_form.cellno.focus();
              return false;
        }
return true;
} 
```

当我输入数值时，某些代码在这里不起作用..当我输入 {+} 符号时，它显示 {"Cell no should start with "+"} 它说当我只输入像 {9} 这样的单个数值时请输入数值它继续前进..虽然这样字段只有2个值“+”和“9”..它应该弹出{“你输入了错误的数字”}

请告诉我我在哪里犯了错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:02:24.543

```
function validateForm()
{
     var cell=document.reg_form.cellno.value;
     var msg="";
     if(cell.length==0) 
     {
         msg="Please enter cell number";
         alert(msg);
         reg_form.cellno.focus();
         return false;
     }

     if(isNaN(cell)) msg+="\nEnter numeric value";
     if (cell.charAt(0)!="+") msg+="\nCell no should start with +";
     if(cell.length != 13) msg+="\nCell number must be within 13 characters";
     if(msg) 
     {
         alert((msg));
         reg_form.cellno.focus();
         return false;
     }
     return true;  
} 
```

[**一个例子是here**](http://jsfiddle.net/heera/7tHRt/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:17:13.790

仅匹配加号和 12 位数字的正则表达式：

```
function validateForm(){
    var cell = document.reg_form.cellno;
     return  /^\+\d{12}$/.test(cell.value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:19:15.723

如果值长于 13，您将单元格长度与 13 的比较返回 true（和警报）。我怀疑您想要

```
if(cell.length < 13) 
```

# javascript - AJAX 无法始终如一地工作

> ID：10127463
> 
> 赞同：0
> 
> 时间：2012-04-12T16:08:21.233
> 
> 标签：javascript, ajax

我花了一段时间试图弄清楚这一点。我确信具有正确经验的人将能够看到这个问题，但我只是不明白为什么它不能始终如一地工作。

基本上，这一切都是打两个电话。页面加载时它会得到一个数字。然后，当用户提交表单时，它会进行第二次调用，这会告诉我的 PHP 文件将当前提交的总数加 1。

它在大多数情况下都有效，甚至在 IE7 和 IE8 中似乎也适用于我（有点——它似乎以某种方式缓存了数字，所以你只能知道它是从不同的浏览器更新的）。

编辑：我只使用 IE9 的开发工具测试了 IE7 和 IE8，还没有尝试过自己实际安装这些工具。

```
$(document).ready(function() {

  var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest;
      var url = "counter.php?myaction=getcount";
      request.open('GET', url, true);
      request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      updateCounter(request.responseText);
    }
  };
  request.send(null);

});

    function doNothing() {};

    function addCount() {

  var request2 = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest;
      var url2 = "counter.php?myaction=addcount";
      request2.open('GET', url2, true);
      request2.onreadystatechange = function() {
    if (request2.readyState == 4) {
      request2.onreadystatechange = doNothing;
      updateCounter(request2.responseText);
              $('#stcPetitionForm').submit();
    }
  };
  request2.send(null);     

    }

    function updateCounter(numSubmissions) {
            $("#myCounter").html("<p>" + numSubmissions + "</p>");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:35:16.417

这是一个相当有据可查的问题。[如何防止浏览器中的 Ajax/javascript 结果缓存？](https://stackoverflow.com/questions/948828/how-to-prevent-ajax-javascript-result-caching-in-browsers)提供了一些您可以尝试的好解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:20:45.827

GET 请求被缓存。你在服务器端没有设置缓存头吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:43:37.713

这是因为 GET 请求被缓存了。

如何避免缓存的示例：

*   ```
    var d    = new Date();
    var url2 = "counter.php?myaction=addcount&time=' + d.getTime();
    // you'd apply to all your url's not just url2 
    ```

演示 getTime：

*   ```
    function postTime(){
       var d = new Date();
       console.log(d.getTime());
    }

    setInterval(postTime,1000); 
    ```

# javascript - 使用Javascript查找文件夹中的所有图像

> ID：10127464
> 
> 赞同：4
> 
> 时间：2012-04-12T16:08:24.997
> 
> 标签：javascript, jquery, image, file, path

对不起，如果这是微不足道的，

编辑：简而言之，我发现这真的不打算用客户端 JavaScript 来完成。

我想知道我是否知道一个文件夹有图片。/home/project1/pictures 并且它们遵循一些命名约定 face102039.jpg face1030303.jpg ...

有没有办法知道那里的每张照片都是从人脸开始的，但不知道后面是什么数字？就像有没有一种方法可以让我获取所有带有 .jpg 或 .png 扩展名的文件名，然后我就会知道如何解析它们的字符串。我只是不确定如何使用 javascript 获取目录中的所有文件。

我看到了这个[类似的帖子](https://stackoverflow.com/questions/2089514/how-to-know-and-load-all-images-in-a-specific-folder)，我知道如何在 Java 中做我想做的事，但我找不到在 javascript 中做到这一点的方法。我正在考虑用 java 或 ruby​​ 做服务器端，但我很确定我应该能够通过 javascript 做这个客户端。也许我错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:26:41.053

鉴于限制，在技术上可以做到这一点，只是不太实用。我不建议使用它，因为您可以很快锁定用户的浏览器。

```
var len = 2000000;//How long you want to wait.
var pics=[];
for(var i=0;i<len;i++){
  a=new Image();
  a.onload=function(){
    pics.push(this);
  }
  a.src='/home/project1/pictures/face'+i+'.jpg';
} 
```

真正的答案是您需要在 PHP、RoR 等中实现后端。向您发送图片文件夹中的文件列表。这可以通过 AJAX 完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:12:32.047

Javascript 在客户端运行。例如在访问者的浏览器中。它不能像 Java 和 php 那样直接访问服务器和图像文件夹。

可以做的是在 javascript 中使用 ajax 来获取列出目录内容的 java/php 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T16:12:32.680

您无法使用`JavaScript`. 但是，您可以使用`AJAX`查询服务器以获取该信息并将其作为 JSON 字符串返回。

希望这可以帮助。

# iphone - 如果设备长时间无法访问，APNS 是否会将设备令牌添加到反馈服务器？

> ID：10127466
> 
> 赞同：0
> 
> 时间：2012-04-12T16:08:33.810
> 
> 标签：iphone

如果我出国度假一个月并且我的 iPhone 没有数据/Wifi 连接，或者我长时间关闭手机，在这两种情况下，APNS 都无法向我的 iPhone 发送推送通知。我的问题是，APNS 会认为设备令牌是“坏的”，因此将其添加到反馈服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:39:01.423

不，它没有。

1.  您向 APNS 发送通知
2.  APNS 向每台设备发送通知
3.  如果设备拒绝通知（卸载的应用程序，...），设备会通知 APNS

从 ：

如果提供者尝试向应用程序发送推送通知，但该应用程序不再存在于设备上，**则设备会将这一事实报告给 Apple Push Notification Service**。这种情况经常发生在用户卸载应用程序时。如果**设备报告应用程序的交付**尝试失败，APNs 需要某种方式通知提供者，以便它可以避免向该设备发送通知。这样做可以减少不必要的消息开销并提高整体系统性能。

# database - 这是糟糕的数据库设计吗？

> ID：10127467
> 
> 赞同：0
> 
> 时间：2012-04-12T16:08:38.810
> 
> 标签：database

我有一个存储所提供服务的表，另一个是服务的子表，并存储带有价格、间隔（1h、1m 等）的实际服务。
问题是每个子服务都有一些相关的上限（50~）。
所以我认为 service_cap (child_service_id,cap_id,value) 会起作用。问题是该值可能是数字（0-）或“无限”或（可用，不可用，视情况而定）。

我认为我可以用负值表示这些状态，否则它将是一个数字......

有人告诉我这是 EAV，很糟糕，但我想不出替代方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:15:37.407

您可以在表中包含两列，例如`cap_value`和`cap_type`（选择您自己的更好的名称）`service_cap`。`cap_type`可以处理服务是否可用、不可用、主题或无限制的逻辑。您可以有更多的状态选项。然后，您可以将 限制`cap_value`为仅具有某个值`interval_types`。

因此，无限制和不可用应该有一个空/空值`cap_type`。其他的可以存储所需的上限。

# php - RewriteRule 导致 500 内部服务器错误

> ID：10127468
> 
> 赞同：0
> 
> 时间：2012-04-12T16:08:39.227
> 
> 标签：php, apache, mod-rewrite, internal

我一直在托管服务器上开发网上商店，它的工作原理很吸引人，现在我决定在 WAMP 中本地开发它，但是我的 htaccess 文件给出了错误 500。

我的代码：

```
RewriteEngine On
Options +FollowSymLinks

RewriteRule ^([a-zA-Z0-9\-]+)/?$ index.php?page=$1 [L,QSA]

RewriteCond %{REQUEST_URI} artikl
RewriteRule ^artikl/([0-9\-]+)/([a-zA-Z0-9ŠšŽžđĐČčĆć\-]+)/?$ index.php?page=artikl&id=$1&name=$2 [L]

RewriteCond %{REQUEST_URI} kategorija
RewriteRule ^kategorija/([0-9\-]+)/([a-zA-Z0-9ŠšŽžđĐČčĆć\-]+)/?$ index.php?page=kategorija&id=$1&name=$2 [L,QSA] 
```

当我排除“artikl”和“kategorija”的重写规则时，不显示错误并且页面加载。

那么，关于为什么这个错误会出现在这里的任何想法？以及如何解决？

先感谢您，

马里奥

# ffmpeg - FFmpeg：比特率动态变化

> ID：10127470
> 
> 赞同：1
> 
> 时间：2012-04-12T16:08:41.113
> 
> 标签：ffmpeg, encode, bitrate

我阅读了上一个帖子，这是来自 NISHAnT, [FFMPEG: Dynamic change of bit_rate for Video](https://stackoverflow.com/questions/10074822/ffmpeg-dynamic-change-of-bit-rate-for-video)

```
 avcodec_init();

 avcodec_register_all();

 codec = avcodec_find_encoder(CODEC_ID_H263);

 c = avcodec_alloc_context();

 picture= avcodec_alloc_frame();

    c->bit_rate = bitrate;
    c->width = w;
    c->height = h;
    c->time_base= (AVRational){1,framerate};
    c->pix_fmt = PIX_FMT_YUV420P;

 avcodec_close(c);

 av_free(c); 
```

这是我的代码：

```
 if(previous_BR != cur_BR){
        previous_BR = cur_BR;

        AVCodecContext* new_c = av_mallocz(sizeof(AVCodecContext));;

        avcodec_copy_context(new_c, ost_table[0]->st->codec);

        avcodec_close(ost_table[0]->st->codec);
        av_free(ost_table[0]->st->codec);

        avcodec_init();
        avcodec_register_all();

        ost_table[0]->enc = avcodec_find_encoder(CODEC_ID_H264);
        new_c = avcodec_alloc_context3(ost_table[0]->enc);
        ost_table[0]->st->codec = new_c;

        AVFrame *picture= avcodec_alloc_frame();

        new_c->bit_rate = cur_BR;
        new_c->width = 352;
        new_c->height = 288;
        int framerate = 30;
        new_c->time_base= (AVRational){1,framerate};
        new_c->pix_fmt = PIX_FMT_YUV420P;
        new_c->codec_type = AVMEDIA_TYPE_VIDEO;
        new_c->codec_id = CODEC_ID_H264;} 
```

* * *

我试图将我的代码添加到 transcode()，但 ffmpeg 在通过我的代码后退出。我的代码有问题吗？或者我还应该添加什么？

我把代码放在“redo:”之后，这样它就会递归循环回来。请帮忙 ！！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:48:43.410

c 是[AVCodecContext](http://ffmpeg.org/doxygen/0.6/structAVCodecContext.html)结构。您必须首先为您正在播放的文件类型配置 ffmpeg。通过在 ffmpeg 根目录中配置第一个 build.sh 文件来构建它。对于文件类型，您必须配置 codec9coder-decoder) 和 muxer/demuxer。例如，要播放 avi 文件，您必须为 avi 配置 muxer/demuxer 和编解码器，分别为 MPEG "AVI" 和 "MPEG4"。

# java - Servlet 过滤器：非常简单的限速过滤器，允许突发

> ID：10127472
> 
> 赞同：3
> 
> 时间：2012-04-12T16:08:45.100
> 
> 标签：java, tomcat, servlet-filters, rate-limiting

我想添加一个非常简单的过滤器，执行每个 IP 的速率限制，但仍然允许突发，有点像*iptables*允许做的事情。

我不想安装整个厨房水槽：我只需要一个实现该功能的过滤器类。

什么是一个好的数据结构/算法，允许做一个简单的“限速但允许短突发”？

例如，如果用户每分钟尝试执行超过 'x' GET / POST ，我想提供一个 HTTP 错误代码，但我仍然想让同一用户“爆发”到 'y'（其中 y > x) 直到他击中爆裂帽。

只是为了比较，这里是如何使用*iptables*配置类似的速率限制与突发（这只是一个示例，以显示我在说什么，即使在我的情况下它不是关于设置速率限制+在 TCP SYN 数据包上突发）：

```
iptables -A INPUT -p tcp --syn -m limit --limit 1/s --limit-burst 5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T09:40:35.430

在**Java**级别：

*   找到了一个基于[Esper](https://gist.github.com/1755249)的速率限制器，您可以在其中构建自己的查询来匹配您的突发需求。
*   Jetty 有一个内置的 servlet[过滤器](http://grepcode.com/file/repo1.maven.org/maven2/org.eclipse.jetty/jetty-servlets/9.3.2.v20150730/org/eclipse/jetty/servlets/DoSFilter.java#DoSFilter)
*   一个带有内置[块](https://github.com/jabley/rate-limit)的 Java 库，用于创建您自己的机制
*   [骆驼](http://camel.apache.org/throttler.html)有节流机构

**但我认为在网络服务器**级别实现起来更容易

*   [Nginx](http://tumblr.jonthornton.com/post/641219929/rate-limiting-with-nginx)
*   [Apache Httpd](https://stackoverflow.com/questions/131681/how-can-i-implement-rate-limiting-with-apache-requests-per-second)

或使用专用**服务器插件**

*   [IBM WebSphere DataPower](http://www.ibm.com/developerworks/websphere/library/techarticles/0712_sheikh/0712_sheikh.html#Rate%20limiting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T11:35:07.050

您还可以查看 Guava [RateLimiter](https://google.github.io/guava/releases/19.0/api/docs/index.html?com/google/common/util/concurrent/RateLimiter.html) - 它为更复杂的速率限制器提供了一个很好的起点。

# image-processing - 如何在图像中找到矩形的角坐标

> ID：10127475
> 
> 赞同：3
> 
> 时间：2012-04-12T16:09:15.770
> 
> 标签：image-processing

我在预处理原始图像后得到了这个图像。现在，我的问题是如何获得矩形的四个角坐标（最大）。对不起，如果这是一个菜鸟问题。

![在此处输入图像描述](../Images/07b79c8cea024c25a3d355bb726907e1.png)

更新：由于我正在使用 OpenCV 进行开发，因此最终使用了[这个答案](https://stackoverflow.com/a/9841459/1194873)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T16:52:12.263

One simple way would be to:

1.  find all connected components
2.  calculate the convex hull for each component
3.  pick the component where the convex hull has the largest area
4.  simplify the convex hull polygon
5.  the vertices of the simplified polygon are the points you're looking for

Quick&dirty Mathematica solution:

```
(* find all connected components, calculate the convex hull for each component *)
convexHulls = ComponentMeasurements[ColorNegate[Binarize[src]], {"ConvexArea", "ConvexVertices"}];

(* pick the component where the convex hull has the largest area *)
vertices = SortBy[convexHulls[[All, 2]], First][[-1, 2]]

(* simplify the convex hull polygon, by iteratively removing the vertex with the lowest distance to the line through the vertex before and after it *)
distanceToNeighbors[vertices_] := MapThread[Abs[(#1 - #2).Cross[#1 - #3]/Norm[#1 - #3]]&, RotateLeft[vertices, #] & /@ {-1, 0, 1}]
removeVertexWithLowestDistance[vertices_] := With[{removeIndex = Ordering[distanceToNeighbors[vertices], 1]}, Drop[vertices, removeIndex]]
verticesSimplified = NestWhile[removeVertexWithLowestDistance, vertices, Min[distanceToNeighbors[#]] < 10&]

(* the vertices of the simplified polygon are the points you're looking for *)
Show[src, Graphics[
  {
   {EdgeForm[Red], Transparent, Polygon[verticesSimplified]},
   {Red, PointSize[Large], Point[verticesSimplified]}
   }]] 
```

![Result](../Images/8ff13a79065b9730e567d04d946a6a82.png)

# android - 为 iptables 下载 Android 内核

> ID：10127490
> 
> 赞同：0
> 
> 时间：2012-04-12T16:10:03.430
> 
> 标签：android, git, repository

我正在尝试为模拟器下载 android 的内核源代码，以便我可以运行 iptables nat 命令并玩耍。

我得到了 android 4.1 源并编译了它们。现在我正在尝试使用以下方式下载内核： git clone git://android.git.kernel.org/kernel/common.git kernel

它返回以下错误：

在 /home/mydir/WORKING_DIRECTORY/kernel/.git/ android.git.kernel.org[0: 149.20.4.77] 中初始化空的 Git 存储库：errno=Connection denied 致命：无法连接套接字（连接被拒绝）

任何的想法？

我已经下载了 repo 脚本来下载 android 源代码，所以我尝试添加

在 .repo 下的 manifest.xml 中，然后我做了：

回购同步

但是，这再次导致与上述相同的错误。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:14:12.507

下载自：

git 克隆[https://android.googlesource.com/kernel/common.git](https://android.googlesource.com/kernel/common.git)

工作！

# visual-studio-2010 - 如何将我的 MVC 3 Web 应用程序发布到 IIS7

> ID：10127491
> 
> 赞同：6
> 
> 时间：2012-04-12T16:10:06.157
> 
> 标签：visual-studio-2010, asp.net-mvc-3, web-applications, publish

如果可能的话，我从一开始就需要关于如何让我的 ASP.Net MVC 3 Razor Visual Studio 10 Web 应用程序在我的 IIS 7 网络服务器上运行的完全初学者建议？

我以前从未尝试过发布此内容，想知道我错过了什么？

我在 Visual Studio Express 10 上单击了“发布”，创建了网站的“发布”版本。我已经将它上传到我的网络服务器，但是不能让它加载到网络上？

请欣赏一些指导？（不知道如何/什么默认文件工作等等......？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:11:40.933

到目前为止，最简单的方法是使用 Web 应用程序部署。

Scott Gu 的这个博客给出了很好的介绍

[http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)

这篇文章讨论了 web.config 转换（能够拥有 web.config 的 .Release 和 .Debug 版本）。后来，该功能通过一个附加包进行了推广，适用于部署中的任何 XML 结构文件（例如，我将它与 NLog 配置文件一起使用）。

[http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

# html - 捕获输入类型=文件的取消事件

> ID：10127492
> 
> 赞同：8
> 
> 时间：2012-04-12T16:10:08.143
> 
> 标签：html

我有一个使用文件 API 的 html5 应用程序，它使用一个元素。当用户选择文件时，我能够做出响应。如果用户取消文件选择，我希望能够做一些事情。但是，如果用户单击文件选择器对话框中的取消而不是确定按钮，我找不到在输入元素上触发的事件。

是否有一些在“取消”时触发的事件我错过了，或者我应该重新构建我的应用程序以不需要这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T20:18:50.303

当用户单击取消时，更改事件再次触发。那对我有用；

```
 $('#attachedFiles').bind("change", function () {
            var file = this.files[0];
            if (file) {
                // if file selected, do something
            } else {
                // if user clicks 'Cancel', do something
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:42:10.777

没有真正的侦听器来检查是否选择了文件，您可以通过使用 on change 事件在代码中设置注释来绕过它，如下所示：

```
var FileChoosen = false;

var inputElement = document.getElementById("inputField");
inputElement.addEventListener("change", handleFiles, false);
function handleFiles() {
  var fileList = this.files; /* now you can work with the file list */

  //Check if the layout was changed from file API:
  if(document.getElementById('fileOutput').innerHTML != "") {
    FileChoosen = true;
    setTimeout("funcCalledToCheckUserSelection()", 500);
  };

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T12:22:50.477

我有同样的问题，解决方案非常简单......至少在我的情况下，如果用户单击文件选择器对话框中的 [取消] 按钮，NW.js (Node-Webkit) 会触发 oncancel 事件。如果您也在使用 NW.js（process.version 为 v5.11.0），则可以使用这种简单且原生的方式。

我还在 Windows 10 上尝试了 Microsoft HTA，它不会触发 oncancel 事件。

# c# - 当 Npgsql 连接池达到 Max 时会发生什么

> ID：10127493
> 
> 赞同：7
> 
> 时间：2012-04-12T16:10:13.213
> 
> 标签：c#, npgsql

连接字符串参数的名称和这篇博文 - [http://fxjr.blogspot.co.uk/2010/04/npgsql-connection-pool-explained.html](http://fxjr.blogspot.co.uk/2010/04/npgsql-connection-pool-explained.html) - 让我相信 Npgsql 不会超过 MaxPoolSize 值在连接字符串中设置。但是文档（http://npgsql.projects.postgresql.org/docs/manual/UserManual.html）说“连接池的最大大小。如果池包含的连接池超过此池，则池化连接将在返回池时被处理连接数。默认值：20"

这表明池实际上可以增长到大于 MaxPoolSize 并且实际上只是 Npgsql 在返回连接后开始积极地从池中删除连接的级别。

我一直在寻找答案，但我可以确切地知道当你达到 MaxPoolSize 时会发生什么。还有人知道吗？

编辑：我应该补充一点，我们正在使用 Npgsql 2.0.6.0，因为仅支持该版本的另一个依赖项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:25:21.897

我认为这可能是关于 minpoolsize 的复制粘贴问题。Npgsql 不会创建超过 maxpoolsize 的连接。当达到这个值时，新的连接请求会排队，直到有空闲的请求。

您取决于哪个问题仅适用于 2.0.6？

# razor - 使用 MVC4 在 Razor 中为 Asp.Net 角色创建复选框

> ID：10127494
> 
> 赞同：0
> 
> 时间：2012-04-12T16:10:15.950
> 
> 标签：razor, html-helper, roles, asp.net-mvc-4, checkboxfor

以下帖子中的答案：

[具有角色 MVC3 的注册表单，错误：ViewData 项的类型为“system.sting”必须为“IEnumerable<selectlistitem>](https://stackoverflow.com/questions/8741869/registration-form-with-roles-mvc3-error-viewdata-item-is-of-type-system-sting)

为我工作很棒。但是，如果我必须将用户分配到 Asp .Net 角色列表，这将如何改变？

我希望能够遍历可用角色列表并呈现复选框，当用户从模型中单击更新时，如何查看用户分配给的角色？（我希望这个问题有意义）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:59:11.657

好的，我在不使用 html 助手的情况下解决了它。 **我仍在寻找 HTML 助手的答案**:)。

模型

```
 public class RolesModel
    {
      public string Email { get; set; }
      public string[] Roles { get; set; }
    } 
```

启动视图的控制器代码

```
 public Action Result ShowRoles()
    {
      model.Roles = Roles.GetAllRoles();
    } 
```

剃刀视图

```
 @foreach (string role in Model.Roles)
    {
      <input type="checkbox" name="Roles" value="@role" checked="@Roles.IsUserInRole(@role)"       />@role
    } 
```

更新视图的控制器代码

```
 public ActionResult AccountManagement()
    {
      if (Roles.GetRolesForUser().Length > 0 )
        Roles.RemoveUserFromRoles(model.Email, Roles.GetRolesForUser());

      if (model.Roles != null && model.Roles.Length > 0)
        Roles.AddUserToRoles(model.Email, model.Roles);
    } 
```

与往常一样，如果有更清洁/更好的方法，请告诉我。

# c# - c# 功能中的 fscanf() 等效项

> ID：10127495
> 
> 赞同：0
> 
> 时间：2012-04-12T16:10:18.263
> 
> 标签：c#, c++, scanf

我有用 c++ 语言编写的代码。代码部分是：

```
fscanf(filename,"%ld%*[^\n]\n", x);

fscanf(filename,"%ld%*[^\n]\n", y);

fscanf(filename,"%lf%*[^\n]\n", z);

fscanf(filename,"%lf%*[^\n]\n", q);

fscanf(filename,"%lf%*[^\n]\n", w);

fscanf(filename,"%[^#]%*[^\n]\n", r); 
```

我知道这是c ++中的一种拆分行为，按给定文件中的数据类型？如果有办法在 c# 中做同样的事情？或者可能有实现此类功能但使用其他代码和功能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:19:41.633

我相信 .NET 中没有等价物。

但是有人努力实施类似的东西。例如： http: [//www.blackbeltcoder.com/Articles/strings/a-sscanf-replacement-for-net](http://www.blackbeltcoder.com/Articles/strings/a-sscanf-replacement-for-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:18:18.983

你真的在数字和行尾之间有垃圾吗？如果没有，请放弃下面代码中的 Join 和 TakeWhile 子句：

```
 using(var reader = new StreamReader(filename))
        {
            var x = long.Parse(string.Join("", reader.ReadLine().TakeWhile(char.IsDigit)));
        } 
```

带有 "^\d+" 模式的 Regex.Match 也可能是合适的。

# sql - APEX Web App 中的 AD HOC SQL 查询区域

> ID：10127499
> 
> 赞同：0
> 
> 时间：2012-04-12T16:10:35.797
> 
> 标签：sql, plsql, oracle-apex, adhoc

我正在尝试创建一个临时 sql 文本区域来执行最终用户将输入的任何查询。我收到以下错误消息：发生 1 个错误•ORA-06550：第 5 行，第 1 列：PLS-00372 ：在过程中，RETURN 语句不能包含表达式 ORA-06550：第 5 行，第 1 列：PL/SQL：语句被忽略

我为查询区域 P2_X 创建了一个项目和一个按钮来执行它。

```
DECLARE
v_sql   VARCHAR2 (4000);
BEGIN
v_sql := :P2_X;
return v_sql;
END; 
```

我究竟做错了什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:26:36.143

这确实有效。您显示的代码位于 SQL 报告区域的源代码中。您还需要选择“通用列”： ![在此处输入图像描述](../Images/04216bfcd6e91dd4a39cba5a2a32e7cf.png)

# javascript - YUI 数据表到 JS 对象

> ID：10127500
> 
> 赞同：-1
> 
> 时间：2012-04-12T16:10:43.703
> 
> 标签：javascript, datatable, yui, yahoo

我有个问题。我有 YUI DataTable，我需要将它转换为 JS 对象。但是我没有找到标准的方法。如果有人知道，如何解决这个问题 - 请回答。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:53:50.593

Since YUI 3.5.0 you just need to do `datatable.get('data').toJSON()`. `datatable.get('data')` now returns a `Y.ModelList` which in turn has a `toJSON` method.

# jquery - 基本切换功能的 jQuery 代码重构

> ID：10127501
> 
> 赞同：2
> 
> 时间：2012-04-12T16:10:45.923
> 
> 标签：jquery, refactoring, toggle

我对 jQuery 很陌生，这是我在 Stack Overflow 上的第一篇文章。

我正在编写一个切换脚本，如果单击了几个（但不是全部）表格单元格，该脚本将切换其下方 tr 的可见性，并在其中一个单元格内的 div 上执行更改类以显示加号/减号图标。我希望简化我的脚本和 HTML，或者获得有关如何使其变得更好的一般指示。

jQuery如下：

```
$(function() {

/************************************************************/
// Show/Hide functionality

   $('.showDetails', '#summaryTable').hide();

   $('#summaryTable').on('click', '.toggleIt', function(e){

   var $this = $(this).parents("tr");

   $this.next().toggle(0, function() {
        var rowExpand = $('.rowExpand', $this);
        rowExpand.toggleClass('rowContract');
     });
  });

/************************************************************/

}); 
```

HTML如下：

```
<table id="summaryTable">

<thead>
<tr>
...
</tr>
</thead>

<tbody>

<tr>
<td class="toggleIt"><div class="rowExpand">Expand/Contract details</div></td>
<td class="toggleIt">Content</td>
<td class="toggleIt">Content</td>
<td>*input field*</td>
<td class="toggleIt">Content</td>
<td class="toggleIt">Content</td>
<td>*Trash can icon*</td>
</tr>

<tr class="showDetails">
<td colspan="7" class="expand">

   <div>
     Content to be shown when toggled...
   </div>

</td>
</tr>

<!-- Rinse and repeat -->

</tbody>

</table> 
```

注意单元格上的所有这些 toggleIt 类，可以单击并让 tr 展开？似乎我应该能够只在我不希望表格在单击时展开的表格单元格上放置一个类。（输入字段和垃圾桶单元格。）

欢迎任何想法或建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:17:08.797

您可以通过使用 :not 选择器 (http://api.jquery.com/not-selector/) 来做到这一点，例如

```
$("td:not(.toggleDisabled)").each(function(){$(this).click(function(){$(this).toggle()})}) 
```

# java - 带有抽象方法的 Java 继承

> ID：10127502
> 
> 赞同：2
> 
> 时间：2012-04-12T16:10:57.083
> 
> 标签：java, generics, inheritance, polymorphism, abstract-class

我有很多“表单”类，所有这些类都扩展了`Form`. 我有一个名为的抽象类`FormService`和扩展此类的特定表单服务。我想要做的是调用一个抽象方法`populate()`，它采用一种形式，从而通过继承为给定类型调用正确的服务。

所以我有类似的东西：

```
public abstract FormService {
    public abstract void populate(Form form);
}

public TestFormService extends FormService {
    public void populate(TestForm form) {
      //populate
    } 
```

`TestForm`扩展的类型在哪里`Form`。这是可能的，因为我似乎无法获得我想要的效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T16:13:34.300

您可以使用泛型：

```
public abstract FormService<F extends Form> {
    public abstract void populate(F form);
}

public TestFormService extends FormService<TestForm> {
    @Override
    public void populate(TestForm form) {
      //populate
    }
} 
```

请注意，[`@Override`](http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html)此处的使用只是一种很好的做法，但与问题无关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-30T11:02:45.877

是的，这是可能的。正如在子类中重写方法时，始终可以使用父类方法中声明为参数的超类的子类。在此示例中，因为 testForm 是 Form 类的子类，所以这将起作用。拇指规则是在覆盖时我们总是可以限制层次结构但不能扩大层次结构。

假设Form类的父类是Document。在 TestFormService 类填充方法中，我们不能使用 Document 作为参数。这将违反最重要的规则。

# java - Keylisteners/Actionlisteners with Timer 无法正常工作

> ID：10127505
> 
> 赞同：1
> 
> 时间：2012-04-12T16:11:08.370
> 
> 标签：java, swing, actionlistener, keylistener

我正在编写一个游戏，我正在使用 Java 的 Swing。现在我正试图让 KeyListeners 和 Action 监听器工作。

我想要做的是让我的对象根据我按下的键移动。（左，右，上，下），但由于某种原因，当我按下这些键中的任何一个时，什么都没有发生，但是当我同时按下其中的 3 个键时。物体奇怪地向左移动..

所以这是我创建 Runner 对象的类的代码：

```
import java.awt.*;

public class Runner{
    private int xpos, ypos, base, side;

    public Runner(int b, int h ) {
        base = b;
        side = h;
    }
    public void setPosition(int x, int y){
        xpos = x;
        ypos = y;
    }
    public void view(Graphics g) {
        int x[] = { xpos, xpos-base/2, xpos + base/2};
        int y[] = { ypos, ypos + side, ypos + side };
        g.setColor(Color.lightGray);
        g.fillPolygon( x, y, 3 );
        g.setColor(Color.darkGray);
        g.drawLine(xpos, ypos, xpos, ypos + side);
    }
    public void shoot(Graphics g){
        g.setColor(Color.red);
        g.drawLine(xpos,ypos, xpos, 0);
    }
} 
```

这是假设运行该死的东西的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class RunningGame extends JPanel implements KeyListener, ActionListener{
    Runner rs;
    int x,y;
    Timer t;
    boolean shot = false;
    boolean left = false, right = false, up = false, down = false;

    public RunningGame() {
        x = 100;
        y = 150;
        rs = new Runner(40,60);
        rs.setPosition(x,y);
        this.addKeyListener(this);
        this.setBackground(Color.black);
        t = new Timer(40, this);
        t.start();
    }
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        rs.view(g);
        if(shot) rs.shoot(g);
    }
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == 37) {left = true;}
        if (e.getKeyCode() == 39) {right = true;}
        if (e.getKeyCode() == 38) {up = true;}
        if (e.getKeyCode() == 40) {down = true;}
        if (e.getKeyCode() == 32) {shot = true;}

        rs.setPosition(x,y);
        this.repaint();
}
    public void keyReleased(KeyEvent e){
        if (e.getKeyCode() == 37) left = false;
        if (e.getKeyCode() == 39) right = false;
        if (e.getKeyCode() == 38) up = false;
        if (e.getKeyCode() == 40) down = false;
        if (e.getKeyCode() == 32) shot = false;
        this.repaint();
    }
public void keyTyped(KeyEvent e){}
    public void actionPerformed(ActionEvent e) {
        if (left) {
            if(right){
                right = false;
                x = x - 10; shot = false;
            }
        }
        if (right) {
            if(left){
            left = false;
            x = x + 10; shot = false;
            }
        }
        if (up) {
            if(down){
                down = false;
                y = y - 10; shot = false;
            }
        }
        if (down) {
            if(up){
                up = false;
                y = y + 10; shot = false;
            }
        }
        rs.setPosition(x,y);
        this.repaint();
}

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(300, 300); f.setLocation(100,100);
        f.setTitle("Running");
        RunningGame p = new RunningGame();
        f.add(p); f.setVisible(true);
        p.requestFocus();

    }
} 
```

（这不是最终代码，它只是使用宇宙飞船的示例，稍后我将使用不同的对象，只是想测试 KeyListener 和 ActionListener 以便它在继续之前工作。）

Anyways can anyone help me make the space ship move smoothly? and without having to release all keys to activate another? i.e If i hold left i want it to be able to press another button. so that if i press right, the space ship will start to move in that direction instead.

//MrElephants

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:17:34.553

In the blocks that look like:

```
if (left) {
    if(right){
        right = false;
        x = x - 10; shot = false;
    }
} 
```

I think you should have `x = x - 10;` outside the second `if`:

```
if (left) {
    if(right){
        right = false;
        shot = false;
    }
    x = x - 10;
} 
```

although I'm not really sure what that inner `if` is for, maybe you should remove it completely (but keep the x -= 10 etc.). This should be sufficient to make the movement seem natural.

# api - 谷歌应用 API 给出“域不能使用 API”。错误

> ID：10127507
> 
> 赞同：1
> 
> 时间：2012-04-12T16:11:14.753
> 
> 标签：api, provisioning, google-apps

使用[Google Apps API](https://developers.google.com/google-apps/email-settings/#creating_labels)，同时尝试自动化标签创建过程

我能够进行身份验证并获得身份验证令牌，但发出了一个帖子要求

> POST [https://apps-apis.google.com/a/feeds/emailsettings/2.0/](https://apps-apis.google.com/a/feeds/emailsettings/2.0/) {域名}/{用户名}/label

给出“**域不能使用 API。** ”

**注意：**供应 API 已启用。

**注意：**我在 Google Apps 帐户上试用此功能可免费购买域

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:35:48.367

此功能不适用于免费域。将您的域升级到首映以访问此 API。

请参阅[http://support.google.com/a/bin/answer.py?hl=en&answer=175190&topic=28605&ctx=topic](http://support.google.com/a/bin/answer.py?hl=en&answer=175190&topic=28605&ctx=topic)

# asp.net - 如何摆脱 YSOD 但保留标准的日志记录功能？

> ID：10127512
> 
> 赞同：2
> 
> 时间：2012-04-12T16:11:41.390
> 
> 标签：asp.net, asp.net-mvc, iis-7

如果您想返回实际的 HTTP 状态代码（如 404、500 等）而不是 302（因为它仅适用于 Web 窗体），则默认选项`<system.web><customErrors>`在 ASP.NET MVC 应用程序中效果不佳。

无论我在哪里以及如何捕获异常（例如在 Global.asax 或全局错误处理程序中）并“吞下”异常（例如使用`Server.ClearError()`），我都可以完全控制呈现给客户端的内容，但我会失去默认日志记录（ Web 事件写入 Windows 事件日志）。这种日志记录对我来说很好，它非常强大，而且我有事件日志监控，所以这正是我想要的日志记录。

有什么我可以做的，例如在 Global.asax 中简单地强制 ASP.NET 将当前错误记录为 Web 事件，*然后*清除错误？

需要 ASP.NET 4 和 IIS7.5 集成模式的解决方案就可以了。

一种可行的选择是使用`<system.webServer><httpErrors>`，但是这仅适用于`existingResponse="Replace"`，而不适用`Auto`，因为 ASP.NET 似乎自动设置`TrySkipIisCustomErrors=true`，我需要它，`Auto`因为我的应用程序的一些控制器需要返回自定义错误页面（XML ）。

非常感谢您！

# iphone - 如何检索包含其他 CCSprite 的 CCSprite 的大小

> ID：10127514
> 
> 赞同：1
> 
> 时间：2012-04-12T16:11:45.867
> 
> 标签：iphone, objective-c, cocos2d-iphone

我需要在我的测试游戏中制作一组收藏品硬币..所以我制作了一个具有此方法的类：

```
+(CCSprite *)groupWithArray:(NSArray*)positions
{
    CCSprite *coins = [[[CCSprite alloc] init] autorelease];
    for (NSValue *pos in positions) {
        Coin *coin = [Coin sprite];
        [coin setPosition:[pos CGPointValue]];
        [coins addChild:coin];
    }
    return coins;
} 
```

（`Coin`类扩展`CCSprite`并且该`sprite`方法返回一个`spriteWithFile:`宽度和高度均为 50px 的）

然后我调用这个方法

```
CCSprite *cgroup = [CoinsGroup groupWithArray:positions]; 
```

现在我需要知道`cgroup`的宽度..
我试过：

```
NSLog(@"coins group width: %f",cgroup.contentSize.width);
NSLog(@"coins group width: %f",cgroup.contentSizeInPixels.width);
NSLog(@"coins group width: %f",cgroup.boundingBox.size.width);
NSLog(@"coins group width: %f",cgroup.boundingBoxInPixels.size.width); 
```

但他们都回来了`coins group width: 0.000000`

这是为什么？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:15:18.817

contentSize 和 boundingBox 指的是精灵附加的图像的大小。因此，在您的情况下，您没有硬币上的图像，只是一个容器（您可能应该使用普通的 CCNode）。

# android - 返回后android无法单击按钮

> ID：10127516
> 
> 赞同：1
> 
> 时间：2012-04-12T16:11:55.993
> 
> 标签：android, return, onclicklistener

我有一个创建帐户的视图。如果单击保存按钮并且任何字段保持打开状态，则会显示一个 toast。如果填写了所有字段，则保存该帐户。我尝试使用一个遍历所有字段的 onClickListener 来完成此操作。如果一个字段未填写，它可以完美运行，如果所有字段都填写，它也可以正常运行，但是当一个字段没有填写时，我在其中输入一些内容，尝试再次保存并且按钮不执行任何操作。

我认为这与退货有关，但我不知道该怎么办。如果没有回报，我会为每个未填写的字段祝酒。

以下是相关代码：

```
private void registerButtonListeners() {
    mCRUDAccountButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            for (int i = 0; i < mEditTexts.length; i++) {       
                if(mEditTexts[i].getText().length() == 0){
                    CommonCode.showToast(mNoTextTitles[i], mContext, mViewGroup);
                    mEmptyField = 1;
                    return;
                }
            };
            if (mEmptyField == 0){
                saveState();
            }
        }
    });
} 
```

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:17:57.403

您永远不会将您的标志重置为 0！

所以...

```
@Override
        public void onClick(View v) {
            mEmptyField = 0;//RIGHT HERE (give them the benefit of the doubt)
            for (int i = 0; i < mEditTexts.length; i++) {       
                if(mEditTexts[i].getText().length() == 0){
                    CommonCode.showToast(mNoTextTitles[i], mContext, mViewGroup);
                    mEmptyField = 1; //You were too optimistic, they failed.
                    return;
                }
            };
            if (mEmptyField == 0){
                saveState();
            }
        }
    }); 
```

现在，你是第一次，每次都做这个测试。否则，您将检查该标志并将其设置为 1，并且下一次，即使您的循环从未找到匹配项，当您进行 if mPentyField == 0 测试时，它也会失败，因为您在之前的循环中将其设置为 1 .

# qt - Qt-Designer 强制小写“#include "，阻止 Linux 构建

> ID：10127519
> 
> 赞同：3
> 
> 时间：2012-04-12T16:12:06.163
> 
> 标签：qt

Qt 设计器。将小部件提升为自定义类。该类正确显示在 *.ui 文件中。“我的班级名称”。该类正确显示在 Qt 设计的对象检查器“MyClassName”中。但是，在构建时，生成的 ui_xxxxxxx.h 文件具有“#include”，其中文件名被强制为小写。

这适用于 windows 和 mac，但在更严格的 Linux 中失败。

我怎样才能强制它为班级提供正确的案例？我真的不想将我的 *.h 文件重命名为小写...

在选项|c++|文件命名窗格中取消选中“小写文件名”选项没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T16:46:36.150

在类提升对话框中，底部有两个字段，一个用于类名，一个用于头文件。您只需要编辑头文件条目以匹配您希望它#include 的头文件的大小写（当您输入类名时，它会自动填充小写的头文件条目）。

# python - Flatnotebook 忽略所有样式

> ID：10127521
> 
> 赞同：0
> 
> 时间：2012-04-12T16:12:14.340
> 
> 标签：python, wxpython

在下面的示例程序中，我似乎无法让笔记本控件使用我告诉它使用的样式。尽管有`FNB_HIDE_ON_SINGLE_TAB`,`FNB_NO_NAV_BUTTONS`和`FNB_X_ON_TABS`样式，我仍然可以看到导航按钮和没有关闭按钮的单个选项卡。我尝试过的所有样式都是一样的，它们都被完全忽略了。

如果重要的话，我会在 Ubuntu 11.10、python 2.7.2 和 wxPython 2.8.11 上运行它

```
import wx
import wx.lib.flatnotebook as FNB

class TabCtrl(FNB.FlatNotebook):
    def __init__(self, parent):
        windowstyle = FNB.FNB_HIDE_ON_SINGLE_TAB|FNB.FNB_NO_NAV_BUTTONS|FNB.FNB_X_ON_TAB
        super(TabCtrl, self).__init__(parent, style=windowstyle)

        self.pages = []

        self.pages.append(wx.Panel(self))
        self.AddPage(self.pages[0], 'Test')

class MainFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(MainFrame, self).__init__(*args, **kwargs)

        self.panel = wx.Panel(self)
        self.tabs = TabCtrl(self.panel)

        sizer = wx.GridBagSizer(vgap=8, hgap=8)
        sizer.Add(self.tabs, (0, 0), (10, 30), wx.EXPAND)
        sizer.AddGrowableCol(29)
        sizer.AddGrowableRow(9)

        self.panel.SetSizer(sizer)

        self.panel.Fit()
        self.SetInitialSize()

class App(wx.App):
    def __init__(self, *args, **kwargs):
        super(App, self).__init__(*args, **kwargs)

        self.frame = MainFrame(None, title='Test')
        self.frame.Show()

app = App()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:30:04.467

FNB_NO_NAV_BUTTONS 和 FNB_X_ON_TABS 都使用 wxPython 2.8.12、Windows 7、Python 2.6 在我的机器上工作（使用 wxPython 演示）。当涉及到 AGW 小部件集中的任何内容时，我强烈建议从 SVN 下载最新版本。我认识那个库的作者，他一直在更新它并修复错误，所以更新到最新的 SVN 通常是值得的。

编辑：我又在看这个，我认为你至少把这些标志中的一些放在了错误的参数上。FlatNotebook 中也有一个“agwStyle”参数，我认为应该将部分或所有与 FlatNotebook 相关的标志应用于：

```
super(TabCtrl, self).__init__(parent, agwStyle=windowstyle) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:48:02.637

这可能是一个错误。我尝试了各种方法来改变风格，但没有成功。在更改样式时，即使[位于 wxPyWiki 上的示例](http://wiki.wxpython.org/Flatnotebook%20%28AGW%29)也不适合我。

[我会考虑在wxPython-users mailing list](http://groups.google.com/group/wxpython-users/topics)上询问它。

# visual-studio-2010 - 调试 For 循环；快进

> ID：10127526
> 
> 赞同：11
> 
> 时间：2012-04-12T16:12:31.080
> 
> 标签：visual-studio-2010, debugging, visual-studio-debugging

所以我正在做一个项目，我真的很长 for 循环，当接近循环结束时我通常会遇到问题，但是通过数百万次进入循环手动到达那里几乎是不可能的。我知道我可以只更改计数器变量，但在这种情况下它不会起作用，因为每次迭代的副作用不会发生。有没有办法在 999999998 次迭代后在某个地方停止断点？我正在使用 Visual Studio Ultimate 2010

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T16:15:53.147

放一个断点，右键单击它，选择条件集

```
i == 999999998 //if your loop looks like for (var i == 0;.... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-03T17:41:25.970

我只是在粘贴一张图片来形象化 Raphaël Althaus 的回答 ![在此处输入图像描述](../Images/73b315c51f621f383782696d68709bb7.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T16:21:02.367

正如 Raphaël 所说，您可以在断点上设置条件。但是，如果这发生在紧密循环中，则条件的开销可能会非常大。我发现在这种情况下检查代码并调用[Debugger.Break](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx)效果更好。

# c++ - 检查两个单链表是否包含相同的数据

> ID：10127530
> 
> 赞同：2
> 
> 时间：2012-04-12T16:12:36.033
> 
> 标签：c++, linked-list, compare

我们必须检查两个给定的链表是否包含相同的数据。在这种情况下，顺序无关紧要，这意味着`{1,3,2}`和`{2,1,3}`是相同的。我认为我们应该引入一个新变量`counter=0`并执行以下过程：

```
while(node1->next!=NULL)
{
    int value=node1->value;
    if(contains(node2,value)){
        counter++;
    }

    node1=node1->next;

    if(counter== number of elements in node 1) 
        return true; 
    else return false;
} 
```

另一种方法是对两个列表进行排序并逐个节点进行比较。哪一个是最优的？在第一种情况下，它需要 O(n^2) 次操作，而在第二种情况下，如 Nlog(N)+O(N)，（如果我们使用归并排序）。我的想法是对的吗？还是有其他最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:19:02.300

在您发布的两种方法中，第二种更好。但我建议你这样做`hashing`。

首先散列第一个链表。

在散列时检查第二个列表。

这样，总共可以在 O(n) 时间内完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:19:40.920

如果链接列表中的值允许，您可以使用第一个链接的值创建一个直方图，然后遍历第二个列表，在您进行时递减直方图条目。如果最后直方图只包含零，那么它们是相同的。

因此，例如，如果 list1 包含 {1, 3, 4, 2, 4}，则直方图将是（从零开始）[0, 1, 1, 1, 2]。

那么如果 list2 包含 {1, 3, 2, 4}，则递减后的直方图将是 [0, 0, 0, 0, 1]。

运行时间为 O(m + n)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T16:19:23.243

该解决方案需要相同的时间复杂度，但仍然要好一些！

```
{
 while(node1->next != NULL)
 {
    if(!contains(node2, node1->value)){
        return false;
    }
    node1 = node1->next;
 }
 return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:32:45.593

您可以将数字打印到字符串中，然后对字符串进行排序，以便一切都按正确的顺序排列

编辑：这只是一个建议，你的其他方式更好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-22T07:03:00.723

这是肯定会起作用的递归解决方案....

```
int CompareLists(Node *headA, Node* headB)
{

if (headA == NULL && headB == NULL)     
{  return 1;  }
if (headA == NULL && headB != NULL)  
{  return 0;  }
if (headB != NULL && headB == NULL)  
{  return 0;  }
if (headA->data != headB->data)
{  return 0;  }

return CompareLists(headA->next, headB->next);  
} 
```

# php - 存储过程将codeigniter与mysql数据库断开连接

> ID：10127533
> 
> 赞同：2
> 
> 时间：2012-04-12T16:13:04.067
> 
> 标签：php, mysql, codeigniter, stored-procedures

您好，这主要是一个概念性问题。

我在 mysql 中编写了一个存储过程，它可以正常工作并返回我期望的结果。然后我可以从我编写的 codeiigniter 库中调用该 SP。它将正确的结果提供给服务器，然后可以将正确的数据显示给客户端。但是，如果我尝试点击后退按钮或刷新页面，我会收到以下错误：

```
 A Database Error Occurred
    Unable to select the specified database: stage
    Filename: C:\xampp\htdocs\website\Web\system\database\DB_driver.php
    Line Number: 140 
```

我不确定问题出在哪里。我担心这是配置问题或类似问题。我正在使用 codeigniter V 2.0.1。有没有人对 CI 中的 SP 有类似的经验？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:47:51.080

所以问题与这里列出的问题有关：http: [//codeigniter.com/forums/viewthread/71141/](http://codeigniter.com/forums/viewthread/71141/)

这最终成为 xampp 成功的情况，因此这些错误无法正常解决，让我相信这是其他问题。通过将我的数据库配置文件设置为使用 mysqli 并在核心中构建一个钩子来修改 codeigniter 处理从 mysqli 存储过程返回的查询的方式，一切都能够一起工作。谢谢大家的帮助，它帮助我找到了问题的真正根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:17:21.823

到那时可能会关闭与数据库的连接。检查您的`config/database.php`并查看更改持久连接是否会`TRUE`改变任何内容：

```
$db['default']['pconnect'] = TRUE; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T09:08:38.010

使用codeigniter的这个指令

```
$this->db->reconnect(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-26T14:40:40.913

您必须重新连接到数据库

```
$this->db->reconnect(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T10:02:03.970

```
$db['default']['dbdriver'] = 'mysql'; 
```

将其更改为

```
$db['default']['dbdriver'] = 'mysqli'; 
```

# c++ - 分段错误和神秘的循环行为

> ID：10127535
> 
> 赞同：1
> 
> 时间：2012-04-12T16:13:15.790
> 
> 标签：c++, segmentation-fault

我正在做一个有一些具体要求的家庭作业。必须有一个名为 TestScores 的类，它将分数数组作为其参数。如果任何分数为负数或大于 100，它将引发异常。最后，它必须有一个成员函数，该函数返回所有分数的平均值。我不够聪明，无法找到仅将数组传递给构造函数的方法，因此我还添加了一个 int 来告知数组的大小。

运行代码（我什至还没有开始测试异常），我不断收到分段错误错误。Valgrind 和 gdb 相当无用，输出的消息如下：

```
==9765== Jump to the invalid address stated on the next line
==9765==    at 0x2200000017: ??? 
```

更神秘的是（至少对我而言），在客户端代码的 for 循环中，我的增量器 i 在创建 TestScores 对象后不知何故从 0 变为看似随机的两位数。在以前的版本中，在我开始使用 rand() 填充数组之前，我只是从未递增并执行了无限循环。

这是 TestScores.cpp 的内容：

```
#include <iostream>
using std::cout;
using std::endl;
#include "TestScores.h"
#include <stdexcept>
using std::runtime_error;

// Constructor.
TestScores::TestScores(int a[], int s): 
_SIZE(s), _scores()
{
   // Look at each item in a[], see if any of them are invalid numbers, and
   // only if the number is ok do we populate _scores[] with the value.
   for (int i = 0; i < _SIZE; ++i)
   {
      if (a[i] < 0)
      {
         throw runtime_error ("Negative Score");
      }
      else if (a[i] > 100)
      {
         throw runtime_error ("Excessive Score");
      }
      _scores[i] = a[i];
      cout << _scores[i] << " ";
   }
   cout << endl;
}

// Finds the arithmetic mean of all the scores, using _size as the number of
// scores.
double TestScores::mean() 
{
   double total = 0;
   for (int i = 0; i < _SIZE; ++i)
   {
      total += _scores[i];
   }
   return total / _SIZE;
}

// median() creates an array that orderes the test scores by value and then
// locates the middle value.
double TestScores::median() 
{
   // Copy the array so we can sort it while preserving the original.
   int a[_SIZE]; 
   for (int i = 0; i < _SIZE; ++i)
   {
      a[i] = _scores[i];
   }

   // Sort the array using selection sort.
   for (int i = 0; i < _SIZE; ++i)
   {
      int min = a[i];

      for (int j = i + 1; j < _SIZE; ++j)
      {
         if (a[j] < min)
         {
            min = a[j];
            a[j] = a[i];
            a[i] = min;
         }
      }
   }

   // Now that array is ordered, just pick one of the middle values.
   return a[_SIZE / 2];
} 
```

这是客户端代码：

```
#include <iostream>
#include "TestScores.h"
#include <stdexcept>
#include <cstdlib>
#include <ctime>
using std::exception;
using std::cout;
using std::endl;

int main()
{
   const int NUM_STUDENTS = 20,
             NUM_TESTS = 4;
   int test [NUM_TESTS][NUM_STUDENTS];

   // Make random seed to populate the arrays with data.
   unsigned seed = time(0);
   srand(seed);

   // Populate the scores for the individual tests graded for the semester.
   // These will all be values between 0 and 100.
   for (int i = 0; i < NUM_TESTS; ++i)
   {
      for (int j = 0; j < NUM_STUDENTS; ++j)
      {
         test[i][j] = rand() % 100;
         cout << test[i][j] << " ";
      }
      cout << endl;
   }

   // Now we have the data, find the mean and median results for each test.
   // All values should be valid, but we'll handle exceptions here.
   for (int i = 0; i < NUM_TESTS; ++i)
   {
      cout << "For Test #" << i + 1 << endl;
      try
      {
         cout << "i = " << i << endl;  // i = 0 here.
         TestScores results(test[i], NUM_STUDENTS);  
         cout << "i = " << i << endl;  // i = some random number here.
         cout << "Mean: " << results.mean() << endl;
         cout << "Median:" << results.median() << endl << endl;
      }
      catch (exception &e)
      {
         cout << "Error, invalid score: " << e.what() << endl;
      }
      cout << "For Test #" << i + 1 << endl;
   }

   return 0;
} 
```

编辑：标题也被请求：

```
#ifndef TEST_SCORES_H
#define TEST_SCORES_H

class TestScores
{
   private:
      const int _SIZE;
      int _scores[];

   public:
      // Constructor
      TestScores(int a[], int);

      double mean() const,
             median() const;
};
#endif 
```

我尝试使数组动态化，并没有将数组初始化为空，这解决了我的问题，所以这就是我最终上交的内容。这导致我提出了一些后续问题。

在开始动态之前，我尝试初始化数组_scores，尝试给它应该已经初始化的大小值。这导致了编译器问题。我和我的老师谈过这个问题，他说你不能为数组分配空间，除非有一个硬连线的全局常量。也就是说，您不能在构造函数中传递大小值来初始化数组。这是真的吗？如果是，为什么？

退后一步，在我看来，如果您需要大量值，动态数组会更好，因为这样您就不需要内存中的连续空间块。因此，如果您正在制作小型数组，那么输入动态数组似乎是浪费空间和时间。这是不真实的吗？从现在开始我应该将所有数组都作为动态数组吗？这段经历无疑改变了我对常规数组实用性的看法，至少在它们与类有关的情况下。

此外，虽然我在作业中得到了充分的评价，但我觉得我通过传递大小参数违反了精神（因为字面问题陈述是：“类构造函数应该接受一个测试分数数组作为它的参数”）。除了硬连线的全局常量或有大小参数之外，有没有办法只传递数组？我发誓我花了一个小时想办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:22:13.813

无需`TestScores.h`猜测，但鉴于您所说的在创建对象`i`的循环中被破坏的价值，这表明您的成员变量没有正确初始化，当您尝试加载它时，您实际上是垃圾内存。`TestScores``_scores`

一旦`TestScores.h`可见，我将在考虑文件的情况下重新访问此答案。

* * *

现在更新`TestScores.h`可用。

问题是您没有初始化`_scores`. 您实际上并没有分配任何内存来保存数组，更不用说将指针设置为指向该内存了。因此，当您尝试将内容存储到数组中时，您只是在某处浪费内存。

构造函数中的第一行应该是：

```
_scores = new int[_SIZE]; 
```

这将分配内存来保存`_SIZE` `int`s 并设置`_scores`为指向该内存。然后，您的分配`_scores[i]`实际上将进入属于您的程序的已定义内存。

`TestScore`当然，当实例被销毁时，您还必须释放此内存（C++ 不会为您这样做） 。因此，您将需要定义和实现一个析构函数，`TestScores`并且该析构函数需要包含以下行：

```
delete [] _scores; 
```

这将释放`_scores`指向的内存块。您可以阅读有关`delete`操作的文档，以了解为什么`[]`在这种情况下必须存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:24:49.177

看来您根本没有初始化`_scores`。您需要`_scores = new int[s];`在构造函数的顶部（以及`delete[] s;`在析构函数中）。

没有初始化`_scores`，你把东西写到未定义的内存位置。

# dom - 用 coffeescript 删除一个 div 元素

> ID：10127540
> 
> 赞同：3
> 
> 时间：2012-04-12T16:13:34.393
> 
> 标签：dom, coffeescript

我想使用 Coffeescript删除`div`具有特定属性的元素。`class`我在 Internet 上找不到任何关于使用 Coffeescript 进行 DOM 操作的示例。我怎样才能做到这一点？此外，任何对做 DOM 的引用都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:02:40.027

CoffeeScript 是一个 JavaScript 预处理器，没有额外的标准库。这意味着如果你想做 DOM 操作，你会像在 JavaScript 中那样做。

您可以将任何 JavaScript 库（如 jQuery）与 CoffeeScript 一起使用，或者您可以`document`直接使用该变量：

```
element.parentNode.removeChild(element) for element in document.getElementsByClassName('some-class') 
```

或者（对于不支持该方法的浏览器）

```
element.parentNode.removeChild(element) for element in document.getElementsByTagName('*') when element.className = 'some-class' 
```

或者，由于这些标识符有点长，请使用块语法：

```
for element in document.getElementsByTagName('*')
    if element.className is 'some-class'
        element.parentNode.removeChild(element) 
```

[来自CoffeeScript.org](http://coffeescript.org)的相关引用：

> CoffeeScript 的黄金法则是：“*它只是 JavaScript* ”。代码一对一编译成等价的JS，运行时没有解释。您可以从 CoffeeScript 无缝使用任何现有的 JavaScript 库（反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-18T15:22:56.640

[@lauren](https://stackoverflow.com/users/265/lauren)的答案对我有用，但是当我使用 chrome 时，出现以下错误： Uncaught TypeError: Cannot read property 'id' of undefined

使用以下作品完美，在 Chrome 上测试。

```
$(document).on 'hidden.bs.modal', "#newProject", ->
  document.getElementById("<ID>").outerHTML=''
  delete element 
```

来自： [https ://stackoverflow.com/a/19298575/5452072](https://stackoverflow.com/a/19298575/5452072)

# java - 使用托盘将java maven项目部署到ec2？

> ID：10127541
> 
> 赞同：3
> 
> 时间：2012-04-12T16:13:35.290
> 
> 标签：java, maven, amazon-ec2, pallet

我想知道我将如何设置它。我有一个普通的 java/tomcat/mysql 应用程序，我想部署到 EC2。我想使用托盘来配置盒子，配置它，并在那里部署我的战争。我希望我可以通过一个 Maven 插件来做到这一点？

我想我的另一个选择是创建一个 lein 项目并使用相对路径部署战争，但我希望使用 maven 插件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:11:16.027

我无法回答您问题的 AWS 和 Pallet 部分，但假设您有一个正在运行的 tomcat 实例，您可以直接从 maven 使用 Apache Cargo 项目来部署您的应用程序：

这是我们的货物配置的净化版本：

```
 <plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
              <container>
                <containerId>tomcat6x</containerId>
                <type>remote</type>
              </container>

              <configuration>
                <type>runtime</type>
                <properties>
                    <cargo.hostname>${tomcat.hostname}</cargo.hostname>   
                    <cargo.servlet.port>8080</cargo.servlet.port>
                    <cargo.remote.username>$[tomcat.username}</cargo.remote.username>
                    <cargo.remote.password>${tomcat.password}</cargo.remote.password>
                </properties>
              </configuration>

              <deployer>
                <type>remote</type>
                <deployables>
                  <deployable>
                    <groupId>com.mycompany</groupId>
                    <artifactId>MyWebApp</artifactId>
                    <type>war</type>
                    <pingURL>http://my.company.com/url</pingURL>
                    <pingTimeout>80000</pingTimeout>
                    <properties>
                        <context>ROOT</context>
                    </properties>
                  </deployable>
                </deployables>
              </deployer>
            </configuration>
        </plugin> 
```

然后您可以使用此命令运行此命令（当然设置相关属性）：

```
mvn -DskipTests package cargo:deploy 
```

更多关于使用 Apache Cargo 和 Maven 的信息在这里：[http ://cargo.codehaus.org/Maven2+Plugin+Getting+Started](http://cargo.codehaus.org/Maven2+Plugin+Getting+Started)

# html - 使用 CSS 在表格行上使用 alpha 或不透明度

> ID：10127544
> 
> 赞同：1
> 
> 时间：2012-04-12T16:12:57.647
> 
> 标签：html, css

我有一个网页的 CSS 样式表。该网页有一个背景颜色为白色的表格（设置在行中，而不是表格中）。我想将不透明度或 alpha 设置为 50%。我尝试了很多变化，但没有运气。

HTML 文件中的典型行是：

```
<tr>
  <td>&nbsp;</td>
  <td>Twitter</td>
</tr> 
```

表格行的 CSS 设置（效果很好）是：

```
tr {
    font-family: Arial, Helvetica, sans-serif; background:rgb(255,255,255);  
} 
```

为了获得阿尔法，我试过了

```
tr {
        font-family: Arial, Helvetica, sans-serif; background-color:rgba(255,255,255,0.5);  
    } 
```

我也试过`background-color-opacity: 0.5`；

还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:34:24.180

首先，并不是所有浏览器都以同样的方式支持它！要在 FF、Opera、Chrome 等中获得您想要的结果，您可以使用以下 2 行 CSS：

```
background-color: rgba(255, 255, 255, .5);
color: rgba(255, 255, 255, .5); 
```

[这个](http://css3generator.com/)链接也有助于获取各种类型的 CSS3 代码。

恐怕如果你想在 IE 上工作 alpha 属性，那么对于不同的版本，你必须使用不同的类型代码。你可以在[这里](https://stackoverflow.com/search?q=css3%20alpha%20with%20ie)谷歌。

希望对你有帮助！干杯:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:20:11.013

是否有我们可以查看的实时示例或可以重现该问题的 JSFiddle？

这是一个概念证明，表明您的 CSS 应该可以工作：http: [//jsfiddle.net/anstosa/VVA6q/](http://jsfiddle.net/anstosa/VVA6q/)

您可能会从其他一些 CSS 中得到冲突

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T16:17:45.890

尝试

```
tr {
    background-color:rgba(255,255,255,0.5);
} 
```

或者

```
table {
    background-color:rgba(255,255,255,0.5);
} 
```

[你可以在这里](http://jsfiddle.net/jackdent/qE2RV/1/)看到一个活生生的例子

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T16:25:00.683

如果你想让表格被看穿，[http://jsfiddle.net/YyNmG/](http://jsfiddle.net/YyNmG/)

HTML

```
<table>
<tr>
  <td>&nbsp;</td>
  <td>Twitter</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>Twitter</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>Twitter</td>
</tr>
</table>​ 
```

CSS

```
table{
    background-color:rgba(100,100,100,0.4);
}
body{
    background-color:red;
}​ 
```

如果只有 TRs，[http://jsfiddle.net/YyNmG/1/](http://jsfiddle.net/YyNmG/1/)

```
tr{
    background-color:rgba(100,100,100,0.4);
}
table{background-color:black;}
body{
    background-color:red;
} 
```

# ajax - 携带带有字符串的 ID 到下一页

> ID：10127551
> 
> 赞同：0
> 
> 时间：2012-04-12T16:14:19.363
> 
> 标签：ajax

我试图将 ID 带到下一页，但我设法得到的只是 review.php?ID= 没有 ID。

这是代码：

```
html = html + "Name:" + name + "Type : " + type + "Location : " + location + '<input type="button" value="Write a review!" onclick=parent.location="review.php?ID=" ('+ ID +') />'  + "<br/>"; 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:00:37.183

这里有几件事不对劲。你有不匹配的引号（单引号和双引号），我很确定 id 不应该有空格和括号。嵌入的引号也需要转义

像这样的东西：

```
html = html + "Name:" + name + "Type : " + type + "Location : " + location + 
"<input type='button' value='Write a review!' onclick='parent.location=\"review.php?ID=("+ID+")\" />"  + "<br/>"; 
```

# python - PYZMQ - 使用 ioloop 和多处理时出现“资源暂时不可用”错误

> ID：10127553
> 
> 赞同：2
> 
> 时间：2012-04-12T16:14:38.390
> 
> 标签：python, ipc, multiprocessing, zeromq, pyzmq

我正在使用 python ZMQ 使两个进程通过 ipc 进行通信。

这个想法是用多处理模块创建N个进程。每个进程创建一个 zmq 上下文和一个带有 ZMQStream 的 PULL 套接字（IPC 类型）来监视它。

然后主进程将json数据发送给子进程。

问题是我有时会得到以下信息： `"Resource temporarily unavailable (signaler.cpp:201)"`. 这不是一个例外，我不能抓住它。

有人同时使用 ZMQStream、IOLoop 和多处理吗？谢谢。

libzmq 和 python-zmq 的版本使用：2.1.11-1

# java - JSP 标记库使用相同的对象

> ID：10127559
> 
> 赞同：0
> 
> 时间：2012-04-12T16:15:12.837
> 
> 标签：java, class, jsp, taglib

如何让我自己的标签使用相同的资源（例如 xml doc）？

伪代码：

JSP：

```
<readxml:getuser/>
<readxml:getpassword/> 
```

爪哇：

```
public class getpassword(or getuser) extends BodyTagSupport
{
   if(doc)
   {
      out.println(doc)
   }
   else
   {
      doc = builder.build(file)
      out.println(doc)
   }
} 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:38:34.617

您可以在当前请求的上下文中存储临时数据：

```
public class getpassword(or getuser) extends BodyTagSupport
{
   public int doEndTag() {
      Doc doc = pageContext.getRequest().getAttribute("doc");
      if(doc == null)
      {
         pageContext.getRequest().setAttribute("doc", doc = builder.build(file));
      }
      out.println(doc);
       ...
   }
} 
```

您还可以将其存储到会话或静态变量中（取决于您想要的范围）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:38:45.590

从一个公共类扩展您的自定义标签并将 XML 加载推迟到它。由于您想避免重复解析文档，您需要将文档变量本身设为静态。

或者，将文档加载和存储功能放在一个公共类中，您可以选择在一个独立的实用程序类中实现它，您从所有相关标签（支持类）中引用该实用程序类。

# xcode - Xcode 4.3.2 找不到自己的包含文件

> ID：10127560
> 
> 赞同：0
> 
> 时间：2012-04-12T16:15:21.480
> 
> 标签：xcode, header

我正在尝试使用 Xcode 4.3.2 在 Mac OS X 10.7.3 上构建 dtrace。但是，运行 xcodebuild 会给我以下错误。

~/dtrace-90/libelf/ar.c:34:16：错误：ar.h：没有这样的文件或目录 ~/dtrace-90/libelf/ar.c:35:20：错误：stdlib.h：没有这样的文件或目录

**为什么 xcodebuild 找不到自己的标准头文件？**

我已经完成了：sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:49:59.190

我终于弄明白了。我安装了“Xcode 命令行工具”，现在一切正常 :-)

# ruby-on-rails-3 - Spine.js & rails - Spine.js 不对路线使用复数形式的模型名称

> ID：10127561
> 
> 赞同：0
> 
> 时间：2012-04-12T16:15:24.380
> 
> 标签：ruby-on-rails-3, spine.js

我正在遵循与集成的`Spine.js`指南`Rails 3`。

我创建了一个模型`Activity`并按照[spin.js 指南](http://spinejs.com/docs/rails)进行尝试。当我尝试创建一个活动时，我收到了这个错误：

```
POST http://localhost:3000/activitys 404 (Not Found) 
```

显然它不是路线的模型名称的复数形式，它可以从spine.js 端修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:26:17.927

如果 Spine 猜测的 URL 不正确，您可以在 Spine 中指定模型的端点 URL。将以下内容放入您的`activity.js.coffee`文件中：

```
 class App.Activity extends Spine.Model
        @url: '/activities' 
```

这应该使 Spine 达到正确的端点。

# objective-c - 在 kiosk 设置中寻找一次性推文的 IOS 框架（即没有 O/XAuth）

> ID：10127563
> 
> 赞同：-2
> 
> 时间：2012-04-12T16:15:29.747
> 
> 标签：objective-c, ios, facebook, twitter

是否有任何用于单个推文（和/或 facebook 喜欢）的 ios 框架。

我需要适合信息亭风格应用的东西。因此，鉴于此用户/通过发布此推文，我需要能够对 api 说。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:29:23.007

简而言之： http: [//getsharekit.com/](http://getsharekit.com/)

（哇，我从来没有注意到“简而言之”是什么奇怪的表达......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:45:12.953

如果你的目标是 iOS 5，那就是[Twitter 框架](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html)

# c++ - 将 Direct3D C++ 函数转换为 Delphi

> ID：10127569
> 
> 赞同：0
> 
> 时间：2012-04-12T16:16:02.560
> 
> 标签：c++, delphi, function, direct3d

我正在尝试将此 C++ Direct3D 函数转换为 Delphi，但我遇到了麻烦..

```
HRESULT GenerateTexture(IDirect3DDevice9 *pD3Ddev, IDirect3DTexture9 **ppD3Dtex, DWORD colour32)
{
    if( FAILED(pD3Ddev->CreateTexture(8, 8, 1, 0, D3DFMT_A4R4G4B4, D3DPOOL_MANAGED, ppD3Dtex, NULL)) )
        return E_FAIL;

    WORD colour16 =    ((WORD)((colour32>>28)&0xF)<<12)
            |(WORD)(((colour32>>20)&0xF)<<8)
            |(WORD)(((colour32>>12)&0xF)<<4)
            |(WORD)(((colour32>>4)&0xF)<<0);

    D3DLOCKED_RECT d3dlr;  
    (*ppD3Dtex)->LockRect(0, &d3dlr, 0, 0);
    WORD *pDst16 = (WORD*)d3dlr.pBits;

    for(int xy=0; xy < 8*8; xy++)
        *pDst16++ = colour16;

    (*ppD3Dtex)->UnlockRect(0);

    return S_OK;
} 
```

这是我的 Delphi 转换函数，但有错误：

```
function GenerateTexture(pD3Ddev: IDirect3DDevice9; ppD3Dtex: IDirect3DTexture9; colour32: dword):HRESULT;
var
 colour16: word;
 d3dlr: D3DLOCKED_RECT;
 pDst16: pword;
 xy: integer;
begin
 if failed(pD3Ddev.CreateTexture(8, 8, 1, 0, D3DFMT_A4R4G4B4, D3DPOOL_MANAGED, ppD3Dtex, nil)) then result := E_FAIL;

 colour16 := (word(((colour32 shr 28)and $F) shl 12)
             or word((((colour32 shr 20)and $F) shl 8))
             or word((((colour32 shr 12)and $F) shl 4))
             or word((((colour32 shr 4)and $F) shl 0)));

  ppD3Dtex.LockRect(0, d3dlr, 0, 0);
  pDst16 := PWORD(d3dlr.pBits);
  xy:=0;
  while xy<(8*8) do begin
   Inc(pDst16^);
   pDst16^ := color16; //THIS IS THE LINE WITH ERROR: '('Expected but ';' found.
   inc(xy);
  end;
  ppD3Dtex.UnlockRect(0);

  Result := S_OK;
end; 
```

我想我在转换一些错误的东西，但我不知道是什么......

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:27:44.997

您的变量称为 colour16，而不是 color16。

您还有另一个更高的错误。请记住，在 C 中，return 会立即退出函数，而在 Delphi 中并非如此，因此在 if failed 调用中需要类似这样的内容：

```
if failed(pD3Ddev.CreateTexture(8, 8, 1, 0, D3DFMT_A4R4G4B4, D3DPOOL_MANAGED, ppD3Dtex, nil)) then
begin
  result := E_FAIL;
  Exit;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:12:48.733

只是我注意到的一件小事： Inc(pDst16^) 应该低于赋值，因为 c++ 版本使用后增量符号，而不是前增量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T21:49:13.107

```
function GenerateTexture(pD3Ddev: IDirect3DDevice9; ppD3Dtex: IDirect3DTexture9; colour32: dword):HRESULT;
var
    colour16: word;
    d3dlr: D3DLOCKED_RECT;
    pDst16: pword;
    xy: integer;
begin
     if Failed(pD3Ddev.CreateTexture(8, 8, 1, 0, D3DFMT_A4R4G4B4, D3DPOOL_MANAGED, ppD3Dtex, nil)) then
     begin
        result := E_FAIL;
        Exit;
    end;
    colour16 := (word(((colour32 shr 28)and $F) shl 12)
        or word((((colour32 shr 20)and $F) shl 8))
        or word((((colour32 shr 12)and $F) shl 4))
        or word((((colour32 shr 4)and $F) shl 0)));

    ppD3Dtex.LockRect(0, d3dlr, nil, 0);
    pDst16 := PWORD(d3dlr.pBits);
    xy:=0;
    while xy<(8*8) do begin
        Inc(pDst16^);
        pDst16^ := colour16;
        Inc(xy);
    end;
    ppD3Dtex.UnlockRect(0);
    Result := S_OK;
end; 
```

# c# - 通过 InjectionConstructor 传递 asp.net 网页的当前实例

> ID：10127572
> 
> 赞同：1
> 
> 时间：2012-04-12T16:16:31.027
> 
> 标签：c#, asp.net, dependency-injection, inversion-of-control, unity-container

```
public class LogUtil : ILogUtility
{
   ... 
   public LogUtil(System.Type classType) 
   ....
} 
```

从我背后的 WebForm1.aspx 页面代码，PageLoad 事件，我能够成功地执行以下操作..

```
LogUtil logger = new LogUtil(this.GetType()); 
```

但是，当我在页面加载事件中尝试从 WebForm1.aspx 执行以下代码时。

```
var container = new UnityContainer();
System.Type type = this.GetType();

container.RegisterType<ILogUtility, LogUtil>(new InjectionConstructor(this.GetType()));  <--Error 
```

在上面的行中，我收到以下错误...

**LogUtil 类型没有采用参数 (WebForm1) 的构造函数。**

我究竟做错了什么？如何通过 InjectionConstructor 传入当前的类实例？为什么我能够成功地将 this.GetType() 直接传递给 LogUtil 构造函数，但我无法通过 InjectionConstructor 来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:27:26.577

我可以通过更新我的类的构造函数签名来修复它，如下所示：

```
public class LogUtil : ILogUtility
{
   ... 
   public LogUtil(object classType)  
   ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:26:12.007

在您的 Logger 类上，您的类型是 Logger 类，因此它可以工作。它在 webform 上不起作用，因为 this.GetType() 正在返回类型 webform。

# iphone - 验证应用程序并将其上传到 iTunes Connect 时出错

> ID：10127574
> 
> 赞同：-1
> 
> 时间：2012-04-12T16:16:40.477
> 
> 标签：iphone, ios

这真让我抓狂。我试过寻找答案，但没有什么能完全符合我的问题。

我已成功归档我的应用程序，需要将其上传到 iTunes Connect。Apple 推荐 Application Loader，但首先需要在 Xcode 中完成。当我尝试在 Xcode 中验证或分发应用程序时，我收到一条错误消息，提示“没有可用于签名的身份”

我很困惑，因为我已经清除了我的证书和配置文件，但我仍然收到此消息。有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:10:13.723

“没有可用于签名的身份”可能会令人沮丧。您应该做的是重新生成您的分发证书和配置文件，这应该可以解决问题。

如果您需要重新生成帮助：下载并打开新的分发证书，它将存储在您的钥匙串中。然后，将配置文件拖放到您的 Xcode 管理器中。接下来，您将单击左上角的项目（旁边有一个蓝色图标），这将显示项目信息。屏幕顶部应该有 2 个选项卡，“信息”和“构建设置”。当您单击构建设置时，更改代码签名的选项大约位于屏幕的一半。当我遇到这个问题时，我不得不将每个代码签名选项都更改为 iPhone Distribution。（可能没有必要更改*每个*字段，但我做到了）。你应该很好去追求这个，如果你还有问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:38:34.307

我通过删除所有开发配置文件并为每个分发和开发重新创建一个临时配置文件解决了这个问题。然后 Xcode 会自动选择配置文件，而无需我将它们导入 Xcode。

# jquery - Jasmine 为过滤器表单编写什么测试

> ID：10127576
> 
> 赞同：0
> 
> 时间：2012-04-12T16:16:49.843
> 
> 标签：jquery, backbone.js, jasmine

我是单元测试的新手......我试图弄清楚为过滤器表单编写哪些测试。

例子：

```
<form action="" id="filters">
    <p><label for="">Speed</label>
       <select name="speed" id="speed">
    <option value="ALL">All</option>
    <option value="SLOW">Slow</option>
    <option value="NORMAL">Normal</option>
    <option value="FAST">Fast</option>
    <option value="TURBO">Turbo</option>
    </select> 
```

在更改时，我必须向服务器发送请求并用新结果填充表。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:43:28.763

这是一个有点主观的问题，但在你的情况下我会做的是测试以确保：

*   所有各种查询都能够正确进行（您可以通过使用 jQuery 操作小部件来测试小部件的`change`事件处理程序来做到这一点）
*   来自查询的所有响应都是可解析的
*   捕获并适当处理格式错误的请求
*   捕获并处理格式错误的响应
*   小部件呈现（调用`.render()`然后检查以确保插入 DOM 的项目存在于页面 DOM 中）
*   存在所有不同的选项

ETC...

# ruby-on-rails - 使用通用 fields_for 的 Nil 对象

> ID：10127588
> 
> 赞同：0
> 
> 时间：2012-04-12T16:17:39.017
> 
> 标签：ruby-on-rails, forms, fields-for

我正在尝试使用通用 fields_for 方法传递参数。我有一个表格：

```
<%= form_for @Album do |album| %>
...
<%= fields_for :photo do |photo| %>
  <%= photo.text_field :name %>
  <%= photo.text_area  :description %>
  ...
<% end %>
<% end %> 
```

我希望这个表单会生成照片[名称] 和照片[描述]，这样当我提交表单时，我的控制器可以检查 params[:photo] 是否存在...#do something。我不使用嵌套表单的原因是因为有时甚至不会使用这些表单字段。

问题是我得到的是 fields_for :photo 行的错误。它说你有一个 nil 对象，但你没想到它！您可能期望一个数组的实例。

如果它不为零，我怎么能做这个通用的fields_for？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:27:58.330

您遇到此问题是因为您的控制器中没有定义 @photo 变量。`fields_for`, 就像`form_for`, 旨在成为现有对象的包装器。该符号`:photo`正在变成一个实例变量，但它是 nil ，所以这就是你遇到这些错误的原因。您可以通过在控制器操作中定义照片来纠正此问题：

```
@photo = @album.photos.first # if there's an existing photo
@photo = @album.photos.new # if there's not 
```

如果您根本不想定义对象，那么您只需要使用常规的表单标签而不是`fields_for`.

# java - 使用 JXDatePicker 作为编辑器的 CellEditor

> ID：10127589
> 
> 赞同：1
> 
> 时间：2012-04-12T16:17:40.200
> 
> 标签：java, swing, jtable, swingx, tablecelleditor

我需要使用 JXDatePicker 使我的 JTable 中的日期单元格可编辑。我想我需要实现 TableCellEditor，但我不敢自己解决它。有没有人有可以帮助我的链接或快速代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:14:24.707

假设您的意思是作为 SwingX 一部分的 JXDatePicker：它有一个 DatePickerCellEditor（在它的表包中）——因为在这种情况下，获得正确的通知并不那么容易:-)

# drop-down-menu - ssrs 报告中的空下拉列表

> ID：10127593
> 
> 赞同：0
> 
> 时间：2012-04-12T16:17:55.783
> 
> 标签：drop-down-menu, ssrs-2008, ssas

好的，我在这里有点难过。我使用 ssas 多维数据集作为众多报告的数据源。报告都有一个开始和结束的星期或月份参数。当我以我的身份运行报告时，它们运行良好。但是，当我以系统上的另一个用户身份登录时，下拉列表为空。因此，我无法运行报告，因为在周或月下拉列表中没有可供选择的内容。请注意，我已尝试使用嵌入式和共享数据集。这是我缺少的数据集安全设置吗？这很奇怪。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:01:00.623

您是否在多维数据集上定义了任何安全性？

此外，检查分析服务项目中定义的数据源的模拟信息。

[http://msdn.microsoft.com/en-us/library/ms187597.aspx](http://msdn.microsoft.com/en-us/library/ms187597.aspx)

# html - 在 CSS 中，当我滚动滚动条时，背景颜色 消失了

> ID：10127602
> 
> 赞同：7
> 
> 时间：2012-04-12T16:18:29.073
> 
> 标签：html, css

像这样的 HTML 代码：

```
<div>
    <ol>
        <li class='a'>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</li>
        <li class='b'>bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</li>
    </ol>
</div> 
```

像这样的 CSS 代码：

```
div {
    width: 400px;
    overflow-x: scroll
}

.a {
    background-color: red;
}

.b {
    background-color: blue;
} 
```

当我滚动滚动条时，我看到背景颜色只应用于原始的未滚动区域。我怎么解决这个问题。

[我的代码在这里](http://jsfiddle.net/unimous/VMZ87/)

* * *

**编辑**

**[另一个例子清楚地显示了我的问题。](http://jsfiddle.net/unimous/VMZ87/3/)**

**我现在有第二个问题：第二行消失了……为什么**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:37:57.443

对于列表项，您需要将`display`属性设置为`inline-block`并将属性设置`min-width`为 100%。这是您的[jsFiddle](http://jsfiddle.net/VMZ87/5/)，请参见下文：

```
div {
    width: 400px;
    overflow-x: scroll;   
}

li {
    min-width: 100%;
    white-space: nowrap;
    display: table-row; /* or inline-block */   
}

.a, .c, .e, .g {
    background-color: red;
}

.b, .d, .f {
    background-color: blue;
}​ 
```

**编辑**

要使所有`li`元素的宽度最长`li`，请使用`display: table-row`.

请参阅此[jsFiddle](http://jsfiddle.net/VMZ87/10/)进行演示。

```
li {
    min-width: 100%;
    white-space: nowrap;
    display: table-row;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:25:29.327

`div`长的牢不可破的文本 (aaaaaaaa .....) 导致文本从您指定的宽度为 400 像素的文本中挤出。如果您想保持宽度，您可以通过应用此规则来阻止文本挤出

```
word-wrap: break-word; 
```

[http://jsfiddle.net/joshdavenport/v6TVg/](http://jsfiddle.net/joshdavenport/v6TVg/)

[支持对这条规则有好处](http://caniuse.com/#search=word-wrap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:04:50.477

使用自动换行：断词；因为 word-wrap 属性允许长单词被打破并换行到下一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:12:09.190

可以使用此代码修复此问题。[jsfiddle](http://jsfiddle.net/yzubv/)

我在这里所做的是引入一个内部 div

```
<div id="outer">
    <div id="in"> 
```

并像这样设置它的CSS

```
#in {
    width:500px;
} 
```

请注意，500px 是`<li>`项目中的最大宽度。

顺便说一句，这是它如何工作的标准行为。如果您曾经在 Wordpress 中使用过代码插件。它们的行为方式完全相同。如果向右滚动，则滚动的文本没有背景。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T16:24:17.793

您可以通过将列表定义为`inline`

```
li { display: inline; } 
```

[演示](http://jsfiddle.net/VMZ87/1/)

# c++ - 为什么要重新分配矢量副本而不是移动元素？

> ID：10127603
> 
> 赞同：32
> 
> 时间：2012-04-12T16:18:41.100
> 
> 标签：c++, c++11, stdvector, move-semantics

> **可能重复：**
> [当向量增长时如何强制执行移动语义？](https://stackoverflow.com/questions/8001823/how-to-enforce-move-semantics-when-a-vector-grows)

`insert`,`push_back`和`emplace`( `_back`) 可能导致重新分配 a `std::vector`。我很困惑地看到以下代码在重新分配容器时*复制*元素而不是*移动它们。*

```
#include <iostream>
#include <vector>

struct foo {
    int value;

    explicit foo(int value) : value(value) {
        std::cout << "foo(" << value << ")\n";
    }

    foo(foo const& other) noexcept : value(other.value) {
        std::cout << "foo(foo(" << value << "))\n";
    }

    foo(foo&& other) noexcept : value(std::move(other.value)) {
        other.value = -1;
        std::cout << "foo(move(foo(" << value << "))\n";
    }

    ~foo() {
        if (value != -1)
            std::cout << "~foo(" << value << ")\n";
    }
};

int main() {
    std::vector<foo> foos;
    foos.emplace_back(1);
    foos.emplace_back(2);
} 
```

在我使用特定编译器（GCC 4.7）的特定机器上，这将打印以下内容：

```
foo(1)
foo(2)
foo(foo(1))
~foo(1)
~foo(1)
~foo(2) 
```

但是，当删除复制构造函数 ( `foo(foo const&) = delete;`) 时，会生成以下（预期的）输出：

```
foo(1)
foo(2)
foo(move(foo(1))
~foo(1)
~foo(2) 
```

这是为什么？移动通常不会比复制更有效率，或者至少不会低很多吗？

值得注意的是，[GCC 4.5.1 做了预期的事情](http://ideone.com/2EPxu)——这是 GCC 4.7 中的回归还是一些巧妙的优化，因为编译器认为我的对象复制起来很便宜（但是如何复制？！）？

另请注意，我确保这*是*由重新分配引起的，通过实验将 a`foos.reserve(2);`放在插入之前；这不会导致执行复制或移动。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T16:55:36.230

简短的回答是我认为@BenVoigt 基本上是正确的。

在`reserve`（§23.3.6.3/2）的描述中，它说：

> 如果非 CopyInsertable 类型的移动构造函数引发异常，则没有任何影响。

[并且`resize`§23.3.6.3/12 中的描述要求相同。]

这意味着如果 T 是 CopyInsertable，您将获得强大的异常安全性。为了确保这一点，它*只能在**它*推断出（通过未指定的方式）移动构造永远不会抛出的情况下使用移动构造。但是，不能保证任何一个`throw()`或`noexcept`将是必要的或充分的。如果 T 是 CopyInsertable，它*可以*简单地选择始终使用复制构造。基本上，正在发生的事情是该标准需要类似复制构造的语义；编译器只能在 as-if 规则下使用移动构造，并且可以自由定义何时或是否会执行该选项。

如果 T 不是 CopyInsertable，则重新分配*将*使用移动构造，但异常安全性取决于 T 的移动构造函数是否可以抛出。如果它不抛出，您将获得强大的异常安全性，但如果它抛出，您不会（我认为您*可能会*获得基本保证，但可能甚至没有，而且绝对不会更多）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T16:59:33.173

Tip-of-trunk clang + libc++ 得到：

```
foo(1)
foo(2)
foo(move(foo(1))
~foo(2)
~foo(1) 
```

如果您`noexcept`从移动构造函数中删除 ，那么您将获得复制解决方案：

```
foo(1)
foo(2)
foo(foo(1))
~foo(1)
~foo(2)
~foo(1) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-12T16:27:39.110

这不是回归，而是错误修复。该标准指定 std::vector 将只喜欢不抛出的元素移动构造函数。

另请参阅[此说明](https://stackoverflow.com/a/8864895/103167)和[此错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52745)。

[这个问题](https://stackoverflow.com/questions/6011428/move-constructors-and-the-strong-exception-guarantee)也很相关。

# android - 在不是 GUI 线程的线程内显示一个对话框

> ID：10127605
> 
> 赞同：0
> 
> 时间：2012-04-12T16:18:46.533
> 
> 标签：android, multithreading, dialog, ui-thread

我正在开发 Android 3.1 及更高版本的应用程序。

我添加了一个线程来使用 Spring Framework 发出 REST 请求。这是我的代码：

```
public class FormsListActivity extends ListActivity
{
    private List<Form> forms;
    private ProgressDialog progressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
      super.onCreate(savedInstanceState);
      progressDialog = ProgressDialog.show(this, "Please Wait.", "Loading forms...");
      getUpdates.start();
    }

    private Thread getUpdates = new Thread ()
    {
        public void run() 
        {
            try
            {
                forms = FormSpringController.LoadAll();
                progressDialog.dismiss();
            }
            catch (Exception e)
            {
                e.printStackTrace();
                //display = e.getLocalizedMessage();
            }

            runOnUiThread(new Runnable()
            {
                public void run()
                {
                    setListAdapter(new FormAdapter(FormsListActivity.this, R.layout.form_list_item, forms));

                    ListView lv = getListView();
                    lv.setTextFilterEnabled(true);
                }
            });
        }
    };
} 
```

我想在 catch 块中显示一个对话框：

```
catch (Exception e)
{
    e.printStackTrace();
    //display = e.getLocalizedMessage();
} 
```

我想设置`display`变量它有一个错误，然后在里面检查它`runOnUiThread(new Runnable()`。如果 display 有一个值，则显示一个对话框。

你怎么看？有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:33:59.173

看看这个。将线程的 run 方法的所有代码放在`handleMessage(Message message)`方法中

```
private Handler handler = new Handler(){
        public void handleMessage(Message message){
             try
             {
                 forms = FormSpringController.LoadAll();
                 progressDialog.dismiss();
                 setListAdapter(new FormAdapter(FormsListActivity.this, R.layout.form_list_item, forms));

                 ListView lv = getListView();
                 lv.setTextFilterEnabled(true);
             }
             catch (Exception e)
             {
                 e.printStackTrace();
                 //display = e.getLocalizedMessage();
             }

        }
    } 
```

并在你的线程的 run 方法中调用它

```
handler .sendEmptyMessage(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:35:52.530

```
runOnUiThread(new Runnable(){
public void run(){
////code for alert dialog
}
}); 
```

不推荐，但你可以使用它。最好使用另一个处理所有 UI 任务的线程。

# javascript - 将值从 jquery 函数传递到另一个函数

> ID：10127606
> 
> 赞同：0
> 
> 时间：2012-04-12T16:18:47.817
> 
> 标签：javascript, jquery, jquery-mobile

我需要将两个值从一个 jquery 列表函数传递到另一个函数。第一个值是表格中的一行，第二个是选择选项值，这是我的代码：

```
function ListDBValues() { 
 if (!window.openDatabase) { 
  alert('Databases are not supported in this browser.'); 
  return; 
 }
$('#lbUsers').html(''); 
db.transaction(function(transaction) { 
   transaction.executeSql('SELECT * FROM productos;', [], 
   function(transaction, result) { 

      if (result != null && result.rows != null) { 
        for (var i = 0; i < result.rows.length; i++) { 
          var row = result.rows.item(i); 
          $('#lbUsers').append('<div id="producto"><img id="imgprod" width="100" src="images/' + row.foto +'">' + row.titulo + '<br>$' + row.precio + ' MXP<br>\
          <input class="cuadro" type="button" id="cb.row" name="item"  value="ORDENAR" onclick=AddValueToOrders('+ row.item + ','  + cantidad.val() + ');>\
          <div data-role="fieldcontain">\
          <label for="select-choice-a" class="select">Cantidad:</label>\
          <select name="cantidad" id="cantidad" data-native-menu="false">\
          <option value="1">1</option>\
          <option value="2">2</option>\
          <option value="3">3</option>\
          <option value="4">4</option>\
          </select></div></div><br>');

        } 
      } 
     },errorHandler); 
 },errorHandler,nullHandler);
 return; 
} 
```

任何意见 ？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:43:10.433

我假设这是您引用的函数：

```
AddValueToOrders('+ row.item + ','  + cantidad.val() + '); 
```

您的附加语句有一些需要解决的问题。每个选择控件都将具有相同的名称和 id，因此很难找出选定的值。如果您为每个选择元素创建一个基于索引的 id 并在函数调用中引用它，那么您将获得选定的值：

```
 var cantidad = "cantidad" + i;
      $('#lbUsers').append('<div id="producto"><img id="imgprod" width="100" src="images/' + row.foto +'">' + row.titulo + '<br>$' + row.precio + ' MXP<br>' +
      '<input class="cuadro" type="button" id="cb.row" name="item" value="ORDENAR" onclick=AddValueToOrders('+ row.item + ', $("#' + cantidad + '").val());>' + 
      '<div data-role="fieldcontain">' +
      '<label for="select-choice-a" class="select">Cantidad:</label>' +
      '<select name="' + cantidad + '" id="' + cantidad + '" data-native-menu="false">' +
      '<option value="1">1</option>' +
      '<option value="2">2</option>' +
      '<option value="3">3</option>' +
      '<option value="4">4</option>' +
      '</select></div></div><br>'); 
```

新的点击功能：

```
AddValueToOrders('+ row.item + ', $("#' + cantidad + '").val()); 
```

# model-view-controller - 如何在 IIS7 中启用 DELETE 动词？

> ID：10127607
> 
> 赞同：3
> 
> 时间：2012-04-12T16:18:48.920
> 
> 标签：model-view-controller, iis, httpverbs

我通过 AJAX 和 Delete 动词方法进行了调用，但来自 IIS 服务器的响应是 405 Method Not Allowed。

我读过它。显然一切正常，我没有安装 webDAV。我试图定义处理程序、模块等......但我无法成功！！！。

这是详细的错误信息：

模块静态文件模块

通知 ExecuteRequestHandler

处理程序静态文件

错误代码 0x80070001

有人也得到这个错误吗？有什么亮点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T10:33:24.863

从 AJAX调用`DELETE`ASHX 文件`405 Method Not Allowed`在 IIS 7 上返回错误。未安装 WebDAV。该站点是 .Net 4.0 并使用集成管道模式应用程序池。

> 错误响应包括：
> 
> 模块静态文件模块
> 
> 通知 ExecuteRequestHandler
> 
> 处理程序静态文件
> 
> 错误代码 0x80070001

我的解决方案是在 IIS 管理器中打开网站的处理程序映射功能。

从 Handler Mappings 中选择 SimpleHandlerFactory-Integrated，这已`*.ashx`作为路径。

单击“操作”窗格中的“编辑”以打开“编辑托管处理程序”对话框，然后单击“请求限制”按钮。

选择动词选项卡并将 DELETE 添加到动词列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:24:03.660

在您的 IIS 站点中，您可以转到 Request Filtering -> HTTP Verbs 并查看 DELETE 是否没有被明确拒绝。

此外，当您转到处理程序映射时，例如您编辑 .axd 文件的处理程序（以 aspnet_isapi.dll 结尾的东西）有一个按钮请求限制......并且有一个选项卡动词，您可以在其中查看是否删除被指定。

# vb.net - 64 位上的 DirectShowLib IMediaEventEx.GetEvent 返回 0

> ID：10127610
> 
> 赞同：0
> 
> 时间：2012-04-12T16:18:57.853
> 
> 标签：vb.net, directshow, directshow.net

我担心这可能是一个深奥的问题，但经过一番搜索，我想知道是否有其他人遇到过这个问题？问题是调用 IMediaEventEx.GetEvent 方法时，在 64 位机器上运行时，“EventCode”参数总是返回 0。相同的代码和类似的环境，但在 32 位机器上工作正常。

此方法在通过捕获适当的 WM_GRAPHNOTIFY 消息调用的熟悉的“HandleGraphEvent”方法中被调用。更具体地说，我正在寻找视频文件完成时调用的“DirectShowLib.EventCode.Complete”消息。如前所述，在 32 位系统（正在工作）上，它会按顺序生成事件代码/消息“ClockChanged”、“Paused”，最后是“Complete”。在 64 位机器上，HandleGraphEvent 方法也被调用了 3 次，但每次调用 GetEvent 时，EventCode 都是 0。

有没有其他人遇到过这个问题或将 DirectShowLib 代码从 32 位移动到 64 位的问题？

提前致谢...

FWIW-代码...

```
Private Sub HandleGraphEvent()
    ' This routine handles are notified events from DShow library
    Dim hr As Integer
    Dim evCode As EventCode
    Dim evParam1, evParam2 As Integer
    If Me.m_MediaEventEx Is Nothing Then Exit Sub

    ' Process all the events
    While (Me.m_MediaEventEx.GetEvent(evCode, evParam1, evParam1, 0) = 0)
        ' Cleanup parameters before processing
        hr = Me.m_MediaEventEx.FreeEventParams(evCode, evParam1, evParam2)
        IsDShowError(hr, "HandleGraphEvent")

        ' Is this the end of the movie?
        If evCode = EventCode.Complete Then
            ' Is there a movie control availalbe?
            If Me.m_MediaControl Is Nothing Or Me.m_MediaSeek Is Nothing Then Return
            ' Perform Stop Start
            hr = Me.m_MediaControl.Stop()
            PlayMovie(MoveToNextVideo())
            Exit While
        End If
    End While
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:00:49.630

我遇到了对 DirectShow 的引用，它更改了一些接口的实现以`IntPtr`代替`Int`64 位支持：

> [http://directshownet.sourceforge.net/](http://directshownet.sourceforge.net/)
> 
> 我们还纠正了与 64 位支持相关的问题。主要修复结构上的“打包”问题，但一些接口已更改为支持 64 位。主要将参数从 int 更改为 IntPtr。这将需要更改您使用它们的代码，但更改相对明显，并且通过重新编译很容易找到。

确实 ：

> [MSDN](http://msdn.microsoft.com/en-us/library/dd406907%28v=vs.85%29.aspx)
> 
> ```
> HRESULT GetEvent(
>   [out]  long *lEventCode,
>   [out]  LONG_PTR *lParam1,
>   [out]  LONG_PTR *lParam2,
>   [in]   long msTimeout
> ); 
> ```

所以也许：

```
Dim evParam1, evParam2 As IntPtr 
```

我认为，您的`EventCode`类型也需要作为 IntPtr 传递（除非这已经是它的类型）。`Integer`即使为 x64 编译，该类型仍然是 32 位数字（出于同样的原因，该`Short`类型等仍然可用于 32 位应用程序）。但是，用于 64 位应用程序的指针都是 64 位量，因此传递 32 位`Integer`将不起作用。该`IntPtr`结构取决于平台 - x86 为 32 位，x64 为 64 位。

# apache - 在 ColdFusion webroot 之外上传/写入文件时出现权限错误

> ID：10127611
> 
> 赞同：1
> 
> 时间：2012-04-12T16:18:59.717
> 
> 标签：apache, coldfusion, permissions

我有一个需要上传文件的网站（工作历史/简历）。出于安全原因，我想将文件上传到 Web 根目录之外的文件夹。在我的本地开发机器上，它工作正常。但是在我的生产服务器上，我继续收到权限错误。我究竟做错了什么？

在上传 CFC 中，我进行了设置，以便在将文件写入根目录外的文件夹时检测文件扩展名、创建 UUID 并重命名文件。此块设置在 try/catch 块内，并将错误发送回页面，以便我在控制台中读取错误。

这是我得到的 JSON 编码`cfcatch.Detail`和错误...`cfcatch.Message`

> 写入异常此异常的原因是：java.io.FileNotFoundException: /var/www/ftp/uploadfoldername/8915DD79-F7BD-B66E-ACE2FBFE7DBE9006.txt（权限被拒绝）。| 对文件 /var/www/ftp/uploadfoldername/8915DD79-F7BD-B66E-ACE2FBFE7DBE9006.txt 执行文件操作写入时出错。

当我在尝试上传到的文件夹上运行 getfacl 时，它看起来像这样：

```
# file: uploadfoldername
# owner: root
# group: apache
user::rwx
group::rwx
group:apache:rw-
mask::rwx
other::r-x 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:53:01.593

所以 CF 用户需要访问这些文件夹 - 但显然不是没有人。将用户更改为 Apache 或其他对这些文件夹具有适当权限的用户。

# jquery - 尝试从 Rails 中的 URL 参数显示 DIV

> ID：10127612
> 
> 赞同：0
> 
> 时间：2012-04-12T16:19:01.793
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ujs

在 Rails 3 中，我有一个要访问的 URL (http://localhost.com/display_div_a_and_hide_div_b)，我希望它隐藏和显示相应的 div。

我的路线文件中有以下内容：

```
get 'users/display_div_a_and_hide_div_b' => 'controller#display_div_a_and_hide_div_b' 
```

但是我不知道在特定的控制器操作中添加什么来显示和隐藏这些 div。我使用的是 UJS 而不是原型，所以无法使用 render :update 方法。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:09:03.850

是否有某些原因需要对 url 中的所有内容进行编码？难道你不能只是有一个动作`controller#display`，然后有关于参数中发送的选项的信息吗？例如，您的视图可能如下所示：

```
<% unless params[:div_a] == "hidden" %>
  <div id="div_a">
    ...
  </div>
<% end %>

<% unless params[:div_b] == "hidden" %>
  <div id="div_b">
    ...
  </div>
<% end %> 
```

然后你所要做的就是发送参数来隐藏或显示你想要的任何部分。

# css - 如何切换 div 以使用 CSS 显示内容

> ID：10127618
> 
> 赞同：3
> 
> 时间：2012-04-12T16:19:24.000
> 
> 标签：css, html, hide, toggle, css-transitions

所以我有一个 div 应该在切换时展开以显示一个列表。可以在这里看到之前和之后的状态[http://reversl.net/box/](http://reversl.net/box/)但是我需要在我的样式中添加什么来实现这一点？我想使用 css 过渡来增加效果。我不担心浏览器兼容性，因为它只是用于学习目的。有小费吗？

```
<div class="box"><img src="http://www.placehold.it/250x300" alt="" />
        <div class="section progress">
            <h4>
                <a href="#">Div Before</a>
            </h4>
            <div class="metrics">
                <div class="meter">
                    <span style="width: 75%"></span>
                </div><!--.meter-->
            </div><!--.metrics-->
        </div><!--.section-progress-->
</div><!--.box-->

<div class="box"><img src="http://www.placehold.it/250x300" alt="" />
        <div class="section progress">
            <h4>
                <a href="#">Div After</a>
            </h4>
            <div class="metrics">
                <div class="meter">
                    <span style="width: 75%"></span>
                </div><!--.meter-->
            </div><!--.metrics-->
        </div><!--.section-progress-->
        <div class="sub_section">
            <ul class="list">
                <li>Item 1</li>
                <li class="last">Item 2</li>
            </ul>
        </div><!--.sub_section-->
</div><!--.box-->

.boxes {
width: 100%;
padding: 1%;
}

.box {
width: 20%;
padding: 1%;
background: #fff;
-moz-box-shadow: 2px 3px 4px 0px #e9e9e9;
-webkit-box-shadow: 2px 3px 4px 0px #e9e9e9;
box-shadow: 2px 3px 3px 0px #e9e9e9;
display: inline-block;
margin-top: 1em;
}

.box img {
margin-bottom: 1%;
}

.progress a {
margin: 0;
padding: 0;
color: #999;
text-decoration: none;
}

.metrics {
margin: -1em 0 0 0;
padding: 0;
background: #c0c0c0;

}
.accordion .progress .meter {
background: #555;
width: 100%;
position: relative;
}

.meter > span {
height: 10px;
display: block;
background-color: #777;
position: relative;
overflow: hidden;
}

.sub_section {
margin-top: 1em;
border-bottom: none;
}

.list {
padding: 0;
margin: 0;
}

.list li {
background: #dcdcdc url('http://placehold.it/40x40') no-repeat;
font-size: 11px;
color: #999;
list-style: none;
padding: 1.3em 1em 1.3em 4.5em;
margin-bottom: 5px;
}

.list .last {
border-bottom: none;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:59:14.613

恐怕我无法在您的示例代码和图像中解决您想要单击的内容以及您想要显示的内容。但是，以下内容适用于`onclick`纯 CSS 的 -like 事件：

```
<div id="wrapper">
    <ul id="top">
        <li><a href="#one">One</a></li>
        <li><a href="#two">Two</a></li>
    </ul>
    <div class="box" id="one">
        <p>One</p>
        <span><a href="#top">Close</a></span>
    </div>
    <div class="box" id="two">
        <p>Two</p>
        <span><a href="#top">Close</a></span>
    </div>
</div> 
```

CSS：

```
.box {
    position: absolute;
    top: 20%;
    left: 50%;
    width: 50%;
    margin-left: -25%;
    border: 4px solid #000;
    background-color: #f90;
    /* the CSS, above, is all for aesthetic purposes, what matters is the following */
    opacity: 0;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -moz-transition: all 1s linear;
    -0-transition: all 1s linear;
    transition: all 1s linear;
}

.box:target {
    opacity: 1;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -moz-transition: all 1s linear;
    -0-transition: all 1s linear;
    transition: all 1s linear;
} 
```

​<a href="http://jsfiddle.net/davidThomas/Nyq8u/" rel="noreferrer">JS Fiddle 演示。

不幸的是，似乎（在 Chromium 17/Ubuntu 11.04 中）不可能从到动画。`display: none;`类似`display: block;`地，从到的转换`height: 0`也会`height: auto`失败（尝试任何一种都会导致突然出现而不是转换。所以演示中的内容总是“那里”，但只是简单地隐藏（不透明），然后在单击相关链接后显示。

但是对于类似滑动切换的效果：

```
.box {
    /* aesthetic stuff excised for brevity */
    opacity: 0;
    height: 0;
    overflow: hidden;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -moz-transition: all 1s linear;
    -0-transition: all 1s linear;
    transition: all 1s linear;
}

.box:target {
    opacity: 1;
    height: 3em;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -moz-transition: all 1s linear;
    -0-transition: all 1s linear;
    transition: all 1s linear;
} 
```

​<a href="http://jsfiddle.net/davidThomas/Nyq8u/1/" rel="noreferrer">JS Fiddle 演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T16:21:30.493

您可以使用“复选框黑客”：[http ://css-tricks.com/the-checkbox-hack/](http://css-tricks.com/the-checkbox-hack/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T17:03:11.643

对代码进行这些修改将为您提供 CSS 过渡。

在你的内部`<div class="box">`，在内容周围添加一个容器`<div class="trans">`，如下所示：

```
<div class="box">
  <div class="trans">
    <img src="http://www.placehold.it/250x300" alt="" />
        <div class="section progress">
            <h4>
                <a href="#">Div After</a>
            </h4>
            <div class="metrics">
                <div class="meter">
                    <span style="width: 75%"></span>
                </div><!--.meter-->
            </div><!--.metrics-->
        </div><!--.section-progress-->
        <div class="sub_section">
            <ul class="list">
                <li>Item 1</li>
                <li class="last">Item 2</li>
            </ul>
        </div><!--.sub_section-->
    </div><!--.trans-->
</div><!--.box--> 
```

然后，在您的 css 中，添加：

```
.box > .trans {
    height:365px;
    overflow:hidden;
    }

.box > .trans:hover{
    height: 500px;
    -webkit-transition: height .25s linear;
    transition: height .25s linear;
    } 
```

这会给你一个 mouseenter/mouseleave 类型的效果。我不认为你能做一个“onclick”类型的效果，只用 CSS 就可以打开它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T17:52:44.090

您将需要使用 javascript 来监听触发转换的事件，除非您希望它在悬停时应用。所以，你可以从这样的事情开始：

```
$('.box').click(function(){
    $(this).toggleClass('show');
}); 
```

然后在 css 中，您需要应用具有新大小和过渡的类：

```
.show
{
height: 300px;
-webkit-transition: height .25s ease-in-out;
transition: height .25s linear;
} 
```

如果你想要一个纯粹的 CSS 解决方案，那么你必须像 redlena 所说的那样使用 ':hover' 伪类来处理这个问题。我要做的唯一区别是您不需要额外的 div (.trans)，也不需要在 CSS 中指定子选择器 (.box > .trans)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T16:32:59.160

这不能用纯 CSS 来实现，尝试使用 JavaScript 或 jQuery

此[示例](http://jsfiddle.net/jackdent/mrS5b/4/)使您关闭，但单击后它不会保持活动状态。

# git - github：我应该如何解决这个问题

> ID：10127619
> 
> 赞同：0
> 
> 时间：2012-04-12T16:19:31.947
> 
> 标签：git

这可能很复杂。

我派生了一个存储库，对提交点 B 和从 B 创建更改，并创建了一些其他更改，即提交点 C。

原主 ---> 提交 B ---> 提交 C

由于 B 和 C 不会相互干扰（完全适用于不同的文件），我将首先发送 C 的拉取请求。

但是如何？一旦我点击“Pull Request”，B 和 C 都会被发送出去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:22:25.970

创建一个新分支并将 C 放入其中，然后拉取您的新分支。

# sql-server - 如何确定用于存储表数据的文件或文件组？

> ID：10127623
> 
> 赞同：-2
> 
> 时间：2012-04-12T16:19:54.703
> 
> 标签：sql-server

我想指定一个特定的文件或文件组来保存数据库中的特定表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:25:36.983

你需要更具体。您可以通过以下方式确定数据库中可用的数据文件：

```
SELECT name, physical_name, state_desc, size, max_size, is_read_only
  FROM databasename.sys.database_files  
  WHERE type_desc = 'ROWS'; 
```

您可以在此处查看文件组：

```
SELECT name, type_desc, is_read_only 
  FROM sys.filegroups; 
```

但是，您如何定性地选择一个用于创建新表的目标？`<shrug>`- 取决于你想如何决定，我们不知道。您可以使用此连接确定更多定性信息：

```
SELECT FileGroupName = fg.name, FileGroupType = fg.type_desc, 
    FileGroupReadOnly = fg.is_read_only, 
    [FileName] = f.name, [FileLocation] = f.physical_name, 
    [FileState] = f.state_desc, f.size, f.max_size, 
    FileReadOnly = f.is_read_only
FROM sys.filegroups AS fg
LEFT OUTER JOIN sys.database_files AS f
ON fg.data_space_id = f.data_space_id
ORDER BY fg.data_space_id; 
```

这将向您显示每个文件组中的文件、它们的状态/位置/大小，并且还会显示您何时有未使用的文件组（这些行的所有文件列都将为 NULL）。因此，这些详细信息可以帮助您确定要指定的文件组。

当您决定使用哪个文件组时，您可以说：

```
CREATE TABLE dbo.foo(...) ON FileGroupName; 
```

您可以在此处查看完整的语法[`CREATE TABLE`](http://msdn.microsoft.com/en-us/library/ms174979.aspx)。您没有指定版本，因此您可能必须从“其他版本”下拉列表中选择适当的选项。

# wpf - 如何在棱镜的属性内定义一个区域

> ID：10127626
> 
> 赞同：0
> 
> 时间：2012-04-12T16:20:08.483
> 
> 标签：wpf, prism

我有一个 ContentControl 托管一个区域，该区域位于一个属性内。问题是，prism 在这个 ContentControl 上找不到区域管理器。

```
<MyView>
   <MyView.Menu>
      <MyMenu>
         <ContentControl prism:RegionManager.RegionName="AppBarRegion" />
      </MyMenu>
   </MyView.Menu>
</MyView> 
```

有没有办法解决这个问题？

谢谢你的帮助，恩尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:56:54.530

您是否为您的区域添加了任何视图？如果是这样，我从你的问题中收集到，当你运行应用程序时，你只是没有看到它们，在你的 Unity Bootstrapper 中

```
protected override void InitializeModules ()
    {
        base.InitializeModules ();

        var manager = Container.Resolve<IRegionManager> ();
        var region = manager.Regions["AppBarRegion"];

        /*i am assuming you have added some views to your region :) */
        region.Activate (region.Views.FirstOrDefault ());
    } 
```

这是 prism 应用检查列表的示例链接：

[http://www.codeproject.com/Articles/165376/A-Prism-4-Application-Checklist](http://www.codeproject.com/Articles/165376/A-Prism-4-Application-Checklist)

# javascript - 如何为 JSON 对象赋值

> ID：10127630
> 
> 赞同：2
> 
> 时间：2012-04-12T16:20:29.963
> 
> 标签：javascript

我有以下代码不起作用。我正在尝试将文本“John”推到对象的末尾。我更熟悉 PHP，这适用于 PHP。

```
var data = {};
var field_name = "first_name";

data[field_name]['answers'][] = "John";

alert(data['first_name']['answers'][0]); 
```

**编辑：**

我也尝试了以下方法，但没有奏效。

```
var data = {};
var field_name = "first_name";
var i=0;

data[field_name]['answers'][i] = "John";

alert(data['first_name']['answers'][0]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:22:15.673

试试这个：

```
var data = {};
var field_name = "first_name";
data[field_name] = {};
data[field_name].answers = [];
data[field_name].answers.push("John");

alert(data['first_name'].answers[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:35:25.917

不能像 PHP 那样随意定义更多的数组维度或动态扩展边界。你需要做这样的事情（简写 [ ] 符号也可以用来代替 new Array()。我只是更喜欢这种方式。）：

```
var data = {};
var field_name = "first_name";

//Create the new dimensions
data[field_name] = new Array();
data[field_name]['answers'] = new Array();
//Push the new element
data[field_name]['answers'].push("John");

alert(data['first_name']['answers'][0]);​​​​​​​​​​​​​ 
```

# javascript - 动态设置输入框的值

> ID：10127633
> 
> 赞同：1
> 
> 时间：2012-04-12T16:20:39.590
> 
> 标签：javascript, asp.net

我有一个带有输入文本框控件的 aspx 页面，我想为其设置一个值。我希望它在提交表单时根据文本框的当前文本动态更改值。有谁知道如何在没有 jquery 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:26:55.873

我认为这是您要的，但不确定：

**JavaScript：**

```
function ChangeValue(currentTxtBox, newValue)
{
     var otherTxtbox = document.getElementById('<%=otherTxtbox.ClientID%>');
     otherTxtbox.value = currentTxtBox.value;
} 
```

**标记：**

```
<asp:textbox id="bla" runat="server" onchange="ChangeValue(this)" />

<asp:textbox id="otherTxtbox " runat="server" /> 
```

# ruby-on-rails - Rails嵌套集具有覆盖的属性和关联？

> ID：10127634
> 
> 赞同：1
> 
> 时间：2012-04-12T16:20:44.583
> 
> 标签：ruby-on-rails, associations, overriding, acts-as-nested-set

是否有一个nested_set gem 可以让您继承父级的属性和关联，并让您覆盖特定属性，独立于父级存储覆盖？

# xpages - 使用用户 ID 签署或解密文档

> ID：10127636
> 
> 赞同：0
> 
> 时间：2012-04-12T16:20:57.517
> 
> 标签：xpages

XPages 可以使用 Notes Java API 对文档进行签名/加密，这里有一些示例：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/NotesDocument_sample_JavaScript_code_for_XPages#sign](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/NotesDocument_sample_JavaScript_code_for_XPages#sign)

不幸的是，这一切都是由服务器身份完成的——在上面的示例中，文档由服务器 ID 签名（在 XPiNC 的情况下，它是用户的 ID），因此服务器能够加密文档（使用 PublicEncryptionKeys 字段中指定的用户的公钥）。但问题是签署或解密文件（需要私钥）。使用加密文档初始化数据源失败。

可以使用 LotusScript 代理和 Notes C API 调用来调用签名/解密方法，但 API 需要文件系统上可用的 Notes ID 文件和该 ID 的用户密码（作为字符串）。

我正在寻找建议，如何安全地签署或解密文档（例如基于存储在用户邮件文件中的 ID）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:56:42.077

与 IBM 建立 PMR。这是一个很长一段时间的棘手问题。如果您的用户在他们的邮件文件中将 id 作为 iNotes 的一部分，那么您可以使用签名/加密。

**更新** 长答案：

从 7.0 版开始，C-API 中的[加密函数](http://www-12.lotus.com/ldd/doc/tools/c/7.0/api70ug.nsf/85255d56004d2bfd85255b1800631684/85255d56004d2bfd85255cf1006b33f4?OpenDocument)不依赖于*当前*的id 文件，而是依赖于正确提供的凭据。一篇 developerworks[文章](http://www.ibm.com/developerworks/lotus/library/nd7-security-api/)详细解释了这一点。您可以使用这些调用和 iNotes 数据库中的 Notes.id（如果邮件文件位于同一服务器上）并实现加密/解密。对 DominoDocument 进行子类化可能是压力最小的方法。或者，您可以让每个可以接触到的客户为此开设 PMR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:14:21.530

Frantisek ，不是一个答案——我看不到在哪里发表评论——只是添加到你与斯蒂芬的对话中。我可以与您的售前 PMR 的困境联系起来，但您确实有一些选择。

您对 PMR 的看法是正确的，但您可以向 IBM 提出帮助台查询，根据我的经验，响应非常有帮助。

此外，您可能是 IBM 客户，因为您可能拥有“超值包”或明确许可以允许您访问您的服务器。

尝试[http://www-947.ibm.com/support/entry/portal/Open_service_request/Software/Lotus/Lotus_brand_support_(general](http://www-947.ibm.com/support/entry/portal/Open_service_request/Software/Lotus/Lotus_brand_support_(general) )

[另一种选择是在虚拟创新中心注册，因为他们可以提供一些支持，但如果您能找到您的用户 ID https://www-304.ibm.com/partnerworld/wps/servlet/ContentHandler](https://www-304.ibm.com/partnerworld/wps/servlet/ContentHandler/isv_com_tsp_vic_overview)，上述直接途径会更好 [/isv_com_tsp_vic_overview](https://www-304.ibm.com/partnerworld/wps/servlet/ContentHandler/isv_com_tsp_vic_overview)

# java - Android 测验逻辑/编码

> ID：10127640
> 
> 赞同：0
> 
> 时间：2012-04-12T16:21:08.703
> 
> 标签：java, android

我用actionscript做了一个测验。我已经开始在android（完整的新手）中进行测验，遵循动作脚本，以免让我的逻辑陷入困境。

我不知道如何处理 change_question 函数，尤其是第一块。以下。

```
 function change_question(){
  if(tick.visible){
     right_answers++;
  }
  if(cross.visible){
     wrong_answers++;
  }
  if(qno==questions.length){
       gotoAndPlay(2);
   }else{
  tick.visible=false;
  cross.visible=false;
  rnd1=Math.ceil(Math.random()*3);
  rnd2=Math.ceil(Math.random()*questions.length)-1;
  q.text=questions[rnd2];
  if(questions[rnd2]=="x"){
  change_question();
  }
  questions[rnd2]="x";
  enable_disable(1); 
```

任何指导将不胜感激。提前致谢。

* * *

到目前为止，这是我的 android 代码！

```
package ks3.mathsapp.project;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;

public class MathsMultiplicationActivity extends Activity {

TextView quesnum;
TextView ques;
TextView anst;
TextView ans1;
TextView ans2;
TextView ans3;
TextView ans4;
ImageView cross;
ImageView tick;

    int qno = 0;
    int right_answers = 0;
    int wrong_answers = 0;
    int rnd1;
    int rnd2;

    String [] questions = {"How much mph does the F-Duct add to the car?",
              "What car part is considered the biggest performance variable?",
              "What car part is designed to speed up air flow at the car rear?",
              "In seconds, how long does it take for a F1 car to stop when travelling at 300km/h?",
              "How many litres of air does an F1 car consume per second?",
              "What car part can heavily influence oversteer and understeer?",
              "A third of the cars downforce can come from what?",
              "Around how much race fuel would be consumed per 100km?","The first high nose cone was introduced when?",
              "An increase in what, has led to the length of exhaust pipes being shortened drastically?"};

    String [] [] answers = {{"3","5","8","9"},
    {"Tyres","Front Wing","F-Duct","Engine"},
    {"Diffuser","Suspension","Tyres","Exhaust"},
    {"4","6","8","10"},
    {"650","10","75","450"},
    {"Suspension","Tyres","Cockpit","Chassis"},
    {"Rear Wing","Nose Cone","Chassis","Engine"},
    {"75 Litres","100 Litres","50 Litres","25 Litres"},
    {"1990","1989","1993","1992"},
    {"Engine RPM","Nose Cone Lengths","Tyre Size","Number of Races"}};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.multiplechoice);

    // Importing all assets like buttons, text fields
    quesnum = (TextView) findViewById(R.id.questionNum);
    ques = (TextView) findViewById(R.id.question);
    anst = (TextView) findViewById(R.id.answertit);
    ans1 = (TextView) findViewById(R.id.answer1);
    ans2 = (TextView) findViewById(R.id.answer2);
    ans3 = (TextView) findViewById(R.id.answer3);
    ans4 = (TextView) findViewById(R.id.answer4);
    cross = (ImageView) findViewById(R.id.cross);
    tick = (ImageView) findViewById(R.id.tick);

    cross.setVisibility(View.GONE); 
    tick.setVisibility(View.GONE); 

        if(rnd1==1){
            TextView quesAns1 = (TextView) findViewById(R.id.answer1); 
            quesAns1.setText("1) " + answers[0]) ;            

            TextView quesAns2 = (TextView) findViewById(R.id.answer2); 
            quesAns2.setText("2) " + answers[1]) ;   

            TextView quesAns3 = (TextView) findViewById(R.id.answer3); 
            quesAns3.setText("3) " + answers[2]) ;   

            TextView quesAns4 = (TextView) findViewById(R.id.answer4); 
            quesAns4.setText("4) " + answers[3]) ;   
        }

        if(rnd1==2){
            TextView quesAns1 = (TextView) findViewById(R.id.answer1); 
            quesAns1.setText("1) " + answers[2]) ;            

            TextView quesAns2 = (TextView) findViewById(R.id.answer2); 
            quesAns2.setText("2) " + answers[0]) ;   

            TextView quesAns3 = (TextView) findViewById(R.id.answer3); 
            quesAns3.setText("3) " + answers[1]) ;   

            TextView quesAns4 = (TextView) findViewById(R.id.answer4); 
            quesAns4.setText("4) " + answers[3]) ;  
        }
        if(rnd1==3){
            TextView quesAns1 = (TextView) findViewById(R.id.answer1); 
            quesAns1.setText("1) " + answers[1]) ;            

            TextView quesAns2 = (TextView) findViewById(R.id.answer2); 
            quesAns2.setText("2) " + answers[2]) ;   

            TextView quesAns3 = (TextView) findViewById(R.id.answer3); 
            quesAns3.setText("3) " + answers[0]) ;   

            TextView quesAns4 = (TextView) findViewById(R.id.answer4); 
            quesAns4.setText("4) " + answers[3]) ;  
        }

    }

    } 
```

* * *

这是我一直用来帮助处理逻辑的动作脚本模型。

```
 var qno=0;var rnd1; var rnd2;
  tick.visible=false;cross.visible=false;
  var right_answers=0;var wrong_answers=0;

  function change_question(){
  if(tick.visible){
     right_answers++;
  }
  if(cross.visible){
     wrong_answers++;
  }
  if(qno==questions.length){
       gotoAndPlay(2);
   }else{
  tick.visible=false;
  cross.visible=false;
  rnd1=Math.ceil(Math.random()*3);
  rnd2=Math.ceil(Math.random()*questions.length)-1;
  q.text=questions[rnd2];
  if(questions[rnd2]=="x"){
  change_question();
  }
  questions[rnd2]="x";
  enable_disable(1);

  if(rnd1==1){opt1.text=answers[rnd2][0];opt2.text=answers[rnd2][1];opt3.text=answers[rnd2][2];opt4.text=answers[rnd2][3];} 
  if(rnd1==2){opt1.text=answers[rnd2][2];opt2.text=answers[rnd2][0];opt3.text=answers[rnd2][1];opt4.text=answers[rnd2][3];} 
  if(rnd1==3){opt1.text=answers[rnd2][1];opt2.text=answers[rnd2][2];opt3.text=answers[rnd2][0];opt4.text=answers[rnd2][3];} }} 

  function enable_disable(a){ 
  if(a==0)   {shade1.mouseEnabled=false;shade2.mouseEnabled=false;shade3.mouseEnabled=false;shade4.mouseEnabled=false;} 
  if(a==1){shade1.mouseEnabled=true;shade2.mouseEnabled=true;shade3.mouseEnabled=true;shade4.mouseEnabled=true;}}

change_question();

next_b.addEventListener(MouseEvent.CLICK, ButtonAction1); 
function ButtonAction1(eventObject:MouseEvent) {qno++;change_question();} 

shade1.addEventListener(MouseEvent.CLICK, ButtonAction2); 
shade2.addEventListener(MouseEvent.CLICK, ButtonAction3); 
shade3.addEventListener(MouseEvent.CLICK, ButtonAction4);
shade4.addEventListener(MouseEvent.CLICK, ButtonAction5);

 function ButtonAction2(eventObject:MouseEvent){enable_disable(0);if(rnd1==1){      tick.visible=true;tick.y=shade1.y}else{cross.visible=true;cross.y=shade1.y}}
 function ButtonAction3(eventObject:MouseEvent){enable_disable(0);if(rnd1==2){tick.visible=true;tick.y=shade2.y}else{cross.visible=true;cross.y=shade2.y}}
 function ButtonAction4(eventObject:MouseEvent){enable_disable(0);if(rnd1==3){tick.visible=true;tick.y=shade3.y}else{cross.visible=true;cross.y=shade3.y}}
 function ButtonAction5(eventObject:MouseEvent){enable_disable(0);if(rnd1==4){tick.visible=true;tick.y=shade4.y}else{cross.visible=true;cross.y=shade4.y}}

stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:57:09.680

我会给你几点（我会随时将它们编辑成这个答案，绝对没有逻辑顺序）。

*   当您定义您的个人时`rnd`，请在成员中设置您的问题`TextView[]`。这样你就不需要多少调用`findViewById()`，如果了解java中[增强的for循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)，这将为你节省大量代码。

*   `shade1.addEventListener(MouseEvent.CLICK, ButtonAction2);`会变成

    ```
    shade1.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            buttonAction2();
        }
    }; 
    ```

*   你找到了`setVisibilty()`and `getVisibility()`，如果你只是想在其他元素上禁用 onClick 事件，你可以使用`setEnabled(true | false)`

希望这有助于推动你前进。

# jquery - jquery代码在本地主机上工作但不在远程服务器上

> ID：10127646
> 
> 赞同：0
> 
> 时间：2012-04-12T16:21:42.227
> 
> 标签：jquery, .htaccess, loading

好的，我正在以下网站上工作：

[http://clinicasdefertilidadenlima.pe/demo/](http://clinicasdefertilidadenlima.pe/demo/)

如果您打开它并单击图片下方的链接“Enviale un correo”，它应该会打开一个未显示的联系表格。我使用 Firebug 查看出了什么问题，在控制台中它以红色显示状态 200 OK，并且不显示表单。而且 Firebug 也不会显示“响应”选项卡，我可以在其中看到收到的响应。

上面的 URL 在 localhost 上运行良好。

[此表格是在http://www.clinicasdefertilidadenlima.pe/](http://www.clinicasdefertilidadenlima.pe/)下方的实时网站上工作的表格的精确副本

实时站点表单显示正常，Firbug 控制台显示 200 OK，但为正常黑色。它显示“响应”选项卡，我可以在其中看到收到的响应。

现场形式和演示网站形式之间的唯一区别是，我在演示形式中添加了一个新字段，并更新了其后端 PHP 代码。就是这样！

现在对于我的生活，我无法解决这个问题。我已经尝试了一个多小时，但徒劳无功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:28:44.203

您必须向同一个域提出请求。将 www 添加到 url，它将起作用。试试：[http ://www.clinicasdefertilidadenlima.pe/demo/](http://www.clinicasdefertilidadenlima.pe/demo/)

为避免此问题，请将其添加到您的 .htaccess 文件中：

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  RewriteCond %{HTTP_HOST} ^clinicasdefertilidadenlima\.pe$
  RewriteRule ^(.*)$ "http\:\/\/www\.clinicasdefertilidadenlima\.pe\/$1" [R=301,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:27:39.273

看起来您遇到了 Access-Control-Allow-Origin 问题 - 您需要配置 apache 以允许来自没有 www 子域的域的请求。您可以在 .htaccess 文件中更改此设置。

[更多信息在这里](http://www.skill-guru.com/blog/2011/02/04/adding-access-control-allow-origin-to-server-for-cross-domain-scripting/)

# asp.net-mvc - 使用模型绑定在 MVC3 中上传多个文件

> ID：10127648
> 
> 赞同：3
> 
> 时间：2012-04-12T16:21:54.393
> 
> 标签：asp.net-mvc, model-binding, image-upload

所以我想对我的唱片收藏进行编目。我也想学习一些MVC。所以我决定在 MVC 中建立一个记录编目网站。我就是这样工作的。

我只是在尝试，但不知道如何将多个文件上传到我的 SQLCE 数据库。我对这里的选项持开放态度 - 将图像存储为 BLOBS 或简单地作为文件名并将图像上传到文件系统。

我的简单模型是这样的：

```
public class Record
{
    [ScaffoldColumn(false)]
    public int RecordId { get; set; }
    [Required(ErrorMessage = "Artist is required")]
    public string Artist { get; set; }
    [Required(ErrorMessage = "Title is required")]
    public string Title { get; set; }
    [DisplayName("Release Date")]
    [DisplayFormat(DataFormatString = "{0:d}")]
    public DateTime ReleaseDate { get; set; }
    [Required(ErrorMessage = "Format is required")]
    public string Format { get; set; }
    public string Label { get; set; }
    [DisplayName("Catalogue Number")]
    public string CatalogueNumber { get; set; }
    public string Matrix { get; set; }
    public string Country { get; set; }
    public IEnumerable<HttpPostedFileBase> Images { get; set; }
    public string Notes { get; set; }
} 
```

我的观点是：

```
@model Records.Models.Record
@{
    ViewBag.Title = "Create";
}
<h2>Create</h2> 
```

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Record</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Artist)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Artist)
        @Html.ValidationMessageFor(model => model.Artist)
    </div>

    // snipped for brevity

    <div class="editor-label">
        @Html.LabelFor(model => model.Notes)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Notes)
        @Html.ValidationMessageFor(model => model.Notes)
    </div>
    <div class="editor-field">
       <input type="file" name="images" id="image1"/>
       <input type="file" name="images" id="image2"/>
       <input type="file" name="images" id="image3"/>
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

我的创建方法是：

```
 [HttpPost]
    public ActionResult Create(Record record, IEnumerable<HttpPostedFileBase> images)
    {
        if (ModelState.IsValid)
        {
            foreach (HttpPostedFileBase image in images)
            {
                if (image.ContentLength > 0)
                {
                    var fileName = Path.GetFileName(image.FileName);
                    var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
                    image.SaveAs(path);
                } 
            }

            db.Records.Add(record);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(record);
    } 
```

但是，图像（我的 Create 方法参数）始终为 null，而 Model.IsValid 始终为 false。

为什么是这样？我尝试将图像上传输入命名为“图像”、“图像”、“图像 [n]”，图像始终为 0。

我真的不想为此使用任何插件，有简单的原生 MVC 方式吗？我对帮助者持开放态度！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:35:43.737

我以前有过这个。这可能是解决办法。

看起来您缺少`multipart/form-data`视图中的 ( `@using (Html.BeginForm())`)

尝试替换`@using (Html.BeginForm())`为 `@using (Html.BeginForm("action", "controller", FormMethod.Post, new { enctype = "multipart/form-data" }))`

显然用你的替换动作和控制器。

希望这会有所帮助~

编辑：抱歉，刚刚看到发布的日期，如果您还没有弄清楚，那么也许就是这样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T19:01:46.083

一个完美的博客关于[这里](http://www.prideparrot.com/blog/archive/2012/8/uploading_and_returning_files)

# javascript - 主干集合 - 过滤和呈现集合会丢失对原始未过滤集合的引用

> ID：10127650
> 
> 赞同：6
> 
> 时间：2012-04-12T16:21:58.540
> 
> 标签：javascript, backbone.js

我正在设置一个由 Backbone 驱动的应用程序。我面临一个“应该简单”的问题，我有一个名为“Message”的模型，一个名为“MessageList”的集合，以及一个名为“MessageView”和“MessageListView”的视图。

MessageListView 代码呈现 MessageList。我有 4 个切换按钮来过滤 MessageListView 显示的内容。过滤器按钮是“全部”、“活动”、“已标记”和“已忽略”。“全部”是页面加载时的初始过滤器。当用户按下“标记”过滤器时，只会出现带有标记==1 的消息。再次按下“全部”时，所有消息应再次出现。

我遇到的问题以及我的设计中的问题是，当我根据 filterString 过滤 Collection 时，对原始整个 Collection 的引用会丢失。因此，当再次按下“全部”时，消息已丢失。

我很好奇在 Backbone 中执行此操作的最佳方法...

这是设置代码...

```
 var messageListView = new MessageListView({collection: messageList}); 
```

这是 MessageListView 代码...

```
MessageListView = Backbone.View.extend({

    initialize : function() {

        this.collection.on("add", function(model) {
            var view = new MessageView({model: model});
            $("div.cameras").prepend(view.render().el);
        });

        this.collection.on("remove", function(model) {
            var ID = model.id;
            $("#message-" + ID).parent("div.message").remove();
        });

        this.collection.on("reset", function(models) {
            $("div.cameras").empty();
            models.each(function(message) {
                var view = new MessageView({model: message});
                $("div.cameras").prepend(view.render().el);
            });
        });

    },

    filterMessages : function(filterString) {
        var filtered = this.collection.filter(function(model){

            if (filterString == "all")
            {
                return true;
            }
            else if (filterString == "active")
            {
                return model.get("ignore") == "0";
            }
            else if (filterString == "ignore")
            {
                return model.get("ignore") == "1";
            }
            else if (filterString == "flag")
            {
                return model.get("flag") == true;
            }

        });
        this.collection.reset(filtered);
    }, 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T16:50:23.823

你打电话时

```
this.collection.reset(filtered) 
```

您正在丢弃旧数据并用新数据替换它。

相反，您要做的是拥有一个临时“集合”（数组或 Backbone.Collection）来保存过滤器的结果，这就是您用作将消息呈现到 DOM 的“数据源”。

有几种方法可以做到这一点。

1.  只需在每种情况下（包括“所有”情况）呈现 filterMessages 函数的 [array] 输出 - 但不要将该结果反馈回原始集合。
2.  创建第二个集合以接收 filterMessages 函数的结果，并再次呈现该集合，保持原始集合不变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-20T21:14:44.393

您可以使用[Backbone.CollectionView](http://rotundasoftware.github.io/backbone.collectionView/)，它允许您使用该`visibleModelsFilter`选项指定集合中的哪些模型当前可见。

设置代码...

```
var messageListView = new MessageListView( {
    collection: messageList,
    modelView : MessageView
} ); 
```

消息列表查看代码...

```
MessageListView = Backbone.CollectionView.extend( {

    filterMessages : function(filterString) {
        if (filterString == "all") {
            this.setOption( "visibleModelsFilter", null );
        }
        else if (filterString == "active") {
            this.setOption( "visibleModelsFilter", function( thisModel ) {
                return model.get("ignore") == "0";
            } );
        }
        else if (filterString == "ignore") {
            this.setOption( "visibleModelsFilter", function( thisModel ) {
                return model.get("ignore") == "1";
            } );
        }
        else if (filterString == "flag") {
            this.setOption( "visibleModelsFilter", function( thisModel ) {
                return model.get("flag") == true;
            } );
        }
    }

} ); 
```

# javascript - 类链中的继承类型

> ID：10127659
> 
> 赞同：0
> 
> 时间：2012-04-12T16:22:37.143
> 
> 标签：javascript, inheritance

我创建了[这个 jsfiddle](http://jsfiddle.net/v6NsB/2/)来展示我面临的问题。
我建议在继续阅读之前先看看它。

好的，现在我们准备好了。
如您所见，有一个类继承链：`LeafDevice`-> `EndDevice`-> `SubNetDevice`-> `NetDevice`-> `Device`。当我实例化一个新`LeafDevice`的链时（即它以正确的顺序执行），但只有来自`LeafDevice`和的属性`EndDevice`被设置（查看控制台）。
当我运行 update 方法时，它似乎每 2 跳一个类...我的意思是，您从输出中看到 javascript 似乎没有运行`EndDevice.update()`and方法...只有来自,和的`NetDevice.update()`属性被更新/添加（再次，看看控制台）...... 这让我发疯，因为我无法弄清楚我做错了什么！ 我想要做的是实例化一个`Device``SubNetDevice``LeafDevice`

`LeafDevice`遵循我定义的继承链的对象，以便在最后它具有所有定义的属性（`myDeviceAttr`, `myNetDeviceAttr`, `mySubNetDeviceAttr`, `myEndDeviceAttr`, `myLeafDeviceAttr`）。
你能就这里发生的事情提供一些想法吗？
非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:32:49.193

这是您用来调用更新 EndDevice 并期望`update EndDevice`出现的代码

```
EndDevice.prototype.update.call(this, pDevice); 
```

但在这儿

```
EndDevice.prototype = new SubNetDevice; 
```

您清楚地将 SubNetDevice 的对象分配为 EndDevice 的原型

所以，EndDevice.prototype.update 等价于

```
var a = new SubNetDevice();
a.update() 
```

因此，您无法`update EndDevice`在日志中看到

Net Device 的原因也一样。

试试[http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

上面链接中的扩展功能应该可以解决您的问题

要修复上述小提琴，在 LeafDevice 更改

```
EndDevice.prototype.update.call(this, pDevice); 
```

到

```
LeafDevice.prototype.update.call(this, pDevice); 
```

之所以需要此更改，是因为您需要调用 LeafDevice's -> EndDevice's -> Update 方法，该方法可用 @`LeafDevice.prototype.update`但此处不可用`EndDevice.prototype`，即 EndDevice's -> SubNetDevice's -> Update 方法

这同样适用于您的所有课程

你也错过`.call`了

```
SubNetDevice(this, pDevice); 
```

这应该可以解决您的属性问题

[http://jsfiddle.net/v6NsB/8/](http://jsfiddle.net/v6NsB/8/)这是你更新的小提琴

# java - 使用 JGit 提交字符串

> ID：10127661
> 
> 赞同：8
> 
> 时间：2012-04-12T16:22:53.533
> 
> 标签：java, jgit

一个 JGit 初学者问题：

我使用 JGit 从存储库中读取文件 (BLOB) 并操作其内容。之后，我想将具有相同文件名的新内容作为新提交写回存储库。但是如何使用 JGit 提交新内容呢？

我的伪代码：

```
String gitUrl = "path/to/repository/.git";
Repository repository = new FileRepository(gitUrl);
String filename = "test/seppl.txt";
blobId = getIdOf(filename);
ObjectLoader object = repository.open(blobId, Constants.OBJ_BLOB);
ObjectStream is = object.openStream();
String newContent = processStream(is);
// How to commit the newContent in filename? 
```

我是否必须将其写入文件并使用[AddCommand](http://jgit.info/javadoc/org/eclipse/jgit/api/AddCommand.html)和[CommitCommand](http://jgit.info/javadoc/org/eclipse/jgit/api/CommitCommand.html)`newContent`提交该文件？或者我可以将字符串“on-the-fly”以相同的文件名写入存储库吗？

网络上是否有任何使用 JGit 提交的示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T13:44:42.557

我认为除了使用 CommitCommand 之外没有其他方法可以提交任何数据（合并或非常具体的此类操作除外）。

所以，是的，您应该对文件进行任何更改，然后添加并提交（使用 API 中的 AddCommand 和 CommitCommand）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T05:58:10.043

Yes, of course you can do what you want, but just not using Add/Commit as they are part of the **high-level** [Porcelein API](http://wiki.eclipse.org/JGit/User_Guide#Porcelain_API) which is just a convenience API built ***on top*** of the low level API. Thus they just implement the most common use cases.

What you need to do is to look at the implementation of the [AddCommand](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/api/AddCommand.java#L125) and [CommitCommand](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/api/CommitCommand.java#L149) to see how to use the lower-level API to create BLOB objects and then tree objects and than commit objects.

I'd second the recommendation that you thoroughly [read chapter 9 of the Pro Git book](http://git-scm.com/book/en/Git-Internals) so that you properly understand how Git works on a low level.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T14:57:51.757

您可能想研究在 Git 中使用 Blob。此技术用于在签署标签时存储公共 PGP 密钥。看起来您想要的*内容*仍然必须放入一个文件中，但它可以是一个临时文件。当有人拉动时，该文件将不存在于主目录中。它将是树中的一个条目，作为一个 blob。

[http://book.git-scm.com/7_raw_git.html](http://book.git-scm.com/7_raw_git.html)

告诉它`-w`写入条目并返回哈希。

```
git hash-object -w myfile.txt
6ff87c4664981e4397625791c8ea3bbb5f2279a3 
```

*更新*

我在手机上浏览了此条目，因此对您提供的细节没有那么关注。是的，您需要将字符串写入文件，但不，您不必像普通文件一样添加它。我怀疑 JGit 有能力做`hash-object`. 看起来您已经有了一些代码来处理 BLOB 条目。也许对哈希对象有更高级别的调用，您不直接处理 BLOB。

考虑到 Git 中的所有内容都依赖于内容的哈希值，我想说的是，即使您确实找到了一种直接编写字符串的方法，也不应该这样做。您应该使用相同的文件名重新提交对象，以便获得新的哈希和更新的条目。

# c# - 处理 MDI 表单中的异常

> ID：10127662
> 
> 赞同：2
> 
> 时间：2012-04-12T16:23:03.203
> 
> 标签：c#, winforms, exception-handling

C# WinForms：有一个主 C# 应用程序，可以加载一些其他 DLL 并将它们显示为 MDI 表单。所以它们都在一个线程中 [STA] 现在，如果 MDI 表单由于 Null 引用原因而崩溃，它将导致整个应用程序崩溃并关闭。我正在寻找的是一种能够仍然保持主应用程序打开和运行的方法，因此它可以捕获发生的异常..有没有办法呢？在这种情况下我应该使用 Application.ThreadException 吗？如果那是我应该采取的路线，你能更具体一点吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:59:48.567

是的，Application.ThreadException 就是您要查找的内容，因为您无法控制导致异常的 DLL。

[这是一个关于如何实现这些方法的好例子](http://www.csharp-examples.net/catching-unhandled-exceptions/)

祝你好运！

# ruby-on-rails - 控制器中定义的路径和动作被忽略，Ruby on Rails

> ID：10127664
> 
> 赞同：1
> 
> 时间：2012-04-12T16:23:13.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, path, render

根据[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

我应该能够定义来自不同控制器的路径，就像我在 micropostscontroller 中的创建操作中所做的那样：

```
def create
      @micropost = current_user.microposts.build(params[:micropost])
      if @micropost.save
        flash[:success] = "Micropost created!"
        redirect_to profile_path
      else
        render 'static_pages/profile'
      end
    end 
```

但是，当我没有成功创建帖子时（将其留空或使其太长），页面“/microposts”被渲染，控制器的主页不存在。当我成功创建微博时，我被重定向到配置文件路径“/profile”，并且当我更改`render 'static_pages/profile'`为`redirect_to profile_path`重定向工作时。为什么浏览器会忽略渲染请求并转到 microposts 控制器主页？

此外，渲染的微博页面给出了 NoMethodError：

```
NoMethodError in Microposts#create

undefined method `name' for nil:NilClass

<% provide(:title, @user.name) %>

app/views/static_pages/profile.html.erb:16:in `_app_views_static_pages_profile_html_erb___1610169404003779010_70327969935820'
app/controllers/microposts_controller.rb:10:in `create' 
```

当重定向到时，配置文件会自行呈现良好的状态，因为 @user 是在 static_pages 控制器的配置文件操作中定义的。`@user = User.find_by_remember_token(cookies[:remember_token])`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:55:49.103

您的 create 方法正在尝试渲染“app/views/static_pages/profile.html.erb”，但您没有给它一个@user 来渲染。如果您以这种方式修改代码，它应该可以工作：

```
def create
  @micropost = current_user.microposts.build(params[:micropost])
  if @micropost.save
    flash[:success] = "Micropost created!"
    redirect_to profile_path
  else
    @user = current_user # Add this line!
    render 'static_pages/profile'
  end
end 
```

请注意，该`microposts#create`方法的路径是，因此除非您使用，`/microposts`否则它仍会显示在您的地址栏中。`redirect_to``render`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:57:55.860

我想你误解了什么`render`。它只是改变渲染的模板。它不会导致控制器中与模板（如果有）相关的任何代码被执行。

堆栈跟踪显示它正在呈现您请求的文件，尽管它似乎希望`@user`被定义，而您在创建操作中似乎没有这样做。设置`@user`为`current_user`，你应该没问题。

不过，重定向可能是一个更好的选择——如果用户刷新页面，它可能会重新提交表单数据，而重定向则不会发生。

# python - 日期比较/连续日期分组

> ID：10127666
> 
> 赞同：1
> 
> 时间：2012-04-12T16:23:22.023
> 
> 标签：python, date, compare, iteration

我正在尝试编写一个识别日期组并测量组大小的函数。

该函数将获取已按日期顺序排序的元素列表（这些元素是 CSV 文件中包含日期的单独行）。该列表的长度可能为 0 到 n 个元素。我希望在输入时写入列表，并添加日期组的大小。

例如，列表

```
Bill 01/01/2011

Bill 02/01/2011

Bill 03/01/2011

Bill 05/01/2011

Bill 07/01/2011 
```

应输出（理想情况下打印到文件）为

```
Bill 01/01/2011 3

Bill 02/01/2011  3

Bill 03/01/2011  3

Bill 05/01/2011  1

Bill 07/01/2011  1. 
```

我已经调用了一个函数`isBeside(string1, string2)`，它返回两者之间的增量。

到目前为止我的尝试是这样的（一个迭代的混乱，我确信 python 可以比这更优雅）

Note`coll[i][1]`包含 CSV 行的日期元素。

```
def printSet(coll):
    setSize = len(coll)
    if setSize == 0:
    #dont need to do anything
elif setSize == 1:

    for i in coll:
        print i, 1

elif setSize > 1:

    printBuffer = [] ##new buffer list which will hold sequential dates, 
                        until a non-sequential one is found
    printBuffer.append(coll[0]) #add the first item
    print 'Adding ' + str(coll[0])

    for i in range(0, len(coll)-1):

        print 'Comparing ', coll[i][1], coll[i+1][1], isBeside(coll[i][1],  coll[i+1][1])

        if isBeside(coll[i][1],  coll[i+1][1]) == 1:
            printBuffer.append(coll[i+1])
            print 'Adding ' + str(coll[i+1])
        else:
            for j in printBuffer:
                print j, len(printBuffer)
            printBuffer = []
            printBuffer.append(coll[i])

return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:53:19.373

像这样的东西？

```
from datetime import date, timedelta

coll = [['Bill', date(2011,1,1)],
        ['Bill', date(2011,1,2)],
        ['Bill', date(2011,1,3)],
        ['Bill', date(2011,1,5)],
        ['Bill', date(2011,1,7)]]

res = []
group = [coll[0]]
i = 1

while i < len(coll):
    row = coll[i]
    last_in_group = group[-1]

    # use your isBeside() function here...
    if row[1] - last_in_group[1] == timedelta(days=1):
        # consecutive, append to current group..
        group.append(row)
    else:
        # not consecutive, start new group.
        res.append(group)
        group = [row]
    i += 1

res.append(group)

for group in res:
    for row in group:
        for item in row:
            print item,
        print len(group) 
```

它打印：

```
Bill 2011-01-01 3
Bill 2011-01-02 3
Bill 2011-01-03 3
Bill 2011-01-05 1
Bill 2011-01-07 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:59:50.533

[datetime](http://docs.python.org/library/datetime.html)模块非常适合处理日期，这比您当前使用的字符串比较要干净得多。

这是一个例子：

```
from datetime import datetime

def add_month(dt):
    # Normally you would use timedelta, but timedelta doesn't work with months
    return dt.replace(year=dt.year + (dt.month==12), month=(dt.month%12) + 1)

data = ['Bill 01/01/2011', 'Bill 02/01/2011', 'Bill 03/01/2011', 'Bill 05/01/2011', 'Bill 07/01/2011']
dates = [datetime.strptime(line.split(' ')[1], '%m/%d/%Y') for line in data]
buffer = [data[0]]
for i, date in enumerate(dates[1:]):
    if add_month(dates[i]) == date:
        buffer.append(data[i+1])
    else:
        print '\n'.join(line + ' ' + str(len(buffer)) for line in buffer)
        buffer = [data[i+1]]

print '\n'.join(line + ' ' + str(len(buffer)) for line in buffer) 
```

我假设您的日期在表单`month/day/year`中，如果它们实际上是，`day/month/year`那么您可以添加`from datetime import timedelta`到顶部，将格式更改`datetime.strptime()`为`'%d/%m/%y'`，而不是`add_month(dates[i]) == date`使用`date - dates[i] == timedelta(days=1)`。

# php - sql查询中的php变量

> ID：10127667
> 
> 赞同：0
> 
> 时间：2012-04-12T16:23:24.083
> 
> 标签：php, sql, variables

我有这个：

```
$result = mysql_query("SELECT * FROM animals WHERE hand= " .$_SESSION['SESS_HAND']. "); 
```

但总是显示“解析错误：解析错误，期待`T_STRING' or`T_VARIABLE' 或 `T_NUM_STRING”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:25:01.240

始终转义字符串变量：

```
$result = mysql_query("SELECT * FROM animals WHERE hand= '" .
mysql_real_escape_string($_SESSION['SESS_HAND']). "'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:36:01.250

您的查询不起作用的原因是因为您的 WHERE 的值不在单引号之间。

编辑：昆汀也是对的，你没有关闭最后一个括号的引号；）。

这将使查询工作：

```
$result = mysql_query("SELECT * FROM animals WHERE hand= '" .$_SESSION['SESS_HAND']. "'"); 
```

但就像 a1ex07 指出的那样，你应该总是逃避变量！上面的查询容易受到 MySQL 注入的影响。下面的示例通过转义变量显示了正确的方法，在我看来是更好的可读代码；）。

```
$query = "SELECT * FROM `animals` 
WHERE `hand` = '" .mysql_real_escape_string($_SESSION['SESS_HAND']). "'";

mysql_query($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:25:04.243

尝试：

```
$result = "SELECT * FROM animals WHERE hand= " . $_SESSION['SESS_HAND'];

mysql_query($result); 
```

此外，通过这样做，您可以调试您的查询，并通过编写以下代码准确查看它在 SQL 中所做的事情：

```
echo $result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:38:49.770

它给出了该错误消息，因为您永远不会完成您尝试在会话数据之后附加的字符串：`");`。

不过，不要通过将字符串混合在一起来构建 SQL 查询。[使用准备好的语句和参数化查询](https://stackoverflow.com/a/60496/19068)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T12:03:09.430

问题：

```
$result = mysql_query("SELECT * FROM animals WHERE hand= " .$_SESSION['SESS_HAND']. "); 
```

解决方案：

```
if (!$sessHand = mysql_real_escape_string($_SESSION['SESS_HAND']))
{ 
echo "There was a error: " . mysql_error();
}
else
{ $result = mysql_query("SELECT * FROM animals WHERE hand=$sessHand") } 
```

# excel - 条件公式

> ID：10127668
> 
> 赞同：0
> 
> 时间：2012-04-12T16:23:29.730
> 
> 标签：excel, excel-2007, excel-formula

在以下情况下需要您的帮助。

有三个条件。如果 A 列包含超过 5 个且 B 列包含超过 5 个...则 c 列必须显示为“是”。如果 A 和 B 列中的任何一个包含低于 5...则 C 列必须显示为“否”。

所以我写了这样的公式 =IF(AND(U9>0.05,W9>0.05),"Yes","No")。它正在工作。

但我需要在这里添加一个条件。如果 A 列包含空白..并且 B 列包含任何值...C 列必须显示为空白。

请帮助任何人。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:39:35.420

试试这个修改后的版本

=IF(U9="","",IF(AND(U9>0.05,W9>0.05),"是","否"))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:37:47.083

我会认为：

**=IF(AND(U9="", W9<>""), "", IF(AND(U9>0.05, W9>0.05), "是", "否")))**

# turbopower - TurboPower LockBox 如何使用带有字节数组的 AES 作为密钥

> ID：10127669
> 
> 赞同：1
> 
> 时间：2012-04-12T16:23:30.557
> 
> 标签：turbopower, lockbox-3

我想加密一个文件，但我有一个字节数组的密钥。我不想使用密码。可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:51:22.630

使用 TCodec.InitFromStream() 方法。请参阅[在线帮助](http://lockbox.seanbdurkin.id.au/LB3Help_TCodec_InitFromStream)。

另请参阅有关加密文件的[教程。](http://lockbox.seanbdurkin.id.au/Encrypt+a+file)

# php - 使用 PHP 循环 Google 搜索

> ID：10127670
> 
> 赞同：0
> 
> 时间：2012-04-12T16:23:38.217
> 
> 标签：php, html, search, fwrite

对于我正在编写的 iPhone 游戏，我编写了一个 PHP 脚本，该脚本循环遍历 50000 个单词的 CSV 文件，并将每个特定单词返回的 Google 结果的数量写入 .txt 文件。

PHP 代码一切正常并且可以正常工作......但是...... Google 在 50000 次搜索中搜索了大约 200 次后阻止了这些请求 :(

当我回显对我得到的页面的响应时 - HTTP 请求失败！HTTP/1.0 503 服务不可用

任何人都可以提出解决这个问题的方法吗？另外，对我来说奇怪的是，我可以在浏览器中从同一个 IP 地址搜索 Google，它会正常返回结果。

任何人都可以照亮整个事情吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:33:44.480

Google 不会让您将其搜索引擎用于此类目的。他们只允许“普通”用户查询他们的搜索引擎。

他们似乎有一个您可以使用的 API，但它限制为每天 100 个查询。要获得更多，您必须为 1000 次查询支付 5 美元。[https://developers.google.com/custom-search/v1/overview#Pricing](https://developers.google.com/custom-search/v1/overview#Pricing)

# java - 解析 RESTful XML 响应并在 JTable 中显示

> ID：10127677
> 
> 赞同：1
> 
> 时间：2012-04-12T16:24:13.047
> 
> 标签：java, xml, jaxb, jersey, jax-rs

我的 Web 服务正在运行，我可以使用以下代码打印出服务检索到的 XML：

```
resource = client.resource("http://localhost:8080/testProject/rest/items");
ClientResponse response= resource.get(ClientResponse.class);
String entity = response.getEntity(String.class);
System.out.println(entity); 
```

但是，我现在尝试使用此 XML 作为 JTable 的数据提供者，但我不知道如何解析它。我的代码在下面但不起作用，因为“实体”是一个字符串。

```
 JAXBContext context = JAXBContext.newInstance(Item.class);
    Unmarshaller um = context.createUnmarshaller();
    Item item = (Item) um.unmarshal(entity); 
```

所以我的问题是

我在这里做错了什么？

我不应该使用 .getEntity(String.Class) 来做到这一点吗？

有没有更简单的方法可以将此 XML 响应放入 JTable 中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:30:30.603

您可以使用以下方法从您的字符串创建一个[文档：](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Document.html)

```
 public static Document loadXML(String xmlAsString) {
    DocumentBuilder b = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    InputSource is = new InputSource(new StringReader(xmlAsString));
    return b.parse(is);
} 
```

然后您可以使用该文档并获取填充 JTable 所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:33:30.953

首先，除非绝对必要，否则*不要*将 xml 转换为字符串数据（这对于调试输出很好，但不适用于实际工作）。我个人没有使用过球衣，但我想你可以得到比字符串更好的 xml 格式（例如 DOM 文档）。

但是，如果您必须从字符串中获取 xml，那么您可以像这样解组它：

```
um.unmarshal(new StringReader(entity)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T15:12:25.380

将响应作为文档读取

```
Document xml = wsResponse.asXml();
displayXml(xml); 
```

之后使用下面的代码片段进行文本转换我使用了[ref](https://stackoverflow.com/questions/5456680/xml-document-to-string)

```
void displayXml(Document doc) {
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = null;
    try {
        transformer = tf.newTransformer();
    } catch (TransformerConfigurationException e1) {
        e1.printStackTrace();
    }
    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
    StringWriter writer = new StringWriter();
    try {
        transformer.transform(new DOMSource(doc), new StreamResult(writer));
    } catch (TransformerException e) {
        e.printStackTrace();
    }
    String output = writer.getBuffer().toString().replaceAll("\n|\r", "");
    System.out.println(output);
} 
```

# android - 在 ListView 中选择初始项目以更改样式

> ID：10127684
> 
> 赞同：1
> 
> 时间：2012-04-12T16:24:49.677
> 
> 标签：android, listview

我使用 ListView 作为菜单，当您选择一个项目时，样式会更改以显示它已被选中，并且内容窗格也会更改。我的问题是我无法弄清楚如何“选择/更改第一个项目的样式”以显示它是默认选中的项目。我没有执行项目单击，因为此屏幕是用户在单击之前首先看到的。我在 onActivityCreated 和 onStart 中尝试过 getListView().getChildAt(0) 但它总是返回 null。我也试过调用listView.performItemClick()。下面是代码，您可以在我的自定义 MenuAdapter 中看到我当前的 hack 解决方案。我觉得我错过了一些简单的东西，因为似乎很多应用程序都想要这样做。感谢您的任何帮助！

```
public class FixItActionListFragment extends ListFragment {
    // The last menu item selected 
    View lastRow = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Defined the list of actions in the file strings.xml
        String[] fixItActions = getResources().getStringArray(R.array.fixItActions);

        setListAdapter(new MenuAdapter(getActivity(), fixItActions));
    }

    /**
     * Inflate the layout for the action list fragment
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        // Inflate the layout for the action list fragment
        View v =  inflater.inflate(R.layout.fixitactionlistfragment, container, false);
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
                // this isn't working
        //ListView listview = getListView();
        //View view = listview.getAdapter().getView(0, null, null);
        //long rowId = listview.getAdapter().getItemId(0);
        //listview.performItemClick(view, 0, rowId);
    }

    /**
     * Called when a action item is selected
     */
    public void onListItemClick(ListView parent, View view, int position, long id) {
        // Change the style of the selected item and revert the last item
        if (lastRow != null) {
            // Set the previous selected row to unselected  
                        ...
        }
            // Set current item to selected
            ...
        lastRow = view;

    }

    class MenuAdapter extends ArrayAdapter<String> {

        MenuAdapter(Context context, String[] actions) {
            super(context, R.layout.menu_row, R.id.menuItem, actions);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // Get the selected row
            View row = super.getView(position, convertView, parent);
            // HACK!!!!  If it's the first item, then mark as selected
            if (lastRow == null) {
                lastRow = row;
                TextView thisItem = (TextView) row.findViewById(R.id.menuItem);
                thisItem.setTextColor(getResources().getColor(R.color.menuItemSelected));               
            }
            return row;         
        }
    }
} 
```

# delphi - 如何使用操作来确定控件的可见性？

> ID：10127685
> 
> 赞同：7
> 
> 时间：2012-04-12T16:24:50.420
> 
> 标签：delphi

我正在尝试使用操作来控制控件的可见性。我的代码如下所示：

**帕斯卡文件**

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, Dialogs, ActnList, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    ActionList1: TActionList;
    Action1: TAction;
    CheckBox1: TCheckBox;
    procedure Action1Update(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Action1Update(Sender: TObject);
begin
  (Sender as TAction).Visible := CheckBox1.Checked;
end;

end. 
```

**表格文件**

```
object Form1: TForm1
  object Button1: TButton
    Left = 8
    Top = 31
    Action = Action1
  end
  object CheckBox1: TCheckBox
    Left = 8
    Top = 8
    Caption = 'CheckBox1'
    Checked = True
    State = cbChecked
  end
  object ActionList1: TActionList
    Left = 128
    Top = 8
    object Action1: TAction
      Caption = 'Action1'
      OnUpdate = Action1Update
    end
  end
end 
```

当表单第一次运行时，按钮是可见的并且复选框被选中。然后我取消选中复选框，按钮消失。当我重新选中复选框时，按钮无法重新出现。

我认为可以在以下本地函数中找到其原因`TCustomForm.UpdateActions`：

```
procedure TraverseClients(Container: TWinControl);
var
  I: Integer;
  Control: TControl;
begin
  if Container.Showing and not (csDesigning in Container.ComponentState) then
    for I := 0 to Container.ControlCount - 1 do
    begin
      Control := Container.Controls[I];
      if (csActionClient in Control.ControlStyle) and Control.Visible then
          Control.InitiateAction;
      if (Control is TWinControl) and (TWinControl(Control).ControlCount > 0) then
        TraverseClients(TWinControl(Control));
    end;
end; 
```

检查`Control.Visible`似乎阻止了我的行动有机会再次更新自己。

我是否正确诊断了问题？这是设计使然还是我应该提交 QC 报告？有谁知道解决方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T16:43:04.217

你的诊断是正确的。自从首次将 Actions 引入 Delphi 以来，它们就一直以这种方式工作。

我希望它是设计使然（可能是为了避免过度更新文本和不可见控件的其他视觉方面的优化），但这并不意味着设计是好的。

我可以想象的任何解决方法都将涉及您的复选框代码直接操作受影响的操作，这不是很优雅，因为它不必知道它可能影响的所有其他内容——这就是`OnUpdate`事件应该为您做的事情。当复选框被选中时，调用`Action1.Update`，或者如果这不起作用，则调用`Action1.Visible := True`。

您也可以将您的操作更新代码放入`TActionList.OnUpdate`事件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:06:52.490

是的，正如 Rob 已经说过和解释的那样，您的诊断是正确的。一种解决方法是不使用单个 TAction 的 OnUpdate 事件处理程序，而是使用 TActionList 的 OnUpdate 事件处理程序。

```
procedure TForm1.ActionList1Update(Action: TBasicAction; var Handled: Boolean);
begin
  Handled := True;
  Action1.Visible := CheckBox1.Checked;
end; 
```

您确实需要**至少一个带有链接操作**的可见控件才能使其工作，否则也不会调用 ActionList 的 OnUpdate 处理程序。

顺便说一句，当第一次引入 Actions 和 ActionLists 时，Ray Konopka（Raize 组件）写了几篇关于它们实现的文章，并就如何使用它们给出了非常中肯的建议。从那以后，我采用了使用每个单独Action 的OnExecute，但使用ActionList 的OnUpdate 的做法。另外，我在该处理程序中做的第一件事是将 Handled 设置为 True，这样它就不会被不必要地调用，并且只在该处理程序中更改一次 Action 的 Enabled 属性，这样 GUI 就不会因此而闪烁关闭它然后打开。

Ray Konopka 的文章是“有效地使用动作列表”：[http](http://edn.embarcadero.com/article/27058) : //edn.embarcadero.com/article/27058 Ray 曾经在他自己的网站上发表过三篇文章，但在 embarcadero 上只有一篇，但很可能是“组合”版本（手边没有原件）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T16:35:02.723

当相关控件不可见时，不会调用 ActionUpdate 事件。尝试在 Checkbox1 的单击事件上显式调用 ActionUpdate。

# xslt - XSLT 如何修剪元素前后的空间，当元素说？

> ID：10127687
> 
> 赞同：5
> 
> 时间：2012-04-12T16:25:01.040
> 
> 标签：xslt, xpath

在格式化使用 TEI 标记 (www.tei-c.org) 的文本文档时会出现此问题。这超出了我的 XSLT/XPATH 技能。（需要 XSLT/XPATH 1.0 中的解决方案。）

有一个标记元素 ，`<lb>`用于标记换行符。它可以带一个属性`@break`。如果，则在生成输出时应忽略文本和周围文本`@break="no"`之间的任何空格。`<lb>`

所以

```
This little tea <lb break="no" />
pot, short and stout. 
```

应该理解为

```
This little teapot, short and stout. 
```

也就是说，“tea”之后的空格和“pot”之前的换行符不应在输出流中呈现。

对于 之前的空间`<lb>`，这可以工作：

```
<xsl:template match="text()[following-sibling::*[1][self::lb[@break='no']]">
    <!-- Do something about the space here. -->
</xsl:template> 
```

类似的东西适用于`<lb>`.

好的。但这更棘手：

```
This <emph>little <ref>tea </ref> </emph>
<lb break="no" />
pot, short and stout. 
```

现在元素内的文本`<ref>`不是`<lb>`. 并且之前的空格、之前`</ref>`的空格`</emph>`和之前和之后的换行符`<lb>`都需要从输出流中删除。

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:43:10.537

这是一个经过测试的工作实现，包括如何从文本节点的右侧或左侧修剪空白：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
    </xsl:template>

    <!-- Match if the preceding node (not necessarily sibling) that is either
      a non-empty-space-text node or an <lb> is an <lb break='no'> -->
    <xsl:template match="text()[
        (preceding::node()[
            self::text()[normalize-space() != ''] or
            self::lb])
                [last()]
        [self::lb[@break='no']]
        ]">

        <!-- Trim whitespace on the left. Thanks to Alejandro,
            http://stackoverflow.com/a/3997107/423105 -->
        <xsl:variable name="firstNonSpace"
            select="substring(normalize-space(), 1, 1)"/>
        <xsl:value-of select="concat($firstNonSpace,
            substring-after(., $firstNonSpace))"/>
    </xsl:template>

    <!-- Match if the next node (not necessarily sibling) that is either
      a non-empty-space-text node or an <lb> is an <lb break='no'> -->
    <xsl:template match="text()[
        following::node()[
            self::text()[normalize-space() != ''] or
            self::lb]
               [1]
        [self::lb[@break='no']]
        ]">

        <xsl:variable name="normalized" select="normalize-space()"/>
        <xsl:if test="$normalized != ''">
            <xsl:variable name="lastNonSpace"
                select="substring($normalized, string-length($normalized))"/>
            <xsl:variable name="trimmedSuffix">
                <xsl:call-template name="substring-after-last">
                    <xsl:with-param name="string" select="."/>
                    <xsl:with-param name="delimiter" select="$lastNonSpace"/>
                </xsl:call-template>
            </xsl:variable>
            <xsl:value-of select="substring(., 1, string-length(.) -
               string-length($trimmedSuffix))"/>
        </xsl:if>
        <!-- otherwise output nothing. -->
    </xsl:template>

    <!-- Thanks to Jeni Tennison:
        http://www.stylusstudio.com/xsllist/200111/post00460.html -->
    <xsl:template name="substring-after-last">
        <xsl:param name="string" />
        <xsl:param name="delimiter" />
        <xsl:choose>
            <xsl:when test="contains($string, $delimiter)">
                <xsl:call-template name="substring-after-last">
                    <xsl:with-param name="string"
                        select="substring-after($string, $delimiter)" />
                    <xsl:with-param name="delimiter" select="$delimiter" />
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise><xsl:value-of select="$string" /></xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

我在这里的假设是，在回答我上面的“下一个歧义”评论之前，如果有一个*没有*`<lb>`的元素，则在它充当忽略空白的边界的意义上构成“周围文本”。 *`break="no"``<lb>`*

 *## 样本输入：

```
<test>
    <t1>
        This <emph>little <ref>tea </ref> </emph>
        <lb break="no" />
        pot, short and stout.        
    </t1>    
    <t2>
        This <emph>little <ref>tea </ref> </emph>
        <lb />
        <lb break="no" />
        pot, short and stout.        
    </t2>    
</test> 
```

## 输出：

```
<test>
    <t1>
        This <emph>little <ref>tea</ref></emph><lb break="no"/>pot, short and stout.        
    </t1>    
    <t2>
        This <emph>little <ref>tea </ref> </emph>
        <lb/><lb break="no"/>pot, short and stout.        
    </t2>    
</test> 
```

此输出是正确的 AFAICT。如果没有，请告诉我原因，我会看看如何修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:22:02.887

~~尝试如下选择器：~~

 ~~```
text()[matches(., '\S?\s*$') and not following::text()[matches('\S')] and following::lb[@break="no"]] 
```~~ 

~~当然，这是可怕且低效的。但可能工作。~~不起作用，因为正如已经指出的那样，您没有matches()。我再来一次：

好的，我们正在寻找四种不同的场景：

*   第一个前面的非空文本元素，如果它以空格结尾：

    lb[@break='no']/preceding::text()[normalize-space()!='' and string-length(substring-after(.,normalize-space()))!=0][1 ]

*   跟在前面的第一个非空文本元素之后的空文本元素：

    lb[@break='no']/preceding::text()[normalize-space()='' 和preceding::text()[normalize-space()!='']]

*   以下第一个非空文本元素之前的空文本元素：

    lb[@break='no']/following::text()[normalize-space()!='' and string-length(substring-before(.,normalize-space()))!=0][1 ]

*   第一个非空文本元素，如果它以空格开头：

    lb[@break='no']/following::text()[normalize-space()='' and following::text()[normalize-space()!='']]

因为您不能在 xpath 1.0 中使用 union，所以您必须使用此方法从上述每个匹配项中调用一个模板。*

# php - 如何检查端口 465 和 587 是否使用 PHP 开放？

> ID：10127691
> 
> 赞同：15
> 
> 时间：2012-04-12T16:25:16.167
> 
> 标签：php, linux, smtp, ports

我正在尝试使用 PHPMailer 通过 SMTP 和 gmail 发送电子邮件。正在使用的确切脚本适用于其他服务器，但不适用于该特定托管公司的服务器。

我检查了`phpinfo()`它，它告诉我这`allow_url_fopen`是 `on`并且没有列出的`disabled_functions`类似内容`fopen`。

脚本失败，它告诉我：

```
SMTP -> ERROR: Failed to connect to server: Connection timed out (110) 
```

要不然

```
SMTP Error: Could not authenticate. 
```

我假设这是因为它无法连接，因为这又在其他服务器上工作并且身份验证凭据是正确的。

所以我更一般地问，有没有一种方法可以使用 PHP 或 jailshell`ssh`来检查端口是否实际打开？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-12T16:49:28.847

您可以使用以下命令检查打开/可用端口`fsockopen`：

```
$fp = fsockopen('127.0.0.1', 25, $errno, $errstr, 5);
if (!$fp) {
    // port is closed or blocked
} else {
    // port is open and available
    fclose($fp);
} 
```

...在`5`呼叫失败之前的超时时间（以秒为单位）。

这可能是由于您的托管服务提供商阻止您连接到出站套接字和/或特定端口的防火墙问题。请记住，阻止出站 SMTP 端口是一种非常常见的安全配置。过去，只有端口`25`被阻止，但我开始看到越来越多的 SSL 变体也被阻止。

大多数提供商和托管公司只允许您连接到他们自己的 SMTP 服务器，以防止垃圾邮件发送者中继垃圾邮件。

# git - AWS Elastic Beanstalk Git 说“已经是最新的”

> ID：10127693
> 
> 赞同：1
> 
> 时间：2012-04-12T16:25:21.103
> 
> 标签：git, amazon-web-services, amazon-elastic-beanstalk

我在弹性 beanstalk 环境中设置了我的 php 应用程序。我配置了 AWSDevTools 以允许我进行命令行 git 集成。我做了我最初的 aws.push 并且所有文件都被推送到我的环境中并且它起作用了！

然而！

一旦我开始进行代码更改，然后暂存并提交这些更改，现在当我运行 aws.push 命令时，它会显示“已经是最新的！” 这是错误的，我似乎无法找到强制它识别并将新更改推送到服务器的方法。

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:34:47.747

发生这种情况是因为您的本地存储库的 HEAD 与已推送到 AWS 的内容相匹配。

当我的 aws.configuration 属性设置不正确时，我遇到了这种情况，通常是在改变我的环境但忽略更新本地配置之后。您可以通过登录 AWS 控制台来验证这一点，展开您要部署到的 EBS 环境的环境详细信息，然后单击*Deploy a different Version*。如果列表顶部的变更集 ID 与您的环境中存在的内容不匹配，则推送工作正常，但部署失败。手动更新应用程序版本，您应该能够使用 git 推送新的更改（确保更新您的本地配置）。

EBS 客户端中似乎也存在可能导致此行为的错误。查看[此讨论线程](https://forums.aws.amazon.com/thread.jspa?messageID=336101)以获取更多信息和一些调试技巧。

# php - 跨系统保持登录

> ID：10127694
> 
> 赞同：1
> 
> 时间：2012-04-12T16:25:23.507
> 
> 标签：php, login

我的想法是统一10个系统，他们都将共享同一个用户，只登录主站点，之后他将能够登录到任何单独的系统而无需再次登录。实现这一目标的最佳方法是什么？

我在我的所有系统上都使用 php 和 mysql。

它们都在同一个域，同一个服务器上运行。他们为每个人使用不同的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:33:04.720

好吧，没有完整的细节很难说。我已经做到了，实际上并不难。诀窍是让您的所有用户都在一个公共数据库中，或者创建一个所有网站用于用户验证的公共代码，该代码将单独扫描所有用户数据库。

如果您的应用是单个域的子域，请查看[这些文档](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-domain)

`ini_set("session.cookie_domain", ".domain.com");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:38:12.430

听起来您最好创建一个带有新数据库的新登录区域，仅用于用户管理。让所有应用程序都可以访问它的信息（例如通过单个类），并在更改站点时使用会话保持整洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:33:27.213

您可以访问所有其他网站吗？我最初的想法是使用 oAuth，但我不确定这是否是您想要的？

[http://oauth.net/](http://oauth.net/)

# objective-c - 多线程程序中的属性值

> ID：10127700
> 
> 赞同：0
> 
> 时间：2012-04-12T16:25:44.020
> 
> 标签：objective-c, ios

我在头文件中初始化了两个属性：

```
@property (readwrite, assign) int Figure1;
@property (readwrite, assign) int State; 
```

在.m

```
@synthesize Figure1;
@synthesize State; 
```

然后我得到了

```
UISwipeGestureRecognizer *swipeLeft = 
    [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeLeftMade:)] autorelease];
    [swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [self addGestureRecognizer:swipeLeft]; 
```

和

```
UITapGestureRecognizer *oneFingerTwoTaps = 
    [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(ooneFingerTwoTaps)] autorelease];
    [oneFingerTwoTaps setNumberOfTapsRequired:2];
    [oneFingerTwoTaps setNumberOfTouchesRequired:1];
    [self addGestureRecognizer:oneFingerTwoTaps]; 
```

在类中初始化。

调用的方法：

```
- (void)ooneFingerTwoTaps
{
    [NSThread detachNewThreadSelector:@selector(oneFingerTwoTaps) toTarget:self withObject:nil];
}

- (void)swipeLeftMade:(UISwipeGestureRecognizer *)recognizer
{
    [NSThread detachNewThreadSelector:@selector(moveLeftSwipe) toTarget:self withObject:nil];
} 
```

在第一个线程中有主程序：

```
- (void)oneFingerTwoTaps
{
    PlayScene *tView = [[PlayScene alloc]initWithFrame:CGRectMake(0, 0, 320, 420)];
    [self addSubview:tView];
    while (GameState==GamePlaying) {
        Figure1 = 1; State = 1;
        [self moveFig];
    }
} 
```

在第二个线程中，我需要使用在第一个线程上更改的属性值

```
-(void)moveLeftSwipe  {
int fset = State, figure=Figure1;
//some other stuff
} 
```

但问题是属性的值不在线程之间共享，有人告诉我“非原子”可能会导致这样的问题，但我没有使用它。可能是我声明有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:36:02.450

只是使用静态变量而不是属性。静态变量在线程之间共享。

# java - 在 Android 中编写“if”语句

> ID：10127702
> 
> 赞同：-3
> 
> 时间：2012-04-12T16:25:48.937
> 
> 标签：java, android

我是安卓新手。我正在尝试编写一个包含 if 语句的方法。我想要实现的是“如果 Textview 中的文本等于某个值，则更改布局中的背景图像。” 我知道设置背景位有效，我已将问题缩小到 If 语句。在下面的代码中，showBook 是一个 TextView，tvString 是保存 showBook 值的字符串。bgview 是布局 ID。

```
 String tvString = showBook.getText().toString(); 
    bookDisp.setText(tvString); 
    View mainbg = bgview.getRootView(); 
    if(bookDisp.equals("John")){ 
    mainbg.setBackgroundResource(R.drawable.dbvjohn); 
```

问题是线

```
if(bookDisp.equals("John")){ 
```

它不想将 bookDisp 与字符串“John”进行比较。但是，如果我比较两个文本视图，它将起作用

```
if(bookDisp.equals(newTextView)){ 
```

所以我认为问题在于 .equals 位。我将使用什么代码将 bookDisp 与“John”进行比较？这不是`if(bookDisp = ("John")){`因为 Eclipse 要我将 bookDisp 更改为字符串。那么将 textview bookDisp 与字符串“John”进行比较的正确代码是什么？

别管人家！我想通了，错误根本不是这个方法，而是另一种方法。我有`+ cursor.getString(1) + " ";`那个方法，所以文本视图中的字符串显示为“John”，上面的“if”语句正在寻找“John”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T16:31:04.560

用这个：

```
if ("John".equals(bookDisp.getText().toString())) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:30:41.940

您可能想使用：

```
bookDisp.getText().toString().equals("John"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:32:13.687

最好比较如下字符串::

tvString.equals("约翰");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T16:33:33.743

您需要从 TextView 获取文本以查看它是否等于“John”。做： bookDisp.getText().equals("John")

那应该行得通。TextViews 的 getText 返回一个可编辑的。这是该类，因此您可以使用它： [Editable Class](http://developer.android.com/reference/android/text/Editable.html)

# iphone - NSDateFormatter 夏令时

> ID：10127704
> 
> 赞同：2
> 
> 时间：2012-04-12T16:26:02.360
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我正在使用 NSDate 格式化程序从 Facebook Graph API 请求（格林威治标准时间）中获取日期并将其转换为用户的本地时区。我可以很好地读取日期并设置其新时区，但是当我打印出新日期时，它似乎没有考虑夏令时。

下面的时间实际上来自请求，但例如在这里我只是输入来自 Facebook 响应的标准时间字符串

```
NSString *time = @"2012-04-12T15:25:09+0000"
NSTimeZone *localZone = [NSTimeZone localTimeZone];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setTimeZone:localZone];
[formatter setDateFormat:@"yyyy-mm-dd'T'HH:mm:ssZZZZ"];
NSDate *date = [formatter dateFromString:time];
[formatter setDateFormat:@"eee MMM dd, yyyy hh:mm a"];
NSString *dateStr = [formatter stringFromDate:date];
NSLog(@"%@",dateStr); 
```

当它打印这个日期时，它会打印出“2012 年 1 月 12 日星期四上午 10:25”，这对于我所在的“美国/纽约”时区来说是错误的。我应该是“2012 年 1 月 12 日星期四上午 11:25”或提前一小时。有没有办法强制夏令时？提前致谢！

编辑：我注意到它实际上错误地格式化了月份。由于某种原因，它需要四月并成为一月。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T16:36:33.030

> 当它打印这个日期时，它会打印出“2012 年 1 月 12 日星期四上午 10:25”，对于“美国/纽约”时区，这是我所在的时区，这是错误的。

没有。夏令时直到 3 月才开始，因此在那个时间应用它是错误的。`NSDateFormatter`在这里做正确的事。

如果你想强制一个特定的 GMT 偏移量，你应该使用`NSTimeZone timeZoneForSecondsFromGMT:`而不是`localTimeZone`.

# sql - 将参数传递给powershell中的sql文件（sqlcmd）

> ID：10127707
> 
> 赞同：2
> 
> 时间：2012-04-12T16:26:11.507
> 
> 标签：sql, variables, powershell, parameters, sqlcmd

假设我正在尝试从 powershell 运行以下 .sql 文件

```
SELECT * FROM table 
```

目前这就是我调用这个文件的方式

```
Invoke-Sqlcmd -ServerInstance instance -Database database -Username username -Password password -InputFile basicQuery.sql 
```

如果我想从“myTable”中进行选择，我将如何将该参数传递给 sql 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:18:24.090

如果查询与您的示例一样基本，最好将`-InputFile`参数替换为`-Query`，您可以在其中轻松使用变量。例如

```
$tables = "MyTable1","MyTable2"
$tables | Foreach-Object {
   Invoke-Sqlcmd -ServerInstance instance -Database database -Username username -Password password -Query "SELECT * FROM $_"
} 
```

对于更高级的查询，您可以进行文件搜索替换：

```
Get-Content sqlTemplate.sql | Foreach-Object {
   $_ -replace "TABLE", "MyTable" | Out-File myQuery.sql -Append
}
Invoke-Sqlcmd -ServerInstance instance -Database database -Username username -Password password -InputFile myQuery.sql 
```

# android - AsyncTask 崩溃应用

> ID：10127708
> 
> 赞同：0
> 
> 时间：2012-04-12T16:26:11.513
> 
> 标签：android

有谁知道为什么 AsyncTask 不断崩溃？基本上在我的应用程序中，我想获取 GPS 坐标并让它动画到我在 mapview 中的位置。然后我想使用 GeoCode 来显示我所在位置的当前地址。

在我开始尝试使用 AsyncTask 之前，该应用程序完美地显示了所有内容（在地图上显示当前位置，并告诉我最近的地址并在文本视图中显示它）但是，它非常缓慢且滞后，因为我没有实现 AsyncTask。现在我已经实现了 AsyncTask，它给了我错误。有人可以帮忙吗？

这是我的代码：

```
public class statuspage extends MapActivity {

private MapController mapController;
private MyLocationOverlay myLocation;
Location location;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.statuspage);

    new MapOverlay().execute(); 

    // Get Mapping Controllers etc
    MapView mapView = (MapView) findViewById(R.id.mapView);
    mapController = mapView.getController();
    mapController.setZoom(14);
    mapView.setBuiltInZoomControls(true);

    // Add the MyLocationOverlay
    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);
    myLocation.enableMyLocation();
    myLocation.runOnFirstFix(new Runnable() {

        public void run() {
            mapController.animateTo(myLocation.getMyLocation());

        }
    });
}

class MapOverlay extends AsyncTask<Void,Long,DataPackage> {

    @Override
    protected DataPackage doInBackground(Void... arg0) {
        return new DataPackage(); 
    }
}

class DataPackage { 

    public String addressString = null; 
    double latitude = location.getLatitude();
    double longitude = location.getLongitude();

    public DataPackage(addressString, latitude, longitude) { 
        statuspage.this.addressString = addressString; 
        statuspage.this.latitude = location.getLatitude();
        statuspage.this.longitude = location.getLongitude();

    } 
} 

protected boolean isRouteDisplayed() {

    // Location Manager Intiation
    LocationManager locationManager;
    String bestProvider;
    String LOCATION_SERVICE = "location";
    locationManager = (LocationManager) statuspage.this
            .getSystemService(LOCATION_SERVICE);
    Criteria criteria = new Criteria();

    // More accurate, GPS fix.
    criteria.setAccuracy(Criteria.ACCURACY_FINE); // More accurate, GPS fix.
    bestProvider = locationManager.getBestProvider(criteria, true);
    location = locationManager.getLastKnownLocation(bestProvider);
    if (location != null) {

        // Latitude and Longitude TextView
        TextView etlongitude = (TextView) findViewById(R.id.etlongitude);
        TextView etlatitude = (TextView) findViewById(R.id.etlatitude);

        // Disables longitude textview Keyboard Popup.
        //InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        //imm.hideSoftInputFromWindow(etlongitude.getWindowToken(), 0);

        // Disables latitude textview Keyboard Popup.
        //InputMethodManager imm2 = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        //imm2.hideSoftInputFromWindow(etlatitude.getWindowToken(), 0);

        // Latitude and Longitude TextView Display Coordinates
        etlongitude.setText("Longitude:" + "\n" + (longitude)); 
        /** longitude textview */
        etlatitude.setText("Latitude:" + "\n" + (latitude));
        /** latitude textview */

        addressString = "No address found";

        Geocoder gc = new Geocoder(statuspage.this, Locale.getDefault());
        try {
            List<Address> addresses = gc.getFromLocation(latitude,
                    longitude, 1);
            StringBuilder sb = new StringBuilder();
            if (addresses.size() > 0) {
                Address address = addresses.get(0);

                for (int i = 0; i < address.getMaxAddressLineIndex(); i++)

                sb.append(address.getAddressLine(i)).append("\n");
                //sb.append(address.getFeatureName()).append("\n");
                //sb.append(address.getPhone()).append("\n");
                //sb.append(address.getLocality()).append("\n");
                //sb.append(address.getPostalCode()).append("\n");
                //sb.append(address.getCountryName());
            }
            addressString = sb.toString();

            TextView scrollview = (TextView) findViewById(R.id.scrollview);
            scrollview.setText("Your location:" + "\n" + "(Accurate to 500 meters)" +"\n" +(addressString));

        } catch (IOException e) {
        }

        // locationManager.removeUpdates((LocationListener) location);
        locationManager = null;

    } else {

    }

    return false;
}

protected void onResume() {
    myLocation.enableMyLocation();
}

protected void onPause() {
    myLocation.disableMyLocation();
}

public void onBackPressed() {

    // Button OnClick Vibrating Service
    Vibrator vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

    // Vibrate Service
    vib.vibrate(50);

    startActivity(new Intent(statuspage.this, AgentPortalActivity.class));
    statuspage.this.finish();

    /** Fading Transition Effect */
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);

    return;

}
 }

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;

}
} 
```

这是我的日志：

```
 04-12 09:14:15.682: W/dalvikvm(13103): threadid=11: thread exiting with uncaught exception    (group=0x40015578)
 04-12 09:14:15.686: E/AndroidRuntime(13103): FATAL EXCEPTION: AsyncTask #1
 04-12 09:14:15.686: E/AndroidRuntime(13103): java.lang.RuntimeException: An error occured while  executing doInBackground()
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at android.os.AsyncTask$3.done(AsyncTask.java:200)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at  java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at java.lang.Thread.run(Thread.java:1019)
 04-12 09:14:15.686: E/AndroidRuntime(13103): Caused by: java.lang.NullPointerException
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at com.jetdelivery.mobile.statuspage$MapOverlay.doInBackground(statuspage.java:119)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at com.jetdelivery.mobile.statuspage$MapOverlay.doInBackground(statuspage.java:1)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
 04-12 09:14:15.686: E/AndroidRuntime(13103):   ... 4 more 
```

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:29:46.510

```
 TextView scrollview = (TextView) findViewById(R.id.scrollview);
 scrollview.setText("Your location:" + "\n"
                        + "(Accurate to 500 meters)" + "\n" + (addressString)); 
```

将上面的代码写在 onPostExecute() 中而不是 doInBackground() 中。在 doInbackground() 中，我们只执行与网络相关的任务，并且所有与 UI 相关的任务都必须在 onPostExecute() 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:29:55.980

您的代码正在使您的应用程序崩溃，因为您试图在没有处理程序的情况下访问 UI 线程上的控件并且在错误的执行区域中。

您应该阅读[`AsyncTask`](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)并了解如何正确处理与 UI 的交互。该页面上有非常好的信息。

> 要更新您的 UI，您应该实现[`onPostExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)，它从 UI 线程传递结果[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)并在 UI 线程中运行，这样您就可以安全地更新您的 UI。

您需要将相关的中断代码移至[`onPostExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)：

```
 // Latitude and Longitude TextView Display Coordinates
            etlongitude.setText("Longitude:" + "\n" + (longitude));
            /** longitude textview */
            etlatitude.setText("Latitude:" + "\n" + (latitude));
            /** latitude textview */

            TextView scrollview = (TextView) findViewById(R.id.scrollview);
            scrollview.setText("Your location:" + "\n"
                    + "(Accurate to 500 meters)" + "\n" + (addressString)); 
```

* * *

**编辑**：从评论讨论中添加了示例。

```
class DataPackage {
    public String Address = null;
    public double Latitude = 0.0;
    public double Longitude = 0.0;

    public DataPackage(address, lat, lon) {
        this.Address = address;
        this.Latitude = lat;
        this.Longitude = lon;
    }
} 
```

...

```
class MapOverlay extends AsyncTask<Void,Void,DataPackage> {

    @Override
    protected Void doInBackground(Void... arg0) {  
        // ... Conditions and logic TRUNCATED for Clarity!
        // This would exist inside of your try block
        return new DataPackage(addressString, latitude, longitude);
        // ... Rest of code
    }

    //...

    protected void onPostExecute(DataPackage result) {
        //Logic that updates the UI based on information in DataPackage object.
    }
} 
```

# database - 保护会员网站中查询字符串的最佳策略？

> ID：10127713
> 
> 赞同：0
> 
> 时间：2012-04-12T16:26:44.060
> 
> 标签：database, security

假设您有 3 张桌子：

```
User        Blog        Post

UserId      BlogId      PostId
Username    BlogName    PostTitle
            UserId      BlogId 
```

假设现在博客所有者尝试访问`EditPost.aspx?ID=51`。您如何保护此查询字符串，以便只有原始博客所有者才能看到真正的帖子。例如。用户 Jon 没有开始编辑用户 Mary 的帖子？

我有几个选择：

**1）**我加密了查询字符串，这显然不是 100% 安全的，但可以完成这项工作。

**2）**我每次都检查查询字符串中的 PostID 是否确实是登录用户的 Post，方法是根据我在 Session 中拥有的 UserID 检查它。这样做的缺点是，如果我只有 3 个表，这是可以的，但如果我有一个包含 10-12 个表的表层次结构，并且我在第一个表中有用户 ID，我实际上正在查询第 12 个表，我需要检查通过进行 12 次连接一直回到顶部，以实际查看该东西是否“真的”是他的。

问题是您真正在您的网站中使用其中哪一个并且工作是否良好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:38:08.217

为了控制记录的编辑，您需要知道谁拥有它。

方法#1 是有缺陷的，因为它可能容易受到重放攻击，或者更重要的是，它假设如果用户成功导航到页面，他们就被授权。这是“通过默默无闻的安全”，是一个很大的禁忌。

方法 #2 是您唯一真正的选择。如果您担心将 PostID 绑定到 UserID 的连接数，您应该发布一个关于优化查询的新问题（并提供有关查询和特定数据库结构的更多信息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:38:23.553

查询字符串不需要加密，只要您的渲染或数据发布给您，您只需要服务器端检查。

你的安全检查没问题。如果您有 12 个连接来获取您的数据，我会说重新构建您的数据模型或将用户外键存储在更多地方。

# java - 使用 Java 在 Mac 应用程序包/文件夹中编写

> ID：10127714
> 
> 赞同：2
> 
> 时间：2012-04-12T16:26:49.930
> 
> 标签：java, macos, file, location

好的，我在问这个问题之前已经考虑过了，因为起初它听起来确实像是一个古老的问题，归结为“是否可以在档案中写入”。我是 Mac OS X 的新手，但我读过应用程序只是一个带有`.app`扩展名和特定文件结构的文件夹。所以，我想知道是否可以在这个文件夹中写入，如果可以的话如何。

我问的原因是因为在我的 Java 程序中，在 Windows 上，它读取程序目录中的一些文件（程序文件的原理）但在 OSX 应用程序上似乎没有创建任何文件（很明显） - 所以我猜他们必须将它们存储在`.app`文件夹中！如果我假设错了，我想知道应用程序通常在哪里存储他们创建的文件。

提前致谢

**编辑**我问这个问题的全部原因是因为如果我的应用程序留下文件，我害怕负面反馈，所以我真的需要信息丰富的意见。简而言之，我的应用程序需要一个配置文件，但它也允许用户创建自己的“数据库”。我现在认为我会将这些文件存储在用户的文档文件夹中，但我不确定在删除应用程序时是否应该删除这些文件或只是保留它们。显然，删除它们需要我制作一个包——这对用户来说只是一个额外的步骤，所以你怎么看？...哦，是的，应用程序会在用户输入有效的序列密钥时生成一个许可证文件- 在 Windows 上，信息存储在注册表中，但在 Mac 上，我不确定将包含此信息的文件放在哪里！任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T10:08:54.910

您不应该写入应用程序包。一些没有特定顺序的原因：

*   用户可能没有写入权限。事实上，应用程序包可以在只读媒体上。

*   应用程序包不是特定于用户的。它很可能位于共享位置并由系统上的所有用户使用。

*   应用程序应进行代码签名，修改其内部可能会使签名无效。

放置用户数据的适当位置是在用户的 Documents 文件夹中，在 ~/Library/Application Support 的产品特定子目录中（或者，如果它应该是系统范围的，/Library/Application Support），或者在某个位置用户选择的。

如果用户删除应用程序，我不会太担心留下文件。这是很常见的，甚至是可取的。例如，如果我在安装新版本之前删除了旧版本，我希望新版本能够找到旧版本遗留下来的现有文件。如果您遵循典型的约定，用户将知道如何清理（或者像 AppZapper 之类的东西将能够为他们这样做）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T07:45:07.650

我正在自己寻找这个问题的答案，但我想我可以帮助你解决你的问题。我自己移植了一个“windows”java应用程序。我不是真正的 Mac 专家，但我对这个主题的研究给了我以下答案：

我将 *.app 文件夹理解为您的程序的安装包。此文件夹的内部结构不会向用户显示。对他来说，这只是应用程序。一个快速的谷歌搜索给了我以下提示：

[http://developer.apple.com/library/mac/#qa/qa1170/_index.html](http://developer.apple.com/library/mac/#qa/qa1170/_index.html)

[将应用程序数据和临时文件放在 mac 上的位置](https://stackoverflow.com/questions/5298165/where-to-put-application-data-and-temp-files-on-mac)

也许这有帮助

# gridview - 使用 rowdatabound 格式化模板中的列

> ID：10127716
> 
> 赞同：0
> 
> 时间：2012-04-12T16:26:57.473
> 
> 标签：gridview, rowdatabound

我有一个gridview，我有一列显示订单号。该列`ItemTemplate`与不同`CommandArgument`的文本。该数字必须以特定格式显示，并且我有一个函数可以返回该格式的数字。我需要访问`RowDataBound`事件中的列值。喜欢`e.rows.cells(0).text = function_name(e.rows.cells(0).text)`。

但我的问题是如何访问`ItemTemplate`. 而且我不想将值包装在控件中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:18:14.853

ItemTemplate 表示它是 GridView 中的常规值，未经编辑等。您可以使用它访问它

GridView.FindControl('..')

# javascript - 在 Bootstrap 效果中将突出显示的选项卡更改为滚动

> ID：10127720
> 
> 赞同：1
> 
> 时间：2012-04-12T16:27:36.213
> 
> 标签：javascript, html, css, twitter-bootstrap

我想实现示例 Twitter Bootstrap 页面上显示的效果。

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

当您向下滚动页面时，突出显示的选项卡会根据您在页面下方的距离而变化。（全局样式、网格系统、流体网格系统等）。

这个效果是如何实现的，我该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:11:04.183

[这是一个名为ScrollSpy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)的 twitter 引导插件，您可以按照文档页面上给出的示例在您的项目中实现它。

# https - 使用 https 的 Windows Azure CDN - 连接重置

> ID：10127723
> 
> 赞同：3
> 
> 时间：2012-04-12T16:27:45.063
> 
> 标签：https, azure, cdn

我一直遇到一个问题，当我尝试使用 https 从 Azure CDN 访问静态内容时，我会随机重置连接。

我已经在 cdn 端点上启用了 HTTPS，并且大部分时间它都可以正常工作，但有时它就像挂起并且没有指向 cdn 的 https 链接有效。如果我更改为 http，它会继续正常工作，大约 10 分钟后 https“恢复”。

还有人看到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:03:01.493

当您从本地计算机连接时，您是否也遇到此问题？

无论如何，您可以做的是在您的 Azure 实例和本地计算机上使用 Fiddler 以查看是否从中获得更多信息。

那将是我解决问题的第一步。

# c# - 如何将可为空的 int 转换为对不同区域设置的计算机安全的字符串？

> ID：10127727
> 
> 赞同：7
> 
> 时间：2012-04-12T16:27:49.600
> 
> 标签：c#, int, type-conversion, locale, nullable

我正在将 a 转换`nullable integer`为 a `string`，Resharper 警告我使用 InvariantCulture。

```
shipment.ShipmentID.ToString() 
```

一个快速**的 Alt-Enter，**稍后输入，给了我这个：

```
shipment.ShipmentID.ToString(CultureInfo.InvariantCulture) 
```

不幸的是，Resharper 并不满意，并提出了同样的建议，这对我来说没有意义。

```
shipment.ShipmentID.ToString(CultureInfo.InvariantCulture, 
                                CultureInfo.InvariantCulture) 
```

可空 int 上的 ToString() 将无法构建，给我一个错误，指出**没有重载方法 'ToString' 需要 1 个参数**。

不可为空的整数表现不同。

```
int requiredInt = 3;
// no Resharper or compiler warning
var stringFromRequiredInt = requiredInt.ToString(CultureInfo.InvariantCulture); 
```

我应该怎么做才能将 a 转换为对不同区域设置的计算机安全的`nullable int`a ？`string`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T16:36:55.490

`Nullable<T>`没有`ToString()`参数重载；ReSharper 并没有很好地处理这种情况。

由于`default(Nullable<int>).ToString()`return `string.Empty`，您可以像这样让 ReSharper 开心：

```
shipment.ShipmentID.HasValue 
        ? shipment.ShipmentID.Value.ToString(CultureInfo.InvariantCulture) : "" 
```

或者：

```
shipment.ShipmentID != null 
        ? ((int)shipment.ShipmentID).ToString(CultureInfo.InvariantCulture) : "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:33:54.423

检查此[链接](http://msdn.microsoft.com/en-us/library/4c5zdc6a%28v=vs.71%29.aspx)。

> 您应该仅将不变区域性用于需要与区域性无关的结果的过程，例如系统服务。在其他情况下，它产生的结果可能在语言上不正确或在文化上不合适。

**更新：**所以使用它的主要目的之一可能是例如'if'语句比较。

# c# - C# 将 '[' ']' 添加到 TableName 使用的变量中

> ID：10127728
> 
> 赞同：0
> 
> 时间：2012-04-12T16:27:55.503
> 
> 标签：c#, string, ssis

我在 SSIS 包中工作。我有一些用于将表名放入对象变量（访问表）的 C# 脚本。该代码连接到 Access DB 并循环获取将其名称放入变量中的表。

分配如下：

```
using System;
using System.Collections;
using System.Data;
using System.Data.OleDb;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;

namespace ST_9b2714c55db14556be74ca92f345c4e3.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

        public void Main()
        {
            Variables varCollection = null;
            DataTable schemaTables = null;
            ArrayList tableNames = new ArrayList();

            Dts.VariableDispenser.LockForWrite("User::AccessTables");
            Dts.VariableDispenser.GetVariables(ref varCollection);

            using (OleDbConnection connection = new OleDbConnection(Dts.Connections["TE030698.Bases"].ConnectionString.ToString()))
            {
                string[] restrictions = new string[4];
                restrictions[3] = "Table";
                connection.Open();
                schemaTables = connection.GetSchema("Tables", restrictions);
            }

            foreach (DataRow row in schemaTables.Rows)
            {
                foreach (DataColumn column in schemaTables.Columns)
                {
                    if (column.ColumnName.ToUpper() == "TABLE_NAME")
                    {
                        tableNames.Add(row[column].ToString());
                    }
                }
            }

            varCollection["User::AccessTables"].Value = tableNames;

            Dts.TaskResult = (int)ScriptResults.Success; 
```

问题是某些表格以数字开头或包含空格。所以我需要将名称保存在 [] 中。2012 是一张桌子，但我需要它是 [2012]。我怎么能改变 C# 代码来做到这一点？

我对 C# 很陌生，所以任何建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:32:51.390

你可以改变

```
tableNames.Add(row[column].ToString()); 
```

到

```
tableNames.Add(string.Format("[{0}]", row[column].ToString())); 
```

更多信息`string.Format`：http:
[//msdn.microsoft.com/en-us/library/system.string.format.aspx](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

另一种方法是简单地连接：

```
tableNames.Add("[" + row[column].ToString() + "]"); 
```

但是，如果您的格式变得非常复杂，则不鼓励连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:35:02.230

如果表名是`"2010"`您只需将其括在方括号中，那么`"[" + "2012" + "]"`.

如果变量中有“2012”，则可以执行类似的操作

```
string strTableName = "2012";
strTableName = String.Format("[{0}]", strTableName); 
```

我希望这有帮助。

# jboss - 在 JBoss 4.2.3.GA 上 - JSP 响应标头 transfer-encoding:chunked 使我无法在负载均衡器上缓存 jsp 内容

> ID：10127730
> 
> 赞同：2
> 
> 时间：2012-04-12T16:28:02.567
> 
> 标签：jboss, response, chunked, transfer-encoding, server.xml

在 JBoss 4.2.3.GA 上，我们有一个使用 transfer-encoding:chunked 生成的 JSP 响应。这会阻止我们的 Netscaler 负载均衡器允许 JSP 生成的 HTML 被缓存，因为它认为它是可变内容。

但是如果我们设置了 max-age，那么无论传输编码如何，请求是否都应该被缓存？

我决定尝试让 JSP 以固定长度返回（设置内容长度，以便将传输编码设置为固定）。. 我做了以下测试：

创建了一个 Jboss 4.2.3.GA Web 应用程序，其中包含一个包含大量内容的 test.jsp 文件。我验证了当部署这个从服务器渲染的 JSP 文件时，使用 transfer-encoding:chunked。内容的总大小为 71.00Kb。

我进入 test.jsp 并尝试了各种设置：

```
response.setContentLength(90000);
response.setBufferSize(90000); 
```

验证 test.jsp 仍然传输编码：分块。

我还尝试编辑 jboss-4.2.3.GA\server\default\deploy\jboss-web.deployer\server.xml 并设置：

```
<Connector ... bufferSize="90000" socketBuffer="90000" /> 
```

已验证 test.jsp 仍然是 transfer-encoding:chunked。

我在这里做错了什么？如何缓存此内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:29:56.437

问题是，我没有

response.setContentLength(90000); response.setBufferSize(90000);

在页面顶部。一旦我移动它，它就起作用了。

# wpf - 如何从样式影响子控件属性

> ID：10127740
> 
> 赞同：12
> 
> 时间：2012-04-12T16:28:30.760
> 
> 标签：wpf, xaml, styles

我正在创建一种针对按钮的样式。将应用样式的按钮在其内部的堆栈面板中具有图像和文本块。我希望根据某些条件使用触发器来影响子控件的属性。

我想使用按钮样式来影响堆栈面板的方向以及图像的定义宽度。

我已经查看了样式设置器的属性智能中可用的各种子控件类型...我可以看到诸如 Grid、DockPanel 和 TextBlock 之类的东西...但我正在寻找的那些在他们的缺席。

当我不能影响某些儿童控制类型时，是否有原因？有什么方法可以在不滚动自定义控件的情况下这样做，该控件显式公开我希望影响的子控件属性？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-12T16:34:10.547

您可以使用隐式样式：

```
<Style TargetType="Button" x:Key="myButtonStyle"> <!-- Has a key, will only be applied on elements that have their style set to {StaticResource myButtonStyle} -->
   <Setter Property="Background" Value="Green" />
   ...
   <Style.Resources>
      <Style TargetType="Image"> <!-- No key, so it is implicit and will apply to any child element of type Image -->
         <Setter Property="Height" Value="20" />
         ...
      </Style>
   </Style.Resources>
</Style> 
```

当然，您也可以添加触发器。

# spring - 如何在spring中加载没有id，name定义的bean？

> ID：10127746
> 
> 赞同：3
> 
> 时间：2012-04-12T16:28:45.713
> 
> 标签：spring

如何加载没有 id 或 name 定义的 bean？另外，如果我定义了 2 个没有 id 或 name 的相同类的 bean，spring 将如何区分

```
<bean class="xyz" />
<bean class="xyz" scope="prototype" /> 
```

上面写着

> 如果有其他 bean 使用相同的名称，将生成一个唯一的名称

spring 是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:36:30.190

> 如何加载没有 id 或 name 定义的 bean？

您可以按类型加载 bean：

```
applicationContext.getBeansOfType(xyz.class); 
```

上面将返回一个从（生成的）id 到 bean 实例的映射。

> 如果我定义了 2 个没有 id 或 name 的相同类的 bean，spring 将如何区分

如果您按类型自动装配，它将抛出异常（相同类型的两个 bean）。由于没有名称，您无法按名称自动装配。

# wordpress - WP Query 总是将帖子限制为 5

> ID：10127747
> 
> 赞同：0
> 
> 时间：2012-04-12T16:28:51.567
> 
> 标签：wordpress

我不知道为什么我的帖子被限制为 5 - 检查文档，尝试使用参数数组和查询字符串（如下），总是只有 5 个结果！知道为什么会发生这种情况吗？

```
$query = new WP_Query();
$tag = get_query_var('tag');
$query->query("post_type=drinks&numberposts=-1&posts_per_page=-1&taxonomy=drink-types&term=$tag"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:50:27.350

它可能与分页有关（您只会看到一页“结果”）。尝试设置`'nopaging' => true`和/或`'posts_per_page' => '-1'`看看是否可以为您清除它。

# sql - 如果字段与按我的行 ID 分组的搜索词匹配，则 SQL 返回行 ID

> ID：10127752
> 
> 赞同：1
> 
> 时间：2012-04-12T16:29:14.003
> 
> 标签：sql, sql-server-2008

如果标题令人困惑，我很抱歉，最好在示例中进行解释。

我有一个这样的数据表：

```
1    ProductA    'Cheesy'
2    ProductA    'Creamy'
3    ProductA    'Juicy'
4    ProductB    'Buttery'
5    ProductB    'Clean'
6    ProductC    'Bitter' 
```

我想添加一个搜索词，例如“Cheesy”和“Juicy”。这应该返回：

```
ProductA 
```

...因为 ProductA 与 id 1 和 3 匹配。

但是，如果我搜索“Cheesy”和“Bitter”，这应该不会返回任何记录，因为 ProductA 可能有“Cheesy”，但它不包含“Bitter”的记录。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:39:31.420

一种方法：

```
declare @Products as Table ( ProductId Int Identity, Product VarChar(16), Property VarChar(16) )
insert into @Products ( Product, Property ) values
  ( 'ProductA', 'Cheesy' ), ( 'ProductA', 'Creamy' ), ( 'ProductA', 'Juicy' ),
  ( 'ProductB', 'Buttery' ), ( 'ProductB', 'Clean' ),
  ( 'ProductC', 'Bitter' )

select Product
  from @Products
  where Property = 'Cheesy'
intersect
select Product
  from @Products
  where Property = 'Juicy' 
```

**编辑：**附加示例：

```
-- To retrieve all data for the matching product(s):    
select *
  from @Products
  where Product in (
    select Product
      from @Products
      where Property = 'Cheesy'
    intersect
    select Product
      from @Products
      where Property = 'Juicy' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:52:15.163

```
select product from products 
where property = 'Cheesy' -- property 1
or 
property = 'Juicy' -- property 2
group by product
having count(*) >= 2 -- number of properties 
```

Something along these lines could work too, I think.

# google-analytics - 访问者生命周期的自定义变量中的多个值

> ID：10127753
> 
> 赞同：0
> 
> 时间：2012-04-12T16:29:15.097
> 
> 标签：google-analytics

我希望在访问者生命周期的自定义变量中存储多个值，并且我发现文档对覆盖的工作方式有点模棱两可。所以说我设置的请求1：

```
_gaq.push(["_setCustomVar", 1, "Visitor-Type", "Member", 1]); 
```

在我设置的单独页面视图中：

```
_gaq.push(["_setCustomVar", 1, "Gender", "Male", 1]); 
```

未来的会议是否会同时记住“访客类型”和“性别”，还是只会记住“性别”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:44:52.293

调用的最后一个参数`_setCustomVar`确定您的变量的范围，如[http://code.google.com/apis/analytics/docs/tracking/gaTrackingCustomVariables.html#examples](http://code.google.com/apis/analytics/docs/tracking/gaTrackingCustomVariables.html#examples)中所述，在您的示例中，它们设置为 1，即转换为“访问者级别”并将保留在每个访问者的 cookie 中，因此这应该跨请求工作。

但是，您似乎需要改变第二个参数——“槽”——才能使这些变量正常工作。如果您将两个变量写入同一个插槽，它们将相互覆盖，正如检查您的 cookie 所证明的那样。

例如

```
_gaq.push(["_setCustomVar", 1, "Gender", "Male", 1]);
document.cookie;
// => "...1=Gender=Male=1"

_gaq.push(["_setCustomVar", 1, "Visitor-Type", "Member", 1]);
document.cookie;
// => "...1=Visitor-Type=Member=1" 
```

从文档看来，您最多只能跟踪 5 个自定义变量。

# java - 如何比较哈希表中的值或键？

> ID：10127754
> 
> 赞同：3
> 
> 时间：2012-04-12T16:29:19.417
> 
> 标签：java

假设我有代码

```
public static void main(String args[])
{
    Hashtable ht = new Hashtable();
    Hashtable ht2 = new Hashtable();
    for(int i=0;i<100;i++)
    {
        ht.put(i, new Integer (i));
    }
    for(int i=50;i<100;i++)
    {
        ht2.put(i, new Integer (i));
    }
} 
```

如果我想比较两个不同的哈希表，我将如何在 Java 中做到这一点？编辑：如果我想比较哈希表中的键或实际值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:42:45.967

这将打印出所有常见的键/值对：

```
public static void main(String args[])
{
    Map<Integer, Integer> ht = new HashMap<Integer, Integer>();
    Map<Integer, Integer> ht2 = new HashMap<Integer, Integer>();
    for(int i=0;i<100;i++)
    {
        ht.put(i, i);
    }
    for(int i=50;i<100;i++)
    {
        ht2.put(i, i);
    }

    System.out.println("The following keys and values match:");

    for (Map.Entry<Integer, Integer> htEntries : ht.entrySet()) {
        if(ht2.containsKey(htEntries.getKey()) && ht2.get(htEntries.getKey()).equals(htEntries.getValue())){
            System.out.println("\tKey: " + htEntries.getKey() + " Value: " + htEntries.getValue());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:39:37.333

如果您想找出它们有哪些共同的键值组合，请使用类似

```
 HashSet<Entry<Integer, Integer>> entries = new HashSet<Entry<Integer, Integer>>(
   table1.entrySet());
 entries.retainAll(table2.entrySet()); 
```

并且`entries`只有两个映射中具有相同键和值的条目。

或者，仅供参考，Guava 提供了[`Maps.difference`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Maps.html#difference%28java.util.Map,%20java.util.Map%29)，它可以让您同时挑选出共同的条目，具有不同值但相同键的条目，以及具有不在另一个映射中的键的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:34:52.277

如果要比较两个映射是否相同，请使用`ht.equals(ht2)`.

要仅比较键，请使用`ht.keySet().equals(ht2.keySet())`.

比较这些值有点棘手，取决于您的要求。您的具体要求是什么？

PS`Hashtable`已过时；`HashMap<Integer,Integer>`在大多数情况下应该是首选。

# vsto - 如何在 VSTO 后台视图中屏蔽密码？

> ID：10127756
> 
> 赞同：2
> 
> 时间：2012-04-12T16:29:29.440
> 
> 标签：vsto

我需要在我的 VSTO 解决方案的自定义后台选项卡中输入密码。如何屏蔽密码？编辑框似乎不支持这一点，或者是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:18:15.420

功能区控件通常比标准 .NET 控件限制更多，所以不，它不支持特殊密码字符。

在保留在后台视图中的同时解决此问题的最佳方法是将实际字符放在类似的`Tag`位置`EditBox`，并将占位符密码字符放在`Text`属性中，然后设计一种在`TextChanged`触发事件时同步两者的方法。

# javascript - 从使用 jquery 创建的 iframe 调用父函数

> ID：10127757
> 
> 赞同：0
> 
> 时间：2012-04-12T16:29:32.937
> 
> 标签：javascript, jquery

考虑这段代码：

```
function callme() {
    alert('call');
}

$(function(){ 
    var iframe = $('<iframe />').attr('src', 'b.php').appendTo('body'); 
    //call 'callme' function from parent
}); 
```

我不想编辑 b.php。有什么方法可以在父文件中仅使用 javascript 调用父“callme”函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:35:26.740

不确定“我不想编辑`b.php`”部分。您的问题是询问如何从 iframe 调用父函数并且`b.php`在 iframe 中。`callme()`你怎么能在不修改的情况下让它调用父级`b.php`？

从`b.php`你可以打电话

```
parent.callme(); 
```

或者是你的问题，加载完成`callme()`后我怎么打电话？`b.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:38:38.257

要从 调用父 Javascript 函数，`iframe`您可以使用：

```
window.parent.callme(); 
```

请记住，如果 iframe 位于不同的域中，这将不起作用。如果它在不同的域上，您需要将两个页面设置`document.domain`为相同的值，例如：

```
// in both the parent and iframe
document.domain = 'site.com'; 
```

# zend-framework - ZendFramework 从数据库中获取数据出错

> ID：10127758
> 
> 赞同：0
> 
> 时间：2012-04-12T16:29:42.173
> 
> 标签：zend-framework

嘿，我有 3 个实例供管理员用户显示评论、用户和俱乐部。目前我正在努力让他们显示用户和俱乐部工作正常，但评论并不奇怪，因为对于所有这些我都使用相同的代码但分别替换了变量。

评论型号：

```
<?php

class Application_Model_DbTable_Comments extends Zend_Db_Table_Abstract
{

    protected $_name = 'comments';

    public function getComments($id) {
        $id = (int) $id;
        $row = $this->fetchRow('id = ' . $id);
        if (!$row) {
            throw new Exception("Count not find row $id");
        }
        return $row->toArray();
    }

} 
```

AdminViewCommentsController：

```
<?php

class AdminViewCommentsController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        $this->view->assign('title', 'Admin - View Comments');
        $this->view->headTitle($this->view->title, 'PREPEND');
        $comments = new Application_Model_DbTable_Comments();
        $this->view->comments = $comments->fetchAll();
    }
} 
```

最后是视图：

```
<table>
<th>Comment</th>
<th>Date</th>
<th></th>
<?php foreach($this->comments as $comments) : ?>
<tr>
    <td><?php echo $this->escape($comments->comment);?></td>
    <td><?php echo $this->escape($comments->date);?></td>
    <td><a href="#">Delete!</a></td>
</tr>
<?php endforeach; ?>
</table> 
```

我曾多次尝试重新输入这些内容，但某处出了点问题，我不知道它会是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:37:23.970

对不起，数据库中的字段名称错误！它应该是“comment_date”，而不仅仅是“日期”

对不起

# android - 如何查询单个 Uri，然后获取指向 Uri 项的 Cursor 对象？

> ID：10127759
> 
> 赞同：1
> 
> 时间：2012-04-12T16:29:43.030
> 
> 标签：android, cursor

像这样的 Uri：

```
com.android.contacts/contacts/lookup/0r431-E08CD8E00524/436 
```

这是我的方式：

```
Uri entityUri = Uri.withAppendedPath(contactUri, Contacts.Entity.CONTENT_DIRECTORY);
Cursor cursor = resolver.query(entityUri, ContactQuery.COLUMNS, null, null, null); 
```

它总是崩溃！请帮助我，谢谢！

```
The crash log is below:
 V/ContactTileView(  275):     
 mLookupUricontent://com.android.contacts/contacts/lookup/0r80-29121422/77
 V/ContactTileView(  275):       
 entityUricontent://com.android.contacts/contacts/lookup/0r80-29121422/77/entities
 D/AndroidRuntime(  275): Shutting down VM
 W/dalvikvm(  275): threadid=1: thread exiting with uncaught exception               
 (group=0x409f61f8)
 I/am_crash(   88):   
[275,com.android.contacts,572997,android.database.CursorIndexOutOfBoundsException,Index -1 requested, with a size of 2,AbstractCursor.java,434] 
```

我直接使用查找键：

```
Cursor cursor = resolver.query(lookupUri, ContactQuery.COLUMNS, null, null, null); 
```

崩溃日志略有不同：

```
/ContactTileView(  276):     
mLookupUricontent://com.android.contacts/contacts/lookup/0r285-E00EFAE00580/286
D/AndroidRuntime(  276): Shutting down VM
W/dalvikvm(  276): threadid=1: thread exiting with uncaught exception(group=0x409de1f8)
I/content_query_sample(  276): [content://com.android.contacts/contacts/lookup/0r285-E00EFAE00580/286,_id/display_name/display_name_alt/sort_key/starred/contact_presence/contact_status/photo_id/photo_thumb_uri/lookup/phonetic_name/has_phone_number/is_user_profile,,,41,com.android.contacts,9]
I/am_crash(   88):    
[276,com.android.contacts,572997,android.database.CursorIndexOutOfBoundsException,Index -1 requested, with a size of 1,AbstractCursor.java,434]
D/dalvikvm(  276): GC_CONCURRENT freed 111K, 3% free 7697K/7879K, paused 2ms+3ms
E/StrictMode(  276): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
E/StrictMode(  276): java.lang.Throwable: Explicit termination method 'close' not called
E/StrictMode(  276):    at dalvik.system.CloseGuard.open(CloseGuard.java:184)
E/StrictMode(  276):    at android.content.ContentResolver$CursorWrapperInner.<init>(ContentResolver.java:1581)
E/StrictMode(  276):    at android.content.ContentResolver.query(ContentResolver.java:320)
E/StrictMode(  276):    at com.android.contacts.list.ContactTileView.queryForCursor(ContactTileView.java:249)
E/StrictMode(  276):    at com.android.contacts.list.ContactTileListContextMenuAdapter.onLongClick(ContactTileListContextMenuAdapter.java:83)
E/StrictMode(  276):    at com.android.contacts.list.ContactTileView$2.onLongClick(ContactTileView.java:121)
E/StrictMode(  276):    at android.view.View.performLongClick(View.java:3498)
E/StrictMode(  276):    at android.view.View$CheckForLongPress.run(View.java:13961)
E/StrictMode(  276):    at android.os.Handler.handleCallback(Handler.java:605)
E/StrictMode(  276):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/StrictMode(  276):    at android.os.Looper.loop(Looper.java:137)
E/StrictMode(  276):    at android.app.ActivityThread.main(ActivityThread.java:4340)
E/StrictMode(  276):    at java.lang.reflect.Method.invokeNative(Native Method)
E/StrictMode(  276):    at java.lang.reflect.Method.invoke(Method.java:511)
E/StrictMode(  276):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/StrictMode(  276):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/StrictMode(  276):    at dalvik.system.NativeStart.main(Native Method) 
```

最重要的是，我认为我的要求是我可以通过查找 uri 获得光标。然后我可以通过这个光标从这个联系人中获取所有信息。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:34:22.590

我已经解决了我的问题！这很简单！我的代码没问题，但我必须在调用查询后调用 curosr.moveToFist。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T03:43:32.010

我遇到了同样的问题，当我不再需要使用游标时，通过调用 close 方法解决了这个问题。

# asp.net-mvc - 使用实体框架更新数据

> ID：10127761
> 
> 赞同：1
> 
> 时间：2012-04-12T16:29:49.037
> 
> 标签：asp.net-mvc, entity-framework

这是我对 editcar 的看法：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<J2V.Models.vehicule>" %>
//code
<% using (Html.BeginForm("editcar", "Agence", FormMethod.Post, new { @class = "search_form" })) { %>
    <%: Html.ValidationSummary(true) %>
    <fieldset>
        <legend>vehicule</legend>
        // Those colonne will not be modified
        <%: Html.HiddenFor(model => model.Matv) %>
        <%: Html.HiddenFor(model => model.Idag) %>
        <%: Html.HiddenFor(model => model.Idcat) %>
        <%: Html.HiddenFor(model => model.idmarque) %>
        <%: Html.HiddenFor(model => model.modele) %>

        //Colonne to edit code

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
<% } %> 
```

这是我的控制器动作：

```
[HttpPost]
public ActionResult editcar(Models.vehicule model)
{
        if (ModelState.IsValid)
        {
            entity.vehicule.AddObject(model);
            entity.ObjectStateManager.ChangeObjectState(model, System.Data.EntityState.Modified);
            entity.SaveChanges();
            return View("index", new { id = model.Idag });
        }
        else
            return View();
} 
```

当我单击`Update`按钮时，我收到此错误：

> System.InvalidOperationException：传入字典的模型项的类型为“<> f__AnonymousType2 `1 [System.String]' but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1 [J2V.Models.vehicule]”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:57:27.777

通常，“索引”视图的模型是`IEnumerable<YourModel>`. 但是在更新之后，您将一个匿名对象推送到“索引”视图中；（行：）*`return View("index", new { id = model.Idag });`*这可能是异常的原因。

您可以重定向到 index 操作：

```
if (ModelState.IsValid)
    {
        entity.vehicule.AddObject(model);
        entity.ObjectStateManager.ChangeObjectState(model, System.Data.EntityState.Modified);
        entity.SaveChanges();
        //return View("index", new { id = model.Idag });
        return RedirectToAction("index", new { id = model.Idag });
    }
    else
        return View(); 
```

希望这可以帮助...

# javascript - Jquery添加时间到日期字段

> ID：10127766
> 
> 赞同：0
> 
> 时间：2012-04-12T16:30:15.850
> 
> 标签：javascript, jquery, datetime, datetime-format

我从日期选择器获取日期

```
$("#dt").datepicker({ dateFormat: 'MM dd yy' }); 
```

现在，我想将默认时间 8:00:00 添加到日期。

var newdt =？？？

但不确定如何，我没有在 dateFormat 中添加时间是因为我不想在 UI 上显示时间。

还有如何禁止用户在文本框中输入文本？我想允许用户仅使用 datepicker 修改日期。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:32:41.560

要禁用输入文本：

```
function C_buttonNeutral(element) {
    element.onclick =           function() { return false; };
    element.onmousedown =       function() { return false; };
    element.onselectstart =     function() { return false; };
}
C_button_neutral(document.getElementById('dt')); 
```

添加时间：

```
document.getElementById('dt').innerHTML += ' 8:00:00 AM'; 
```

由于评论而编辑：

```
function changeTime(element, newTime) {
    // A time like this " 8:00:00 AM" has to whitespaces.
    element.innerHTML = element.innerHTML.substring(0, element.innerHTML.lastIndexOf(' '));
    element.innerHTML = element.innerHTML.substring(0, element.innerHTML.lastIndexOf(' '));

    // The new time is added
    element.innerHTML += ' ' + newTime;
}

//Example:
changeTime(document.getElementById('dt'), '10:00:00 AM'); 
```

# xcode - 减去两个日期之间的假期

> ID：10127767
> 
> 赞同：1
> 
> 时间：2012-04-12T16:30:15.990
> 
> 标签：xcode, core-data, nsdate, nscalendar

我写了一个简单的应用程序来计算两个日期之间的天数。现在我用 CoreData 添加了一个名为“假期组”的实体，表示包含假期日期和名称的关系。如何确保从计算中减去日期？我能做到。这是正确的方法吗？谢谢。

有关实体的附加信息：我有两个实体，第一个称为“假期组”，而第二个称为“假期”。两个实体之间存在关系。例如，在“假期组”中，您可以创建一个名为“意大利假期”的组，并在其中插入所有意大利假期，例如圣诞节（2012 年 12 月 25 日）或复活节（2012 年 4 月 9 日）等。我希望从计算中减去包含在假期组中的日期。因此，如果您要求程序计算 01/01/2012 和 31/12/2012 之间有多少天，我会得到 364。现在，因为程序不考虑假期，所以结果是 366。我希望我很清楚。 ![在此处输入图像描述](../Images/2d82b9a324af1a681122ec04a6386e17.png)

![在此处输入图像描述](../Images/dd4a7f52b73709fa909a9e0fa8a0d9e3.png)

![在此处输入图像描述](../Images/a6fd3950c4086df95929af5a8d5c6118.png)

![在此处输入图像描述](../Images/bb62d6ee8270885b3109fd281138e0ca.png)

![在此处输入图像描述](../Images/e3df729f5216436766a25fa619abd714.png)

# java - Vaadin 日历：如何在事件单元格上显示另一个属性

> ID：10127768
> 
> 赞同：1
> 
> 时间：2012-04-12T16:30:17.573
> 
> 标签：java, javascript, calendar, vaadin

我想在 vaadin 日历的事件块上显示另一个属性。但默认情况下它只显示事件标题，你可以从这个链接看到演示：http: [//demo.vaadin.com/calendar](http://demo.vaadin.com/calendar)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:45:31.587

您必须扩展`com.vaadin.addon.calendar.event.BasicEventProvider`或实施`com.vaadin.addon.calendar.event.CalendarEventProvider`.

如果您选择扩展`BasicEventProvider`，您可以像这样覆盖它的`addEvent`方法：

```
@Override
public void addEvent(BasicEvent event) {
    event.setCaption("My custom caption");
    super.addEvent(event);
} 
```

如果您想更好地控制您的事件和事件提供程序，我建议您创建自己的事件提供程序来实现`CalendarEventProvider`. 如果事件必须包含比标题、描述和持续时间更多的数据，您可能应该通过扩展来创建自己的事件类`com.vaadin.addon.calendar.event.BasicEvent`。

当您有自定义事件提供程序时，您必须调用`myCalendar.setEventProvider(myEventProvider);`

[Vaadin 书中](https://vaadin.com/book/-/page/calendar.eventprovider.html)也有一篇很好的文章。

# php - 处理具有多个操作的表单

> ID：10127770
> 
> 赞同：0
> 
> 时间：2012-04-12T16:30:28.400
> 
> 标签：php, wordpress

我正在尝试制作一个表单，在我的 wordpress 网站上创建一个新帖子，将视频上传到我的运行帐户上的 Bits，并检索此视频网址。

如此处所述[，](http://www.longtailvideo.com/support/bits-on-the-run/15984/upload-videos-within-your-cms)我必须将表单操作设置为 url 才能使 api 工作，但我必须使用 php 文件处理其他表单输入。

那么有没有办法可以对表单使用多个操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:32:24.120

您可以将表单设置为提交到 php 页面，然后在该页面上（取决于您的 method="post" 还是 method="get"），您可以使用 attained 变量来做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:34:04.570

您只能将每个表单提交到一个 URL，我建议编写一个脚本（例如 PHP 脚本）& 将您的表单提交到该脚本后，您可以将您的请求转发给其他 API。

# wpf - WPF/Silverlight 中的水平滚动效果叫什么？

> ID：10127775
> 
> 赞同：0
> 
> 时间：2012-04-12T16:30:50.953
> 
> 标签：wpf

我开始创建 WPF 全屏信息亭应用程序的原型，并且想知道气象站应用程序中使用的滚动城市名称的效果是什么？[http://demos.telerik.com/silverlight/weatherstation/](http://demos.telerik.com/silverlight/weatherstation/)

还有任何特定的网站可以让您获得关于 WPF/Silverlight 的良好教程和信息吗？自从 .Net 出现以来，我一直在使用它，我发现的大多数教程都非常简单或 99 级...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:25:29.100

当作者提到“平移”时，我完全忘记了这个问题，直到阅读另[一篇关于使您的应用程序脱颖而出的 WPF 文章。](http://blogs.msdn.com/b/windowsappdev/archive/2012/07/11/creating-metro-style-apps-that-stand-out-from-the-crowd.aspx)

# json - 样式表没有按预期工作

> ID：10127779
> 
> 赞同：1
> 
> 时间：2012-04-12T16:31:09.427
> 
> 标签：json, actionscript-3, sprite-sheet, flixel

我是 Flixel 的新手，所以如果我的问题太简单，请原谅我。

我的问题是：我使用 Photoshop 制作了四个非常简单的图像（站立、移动、侧立、侧移），然后将其传递给 Texture Packer（样式表制造商）它为我生成了一个图像（非常简单）加上一个 JSON文件，这里是：http:
[//i.stack.imgur.com/UTi4G.png](http://i.stack.imgur.com/UTi4G.png)
所以我想将它们与 Flixel 一起用作站立的角色（第一个），当我调用动画移动时，它将使用最后一张图片，但它没有按预期工作。基本上它一次显示所有四个图像。
这是代码：
Character.as：

```
package
{
    import org.flixel.FlxSprite;

    public class Character extends FlxSprite
    {
        [Embed (source="character.png")]
        private var CharacterGraphic:Class;
        public function Character(X:Number=0, Y:Number=0)
        {
            super(X, Y);
            loadGraphic(CharacterGraphic, true, false, 53, 54);
            velocity.y = 100;
            addAnimation('move_forward', [0, 3], 30, false);

        }

    }
} 
```

PlayState 类（我在其中创建此类的实例）

```
 override public function create():void{
        character = new Character(100, 200);
        add(character);

    }
    override public function update():void{
        //for debugging
        if(character.y == 600){
            character.play('move_forward');
        }
        super.update();
    } 
```

所以我期望：
当velocity.y为600（仅用于测试）时，第一个图像被弹出（并继续下降）move_forward动画开始（循环通过第一个和最后一个图像）

输出是：
所有四个图像都弹出，当velocity.y == 60 时没有任何反应。

我真的认为我遗漏了一些东西，因为我对 Actionscript 3 和 Flixel 非常陌生（也是游戏开发！）。

几乎相同的步骤适用于在线教程，唯一的区别是他创建了几个动画（敌人）而不是一个，在这里查看[http://gotoandlearn.com/play.php?id=139](http://gotoandlearn.com/play.php?id=139)
对于 JSON 文件，我从来没有找到了它的用途（我尝试在 IRC 频道中询问，但没有人提及），也在论坛/教程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:17:23.870

我看到的第一个问题是您的图像位于多行上。Flixel 喜欢它的框架都是在一个水平行中的正方形。即使您为每个框架指定一个矩形大小，它们仍然需要全部相同大小并且在一个水平行中。如果你做对了，你应该有 0 到 3 帧。

当您的图像/框架应该更改时没有发生任何事情的原因是因为您希望它更改为的索引处没有框架。这应该通过相同的更改来解决。

由于这个原因，我不相信大多数 sprite 打包器都有 flixel 项目。Sprite 打包器正在尝试最小化文件大小，因此他们会将尽可能多的 sprite 塞入尽可能小的空间，因此每个 sprite 的大小都与其他 sprite 不同。正如我所说，Flixel 喜欢它的精灵大小相同且全部排成一排。

I found one that does do what I want it to...I'll have to take a look once I get home to see what program it is (or if I don't even have it any more). In the mean time, just use photoshop to make a document the height of your tallest sprite and the width the width of your widest sprite x the number sprites in the sheet. Then place each sprite/frame in the appropriate space.

Edit: I don't think you need the JSON file at all. Just use a transparent PNG.

# visual-studio-2010 - TFS 合并未更改的文件，甚至不在变更集中

> ID：10127782
> 
> 赞同：2
> 
> 时间：2012-04-12T16:31:18.290
> 
> 标签：visual-studio-2010, merge

我有两个主要的功能分支，FB1 和 FB2。我在 FB1 中有一个变更集。我需要 FB2 中的变更集，但此时政策禁止我将其合并到 Main 中。所以我运行了毫无根据的合并命令行：

```
Tf merge /baseless "$/FB1" "$/FB2" /recursive 
```

出乎意料的是，TFS 报告说整个树中的**每个**文件都需要合并。搜索后，我找不到为什么会发生这种情况的解释。然后我明确表示我只想要一个变更集：

```
Tf merge /baseless "$/FB1" "$/FB2" /recursive /version:C1436 
```

我得到了同样的结果。它仍然说每个文件都需要合并。但是变更集中只有两个更改的文件。我希望只有更改的两个文件会被合并。为什么 TFS 的行为不符合我的预期？

另外，有什么方法可以找出 TFS 想要合并两个文件的原因吗？当我对任何文件进行比较时，它们是相同的，那么我如何确定 TFS 所看到的不同呢**？**

**更新**

实际发生的情况是我们重命名了其中一个分支中的根文件夹（我不记得确切的设置），这使得 TFS 看到一切都不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:44:40.937

您想要的操作的语法如下。这表示“仅将变更集 1436 从 FB1 合并到 FB2。”

```
tf merge /baseless /recursive $/FB1;C1436~C1436 $/FB2 
```

谢谢，P.凯利

# css - 仅在 Chrome 浏览器中的 CSS 图像悬停奇怪效果

> ID：10127783
> 
> 赞同：0
> 
> 时间：2012-04-12T16:31:22.753
> 
> 标签：css, hover

在此网站上，如果您在使用 Chrome 时将鼠标悬停在主页滑块下方的三个水平图像框上，则在悬停时，其他两个框会跳下页面。

这个问题在 Firefox 中不会发生。

我一直在玩 display:block 属性，但没有设法对其进行排序，如果有人能告诉我我做错了什么，我将不胜感激 - 谢谢。

网站：[http ://www.benchmemorials.co.uk/](http://www.benchmemorials.co.uk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:37:29.367

也没有问题，但是这种问题通常来自不同浏览器默认设置的margin和padding。检查[normalize css](http://necolas.github.com/normalize.css/)，它将为您设置元素的一些基本样式。

# mysql - 如果其中一个表为空，则涉及 OR 的 sql 查询将不会返回结果

> ID：10127788
> 
> 赞同：0
> 
> 时间：2012-04-12T16:31:43.823
> 
> 标签：mysql

我在找出这个查询到 mysql db 的小问题时遇到了问题

```
SELECT s.*
FROM section AS s, sectioncompany AS scom
WHERE ((s.restricted = 0 ) OR (s.restricted = 1 AND s.id = scom.sectionId AND scom.companyId = $companyId)) 
```

当 sectioncompany 表中有条目时，这可以正常工作并返回结果，但是当该表为空时，查询不会产生任何结果。目前，我通过简单地向 sectioncompany 表添加一条空记录来解决问题，但我想了解我忽略了什么。如您所见，一旦表为空，将不会满足涉及该表中现有值的条件，但它仍应返回 s.restricted = 0 的值，不是吗？我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:36:08.297

这里的问题是您使用的是 INNER JOIN（通过使用 WHERE 子句匹配 (s.id = scom.sectionId)。您想要的是 LEFT JOIN：

```
SELECT s.*
FROM section s
LEFT JOIN sectioncompany scom ON (s.id = scom.sectionId)
WHERE ((s.restricted = 0 ) OR (s.restricted = 1 and scom.companyId = $companyId)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:35:23.277

这是因为您使用的是交叉连接，它为源表中的每个行组合返回一行。如果其中一张表没有行，则没有可能的组合。

让我们知道您想要实现的目标，如果可能的话，使用模式和数据，有人可能会建议正确的 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T16:37:04.370

使用显式`JOIN`而不是笛卡尔连接，这样您就可以`LEFT JOIN`并且问题应该消失：

```
SELECT `s`.*
FROM `section` `s`,
LEFT JOIN `sectioncompany` `c` ON `s`.`id` = `c`.`sectionId`
WHERE `s`.`restricted` = 0
  OR (`s`.`restricted` = 1 AND `c`.`companyId` = $companyId) 
```

# c++ - 是否可以让 Eclipse CDT 强制构建 CMake 生成的项目，而不考虑资源的新鲜度？

> ID：10127794
> 
> 赞同：5
> 
> 时间：2012-04-12T16:32:07.947
> 
> 标签：c++, eclipse, cmake, eclipse-cdt

我发现自己使用 Eclipse 的模式很奇怪。我有一个项目依赖于 Eclipse 项目中未正确考虑的资源，因此如果我只更新依赖项中的标头，Eclipse 拒绝在命令时构建，显然是因为它认为没有必要。结果，我最终不断地在文件中添加一个空格并保存以让 CDT 进行我的竞标。

虽然可以将依赖项集成到项目设置中，但项目偶尔会被 CMake 自动生成工具（我对修补不感兴趣）重写，这将覆盖配置，并要求我重新配置依赖项再次和再次。

我想做的只是告诉 Eclipse 它应该忽略它认为应该发生的事情并遵守构建命令，并让底层的 make 系统完成它的工作（确定应该构建什么和不应该构建什么） ）。

TL;博士：

*   Eclipse CDT 尝试通过观察文件的新鲜度来判断是否构建
*   它只监视正确设置的依赖项
*   我不想设置依赖项，因为当我将文件添加到项目时，项目经常被 CMake 覆盖

**任何人都知道如何覆盖 CDT 的决定并强制构建？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:14:44.887

我面临同样的问题，我正在分两部分开发程序（两个静态库），如果我对一个库进行重建，Eclipse 不会更新另一个，因为它显然不会关注静态的变化图书馆。

解决方案是在每次构建之前“清理”项目（右键单击项目 -> 清理项目），然后进行构建。这有效地删除了所有以前的构建结果并从头开始构建。我还没有想出如何通过单击一个按钮来做到这一点，但这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:04:53.390

您使用的是 Eclipse 的内部构建器吗？因为，在使用外部构建器设置时，我没有遇到您提到的任何问题。即使在 Eclipse 之外编辑某些文件时，尽管 Eclipse 完全不知道这些更改，构建仍然可以工作。

![Eclipse C/C++ 构建项目属性](../Images/50dcc8541937a37891a032b7932e3a1e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T04:01:01.230

您可以将以下内容添加到您的makefile吗？

```
FORCE:

%.o : %.cpp FORCE
    $(CXX) -c $(CXXFLAGS) $< -o $@ 
```

这`FORCE` 是一个空目标，因此总是新鲜的。因此，无论何时`FORCE`包含在依赖项列表中，它们都将在所有构建中重新构建。

# iphone - 带有进度条的 UITableView 单元格选择

> ID：10127795
> 
> 赞同：0
> 
> 时间：2012-04-12T16:32:08.287
> 
> 标签：iphone, uitableview

我有一个简单的 UITableView 应用程序，它有一个 SQLITE 数据库（约 20000 行），并且由于每次 SELECT 需要大约 3-6 秒来获取结果，所以我想在用户触摸单元格行时向用户显示进度条，所以他知道那是正在发生的事情。

我试过这个，但效果不好，因为 HUD 只出现了大约 0.1 秒：

```
 - (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    HUD = [MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES];
    HUD.mode = MBProgressHUDModeIndeterminate;
    HUD.labelText = @"Loading"; 

    return indexPath;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    [HUD hide:YES afterDelay:0.1];
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:27:40.670

您可以在单元格附件中添加 UIActivity 指示器，而不是添加进度条。它非常容易创建并且外观漂亮。

# cakephp - CakePHP 2.0 -> 我应该使用 CustomAuthorization 还是在 Controller 中编写逻辑

> ID：10127796
> 
> 赞同：0
> 
> 时间：2012-04-12T16:32:08.567
> 
> 标签：cakephp, cakephp-2.0

有时我对如何在 Cake 中做事感到有些困扰。因此，我希望您对以下用例提出意见：

我正在构建一个用户也可以用来创建帐户的登录表单，用户需要提供某个注册号和一个电子邮件地址。提交后，我正在检查用户是否已存在于数据库中，如果不存在，则创建用户。创建后用户需要由我们公司的员工验证，用户需要验证他/她的电子邮件地址。

当然，这很容易在控制器中编写代码，但我也在考虑将此逻辑构建为 CustomAuthentication 类。然后 CustomAuthentication 类处理上述所有逻辑，因此如果记录不存在则创建一个用户，并根据用户是否已通过我们验证或他是否已验证他的电子邮件地址提供有用的反馈。

所以我会更好地创建一个带有自定义身份验证类的精益控制器......或者这个逻辑更好地写在控制器本身中。

总的来说：有没有什么地方可以找到有关使用 MVC 框架的最佳实践的信息……我经常发现自己在决定将代码放在哪里时遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:58:05.840

我认为不需要自定义身份验证类，因为这与身份验证没有太大关系，就像与注册过程一样。身份验证*通常*是一个步骤过程，您在此处描述的是多个步骤 - 注册、验证、启用。一旦用户登录，这就是身份验证的来源。

就最佳实践而言，我只是通过了解每个组件（控制器、模型、视图、数据源、组件、行为、帮助器等）的作用而逐渐了解的。归根结底，只需询问它是布局逻辑、业务逻辑还是连接逻辑，这应该将您指向正确的位置（分别为视图、模型、控制器）。我敢肯定有很多资源可以帮助你，所以不排除。至于 Cake，如果您对放置东西的正确位置有疑问，请查看 IRC 中的#cakephp。人们通常在那里为您指明正确的方向。

# facebook - Facebook like 插件、评论框和发送框是图层下的弹出窗口

> ID：10127797
> 
> 赞同：1
> 
> 时间：2012-04-12T16:32:10.583
> 
> 标签：facebook, plugins, popup, z-index, show

我遇到了 Facebook *like*插件的问题。这是问题的屏幕截图：

![在此处输入图像描述](../Images/6154ba768cb7e24dc8dea46041fc2325.png)

正如您在屏幕截图中看到的，评论框是身体部位下方的弹出窗口。我怎样才能安排它弹出来？

顺便说一句，主体的容器部分（div、表格等）默认情况下都没有 z-index 值，所以我尝试设置插件容器的 z-index 值但它不起作用......

有办法安排吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:56:21.407

在文档中有这个常见问题解答：

> 当我单击“赞”按钮时，不会显示弹出窗口（或“弹出窗口”）。为什么？
> 
> 如果将 Like 按钮放置在 HTML 元素的边缘附近，并且溢出属性设置为隐藏，则单击按钮时弹出按钮可能会被剪裁或完全隐藏。这可以通过将溢出属性设置为隐藏以外的值来解决，例如可见、滚动或自动。

页面底部在这里[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# soap - 在 Sencha Touch 2 中字符串到商店

> ID：10127798
> 
> 赞同：0
> 
> 时间：2012-04-12T16:32:13.657
> 
> 标签：soap, xml-parsing, sencha-touch-2

我正在使用[Javascript SOAP Client](http://javascriptsoapclient.codeplex.com/)从我的 SOAP Web 服务以 XML 格式接收响应。我将我想要的所有数据解析为一个字符串。

```
[{ZNA_COD:'111',ZNA_DESIG:'Blabla'},{ZNA_COD:'11',ZNA_DESIG:'Blabla'},{ZNA_COD:'1',ZNA_DESIG:'Blabla'},{ZNA_COD:'2',ZNA_DESIG:'Blabla'},{ZNA_COD:'11111',ZNA_DESIG:'Blabla'}] 
```

如何将其存储在 Sencha Touch 2 中？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:25:00.020

我用过 ST1.1，只是从 ST2 开始。

我想这取决于你想要做什么。如果您的数据总是从实时源中提取，您可以只使用 Ext.data.Store 并定义一个阅读器。在您的情况下，它将具有一种 xml。

```
Ext.define('ZNA', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            {name: 'ZNA_COD',  type: 'string'},
            {name: 'ZNA_DESIG', type: 'string'}
        ]
    },
});

var store = Ext.create('Ext.data.Store', {
    model: 'ZNA',
    proxy: {
        type: 'ajax',
        url : 'www.your-service-url.com',
        reader: {
            type: 'xml',
            record: 'ZNA'
        }
    }
});
store.load(); 
```

如果您使用此过程，它会在您调用 load 方法时自动将数据拉入您的存储中。或者您可以在其上设置 autoLoad。

如果您的设备上已有数据，并且对您获取数据的方式感到满意。然后，您可以创建模型的新实例并用您的值填充它。然后你会把它保存到你的商店。

```
var instance = Ext.create('ZNA', {
    ZNA_COD:'111',
    ZNA_DESIG:'Blabla'
});

store.add(instance); 
```

你可能需要检查语法，我可能有一些 ST1.1 的东西漂浮在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:41:25.677

首先，您应该将数据解析为**有效的 JSON 字符串**，例如：`{data: [your data here]}`如果您设法做到这一点，那么 remaning 任务非常简单，包括 2 个步骤：

*   用于`Ext.decode`将您的字符串解析为**JSON 对象**
*   then`result.data`现在是你的结果数组。遍历它们并将它们添加到`Ext.data.Store`非常简单，因为我认为不需要在这里写下来，不是吗？

# asp.net-mvc - MVC 3 将 /Register/Event/1?name=channel-news-asia 更改为 /Register/Event?name=channel-news-asia

> ID：10127800
> 
> 赞同：0
> 
> 时间：2012-04-12T16:32:17.933
> 
> 标签：asp.net-mvc, hyperlink

目前，我有[http://localhost:xxxxx/Register](http://localhost:xxxxx/Register)，显示从数据库中检索的表。

eName eLink fWidth fHeight
channel-new-asia [http://www.channelnewsasia.com/](http://www.channelnewsasia.com/) 1024 768 **注册**

现在，注册链接就像[http://localhost:xxxxx/Register/Event/1?name=channel-news-asia](http://localhost:xxxxx/Register/Event/1?name=channel-news-asia)，我如何使它成为[http://localhost:xxxxx/Register/Event?name=channel-亚洲新闻](http://localhost:xxxxx/Register/Event?name=channel-news-asia)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:46:15.977

默认情况下，MVC 使用此路由：

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } //Parameter defaults
        ); 
```

您将名称为“id”的参数放入页面某处的请求中。因此，URL 包含“id”参数。您需要使用另一个名称（不是“id”），或者您应该更改默认值。

# dynamics-crm - CRM 2011 Ribbon Enable Rule on grid 不会因每次更改行而触发

> ID：10127802
> 
> 赞同：2
> 
> 时间：2012-04-12T16:32:20.267
> 
> 标签：dynamics-crm, dynamics-crm-2011, ribbon

我正在尝试将按钮添加到网格视图上的 CRM 2011 功能区。我希望有条件地启用或禁用某些标准的按钮，这些标准可能因网格中的每一行而异。

我有 EnableRule 设置，并且对于单选和多选都可以正常工作 - 问题是该规则仅在所选项目数量发生变化时触发。因此，它在用户选择一行时第一次起作用，但在用户选择不同数量的行之前不会再次触发 - 即。更改单个选定行不会按预期触发启用规则。

编辑 - 我的启用规则 XML 如下

```
 <EnableRule Id="cnet.exception.grid.EnableReviewButton">
          <CustomRule FunctionName="EnableReviewButtonOnGrid" Library="$webresource:cnet_ribbon_js" Default="false">
            <CrmParameter Value="SelectedControlSelectedItemIds" />
          </CustomRule>
        </EnableRule> 
```

**更新** 好的，当用户第一次在网格中单击时，该规则确实每行触发一次 - 阻止这种情况发生的原因是在启用规则调用的 JS 函数中有一个调试“警报”语句。现在只需要弄清楚如何获取正在处理的行的 id ......

有什么想法吗...？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:03:52.350

我在 MS Connect 中创建了一个增强请求：

[https://connect.microsoft.com/dynamicssuggestions/feedback/details/775400/fire-custom-rule-in-ribbon-enable-rule-when-grid-selection-changes](https://connect.microsoft.com/dynamicssuggestions/feedback/details/775400/fire-custom-rule-in-ribbon-enable-rule-when-grid-selection-changes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:04:55.953

> 现在只需要弄清楚如何获取正在处理的行的 id ......

嗨，马特，我不清楚您现在期望您的脚本做什么。由于这是一个启用规则，它将用于通过评估网格中所有选定项目的标准来启用或禁用功能区按钮。

我相信，您正确地选择了设置*CrmParameter*以将*SelectedControlSelectedItemIds*传递给您的启用脚本。我确定您知道（因为您说您的启用规则对单个选择正常工作）*SelectedControlSelectedItemIds*是一个字符串数组 guid，这允许您迭代所有选择并根据您的需要对每个选定项目集体评估您的规则。

我不清楚的是为什么您需要知道“正在处理”的（大概）单行的 id（即最后选择/取消选择的项目？）。我假设如果选择中的一个项目不符合脚本中封装的“启用”标准，那么脚本应该返回 false，因此隔离最后一个 [de] 选择是多余的。

我误解你的要求了吗？：-/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:56:59.697

是的，您的 RibbonDiffXml 会很有帮助。但是，从你所说的我认为你需要一个自定义脚本启用/禁用规则。像这样的东西

```
<EnableRules>
      <EnableRule Id="Mscrm.AddExistingCustomRule">
       <CustomRule FunctionName="HideExisting" Library="$webresource:new_CustomRule.js" Default="false" >
          <CrmParameter Value="PrimaryEntityTypeCode" />
        </CustomRule>
      </EnableRule>
 </EnableRules> 
```

根据 crm 2011 中的自定义规则，在此处查看完整帖子[启用/禁用开箱即用按钮（子网格）](http://mscrmshop.blogspot.com/2011/08/enabledisable-out-of-box-buttons-based.html)

刚刚发现有一个名为 refreshRibbon() 的函数，您可以调用它来刷新 RibbonState。像这样：

```
Xrm.Page.ui.refreshRibbon(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:05:53.667

听起来您的规则定义不正确。selectionCount 规则正在触发，但不是您的 CustomRule（或您拥有的任何东西）。

你能发布你的XML吗？

# c# - 无法读取 ASP.NET WebApi 控制器中的 Request.Content

> ID：10127803
> 
> 赞同：25
> 
> 时间：2012-04-12T16:32:20.203
> 
> 标签：c#, asynchronous, asp.net-web-api

我正在 TransferMode.Streamed HttpSelfHostConfiguration exe 中使用 WebApi 编写代理。

当我使用提琴手发布到我的 ApiController 时，由于某种原因我无法读取 Request.Content - 即使我已经发布了数据，它也会返回“”

```
public class ApiProxyController : ApiController
{

    public Task<HttpResponseMessage> Post(string path)
    {
        return Request.Content.ReadAsStringAsync().ContinueWith(s =>
        {
            var content = new StringContent(s.Result); //s.Result is ""
                CopyHeaders(Request.Content.Headers, content.Headers);
            return Proxy(path, content);
        }).Unwrap();
    }

    private Task<HttpResponseMessage> Proxy(string path, HttpContent content)
    {
        ...
    }
} 
```

这是我的网络请求

```
POST http://localhost:3001/api/values HTTP/1.1
Host: localhost:3001
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Content-Type: application/json
Content-Length: 26

{ "text":"dfsadfsadfsadf"} 
```

我做错了什么？为什么 s.Result 以空字符串而不是原始 json 形式返回？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-05T15:13:05.103

我也为此苦苦挣扎。`ReadAsStringAsync`并`ReadAsAsync`返回一个任务对象。引用该`Result`属性会返回内容。它可能是引用 Result 属性导致异步读取请求阻塞。

例子：

```
string str = response.Content.ReadAsStringAsync().Result; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-14T09:59:57.717

我意识到这是旧的，并且已经得到回答，但是对于它的价值，你不能使用的原因`ReadAsStringAsync()`不是因为它像建议的那样“吃掉数据”，而是因为内容被作为流处理并且由于消息格式化程序已经使用了数据，因此流的位置已经在末尾。

为了使用`ReadAsStringAsync()`您首先需要将内容流位置重置为开头。

我这样做是这样`response.RequestMessage.Content.ReadAsStreamAsync().Result.Seek( 0, System.IO.SeekOrigin.Begin )`的：因为我只有 HttpResponseMessage，但是如果您可以直接访问 HttpRequestMessage（就像您在 Controller 中所做的那样），您可以使用`Request.Content.ReadAsStreamAsync().Result.Seek( 0, System.IO.SeekOrigin.Begin )`我想它在功能上是等效的。

**后期编辑**

`Result`在许多情况下，使用上述方式读取异步流会导致死锁和线程阻塞。如果您必须以同步方式从异步流中读取，最好使用以下形式：

```
 new TaskFactory( CancellationToken.None, 
                  TaskCreationOptions.None, 
                  TaskContinuationOptions.None, 
                  TaskScheduler.Default )
      .StartNew<Task<TResult>>( func )
      .Unwrap<TResult>()
      .GetAwaiter()
      .GetResult(); 
```

`func`您要运行的异步操作在哪里，所以在这种情况下，它类似于`async () => { await Request.Content.ReadAsStreamAsync(); }`……这样，您可以将方法的异步部分放在该`StartNew`部分内，并正确解开编组回同步代码时发生的任何异常。

更好的是，使整个堆栈异步。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-06-27T04:20:59.997

这个 post 签名吃掉了 post 数据：

```
public HttpResponseMessage Post([FromBody]string postdata) 
```

将其更改为：

```
public HttpResponseMessage Post() 
```

那么这个调用可以很好地获取发布数据：

```
string str = response.Content.ReadAsStringAsync().Result; 
```

我自己测试过。使用第一个签名，str为空，使用第二个str有post数据！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-08T21:04:41.043

我相信您对 ApiController 吃 Request.Content 的看法是正确的。您在 ApiController 中看到的“Request”对象实际上是 System.Net.Http.HttpRequestMessage 类型。我能够解决这个问题，但像这样备份到 System.Web.HttpRequest 对象：

```
Dim content as string
If HttpContext.Current.Request.InputStream.CanSeek Then
    HttpContext.Current.Request.InputStream.Seek(0, IO.SeekOrigin.Begin)
End If
Using reader As New System.IO.StreamReader(HttpContext.Current.Request.InputStream)
    content = reader.ReadToEnd()
End Using
```

我不知道搜索倒带是否必要，但我把它放在以防万一。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-16T21:44:54.883

我最终通过从基本接口而不是 ApiController 继承来完成这项工作 - 我认为 ApiController 是模型绑定，它正在吃掉响应

编辑：构建代理的正确方法是 MessageHandler，而不是 ApiController

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-16T12:30:41.217

1.  Request.Content.ReadAsStreamAsync().Result.Seek(0, System.IO.SeekOrigin.Begin)
2.  新 System.IO.StreamReader(Request.Content.ReadAsStreamAsync().Result).ReadToEnd()

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-31T20:07:39.800

This late addition to the answers here show how to read the POST data from WebAPI:

```
string postData;
using (var stream = await request.Content.ReadAsStreamAsync())
{
    stream.Seek(0, SeekOrigin.Begin);
    using (var sr = new StreamReader(stream))
    {
        postData = await sr.ReadToEndAsync();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-30T10:38:43.877

你应该为你的论点使用一个复杂的类型，然后在正文中使用一些像

{路径：“c：...”}

阿尔斯使用

内容类型：应用程序/json；字符集=UTF-8

您的 post 请求中的标头，以便 web api 知道 json 包含在正文中

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-16T20:18:19.737

尝试替换`ReadAsStringAsync()`为`ReadAsAsync<string>()`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-27T08:55:31.893

尝试使用 CopyToAsync 而不是 ReadAsStringAsync 似乎可以解决问题

```
var ms = new MemoryStream();
await response.Content.CopyToAsync(ms);
ms.Seek(0, SeekOrigin.Begin);

var sr = new StreamReader(ms);
responseContent = sr.ReadToEnd(); 
```

# jquery - 滑动切换仅打开 1 个 div

> ID：10127804
> 
> 赞同：0
> 
> 时间：2012-04-12T16:32:23.090
> 
> 标签：jquery, toggle

我是 JQuery 的新手。我在任何地方都没有找到我的答案，而且我已经找了很长时间了。我希望在单击任何触发器时打开“面板”，然后显示相应的文本。如果单击另一个触发器，则面板保持打开状态，第一个文本向上滑动（隐藏）并显示下一个文本块。

HTML

```
<a>trigger text 1</a>
<a>trigger text 2</a>
<a>trigger text 3</a>

<div id="panel" style="display: none;">
    <div id="info-1" style="display: none;"> text </div>

    <div id="info-2" style="display: none;"> text 2 </div>

    <div id="info-2" style="display: none;"> text 3 </div>
</div> 
```

Jquery：我什至不会打扰我正在尝试的代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:35:26.167

你可以试试：

```
$('a').click(
    function(){
        var which = $(this).index();
        $('#panel').show();
        $('#panel > div:visible').slideUp();
        $('#panel > div').eq(which).slideDown();
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eC2xJ/)。

# linux - 从 sk_buff 访问 MAC 地址

> ID：10127806
> 
> 赞同：6
> 
> 时间：2012-04-12T16:32:25.353
> 
> 标签：linux

我正在编写一个内核模块来从存储在 sk_buff 中的数据包中获取 MAC 地址。我使用以下代码打印源和目标的 MAC 地址：

```
struct ethhdr *mh = eth_hdr(skb);  
printk(KERN_EMERG "Source MAC=%x:%x:%x:%x:%x:%x\n",mh->h_source[0],mh->h_source[1],mh->h_source[2],mh->h_source[3],mh->h_source[4],mh->h_source[5]); 
```

可以使用`h_dest`inplace of访问目标地址`h_source`。
我的问题是源 MAC 地址总是`a8:c0:0:0:a8:c0`，而目标 MAC 地址总是一些垃圾值，而不是我自己的 MAC 地址。
谁能帮我解决这个问题？我想获得正确的 MAC 地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:45:17.883

您到底在内核的哪个位置执行此操作？

a8:c0 看起来很可疑。它转换为十进制的 168.192，这让我怀疑您实际上是在查看 IPv4 标头而不是以太网标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:47:05.453

仅当skb确实*具有*MAC 标头`eth_hdr`时才有意义。如果没有，skb 的 MAC 头指针只会指向数据包中的其他数据。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-01T16:24:55.293

使用`mac_len`可以帮助您解决此问题。通常你会得到 14（6 用于目标 mac + 6 用于源 mac + 2 用于协议）字节或 0（数据包来自环回）。请注意，如果返回 0，`eth_hdr`将直接指向数据（在 ip 协议的情况下指向 ip 标头）而不是以太网帧标头，正如 jørgensen 所说。

要获取非零 mac_len 的 mac，可以直接使用返回的指针`eth_hdr`：

```
struct ethhdr* pHdr = eth_hdr(skb);  
printk(KERN_EMERG "Source MAC=%x:%x:%x:%x:%x:%x\n", pHdr[6], pHdr[7], pHdr[8], pHdr[9], pHdr[10], pHdr[11]); 
```

如果您对计算环回数据包的 MAC 地址感兴趣，请参阅`protocol`字段。例如，如果它等于 08 00 (8)，则可以从目标 ip 地址获取 mac。如果地址是ff:ff:ff:ff，你就知道mac是ff:ff:ff:ff:ff:ff（广播）。如果没有，请使用设备的 mac 地址，或任何您喜欢的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-30T16:08:30.063

您需要在第 2 层处理数据包才能访问以太网标头。如果您的 linux 内核模块在第 3 层（Netfilter 挂钩）获取数据包，则 MAC 地址不存在于数据包中。*

# java - 我的应用程序启动时播放音频剪辑。

> ID：10127808
> 
> 赞同：0
> 
> 时间：2012-04-12T16:32:30.540
> 
> 标签：java, android, audio

我是 android 开发的新手，我已经查看了有关在原始文件中将音频文件实现到 Eclipse 中的教程，但是我看到的所有教程都是针对单击音频剪辑的我需要在应用程序加载时自动启动音频

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:29:29.320

如果您有一个教程向您展示如何在单击按钮时播放音频剪辑。`onClick()`只需从教程中显示的事件中提取代码，然后将其移动到`onCreate()`您希望播放剪辑的 Activity 事件中。

应该没那么难，真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:15:10.350

在 raw 文件夹中添加您的音频文件

在 Oncreate

```
MediaPlayer mPlay = MediaPlayer.create(this, R.raw.youraudiofile);

    mPlay.start(); 
```

在 onPause

```
mplay.stop(); 
```

在 OnDestroy 中

```
 mPlay.stop();
        mPlay.release();
        mPlay = null ; 
```

# assembly - 汇编 - 宏中的一些问题

> ID：10127809
> 
> 赞同：0
> 
> 时间：2012-04-12T16:32:31.113
> 
> 标签：assembly, x86-16

我有一个如下的汇编程序。

```
;=======================
.MODEL SMALL
.STACK 100h

putchar MACRO char
    label:
    mov dl, char
    mov ah, 2
    int 21h
ENDM
.CODE
    MAIN Proc
         putchar  'A'
         putchar  'S'
         putchar  'M'
         mov ah, 4ch
         int 21h
    MAIN ENDP 
```

我的程序无法编译。

P/S：不能修改`putchar`宏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-27T21:00:39.070

你不能在宏中使用这样的标签你需要使用本地标签

```
 putchar MACRO char
    local label
    label:
    mov dl, char
    mov ah, 2
    int 21h
    ENDM 
```

因为它会将宏代码复制到您的代码中，而不是像 proc 那样将您带到另一个 ip 宏只是复制代码，因此您不能两次制作相同的名称标签......它的编译器错误，所以使用本地

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:44:41.760

您的问题可能是`label:`宏中的标签被多次定义（宏的每次扩展）。您需要删除标签（实际上没有理由让它在那里），或者使用本地标签。在此页面上搜索“本地标签”：[http](http://webster.cs.ucr.edu/Page_TechDocs/MASMDoc/ProgrammersGuide/Chap_09.htm) ://webster.cs.ucr.edu/Page_TechDocs/MASMDoc/ProgrammersGuide/Chap_09.htm 。

如果您无法修改`putchar`宏，那么我看不出如何使此代码编译。

# java - GWT/Gin Presenter 实例化

> ID：10127811
> 
> 赞同：4
> 
> 时间：2012-04-12T16:32:45.200
> 
> 标签：java, gwt, gwt-gin, gwt-mvp

我按照[本教程](http://blog.hivedevelopment.co.uk/2009/08/google-web-toolkit-gwt-mvp-example.html)的建议实现了一个 GWT 应用程序。我还下载了示例代码，我注意到演示的每个 Presenter 都需要注入到主 Presenter 构造函数中才能被实例化。作者在源代码中包含了这一点：

```
public class GreetingPresenter extends WidgetPresenter<GreetingPresenter.Display> {

    // FUDGE FACTOR!  Although this is not used, having GIN pass the object
    // to this class will force its instantiation and therefore will make the
    // response presenter listen for events (via bind()).  This is not a very good way to
    // achieve this, but I wanted to put something together quickly - sorry!
    private final GreetingResponsePresenter greetingResponsePresenter;

    @Inject
    public GreetingPresenter(final Display display, final EventBus eventBus, final DispatchAsync dispatcher, final GreetingResponsePresenter greetingResponsePresenter) {
            super(display, eventBus);       
            this.dispatcher = dispatcher;       
            this.greetingResponsePresenter = greetingResponsePresenter;     
            bind();
} 
```

我验证了如果没有在 GreetingPresenter 中注入任何 Presenter，它将不会被实例化。出于演示目的，这很酷，因为整个应用程序只有两个 Presenter，但在真实世界的应用程序中，这可能会带来严重的不便。

完成 Presenter 实例化的正确方法是什么？

**编辑：**包括 GIN 相关类以供参考：

**演讲者模块：**

```
public class GreetingClientModule extends AbstractPresenterModule {

    @Override
    protected void configure() {        
        bind(EventBus.class).to(DefaultEventBus.class).in(Singleton.class);
        bind(PlaceManager.class).in(Singleton.class);       
        bindPresenter(GreetingPresenter.class, GreetingPresenter.Display.class, GreetingView.class);
        bindPresenter(GreetingResponsePresenter.class, GreetingResponsePresenter.Display.class, GreetingResponseView.class);        
        bind(AppPresenter.class).in(Singleton.class);
        bind(CachingDispatchAsync.class);
    }
} 
```

**注射器：**

```
@GinModules({ ClientDispatchModule.class, GreetingClientModule.class })
public interface GreetingGinjector extends Ginjector {

    AppPresenter getAppPresenter();
    PlaceManager getPlaceManager();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:08:47.110

您可以使用 Providers 来解决这个问题。在我的 Gin Modules 中，我声明了我的 Presenter/Activity 以及它的视图，如下所示

```
 // Content Area
    bind(ContentActivityMapper.class).in(Singleton.class);

    // Intro Page
    bind(IntroPageActivity.class);
    bind(IntroPageView.class).to(IntroPageViewImpl.class).in(Singleton.class); 
```

然后在 Activity Mapper 我使用这样的提供者

```
public class ContentActivityMapper implements ActivityMapper {

    @Inject Provider<IntroPageActivity> introPageProvider;

    public Activity getActivity(Place place) {

        if (place instanceof DefaultPlace) {
        return introPageProvider.get().withPlace(new IntroPagePlace());
        }... 
```

我在 ActivityPresenter 上设置了 withPlace 方法，以允许在没有参数的情况下注入它。该代码看起来像这样。

```
public class IntroPageActivity extends AbstractActivity {

    private IntroPageView view;

    @Inject
    public IntroPageActivity(IntroPageView view) {
        super();
        this.view = view;
    }

    public IntroPageActivity withPlace(IntroPagePlace place) {
        return this;
    }

    @Override
    public void start(AcceptsOneWidget containerWidget, EventBus eventBus) {
        containerWidget.setWidget(view.asWidget());
    }... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:33:21.430

我认为您缺少 Ginjector 和 AbstractGinModule 定义，您在其中定义了该示例中的 GIN 绑定。
我建议从提到的教程下载[代码](http://static1.hivedevelopment.co.uk/blog/gwt-best-practise-mvp-di-command/GreetMvp.zip)，并查看 GIN 入门[wiki](http://code.google.com/p/google-gin/wiki/GinTutorial)。

**GreetingGinjector** :

```
@GinModules({ ClientDispatchModule.class, GreetingClientModule.class })
public interface GreetingGinjector extends Ginjector {

    AppPresenter getAppPresenter();

    PlaceManager getPlaceManager();

} 
```

**问候客户端模块**：

```
public class GreetingClientModule extends AbstractPresenterModule {

    @Override
    protected void configure() {        
        bind(EventBus.class).to(DefaultEventBus.class).in(Singleton.class);
        bind(PlaceManager.class).in(Singleton.class);

        bindPresenter(GreetingPresenter.class, GreetingPresenter.Display.class, GreetingView.class);
        bindPresenter(GreetingResponsePresenter.class, GreetingResponsePresenter.Display.class, GreetingResponseView.class);

        bind(AppPresenter.class).in(Singleton.class);
        bind(CachingDispatchAsync.class);
    }
} 
```

**入口点**：

```
public class GreetMvp implements EntryPoint {
    private final GreetingGinjector injector = GWT.create(GreetingGinjector.class);

    public void onModuleLoad() {
        final AppPresenter appPresenter = injector.getAppPresenter();
        appPresenter.go(RootPanel.get());

        injector.getPlaceManager().fireCurrentPlace();
    }
} 
```

# c# - 一个 mysql 连接可用于 C# 中的所有表单

> ID：10127813
> 
> 赞同：1
> 
> 时间：2012-04-12T16:32:46.027
> 
> 标签：c#, mysql, visual-studio

我使用 C# 在 Visual Studio 中作为 Windows 窗体应用程序启动一个新项目。项目有登录表单、主表单和其他不太重要的表单。他们都使用与mysql的连接。我应该在哪里放置负责与 mysql 服务器连接的代码，以便能够以任何形式使用它？我不想在每一种形式中都创建一个新的连接。有什么提示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T16:34:37.333

> 我不想在每一种形式中都创建一个新的连接。

好吧，我不希望 UI 类首先直接访问数据库......但是每次与数据库交互时都*应该*`using`创建一个新连接，并在操作后关闭它（可能使用语句） . 让连接池处理*真正的*底层网络连接。

编辑：有关更多信息，请参阅[MySQL 连接池](http://dev.mysql.com/doc/refman/5.6/en/connector-net-programming-connection-pooling.html)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:51:17.697

我建议您创建一个类（称为 DataAccess），其中包含您所有的数据库访问代码。然后，您可以在表单的代码中引用此类的命名空间并调用适当的方法来执行 CRUD 操作。

# objective-c - 将 NSString 存储到 NSArray

> ID：10127817
> 
> 赞同：-1
> 
> 时间：2012-04-12T16:32:52.810
> 
> 标签：objective-c, ios, arrays, string, cocoa-touch

我想我完全明白了。也许有人可以告诉我出了什么问题。

`NSString:`

```
Patrick\nNice picture!\nAndy\nI like it\nTim\nMe too\n 
```

我想将此字符串存储为`NSArray`类似：

```
- NSArray
    - NSDictionary
           - name (e.g. Andy)
           - kommentar (e.g. I like it) 
```

这在某种程度上是一个逻辑错误，但它让我发疯......（代码正在工作但没有做正确的事情。）

我的代码：

```
for (int i = 0; i <= ([[aStr componentsSeparatedByString:@"\n"] count] - 1 / 2); i++) {
    NSMutableDictionary * comment = [[NSMutableDictionary alloc] init];
    if (i % 2 == 0) {
        [comment setValue:[[aStr componentsSeparatedByString:@"\n"] objectAtIndex:i] forKey:@"name"];
        [comment setValue:[[aStr componentsSeparatedByString:@"\n"] objectAtIndex:i] forKey:@"kommentar"];
    }
    [commentsArray addObject:comment];
    //NSLog(@"%@", [comment description]);
    //NSLog(@"Bla.");
    //comment = nil;
}

for (int a = 0; a <= [commentsArray count] - 1; a++) {
    NSLog(@"Name: %@ Nachricht: %@", [[commentsArray objectAtIndex:a] valueForKey:@"name"], [[commentsArray objectAtIndex:a] valueForKey:@"kommentar"]);
} 
```

我得到：

```
Name: Patrick Nachricht: Patrick
Name: (null) Nachricht: (null)
Name: Andy Nachricht: Andy
Name: (null) Nachricht: (null)
Name: Tim Nachricht: Tim
Name: (null) Nachricht: (null)
Name:  Nachricht: //that's because of the last \n
Name: (null) Nachricht: (null) 
```

我也试过

```
[comment setValue:[[aStr componentsSeparatedByString:@"\n"] objectAtIndex:i + 1] forKey:@"kommentar"]; 
```

...但这给了我`out of bounds`- 错误，这很清楚。

**解决方案：**

```
 for (int i = 0; i <= ([[aStr componentsSeparatedByString:@"\n"] count] - 1); i++) {
    NSMutableDictionary * comment = [[NSMutableDictionary alloc] init];
    if (i % 2 != 0) {
        [comment setValue:[[aStr componentsSeparatedByString:@"\n"] objectAtIndex:i - 1] forKey:@"name"];
        [comment setValue:[[aStr componentsSeparatedByString:@"\n"] objectAtIndex:i] forKey:@"kommentar"];
    }
    [commentsArray addObject:comment];
}

for (int a = 0; a <= [commentsArray count] - 1; a++) {
    NSLog(@"Name: %@ Nachricht: %@", [[commentsArray objectAtIndex:a] valueForKey:@"name"], [[commentsArray objectAtIndex:a] valueForKey:@"kommentar"]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:01:57.493

您确实需要更好地解释，但快速查看您的代码我会提出疑问。

1）。为什么你只循环一半数组？(count - 1)/2 在您给出的示例中，您只会阅读前两项。编辑 - 实际上用你的语法它会 1 / 2 然后 - 1...所以...

2）。即使不满足您对 i%2 = 0 的要求，为什么还要实例化您的评论对象并将其添加到您的数组中。

在我看来（一目了然）上面的示例将导致一个数组，其中数组中的每个 seconf 对象都是空的。将您的 add 放入 if 语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:32:48.583

```
for (int i = 0; i <= ([[aStr componentsSeparatedByString:@"\n"] count] - 1); i++) {
NSMutableDictionary * comment = [[NSMutableDictionary alloc] init];
if (i % 2 != 0) {
    [comment setValue:[[aStr componentsSeparatedByString:@"\n"] objectAtIndex:i - 1] forKey:@"name"];
    [comment setValue:[[aStr componentsSeparatedByString:@"\n"] objectAtIndex:i] forKey:@"kommentar"];
}
[commentsArray addObject:comment];
}

for (int a = 0; a <= [commentsArray count] - 1; a++) {
NSLog(@"Name: %@ Nachricht: %@", [[commentsArray objectAtIndex:a] valueForKey:@"name"], [[commentsArray objectAtIndex:a] valueForKey:@"kommentar"]);
} 
```

# git - ssh_exchange_identification：Git bash 下远程主机关闭连接

> ID：10127818
> 
> 赞同：58
> 
> 时间：2012-04-12T16:32:53.963
> 
> 标签：git, ssh

我在win7工作并使用sshd设置git服务器。I `git --bare init myapp.git`，并正确克隆`ssh://git@localhost/home/git/myapp.git`到**Cywgin**中。但是我又需要配置**Cygwin**的 git ，我想在**Git Bash**中进行 git clone 。我运行`git clone ssh://git@localhost/home/git/myapp.git`并收到以下消息

```
ssh_exchange_identification: Connection closed by remote host 
```

然后我`ssh -vvv git@localhost`在**Git Bash**中运行并收到消息

```
debug2: ssh_connect: needpriv 0
debug1: Connecting to localhost [127.0.0.1] port 22.
debug1: Connection established.
debug1: identity file /c/Users/MoreFreeze/.ssh/identity type -1
debug3: Not a RSA1 key file /c/Users/MoreFreeze/.ssh/id_rsa.
debug2: key_type_from_name: unknown key type '-----BEGIN'
debug3: key_read: missing keytype
debug3: key_read: missing whitespace 
// above it repeats 24 times
debug2: key_type_from_name: unknown key type '-----END'
debug3: key_read: missing keytype
debug1: identity file /c/Users/MoreFreeze/.ssh/id_rsa type 1
debug1: identity file /c/Users/MoreFreeze/.ssh/id_dsa type -1
ssh_exchange_identification: Connection closed by remote host 
```

看来我的私钥格式错误？`BEGIN`而且我发现没有and的私钥中正好有 25 行`END`。我很困惑为什么它说不是 RSA1 密钥，我完全确保它是 RSA 2 密钥。

欢迎任何建议。顺便说一句，我已经阅读了谷歌关于这个问题的前 3 页。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-19T21:36:51.297

我今天遇到了这个问题，我意识到我连接到了 2 个不同的网络（LAN 和 WLAN），我解决了这个问题，只是从我的以太网适配器上断开了电缆。我想这个问题是因为 ssh 密钥与我的无线适配器的 MAC 地址绑定的。我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-04T21:56:12.960

我今天刚刚遇到这个问题，这是因为我试图连接的服务器处理过多。因此，服务器可能内存不足或 CPU 不足。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-08-12T12:09:21.610

只需在服务器端输入：

```
echo 'SSHD: ALL' >> /etc/hosts.allow 
```

它为我整理好了。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-02-21T05:10:42.810

**在linux**中点击以下`ssh restart`命令

 **```
prayag@prayag:~/backup/NoisyNeighbour$ service ssh restart 
stop: Rejected send message, 1 matched rules; type="method_call", sender=":1.75" (uid=1417676764 pid=5933 comm="stop ssh ") interface="com.ubuntu.Upstart0_6.Job" member="Stop" error name="(unset)" requested_reply="0" destination="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init")
start: Rejected send message, 1 matched rules; type="method_call", sender=":1.76" (uid=1417676764 pid=5930 comm="start ssh ") interface="com.ubuntu.Upstart0_6.Job" member="Start" error name="(unset)" requested_reply="0" destination="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init") 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2020-04-02T14:43:39.167

要解决问题，请在上添加 Git 的主机名`~/.ssh/config`，

```
Host github.com
 Hostname ssh.github.com
 Port 443 
```

在我的情况下，github！

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-04-05T18:33:28.280

确保您没有连接到任何类型的 VPN。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-07-13T15:21:08.880

得到同样的错误信息。关闭 WiFi 并重新打开它对我有用。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-04-08T05:14:09.050

删除/删除后`rm ~/.ssh/known_hosts`，我的问题得到了解决

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-07-17T13:35:38.417

如果主机名不起作用，请尝试 IP 地址。

这正在发生，所以我不得不说。我尝试使用我的主机名 ssh，但它不起作用

```
ssh root@host.example.net 
```

这给出了错误“ssh_exchange_identification：连接被远程主机关闭”

这曾经工作一小时。

但是，这是有趣的部分，IP 地址有效！

```
ssh root@192.168.0.100 
```

（当然实际IP地址不同）

去搞清楚！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-05-31T06:56:25.200

我在将 /etc/ssh/sshd_config 中的 ssh 端口和 MaxStartups 变量更改为后解决了这个问题，

```
port 2244
MaxStartups 100 
```

然后，重启服务

```
service sshd restart 
```

如果仍然无法正常工作，请重新启动系统。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-01-15T16:54:19.567

嗨，我在一个 vps 服务上修复了这个问题，重新启动它，另一种方法是，如果您有来自服务的控制台或任何其他方式在远程机器上运行命令，您必须运行的唯一命令是重新启动 ssh 守护程序并享受！:P

```
/etc/init.d/ssh restart 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-07-06T17:31:40.827

我们今天早上将我们的 git 主机实例/服务器迁移到了一个新的数据中心，并且在连接到两者时：VPN（来自远程/家庭）或在办公室网络中时，我遇到了同样的错误并且无法连接以克隆任何 GIT回购。

```
Cloning into 'some_repo_in_git_dev'...
ssh_exchange_identification: Connection closed by remote host
fatal: Could not read from remote repository. 
```

如果您通过跳转主机服务器连接到部分或所有服务器，这将有所帮助。

在我的**~/.ssh/config 文件**中，我的连接设置是：

```
Host * !ssh.somejumphost.my.company.com
     ProxyCommand ssh -q -W %h:%p ssh.somejumphost.my.company.com 
```

这意味着，对于任何基于 SSH 的连接，它将通过给定的跳转主机服务器连接到任何*****服务器，**除了/忽略**“ssh.somejumphost.my.company.com”服务器（因为我们不想连接到通过跳转主机服务器的跳转主机。

为了解决这个问题，我所做的只是将配置更改为也忽略 git 服务器：

```
Host * !ssh.somejumphost.my.company.com !mycompany-git.server.com !OrMyCompany-some-other-git-instance.server.com
     ProxyCommand ssh -q -W %h:%p ssh.somejumphost.my.company.com 
```

所以，现在要在执行 git clone（git SSH url）时连接到 mycompany-git.server.com，我告诉 SSH 不要为这两个额外的 git 实例/服务器使用跳转主机。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-12-28T10:04:46.307

与 Arun Sangal 类似，问题出在 .ssh/config 条目中

```
Host my.sshhost.com
  ProxyCommand ssh -q -W %h:%p myremotemachine.my.company.com 
```

添加了远程机器以避免使用 ssh 进行 VPN 连接并且运行良好。但是在假期期间，我关闭了 myremotemachine 并遇到了所描述的问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-09-05T05:27:52.980

我今天经历了这一点，我只是做了一个：

```
12345@123456 MINGW64 ~/development/workspace/test (develop)
$ git status
Refresh index: 100% (1204/1204), done.
On branch develop
Your branch is up to date with 'origin/develop'.

nothing to commit, working tree clean

12345@123456 MINGW64 ~/development/workspace/test (develop)
$ git fetch 
```

然后一切又开始了。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-04-11T17:48:48.363

要解决此问题，请编辑 /etc/ssh/ssh_config 并注释以下第 1 行

# 代理命令 /usr/bin/sss_ssh_knownhostsproxy -p %p %h

[https://www.evilbox.ro/linux/solve-ssh_exchange_identification-connection-closed-by-remote-host/](https://www.evilbox.ro/linux/solve-ssh_exchange_identification-connection-closed-by-remote-host/)供参考

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-10-15T16:20:34.777

删除任何配置`~/.ssh/config`或其他 ssh 配置位置，这将不允许它访问 Github 服务器

在我的情况下，它低于配置，并且我没有连接到 VPN。

```
Host *
  ProxyJump 10.0.0.50 
```

注意：- 如果我连接到 VPN，此配置将意味着 git clone 或任何 git 操作将通过 VPN 发送，这可能会很慢，具体取决于我们使用的 VPN 类型。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-11-02T10:15:58.697

断开并重新连接到当前网络对我有用。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-05-08T09:35:16.153

今天 Gitlab Server 正在维护中。[请稍后检查](https://gitlab.com/)它是否正常工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-04-20T15:35:49.560

当我从一个工作场所移动到另一个工作场所时，使用 ssh 连接到 GitHub 时也遇到了同样的错误。根据我的情况，似乎不同网络的dns服务器可能会获得github的各种ip地址，并且在发生更改时known_hosts文件无法识别它。所以更改dns或切换回原始网络可能会起作用。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-01-21T05:39:07.577

`sshd`如果您的服务无法运行，您可以获得“ssh_exchange_identification：远程主机关闭连接” ！

如果您有权访问服务器，请检查您是否`sshd`正在运行该服务：

```
 ps aux | grep ssh 
```

并检查它是否正在侦听端口 22：

```
 netstat -plant | grep :22 
```

[更多细节在这里](http://www.ewhathow.com/2013/09/how-to-check-if-ssh-is-running-on-linux/)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-02-05T00:04:38.893

对我来说，这是由并发 ssh 会话数的限制引起的。我将下面的两个参数添加到 /etc/ssh/sshd_config 然后一切正常。

```
echo 'MaxSessions 2000' >> /etc/ssh/sshd_config
echo 'MaxStartups 2000' >> /etc/ssh/sshd_config
service ssh restart 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-07-09T07:26:32.853

简单的服务器重启为我解决了这个问题。尝试硬重启，如果软重启后不起作用。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-02-24T14:24:00.697

请使用端口 7999 并尝试。它会起作用的

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-08-29T17:08:41.430

我是这样解决的。

`ssh -vvv <username>@github.com`查看github IP。

然后打开浏览器，通过IP打开github，发现是防火墙的问题。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-09-25T13:16:19.457

对我来说，问题是在 /etc/ssh/ssh_config 中设置了一个代理并且它已关闭，通过将远程 git IP 列入白名单并删除代理行来解决问题。

希望这可以帮助某人。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-02-20T04:30:29.680

在 Windows 机器中，删除 C:\Users{yourusername}.ssh 中存在的配置文件的内容

这对我来说效果很好。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-03-26T13:58:27.750

如果您使用的是 VPN，请将其关闭并再次尝试推送。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-10-19T10:49:40.310

就我而言，我正在开发一个用于设置 Raspberry Pies 的脚本。我忘了添加启用 ssh 的脚本。**

# symfony1 - symfony 1.4：如何知道模型的列是否是外键？

> ID：10127825
> 
> 赞同：0
> 
> 时间：2012-04-12T16:33:10.983
> 
> 标签：symfony1, symfony-1.4

我希望下面这样的事情有效，但`getColumns()`不返回`sfDoctrineColumn`对象..

```
$beautyPropertiesTable = Doctrine::getTable('BeautyProperty');
$beautyPropertiesTable->getColumns(); 
```

你知道，`sfDoctrineColumn`有一个方法被调用`isForeignKey()`，但我不知道我可以从哪里得到一个`sfDoctrineColumn`对象..

任何的想法？

哈维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:41:45.643

试试这个：

```
// Example taken from lib/plugins/sfDoctrinePlugin/test/unit/sfDoctrineColumnTest.php

$column = new sfDoctrineColumn('column_name', Doctrine::getTable('BeautyProperty')); 

var_dump($column->isPrimaryKey()); 
```

# silverlight - 动态行背景数据网格 Silverlight

> ID：10127826
> 
> 赞同：2
> 
> 时间：2012-04-12T16:33:11.513
> 
> 标签：silverlight, datagrid, background-color

我有一个绑定到 ItemsSource 的 DataGrid 控件。我的 ItemsSource 是一个 ObservableCollection 并且我总是插入我订购的物品。我需要根据 DataGrid 上的值及其索引来设置 DataGrid 每一行的背景。你知道有什么办法吗？注意： ObservableCollection 将由另一个线程更新，所以当它更新时，我必须更新网格的背景颜色。

我见过一些人使用转换器做类似的事情，但我所有的业务逻辑都在 ViewModel 中，我需要从中获取值以发现哪种颜色将成为背景。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:21:29.923

您可以将 LoadingRow 事件处理程序添加到 DataGrid，然后在其各自项目的视图模型属性上设置到每行的 Background 属性的绑定：

XAML 数据网格：

```
<data:DataGrid ItemsSource="{Binding FooBars}" LoadingRow="dataGrid_LoadingRow" >
    <data:DataGrid.Columns>
        <data:DataGridTextColumn Header="FOO" Binding="{Binding Foo}" Width="200" />
        <data:DataGridTextColumn Header="BAR" Binding="{Binding Bar}" Width="60"/>
    </data:DataGrid.Columns>
</data:DataGrid> 
```

代码隐藏：

```
private void packetsDataGrid_LoadingRow(object sender, DataGridRowEventArgs e)
{
    Binding backgroundBinding = new Binding("FooBarItemBackground");
    backgroundBinding.Source = e.Row.DataContext;
    e.Row.SetBinding(DataGridRow.BackgroundProperty, backgroundBinding);
} 
```

# css - CSS 最佳实践 - 调色板

> ID：10127827
> 
> 赞同：1
> 
> 时间：2012-04-12T16:33:15.163
> 
> 标签：css, colors

我是 Web 开发的新手，我一直在根据需要使用样式表。我的问题是，对于一个网站，我们有一组特定的颜色可用于保持一致性。我不太了解十六进制值，无法看到它们，并且立即知道它是红色（或它的味道）、绿色、蓝色等。

在给定站点的顶部有一个“颜色参考”的评论是否有意义？

例子：

```
/*
 [Site Name] Color Standards
 Red:   Specific #hexvalue for shade of red being used.
 White: #FFF or #FFFFFF
 Black: #000 or #000000
 Yellow: Specific #hexvalue for shade of yellow being used.
 and so on...
*/ 
```

我没有在网络或其他任何地方的任何样式表示例中看到这一点。作为一个不在“按需”基础上使用样式表的人，我认为这将是一个很好的标准。（我肯定会继续使用它。）我会理解为什么经常与他们合作的人会发现这无用并且不会这样做。

编辑：回应评论：我（很差）选择在其中使用黑白作为示例的一部分，但我得到的是为什么不作为标准来完成。设计文档可能并不总是可用（但我同意它应该）。我在开始进行 Web 开发（这对我来说是新的）之后写了这篇文章，我只是认为这样的事情是有意义的，这样*任何人都*可以进入样式表，知道使用什么颜色来保持网站上的颜色一致。如果完成了这样的事情，就不需要依赖额外的资源：原始设计师（可能已经离开）、设计文档（可能有也可能没有）或办公室中的任何其他人/在团队。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:35:26.653

对于这个或是和否的答案没有标准，所以如果你发现在评论中将十六进制引用保留在样式表的顶部会有所帮助，那就去吧。你不会因此受到惩罚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:38:18.897

我认为这是一个好主意，并且在 LESS 中实现，你应该看看。

# maven - 从 Maven 原型生成模块时访问父属性

> ID：10127828
> 
> 赞同：3
> 
> 时间：2012-04-12T16:33:17.060
> 
> 标签：maven

我有许多用于生成多模块 maven 项目的 maven 原型。

我在用于生成父项目的原型上有一个必需的属性。这被添加为项目的 pom.xml 中的属性。

然后我在项目中生成一个模块，使用不同的原型。我希望在该模块的某些资源中替换相同的值。

在调用第二个原型时再次将其作为属性提供似乎是错误的。

是否可以在模块的原型生成过程中引用父项目属性？我希望将值替换到模块的 src 树中的文件中，而不是使用占位符，以便在目标文件夹中替换它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T12:58:36.820

在 Maven 3 中，您可以通过`${project.parent.x}`.

更多信息可以在[Maven 属性指南](http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)中找到。

# java - JPA 默认获取类型

> ID：10127831
> 
> 赞同：20
> 
> 时间：2012-04-12T16:33:31.873
> 
> 标签：java, hibernate, jpa, fetch

根据我的理解`@OneToOne`和`@ManyToOne`JPA 注释进行`eager`提取。我希望这些延迟加载到我的应用程序中，或者至少暗示它（这是休眠默认的）。我已经开始添加注释`fetch = FetchType.LAZY`

例如

```
@ManyToOne(optional = false, fetch = FetchType.LAZY) 
```

代替

```
@ManyToOne(optional = false) 
```

这既乏味又容易出错。有没有办法在应用程序级别做到这一点？也许在persistence.xml 中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T14:34:46.233

迄今为止，我选择让 Hibernate 在通过注释映射方面遵循 JPA 规范，仅仅是因为我没有收到任何使其可配置的功能请求，这让 TBH 感到惊讶。正如您所指出的，从 Hibernate 3.0 开始，您想要的是使用`hbm.xml`映射文件时的默认设置。

正如另一个答案所建议的那样，通过配置允许这样做*不会*违反规范。

长话短说，不，今天不可能。如果您希望看到它是可配置的，请创建一个功能请求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T21:36:21.940

JPA 规范假定通常大多数应用程序默认情况下需要单例关系是急切的，而默认情况下多值关系是惰性的。至少根据我自己的经验，这通常是所需的架构。这是有道理的，因为单例关系在 JPA 层和 DB 层中不需要显着的额外性能就可以在外键上创建单例连接。然而，与此相反，多值属性创建 N + 1 问题或大型笛卡尔结果集，当使用连接提取时，随着集合中元素的数量和连接数量的增加，这些结果集会呈指数膨胀（尽管 Hibernate 特别无法处理2+ 急切的联想）。

话虽如此，至于您的建议，您需要解决一个特定的（老实说并非完全不常见的）案例。现在你有一个案例，但有数百个这样的案例。因此，要编写规范，您需要在泛化和粒度之间划清界限。

如果我站在你的立场上，如果你认为这是一个绝对有用的特性，可以添加到 JPA 规范中，我会将它提交给 JCP。另一方面，如果您在特定实现中解决了这个（、那个和那个......），那么您最终会陷入所谓的供应商锁定。所以我会额外工作一个小时来设置 @ManyToOne @OneToOne 属性的延迟获取并保持无供应商，因此如果说一个新的 JPA 实现比 Hibernate 快 15 倍以上（或任何你想要的实现），请坚持规范使用），将您的项目迁移到新的 JPA 实现几乎不需要任何努力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T13:09:48.980

没门。JPA 规范中没有关于更改全局获取策略的内容。JPA 为 1-1/N-1 关联提供 EAGER 获取，而对于 1-N/MN，它是 LAZY。所有 JPA 实现都应遵循规范以符合要求。我认为，应用程序开发人员最好不能全局更改此默认行为，因为这些是几乎大多数情况下的最佳实践，除非您在所有实体之间只有一种类型的关联，例如 1-1。想一想，您可以在应用程序中将其设置为“EAGER”，该应用程序包含一个非常丰富的实体模型，具有复杂的关系和数百万数据库中的数据。手动覆盖每个关联的获取策略允许开发人员对接下来会发生什么负责。它不容易出错，而是一个强大的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T12:18:35.240

> 据我了解，@oneToOne 和 @ManyToOne JPA 注释做了一个急切的 fectch。

如果注释或持久性 XML 中没有另外声明，JPA 保证对单值关系进行预加载。对于集合值关系，它默认为延迟加载，但延迟加载（只是）对支持 JPA 的持久性提供程序的提示，因此您不能依赖它，并且必须检查特定提供程序（例如 Hibernate、OpenJPA）。请参阅[此链接](http://blog.xebia.com/2009/04/27/jpa-implementation-patterns-lazy-loading/)作为参考，并了解更多信息。

# jquery - 如何使用 jQuery 更改 ul 中活动链接的颜色？

> ID：10127832
> 
> 赞同：0
> 
> 时间：2012-04-12T16:33:32.077
> 
> 标签：jquery, css, html-lists

我正在尝试更改活动 li 项目的字体颜色。根据本网站上的其他帖子，我已经尝试过：

```
$("li").click(function() {
$("li").removeClass("active");
$(this).addClass("active");    ​ 
```

我有这个 -[活动链接](http://jsfiddle.net/phUhb/5/)- 在 jsfiddle 上。

其他元素属性会发生变化，但颜色不会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:38:16.223

你的 CSS 应该是：

```
.active a { ... } 
```

不仅仅是 .active 像这样：http: [//jsfiddle.net/phUhb/19/](http://jsfiddle.net/phUhb/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T22:23:50.347

它不起作用，因为您网站中的整个代码是：

```
$(document).ready(function(){
$("li").click(function() {
    $("li").removeClass("actives");
    $(this).addClass("actives");
});
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-11T07:05:33.383

```
$(document).ready(function ($) {
      debugger;
      var path = window.location.pathname.split("/").pop();
      if (path == '')
           path = "page1.aspx";
      var target = $('.ul a[href,"' + path + '"]');
      target = $(this).a(active);
 }); 
```

这是正确的吗？

# macos - 在 OS X 上安装 spim 时遇到问题

> ID：10127843
> 
> 赞同：1
> 
> 时间：2012-04-12T16:34:08.113
> 
> 标签：macos, assembly, terminal, spim

我正在尝试在 OS X 终端中运行 spim。我可以使用 QTSimp，但`spim`终端中的命令尚不存在。当谈到终端（刚从 Windows 切换）时，我有点新手，所以也许这真的很明显。

首先，我只是导航到 spim 文件夹并输入`make`.

```
Lasker:spim orthogonal$ make
./Configure
cc
Check if this machine is big-endian or little-endian.
This may take a few minutes.
I believe this is a little-endian machine.
Looks like a Mac OS X / OpenStep universe exists...
Scanning libc.dylib

Checking if libc on this machine contains:
  vsprintf: No, I don't think
    _doprnt: NO, THIS IS A PROBLEM: NO VSPRINTF AND NO _DOPRNT
SPIM WILL NOT RUN PROPERLY
  vfprintf: No, I don't think
    _doprnt: NO, THIS IS A PROBLEM: NO VFPRINTF AND NO _DOPRNT
SPIM WILL NOT RUN PROPERLY
  strtoul: No, I don't think
  strtol: No, I don't think
  memcpy: No, I don't think

Checking for /usr/include/termios.h
Yes, it is there
make -f Makefile spim2
bison -d --file-prefix=y ../CPU/parser.y
../CPU/parser.y: conflicts: 25 shift/reduce
gcc -I. -I../CPU `cat configuration` -DTEXT_SIZE=65536 -DDATA_SIZE=131072 -DK_TEXT_SIZE=65536 -DDEFAULT_EXCEPTION_HANDLER="\"/usr/local/lib/spim/exceptions.s\"" -DSPIM_VERSION="\"`cat ../VERSION`\"" -g -Wall   -c -o spim-utils.o ../CPU/spim-utils.c
In file included from ../CPU/spim-utils.c:39:
../CPU/spim.h:71:1: warning: "memcpy" redefined
In file included from /usr/include/string.h:190,
                 from ../CPU/spim-utils.c:36:
/usr/include/secure/_string.h:53:1: warning: this is the location of the previous definition
../CPU/spim-utils.c:501: error: expected ‘)’ before numeric constant
../CPU/spim-utils.c:504: error: expected identifier or ‘(’ before ‘{’ token
../CPU/spim-utils.c:520: error: conflicting types for ‘strtol’
/usr/include/stdlib.h:181: error: previous declaration of ‘strtol’ was here
make[1]: *** [spim-utils.o] Error 1
make: *** [spim] Error 2 
```

我回去再次阅读[安装指南](http://pages.cs.wisc.edu/~larus/SPIM/spim.html)，它说尝试`make install`：

```
Lasker:spim orthogonal$ make install
make -f Makefile spim2
gcc -I. -I../CPU `cat configuration` -DTEXT_SIZE=65536 -DDATA_SIZE=131072 -DK_TEXT_SIZE=65536 -DDEFAULT_EXCEPTION_HANDLER="\"/usr/local/lib/spim/exceptions.s\"" -DSPIM_VERSION="\"`cat ../VERSION`\"" -g -Wall   -c -o spim-utils.o ../CPU/spim-utils.c
In file included from ../CPU/spim-utils.c:39:
../CPU/spim.h:71:1: warning: "memcpy" redefined
In file included from /usr/include/string.h:190,
                 from ../CPU/spim-utils.c:36:
/usr/include/secure/_string.h:53:1: warning: this is the location of the previous definition
../CPU/spim-utils.c:501: error: expected ‘)’ before numeric constant
../CPU/spim-utils.c:504: error: expected identifier or ‘(’ before ‘{’ token
../CPU/spim-utils.c:520: error: conflicting types for ‘strtol’
/usr/include/stdlib.h:181: error: previous declaration of ‘strtol’ was here
make[1]: *** [spim-utils.o] Error 1
make: *** [spim] Error 2 
```

然后我尝试了安装指南中的其他内容，

```
Lasker:spim orthogonal$ make test
make -f Makefile spim2
gcc -I. -I../CPU `cat configuration` -DTEXT_SIZE=65536 -DDATA_SIZE=131072 -DK_TEXT_SIZE=65536 -DDEFAULT_EXCEPTION_HANDLER="\"/usr/local/lib/spim/exceptions.s\"" -DSPIM_VERSION="\"`cat ../VERSION`\"" -g -Wall   -c -o spim-utils.o ../CPU/spim-utils.c
In file included from ../CPU/spim-utils.c:39:
../CPU/spim.h:71:1: warning: "memcpy" redefined
In file included from /usr/include/string.h:190,
                 from ../CPU/spim-utils.c:36:
/usr/include/secure/_string.h:53:1: warning: this is the location of the previous definition
../CPU/spim-utils.c:501: error: expected ‘)’ before numeric constant
../CPU/spim-utils.c:504: error: expected identifier or ‘(’ before ‘{’ token
../CPU/spim-utils.c:520: error: conflicting types for ‘strtol’
/usr/include/stdlib.h:181: error: previous declaration of ‘strtol’ was here
make[1]: *** [spim-utils.o] Error 1
make: *** [spim] Error 2 
```

出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:09:46.730

对于那些试图在 OS X 上使用 spim 8.0 进行编译的人，我推荐这个过程：

```
$ tar xvf spim-8.0.tar.gz
$ cd spim-8.0/spim
$ ./Configure
$ cat > configuration
-DLITTLEENDIAN
-DUSE_TERMIOS
-U_POSIX_SOURCE
^D
$ make install 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-01T02:54:54.283

您可以`spim`通过 Homebrew：

```
brew install spim 
```

# java - Java irc 库

> ID：10127845
> 
> 赞同：4
> 
> 时间：2012-04-12T16:34:19.547
> 
> 标签：java, irc

我正在创建一个 Swing GUI，我想在 JFrame 中包含一个 irc 客户端。所以我正在寻找一个可以轻松设置并放入 JPanel 的库。但我在谷歌上似乎只能找到在您的浏览器中运行的小程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-14T10:47:41.073

有一个IDEA插件。IDEA 是一个纯 Swing 应用程序，所以它可能很接近。

[http://plugins.jetbrains.com/plugin/?id=1175](http://plugins.jetbrains.com/plugin/?id=1175)

除此之外，试试这个列表：

*   **[SilverTrout](http://code.google.com/p/silvertrout/)**有[许多但简单的插件](http://code.google.com/p/silvertrout/source/browse/#git%2Fsource%2Fsilvertrout%2Fplugins%2Fadminboy)。与 PircBot 类似的方法，仅可插拔。
*   **[IRClib](http://sourceforge.net/projects/moepii/)**
*   **[IRC-API](http://code.google.com/p/irc-api/)** - 我没试过。似乎设计得很好，但我还没有找到任何方法。
*   **[PircBot](http://www.jibble.org/pircbot.php)**是最著名的，也可能是最常用的，但存在大量设计误解并使用了几种反模式。仅用于非常简单的机器人。
*   **[PircBot'](https://github.com/davidlazar/PircBot)**是 David Lazar 对 PircBot 的复兴，增加了一些功能，主要是 SSL。
*   **[我的PircBot 1.7](https://github.com/OndraZizka/PircBot)。**成熟的**。我已经部分摆脱了上帝对象反模式并将日志记录更改为 Slf4j / Log4j，以及一些小的添加。
*   **[PircBotX](https://code.google.com/p/pircbotx/wiki/)**是 PircBot 的重新实现。

*   **[JawaBot 2.x](http://code.google.com/p/jawabot/)**是一款具有 IRC 和 Web UI 的可插拔独立应用程序，旨在将多种功能置于一个机器人之下，同时仍保持代码结构合理。**成熟的**.
    目前，插件很少：

    *   Jira - 从 Jira 问题跟踪器中解析名称、状态和受让人。可配置。默认配置支持开源存储库：JBoss、Codehaus、Apache 等。
    *   记录器 - 将 IRC 事件记录到数据库。有一个网络用户界面。
    *   预留 - 用于通过 IRC 预留资源。有一个网络用户界面。
    *   WhereIs - 在所有频道中查找缺口，支持通配符。
    *   Messenger - 将消息传递给连接时离线的用户（“答录机”）。
    *   PasteBin - 让我们用户通过 PM 粘贴文本，保存它，并将指向 Web UI 的链接发布到频道。
    *   AutoOp - 为用户提供操作。
    *   社交 - 对“嗨！”做出反应 等等[Hello World 插件](http://code.google.com/p/jawabot/wiki/HowToWriteIrcPlugin)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T16:36:28.147

我已经成功地使用它来构建 IRC 机器人：[http ://www.jibble.org/pircbot.php](http://www.jibble.org/pircbot.php)

我也有仅用于 IRC 的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T17:13:25.060

我正在制作一个 Android 客户端，所以我需要一个 IRC 库，我不喜欢任何库，所以我制作了自己的库，它叫做**BlueIRC**，它是免费的开源

[链接到 Github](https://github.com/MicroDroid/blueirc/)，查看开发分支，JAR 构建在*构建*文件夹中

# scala - 从本地构建的可变地图返回不可变地图的首选方式是什么？

> ID：10127846
> 
> 赞同：3
> 
> 时间：2012-04-12T16:34:24.120
> 
> 标签：scala, scala-collections

经常，我发现自己实现了从输入源构建地图的方法。在这种情况下，我使用 a `scala.collection.mutable.Map`，假设速度和效率更高；但是，一旦构建了这个集合，我就不再希望它是可变的。

从可变映射返回不可变映射的首选 Scala 方式是什么？通常，我会做一个`myMap.toMap`明显有效但有气味的方法。或者，您可以将返回类型设置为`scala.collection.Map`不需要构建新集合，但似乎会混淆读者。

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T16:35:47.867

最好的方法是打电话`.toMap`。它简短、干净，是一种明确的方式，表示您想将您的收藏转换为`immutable.Map`.

我认为将类型设置为`scala.collection.Map`确实会令人困惑。它也不会保护您免受将类型设置回来的人的伤害。使类型`immutable.Map`清晰且安全。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T16:38:58.610

我不确定你为什么认为`.toMap`气味，但如果你想明确说明`collection.immutable.Map() ++ myMap`应该清楚地记录发生了什么。（不要忘记`()`; 它们不是可选的。）

简单地改变返回类型并不能完全解决不变性问题；变异方法不再可见，但用户可以轻松地回退。不过，这是最高性能的方法，因为没有什么真正改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T05:44:13.520

```
import scala.collection._
import scala.collection.JavaConversions._

val myMap: mutable.Map[K,V] = ???
val unmodifiable: mutable.Map[K,V] =
  java.util.Collections.unmodifiableMap[K,V](myMap)
val newMap = unmodifiable.asInstanceOf[scala.collection.Map[K,V]] 
```

您可以强制`newMap`转换为 a `mutable.Map`，但修改会抛出`UnsupportedOperationException`.

在我的情况下，地图可能足够小，`toMap`可能会更快并且使用更少的内存。

# html - 下拉师

> ID：10127856
> 
> 赞同：-1
> 
> 时间：2012-04-12T16:35:03.823
> 
> 标签：html, css

我试图获得一个部门，当点击它时，它会显示出来并下拉到菜单下方，但是，我无法让它按照我需要的方式下拉。这是我第一次真正玩弄这样的东西，所以我不确定需要做什么。

在一些堆栈用户的帮助下，我让 div 像我想要的那样下拉并显示自己，但问题是我将它设置为绝对位置，而不是将其下方的内容向下推它的空间，它只是出现在菜单下方的任何内容上。（见截图）

这是隐藏的菜单：

![菜单上](../Images/f88974cb30a11720021d72634cbb4763.png)

这是显示的菜单：

![在此处输入图像描述](../Images/ed43d2bae5c285249d0563f97ad2f105.png)

我遇到的另一个问题，我不能 100% 确定解决方法是我使用的是网格系统，并且标题部分为徽标保留了 3 列（左上角模糊）和 9 列保留用于导航菜单。这是一个问题的原因是因为“菜单内容”部分 - 显示的部分 - 位于导航部分（9列）下的列表中。我不确定这是否可能，但我希望它能够跨越下面的全部 12 列（978 像素）。

我知道这可能很难理解，所以我会将我的 css/html 发布在下面的 pastebin 中。

-删除-

这应该是一切。我试图将我的 CSS 减少到标题中使用的分区。提前感谢您的帮助，布赖恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:50:45.233

如果您想使用 slideToggle 功能，您的 div 应该彼此独立，否则将效果应用于一个 div 会转移另一个。

一致的结构是解决问题的关键。

# google-maps - JS 在地图上生成地理编码搜索

> ID：10127857
> 
> 赞同：0
> 
> 时间：2012-04-12T16:35:05.180
> 
> 标签：google-maps, google-maps-api-3

Google 的[简单地理编码示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)看起来很简单，这就是我需要的所有功能。但是，我有多个通过 qTip 工具提示生成的谷歌地图，所以我希望地理编码搜索字段位于每张地图的顶部（而不是它们上方）。查看我当前的**[FIDDLE](http://jsfiddle.net/mykel_suthertun/RWtRe/36/)**。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:50:58.013

在 div 上使用一些适当的 CSS。看这里

[https://files.nyu.edu/hc742/public/googlemaps/geocodesp.html](https://files.nyu.edu/hc742/public/googlemaps/geocodesp.html)

您必须取消选中“SP”才能在我的城市以外工作。

```
 html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
  #menu {
    position: absolute;
    top: 0px;
    left: 0px;
    padding: 0px;
    font-family: Arial, sans-serif;
  }
 ... ... ... 

<div id="map_canvas"></div>
<div id="menu">
  <b>address:</b>
  <input id="text_address" type="text" size="60" onkeyup="checkReturn(event)">
  <input id="check_sp" type="checkbox" checked="checked">SP
  <input type="button" value="clear" onclick="document.getElementById('text_address').value=''; document.getElementById('text_address').focus()">
  <input id="button3" type="button" value="clear markers" onclick="clearMarkers()">

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:05:07.513

解决了。我基本上使用 jQuery 将我的搜索框附加到 qTip 的*容器中*，然后使用 jQuery live() 监听搜索按钮的点击。我懒得创建一个新的小提琴，但这里有一些代码：

在 qTip 的“渲染”事件中：

```
var geocoder;
geocoder = new google.maps.Geocoder();

...

api.map = new google.maps.Map(container[0], myOptions);
$(container).append('<div class="geosearch"><input type="text" class="geosearchinput" value="" /><button type="button" class="geosearchbutton">Search</button></div>');

...

$('button.geosearchbutton').live('click', function() {
    var address = $(this).prev('input.geosearchinput').val();
    geocoder.geocode({ 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);

            ... add marker and handle markers array ...

        } else {
            alert('Geocode was not successful for the following reason: ' + status);
        }
    });
}); 
```

# sql-server-2008 - 行计数与组中的字段相结合

> ID：10127859
> 
> 赞同：0
> 
> 时间：2012-04-12T16:35:07.850
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services

我有一个按名称分组的报告，因此类似于：

```
Justin
    Data 1     Data 2
Bob
    Data 1     Data 2 
```

我想使它具有组中的项目数，例如：

```
Justin (1)
    Data 1     Data 2
Bob (1)
    Data 1     Data 2 
```

所以我尝试这样做：`=Fields!ownerid.Value + " " + Count(Fields!ownerid.Value)`但这只是显示`#Error`以下错误：`Warning 1 [rsRuntimeErrorInExpression] The Value expression for the textrun ‘ownerid.Paragraphs[0].TextRuns[0]’ contains an error: Input string was not in a correct format.`

但我真的不明白为什么这不起作用，有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:23:12.797

看起来好像您需要将数值显式转换为其等效的字符串。尝试将表达式更改为：

```
=Fields!ownerid.Value + " (" + CStr(Count(Fields!ownerid.Value)) + ")" 
```

（请注意，如果`ownerid`也是一个数字 - 而不是名称，如示例中所示 - 那么它也需要转换。）

# mysql - MYSQL 和 Shell 脚本：从表结果中引用单个行属性？

> ID：10127863
> 
> 赞同：2
> 
> 时间：2012-04-12T16:35:24.027
> 
> 标签：mysql, shell

我正在编写一个 shell 脚本，输出选定的 MySql 表数据作为练习。使用我的关键词进行的搜索只会显示如何打印出整个 MySql 表，使用不同的语言和不相关的问题来执行此操作。

我的问题：

1）如果可能，我如何从结果中引用某一行的各个属性（例如在遍历具有 PHP 结果的行时进行迭代）？

2）以下两种方法中的哪一种最适合此目的？两者都不像我现在想要的那样工作。

* * *

```
MYSQL="mysql -u$db_user -p$db_passwd $db_name -Nbe" 
```

一种）

```
RESULT=`$MYSQL "select * from $table_name where can_auto_check='yes';"`
for UNIQUEID in $RESULT
do
    echo "selected: $client $desc "
    someFunction $client $anothervariable
done 
```

二）

```
$MYSQL "select * from $table_name where can_auto_check='yes';" \
| while read client anothervariable;
do
    echo "selected: $client $desc "
    someFunction $client $anothervariable
done 
```

* * *

我的搜索措辞可能不正确；如果是这样的话，如果有人能将我推向正确的方向，我将不胜感激。

谢谢你。

编辑：可能的线索..可能与 awk '{print $1" "$2 }' 有关。但对于每一行。

最终格式 = " mkdir -p /net/$SERVER/$CLIENT/$DESC/someFiles "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:04:22.770

不错，但更少的代码意味着更少的错误机会。不幸的是，我无法测试我的编辑，因为我没有可用的 mySQL。希望你能明白这一点。（或欢迎其他人测试和编辑这篇文章）。

```
# unless you need to use ALL_CLIENTS and DESC_FOR_CLIENT later.
#hidden ALL_CLIENTS=

for CLIENT in $($MYSQL "select distinct client from $table_name where can_auto_check='yes'")
do
    #hidden DESC_FOR_CLIENT=
    for DESC in $($MYSQL  "select desc from $table_name where client='$CLIENT'")
    do
         someFunction $CLIENT $DESC
    done
done 
```

如果 CLIENT 或 DESC_FOR_CLIENT 的任何值在其中包含空格，则需要引用您的使用值，例如`"$CLIENT"`.

另一个注意事项：用于命令替换的反引号至少从 1995 年开始就已被弃用（除非您使用的是原始的 unix bourne shell 或 csh，也许是 ash，以及其他一些更晦涩的 shell）。Bash 和 ksh 不需要。用于`$( .. cmd ...)`您的 cmd 替换。

祝你好运。

# android - 链接到未出现在开发者控制台上的应用统计信息？

> ID：10127864
> 
> 赞同：1
> 
> 时间：2012-04-12T16:35:25.390
> 
> 标签：android, google-play

我的 android 开发者帐户中有 3 个应用程序，2 个免费，1 个付费。我找不到我的付费应用程序的统计链接（下面是活动安装）（其他两个）。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:27:04.190

我发现了问题。如果对于某些应用程序没有活动安装，那么统计按钮就会消失，即使有例如超过 100 次安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:36:25.620

已发布的应用程序统计信息不会立即显示。显示统计信息大约需要 24 小时。至少在我的情况下是这样。

# iphone - 更改 UITabBar 上的图像

> ID：10127869
> 
> 赞同：0
> 
> 时间：2012-04-12T16:35:31.687
> 
> 标签：iphone, ios, cocoa-touch, uitabbar

在 iOS 开发方面，我是一个完整的初学者。我最近下载了一个模板应用程序，所以我可以学习基础知识。我想弄清楚如何更改底部 UI 栏上的照片/图像。我做了这么多的研究无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:49:49.190

[在这里](https://stackoverflow.com/questions/2645666/share-background-view-between-tabs-on-a-uitabbarcontroller)您可以找到答案，UITabBar 中的一个类别，它允许您以编程方式设置背景图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:58:39.680

在 iOS 5 中，UITabBar（和许多其他 UIKit 控件）遵循标准程序来自定义其外观。这是一个关于它如何工作的很好的教程：

[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# c# - 如何将图像像素的值作为 RGB 读取到二维数组中？

> ID：10127871
> 
> 赞同：32
> 
> 时间：2012-04-12T16:35:47.830
> 
> 标签：c#, image, bitmap, rgb

我正在为我的方形瓷砖平台游戏制作一个 2d 地图编辑器，当我意识到我真的可以使用图像编辑器来重新绘制相邻像素等等，所以我想我应该尝试通过一个应用程序来读取绘制的关卡然后将其转换为轻量级格式。

我不确定是否必须使用位图格式，但我想，读取特定像素会比使用 PNG 更容易。

所以我的目标是打开一个图像，遍历每个像素，寻找适合我的平铺方案的颜色，并将相应的平铺放入块数组中。

*注意：我已经有了我的轻量级格式，所以我只需要将像素值读入数组。*

* * *

**解决方案：** 我的草图如下所示：

```
var myBitmap = new Bitmap(@"input.png");  

for (int x = 0; x < myBitmap.Width; x++)
    for (int y = 0; y < myBitmap.Height; y++)
    {                    
        Color pixelColor = myBitmap.GetPixel(x, y);
        // things we do with pixelColor
    } 
```

* * *

示例 2：

```
var myBitmap = new Bitmap(@"input.png");

for (int x = 0; x < myBitmap.Width; x++)
{
    for (int y = 0; y < myBitmap.Height; y++)
    {
        // Get the color of a pixel within myBitmap.
        Color pixelColor = myBitmap.GetPixel(x, y);
        string pixelColorStringValue =
            pixelColor.R.ToString("D3") + " " +
            pixelColor.G.ToString("D3") + " " +
            pixelColor.B.ToString("D3") + ", ";

        switch (pixelColorStringValue)
        {
            case "255 255 255":
                {
                    // white pixel
                    break;
                }
            case "000 000 000":
                {
                    // black pixel
                    break;
                }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-12T17:00:59.603

好吧，如果我理解正确，您想遍历图像中的像素，执行某种测试，如果通过，您想将该像素存储在数组中。您可以这样做：

```
using System.Drawing;

Bitmap img = new Bitmap("*imagePath*");
for (int i = 0; i < img.Width; i++)
{
    for (int j = 0; j < img.Height; j++)
    {
        Color pixel = img.GetPixel(i,j);

        if (pixel == *somecondition*)
        {
            **Store pixel here in a array or list or whatever** 
        }
    }
} 
```

不要认为你需要其他任何东西。如果您需要特定的 RGB 值，您可以从像素对象中的相应方法中获取它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-12T06:20:55.310

```
 public Color[][] getBitmapColorMatrix(string filePath)
    {
        Bitmap bmp = new Bitmap(filePath);
        Color[][] matrix;
        int height = bmp.Height;
        int width = bmp.Width;
        if (height > width)
        {
            matrix = new Color[bmp.Width][];
            for (int i = 0; i <= bmp.Width - 1; i++)
            {
                matrix[i] = new Color[bmp.Height];
                for (int j = 0; j < bmp.Height - 1; j++)
                {
                    matrix[i][j] = bmp.GetPixel(i, j);
                }
            }
        }
        else
        {
            matrix = new Color[bmp.Height][];
            for (int i = 0; i <= bmp.Height - 1; i++)
            {
                matrix[i] = new Color[bmp.Width];
                for (int j = 0; j < bmp.Width - 1; j++)
                {
                    matrix[i][j] = bmp.GetPixel(i, j);
                }
            }
        }
        return matrix;
    } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-12T16:39:12.200

我想我曾经做过类似的事情。这是我正在做的代码片段：

```
public static void main(String[] args) {
        try {

            String path = "src/colors.jpg";
            BufferedImage image = ImageIO.read(new File(path));
            int w = image.getWidth();
            int h = image.getHeight();
            for (int y = 0; y < h; y++) {
                for (int x = 0; x < w; x++) {
                    Color c = new Color(image.getRGB(x, y));
                    int red = c.getRed();
                    int green = c.getGreen();
                    int blue = c.getBlue();
                    countColor(red, green, blue);
                    totalCount++;
                }
            }

            printColors();

        } catch (Exception ex) {
            System.out.println(ex.getMessage());
        }
    } 
```

在内部 for 循环中，您可以将某些内容放入数组 [i] [j] 中。（如果那是你要找的）

# php - 在 PHP_CodeSniffer 中查找字符串规则

> ID：10127873
> 
> 赞同：0
> 
> 时间：2012-04-12T16:35:58.987
> 
> 标签：php, codesniffer

我希望扫描文件以查找字符串 Firebug，但这还不够。我还希望在 QFirebug::log 和 QFirebug::error 静态方法之间有所区别。

如何在类名之后提取方法名？

```
public function process(PHP_CodeSniffer_File $phpcsFile, $stackPtr)
{
    $tokens = $phpcsFile->getTokens();
    echo $tokens[$stackPtr]['content'];
    if ($tokens[$stackPtr]['content'] === 'Firebug') {
        $error = 'found ' . $tokens[$stackPtr]['content'];
        $data  = array(trim($tokens[$stackPtr]['content']));
        $phpcsFile->addError($error, $stackPtr, 'Found', $data);
    }

}//end process() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T21:38:05.333

如果您使用`-vv`命令行参数运行 phpcs，您可以看到 PHP 文件被分解成的标记列表。对于像`Firebug::error();`您这样的行：

```
Process token 1 on line 2 [lvl:0;]: T_STRING => Firebug
Process token 2 on line 2 [lvl:0;]: T_DOUBLE_COLON => ::
Process token 3 on line 2 [lvl:0;]: T_STRING => error
Process token 4 on line 2 [lvl:0;]: T_OPEN_PARENTHESIS => (
Process token 5 on line 2 [lvl:0;]: T_CLOSE_PARENTHESIS => )
Process token 6 on line 2 [lvl:0;]: T_SEMICOLON => ; 
```

你没有表现出你的全部嗅觉，但我假设你正在寻找 T_STRING 令牌。在这种情况下，一旦您确定 $stackPtr 指向“Firebug”字符串，只需确认它是静态调用，然后获取下一个字符串标记：

```
if ($tokens[$stackPtr]['content'] === 'Firebug'
    && $tokens[($stackPtr + 1)]['code'] === T_DOUBLE_COLON
) {
    // This is a static call to a Firebug class method.
    $methodName = $tokens[($stackPtr + 2)]['content'];
    /* your error code here */
} 
```

或者，如果您认为人们会在双冒号之间放置空格，`Firebug :: error()`那么您可以执行以下操作：

```
if ($tokens[$stackPtr]['content'] === 'Firebug') {
    // Find the next non-whitespace token.
    $colon = $phpcsFile->findNext(PHP_CodeSniffer_Tokens::$emptyTokens, ($stackPtr + 1), null, true);
    if ($tokens[$colon]['code'] === T_DOUBLE_COLON) {
        // This is a static call to a Firebug class method.
        $methodName = $phpcsFile->findNext(T_STRING, ($colon + 1));
        /* your error code here */
    }
} 
```

如果您想更进一步，您也可以查找 T_OPEN_PARENTHESIS 和 T_CLOSE_PARENTHESIS 标记，以确认它是函数调用，但这取决于您使用的类。

希望有帮助。

# c++ - QSqlTableModel中如何获取一行的行状态？

> ID：10127876
> 
> 赞同：1
> 
> 时间：2012-04-12T16:36:14.683
> 
> 标签：c++, qt, qt4.7, qtsql, qsqltablemodel

我有一个`QSqlRelationalTableModel`. 我正在使用`OnManualSubmit`我的编辑策略。我打电话给`setTable`和`insertRow`。

稍后，我如何以编程方式知道模型中已添加或编辑了哪些行但尚未提交到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:44:49.860

Qt 不会公开挂起更新、插入或删除的列表，您只能使用`QSqlTableMode::isDirty`.

但是由于您可以访问信号和`rowsInserted`，因此您可以自己构建这些列表。`rowsRemoved``dataChanged`

# c++ - 为什么在 C++ 中为执行线程从未遇到过的局部变量声明分配堆栈空间？

> ID：10127878
> 
> 赞同：7
> 
> 时间：2012-04-12T16:36:21.777
> 
> 标签：c++, stack, stack-overflow

为什么在 C++ 中为执行线程从未遇到过的局部变量声明分配堆栈空间？或者，如果 C++ 标准未定义，为什么某些编译器为执行线程从未遇到的局部变量声明分配堆栈空间？编译器能否只为执行线程遇到的变量声明分配堆栈空间并且仍然可以工作？

为了说明，在无法遇到变量字符的调试模式下调用此函数会导致堆栈溢出：

```
void f()
{
    if (false)
    {
        char chars[INT_MAX];
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T16:39:09.387

编译器提升了局部变量的声明。是否这样做没有由标准定义，因此行为是**特定于实现**的。这样做可以一次为所有局部变量分配空间，从而减少开销。

但是，通过优化，编译器会将您的特定情况识别为死代码，并且您遇到的情况将被消除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T16:45:11.793

1）没有理由不这样做。C++ 标准不保证在执行期间未进入范围内的变量不会为它们分配空间。

2）它更快更简单。如果一次分配所有局部变量，则为局部变量分配空间的代码包括在函数开头对堆栈指针的一次更新，以及在结尾处的一次更新。如果一个范围内的局部变量必须在该范围的开始和结束时被分配和释放，你会得到更多的堆栈指针更新。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T16:43:23.310

这将非常依赖于编译器和优化级别。一些编译器能够判断那里的 if 块永远不会到达，因此根本不会为它发出代码。其他人会。其他可能取决于优化级别。还有一些人在调用函数时为所有局部变量分配空间，而不是在输入范围时分配空间，因为计算起来“更简单”。这实际上类似于 vanilla C 的行为，因为您必须在函数的开头声明所有变量（不确定 vanilla C 中是否存在带有作用域局部变量的封闭作用域，已经很长时间了），所以它可能是一个保留从此。

此外，您显然会遇到堆栈远小于堆，以及局部变量声明如何超出其容量，但我很确定这是您示例的意图。

如果您正在寻找更好的“他们为什么这样做”，请发布您为此使用的编译器版本（和设置），也许其中一位创建者会做出回应。没有那个，谁知道呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T17:02:32.600

在 MSVC 的情况下，未使用的局部变量会发出编译器警告 (C4101)。更多详情请访问：http: [//msdn.microsoft.com/en-us/library/c733d5h9 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/c733d5h9(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T17:02:37.853

这取决于编译器和您使用的设置。例如（我必须对其进行修改，以便它实际上可以在 VS 2008 中编译），以下将在 Debug 中引发堆栈溢出异常，但在 Release 中完成：

```
void f()
{
    if (false)
    {
        char chars[INT_MAX/2];
    }
}

int main(int argc, _TCHAR* argv[])
{
    f();
    return 0;
} 
```

# java - NoClassDefFoundError 试图使用 OpenCyc，有什么问题？

> ID：10127880
> 
> 赞同：0
> 
> 时间：2012-04-12T16:36:24.170
> 
> 标签：java

我想创建 cycAccess 对象以连接到 openCyc 知识库，但我无法创建此对象。我从这段代码中得到了 NoClassDefFoundError ......请有人可以帮助我吗？以下是我的代码....

```
public static void exampleConnectingToCyc() {
System.out.println("Starting Cyc connection examples.");
CycAccess access = null;
try {
  access = new CycAccess("localhost", 3602);
  System.out.println("Successfully established CYC access " + access);

  // The following code should only be called if you will be modifying the KB
  // and one should typically use a real user and more specific KE purpose.
  // This information is used for accurately maintaining KB content
  // bookkeeping information.
  CycConstant cycAdministrator = access.getKnownConstantByName("CycAdministrator");
  CycConstant generalCycKE = access.getKnownConstantByName("GeneralCycKE");
  access.setCyclist(cycAdministrator);
  access.setKePurpose(generalCycKE);

  // Do stuff with the connection here.

  // Note: The class CycAccess contains many of the
  // useful public methods for interacting with Cyc.

  // Note: Establishing a connection with Cyc is relatively expensive.
  // If you have a lot of work to do with Cyc over time, make a single
  // CycAccess object and use that everywhere.
} catch (UnknownHostException nohost) {
  // if cyc server host not found on the network
  nohost.printStackTrace();
} catch (IOException io) {
  // if a data communication error occurs
  io.printStackTrace();
} catch (CycApiException cyc_e) {
  // if the api request results in a cyc server error
  // example: cannot launch servicing thread;
  // protocol errors, etc.
} catch (Exception e) {
} finally {
  // ensure that the connection is closed when finished
  if (access != null) {
    access.close();
  }
}
System.out.println("Finished."); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:43:06.020

NoClassDefFoundError 通常意味着在编译时可用的类在运行时不可用。我建议您检查应用程序的类路径，以查看所有必需的依赖项是否都在类路径中。因为大部分代码使用 JDK 提供的类，您可能应该查看 CycAccess 和 CycConstant 类所需的依赖项。

# routing - 将应用程序移动到 subURI 后，Rails 3.2 PDFKit 路由错误

> ID：10127885
> 
> 赞同：1
> 
> 时间：2012-04-12T16:36:32.407
> 
> 标签：routing, rack, ruby-on-rails-3.2, pdfkit

我有一个使用 PDFKit 的 rails 3.2 应用程序，作为中间件安装。在我尝试将应用程序移动到站点域的子URI（'domain.com' -> 'domain.com/ar'）之前，它运行良好。[我根据乘客文件](http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rack_to_sub_uri)设置了 subURI. 该应用程序仍然可以正常工作，除非涉及 PDF 转换。我有一个名为年度报告的对象。使用上面提到的 subURI，annual_report URL 是“domain.com/ar/annual_reports/1/edit”。当我使用“domain.com/ar/annual_reports/1/edit.pdf”请求 PDF 版本的年度报告时，我收到路由错误：“没有路由匹配 [GET]”/ar/annual_reports/1/edit” '。那条路线确实存在。我可以删除“.pdf”扩展名，应用程序会愉快地加载页面。看来 PDFKit 或者 Rack 正在将我的请求与应用程序路由进行比较。当然，其中没有一个包含“/ar”子URI。所以它失败了。

我尝试在 PDFKit 中设置 root_url 以包含 subURI。我试过设置 Rails.relative_url_root。我尝试将应用程序包装在 config.ru 中的地图中。在这一点上，除了可卡因，我什么都试过了。所以，我把它交给你，StackOverflow......谢谢。

# objective-c - UITapGestureRecognizer 超时？

> ID：10127887
> 
> 赞同：4
> 
> 时间：2012-04-12T16:36:33.493
> 
> 标签：objective-c, ios, cocoa-touch, uigesturerecognizer

如果我在 UITapGestureRecognizer 上将 numberOfTapsRequired 设置为 2，那么用户在第一次点击后有一定的时间再次点击以触发我的识别器。有谁知道如何找出允许的确切时间？

以此类推，在 Cocoa 中，NSEvent 具有 doubleClickInterval 类方法。我正在为 UITapGestureRecognizer 寻找 iOS 中的等价物

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:05:39.313

答案是：0.35 秒，至少在今天的 iOS 5.1 上。

我创建了一个测试应用程序，它使用一对点击识别器来识别单击和双击以更新一对 UIlabels。然后，我使用[Instruments UI 自动化](http://guerratopia.com/en/introduction-to-automating-ui-testing-in-ios)重复发送双击，并在两次点击之间逐渐增加时间。在 0.34 秒时，一系列点击被识别为双击，但在 0.35 秒时，它们被识别为单击。

这很像 Lou 的建议，但不同之处在于我需要使用 Instruments。我找不到在 UIKit 中模拟用户点击的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:36:02.070

在测试应用程序中，创建一个 UITapGestureRecognizer，然后开始`touchesBegan:withEvent:`在计时器上调用和关联的成员。看看这是否会导致手势被识别。

您可能必须尝试弄清楚如何正确调用它以便识别任何手势，但据我了解，识别器仅依赖于通过将它们用作视图版本相同消息的选择器来调用它们，因此调用它们你自己应该有同样的效果。

当您找到所需的任何公差的数字时，您可以在您的应用程序中使用它。

此外，由于这可以随时更改（因为 Apple 只是喜欢它）——或者在不同的 iOS 版本上可能会有所不同，因此您始终可以将其合并到您的初始化中。

或者，您可以像@Paul 在他的评论中建议的那样接近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-28T15:13:06.290

您可以在调试器中查看 UITapGestureRecognizer 并查看私有变量 _maximumIntervalBetweenSuccessiveTaps 等于 0.34(9)。

[调试器的屏幕](https://i.stack.imgur.com/irATU.png)

# php - MySQL多个项目链接到一个ID

> ID：10127888
> 
> 赞同：2
> 
> 时间：2012-04-12T16:36:35.603
> 
> 标签：php, mysql, arrays, json

我正在做一个测验，我必须表格：问题和答案。

[http://pastebin.com/6UWF8RCy](http://pastebin.com/6UWF8RCy)

我的 sql 查询有问题

现在我得到一个 JSONObject，其中包含每个答案的问题，我怎样才能为每个问题获得一个对象，其中包含与该问题相关的所有答案？因此，当我阅读 json-data 时，我可以获取包含第一个答案的第一个对象以及与该问题相关的答案。

编辑：php 代码，整个 JSON 部分无关紧要，因为如果我得到正确的数组，那么 JSON 也将是正确的。

```
$query = "
        SELECT * FROM Questions
        LEFT JOIN Answers ON Questions.questionID=Answers.questionID
        UNION
        SELECT * FROM Questions
        RIGHT JOIN Answers ON Questions.questionID=Answers.questionID
        LIMIT 10";

$result = mysql_query($query);

$array = array();

while ($row = mysql_fetch_assoc($result)) {
        $array[] = $row;

}

$json = json_encode($array);
echo $json; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:10:35.573

我不确定查询是否给出了正确的结果

你可以用

```
$query = "SELECT * FROM Questions
            LEFT JOIN Answers ON Questions.questionID=Answers.questionID "; 
```

而不是联合，但是根据您的查询，这应该可以满足您的期望..

```
$query = "
        SELECT * FROM Questions
        LEFT JOIN Answers ON Questions.questionID=Answers.questionID
        UNION
        SELECT * FROM Questions
        RIGHT JOIN Answers ON Questions.questionID=Answers.questionID
        LIMIT 10";

$result = mysql_query($query);

$array = array();

while ($row = mysql_fetch_assoc($result)) {
        $array[$row['questionID']]['answers'][$row['answerID']] = $row['answer'];
        $array[$row['questionID']]['questionID'] = $row['questionID'];
        $array[$row['questionID']]['question'] = $row['question'];
        $array[$row['questionID']]['category'] = $row['category'];
        $array[$row['questionID']]['correct'] = $row['correct'];
}

$json = json_encode($array);
echo $json; 
```

# unit-testing - 使用 Junit 测试函数（ParseToXML、PostMethod）

> ID：10127889
> 
> 赞同：0
> 
> 时间：2012-04-12T16:36:46.043
> 
> 标签：unit-testing, junit, xml-parsing, apache-commons-httpclient

我想为此功能编写 JUNIT 测试

```
public static int creerFichierXml(TextField titre_projet,TextField description1,TextField svn,TextField planning1,TextField planning2,TextField goals,TextField mail){
//Créer le fichier XML et l'envoyer au serveur

    int returnCode = 0;
    ParseToXML j=new ParseToXML();
    try {
j.main(description1, svn, planning1, planning2, goals,mail);
    } catch (InterruptedException e1) {
        e1.printStackTrace();
    }

HttpClient client = new HttpClient(); 
PostMethod postMethod = new PostMethod("http://localhost:8080/createItem?name="+titre_projet.toString()); 
postMethod.setRequestHeader("Content-type", "application/xml; charset=ISO-8859-1"); 
try {
    postMethod.setRequestBody(new FileInputStream(new File("C:/integrationContinue/src/main/resources/config.xml")));
    returnCode = client.executeMethod(postMethod);
    System.out.println("*********************************************"+returnCode);

} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (HttpException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
return returnCode;
} 
```

此代码用于创建一个 xml 文件，然后使用 postMethod 将其发送到服务器

Junit 必须测试 http 连接，解析为 Xml 并调用 main 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:44:52.907

如果您正在调用`ParseToXML`, `HttpClient`，`PostMethod`那么您没有进行单元测试，因为您正在测试被测类之外的代码。要真正对此进行单元测试，您需要为 和 提供`ParseToXml`工厂`HttpClient`类`PostMethod`。然后，您将注入模拟工厂，这些工厂将为这些类中的每一个返回模拟。然后您将测试模拟是否被正确调用。

如果您正在测试此代码是否确实向服务器 X 发送了 HTTP Post 方法，那么您正在执行集成测试而不是单元测试。

# mysql - 如何使用 MySQL 强制创建视图？

> ID：10127890
> 
> 赞同：1
> 
> 时间：2012-04-12T16:36:46.770
> 
> 标签：mysql, view

我认为 MySQL 拒绝创建，因为它引用了一个不存在的列：

```
ERROR 1054 (42S22): Unknown column 'd.completed' in 'where clause' 
```

有没有办法强制 MySQL 创建这个视图？（即使在创建列之前无法使用它。）

（我想这样做的原因是我有一个工作视图，该视图随后在删除一列后损坏。我正在创建一个模式迁移来修复该视图，但是，与我所有其他迁移一样，我也想能够恢复到现在的状态。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-27T08:14:10.883

据我所知和从文档中，mysql 不支持强制视图。这是 Oracle 的一个概念。如果我对任何官方文档链接有误，请纠正我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-25T21:57:54.593

您可以使用 -f 选项从 mysql 命令行强制创建视图：

```
mysql -f -u UserName -p < dump.sql 
```

# apache - RewriteModule 上的“SCRIPT_FILENAME”和“REQUEST_FILENAME”有什么区别？

> ID：10127893
> 
> 赞同：4
> 
> 时间：2012-04-12T16:36:54.853
> 
> 标签：apache, rewrite

`SCRIPT_FILENAME`mod_rewrite和`REQUEST_FILENAME`in mod_rewrite有什么区别？

```
RewriteCond %{SCRIPT_FILENAME} -f
RewriteCond %{SCRIPT_FILENAME} -d 
```

和

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQEUST_FILENAME} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:41:49.740

> 变量 SCRIPT_FILENAME 和 REQUEST_FILENAME 包含相同的值 - Apache HTTP 服务器的内部 request_rec 结构的文件名字段的值。第一个名称是众所周知的 CGI 变量名称，而第二个名称是 REQUEST_URI 的对应名称（其中包含 request_rec 的 uri 字段的值）。

[http://httpd.apache.org/docs/trunk/mod/mod_rewrite.html](http://httpd.apache.org/docs/trunk/mod/mod_rewrite.html)

# oracle - 将参数绑定到 Oracle 报表 PL/SQL 中的变量

> ID：10127894
> 
> 赞同：1
> 
> 时间：2012-04-12T16:36:54.840
> 
> 标签：oracle, plsql

我正在尝试使用日期参数创建 Oracle 报告。我知道如何将参数添加到 Oracle 报告，但我不知道如何将其绑定到驱动报告的 PL/SQL 查询中的变量。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:40:00.880

如果您的参数名为 MY_PARAM1，那么您可以在报表 SQL 中引用它，如下所示：

```
select a, b, c
from my_table
where col1 = :my_param1 
```

# javascript - 如果在选择器中找到元素，为什么我不能在 Jquery 中添加类名？

> ID：10127896
> 
> 赞同：0
> 
> 时间：2012-04-12T16:37:01.517
> 
> 标签：javascript, jquery, class, jquery-mobile

我对这个很迷茫......

我有一个包含三个面板的容器，我需要为所有面板添加一个类。如果我做这样的选择器：

```
 $('#container').find('div:jqmData(role="panel")').length; 
```

Firebug 告诉我，它是三个面板，虽然当我将鼠标悬停在源代码上时，一个面板没有突出显示并且高度为 0。

如果我在以下行中执行此操作：

```
 $('#container').find('div:jqmData(role="panel")').addClass("HELLO"); 
```

尽管找到了这个元素，但它没有得到类“HELLO”。其他两个元素获得“HELLO”类

我现在想知道这是怎么回事，因为控制台就在 addClass 之前，所以如果找到三个元素，为什么只有两个元素得到“HELLO”？此外，在分配类时，元素的高度应该是无关紧要的，不是吗？

我有 W3C 版的源代码。一切都好。这是简短的版本：

```
<div data-role="page" id="container">
    // one
    <div data-role="panel" data-panel="menu">
        <div data-role="page" id="menu_first">                                
               <p>Menu Lorem Ipsum</p>                              
        </div>       
    </div>
    // two
    <div data-role="panel" data-panel="mid">
        <div data-role="page" id="mid_first">                
             <p>Mid Lorem Ipsum</p>                             
        </div>       
    </div>
    // three
     <div data-role="panel" data-panel="main">
        <div data-role="page" id="main_first">                
             <p>Main Lorem Ipsum</p>                             
        </div>       
    </div>
</div> 
```

jquery 在一个长插件中。这些是相关部分：

```
(function( $, window) {     
$.widget("mobile.multiview",$.mobile.widget, {

       _create: function() {
            var self = this;
            self._mainEventBindings();
            },
       _mainEventBindings: function () {
            $(document).on('pagebeforeshow', 'div:jqmData(role="page")', function(event, data){
               var page = $(this);
               if ( page.data("counter") == 0 || typeof page.data("counter") == 'undefined') {
                   self.setupMultiview(event, page);
                   }
            });
          },
       setupMultiview: function(event, page) {
            var self = this;
            page.find("div:jqmData(role='panel')").addClass('HELLO').end()  
            } 
       }) (jQuery,this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:45:41.167

这个怎么样？

```
$('div').each( function() {
    if( $(this).data('role') == "panel" ) {
       $this.addClass("HELLO");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:17:55.850

行。找一个

```
 $('div:jqmData(panel="mid")').removeClass() 
```

这清除了已正确分配的所有内容。

# android - 如何防止 Android Xoom 上 WebView 内的 Canvas 性能下降？

> ID：10127900
> 
> 赞同：0
> 
> 时间：2012-04-12T16:37:12.153
> 
> 标签：android, canvas, touch, android-webview, xoom

我一直在尝试使用 WebView 内部的画布来捕捉小图。在 Chrome 或非常简单的测试页面上进行测试，画布执行正常。我的意思是，如果我在 500 像素宽的画布上拖动手指，我会看到 60-100 个 touchMove 事件。

这个基于画布的实用程序是作为一个 jQuery 插件实现的。当我在较大的 Web 应用程序中使用该插件时，当我在 500 像素宽的画布上执行相同的手指拖动时，画布只捕获了大约 20 个左右的事件。

关于可能导致我的应用程序性能下降的原因与简单的测试页面相比，我有很多想法，但到目前为止还没有任何结果。Xoom 测试设备上的内存和 CPU 使用率似乎很好。

以下是一些症状，但尚未得出结论性的解决方案：

```
04-12 10:47:58.037: WARN/webview(13316): Miss a drag as we are waiting for WebCore's response for touch down. 
```

我在简单的测试页面场景中以及在更大的 Web 应用程序中使用插件时看到这样的消息。这些消息需要更加有力的绘图才能在简单的测试页面中重现。只需在 WebView 内部的画布上快速绘制草图，您可能会看到它，至少在与 Xoom 1 类似的硬件上。偶尔也会有关于过时的 touchMove 事件的消息，尽管它们不太常见

可能会或可能不会导致问题或解决方案的一些其他详细信息：

```
settings.setRenderPriority(WebSettings.RenderPriority.HIGH); //applying high render priority is in place 
```

该应用程序是离线应用程序，因此我们必须启用缓存。应用程序中有 10-20K 的 JavaScript（不包括库），但我没有理由怀疑这会减慢将 touchMove 事件传递到 WebView 内的画布的速度。

我看到其他人的帖子已经放弃了 WebView 内的画布，尽管他们正在开发比这个简单的绘图应用程序更密集的应用程序。显然，我需要更快地进行更多事件，否则我的所有曲线看起来都像直线。

有谁知道 touchMove 事件降级的确切原因，或者现在是时候简单地放弃 Android WebView 内的画布了？

# audio - 通过 HTTP 流式传输音频

> ID：10127907
> 
> 赞同：0
> 
> 时间：2012-04-12T16:37:40.970
> 
> 标签：audio, stream, soundcloud

如果给定歌曲标题和艺术家姓名，Soundcloud API 是否有可用的歌曲流？它会提供一个 HTTP url 以在 Soundcloud 上流式传输该歌曲和该歌曲的 url 吗？在 Soundcloud 发布的 API 文档中找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:38:58.273

我认为 SoundCloud 不支持歌曲的艺术家-标题对。

问题是 SoundCloud 上的艺术家（用户名）不是唯一的，只有用户名，但是通过用户名找到艺术家几乎是不可能的，因为用户名的字符有限制。

因此，您可以找到更多具有相同或相似名称的用户（艺术家），甚至可能具有相同的曲目标题。

最好的方法是通过 API 搜索歌曲，找到最佳匹配，然后您可以获得该曲目的详细信息。

# awk - awk 在命令行中的行为与在脚本中的行为不同

> ID：10127908
> 
> 赞同：2
> 
> 时间：2012-04-12T16:37:45.650
> 
> 标签：awk

我希望这会放 '1' 但它会输出 '1 2 3'

```
回声“1 2 3” | awk "{ 打印 $1 }"

```

但是，当从文件运行 awk 代码时，它确实可以工作（其中 awkscript.awk 包含 {print $1}）：

```
echo "1 2 3" | awk -f awkscript.awk 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:40:44.323

你应该使用：

```
echo "1 2 3" | awk  '{ print $1 }' 
```

然后它`1`也从命令行打印。那`'`不是`"`在 awk 命令中。

**说明：**使用双引号`"`变量`$1`会预先扩展，因为它只是一个空字符串，所以你的命令实际上变成了这样：

```
echo "1 2 3" | awk '{ print }' 
```

# android - 当我尝试在 Android 上通过 smtp.gmail.com 发送电子邮件时，我总是收到“权限被拒绝”

> ID：10127910
> 
> 赞同：0
> 
> 时间：2012-04-12T16:37:59.190
> 
> 标签：android, smtp, gmail

在我的 android 模拟器上发送电子邮件（通过我的代码，而不是通过电子邮件应用程序）时出现以下异常 - javax.mail.MessagingException：无法连接到 SMTP 主机：smtp.gmail.com，端口：465；java.net.SocketException：权限被拒绝。

任何人都可以给我一些帮助？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:06:50.573

当我通过我的 Google 帐户从笔记本电脑发送 SMTP 邮件时，就会发生这种情况，我喜欢这样做，因为 Google SMTP 已经过身份验证，可以让我从我所在的任何网络发送邮件。好吧，偶尔我会收到这种“权限被拒绝”的消息——特别是当我在 Carrows 时，今天我试图从欧洲的本地 ISP 发送它。

我尝试从 SMTP 端口切换到“提交端口 587”，它成功了。不知道我的邮件程序是如何解决这个问题的，但消息肯定是在 SSL 会话中发送的，但我不知道身份验证是如何执行的。

我相信这与 ISP 的端口阻塞有关。

我正在使用 Eudora 7.1.0.9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T14:56:35.783

我的问题的解决方案是：

AndroidMainfest.xml

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:13:45.463

`smtpd`的默认侦听端口是 25，而不是 465。您必须首先确定 SMTP 服务器正在侦听的端口。

此外，电子邮件客户端通常使用端口 43 上的 IMAP 与邮件服务器通信。

有一种使用 Telnet 与侦听端口建立连接的高级方法。

如果您知道 Telnet 并且习惯使用它，我可以提供您应该遵循的步骤。

否则，您将不得不联系您正在使用的电子邮件服务器的管理员。

# php - PHP-如何从字符串内容中分配类变量和值？

> ID：10127920
> 
> 赞同：2
> 
> 时间：2012-04-12T16:38:36.913
> 
> 标签：php, class, object

我有一个字符串，我试图用它来创建一个类。我正在尝试命名每个属性并根据字符串的内容定义其值。例如：

```
$mystring = "first_name=jane,last_name=doe";

$pieces = explode(",", $mystring);

foreach( $pieces as $key => $value){
    $eachvalue = explode("=",$value);

    class MyClass {  

        public $eachvalue['0'] = $eachvalue['1'];  

    }  

} // end foreach

$obj = new MyClass;

echo $obj->first_name; // Should echo "Jane" 
```

我是相当新的 PHP 类，这不起作用。我不知道我是否接近，或者我是否远离......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:41:49.440

正确的方法是：

```
// Class definition
class MyClass {  

    public $first_name;
    public $last_name;

}

$mystring = "first_name=jane,last_name=doe";

// Instantiate the class
$obj = new MyClass;

// Assign values to the object properties
$pieces = explode(",", $mystring);
foreach ($pieces as $key => $value) {
  // this allows you to assign the properties dynamically
  list($name, $val) = explode("=", $value);
  $obj->$name = $val;
} // end foreach

echo $obj->first_name; // Should echo "Jane" 
```

一个类只能定义一次 - 通过将其放入循环中，您将在循环的每次迭代中声明它。此外，类不会在对象的实例中保存您想要的值，它是描述对象将如何的骨架。所以你要做的是定义类，实例化它，然后给它赋值。

# c# - 在事件处理程序周围传递 EventArg 是否有潜在危险？

> ID：10127922
> 
> 赞同：0
> 
> 时间：2012-04-12T16:38:39.177
> 
> 标签：c#, winforms, listview, event-handling, contextmenustrip

我正在从另一个调用事件处理程序：

```
private void launchApplicationToolStripMenuItem_Click(object sender, EventArgs e) {
            listApplications_DoubleClick(listApplications, null); 
        }

        private void listApplications_DoubleClick(object sender, EventArgs e) { 
```

“listApplications”是一个列表视图。

我必须传递 listApplications，因为我将 DoubleClick() 事件中的 sender 转换为 ListView。

但是，第二个参数呢？我应该传递 null，如上所示，还是应该像这样传递“e”：

```
listApplications_DoubleClick(listApplications, e); 
```

在良好的情况下，两种方式都可以正常/相同地工作。我不知道如果有例外情况会不会是这样，虽然......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:42:48.237

当您调用相同事件的事件处理程序时（即，当您从另一个双击事件调用双击事件时）您应该将事件参数传递给它。事件参数包含有关双击的重要信息，例如，它的位置。如果“下游”处理程序不关心这些参数，则传递`null`不会导致问题；但是，您不应该*假设*您正在调用的处理程序会忽略该参数，并传递一些有效的东西给它。

这是[一个](https://stackoverflow.com/a/690945/335858)如何使用事件参数来确定双击位置的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:43:03.010

不，除非您不使用 ein 方法 listApplications_DoubleClick(object sender, EventArgs e) body.. 可以发送 null，否则传递 EventArg 并不危险，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:16:57.857

好吧，我不会完全说危险，但如果处理不当，它可能会导致一些问题，例如异常。在您的示例中，一个事件是单击事件，另一个是双击事件，这意味着 EventArgs 对象 e 实际上都是 MouseEventArgs。这很好，因为你不必担心第二个事件处理程序访问不存在的 e 成员。

例如，现在假设您想在用户单击按钮时调用绘制事件。在这种情况下，点击事件将调用绘制事件。现在的问题是：绘制事件需要一个 PaintEventArgs，因此传递一个 MouseEventArgs 可能会导致异常。当然，如果您可以控制这两段代码，那么您可以自行检查是否可以访问 PaintEventArgs 特定成员。如果没有，那么你很好，尽管在这种情况下我看不出传递参数的意义。

希望这不会太混乱。

# ruby-on-rails - 在 utility.rb 中调用 sign_up 实用程序测试方法失败

> ID：10127926
> 
> 赞同：1
> 
> 时间：2012-04-12T16:38:50.470
> 
> 标签：ruby-on-rails, railstutorial.org

我对在 Rails 上编写测试有点陌生，我正在关注[http://ruby.railstutorial.org](http://ruby.railstutorial.org)上的 RoR 教程。我正在尝试添加我自己的测试实用程序方法sign_up，类似于utility.rb 中已有的sign_in 方法。但是，当针对我的注册页面调用它时，我收到此错误：

```
2) User pages index pagination as an admin user to unlock new users 
     Failure/Error: sign_up user
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
     # (eval):2:in `fill_in'
     # ./spec/support/utilities.rb:33:in `sign_up'
     # ./spec/requests/user_pages_spec.rb:63:in `block (5 levels) in <top (required)>' 
```

我的 sign_up 方法如下所示：

```
def sign_up(user)
  visit signup_path
  fill_in "Name",         with: user.name
  fill_in "Email",        with: user.email
  fill_in "Password",     with: user.password
  fill_in "Confirmation", with: user.password
  click_button "Sign up"
end 
```

即使只是访问 signup_path 似乎也开始出错 - 我什至不确定它是否会去那里。此外，如果我注释掉这`fill_in "Name"`条线，它也会以同样的方式扼杀这`fill_in "Email"`条线。

任何关于这里发生的事情的建议或想法将不胜感激。

谢谢，-马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:51:44.360

灯泡终于亮了。

当您使用工厂创建用户时，它会将其插入数据库。因此，当您转到注册页面并尝试使用该用户时，它已经存在**，您会被重定向到主页。这意味着不存在与 fill_in 一起使用的字段**。简化规格：

```
require 'spec_helper'

describe "signup page" do
  subject { page }

  describe "with valid information" do
    before { sign_up('em', 'em@em.com', '123456') }
    it { should have_title_and_h1('em') }
  end
end 
```

实用方法：

```
def sign_up(name, email, password)
  visit signup_path
  fill_in "Name",         with: name
  fill_in "Email",        with: email
  fill_in "Password",     with: password
  fill_in "Confirmation", with: password
  click_button "Create my account"
end 
```

将通过浏览器界面创建用户。

# openlayers - OpenLayers：我可以给标记一个名字，描述吗？

> ID：10127928
> 
> 赞同：0
> 
> 时间：2012-04-12T16:38:55.057
> 
> 标签：openlayers, marker

有了这个[http://dev.openlayers.org/docs/files/OpenLayers/Layer/Text-js.html](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Text-js.html)，可以从带有名称和描述的文件标记中加载。可以创建带有描述的标记而不从保存的文件中加载它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:57:25.757

你可以自己做。Openlayers 不支持这个

# maven-2 - 使用 MAVEN 的单个 Eclipse 项目中的多个源文件夹

> ID：10127929
> 
> 赞同：1
> 
> 时间：2012-04-12T16:38:57.037
> 
> 标签：maven-2

我想使用 MAVEN 创建多源文件夹

项目/src/main/java/persistence 项目/src/main/java/business project/src/main/java/presentation

那么目标文件夹结构应该是：target/classes/persistence project/src/main/java/business project/src/main/java/presentation

我在stackoverflow中搜索了这个问题。但我想不出解决办法。

我尝试使用'build-helper-maven-plugin'。但没有运气。

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                <id>add-source</id>
                <phase>generate-sources</phase>
                <goals>
                    <goal>add-source</goal>
                </goals>
                <configuration>
                <sources>
                    <source>src/main/java/persistence</source>
                    <source>src/main/java/business</source>
                    <source>src/main/java/presentation</source>
                    <source>src/main/java/systemutil</source>
                    <source>src/main/java/service</source>
                </sources>
                </configuration>
            </execution>            </executions> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:03:47.123

你的方法是正确的。配置文件夹中的Java文件应由maven编译。但是所有这些编译都被带到类文件夹本身。所以多源文件夹是可能的，但使用 build-helper-maven-plugin 是不可能的多输出。

# c# - 从不同页面上的 javascript 调用页面的 webmethod

> ID：10127937
> 
> 赞同：9
> 
> 时间：2012-04-12T16:39:12.343
> 
> 标签：c#, asp.net, ajax, webmethod

是否可以从不同页面上的 javascript 调用具有 [WebMethod] 属性的方法？即在名为 PageTwo.aspx 的页面上使用来自脚本的以下 jquery ajax 调用：

```
 $.ajax(
        {
            type: "POST",
            url: "pageone.aspx/PageOneMethodOne",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg)
                     {
                        //something
                     }
        }
    ); 
```

PageOne.aspx.cs 包含

```
 [WebMethod]
    public string PageOneMethodOne()
    {
        return "hello world";
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T17:28:00.823

这是可能的，只要您指定正确的 URL。查看以下表格：

```
<form id="form1" runat="server">
<div>
    <div id="messages">
    </div>
    <input type="text" id="echo" /><input id="echoSubmit" value="Echo!" type="button"/>
</div> 
```

它是相应的Javascript：

```
<script type="text/javascript">
    $(function () {
        $('#echoSubmit').click(function () {
            var mes = $('#echo').val();
            var jsonText = JSON.stringify({ message: mes });

            $.ajax({
                type: "POST",
                url: "SampleForm.aspx/SendMessage",
                data: jsonText,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#messages").append(msg.d);
                }
            });
        });
    });
</script> 
```

单击 echoSumbit 按钮会将输入框的内容发送到另一个控件 SampleForm.aspx 上的 WebMethod。这是该表单的代码隐藏：

```
public partial class SampleForm : System.Web.UI.Page
{
    [WebMethod]
    public static string SendMessage(string message)
    {
        return message;
    }
} 
```

Chat.aspx 中的单击处理程序将输入值发送到 SampleForm.aspx.cs，后者返回发送的值。在 .ajax 调用的成功方法中，返回的值被附加到 Chat.aspx 中的一个 div 中。

# c# - 我需要有关 TPL 练习的帮助

> ID：10127938
> 
> 赞同：1
> 
> 时间：2012-04-12T16:39:16.677
> 
> 标签：c#, task-parallel-library

**并行**执行一组任务，其中一些任务是*Parallel.ForEach()*，而其他一些任务是 Parallel.For()，这是一种不好的做法*吗？*

像这样的东西：

```
Task[] tasks = new Task[n];

tasks[0] = new Task(() => { Parallel.For(...) { } });
tasks[1] = new Task(() => { Parallel.ForEach(...) { } });

Task.WaitAll(tasks); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:58:45.420

使用正确的代码结构来处理正确的数据当然不是坏习惯。如果您有理由`for`对一组数据和`foreach`另一组数据执行 a，那么请务必这样做。

# android - 适用于 Android 的 Youtube Gdata

> ID：10127939
> 
> 赞同：0
> 
> 时间：2012-04-12T16:39:23.760
> 
> 标签：android, html, youtube

如何检索 youtube 提要标签并将其转换为 android 中的字符串/int。我想使用标签和属性 :totalUploadViewCount 吗？

[https://developers.google.com/youtube/2.0/reference#Response_codes_retrieving_feeds](https://developers.google.com/youtube/2.0/reference#Response_codes_retrieving_feeds)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:44:37.173

这可以给你一个起点。

```
 WebRequest response = new WebRequest("https://gdata.youtube.com/feeds/api/channelstandardfeeds/most_viewed?v=2", PostType.GET);
 String responseXML = response.Get();
 Document doc = XMLfunctions.XMLfromString(responseXML);
 NodeList nodes = doc.getElementsByTagName("yt:channelStatistics");
 String totalUploadViewCount = nodes.item(0).getAttributes().getNamedItem("totalUploadViewCount").getNodeValue(); 
 Log.d("", totalUploadViewCount); 
```

**WebRequest.class**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.UnknownHostException;
import java.nio.charset.Charset;
import org.apache.http.HttpResponse;
import org.apache.http.client.CookieStore;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.impl.client.BasicCookieStore;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;

public class WebRequest {
  public enum PostType{
    GET, POST;
  }

  public String _url;
  public String response = "";
  public PostType _postType;
  CookieStore _cookieStore = new BasicCookieStore();

  public WebRequest(String url) {
    _url = url;
    _postType = PostType.POST;
  }

  public WebRequest(String url, CookieStore cookieStore) {
    _url = url;
    _cookieStore = cookieStore;
    _postType = PostType.POST;
  }

  public WebRequest(String url, PostType postType) {
    _url = url;
    _postType = postType;
  }

  public String Get() {
    HttpClient httpclient = new DefaultHttpClient();

    try {
      // Create local HTTP context
      HttpContext localContext = new BasicHttpContext();

      // Bind custom cookie store to the local context
      localContext.setAttribute(ClientContext.COOKIE_STORE, _cookieStore);

      HttpResponse httpresponse;
      if (_postType == PostType.POST)
      {
        HttpPost httppost = new HttpPost(_url);
        httpresponse = httpclient.execute(httppost, localContext);
      }
      else
      {
        HttpGet httpget = new HttpGet(_url);
        httpresponse = httpclient.execute(httpget, localContext);
      }

      StringBuilder responseString = inputStreamToString(httpresponse.getEntity().getContent());

      response = responseString.toString();
    }
    catch (UnknownHostException e) {
      e.printStackTrace();
    }
    catch (Exception e) {
      e.printStackTrace();
    }
    finally {
      // When HttpClient instance is no longer needed,
      // shut down the connection manager to ensure
      // immediate deallocation of all system resources
      httpclient.getConnectionManager().shutdown();
    }

    return response;
  }

  private StringBuilder inputStreamToString(InputStream is) throws IOException {
    String line = "";
    StringBuilder total = new StringBuilder();

    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is,Charset.forName("iso-8859-9")));
    // Read response until the end
    while ((line = rd.readLine()) != null) {
      total.append(line);
    }

    // Return full string
    return total;
  }
} 
```

**XMLfunctions.class**

```
import java.io.IOException;
import java.io.StringReader;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class XMLfunctions {

  public final static Document XMLfromString(String xml) {

    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {
      DocumentBuilder db = dbf.newDocumentBuilder();
      InputSource is = new InputSource();
      is.setCharacterStream(new StringReader(xml));
      doc = db.parse(is);
    }
    catch (ParserConfigurationException e) {
      System.out.println("XML parse error: " + e.getMessage());
      return null;
    }
    catch (SAXException e) {
      System.out.println("Wrong XML file structure: " + e.getMessage());
      return null;
    }
    catch (IOException e) {
      System.out.println("I/O exeption: " + e.getMessage());
      return null;
    }

    return doc;
  }
} 
```

# .net - DataGrid Tabbing 从单元格到内容

> ID：10127945
> 
> 赞同：1
> 
> 时间：2012-04-12T16:39:38.903
> 
> 标签：.net, wpf, xaml, datagrid

我有一个主要由 TemplateColumns 组成的数据网格。我遇到的问题是，在浏览行时，它似乎转到单元格，然后是单元格内的内容（即文本框或切换按钮）。理想的情况是在列中使用 Tab 键将焦点放在内容上并跳过单元格。我可能会错误地解释正在发生的事情，但从视觉上看似乎是这样。我试过了：

```
 <DataGridTemplateColumn Header="Group Value"
                                    MinWidth="30"
                                    Width=".02*">
                <DataGridTemplateColumn.CellStyle>
                    <Style TargetType="{x:Type DataGridCell}">
                        <Setter Property="IsTabStop"
                                Value="False" />
                    </Style>
                </DataGridTemplateColumn.CellStyle>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding SomeBinding, 
                                                ValidatesOnDataErrors=True, 
                                                UpdateSourceTrigger=PropertyChanged}"
                                 IsReadOnly="{Binding RelativeSource={RelativeSource FindAncestor, 
                                               AncestorType={x:Type DataGrid}}, 
                                               Path=DataContext.IsReadOnly}"
                                 Style="{StaticResource TextBoxStyle}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

但这并不像我想象的那样有效。谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T18:46:39.370

我尝试了很多我在不同博客中找到的东西，但没有奏效。但后来我发现了一种简单而有效的技术，它像冠军一样工作！！！

这只需要2个步骤。

**1\. 在资源文件中添加样式：**

```
<!-- Cell Editing For DataGrid-->
<Style x:Key="CellEditingStyle" TargetType="DataGridCell">
    <Setter Property="IsTabStop" Value="False" />
</Style> 
```

**2\. 在您的数据网格中添加此样式：**

```
<DataGridTemplateColumn Header="{DynamicResource grdLoadsPerMonths}"
                        CellStyle="{StaticResource CellEditingStyle}">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBox Text="{Binding Path=LoadsPerMonth, UpdateSourceTrigger=LostFocus}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

这就对了。这解决了所有问题。没有更多的工作，没有更多的类需要添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:58:30.460

你是对的，它似乎确实`DataGridTemplateColumn`在它关注它之前的控件之前关注它。

在寻找解决方案时，我遇到了这个：http: [//iyalovoi.wordpress.com/2009/08/21/wpf-datagrid-tabbing-from-cell-to-cell-does-not-set-focus-控制/](http://iyalovoi.wordpress.com/2009/08/21/wpf-datagrid-tabbing-from-cell-to-cell-does-not-set-focus-on-control/)

您可以将 附加`FocusAttacher`到模板列中的控件，它将从中窃取焦点。它对我很有用。

# jquery - Jquery Carousel - 尝试添加自定义滚动条

> ID：10127947
> 
> 赞同：0
> 
> 时间：2012-04-12T16:40:00.997
> 
> 标签：jquery, jquery-plugins, scrollbar

我曾尝试在线搜索并在这里浏览了相关的“已回答”问题，但似乎没有什么适合我的问题，所以我希望有人知道这个问题的答案。

我有一个我正在编码的网站[http://2938.sandbox.i3dthemes.net/index.html](http://2938.sandbox.i3dthemes.net/index.html)并且我的旋转木马（carouFredsel）工作完美；但是，我想添加一个类似于此处使用的滚动条[http://finnrudolph.de/ImageFlow](http://finnrudolph.de/ImageFlow)。

我有制作滚动条的图像，但对于 Jquery，我是个菜鸟。我确实找到了一些将 jquery 滚动条添加到内容 div 的信息，但他们要求 div 是绝对的，并且为了让我的轮播以它的方式工作，它需要是相对的。

我想做的事可能吗？

我很感激我能得到的任何帮助。

先感谢您。

PS 我尝试让代码在 JSfiddle 中工作但没有成功，所以我提供了一个指向沙箱的链接。

这是标题中的脚本：

```
 <script type="text/javascript" language="javascript">
        $(function() {

        $("#foo3").carouFredSel({
            items   : 2,
            auto: {
                duration: 750
                },
            scroll  : {
                items: 1,
                duration: 750,
            onAfter: function() {
  if ( $(this).triggerHandler( "currentPosition" ) == 0 ) {
    $(this).trigger( "pause" );
  }
}},
        }).parent().css("margin", "auto");
        });

    </script> 
```

这是轮播的 html：

```
 <div class="list_carousel">
    <ul id="foo3">
<li style="width:486px"><img src="Images/SMP-3.jpg" alt="Testing description" /></li>
<li style="width:486px"><img src="Images/SMP-6.jpg" alt="Text_2" /></li>
<li style="width:238px"><img src="Images/SMP-4.jpg" alt="Text_6" /></li>
<li style="width:486px"><img src="Images/SMP-2.jpg" alt="Text_3" /></li>
<li style="width:238px"><img src="Images/SMP-5.jpg" alt="new description" /></li>  </ul>
<div class="clearfix"></div>
</div> 
```

编辑：

我相信使用足够简单的鼠标滚轮插件是可能的。但是，我最初的问题是（现在仍然是）如何使滚动条的图像显示出来以与鼠标滚轮滚动功能一起使用。图像由条形线和沿条形移动的导航圈组成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:53:31.060

why you don't read this image gallery documentation, instead of searching?

[http://finnrudolph.de/ImageFlow/Documentation](http://finnrudolph.de/ImageFlow/Documentation)

# c# - 在本地保存 Visual Studio 的配置管理器设置

> ID：10127951
> 
> 赞同：9
> 
> 时间：2012-04-12T16:40:07.880
> 
> 标签：c#, visual-studio, visual-studio-2010

想在 Visual Studio 2010 中添加我自己的配置设置。我打开了配置管理器，创建了我想要的配置文件，并注意到设置存储在 .csproj 文件中。我想将这些设置保留在我自己的盒子中。我们的源代码管理当前签入 .csproj 文件，因此如果我签入这些更改，我的整个团队都会受到影响。有谁知道是否可以创建您自己的开发箱本地的配置设置？

编辑：添加配置管理器的屏幕截图。我想在本地保存这些设置。

![配置管理器](../Images/91b182dd464680410737d6443d73d13d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:00:38.967

为什么不将所有这些保存到一个不同的解决方案文件中并使用它，而其他人会使用旧的呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:49:49.570

你有一个`csproj`文件和一个`csproj.user`文件。

Visual Studio 将设置放在用户文件中，每个用户可以不同，而不会影响整个团队的开发（例如是否单击了“显示所有文件”按钮）。您不会签入此文件，删除它可能会带来不便，但不会影响程序。

Visual Studio 将设置放在 csproj 文件本身中，这些设置会影响团队的开发（例如哪些类是项目的一部分、对 DLL 的引用以及目标框架版本）。您必须在进行更改时签入此文件，删除它肯定会影响您的程序。

这是基于我自己的理解和经验。也许如果您列出您希望将哪些设置保留在 csproj 文件之外，那么这里的其他人将能够列出解决方法......

# algorithm - 使用分治法检测数组中的重复项

> ID：10127953
> 
> 赞同：7
> 
> 时间：2012-04-12T16:40:22.870
> 
> 标签：algorithm

我在考试中得到了以下问题，似乎不可能。有什么我想念的吗？

**给定一个包含 n 个对象的数组，该数组只能比较是否相等，并且对数组中值的范围一无所知，给出一个分而治之的解决方案来检测数组中是否存在任何重复项。这必须是 O(nlogn) 解决方案。**

由于问题的性质，我们可以放心地假设该解决方案可能与数据结构或基数排序无关，那么这可以就地完成吗？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T17:12:19.000

如果您无法订购商品，则无法检查重复`O(nlogn)`商品，如果您只能比较是否相等，则无法订购它们。

事实上，除非你比较每一对，否则你不能确定没有重复，并且有`n(n-1)/2`这样的对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:51:36.657

如何使用哈希集。将每个项目添加到集合中。然后检查尺寸。然而，这不是分而治之。

* * *

相等性比较的结果会告诉您被比较的两个对象中的哪一个“更大”吗？

如果您可以创建对象集的总排序，我认为您可以使用其中一种就地除法和 conq 排序算法，但添加一些额外的逻辑来检测重复。（将 <= 检查变成 < 和 == 检查）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:13:34.647

由于它是 O(nlogn)，基本上你可以对数组进行排序并找到重复项。既然你想使用分而治之，我建议使用快速排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:02:36.447

您可以在 NlogN 时间内做到这一点的唯一方法是“作弊”。

在 .NET 和 Java 中，接口的任何实现，例如 .NET 的 IEquatable，它只公开一个 Equals() 方法，也是一个基层对象。.NET 和 Java 中的对象具有散列函数（在 .NET 中是 GetHashCode()；在 Java 中是 hashCode()）。因此，无论接口限制您使用哪种方法，您始终可以访问将产生数值的散列函数。

这将允许您散列每个对象并比较散列的相对大小。这反过来又允许您按哈希对数组进行排序，然后以线性时间对其进行扫描以检测重复项。您可以就地执行此操作，或者您可以通过将每个项目插入到以哈希值为键的红黑树、哈希表或字典中来保持原始数组完整（所有这些都具有 logN 或更好的访问时间和 logN 或更好的插入次）。

如评论中所述，这些方法中的任何一种都可以并行化到多个线程，从而满足“分而治之”的要求；排序可以通过并行 MergeSort 完成，同时根据您在环境中可以访问的对象，您可以使用线程安全的“并发”集合，进而允许您将数组拆分为插入到集合中的子数组多个线程。如果您将分配给每个线程的子数组重叠一个元素，则扫描排序列表也可以并行化，从而防止重复对中的一项在一个子数组中，而另一个在下一个子数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T18:47:30.027

也许还有另一种考虑分析的方法？

同意，最坏的情况是 O(N^2)。但最好的情况是 O(1)。

纯粹看只有`equal`，并且值的范围是未知的，那么可以公平地说只有一种方法可以得到 N^2，那就是当所有的值都是不同的或不相等的时候？

同样，只有一种方法可以保证在 1 个测试中找到重复项，即所有值都相等。

有很多方法不可能在找到相同的对之前比较所有对象。如果有 N/2 对、N/3 三元组、N/4 个四元组、N/sqrt(N) 组 sqrt(N) 重复项等，在找到一对，即重复项之前必须比较多少？

我认为这就像“通过从具有未知数量的相同袜子组的袜子抽奖中选择一对袜子，一组中有两个或多个相同的袜子”。袜子抽奖的所有者通过购买未知数量的相同袜子来补充抽奖，并在袜子上有洞时将其扔掉。我们不知道袜子磨损的速度有多快，也不知道主人买袜子的速度有多快。

平均*而言*，我们不会期望*比*N^2 更好的性能吗？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-10-15T18:11:11.223

您可以使用修改后的快速排序来解决此问题。如果不是比较 > 你只是用相等运算符替换它。修改后的快速排序会将项目组合在一起。

那么你所要做的就是寻找条纹来寻找骗子。

看看这个例子。

[https://repl.it/@fernandozamoraj/DearJollySynergy](https://repl.it/@fernandozamoraj/DearJollySynergy)

# html - 使用 CSS 动画缩放居中 div 时出现异常行为

> ID：10127954
> 
> 赞同：1
> 
> 时间：2012-04-12T16:40:23.577
> 
> 标签：html, css, css-transitions

我有一个垂直 + 水平居中的 div，当使用 CSS 动画调整大小时，它会显示不稳定、摇晃的运动。

div 绝对定位，具有固定的宽度/高度和负边距。

动画本身只是在两组不同的固定宽度/高度和负边距值之间切换，并设置了自定义过渡属性。

几乎感觉负边距以不同的速度在宽度和高度上进行动画处理。

我尝试使用 jQuery`animate()`而不是更改使用的 CSS 过渡（线性、夸脱等），`css()`但它们产生相同的结果。

如果它适用于 IE >= 8，是否有人能够解释为什么会发生这种情况，并且可能是一种更好的方法来做到这一点？

**示例：http:**
[//jsfiddle.net/p4B3S/1/](http://jsfiddle.net/p4B3S/1/)

**HTML**

```
<div class="outer">
    <div class="inner">
        +
    </div>
</div>
<button>toggle</button>​ 
```

**CSS：**

```
.outer {
    /* easeOutQuart */
    -webkit-transition: all 750ms cubic-bezier(0.165, 0.840, 0.440, 1.000); 
       -moz-transition: all 750ms cubic-bezier(0.165, 0.840, 0.440, 1.000); 
        -ms-transition: all 750ms cubic-bezier(0.165, 0.840, 0.440, 1.000); 
         -o-transition: all 750ms cubic-bezier(0.165, 0.840, 0.440, 1.000); 
            transition: all 750ms cubic-bezier(0.165, 0.840, 0.440, 1.000);

    position: absolute;

    width: 200px;
    height: 200px;

    left: 50%;
    top: 50%;

    margin-left: -100px;
    margin-top: -100px;

    outline: 1px solid red;       
}

.inner {
    position: absolute;

    width: 40px;
    height: 40px;

    top: 50%;
    left: 50%;    

    margin-left: -20px;
    margin-top: -20px;

    text-align: center;

    line-height: 40px;

    outline: 1px solid blue;    
}

button {
    width: 100px;
    height: 50px;
} 
```

**jQuery**

```
$button = $('button');
$outer = $('.outer');

$button.toggle(function() {
    $outer.css({
        'width': '100px',
        'height': '100px',
        'margin-left': '-50px',
        'margin-top': '-50px'
    });
}, function() {
    $outer.css({
        'width': '200px',
        'height': '200px',
        'margin-left': '-100px',
        'margin-top': '-100px'        
    });    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T03:41:44.813

我没有代表简单评论，所以我会在这里给你我的意见。IE8.0.7601.17514 64 位没有过渡。它要么大要么小.. 在我的 FF11 上以 1920x1080 和 1440x720 运行时，过渡似乎完美无缺，但是，当我使用`Web Developer Toolbar`插件将屏幕大小调整为 1280x720 并点击切换时，红色框过渡，蓝色的盒子静止不动，黑色的小十字线在各处振动和弹跳；在 800x600 时，红色框正确过渡，但中间的蓝色框之前是静态振动的，可以称为摇晃，在 640x480 时，一切都在振动和反弹。基于此，我不得不推断它必须这样做您的 px 定义的大小和相对于屏幕大小/分辨率的固定位置，而不是其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T23:16:48.867

我认为答案在于实现**子像素值的舍入。**

据我所知，Chrome 27.0 似乎没有这个问题，但对于大多数其他浏览器，我相信它仍然没有解决。

> 渲染引擎应该如何发挥这种行为并不是由 CSS 规范规定的，而是由实现来按照它认为合适的方式进行渲染。

上面的引述来自 John Resig，他在 subjet 上发表了一篇有趣的文章——以及关于这是否真的是一种理想的浏览器行为的激烈评论：http: [//ejohn.org/blog/sub-pixel-problems-in-css/](http://ejohn.org/blog/sub-pixel-problems-in-css/)

# visual-studio-2010 - 如何快速确定 Visual Studio 2010 字体和颜色显示项目名称？

> ID：10127955
> 
> 赞同：12
> 
> 时间：2012-04-12T16:40:30.420
> 
> 标签：visual-studio-2010, colors, customization

是否有一个热键或加载项/插件可以让我将光标放在 Visual Studio 2010 中的文本中，或者带我到实际的“显示项目”，或者至少告诉我哪些显示项目在该文本上是“活动的” ?

大多数时候，我不知道显示项目名称是什么，它会改变我在编辑器中看到的内容。我目前只是在循环浏览无数显示项目时寻找我在编辑器中看到的前景色和背景色。

我知道这是一厢情愿的想法，但是如果我可以直接转到正确的显示项目或至少看到光标所在文本的名称，它会使自定义颜色等变得容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T13:45:01.590

也许这可以帮助以下代码可以编写在点击事件或计时器中：

```
With RichTextBox28
.Find("YourText")
If .SelectedText = "YourText" Then .SelectionColor = System.Drawing.Color.Blue
End With 
```

# jquery - 将表单标签内的所有控件移动到 div

> ID：10127959
> 
> 赞同：0
> 
> 时间：2012-04-12T16:40:46.243
> 
> 标签：jquery, css

这是我用来将 div 添加到页面的 jQuery 代码。

```
var div = jQuery(document.createElement('div'));
             div.attr('id', 'divFormWrapper');

             div.css({
                 "position": "absolute",
                 "top": 0,
                 "left": 0,
                 "width": "100%",
                 "height": "100%",
                 "overflow": "auto",
                 "-webkit-overflow-scrolling": "touch",
                 "background-color": "orange",
                 "border": "none",
                 "z-index": 0,
                 "display": "block"
             });

             jQuery('form').wrap(div); 
```

它在表单标签之前添加了 div 标签。我需要它在表单标签之后添加 div 标签。

```
 <div id="divFormWrapper" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow-x: auto; overflow-y: auto; background-color: red; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; z-index: 0; display: block; ">
 <form name="Form1" method="post" id="Form1">

 controls.......
 </form>
 </div> 
```

这就是我需要它做的。

```
 <form name="Form1" method="post" id="Form1">
 <div id="divFormWrapper" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow-x: auto; overflow-y: auto; background-color: red; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-image: initial; z-index: 0; display: block; ">
 controls.......
 </div>
 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:45:36.403

而不是`.wrap()`使用[**`.wrapInner()`**](http://api.jquery.com/wrapInner/).

**[jsFiddle 示例](http://jsfiddle.net/j08691/S3LkG/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:45:49.910

```
jQuery('form').children().wrapAll(div); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:59:01.610

我会修改它以使用更具体的选择器

```
$('#form1').children().wrapAll('<div id="divFormWrapper"/>`); 
```

# objective-c - SA_OAuthTwitterEngine 和 MGTwitterEngine 转推不起作用

> ID：10127960
> 
> 赞同：0
> 
> 时间：2012-04-12T16:40:49.763
> 
> 标签：objective-c, mgtwitterengine

我正在开发具有 Twitter 功能的 iOS 应用程序。

为此，我使用 SA_OAuthTwitterEngine 和 MGTwitterEngine 包装器。我已经关注[了这篇](https://stackoverflow.com/questions/2528741/how-to-do-a-retweet-on-an-iphone-twitter-app-mgtwitterengine)文章。

我正在尝试从关注的用户时间线转发推文。

这是我发送/接收的：

```
2012-04-12 18:34:00.291 Project[13605:207] INFO -> Twitter URL: https://api.twitter.com/1/statuses/retweet/190459190869753856.xml
2012-04-12 18:34:00.292 Project[13605:207] INFO -> retweet response: 0AFF2EF9-6BCC-4B1E-B65A-02BD24A38C18 
```

在这里，我将要转发的所选推文的 id 字段传递给 API。但是在执行该方法后，转发的内容不会出现在用户时间轴中，我正在获取用户推文和用户转发的推文。

我在这里失去了什么？

据此，[对](https://dev.twitter.com/docs/api/1/post/statuses/retweet/:id)Twitter API 的请求是可以的。我已经检查了 twitter 中设置的应用程序权限，并且拥有所有权限：读/写和直接消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:25:41.573

我在[这篇](https://stackoverflow.com/questions/4707048/mgtwitterengine-fav-a-tweet/)文章中找到了解决方案。

必须做的更改是将 updateID 参数视为 NSString 而不是 unsigned long。

# c# - 在调用外部 C 库时编组结构

> ID：10127967
> 
> 赞同：1
> 
> 时间：2012-04-12T16:41:27.427
> 
> 标签：c#, .net, pinvoke, marshalling

我在调用外部库函数时编组结构时遇到了一些麻烦。我没有从调用本身得到任何错误，但是该函数返回一个错误代码，表明它没有正确理解传入的值。

这是C函数的签名

```
DLLExport int connect(Client handle, connectOptions* options); 
```

这是我的内部功能

```
[DllImport("some.dll", CharSet = CharSet.Auto, ExactSpelling = false,
        CallingConvention = CallingConvention.Cdecl)]
    private static extern int connect(IntPtr client, connectOptions options); 
```

`connectOptions`这是我正在使用的结构的规范

```
char    struct_id [4]
int     struct_version
int     keepAliveInterval
int     cleansession
int     reliable
willOptions *   will
char *  username
char *  password
int     connectTimeout
int     retryInterval 
```

最后是我的应用程序中的课程

```
[StructLayout(LayoutKind.Sequential)]
public class connectOptions
{
    public byte[] struct_id;
    public Int32 struct_version;
    public Int32 keepAliveInterval;
    public Int32 cleansession;
    public Int32 reliable;
    public willOptions will;
    [MarshalAs(UnmanagedType.LPStr, SizeConst = 128)]
    public string username;
    [MarshalAs(UnmanagedType.LPStr, SizeConst = 128)]
    public string password;
    public Int32 connectTimeout;
    public Int32 retryInterval;

    public connectOptions()
    {
        struct_id = Encoding.ASCII.GetBytes("WXYZ");
        struct_version = 0;
        keepAliveInterval = 20;
        cleansession = 1;
        reliable = 0;
        username = string.Empty;
        password = string.Empty;
        connectTimeout = 10;
        retryInterval = 1;
        will = null;
    }
}

[StructLayout(LayoutKind.Sequential)]
public class willOptions
{
    public byte[] struct_id;
    Int32 struct_version;
    [MarshalAs(UnmanagedType.LPStr, SizeConst = 128)]
    public string topicName;
    [MarshalAs(UnmanagedType.LPStr, SizeConst = 128)]
    public string message;
    public Int32 retained;
    public Int32 qos;

    public willOptions()
    {
        struct_id = Encoding.ASCII.GetBytes("VWXY");
        struct_version = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:47:51.070

我认为你必须`struct_id`像这样装饰：

```
[MarshalAsAttribute(UnmanagedType.ByValArray, SizeConst=4, ArraySubType=UnmanagedType.U1)] 
public byte[] struct_id; 
```

否则 C# 结构将包含对数组的引用，而 C++ 结构包含实际的 4 字节数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:52:54.477

您需要将 a 添加`SizeConst`到`struct_id`and 并将其从`username`and中删除`password`。该`SizeConst`参数指示数组或字符串的内存在结构内存储为常量大小的数组，而不是指针。

例如以下是有效的：

C：

```
struct c_struct {
   char value[100];
} 
```

C＃：

```
public struct c_struct {
     [MarshalAs(UnmanagedType.LPStr, SizeConst = 128)]
     public string value;
} 
```

你的结构定义应该是：

```
[StructLayout(LayoutKind.Sequential)]
public class connectOptions
{
    [MarshalAsAttribute(UnmanagedType.ByValArray, SizeConst=4, ArraySubType=UnmanagedType.U1)]
    public byte[] struct_id;
    public Int32 struct_version;
    public Int32 keepAliveInterval;
    public Int32 cleansession;
    public Int32 reliable;
    public willOptions will;
    public string username;
    public string password;
    public Int32 connectTimeout;
    public Int32 retryInterval;

    public connectOptions()
    {
        struct_id = Encoding.ASCII.GetBytes("WXYZ");
        struct_version = 0;
        keepAliveInterval = 20;
        cleansession = 1;
        reliable = 0;
        username = string.Empty;
        password = string.Empty;
        connectTimeout = 10;
        retryInterval = 1;
        will = null;
    }
} 
```

# operating-system - 如何防止在独立环境中编译出全局对象

> ID：10127969
> 
> 赞同：2
> 
> 时间：2012-04-12T16:41:38.013
> 
> 标签：operating-system, x86, g++, assembly

我在不同的编译单元中创建全局对象，这些对象是在自制的启动代码中构建的：

```
.startup:
    mov ebx, start_ctors
    jmp .ctor_loop
.call_ctor:
    call [ebx]
    add  ebx, 4 
.ctor_loop:
    cmp  ebx, end_ctors
    jb   .call_ctor

    call main 
```

我需要这样做才能在独立的环境中执行我的应用程序。但是，我将`i586-elf-g++`(4.6.0) 与以下命令行选项一起使用：

```
-march=i386 -masm=att -std=c++0x -ffreestanding -fno-builtin -nostdlib -nostartfiles -nodefaultlibs -fno-rtti -fno-exceptions -O1 
```

我的链接器脚本如下所示：

```
OUTPUT_FORMAT(binary)
ENTRY(start)
SECTIONS
{
    . = 0x8000;

    .text ALIGN(0x1000) : { *(.text) }

    .rodata ALIGN(0x1000) :
    {
        start_ctors = .;
        *(.ctor*)
        end_ctors = .;

        start_dtors = .;
        *(.dtor*)
        end_dtors = .;

        *(.rodata*)
    }

    .data ALIGN(0x1000) : { *(.data) }
    .bss  ALIGN(0x1000) : { *(.bss)  }
} 
```

`g++`不会将每个构造函数都包含在构造函数列表中。如果我删除任何优化（通过使用命令行选项`-O0`），那么一切正常......

# elasticsearch - 具有动态键的对象的 Elasticsearch 映射

> ID：10127971
> 
> 赞同：3
> 
> 时间：2012-04-12T16:41:43.087
> 
> 标签：elasticsearch

我有这个映射的简单文档：

```
'product': {
  'properties': {
    'name': { 'type': 'string' },
    'shops': { 
      'type': 'object', 
      'index_name': 'shop', 
      'properties': {
        'name': { 'type': 'string' },
        'url': { 'type': 'string' },
        'price': { 'type': 'integer' },
      }
    }
  }
} 
```

文档如下所示：

```
{ 
  'name': 'Kindle', 
  'shops': [ 
    { 'name': 'amazon', 'url': 'http://...', 'price': 79 },
    { 'name': 'ebay', 'url': 'http://...', 'price': 99 }
} 
```

但我想以这种格式存储文档：

```
{
  'name': 'Kindle',
  'shops': {
    'amazon': { 'url': 'http://...', 'price': 79 },
    'ebay': { 'url': 'http://...', 'price': 99 }
  }
} 
```

有没有办法为此进行映射？或者我应该只创建对象“商店”并使其保持无模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:42:54.763

您可以使用带有 path_match ("shops.*") [1] 的 dynamic_template。

[1] [https://www.elastic.co/guide/en/elasticsearch/reference/1.4/mapping-root-object-type.html](https://www.elastic.co/guide/en/elasticsearch/reference/1.4/mapping-root-object-type.html)

# python - 从网页中提取文本，使用 Perl/Python 进行处理，然后使用添加的链接重建页面

> ID：10127973
> 
> 赞同：0
> 
> 时间：2012-04-12T16:41:46.587
> 
> 标签：python, perl, nlp, html-parsing

我正在构建一个 Web 应用程序，它处理网页中的文本，添加指向某些实体的链接，然后完全按照原样重新显示页面，但添加了一些链接。我的服务器端代码在 Perl 和 Python 中，我目前正在使用 HTML::Parser 从页面中提取文本。我可以毫无问题地清理标记、提取和处理文本，但我想完全按原样显示原始页面，只是在以前未链接的文本中添加了一些链接。

我希望找到最好的方法来重新显示完全相同的页面，并将链接添加到文本中的某些单词或短语。所有原始标记都应完全保留在提取文本之前的状态。

我已经彻底搜索过，但我找不到这个问题的精确解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:03:27.903

我确实知道 Python 有一个用于打开网页的模块，称为 urllib：

```
import urllib
url = 'https://www.google.com/'
page = urllib.urlopen(url)
print page.read()    
#page.read is the url's source code, so you would print the source  code here. 
```

您还可以使用 python 保存一个新的 html 文件，如下所示：

```
page = page.read()
file = open('url.html', 'w')
file.writelines(page)
file.close() 
```

在这两者之间，您可以修改 html 源代码。请记住，如果您不知道如何保存页面正在使用的文件，这些网页看起来会很傻。希望这可以帮助。

# assembly - 如果相对为零则跳转 1

> ID：10127977
> 
> 赞同：0
> 
> 时间：2012-04-12T16:42:06.773
> 
> 标签：assembly, x86

我有以下 asm 代码（x86）。

```
.input:
mov ah, 00h         ; get key from keyboard buffer
int 16h         ; interrupt 16h 
mov dl, al      ; move ASCII code into dl
mov ah, 02h     ; function 02
int 21h         ; interrupt 21h
mov ah, 0Eh     ; tell the BIOS to print the character in the AL register
mov al, dl      ; copy dl into al
int 10h         ; print al
sub al,0Dh      ; check if it's carriage return
jz 01h          ; jump relative 1 (to skip newLine)
call newLine        ; add CR LF
jmp .input      ; loop 
```

但是，如果零指令没有按预期（希望）工作，即 jz 01h，则跳转。

我想跳过相对的 1 条指令（或向 IP 加一条），以跳过 call newLine 子程序。

目前，当我按下回车键并调用 jz 指令时，我相信程序在程序运行的早期就绝对跳跃，因为一段代码。

有任何想法吗？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:47:22.010

Jump 01h 实际上不会跳过调用，因为它计算的是字节数，而不是指令数。调用指令由多个字节组成。为什么不在调用后添加另一个可以跳转的标签，例如 jz .afterCall？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:48:18.940

关于什么

```
jz _no_newLine      ; jump 
call newLine        ; add CR LF
_no_newLine:
jmp .input          ; loop 
```

# c++ - 为什么名称修饰不标准化

> ID：10127982
> 
> 赞同：35
> 
> 时间：2012-04-12T16:42:23.940
> 
> 标签：c++, name-mangling

我只是想知道为什么名称修饰从未被 C++ 标准标准化。显然，拥有不同的名称修饰算法会损害互操作性[1]，而且我看不出让它实现定义的任何优势。

也就是说，与调用约定或原语大小相反，机器本身并不关心甚至不知道函数是如何被调用的。那么为什么它没有标准化，为什么它仍然没有标准化呢？编译器在过去无论如何都更改了版本之间的规则。

[1] 所有那些将功能输出为`extern "C"`说话量的人。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-12T16:49:20.270

该标准不涉及实施细节。有很多很多的事情取决于实现，并且会阻止程序一起工作：类的布局方式， 的结构`vtable`等。通常，如果编译器更改其中任何一个，编译器就会更改名称修饰。这是有意的，因为它可以防止无法链接的代码。

给定平台可以定义 C++ ABI；所有遵循它的编译器都将使用兼容的实现，并具有通用名称修饰。然而，这对平台供应商来说是一个问题；无论出于何种原因，很少有供应商定义了 C++ ABI。

之所以`extern "C"`有效，是因为几乎所有平台都定义了 C ABI。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-12T17:03:00.740

该标准实际上并不需要名称修饰。就此而言，该标准不需要 IEEE 浮点数或任何其他东西。

在它可以依赖广泛的 ABI 之前， GCC 实际上已经竭尽全力使用与其竞争对手[不同的名称修改方案：](http://gcc.gnu.org/onlinedocs/gcc-3.1.1/gcc/Interoperation.html#Interoperation)

> G++ 不像其他 C++ 编译器那样进行名称修改。这意味着用一个编译器编译的目标文件不能与另一个编译器一起使用。
> 
> 这种效果是有意的，可以保护您免受更微妙的问题的影响。编译器在 C++ 实现的许多内部细节方面存在差异，包括：类实例的布局方式、多重继承的实现方式以及虚函数调用的处理方式。如果名称编码相同，您的程序将链接到其他编译器提供的库 - 但程序在运行时会崩溃。然后在链接时而不是在运行时检测不兼容的库。

名称修改也比许多程序员意识到的要复杂。例如，标准如何[为 C++ 可以运行的所有平台指定可接受的调用约定](http://en.wikipedia.org/wiki/Calling_convention)？`stdcall`即使 RISC 系统通常在寄存器而不是堆栈中传递参数，是否应该要求 RISC 系统支持 x86 ？

# perl - 在 Perl 中规范化 Unicode 字符串

> ID：10127987
> 
> 赞同：4
> 
> 时间：2012-04-12T16:42:40.020
> 
> 标签：perl, unicode

我想将一些来自 UTF-8 数据库的文本输出到 CP1252（又名 Latin1）中的文件。为此，我使用 Text::Iconv 工作正常**，除非**要转换的字符串中的字符被分解。这是否是 iconv 库的失败是我提出的一个问题，但答案并不明显。由于 iconv 在组合字符上工作正常，解决方案是首先规范化我的字符串，但我似乎无法做到这一点：

```
use strict;
use warnings;
use Data::Hexdumper qw(hexdump);
use Unicode::Normalize;

my $v =  "É"; # E=U+0045 followed by combining ´=U+0301\. UTF-8: 0x45CC81
print "'$v'\n";
print hexdump($v);

my $n = NFC $v;  # should be É=U+00C9\. UTF-8: 0xC389
print "'$n'\n";
print hexdump($n); 
```

但这是我得到的输出：

```
'É'
  0x0000 : 45 CC 81 00 00 00 00 00 00 00 00 00 00 00 00 00 : E...............
'É'
  0x0000 : 45 CC 81 00 00 00 00 00 00 00 00 00 00 00 00 00 : E............... 
```

换句话说，NFC（转换为规范化表格 C）功能没有做任何事情。我错过了什么吗？我在 Mac OS X 10.7.3 上使用 Perl 5.12.3。

这只是我在 Perl 中处理文本的问题的开始，这是我没有预料到的。谢谢你的帮助。

编辑：一些上下文似乎很有用。当然，我做的例子可以通过一个`use utf8`子句得到很大帮助。我的实际问题当然不是字符串文字。

首先，我从答案中意识到我需要了解很多关于 Perl 的知识。事实上，我不是 Perl 程序员，而是一个完全不会出现这些问题的 Objective-C/Cocoa 程序员。

所以我开始阅读，我发现 Perl 文档很混乱，例如当它谈到本机编码与 UTF-8 不同时。它没有说的是如何为 UTF-8*是*本机编码的 Mac OS X 平台翻译它。

在任何情况下，上下文都是我的程序以 texte 文件生成输出，这些文件可以具有多种格式（包括 csv 和 Unimarc）和多种编码（最常见的四种是 UTF-8、CP1252、MARC8 和 ISO-5426）。用户的选择。

它从某些数据库（当前为 mySQL 或 SQL Server）获取输入，其中数据通常以 UTF-8 编码（但有时以 CP1252 编码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:22:07.087

您缺少的`$v`是设置为“E”字符和组合尖锐变音符号的**utf-8 编码**，而不是组合尖锐变音符号本身。为了解决这个问题，你需要做类似的事情

1) `use utf8`-- 导致 Perl 自动对你的源代码进行 utf-8 解码

2) 显式解码`$v`

```
my $v = chr(0x45) . chr(0xCC) . chr(0x81);
use Encode;
$v = Encode::decode('utf-8', $v);    # now $v is 0x45 0x301 
```

3）用于`chr`明确设置`$v`为您的意思

```
my $v = chr(0x45) . chr(0x301); 
```

我不会真的推荐数字 (2)，但我将其作为一种方式来说明当你不这样做时你的脚本会发生什么`use utf8`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:04:50.587

Ohoho，在我下面的原始消息中，我似乎错过了关于分解字符的基本信息。刚刚为您的时髦信尝试了以下内容`É`：

```
perl -C3 -lwe '$_ = qq(\x45\x{0301}); print' 
```

在 Cygwin 上适用于 5.10.1。

* * *

我可能遗漏了一些东西......但看起来你在这里采用了一种非常低级的文本处理方法。

首先，您是说您从编码为 UTF-8 的数据库中获取数据。没关系。因此，如果驱动程序没有自动检测编码，请考虑告诉它。您并没有说您正在使用哪个数据库，但您可能会通过 grepping [DBI 手册](https://metacpan.org/module/DBI)以及`DBD::*`您用于“utf”或“encoding”的驱动程序 ( ) 找到一些东西。

然后，给定数据库连接的适当编码设置，您的文本应该以文本的形式到达 Perl。只是文本，没有编码。例如，就像在 Java 中一样。是的，字符串有一些内部编码，但你不应该打扰它是什么。

然后，在写入文件时，只需使用以下代码：

```
open my $fh,  '>:encoding(CP1252)', $filename or die "open $filename: $!";
print $fh $text_from_db;
close $fh; 
```

这应该就是您需要做的所有事情。

您使用的任何特殊原因`Text::Iconv`？我认为你应该通过使用[`Encode`模块](https://metacpan.org/module/Encode)来获得。但是对于您问题中概述的工作，您甚至不需要它。

您使用的是 Perl 5.12.3，因此 Unicode 处理应该适用于所有奇怪的边界情况。这些问题主要与几年前的 perls 有关。我认为 5.12 和 5.10 系列应该没问题。手头没有详细信息，但我曾经不得不使用旧的 5.6.1 进行 Unicode 工作，它的 Unicode 支持是实验性的，这太可怕了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T17:57:19.623

你没有告诉 Perl 你的文件是 UTF-8。

你没有告诉 Perl 如何编码你的输出。

```
use strict;
use warnings;

use utf8;                             # UTF-8 source.
use open ':std', ':encoding(UTF-8)';  # UTF-8 output. Don't forget to chcp 65001..

use Data::Dumper       qw( Dumper );
use Unicode::Normalize qw( NFC );

local $Data::Dumper::Useqq = 1;    
local $Data::Dumper::Terse = 1;
local $Data::Dumper::Indent = 0;

my $v =  "\x{0045}\x{0301}";
print "'$v'\n";
print Dumper($v), "\n";

my $n = NFC $v;
print "'$n'\n";
print Dumper($n), "\n"; 
```

（我在加载 Hexdumper 时遇到问题。）

# cac - DoD CAC PDF417 压缩

> ID：10127988
> 
> 赞同：2
> 
> 时间：2012-04-12T16:42:40.063
> 
> 标签：cac

有人知道在哪里解释或记录了 PDF417 条形码（CAC 前面）中使用的 EDIPI / CII 压缩方法吗？

我找到的最接近的参考是这个文件：[http](http://www.cnic.navy.mil/navycni/groups/public/@hq/@cacpmo/documents/document/cnicp_a282327.pdf) ://www.cnic.navy.mil/navycni/groups/public/@hq/@cacpmo/documents/document/cnicp_a282327.pdf但它并没有真正解释压缩 -将字符串转换为 base-32 似乎并没有得到相同的结果。

显然是一个非常深奥的问题，但任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:05:03.807

我遇到了类似的问题，所以我写了这段代码。

```
Public function base32(stringin as string) as double
    ref = "0123456789abcdefghijklmnopqrstuv"
    stringin = lcase$(stringin)
    x& = 0
    if len(stringin) = 0 then base32 = 0: exit function
    for n% = len(stringin) to 1 step -1
       base& = (32 ^ num)
       if base& = 0 then base& = 1
       v = instr(1, ref, mid$(stringin, n%, 1)) - 1
       if v < 0 then base32 = 0: exit function  'invalid character detection
       x& = x& + (v * base&)
       num = num + 1
       next n%
    base32 = x&
end function

public function mildate(stringin as string) as string
    mildate = dateadd("d", base32(stringin), "01/01/1000")
end function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T03:33:29.083

我有一份官方 DoD 文件的副本，其中解释了条形码的布局方式，但我相信它位于受限站点上。您和 Matthew 是正确的，压缩涉及将 base-32 数字转换为数字，但只有某些数据元素被压缩，特别是任何可能被视为个人信息（SSN、出生日期等）的数据元素。您最好通过 www.cac.mil 获得一份 CAC 开发人员工具包 (CDK)。

# java - 如何在 Swing 中点击图片？

> ID：10127995
> 
> 赞同：0
> 
> 时间：2012-04-12T16:43:08.167
> 
> 标签：java, swing, popup, icons, jtable

我做了一个用户的jTable。我想做的是，在行的点击事件上显示光标附近的用户照片。（我的意思是我想显示类似工具提示的东西）这可能吗？我该怎么做？像这样。但我的应用程序是桌面应用程序 [http://rndnext.blogspot.com/2009/02/jquery-ajax-tooltip.html](http://rndnext.blogspot.com/2009/02/jquery-ajax-tooltip.html) ![图片将显示在图片附近](../Images/621a45e2a490f5f05082b05455c08b1b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:48:58.373

1）谷歌。2) [http://www.roseindia.net/java/example/java/swing/ImageToolTip.shtml](http://www.roseindia.net/java/example/java/swing/ImageToolTip.shtml)

```
import javax.swing.*;
import javax.swing.text.html.*;
import java.awt.*;
import java.awt.event.*;

public class ImageToolTip {
    public static void main(String[] args) {
        JFrame frame = new JFrame("Image Tool Tip Frame");
        JComponent button = new JButton("Cut");
        String tooltiptext = "<html>" + "This is the " + "<img src=\"file:cut.gif\">" + " tool tip text." + "</html>";
        button.setToolTipText(tooltiptext);
        JPanel panel = new JPanel();
        panel.add(button);
        frame.add(panel, BorderLayout.CENTER);
        frame.setSize(400, 400);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```