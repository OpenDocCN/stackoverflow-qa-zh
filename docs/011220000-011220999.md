# StackOverflow 问答 11220000-11220999

# file-processing - 保护网络上的文件和目录

> ID：11220001
> 
> 赞同：0
> 
> 时间：2012-06-27T05:35:03.527
> 
> 标签：file-processing

大多数情况下，我们通过 HTML 中的上传字段上传内容，并将文件上传到应用程序根目录或其他位置的目录中，并将路径存储在数据库中。

如果要为特定用户上传文件，则用户可以从他/她的仪表板下载。是的，一切正常。但是如果他知道另一个用户的文件的 URL，他就可以下载它。我们如何保护它？？？

请我很着急，帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:05:40.153

也许您可以将上传的文件发送到特定目录。将文件上传到 1) 每个用户的单独目录，或 2) 每个用户组/级别的单独目录。使用登录脚本分配用户 ID 或用户组级别的凭据，并根据目录进行检查。

例如，对于每个用户： 将 user123 的文件上传到目录“user123”。设置权限，以便只有用户 ID 为“user123”的登录凭据才能访问。

对于组级别：将同一组（例如级别 1）的任何用户的文件上传到目录“group1”。设置权限，以便只有组级别为“1”的登录凭据可以访问。

# c# - Sql Server 以编程方式从远程客户端恢复/备份数据库

> ID：11220005
> 
> 赞同：5
> 
> 时间：2012-06-27T05:35:17.210
> 
> 标签：c#, sql-server, backup, database-restore

我想从 C# 中的客户端桌面应用程序备份和恢复服务器中的数据库。我已经找到了一些以编程方式进行备份/恢复的示例代码，但是它在服务器计算机上备份并仅从服务器计算机恢复。用户应该能够通过客户端应用程序从客户端选择备份文件或在客户端计算机中创建备份文件。

如何进行远程备份/恢复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T14:48:53.280

我发现了一种非常有用的远程备份方法：http: [//www.codeproject.com/Articles/33963/Transferring-backup-files-from-a-remote-SQL-Server](http://www.codeproject.com/Articles/33963/Transferring-backup-files-from-a-remote-SQL-Server)。但是，远程恢复的问题仍然存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T05:58:43.670

**在服务器**上进行共享。然后，如果要还原数据库，则从客户端计算机复制备份；如果要在客户端存储备份，则从那里将备份复制到客户端计算机。
当然，客户端必须对此共享具有读/写权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:56:25.630

只是一个想法。

进行备份时，只需将备份文件名和位置存储在数据库表中。这样您就可以将其展示给用户进行恢复。

您仍然可以使用带有动态备份位置参数的数据库代码还原。

# java - Android中的游戏时间

> ID：11220009
> 
> 赞同：1
> 
> 时间：2012-06-27T05:35:58.953
> 
> 标签：java, android

是否有直接的方法来跟踪 Android (java) 中的游戏时间？例如，为了无论帧速率如何都保持运动流畅，我需要考虑自上一帧以来经过的时间量。这在 XNA 中很容易做到（因为它已经为您设置好了），但即使没有游戏引擎，您仍然可以在 C# 中使用 timeSpan。我尝试查找 java 的时间跨度，但它并没有拿出太多或那么长的手。是否存在处理帧到帧时序的等效的简写方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:41:34.007

那么有一个 Handler 类，它允许你运行一个具有一定延迟的线程。

```
postDelayed(Runnable action, long delayMillis) 
```

您可以使用它为线程设置特定的游戏时间。在这里将 delayMillis 设置为 33 会略高于每秒 30 帧。我很确定那里有适用于 Android 的游戏库，但是，对于此类问题会更​​有帮助。

您可以尝试手动获取每个实例之间的时间，如下所示：

```
long lastTime = 0; 

Thread {

    if (lastTime != 0) 
        elapsedTime = System.getTimeMillis() - lastTime;

    lastTime = System.getTimeMillis;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:56:49.407

您的游戏逻辑应该在独立于帧速率的单独线程中运行。然后在刷新屏幕时，您只需在当前状态下绘制对象。

当您确实需要能够测量时间时，请使用 SystemClock.elapsedRealTime

# sql - 向 HBase 添加 SQL 函数

> ID：11220011
> 
> 赞同：0
> 
> 时间：2012-06-27T05:36:19.733
> 
> 标签：sql, hbase, vertica

我们在我的办公室使用了很多 SQL，但我们最终希望迁移到 HBase，因为它是新的技术浪潮。但是 SQL 具有 HBase 没有的分组和聚合函数和方程式等功能，我们正在研究如何将这些功能放入 HBase。我环顾四周，但没有发现任何对开始实施很有用的东西。关于我们如何将 SQL 函数移植到 HBase 有什么建议吗？甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T11:49:41.153

看看开源项目[Phoenix](https://github.com/forcedotcom/phoenix)。
Phoenix 是 HBase 上的 SQL 皮肤，作为客户端嵌入式 JDBC 驱动程序交付，为 Salesforce.com 上的 HBase 用例提供支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:25:50.073

我不确定您是否知道，因为您在帖子中放置了“vertica”标签，但您可以同时使用两者。具体来说，Vertica 有很多 Hadoop 集成。

您应该为工作使用正确的工具或工具组合，而不是因为它是新的而担心使用某些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T04:44:09.820

使用 Phoenix SQL，由于使用服务器端协处理器进行数据聚合，查询并行化存储和访问 HBase 数据库，因此具有快速的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:44:37.090

看看 Apache Hive。它在我们的 Hadoop 集群之上为我们提供了类似 SQL 的接口。除此之外，它还为我们充当了 Hadoop 集群上的数据仓库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T14:18:12.267

看看这个讨论：[Group by In HBase](https://stackoverflow.com/questions/9126489/group-by-in-hbase) 它解释了 HBase 的分析能力是什么。

# asp.net-mvc-3 - 传入字典的模型项的类型为“PagedList.PagedList”，但此字典需要类型为..的模型项。

> ID：11220012
> 
> 赞同：0
> 
> 时间：2012-06-27T05:36:20.390
> 
> 标签：asp.net-mvc-3, partial-views, pagedlist

我正在用 mvc3 开发一个简单的项目。创建了两个模型客户和电话。在 CustomerController 中，我使用 PagedList 进行分页。我在客户的索引视图上显示了分页。我想在客户索引视图上显示最后 5 条记录调用列表。我为 Call 的索引视图创建了部分视图。我在客户索引页面上使用了部分调用视图，如下所示——

```
@Html.Partial("IndexCallPartial") 
```

但是在选择客户索引页面后显示错误。错误如下 -

```
The model item passed into the dictionary is of type 'PagedList.PagedList`1[graceCRM.Models.Customer]', but this dictionary requires a model item of type 'graceCRM.Models.Call'. 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:25:01.367

错误消息非常不言自明。您在其中调用`Html.Partial`助手的视图是`PagedList<Customer>`类的强类型。并且默认情况下`@Html.Partial("IndexCallPartial")`相当于`@Html.Partial("IndexCallPartial", Model)`. 这意味着它是一个实例`PagedList<Customer>`，将传递给您的部分。但是您的部分并不期望这种情况。错误消息告诉您它期望的实例。

因此，要解决此问题，您需要传递正确的实例：

```
@Html.Partial("IndexCallPartial", some_instance_of_the_correct_type_the_partial_expects) 
```

# caching - 如何找出哈希的含义？

> ID：11220015
> 
> 赞同：7
> 
> 时间：2012-06-27T05:36:26.413
> 
> 标签：caching, logging, hash

我们的日志中有很多对名为“09fe503e5898bcba55056542d470a803”的资源的奇怪请求，例如：

```
GET /cache/09fe503e5898bcba55056542d470a803
GET /something/cache/09fe503e5898bcba55056542d470a803
GET /something-else/cache/09fe503e5898bcba55056542d470a803 
```

我们没有像这样调用的资源或缓存条目，所以不明白这些调用来自哪里。

有趣的是，在这个哈希上的[谷歌搜索](https://www.google.com/search?q=%2209fe503e5898bcba55056542d470a803%22)会返回许多结果，就好像这个哈希有点特殊（如果我只改变一个字符，没有谷歌结果出现）。

有人知道这是什么意思吗？有没有办法找出这个哈希来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:45:26.617

请求的资源不一定是哈希 - 它**可能**只是**以十六进制编码**的固定大小的随机字节序列。

如果它是一个哈希，并且您已经**确定**了用于计算它的算法（MD5 等），您可以搜索一些**彩虹表**（映射到哈希的键的数据库），以尝试识别键（尽管我怀疑这会有任何好处）。

> 有趣的是，在这个哈希上的谷歌搜索会返回许多结果，就好像这个哈希有点特殊（如果我只改变一个字符，没有谷歌结果出现）。

有趣的观察，这表明该字符串很常见，但并未暗示它的来源。将[字符串转换为文本](http://www.string-functions.com/hex-string.aspx)不会显示任何有意义的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:38:45.667

我很确定这是一个随机的字母或字符。看起来它是MD5，所以我不会太担心它。另外，您的网站是做什么的，它是否与您的服务器通信？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:34:42.487

> 有趣的是，在这个哈希上的谷歌搜索会返回许多结果，就好像这个哈希有点特殊（如果我只改变一个字符，没有谷歌结果出现）。

IMO，哈希并不特殊，这与您的情况相同的应用程序生成它......

# java - JOptionPane 会降低应用程序性能？

> ID：11220018
> 
> 赞同：0
> 
> 时间：2012-06-27T05:36:40.840
> 
> 标签：java, swing, joptionpane

我正在检查以下条件并显示对话框

```
if(query.contains(tab))
        {
        JOptionPane.showMessageDialog(null,"Owner does not have privileges to access given table");
        } 
```

我想在显示对话框并且条件为真时。进一步的执行应该停止在那里。如何做到这一点？

JOptionPane 是否会降低应用程序性能？因为我的应用程序需要花费大量时间来显示对话框。

编辑：

```
 for(int i=0; i<ia.length; i++) 
      {

                tab=  ia[i].toString(); 
                    if(query.contains(tab))
                {
                    JOptionPane.showMessageDialog(null,"Owner does not have privileges to access given table");
                    break;
                }
        }
//rest code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:12:13.947

根据您对@Robin 回答的评论：

> 它会停止，直到用户处理对话框，但即使在对话框关闭后我也想停止进一步的执行，即我想停止执行上面 if 块之后的任务。
> 
> * * *
> 
> 请参阅编辑后的帖子。我想阻止其余代码部分，我该如何添加它？

在你的情况下你可以做的是：拿一个标志来决定是否执行其余的代码。就像是：

```
boolean executeCode = true; // boolean flag to decide
for(int i=0; i<ia.length; i++)  {
   tab=  ia[i].toString(); 
   if(query.contains(tab)) {
      JOptionPane.showMessageDialog(null,
                   "Owner does not have privileges to access given table");
      executeCode= false; // do not want to execute the rest of code
      break;
   }
}
if (executeCode) {
   //rest code
} 
```

[我不完全确定我是否已经很好地理解了您的问题，但是我根据我从您的上述评论中理解的内容发布了这个答案，并且在评论中也可能很难解释这一点。如果我错了或没有正确理解，请通知我。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:41:32.353

如该类的类javadoc中所述`JOptionPane`：

> 所有对话框都是模态的。每个 showXxxDialog 方法都会阻塞调用者，直到用户交互完成。

因此，进一步的执行将自动停止，直到用户处理对话框。

而且我从未遇到任何显示`JOptionPane`. 你如何确定它会降低你的表现？

# sql-server-2005 - 如何更改 SQL Server 中的语言和日期格式？

> ID：11220023
> 
> 赞同：13
> 
> 时间：2012-06-27T05:37:13.760
> 
> 标签：sql-server-2005, date-format

我正在使用 SQL Server 2005。当我执行时`DBCC USEROPTIONS`，我看到语言为 romana，日期格式为`dmy`.

我希望语言`us_english`和日期格式为`mdy`.

我怎样才能做到这一点？我最初有这些设置，但不知何故他们变成了 romana。

如何恢复为`us_english`日期和日期`dmy`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-27T05:43:45.627

您可以使用以下语法重置语言

```
set language 'us_english' 
```

为了查看所有语言及其日期格式，试试这个

```
select * from sys.syslanguages 
```

如果您需要永久更改语言，那么

*   去`Security`
*   `Logins`
*   右键单击您的用户名并选择`Properties`
*   将默认语言更改为`English`

即使您重新启动 SSMS，此更改也会持续存在

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-28T12:21:35.423

**前**

```
DBCC USEROPTIONS 
```

正在返回这样的东西：

![当前用户选项](../Images/e0719f618921873f12d2ea9f5f21cd13.png)

* * *

**要更改**您的或*UserLogin*配置，请运行：

```
USE [master]
GO

ALTER LOGIN [UserLogin] WITH DEFAULT_LANGUAGE=[us_english]
GO 
```

下一步 - 重新连接到 SQL（*注销*->*登录*）。

**后**

你会得到这个：

![当前用户选项](../Images/51f076f63f4bad92d936f5c5fde472ea.png)

# reflection - 如何在 SmallTalk (Pharo) 中获取消息发件人？

> ID：11220024
> 
> 赞同：1
> 
> 时间：2012-06-27T05:37:17.113
> 
> 标签：reflection, exception-handling, metaprogramming, smalltalk, pharo

我无法在 SmallTalk 中获取消息的发件人。我想要完成的是从第一个方法（A）调用的另一个方法（B）修改方法（A）的返回值。再次... A 调用 B，我希望 B 从 A 的上下文中返回一个值。

示例代码：

这将是 A：

```
A

| aResult aPartialResult |

aPartialResult := self B.

"do things with aPartialResult"

^aResult. 
```

这将是 B：

```
B

| aResult |

[ aResult := "do something" ]
                        on: Exception
                        do: ["make A return something"].
^aResult. 
```

问题是我希望 B 中可能引发的异常也可以在 B 中处理。这就是为什么我不只是在 B 中引发异常以在 A 中处理它并轻松地从那里返回。

我以为我可以使用 thisContext 来做到这一点，但发件人是零。得到一个关于为什么会这样的答案也没有什么坏处......

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:44:02.020

Guillermo，异常处理可以无缝地替换这里的一些坏主意：

1.  使用 thisContext （这*几乎*没有必要，通常是个坏主意）
2.  传递字符串，例如 '1|'、UserInterface invalidCartIdErrorMessage
3.  使用 return: 与这些字符串一起传递错误

此外，retrieveCart:onErrorReturnFrom: 做得太多了。使用所有错误处理程序，实际的逻辑会丢失。

所以，我要做的第一件事是创建 Error 子类来表示您的域概念，例如 AddBookError、CartExpiredError、InvalidCartError

然后你只需设置错误消息，可能像：

```
CartExpiredError>>initialize

    super initialize.
    self messageText: '1|', UserInterface cartHasExpiredErrorMessage. 
```

接下来的事情（实际上是两个步骤）是用私有访问器替换原始字典方法，它可以使用您的新错误类，如下所示：

```
timestampFor: aCartId

    ^ cartCreationDateAndTime at: aCartId ifAbsent: [ InvalidCartError signal ]. 
```

和

```
cartNumber: aCartId 

     ^ carts at: aCartId ifAbsent: [ InvalidCartError signal ].

Cart>>add: aQuantity booksWithISBN: aBookISBN

    fail ifTrue: [ AddBookError signal ]. 
```

现在，retrieveCart:onErrorReturnFrom: 可以变成：

```
retrieveCart: aCartId

    | aCartCreationDateAndTime |
    aCartCreationDateAndTime := self timestampFor: aCartId.
    Time now > (aCartCreationDateAndTime + 30 minutes) ifTrue:  [ CartExpiredError signal ].
    ^ self cartNumber: aCartId. 
```

最后，大大简化的 A 变为：

```
add: aQuantity booksWithISBN: aBookISBN toCart: aCartId

     | aCart |
    [aCart := self retrieveCart: aCartId.
    aCart add: aQuantity booksWithISBN: aBookISBN]
        on: Error
        do: [ :e |  ^ e messageText ].
    ^ '0|OK'. 
```

这仍然可以被清除（例如，为所有在 messageText 前面加上 '1|' 的错误类创建一个超类），显然你必须将这个简化版本应用到你的实际项目中，但是你可以开始看看异常是如何发生的吗？让你的生活更轻松？

[这](https://gist.github.com/3005341)是代码的工作模型，在 github 上通过了测试

nb 我注意到的另一件事是aCartCreationDateAndTime。将其作为购物车的属性似乎更自然，但在实际应用中这可能没有意义......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:15:47.073

一种简单的方法是 A 将一个带有内部返回的 Block 传递给 B，例如：

```
A
   | aResult aPartialResult |
   aPartialResult := self BonSpecialConditionDo: [:partial | ^partial].
   ...snip... 
```

然后

```
BonSpecialConditionDo: aBlock
    | partialResult |
    partialResult := self doSomethingPartial.
    ^[self doSomething]
        on: SomeException
        do: [:exc | aBlock value: partialResult] 
```

当心，捕捉异常被认为是危险的（你捕捉到太多东西）。

编辑：我刚刚在处理程序中删除了一个不必要的 return ^

编辑：用超能力做（但不要用锤子杀死苍蝇）

```
B
    | partialResult |
    partialResult := self doSomethingPartial.
    ^[self doSomething]
        on: SomeException
        do: [:exc | thisContext home sender home return: partialResult ] 
```

我以为您可以通过 Exception exc 访问 thisContext（这是实例变量 handlerContext），但是似乎没有任何方便的消息可以访问此内部状态...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:28:40.537

知道了！

这是一个：

```
A

| aResult aPartialResult |

aPartialResult := self BOnErrorReturnFrom: thisContext.

"do things with aPartialResult"

^aResult. 
```

这将是 B：

```
BOnErrorReturnFrom: aContext

| aResult |

[ aResult := "do something" ]
                        on: Exception
                        do: [aContext return: "whatever you want :)"].
^aResult. 
```

当我意识到关键字“thisContext”在 BlockClosure 中使用时，它不会返回声明块的 ContextPart，而是返回其他内容（但仍然不确定它是什么），这并不难。

回应肖恩：

我试图做的是避免重复代码。实现 A 和 B 的对象是 REST 接口的内部（模型端）部分，所以我希望它返回一个字符串并且只返回一个字符串（我不希望异常或与字符串对象不同的任何东西通过） . 在我的具体问题中，A（很抱歉打破了 Smalltalk 消息命名约定，但我认为现在更改它会导致进一步的混乱......）收到一个购物车 ID，并将对该购物车做一些事情。A 必须使用该 ID 检索购物车，对购物车进行一些验证，并在出现错误时返回临时消息（始终作为字符串）。此检索和验证代码将在必须检索购物车的每条消息中重复。

这是我最终得到的正确代码：

这是A：（不要注意#try 消息。它只是确保在没有被转换为字符串的情况下不会出现异常。如果有人知道如何以更好的方式做到这一点，请告诉我如何！）

```
add: aQuantity booksWithISBN: aBookISBN toCart: aCartId

    | aCart aContext |

    aContext := thisContext.

    ^self try: [

        aCart := self retrieveCart: aCartId onErrorReturnFrom: aContext.

        [aCart add: aQuantity booksWithISBN: aBookISBN]
                                                    on: Error
                                                    do: [ :anError | ^'1|', (self formatAsResponse: anError messageText) ].

        ^'0|OK'.
    ]. 
```

这是乙：

```
retrieveCart: aCartId onErrorReturnFrom: aContext

    | aCartCreationDateAndTime aCart |

    [aCartCreationDateAndTime := cartCreationDateAndTime at: aCartId asInteger.]
                                                                                    on: KeyNotFound 
                                                                                    do: [ aContext return: ('1|', (UserInterface invalidCartIdErrorMessage)).].

    (systemClock now > (aCartCreationDateAndTime + 30 minutes)) 
                                                            ifTrue:  [aContext return: ('1|', (UserInterface cartHasExpiredErrorMessage))].

    [aCart := carts at: aCartId asInteger.]
                                    on: KeyNotFound
                                    do: [ aContext return: ('1|', (UserInterface invalidCartIdErrorMessage))].

    ^aCart. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:56:02.013

> > 一个

| aResult aPartialResult |

aPartialResult := 自我 B.

“用部分结果做事”

^a结果。

> > 乙

| 结果 |

[ aResult := "do something" ] on: Exception do: ["make A return something"]。^a结果。

**我会把它写成**

> > 一个

| aResult aPartialResult |

aPartialResult := 自我 B. aPartialResult ifNotNil:[

“用 aPartialResult 做事”]。

^a结果。

> > 乙

| 结果 |

[ aResult := "do something" ] on: 例外 do: [:e|^nil]。^a结果。

**好吧，那就是我！！！**

# drupal - Apache solr 进程自动终止

> ID：11220025
> 
> 赞同：2
> 
> 时间：2012-06-27T05:37:21.263
> 
> 标签：drupal, solr

我将 Apache Solr 用于我的 Drupal 站点之一。我用 Java -Jar -Xmx256M start.jar 启动我的 Apache Solr 来修复内存限制。我在屏幕上运行我的 Apache，但有时我看到我的 Apache solr 实例自动停止/终止。在我的开发服务器中，我发现手动启动它非常困难。是否有任何解决方法可以阻止实例自动被杀死？

顺便说一句，以下是我在控制台中收到的一些警告“solrconfig.xml：已弃用，不再推荐使用。” “警告：不推荐使用和配置部分（但仍然有效）。请改用。”

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:52:20.347

我最初也有这个问题。我通过以 root 身份启动屏幕会话并在该会话中启动 Solr 来解决它。还可以尝试`nohup`在 java 命令之前添加一个，看看是否有效。

# vb.net - 从网站打开文件上传对话框时，出现“文件夹不可访问，访问被拒绝”错误消息

> ID：11220029
> 
> 赞同：2
> 
> 时间：2012-06-27T05:37:36.817
> 
> 标签：vb.net, file-upload, directory

我正在尝试将文件上传到我的网站。

每次上传对话框打开时，它都会尝试打开默认路径“C:\Windows\system32\config\systemprofile”。

除管理员用户外，所有计算机上的每个用户都无法访问此路径。

我什至尝试将此默认路径设置为“我的文档”，但我无法获得此路径运行时。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:14:24.553

Don't use the My Documents folder, try using Default User's Documents folder instead.

Also check here for more information: [Exceptions in Yesod](https://stackoverflow.com/questions/10133448/exceptions-in-yesod)

# ios - 如何在 iOS 中调整 UITabBarController 的大小？

> ID：11220031
> 
> 赞同：0
> 
> 时间：2012-06-27T05:38:17.143
> 
> 标签：ios, uitabbarcontroller

我`UITabBarController`在我的 iOS 应用程序中使用过。如您所知，该`UITabBarController's`尺寸固定在下面的屏幕上。我想`UITabBarController`用一些 CGRect 调整它的大小，因为我不想修复屏幕大小。

反正有这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:42:07.750

您可以通过访问标签栏框架来更新大小 -

```
CGRect tabBarFrame=self.tabBar.frame;

// Update the frame values
tabBarFrame.origin.y =;
tabBarFrame.origin.x =;
tabBarFrame.size.hieght =;
tabBarFrame.size.width =;
self.tabBar.frame = tabBarFrame; 
```

# php - 如何为这样的子域链接设置 URL 重写？

> ID：11220033
> 
> 赞同：0
> 
> 时间：2012-06-27T05:38:26.817
> 
> 标签：php, http, .htaccess, url-rewriting

我有一个网站（按名称说`www.manoj.com`）并且我在子域上创建了一个论坛

```
forum.manoj.com 
```

现在，我想将以下所有链接重定向`manoj.com/forum/{anything else}`到`forum.manoj.com/{anything else}`

我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:44:56.967

如果你想重定向`example.com/forum`到`forum.example.com`，请`[document_root]/forum/.htaccess`写：

```
RewriteEngine On
RewriteBase /forum
RewriteCond %{REMOTE_HOST}  !=forum.example.com
RewriteRule (.*) http://forum.example.com/$1 [R=301,NE,L] 
```

该`R=301`标志表示它是“永久”重定向，Apache 将发送 header `HTTP/1.1 301 Moved Permanently`。

如果您确实无法在其中添加`.htaccess`文件，请`[document_root]/.htaccess`写入：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_HOST}  !=forum.example.com
RewriteRule forum/(.*) http://forum.example.com/$1 [R=301,NE,L] 
```

但这还不够。您需要在`forum.example.com`服务器上设置 DNS 记录并设置虚拟主机（如果您使用 Apache），它才能工作。通常虚拟主机定义在`httpd.conf`. 有关更多信息，请参阅[此](http://httpd.apache.org/docs/2.0/vhosts/examples.html)

# jquery - CSS appendTo("");

> ID：11220036
> 
> 赞同：1
> 
> 时间：2012-06-27T05:38:58.093
> 
> 标签：jquery, appendto

```
$(document).ready(function(){$("[href]").appendTo(" Click here ...");}); 
```

HTML 代码

```
<a href="#"> b </a> 
```

我想在浏览器上显示为 b 单击此处...但我在这里工作不正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:42:00.000

您是否尝试过 *append*而不是*appendTo*？

```
$(document).ready(function(){$("[href]").append(" Click here ...");}); 
```

据我了解，它的工作原理如下：

```
element.append('stuff to append to the element'); 
```

对比

```
element.appendTo(otherElement); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:42:27.710

使用直接标签选择器和`append`方法

```
$(document).ready(function(){

            $("a").append(" Click here ...");

    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T05:45:10.890

尝试这个。

```
$(document).ready(function(){
  $("[href]").append(" Click here ...");
});​ 
```

使用[.append()](http://api.jquery.com/append/)函数而不是 .appendTo() 函数。

这是[演示](http://jsfiddle.net/jk84K/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:44:25.797

改变：

```
$("[href]").appendTo(" Click here ..."); 
```

至：

```
$("[href]").html(" Click here ..."); 
```

使用`appendTo`，您应该添加一个新的 DOM 元素而不是文本节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T05:44:41.023

我认为您正在寻找`append()`而不是`appendTo()`.

`append()`只需将您提供的文本或 jQuery 元素作为参数并将其附加为您选择的元素的最后一个子元素 - 我认为这是您正在寻找的行为。如果您想了解更多，文档`append()`位于[http://api.jquery.com/append/ 。](http://api.jquery.com/append/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T05:48:24.467

使用标签的 ID。如果您有多个锚标签，它适用于所有人。

```
 $(document).ready(function(){
    $("#YourID").append(" Click here ...");
    });

 <a href="#" id="YourID"> b </a> 
```

# amazon-web-services - 具有两个帐户的 AWS 工具，无法识别第二个帐户

> ID：11220038
> 
> 赞同：1
> 
> 时间：2012-06-27T05:39:20.637
> 
> 标签：amazon-web-services

我已经下载了 AWS cli 工具。我有两个独立的 AWS 账户。对于第一个帐户，一切都按预期工作。但我似乎无法将工具切换到第二个帐户。每次我运行 ec2-describe-instances 时，它都会列出我的第一个帐户的实例，而不是我的第二个帐户。以下是我已重置的环境变量：

在 ~/.bash_profile 中：

```
export EC2_CERT=/path/to/cert
export EC2_PRIVATE_KEY=/path/to/key
export AWS_CREDENTIAL_FILE=/path/to/file/with/access/and/private/key 
```

然后我运行“source ~/.bash_profile”并回显上述环境变量以仔细检查它们是否已设置。我错过了什么？

# sharepoint-2010 - 如何在单击导航到其他页面的项目时突出显示中继器中的选定项目，该项目应突出显示

> ID：11220042
> 
> 赞同：0
> 
> 时间：2012-06-27T05:39:36.707
> 
> 标签：sharepoint-2010

在可视化 Web 部件中，我使用的是转发器控件，并且项目是页面，同时单击该项目将导航到该页面中的另一个页面，我也放置了相同的 Web 部件。现在我的要求是在导航到应突出显示所选页面项的页面时。我实现了下面的代码，所以请建议添加什么。

提前致谢。

ascx代码：

```
<asp:Repeater ID="rptrPages" runat="server">
    <SeparatorTemplate>
        |
    </SeparatorTemplate>
    <ItemTemplate>
    <asp:LinkButton ID="lbtnUrl" PostBackUrl='<%# Eval("url")%>' Text='<%# Eval("Name")%>'
    runat="server" />
    </ItemTemplate>
</asp:Repeater> 
```

ascx.cs 代码：

```
foreach (SPListItem page in Pages)
{
    DataRow dr;
    dr = dt.NewRow();
    dr["url"] = SPContext.Current.Web.Url + "/" + folder.Url + "/" + page.Name;
    string[] pagename = page.Title.ToString().Split('.');
    dr["Name"] = pagename[0];
    dt.Rows.Add(dr);
}
rptrPages.DataSource = dt;
rptrPages.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:54:53.907

```
for (int i = 0; i < dt.Rows.Count; i++)
    {

    if (SPContext.Current.Item["Title"].ToString() == dt.Rows[i]["Name"].ToString())
        {
        LinkButton Link1 = (LinkButton)rptrPages.Items[i].FindControl("lbtnUrl");
        Link1.Attributes["OnClick"] = "return false";
        Link1.ForeColor = System.Drawing.Color.Red;
    }
    else
    {
        string url = dt.Rows[i]["url"].ToString();
        LinkButton Link1 = (LinkButton)rptrPages.Items[i].FindControl("lbtnUrl");
        Link1.PostBackUrl = url;
    }
} 
```

# c# - 试图制作一个在需要的地方插入换行符的文本解析器，但它不太有效

> ID：11220044
> 
> 赞同：1
> 
> 时间：2012-06-27T05:39:47.033
> 
> 标签：c#, text-parsing

我正在制作游戏，我从 XML 文件中读取对话文本。我正在尝试制定一个例程，根据需要自动添加换行符，以便它适合文本框。但是，它只是无法正常工作。这是当前的代码：

```
SpriteFont dialogueFont = font31Adelon;
int lastSpace = 0;
string builder = "";
string newestLine = "";
float maxWidth = 921.6f;
float stringLength = 0;

for (int i = 0; i <= speech.Length - 1; i++) //each char in the string
{
    if (speech[i] == ' ') //record the index of the most recent space
    {
        lastSpace = i;
    }

    builder += speech[i]; 
    newestLine += speech[i]; 
    stringLength = dialogueFont.MeasureString(newestLine).X;

    if (stringLength > maxWidth) //longer than allowed
    {
        builder = builder.Remove(lastSpace); //cut off from last space 
        builder += Environment.NewLine;
        i = lastSpace; //start back from the cutoff
        newestLine = "";
    }
}
speech = builder; 
```

我的测试字符串是“这是一个必须正确分成多行的长演讲示例。它有几行长，并没有真正说明任何重要的内容，因为它只是示例文本。”

这就是演讲最终的样子： [http ://www.iaza.com/work/120627C/iaza11394935036400.png](http://www.iaza.com/work/120627C/iaza11394935036400.png)

我认为，第一行之所以有效，是因为它恰好是一个超出限制的空间。

i = 81 和 lastSpace = 80 是第二行结束的地方。builder 在 .Remove 命令之前看起来像这样：“这是一个长演讲的例子，\r\n必须分成多行 c”

运行后它看起来像这样：“这是一个长演讲的例子，\r\n必须分成多行”

第三行超出了 i = 123 和 lastSpace = 120 的大小限制。在 .Remove 之前看起来像这样：“这是一个\r\n必须分成多行的长演讲示例\r\不正确。它有几行长，而且是"

和之后：“这是一个长演讲的例子，\r\n必须正确地分成多行\r\n。它有好几行”

正如你所看到的，它切断了一个额外的字符，即使字符 80，那个空间，是它应该开始删除的地方。从我所读到的.Remove，当使用单个参数调用时，会删除包括给定索引在内的所有内容。不过，它也切断了 i = 79！似乎应该很容易从 lastSpace 中添加或减去来弥补这一点，但我要么得到“索引超出范围”错误，要么我切断了更多的字符。我试过做 .Remove(lastSpace, i-lastSpace)，但这也不起作用。我尝试通过添加或减去 lastSpace 来以不同于其他方式处理“以空格结尾”的情况。我尝试过以不同的方式分解事物，但都没有奏效。

我厌倦了看这个，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:51:56.597

作为一种替代方法，您可以使用 .split 将您的句子分成一个数组，然后填充您的框，直到没有空间进行下一项工作，然后添加换行符并从下一行开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:07:57.580

添加`Environment.NewLine`到您的`StringBuilder`中，您需要在指定开始删除的索引时考虑这一点。

`Environment.NewLine`的值取决于系统。它可以是`"\r\n"`,`"\n"`或（或[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)`"\r"`的前两者之一）。 在您的情况下，这意味着要删除一个空格，您添加了另外两个字符。
`"\r\n"`

首先，您需要声明一个新变量：

```
int additionalChars = 0; 
```

然后，在添加一行文本时，您应该将代码更改为以下内容：

```
builder = builder.Remove(lastSpace + additionalChars); //cut off from last space 
builder += Environment.NewLine;
additionalChars += Environment.NewLine.Length - 1; 
```

这`-1`是因为您已经删除了一个空格（应该使此代码独立于系统对 的定义`Environment.NewLine`）。

**更新**：您还应该考虑超过行限制的单词。无论如何你都应该打破它们（忍不住试一试）：

```
if (stringLength > maxWidth) //longer than allowed
{
    // Cut off only if there was a space to cut off at
    if (lastSpace >= 0) { 
        builder = builder.Remove(lastSpace + additionalChars); //cut off from last space 
        i = lastSpace; //start back from the cutoff
    }
    builder += Environment.NewLine;
    // If there was no space that we cut off, there is also no need to subtract it here
    additionalChars += Environment.NewLine.Length - (lastSpace >= 0 ? 1 : 0);
    lastSpace = -1; // Means: No space found yet
    newestLine = "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:02:20.553

你能做类似下面的代码吗？优点是双重的。首先，它跳到下一个空格来衡量并决定是否添加整个单词，而不是一个字母一个字母。其次，它只为字符串中的每个单词调用一次 MeasureString，而不是为添加到字符串中的每个字母调用一次。它使用 StringBuilder 来`Append`确定单词何时适合，或者`AppendLine`何时不适合并且需要添加换行符。

```
 int lastSpace = 0;
        int nextSpace = s.IndexOf(' ', lastSpace + 1);
        float width = 0;
        float totalWidth = 0;
        float maxWidth = 200;
        while (nextSpace >= 0)
        {
            string piece = s.Substring(lastSpace, nextSpace - lastSpace);
            width = g.MeasureString(piece, this.Font).Width;
            if (totalWidth + width < maxWidth)
            {
                sb.Append(piece);
                totalWidth += width;
            }
            else
            {
                sb.AppendLine(piece);
                totalWidth = 0;
            }
            lastSpace = nextSpace;
            nextSpace = s.IndexOf(' ', lastSpace + 1);
        }
        MessageBox.Show(sb.ToString()); 
```

# linux - LPR 命令的 Linux 打印问题

> ID：11220047
> 
> 赞同：0
> 
> 时间：2012-06-27T05:40:08.140
> 
> 标签：linux, printing

在使用来自 linux 的命令进行打印`lpr`时，出现错误

```
lpr: Error - scheduler not responding! -Linux 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:26:54.413

有点谷歌搜索告诉我，如果你

删除 ServerName 行

```
/etc/cups/client.conf 
```

它会起作用。

# ruby-on-rails - 当我已经在模型中创建关联时，如何测试具有与 FactoryGirl 的 has_one 关联的模型

> ID：11220048
> 
> 赞同：2
> 
> 时间：2012-06-27T05:40:11.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, factory-bot

我有一个拥有一个配置文件的用户模型。当我像这样创建用户时，会自动创建配置文件；

```
class User < ActiveRecord::Base
  has_one :profile, dependent: :destroy
  after_create :create_profile
end

class Profile < ActiveRecord::Base
  belongs_to :user
end 
```

这一切都很好，每个用户都会创建一个默认配置文件。

不过，我想对我的用户模型进行一些测试，这就是我苦苦挣扎的地方。

我正在使用 FactoryGirl 并想创建一个像这样的用户

```
FactoryGirl.define do
  factory :user do
    sequence(:email) {|n| "user_#{n}@example.com"}
    sequence(:username) {|n| "user_#{n}"}
    password "secret"
    factory :activated_user do
      before(:create) {|user| user.activated = true}
      association :profile, factory: :profile_for_activated_user
    end
  end
end

FactoryGirl.define do
  factory :profile do
    factory :profile_for_activated_user do
      first_name "Johnny"
      last_name "User"
    end
  end
end 
```

这就是我出错的地方。after_create 回调（我想要的）覆盖了 FactoryGirl（on `FactoryGirl.create :activated_user`）创建的关联，所以我最终得到一个空白配置文件和失败的测试。我是否需要更改在模型中创建关联的方式（我不应该这样做——我不应该修改我的代码以适应我的测试工具），或者有没有办法在 FactoryGirl 中管理这个？在 FactoryGirl 中创建用户后，我是否应该在测试中手动分配配置文件属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:56:16.943

您可以像这样跳过 after_create 回调：

```
FactoryGirl.define do
  factory :user do
    after(:build) { |user| user.class.skip_callback(:create, :after, :create_setting) }
  end
end 
```

# php - 将点击日期显示为半小时间隔

> ID：11220050
> 
> 赞同：1
> 
> 时间：2012-06-27T05:40:16.177
> 
> 标签：php, date

我正在寻找 PHP 中的以下解决方案。

每当用户单击页面时，我想将他们单击的时间以 12 小时 AM/PM 格式存储为半小时间隔。

例如，用户点击：上午 7:23 将存储为上午 7:00-7:30，下午 9:44 将存储为下午 9:30-10:00 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:06:34.663

```
var_dump( date('H:i') );
$prev = time() - (time() % 1800);
$next = $prev + 1800;
var_dump( date('H:i A', $prev), date('H:i A', $next) ); 
```

如此处所示：[如何将 unix 时间戳向上和向下舍入到最接近的半小时？](https://stackoverflow.com/questions/9639642/how-to-round-unix-timestamp-up-and-down-to-nearest-half-hour)

# .net - Linq 中的通用 Select 子句

> ID：11220053
> 
> 赞同：1
> 
> 时间：2012-06-27T05:40:29.933
> 
> 标签：.net, linq, entity-framework, generics, entity-framework-4

我在[这里](https://stackoverflow.com/questions/11149272/ef4-how-to-use-a-generic-repository-pattern)看到了通用存储库模式。我正在尝试添加我想从调用函数作为参数发送的通用选择子句。我修改了

```
public T GetSingle(Expression<Func<filter, bool>> filter) to 
public T GetSingle(Expression<Func<filter, bool>> filter,Expression<Func<T, T>> Selct) 
```

现在我想调用这个方法。我应该如何发送我的选择表达式

```
return rep.GetSingle(p => p.Slug == slug,???) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:48:50.310

目前您的方法无法更改结果类型。我怀疑这不是你想要的。我希望您希望您的方法是通用的，例如

```
public TResult GetSingle<TResult>(Expression<Func<T, bool>> filter,
                                  Expression<Func<T, TResult>> projection) 
```

然后你会用这样的东西来称呼它：

```
// The type argument is inferred from the second lambda expression
string x = repository.GetSingle(p => p.Slug == slug, p => p.FirstName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:44:35.850

方法中的第二个参数必须是另一个 lambda，其中输入是 T，它必须返回 T。

# javascript - 我怎样才能切换 带有复选框的文本和密码字段选中取消选中

> ID：11220057
> 
> 赞同：2
> 
> 时间：2012-06-27T05:40:44.163
> 
> 标签：javascript, html, jsf, jsf-2, primefaces

我正在使用 p:password 标签进行注册。我想在选中复选框时将字段切换为文本，未选中时更改为密码类型模式。如何解决 primefaces 组件的问题。我正在使用 primefaces 3.0 和 jsf 2.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T05:51:08.440

在封面下生成`<input type="PASSWORD"/>`字段（带有其他属性名称等）

所以现在如果你需要显示密码有一个复选框

```
<input type="checkbox" id="showPassword" onclick="showPassword()"/> Show password 
```

在javascript中

```
function showPassword(){
  var showPasswordCheckBox = document.getElementById("showPassword");
  if(showPasswordCheckBox.checked){
        document.getElementById("ID_FOR_YOUR_PASSWORD_FIELD").type="TEXT";
  }else{
      document.getElementById("ID_FOR_YOUR_PASSWORD_FIELD").type="PASSWORD";
  }
} 
```

# javascript - javascript案例没有提供适当的价值

> ID：11220058
> 
> 赞同：0
> 
> 时间：2012-06-27T05:40:47.220
> 
> 标签：javascript, switch-statement

我设置了一个 case 语句来将完整的状态名称转换为 html 下拉列表的短值。（是的，这似乎是多余的，但我有多个数据集进来，这是必须的）

这是我的案例陈述

```
 var state_switch;
//document.write(temp[1]);
var state_case = temp[1];
//document.write("state =");
//document.write(state_case);
switch (state_case)
{
case "Alabama":
  state_switch="AL"; 
  break;
case "Alaska":
  state_switch="AK"; 
  break;
case "Arizona":
  state_switch="AZ"; 
  break;
case "Arkansas":
  state_switch="AK";
  break;
case "California":
  state_switch="CA"; 
  break;
case "Colorado":
  state_switch="CO"; 
  break;
case "Connecticut":
  state_switch="CT";
  break;
case "Delaware":
  state_switch="DE";
  break;
case "District of Columbia":
  state_switch="DC"; 
  break;
case "Florida":
  state_switch="FL";
  break;
case "Geogia":
  state_switch="GA"; 
  break;
case "Hawaii":
  state_switch="HI"; 
  break;
case "Idaho":
  state_switch="ID"; 
  break;
case "Illinois":
  state_switch="IL"; 
  break;
case "Indiana":
  state_switch="IN"; 
  break;
case "Iowa":
  state_switch="IA"; 
  break;
case "Kansas":
  state_switch="KS"; 
  break;
case "Kentucky":
  state_switch="KY"; 
  break;
case "Louisiana": 
  state_switch="LA"; 
  break;
case "Maine":
  state_switch="MA"; 
  break;
case "Maryland":
  state_switch="MD"; 
  break;
case "Massachusetts": 
  state_switch="MA"; 
  break;
case "Michigan":
  state_switch="MI"; 
  break;
case "Minnesota":
  state_switch="MN"; 
  break;
case "Mississippi":
  state_switch="MS"; 
  break;
case "Missouri":
  state_switch="MO";
  break;
case "Montana":
  state_switch="MT"; 
  break;
case "Nebraska": 
  state_switch="NE"; 
  break;
case "Nevada":
  state_switch="NE"; 
  break;
case "New Hampshire":
  state_switch="NH"; 
  break;
case "New Jersey":
  state_switch="NJ"; 
  break;
case "New Mexico":
  state_switch="NM"; 
  break;
case "New York":
 state_switch="NY";
 break;
case "North Carolina":
  state_switch="NC";
  break;
case "North Dakota": 
  state_switch="ND"; 
  break;
case "Ohio":
  state_switch="OH"; 
  break;
case "Oklahoma":
  state_switch="OK";
  break;
case "Oregon":
  state_switch="OR"; 
  break;
case "Pennsylvania":
  state_switch="PA";
  break;
case "Rhode Island":
  state_switch="RI"; 
  break;
case "South Carolina": 
  state_switch="SC"; 
  break;
case "South Dakota":
  state_switch="SD"; 
  break;
case "Tennessee":
  state_switch="TN"; 
  break;
case "Texas":
  state_switch="TX"; 
  break;
case "Utah":
  state_switch="UT"; 
  break;
case "Vermont":
  state_switch="VT"; 
  break;
case "Virginia":
  state_switch="VA"; 
  break;
case "Washington":
  state_switch="WA"; 
  break;
case "West Virginia":
  state_switch="WV"; 
  break;
case "Wisconsin":
  state_switch="WI"; 
  break;
case "Wyoming":
  state_switch="WY"; 
  break;    
default:
  state_switch='';               
}

//document.write("switch - ");
//document.write(state_switch);

                    if(me.location.name){
                        $("#state").val(state_switch);

} 
```

这是我的下拉菜单

```
<select name="state" id="state" class="short" style="margin-right:10px">
    <option value=""></option>
    <option value="AL">Alabama</option>
    <option value="AK">Alaska</option>
    <option value="AZ">Arizona</option>
    <option value="AR">Arkansas</option>
    <option value="CA">California</option>
    <option value="CO">Colorado</option>
    <option value="CT">Connecticut</option>
    <option value="DE">Delaware</option>
    <option value="DC">District of Columbia</option>
    <option value="FL">Florida</option>
    <option value="GA">Georgia</option>
    <option value="HI">Hawaii</option>
    <option value="ID">Idaho</option>
    <option value="IL">Illinois</option>
    <option value="IN">Indiana</option>
    <option value="IA">Iowa</option>
    <option value="KS">Kansas</option>
    <option value="KY">Kentucky</option>
    <option value="LA">Louisiana</option>
    <option value="ME">Maine</option>
    <option value="MD">Maryland</option>
    <option value="MA">Massachusetts</option>
    <option value="MI">Michigan</option>
    <option value="MN">Minnesota</option>
    <option value="MS">Mississippi</option>
    <option value="MO">Missouri</option>
    <option value="MT">Montana</option>
    <option value="NE">Nebraska</option>
    <option value="NV">Nevada</option>
    <option value="NH">New Hampshire</option>
    <option value="NJ">New Jersey</option>
    <option value="NM">New Mexico</option>
    <option value="NY">New York</option>
    <option value="NC">North Carolina</option>
    <option value="ND">North Dakota</option>
    <option value="OH">Ohio</option>
    <option value="OK">Oklahoma</option>
    <option value="OR">Oregon</option>
    <option value="PA">Pennsylvania</option>
    <option value="RI">Rhode Island</option>
    <option value="SC">South Carolina</option>
    <option value="SD">South Dakota</option>
    <option value="TN">Tennessee</option>
    <option value="TX">Texas</option>
    <option value="UT">Utah</option>
    <option value="VT">Vermont</option>
    <option value="VA">Virginia</option>
    <option value="WA">Washington</option>
    <option value="WV">West Virginia</option>
    <option value="WI">Wisconsin</option>
    <option value="WY">Wyoming</option>
</select> 
```

我已经测试并完成了上面注释掉的打印输出，并且我得到的数据是正确的。如果我将默认值更改为“IL”，下拉菜单将显示伊利诺伊州。但是，当那是 state_case 的值时，它并没有捕捉到“伊利诺伊州”

# javascript - 这是有效的js oop吗？

> ID：11220062
> 
> 赞同：-3
> 
> 时间：2012-06-27T05:41:02.887
> 
> 标签：javascript, json, object-literal, dom

我想知道是否可以将html dom引用放在js oop中。虽然网上有很多 JS OOP 教程，但我还没有看到与我所指的类似的东西。下面的代码就是我所指的。

```
var form = {
  fname : document.getElementById("fname").value;
}; 
```

例如，这`document.getElementById("fname").value`是一个值为“jacob”的文本框。会`form.fname = "jacob"`吗？

这可以吗？这是一种常见的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:48:34.847

如果对象是在加载事件之后创建的，则可以这样做，这样您就可以确保元素“fname”已初始化......例如......

```
$(document).ready(function(){
   var form = {
     fname : document.getElementById("fname").value;
    };
}); 
```

如果您不想使用 jQuery，这里是另一个示例...

```
window.addEvent('load',function(){
  //your object ...
  }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T05:45:35.297

我不确定您要在这里完成什么。如果您只需要一次检索当前输入字段中的值，那么这应该没问题。如果您期望 form.fname 的值在输入值更改时不断更新，那么您不会看到这种情况发生。您要么需要一些与输入的更改事件相关联的处理程序，要么您需要做更多类似这样的事情：

```
var form = {
  fname: function () {
    return document.getElementById('fname').value;
  }
};

// Retrieving
form.fname() 
```

请注意，您现在必须调用 fname 函数，不能简单地将其称为`form.fname`.

如果您真的不想重新输入内容，请执行以下操作：

```
var fields = ['fname', 'lname', 'city', 'state'];
var form = {};
for (var i = 0, j = fields.length; i < j; ++i) {
  form[fields[i]] = function () {
    return document.getElementById(fields[i]).value;
  }
} 
```

如果您将下拉列表之类的内容添加到表单中，则必须更加小心，因为它们`.value`没有那么有用，但是如果名称发生更改，则不要重新输入名称。

而且，如果我们真的想对它感兴趣，你甚至不必在获取值时输入名称：

```
for (var i = 0, j = fields.length; i < j; ++i) {
  console.log(form[fields[i]]())
} 
```

# android - Spinner 没有填充给定的字符串数组

> ID：11220066
> 
> 赞同：0
> 
> 时间：2012-06-27T05:41:28.297
> 
> 标签：android, android-layout, android-intent, android-source, android-spinner

我必须制作一个android应用程序。它是关于为大学生计算铺位的。所以我想让它像这样：

微调器 1 有

选择分支

1.  我
2.  行政长官
3.  它
4.  EE

选择学期

第 1次 第
2次 第
3次 第
4 次

等等

现在如果学生选择我和第三学期，那么他的第三学期科目应该是这样的：

输入主题的双层：

ABC1：EditText
ABC2：EditText
ABC3：EditText
ABC4：EditText
ABC4：EditText

用户的这个输入应该是出勤率的逻辑，答案应该出现在另一个具有相同主题名称的页面上。

任何人都可以帮助我吗？

***编辑***

我的**Main.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TextView 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/hello" />
<Spinner
android:id="@+id/spinner1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:21:06.187

微调器的 XML：

```
<Spinner
android:id="@+id/city_spinner_iWant"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:prompt="@string/citySpinner"
android:textColor="@color/white"
android:textSize="20dp" /> 
```

在代码中，将适配器设置为使用需要的项目（在您的情况下为分支）填充微调器：

```
String[] city_array = new String[]{"London", "Newyork", "Paris"};

ArrayAdapter<String> cityArrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,city_array);

city_spinner = (Spinner) findViewById(R.id.city_spinner_iWant);
city_spinner.setAdapter(cityArrayAdapter); 
```

然后根据微调器中选择的项目显示表单：

```
city_spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

public void onItemSelected(AdapterView<?> adapter, View v,int i, long lng) {

selected_city = adapter.getItemAtPosition(i).toString();
Toast.makeText(getApplicationContext(), selected_city, 1000).show();

//conditions depending on selected_city (in your case selected branch)
}
public void onNothingSelected(AdapterView<?> arg0) {

//no need to impement this
}
}); 
```

# php - PHP 获取表格中最受欢迎的项目

> ID：11220067
> 
> 赞同：0
> 
> 时间：2012-06-27T05:41:30.230
> 
> 标签：php, mysql

可以说我的桌子看起来像：

```
username userid
a1       1
a1       1
a1       1
b2       2
c2       3
d2       3 
```

最受欢迎的用户名：`a1`

如何找到表中最受欢迎的项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:45:10.640

```
SELECT username, count(*) AS frequency
FROM your_table
GROUP BY username
ORDER BY frequency DESC
LIMIT 1 
```

将产生一行：

```
username | frequency
---------+----------
a1         3 
```

# php - 从图像名称中删除“资源 ID #--”

> ID：11220068
> 
> 赞同：0
> 
> 时间：2012-06-27T05:41:32.230
> 
> 标签：php, image, curl

当我显示（PHP echo）来自服务器的图像名称时，它显示为，

资源 ID #32global_2012062513406170744fe83172d6c99.jpg 资源 ID #33330394727_2012062613406707734fe90335d0a5e.jpg

如何删除与图像名称关联的“资源 id #32”？那么只有我可以显示来自服务器的图像吗？或者还有其他显示图像的方法吗？代码是

```
 69 if(is_dir($dir))
 70         {               
 71         $dir = opendir($dir);   
 72                 while (false !== ($file = readdir($dir)))
 73                 {       
 74                         if ($file != "." && $file != "..")
 75                         {
 76                                 $files[] = $file;
 77                         }
 78                 }
 79         closedir($dir);
 80         }
 81 //srand ((double) microtime( )*1000000);
 82 $randnum = mt_rand(0,(sizeof($files)-1));
 83 $img = $dir.$files[$randnum];
 84 echo $img; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:50:40.403

```
if(is_dir($dir))
{               
    $openDir = opendir($dir);   
    while (false !== ($file = readdir($openDir)))
    {       
        if ($file != "." && $file != "..")
        {
            $files[] = $file;
        }
    }
    closedir($openDir);
}
//srand ((double) microtime( )*1000000);
$randnum = mt_rand(0,(sizeof($files)-1));
$img = $dir.$files[$randnum];
echo $img; 
```

用这个。

# php - 将 PHP 与 HTML 相结合的约定

> ID：11220078
> 
> 赞同：3
> 
> 时间：2012-06-27T05:42:17.203
> 
> 标签：php, html, echo

我正在从一本书中学习 PHP。作者`echo`用来输出HTML。起初我以为这就是它应该这样做的方式，但后来我拿起了一本更“高级”的书。第二本书的作者在 HTML 之间插入 PHP 代码，而不是回显整个内容。在从事大型项目的大型 Web 开发公司中，它是如何完成的？您可以使用其中一个，还是一个比另一个更被接受？

以这段代码为例：

```
<?php
//pagination
if ($pages > 1) {
    //determine the current page
    $current_page = ($start / $display) + 1;

    //print out Previous Page button
    if ($current_page != 1) {
?>
        <div class="pages"><strong><a href="view_users.php?s=<?php echo ($start - $display); ?>&amp;p=<?php echo $pages; ?>">&nbsp;&lt;&nbsp;</a></strong></div>
<?php
    }

    //print the page numbers
    for ($i = 1; $i <= $pages; $i++) {
        if ($i == $current_page) {
?>
         <div class="pages active"><span>&nbsp;<?php echo $i; ?>&nbsp;</span></div>
<?php
    }
    else {
?>
        <div class="pages"><strong><a href="view_users.php?s=<?php echo ($display * ($i - 1)); ?>&amp;p=<?php echo $pages; ?>">&nbsp;<?php echo $i; ?>&nbsp;</a></strong></div>
<?php
        }//end of $i = $current_page conditional
    }//end of FOR loop

    if ($current_page < $pages) {
?>
        <div class="pages"><strong><a href="view_users.php?s=<?php echo ($start + $display); ?>&amp;p=<?php echo $pages; ?>">&nbsp;&gt;&nbsp;</a></strong></div>
<?php
    }
}//end of pagination

include('includes/footer.php'); 
?> 
```

这是正确的方法吗，还是我应该使用这样的方法：

```
echo '<a href="view_users.php?s=' . ($display * ($i - 1)) . 
'&p=' . $pages . '&sort=' . $sort . '">' . $i . '</a> '; 
```

我问的原因是因为我发现在使用第二种技术时很难正确对齐 HTML，而且我不想在早期养成任何不良习惯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:51:12.537

第一种方法使您的代码更具可读性。当您需要打印少量 html 代码时，第二种方法很有用。您也可以使用简短的开放标签在 html 标签之间插入您的 php 代码。例如，如果您需要打印 URL 的语言参数，您可以这样做：

```
<a href="index.php?lang=<?=$lang?>" >A Link</a> 
```

这等于：

```
<a href="index.php?lang=<?php echo $lang; ?>" >A Link</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:48:41.447

我建议总体上使用一个好的[框架](http://www.phpframeworks.com/top-10-php-frameworks/)，以及一个用于输出页面的[模板引擎。](http://coding.smashingmagazine.com/2011/10/17/getting-started-with-php-templating/)这样，您的数据模型、应用程序逻辑和 HTML 都保持独立。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:00:47.393

这是一个有点主观的问题，但是：

```
echo '<a href="view_users.php?s=' . ($display * ($i - 1)) . 
'&p=' . $pages . '&sort=' . $sort . '">' . $i . '</a> '; 
```

*这*不是很好，因为它很快就会变得难以阅读。使用 IMO 是最糟糕的选择。

这是关于如何改进的演变：

```
<a
 href="view_users.php?s=<?php echo $display * ($i - 1); ?>&p=<?php echo $pages; ?>&sort=<?php echo $sort; ?>">
    <?php echo $i; ?>
</a> 
```

* * *

```
<?php
    printf('<a href="view_users.php?s=%i&p=%i&sort=%s">%i</a>',
           $display * ($i - 1), $pages, $sort, $i);
?> 
```

* * *

```
<?php
    $q = http_build_query(array(
        's'    => $display * ($i - 1),
        'p'    => $pages,
        'sort' => $sort
    ));
?>
<a href="view_users.php?<?php echo $q; ?>"><?php echo $i; ?></a> 
```

* * *

```
<?php
    printf('<a href="view_users.php?%s">%i</a>',
           http_build_query(array(
               's'    => $display * ($i - 1),
               'p'    => $pages,
               'sort' => $sort
           )),
           $i);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:51:56.300

Paul，您在该代码中看到的是 PHP、CSS 和 HTML 的组合。echo 仅表示在页面上打印，它是一个 PHP 函数，这就是为什么您会在标签上看到它。

```
<?php ?> 
```

这回答了你的问题了吗？

PHP 和 HTML 和 CSS 也不会解析任何空格，因此缩进是为了提高可读性。我建议你评论你的代码并格式化它，但它更容易让你理解。从专业的角度来看，请查看 W3C 验证器以获取正确的代码格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T05:51:58.860

两者都是可以接受的，对简短的语句使用 echo，对长的 html 完全脱离 php。HTML 的缩进并不重要，当有人检查你的源代码时它看起来很漂亮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-24T13:21:07.990

在函数中包装 html 生成并构建输出字符串可能是一个好习惯。这样你就可以用一种可读的方式表达复杂的逻辑：

```
<?php

function get_pagination_html($pages, $start, $display) {
    $html = "";

    if ($pages <= 1) return $html;

    $current_page = ($start / $display) + 1;

    if ($current_page != 1) {
        $previous = $start - $display;
        $html .= "<div class='pages'><strong><a href='view_users.php?s={$previous}&amp;p={$pages}'>&nbsp;&lt;&nbsp;</a></strong></div>";
    }

    for ($page_number = 1; $page_number <= $pages; $page_number++) {
        if ($page_number == $current_page) {
            $html .= "<div class='pages active'><span>&nbsp;{$page_number}&nbsp;</span></div>";
        } else {
            $page_start = $display * ($page_number - 1);
            $html .= "<div class='pages'><strong><a href='iew_users.php?s={$page_start}>&amp;p={$pages}'>&nbsp;{$page_number}&nbsp;</a></strong></div>";
        }
    }

    if ($current_page < $pages) {
        $next = $start + $display;
        $html .= "<div class='pages'><strong><a href='view_users.php?s={$next}&amp;p={$pages}'>&nbsp;&gt;&nbsp;</a></strong></div>";
    }

    return $html;
}

echo get_pagination_html($pages, $start, $display); 
```

注意它读起来容易得多。您也不需要任何注释，因为变量名称是不言自明的

# php - Doctrine2 当我想要一个实体时获取一个代理

> ID：11220079
> 
> 赞同：0
> 
> 时间：2012-06-27T05:42:23.527
> 
> 标签：php, proxy, doctrine-orm

当我登录系统时，我通常会获取用户记录并将其保存到会话中。但是，当我想成为其他人而不是实体时，我得到了实体的代理。通常这可以正常工作，但是，当我将它保存在会话中时，它会出错，因为它是一个部分类。

有没有办法恢复实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:33:10.357

当您的查询不包含您想要的并且它被命名时，Doctrine 返回代理`lazy loading`。如果你想获取一个实体，请写下你想要的或使用的`getRepository()`功能。

# flash - 如何在vaadin中添加swf文件

> ID：11220085
> 
> 赞同：0
> 
> 时间：2012-06-27T05:42:47.127
> 
> 标签：flash, vaadin

我想在 vaadin 窗口中添加由 pdf2swf 创建的 swf 文件，

所以我尝试使用 Vaadin 书中给出的代码[https://vaadin.com/book/-/page/components.embedded.html](https://vaadin.com/book/-/page/components.embedded.html)

`final ClassResource flashResource = new ClassResource("Requirements.swf", getMainWindow().getApplication());
final Embedded embedded = new Embedded("Embedded Caption", flashResource);
embedded.setType(Embedded.TYPE_OBJECT);
embedded.setMimeType("application/x-shockwave-flash");
embedded.setWidth("100px");
embedded.setHeight("100px");
mainWindow.addComponent(embedded);
mainWindow.requestRepaintAll();` 

但我仍然无法在 vaadin 窗口中看到 swf。

谢谢，约格什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:54:40.867

I imagine the problem here is the location of the SWF in your web application; in this code, you are using a ClassResource - this means "Requirements.swf" needs to be in the root of the **classpath** of the web application.

Typically, the easiest place to put this for a quick test is WEB-INF/classes.

See [https://vaadin.com/book/-/page/application.resources.html](https://vaadin.com/book/-/page/application.resources.html) for the different resource classes, and where to place those resources.

Note that putting the file in the root of the webapplication is not *quite* as easy as you imagine, as you'll have to change the default servlet mapping configuration.

# jquery - jQuery - 对话框自动调整动态内容的大小并保持中心位置

> ID：11220086
> 
> 赞同：7
> 
> 时间：2012-06-27T05:42:48.890
> 
> 标签：jquery, dialog, position, center

我有一个 jQuery 对话框并正在使用 Ajax 加载内容。

对话框最初位于页面的中心。这里的问题是，由于它是动态内容，数据的大小是未知的。所以，当我得到大数据时，对话框只在底部增长，即对话框在底部展开，顶部仍然在同一位置。

我想要的是

加载数据时，对话框应在两个方向（顶部和底部）展开，以便内容可见而无需滚动。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-24T21:38:22.330

当我在寻找解决方案时，我在互联网上找到的答案都没有让我满意。连这个都没有。在阅读了更多关于 JQuery API 文档的内容后，[我发现了一些非常有趣](http://api.jquery.com/ajaxStop/)的东西。正如这个网页所描述的，您可以绑定一个事件，在 ajax 请求完成其工作后将在该事件中执行该事件。问题是，事情不是这样简单的；当我使用 API 文档中提供的示例进行自己的测试时，我无法使其工作。似乎我的 JQuery 对话框不以“未来”的上下文方式存在。

这将我带到了[这个页面](http://api.jquery.com/live/)，该页面的描述是： *为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。*发现这一点导致我创建了一个像这样的函数：

```
$(document).live("ajaxStop", function (e) {
      $(".myDiagDiv").dialog("option", "position", "center");
}); 
```

瞧！它就像一个魅力！ajax 请求完成后，position 属性被更改并适应 div 的内容及其尺寸！

希望它对未来的人们有所帮助！

编辑：您可能想要使用函数“.on()”而不是“.live()”。自从我写下我的答案以来，似乎函数“.live()”已在 jQuery 1.9 版中被删除并被新的取代。对于 jQuery >= 1.9 的用户来说，更合适的解决方案是这样的：

```
$(document).on("ajaxStop", function (e) {
      $(".myDiagDiv").dialog("option", "position", "center");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:53:40.330

默认对话框是绝对相对定位的。

对话框可能会在提供**auto height**时展开，但是当页面滚动时，对话框会重新定位。

这样做的唯一方法是将这些样式应用于对话框

1.  将对话框定位在窗口中

    `position : ['center',<distance from top>]`

2.  使用 css 样式固定位置

    `.fixed-dialog { position:"fixed" }`

3.  将此类添加到对话框

    `dialogClass : 'fixed-dialog'`

所以，对话框看起来像

```
$('#dialog-div').dialog({
        position : ['center',10],
        dialogClass: "fixed-dialog"
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T11:44:55.493

```
 Use this
    modal: true,
    width: '80%',
    autoResize:true,
    resizable: true,
    position: {
        my: "center top", 
        at: "center top", 
        of: window
    } 
```

顺序必须相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-30T05:42:36.973

我正在寻找一个简单的解决方案，并意识到我的图表在打开对话框之前还没有完成“绘制”，所以我将 .dialog('open') 命令包含在 setTimeout 函数中。

```
setTimeout(function () {
    $('#pie-Admin-Summary-dialog').dialog('open');
}, 500); 
```

你可以玩时间。我选择了 1/2 秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-27T22:16:15.870

在我将对话框内容移动到 ajax 源之前定位很好，之后定位是一个问题。以下内容今天对我有用。

```
$('#formdialog').dialog({autoOpen: false, modal: true, title:'Dialog Title',  
    position: {
    my: "center top", 
    at: "center top+50", 
    of: window
}}); 
```

请注意，“+50”是“从顶部向下 50px”，无论添加到“my”还是“at”行都有效。不允许有空格。例如：“center top + 50”将不起作用。

[在文档选项位置](http://api.jqueryui.com/dialog/#option-position)中查看更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-07T11:37:24.180

我使用该功能：

```
function centerDialog(id){

  var d = $('#'+id).closest('.ui-dialog'),
      w = $(window);

  d.css({

    'top':(w.height()-d.outerHeight())/2,
    'left':(w.width()-d.outerWidth())/2

  });

} 
```

# performance - Oracle 上流畅的 nHibernate 查询非常慢

> ID：11220087
> 
> 赞同：0
> 
> 时间：2012-06-27T05:42:49.420
> 
> 标签：performance, nhibernate, fluent-nhibernate

我是 nHibernate 的新手，并且从一个简单的选择查询中得到了一些非常慢的结果。也许我错过了一些明显的东西。情况如下：

*   我正在使用流利的 nHibernate。
*   我正在查询一个 oracle 数据库（10g），我正在尝试返回一个人对象。
*   每条记录大约需要 16 秒！

这是我流畅的 nHibernate 代码：

```
public class Person
{
    public virtual string PersonId { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
}

public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Schema("MyTestDB");
        Table("Person");
        Id(i => i.PersonId);
        Map(i => i.FirstName);
        Map(i => i.LastName);
    }
} 
```

这是假设检索实际数据的代码：

```
var sessionFactory = Fluently.Configure().Database(OracleClientConfiguration.Oracle10.ConnectionString(@"User Id=tester;Password=tester99!;Data Source=MyTestDB;").ShowSql()).Mappings(m => m.FluentMappings.AddFromAssembly(Assembly.GetExecutingAssembly())).BuildSessionFactory();                   

    using (var session = sessionFactory.OpenSession())
    {           
        using (session.BeginTransaction())
        {
            Stopwatch stopWatch = new Stopwatch();
            stopWatch.Start();

            var person = session.QueryOver<Person>()
                                .Where(p => p.PersonId == "1").SingleOrDefault();

            stopWatch.Stop();

            var ts = stopWatch.Elapsed;
            var time = string.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds/10);

            Console.WriteLine("Retrieved object: Person, Id: {0}, First Name: {1}, Last Name: {2} in [{3}]", person.PersonId, person.FirstName, person.LastName, time);
        }
    } 
```

PersonId 列已编入索引并且是主键。

到目前为止，我试图解决这个问题的尝试是使用 ADO.Net 运行 nHibernate 生成的相同 sql。查询运行得非常快（秒表的经过时间为 0）。

使用 plsql developer 在数据库上运行相同的查询给出了相同的快速结果。这表明我认为它不是查询也不是数据库。

我该如何进一步调试呢？nHibernate 分析器会帮助解决这个问题（我目前没有这个可用）？

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:46:05.083

首先，您应该尝试在整个程序执行过程中捕捉更多的时间点。您假设它是 NHibernate 组件，但没有更多难以证明的数据点，尤其是当您的初始测试返回 0 时。

其次，在您的 NHibernate 方案中，最大的成本是调用`BuildSessionFactory()`. NHibernate 被优化为具有廉价的会话构造，因此它希望您创建这个工厂一次并在程序的整个生命周期内重复使用它。如果您在此事件周围放置跟踪点，您可能会发现您的“费用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:11:27.970

如果我不得不在这里大胆猜测，问题不在于 nhibernate 查询数据库我认为这是您构建 sessionFactory 和/或会话的初始成本，这就是您看到异常延迟的原因。

为什么不使用[Jetbrains dotTrace](http://www.jetbrains.com/profiler/)并查看实际性能影响在哪里，如果它在运行查询或其他方面。只需运行一个采样查询，您就可以得到每个函数调用次数的准确时间。

PS：我与 jetbrains 没有任何关联，只是推荐该产品的快乐客户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:16:47.673

问题最终是我没有指定主键列的数据类型，结果是 varchar（非 unicode）。事实证明，您需要为非 unicode 列指定数据类型，因为 fluent 假定字符串映射到 uni 代码。

这是如何以流利的表示法设置自定义类型：

```
 Map(x=>x.PersonId).CustomType("AnsiString"); 
```

# java - 如何在android中处理oracle数据库

> ID：11220088
> 
> 赞同：-2
> 
> 时间：2012-06-27T05:42:51.403
> 
> 标签：java, android, database, oracle

我必须在android中使用oracle数据库。
我曾尝试像往常一样使用 oracle 进行 Java 编码，但我没有成功。
我用过这个java代码。

```
Class.forName("oracle.jdbc.driver.OracleDriver");
con=DriverManager.getConnection("jdbc:oracle:thin:@:1521:XE","SYSTEM","pis");  
Statement s=con.createStatement();
s.executeUpdate("create table customer1(id int primary key,name varchar(20) not null,city varchar(20))");
s.close();
con.close(); 
```

我是android编程的新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T05:46:03.963

我认为您不应该直接从设备本身与 Oracle 数据库对话。除此之外，安全方面几乎肯定会被证明具有挑战性。您通常希望将数据库网络访问保持在相当有限的范围内。

通常，您会托管某种公开对业务有意义的操作的 Web 服务，并且该 Web 服务会与 Oracle 通信。然后，Android 设备将与 Web 服务通信（可能通过 REST，尽管我敢说 SOAP*可以*工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:19:00.017

改为使用 Web 服务。您不想在移动应用程序中公开数据库连接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T05:50:43.177

```
I have to use oracle database in android please help me. 
```

到目前为止，AFAIK 无法将 Oracle 集成到 android 中。您可以在服务器上转储数据库，并让您的移动设备与 Web 服务器对话以获取数据。可以通过 XML 或 JSON 进行通信。

# php - 在 php 中使用 edraw 保存 ms word docx 文件

> ID：11220090
> 
> 赞同：1
> 
> 时间：2012-06-27T05:42:54.630
> 
> 标签：php, file, ms-word, save, docx

我使用以下代码保存打开的 docx 文件。

javascript:

```
function SavetoServer(){
    OA1.Save();
    OA1.CloseDoc();
    OA1.HttpInit();
    OA1.HttpAddPostFile("C:\wamp\www\rte\sample2.docx");
    document.OA1.HttpPost("http://localhost/rte/actor2.php");

} 
```

php代码“actor2.php”

```
<?php
    header("http/1.1 200 OK");
    $handle = fopen($_FILES['trackdata']['name'],"w+");
    if($handle == FALSE)
    {
      exit("Create file error!");
    }
    $handle2 = fopen($_FILES['trackdata']['tmp_name'],"r");
    $data = fread($handle2,$_FILES['trackdata']['size']);
    fwrite($handle,$data);
    fclose($handle2);
    fclose($handle);
    exit(0);
  ?> 
```

当我们在浏览器中更改时，文件没有保存。任何人都可以看到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-01T05:27:02.077

HttpAddPostFile 只能添加来自远程网站的文件。它适用于本地磁盘文件。

```
function SavetoServer()
{
	if(document.OA1.IsOpened)
	{
		document.OA1.SetAppFocus();
		document.OA1.HttpInit();	
		var sFileName = document.OA1.GetDocumentName();

		document.OA1.HttpAddPostOpenedFile (sFileName); //save as the same file format with the sFileName then upload
		//document.OA1.HttpAddPostOpenedFile (sFileName, 16); //save as docx file then upload
		//document.OA1.HttpAddPostOpenedFile (sFileName, 0); //save as doc file then upload
		//document.OA1.HttpAddPostOpenedFile (sFileName, -4143); //save as xls file then upload
		//document.OA1.HttpAddPostOpenedFile (sFileName, 51); //save as xlxs file then upload

		document.OA1.HttpPost("upload_weboffice.php");
		if(document.OA1.GetErrorCode() == 0 || document.OA1.GetErrorCode() == 200)
		{		
			var sPath = "Save successfully! You can download it at http://www.ocxt.com/demo/" + sFileName;
			window.alert(sPath);
		}
		else
		{
			window.alert("you need enable the IIS Windows Anonymous Authentication if you have not set the username and password in the HttpPost method. you need set the timeout and largefile size in the web.config file.");
		}
	}
	else{
		window.alert("Please open a document firstly!");
	}
}

upload_weboffice.php

<?php

$sql = sprintf("username=%s  passwd=%s  param=%s", $_POST['user'],$_POST['password'],$_POST['param']);
echo $sql;

$filecount = count($_FILES["trackdata"]["name"]);
echo "\r\n";
echo "file account:";
echo $filecount;
echo "\r\n";

$sql = sprintf("file=%s  size=%s error=%s tmp=%s", $_FILES['trackdata']['name'],$_FILES['trackdata']['size'],$_FILES['trackdata']['error'],$_FILES['trackdata']['tmp_name']);
echo $sql;
echo "\r\n";

$filen = $_FILES['trackdata']['name'];
//$filen = iconv("UTF-8", "GBK", $filen);
$handle = fopen($filen,"w+");
if($handle == FALSE)
{
	exit("Create file error!");
}

$handle2 = fopen($_FILES['trackdata']['tmp_name'],"r");
$data = fread($handle2,$_FILES['trackdata']['size']);
echo $data;

//file_put_contents($handle, "\xEF\xBB\xBF".  $data);
//fwrite($handle,pack("CCC",0xef,0xbb,0xbf));
fwrite($handle,$data);

fclose($handle2);
fclose($handle);

exit(0);
?> 
```

# ruby - 重载method_missing和method_added的危险

> ID：11220091
> 
> 赞同：0
> 
> 时间：2012-06-27T05:43:03.523
> 
> 标签：ruby

每当我与 Rubyists 交谈时，我都会听到关于`method_added`和`method_missing`. 然而，我最近因为在一个项目中同时使用这两种方法而受到指责。争论是另一个库（例如 rspec，例如）也可以重载方法，并使程序处于奇怪的状态，具体取决于`method_missing`首先调用哪个版本。

我很想知道这种情况发生的频率。超载真的有那么危险`method_missing`吗？`method_missing`有没有人有现实世界的冲突引起的灾难的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T06:10:08.627

要记住的一件事是，如果您（重新）定义`method_missing`一个类，您将**替换**此方法的任何先前实现（例如来自 Gem）。您可以通过创建一个继承自您要使用 method_missing 扩展的类的新类来避免这种情况。

但是，这通常不是问题，因为大多数宝石都有自己的类。

要记住的另一件事是**始终**`super`在末尾 调用`method_missing`以不破坏方法调用链。

```
def method_missing(m, *args, &block)
  # your code...

  super
end 
```

也许这个[Ruby Method Lookup Flow](http://phrogz.net/RubyLibs/RubyMethodLookupFlow.png)的图形也很有帮助。

# xml - 使用 XSLT 选择具有唯一 ID 的节点

> ID：11220092
> 
> 赞同：5
> 
> 时间：2012-06-27T05:43:12.030
> 
> 标签：xml, xslt

如何选择具有唯一 ID 的特定节点并将整个节点返回为 xml。

```
<xml>
<library>
<book id='1'>
<title>firstTitle</title>
<author>firstAuthor</author>
</book>
<book id='2'>
<title>secondTitle</title>
<author>secondAuthor</author>
</book>
<book id='3'>
<title>thirdTitle</title>
<author>thirdAuthor</author>
</book>
</library>
</xml> 
```

在这种情况下，我想返回 id='3' 的书，所以它看起来像这样：

```
<book id='3'>
<title>thirdTitle</title>
<author>thirdAuthor</author>
</book> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:53:42.527

如果您指的是[XPath](http://en.wikipedia.org/wiki/XPath)（因为您是在文档中搜索，而不是对其进行转换），那将是：

```
//book[@id=3] 
```

当然，根据您的语言，可能有一个库可以使此搜索更加简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T06:06:39.937

这个 XSLT 1.0 样式表...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
  <xsl:apply-templates select="*/*/book[@id='3']" />
</xsl:template>

<xsl:template match="@*|node()">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

... 将您的示例输入文档转换为指定的示例输出文档

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-12T22:57:04.867

最高效*和最易读的方法是通过`key`：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <!-- To match your expectation and input (neither had <?xml?> -->
    <xsl:output method="xml" omit-xml-declaration="yes" />

    <!-- Create a lookup for books -->
    <!-- (match could be more specific as well if you want: "/xml/library/book") -->
    <xsl:key name="books" match="book" use="@id" />

    <xsl:template match="/">
        <!-- Lookup by key created above. -->
        <xsl:copy-of select="key('books', 3)" />
        <!-- You can use it anywhere where you would use a "//book[@id='3']" -->
    </xsl:template>

</xsl:stylesheet> 
```

** 对于 2142 项和 121 次查找，它产生了 500 毫秒的差异，在我的情况下，总体加速了 33%。针对`//book[@id = $id-to-look-up]`.*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:03:59.903

在 XSLT 中，您`xsl:copy-of`可以将选定的节点集插入到输出结果树中：

```
<xsl:copy-of select="/*/library/book[@id=3]"/> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-27T05:51:24.477

看看 SimpleXML xpath

[xpath simpleXML](http://www.php.net/manual/en/simplexmlelement.xpath.php)

# jquery - jquery ajax post 不工作但得到工作

> ID：11220101
> 
> 赞同：1
> 
> 时间：2012-06-27T05:44:19.713
> 
> 标签：jquery, ajax, codeigniter, post, get

这个问题真的需要很长时间才能解决，而且它正在生病......

昨天开始出现一个非常烦人的错误，我无法解决它为什么会发生的根源......

当我使用以下 javascript 代码时：

```
$(".reply_to_article").click(function(){
    var cct = $.cookie('csrf_cookie_name');

    var body = $(this).parent().find("textarea");

    $.ajax({
        type: "POST",
        url: "http://www.domain.com/articles/replyToArticle",
        dataType: 'json',
        data: {
            body : body.val(),
            csrf_name : csrf_value
        },
        success: function(data) {

        }
    });
}); 
```

并单击reply_to_article 按钮，请求根本不会结束并且持续无限时间...当我检查萤火虫时，加载图像总是旋转而没有结束...当我按ESC时它不返回任何内容...还检查了所有其他浏览器。 ..

还尝试直接访问 ajax 文件并且它可以工作......但是这个 POST 没有

它如何与 GET 而不是 POST 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:05:25.147

我猜你有 CSRF 安全，你正在向控制器“发布”数据。在这种情况下，控制器调用 Security 构造函数来检查和验证 CSRF 令牌。如果令牌不正确，则返回 500 HTTP 错误。因此首先检查 500 错误。如果是这种情况，我猜您当前处理 csrf 令牌的方式不正确。

我不确定 csrf_name 和 csrf_value 是什么，但应该是

名称应该是：`<?php echo $this->security->get_csrf_token_name();?>`并且值应该是`<?php echo $this->security->get_csrf_hash(); ?>`

将这两个值存储在隐藏字段中，然后在脚本中使用它。

有关详细信息，请阅读此 SO 问题：[codeigniter csrf protection error with ajax](https://stackoverflow.com/questions/10061589/codeigniter-csrf-protection-error-with-ajax)

# c++ - 无法理解静态行为

> ID：11220116
> 
> 赞同：2
> 
> 时间：2012-06-27T05:45:43.550
> 
> 标签：c++, c

我写在

```
// In file t.h

#ifndef __t_h__
#define __t_h__
static int abc;
#endif 
```

--

```
//In   main.c
    #include <stdio.h>
    #include "t.h"
    int main()
    {
        abc++;printf("%d \n", abc);
        test();
    } 
```

- -

```
//In test.c

#include <stdio.h>
#include "t.h"

void test()
{
    abc++;
    printf("%d \n", abc);
} 
```

当我运行该项目时，我发现`output`了`abc is 1 and 1`. 但是当我将其更改为`int abc`in 时`t.h`。的输出`abc = 1 and 2`。为什么当控件到达`test.c`文件时静态不保留该值。如果它不保留，那么为什么不提供`static variable can not be shared between/among`文件错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T05:47:34.723

`static`变量具有内部链接，这意味着每个翻译单元都有自己的副本。

因此，在您的程序中，每个`.cpp`包含的文件`t.h`都有自己的静态变量副本，这反过来意味着内存中有**两个** *对象*。您可以尝试打印他们的地址以确认这一点，因为它们会有所不同。

这使情况变得非常简单：如果您更改其中的对象`.cpp`，它不会反映在另一个`.cpp`文件中，因为另一个`.cpp`文件中的对象是*不同*的对象。为什么要改变？

但是当您将其更改为`int abc`（即不做`static`）时，每个翻译单元都有*相同*的对象。如果您在一个文件中更改它，它也会如预期的那样反映在其他文件中。

* * *

至于共享，那么是的，`static`对象可以在*同一个*翻译单元中的两个功能之间共享，但不能在两个翻译单元之间共享。

^(在这个网站上搜索翻译单元，你会得到很多关于它的话题。阅读它们，然后您将完全理解它。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T05:47:43.353

当您在头文件中声明变量时，会在包含头文件的每个***[翻译单元](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)***`static`中创建静态变量的副本。因此，您的程序中涉及的每个翻译单元都有自己的now 副本，因此您会得到观察到的行为。行为不是您所期望的，而是定义明确的行为。`abc`

> **`static`变量不能在文件之间共享？**

不，他们不可能！这就是制作它们的目的`static`

`static`变量有***[内部联系](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)***。它们的范围仅限于声明它们的翻译单元。它们无法在 TU 之外访问。如果您想在不同的翻译单元之间共享相同的变量，您应该删除`static`并使用`extern`，这为变量提供了***外部链接***，从而在不同的翻译单元中可见。

好读：
[如何使用 extern 在源文件之间共享变量？](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T05:59:14.490

预处理器处理完您的代码后， main.c 看起来像

```
// omitted stuff from stdio
static int abc;
int main()
{
    abc++;printf("%d \n", abc);
    test();
} 
```

和 test.c 看起来像

```
// omitted stuff from stdio
static int abc;
void test()
{
    abc++;
    printf("%d \n", abc);
} 
```

因此，每个文件都包含自己的变量`abc`，其他文件无法访问。

一种解决方案是将 th 更改为

```
#ifndef __t_h__
#define __t_h__
extern int abc;
#endif 
```

然后将 main.c 更改为

```
#include <stdio.h>
#include "t.h"
int abc;
int main()
{
    abc++;printf("%d \n", abc);
    test();
} 
```

你可以这样想：现在`int abc`你的程序中只有一个，在 main.c 但 test.c 知道它的存在，因为它`extern int abc`告诉 test.c 在项目的其他地方有一个整数`abc`，它可以在链接时找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T06:11:00.200

在 C 中，`static`有两种用法：

1、使用`static`关键字限制var在翻译单元中的作用域。为了简单起见，如果您有两个文件：`a.c`，`b.c`并且您写道：

```
static int varA; 
```

in `a.c`，那么这个意思`varA`只能用 in `a.c`，如果要使用`varA`in `b.c`，你应该去掉`static`关键字，然后加上`extern int varA;`in `b.c`，人们通常做的就是我们创建另一个名为 :的文件`a.h`，然后写入`extern int varA;`in `a.h`，我们简单地`include "a.h"`in `b.c`，所以我们可以编写我们想要外部的每个变量`a.h`并使用单个`include "a.h"`变量使这些变量或函数在其他`.c`文件（即源文件）中合法

2、用于在函数`static`中定义a `local variable`，例如：

```
int TheFunction()
{
  static int var = 0;
  return ++var;
} 
```

因为你`static`在局部变量上使用了关键字，所以这个变量在返回`var`时不会丢失。`TheFunction()`

第一次打电话`TheFunction()`会收到`1`，第二次打电话`TheFunction()`会收到`2`，以此类推。

**接下来，让我们看看静态在 C++ 中的用法。**

因为任何 C++ 编译器都可以编译 C 代码，所以上面的 2 个用法也在 C++ 中。

另外两种用法是： 1、静态成员变量。2、静态成员函数。

直接看代码：

```
#include <iostream>

using namespace std;

class Test
{
public:
    Test() : m_nNormalVar(0)
    {

    }
public:
    // You need to init this static var outside the class
    // using the scope operator:
    // int Test::m_nStaticVar = 0;
    static int m_nStaticVar;

    // You can init this const static var in the class.
    const static int m_nConstStaticVar = 10;

    // This is just a normal member var
    int m_nNormalVar;
};
int Test::m_nStaticVar = 0;

int main(int argc, char *argv[])
{
    Test a;
    Test b;
    a.m_nStaticVar++;
    a.m_nNormalVar++;
    cout << b.m_nStaticVar << endl;
    cout << b.m_nNormalVar << endl;

    return 0;
} 
```

`a`并且`b`是类的对象，`Test`它们具有相同`m_nStaticVar`的和相同的`m_nConstStaticVar`，但它们有自己的`m_nNormalVar`this 是一个静态成员变量。

```
#include <iostream>

using namespace std;

class Utility
{
public:
    // This is a static member function, you don't
    // need to have a concrete object of this class
    // to call this function.
    static int SelectMax(int a, int b)
    {
        return a > b ? a : b;
    }
};

int main(int argc, char *argv[])
{
    // No objects of class Utility
    cout << Utility::SelectMax(2, 1) << endl;

    return 0;
} 
```

所以这是 C++ 中类的静态成员函数。

这四种static的用法我都知道了，如果还有其他用法，请帮忙编辑本帖，thx:)

**编辑：**

**添加静态全局函数**

1、使用`static`关键字限制函数在翻译单元中的作用域。为了简单起见，如果您有两个文件：`a.c`，`b.c`并且您写道：

```
static void StaticFunction(); 
```

in `a.c`，所以你只能调用`StaticFunction()`in `a.c`，如果你想调用这个函数，`b.c`你应该删除`static`关键字，然后在使用前删除它。或者只是在里面声明`a.h`它`include "a.h"``b.c`

# prototypejs - 带有两个手柄的 Scriptaculous 滑块价格范围滑块

> ID：11220120
> 
> 赞同：0
> 
> 时间：2012-06-27T05:46:07.533
> 
> 标签：prototypejs, scriptaculous

我正在使用 Scriptaculous 创建一个带有两个手柄的价格范围滑块，表示最小值和最大值。如何将最小值和最大值存储在单独的隐藏字段中。

当前脚本如下，

```
<div id="price-range" class="filter-track">
    <span id="price-min" class="filter-handle" title="Scroll to set your minimum value">&gt;&gt;</span>
    <span id="price-max" class="filter-handle" title="Scroll to set your maximum value">&lt;&lt;</span>
</div>
<input type="hidden" name="price" id="beds" value="0,100"/>

var loadPriceSlider = function () {

        var handles = [$('price-min'), $('price-max')];

        // horizontal slider control with preset values
        new Control.Slider(handles, 'price-range', {
            range:$R(0, 5000, false),
            sliderValue: [0, 3000],
            values: [0, 100, 200, 300],
            restricted: true,
            onChange: function(v){ 
                            $('price').value = v; 
                        }
        });
    }; 
```

它将在`price`字段中存储逗号分隔的 (min,max) 值。但我想将其存储在单独的字段中。这该怎么做？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:59:13.287

您的代码尝试引用 $('price') 但名称为“price”的输入具有“beds”的“id”。

这是具有价格字段和附加字段的更正 HTML：

```
<div id="price-range" class="filter-track">
    <span id="price-min" class="filter-handle"
        title="Scroll to set your minimum value">&gt;&gt;</span>
    <span id="price-max" class="filter-handle"
        title="Scroll to set your maximum value">&lt;&lt;</span>
</div>
<ul>
  <li>price: <input type="text" name="price" id="price" value="0,100"/></li>
  <li>myRange <input type="text" name="myRange" id="myRange" value="0,100"/></li>
</ul> 
```

和 JavaScript：

```
var handles = [$('price-min'), $('price-max')];
// horizontal slider control with preset values
new Control.Slider(handles, 'price-range', {
    range: $R(0, 5000, false),
    sliderValue: [0, 3000],
    values: [0, 100, 200, 300],
    restricted: true,
    onChange: function(val){ 
        $('price').value = val; 
        $('myRange').value = val; 
    }
}); 
```

这有效，加载这些 JavaScript：

```
<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.0.0/prototype.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/scriptaculous/1.9.0/scriptaculous.js?load=slider"></script> 
```

# algorithm - 二叉树 - 删除

> ID：11220121
> 
> 赞同：1
> 
> 时间：2012-06-27T05:46:09.667
> 
> 标签：algorithm, binary-tree

我基本上需要一种保证 O(log n) 删除的方法。这可以用二叉树完成，还是总是最坏的情况 O(n)？

如果我每次都平衡树怎么办？

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:56:24.460

您需要一个平衡的二叉树才能保证工作。红黑树是平衡树结构的一个例子，实现起来并不难。

[红黑树（维基）](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)

这是一个[很好的讲座](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/video-lectures/lecture-10-red-black-trees-rotations-insertions-deletions/)..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T05:50:12.553

如果您正在寻找平衡二叉树，您可以使用“堆”

[http://en.wikipedia.org/wiki/Heap_(data_structure](http://en.wikipedia.org/wiki/Heap_(data_structure) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T05:55:30.083

你需要一个[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree#Deletion)

正如上面的wiki页面所说：

*因此在最坏的情况下，它需要的时间与树的高度成正比*

这意味着如果您可以使其始终保持平衡，则可以获得 O(logN) 进行删除

# jsp - 如何将 Jsp 文件集成到 ColdFusion？

> ID：11220122
> 
> 赞同：0
> 
> 时间：2012-06-27T05:46:14.503
> 
> 标签：jsp, coldfusion

我使用 ColdFusion 创建了一个网页。在该 cfm 文件中，我有以下用于重定向的标记：

```
<a href="pingdirect.jsp?Directory=#insdirs.ID_Directory#&Qlid=#inc_Requestor#">Grant 
```

这是我的`Pingdirect.jsp`文件：

```
String param=request.getParameter("Directory");                   
String qid=request.getParameter("Qlid");           
try {
    String command1="Runas /user:"+param+" /grant "+qid+":(OI)(CI)(M,RX,W)\"";
    Runtime rt = Runtime.getRuntime();
    Process p=rt.exec("cmd /c start" +command1);
} catch(Exception e) {
    System.out.println(e);
} 
```

我的问题是，当我单击“授予”时，它会将页面重定向到`pingdirect.jsp`. 但它不会打开命令提示符。

谁能指导我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:47:31.233

您可以尝试将 getParameter 替换为 getAttribute；

```
String param=request.getAttribute("Directory");                   
String qid=request.getAttribute("Qlid"); 
```

并且，另外，验证属性确实存在；

```
if ((param == null) || (qid == null)) 
{
// MZ: Handle the exception here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:11:12.503

我将首先查看试图通过的参数......

请记住，在 jsp 中，GET 和 POST 变量之间似乎没有区别，而在 ColdFusion 中，它们分别存在于 URL 和 FORM 范围内。

insdirs.ID_Directory 和 inc_Requestor 来自哪里，是否有可能没有设置或设置不正确。

如果您手动导航到 pingdirect.jsp?Directory=[expected value]&Qlid=[expected value] 页面会发生什么（以及查询字符串（url 参数）中需要哪些值？

我建议您在一种情况下保留所有通过查询传递的变量名称（因此制作 Directory 目录和 Qlid qlid）。

如果您可以手动到达那里并且参数被正确传递，那么可能是时候开始逐行调试 jsp 页面了。

本

# qt - 如何在 Qt 中获取所有正在运行的进程

> ID：11220124
> 
> 赞同：3
> 
> 时间：2012-06-27T05:46:56.630
> 
> 标签：qt, process, operating-system

我有两个问题：

1.  Qt 中是否有任何 API 可用于获取所有正在运行的进程？
2.  给定一个进程的名称，我可以检查当前是否有这样的进程在运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:46:04.070

众所周知，流程 API 依赖于平台。[Qt 仅提供了使用QProcess](http://doc.qt.nokia.com/4.7-snapshot/qprocess.html)生成新进程的最低要求。与系统上的任何进程（您没有启动）进行交互已经超出了它的深度。

它也超出了[Boost.Process](http://www.highscore.de/boost/process/process/introduction.html#process.introduction.overview)之类的范围。好吧，至少现在是这样。注意他们的评论：

> Boost.Process 的长期目标是在操作系统上提供一个可移植的抽象层，允许程序员管理任何正在运行的进程，而不仅仅是那些由它产生的进程。由于提供此类接口的复杂性，该库目前仅专注于子进程管理。

我不知道用于跨平台任意进程列表和管理的任何好的 C++ 库。您必须选择您想要支持的平台并调用它们的 API。（或者调用某种外部实用程序，它会为您提供所需的信息。）

# facebook - 任何 facebook api 都可以根据经度和纬度获取城市/地点 ID

> ID：11220126
> 
> 赞同：1
> 
> 时间：2012-06-27T05:47:39.260
> 
> 标签：facebook, geolocation, location

我可以使用 html5 获取当前的纬度和经度。我试过了

[https://graph.facebook.com/search?type=place&value=1¢er=12.9715987,77.59456269999998&distance=1000&limit=100&offset=0](https://graph.facebook.com/search?type=place&value=1&center=12.9715987,77.59456269999998&distance=1000&limit=100&offset=0)

通过 facebook 控制台。它给了我带有地点 ID 的地点列表。但我想要的是 City 的 place id。

# sql - 如何使用 SQL Server 从文本文件中提取十六进制值？

> ID：11220128
> 
> 赞同：0
> 
> 时间：2012-06-27T05:48:01.943
> 
> 标签：sql, sql-server-2008, stored-procedures, hex

我需要使用 SQL Server 存储过程从文本文件中提取十六进制值。

我编写了`068F 015A 0000 01A7 69 019A 6B 00F1 6A`手动提供输入（十六进制值 - ）的过程，但我需要传入一个**文件名**作为输入。我必须从该文件中**提取内容**。

我的文件内容如下所示：

```
V( 068F 015A 0000 01A7 69 019A 6B 00F1 6A )
V( 0665 0158 0000 01A8 68 0186 6B 00EE 6A )
V( 0687 017A 0000 01C3 67 018A 69 00F9 69 )
V( 067F 0171 0000 01AF 66 01A4 68 00F6 67 )
V( 06C2 0162 0000 01AA 64 0191 66 0150 65 )
V( 07E7 0163 0000 01B3 62 0195 64 0213 64 )
V( 0876 0166 0000 01CA 60 0214 62 01EF 62 )
V( 0BA1 015F 0000 021B 5E 039C 60 024B 60 )
V( 0DC9 014D 0007 01A2 5B 0426 5C 0407 5D )
V( 0E30 0140 000A 013E 5B 04A2 5B 043A 5C )
V( 0E6B 0130 000B 013C 5A 04B4 5A 046D 5B )
V( 0DDC 0150 0011 015A 58 052A 59 0399 5A )
V( 0C1C 0164 0001 013E 55 0456 56 03A4 56 )
V( 0CF0 02EA 0000 01B0 55 0534 56 0338 57 )
V( 0B86 03A1 0000 01D3 57 0461 58 02D6 59 )
V( 0950 0236 0000 013F 59 03A1 5A 0226 5A )
V( 0847 0279 0000 00CC 59 03A7 59 01E1 5B )
V( 0734 0203 0000 0078 5B 037D 5B 0156 5D )
V( 075D 038B 0000 00DD 5E 0306 5E 01E3 60 )
V( 073E 02C6 0000 0117 61 028A 62 0191 63 )
V( 0606 0183 0000 0095 62 01C8 63 01A7 64 )
V( 0793 0310 0000 00D4 5F 02CF 5F 020A 61 )
V( 07C2 03C0 0000 011D 5D 0301 5D 0211 5E )
V( 080A 043B 0000 0170 5E 031C 5E 01E6 60 )
V( 06FD 041C 0000 0129 60 02B1 60 01D5 61 )
V( 05D2 03A3 0000 0139 62 014E 62 0238 63 )
V( 06CC 046E 0000 0153 62 0205 62 0240 63 ) 
```

请帮我..

我为单个十六进制值尝试过这样

```
set @sting='068F 015A 0000 01A7 69 019A 6B 00F1 6A'
    set @string=replace(@string,' ',',')
    SET @Delimiter = ','
    SET @string = @string + @Delimiter
    SET @Pos = charindex(@Delimiter,@string)
    while(@Pos <> 0)
    begin
    select @mid ='0x'+substring(@string,1,@Pos - 1)
    set @query='select convert(int,'+@mid+')' 
    insert @word execute (@query)
    select @value=value from @word 
    SET @string = substring(@string,@pos+1,len(@string))
    SET @pos = charindex(@Delimiter,@string)
    end 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:58:58.410

我找到了一种从文本文件中读取内容的方法。

```
alter PROCEDURE ReadFromTextFile

@FileName VARCHAR (1024)

AS
DECLARE @OLEResult INT
DECLARE @FS INT
DECLARE @FileID INT
DECLARE @Message VARCHAR (8000)
drop table hex_temp
create table hex_temp (id int identity(1,1),value varchar(max))
-- Create an instance of the file system object
EXECUTE @OLEResult = sp_OACreate 'Scripting.FileSystemObject', @FS OUT
IF @OLEResult <> 0
BEGIN
PRINT 'Scripting.FileSystemObject'
PRINT 'Error code: ' + CONVERT (VARCHAR, @OLEResult)
END

-- Open the text file for reading
EXEC @OLEResult = sp_OAMethod @FS, 'OpenTextFile', @FileID OUT, @FileName, 1, 1
IF @OLEResult <> 0
BEGIN
PRINT 'OpenTextFile'
PRINT 'Error code: ' + CONVERT (VARCHAR, @OLEResult)
END

-- Read the first line into the @Message variable
EXECUTE @OLEResult = sp_OAMethod @FileID, 'ReadLine', @Message OUT

-- Keep looping through until the @OLEResult variable is < 0; this indicates that the end of the file has been reached.
WHILE @OLEResult >= 0
BEGIN
insert into hex_temp(value) values (@Message)
EXECUTE @OLEResult = sp_OAMethod @FileID, 'ReadLine', @Message OUT
END

EXECUTE @OLEResult = sp_OADestroy @FileID
EXECUTE @OLEResult = sp_OADestroy @FS 
```

# c++ - 包含前导零的输入

> ID：11220129
> 
> 赞同：1
> 
> 时间：2012-06-27T05:48:06.813
> 
> 标签：c++

在 c++ 中，如果我们输入一个包含前导零的整数，它们将是任何错误。

例如：

```
 int a;
 cin>>a; 
```

我们输入 00 或 01。

或在字符串的帮助下输入是一个更好的主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:52:20.083

整数（或浮点数）没有前导零。如果要保留前导零，则必须将输入作为字符串读取，并在需要时将其转换为数字。或者，您可以在打印结果时使用格式添加前导零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T07:05:02.533

> 在 c++ 中，如果我们输入一个包含前导零的整数，它们将是任何错误。

根据输入流格式标志的设置，您可能无法获得预期结果。默认值是期望用户输入始终为十进制。前导零无效。如果我们通过调用来关闭它`std::cin.unsetf()`呢？

```
int main () {
  int i;
  std::cin.unsetf (std::ios::dec);
  while (std::cin >> ii) {
    std::cout << i << "\n";
  }
} 
```

The output will be 25 if you enter 25, but if you enter 025 the output is 21\. That's because C++ now interprets a leading zero on input to mean the number that follows is in octal (or in hexadecimal in the case of a leading 0x or leading 0X).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:36:14.613

前导零将被修剪掉。它不会存储在内存中。

# powershell - 使用powershell进行无重复组合？

> ID：11220130
> 
> 赞同：1
> 
> 时间：2012-06-27T05:48:09.200
> 
> 标签：powershell

我是 powershell 的新手，但想知道如何在不重复的情况下获得给定数字的组合？

例如

```
$a = (1,2,3,4)
$n = 4
$k = 2 
```

输出 ：-

```
12
13
14
23
24
34 
```

如果 K = 3 那么

```
123
124
134
234 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:17:14.973

只是针对该特定情况的快速解决方案，我认为它没有太大价值，因为我觉得有为此类练习设计的工具... ;)

```
$a = (1,2,3,4)

$rest = New-Object Collections.ArrayList
$a[1..($a.Length - 1)] | foreach { $rest.Add($_) | Out-Null }

$prefix = $a[0]

$(while ($rest) {
    foreach ($suffix in $rest) {
        -join ($prefix, $suffix)
    }
    $prefix = $rest[0]
    $rest.RemoveAt(0)
}) -join ', ' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:35:44.530

你可以试试这个：

```
$List = "A","B","C","D","E","F","G","H"
$k = 3

Add-Type @"
public class Shift {
     public static int   Right(int x,   int count) { return x >> count; }
     public static uint  Right(uint x,  int count) { return x >> count; }
     public static long  Right(long x,  int count) { return x >> count; }
     public static ulong Right(ulong x, int count) { return x >> count; }
     public static int    Left(int x,   int count) { return x << count; }
     public static uint   Left(uint x,  int count) { return x << count; }
     public static long   Left(long x,  int count) { return x << count; }
     public static ulong  Left(ulong x, int count) { return x << count; }
  }                    
"@

function CombinationWithoutRepetition ([int]$k, $List)
{
  Function IsNBits ([long]$value, $k, $length)
  {
    $count = 0
    for ($i = 0 ; $i -le $length ; $i++)
    {
      if ($value -band 1)
      {
        $count++
      }
      $value = [shift]::Right($value,1)
    }

    if ($count -eq $k)
    {
      return $true
    }
    else
    {
      return $false
    }
  }

  Function BitsToArray ([long]$value, $List)
  {
    $res = @()
    for ($i = 0 ; $i -le $List.length ; $i++)
    {
      if ($value -band 1)
      {
        $res += $List[$i]
      }
      $value = [shift]::Right($value,1)
    }  

    return ,$res
  }

  [long]$i = [Math]::Pow(2, $List.Length)
  $res = @()
  for ([long]$value=0 ; $value -le $i ; $value++)
  {
    if ((IsNBits $value $k $List.Length) -eq $true)
    {
      #write-host $value
      $res += ,(BitsToArray $value $List)
    }
  }
  return ,$res
}

Clear-Host
$res = CombinationWithoutRepetition $k $List
$res.count
$res | %{$_ |% {}{Write-Host -NoNewline $_}{Write-Host ""}} 
```

# jquery - 无法返回 .Queue("fx").length 的值

> ID：11220131
> 
> 赞同：0
> 
> 时间：2012-06-27T05:48:10.040
> 
> 标签：jquery, raphael, jquery-animate

当我尝试打电话时

```
 paper.queue("fx").length 
```

我得到对象不支持的错误。我可以知道如何调用 .queue("fx").length。我可以在具有多个 DOM 的 div 中使用它吗？我正在尝试一步一步地制作动画。

```
 <div  id="Paper"></div>

 paper = Raphael('Paper', paperWidth, paperHeight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:51:04.640

只是一个猜测。

如果你将你的事件绑定到一个 ID，你应该把它放在`#`它前面。

```
 paper = Raphael('#Paper', paperWidth, paperHeight); 
```

让我知道结果如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:54:58.040

你需要有 jquery 1.7.1 或最新版本`.queue`

尝试 -

```
$('#Paper').queue("fx").length 
```

阅读更多关于队列 - [http://api.jquery.com/queue/](http://api.jquery.com/queue/)

# jquery - 如何获取未包含任何元素的文本并将其放入 p 元素中

> ID：11220144
> 
> 赞同：-1
> 
> 时间：2012-06-27T05:49:33.667
> 
> 标签：jquery

如何获取此标记中的文本？

```
<div itemprop="description">
  <p>Testing article....</p>
  <div class="inline-image inline_image_240x240">
    <img alt="" title="" src="http://kite.dev.cnngo.com/sites/default/files/imagecache/inline_image_240x240/2012/06/27/600x600_5.png">
    <div class="in-captioninline_image_240x240"></div>
  </div>
  I want this to put inside the blank <p> element below.
  <p></p>
  <p>Another p.....</p>
</div> 
```

我想变成这样。

```
<div itemprop="description">
  <p>Testing article....</p>
  <div class="inline-image inline_image_240x240">
    <img alt="" title="" src="http://kite.dev.cnngo.com/sites/default/files/imagecache/inline_image_240x240/2012/06/27/600x600_5.png">
    <div class="in-captioninline_image_240x240"></div>
  </div>
  <p>I want this to put inside the blank <p> element below.</p>
  <p>Another p.....</p>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:41:44.490

# **完整编辑：**

我懂了。您将无法仅将纯文本移动到该“P”标签中，因此您需要在另一个具有类/id 的 P 中说唱它。在这种情况下，我会给它上课。你也不能随便有一个“

" 在那里。这会破坏 html。所以我只是将其更改为："<p>" 所以它会变成文本而不是干扰 HTML

将您的 HTML 更改为：

```
<div itemprop="description">
  <p>Testing article....</p>
  <div class="inline-image inline_image_240x240">
    <img alt="" title="" src="http://kite.dev.cnngo.com/sites/default/files/imagecache/inline_image_240x240/2012/06/27/600x600_5.png">
    <div class="in-captioninline_image_240x240"></div>
  </div>
  <p class="p">I want this to put inside the blank &lt;p> element below.</p>
  <p></p>
  <p>Another p.....</p>
</div> 
```

[您可以使用.next()](http://api.jquery.com/next)将其移动到下一个 P ：

```
var el = $('div[itemprop="description"]').find('.p');
el.next().text(el.text()).prev().remove(); 
```

[JSFIDDLE](http://jsfiddle.net/shawn31313/R5B6j/)

# jquery - 序列化表单但一些元素

> ID：11220145
> 
> 赞同：0
> 
> 时间：2012-06-27T05:50:00.433
> 
> 标签：jquery, forms

我有一个表单，其中包含几个 div 中的元素。

根据下拉菜单，其中一些 div 可能会被隐藏，而另一些则会显示。

我想仅使用可见元素而不是隐藏的 div 来序列化表单。

有什么办法可以过滤掉那些隐藏的div。

试过这个但不起作用

`$('<tr />').data($(this).find('form:not(.child:hidden)').serializeObject());`

serializeObject 是一个将 serializeArray 转换为 Object 的插件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T05:54:09.260

假设在您的上下文`this`中是`<form>`尝试以下操作：

```
var data = $(':input:visible', this).serialize();
$('<tr />').data(data); 
```

这是一个[现场演示](http://jsfiddle.net/5UgpM/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:52:26.180

如果您`disable`未使用表单元素，它们不会随表单一起提交。这可能是最简单/最快的解决方案。

从上一个关于 SO 的问题中，我在本地扩展中定义了这些：

```
/* 
    Extension methods to quickly enable/disable form elements 
    @@see http://stackoverflow.com/questions/625109/jquery-script-load-timing/625126#625126
*/
$.fn.disable = function() {
    return this.each(function() {
        if (typeof this.disabled != "undefined") this.disabled = true;
    });
}

$.fn.enable = function() {
    return this.each(function() {
        if (typeof this.disabled != "undefined") this.disabled = false;
    });
} 
```

因此，您可以执行以下操作：

```
$('.hidden-div-class').disable(); 
```

然后序列化表格。

# android - 广播接收器中的 getDefaultSharedPreferences

> ID：11220146
> 
> 赞同：0
> 
> 时间：2012-06-27T05:50:11.147
> 
> 标签：android, android-preferences

我只是在猜测如何从 BroadcastReceiver 中的应用程序访问 DefaultSharedPreferences（在 PreferenceActivity 中设置），知道 onReceive 方法带有 Context 和 Intent 吗？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:50:11.460

查看它的源码，我们可以看到 getDefaultSharedPreferences 实际上使用了 getSharedPreferences。所以我们可以像 getDefaultSharedPreferences 一样使用 getSharedPreferences。

在这种特定情况下（广播接收器的 onReceive）：

```
SharedPreferences settings = context.getSharedPreferences(context.getPackageName() + "_preferences", Context.MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:06:25.953

在广播接收器中：

```
PreferenceManager.getDefaultSharedPreferences(context) 
```

# java - 将素数代码合并到 JPanel - Java

> ID：11220152
> 
> 赞同：0
> 
> 时间：2012-06-27T05:50:26.047
> 
> 标签：java, jframe, jpanel, combinations, prime-factoring

我的 JPanel 所有设置都有一个可用的 JFrame GUI。我正在尝试组合我已经设置和工作的两个不同的代码。第一个代码是 JPanel 中的文本转换器 toUpperCase，第二个代码是质数因子（不是质数）代码。我一直试图让 JPanel 为用户输入的任何数字提供素因子的输出。这就是我所拥有的......

JPanel 代码

```
public class Prime extends JPanel { 
    private JLabel formattedText;

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.getContentPane().add(new Prime());
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);
    }

    public Prime(){
        setLayout(new BoxLayout(this,BoxLayout.Y_AXIS));
        JPanel panel = new JPanel(); panel.setPreferredSize(new Dimension(640,100));
        JLabel label = new JLabel("Enter a number to check for it's prime number(s).");
        JTextField field = new JTextField("0");
        field.addActionListener(new FieldListener());
        add(label);
        add(field);
        add(panel);

        panel = new JPanel(); panel.setPreferredSize(new Dimension(640,380));
        formattedText = new JLabel();
        panel.add(formattedText);
        add(panel);
    }

    private class FieldListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            JTextField field = (JTextField)event.getSource();
                formattedText.setText(field.getText().toUpperCase()); // I know this is wrong... I can't figure out what to change here to get it to pull the code below.
            }
    }
    public class PrimeFactors {

    }
} 
```

这是素数代码

```
public class Temp {

    static int primeCheck = 1;

    public static void main(String[] args) {
        System.out.println("Enter a number whose Prime factors are desired: ");
        Scanner numS = new Scanner(System.in);
        int numPriFac = 0;
        if (numS.hasNextInt()) {
            numPriFac = numS.nextInt();
        }

        System.out.println("All the Prime Factors of the entered number are:");

        for (int tap = 1; tap <= numPriFac; tap++) {
            if (numPriFac % tap == 0) {
                for (int primeTest = 2; primeTest < tap; primeTest++) {
                    if (tap % primeTest == 0) {
                        primeCheck = 1;
                        break;
                    } else {
                        primeCheck = 0;
                    }
                }
                if (primeCheck == 0 || tap == 2) {
                    System.out.print(tap + " ");
                }
            }
        }
    }
} 
```

底部的最后一个 PrimeFactors 代码只是我试图让它自己工作时留下的东西。非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:15:54.147

第一步：换行

```
 public static void main(String[] args) { 
```

类似于

```
 public static String primeFactors(int number) { 
```

并使该方法使用提供的参数`number`而不是要求输入。

第 2 步：在其中创建一个[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)`primeFactors`并将所有调用更改`System.out.print`为调用`stringBuilder.append()`

第三步：设置`stringBuilder.toString()`为返回值`primeFactors`

第四步：换行

```
 formattedText.setText(field.getText().toUpperCase()); 
```

至

```
 formattedText.setText(Temp.primeFactors(Integer.parseInt(field.getText()))); 
```

我将把错误处理和输入安全保护留给你。

# java - Jsoup 在元素之前获取评论

> ID：11220153
> 
> 赞同：2
> 
> 时间：2012-06-27T05:50:34.363
> 
> 标签：java, jsoup

假设我有这个 html：

```
<!-- some comment -->
<div class="someDiv">
... other html
</div>
<!-- some comment 2 -->
<div class="someDiv">
... other html
</div> 
```

我目前正在获取 class == someDiv 的所有 div 并抓取它们以获取信息。为此，我只是这样做：

```
Document doc = Jsoup.connect(url).get();
Elements elements = doc.select(".someDiv");
for (Element element : elements) {
    //scrape stuff
} 
```

在 for 循环中，有没有办法在我所在的特定 div.someDiv 元素之前找到评论标签？

如果这是不可能的，我是否应该根据这个要求以不同的方式解析这个 html 结构？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:36:44.147

虽然这个问题已经存在几个月了，但我的回答是为了完整性。如何使用`previousSibling`来获得前面的`Node`. 当然，在你可能想要检查的真实代码中，你是否真的得到了一个`Comment`。

```
String html = "<!-- some comment --><div class=\"someDiv\">... other html</div><!-- some comment 2 --><div class=\"someDiv\">... other html</div>";
Document doc = Jsoup.parseBodyFragment(html);
Elements elements = doc.select(".someDiv");
for (Element element : elements) {
    System.out.println(((Comment) element.previousSibling()).getData());
} 
```

这会产生：

```
some comment 
some comment 2 
```

（使用 jsoup 1.6.1 和 1.6.3 测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:31:21.833

尝试这样的事情，遍历所有评论并检查他们的*兄弟姐妹*是否是你所追求的 div

```
for (int i = 0; i < doc.childNodes().size(); i++) {
        Node child = doc.childNode(i);
        if (child.nodeName().equals("#comment")) {
            //do some checking on child.nextSibling() , like hasAttr or attr to figure out if it the div you were expecting for...
        }
} 
```

查看[jsoup 节点文档](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:02:23.820

元素元素 = doc.select("div.someDiv");

[http://jsoup.org/cookbook/](http://jsoup.org/cookbook/)

# ios - iPad 拆分视图在另一个视图中实现

> ID：11220154
> 
> 赞同：0
> 
> 时间：2012-06-27T05:50:34.413
> 
> 标签：ios, uisplitviewcontroller, ipad, uisplitview

我正在创建一个 iPad 应用程序，它有几个视图来加载数据，但是对于一个视图，我需要添加拆分视图。我不需要在其他视图中拆分视图。它们只是详细信息页面。我通过网络搜索，发现了很多基于 iPad 拆分视图的教程。但问题是他们都将项目创建为拆分视图项目，或者他们创建了一个窗口基础应用程序并将滑动视图添加到委托。我不需要这样做，我只需要为一个视图实现这个拆分视图。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:03:27.703

您可以在导航控制器中添加拆分视图。即使拆分视图是一个容器视图控制器，并且 Apple 在文档中建议所有容器不应嵌入其他容器中，在导航控制器中添加拆分视图也可以正常工作，而且我从未注意到这样做有任何副作用。

基本上你应该做的是： - 在应用程序委托中创建一个 UINavigationController 并将其用作应用程序窗口的根视图 - 如果您不想看到它，请隐藏导航控制器导航栏（显示带有主导航栏的拆分视图顶部不好看...） - 然后在导航栏中添加您的视图控制器。

示例：假设您有此应用程序视图序列：

第一视图（完整视图 = 详细信息页面） 第二视图（拆分视图） 第三视图（完整视图 = 详细信息页面）

因此，您可以将 FIRST 和 THIRD 表示为标准视图控制器（全屏），而 SECOND 将是拆分视图。您的应用程序将通过创建主导航控制器、在其上添加 FIRST 作为顶部控制器并使用主导航控制器作为窗口的根视图来初始化。

如果您不想要推荐的推送/弹出方法，则可以使用导航控制器推送、弹出方法在这些视图之间切换或直接更改导航控制器“viewControllers”数组。

如果您需要根据顶部视图的类型向导航控制器添加特殊行为，只需将您的应用程序委托注册为导航控制器委托（或者如果您不想使您的应用程序复杂化，则可以使用专用于此的“主控制器”对象代表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:07:11.797

我不是 100% 确定，但在我看来，您不能仅在视图层次结构中的某个位置使用 SplitView。

Apple 的预期方式是使用 SplitViewController 作为顶级控制器。它的左侧可以包括带有导航控制器的向下钻取机制，因此您可以向下钻取层次结构，右侧将显示您在左侧选择的项目的详细信息。

如果您需要一个包含某种拆分机制的视图，您可能必须自己编写代码。甚至更好：找到可以在 UI 中使用的其他机制。

您现在如何切换视图层次结构？也许您可以将现有的 UI 集成到 SplitViewController 中？

# android - 拾取图像总是给出风景图像

> ID：11220160
> 
> 赞同：2
> 
> 时间：2012-06-27T05:51:02.937
> 
> 标签：android, file, bitmap, image-gallery

我使用以下代码从手机图库中获取图像：

```
Intent intent = new Intent();
  intent.setType("image/*");
  intent.setAction(Intent.ACTION_GET_CONTENT);
  startActivityForResult(Intent.createChooser(intent, "Select Picture"),
    USE_LIBRARY_PIC_REQUEST); 
```

在 onActivityResult() 中，它给出了文件路径，我尝试使用文件路径获取位图，但它总是在横向视图中给出它。有没有办法始终以纵向视图获取该图像？获取文件路径的代码：

```
Uri selectedImageUri = data.getData();
    selectedImagePath = getPath(selectedImageUri); 
```

这就是我使用文件路径获取位图的方式：

```
Bitmap bmp=BitmapFactory.decodeFile(selectedImagePath); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:05:35.070

要获取原始图像，您可以使用此方法。

```
public static Bitmap getBitmap(String uri, Context mContext) {

    Bitmap bitmap = null;
    Uri actualUri = Uri.parse(uri);
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inTempStorage = new byte[16 * 1024];
    options.inSampleSize = 2;
    ContentResolver cr = mContext.getContentResolver();
    float degree = 0;
    try {
        ExifInterface exif = new ExifInterface(actualUri.getPath());
        String exifOrientation = exif
                .getAttribute(ExifInterface.TAG_ORIENTATION);
        bitmap = BitmapFactory.decodeStream(cr.openInputStream(actualUri),
                null, options);
        if (bitmap != null) {
            degree = getDegree(exifOrientation);
            if (degree != 0)
                bitmap = createRotatedBitmap(bitmap, degree);
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return bitmap;
}

public static float getDegree(String exifOrientation) {
    float degree = 0;
    if (exifOrientation.equals("6"))
        degree = 90;
    else if (exifOrientation.equals("3"))
        degree = 180;
    else if (exifOrientation.equals("8"))
        degree = 270;
    return degree;
}

public static Bitmap createRotatedBitmap(Bitmap bm, float degree) {
    Bitmap bitmap = null;
    if (degree != 0) {
        Matrix matrix = new Matrix();
        matrix.preRotate(degree);
        bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                bm.getHeight(), matrix, true);
    }

    return bitmap;
} 
```

# javascript - 在 Internet Explorer 中使用 .css('display')=="none"

> ID：11220162
> 
> 赞同：0
> 
> 时间：2012-06-27T05:51:08.107
> 
> 标签：javascript, jquery, css, internet-explorer, visibility

我正在尝试测试某些东西的可见性

```
$(this).css('display')=="none"; 
```

问题是，它适用于 chrome、FF ......但不适用于 IE。到目前为止，我已经尝试过 IE 8 和 9。

有谁知道解决方法？这是非常令人沮丧的，因为一群人仍在使用 IE，而我不想失去那群人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T05:52:02.397

用于`$(this).is(":visible")`跨浏览器解决方案。

从文档：

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零。
> 
> 具有 visibility: hidden 或 opacity: 0 的元素被认为是可见的，因为它们仍然占用布局中的空间。

阅读更多：[http](http://api.jquery.com/visible-selector/) ://api.jquery.com/visible-selector/ 以及[如何判断元素是否可见](http://www.electrictoolbox.com/jquery-element-is-visible/)

# sql - sql场景中的JOINS

> ID：11220164
> 
> 赞同：0
> 
> 时间：2012-06-27T05:51:09.417
> 
> 标签：sql, join

我是 SQL 连接的新手。我有两张桌子

**版本**

```
Vid, VName, IsActive
1    V1     1
2    V2     0
3    V3     1 
```

**颠覆**

```
SVid,Vid,  VName
1     1     0.1
2     1     0.2
3     2     0.1 
```

在上表中，每个**版本**都有许多**子版本**。

我需要从上面的表中获取结果，输出应该是这样的。

```
Vid, VName, IsActive, SubVersionExists(Bit)
1    V1      1        1
2    V2      0        1
3    V3      1        0 
```

在上述结果集中，列名“ **SubVersionExists** ”表示版本在**Sub-Version**表中是否有 SubVersion 记录。

希望这能很好地解释问题场景。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:01:00.667

这是一个没有连接的版本，但使用`EXISTS (SELECT ... )`它返回一个布尔值：

[http://sqlfiddle.com/#!5/712bd/9](http://sqlfiddle.com/#!5/712bd/9)

```
SELECT
  Version.Vid, Version.VName, Version.IsActive,
  EXISTS (
    SELECT NULL FROM SubVersion WHERE SubVersion.Vid = Version.Vid
  ) AS SubVersionExists
FROM Version; 
```

或者，如果您的 sql 引擎没有将布尔值转换为 0/1，您可以使用`CASE`：

```
SELECT
  Version.Vid, Version.VName, Version.IsActive,
  CASE WHEN
    EXISTS (SELECT NULL FROM SubVersion WHERE SubVersion.Vid = Version.Vid)
  THEN 1 ELSE 0 END   AS SubVersionExists
FROM Version 
```

另一个带有`LEFT JOIN`+的版本`GROUP BY`，如果您不想使用`COUNT()`：

```
SELECT
  Version.Vid, Version.VName, Version.IsActive,
  CASE WHEN SubVersionVids.Vid IS NOT NULL
       THEN 1 ELSE 0 END   AS SubVersionExists
FROM      Version
LEFT JOIN (
  SELECT   SubVersion.Vid
  FROM     SubVersion
  GROUP BY SubVersion.Vid
) AS SubVersionVids
  ON SubVersionVids.Vid = Version.Vid; 
```

或者您可以使用`DISTINCT`而不是`GROUP BY`：

```
SELECT
  Version.Vid, Version.VName, Version.IsActive,
  CASE WHEN SubVersionVids.Vid IS NOT NULL
       THEN 1 ELSE 0 END   AS SubVersionExists
FROM      Version
LEFT JOIN (
  SELECT DISTINCT SubVersion.Vid
  FROM            SubVersion
) AS SubVersionVids
  ON SubVersionVids.Vid = Version.Vid; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T05:58:30.107

```
select v.vid,v.vname,v.isactive,count(s.svid) as SubVersionExists from 
Version v left join Sub-Version s on v.vid=s.vid group by v.vid; 
```

如果相应版本存在子版本，则此处`SubVersionExists's`的值将大于零。

* * *

```
select v.vid,v.vname,v.isactive, case when count(s.svid) > 0 then 1 else 0 end 
as SubVersionExists from Version v left join Sub-Version s on v.vid=s.vid 
group by v.vid; 
```

此查询将给出所需的结果，即`SubVersionExists's`如果相应版本存在子版本，则值为 1，否则为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:03:29.830

```
SELECT V.VID, V.NAME, V.ISACTIVE, 
CASE 
 WHEN COUNT(SV.SVID)=0 then '0'
 WHEN COUNT(SV.SVID)>0 then '1'
END 
VERSION V LEFT JOIN SUBVERSION SV ON V.VID=SV.VID
GROUP BY V.VID, V.NAME, V.ISACTIVE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T06:50:33.467

嘿，我还找到了一个解决这个问题的`CASE`方法`IS NOT NULL``DISTICT`

解决方案：

```
SELECT DISTINCT v.vid,v.vname,v.isactive,
    'SubVersionExists' = CASE WHEN vs.vid IS NOT NULL THEN 1 ELSE 0 END
FROM VERSION v
    LEFT OUTER JOIN 
subversion vs
ON v.vid = vs.vid 
```

# android - 当动作启动（AndEngine）时，如何让场景更新处理程序中断？

> ID：11220179
> 
> 赞同：1
> 
> 时间：2012-06-27T05:52:22.373
> 
> 标签：android, handler, andengine

我正在尝试使用更新处理程序来增加精灵的规模。但是，它不允许调用场景动作向上事件，因此精灵的大小会继续增加。当操作启动时，如何让更新处理程序中断？这就是我所拥有的：

更新处理程序：

```
scene.registerUpdateHandler(new IUpdateHandler() {

        @Override
        public void reset() {         
        }

        @Override
        public void onUpdate(float pSecondsElapsed) {
            if(fillerNum>-1){
                if(filler[fillerNum].active){

                    mPhysicsWorld.unregisterPhysicsConnector(mPhysicsWorld.getPhysicsConnectorManager().findPhysicsConnectorByShape(filler[fillerNum].sprite));
                    mPhysicsWorld.destroyBody(filler[fillerNum].body);

                    filler[fillerNum].sprite.setScale(filler[fillerNum].scale+=pSecondsElapsed*3);

                    filler[fillerNum].body = PhysicsFactory.createCircleBody(mPhysicsWorld, filler[fillerNum].sprite, BodyType.DynamicBody, FIXTURE_DEF);
                    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(filler[fillerNum].sprite, filler[fillerNum].body, true, true));
                }
            }               
        }
    }); 
```

以及现场触摸事件：

```
@Override
public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
     if(this.mPhysicsWorld != null) {
            if(pSceneTouchEvent.isActionDown()) {
                createFiller(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
                return true;
            }
            if(pSceneTouchEvent.isActionUp()){
                Log.e("Action UP", Boolean.toString(filler[fillerNum].active));
                createStationaryFiller();
            }
        }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:47:34.870

只需保存 UpdateHandler 的实例：

```
handler = new IUpdateHandler() {... etc 
```

当你想停止它时，打电话`scene.unregisterUpdateHandler(handler)`

# java - 当 CardLayout 更改时，从另一个面板获取 JTextField 的焦点

> ID：11220181
> 
> 赞同：1
> 
> 时间：2012-06-27T05:52:30.157
> 
> 标签：java, swing, jtextfield, cardlayout

嗨，我正在做的 Swing 应用程序需要帮助。我有一个包含两个面板的对话框，第一个面板有 CardLayout，第二个面板有 FlowLayout。第一个布局具有更改卡片布局的按钮，并且按钮单击被输入到第二个面板上的特定文本字段。每次卡片布局更改时，第二个面板上的文本字段都会失去焦点。如何获得第二个面板的特定文本字段的焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:11:06.827

当您单击按钮转到另一个面板时

在该按钮的“actionPerformed”中编写代码

```
actionPerformed(ActionListenet al)
{

//code..

textField.requestFocus();//what the textfield u wnat

} 
```

请参阅此链接[将焦点设置到文本字段](https://stackoverflow.com/questions/4640138/setting-the-focus-to-a-text-field)

# java - 当使用单个任务调用 ExecutorService.invokeAll() 时，效率如何（低）？

> ID：11220184
> 
> 赞同：3
> 
> 时间：2012-06-27T05:53:20.030
> 
> 标签：java, multithreading, threadpool, processing-efficiency

我有一些代码大量使用线程池，我通过创建`Collection<Callable<T>> tasks`和调用来使用线程池[`ExecutorService.invokeAll(tasks)`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)。

```
for (Future<Object> future : threadPool.invokeAll(tasks)) {
  Object object = future.get();
  // Calling thread effectively blocks on invokeAll().
} 
```

在我的应用程序中，大小`tasks`变化很大。事实上，大多数情况下都是用**单个任务**`ExecutorService.invokeAll()`调用的。我正在使用的[实现](http://www.docjar.com/html/api/java/util/concurrent/AbstractExecutorService.java.html#221)调用，[其实现](http://www.docjar.com/html/api/java/util/concurrent/ThreadPoolExecutor.java.html#1291)似乎总是在线程池中运行任务（从不在调用线程中）。**[`invokeAll()`](http://www.docjar.com/html/api/java/util/concurrent/AbstractExecutorService.java.html#221)[`ThreadPoolExecutor.execute()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#execute%28java.lang.Runnable%29)**

 **在单个任务的情况下，在当前线程中调用任务而不是将其发送到另一个线程会更有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:01:25.770

> 在单个任务的情况下，在当前线程中调用任务而不是将其发送到另一个线程会更有效吗？

是的，这样会更有效率。不过，这不是一个有趣的问题。有趣的问题是它的效率*有多*低——这取决于你的任务在做什么——以及你是否在你的应用程序中做了*足够*多的事情以使其在整体上很重要。

我们没有足够的信息来为您评估。如果您每秒执行数百万次单个琐碎任务（“从地图中获取值”），那么通过线程池的所有间接操作都会产生真正的影响。如果您的任务*实际上*做了大量工作，那么几乎可以肯定不值得额外的代码来处理您只有一个任务的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:03:03.683

当然，如果你只是在原地运行它，执行某些代码的总成本将会有所降低。您不是在构建集合、排队和出队、唤醒工作线程、在 CPU 必须分时共享的运行总数中添加另一个线程、将数据从一个堆栈移动到堆到另一个堆栈等。

不过，更高效并不会使它更“正确”。当前线程通常在做一些对时间相当敏感的事情，并将工作交给池，以便它可以回到它主要关注的任何任务，而无需等待工作完成。

如果“currentThread”是主要的 GUI 线程，并且你正在假装一个需要 30 秒的打印假脱机作业，一个 ExecutorService 的实现会说“哦，好吧，这里只有一个作业，我会运行它在当前线程中”实际上是非常错误的，您的用户会让您知道他们的 30 秒挂断有多么错误！**

# assembly - 指令“move #>$3,var”在 68k 汇编中是什么意思？

> ID：11220193
> 
> 赞同：3
> 
> 时间：2012-06-27T05:53:57.737
> 
> 标签：assembly, 68000

该指令 `move #>$3,var`在 68k 汇编中意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:39:30.547

我想到了。语法`#>`是在 68K 中强制长（立即）寻址模式的运算符，因此我的指令 `move #>$3,var`意味着 - 将值 $3 (0x03) 移动到变量，`var`强制在 68K 汇编中使用长寻址模式。我不确定支持此操作的处理器。

@drhirsch 几乎成功了。

# sql - 动态透视查询

> ID：11220196
> 
> 赞同：0
> 
> 时间：2012-06-27T05:54:18.313
> 
> 标签：sql, sql-server

以下查询执行良好...

```
select LIC,PF from (select * from tbl_DeductionHead )up
pivot(sum(DeductionPerAmount) for DeductionHead In (LIC,PF)) as pvt 
```

和输出看起来像，

```
LIC PF
900.00 NULL 
NULL 600.00 
```

但我的疑问是如何获得列的动态字段值..

那是 ，

```
select * from (select * from tbl_DeductionHead )up
pivot(sum(DeductionPerAmount) for DeductionHead In (*)) as pvt 
```

如何使用上述查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:17:21.777

要使 PIVOT 动态，您必须编写一个存储过程。

```
CREATE PROCEDURE dynPivot 
(
@select varchar(255), 
@pivotColumns varchar(255), 
@summaries varchar(100) 
) AS 

DECLARE @pivot varchar(max), @sql varchar(max), @selectForPivotColumns varchar(max)

SELECT @selectForPivotColumns = REPLACE(@select, 'SELECT', 'SELECT ' + @pivotColumns + ' AS rowValuesToColumns, ')

CREATE TABLE #pivot_columns (pivot_column varchar(100))

SELECT @sql = 'SELECT DISTINCT rowValuesToColumns FROM (' + @selectForPivotColumns + ') as t'

INSERT INTO #pivot_columns
EXEC(@sql)

SELECT @pivot = COALESCE(@pivot + ', ', '') + '[' + pivot_column + ']' FROM #pivot_columns

SELECT @sql = 
'
    SELECT * FROM
    (
        ' + @select + '
    ) AS t
    PIVOT
    (
        ' + @summaries + ' FOR ' + @pivotColumns + ' IN (' + @pivot + ')
    ) AS p
'

EXEC(@sql) 
```

然后你可以这样称呼它：

```
EXEC dynPivot 'SELECT * FROM tbl_DeductionHead', 'DeductionHead', 'SUM(DeductionPerAmount)'; 
```

# c# - 将接受参数的用户控件修改为位于 DataTemplate 中

> ID：11220198
> 
> 赞同：1
> 
> 时间：2012-06-27T05:54:35.560
> 
> 标签：c#, wpf, xaml

我有一个在其构造函数中接受多个参数的 UserControl。因为我现在绑定到 ViewModel 的集合，所以基于 ViewModel 加载 UserControl 的最佳方式似乎是使用 DataTemplate。

例如。

```
<DataTemplate x:Key="ContentTemplate" DataType="{x:Type vm:WhiteboardVM}">
   <local:WhiteboardUC  />
</DataTemplate> 
```

但是我仍然需要用户控件在初始化时具有参数。我怎样才能做到这一点？或者我有什么选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:51:24.453

可以使用 GUI 元素的参数化构造，`ObjectDataProvider`但**不允许使用动态参数值，**`ItemsControl.ItemTemplate`例如，如果您希望传递项目特定的参数值，则无法使用下面的数据模板！...

**XAML：**

```
<Window x:Class="LDAPAutocomplete.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:LDAPAutocomplete"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        Title="Window1" Height="300" Width="300">
    <Window.Resources>
        <DataTemplate x:Key="MyContentTemplate">
            <DataTemplate.Resources>
                <ObjectDataProvider x:Key="MyUserControlProvider"
                                    ObjectType="{x:Type local:MyButton}">
                    <ObjectDataProvider.ConstructorParameters>
                        <System:String>Test Me</System:String>
                    </ObjectDataProvider.ConstructorParameters>
                </ObjectDataProvider>
            </DataTemplate.Resources>
            <ContentPresenter
                   Content="{Binding
                        Source={StaticResource MyUserControlProvider}}" />
        </DataTemplate>
    </Window.Resources>
    <StackPanel>
        <local:LDAPAutocompleteTextBox/>
        <ContentControl
             ContentTemplate="{StaticResource MyContentTemplate}"
                   Content="123"/>
    </StackPanel>
</Window> 
```

**代码背后：**

```
public class MyButton : Button
{
    public MyButton(string content)
    {
        this.Content = content;
    }
} 
```

# android - 分享意图不给我选项

> ID：11220202
> 
> 赞同：1
> 
> 时间：2012-06-27T05:55:00.960
> 
> 标签：android

我正在开发一个应用程序，我想通过 facebook、twitter、gmail、message 或更多选项共享我的数据，这些选项由`share intent`do 提供，我只需转到此代码..

```
 Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE );
    sharingIntent.setType("text/plain");
    String shareBody = "Here is the share content body";
    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
    startActivity(Intent.createChooser(sharingIntent, "Share via")); 
```

但这里的问题是，当我运行一个应用程序时，它只显示消息屏幕（`to`等等，输入撰写和发送按钮）我不能给我所有选项。所以请帮我解决这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:58:25.083

如果您使用的是模拟器，这是因为 message 是唯一可以处理该类型共享的已安装应用程序。只能分享到已安装的应用，IE 如果没有安装推特客户端，则不能分享到推特。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:06:53.297

此代码段将触发安装在您的模拟器或您的设备中能够发送 MIME 类型为的内容的所有应用程序。因为`text/plain`在您的模拟器/设备中只有邮件客户端，您将没有其他选择！！。

[此处](http://android-developers.blogspot.com/2009/01/can-i-use-this-intent.html)描述的技术可用于在启动时询问用户是否要安装缺少的包，然后您可以使用适当的 URI 将他简单地重定向到 Android Market

# asp.net-mvc-3 - 选中复选框时立即执行操作

> ID：11220204
> 
> 赞同：0
> 
> 时间：2012-06-27T05:55:08.843
> 
> 标签：asp.net-mvc-3

我使用复选框创建了一个角色列表，并尝试让复选框在选中复选框而不单击按钮时直接执行操作。任何人都可以帮助我吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:26:52.847

你可以使用 AJAX。例如，使用 jQuery，您可以订阅`.change`复选框的事件并执行一些操作：

```
$(function() {
    $(':checkbox').change(function() {
        // this will be trigerred when the checkbox is checked or unchecked
        // here you could perform the desired action, like for example auto submit
        // the containing form. Like this:
        $(this).closest('form').submit();

        // or send an AJAX request or whatever you need
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:08:04.787

您可以使用复选框的 onCheckedChanged 属性。

OnCheckedChanged ：当 Checked 属性更改时要执行的函数的名称。

并在页面的脚本部分编写函数。因此，无论何时选中或取消选中您的复选框，它都会调用指定的方法，您可以在其中编写逻辑。

供参考，您可以访问此[链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.oncheckedchanged.aspx)

# jquery-ui - 创建视觉属性时出现问题

> ID：11220206
> 
> 赞同：1
> 
> 时间：2012-06-27T05:55:27.660
> 
> 标签：jquery-ui, magento, options

请参考：[http](http://blog.4aal.nl/post/visualize-your-magento-attributes) ://blog.4aal.nl/post/visualize-your-magento-attributes 我正在创建视觉属性。

我通过改变开始这个过程`app/design/frontend/base/default/template/catalog/product/view/type/options/configurable.phtml`

在configurable.phtml中，我替换了：

`<script type="text/javascript"> var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>); </script>`

和：

```
<script type="text/javascript">
    jQuery("#attribute158").visualAttribute();
</script> 
```

在 head 标签中，我包括： `http://blog.4aal.nl/var/uploads/06/magento.visual.attribute.js`

在我的前端进行所有这些更改后，默认下拉选项被隐藏，但小框中的块大小未显示。我的页面源仅显示`<ul class="va_wrapper" id="va_wrapper_1" rel="attribute158"></ul>`

唯一的问题是它没有显示 li 标签....

我认为问题在于放置在 jscript 文件中的循环代码。循环代码如下所示：

```
//loop all stored options and create custom html
        var pos = 0;
        if (options.length) {
            for (var index in options) {
                if (!isNaN(index)) {
                    pos++;
                    var value = index;
                    var text = options[index].text;
                    options[index].position = pos;
                    if (!settings.useTitle) {
                        description = '';
                    }
                    wrapper.append('<li title="' + description + '" class="opt_' + value + '"><a href="#' + value + '">' + text + '</a></li>');
                }
            }
        } 
```

我正在使用可配置的产品。请告诉我我的步骤有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:43:58.513

您不必替换`configurable.phtml`. 您只需要在文件末尾添加以下代码。

```
<script type="text/javascript">
jQuery("#attribute<?php echo $_attribute->getAttributeId(); ?>").visualAttribute();
</script> 
```

# c# - 关闭后无法重用wpf窗口

> ID：11220209
> 
> 赞同：2
> 
> 时间：2012-06-27T05:55:42.090
> 
> 标签：c#, wpf

我正在使用一个窗口来更改我的应用程序的数据库配置。设置按钮单击由 Config() 处理，单击时显示设置窗口。如果我关闭窗口右上角的使用十字符号，我将无法重用它显示以下异常的窗口。

窗口关闭后无法设置可见性或调用 Show、ShowDialog 或 WindowInteropHelper.EnsureHandle。

 `````
ConfigDialogBox configDlg = new ConfigDialogBox();

        private void SettingsChanged(object sender, RoutedEventArgs e)
        {
            Database.host = configDlg.host;
            Database.port = configDlg.port;
            Database.user = configDlg.user;
            Database.password = configDlg.password;
            Database.database = configDlg.database;            
            ConfigDlg.Visibility = Visibility.Hidden;
        }

        private void Config(object sender, RoutedEventArgs e)
        {            
            configDlg.Show();
            configDlg.okButton.Click+=new RoutedEventHandler(SettingsChanged);
            configDlg.cancelButton.Click+=new RoutedEventHandler(SettingsChanged);
        }

        void cancel_Click(object sender, RoutedEventArgs e)
        {         
           ConfigDlg.Visibility = Visibility.Hidden;
        } 
````  `关闭后如何重复使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:49:23.833

您不能重复使用该窗口。

`OK`如果通过和按钮以外的其他方式关闭窗口`Cancel`是您的问题，则需要处理该[`Window.Closing`](http://msdn.microsoft.com/en-us/library/system.windows.window.closing.aspx)事件（请参阅链接以获取示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:01:14.573

你不能。只需创建一个新窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:04:16.353

```
ConfigDialogBox configDlg = null;

private void Config(object sender, RoutedEventArgs e)
        {            
         configDlg = new ConfigDialogBox();
            configDlg.Show();
            configDlg.okButton.Click+=new RoutedEventHandler(SettingsChanged);
            configDlg.cancelButton.Click+=new RoutedEventHandler(SettingsChanged);
        } 
`````

# aem - 使用 CQ5 查询生成器搜索用户

> ID：11220210
> 
> 赞同：1
> 
> 时间：2012-06-27T05:55:45.227
> 
> 标签：aem

我们正在使用 Adob​​e CQ5，将用户组织在多个树中（例如`/home/users/internalUsers`，`/home/users/guests，...）。

我正在尝试在任何树中找到用户。我以前可以

```
http://localhost:4900/bin/querybuilder.json?type=rep:User&nodename=*username 
```

我得到

```
{"success":true,"results":1,"total":1,"offset":0,"hits" [{"path":"/home/users/testUsers/u/username","excerpt":"","name": .... 
```

但这将匹配任何*以*. `username`如果我删除`*`或放置 a`/`我找不到任何匹配项。

我试过了

```
http://localhost:4900/bin/querybuilder.json?type=rep:User&nodename=username
http://localhost:4900/bin/querybuilder.json?type=rep:User&nodename=/username
http://localhost:4900/bin/querybuilder.json?type=rep:User&nodename=*/username
http://localhost:4900/bin/querybuilder.json?type=rep:User&nodename=*%2Fusername 
```

没有成功。

有没有办法在多个路径中可靠地找到用户？

**编辑**

我通过以下方式解决了原始问题（搜索用户）：

```
http://localhost:4900/bin/querybuilder.json?type=rep:User&property=rep:principalName&property.value=username 
```

知道如何搜索具有给定名称的节点仍然很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:39:27.130

您上面提到的 nodename 属性似乎确实适用于此。[Adobe 文档](http://dev.day.com/docs/en/cq/5-3/dam/customizing_and_extendingcq5dam/query_builder.html#Find%20jar%20files%20and%20order%20them,%20newest%20first)甚至在演示查询构建器工具时使用它作为示例！这适用于我的本地环境，即使使用一些基本的正则表达式，例如：

```
http://localhost:4502/bin/querybuilder.json?nodename=cq-*-5.3.[4-9].jar 
```

（将匹配来自 v5.3.4+ 的 CQ jar，不包括来自 v5.3.2 的那些。我无法通过 REST 使用 ([az]*) 获得多个字符匹配 - 假设我的语法不正确。）

或者当您说节点名时，您是指另一个属性吗？- 假设您的意思是目录结构中的名称。

最好的，

戴夫

# sql-server - 如何在 SQL Server 中使用 Switch

> ID：11220226
> 
> 赞同：25
> 
> 时间：2012-06-27T05:57:10.280
> 
> 标签：sql-server, switch-statement, syntax-error

我想`CASE`在我的存储过程中使用。我的代码中出现一些语法错误：

```
select 
   case @Temp
   when 1 then (@selectoneCount=@selectoneCount+1)
   when 2 then (@selectoneCount=@selectoneCount+1)
   end 
```

运行时，我得到：

> '=' 附近的语法不正确。

在这一行：

```
@selectoneCount = @selectoneCount + 1 
```

接近相等。

实际上，我正在从另一个 sp 获取返回值到 @temp 中，然后如果 @temp =1 则我想将 @SelectoneCount 的计数增加 1，依此类推。请让我知道什么是正确的语法。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-27T06:04:53.467

这`CASE`只是一个**返回值**的“开关” ——而不是执行整个代码块。

您需要将代码更改为以下内容：

```
SELECT 
   @selectoneCount = CASE @Temp
                         WHEN 1 THEN @selectoneCount + 1
                         WHEN 2 THEN @selectoneCount + 1
                     END 
```

如果`@temp`没有设置为这些值（1 或 2），那么你会得到一个`NULL`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T06:01:13.337

这是一个 select 语句，因此 case 的每个分支都必须返回一些内容。如果要执行操作，只需使用 if。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T06:08:28.173

```
 select 
       @selectoneCount = case @Temp
       when 1 then (@selectoneCount+1)
       when 2 then (@selectoneCount+1)
       end

   select  @selectoneCount 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T06:25:09.577

> 实际上，我从另一个 sp 获取返回值到 @temp 然后它 @temp =1 然后我想将 @SelectoneCount 的计数增加 1 等等。请让我知道什么是正确的语法。

有什么问题：

```
IF @Temp = 1 --Or @Temp = 2 also?
BEGIN
    SET @SelectoneCount = @SelectoneCount + 1
END 
```

（虽然这确实是程序代码 - 通常不是使用 SQL 的最佳方式）

# php - 如何计算给定距离的边界框

> ID：11220227
> 
> 赞同：-2
> 
> 时间：2012-06-27T05:57:12.203
> 
> 标签：php, javascript

我正在开发一个网站，我想在其中为用户提供搜索功能。搜索功能将检测用户当前位置，并将显示距用户当前位置 10 公里内的所有企业。企业存储在数据库中。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:38:52.130

让您的数据库存储所有业务条目的经度和纬度坐标，然后以经度/纬度获取用户位置，并使用可以写入 SQL 查询的[欧几里得距离。](http://en.wikipedia.org/wiki/Euclidean_distance)如果您想获得更准确的结果，可以使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)，尽管它有点复杂。

# mysql - SQL 选择唯一的整体

> ID：11220229
> 
> 赞同：0
> 
> 时间：2012-06-27T05:57:15.317
> 
> 标签：mysql

我的桌子上有：

```
ID Name   Age
1  James  15
2  James  16
3  Joseph 16
4  Joseph 18
5  Steve  4 
```

我想返回：

```
5 Steve 4
1 James 15
3 Joseph 16 
```

IE。基于名称行的唯一条目（当有多个相同名称时，选择 ID 最低的一个），并按年龄排序

什么是正确的 SQL 语句？

我有：

```
Select * FROM table Where True GROUP BY Name ORDER BY Age 
```

它似乎返回了很多独特的结果，但它太慢了（表有> 250,000个条目，处理时间> 30秒），我想知道是否有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:54:19.307

try this

> SELECT *
> FROM table WHERE ID in (SELECT MIN(ID) FROM table group by name)
> ORDER by age

You just group the datasets by name and get `MIN(ID)` and use this as 'where' condition for your selection

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:00:23.993

由于您要根据 minimum 进行选择`ID`，这是一个唯一字段，您只需`ID`要先获取每个名称的 minimum s，然后将这些`ID`s 连接到主表。这将比在 a 中使用子查询快得多，`WHERE`因为最小值的子选择只执行一次，而子查询将对主表中的每一行执行（250,000 多次！）。

```
SELECT
    b.*
FROM
    (
        SELECT MIN(ID) AS minID
        FROM tbl
        GROUP BY Name
    ) a
INNER JOIN
    tbl b ON a.minID = b.ID
ORDER BY
    b.Age 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:59:18.463

查询这个的另一种方法，通常在需要性能的地方更好，只要你有（这里不是一个选项）一个 INDEX `Name`：

```
SELECT *
FROM your_table t1
LEFT JOIN your_table t2 ON t1.Name = t2.Name AND t2.ID < t1.ID
WHERE t2.ID IS NULL; 
```

这里有一个快速的[解释](https://stackoverflow.com/questions/11131237/mysql-can-i-do-a-left-join-and-pull-only-one-row-from-the-join-table/11134161#11134161)。

# python - 如何使用电子邮件验证域是否包含该域

> ID：11220230
> 
> 赞同：1
> 
> 时间：2012-06-27T05:57:16.323
> 
> 标签：python, regex

嗨，我正在寻找一种方法来使用提供的电子邮件地址验证域 域名可以是 [http://www.test.free.com](http://www.test.free.com) [http://www.free.com.au](http://www.free.com.au) [http://www.free .com.au.org](http://www.free.com.au.org) [http://www.free.com.org](http://www.free.com.org) 或者可以有一个带有任意数量的子子域和任意数量的验证的域名。

验证电子邮件应该包含域，这是我到目前为止写的

```
if domain_url is not None and verification_email is not None:

    logging.info('==============================')
    logging.info('BOTH WERE NOT NONE')
    logging.info('==============================')

    domain_email = verification_email.split('@')[1].split('.')[0]

    logging.info('==============================')
    logging.info(domain_email)
    logging.info('==============================')

    verify_domain_url_list = domain_url.split('.')

    if len(verify_domain_url_list) == 4:
        verify_domain_url_list.pop()
        verify_domain_url_list.pop()
    if len(verify_domain_url_list) == 3:
        verify_domain_url_list.pop()

    verify_status = domain_email in verify_domain_url_list

    if verify_status:
        return 'yes'
    else:
        pre_domain_address = verify_domain_url_list[0].split('//')[1]
        if pre_domain_address is not None and \
            domain_email in pre_domain_address:
            return 'yes'
        else:
            return 'no'
    return 'no' 
```

但这并不适合所有可能性。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:44:00.710

您可以这样做，只需在括号内添加新域。

```
verification_email = 'fed@test.free.com'
pattern = r'.*@(test.free.com|free.com.au|free.com.au.org|free.com.org)$'

import re
if re.search( pattern , verification_email):
    print('yes')
    # or on your case, return 'yes' 
```

[https://github.com/fedmich/StackOverflow-answers/blob/master/python-11220230/regex.py](https://github.com/fedmich/StackOverflow-answers/blob/master/python-11220230/regex.py)

# colors - 如何在gnuplot中设置标签和线条相同的颜色

> ID：11220231
> 
> 赞同：8
> 
> 时间：2012-06-27T05:57:19.343
> 
> 标签：colors, label, gnuplot, linestyle

很简单的东西。我想要一个函数，比如函数 f，用特定的颜色绘制。我还想要一个标签，上面写着“功能 f 颜色”，它也以该颜色显示。

到目前为止我正在尝试这个：

```
set style line 1 lw 3 lc 1
set label "AC" at 0, 70 textcolor 1 
```

但显然“lc”和“textcolor”遵循不同的规范，它抱怨：

```
"trolo4.pl", line 8: colorspec option not recognized 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:13:57.157

试试这个：

```
set label "AC" at 0, 70 textcolor linetype 1 
```

或者

```
set label "AC" at 0, 70 textcolor linespec 1 
```

阅读手册`gnuplot> help label`以了解更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T11:41:35.457

@holygeek 的回答很好。来自python，我发现更明确一点通常很好。

```
set style line 1 lw 1 lc rgb "red"
set label "AC" at 0, 70 tc rgb "red" 
```

请注意，您的 gnuplot 识别的颜色名称集取决于系统（请参阅`show colornames`完整列表）。要实现完全的系统独立，可以使用`#RRGGBB`版本。例如红色是`'#ff0000`，绿色是`#00ff00`，蓝色是`#0000ff`。当然，您可以制作各种有趣的颜色（同样，请参阅`show colornames`预定义颜色列表及其等效颜色`#.....`）

有关详细信息，另请参阅`help colorspec`

# iphone - 当应用程序处于工作模式时，UILocalNotification 不会触发

> ID：11220237
> 
> 赞同：2
> 
> 时间：2012-06-27T05:57:50.533
> 
> 标签：iphone, uilocalnotification, foreground

[关于为什么本地通知没有在这里](https://stackoverflow.com/questions/6988986/uilocalnotification-not-firing)和[那里](https://stackoverflow.com/questions/4974512/uilocalnotification-isnt-working-at-all)正确触发有很多问题，还有一些关于为什么当应用程序处于后台状态时本地通知没有触发的问题，我也经历了[这些](https://stackoverflow.com/questions/6313641/ios-uilocalnotification-not-being-displayed-while-app-in-background)问题。

但令我惊讶的是，我没有找到任何与前台状态或处于活动状态相关的通知帖子，即在我的应用程序中我遇到了这个奇怪的问题，即当应用程序进入后台模式时本地通知会触发，而当应用程序进入后台模式时它不会触发应用程序处于活动状态或前台模式，再次令我惊讶的是，即使在为通知设置的触发日期过期后，进入后台后，通知也会立即触发。

**编辑**

我面临的另一个问题是警报没有触发，即我们在 didReceive 本地通知方法中编写的警报动作，这是实现代码：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
{
    application.applicationIconBadgeNumber = 0;
    NSString *reminderText = [notification.userInfo objectForKey:addViewController.textField.text];
    [self.addViewController showReminder:reminderText];
} 
```

这是另一个控制器中存在的 showReminder 方法，即：

```
//Notification alert
- (void)showReminder:(NSString *)text
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Reminder" message:text delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(220, 10, 40, 40)];

    UIImage *image= [UIImage imageNamed:@"icon@2x.png"];
    [imageView setImage:image];

    [alertView addSubview:imageView];
    [imageView release];

    [alertView show];
    [alertView release];
} 
```

抱歉，如果此问题不需要问题或在 stackoverflow 中发布。

任何人请发表您的建议，任何帮助都将不胜感激！

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T06:01:51.163

如果应用程序处于活动状态，那么您将不会收到任何声音、徽章或警报，但是`application:didReceiveLocalNotification:`将调用应用程序委托

来自[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)

> 如果在系统传递通知时应用程序处于最前面且可见，则不会显示警报，不会标记图标，也不会播放声音。但是，如果应用程序委托实现了 application:didReceiveLocalNotification: ，则会调用它。UILocalNotification 实例被传递到此方法中，并且委托可以检查其属性或访问 userInfo 字典中的任何自定义数据。

# javascript - 什么对象应该负责复合模式中的视图转换？

> ID：11220238
> 
> 赞同：0
> 
> 时间：2012-06-27T05:57:51.450
> 
> 标签：javascript, design-patterns, backbone.js, composite

![在此处输入图像描述](../Images/e4626a9026a1b9cf9272c699dacca474.png)

现在你已经看到了我很棒的 uml 图，我可以继续做真实的事情了。

假设左侧边栏中的叶子接收到一个动作，这个动作想要改变范围之外的东西谁负责改变主视图？

容器组合、单独的视图管理器、侧边栏组合？

它可能有点模糊和/或主观，但我想知道当它进入更深层次的嵌套时最通用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:11:53.980

对此没有一个真正的答案：

一种解决方案是扩展 Backbone 提供的事件模型以创建应用程序级事件聚合器（关于此技术的精彩博客文章在[这里](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)）并将事件从复合视图扔到事件聚合器，然后让 MainView 监听事件聚合器适合的事件并相应地改变自身。

另一种解决方案是将您的 compview 的元素绑定到合适的模型和集合，并让您的 compview 的操作修改这些集合和元素，然后通过监听它们发出的事件将您的 MainView 绑定到这些模型和集合。与上面的解决方案有点相似。

另一种解决方案可能是拥有某种控制器对象，该对象具有修改 MainView 的方法，并在需要更改 MainView 时让 compview 调用控制器的方法。

我认为还有许多其他方法可以实现不同视图和元素之间的通信，但这三种方法都很好，至少在某种程度上可以在代码中保持适当的分离水平。当然，您可以将这些混合使用，例如将事件聚合用于应用程序级通信，而将控制器用于单个模块级，但这只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T01:36:09.607

您可能想查看 knockout.composite - [http://danderson00.blogspot.com.au/2012/08/introducing-knockoutcomposite.html](http://danderson00.blogspot.com.au/2012/08/introducing-knockoutcomposite.html)

它使用可用于分离这种逻辑的 pubsub 模式。您的 MainView 可以订阅特定消息并执行转换。消息可以直接来自 CompView 或来自中间“控制器”。

# html - 要参考 rel="tag" 和 rel="nofollow" 的配置文件，是还是不是？

> ID：11220239
> 
> 赞同：0
> 
> 时间：2012-06-27T05:57:59.563
> 
> 标签：html, profile, microformats

Microformats.org 建议用户参考他们使用的每种微格式的配置文件。例如，使用 hCard 的内容*应*使用以下三行代码之一引用其配置文件：

```
<head profile="http://microformats.org/profile/hcard">

<link rel="profile" href="http://microformats.org/profile/hcard">

This content uses <a rel="profile" href="http://microformats.org/profile/hcard">hCard</a>. 
```

我想这是因为如果不引用配置文件，像谷歌这样的搜索引擎将无法理解微格式，所有微格式代码都会变成毫无意义的东西。

在我个人看来，有时修改`head`元素或添加额外的`link`或`a`元素是不方便的。所以对于 hCard，我可能会忘记它并使用微数据等价物。

但是，微格式喜欢`rel="tag"`并且`rel="nofollow"`没有微数据等价物。如果我使用它们而不参考它们的个人资料，搜索引擎会理解它们的含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:45:39.817

是他们会。搜索引擎对标记很自由，符合[稳健性原则](http://en.wikipedia.org/wiki/Robustness_principle)，因为 Web 上的很多标记都被破坏了。在您的情况下，它甚至没有被破坏，它只是不遵守[HTML 4.01](http://www.w3.org/TR/html401/struct/global.html#h-7.4.4.1)中概述的约定。

请注意，例如，Google 有[关于微格式的文档，](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146897)但没有提及`profile`. 它还有一个[测试工具](http://www.google.com/webmasters/tools/richsnippets)，您可以使用它来检查您的标记。

# php - 在 webmatrix 中加载的数据库

> ID：11220240
> 
> 赞同：0
> 
> 时间：2012-06-27T05:58:16.573
> 
> 标签：php, codeigniter

我对 web 矩阵和 codeigniter 有一点问题，我已经包含了数据库并将其设置在 autoload.php 中：

```
$autoload['libraries'] = array('database','session'); 
```

我还在配置文件中添加了信息以连接到我的数据库，但在运行时仍然出现错误 500.0。

您认为我还应该添加什么才能使其正常工作？

# jquery - PhoneGap/Cordova：如何使用 cookie (iOS)？

> ID：11220244
> 
> 赞同：3
> 
> 时间：2012-06-27T05:58:32.703
> 
> 标签：jquery, ios, cookies, cordova

我有一个适用于 iOS 的 PhoneGap/Corodova 项目。在 iOS 模拟器上构建时，我使用了 Jquery Cookies，它们很好。但是，现在我的设备上有应用程序进行测试，它们不再工作。我猜这只是iOS不支持的东西。

有谁知道为 iOS 做客户端 cookie 的方法？

PS：我当前的 cookie 代码（以防万一）：

```
<script type="text/javascript" charset="utf-8" src="js/jquery.cookie.js"></script>
    <!--STARTUP SCREEN COOKIE SETTER-->
     <script type="text/javascript">
        $(function() {
        var cookiedate = new Date();
        cookiedate.setTime(cookiedate.getTime() + (60 * 60 * 1000));
        $.cookie("startupscreen", "checked", { expires: cookiedate, path: '/' })
              });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:57:03.353

为什么不使用本地存储？ios5 支持 HTML5 功能，例如 localStorage。

[本地存储](http://www.w3schools.com/html5/html5_webstorage.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T13:30:24.113

把它放在你的应用程序委托中：

```
-(void)applicationDidEnterBackground:(UIApplication *)application{
    NSData *cookiesData = [NSKeyedArchiver archivedDataWithRootObject:[[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]];
    [[NSUserDefaults standardUserDefaults] setObject:cookiesData
                                              forKey:@"xapp"];

}

and in (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:

(NSDictionary*)launchOptions 
// Restore cookies
    NSData *cookiesData = [[NSUserDefaults standardUserDefaults] objectForKey:@"xapp"];
    if (cookiesData) {
        NSArray *cookies = [NSKeyedUnarchiver unarchiveObjectWithData:cookiesData];
        for (NSHTTPCookie *cookie in cookies)
        { [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie]; }

    } 
```

这使得 cookie 在 Cordova 3.4.x 和 ios6+ 中正常工作

# c++ - 如何在 Matlab 中分析 MEX 函数

> ID：11220250
> 
> 赞同：14
> 
> 时间：2012-06-27T05:59:00.700
> 
> 标签：c++, matlab, profiling, mex

我有一个我编写的 Mex 函数（一个可以从 Matlab 调用的 c++ 函数），我想使用 valgrind/kcachegrind 对其进行分析。如果您直接运行 c++ 程序，我知道如何使用 valgrind/kcachegrind，但是如果我从 Matlab 调用 c++ 程序，有没有办法进行此分析？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T11:23:40.047

分析 MEX 文件很棘手，因为 MEX 文件是共享库。它不能在 Linux 上使用标准的“gprof”方法来完成——gprof 根本不这样做。我尝试使用 sprof，但[出现“PLTREL not found error”</a> - sprof 也无法使用。](https://stackoverflow.com/questions/1240384/sprof-pltrel-not-found-error)[这里](https://stackoverflow.com/questions/1276834/profiling-a-mex-function)[有一个以前的帖子](https://stackoverflow.com/questions/1240384/sprof-pltrel-not-found-error)，但没有人给出最终答案。

幸运的是，有一种方法可以在**Linux**上使用 valgrind 来完成。首先，我们需要编写“运行”代码来加载 mex 文件，提供 mexFunction 符号供我们调用，并设置 MEX 文件的参数。我已选择使用推荐的方法来使用 MATLAB 执行此操作 - 使用[MATLAB 引擎](http://www.mathworks.se/help/matlab/calling-matlab-engine-from-c-c-and-fortran-programs.html)。以下代码（另存为 test.c）加载 MEX 文件并找到 mexFunction 符号，从先前保存为“input.mat”的文件中加载输入数据（可以在 MATLAB 中使用 save 命令完成），并调用 mexFunction。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <dlfcn.h>
#include "engine.h"

typedef void (*mexFunction_t)(int nargout, mxArray *pargout [ ], int nargin, const mxArray *pargin[]);

int main(int argc, const char *argv[])

{
  Engine *ep;
  char buff[1024];
  int i;

  /* matlab must be in the PATH! */
  if (!(ep = engOpen("matlab -nodisplay"))) {
    fprintf(stderr, "Can't start MATLAB engine\n");
    return -1;
  }
  engOutputBuffer(ep, buff, 1023);

  /* load the mex file */
  if(argc<2){
    fprintf(stderr, "Error. Give full path to the MEX file as input parameter.\n");
    return -1;
  }
  void *handle = dlopen(argv[1], RTLD_NOW);
  if(!handle){
    fprintf(stderr, "Error loading MEX file: %s\n", strerror(errno));
    return -1;
  }

  /* grab mexFunction handle */
  mexFunction_t mexfunction = (mexFunction_t)dlsym(handle, "mexFunction");
  if(!mexfunction){
    fprintf(stderr, "MEX file does not contain mexFunction\n");
    return -1;
  }

  /* load input data - for convenience do that using MATLAB engine */
  /* NOTE: parameters are MEX-file specific, so one has to modify this*/
  /* to fit particular needs */
  engEvalString(ep, "load input.mat");
  mxArray *arg1 = engGetVariable(ep, "Ain");
  mxArray *arg2 = engGetVariable(ep, "opts");
  mxArray *pargout[1] = {0};
  const mxArray *pargin[2] = {arg1, arg2};

  /* execute the mex function */
  mexfunction(1, pargout, 2, pargin);

  /* print the results using MATLAB engine */
  engPutVariable(ep, "result", pargout[0]);
  engEvalString(ep, "result");
  printf("%s\n", buff);

  /* cleanup */
  mxDestroyArray(pargout[0]);
  engEvalString(ep, "clear all;");
  dlclose(handle);
  engClose(ep);

  return 0;
} 
```

`mex -g`MEX 文件本身也应该使用开关进行编译。上面的代码必须`mex -g`使用 engopts.sh 作为编译参数进行编译。从 MATLAB 命令行类型

```
mex('-v', '-f', fullfile(matlabroot,...
    'bin','engopts.sh'),...
    'test.c'); 
```

或在标准 Linux 终端中运行

```
/path/to/matlab/bin/mex -g -f /path/to/matlab/bin/engopts.sh test.c 
```

使用 valgrind 分析 MEX 文件需要从命令行运行“测试”程序。在 test 和 MEX 文件所在的目录中，键入命令：

```
PATH=$PATH:/path/to/matlab/bin/ LD_LIBRARY_PATH=/path/to/matlab/bin/glnxa64/:/path/to/matlab/sys/os/glnxa64/ valgrind --tool=callgrind ./test ./mex_file.mexa64 
```

请注意，需要设置 MATLAB 的路径和正确的架构相关库路径！matlab 可执行文件必须存在于 PATH 中，否则“测试”将失败。

还有一个问题。MATLAB 引擎需要在系统上安装 csh（您可以使用任何 shell，csh 只需存在于 /bin 中）。因此，如果您没有它，则必须安装它才能使其正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-05T19:40:01.080

您可以使用 -D 选项启动 MATLAB，如此[MatlabCentral 线程](http://www.mathworks.com/matlabcentral/newsreader/view_thread/241754)中所述：

`matlab -nojvm -nodesktop -nosplash -D"valgrind --error-limit=no --leak-check=yes --tool=memcheck -v --log-file=valgrind.log"`

我会添加以确保您拥有最新版本的 valgrind。当我尝试使用 valgrind 3.6 版调试我的 MEX 文件时，valgrind 崩溃而不是报告内存错误。

# android - Android 可调用包装器

> ID：11220252
> 
> 赞同：0
> 
> 时间：2012-06-27T05:59:11.767
> 
> 标签：android, dll, xamarin.android

我创建了一个单声道 android 库。现在我需要将该库从 c# 移植到 java 项目。所以我用android可调用包装器制作了那个库，我得到了我的dll的包装器。我包含了那些包装器，但我无法在我的 android java 项目中引用 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:13:41.197

您不能从 Java 项目中引用 Mono for Android DLL。一个标准的 Java Android 应用程序不会包含 Mono 运行时，它是理解和执行任何编译到 Mono for Android 库中的代码所必需的。

# iphone - 从 sqlite 数据库中检索（选择）日期时间

> ID：11220253
> 
> 赞同：0
> 
> 时间：2012-06-27T05:59:13.040
> 
> 标签：iphone, database, sqlite, datetime

我在数据库（sqlite）中存储了一个日期时间数据类型的变量。现在我想选择或检索那个特定的变量。

如何从 sqlite 数据库中选择或检索日期时间变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:17:21.370

这是可以帮助您的示例代码：

```
NSString *getSpeakerQuery=[NSString stringWithFormat:@"select dateTime from table;"];
    sqlite3_stmt *statementGet;

[self openDB];

if (sqlite3_prepare_v2(sqlite3DB, [getSpeakerQuery UTF8String],-1, &statementGet, nil)== SQLITE_OK) 
{  
    while  (sqlite3_step(statementGet) == SQLITE_ROW)
    { 
        NSstring *dateTime=[NSString stringWithUTF8String:(char *)sqlite3_column_text(statementGet, 0)]];
    }

    sqlite3_finalize(statementGet); 
} 
```

其中，openDB 是打开数据库的函数，在文件路径中指定数据库名称

```
-(void) openDB {

if (sqlite3_open([[self filePath] UTF8String], &sqlite3DB) != SQLITE_OK ) {
    sqlite3_close(sqlite3DB);
    NSAssert(0, @"Database failed to open.");
} 
```

}

```
-(NSString *) filePath 
{

NSArray *path =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [path objectAtIndex:0];
return  [documentsDir stringByAppendingPathComponent:@"database name"];
} 
```

# swing - 出现swing对话框时，lotus notes崩溃

> ID：11220260
> 
> 赞同：0
> 
> 时间：2012-06-27T05:59:57.167
> 
> 标签：swing, lotus-notes, lotus-domino

我用 Java 编写了一个使用 JDialogBox 显示一些文本的代理。现在，对于该应用程序的众多用户之一，它无法正常工作。每当用户单击启动该代理的操作时，都会出现一个对话框，但在它完全显示笔记崩溃之前，会出现错误消息，提示 Notes 正在收集信息......等等......

现在，如果这个问题没有其他解决方案，那么我想知道是否有任何方法可以从 Java 代理调用默认的 NOTES @prompt 或 MsgBox 来显示值。要显示的值由该代理即时计算，不存储在表单中。

```
############################################################
### FATAL THREAD 23/24 [ nlnotes: 4124: 4652]
### FP=0x000186a0, PC=0x69b824fb, SP=0x0bedff6c, stksize=-200046796
### EAX=0x00000000, EBX=0x0a7a8390, ECX=0x0a7a8390, EDX=0x0a7a8390
### ESI=0x0a2a0e40, EDI=0x00000000, CS=0x0000001b, SS=0x00000023
### DS=0x00000023, ES=0x00000023, FS=0x0000003b, GS=0x00000000 Flags=0x00010206
Exception code: c0000005 (ACCESS_VIOLATION)
############################################################
 [ 1] 0x69b824fb nvoglnt

############################################################
### PASS 2 : FATAL THREAD with STACK FRAMES 23/24 [ nlnotes: 4124: 4652]
### FP=000186a0, PC=69b824fb, SP=0bedff6c, stksize=-200046796
Exception code: c0000005 (ACCESS_VIOLATION)
############################################################
# ---------- Top of the Stack ----------
 [ 1] 0x69b824fb nvoglnt

############################################################
### PASS 3 : FATAL THREAD with PARAMETER DATA 23/24 [ nlnotes: 4124: 4652]
############################################################
 [ 1] 0x69b824fb nvoglnt

############################################################
### thread 24/24: [ nlnotes: 4124: 5516] 
### FP=0bcffff4, PC=7c90120f, SP=0bcfffcc, stkbase=0bcf0000, stksize=4096
############################################################
@[ 1] 0x7c90120f ntdll.DbgBreakPoint+1 (0,0,0,0)

<@@ Notes Process Info -> Load Modules for Process: [ntaskldr: 5404] (Time 10:18:19) @@>

Base        Size          Module

0x00400000       20480  C:\notes\ntaskldr.EXE
0x7c900000      729088  C:\WINDOWS\system32\ntdll.dll
0x7c800000     1007616  C:\WINDOWS\system32\KERNEL32.dll
0x6ef90000      454656  C:\WINDOWS\SYSTEM32\SYSFER.DLL
0x60000000    14053376  C:\notes\nnotes.dll
0x621b0000     1400832  C:\notes\nxmlpar.dll
0x62320000       98304  C:\notes\nxmlcommon.dll
0x77c10000      360448  C:\WINDOWS\system32\msvcrt.dll
0x62150000      380928  C:\notes\js32.dll
0x62350000      999424  C:\notes\NLSCCSTR.DLL
0x77dd0000      634880  C:\WINDOWS\system32\ADVAPI32.dll
0x77e70000      602112  C:\WINDOWS\system32\RPCRT4.dll
0x77fe0000       69632  C:\WINDOWS\system32\Secur32.dll
0x76780000       36864  c:\windows\system32\SHFOLDER.dll
0x77120000      569344  C:\WINDOWS\system32\OLEAUT32.dll
0x77f10000      299008  C:\WINDOWS\system32\GDI32.dll
0x7e410000      593920  C:\WINDOWS\system32\USER32.dll
0x774e0000     1302528  C:\WINDOWS\system32\ole32.dll
0x763b0000      299008  C:\WINDOWS\system32\comdlg32.dll
0x5d090000      630784  C:\WINDOWS\system32\COMCTL32.dll
0x7c9c0000     8482816  C:\WINDOWS\system32\SHELL32.dll
0x77f60000      483328  C:\WINDOWS\system32\SHLWAPI.dll
0x71ad0000       36864  C:\WINDOWS\system32\wsock32.dll
0x71ab0000       94208  C:\WINDOWS\system32\WS2_32.dll
0x71aa0000       32768  C:\WINDOWS\system32\WS2HELP.dll
0x62950000       24576  C:\notes\ndgts.dll
0x76390000      118784  C:\WINDOWS\system32\IMM32.DLL
0x773d0000     1060864  C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.6028_x-ww_61e65202\comctl32.dll
0x624d0000      897024  C:\notes\NSTRINGS.DLL
0x62890000       24576  C:\notes\nhkdaemn.DLL
0x62930000       24576  C:\notes\nhldaemn.DLL
0x625b0000       24576  C:\notes\namhook.DLL
0x625d0000       36864  C:\notes\nTCP.DLL

<@@ Notes Process Info -> Call Stack for Process: [ntaskldr: 5404] (Time 10:18:19) @@>

############################################################
### thread 1/4: [ntaskldr: 5404: 5816] 
### FP=0013fc44, PC=7c90e514, SP=0013fbec, stkbase=00040000, stksize=28672
############################################################
@[ 1] 0x7c90e514 ntdll.KiFastSystemCallRet+0 (1388,0,13fc60,600a2d5d)
@[ 2] 0x7c802455 KERNEL32.Sleep+15 (1388,13fc80,60003e17,1388)
@[ 3] 0x600a2d5d nnotes._OSDelayThread@4+13 (1388)
@[ 4] 0x60003e17 nnotes._OSStaticMem@8+231 (0,8132)
@[ 5] 0x6000f1c2 nnotes._OSStaticMemBeginInit@16+98 (0,8132,696,13fdd0)
@[ 6] 0x601d4159 nnotes._NotesSDKData@0+25 ()
@[ 7] 0x601d45d5 nnotes._AddInShouldTerminate@0+5 ()
@[ 8] 0x601d45fa nnotes._AddInIdle@0+10 ()
@[ 9] 0x00401816 ntaskldr._notes_main+214 (0,0,0,2)
@[10] 0x00401736 ntaskldr._main+22 (2,383f98,382d00,403000)
@[11] 0x00401ae3 ntaskldr._mainCRTStartup+227 (39588,13d1d8,7ffde000,8054b6ed)
@[12] 0x7c817077 KERNEL32.RegisterWaitForInputIdle+73 (401a00,0,0,0)

############################################################
### thread 2/4: [ntaskldr: 5404: 5284] 
### FP=02dcfcc8, PC=7c90e514, SP=02dcfc70, stkbase=02cd0000, stksize=262144
############################################################
@[ 1] 0x7c90e514 ntdll.KiFastSystemCallRet+0 (1388,0,2dcfce4,600a2d5d)
@[ 2] 0x7c802455 KERNEL32.Sleep+15 (1388,2dcfd04,60003e17,1388)
@[ 3] 0x600a2d5d nnotes._OSDelayThread@4+13 (1388)
@[ 4] 0x60003e17 nnotes._OSStaticMem@8+231 (0,8132)
@[ 5] 0x6000f1c2 nnotes._OSStaticMemBeginInit@16+98 (0,8132,696,2dcfe54)
@[ 6] 0x601d4159 nnotes._NotesSDKData@0+25 ()
@[ 7] 0x601d45d5 nnotes._AddInShouldTerminate@0+5 ()
@[ 8] 0x601d45fa nnotes._AddInIdle@0+10 ()
@[ 9] 0x00401011 ntaskldr.EntryFuncWrapper+17 (1e13514,0,0,7c912228)
@[10] 0x60116d74 nnotes._ThreadWrapper@4+212 (0)
@[11] 0x7c80b729 KERNEL32.GetModuleFileNameA+442 (0,0,0,0)

############################################################
### thread 3/4: [ntaskldr: 5404: 1796] 
### FP=02ecfcb4, PC=7c90e514, SP=02ecfc5c, stkbase=02dd0000, stksize=262144
############################################################
@[ 1] 0x7c90e514 ntdll.KiFastSystemCallRet+0 (1388,0,2ecfcd0,600a2d5d)
@[ 2] 0x7c802455 KERNEL32.Sleep+15 (1388,2ecfcf0,60003e17,1388)
@[ 3] 0x600a2d5d nnotes._OSDelayThread@4+13 (1388)
@[ 4] 0x60003e17 nnotes._OSStaticMem@8+231 (0,8132)
@[ 5] 0x6000f1c2 nnotes._OSStaticMemBeginInit@16+98 (0,8132,696,2ecfe40)
@[ 6] 0x601d4159 nnotes._NotesSDKData@0+25 ()
@[ 7] 0x601d45d5 nnotes._AddInShouldTerminate@0+5 ()
@[ 8] 0x601d45fa nnotes._AddInIdle@0+10 ()
@[ 9] 0x00401011 ntaskldr.EntryFuncWrapper+17 (1e13614,0,0,7c912228)
@[10] 0x60116d74 nnotes._ThreadWrapper@4+212 (0)
@[11] 0x7c80b729 KERNEL32.GetModuleFileNameA+442 (60116ca0,0,0,dddd04d2)

############################################################
### thread 4/4: [ntaskldr: 5404: 3296] 
### FP=032dfff4, PC=7c90120f, SP=032dffcc, stkbase=032d0000, stksize=4096
############################################################
@[ 1] 0x7c90120f ntdll.DbgBreakPoint+1 (0,0,0,0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:41:24.973

不幸的是，您不能从 Java 代理调用 Notes 中的任何 UI 方法。如果您有一个基于 Java 的解决方案，我会继续努力并尝试解决该用户机器上的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:48:18.267

JDialog 是 AWT 的一部分，在 R8.x 中不起作用（也不支持）。

[编辑] 基于您对 NSD 的更新。

nvoglnt 是 NVidia 图形驱动程序。您可以尝试更新图形驱动程序，看看是否有帮助。如果没有，JVM 可能不支持最新的 NVidia 驱动程序。

# javascript - 连续循环点击按钮

> ID：11220261
> 
> 赞同：1
> 
> 时间：2012-06-27T05:59:58.147
> 
> 标签：javascript, html, setinterval

如何在单击按钮时实现 setInterval 或 setTimeout。我的下面的代码没有循环，我如何在第二次按下按钮时停止它？

```
<!DOCTYPE HTML>
<html>
  <head>
    <script>
    i=0;
    function cycle(){
        setInterval(animate(),2000);
    }

    function animate(){
        alert("task");
        console.log(i++);
    }           
    </script>

    <style>
    #paper{
        background: #A3C45E;
        width:200px;
        height:300px;
    }
    </style>
  </head>
  <body>
    <input type="button" onClick="cycle()" value="Cycle">
    <div id="paper"></div>
  </body>
</html> 
```

***不使用 jquery 进行编辑**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:01:46.790

**改变：**

```
setInterval(animate(),2000); // calls the animate function. 
```

**至：**

```
setInterval(animate,2000); // Pass the function as a reference for reuse. 
```

**清除第二次点击的时间间隔：**

```
var i=0;
var id;

function cycle(){
    if (id){
        clearInterval(id);
        id = null;
    }
    else
        id = setInterval(animate, 2000);
}

function animate(){
    alert("task");
    console.log(i++);
} 
```

[**现场演示**](http://jsfiddle.net/67F5A/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:04:57.690

```
var i=0;
var timer;
function cycle(){
    // this is how you pass a function to setInterval
    // setInterval returns a int representing the id of the interval
    // EDIT
    if(!timer)
      timer = setInterval(animate,2000);
    else{
      timer = false;
      clearInterval(timer)
}

function animate(){
    alert("task");
    console.log(i++);
    // clearInterval stops a interval, and you have to send as a param the id of that interval
    // EDIT
    // if(i>=1) clearInterval(timer)
} 
```

# android - 滚动条在 在 Web 视图中

> ID：11220264
> 
> 赞同：5
> 
> 时间：2012-06-27T06:00:01.597
> 
> 标签：android, html, webview

我有包含滚动分区的 Html 文件。当我在 WebView 中添加此 HTML 时，它不会显示该 div 的滚动条。

我在 Html 文件中有代码。

```
// some Html code

<table style="border: 3px solid black;" align="center">
 <tr>
<td ><div style="width: 100%; height: 50px; overflow: auto;  padding:0px; "> <div>
  put returns between paragraphs
► for linebreak add 2 spaces at end
► _italic_ or **bold**
► indent code by 4 spaces
► backtick escapes `like _so_`
► quote by placing > at start of line
► to make links
<http://foo.com>
 [foo](http://foo.com)
► basic HTML also allowed

 </div></td>
</tr>
</table>

// some Html code 
```

当我在 xml 文件中的 WebView 中添加此 Html 文件时。

XML的代码是...

// 一些 Html 代码

```
<RelativeLayout
    android:id="@+id/webLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/buttonLayout"
    android:layout_below="@+id/titleLayout" >

    <WebView
        android:id="@+id/webViewMain"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </WebView>
</RelativeLayout> 
```

// 一些 Html 代码

它工作正常，但不显示添加到 Html 文件中的那个 Div 的滚动条

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:11:21.880

滚动 div`overflow:auto`当前在 Android 上不可用。但是您可以通过结合使用 HTML、JavaScript 和 CSS 进行一些工作来实现相同的目的。有关详细信息，请参阅[此](http://www.gregbugaj.com/?p=147)链接。

另一个解决方案是，您可以使用[iScroll](http://cubiq.org/iscroll-4)库。

为了您的信息，[这里是一个很好的比较，什么可能或可能不是，以及如何在各种移动浏览器上工作](http://www.quirksmode.org/webkit.html)。

# javascript - 停止 AutoPostBack 复选框的事件传播

> ID：11220265
> 
> 赞同：2
> 
> 时间：2012-06-27T06:00:15.223
> 
> 标签：javascript, jquery, asp.net

我们在 UpdatePanel 中有两个复选框`AutoPostBack="true"`

```
<asp:CheckBox  ID="IsCompanyEnabled" runat="server" 
            AutoPostBack="true"
            Checked="false" 
            CssClass="agentcompany" 
            Text="COMPANY" />
<asp:CheckBox  ID="IsCompanyNotDetermined" runat="server" 
            AutoPostBack="true"
            Checked="false" 
            CssClass="agenttobedetermined" 
            Text="TO BE DETERMINED" /> 
```

单击这些复选框时，将触发 CheckedChanged 事件。一切都很好。

现在，我们有了另一个作用于相同 CheckBox 的 JavaScript 函数

```
function SetEmployeeDetails(selectedPanel) {

    var panel_id = "#" + selectedPanel;
    var container = $(panel_id);
    container.find(".agentcompany").find(":checkbox").prop('checked', false); //problem zone
    container.find(".agenttobedetermined").find(":checkbox").prop('checked', false); //problem zone
    //$("#popup_dialog").dialog("close");
    return false;
} 
```

问题发生在这种情况下。

1.  假设`Company CheckBox`首先检查。
2.  然后我触发了 JavaScript 函数，它取消了检查`Company CheckBox`后覆盖`Company CheckBox`检查事件的效果。
3.  现在，当我单击表单上的保存按钮时，`IsCompanyEnabled_CheckChanged`事件将在事件触发之前`SaveButton_Click`触发。

这几乎搞乱了我所有的代码流。我不想`IsCompanyEnabled_CheckedChanged`再次触发。我该如何克服这个问题？

有没有办法从 JavaScript 函数向 CheckBoxes 询问`event.stopPropogation`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:23:47.777

你试过[stopPropagation](http://api.jquery.com/event.stopPropagation/) () 吗？

```
 container.find(".agentcompany").find(":checkbox")
  .click(function(event){
      event.stopPropagation();
  }); 
```

# qt - 获取 QDragEnterEvent 的鼠标位置

> ID：11220267
> 
> 赞同：0
> 
> 时间：2012-06-27T06:00:36.447
> 
> 标签：qt, drag-and-drop, qt4, ogre, qlistwidget

如下图所示，我想在将 QListWidgetItem 拖放到画布时获取画布上的鼠标位置，此鼠标位置将有助于我获取将项目放置在其上的对象。

更多解释：拖放将在我的画布类中，我想检查拖放是否来自QListWidgetItems，如果是，它将获取当前鼠标位置。

![将 QListWidgetItem 拖到 Ogre 画布上](../Images/a4600b0bd7541ebb40f87ce74b26841b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:28:49.863

[QDragEnterEvent 继承自 QDropEvent](http://qt-project.org/doc/qt-4.8/QDragEnterEvent.html)。

您是否尝试过... [pos()](http://qt-project.org/doc/qt-4.8/qdropevent.html#public-functions)？

# vb.net - .Net 的开源富文本控件

> ID：11220275
> 
> 赞同：0
> 
> 时间：2012-06-27T06:01:36.553
> 
> 标签：vb.net, richtextbox

.net 表单是否有任何好的richtextcontrol 我从几个网站尝试了几乎所有扩展的richtextcontrols 但没有任何控件的打印视图，我想在我的应用程序中添加尊重系统但没有可用的免费控件和来自[http的控件://www.devexpress.com/Products/NET/Controls/WinForms/Rich_Editor/](http://www.devexpress.com/Products/NET/Controls/WinForms/Rich_Editor/) 对学生来说非常昂贵。我从过去两个月开始搜索，但没有找到任何结果，并努力让我自己控制，但发现不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:08:19.360

实际上，您可以使用 Visual Studio RichTextBox 内置控件。

如果这还不够，请使用[SharpDevelop的 ICSharpCode.TextEditor.dll](http://www.icsharpcode.net/OpenSource/SD/)

这个 TextEditor 非常适合语法高亮功能。

使用示例请遵循： [使用 ICSharpCode.TextEditor](http://www.codeproject.com/Articles/30936/Using-ICSharpCode-TextEditor)

问候

# java - 在文件中写入和读取整数和字符串

> ID：11220280
> 
> 赞同：0
> 
> 时间：2012-06-27T06:01:52.213
> 
> 标签：java, android

我正在尝试使用以下方法在java（android）中保存文件（然后稍后读取）

```
FileInputStream fis = openFileInput(filename); 
```

然后也许使用 BufferedReader/writer。无论如何，我正在尝试保存字符串和数字，我想知道在这种情况下从 I/O 写入和读取的最佳方法是什么？我打算做以下阅读

```
FileInputStream fis = openFileInput(filename);
InputStreamReader inputStreamReader = new InputStreamReader(fis);
BufferedReader bufferedReader = new BufferedReader(inputStreamReader); 
```

和写作

```
FileOutputStream fos = openFileOutput(filename, 20);
OutputStreamWriter outStreamReader = new OutputStreamWriter(fos);
BufferedWriter bufferedWriter = new BufferedWriter(outStreamReader); 
```

但我注意到 readLine 将始终返回该行的字符串。所以我必须经历一些行的字符串到整数的转换。这是一种有效的方法（或正确的方法）吗？我觉得我错过了什么谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T06:06:53.870

除非您有多行字符串或可能被误认为整数的字符串或具有非常复杂结构的文件，否则只需按照上面的建议编写文本文件即可。效率低下不值得失去可移植性和可读性的好处。

对于更复杂的文件，其他不错的选择是 JSON 或 XML 或 Java 属性文件（您可以使用这些好的库）。

如果您有一个非常好的理由（并且必须调用 Integer.parseInt 并保存 3 个字节不是一个好的理由），请仅使用二进制格式。

# php - 桌面和移动网站

> ID：11220286
> 
> 赞同：1
> 
> 时间：2012-06-27T06:02:27.950
> 
> 标签：php, html, css, web, mobile-website

如何设计一个既适合移动设备又适合桌面设备的网站，在 HTML 4 和 CSS 2 中是否有任何指导方针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:10:42.660

您想研究[响应式框架](http://speckyboy.com/2011/11/17/15-responsive-css-frameworks-worth-considering/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:20:30.373

有大量文章、教程和框架可供您使用。这里没有圣杯，因为每个网站都不同。

该主题中的一些有趣的文章：

[http://www.html5rocks.com/en/mobile/responsivedesign/](http://www.html5rocks.com/en/mobile/responsivedesign/)

[http://smashingmagazine.com/tag/responsive-design/](http://smashingmagazine.com/tag/responsive-design/)

[http://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

您可以使用的框架、工具：

[http://html5boilerplate.com/mobile](http://html5boilerplate.com/mobile)

[http://gridpak.com/](http://gridpak.com/)

[http://responsive.gs/](http://responsive.gs/)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:17:49.907

如果您想像评论中指出的那样从头开始开发，这将对您有很大帮助：

[关于响应式网页设计的文章](http://www.alistapart.com/articles/responsive-web-design)

# c#-4.0 - C# 一种在变量名中引用非法字符的方法？

> ID：11220287
> 
> 赞同：2
> 
> 时间：2012-06-27T06:02:29.687
> 
> 标签：c#-4.0

有什么方法可以在 C# 中将破折号作为属性名称的一部分？

在 SQL 中，它是`[some-thing]`. 在 JavaScript 中，它是`myObject["some-thing"]`

我不顾一切地尝试避免编写在元素名称中使用破折号的自定义 XML 序列化程序（[不是自愿](https://stackoverflow.com/q/11219908/84424)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:11:00.000

不，但是根据您之前的问题，如果您的问题是序列化/反序列化 XML，那么您可以使用属性，如下所示：

```
[XmlElement("some-long-property")]
public string SomeLongProperty { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:16:44.590

可能不是您所要求的，但您可以在变量中使用 unicode。

您还可以在输入的过程中将破折号“-”替换为其他字符，然后在退出 C# 代码时返回。

```
"some-thing".Replace("-","_") 
```

# java - 如何判断摄像头是否在使用中？

> ID：11220288
> 
> 赞同：7
> 
> 时间：2012-06-27T06:02:54.320
> 
> 标签：java, android, camera, android-camera

有什么办法可以找到代码中是否正在使用 Android**相机**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T06:14:00.577

> *有什么办法可以查出安卓相机是否在使用？*

是的，如果相机正在*使用中*`Camera.open()`，会给你一个例外。

 *从[文档](http://developer.android.com/guide/topics/media/camera.html)中，

```
/** A safe way to get an instance of the Camera object. */
public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:17:08.560

我不知道为什么这个问题被问了好几次，一旦你开始你自己的活动或应用程序相机本身将被释放，因为为相机运行的活动将进入暂停状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-07T10:18:07.910

您可以尝试此方法。如果它返回 true，则某些应用仍在使用相机。

```
public boolean isCameraUsebyApp() {
    Camera camera = null;
    try {
        camera = Camera.open();
    } catch (RuntimeException e) {
        return true;
    } finally {
        if (camera != null) camera.release();
    }
    return false;
} 
```

然后在相机需要重新启动时向用户显示 toast 以重新启动设备。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-24T03:03:10.427

我知道这是一个非常古老的问题，但我在谷歌搜索时偶然发现了它，想知道同样的事情。使用较新版本的android，您可以注册`CameraManager.AvailabilityCallback`以确定相机是否正在使用中。这是一些示例代码：

```
import android.hardware.camera2.CameraManager;

    // within constructor
    // Figure out if Camera is Available or Not
    CameraManager cam_manager = (CameraManager) mContext.getSystemService(Context.CAMERA_SERVICE);
    cam_manager.registerAvailabilityCallback(camAvailCallback, mHandler);

    CameraManager.AvailabilityCallback camAvailCallback = new CameraManager.AvailabilityCallback() {
    public void onCameraAvailable(String cameraId) {

        cameraInUse=false;
        Log.d(TAG, "notified that camera is not in use.");

    }

    public void onCameraUnavailable(String cameraId) {

        cameraInUse=true;
        Log.d(TAG, "notified that camera is in use.");

    }
}; 
```*

# visual-studio-2012 - 如何在 Visual Studio 2012 中使用 nmake？

> ID：11220297
> 
> 赞同：4
> 
> 时间：2012-06-27T06:03:36.890
> 
> 标签：visual-studio-2012

我已经安装了专业版——但是有了新的 Windows 8 开始菜单，我终生都找不到 VS2012 命令提示符。关于这可能在哪里的任何想法？我正在尝试为 WinRT 编译一个 C++ 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:13:31.330

在“开始”屏幕上，您可以键入“Visual Studio 命令提示符”，但您必须记住在搜索时选择“应用程序”。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:42:39.443

尝试通过执行 "\VC\vcvarsall.bat"" x86_arm 来使用命令提示符

# iphone - 图像合并、图像缩放、触摸、ImageView

> ID：11220300
> 
> 赞同：1
> 
> 时间：2012-06-27T06:04:13.930
> 
> 标签：iphone, ios, image, uiimageview

我的两个 ImageView 上有两个图像。第一个图像是身体图像，第二个图像是纹身图像。通过合并这两个图像，我创建了第三个图像，使其看起来像身体上的纹身。

我的问题是：

1) 是否可以在身体上制作第三张看起来像真正纹身的图像？用户可以使用互联网来源的纹身图像或从相机拍摄吗？

2）到目前为止，我只合并了身体图像和纹身图像。但是纹身图像与背景图像完全重叠，我的纹身图像尺寸很小，所以我希望它显示在身体图像的中间。

我无法上传图片，因为我的积分少于 10 :(

我的代码是

```
-(void)mergeImage    

{    

int width=500;

int height=500;

UIImage *bottomImage = self.imageView.image;//background image

UIImage *image = self.imageViewTatoo.image;//foreground image

CGSize newSize = CGSizeMake(width, height);

UIGraphicsBeginImageContext( newSize );

// Use existing opacity as is
[bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

// Apply supplied opacity if applicable
/
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.4];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

imageView.image=newImage;

UIGraphicsEndImageContext(); 
```

}

# android - 如何从模拟器中删除 SQL 数据库

> ID：11220306
> 
> 赞同：2
> 
> 时间：2012-06-27T06:04:50.887
> 
> 标签：android, database

当我将我的应用程序部署到 Android 中的模拟器时，数据库也将被部署。如果我对数据库进行任何更改，它将不会再次部署到模拟器。为此，每次我必须从设备管理器中删除模拟器并创建新模拟器。这个过程真的很烦人，任何关于如何从模拟器中删除数据库并部署新数据库的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:06:39.517

您只需要增加您在构造函数中提供的数据库的版本或扩展 SQLIteOpenHelper 的类......

并覆盖 SQLIteOpenHelper 中的 onUpgrade ：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  if (newVersion > oldVersion)
    Log.v("Database Upgrade", "Database version higher than old.");
  myContext.deleteDatabase(DB_NAME);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:18:40.180

按着这些次序：

DDMS > 从左侧面板中选择模拟器

从右侧选择 fileexplorer > 选择您的应用程序包单击数据库 foder 选择您的数据库并从右上角删除它（“红色减号”）删除按钮

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:13:22.493

更轻松：

打开 DDMS 预置（菜单窗口 >> 打开新预置）

选择文件探索标签。

然后转到数据 > 数据 > 包装名称 > 数据库 > 数据库名称。

并删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:13:47.703

而不是删除模拟器删除数据库

**ddms----> 文件资源管理器 ----> data/data/your_package_name--->databases --->yourdatabase 。**

并删除它。

你可以再做一件事

只需卸载应用程序并再次安装，这将删除数据库并再次创建数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T06:27:03.970

如果您想删除数据库，另一种方法是删除表并再次重新创建表，如下所示

```
String Droptable="drop table if exists item_master"; // where item_master is table name 
myDataBase.execSQL(Droptable); 
```

删除后将其重新创建为

```
 String Createtable="CREATE TABLE \"item_master\" (\"item_id\" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , \"item_name\" VARCHAR, \"item_img\" VARCHAR, \"item_s_desc\" TEXT, \"item_desc\" TEXT, \"item_map\" VARCHAR, \"bookmark\" VARCHAR DEFAULT N, \"category_id\" INTEGER)"; 

 myDataBase.execSQL(Createtable); 
```

您可以根据您的要求更改列名或添加或删除列

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T06:08:53.727

快捷方便：

```
 context.deleteDatabase(DATABASE_NAME); 
```

# lotus-domino - 自定义错误消息不适用于 http://www.myserver.com/index.htm

> ID：11220309
> 
> 赞同：0
> 
> 时间：2012-06-27T06:05:06.363
> 
> 标签：lotus-domino

我正在创建一个自定义的常规错误消息（在 domcfg 中将替换标准 HTTP404）
自定义错误消息显示为[http://www.myserver.com/foo.nsf](http://www.myserver.com/foo.nsf)之类的 URL （其中 foo.nsf 不存在服务器）。

问题：为什么不显示不包含“.nsf”的 URL 的自定义错误消息？
如何为[http://www.myserver.com/index.htm](http://www.myserver.com/index.htm)而不是标准的 HTTP 404 错误显示此自定义错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:38:06.460

查看 HTTPMultiErrorPage notes.ini 参数。有了这个，您可以指向非 nsf 错误 (404) 的 HTML 错误页面。有关详细信息，请参阅以下内容： [http ://www-10.lotus.com/ldd/ddwiki.nsf/dx/07282008024243PMKMKPXA.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/07282008024243PMKMKPXA.htm)

您可以为添加到 HTTPMultiErrorPage notes.ini 参数的路径添加替换规则，以便改为控制数据库中的错误页面。以下博客文章对此有详细说明： [http ://dpastov.blogspot.dk/2012/01/error-pages-in-domino.html](http://dpastov.blogspot.dk/2012/01/error-pages-in-domino.html)

# c# - 如果它为假，则在自定义验证器中停止执行

> ID：11220312
> 
> 赞同：2
> 
> 时间：2012-06-27T06:05:26.477
> 
> 标签：c#, asp.net

我有两个文本框，分别是 to_date 和 from_date。我比较两个文本框并获取值，但它执行在我想停止的按钮的 onclick 旁边，因为如果 to_date 小于 from 日期，则 to date 变为空，并且关注文本框不去点击事件按钮。

我用 ：

```
 try
        {
            DateTime from = DateTime.ParseExact(txt_from_date.Text, "M/d/yyyy", theCultureInfo);
            DateTime to = DateTime.ParseExact(txt_to_date.Text, "M/d/yyyy", theCultureInfo);
            int result = DateTime.Compare(to, from);
            e.IsValid = result>0;
            if (e.IsValid == false)
            {
                txt_to_date.Text = "";
                txt_to_date.Focus();
            }
        }
        catch (Exception eq)
        {
            e.IsValid = false;
            txt_to_date.Text = "";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:19:11.010

如果您的 onclick 事件处理程序，您必须调用验证：

```
protected void YourButton_OnClick(object sender, EventArgs e)
{
    Page.Validate();
    if(Page.IsValid) // Will be false if any validator is invalid
    {
         // your code here
    }
} 
```

请注意，如果您必须将表单拆分为几个子部分，则可以设置`ValidationGroup`验证控件并将相同的值传递给方法。`Page.Validate`

# html - ul 中的最后一个元素进入下一行

> ID：11220319
> 
> 赞同：5
> 
> 时间：2012-06-27T06:06:14.120
> 
> 标签：html, css

在我的 ul 列表中，最后一个元素进入下一行。我想要一行中的所有 li 元素。其次，当我将浏览器缩小时，当登录链接接近 ul 时，它（登录链接）也会转到下一行。我希望他们排成一排。

这是我的代码[jsfddle](http://jsfiddle.net/QupAV/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:14:27.040

你浮动*所有东西，*这可能会混淆系统。

您如何从 ul 中删除浮动，这样它将占用所有可用宽度。并且要将登录链接保留在 ul 的右侧，您可以将登录链接放在 ul 上方。

请参阅[更新的 jsFiddle](http://jsfiddle.net/QupAV/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:13:28.733

您必须`width`在 css 中设置菜单容器：

```
/* line 23, ../../app/assets/stylesheets/menu.css.scss */
.header-container .header ul {
  float: left;
  width:80%;
  overflow: auto;
  border: 1px solid green;
} 
```

[JSfiddle](http://jsfiddle.net/QupAV/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:11:46.207

删除 `float: left;`和 `overflow: auto;`

```
.header-container .header ul {
    border: 1px solid green;
} 
```

[http://jsfiddle.net/QupAV/6/](http://jsfiddle.net/QupAV/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:20:01.273

只需设置**这里**`margin-right:5px;`的而不是[JSFIDDLE](http://jsfiddle.net/QupAV/19/)。`2%`

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T06:21:34.627

对您的代码进行了一些更新：http: [//jsfiddle.net/QupAV/22/](http://jsfiddle.net/QupAV/22/)

这是结构：

```
<div class='header-container'>
  <div class='header'>
    <div class='logo'>
      <img src='assets/logo.png'>
    </div>
    <div class='menu'>
      <ul>
        <li>
          <a href='#'>Home</a>
        </li>
        <li>
          <a href='#'>Features</a>
        </li>
        <li>
          <a href='#'>Pricing</a>
        </li>
        <li>
          <a href='#'>Team</a>
        </li>
        <li>
          <a href='#'>Support</a>
        </li>
      </ul>
      <div class="clear"></div>
    </div>
    <a href='#'>Login</a>
    <div class="clear"></div>
  </div>
</div>
<div class='container'></div>
<div class='footer'></div>? 
```

这是CSS：

```
 .clear { clear: both; float: none; font-size: 0px; }

/* line 1, ../../app/assets/stylesheets/menu.css.scss */
.header-container {
  width: 100%;
  min-height: 15%;
  background: url(menubg.jpg) no-repeat;
}
/* line 10, ../../app/assets/stylesheets/menu.css.scss */
.header-container .header {
  margin: 0 auto;
  padding: auto;
  border: 1px solid red;
}
/* line 16, ../../app/assets/stylesheets/menu.css.scss */
.header-container .header .logo {
  border: 1px solid orange;
  display: block;
  margin-right: 2%;
  float: left;
}
/* line 23, ../../app/assets/stylesheets/menu.css.scss */
.header-container .header .menu {
  float: left;
  border: 1px solid green;
  width: 82%;
}

.header-container .header .menu ul {
   list-style-type:none;
    margin: 0px;
    padding: 0px;
}
/* line 27, ../../app/assets/stylesheets/menu.css.scss */
.header-container .header ul li {
  float: left;
  border: 1px solid blue;
  margin-right: 2%;
}
/* line 35, ../../app/assets/stylesheets/menu.css.scss */
.header-container .header a {
  width: 10%;
  float: left;
}? 
```**

# silverlight - 如何以位图格式保存图像以及在该图像上绘制的矩形

> ID：11220327
> 
> 赞同：1
> 
> 时间：2012-06-27T06:06:58.653
> 
> 标签：silverlight, image, silverlight-5.0

我是 Silverlight 5 的新手。我正在开发一个 Silverlight 应用程序以通过网络摄像头捕获图像并将该图像分配给图像控件。

现在将图像分配给图像控件后，它允许用户绘制形状，例如矩形。

现在的问题是，当我尝试保存该图像以及矩形时，该矩形未保存（仅保存图像）。

请让我知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:23:05.270

要编辑图像，使用`WriteableBitmap`该类可能是最简单的。您可以`WriteableBitmap`从任何`BitmapSource`.

然后编辑图像，您可以使用[WriteableBitmap Extensions](http://writeablebitmapex.codeplex.com/)库，其中包含用于在图像中绘制矩形的便捷方法。

最后，如果您需要有关如何保存图像的说明，请查看[此处](http://johnpapa.net/saving-snapshots-to-png-in-silverlight-4-and-the-webcam)的示例。

# wpf - XamlReader.Parse 和 RadioButton GroupName

> ID：11220330
> 
> 赞同：0
> 
> 时间：2012-06-27T06:07:19.860
> 
> 标签：wpf, xaml, radio-button, xamlreader

我有一个很奇怪的问题。有没有可能拥有这两个控件`radio`并`newRadio`拥有属性`IsChecked == true`。在执行第 6 行中的代码之前`radio.IsChecked == true`，但在执行第 6 行中的代码之后`radio.IsChecked == false`和`newRadio.IsChecked == true`.

这两个单选按钮是否有可能`IsChecked == true`相同`GroupName`？

```
1\. RadioButton radio = new RadioButton();       

2\. radio.GroupName = "group";
3\. radio.IsChecked = true;          
4\. radio.Name = "name";         

5\. string xaml = XamlWriter.Save(radio);

6\. var newRadio = XamlReader.Parse(xaml); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:05:40.943

[GroupName](http://msdn.microsoft.com/en-us/library/system.windows.controls.radiobutton.groupname.aspx) -> "获取或设置指定哪些 RadioButton 控件互斥的名称。"

所以通常不会，如果多个单选按钮共享相同的组代码，则一次只应检查一个。

作为一种技巧，您可以更改第一个单选按钮的组名，创建第二个，然后将其放回原处。您应该检查两个单选按钮，但这不是我推荐的。

例子：

```
radio.GroupName = String.Empty;
var newRadio = XamlReader.Parse(xaml);
radio.GroupName = "group"; 
```

# php - 带有 json 数组的 jquery-autocomplete

> ID：11220333
> 
> 赞同：1
> 
> 时间：2012-06-27T06:07:35.537
> 
> 标签：php, javascript, jquery-autocomplete

我想知道如何才能使这个工作？我已经阅读了演示文件，但我很好奇是否有办法让它像这样工作。我有一个类似这样的 php 文件

```
$query = "SELECT DISTINCT City FROM Locations ORDER BY City";
foreach($DBH->query($query) as $row)
{
    $array[] = $row['City'];
}
echo json_encode($array); 
```

和一些js

```
$('.searchbox').autocomplete('test.php', {minChars: 3,}); 
```

当我测试它时，我输入三个字母，而不是建议，我得到整个 json 数组。我知道这个 jquery-autocomplete 可以处理本地数据，但我只是不知道如何。[顺便说一句， https://github.com/dyve/jquery-autocomplete/](https://github.com/dyve/jquery-autocomplete/)是来源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:21:47.933

当您提供您的 url 'test.php' 作为自动完成的来源时，您的页面必须计算通过提供的 'term' 请求参数完成的名称。

从[文档中](http://jqueryui.com/demos/autocomplete/)：

> 使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。它可以在同一台主机上，也可以在不同的主机上（必须提供 JSONP）。自动完成插件不会过滤结果，而是将请求参数“term”添加到 URL，服务器端脚本应该使用它来过滤结果。数据本身可以采用与上述本地数据相同的格式。

这意味着您必须`term`在 SQL 查询中使用 request 参数来过滤结果，例如

```
$query = "SELECT DISTINCT City FROM Locations where City like '".$term."%' ORDER BY City"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:15:09.950

[文档](https://github.com/dyve/jquery-autocomplete/blob/master/doc/jquery.autocomplete.txt)说您应该设置一个选项，`remoteDataType`其值是`json`您的后端是否返回 JSON 数组：

> 远程数据类型（默认值：false）
> 
> 如果将其设置为“json”，则自动完成程序需要来自服务器的 JSON 数组。任何其他设置，它默认为使用 lineSeparator 和 Cellseparator 的本机文本格式（见下文）。

例如

```
$('.searchbox').autocomplete('test.php', {
  minChars: 3,
  remoteDataType: 'json'
}); 
```

此外，您的服务器端查询应使用`q`自动完成程序发送的参数，`GET`仅返回与输入内容匹配的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:10:11.543

将您的输入文本作为 GET 变量发送到您的 test.php 文件，并使用该变量将过滤器应用于您的查询。

# ios - 使用 ZBar 扫描 VIN 条码会增加额外的“I”字符

> ID：11220340
> 
> 赞同：3
> 
> 时间：2012-06-27T06:08:20.950
> 
> 标签：ios, barcode-scanner, zbar-sdk

我正在使用 ZBar iOS SDK 扫描应用程序上的 VIN 条码。但有时它会在 VIN 前面添加一个额外的“I”字符并省略最后一个字符。

另外，我使用的是 CODE 39 符号系统。这是正确的还是我必须改变它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T16:45:00.110

前导“I”代表进口，仅编码到某些 VIN 条码中。有关更多详细信息，请参阅此讨论线程：

[http://sourceforge.net/projects/zbar/forums/forum/1072195/topic/4372564](http://sourceforge.net/projects/zbar/forums/forum/1072195/topic/4372564)

至于符号系统，VIN 条形码有多种格式，例如 Code 39、Code 128 或 PDF Matrix。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-12T07:56:47.887

您从 Gambit 指出的线程中发现的是：如果扫描的数字超过 17 个字符（VIN 中的字符数），则删除开头的 I

# cakephp - CakePHP 概念 Symfony-2.0 中的组件和助手

> ID：11220343
> 
> 赞同：0
> 
> 时间：2012-06-27T06:08:23.350
> 
> 标签：cakephp, symfony

在 Symfony-2.0 中是否提供 CakePHP 概念[组件](http://book.cakephp.org/2.0/en/controllers/components.html#creating-a-component)和[助手？](http://book.cakephp.org/2.0/en/views/helpers.html#creating-helpers)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:26:03.743

答案是不。

Symfony2 有它自己的组件，它的一些特性可以与你所询问的*助手进行比较。*你也可以创建你的。

# php - 用 Horde/phpmyadmin blowfish.php 替换 mcrypt

> ID：11220346
> 
> 赞同：0
> 
> 时间：2012-06-27T06:08:41.703
> 
> 标签：php, mcrypt, blowfish

我正在尝试在使用 Horde/phpmyadmin [blowfish.php library](https://github.com/phpmyadmin/phpmyadmin/blob/master/libraries/blowfish.php)加密的应用程序之间传递数据，而不是使用`mcrypt`。如果我这样做：

```
$key = "qwerty";
$data = "12345678";

$pma_cipher = new Horde_Cipher_blowfish;

print base64_encode( mcrypt_encrypt( MCRYPT_BLOWFISH, $key, $data, MCRYPT_MODE_CBC ) );
print PMA_blowfish_encrypt( $data, $key );
print base64_encode( $pma_cipher->encryptBlock( $data, $key ) );
print base64_encode( $pma_cipher->encryptBlock( $data, $key ) ); 
```

输出是

```
pC+XbHWnqIg= // mcrypt
pC+XbHWnqIg= // PMA blowfish
pC+XbHWnqIg= // OK
WwkIWeYzlHw= // next block is different 
```

此外，如果我更改数据：

```
$key = "qwerty";
$data = "123456789";

$pma_cipher = new Horde_Cipher_blowfish;

print base64_encode(mcrypt_encrypt(MCRYPT_BLOWFISH, $key, $data, MCRYPT_MODE_CBC));
print PMA_blowfish_encrypt( $data, $key ); 
```

我现在得到：

```
pC+XbHWnqIjaCTiQlKkXRQ==
pC+XbHWnqIg99GXjyWLMmA== 
```

Horde/PMA 版本似乎每个区块都在更改密钥。

有没有办法调整 mcrypt 调用以使两个库交叉兼容，或者我应该选择一个或另一个并相应地进行调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:17:48.470

每次在同一实例上设置密钥时，河豚 s-box*的设计都会有所不同。*这就是 bcrypt 散列的工作原理。

我相信你应该做的是：

```
$pma_cipher = new Horde_Cipher_blowfish;

$pma_cipher->setKey( $key ); // Set the key only once!

print base64_encode( mcrypt_encrypt( MCRYPT_BLOWFISH, $key, $data, MCRYPT_MODE_CBC ) );
print PMA_blowfish_encrypt( $data, $key );
print base64_encode( $pma_cipher->encryptBlock( $data ) ); // specifying the key resets it
print base64_encode( $pma_cipher->encryptBlock( $data ) ); // specifying the key resets it 
```

这应该每次都给你相同的结果。

不过，就您的其他问题而言：

> 我应该只选择其中一个并相应地调整吗

如果可能，您应该使用这些`mcrypt_*`函数，因为它们比 PMA 使用的原始 PHP 实现**要**快得多。首先，河豚的速度非常慢（至少在键设置方面）；在 PHP 而不是 C 库中这样做应该只是一个后备。

# iphone - NSString 修剪 \n

> ID：11220347
> 
> 赞同：1
> 
> 时间：2012-06-27T06:08:42.200
> 
> 标签：iphone, nsstring

我在一个字符串中有多个换行符。但我只希望在字符串的开头或结尾找到它时对其进行修剪。如果在两者之间找到它很好。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:14:31.293

你需要使用：

```
- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target withString:(NSString *)replacement options:(NSStringCompareOptions)options range:(NSRange)searchRange; 
```

**目标**将是`@"\n"`

**替换**将是`@""`

**范围**将是：

```
NSMakeRange(0,2); // for the beginning 
```

和

```
NSMakeRange(string.length-2,2); // to the end 
```

例如 -

```
//for the start
[yourString stringByReplacingOccurrencesOfString:@"\n" withString:@"" options:NSCaseInsensitiveSearch range:NSMakeRange(0,2)];

//for the end
[yourString stringByReplacingOccurrencesOfString:@"\n" withString:@"" options:NSCaseInsensitiveSearch range:NSMakeRange(yourString.length,2)]; 
```

您可以为该范围指定更长的长度，以确保它采用\n。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:14:55.933

```
NSString* str = @"hdskfh   dsakjfh akhf kasdhfk asdfkjash fkadshf1234        ";
NSRange rng = [str rangeOfCharacterFromSet: [NSCharacterSet characterSetWithCharactersInString: [str stringByReplacingOccurrencesOfString: @" " withString: @""]] options: NSBackwardsSearch];
str = [str substringToIndex: rng.location+1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:15:29.530

使用以下代码从开始和结束中删除 \n

```
NSString *str = @"\n test test \n test \n";

int firstOccurance = [str rangeOfString:@"\n"].location;
if (firstOccurance == 0) {
    str = [str substringFromIndex:1];
}

int lastOccurance = [str rangeOfString:@"\n" options:NSBackwardsSearch].location;
if (lastOccurance == str.length - 1) {
    str = [str substringToIndex:str.length - 2];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T06:20:55.033

你可以尝试`hasPrefix`和`hasSuffix`

例如

```
NSString *str = @"\n This is a \n test \n";

if ([str hasPrefix:@"\n"])
{
     //remove it
}

if ([str hasSuffix:@"\n"])
{
      //remove it
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T06:26:11.940

您可以使用`stringByTrimmingCharactersInSet`从字符串的两端修剪空白。

```
NSString* str = [myString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

# ruby-on-rails - form_for : 如何在表单中发布 user_id 和 topic_id

> ID：11220351
> 
> 赞同：0
> 
> 时间：2012-06-27T06:09:42.057
> 
> 标签：ruby-on-rails, forms

我正在使用表单添加帖子，并且需要将当前用户的 id 与条目参数一起发送。这是我的表单代码：

```
<%= form_for [@topic, @post] do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
        <%= f.hidden_field :user_id, :value => current_user.id %>
    <%= f.hidden_field :topic_id, :value => topic.id %>
        <%= f.text_area :content, placeholder: "yorumunuzu girin..." %>
  </div>
  <%= f.submit "Gönder", class: "btn btn-large btn-primary" %>
<% end %> 
```

和我的 posts_controller ：

```
def new
        @topic= Topic.find_by_id(params[:id])
        @post = @topic.posts.build(params[:post])
    end

    def show
    @post= Post.find(params[:id])
    @topic= @post.topic
  end 

    def create
        @topic= Topic.find_by_id(params[:id])
        @post = @topic.posts.build(params[:post])
        if @post.save
            flash[:success] = "Konu oluşturuldu!"
            redirect_to topic_path(topic)
        else
            render 'static_pages/home'
        end
    end 
```

我使用部分，所以我在 topic_controller.rb 中使用这些代码

```
 def show      
        @topic = Topic.find(params[:id])
        @posts = @topic.posts.paginate(page: params[:page])
        @post = @topic.posts.build if signed_in?
  end 
```

我嵌套了我的资源：

```
resources :users
resources :sessions, only: [:new, :create, :destroy]

resources :topics , only: [:show, :create, :destroy] do
resources :posts, only: [:create, :show, :new]
end 
```

. 当我发表评论时，错误日志是：

```
{"utf8"=>"✓",
 "authenticity_token"=>"y0wzskqK9LfXSPIYW4EmqRii1Tg7bD1CG0kno+gcagQ=",
 "post"=>{"user_id"=>"1",
 "content"=>"yeni yorum"},
 "commit"=>"Gönder",
 "topic_id"=>"3"} 
```

所以它不会发布`topic_id`. 在主题显示页面中，我想显示主题、属于它的帖子和帖子表单。当用户发表评论时，我希望它重定向到同一页面。所以我`redirect_to topic_path(topic)`是对还是错？感谢阅读。

编辑 1：我尝试了以下解决方案。我变了

```
<%= f.hidden_field :user_id, :value => current_user.id %>
<%= f.hidden_field :topic_id, :value => @post.topic.id %> 
```

现在错误代码改变了

```
 undefined method `posts' for nil:NilClass
{"utf8"=>"✓",
 "authenticity_token"=>"y0wzskqK9LfXSPIYW4EmqRii1Tg7bD1CG0kno+gcagQ=",
 "post"=>{"user_id"=>"1",
 "topic_id"=>"3",
 "content"=>"yorum"},
 "commit"=>"Gönder",
 "topic_id"=>"3"} 
```

我必须编辑我的新动作。我的心被卡住了，但我不会放弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:01:36.550

由于您有嵌套路由（主题下的帖子）并且您使用您构建表单，`<%= form_for [@topic, @post] do |f| ... %>`您应该`topic_id`已经可以从您的控制器访问：

```
params[:topic_id] 
```

（感谢路由）

但是，您不应直接分配`topic_id`给帖子，而应分配主题实例。

```
# wrong (security flaw)
@post.topic_id = params[:topic_id]

# correct
@post.topic = Topic.find(params[:topic_id]) 
```

这样您就可以对主题进行必要的检查 - 确保它存在，允许用户使用它等。否则用户可以轻松地向您发送他想要的任何值。

[编辑]

出于同样的原因，您不想`user_id`在表单中发布，因为即使它是隐藏字段，恶意用户也可以手动更改它。而是分配用户在控制器中发布。

```
@post.user = current_user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:48:50.823

我建议添加一个隐藏的表单字段，在提交后提交值，确保将哈希键值添加到 update_attribute 或 create 方法。

注意：对于隐藏字段，您需要通过添加实际值键来设置值，如下所示：

```
f.hidden_field, :topic_id, :value => post.topic.id 
```

然后在您的更新或创建函数中，您要添加提交的参数值，如下所示：

```
n = Comment.new
n.topic_id = params[:form_key][:topic_id].to_i 
```

玩得开心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:21:12.693

这是我的问题的解决方案：

post_controller.rb：

```
class PostsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :destroy]
  before_filter :correct_user, only: :destroy

    def new
   @topic= Topic.find(params[:topic_id])
   @post = @topic.posts.build
  end

    def create
        @topic= Topic.find(params[:topic_id])
        @post = @topic.posts.build(params[:post])
        @post.user = current_user
        @post.topic_id = @topic.id

        if @post.save
            flash[:success] = "Konu oluşturuldu!"
            redirect_to topic_path(@topic)
        else
            render 'static_pages/home'
        end
    end

  def destroy
    @post.destroy
    redirect_to root_path
  end
  private

    def correct_user
      @post = current_user.posts.find_by_id(params[:id])
      redirect_to root_path if @post.nil?
    end
end 
```

和_post_form.html.erb

```
 <%= render 'shared/error_messages', object: f.object %>
  <div class="field">

        <%= f.text_area :content, placeholder: "yorumunuzu girin..." %>
  </div>
  <%= f.submit "Gönder", class: "btn btn-large btn-primary" %>
<% end %> 
```

和路由表 routes.rb ：

```
resources :topics , only: [:show, :create, :destroy] do
    resources :posts, only: [:create, :new]
    end 
```

我可以写一篇文章，它会显示在主题页面中。我花了两天时间解决这个问题。感谢所有帮助。

# python - uWSGI 服务器日志……读取文件的权限被拒绝……哪个文件？

> ID：11220355
> 
> 赞同：7
> 
> 时间：2012-06-27T06:09:56.613
> 
> 标签：python, django, nginx, uwsgi

我有一个在皇帝模式下运行 Django/Nginx/uWSGI 和 uWSGI 的服务器，并且它的错误日志（附庸级错误日志，而不是皇帝级日志）每次产生新的工作人员时都会出现持续的权限错误，像这样：

> 2012 年 6 月 26 日星期二 19:34:55 - 重生 uWSGI worker 2（新 pid：9334）
> 
> 打开文件进行读取时出错：权限被拒绝

问题是，我不知道打开哪个文件有问题；显然，它不是日志文件，因为我正在查看它并且它正在毫无问题地写入它。有什么办法可以查到吗？我正在通过 Ubuntu 12.04 上的 Upstart 运行 apt-get 版本的 uWSGI 1.0.3-debian。除了看起来像内存泄漏之外，该站点运行成功……因此我查看了日志文件。我已经尝试更改整个 /opt/ 目录的权限以包含 uwsgiuser 用户，但无济于事。我使用的是 TCP 套接字，所以权限应该不是问题。是缓存吗？那有它自己的权限吗？如果有，在哪里？

```
My Upstart conf file

description "uWSGI" start on runlevel [2345] stop on runlevel [06] respawn

env UWSGI=/usr/bin/uwsgi env LOGTO=/var/log/uwsgi/emperor.log

exec $UWSGI \
--master \
--emperor /etc/uwsgi/vassals \
--die-on-term \
--auto-procname \
--no-orphans \
--logto $LOGTO \
--logdate 
```

我的附庸 ini 文件：

```
[uwsgi]
# Variables
base = /opt/env/mysiteenv

# Generic Config
uid = uwsgiuser
gid = uwsgiuser
socket = 127.0.0.1:5050
master = true
processes = 2
reload-on-as = 128
harakiri = 60
harakiri-verbose = true
auto-procname = true
plugins = http,python
cache = 2000
home = %(base)
pythonpath = %(base)/mysite
module = wsgi
logto = /opt/log/mysite/error.log
logdate = true 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T14:10:58.667

这个问题的实际答案似乎是这个 Ubuntu 特有的错误：

[https://bugs.launchpad.net/ubuntu/+source/libjpeg-turbo/+bug/1031718](https://bugs.launchpad.net/ubuntu/+source/libjpeg-turbo/+bug/1031718)

您可以通过放置线条来解决问题

```
setuid uwsgiuser
setgid uwsgiuser 
```

进入你的新贵配置文件，并从你的 uwsgi 配置中删除`uid`和`gid`设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T07:03:39.807

您可以尝试`strace`该过程并查看触发错误消息的原因，例如：

`UWSGI=/usr/bin/uwsgi LOGTO=/var/log/uwsgi/emperor.log strace -f -o strace.log -etrace=open,write $UWSGI --master --emperor /etc/uwsgi/vassals --die-on-term --auto-procname --no-orphans --logto $LOGTO --logdate`

# grails - Grails：使用 OAuth2.0 保护 REST API

> ID：11220359
> 
> 赞同：5
> 
> 时间：2012-06-27T06:10:07.783
> 
> 标签：grails, oauth-2.0, oauth-provider

我正在使用 Grails 构建一个 REST API。我希望使用 OAuth2.0 client_credentials flow(grant_type) 对其进行保护。我的用例如下：

外部代理将向类似的东西发送请求

```
http://server-url/oauth/token?client_id=clientId&client_secret=clientSecret&grant_type=client_credentials 
```

并获得一个access_token。然后，我的 URL（受保护的资源）应该可以通过类似的方式访问

```
http://server-url/resource?access_token={access-token obtained before} 
```

我正在寻找可以在 Grails 上轻松快速地执行此操作的方法。为此使用的最佳方式/工具/插件是什么？Scribe 库是一个选项，如果我的特定用例有任何教程，那就太好了。

PS：我已经尝试过 spring-security 和相关插件，那里没有乐趣。任何替代方案都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:45:16.827

我有同样的问题。我发现很多 grails 插件可以帮助您针对其他 oauth 提供者验证您的应用程序，但没有任何东西可以帮助我使我的应用程序成为 oauth 提供者。经过大量挖掘，我发现了这个 grails 插件，它可以完全满足您的需求。

[https://github.com/adaptivecomputing/grails-spring-security-oauth2-provider](https://github.com/adaptivecomputing/grails-spring-security-oauth2-provider)

我仍在为我的应用程序配置它，我认为文档可能需要进行一些编辑（特别是 authentication_code 流程），但我得到了简单的 client_credentials 流程以使用最少的配置。希望有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T14:56:31.963

根据我的经验，Scribe 是为 OAuth 1.0 构建的，对 OAuth 2.0 的支持非常有限。事实上，为了测试我们自己的 OAuth 2 实现，我们可以使用的只是一个 HTTP 请求包装器，我们必须手动执行其他任何操作。幸运的是，手动操作非常容易。

由于我还没有找到一个很好的 Java 开放 OAuth 2.0 库（坦率地说我不熟悉 Groovy），我鼓励您自己编写客户端代码。您甚至不需要客户端回调端点来使用客户端凭据授予流程。因此，您只需创建一个 HTTP 请求（正如您在上面已经写过的，但请注意转义 GET 参数）并获取响应内容。您的流程不使用重定向，因此只需解析响应内容中的 JSON 对象，例如使用 org.json 库。最后，使用提取的访问令牌发送 HTTP 请求。

请注意，您的示例并不完全符合标准。该标准要求使用 HTTPS，在 HTTP 标头而不是 GET 参数中发送令牌，并建议使用 HTTP 基本授权标头而不是 GET 参数来指定客户端凭据。

我可能误解了你的问题，你可能也想实现服务器端。scribe 库仅支持客户端，因此您可以找到商业实现或实现自己的服务器。这是一项复杂的任务，但如果您只支持客户端凭据流，它几乎变得容易。;-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-27T16:27:39.313

这不是一个插件，它只是一个充当 OAuth 提供者的示例 Grails 应用程序。使用 Grails 3 启动和运行起来真的很容易。

[https://github.com/bobbywarner/grails3-oauth2-api](https://github.com/bobbywarner/grails3-oauth2-api)

# c# - EWS 托管 API SyncFolderItems 如何更新和删除/跟踪项目

> ID：11220363
> 
> 赞同：3
> 
> 时间：2012-06-27T06:10:15.313
> 
> 标签：c#, exchange-server, ews-managed-api

我正在构建一个应用程序，该应用程序需要存在于受信任的域中，监视该域中交换服务器上的一组邮箱日历，并将约会同步到一个或多个其他服务器上的不同邮箱。与之同步的邮箱在由该应用程序的用户维护的内部映射表 (sqlce) 中定义。

我遇到的问题是我无法找到跟踪远程约会的方法，以便在必要时更新或删除它。在远程服务器上创建约会后，他们有一个新的 itemid，它与本地交换服务器上的同步文件夹项目调用返回的不对应。我无法按开始时间/主题找到该项目，因为这些可能已被更改或删除。

我的同步方法如下 - 我是完全错误的方法还是有更好的方法来使用 SyncFolderItems 方法？

到目前为止，我想出的解决问题的最佳方法是将远程约会的 ItemID 保存到本地约会的属性中，但即使这样我也不确定是否会起作用，因为我不知道之后维护了哪些属性删除？请帮忙！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Exchange.WebServices.Data;
using System.Net;

namespace ProExchangeSync2012
{
    class ExchangeWebServiceMethods
    {

    public string ProExchangeSyncCalendars(string LocalMailbox
                                                ,string RemoteMailbox
                                                ,string SyncState    
                                                ,ExchangeService RemoteService
                                                ,ExchangeService LocalService
                                                )
    {
        //if SyncState is empty string set to null
        if (SyncState.ToString().Length == 0)
        { SyncState = null; }

        ExchangeService LocalExchangeService = LocalService;
        ExchangeService RemoteExchangeService = RemoteService;
        RemoteExchangeService.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress,RemoteMailbox);

        //Folders and mailboxes to pass to the webservice in SyncItems call.
        Mailbox DonorMailBox = new Mailbox(LocalMailbox);
        Mailbox DestinationMailBox = new Mailbox(RemoteMailbox);
        FolderId DonorFolder = new FolderId(WellKnownFolderName.Calendar, DonorMailBox);
        FolderId DestinationFolder = new FolderId(WellKnownFolderName.Calendar, DestinationMailBox);

        //Create a ChangeCollection object and call syncfolderitems on local exchange service.
        ChangeCollection<ItemChange> ItemChanges
        = LocalExchangeService.SyncFolderItems(new FolderId(WellKnownFolderName.Calendar, DonorMailBox) //PASS IN THE MAILBOX HERE>
                                        , PropertySet.FirstClassProperties
                                        , null
                                        , 512
                                        , SyncFolderItemsScope.NormalItems
                                        , SyncState
                                        );

        //Store the SyncState
        SyncState = ItemChanges.SyncState;

        //Fetch all the required properties of the items
        //LocalService.LoadPropertiesForItems(ItemChanges, PropertySet.FirstClassProperties);

        if (ItemChanges.Count == 0)
        {
            Console.WriteLine("There are no items to synchronize.");
        }
        else
        {
            foreach (ItemChange ic in ItemChanges)
            {
                if (ic.ChangeType == ChangeType.Create)
                {
                    Appointment lappointment = Appointment.Bind(LocalExchangeService, ic.ItemId);
                    Appointment rappointment = new Appointment(RemoteExchangeService);
                    rappointment.Subject = lappointment.Subject;
                    rappointment.Start = lappointment.Start;
                    rappointment.Body = lappointment.Body;
                    rappointment.End = lappointment.End;
                    rappointment.Location = lappointment.Location;
                    rappointment.Save();

                }

                else if (ic.ChangeType == ChangeType.Update)
                {
                    //Bind to the local appointment and get the start date
                    Appointment lappointment = Appointment.Bind(LocalExchangeService, ic.ItemId);
                    DateTime StartDate = lappointment.Start;
                    ItemId ItemToUpdate = ItemIDSearch(RemoteExchangeService,StartDate,lappointment.Subject);
                    //Bind to the remote appointment using ItemToUpdate & update all the details 
                    //this is is less intensive than comparing the appointments for changes.
                    Appointment rappointment = Appointment.Bind(RemoteExchangeService, ItemToUpdate);
                    rappointment.Subject = lappointment.Subject;
                    rappointment.Start = lappointment.Start;
                    rappointment.Body = lappointment.Body;
                    rappointment.End = lappointment.End;
                    rappointment.Location = lappointment.Location;
                    rappointment.Save();

                }
                else if (ic.ChangeType == ChangeType.Delete)
                {
                    Appointment lappointment = Appointment.Bind(LocalExchangeService, ic.ItemId.UniqueId);
                    DateTime StartDate = lappointment.Start;
                    ItemId ItemToUpdate = ItemIDSearch(RemoteExchangeService, StartDate, lappointment.Subject);
                    Appointment rappointment = Appointment.Bind(RemoteExchangeService, ic.ItemId.UniqueId);
                    rappointment.Delete(DeleteMode.MoveToDeletedItems);
                }

            }
        }

        return SyncState;
    }
    //End of Sync Method

    //Below method returns a single itemid from exchange service based on start datetime of an appointment in a mailbox.
    public ItemId ItemIDSearch(ExchangeService ExchangeService, DateTime AppointmentStart, string subject)
    {
        ItemId FoundItem;
        ItemView iv = new ItemView(1000);
        iv.Traversal = ItemTraversal.Associated;

        SearchFilter.SearchFilterCollection searchFilterCollection =  new SearchFilter.SearchFilterCollection(LogicalOperator.And);
        searchFilterCollection.Add(new SearchFilter.IsEqualTo(AppointmentSchema.Subject,subject));
        searchFilterCollection.Add(new SearchFilter.IsEqualTo(AppointmentSchema.Start, AppointmentStart));

        FindItemsResults<Item> fiitems = ExchangeService.FindItems(WellKnownFolderName.Calendar, searchFilterCollection, iv);

        if (fiitems.Items.Count == 1)//if we only get one result do the work else return null
        {
            FoundItem = fiitems.Items[0].Id;
        }

        FoundItem = null;

        return FoundItem;          
    }

}
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:47:27.237

因此，来自 Exchange Web 服务的救星 Glen Scales 的所有这一切的最终解决方案是，我将正在同步的约会的“CleanGlobalObjectId”与调用时返回的 EWS UniqueId 一起存储在我的内部数据库中EWS SyncFolderItems 方法。

使用作为约会的扩展属性的 CleanGlobalObjectId，我总是能够在服务器上找到一个特定的约会，即使它已被硬删除，因为这个属性的值永远不会改变。

# java - 表单没有为 sql.date 的控制器提供价值

> ID：11220365
> 
> 赞同：0
> 
> 时间：2012-06-27T06:10:25.770
> 
> 标签：java, forms, spring, jakarta-ee, spring-mvc

表单没有为我使用 spring 的 sql.date 控制器提供价值，以下是我的表单代码

```
 <form:input path="regDateFrom" cssClass="txt-field-date" id="txt_reg_form" readonly="true" /> 
```

我的控制器是。

```
 protected ModelAndView processFormSubmission(HttpServletRequest request,
        HttpServletResponse response, Object command, BindException errors)
        throws Exception {
    String param_error = null;
    VehicleSearch vehicleSampling = (VehicleSearch) command;
    System.out.println(vehicleSampling.getRegDateFrom()); 
```

在打印时它给出了 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:17:16.970

你需要有

```
@InitBinder
    public void initBinder(WebDataBinder binder) {
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
        dateFormat.setLenient(false);
        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
    } 
```

而不是“sql.date”使用“util.date”

也尝试通过删除属性“只读”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:38:16.590

我猜您需要删除“ReadOnly = true”，如果将 readOnly 设置为 true，则该值将不会随请求一起传递。

# javascript - Backbone：设置父视图的模型（不同于子模型）

> ID：11220367
> 
> 赞同：0
> 
> 时间：2012-06-27T06:10:29.283
> 
> 标签：javascript, model, backbone.js

我有一个`Parent`和`Child`视图。该`Child`视图通过以下方式扩展`Parent`事件：

```
 initialize : function() {
        // don't overwrite parent's events
        this.events = _.extend( {}, ExerciseRowView.prototype.events, this.events);
    }, 
```

但是，`Parent`期望 a`ParentModel`和`Child`期望 a `ChildModel`，所以当一个事件传递给 时`Parent`，模型就是`ChildModel`。如何将`Parent`模型设置为与模型不同`Child`？

谢谢！

这是来源，根据要求。

`ParentView`又名`ExerciseRowView`：

```
var ExerciseRowView = Parse.View.extend( {
        tagName : 'div',
        className : 'exerciseWrapper',

        template : _.template(exerciseElement),

        events : {
            'click .icon_delete' : 'confirmDelete',
            'click .name' : 'showDetailsPopup'
        },

        confirmDelete : function() {
            var that = this;

            if(confirm("Are you sure you want to delete this exercise?")) {
                this.destroy({
                    success: function(exercise) {
                        // log the action
                        Log.add(Log.ACTION_EXERCISE_DELETED, exercise.get("name"));

                        that.$el.fadeOut();
                    }
                });
            }
        },

        showDetailsPopup : function() {
            (new ExerciseDetailsView({model: (this.model.constructor == Exercise ? this.model : this.model.get("exercise"))})).render();
        },

        // accept data as a parameter for workoutexercises
        render : function(data) {
            _.defaults(data, {
                exercise: this.model,
                Muscle : Muscle,
                Equipment : Equipment,
                Exercise : Exercise,
                Break : Break,
                HTMLHelper : HTMLHelper,
                User : User
            });
            $(this.el).html(this.template(data));
            return this;
        }
    }); 
```

`ChildView`又名`WorkoutExerciseRowView`：

```
var WorkoutExerciseRowView = ExerciseRowView.extend( {      

        events : {
            "click .icon_randomize" : "changeToRandomExercise"
        },

        initialize : function() {
            // don't overwrite parent's events
            this.events = _.extend( {}, ExerciseRowView.prototype.events, this.events);
        },

        render: function() {
            // override the template data with workout exercise template data
            return ExerciseRowView.prototype.render.call(this, {
                workoutExercise : this.model,
                exercise : this.model.get("exercise"),
                workoutSection : this.model.get("section"),
                isEditable : true,
                number : this.options.number,
                WorkoutExercise : WorkoutExercise,
                WorkoutSection : WorkoutSection
            });
        },

        changeToRandomExercise : function(e) {
            // pick a random alternative exercise
            var newExerciseId;
            do {
                newExerciseId = _.keys(this.model.get("alternativeExercises"))[ Math.floor(Math.random() * _.keys(this.model.get("alternativeExercises")).length) ];
            } while(newExerciseId == this.model.get("exercise").id);

            // grab it
            var that = this;
            (new Parse.Query(Exercise)).get(newExerciseId, {
                success: function(exercise) {
                    // update the workout exercise
                    that.model.set("exercise", exercise);

                    // render it
                    that.render();
                }
            });
        }
    }); 
```

目前（如您所见），我测试是否`this.model.constructor == Exercise`在`ExerciseRowView`. 如果不是，我知道我有一个`WorkoutExercise`，里面是一个`Exercise`，所以我使用`this.model.get("exercise")`：

```
showDetailsPopup : function() {
            (new ExerciseDetailsView({model: (this.model.constructor == Exercise ? this.model : this.model.get("exercise"))})).render();
        }, 
```

不过，这似乎不是最干净的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:17:44.113

我能想到的是你为每个视图定义函数

父视图

```
getExercise: function() {
  return this.model;
} 
```

子视图

```
getExercise: function() {
  return this.model.get('exercise');
} 
```

然后改变功能

```
showDetailsPopup: function() {
  (new ExerciseDetailsView({model: this.getExercise()})).render();
} 
```

那个怎么样？

# jquery - 在 liferay portlet 中使用 jquery post

> ID：11220374
> 
> 赞同：1
> 
> 时间：2012-06-27T06:11:00.467
> 
> 标签：jquery, jsp, liferay, portlet

我想`jquery`在我的 portlet 中使用，但它是我的第一个 portlet，不知道需要做什么。

我正在设置参数`view.jsp`并执行以下操作：

```
<portlet: actionURL var="setStatusURL">
    <portlet: param name="jspPage" var="/setStatus.jsp"/>
</portlet: actionURL>

$.post(
   "<%=setStatusURL %>",
   {
       ids:ch.toString()
   }
); 
```

`Firebug`说`setStatus.jsp 404 not found`。

我应该如何编写 URL 以使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T05:54:04.810

由于[`jQuery.post()`](http://api.jquery.com/jQuery.post/)是 ajax 调用，我认为应该使用`ResourceURL`( [`<portlet:resourceURL />`](http://java.sun.com/developer/technicalArticles/J2EE/sdk_portletcontaineru5/#Resource_Serving)) 而不是`<portlet:actionURL />`.

很明显，您需要在您的 portlet 中显式包含[jQuery](http://jquery.com/)库才能使用它。从 Liferay 6.0 开始，jQuery 作为一个内置的 javascript 库被移除。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:43:09.923

第1步：请确保配置好所有需要的js文件。
第 2 步：在脚本提供区域（jquery）中正确使用您的操作 url
第 3 步：遵循 jquery 脚本语法

# php - 无效的 parse_str 输入

> ID：11220377
> 
> 赞同：0
> 
> 时间：2012-06-27T06:11:24.570
> 
> 标签：php

是否有任何可以传递给[parse_str](http://php.net/manual/en/function.parse-str.php)的输入会导致第二个引用参数**未**设置为数组？

因此，一个值**$x**将导致条件为真。

```
parse_str($x, $array);
if (is_array($array) === false)) {
    echo $x . ' wont parse to an array!';
} 
```

我尝试了`null`,`false`和几个字符串，所有这些都导致`$array`成为一个空数组。

# macos - AppleScript：从文件名创建新文件夹并将文件移动到该文件夹 中

> ID：11220379
> 
> 赞同：2
> 
> 时间：2012-06-27T06:11:28.423
> 
> 标签：macos, applescript, automator

基本上，我试图在 Automator 中创建一个文件夹操作，因此每当将文件添加到特定文件夹时，它都会创建一个与文件名匹配的子文件夹（不带扩展名），然后将文件移动到该子文件夹中。

到目前为止，我已经成功地使用了来自该站点的帖子（[在 Automator 中创建以指定文件名命名的新文件夹](https://stackoverflow.com/questions/4204372/create-new-folder-named-with-a-specified-file-name-in-automator)）来创建将创建新文件夹的脚本。但是，我无法修改脚本以将原始文件移动到新文件夹中。

任何帮助，将不胜感激。这是我正在使用的完整脚本以供参考：

```
 on run {input, parameters} -- make new folders from base file names

    set output to {}

    repeat with anItem in the input -- step through each item in the input

        set anItem to anItem as text
        tell application "System Events" to tell disk item anItem
            set theContainer to path of container
            set {theName, theExtension} to {name, name extension}
        end tell
        if theExtension is in {missing value, ""} then
            set theExtension to ""
        else
            set theExtension to "." & theExtension
        end if
        set theName to text 1 thru -((count theExtension) + 1) of theName -- the name part

        tell application "Finder"
            make new folder at folder theContainer with properties {name:theName}
            set end of output to result as alias
        end tell
    end repeat

    return input -- or output
end run 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:09:45.483

将此文件夹操作添加到您的目标文件夹：

```
on adding folder items to theFolder after receiving theFiles
    repeat with aFile in theFiles
        tell application "System Events" to set {Nm, Ex, pPath} to aFile's {name, name extension, POSIX path of container}
        set BN to text 1 thru ((get offset of "." & Ex in Nm) - 1) of Nm
        set thePath to (pPath & "/" & BN & "/" as text)
        do shell script "mkdir -p " & quoted form of thePath
        delay 0.5
        tell application "Finder" to move aFile to POSIX file thePath
    end repeat
end adding folder items to 
```

# javascript - 将 MouseOver ToolTip 更改为 OnClick，但想知道如何添加关闭按钮或 AutoClose？

> ID：11220380
> 
> 赞同：0
> 
> 时间：2012-06-27T06:11:35.490
> 
> 标签：javascript, jquery, jquery-events, jquery-ui-tooltip

`MouseOver`将工具提示更改为`OnClick`，但想知道如何向工具提示添加关闭按钮或自动关闭。

就像单击关闭按钮后工具提示关闭或打开其他工具提示后自动关闭一样！

可以做到吗？

这是代码！

```
var htmltooltip={
tipclass: 'htmltooltip',
fadeeffect: [true, 500],
anchors: [],
tooltips: [], //array to contain references to all tooltip DIVs on the page

positiontip:function($, tipindex, e){
    var anchor=this.anchors[tipindex]
    var tooltip=this.tooltips[tipindex]
    var scrollLeft=window.pageXOffset? window.pageXOffset : this.iebody.scrollLeft
    var scrollTop=window.pageYOffset? window.pageYOffset : this.iebody.scrollTop
    var docwidth=(window.innerWidth)? window.innerWidth-15 : htmltooltip.iebody.clientWidth-15
    var docheight=(window.innerHeight)? window.innerHeight-18 : htmltooltip.iebody.clientHeight-15
    var tipx=anchor.dimensions.offsetx
    var tipy=anchor.dimensions.offsety+anchor.dimensions.h
    tipx=(tipx+tooltip.dimensions.w-scrollLeft>docwidth)? tipx-tooltip.dimensions.w : tipx //account for right edge
    tipy=(tipy+tooltip.dimensions.h-scrollTop>docheight)? tipy-tooltip.dimensions.h-anchor.dimensions.h : tipy //account for bottom edge
    $(tooltip).css({left: tipx, top: tipy})
},

showtip:function($, tipindex, e){
    var tooltip=this.tooltips[tipindex]
    if (this.fadeeffect[0])
        $(tooltip).hide().fadeIn(this.fadeeffect[1])
    else
        $(tooltip).show()
},

hidetip:function($, tipindex, e){
    var tooltip=this.tooltips[tipindex]
    if (this.fadeeffect[0])
        $(tooltip).fadeOut(this.fadeeffect[1])
    else
        $(tooltip).hide()   
},

updateanchordimensions:function($){
    var $anchors=$('*[@rel="'+htmltooltip.tipclass+'"]')
    $anchors.each(function(index){
        this.dimensions={w:this.offsetWidth, h:this.offsetHeight, offsetx:$(this).offset().left, offsety:$(this).offset().top}
    })
},

render:function(){
    jQuery(document).ready(function($){
        htmltooltip.iebody=(document.compatMode && document.compatMode!="BackCompat")? document.documentElement : document.body
        var $anchors=$('*[@rel="'+htmltooltip.tipclass+'"]')
        var $tooltips=$('div[@class="'+htmltooltip.tipclass+'"]')
        $anchors.each(function(index){ //find all links with "title=htmltooltip" declaration
            this.dimensions={w:this.offsetWidth, h:this.offsetHeight, offsetx:$(this).offset().left, offsety:$(this).offset().top} //store anchor dimensions
            this.tippos=index+' pos' //store index of corresponding tooltip
            var tooltip=$tooltips.eq(index).get(0) //ref corresponding tooltip
            if (tooltip==null) //if no corresponding tooltip found
                return //exist
            tooltip.dimensions={w:tooltip.offsetWidth, h:tooltip.offsetHeight}
            $(tooltip).remove().appendTo('body') //add tooltip to end of BODY for easier positioning
            htmltooltip.tooltips.push(tooltip) //store reference to each tooltip
            htmltooltip.anchors.push(this) //store reference to each anchor
            var $anchor=$(this)
            $anchor.click( 
        function(e){ //onMouseover element 
            htmltooltip.positiontip($, parseInt(this.tippos), e) 
            htmltooltip.showtip($, parseInt(this.tippos), e) 
        }
    ) 
            $(window).bind("resize", function(){htmltooltip.updateanchordimensions($)})
        })
    })
}
}

htmltooltip.render() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:05:06.570

试试这个，在鼠标移出时隐藏你的工具提示：

```
$anchor.mouseout(
            function(e){ 
                htmltooltip.hidetip($, parseInt(this.tippos), e) 
            }
        ) 
```

# matlab - 关于在伪彩色图形中绘制两个图像

> ID：11220392
> 
> 赞同：0
> 
> 时间：2012-06-27T06:12:47.143
> 
> 标签：matlab, color-mapping

我正在使用 matlab 以伪彩色图形 ( `pcolor`) 可视化我的数据。以 pcolor 显示数据效果很好，但现在我又得到了一个数据集。如果我将每个数据集绘制在单独的 pcolor 图中，一切都很好。但是现在，我将这两个数据结合起来

```
NEW_DATA = [OLDDATA1, OLDATA2] 
```

如果我改为对 NEW_DATA 着色，颜色就会变得混乱。这是我可以在不丢失任何细节或颜色信息的情况下显示组合数据的任何方式吗？在我的情况下，如果你 plot `pcolor(NEW_DATA)`，一般形状保持不变（就像`[pcolor(OLDDATA1), pcolor(OLDATA2)]`），但一些细节变得模糊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:46:59.557

在[pcolor](http://www.mathworks.com/help/techdoc/ref/pcolor.html)图中，顶点颜色被缩放到颜色图中。`'clim'`您可以使用轴的属性设置缩放。我猜这里发生的事情是两者之间的缩放比例`OLDDATA`和组合的不同`NEWDATA`。

最终，您需要决定使用哪种缩放比例；如果您喜欢来自 的原件`OLDDATA1`，您可以执行以下操作：

```
pcolor(OLDDATA1);
orig_clim = get(gca,'clim'); %# just to get the color limits

pcolor(NEWDATA);
set(gca, 'clim', orig_clim); 
```

如果您喜欢*两个* `OLDDATA`图的原始缩放比例并且没有适用于两者的缩放比例，您可以手动创建一个图形，其中两个轴彼此相邻放置（而不是依赖于`subplot`）。每个轴对象都可以有自己`clim`的方式，但是这两个图将显示为连续的。

```
figure;
h1 = axes('units','normalized','position',[.05 .05 .45 .45]);
h2 = axes('units','normalized','position',[.5  .05 .45 .45]);
pcolor(h1, OLDDATA1);
pcolor(h2, OLDDATA2);
set(h2, 'ytick', []); %# turn off ytick (if it was on) 
```

# android - 如何防止在android中短时间内连续按下按钮？

> ID：11220394
> 
> 赞同：0
> 
> 时间：2012-06-27T06:13:00.903
> 
> 标签：android, button

由于用户在短时间内按下按钮太快而导致错误。以下是错误：

```
06-27 12:46:51.500: ERROR/ActivityManager(115): ANR in test.test.test (test.test.test/.testActivity)
06-27 12:46:51.500: ERROR/ActivityManager(115): Reason: keyDispatchingTimedOut
06-27 12:46:51.500: ERROR/ActivityManager(115): Load: 3.94 / 2.98 / 2.63
06-27 12:46:51.500: ERROR/ActivityManager(115): CPU usage from 5863ms to 0ms ago:
06-27 12:46:51.500: ERROR/ActivityManager(115):   5.6% 36/nandd: 0% user + 5.6% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115):   1.7% 3/ksoftirqd/0: 0% user + 1.7% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115):   1.5% 89/mediaserver: 1.5% user + 0% kernel / faults: 14 minor
06-27 12:46:51.500: ERROR/ActivityManager(115):   1% 5780/com.inno.wordcard: 1% user + 0% kernel / faults: 34 minor
06-27 12:46:51.500: ERROR/ActivityManager(115):   0.8% 115/system_server: 0.3% user + 0.5% kernel / faults: 8 minor
06-27 12:46:51.500: ERROR/ActivityManager(115):   0% 4933/kworker/0:0: 0% user + 0% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115):   0.1% 176/com.android.systemui: 0.1% user + 0% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115):   0.1% 1440/logcat: 0% user + 0.1% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115): 93% TOTAL: 2.9% user + 9% kernel + 81% iowait
06-27 12:46:51.500: ERROR/ActivityManager(115): CPU usage from 217ms to 736ms later:
06-27 12:46:51.500: ERROR/ActivityManager(115):   7.6% 36/nandd: 0% user + 7.6% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115):   3.8% 115/system_server: 0% user + 3.8% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115):     1.9% 116/HeapWorker: 0% user + 1.9% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115):     1.9% 149/InputDispatcher: 0% user + 1.9% kernel
06-27 12:46:51.500: ERROR/ActivityManager(115): 100% TOTAL: 0% user + 11% kernel + 88% iowait 
```

我怎样才能防止这样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:17:35.660

点击按钮后您是否正在调用网络服务？有几种选择：

1.添加一个进度对话框，在后台禁用任何东西。如果它是一个网络服务，这是最好的解决方案。

2.在您执行任何操作的时间段内禁用屏幕中的任何 UI 元素。

3\. 产生一个新线程或一个异步任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:28:21.147

您可以使用布尔变量来防止在每次单击按钮时运行您的代码：

```
boolean isClicked=true;
Button btn = (Button) findViewById(YourId);
btn.setonClickListener(listener);
public onClickListener listener = new View.OnclickListener{
      onclick(View v){
      if(isClicked==true)
      {
        isClicked=false;
        doWork();
        //DO YOUR WORK HERE...
      }
      else
      {
        // DO NOTHING...
      }
      }
}
 public void doWork(){
      /// YOUR CODE HERE...

         //USE AsyncTask ,Hanlder,handlerThread, or Thread for performing long running         task in background on button click
        isClicked=true;

     } 
```

# java - 关于消费者/产品模式

> ID：11220396
> 
> 赞同：-2
> 
> 时间：2012-06-27T06:13:21.870
> 
> 标签：java

以下源代码用于实现产品/消费者模式，但效果不佳，不知道如何解决。

第一类：生产者

```
package test;

import java.util.ArrayList;
import java.util.List;

public class Productor extends Thread {

private List list = null;

public Productor(ArrayList list) {
    this.list = list;
}

public synchronized void product() throws InterruptedException {
    for (int e = 0; e < 10; e++) {
        System.out.println("Add-" + e + "  " + System.currentTimeMillis());
        list.add(e);

        if (list.size() >= 10) {
            wait();
        } else {
            notifyAll();
        }
    }
}

public void run() {
    try {
        while(true){
            product();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

2类：消费包测试；

```
import java.util.ArrayList;
import java.util.List;

public class Consumer extends Thread {

private List list = null;

public Consumer(ArrayList list) {
    this.list = list;
}

public synchronized void consume() throws InterruptedException {
    if (list.size() <= 0) {
        wait();
    } else {
        notifyAll();
    }

    for (int e = 0; e < list.size(); e++) {
        System.out.println("Remove-" + e + "  "
                + System.currentTimeMillis());
        list.remove(e);
    }
}

public void run() {
    try {
        while(true){
            consume();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

} 
```

第3类：产品/消费者包装测试的测试；

```
import java.util.ArrayList;

public class TestCP {
public static void main(String args[]) throws InterruptedException {
    ArrayList product = new ArrayList();
    Productor pt = new Productor(product);
    Consumer ct = new Consumer(product);
    pt.start();
    ct.start();
}
} 
```

TestCP 的输出是：

加0 1340777963967

加1 1340777963968

加2 1340777963968

加3 1340777963968

加4 1340777963968

加5 1340777963968

加6 1340777963968

加7 1340777963968

加8 1340777963968

加9 1340777963968

我的意图是 Productor 产品 10 个元素存储在列表中并由消费者消费，然后 Productor 产品元素再次，消费者再次消费......任何反馈将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:55:11.120

You wait/notify on the diferent thread not on the list. So the threads are running on their own monitors not on a shared one. Search for "java wait notify" and keep on reading.

# php - 如何处理移动设备的登录会话和 cookie

> ID：11220404
> 
> 赞同：0
> 
> 时间：2012-06-27T06:13:48.550
> 
> 标签：php, iphone, yii

我们正在开发一个在 YII PHP 框架中具有服务器端编码的 iPhone 应用程序。有什么方法可以处理移动设备的登录会话和 cookie，或者 YII 是否支持任何设置来处理设备的 cookie 和会话？

我认为 Yii 对此提供了一些解决方案，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:17:01.587

您可以使用[NSUserDefault](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)来存储会话。

您可以解决它来存储会话和 cookie。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"SessionKey"] 
    && [defaults objectForKey:@"Cookie"]) {
     //session and cookie alive
     logInSession= [defaults objectForKey:@"SessionKey"];
     logInCookie= [defaults objectForKey:@"Cookie"];
}else{
     //you might want to present a login view then generate session key etc
     logInSession = @"new session";
     logInCookie = @"new cookie";
     [defaults setObject:logInSession forKey:@"SessionKey"];
     [defaults setObject:logInCookie forKey:@"Cookie"];
     [defaults synchronize];
}

-(void)logOutAndClear
{
  //do logout here, clear you defaults
 [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"SessionKey"];
} 
```

这是一种非常简单的方法，而不是实现您想要的最佳方法。检查[NSHTTPCookieStorage](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)，这可能会有所帮助

编辑：上面的代码只是为了表达这个想法，未经测试。

# uitableview - 在按下 UIBarButtonItem 时添加带有 UITextField 的 UITableViewCell

> ID：11220405
> 
> 赞同：0
> 
> 时间：2012-06-27T06:13:49.490
> 
> 标签：uitableview, nsmutablearray, uitextfield, uibarbuttonitem

我对 IOS 开发和 Objective-C 非常陌生，因为我刚刚来自 Java 背景。坦率地说，我在网上到处搜索以找到我的问题的答案，但似乎没有人可以就如何做到这一点给出一个清晰简洁的答案，所以任何事情都会非常感激！

所以这就是我想要做的。我在它下面有一个`UITableView`和一个。我想要做的是能够按下然后创建一个带有文本字段的新文本并将其放置在具有唯一标签的顶部，以便我可以稍后解析文本字段并检索文本存储到可变数组中。`UIToolBar``UIBarButtonItem``BarButtonItem``TableViewCell``TableView`

任何帮助都会非常棒，所以提前谢谢你，我真的很想让这个工作！如果您对我的代码有任何疑问，或者对我的要求有更多详细信息，请询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:06:55.967

最简单的方法是在 UIToolbar 按钮项被触摸​​时将 UITextField 放在 UITableView 标头上。最简单的方法是在 UIToolbar 按钮项被触摸​​时将 UITextField 放在 UITableView 标头上。用户在 UITextField 上完成后，然后更新您的 NSMutableArray 重新加载 UITableView 的数据并删除 UITableView 上的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:53:20.817

好吧，有很多关于如何添加 TableView、工具栏等的资源......这里是您想要做什么的概述。

在 ViewController 的视图中，向其中添加一个 UITableView，但请记住，您希望在 ViewController 的视图中为屏幕底部的工具栏留出空间。所以相应地设置 tableView.frame 。

查找如何添加 UIToolbar（http://stackoverflow.com/a/7712240/1457445 是一个好的开始）然后如何添加 UIBarButtonItem（http://stackoverflow.com/questions/5383906/how-to-add -uibarbuttonitem-in-uitoolbar-in-code)

至于在 UITableViewCell 中添加 textView，只需调用 [tableView.contentView addSubview:yourTextView]; 同样，自定义 UITableViewCells 有很多帮助（http://stackoverflow.com/questions/4238760/how-to-make-a-uitableviewcell-with-a-uitextview-inside-that-dynamically-adjust）

最重要的是，您需要弄清楚如何将 textview 单元格添加到表格中 - 另一个很棒的 SO 帖子（http://stackoverflow.com/questions/5824998/uitableview-adding-cells-dynamically）

# c#-4.0 - 如何拉伸和缩放容器（例如面板、组框）中的单个子项以适应不同分辨率的屏幕？C#.net

> ID：11220406
> 
> 赞同：0
> 
> 时间：2012-06-27T06:13:53.723
> 
> 标签：c#-4.0

基本上，我有一个用户控件作为主容器，里面有一些组框和按钮。但是，我的界面控件不会像我在设计界面中所期望的那样正确调整大小和定位。

我已经尝试过更改锚点和停靠点属性，但它们都不符合我的目的。

我在网上搜索并在 WPF 中找到了一个叫做 viewbox 的东西，我想知道在 Visual Studio 2010 中是否有类似“viewbox”的东西？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:23:40.140

尝试使用 TableLayoutPanel 容器并将您的控件放入其中。它类似于 HTML 中表格的概念，表格分为行和列，每一个都可以设置为一组像素或百分比。通常如果你想使用可调整大小的表单，通常你应该有一个控件，可以在拉伸时给你很好的结果，比如图像、多行文本框等......另外，把停靠属性填充到你想要的拉伸.

我希望这些信息对你有用。

# .net - 如何将 PFX Task.Factory.StartNew 用于带参数的 F# 函数？

> ID：11220410
> 
> 赞同：2
> 
> 时间：2012-06-27T06:14:15.700
> 
> 标签：.net, f#

使用*Programming F#* book，有一个示例首先作为串行给出：

```
let result1 = longTask1()
let result2= = LongTask2() 
```

然后使用 PFX 它被赋予

```
Open System.Threading.Tasks

let taskBody = new Func<string>(longTask1)
let task = Task.Factory.StartNew<string>(taskBody)

let result2 = longTask2()
let result1 = task.Result 
```

但是，在我的情况下，该函数`readBlock`接受一个字符串`filePath`作为参数并返回一个`seq`. 我试过这样

```
let taskBody = new System.Func<string, seq<_>>(readBlock)
let task = Task.Factory.StartNew<seq<_>>(taskBody.Invoke(filePath)) 
```

这显示了 Task.Factory.StartNew 部分的错误 - 参数太多。那么如何调用返回值的参数化函数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:53:03.020

书中的代码已经过时了。这本书是在VS 2010发布之前写的，F#和PFX的一些部分还没有解决。

现在你可以写：

```
let task = Task.Factory.StartNew(fun () -> readBlock(filePath)) 
```

类型检查器将为 推断出适当的类型`task`，您可以稍后调用`task.Result`以获取结果。

闭包和 之间存在隐式转换`System.Func<_, _>`，在这种情况下使用闭包更具可读性。

# java - 生成 16 个字节的 uniqueId（或 UUID）并测试它

> ID：11220413
> 
> 赞同：3
> 
> 时间：2012-06-27T06:14:26.097
> 
> 标签：java, uuid, uniqueidentifier

我需要创建一个唯一的 ID。它必须是 16 字节长。

我遇到了 java.util.UUID 并尝试使用 UUID.randomUUID()。但是如何确保生成的 UUID 为 16 字节长呢？

在我的 JUnit 中，我尝试使用

```
Assert.assertTrue(stringUUID.getBytes().length() ==16) 
```

这个对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:17:53.960

您不需要对 JDK 类进行单元测试（除非您正在为 JDK 编写代码）。`java.util.UUID`将创建正确的 16 字节唯一 ID。而是专注于您自己的代码的测试工作。

对于更容易理解的测试用例输出（在断言失败的情况下），最好使用 assertEquals：

```
assertEquals("UUID has expected length", 16, stringUUID.getBytes().length()); 
```

但是，这将失败，因为[字符串表示](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html#toString%28%29)超过 16 个字节。十六进制编码和连字符等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T06:26:46.480

`UUID.randomUUID()`方法生成一个`type-4`UUID。这很`36 byte`长并且具有`xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx`x 是任何`hexadecimal`数字且 y 是 8、9、A 或 B 之一的形式。例如`f47ac10b-58cc-4372-a567-0e02b2c3d479.`

# facebook - PHP 卷曲 CURLOPT_IPRESOLVE

> ID：11220416
> 
> 赞同：13
> 
> 时间：2012-06-27T06:14:31.513
> 
> 标签：facebook, facebook-graph-api, curl, ipv6

我一直在开发一个使用 facebook 图形 API 进行身份验证的 facebook 应用程序，最近 facebook 升级到 IPv6，我的网络不支持 IPv6，所以我的所有调用都开始返回 Host is unreachable 错误，我搜索了 facebook 错误并发现我们仍然可以使用 CURL CURLOPT_IPRESOLVE 强制对 facebook 的请求使用 IPv4。

现在，当我尝试使用 curl 向 Facebook Graph API 发送请求时，我得到了通知：使用未定义的常量 CURLOPT_IPRESOLVE - 假定为“CURLOPT_IPRESOLVE”

我想知道如何启用对这个常量的支持，或者如何在 php 中禁用 IPv6 支持，以便可以使用 IPv4 向 Facebook Graph API 发送请求。

我的代码是

```
 $url = ("https://graph.facebook.com/me/access_token?tokrn");
        $c = curl_init();
        curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($c, CURLOPT_URL, $url);
        curl_setopt($c, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4); 
        $contents = curl_exec($c);
        $err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
        curl_close($c); 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T07:49:20.160

检查你的 curl 版本

> CURLOPT_IPRESOLVE 自 curl 7.10.8 起可用

试试这个示例代码来测试

```
<?php

    $version = curl_version();

// These are the bitfields that can be used 
// to check for features in the curl build
$bitfields = Array(
            'CURL_VERSION_IPV6', 
            'CURLOPT_IPRESOLVE'
            );

foreach($bitfields as $feature)
{
    echo $feature . ($version['features'] & constant($feature) ? ' matches' : ' does not match');
    echo PHP_EOL;
} 
```

仅供参考： http: [//gcov.php.net/PHP_5_3/lcov_html/curl/interface.c.gcov.php](http://gcov.php.net/PHP_5_3/lcov_html/curl/interface.c.gcov.php)

# iphone - 几次回放后游戏场景开始闪烁

> ID：11220417
> 
> 赞同：2
> 
> 时间：2012-06-27T06:14:36.177
> 
> 标签：iphone, ios, cocos2d-iphone

我正在使用 cocos2D 游戏引擎。几次重播后，游戏场景开始闪烁，精灵根本不动。但是精灵的位置会随着玩家离开而移动。每个函数都会被调用。但什么也没有出现。我已经通过仪器检查了内存消耗。内存消耗没问题。任何帮助表示赞赏。提前致谢。

这是我结束游戏时使用的代码。

```
[[CCDirector sharedDirector].openGLView removeFromSuperview];
[[CCDirector sharedDirector] stopAnimation];
[[CCDirector sharedDirector] end]; 
```

这是我再次加载游戏场景时使用的代码。

```
if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
    [CCDirector setDirectorType:kCCDirectorTypeDefault];

CCDirector *director = [CCDirector sharedDirector];

viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
viewController.wantsFullScreenLayout = YES;

EAGLView *glView = [[EAGLView alloc] initWithFrame:[window bounds]];

[director setOpenGLView:glView];

if( ! [director enableRetinaDisplay:YES] )
    CCLOG(@"Retina Display Not supported");

[director setDeviceOrientation:kCCDeviceOrientationLandscapeRight];

[viewController setView:glView];
[window addSubview: viewController.view];
[window makeKeyAndVisible];

[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

[[CCDirector sharedDirector] runWithScene: [HelloWorldLayer node]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:29:22.910

我不断重复我自己的建议，所以我把它放在引号中：

> 如果您在 Cocoa 触控应用程序中使用 cocos2d，请**不要**一直删除并重新创建 OpenGL 视图。创建一次，并保留它。也不要完全关闭 cocos2d。只调用 stopAnimation 和 startAnimation。如果您的内存非常低，请在停止 cocos2d 并返回应用程序的 Cocoa touch 部分之前将当前 cocos2d 场景替换为空场景。

不遵循此建议的开发人员会不断遇到各种问题。可能是因为 cocos2d 在各种条件下没有经过反复关闭和​​重启循环的良好测试。

# arrays - 递归函数后的数组样本

> ID：11220420
> 
> 赞同：1
> 
> 时间：2012-06-27T06:14:51.790
> 
> 标签：arrays, recursion

在一些递归函数之后，我有一个数组：

**第一次迭代：** Array ( [category_id] => 3 [title] => Aqua [parent] => 0 ) )

**第二：** Array ([category_id] => 5 [title] => Sea aqua [parent] => 3) Array ([category_id] => 3 [title] => Aqua [parent] => 0))

等等...

如何仅显示 [parent] => 0 的一个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:26:05.640

你可能想做这样的事情：

```
foreach ($arrays as $arr){
  if ($arr['parent'] == 0){
     echo $arr['category_id'] . "\n";
  }
} 
```

# css - CSS 文本未正确呈现

> ID：11220423
> 
> 赞同：0
> 
> 时间：2012-06-27T06:15:06.127
> 
> 标签：css, fonts

我已经下载了一种字体以在我的网站上使用。当我在 MAMP 上运行该网站时，字体显示得非常好。当我将它上传到 HostGator 时，字体不显示（并返回默认字体系列）。

为什么？！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:43:00.963

字体不在 HostGator 服务器上的指定 URL 中，或者服务器设置（例如，访问限制）阻止服务器发送字体，或者发送时带有不正确的 HTTP 标头。为了解决这些可能性，至少需要服务器上字体的 URL，最好是引用页面的 URL。

# json - json字符串和解析的json字符串的区别

> ID：11220425
> 
> 赞同：6
> 
> 时间：2012-06-27T06:15:17.323
> 
> 标签：json, parsing

json字符串和解析的json字符串有什么区别？例如，在 javascript 中假设我有一个 json 格式的字符串，比如 [{},{}]

解析这个字符串也会产生同样的结果。

那么为什么我们需要解析呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T06:20:50.713

这只是序列化/反序列化。

在 Javscript 代码中，您通常使用对象，因为这可以让您轻松获取其属性等，而 JSON 字符串对您没有多大用处。

```
var jsonobj = { "arr": [ 5, 2 ], "str": "foo" };
console.log(jsonobj.arr[1] + jsonobj.str);
// 2foo

var jsonstr = JSON.stringify(jsonobj);
// cannot do much with this 
```

但是，要通过 Ajax 调用将其发送到服务器，您需要先对其进行序列化（字符串化）。同样，当从服务器接收回 JSON 时，您需要将字符串反序列化（解析）为对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T06:27:31.063

好问题。区别在于传输格式。

JSON 只是 JavaScript 对象的“符号”，它实际上并不是 JavaScript 的“对象文字”本身。因此，当数据以 JSON 格式接收时，它只是一个要被解释、评估、解析的字符串，以便成为实际的 JavaScript 'Object-Literal.

两者之间有一个物理区别，那就是引号。这是有道理的，JSON 需要是要传输的字符串。方法如下：

```
//A JavaScript Object-Literal

var anObj  = { member: 'value'}

//A JSON representation of that object

var aJSON = { "member":"value" } 
```

希望有帮助。一切顺利！纳什

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:22:48.323

我认为解析的 json 字符串应该是实际 javascript 对象和数据数组中的字符串数据（或 json 字符串包含的任何语言）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-20T06:40:07.573

JSON 对象包含用于解析 JSON 并将值转换为 JSON 的方法。

它不能被调用或构造，除了它的两个方法属性之外，它没有自己有趣的功能。

```
JSONParser parser = new JSONParser();
Object object = parser.parse(Message.toString());
JSONObject arObj = (JSONObject) object; 
```

# php - 如何在 javascript 代码中包含 php 文件（top.php）？

> ID：11220426
> 
> 赞同：0
> 
> 时间：2012-06-27T06:15:23.927
> 
> 标签：php, javascript, browser

如果满足条件，我想在我的 javascript 代码中包含一个名为 top.php 的 php fie。这是用于检查浏览器版本的代码。我需要检查浏览器名称，如果它的 chrome 则只需要显示 top.php 文件。但是在每个浏览器的这段代码中，它都包含该页面。

```
<script type="text/javascript">
    var nVer = navigator.appVersion;
    var nAgt = navigator.userAgent;
    var browserName  = navigator.appName;
    var fullVersion  = ''+parseFloat(navigator.appVersion); 
    var majorVersion = parseInt(navigator.appVersion,10);
    var nameOffset,verOffset,ix;

    // In Opera, the true version is after "Opera" or after "Version"
    if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
     browserName = "Opera";
     fullVersion = nAgt.substring(verOffset+6);
     if ((verOffset=nAgt.indexOf("Version"))!=-1) 
       fullVersion = nAgt.substring(verOffset+8);
    }
    // In MSIE, the true version is after "MSIE" in userAgent
    else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
     browserName = "Microsoft Internet Explorer";
     fullVersion = nAgt.substring(verOffset+5);
    }
    // In Chrome, the true version is after "Chrome" 
    else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
     browserName = "Chrome";
     fullVersion = nAgt.substring(verOffset+7);
    }
    // In Safari, the true version is after "Safari" or after "Version" 
    else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
     browserName = "Safari";
     fullVersion = nAgt.substring(verOffset+7);
     if ((verOffset=nAgt.indexOf("Version"))!=-1) 
       fullVersion = nAgt.substring(verOffset+8);
    }
    // In Firefox, the true version is after "Firefox" 
    else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
     browserName = "Firefox";
     fullVersion = nAgt.substring(verOffset+8);
    }
    // In most other browsers, "name/version" is at the end of userAgent 
    else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < 
              (verOffset=nAgt.lastIndexOf('/')) ) 
    {
     browserName = nAgt.substring(nameOffset,verOffset);
     fullVersion = nAgt.substring(verOffset+1);
     if (browserName.toLowerCase()==browserName.toUpperCase()) {
      browserName = navigator.appName;
     }
    }
    // trim the fullVersion string at semicolon/space if present
    if ((ix=fullVersion.indexOf(";"))!=-1)
       fullVersion=fullVersion.substring(0,ix);
    if ((ix=fullVersion.indexOf(" "))!=-1)
       fullVersion=fullVersion.substring(0,ix);

    majorVersion = parseInt(''+fullVersion,10);
    if (isNaN(majorVersion)) {
     fullVersion  = ''+parseFloat(navigator.appVersion); 
     majorVersion = parseInt(navigator.appVersion,10);
    }

    document.write(''
     +'Browser name  = '+browserName+'<br>'
     +'Full version  = '+fullVersion+'<br>'
     +'Major version = '+majorVersion+'<br>'
     +'navigator.appName = '+navigator.appName+'<br>'
     +'navigator.userAgent = '+navigator.userAgent+'<br>'
    )
    var OSName="Unknown OS";
    if (navigator.appVersion.indexOf("Win")!=-1) OSName="Windows";
    if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS";
    if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
    if (navigator.appVersion.indexOf("Linux")!=-1) OSName="Linux";
    document.write('Your OS: '+OSName+'<br>');
    if(browserName ==  'Chrome')
    {
    document.write("u r using chrome "+fullVersion);
    <?php include("top.php") ?> ;

    }
    else {
    alert("Not chrome");
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:17:56.087

你不能也不应该。浏览器不执行任何 PHP 代码。

> 我需要检查浏览器名称，如果它的 chrome 则只需要显示 top.php 文件。但是在每个浏览器的这段代码中，它都包含该页面。

我反对在服务器端做这样的事情，但如果你必须这样做，你可以尝试通过检查请求标头通过 PHP 来检查浏览器。

尝试检查`$_SERVER['HTTP_USER_AGENT']`。

另见： http: [//php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:18:52.943

PHP 是一种服务器端语言。它在服务器内部运行。

Javascript是客户端语言。从某种意义上说，它在浏览器中运行

您不能从客户端包含 aphp 文件。浏览器只能理解html、js css等

您必须检查服务器阵列中的用户代理并相应地加载页面。你可以使用

> $_SERVER['HTTP_USER_AGENT']; 或 getBrowser()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:22:50.300

为了破译您的用户正在使用什么浏览器并根据结果包含单独的 PHP 文件，您可以使用`$_SERVER['HTTP_USER_AGENT'];`甚至内置`getBrowser()`函数 - [http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

```
<?php
  $browser = get_browser(null, true);
  print_r($browser);
?> 
```

这段代码应该给你一个类似于这个的数组 -

```
Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040803 Firefox/0.9.3

Array
(
    [browser_name_regex] => ^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$
    [browser_name_pattern] => Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*
    [parent] => Firefox 0.9
    [platform] => WinXP
    [browser] => Firefox
    [version] => 0.9
    [majorver] => 0
    [minorver] => 9
    [cssversion] => 2
    ...
) 
```

然后，您可以测试以查看您的用户正在使用什么浏览器并相应地包含单独的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:22:06.703

它不可能在 js 文件中包含 php 代码。对我来说最好的方法是

将此js脚本放在头部而不是检查条件浏览器。

```
if(browser =='chrome')
{
  document.getElementById('top').style.display='block';
}
else
{
  document.getElementById('top').style.display='none';
}

<div id='top'>
    <?php require_once("top.php"); ?>
</div> 
```

# java - 获取时间为 00:00:00.0

> ID：11220430
> 
> 赞同：0
> 
> 时间：2012-06-27T06:15:37.327
> 
> 标签：java, sql, sql-server

下面是我的存储过程

```
create procedure sp_process_job(@request_id varchar(25), @host varchar(20),
     created_on varchar(25)
) 
as
begin

    set dateformat mdy
    SELECT CAST(@created_on as datetime)
    insert into t_job_details(request_id ,host, created_on) 
    values(@request_id,@host,@created_on)

end 
```

当我使用`SELECT CAST(@created_on as datetime)`

我得到输出，因为`2012-06-22 00:00:00.0`时间是`00:00:00.0`

我想要它作为`12:45:06.0`. 为什么我在所有地方都得到0？

编辑：从java代码调用上述过程

```
Date date = new Date();
Date insert_date = new java.sql.Date(date.getTime());
String insertquery = "{ call sp_process_job (?,?,?) }";

cs = con.prepareCall(insertquery.toString());
            cs.setString(1, id);
            cs.setString(2, host);
            cs.setDate(3, (java.sql.Date) insert_date);
cs.execute();

            con.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:48:00.110

我想你应该`java.sql.Timestamp`在 Java 代码中使用而不是 java.sql.date ，它只保存日期而不是时间。并且`cs.setTimestamp`

```
 java.sql.Timestamp insert_date = new java.sql.Timestamp(date.getTime());
    ....
    cs.setTimestamp(3, insert_date); 
```

# php - 不推荐通过引用分配 new 的返回值

> ID：11220432
> 
> 赞同：0
> 
> 时间：2012-06-27T06:15:39.310
> 
> 标签：php, database-connection, xampp

我一直收到这个错误

```
Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\php\PEAR\Config.php on line 80

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\php\PEAR\Config.php on line 166

Fatal error: Class 'mysqli_connect' not found in C:\xampp\htdocs\bb2\includes\classes\connection.php on line 3 
```

我不知道为什么，这是我的代码

这是 config.php

```
<?php
    define("DB_HOST","localhost");
    define("DB_USER","root");
    define("DB_NAME","beatbeast");
    define("DB_PASSWORD","123192");
?> 
```

这是我的connection.php

```
<?php 
    require_once('config.php');
    $mysqli = new mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:22:25.037

您不应该使用`new`with `mysqli_connect`- 调用的过程版本`mysqli_`不使用对象语法。

如果要使用`new`，请使用`new mysqli()`.

至于弃用警告，请参阅[此问题](https://stackoverflow.com/questions/5617605/xampp-1-7-4-and-php-5-3-5-deprecated-warnings)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:24:23.367

检查 mysqli 是否在 php_ini 文件中启用，并检查文件“php_mysqli.dll”是否存在于 C:\xampp\php\ext 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:36:15.230

如果启用了 mysqli，那么试试这个代码块——

```
<?php
require_once('config.php');
$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
if (mysqli_connect_error()) {
    die('Connect Error (' . mysqli_connect_errno() . ') '
            . mysqli_connect_error());
}

echo 'Success... ' . $mysqli->host_info . "\n";

$mysqli->close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:28:24.407

您可以通过以下方式禁用已弃用的消息：

```
error_reporting(E_ALL | E_DEPRECATED); 
```

或者找到有问题的代码行（函数）并在其前面放一个**@ 。**

# visual-studio-2008 - Visual Studio Intellisense 不是最新的一类

> ID：11220437
> 
> 赞同：4
> 
> 时间：2012-06-27T06:16:18.897
> 
> 标签：visual-studio-2008, visual-c++, intellisense

由于某些原因，Intellisense 对于我的项目中的 1 个类 (C++) 来说不是最新的（当我调用一个方法时，它指的是旧参数等等）！

我可以编译，但如果有更新 Intellesense 的选项（刷新本地缓存或其他东西）会很好吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T08:23:49.293

卸载解决方案中的项目并重新加载！（现在我解决了这个问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:26:50.420

我通过将智能感知数据库文件 (*.ncb) 重命名为 - 例如 - *.ncbx 来帮助自己。这对我的 VS2008 问题有所帮助。但首先您必须离开 IDE 才能释放文件。再次启动 IDE 时，将重新创建 *.ncb 文件 - 现在使用实际参数。

希望这也能帮助更多的开发人员。

# javascript - 我想清空 2 Input-Type-Text 的值，选中（框）

> ID：11220438
> 
> 赞同：0
> 
> 时间：2012-06-27T06:16:31.887
> 
> 标签：javascript, html

伙计们我需要帮助我有代码什么可以通过 ID 清空单个输入的值我有 2 个输入可以说开始时间和结束时间当我点击全天时它应该是空的开始时间和结束时间当我选中此按钮时。 ..这是我的代码....

```
<Input type="text" id="startime" />
<input type="text" id="endtime" />  
<input type="check" id="remove" />

<script type="text/javascript">
            var imgInput = document.getElementById('startime'),
                remove = document.getElementById('remove'),
                val = imgInput.value;

            remove.onchange = function() {
                if (this.checked) {
                    imgInput.value = "";
                } else {
                    imgInput.value = val;
                }
            }
</script> 
```

帮助赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:23:35.943

对于复选框，您不应使用 onchange 事件处理程序，onclick 将执行您需要的操作：

```
 remove.onclick = function() {
            if (this.checked) {
                imgInput.value = "";
            } else {
                imgInput.value = val;
            }
        } 
```

但是，如果它被清除，您可能会尝试保存该值以便可以重新填充它，如果是这种情况，那么您还需要在清除文本框之前更新 val：

```
 remove.onclick = function() {
            if (this.checked) {
                val = imgInput.value;
                imgInput.value = "";
            } else {
                imgInput.value = val;
            }
        } 
```

# asp.net-mvc - sql server 2008 db 上的 asp.net mvc 3 app 和 WCF 有哪些安全措施？

> ID：11220439
> 
> 赞同：0
> 
> 时间：2012-06-27T06:16:36.470
> 
> 标签：asp.net-mvc, wcf, sql-server-2008, wcf-security

如何使我的 asp.net mvc 3 应用程序 100% 安全。我使用 sql server 2008 db 作为后端。我还计划使用 WCF 将数据发布回数据库。

所以到目前为止我的想法是使用：-wcf request throttling -use the antiforgery token。数据库有敏感信息，所以我不希望它被泄露或访问。我能做些什么来确保这是安全的？我错过了其他一些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:06:43.783

*   不要使用动态 SQL
*   使用 ORM
*   除非绝对必要，否则不要创建自己的身份验证和授权机制。如果可以，请尝试使用表单身份验证。
*   应用全局授权过滤器以确保您的页面被锁定[http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application。 aspx](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)
*   将 cookie 的使用保持在最低限度（您可以在大部分时间使用 session，真的！），因为它们可以增加应用程序中可利用入口点的表面
*   不要用你的代码做容易被黑客入侵的事情，我过去曾[发布](http://johnculviner.com/post/2011/06/22/Dont-trust-the-client-%28part-1%29.aspx)过一些非常简单的漏洞利用
*   阅读并理解[OWASP 十大安全漏洞](https://www.owasp.org/index.php/Category%3aOWASP_Top_Ten_Project)

# image - Tomcat上的Smartgwt图像

> ID：11220450
> 
> 赞同：0
> 
> 时间：2012-06-27T06:17:28.203
> 
> 标签：image, tomcat, war, smartgwt

使用 smartgwt 2.4.0 我创造了一场战争。在码头上运行一切正常。但是一旦我在 tomcat 上部署我的战争，除了我的图像之外，一切都很好；像标志。

我的 smartgwt 是 mavenized，我不知道这是否会导致问题。无论如何，我的图像路径是：src/main/webapp/images

因此，在我的 webapp 中，我创建了一个目录 images。当我检查我的战争时，这个目录存在，但 tomcat 似乎拒绝加载我的图像。

在我的java代码中，我设置了一个这样的图像（再次在码头上它工作正常，除了tomcat）：

```
Img logo = new Img("/images/logo.png", 1000, 100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:37:49.273

对所有外部资源（如图像、样式表、脚本文件等）使用相对于服务器的 URL。

服务器相对 URL 以 Web 应用程序的上下文路径开头。如果您的 Web 应用程序映射到上下文路径`/mywebapp`并且您的图像位于`images`上下文路径根目录的文件夹中，那么正确的 URL`logo.png`应该是：

```
/mywebapp/images/logo.png 
```

话虽如此，[使用 Apache 提供静态内容](https://stackoverflow.com/questions/3112577/how-to-create-a-virtualhost-to-serve-only-static-content)，要求 Tomcat 只提供动态内容。

# java - 我在哪里可以获得 java、xml、解析器的所有源 jar？

> ID：11220451
> 
> 赞同：-2
> 
> 时间：2012-06-27T06:17:30.107
> 
> 标签：java, xml, design-patterns

我可以在哪里获得soapexception、parserconfigurationexception、saxexception、transformerconfigurationexception、transformaerexception等的所有源jar。请给我链接以下载所有java相关和mail messenger相关以及xml相关的sourcejar。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:10:00.460

看看这个： http: [//grepcode.com](http://grepcode.com)

您可以查找类，并获取它的多个版本的源代码。

# linux - Sahi 脚本未通过 Putty 运行

> ID：11220457
> 
> 赞同：0
> 
> 时间：2012-06-27T06:18:10.807
> 
> 标签：linux, ssh, putty, sahi

我使用 putty 启动了 Sahi，但在运行脚本时出现以下错误：脚本没有启动 150 毫秒。

我通过 putty 运行 Sahi 和脚本。需要注意的是，通过 Linux 终端运行它工作正常。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:18:02.643

您可能想检查`env`在终端中运行和在 Putty 中运行时环境 ( ) 之间是否存在任何差异。此外，如果这些 sahi 脚本是 bash，您可以使用 bash -x 运行它以查看里面发生了什么。

# c - 在 epoll_wait 中为“事件”指针分配多少内存

> ID：11220458
> 
> 赞同：0
> 
> 时间：2012-06-27T06:18:12.677
> 
> 标签：c, linux, epoll

我试图理解 epoll_wait 中的“事件”指针。当 epoll_wait 返回时，这个指针是否指向所有事件结构都存在的某个内存（不是由用户分配的）？还是我们必须为这个指针分配内存，然后传递指针，以便事件在那个内存位置被填满？

如果必须分配内存，那么应该分配多少？假设我想在 10,000 个套接字上执行 epoll_wait。所有这些都将检查要读取的数据 (EPOLLIIN)。那么，我应该为 *events 分配相当于 10,000 个事件结构的内存吗？

谢谢，

虚拟网络

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:24:01.257

您是否看过例如[epoll(7)](http://linux.die.net/man/7/epoll)手册页中的示例？您需要提供实际的事件数组，或者作为示例中的正确数组，或者通过分配堆（并稍后释放它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-08T21:33:44.477

MaxEvents 是您的数组在元素中的大小。如果分配的内存为`sizeof(epoll_event) * 10`，`maxEvents`则为 10。 MaxEvents 与您正在侦听的套接字数量无关。

# sencha-touch - Sencha Touch Tree Store '对象没有方法 getRootNode'

> ID：11220461
> 
> 赞同：1
> 
> 时间：2012-06-27T06:18:37.733
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

我正在使用 PhoneGap 和 Sencha Touch 2 开发一个 Android 2.3.3 应用程序......

我有一个登录视图，我从该视图重定向到我的应用程序中的嵌套列表视图......我为嵌套列表使用了一个内联商店，我将商店的类型定义为“树”......

我第一次尝试加载应用程序时，当我点击登录时，它给了我一个错误......错误如下所述：

```
Uncaught TypeError: Object [object Object] has no method 'getRootNode' at file:///android_asset/www/sencha/sencha-touch-all.js:15 
```

但是在收到错误消息后，如果我强制关闭应用程序并再次打开它，一切正常...

我的代码是：

登录.js

```
Ext.define("DDLApp.view.Login", {
    //extent panel class
    extend: "Ext.form.Panel",
    //DOM in fieldset
    requires: "Ext.form.FieldSet",
    xtype: 'formLogin',
    id:'loginForm',
    config: {
        scrollable: 'vertical',
        id: 'login',
        items: [
            {
                xtype: "toolbar",
                docked: "top",
            },
            {
                xtype: "toolbar", //Toolbar with heading as login
                docked: "top",
                title: "Login",
                ui:'light',
                id:"idHeaderTwo",
                cls:"clsLoginHeader"                
            }, 
            {
                xtype: 'textfield', //textfield for username
                name: 'Username',
                required: true,
                id:"idUserName",
                cls:"clsUserName",
                useClearIcon: false
           },
            {
                xtype: 'passwordfield', //textfield for password
                name: 'password',
                required: true,
                id:"idPassword",
                cls:"clsPassword",
                useClearIcon: false
            },
            {
                xtype: 'button', //Login button
                text: 'Login',
                ui: 'confirm',
                cls:'btnLogin',
                width:'30%',
                handler: function(SuccessFlag) { //Login button handler
                    ui: 'confirm',
                    console.log('Login Button pressed');
                    var form = Ext.getCmp('login');

                    //get username and password from form elements
                    var user = form.getValues().Username;
                    var pwd = form.getValues().password;

                    var msg = new Ext.MessageBox();

                    onLoad();

                    if(user == "" || pwd == "")
                    {
                        var errMsg = '';
                        if(user == "")
                            {
                                errMsg+= 'Username is required<br/>';
                            }
                        if(pwd == "")
                            {
                                errMsg+= 'Password is required';
                            }
                        msg.show({
                            title: 'LOGIN ERROR',
                            message: errMsg,
                            ui:'light',
                            cls: 'vm_error',
                            showAnimation: 'fadeIn',
                            hideAnimation: 'fadeOut',
                            buttons: [{text:'OK',itemId:'ok'}],
                            fn:function(){
                                Ext.emptyFn();
                            }
                        });
                    }                  
                    else 
                    {
                        form.setMasked({
                            xtype:'loadmask',
                            message:'Loading...'
                        });

                        //Check for network connectivity
                        if(onDeviceReady())
                        {
                        //Fire a json service
                        Ext.util.JSONP.request({
                            url: DDLApp.app.oneTimeServiceUrl,
                            dataType: "jsonp",
                            params: {
                                type:'fetch',
                                username:user,
                                password:pwd
                            },
                            success: function (result) {
                              //if username and password matches
                                if(result.Success == true)
                                {                                                
                                     //setLocalStorage(result);
                                     localStorage.setItem('userName',user);
                                     localStorage.setItem('userPassword',pwd);
                                     localStorage.setItem('totalData',JSON.stringify(result.Data));
                                     localStorage.setItem('userData',JSON.stringify(result.Data.user));
                                     localStorage.setItem('userIncidentData',JSON.stringify(result.Data.incidentList));
                                     localStorage.setItem('impactData',JSON.stringify(result.Data.impact));
                                     localStorage.setItem('incidentTypeData',JSON.stringify(result.Data.incident_type));
                                     localStorage.setItem('categoryData',JSON.stringify(result.Data.category));
                                     localStorage.setItem('statusData',JSON.stringify(result.Data.statusDropdown));

                                     var indexPanel = Ext.create('DDLApp.view.Main');
                                     Ext.Viewport.add(indexPanel);
                                     Ext.Viewport.setActiveItem(indexPanel,{type: 'slide', direction: 'right'});
                                     form.unmask();
                                }
                                else{
                                    msg.show({
                                        title: 'LOGIN ERROR',
                                        message: 'Invalid Username/Password',
                                        ui:'light',
                                        cls: 'vm_error',
                                        showAnimation: 'fadeIn',
                                        hideAnimation: 'fadeOut',
                                        buttons: [{text:'OK',itemId:'ok'}],
                                        fn:function(){
                                            Ext.emptyFn();
                                        }
                                    });
                                    form.unmask();
                                }
                            }
                        });
                        }
                        ////If network is not present
                        else
                        {
                            form.unmask();
                            msg.show({
                                title: 'NETWORK CONNECTION ERROR',
                                message: "We're Sorry but it appears your device is not connected to the internet . Please check your internet settings and try again.",
                                ui:'light',
                                cls: 'vm_error',
                                showAnimation: 'fadeIn',
                                hideAnimation: 'fadeOut',
                                buttons: [{text:'Retry',itemId:'retry'}],
                                fn:function(){
                                    window.location.reload();
                                }
                            });
                        }
                    }
                },
            },
            {
                xtype: 'button', //clear button
                text: 'Clear',
                width:'30%',
                ui: 'confirm',
                cls:'btnClear',
                style: 'background:#4A4245;',
                handler: function() {
                    this.up('formpanel').reset(); //reset all form elements
                },
            }
        ]
    },
}); 
```

事件列表.js

```
Ext.define("DDLApp.view.IncidentsList", {
    extend: "Ext.Container",
    xtype: 'incidentsList',
    id: 'idIncList',
    requires:[
              'Ext.dataview.NestedList',
              'Ext.data.proxy.Memory',
              'Ext.data.TreeStore',
          ],
    alias:'widget.incidentslist',
    config: {
        id: 'idIncidentList',
        layout:'fit',
        items: [
                {
                    xtype: "toolbar",
                    docked: "top",
                    cls:'clsDDLHeader',
                    items: [
                            {xtype:'spacer'},
                            {   xtype: 'title' ,
                                cls: 'clsRightTitle',
                                id: 'idIncidentsListTitle',
                                title:"Welcome",
                            },
                            ]
                },
                {
                    xtype: "toolbar",
                    ui:'light',
                    id:"idHeaderTwo",
                    cls:"clsHeaderTwo" ,
                        items: [
                                {   xtype: 'title' ,
                                    cls: 'clsLeftTitle',
                                    title: "My Incidents",
                                },
                                {xtype:'spacer'}
                                ]
                },
                {
                    xtype: 'nestedlist',
                    id:'idIncidentList',
                    onItemDisclosure:true,
                    cls:'clsNestedIncidentList',
                    toolbar:{id:'idNestedIncidentList'},
                    loadingText: "Loading Incidents...",
                    emptyText: "<div class=\"empty-text\">No Incidents Found.</div>",
                    getItemTextTpl: function() {
                        var tplConstructor =             
                            '<tpl if="TKT_STATUS_NAME == \'CLOSED\'">'+
                            '<div class="vm_statusRed">'+
                            '</tpl>'+
                            '<tpl if="TKT_STATUS_NAME == \'OPENED\'">'+
                            '<div class="vm_statusYellow">'+
                            '</tpl>'+
                            '<tpl if="TKT_STATUS_NAME == \'ASSIGNED\'">'+
                            '<div class="vm_statusGreen">'+
                            '</tpl>'+
                            '<tpl if="TKT_STATUS_NAME == \'PENDING\'">'+
                            '<div class="vm_statusRed">'+
                            '</tpl>'+
                            '<tpl if="TKT_STATUS_NAME == \'RESOLVED\'">'+
                            '<div class="vm_statusOrange">'+
                            '</tpl>'+
                            '<tpl if="TKT_STATUS_NAME == \'REOPEN\'">'+
                            '<div class="vm_statusYellow">'+
                            '</tpl>'+
                            '<div class="vm_dvList"><h4 class="vm_txtName"><span class="vm_listHeader"><label>Inci.#{TKT_ID} by </label><label class="vm_txtFirstName"><i>{FIRST_NAME:ellipsis(15, true)}</i></label></span><div class="date vm_clsDate">{CREATED_ON:date("d-M-y H:i")}</div></h4>'+
                            '<div class="vm_title">{TKT_SUBJECT}</div>'+
                            '<div class="vm_subDesc">{TKT_DESC}</div></div></div>';
                        return tplConstructor;
                    },

                    store: {
                        type: 'tree',

                        fields: ['TKT_ID', 'CREATED_ON', 'FIRST_NAME', 'TKT_STATUS_NAME', 'TKT_SUBJECT', 'TKT_DESC', 'SEV_DESC', 'SERVICE_NAME', 'CATEGORY_NAME', {
                            name: 'leaf',
                            defaultValue: true
                        }],

                        root: {
                            leaf: false
                        },

                        data : localStorage.userIncidentData,

                        proxy: {
                            type: 'memory',
                            reader: {
                                type: 'json',
                                rootProperty: 'incidentList'
                            }
                        }
                    },

                    detailCard: {
                        xtype: "fieldset",
                        scrollable: true,
                        id: "idIncidentDetails",
                        items: [
                            {
                                xtype: 'textfield',
                                name: 'TKT_SUBJECT',
                                label: 'Subject',
                                labelAlign: 'top',
                                cls:'vm_textFields',
                                clearIcon:false,
                                disabled:true
                            },
                            {
                                xtype: 'textareafield',
                                name: 'TKT_DESC',
                                label: 'Description',
                                labelAlign: 'top',
                                cls:'vm_textFields',
                                clearIcon:false,
                                disabled:true
                            },
                            {
                                xtype: 'textfield',
                                name: 'SEV_DESC',
                                label: 'Impact',
                                labelWidth:'45%',
                                cls:'vm_textFields',
                                clearIcon:false,
                                disabled:true
                            },
                            {
                                xtype: 'textfield',
                                name: 'SERVICE_NAME',
                                id:'displayIncident',
                                cls:'vm_textFields',
                                label: 'IncidentType',
                                labelWidth:'45%',
                                disabled:true
                            },
                            {
                                xtype: 'textfield',
                                label: 'Category',
                                name: 'CATEGORY_NAME',
                                cls:'vm_textFields',
                                id:'getCategory',
                                labelWidth:'45%',
                                disabled:true
                            },
                    ],
                    },

                    listeners: {
                        itemtap: function(nestedList, list, index, element, post) {
                            this.getDetailCard().items.items[0].setHtml(post._data.TKT_SUBJECT);
                            this.getDetailCard().items.items[1].setHtml(post._data.TKT_DESC);
                            this.getDetailCard().items.items[2].setHtml(post._data.SEV_DESC);
                            this.getDetailCard().items.items[3].setHtml(post._data.SERVICE_NAME);
                            this.getDetailCard().items.items[4].setHtml(post._data.CATEGORY_NAME);
                        }
                    }
                }, 
                {html:'No Incidents Found....',id:'idEmptyText'}],
    }, 
    initialize: function() {
        this.callParent(arguments);
        var incidentStore = Ext.getCmp('idIncidentList').getStore();
        Ext.getCmp("idEmptyText").hide();
        var getLoginData = localStorage.getItem('userData');
        var parseData = JSON.parse(getLoginData);
        var fname = parseData[0].FIRST_NAME;
        var getIncidentData = localStorage.getItem('userIncidentData');
        var parseIncidentData = JSON.parse(getIncidentData);
        this.down("#idIncidentsListTitle").setTitle("Welcome, " + fname);
        if(localStorage.userIncidentData != '[""]')
            {
                Ext.getCmp("idEmptyText").hide();
                incidentStore.setData(localStorage.userIncidentData).load();
            }
        else
            {
                this.down("#inclist").hide();
                this.down("#idEmptyText").show();
                var msg = new Ext.MessageBox();
                msg.show({
                    title: 'NO INCIDENTS FOUND',
                    message: 'No Incidents have reported by this user',
                    ui:'light',
                    cls: 'vm_error',
                    showAnimation: 'fadeIn',
                    hideAnimation: 'fadeOut',
                    buttons: [{text:'OK',itemId:'ok'}],
                    fn:function(){
                        Ext.emptyFn();
                    }
                });
            }
    },
}); 
```

我需要尽快摆脱这个错误......从第二次开始，我的应用程序中的一切都运行良好......我认为问题出在我定义的商店......请帮帮我.. 。 提前致谢 ...！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:07:51.857

我的商店是在我的 IncidentList 视图本身中内联定义的......

```
store: {
                type: 'tree',

                fields: ['TKT_ID', 'CREATED_ON', 'FIRST_NAME', 'TKT_STATUS_NAME', 'TKT_SUBJECT', 'TKT_DESC', 'SEV_DESC', 'SERVICE_NAME', 'CATEGORY_NAME', {
                    name: 'leaf',
                    defaultValue: true
                }],

                root: {
                    leaf: false
                },

                data : localStorage.userIncidentData,

                proxy: {
                    type: 'memory',
                    reader: {
                        type: 'json',
                        rootProperty: 'incidentList'
                    }
                }
            }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:57:09.573

这是真的： Object [object Object] has no method`getRootNode` 此方法在 ST2 中不再可用，请查看[API 文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.TreeStore-method-getRootNode)。

实际上，这是 ST 代码中唯一保留此方法的地方。尝试在 TreeStore 中编辑煎茶代码

```
removeAll: function() {
       this.getRootNode().removeAll(true);
       this.callParent(arguments);
}, 
```

至

```
removeAll: function() {
        this.getRoot().removeAll(true);
        this.callParent(arguments);
    }, 
```

# sql-server - 如何选择最近的 3 个月？

> ID：11220466
> 
> 赞同：2
> 
> 时间：2012-06-27T06:19:13.440
> 
> 标签：sql-server, select

我想获得最近 3 个月的结果。这就是我到目前为止所创造的：

```
SELECT 
    year([date]) as tahun, 
    month([date]) as bulan, 
    [type] as tipe,
    SUM([net qty]) total_karton, 
    CAST(SUM([cm1 (rp)]) as decimal) as total_uang
FROM 
    tbl_weeklyflash_ID
GROUP BY 
    year([date]), 
    month([date]),
    [type]
ORDER BY 
    month([date]), [type] 
```

但是该查询显示所有月份，如何仅获取最近的 3 个月？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:31:57.103

只需添加一个`WHERE`子句，例如：

```
WHERE
    DATEDIFF(month,[date],CURRENT_TIMESTAMP) between 0 and 2 --May have to adjust the end value on this 
```

`2`将为您提供当前月份和前 2 个月。如果您想要 3个*整*月的数据，您可能需要调整结束值。

[`DATEDIFF`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)对于指定的日期部分，总是给出已发生的*转换次数。*所以在上面，它计算了月份在（不是一个很好的列名，顺便说一句）和当前日期之间*变化的次数。*`date`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:38:35.323

试试这个：

```
WHERE month([date]) between month(getdate()) -3 and month(getdate()) 
```

# magento - Magento - 根据产品数量选择运输方式

> ID：11220467
> 
> 赞同：0
> 
> 时间：2012-06-27T06:19:27.223
> 
> 标签：magento, magento-1.7

有可能吗（特别是没有更改源代码）？这是场景：

如果买家收到最多 2 件相同商品，这些商品的运费将统一为 17 美元，因为我可以使用统一运费信封。如果他收到超过 2 个单位，请使用 USPS 模块计算运费。

但是，它只能与选定的项目一起使用，因为所有其他项目都将使用 USPS 模块。

我正在使用 Magento 1.7 社区版。提前致谢。

# java - 在 JSP/Servlets 而不是 javascript 中创建动态行

> ID：11220470
> 
> 赞同：-1
> 
> 时间：2012-06-27T06:19:34.370
> 
> 标签：java, javascript, jsp

是否有任何替代机制在 JSP/Servlets 而不是 javascript 中创建动态行。

JS代码：-

```
var table = document.getElementById('table1');  
                  var tr    = document.createElement('TR');
    var td1   = document.createElement('TD');
    var td2   = document.createElement('TD');
    var td3   = document.createElement('TD');
    var td4   = document.createElement('TD');
    var inp1  = document.createElement('INPUT');
    var inp2  = document.createElement('INPUT');
                 var inp3  = document.createElement('INPUT');
    inp1.setAttribute("Name", "purpose");
    inp1.setAttribute("id", purpose"+reclength); 
    inp2.setAttribute("Name", "Amount");
    inp2.setAttribute("id", "Amount"+reclength);  
    inp3.setAttribute("Name", "dt");
    inp3.setAttribute("id", "dt"+reclength);  
    var deleteIcon     = document.createElement('IMG');
    deleteIcon.setAttribute('src', '<%=basePath%>images/cancelIcon.gif');
    deleteIcon.onclick = function(){
        removeWthDrwls(tr);
    }
    table.appendChild(tr);
    tr.appendChild(td1);
    tr.appendChild(td2);
    tr.appendChild(td3);
    td1.appendChild(inp1);
    td2.appendChild(inp2);
    td3.appendChild(inp3);
    td3.appendChild(space2);
    td3.appendChild(deleteIcon); 
```

但是如果用户禁用了 javascript。那么在 Java Web 应用程序中为他/她提供替代解决方案的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:23:08.977

当然你可以在jsp中做同样的事情，参考[JSP：创建动态表](http://www.developer.com/lang/other/article.php/724201/JSP-Creating-Dynamic-Tables.htm)

这里的例子给出了如何在jsp中创建一个表，就像你可以创建动态行一样。

通过在 TR 标记中嵌套另一个 for 循环，可以为每一行添加十列，如下所示：

```
<TABLE>
<% for(int row=1; row <= 5; row++) { %>
    <TR>
<%      for(int col=1; col<=10; col++) { %>
        <TD> (<%=col%>, <%=row%>)
        </TD>
        <% } %>
    </TR>
<% } %>
</TABLE> 
```

每个单元格都包含其行号和列号作为元组 (col, row)。

# java - 使用java从url复制图像

> ID：11220471
> 
> 赞同：3
> 
> 时间：2012-06-27T06:19:39.730
> 
> 标签：java

我正在尝试从 URL 下载图像。我使用*Apache Commons*库：

```
org.apache.commons.io.FileUtils
                .copyURLToFile(
                        new URL(
                                "https://lh3.ggpht.com/AXYMUV5cpne2vE9U3X8x87HgrbwijwiG50_yOnehU2MUPKDoJky-BKFOPZzZ07Pug8U=h230"),
                        new File("test.png")); 
```

打开图像时，它说不是PNG文件。这是将图像从 url 下载到本地的好方法吗？

更新 。谢谢你们的回答，我不明白我需要获取`connection.getContentType();`然后将其保存为 jpg 或 png 原样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:28:42.297

如果你检查 url，它是 JPEG 文件。将文件名重命名为 test.jpeg 后尝试执行程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:45:20.433

检查内容类型请参阅此[SO Question](https://stackoverflow.com/questions/5801993/quickest-way-to-get-content-type)。然后使用它将文件保存为正确的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:57:00.400

在这个 URL 上运行 wget 并查看 HTTP 响应，看起来文件类型被明确指定为 JPEG：

```
--2012-06-27 16:55:30-- https://lh3.ggpht.com/AXYMUV5cpne2vE9U3X8x87HgrbwijwiG50_yOnehU2MUPKDoJky-BKFOPZzZ07Pug8U=h230
正在解析 lh3.ggpht.com... 74.125.237.108, 74.125.237.106, 74.125.237.107, ...
正在连接到 lh3.ggpht.com|74.125.237.108|:443... 已连接。
已发送 HTTP 请求，等待响应...
  HTTP/1.0 200 正常
  访问控制允许来源：*
  电子标签：“v1”
  到期：2012 年 6 月 28 日星期四 06:50:40 GMT
  内容处置：inline;filename="unnamed.jpg"
  内容类型：图片/jpeg
  X-Content-Type-Options: nosniff
  日期：格林威治标准时间 2012 年 6 月 27 日星期三 06:50:40
  服务器：菲菲
  内容长度：46597
  X-XSS-防护：1；模式=块
  缓存控制：公共，最大年龄=86400，无转换
  年龄：290
  连接：保持活动
长度：46597 (46K) [图片/jpeg]

```

# c# - 在 IIS 7.0 上部署 ASP.NET 4.0 网站

> ID：11220473
> 
> 赞同：1
> 
> 时间：2012-06-27T06:19:45.037
> 
> 标签：c#, asp.net, .net

我在 IIS 上部署了 ASP.net 站点并崩溃到空引用异常。它运行良好的 ASP.net 开发服务器，但无法在 IIS 上加载。

我尝试过重新安装 IIS 甚至 aspnet_regiis。但错误仍然存​​在。请在下面找到错误。

## “/”应用程序中的服务器错误。

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object. 
```

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   _Default.Page_Load(Object sender, EventArgs e) +183
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +24
   System.Web.UI.Control.LoadRecursive() +70
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean  includeStagesAfterAsyncPoint) +3047 
```

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:48:02.447

您可能在您的页面加载事件中使用的任何对象，请确保您检查它们是否不为空

```
if (myObject != null)
{
   // do what u need to do
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:00:27.363

我不知道它是如何工作的，但我只是将网站添加为默认网站下的应用程序，现在它正在工作。现在没有错误。早些时候我将其添加为独立网站.. 有没有人对此有解释>>？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:09:33.030

就是这样，您应该将您的网站添加到默认网站下，或者您在 IIS 中设置为从您的网站开始。

# c# - 其他类的线程方法？

> ID：11220476
> 
> 赞同：2
> 
> 时间：2012-06-27T06:20:09.220
> 
> 标签：c#, winforms, multithreading

在我的程序中有一个连续调用的方法，所以我想对它进行线程化，以使 GUI 在执行其业务时不会冻结。

```
Thread t = new Thread(Class2.ArrayWorkings(1, MyGlobals.variable1));
    t.start();
        int[] localVariable1 = ??// I want to move the value returned from the method into localVariable1\. 
```

目前我的错误是：

'System.Threading.Thread.Thread(System.Threading.ParameterizedThreadStart)' 的最佳重载方法匹配有一些无效参数

&

参数 1：无法从“方法组”转换为“System.Threading.ParameterizedThreadStart”

目前在没有线程的情况下这样做：

```
 int[] localVariabl1 = Class2.ArrayWorkings(1, MyGlobals.variable1); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T06:30:13.893

您可以使用 lambda 修复构造函数：

```
Thread t = new Thread(() => Class2.ArrayWorkings(1, MyGlobals.variable1)); 
```

但这不会让您（如 Jon 所说）立即获得结果 - 否则您将再次编写同步代码。您可以改为寻找某种*回调*；大概你需要回到 UI 线程，所以：

```
Thread t = new Thread(() => {
    // this runs on the worker
    int[] localVariabl1 = Class2.ArrayWorkings(1, MyGlobals.variable1);
    this.Invoke((MethodInvoker)delegate {
        // now we're back on the UI thread!
        update the UI from localVariabl1
    });
});
t.Start() 
```

不过，我可能会建议使用线程池：

```
ThreadPool.QueueUserWorkItem(delegate {
    // this runs on the worker
    int[] localVariabl1 = Class2.ArrayWorkings(1, MyGlobals.variable1);
    this.Invoke((MethodInvoker)delegate {
        // now we're back on the UI thread!
        update the UI from localVariabl1
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:30:44.817

您必须放置一个**ThreadStart**委托。如果你真的不希望 UI 受到影响，你应该使用**BackgroundWorker**类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T06:30:06.043

一种方法如下：

```
ThreadStart starter = delegate { Class2.ArrayWorkings(1, MyGlobals.variable1); };
var thread = new Thread(starter);
thread.Start(); 
```

编辑：刚刚看到您还想从线程中捕获返回值。您可能必须使用 Marc 的回答中提到的 ThreadPool.QueueUserWorkItem

您可能想看看 .NET Framework 4.5（仍处于候选版本中）使异步编程的生活更轻松。

[.NET 4.5 中的等待运算符](http://msdn.microsoft.com/en-us/library/hh156528%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T06:36:10.503

任务为执行最终将返回值的异步作业提供了一个简单的接口。`Task<string>`例如，一个任务（最终）返回一个字符串，其中 a将`Task<int[]>`返回一个整数数组。

```
int[] localVariable1;

// start the task
Task<int[]> myTask = Task.Factory.StartNew<int[]>(() => Class2.ArrayWorkings(1, MyGlobals.Variable1);

// when it is finished get the result and place in local variable
myTask.OnCompleted(task => localVariable1 = task.Result;); 
```

如果要在异步操作完成后更新 UI 组件，则必须使用 Invoke（用于 winforms）。这允许您使用 UI 线程上的对象（例如按钮和标签）。

```
myTask.OnCompleted(task => localVariable1.Invoke(new Action(() =>
    localVariable1.Value = task.Result; ))); 
```

# asp.net-mvc-3 - 创建可更新的 MVC 应用程序的最佳方法是什么？

> ID：11220482
> 
> 赞同：0
> 
> 时间：2012-06-27T06:20:39.830
> 
> 标签：asp.net-mvc-3, iis

我应该怎么做才能使我的 MVC 应用程序可更新？说“可更新”我的意思是一旦打开应用程序连接到服务器的时间，检测到新版本已打开，它应该自我更新。

在桌面应用程序上非常简单：我只需下载它，然后使用批处理文件，我使用替换更新主 exe 文件。

那么我应该如何处理`MVC3`托管在的应用程序`IIS7`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:01:21.660

您可以使用服务器计算机上的其他服务来执行此操作。该服务将检查更新。如果更新可用，则它从远程存储 (ftp) 下载整个更新的应用程序，并用更新的版本替换旧版本。另一个选项是[MSDeploy/WebDeploy](http://learn.iis.net/page.aspx/1073/introduction-to-web-deploy/)，它允许您远程更新/同步您的 Web 应用程序。

# python - 如何更新 Tkinter 画布上的图像？

> ID：11220487
> 
> 赞同：3
> 
> 时间：2012-06-27T06:21:08.377
> 
> 标签：python, tkinter

我正在尝试制作一个脚本，使我能够动态更新图像对象，然后将更新的图像发布到 Tkinter Canvas 小部件。这里的代码是原型代码，只是为了了解基础知识。这里的目的是在画布显示的图像上的点击位置放置一个蓝色像素。

这里正在发生一些非常奇怪的事情。我正在使用 Wing IDE，如果我通过调试器运行此代码，并在*woohoo*函数的任何行设置一个断点，然后在遇到断点后继续执行，代码将完全按预期工作 - 将蓝色像素放在图片。如果我正常运行代码，或者通过没有断点的调试器，图像永远不会更新。这使我得出的结论是，有一些内在的魔法正在发生，如果没有帮助，我不太希望理解这些魔法。

我真的很想知道解决这个问题的最佳方法（或任何方式，我猜），如果有人可以向我解释引擎盖下发生了什么，那就太酷了。谢谢。

```
from Tkinter import *
from PIL import Image, ImageTk

def woohoo(event):

    original.putpixel((event.x,event.y),(0,0,255))

    newpic = ImageTk.PhotoImage(original)
    c.create_image((0,0),image=newpic, anchor="nw")

main = Tk()
c = Canvas(main, width=300, height=300)
main.geometry("300x300+0+0")
c.pack()

original = Image.open("asc.bmp")
picture = ImageTk.PhotoImage(original)
c.create_image((0,0),image=picture, anchor="nw")

c.bind("<Button-1>", woohoo)

main.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:12:35.190

我的猜测是，你正在一个函数中创建一个新图像。对图像的引用是一个局部变量。当函数退出时，引用被垃圾收集，导致新图像被破坏。最有可能的是，交互式运行会导致垃圾收集器以不同的方式运行（也许更懒惰？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-29T19:57:16.690

更改了其他帖子的一些内容以使用 Python 3+：

```
from tkinter import *

def stuff(event):
    global picture3
    picture3 = PhotoImage(file='picture2.png')
    c.itemconfigure(picture2, image = picture3)

main = Tk()
c = Canvas(main, width=300, height=300)
c.pack()

picture = PhotoImage(file='picture1.png')
picture2 = c.create_image(150,150,image=picture)

c.bind("<Button-1>", stuff)

main.mainloop()
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T22:51:01.670

试试这样：

```
from Tkinter import *
from PIL import Image, ImageTk

def woohoo(event):
    global picture #
    original.putpixel((event.x,event.y),(0,0,255))

    picture = ImageTk.PhotoImage(original)#

    c.itemconfigure(myimg, image=picture)#

main = Tk()
c = Canvas(main, width=300, height=300)
main.geometry("300x300+0+0")
c.pack()

original = Image.open("asc.bmp")
picture = ImageTk.PhotoImage(original)
myimg = c.create_image((0,0),image=picture, anchor="nw")#

c.bind("<Button-1>", woohoo)

main.mainloop() 
```

# javascript - 替换以下划线开头的单词

> ID：11220497
> 
> 赞同：2
> 
> 时间：2012-06-27T06:22:19.420
> 
> 标签：javascript, regex

我有一个文本块，其中的每个单词，从下划线开始都应该替换为另一个唯一的字符串。

例如：

```
_word -> _a 
_anotherword -> _b
_another_word -> _c
._dotwithword -> ._d
[_brword] -> [_e]
another_word -> another_word (should stay the same) 
```

我正在使用这个正则表达式来查找它们 - (_\w+) ，它会正确替换所有内容，如果下划线位于单词中间，则最后一个除外。有没有办法通过 JS 正则表达式来检查这个？

JS 小提琴测试：http: [//jsfiddle.net/C93bs/3/](http://jsfiddle.net/C93bs/3/)

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T06:30:03.357

`(\b_\w+)`-`\b`匹配[单词边界](http://www.regular-expressions.info/wordboundaries.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T06:36:46.900

完整的正则表达式（在你的小提琴中工作）：

```
/\b(_\w+)\b/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:44:31.103

也许不是最好的解决方案，但它应该可以工作：

`/((^|\s)[\,\[\.]?_\w+(\])?)/g`

更新[了 jsfiddle](http://jsfiddle.net/GFxqy/)

**编辑：Beyamor 解决方案更清洁**

# matlab - 从一维点数组创建点数组

> ID：11220498
> 
> 赞同：0
> 
> 时间：2012-06-27T06:22:19.623
> 
> 标签：matlab

我需要做的是采用一维数组，即：

```
[1, 1, 2, 2, 3, 3] 
```

并将其转换为点数组：

```
[[1, 1], [2, 2], [3, 3]] 
```

我希望有一种简单的本机 matlab 方法而不是函数。这将进入点集，即：

```
[ [[1, 1], [2, 2], [3, 3]],
  [[4, 4], [5, 5], [6, 6]],
  [[7, 7], [7, 7], [8, 8]] ] 
```

发生这种情况的原因是这些点将作为单个流存储在文本文件中，我需要将它们变成有意义的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:29:32.403

首先请注意，行向量的水平串联将产生一个更大的行向量，而不是成对的行，即`[[1, 1], [2, 2], [3, 3]]`与 相同`[1 1 2 2 3 3]`。因此，您需要将它们垂直连接起来。

你可以试试

```
a = [1, 1, 2, 2, 3, 3];

b = reshape(a, 2, floor(length(a)/2))'; 
```

这将产生一个矩阵，其中每一行代表一个点的坐标。

```
b =

     1     1
     2     2
     3     3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:05:23.393

为了多样性，我只是添加了这个答案：

正如 H.Muster 所说，向量的串联将导致更大的向量或矩阵（取决于您的操作）。你可以这样做。

但您也可以使用[元胞数组](http://www.mathworks.com/help/techdoc/matlab_prog/br04bw6-98.html)，它是一组称为“元胞”的数据容器。一个单元格可以包含任何类型的数据，而与同一单元格数组中的其他单元格包含的数据无关。

在您的情况下，可以使用稍微不同的语法（与 H.Muster 的答案）来创建一个单元格数组：

```
a = [1, 1, 2, 2, 3, 3];
p = mat2cell(a, 1, 2 * ones(1, numel(a) / 2)) 
```

`p`是一个元胞数组，每个元胞包含一个 1×2 点向量。要访问元胞数组中的元素，您必须使用花括号。例如，第二点是`p{2} = [2, 2]`。

# objective-c - NSTimer 与 UIWebView - 可行性

> ID：11220502
> 
> 赞同：0
> 
> 时间：2012-06-27T06:22:44.520
> 
> 标签：objective-c, ios, uiwebview, nstimer

目前我仍在阅读一些文档和教程`NSTimer`。根据我目前的理解，我们调用计时器并给它一个方法，以便它会重复自己。然后我想到了一个想法。（我正在开发其他应用程序项目）

我打算做什么

*   实施`UIWebView`
*   使用检查当前 url（绝对字符串）的方法在 中实现`NSTimer`（可能是 0.5 秒），如果它不是我指定的，它将重定向 url。`UIWebView``UIWebView`

我有我想要实现的代码，目的是纠正我的知识，`UIWebView`并`NSTimer`在我开始工作之前看看它是否合理。（我仍在阅读文档。所以想了解更多并尝试更多在工作之前）

现在让我感到困惑的是，我的方法是否兼容`NSTimer`？`NSTimer`在方法中使用是否合理`UIWebView` `viewDidLoad`？由于应用程序每 0.5 秒不断运行该方法，是否会出现内存过载/崩溃？

例如`NSTimer`（如果我错了，请纠正我。但由于我希望它永远运行，只要用户在其中`UIWebView`，我将只需要此代码集而不包括`NSRunLoop`）

```
NSTimer *t = [NSTimer scheduledTimerWithTimeInterval: 2.0
                      target: self
                      selector:@selector(onTick:)
                      userInfo: nil repeats:NO];

-(void)onTick:(NSTimer *)timer {
   //do smth
} 
```

EDIT2-@Robert Ryan，这是我正在使用的代码。（当我第一次更改此代码时，它刚刚工作）**（如果我屏蔽了 range2 部分，那么错误域 error-999 停止了。但视图仍然不加载）

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL] absoluteString];
    NSRange range1= [currentURL rangeOfString:@"news"];
    NSRange range2= [currentURL rangeOfString:@"pdf"];
    if (range1.location == NSNotFound)
    {
        NSURL *url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
        [webView loadRequest:[NSURLRequest requestWithURL:url]];

        return NO; //no to this if its not found.
    }
    if(range2.location==NSNotFound)
    {
        NSURL * url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
        [webView loadRequest:[NSURLRequest requestWithURL:url]];
        return NO; //no to this if its not found
    }

    return YES; //everything else ok

} 
```

EDIT3 - 如果我将 NSRange range1 和 range2 组合成 1 个语句，那么它会再次工作（希望它在一个小时后仍然可以工作。xD）

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL] absoluteString];
    NSRange range1= [currentURL rangeOfString:@"news"];
    NSRange range2= [currentURL rangeOfString:@"pdf"];
    if (range1.location == NSNotFound & range2.location==NSNotFound)
    {
        NSURL *url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
        [webView loadRequest:[NSURLRequest requestWithURL:url]];

        return NO;
    }
return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:40:13.270

如果您想要确保用户不会导航到其他网址，您可以添加以下内容

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([[request.URL absoluteString] isEqualToString:@"http://YourAllowableURL1.com"]) {
        return YES;
    }

    if ([[request.URL absoluteString] isEqualToString:@"http://YourAllowableURL2.com"]) {
        return YES;
    }

    return NO;// user will not be able to go to any other urls
} 
```

您还可以指定允许的 URL 列表，并确保仅对这些 URL 返回 YES

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:28:04.620

使用 NSTimer 来确定是否尝试访问“未经批准”的网站并不是您想要的。`shouldStartLoadWithRequest`如果 URL 不可接受，这将允许您取消当前请求。但是，它不允许您更改 URL 以实现重定向。如果你真的想重定向，你可以发起一个全新的请求，也许在一点延迟之后，例如，

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL] absoluteString];
    NSRange range = [currentURL rangeOfString:@"imc.jhmi.edu"];

    if (range.location == NSNotFound)
    {
        double delayInSeconds = 0.1;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            NSURL *url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
            [webView loadRequest:[NSURLRequest requestWithURL:url]];
        });

        return NO;
    }

    return YES;
} 
```

实际上看起来您不必等待，您实际上可以立即发起新请求，但在前一个请求`shouldStartLoadWithRequest`完成之前这样做似乎不正确。但如果你想这样做，那显然是：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL] absoluteString];
    NSRange range = [currentURL rangeOfString:@"imc.jhmi.edu"];

    if (range.location == NSNotFound)
    {
        NSURL *url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
        [webView loadRequest:[NSURLRequest requestWithURL:url]];

        return NO;
    }

    return YES;
} 
```

就个人而言，我根本不会重定向用户，但最多会弹出一个 UIAlertView 告诉他们必须留在这个网站上，但这取决于你：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"%s %@", __FUNCTION__, request);

    NSString *currentURL = [[request URL] absoluteString];
    NSRange range = [currentURL rangeOfString:@"imc.jhmi.edu"];

    if (range.location == NSNotFound)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"This app only follows links within the www.imc.jhmi.edu site." 
                                                        message:nil 
                                                       delegate:nil 
                                              cancelButtonTitle:@"Ok" 
                                              otherButtonTitles:nil];
        [alert show];
        // [alert release]; // use in non-ARC
        return NO;
    }

    return YES;
} 
```

# asp.net - 在 ListView 中冻结表格

> ID：11220504
> 
> 赞同：0
> 
> 时间：2012-06-27T06:22:47.747
> 
> 标签：asp.net, listview, fixed-header-tables

我有一张桌子，我想修复标题...

到目前为止，我已经根据[***此***](http://www.imaputz.com/cssStuff/bigFourVersion.html#)链接中的示例完成了以下操作：

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1" OnItemDataBound="function1">
                    <LayoutTemplate>
                        <div id="tableContainer" class="tableContainer">
                        <table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" class="scrollTable"
                                    style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px;
                                    padding:5px 5px 5px 5px;font-weight:bold;">
                            <thead class="fixedHeader">
                                <tr style="background-color:#C6D7B5;">
                                    <th style="border-right:2px solid white;border-bottom:2px solid #003366; ">No.</th>
                                    <th style="border-bottom:2px solid #003366; ">
                                        <asp:CheckBox ID="CheckBox1" runat="server" CssClass="chkBoxPosition" OnCheckedChanged="CheckBoxHeader_All" AutoPostBack="true" />
                                    </th>    
                                    <th style="border-right:2px solid white;border-bottom:2px solid #003366; ">Title (Number)</th>
                                    <th style="border-bottom:2px solid #003366; ">Status</th>
                                </tr>
                            </thead>
                            <tbody class="scrollContent"><tr id="itemPlaceholder" runat="server"></tr></tbody>
                        </table>
                        </div>
                    </LayoutTemplate>
                    <ItemTemplate>
                        <tr>
                            <td>
                                <asp:Label runat="server" ID="hl" Text='<%#Eval("No")%>'></asp:Label>
                            </td>
                            <td>
                                <asp:CheckBox ID="CheckBox2" runat="server" />
                                </td>
                            <td>
                                <asp:Label runat="server" ID="hl2" Text='<%#Eval("Title") + " (" + Eval("No") + ")"%>'></asp:Label>
                            </td>
                            <td style="text-align:center;">
                                <a href="#"><asp:Label runat="server" ID="Label3"><%#Eval("Status")%></asp:Label></a>
                            </td>
                        </tr>
                    </ItemTemplate>
                    <AlternatingItemTemplate>
                        <tr style="background-color:#EEEEEE;">
                            <td>
                                <asp:Label runat="server" ID="hl" Text='<%#Eval("No")%>'></asp:Label>
                            </td>
                            <td>
                                <asp:CheckBox ID="CheckBox2" runat="server" />
                                </td>
                            <td>
                                <asp:Label runat="server" ID="hl2" Text='<%#Eval("Title") + " (" + Eval("No") + ")"%>'></asp:Label>
                            </td>
                            <td style="text-align:center;">
                                <a href="#"><asp:Label runat="server" ID="Label3"><%#Eval("Status")%></asp:Label></a>
                            </td>
                        </tr>
                    </AlternatingItemTemplate>
                </asp:ListView> 
```

但它不起作用...

那么这有什么问题呢？

我希望你以某种方式修改代码使其工作......

CSS 文件：

```
/* define height and width of scrollable area. Add 16px to width for scrollbar          */
div.tableContainer {
    clear: both;
    border: 1px solid #963;
    height: 285px;
    overflow: auto;
    width: 756px
}

/* Reset overflow value to hidden for all non-IE browsers. */
html>body div.tableContainer {
    overflow: hidden;
    width: 756px
}

/* define width of table. IE browsers only                 */
div.tableContainer table {
    float: left;
    width: 740px
}

/* define width of table. Add 16px to width for scrollbar.           */
/* All other non-IE browsers.                                        */
html>body div.tableContainer table {
    width: 756px
}

/* set table header to a fixed position. WinIE 6.x only                                       */
/* In WinIE 6.x, any element with a position property set to relative and is a child of       */
/* an element that has an overflow property set, the relative value translates into fixed.    */
/* Ex: parent element DIV with a class of tableContainer has an overflow property set to auto */
thead.fixedHeader tr {
    position: relative
}

/* set THEAD element to have block level attributes. All other non-IE browsers            */
/* this enables overflow to work on TBODY element. All other non-IE, non-Mozilla browsers */
html>body thead.fixedHeader tr {
    display: block
}

/* make the TH elements pretty */
thead.fixedHeader th {
    background: #C96;
    border-left: 1px solid #EB8;
    border-right: 1px solid #B74;
    border-top: 1px solid #EB8;
    font-weight: normal;
    padding: 4px 3px;
    text-align: left
}

/* make the A elements pretty. makes for nice clickable headers                */
thead.fixedHeader a, thead.fixedHeader a:link, thead.fixedHeader a:visited {
    color: #FFF;
    display: block;
    text-decoration: none;
    width: 100%
}

/* make the A elements pretty. makes for nice clickable headers                */
/* WARNING: swapping the background on hover may cause problems in WinIE 6.x   */
thead.fixedHeader a:hover {
    color: #FFF;
    display: block;
    text-decoration: underline;
    width: 100%
}

/* define the table content to be scrollable                                              */
/* set TBODY element to have block level attributes. All other non-IE browsers            */
/* this enables overflow to work on TBODY element. All other non-IE, non-Mozilla browsers */
/* induced side effect is that child TDs no longer accept width: auto                     */
html>body tbody.scrollContent {
    display: block;
    height: 262px;
    overflow: auto;
    width: 100%
}

/* make TD elements pretty. Provide alternating classes for striping the table */
/* http://www.alistapart.com/articles/zebratables/                             */
tbody.scrollContent td, tbody.scrollContent tr.normalRow td {
    background: #FFF;
    border-bottom: none;
    border-left: none;
    border-right: 1px solid #CCC;
    border-top: 1px solid #DDD;
    padding: 2px 3px 3px 4px
}

tbody.scrollContent tr.alternateRow td {
    background: #EEE;
    border-bottom: none;
    border-left: none;
    border-right: 1px solid #CCC;
    border-top: 1px solid #DDD;
    padding: 2px 3px 3px 4px
}

/* define width of TH elements: 1st, 2nd, and 3rd respectively.          */
/* Add 16px to last TH for scrollbar padding. All other non-IE browsers. */
/* http://www.w3.org/TR/REC-CSS2/selector.html#adjacent-selectors        */
html>body thead.fixedHeader th {
    width: 200px
}

html>body thead.fixedHeader th + th {
    width: 240px
}

html>body thead.fixedHeader th + th + th {
    width: 316px
}

/* define width of TD elements: 1st, 2nd, and 3rd respectively.          */
/* All other non-IE browsers.                                            */
/* http://www.w3.org/TR/REC-CSS2/selector.html#adjacent-selectors        */
html>body tbody.scrollContent td {
    width: 200px
}

html>body tbody.scrollContent td + td {
    width: 240px
}

html>body tbody.scrollContent td + td + td {
    width: 300px
} 
```

# java - 检测到一个完整的 byte[] 缓冲区？

> ID：11220508
> 
> 赞同：-1
> 
> 时间：2012-06-27T06:23:02.540
> 
> 标签：java, arrays, java-me, buffer

众所周知，java允许我们使用字节数组作为数据的缓冲区。我的情况是 J2me

这里的情况是我有两个大小相等的缓冲区，我需要在它们一个接一个满时交换它们..

详细说明 两个缓冲区 buff1 和 buff2

从 Buff1 读取数据，同时将其他数据写入 buff2

然后当 buff2 满时

他们现在交换他们的位置，从 buff2 读取并写入 buff1

上述循环继续

那么如何检测缓冲区何时已满并准备好被交换呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:26:54.140

> 那么我如何检测缓冲区何时已满

缓冲区本身永远不会满（或空）。它只是固定数量的保留内存。

您需要自己跟踪有用的部分（即具有有意义数据的部分）。通常，这只是一个整数，用于计算写入缓冲区的字节数（从头开始）。

当该整数达到缓冲区长度时，您的缓冲区是“满的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:31:26.933

可以使用三个值来指定缓冲区在任何给定时刻的状态：[源链接](https://www.ibm.com/developerworks/java/tutorials/j-nio/section5.html)

```
* position
* limit
* capacity 
```

**位置**

从通道读取数据时，会将读取的数据放入底层数组中。位置变量跟踪您写入的数据量。更准确地说，它指定下一个字节将进入哪个数组元素。因此，如果您已从通道读取三个字节到缓冲区，则该缓冲区的位置将设置为 3，指的是数组的第四个元素。

**限制**

limit 变量指定还有多少数据要获取（在从缓冲区写入通道的情况下），或者还有多少空间可以将数据放入（在从通道读取到缓冲区的情况下） . 位置总是小于或等于限制。

**容量**

缓冲区的容量指定了其中可以存储的最大数据量。实际上，它指定了底层数组的大小——或者，至少，我们被允许使用的底层数组的数量。限制永远不能大于容量。

```
so how do I detect when a buffer is full and is ready to be swapped? 
```

检查 position 和 capacity 字段或 limit 的值。

# java - 防止类成员转换为 JAXB XML

> ID：11220512
> 
> 赞同：2
> 
> 时间：2012-06-27T06:23:12.160
> 
> 标签：java, xml, xml-serialization, jaxb2

这是我的 JAXB 课程，

```
@XmlRootElement
public class Status {

    private int code;
    private String message;

    public Status() {
    }

    public Status(int code, String message) {
        this.code = code;
        this.message = message;
    }

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }
} 
```

我不希望将“代码”编组为 XML。这是我尝试过的东西，但它总是编组为 XML。

*   将 @XMLElement 注释为仅 getMessage() 方法
*   将“代码”设为瞬态

还没有希望。XMLAccessorType.NONE 可以应用于类级别。不在元素级别。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:26:38.923

`@XmlTransient`在您不想被编组的属性的 getter 方法之前添加注释。

前任：

```
@XmlTransient
public int getCode() {
        return code;
    } 
```

# wcf-data-services - 如何使用 linq to sql 序列化 wcf 中的对象列表

> ID：11220513
> 
> 赞同：0
> 
> 时间：2012-06-27T06:23:22.353
> 
> 标签：wcf-data-services, wcf-binding

我已经在 Visual Studio Express 2010 中建立了 wcf Web 服务。我正在使用 Linq to Sql 来操作数据库。因为我有基于 EmpID 的关系的表 EmpMaster（主键表）和 EmpDetail（F 键表）。到目前为止，我在本地部署了这个 Web 服务。并尝试在我的 Web 应用程序中使用 Linq to sql Query 访问员工主数据和详细数据。我的 Web 应用程序是基于 MVC 的应用程序。而员工主数据我可以通过网络服务在网络应用程序中访问。但默认情况下它应该加载员工详细信息条目。因为默认情况下**`DeferredLoadingEnabled`** 是启用的。我可以在调试 Web 服务时看到 Web 服务中的记录集。但是在 Web 应用程序中访问 emp 详细列表数据时出现错误。作为

```
"the underlying connection was closed the connection was closed unexpectedly " 
```

我在客户端网络配置中添加：

```
<binding name="BasicHttpBinding_IEmployeeManagerService"  openTimeout="10:10:00" receiveTimeout="10:10:00" sendTimeout="10:10:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="104857600" maxBufferPoolSize="104857600" maxReceivedMessageSize="104857600"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
       <readerQuotas maxDepth="104857600" maxStringContentLength="104857600"
                     maxArrayLength="104857600" maxBytesPerRead="104857600" maxNameTableCharCount="104857600" />

       </binding> 
```

应该是什么问题？

```
 **`**Edited:**`** 

Public Function GetEmployeeDetail(ByVal id As String) As EmployeeDetail Implements IEmployeeManagerService.GetEmployeeDetail
    Dim _empDetail As New EmployeeDetail()
    If Not id Is Nothing Then
        _empDetail = _dbContext.EmployeeDetails.Where(Function(e) e.EmpId = id ).FirstOrDefault()
    End If
    Return _empDetail
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:39:28.147

那么，延迟加载（或延迟加载）意味着，在您的情况下，只有当您“调用”它们时才会检索 EmpDetail 数据。

因此，您检索 EmpMaster 数据，并且当您使用属性 master.EmpDetail.Name 时，例如，将向数据库发送一个新请求以获取与 master 的 EmpDetail 对应的 EmpDetail。

当然，数据库必须可用（上下文仍然存在）。

您可以在调试时看到 EmpDetail 数据：当您尝试在 Debug 中查看实体的导航属性时，它还会查询数据库以获取值。

为了避免这些问题，您可以“手动”预先加载您知道需要的数据（顺便说一下，如果您知道以后需要所有这些数据，您将避免多次调用数据库）。

为此，您可以使用

`Include()`扩大。

```
context.EmpMaster.Include("EmpDetail").Where... 
```

或在对象中选择您需要的值（匿名与否）

```
your query.Select(m => new {
   m.Name,
   m.EmpDetail.Propertyx,
 ...
 }); 
```

**编辑**：

正确的。我习惯于 Linq to entity 和 c#，而您使用 Linq to SQL 和 vb.net。

所以没办法使用`Include()`，但也许`LoadWith()`

如果您的“EmployeeDetail”类中有“Status”属性，您可以尝试类似的方法。

```
Public Function GetEmployeeDetail(ByVal id As String) As EmployeeDetail Implements IEmployeeManagerService.GetEmployeeDetail
    Dim _empDetail As New EmployeeDetail()
    If Not id Is Nothing Then
         Dim dlo As DataLoadOptions = New DataLoadOptions()
         dlo.LoadWith(Of EmployeeDetails)(Function(e As EmployeeDetails) e.Status)
         _dbContext.LoadOptions = dlo
        _empDetail = _dbContext.EmployeeDetails.Where(Function(e) e.EmpId = id ).FirstOrDefault()
    End If
    Return _empDetail
End Function 
```

如果您没有“状态”属性，则应该进行内部连接。EmpMaster 和 EmployeeDetail 的想法相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:03:31.447

wel..wel..wel.. 找到了诀窍，但没有得到答案。我删除了 EmpMaster 和 EmpDetail 之间的映射，然后重新生成 .dbml。至少在这段时间里，每件事都做得很完美。但是当我在正常的 asp.net web 服务中尝试时，我得到了 EmpMaster 对象的序列化错误。并且错误说循环引用...... bla bla bla ..不知道为什么。正如我在数据库上下文类中检查的那样，似乎没有任何东西。然后我尝试删除 sql server 中两个表之间的映射。听起来对我有用。...第二种方式就[在这里](http://www.west-wind.com/weblog/posts/2007/Sep/02/LINQ-to-SQL-and-Serialization)

# php - php文件查询不起作用

> ID：11220516
> 
> 赞同：0
> 
> 时间：2012-06-27T06:23:36.817
> 
> 标签：php, mysql

我有一个文件 /admin/php.php ，其中包含以下内容：

```
 <?php

 $ID=$_GET['ID'];

 require("../admin/config.php");

 $sql = "SELECT * FROM contacts WHERE contacttype IN ('New','Buyer','Seller','Buyer / Seller','Investor') AND leadstatus = 'New' ORDER BY date DESC";

$space = (!empty($row['firstname']) && !empty($row['lastname'])) ? ' ' : '';        
$name = $row['firstname'].$space.$row['lastname'];       
$partner  = $row['spousefirst'];   
$cell = (!empty($row['phonecell'])) ? " {$row['phonecell']} (cell)" : '';
$email = (!empty($row['email'])) ? " {$row['email']} (email)" : ''; 

mysql_query($sql) or die ("Error: ".mysql_error());

?> 
```

在另一个页面 /admin/index.php 我有：

```
<?php require("php.php"); ?>
    <tbody>
      <tr>
        <td><input type="checkbox" name="" id="" value="<?php echo $row['ID']; ?>"></td>
        <td><a href="/admin/leads/view/?ID=<?php echo $row['ID']; ?> "><strong><?php echo $name; ?></strong></a></td>
        <td><a href="/admin/leads/view/?ID=<?php echo $row['ID']; ?> "><?php echo $partner; ?></a></td>
        <td><?php echo $row['phonecell']; ?></td>
        <td><a href="mailto:<?php echo $row['email']; ?>"><?php echo $row['email']; ?></a></td>
        <td><?php echo date("M jS, g:i A", strtotime($row['date'])); ?></td>
        <td><?php echo $row['contacttype']; ?></td>
        <td><?php echo $row['agentassigned']; ?></td>
        <td><?php echo $row['leadstatus']; ?></td>
        <td><a href="/admin/contacts/notes.php?ID=<?php echo $row['ID']; ?>">View </a>+ </td>
        <td><a href="/admin/contacts/todo.php?ID=<?php echo $row['ID']; ?>">View </a>+ </td>
        <td><a href="/admin/contacts/deletesuccess.php?ID=<?php echo $row['ID']; ?>">D</a></td>
      </tr>
    </tbody>   
<?php
}
mysql_close(); 
?>
</table> 
```

当我运行它时，我得到一个 Parse 错误：语法错误，/admin/index.php 中的意外'}'。我尝试`<?php`在 /admin/index.php 中删除“}”，但在 /admin/php.php 中出现意外 $end 错误。真的很困惑为什么这不起作用。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:32:19.070

首先，`}`不应该在那里。这个文件没有打开`{`，所以不应该有一个关闭。

接下来，`unexpected $end`-该错误在另一个文件中，所以这是另一个问题。的语法`php.php` *看起来*有效，但是：

1.  你的`mysql_query`电话应该返回一个结果，我没有看到你将它分配给任何东西。
2.  检查`?>`我们在此处看不到的不可打印字符是否在关闭之后/之前，但这会使解析器阻塞 - 基本上，删除该行，重新创建它并保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:30:23.577

```
<?php
}
mysql_close($sql); 
?> 
```

你有右括号，但我看不到开口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:30:55.307

“}”将导致您问题中发布的代码出错。我不确定这是否是所有代码。

另一个问题是您是否连接到数据库？因为您的代码中也没有任何内容表明这一点。

并且在运行之后你什么也不做`mysql_query($sql)`。

# qt - 尝试为“打开 Embedded2 设备”构建 QT 应用程序时出错

> ID：11220520
> 
> 赞同：1
> 
> 时间：2012-06-27T06:23:56.577
> 
> 标签：qt, compiler-errors, makefile, openembedded

尝试构建我的应用程序时出现此错误：

```
make: Wl,-rpath-link,: Command not found 
```

我的 Makefile 看起来是这样的，它是使用 OE 工具链中的 qmake 程序生成的文件。

```
 #############################################################################
# Makefile for building: app_qt
# Generated by qmake (2.01a) (Qt 4.8.1) on: Tue Jun 26 17:49:26 2012
# Project:  app_qt.pro
# Template: app
# Command: /usr/local/oecore-i686/sysroots/i686-oesdk-linux/usr/bin/qmake -o Makefile ap_qt.pro
#############################################################################

####### Compiler, tools and options

CC            = $(OE_QMAKE_CC)
CXX           = $(OE_QMAKE_CXX)
DEFINES       = -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB
CFLAGS        = -pipe -pipe $(OE_QMAKE_CFLAGS) -fpermissive -O2 -Wall -W -Wall -W -D_REENTRANT $(DEFINES)
CXXFLAGS      = -pipe -pipe -pipe $(OE_QMAKE_CFLAGS) $(OE_QMAKE_CXXFLAGS) -O2 -O2 -Wall -W -Wall -W -Wall -W -D_REENTRANT $(DEFINES)
INCPATH       = -I/usr/local/oecore-i686/sysroots/armv7ahf-vfp-neon-oe-linux-gnueabi/usr/share/qtopia/mkspecs/linux-g++ -I. -I$(OE_QMAKE_INCDIR_QT)/QtCore -I$(OE_QMAKE_INCDIR_QT)/QtGui -I$(OE_QMAKE_INCDIR_QT) -I. -Isrc -Isrc/screens -Isrc/Lists -Isrc/widgets -Isrc/FileIO -Isrc/communication -IQSerialDevice/src -I.
LINK          = $(OE_QMAKE_LINK)
LFLAGS        = $(OE_QMAKE_LDFLAGS) -Wl,-rpath-link,$(OE_QMAKE_LIBDIR_QT)
LIBS          = $(SUBLIBS)  -L$(OE_QMAKE_LIBDIR_QT) -lQtGuiE -lQtCoreE -lpthread 
AR            = $(OE_QMAKE_AR) cqs
RANLIB        = 
QMAKE         = /usr/local/oecore-i686/sysroots/i686-oesdk-linux/usr/bin/qmake
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = $(COPY)
COPY_DIR      = $(COPY) -r
STRIP         = $(OE_QMAKE_STRIP)
INSTALL_FILE  = install -m 644 -p
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = install -m 755 -p
DEL_FILE      = rm -f
SYMLINK       = ln -f -s
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p

####### Output directory

OBJECTS_DIR   = ./ 
```

有人认识到错误并知道它为什么会出现吗？

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:51:02.003

产生错误是因为变量`$(OE_QMAKE_LIBDIR_QT)`不存在。所以

```
-Wl,-rpath-link,$(OE_QMAKE_LIBDIR_QT) 
```

变成

```
-Wl,-rpath-link, 
```

您是否设置了其他变量，例如`$(OE_QMAKE_CC)`and `$(OE_QMAKE_CXX)`，如果是，在哪里？您应该将上面的变量添加到此列表中。它应该指向`lib`Qt 安装的子目录。

这可能是例如（这里是 Qt 版本 4.8.0）`/usr/local/Trolltech/Qt-4.8.0/lib`：.

在您的主目录中的本地安装中，它可能如下所示`~/qt/Desktop/Qt/4.8.1/gcc/lib`：

对于 Qtopia，您应该查看`/usr/local/oecore-i686/sysroots`...

# windows-phone-7 - 使用 Windows Phone 7 下载支持的文件

> ID：11220529
> 
> 赞同：0
> 
> 时间：2012-06-27T06:25:01.693
> 
> 标签：windows-phone-7, ie-mobile

我在使用 windows phone 时遇到以下问题。

我创建了一个处理程序 Download.ashx，它接受我用来从数据库中检索数据的查询 ID。非常简单的东西，它适用于桌面浏览器。但是，当我尝试在 Windows Phone 7 上使用相同的方式时，出现错误“无法下载文件 Windows Phone 不支持此文件类型”

在google上快速搜索，发现WP7不支持这种下载文件的方式。它们应该是直接链接，以便下载工作。

所以我的问题是：解决这个问题的最佳方法是什么，或者有没有？

编辑：哦，我正在编写的软件是在移动设备上使用的 C# Web 应用程序。WP7.5 是有问题的

# javascript - Facebook 画布：IFrame 中的内容在 IE7 和 IE8 中被截断

> ID：11220530
> 
> 赞同：0
> 
> 时间：2012-06-27T06:25:07.073
> 
> 标签：javascript, facebook

我们的 Facebook 画布应用在 IE7 和 IE8 中遇到了一个问题。Canvas 无法增加其高度，从而导致内容被截断。同时，我们发现了一些js错误：“Object doesn't support this property or method” xd_arbiter.php?version=6, line 19 character 548

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:28:28.247

查看`FB.Canvas.setAutoGrow()`Facebook JavaScript SDK 提供的功能 - [https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/)

```
FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
});
FB.Canvas.setAutoGrow(); 
```

> 注意：此方法仅在 App Dashboard 中将 Canvas Height 设置为“Fixed at (800)px”时启用。
> 
> 启动或停止一个计时器，该计时器每隔几毫秒就会增加你的 iframe 以适应内容。默认超时为 100 毫秒。

# macos - 撤消管理器为零 --- 为什么？

> ID：11220532
> 
> 赞同：3
> 
> 时间：2012-06-27T06:25:17.047
> 
> 标签：macos, cocoa, nsundomanager

为什么`[self undoManager]`在基于文档的应用程序中的子窗口中为零？

它不应该引用其父窗口的撤消管理器吗？在父窗口中，我得到了撤消管理器的实际地址！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:34:41.283

`undoManager`不是 NSWindowController 的成员。这只是一个 NSDocument “功能”。

NSDocument 文档的摘录： ... 文档管理其窗口的编辑状态，并设置为执行撤消和重做操作。……

“子类化 NSDocument”部分：

.... 子类还负责创建管理文档窗口的窗口控制器以及执行撤消和重做。……

您编写的代码不适用于其他强类型语言，因为您将向不存在的对象发送消息。我很确定你应该在这里有一个编译器警告。

希望这可以帮助，

最好的，

弗洛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:46:23.623

弗洛的回答是一个很好的起点。一段时间后，事实证明响应者链以某种方式起作用（或者，可能是我 :-)）。

由 控制的子窗口`NSWindowController`应自动 (??) 具有*文档*属性，以便`[self document]`返回与此窗口关联的文档。从中拉出撤消管理器很容易。

但是，在我的应用程序（以及一个小型测试应用程序）中，没有设置此文档。当我从文档 ( `[newWindow setDocument:self]`) 中手动设置它时，一切正常：注册撤消/重做操作、菜单栏等。

# mongodb - MongoDB 安装错误

> ID：11220534
> 
> 赞同：1
> 
> 时间：2012-06-27T06:25:21.427
> 
> 标签：mongodb, pecl, nosql

只需在 MediaTemple（专用虚拟/CentOS Linux）上设置一个新服务器并安装开发人员工具，但 Mongo 不会安装，有什么想法吗？

此外，它正在尝试 DL 版本 1.2.10 我假设我可以在`pecl upgrade mongo`安装到 2.0.6 后运行，对吗？

这是我的输出：

```
[root ~]# pecl install mongo
downloading mongo-1.2.10.tgz ...
Starting to download mongo-1.2.10.tgz (86,463 bytes)
.....................done: 86,463 bytes
36 source files, building
running: phpize
Configuring for:
PHP Api Version:         20041225
Zend Module Api No:      20060613
Zend Extension Api No:   220060519
building in /var/tmp/pear-build-root/mongo-1.2.10
running: /root/tmp/pear/cache/mongo-1.2.10/configure
checking for egrep... grep -E
checking for a sed that does not truncate output... //bin/sed
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... configure: error: cannot run C compiled     programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details.
ERROR: `/root/tmp/pear/cache/mongo-1.2.10/configure' failed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:05:45.207

您不是使用 pecl 安装 mongodb，而是在这里为 mongodb 安装 PHP 驱动程序。

要在 CentOS 上安装 mongodb，请按照[此处](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/)的说明进行操作。这些说明向您展示了如何添加 10gen 存储库，这将使您（使用 yum）能够安装最新的生产就绪 mongodb 版本（2.0.6）。

我意识到这不是 Ubuntu，而是考虑到您安装 PHP 驱动程序的问题，如果您运行它有什么不同吗

```
sudo pecl install mongo 
```

[这里](http://www.mongodb.org/display/DOCS/PHP+Language+Center)有一些关于安装 mongo php 驱动程序的信息，只需将 'apt-get' 元素替换为 'yum' 作为相同的库，依赖项适用 afaik。

这是使用 mongo php 驱动程序的[教程](http://www.php.net/manual/en/mongo.tutorial.php)。

# excel - VBA 工作簿。如果用户要保存，则在不提示的情况下关闭？

> ID：11220537
> 
> 赞同：17
> 
> 时间：2012-06-27T06:25:27.270
> 
> 标签：excel, vba

我正在编写一个将`.xls`文件转换为`.csv`文件的 VBA 程序。问题是弹出`"Do you want to save the changes to myFile.csv?"`对话框。

这是我的代码片段：

```
currentBook.SaveAs Filename:=fileNameS, FileFormat:=xlCSV, ConflictResolution:=xlLocalSessionChanges    
currentBook.Close SaveChanges:=False 
```

我需要添加什么以免我收到“您要将更改保存到`myFile.csv`吗？” 对话框？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T08:41:54.250

尝试使用`ThisWorkbook.Saved = True`

```
 Application.DisplayAlerts = False
        currentBook.SaveAs Filename:=fileNameS, FileFormat:=xlCSV, ConflictResolution:=xlLocalSessionChanges
        currentBook.Saved = True            
        currentBook.Close SaveChanges:=False
        Application.DisplayAlerts = True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:05:29.000

这是我过去所做的，它对我有用：

```
Application.DisplayAlerts = False
    ActiveWorkbook.SaveAs Filename:=fileNameS, FileFormat:=xlCSV, conflictResolution:=xlLocalSessionChanges
Application.DisplayAlerts = True
ActiveWorkbook.Close False 
```

您也可以尝试在 DisplayAlerts 重置为 true 之前关闭...

# php - PHP preg_replace();

> ID：11220538
> 
> 赞同：0
> 
> 时间：2012-06-27T06:25:31.877
> 
> 标签：php, regex

我在 PHP 中遇到了 regexp 函数 preg_replace() 的问题。我想从 html 的输入中获取视图状态，但它不能正常工作。

这段代码：

```
$viewstate = preg_replace('/^(.*)(<input\s+id="__VIEWSTATE"\s+type="hidden"\s+value=")(.*[^"])("\s+name="__VIEWSTATE">)(.*)$/u','^\${3}$',$html); 
```

返回这个：

```
%0D%0A%0D%0A%3C%21DOCTYPE+html+PUBLIC+%22-%2F%2FW3C%2F%2FDTD+XHTML+1.0+Transitional%2F%2FEN%22+%22http%3A%2F%2Fwww.w3.org%2FTR%2Fxhtml1%2FDTD%2Fxhtml1-transitional.dtd%22%3E%0D%0A%0D%0A%3Chtml+xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22+%3E%0D%0A%3Chead%3E%3Ctitle%3E%0D%0A%09Strava.cz%0D%0A%3C%2Ftitle%3E%3Clink+rel%3D%22shortcut+icon%22+href%3D%22..%2FGrafika%2Ffavicon.ico%22+type%3D%22image%2Fx-icon%22+%2F%3E%3Clink+rel%3D%22stylesheet%22+type%3D%22text%2Fcss%22+media%3D%22screen%22+href%3D%22..%2FStyly%2FZaklad.css%22+%2F%3E%0D%0A++++%3Cstyle+type%3D%22text%2Fcss%22%3E%0D%0A++++++++.style1%0D%0A++++++++%7B%0D%0A++++++++++++width%3A+47px%3B%0D%0A++++++++%7D%0D%0A++++++++.style2%0D%0A++++++++%7B%0D%0A++++++++++++width%3A+64px%3B%0D%0A++++++++%7D%0D%0A++++%3C%2Fstyle%3E%0D%0A%0D%0A%3Cscript+type%3D%22text%2Fjavascript%22%3E%0D%0A%0D%0A++var+_gaq+%3D+_gaq+%7C%7C+%5B%5D%3B%0D%0A++_gaq.push%28%5B 
```

**编辑：**对不起，我把这个问题留了很长时间。最后我使用了 DOMDocument。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:08:22.350

为了确保我将这场比赛分为两个阶段：

1.  找到相关的输入元素
2.  获取价值

因为您无法确定元素中的属性顺序是什么。

```
if(preg_match('/<input[^>]+name="__VIEWSTATE"[^>]*>/i', $input, $match))
    $value = preg_replace('/.*value="([^"]*)".*/i', '$1', $match[0]); 
```

当然，在解析 html/xml 时，一定要考虑使用正[`DOM`](http://php.net/dom)则[`DOMXpath`](http://php.net/domxpath)表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:48:18.317

您应该只在计划使用数据时进行捕获。所以大多数 () 在那个正则表达式模式中已经过时了。不是失败的原因，但我想我会提到它。

而不是使用 [^"] 来标记您不想要该字符，您可以使用非贪婪修饰符 - `?`。这可以确保模式尽可能少地匹配。由于您`name="__VIEWSTATE"`遵循该值，因此这应该是安全的.

让我们将其付诸实践并简化一些模式。这可以按您的意愿工作：

```
'/.*<input\s+id="__VIEWSTATE"\s+type="hidden"\s+value="(.+?)"\s+name="__VIEWSTATE">.*/' 
```

我[强烈建议](https://twitter.com/tobiassjosten/status/217317667953057792)检查DOM 操作[的正则表达式的替代方法。](http://phpmaster.com/php-dom-using-xpath/)如果属性更改顺序，这可以确保您的代码也可以正常工作。另外，它的工作要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:03:46.120

主要错误是使用 funciton `preg_replace`，witch 返回主题 - 既不是匹配模式也不是替换。感谢您的想法和 DOMDocument 的推荐。m93a

[http://www.php.net/manual/en/function.preg-replace.php#refsect1-function.preg-replace-returnvalues](http://www.php.net/manual/en/function.preg-replace.php#refsect1-function.preg-replace-returnvalues)

# wcf - 如何在 WCF 中将所有端点与服务引用一起使用？

> ID：11220539
> 
> 赞同：0
> 
> 时间：2012-06-27T06:25:39.680
> 
> 标签：wcf, binding, wcf-endpoint

我用多个绑定编写我的服务。我使用 2 个基本地址，并为 tcp 创建 3 个端点，为 http 创建 3 个端点。如何在客户端应用程序中使用所有端点和服务引用？向服务添加基本地址是否足够参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:45:36.607

假设您只有一个公开三个合同的服务，那么您必须为每个合同定义一个端点。在您的情况下，因为您使用两个绑定 basicHttp 和 tcp 您将有每个绑定类型三个。我看不到在您的客户端应用程序中为两个绑定引用端点的意义。这是一个 API 库还是什么？如果是这种情况，我建议您使用通道工厂来手动构建客户端代理，svcutil.exe 在这种情况下会给您带来麻烦。

# android - Titanium Android 简单表单创建

> ID：11220542
> 
> 赞同：0
> 
> 时间：2012-06-27T06:26:09.397
> 
> 标签：android, forms, titanium

我是一名 Titanium 初学者，正在尝试创建一个包含 2 个名称和地址文本字段以及一个 DateTimePicker 的表单页面。我现在面临两个问题：

1) DateTimePicker 已成功显示，但我希望它和 2 个文本字段都位于同一窗口上，并具有相同的提交按钮。

2）我已经尝试了很多次，但根本无法创建一个简单的文本字段，即使只是在一个页面上创建它。它只是不显示。任何人都可以提供一些建设性的帮助吗？

提前致谢。下面是我当前的代码。

var winTimePicker = Titanium.UI.createWindow({}); winTimePicker.backgroundColor = '黑色';

```
var doneBtn = Ti.UI.createButton({
    title: 'Done',
});

doneBtn.addEventListener('click', function() {
    winTimePicker.hide();
});

winTimePicker.add(doneBtn);

var timePicker = Ti.UI.createPicker({
    type:Ti.UI.PICKER_TYPE_TIME,
    bottom:0,
});

// turn on the selection indicator (off by default)
timePicker.selectionIndicator = true;

timePicker.addEventListener('change', function(e) {
    //your code
});

winTimePicker.add(timePicker);

//open window
winTimePicker.open(); 
```

var winDatePicker = Titanium.UI.createWindow({}); winDatePicker.backgroundColor = '黑色';

```
var doneBtn = Ti.UI.createButton({
    title: 'Done',
});

doneBtn.addEventListener('click', function() {
    winDatePicker.hide();
});

winDatePicker.add(doneBtn);

var datePicker = Ti.UI.createPicker({
    type:Ti.UI.PICKER_TYPE_DATE,
    bottom:0,
});

// turn on the selection indicator (off by default)
datePicker.selectionIndicator = true;

datePicker.addEventListener('change', function(e) {
    //your code
});

winDatePicker.add(datePicker);

//open window
winDatePicker.open(); 
```

var textField = Titanium.UI.createTextField({ color:'#336699', width:"auto", height:"auto", borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED, });

var textField2 = Titanium.UI.createTextField({ color:'#336699', width:"auto", height:"auto", borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED, });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:53:13.083

检查此代码并根据您的需要进行更改：

```
var timePickerWin = Ti.UI.createWindow({
            navBarHidden : true,
            backgroundColor : '#fff'
        });

var startTime = Ti.UI.createPicker({
        top : '15dp',
        left : '50dp',
        useSpinner : false,
        selectionIndicator : true,
        type : Ti.UI.PICKER_TYPE_TIME,
        format24 : false,
        height : '130dp',
        //  width:'auto'

    });

 var endTime = Ti.UI.createPicker({
            top : '15dp',
            left : '50dp',
            useSpinner : false,
            selectionIndicator : true,
            type : Ti.UI.PICKER_TYPE_TIME,
            format24 : false,
            height : '130dp'
        });

var nextButton = Ti.UI.createButton({
            width : '220dp',
            height : '45dp',
            top : '15dp',
            title : 'Next',
            backgroundColor : '#294079',
            font : {
                fontSize : '18dp',
                fontWeight : 'bold'
            },
            color : '#fff'
        });

startTime.addEventListener('change', function(e) {
        //alert("User selected date: " + e.value);
        startPickerValue = e.value;
    });

    endTime.addEventListener('change', function(e) {
        //alert("User selected date: " + e.value);
        endPickerValue = e.value
    });
var fullNameTextBox = Ti.UI.createTextField({
        borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
        width : '275dp',
        height : '45dp',
        //value : '',
        top : '15dp',
        color : '#000000',
        hintText : 'Enter full name'
        //  backGroundColor:'gray',

    });
    var emailTextBox = Ti.UI.createTextField({
        borderStyle : Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
        width : '275dp',
        height : '45dp',
        //value : '',
        top : '15dp',
        color : '#000000',
        hintText : 'Enter email'

    }); 
```

最后使用 add 函数将所有这些 UI 元素添加到 timePickerWin 窗口

```
timePickerWin.add(startTime); 
```

等等所有的UI元素。之后打开timePickerWin如下

```
timePickerWin.open() 
```

通过改变每个元素的左、右、高和宽属性进行适当的布局更改。

# asp.net-mvc - 模块化概念，实体框架代码优先，每个模块都有独立的迁移支持

> ID：11220548
> 
> 赞同：3
> 
> 时间：2012-06-27T06:26:47.343
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-migrations

我想有一个模块化的 webapp 作为这个例子：

**应用核心**：

*   包含 [dbContext-instance, core-tables, core-data, ...]

**应用模块A**：

*   需要 [appCore]

*   包含 [moduleA-tables, moduleA-data, moduleA-logic, appCore 的使用 ...]

**应用模块B**：

*   需要 [appCore, appModuleA]

*   包含 [moduleB-tables, moduleB-data, moduleB-logic, appCore AND moduleA 的使用 ...]

等等

实体的动态加载没问题，我解决了这个问题，如下所述：[http ://romiller.com/2012/03/26/dynamically-building-a-model-with-code-first/](http://romiller.com/2012/03/26/dynamically-building-a-model-with-code-first/)

但是如何在不使用 AutomaticMigrationEnabled = true 的情况下实现每个模块的迁移支持？

我希望我的问题可以理解。:-)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T08:26:11.527

您可以使用：

*   **声明了所有表的**ONE LARGE CONTEXT****

 **或 3 个上下文

*   **核**
*   **仅模块 A**
*   **仅模块 B**

您甚至可以手动将其他不相关的表添加到数据库中。

但是，不要出于迁移目的尝试和重叠上下文。（首选初始化程序）

出于数据访问目的而重叠的上下文，没问题。（初始化程序 NULL）

> 搜索主题：限界上下文和实体框架**

# database-design - 电子商务应用数据库

> ID：11220549
> 
> 赞同：0
> 
> 时间：2012-06-27T06:26:47.430
> 
> 标签：database-design, e-commerce, database-schema

我有三种类型的产品

```
 - Retail products (ID,product_categoryId,price,name)
 - Courses (ID,course_categoryId,price,name,roomId)
 - Events (ID,name,price,StartTime,EndTime) 
```

所有类型都有自己的价格。我应该为所有提及它的父对象创建一个表，还是必须为每种类型创建单独的表？

请记住，用户可以购买多种类型。（例如她可以通过 2 个零售产品 3 个课程和一个事件）。所以发票就是这样创建的。

请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:45:34.167

为什么不创建这样的表（TSQL）

```
CREATE TABLE [dbo].[ProductTypes] (
    [Id] INT NOT NULL ,
    [Description] NVARCHAR(MAX) NOT NULL
)

CREATE TABLE [dbo].[Products] (
    [Id] INT NOT NULL IDENTITY(1) ,
    [ProductTypeId] INT NOT NULL, -- FK to ProductTypes table
    [Price] ...
)

CREATE TABLE [dbo].[OrderItems] (
    [OrderId] INT NOT NULL ,
    [ProductId] INT NOT NULL
)

... and so forth? 
```

# html - 您如何使用

> ID：11220553
> 
> 赞同：0
> 
> 时间：2012-06-27T06:27:00.453
> 
> 标签：html, forms, href

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:30:13.973

首先给表单一个 id 属性，以便您可以引用它：

```
<form action="login.php" method="post" id="myform"> 
```

现在您可以使用*onclick*事件进行 Javascript 提交：

```
<a href="#" onclick="document.forms['myform'].submit();">Click to submit the form</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:40:02.713

```
<a href="#" onclick=
 "document.getElementById('submit_login').submit(); return false">Log in</a> 
```

但是使用提交按钮确实更有用且更易于访问，因此最好解决您在样式方面遇到的任何问题，而不是通过这种方式实现基本功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:37:56.590

以@dbaseman 的回答为基础。如果您使用[jQuery](http://jquery.com/)提交表单，这应该会有所帮助。

**html**

```
<a href="#" id="MySubmitButton" name="MySubmitButton">Click to save</a> 
```

**jQuery**

```
// submit
$('#MySubmitButton').click(function () {
    $('form').submit();
    return false;
});

// OR - bypassing any unbotrusive validation
$('#MySubmitButton').click(function () {
    $('form')[0].submit();
    return false;
});

// using the enter key to submit the form
$('#password, #email').keypress(function (event) {
    var keycode = (event.keyCode ? event.keyCode : event.which);
    if (keycode == 13) {
        $('form').submit();

        event.stopPropagation();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:39:34.997

JavaScript 提供了包含 submit() 方法的表单对象。使用表单的“id”来获取表单对象。例如，如果您的表单名称为“myform”，则提交调用的 JavaScript 代码为：

```
document.forms["myform"].submit(); 
```

但是，如何识别表格？在form标签中给出一个id属性

```
<form id='myform' action='handle-data.php'> 
```

这是单击超链接时提交表单的代码：

```
<form name="myform" method="post" action="handle-data.php">
Search: <input type='text' name='query' />
<a href="javascript: submitform()">Search</a>
</form>
<script type="text/javascript">
function submitform()
{
  document.myform.submit();
}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T08:21:24.913

这里回答

```
 <form action="login.php" method="post" id="myform" name="myform">
 </form>
 <a href="javascript:document.myform.submit();">Click to submit the form</a> 
```

# php - 如何修复 URL 编码？

> ID：11220555
> 
> 赞同：-1
> 
> 时间：2012-06-27T06:27:09.600
> 
> 标签：php, html, vbulletin

我的网址是：

```
forumdisplay.php?462-%EE%F9%E7%F7%E9%ED-%E1%F8%F9%FA 
```

我认为 url 是
使用 vbulletin 4.1.12 的 URL 编码我
如何修复它？

将 462-%EE%F9%E7%F7%E9%ED-%E1%F8%F9%FA 替换为`f=462`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:48:49.980

在有人提出单行预替换解决方案之前，这可能会有所帮助：

```
$parsed_url = parse_url(urldecode('forumdisplay.php?462-%EE%F9%E7%F7%E9%ED-%E1%F8%F9%FA'));
$new_query = '?f='.substr($parsed_url['query'], 0, strpos($parsed_url['query'], '-'));
$new_url = $parsed_url['path'].$new_query;
var_dump( $new_url ); 
```

# iphone - 如何保证线程同步

> ID：11220556
> 
> 赞同：1
> 
> 时间：2012-06-27T06:27:10.947
> 
> 标签：iphone, ios, thread-safety, performselector

我有一个`myButtonAction`执行一些繁重计算的方法，我需要在后台线程上运行它，同时我正在加载一个在主线程中指示“任务进度”的视图。一旦后台线程完成执行该方法，我需要删除“任务进度”视图并在主线程中加载另一个视图。

```
[self performSelectorInBackground:@selector(myButtonAction) withObject:nil];
[self performSelectorOnMainThread:@selector(LoadView) withObject:nil waitUntilDone:YES]; 
```

我面临的问题是，在`myButtonAction`完成执行之前，`LoadView`完成了它的执行。如何确保仅在完成`LoadView`执行后才开始执行。`myButtonAction`

注意：`myButtonAction`在另一个类中有它的方法定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:43:41.107

使用[Grand Central Dispatch](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self myButtonAction];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self LoadView];
    });
}); 
```

或者，如果您想继续使用`performSelector`方法：

```
[self performSelectorInBackground:@selector(loadViewAfterMyButtonAction) withObject:nil]; 
```

在哪里

```
- (void)loadViewAfterMyButtonAction
{
    [self myButtonAction];
    [self performSelectorOnMainThread:@selector(LoadView) withObject:nil waitUntilDone:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:30:29.957

您需要执行以下操作 -

```
[self performSelectorInBackground:@selector(myButtonAction) withObject:nil];

- (void)myButtonAction {
    //Perform all the background task

   //Now switch to main thread with all the updated data
    [self performSelectorOnMainThread:@selector(LoadView) withObject:nil waitUntilDone:YES];
} 
```

编辑 - 然后你可以尝试 -

```
[self performSelectorInBackground:@selector(buttonActionInBackground) withObject:nil];

 - (void)buttonActionInBackground {
       [self myButtonAction];

       //Now switch to main thread with all the updated data
    [self performSelectorOnMainThread:@selector(LoadView) withObject:nil waitUntilDone:YES];
  } 
```

现在你不需要改变`myButtonAction`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:36:07.070

我认为这段代码在 myButtonAction 结束时被调用：

```
[self performSelectorOnMainThread:@selector(LoadView) withObject:nil waitUntilDone:YES]; 
```

现在难怪 LoadView 在 myButtonAction 完成之前完成，因为你说它要等到它用“waitUntilDone:YES”完成。最后用 waitUntilDone:NO 调用它。

对于此类问题的简单解决方案，请查看使用`[self performSelector:@selector(sel) withObject:obj afterDelay:0.0]`NSTimer 将选择器调用放入主运行循环 - 例如，如果您想等到 UI 更新完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:45:28.263

为了这些目的，我使用了[信号量设计模式](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)。

# prolog - 扁平化列表

> ID：11220567
> 
> 赞同：4
> 
> 时间：2012-06-27T06:28:11.553
> 
> 标签：prolog, dcg

我需要编写一个扁平化列表的函数。

例如：

```
flat([ c , [[[]]] , [] , k] , X).
X=[c,k] 
```

这就是我所做的：

```
 flat([],[]).
    flat([[A] |B] , R) :- flat([A|B],R).
    flat([[]|L],L1) :- flat(L,L1).!
    flat([[A|L]|W],R) :- flat([A|L],U), flat(W,W1), append(U,W1,R).
    flat([A|L], [A|L1]) :- flat(L,L1). 
```

我知道为什么这不是真的，但我不知道该怎么做。谢谢。

**编辑：** 几乎工作：

```
 flat([],[]).
flat([[]|L],L1) :- flat(L,L1).  --- i think something here missing
flat([[A|L]|W],R) :- flat([A|L],U), flat(W,W1), append(U,W1,R).
flat([A|L], [A|L1]) :- flat(L,L1).

?- flat([c , [[[]]] , [] , k],C).
C = [c, k] ;
C = [c, [], k] ;
C = [c, [], k] ;
C = [c, [], [], k] ;
C = [c, [[]], k] ;
C = [c, [[]], [], k] ;
C = [c, [[[]]], k] ;
C = [c, [[[]]], [], k]. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:11:22.497

代码编辑（见评论）

另一种可能性，使用 DCG ：

```
flat(L, FL) :-
    flat(L, FL, []).

flat(X) -->
    {var(X)},
    !,
    [X].

flat([]) --> 
    [], 
    !.

flat([X | T]) -->
    flat(X),
    !,
    flat(T).

flat(X) --> [X]. 
```

现在我们得到：

```
 ?- flat([[a,b,c,d|r]], FL) .
FL = [a,b,c,d,r] .

 ?- flat([1,2,[3,4]],L).
L = [1,2,3,4] .

 ?- flat([1,2,[3,4]],[1,2,3,4]).
true .

 ?- flat([ c , [[[]]] , [] , k] , X).
X = [c,k] . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:27:48.397

```
flatten(List, FlatList) :-
    flatten(List, [], FlatList0), !,
    FlatList = FlatList0.

flatten(Var, Tl, [Var|Tl]) :-
    var(Var), !.
flatten([], Tl, Tl) :- !.
flatten([Hd|Tl], Tail, List) :- !,
    flatten(Hd, FlatHeadTail, List),
    flatten(Tl, Tail, FlatHeadTail).
flatten(NonList, Tl, [NonList|Tl]). 
```

这是 Jan Wielemaker 和 Richard O'Keefe 的 swi-prolog 解决方案，代码可以在 prolog 的库目录中的 lists.pl 文件中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:56:34.087

That bang (...flat(L,L1).!...) it's a typo, isn't it?

You could study a [good implementation](http://www.swi-prolog.org/pldoc/doc_for?object=flatten/2) from SWI-Prolog, that exposes its code and gives what's expected:

```
?- flatten([ c , [[[]]] , [] , k] , X).
X = [c, k]. 
```

Otherwise, try to debug with a simple case to see where your code, once cleaned, fails. BTW, your code seems to works, just yields more solutions, you need to prune some unwanted path:

```
?- flat([c , [[[]]] , [] , k],C).
C = [c, k] ;
C = [c, [], k] ;
C = [c, [], k] ;
C = [c, [], [], k] .
... 
```

**edit** here is code from library(lists) of SWI-Prolog

```
%%  flatten(+List1, ?List2) is det.
%
%   Is true if List2 is a non-nested version of List1.
%
%   @deprecated Ending up needing flatten/3 often indicates,
%           like append/3 for appending two lists, a bad
%           design.  Efficient code that generates lists
%           from generated small lists must use difference
%           lists, often possible through grammar rules for
%           optimal readability.
%   @see append/2

flatten(List, FlatList) :-
    flatten(List, [], FlatList0), !,
    FlatList = FlatList0.

flatten(Var, Tl, [Var|Tl]) :-
    var(Var), !.
flatten([], Tl, Tl) :- !.
flatten([Hd|Tl], Tail, List) :- !,
    flatten(Hd, FlatHeadTail, List),
    flatten(Tl, Tail, FlatHeadTail).
flatten(NonList, Tl, [NonList|Tl]). 
```

Your code seems fairly correct WRT your comment:

```
?- flat([1,2,[3,4]],[1,2,3,4]).
true ;
false. 
```

# iphone - MPMoviePlayerController 进入黑屏

> ID：11220569
> 
> 赞同：3
> 
> 时间：2012-06-27T06:28:21.910
> 
> 标签：iphone, ios, cocoa-touch, mpmovieplayercontroller, mpmovieplayer

我正在使用`MPMoviePlayerController`来播放我的应用程序中的视频文件，视频播放得很好。但是突然我打开了一个文件，然后`MPMoviePlayerController`以完全黑屏打开，没有控件。但我可以看到我的文件中有问题，我解决了它。

我想知道是否会`MPMoviePlayerDidExitFullscreenNotification`针对这些黑屏问题发送任何事件。我尝试了`MPMovieSourceTypeUnknown`似乎不正确的事件并尝试了许多事件。

`MPMoviePlayerController`现在我想知道，当尝试打开导致黑屏的文件时，是否会发送任何事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:36:13.123

尽管我认为黑屏是加载错误，但文档的描述性相当强：

`MPMovieFinishReason`描述播放结束原因的常量。

```
enum 
{
    MPMovieFinishReasonPlaybackEnded,
    MPMovieFinishReasonPlaybackError,
    MPMovieFinishReasonUserExited
};
typedef NSInteger MPMovieFinishReason; 
```

> 常数：
> 
> MPMovieFinishReasonPlaybackEnded 已到达影片结尾。在 iOS 3.2 及更高版本中可用。在 MPMoviePlayerController.h 中声明。
> 
> MPMovieFinishReasonPlaybackError 播放过程中出错。在 iOS 3.2 及更高版本中可用。在 MPMoviePlayerController.h 中声明。
> 
> MPMovieFinishReasonUserExited 用户停止播放。在 iOS 3.2 及更高版本中可用。在 MPMoviePlayerController.h 中声明。

这些是通过带有密钥的`MPMoviePlayerPlaybackDidFinishNotification`通知传递的。`MPMoviePlayerPlaybackDidFinishReasonUserInfoKey`

# java - 在等待退出信号时处理 InterruptedException（Android 中的错误？）

> ID：11220572
> 
> 赞同：9
> 
> 时间：2012-06-27T06:28:28.060
> 
> 标签：java, android, multithreading, interrupted-exception

我遇到了下面的代码，我想知道它是否完全符合我的想法：

```
synchronized(sObject) {
    mShouldExit = true;   
    sObject.notifyAll()    
    while (!mExited) {
      try {
           sObject.wait();
        } catch (InterruptedException ex) {
           Thread.currentThread().interrupt();
        }
     }
} 
```

关于上下文：有另一个线程检查`mShouldExit`（在`sObject`监视器内）并在这种情况下退出。

这对我来说似乎不是正确的模式。如果发生中断，它会再次设置中断状态，所以当它返回时`sObject.wait()`，另一个InterruptedException 会来等等等等。因此，它永远不会进入真正的等待状态（`sObject.wait()`），即永远不会释放`sObject`监视器。这可能会导致无限循环，因为其他线程无法将 mExiting 设置为 true，因为它永远无法进入 sObject 的监视器。（所以我认为`interrupt()`调用是一个错误，它不能在这里使用。）我错过了什么吗？

请注意，代码片段是官方 Android 框架源代码的一部分。

**更新：**实际上，情况更糟，因为当您的 GL 渲染开始时，Android 中使用了相同的模式。官方源代码`GLSurfaceView.GLThread.surfaceCreated()`：

```
 public void surfaceCreated() {
        synchronized(sGLThreadManager) {
            if (LOG_THREADS) {
                Log.i("GLThread", "surfaceCreated tid=" + getId());
            }
            mHasSurface = true;
            sGLThreadManager.notifyAll();
            while((mWaitingForSurface) && (!mExited)) {
                try {
                    sGLThreadManager.wait();
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        }
    } 
```

您可以以类似的方式重现该错误：确保您的 UI 线程具有其中断状态标志，然后添加您的 GLSurfaceView 并开始 GL 渲染（通过`setRenderer(...)`，但在某些设备上，确保您的 GLSurfaceView 具有`Visibility.VISIBLE`状态，否则渲染将不会开始）。

如果您按照上述步骤操作，您的 UI 线程将陷入无限循环，因为上面引用的代码将不断生成`InterruptedException`(due to `wait()`)，因此 GL 线程将永远无法设置`mWaitingForSurface`为 false。

根据我的测试，似乎这样的无限循环**也会导致无休止的 GC_CONCURRENT 垃圾收集序列**（或者，至少是 logcat 中的此类消息）。有趣的是，之前有人在 stackoverflow 上遇到了一个未知的定义不明确的问题，这可能与此有关： [How to solve GC_concurrent freed?](https://stackoverflow.com/questions/6591807/how-to-solve-gc-concurrent-freed)

难道他的 UI 线程可能将其中断标志设置为 true，并且他正在使用 GLSurfaceView 作为他提到的地图吗？只是一个假设，一个可能的场景。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T03:09:56.007

简短版本：该代码是错误的，并且会导致无限循环（我仍然有疑问，但可能取决于 JVM 实现）。设置中断状态是正确的做法，但它应该退出循环，最终使用 Thread.isInterrupted() 检查相同的中断状态。

适合休闲读者的长版：

问题是如何停止当前正在执行某些工作的线程，以响应用户的“取消”按钮或由于某些其他应用程序逻辑。

最初，Java 支持“停止”方法，即抢先停止线程。这种方法已被证明是不安全的，因为没有给停止的线程任何（简单的）方法来清理、释放资源、避免暴露部分修改的对象等等。

于是，Java 演变成了一个“协作”的线程“中断”系统。这个系统非常简单：一个线程正在运行，其他人在它上面调用“中断”，在线程上设置一个标志，线程负责检查它是否被中断并采取相应的行动。

因此，正确的 Thread.run（或 Callable 等的 Runnable.run）方法实现应该类似于：

```
public void run() {
  while (!Thread.getCurrentThread().isInterrupted()) {
    // Do your work here
    // Eventually check isInterrupted again before long running computations
  }
  // clean up and return
} 
```

这很好，只要您的线程正在执行的所有代码都在您的运行方法中，并且您永远不会调用长时间阻塞的东西......通常情况并非如此，因为如果您产生一个线程是因为您有要做很久的事情。

最简单的阻塞方法是 Thread.sleep(millis)，它实际上是它唯一做的事情：它在给定的时间内阻塞线程。

现在，如果在您的线程位于 Thread.sleep(600000000) 中时中断到达，而没有任何其他支持，它需要很长时间才能到达它检查 isInterrupted 的点。

甚至在某些情况下您的线程永远不会退出。例如，您的线程正在计算某些内容并将结果发送到大小有限的 BlockingQueue，您调用 queue.put(myresult)，它将阻塞直到消费者释放队列中的一些空间，如果同时消费者已经中断（或死亡或其他），该空间永远不会到达，方法不会返回，对 .isInterrupted 的检查永远不会执行，你的线程被卡住了。

为了避免这种情况，所有（大多数）中断线程的方法（应该）抛出 InterruptedException。该异常只是告诉您“我正在等待这个和那个，但同时线程被中断，您应该尽快清理并退出”。

与所有例外一样，除非您知道该怎么做，否则您应该重新抛出它，并希望调用堆栈中高于您的人知道。

InterruptedExceptions 更糟糕，因为当它们被抛出时，“中断状态”被清除。这意味着简单地捕获和忽略它们将导致线程通常不会停止：

```
public void run() {
  while (!Thread.getCurrentThread().isInterrupted()) {
    try {
      Thread.sleep(1000);
    } catch (InterruptedException e) {
      // Nothing here
    }
  }
} 
```

在这个例子中，如果在 sleep() 方法期间中断到达（这是 99.9999999999% 的时间），它会抛出 InterruptedException，清除中断标志，然后由于中断标志为假，循环将继续，线程将不停止。

这就是为什么如果你使用.isInterrupted正确实现你的“while”，你真的需要捕获InterruptedException，而且你没有任何特殊的事情（比如清理、返回等）来处理它，至少你可以做到再次设置中断标志。

您发布的代码中的问题是“while”仅依赖于 mExited 来决定何时停止，而不是依赖于 isInterrupted。

```
while (!mExited && !Thread.getCurrentThread().isInterrupted()) { 
```

或者它可以在中断时退出：

```
} catch (InterruptedException e) {
  Thread.currentThread().interrupt();
  return; // supposing there is no cleanup or other stuff to be done
} 
```

如果您不控制线程，将 isInterrupted 标志设置回 true 也很重要。例如，如果您在某种线程池中执行的可运行对象中，或者在您不拥有和控制线程的任何方法中（一个简单的案例：servlet），您不知道是否中断是针对“你”的（在 servlet 的情况下，客户端关闭了连接并且容器试图阻止你为其他请求释放线程），或者它是否针对整个线程（或系统）（容器正在关闭，停止一切）。

在那种情况下（占代码的 99%），如果您不能重新抛出 InterruptedException（不幸的是，已检查），那么将堆栈向上传播到线程已被中断的线程池的唯一方法是设置在返回之前将其标记为 true。

这样，它将向上传播堆栈，最终生成更多的 InterruptedException，直到线程所有者（无论是 jvm 本身，Executor 或任何其他线程池）可以正确反应（重用线程，让它死掉， System.exit(1) ...)

大部分内容都包含在 Java Concurrency in Practice 的第 7 章中，这是一本非常好的书，我推荐给任何对一般计算机编程感兴趣的人，而不仅仅是 Java，因为在许多其他环境中问题和解决方案是相似的，并且解释是写得很好。

为什么 Sun 决定检查 InterruptedException，当大多数文档建议无情地重新抛出它时，以及为什么他们决定在抛出该异常时清除中断标志，而正确的做法是在大多数情况下再次将其设置为 true，保持打开状态辩论。

但是，如果 .wait 在检查中断标志之前释放锁，它会从另一个线程打开一扇小门来修改 mExited 布尔值。不幸的是，wait() 方法是本机的，因此应该检查该特定 JVM 的源。这不会改变您发布的代码编码不佳的事实。

# javascript - Ajax 同步或异步

> ID：11220576
> 
> 赞同：0
> 
> 时间：2012-06-27T06:28:44.800
> 
> 标签：javascript, ajax

我有两个 ajax 调用。两者是同步的。两者都从一个控制器调用方法。但是第二种方法首先受到打击。为什么会这样以及如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:31:57.373

顾名思义，Ajax -**异步 JavaScript**

Ajax 是异步的

* * *

**编辑**

对于您的问题，您可以像在第一个响应时调用第二个 URL 一样，一个简单的 jQuery 示例是，

```
/*First request*/
$.post("{SOME_URL}", { PARAMS },
    function(data) {
        /*Do anything with data*/
        /*Your second request*/
        $.post("{SOME_URL}", { PARAMS },
            function(data) {
                /*Do anything with data*/
            }
        );
    }
); 
```

此外，jQuery 支持**异步**标志，可以将其设置为 false 以激活查询的异步性质。但这将阻止来自同一页面的所有其他请求。

请在[此处阅读更多信息](http://api.jquery.com/jQuery.ajax/)

# apache - 在 htaccess 中向我现有的规则添加重写规则

> ID：11220578
> 
> 赞同：0
> 
> 时间：2012-06-27T06:29:02.220
> 
> 标签：apache, .htaccess

我当前的 htaccess 文件是这样的：

```
RewriteEngine On
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteBase /
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

我想添加另一个使用 301 重定向将 www.example.com 重定向到[http://example.com的规则。](http://example.com)我知道我需要添加的规则是

```
RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

但是我在哪里添加这个？我是将其附加到当前文件的末尾，还是将所有条件放在一起，然后将所有规则放在一起？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:37:21.423

是的，您可以附加，**[L]**代表最后一条规则，因此在使用重定向**[L,R=301]后首先将其设为最后一条规则**

在您的情况下使用以下代码

```
RewriteCond %{HTTP_HOST} !^www.example.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

# jquery - Jquery Browser 的停止按钮事件

> ID：11220581
> 
> 赞同：3
> 
> 时间：2012-06-27T06:29:18.757
> 
> 标签：jquery

有没有办法检测用户何时点击了任何浏览器上的停止按钮？当用户决定在上传文件时单击停止按钮时，我想停止脚本运行，这样我就可以触发脚本刷新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:39:07.673

不幸的是，浏览器的停止按钮不会影响 AJAX 请求。如果你想取消一个 AJAX 请求，你可以像下面这样中止它：

```
var xhr = $.ajax(
    url: "http://someurl.org",
    success: function() { ... }
);

xhr.abort(); 
```

触发中止的按钮需要在您的 HTML 中，因为浏览器的停止按钮无法中止请求。如果用户转到另一个页面，浏览器将停止侦听，这实际上是调用 xhr.abort() 时发生的情况。

# python - chromedriver的python-selenium绑定错误

> ID：11220588
> 
> 赞同：1
> 
> 时间：2012-06-27T06:30:05.073
> 
> 标签：python, selenium, webdriver

[通过查看此处](http://install-climber.blogspot.in/2012/06/setupseleniumchromedriverubuntulinux.html)的帖子，我正在尝试在成功安装 chrome 驱动程序后创建 chrome 驱动程序的实例。`chrome-driver 64-bit`如我为python下载的帖子所示。我将 chromedriver 可执行文件移动到`/usr/bin`，并尝试了以下代码

```
 from selenium import webdriver
 driver = webdriver.Chromedriver() 
```

**结果** ：

```
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/local/user/<ipython console> in <module>()

AttributeError: 'module' object has no attribute 'Chromedriver' 
```

当尝试以下

```
 from selenium import webdriver
 driver = webdriver.Firefox() 
```

**结果：**

```
WebDriverException                        Traceback (most recent call last)

/home/local/<ipython console> in <module>()

/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/webdriver.pyc in __init__(self, firefox_profile, firefox_binary, timeout)
     49         RemoteWebDriver.__init__(self,
     50             command_executor=ExtensionConnection("127.0.0.1", self.profile,
---> 51             self.binary, timeout),
     52             desired_capabilities=DesiredCapabilities.FIREFOX)
     53 

/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/extension_connection.pyc in __init__(self, host, firefox_profile, firefox_binary, timeout)
     45         self.profile.add_extension()
     46 
---> 47         self.binary.launch_browser(self.profile)
     48         _URL = "http://%s:%d/hub" % (HOST, PORT)
     49         RemoteConnection.__init__(

/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/firefox_binary.pyc in launch_browser(self, profile)
     42 
     43         self._start_from_profile_path(self.profile.path)
---> 44         self._wait_until_connectable()
     45 
     46     def kill(self):

/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/firefox_binary.pyc in _wait_until_connectable(self)
     79                 raise WebDriverException("The browser appears to have exited "
     80                       "before we could connect. The output was: %s" %
---> 81                       self._get_firefox_output())
     82             if count == 30:
     83                 self.kill()

WebDriverException: Message: 'The browser appears to have exited before we could connect. The output was: *** LOG addons.xpi: startup\n*** LOG addons.xpi: checkForChanges\n*** LOG addons.xpi: Opening database\n*** LOG addons.xpi: No changes found\nFailed to dlopen /usr/lib/libX11.so.6\ndlerror says: /usr/lib/libX11.so.6: wrong ELF class: ELFCLASS32\n' 
```

我不知道这里发生了什么，以及为什么 chrome 和 firefox 网络驱动程序都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:21:23.820

它`webdriver.Chrome()` **不是** `webdriver.Chromedriver()`

并且您可以通过将可执行文件的路径指定为参数来避免在 /usr/bin ..etc 中复制可执行文件

```
webdriver.Chrome(executable_path='...') 
```

这样您就可以避免一个额外的步骤，并将驱动程序签入您的源代码控制目录等。

# jvm - Salesforce IDE 启动错误

> ID：11220594
> 
> 赞同：1
> 
> 时间：2012-06-27T06:30:23.363
> 
> 标签：jvm, salesforce

我已经为 salesforce force.com 平台安装了独立的 IDE。在尝试启动 ide 时，我收到“JVM 终止。退出代码 = -1”错误。知道这个错误代码是什么意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:25:39.963

这是 force.com IDE 的常见加载错误。

有不同的解决方案。尝试以下任何一种：

A) 更改工作区位置。

或者

乙）（一）。[从链接http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/heliossr2](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/heliossr2)为 Java Developers (Helios) 安装 Eclipse 3.6 从右侧的窗口中单击您的操作系统。

(二)。使用以下链接，按照说明为 Eclipse 3.6 [http://wiki.developerforce.com/page/Force.com_IDE_Installation_for_Eclipse_3.6安装 Force.com IDE 插件](http://wiki.developerforce.com/page/Force.com_IDE_Installation_for_Eclipse_3.6)

或者

C) 在默认的 Force.com IDE 安装目录中：

```
 C:\Program Files\salesforce.com\Force.com IDE 
```

找到配置文件：

```
 forceide 
```

并在文件末尾注释掉以下内容（注意前导 #）：

```
#-vmargs
#-Dfile.encoding=UTF-8
#-Xms256m
#-Xmx1024m
#-XX:PermSize=128M
#-XX:MaxPermSize=512M 
```

我希望它现在有效。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:10:29.337

这可能是由于各种原因。假设您没有配置文件 (forceide.ini) 中指定的足够内存 (RAM)。正如这个链接中所说的[Force.com IDE – JVM 已终止](http://www.alokagrawal.com/blog/archives/70)，可能会`MaxPermSize`在配置文件中减少说 256M 并检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T22:54:36.527

这件事几天前发生在我身上。我的设置是：

*   视窗 7 64 位
*   jre7 64位
*   Force.com IDE 64 位

当我运行 java 自动更新来更新我的 jre 时，它​​安装了 32 位版本（另一个抱怨）。所以我手动下载了 64 位版本的 jre，将它安装在 32 位版本之上，IDE 又开始工作了。

# npm - 我应该如何找出 npm 包的最新稳定版本是什么？

> ID：11220598
> 
> 赞同：14
> 
> 时间：2012-06-27T06:30:41.690
> 
> 标签：npm

如何找到 npm 包的最新稳定版本？

除了去[http://search.npmjs.org](http://search.npmjs.org)并搜索它？

我通常需要版本才能将其放入我的`package.json`.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-07T07:56:01.070

`npm view [package-name] dist-tags`在命令行中使用。

例子：

```
$ npm view express dist-tags

{ latest: '2.5.9',
  '3.0': '3.0.0beta2' } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-10T08:41:11.140

因为我不得不自己谷歌它：

找到您想要的特定版本后，使用`npm install -g [package-name]@[your-version]`

例子：

```
$ npm view npm dist-tags

{ latest: '1.4.20',
  '1.4': '1.4.6',
  '1.2': '1.2.8000',
  'v1.5rc': '1.5.0-alpha-1' }

$  npm install -g npm@1.2 
```

# python - 通过批处理文件将多个参数传递给python脚本

> ID：11220601
> 
> 赞同：4
> 
> 时间：2012-06-27T06:31:06.633
> 
> 标签：python, batch-file

我的批处理文件中有以下代码

```
@ECHO OFF
SET /P NAME=Enter name:
SET /P GENDER = Enter age:
SET /P AGE = Enter gender:
python test.py %NAME% %GENDER% %AGE%
PAUSE 
```

这是 test.py 中的代码

```
import sys

print len(sys.argv)

for arg in sys.argv:
    print arg 
```

这是输出

```
Enter name:Dodo
Enter age:1
Enter DB gender:M
2
test.py
Dodo
Press any key to continue . . . 
```

我正在使用python2.5。我如何传递年龄和性别？我对 python 和批处理编程都很陌生，所以对我来说放轻松:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:48:18.650

您不能在`=`in周围使用空格`set`：

```
SET /P NAME=Enter name:
SET /P GENDER=Enter age:
SET /P AGE=Enter gender: 
```

*否则你会得到一个以空格结尾*的变量，你必须像`%GENDER %`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:46:20.627

尝试用引号括起来。你还有一个等号空格，不确定这是否是批处理的问题......

空格：

```
SET /P GENDER = Enter age:
SET /P AGE = Enter gender: 
```

没有：

```
SET /P NAME=Enter name: 
```

# php - 转换 PayPal 时间/日期 日 月 年

> ID：11220602
> 
> 赞同：0
> 
> 时间：2012-06-27T06:31:08.523
> 
> 标签：php

我有一个数据库，它以通常的 paypal 格式存储 PayPal payment_date - HH:MM:SS Mmm DD, YYYY PDT（即 2012 年 4 月 10 日 15:48:34 PDT）。我想在 2012 年 4 月 10 日的记录集中下拉时显示它。

遇到一些麻烦。想法？谢谢。

# javascript - 如何选择页面中的所有图像？

> ID：11220606
> 
> 赞同：1
> 
> 时间：2012-06-27T06:31:24.397
> 
> 标签：javascript, iphone, ipad, resolution, retina-display

我有这个 jQuery 脚本，它提供任何带有标签`data-retina="true"`a`retina-resolution-image`或的图像或对象`background-image`。

但是如何从脚本中删除最后一部分，以便此功能适用于每张图像，而不仅仅是带有`data-retina`标签的图像？

```
 (function($) {
    "use strict";

    var retinaReplace = function(element, options) {

        this.options = options;
        var $el = $(element);
        var is_image = $el.is('img');
        var normal_url = is_image ? $el.attr('src') : $el.backgroundImageUrl();
        var retina_url = this.options.generateUrl($el, normal_url);

        $('<img/>').attr('src', retina_url).load(function() {

            if (is_image) {
                $el.attr('src', $(this).attr('src'));
            } else {
                $el.backgroundImageUrl($(this).attr('src'));
                $el.backgroundSize($(this)[0].width, $(this)[0].height);
            }

            $el.attr('data-retina', 'complete');
        });
    }

    retinaReplace.prototype = {
        constructor: retinaReplace
    }

    $.fn.retinaReplace = function(option) {

        if (getDevicePixelRatio() <= 1) { return this; }

        return this.each(function() {
            var $this = $(this);
            var data = $this.data('retinaReplace');
            var options = $.extend({}, $.fn.retinaReplace.defaults, $this.data(), typeof option == 'object' && option);
            if (!data) { $this.data('retinaReplace', (data = new retinaReplace(this, options))); }
            if (typeof option == 'string') { data[option](); }
        });
    }

    $.fn.retinaReplace.defaults = {
        suffix: '-x2', 
        generateUrl: function(element, url) {
            var dot_index = url.lastIndexOf('.');
            var extension = url.substr(dot_index + 1);
            var file = url.substr(0, dot_index);
            return file + this.suffix + '.' + extension;
        }
    }

    $.fn.retinaReplace.Constructor = retinaReplace;

    var getDevicePixelRatio = function() {
        if (window.devicePixelRatio === undefined) { return 1; }
        return window.devicePixelRatio;
    }

    $.fn.backgroundImageUrl = function(url) {
        return url ? this.each(function () { 
            $(this).css("background-image", 'url("' + url + '")')
        }) : $(this).css("background-image").replace(/url\(|\)|"|'/g, "");
    }

    $.fn.backgroundSize = function(retinaWidth, retinaHeight) {
        var sizeValue = Math.floor(retinaWidth/2) + 'px ' + Math.floor(retinaHeight/2) + 'px';
        $(this).css("background-size", sizeValue);
        $(this).css("-webkit-background-size", sizeValue);
    }

    $(function(){
        $("[data-retina='true']").retinaReplace();
    });

})(window.jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:33:02.157

> 如何从脚本中删除最后一部分，以便此功能适用于每个图像，而不仅仅是带有 data-retina-tag 的图像？

**改变：**

```
$(function(){
    $("[data-retina='true']").retinaReplace();
}); 
```

**至：**

```
$(function(){
    $("img").retinaReplace();
}); 
```

# iphone - 来自 RemoteIO 的 Airplay 输出通过

> ID：11220613
> 
> 赞同：4
> 
> 时间：2012-06-27T06:32:28.003
> 
> 标签：iphone, ios, core-audio, airplay, remoteio

为了证明一个概念，我试图通过 Airplay 输出 iDevice 麦克风。我已经修改了 AurioTouch 代码以提供传递，并且使用从 4S / iPad 2 到 Apple TV 的 Airplay 镜像可以正常工作。

但是，当我尝试从 iPhone 4 / iPad 1 或机场快线使用标准 Airplay 时，设备扬声器的音频输出，即使使用系统输出路由选择器或`MPVolumeView`在我的应用程序中选择了 Airplay 设备.

我需要做什么才能在我的 AudioUnit 上启用 Airplay？根据文档：

> AirPlay 支持内置于 AV Foundation 框架和 Core Audio 系列框架中。您使用这些框架播放的任何音频内容都会自动符合 AirPlay 分发条件。一旦用户选择使用 AirPlay 播放您的音频，系统就会自动路由。

但我似乎没有任何快乐。

# c# - 如何测试 C# Sql server 顺序 GUID 生成器？

> ID：11220616
> 
> 赞同：3
> 
> 时间：2012-06-27T06:32:49.707
> 
> 标签：c#, sql-server, nhibernate, guid, sequence

有很多关于如何创建对 Sql 服务器索引友好的 Guid 的方法，例如[本](http://www.codeproject.com/Articles/388157/GUIDs-as-fast-primary-keys-under-multiple-database)教程。另一种流行的方法是来自 NHibernate 实现的方法（如下所列）。所以我认为编写一个实际测试此类代码的顺序需求的测试方法可能会很有趣。但我失败了——我不知道是什么构成了一个好的 Sql 服务器序列。我无法弄清楚它们是如何订购的。

例如，给定创建顺序 guid 的两种不同方式，如何确定哪种方式最好（速度除外）？例如，看起来两者都有缺点，如果他们的时钟被调回 2 分钟（例如时间服务器更新），他们的序列会突然中断？但这是否也意味着 Sql 服务器索引的麻烦？

我使用此代码生成顺序 Guid：

```
public static Guid CombFromArticle()
{
   var randomBytes = Guid.NewGuid().ToByteArray();
   byte[] timestampBytes = BitConverter.GetBytes(DateTime.Now.Ticks / 10000L);

   if (BitConverter.IsLittleEndian)
      Array.Reverse(timestampBytes);

   var guidBytes = new byte[16];

   Buffer.BlockCopy(randomBytes, 0, guidBytes, 0, 10);
   Buffer.BlockCopy(timestampBytes, 2, guidBytes, 10, 6);

   return new Guid(guidBytes);
}

public static Guid CombFromNHibernate()
{
  var destinationArray = Guid.NewGuid().ToByteArray();
  var time = new DateTime(0x76c, 1, 1);
  var now = DateTime.Now;
  var span = new TimeSpan(now.Ticks - time.Ticks);
  var timeOfDay = now.TimeOfDay;
  var bytes = BitConverter.GetBytes(span.Days);
  var array = BitConverter.GetBytes((long)(timeOfDay.TotalMilliseconds / 3.333333));
  Array.Reverse(bytes);
  Array.Reverse(array);
  Array.Copy(bytes, bytes.Length - 2, destinationArray, destinationArray.Length - 6, 2);
  Array.Copy(array, array.Length - 4, destinationArray, destinationArray.Length - 4, 4);
  return new Guid(destinationArray);
} 
```

文章中的那个稍微快一点，但是哪个为 SQL 服务器创建了最佳序列？我可以填充 100 万条记录并比较碎片，但我什至不确定如何正确验证它。无论如何，我想了解如何编写一个测试用例来确保序列是 Sql server 定义的序列！

另外我想对这两个实现发表一些评论。是什么让一个比另一个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:04:32.383

我为 SQL Server 生成了顺序 GUID。我之前从来没有看过太多的文章……不过，它似乎还不错。

第一个，我用一个系统函数生成（得到一个合适的），下面的，我只是增加。当然，您必须寻找溢出之类的东西（另外，GUID 有几个字段）。

除此之外，没有什么难考虑的。如果 2 个 GUID 是唯一的，那么它们的序列也是唯一的，如果……你保持在几百万以下。好吧，这是数学.. 甚至不能保证 2 个 GUID 是唯一的，至少从长远来看（如果人类不断增长）。因此，通过使用这种序列，您可能会将碰撞概率从接近 0 增加到接近 0（但略高）。如果有的话.. 问一个数学家.. 这是生日问题[http://en.wikipedia.org/wiki/Birthday_problem](http://en.wikipedia.org/wiki/Birthday_problem)，有疯狂的天数。

它是用 C 语言编写的，但应该可以很容易地翻译成更舒适的语言。特别是，您不必担心将 wchar 转换为 char。

```
GUID guid;
bool bGuidInitialized = false;
void incrGUID()
{
    for (int i = 7; i >= 0; --i)
    {
        ++guid.Data4[i];
        if (guid.Data4[i] != 0)
            return;
    }
    ++guid.Data3;
    if (guid.Data3 != 0)
        return;
    ++guid.Data2;
    if (guid.Data2 != 0)
        return;
    ++guid.Data1;
    if (guid.Data1 != 0)
        return;
}

GenerateGUID(char *chGuid)
{
    if (!bGuidInitialized)
    {
        CoCreateGuid(&guid); 
        bGuidInitialized = true;
    }
    else
        incrGUID();

    WCHAR temp[42];
    StringFromGUID2(guid, temp, 42-1);
    wcstombs(chGuid, &(temp[1]), 42-1);
    chGuid[36] = 0;

    if (!onlyOnceLogGUIDAlreadyDone)
    {
        onlyOnceLogGUIDAlreadyDone = true;
        WR_cTools_LogTime(chGuid);
    }

    return ReturnCode;
} 
```

# java - 将未知格式的日期解析为java中的标准格式？

> ID：11220618
> 
> 赞同：-1
> 
> 时间：2012-06-27T06:33:05.730
> 
> 标签：java

嗨，我正在解析带有日期（自定义格式）的 csv 文件，我必须将任何格式（mm-dd-yyyy、yyyy/mm/dd、mmm dd yyyy）中给出的日期解析为标准格式 dd/mm/yyyy。

**问题是我们如何找到给出日期的格式？**

有什么办法吗？

ps：我想在csv中询问日期格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:35:08.070

在您的情况下，字符串应该只包含“-”或“/”或“”之一，因此您可以根据它进行调度。

# php - 无法在 php 中调用静态助手

> ID：11220620
> 
> 赞同：1
> 
> 时间：2012-06-27T06:33:36.957
> 
> 标签：php, class, bittorrent

我正在使用我下载的课程；由于对 php 类和助手不太熟悉，我决定发布它，看看是否有更多经验的人可以为我遇到的错误提供一些帮助。

我正在使用这个调用脚本“torrenttest”中的函数

```
<?php
require_once 'Torrentmaker.php';

$torrent = new Torrent( 'file', 'http://fr33dom.h33t.com:3310/announce' );
$torrent->announce(array('udp://tracker.openbittorrent.com:80/announce', 
if ( ! $error = $torrent->error() ) // error method return the last error message
    $torrent->save('test2.torrent'); // save to disk
else
    echo '<br>DEBUG: ',$error; 
```

问题是当“文件”在同一台服务器上时它工作正常；但是，当它调用远程服务器时，它会给出超时错误，或者只是创建一个没有大小的 torrent 文件（无法运行）

这是 Torrentmaker.php 的脚本

```
class Torrent {

    public function __construct ( $data = null, $meta = array(), $piece_length = 256 ) {
        if ( is_null( $data ) )
            return false;
        if ( $piece_length < 32 || $piece_length > 4096 )
            return self::set_error( new Exception( 'Invalid piece lenth, must be between 32 and 4096' ) );
        if ( is_string( $meta ) )
            $meta = array( 'announce' => $meta );
        if ( $this->build( $data, $piece_length * 1024 ) )
            $this->touch();
        else
            $meta = array_merge( $meta, $this->decode( $data ) );
        foreach( $meta as $key => $value )
            $this->{$key} = $value;
    public function content ( $precision = null ) {
        $files = array();
        if ( isset( $this->info['files'] ) && is_array( $this->info['files'] ) )
            foreach ( $this->info['files'] as $file )
                $files[self::path( $file['path'], $this->info['name'] )] = $precision ?
                    self::format( $file['length'], $precision ) :
                    $file['length'];
        elseif ( isset( $this->info['name'] ) )
                $files[$this->info['name']] = $precision ?
                    self::format( $this->info['length'], $precision ) :
                    $this->info['length'];
        return $files;
    }
    public function save ( $filename = null ) {
        return file_put_contents( is_null( $filename ) ? $this->info['name'] . '.torrent' : $filename, $this->encode( $this ) );
    }
static public function file_get_contents ( $file, $timeout = self::timeout, $offset = null, $length = null ) {
        if ( is_file( $file ) || ini_get( 'allow_url_fopen' ) ) {
            $context = ! is_file( $file ) && $timeout ? 
                stream_context_create( array( 'http' => array( 'timeout' => $timeout ) ) ) : 
                null;
            return ! is_null( $offset ) ? $length ?
                @file_get_contents( $file, false, $context, $offset, $length ) : 
                @file_get_contents( $file, false, $context, $offset ) : 
                @file_get_contents( $file, false, $context );
        } elseif ( ! function_exists( 'curl_init' ) )
            return self::set_error( new Exception( 'Install CURL or enable "allow_url_fopen"' ) );
        $handle = curl_init( $file );
        if ( $timeout )
            curl_setopt( $handle, CURLOPT_TIMEOUT, $timeout );
        if ( $offset || $length )
            curl_setopt( $handle, CURLOPT_RANGE, $offset . '-' . ( $length ? $offset + $length -1 : null ) );
        curl_setopt( $handle, CURLOPT_RETURNTRANSFER, 1 );
        $content = curl_exec( $handle );
        $size = curl_getinfo( $handle, CURLINFO_CONTENT_LENGTH_DOWNLOAD );
        curl_close( $handle );
        return ( $offset && $size == -1 ) || ( $length && $length != $size ) ? $length ?
            substr( $content, $offset, $length) :
            substr( $content, $offset) :
            $content;
public function errors() {
    return empty( self::$errors ) ?
        false :
        self::$errors;
}

} 
```

# c# - 如何在队列中搜索字节 并提取数据包？

> ID：11220621
> 
> 赞同：4
> 
> 时间：2012-06-27T06:33:43.693
> 
> 标签：c#, list, serial-port

我正在通过 COM 端口接收数据包。每个数据包以 {0xFF, 0xFF} 开始，以 {0xFE, OxFE} 结束。所有接收到的字节都排入队列，`Queue<byte>`并且在每次`void port_DataReceived(object sender, SerialDataReceivedEventArgs e)`我处理该队列之后。如果数据包中出现任何 0xFF 或 0xFE，则设备在其后添加 0x00。

1.  如何提取每个数据包？
2.  如何删除每个包含头字节的数据包内不必要的 0x00？

对于第一个问题，我有：

```
void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    byte[] data = new byte[port.BytesToRead];
    try
    {
        port.Read(data, 0, data.Length);    
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.Message);
    }
    data.ToList().ForEach(newByte => receivedData.Enqueue(newByte));
    processData();
}

private void processData()
{
    // Determine if we have a "packet" in the queue
    if (Enumerable.SequenceEqual(receivedData.Take(2), new List<byte> { 0xFF, 0xFF }))
    {
        // Beginning of new packet in the front of queue is ready!
        if (Enumerable.SequenceEqual(receivedData.Skip(Math.Max(0, receivedData.Count() - 2)).Take(2), new List<byte> { 0xFE, 0xFE }))
        {
            List<byte> tempPacket = new List<byte>();
            // Whole packet in the queue
            while(receivedData.Count > 0)
                tempPacket.Add(receivedData.Dequeue());
            tempPacket.TrimExcess();
            Packet pack = new Packet(tempPacket, PacketOrigin.Serial);
        }
    }
} 
```

我正在尝试删除到目前为止可以在内部找到的任何 0xFE 和 0xFF 之后的所有 0x00`Queue<byte>`我想出了：

```
List<byte> unconvertedPacket = new List<byte> { 0xFF, OxFF, 0x00, 0x00,0x4D, 0xFA 0xFE, 0x00, 0x01, 0x00, 0x03, 0xFE, 0xFE}
int index = 0;
while (index != null)
{
    unconvertedPacket.RemoveAt(index + 1);
    index = unconvertedPacket.IndexOf(0xFE);
}
while (index != null)
{
    unconvertedPacket.RemoveAt(index + 1);
    index = unconvertedPacket.IndexOf(0xFF);
} 
```

有没有人可能有任何其他解决方案/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:37:08.010

尝试以下方法：

在 DataReceived 事件处理程序中，继续读取传入数据并将其附加到缓冲区 (byte[])。

首先，您需要在接收数据的缓冲区中找到开始标记（{0xFF, 0xFF}）。您需要确定缓冲区内此标记的索引。

一旦你有了开始索引，你需要继续将传入的数据附加到缓冲区并检查结束标记（0xFE，0xFE）是否已经到达。捕获缓冲区内结束标记的索引。

一旦你有了开始和结束索引，你就可以提取它们之间的数据包。没关系在它之后添加的额外 0x00 字节。您知道开始和结束标记的索引及其长度 (2)。只需提取它们之间的字节数组。

您需要创建适合此目的的搜索算法。针和干草堆都是字节数组（byte[]）。为此，您可以使用[Boyer-Moore 字符串搜索算法。](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

这是 Boyer-Moore 算法的简单 C# 实现，它只实现[了 bad character rule](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm#The_Bad_Character_Rule)。如果您还想实施[良好的后缀规则](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm#The_Good_Suffix_Rule)，请阅读 Wikipedia 。

该算法通常用于字符串，但我对其进行了修改以使用字节数组。使用 IP 摄像机在本地对此进行了测试，以提取接收到的 JPEG 图像。

查看 Wikipedia 文章以了解有关它的更多信息。它包含一个完整的 Java 实现，您可以轻松地将其转换为 C#。

```
public class BoyerMoore
{
    public static int IndexOf(byte[] needle, byte[] haystack)
    {
        if (needle == null || needle.Length == 0)
            return -1;

        int[] charTable = CreateCharTable(needle);
        for (int i = needle.Length - 1, j; i < haystack.Length;)
        {
            for (j = needle.Length - 1; needle[j] == haystack[i]; i--, j--)
            {
                if (j == 0)
                    return i;
            }
            i += charTable[haystack[i]];
        }
        return -1;
    }

    private static int[] CreateCharTable(byte[] needle)
    {
        const int ALPHABET_SIZE = 256;
        var table = new int[ALPHABET_SIZE];
        for (int i = 0; i < table.Length; i++)
        {
            table[i] = needle.Length;
        }
        for (int i = 0; i < needle.Length - 1; i++)
        {
            table[needle[i]] = needle.Length - 1 - i;
        }
        return table;
    }
} 
```

示例用法：

```
var haystack = new byte[] 
  {0xFF, 0xFF, 0x00, 0x00, 0x4D, 0xFA, 0xFE, 0x00, 0x01, 0x00, 0x03, 0xFE, 0xFE};

var startIndexOf = BoyerMoore.IndexOf(new byte[] {0xFF, 0xFF}, haystack);
var endIndexOf = BoyerMoore.IndexOf(new byte[] {0xFE, 0xFE}, haystack);

var packet = new byte[endIndexOf - 2 - startIndexOf];
for (int i = startIndexOf + 2, j = 0; i < endIndexOf - startIndexOf; i++, j++)
{
    packet[j] = haystack[i];
} 
```

瞧，在这个例子中，数据包字节数组包含 9 个字节，并且只包含开始和结束标记之间的字节。例如，您现在可以触发事件并将数据包作为事件 arg 传递。

**备注**：从 COM 端口接收数据是一个连续的事件。你需要继续监控它。继续附加接收到的数据并继续检查开始和索引标记，提取包......等等。注意你的缓冲区不会溢出。您需要在那里实施一些内务管理。

希望能帮助到你。查看MJPEGStream 的[AForge](http://code.google.com/p/aforge/)实现，以[获取](http://code.google.com/p/aforge/source/browse/trunk/Sources/Video/MJPEGStream.cs)连续读取传入数据的示例。

回顾一下：

1.  声明一个实例变量来存储接收到的数据（例如_buffer = new byte[4096]）。
2.  将传入数据附加到 DataReceived 事件处理程序中的缓冲区。
3.  搜索开始标记。如果找到，请记住实例变量中的起始索引。
4.  如果您已经知道开始标记的位置，则搜索结束标记的索引。
5.  当您找到结束标记时，提取数据包并触发事件。将数据包用作事件的 EventArgs 的一部分。
6.  洗涤，冲洗，重复。

您需要进行一些内务处理以确保缓冲区不会溢出（> 4096 字节）。例如，一旦您找到一个数据包，您就可以清理缓冲区，直到最后收到的结束标记。

# tomcat - 当 Tomcat（嵌入式）服务器变慢并最终变得无响应时，最常见的原因是什么

> ID：11220623
> 
> 赞同：0
> 
> 时间：2012-06-27T06:33:47.373
> 
> 标签：tomcat, io, webserver, load-balancing

我正在检查一个相当大的服务器集群。有 15 台服务器运行 ERP 实例。各种实例往往有特定用途，还有 2 个使用 apache 和 mod_jk 托管的高流量网站，用于静态内容。所有十几个服务器都使用一个数据库。我正在寻找合适的高可用性、负载平衡、复制解决方案。几天来，我一直在关注系统管理员，他似乎所做的只是在最终用户抱怨速度慢或无响应时重新启动服务器。

事实上，一些最终用户发送电子邮件说，请重新启动服务器。

我是一名软件工程师，但我的客户要求我现在至少离开应用程序本身，并尝试通过下面的层来提高性能，容器/应用服务器，io，网络，我想的硬件。

无论如何，任何人都可以告诉我为什么在高使用率下会出现减速以及为什么重新启动会有所帮助，必须有一种方法可以在需要重新启动或最终用户有理由抱怨之前实现重新启动的结果。

我意识到这可能是一个愚蠢的问题，我觉得我应该知道。它可能与 IO 和套接字以及使用它们的线程有关。但我需要更多的洞察力。随着我获得开发经验，我已经接近零，我想是应用程序的最低级别，然后是网络堆栈，然后是硬件。我从来没有想过在创建 Web 应用程序上下文并将其添加到可嵌入的 tomcat 的位置下会发生什么。

一些背景知识，Tomcat 5 嵌入式，以及 Apache Geronimo。我知道这个版本的应用程序很旧，当它诞生的项目仍然存在时，它还没有升级。它有缓存问题和线程处理问题，在后来的添加中都得到了改进，但现在升级不是一个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:33:55.523

Tomcat 中的原因几乎总是内存不足。

# shared-memory - NTP 共享内存驱动结构

> ID：11220627
> 
> 赞同：2
> 
> 时间：2012-06-27T06:33:56.563
> 
> 标签：shared-memory, ntp

我想使用共享内存驱动程序将时间从 GPS 接收器推送到 NTP（注 1） - 主机操作系统是 Linux，使用 NTP 4.2.6p5。根据[文档](http://www.eecis.udel.edu/~mills/ntp/html/drivers/driver28.html)，我需要在共享内存中填充以下结构：

```
struct shmTime {
  int    mode; /* 0 - if valid set
            *       use values,
            *       clear valid
            * 1 - if valid set
            *       if count before and after read of
            *       values is equal,
            *         use values
            *       clear valid
            */
  int    count;                  /* See documentation for "mode" on the site */
  time_t clockTimeStampSec;      /* external clock */
  int    clockTimeStampUSec;     /* external clock */
  time_t receiveTimeStampSec;    /* internal clock, when external value was received */
  int    receiveTimeStampUSec;   /* internal clock, when external value was received */
  int    leap;                   /* ??? */
  int    precision;              /* Precision of the timestamp, in 2^precision seconds */
  int    nsamples;               /* Set by NTPD - do not populate */
  int    valid;                  /* Shared memory is valid */
  int    dummy[10];
}; 
```

缺少的主要字段是“时间戳”和“飞跃”的精确定义。我认为时间戳是 UTC 时间的 Unix 时间，但是如何调整闰秒，以及它如何与“闰”字段交互？使用[shmpps.c](http://time.qnan.org/#driver-shm)等接口的典型示例并不能真正回答问题。

（注 1：在这个项目中，我们正在处理我们自己的 GPS 解决方案和基于原始观测数据的时间，因此不使用 NMEA 或其他 GPS 协议。PPS 通过 GPIO 线提供给我们，我们正在使用 ATOM 驱动程序通过 linuxpps 捕获）

# android - 如何在 Google App Engine Cloud SQL 中存储 MySQL 数据库？

> ID：11220628
> 
> 赞同：-2
> 
> 时间：2012-06-27T06:33:59.987
> 
> 标签：android, google-app-engine, google-cloud-sql

我在我的大学里做一个 Android 项目。我有一个 MySql 数据库，我需要将此数据库从我的 Android 应用程序访问移动到 Google Cloud Sql。我怎样才能做到这一点？

我的数据库中只有 3 个表。谁能告诉我一步一步的程序来处理这个。[我从谷歌应用引擎文档](https://developers.google.com/cloud-sql/)中看到了一些东西。我无法理解。

我正在使用 servlet。

我需要任何人的指导来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:03:55.747

您的问题过于宽泛，但以下是您需要遵循的步骤：

1.  创建 Cloud SQL 帐号
2.  将数据和方案导入其中（Cloud SQL 支持导入）
3.  创建 AppEngine 应用程序
4.  允许 AppEngine 应用 ID 访问 Cloud SQL
5.  创建一个 android 可以访问的应用程序，它与您的云 sql 对话

# c# - 获取两个数组的匹配数

> ID：11220632
> 
> 赞同：0
> 
> 时间：2012-06-27T06:34:19.050
> 
> 标签：c#, asp.net, .net, linq, linq-to-objects

我有 2 个数组。

```
String[] arrFirst={"a","b","c","d","e"};
String[] arrSecond={"a","b","f","d","g"};
String[] arrThird={"a","f","g","h","e"}; 
```

我想要像`arrFirst`和这样`arrSecond`的结果，结果是`3`

对于`arrFirst`和`arrThird`，结果是`2`

我发现的所有代码都在比较两个数组并返回它们是否相同。

但我想要的是匹配多少。

我可以做循环方式。

但我认为这将花费太多时间，我想知道是否有更快的方法。

谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T06:37:46.617

您可以使用[相交](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)方法。

```
 String[] arrFirst={"a","b","c","d","e"};
    String[] arrSecond={"a","b","f","d","g"};
    String[] arrThird={"a","f","g","h","e"};

    arrFirst.Intersect(arrSecond).Count(); // 3
    arrFirst.Intersect(arrThird).Count(); //2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:37:56.230

```
arrFirst.Join(arrSecond,f=>f,s=>s,(f,s)=>f).count(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:38:48.720

```
arrFirst.Zip(arrSecond, (a, b) => a.Equals(b)).Count(a => a); 
```

# iphone - 如何自定义 UIAlertView

> ID：11220634
> 
> 赞同：0
> 
> 时间：2012-06-27T06:34:35.793
> 
> 标签：iphone, uialertview

我有`UIAlertView`一个`UIImage`和两个默认按钮`OK`和`Cancel`。

现在我想将`UIAlertView's`背景颜色自定义为白色，并且需要添加我的图像和两个默认按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:36:56.797

不要那样做，大量的定制`UIAlertView`可能会导致你的应用程序被拒绝，而且既然你定制了这么多，为什么不创建你自己的`UIView`子类，你可以随心所欲地定制它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:52:41.247

如果您的需求是定制的，为什么不编写一个新的视图控制器并以模态方式呈现它呢？您可以根据需要进行尽可能多的自定义，而不会因为您无视 iOS 人机界面指南而被 Apple 拒绝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:41:45.507

看看[TSAlertView](https://github.com/TomSwift/TSAlertView)是否有任何用处。

# hibernate - 休眠查询 - grails

> ID：11220640
> 
> 赞同：2
> 
> 时间：2012-06-27T06:35:18.623
> 
> 标签：hibernate, grails, executequery

我是grails的新手，我对hibernate并不熟悉。我遇到了一个关于在 grails 中使用*executeQuery进行休眠查询的问题。*我刚刚使这段代码类似于有问题的原始代码：

```
def nonMemberList = Group.executeQuery("select gp.name from Group gp where gp.status = 'CONFIRMED_MEMBER'")
def FemaleMemberList = Group.executeQuery(""" select sum(case when g.isMale = false and g.name not in(:isNotConfirmedMember) from Group g where :startDate <= g.dateCreated and g.dateCreated < :endDate""",
[isNotConfirmedMember: nonMemberList, startDate: startDate, endDate: endDate]) 
```

每当*nonMemberList*为空时就会发生错误，并且我发现当我使用*is not*语法时列表不应该为空。

我对休眠查询不是很熟悉，这就是为什么我有一个问题，我应该使用什么其他休眠查询，它的行为也像原始代码一样。感谢您分享您的知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:50:06.307

您是否尝试过使用标准？位于此处： http: [//grails.org/doc/latest/guide/GORM.html#criteria](http://grails.org/doc/latest/guide/GORM.html#criteria)

请先为 nonMemberList 尝试下面的代码，看看它是否产生了 null：

```
//non member list code
def cNonMember = Group.createCriteria()
def nonMemberList = cNonMember.list() {
    eq("name", "CONFIRMED_MEMBER")
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:44:04.053

好吧，在我看来，你所追求的是女性成员，如果你不需要单独的非成员列表，那么你可以使用类似的东西来获取女性列表；

```
def c = Group.createCriteria()
def females = c.list {
    le('startDate', startDate)
    lt('dateCreated', endDate)
    and {
       ne('status', 'CONFIRMED_MEMBER')
       eq('isMale', false)
    }
} 
```

您的示例中似乎也有一个不完整的预测，如果您只想要女性成员的数量或某些财产的总和，您应该能够将其添加到上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:59:39.417

我不确定 grails 语法，但我认为您可以尝试

```
select sum(case when g.isMale = false " + (nonMemberList == null ? "" : "and g.name not in(:isNotConfirmedMember)") + " from Group g where :startDate <= g.dateCreated and g.dateCreated < :endDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T13:41:59.617

```
def nonMemberList = Group.withCriteria {
    eq('status', 'CONFIRMED_MEMBER')
}.collect { it.name } 
```

# macos - pygame错误加载

> ID：11220643
> 
> 赞同：1
> 
> 时间：2012-06-27T06:35:28.910
> 
> 标签：macos, osx-lion, pygame

我不确定我做了什么。但是，当我导航到我的文件并调用其中包含 pygame 的 python 脚本时，我现在得到以下信息：

`$ python test.py 2012-06-27 14:21:06.547 Python[391:1507] Error loading /Library/Audio/Plug-Ins/HAL/SeratoVirtualAudioPlugIn.plugin/Contents/MacOS/SeratoVirtualAudioPlugIn: dlopen(/Library/Audio/Plug-Ins/HAL/SeratoVirtualAudioPlugIn.plugin/Contents/MacOS/SeratoVirtualAudioPlugIn, 262): no suitable image found. Did find: /Library/Audio/Plug-Ins/HAL/SeratoVirtualAudioPlugIn.plugin/Contents/MacOS/SeratoVirtualAudioPlugIn: mach-o, but wrong architecture 2012-06-27 14:21:06.548 Python[391:1507] Cannot find function pointer New_SHP_PlugIn for factory 834FC054-C1CC-11D6-BD01-00039315CD46 in CFBundle/CFPlugIn 0x7f9ca1974d30 </Library/Audio/Plug-Ins/HAL/SeratoVirtualAudioPlugIn.plugin> (bundle, not loaded)`

Serato（一个 dj 程序）刚刚发布了我安装的更新。在大多数情况下，它似乎可以工作，但为什么我的 python 脚本现在引用了这个？我该如何修复它，删除 serato 不起作用！！！

# facebook-graph-api - facebook c# SDK v6.0.20 中不存在 FacebookOAthClient

> ID：11220645
> 
> 赞同：0
> 
> 时间：2012-06-27T06:35:41.720
> 
> 标签：facebook-graph-api, facebook-c#-sdk, facebook-authentication, facebook-access-token

我安装了 facebook c# sdk v 6.0.20。

```
`Facebook.FacebookOAthClient cc = new Facebook.FacebookOAthClient();` 
```

但是当我尝试创建 FacebookOAthClient 类型的对象时，它会显示错误

> 名称空间“Facebook”中不存在类型或名称空间名称“FacebookOAthClient”（您是否缺少程序集引用？）

所以请帮助我。有没有其他方法可以用代码交换访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:04:05.903

你忘了一个'u'：FacebookOAuthClient cc = new FacebookOAuthClient();

# java - Swing getHeight() 值从 0 变为 16

> ID：11220646
> 
> 赞同：0
> 
> 时间：2012-06-27T06:35:49.840
> 
> 标签：java, swing, jlabel, jtextfield, layout-manager

我正在尝试在 Swing 中制作一个带有“用户”标签、用户名文本字段和“登录”按钮的框。这是我的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;
import java.util.*;

public class Engine
{
    JFrame frame;
    public void go()
    {
        setUpGui();
        userNameScreen();
    }
    public void setUpGui()
    {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
    public void userNameScreen()
    {
        JPanel background = new JPanel();
            frame.getContentPane().add(background);
        JLabel labelUserName = new JLabel("User:");
            background.add(labelUserName);
            System.out.println(labelUserName.getHeight()); // 0
        JTextField textFieldUserName = new JTextField();
            System.out.println(labelUserName.getHeight()); // 16
            textFieldUserName.setPreferredSize(new Dimension(110,labelUserName.getHeight()));
            background.add(textFieldUserName);
        JButton buttonSignIn = new JButton("Sign In");
            background.add(buttonSignIn);
        /*
        background.add(labelUserName);
        background.add(textFieldUserName);
        background.add(buttonSignIn);
        frame.getContentPane().add(background);
        */
        frame.pack();
    }
} 
```

我的驱动程序类只是创建了一个引擎实例，然后运行 ​​go() 方法。
我读到 Swing 组件在添加之前没有高度/宽度属性（因为这是由布局管理器决定它们有多少空间），所以在方法 userNameScreen() 中添加所有组件是有道理的最后*（在此处注释掉）使 textFieldUserName 变量没有高度。
但是，您可以在相同的方法 userNameScreen() 中看到，我已经做到了

```
System.out.println(labelUserName.getHeight()); 
```

两次。第一次是0 第二次是16 不明白为什么第一次注册为0 ' 似乎不会在第一个 println() 和下一个之间改变它的高度。那么为什么第一个中的值是 0，为什么之后几乎立即变为 16？

*我应该注意，当我说添加最后注释掉的所有内容时，它还包括删除/注释掉代码中其他地方完成的所有相同命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:29:23.987

这是未在 EDT 上创建/修改 Swing 组件的副作用。现在 EDT 正忙于在另一个线程中添加组件时进行布局。

您的主要方法应如下所示：

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new Engine().go();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:31:21.777

我不确定为什么会发生这种情况，但可能是因为组件的添加可能在后台线程上，并且可能在调用下一个语句并且它在几毫秒后更新并在您第二次调用它时出现.

# php - 代码清晰

> ID：11220647
> 
> 赞同：0
> 
> 时间：2012-06-27T06:35:55.773
> 
> 标签：php, mongodb

只是寻找一些代码的清晰度。

我在看一个控制器类，它有一个名为 $grid 的受保护变量，里面有一个 __construct 函数来连接到 MongoDB，之后有这个代码：

```
$this->grid = $mongo->selectDB($database)->getGridFS(); 
```

进一步在另一个类和方法的脚本中我有代码

```
 foreach ($this->grid->find() as $file) { 
```

我是否认为 foreach 正在使用第一个定义的 $this->grid 是 $monmgo->selectDB？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:32:07.010

值得一读[PHP5 对象和类](http://au2.php.net/manual/en/language.oop5.basic.php)，因为`__construct()`,`$this`和方法调用链是 PHP 中基本的面向对象实现概念。

PHP 方法调用在您的代码示例中被链接，这意味着一个方法的结果被传递到下一个方法（从左到右）。

```
 $this->grid = $mongo->selectDB($database)->getGridFS(); 
```

所以这段代码执行为：

*   [$mongo->selectDB($database)](http://php.net/manual/en/class.mongodb.php) .. 选择具有名称的数据库 ($database); 假设 $mongo 已成功连接[Mongo 对象](http://php.net/manual/en/class.mongodb.php)）
*   现在，在选定的数据库上调用[getGridFS()](http://php.net/manual/en/mongodb.getgridfs.php)
*   最后，将最后一次方法调用的结果 ( `getGridFS()`) 赋值给变量`$this->grid`

`$this->grid`最终会成为一个新的[MongoGridFS](http://www.php.net/manual/en/class.mongogridfs.php)对象（基于`getGridFS()`.

`foreach`正在迭代 MongoGridFS 对象[`find()`方法](http://www.php.net/manual/en/mongogridfs.find.php)的结果，该方法将是[MongoGridFSCursor](http://www.php.net/manual/en/class.mongogridfscursor.php)。

# windows-phone-7 - 无法使用 PHP 将数据插入远程 mySQL 数据库

> ID：11220648
> 
> 赞同：0
> 
> 时间：2012-06-27T06:35:59.037
> 
> 标签：windows-phone-7

我正在尝试使用 WP7 应用程序将数据插入远程 MySQL 数据库，但没有插入值，PHP 文件完美运行，因为我的查询正在使用 JAVA（Android）插入数据库。由于我是 C# 新手，所以我面临着这个挑战。

代码是这样的： -

```
public MainPage()     
{
    InitializeComponent();         
    textBox1.Text = "http://www.abc.com/xyz/user_master.php?Email=abc@xyz.com&Username=abc&Password=xyzz&Phone=98989";
    client = new WebClient(); 
    client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
} 
```

> ```
>  void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e) 
>     { 
>         if (e.Error == null) 
>         { 
>             textBlock2.Text = e.Result; 
>         } 
>     }
> 
>     private void button1_Click(object sender, RoutedEventArgs e)
>     {
> 
>         client.DownloadStringAsync(new Uri(textBox1.Text));
>     } 
> ```

请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:49:14.077

问题是您使用的是发送 GET 的“DownloadStringAsync”，因此您的 POST 变量未填写 PHP，您必须使用“UploadStringAsync”。

现在我不能告诉你身体的样子……直到现在我一直在使用 JSON。如果你能把它贴在这里让我知道你什么时候得到它会很好；）

**更新**

啊，慢点=（你能不能还是把你的消息体的样子贴出来！

# vba - Word 2003 vba 无法更改书签字体

> ID：11220660
> 
> 赞同：1
> 
> 时间：2012-06-27T06:36:45.877
> 
> 标签：vba, ms-word

以下代码不起作用

```
objDoc.Bookmarks("SomeBookMark").Range.Font.Bold = True
objDoc.Bookmarks("SomeBookMark").Range.Text = GetSomeText()
objDoc.Bookmarks("SomeBookMark").Range.Font.Bold = True 
```

当我运行代码时，GetSomeText() 检索到的文本仍然具有默认字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:24:26.913

你为什么不只是设置书签的样式？我过去搜索过这个，当时也没有找到合适的解决方案。但是，由于书签代表文本模板中的固定字段，因此通常不应该轻易更改格式。

很抱歉将其放在回复字段中，但我找不到“评论”按钮：-s

# php - 在php中访问内部数组

> ID：11220663
> 
> 赞同：1
> 
> 时间：2012-06-27T06:37:04.050
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
outerarray{
            "id": "20154", 
            "from": {
              "name": "xyz", 
              "id": "10004"
            }} 
```

现在**我如何访问元素名称**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:39:10.777

它是**JSON**，首先使用解码`json_decode()`然后访问：

```
$arr = json_decode($yourjson, true);
echo $arr['from']['name']; // xyz 
```

或者

```
$arr = json_decode($yourjson);
echo $arr->from->name; // xyz 
```

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:38:52.640

你必须使用`json_decode()`：

```
$tab = json_decode($outerarray);
echo $tab['id']; //display 20154 
```

# permissions - SQL Server 2008 R2 中的架构权限

> ID：11220664
> 
> 赞同：1
> 
> 时间：2012-06-27T06:37:07.113
> 
> 标签：permissions, schema, sql-server-2008-r2

我有 2 个架构和 3 个通用用户来访问我的数据库中的数据

```
Schema : EMSMaster and EMSTransactional
Users : BN_USER, MBN_USER and SUPER_ADMIN 
```

我的权限应该是

```
BN_USER  - select on EMSMaster 
       select, insert and update on EMSTransactional

MBN_USER - select, insert, update on EMSMaster
       select, insert, update and Delete on EMSTransactional 
```

有没有办法在 Schema 上授予这种权限？请建议我一些实现这种权限的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:44:09.340

```
GRANT SELECT ON schema :: EMSMaster TO BN_USER 
GRANT SELECT, INSERT, UPDATE ON schema :: EMSTransactional TO BN_USER 

GRANT SELECT, INSERT, UPDATE ON schema :: EMSMaster TO MBN_USER 
GRANT SELECT, INSERT, UPDATE, DELETE ON schema :: EMSTransactional TO MBN_USER 
```

# javascript - 捕获错误时停止执行javascript

> ID：11220665
> 
> 赞同：4
> 
> 时间：2012-06-27T06:37:19.737
> 
> 标签：javascript

我需要一个在捕获错误时停止执行 javascript 的函数。例如如下：

```
function AA()
{
  try{
    executeScript();
  }catch(e){
    //stop execute javascript
  }
}

function executeScript()
{
   throw 'error';
}
function BB()
{
  //some script
}
AA();
BB(); //don't execute when error happening 
```

有人知道怎么做吗？感谢帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:39:47.783

我认为如果您使用 return 它应该是可能的:)

```
function AA()
{
  try{
  }catch(e){
    //stop execute javascript
    return;
  }
  BB(); //don't execute when error happening
}

function BB()
{
  //some script
} 
```

**像这样返回**只会返回**undefined**。您可以返回更具体的内容，例如字符串或其他任何内容，以便在您获得此早期返回时能够有方便的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:47:54.593

有两种方式，

1.  添加返回语句

    ```
     function AA()
     {
       try{
       }catch(e){
         return;
       }
       BB();  
     }

     function BB(){   
     } 
    ```

2.  如果你想在 catch 调用之前从代码中返回，你可以添加 throw

    ```
    function AA() {           
        try{
           javascript_abort();
         }catch(e){
            return;
         }
         BB();  
        }

     function BB(){   
             }

         function javascript_abort(){
            throw new Error('This is not an error. This is just to abort javascript');
         } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:43:09.157

如果您希望 AA 中的代码冗余地执行，您也可以使用 setTimeout。

```
function AA()
{
  try{

  }catch(e){
    return;
  }
  BB(); //don't execute when error happening
  setTimeout("AA()",500);
}

function BB()
{
  //some script
} 
```

# javascript - 如何阻止/阻止视频下载插件或程序？

> ID：11220667
> 
> 赞同：2
> 
> 时间：2012-06-27T06:37:22.857
> 
> 标签：javascript, html, video

我有一个使用 HTML5 视频播放器的视频网站。用户付费加入该网站。但是下载管理器（在 mozilla 中）或真正的播放器下载管理器可以从服务器下载我们的视频。

我想阻止或阻止这些应用程序。如何阻止程序运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:45:05.987

HTML5 规范中没有 DRM（[数字版权管理](http://en.wikipedia.org/wiki/Digital_rights_management)），因此您无法对 HTML5 视频进行操作。

尝试将 DRM 添加到 HTML 5（[加密媒体扩展](http://dvcs.w3.org/hg/html-media/raw-file/tip/encrypted-media/encrypted-media.html)）

> 随着科技公司放弃 HTML5 的专有 Flash 和 Silverlight 媒体播放器，不可避免地有人会尝试将 DRM 注入原始规范。
> 
> 微软、谷歌和 Netflix 就是这样的“人”，他们向万维网联盟 (W3C) 提交了对 HTML5 的修改建议，以用于“加密媒体扩展”。

[http://www.theregister.co.uk/2012/02/23/microsoft_google_netflix_html5_drm_infection/](http://www.theregister.co.uk/2012/02/23/microsoft_google_netflix_html5_drm_infection/)

但是，如果确实通过了该提案，此类扩展现在不可用，并且在一段时间内也不会可用。

如果您需要 DRM，则需要使用支持它的视频技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:18:44.503

即使使用 DRM，您也无法 - 无论您发送给客户端（密钥/内容/任何内容），客户端都可以在需要再次解码流时简单地保存和重播。唯一可以可靠**延迟**解码的解决方案是一些硬件解决方案，但据我了解，您将使用常规的 HTTP 和浏览器。

你的问题是合法的，应该通过法律手段解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:22:50.487

将他们的唯一用户 ID 覆盖到视频上，因此如果他们确实捕获了它，那么可以采取法律行动，因为您可以证明是他们下载了它。除此之外，你真的无能为力...

# jquery - 无法在 chrome 中使用 javascript 调用引导模式窗口（在 firefox 中工作）

> ID：11220670
> 
> 赞同：14
> 
> 时间：2012-06-27T06:37:45.220
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我已经包含了来自 twitter-bootstrap 的示例代码，用于模态窗口。如果我点击按钮，它会打开模态窗口。但是，如果我尝试通过 javascript 显示模式窗口，则会收到以下错误 -

```
$("#myModal").modal("show")

TypeError: Object [object Object] has no method 'modal' 
```

此错误仅出现在 chrome 中并在 Firefox 中有效。

下面是 HTML。“project-add-modal”是模态框的 id。导航到 Project -> Add 以查看模态按钮。-

```
<html class=" js flexbox canvas canvastext no-webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms no-csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="en"><!--<![endif]--><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Project Management</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css">

      <link rel="stylesheet" href="css/docs.css">

    <script src="//www.google-analytics.com/ga.js"></script><script src="js/libs/modernizr-2.5.3.min.js"></script>
</head>
<body class="">
<div id="header"><div id="top-navbar">
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <div class="nav-collapse">
              <ul data-navlinks="left" class="nav">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects<b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#" id="add-new-project" bind="click: pm.client.templating.hello">
                      Add
                    </a></li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin<b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Invite Users</a></li>
                  </ul>
                </li>
              </ul>
              <ul class="nav pull-right">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Username<b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Logout</a></li>
                  </ul>
                </li>
              </ul>
            </div><!-- /.nav-collapse -->
          </div>
        </div><!-- /navbar-inner -->
      </div>
    </div></div>
<div class="container cljs-main"><div id="project-add-section">
<a class="btn" data-toggle="modal" href="#project-add-modal">Launch Modal</a>

      <div class="modal hide fade" id="project-add-modal" style="display: none; ">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">×</button>
          <h3>Add New Project</h3>
        </div>
        <div class="modal-body">
          <form class="form-horizontal">
            <fieldset>
              <div class="control-group">
                <label class="control-label" for="input01">Project Name</label>
                <div class="controls">
                  <input type="text" class="input-xlarge" id="project-name">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="textarea">Project Description</label>
                <div class="controls">
                  <textarea class="input-xlarge" id="project-desc" rows="3"></textarea>
                </div>
              </div>
              <label class="control-label">Invite People to
              collaborate on your project</label>
              <div class="control-group">
                <label class="control-label" for="prependedInput"></label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">@</span><input class="span2" id="prependedInput" size="16" type="text">
                  </div>
                  <p class="help-block">Here's some help text</p>
                </div>
              </div>
            </fieldset>
        </form></div>
        <div class="modal-footer">
          <a href="#" class="btn" data-dismiss="modal">Close</a>
          <a href="#" class="btn btn-primary">Save changes</a>
        </div>
      </div>

    </div></div>
<footer>

</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>

<!-- scripts concatenated and minified via ant build script-->
<script src="js/bootstrap.min.js"></script>
<script src="js/plugins.js"></script>
<script src="js/script.js"></script>
<script src="cljs/client.js"></script><script type="text/javascript" src="deps.js"></script>
<script>$(function() {cljsbinding.boot()})</script>
<!-- end scripts-->

<script>
    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<iframe name="xpcpeer7X7y" id="xpcpeer7X7y" style="display: none; " src="http://localhost:9000/repl?xpc=%7B%22cn%22%3A%22PmCIncJdVC%22%2C%22tp%22%3Anull%7D"></iframe></body></html> 
```

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-27T07:17:19.490

我注意到在以下情况下可能会出现此问题：

*   JQuery 已加载两次。
*   单独的 twitter 引导插件加载在 bootstrap.js 之上
*   .js 文件的包含顺序错误
*   错误的类型被发送到函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:43:46.747

确保你在做

```
$('#project-add-modal').modal("show") 
```

并不是

```
$("#myModal").modal("show") 
```

（因为上面的代码中不存在 myModal ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T16:47:04.207

FWW 我遇到了类似的问题，这是因为我使用 JQuery 1.8.x 和 Bootrap 2.0.x。升级到 Bootstrap 2.1.x 节省了一天。

# uitableview - 为 UITableView 使用多个自定义 TableViewCell

> ID：11220676
> 
> 赞同：0
> 
> 时间：2012-06-27T06:38:05.540
> 
> 标签：uitableview

我有 4 到 5 个部分，`UITableView`每个部分我想使用不同的 custom `UITableViewCell`。

在委托功能下分配单元格

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath 
```

但是如何为表格的不同部分分配不同的单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:41:32.870

您可以使用索引路径来识别不同的部分和不同部分的不同实现-。

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {

    if(indexPath.section == 0) {
         // Have custom implementation for first section
    }
    else if(indexPath.section == 1) {
         // Have custom implementation for second section and similarly others
    }
} 
```

# java - 检查文件是否存在于特定目录中

> ID：11220678
> 
> 赞同：23
> 
> 时间：2012-06-27T06:38:08.870
> 
> 标签：java, directory, file-exists

我正在尝试检查给定目录中的特定文件。我不想要代码，但我想修复我拥有的代码。这个问题的唯一区别是我查找扩展名为`.MOD`.

我已经准备好代码：-

```
public static int checkExists(String directory, String file) {
    File dir = new File(directory);
    File[] dir_contents = dir.listFiles();
    String temp = file + ".MOD";
    boolean check = new File(temp).exists();
    System.out.println("Check"+check);  // -->always says false

    for(int i = 0; i<dir_contents.length;i++) {
        if(dir_contents[i].getName() == (file + ".MOD"))
            return Constants.FILE_EXISTS;
    }

    return Constants.FILE_DOES_NOT_EXIST;
} 
```

但由于某些原因，它不起作用。我不明白为什么，有人可以在这里找到任何错误吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-27T06:47:45.853

您希望 temp.MOD 文件位于当前目录（运行应用程序的目录）中，还是希望它位于“目录”文件夹中？在后一种情况下，尝试以这种方式创建文件：

```
boolean check = new File(directory, temp).exists(); 
```

还要检查文件权限，因为它也会因权限错误而失败。正如 Spaeth 提到的，区分大小写也可能是问题的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T06:50:36.323

这就是你有错误的地方。

```
String temp = file + ".MOD"; 
```

和

```
if(dir_contents[i].getName() == (file + ".MOD")) 
```

该代码`boolean check = new File(temp).exists();`将检查当前目录中的文件，而不是所需目录中的文件。

```
 String dirName="/home/demo";
    File dir = new File(dirName);
    File[] dir_contents = dir.listFiles();
    String temp = dirName+"/"+"README" + ".MOD";
    boolean check = new File(temp).exists();
    System.out.println("Check" + check); // -->always says false

    for (int i = 0; i < dir_contents.length; i++) {
        if (dir_contents[i].getName().equals("README" + ".MOD"))
            return Constants.FILE_EXISTS;
            }

    return Constants.FILE_DOES_NOT_EXIST; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T07:11:02.347

试试这个..............

```
File f = new File("./file_name");
if(f.exists()){
    System.out.println("success");
}
else{
    System.out.println("fail");
} 
```

# java - 如何将 src.zip 文件转换为 jar 文件？

> ID：11220680
> 
> 赞同：3
> 
> 时间：2012-06-27T06:38:22.963
> 
> 标签：java

请任何人给我这个建议。我有 Xerces-J-source.zip 文件，我需要转换为 Xerces-J-source.jar 文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T06:40:46.203

通常，如果您的 ZIP 包含类文件（而不是源文件）：

只需重命名文件，a`jar`是一个`zip`文件。但是，如果您的目标是使用命令启动一个类，`java -jar myProject.jar`您应该创建一个[MANIFEST](http://en.wikipedia.org/wiki/Manifest_file)文件，其中包含要在类路径中使用的主类和库。

因此，在您的情况下，由于您获得了源代码（Java 文件），因此您必须编译类并创建 JAR。`Export as JAR`如果您使用Eclipse，它有一个特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:47:19.760

这没有任何意义。如果您需要 Xerces-J，最好从[网站](http://www.apache.org/dist/xerces/j/)下载 jars 。

如果你想从源代码中获取jar，你需要编译它，但什么时候可以下载它是没有必要的。

# php - 在 PHP 中将字符串设置为指定的长度

> ID：11220683
> 
> 赞同：8
> 
> 时间：2012-06-27T06:38:40.753
> 
> 标签：php, string

我需要一个具有指定长度的字符串，并用字母替换多余的字符。

例如

我的原始字符串是：“JOHNDOESMITH”。长度最多只能为 25 个字符。我需要我的字符串变成“XXXXXXXXXXXXXJOHNDOESMITH”（原始字符串中的 13 个 X 和 12 个字符）。

有人请告诉我如何实现这一目标？有这个字符串函数吗？我已经绞尽脑汁很久了，还是找不到解决办法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-27T06:41:02.860

你可以[`str_pad()`](http://php.net/manual/en/function.str-pad.php)用来做...

```
echo str_pad($str, 25, 'X', STR_PAD_LEFT); 
```

[键盘](http://codepad.org/PtirfoYp)。

你可以[`str_repeat()`](http://php.net/manual/en/function.str-repeat.php)用来做...

```
echo str_repeat('X', max(0, 25 - strlen($str))) . $str; 
```

[键盘](http://codepad.org/iQB0X201)。

> 长度最多只能为 25 个字符。

您始终可以运行`substr($str, 0, 25)`将字符串截断为前 25 个字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T06:52:12.533

试用`sprintf()`功能

```
 $format= "%'X25s";
 echo sprintf($format, "JOHNDOESMITH"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T06:47:13.107

使用 str_pad 函数：

```
$a="JOHNDOESMITH";   
$b=str_pad($a,25,'X',STR_PAD_LEFT);
print_r($b); 
```

# java - 加载 SDK 时出现 Eclipse 错误

> ID：11220684
> 
> 赞同：1
> 
> 时间：2012-06-27T06:38:40.667
> 
> 标签：java, android, eclipse, eclipse-plugin

我有一个 Eclipse 问题，我无法运行任何模拟器或我开发的任何程序，在我打开 Eclipse 后会发生此错误

```
[2012-06-26 19:48:52 - Dex Loader] Failed to load C:\Users\Ahmed\android-sdk-windows\android-sdk-windows\\platform-tools\lib\dx.jar 
```

# php - 让使用移动浏览器的用户通过短信发送他们想要的产品代码

> ID：11220686
> 
> 赞同：11
> 
> 时间：2012-06-27T06:38:42.163
> 
> 标签：php, android, sms, symbian, mobile-browser

我将使用一种方法让使用移动浏览器的用户通过短信发送他们想要的产品代码。目前我使用类似的东西：

```
<a href = 'sms:7xxxxxx?body=product-number23xx'>Buy product-number23xx</a>

<a href = 'sms:7xxxxxx?body=product-number24xx'>Buy product-number24xx</a>

<a href = 'sms:7xxxxxx?body=product-number56xx'>Buy product-number56xx</a> 
```

它适用于 Symbian 和 Java 平台，但不能在所有移动平台上正常运行，如 Darwin、Windows CE、Mobile OS。任何机构都可以帮我说出其他平台的示例代码吗？

我也看到了这个[问题](https://stackoverflow.com/questions/848575/sending-an-sms-from-mobile-browser)，我试过了`mailto:`，`tell:`但第一个打开电子邮件客户端，第二个只是将号码添加到该移动联系人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:48:49.530

您需要为 Android 用户更新链接。

即，如果客户端浏览器是 android，那么您需要如下配置链接。
`<a href="sms:+19725551212?body=hello%20there">SMS Me</a>`

参考：[Android 上的 SMS URL](https://stackoverflow.com/questions/4787905/sms-url-on-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:48:31.777

iOS 短信 URL 方案 (sms://) 不支持嵌入正文！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T09:02:34.630

试试“smsto:”，一些旧的浏览器支持它。我还相信有关特定设备的详细信息可通过 WURFL (https://db.scientiamobile.com) 获得

# google-app-engine - 如何执行从 PullQueues 租用的任务？

> ID：11220693
> 
> 赞同：0
> 
> 时间：2012-06-27T06:39:07.537
> 
> 标签：google-app-engine

我正在使用拉队列，并从我的一个后端的队列中租用任务。

问题是在租用任务后，任务不会在那里执行，我想我需要迭代列表 List 并执行我的每个任务

我不知道如何使用我得到的 TaskHandle 参考执行或调用运行方法

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:41:37.230

拉取队列中的任务不会“执行”，您应该租用它们（拉取它们）并在您从中拉取它们的上下文中使用它们（在您的情况下是后端）。
完成任务后，您需要删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:41:03.177

但是我们设法执行了任务，我们只需要以传统的 java 方式将它们反序列化为适当的类，它就可以工作了，谢谢 :)

```
 ObjectInputStream ois = new ObjectInputStream(
                new ByteArrayInputStream(taskHandle.getPayload()));
QueueTask d;

d = (QueueTask) ois.readObject(); 
```

就是这样:-)

# html - html5 音频无法在其“结束”事件中再次播放

> ID：11220696
> 
> 赞同：0
> 
> 时间：2012-06-27T06:39:20.530
> 
> 标签：html, audio

我的页面中有一个音频标签，我将一个事件句柄绑定到该`ended`事件：

```
 $('#audio').bind('ended', function() {
        console.log('ended');//I can see this
        $('#audio')[0].play();// but it could not play again
    }); 
```

起初我玩它：

```
$('#audio')[0].play() 
```

问题是，可以玩了，在播放结束时，我也可以看到控制台信息，但不能再次播放，请问如何解决这个问题？

# android - 计算语音强度时应用程序崩溃

> ID：11220700
> 
> 赞同：1
> 
> 时间：2012-06-27T06:39:37.597
> 
> 标签：android, voice-recognition, audiorecord

在我的应用程序中，我正在计算记录用户命令时的声音强度。

Onclick 图标我开始录音并在用户再次按下它时停止它。在两者之间，我在图标上显示语音命令的强度。

我正在使用的代码如下所示。

```
//Calling this method when the user clicks on the button
public void startRec() {
    mStatus = true;
    System.out.println("Starting");
    timer = new Timer(); 
    timer.scheduleAtFixedRate(new TimerTask() 
        { 
            public void run() 
            { 
                detectVoice();  // display the data
            } 
        }, delay, period); 
    //audioRecorder.startRecording();
}
//Calling this method when the user clicks on the button again.
public void stopRec() {
    mStatus = false;
    System.out.println("Stoping");
    if (audioRecorder != null)
    {
        if (isRecording())
        {
            cancelRecording();
        }
        try {
            audioRecorder.stop();
            audioRecorder.release();
            timer.cancel();
            timer.purge();
        } catch(IllegalStateException e) {
            e.printStackTrace();
        } catch (RuntimeException e) {
            e.printStackTrace();
        }
    }
}

//This is the method for calculating the voice intensity
private boolean detectVoice() {

    // Get the minimum buffer size required for the successful creation of an AudioRecord object. 
    int bufferSizeInBytes = 512;/*AudioRecord.getMinBufferSize( RECORDER_SAMPLERATE,
            RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING);*/ 

    // Initialize Audio Recorder.
    audioRecorder = new AudioRecord( MediaRecorder.AudioSource.DEFAULT,
            RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING,8192);

    short[] audioBuffer     =  new short[bufferSizeInBytes];
    //short[] buf = new short[bufferSizeInBytes];
    int numberOfReadBytes   = 0; 
    boolean recording       = false;
    float tempFloatBuffer[] = new float[3];
    int tempIndex           = 0;
    continueRecording = true;

    // Start Recording.
    audioRecorder.startRecording();

    // While data come from microphone. 
    while(isRecording()) {
        float totalAbsValue = 0.0f;
        short sample        = 0; 
        numberOfReadBytes = audioRecorder.read( audioBuffer, 0, audioBuffer.length );

        // Analyze Sound.
        for( int i=0; i<numberOfReadBytes; i+=2 ) 
        {
            sample = (short)( (audioBuffer[i]) | audioBuffer[i + 1]);
            if(sample!=0) {
                totalAbsValue += Math.abs( sample ) / (numberOfReadBytes);
            }
        }

        // Analyze temp buffer.
        tempFloatBuffer[tempIndex%3] = totalAbsValue;
        float temp                   = 0.0f;
        for( int i=0; i<3; ++i )
            temp += tempFloatBuffer[i];
        System.out.println("Temp :"+temp);          
        if( (temp >= 0 && temp <= 350) && recording == true ) {
            Log.d("TAG", "Voice Detected.");
            voiceDetected = true;
            //recording = false;
            break;
        }
    } 
    stopRecording();
    return voiceDetected;
}

public void stopRecording() {
    Log.d(TAG, "done");
    if (audioRecorder != null)
    {
        if (isRecording())
        {
            Log.d(TAG, "Recording is true");
            cancelRecording();
        }
        try {
            audioRecorder.stop();
            audioRecorder.release();

        } catch(IllegalStateException e) {
            e.printStackTrace();
        } catch (RuntimeException e) {
            e.printStackTrace();
        }
    }
}

public boolean isRecording() {
    return continueRecording;
}

public void cancelRecording() {
    Log.d("TAG", "CancelRecording");
    continueRecording = false;
} 
```

但是，如果我再次启动语音检测，那么我会遇到异常并且应用程序崩溃了。下面给出了例外情况

```
01-01 00:56:48.710: ERROR/AudioRecord(1519): Could not get audio input for record source 1
01-01 00:56:48.710: ERROR/AudioRecord-JNI(1519): Error creating AudioRecord instance: initialization check failed.
01-01 00:56:48.710: ERROR/AudioRecord-Java(1519): [ android.media.AudioRecord ] Error code -20 when initializing native AudioRecord object.
01-01 00:56:48.710: WARN/dalvikvm(1519): threadid=15: thread exiting with uncaught exception (group=0x40b3e1f8)
01-01 00:56:48.710: ERROR/CameraBaseActivity(1519): uncaughtException.
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519):     at android.media.AudioRecord.startRecording(AudioRecord.java:516)
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519):     at com.android.VoiceIntensity.detectVoice(VoiceIntensity.java:142)
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519):     at com.android.VoiceIntensity.access$000(VoiceIntensity.java:12)
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519):     at com.android.VoiceIntensity$1.run(VoiceIntensity.java:96)
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519):     at java.util.Timer$TimerImpl.run(Timer.java:284)
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519): java.lang.IllegalStateException: startRecording() called on an uninitialized AudioRecord.
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519): uncaughtException.
01-01 00:56:48.843: ERROR/CameraBaseActivity(1519): uncaughtException : other thread. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:47:53.133

也许您`AudioRecord`不喜欢您提供的初始化设置。

所以替换

```
audioRecorder = new AudioRecord( MediaRecorder.AudioSource.DEFAULT,
            RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING,8192); 
```

经过

```
private static int[] mSampleRates = new int[] { 8000, 11025, 22050, 44100 };
public AudioRecord findAudioRecord() {
    for (int rate : mSampleRates) {
        for (short audioFormat : new short[] { AudioFormat.ENCODING_PCM_8BIT, AudioFormat.ENCODING_PCM_16BIT }) {
            for (short channelConfig : new short[] { AudioFormat.CHANNEL_IN_MONO, AudioFormat.CHANNEL_IN_STEREO }) {
                try {
                    Log.d(C.TAG, "Attempting rate " + rate + "Hz, bits: " + audioFormat + ", channel: "
                            + channelConfig);
                    int bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

                    if (bufferSize != AudioRecord.ERROR_BAD_VALUE) {
                        // check if we can instantiate and have a success
                        AudioRecord recorder = new AudioRecord(AudioSource.DEFAULT, rate, channelConfig, audioFormat, bufferSize);

                        if (recorder.getState() == AudioRecord.STATE_INITIALIZED)
                            return recorder;
                    }
                } catch (Exception e) {
                    Log.e(C.TAG, rate + "Exception, keep trying.",e);
                }
            }
        }
    }
    return null;
}

AudioRecord recorder = findAudioRecord(); 
```

# c# - 访问 Silverlight Control 模板项代码隐藏

> ID：11220701
> 
> 赞同：1
> 
> 时间：2012-06-27T06:39:46.847
> 
> 标签：c#, silverlight, layout, silverlight-4.0, controltemplates

我在页面布局中有一个控件模板，如下所示。

```
<Grid x:Name="LayoutRoot">
        <Grid.Resources>
        <ControlTemplate x:Key="myTemplate" TargetType="esri:MapTip">
                <Border CornerRadius="10" Background="#DDFFEEEE" BorderThickness="4" BorderBrush="#99FF0000">
                    <StackPanel Background="#DDFFFFFF">

                      <sdk:TabControl Height="180" Margin="5"  Name="tabControl1"  Width="300">      
                               <sdk:TabItem Header="Info" Name="infoTab">

                               <TextBlock x:Name="cityInfoTxt" Tag="{Binding [City_ID]}"/>    

                               </sdk:TabItem>
                        </sdk:TabControl>
                    </StackPanel>
                </Border>
            </ControlTemplate> 
```

在后面的代码中，我如何访问 ??

我试过这个，

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    var te = this.LayoutRoot.Resources["myTemplate"] as ControlTemplate;

} 
```

但无法访问选项卡控件中的文本块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:36:49.373

在后面的代码上覆盖方法 OnAplyTemplate() 并尝试找到您的组件。

```
 public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        var myTextBlock = GetTemplateChild("cityInfoTxt") as TextBlock;
    } 
```

希望能帮助到你

# ruby-on-rails - 在 Virtuablbox 中的小型 Linux 发行版上开发 Ruby Rails 应用程序

> ID：11220707
> 
> 赞同：1
> 
> 时间：2012-06-27T06:40:39.080
> 
> 标签：ruby-on-rails, linux, ubuntu, virtualbox

为了进行开发，我在我的 Macbook Pro（i7、4gb ram）上的 VirtualBox 中安装了 Ubuntu Desktop 12.04 LTS。令人震惊的是，它不是很活泼（快速/响应）。我想知道哪些 Linux 发行版是小型/轻型但可用于 Virtualbox 中的 Rails 开发。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:49:20.387

我在开发时使用arch linux。它的设计不是以“易于使用”为优先考虑的，但它可以根据您的需要进行定制。我喜欢arch linux方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:41:39.230

我使用安装在虚拟磁盘上的 Lubuntu（轻量版 ubuntu）做了同样的事情。此外，我正在使用便携式版本的 VirtualBox 将所有东西都放在 U 盘上。

我从 U 盘运行 Lubuntu 并开始开发一些 Rails 应用程序，但 OI 对用户体验来说并不是那么好，所以我将带有 lubuntu 的虚拟磁盘与 virtualbox 文件夹一起复制到了硬盘上。有了这个设置，它工作得很好！

此外，我正在使用来宾添加来将共享文件夹保留在 USB 棒上，以便在机器之间共享项目。

希望对您的体验有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:46:47.983

在 OSX 上开发 RoR 应用程序不需要 Linux VM。

尝试 google 如何在本机 OSX 上开发 RoR 应用程序。

# android - 如何将surfaceview复制到位图

> ID：11220711
> 
> 赞同：1
> 
> 时间：2012-06-27T06:41:05.627
> 
> 标签：android, bitmap

我想将surfaceview复制到位图，但只是得到黑色（ff000000）

```
 //this.surView is my SurfaceView 
    Bitmap bitmap =Bitmap.createBitmap(this.surView.getWidth(), this.surView.getHeight(),      Bitmap.Config.RGB_565); 
      //this.can is my canvas
    this.can = this.surHolder.lockCanvas(new  Rect(0,0,this.surView.getWidth(), this.surView.getHeight()));
     this.can.setBitmap(bitmap);
     this.surView.draw(this.can);
     this.surHolder.unlockCanvasAndPost(can);
       // bitmap = Bitmap.createBitmap(bitmap);
                  //copy bitmap from (srcx,srcy) to (x,y) 
        bitmap = Bitmap.createBitmap(bitmap, srcx, srcy, cx, cy);

        this.ondrawImage(bitmap, x, y); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-01T04:57:50.557

使用 `surfaceview.getDrawingCache()`会得到Bitmap。

# asp.net - jqgrid每次编辑调用ajax

> ID：11220712
> 
> 赞同：1
> 
> 时间：2012-06-27T06:41:09.497
> 
> 标签：asp.net, jqgrid

我正在尝试使用 jqgrid 编辑表单，但我不明白为什么每次选择一行并单击编辑图标时 jqgrid 不调用 asmx web 方法（jqgrid 只是第一次调用 ajax）

这是代码：

```
function Grid() {  
   var ret = Array();

   var grid = jQuery("#grid");

var hideLoading = function () {
    $("#lui_" + grid).hide();
    $("#load_" + grid).hide();
}

var strSearch = "";
var strField = "";
var strOper = "";

//
//  handler: si occupa di creare il contenuto del menu a tendina (form jqGrid)
//
var buildOptions = function (dataList) {
    var response = dataList;
    var option = "";

    if (response && response.length) {
        for (var i = 0, l = response.length; i < l; i++) {

        if (response[i]["selectedvalue"] == "on")
            option += '<option role="option" selected="selected" value="' + response[i]["Codice"] + '">' + response[i]["Descrizione"] + '</option>';
        else
            option += '<option role="option" value="' + response[i]["Codice"] + '">' + response[i]["Descrizione"] + '</option>';
        }
    }

    return option;
};

grid.jqGrid({
    // setup custom parameter names to pass to server
    prmNames: {
        search: "isSearch",
        nd: null,
        rows: "numRows",
        page: "page",
        sort: "sortField",
        order: "sortOrder"
    },
    // add by default to avoid webmethod parameter conflicts
    postData: {
        searchString: '',
        searchField: '',
        searchOper: ''
    },
    // setup ajax call to webmethod
    datatype: function (postdata) {
        $.ajax({
        url: '<%# ResolveUrl("~/Service/Domain/ServiceRoom.asmx/GetRoomRateDiscount") %>',
        type: "POST",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(postdata),
        dataType: "json",
        success: function (data, st) {
            if (data.d == "KO") {
            grid.GridUnload();

            jAlert("La ricerca non ha restituito alcun risultato", "Book2Guest");

            return false;
            }

            if (st == "success") {
            var grid = $("#grid")[0];
            grid.addJSONData(JSON.parse(data.d));
            ret = JSON.parse(data.d);
            }
        },
        error: function (xhr, textStatus, errorThrown) {
            jAlert("Si è verificato un errore: " + textStatus + " " + errorThrown + " -- " + $.parseJSON(xhr.statusText), "Book2Guest");
        }
        });
    },
    // this is what jqGrid is looking for in json callback
    jsonReader: {
        root: "rows",
        page: "page",
        total: "totalpages",
        records: "totalrecords",
        cell: "cell",
        id: "id",
        userdata: "userdata",
        repeatitems: true
    },
    ajaxSelectOptions: {
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        cache: false,
        data: {
            rowId: function () {
                if (JSON.stringify(grid.jqGrid('getRowData', grid.jqGrid('getGridParam', 'selrow'))['Codice']) == undefined)
                    return "";

                return JSON.stringify(grid.jqGrid('getRowData', grid.jqGrid('getGridParam', 'selrow'))['Codice']);
            }
        }
    },
    colNames: ['ID', 'Rate'],
    colModel: [
        { name: 'ID', index: 'ID', width: 10, align: "center", search: false, sorttype: 'int', searchoptions: { sopt: ['eq', 'ne', 'cn']} },
        {
        name: 'TariffaCodiceOfferta',
        index: 'TariffaCodiceOfferta',
        width: 50,
        hidden: true,
        formatter: 'select',
        editable: true,
        edittype: 'select',
        editrules: { edithidden: true }, //, required: true },
        editoptions: {
            multiselect: true,
            dataUrl: '<%# ResolveUrl("~/Service/Domain/ServiceRoom.asmx/GetRoomRateListByRowId") %>',
            buildSelect: function (data) {
                var response = $.parseJSON(data.d);

                var option = buildOptions(response);
                var s = '<select>';
                s += option;

                return s + "</select>";
            },
            dataInit: function (elem) {
                setTimeout(function () {
                    $(elem).multiselect({ selectedList: 10 });
                }, 50);
            },
            multiple: true
        }
        },
      ],
rowNum: 10,
rowList: [10, 20, 30],
height: 'auto',
pager: '#gridpager',
viewrecords: true,
shrinkToFit: false,
loadComplete: function () {
    hideLoading();
},
loadError: function () {
    hideLoading();
},
editurl: '<%# ResolveUrl("~/Service/Domain/ServiceRoom.asmx/SaveRoomDiscount") %>',
sortname: "ID",
sortorder: "asc",
caption: "Rate list",
onSelectRow: function (id, status) {},
ondblClickRow: function (rowid) {
    grid.jqGrid('editGridRow', rowid,
    {
    width: 450,
    height: 450,
    closeOnEscape: true,
    addCaption: "Add Rate",
    editCaption: "Edit Rate",
    bSubmit: "Salva",
    bCancel: "Annulla",
    bClose: "Chiudi",
    bYes: "Si",
    bNo: "No",
    bExit: "Annulla",
    editData: { 
        "codice": function () {
            var selectedRow = grid.getGridParam("selrow");
            var rowData = grid.getRowData(selectedRow);
            return rowData["Codice"];
        }
    },
    viewPagerButtons: false,
    closeAfterEdit: true,
    reloadAfterSubmit: true,
    beforeShowForm: function (form) {
        var dlgDiv = $("#editmod" + grid[0].id);
        var parentDiv = dlgDiv.parent(); // div#gbox_list
        var dlgWidth = dlgDiv.width();
        var parentWidth = parentDiv.width();
        var dlgHeight = dlgDiv.height();
        var parentHeight = parentDiv.height();

        // Grabbed jQuery for grabbing offsets from here:
        //http://stackoverflow.com/questions/3170902/select-text-and-then-calculate-its-distance-from-top-with-javascript
        var parentTop = parentDiv.offset().top;
        var parentLeft = parentDiv.offset().left;

        dlgDiv[0].style.top = Math.round(parentTop + (parentHeight - dlgHeight) / 2) + "px";
        dlgDiv[0].style.left = Math.round(parentLeft + (parentWidth - dlgWidth) / 2) + "px";
    },
    onClose: function (response, postdata) {
    }
    });

    return;
},
gridComplete: function () {
    if (grid.getGridParam('records') == 0) // are there any records?
    DisplayEmptyText(true);
    else
    DisplayEmptyText(false);
},
emptyDataText: 'There are no records. '
})
grid.setGridWidth(900, true);
grid.jqGrid('navGrid', '#gridpager',
{
    edit: true,
    view: false,
    add: false,
    del: true,
    search: false
},
//prmEdit
{
    width: 450,
    height: 300,
    closeOnEscape: true,
    addCaption: "Aggiungi Offerta",
    editCaption: "Modifica Offerta",
    bSubmit: "Salva",
    bCancel: "Annulla",
    bClose: "Chiudi",
    saveData: "Sono state apportate delle modifiche, sei sicuro di voler continuare?",
    bYes: "Si",
    bNo: "No",
    bExit: "Annulla",
    editData: { 
        "Codice": function () {
            var selectedRow = grid.getGridParam("selrow");
            var rowData = grid.getRowData(selectedRow);
            return rowData["Codice"];
        } 
    },
    viewPagerButtons: false,
    closeAfterEdit: true,
    reloadAfterSubmit: true,
    beforeShowForm: function (form) {
        var dlgDiv = $("#editmod" + grid[0].id);
        var parentDiv = dlgDiv.parent(); // div#gbox_list
        var dlgWidth = dlgDiv.width();
        var parentWidth = parentDiv.width();
        var dlgHeight = dlgDiv.height();
        var parentHeight = parentDiv.height();

        // Grabbed jQuery for grabbing offsets from here:
        //http://stackoverflow.com/questions/3170902/select-text-and-then-calculate-its-distance-from-top-with-javascript
        var parentTop = parentDiv.offset().top;
        var parentLeft = parentDiv.offset().left;

        dlgDiv[0].style.top = Math.round(parentTop + (parentHeight - dlgHeight) / 2) + "px";
        dlgDiv[0].style.left = Math.round(parentLeft + (parentWidth - dlgWidth) / 2) + "px";
    },
    onClose: function (response, postdata) {}
}
//prmSearch, 
//prmView
);
return ret; 
```

}

**更新**：要解决这个问题，你们必须在 jqGrid 的编辑部分插入“recreateForm：true”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:32:41.680

您当前的代码中没有`'Codice'`列`colModel`，但您尝试从该列中获取数据。即使原始服务器响应具有该`Codice`属性，只有在您添加具有相同名称的附加隐藏列时才会保存该属性。

抱歉，但为了告诉信任，我建议您重写您使用的整个代码。as函数的使用`datatype`不好。取而代之的是，您可以使用`jsonReader`. `JSON.parse(data.d)`have内部`$.ajax`的调用`dataType: "json"`表明您在服务器端的 web 方法中犯了一个更重要的错误。它表明您将返回的对象手动转换为，`String`而不是从 web 方法返回*对象。*WebService*自动*将对象转换为 JSON 。由于对 JSON 的手动约定，返回的数据将被*两次*转换为 JSON。只是因为服务器代码中的错误，您必须使用`JSON.parse(data.d)`并且不能`jsonReader`像[这里](https://stackoverflow.com/a/5160522/315935)描述的那样使用。

# annotations - 我无法使用纬度和经度在地图视图中添加注释

> ID：11220714
> 
> 赞同：0
> 
> 时间：2012-06-27T06:41:10.357
> 
> 标签：annotations, android-mapview

我已经从一个 xml 文件中读取了纬度和经度，我想用它们添加一些注释。但除了用户位置外，没有一个被添加。mapview.annotations 的计数始终为空。这是我的代码：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    if (newLocation != nil) {
        self.myLocation = newLocation;
    }

    mapView.region = MKCoordinateRegionMake(self.myLocation.coordinate, MKCoordinateSpanMake(0.005f, 0.005f));
    mapView.zoomEnabled = YES;
    //mapView.showsUserLocation = YES;
    mapView.centerCoordinate = self.myLocation.coordinate;

    MKPointAnnotation *userLocation = [[MKPointAnnotation alloc] init];
    userLocation.coordinate = myLocation.coordinate;
    userLocation.title = @"my position";
    userLocation.subtitle = @"my position now";
    [mapView removeAnnotations:mapView.annotations];

    [mapView addAnnotation:userLocation];
    [userLocation release];

    if ([self.positionArray count] < 5) {
        NSString *dataPath = [[NSBundle mainBundle] pathForResource:@"position" ofType:@"xml"];
        NSData *positionData = [[NSData alloc] initWithContentsOfFile:dataPath];

        NSXMLParser *parser = [[NSXMLParser alloc] initWithData:positionData];

        parser.delegate = self;

        [parser parse];
    }

    if (self.myLocation != nil) {
        [self.manager stopUpdatingLocation];
    }

} 
```

这是 MapInfo 类：

```
 #import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>
@interface MapInfo : NSObject<MKAnnotation>
{
    NSString *subtitle;
    NSString *title;
    CLLocationCoordinate2D coordinate;
}

@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithCoordinate:(CLLocationCoordinate2D)location;
- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate;

@end 
```

然后这里是委托方法

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    static NSString *AnnotationIdentifier = @"AnnotationIdentifer";
    MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
    if ([annotation isKindOfClass:[MapInfo class]]) {
        if (pinView == nil) {
            pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
        }
        pinView.pinColor = MKPinAnnotationColorRed;
        pinView.canShowCallout = YES;
        pinView.animatesDrop = NO;
    }else if([annotation isKindOfClass:[MKPointAnnotation class]])
    {
        if (pinView == nil) {
            pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
        }
        pinView.pinColor = MKPinAnnotationColorPurple;
        pinView.canShowCallout = YES;
        pinView.animatesDrop = NO;
    }
    return pinView;
} 
```

我真的不知道为什么只能添加用户位置，请高人帮帮我！！困扰了我好几天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:13:52.337

看起来您可能忘记设置 mapView 的委托了。

# bash - Bash 的命令行参数验证库

> ID：11220715
> 
> 赞同：5
> 
> 时间：2012-06-27T06:41:12.830
> 
> 标签：bash, shell

我正在寻找一个可重用的代码片段，它对 bash 进行命令行参数验证。

理想情况下类似于 Apache Commons CLI 提供的功能：

Commons CLI 支持不同类型的选项：

*   类似 POSIX 的选项（即 tar -zxvf foo.tar.gz）
*   GNU 喜欢长选项（即 du --human-readable --max-depth=1）
*   附加价值的空头期权（即 gcc -O2 foo.c）
*   带有单个连字符的长选项（即 ant -projecthelp）
*   ...

它会自动为程序生成一条“使用”消息，如下所示：

```
usage: ls
 -A,--almost-all          do not list implied . and ..
 -a,--all                 do not hide entries starting with .
 -B,--ignore-backups      do not list implied entried ending with ~
 -b,--escape              print octal escapes for nongraphic characters
    --block-size <SIZE>   use SIZE-byte blocks
 -c                       with -lt: sort by, and show, ctime (time of last
                          modification of file status information) with
                          -l:show ctime and sort by name otherwise: sort
                          by ctime
 -C                       list entries by columns 
```

我会在我的 Bash 脚本的开头包含这个代码片段，并在脚本中重复使用它。

一定有这样的事情。我不相信我们都在编写达到这种效果或类似效果的代码：

```
#!/bin/bash

NUMBER_OF_REQUIRED_COMMAND_LINE_ARGUMENTS=3

number_of_supplied_command_line_arguments=$#

function show_command_usage() {
  echo usage:
  (...)
}

if (( number_of_supplied_command_line_arguments < NUMBER_OF_REQUIRED_COMMAND_LINE_ARGUMENTS )); then
  show_command_usage
  exit
fi

... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T09:45:32.500

这是我使用的解决方案（在网上某处找到它，可能是这里本身，不记得了）。请注意，GNU getopt( `/usr/bin/getopt`) 确实支持使用 option 的单破折号长选项（`ant -projecthelp`样式）`-a`，但是我没有使用它，因此示例中没有显示。

此代码解析 3 个选项：`--host value`or `-h value`, `--port value`or`-p value`和`--table value`or `-t value`。如果未设置所需参数，则对其进行测试

```
# Get and parse options using /usr/bin/getopt
OPTIONS=$(getopt -o h:p:t: --long host:,port:,table: -n "$0" -- "$@")
# Note the quotes around `$OPTIONS': they are essential for handling spaces in 
# option values!
eval set -- "$OPTIONS"

while true ; do
    case "$1" in
            -h|--host) HOST=$2 ; shift 2 ;;
            -t|--table)TABLE=$2 ; shift 2 ;;
            -p|--port)
                    case "$2" in
                            "") PORT=1313; shift 2 ;;
                            *)  PORT=$2; shift 2 ;;
                    esac;;
            --) shift ; break ;;
            *) echo "Internal error!" ; exit 1 ;;
    esac
done
if [[ -z "$HOST" ]] || [[-z "$TABLE" ]] || [[ -z "$PORT" ]] ; then
    usage()
    exit
if 
```

使用`getopts`shell 内置的替代实现（这只支持小选项）：

```
while getopts ":h:p:t:" option; do
    case "$option" in
         h) HOST=$OPTARG ;;
         p) PORT=$OPTARG ;;
         t) TABLE=$OPTARG ;;
        *) usage(); exit 1 ;;
    esac
done
if [[ -z "$HOST" ]] || [[-z "$TABLE" ]] || [[ -z "$PORT" ]] ; then
    usage()
    exit
if

shift $((OPTIND - 1)) 
```

进一步阅读[GNU getopt](http://linux.die.net/man/1/getopt)和[getopts bash builtin](http://linux.die.net/man/1/bash)

# linux-device-driver - Linux内核设备驱动程序编程

> ID：11220720
> 
> 赞同：35
> 
> 时间：2012-06-27T06:41:40.037
> 
> 标签：linux-device-driver

我想学习linux内核设备驱动程序编程。所以任何人都可以在这里发布好的教程页面或链接。我是 linux 内核环境的新手。我已经搜索过它，但我不知道如何开始以及阅读哪一个以便于理解基础知识。提前致谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-27T07:14:30.017

取决于你现在的技能。如果您**真的**是 Linux 新手，也许您应该从[Advanced Linux Programming](http://www.advancedlinuxprogramming.com/alp-folder/)的用户空间系统编程开始。通过这个免费资源，您将深入了解 Unix 系统调用和其他概念，例如信号、进程/线程等。如果您在内核方面进行开发，这是必须的（了解用户空间 API），因为内核的角色是以安全的方式为用户提供服务。

另外一本经常被引用的书是[Linux Device Drivers, Third Edition](http://lwn.net/Kernel/LDD3/) (LDD3)。请记住，此版本是在 Linux 2.6.10 时编写的，从那时起有些事情发生了变化。[本文](http://lwn.net/Articles/2.6-kernel-api/)展示了随着 2.6 的演变（直到 2.6.31，所以不是很有用）的差异。我应该提到[martinezjavier/ldd3](https://github.com/martinezjavier/ldd3/)，其中包含为更新的内核更新的 LDD3 示例驱动程序（感谢*42n4*指出这一点）。

另一本不常被引用的有趣书籍是[Essential Linux Device Drivers](http://elinuxdd.com/)。您不会找到此版本的免费版本，但它仍然具有一种有趣的方法。我喜欢这个的是它涵盖了许多不同的设备类型，并且是最新的 2.6.24，比 LDD 好一点。

最后，一本关于内核本身（不是专门针对驱动程序）的好书是《[Understanding the Linux Kernel, 3rd Edition》](http://voinici.ceata.org/~tct/resurse/utlk.pdf)。这涵盖了深入的内核设施和内部机制。它是 2.6.11 的最新版本。

至于在线教程，我发现[Pete's Blog 上的这篇文章](http://pete.akeo.ie/2011/08/writing-linux-device-driver-for-kernels.html)是一个很好的例子。它不仅展示了如何创建字符设备（最简单的内核驱动程序类型，即您应该开始使用的驱动程序类型），它以一种易于理解的方式使用现代 Linux 内核特性，包括：

*   udev的使用
*   使用内核数据结构 (FIFO)
*   使用内核同步（互斥锁）
*   使用带有自定义属性的 Sysfs
*   模块选项`insmod`

另外：它针对的是 Linux 3.0，这意味着与其他资源相比，它是最新的。

您可能还喜欢[这篇](http://godandme.wordpress.com/2011/04/05/how-to-make-a-sysfs-entry/)关于如何手动创建 Sysfs 条目的帖子，尽管如果您不需要额外的节点或属性，Linux 设备模型将负责将您的设备注册为 Sysfs 条目。

**编辑**：我应该补充一点，学习真正的 Linux 设备驱动程序编程的最佳方法是查看实际的驱动程序。有成千上万的司机[`drivers`](http://lxr.free-electrons.com/source/drivers/)。开始阅读和理解简单的概念，`drivers/leds`你会看到这是多么有益。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-14T14:09:55.123

具有非常重要链接的站点： http: [//elinux.org/Device_drivers](http://elinux.org/Device_drivers)

带有真实示例的精彩教程（以使用我们自己的文件系统格式化的 usbpen 结尾 - 搜索作者的更多文章）：

1.  [http://www.linuxforu.com/tag/linux-device-drivers-series/](http://www.linuxforu.com/tag/linux-device-drivers-series/)
2.  [http://sysplay.in/index.php?pagefile=lfy_articles](http://sysplay.in/index.php?pagefile=lfy_articles)

移植到最新内核的著名 LDD3 书籍源代码： [https ://github.com/martinezjavier/ldd3/](https://github.com/martinezjavier/ldd3/)

视频：

1.  [https://www.youtube.com/playlist?list=PL16941B715F5507C5](https://www.youtube.com/playlist?list=PL16941B715F5507C5)

也许其他课程：

2.  [http://www.skilledup.com/courses?keyword=linux+kernel&price_filter=0..0](http://www.skilledup.com/courses?keyword=linux+kernel&price_filter=0..0)

一些例子：

1.  [http://www.staerk.de/thorsten/index.php/My_Tutorials/Writing_Linux_kernel_modules](http://www.staerk.de/thorsten/index.php/My_Tutorials/Writing_Linux_kernel_modules)
2.  [http://www.freesoftwaremagazine.com/articles/drivers_linux](http://www.freesoftwaremagazine.com/articles/drivers_linux)
3.  [http://techblog.aasisvinayak.com/kernel-module-programming-tutorial/](http://techblog.aasisvinayak.com/kernel-module-programming-tutorial/)
4.  [http://www.linuxforu.com/2009/05/a-voyage-to-the-kernel-day-11/](http://www.linuxforu.com/2009/05/a-voyage-to-the-kernel-day-11/)

书籍（未在此线程 LDD3 中提及）：

1.  [http://www.coopj.com/](http://www.coopj.com/)带有更新的源代码[http://www.coopj.com/LPD/](http://www.coopj.com/LPD/)

[内核黑客： http](http://kernelnewbies.org/KernelHacking) ://kernelnewbies.org/KernelHacking

linux内核的可视化图：http: [//www.makelinux.net/kernel_map/](http://www.makelinux.net/kernel_map/)

适合初学者的 Linux 和内核书籍：

1.  [http://www.kroah.com/lkn/](http://www.kroah.com/lkn/)
2.  [http://swift.siphos.be/linux_sea/](http://swift.siphos.be/linux_sea/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T20:09:45.390

您可能对新发布的[Linux 驱动程序模板](http://www.phoronix.com/scan.php?page=news_item&px=MTIyNzk)感兴趣。顾名思义，它提供了模板并演示了常用的 Linux 工具以快速入门。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T04:16:20.967

我知道这是延迟响应！

你可以选择任何一本书，这些都是上面推荐的非常棒的书。

但是你需要真正地实际工作。尝试尽可能多地参与内核。

大多数情况下，您需要查看内核源代码本身。

您可以在内核树下的文档文件夹中找到最有趣的文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T09:48:47.990

学习设备驱动程序编程最好的书是
[《LDD》](http://www.iitg.ernet.in/asahu/cs421/books/LDD3e.pdf)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-22T12:37:28.767

Professional Linux Kernel Architecture 也是一本不错的读物。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-05T15:11:41.213

最好的来源是 linux 手册页，但对于初学者来说理解它们有些关键，直接编程设备驱动程序不是一件容易的事。我建议您通过以下书籍了解指针和结构

基础 C 书籍 1\. 编程 C - Byron gottfried 2\. C 编程语言 - Dennis Ritchie

中级书籍 1\. 关于 C 的指针 Kenneth Reek 2\. 专家 C 编程深奥的秘密 - Linden

来到设备驱动程序我已经上传了 pdf 格式的内核源文档[https://drive.google.com/folderview?id=0B7iRyndFhHldR3hjOHpOZTdKTjA&usp=sharing](https://drive.google.com/folderview?id=0B7iRyndFhHldR3hjOHpOZTdKTjA&usp=sharing)您可以从此链接下载。

设备驱动基础（用户模式编程）

Linux 编程接口 - Michael Kerrisk 开始 Linux 编程 Wrox Publishers 设备驱动程序（内核开发） 1\. Linux 内核开发 - Robert Love 2\. Linux 内核内部 - m beck

设备驱动程序（驱动程序编程） 1\. Linux 设备驱动程序 - 第三版（可免费下载 2.6 内核） 2\. 基本 Linux 设备驱动程序 - Venkateswaran

有关基本驱动程序知识，请关注此站点[http://www.tldp.org/LDP/khg/HyperNews/get/devices/devices.html](http://www.tldp.org/LDP/khg/HyperNews/get/devices/devices.html)

我的经验是，在进行驱动程序编程之前，首先我们必须对 C 编程有充分的了解，主要是结构和指针，否则理解驱动程序编程会有点麻烦。

即将启动：-

1.  用户空间编程 gcc 基础使用 gcc 命令生成前处理、汇编程序和目标文件 使用不同的目标工具分析目标文件，linux 中的基本编程，线程（锁，同步技术），信号，进程（fork，exec），计时器（Posix ）。这将帮助您理解内核概念。

2.  内核编程 了解内核源代码树、不同分支及其重要性，使用 ctags 和 cscope 浏览内核源代码，这将有助于您进行内核源代码浏览。

3.  驱动程序编程首先学习不同的驱动类，char，block等，然后学习设备协议，传输和接收，产品手册是最好的参考资料。然后开始编写简单的字符驱动程序例如RTC（端口映射设备），IOAPIC（内存映射设备），然后转到USB，PCI，网络，I2C，SPI等，如果需要帮助可以找到框架内核源代码树中所有这些的代码。

# sql-server - 我的查询的性能

> ID：11220721
> 
> 赞同：0
> 
> 时间：2012-06-27T06:41:43.517
> 
> 标签：sql-server

我对 sql server 的行为有点困惑。

我有一个相当大的存储过程，它执行许多步骤。如果我这样开始：

```
Exec [MyStoredProcedure] @MyBoolean=0 
```

比直接在 management studio 中调用存储过程的内容需要更长的时间。我在stackoverflow上看到了一个答案，它可能来自参数，所以我添加了：

```
declare @IMyBoolean bit

select @IMyBoolean=@MyBoolean; 
```

之后用@IMyBoolean 做所有事情，但结果不是决定性的，它好一点但没那么多：

> sp : 4 分钟
> 
> sp带参数界面：3分钟
> 
> 直接sql 2分钟

有人对这种行为有什么解释吗？

这是[xmlplan](http://dl.free.fr/mJDQpxxBt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:03:26.530

对于计划中显示的每个查询批次，您都缺少一个影响超过 90% 的索引。

按照查询优化器的建议创建这些索引（右键单击索引详细信息 - 绿色文本 - 并选择缺失索引详细信息）。

然后发回新的结果。应该快得多，因为您的大多数表扫描都将变成索引查找。

如有必要，下一步将微调这些索引以涵盖更多查询。

# node.js - 在 windows 上安装 node-expat

> ID：11220728
> 
> 赞同：0
> 
> 时间：2012-06-27T06:42:38.853
> 
> 标签：node.js

我想在我的 nodejs 服务器上安装 node-expat。但我不能通过 npm install 来做到这一点。所以我只是将“astro-node-expat-v1.6.0-2-g1fa6c6b”文件夹复制粘贴到我的节点模块文件夹中。但我无法处理“node-expat.node”文件。有人可以对此有所了解吗？
如果有人有这个文件，请帮助在 github 中找到它，以便我可以将它们复制到我的文件夹中。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:21:34.583

TooTallNate 有一个 gyp 版本，*应该*可以在 Windows 上的 Node 0.8 上运行。但是，我无法在我的代码中引用它。你可以在那里找到我的帖子和输入。

# cruisecontrol.net - 在 Cruisecontrol 内运行 sahi

> ID：11220730
> 
> 赞同：0
> 
> 时间：2012-06-27T06:42:40.473
> 
> 标签：cruisecontrol.net, sahi

如何在 Cruisecontrol 中运行 sahi？我在这里有点困惑，因为运行 sahi 需要执行的一些步骤是选择我想用于测试的浏览器并按下`alt+double click`...对我有什么线索吗？上的示例`ccnet.config`将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:17:05.810

通过快速研究，我可以看到 Cruise Control 支持 ANT。您可以使用 ANT 目标调用 sahi 脚本。您无需打开浏览器并按 alt+双击，Sahi 也可以使用测试运行器从命令行运行脚本。有关详细信息，请查看：[http](http://sahi.co.in/w/Running+multiple+tests+in+batch+mode) ://sahi.co.in/w/Running+multiple+tests+in+batch+mode 。

我还没有看到 ccnet.config，但是如果您可以调用 ANT 目标，那么与 jenkins 的集成将为您提供重要的指示：[http ://sahi.co.in/w/integrate-with-jenkins](http://sahi.co.in/w/integrate-with-jenkins)

谢谢，维维克

# c++ - c++数组代码错误

> ID：11220731
> 
> 赞同：-3
> 
> 时间：2012-06-27T06:42:45.227
> 
> 标签：c++

代码不会运行，说“返回值”是错误的，它说 return `found[i]=letter`，并且`srand time`也显示错误。我不确定如何解决？也许放入`found[i]`并`main()`放入`return 1?`？并且不确定如何让其`srand`正常工作？

```
#include <iostream> 

using namespace std; 
void getarray(char [], int); 
void printa(char [],int ); 
void search(char [],int, char); 
void main() { 
    srand(time(0)); //1-declare char letter=' '; 
    char guess[7]; 
    char found[7]={letter}; 
    int res=0; 
    char answer='Y';
}
//2-init
getarray(guess,7); 
//3- processing 
printa(guess,7);
while(answer == 'Y')
{
    cout << "enter a letter";
    cin >>letter;
    search(guess,7,letter); 
    if (res != -1)
        printa(found,7);

    cout <<" do you want to continue(Y/N)?"<<endl;
    cin >>answer;
}

//printing
system("pause");
}
void getarray(char a[], int n)
{
    for(int i=0;i<n;i++)
        a[i]= 65 + rand()%26;
}
void printa(char a[], int n)
{
    for(int i=0;i<n;i++)
        cout << " the letter " << i+1 << " is "<<a[i]<<endl;
}
void search(char a[],int n, char key)
{
    for(int i=0;i<n;i++)
        if ( a[i]== key)
            return Found[i]=={letter}; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:38:36.713

似乎您有一个额外`}`的功能会过早地终止您的功能。

```
void main() {
   srand(time(0)); //1-declare char letter=' '; 
   char guess[7]; 
   char found[7]={letter}; 
   int res=0; 
   char answer='Y';
}   <--- This seems not correct

// 2-init
getarray(guess,7); 
```

然后，其余代码似乎在函数*之外*，这使编译器感到困惑。

# node.js - 使用 Node.js 更新 MongoDB 中的文档集合

> ID：11220738
> 
> 赞同：0
> 
> 时间：2012-06-27T06:43:48.540
> 
> 标签：node.js, mongodb, mongoose

我正在使用类似关注模型的 twitter，我的用户架构如下。

```
var UserSchema = new Schema({ 
    username: {type: String, match: /^[a-zA-Z0-9_]+$/, unique: true}, 
    email: { type: String, unique: true }, 
    password: String, 
    followings : [{ type: ObjectId, ref: 'User' }],
    followers : [{ type: ObjectId, ref: 'User' }] }); 
```

我只需要将用户的 ObjectId 存储在以下和关注者字段中。

我不确定如何插入和更新关注者和关注者集合。我尝试使用“更新”，但每次都会覆盖。然后尝试推送，但没有帮助。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:20:32.290

在您的情况下，我将使用运算符 $addToSet 如果它不存在则将值附加到数组中。

mongodb shell 中的示例

```
db.userSchema.update({"username" : USERNAME}, { "$addToSet" : { "followers" : ObjectId}}) 
```

# php - 是否可以在 js 脚本中包含一个 php 文件并访问该 php 文件的功能？

> ID：11220739
> 
> 赞同：1
> 
> 时间：2012-06-27T06:43:51.520
> 
> 标签：php, javascript, html

我有 js 文件，我需要在其中调用 php 文件中定义的函数来计算值，然后继续下一步。这可能吗？我无法从我的脚本中访问 php 文件的功能。还有一些方法可以在不更改扩展名的情况下将 php 文件包含在 html 页面中`.html`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:47:11.430

不，你不能那样做。PHP 和 Javascript 不在同一环境中执行，也不在同一时间执行。

PHP 在页面提供之前在您的 Web 服务器（服务器端）上执行。提供页面后，在客户的浏览器上执行 Javascript。

要从 javascript 调用 PHP 函数，您需要进行 AJAX 调用。这会将一个值从客户端发送到可以处理它的服务器端，然后将响应发送回客户端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T07:35:13.253

试试[JQuery Ajax](http://api.jquery.com/jQuery.ajax/)

它易于使用。

```
$.ajax({
  type: "POST",
  url: "yourphpfile.php",
  data: { values: "100"}
}).done(function( msg ) {
  console.log("php file called"+msg);
}); 
```

用您的 php 文件替换 yourphpfile.php 并执行您的 php 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:54:23.410

如果要访问服务器端资源（文件系统写入、数据库），则需要使用 AJAX 来回切换。

如果您只是更熟悉 PHP，可以查看[http://phpjs.org/](http://phpjs.org/)，它用 Javascript 重新实现了许多 PHP 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:52:09.467

PHP 文件是由服务器执行的文件。

1.  “我有 js 文件，我需要调用 php 文件中定义的函数来计算值。” 浏览器无法运行 php 函数，您需要服务器来执行此操作。
2.  “还有一些方法可以在不更改扩展名.html的情况下将php文件包含在html页面中”如果这样做，您的php代码将无法运行，因为服务器使用扩展名来了解文件是否需要执行。

要从 javascript 调用 PHP 函数，您将需要 AJAX。该值从客户端发送到处理它的服务器，然后将响应发送回客户端。

# eclipse - Eclipse + JBoss Tools 不会运行 webapp 来配置 JBoss AS

> ID：11220744
> 
> 赞同：0
> 
> 时间：2012-06-27T06:44:05.627
> 
> 标签：eclipse, jboss

我在 Ubuntu 12 下使用**Eclipse 3.7.2**和**JBoss Tools 3.3** ，并在“ *Preferences::Server::Runtime* ”环境下的 Eclipse 中配置了**JBoss AS 7.1.1**的本地安装副本。

 *但是，当尝试通过双击项目或 .xhtml 页面来运行 Java EE 应用程序时，我只能在服务器上看到“*运行方式/运行”作​​为选项，并且我从***Apache Tomcat/7.0.26**处获得 HTTP 404*本地主机：8080*。也就是说，似乎 Eclipse 正在尝试部署到 Tomcat 服务器，而不是我在“ *Preferences::Server::Runtime* ”中配置的 JBoss AS，而且我没有得到像“在 JBoss 上运行”这样的选项或任何东西. 当我将应用程序导出为战争并手动部署到 JBoss AS 时，应用程序运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:58:31.483

这个想法是将您的应用程序添加到您已配置的特定服务器。此外; 仅仅添加服务器运行时是不够的。

您需要打开 Servers 视图，然后从那里右键单击背景并选择`New`，然后选择`Server`。如果您在此处选择 JBoss Community -> JBoss AS 7.1，您可以在 中选择您之前创建的 Server 运行时，也可以选择`Server runtime environment`创建一个新的。

然后是你需要做出的心理扭曲。在 WTP 中，您不使用该`Run As`命令，而是在“服务器”视图中右键单击服务器（默认名称应为`JBoss 7.1 Runtime Server`，然后选择`Add and Remove`。从工作区中选择一个或多个要在服务器上运行的应用程序。单击完成时完毕。

现在再次右键单击您的服务器，然后选择`Start`或`Debug`。*

# html - CSS 100% 高度与页眉和页脚

> ID：11220751
> 
> 赞同：0
> 
> 时间：2012-06-27T06:44:38.960
> 
> 标签：html, css

我在实现 Css 100% 时遇到了困难，因此我的网站在每个 Web 浏览器中都可以正常显示。我按照我在[这里](http://peterned.home.xs4all.nl/examples/csslayout1.html)找到的教程进行操作，但没有成功。我有一个包含页脚的示例。这个页脚也没有到位。另外，我试图让周围的黑色框架覆盖我的页脚。有什么我做错了吗？

有关更多详细信息，请查看我的 [现场示例](http://webprolearner2346.zxq.net/css-test/index.html)

**CSS**

```
<style>
html,body {
    padding: 0px;
    margin: 0px;
    background: #333333;
    background-size: 100%;
    line-height: 130%;
    height: 100%
    font-family: trebuchet, 'trebuchet ms', 'tahoma', sans-serif;   
    font-size: 90%;
    color: #5e5e5e;

}

/****** COLORBLOCK: this is the orangey-yellow bar behind the wrapper i the background. ******/

#colorblock {
    position: absolute;
    top: 60px;
    left: 0px;
    background: #c69a55;
    z-index: -1;
    height: 65px;
    width: 100%;
    padding: 0px;
    margin: 0px;
}

/****** WRAPPER: this is the light gray box that is the background for all of the content. DO NOT EDIT. ******/

#container {

    z-index: 1;
    width: 850px;
    position: relative;
    margin: 0 auto;
    height:auto !important; /* real browsers */
    height:100%; /* IE6: treaded as min-height*/
    min-height:100%; /* real browsers */

    }

#contentArea{

       padding:1em 1em 5em;
       min-height:700px;
       width: 850px;
       position:relative;
       background: #f2f2f2;
       border-right: 15px solid #000000;
       border-left: 15px solid #000000; 
       position: relative;

}    

/****** TOP BANNER: This is the banner with Greg's List logo and main navigation. Also includes the styles for the main navigation links. ******/

#header {
    width: 100%;
    height: 180px;
}

/****** FOOTER: This is the junk at the bottom of the page. Do NOT remove the clear div; it's what makes it stick to the bottom. ******/

#clear {
    clear: both;
    margin-bottom: 10px;
}

#addSpace{
    padding-bottom:7px; 
}

.bottomNav {
    margin-right:auto;
    margin-left:auto;
    width:880px;
    height: 200px;
    background: #7a7a7a;

}

#footer{color:#FFF; position:absolute; bottom:0; width:100%; padding-bottom:10px; padding-top:10px;}

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:52:36.800

要将页脚设置到位，您只需要`width: 905px;`在`.bottomNav`课堂上重置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T12:25:22.217

在 CSS 中使用（宽度：计算）属性

例如。你需要页眉 100 像素和页脚 100 像素，内容高度为 100%

css

```
body, html{height:100%; margin:0px;}
.header{height:100px;}
.footer{height:100px;}
.content{height: 100%;
    height: -webkit-calc(100% - 200px);
    height: -moz-calc(100% - 200px);
    height: calc(100% - 200px);
} 
```

我们设置 -200 bcoz 页眉高度 100px + 页脚高度 100px 所以 100+100 = 200

# php - 使用php表单下载图片

> ID：11220754
> 
> 赞同：0
> 
> 时间：2012-06-27T06:45:07.343
> 
> 标签：php, download

我需要使用提交按钮从页面下载特​​定图像，所以我使用表单和 php 提交操作，这里是我的 html 和 php 代码

HTML 代码

```
<form name="logo" action="" method="post">
<input type="hidden" name="lgpath" value="images/logo/<?php echo $SelPro['lgpat'];?>">
    <img src="images/cmplogo/<?php echo $SelPro['lgpat'];?>">               
    <div><input type="submit" value="<?php echo $SelPro['lgname'];?>" name="dwnlg" id="dwnlg"></div></div>
    </form> 
```

PHP 代码

```
<?php
    if($_POST['dwnlg'])
    {
        $LgPath=$_POST['lgpath'];
        header('Content-Disposition: attachment; filename="'.$LgPath.'"');
    }
?> 
```

我提供了将图像下载到标题的路径，但它仅将当前页面下载为文件，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:50:53.640

试试下面的代码下载

```
<?php 
    if($_POST['dwnlg'])
    {
        $LgPath=$_POST['lgpath'];
        header("Content-type: image/jpeg");  
        header('Content-Disposition: attachment; filename="'.$LgPath.'"');  
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header("Cache-Control: public");
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($LgPath));
        readfile($LgPath);  
     }
?> 
```

在内容类型中：

```
 if your image is in png format then it will be :
         header("Content-type: image/png");
         if your image is in jpeg format then it will be :
         header("Content-type: image/jpeg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:51:15.617

设置标头只是告诉客户端数据是什么以及如何处理它，它不会发送数据。

您可以使用[readfile](http://php.net/manual/en/function.readfile.php)来做到这一点

```
<?php
    if($_POST['dwnlg'])
    {
        $LgPath=$_POST['lgpath'];
        header('Content-Disposition: attachment; filename="'.$LgPath.'"');
        readfile($LgPath);
    }
?> 
```

# php - 如何根据某些条件使用 jQuery 将信息动态地放在表上？

> ID：11220755
> 
> 赞同：0
> 
> 时间：2012-06-27T06:45:08.063
> 
> 标签：php, jquery, html

假设我必须用 PHP 制作一个具有以下结构的表格。用 标识的每个单元格`NamedayHour` 只是一个指标（每天的 Mon0、Mon1 等）。我应该把信息放在那些细胞上，每天和每小时都是不同的。

整个结构是这样的：

```
<table border="1" >
<th>Hour</th>
<th>Mon 25-06-2012</th>
<th>Tue 26-06-2012</th>
<th>Wed 27-06-2012</th>
<th>Thu 28-06-2012</th>
<th>Fri 29-06-2012</th>
<tr><td>8:00</td><td>Mon0</td><td>Tue0</td><td>Wed0</td><td>Thu0</td><td>Fri0</tr>
<tr><td>8:20</td><td>Mon1</td><td>Tue1</td><td>Wed1</td><td>Thu1</td><td>Fri1</tr>
<tr><td>8:40</td><td>Mon2</td><td>Tue2</td><td>Wed2</td><td>Thu2</td><td>Fri2</tr>
<tr><td>9:00</td><td>Mon3</td><td>Tue3</td><td>Wed3</td><td>Thu3</td><td>Fri3</tr>
<tr><td>9:20</td><td>Mon4</td><td>Tue4</td><td>Wed4</td><td>Thu4</td><td>Fri4</tr>
<tr><td>9:40</td><td>Mon5</td><td>Tue5</td><td>Wed5</td><td>Thu5</td><td>Fri5</tr>
</table> 
```

所以，我有数组：

```
$hoursMonday = array("8:00", "8:20", "8:40")
$hoursMondayAssigned = array("8:00", "8:20")
$hoursMondayAvailable = array("8:40") 
```

从周一到周五，我每天都有这 3 个阵列。

然后我需要在表格中写下每天的小时数。例如，在这种情况下，我需要在星期一和小时：8:40 的单元格上放置文本“可用”，对于“8:00”和“8:20”，我应该在星期一的列中放置这些小时，系统应该为他们两个都设置“忙碌”。

使用示例中的数组生成的表应如下表所示：

```
<table border="1" >
<th>Hour</th>
<th>Mon 25-06-2012</th>
<th>Tue 26-06-2012</th>
<th>Wed 27-06-2012</th>
<th>Thu 28-06-2012</th>
<th>Fri 29-06-2012</th>
<tr><td>8:00</td><td>BUSY</td><td>Tue0</td><td>Wed0</td><td>Thu0</td><td>Fri0</tr>
<tr><td>8:20</td><td>BUSY</td><td>Tue1</td><td>Wed1</td><td>Thu1</td><td>Fri1</tr>
<tr><td>8:40</td><td>AVAILABLE</td><td>Tue2</td><td>Wed2</td><td>Thu2</td><td>Fri2</tr>
<tr><td>9:00</td><td>Mon3</td><td>Tue3</td><td>Wed3</td><td>Thu3</td><td>Fri3</tr>
<tr><td>9:20</td><td>Mon4</td><td>Tue4</td><td>Wed4</td><td>Thu4</td><td>Fri4</tr>
<tr><td>9:40</td><td>Mon5</td><td>Tue5</td><td>Wed5</td><td>Thu5</td><td>Fri5</tr>
</table>
</html> 
```

我想使用 jQuery，或者只是 PHP 来解决这个问题。

需要注意的一件事是频率参数（在本例中为 10 分钟）可能会有所不同。例如，如果频率设置为 30 分钟，则时间为：8:00、8:30、9:00、9:30 等。

我真的不知道如何使用 jQuery 解决这个问题。我知道如何使用 for 循环编写表格，但是当我需要根据日期和时间将信息放在正确的单元格上时，复杂性正在增加。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:57:20.580

您可以在 PHP 中执行以下操作，以了解每小时是否已分配或免费：

```
$hoursMonday = array("8:00", "8:20", "8:40");
$hoursMondayAssigned = array("8:00", "8:20");
$hoursMondayAvailable = array("8:40");

foreach( $hoursMonday AS $hour ) {
    if( in_array( $hour, $hoursMondayAssigned ) ) {
        echo 'Busy at ' . $hour;
    } else if ( in_array( $hour, $hoursMondayAvailable ) ) {
        echo 'Free at ' . $hour;
    }
} 
```

为了自动循环遍历所有日子，我建议每天使用递归数组，例如：

```
$monday = array(
    'free' => array(
        '08:40', '09:00'
    ),

    'busy' => array(
        '08:40',
    ),

    'free' => array(
        '09:00',
    ),
); 
```

# facebook-like - facebook like 按钮不显示 FB 页面的面孔

> ID：11220762
> 
> 赞同：1
> 
> 时间：2012-06-27T06:45:34.930
> 
> 标签：facebook-like, fbml, facebook-likebox

我有一个网站，我想在其中显示一个类似 facebook 的按钮，该按钮显示面孔。

我的 FBML 看起来像这样

```
<fb:like send="false" width="200" show_faces="true" action="like" href="http://www.facebook.com/my-page" colorscheme="lite"></fb:like> 
```

这不显示面孔，但如果我添加一个不是 FB 的 url，比如 [http://mysite.com/somepage/](http://mysite.com/somepage/)

它显示了面孔

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:48:13.453

好的，我想我在一些故障排除后找到了答案。这些面孔只会针对您喜欢的 URL 或您有朋友喜欢的 URL 显示。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-27T06:51:21.550

在你的代码中试试这个，让我知道这是否适合你——

```
show-faces="true" 
```

或者

```
data-show-faces="true" 
```

# sql-server - 具有大量行的实体框架

> ID：11220763
> 
> 赞同：1
> 
> 时间：2012-06-27T06:45:48.983
> 
> 标签：sql-server, entity-framework

我正在开发一种医疗软件，我的目标是将大量自定义操作存储到数据库中。因为跟踪谁做了什么非常重要，所以每次用户做一些有意义的事情（例如写评论、添加一些医疗信息等）时都会产生一个动作。现在的问题是随着时间的推移会有*很多*动作，假设每个患者有 10000 个，可能有 50000 个患者，总共有 5 亿个动作（甚至更多）。

当前数据库模型看起来像这样：

```
[Patient] 1 -- 1 [ActionBlob] 
```

因此，每个患者都只有一个大 blob，其中包含所有动作作为大序列化字节数组。当然，当表变大时，这将不起作用，因为我必须一直在数据库和客户端之间来回传输整个字节数组。

我的下一个想法是列出单独序列化的动作（不是大块），即

```
[Patient] 1 -- * [Action] 
```

但我开始怀疑这是否是一个好方法。现在，当我添加新动作时，我不必序列化所有其他动作并将它们传输到数据库，而只需序列化一个动作并将其添加到 Actions 表中。但是加载数据怎么样，因为一张表可能有 5 亿行，它会超慢吗？

所以基本上问题是：

1.  sql server 可以处理从 5 亿行的表中加载 10000 行吗？（这些数字可能更大）
2.  实体框架可以处理 10000 个实体的具体化而不会很慢吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:58:27.107

问题 1 和 2 的简短回答：是的。

但是，如果您要一次性完成这些“物化”，您宁愿使用 SqlBulkCopy。我建议您查看以下内容：

*   [如何进行批量插入——Linq to Entities](https://stackoverflow.com/questions/1609153/how-to-do-a-bulk-insert-linq-to-entities)
*   [http://archive.msdn.microsoft.com/LinqEntityDataReader](http://archive.msdn.microsoft.com/LinqEntityDataReader)

关于您的模型，您绝对不应该使用 blob 来存储操作。有一个包含 Patient 外键的 Action 表，并确保在该表中有一个时间戳列。这样，当您必须为给定患者加载操作时，您可以使用时间作为过滤条件（例如，加载最近 2 个月的操作）。

由于您可能要获取给定患者的操作，因此请确保将患者 FK 设置为索引。

希望这可以帮助。

问候， 卡里尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:03:12.080

您的第二个想法是正确的，对于 SQL 数据库来说，拥有较小的百万项不是问题，而且如果您在操作表中索引一些有用的列，它将导致更快的性能。

将操作存储为 blob 是一个非常糟糕的主意，因为每次您都必须从 blob 转换为单个记录以进行搜索，并且它不会提供搜索等的任何好处。

对于 SQL 服务器来说，正确索引的十亿条记录根本不是问题。

在没有用户界面的情况下，我们会一次看到数百万条记录，我们总是会分页记录，例如 1 到 99、100 到 199 等等。

我们有近 1000 万行的表，但一切都很顺利，因为经常搜索的列被索引，外键被索引。

# git - 在本地使用 git

> ID：11220765
> 
> 赞同：0
> 
> 时间：2012-06-27T06:46:03.270
> 
> 标签：git, local-storage

我是 git 新手，如果这个问题很简单，请多多包涵。

1.  我需要在本地使用 git（我不需要将我的代码保存在服务器上，而是保存在本地的另一个目录中）。

2.  'git log' 为我们提供了有关 project 上所有提交的详细信息。如果我想在特定提交之前查看文件，我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:48:49.070

1.  似乎不是一个问题。Git 在本地运行良好。
2.  `git checkout COMMIT^ -- path/to/file`对于某些提交哈希`COMMIT`将直接在该提交之前检查文件的版本。

# iphone - 这种类型转换的含义是什么？

> ID：11220768
> 
> 赞同：1
> 
> 时间：2012-06-27T06:46:18.147
> 
> 标签：iphone, objective-c, uiview

一些视图.h

```
@interface SomeView : UIScrollView <UIScrollViewDelegate> 

- (void)setPage:(int)page;

@end 
```

SomeViewController.h

```
@interface SomeViewController : UIViewController

@end 
```

SomeViewController.m

```
#import "SomeView.h"
#import "SomeViewController.h"

- (void)viewDidLoad
{
    [super viewDidLoad];
    [(SomeView *)self.view setPage:1];
} 
```

是什么意思`(SomeView *)self.view`？

在真正的代码中，它似乎在做从`SomeView`到继承功能的魔力`self.view`......

*参考：*原始[源代码](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Listings/Classes_ZoomingPDFViewerViewController_m.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:48:11.233

因为`self.view`是一个`UIView`，你需要将它投射到你的`SomeView`

所以，

`SomeView *someView = self.view;`会给你一个警告所以你施放它

```
SomeView *someView = (SomeView *)self.view; 
```

它不是魔法，它只是转换`UIView`to `SomeView`，`self.view`被定义为`UIView` 但它是一个类的实例`SomeView`，所以为了使用`SomeView`函数，你需要转换它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:49:13.567

这实际上是从`self.view`to`SomeView`到访问功能的类型转换`SomeView`。

由于您的视图控制器已经加载`SomeView`，但`self.view`将返回的实例`UIView`，这就是为什么需要对它进行类型转换以避免警告的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:58:36.757

首先，您的问题不适用于**原始**来源的上下文。

那里的控制器视图由 IB 在**storyboard**中明确设置。这意味着`self.view`设置为自定义`SomeView`类，但编译器不知道！这就是它被铸造的原因。

所以它对编译器来说看起来很简单`UIView`，但实际上`SomeView`它需要访问它的方法（所以我们告诉编译器'不要担心这是一个 SomeView，继续这样对待它'）。我希望这是有道理的。

PS。您必须下载实际项目才能查看实际情况，因为答案可以在情节提要中找到

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:49:55.937

```
[(SomeView *)self.view setPage:1]; 
```

这意味着您的 self.view 是 SomeveView 的类型

```
SomeView *someVw = [[SomeView alloc]init];
self.view = someVw; 
```

# c# - VisualCollection 到 Visual HitTest 不可见？

> ID：11220774
> 
> 赞同：1
> 
> 时间：2012-06-27T06:47:02.253
> 
> 标签：c#, wpf, visualtreehelper

我正在使用 WPF 中的 VisualCollection、Visual 和 HitTest 并遇到问题。

我尝试制作自定义视觉绘图，如下所示：

```
public class MyDrawing : Visual
{
    VisualCollection vc;

    public MyDrawing()
    {
        vc = new VisualCollection(this);
    }

     // ...
     DrawingVisual rectangle = new DrawingVisual();
     // ...

     vc.Add(rectangle);
}

public class DrawingArea : FrameworkElement
{
    VisualCollection vc;

    public DrawingArea()
    {
        vc = new VisualCollection(this);

        MyDrawing md1 = new MyDrawing();

        vc.Add(md1);
    }    

    public void TryToHit(Point p)
    {      
        HitTestResult result = VisualTreeHelper.HitTest(this, p);
    }    
} 
```

然后我发现结果是矩形而不是md1。

我怎样才能使 MyDrawing 成为基本的 Visual 元素，以便 VisualTreeHelper 不会进一步在里面做 HitTest？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:20:58.880

而不是绘图视觉。试试下面的一个。

```
 public class NoHitTestDrawingVisual : DrawingVisual
    {

        protected override GeometryHitTestResult HitTestCore(GeometryHitTestParameters hitTestParameters)
        {
            return null;
        }

        protected override HitTestResult HitTestCore(PointHitTestParameters hitTestParameters)
        {
            return null;
        }

    } 
```

# .net - 使用 json.net 反序列化对象列表

> ID：11220776
> 
> 赞同：11
> 
> 时间：2012-06-27T06:47:05.437
> 
> 标签：.net, json, deserialization, json.net

我有这门课

```
public class Image
{
    public string url { get; set; }
    public string url_40px { get; set; }
    public string url_50px { get; set; }
}

public class Category
{
    public List<int> ancestor_ids { get; set; }
    public int parent_id { get; set; }
    public List<object> children_ids { get; set; }
    public string nodename { get; set; }
    public int num_parts { get; set; }
    public List<Image> images { get; set; }
    public string __class__ { get; set; }
    public int id { get; set; }
} 
```

我像这样反序列化它

```
retObject = JsonConvert.DeserializeObject(Of Category)(jsonResp) 
```

但是对于返回的类别列表，我如何转换为`List<Category>`？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T06:54:49.710

的类型参数`DeserializeObject`必须是`List<Category>`而不是`Category`。

在 C# 中它会是`JsonConvert.DeserializeObject<List<Category>>(json)`

在 VB.Net 中它会是`JsonConvert.DeserializeObject(Of List(Of Category))(json)`

# facebook - Feed 操作请求限制

> ID：11220778
> 
> 赞同：-3
> 
> 时间：2012-06-27T06:47:11.897
> 
> 标签：facebook, api

Facebook 帖子.. 我们已将我们的应用程序与 facebook 集成。一切正常，我们观察到 Feed 操作请求限制已达到 (341) 错误。

我们已经检查了大约 5M 的隐私设置限制。您能否让我们知道限制（API 的数量）一次，以便我们在我们这边进行适当的验证。

感谢立即的反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:10:39.007

Facebook 的 API 限制为每 600 秒、每个应用和每个 IP 600 次调用。对于限制诸如提要和请求之类的内容，还有特定于应用程序的限制。

如果您达到限制，您应该认真优化您的应用程序以减少调用或批量请求。

# java - 使用 esapi 时出错

> ID：11220780
> 
> 赞同：0
> 
> 时间：2012-06-27T06:47:18.327
> 
> 标签：java, security, owasp, esapi

我正在尝试在我的项目中使用 OWASP ESAPI。但问题是owasp文档对我来说太复杂了。我正在尝试使用 esapi 的验证，但即使没有错误，我也无法获得结果。

```
import org.owasp.esapi.ESAPI;
import org.owasp.esapi.Validator;

public void security(String s) {
        System.out.println("connect 1");
        Validator instance = ESAPI.validator();
        System.out.println("connect 2");
        System.out.println(instance.isValidInput("test", "xxxxx@gmail.com", "Email", 100, false));
    } 
```

如果我尝试运行 3 次，结果如下：

```
 connect 1
    Attempting to load ESAPI.properties via file I/O.
    Attempting to load ESAPI.properties as resource file via file I/O.
    Not found in 'org.owasp.esapi.resources' directory or file not readable: C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22\bin\ESAPI.properties
    Not found in SystemResource Directory/resourceDirectory: .esapi\ESAPI.properties
    Found in 'user.home' directory: C:\Users\xxxx\esapi\ESAPI.properties
    Loaded 'ESAPI.properties' properties file
    Attempting to load validation.properties via file I/O.
    Attempting to load validation.properties as resource file via file I/O.
    Not found in 'org.owasp.esapi.resources' directory or file not readable: C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22\bin\validation.properties
    Not found in SystemResource Directory/resourceDirectory: .esapi\validation.properties
    Found in 'user.home' directory: C:\Users\xxxx\esapi\validation.properties
    Loaded 'validation.properties' properties file
connect 1
connect 1 
```

如您所见，没有错误并且属性已正确加载。我的问题是为什么它停在那里。为什么没有打印“连接 2”？为什么 instance.isValidInput 的结果也没有打印出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:42:30.523

您没有在 esapi 配置中正确设置 ESAPI 资源路径。一旦你完成了，你应该是金色的。

试试这个链接：

[ESAPI 资源目录设置](https://www.owasp.org/index.php/ESAPI_Overview#Resource_Directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:10:16.913

很好，您正在使用 ESAPI。首先，该项目是 maven 还是 eclipse 或 ant 或其他？每种类型都有一个用于放置属性文件的特定位置，以便在第一次调用 ESAPI 时在运行时加载它们。浏览 google 中提供的 ESAPI 安装指南。但是从日志中可以清楚地看出这两个文件都已成功加载。发布您在文件中可能拥有的更多日志。问题可能是您正在验证并尝试使用方法 getVALidInput() 并使用错误的正则表达式来获取电子邮件地址。从文件和控制台发布完整的正则表达式代码和异常日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T05:32:41.593

对于验证，我直接在需要验证用户输入的地方使用了此代码。

```
String validatedAlertId = ESAPI.validator().getValidInput("alertId", alertId, "AlertIdRejex", 25, false); 
```

你可能有这样的事情。

```
 public String security(String s) {
            System.out.println("connect 1");
            valiDatedString = ESAPI.validator().getValidInput("test", "xxxxx@gmail.com", "Email", 100, false);                
            System.out.println("connect 2"+valiDatedString);
            return valiDatedString
        } 
```

// 调用类/对象

AAAA.security 此代码对我有用。对于 net beans 及其属性文件的配置，请查看[此 url](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&sqi=2&ved=0CFIQFjAE&url=https%3A%2F%2Fwww.owasp.org%2Fimages%2F4%2F4c%2FJavaEE-ESAPI_2.0a_install.doc&ei=RTLxT_PVPMKmrAfi5Oi9DQ&usg=AFQjCNGHoWd0y1mrgAdJd7EEDNqDHDS35g&cad=rja)。

# php - MySQL按行[id]用新信息更新'n'行数？

> ID：11220782
> 
> 赞同：0
> 
> 时间：2012-06-27T06:47:25.923
> 
> 标签：php, javascript, mysql, html, arrays

好的，我有一组 php 文件作为基于 Web 的库存系统。在搜索一个项目并从列表中选择一个之后，用户将被带到一个页面，该页面显示先前选择的项目的当前数量。在同一页面上，javascript 用于添加或减去当前数量值。我希望能够在 Present Quantity texboxes 中获取更新的值，并在 MySQL 中更新它们。

请注意，显示的项目数量因搜索页面上选择的数量而异。

以下是更新页面，用户可以在其中添加或减去数量值：

```
<html>
<title>Update Selections</title>
<body>
<?php
    include("menu.php");
    include("sqlconnect.php");

?>
<script type="text/javascript">
/*<![CDATA[*/

function add(obj,ud){
 while (obj.parentNode){
  if (obj.nodeName.toUpperCase()=='TR'){
   obj=obj.getElementsByTagName('INPUT')[0];
   break;
  }
  obj=obj.parentNode;
 }
 if (obj.nodeName.toUpperCase()=='INPUT'){
  obj.value=Math.max(obj.value*1+ud,0);
 }
}

/*]]>*/
</script></head>

<p align="center"><b>Make Updates:</b>
<br />
<br />
The following items were selected for quantity update:
<br />
<br />
<table border="1">
<tr><th>Item:</th>
<th>QUANTITY</th>
<th>ADD/SUBTRACT</th></tr>
<style>
textarea {resize: none;}
</style>
<form action="updatequantityprocess.php" method="post">
<?php

        //$row_id = $_POST['itemselect'];
        foreach ($_POST['itemselect'] as $confirm)
        {

            $result = mysql_query("SELECT * FROM inventory WHERE id='$confirm'");
            while ($row = mysql_fetch_array($result))
            {
                echo "<tr><td>" . $row['Item'] . "</td>";
                echo "<td bgcolor='grey'><input type='text' id='value' name='itemupdate[]' disabled='disabled' style='text-align: center' value='" . $row['QuaninInventory'] . "'><input type='hidden' value='" . $row['id'] . "' name='itemid[]'></td>";
                echo "<td><div align='center'><input type='button' value='+' onclick='add(this, 1)'><input type='button' value='-' onclick='add(this, -1)'></div></td></tr>";

            }
        }
        echo "</table>";
?>
<br />
<br />
<input type="submit" value="Update">
<br />
<INPUT TYPE="BUTTON" VALUE="<-- Back to Results" ONCLICK="window.location.href='http://localhost/Inventory/quantitybybrandprocess.php'">
</p>
</form>
</body>     
</html> 
```

我不知道如何构造下一页`quantityupdateprocess.php`，使用`itemupdate[]`和`item[]`数组来更新 MySQL 数据库中的选定项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:11:19.163

使用 foreach 循环遍历所有 itemid 并单独更新每个 itemid。

```
foreach($_POST["itemids"] as $itemid){
    //Do mysql update based on other fields (make sure to escape itemid, and the other fields as well, or even better use prepared statements).
} 
```

为了访问当前项目的数量，请执行以下操作。

```
foreach($_POST["itemids"] as $i=>$itemid){
    //do mysql updates where $_POST["itemupdate"][$i] is the item update for the item id.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T20:49:49.753

我将根据您的问题标题以更简单的方法呈现它：

首先，`mysql`强烈建议不要使用扩展，而是使用[**PHP PDO**](http://us3.php.net/manual/en/book.pdo.php)。

例子：

```
$DBH = new PDO('mysql:host=http://yourhost.com;dbname=yourdbname;charset=utf8', 'username', 'password');
$DBH->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$STH = $DBH->prepare('INSERT INTO `yourtable` (`column1`, `column2`) VALUES (?, ?)');

foreach($array as $value) {
    $STH->bindParam(1, $value);
    $STH->bindParam(2, $value);
    $STH->execute();
}

$DBH = null; 
```

您可以使用`prepared statements`which 自动转义所有无效或有问题的字符。您还可以制作一个准备好的语句并重用它来插入大量数据，同时优化整个过程。

[**您可以在phpro.org 的 PDO 教程页面**](http://us3.php.net/manual/en/book.pdo.php)上找到更多信息。他们解释得很好。

关于您的问题，在这种情况下，您可能必须执行以下操作：

假设您通过 收到一个表单数组`id => values[]`，`$_POST`因此您的查询将如下所示：

```
$DBH = new PDO('mysql:host=http://yourhost.com;dbname=yourdbname;charset=utf8', 'username', 'password');
$DBH->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$STH = $DBH->prepare('UPDATE `yourtable` SET `column1` = ?, `column2` = ? WHERE `id` = ?');

foreach($array as $id => $values) {
    $STH->bindParam(1, $values[0]);
    $STH->bindParam(2, $values[1]);
    $STH->bindParam(3, $id);
    $STH->execute();
} 
```

# javascript - 如何检索js文件中的属性值？

> ID：11220789
> 
> 赞同：0
> 
> 时间：2012-06-27T06:48:08.687
> 
> 标签：javascript, asp.net, jquery

我正在创建一个asp页面。在该页面中，我定义了一个如下所示的属性

。CS

```
private long _sequence;
  public long Sequence { get { return _sequence; } set { _sequence = value; } } 
```

现在我想在 js 文件中检索这个属性值。实际上我可以在 .aspx 中检索它，但我希望它在 .js 文件中。

这是我正在尝试的 js 函数和 .aspx 代码，但它找不到属性值

.aspx

```
<asp:Button ID="btnShowSimple" runat="server" Text="Notes Dialog" OnClientClick="NotesDialog(this)" /> 
```

.js

```
function NotesDialog(ctr) {
    var ControlName = document.getElementById(ctr.id);
    $("#btnShowSimple").click(function (e) {
        ShowDialog(false);
        e.preventDefault();
        LoadData("GetNotes", '"sequence":<%= this.Sequence %>');
    });
} 
```

有什么我想念的吗？？如果有人对此有任何想法，请帮助我..我两天后就面临这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:53:01.757

您的`js`文件是服务器上的静态文件。您不能`<%= %>`在其中使用这些标签。您可以通过在`aspx`页面中设置并在`js`文件中使用的全局 javascript 变量传递属性。

IE

.aspx

```
 <script type="text/javascript">
      myProp = <%= this.Sequence %>;
  </script> 
```

.js

```
function NotesDialog(ctr) {
    var ControlName = document.getElementById(ctr.id);
    $("#btnShowSimple").click(function (e) {
        ShowDialog(false);
        e.preventDefault();
        LoadData("GetNotes", '"sequence":' + myProp);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:54:32.960

Nope you cannot do this in JS file as it is not processed by asp.net runtime. The best you can do is declare a variable in `aspx` and use it in `js` like:

**aspx:**

```
var _seq="<%= this.Sequence %>"; 
```

**JS:**

```
LoadData("GetNotes", '"sequence":' + _seq); //USE ASPX VARIABLE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:01:05.437

You should try to separate you JavaScript code from you HTML.

Instead och creating a `asp:Button` use an HTML button and set an data-attribute you can retrive.

`<button type="button" id="btnShowSimple" data-sequence="<%= this.Sequence %>">Notes Dialog</button>`

And in your javascript-file bind an click event to your button that picks up the data-sequence.

```
/** Put this in the bottom of you javascript file **/
(function (window) {
    var document = window.document,
        view;

view = {
    /**
    * Invoked in jQuery event context
    * @param e
    */
    bindClickEvent : function (e) {
        $("#btnShowSimple").click(function (e) {
            e.preventDefault();
            var sequence = $(this).data('sequence');

            ShowDialog(false);

            LoadData("GetNotes", '"sequence":' + sequence);

        });
    }
}

$(document).ready(view.bindClickEvent);

} (window)); 
```

From your current code you when you click the `asp:Button` you just bind a new click event and never execute it.

Also from some of the other answer, you should NEVER declare arbitrary global variables in JavaScript

# javascript - 如何在Javascript上解析括号标签

> ID：11220790
> 
> 赞同：1
> 
> 时间：2012-06-27T06:48:09.277
> 
> 标签：javascript, parsing

我有这样的标签，获取这些属性的每个键和值并将其填充到数组中的最佳方法是什么（属性的数量会增加）？

```
myData = '[data attr1="value1" attr2="value2" attr3="value3"]'; 
```

并获得结果数组：

```
var arr = new Array();
arr['attr1'] = "value1";
arr['attr2'] = "value2";
arr['attr3'] = "value3";
and so on... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:56:44.800

这可能会满足您的要求，尽管它假设`tag`已经采用您描述的格式，即`[data ... ]`.

此外，正则表达式完全基于我在您的问题中看到的内容；不确定它是否会在其他字符串上中断。

```
function decode(tag)
{
    var r = /(\w+)="([^"]*)"/g,
    h = {};
    while ((m = r.exec(tag)) !== null) {
        h[m[1]] = m[2];
    }
    return h;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:16:52.770

由于数据中有字符串键，因此请使用 jquery 对象而不是数组。

```
var arr = {};
var str = '[data attr1="value1" attr2="value2" attr3="value3"]​​​';
var n = str.split('[data ');
var str_arr = n[1].replace(']','').split(" ");
jQuery.each(str_arr,function(val){
    var x = str_arr[val].split('=');
    arr[x[0]]  = x[1].replace('"','').slice(0,-1);

});
console.log(arr); 
```

试试这个代码。它可能会帮助你。

这是[演示](http://jsfiddle.net/EXPwR/)

尽管如果您提供有关代码的更多详细信息，它可以得到更多优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:00:28.527

```
var tagRe = /\[(\w+)((?:\s+\w+="[^"]{0,50}")*)\s*]/g;
var attrRe = /\b(\w+)="([^"]*)"/g;

function parse(text) {
    var result = [];
    tagRe.lastIndex = 0; // reset start position

    var tagMatch = tagRe.exec(text);
    while (tagMatch) {
        var currentTag = { 'name': tagMatch[1], 'attrs': {} };

        var attrString = tagMatch[2];
        attrRe.lastIndex = 0;

        var attrMatch = attrRe.exec(attrString);
        while (attrMatch) {
            var attrName = attrMatch[1];
            var attrValue = attrMatch[2];

            currentTag.attrs[attrName] = attrValue;

            attrMatch = attrRe.exec(attrString); // next match
        }
        result.push(currentTag);

        tagMatch = tagRe.exec(text);
    }
    return result;
}

parse('[data attr1="value1" attr2="value2" attr3="value3"]');
> [{name:'data',attrs:{attr1:'value1',attr2:'value2',attr3:'value3'}}] 
```

这适用于字符串中的任意数量的标签。标签的名称无关紧要。

# android - Android : 使用 ffmpeg 播放带有 AudioTrack 的 MP3 文件

> ID：11220792
> 
> 赞同：9
> 
> 时间：2012-06-27T06:48:12.560
> 
> 标签：android, ffmpeg, audiotrack

我已经在我的项目中集成了 ffmpeg lib，我还可以获取媒体文件的信息。但现在我必须使用 ffmpeg lib 在 android 中使用 AudioTrack 类播放 mp3 文件。

为此，我必须将字节缓冲区传递给 AudioTrack，但我不知道如何从 ffmpeg 获取字节缓冲区并将其与 AudioTrack 一起使用。我也想立即播放文件而不会延迟。

这是我在 java 中的音轨代码：

```
AudioTrack track;
bufferSize = AudioTrack.getMinBufferSize(44100,AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT)
track = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize, mode);

//Play audio clip
track.play();

while(stream_is_over){
//Copy the decoded raw buffer from native code to "buffer" .....
............
track.write(buffer, 0, readBytes);
} 
```

谁能给我工作代码来播放带有音轨的mp3文件。我搜索了很多，但没有找到任何正确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:56:28.603

我通过创建音频文件的缓冲区然后在运行中使用 AudioTrack 类来管理它。现在我正在尝试暂停/停止音频文件，因为停止或暂停 AudioTrack 不起作用。

**这是我将字节缓冲区传递给我的 java 类的代码：**

```
#include <assert.h>
#include <jni.h>
#include <string.h>
#include <android/log.h>

#include "libavcodec/avcodec.h"
#include "libavformat/avformat.h"

#define LOG_TAG "mylib"
#define LOGI(...)  __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)
#define LOGE(...)  __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)

#define AUDIO_INBUF_SIZE 20480
#define AUDIO_REFILL_THRESH 4096

void Java_ru_dzakhov_ffmpeg_test_MainActivity_createEngine(JNIEnv* env,
        jclass clazz) {
    avcodec_init();

    av_register_all();

}

jstring Java_ru_dzakhov_ffmpeg_test_MainActivity_loadFile(JNIEnv* env,
        jobject obj, jstring file, jbyteArray array) {
    {
        jboolean isfilenameCopy;
        const char * filename = (*env)->GetStringUTFChars(env, file,
                &isfilenameCopy);
        int audioStreamIndex;
        AVCodec *codec;
        AVCodecContext *c = NULL;
        AVFormatContext * pFormatCtx;
        AVCodecContext * aCodecCtx;
        int out_size, len, audioStream = -1, i, err;
        FILE *f, *outfile;
        uint8_t *outbuf;
        uint8_t inbuf[AUDIO_INBUF_SIZE + FF_INPUT_BUFFER_PADDING_SIZE];
        AVPacket avpkt;
        jclass cls = (*env)->GetObjectClass(env, obj);
        jmethodID play = (*env)->GetMethodID(env, cls, "playSound", "([BI)V"); //At the begining of your main function

        LOGE("source file name is %s", filename);

        avcodec_init();

        av_register_all();

        LOGE("Stage 1");
        /* get format somthing of source file to AVFormatContext */
        int lError;
        if ((lError = av_open_input_file(&pFormatCtx, filename, NULL, 0, NULL))
                != 0) {
            LOGE("Error open source file: %d", lError);
            exit(1);
        }
        if ((lError = av_find_stream_info(pFormatCtx)) < 0) {
            LOGE("Error find stream information: %d", lError);
            exit(1);
        }
        LOGE("Stage 1.5");
        LOGE("audio format: %s", pFormatCtx->iformat->name);
        LOGE("audio bitrate: %d", pFormatCtx->bit_rate);

        audioStreamIndex = av_find_best_stream(pFormatCtx, AVMEDIA_TYPE_AUDIO,
                -1, -1, &codec, 0);

        LOGE("audio codec: %s", codec->name);

        /* get codec somthing of audio stream to AVCodecContext */
        aCodecCtx = pFormatCtx->streams[audioStreamIndex]->codec;
        if (avcodec_open(aCodecCtx, codec) < 0) {
            LOGE("cannot open the audio codec!");
            exit(1);
        }

        printf("Audio decoding\n");
        LOGE("Stage 1.7");
        LOGE("S");
        codec = avcodec_find_decoder(aCodecCtx->codec_id);
        LOGE("Stage 1.8");
        if (!codec) {
            LOGE("codec not found\n");
            exit(1);
        }
        LOGE("Stage 2");
//              c= avcodec_alloc_context();
        LOGE("Stage 3");
        /* open it */
        if (avcodec_open(aCodecCtx, codec) < 0) {
            LOGE("could upper");
            fprintf(stderr, "could not open codec\n");
            LOGE("could not open codec");

        }
        LOGE("Stage 4");
        outbuf = malloc(AVCODEC_MAX_AUDIO_FRAME_SIZE);

        f = fopen(filename, "rb");
        if (!f) {
            fprintf(stderr, "could not open %s\n", filename);
            LOGE("could not open");
            exit(1);
        }

        /* decode until eof */
        avpkt.data = inbuf;
        avpkt.size = fread(inbuf, 1, AUDIO_INBUF_SIZE, f);
        LOGE("Stage 5");

        while (avpkt.size > 0) {
//                  LOGE("Stage 6");
            out_size = (AVCODEC_MAX_AUDIO_FRAME_SIZE / 3) * 2;
            len = avcodec_decode_audio3(aCodecCtx, (int16_t *) outbuf,
                    &out_size, &avpkt);
            LOGE("data_size %d len %d", out_size, len);
            if (len < 0) {
                fprintf(stderr, "Error while decoding\n");
                LOGE("DECODING ERROR");
                LOGE("DECODING ERROR %d", len);
                exit(1);
            }
//                  LOGE("Stage 7");
            if (out_size > 0) {
                /* if a frame has been decoded, output it */
//                      LOGE("Stage 8");
                jbyte *bytes = (*env)->GetByteArrayElements(env, array, NULL);
                memcpy(bytes, outbuf, out_size); //
                (*env)->ReleaseByteArrayElements(env, array, bytes, 0);
                (*env)->CallVoidMethod(env, obj, play, array, out_size);
//                      LOGE("DECODING ERROR5");
            }
            LOGE("Stage 9");
            avpkt.size -= len;
            avpkt.data += len;
            if (avpkt.size < AUDIO_REFILL_THRESH) {
                /* Refill the input buffer, to avoid trying to decode
                 * incomplete frames. Instead of this, one could also use
                 * a parser, or use a proper container format through
                 * libavformat. */
                memmove(inbuf, avpkt.data, avpkt.size);
                avpkt.data = inbuf;
                len = fread(avpkt.data + avpkt.size, 1,
                        AUDIO_INBUF_SIZE - avpkt.size, f);
                if (len > 0)
                    avpkt.size += len;
            }
        }
        LOGE("Stage 12");
        fclose(f);
        free(outbuf);

        avcodec_close(c);
        av_free(c);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:23:18.877

我对在 android 中编程一无所知，但谷歌刚刚在 I/O 2012 上引入了一个新的低级媒体 api

这是 yt 视频的链接：[http ://www.youtube.com/watch?v=YmCqJlzIUXs](http://www.youtube.com/watch?v=YmCqJlzIUXs)

# iphone - 如何从服务器导入图像并将其排列在视图中

> ID：11220795
> 
> 赞同：1
> 
> 时间：2012-06-27T06:48:38.327
> 
> 标签：iphone, ios, xcode, uiimageview, nsurlconnection

我需要获取必须从服务器调用的图像数组并按顺序排列。但是在执行下面的代码时我无法得到它......请指导......

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

NSURL *url = [NSArray arrayWithObjects:[NSURL URLWithString: 
                                        @"http://images.wikia.com/marvelmovies/images/5/5e/The-hulk-2003.jpg"],
              [NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],
              [NSURL URLWithString:@"http://challenge.roadef.org/2012/img/google_logo.jpg"],
              [NSURL URLWithString:@"http://addyosmani.com/blog/wp-content/uploads/2012/03/Google-doodle-of-Richard-007.jpg"],
              [NSURL URLWithString:@"http://techcitement.com/admin/wp-content/uploads/2012/06/apple-vs-google_2.jpg"],
              [NSURL URLWithString:@"http://www.andymangels.com/images/IronMan_9_wallpaper.jpg"],
              [NSURL URLWithString:@"http://sequelnews.com/wp-content/uploads/2011/11/iphone_5.jpg"],Nil];

/*
int i=0;
int cord_x=0;
int cord_y=30;
int cont=0;

for (i = 0; i < [(NSArray*)url count]; i++) {
    cont=cont+1;
    if (cont > 3) {
        cord_x=0;
        cord_y=cord_y+110;
        cont=1;
    }*/

    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:(NSURL*)[(NSArray*)url objectAtIndex:index]]]; 

    //cord_x=cord_x+110;

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 200.0f, 200.0f);

[button setImage:(UIImage*)[image objectAtIndex:index] forState:UIControlStateNormal]; 

[button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
return button;

}

//} 
```

现在我需要从服务器放置按钮图像和图像...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:36:53.447

您可以尝试使用 NSURLConnection 异步下载图像，这将使您的 UI 响应更快。只需为每个图像设置单独的连接并更新委托方法中按钮上的图像 - connectionDidFinishLoading。它还将帮助您跟踪下载错误（例如超时等）。这是一个很好的例子，可以下载表格图像 - 您可以在您的案例中找到很多帮助：http: [//developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:55:56.563

```
NSMutableArray *arrayList=[[NSMutableArray alloc] initWithObjects:@"www.xxx.com/imag.jpg",@"www.xxx.com/img1.jpg",nil];
for(int i=0; i<[arrayList count]; i++)
{
    NSURL *url = [NSURL URLWithString:[arrayList ObjetAtIndex:i]];
    NSData *data = [NSData dataWithContentsOfURL: url];
    UIImage *img=[UIImage imageWithData:data];               // Here is your image
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:58:46.887

```
NSURL *url = [NSArray arrayWithObjects:[NSURL URLWithString:@"http://mobiledevelopertips.com/images/logo-iphone-dev-tips.png"],[NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],[NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],[NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],[NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],[NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],[NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],Nil];

int i=0;
int cord_x=0;
int cord_y=30;
int cont=0;

for (i = 0; i < [(NSArray*)url count]; i++)
{
    cont=cont+1;
    if (cont > 3)
    {
        cord_x=0;
        cord_y=cord_y+110;
        cont=1;
    }

    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:(NSURL*)[(NSArray*)url objectAtIndex:i]]]; 
   UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(cord_x, cord_y, 100, 100)];
    [imageView setImage:image];
    [self.view addSubview:imageView];
    cord_x=cord_x+110;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T07:00:09.323

```
 int row = 0;
int column = 0;

    for(int i = 0; i < url.count; ++i) {
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:(NSURL*)   [(NSArray*)url objectAtIndex:i]]]; 

    UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(column*100+16, row*90, 80, 80);
    [button setImage:image forState:UIControlStateNormal]; 

    [button addTarget:self 
               action:@selector(buttonClicked:) 
     forControlEvents:UIControlEventTouchUpInside];
    button.tag = i; 
    [self.view addSubview:button];

    if (column == 2) {
        column = 0;
        row++;
    } else {
        column++;
    }
} 
```

# android - 为什么我的 Eclipse IDE 的“表单小部件”部分中没有 EditText

> ID：11220796
> 
> 赞同：4
> 
> 时间：2012-06-27T06:48:42.043
> 
> 标签：android, eclipse

正如您在“表单小部件”部分中看到的那样，那里没有 EditText 图标。我知道我可以手动将它写入 xml 文件，但我想知道为什么它不存在。这是我正在谈论的屏幕截图：

![截屏](../Images/4333c43a474cf458306b1491c49894e3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:52:03.753

因为**EditText**位于左侧菜单的“文本字段”选项卡中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-18T01:15:22.203

是的，这个也让我难过。

对于那些仍然找不到它的人，请查看此图像。编辑文本是“地址”选项右侧的“多行”文本字段选项。

您可以在“大纲”下的图像右侧看到它是一个editText，因此希望这可以帮助某人避免我也遇到的困惑。

![在此处输入图像描述](../Images/1cb00ccd3142dd8e231d93790fd0f64e.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-24T10:46:20.337

调色板->文本字段->多行文本/纯文本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T06:51:51.873

查看左侧，您选择了“表单小部件”...尝试选择“文本字段”。

# c# - LINQ 和 NOT IN 子句

> ID：11220799
> 
> 赞同：3
> 
> 时间：2012-06-27T06:49:00.750
> 
> 标签：c#, linq, datatable

我有 2 个数据表，一个是查找列表，另一个是数据。我在表中有许多列保存数据，其中一列是查找数据表的外键列。

我想根据外键列上的 Id 为所有未出现在包含数据的表中的查找行生成另一个列表。

我想使用 linq 查询，或者适用于 2 个数据表的东西

好像我在做一个 SQL NOT IN。

干杯

这是一些数据。我希望新列表中包含第 4 类和第 5 类。

```
 DataTable dtData = new DataTable( "Data" );
        dtData.Columns.Add( "Id", Type.GetType( "System.Int32" ) );
        dtData.Columns.Add( "CategoryId", Type.GetType( "System.Int32" ) );
        dtData.Columns.Add( "Qty", Type.GetType( "System.Int32" ) );
        dtData.Columns.Add( "Cost", Type.GetType( "System.Decimal" ) );
        dtData.Columns.Add( "TotalCost", Type.GetType( "System.Decimal" ) );
        dtData.Columns.Add( "TypeId", Type.GetType( "System.Int32" ) );

        dtData.Rows.Clear();

        DataRow row = dtData.NewRow();
        row["Id"] = 1;
        row["CategoryId"] = 1;
        row["Qty"] = 3;
        row["Cost"] = 237.00;
        row["TotalCost"] = 711.00;
        row["TypeId"] = DBNull.Value;
        dtData.Rows.Add( row );

        row = dtData.NewRow();
        row["Id"] = 2;
        row["CategoryId"] = 1;
        row["Qty"] = 5;
        row["Cost"] = 45.00;
        row["TotalCost"] = 225.00;
        row["TypeId"] = DBNull.Value;
        dtData.Rows.Add( row );

        row = dtData.NewRow();
        row["Id"] = 3;
        row["CategoryId"] = 3;
        row["Qty"] = 30;
        row["Cost"] = 1.00;
        row["TotalCost"] = 30.00;
        row["TypeId"] = 1;
        dtData.Rows.Add( row );

        row = dtData.NewRow();
        row["Id"] = 4;
        row["CategoryId"] = 2;
        row["Qty"] = 1;
        row["Cost"] = 15.00;
        row["TotalCost"] = 15.00;
        row["TypeId"] = 2;
        dtData.Rows.Add( row );

        row = dtData.NewRow();
        row["Id"] = 5;
        row["CategoryId"] = 1;
        row["Qty"] = 4;
        row["Cost"] = 3.00;
        row["TotalCost"] = 12.00;
        row["TypeId"] = 2;
        dtData.Rows.Add( row );

        DataTable dtlookup = new DataTable( "LookUp" );
        dtlookup.Columns.Add( "CategoryId", Type.GetType( "System.Int32" ) );
        dtlookup.Columns.Add( "Description", Type.GetType( "System.String" ) );

        dtlookup.Rows.Clear();

        DataRow lup = dtlookup.NewRow();
        lup["CategoryId"] = 1;
        lup["Description"] = "Category 1";
        dtlookup.Rows.Add( lup );

        lup = dtlookup.NewRow();
        lup["CategoryId"] = 2;
        lup["Description"] = "Category 2";
        dtlookup.Rows.Add( lup );

        lup = dtlookup.NewRow();
        lup["CategoryId"] = 3;
        lup["Description"] = "Category 3";
        dtlookup.Rows.Add( lup );

        lup = dtlookup.NewRow();
        lup["CategoryId"] = 4;
        lup["Description"] = "Category 4";
        dtlookup.Rows.Add( lup );

        lup = dtlookup.NewRow();
        lup["CategoryId"] = 5;
        lup["Description"] = "Category 5";
        dtlookup.Rows.Add( lup );

 var qqq = ( from r in dtlookup.AsEnumerable()
                    where !dtData.AsEnumerable().Any( b => b["CategoryId"] == r["CategoryId"] )
                    select r ).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:37:34.000

我怀疑是 dahlbyk 的回答对您有所帮助，所以我将其粘贴在这里。

[Linq 不在数据表上的选择中](https://stackoverflow.com/questions/1164770/linq-not-in-select-on-datatable)

* * *

如果您在国家/地区的序列上使用它会起作用：

使用 System.Linq；...

```
var ccList = from c in ds.Tables[2].AsEnumerable()
             select c.Field<string>("Country"); 
var bannedCCList = from c in ds.Tables[1].AsEnumerable()
                   select c.Field<string>("Country");
var exceptBanned = ccList.Except(bannedCCList); 
```

如果您需要未禁止国家/地区的完整行，则可以尝试左外连接：

```
var ccList = ds.Tables[2].AsEnumerable();
var bannedCCList = ds.Tables[1].AsEnumerable();
var exceptBanned = from c in ccList
                   join b in bannedCCList
                     on c.Field<string>("Country") equals b.Field<string>("Country") into j
                   from x in j.DefaultIfEmpty()
                   where x == null
                   select c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:03:07.373

您可以使用 DataTable.AsEnumerable() 扩展方法返回数据的可枚举集合。从那里您可以使用 LINQ 有效地查询您的数据。

```
var myData = myDataTable.AsEnumerable() 
```

编辑：如果您需要确定数据表中是否包含 ID，则必须首先选择 ID 列表（因为您无法比较整个 DataRow 对象）。

```
bool idExists = dtData
                    .AsEnumerable()
                    .Select(item => (int) item["Id"])
                    .Contains(myId); 
```

# javascript - JavaScript/jQuery 上下文 - 代理？

> ID：11220800
> 
> 赞同：0
> 
> 时间：2012-06-27T06:49:05.080
> 
> 标签：javascript, jquery, scope

我必须以同步方式为元素设置动画（即等到动画（本示例中为 fadeIn() ）完成，这样我才能正确地继续）。

据我所知，我有三个选择：

```
doSomething: function () {
    $('.someElement').fadeIn(function () {
        // do something else here...
    });
} 
```

另一种方法（使用 $.proxy() 更改上下文）：

```
doSomething: function () {
    $('.someElement').fadeIn($.proxy(function () {
        this.doSomethingElse();
    }, this));
},

doSomethingElse: function () {
    // ...
} 
```

但是，由于使用 $.proxy() 有点“混合”上下文，我真的不喜欢这个（因为我只是不知道它什么时候会回来咬我的屁股），我有时会使用这个方法：

```
doSomething: function () {
    $('.someElement').fadeIn(function () {
        doSomethingElse();
    });

    function doSomethingElse () {
        // ...
    }
} 
```

现在我想知道，有没有更好的方法？更简单，更优雅的东西。喜欢：

```
doSomething: function () {
    $('.someElement').fadeIn(function () {
        // do this in an async way...
    });

    // simply do something else here...
} 
```

这个问题确实困扰着我，因为我喜欢干净的代码，但我不喜欢这种简单但不干净的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:53:26.313

创建一个中介变量来引用您的原始对象：

```
doSomething: function () {
    var that = this;
    $('.someElement').fadeIn(function() {
       // use "that" here
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:31:37.263

如果`doSomethingElse()`是另一个动画，您可以将它们链接并排队以维护原始上下文。

# java - 在启动的时候关闭activity的显示，然后启动它

> ID：11220805
> 
> 赞同：-2
> 
> 时间：2012-06-27T06:49:35.540
> 
> 标签：java, android

我现在有一个activity的receiver显示信息是从service发送的，receive之后不会有关闭activity，导致他在receive完成后一直停留在界面上。开始想再次启动时间，关闭activity，然后再次打开，服务来自信息接收显示。Timing start broadcasting 还有通过日志看是接收到的开始时间信息，但是因为接收到的activity页面没有退出后，还是没有移动……

问题是这样的：

比如每隔八点定时从明天八点开始，开始，然后过几个小时，做完工作，显示的activity会停在最后一页不关闭，一直停到那天后天，后天八播的时候，活动生活没有任何反应。

这个问题我一开始的解决方法是先关掉再重启，现在是在服务中关掉他，关掉后，后天正常广播就可以启动他了... 八。

动态注册广播的activity，接收并显示服务信息（服务的sendBroadcast(intent)继续广播，直到线程跑过来）；并且该activity是由另一个assignment Activity启动的，这种安排activity的任务确实是由定时广播启动的。

再说了，现在想重新开始计时时间，不要关闭activity，让他继续接收显示服务通行证信息……怎么写啊。

CSDN求助链接： [http ://topic.csdn.net/u/20120626/10/7d163b1d-d689-4dda-a7f5-b117e4c1f7e4.html](http://topic.csdn.net/u/20120626/10/7d163b1d-d689-4dda-a7f5-b117e4c1f7e4.html)

差不多解决了，原因是这个activity的mainfest里面有个属性是这样的：android:launchMode="singleTask" 继续改成android:launchMode="singleTop" 就可以了，不过出现新问题，我要苦逼下去了……</p>

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-27T19:39:11.423

AndroidManifest.xml ： android:launchMode="singleTask" → android:launchMode="singleTop"

20 声望在 Stack Overflow 上如何实现？

# c - 格式转换

> ID：11220806
> 
> 赞同：2
> 
> 时间：2012-06-27T06:49:36.280
> 
> 标签：c, opengl-es, opengl-es-2.0, yuv, rgba

在 OpenGL ES 2.0 中读取帧缓冲区并将其转换为 RGBA 帧后。我想将其转换为 YUV 格式。

我尝试使用这张[桌子](http://www.fourcc.org/fccyvrgb.php)。忽略 alpha 分量。当我这样做时，看到 YUV 帧产生了它的扭曲。

谁能帮帮我

```
yuvdata[i * j *1]= (0.257)*memory[i*j*1] + (0.504)*memory[i*j*2]+(0.098)*memory[i*j*3]+16;
yuvdata[i * j *3]= (0.439)*memory[i*j*1] - (0.368)*memory[i*j*2] -(0.071)*memory[i*j*3]+128;
yuvdata[i * j *2]= -(0.148)*memory[i*j*1] - (0.291)*memory[i*j*2] +(0.439)*memory[i*j*3]+128; 
```

`

规范化没有帮助内存存储 rgba 和 yuv 是存储 yuv 的可用空间

我使用 rgb 到 yuv 转换忽略 alpha 分量

朋友这个问题就解决了。这篇文章很棒[yuv2rgb](http://en.wikipedia.org/wiki/YUV#Converting_between_Y.27UV_and_RGB)。感谢 Viktor Latypov 和 Mārtiņš Možeiko

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:26:53.323

“YUV”不是一个完整的格式。

从[这篇维基百科文章中](http://en.wikipedia.org/wiki/YUV)，您可以获得 YUV411、YUV422、YUV420p 到 YUV444 的转换。将这些变换的逆转换与您的 RGB 转换相结合，您将得到结果。

您缺少的东西：一个 RGB 三元组可能会以这种方式产生多个（不是一个）YUV 组件。

1.  YUV444 每像素 3 个字节
2.  YUV422 每 2 个像素 4 个字节
3.  YUV411 每 4 个像素 6 个字节
4.  YUV420p 每 4 个像素 6 个字节，重新排序

一、YUV422

Y'UV422转RGB888

输入：读取 4 个字节的 Y'UV (u, y1, v, y2 )

输出：写入 6 个字节的 RGB（R、G、B、R、G、B）

然后是YUV4111

Y'UV411转RGB888

输入：读取 6 个字节的 Y'UV

输出：写入 12 个字节的 RGB

```
// Extract YUV components
u  = yuv[0];
y1 = yuv[1];
y2 = yuv[2];
v  = yuv[3];
y3 = yuv[4];
y4 = yuv[5];
rgb1 = Y'UV444toRGB888(y1, u, v);
rgb2 = Y'UV444toRGB888(y2, u, v);
rgb3 = Y'UV444toRGB888(y3, u, v);
rgb4 = Y'UV444toRGB888(y4, u, v); 
```

与 420p 类似，但 YUV 值分布在矩形上 - 请参阅 Wikipedia 的图表和图像。

基本上，您应该获取 4 个 RGB 像素，将它们中的每一个转换为 YUV（使用您希望有效的 444 转换器），然后以维基百科中显示的一种棘手的方式存储 YUV[4] 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:05:14.553

你确定你正确地访问内存阵列吗？不应该是这样的：

```
R=memory[(i*width + j)*4+0]
G=memory[(i*width + j)*4+1]
B=memory[(i*width + j)*4+3] 
```

如果你有 BGRA，或者用 3 交换 0。

# android - 在同一个窗口中显示两个框架

> ID：11220809
> 
> 赞同：0
> 
> 时间：2012-06-27T06:49:49.247
> 
> 标签：android, android-layout

我想设计一个像这张图片一样的布局

![在此处输入图像描述](../Images/3149a8336d888f86305ba0e46ee7a727.png)

`Frame 1`是灰色的，他`Frame 2`是透明的。我认为我们需要使用`FrameLayout`，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:02:50.863

实际上，您可以使用 a`FrameLayout`或 a `RelativeLayout`（至少对于`Frame 1`），但您没有说明您想对这些帧做什么（这会稍微改变一些事情）。我会使用 a`RelativeLayout`因为我猜除了第 2 帧之外，第 1 帧中还有内容：

```
<RelativeLayout android:id="@+id/frame1" android:background="#c1c1c1"// other attributes>
     <FrameLayout android:id="@+id/frame2" android:layout_centerInParent="true" 
      android:background="@android:color/transparent"// other attributes />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:07:39.840

一种方法可以是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#c0c0c0" >

    <LinearLayout
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:layout_centerInParent="true"
        android:background="#ffffff"
        android:gravity="center" >
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:16:21.217

您不能使用两个框架制作上述类似屏幕，因为无法将一个框架放入另一个框架布局中，因此您可以使用另一种方式制作，例如，采用一个相对布局并将框架放入其中,

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/black" >

        <FrameLayout
            android:id="@+id/frameLayout1"
            android:layout_width="250dp"
            android:layout_height="100dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="180dp"
            android:background="@color/tbl_green">
        </FrameLayout>

    </RelativeLayout> 
```

可能这可以帮助你。

# php - Yii 支持为移动设备处理 cookie 和会话

> ID：11220811
> 
> 赞同：0
> 
> 时间：2012-06-27T06:50:01.733
> 
> 标签：php, iphone, yii

我们正在开发一个 i-phone 应用程序，它在 YII PHP 框架中具有服务器端编码，我的问题是，有没有办法处理移动设备的登录会话和 cookie，或者 YII 是否支持处理 cookie 和会话的任何设置设备。请帮忙。。

我猜Yii为此提供了一些解决方案，如果有人知道，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:00:46.900

iPhone 的移动浏览器与普通的桌面浏览器并没有什么不同，因此移动设备上的会话不需要特定的处理程序。你可以使用[Yii 的 CHttpSession 类](http://www.yiiframework.com/doc/api/1.1/CHttpSession)：

```
$session=new CHttpSession;
$session->open();
$value1=$session['name1'];  // get session variable 'name1'
$value2=$session['name2'];  // get session variable 'name2'
foreach($session as $name=>$value) // traverse all session variables
$session['name3']=$value3;  // set session variable 'name3' 
```

# tsql - 我可以以任何方式优化这个 SQL 查询吗？

> ID：11220812
> 
> 赞同：0
> 
> 时间：2012-06-27T06:50:02.410
> 
> 标签：tsql

我有三个名为 edum_application、edua_courseEvent 和 edua_coursePackage 的表。

我正在写一个问题以从 edum_application 获取所有应用程序，其中所有 courseEvent 的 coursePackage_id 都是 x 并且都具有相同的 applicationWrapper_id

这个查询有效，但它有效吗？

```
SELECT app.application_id, app.applicationWrapper_id
FROM edum_application AS app
    INNER JOIN edua_courseEvent AS ce ON app.courseEvent_id = ce.courseEvent_id
WHERE app.applicationWrapper_id = 662
    AND app.courseEvent_id IN
    (
        -- Is this really efficient?
        SELECT ce.courseEvent_id
        FROM edua_courseEvent AS ce
        WHERE ce.coursePackage_id =
        (
            SELECT coursePackage_id
            FROM edua_courseEvent AS ce
            WHERE ce.courseEvent_id = 13377
        )
    ) 
```

输出：

```
application_id  applicationWrapper_id
72643           662
72645           662
72646           662
72647           662 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:11:01.243

试试这个：

```
SELECT     app.application_id, app.applicationWrapper_id
FROM       edum_application AS app
INNER JOIN edua_courseEvent AS ce
ON         app.courseEvent_id = ce.courseEvent_id
INNER JOIN edua_courseEvent AS ce2
ON         ce.coursePackage_id = ce2.coursePackage_id
WHERE      app.applicationWrapper_id = 662
AND        ce2.courseEvent_id = 13377 
```

您可能需要一个 DISTINCT，具体取决于不同表之间/关系中的行数。

# sql-server - 优化 SQL Server 查询

> ID：11220814
> 
> 赞同：0
> 
> 时间：2012-06-27T06:50:23.347
> 
> 标签：sql-server, query-optimization

我有一个 SQL Server 查询：

```
(
    SELECT k12_dms_contacts_institution_jobtitles.job_title_id AS id
    FROM   k12_dms_contacts_institution_jobtitles
            INNER JOIN k12_dms_institution_master  ON  k12_dms_institution_master.id = k12_dms_contacts_institution_jobtitles.inst_id
    WHERE   (
                k12_dms_institution_master.state_id='63'
                AND k12_dms_contacts_institution_jobtitles.glevel_id='1'
            )
    GROUP BY
             k12_dms_contacts_institution_jobtitles.job_title_id
) 
INTERSECT 
(
    SELECT k12_dms_contacts_institution_jobtitles.job_title_id AS id
    FROM   k12_dms_contacts_institution_jobtitles
            INNER JOIN k12_dms_institution_master  ON  k12_dms_institution_master.id = k12_dms_contacts_institution_jobtitles.inst_id
    WHERE   (
                k12_dms_institution_master.state_id='63'
                AND k12_dms_contacts_institution_jobtitles.glevel_id='2'
            )
    GROUP BY
             k12_dms_contacts_institution_jobtitles.job_title_id
) 
INTERSECT 
(
    SELECT k12_dms_contacts_institution_jobtitles.job_title_id AS id
    FROM   k12_dms_contacts_institution_jobtitles
            INNER JOIN k12_dms_institution_master  ON  k12_dms_institution_master.id = k12_dms_contacts_institution_jobtitles.inst_id
    WHERE   (
                k12_dms_institution_master.state_id='63'
                AND k12_dms_contacts_institution_jobtitles.glevel_id='3'
            )
    GROUP BY
             k12_dms_contacts_institution_jobtitles.job_title_id
) 
INTERSECT 
(
    SELECT k12_dms_contacts_institution_jobtitles.job_title_id AS id
    FROM   k12_dms_contacts_institution_jobtitles
            INNER JOIN k12_dms_institution_master  ON  k12_dms_institution_master.id = k12_dms_contacts_institution_jobtitles.inst_id
    WHERE   (
                k12_dms_institution_master.state_id='63'
                AND k12_dms_contacts_institution_jobtitles.glevel_id='4'
            )
    GROUP BY
             k12_dms_contacts_institution_jobtitles.job_title_id
) 
```

有什么办法可以优化上面的查询。交集只需要在Where子句的基础上。我想获取所有年级共有的所有职位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:56:03.643

You can make the query more concise as follows:

```
SELECT IJT.job_title_id AS id
FROM k12_dms_contacts_institution_jobtitles AS IJT
INNER JOIN k12_dms_institution_master AS IM
ON IM.id = IJT.inst_id
WHERE IM.state_id='63'
AND IJT.glevel_id IN ('1', '2', '3', '4')
GROUP BY IJT.job_title_id
HAVING COUNT(DISTINCT IJT.glevel_id) = 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:00:11.890

这是你想要的。（未经测试）

```
 SELECT k12_dms_contacts_institution_jobtitles.job_title_id AS id
    FROM   k12_dms_contacts_institution_jobtitles
            INNER JOIN k12_dms_institution_master  ON  k12_dms_institution_master.id = k12_dms_contacts_institution_jobtitles.inst_id
    WHERE   (
                k12_dms_institution_master.state_id='63'
                AND (select count( disctinct k12_dms_contacts_institution_jobtitles.glevel_id) from k12_dms_contacts_institution_jobtitles where k12_dms_contacts_institution_jobtitles.glevel_id in ('1','2','3','4')) = 4
            )
    GROUP BY
             k12_dms_contacts_institution_jobtitles.job_title_id 
```

# android - 在一个文件中从服务器获取所有数据并在应用程序中完全重用

> ID：11220815
> 
> 赞同：0
> 
> 时间：2012-06-27T06:50:35.383
> 
> 标签：android

我想在活动开始时在一项活动中获取所有数据，然后在所有其他活动中使用该数据。比如获取所有用户信息、电话中的所有联系人并将其与服务器数据进行比较等。那么有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:57:03.777

You can extend the Application class in android. It is a singleton class, so whatever value you set there, can be accessed from another activity.

You can access ur application instance like this in every activity

```
MyApplication appContext = (MyApplication)getApplicationContext(); 
```

And inside the manifest file add the attribute to the application tag

```
android:name=".MyApplication" 
```

# android - 增强现实电话间隙

> ID：11220817
> 
> 赞同：1
> 
> 时间：2012-06-27T06:50:36.890
> 
> 标签：android, cordova, augmented-reality

我想知道我是否可以使用 phonegap 创建一个简单的增强现实应用程序。我可以创建一个带有 phonegap 的增强现实浏览器来在 Android 手机的相机上显示 pois 吗？有人知道一些参考资料或简单的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:30:17.080

PhoneGap 不仅仅是 Web 应用程序的原生包装器。通过PhoneGap javascript API，“web 应用”可以访问手机功能，如地理定位、加速度计相机、联系人、数据库、文件系统等。基本上，手机 SDK 提供的任何功能都可以“桥接”到javascript 世界。另一方面，在移动 Web 浏览器上运行的普通 Web 应用程序无法访问大多数这些功能（安全性是主要原因）。因此，PhoneGap 应用程序与其说是 Web 应用程序，不如说是一个移动应用程序。您当然可以使用 PhoneGap 来包装一个根本不使用任何 PhoneGap API 的 Web 应用程序，但这不是创建 PhoneGap 的目的。如果您想在您的应用程序中使用phonegap 不提供的功能，那么您可以创建一个原生插件并在您的应用程序中使用该功能。因此 phonegap 可用于创建可以 100% 匹配本机应用程序提供的功能的应用程序。您可以尝试创建您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T14:23:41.330

您可以使用 Wikiitude AR Phonegap 插件，您几乎可以使用 JS、HTML5 和 CSS3 完成所有操作。

# php - 退出带有回声的循环

> ID：11220818
> 
> 赞同：3
> 
> 时间：2012-06-27T06:50:37.497
> 
> 标签：php, for-loop

以下 PHP 代码按预期工作。当代码无法在 4 次尝试中执行命令时，我需要回显“复制错误”消息。

```
for($num_tries = 0 ; $num_tries < 4 ; $num_tries++)
{
    $cloudcmd = "cp abc xyz ";
    system($cloudcmd,$status);
    if($status != 0)
    {
        sleep(3) ;
        continue ;
    }
    break ;
} 
```

我尝试在中断后添加 echo 命令；但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:58:33.130

严格来说，您不需要引入额外的变量和检查来执行此操作。

为简单起见，您可以在 for 循环之外检查 for 循环变量 $num_tries 的值：

```
if($num_tries==4).... 
```

在 for 循环之后，您还可以使用 $status 变量。

```
if($status!=0).... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:53:21.130

```
$success = false;
for($num_tries = 0 ; $num_tries < 4 ; $num_tries++)
        {
        $cloudcmd = "cp abc xyz ";
        system($cloudcmd,$status);
        if($status != 0)
            {
            sleep(3) ;
            continue ;
            }
    $success=true;
    break ;
    }
if($success)
    {
    //do your thing
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:00:32.607

尝试这样做：

```
for ($num_tries=0;$num_tries < 4;$num_tries++)
{
    system('cp abc xyz',$status);
    if ($status === 0)
    {
        break;
    }
    sleep(3);
}
if ($status !== 0)
{
    echo 'error';
} 
```

一旦为`$status`0，这个循环就会中断，这意味着`system()`调用成功，在循环之后，该`$status`值仍然可以访问（PHP 没有块范围），所以检查它的值并在需要时回显。您可以使用 , 轻松替换`echo`语句`exit()`以停止脚本的其余部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T07:41:26.150

```
<?php  
for($num_tries = 1 ; $num_tries <=4 ; $num_tries++){  
    $cloudcmd = "cp abc xyz ";  
    system($cloudcmd,$status);  
    if($status != 0) {  
       if($num_tries!=4){  
         sleep(3);  
         continue;  
       } else {  
         echo "error";  
       }  
    }                               
    break;  
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T06:55:12.287

语句会导致循环中断，并且在`break`循环内出现在中断之后的任何代码都将被跳过。

也许，你可以做这样的事情：

```
$success = false;

for($num_tries = 0 ; $num_tries < 4 ; $num_tries++) {

    if (success()) {
        // do something
        $success = true;
    }
}

echo ($success) ? 'Success' : 'Failure'; 
```

# android - Activity 类型的方法 showDialog(int) 在 android 中已弃用？

> ID：11220820
> 
> 赞同：9
> 
> 时间：2012-06-27T06:50:45.517
> 
> 标签：android, dialog, android-dialog

`showDialog(int)`类型中的方法`Activity`已**弃用**。

![在此处输入图像描述](../Images/372d0a42a238f83df0c1dcc4823d0074.png)

什么原因？以及如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T07:00:21.163

**什么原因？**

[http://developer.android.com/reference/android/app/Activity.html#showDialog(int)](http://developer.android.com/reference/android/app/Activity.html#showDialog%28int%29)

[Android DialogFragment vs Dialog](https://stackoverflow.com/questions/7977392/android-dialogfragment-vs-dialog)

**如何解决？**

将新的 DialogFragment 类与 FragmentManager 一起使用；这也可以通过 Android 兼容包在旧平台上使用。

[http://android-developers.blogspot.in/2012/05/using-dialogfragments.html](http://android-developers.blogspot.in/2012/05/using-dialogfragments.html)

# objective-c - 是否可以将另一个类的方法设置为 NSInvocation 对象的选择器属性？

> ID：11220822
> 
> 赞同：-1
> 
> 时间：2012-06-27T06:50:54.857
> 
> 标签：objective-c, selector, nsinvocation

我在 ClassA 中有一个名为 Selector1 的方法，

在 ClassB 中，我想创建一个 NSInvocation 对象并将 Selector1 设置为对象的选择器。这可能吗？我不知道设置这个的正确方法。

我试图在 ClassB 中使用的代码是这样的：

```
NSMethodSignature *signature = [ClassA methodSignatureForSelector:@selector(Selector1:)];
NSInvocation *invocationToPass = [NSInvocation invocationWithMethodSignature:signature];
invocationToPass.target = self;
invocationToPass.selector = Selector1; // How can I assign Selector1 from ClassA? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:58:44.877

您需要一个`SEL`，就像您传递给的那个一样`methodSignatureForSelector:`，而不仅仅是方法的名称。

```
[invocationToPass setSelector:@selector(Selector1:)]; 
```

您还需要知道冒号很重要。如果该方法不带参数，则名称为`Selector1`; 如果需要一个，名称是`Selector:`。您需要将正确的名称放入`@selector()`运算符中。

# c# - 如何在 wpf 中使用 Linq to xml 概念从 xml 元素中获取值

> ID：11220827
> 
> 赞同：0
> 
> 时间：2012-06-27T06:51:23.780
> 
> 标签：c#, wpf, linq-to-xml

```
XElement MyFamily = new XElement("MyFamily",
                                new XElement("Parents",
                                    new XElement("Father", "Anjappan",
                                        new XAttribute("Id", "AA1234")),
                                    new XElement("Mother", "Thaiyamuthu",
                                        new XAttribute("Id", "AA4567"))),
                                new XElement("Brothers", "Senthil,Saravanan,Sathish"),
                                new XElement("Systers", "Povunamma,Pazhaniyamma,Sangeetha"));
        MyFamily.Save(@System.AppDomain.CurrentDomain.BaseDirectory + "MyFamily_RemoveElement.xml"); 
```

在这里，我想使用 Linq to xml 概念获取**父亲**值（“Anjappan”）和**Id值（“AA12345”）。**我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:59:32.220

尝试这个，

```
 var element = MyFamily.Descendants("Father")
                  .Where(
                   p => p.Value == "Anjappan" 
                   && p.Attribute("Id").Value == "AA1234"
                   ).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:59:19.000

使用[Descendants](http://msdn.microsoft.com/en-us/library/bb353813.aspx)获取节点，使用[Attributes](http://msdn.microsoft.com/en-us/library/system.xml.linq.xattribute.aspx)获取属性，使用[Value](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.value.aspx)获取元素/节点值。

```
 var fatherNode  = MyFamily.Descendants("Father"); //Father Nodes
    var fatherId = fatherNode.Attributes("Id").First().Value; // "AA1234")
    var farthName = fatherNode.First().Value; //"Anjappan" 
```

# asp.net-mvc-3 - 传递多个值tu ActionResult

> ID：11220829
> 
> 赞同：2
> 
> 时间：2012-06-27T06:51:34.033
> 
> 标签：asp.net-mvc-3, razor

我在 mvc 3 razor 中有这段代码

```
@using (Html.BeginForm("MyAction", "MyController"))
{
    <input type="text" id="txt" name="txt"/>          
    <input type="image" src="image.gif" alt="" />
} 
```

在控制器中我有这个代码

```
[HttpPost]
public ActionResult MyAction(string text)
{
    //TODO something with text and return value...
} 
```

现在，如何发送一个新值，例如 id 到 Action 结果？？？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T06:55:11.617

您使用视图模型：

```
public class MyViewModel
{
    public string Text { get; set; }

    // some other properties that you want to work with in your view ...
} 
```

然后将此视图模型传递给视图：

```
public ActionResult MyAction()
{
    var model = new MyViewModel();
    model.Text = "foo bar";
    return View(model);
}

[HttpPost]
public ActionResult MyAction(MyViewModel model)
{
    // remove the Text property from the ModelState if you intend
    // to modify it in the POST controller action or HTML helpers will
    // use the old value
    ModelState.Remove("Text");
    model.Text = "some new value";
    return View(model);
} 
```

然后视图被强类型化为这个模型：

```
@model MyViewModel

@using (Html.BeginForm("MyAction", "MyController"))
{
    @Html.EditorFor(x => x.Text)
    <input type="image" src="image.gif" alt="" />
} 
```

# sql-server - DROPCLEANBUFFERS 在 SQL Server 中不起作用

> ID：11220830
> 
> 赞同：1
> 
> 时间：2012-06-27T06:51:36.997
> 
> 标签：sql-server

我有一个正在尝试优化的存储过程。为了知道执行花费了多少时间，我在脚本开头添加了：

```
use MyDatabase
go
CHECKPOINT; 
GO 
DBCC DROPCLEANBUFFERS; 
GO 
```

在两次执行之间，我可以看到运行查询的时间在减少。我认为只有缓存可以加快我的脚本的执行，SQL Server 中是否有其他机制可以做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:47:57.930

第一次运行存储过程时，会计算并编译查询计划。这通常需要 20 毫秒，对于较长的过程可能会更长一些。

如果您在 before 运行一次查询`checkpoint; dbcc dropcleanbuffers;`，则该计划应该被缓存。

# java - Struts中的JOptionPane？

> ID：11220834
> 
> 赞同：0
> 
> 时间：2012-06-27T06:52:01.147
> 
> 标签：java, swing, jakarta-ee, struts, joptionpane

我正在使用下面的代码来显示对话框：

```
if(query.contains(tab)) {         
    JOptionPane.showMessageDialog(null,"Owner does not have privileges to access given table");         
} 
```

但我想`JOptionPane`不会在struts中工作。那么如何在struts中显示对话框呢？

我可以`JOptionPane`在struts中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:21:10.193

当然你不能`JOptionPane`在 Struts 中使用。Struts 在服务器端运行。`JOptionPane`将在 Web 服务器屏幕上显示 Swing 对话框，而不是在客户端的浏览器中。

要在浏览器中显示对话框，您需要 JavaScript。例如，您可以使用[jQuery-UI](http://jqueryui.com/demos/dialog/)。

# c# - 了解 Trace 在 C# 中的工作原理

> ID：11220837
> 
> 赞同：11
> 
> 时间：2012-06-27T06:52:04.097
> 
> 标签：c#, trace

我试图了解跟踪是如何工作的

我创建了一个简单的新 Web 项目。这是我可以使用的代码

```
// Create a trace listener for the event log.
EventLogTraceListener myTraceListener = new EventLogTraceListener("myEventLogSource");

// Add the event log trace listener to the collection.
Trace.Listeners.Add(myTraceListener);

// Write output to the event log.
Trace.WriteLine("Test output"); 
```

我正在从这个[msdn 链接中获得帮助](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogtracelistener.aspx)

我的 web.config 中的设置如下

```
 <system.diagnostics>
 <trace autoflush="false" indentsize="4">
  <listeners>
    <add name="myListener"
      type="System.Diagnostics.EventLogTraceListener"
      initializeData="TraceListenerLog" />
  </listeners>
 </trace>
</system.diagnostics> 
```

但是，当我运行此代码时，我不知道此日志记录发生在哪里，我检查了事件查看器，在“应用程序和服务日志”下，我希望创建一些名为“myEventLogSource”的新日志，但没有发生。

请谁能解释我这是如何工作的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:40:20.690

在应用程序日志下检查您是否有两个正在写入应用程序日志的源，一个是 TraceListenerLog，另一个是 myEventLogSource。不会创建新日志，它们都将使用应用程序日志。如果你想创建一个新的日志并且你想向它写入跟踪输出，你可以这样做（当然，日志名称不必等于源名称）：

```
 string logSource = "_myEventLogSource";
        if (!EventLog.SourceExists(logSource))
            EventLog.CreateEventSource(logSource, logSource);

        EventLogTraceListener myTraceListener = new EventLogTraceListener(logSource);

        // Add the event log trace listener to the collection.
        System.Diagnostics.Trace.Listeners.Add(myTraceListener);

        // Write output to the event log.
        System.Diagnostics.Trace.WriteLine("Test output"); 
```

即使源不存在，跟踪信息也会写入应用程序日志下的事件日志，其中的源名称已传递给 EventLogTraceListener 构造函数。

# jquery - Fancybox 看不到 append() 对象

> ID：11220842
> 
> 赞同：0
> 
> 时间：2012-06-27T06:52:30.570
> 
> 标签：jquery, fancybox, append

我有一个这样的JS代码

```
<script type="text/javascript">
$(document).ready(function(){
        $('.main').on('click', '.block', function (){
        $('.main').append('<div class="block">Some Text<br/><a class="show" href="http://google.com">Add element</a</div>');
    });

    $("a.show").fancybox(
    {                       
        "padding" : 20,
        "imageScale" : false, 
        "zoomOpacity" : false,
        "zoomSpeedIn" : 1000
    });
});
</script> 
```

和html：

```
<div class="main"><div class="block">Some Text<br/><a class="show" href="http://google.com">Add element</a</div>
</div> 
```

当虚拟对象“.block”附加到“.main”时，Fancybox 不会启动

fancyBox: [http://fancybox.net](http://fancybox.net)，使用 fancyBox 1.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:10:34.897

这是因为 fancybox v1.3.x 不支持动态添加元素（当使用`append()`或任何其他在 DOM 准备好后添加元素的 jQuery 方法时）。

检查[https://stackoverflow.com/a/9084293/1055987](https://stackoverflow.com/a/9084293/1055987)以获取解决方法。

# python - python中的类和方法

> ID：11220846
> 
> 赞同：0
> 
> 时间：2012-06-27T06:52:58.697
> 
> 标签：python, class, function, testing, python-2.7

```
import unittest
from paycheck import with_checker

class TestStrings(unittest.TestCase):        
    @with_checker([int])
    def test_sort(self, list_of_ints):
        self.assertTrue(isinstance(list_of_ints, list))
        self.assertTrue(len(list_of_ints) == len(qsort(list_of_ints)))
        self.assertTrue(False)

if __name__ == '__main__':
    unittest.main()

    def qsort (list):
        if list == []:
            return []
        else:
            pivot = list [0]
            lesser = qsort([x for x in list[1:] if x<pivot])
            greater = qsort([x for x in list[1:] if x>=pivot])
            return lesser + [pivot] + greater 
```

这给了我`global name qsort not defined`（即使我在同一个班级有它）。这里有什么问题？我想这很简单，但我对 Python 还不是很熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:55:07.990

看起来您在定义函数之前正在运行测试。Python 中的函数定义与其他任何语句一样是可执行语句，并按照遇到的顺序执行。由于您`unittest.main()`在定义之前调用`qsort`，`qsort`因此在运行测试时未定义。将您的`unittest.main()`呼叫移到`def qsort`块之后。

当您使用它时，最好不要将其`def`放在`if __name__=="__main__"`块内。通常，如果块将是您程序中的最后一位。做就是了

```
def qsort (list):
    if list == []:
        return []
    else:
        pivot = list [0]
        lesser = qsort([x for x in list[1:] if x<pivot])
        greater = qsort([x for x in list[1:] if x>=pivot])
        return lesser + [pivot] + greater

if __name__ == '__main__':
    unittest.main() 
```

另请注意， qsort 与任何东西都不“在同一类”。它不在任何班级。这只是一个功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:00:14.917

at`if __name__...`表示类定义的结束。您应该将这两行移到底部， qsort 现在是您班级的一部分

```
import unittest
from paycheck import with_checker

class TestStrings(unittest.TestCase):        
    @with_checker([int])
    def test_sort(self, list_of_ints):
        self.assertTrue(isinstance(list_of_ints, list))
        self.assertTrue(len(list_of_ints) == len(qsort(list_of_ints)))
        self.assertTrue(False)

    def qsort (list):
        if list == []:
            return []
        else:
            pivot = list [0]
            lesser = qsort([x for x in list[1:] if x<pivot])
            greater = qsort([x for x in list[1:] if x>=pivot])
            return lesser + [pivot] + greater

if __name__ == '__main__':   # move these two lines
    unittest.main()          # to the bottom 
```

# android - 在后台创建android视图

> ID：11220856
> 
> 赞同：1
> 
> 时间：2012-06-27T06:53:43.007
> 
> 标签：android, webview, android-service, android-3.0-honeycomb

由于我的应用程序的限制，我们需要在主 UI 线程之外预加载带有一组视图（按钮、图像、视频、WebViews...）的视图，以便我们可以创建整个容器视图的缩略图。

我们正在讨论这有多方便。可以在 android 服务中创建视图吗？（不将其添加到主要活动中）我们也无法在服务中创建 WebView 以创建缩略图。有什么解决方法吗？

谢谢你的时间

# html - About adding Google Talk to my website

> ID：11220864
> 
> 赞同：4
> 
> 时间：2012-06-27T06:54:17.590
> 
> 标签：html, google-talk

I am trying to add gTalk to my website

CODE:-

```
<iframe src="http://www.google.com/talk/service/badge/Show?tk=z01q6amlque8dh1ahj76nn5veh4qid1oovkbpncm3tiji81dnua3fn5541f1okhra1h29iv1q631sjlp3tgmp55gqq8mib1kr53kt4ao2t74kad5ivccd8drd32sirahntunpq7c3fp7nefv6tnacnukdnc6ef5q8bbpjsal15o5evurq7d7kqdfnn560uaoibk&amp;w=200&amp;h=60" allowtransparency="true" frameborder="0" height="60" width="200"></iframe> 
```

It is displaying in browser but when some one clicks on the link if am online the page is redirected to [http://support.google.com/chat/?hl=en&topic=1725163#topic=24666](http://support.google.com/chat/?hl=en&topic=1725163#topic=24666)

I can't chat..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:03:27.403

似乎很少有关于这个的信息......这可能是为什么：

> “谷歌不再支持回聊徽章。”
> 
> [http://productforums.google.com/forum/#!topic/chat/mTiz7cm9LTM](http://productforums.google.com/forum/#!topic/chat/mTiz7cm9LTM) [https://productforums.google.com/forum/#!searchin/chat/chatback/chat/khNawyCACHc/nrCCurEXX6YJ](https://productforums.google.com/forum/#!searchin/chat/chatback/chat/khNawyCACHc/nrCCurEXX6YJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:03:00.700

我有同样的问题。不支持 Chatback 徽章非常令人失望。

我找到了 OggChat 来代替它。[http://oggchat.com/](http://oggchat.com/)

它专为 GMail 和 Google Talk 设计。

您确实需要为此付费，但它的成本并不高，而且非常值得。

它比聊天回声徽章有更多的功能。

*   您可以为其设计样式和品牌
*   您可以通过在页面上花费的位置/时间来监控访问者
*   您可以邀请人们聊天（手动和自动）
*   它异步加载
*   它保存并通过电子邮件发送成绩单
*   您可以在任何可以使用 Gmail 或 Google Talk 的地方使用它

我已经在三个网站上使用它一年了。我不能高度推荐它。

# java - selenium, how can I select new window

> ID：11220869
> 
> 赞同：7
> 
> 时间：2012-06-27T06:54:38.433
> 
> 标签：java, selenium, selenium-rc, popupwindow

I run my selenium rc test in Eclipse with TestNG. I have a link which tries to open a new browser page. How can I select this new page to operate in? I use this code:

`selenium.selectWindow("name=NewPage");`

however it says page not found. I also try to define page ids or titles with this code:

```
String[] wins = selenium.getAllWindowIds();
    for (String s : wins)
         System.out.println("win: " + s); 
```

It does not define my new opened window:

```
win: MainPage
win: 
```

If use `selenium.getAllWindowNames()` I get `win: selenium_main_app_window win: selenium_blank65815`.

I write this code `selenium.selectWindow("name=blank99157");` but get the error - `ERROR: Window does not exist. If this looks like a Selenium bug, make sure to read http://seleniumhq.org/docs/02_selenium_ide.html#alerts-popups-and-multiple-windows for potential workarounds.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T13:15:47.483

该窗口显然没有名称，因此您无法按名称选择它。

1.  如果窗口是通过 JavaScript 打开的，并且您可以更改脚本，请尝试更改`window.open("someUrl");`为`window.open("someUrl", "someName");`，然后您将能够通过设置名称选择窗口。有关. [_`window.open()`](https://developer.mozilla.org/en/DOM/window.open)

2.  Selenium RC 不支持`<a href="someUrl" target="_blank">`链接（在新窗口中打开链接）。因此，如果窗口是通过这种类型的链接打开的，则必须找到该`<a>`元素，获取`href`属性并调用

    ```
    selenium.openWindow(theFoundUrl, "theNewWindow");
    selenium.selectWindow("id=theNewWindow"); 
    ```

3.  如果在活动之前或`onload`活动期间通过 JavaScript 打开它，您需要调用

    ```
    selenium.openWindow("", "theNewWindow");
    selenium.selectWindow("id=theNewWindow"); 
    ```

    在错误[SEL-339](http://jira.openqa.org/browse/SEL-339)或[`openWindow()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#openWindow%28java.lang.String,%20java.lang.String%29)和[`selectWindow()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#selectWindow%28java.lang.String%29)JavaDocs 中了解更多信息。

4.  如果你只有两个窗口/想打开最新的一个，你可以试试

    [`selenium.selectPopup()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#selectPopUp%28java.lang.String%29)

    这显然是最简单的方法，因为它选择了第一个非顶部窗口。因此，它仅在您想要选择最新的弹出窗口时才有用。

5.  如果新窗口有一个*唯一的*标题，你可以这样做

    ```
    selenium.selectPopup("Title of the window"); 
    ```

    或者[`selenium.selectWindow("title=Title of the window");`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#selectWindow%28java.lang.String%29)

6.  否则，您必须迭代[`selenium.getAllWindowNames()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#getAllWindowNames%28%29)以获得正确的名称（Selenium 为没有名称的窗口创建名称）。但是，您不能将该名称硬编码到您的测试用例中，因为它每次都会更改，因此您需要为此制定一些动态逻辑。

7.  你不会喜欢这样的：选择 WebDriver。它应该对这些问题更有抵抗力*。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T13:20:32.013

```
WebDriver driver = new FirefoxDriver();
WebElement inputhandler = driver.findelement(By.linktext("whatever here"));
inputhandler.click();   
String parentHandle = driver.getWindowHandle();
Set<String> PopHandle = driver.getWindowHandles();
Iterator<String> it = PopHandle.iterator();
String ChildHandle = "";
while(it.hasNext())
{   
    if (it.next() != parentHandle)
    {   
        ChildHandle = it.next().toString();
        // because the new window will be the last one opened
    }
}
driver.switchTo().window(ChildHandle);
WebDriverWait wait1 = new WebDriverWait(driver,30);
wait1.until(ExpectedConditions.visibilityOfElementLocated(By.id("something on page")));

// do whatever you want to do in the page here

driver.close();
driver.switchTo().window(parentHandle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:02:07.720

您可能没有使用正确的窗口 ID。

看看这个链接。您可能会在[这里](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.DefaultSelenium.SelectWindow.html)找到答案。

让我知道这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T09:01:15.407

尝试 selenium.getAllWindowNames()、selenium.getAllWindowTitles().. 其中一个肯定会起作用。

# java - java class representation of xml

> ID：11220879
> 
> 赞同：0
> 
> 时间：2012-06-27T06:55:25.747
> 
> 标签：java, xml

> **Possible Duplicate:**
> [What is the best/simplest way to read in an XML file in Java application?](https://stackoverflow.com/questions/428073/what-is-the-best-simplest-way-to-read-in-an-xml-file-in-java-application)

I have an xml like this:

```
<Root>
   <Commodity>
       <Which name="Book" />
       <Book name="harley" price="5" />
       <Book name="Marley" price="8" />
       <Book name="hampi" price="10" />
   </Commodity>
   <Item>
      <Commodity>
         <Which name="fiction" />
         <Book name="harley" price="5" />
         <Book name="Marley" price="8" />
         <Book name="hampi" price="10" />
      </Commodity>
      <Item>
         <Commodity>
            <Which name="thriller" />
            <Book name="hjhj" price="5" />
            <Book name="ccvcv" price="8" />
            <Book name="vcvnnn" price="10"/>
         </Commodity>
      </Item>
   </Item>
</Root> 
```

I feel that this is a pretty complex xml structure since it has a nested tag. is there a way around to generate java class for the structure?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:58:05.373

[如果您有 XSD 或 DTD，则可以使用JAXB](http://jaxb.java.net/)轻松创建文档的表示。

如果您没有架构定义，我建议您编写它。不管怎样，它很快就会派上用场。一旦您尝试验证文档或与任何人共享您的格式。

顺便说一句，这不是一个复杂的 XML 文档；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:05:34.123

虽然我完全同意@Tom 关于模式的必要性，但*有时*这是一种矫枉过正的做法。您可以使用快速简单的 OXM 框架，例如 XStream。见[http://x-stream.github.io/](http://x-stream.github.io/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:38:54.407

请注意，XSD（或其他模式）仅提供对直接子级的约束。所以不清楚您是否只有两个级别的 Item 或无限嵌套。如果是前者，您将不得不手动编写代码 - 模式不会为您完成。

从文档语料库中推断模式是一项非常艰巨的任务。

我还要评论说，Item 的嵌套使用不太可能是指示 Item 的多个属性的有用方法。

# system.reactive - How to observe a collection of items for when they are all valid?

> ID：11220880
> 
> 赞同：2
> 
> 时间：2012-06-27T06:55:26.527
> 
> 标签：system.reactive, reactiveui

I'm using ReactiveUI and the provided `ReactiveCollection<>` class.

In a ViewModel I have a collection of objects, and I wish to create an observable that watches those items for their IsValid property.

This is the scenario I'm trying to solve. In my ViewModel's constructor.

```
this.Items = new ReactiveCollection<object>();

IObservable<bool> someObservable = // ... how do I watch Items so when 
                                   // any items IsValid property changes, 
                                   // this observable changes. There
                                   // is an IValidItem interface.

this.TheCommand = new ReactiveCommand(someObservable);

...

interface IValidItem { bool IsValid { get; } } 
```

**EDIT** Ana's answer got me most of the way there. The solution is the following.

```
this.Items = new ReactiveCollection<object>();
this.Items.ChangeTrackingEnabled = true;

var someObservable = this.Items.Changed
    .Select(_ => this.Items.All(i => i.IsValid)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T17:59:44.933

这取决于您想对IsValid 的结果*做什么。*这是我的做法，尽管它并不完全直观：

```
// Create a derived collection which are all the IsValid properties. We don't
// really care which ones are valid, rather that they're *all* valid
var isValidList = allOfTheItems.CreateDerivedCollection(x => x.IsValid);

// Whenever the collection changes in any way, check the array to see if all of
// the items are valid. We could probably do this more efficiently but it gets
// Tricky™
IObservable<bool> areAllItemsValid = isValidList.Changed.Select(_ => isValidList.All());

theCommand = new ReactiveCommand(areAllItemsValid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:44:01.640

由于您使用的是 ReactiveUI，因此您有几个选择。如果您的对象是`ReactiveValidatedObject`s，您实际上可以使用 ValidationObservable：

```
var someObservable = this.Items
    .Select(o => o.ValidationObservable
        .Select(chg => chg.GetValue()) //grab just the current bool from the change
        .StartsWith(o.IsValid)) //prime all observables with current value
    .CombineLatest(values => values.All()); 
```

如果它们不是 ReactiveValidatedObjects，而是实现 INotifyPropertyChanged，您只需替换第一行并在 ReactiveUI 中为这些对象使用方便的 ObservableForProperty 扩展方法。而不是`o.ValidationObservable`你会使用`o.ObservableForProperty(x => x.IsValid)`. 其余的应该是一样的。

这是一个非常常见的用例，我将它包装在一个扩展方法中`IEnumerable<ReactiveValidatedObject>`

我确信 Paul Betts 会带来更优雅的东西，但这就是我所做的。

# android - 将透明主题应用于活动：不适合在设备中全屏显示

> ID：11220881
> 
> 赞同：4
> 
> 时间：2012-06-27T06:55:40.197
> 
> 标签：android, android-layout, android-theme

我在一个 android 应用程序中工作，我通过在清单文件中**应用样式使活动变得透明。但是在应用这个之后，***我的布局屏幕似乎被左右切割，*并且似乎只显示在中心。

在模拟器中它看起来很好，但在 ma android 设备（ICS）中它只显示在中间。请帮我。提前致谢。

**我的主题风格是：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
  </style>
</resources> 
```

**清单文件：**

```
 <activity
            android:name=".SharescreenActivity"
             android:theme="@style/Theme.Transparent"
            android:screenOrientation="landscape" >
 </activity> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T07:18:44.733

试试这个主题：

```
<activity
        android:name=".SharescreenActivity"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"
        android:screenOrientation="landscape" >
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:12:57.850

```
 android:launchMode="singleTop"
        android:name=".main"
        android:label="main"
        android:screenOrientation="unspecified"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T12:30:03.853

试试这种风格，在 2.3.3+ 设备上检查，完美运行

```
 <style name="Theme.XXXXXXX.Transparent" parent="Theme.XXXXXXX">
          <item name="android:windowBackground">@android:color/transparent</item>
          <item name="android:windowIsTranslucent">true</item>
          <item name="android:background">#00000000</item>
  </style> 
```

# objective-c - 双击按钮时NSTimer不会停止

> ID：11220883
> 
> 赞同：-1
> 
> 时间：2012-06-27T06:55:53.597
> 
> 标签：objective-c, ios5, xcode4.2, nstimer

当我点击按钮时，我必须`NSTimer`在 2 秒后显示图像。当我单击按钮时它工作正常，但问题是当我双击按钮时，NSTimer 没有停止。连续显示图像（调用`NSTimer`方法），而无需单击下次按钮。`NSTimer`当我一次双击/多次单击该按钮时如何停止。

```
*This is my Code*

-(void)buttonClicked
{

timer = [NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(timerClicked) userInfo:nil repeats:YES];
imgviewtransparent.image = [UIImage imageNamed:[imagesArray objectAtIndex:i]];
}

-(void)timerClicked
{
    [timer invalidate];
    timer = nil; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:08:35.827

双击它会安排计时器两次。如果需要，您可以创建一个`BOOL`属性来避免这种情况。

```
-(void)viewDidLoad{
    [super viewDidLoad];
    //Define all your implementation

    //Set BOOL property to no at start
    self.isButtonClicked = NO; // You need to define this BOOL property as well.
}

-(void)buttonClicked {
    // Return if one click is already in process
    if (self.isButtonClicked) {
        return;
    }

    self.isButtonClicked = YES:
    timer = [NSTimer scheduledTimerWithTimeInterval:0.2 target:self         
    selector:@selector(timerClicked) userInfo:nil repeats:YES];
    imgviewtransparent.image = [UIImage imageNamed:[imagesArray objectAtIndex:i]];
}

-(void)timerClicked {
    [timer invalidate];
    timer = nil; 
    self.isButtonClicked = NO;
} 
```

# php - 用十六进制值计算颜色组合

> ID：11220886
> 
> 赞同：1
> 
> 时间：2012-06-27T06:55:58.637
> 
> 标签：php, colors, hex, rgb, color-scheme

在加色混合中，原色是红色、绿色和蓝色 (RGB)。

```
Red    = #ff0000
Green  = #00ff00
Blue   = #0000ff 
```

将**红色**( `#ff0000`) 和**绿色**( `#00ff00`)组合成**黄色**( `#ffff00`)

是否有一些公式可以计算由其他两种颜色组合产生的颜色的十六进制代码？

`#ff0000 + #00ff00`当应用于这样的公式时，会给出`#ffff00`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:59:21.570

您可以在 PHP 中添加两个像这样的 HEX 字符串：

```
$red = "FF0000";
$green = "00FF00";

$yellow = dechex(hexdec($red) + hexdec($green));

echo $yellow; 
```

[**现场演示**](http://codepad.org/Efwb79xQ)

该片段基本上所做的是将十六进制字符串转换为数字，将它们加在一起，然后将总和转换回十六进制字符串。

参考链接：

[十六进制](http://php.net/manual/en/function.hexdec.php)| [十进制](http://php.net/manual/en/function.dechex.php)

# php - Programmatically Log Into SSRS

> ID：11220887
> 
> 赞同：2
> 
> 时间：2012-06-27T06:56:02.007
> 
> 标签：php, curl, reporting-services, www-authenticate

I'm trying to programmatically connect to Microsoft SSRS programmatically. I would assume that this would have to be done using the www-authentication http header in some way or another, however I'm not exactly sure.

I'm doing this because I'm having issues with logging into SSRS as an anonymous web user. clients shouldn't be prompted for a username and password.

Assuming I am on the right path, once logged in, the PHP should act as a relay between SSRS as a client (the user browses SSRS through the PHP page).

If there are any other ways to get this working, please shout!

This is how far I've gotten:

```
<?php
    function get_url_contents($url){
        $crl = curl_init();
        $timeout = 5;
        curl_setopt ($crl, CURLOPT_VERBOSE, 1);
        curl_setopt ($crl, CURLOPT_URL,$url);
        curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($crl, CURLOPT_HTTPHEADER,array("WWW-Authenticate: Basic"));
        curl_setopt ($crl, CURLOPT_HEADER, 1);
        curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
        $ret = curl_exec($crl);
        curl_close($crl);
        return $ret;
    }

    $url = "http://192.168.0.16/ReportServer";
    $str = get_url_contents($url);
    echo $str;
?> 
```

With output being:

```
C:\wamp\bin\php\php5.3.8>php.exe c:\wamp\www\Test\index.php
* About to connect() to 192.168.0.16 port 80 (#0)
*   Trying 192.168.0.16... * connected
* Connected to 192.168.0.16 (192.168.0.16) port 80 (#0)
> GET /ReportServer HTTP/1.1
Host: 192.168.0.16
Accept: */*
WWW-Authenticate: Basic

< HTTP/1.1 401 Unauthorized
< Content-Length: 0
< WWW-Authenticate: NTLM
< WWW-Authenticate: Basic realm="192.168.0.16"
< Date: Wed, 27 Jun 2012 06:31:24 GMT
<
* Connection #0 to host 192.168.0.16 left intact
HTTP/1.1 401 Unauthorized
Content-Length: 0
WWW-Authenticate: NTLM
WWW-Authenticate: Basic realm="192.168.0.16"
Date: Wed, 27 Jun 2012 06:31:24 GMT

* Closing connection #0

C:\wamp\bin\php\php5.3.8> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:19:02.447

因此，如果我没记错的话，SSRS 在开箱即用时“默认”为 NTLM。这意味着它正在寻找一个 Windows AD 帐户。当然，您可以根据您的用例通过配置将这些设置更改为无数其他设置。有关身份验证的更多信息，请查看此页面：http: [//msdn.microsoft.com/en-us/library/bb283249.aspx](http://msdn.microsoft.com/en-us/library/bb283249.aspx)

我很久以前做过一个类似的项目。我们最终使用的最简单的解决方案是创建一个服务帐户，将 PHP 应用程序中使用的各种 SSRS 报告的权限授予服务帐户，然后在 .NET 端创建一个封装 Web 服务，将 SSRS Web 服务称为服务帐户。然后我们从 PHP 端调用这个包装 Web 服务。有关 SSRS Web 服务的信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/ms155398.aspx](http://msdn.microsoft.com/en-us/library/ms155398.aspx)

希望这可以帮助...

# c# - c# 对象不更新

> ID：11220899
> 
> 赞同：1
> 
> 时间：2012-06-27T06:57:10.097
> 
> 标签：c#, object, serialization, reference, deserialization

我正在尝试运行原始游戏服务器。到目前为止，我到了这一点（注释行）并且服务器运行顺利。但是如果我再次从客户端发送对象，它不会更新超过一次。例如，客户端发送具有新位置 Vector2(400,50) 的序列化播放器对象，但服务器将其反序列化到具有旧位置的对象。

播放器代码

```
namespace Commons.Game
{
    [Serializable]
    public class Unit
    {
        #region Fields
        public int ID;
        public Vector2 position;
        public string name;
        public int HP;
        public int XP;
        public int Lvl;
        public bool active;
        public float speed;
        public string password;
        #endregion

        public Unit(Vector2 position, int HP, float speed, string name, string password, int ID)
        {
            active = true;
            this.position = position;
            this.HP = HP;
            this.XP = 0;
            this.speed = speed;
            this.name = name;
            this.Lvl = 1;
            this.password = password;
            this.ID = ID;
        } 
```

服务器代码

```
namespace SocketServer.Connection
{
    class Server
    {
        #region Fields
        Unit[] players;

        UdpClient playersData;

        Thread INHandlePlayers;

        BinaryFormatter bf;

        IPEndPoint playersEP;

        #endregion

        public Server()
        {
            this.players = new Unit[5];

            bf = new BinaryFormatter();

            this.playersData = new UdpClient(new IPEndPoint(IPAddress.Any, 3001));
            this.playersEP = new IPEndPoint(IPAddress.Any, 3001);

            this.INHandlePlayers = new Thread(new ThreadStart(HandleIncomePlayers));
            this.INHandlePlayers.Name = "Handle income players.";

            this.INHandlePlayers.Start();
        }

        private void HandleIncomePlayers()
        {
            Console.Out.WriteLine("Players income handler started.");
            MemoryStream ms = new MemoryStream();

            while (true)
            {
                byte[] data = playersData.Receive(ref playersEP);
                ms.Write(data, 0, data.Length); 
                ms.Position = 0;
                Unit player = null; 
                player = bf.Deserialize(ms) as Unit; //<-- 1st deserialization is OK, bu  after another client update, object doesn't change. So I change Vector with position at client, that sends correct position I want, but at server side position doesn't change after first deserialization.
                Console.Out.WriteLine(player.name + " " + player.position.X + " " + player.position.Y);
                ms.Flush();
                for (int i = 0; i < players.Length; i++)
                {
                    if (players[i] != null && player.ID == players[i].ID)
                    {
                        players[i] = player;
                        break;
                    }
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:21:08.570

伙计，我不太确定，但我会在你的循环中实例化 MemoryStream 对象，如下所示。

我无法正确尝试此代码，对此感到抱歉。

```
 private void HandleIncomePlayers()
    {
        Console.Out.WriteLine("Players income handler started.");
        MemoryStream ms;

        while (true)
        {
            ms = new MemoryStream(); //here
            byte[] data = playersData.Receive(ref playersEP);
            ms.Write(data, 0, data.Length); 
            ms.Position = 0;
            Unit player = null; 
            player = bf.Deserialize(ms) as Unit;

            Console.Out.WriteLine(player.name + " " + player.position.X + " " + player.position.Y);
            ms.Dispose(); //and here
            for (int i = 0; i < players.Length; i++)
            {
                if (players[i] != null && player.ID == players[i].ID)
                {
                    players[i] = player;
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:15:15.480

美好的一天用户1181369，

我自己之前没有使用过 MemoryStream，但我一直在通过 MSDN 库进行一些研究，我怀疑“ms”没有清除，您加载的所有数据实际上都被添加到流中，而不是更换它。

例如，MemorySteam.Flush() 实际上并没有做任何事情 ( [http://msdn.microsoft.com/en-us/library/system.io.memorystream.flush.aspx](http://msdn.microsoft.com/en-us/library/system.io.memorystream.flush.aspx) )。如果是这种情况，那么 for 循环将在找到特定玩家 ID 的第一个实例时中断，而不是找到较新的版本。

另外，我不确定您提供的代码如何反序列化多个玩家，但这超出了这个问题的范围，也可能超出了我目前的知识领域。

遗憾的是，虽然我认为我可能已经诊断出问题，但我目前还没有能力提供除了在每个循环中实例化一个新的内存流之外的解决方案。

# xml - 使用 Matlab 发送 SOAP 请求

> ID：11220900
> 
> 赞同：2
> 
> 时间：2012-06-27T06:57:11.787
> 
> 标签：xml, web-services, matlab, soap, webservices-client

我在发送 Matlab SOAP 请求 callSoapService(endpoint,soapAction,message) <--http://www.mathworks.com/help/techdoc/ref/callsoapservice.html 时遇到问题

例如，如何在[http://www.webservicex.net/FedWire.asmx?WSDL中找到端点、soapAction 和消息](http://www.webservicex.net/FedWire.asmx?WSDL)

我知道 wsdl 中有多个可能的 soapAction、端点和消息，但我只是在寻找任何 SOAP 请求的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:05:50.693

这是您需要经历的过程。

首先，根据 WDSL 定义创建一个类：

```
url = 'http://www.webservicex.net/FedWire.asmx?WSDL';
className = createClassFromWsdl(url); 
```

这将在当前目录中创建一个名为@FedWire 的目录。您可以目录此目录或使用以下内容来探索 FedWire 提供的服务：

```
methods(FedWire) 
```

在您可以使用 Web 服务之前，请创建 FedWire 对象的实例：

```
fw = FedWire;
classType = class(fw) % to confirm the class type. 
```

要使用需要城市和州代码的服务，例如 GetParticipantByLocation：

```
 [Result, FedWireLists] = GetParticipantsByLocation(fw, 'New York', 'NY') 
```

结果应该为真，FedWireLists 是一个包含返回数据的深层嵌套结构。

打开@FedWire\GetParticipantsByLocation.m 揭示了 MATLAB 生成的代码如何使用 createSoapMessage 和 callSoapService。如果服务不支持 WSDL 查询，那么就需要使用这些低级函数。

createSoapMessage 的参数填充如下：

*   命名空间：'http://www.webservicex.net/'
*   方法：'GetParticipantsByLocation'
*   值：{'纽约'，'纽约'}
*   名称：{'City'，'StateCode'}
*   类型：{'{http://www.w3.org/2001/XMLSchema}string'、'{http://www.w3.org/2001/XMLSchema}string'}
*   风格：'文件'

并调用SoapService：

*   端点：'http://www.webservicex.net/FedWire.asmx'
*   SOAPACTION：'http://www.webservicex.net/GetParticipantsByLocation'
*   MESSAGE：createSoapMessage 调用的结果。

以下代码对低级调用进行相同的查询：

```
% createSoapMessage(NAMESPACE,METHOD,VALUES,NAMES,TYPES,STYLE) creates a SOAP message.
soapMessage = createSoapMessage( ...
  'http://www.webservicex.net/', ...
  'GetParticipantsByLocation', ...
  {'New York', 'NY'}, ...
  {'City', 'StateCode'}, ...
  {'{http://www.w3.org/2001/XMLSchema}string', ...
   '{http://www.w3.org/2001/XMLSchema}string'}, ...
  'document')

% callSoapService(ENDPOINT,SOAPACTION,MESSAGE) sends the MESSAGE,
response = callSoapService( ...
    'http://www.webservicex.net/FedWire.asmx', ...
    'http://www.webservicex.net/GetParticipantsByLocation', ...
    soapMessage);

%parseSoapResponse Convert the response from a SOAP server into MATLAB types.
[result, participants] = parseSoapResponse(response) 
```

我在使这些示例正常工作时遇到了很多麻烦，因为我将像这样的服务域名大写，这`www.webserviceX.NET`是我从他们的示例 XML 中获取的。当我改为小写时，它起作用了。

使用的示例是对[http://www.mathworks.co.uk/products/bioinfo/examples.html?file=/products/demos/shipping/bioinfo/connectkeggdemo.html](http://www.mathworks.co.uk/products/bioinfo/examples.html?file=/products/demos/shipping/bioinfo/connectkeggdemo.html)`createClassFromWsdl`的改编

# iphone - UIButtons event Touch up 里面不能正常工作？

> ID：11220901
> 
> 赞同：3
> 
> 时间：2012-06-27T06:57:16.200
> 
> 标签：iphone, ios, uibutton, touch-up-inside

**我的问题有点模糊，这就是我发布所有代码的原因，所以我要求每个人在给我答案之前请测试所有这些代码。谢谢**

![在此处输入图像描述](../Images/900e8ed680980cd8a1eb0adf4ee7d9a9.png)

在我的应用程序中，我以`UIButtons`编程方式创建所有内容，然后将所有这些内容保存`UIButtons`在`NSMutableArray`. 这是我的代码：-

```
-(void)button:(id)sender
{
int btnn = 0;
int spacex = 152;
int spacey=20;
int k=0;
saveBtn = [[NSMutableArray alloc] init];
for (int i=0; i<48; i++)
      {
          if (btnn>6)
          {
              spacey=spacey+25;
              spacex = 152;
              btnn = 0;
          }
          else
          {
              btnn++ ;
              k++;
              UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
              btn.frame = CGRectMake(spacex, spacey, 25.0, 25.0);
              int idx;
              idx = arc4random()%[arr count];
              NSString* titre1 = [arr objectAtIndex:idx];
              [btn setTitle: titre1 forState: UIControlStateNormal];
              [btn setTitleColor: [UIColor yellowColor] forState: UIControlStateNormal];
              [btn.titleLabel setFont:[UIFont fontWithName:@"TimesNewRomanPS-BoldMT" size:22.0]];
              spacex = spacex + 25;
              btn.tag=k;
              [btn addTarget:self action:@selector(aMethod:)forControlEvents:UIControlEventTouchUpInside];
              [saveBtn addObject:btn];
              [self.view addSubview:btn];
        }
    }
} 
```

现在在 (aMethod:) 中，我在每个`UIButton` `TouchUpInside`事件上添加点击声音。这是我的代码。

```
- (void)aMethod:(id)sender
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"button-17" ofType:@"wav"];
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate=self;
    [theAudio play];
} 
```

在我的应用程序启动时一切正常，但是`UIButtons`在 100 次点击后连续点击大约我没有听到点击的声音，当我点击 Next `UIButtons`touchup inside event 它崩溃时。任何人都可以帮助我解决这个问题。Thanx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:19:22.437

> 应用程序由于未捕获的异常`NSInternalInconsistencyException`，原因：**无法在包中加载 NIB**：`NSBundle </Users/moon/Library/Application Support/iPhone Simulator/4.1/Applications/3E14E5D6-4D1B-4DAC-A2B9-07667E99C399/soundtesting.app‌​&gt; (loaded)`名称为 secondclass

是啊。我们在这里遇到的是无法理解日志消息。你的`UIButton`，我只能假设将一个新视图推送到堆栈上，它正在引用一个根本不存在的 NIB。这是一个命名问题，而不是按钮问题。最有可能的是，我会检查是否有任何调用`-initWithNibName:`，看看你的 NIB 是否真的被命名为“二等”。请记住，iOS 文件名是 CaSe SeNsITive。

```
//.h
...
@property (nonatomic, retain) AVAudioPlayer * player;

//.m
-(void)viewDidLoad
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"button-17" ofType:@"wav"];
    player=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    player.delegate=self;
    //in MRC, use [path release];
}

-(void)someMethod:(id)sender
{
    [player play];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:15:48.567

原因可能是我多次播放相同音频的内存泄漏它可能会填满内存使用此代码播放音频

```
- (id)initWithNibName:(NSString*)nibName bundle:(NSBundle*)nibBundleOrNil
{
    if (self = [super initWithNibName:nibName bundle:nibBundleOrNil]) {
        NSString *filePath = [[NSBundle mainBundle] pathForResource:@"button-17" ofType:@"wav"];
        theAudio = [AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:filePath] error:NULL];
    }
    return self;
}

- (IBAction)playSound
{
   [theAudio play];
}

- (void)dealloc
{
   [theAudio release];
   [super dealloc];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:17:16.603

我测试你的代码。aMethod 以下代码中的更改。虽然这我可以获得标签值。

```
- (void)aMethod:(id)sender
{
    UIButton *btn=(UIButton *)sender;

    NSLog(@"\n\n\nselectedbutton tag === %d \n\n\n",btn.tag );

    NSString *path = [[NSBundle mainBundle] pathForResource:@"button-17" ofType:@"wav"];

    NSURL *url = [[NSURL alloc] initFileURLWithPath:path];
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];
    audioPlayer.delegate = self;

    [audioPlayer prepareToPlay];
    [audioPlayer play];   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T07:22:36.863

你有内存问题。当你这样做：

```
- (void)aMethod:(id)sender
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"button-17" ofType:@"wav"];
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate=self;
    [音频播放]；
}
```

1/ 路径永远不会被释放
2/ 音频永远不会被释放

所以你需要在委托方法中释放 theAudio ：

```
– audioPlayerDidFinishPlaying：成功：
```

你需要像这样发布路径：

```
- (void)aMethod:(id)sender
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"button-17" ofType:@"wav"];
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate=self;
    [音频播放]；
    [路径释放]；
}

```

我认为你的问题应该得到解决。

# android - How to execute the query in a plain text file in Android?

> ID：11220908
> 
> 赞同：1
> 
> 时间：2012-06-27T06:57:56.937
> 
> 标签：android, file, sqlite, text

I can read a text file which is in the assets folder. But now I have a DB creation query in the text file; how can I execute that query in Android? Please don't ask why I want to keep queries in a plain text file.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:03:24.047

您应该使用 SqliteOpenHelper 并覆盖 onCreate 方法。在该方法中，您应该从资源中读取文件并执行它。

请参阅[this](http://www.zoomified.com/articles/android/android-sqlite-tutorial.php)了解如何使用 SqliteOpenHelper

然后从资源中读取文件只需这样做（从[这里](https://stackoverflow.com/questions/4087674/android-read-txt-raw-resource-file)）：

```
 @Override
    public void onCreate(SQLiteDatabase database) {
      Resources res = getResources();
      InputStream in_s = res.openRawResource(R.raw.sql);
      byte[] b = new byte[in_s.available()];
      in_s.read(b);
      String sql = new String(b);
      database.execSQL(sql);
    } 
```

然后您还需要实现 onUpgrade （因为它被标记为抽象），但您不需要在该方法中执行任何操作，直到您决定更改数据库的结构。

# c++ - 我可以使用 SFINAE 来检测和调用可能未定义的成员函数吗？

> ID：11220910
> 
> 赞同：3
> 
> 时间：2012-06-27T06:58:17.170
> 
> 标签：c++, templates, c++11, sfinae, member-functions

> **可能重复：**
> [是否可以编写 C++ 模板来检查函数是否存在？](https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-c-template-to-check-for-a-functions-existence)

我有兴趣找到一些 SFINAE 驱动的表达式，这些表达式允许我检测成员函数的存在并相应地处理它，例如：

```
template <typename T>
int maybe_member(T& x, {{sfinae_1}})
{
    return x.maybe_member();
}

template <typename T>
int maybe_member(T& x, {{sfinae_2}})
{
    std::cerr << "This T does not implement maybe_member.\n";

    return 1;
}

int main()
{
    my_type_t instance;

    return maybe_member(instance);
} 
```

一组问题：

*   这可以在 C++ 中完成吗？
*   c++11 是否添加了任何内容以使其更易于实现？

# java - JAVA中的按钮VS图像按钮

> ID：11220915
> 
> 赞同：2
> 
> 时间：2012-06-27T06:58:33.423
> 
> 标签：java, swing, listener, jbutton, jlabel

最近我发现我可以将我的图像用作带有鼠标侦听器的按钮。使用按钮和图像作为按钮的主要区别是什么。这个选项的主要缺点是什么？

按钮：

```
JButton btnNewButton_1 = new JButton("Button");
btnNewButton_1.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent arg0) {
    //Do something          
  }
}); 
```

图片：

```
getJlabel().addMouseListener(new MouseAdapter() {
  @Override
  public void mouseClicked(MouseEvent arg0) {    
    //Do something
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:09:04.327

尽管它们都提供了相似的功能，但我认为大多数用户并不习惯这样的事情。

对于普通用户（至少在我看来），应该单击按钮并查看图像。就像图像为用户提供了一种理解的方式，而按钮为用户提供了一种行动的方式。

您可以在 JButtons 中添加图像（如此[处](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JButton.html)所述），但话虽如此，我认为从用户体验的角度来看，除非您确实必须这样做，否则不应将图像用作按钮，并且当您这样做时，我认为您应包括具体说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:14:51.753

JButton 提供动画（在单击和释放期间）、不同状态的不同外观（例如未启用时）以及人们对实际“按钮”的期望。您可以使用鼠标侦听器根据您的要求将这些（或其中一些）功能添加到图像中。这完全取决于您想要什么以及您愿意手动编写多少代码。

仅供参考，可以将图像添加到 JButtons（主要用于图标）。

# java - 检测 JVM 引导阶段的结束

> ID：11220918
> 
> 赞同：5
> 
> 时间：2012-06-27T06:58:54.737
> 
> 标签：java, jvm

有没有办法检测 JVM 引导阶段的结束？

**编辑：：**

所以为了提供更多的上下文，我想做的是检测 JDK。这是一个完整的工具，可以记录每个 LOAD、STORE、INVOKE 字节码指令。随着指令的执行，它们的数据被发送到一个静态方法，该方法从 xbootclasspath 加载。此静态方法捕获所有这些信息并将所有这些信息存储为跟踪，以便以后执行分析。

现在，当我为 JDK 执行此操作时，我不想干扰类在 JVM 中的加载方式，这可能会导致程序崩溃。我猜测最好的方法是检测 JVM 完成引导的时间点，以便之后我可以安全地打开我的仪器。（我打算在进行引导时不检测任何代码。）这甚至是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:17:50.640

除了我之前关于调查[FERRARI](http://www.inf.usi.ch/projects/ferrari/FERRARI.html)和[MAJOR](http://www.inf.usi.ch/projects/ferrari/MAJOR.html)的评论之外，我还想说几件事：

*   这两个工具都只能作为已编译的 Java JAR 档案下载。
*   所以我写信给今天创造这些工具的科学家，问他们我们的问题。一旦我收到答案，我会在这里报告。
*   无论如何，我研究了 FERRARI 的架构，并认为我可能已经发现了他们是如何做到的。

因此，这是我对您可以做什么的有根据的猜测（仍未经过测试）：

*   检测您的 JDK 类。
*   添加一个简单的类`BootstrapLock`，如下所述。
*   将检测的 + 新类重新打包到修改后的*rt.jar*中。
*   编写一个小的虚拟[Java 代理](http://javahowto.blogspot.de/2006/07/javaagent-option.html)，如下所述。

```
public class BootstrapLock {
    private static volatile boolean inBootstrap = true;

    public static boolean inBootstrap() {
        return inBootstrap;
    }

    public static synchronized void setEndOfBS() {
        inBootstrap = false;
    }
}

public class DummyAgent {
    public static void premain(String options, Instrumentation ins) {
        BootstrapLock.setEndOfBS();
    }
} 
```

所以基本上逻辑如下：

*   代理在主应用程序类之前加载，但在引导之后。
*   因此，代理处于活动状态这一事实意味着引导已完成。
*   因此代理可以关闭全局标记`inBootstrap`。
*   您的检测类可以检查标记以确定是否应该绕过它们的附加检测代码。

我不确定我是否有足够的时间来测试这个很快，但至少我想在这里发布这个答案，所以也许你，Vijai，也可以调查它并提供一些反馈。四只眼睛看到两个以上...

* * *

**更新：**法拉利的一位作者已经回答了我的询问并确认了我上面的解释。您可以只使用 java 代理作为 JVM 完成引导的标记。也许您甚至不需要额外的类，只需检查代理是否已加载到 JVM 中。它会让事情变得更简单，我只是不知道它是否表现良好。只是测试它。

# linq - 如何使用 LINQ 从 SharePoint 列表中筛选自定义列？

> ID：11220922
> 
> 赞同：0
> 
> 时间：2012-06-27T06:59:22.397
> 
> 标签：linq, sharepoint, sharepoint-2010

我的要求是使用 LINQ 在 SharePoint 列表中仅从自定义列中获取项目。

由于我的自定义列是根据在另一个 SPList 上完成的一些计算动态创建的，因此它的计数经常增加和减少，因此我不能使用 SPMetal。

我需要包含一个条件**(!(SPBuiltInFieldId.Contains(field.Id)))**来检查项目是否仅来自以下查询中的自定义字段。

```
List<SPListItem> AllResponses = (from SPListItem Response in oList.Items
                                select Response).ToList(); 
```

请指教。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:32:12.083

我不确定是否有可能只包含自定义列的列表项。即使 Title 不存在，您也会有 ID、Modified、Created 等。此外，还会有许多隐藏的内置列。

如果您想要一个包含具有自定义字段的项目的项目列表，您可以尝试以下操作，它使用[Where](http://msdn.microsoft.com/en-us/library/bb534803.aspx)和[Any](http://msdn.microsoft.com/en-us/library/bb534972)方法：

```
List<SPListItem> AllResponses = 
    (from SPListItem Response in oList.Items select Response)
    .Where(item => item.Fields
        .Cast<SPField>()
        .Any(field => !SPBuiltInFieldId.Contains(field.Id)))
    .ToList(); 
```

这将返回至少具有一个自定义字段的所有项目。

# asp-classic - Server.CreateObject("Microsoft.XMLDOM") 使用 activex 吗？

> ID：11220923
> 
> 赞同：2
> 
> 时间：2012-06-27T06:59:26.983
> 
> 标签：asp-classic

我计划使用 asp classic 创建一个 XML 文件供用户下载，但是我无法通过 activex 来做到这一点。环顾四周，我注意到一个更常见的说法是
`Server.CreateObject("Microsoft.XMLDOM")`

它使用activex吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:05:33.447

归根结底，“ActiveX”只是 COM 组件的一些营销手段。（当时把 X 放在词尾和今天把 i 放在词的开头是一样的）

然而，随着时间的推移，ActiveX 与控件组件、具有某些 UI 的 COM 组件相关联，显然您不能在服务器端使用这些组件。

开始的地方是

```
 Dim xml: Set xml = CreateObject("MSXML2.DOMDocument.3.0") 
```

这是一个 COM 对象，所以严格来说它是一个 ActiveX 组件，但是与 ADODB 等其他组件一样，它在 ASP 等服务器端代码中运行良好

# php - 检查PHP中的请求是否在短时间内重复

> ID：11220925
> 
> 赞同：3
> 
> 时间：2012-06-27T06:59:37.270
> 
> 标签：php, search

我有一些基于php程序的案例。我已经实现了一个处理搜索需求的搜索输入表单。有一个控制器处理搜索请求。一旦我意识到请求的动作是 POST 还是 GET 可能会导致一个漏洞，允许人们在短时间内重复请求。我在想的是检查最后一个请求并与当前请求进行比较。如果时间间隔与禁止的时间范围相匹配（说是0-500ms左右），控制器不会进行搜索，直到请求通过时间范围。

我正在考虑将请求保存在表上，密钥在请求者 real_IP 上。然后将其与新请求 (CMIIW) 进行比较。

有什么好的方法可以正确地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:13:35.327

此解决方案使用 $_SESSION 代替：

```
session_start();

$now = microtime(true); 
$interval = $now - 2;

if( 
  isset( $_SESSION['last_request'] ) 
  && ($_SESSION['last_request'] >= $interval) 
){   
  exit('timeout'); 
}

$_SESSION['last_request'] = $now;

//do query 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:07:00.767

使用 IP 限制搜索次数将导致任何机构（例如：学校）无法使用您的服务/网站/搜索。使用会话限制了对浏览器会话的使用；关闭浏览器将删除会话变量，从而允许新用户使用您的应用程序。

更好的方法是在会话变量中设置最后一次搜索时间（如您所建议的）并检查该变量是否不存在或晚于 500 毫秒前以完成搜索请求。

对于要设置的会话变量，您可以`$_SESSION['lastsearchtime']`在加载会话后使用`session_start()`。请注意 session_start 在已经被调用时可能会触发错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:16:01.683

您在这里有几个选择：

1.  实现一次性令牌（在 wordpress 中，它称为[nonce](http://codex.wordpress.org/WordPress_Nonces)）。并且在每个请求中，您都会检查它。如果令牌已经使用并且再次使用（通过后续请求），则拒绝该请求）。

2.  在会话变量中实现最后一个请求时间，如果仍在时间窗口内检查后面的请求，则拒绝该请求。为此，您可以查看**Max Gherkins**的答案。

# ldap - 无法正确处理 LDAP“force-change-on-add”

> ID：11220927
> 
> 赞同：0
> 
> 时间：2012-06-27T06:59:48.230
> 
> 标签：ldap, opendj

我正在使用 openDJ LDAP 服务器对使用 JNDI 的基于 Java 的项目进行身份验证。大多数其他事情，如密码过期、无效凭据都可以使用异常处理。（在异常中使用可以理解的消息，或者在某些情况下使用错误代码）

`ds-cfg-force-change-on-add`并且`ds-cfg-force-change-on-reset`属性在密码策略中设置为 true。

但是当新创建的用户登录时，或者当用户在管理员重置密码后登录时，不会发生异常。

有人可以告诉我如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:22:53.410

在这种情况下，另一种选择是在 draft-behera-ldap-password-policy 中定义的密码策略请求和响应控制（[示例](http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/Controls.html#431)），由[OpenDJ LDAP SDK](http://opendj.forgerock.org/opendj-ldap-sdk/)和其他 SDK 支持。您将请求控制传递给目录服务器，然后您得到响应控制。

响应控制指示是否需要更改密码、为什么请求的密码修改无法完成、距离到期还有多长时间等。

# java - 使用正确的 jdk 打包

> ID：11220932
> 
> 赞同：1
> 
> 时间：2012-06-27T06:59:58.813
> 
> 标签：java, maven, jar

在花了一整天试图了解为什么 maven 不想根据编译器插件中的条目切换 jdk 之后（请参阅 [http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using -different-jdk.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html) ) 我发现编译器切换正确，但是jar工具没有。考虑以下事实：

1.  我在我的代码中添加了 multi-catch 块作为测试。如果我将标签设置为 java 7，它会编译。如果我更改为 1.6，它会中断。这是预期的行为。

2.  但是，如果我删除菱形运算符（即同时编译），并使用 Java 6 进行编译，我会在清单文件中得到以下内容：

    Manifest-Version: 1.0 Archiver-Version: Plexus Archiver Created-By: Apache Maven Built-By: jaco Build-Jdk: 1.7.0_147-icedtea ...

这当然是比较模棱两可的。有没有办法设置正确的“jar 工具”，以便清单文件反映正在使用的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:12:59.740

这里的一种方法是使用 Maven/Ant：

[Maven：向清单添加自定义属性和构建时间戳](http://twit88.com/blog/2008/02/20/maven-adding-custom-attributes-and-build-timestamp-to-manifest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:36:38.683

工具链插件在这里可能有帮助，不确定，没有尝试过。

[http://maven.apache.org/plugins/maven-toolchains-plugin/](http://maven.apache.org/plugins/maven-toolchains-plugin/)

# php - 按名称获取表单

> ID：11220933
> 
> 赞同：0
> 
> 时间：2012-06-27T06:59:59.493
> 
> 标签：php, phpquery

如何使用 phpQuery 获取具有特定名称的表单？

```
<form method="POST" name="example">
        <input type="hidden"
... 
```

我的尝试：

```
include 'phpQuery-onefile.php';
//example site with this form
$html = file_get_contents("http://www.example.com");

$pq = phpQuery::newDocument($html);
$a = $pq->find("form name=example"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:02:33.017

用这个...

```
$a = $pq->find("form[name=example]"); 
```

[来源](http://code.google.com/p/phpquery/wiki/Selectors#Attribute_Filters)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:03:47.293

phpQuery 支持与**选择器相同的 CSS/jQuery**，所以这就是你想要的：

```
$a = pq("form[name=example]"); 
```

**注意：**也`$pq->find`改为`pq`

**例子：**

```
phpQuery::newDocumentHTML('<form method="POST" name="example">Something</form>');
$a = pq("form[name=example]");
echo $a; 
```

**结果：**

```
Something 
```

在您的情况下，它将返回表单的 html。

# prolog - 在 Prolog 中编写谓词

> ID：11220940
> 
> 赞同：1
> 
> 时间：2012-06-27T07:00:16.897
> 
> 标签：prolog

我有那些谓词：

```
 % Signature: student(ID, Name, Town , Age)/4
      % Purpose: student table information

      student(547457339, riki, beerSheva , 21).
      student(567588858, ron, telAviv , 22).
      student(343643636, vered, haifa , 23).
      student(555858587, guy, beerSheva , 24).
      student(769679696, smadar, telAviv , 25).

      % Signature: study(Name, Department , Year)/3
      % Purpose: study table information

      study(riki, computers , a).
      study(ron, mathematics , b).
      study(vered, computers , c).
      study(riki, physics , a).
      study(smadar, mathematics , c).
      study(guy, computers , b).

      % Signature: place(Department ,Building,  Capacity)/3
      % Purpose: place table information

      place(computers , alon , small).
      place(mathematics , markus , big).
      place(chemistry , gorovoy , big).
      place(riki, zonenfeld , medium). 
```

我需要写谓词`noPhysicsNorChemistryStudents(Name , Department , Year , Town)/4`：找出所有没有学物理或化学的学生的名字。我不知道怎么写。我认为它应该是有切割的东西。

```
 % Signature: noPhysicsNorChemistryStudents(Name , Department , Year , Town)/4 
```

* * *

为什么这不是真的？：

```
 noPhysicsNorChemistryStudents2(Name , Department , Year , Town) :-
  student(_, Name, Town, _), study(Name , Department , Year),
  pred1(Name , physics , Year ) , pred1(Name , chemistry , Year ).

  pred1(N,D ,Y):-  study(N , D , Y ) , ! , fail . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:12:44.390

*Not* in Prolog 有一个奇怪的语法，目的是为了强调这可能与人们所期望的*非常不同。*如果您有兴趣，请参阅[CWA 。](http://en.wikipedia.org/wiki/Closed_world_assumption)

运算符是[\+](http://www.swi-prolog.org/pldoc/doc_for?object=%28%5C%2b%29/1)，在语法上它是平庸的：只需在*目标*前面加上它，当你知道*目标*是错误的时候得到一个真实的目标，反之亦然。

那么你的作业可以是：

```
noPhysicsNorChemistryStudents(Name , Department , Year , Town) :-
   student(_, Name, Town, _),
   \+ ( AnyCondition ). 
```

看看您是否可以设计肯定使用研究（姓名，部门，年份）的 AnyCondition 公式。您可以应用布尔代数分解：

(非 A) 和 (非 B) = 非 (A 或 B)

**在 CWA 下**编辑，我们可以使用***negation as failure*。这就是 Prolog 实现的方式 \+**

 **```
\+ G :- call(G), !, fail. 
```

**添加到更正**

```
\+ G. 
```

现在应该清楚，如果允许 \+ 的谓词就像

```
noPhysicsNorChemistryStudents(Name, Department, Year, Town) :-
  student(_, Name, Town, _),
  study(Name, Department, Year),
  \+ (study(Name, physics, _) ; study(Name, chemistry, _)). 
```

我们可以写

```
noPhysicsNorChemistry(Name) :-
  ( study(Name, physics, _) ; study(Name, chemistry, _) ), !, fail.
noPhysicsNorChemistry(_).

noPhysicsNorChemistryStudents(Name, Department, Year, Town) :-
  student(_, Name, Town, _),
  study(Name, Department, Year),
  noPhysicsNorChemistry(Name). 
```**

# json - 通过 REST Web 服务调用反序列化 json 字符串时出错

> ID：11220944
> 
> 赞同：0
> 
> 时间：2012-06-27T07:00:35.483
> 
> 标签：json, web-services, rest, gson

*有一个 webservise，它以 json 的形式返回一个 appfuse 用户实例，其中这个用户模型包含一个属性角色，它是一组角色对象。我的问题是，当此角色属性不包含角色对象或多个角色对象时，它可以正常工作，但是当它包含单个角色元素时，它就不起作用*

**例外：：**

```
com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 218
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:180)
   at com.google.gson.Gson.fromJson(Gson.java:755)
   at com.google.gson.Gson.fromJson(Gson.java:721)
   at com.google.gson.Gson.fromJson(Gson.java:670)
   at com.google.gson.Gson.fromJson(Gson.java:642)
   at com.steriamobile.ws.smfserver.service.SMFUserServiceImpl.getUser(SMFUserServiceImpl.java:44)
   at com.steriamobile.ws.smfserver.service.SMFUserManagerImpl.getUser(SMFUserManagerImpl.java:19)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
   at java.lang.reflect.Method.invoke(Method.java:597)
   at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
   at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
   at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
   at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
   at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
   at $Proxy32.getUser(Unknown Source) 
```

**休息服务::**

```
 @GET
@Path("/getUser/{id}")
public User get(@PathParam("id") Long id) {
    return userManager.get(id);
} 
```

**反序列化代码：**

```
Gson gson = new Gson();     
User user = gson.fromJson(json,new TypeToken<User>() {}.getType()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:04:46.580

据我了解问题描述，自定义反序列化对于处理 JSON 有时是数组有时是对象的情况是必要的。

使用 Gson 处理这个特定问题在之前的 StackOverflow 线程中已经介绍过，例如[Parsing JSON with GSON, object 有时包含 list 有时包含 object](https://stackoverflow.com/questions/6223023/parsing-json-with-gson-object-sometimes-contains-list-sometimes-contains-object/6225906#6225906)和[Gson 句柄 object 或 array](https://stackoverflow.com/questions/7668507/gson-handle-object-or-array)。

# crystal-reports - 从 Motorola MC 3000 打印 Crystal Report

> ID：11220945
> 
> 赞同：1
> 
> 时间：2012-06-27T07:00:38.293
> 
> 标签：crystal-reports, visual-studio-2005, compact-framework, windows-ce, motorola

是否可以使用无线从 MC 3000（摩托罗拉）打印 Crystal Report 报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-01T15:50:37.653

检查此链接：[https ://social.msdn.microsoft.com/Forums/en-US/218e7296-a6f4-48a1-9dc2-5bb3cda8e004/support-for-crystal-report-tool-in-net-compact-framework ?forum=vssmartdevicesvbcs](https://social.msdn.microsoft.com/Forums/en-US/218e7296-a6f4-48a1-9dc2-5bb3cda8e004/support-for-crystal-report-tool-in-net-compact-framework?forum=vssmartdevicesvbcs)

我不认为这是可能的。移动应用程序通常没有创建和打印报告的任务。尝试使用服务器上的服务来接收必要的数据并将其重定向到报告，然后再重定向到打印机。

# sql - SQL Server多行插入中标识分配的顺序保证

> ID：11220946
> 
> 赞同：2
> 
> 时间：2012-06-27T07:00:41.897
> 
> 标签：sql, sql-server, sql-server-2008

使用表值构造函数 (http://msdn.microsoft.com/en-us/library/dd776382(v=sql.100).aspx) 插入多行时，填充的任何标识列的顺序是否保证匹配TVC 中的行？

例如

```
CREATE TABLE A (a int identity(1, 1), b int)

INSERT INTO A(b) VALUES (1), (2) 
```

a 的值是否由引擎保证以与 b 相同的顺序分配，即在这种情况下，它们匹配 a=1、b=1 和 a=2、b=2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-18T04:08:38.067

捎带我上面的评论，并且知道插入/选择+排序的行为将保证生成身份顺序（#4：[来自此博客](http://blogs.msdn.com/b/sqltips/archive/2005/07/20/441053.aspx)）

假设您希望您的身份生成基于类别 ID，您可以按以下方式使用表值构造函数来实现您的目标（不确定这是否满足您的其他约束）。

```
insert into thetable(CategoryId, CategoryName)
select *
from
  (values
    (101, 'Bikes'),
    (103, 'Clothes'),
    (102, 'Accessories')
  ) AS Category(CategoryID, CategoryName)
order by CategoryId 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-27T07:09:19.373

这取决于您一次插入记录。例如插入后，如果删除 a=2 的记录，然后再次重新插入值 b=2 ，则标识列的值将是 max(a)+1

展示

```
 DECLARE @Sample TABLE
 (a int identity(1, 1), b int)

 Insert into @Sample values (1),(2)

a   b
1   1
2   2

 Delete from @Sample where a=2

 Insert into @Sample values (2)
 Select * from @Sample

 a  b
 1  1
 3  2 
```

# php - 日期与 php 比较从 DB 和当前日期返回的日期不同

> ID：11220950
> 
> 赞同：0
> 
> 时间：2012-06-27T07:00:55.530
> 
> 标签：php, sql-server

假设我有一个日期 2008 年 6 月 9 日上午 12:00，并且想计算从现在开始的天数。我可以用 php 来做吗？

注意：可能的日期也可以返回为 09/06/2008。

尝试使用 DATEDIFF frm [http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx) 但没有运气..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:03:34.470

你应该使用 mysql的[DATEDIFF](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:06:14.857

如果你想在 php 中做，那么：

```
round((strtotime('now')-strtotime('Jun 9 2008 12:00AM'))/3600/24) 
```

但`DATEDIFF`要好得多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:01:46.050

您已尝试过 Microsoft SQL Server 版本的 DATEDIFF，但您的问题被标记为 MySQL。

试试这个：

```
SELECT DATEDIFF(CURDATE(), yourDateColumn) FROM yourTable; 
```

**更新**（现在我们知道它实际上是 MSSQL）：

你需要澄清你的问题。“我有约会”是什么意思？数据库中有日期吗？如果是，请说明您尝试 DATEDIFF 函数的方式。如果它是数据库中的有效日期，那么它的格式就无关紧要，以下内容肯定可以工作：

```
SELECT DATEDIFF(d, yourDateColumn, GETDATE()) FROM yourTable; 
```

列类型可能不是日期而是 varchar？然后你可以像这样转换它：

```
SELECT CONVERT(datetime, yourDateColumnOrYourStringOrWhatever , format) ... 
```

[在这里您可以看到您可以使用哪些格式](http://www.sqlusa.com/bestpractices/datetimeconversion/)。

再次，发布更多信息，否则我们无法帮助您。而且我不会猜测更多。

# objective-c - NSThread setStackSize 没有设置线程的大小

> ID：11220951
> 
> 赞同：2
> 
> 时间：2012-06-27T07:01:01.600
> 
> 标签：objective-c, cocoa-touch, nsthread, stack-size

我正在使用`NSThread`并为其设置堆栈大小，如下所示：

```
thread=[[NSThread alloc]initWithTarget:self selector:@selector(fibnocciForLoop) object:nil];
[thread setStackSize:12];
[thread start]; 
```

正如为 for 编写的 Apple 文档[`-[NSThread setStackSize:]`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/doc/uid/20000311-SW9)：

> **讨论**
> 您必须在开始线程之前调用此方法。在线程启动后设置堆栈大小会更改属性大小（由 stackSize 方法反映），但不会影响为线程预留的实际页数。

但是当我稍后在调试器中检查堆栈大小时，我没有得到我设置的值：

```
print (int)[thread stackSize]
$1 = 524288 
```

`setStackSize:`我的问题是，如果该方法什么都不做，为什么还要存在？

请让我知道我错在哪里，或者API`setStackSize:`是否没有任何用处？

**编辑：** 关于这个问题，请参阅@Josh Caswell 的回答，我错过了 4K 中的 K ，因此上面的代码可以正常工作，如下所示：

```
 thread=[[NSThread alloc]initWithTarget:self
  selector:@selector(fibnocciForLoop) object:nil];
  [thread setStackSize:12*4096];//4K=4096
  [thread start]; 
```

***这个问题的扩展：***

有人可以解释一下为什么Apple给出了这个方法setStackSize，以及如何以及何时使用这个特定的方法，因为它需要用户进行大量计算才能计算出将使用多少字节。

**我想知道它在 NSThread 中的确切用途？**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T07:11:46.597

该[`setStackSize:`文件](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/doc/uid/20000311-SW9)还说：

> 接收者的堆栈大小。此值必须以字节为单位，并且是 4KB 的倍数。

12 不是 4K 的倍数，因此您`NSThread`忽略了您的设置并可能使用其默认值，这似乎是 128 页（iOS（和 OS X）上的页面为 4KB）或 4 MB。

`NSThread`目前尚不清楚您想要 12 是什么意思，但如果您想使用您的设置，您需要将其更改为指示至少 4096 个字节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T07:11:28.077

只需阅读您链接的文档，您是否尝试在 [start]*之后*调用 [setStackSize:12 ]？

```
thread=[[NSThread alloc]initWithTarget:self selector:@selector(fibnocciForLoop) object:nil];
[thread start]; 
[thread setStackSize:4096]; // multiple of 4KB 
```

**编辑：好的，没关系。我完全错误地阅读了文档。不要这样做。**

# android - 如何在 Android 中制作菜单

> ID：11220953
> 
> 赞同：2
> 
> 时间：2012-06-27T07:01:12.940
> 
> 标签：android, menu

我想像网站的一个菜单一样菜单->多个子菜单。但是，我不知道这样创建，我想在多个子菜单下喜欢一个菜单，任何人都可以帮助我提供代码或教程链接赞赏！

我想要如下屏幕截图所示的输出：

![在此处输入图像描述](../Images/b0b57f2f663b2b3ad8c2db19eb2a4a54.png)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:02:18.353

**quickActionDialog**将对您的特定要求有所帮助。

这是**QuickActionDialog**库和实现的链接。

[新QuickAction3D](https://github.com/lorensiuswlt/NewQuickAction3D)

[新快速动作](https://github.com/lorensiuswlt/NewQuickAction)

# java - android.os.StrictMode 实例=2；限制=1

> ID：11220956
> 
> 赞同：7
> 
> 时间：2012-06-27T07:01:26.593
> 
> 标签：java, android

我`StrictMode`在我的应用程序中使用 api android 4.0.3，在我的`BaseApp` 我检测到所有。

```
 builder.detectAll();
    builder.penaltyLog(); 
    StrictMode.VmPolicy vmp = builder.build();
    StrictMode.setVmPolicy(vmp);

    StrictMode.ThreadPolicy.Builder builder1= new StrictMode.ThreadPolicy.Builder();
    builder1.detectAll();
    builder1.penaltyLog();
    StrictMode.ThreadPolicy tdp=builder1.build();
    StrictMode.setThreadPolicy(tdp); 
```

然后。我只是 `this.finish()`在我的活动中调用 , ：总是显示这个错误。为什么？我是否在我的 Manifest.xml 中使用 android:launchMode="singleInstance"，他们总是显示这个错误，为什么？

```
06-27 14:47:34.725: E/StrictMode(18592): class com.onecard.ui.business.AllBusinessActivity; instances=2; limit=1
06-27 14:47:34.725: E/StrictMode(18592): android.os.StrictMode$InstanceCountViolation: class com.onecard.ui.business.AllBusinessActivity; instances=2; limit=1
06-27 14:47:34.725: E/StrictMode(18592):    at android.os.StrictMode.setClassInstanceLimit(StrictMode.java:1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T07:53:42.553

这是严格模式的已知问题。我宁愿忽略它。

# mysql - 当 varchar 类似于 "10.90 EUR" 时，将 varchar 排序为 int

> ID：11220957
> 
> 赞同：0
> 
> 时间：2012-06-27T07:01:27.510
> 
> 标签：mysql, sorting, int, varchar

我有一个带有字段的`diplayPrice`表`varchar`。该字段用`10.90 EUR`、`3.90 EUR`等填充`119.00 EUR`。

我该如何排序？

我尝试了几件事，例如：

```
Select * From produkte ORDER BY length('DisplayPrice') 

Select * From produkte ORDER BY CAST(`DisplayPrice` AS SIGNED) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:14:26.290

或者只是将其转换为十进制，以便您轻松订购。

```
SELECT *  
FROM produkte  
ORDER by Cast(LEFT(DisplayPrice,LENGTH(DisplayPrice)-4) as dec(10,2)) 
```

但是你需要在这里减少你的货币。我建议您将其放在另一列中以更灵活（即排序；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:07:33.347

试试这个查询 -

```
SELECT * FROM produkte ORDER BY DisplayPrice * 1 
```

这将有助于将 DisplayPrice 转换为数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:08:18.433

您可以使用**子字符串**来获取只有数字的部分并对其进行排序。**这是未经测试的。**

```
select *,substring_index(displayPrice,' ',1) as displayPriceVal ...... order by displayPriceVal 
```

# iphone - 在 UItextview 中一次启用滚动属性和禁用（复制、全选、定义）属性

> ID：11220958
> 
> 赞同：1
> 
> 时间：2012-06-27T07:01:30.150
> 
> 标签：iphone, ios, ios4

你好，

我正在 Xcode 4.3.2 中开发一个应用程序。我有一个小问题，我想在我的代码中一次启用滚动视图属性`UITextView`并禁用 (copy,selectAll,define) 属性。`UITextView`

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:06:15.140

子类化`UITextView`和覆盖`canBecomeFirstResponder`：

```
- (BOOL)canBecomeFirstResponder {
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:05:32.287

# 子类化！

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    return NO;
} 
```

# c# - 使用数组作为全局

> ID：11220959
> 
> 赞同：1
> 
> 时间：2012-06-27T07:01:33.967
> 
> 标签：c#, c#-4.0, multidimensional-array

我知道声明 global 不是 c# 的事情。我有一个多维数组的代码，我希望用户输入行数，然后输入每行的列数。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Multidimensional_Array
{

class Program
    {

        static void Main(string[] args)
        {
            Console.WriteLine("ENter the no of rows ");
            int rows=Convert.ToInt32(Console.ReadLine());

           for(int i=0;i<rows;i++)
            {

                Console.WriteLine("Enter no of columns for "+i+" row");
                   var columns  = Convert.ToInt32(Console.ReadLine());
                int [,] multiDynamic=new int[rows,columns];
                Console.WriteLine("enter " +i+ " row elements");
                for(int j=0;j<columns;j++)
                {
                    multiDynamic[i,j]=Convert.ToInt32(Console.ReadLine());
                }

            }
            Console.WriteLine("The array elements are ");

    }
} 
```

现在，在尝试编写显示数组的代码时，我发现数组的范围`multiDynamic`将保留在 for 循环内。有没有办法访问这个数组？

**更新** ——`columns`在最后显示数组的同时也需要访问数组。请为此发布解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:03:43.330

**编辑**根据评论更新。

使用锯齿状数组。

```
 int [][] multiDynamic=new int[rows][];

   for(int i=0;i<rows;i++)
    {
        Console.WriteLine("Enter no of columns for "+i+" row");
           var columns  = Convert.ToInt32(Console.ReadLine());
        multiDynamic[i] = new int[columns];
        Console.WriteLine("enter " +i+ " row elements");
        for(int j=0;j<columns;j++)
        {
            multiDynamic[i][j]=Convert.ToInt32(Console.ReadLine());
        }

    }
    Console.WriteLine("The array elements are "); 
```

您可以访问内部数组（列），如下所示

```
 foreach(var innerArray in multiDynamic)
     {
             foreach(var item in innerArray)
             {
               Console.WriteLine(item);
             }
             Console.WriteLine();
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:03:23.283

在循环外声明数组。

```
int [,] multiDynamic = null;
for(int i=0;i<rows;i++)
        {

            Console.WriteLine("Enter no of columns for "+i+" row");
            var columns  = Convert.ToInt32(Console.ReadLine());
             multiDynamic=new int[rows,columns];
            Console.WriteLine("enter " +i+ " row elements");
            for(int j=0;j<columns;j++)
            {
                multiDynamic[i,j]=Convert.ToInt32(Console.ReadLine());
            }

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:04:19.247

在第一个循环之外声明它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T07:03:50.210

在外部范围声明它：

```
int rows=Convert.ToInt32(Console.ReadLine());
int [,] multiDynamic=new int[rows,columns];
for(int i=0;i<rows;i++)
{

    Console.WriteLine("Enter no of columns for "+i+" row");
       var columns  = Convert.ToInt32(Console.ReadLine());
    Console.WriteLine("enter " +i+ " row elements");
    for(int j=0;j<columns;j++)
    {
        multiDynamic[i,j]=Convert.ToInt32(Console.ReadLine());
    }

}
Console.WriteLine("The array elements are "); 
```

# sharepoint - 为什么我的列没有显示在“添加列以显示每个附加字段”下？

> ID：11220960
> 
> 赞同：0
> 
> 时间：2012-06-27T07:01:55.267
> 
> 标签：sharepoint, lookup-tables

在 SP2010 中，

我想从另一个列表中获取 2 列并合并这些列。但是，当我尝试通过查找执行此操作时，它们没有显示在“添加列以显示这些附加字段中的每一个”下。

但是我尝试了显示的简单文本之一（不是查找）。

无论如何要让它显示哪种查找字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:08:22.913

并非所有字段都支持作为查找字段。我试图找到支持的字段列表，但没有找到。在搜索时，我遇到了这个讨论，它为不支持的列（例如选择字段）提供了修复。

[http://social.msdn.microsoft.com/Forums/en/sharepoint2010general/thread/5a80988a-6b37-4454-957b-856ea16b2e60](http://social.msdn.microsoft.com/Forums/en/sharepoint2010general/thread/5a80988a-6b37-4454-957b-856ea16b2e60)

# android - 如何根据微调器项目选择的位置显示值列表？

> ID：11220962
> 
> 赞同：2
> 
> 时间：2012-06-27T07:02:04.067
> 
> 标签：android, spinner

我有一个微调器，我正在填充它。我有值列表，我也得到了微调器选择的位置。现在我想显示基于 Spinner Item Selected 位置的值列表。怎么做。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:33:05.627

我认为问题在于构建数据

结构数据如下

1- 使用 Bean/Model 将所有数据包装为一个单元，从 json 获取

```
if (loadseq == index) {
                 Dealer dealer  = new Dealer();
                 dealer.setVIN(js.getString("vin");)
                  .......
                   .....

               al.add(dealer);

    public class Dealer{ 
        private String dealer_name1 ;
        private Vehicle ;
        private String vin ;
        private String color ;
        private String parking ;
        private String vindesc ;

         //getter seeter of all

        @Override
            public String toString() {
                return dealer_name1;
            }
        }

        class mySpinnerListener implements Spinner.OnItemSelectedListener {

            @Override
            public void onItemSelected(AdapterView<?> parent, View v, int position,
                    long id) {
                Dealer d = (Dealer) parent.getItemAtPosition(position);

                or 

                Dealer d = al.elmentAt(position);
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {

            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:47:28.233

嘿，这对我有用……第一件事是……说这个国家的微调器

/ ***** ** *** ** *** ** *** ** *** ****国家/地区微调器****** ** *** ** *** ** *** ***** /

```
ArrayList<NameValuePair> alcountry = new ArrayList<NameValuePair>();
                    try{
                        HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost("http://blah.com/country.php");
                        httppost.setEntity(new UrlEncodedFormEntity(alcountry));
                        HttpResponse response = httpclient.execute(httppost);
                        HttpEntity entity = response.getEntity();
                        is = entity.getContent();
                        }catch(Exception e){
                            Log.e("log_tag", "Error in http connection"+e.toString());
                       }

                        try{
                            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                             sb = new StringBuilder();
                             sb.append(reader.readLine() + "\n");

                             String line="0";
                             while ((line = reader.readLine()) != null) {
                                            sb.append(line + "\n");
                              }
                              is.close();
                              Countryresult=sb.toString();
                              }catch(Exception e){
                                    Log.e("log_tag", "Error converting result "+e.toString());
                              }

                              try{
                                    countryarray = new JSONArray(Countryresult);
                                    JSONObject json_data=null;
                                    for(int i=0;i<countryarray.length();i++){
                                           json_data = countryarray.getJSONObject(i);
                                           Countrylist.add(json_data.getString("country_name"));
                                           System.out.println("hq value is " +Countrylist);
                                           Countryadapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,Countrylist);
                                           country.setAdapter(Countryadapter);
                                           country.setOnItemSelectedListener(this);
                                       }
                                    }
                                    catch(JSONException e1){
                                      Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
                                    } catch (ParseException e1) {
                                        e1.printStackTrace();
                                }

                    /*****************************end of spinner for country*******************/ 
```

然后现在在覆盖的方法中

```
@Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int pos,
            long arg3) {
        // TODO Auto-generated method stub
        state = (Spinner)findViewById(R.id.etstate);
        Statelist = new ArrayList<String>();

    /*****************************spinner for state based on country**************************/

    ArrayList<NameValuePair> alstate = new ArrayList<NameValuePair>();
    alstate.add(new BasicNameValuePair("country_name",country.getSelectedItem().toString()));
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://blah.com/state.php");
        httppost.setEntity(new UrlEncodedFormEntity(alstate));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        }catch(Exception e){
            Log.e("log_tag", "Error in http connection"+e.toString());
       }

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
             sb = new StringBuilder();
             sb.append(reader.readLine() + "\n");

             String line="0";
             while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
              }
              is.close();
              Stateresult=sb.toString();
              }catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
              }

              try{
                    statearray = new JSONArray(Stateresult);
                    JSONObject json_data=null;
                    for(int i=0;i<statearray.length();i++){
                           json_data = statearray.getJSONObject(i);
                           Statelist.add(json_data.getString("state_name"));
                           System.out.println("hq value is " +Statelist);
                           Stateadapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,Statelist);
                           state.setAdapter(Stateadapter);

                       }
                    }
                    catch(JSONException e1){
                      Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
                    } catch (ParseException e1) {
                        e1.printStackTrace();
                }

                    state.setOnItemSelectedListener(this);
    /*****************************end of spinner for state*******************/
} 
```

所以这就是你的做法......

# c# - 视觉表单继承不适用于 Visual Studio 2008 中的智能设备/紧凑型框架

> ID：11220967
> 
> 赞同：3
> 
> 时间：2012-06-27T07:02:47.980
> 
> 标签：c#, visual-studio, visual-studio-2008, compact-framework

当我尝试在 Visual Studio 2008 中为 Windows CE 应用程序创建继承表单时，我收到错误消息：

无法为此文件显示设计器，因为无法设计其中的任何类。设计人员检查了文件中的以下类： TestForm --- 无法加载基类“InheritanceTest.BaseForm”。确保已引用程序集并且已构建所有项目。

Visual Studio 2008，版本 9.0.30729.1 SP
Microsoft .NET Framework 版本 3.5 SP1。

我可以在不编写任何代码的情况下解决问题，也无需以任何方式自定义表单。BaseForm 是在同一个项目中还是在单独的类库中都没有区别。项目编译正常，问题在于在设计器中查看继承的表单。它发生在我的两台计算机上。我正在使用 C#。

解决问题的过程：
文件 - 新项目 - Windows C# - 智能设备 - CeInheritanceTest (.Net Framework 3.5)
目标平台 - Windows CE - 设备应用程序
添加 - 新项目 - Visual C# 项目 - Windows 窗体 - Windows 窗体 - “BaseForm”
Build Solution
Add – New Item – Visual C# Items – Windows Forms – Inherited Form – "TestForm"
– 从 BaseForm 继承

如果我对普通的桌面应用程序做同样的事情，表单继承就没有问题。

通过在网上搜索这个问题，看起来其他人正在使用紧凑框架获得表单继承，所以我一定遗漏了一些东西。

我没有编写或修改任何代码，所以基类不是抽象的，我没有使用 PInvoke。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:42:15.037

出现此问题的原因是 .NET CF 控件的设计器元数据不会自动创建并编译到您的项目中，以降低设备的二进制大小。您必须手动创建所谓的“设计时属性文件”。

在包含您的基本表单的项目中，添加一个新项目。从已安装模板列表中选择“设计时属性文件”。它将具有 .xmta 扩展名。如果你打开它，你会发现它是一个 xml 文件。您可以将大量选项添加到此文件中，以控制您的自定义控件/表单的设计和序列化方式，您可以查找有关此的更多信息，但如果您只想能够设计您的表单只需添加一个属性：DesktopCompatible=True。

这是一个示例：

```
<Classes xmlns="http://schemas.microsoft.com/VisualStudio/2004/03/SmartDevices/XMTA.xsd">
  <Class Name="CeInheritanceTest.BaseForm">    
    <DesktopCompatible>true</DesktopCompatible>
 </Class>
</Classes> 
```

确保“类”节点中的名称是基本表单的完全限定名称。编译您的项目，您应该能够在设计器中打开它。您还会注意到项目的输出文件夹中有一个带有 .asmmeta.dll 扩展名的新程序集。这是包含设计人员对具有可设计组件的库的支持的程序集。尝试设计 .NET CF 组件时，Visual Studio 会自动加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:30:26.337

我也努力寻找这个问题的解决方案，我终于解决了。除了将 true 添加到基本表单之外，您还应该在基本表单的 Load 方法中添加以下内容：

```
if (this.Site != null && this.Site.DesignMode == true)
{
  // Design Mode
}
else
{
  // Run-time
} 
```

这会阻止设计器执行 Load 事件处理程序中的代码。还有一件事，如果在继承的表单 Designer.cs 中添加下一个

this.Load += new System.EventHandler(this.BaseForm_Load); this.Closing += new System.ComponentModel.CancelEventHandler(this.BaseForm_Closing);

删除这些行，否则您将在 System.ComponentModel.Design.ServiceContainer.AddService(Type serviceType, ServiceCreatorCallback callback, Boolean promote) 处收到错误

# java - 如何从java中的线程传播异常？

> ID：11220971
> 
> 赞同：4
> 
> 时间：2012-06-27T07:03:07.607
> 
> 标签：java, multithreading, exception, methods, outer-join

代码：

```
 outerMethod {
        @Override
        public void run() {
                innerMethod throws IOException
                }
    } 
```

在线程中执行的方法抛出检查异常 - IOException。我需要在主线程中处理这个异常。喜欢：

```
outerMethod() throws IOException
   {
        @Override
        public void run() {
                innerMethod() throws IOException
                }
    } 
```

这可能吗？如果没有，有什么更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:10:52.860

使用 FutureTask [http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html#get%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html#get%28%29)。它的 get 方法将封装可能在另一个线程上运行的任务的任何异常。

> ExecutionException：尝试检索因抛出异常而中止的任务的结果时抛出的异常。可以使用 Throwable.getCause() 方法检查此异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T07:07:06.373

线程是一个单独的进程，您不能将您的异常传播到其他线程，因为它们无法通过异常路由进行对话。但是，您可以使用线程间通信，并且您必须在发生异常时从逻辑上处理这种情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T07:36:45.480

从此[API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)

如果线程定义了UncaughtExceptionHandler，则调用，否则调用线程组的UncaughtExceptionHandler，否则可以转发给默认的未捕获异常处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:10:17.637

您必须在 run 方法中处理异常：

```
 @Override
        public void run() {
           try {
              innerMethod();
           } catch (Exception e) {
             //handle e
           } 
```

# android - 如何将文件下载到应用程序文件夹？

> ID：11220972
> 
> 赞同：1
> 
> 时间：2012-06-27T07:03:09.073
> 
> 标签：android, file, download

我的代码只允许您保存下载到 SD 卡的文件，如何将下载保存在应用程序本身中？

编码：

```
URL url = new URL(aurl[0]);
URLConnection conexion = url.openConnection();
conexion.connect();

int lenghtOfFile = conexion.getContentLength();
Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

InputStream input = new BufferedInputStream(url.openStream());
FileOutputStream fos = openFileOutput("try.pdf", Context.MODE_PRIVATE);

byte data[] = new byte[1024];

long total = 0;

    while ((count = input.read(data)) != -1) {
        total += count;
        publishProgress(""+(int)((total*100)/lenghtOfFile));
        fos.write(data, 0, count);
    }

    fos.flush();
    fos.close();
    input.close();
} catch (Exception e) {}
return null;

} 
```

应该只改变这条路径就对了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:08:30.583

```
how could save the download within the application itself? 
```

如果您的意思是要将其保存在 Raw 或 Assets 文件夹中，则无论如何都需要清除它的含义，那么这是不可能的。您可以将文件存储在 Data 目录中。

```
openFileOutput("car.pdf",mode) 
```

> 模式可以是私有的、world_redable、world_writable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:08:30.743

根据[Android 文档](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

您可以将文件直接保存在设备的内部存储中。默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。当用户卸载您的应用程序时，这些文件将被删除。

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

# python - 为什么我的IDE建议重写！= 0 to is not 0

> ID：11220976
> 
> 赞同：3
> 
> 时间：2012-06-27T07:03:18.460
> 
> 标签：python, pycharm

默认情况下，我的 python IDE PyCharm 建议更改以下 python 行：

```
if variable != 0: 
```

至

```
if variable is not 0: 
```

为什么会这样建议？执行是否重要（即，对于任何边缘情况，这是否表现不同）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:10:06.907

这是一个错误。您不应该按身份测试整数。虽然它可能适用于小整数，但这只是一个实现细节。

如果你在检查`variable is False`，那就没问题了。也许IDE被语义绊倒了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:06:05.640

`is not`如果您的匹配对象的身份不相等，则应该首选。看这些例子

```
>>> a=[1,2,3]
>>> b=[1,2,3]  #both are eqaul
>>> if a is not b:
     print('they are eqaul but they are not the same object')    

they are eqaul but they are not the same object

>>> if a != b:
     print('hello') #prints nothing because both have same value

>>> a=100000
>>> b=100000
>>> a is b
False
>>> if a is not b:
    print('they are eqaul but they are not the same object')

they are eqaul but they are not the same object
>>> if  a!=b:
    print('something') #prints nothing as != matches their value not identity 
```

但是，如果存储在 a 和 b 中的数字是小整数或小字符串，则`a is not b`不会像 python 进行一些**缓存**那样工作，并且它们都指向同一个对象。

```
>>> a=2
>>> b=2
>>> a is b
True
>>> a='wow'
>>> b='wow'
>>> a is b
True
>>> a=9999999
>>> b=9999999
>>> a is b
False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T07:17:50.830

!= 运算符检查值的不相等性。`is`运算符用于检查身份。在 Python 中，不能有两个相同整数文字的实例，因此表达式具有相同的效果。`is not 0`读起来更像英语，这可能是 IDE 建议它的原因（尽管我不会接受这个建议）。

我确实尝试了一些分析。我为这两个表达式转储了字节码，并且看不到操作码有任何区别。一个有`COMPARE_OP 3 (!=)`，另一个有`COMPARE_OP 9 (is not)`。他们是一样的。然后我尝试了一些性能运行，发现`!=`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T07:10:30.667

运算符“不是”检查对象身份，运算符 != 检查对象相等性。我认为你不应该在你的情况下这样做，但也许你的 ide 建议在一般情况下这样做？

# iphone - 如何在 Facebook Wall 发布消息中添加 NEW LINE？

> ID：11220983
> 
> 赞同：3
> 
> 时间：2012-06-27T07:03:40.550
> 
> 标签：iphone

如何在 Facebook 帖子墙消息（“标题”）中添加新行...\n 不接受任何其他方式...

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               StrImg, @"picture",
                               StrName, @"name",
                               strURL, @"link",
                               emailBody, @"caption",
                               actionLinksStr, @"actions",
                               nil];

[[delegate facebook] dialog:@"feed"
                  andParams:params
                andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:19:21.657

请尝试以下代码可能会解决您的问题。

```
 - (IBAction)Publish {
        // Show the activity indicator.
        [self showActivityView];

        // Create the parameters dictionary that will keep the data that will be posted.
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"My test app", @"name",
                                       @"http://www.google.com", @"link",
                                       @"FBTestApp app for iPhone!", @"caption",
                                       @"This is a description of my app", @"description",
                                       @"Hello!\n\nThis is a test message\nfrom my test iPhone app!", @"message",              
                                       nil];

        // Publish.
        // This is the most important method that you call. It does the actual job, the message posting.
        [facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self];

**Edit**

    [[delegate facebook] dialog:@"feed"
                          andParams:params
                        andDelegate:self];
} 
```

# javascript - 异步javascript问题

> ID：11220988
> 
> 赞同：-1
> 
> 时间：2012-06-27T07:03:53.423
> 
> 标签：javascript, jquery

我正在尝试创建一个函数，该函数从页面的各种 html 元素中获取值来创建一个字符串并传递给一个变量。现在这适用于除 IE 8 和 9 之外的所有浏览器。 IE 倾向于跳过获取值的部分并直接进入变量并且什么也没找到..

有没有办法同步它，以便它在 IE 中工作？

```
function seturl() {
        var qstring = returnQString();

        $('span.keyword').text($.trim($('#hdnKeyWord').attr('value')));
        $('input.search_box').attr('value', $.trim($('#hdnKeyWord').attr('value')));
        $('#hdnSearchKeyword').attr('value', $.trim($('#hdnKeyWord').attr('value')));

        $(".search_box").val($.trim($("#hdn_span_hdnKeyWord").text()));
        $(".header_inner input[type='text']").focus();
        $(".search_term input[type='text']").focus();
        $('#locationurl').attr('value', qstring);
    }

    function returnQString(){
        var qstring = $.trim($('#locationurl').attr('init')); //initial value of the url
        qstring += "?type=" + $('#hdnSTSearch').attr('value'); // type of handler hit
        qstring += "&keyword=" + encodeURIComponent($('#hdnKeyWord').attr('value')); // keyword addition
        qstring += "&pagestart=" + $('#current_page').attr('value'); // pagestart(current page) addition
        qstring += "&pagesize=" + $('#show_per_page').attr('value'); // per page size addition
        qstring += "&facets=" // facetsearch
        $.each(selectedFilter.items, function (index, value) {
            qstring += value.filter + ",";
        });     
        qstring += "&selectedSection=" + selectedSection // Section Select
        return qstring;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:21:24.570

可能是因为分号问题。我找到了两个地方`returnQString`

```
function returnQString(){
    var qstring = $.trim($('#locationurl').attr('init')); 
    qstring += "?type=" + $('#hdnSTSearch').attr('value');
    qstring += "&keyword=" + encodeURIComponent($('#hdnKeyWord').attr('value')); 
    qstring += "&pagestart=" + $('#current_page').attr('value');
    qstring += "&pagesize=" + $('#show_per_page').attr('value');
    qstring += "&facets=" ; // THIS LINE
    $.each(selectedFilter.items, function (index, value) {
        qstring += value.filter + ",";
    });     
    qstring += "&selectedSection=" + selectedSection; //THIS LINE
    return qstring;
} 
```

# c# - n 层和每一层都需要的对象？

> ID：11220991
> 
> 赞同：2
> 
> 时间：2012-06-27T07:04:01.250
> 
> 标签：c#, poco, n-tier-architecture

我们有一个经典的 3 层架构应用程序。现在我们面临一个小问题，我们不知道处理它的最佳方法。

在最后一层（数据库层）中，我们有一个 POCO 类，它填充了来自数据库的数据。在顶层，我们有一个 MVC3 asp.net Web 应用程序。如果 MVC 应用程序可以读取 POCO 类，它会运行得最好。

但是由于 GUI 层不能直接访问数据库层，所以它不能得到完全相同的类。

从最后一层到顶层获得 POCO 类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:56:44.817

实际问题是您的实体不应在数据层中定义。数据层，以及应用程序中的任何其他层，有一天可能会被完全重写，并且您不希望实体本身与这些层中的任何层相关联。

换句话说，在一个单独的项目中定义您的实体，然后从所有其他项目中引用它：

```
- Entities

- Data access layer
  + references Entities

- Business layer
  + references DAL
  + references Entities

- Presentation layer
  + references BL
  + references Entities 
```

存储库接口也是如此：如果您使用存储库模式来抽象您的数据访问，`Entities`则项目应该包含所有存储库接口，然后可以通过特定的 DAL 选择来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:48:03.170

您可以创建从所有不同层项目引用的 DTO 项目。通过这种方式，您可以在应用程序的所有层之间共享 DTO POCO。

# clojure - Clojure：基于模式匹配的编程

> ID：11220999
> 
> 赞同：2
> 
> 时间：2012-06-27T07:04:28.777
> 
> 标签：clojure

## 语境

我为这个问题很软/很哲学而道歉；这是一组我无法形式化的想法/观察/直觉。

我最近一直在用 Clojure 编写大型应用程序，并使用 * clojure 的匹配宏 * （1） mustache 和（2） compojure 的规则调度系统 * com.cederick 的安全朋友

我喜欢这三个的地方——不是具有函数的对象，而是所有三个都涉及某种显式形式的模式匹配来调度接下来发生的事情。

## 问题

这背后有通用的编程技术吗？如果是这样，它叫什么？这种模式还出现在哪里，我如何才能了解更多信息？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:53:26.753

模式匹配目前还不是 clojure/core 的一部分，但您可以使用 multimethod、cond、case 宏和[https://github.com/clojure/core.match](https://github.com/clojure/core.match)库。