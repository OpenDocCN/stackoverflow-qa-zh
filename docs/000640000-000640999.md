# StackOverflow 问答 000640000-000640999

# wpf - 有没有办法在从 WPF 面板中添加/删除孩子时得到通知？

> ID：640000
> 
> 赞同：5
> 
> 时间：2009-03-12T18:56:54.387
> 
> 标签：wpf

我找不到在从 WPF 面板中添加或删除子项时会触发的事件。这样的事件是否存在而我只是想念它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-12T19:12:38.640

我找不到活动，但你可以试试这个[`Panel.OnVisualChildrenChanged`](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.onvisualchildrenchanged(VS.85).aspx)方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-30T22:04:16.210

或者，您可以将面板包装在 UserControl（可能称为 ObservablePanel？）中，该控件具有 AddChild 方法，该方法在将项目添加到面板后触发事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-25T16:01:44.040

也可以覆盖 Panel.CreateUIElementCollection(...)，因此它返回从 UIElementCollection 派生的自定义类型。在 UIElementCollection 中，您可以覆盖 Add、Remove 等。

```
public class CustomPanel: Panel
{
    protected override UIElementCollection CreateUIElementCollection(FrameworkElement logicalParent)
    {
        ObservableUIElementCollection uiECollection = new ObservableUIElementCollection(this, logicalParent);
        uiECollection.RaiseAddUIElement += OnUIElementAdd;

        return uiECollection;
    }
}

public class ObservableUIElementCollection : UIElementCollection
{
    public ObservableUIElementCollection(UIElement visualParent, FrameworkElement logicalParent)
        : base(visualParent, logicalParent)
    {

    }

    public event EventHandler<UIElement> RaiseAddUIElement;

    public override int Add(UIElement element)
    {
        OnRiseAddUIElementEvent(element);
        return base.Add(element);
    }

    protected virtual void OnRiseAddUIElementEvent(UIElement e)
    {
        // copy to avoid race condition
        EventHandler<UIElement> handler = RaiseAddUIElement;

        if (handler != null)
            handler(this, e);
    }

} 
```

# python - 如何使用正则表达式删除括号内的文本？

> ID：640001
> 
> 赞同：94
> 
> 时间：2009-03-12T18:56:57.413
> 
> 标签：python, regex, perl

我正在尝试处理一堆文件，然后我需要更改以删除文件名中的无关信息；值得注意的是，我正在尝试删除括号内的文本。例如：

```
filename = "Example_file_(extra_descriptor).ext" 
```

我想对一大堆文件进行正则表达式，其中括号表达式可能位于中间或末尾，并且长度可变。

正则表达式会是什么样子？首选 Perl 或 Python 语法。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2009-03-12T18:59:43.133

```
s/\([^)]*\)// 
```

所以在 Python 中，你会这样做：

```
re.sub(r'\([^)]*\)', '', filename) 
```

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2016-11-15T23:07:54.223

匹配括号*中没有其他字符的`(`子`)`*字符串的模式（如`(xyz 123)`in `Text (abc(xyz 123)`）是

```
\([^()]*\) 
```

**详情**：

*   `\(`- 一个左圆括号（注意在 POSIX BRE 中，`(`应该使用，见`sed`下面的例子）
*   `[^()]*`- 零个或多个（由于`*` [Kleene 星形量词](http://www.regular-expressions.info/repeat.html)）字符，*而不是在*[*否定字符类*/ *POSIX 括号表达式*](http://www.regular-expressions.info/charclass.html#negated)中定义的字符，即除`(`和之外的任何字符`)`
*   `\)`- 一个右圆括号（不允许在 POSIX BRE 中转义）

删除代码片段：

*   **JavaScript**：`string.replace(/\([^()]*\)/g, '')`
*   **PHP**：`preg_replace('~\([^()]*\)~', '', $string)`
*   **珀尔**：`$s =~ s/\([^()]*\)//g`
*   **蟒蛇**：`re.sub(r'\([^()]*\)', '', s)`
*   **C#**：`Regex.Replace(str, @"\([^()]*\)", string.Empty)`
*   **VB.NET**：`Regex.Replace(str, "\([^()]*\)", "")`
*   **爪哇**：`s.replaceAll("\\([^()]*\\)", "")`
*   **红宝石**：`s.gsub(/\([^()]*\)/, '')`
*   **: **_**`gsub("\\([^()]*\\)", "", x)`**
***   **卢阿**：`string.gsub(s, "%([^()]*%)", "")`*   **重击/sed**：`sed 's/([^()]*)//g'`*   **Tcl**：`regsub -all {\([^()]*\)} $s "" result`*   **C++`std::regex`**：`std::regex_replace(s, std::regex(R"(\([^()]*\))"), "")`*   **目标-C**：
    `NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\([^()]*\\)" options:NSRegularExpressionCaseInsensitive error:&error]; NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@""];`*   **斯威夫特**：`s.replacingOccurrences(of: "\\([^()]*\\)", with: "", options: [.regularExpression])`*   **谷歌大查询**：`REGEXP_REPLACE(col, "\\([^()]*\\)" , "")`**

 *** * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-03-12T19:08:27.340

我会使用：

```
\([^)]*\) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-12T22:55:18.853

如果您不是绝对需要使用正则表达式，请考虑~~使用~~Perl 的[Text::Balanced](http://perldoc.perl.org/Text/Balanced.html)来删除括号。

```
use Text::Balanced qw(extract_bracketed);

my ($extracted, $remainder, $prefix) = extract_bracketed( $filename, '()', '[^(]*' );

{   no warnings 'uninitialized';

    $filename = (defined $prefix or defined $remainder)
                ? $prefix . $remainder
                : $extracted;
} 
```

你可能会想，“当正则表达式在一行中发挥作用时，为什么要这样做呢？”

```
$filename =~ s/\([^}]*\)//; 
```

Text::Balanced 处理嵌套括号。所以`$filename = 'foo_(bar(baz)buz)).foo'`会被正确提取。此处提供的基于正则表达式的解决方案将在此字符串上失败。一个会在第一个关闭的时候停下来，另一个会吃掉它们。

```
 $filename =~ s/\([^}]*\)//;
   # returns 'foo_buz)).foo'

   $filename =~ s/\(.*\)//;
   # returns 'foo_.foo'

   # text balanced example returns 'foo_).foo' 
```

如果任一正则表达式行为是可接受的，请使用正则表达式——但记录限制和所做的假设。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-12T20:03:48.033

如果路径可能包含括号，那么`r'\(.*?\)'`正则表达式是不够的：

```
import os, re

def remove_parenthesized_chunks(path, safeext=True, safedir=True):
    dirpath, basename = os.path.split(path) if safedir else ('', path)
    name, ext = os.path.splitext(basename) if safeext else (basename, '')
    name = re.sub(r'\(.*?\)', '', name)
    return os.path.join(dirpath, name+ext) 
```

默认情况下，该函数在路径的目录和扩展部分中保留带括号的块。

例子：

```
>>> f = remove_parenthesized_chunks
>>> f("Example_file_(extra_descriptor).ext")
'Example_file_.ext'
>>> path = r"c:\dir_(important)\example(extra).ext(untouchable)"
>>> f(path)
'c:\\dir_(important)\\example.ext(untouchable)'
>>> f(path, safeext=False)
'c:\\dir_(important)\\example.ext'
>>> f(path, safedir=False)
'c:\\dir_\\example.ext(untouchable)'
>>> f(path, False, False)
'c:\\dir_\\example.ext'
>>> f(r"c:\(extra)\example(extra).ext", safedir=False)
'c:\\\\example.ext' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-12-14T22:30:50.133

对于那些想要使用 Python 的人，这里有一个简单的例程，可以删除带括号的子字符串，包括带有嵌套括号的子字符串。好的，它不是正则表达式，但它会完成这项工作！

```
def remove_nested_parens(input_str):
    """Returns a copy of 'input_str' with any parenthesized text removed. Nested parentheses are handled."""
    result = ''
    paren_level = 0
    for ch in input_str:
        if ch == '(':
            paren_level += 1
        elif (ch == ')') and paren_level:
            paren_level -= 1
        elif not paren_level:
            result += ch
    return result

remove_nested_parens('example_(extra(qualifier)_text)_test(more_parens).ext') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-12T19:03:40.673

如果您可以使用`sed`（可能从您的程序中执行，它会很简单：

```
sed 's/(.*)//g' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-12T21:48:15.740

```
>>> import re
>>> filename = "Example_file_(extra_descriptor).ext"
>>> p = re.compile(r'\([^)]*\)')
>>> re.sub(p, '', filename)
'Example_file_.ext' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-03T09:30:47.570

Java代码：

```
Pattern pattern1 = Pattern.compile("(\\_\\(.*?\\))");
System.out.println(fileName.replace(matcher1.group(1), "")); 
```

# c# - LinqToSQL 是否足够强大？更强大但同样流畅的界面不是很容易构建吗？

> ID：640004
> 
> 赞同：0
> 
> 时间：2009-03-12T18:57:52.810
> 
> 标签：c#, sql, database, linq-to-sql

在上一个问题中，我问过[ORM 库是否是次优解决方案](https://stackoverflow.com/questions/458802/doesnt-linq-to-sql-miss-the-point-arent-orm-mappers-subsonic-etc-sub-opti)，并收到了很多很好的反馈。当我进一步考虑这个问题时，我得出结论，LinqToSQL（现在）和 LinqToEntities（未来）的主要好处在于它们能够减少过程代码和 SQL 之间的“不匹配”。鉴于 LinqToSQL 作为一种完整的数据查询语言的局限性，我不倾向于同意它的优势远不止于此，但我想知道其他人的意见。

首先，程序代码和 SQL 之间的“不匹配”是什么意思？如果您曾经开发过数据库应用程序，那么您可能已经熟悉（并且厌倦了）与数据库交互所需的步骤：设置所有参数，输入 SQL 命令，然后将预期结果手动转换回变量或代码中使用的实例。

LinqToSql 通过使用“流利的”接口、lambda 表达式、扩展方法等使这变得更容易。最终结果是很容易将原生 C# 标量类型推送到数据检索调用中，并且很容易自动生成原生 C# 类实例. 以 MS 网站上的这个例子为例：

```
var q =
   from c in db.Customers
   where c.City == "London"
   select c;
foreach (var cust in q)
   Console.WriteLine("id = {0}, City = {1}",cust.CustomerID, cust.City); 
```

很酷！

*那么问题是什么？*

好吧，正如我在顶部链接的文章中指出的那样，存在许多问题。对我来说，*最大*的障碍是任何在 SQL 方面能力最低的人都会立即遇到障碍。不仅仅是作为 SQL 的替代品而创建的许多构造不熟悉甚至笨拙（Group By？我们在 LinqToSql 中谈论的是*丑陋的）。*更大的问题是有许多本机不支持的常见结构（例如 DateDiff）。充其量，您可以从 Linq 中“逃脱”并将 SQL 代码提交到 Linq 调用流中。

那么，简单地将 SQL 嵌入到 C#（或 VB）中，以允许您自由声明您的 SQL 的方式，同时也为您提供简单的参数嵌入和自动转换为本机类的方式，不是更好吗？例如，如果我们在一个类中只实现六个函数，我们可以这样写（其中 qry 是我们查询类的一个实例）：

```
var ListOfEnrollees = 
           qry.Command("Select b.FirstName, b.LastName, b.ID From ClassEnroll a inner join Folder b on (a.ClientID = b.ClientID) ")
             .Where ("a.ClassID", classID)
             .AND()
             .Append("(DateDiff(d, a.ClassDate, @ClassDate) = 0) Order By LastName;")
             .ParamVal(classDate)
             .ReturnList<EnrollListMemberData>(); 
```

*Command*只是让我们开始收集 SQL 语句，*Where*启动我们的 SQL Where 子句并输入第一个参数，*Append 附加*更多 SQL，*ParamVal*只是输入一个参数值以匹配上一行中找到的 SQL 参数，而*ReturnList*会转换为类所需的魔法。请注意，这只是 SQL：连接很简单，支持 DateDiff（或任何其他 SQL 结构）等。我们可以在 SQL 窗口中对其进行测试，然后将其剪切并粘贴到我们的代码中，并根据需要将其分解以输入我们的参数。这再简单不过了。

现在，上面显示的基本构造对我来说似乎非常简单，它可以使用我*已经拥有的 SQL 知识处理**任何*SQL 构造。我确实必须使用一些反射和其他一些很酷的新 C# 3 构造来使 ReturnList（和类似的）调用工作，但总的来说，它非常简单。我还添加了一些花里胡哨，使界面更加流畅。所以，这是我的问题，我很想听听来自社区的意见：

 *为什么我需要掌握 LinqToEntities 的复杂性，甚至会招致 LinqToSql 的开销？这不是给了我 LinqToSql 给我的一切以及更多吗？除了奇异的关系到对象映射之外，它甚至不包括 LinqToEntities 吗？

**更新**：Hamish Smith 在下面争辩说，LINQ 有朝一日可能会成为一种功能齐全的数据操作语言，功能如此强大，甚至不需要 SQL。这是一个重要的引爆点论点，我没有讨论但我同意。我的立场的本质是，虽然 LinqToSql 有一些实际优势，但它仍然*远未*达到 Hamish 的目标。这是一个非常现实和重要的缺点。

Hamish 还正确地辩称，我仍在使用嵌入式 SQL——我还没有“解决”这个问题。然而，对我来说，这是一个*特性*，而不是一个错误。SQL 在选择和操作关系数据（毕竟这是我们正在使用的数据）方面仍然要好得多，我*希望*能够使用它来制定我的解决方案。我认为嵌入式 SQL 与其说是它与 C# 之间的阻抗不匹配不如说是问题。但是，通过使用受 Linq 启发的 C# 3 的新特性，我可以在很大程度上消除这种“阻抗不匹配”并获得两全其美的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-13T09:35:20.610

> 那么，简单地将 SQL 嵌入到 C#（或 VB）中，以允许您自由声明您的 SQL 的方式，同时也为您提供简单的参数嵌入和自动转换为本机类的方式，不是更好吗？

我通常做的事情与此非常接近。我在存储过程中编写 SQL，所以我得到了真正的 SQL 的自由。在 C# 中，我使用 Linq 的 DBML 以自然的方式访问存储过程。这感觉就像两全其美。

真正的解决方案对我来说看起来更简单：在 C# 代码中嵌入 SQL 并让编译器生成强类。如果 Visual Studio 支持这一点，我怀疑有人会使用其他任何东西。

（总是有人试图创建实体框架和“架构”来消除对 SQL 的需求。据我所知，这从来没有真正奏效过，只是因为结果非常难以维护并且速度极慢。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T19:09:17.977

我认为 LinqToSQL 和 LinqToEntities 都过分了。我采取了简约的方法。我开发了一个使用 DTO 并反映其属性以动态生成 SQL 的 DAL。它适用于我不需要也不想考虑 SQL 的 95% 的情况。对于所有其他情况，我的 DAL 允许我编写任何我想要的 SQL 并返回一个 DataSet，或者如果给定一个 DTO，它将用结果填充它。它还允许调用具有相同概念的存储过程，返回 DataSet 或 DTO。它对我来说效果很好，如果我不想看，我不需要看任何 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T19:17:43.510

linq2sql 内置了分页支持并且是强类型的。

如果您不使用实体跟踪，则可以避免使用它。

您可以通过将其包装到方法中来调用 sql 函数。

如果您使用实体跟踪，您可以轻松地批处理多个数据操作调用（自动执行此操作，因此调用 SubmitChanges）。因此，您不必敲击数据库 15 次来执行 5 次插入和 10 次更新。

当您想要获取结构化信息时，它也很方便，例如：

```
var someInfo = from s in Context.Somethings
               select new SomeInfo
               {
                   AField = s.SomeColumn,
                   RelatedStuff = s.RelatedInfo.Where(someconditionhere)
               }; 
```

我会说这是非常值得的。另请注意，如果您真的需要获得最高性能，您可以编译表达式，它将匹配数据读取器的速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-13T00:47:02.237

您对查询类的建议是您仍将 SQL 直接嵌入到应用程序代码中。使用 LINQ + ORM 解决方案得到的是应用程序代码从不包含 SQL。你仍然有不匹配和分心处理代码。您在帖子中提到它：

> 我们可以在 SQL 窗口中对其进行测试，然后将其剪切并粘贴到我们的代码中，并根据需要将其分解以输入我们的参数。这再简单不过了。

LINQ 语法试图给我们的是作为代码中的一等公民的查询。是的，有些东西很笨拙，有些东西可能还不完全正确，但是 LINQ 的既定目标是将查询和应用程序代码集成到不存在脱节的地步。听起来这不是您所追求的，因此也许将 SQL 作为对编译器和运行时不透明的字符串文字嵌入对您来说会更好。我们知道它可以工作，我们已经做了很多年了。
另一个好处是 LINQ 语句不受供应商特定变化的影响（这是 LINQ 提供者的问题）。您最终可能会将传递给 qry.Command() 的 SQL 字符串绑定到特定数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-26T11:30:15.307

var q = DataContext.ExecuteQuery<Etc>("SELECT * FROM etc") 通常做得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T21:35:52.290

目前，[我不是](https://stackoverflow.com/questions/276433/do-you-think-its-advantageous-to-switch-to-entity-framework/276439#276439)Entity Framework 的粉丝，但 4.0 看起来改进了很多。我不确定它是否像 Vista 与 Windows 7 一样大，但肯定更好。

目前，我发现 LINQ-to-SQL 涵盖了我经常需要的大部分内容。哎呀，即使我只是用它来连接存储过程而不必编写参数代码，这也是我的优势。我发现 CRUD 非常适合简单的正交数据操作。对于更复杂的场景，我喜欢 UDF 等 - LINQ-to-SQL 支持良好。

只要您[将其隐藏在存储库](http://marcgravell.blogspot.com/2009/02/pragmatic-linq.html)中，您甚至都不会把自己画到角落里。

Re datediff - 你看过`SqlMethods`吗？

# vb.net - VB.net：你如何得到开始年份的日期？

> ID：640006
> 
> 赞同：2
> 
> 时间：2009-03-12T18:58:14.883
> 
> 标签：vb.net

今天是 2009 年 3 月 12 日，基于今天的日期。我想得到今年的开始日期，那就是 2009 年 1 月 1 日。有谁知道是否有办法做到这一点？这样做的原因是我想获取今天日期的 DateDiff 与今天日期年份的开始日期。

杰克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-12T19:00:28.217

试试这个

**编辑**正如康拉德所指出的，保持简单

VS 任何版本

```
Dim year As New DateTime(DateTime.Now.Year, 1, 1) 
```

VS2008（选项推断开启）

```
Dim year = new DateTime(DateTime.Now.Year, 1, 1) 
```

VS2005 或 VS2008（选项推断关闭）

```
Dim year As DateTime = new DateTime(DateTime.Now.Year, 1, 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T19:17:36.583

有 DayOfYear 日期方法可以回答您的最后一个问题...

```
Dim d As New Date(2009, 3, 12)

Console.WriteLine(d.DayOfYear) '71
Console.WriteLine(DateDiff(DateInterval.Day, New Date(d.Year, 1, 1), d)) '70 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T19:58:03.837

```
 Dim day1 As DateTime = New DateTime(DateTime.Now.Year, 1, 1)
    Dim ts As TimeSpan
    '
    ts = DateTime.Now - day1
    '
    Label1.Text = ts.Days.ToString
    'or
    Label1.Text = ts.TotalDays.ToString 
```

# eclipse - 布置 SWT 组件层次结构

> ID：640019
> 
> 赞同：2
> 
> 时间：2009-03-12T19:00:11.853
> 
> 标签：eclipse, swt

**当 SWT 控件的首选大小发生变化时，使组件层次结构重新布局的最佳方法是什么？** 我的特殊情况是标签文本的动态更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T19:39:01.807

我知道的唯一方法，由 bokowski 建议作为对上[一个问题](https://stackoverflow.com/questions/586414/why-does-an-swt-composite-sometimes-require-a-call-to-resize-to-layout-correctl)`ancestor`的回答，是将组件层次结构向上移动到带有滚动条的 Composite ，然后调用`ancestor.layout(new Control[] { changedDescendent })`. 有一个更好的方法吗？最好对更改的控件或其父级进行简单的方法调用。

# iphone - 阅读 iphone 短信？

> ID：640020
> 
> 赞同：11
> 
> 时间：2009-03-12T19:00:15.533
> 
> 标签：iphone

是否有可能阅读收到的短信？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-12T19:06:46.767

是的你可以。短信存储在 Sqlite db 文件中。

以下是有关如何读取和获取这些文件的一些信息。

[阅读和保存短信](http://menoob.com/2008/12/04/how-to-save-and-read-your-iphone-text-messages-on-your-computer/)

[iphone备份](http://www.tuaw.com/2007/08/22/more-on-iphone-backups/)

# ruby - 此代码示例中的逗号是什么？

> ID：640021
> 
> 赞同：1
> 
> 时间：2009-03-12T19:00:21.167
> 
> 标签：ruby, syntax

```
cash = 100_000.00
sum = 0
cash += 1.00, sum while cash < 1_000_000.00 # underscores ignored 
```

我在“Learning Ruby”一书中找到了上面的例子，但是使用 Ruby 1.9 它不能编译（“解释”？）

```
syntax error, unexpected ',', expecting $end 
```

1.00 之后的逗号应该做什么？

这是示例的完整上下文：

```
#Also, like if, you can use while as a statement modifier, at the end of a statement:
cash = 100_000.00
sum = 0
cash += 1.00, sum while cash < 1_000_000.00 # underscores ignored
#So cash just keeps adding up until it equals $1,000,000.00\. I like that! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-12T19:16:39.100

这是一个错误。有一个[未经证实的错误报告](http://oreilly.com/catalog/9780596529864/errata/9780596529864.unconfirmed)，但[官方勘误表](http://oreilly.com/catalog/9780596529864/errata/9780596529864.confirmed)中没有任何内容（自 2007 年 10 月 16 日以来没有更新）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T19:15:44.233

它很可能是一个分号，但代码仍然是错误的。我觉得缺少一些上下文。作者在用 sum 做什么？

您可以通过以下方式使用 while，这可能有助于解释意图。

```
i = 0
puts i +=1 while i < 10 
```

这意味着这段代码是有意义的

```
cash += 1.00 while cash < 1_000_000.00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T19:02:56.370

好吧，它不会是第一本也不是最后一本在代码中有明显拼写错误的编程书籍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T19:09:27.243

也许它是一个错误输入或打印错误的分号（;）？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T19:41:23.517

完整的上下文如下：

> 此外，与 if 一样，您可以在语句末尾使用 while 作为语句修饰符：
> 
> ```
> cash = 100_000.00
> sum = 0
> 
> cash += 1.00, sum while cash < 1_000_000.00 # underscores ignored 
> ```
> 
> 因此，现金不断增加，直到等于 1,000,000.00 美元。我喜欢！

这里显然至少有一个错误。我的猜测是作者不小心使用了 perl 或 C 风格的逗号运算符，然后只删除了部分有问题的语句。

# java - 如何嵌入Tomcat 6？

> ID：640022
> 
> 赞同：58
> 
> 时间：2009-03-12T19:00:23.350
> 
> 标签：java, tomcat, tomcat6

我目前正在生产环境中的 Tomcat 6 上运行我的 webapp，并且想评估在嵌入式模式下运行 Tomcat。

[除了api 文档](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/startup/Embedded.html)中的内容之外，是否有很好的教程或其他资源？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-03-13T00:31:19.530

代码不言自明。查看 pom.xml 片段和运行 tomcat 的类。

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>catalina</artifactId>
        <version>6.0.18</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>coyote</artifactId>
        <version>6.0.18</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>jasper</artifactId>
        <version>6.0.18</version>
        <scope>test</scope>
    </dependency>

public class RunWebApplicationTomcat {

    private String path = null;
    private Embedded container = null;
    private Log logger = LogFactory.getLog(getClass());

    /**
     * The directory to create the Tomcat server configuration under.
     */
    private String catalinaHome = "tomcat";

    /**
     * The port to run the Tomcat server on.
     */
    private int port = 8089;

    /**
     * The classes directory for the web application being run.
     */
    private String classesDir = "target/classes";

    /**
     * The web resources directory for the web application being run.
     */
    private String webappDir = "mywebapp";

    /**
     * Creates a single-webapp configuration to be run in Tomcat on port 8089\. If module name does
     * not conform to the 'contextname-webapp' convention, use the two-args constructor.
     * 
     * @param contextName without leading slash, for example, "mywebapp"
     * @throws IOException
     */
    public RunWebApplicationTomcat(String contextName) {
        Assert.isTrue(!contextName.startsWith("/"));
        path = "/" + contextName;
    }

    /**
     * Starts the embedded Tomcat server.
     * 
     * @throws LifecycleException
     * @throws MalformedURLException if the server could not be configured
     * @throws LifecycleException if the server could not be started
     * @throws MalformedURLException
     */
    public void run(int port) throws LifecycleException, MalformedURLException {
        this.port = port;
        // create server
        container = new Embedded();
        container.setCatalinaHome(catalinaHome);
        container.setRealm(new MemoryRealm());

        // create webapp loader
        WebappLoader loader = new WebappLoader(this.getClass().getClassLoader());

        if (classesDir != null) {
            loader.addRepository(new File(classesDir).toURI().toURL().toString());
        }

        // create context
        // TODO: Context rootContext = container.createContext(path, webappDir);
        Context rootContext = container.createContext(path, webappDir);
        rootContext.setLoader(loader);
        rootContext.setReloadable(true);

        // create host
        // String appBase = new File(catalinaHome, "webapps").getAbsolutePath();
        Host localHost = container.createHost("localHost", new File("target").getAbsolutePath());
        localHost.addChild(rootContext);

        // create engine
        Engine engine = container.createEngine();
        engine.setName("localEngine");
        engine.addChild(localHost);
        engine.setDefaultHost(localHost.getName());
        container.addEngine(engine);

        // create http connector
        Connector httpConnector = container.createConnector((InetAddress) null, port, false);
        container.addConnector(httpConnector);

        container.setAwait(true);

        // start server
        container.start();

        // add shutdown hook to stop server
        Runtime.getRuntime().addShutdownHook(new Thread() {
            public void run() {
                stopContainer();
            }
        });
    }
    /**
     * Stops the embedded Tomcat server.
     */
    public void stopContainer() {
        try {
            if (container != null) {
                container.stop();
            }
        } catch (LifecycleException exception) {
            logger.warn("Cannot Stop Tomcat" + exception.getMessage());
        }
    }

    public String getPath() {
        return path;
    }

    public void setPath(String path) {
        this.path = path;
    }

    public static void main(String[] args) throws Exception {
        RunWebApplicationTomcat inst = new RunWebApplicationTomcat("mywebapp");
        inst.run(8089);
    }

    public int getPort() {
        return port;
    }

} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2011-09-26T12:34:02.657

*虽然这篇文章有些陈旧，但我正在回答我自己的答案，因为它可以节省一些其他时间*

```
package com.creativefella;

import org.apache.catalina.Engine;
import org.apache.catalina.Host;
import org.apache.catalina.LifecycleException;
import org.apache.catalina.connector.Connector;
import org.apache.catalina.core.StandardContext;
import org.apache.catalina.startup.Embedded;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class TomcatServer {
    private Embedded server;
    private int port;
    private boolean isRunning;

    private static final Logger LOG = LoggerFactory.getLogger(TomcatServer.class);
    private static final boolean isInfo = LOG.isInfoEnabled();

/**
 * Create a new Tomcat embedded server instance. Setup looks like:
 * <pre><Server>
 *    <Service>
 *        <Connector />
 *        <Engine&gt
 *            <Host>
 *                <Context />
 *            </Host>
 *        </Engine>
 *    </Service>
 *</Server></pre>
 * <Server> & <Service> will be created automcatically. We need to hook the remaining to an {@link Embedded} instnace
 * @param contextPath Context path for the application
 * @param port Port number to be used for the embedded Tomcat server
 * @param appBase Path to the Application files (for Maven based web apps, in general: <code>/src/main/</code>)
 * @param shutdownHook If true, registers a server' shutdown hook with JVM. This is useful to shutdown the server
 *                      in erroneous cases.
 * @throws Exception
 */
    public TomcatServer(String contextPath, int port, String appBase, boolean shutdownHook) {
        if(contextPath == null || appBase == null || appBase.length() == 0) {
            throw new IllegalArgumentException("Context path or appbase should not be null");
        }
        if(!contextPath.startsWith("/")) {
            contextPath = "/" + contextPath;
        }

        this.port = port;

        server  = new Embedded();
        server.setName("TomcatEmbeddedServer");

        Host localHost = server.createHost("localhost", appBase);
        localHost.setAutoDeploy(false);

        StandardContext rootContext = (StandardContext) server.createContext(contextPath, "webapp");
        rootContext.setDefaultWebXml("web.xml");
        localHost.addChild(rootContext);

        Engine engine = server.createEngine();
        engine.setDefaultHost(localHost.getName());
        engine.setName("TomcatEngine");
        engine.addChild(localHost);

        server.addEngine(engine);

        Connector connector = server.createConnector(localHost.getName(), port, false);
        server.addConnector(connector);

        // register shutdown hook
        if(shutdownHook) {
            Runtime.getRuntime().addShutdownHook(new Thread() {
                public void run() {
                    if(isRunning) {
                        if(isInfo) LOG.info("Stopping the Tomcat server, through shutdown hook");
                        try {
                            if (server != null) {
                                server.stop();
                            }
                        } catch (LifecycleException e) {
                            LOG.error("Error while stopping the Tomcat server, through shutdown hook", e);
                        }
                    }
                }
            });
        }

    }

    /**
     * Start the tomcat embedded server
     */
    public void start() throws LifecycleException {
        if(isRunning) {
            LOG.warn("Tomcat server is already running @ port={}; ignoring the start", port);
            return;
        }

        if(isInfo) LOG.info("Starting the Tomcat server @ port={}", port);

        server.setAwait(true);
        server.start();
        isRunning = true;
    }

    /**
     * Stop the tomcat embedded server
     */
    public void stop() throws LifecycleException {
        if(!isRunning) {
            LOG.warn("Tomcat server is not running @ port={}", port);
            return;
        }

        if(isInfo) LOG.info("Stopping the Tomcat server");

        server.stop();
        isRunning = false;
    }

    public boolean isRunning() {
        return isRunning;
    }

} 
```

我也面临**`404`**错误并挣扎了一段时间。通过看到日志' `INFO: No default web.xml`'，我怀疑它*（如果这是一个警告，很容易发现）*。`web.xml` *使用 Tomcat ( `rootContext.setDefaultWebXml("web.xml")`)*提供的*( `conf/web.xml`)*的技巧。原因是，它包括 DefaultServlet，它为 HTML、JS 等静态文件提供服务。`web.xml`在代码中手动使用或注册 servlet。

**用法**：

```
// start the server at http://localhost:8080/myapp
TomcatServer server = new TomcatServer("myapp", 8080, "/src/main/", true);
server.start();
// .....
server.stop(); 
```

***不要忘记将默认值`web.xml`放在该程序的同一目录中或指向正确的位置。***

应该注意的是，关闭钩子的灵感来自[安东尼奥的回答](https://stackoverflow.com/a/641028/50776)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-12-14T04:01:02.690

使用 Tomcat 而不是 Jetty 的原因有很多：

1.  一是已经熟悉Tomcat
2.  一种是开发需要轻松传输到 Tomcat 安装的 Web 应用程序
3.  Jetty 开发者文档实际上比 Tomcat 的文档更精彩（太棒了！）
4.  在 Jetty 社区中获得问题的答案有时可能需要数年时间，例如 2007 年。请参阅[嵌入 Jetty](http://docs.codehaus.org/display/JETTY/Embedding+Jetty)
5.  **重要提示：**在 Jetty 6.1.* 之后，每个 Web 应用程序都会打开到自己的 JVM 中，因此如果您尝试在独立访问和 Web 应用程序之间获得编程访问，您唯一的希望是通过 Web API。
6.  如果这对您来说是个问题，Tomcat 是一个开源项目，其知识产权归 Apache 基金会所有，Jetty 是开源项目，但归一家小型私营公司所有（Mortbay Consulting）

第 5 点对我的工作很重要。例如，我可以通过 Tomcat 直接访问 JSPWiki 实例，但使用 Jetty 时完全无法访问。我在 2007 年要求解决这个问题，但还没有听到答案。所以我最终放弃并开始使用 Tomcat 6。我研究过 Glassfish 和 Grizzly，但到目前为止，Tomcat 是（令人惊讶的）最稳定且记录良好的 Web 容器（实际上并没有说太多）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-03T16:07:31.327

这可能会有所帮助。

如果你下载 Tomcat6.x 的源码包，你会得到这个类：

[http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/startup/Catalina.html#main(java.lang.String[])](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/startup/Catalina.html#main(java.lang.String[]))

这是一个如何使用 Embedd 类的示例：它是一个用于停止|启动特定 Tomcat 安装的 shell。（我的意思是您可以设置`CATALINA_BASE`为指向现有的 Tomcat 安装）。

如果你编译它，你可以像这样运行：

java -D"catalina.base=%CATALINA_BASE%" -D"catalina.home=%CATALINA_HOME%" org.apache.catalina.startup.Catalina start

我不确定如何更改此代码以关闭服务器！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-11T08:42:18.910

我认为使用 Tomcat 7 或 Jetty 9 嵌入更容易。在这里你会找到一个很好的介绍：[http ://www.hascode.com/2013/07/embedding-jetty-or-tomcat-in-your-java-application/](http://www.hascode.com/2013/07/embedding-jetty-or-tomcat-in-your-java-application/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-03-16T15:44:24.293

几个月前读完这个帖子后，我写了这个项目：[spring-embedded-tomcat](https://github.com/alx3apps/spring-embedded-tomcat)。它可用于将 tomcat6 嵌入到基于 Spring 的应用程序中。

# vb6 - 如何在没有 Excel 对象的情况下通过 VB6 创建 Excel 工作表？

> ID：640026
> 
> 赞同：3
> 
> 时间：2009-03-12T19:00:32.913
> 
> 标签：vb6, excel, excel-2007, vba

我最近负责更新 VB6 数据收集应用程序，以添加生成 Excel 报告并通过应用程序打印它们的功能（两者都必须在同一台计算机上完成）。通常这不会是一个问题，在使用 Excel 对象之前，我已经使用 VB6 生成了 Excel 报告。

所以我继续将更改编码并呈现出来，然后我被告知将安装此程序的机器上没有完整的 Excel 副本，我必须想出另一个解决方案。

我尝试创建分隔文件（逗号分隔或文本），但是当使用 excel 打开这些文件时，它们的格式不正确，即如果一个单元格有 20 个字符，由于单元格大小固定，一半的字符将被截断。

我还有几个想法：

1）我知道openoffice有一个api。这个api可以用来生成格式正确的excel文件吗？有我可以使用的 COM 对象吗？

2）我找到了这个工具： http: [//www.carlosag.net/Tools/ExcelXmlWriter/](http://www.carlosag.net/Tools/ExcelXmlWriter/) 但是，它是用VB.NET编写的。我还能在 VB6 中使用这个工具吗？

我真的很难过，不知道下一步该往哪个方向走。有人对上述实用程序有任何想法吗？此外，我也愿意接受任何其他建议/更好的方法。任何能帮助我完成这项任务的东西都将不胜感激！

注意：用于查看这些报告的 Excel 版本是 Excel 2007

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T19:22:50.177

我们来看看这两个要求：

> 添加生成 Excel 报告并**通过应用程序打印的功能。**

和

> 将安装此程序的机器[原文如此] 不会有 Excel 的完整副本

除非我误解了你，否则这些似乎是相互排斥的。如果您的意思是您将只在一台机器上生成报告并且它们将在其他地方查看和打印，您可以尝试使用[SpreadSheetML](http://msdn.microsoft.com/en-us/library/bb226687.aspx)。

在谷歌上搜索有关 SpreadSheetML 的其他信息时要小心：有*很多*错误信息将 SpreadSheetML 与 Office 2007 中用于 Excel 的新 Xml 格式混淆。SpreadSheetML 可以追溯到 OfficeXP，甚至在 Office 2000 中的意义有限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T19:10:43.997

您可以将excel文件保存为html。在我编写的需要将数据导出为 excel 的 Web 应用程序中，我刚刚创建了一个 html 文件，就像一个 excel 导出文件一样。然后我将它作为 application/vnd.ms-excel 服务。Excel 打开它就好了。你可能会做类似的事情。

您还可以找到一个类似于您链接的库，它直接编写新的 office 文件格式，因为我认为它们是 xml 的衍生物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T19:13:58.543

像往常一样创建 CSV 文件。

在打印之前，让您的桌面应用程序在 XLS 文件可用的机器上进行格式化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T19:12:32.917

如果您愿意安装 .NET 运行时，您可以将库包装在选项 #2 中，并使用暴露给 COM 的 .NET 类。该类只是将调用传递给 ExcelXMLwriter。

另一种方法是研究 XML 标准并编写自己的编写器，但这可能对项目来说太过分了。

至于 OpenOffice 看看[这里](http://api.openoffice.org/)。尤其是本页的 VBA[部分](http://wiki.services.openoffice.org/wiki/VBA#Visual_Basic)。似乎有一个您可以使用的 COM 组件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-13T10:56:46.593

可以在没有安装 Excel 的机器上创建 Excel 工作簿**，方法是使用 Jet 连接（任何 Jet 连接）执行“生成表查询”SQL DML 或`CREATE TABLE`SQL DLL，其中有问题的表是 Excel 表例如考虑这个 VBA 代码：

```
Dim cat
Set cat = CreateObject("ADOX.Catalog")
With cat  

  ' Create a new Jet .mdb
  .Create _
      "Provider=Microsoft.Jet.OLEDB.4.0;" & _
      "Data Source=" & _
      Environ$("temp") & "\DropMe.mdb"
  ' Use .mdb's Jet connection to create an Excel table
  ' (will create a new workbook to contain it)
  .ActiveConnection.Execute _
     "CREATE TABLE" & _
     " [Excel 8.0;HDR=NO;Database=C:\db.xls;].[Sheet1]" & _
     " (col FLOAT);"
End With 
```

Jet 是一个已弃用的 Windows 组件，它始终存在于 Vista 之前的 Windows 机器上，并且仍然可以通过 MDAC 从 MS 免费下载。

也就是说，“要通过 [Excel] 应用程序打印它们”，您显然需要 Excel 应用程序！

** 我认为有可能：我找不到没有 Excel 的机器来测试！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-13T11:25:29.847

检查这个： http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;Q271572](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q271572)

执行相同的操作并使用 .xls 扩展名保存文件。

或者，您可以在内存中创建 HTML 表格内容并将其写入文件，扩展名为 xls。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-26T20:01:34.550

从 VB6 创建一个 SpreadsheetML 文件应该非常简单。它只是一个包含特定 xml 风格的文本文件。我相信您可以从 MSDN 获得 SpreadsheetML 和 WordML 的所有文档。

我目前使用 SpreadsheetML 从 vb.net 应用程序生成大约 60 种不同的自定义报告。由于 Excel 2007 中实现的文件扩展名和文档安全性的更改，至少存在一个潜在问题。如果您生成基于 SpreadsheetML 的 Excel 文件并使用 .xls 扩展名，它将在 2003 年正常打开。Excel 2007 将弹出一个对话框通知您文件扩展名与文件内容不匹配。警告对话框后，它将正确打开并显示文件。如果您将 SpreadsheetML 文档的扩展名更改为 .xml，Excel 2007 将毫无怨言地打开它。但是，您的基于 xml 的电子表格可能会在运行 Excel 2003 的机器上的 IE 中打开。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-09-17T09:56:57.047

我使用[NPOI](http://npoi.codeplex.com/) 它不使用 excel 库并以 excel 2003 格式输出

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-02-08T20:40:06.440

我也会选择 CSV 选项。不需要 DLL 或其他类型的对象。一个警告是要非常小心数字使用的格式，因为 1,024.00 的值会创建两列并软管整个工作簿。它将被格式化为 Format(Numberfield,"#########.#0")

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-03-16T14:31:56.343

我找到了一个解决方案：

我找到了一个可用于创建和打印 Excel 电子表格的 DLL。我认为它与 XML 编写器相同，但适用于 VB6。

# wxpython - 在 wxPython 中生成自定义 CommandEvent

> ID：640045
> 
> 赞同：5
> 
> 时间：2009-03-12T19:05:32.510
> 
> 标签：wxpython

我的顶级窗口需要知道自定义控件的内部状态何时发生变化，以便它可以更新 GUI 的各个其他部分。如何在控件中生成自定义事件，以便它可以传播并由顶级窗口处理？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-09-07T13:40:15.040

我知道这是一个老问题，但是在 wxPython 中有一个更新的、稍微好一点的方法来做到这一点。从[http://wiki.wxpython.org/CustomEventClasses](http://wiki.wxpython.org/CustomEventClasses)和上面解释：

要定义事件：

```
import wx.lib.newevent
QuantityChangedEvent, EVT_QUANTITY_CHANGED = wx.lib.newevent.NewCommandEvent() 
```

要生成事件：

```
event = QuantityChangedEvent(self.GetId())
self.GetEventHandler().ProcessEvent(event)
# or ...
#wx.PostEvent(self, event) 
```

绑定事件保持不变。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-12T19:05:50.700

为了传播，事件必须是[wx.CommandEvent](http://www.wxpython.org/docs/api/wx.CommandEvent-class.html)。（有关传播的详细信息，请参阅[wxWidgets 事件处理概述](http://docs.wxwidgets.org/stable/wx_eventhandlingoverview.html)。）更具体地说，它应该是一个[wx.PyCommandEvent](http://www.wxpython.org/docs/api/wx.PyCommandEvent-class.html)，它是 Python 感知的，并且能够通过 wxWidgets 事件系统安全地传输其 Python 位，并且当它们仍然存在时事件处理程序被调用。

如下定义您的自定义事件类型：

```
EVT_QUANTITY_CHANGED = wx.PyEventBinder(wx.NewEventType(), 1) 
```

您可能希望在模块级别执行此操作，尽管在某些情况下可能希望在`__init__`您的控件方法中执行此操作。

控件现在可以生成如下事件：

```
event = wx.PyCommandEvent(EVT_QUANTITY_CHANGED.typeId, self.GetId())
self.GetEventHandler().ProcessEvent(event) 
```

顶级窗口可以按通常的方式绑定和处理事件：

```
self.Bind(mycontrol.EVT_QUANTITY_CHANGED, self.OnQuantityChanged) 
```

# c# - 在 ASP.Net 中跨页面边界维护 List<> 状态

> ID：640052
> 
> 赞同：0
> 
> 时间：2009-03-12T19:08:05.750
> 
> 标签：c#, asp.net

我有一个 ASP.NET WebForms 应用程序，它具有要求用户在多个步骤中提供数据的功能。目前这是使用多个页面实现的。因此，用户访问 step1.aspx，提供一些信息，然后重定向到 step2.aspx 以提供附加信息。

作为此过程的一部分操作的对象存储在通用 List<> 对象中。我目前将此 List<> 存储在 Session 变量中，以便在页面之间维护对象的状态。该过程完成后，数据将发送到另一个应用程序公开的 Web 服务 api。我不想在帖子之间在数据库中维护此数据的状态，而是希望将其保存在内存中，直到它被提交到 Web 服务。

我正在将这个逻辑从 Web 应用程序中提取到它自己的类库中，这样我们就可以从 Windows 应用程序中使用相同的库。

在将业务逻辑提取到自包含类库之后，在帖子之间维护这些数据的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T19:26:03.787

如果你想让库负责管理它自己的状态，你可以使用 IoC 模式并注入一个类来处理数据的状态。例如，假设您有：

```
class MyWizardLogic
{
 public void DoStep1()
 {
 }
} 
```

现在我们可以定义一个新的接口，称之为 StateProvider，因为它提供了状态：

```
interface IStateProvider
{ 
   List<WizState> CurrentState{get;set;}
} 
```

现在你需要做的是告诉 MyWizardLogic 使用 IStateProvider 如果你想使用 DI 框架有很多选择，但让我们保持简单。您可以创建一个 SessionStateProvider 类，它将列表存储到会话。您可以创建第二个 WinFormsStateProvider 类，它将列表存储在静态变量或其他适当的位置。

我会在他们各自的项目中创建这些类。这些类不应该是 BL 库的一部分。

现在您可以修改您的 DoStep1() 方法以获取 IStateProvider 的参数。这将使您的 web 或 winform 应用程序指定要使用的 IStateProvider。此外，您可以通过属性或在构造函数中设置它。我通常更喜欢使用构造函数。

现在您已经为您的客户准备好控制 BL 依赖项了。这也应该有助于使测试更容易。例如，您可以编写一个模拟状态提供程序来验证它是否被正确调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T19:17:44.447

使用 ASP.NET，您有几个选择。您可以将其存储在会话状态中，但这很快就会成为问题，因为同一会话中有多个浏览器窗口。

剩下的就是将一页上的数据输入从一个页面传递到另一个页面。

您可以对查询字符串中的数据进行编码并将其附加到 URL，但根据数据的大小，这可能会变得非常长且难以处理。

剩下的就是发布数据了。您可以从第一个表格开始，然后将其发布到第二个表格。第二种形式将第一种形式的数据编码到隐藏字段中，然后将其数据和隐藏字段数据传递给下一个形式，依此类推。

然后，在最后一个表单（处理所有内容）之后的页面上，您拥有用于单独步骤的所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T19:10:45.040

我建议您将业务逻辑派生为两类，一类供 Web 窗体使用，一类供 Windows 窗体使用。您已经编写了标准会话代码，为什么要浪费掉它？

如果您一心只创建一个类，我想您检查调用它的对象的类型来定义您的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T19:26:30.643

您可以将多个步骤放在一个页面中，并使用 ASP:MultiView 来管理各个步骤。事实上，MultiView 有一个名为 asp:WizardStep 的模板类型。这样，您可以在页面 ViewState 中维护步骤之间的状态并消除对 Session 变量的需要。

MSDN[在这里](http://msdn.microsoft.com/en-us/library/wdb4eb30.aspx)有一些很棒的信息和示例。

# c# - 如何在字符串中的某些位置插入一个值c#

> ID：640055
> 
> 赞同：3
> 
> 时间：2009-03-12T19:08:34.343
> 
> 标签：c#, string

我有一个从方法中获取字符串的程序。我想知道如何在特定位置向该字符串插入字符串值。

例如：

```
mystring = "column1 in('a','b')column2 in('c','d')column3 in('e','f')"; 
```

在这里，我将如何在每次出现字符 ')' 之后插入字符串值 " 和 " `mystring`？

PS。如果可能，还包括如何不将其插入到最后。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-12T19:13:24.863

可能是最简单的：

```
mystring = mystring.Replace(")", ") and ");
mystring = mystring.Substring(0, mystring.Length - " and ".Length); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T19:13:10.543

字符串是不可变的，因此您不能“仅仅”更改该字符串的值。您想要对字符串进行的每次修改都会导致字符串的新实例。

这也许是你如何实现你想要的：

```
string s = " x in (a, b) y in (c, d) z in (e , f)";

string[] parts = s.Split (')');

StringBuilder result = new StringBuilder ();

foreach( string part in parts )
{
   result.Append (part + ") and ");
}
Console.WriteLine (result.ToString ()); 
```

但也许有更好的解决方案......

无论如何，你怎么会以这种方式接收那个字符串（它看起来像是 sql 语句的 where 子句的一部分）？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T19:14:01.850

您可以通过替换来完成此操作..

```
string mystring = "column1 in('a','b')column2 in('c','d')column3 in('e','f')";
mystring = mystring.Replace(")", ") and ").TrimEnd(" and".ToCharArray()); 
```

导致：

```
"column1 in('a','b') and column2 in('c','d') and column3 in('e','f')" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-12T19:15:57.337

如果你的意思是，我从字面上理解你的字符串：

```
mystring = "column1 in('a','b')column2 in('c','d')column3 in('e','f')" 
```

然后你可以这样做：

```
mystring = mystring.Replace(")c", ") and c"); 
```

这将导致：

```
mystring = 
    "column1 in('a','b') and column2 in('c','d') and column3 in('e','f')" 
```

这是假设您不想要尾随的“和”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T19:49:26.727

```
System.Text.RegularExpressions.Regex.Replace(
    mystring, "\\)(?=.+$)", ") and "); 
```

正则表达式的`.+$`部分确保右括号不在行尾。如果您要经常这样做，我建议`Regex`您为该模式创建和持久化一个对象。

```
// Do this once somewhere:
System.Text.RegularExpressions.Regex insertAndPattern =
    new System.Text.RegularExpressions.Regex("\\)(?=.+$)");

// And later:
insertAndPattern.Replace(mystring, ") and "); 
```

编辑：刚刚意识到我是个白痴。将上述模式从 修复`"\\).+$"`到`"\\)(?=.+$)"`，以便`.+$`匹配中不包含（并因此替换）该部分。

# code-analysis - 查找依赖于 .NET 3.5 SP1 的代码

> ID：640057
> 
> 赞同：2
> 
> 时间：2009-03-12T19:08:53.673
> 
> 标签：code-analysis, static-analysis, .net-3.5

有没有办法运行某种代码分析来查找可以使用 .NET 3.5 SP1 而不是 3.5 RTM 编译的代码？

FxCop 适用于随 SP1 引入的程序集，但对于仅调用新方法和属性的代码，它不会检测到这种用法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-23T06:03:58.403

当然，您可以使用 fxcop 或 VS 团队系统突出显示这些内容。

确保您已阅读[此答案](https://stackoverflow.com/questions/1030356/get-vs-to-highlight-all-net-3-5-sp1-method-calls/1030830#1030830)。fxcop 附带的当前规则存在一个错误，因此您需要进行一些操作才能使其正常工作。

# pdf - 如何启用保存 PDF 表单中填写的字段？

> ID：640063
> 
> 赞同：49
> 
> 时间：2009-03-12T19:09:32.500
> 
> 标签：pdf, save, field, pdf-form

部分 PDF 表单[可以保存](http://www.irs.gov/pub/irs-pdf/f1040ez.pdf)，包括所有填写的字段数据：

[![可以保存](https://i.stack.imgur.com/F9hBn.png)](https://i.stack.imgur.com/F9hBn.png)

还有一些[无法保存](http://www.umsystem.edu/ums/departments/fa/management/records/forms/human/um272.pdf)，填写的字段数据全部丢失：

[![无法保存](https://i.stack.imgur.com/MSTpf.png)](https://i.stack.imgur.com/MSTpf.png)

**如何在我的 PDF 表单上启用已填写字段的保存？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-11T15:32:25.100

在 Google Chrome 中打开您的 PDF。根据需要编辑 PDF。按 ctrl + p。以 PDF 格式保存到您的桌面。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-15T04:07:06.320

当您使用 Acrobat 8​​ 或 9 时，请从“高级”菜单中选择“启用使用权限”。这为 pdf 添加了大约 20 kb。

另一种可能性是使用 CutePDF Pro，添加一个提交按钮并将 XFDF 数据作为电子邮件或网络服务器提交给您自己。然后，XFDF 数据可以使用您的数据重新加载原始 PDF。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-14T18:38:01.550

如果您使用 Adob​​e Acrobat X 制作表单，请根据需要设置所有字段，然后单击 *文件、另存为、Reader Extended PDF、启用附加功能*。如果在 XI 之前的 Adob​​e Reader 版本中打开，则可以在填写时保存生成的 PDF 表单。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-12T19:14:08.667

您可以使用免费的 foxit 阅读器来填写表格，如果您支付一点费用，您可以按照自己的方式设计表格。

您也可以使用 iText 以编程方式创建这些表单。

有免费的在线服务可让您上传 pdf，也可以添加字段。

这取决于你想如何进行设计。

编辑：如果您使用福昕阅读器，您可以保存**任何**可填写的表格。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-02-24T19:26:52.900

在 Acrobat 中，单击“高级”选项卡，然后单击“在 Adob​​e Reader 中启用功能”。这应该可以解决问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-14T23:16:15.040

在 Acrobat XI 中，（如果打开则关闭表单编辑）文件 > 另存为其他 > Reader Extended PDF > 启用附加功能

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-12T19:16:00.020

PDF文件中有一个设置可以打开允许保存数据位。但是，它需要您安装 Adob​​e Acrobat 的副本才能更改位。

唯一的其他选择是将其打印到 PDF 打印驱动程序，该驱动程序将保存与 pdf 文件合并的数据。

**更新：** 来自 adobe 的相关信息位于： http: [//www.adobeforums.com/webx? 13@@.3bbb313f/7](http://www.adobeforums.com/webx?13@@.3bbb313f/7)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-28T19:44:56.790

用最新版的Adobe Reader，Adobe Reader XI，好像可以保存表格了。

从他们的网页：[直接在 PDF 表单上输入您的回复，或单击并填写表单字段。然后保存提交](http://www.adobe.com/uk/products/reader/features.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-02-22T18:45:36.973

OS X 中的 Preview 似乎可以开箱即用。Adobe Reader 将文档显示为“无法保存键入的数据”，但 Preview 能够轻松保存我的更改。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-01T20:08:43.073

在 linux 上使用歌舞表演舞台：

[https://www.cabaret-solutions.com/download/caba-lin-64](https://www.cabaret-solutions.com/download/caba-lin-64)

您可以干净地填写和保存

# python - 最接近 Ruby 的美丽汤的等价物是什么？

> ID：640068
> 
> 赞同：15
> 
> 时间：2009-03-12T19:10:29.050
> 
> 标签：python, ruby, beautifulsoup

我喜欢 Python 中的 Beautiful Soup 抓取库。它只是工作。Ruby 中有没有类似的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-12T19:25:16.753

[Nokogiri](http://wiki.github.com/tenderlove/nokogiri)是另一个 HTML/XML 解析器。根据[这些基准](http://gist.github.com/18533)，它比 hpricot 快。Nokogiri 使用 libxml2，是 hpricot 的替代品。它还具有非常不错的 css3 选择器支持。

编辑：这里有一个比较 nokogiri、libxml-ruby、hpricot 和 rexml 的新[基准](http://www.rubyinside.com/ruby-xml-performance-benchmarks-1641.html)。

[Ruby Toolbox在](http://www.ruby-toolbox.com/)[此处](http://www.ruby-toolbox.com/categories/html_parsing.html)有一个关于 HTML 解析器的类别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T19:24:00.890

有[scRUBYt！](https://github.com/scrubber/scrubyt), [Rubyful-soup](http://www.crummy.com/software/RubyfulSoup/) (不再维护), [WWW::Mechanize](http://rubyforge.org/projects/mechanize/) , [scrAPI](http://blog.labnotes.org/2006/07/11/scraping-with-style-scrapi-toolkit-for-ruby/)等等。

或者您可以只使用 Hpricot 或[Nokogiri](http://github.com/tenderlove/nokogiri/tree/master)进行解析。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-11-11T21:46:08.490

这个来自[Ruby Toolbox](https://www.ruby-toolbox.com/categories/html_parsing)的页面包含一个图表，显示了各种解析器的相对流行度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T19:16:05.513

[杏](http://wiki.github.com/why/hpricot)？不知道别人用什么...

# build-process - 获取 make 以删除错误的其他文件

> ID：640076
> 
> 赞同：7
> 
> 时间：2009-03-12T19:11:20.000
> 
> 标签：build-process, makefile

我们最近正在讨论我们在基于 make 的构建过程中处理依赖项的 .d 文件的方式。已经提出的问题是，有时 .d 文件在构建中断时可能会损坏。

我们使用 .DELETE_ON_ERROR 目标来确保如果构建被中断或失败，它正在生成的目标文件被删除。然而，我们也在编译时使用 GCC 生成 .d 文件，这些文件也需要被删除。似乎没有一个直接的方法来告诉 make 关于这一点。

所以问题是，有没有一种方法可以让我们在出错的情况下同时删除我们的对象和依赖文件？有什么方法可以设置规则，让它知道 .d 和 .o 文件是同时生成的，如果出现错误需要删除？

或者，我们还能做些什么来解决损坏的 .d 文件的问题？沿着这些思路的一个建议是生成具有临时名称的 .d 文件，并且每个文件有一个单独的后编译步骤，将其复制到正确的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-12T20:22:44.883

一般来说，GNU make 不支持具有多个输出的目标。但是，该规则有一个例外：模式规则。如果您可以构建您的 makefile，使其使用模式规则生成目标文件，您可能能够实现您的目标。例如：

```
.DELETE_ON_ERROR:

all: foo.o

%.o %.d: %.c
    @touch $*.d
    @touch $*.o
    @exit 1 
```

您会看到，当在规则中检测到“错误”时，使用此 makefile 会删除 .d 和 .o 文件。这种方法的优点是它通过描述如何生成 .d 文件以及生成它的规则来更准确地表达依赖关系图。

或者，在这种情况下，一个常见的范例就像您所建议的那样：让 GCC 将 .d 文件生成为一个临时文件名，并且仅在 GCC 命令成功完成后将其移动到位。通常这是通过 shell 的一个技巧来完成的：

```
all: foo.o

%.o: %.c
    gcc -o $@ -MMD -MF $(basename $@).d.tmp -c $< \
        && mv $(basename $@).d.tmp $(basename $@).d 
```

这里的“魔术”技巧是使用 GCC 标志`-MMD`，它生成依赖文件作为编译的副作用，和`-MF`，它允许您指定依赖文件的输出名称；以及使用 shell`cmd1 && cmd2`语法，这会导致 shell 仅在成功退出`cmd2`时才执行。`cmd1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-19T19:53:45.657

我没有得到 Eric 的两个例子来正常工作。当您传入 -MM 开关时，GCC（4.4 版）不会编译任何内容，因此看起来您不能一次编译和编写 .d。这是我所做的：

```
%.o: %.c
    @rm -f $@ $(patsubst %.o,%.d,$@)
    gcc -c $< -o $@
    @$(CXX) -MM -MG > $(patsubst %.o,%.d,$@) 
```

It starts out by deleting an existing .d file, the third line which generates the new one is only executed if the second command, the actual compilation step, succeeds (Eric's && trick isn't necessary, make does this automatically). For some reason I don't understand, an existing .o file isn't automatically deleted if the compilation fails, but that was easily solved by adding `$@` to the first `rm`.

# .net - MailMessage 掩码来自电子邮件地址

> ID：640088
> 
> 赞同：0
> 
> 时间：2009-03-12T19:13:41.447
> 
> 标签：.net, email

我需要从应用程序发送一封电子邮件，其中包含来自字段中的文本。我有发件人电子邮件地址，但是如何屏蔽电子邮件地址，以便发件人消息呈现文本而不是电子邮件地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T19:31:43.930

[MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.mailaddress.aspx)（您将用于“To”和“From”属性）可以在其构造函数中使用显示名称及其地址。您需要验证不同的邮件客户端如何使用该值来显示（大多数使用两者的组合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T19:48:25.280

您可以使用 MailAddress 对象以这种方式向发件人添加名称：

```
MailMessage message = new MailMessage();
message.From = new MailAddress("john.doe@foo.bar.com", "John Doe"); 
```

# apache-flex - Flex：通过 CFC 保存可编辑的数据网格

> ID：640089
> 
> 赞同：1
> 
> 时间：2009-03-12T19:13:42.023
> 
> 标签：apache-flex, datagrid, coldfusion, cfc

我有一个可编辑的数据网格，我需要能够通过 ColdFusion 中的 CFC 将其与其他表单字段一起保存。

基本上，目的是通过 RO 检索到许多位置，这些位置构成第一列，其余列是数据类型，即人口统计、客户备注、约会等，其想法是用户勾选每个复选框网格表示他们很乐意与这些位置共享数据类型。必须以这种方式完成，因为位置可能会发生变化，因此随着时间的推移可能会有两个或四个或更多。

代码运行到目前为止运行并且看起来不错但是节省位让我发疯！请帮忙。

在此先感谢 :) 代码（出于理智的原因而缩写）如下：

```
public function handleconsentResult(event:ResultEvent):void {
            consentDatagrid.dataProvider = event.result;
            }
<mx:RemoteObject id="consentQuery"
    destination="ColdFusion"
    source="Build3.consent"
    showBusyCursor="true">
    <mx:method name="getconsent" result="handleconsentResult(event)" fault="fault(event)" /> 
```

```
<mx:DataGrid id="consentDatagrid" creationComplete="init()" width="98%" wordWrap="true" textAlign="center">
                        <mx:columns>
                            <mx:DataGridColumn headerText="Organisation" width="100" textAlign="left" id="Location" dataField="LocationName" wordWrap="true"/>
                            <mx:DataGridColumn headerText="Demographics"  width="100" wordWrap="true" textAlign="center" itemRenderer="mx.controls.CheckBox" rendererIsEditor="true" editorDataField="ClientDemographics" />
                            <mx:DataGridColumn headerText="Appointments"  width="100" wordWrap="true" textAlign="center" itemRenderer="mx.controls.CheckBox" rendererIsEditor="true" editorDataField="ClientAppointments"/>
                            <mx:DataGridColumn headerText="Activity"  width="70" wordWrap="true" textAlign="center" itemRenderer="mx.controls.CheckBox" rendererIsEditor="true" editorDataField="ClientActivity"/>
                            <mx:DataGridColumn headerText="Notes" width="50" wordWrap="true" textAlign="center" itemRenderer="mx.controls.CheckBox" rendererIsEditor="true" editorDataField="ClientNotes"/>
                        </mx:columns>
                    </mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T15:45:19.147

听起来您想要做的是将 DataGrid 的全部内容作为其余表单数据的成员返回。我仍在学习 Flex，但我相信它会自动从 ArrayCollection 转换为 Query，因为您使用的是 AMF。

由于您没有为 DataGrid 使用 dataProvider 属性，因此我假设您在从事件`init`调用的函数中将 ArrayCollection 对象绑定到 DataGrid。`creationComplete`在这种情况下，您需要在将表单数据返回到服务器之前执行相反的操作：将 DataGrid 值复制回您要返回的变量。

或者，您可以使用可绑定的 ArrayCollection 变量，这样当用户更新 DataGrid 时，ArrayCollection 变量已经更新，您只需将其返回给 ColdFusion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T00:43:03.353

我不知道 CF 中的 Flex，但您确定是要一次保存它们还是通过某种“保存”或“提交”操作？

如果您打算一次保存它们，那么这篇关于[在 Flex 中迭代 ColdFusion 查询的](http://www.cflex.net/showFileDetails.cfm?ObjectID=801)帖子可能会有所帮助。

否则我只会在每个单元格中的 onChange 事件上放置一个[监听器](http://livedocs.adobe.com/flash/mx2004/main_7_2/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Flash_MX_2004&file=00002237.html)并实时编写它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-30T18:17:04.950

我需要做一些类似的事情，我发现它可以很好地在 actionscript 中创建一个“数据集”对象和一个可以相互映射的类似 CFC。从 flex 调用传递 actionscript 对象的远程方法，然后在 CF 端它将被转换为 cfc。

```
[RemoteClass(alias = "model.DataSet")] **//maps to the CFC**    
[Bindable]
public class DataSetVO
{       

    public var rows:Array;

    public function DataSetVO() 
    {

    }

} 
```

CFC就是这样。确保将 alias 属性设置为与 actionscript 对象的 RemoteClass 中设置的别名匹配：

```
<cfcomponent name="DataSet"  alias="model.DataSet"> 
<cfproperty name="rows" type="array" />
</cfcomponent> 
```

保存数据的 CFC 方法可以像

```
 <cffunction name="saveToFile" access="remote" returntype="numeric" hint="">
    <cfargument name="dataSet" type="model.GPDataSet" required="true" />
    <!--- do what you need to do to with arguments.dataSet to 
                  save to a file, database, whatever --->
    <cfreturn 0 />
</cffunction> 
```

来自 flex 的调用如下：

```
 //make a remote call to save the grid 
 //populate your VO with the contents of the grid, in this case I have an object
 //that gives me one, basically iterate over the dataprovider of the grid
var myVO:DataSetVO = myDataSet.getAsVO();
//calling the remote CFC passing the VO that will be mapped to a CFC on the server
cfsvc.saveToFile(myVO); 
```

将复杂对象从 Flex 映射到 CF 可能有点棘手，但一旦设置好，就非常好。

这些文章可能会有所帮助

[http://www.jeffryhouser.com/index.cfm/2007/10/9/Why-does-ColdFusion-return-a-CFC-to-Flex-as-a-generic-object](http://www.jeffryhouser.com/index.cfm/2007/10/9/Why-does-ColdFusion-return-a-CFC-to-Flex-as-a-generic-object)

[http://mxbase.blogspot.com/2008/07/passing-custom-objects-between-flex-and.html](http://mxbase.blogspot.com/2008/07/passing-custom-objects-between-flex-and.html)

# c++ - 使用 GL_RGBA16F_ARB 纹理时，它只包含废话，但我没有收到错误消息

> ID：640095
> 
> 赞同：1
> 
> 时间：2009-03-12T19:14:53.550
> 
> 标签：c++, c, opengl, fbo

我生成这样的纹理：

```
GLuint id;

glGenTextures(1, &id);

glBindTexture(GL_TEXTURE_2D, id);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

glTexImage2D(
    GL_TEXTURE_2D, 0,
    GL_RGBA16,
    //GL_RGBA16F_ARB, //< Won't work
    256, 256, 0, GL_RGBA, GL_FLOAT, NULL
);

glBindTexture(GL_TEXTURE_2D, 0); 
```

我将它附加到帧缓冲区对象（FBO）以进行渲染。当我将内部格式设置为`GL_RGBA16`. 但是，我需要更高的动态范围，并且认为这`GL_RGBA16F_ARB`可能会奏效。

不幸的是，如果我在上面给出的代码中替换`GL_RGBA16`为`GL_RGBA16F_ARB`，纹理似乎停止工作。我没有尝试渲染到 FBO/纹理棒，当我使用纹理时，它包含随机垃圾。（很多紫色，事实证明）如果我收到一条提示可能有问题的错误消息，这不会那么令人沮丧，但我似乎找不到。换句话说，在-call 之后返回，并`glGetError()`在我附加纹理时返回`0``glTexImage2D``glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT)``GL_FRAMEBUFFER_COMPLETE_EXT`

我还没有搞砸`glClampColorARB(...)`......但是:)

1.  我是否忘记在我没有想到的地方/方式中检查错误？
2.  -textures 是否`GL_RGBA16F_ARB`需要我没有给予的任何特殊处理？
3.  还有什么可能是错的吗？

我很难过，因为一切都很顺利`GL_RGBA16`...... :(

**编辑：**使用时`GL_RGBA16F_ARB`，我尝试渲染到屏幕的第一帧没有成功。在我看来，我应该在某处收到错误消息..？

**编辑：**通过检查 ShadowIce 的工作代码示例，我发现如果我更改FBO 上的*深度缓冲区*`glRenderBufferStorageEXT(...)` `GL_DEPTH_COMPONENT24`，问题就会消失，并将其作为第二个参数，而不是`GL_DEPTH_COMPONENT16`. 我不知道*为什么*会这样，但显然它确实有效。

此外，如果我在那里进行相反的替换，ShadowIce 的代码会像我的一样中断。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T22:35:10.090

设置带有浮动纹理的帧缓冲区应该没有什么特别的事情要做。我会检查一些事情：

1.  在调用 glCheckFramebufferStatusEXT 之前，FBO 绑定和绘制/读取缓冲区设置是否正确？还可以在绘制之前尝试对其进行测试。
2.  具有特定清晰颜色的简单 glClear 后纹理看起来还可以吗？如果是，那么您的着色器（如果您使用任何着色器）或您绘制到 FBO 的方式可能有问题。
3.  你的驱动程序是最新的吗？在具有不同硬件的 PC 上是否仍然存在问题？
4.  GL_RGBA32F_ARB 怎么样？

**编辑：**

5.  检查您的帧缓冲区和纹理的 ID，还检查纹理 ID 是否与附加到您的 fbo 的 ID 匹配（使用 glGetFramebufferAttachmentParameteriv）。通常我会猜想，如果它与 RGBA 纹理一起工作，那么一切都很好，但随机数据（尤其是紫色）是一个很好的迹象，表明纹理中没有写入任何内容或没有正确清除。

我写了一个应该可以工作的小示例应用程序，也许这会有所帮助。我只在windows上测试过，所以对于linux你可能需要稍微改变一下：[link](http://pastebin.com/f1c83f3f3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-13T08:12:56.737

GL_HALF_FLOAT_ARB 可以作为类型而不是 GL_FLOAT。

# fortran - inf 和 NaN 的内部表示是什么？

> ID：640109
> 
> 赞同：10
> 
> 时间：2009-03-12T19:16:53.980
> 
> 标签：fortran

今天午餐时，我和一个朋友正在讨论 Inf 和 NaN 是如何存储的。

以 Fortran 90 为例。4 字节实数可以获得 Inf 或 NaN 的值。这是如何在内部存储的？据推测，4 字节实数是由 32 位二进制数在内部表示的数字。Inf 和 NaN 是否存储为 33 位二进制数？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-12T19:39:00.510

具体来自 Pesto 的[链接](http://www.psc.edu/general/software/packages/ieee/ieee.php)：

IEEE 单精度浮点标准表示需要一个 32 位字，它可以表示为从左到右从 0 到 31 的编号。第一位是符号位，`S`接下来的八位是指数位，' `E`'，最后 23 位是小数' `F`'：

```
SEEEEEEEE FFFFFFFFFFFFFFFFFFFFF  
0 1 8 9 31  

```

单词所代表的值`V`可以确定如下：

*   如果`E=255`and`F`非零，则`V=NaN`("Not a number")
*   如果`E=255`和`F`为零并且`S`是`1`，那么`V=-Infinity`
*   如果`E=255`和`F`为零并且`S`是`0`，那么`V=Infinity`
*   如果`0<E<255`then `V=(-1)**S * 2 ** (E-127) * (1.F)`where " `1.F`" 旨在表示通过在 F 前加上隐式前导 1 和二进制点而创建的二进制数。
*   如果`E=0`和`F`不为零，则`V=(-1)**S * 2 ** (-126) * (0.F)`这些是“非标准化”值。
*   如果`E=0`和`F`为零并且`S`是`1`，那么`V=-0`
*   如果`E=0`和`F`为零并且`S`是`0`，那么`V=0`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-12T19:20:53.300

大多数浮点表示基于 IEEE 标准，该标准为 Inf 和 NaN 定义了[设置模式。](http://web.archive.org/web/20120124062928/http://www.psc.edu/general/software/packages/ieee/ieee.php)

# c# - C# 中的 HttpWebRequest 和表单身份验证

> ID：640116
> 
> 赞同：7
> 
> 时间：2009-03-12T19:18:40.497
> 
> 标签：c#, httpwebrequest, forms-authentication

我是一名系统专家，目前正在做一个兼职网络开发项目，所以对它很陌生。我正在尝试为 www.portapower.com 编写一个 http 客户端。

它将针对网站上发布的某些项目，如果它们符合特定要求，它将打印一条消息。

尝试访问此页面时：

[http://www.portapower.com/getbainfo.php?fclasscode=1&code=CB1831B.40H&fbrand=QUNFUg==](http://www.portapower.com/getbainfo.php?fclasscode=1&code=CB1831B.40H&fbrand=QUNFUg==)

该网站将我重定向到默认注册页面：

[http://www.portapower.com/defaregit.php](http://www.portapower.com/defaregit.php)

这是我编码的片段：

```
CookieContainer myContainer = new CookieContainer();

HttpWebRequest request = (HttpWebRequest)
WebRequest.Create("http://www.portapower.com/" + urlpart);
request.Credentials = new NetworkCredential("****", "******");
request.CookieContainer = myContainer;
request.PreAuthenticate = true;
request.Method = "POST";
HttpWebResponse response = (HttpWebResponse)
request.GetResponse();

Console.WriteLine(response.StatusCode);
Stream resStream = response.GetResponseStream();
Console.WriteLine(resStream.ToString()); 
```

我确实有用户名和密码，并且在浏览器中使用时可以正常工作。请告诉我这是否是访问经过身份验证的页面的正确方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-12T19:30:11.750

这取决于网站如何对用户进行身份验证。如果他们使用基本身份验证或 Windows 身份验证，那么您可以将类的属性[设置](http://msdn.microsoft.com/en-us/library/8y7x3zz2.aspx)[`Credentials`为](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx)用户名/密码/域信息，它应该可以工作。[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/8y7x3zz2.aspx)

但是，听起来您必须在网站上输入用户名/密码，这意味着您必须先登录该网站。查看主页，这是我在`<form>`处理登录的元素中找到的：

```
<form name="formlogin" method="post" action="./defalogin.php" >
  <input name="emtext" type="text" id="emtext" size="12">
  <input name="pstext" type="password" id="pstext" size="12">
  <input type="submit" name="Submit" value="Logn in" 
    onClick="return logincheck()" >
</form> 
```

我只包括了相关部分。

鉴于此，您必须首先使用和 POST和值进入`./defalogin.php`页面。此外，请确保将[属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)设置为. 当对 POST 的调用返回时，它很可能会填充一个 cookie，您必须将其发送回站点。只需继续在任何后续实例上设置属性，以确保 cookie 被传递。`HttpWebRequest``emtext``pstext`[`CookieContainer`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)[`CookieContainer`](http://msdn.microsoft.com/en-us/library/system.net.cookiecontainer.aspx)`CookieContainer``HttpWebRequest``CookieContainer`

然后，您将转到链接中指示的页面。

值得关注的还有`logincheck`javascript 函数，但查看脚本源代码，它并没有什么值得注意的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T19:50:37.630

您传递的凭据用于 Windows 身份验证。您需要使用模拟提交表单的数据提交发布数据，然后捕获响应中设置的会话 cookie，并将该 cookie 用于将来的请求

看看这个答案，其中包含执行此操作的代码：

[使用 HttpWebRequest 登录页面](https://stackoverflow.com/questions/450380/login-to-the-page-with-httpwebrequest/595318#595318)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T19:29:21.767

你不能这样做；您传递的凭据可以与基本身份验证方案一起使用（即，在浏览器中，您会弹出一个用户名/密码对话框。）您必须模拟将数据输入该表单并捕获登录cookie并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T19:27:24.657

NetworkCredential 类实际上是用于控制常规 Windows 凭据（NTLM、Kerberos 等）。

该站点是在 Apache 上运行的 PHP 站点，因此我认为他们没有使用 NTLM 或 kerberos。

您要做的是将一些 FORM 字段发布到站点，然后保留您返回的 cookie。确保在后续请求中将 cookie 推送回站点，以便它知道您已经登录。

# java - Java转码和操作mp3文件

> ID：640119
> 
> 赞同：1
> 
> 时间：2009-03-12T19:19:29.530
> 
> 标签：java, streaming, audio-streaming, upnp, transcoding

我正在寻找一个 java 库来高效/快速地转码和操作 mp3 文件。我正在开发一个复杂的流媒体服务器，它可以混合音乐并具有一些其他功能，允许用户相互交互。例如，推荐功能应该在发送用户的流中淡出到推荐的接收者。

所有功能现在都已实现，并且使用 UPnP-AV 设备运行良好。下一步将不是像我现在那样简单地切换曲目。它应该是歌曲之间的平滑淡入淡出。

对此有何建议？Mayby java 不是处理声音的正确解决方案。如果您知道更好的方法来进行音频转码和操作，请告诉我。

（需要转码，因为并非所有音频源都可用作 mp3，但在内部我只使用 MP3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-06T06:22:05.907

或者使用[Xuggler](http://www.xuggle.com/xuggler)对 MP3 文件进行解码或编码。它在后台使用 LAME，开源 (LGPL) 且免费，可在 Mac、Windows 和 Linux 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T19:48:53.640

[LAME](http://lame.sourceforge.net/about.php)是目前最好的 MP3 编码器之一。有一个名为[LAMEOnJ](http://openinnowhere.sourceforge.net/lameonj/)的 Java API 包装器，但它需要[JNIEasy 许可证](http://www.innowhere.com:8080/webapp/jsp/products/jnieasy/index.jsp?_page=products.jnieasy#licensing)，其免费版本必须*每 5 天*重新下载一次。坦率地说，我不知道您为什么要在内部使用 MP3 而不是 WAV 文件。它可能会做更多的工作。另外，还有[专利的事情](http://en.wikipedia.org/wiki/Mp3#Licensing_and_patent_issues)。

[总而言之，使用Java Sound API](http://java.sun.com/javase/6/docs/api/javax/sound/sampled/package-summary.html)可能会更好。有一个很好的开源包，叫做[Tritonus](http://www.tritonus.org/)。Tritonus 仅支持 Linux 上的完整 API（特别是声音输出），但它们有一些可以在任何平台上运行的[有用插件](http://www.tritonus.org/plugins.html)（包括 MP3 编码器，我无法谈论它的质量）。

# asp.net - HyperLinkField 未显示为链接

> ID：640120
> 
> 赞同：0
> 
> 时间：2009-03-12T19:19:31.277
> 
> 标签：asp.net

我在 a 中有以下列`GridView`，我的问题是它只呈现文本“下载”，而不是 URL。

```
<asp:HyperLinkField DataNavigateUrlFields="ArchiveLocation" Text="Download" DataNavigateUrlFormatString="{0}" /> 
```

当我将 a`DataTable`与一行绑定到网格时，`ArchiveLocation`该行中的包含值：

> “~/Common/Forms/ExportStream.aspx?path=C:\Development\Chase\Exports\ChaseExport-090312073930.zip”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-13T04:53:00.070

一种解决方法是使用模板字段并将冒号编码为其十六进制表示形式，即 %3A。

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# Eval("ArchiveLocation","{0}").Replace(":", Server.UrlEncode(":")) %>' Text="Download"></asp:HyperLink>
    </ItemTemplate>
</asp:TemplateField> 
```

从查询字符串变量集合中检索值时，它将被自动解码。

```
string path = Request.QueryString["path"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T20:08:47.477

仅当您希望所有记录使用相同的 URL 时才使用 NavigateUrl。

似乎 HyperLinkField 仅在字段值中有冒号时才呈现文本。删除冒号，您将看到超链接。我还不知道为什么。

显然， OnDataBindField 方法调用 CrossSiteScriptingValidation.IsDangerousUrl 代表您认为 ':' 危险：

```
internal static bool IsDangerousUrl(string s)
{
    if (string.IsNullOrEmpty(s))
    {
        return false;
    }
    s = s.Trim();
    int length = s.Length;
    if (((((length > 4) && ((s[0] == 'h') || (s[0] == 'H'))) && ((s[1] == 't') || (s[1] == 'T'))) && (((s[2] == 't') || (s[2] == 'T')) && ((s[3] == 'p') || (s[3] == 'P')))) && ((s[4] == ':') || (((length > 5) && ((s[4] == 's') || (s[4] == 'S'))) && (s[5] == ':'))))
    {
        return false;
    }
    if (s.IndexOf(':') == -1)
    {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T19:37:20.780

使用 templateField 时，您必须告诉它要绑定的内容

```
<asp:HyperLinkField DataNavigateUrlFields="ArchiveLocation" Text="Download" DataNavigateUrlFormatString="{0}"  NavigateUrl='<%#Eval("ArchiveLocation")%>' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T20:04:09.327

我会通过添加 onitemdatabound 事件处理程序来调试数据绑定过程，在其中设置断点，然后查看您的 DataItem 以确保它是您所期望的。

超链接字段在行模板中，而不是页眉或页脚，对吗？

# .net - 是否有全局命名的读/写锁？

> ID：640122
> 
> 赞同：15
> 
> 时间：2009-03-12T19:21:23.207
> 
> 标签：.net, locking

我有多个提供一组文件的 asp.net Web 应用程序。定期地，在提供文件之前会更新文件，但如果文件正在使用中，则无法更新文件。

我可以通过使用名称为文件路径的命名互斥锁来解决此问题（当然要替换无效字符）。我在其他情况下使用过它，但你可以看到它的效率是多么低。一次只有一个进程能够提供文件。

读/写锁是完美的，但它们被设计为在单个进程中工作。另外，我必须为每个可能会更新的文件创建一个读/写锁，而且还有很多。

我真正需要的是一个可以像互斥锁一样命名的读/写锁。有这样的事吗？或者可以使用现有的锁创建这样的东西吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-12T20:33:36.027

可以使用 Mutex 和 Semaphore 模拟读取器/写入器锁。如果我必须每秒访问它数千次，我不会这样做，但是每秒数十次甚至数百次，它应该可以正常工作。

此锁将允许 1 个写入者独占访问或 N 个（可能很大，但您必须定义它）读取者并发访问。

这是它的工作原理。我将以 10 个读者为例。

初始化一个命名的 Mutex，最初是无信号的，以及一个有 10 个槽的命名信号量：

```
 Mutex m = new Mutex(false, "MyMutex");
  Semaphore s = new Semaphore(10, 10, "MySemaphore"); 
```

获取读卡器锁：

```
// Lock access to the semaphore.
m.WaitOne();
// Wait for a semaphore slot.
s.WaitOne();
// Release mutex so others can access the semaphore.
m.ReleaseMutex(); 
```

释放读卡器锁：

```
s.Release(); 
```

获取写入器锁：

```
// Lock access to the seamphore
m.WaitOne();
// Here we're waiting for the semaphore to get full,
// meaning that there aren't any more readers accessing.
// The only way to get the count is to call Release.
// So we wait, then immediately release.
// Release returns the previous count.
// Since we know that access to the semaphore is locked
// (i.e. nobody can get a slot), we know that when count
// goes to 9 (one less than the total possible), all the readers
// are done.
s.WaitOne();
int count = s.Release();
while (count != 9)
{
    // sleep briefly so other processes get a chance.
    // You might want to tweak this value.  Sleep(1) might be okay.
    Thread.Sleep(10);
    s.WaitOne();
    count = s.Release();
}

// At this point, there are no more readers. 
```

释放写入者锁：

```
m.ReleaseMutex(); 
```

虽然很脆弱（使用这个更好的每个进程都有相同的信号量计数！），我认为只要你不试图太用力地打击它，它就会做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T19:33:01.867

我不认为有任何东西可以满足您所说的需求（尽管我保留错误的权利）。

您可以使用服务提供文件。这解决了两个问题。首先，正如您所说，并发问题。此外，即使您可以实现同步，如果您开始负载平衡，它也会变得更加困难和丑陋。使用服务提供文件可能会降低性能，但可以解决同步问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T21:36:39.667

这个怎么样？不要提供文件。**提供文件**副本。当您需要进行更改时，创建一个新文件，然后提供该文件的副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-17T22:35:32.320

我很欣赏[Jim Mischel 的精彩回答](https://stackoverflow.com/a/640368/2221472)，但我看到了通过避免 Thread.Sleep() 和避免多个读者同时尝试获取锁争用来提高性能的机会！

## 初始化

```
 Mutex writer = new Mutex(false, "Global\\MyWriterMutex");
  Semaphore readers = new Semaphore(int.MaxValue, int.MaxValue, "Global\\MyReadersSemaphore");
  EventWaitHandle readAllowed = new EventWaitHandle(true, EventResetMode.ManualReset, "Global\\MyReadAllowedEvent");
  EventWaitHandle readFinished = new EventWaitHandle(false, EventResetMode.ManualReset, "Global\\MyReadFinishedEvent"); 
```

## 读者

```
 while (true)
  {
    // signal that I'm reading 
    readers.WaitOne();

    // check whether I'm actually allowed to read
    if (readAllowed.WaitOne(0))
    {
      break; // great!
    }

    // oops, nevermind, signal that I'm not reading
    readers.Release();
    readFinished.Set();

    // block until it's ok to read
    readAllowed.WaitOne();
  }

  try
  {
    readData();
  }
  finally
  {
    // signal that I'm no longer reading
    readers.Release();
    readFinished.Set();
  } 
```

## 作家

```
 // block until I am the only writer
  try
  {
    writer.WaitOne();
  }
  catch (AbandonedMutexException)
  {
    // The mutex was abandoned in another process, but it was still acquired
  }

  // signal that readers need to cease
  readAllowed.Reset();

  // loop until there are no readers
  int readerCount = -1;
  while (readerCount != 0)
  {
    // wipe the knowledge that a reader recently finished
    readFinished.Reset();

    // check if there is a reader
    readers.WaitOne();
    readerCount = int.MaxValue - (readers.Release() + 1);
    if (readerCount > 0)
    {
      // block until some reader finishes
      readFinished.WaitOne();
    }
  }

  try
  {
    writeData();
  }
  finally
  {
    // signal that readers may continue, and I am no longer the writer
    readAllowed.Set();
    writer.ReleaseMutex();
  } 
```

# java - JasperReports 是在 Web 应用程序中显示报告的合适解决方案吗？

> ID：640130
> 
> 赞同：9
> 
> 时间：2009-03-12T19:24:11.653
> 
> 标签：java, pdf, jasper-reports

我们希望生成报告，可以嵌入到 Web 应用程序中作为 html 页面，也可以以*pdf 格式*下载。因此我遇到了*JasperReports*，因为它认为它可以满足这些要求。

目前我们假设我们的报告将有大约 50-100 页，几乎只有直方图和一些表格。数据是从我们的数据库中通过一些昂贵的查询来检索的。

在评估了一整天之后，我对网络应用程序方面有几个疑问。

1）分页：当然我不想在一个网页中显示所有页面。我们需要分页之类的东西。但是*JasperReports*似乎不支持这种方法。*JasperReports*附带的 wepp 演示勾画了要走的路：我必须创建一个***JasperPrint***，它已经是完整的报告，分配了不需要的内存并执行了昂贵的查询。然后我可以显示一个页面。但是对每个页面一次又一次地这样做对我来说并不是一个合适的解决方案。

2) 如上所述，我们的报告将主要由图表组成。***在将JasperPrint***导出为其输出格式期间会生成图像。如果我理解一切正确，那么*JR*附带的***ImageServlet***是有能力的，但检索这些图像是

 *i) 从文件系统中读取生成的图像
ii) 导出器已将它们存储在会话中（因此存储在内存中）。

因为我认为我们将有很多图像 ii) 不是一种选择，如果我们想保持 webapp 的内存占用较低。但另一方面，用文件淹没文件系统也不是我能想象的最好的主意。它会在某个时候删除文件吗？

我有什么问题吗？我的理解正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T19:49:42.157

**分页**

这是您的服务设计的一种，您的寻呼是如何实现的！PDF 是用于打印问题的独立输出格式。它无法从服务器读取更多数据（没有 Web 服务和阅读器扩展）。所以你可以定义，JasperReports 应该只是你数据的一个子集用于分页。

如果您在 JasperReports 中定义数据集，则可以重用它们而无需分配不需要的内存。

**图片**

如果您希望报告中包含图像并保持较低的内存占用，请编写一个平衡算法，该算法会在服务器负载低于指定值（可能是最后一天负载的平均值的动态值）时生成图像。

您需要实时创建图像吗？如果图像是由 servlet 创建的，它们将被加载到内存中。一个 Java 应用程序。可以将图像传递给 ReportGenerator。

> 图像可以从内存、磁盘或 URL 加载；[贾斯珀报告书](http://www.infoap.utcluj.ro/bdate/jreports.pdf)P:170

图像永远不应该保存在 HTTP_SESSION 中！这是一个导致内存膨胀的完全反模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T19:53:00.150

不，你会遇到各种各样的问题。

我认为您可以在 XHTML/CSS 中生成报告，如果您需要 PDF 渲染，只需使用[Flying Saucer](http://code.google.com/p/flying-saucer//) XHTML 渲染器。

# .net - 部署 Visual Studio Excel 2007 模板

> ID：640133
> 
> 赞同：1
> 
> 时间：2009-03-12T19:24:32.730
> 
> 标签：.net, visual-studio-2008, excel

我在 Visual Studio 2008 中创建了一个“Excel 2007 模板”类型的项目，并将该项目部署到网络共享。

运行 Studio 生成的 setup.exe 后，如何打开模板？开始菜单中应该有一个条目吗？出现在某个地方的 Excel 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T19:36:51.780

看一下VS安装目录里面的“Common7\IDE\ProjectTemplates\”文件夹。这应该包含模板的压缩文件夹（所需文件和模板文件）和一个 ProjectTemplatesCache\ 文件夹，该文件夹应该具有扩展文件夹（在适当的语言/项目类型层次结构下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-19T14:27:35.587

所以，找到了我要找的东西。

在 Visual Studio 中，我选择“发布工作簿”。在输入存放我们的代码库和 Excel 工作簿的网络路径后，我们将所述工作簿分发给我们的用户。当用户打开工作簿时，它会自动安装必要的 DLL。

# c# - 使用在 Silverlight 中的代码中创建的 XAML 中的静态对象

> ID：640154
> 
> 赞同：13
> 
> 时间：2009-03-12T19:33:48.073
> 
> 标签：c#, .net, wpf, silverlight, xaml

我无法让它在 Silverlight 中工作，所以我创建了两个测试项目。一个简单的 WPF 项目和一个简单的 Silverlight 项目都只做一件事：在代码中设置一个公共静态只读变量，并在完全裸露的 XAML 中使用它。在 WPF 中，工作顺利。在 Silverlight 中，我收到以下编译器警告和运行时错误：

**[警告 2 XML 命名空间“ http://schemas.microsoft.com/winfx/2006/xaml](http://schemas.microsoft.com/winfx/2006/xaml) ”中不存在标记“静态” ...**

和

**属性 Text 的属性值 {x:Static SilverlightApplication3:Page.Test} 无效。[行：7 位置：25]**

我假设 Silverlight 2 不支持这一点，或者我只是错过了一些非常简单的东西？这是两者的完整代码，以防万一是后者：

```
public partial class Window1 : Window
{
    public static readonly string Test = "test";
    public Window1()
    {
        InitializeComponent();
    }
}

<Window x:Class="WpfApplication4.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300"
        xmlns:WpfApplication4="clr-namespace:WpfApplication4">    
    <Grid>
        <TextBlock Text="{x:Static WpfApplication4:Window1.Test}" />
    </Grid>
</Window> 
```

这是SL版本：

```
public partial class Page : UserControl
    {
        public static readonly string Test = "test";
        public Page()
        {
            InitializeComponent();
        }
    }

<UserControl x:Class="SilverlightApplication3.Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:SilverlightApplication3="clr-namespace:SilverlightApplication3"
    Width="400" Height="300">
    <Grid x:Name="LayoutRoot" Background="White">
        <TextBlock Text="{x:Static SilverlightApplication3:Page.Test}" />
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-12T19:44:23.790

不幸的是，Silverlight 在功能方面有很多限制，而您只是发现了其中之一。SL2 不支持 StaticMarkupExpression。你也不能自己定义。

例如来自 ms 的家伙：http: [//blogs.msdn.com/edmaia/archive/2008/11/23/animating-objects-visibility-in-silverlight.aspx](http://blogs.msdn.com/edmaia/archive/2008/11/23/animating-objects-visibility-in-silverlight.aspx)

诀窍可能是使用像

```
class Helper{
    public string Value {get{return Page.Test;}} 

// implement INotifyPropertyChange if you want updates
} 
```

进而

```
<Grid.Resources>
     <somexmlns:Helper x:Key="Helper"/>
</Grid.Resources>

<TextBlock Text="{Binding Value, Source={StaticResource Helper}}"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-12T19:41:50.940

不幸的是，Silverlight 似乎不支持绑定到静态属性：[什么是 {x:Static sdfsdf} 等效项？](https://silverlight.net/forums/t/69176.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T19:05:03.267

只要类不是静态类，您实际上就可以绑定到静态属性。所以使用前面的 Helper 类示例：

```
public class Helper
{
    public static string Value{ get {return Page.Test;} }
} 
```

XAML 将保持不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T20:47:53.690

我刚刚注意到你有一个关于绑定颜色的次要问题。我不认为它可以在 Silverlight 中完成。我很确定 Silverlight 中绑定目标的最低要求是 FrameworkElement。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2010-07-22T21:22:23.783

静态对象只会被实例化一次，并且会一直持续到程序结束。静态对象即使不在范围内，也可以保持其状态，但仅在其本地范围内可见。

# sharepoint - 您将如何在 Sharepoint 上下文之外的 .net Web 应用程序中显示 Sharepoint 2007 网站的菜单？

> ID：640157
> 
> 赞同：2
> 
> 时间：2009-03-12T19:36:24.573
> 
> 标签：sharepoint, sharepoint-2007

我在 Sharepoint 2007 中有一个网站，因为任何页面我都使用 .net 菜单来显示页面层次结构。这在我在 Sharepoint Web 应用程序中使用它时有效，因为我在 Sharepoint 上下文中。问题是我有一个不是 Sharepoint 应用程序但必须与 Sharepoint 2007 中的网站具有相同菜单的 Web 应用程序。想象一下这个层次结构：

```
-Products
-Services
-Weblogs
-contact 
```

想象一下，Services 实际上是一个指向 .net web 应用程序的链接。如何以最优化的方式获取菜单的其余部分。此菜单必须始终是最新的，如果它发生变化，它必须反映在 .net web 应用程序中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T20:43:35.350

使用自定义 xml 站点地图提供程序。两个应用程序都可以配置为访问共享的 xml 数据源，并且可以编写计时器作业或类似的代码以根据需要更新 xml。

[MSDN 自定义导航控件和提供程序](http://msdn.microsoft.com/en-us/library/bb897739.aspx)

[代码项目 SharePoint 自定义网站导航](http://www.codeproject.com/KB/sharepoint/spnav.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T13:10:25.337

您可以对遍历当前站点和子站点的 SharePoint API 进行一些调用，并确定将在菜单中显示哪些项目。从理论上讲，这与 SharePoint 显示的实际菜单不同，但我认为可以对其进行细化，使其可靠地生成相同的数据（假设您在 SharePoint 中使用的是自动生成的菜单，而不是自定义菜单）。如果您喜欢冒险，您还可以以编程方式加载 SharePoint 页面并解析 HTML，一旦您开始工作，这可能是可靠的。

# asp.net - TreeView CSS 友好输出？控制适配器？ASP.NET 3.5

> ID：640158
> 
> 赞同：4
> 
> 时间：2009-03-12T19:36:46.010
> 
> 标签：asp.net, css, visual-studio-2008, xhtml, treeview

我希望我的 TreeView 控件输出`<ul><li>`标签而不是`<tables>`. 做这个的最好方式是什么。我听说了 CSS 控制适配器。这仍然是最好的方法吗？你打算怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T19:43:44.277

我假设您的意思是[CSS 友好控制适配器](http://www.asp.net/CSSAdapters/TreeView.aspx)？这仍然是我所知道的最好的方式。在[HTML Snippets 中](http://www.asp.net/CSSAdapters/TreeView.aspx)，它不呈现表格。

您的另一个选择是手动构建控件，只需使用计划旧 HTML 和可能的[Jquery 插件](http://plugins.jquery.com/)来操作树。

# java - 在 Tomcat 中开发的最佳 IDE 是什么？

> ID：640161
> 
> 赞同：9
> 
> 时间：2009-03-12T19:37:51.683
> 
> 标签：java, tomcat, maven-2, servlets

最近我一直在做大量的工作来开发 servlet 以在 Tomcat 5.5 中进行部署。我当前的 IDE 是带有 WTP 的 Eclipse Ganymede。我对 Tomcat 的集成非常不满意，因为配置不断出现问题并且需要调整。

我想知道是否有人可以推荐另一个更好地处理这种集成的 IDE。我对人们对 IntelliJ 对 Tomcat 的支持的看法特别感兴趣。

注意我也在使用 Maven 2，并且拥有 Maven 支持也非常重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-12T19:46:06.377

[Netbeans](http://netbeans.org)具有 tomcat 集成。我的意思是您可以从 IDE 启动和停止 tomcat、部署、分析和调试在 tomcat 中运行的应用程序。

[NetBeans 6.x 中 Apache Maven 的最佳实践](http://wiki.netbeans.org/MavenBestPractices)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T19:49:18.427

一路Netbeans。

与 tomcat 的集成非常棒，它甚至允许您创建项目并即时自动部署和更新，而无需编写任何类型的构建脚本部署描述符等。这真的很简单 :-)

[http://www.netbeans.org](http://www.netbeans.org)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-12T19:45:35.457

如果您没有为 JSP 使用调试器，那么任何 IDE（我使用 Eclipse）都可以与任何使用远程调试的 J2EE 服务器配合使用。将此添加到 Tomcat 的启动脚本中：

```
-Xdebug -Xrunjdwp:transport=dt_socket,address=5001,server=y,suspend=n 
```

然后使用您指定的端口（在本例中为 5001）在 IDE 中设置远程调试配置文件。

此配置永远不会中断并且适用于任何 Java 应用程序。只需像往常一样运行您的应用程序，并随时连接您的调试器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-12T20:01:56.197

IntelliJ IDEA 是适合您*的*IDE，具有出色的 Tomcat 和 Maven 集成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-13T00:04:01.700

我使用过 MyEclipse、Eclipse 的 SysDeo 插件和 WTP。在这三个中，当 WTP 起作用时，它会踢掉其他人的裤子。 *大多数*Maven 项目只会导入并运行。

不幸的是，有时 WTP 似乎不起作用，而你基本上是 SOL。我们当前的项目有一个相当复杂的 Maven 配置，我还没有

*   让它工作。
*   将问题简化为一个小测试用例以提交错误。

我强烈推荐 WTP，特别是如果您已经是 Eclipse 用户。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-12T20:17:13.697

这不是问题的直接答案，但是，与其更改 IDE，不如考虑更改容器（并且可能忘记 WTP）。**我强烈建议尝试 Jetty**，特别是如果您已经在使用 Maven。通过几行配置，您将能够`mvn jetty:run`在您的项目上运行，Jetty 将启动、部署和[扫描文件](http://docs.codehaus.org/display/JETTY/Which+files+are+scanned+by+the+Jetty+Maven+Plugin)以在必要时重新部署 webapp。这不是很好吗？

所以**我不使用 WTP**，而是使用[maven jetty 插件](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)，因为它为我提供了有用的功能：简单（使用和配置）、短的往返周期（启动和部署）、文件扫描器等，当然还有与 maven 的集成。在 Eclipse 中，我使用外部工具通过调用 maven 插件来停止和启动 Jetty。对于调试，我在启动 Jetty 时使用远程调试选项并按需连接远程调试器，如[在 Eclipse 中使用 Maven Jetty 插件进行调试中所述](http://docs.codehaus.org/display/JETTY/Debugging+with+the+Maven+Jetty+Plugin+inside+Eclipse)。

这样，我可以从 Eclipse 和/或 maven 做所有我想做的事情，而且我比使用 WTP 和任何其他轻量级容器更快乐。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T20:05:09.810

我为 Eclipse 使用了 sysdeo 插件，并且非常喜欢它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-12T23:52:37.017

您可以使用在 Tomcat、Jetty、WebLogic 或任何其他 Java EE 容器上运行的 IntelliJ 很好地调试 JSP。绝对是最好的 IDE。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-01-26T03:29:21.550

Intellij 有很好的 Tomcat 和 Maven 支持。如果你能负担得起花几块钱，那绝对物有所值。您可以获得 Intellij 的 30 天免费试用。试一试，你就不会回头了。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-03-12T20:35:07.040

我想你会喜欢[MyEclipse IDE](http://www.myeclipseide.com/)。不是免费的，但恕我直言，这是值得的。

# php - 如何从通过http post发送到我的脚本的xml中获取数据？

> ID：640163
> 
> 赞同：0
> 
> 时间：2009-03-12T19:38:36.097
> 
> 标签：php, xml

供应商将通过 httppost 向我发送一些 xml 到我将要制作的脚本。脚本，当接收到 httppost 时，我需要以某种方式从 xml 中获取数据并将其放入我的数据库中。

我确实有所有 3、PHP MYSQL 和 XML 的经验。我确实知道如何使用 E4X 从 XML 中获取值，但我不知道如何使用 PHP (4.3.9) 从 XML 中获取值。

所以说httppost是看起来像这样的XML：

```
<data>
<item sku="434322" price="15.00" color="blue" shape="round"/>
<item sku="434323" price="20.00" color="red" shape="square"/>
<item sku="434324" price="45.00" color="green" shape="triangle"/>
<item sku="434325" price="30.00" color="blue" shape="star"/>
</data> 
```

如何使用 PHP 循环遍历每个节点并获取每个属性值？

谢谢！！

**编辑：从 XML 获取数据似乎很复杂，所以如果有更简单的方法使用 CSV 而不是 XML，请分享。供应商确实说他们可以发送 CSV 或我想要的任何格式。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-30T11:28:07.307

This is how you loop trough **XML nodes** with **PHP 4.0**

```
<?php
$dom=domxml_open_file('file.xml');
// Or from a string
$dom=domxml_open_mem($xmlString);

$root=$dom->document_element;

$items=$root->get_elements_by_tagname('item');

// Loop trough childNodes
foreach ($items as $item) {
    $sku=$item->get_attribute('sku');

            // Your work here
}

echo $dom->dump_mem();
// Or to a file
$dom->dump_file('filename.xml');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T22:32:37.223

CSV 可能会更简单。您可以使用 explode() 来拆分字符串（[http://us2.php.net/explode](http://us2.php.net/explode)上的文档）。

例如，您可以将输入拆分为行，然后将每行拆分为逗号上的部分：

```
// split up lines
$lines = explode("\n", $_POST['data']);
$data = array();
foreach ($lines as $row) {
    // split a line on the commas
    $prop = explode(',', $row);

    // append an element to the array that contains 
    // the properties as an associative array
    $data[] = array('sku' => $prop[0],
                    'price' => $prop[1],
                    'color' => $prop[2],
                    'shape' => $prop[3]);

} 
```

在这里，我假设您要将输入转换为元素数组，表单的每个元素：

```
array(4) {
  ["sku"] =>
  "434322",
  ["price"] =>
  "15.00",
  ["color"] => 
  "blue"
  ["shape"] =>
  "round"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T19:55:54.823

为了处理 CSV 数据，我使用[str_getcsv()](http://us3.php.net/manual/en/function.str-getcsv.php)

```
while (($data = str_getcsv() !== FALSE)
{do something useful with $data} 
```

对于 XML，我推荐[SimpleXML 类](http://us2.php.net/manual/en/book.simplexml.php)而不是 XML Parser。简单不是最灵活的，但如果您所做的只是读取一些数据并保存它，它就可以正常工作。

如果表单数据只是一个文本字符串，那么你会

> $xml = simplexml_load_string($string)

接着

> foreach ($xml->children() as $child)
> 
> {做一些有趣的事}

或者您可以放弃 XML 并将其转储到带有[xml_parse_into_struct的数组中](http://us2.php.net/manual/en/function.xml-parse-into-struct.php)

> $xmlparser = xml_parser_create();
> 
> xml_parse_into_struct($xmlparser,$xmldata,$values);
> 
> xml_parser_free($xmlparser);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T20:07:12.627

您可以使用`file_get_contents()`从 POST 请求中获取 XML 字符串。但我不太确定“ `php://input`”已经在 PHP4 中工作。

```
$xmlData = file_get_contents("php://input"); 
```

在 PHP4 中有用于处理 XML的扩展[domxml 。](http://de.php.net/manual/en/book.domxml.php)但我强烈建议使用 PHP5 和[DOM 扩展](http://de.php.net/manual/en/book.dom.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T21:00:04.623

如果您的供应商可以以任何方式发送它，为什么不将其发送为：
有效的 PHP 代码，只需将其作为数组发送。如果 Vendors 脚本本身作为 PHP 运行，那么这将更容易，因为他们可以使用 var_export() 输出有效的 PHP 代码。

您也可以尝试使用此页面评论中的 XMLparsing 函数：http: [//nl2.php.net/manual/en/function.xml-parse.php](http://nl2.php.net/manual/en/function.xml-parse.php)它们看起来都还不错。

# jquery-ui - 如何使文本区域可拖动？（即禁止文本选择，但允许光标定位）

> ID：640167
> 
> 赞同：3
> 
> 时间：2009-03-12T19:39:32.740
> 
> 标签：jquery-ui

我有一个已设置为可拖动的文本区域，但它不是...我测试过的浏览器（OS X 上的 FireFox 3 和 Safari 3）认为我正在尝试选择文本区域内的文本（即使有没有）。

我想允许在文本区域内单击以定位光标进行编辑，但拖动移动应该由 jquery-ui 处理。

示例 html 在下面没有做我想要的...

```
 <html>
    <head>
    <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.7.custom.min.js"></script>
     <script type="text/javascript">
    $(function(){
            $("div").draggable();
            $("textarea").draggable();
    });
    </script>
    <style type="text/css">
    div {
            position:               fixed;
            top:                    100px;
            left:                   100px;
            width:                  100px;
            height:                 100px;
            background-color:       blue;
    }
    textarea {
            width:                  80%;
            height:                 80%;
            background-color:       yellow;
            resize:                 none;
    }
    </style>        
    </head>
    <body>
    <div>
    <textarea>Pirates spotted!</textarea>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T02:06:08.397

您可以考虑使用 jQuery-UI 对话框库并在其中放置一个文本区域。您可以使对话框可拖动。

# java - 将 XPath 1.0 数据类型映射到 java

> ID：640168
> 
> 赞同：0
> 
> 时间：2009-03-12T19:40:18.170
> 
> 标签：java, xpath, xsd, xmlbeans

我正在使用[XPath 1.0](http://www.w3.org/TR/xpath)来处理传入的 Web 服务消息。[如果使用模式数据类型](http://www.w3.org/TR/xmlschema-2/)，这可能很难做到，因为 XPath 1.0 无法识别它们（XPath 2.0 可以，但似乎没有完整的开源实现。不确定[Saxon-B](http://saxon.sourceforge.net/)是否这样做）。

例如，xs:boolean 中的文字“true”和“false”表示根据 xml 模式的布尔值 True 和 False，但 XPath 1.0 会将它们都评估为 True。

这意味着评估实际上返回 True `/test`。`<test>false</test>`

其他数据类型也是如此：“12.78e-2”是 xs:double 的有效值，但计算结果为 Double.NaN。

[`javax.xml.datatype`](http://java.sun.com/javase/6/docs/api/javax/xml/datatype/package-summary.html)包含持续时间和日期时间的类型映射，仅此而已。

[XMLBeans](http://xmlbeans.apache.org/)包含易于使用的 java 和 schema 的内置数据类型之间的转换器：

```
Node n = jaxp13XPathTemplate.evaluateAsNode(expression, context);
boolean b = XmlBoolean.Factory.parse(n).getBooleanValue(); 
```

是否有任何其他可能有用的工具（不，我不是在寻找成熟的 XML 绑定框架）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T19:47:12.643

我知道你说过你不想要一个完全成熟的绑定框架，但你看过 jibx。编写绑定文件可能会有点痛苦，但是您可以从 XML 模式生成绑定，如果您有一个，而且它是如此之快，它是不真实的。

作为使用 XPath 的替代方法，您是否考虑过将 xml 解析为您可以操作的 dom？

卡尔

# php - 哪些网络视频格式可以做到这一点？

> ID：640174
> 
> 赞同：3
> 
> 时间：2009-03-12T19:42:39.443
> 
> 标签：php, html, flash, video, video-streaming

我在这里不知所措——试图想出将视频嵌入网页的最佳方法，以便它可以以编程方式从特定帧号开始播放（而不是像 youtube 这样的简单时间线栏）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T19:49:29.097

您可以使用 ExternalInterface 对象在 Flash 电影中的 ActionScript 和页面上的 JavaScript 之间进行通信。[这里](http://blog.deconcept.com/2005/08/16/external-interface/)有一个很好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T20:47:53.170

我同意对 javascript+外部接口的攻击。

如果您拥有的电影不是交互式的（即用户一旦开始就无法使用时间线播放）更容易通过 flash-vars 简单地传递开始帧值（即在嵌入代码中将帧作为变量传递您的 HTML 文件）。

我只是想指定直接在时间线上导入视频对于流畅播放和同步音频来说不是很好的做法。当然，如果你有一点动画，那也没关系。您还必须注意要跳转到的帧在调用之前已正确预加载。

如果您有更大的视频，您可能更喜欢通过 RTMP 流式传输它，这样可以跳转到给定的帧，而无需预加载电影的整个开头，并且还可以获得更好的质量。

# c - MS3D 解析：boneID == 关节 ID？

> ID：640175
> 
> 赞同：1
> 
> 时间：2009-03-12T19:43:06.493
> 
> 标签：c, 3d

我正处于 MS3D 解析器的规划阶段，查看[规范](http://local.wasp.uwa.edu.au/~pbourke/dataformats/ms3d/ms3dspec.h)我发现顶点结构有一个 boneId 变量。“骨头”是关节的同义词吗？那么，那个 boneId 变量是关节数组的索引吗？如果不是，那么什么是骨头，它在哪里发挥作用？我一直认为骨头连接两个关节，但我在这个规范中找不到任何骨头的概念。它不完整吗？

谢谢！！

编辑：那什么是骨头？该头文件中未定义骨骼结构。有人可以向我展示更完整的 MS3D 格式规范吗，或者这只是我应该能够推断的东西？

EDIT2：与其说是“什么是骨头”，不如说是骨头在哪里？ms3d 文件是否也在文件中包含骨骼并且规范是错误的？如何加载这些骨骼，以便查看哪些关节影响顶点？

再次编辑：我找到了版本 4 的更新[规范](http://chumbalum.swissquake.ch/ms3d/ms3dspec.txt)，但它仍然没有定义骨骼。我错过了什么？？

Edit4：我开始看到连接。显然，关节形成骨骼。由于关节有父关节，它们形成一棵树（出于某种原因，我认为它们只是随机连接的）。那么我可以形成一棵骨骼树，我猜在文件中定义了父节点的第一个关节将形成骨骼 0，然后具有父节点的下一个关节与其父节点形成骨骼 1，等等？它是否正确？我希望我找到的两个规范文件明确说明了这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T19:46:01.913

我以为一个关节连接了两根骨头？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T19:48:07.183

我相信这`boneId`是与网格中的顶点相关联的骨骼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-24T07:59:28.733

**骨骼**是顶点集合的参考框架。它是概念性的……不是顶点，也不是多边形。

当一组顶点有一个共同的骨骼 id 时，这意味着当该骨骼移动或旋转时，这些顶点将跟随它。

**关节**声明两个骨骼已连接，并描述它们连接的方式和位置。

If you picture a primitive action figure that can only move its arms and legs at the base, you would have a figure with five bones (body, arm, arm, leg, leg) and four joints showing how the limbs attach to the body. All the vertices of that figure would belong to one of the five bones and all the motion of the figure would happen at one of the four joints.

# c# - 从多个表中加入 mysql 4.0 数据的最快方法？

> ID：640179
> 
> 赞同：1
> 
> 时间：2009-03-12T19:45:15.677
> 
> 标签：c#, .net, mysql, datatable, mysql4

我有 3 个 mysql 4.0 表：都有字段**ID** (int)、**类型**( *int* ) 和另一个字段，**值**是*varchar* (255)、*tinyint*或*int*。

我需要将它们全部写出来，最终得到三个 DataTable，循环它们，并将行创建到一个临时表中（在 .NET 1.1 中）。

您是否看到比这更快/更清洁的方式来加入或只写出这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T19:51:11.043

我不确定您是否要在一个查询中实际加入或显示所有三个表的结果。

如果您只是想要平坦的结果，最好的办法是建立一个工会，例如：

```
SELECT 
    ID, 
    Type, 
    Convert(varchar(255), Value) as Value 
FROM 
    table1
UNION
SELECT 
    ID, 
    Type, 
    Convert(varchar(255), Value) as Value 
FROM 
    table2
UNION
SELECT 
    ID, 
    Type, 
    Convert(varchar(255), Value) as Value 
FROM 
    table3 
```

注意：我正在进行转换，以便您可以获得所有三个字段的最稳定形式（varchar 版本）。

# actionscript-3 - 如何列出 SWF 中包含的所有类

> ID：640188
> 
> 赞同：4
> 
> 时间：2009-03-12T19:46:24.520
> 
> 标签：actionscript-3

有没有办法获取当前运行的 SWF 中包含的所有类的列表？您可以在根上使用 describeType，然后向下遍历列表以查找应用程序中引用的所有实例类，但此方法不适用于已包含但未引用的类（例如本地引用）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T20:53:57.827

从 Flash Player 11.3 开始，您可以使用 ApplicationDomain.getQualifiedDefinitionNames()。

基本示例：

```
var definitions:Vector.<String> = this.loaderInfo.applicationDomain.getQualifiedDefinitionNames(); 
```

以下代码演示了如何在 Flash Player 11.3 中列出 .swf 文件的所有定义（包括类），并在旧版本的 Flash Player 中显示失败消息：

```
var t:TextField;
t = new TextField();
t.width = 1200;
t.height = 700
t.border = true;
t.background = true;
t.text = "Definition List\n";
t.appendText("========================================\n");
var definitions:*;
if (this.loaderInfo.applicationDomain.hasOwnProperty("getQualifiedDefinitionNames")) {
  definitions = this.loaderInfo.applicationDomain["getQualifiedDefinitionNames"]();
  for (var i:int = 0; i < definitions.length; i++) {
    t.appendText(definitions[i] + "\n");
    t.scrollV = t.maxScrollV;
  }
} else {
  t.appendText("Could not read classes. For a class list, open this .swf "
               + "file in Flash Player 11.3 or higher. Your current "
               + "Flash Player version is: " + Capabilities.version);
}
addChild(t); 
```

对于 Flash Player 11.2 和更早版本中的类列表，您必须读取 .swf 的字节并手动解析类名。这里有两个著名的库来演示：

Thibault Imbert 的 SWFExplorer

[http://www.bytearray.org/?p=175](http://www.bytearray.org/?p=175)

Denis Kolyako 的 getDefinitionNames()

[http://etcs.ru/blog/as3/getdefinitionnames/](http://etcs.ru/blog/as3/getdefinitionnames/)

[http://etcs.ru/pre/getDefinitionNamesSource/](http://etcs.ru/pre/getDefinitionNamesSource/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-19T23:13:32.773

另一种可能是：

在嵌入的 SWF 的第一帧中，设置一个属性，列出您想要提供的所有类。

例如：

```
this.availableClasses = ["MainMenuClass", "SmileyFaceClass", "JumpButtonClass"]; 
```

然后，在加载时：

```
var classes:Array = loader.content.availableClasses;
var domain:ApplicationDomain = loader.loaderInfo.applicationDomain;
var classType:Class;
var clip:*;
for each(var className:String in classes) {
  classType = domain.getDefinition(className);
  clip = new classType();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-18T05:22:39.447

据我所知这是不可能的

# html - 图像宽度/高度作为属性还是在 CSS 中？

> ID：640190
> 
> 赞同：105
> 
> 时间：2009-03-12T19:47:19.353
> 
> 标签：html, css

指定图像高度和宽度的“正确”语义方式是什么？在 CSS...

```
width:15px; 
```

或内联...

```
<img width="15" 
```

?

CSS 似乎是放置视觉信息的正确位置。另一方面，很少有人认为不应将图像“src”指定为属性，并且高度/宽度似乎与“src”一样与二进制图像数据相关联。

（是的，我从技术和最终用户的角度意识到这并不重要。）

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-03-12T19:58:48.450

它应该内联定义。如果您使用 img 标签，该图像应该对内容具有语义价值，这就是验证需要 alt 属性的原因。

如果图像要成为布局或模板的一部分，则应使用 img 标签以外的标签，并将图像作为 CSS 背景分配给元素。在这种情况下，图像没有语义，因此不需要 alt 属性。我相当肯定大多数屏幕阅读器甚至都不知道 CSS 图像的存在。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-01T05:28:24.790

我认为这取决于您如何使用该属性。如果您在列表或表格中设置*多个图像*的样式以使其布局正确，则将宽度/高度放在*CSS*中以避免需要为列表中的每个图像添加另一组标签。使用类似的东西

```
ul.gallery img: { width:117px; } 
```

**另一方面，**如果您将图像插入到某些*内容*中，并且需要一定的大小才能使文档正常流动，则将其放入*HTML*中。这样您就不必为 html 中的每个不同图像弄乱样式表。这样，如果您将内容更改为不同的图像，或者将图像全部删除，您就不会在 CSS 中留下散落的代码残留物来记住删除。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-08T08:42:55.477

高度和宽度应包含在 HTML 中。原因是它在页面上创建间距。如果由于某种原因无法加载 img（并且您一直是个好孩子，并且包含了一个 alt.. 浏览器将显示该框架（使用提供的 w 和 h），其中包含 alt。

主要的有益原因是防止“流行”效应。当浏览器加载页面时，有时较大的方面（例如 img）需要更长的时间来加载，并且如果您没有在 HTML 中指定 w 和 h，浏览器将暂时折叠该区域，认为它不存在。然后，当它最终加载时，所有内容都会弹出到适当的位置。

这特别烦人，但在计算机上仍然很烦人，因为您要单击一个链接，突然页面向下移动并且您不小心单击了错误的链接。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-06-04T01:23:14.330

根据[MDN 上的 <img> 文章](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img)，HTML 属性表示图像的*固有*尺寸，即它的真实尺寸。这就是为什么 HTML 4 也允许百分比值，而 HTML5 只允许 px 值。（常见的陷阱：“px”不应该写）

如果要显示具有这些尺寸的图像，则工作完成。否则，您还必须添加 CSS 来指定*显示*大小。

当然，最好以显示的大小提供图像，以避免浏览器调整大小、节省带宽等，但这并不总是可行的。

另请参阅此问题的答案：[HTML 和 CSS 的宽度属性有什么区别？](https://stackoverflow.com/questions/20742675/whats-the-difference-between-htmls-and-csss-width-attribute)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-03-12T20:12:00.790

我会说CSS。

HTML 是关于内容的，
CSS 是关于呈现的。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2011-03-01T21:48:45.317

我会说HTML。

width 和 height 属性用于阻止页面以脱节的方式加载和增长。

如果您曾经阅读过页面上的文本块，但由于上面的延迟加载图像而将其向下推，您就会知道这是多么令人沮丧！
为每个图像添加一个 ID 只是为了指定它的宽度和高度将是可笑的，并且几乎与添加两个宽度/高度属性一样混乱。

问题是 Firefox 没有使用宽度和高度属性来保留图像空间，但令我惊讶的是他们实际上并没有更新它。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-06-27T19:37:26.627

如果您查看 HTML5 规范，指定高度和宽度不是必需的选项。因此，无论有没有这些属性，代码都是有效的。

从实际的角度来看，非常希望指定它们以防止如上所述的页面回流。然而，那些建议它应该在 html 中的人因为这个原因错过了浏览器在最初构建页面时使用 css 的事实。如果他们不这样做，则必须为浮动元素、指定的填充、边距等重新绘制页面。

是在html还是css中指定最好根据个人情况来判断。大量相同大小的图像可能最好使用 css 来处理，一个带有 html 的图像。也就是说，如果您正在为图像指定其他样式（边框颜色、样式或半径、浮动等），那么在 css 中添加宽度和高度是有意义的。

如果您在 html 中指定，则只能使用像素。如果您想指定百分比，则必须使用 css。

附带说明一下，我们鼓励使用 ems & % 而不是 px 来帮助避免在用户更改浏览器设置等时出现问题，但图像始终以像素为单位。显然，将 px 用于图像是有实际原因的。然而，将图像保存在 px 中似乎否定了不使用它们的论点。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-12T19:49:24.497

如果它是您网站模板的一部分，我会将其放在 CSS 文件中。

如果它只是在一个页面上，它应该是内联的（或在顶部的页面特定 CSS 块中定义）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-13T11:11:22.190

我的看法是它是内容的一部分，正如你所提到的，就像 src 属性一样。

另一方面，没有必要在 html 或 css 中指定宽度或高度，尽管它可能有助于更快地呈现页面。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-04-05T21:18:22.187

我会去 wi(d)th W3C Recommendation。

也就是说，将宽度和高度定义为如下属性：

`<img src="example.png" width="150" height="150" alt="example image">`

[http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element](http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-03-31T02:06:22.103

我可能是错的，如果我错了，请有人纠正我……但我认为谷歌和其他一些搜索引擎会索引 alt 标签的内容。

有时，为了设计美学，我创建了一个文本图像，使用的字体无法通过 HTML 获得，但可用于 Photoshop、Illustrator 等。如果您想要创建涉及文本信息的精确印刷印象，则实现这一点的唯一方法是创建印刷文本的图像并将实际文本放在 alt 标记中以供搜索引擎使用。

如果有人有更好的解决方案，我很想听听。

同时，考虑到对我所描述的内容的需求，作为标准做法，我投票支持 HTML 内联高度/宽度参数以及 alt 文本描述似乎是合理的。实际上，它是内容，而不仅仅是在这种情况下的设计——在 CSS 和搜索引擎提出更好的解决方案之前，这种情况真的不应该是规则的例外。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-30T21:55:47.107

电子邮件客户端如何将 img 约束作为属性与内联样式处理？

```
<img src="http://imperavi.com/img/redactor-image.jpg" width="1400" > 
```

[https://www.emailonacid.com/app/acidtest/display/summary/FAPNOuxiTtQN72OswSOfnQWbfnZswUAHhGCPbuzh4hk9a/shared](https://www.emailonacid.com/app/acidtest/display/summary/FAPNOuxiTtQN72OswSOfnQWbfnZswUAHhGCPbuzh4hk9a/shared)

```
<img src="http://imperavi.com/img/redactor-image.jpg" width="1400" height="582" > 
```

[https://www.emailonacid.com/app/acidtest/display/summary/CbRqMbMtCbVdpggthGRn5QPWeidpIo8aHaa6kl8TCqaD6/shared](https://www.emailonacid.com/app/acidtest/display/summary/CbRqMbMtCbVdpggthGRn5QPWeidpIo8aHaa6kl8TCqaD6/shared)

```
<img src="http://imperavi.com/img/redactor-image.jpg" style="width: 120px; " > 
```

[https://www.emailonacid.com/app/acidtest/display/summary/CemSW48eKxJBuQqCIO8oh8y77muOKfPvBsYsDjyswhi8g/shared](https://www.emailonacid.com/app/acidtest/display/summary/CemSW48eKxJBuQqCIO8oh8y77muOKfPvBsYsDjyswhi8g/shared)

```
<img src="http://imperavi.com/img/redactor-image.jpg" style="width: 120px; height: 50px;" > 
```

[https://www.emailonacid.com/app/acidtest/display/summary/vjAVkYnlD3TQyrfIDj4NGvoneeDc8hakzLaHdMsETaGSE/shared](https://www.emailonacid.com/app/acidtest/display/summary/vjAVkYnlD3TQyrfIDj4NGvoneeDc8hakzLaHdMsETaGSE/shared)

因此，不应使用内联样式设置 img 大小约束，主要是因为 Outlook 2007/2010/2013 不支持它们。

当同时使用属性和内联样式时会发生什么？一些客户端使用其中一种，另一些则将内联宽度与属性高度结合使用：

```
<img src="http://imperavi.com/img/redactor-image.jpg" width="1400" height="582" style="width: 120px; height: 50px;" > 
```

[https://www.emailonacid.com/app/acidtest/display/summary/6JdKm63qDVDxHuaJE2lZhV4NAOq8qxG4eSQ7VWRUALWLP/shared](https://www.emailonacid.com/app/acidtest/display/summary/6JdKm63qDVDxHuaJE2lZhV4NAOq8qxG4eSQ7VWRUALWLP/shared)

tldr：对 html 电子邮件使用 img 属性。

# python - python 2.6是否有任何Linux发行版？

> ID：640191
> 
> 赞同：4
> 
> 时间：2009-03-12T19:47:27.323
> 
> 标签：python, linux

我听说 ubuntu 9.4 会，但它仍处于 alpha 阶段。python 2.6 是否有任何稳定的发行版，或者至少不那么依赖它，所以重新安装 python 不会破坏任何东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-12T19:56:22.623

Arch Linux - [http://www.archlinux.org/](http://www.archlinux.org/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-12T19:59:41.633

你可以在 Ubuntu 8.10 中安装 python 2.6 就好了。

```
./configure --prefix=/usr/local
make
sudo make altinstall --prefix=/usr/local 
```

然后只需运行python：

```
python2.6 
```

如果你想在 shebang 行中使用它，只需使用：

```
#!/usr/bin/env python2.6 
```

当 Jaunty 9.04 与原生 python2.6 一起出现时，您的脚本仍然可以工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-12T20:56:26.660

openSUSE 11.1 标配 Python 2.6。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-12T19:52:51.430

Distrowatch 可能是您查看它的最佳位置，它有很多比较不同发行版的细节。

[http://distrowatch.com/](http://distrowatch.com/)

卡尔

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-12T20:16:47.410

值得一提的是，Gentoo 的 Portage 树中提供了 Python 2.6，但它是硬掩码的（这并不真正算作稳定），因为显然有些程序不能使用它。我的猜测是，如果你有 Gentoo，你可以安装 Python 2.6 并让它工作，但将其设为默认版本可能并不明智（即你也想保留 Python 2.5）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T20:07:37.667

Python 2.6.5 在[Fedora Rawhide](http://mirrors.fedoraproject.org/publiclist/Fedora/development/)中可用，但 Rawhide 是开发分支，因此这可能不符合您对“稳定”的描述（尽管非常稳定）。它似乎还没有进入 Fedora 10，我不知道它是否会。它肯定会出现在 Fedora 11 中——你已经可以得到它的预发布版本，它应该比 Rawhide 更稳定。或者，我认为您应该能够从预发行版或 Rawhide 中获取软件包并将其安装在 Fedora 10 下而不会出现问题。

# css - 全站搜索特定 CSS 案例

> ID：640195
> 
> 赞同：1
> 
> 时间：2009-03-12T19:48:47.290
> 
> 标签：css

我正在清理一个相当大（而且有点杂乱无章）的网站上的 CSS。有没有一种简单的方法（或软件）可以让我找到例如“h3”标签中的所有“a”标签？还是“p”标签内的所有“跨度”？我想修改其中的一些 CSS 规则，但我担心我会破坏隐藏在某处的东西。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T21:41:40.490

您可以修改您的 CSS 以突出显示您正在寻找的元素。例如

> `h3 a { background-color: red }`

将突出显示“h3”标签中的所有“a”标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T19:52:20.650

您肯定会想看看[FireBug](http://getfirebug.com/)和[XPathChecker](https://addons.mozilla.org/en-US/firefox/addon/1095)，这两个优秀的 Firefox 扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:15:25.893

我已经构建了一个名为 Element Finder 的命令行工具，它允许您输入 CSS 选择器，例如“h3 a”，然后搜索目录并找到所有与该选择器匹配的元素的 HTML 文件。

您需要安装 Element Finder，cd 进入您要搜索的目录，然后运行：

```
elfinder -s "h3 a" 
```

或者：

```
elfinder -s "p span" 
```

有关更多信息，请参阅[http://keegan.st/2012/06/03/find-in-files-with-css-selectors/](http://keegan.st/2012/06/03/find-in-files-with-css-selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:45:07.433

如果您想清理网站上的 CSS，我强烈建议您使用[Firefox](http://www.mozilla.com/firefox/)插件[Dust-Me Selectors](https://addons.mozilla.org/en-US/firefox/addon/5392)，它专门用于扫描网站以查找未使用的 CSS。它甚至可以一次扫描多个页面，方法是让它自动爬取您的网站，或者向它提供您要检查的特定页面的站点地图文件。

# java - Java/Swing 中表单的声明式验证

> ID：640208
> 
> 赞同：7
> 
> 时间：2009-03-12T19:50:32.980
> 
> 标签：java, validation, swing, declarative

我使用 Java 通过 Swing 进行客户端开发。我爱摇摆；我相信它是那里更好的 GUI 框架之一。然而，我想念的是对声明式验证的支持。就像XForms 中的[这个片段一样。](http://en.wikibooks.org/wiki/XForms/Facet_Validation)

您是否知道任何允许以声明性方式验证表单中的数据输入的库，而不是为那里的每个组件编写丑陋的验证文档侦听器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-12T20:43:15.677

您可以尝试[JSR 303 Bean Validation](http://jcp.org/en/jsr/detail?id=303)的一种实现。我认为它尚未最终确定，但有一些实现，例如 [Hibernate Validator](http://www.hibernate.org/412.html "休眠验证器")和[Agimatec Validation](http://code.google.com/p/agimatec-validation/ "Agimatec 验证")。我也没有尝试过，但是阅读一些有关如何使用 Bean Validation 的示例使它看起来很有希望。这是对规范负责人的[采访。](http://java.dzone.com/articles/bean-validation-rest-us-%E2%80%93 "规格铅")我最喜欢这个提议的是验证规则可以在不同的层和不同的框架中重用。您可以在注释和 xml 之间进行选择以进行“声明”。

最后，您可能想查看[Swing Java Builders](http://code.google.com/p/javabuilders/)，它提供了一种用于定义 GUI 以及使用 Swing 进行验证和数据绑定的声明方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-31T08:12:37.587

你可以看看我尝试构建一个 Swing GUI 构建器，它使用带有 Hibernate Validator 的 JSR303 验证：[http ://code.google.com/p/swing-formbuilder/](http://code.google.com/p/swing-formbuilder/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:08:45.400

你只需要编写一次丑陋的验证模型。您可以他们以“声明性方式”使用它们。实际有用的 Swing 库是一个更困难的问题。

# .net - mscorwks.dll 中的 System.UnauthorizedAccessException 导致应用程序池崩溃

> ID：640210
> 
> 赞同：3
> 
> 时间：2009-03-12T19:50:42.620
> 
> 标签：.net, debugging, crash

我的应用程序池每次都在 IIS 6.0 MS Debug Diag 指向 kernel32.dll 中随机崩溃。

入口点始终是 mscorwks!CreateApplicationContext+bbef，结果始终是 System.UnauthorizedAccessException。

堆栈跟踪：

```
Function                                       Arg 1        Arg 2        Arg 3   
kernel32!RaiseException+3c                     e0434f4d     00000001     00000001    
mscorwks!GetMetaDataInternalInterface+84a9     18316b3c     00000000     00000000    
mscorwks!GetAddrOfContractShutoffFlag+ac01     18316b3c     00000000     023cfbd8    
mscorwks!GetAddrOfContractShutoffFlag+ac73     00000000     000e8c88     8038b2d0    
mscorwks!GetAddrOfContractShutoffFlag+aca4     18316b3c     00000000     023cfbe4    
mscorwks!GetAddrOfContractShutoffFlag+acb2     18316b3c     acc05c33     7a399bf0    
mscorwks!CoUninitializeCor+67be                00000000     023cfc1c     023cfc8c    
mscorwks!CoUninitializeCor+87a1                001056e8     79fd87f6     023cfeb0    
mscorwks!CorExitProcess+4ad3                   023cfeb0     023cfd20     79f40574    
mscorwks!CorExitProcess+4abf                   001056e8     79f405a6     023cfd04    
mscorwks!CorExitProcess+4b3e                   000e8c88     00000000     023cfda7    
mscorwks!StrongNameErrorInfo+1ddab             00000000     00000000     023cfeb0    
mscorwks!StrongNameErrorInfo+1e07c             023cfeb0     00000000     00000000    
mscorwks!CoUninitializeEE+4e0b                 023cfeb0     023cfe5c     79f7762b    
mscorwks!CoUninitializeEE+4da7                 023cfeb0     acc05973     00000000    
mscorwks!CoUninitializeEE+4ccd                 023cfeb0     00000000     001056e8    
mscorwks!GetPrivateContextsPerfCounters+f1cd   79fc24f9     00000008     023cff14    
mscorwks!GetPrivateContextsPerfCounters+f1de   79fc24f9     acc058c3     00000000    
mscorwks!CorExeMain+1374                       00000000     00000003     00000002    
mscorwks!CreateApplicationContext+bc35         000e9458     00000000     00000000    
kernel32!GetModuleHandleA+df                   79f9205f     000e9458     00000000 
```

有谁知道这意味着什么以及如何解决它？

**编辑：**上面的堆栈跟踪原来是一种症状，而不是原因。上面的堆栈跟踪只显示了非托管堆栈，但问题发生在托管代码中。我使用下面答案中的步骤来挖掘故障转储并提取托管异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-09-14T13:44:18.920

对 mscorwks.dll 的引用只是问题的一个症状。mscorwks.dll 是包含公共语言运行时的 dll。

为了诊断问题的根本原因，我遵循了以下步骤：

1.  当 IIS 回收应用程序池时，使用[DebugDiag](http://www.microsoft.com/DOWNLOADS/details.aspx?FamilyID=28bd5941-c458-46f1-b24d-f60151d875a3&displaylang=en)捕获故障转储。
2.  [在windbg](http://www.microsoft.com/whdc/DevTools/Debugging/default.mspx)中打开故障转储。
3.  在windbg命令行输入“.loadby sos mscorwks”（不带引号）加载CLR调试工具
4.  使用 !PrintException 命令打印出故障转储中记录的最后一个异常。这很可能是导致 IIS 应用程序池回收的原因
5.  使用 !clrstack 命令查看引发异常的当前线程上的堆栈
6.  可以在[此处](http://windbg.info/doc/1-common-cmds.html#15_call_stack)和[此处](http://geekswithblogs.net/.NETonMyMind/archive/2006/03/14/72262.aspx)找到更多有关 windbg 的命令参考。最后，[这个 MSDN 博客](http://blogs.msdn.com/tess/)有很好的使用 windbg 的教程。

祝您调试冒险顺利！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-04T20:44:27.373

Ryan，我知道未处理的异常行为已经改变。从 NET Framework 1.0 或 1.1 开始，未处理的异常被忽略。2.x 及更高版本，未处理的异常将导致工作进程（应用程序池）崩溃。将以下内容添加到您的 web.config 以使其被忽略（但您应该找出它崩溃的原因！）

```
<configuration>
<runtime>
<legacyUnhandledExceptionPolicy enabled="true" />
</runtime>
</configuration> 
```

这可能会奏效。. .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-04T20:45:11.663

您的符号已损坏 - 修复它们，您可能会获得更有意义的调用堆栈

# unit-testing - 什么是我为必须从 ASP.Net 和 WinForms 使用的库进行 nunit 测试的最佳位置

> ID：640214
> 
> 赞同：3
> 
> 时间：2009-03-12T19:52:29.450
> 
> 标签：unit-testing, nhibernate, nunit, resharper

我有一个必须从 WinForms 和 ASP.Net 使用的基础结构库。

我想在一些单元测试中总结一下。

我把这些放在哪个项目中？

我是否在我的库项目中使用另一个文件夹？仅包含我的基础设施项目和单独的单元测试项目的不同解决方案？

顺便说一句，我将使用 ReSharper 测试运行程序，如果这有什么不同的话。

此外，这个库位于 NHibernate 之上，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-12T19:55:35.713

我将创建一个仅包含您的测试的单独项目。从测试项目中引用您的基础设施项目。

将生产代码与单元测试一起发布没有多大意义，即使它们不是通过 winform 或 Web 界面访问的。

此外，考虑使用 MVP 架构模式和依赖注入来组织你的类并使你的演示者和其他组件对测试更加友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T19:57:15.180

将您的测试完全放在一个单独的项目中，您可以将该项目包含在您的 WinForms 解决方案和 ASP.NET 解决方案中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:23:24.070

我不仅为我的测试创建了一个单独的项目，我还进一步将它们划分为单独的项目，用于单元测试和集成测试。

这样，您可以将持续集成服务器配置为仅在签入时运行单元测试，然后为每晚构建运行两组测试。

# python - 我可以覆盖管理界面中 tabularinline 字段的 html_name 吗？

> ID：640218
> 
> 赞同：0
> 
> 时间：2009-03-12T19:54:32.237
> 
> 标签：python, django, django-admin, django-forms

**是否可以覆盖 TabularInline 管理表单中字段的 html 命名，以便它们不包含破折号？**

我正在尝试应用[此处](http://jannisleidel.com/2008/11/autocomplete-form-widget-foreignkey-model-fields/)获得的知识来创建具有自动完成功能的 TabularInline 管理表单。

除了 Django 坚持将 tabularinline 查询集中的字段命名为以下行之外，这一切都有效：

```
[model]_set-[index]-[field] 
```

因此，如果我的模型是 TravelLogClient 并且我的外键字段是公司，则表格内联查询集中三个条目的 HTML 表单中的字段将是：

```
travellogclient_set-0-company
travellogclient_set-1-company
travellogclient_set-2-company 
```

问题是 javascript 不喜欢带有破折​​号的标识符。所以javascript失败并且自动完成不起作用。

这只是表格内联表格的问题！如果我在非表格管理表单字段上使用[Jannis 的自动完成示例](http://jannisleidel.com/2008/11/autocomplete-form-widget-foreignkey-model-fields/)`..._set-[index]-...`，它工作得很好，因为字段名称在 HTML 和 javascript中没有“ ”部分。

我没有向 django 的源代码提交一个补丁，将下划线的破折号更改为`contrib.forms.forms.py`and `contrib.forms.formsets.py`，而是在我看来，有可能以某种方式覆盖行为。

如果做不到这一点，让 html_name 中的这些破折号变成下划线的最简单方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-13T14:42:35.333

Paolo 和 Guðmundur 是对的。我根据 Guðmundur 的建议修改了我在 javascript 中的用法，现在一切都按预期工作了——不需要 django 干预。

对不起，精神错乱...

谢谢！

# google-chrome - 谷歌浏览器不显示 openid-selector

> ID：640225
> 
> 赞同：1
> 
> 时间：2009-03-12T19:57:08.563
> 
> 标签：google-chrome, openid-selector

有人有这个问题吗？

我用 IE6、IE7、IE8、FF、Safari、Opera 测试了我的页面......它适用于它们，但 Chrome 只是不呈现它......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-11-13T06:46:55.373

这是`openid-selector 1.0`. 你应该升级到`openid-selector v1.2`.

# javascript - 如何在javascript中隐藏弹出窗口的导航栏？

> ID：640227
> 
> 赞同：3
> 
> 时间：2009-03-12T19:57:56.580
> 
> 标签：javascript

如何在javascript中隐藏弹出窗口的导航栏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-12T20:00:33.487

```
window.open("http://www.google.com", "mywindow", "location=0,toolbar=0"); 
```

有关更多属性，请参[见此站点](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-12T20:24:49.387

上述建议在大多数情况下都应该有效。

不过要小心使用弹出窗口；它们可能被浏览器禁止，或者访问者可能已将浏览器设置为在选项卡中打开新窗口，从而导致意外结果（尤其是当他们的选项卡在后台打开时）。

根据您的目的，您可能需要考虑改用[jQuery 的 dialog()](http://docs.jquery.com/UI/Dialog)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-13T14:02:33.637

在现代浏览器中，有些设置不允许您隐藏位置和工具栏。无法绕过浏览器安全设置，因此设置 location=0 可能不起作用。

# c++ - 有人知道如何使用 QT 从控制台应用程序启动窗口吗？

> ID：640229
> 
> 赞同：0
> 
> 时间：2009-03-12T19:58:04.180
> 
> 标签：c++, qt, console, window

我正在学习 c++ 和 QT，并希望能够从控制台应用程序启动窗口。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T17:31:21.887

这是可能的，但我认为将 GUI 和控制台部分分成单独的程序并从控制台程序运行 GUI 部分可能会更好。否则，您可能不得不破坏所涉及的范例之一：控制台应用程序通常不使用事件循环，但您的 GUI 窗口不会响应任何内容，除非您让 Qt 接管并使用它自己的事件循环运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T12:22:24.187

是的，这是可能的。我们无法帮助您，除非您描述您尝试过的内容以及具体无效的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T22:04:41.737

如果您使用的是 MSVC，您可以尝试在 Project Settings->Linker->System 中设置 Subsystem->Console。

但是你为什么需要这样的行为呢？

# indexing - 更新 Nutch 指数的最佳方法是什么？

> ID：640235
> 
> 赞同：1
> 
> 时间：2009-03-12T19:59:41.990
> 
> 标签：indexing, nutch, full-text-indexing

我已经有一年左右没有看过 Nutch 了，看起来它已经发生了很大的变化。关于重新抓取的文档不清楚。更新现有 Nutch 索引的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-29T20:16:22.027

该脚本大致基于 Nutch 常见问题解答中的脚本，起初对我不起作用：

```
#!/bin/sh
#
# Automate crawling my site
#
crawldir=./crawl
urldir=./urls
NUTCH_HOME=${NUTCH_HOME:=.}

nutch=$NUTCH_HOME/bin/nutch

# Make sure the crawl directories exist
mkdir -p $crawldir/crawldb $crawldir/segments $crawldir/linkdb

# Inject the initial urls
$nutch inject $crawldir/crawldb $urldir

depth=1
while(true) ; do
  echo "beginning crawl at depth $depth"
  echo "-generate"
  $nutch generate $crawldir/crawldb $crawldir/segments
  if [ $? -ne 0 ] ; then
    echo "finishing at depth $depth - no more urls"
    break
  fi

  segment=`/bin/ls -rtd $crawldir/segments/*|tail -1`

  echo "$nutch fetch $segment"
  $nutch fetch $segment
  if [ $? -ne 0 ] ; then
    echo "fetch failed at depth $depth, deleting segment"
    rm -rf $segment
    continue;
  fi

  echo "$nutch updatedb $crawldir/crawldb $segment"
  $nutch updatedb $crawldir/crawldb $segment
  depth=`expr $depth + 1`
done

echo "$nutch mergesegs $crawldir/MERGEDsegs $crawldir/segments/*"
$nutch mergesegs $crawldir/MERGEDsegs $crawldir/segments/*
if [ $? -eq 0 ] ; then
  rm -rf $crawldir/segments/*
  mv $crawldir/MERGEDsegs/* $crawldir/segments
  rmdir $crawldir/MERGEDsegs
else
  echo "Something went wrong"
  exit
fi

echo "$nutch invertlinks $crawldir/linkdb -dir $crawldir/segments"
$nutch invertlinks $crawldir/linkdb -dir $crawldir/segments

echo "$nutch index $crawldir/NEWindexes $crawldir/crawldb $crawldir/linkdb $crawldir/segments/*"
$nutch index $crawldir/NEWindexes $crawldir/crawldb $crawldir/linkdb \
$crawldir/segments/*

echo "$nutch dedup $crawldir/NEWindexes"
$nutch dedup $crawldir/NEWindexes

echo "$nutch merge $crawldir/MERGEDindexes $crawldir/NEWindexes"
$nutch merge $crawldir/MERGEDindexes $crawldir/NEWindexes

mv $crawldir/index $crawldir/OLDindexes
mv $crawldir/MERGEDindexes $crawldir/index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-11T10:18:37.663

我们将 nutch 与 solr 结合使用。我们的 Nutch 指数约为。80 MB 包含 5000 个网站。到目前为止，重新抓取的最佳方法是删除索引并从头开始创建它。

# c# - 测试依赖注入配置

> ID：640236
> 
> 赞同：1
> 
> 时间：2009-03-12T19:59:44.707
> 
> 标签：c#, dependency-injection, unity-container

我正在使用 Unity 进行依赖注入。这在我测试我的对象时似乎很有帮助，因为我可以模拟所有依赖项。但是，我应该如何测试我的配置是否有效？

例如，我在 app.config 中更改了 Unity 配置，当然，项目将构建良好。我的测试目前只测试我的对象，所以它们仍然有效。但是我怎么能确定配置没有被破坏呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T13:57:39.493

要更新，我在这里所做的是将我的配置保存在 app.config 文件中。我的测试构建事件将 app.config 复制到它自己的 app.config，然后解析它以检索所有依赖项类型。然后它验证它是否可以将所有类型解析为测试。

因此，每次对 Unity 配置进行更改时，测试都会验证是否可以构建所有依赖项类型。这消除了我在依赖注入方面的大部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T20:06:18.997

我在代码中使用结构映射和配置。所以我实际上可以直接检查配置（检查你是否获得了适当的类型/对象树）。如果您使用的是 .config 文件，我想您可以加载整个配置部分并将其交给统一（不知道是否支持它）。

我还进行自动化功能测试，以测试它的完全集成（而不是进行手动测试）。

对于 Web 应用程序，您可以使用 selenium rc 或 watin，并在相同的“单元”测试框架中进行测试（将它们分开）。

对于桌面场景，您可以使用自动化。

# .net - 使用 StreamReader 读取文件时的文件编码

> ID：640242
> 
> 赞同：1
> 
> 时间：2009-03-12T20:00:41.210
> 
> 标签：.net, encoding, compact-framework, streamreader

我现在遇到一个问题，摄氏符号被读取为 C 而不是°C。

看起来像编码的罪魁祸首。我试图这样做：

```
 using (StreamReader sr = new StreamReader(this._inFilePath,System.Text.Encoding.Unicode ,true)) 
```

代替

```
 using (StreamReader sr = new StreamReader(this._inFilePath)) 
```

但我现在收到垃圾......原始文件编码是否必须与 StreamReader 编码匹配？我正在使用紧凑型框架 2.0。

我在网上找到[了这个](http://msdn.microsoft.com/en-us/library/system.text.encoding.convert(VS.71).aspx)，但如果使用它，我已经将它全部读入一个字节数组，检测每一行的结尾，将其转换为 Unicode，然后继续执行程序逻辑。有人用过这个类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T20:12:03.147

是的，您需要在构建 StreamReader 时指定正确的编码。.NET 可能能够为您检测编码。StreamReader 构造函数有重载，它带有一个布尔参数，您可以使用它来请求此行为。

public StreamReader（字符串路径，bool detectEncodingFromByteOrderMarks）

# php - php的整体设计理念是什么？

> ID：640244
> 
> 赞同：15
> 
> 时间：2009-03-12T20:01:01.440
> 
> 标签：php, language-design, language-features, language-comparisons

我最近通过一个客户端的 Drupal 应用程序第一次接触 PHP (5)。体验当然没有什么困难（例如文档很好），但我从来没有想过，“这真的很聪明！”，或者“哇，这使用起来很有趣！” 此外，我无法准确预测函数将如何命名，也无法确定要遵循的指导原则。

这与 Ruby 形成鲜明对比，例如，在 Ruby 中，一切都是对象，方法是可预测的和伪多态的，块使用起来很有趣（仅举几个例子）。其他语言的对比亮点：Python 的列表推导改变了你对迭代的看法，C 用它的指针和位操作把你带回了硬件，javascript 的无名函数和对哈希的高级支持令人惊讶，甚至 SQL 在它的硬性迫使你欣赏你的数据并以相关的方式思考它。

那么考虑到这一点，php的亮点是什么？该语言的整体设计理念是什么？我知道 php 总体上并不享有很高的声誉，但我一直听说这是一个认知问题，因为大量非专业开发人员敲打复制和粘贴代码。

编辑：

好的，所以共识是 PHP 是 web 程序员的扳手。我可以接受。我只是在寻找一个洞察力，但我想我已经有了它。例如，我当然很欣赏 mod_php/libphp。而且我能够在没有任何 PHP 经验的情况下在两周内完成我的应用程序，所以我想这也是不言而喻的。

感谢您的帖子。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-12T20:06:28.557

从[php 网站](http://us.php.net/manual/en/faq.general.php#faq.general.what)：

> PHP 是一种嵌入 HTML 的脚本语言。它的大部分语法都是从 C、Java 和 Perl 中借用的，并加入了一些独特的 PHP 特定功能。该语言的目标是允许 Web 开发人员快速编写动态生成的页面。

换句话说，并没有真正的设计哲学：它是完成工作的各种想法（显然继承自 Perl，呵呵）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-12T20:16:24.620

PHP的设计理念：

> **哦！**

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-12T20:13:07.153

PHP 的重点是快速完成工作，而不是聪明。这并不是说你不能用 PHP 编写漂亮、干净、面向对象的代码。我认为大多数 PHP 程序员出错的地方在于认为因为*可以*在 HTML 中嵌入 PHP，所以*必须*这样做。我自己的 PHP 代码是高度面向对象的，根本不包含任何嵌入代码（除了初始页面）。

正如您所指出的，PHP 有很好的文档记录，对于许多竞争对手来说，这比您可以说的要多。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-12T20:55:44.837

您必须记住的是 PHP 是一场革命。在 Rasmus Lerdorf 创建 PHP 的时候，动态站点确实没有替代品。好吧，有 CGI-GATEWAY（基本上是 php），它涉及编写你自己的 C exe 来服务页面 - 有一个叫做 ASP 的东西，但当时它相当垃圾，只在 Windows 盒子上运行，这些盒子在网。

你可以说它存在的原因或者它的设计理念是它是第一个面向网络的大众市场脚本语言。它的设计不如成熟，这就是为什么它看起来有点乱的原因，但它确实可以完成工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-12T20:06:46.013

关于函数命名/约定，它背后当然没有任何设计理念。
除非您将不一致视为一种设计理念:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-12T20:20:39.600

从一本 PHP 书我有：

> PHP 是 Apache 软件基金会的一个开源项目，它是最流行的 Apache Web 服务器附加模块，大约 53% 的 Apache HTTP 服务器具有 PHP 功能。PHP 特别适用于 Web 数据库应用程序，因为它具有用于 Web 和数据库环境的集成工具。特别是，在 HTML 页面中嵌入脚本的灵活性允许 HTML 表示和代码的轻松集成。数据库层集成支持也非常出色，有超过 15 个库可用于与几乎所有流行的数据库服务器进行交互。

它继续谈论以下优点：

> *   开源
> *   灵活地与 HTML 集成
> *   适用于复杂项目
> *   快速运行脚本
> *   平台和操作系统可移植
> *   社区努力

我知道这并不能真正回答您的问题，但也许它提供了对 PHP 的全部内容的更高层次的了解。

来自：休·E·威廉姆斯和大卫·莱恩。*使用 PHP 和 MySQL 的 Web 数据库应用程序*。第 2 版。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-12T20:46:30.147

PHP 是具有 Perl 语法的 HTML 文档的服务器端包含系统。从那以后，它一直试图超越其传统。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-13T00:08:39.723

*做你想做的*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-13T07:49:54.937

我认为 php 的好处是可以快速启动和运行，而且对初学者非常友好。我在学校学习的第一门语言是 Java，所以 PHP 很容易上手。当我学习 Java 时，第一次接触 OO 的概念很难，而且我并没有完全理解。但是由于您不需要在 PHP 中使用 OO，因此非程序员很容易学习语言基础知识，然后能够继续学习对象。

我同意这种语言有点混乱，但它确实为 Facebook、Digg 和部分雅虎等网站提供了动力。不能对 Ruby（更具体地说是 rails）说同样的话，除了 Twitter。

# iis - 如何自动创建 IIS 脚本映射

> ID：640247
> 
> 赞同：1
> 
> 时间：2009-03-12T20:01:56.633
> 
> 标签：iis, scripting, automation

我想使用脚本自动执行以下任务，以为我的项目创建 IIS 脚本映射：

*   转到控制面板 | 管理工具
*   开放互联网信息服务
*   右键单击默认网站并选择属性。
*   在“属性”对话框中选择“主目录”选项卡。
*   单击“应用程序配置”对话框中的配置按钮。
*   单击“添加”按钮。

在添加/编辑对话框中，确保以下设置正确：

*   对于可执行文件，放入 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll
*   对于扩展名，请输入“*”
*   对于动词，选择“所有动词”
*   选择“脚本引擎”并将“检查文件是否存在”留空。

**注意：** IIS v5.1 管理器控制台允许您添加“*”通配符扩展名，但 IIS v6 管理器不允许。这只是一个 UI 限制。我的盒子是WinXP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T20:11:29.467

我们有一个使用 javascript 对 IIS 进行一些更新的脚本。

```
var iisPath = "IIS://localhost/W3SVC/" + siteID;
var site = GetObject(iisPath); 
```

从这里你应该能够做你想做的事。您可能需要环顾[对象模型。](http://msdn.microsoft.com/en-us/library/ms525949.aspx)

您可能还想查看以下文章：http: [//blogs.msdn.com/david.wang/archive/2005/07/13/HOWTO_Enumerate_IIS_Website_Configuration.aspx](http://blogs.msdn.com/david.wang/archive/2005/07/13/HOWTO_Enumerate_IIS_Website_Configuration.aspx) ，这里是 ScriptMaps 属性的具体信息：[http:// /msdn.microsoft.com/en-us/library/ms526052.aspx](http://msdn.microsoft.com/en-us/library/ms526052.aspx)

# c# - 使用 Linq2Nibernate 和 IQueryable 进行界面设计

> ID：640249
> 
> 赞同：2
> 
> 时间：2009-03-12T20:03:08.503
> 
> 标签：c#, .net, linq, iqueryable, linq-to-nhibernate

使用 Linq2Nibernate 时最好让你的 Repository 返回一个 IQueryable？

我的理解是，如果您使用 Linq 来 Nibernate，则查询不会“触发”，直到您调用 .First() 或 Single() 等。那么从所有接口中返回 IQueryable 不是最好的，这样您就可以在表达式树触发之前构建\操作表达式树吗？

我的存储库由服务调用并从 IServicie 继承。

**编辑：**

首先，我真的很感谢所有的答案。但我想对这个问题补充一点。我赞成这个设计。我不完全理解围绕测试的保留意见。只要在每个过滤点（即每个过滤点）都测试该过程，那么我真的看不出有太大的区别。

添加：

如果您的存储库不返回 IQuerrable，那么使用 Linq2Nibernate 有什么意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T20:05:46.780

个人认为不会。从存储库中公开可组合查询的问题在于，您不能再对它们进行完全单元测试——它们的行为（和成功）现在由调用者摆布。例如，他们可能会这样做`.Where(x=>SomeUnmappedMethod(x))`（没有翻译）。我在[这里](http://marcgravell.blogspot.com/2009/02/pragmatic-linq.html)添加了更多内容。

如果您有返回（例如）`IList<T>`或 的固定方法`T[]`，那么您可以确定如果它在单元测试中有效，它应该真正有效（除非有任何配置错误）。这也意味着您可以单独分析 DAL，并对将要执行的 SQL（等）有合理的信心。您无法分析/优化根据调用者更改的 DAL。

（基于我的 LINQ-to-SQL 用法；不是专门的 LINQ-to-NHibernate）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T20:10:17.003

这取决于什么在消耗您的“存储库”（由于含糊不清而引用）。我会说，如果您的最后一层（UI）之类的东西正在使用您的存储库类**而不**返回 IQueryable。但是，如果您的 UI 层和数据访问层之间有另一层，我会说是，返回 IQueryable 并让您的中间层处理查询的执行。

**编辑**

至于测试您的数据访问层（DAL）/存储库，我会说大多数情况下，除非您有实际的逻辑（if 语句等），否则应该几乎没有测试。此时您正在测试框架。我的建议是在您的访问层 (UI) 和 DAL 之间放置另一层，例如 BLL 或处理 IQueryable 查询执行的东西。这样，您的存储库可以返回查询，您的 BLL 可以处理执行它们，并且可能执行一些可以测试的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:20:25.700

我不使用 IQueryable，但我会解释为什么我做的有点不同：

*   更容易模拟存储库，测试使用它的其他代码
*   集成测试——大多数导致查询被触发的东西都在存储库中，所以我可以针对它做一些真正集中的集成测试
*   与第一个相关，更容易检查代码是对存储库进行适当的调用。这是因为调用代码会将过滤器信息传递给存储库方法调用，而不是将它们应用于结果。

# javascript - 检测与浏览器的自动完成菜单交互的按键

> ID：640251
> 
> 赞同：0
> 
> 时间：2009-03-12T20:03:56.100
> 
> 标签：javascript

我有一个`jquery.keypress`on a `text input`，并且`keypresses`与浏览器的自动完成交互的都触发了事件。有没有办法判断（例如）输入是否在输入中而不是在其自动完成下拉列表中被击中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T20:08:13.280

在表单中使用隐藏的输入字段并检查它是否设置为确定表单是否已提交。

# wpf - WPF：通过 DependencyObject 限制拖动操作的有效控制部分

> ID：640254
> 
> 赞同：0
> 
> 时间：2009-03-12T20:04:40.433
> 
> 标签：wpf, user-controls, drag-and-drop

在阅读StackOverflow 上的[这个答案](https://stackoverflow.com/questions/294220/dragging-an-image-in-wpf)后，我问了这个问题。

提供的答案非常适合让您移动整个控件。但是假设我有一个像这样创建的用户控件：

```
<UserControl x:Class="WpfTest.UserControl1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="300" Width="300">
    <Border Background="Blue">
        <Grid>
            <Grid.ColumnDefinitions>

            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="26"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>
            <Canvas Grid.Row="0" Background="orange"></Canvas>
            <Canvas Grid.Row="1" Background="Purple"></Canvas>
        </Grid>
    </Border>
</UserControl> 
```

当我用鼠标单击控件的标题部分 Grid.Row[0] （橙色部分）时，我只希望控件移动。单击控件的其余部分时，我不希望控件响应拖动操作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T21:54:30.577

假设您使用的是`DraggableExtender.CanDrag`附加属性，您可以设置一个触发器来根据鼠标是否在橙色标题上来打开和关闭它：

```
<UserControl x:Class="WpfTest.UserControl1" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="300" Height="300">
    <UserControl.Style>
        <Style>
            <Setter Property="(DraggableExtender.CanDrag)" Value="False"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, ElementName=headerCanvas}" Value="True">
                    <Setter Property="(drag:DraggableExtender.CanDrag)" Value="True"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </UserControl.Style>
    <Border Background="Blue">
        <Grid>
            <Grid.ColumnDefinitions>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="26"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>
            <Canvas x:Name="headerCanvas" Grid.Row="0" Background="orange"></Canvas>
            <Canvas Grid.Row="1" Background="Purple"></Canvas>
        </Grid>
    </Border>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T21:58:24.920

所以，经过一番挖掘，我解决了我的问题。解决方案是使用**Thumb**。

我的 UserControl XAML 如下所示：

```
<UserControl x:Class="WpfTest.UserControl1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="300" Width="300">
    <Border Background="Blue">
        <Grid>
            <Grid.ColumnDefinitions>

            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="26"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>
            <Canvas Grid.Row="0" Background="orange"></Canvas>
            <Thumb Grid.Row="0" Background="Cyan" DragCompleted="OnDragComplete" DragStarted="OnDragStarted" DragDelta="OnDragDelta" ></Thumb>
            <Canvas Grid.Row="1" Background="Purple"></Canvas>
        </Grid>
    </Border>
</UserControl> 
```

我们可以看到添加了不同颜色的拇指，它覆盖了橙色的标题（让我知道拇指实际上在那里）。

Thumb 事件的代码如下所示：

```
public partial class UserControl1 : UserControl
    {
        private bool _isDragging;
        private double _x;
        private double _y;

        public UserControl1()
        {
            InitializeComponent();
        }

        private void OnDragComplete(object sender, DragCompletedEventArgs e)
        {
            _isDragging = false;

        }

        private void OnDragStarted(object sender, DragStartedEventArgs e)
        {
            _isDragging = true;

            _x = (double)GetValue(Canvas.LeftProperty);
            _y = (double)GetValue(Canvas.TopProperty);

        }

        private void OnDragDelta(object sender, DragDeltaEventArgs e)
        {
            if (!_isDragging) return;

            _x += e.HorizontalChange;
            _y += e.VerticalChange;

            SetValue(Canvas.LeftProperty,_x );
            SetValue(Canvas.TopProperty,_y );
        }
    } 
```

这正是我想要的。确实存在一个问题：当我移动它时，我看到用户控件有些撕裂。这不是一个平滑的绘图效果，我似乎无法找到消除它的方法。有什么线索吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-12T20:47:14.903

我在 CodeProject 上找到了一个非常棒的例子，叫做 DiagramDesigner。这应该让您朝着正确的方向开始。[CodeProject, DiagramDesigner4](http://www.codeproject.com/KB/WPF/WPFDiagramDesigner_Part4.aspx)

# voice - VXML从变量中获取子对话框的'src'

> ID：640255
> 
> 赞同：0
> 
> 时间：2009-03-12T20:04:44.740
> 
> 标签：voice, vxml, coexistence

我们的业务正在从旧的 ASP 系统过渡到更新的 ASP.NET 系统，包括对我们的数据库进行大量改进。将会有一段共存的时期，在此期间，新旧将并存。

一个需要共存的应用程序是我们使用的语音邮件系统。它的工作原理如下：

1.  用户来电。
2.  用户输入帐号。
3.  用户记录该帐户的消息。
4.  用户可以选择重新录制、接受或丢弃。

在共存期间，正在修改现有应用程序。当用户输入已转换为新系统（使用不同的识别号码）的帐号时，我们希望无缝地允许他们继续。帐户验证系统当前正在返回帐户名称、帐号和（用于共存）到正确记录页面的路径。

一旦用户记录了一条消息并接受它（或挂断），我们就会触发一个子对话框来将消息记录到我们的数据库中。

如何修改子对话框调用以接受变量的内容作为 src？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T20:11:42.663

你需要`srcexpr`改用。这是一个例子

```
<var name="VariableHere" expr="'nowhere.vxml'"/>
<!-- Populate your VariableHere through your logic, default to nowhere.vxml --> 
<subdialog srcexpr="'http://www.YourDomain.com/' + VariableHere">
</subdialog> 
```

# c# - 刷新架构不会检索列

> ID：640259
> 
> 赞同：0
> 
> 时间：2009-03-12T20:05:45.720
> 
> 标签：c#, asp.net, ado.net

你能给我一些关于如何启用刷新模式的建议，以便我可以使用它来（重新）生成 GridView 列：

*   仅当我更改数据源中的属性（例如，如果我将公共属性变为私有属性）然后重新编译网页时，使用 ObjectDataSource 控件刷新架构链接才有效（因此从数据源中检索信息），即使这样刷新模式只会在我第一次单击它时检索属性名称。因此，如果（在我已经单击过一次刷新架构链接之后）我从 GridView 标记中删除，但我想使用刷新架构链接重新生成这些列，它不会工作！

*   同样，使用 Sqldatasource 刷新模式链接仅在我更改 SelectCommand 字符串时才有效，即使只有一次。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T20:13:13.190

如果您正在执行刷新模式，我认为您将需要打开 AutoGenerateColumns

# sifr - sIFR 无法在任何浏览器上运行

> ID：640264
> 
> 赞同：1
> 
> 时间：2009-03-12T20:06:52.880
> 
> 标签：sifr, invisible

这是我第一次使用 sIFR3 436。我已按照说明进行操作，根本无法获取要呈现的文本。

[http://investcielo.com](http://investcielo.com)

我同时使用 h1 和 h2 标签，但它不起作用。他们仍然是隐藏的。我确定这很简单，可能在 css 中，但我找不到。我已经看它太久了，也许一些更有经验和“新鲜”的眼睛可以看到我看不到的东西。谢谢。

FWIW，原文也没有显示。它是空白的。sIFR 不渲染任何东西，原始文本也消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T23:07:51.070

Flash 影片似乎已损坏。在浏览器中打开它应该显示“使用 sIFR r436 渲染”，但它是空白的。

# unit-testing - 在 CC.Net 上的 Watin 测试失败

> ID：640273
> 
> 赞同：4
> 
> 时间：2009-03-12T20:09:47.567
> 
> 标签：unit-testing, watin, xunit.net

我在 Windows Server 2003 下的 CC.Net 上使用 xUnit 运行 Watin 测试。

我有很多测试在使用 TestDriven.Net 的开发箱和使用 xUnit gui 应用程序的服务器上运行良好。但是，当 CC.Net 运行测试（作为 MSBuild 任务的一部分）时，函数

```
ie.ContainsText("some text to find"); 
```

从不返回预期值。IE 对象上的其他函数和属性似乎工作正常：Button(...).Click()、TextBox(...).Value 等。

我知道服务帐户需要“允许服务与桌面交互”。

我已经在本地系统和本地管理员下尝试过这个正在运行的 CC 服务。管理员帐户只是挂起并且似乎从未完成运行测试（尽管它确实创建了 iexplorer.exe 进程的实例。

这是服务器权限的问题，还是我在配置中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-08-06T20:43:14.910

我们刚刚弄清楚如何解决这个问题。我们现在通过 CruiseControl.net 作为服务运行 watin 测试。

由于安全设置的方​​式，我们需要我们的 cc.net 服务以特定用户身份运行，以便访问我们正在测试的网站。由于该服务作为域用户运行，因此服务安全选项卡上的“允许用户与桌面交互”复选框被禁用。我们不想只从始终登录的用户运行命令进程，因为我们希望进程在重新启动时自动启动。现在我们已经弄清楚了

我们解决这个问题的方法是首先创建一个批处理文件来调用 nunit-console.exe。nunit-console.exe 的参数作为参数传递给批处理文件，然后再传递参数。批处理文件的第二行也是最后一行返回从 nunit-console.exe 返回的返回码。批处理文件基本上如下所示：

```
 nunit-console.exe %1 %2
 exit /b %ERRORLEVEL% 
```

您传递给 nunit-console 的参数数量可能会根据您的需要而有所不同。

我们使用 nant 进行构建，因此我们将现有的 nant 任务替换为调用 nunit-console 的 exec 任务，该任务调用 cmd.exe，如下所示：

```
 <exec program="cmd.exe" failonerror="true">
      <arg value="/interactive" />
      <arg value="/c" />
      <arg value="[batch file name]" />
      <arg value="[parameter one value]" />
      <arg value="[parameter two value" />
   </exec> 
```

我不知道在 msbuild 中同样的任务会是什么样子，但我相信你可以查一下。最终的结果本质上是一个如下所示的命令：

```
 cmd.exe /interactive /c [batch file name] [parameter one value] [parameter two value] 
```

或者，您可以使用 nant 并创建 msbuld nant 任务来调用您现有的构建。

cmd.exe 的“/interactive”参数是关键，它在有权与桌面交互的进程上运行批处理文件。如果需要 '/c' 参数，我实际上并不肯定，但它按原样工作。我们仍然告诉 nunit 将结果记录到同一个 xml 文件中，因此我们的合并任务不需要更改，并且将测试结果报告给巡航控制系统工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-06T06:06:22.653

Watin 依靠浏览器自动化来完成它的工作，因此“允许服务与桌面交互”设置。

当 Watin 尝试运行时，它将在服务帐户而不是当前登录的桌面下运行，并且由于它会启动 IE，因此您运行 Watin 的帐户可能之前实际上并没有启动 IE，它可以坐在 IE 的初始启动序列中，它会提示设置和所有这些 hoo-hah。

另外，如果我没记错的话，与桌面交互设置需要主动登录才能与之交互。如果当时没有人登录，则该服务将无法与之交谈，也不会为您创建新桌面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-13T20:08:16.453

线下收到了几个建议：

1.  尝试在服务器上使用 msbuild 运行测试。
2.  尝试从控制台而不是作为服务启动 CC.Net。

将编辑结果。

**编辑：**

结果：

1.  我完全能够在服务器上使用 msbuild 运行测试。
2.  当我从命令行运行 ccnet.exe 时，测试运行良好。但是，当我设置一个任务以在启动时从命令行启动 ccnet.exe 时，测试挂起并且永远不会完成（最终超时）。

部分解决方法是在永不终止的会话上运行命令行可执行文件。我真的不喜欢这个解决方案，所以任何进一步的输入将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-07T12:10:14.770

不知道为什么用无效的执行示例将该答案标记为正确..

我将其重写为：

`<exec> <baseDirectory>WatinTestDir</baseDirectory> <executable>cmd.exe</executable> <buildArgs>/interactive /C nunit-launcher.bat Test.dll /xml:../Test-results.xml</buildArgs> <buildTimeoutSeconds>2400</buildTimeoutSeconds> </exec>`

哪个运行..但同样失败..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T08:21:17.307

我遵循了这个例子，但遗憾的是它对我没有帮助。由于这个问题是关于 nant 的，而且我使用的是 msbuild，所以我[在这里](https://stackoverflow.com/questions/19652107/selenium-times-out-when-run-in-ccnet-as-a-service)打开了一个单独的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-07T14:48:43.193

这是一个很好的解决方案，但不能解决问题是您尝试使用 Watin 下载文件。

[http://blog.kikicode.com/2011/10/run-minimized-batch-file-in-task.html](http://blog.kikicode.com/2011/10/run-minimized-batch-file-in-task.html)

这对我有用。问题是 cmd 提示符阻止 IE 出现。当我能够最小化 cmd 提示时，它允许 IE 获得焦点并下载我在我的过程中需要的文件。

# c++ - Swig 和引用计数的 C++ 类

> ID：640283
> 
> 赞同：2
> 
> 时间：2009-03-12T20:12:09.230
> 
> 标签：c++, swig, reference-counting

我的许多 C++ 对象通过 AddRef 和 FreeRef 方法实现了引用计数。如果 FreeRef 将引用计数减少到 0，则对象将删除其自身。

所有返回引用计数对象的方法都不会增加引用。这使得它变得简单，因为智能指针可以简单地在接收到指针时增加计数，并在它们不再引用它时减少计数。例如：

```
template<class T> FlPtr
{
    T *p;
public:
    FlPtr(T *p=0):p(p){if(p)p->AddRef();}
    ~FlPtr(){if(p)p->FreeRef();}

    FlPtr<T>& operator =(T *newP)
    {
        if(newP)newP->AddRef();
        if(p)p->FreeRef();
        p = newP;
        return *this;
    }
    operator T*(){return p;}
}; 
```

我在想也许我可以告诉 SWIG 只在内部使用我现有的智能指针来处理这些可能有效的对象，但是我也不知道该怎么做:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-13T14:43:38.797

查看[SWIG 文档](http://www.swig.org/Doc1.3/SWIGPlus.html#SWIGPlus_nn34)。基本上，如果你有一个类`Foo`并想用智能指针包装它`Bar`，你可以这样做：

```
%ignore Foo;
class Foo {
    ...
};

class Bar {
public:
    Foo *operator->();
    ...
} 
```

现在，当您尝试访问 的实例的成员时`Bar`，它将在内部使用 Foo，但这将是完全透明的。

# sql - 使用 Group By 时计算 Access 2007 中位数的最佳方法

> ID：640286
> 
> 赞同：4
> 
> 时间：2009-03-12T20:14:01.613
> 
> 标签：sql, ms-access, ms-access-2007, median

我有一张表，其中包含一本书，然后是关于这本书的多个价格（这是一个高度简化的示例）：

```
身份证件价格
1 本书 1 10
2 书 1 15
3 书 1 12
4 书 2 8
5 书 2 2

```

我很容易计算平均值，但必须有一个很好的方法来计算中位数？

当前 SQL：

```
SELECT DISTINCTROW Books.BOOK, Avg(Books.PRICE) AS [Avg Of PRICE]
FROM Books
GROUP BY Books.BOOK; 
```

结果：

```
图书平均价格
书 1 12.3333333333333
书 2 5

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T20:28:21.487

Jet SQL 中没有 Median，除非它是为 2007 年添加的，但这里有一个关于如何获得的想法。你会需要 ...

一些 SQL ...

```
SELECT Statistics.Month, Sum(([SentTo])) AS [Sum Sent], fMedian("Statistics","Month",[Month],"SentTo") AS [Median Sent]
FROM Statistics
GROUP BY Statistics.Month; 
```

和一个用户定义函数（UDF）。

```
Function fMedian(SQLOrTable, GroupFieldName, GroupFieldValue, MedianFieldName)
Dim rs As DAO.Recordset

Set db = CurrentDb
Set rs1 = db.OpenRecordset(SQLOrTable, dbOpenDynaset)

If IsDate(GroupFieldValue) Then
    GroupFieldValue = "#" & GroupFieldValue & "#"
ElseIf Not IsNumeric(GroupFieldValue) Then
    GroupFieldValue = "'" & Replace(GroupFieldValue, "'", "''") & "'"
End If

rs1.Filter = GroupFieldName & "=" & GroupFieldValue
rs1.Sort = MedianFieldName

Set rs = rs1.OpenRecordset()
rs.Move (rs.RecordCount / 2)

If rs.RecordCount Mod 2 = 0 Then
    varMedian1 = rs.Fields(MedianFieldName)
    rs.MoveNext
    fMedian = (varMedian1 + rs.Fields(MedianFieldName)) / 2
Else
    fMedian = rs.Fields(MedianFieldName)
End If

End Function 
```

来自：[LessThanDot Wiki](http://wiki.lessthandot.com/index.php/Aggregate_Median_(UDF))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-04T01:11:40.773

可以在 MS Access 中仅使用常规查询而不使用 VBA 来计算中值。中位数是第 50 个百分位数。因此，正常创建选择查询；然后进入 SQL 视图并在选择关键字后包含“Top 50 Percent”。对底部 50% 进行升序排序；降序排列前 50%。然后找到最低百分比结果集的最大值和最高百分比结果集的最小值。这两个的平均值是中位数。使用“前 50%”时，请确保查询中的条件特定于从中计算中位数的结果集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T17:38:23.787

我尝试使用非 VBA 方法，但它们都有一定的局限性，无法为更大的数据集提供最准确的结果。对于 Top 50 Percent Asc (Max) 和 Top 50 Percent Desc (Min) 方法，Access 有一个限制，并且在按升序排序时会忽略单个值。对于四舍五入，Access 使用银行家四舍五入，因此它并不总是根据值本身进行四舍五入，如果要向上或向下舍入，则需要添加 +-0.00001 的尾随值。我还尝试了另一种没有 VBA 的 Rank() 方法，并且 Access 在对具有至少一对相同值的值进行排名时遇到了问题。由于上述原因，我强烈建议坚持在 VBA 中创建自定义函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-12T20:22:36.023

没有内置函数 - 因此您必须使用代码循环记录并自己计算中位数。

使用[google](http://www.google.com/search?q=ms+access+median) - 那里有很多代码示例

# sql - 查询和 WCF 服务的最佳实践

> ID：640289
> 
> 赞同：3
> 
> 时间：2009-03-12T20:15:58.037
> 
> 标签：sql, wcf

以下场景的最佳做法是什么：

有一个网格将被填充，并且必须根据每一行进行更改。例如，有一个充满产品的网格，然后根据每个产品动态填充其中一个列。是从服务返回所有 productdetail 表并在客户端查询它还是在服务上有一个只返回所需数据的方法更好？后者意味着如果网格上有 n 个产品，则对该服务方法的请求将有 n 个。

我的困境是，对于某些用户而言，该表相对较小，将其发送到客户端可能没什么大不了的，但其他用户确实有相当多的行要返回（超过 15k）。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T20:18:56.173

您可以让您的服务实现某种分页，并允许客户端请求他们想要的记录数（通常是起始索引和计数，或类似的东西）。您可以将页面大小限制在某个限制范围内，这样您最终就不必服务于巨大的请求。

使用类似的方法，您应该能够在调用次数与每个请求中提供的数据大小之间找到一个很好的平衡点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-28T05:40:07.707

The topic you have stumbled upon is warmly debated topic of [granularity](http://en.wikipedia.org/wiki/Granularity) on [service-oriented architecture](http://en.wikipedia.org/wiki/Service-oriented_architecture#Principles). SOA is like a [mystic mammal being discussed by blind men](http://en.wikipedia.org/wiki/Blind_Men_and_an_Elephant), but that's not really the point.

The ["best practice"](https://stackoverflow.com/questions/199820/best-practices-vs-subjective/199849#199849) of the trend is coarse-grained services, a departure from object-oriented. Consider your services to be exchanges of documents, in which you put in everything you need to get things done.

As Andy White has suggested, if the data gets too big you'd need some sort of filtering or paging.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:25:12.007

听起来网络延迟是这里的问题。如果您有 100 种产品和（例如）0.2 秒的往返时间，那么加载所有数据需要 20 秒。尽可能减少您的服务调用，并在必要时将数据重新映射到客户端中更合适的结构。

编辑：如果可能的话，另一个想法是压缩客户端和服务之间的数据。看看[这个论坛帖子](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/5c67b0da-9e50-4ee1-b7ac-a4733c580980/)。如果您正在推动大量 XML，您将看到巨大的收益。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:23:02.460

我建议在服务器上创建某种 ViewModel 来为客户端定制数据。这类似于您的第二个选项；但是，它不是逐行完成的。这是服务器端的批处理操作，用于准备列，因此视图不需要任何特殊逻辑。

我觉得在客户端操作数据可能会很棘手，因为有很多变量——浏览器、操作系统、计算能力。你控制服务器，所以尽可能地利用你控制的东西。

祝你好运。

# grails - Grails 中的 Config.groovy：environments.production.grails.serverURL

> ID：640296
> 
> 赞同：4
> 
> 时间：2009-03-12T20:17:31.713
> 
> 标签：grails

谁能给出一个具体示例，说明何时使用 Config.groovy 中的以下设置？

```
// set per-environment serverURL stem for creating absolute links
environments {
    production {
        grails.serverURL = "http://www.changeme.com"
    }
    ...
} 
```

我正在寻找的是一个用例，不更改上述设置将失败。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-13T06:24:00.150

它被一些内置标签库使用。例如，[createLink](http://grails.org/doc/1.0.x/ref/Tags/createLink.html)标签有一个可以设置的绝对属性：

> absolute（可选）- 如果设置为“true”，则链接目标地址将使用 Config 中的 grails.serverURL 属性值作为前缀，或者 [http://localhost](http://localhost)：如果 Config 中没有值且未在生产中运行。

相同的属性用于[链接](http://grails.org/doc/1.0.x/ref/Tags/link.html)和[createLinkTo](http://grails.org/doc/1.0.x/ref/Tags/createLinkTo.html)标记，可能还有更多。

因此，如果您不更改示例中的 serverURL，则使用指定 absolute=true 的内置标签创建的任何链接都可能会失败。例如，以下将解析为[http://www.changeme.com/](http://www.changeme.com/) {context}/book

```
<g:link controller="book" absolute="true">Book Home</g:link> 
```

# xcode - Xcode 在启动时崩溃

> ID：640299
> 
> 赞同：1
> 
> 时间：2009-03-12T20:18:48.450
> 
> 标签：xcode, macos

当我启动 Xcode 时，我收到以下错误：

应用程序 Xcode 出乎意料。单击该`Report...`按钮会显示以下内容：

```
Process:         Xcode [875]
Path:            /Developer/Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.Xcode
Version:         ??? (???)
Build Info:      DevToolsIDE-9210000~1
Code Type:       X86 (Native)
Parent Process:  launchd [140]

Date/Time:       2009-03-12 15:13:14.839 -0500
OS Version:      Mac OS X 10.5.6 (9G55)
Report Version:  6

Exception Type:  EXC_BAD_INSTRUCTION (SIGILL)
Exception Codes: 0x0000000000000001, 0x0000000000000000
Crashed Thread:  0

Application Specific Information:
objc[875]: '/System/Library/PrivateFrameworks/DebugSymbols.framework/Versions/A/DebugSymbols' was not compiled with -fobjc-gc or -fobjc-gc-only, but the application requires GC
objc[875]: *** GC capability of application and some libraries did not match
... 
```

完整的细节可以在[这里](http://pastie.org/414549)看到。我以前从未使用过 Xcode（尽管我在第一次安装它时确实运行过它）。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T20:22:03.857

如果你刚刚安装了 safari 4，要么恢复到 3，要么安装最新版本的 Xcode。希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T20:20:52.487

下载并安装最新版本的 Xcode。这就是我为解决这个问题所做的。

# asp.net - 服务器端视图状态能否解决 ASP.NET 的最大问题之一？

> ID：640300
> 
> 赞同：2
> 
> 时间：2009-03-12T20:18:51.243
> 
> 标签：asp.net, viewstate

我已经阅读了一些关于 ASP.NET MVC 是否值得从“常规”ASP.NET 迁移的 SO 文章。我看到引用的使用 MVC 的最大原因之一是不必使用 Viewstates。

但是，可以通过在服务器上存储视图状态信息来消除视图状态，如[本文](http://www.codeguru.com/columns/vb/article.php/c13931)所示。我已经在一个示例项目中尝试过它，它工作得很好，就我注意到它而言是完全透明的，并且很容易实现。

那么，问题在哪里？我希望它确实会给服务器带来稍高的负载，但它真的会那么糟糕吗？如果没有，为什么没有更多的人使用这种方法而不是抱怨视图状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T20:29:17.177

viewstate 的唯一问题是滥用它。这很容易发生，因为默认设置是全部打开。您甚至不能在页面上默认将其全部关闭，并有选择地打开特定控件（他们将在 4.0 上添加对此的支持）。你会看到一些带有 viewstate=false 的代码，并且使用信息列表可以快速变大。

甚至还有一些第三方控件严重滥用它。我不得不帮助找出为什么页面非常慢（因为它甚至无法正常工作），结果下载的信息量很大，原因是视图状态是内容大小的 10 倍以上（真的）并且它是一个第三方控件，喜欢存储你交给它的所有东西（它变得非常丑陋，因为它被交给了一个对象层次结构）。

所以真正的问题不是视图状态，而是它的大小。如果您已经遇到大视图状态的问题（正常大，而不是上述极端情况），那么将其移动到服务器上的会话意味着您将存储大量信息。这将问题从一个地方转移到另一个地方，也许减轻了它的一些影响，但它并没有解决真正的问题，存储了太多不需要的状态（因为要么是开发人员做了，要么是一些第三方的东西行为不端）。

也就是说，我认为我不会将其称为常规 asp.net 方法的单一主要问题。不要把它当成“不要用它来开发”，而更像是“如果你会在它上面开发，就去真正了解它”。我经常使用常规的 asp.net，它可以工作并且非常好。如果我从这个时候开始，我想我会选择 asp.net mvc，因为我认为常规的 asp.net 需要开发人员提供更多的东西才能让它正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-15T21:58:33.843

我倾向于不同意迁移到 ASP.NET MVC 就是移除视图状态的说法。在决定是否迁移到 ASP.NET MVC 时，是否使用 ViewState 是一个次要问题。更重要的是您在模型（定义问题区域的类型）和控制器（描述用户如何与您的站点交互的代码）和视图（生成 HTML 或您喜欢的任何其他标记的呈现逻辑）之间获得的分离.

关于将视图状态放入您的服务器，这很可能成为可伸缩性瓶颈 - 如果您有一个多 Web 服务器站点，那么您需要能够从所有这些服务器访问该视图状态。然后您需要担心清除该视图状态 - 当它嵌入到页面中时，没有什么需要考虑的，但是如果它存储在服务器上，那么页面的视图状态应该保留多长时间？

基本上，viewstate 存在的原因是为了支持 Web 开发的“Web 表单”方法，其中页面回发到服务器以更新自身。我认为大多数人想要避免的是这种 Web 开发方法，而不是 viewstate 本身。无状态标记，加上需要的 AJAX 更新，使得应用程序更加简洁，并且可以更轻松地应用输出缓存等内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:21:11.300

你的项目越大和/或你可能使用它的人越多，对你的表现的微小影响就会变得相当大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T20:33:22.067

老实说，大多数时候你可以直接修剪视图状态——包括我在内的很多开发人员，不要遍历所有不需要它的控件并禁用它——我倾向于发现我只需要像数据网格这样的东西的视图状态，大多数其他控件往往工作正常，但正如我所说，我不经常这样做。

# c# - 达到预期异常测试结束后

> ID：640302
> 
> 赞同：5
> 
> 时间：2009-03-12T20:19:07.560
> 
> 标签：c#, unit-testing, exception

我正在测试由其他几个存储库类继承的抽象基础存储库类的删除方法。MyTestRepository 继承了基础，因此我可以针对基础的方法运行测试，而无需将测试限制为使用具体类。当我运行我的单元测试时，它通过了，但后来我注意到我在测试数据库中有几个 OrderDetail 和 Schedule 对象，这些对象是由测试生成的（对象在测试初始化​​期间创建）并且没有被删除，而 Order 对象被删除。我添加了一些断点，并注意到一旦辅助方法结束并且抛出了预期的异常，测试就会结束，并且对辅助方法的其他调用永远不会发生。

这是我第一次尝试单元测试。我的方法错了吗？ExpectedException 是否按预期工作并且我正在滥用它，还是我应该使用其他工具？我能想到的进行测试的唯一方法是在帮助程序中放置一个 try catch 块，并在我捕获我的 DataAccessException 时断言 true。

```
 [TestMethod]
    [ExpectedException(typeof(DataAccessException))]
    public void NHibernateRepositoryBaseDelete()
    {
        NHibernateRepositoryBaseDeleteHelper<Order, int>(myOrder, myOrder.OrderId);
        NHibernateRepositoryBaseDeleteHelper<OrderDetail, int>(myOrderDetail, myOrderDetail.OrderDetailId);
        NHibernateRepositoryBaseDeleteHelper<Schedule, int>(mySchedule, mySchedule.ScheduleId);
    }

    private static void NHibernateRepositoryBaseDeleteHelper<T, TKey>(T myItem, TKey myItemId)
    {
        MyTestRepository<T, TKey> myRepository = new MyTestRepository<T, TKey>();
        myRepository.Delete(myItem);
        myRepository.CommitChanges();

        myRepository.GetById(myItemId, false);
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-12T20:28:51.220

我通常不使用`ExpectedException`，除非我可以在单个语句中引发异常 - 或者如果其他测试确保前面的语句不会引发异常。

在这里，您基本上进行了三个测试 - 您正在测试*每个*删除调用都会引发异常。所做`ExpectedException`的只是运行该方法并检查它是否抛出了您要求它的异常 - 它不会尝试从抛出异常的地方继续，期望它再次被抛出。

如果要检查特定代码段（而不仅仅是整个方法）是否引发了异常，请使用：

```
try
{
    OperationThatShouldFail();
    Assert.Fail("Expected exception");
}
catch (DataAccessException)
{
    // Expected (no need for an assertion though)
} 
```

（不要再有了`ExpectedException`- 你不再期望测试方法抛出。）

对于三项检查中的*每*一项，您都将拥有这些块中的一个。或者（可能更好）只有三个测试，每个测试都使用`ExpectedException`但只有一行长。作为另一种选择，您可以将其`try/catch`放入您的辅助方法中。

您可能还希望在测试结束时断言相关表为空 - 但这取决于您的情况。

编辑：至于你什么时候清理数据库——我通常喜欢在每次测试*开始*时清理它，这样如果我只运行一个失败的测试，我就可以在之后看到数据库的状态。如果我要在拆卸方法中清理它，我会丢失有价值的信息（或被迫留在调试器中）。

编辑：另一种选择`ExpectedException`（我怀疑现在在许多测试框架中）是有一个像这样的通用方法：

```
static void ExpectException<T>(Action action) 
    where T : Exception
{
    try
    {
        action();
        Assert.Fail("Expected exception " + typeof(T));
    }
    catch (T)
    {
        // Expected
    }
} 
```

然后，假设您使用的是 C# 3，您可以使用 lambda 表达式在方法内轻松（多次）调用它。例如：

```
// Method name shortened for simplicity, and I'm assuming that type inference
// will work too.
public void NHibernateRepositoryBaseDelete()
{
    ExpectException<DataAccessException>(() => 
        DeleteHelper(myOrder, myOrder.OrderId));
    ExpectException<DataAccessException>(() => 
       DeleteHelper(myOrderDetail, myOrderDetail.OrderDetailId));
    ExpectException<DataAccessException>(() => 
       DeleteHelper(mySchedule, mySchedule.ScheduleId));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-12T20:29:16.133

将您的单元测试代码包装在 try/finally 块中，并在 finally 部分中清理您的数据库。

```
[TestMethod]    
[ExpectedException(typeof(DataAccessException))]    
public void NHibernateRepositoryBaseDelete()    
{
    try
    {
        NHibernateRepositoryBaseDeleteHelper<Order, int>(myOrder, myOrder.OrderId);
        NHibernateRepositoryBaseDeleteHelper<OrderDetail, int>(myOrderDetail, myOrderDetail.OrderDetailId);
        NHibernateRepositoryBaseDeleteHelper<Schedule, int>(mySchedule, mySchedule.ScheduleId);
    }
    finally
    {
        // clean up database here
    }   
} 
```

# javascript - 从 javascript 更改 html 文档的光标类型

> ID：640303
> 
> 赞同：5
> 
> 时间：2009-03-12T20:19:29.090
> 
> 标签：javascript, html, mouse-cursor

假设我有一个 JavaScript 方法，它需要很长时间才能完成，完全没有任何用户反馈。在我的例子中，它正在对表格元素中的行进行排序（全部在 DOM 中；如果有*很多*行，则只需要很长时间），但它可能会做任何事情。我想在运行时显示“进度”光标。这是我目前所拥有的，但我也尝试了其他几件事：

```
// SORT   
document.body.style.cursor = "progress";
MyLongRunningMethod(); //blocks for 10-15 seconds before returning
document.body.style.cursor = "auto"; 
```

不幸的是，什么也没有发生。MyLongRunningMethod() 正确，但光标永远不会改变。我的想法是浏览器需要等待方法返回才能处理由窗口环境生成的光标更改消息，但这可能是一种方式，即使它是真的我也不知道如何修复它。

还有其他想法吗？

* * *

[编辑]：我认为我所写的所有背景故事都不是真的必要。如果您真的想阅读它，请检查修订历史。

* * *

**最终结果**

我最终使用了 RoBorg 的解决方案。它并没有像我最初想的那样搞乱代码，因为我可以将函数声明在那里——就像添加一个内联作用域块一样。

有趣的是，在 Firefox 上我发现这意味着我根本不需要更改光标。我发现在添加 setTimeout 调用后，有时会在设置进度光标之前看到等待光标，所以我注释掉了我的光标代码。事实证明，使用 setTimeout 将其推出 click 事件处理程序本身的某些东西允许 FireFox 自行确定光标应该更改。不幸的是，IE 并不那么聪明，所以我确实把光标代码放回去了。

这使我相信光标更改是此处的适当操作 - 如果有机会，它就是浏览器无论如何都会做的事情。对于我知之甚少的页面，我真的不想在 DOM 中添加和删除新项目（例如某种类型的忙碌图像）。无论页面使用何种视觉设计，脚本都应该匹配。

最后，Chrome 让整个事情变得无关紧要。使用相同的数据，Chrome 在不到 5 秒的时间内完成了 IE 和 Firefox 10 到 15 秒的工作。所以他们的javascript引擎真的更快。我等不及 Firefox 3.1 引擎了。不幸的是，这里的人们仍然主要使用 IE6。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-12T20:23:34.647

使用计时器是不可能的吗？

```
document.body.style.cursor = "progress";

setTimeout(function()
{
    SortTable(cell.cellIndex, dir, sortType);
    document.body.style.cursor = "auto";
}, 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T20:49:32.340

在 web 中，更改鼠标光标不是传统的，也不是很好。

在页面本身上使用一些小动画会更好（也更容易），请查看[http://www.ajaxload.info/](http://www.ajaxload.info/)以获取此类图像（它是在线生成器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:43:19.827

尝试删除 document.body.style.cursor = "auto" 并将其放入 SortTable 函数完成时调用的函数中。这样，您将保留忙碌光标，直到功能完成。确保如果您在 SortTable() 中遇到错误条件，您仍然会点击“不再忙”函数调用。

# c# - 如何限制长时间运行的命令行 EXE 以避免与 CPU 挂钩？

> ID：640307
> 
> 赞同：4
> 
> 时间：2009-03-12T20:20:51.753
> 
> 标签：c#

我有一个用 C# 编写的命令行 EXE。它是一个日志解析器，每晚都会分析数 GB 的日志文件。

它在很长一段时间内将处理器固定在 100%。不理想。

我怎么能“限制”应用程序？它可能需要尽可能长的时间，但我宁愿让它使用更少的总 CPU。

是否有一些编码方法或理论可以使 EXE 变慢并减少 CPU 占用？我不能在它运行的环境中做任何事情（比如更改进程优先级），所以任何更改都必须在应用程序本身的代码中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-12T20:25:16.907

试试这个：

```
using System.Diagnostics;

Process myProc = Process.GetCurrentProcess();
myProc.PriorityClass = ProcessPriorityClass.BelowNormal; 
```

如果这还不够低，还有一个`ProcessPriorityClass.Idle`

[MSDN 链接 1](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.priorityclass.aspx)
[MSDN 链接 2](http://msdn.microsoft.com/en-us/library/system.diagnostics.processpriorityclass.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-12T20:23:45.833

您可以使用该[`Thread.Priority`](http://msdn.microsoft.com/en-us/library/system.threading.thread.priority.aspx)属性设置线程的优先级。

当然，如果没有其他尝试运行仍然会使用 100% CPU - 但我想在这种情况下你不会那么介意。

您的应用程序是否创建任何其他线程或使用线程池？如果是这样，您可能希望确保这些线程也具有降低的优先级。

编辑：设置流程的总体优先级通常可能是一个更好的解决方案，但我将把这个作为替代方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-12T20:26:21.660

您还可以在与处理器挂钩的主循环中引入慢速睡眠。

例如，这通常通过游戏循环来完成——`Thread.CurrentThread.Sleep(1);`每帧调用一次将使大多数游戏从使用 100% cpu 变为使用 1-2% cpu，并且仍然允许合理的访问。

- - - 编辑 - - -

与降低进程或线程的优先级相比，休眠具有潜在的优势。主要的两个是：

*   睡眠让您可以更好地控制放弃多少处理器时间。如果您降低优先级，并且有其他 CPU 消耗较大的进程，您可能会放弃比您想要的更多的处理器时间。[这也是我没有执行 Sleep(0) 的原因——因为它不会总是放弃处理器时间，尽管它确实放弃了一些时间。我已经在具有更长睡眠时间的嵌入式系统中做到了这一点，以强制减少处理器的使用。]
*   如果您的目标是降低您的总 CPU 使用率，那么在没有其他任何运行的情况下降低您的进程优先级将无济于事。你仍然会吃掉 100% 的 CPU。如果您尝试降低功耗（节省能源成本）或尝试降低热量产生，这可能很有用，具体取决于您的系统架构。

----- 来自原创 -----

对于其他样式 (UI) 应用程序，另一种选择是将您的例程重构为异步的，将您的处理分成多个部分，并通过订阅 Application.OnApplicationIdle 之类的东西在调用中分块处理它。这可以让您的 UI 保持一定程度的响应，因为它会突然运行。

如果这是一个数学例程，并且它正在执行大量计算，那么降低线程优先级并允许它使用最多可用的 CPU 可能会更好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-12T20:41:33.263

既然你说你不能改变进程优先级，你唯一的选择是插入人为的延迟，正如前面的回答所指出的那样。如果您在记录循环中插入 Thread.Sleep(1)，那么您最多每秒将处理 1,000 条记录。如果你想要更精细的东西，那么你必须每 N 条记录插入一个睡眠。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-12T20:25:39.323

尝试

```
Process thisProc = Process.GetCurrentProcess();
thisProc.PriorityClass = ProcessPriorityClass.BelowNormal;//Or ProcessPriorityClass.Idle 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T20:26:09.417

如果程序花费大量时间处理文件数据，那么您应该考虑[异步 IO](http://www.java2s.com/Code/CSharp/File-Stream/illustratesasynchronousIO.htm)。您还可以将程序拆分为多个部分/多个线程，这些部分被安排在它们之间暂停

# javascript - 如何确定 HTML 元素是否在框架内？

> ID：640309
> 
> 赞同：2
> 
> 时间：2009-03-12T20:20:56.353
> 
> 标签：javascript, html

我想在 JavaScript 中做到这一点。为了澄清，我的意思是一页。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-12T20:23:21.700

试试这个：

```
top != self 
```

`top`指顶部窗口和`self`自己的窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T20:27:12.050

您是指表单元素还是页面？

如果是形式，我以前从未考虑过在单独的框架内有一个元素，但我认为这在你的思维方式中是不可能的。

元素必须在表单内，表单必须在页面内。

您可以在一个页面内或另一个页面的框架内有一个元素或一个表单，但是这两个页面仍将是单独的页面，并且表单将是单独的表单。

您不能拥有跨越多个页面的单个表单。

但是，您可以拥有多个表单作为跨页面的单个进程，或者您可以使用 AJAX 包含页面外部的内容（包括表单元素），但一旦包含它们就会成为页面的一部分。

也许这些选项之一是您需要的？

我想你也可以在另一个页面上拥有一个元素，在一个框架中，然后你可以通过 JavaScript 访问它，但该元素仍将在一个单独的表单中，在一个单独的页面中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:48:51.623

element.ownerDocument.parentWindow.frameElement!=null

但是，这仅在您在同一个域中时才有效，尝试为另一个域抓取框架会给您一个跨站点脚本访问错误

# python - 如何使用 mod_python 上传文件？

> ID：640310
> 
> 赞同：3
> 
> 时间：2009-03-12T20:21:02.877
> 
> 标签：python, upload, mod-python

我想创建一个简单的文件上传表单，我必须完全无能为力。我已阅读文档和教程，但由于某种原因，我没有收到提交的表单数据。我写了我能测试的最少量的代码，但它仍然无法正常工作。有什么想法有什么问题吗？

```
def index():
    html = '''
    <html>
      <body>
      <form id="fileUpload" action="./result" method="post">
        <input type="file" id="file"/>
        <input type="submit" value="Upload"/>
      </form>
      </body>
    </html>
    '''
    return html

def result(req):
    try: tmpfile = req.form['file']
    except:
        return "no file!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T21:54:06.333

尝试将 enctype="multipart/form-data" 放入您的表单标签中。您的错误与 mod_python 无关。

# unix - 共享库术语

> ID：640312
> 
> 赞同：1
> 
> 时间：2009-03-12T20:21:30.533
> 
> 标签：unix, shared-libraries, terminology

“共享库文本”和“共享库数据”有什么区别？另外，共享库数据“预重定位”是什么意思？这个问题涉及到一些涉及共享库的特定于 AIX 的特性。

*   [http://publib.boulder.ibm.com/infocenter/systems/topic/com.ibm.aix.genprogc/doc/genprogc/lrg_prg_support.htm](http://publib.boulder.ibm.com/infocenter/systems/topic/com.ibm.aix.genprogc/doc/genprogc/lrg_prg_support.htm)

*   [http://publib.boulder.ibm.com/infocenter/systems/index.jsp?topic=/com.ibm.aix.genprogc/doc/genprogc/named_shared_lib.htm](http://publib.boulder.ibm.com/infocenter/systems/index.jsp?topic=/com.ibm.aix.genprogc/doc/genprogc/named_shared_lib.htm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T20:35:33.480

啊，这是一个棘手的问题。

好的，所以要回答这个问题，你必须知道一个可执行文件有两个*段：一个“文本”部分和一个“数据”部分。

“数据”段包含“不会被执行的东西”。例如，程序中的字符串（例如，字符串“Command not found”将在`/bin/sh`二进制文件的数据段中）。

“文本”段包含“将被执行的东西”——机器指令。

而且，“预搬迁”......这里有一个很好的解释为什么需要搬迁：http: [//people.redhat.com/drepper/textrelocs.html](http://people.redhat.com/drepper/textrelocs.html)以及这里涉及的内容：[http://en .wikipedia.org/wiki/Relocation_(computer_science)](http://en.wikipedia.org/wiki/Relocation_(computer_science))。

这有帮助吗？

*: nitpicker 注意：它有两个以上，但现在这并不重要

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T20:36:27.503

内存分为 4 段 - 代码、数据、堆栈和堆。

“共享库文本”是共享库的代码部分——实现库中功能的实际指令。

“共享库数据”是共享库的数据部分——全局变量、常量、静态内容等，在加载库时立即分配。

至于“预搬迁”图书馆，这是概念。当一个共享库被加载时，它被映射到一个共享地址空间。一个“预重定位”库是用一个“提示”构建的，它告诉操作系统应该在共享地址空间的哪个位置加载它。由于我无法理解的原因，这应该可以提高性能。

# .net - 如何使用 Visual Studio GUI 设置 ASP.NET 项目*不带*？

> ID：640316
> 
> 赞同：3
> 
> 时间：2009-03-12T20:22:40.733
> 
> 标签：.net, asp.net, emacs, mono

我在 Windows 上使用 Emacs 和 Mono，以便在使用 GNU/Linux 时可以保留相同的开发环境。

所以我需要知道一个 ASP.NET 项目的目录结构以及哪些文件对其操作至关重要（配置文件等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T20:26:25.670

您将需要根目录中的 web.config 以及所有 aspx 文件。您真正需要的唯一另一件事是`bin`根目录下的目录来保存您的程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T20:40:15.670

正如已经提到的那样，您只需要 Bin 文件夹和 web.config 。

但是，如果您不使用 Web 项目（已编译的站点），那么您将需要 App_Code 文件夹来放置您的代码文件，以便站点知道在运行时要编译什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T20:30:41.683

我会从 IDE 中创建一个模板项目，然后在每次创建新项目时使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T20:26:35.093

使用[MonoDevelop](http://monodevelop.com/)。

# macos - 从 Spotlight 启动 PackageMaker

> ID：640326
> 
> 赞同：0
> 
> 时间：2009-03-12T20:24:29.730
> 
> 标签：macos, spotlight

为什么 Spotlight 不允许我启动 PackageMaker，尽管它允许我启动位于同一文件夹中的 Xcode 和 Dashcode？修复/修改此行为的任何好的指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-24T08:50:18.643

在 Snow Leopard 中，10.6.1 可以。也许苹果修复了它。

# flash - CD 上的 SWF 链接

> ID：640332
> 
> 赞同：1
> 
> 时间：2009-03-12T20:25:20.540
> 
> 标签：flash

我有一个基于 swf 的网站。在主 swf 中，我有指向其他 swf 文件的链接。如果我希望它从 cd 运行，如何链接到各种 CD 驱动器根目录中的文件。在 URL 上插入我的链接将必须指向 CD 的根目录。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T20:54:50.203

您需要[指定不同的基本 URL](http://www.yswfblog.com/blog/2008/08/11/all-your-base-are-belong-to-us/)。

# .net-2.0 - ToolStripManager 不工作

> ID：640344
> 
> 赞同：2
> 
> 时间：2009-03-12T20:27:03.907
> 
> 标签：.net-2.0

ToolStripManager 彻底坏了。LoadSettings 没有做任何事情......而且我显然不是唯一一个遇到这个问题的人：

[http://social.msdn.microsoft.com/forums/en-US/winforms/thread/656f5332-610d-42c3-ae2d-0ffb84a74b34/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/656f5332-610d-42c3-ae2d-0ffb84a74b34/)

[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=128042](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=128042)

所以......有人有解决方法吗？在该线程中发布的只是将所有工具栏移动到窗口底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T21:34:00.860

这是我的解决方案：

声明这个结构来存储工具栏的设置：

```
[Serializable]
public struct ToolStripSettings
{
    public bool Visible;
    public Point Location;
} 
```

要保存的代码

```
// save toolbar settings
List<ToolStripSettings> toolSettings = new List<ToolStripSettings>();
// mToolbars is initialized in the constructor to contain all of your toolbar members
// you could also probably populate it with reflection
foreach (ToolStrip ts in mToolbars)
{
    ToolStripSettings tss = new ToolStripSettings();
    tss.Visible = ts.Visible;
    tss.Location = ts.Location;
    toolSettings.Add(tss);
}
// serialize the toolSettings list wherever you keep the 
// rest of your user-specific settings 
```

恢复代码

```
// Load toolstrip settings, if any
if (/*deserialized storage location*/ != null)
{
    for (int i = 0; i < mToolbars.Length; i++)
    {
        mToolbars[i].Visible = /*deserialized storage location*/[i].Visible;
        mToolbars[i].Location = /*deserialized storage location*/[i].Location;
    }
} 
```

# web-services - 如何找到给定半径内最近的城市？

> ID：640347
> 
> 赞同：9
> 
> 时间：2009-03-12T20:28:04.823
> 
> 标签：web-services, geography

您是否知道一些实用程序或网站，我可以在其中提供美国城市、州和径向距离（以英里为单位）作为输入，它会返回该半径内的所有城市？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-12T20:52:02.787

这是我的做法。

您可以获得城市、st、邮政编码及其纬度和经度的列表。（我不记得我们从哪里得到的）

编辑： http: [//geonames.usgs.gov/domestic/download_data.htm](http://geonames.usgs.gov/domestic/download_data.htm) 就像上面提到的人可能会工作。

然后你可以编写一个方法来计算基于半径的最小和最大纬度和经度，并查询这些最小和最大之间的所有城市。然后循环并计算距离并删除任何不在半径内的

```
double latitude1 = Double.parseDouble(zipCodes.getLatitude().toString());
double longitude1 = Double.parseDouble(zipCodes.getLongitude().toString());

//Upper reaches of possible boundaries
double upperLatBound = latitude1 + Double.parseDouble(distance)/40.0;
double lowerLatBound = latitude1 - Double.parseDouble(distance)/40.0;

double upperLongBound = longitude1 + Double.parseDouble(distance)/40.0;
double lowerLongBound = longitude1 - Double.parseDouble(distance)/40.0;

//pull back possible matches
SimpleCriteria zipCriteria = new SimpleCriteria();
zipCriteria.isBetween(ZipCodesPeer.LONGITUDE, lowerLongBound, upperLongBound);
zipCriteria.isBetween(ZipCodesPeer.LATITUDE, lowerLatBound, upperLatBound);
List zipList = ZipCodesPeer.doSelect(zipCriteria);
ArrayList acceptList = new ArrayList();

if(zipList != null)
{
    for(int i = 0; i < zipList.size(); i++)
    {
        ZipCodes tempZip = (ZipCodes)zipList.get(i);
        double tempLat = new Double(tempZip.getLatitude().toString()).doubleValue();
        double tempLon = new Double(tempZip.getLongitude().toString()).doubleValue();
        double d = 3963.0 * Math.acos(Math.sin(latitude1 * Math.PI/180) * Math.sin(tempLat * Math.PI/180) + Math.cos(latitude1 * Math.PI/180) * Math.cos(tempLat * Math.PI/180) *  Math.cos(tempLon*Math.PI/180 -longitude1 * Math.PI/180));

        if(d < Double.parseDouble(distance))
        {
            acceptList.add(((ZipCodes)zipList.get(i)).getZipCd());  
        }
    }
} 
```

我的代码有一段摘录，希望你能看到发生了什么。我从一个 ZipCodes（我的数据库中的一个表）开始，然后我拉回可能的匹配项，最后我清除了那些不在半径范围内的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T20:40:44.577

Oracle、PostGIS、带有 GIS 扩展的 mysql、带有 GIS 扩展的 sqlite 都支持这种查询。

如果您没有数据集，请查看：

[http://www.geonames.org/](http://www.geonames.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T20:37:12.680

看看在 xmethods.net 上宣传的这个网络服务。它需要订阅才能实际使用，但声称可以满足您的需求。

有问题的广告方法描述：

> GetPlacesWithin 返回距给定地点指定距离内的地理位置列表。参数：place - 地点名称（最多 65 个字符），state - 2 个字母的州代码（邮政编码不需要），distance - 距离（以英里为单位），placeTypeToFind - 要查找的地点类型：ZipCode 或 City（包括任何村庄、城镇） ， ETC）。

[http://xmethods.net/ve2/ViewListing.po?key=uuid:5428B3DD-C7C6-E1A8-87D6-461729AF02C0](http://xmethods.net/ve2/ViewListing.po?key=uuid:5428B3DD-C7C6-E1A8-87D6-461729AF02C0)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-12T20:37:43.100

[您可以从http://geonames.usgs.gov](http://geonames.usgs.gov)获得一个非常好的地理定位城市/地名数据库 - 找到一个合适的数据库转储，将其导入您的数据库，然后执行您需要的查询非常简单，特别是如果您的DBMS 支持某种空间查询（例如[Oracle Spatial](http://en.wikipedia.org/wiki/Oracle_Spatial)、[MySQL Spatial Extensions](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)、[PostGIS](http://postgis.refractions.net/)或[SQLServer 2008](http://www.microsoft.com/sqlserver/2008/en/us/spatial-data.aspx)）

另请参阅：**[如何进行基于位置的搜索](https://stackoverflow.com/questions/615403/how-to-do-location-based-search)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T20:31:00.853

我没有网站，但我们在 Oracle 中将其作为数据库函数实现，在 SAS 中作为统计宏实现。它只需要一个包含所有城市及其经纬度的数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-01T19:50:24.793

也许这会有所帮助。该项目以公里为单位进行配置。您可以在 CityDAO.java 中修改这些

```
public List<City> findCityInRange(GeoPoint geoPoint, double distance) {
    List<City> cities = new ArrayList<City>();
    QueryBuilder queryBuilder = geoDistanceQuery("geoPoint")
            .point(geoPoint.getLat(), geoPoint.getLon())
            //.distance(distance, DistanceUnit.KILOMETERS) original
            .distance(distance, DistanceUnit.MILES)
            .optimizeBbox("memory")
            .geoDistance(GeoDistance.ARC);

    SearchRequestBuilder builder = esClient.getClient()
            .prepareSearch(INDEX)
            .setTypes("city")
            .setSearchType(SearchType.QUERY_THEN_FETCH)
            .setScroll(new TimeValue(60000))
            .setSize(100).setExplain(true)
            .setPostFilter(queryBuilder)
            .addSort(SortBuilders.geoDistanceSort("geoPoint")
                    .order(SortOrder.ASC)
                    .point(geoPoint.getLat(), geoPoint.getLon())
                    //.unit(DistanceUnit.KILOMETERS)); Original
                    .unit(DistanceUnit.MILES));

    SearchResponse response = builder
            .execute()
            .actionGet();

    SearchHit[] hits = response.getHits().getHits();

    scroll:
    while (true) {

        for (SearchHit hit : hits) {
            Map<String, Object> result = hit.getSource();
            cities.add(mapper.convertValue(result, City.class));
        }

        response = esClient.getClient().prepareSearchScroll(response.getScrollId()).setScroll(new TimeValue(60000)).execute().actionGet();
        if (response.getHits().getHits().length == 0) {
            break scroll;
        }
    }

    return cities;
} 
```

“LocationFinder\src\main\resources\json\cities.json”文件包含比利时的所有城市。如果需要，您也可以删除或创建条目。只要您不更改名称和/或结构，就不需要更改代码。

请务必阅读自述文件[https://github.com/GlennVanSchil/LocationFinder](https://github.com/GlennVanSchil/LocationFinder)

# vim - 如何在 gVim 中进行拼写检查？

> ID：640351
> 
> 赞同：53
> 
> 时间：2009-03-12T20:28:56.430
> 
> 标签：vim, spell-checking

在 gVim 中进行拼写检查的最佳方法是什么？有没有插件之类的？我也希望它提供更正。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2009-03-12T20:31:44.143

用于`:set spell`打开拼写检查。如果它是源代码，gvim 足够聪明，只需要拼写检查注释和字符串文字。

[`:help spell`](http://vimdoc.sourceforge.net/htmldoc/spell.html)会给你所有的细节。以下是一些摘录：

```
要搜索下一个拼写错误的单词：

]s 移动到光标后的下一个拼写错误的单词。
             命令前的计数可用于重复。
             'wrapscan' 适用。

[s 与 "]s" 类似，但向后搜索，找到拼写错误的
             光标前的单词。  

```

```
寻找坏词的建议：

z= 对于光标下/后的单词，正确提示
             拼写的单词。

```

```
要将单词添加到您自己的单词列表中：

zg 将光标下的单词添加为好词

```

另请参阅[`:help set spelllang`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27spelllang%27)有关更改字典以包含其他地区、语言或词集（例如医学术语）的信息。

gvim 必须用|+syntax| 编译。

我没有放入`:set spell`我的 .vimrc，因为当我编码时，我的注释中有太多变量名被标记。如果您要检查某个文件类型，请在 .vimrc 中使用自动命令。或者在需要时手动打开它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T12:05:28.740

```
:setlocal spell spelllang=en_us
:set spell 
```

对于拼写检查和激活鼠标右键：

```
:set mousemodel=popup 
```

当您将光标放在单词上并单击右键时，gvim 会显示不同的正确单词。

你可以把它放在你的`~/.vimrc`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-12T20:37:22.807

做`:set spell`以打开拼写检查。请参阅`:h spell`有关拼写检查如何工作以及如何使用不同语言和字典等的帮助和信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-14T23:21:04.237

我开始使用

> 拼写

[Cygwin ( http://www.cygwin.com/](http://www.cygwin.com/ "http://www.cygwin.com/") )附带。（这是一个包，但默认安装加上手动添加的 aspell 非常小，下载速度很快。）

当我想对当前文件进行拼写检查时，我使用在我的 .vimrc（或 _vimrc）中定义的函数来保存文件，对其运行 aspell，然后重新加载文件：

```
:function! SpellCheck()
:   w!
:   !c:\prog\cygwin\bin\aspell.exe --dont-backup check "%"
:   e! %
:endfunction 
```

要使用这个功能，我只是这样做：

```
:call SpellCheck() 
```

它像 Microsoft Word 一样遍历文件，我退出，然后重新加载文件并进行更正。

无需移动鼠标即可在外部运行 aspell 对我来说已经足够集成。我从不喜欢即时拼写检查。我发现它和 IntelliSense 之类的东西会分散注意力。

# ftp - 从远程服务器上的文件中读取标头数据

> ID：640354
> 
> 赞同：0
> 
> 时间：2009-03-12T20:29:37.550
> 
> 标签：ftp, ssh, header, mount, fuse

我现在正在做一个项目，我需要从远程服务器上的文件中读取标头数据。我说的是很多大文件，所以我无法读取整个文件，而只是我需要的标题数据。

我唯一的解决方案是使用 fuse 安装远程服务器，然后从文件中读取标题，就好像它们在我的本地计算机上一样。我已经尝试过了，它有效。但它有一些缺点。特别是 FTP：

*   真的很慢（FTP 与带有 curlftpfs 的 SSH 相比）。从同一台服务器，使用 SSH 90 文件在 18 秒内被读取。并在 39 秒内使用 FTP 10 个文件。
*   不可靠。有时不会卸载挂载点。
*   如果服务器处于活动状态并且完成了被动安装。该挂载点和父文件夹在大约 3 分钟内被锁定。
*   是否超时，即使有数据传输（猜测这是 FTP 协议而不是 curlftpfs）。

Fuse 是一个解决方案，但我不是很喜欢它，因为我觉得我不能信任它。所以我的问题基本上是这个问题是否有其他解决方案。语言最好是 Ruby，但如果 R​​uby 不支持该解决方案，任何其他语言都可以使用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T20:48:47.647

您在寻找什么类型的信息？

您可以尝试使用 ruby​​ 的 open-uri 模块。以下示例来自[http://www.ruby-doc.org/stdlib/libdoc/open-uri/rdoc/index.html](http://www.ruby-doc.org/stdlib/libdoc/open-uri/rdoc/index.html)

```
require 'open-uri'
open("http://www.ruby-lang.org/en") {|f|
  p f.base_uri         # <URI::HTTP:0x40e6ef2 URL:http://www.ruby-lang.org/en/>
  p f.content_type     # "text/html"
  p f.charset          # "iso-8859-1"
  p f.content_encoding # []
  p f.last_modified    # Thu Dec 05 02:45:02 UTC 2002
} 
```

编辑：看来操作想从远程文件中检索 ID3 标记信息。这更复杂。

来自维基：这似乎是一个难题。

在维基上：

> 文件中的标记位置
> 
> 只有 ID3v2.4 标准才有可能将标签数据放在文件末尾，这与 ID3v1 相同。ID3v2.2 和 2.3 要求标签数据位于文件之前。虽然对于流数据这是绝对需要的，但对于静态数据，这意味着必须更新整个音频文件以在文件的前面插入数据。对于初始标记，这会导致很大的损失，因为必须重写每个文件。鼓励标签编写者在标签数据之后引入填充，以便在不需要重写整个音频文件的情况下编辑标签数据，但这不是标准的，标签要求可能会有很大差异，特别是如果 APIC (相关图片）也被嵌入。

这意味着根据文件的 ID3 标签版本，您可能需要读取文件的不同部分。

这是一篇文章，概述了使用 ruby​​ for ID3tagv1.1 读取 ID3 标签的基础知识，但应该作为一个很好的起点：[http ://rubyquiz.com/quiz136.html](http://rubyquiz.com/quiz136.html)

您还可以考虑使用 ID3 解析库，例如[id3.rb](http://www.unixgods.org/~tilo/ID3/docs/)或[id3lib-ruby](http://id3lib-ruby.rubyforge.org/)；但是，我不确定是否支持解析远程文件的能力（很可能可以通过一些修改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-21T09:11:19.913

已经提出了一个[`RANG`命令](https://tools.ietf.org/id/draft-bryan-ftp-range-01.html#rfc.section.4)，允许只检索文件的一部分（这里是第一个字节）。

但是，我没有找到包含此提案的任何参考，也没有找到实施。

因此，对于特定服务器，测试（或检查 FTP 服务器的文档）可能很有用 - 如果可用，请使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-21T09:14:00.307

“最好的”解决方案是开始传输，并在下载的文件超过字节时停止传输。由于允许中断连接的库不多（如果有的话），因此它更复杂，可能需要您手动编写特定的 ftp 客户端，有两个线程，一个执行 FTP 连接和传输，另一个监视大小下载的文件并杀死第一个线程。

或者，至少，您可以并行化文件传输。这样您就不必等待所有文件被完全传输来分析文件的开头。然后转移将继续

# nhibernate - 使用 NHibernate 的双连接有序树映射

> ID：640360
> 
> 赞同：2
> 
> 时间：2009-03-12T20:31:12.227
> 
> 标签：nhibernate, orm, hbm

我们需要使用 NHibernate 映射简单的类：

```
public class CatalogItem
{
    private IList<CatalogItem> children = new List<CatalogItem>();

    public Guid Id { get; set; }
    public string Name { get; set; }
    public CatalogItem Parent { get; set; }
    public IList<CatalogItem> Children
    {
        get { return children; }
    }        
    public bool IsRoot { get { return Parent == null; } }        
    public bool IsLeaf { get { return Children.Count == 0; } }
} 
```

互联网上有很多关于这个主题的教程，但没有一个包含一些令人讨厌的细节：我们需要将订单保存在儿童收藏中。我们尝试了以下映射，但它导致 NHibernate 抛出奇怪的异常（“非静态方法需要一个目标。”）。

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Domain.Model" assembly="Domain">
    <class name="CatalogItem"  lazy="false">
        <id name="Id" type="guid">
            <generator class="guid" />
        </id>
        <property name="Name" />

        <many-to-one name="Parent" class="CatalogItem" lazy="false" />

        <list name="Children" cascade="all">
            <key property-ref="Parent"/>
            <index column="weight" type="Int32" />
            <one-to-many not-found="exception" class="CatalogItem"/>
        </list>        
    </class>
</hibernate-mapping> 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-17T15:27:29.837

我不是专家，但`<key property-ref=...>`在这种用法中对我来说看起来很奇怪。你应该可以这样做`<key column="ParentID"/>`，NHibernate 将自动使用关联类的主键——在这种情况下是它本身。

您可能还需要将列表设置为`inverse="true"`，因为关系是双向的。[请参阅文档中的第 6.8 节。]

# bash - bash命令将多个文件的内容写入单个文件

> ID：640363
> 
> 赞同：1
> 
> 时间：2009-03-12T20:31:47.937
> 
> 标签：bash, firebug

我想知道将多个 .html 文件（分布在多个文件夹中）合并到一个 html 文件中的最佳方法是什么。如果有人可以创建一个简单的 bash 命令，那就太棒了。（这是一种解决方法，因此我可以使用 firebug 的命令行 API 来有效地搜索整个站点的 html 选择器组合。据我所知，firebug 只能在一个页面上搜索。）

非常感谢这位受阻的前端设计师的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-12T20:35:01.563

```
cat file1.html file2.html file3.html > newfile.html 
```

* * *

编辑这可能更容易

```
find . -name="*.html" | xargs cat >> ../newfile.html 
```

请注意，newfile.html 是从当前目录向上推送的，因此它不会被嵌入到自身中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T20:35:28.473

好吧，如果您不担心生成的文件是否正确，`cat`这似乎是最简单的方法：

```
cat file1.html file2.html file3.html > result.html 
```

但当然，这些文件中的每一个在顶部都有一个`<html>`标签，在底部有一个结束标签，所以它不是一个有效的 HTML 文件。Firefox 可能会加载它，但我不知道它将如何显示它......也许只有第一个？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T20:36:12.637

```
for file in `ls *.html`; do cat "$file" >> output.html; done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-12T20:38:07.967

您总是使用 grep 在一组文件中搜索某些内容，而不是合并所有文件然后搜索该文件。

```
grep <string you are looking for> <folder containing all of files> -r 
```

# cocoa - 如何将 CFStringRef 转换为 NSString？

> ID：640367
> 
> 赞同：174
> 
> 时间：2009-03-12T20:33:29.413
> 
> 标签：cocoa, string, cfstring

```
NSString *aNSString;
CFStringRef aCFString;
aCFString = CFStringCreateWithCString(NULL, [aNSString UTF8String], NSUTF8StringEncoding);
aCFString = CFXMLCreateStringByUnescapingEntities(NULL, aCFString, NULL); 
```

我怎样才能得到一个新`NSString`的`aCFString`？

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2009-03-12T20:37:33.023

NSString 和 CFStringRef 是“免费桥接的”，这意味着您可以简单地在它们之间进行类型转换。

例如：

```
CFStringRef aCFString = (CFStringRef)aNSString; 
```

完美透明地工作。同样地：

```
NSString *aNSString = (NSString *)aCFString; 
```

以前的语法是用于 MRC。如果您使用 ARC，则新的强制转换语法如下：

```
NSString *aNSString = (__bridge NSString *)aCFString; 
```

也可以。需要注意的关键是 CoreFoundation 通常会返回具有 +1 引用计数的对象，这意味着它们需要被释放（所有 CF[Type]Create 格式函数都这样做）。

好消息是在 Cocoa 中，您可以安全地使用 autorelease 或 release 来释放它们。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-01T01:38:46.380

如果您在最新版本的 Mac OS X/Objective C 中使用 ARC，这*真的*很简单：

```
NSString *happyString = (NSString *)CFBridgingRelease(sadString); 
```

但是，当您尝试免费桥接 CFString 到 NSString 时，Xcode 会很高兴地警告您，并提供在 CFBridgingRelease() 中自动包装它，如果您单击该选项，您可以接受并让它自动为您插入包装器。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-12T20:37:20.917

它们是等价的，所以你可以只转换 CFStringRef：

```
NSString *aNSString = (NSString*)aCFString; 
```

有关详细信息，请参阅[免费桥接类型](https://developer.apple.com/library/ios/documentation/corefoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-04-15T22:01:16.080

实际上，一般来说，您不应该在 Core Foundation 对象上使用 Cocoa 的保留、释放、自动释放。如果您使用垃圾收集（目前仅在 Mac OS X 上），那些保留、释放、自动释放调用都是无操作的。因此内存泄漏。

来自苹果[http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/GarbageCollection/Articles/gcCoreFoundation.html](http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/GarbageCollection/Articles/gcCoreFoundation.html)：

了解 Core Foundation 和 Cocoa 之间的不对称性很重要——其中保留、释放和自动释放是无操作的。例如，如果您平衡了 CFCreate... 与 release 或 autorelease，您将在垃圾收集环境中泄漏对象：

```
NSString *myString = (NSString *)CFStringCreate...(...);
// do interesting things with myString...
[myString release]; // leaked in a garbage collected environment 
```

相反，使用 CFRelease 释放您之前使用 retain 保留的对象将导致引用计数下溢错误。

* * *

PS：似乎无法评论 Peter Hosey 的回答 - 很抱歉不必要地添加我自己的答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-13T00:27:44.063

我要补充一点，你不仅可以只使用类型转换从 CFString 转到 NSString，而且它也可以以另一种方式工作。您可以删除该`CFStringCreateWithCString`消息，这是您稍后需要发布的少一件事。（CF 使用`Create`Cocoa 使用的地方`alloc`，所以无论哪种方式，你都需要释放它。）

结果代码：

```
NSString *escapedString;
NSString *unescapedString = [(NSString *) CFXMLCreateStringByUnescapingEntities(NULL, (CFStringRef) escapedString, NULL) autorelease]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-05T22:00:09.490

我遇到了 ARC 和 CFStrings 的保留计数的问题。使用 NilObjects 答案稍加调整对我来说非常完美。我刚刚添加了保留，例如。

```
CFStringRef cfstringRef = (__bridge_retained  CFStringRef)aNsString; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T09:12:57.050

你必须投它：

```
CFStringRef CFstringFileName=(__bridge CFStringRef)NSstringFileName; 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-10-17T05:19:34.860

您可以使用 :With CFStringRef idc;

```
NSString *sId = [NSString stringWithFormat:@"%@", (NSString*)idc]; 
```

# asp.net - 错误请求 (400)：为什么？

> ID：640385
> 
> 赞同：1
> 
> 时间：2009-03-12T20:38:07.797
> 
> 标签：asp.net

为什么使用以下 URL 会收到 400 - bad request 错误？它使用 Server.UrlEncode 进行编码。实际的`path`查询参数是`C:\Development\Chase\Exports\ChaseExport-090312073930.zip`

```
http://localhost:50199/Common/Forms/Export_Stream.aspx%3fpath%3dC%3a%5CDevelopment%5CChase%5CExports%5CChaseExport-090312073930.zip 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T20:41:21.390

您不应该对整个查询字符串进行 urlencode，只对值进行 urlencode，因此 URL 应该是

> [http://localhost:50199/Common/Forms/Export_Stream.aspx?path=C%3a%5CDevelopment%5CChase%5CExports%5CChaseExport-090312073930.zip](http://localhost:50199/Common/Forms/Export_Stream.aspx?path=C%3a%5CDevelopment%5CChase%5CExports%5CChaseExport-090312073930.zip)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-06-09T21:57:55.013

我在 Stefan 的帮助下写了一篇文章，解释了如何做到这一点：

[古怪的实验：在 ASP.NET/IIS 请求 URL 中允许百分比、尖括号和其他顽皮的东西](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T20:42:01.360

试试这个：

```
http://localhost:50199/Common/Forms/Export_Stream.aspx?path=C%3a%5CDevelopment%5CChase%5CExports%5CChaseExport-090312073930.zip 
```

# sql-server - SQL Server 2005 - 查询立即进入挂起状态

> ID：640388
> 
> 赞同：0
> 
> 时间：2009-03-12T20:38:44.127
> 
> 标签：sql-server, sql-server-2005

我在管理大量数据的临时查询时遇到问题。执行查询后，状态立即进入挂起状态。它将暂停大约 25 分钟，然后完成执行。

我有一个带有 SQL2K 的镜像环境，相同的查询在大约 2 分钟内执行，并且永远不会进入挂起状态。

**@@version** = Microsoft SQL Server 2005 - 9.00.3068.00 (Intel IA-64) 2008 年 2 月 26 日 21:28:22 版权所有 (c) 1988-2005 Microsoft Corporation Enterprise Edition (64-bit) o​​n Windows NT 5.2 (Build 3790:服务包 2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-21T00:38:06.023

也许统计数据已经过时，需要更新。更新它们，但最好同时重建索引。

或者，你没有。统计信息是否设置为自动创建和更新？我见过他们被关闭的情况，因为有人不明白他们的用途或更新是如何发生的。

注意：统计数据的采样率基于上次统计数据更新。因此，如果您最后一次采样 100%，则可能需要一些时间。

当您运行查询两次时会发生什么？第二次更快吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-22T13:41:04.870

从有限的信息中很难判断，但我很想知道在查询运行时从服务器性能的角度来看发生了什么。您可以使用 Perfmon 捕获性能指标，我在这里有一个关于它的教程：

[http://www.brentozar.com/perfmon](http://www.brentozar.com/perfmon)

在查询运行时，每个计数器的统计信息是什么样的？如果您按照那篇文章中的描述捕获统计数据，您可以通过 brento@brentozar.com 将它们发送给我，我会查看它们以了解发生了什么。

另一件有帮助的事情是查询的执行计划。进入 SQL Server Management Studio，将查询放入，然后单击 Query，Display Estimated Execution Plan。右键单击计划上的任意位置并将其保存为文件，然后其他人可以看到查询的样子。

然后理想情况下，单击查询，包括实际执行计划，运行查询，然后转到执行计划选项卡。也保存那个。如果您发布这两个计划（或通过电子邮件将它们发送给我），您将获得有关正在发生的事情的更好答案。

# python - 判断python是否处于-i模式

> ID：640389
> 
> 赞同：5
> 
> 时间：2009-03-12T20:38:47.093
> 
> 标签：python

如何判断 python 是否已使用 -i 标志启动？

根据[文档](http://www.wingware.com/psupport/python-manual/2.6/using/cmdline.html)，您可以检查 os.environ 中的 PYTHONINSPECT 变量，它*相当于*-i。但显然它的工作方式不同。

作品：

```
$ PYTHONINSPECT=1 python -c 'import os; print os.environ["PYTHONINSPECT"]' 
```

不起作用：

```
$ python -i -c 'import os; print os.environ["PYTHONINSPECT"]' 
```

我问的原因是因为如果某些条件失败，我有一个调用 sys.exit(-1) 的脚本。这很好，但有时我想使用 -i 手动调试它。我想我可以学习使用“PYTHONINSPECT=1 python”而不是“python -i”，但如果有一种通用的方法会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T20:53:17.150

### 如何以编程方式设置检查模式

[@Jweede 提供](https://stackoverflow.com/questions/640389/tell-whether-python-is-in-i-mode/640405#640405)[的链接](http://mail.python.org/pipermail/python-list/2005-April/319756.html) 的答案是不精确的。它应该是：

```
import os
os.environ['PYTHONINSPECT'] = '1' 
```

### 如何检索是否设置了交互/检查标志

[@Brian答案的](https://stackoverflow.com/questions/640389/tell-whether-python-is-in-i-mode/640534#640534)另一种变体：

```
import os
from ctypes import POINTER, c_int, cast, pythonapi

def in_interactive_inspect_mode():
    """Whether '-i' option is present or PYTHONINSPECT is not empty."""
    if os.environ.get('PYTHONINSPECT'): return True
    iflag_ptr = cast(pythonapi.Py_InteractiveFlag, POINTER(c_int))
    #NOTE: in Python 2.6+ ctypes.pythonapi.Py_InspectFlag > 0
    #      when PYTHONINSPECT set or '-i' is present 
    return iflag_ptr.contents.value != 0 
```

请参阅 Python 的[main.c](http://svn.python.org/view/python/trunk/Modules/main.c?view=markup)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T21:21:17.520

我查看了源代码，虽然提供 -i 时设置的变量存储在 Py_InteractiveFlag 中，但它看起来不像暴露给 python。

但是，如果您不介意通过一些低级 ctypes 检查让您的手有点脏，我认为您可以通过以下方式获得价值：

```
import ctypes, os

def interactive_inspect_mode():
    flagPtr = ctypes.cast(ctypes.pythonapi.Py_InteractiveFlag, 
                         ctypes.POINTER(ctypes.c_int))
    return flagPtr.contents.value > 0 or bool(os.environ.get("PYTHONINSPECT",False)) 
```

[编辑] 修复错字并检查 PYTHONINSPECT （不设置变量），正如评论中指出的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T20:44:32.540

这指定[了如何以编程方式将脚本切换到交互模式](http://mail.python.org/pipermail/python-list/2005-April/319756.html)。

# oracle - 如何在 Oracle 中检查索引

> ID：640390
> 
> 赞同：18
> 
> 时间：2009-03-12T20:40:01.020
> 
> 标签：oracle, metadata

我正在为依赖于 Oracle 数据库的产品编写架构升级脚本。在一个领域，我需要在表上创建一个索引 - 如果该索引尚不存在。有没有一种简单的方法来检查我知道 Oracle 脚本中名称的索引是否存在？

它在 SQL Server 中类似于： IF NOT EXISTS (SELECT * FROM SYSINDEXES WHERE NAME = 'myIndex') // 然后创建我的 myIndex

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-03-12T20:48:49.080

select count(*) from user_indexes where index_name = 'myIndex'

但是，sqlplus 不支持 IF...，因此您必须使用匿名 PL/SQL 块，这意味着立即执行来执行 DDL。

```
DECLARE
    i INTEGER;
BEGIN
    SELECT COUNT(*) INTO i FROM user_indexes WHERE index_name = 'MYINDEX';
    IF i = 0 THEN
        EXECUTE IMMEDIATE 'CREATE INDEX myIndex ...';
    END IF;
END;
/ 
```

编辑：正如所指出的，Oracle 以全部大写形式存储未引用的对象名称。

# linux - 你能阻止命令进入 bash shell 命令历史记录吗？

> ID：640403
> 
> 赞同：63
> 
> 时间：2009-03-12T20:43:43.523
> 
> 标签：linux, bash, unix, shell

有没有办法防止命令被添加到 bash shell 的命令历史记录中？

我希望能够防止某些“危险”命令被添加到历史记录中，例如“ `rm -rf ~/some/dir`”，这样我就无法通过按向上箭头访问以前的命令来访问它。这样，就不可能意外地重复这些命令之一。

我问的原因是我经常使用向上箭头来访问 shell 历史中以前的命令，并且经常发现自己要按我**认为**正确的命令输入，结果却意识到我即将做某事愚蠢/烦人/危险。我不喜欢`rm`s etc 在我的 shell 历史中飘来飘去的想法，等着我去踩它们！

（注意：我知道可以在 HISTIGNORE 中设置模式，但最好是可以在每个命令的基础上应用一些东西，这将成为一种好习惯。除非有一种聪明的方法可以使用 HISTIGNORE 实现这一点我错过了什么？）

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2009-03-12T20:47:15.370

在较新的 Bash 版本上，您只需在命令开头添加一个空格即可。:) 如果默认情况下不起作用，请将 [ \t]* 添加到 HISTIGNORE。（如评论中所述。thx）

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2011-04-21T21:48:31.727

将***ignorespace***添加到您的**HISTCONTROL**环境变量。然后任何以空格开头的命令行都不会输入到您的历史记录中。

# c# - .Net & C#：尝试在按钮上显示透明图像（从 IDE 分配）

> ID：640404
> 
> 赞同：3
> 
> 时间：2009-03-12T20:44:12.010
> 
> 标签：c#, .net, winforms, .net-2.0, transparency

使用 VS2005 和 C#。

在表单中有一个按钮和来自资源的图像，图像没有透明度。

从 IDE 分配图像时如何获得透明度？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T20:58:08.513

在图像编辑器中打开图像（Paint.NET 和 GIMP 是免费的）并在需要的地方添加透明胶片。

一旦图像实际上具有透明像素，这一切都会起作用。

您还可以使用 Bitmap 类的几个方法来执行此操作：

```
Bitmap b = Properties.Resources.MyImage;
b.MakeTransparent(b.GetPixel(0, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T20:50:08.233

我真的不明白你在问什么。只要您使用的图像类型支持透明度（例如 .png），您就可以在按钮上使用具有透明度的图像。

编辑：我再次阅读了您的问题，但仍然令人困惑，但也许您的意思是要为图像添加透明度？如果是这样，您将不得不使用图像编辑器来添加透明度并将其保存为支持此的格式。Paint.Net 是一个很好的免费工具。

# regex - 如何加入文件中的前 n 行

> ID：640406
> 
> 赞同：8
> 
> 时间：2009-03-12T20:45:06.437
> 
> 标签：regex, linux, sed, awk

我正在尝试清理一些数据，我最终想把它放在 CSV 格式中。

我已经使用了一些正则表达式来清理它，但我被困在了一步。

我想用逗号替换除每三个换行符 (\n) 之外的所有换行符。

数据如下所示：

```
field1
field2
field3
field1
field2
field3 
```

ETC..

我需要它

```
field1,field2,field3
field1,field2,field3 
```

任何人都有使用 sed 或 awk 的简单方法来做到这一点？我可以编写一个程序并使用带有 mod 计数器的循环来擦除每个第一个和第二个换行符，但如果可能的话，我宁愿从命令行执行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-12T20:55:10.970

使用 awk：

```
awk '{n2=n1;n1=n;n=$0;if(NR%3==0){printf"%s,%s,%s\n",n2,n1,n}}' yourData.txt 
```

此脚本保存最后三行并在每三行打印一次。不幸的是，这仅适用于具有 3 行倍数的文件。

更通用的脚本是：

```
awk '{l=l$0;if(NR%3==0){print l;l=""}else{l=l","}}END{if(l!=""){print substr(l,1,length(l)-1)}}' yourData.txt 
```

在这种情况下，最后三行连接在一个字符串中，当行号不是 3 的倍数时插入逗号分隔符。在文件末尾，如果字符串不为空且尾随字符串，则打印该字符串逗号已删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-12T21:08:07.177

awk 版本：

```
awk '{if (NR%3==0){print $0;}else{printf "%s,", $0;}}' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-13T03:16:42.800

一个短一点的 Perl 解决方案，它可以处理不具有 3 行倍数的文件：

```
perl -pe 's/\n/,/ if(++$i%3&&! eof)' yourData.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T21:01:50.390

猫文件 | perl -ne 'chomp(); 打印 $_, !(++$i%3) ? "\n" : ",";'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-13T11:22:24.473

在*Solaris*上使用*nawk*或*/usr/xpg4/bin/awk*：

 *```
awk 'ORS=NR%3?OFS:RS' OFS=, infile 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-02-24T06:45:38.433

这可能对您有用：

```
paste -sd',,\n' file 
```

或这个：

```
sed '$!N;$!N;y/\n/,/' file 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-13T04:06:10.730

vim 版本：

```
:1,$s/\n\(.*\)\n\(.*\)\n/,\1,\2\r/g 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T04:06:37.457

awk '{ORS=NR%3?",":"\n";print}' urdata.txt

# c++ - 从规则间隔的数据生成等高线

> ID：640407
> 
> 赞同：5
> 
> 时间：2009-03-12T20:45:29.773
> 
> 标签：c++, algorithm, grid, contour

我目前正在从事数据可视化项目。我的目标是从网格数据中生成等高线，也就是等值线。数据可以是温度、天气数据或任何其他类型的环境参数，但唯一的条件是它必须是有规律的间隔。我在互联网上搜索，但是我找不到从网格生成轮廓线的好算法、伪代码或源代码。有人知道从网格数据生成轮廓线的库、源代码或算法吗？如果您的建议具有良好的运行时性能，那就太好了，我不想让我的用户等这么久:)

编辑：感谢您的回复，但等值线有一些限制，例如它们不应相交，因此仅生成贝塞尔曲线并不能实现我的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T21:05:01.287

请参阅此问题：[如何从高程栅格近似矢量轮廓？](https://stackoverflow.com/questions/533467/how-to-approximate-a-vector-contour-from-an-elevation-raster)

它几乎是重复的，但使用了完全不同的术语。您会发现制图学和计算机图形学解决了许多相同的问题，但使用不同的术语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T20:54:59.363

GNUplot 中有一些相当不错的轮廓可用 - 如果您能够使用可能有帮助的 GPL 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-13T15:51:48.520

如果您的数据定期放置，这可以相当容易地完成（假设我正确理解您的问题）。首先，您需要确定您想要轮廓的间隔。接下来创建将用于存储等高线信息的网格（我假设在此等高线级别的数据类型中只是一个简单的开/关或高程），它应该比源数据小一个间隔。

现在这里的技巧是将 2 个网格偏移 1/2 个间隔（实际上不会出现在这样的代码中，但它是我在这里处理的概念）并比较当前点周围的 4 个坐标您正在计算的等高线数据网格。如果 4 个点中的任何一个在不同的间隔范围内，则等高线网格中的“像素”应设置为 true（或正在跨越的等高线范围的值）。

使用这种方法，当间隔太细时会出现问题，这会导致多个轮廓相互重叠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:19:07.527

正如 Paul Tomblin 的链接所暗示的那样，Bezier 曲线（它是 B 样条的一个子集）是您问题的成熟解决方案。如果运行时性能是一个问题，贝塞尔曲线还有一个额外的好处是可以通过非常快速的 de Casteljau 算法构造，而不是根据参数方程绘制它们。如果您使用 DirectX，它有一个用于 de Casteljau 的库函数，但使用描述它的 1001 个网页自己酿造一个应该不具有挑战性。

# wordpress - 我可以在不提供 FTP 访问权限的情况下安装/更新 WordPress 插件吗？

> ID：640409
> 
> 赞同：624
> 
> 时间：2009-03-12T20:46:03.813
> 
> 标签：wordpress

我在我的实时服务器上使用[WordPress](https://en.wikipedia.org/wiki/WordPress) ，它只使用使用[SSH](https://en.wikipedia.org/wiki/Secure_Shell)密钥 的[SFTP 。](https://en.wikipedia.org/wiki/SFTP)

我想安装和升级插件，但您似乎需要输入您的 FTP 登录名才能安装插件。有没有办法通过手动上传文件而不是让 WordPress 处理整个过程来安装和升级插件？

* * *

## 回答 #1

> 赞同：819
> 
> 时间：2011-04-13T13:25:53.263

如果无法`/wp-content`直接写入，WordPress 只会在尝试安装插件或 WordPress 更新时提示您输入 FTP 连接信息。否则，如果您的 Web 服务器对必要文件具有写入权限，它将自动处理更新和安装。此方法不需要您拥有 FTP/SFTP 或 SSH 访问权限，但它确实需要您在网络服务器上设置特定的文件权限。

它将按顺序尝试各种方法，如果 Direct 和 SSH 方法不可用，则回退到 FTP。

[https://github.com/WordPress/WordPress/blob/4.2.2/wp-admin/includes/file.php#L912](https://github.com/WordPress/WordPress/blob/4.2.2/wp-admin/includes/file.php#L912)

WordPress 将尝试将临时文件写入您的`/wp-content`目录。如果成功，它将文件的所有权与其自己的 uid 进行比较，如果匹配，它将允许您使用“直接”方法安装插件、主题或更新。

现在，如果由于某种原因您不想依赖自动检查要使用的文件系统方法，您可以`'FS_METHOD'`在`wp-config.php`文件中定义一个常量，或者`'direct', 'ssh', 'ftpext' or 'ftpsockets'`它会使用该方法。请记住，如果您将此设置为“直接”，但您的网络用户（运行网络服务器的用户名）没有正确的写入权限，您将收到错误消息。

总之，如果您不想（或不能）更改 wp-content 的权限以使您的 Web 服务器具有写入权限，则将其添加到您的 wp-config.php 文件中：

```
define('FS_METHOD', 'direct'); 
```

* * *

此处解释的权限：

*   [http://codex.wordpress.org/Updating_WordPress#Automatic_Update](http://codex.wordpress.org/Updating_WordPress#Automatic_Update)
*   [http://codex.wordpress.org/Changing_File_Permissions](http://codex.wordpress.org/Changing_File_Permissions)

* * *

## 回答 #2

> 赞同：275
> 
> 时间：2012-02-22T19:36:14.160

如前所述，任何烫发修复都不再起作用。您需要相应地更改烫发并将以下内容放入您的`wp-config.php`：

```
define('FS_METHOD', 'direct'); 
```

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2013-05-17T22:34:56.773

只是想补充一点，您绝不`wp-content`能将任何文件夹的权限或权限设置为`777`.

这是我必须做的：

1）我将wordpress文件夹的所有权（递归）设置为apache用户，如下所示：

`# chown -R apache wordpress/`

2）我将wordpress文件夹的组所有权（递归）更改为apache组，如下所示：

`# chgrp -R apache wordpress/`

3) 赋予所有者对该目录的完全权限，如下所示：

`# chmod u+wrx wordpress/*`

这就是工作。我的`wp-content`文件夹有`755`权限，顺便说一句。

TL;DR 版本：

```
# chown -R apache:apache wordpress
# chmod u+wrx wordpress/* 
```

* * *

## 回答 #4

> 赞同：71
> 
> 时间：2012-04-16T05:05:24.507

1.  在`wp-config.php`添加`define('FS_METHOD', 'direct');`
2.  使服务器可写目录`wp-content/`，`wp-content/plugins/`.
3.  安装插件（将插件目录复制到`wp-content/plugins`目录中）。

在版本 3.2.1 上工作

* * *

## 回答 #5

> 赞同：52
> 
> 时间：2016-02-27T11:23:46.977

打开`wp-config.php`文件并添加以下行：

`define('FS_METHOD', 'direct');`

这对我有用......谢谢

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2014-12-26T12:41:58.247

*只需快速更改**wp-config.php***

```
define('FS_METHOD','direct'); 
```

就是这样，在**没有 ftp**的情况下享受您的 wordpress 更新！

**替代方法：**

> 有一些主机会阻止这种方法来简化您的 WordPress 更新。幸运的是，还有另一种方法可以防止这种害虫提示您输入 FTP 用户名和密码。
> 
> 同样，在 wp-config.php 文件中的 MYSQL 登录声明之后，添加以下内容：

```
define("FTP_HOST", "localhost");
define("FTP_USER", "yourftpusername");
define("FTP_PASS", "yourftppassword"); 
```

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2017-09-11T17:18:08.007

更改`php_mod`为[启用](https://www.ispconfig.org/)`fastcgi`并启用（`cgi`ISPConfig用户）。为我工作。`SuEXEC`

如果不起作用，请尝试更改`wp-content`为`775`as`root`或`sudo`user：

```
chmod -R 775 ./wp-content 
```

然后添加到`wp-config.php`：

```
define('FS_METHOD', 'direct'); 
```

**祝你好运**

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2013-06-16T16:53:12.263

为了能够使用 SSH2 进行更新和主题上传，您必须生成 SSH 密钥并安装 PHP SSH 模块。然后 WordPress 将检测到您有可用的 SSH2，并且在进行上传/升级时您会看到显示的不同选项 (SSH2)。

**1.) 确保为 debian 安装了 PHP 模块：**

```
sudo apt-get install libssh2-php 
```

**2.) 生成 SSH 密钥，添加密码是可选的：**

```
ssh-keygen
cd  ~/.ssh
cp id_rsa.pub authorized_keys 
```

**3.) 更改权限，以便 WordPress 可以访问这些密钥：**

```
cd ~
chmod 755 .ssh
chmod 644 .ssh/* 
```

现在您将在进行上传/升级/插件时获得 SSH2 选项。 ![WP SSH 连接](https://i.stack.imgur.com/KcyFg.png)

**4.) 为方便起见，您可以设置默认值，`wp-config.php`这将在 WordPress 上传窗口中预先填充 SSH 凭据。**

```
define('FTP_PUBKEY','/home/<user>/.ssh/id_rsa.pub');
define('FTP_PRIKEY','/home/<user>/.ssh/id_rsa');
define('FTP_USER','<user>');
define('FTP_PASS','passphrase');
define('FTP_HOST','domain.com'); 
```

`ssh-kengen`如果您在;期间没有设置密码，“密码”是可选的。然后不要添加它`wp-config.php`

这解决了我的问题。而且我根本不需要这样做`chown`。但是我在其他地方看到过这种方法。

*参考：*

*   [http://wp.tutsplus.com/articles/tips-articles/quick-tip-upgrade-your-wordpress-site-via-ssh/](http://wp.tutsplus.com/articles/tips-articles/quick-tip-upgrade-your-wordpress-site-via-ssh/)
*   [http://codex.wordpress.org/Editing_wp-config.php#Enabling_SSH_Upgrade_Access](http://codex.wordpress.org/Editing_wp-config.php#Enabling_SSH_Upgrade_Access)

* * *

## 回答 #9

> 赞同：21
> 
> 时间：2009-03-12T20:59:02.847

通常您只需将插件上传到`wp-content\plugins`目录即可。如果您无法通过 SFTP 访问此目录，恐怕您可能会被卡住。

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2014-06-21T07:32:15.100

您可以通过在命令提示符上键入以下命令来轻松获取它

```
sudo chown -R www-data:www-data your_folder_name 
```

或将以下代码复制并粘贴到您的 wp-config.php 文件中。

```
define('FS_METHOD', 'direct'); 
```

其中“your_folder_name”是您的 WordPress 安装在此文件夹中的文件夹。

* * *

## 回答 #11

> 赞同：16
> 
> 时间：2012-02-12T20:32:24.690

如果您使用的是[Ubuntu](http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)，那么一个对我有用的快速解决方案是将所有权授予[Apache](http://en.wikipedia.org/wiki/Apache_HTTP_Server)用户（默认为 www-data），如下所示：

```
cd your_wordpress_directory
sudo chown -R www-data wp-content
sudo chmod -R 755 wp-content 
```

* * *

## 回答 #12

> 赞同：16
> 
> 时间：2015-07-24T09:51:23.947

在终端执行以下代码

```
sudo chown -R www-data /var/www 
```

有关更多详细信息，请访问 [Ubuntu 上的 Wordpress 安装无需 FTP 访问的插件](https://stackoverflow.com/questions/3492759/wordpress-on-ubuntu-install-plugins-without-ftp-access)

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2014-05-22T05:13:53.667

将以下代码添加到 wp-config

```
define('FS_METHOD', 'direct'); 
```

**FS_METHOD**强制文件系统方法。它只能是直接的、ssh2、ftpext 或 ftpsockets。通常，只有在遇到更新问题时才应更改此设置。如果您更改它并且它没有帮助，请将其更改回来/删除它。在大多数情况下，如果自动选择的方法不起作用，将其设置为 'ftpsockets' 将起作用。

**（主要偏好）“直接”**强制它使用来自 PHP 内部的直接文件 I/O 请求，这会在配置不当的主机上引发安全问题，这会在适当时自动选择。

**（次要偏好）“ssh2”**是强制使用 SSH PHP 扩展（如果已安装）

**(3rd Preference) "ftpext"**是强制使用 FTP PHP 扩展进行 FTP 访问，最后

**（第 4 种偏好）“ftpsockets”**利用 PHP Sockets 类进行 FTP 访问

欲了解更多信息，请访问：[http ://codex.wordpress.org/Editing_wp-config.php#WordPress_Upgrade_Constants](http://codex.wordpress.org/Editing_wp-config.php#WordPress_Upgrade_Constants)

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2009-03-12T21:00:05.607

WordPress 2.7 允许您直接上传 zip 文件（插件页面底部有一个链接）——无需 FTP 访问。这是 2.7 中的一个新功能，它仅适用于插件（还不是主题）。

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2012-02-08T16:47:22.153

复活一个旧线程，但是有一个很棒的新插件，称为[SSH SFTP 更新程序支持](http://wordpress.org/extend/plugins/ssh-sftp-updater-support/)，它添加了 SFTP 功能，而无需编辑您的`wp-config.php`文件。此外，Wordpress 的 SFTP 实现依赖于一些有些晦涩难懂的 PHP 模块，这些模块通常不会在服务器上启用；这个插件打包了一个不同的 PHP SFTP 插件，所以你不必在 Apache 端配置任何东西。

我在让 SFTP 支持工作时遇到了很多问题——这个插件解决了所有这些问题，真是太棒了。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2011-07-27T14:43:39.937

stereointeractive 的答案涵盖了所有选项。只是想提一下使用 FTP 的另一种方式。我猜你不允许FTP访问的原因是为了安全。解决这些安全问题的一种方法是运行仅在 127.0.0.1 上侦听的 FTP 服务器

这允许您从 WordPress 内部使用 FTP，并且您将能够安装插件而不会将其暴露给世界其他地方。这也可以应用于其他流行的 Web 应用程序，例如 Joomla！和 Drupal。这就是我们对[BitNami 设备](http://bitnami.org/stacks)和[云服务器](http://bitnami.org/cloud)所做的事情，并且运行良好。

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2013-11-26T10:02:27.203

是的，直接在WordPress中安装插件。

1.  复制插件文件夹并粘贴到 WordPress 插件文件夹中。
2.  转到管理端（/test/wp-admin），然后转到插件链接并检查插件的名称。
3.  激活插件，以便轻松安装插件。

其他选项

1.  为插件代码创建 zip 文件。
2.  转到管理端（/test/wp-admin），然后转到插件链接，然后单击添加新然后浏览插件 zip 文件夹并安装插件，然后出现选项激活插件，所以请激活插件和激活插件。

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2012-02-27T19:34:47.977

我还推荐[SSH SFTP Updater Support 插件](http://wordpress.org/extend/plugins/ssh-sftp-updater-support/)。刚刚也解决了我所有的问题……尤其是在通过管理员删除插件方面。只需以通常的方式安装它，下次 WordPress 提示您输入 FTP 详细信息时，将有额外的字段供您复制/粘贴您的私人 SSH 密钥或上传您的 PEM 文件。

我唯一的问题是让它记住密钥（尝试了两种方法）。不喜欢每次我需要删除插件时都必须查找并输入它的想法。但至少现在这是一个可靠的解决方案。

* * *

## 回答 #19

> 赞同：7
> 
> 时间：2012-09-28T07:04:26.177

尝试这个

1）在`wp-config.php`添加`define('FS_METHOD', 'direct');`

2）将`wp-content`目录设置`777`为可写。

3）现在安装插件。

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2017-07-23T02:19:30.587

我看到很多人建议将权限设置为 777。我在 2 天前遇到了同样的问题，我所做的只是将其添加到 wp-content

```
define('FS_METHOD', 'direct'); 
```

和

> 将插件文件夹的权限设置为 775

这解决了我询问 FTP 访问登录名/密码的问题。

在此之前，我必须通过将 .zip 文件添加到插件文件夹来手动添加插件，然后去`wp-admin/plugins`安装它。

* * *

## 回答 #21

> 赞同：6
> 
> 时间：2009-09-14T11:03:28.287

可以使用 SFTP 或 SSH 自动更新 WordPress 中的插件，但您需要有 ssh2 pecl 扩展。[您可以使用以下教程](http://devioustree.co.uk/2009/02/21/auto-update-wordpress-with-sftp/)了解如何操作

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2009-03-14T18:42:13.823

我们使用 SFTP 和 SSH（在我们的开发和实时服务器上），我已经尝试（虽然不太难）使用 WordPress 上传功能。我同意 Toby，将您的插件上传到`wp-content/plugins`目录，然后从那里激活它们。

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2017-12-18T07:49:06.313

试试这个检查是否为 wp-content 文件夹提供了正确的权限。

编辑 wp-config.php 添加以下行

```
define('FS_METHOD', 'direct'); 
```

chmod 将“wp-content”目录更改为 www-data 以获得完全访问权限。

现在尝试安装插件。

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2019-05-21T05:30:52.550

是的，你可以做到。

您需要添加

```
define('METHOD','direct'); 
```

在你的 wpconfig 中。但这种方法并不可取，因为它存在安全隐患。

谢谢，

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2019-12-27T07:01:51.190

**方法一：** 你可以这样设置： 1.在wp-config.php中你需要写这几行。

```
define('FS_METHOD', 'direct'); 
```

注意：把它放在define('DB_CHARSET', 'utf8mb4')之后。

2.  设置 wp-content 权限或递归权限 775 完全权限，您可以通过 filezilla 授予它。写点击目录>权限>检查读写和执行，还检查递归到子目录

**方法二：**

或者你也可以设置这个

```
define("FTP_HOST", "localhost");
define("FTP_USER", "yourftpusername");
define("FTP_PASS", "yourftppassword"); 
```

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2019-06-21T10:57:45.437

请添加`define('FS_METHOD','direct');`wp-config.php

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2018-08-12T21:07:09.910

设置 ftp 甚至 SFTP 连接或 chmod 777 对于本地环境以外的任何东西都是不好的方法。甚至打开 SFTP 方法也会引入更多不需要的安全风险。

需要的是这些目录的所有者对 /wp-content/uploads 和 /wp-content/plugins/ 的可写权限。（linux ls -la 会显示所有权）。

运行的默认 apache 用户是 www-data。

chmod 777 允许机器上的任何用户编辑这些文件，而不仅仅是 apache/php 线程用户。

如果您还没有使用 SFTP，它将从外部来源引入另一个可能的故障点。而您只需要运行 apache/php 进程的本地用户访问即可完成目标。

没有看到任何人提出这些观点，所以我想我会提供这些信息来帮助我们在线解决我们持续存在的 WP 安全问题。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2019-04-01T19:54:21.033

这是一个简单的方法。

执行以下命令。

这将为 Apache 启用 mod_rewrite 模块

```
$sudo a2enmod rewrite 
```

此命令会将文件夹的所有者更改为 www-data

```
$sudo chown -R www-data [Wordpress Folder Location] 
```

执行上述命令后，您可以在没有 FTP 的情况下安装任何主题。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2020-12-13T07:13:52.950

You can add following in wp-config.php

```
define('METHOD','direct'); 
```

Here is a youtube video that explaining how to do it. [https://youtu.be/pq4QRp4427c](https://youtu.be/pq4QRp4427c)

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2019-09-23T19:34:59.400

当您没有在 /wp-content 目录上写入权限时，WordPress 不允许您通过 WordPress 管理仪表板上传任何插件的唯一原因。请记住，您的 wordpress 目录 /wp-content 需要 0755 权限级别。有多种方法可以更改文件夹的权限级别。

**使用 cPanel 更改文件权限：**

转到文件管理器，打开您的 wordpress 网站应该位于的公共 HTML 文件夹，或者如果您的网站位于其他文件夹中，则打开站点根目录。在您的 WordPress 根目录中导航到 wp-content 文件夹；在 wp-content 文件夹行的末尾，最后一个框带有该文件夹的文件权限。确保将文件夹权限级别编辑为 0755，您就完成了。

**使用 SSH 终端更改文件权限：**

在您的终端中找到 WordPress 站点的根目录，在我的例子中是 /var/www/html，因此要进入 WordPress 根目录，请输入以下命令：

```
cd /var/www/html 
```

现在您位于所需文件夹 /wp-content 所在的 WordPress 根目录中。因此，要更改文件权限，请键入以下命令：

```
sudo chmod wp-content 755 
```

这会将您的 /wp-content 目录文件权限更改为 0755。

现在您不会收到通过 FTP 上传 wordpress 插件的错误消息。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-12-04T09:02:58.870

两步

1.  在 wp-config 文件中添加以下代码

    ```
    define('FS_METHOD', 'direct'); 
    ```

2.  我们需要对该文件夹授予完全权限，例如服务器是否通过 SSH 连接，然后将以下代码粘贴到终端中，并确保您位于网站文件夹中，然后运行以下代码

    ```
    sudo chmod -R 775 wp-content/plugins 
    ```

    或授予网站文件夹的完全权限

    ```
    sudo chown -R www-data:www-data website_folder 
    ```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2018-12-28T04:47:41.933

使用 SSH 安装插件的最佳方式是 WPCLI。

请注意，使用 WP CLI 命令必须使用 SSH 访问。在使用它之前，请检查 WP CLI 是否安装在您的托管服务器或机器上。

如何检查：`wp --version`[它将显示已安装的 wp cli 版本]

如果没有安装，如何安装： 安装 WP-CLI 之前，请确保环境满足最低要求：

类 UNIX 环境（OS X、Linux、FreeBSD、Cygwin）；Windows 环境中的有限支持。PHP 5.4 或更高版本 WordPress 3.7 或更高版本。比最新 WordPress 版本更早的版本可能会降低功能

如果以上几点都满意，请按照以下步骤操作：参考网址：[WPCLI](https://wp-cli.org/)

```
curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
[ download the wpcli phar ]

php wp-cli.phar --info [ check whether the phar file is working ]

chmod +x wp-cli.phar [ change permission ]
sudo mv wp-cli.phar /usr/local/bin/wp [ move to global folder ]
wp --info [ to check the installation ] 
```

现在 WP CLI 已准备好安装。

现在，您可以使用以下命令安装 WordPress.org 中可用的任何插件：

```
wp install plugin plugin-slug
wp delete plugin plugin-slug
wp deactivate plugin plugin-slug 
```

注意：wp cli 只能安装那些在 wordpress.org 中可用的插件

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2018-09-04T06:55:46.360

您可以拥有 fileZilla 并使用 FTP 帐户来更新插件和主题。或者您可以登录到 Cpanel 并访问 wordpress 文件夹，然后您可以通过解压缩主题或插件来更新主题。

# c# - SelectMany 三层深度

> ID：640415
> 
> 赞同：23
> 
> 时间：2009-03-12T20:48:09.550
> 
> 标签：c#, generics, list, lambda

我可以使用 SelectMany 展平集合中子集合的结果：

```
 // a list of Foos, a Foo contains a List of Bars
 var source = new List<Foo>() { ... };

 var q = source.SelectMany(foo => foo.Bar)
     .Select(bar => bar.barId)
 .ToList(); 
```

这给了我 Foo 列表中所有 Bar Id 的列表。当我尝试深入三层时，会返回不正确的结果。

```
 var q = source.SelectMany(foo => foo.Bar)
     .SelectMany(bar => bar.Widget)
         .Select(widget => widget.WidgetId)
 .ToList(); 
```

我应该如何使用 SelectMany 来获取我的 Foos 列表中所有 Bars 中的所有小部件的列表？

**编辑** 我错过了上面的句子，但代码反映了目标。我正在寻找所有小部件 ID 的列表，而不是小部件。

“不正确”的结果并不是所有的小部件 id 都被返回。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-03-12T20:51:51.913

您的查询返回所有小部件 ID，而不是所有小部件。如果您只想要小部件，只需使用：

```
var q = source.SelectMany(foo => foo.Bar)
              .SelectMany(bar => bar.Widget)
              .ToList(); 
```

如果那仍然给出“不正确的结果”，请解释它以何种*方式*是不正确的结果。示例代码将非常有帮助:)

编辑：好的，如果你想要小部件 ID，你的原始代码应该没问题：

```
var q = source.SelectMany(foo => foo.Bar)
              .SelectMany(bar => bar.Widget)
              .Select(widget => widget.WidgetId)
              .ToList(); 
```

这也可以写成

```
var q = (from foo in source
         from bar in foo.Bar
         from widget in bar.Widget
         select widgetId).ToList(); 
```

如果您喜欢查询表达式格式。

这确实应该有效 - 如果它*不起作用*，则表明您的数据有问题。

我们之前应该检查过 - 这只是 LINQ to Objects，还是更高级的提供程序（例如 LINQ to SQL）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T20:51:40.103

```
var q = (
    from f in foo
    from b in f.Bars
    from w in b.Widgets
    select w.WidgetId
   ).ToList(); 
```

另请注意，如果您想要唯一列表，则可以改为 .Distinct().ToList() 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:43:51.610

```
 var q = source.SelectMany(foo => foo.Bar)
          .SelectMany(bar => bar.Widget,(bar,widget) => widget.WidgetId)
          .ToList(); 
```

我们可以调用 SelectMany() 的这个重载，允许我们使用 lambda experession 指定投影

# php - 为什么不直接使用 ajax 进行页面请求来加载页面内容？

> ID：640422
> 
> 赞同：5
> 
> 时间：2009-03-12T20:50:11.463
> 
> 标签：php, ajax, request

许多网页加载所有内容以更改非常少的信息。

现在我想知道为什么开发人员不应该只使用 ajax 来处理主页请求？

在我自己的网页上，我想只使用 ajax 在我的网页上开发主要请求，但我不知道这种方法有什么具体的缺点。

有人知道为什么有人不应该这么多使用ajax吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-12T20:53:21.347

搜索引擎、爬虫/蜘蛛、没有 javascript 的浏览器、屏幕阅读器和其他内容消费者不会对它很满意。

如果您已经支持完整内容的标准服务器端导航，则可以在您的网站上提供大量的 ajax 行为。查看[渐进增强 (SO)](https://stackoverflow.com/questions/2486/what-is-progressive-enhancement)和[渐进增强 (wiki)](http://en.wikipedia.org/wiki/Progressive_enhancement)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-12T21:00:19.600

整个前提实际上是使用 AJAX，您无需重新加载*整个*页面即可更新该网页的一小部分。这可以节省带宽，并且通常比重新加载整个页面要快得多。

但是如果您使用 AJAX 来加载*整个*页面，这实际上会适得其反。您必须编写自定义例程来处理 AJAX 数据的回调。它的大量额外工作几乎没有提高性能。

在哪里使用 AJAX 的一般规则：**如果您更新页面的 >50%，只需重新加载，否则使用 AJAX。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T20:52:34.983

我给你一个很好的理由。

如果您在浏览器中关闭 javascript，它将无法正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T20:51:45.157

最大的问题是禁用 JavaScript 的用户。您的网站根本不适合他们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-13T12:39:25.300

好吧，您总是可以使用 jquery 不显眼地添加 onclick 事件并停止正常的 URL 处理。

例如：

HTML

```
<a id="ajaxify-this" href="my-working-url">Click me to do AJAXy stuff if you have javascript</a> 
```

然后是 Javascript

```
$(document).ready(function() {       
  $("#ajaxify-this").click( function(e) {
       updateContent(); // do something ajaxy with the page
       return false; // stop the click from causing navigation
   })
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-13T12:44:09.440

我只使用 JavaScript 和 EJS 作为我自己网站的模板引擎。离 SOFEA/SOUI 又近了一步。

搜索引擎、爬虫/蜘蛛、没有 javascript 的浏览器、屏幕阅读器不喜欢它，对。但我遵循主流；）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T20:58:37.217

除了已经发布的答案之外，使用 AJAX 可能会对浏览器控制产生丑陋的副作用，例如停止按钮不起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-12T21:02:56.770

一件事是您希望内容具有静态 url，您希望人们能够链接到您的页面、为它们添加书签等。

如果一切都是 ajaxified，这可能会很棘手和/或乏味。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-12T21:55:05.863

好吧，如果您想 AJAX 加载新页面，例如 Gmail 的工作方式，我建议您的链接是正常的 A HREF 链接指向真正的完整呈现页面 URL，并且使用 onclick 事件来停止尝试正常链接加载并进行 AJAX 调用。这里的问题是，除非您将这一切都很好地架构，否则您将进行几乎双重编码。

这样正常的非 JS 链接加载整个页面，而 JS 调用只加载新的部分或页面。这意味着蜘蛛索引也再次起作用。

# spring - Spring - 处理绑定到 simpleformcontroller 中的 bean 列表的最佳方法

> ID：640427
> 
> 赞同：2
> 
> 时间：2009-03-12T20:51:55.610
> 
> 标签：spring, data-binding, binding

没有想太多，我一直在做类似以下的事情：

1) 根据数据库调用的结果构建 SomeBean 对象列表

2）将该列表放入我的命令对象中

3）基于该命令对象构建一个表单，用户可以在其中修改 SomeBeans 的属性

4) 从提交后命令对象中提取数据并将更新后的数据写入我的数据库

我的代码看起来像这样：

```
public class UpdateThingsinListController extends SimpleFormController {

    protected Object formBackingObject(final HttpServletRequest request)
          throws Exception {

    List<SomeBean> beans = database.getBeans();

    Command comamnd = new UpdateThingsCommand()
    command.setList(beans);

    return command;

  }

   protected ModelAndView onSubmit(final HttpServletRequest request,
          final HttpServletResponse response, final Object commandArg,
          final BindException errors) throws Exception {

    database.setBeans(commandArg.getList());        

   }

} 
```

我的 jsp 看起来像：

```
<form:form>
    <c:forEach var="bean" items="${beans}" varStatus="status">
        <form:checkbox path="beans[${status.index}].someBooleanProperty" />${bean.name} <br>    
    </c:forEach>
</form:form> 
```

代码工作正常，但我刚刚意识到我的“beans”列表被创建了两次（在我的情况下 sessionform 必须是错误的）——一次是在显示表单时，一次是在绑定时。如果在第二次创建时发生任何变化（缺少一个 bean，结果的顺序不同），我的绑定就会搞砸，我会被解雇。我开始认为任何需要将命令对象与表单提交合并的投标方案都是非常危险的。

所以，我的问题是——人们如何确保表单提交正确绑定到列表？除了列表索引还有其他方法吗？对象ID可能吗？

谢谢，

-摩根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-10-27T07:17:03.287

如果 sessionForm 设置为 false，那么在提交期间，命令会在 formBackingObject 方法中重新创建。onSubmit 方法中列表的顺序将与页面上绑定对象的顺序完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T21:16:22.227

快速的方法是首先从数据库中删除所有现有的 SomeBeans 并创建那些在提交时绑定的。

一种更优雅的方法可能是将 SomeBean 的唯一标识符放在隐藏的表单字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T18:15:05.417

如果您不能依赖 List 在检索时始终保持不变，那么您必须使用不同的集合 - 地图。

另一种方法是将您的 List 缓存在某处。也许您的 database.getBeans 方法周围有一些 AOP。

# ms-access - 在访问应用程序中查找查询的所有用途

> ID：640434
> 
> 赞同：3
> 
> 时间：2009-03-12T20:54:24.247
> 
> 标签：ms-access, properties

我制作了一个独立的 Access 2003 应用程序，其中包含一堆开始变得不守规矩的表单。我正在尝试对其进行一些清理，并且我想做一些事情，例如查找查询的所有用途，以便我可以进行一些全局更新。我可以使用 ctrl-f 在代码中查找查询的用途，但我的问题是：是否有一种简单的方法来搜索整个应用程序以查找在控件的属性窗口中使用查询的位置，例如当它们直接绑定到控件时?

以编程方式将所有表单的所有属性转储到文本文件会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T21:35:44.723

右键单击数据库窗口中的查询并选择“对象依赖关系”这应该会为您提供将其作为子表单托管的表单列表。

这仅在您启用了默认的曲目名称自动更正信息时才有效。我个人将其关闭，因为它会使数据库膨胀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-13T08:49:07.447

就像 DJ 写道：这是要走的路。它工作得很好，它检测所有查询，甚至是组合框等中使用的查询。虽然我认为它不会找到代码中使用的查询。

如果您更改查询（例如名称），则对该查询的所有引用也将被更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T22:52:28.963

作为以 Access 为生的长期用户，我不建议使用名称自动更正。对于这类事情，我使用搜索和替换实用程序。[我一直是Black Moshannon 的 Speed Ferret](http://www.moshannon.com/)的长期拥有者，但自 A2003 发布以来，它一直存在很大问题，因为它本身不支持更新的版本。我没有真正使用过但其他人推荐的另一种选择是[Rick Fisher 的 Find and Replace](http://www.rickworld.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:14:36.163

可以使用 SaveAsText 将表单保存到文本文件：

```
Sub FormToText()
Dim frm
For Each frm In CurrentProject.AllForms
    Application.SaveAsText acForm, frm.Name, "c:\docs\" & frm.Name & ".txt"
Next
End Sub 
```

您可以从系统表 MsysObjects 和 MsysQueries 中获得大量信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-06T06:00:22.800

我知道这有点老了，但它看起来像是一个有趣的挑战。如果将其粘贴到模块中并运行它，它将生成一个文本文件，其中包含每个表单的 RecordSource 和每个 ComboBox 或 ListBox 的 RowSourceType 为“Table/Query”的文本文件。如果我没记错的话，那应该会为您提供可以使用查询的每个属性。如果我没记错，您可以调整代码以获取其他代码或更改输出格式。

如果您想转储所有表单的所有属性，您可以在表单的属性集合中执行 for each 循环并将其写入文件。问题在于表单具有某些属性，例如 PrtMip 和 PrtDevName，它们是结构，因此会破坏 write 或 writeline 方法，因此如果您要尝试将它们写入文件，则必须先进行一些特殊处理. 另外，我相信书签属性也可能有问题。

```
Sub ListProperties()
    Dim frm As Object
    Dim ctl As Control

    Dim fs As Object
    Dim file As Object

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set file = fs.CreateTextFile("C:\FormProps.txt", True)

    For Each frm In CurrentProject.AllForms
        DoCmd.OpenForm frm.Name, acNormal, , , , acHidden
    Next frm

    For Each frm In Forms
        file.writeline (frm.Name)
        file.writeline (String(Len(frm.Name), "-"))
        file.writeline "RecordSource" & Chr(9) & frm.Properties("RecordSource")

        For Each ctl In frm.Controls
            With ctl
                Select Case .ControlType
                    Case acComboBox, acListBox
                        .SetFocus
                        If .RowSourceType Like "Table/Query" Then
                            file.writeline Chr(9) & .Name & Chr(9) & "RowSource" & Chr(9) & .RowSource
                        End If
                End Select
            End With
        Next ctl

        file.writeline
    Next frm

    For Each frm In Forms
        DoCmd.Close acForm, frm.Name
    Next frm

End Sub 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-12T21:07:11.953

没有内置任何内容，但您应该能够通过编写一些迭代 CurrentProject.AllForms 集合以循环所有表单的代码来获得该功能。对于每个表单，检查其中可能包含查询的属性并列出。

# visual-studio - 当没有任何变化时停止重新构建合并模块

> ID：640438
> 
> 赞同：0
> 
> 时间：2009-03-12T20:54:57.537
> 
> 标签：visual-studio, visual-studio-2005, windows-installer, merge-module

我有一个构建 .msi 的解决方案。该安装程序项目依赖于一个合并模块项目，该项目组合了需要与二进制文件一起安装的各种数据文件。即使我不更改合并模块的内容，每次我想重建二进制 + 安装程序时，它都会坚持重建（这很耗时）。我在项目设置中没有看到任何明显的东西......只有在合并模块包发生变化的情况下，我该如何制作它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T21:05:26.967

我知道，这非常烦人。您可以卸载合并模块项目（右键单击它并选择卸载项目），但这是我发现处理它的唯一方法。

# java - j2me - 以 45 度增量旋转 2d 点数组

> ID：640443
> 
> 赞同：3
> 
> 时间：2009-03-12T20:55:47.753
> 
> 标签：java, graphics, java-me

我正在开发一款在网格上运行的 roguelike 风格的手机游戏。此游戏中的攻击/物品通过以相对于用户的模式定位图块来操作。路径通常也与用户瞄准的方向有关，例如在此[屏幕截图](http://arlenphillips.googlepages.com/Shotgun.PNG)中，模式

```
Point2d[] damageTiles = new Point2d[4];

damageTiles[0] = new Point2d(0, -1);
damageTiles[1] = new Point2d(0, -2);
damageTiles[2] = new Point2d(1, -2);
damageTiles[3] = new Point2d(-1, -2); 
```

是相对于瞄准“向上”的临时敌人（黄色框）显示的。

我目前有简单的代码将模式数组旋转 90 度增量，如此[处所示](http://arlenphillips.googlepages.com/screenshot.2.png)。我的问题是，有没有一种简单的方法可以将 2d 点数组旋转 45 度增量，允许我的攻击/项目在对角线上触发，最好不使用浮点数学，因为它往往在许多手机上运行缓慢（或所以我听到了）。对于任何熟悉图形编程的人来说，这可能是一个微不足道的问题，但我遇到了一个 coder's-block 的案例。

我当前的轮换代码如下所示。我现在意识到更好的方法是采用一个角度而不是“方向”并将点旋转该角度（当然拒绝不是 45 倍数的角度）。

```
private Point2d[] rotateList(Point2d[] points, int direction) {
    for (int i = 0; i < points.length; i++) {

        if (direction == ROTATE_LEFT) {
            int temp = points[i].x;
            points[i].x = points[i].y;
            points[i].y = -1 * temp;
        }
        else if (direction == ROTATE_RIGHT) {
            int temp = points[i].x;
            points[i].x = -1 * points[i].y;
            points[i].y = temp;
        }

    }

    return points;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T20:58:07.217

您可以使用简单的旋转矩阵来旋转每个点： [http ://www.siggraph.org/education/materials/HyperGraph/modeling/mod_tran/2drota.htm](http://www.siggraph.org/education/materials/HyperGraph/modeling/mod_tran/2drota.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T21:58:51.720

你展示的 T 形攻击很难旋转 45 度——事情并没有真正从 90 度转换到 45 度。

```
原来的：
......
.###。
..#..
..o..

备选方案 A：
......
.##..
.##..
...哦。

备选方案 B：
..#..
.#...
#.#..
...哦。

```

这种模式很容易有其他人。

我建议您创建一个 45 度“图案”以匹配您的 90 度图案，然后以与旋转 90 度图案完全相同的方式旋转 45 度图案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T21:51:31.253

当然，在 2D 中逆时针旋转（正 x，y 指向右上角）就是这样（参见wikipedia 中的[旋转矩阵）](http://en.wikipedia.org/wiki/Rotation_matrix)

```
[x']   [cos(theta)  -sin(theta)] [x]
[y'] = [sin(theta)   cos(theta)] [y] 
```

对于 theta = 45 度，这变为

```
 x' = 0.7071*x - 0.7071*y
 y' = 0.7071*x + 0.7071*y 
```

（将 0.7071 替换为 sqrt(2)/2，我这里只使用 4 位数字）

# wpf - WPF 单元测试、UIElement.RaiseEvent、ArgumentException

> ID：640446
> 
> 赞同：2
> 
> 时间：2009-03-12T20:56:18.423
> 
> 标签：wpf, unit-testing

我正在尝试构建一个单元测试并想伪造一个 DropEvent。

我在尝试引发事件时收到错误消息。我无法创建 DragEventArgs，因为它的保护级别是内部的。

```
System.ArgumentException : Object of type 'System.Windows.RoutedEventArgs' cannot be converted to type 'System.Windows.DragEventArgs' 
```

我有以下...

```
 [Test]
    public void Test()
    {
        DesignerMock view = new DesignerMock();
        _viewModel = (PanelDesignViewModel)view.DataContext;
        view.Show();

        Assert.IsNotNull(_viewModel);

        RoutedEventArgs args = new RoutedEventArgs(DesignerCanvas.DropEvent,view.DesignerCanvas) ;
        view.DesignerCanvas.RaiseEvent(args);

        view.Close();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T20:21:48.377

正如 ascalonx 所说，你不应该测试你的视图，只测试你的 ViewModel。这意味着您的 ViewModel 需要与 View 分离。而不是事件处理程序，在 ViewModel 上公开一个简单的公共方法，它将完成您需要的工作，并在您的测试中简单地调用它。要让您的视图调用此方法，请使用附加行为。[Caliburn](http://www.codeplex.com/caliburn)有一个很好的“动作”附加行为来做到这一点。

你提到你还有一些“正在进行”的 VisualTreeHelper 东西。这违反了 MV-VM 模式，因为它将您的 VM 耦合到特定的 V 实现。无论您在那里做什么，将其抽象为“服务”接口并使用 IoC 或服务定位器为您的 VM 提供此服务。我可能会建议为此查看[Onyx](http://www.codeplex.com/wpfonyx)（免责声明：我是这个库的作者）。它提供了一种灵活且易于使用的机制来为您的 VM 提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T21:31:43.063

如果您坚持要以这种方式测试代码，则可以使用反射来创建 DragEventArgs。但是，我认为真正的问题是，您的单元测试是否朝着正确的方向前进。我通常避免直接在我的视图上进行任何测试，并坚持测试更容易测试的视图模型（如果您确实使用 MVVM），因为您现在遇到的问题正是如此。

# git - git，不要在未跟踪文件列表中显示 *.pyc ！

> ID：640449
> 
> 赞同：62
> 
> 时间：2009-03-12T20:57:37.530
> 
> 标签：git, version-control, ignore

做的时候：

```
>git status 
```

它显示了“未跟踪文件”下的 .pyc 文件的大列表。我不希望它显示这些，因为它会增加噪音。

换句话说，如何让 git 始终忽略所有项目的 .pyc 文件？

**编辑**

我并不是在寻求一种将我忽略的文件传播给其他人的方法，我只是说“针对所有项目”，这意味着我不想将每个新项目都配置为忽略 .pyc 文件。

**更新**

我应该补充一点，我正在 Windows 上工作，我的 git 是[msysgit](http://code.google.com/p/msysgit/)

> 用户希望 git 在所有情况下忽略的模式（例如，由用户选择的编辑器生成的备份或临时文件）通常进入用户 ~/.gitconfig 中由 core.excludesfile 指定的文件。

.gitconfig 是文件还是文件夹？我的主目录中没有这样的东西（`C:\users\<myusername>\`）

**更新2**

谢谢大家的回复，

我通过使用解决了这些问题：

```
>git config --global core.excludesfile c:\git\ignore_files.txt 
```

并将 *.pyc 放入`c:\git\ignore_files.txt`

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2009-03-12T21:58:53.920

如**[gitignore](http://schacon.github.com/git/gitignore.html)**中所述，git 有[3 个忽略文件](http://tech.puredanger.com/2008/05/17/git-ignore-files/)：

> *   应该受版本控制并通过克隆分发到其他存储库的模式（即所有开发人员都希望忽略的文件）应该进入**`.gitignore file`**.

（这会照顾*所有时间*：如果有人克隆您的仓库，它将获得 .gitignore 文件）

> *   特定于特定存储库但不需要与其他相关存储库共享的模式（例如，存在于存储库中但特定于一个用户工作流的辅助文件）应该进入 $GIT_DIR/info/exclude 文件。

（在你的情况下不感兴趣）

> *   用户希望 git 在所有情况下都忽略的模式（例如，由用户选择的编辑器生成的备份或临时文件）通常**`core.excludesfile`**进入**`user's ~/.gitconfig`**.

（负责*所有项目*，但不是*所有时间*，因为在克隆您的存储库时不会复制它。）

“所有项目的所有时间”意味着例如用于创建新 git 项目的自定义外壳，其中自定义 .gitignore 作为第一次提交的第一个文件部分......

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2009-03-12T21:02:20.420

放入文件`~/.gitignore`：

```
*.pyc 
```

跑：

```
git config --global core.excludesfile ~/.gitignore 
```

我同意[@David Wolever](https://stackoverflow.com/questions/640449/git-doesnt-show-pyc-in-the-list-of-untracked-files/640466#640466)，如果有的话，应该谨慎使用这个选项。

(在 Windows 上) 只是一个约定，您可以使用您喜欢的任何文件名，`~/.gitignore`例如.`"%HOME%\.gitignore"``"c:\docs\gitignore.txt"`

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2009-03-12T23:34:08.043

```
git config --global core.excludesfile "c:\program files\whatever\global_ignore.txt" 
```

然后加

```
*.foo 
```

到那个文件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-04-19T07:07:09.100

忽略某些文件模式的另一种方法是：将 *.pyc 添加到 .git/info/excludes，这是一种更简洁的方法。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-02T05:58:03.560

添加

```
*.pyc 
```

在 .gitignore 文件中

运行这个

```
git config --global core.excludesfile .gitignore 
```

这对我有用

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-12T21:02:17.003

如果我记得，有一种方法可以设置全局 .gitignore ......但问题是你不能与其他人共享它（也就是说，拉你代码的其他人会看到 .pyc 文件）。

所以，恕我直言，最好将它添加到您开始的每个项目的 .gitignore 中。出于这个原因，我保留了一个股票 .gitignore。

<flamebait>
或者你可以切换到 bzr，它带有一个合理的默认列表，可以忽略 ^_^
</flamebait>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T21:02:37.613

你不能加吗

*.pyc

到你的.gitignore？

# xml - IndexOutOfRangeException 通过字符串数组访问属性？

> ID：640460
> 
> 赞同：0
> 
> 时间：2009-03-12T21:00:15.417
> 
> 标签：xml, winforms, exception, events

我在 winform 上显示了一个树视图。现在，当我单击树视图中的 xmlnode 时，它​​的属性会显示在列表框中。现在我已经将整个逻辑划分为 UI 和后端部分。现在我想要我的后端类包含显示单击的 xml 节点的属性（名称和值）的方法，并将它们存储在一个数组中，并在 treev_AfterSelect 事件中作为字符串返回给我的前端类。我该怎么做？我需要将我单击 winform 的节点的属性存储在字符串数组中并显示在列表框中。这是我的 Backhand 类的代码 `enter code here`

```
public  string[] selectedNode(XmlNode eventNode)
    {
        XmlAttributeCollection attCol = eventNode.Attributes;
        string[] strArray = new string[attCol.Count];
         if (attCol != null)
            for( int i = 0; i <= attCol.Count;i++)
            {  strArray[i] = "Attribute name: " + attCol[i].Name+","+" Attribute value: " + attCol[i].Value;//IndexOutOfRange Exception
                    }
            return strArray;
    } 
```

在这里，我遇到了 IndexOutOfRangeException 异常：传入的索引超出范围。在这条线上

```
strArray[i] = "Attribute name: " + attCol[i].Name+","+" Attribute value: " + attCol[i].Value; 
```

我的前端 ( UI ) 类包含此代码来检索属性和值，将其显示在列表框上。

```
private void treeView1_AfterSelect(object sender, System.Windows.Forms.TreeViewEventArgs e)
    {
        classObj = new MytreeNodeClass();
       listBox1.Items.Clear();
        XmlNode xNode = e.Node.Tag as XmlNode;
        string[] arrStr = classObj.selectedNode(xNode); 
        listBox1.Items.Add(arrStr); //Is this the correct syntax to retrieve the data in listbox??
     } 
```

你能帮我看看我哪里出错了吗？？准确地删除异常并成功运行代码的内容和位置？我不希望在反手中使用 Treenode。谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T21:04:07.267

你在循环中走得太远了。

```
for( int i = 0; i <= attCol.Count;i++) 
```

应该

```
for( int i = 0; i < attCol.Count;i++) 
```

# asp.net - 自定义 IPrincipal 和 WindowsAuthentication

> ID：640463
> 
> 赞同：5
> 
> 时间：2009-03-12T21:00:55.807
> 
> 标签：asp.net, authentication, windows-authentication

有没有将 ASP.NET Windows 身份验证与自定义 IPrincipal/IIdentity 对象相结合的好方法？我需要存储用户的电子邮件地址，并使用我在 AuthenticateRequest 事件期间添加到 Context.CurrentUser 的自定义 IIdentity/IPrincipal 对来进行表单身份验证。

我最好如何使用 WindowsAuthentication 来完成此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T21:35:34.757

也许您可以将“ExtendedWindowsPrincipal”创建为基于 WindowsPrincipal 的派生类，然后将额外数据添加到派生类中？

这样，您的 ExtendedWindowsPrincipal 仍然会在需要 WindowsPricinpal 的任何地方被识别。

或者：由于您正在谈论使用 Windows 身份验证，因此您可能在 Windows 网络中 - 是否有某个 Active Directory 或用户数据库，您可以在其中查找您感兴趣的电子邮件地址，而不是将其存储在主体中？

马克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-27T14:13:56.310

我最终将我最初的解决方案重构为替换 Principal 而不是我最初认为的 Identity。替换身份证明很麻烦，因为我在创建新的扩展 WindowsPrincipal 的实例时遇到了安全问题。

```
public class ExtendedWindowsPrincipal : WindowsPrincipal
{
    private readonly string _email;

    public ExtendedWindowsPrincipal(WindowsIdentity ntIdentity, 
       string email) : base(ntIdentity)
    {
            _email = email;
    }

    public string Email
    {
        get { return _email; }
    }
} 
```

在我的身份验证模块中，我替换了 HttpContext 上的主体，如下所示：

```
var currentUser = (WindowsIdentity)HttpContext.Current.User.Identity;
HttpContext.Current.User = 
    new ExtendedWindowsPrincipal(currentUser, userEmail); 
```

# java - 在我的主代码中使用 Thread.currentThread.sleep() 有什么危险吗？

> ID：640464
> 
> 赞同：3
> 
> 时间：2009-03-12T21:01:37.473
> 
> 标签：java, multithreading, sleep

在我正在使用的代码中

```
Thread.currentThread().sleep(sleepTime); 
```

在代码的主要（非线程对象）部分。

它似乎工作正常，但我担心可能会有一些隐藏的陷阱稍后会咬我的屁股。

有没有更好的方法可以让你的主要进程静置一段时间？还是这是规定的方法？

编辑：

为了回答我为什么要这样做......

我有一个通过 HTTP 或 FTP 连接到远程主机并执行操作的进程。

换句话说...

东西...

连接远程...

用远程连接做事...

紧密连接...

更多东西...

根据需要重复。

我发现在非常非常罕见的情况下，这种连接会进入 la la land。它不会失败，也不会抛出任何异常，它就会消失。而且它是阻塞的，所以没有在线方式来设置计时器。

所以，我的解决方案是这样做......

东西...

启动带有连接的新线程...

在 MAIN 进程中（不在生成的线程中）进入带有计时器的无限循环并等待

a）连接线程完成其任务并将一些标志设置为“完成”

或者

b）等待一些预设的时间，如果连接线程还没有报告它已经完成，杀死它并继续。

我打算在主进程中休眠一段时间，醒来，看看 MAX_WAIT_TIME 是否已过期。如果没有，就回去睡觉，再等一会儿。

它似乎比坐在标准while循环中更有效（在处理器上），因为这确实会干扰连接线程执行其需要执行的操作。

我想我的问题真的是......这种方法有什么不安全的地方吗？我从答案中看到，鉴于我正在做的事情，看起来没有。也许我应该问是否有更标准化的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-12T21:05:46.777

你在写什么样的应用程序？这很少是一个好主意，如果您正在编写客户端 GUI，这是一个*特别*糟糕的主意 - 当线程处于睡眠状态时，它不会响应。

如果您可以提供更多说明为什么需要暂停以及您正在编写的应用程序类型，那将有所帮助。

另一件事 - 你的电话真的应该是：

```
Thread.sleep(sleepTime); 
```

通过调用它`currentThread()`使它*看起来*像一个实例方法，但它不是 - 它只是一个普通的静态方法。你不能让任何*其他*线程休眠。

您应该查看您的 IDE 是否可以选择通过引用调用静态方法成为警告或错误 - 它会导致误导性代码（像这样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T21:05:12.863

没有陷阱。只要你告诉它，它就会一直睡觉。

您的应用程序长时间处于休眠状态的想法可能存在也可能不存在缺陷。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-12T21:03:09.903

这并不危险，但在 99+% 的情况下，当您认为需要它时，实际上并不需要。你想做什么？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-12T21:05:12.880

好吧，Thread.sleep 是一个静态方法，所以它很容易产生误导。此外，如果您需要关闭操作，您也无法干净地醒来（您可以打断，但我认为那是干净的）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-12T21:34:29.720

如果您决定使用[Thread.sleep](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#sleep(long))，请确保[正确处理 InterruptedException](http://www.ibm.com/developerworks/java/library/j-jtp05236.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T22:01:56.987

你是什​​么意思连接只是“消失”？当然，没有内联方式来设置计时器，但如果需要，您可以设置连接超时和读取超时。

使用无参数构造函数创建套接字，调用 connect(SocketAddress, int) 以便您可以设置超时（以毫秒为单位）。如果此时无法建立连接，则会引发异常。

您可以在连接之前调用 setSoTimeout() ，这样对 read() 的任何调用都只会在您指定的时间内阻塞，而不是永远阻塞。如果在您指定的时间内无法读取数据，则会引发异常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-14T12:46:37.813

AFAIR 会[`Thread.sleep()`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Thread.html#sleep(long))浪费 CPU 时间，[`Object.wait(long timeout)`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#wait(long))但不会。所以你应该总是使用`Object.wait(long timeout)`。虽然我找不到任何支持我论文的素材，但我认为当切换到`Object.wait(long timeout)`通话时，我们获得了很大的性能提升。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-14T13:47:41.347

人们经常使用 Timer 来执行延迟事件，但我更喜欢 ScheduleExecutorService。您可以对所有超时操作使用相同的线程池。（你可以有一个大小为 1 的线程池）

# debian - 对专用服务器硬盘进行分区是否有意义？

> ID：640469
> 
> 赞同：6
> 
> 时间：2009-03-12T21:02:52.213
> 
> 标签：debian, partitioning, dedicated

我将在我们新的专用服务器上安装 Debian，并且有机会设置硬盘分区。

服务器有两个配置为 RAID 1 的 750GB 驱动器。我们将有 10 个 Postgresql 数据库，其中每个数据库大约 2 GB。这个服务器上当然也会有 Apache/PHP。我们只会将服务器用于我们自己的 Web 应用程序。

托管公司强烈建议创建单独的两个分区。“/”的第一个小，“/home”的第二个非常大。但我对此有些怀疑。我觉得“/”目录的一个大分区就可以了。[这个问题](https://stackoverflow.com/questions/34127/whats-the-best-way-to-partition-large-drive-used-for-os-and-multimedia-storage-x)的答案也表明将磁盘分成几个分区是没有意义的。

在这种情况下磁盘分区是否仍然相关？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-12T21:10:56.470

如果您有一个数据可能会填满分区并阻止其他东西运行的地方，这很重要；应用程序日志文件可能会填满一个分区，并且没有 tmp 空间供其他应用程序写入或写入操作系统，所以是的，仍然有相关的分区原因。只需看看您需要什么，然后确定是否有任何东西可以阻止系统的其余部分被使用。如果是这样，您想将其分区，因此如果它确实最大化了空间，它只会伤害自己。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T21:11:38.370

正如您指出的线程中所述，多个分区的唯一好处是能够擦除和重建操作系统而不会弄乱您的数据。但是您在远程服务器上运行 Debian，因此您不太可能这样做。

在转储整个分区时，也有基于备份磁带容量的原因，但那是上个世纪的事了。

底线：不要分区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T21:07:39.020

我认为它在性能或任何实际原因方面不再相关。

请注意，RAID1 只能在硬件故障的情况下拯救您。这不是备份解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-21T14:18:09.563

我同意您的托管公司。

我**总是**使用分区将“我的东西”与操作系统分开。我认为最糟糕的情况是操作系统将被搞砸到我必须格式化并重新安装它并且我不想丢失任何数据的地步。我通常格式化留下一个分区，以便我可以安装第二个操作系统。

我在 LINUX 和 Windows 系统上都这样做，尽管事实证明它在 Windows 上比在 Linux 上更有价值。（我总是有一个重复的 Windows 操作系统安装准备整理主要的！）。

顺便说一句，如果您试图从磁盘中获得最大的性能，那么应该意识到存储数据的位置会影响读/写时间 - 高达 2 倍。您可以利用这一点，例如，通过将磁盘格式化为 3 个分区。“第一”的速度会比“第三”快

# c++ - Visual Studio 2005 在编译期间忽略预处理器指令

> ID：640476
> 
> 赞同：1
> 
> 时间：2009-03-12T21:03:30.683
> 
> 标签：c++, visual-studio-2005

我们刚刚有了一个新的开发人员，我正在尝试为他设置 Dev Studio 2005（我们在这个办公室都使用的版本），我们遇到了一个我以前从未见过的奇怪问题。

我有一些代码可以在我的系统上完美运行，但他似乎无法编译它。我们已将问题追溯到他忽略预处理器指令的开发工作室副本。

例如，在 C/C++|Preprocessor|Preprocessor Directives 下的项目属性中，我添加了 DEFINE_ME。这应该转换为编译器的 /D"DEFINE_ME" 。它在我的开发环境中确实如此，但在他的环境中却没有。

我验证了当他从源存储库中签出代码时，他拥有与我相同的代码版本。如果我查看他的项目属性，所有指令都在那里。出于某种原因，它们只是没有传递给编译器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T22:30:49.040

确保在所选解决方案配置中构建的项目配置与您为其配置属性的配置相同，和/或您正在为所有项目配置配置属性。新 VS 安装的一个常见问题是当前活动的解决方案配置是特定于系统的，并且可能默认为与您的不匹配的配置（例如：Release vs Debug）。

您可以在构建输出中看到项目配置，和/或在配置管理器中检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-01T23:42:00.777

我最近遇到了与 VS2005 相同的症状。最终，我能够通过命令行 - 附加选项对话框显式添加我的预处理器定义来解决它：

> 配置属性 -> C/C++ -> 命令行

当我在那里添加“ `/DPROPERTY`”时，它在编译时被识别，而在“预处理器 - >预处理器定义”下添加它什么也没做。奇怪的是，命令行对话框确实显示 Visual Studio 正在将属性添加到命令行，尽管形式为“ `/D "PROPERTY"`”。

不幸的是，进度压力就是这样，我无法深入研究这个问题，以找出根本问题是什么，也不知道为什么它似乎对我们的一些项目开箱即用，而对其他项目则不然。尽管如此，如果您有这种症状，上述解决方法还是值得一试的。

另外，应得的信用：这个想法来自[这个线程](http://www.codeguru.com/forum/showthread.php?t=353269)。

# python - Python 自省：如何获取对象属性的“未排序”列表？

> ID：640479
> 
> 赞同：4
> 
> 时间：2009-03-12T21:04:56.810
> 
> 标签：python, introspection, python-datamodel

以下代码

```
import types
class A:
    class D:
        pass
    class C:
        pass
for d in dir(A):
    if type(eval('A.'+d)) is types.ClassType:
        print d 
```

输出

```
C
D 
```

如何让它按照代码中定义这些类的顺序输出？IE

```
D
C 
```

除了使用 inspect.getsource(A) 并解析之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-12T21:51:30.053

请注意，在检查中已经为您完成了解析 - 看一看`inspect.findsource`，它在模块中搜索类定义并返回源代码和行号。按该行号排序（您可能还需要拆分在单独模块中定义的类）应该给出正确的顺序。

但是，这个函数似乎没有文档记录，只是使用正则表达式来查找行，所以它可能不太可靠。

另一种选择是使用元类或其他方式来隐式或显式地将信息排序到对象。例如：

```
import itertools, operator

next_id = itertools.count().next

class OrderedMeta(type):
    def __init__(cls, name, bases, dct):
        super(OrderedMeta, cls).__init__(name, bases, dct)
        cls._order = next_id()

# Set the default metaclass
__metaclass__ = OrderedMeta

class A:
    class D:
        pass
    class C:
        pass

print sorted([cls for cls in [getattr(A, name) for name in dir(A)] 
           if isinstance(cls, OrderedMeta)], key=operator.attrgetter("_order")) 
```

然而，这是一个相当侵入性的更改（需要将您感兴趣的任何类的元类设置为 OrderedMeta）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-12T21:14:07.960

不，您无法按照您要查找的顺序获取这些属性。Python 属性存储在 dict（读取：hashmap）中，它不知道插入顺序。

另外，我会通过简单地说来避免使用 eval

```
if type(getattr(A, d)) is types.ClassType:
    print d 
```

在你的循环中。请注意，您也可以只遍历键/值对`A.__dict__`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-12T22:03:07.903

该`inspect`模块也具有该`findsource`功能。它返回定义对象的源行和行号的元组。

```
>>> import inspect
>>> import StringIO
>>> inspect.findsource(StringIO.StringIO)[1]
41
>>> 
```

该`findsource`函数实际上搜索源文件并在给定类对象的情况下寻找可能的候选者。

给定一个方法、函数、回溯、框架或代码对象，它只查看`co_firstlineno`（包含的）代码对象的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T21:13:00.193

AFAIK，不 - 没有*。这是因为类的所有属性都存储在字典中（如您所知，字典是无序的）。

*：这实际上可能是可能的，但这需要装饰器或可能的元类黑客攻击。你对其中任何一个感兴趣吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-18T03:41:05.317

```
class ExampleObject:
    def example2():
        pass

    def example1():
        pass

context = ExampleObject

def sort_key(item):
    return inspect.findsource(item)[1]

properties = [
    getattr(context, attribute) for attribute in dir(context)
    if callable(getattr(context, attribute)) and 
    attribute.startswith('__') is False
]
properties.sort(key=sort_key)

print(properties) 
```

应该打印出来：

[<function ExampleObject.example2 at 0x7fc2baf9e940>, <function ExampleObject.example1 at 0x7fc2bae5e790>]

我也需要将它用于我正在构建的一些编译器，这被证明非常有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T21:33:47.663

我不是想在这里流利，但是您可以按字母顺序组织源代码中的课程吗？我发现当一个文件中有很多类时，这本身就很有用。

# silverlight - Silverlight 和推送通知

> ID：640488
> 
> 赞同：20
> 
> 时间：2009-03-12T21:07:35.713
> 
> 标签：silverlight, notifications, push

我正在为远程仪器创建 Silverlight 2 用户界面。不同站点的两个并发用户与仪器交互（仪器操作员和远程科学家）和任意数量的观察者用户不与其交互，只是观看。但是，每当两个活动用户中的一个更改某些内容时，这些更改必须立即反映在所有用户的 UI 中，例如平移或缩放图像或注释或选择图像的一部分，将项目添加到显示在列表框中的集合中。在客户端中，我使用可观察的集合，这些集合很容易反映该用户所做的更改，但很难看到另一个用户所做的更改。我可以轮询每个客户端的更改，但推送通知之类的东西会更好。我已经广泛搜索了示例，但没有找到任何我需要的东西。Silverlight 与 WCF 服务交互时存在各种安全问题，这意味着许多潜在示例无法正常工作。我在这个项目上基本上没有时间了，需要快速帮助。有没有人建议一个合适的简单例子来说明如何做到这一点？我是一位经验丰富的开发人员，但必须自学 Silverlight 和 WCF 服务，而我所在地区没有人知道这些。即使我已经完成了大量的 ASP.NET 工作，我也不是 Web/Javascript 专家。谢谢。我在这个项目上基本上没有时间了，需要快速帮助。有没有人建议一个合适的简单例子来说明如何做到这一点？我是一位经验丰富的开发人员，但必须自学 Silverlight 和 WCF 服务，而我所在地区没有人知道这些。即使我已经完成了大量的 ASP.NET 工作，我也不是 Web/Javascript 专家。谢谢。我在这个项目上基本上没有时间了，需要快速帮助。有没有人建议一个合适的简单例子来说明如何做到这一点？我是一位经验丰富的开发人员，但必须自学 Silverlight 和 WCF 服务，而我所在地区没有人知道这些。即使我已经完成了大量的 ASP.NET 工作，我也不是 Web/Javascript 专家。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-12T21:57:59.117

Silverlight 2 使用新的 WCF PollingDuplexHttpBinding 支持支持推送通知。Silverlight SDK 安装了两个程序集（[一个用于 Silverlight 应用程序，一个用于 WCF 服务器](http://petermcg.wordpress.com/2008/09/03/silverlight-polling-duplex-part-1-architecture/)）。

我有[一些博客文章和一个完整的示例应用程序](http://petermcg.wordpress.com/2008/11/19/silverlight-polling-duplex-part-4-wpf-client/)，它们演示了如何从控制台应用程序服务器“推送”股票更新，该控制台应用程序服务器自托管 WCF 服务到连接的客户端。它还展示了每个客户端如何针对股票添加注释并将这些注释同步（从服务器推送）到所有其他连接的客户端。

示例的最新版本（第 4 部分）展示了如何使用两个服务器端点在 Silverlight 和 WPF 客户端之间同步推送更新，如下所示：

```
using System;
using System.ServiceModel;
using System.ServiceModel.Description;

namespace StockServer
{
    public class StockServiceHost : ServiceHost
    {
        public StockServiceHost(object singletonInstance, params Uri[] baseAddresses)
            : base(singletonInstance, baseAddresses)
        {
        }

        public StockServiceHost(Type serviceType, params Uri[] baseAddresses)
            : base(serviceType, baseAddresses)
        {
        }

        protected override void InitializeRuntime()
        {
            this.AddServiceEndpoint(
                typeof(IPolicyProvider),
                new WebHttpBinding(),
                new Uri("http://localhost:10201/")).Behaviors.Add(new WebHttpBehavior());

            this.AddServiceEndpoint(
                typeof(IStockService),
                new PollingDuplexHttpBinding(),
                new Uri("http://localhost:10201/SilverlightStockService"));

            this.AddServiceEndpoint(
                typeof(IStockService),
                new WSDualHttpBinding(WSDualHttpSecurityMode.None),
                new Uri("http://localhost:10201/WpfStockService"));

            base.InitializeRuntime();
        }
    }
} 
```

WPF 客户端连接到 WSDualHttpBinding 端点，Silverlight 客户端连接到同一 WCF 服务的 PollingDuplexHttpBinding 端点。该应用程序还展示了如何处理 Silverlight 客户端访问策略要求。

客户端（Silverlight 或 WPF）可以在其 UI 中针对股票添加注释，这些注释传播回服务器以推送到所有其他客户端。这演示了双向通信，并有望执行您的应用程序所需的所有必要通信。

您可以[在此处查看运行的演示应用程序](http://petermcg.wordpress.com/2008/11/19/silverlight-polling-duplex-part-4-wpf-client/)的屏幕截图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-12T21:43:23.270

这并不是在以粉丝男孩的方式推动 Flex，但事实上，这是我们在所有基于 Flex 的应用程序中经常构建的那种架构。这是我们在 Flex 上所做的 - 毫无疑问，它可以适当地转换为 Silverlight：

我们采用三种成分并将它们整合在一起以实现此功能：

1.  Comet 模式（一种与 HTTP 兼容的服务器推送通知方式 - 查看 Wikipedia 了解更多信息）
2.  JMS 消息传递主题（发布/订阅者队列）
3.  Adobe BlazeDS servlet

后一项实现了 Comet 模式，支持 AMF 对象编组（Adobe 的 ActionScript3 对象的二进制序列化格式），并桥接到 JMS 队列或主题。当桥接到一个主题时，在浏览器中运行的多个 Flex 客户端可以作为 JMS 主题的订阅者进行代理。因此，如果任何客户端发布消息（或服务器端代码发布到主题中），所有客户端订阅者都将通过 BlazeDS 和彗星模式实现将消息推送给他们。

实际上，您需要找到或编写一个完成 BlazeDS 功能的组件。您可能还需要实现一些与此服务器端组件的 Comet 模式交互的客户端代码。

WCF 是否支持彗星模式和双向消息传递？特别是在符合 HTTP 和端口 80 或端口 443 的 SSL 的情况下。看起来您已经对此进行了调查，但没有找到任何双向消息传递。因此，您可能需要卷起袖子并进行一些编码。

关于将服务器推送到 Web 应用程序的一些注意事项：

BlazeDS 支持实现 Comet 模式的两种主要模式（实际上有第 3 个轮询选项，但我忽略了它）：

1.  长轮询
2.  HTTP 流式传输

您应该会发现大多数 Web 浏览器更普遍支持长轮询。因此，您可能会简化为最初仅支持它。或者您可以花时间让您的客户端代码首先尝试 HTTP 流式传输，并在必要时切换到长轮询。

至于可以提供发布/订阅功能的消息代理，您可以考虑使用 ActiveMQ JMS。它是开源和免费的，有积极的社区支持（你也可以购买支持）。此外，您还可以使用 NMS 作为 .NET 客户端进行集成。

将消息代理放在中间层实际上很重要，因为它将是安全放置消息的地方。如果您的客户正在进行长轮询，您不希望他们在没有实际连接的时间间隔内错过任何新消息。

在高流量场景（数百或数千个客户端，例如 Internet 上的网站）中要考虑的另一件事是，您需要有一种可扩展的彗星模式方法。

在 Flex/Java 世界中，BlazeDS servlet（它是开源的）已被修改为使用异步模型。在 Java 中，可以构建套接字侦听器以使用 NIO 通道和 Java 并发执行器线程池。Tomcat Web 服务器有一个 NIO 监听器并支持异步 Servlet 3.0 事件。但是，特别是 BlazeDS 已经过修改，可以与 Jetty Web 服务器一起使用。底线是这种异步方法的可扩展性意味着单个物理 Web 服务器可以被增强以支持多达 20,000 个并发 Comet 式客户端连接。

自从我进行认真的 .NET 编程以来已经有一段时间了，但习惯了 io 功能很像 Java 1.1，除了具有异步结果处理程序功能。但是，这与通过 Java NIO 通道创建异步套接字侦听器不同。一个 NIO 通道实现可以用一个相对较小的线程池支持数百到数千个套接字连接。但是 C# 和 .NET 已经经历了两到三个重要的改进——也许已经添加了新的 io 功能，可以与 NIO 通道相媲美。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-09-02T15:36:41.903

我只是想澄清一下 PollingDuplexHttpBinding 没有实现“真正的”推送通知，正如它的名称（轮询）所示。从[msdn 文档](http://msdn.microsoft.com/en-us/library/dd470106%28VS.96%29.aspx)：

> 使用此绑定配置后，Silverlight 客户端会定期轮询网络层上的服务，并检查服务想要在回调通道上发送的任何新消息。服务对客户端回调通道上发送的所有消息进行排队，并在客户端轮询服务时将它们传递给客户端。

然而，它比传统的轮询 Web 服务的方式更有效，因为每次轮询后，服务器都会保持通道打开一段时间（比如 1 分钟），如果在这段时间内有消息到达，它将直接“推送” '给客户的消息。客户端必须反复更新其连接，也就是说轮询服务。

If you want to implement real push notifications with silverlight I believe you need to work with sockets, and I recommend reading some of Dan Wahlin's blog posts on the subject.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T12:49:52.347

或者，

如果您想要一个不涉及代理、网桥或网络服务器的原生 silverlight API，您可以使用 my-Channels 中的 Nirvana 作为您的消息传递中间件。从 my-Channels 及其展示网站查看 Nirvana。（对不起，我是新用户，无法提交链接）：

亚历克斯

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-30T07:39:18.747

编辑：它实际上工作正常。我被闭包中的“隐藏变量”严重咬伤:(

我为 SL2 使用了 PollingDuplex，我认为它还没有准备好投入生产。

我的主要问题是它不会歧视同一台机器上的客户端。如果我运行 2 个客户端，那么其中一个将无法再轮询服务器并且会因超时而死。两个客户端的 SessionId 不同，但它只是在客户端被忽略。

同样，如果我杀死一个客户端然后创建一个新客户端，那么新客户端将在一段时间内从前一个客户端获取推送更新。

有没有人遇到过同样的问题，还是在 SL3 中修复了？

实际上，我运行了更多演示代码并意识到由于某种原因您必须指定 InstanceContextMode 和 InstanceMode 以便服务是基于会话的而不是单例的（据我所知）。我提取的简单演示代码中存在明显的性能问题。

不幸的是，这种行为没有记录在案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-24T17:51:52.193

我的组织发现 Silverlight 2.0/WCF 推送实施有点“没有为黄金时间做好准备”，至少对于我们计划使用它的目的而言。

我们最终选择了 XMPP/Jabber，因为它是一种结构更完善的野兽，您可以在 Silverlight 中相当容易地实现它，只需从 Internet 上获取一些资源即可。

我相信 Silverlight 3.0 将实现更新/更完善的推送实现，从我可以从公开可用的信息中得知。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T22:26:50.360

PollingDuplexHttpBinding 可能是最优雅的方法。

一种可能较少涉及的替代方法是使用 Silverlight 客户端的 TCP 套接字。每当其中一个 Silverlight 客户端需要推送更新时，您可以向它发送一条 TCP 消息，其中包含它需要调用的 WCF 服务的名称或一些其他轻量级信息。

我将这种方法用于应用程序并且效果很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-05T02:45:50.777

[网站http://www.udaparts.com/document/Tutorial/slpush.htm](http://www.udaparts.com/document/Tutorial/slpush.htm)提供了一种更简单、更强大的解决方案

# vb.net - VB.NET：让 DataGridView 从存储过程中填充

> ID：640491
> 
> 赞同：0
> 
> 时间：2009-03-12T21:08:16.693
> 
> 标签：vb.net, datagridview, bindingsource, tableadapter

我刚刚完成了 VB.NET 原型设计工作，而且我对 VB.NET 的经验并不丰富。

我必须创建一个按顺序返回自引用表的存储过程。有一次，我完成了我想要一个 DataGridView 来显示结果。

以前，我的团队通过 VB.NET 的 GUI 设计器做了很多这样的工作，所以很遗憾，我没有大量的代码可以描述。

我试图遵循他们的模式，我将在这里简要描述：

我有一个 DataGridView，它的 DataSource 属性指向一个 BindingSource。BindingSource 指向一个数据集。该 DataSet 的编辑器调用从存储过程中获取数据的 TableAdapter。

我预览了 TableAdapter 的数据。数据在那里。在 frmMain 的负载上运行 TableAdapter 的 Fill 命令。

什么都看不见。我的预感是，这是一个太复杂的过程，不可能是正确的。或者可能不是。在我决定打扰你们之前，我做了很多谷歌搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-29T21:02:18.030

也许你做了类似的事情：

```
datagridview.datasource = ds 
```

（这将显示一个空网格）

尝试

```
datagridview.datasource = ds.tables(0) 
```

# linux - 使用 Bash 将标准输入重定向到来自不同的终端

> ID：640493
> 
> 赞同：4
> 
> 时间：2009-03-12T21:09:50.980
> 
> 标签：linux, bash, stdin

我想知道如何将脚本的标准输入从当前的 xterm 会话（即 /dev/pts/0）重定向到也使用 bash 运行的脚本（即 /dev/pts/1）？我有一个打开 3 个 xterm 窗口的 bash 脚本，我只想从其中一个窗口中获取输入，但我不知道该怎么做。任何帮助表示赞赏！谢谢。

* * *

**编辑**（从下面移动——OP提交了这个澄清作为答案）

我想我应该澄清一下我想做什么。我将从一个 pty 开始一个脚本，假设它是 /dev/pts/3。该脚本将打开 3 个 xterminal，比如说：/dev/pts/0、/dev/pts/1 和 /dev/pts/2。这 3 个新的 pty 是用户将要看到的。该脚本要求用户输入一些输入，我希望将用户的输入输入 /dev/pty/1 并且程序应该从那里获取它的信息。但是我尝试过这样做，但它不起作用。这是我的代码片段。

```
exec</dev/pts/1

echo
echo "Would you like to search for more info?" 1>/dev/pts/1
read answer

case $answer in
    y) echo "YES" ;;
    n) echo "NO"  ;;
    *) echo "y/n only!";;
esac 
```

最后的 case 语句只是一个小占位符，用于查看输入是否真的有效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-08-28T12:04:08.553

也许您可以`ttyecho`根据自己的需要进行调整？

```
# /dev/ttysXXX is the result of the tty command in another Terminal window
sudo ttyecho -n /dev/ttysXXX pwd 
```

也许`ttyecho`可以与`netcat`（或`nc`）或`ncat`（这是nmap的一部分）结合使用以在不同的tty之间进行通信？

有关更多信息，请参阅：

*   [向其他终端发送命令或数据的实用程序 (tty/pts)](http://www.humbug.in/2010/utility-to-send-commands-or-data-to-other-terminals-ttypts/) -- (ttyecho)
*   [使用命名管道创建读/写环境](https://stackoverflow.com/questions/6605477/create-read-write-environment-using-named-pipes)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-12T21:16:45.393

我怀疑这是不可能的。AFAIK，如果不修改内核空间中的某些内容，就不可能从不是当前 tty 的 tty（或 pty）读取输入。连root都做不到。我花了一些时间研究这个，但我无法找到如何去做，但我确实发现很多消息来源声称这是不可能的。这似乎是增加用户安全/隐私的设计决定。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-13T01:49:14.833

要回答您明确的问题，一种简单的方法是使用 FIFO（命名管道）来完成这项工作。在发送终端上：

```
mkfifo ./myfifo
read var
echo "var" > myfifo 
```

在接收终端上：

```
read line < ./myfifo 
```

在接收 xterm 时，简单地打印您自己的另一个 xterm：

```
$ tty
/dev/pts/2 
```

在发送 xterm 时：

```
$ echo howdy doody > /dev/pts/2 
```

或者从发送 xterm 中的脚本，按照您的要求重定向标准输入：

```
$ cat > /dev/pts/2 
```

如果您跨用户执行此操作，则必须更改写入 /dev/pts/2 的权限。

您无法在接收终端上捕获以这种方式打印的内容。没有内置的重定向方法来捕获来自另一个终端的输入。

如果您希望发送 xterm 以自动方式找出接收 xterm 的字符设备，则可以根据您要使用的进程间通信类型来回答几种方式。一个简单的技巧是让接收者做 tty > file1 和发送者做 echo 不管 > $(cat file1)。

如果您想尝试从接收者而不是发送者引导它，那么您再次遇到进程间通信问题，可以通过多种方式解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-08-26T03:41:43.820

这很简单，您只需要了解

ls -ls /dev/pts 你会看到

0 1 2 3 4 假设你开了几个

现在使用一个 NOT 4 并键入 cat < /dev/pts/4 或 exec < cat /dev/pts/4

并在第 4 个中输入一些内容，您现在知道会发生什么

# document-management - 分类文件管理系统

> ID：640494
> 
> 赞同：0
> 
> 时间：2009-03-12T21:10:13.087
> 
> 标签：document-management, dms

在我工作的公司，我们有一个内部网，可以让员工访问各种文档。这些文档分为几个类别和子类别，每个类别都有自己的网页。下面是一个这样的页面（显示的每个链接都将链接到该类别的类似视图）：

[http://img16.imageshack.us/img16/9800/dmss.jpg](http://img16.imageshack.us/img16/9800/dmss.jpg)

目前，我们将每个文档作为文件存储在 Web 服务器上，并在需要添加新文档时手动编写指向这些文档的链接。这是乏味且容易出错的，这也意味着我们缺乏任何安全措施来访问这些文档。我开始研究文档管理系统（例如[KnowledgeTree](http://www.knowledgetree.com/)和[OpenKM](http://openkm.com/)），但是，这些系统似乎都没有像上面的预览那样提供分类视图。

我的问题是......有没有人知道任何文档管理系统允许我们目前拥有的灵活性类型，将我们的文档链接手动编码到各种网页（主要和次要），同时还提供安全性、易用性和（不太重要）版本控制？或者你认为我最好从头开始开发这样的系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-16T13:20:29.407

如果您正在尝试对文档管理系统中的文件或文件夹进行分类，这不是一项艰巨的任务。您只需要访问管理面板来维护文件夹或对文件夹进行分类 [![在此处输入图像描述](https://i.stack.imgur.com/859Bf.jpg)](https://i.stack.imgur.com/859Bf.jpg)

在 Laserfiche 中，您可以轻松地对有关部门的文件夹进行分类，也可以对它们进行子分类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T07:03:47.930

我们也面临类似的问题。然而，版本控制更多地是我们的首要任务，我们确实研究了许多解决方案。我们发现[Glodox](http://www.itaz.com/)非常易于安装和使用，更重要的是，支持团队非常棒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T21:24:02.320

你应该看看[Alfresco](http://www.alfresco.com/)。它具有极强的可扩展性，并提供了许多访问存储库的方法。

注意：单击社区版的“开发人员”选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-04T19:48:38.470

> 我的问题是......是否有人知道任何文档管理系统允许我们目前拥有的灵活性类型，将我们的文档的链接手动编码到各种网页（主要和次要）中，同时还提供安全性、易用性和（不太重要）版本控制？或者你认为我最好从头开始开发这样的系统？

好吧，有些公司以销售文档管理软件为生。任何你可以现成的东西都会大大节省时间，而且它会比你可以用手合理开发的任何东西更好。

我用过几个系统：

**Sharepoint**：虽然我[听说有些人不喜欢它](https://stackoverflow.com/questions/256407/what-are-your-biggest-complaints-about-sharepoint)，但我也不喜欢；）

**HyperOffice**非常适合我拥有大约 150 名员工的公司，并且具有您描述的所有功能。

目前的公司使用**Confluence**，我喜欢它 :) 但它可能是那些价格不值得的工具之一，特别是如果你只使用它的一部分功能，比如文档管理。

我没有使用过它，但我认识的一个人对**Alfresco 赞不绝口**，这是一个免费和开源的文档管理系统。我查看了它的网站，似乎使用起来很简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-06T18:37:01.653

试试 Mayan EDMS，它是基于 Django 的开源软件，使用它作为基础并在其上构建您希望的自定义​​功能。

代码位置：[https ://gitlab.com/mayan-edms/mayan-edms](https://gitlab.com/mayan-edms/mayan-edms)

主页： http: [//www.mayan-edms.com](http://www.mayan-edms.com)

该项目也可以通过 PyPI 获得：[https ://pypi.python.org/pypi/mayan-edms/](https://pypi.python.org/pypi/mayan-edms/)

# xml - 如何在 xml 元素名称中包含 [

> ID：640502
> 
> 赞同：0
> 
> 时间：2009-03-12T21:12:53.203
> 
> 标签：xml, encoding, svg

有没有办法在 xml 元素名称中包含 [ 字符？

例如

```
<AWSECommerceService.ItemSearch.ItemSearch.Request[0].SearchIndex>Electronics</AWSECommerceService.ItemSearch.ItemSearch.Request[0].SearchIndex> 
```

使用它的原因是，在 SVG 中，隐藏请求输入值是使用名称指定请求键的 xml 元素指定的。

例如：

```
 <xforms:model id="form1">
<xforms:instance>
    <q>toyota</q>
    </xforms:instance>
<xforms:submission id="submit1" xforms:method="get" xforms:action="http://www.google.ca/search" /> 
```

将导致对[http://www.google.ca/search?q=toyota的请求](http://www.google.ca/search?q=toyota)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-12T21:17:11.977

您不能 - 它不是 XML 元素名称的有效部分。

从[规格](http://www.w3.org/TR/2006/REC-xml11-20060816/#NT-Name)：

> ASCII 符号和标点符号以及相当大的一组 Unicode 符号字符被排除在名称之外，因为它们在 XML 名称用于 XML 文档之外的上下文中作为分隔符更有用；提供该组为这些上下文提供了关于哪些内容不能成为 XML 名称的硬性保证。

*然后是*允许的 BNF ：

```
NameStartChar ::= ":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] 
                  | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D]
                  | [#x37F-#x1FFF] | [#x200C-#x200D] 
                  | [#x2070-#x218F] | [#x2C00-#x2FEF] 
                  | [#x3001-#xD7FF] | [#xF900-#xFDCF] 
                  | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF] 

NameChar      ::= NameStartChar | "-" | "." | [0-9] | #xB7 
                  | [#x0300-#x036F]  | [#x203F-#x2040]

Name          ::= NameStartChar (NameChar)*

Names         ::= Name (#x20 Name)*

Nmtoken       ::= (NameChar)+

Nmtokens      ::= Nmtoken (#x20 Nmtoken)* 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-12T21:17:56.187

不可能。[XML 规范](http://www.w3.org/TR/2008/REC-xml-20081126/#NT-Name)将元素名称定义为 a`NameStartChar`后跟`NameChar`s，并且它们都不包含方括号

# c# - 如何在不修改生成的类的情况下将 SoapExtension 属性添加到生成的 Web 服务客户端代理？

> ID：640505
> 
> 赞同：6
> 
> 时间：2009-03-12T21:13:24.997
> 
> 标签：c#, web-services, soap, proxy, wsdl

我创建了一个 SoapExtension 类来捕获来自特定 Web 服务调用的肥皂请求和响应。为了使这个 SoapExtension 生效，我必须在生成的代理客户端中的方法中添加一个属性。

例如，我在此方法中添加了 AuditSoapCapture 属性：

```
 [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://blahblah.com/webservices/AddressSearch", RequestNamespace = "http://blahblah.com/webservices/", ResponseNamespace = "http://blahblah.com/webservices/", Use = System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle = System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
    [blahblah.TriadLite.Core.AuditSoapCapture]
    public System.Data.DataSet AddressSearch(string HouseNumber, string StreetName, string ZipCode) {
        object[] results = this.Invoke("AddressSearch", new object[] {
                    HouseNumber,
                    StreetName,
                    ZipCode});
        return ((System.Data.DataSet)(results[0]));
    } 
```

我正在寻找一种在不修改生成的客户端代理的情况下将此属性添加到特定方法的方法，因为当我们重新生成时它们会丢失。我可以在另一个部分类或接口或其他方式中执行此操作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-19T04:42:47.333

我可能只是通过将 SoapExtension 放入 Web.config 来注入我的 SoapExtension。这将导致它在没有客户端代理方法属性的情况下在每个 WS 调用上运行。然后，我将修改 SoapExtension 以在列表中查找被调用的 WS 方法名称，如果在列表中，则执行其余的 SoapExtension 逻辑。我认为在这个小容量应用程序中的成功不会影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-16T02:33:13.823

不幸的是，您需要修改代理代码。您提到的其他可能性将不起作用-parial 类不会覆盖现有功能，而且我没有办法知道获得一个接口来做您需要的事情（再加上没有办法让代理生成器知道您打算实现一个接口）。

在您可以访问 Web 服务源的情况下，我过去做过的事情是编写一个小应用程序，将 Web 服务的 .asmx.cs 文件中的代码（作为文本）解析为提取所有带有 [WebMethod] 标记的方法的名称。然后，应用程序通过根据某些设置文件或类似的设置将适当的属性插入到代理方法中来“修复”References.cs。这很有效，因为代理中的命名约定非常整齐地映射到原始服务中的方法名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-24T17:20:29.083

6年前这是发布的......所以现在不确定这是否会帮助任何人。

我在调用旧 SOAP Web 服务时遇到了类似的情况，该服务具有动态生成的代理类，我们不想修改它，因为它是由项目从 wsdl 自动生成的。为了解决这个问题，这就是我们所做的。

*   wsdl.exe 生成的代理类是分部类。我们像这样扩展了这个类，在soapextension中添加了一个包含我们想要访问的信息的属性。您可以根据需要添加任意数量的属性...

    `partial class mysoapwebservice { public string myproperty{ get; set; } }`

*   在 web.config 中，我们在项目中全局注册了soap扩展

    `<webServices> <soapExtensionTypes> <add type="MySoapExtension" priority="1" group="Low"/> </soapExtensionTypes> </webServices>`

*   在代码中，我们创建了 Web 服务对象“mysoapwebservice”，我们设置了所需属性的值。

*   在soapextension 中，您可以获得对被调用的Web 服务的引用以及值。您还可以确定方法调用。

`

```
public class MySoapExtension: SoapExtension 
{
  public override void ProcessMessage(SoapMessage message)
  {
    switch (message.Stage)
        {
            case SoapMessageStage.BeforeSerialize:
                {
                    // web service client object
                    var webserviceobject= ((SoapClientMessage)message).Client;
                    // method from web service that was called
                    var calledMethod = (SoapClientMessage)message).MethodInfo;

                    // checked the client type of webserviceobject and
                    //added method / property specific logic here
                 }
         }
  }

  // other soap extension code
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2011-10-14T12:28:52.060

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class)]
public class CriptoExtensionAttribute : SoapExtensionAttribute

[CriptoExtension]
public partial class MainService{ 
```

# functional-programming - Ocaml 中的函子

> ID：640510
> 
> 赞同：13
> 
> 时间：2009-03-12T21:14:48.037
> 
> 标签：functional-programming, ocaml, functor

我对仿函数（它是结果类型）有点问题。下面，我有一个使用 Ordered 类型的 Set 仿函数。我实际上使用了`set.ml`ocaml 附带的一些指导，但我似乎做的一切*都是*对的。我创建了一个带整数的 Ordered 模块，并将其应用于 Set 函子，以获取此代码示例中的最后一个模块 IntSet。

当我尝试插入一个整数时，下一行失败了。我收到以下类型错误：

```
Error: This expression has type int but is here used with type
         SetInt.elt = Set(OrdInt).elt 
```

不要误会我的意思，这里的类型系统是正确的。顶层报告的类型`SetInt.elt`是`Set(OrdInt).elt`，但是当我使用 ocaml 提供的设置执行相同的操作来设置 Set 时，“相同”行是 , `SetInt.elt = OrderedInt.t`。好像我应该得到`SetInt.elt = Ordered.t`.

这很简单，我可能只是错过了一些愚蠢的细节！啊！

请注意：我在这里简化了成员/插入函数，因为这个问题与类型有关。

```
module type Ordered =
  sig
    type t 
    val lt : t -> t -> bool
    val eq : t -> t -> bool
    val leq : t -> t -> bool
  end

module type S =
  sig
    type elt
    type t
    exception Already_Exists
    val empty  : t
    val insert : elt -> t -> t
    val member : elt -> t -> bool
  end

module Set (Elt:Ordered) : S = 
  struct
    type elt = Elt.t
    type t = Leaf | Node of t * elt * t
    exception Already_Exists
    let empty = Leaf
    let insert e t = t
    let member e t = false
  end

module OrdInt : Ordered =
  struct
    type t = int
    let lt a b = a < b
    let eq a b = a = b
    let leq a b = a <= b
  end

module IntSet = Set (OrdInt)

(* line that fails *)
let one_elm = IntSet.insert 1 IntSet.empty 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-12T21:24:17.560

您需要更改这两行

```
module Set (Elt:Ordered) : S = 
module OrdInt : Ordered = 
```

到

```
module Set (Elt:Ordered) : S with type elt = Elt.t = 
module OrdInt : Ordered with type t = int = 
```

如果没有这些，模块将没有将 elt 和 t 类型公开为 int 的签名。

[编辑]：set.ml 没有“with”位，因为有一个 sml.mli，它声明了函子的签名并且它确实有“with”。此外，如果您没有明确指定 OrdInt 的签名，则 OrdInt 不需要 'with'，如下所示：

```
module OrdInt = 
```

您还可以通过在适当位置定义模块来构造集合：

```
module IntSet = Set (struct
 type t = int
 let lt a b = a < b
 let eq a b = a = b
 let leq a b = a <= b
end) 
```

# linq - linqToSql 相关表不能正确延迟加载。根本不填充

> ID：640512
> 
> 赞同：0
> 
> 时间：2009-03-12T21:15:53.803
> 
> 标签：linq, linq-to-sql

我有几个与标准 Order、OrderLine 表具有相似关系结构的表。
创建数据上下文时，它为 Order 类提供了一个 OrderLines 属性，该属性应使用该特定 Order 对象的 OrderLine 对象进行填充。
当然，默认情况下它会延迟加载 OrderLine 属性中的内容，但这应该是相当透明的吧？

好的，这是我遇到的问题：我去的时候得到了一个空列表，`MyOrder.OrderLines`但是当我去的时候，`myDataContext.OrderLines.Where(line => line.OrderId == 1)`我得到了正确的列表。

```
public void B()
{
  var dbContext = new Adis.CA.Repository.Database.CaDataContext(
    "<connectionString>");
  dbContext.Connection.Open();
  dbContext.Transaction = dbContext.Connection.BeginTransaction();
  try
  {
    //!!!Edit: Imortant to note that the order with orderID=1 already exists 
    //!!!in the database

    //just add some new order lines to make sure there are some
    var NewOrderLines = new List<OrderLines>()
    {
      new OrderLine() { OrderID=1, LineID=300 },
      new OrderLine() { OrderID=1, LineID=301 },
      new OrderLine() { OrderID=1, LineID=302 },
      new OrderLine() { OrderID=1, LineID=303 }
    };

    dbContext.OrderLines.InsertAllOnSubmit(NewOrderLines);
    dbContext.SubmitChanges();

    //this will give me the 4 rows I just inserted
    var orderLinesDirect = dbContext.OrderLines
          .Where(orderLine => orderLine.OrderID == 1);

    var order = dbContext.Orders.Where(order => order.OrderID == 1);
    //this will be an empty list
    var orderLinesThroughOrder = order.OrderLines;
  }
  catch (System.Data.SqlClient.SqlException e)
  {
    dbContext.Transaction.Rollback();
    throw;
  }
  finally
  {
    dbContext.Transaction.Rollback();
    dbContext.Dispose();
    dbContext = null;
  }
} 
```

所以据我所知，我没有做任何特别奇怪的事情，但我会这么想，`orderLinesDirect`并`orderLinesThroughOrder`会给我相同的结果集。
谁能告诉我为什么没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T21:28:37.830

您只是添加 OrderLines；不是任何实际订单。所以 dbContext.Orders 上的 Where 返回一个空列表。

我不明白，您如何仍然可以在订单上找到属性 OrderLines，所以我可能会在这里胡闹。

**[编辑]** 您能否更新示例以显示实际类型，尤其是 order 变量？海事组织，它应该是一个`IQueryable<Order>`，但奇怪的是你能`.OrderLines`进入那个。尝试在 Where 之后添加`First()`或。`FirstOrDefault()`

# c - c崩溃有多严重？

> ID：640515
> 
> 赞同：7
> 
> 时间：2009-03-12T21:16:51.120
> 
> 标签：c, crash

我经常听说 C 可以惊人地崩溃。最近，当我希望返回一个字符串而不是返回小开心脸的函数时，我第一次尝到了这一点。从那以后，我在初始化指针和为数组分配内存时更加小心。尽管如此，我还是很难相信一个程序会崩溃得那么严重......

我想这将取决于程序的范围？我的意思是，如果处理你的粉丝的程序中的错误将快乐的面孔复制到内存中的某个重要空间......？

我的问题是，在壮观的 C 崩溃世界中有多少神话？我能举出一些应该避免的危险事情的具体例子吗？

z。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-12T21:23:14.583

![替代文字](https://imgs.xkcd.com/comics/compiler_complaint.png)

*   [http://xkcd.com/371/](http://xkcd.com/371/)
*   [http://blog.raamdev.com/category/technology/programming/cc](http://blog.raamdev.com/category/technology/programming/cc)
*   [http://en.wikipedia.org/wiki/Segmentation_fault](http://en.wikipedia.org/wiki/Segmentation_fault)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-03-12T21:21:58.657

我认为在虚拟内存之前的日子里，你可能会破坏其他进程的内存，这可能更糟糕，但现在可能发生的最糟糕的情况实际上只是让你自己的程序崩溃。通常通过来自错误指针的分段错误。

当然，这不包括通过滥用系统资源来搞砸事情——你可以用任何语言来做到这一点。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-12T21:30:46.343

当我学习 C++ 编程时，它是在运行系统 7 或 8 的 Mac 上，我不记得是哪个。无论如何，它没有受保护的虚拟内存，因此留下悬空指针或缓冲区溢出等许多错误都会导致整个计算机崩溃。我记得当 Apple 第一次宣布他们将在 Macworld 或其他地方创建一个保护内存空间的新操作系统时，他们展示了一个程序的源代码：

```
while (true)
  *(int *)i++ = 1; 
```

当他们运行程序时，只是程序终止了，而不是整个机器（它有一条消息，比如“你不需要重新启动计算机”），整个房间里满是开发人员显然爆发出掌声。无论如何，由于崩溃的严重性增加，显然没有受保护的内存确实使 C 或 C++ 编程变得非常困难。

如今，除非您正在编写在主管级别运行的东西，否则这并不是什么大不了的事，您没有能力使操作系统崩溃。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-03-12T21:23:12.587

发生在我身上的最糟糕的事情是内存损坏，它并没有立即导致崩溃，但过了一段时间......让它很难被发现......

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-03-12T21:37:48.090

操作系统可以防止当今最可怕的问题。我做过的最糟糕的事情是硬锁定机器（只需按住电源按钮重新启动）并打乱一些文件。

一切都取决于您访问的资源，真的。如果您正在编写文件，则目录结构可能会以某些方式纠缠不清，从而使系统实用程序感到困惑，但大多数问题已得到解决。如果你以 root 身份做某事，那么你肯定会弄得一团糟，因为更多的系统文件是可写的。如果您使用的是网络，则有很多东西可能会出现中度错误，但可能会占用过多的带宽。当然，几年的编程，你会看到各种不太可能发生的事情。

不过，在大多数情况下，尝试和玩耍是可以的。如今，这些系统具有足够的弹性，您不会弄得一团糟，难以摆脱。操作系统将每个程序保留在自己的内存中，除非您是管理员/root，否则不允许访问更改关键系统。您的花园品种悬空指针可能会打印出有趣的东西或使您的程序崩溃，但它不会破坏现代计算机。

来自另一条回复的评论：**“我正在使用 Nintendo DS 运行它们”**

好的，**这很重要！** （第一：很棒的想法！听起来很有趣。）就可能出现的问题而言，为这样的事情编码与大多数台式计算机的编码不同。简单看一下 libnds 的文档和一些关于 Nintendo DS 编程的教程，我发现没有操作系统可言。所以，我不知道你可以用一个流浪指针做多少，可能很多。可能是什么破坏性的东西。寻找以前为该平台做过编程的人可能是个好主意，看看他们要说什么。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-03-12T21:39:53.763

以下是 Henry Spencer 的“C 程序员十诫”的简短片段：

*   诫命 #2 - 你不能跟随 NULL 指针，因为混乱和疯狂在它的尽头等待着你。
*   很明显，这里的圣经被错误地抄录了，因为单词应该是“空指针”，以尽量减少空指针概念和宏 NULL （其中更多）之间的混淆。否则，意思很简单。空指针指向充满龙、恶魔、核心垃圾场和无数其他肮脏生物的区域，如果你打扰他们的睡眠，所有这些都乐于在你的程序中嬉戏。空指针不指向任何类型的 0，尽管一些亵渎神明的旧代码不虔诚地假设了这一点。

对于不熟悉 C 的人，我认为最好的 C 语言简明介绍是 Henry Spencer 的“ [C 程序员十诫（注释版）](http://www.lysator.liu.se/c/ten-commandments.html) ”。它的编写方式确实让读者了解了 C 的危险……同时又很有趣（这意味着读者实际上会更加关注）。

==========================

就个人而言...**当您进行桌面开发时，C 不会崩溃那么严重，**因为您拥有 seg-faulting 的奢侈。Seg-faults 是当操作系统看到你试图真正地 F' 事情并且它说“嘿！你不允许在那里”并停止该过程。

**当您进行嵌入式 C 开发时……那是当您得到真正壮观的疯狂东西时……即它们要求您在 99.9% 的时间里重新启动。**就像有一次代码以某种方式弄乱了我的调用堆栈...然后您正在执行一些随机的其他功能...然后 ISR 仍在运行...并且需要 2 周的时间来修复这种错误.

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-03-12T21:23:13.757

好吧，如果您正在编写内核代码，有时您可以覆盖系统关键内存位，例如中断向量、全局描述符表、进程表，从而产生各种有趣的东西！

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-03-12T21:26:01.893

C 本身不能崩溃任何东西。马虎的编程会使一切崩溃。

“快乐的面孔”表明您的代码损坏了内存。C 唯一与此有关的是您选择使用它的事实。（而且你的操作系统允许它发生的事实令人惊讶——你还在运行一个版本的 DOS 吗？）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-03-12T21:25:30.613

现在很难让 C 崩溃**那么**难（除非你正在编写 OS 内核或类似的东西）。

回到 DOS/Win95/Win98 时代，你可以让 C 程序**非常非常**糟糕。我以前经常得到这个：

每当我有一个危险的指针操作导致内存混乱时，我就会得到一个基于字符的屏幕，里面全是各种不同颜色的字符，其中一些还在闪烁！！！我猜这些操作在某种程度上与视频内存有关。

但是今天，由于进程在**安全**内核中运行，如果您的进程消失，您将得到最糟糕的结果。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-13T05:00:10.133

在受保护内存架构之前，操作系统使用的大部分跳转向量都存储在内存的零页中（地址从零开始）

所以写入零页中的内存位置——用空/坏指针很容易完成——会改变操作系统的跳转向量，导致各种奇怪的崩溃行为——从锁定的键盘和闪烁的充满垃圾的视频屏幕到硬盘驱动器闪灯狂潮、蓝屏死机、重启等。

[用汇编语言编码更有趣]

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-12T21:23:55.377

如果您的代码在远程现代操作系统上运行，则无法将快乐的面孔复制到内存中的随机点中。您可以随心所欲地崩溃，它只会导致您的进程终止。

最接近实际搞砸系统的方法是滥用处理器/内存/磁盘资源，或产生如此多的子进程以致操作系统耗尽 PID（如果它仍在使用 32 位值来存储这些）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-12T21:31:36.840

有一台计算机，Commodore PET 4032（又名“Fat 40”），如果您将错误的值插入内存的错误部分，实际上可能会永久烧毁视频芯片。你可以想象，如果那台机器上有一个 C 编译器，一个野指针实际上会对计算机造成无法弥补的物理损坏。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-12T23:24:10.550

回到 DOS 时代，我实际上重写了 bios 信息。只好找技术修了。我的第一台家用电脑 - 286。一两天后无法启动。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-03-13T04:24:12.807

在任何具有受保护内存的操作系统上，最糟糕的情况是您的进程崩溃。现在，如果您的进程恰好是内核或内核扩展的一部分，那么您显然可以使整个操作系统崩溃，但这是您能做的最糟糕的事情。

但是，实际上这与许多其他语言相同（例如，在 C 中引用空指针，在 java 中使用设置为空的对象引用，两者都会使您的进程崩溃）。

因此，我相信使用受保护的内存，C 不会比任何其他语言造成更多的损害（除非您的进程是操作系统的一部分；））

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-03-12T22:13:53.010

好吧，回到 DOS 时代，我设法覆盖了引导扇区的一部分 - 没有像重新启动以找到“未找到操作系统”或任何消息一样。

在那之后，你学会了非常非常小心地写入磁盘的艰难方法......

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-03-12T23:36:18.647

C 让您可以非常接近直接地处理机器。它的崩溃程度取决于机器的功能。

所以：在一个不错的现代操作系统中没有特殊权限的用户模式进程不会真正做那么多。但是你到处都有软件。想想控制火车制动系统的软件。当有人真正需要帮助时，想想运行紧急对讲机的软件。想想在繁忙的高速公路上运行标志的软件。想想运行导弹系统的软件。

这些天到处都有软件。很多都是用C写的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-03-13T04:12:22.307

回到我写 Win98 驱动程序的时候，BSOD 困扰着每个人。我记得我犯了以下错误

typedef 结构 _SOME_TAG_ {

```
 int nSomeVar;
    int nSomeMore;
    ... 
```

MYSTRUCT, *PMYSTRUCT;

.... PMYSTRUCT pMyStruct;

// 我使用这个结构而不分配任何内存 ;-) pMyStruct->nSomeVar = 0;

司机撞车太可怕了，但我们有一个来自 Numega 的 SoftICE，虽然它只是 10 年前.. 我​​觉得它就像很久以前

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-03-13T05:03:49.703

回到大学时，我的任务是创建一个多线程代理。

有时，代理没有响应页面拉取的任何资源。导致问题的代码：

一些存在溢出问题的代码，在文件处理程序附近使用了变量。在知道发生了什么之前，我发现移动文件处理程序声明“修复”问题真的很奇怪，哈哈。

附言。检查这个（不是在c中，而是一个好故事:)）：[http ://trixter.wordpress.com/2006/02/02/computing-myth-1-software-cannot-damage-hardware/](http://trixter.wordpress.com/2006/02/02/computing-myth-1-software-cannot-damage-hardware/)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-03-13T17:41:16.793

如果有问题的软件在 PC 上运行，它可能“只是”让您的计算机崩溃。

但是，如果它正在控制您汽车中发动机的运行——或者更糟糕的是，ABS——它不会只是软件崩溃……

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-03-17T16:36:21.340

崩溃并不是可能发生的最糟糕的事情。

我读到了一个旧的 Unix 文件压缩程序（你知道，比如 Zip），它没有检查 fclose 的返回值。是的， fclose 可以返回错误。到文件的输出通常是缓冲的，所以即使调用 fwrite 或 putc 似乎工作，并返回 OK，数据可能仍然在缓冲区中，等待写入。当调用 fclose 时，任何未写入的数据都会被刷新，这可能会失败，因为（例如）磁盘可能已满。而且由于压缩程序通常只是*因为*磁盘快满了才运行，所以这种情况经常发生。于是程序默默地截断了新的、压缩过的文件，原来的未压缩文件被删除了，而*第二年*左右当有人试图解压文件时，结果就不见了！

我认为这是一个很好的例子，说明为什么抛出异常可能是一件好事。

# asp.net - 如何使用户控件可用于多个项目？

> ID：640516
> 
> 赞同：3
> 
> 时间：2009-03-12T21:17:03.943
> 
> 标签：asp.net, user-controls

我在一个 ASP.NET 网站中有一组用户控件，我想共享到多个网站。但似乎我们无法使用 ascx 文件创建包含 UserControls 的类库。虽然 MSDN 建议构建一个 Web 控件，但我宁愿找到一种方法来共享现有控件，而不是破坏它们来创建新的 Web 控件。

有什么方法可以创建用户控件库吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-12T21:19:28.943

这是一种方法：

[创建和使用用户控制库。](http://webproject.scottgu.com/VisualBasic/UserControls/UserControls.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T21:21:09.563

你不能将它们编译成一个项目本身。您可以通过将文件链接到项目中来获得接近这一点的内容，因此该文件只有一个主版本，但每个项目也有自己的副本。您可以：

*   使用源代码管理共享功能拥有一个位置并将其共享到其他项目中
*   为控件创建一个项目，然后使用“添加现有项目”将它们链接到另一个项目，单击“添加”按钮旁边的小箭头，然后选择“添加为链接”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T21:50:30.353

您应该改用 Composite 控件。下面是 Web 用户控件和复合控件之间的比较：

[http://msdn.microsoft.com/en-us/library/aa719735(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa719735(VS.71).aspx)

# c++ - 在 C++ 中将字节序列重复到更大的缓冲区中的最简单方法

> ID：640518
> 
> 赞同：6
> 
> 时间：2009-03-12T21:17:25.393
> 
> 标签：c++, stl, boost

给定（在 C++ 中）

```
char * byte_sequence;
size_t byte_sequence_length;
char * buffer;
size_t N; 
```

假设`byte_sequence`和`byte_sequence_length`被初始化为任意长度的字节序列（及其长度），并被`buffer`初始化为指向`N * byte_sequence_length`字节，那么复制`byte_sequence`到`buffer` `N`时间的最简单方法是什么？STL/BOOST 中是否有任何东西已经做了这样的事情？

例如，如果序列是“abcd”，并且`N`是 3，那么`buffer`最终将包含“abcdabcdabcd”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-12T21:19:44.327

我可能会这样做：

```
for (int i=0; i < N; ++i)
    memcpy(buffer + i * byte_sequence_length, byte_sequence, byte_sequence_length); 
```

这假设您正在处理二进制数据并跟踪长度，而不是使用`'\0'`终止。

如果您希望这些是 c 字符串，则必须分配一个额外的字节并在`'\0'`a 末尾添加。给定一个 c 字符串和一个整数，你会想要这样做：

```
char *RepeatN(char *source, size_t n)
{
    assert(n >= 0 && source != NULL);            
    size_t length = strlen(source) - 1;
    char *buffer = new char[length*n + 1];
    for (int i=0; i < n; ++i)
        memcpy(buffer + i * length, source, length);
    buffer[n * length] = '\0';
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-12T21:19:40.847

**在避免指针运算的同时重复缓冲区：**

您可以使用 std::vector < char > 或 std::string 让事情变得更容易。这两个容器也可以保存二进制数据。

该解决方案具有以下优点：

*   您无需担心内存访问违规
*   您无需担心*缓冲区*的大小是否正确
*   您可以随时将序列附加到缓冲区，而无需手动重新分配

.

```
//Note this works even for binary data.
void appendSequenceToMyBuffer(std::string &sBuffer
       , const char *byte_sequence
       , int byte_sequence_length
       , int N)
{
  for(int i = 0; i < N; ++i)
      sBuffer.append(byte_sequence, byte_sequence_length);
}

//Note: buffer == sBuffer.c_str() 
```

* * *

**替代：对于使用 memcpy 的二进制数据：**

```
buffer = new char[byte_sequence_length*N];
for (int i=0; i < N; ++i)
  memcpy(buffer+i*byte_sequence_length, byte_sequence, byte_sequence_length); 
//...
delete[] buffer; 
```

* * *

**备用：对于使用 strcpy 以空字符结尾的字符串数据：**

```
buffer = new char[byte_sequence_length*N+1];
int byte_sequence_length = strlen(byte_sequence);
for (int i=0; i < N; ++i)
  strcpy(buffer+i*byte_sequence_length, byte_sequence, byte_sequence_length); 
//...
delete[] buffer; 
```

* * *

**备用：如果您使用单个值填充缓冲区：**

```
buffer = new char[N];
memset(buffer, byte_value, N);
//...
delete[] buffer; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-12T21:20:52.950

您可以使用 STL 算法生成：

[MSDN：生成](https://docs.microsoft.com/en-us/cpp/standard-library/algorithm-functions?view=vs-2019#generate)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-12T21:42:18.173

如果已知 N 是 2 的幂，您可以从缓冲区的第一部分复制到后续部分，每次都增加复制的数量：

```
assert((N > 0) && ((N & (N-1)) == 0));
memcpy(buffer, byte_sequence, byte_sequence_length);
for (size_t i = 1;  i < N;  i *= 2)
    memcpy(buffer + i * byte_sequence_length, buffer, i * byte_sequence_length); 
```

**编辑：当 N***不是*2 的幂时，扩展它以使其工作是微不足道的。这是一个改进的版本，它消除了对 N 的所有约束，并用一段时间替换了奇数 for 语句。

```
if (N > 0)
    memcpy(buffer, byte_sequence, byte_sequence_length);
size_t copied = 1;
while (copied < N)
{
    size_t tocopy = min(copied, N - copied);
    memcpy(buffer + copied * byte_sequence_length, buffer, tocopy * byte_sequence_length);
    copied += tocopy;
} 
```

# asp.net - 如何从 JavaScript 触发 ASP.NET 自定义验证器？

> ID：640520
> 
> 赞同：5
> 
> 时间：2009-03-12T21:17:39.353
> 
> 标签：asp.net, javascript

我想用javascript编写一个函数，每次我在网络表单中调用它时，它都会在同一个网络表单中启动一个特定的验证器。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2011-08-19T10:13:44.887

```
<asp:RequiredFieldValidator ID="passwordRequiredFieldValidator" runat="server" 
    ErrorMessage="* Password Required!"
    EnableClientScript="true" CssClass="errorText" 
    ControlToValidate="passwordTextBox"> 
</asp:RequiredFieldValidator> 
```

要触发此验证器，请使用：

```
window.ValidatorValidate(window.passwordRequiredFieldValidator); 
```

进一步的例子：

```
function ValidatePassword() {
    window.ValidatorValidate(window.passwordRequiredFieldValidator);
    var valid = window.passwordRequiredFieldValidator.isvalid;
    alert(valid);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-12T21:24:06.063

```
if (Page_ClientValidate('Validation Group'))
{
    //Your valid
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T21:32:02.860

“CustomValidator”控件允许您使用 javascript 来验证您的表单。如果您这样做，您还应该在服务器上进行相同的验证，以便用户不能仅仅禁用 javascript 来绕过验证错误。

# asp.net - Asp.net 程序集引用错误

> ID：640522
> 
> 赞同：0
> 
> 时间：2009-03-12T21:18:12.160
> 
> 标签：asp.net, visual-studio-2008, reference

我正在编写的 Web 应用程序会引发此编译时错误

错误 1 ​​名称空间“ATS.System”中不存在类型或名称空间名称“Web”（您是否缺少程序集引用？）

对于程序集中的每个代码文件，命名空间都导入到每个文件（System 和 System.Web）中

我还在 VS 的 References 目录中添加了引用（对两者）

我不知道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T21:22:56.533

我怀疑问题在于您有一个名为的名称空间`ATS.System`- 在某些情况下这会使事情变得混乱。如果*可能*的话，将命名空间重命名为其他名称。

这是一些显示相同问题的示例：

```
// Foo.cs
namespace ATS.System
{
    class Foo {}
}

// Bar.cs
namespace ATS
{
    using System.Collections.Generic;

    class Bar {}
} 
```

如果将 using 指令移出命名空间声明，即将第二个文件更改为：

```
// Bar.cs
using System.Collections.Generic;
namespace ATS
{        
    class Bar {}
} 
```

那么没关系 - 但我想知道 ASP.NET 的自动生成代码是否将 using 指令放在命名空间声明中:( 摆脱`ATS.System`肯定会让它更容易前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T21:28:52.587

您有一个与命名空间“System”冲突的命名空间“ATS.System”。当编译器看到“System.Web”时，它认为“System”指的是“ATS.System”命名空间。

如果可能，重命名命名`ATS.System`空间，或为其使用别名。就像是：

```
using AtsSys = ATS.System; 
```

或者：

```
Imports AtsSys = ATS.System 
```

这当然意味着您必须`AtsSys.`在该命名空间中使用的每个类名之前加上。

# sql - MySQL查询问题

> ID：640538
> 
> 赞同：2
> 
> 时间：2009-03-12T21:23:00.560
> 
> 标签：sql, mysql, database

如果我有一个带有假设列的表`foo`和`bar`. bar 中可能有 50-60 个不同的值。我的目标是选择最多 5 行来表示 6 个独特的条形图。因此，如果从 50 到 60 个中选出的 6 个唯一条每个都恰好有至少 5 行数据，那么我们总共将有 30 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T21:42:54.380

你真正想做的是：

```
SELECT *
FROM `sometable`
WHERE `bar` IN (
    SELECT DISTINCT `bar`
    FROM `sometable`
    ORDER BY RAND()
    LIMIT 6
) 
```

不幸的是，你很可能会得到这个：

```
ERROR 1235 (42000): This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' 
```

可能您的版本会更加合作。否则，您可能需要将其作为两个查询进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T21:40:30.923

自从我使用 MySQL 以来已经有一段时间了（我最近一直在使用 MSSQL），但我想到了两件事：

*   某种自我加入
*   [光标](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)_

自加入可能看起来像

```
SELECT DISTINCT bar FROM table AS t1 LIMIT 5
   JOIN table AS t2 ON t1.foo = t2.foo 
```

同样，它已经有一段时间了，所以这可能不是有效的 MySQL。此外，你会得到5 个小节的*所有*foo 的回报，所以你必须弄清楚如何削减它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-15T09:50:43.110

一个简单的解决方案，需要 7 个查询：

```
SELECT distinct bar FROM sometable ORDER BY rand() LIMIT 6 
```

然后，对于上面的 6 个柱值中的每一个，执行此操作，用 {$bar} 替换值，当然：

```
SELECT foo,bar FROM sometable WHERE bar='{$bar}' ORDER BY rand() LIMIT 5 
```

使用“ORDER BY rand()”时要小心，因为它可能会导致 MySQL 从您的表中获取大量行，并为所有这些行计算 rand() 函数，然后对它们进行排序。如果您有一张大桌子，这可能需要很长时间。

如果确实需要很长时间，那么对于第一个查询，您可以删除 ORDER BY 和 LIMIT 子句，并在查询完成后在您的程序代码中选择 6 个随机值。

对于第二个查询，您可以将其拆分为两个步骤：

```
SELECT count(*) FROM sometable WHERE bar='{$bar}' 
```

然后，在您的程序代码中，您知道有多少项目，因此您可以随机选择要查看的项目，并使用 OFFSET 和 LIMIT：

```
SELECT foo,bar FROM sometable WHERE bar='{$bar}' LIMIT 1 OFFSET {$offset} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:39:58.850

我认为最简单的方法是使用 UNION。

```
SELECT * FROM table WHERE bar = 'a' LIMIT 5 UNION SELECT * FROM table WHERE bar='b' UNION SEL ....... you get the jist, i hope 
```

编辑：不确定这是否是您需要的-您没有说此查询是否还需要以某种方式确定条形？或者如果他们通过了？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-12T21:28:37.050

这是从某个程序中调用的吗？

如果是这样，也许您可​​以只查找条形图，然后将它们随机发送到 select 语句中。

这样，您的选择可以简单地是：从表中选择*（？

# javascript - 对于以下场景，我有哪些选择可以使用 javascript 和/或 jQuery 获取所有必要的数据？

> ID：640551
> 
> 赞同：0
> 
> 时间：2009-03-12T21:24:59.617
> 
> 标签：javascript, jquery

我不确定如何最好地表达这一点，所以我会试一试，并希望在涉及到我的时候对其进行修改。

使用 javascript/jQuery，假设我想从单击的元素获取一些数据到函数进行处理。几个选项：

选项1：

```
$('.classOfInterest').click(function() {
      // How can I get 'a' and 'b'?
    var c = $(this).hasClass('cExists'); 
}); 
<a class="cExists classOfInterest" /> 
```

选项 2：

```
function processClick(string a, string b) {
    // How can I get a reference to the calling element, similar to $(this) in the event handler?
    var c;  // here I want to determine whether the calling element has class 'cExists'    
}
<a class="cExists" href="javascript:processClick('a', 'b')" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T21:28:31.387

选项 1 是完成您想要做的事情的更 jQuery-ish 方式。您可以通过使它们成为链接的属性来获得 a 和 b：

```
 $('.classOfInterest').click(function() {
       // How can I get 'a' and 'b'?
     var c = $(this).hasClass('cExists'); 
     alert(this.attr('a') + ' ' + this. attr('b'));
 }); 
 <a class="cExists classOfInterest" a="hi" b="mom" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T21:36:07.983

JS：

```
function processClick(id, a, b) {
  $(id).click(function() {
    var c = $(this).hasClass('cExists'); 
    alert(a + ' ' + b);
  }); 
} 
```

HTML：

```
<script type="text/javascript">processClick("foo123", "a", "b")</script>
<a class="cExists" id="foo123" href="#"> 
```

如果要避免 html 中的内联 js，另一种选择是执行以下操作。
JS：

```
$(function() {
  $('cExists').click(function() {
    var c = $(this).hasClass('cExists');
    var a = $(this).attr('title').split(":")[0];
    var b = $(this).attr('title').split(":")[1];
    alert(a + ' ' + b);
  }); 
}); 
```

HTML：

```
<a class="cExists" href="#" title="foo:bar"> 
```

但是通过这种方式，您将在元素标题上公开**a**和**b变量。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T22:03:03.100

如果您正在寻找符合标准的解决方案，您可以考虑使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，例如

```
<a href="data:text/csv,a-data,b-data">foo</a> 
```

要获取数据，请读出`href`属性并用于`split()`提取逗号分隔值。请记住通过`preventDefault()`或`return false`在处理单击事件时阻止默认操作 - 否则，浏览器将尝试下载数据或失败。

# .net - 有没有办法只将 .NET 程序集的特权访问权限授予另一个程序集？

> ID：640552
> 
> 赞同：2
> 
> 时间：2009-03-12T21:25:16.793
> 
> 标签：.net, clr, accessibility

我有一个类库程序集和一些测试代码。因为测试代码需要查看类的内部结构，它需要成为程序集的一部分，并且因为我不想让它自己运行，所以它需要有一些公共的东西，以便不同的程序集可以调用它。这最终会添加一些不应该出现在主程序集中的代码。

我想要的是将所有测试代码放在另一个程序集中，并以某种方式授予它访问类内部的权限。我不需要它成为最终产品的一部分，就像调试/私有构建的一部分一样。

那可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-12T21:26:28.180

自由使用`internal`访问修饰符并将[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性添加到程序集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T21:27:15.930

你想要[System.Runtime.CompilerServices.InternalsVisibleTo()](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

您还可以使用反射来访问内部/私有成员。这就是 MSTest 的做法。

# macos - 检查基本的未加密 UDIF DMG 文件的内容

> ID：640557
> 
> 赞同：1
> 
> 时间：2009-03-12T21:26:59.347
> 
> 标签：macos, file-format, dmg

如果我使用系统调用挂载 DMG 文件`hdiutil`并且我的应用程序意外退出，则 DMG 仍然挂载，但因为我使用 私下挂载它`-nobrowse`，它不会显示在 Finder 中。如果我的应用程序意外退出，有没有办法使用一些足够聪明的框架或 API 来安装它？

基本上，我正在寻找一种无需安装即可从 DMG 中读取文件的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T21:30:04.270

我认为您最好的选择是在退出之前尝试捕获异常或信号，并在您的异常或信号处理程序代码中自行卸载 DMG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-15T01:02:55.420

您可以使用[libdmg](http://github.com/planetbeing/libdmg-hfsplus/tree/master)直接读取 dmg 而不是安装它....尽管它显然不受支持。

# c# - C#/.NET 中远程 Portlet 的 Web 服务——选项？

> ID：640560
> 
> 赞同：4
> 
> 时间：2009-03-12T21:27:45.507
> 
> 标签：c#, .net, asp.net, wcf, wsrp

最近，我通过一个新概念扩展了我的思维：[远程 Portlets 的 Web 服务](http://en.wikipedia.org/wiki/Web_Services_for_Remote_Portlets)，或 WSRP。我是在我们考虑在工作中购买的基于 Java 的门户网站上的一次演示中了解到的；我们是一家 .NET 商店，而 WSRP 将是我们扩展此门户的方式。

尽管我无法控制是否购买产品的最终决定，但我可以提供有关构建符合 WSRP 的 portlet 的难度的意见。不幸的是，我最近对该主题的查询几乎为零。

所以我问你，SO 社区，以下问题：有哪些库或框架可用于在 C#/.NET 中构建符合 WSRP 的 portlet？一般来说，使用 WSRP 有哪些优点和缺点？

因为这里没有正确答案，所以我将把它作为一个社区 wiki 帖子。

到目前为止，我只发现了以下内容：

*   [Microsoft的用于 Sharepoint 的 WSRP 工具包](http://blogs.msdn.com/sharepoint/archive/2008/12/05/announcing-the-wsrp-toolkit-for-sharepoint.aspx)（但需要 Sharepoint）。
*   [WSRP 门户和 WSRP .NET 框架](http://www.netunitysoftware.com/)由 NetUnity 提供。

鉴于 WSRP 位于 SOAP 之上，这似乎是 WCF 绑定和通道的完美候选者，但我在任何地方都看不到这个主题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-28T18:48:40.247

WSRP 非常逆势。到目前为止，世界已经看到数据模型和表示模型之间的紧密耦合是次优的。RSS、REST、MVC 和 Web 服务的成功证明了这一点。尽管名称中有 WS，但 WSRP 与 Web 服务的核心原则背道而驰。WSRP 规范忽略了将数据和表示分开的合理建议，并将它们紧密结合在一起。

WSRP 承诺在 UI 级别进行集成。这似乎是要解决的错误问题。

让我感到困惑的是，这东西已经活了这么久。
它试图解决的问题往往不是*应该*解决的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-13T01:24:26.860

如果您仔细阅读 WSRP 规范，您会发现它是 Java Portlet 规范的远程版本（如果我拼写正确的话）。这意味着它对于集成 Java Portlet 很有用。其他任何东西都必须看起来像一个 Java Portlet，它不是很通用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-26T02:58:44.507

我认为 NetUnit 的最后一个版本是“这个最新版本增加了对 Visual Studio 2005 和 .NET 2.0 的支持”这一事实可以推断出它的受欢迎程度/采用率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-25T19:09:37.300

我不得不同意 Cheeso 的观点。将 UI 与数据集成仅服务于 portlet 消费者，并为 portlet 生产者增加了一个大的、不必要的、有风险的层。我们的 .NET 商店最近*被迫*考虑 WSRP，我发现缺乏支持和经验。我见过讨论的最好的以 MS 为中心的方法在[这里](http://blogs.msdn.com/mikefitz/archive/2006/02/06/525536.aspx)。但我还没有找到任何具体的 WCF 实现/支持。任何线索都非常感谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-27T05:35:38.477

WSRP 本质上是一个portal-to-portlet Web 服务标准。门户和 portlet 之间交换的主要数据是什么？它是标记，主要是因为大多数门户网站都使用 Web UI。与 UI 相比，它不是纯数据的整个想法是没有意义的。它旨在成为用于 portlet 发现、元数据、标记、交互、缓存、portlet 到 portlet 通信等的 Web 服务。即使不是 WSRP，门户也是如此。然而，WSRP 是一个开放的、跨平台的标准。

什么是仅集成来自其自己的产品和/或平台的 portlet 的门户？拥有基于 Java 的 PeopleSoft HR 并希望为您的员工提供从 SharePoint 访问其 portlet 的权限？祝你好运。为什么这不能成为大多数企业软件可以实现的场景？是的，我意识到这是与 UI 相关的集成。这是我使用门户网站的主要原因之一。我并不希望 PeopleSoft 在“纯”数据级别与 SharePoint 集成，并且不知何故，员工福利 Web 部件会神奇地在 SharePoint 中弹出以供使用。但是，如果 portlet 到 portlet 的集成基于 WSRP，那么这就是我所期望的。

WSRP 虽然不完美，但在我看来是一个优越的解决方案。除了在门户中轻松集成 portlet 之外，它还将门户与应用程序分开。无需将二进制文件部署到门户服务器，甚至无需在同一台服务器上运行。这是有道理的。永远不要在与门户服务器相同的服务器上运行应用程序：两者都不会升级。我得出的结论是，将应用程序二进制文件放在与门户服务器相同的服务器上是很疯狂的。“请将此应用程序部署到门户服务器并让它影响安全性、稳定性、性能以及介于两者之间的所有内容，我希望在升级应用程序时创建尽可能多的依赖项并关闭整个门户服务器”。这是一个依赖的噩梦。

当只有选定数量的 portlet 受到最多访问时，您是否需要对整个门户平台进行负载平衡？门户供应商希望您这么想。很多时候，门户网站只是在等待 portlet 完成处理。使用 WSRP，您可以灵活地独立于门户平台对 portlet 进行负载平衡。它总是分解为几个受影响最大的 portlet。为什么不只对那些portlet 进行负载平衡呢？因此，无需在 80 个 CPU 上对门户进行不必要的负载平衡，您可以在 10 个 CPU 上对这几个 portlet 进行负载平衡。WSRP 也非常适合云计算。

WSRP 是一个门户到portlet 的标准。如果您想编写一个可在多个门户网站上工作并可能跨平台工作的 portlet，那么 WSRP 就是它。如果您正在考虑远程集成第三方 portlet，WSRP 就是它。这是唯一的标准。但是，与其他专有的本地门户到 Portlet 接口相比，它也有一些显着的优势，也应该考虑这些优势。

# c# - 参数无效

> ID：640565
> 
> 赞同：0
> 
> 时间：2009-03-12T21:28:41.637
> 
> 标签：c#, .net, winforms, picturebox

当我粘贴复制的图片框时，我得到参数无效。

被复制的 Picturebox 有一个显示得很好的有效图像。例外来自表面设计器的撤消引擎。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T21:35:31.887

这个论坛[http://www.codeguru.com/forum/showthread.php?t=445609](http://www.codeguru.com/forum/showthread.php?t=445609)遇到了类似的问题。这应该会有所帮助。如果不是，那么这个场景表明这个答案适用于他们在这个网站上的那个确切问题：http: [//social.msdn.microsoft.com/forums/en-US/winforms/thread/224ee2d0-4514-46b9-a6cd -073579b7e74e/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/224ee2d0-4514-46b9-a6cd-073579b7e74e/)

它说 DrawToBitmap 使用的方法是 CopyFromScreen。将网页从屏幕复制到位图肯定会出现一些问题，但是如果您使用受支持的 CopyFromScreen，则不应遇到会破坏代码的更改。

# ide - MSIL 的 IDE

> ID：640583
> 
> 赞同：6
> 
> 时间：2009-03-12T21:35:04.897
> 
> 标签：ide, cil, ilide

SO上有很多关于MSIL的问题，但没有一个可以直接回答这个问题。

我一直在使用[Textpad](http://www.textpad.com/)，它确实有 MSIL 的语法定义文件，然后在命令提示符窗口中使用 ILASM。

我确实找到了对 ILIDE 的引用，但链接已损坏。

是否有适用于 MSIL 的 Visual Studio/Eclipse 的 IDE 或附加组件/插件，允许语法高亮、智能感知、代码完成、调试等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-10-08T05:37:00.573

使用[MonoDevelop](http://www.monodevelop.com/)

您可以专门构建 MSIL 项目。它对这些问题非常有用，您也可以在 Windows 和 Linux 中使用它。还有什么比这更好的呢？:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-03-18T03:13:40.297

我为 Visual Studio 2010 制作了一个扩展，它支持 IL 文件 (.il) 的语法高亮显示，并包括对 C#、F# 和 Visual Basic 具有完全调试支持的项目，这些项目支持直接嵌入和调用 IL 代码。

[IL 支持扩展](http://visualstudiogallery.msdn.microsoft.com/44034a7b-143d-4b51-b7bc-99aa656ba137 "IL 支持扩展")

享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T16:58:10.993

我有完全相同的问题！

我最终找到了 ilide ：

[http://nida.se/ilide/](http://nida.se/ilide/)

（注意：奇怪的是，一些指向 ilide 的链接已损坏，其中一些甚至提到了先前已损坏的链接，但随后提供了一个已损坏的链接。我能够从上面的链接下载并成功安装它）。

进一步： http: [//sourceforge.net/project/showfiles.php ?group_id=112895](http://sourceforge.net/project/showfiles.php?group_id=112895)

似乎是一个非常好的调试器。

干杯，ph

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T21:40:04.090

我相信你可以在[#develop IDE 中做到这一点。](http://www.icsharpcode.net/OpenSource/SD/)

虽然没有智能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-15T08:36:57.587

[xacc.ide](http://sourceforge.net/projects/xacc)为 MSIL 和另外 20 种奇怪的 .NET 语言提供语法高亮显示。

[在此处](http://xacc.wordpress.com/screenshots/)查看一些屏幕截图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T21:50:42.893

IIRC，如果您使用 /debug 组装，Visual Studio 将为您提供调试。

我认为 MS 有一些 VS 插件的演示或示例，对 IL 有一些帮助。我不确定它的名字是什么，或者它是否被释放。

# php - 邮件程序错误：SMTP 错误：以下 SMTP 错误：数据未接受

> ID：640598
> 
> 赞同：4
> 
> 时间：2009-03-12T21:38:14.047
> 
> 标签：php

以下代码给出了消息

```
Mailer Error: SMTP Error: The following SMTP Error: Data not accepted. But when I replace $EmailAdd with a a@yahoo.com. The mail was sent. 
```

我的代码有什么问题？我是 php 的新手，尤其是在处理邮件功能方面。

```
$sql1 = "SELECT Email_Address FROM participantable where IDno=$studId";
$result1 = mysql_query($sql1);
while ($row1 = mysql_fetch_assoc($result1)){
    $EmailADD = $row1["Email_Address"];
}

//error_reporting(E_ALL);
error_reporting(E_STRICT);
date_default_timezone_set('America/Toronto');

include("class.phpmailer.php");
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();
$body             = $mail->getFile('contents.html');
$body             = eregi_replace("[\]",'',$body);

$mail->IsSMTP();
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port for the GMAIL server
$mail->Username   = "jsbadiola@gmail.com";  // GMAIL username
$mail->Password   = "********";            // GMAIL password
$mail->AddReplyTo("jsbadiola@gmail.com","Lord Skyhawk");
$mail->From       = "jsbadiola@gmail.com";
$mail->FromName   = "Update";
$mail->Subject    = "PHPMailer Test Subject via gmail";
$mail->Body       = "Hi,<br>This is the HTML BODY<br>";                      //HTML Body
$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
$mail->WordWrap   = 50; // set word wrap
$mail->MsgHTML($body);
$mail->AddAddress($EmailADD, "Agta ka");
$mail->AddAttachment("images/phpmailer.gif");             // attachment
$mail->IsHTML(true); // send as HTML

if(!$mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
} else {
    $status = "Successfully Save!";
    header("location: User_retsched.php?IDno=$studId&status=$status&Lname=$Lname&Fname=$Fname&Course=$Course&Year=$Year");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-14T22:40:17.967

大多数情况下，我看到此消息无论如何都会成功发送电子邮件，但并非总是如此。要调试，请设置：

```
$mail->SMTPDebug = true; 
```

您可以回显调试消息或使用以下命令记录它们[`error_log()`](http://php.net/error_log)：

```
// 'echo' or 'error_log'
$mail->Debugoutput = 'echo'; 
```

特别是在负载很重的服务器上，一个可能的候选者是 SMTP 超时：

```
// default is 10
$mail->Timeout = 60; 
```

`class.smtp.php`还有一个`Timelimit`用于从服务器读取的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-09-08T01:17:47.207

如果您没有超过 Google 垃圾邮件执法的每日发送限制，它也会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-13T04:56:12.497

检查您在脚本中对数据库输出和变量值的查询。确保它返回 $EmailADD 的所需值。

做一个 var_dump($EmailADD, true);

或尝试在某处回显该查询的输出。如果您实际上从该查询中收到电子邮件值，我不明白为什么它不应该工作，特别是当您提到直接分配值时；没有sql查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:47:15.633

尝试不同的 SMTP 服务器？看看有没有效果？

或者只是不使用 smtp 服务器，大多数使用 PHP 的服务器也有 sendmail/postfix，因此可以自己中继电子邮件。

删除这个位...

```
$mail->IsSMTP();

$mail->SMTPAuth   = true;                  // enable SMTP authentication

$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier

$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server

$mail->Port       = 465;                   // set the SMTP port for the GMAIL server

$mail->Username   = "jsbadiola@gmail.com";  // GMAIL username

$mail->Password   = "alucar";            // GMAIL password 
```

# c# - 将 MVC 应用程序作为子应用程序运行？

> ID：640603
> 
> 赞同：5
> 
> 时间：2009-03-12T21:39:39.113
> 
> 标签：c#, .net, asp.net, asp.net-mvc, iis-7

我正在尝试创建一个 MVC 应用程序作为我的标准 Asp.Net Web 应用程序的子应用程序。这两个项目都在同一个解决方案中。虽然父应用程序似乎运行良好，但我无法让子应用程序工作。在对我的两个 web.configs 进行一些按摩后，我能够让 Asp.Net 运行时接受配置，但是我无法浏览到 MVC 应用程序中的任何页面/控制器，包括 sub 的根目录-应用程序（“ [http://RootSite/SubApplicationName/](http://RootSite/SubApplicationName/) ”）。我不断得到404。

实际上，我在访问 URL“ [http://RootSite/SubApplicationName/Home/Index/](http://RootSite/SubApplicationName/Home/Index/) ”时确实得到了响应。它将我重定向到该文件夹​​中的 index.aspx，并引发此错误：

> 找不到视图“索引”或其主视图。搜索了以下位置：
> ~/Views/Home/Index.aspx
> ~/Views/Home/Index.ascx
> ~/Views/Shared/Index.aspx
> ~/Views/Shared/Index.ascx

IIS (7) 中的子应用程序设置相当简单：它设置为与父应用程序在同一应用程序池中运行，父应用程序以集成模式运行 Asp.Net 2.0。

我的怀疑是我在 web.configs 中有一些东西把它扔掉了。有没有关于 HTTPModules 或 URL 授权模块等的事情，我应该确认没有妨碍 MVC？

另外，在 global.asax.cs 文件中，默认路由应该不同吗？默认情况下，传递给 routes.MapRoute 的 url 参数为：

```
"{controller}/{action}/{id}" 
```

是否应该像这样在子应用程序的名称前面加上？

```
"SubApplicationName/{controller}/{action}/{id}" 
```

我尝试了这样的改变，但它并没有解决问题。

任何想法都非常感谢。此外，关于将 MVC Web 应用程序设置为子应用程序的一般信息也很棒。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-14T12:00:49.267

确保您没有在 Views 目录的名称中犯任何拼写错误。我收到了同样的错误消息，经过 30 分钟的挠头后，我意识到我拼错了我的一个视图的文件夹名称。IDE 没有以任何有意义的方式选择它（即，如果它明确告诉我我引用的视图的路径不正确，那就太好了——“未找到”可能意味着一些不同的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T21:51:36.853

我做了类似的事情，但不一样，我必须从单独的 dll 加载视图。就我而言，它是一个类库，而不是一个不同的网络应用程序，但据我所知，它应该可以正常工作。

您要做的第一件事是创建一个 VirtualPath Provider 来告诉路由引擎如何在子应用程序视图中查找您的内容。可以在此处找到有关如何执行此操作的很好的解释：

[http://www.wynia.org/wordpress/2008/12/05/aspnet-mvc-plugins/](http://www.wynia.org/wordpress/2008/12/05/aspnet-mvc-plugins/)

我相信这会让你开始；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:43:44.373

子应用程序不直接适用于 MVC Web 应用程序。你必须在 global.asax 中写很多被黑的代码。使用子域而不是子应用程序。

# c# - C# Struct 使用技巧？

> ID：640613
> 
> 赞同：8
> 
> 时间：2009-03-12T21:42:12.820
> 
> 标签：c#, data-structures

我非常喜欢使用结构。

那么在阅读了这篇[文章](http://dotnetperls.com/Content/Struct-Examples.aspx)之后，我还有什么其他的顾虑要反对一直使用它们吗？

### 也可以看看：

> *   [我什么时候应该使用结构而不是类？](https://stackoverflow.com/questions/85553/when-should-i-use-a-struct-instead-of-a-class)
> *   [何时在 C# 中使用结构？](https://stackoverflow.com/questions/521298/when-to-use-struct-in-c)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-12T22:04:01.223

我几乎*从不*定义自定义结构。IMO，周围没有那么多自然值类型。

特别是，在定义可变结构之前，我会非常*非常*仔细地考虑，特别是如果它通过接口实现发生变异。可变结构的行为方式完全出乎人们的意料，导致代码难以理解。

我认为值得一读“[开发类库的设计指南](http://msdn.microsoft.com/en-us/library/ms229042.aspx)”中的“[类和结构之间的选择](http://msdn.microsoft.com/en-us/library/ms229017.aspx)” 。

尤其：

> 除非类型具有以下所有特征，否则不要定义结构：
> 
> *   它在逻辑上表示单个值，类似于原始类型（整数、双精度等）。
>     
>     
> *   它的实例大小小于 16 字节。
>     
>     
> *   它是不可变的。
>     
>     
> *   它不必经常装箱。

你真的经常开发具有所有这些特征的类型吗？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-12T22:04:19.850

您应该对结构进行以下考虑：

*   结构应该是不可变的（可变结构不直观且不可预测）
*   结构*总是*有一个无法更改的默认（公共无参数）构造函数
*   结构大小不应超过 16 个字节
*   应该重写`Equals`and方法以获得更好的性能`GetHashCode`
*   建议实现`IEquatable<T>`接口
*   还建议重新定义 and`==`和运算符`!=`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-12T21:46:11.767

它们不像类那样适合面向对象的编程范式。它们适用于小型数据结构，但我将类用于除此之外的任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:46:24.073

我认为结构的主要目的 - 只保留变量类型。如果您将某些类保留在结构中-您就错了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T21:56:51.367

结构的使用应仅限于您真正需要的只是一个小型数据结构。（如您所读）。我只会将它们真正用于最小的数据结构，例如坐标、偏移量，有时还用于图形。

在许多方面，您可以将 C# 中的结构视为按比例缩小的类。它们与类基本相同，但更多地是为您只想将一些数据组合在一起的情况而设计的。它们在以下方面与类不同： **要记住的一些事项**

*   结构是值类型，而不是引用类型。这意味着它们要么存储在堆栈中，要么存储在行内（如果它们是存储在堆上的另一个对象的一部分），并且具有与简单数据类型相同的生命周期限制。
*   结构不支持继承。
*   构造函数对结构的工作方式存在一些差异。特别是，编译器总是提供一个默认的无参数构造函数，你不能替换它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T21:58:50.753

问自己以下有关使用结构建模的数据集的问题：

*   它可能需要任何获取/设置逻辑吗？
*   它可能需要存储任何数据特有的逻辑吗？
*   它可能需要继承另一组数据吗？
*   另一组数据可能需要继承这一组数据吗？

我认为，如果您可以对所有这些问题真诚地回答“不”，那么没有充分的理由不使用结构。我认为人们在结构足够好的某些情况下使用静态子类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T22:08:46.940

类比结构更容易正确实现。如果你错误地实现了一个结构，它可能会给你一些意想不到的错误。

结构不应大于 16 字节，否则您将失去大部分性能优势。

结构旨在成为一种值类型，表示某种类型的单个实体。

结构应该是不可变的。这意味着您永远不会更改结构中的任何一个属性。如果您想要一个不同的结构值，您可以创建一个新值。

# c# - 取消异步存储过程

> ID：640629
> 
> 赞同：0
> 
> 时间：2009-03-12T21:48:15.427
> 
> 标签：c#, .net, ado.net, asynchronous

我正在运行一个用户可以取消的长时间运行的存储过程。我正在使用 Backgroundworker 组件以及 ado.net 的 BeginExecuteReader 方法

一切似乎工作正常，但即使我取消存储过程，数据库仍在运行过程

有没有办法取消数据库服务器本身的实际作业？我可以看到我们可以使用 kill 命令，但这需要作业 ID。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T21:52:17.383

[SqlCommand.Cancel](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.cancel.aspx)

# c# - 在 Windows 窗体上使用 WPF 会更好吗？

> ID：640633
> 
> 赞同：21
> 
> 时间：2009-03-12T21:49:05.037
> 
> 标签：c#, .net, wpf, winforms, user-interface

对于一个全新的应用程序，使用 WPF 是否比 Windows 窗体更好？我以前使用过 Windows 窗体，但 WPF 不多。据我所知，WPF 是 Windows 窗体的继承者，对吧？

该应用程序将托管具有大量自定义控件的DirectX Windows（不是 WPF 3D，而是[托管 DirectX](http://en.wikipedia.org/wiki/Managed_DirectX)和[SlimDX ）。](http://en.wikipedia.org/wiki/SlimDX)

EDIT：应用是3D相关的应用，编辑器，比如[modo](http://en.wikipedia.org/wiki/Modo_%28software%29)：

![使用 3D 绘画程序 modo 创建的图像。](https://i.stack.imgur.com/l6Gk3.jpg)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-12T22:00:15.447

我们大约在 9 个月前处理过这个问题。我们决定使用 WPF，到目前为止，我们对这个决定感到满意。是的，有一个学习曲线。它相当可观，尤其是来自 WinForms，你有很多东西要学。我还建议您访问设计器，否则您的应用程序可能看起来有点破旧。还要为一些 WPF 陷阱做好准备，这些陷阱会让您花费数小时挠头说“为什么这么难”。

但 WPF 领先一步。数据绑定、模板和对您希望窗口外观的完全控制使您认为 WinForms 原本应该是这样的。

哦，是的，并准备为一些缺少的控件支付几美元。缺少一些东西，例如日期选择器和树控件上的复选框（您实际上可以将其模板化，但在这方面它不像 winforms 那样简单）。谢天谢地，3.5 SP1 现在包括一个网格控件。

我确定我还错过了很多，但这就是我能想到的。

祝你好运！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2011-06-12T03:46:39.060

我知道这是一个旧帖子，但我认为这仍然是一个有效的问题。

我在我工作的第一家公司使用了 3 年的 WinForms。那里有一些非常优秀的程序员，他们找到了一些非常聪明的方法来做一些非常酷的事情。WinForms 经受住了时间的考验。它是一个坚实、可靠和高效的平台。许多人和许多大大小小的公司多年来一直在使用 WinForms，而且这项技术已经一次又一次地证明了自己。即使你是微软，这样的惯性也很难对抗。

尽管如此，WPF 绝对是未来。微软通过使用它制作 Visual Studio 2010 和 Expression Blend 等产品来明确这一点。（在内部项目中使用 WPF 时，Microsoft 被迫修复了许多问题，例如字体渲染和速度问题，这些问题最初阻止人们采用它。Visual Studio 2010 表明 WPF 早已准备好投入生产。

那么，用 WinForms 或 WPF 编写程序更好吗？答案是这样的：WPF。我这么说有两个原因。首先，因为微软在内部支持它，我们可以假设它会存在很长时间。微软已经向我们展示了它是下一个选择的工具，这让我想到了下一个观点：它已经变得优于 WinForms（我曾与一些人说过不同意，但这是事实，并且每天都变得越来越明显） . WPF 具有许多 WinForms 将（可能）永远不会提供的功能，例如集成支持惊人的数据绑定和基于时间线的动画，可以轻松为您的应用程序制作令人惊叹的主题，并且会让设计师乞求做出切换。WPF 的内容比评论中所能描述的要多得多，但这对我来说是两个重要的:)

话虽如此，我知道您在 WPF 中可以做的任何事情都不能在 WinForms 中做。如果您非常想做的话，您可以用任何语言做任何事情。关键是，WinForm 会让你在谷歌上搜索其他人是如何做一些很酷的事情的，而 WPF 提供了对 Microsoft 认为是 Windows 未来的所有功能的内置支持，并将它们放在你的指尖。

随着时间的推移，人们将习惯于直接内置于 Windows 中的新功能，并期望它们在他们使用的所有应用程序中都可用。这将达到任何不支持它们的东西都会感觉笨重、不可用并且看起来不值得花钱的地步。（我认为触摸集成是这方面最明显的例子。虽然有触摸屏解决方案可以夹在显示器上并模拟鼠标，但在任何计算机上，触摸屏技术已经取得了长足的进步，而 Windows 8 模糊了界限在桌面设备和移动设备之间，如果您的应用程序使用 WinForms，人们可能希望以一种特别难以实现的方式使用应用程序。）

我相信，对 WinForms 的支持和开发迟早会停止，所有离开自己的人都将被迫快速移植。但是，有太多依赖 WinForms 的程序让微软无法在不久的将来放弃它。谁知道会发生什么。也许 WinForms 之于 Microsoft 就像 Itanium 处理器之于 Intel 一样，该产品拥有足够多的用户来维持它的运行，即使有更好的解决方案可用。（[http://arstechnica.com/business/news/2011/06/ask-ars-why-itaniumask-ars-with-xeons-improvement-why-bother-with-itanium.ars](http://arstechnica.com/business/news/2011/06/ask-ars-why-itaniumask-ars-with-xeons-improvement-why-bother-with-itanium.ars)）

所以我的建议是：关于新开发，切换到 WPF。派一些员工参加培训课程，或者让他们玩一段时间，这样他们就可以更好地了解这项技术。学习曲线会很陡峭，但这样做会增加团队的技能，因为通过学习 WPF，他们也将顺利学习 SilverLight，这与 WPF 非常相似，熟悉 WPF 的人能够快速学习它，但它是为网络而不是桌面设计的。这很有价值，因为用 WPF 重写的应用程序在以后更容易转换为 Web 应用程序。WPF 是新的，但它是有原因的，而不仅仅是为了让人们学习其他东西。它旨在使应用程序更加用户友好、直观和便携。

关于用 WinForms 编写的应用程序：我认为可以安全地假设 WinForms 仍然会在很长一段时间内受到支持，这仅仅是因为它获得了大量支持。我建议让您的团队熟悉 WPF，然后慢慢开始将您的应用程序迁移到 WPF。在 Microsoft 允许的情况下，不要急于求成，但请始终牢记，WinForms 的一天已经结束，尽管没人能确定会发生什么，但对旧产品的支持将被放弃只要它可以被证明是合理的。即使 WinForms 应用程序存在多年，重要的是要记住时代在变化，我们都需要随着它们而变化。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-12T21:54:06.037

----编辑2 -----

鉴于您正在尝试制作像您展示的那样的编辑器，我建议您更多地使用 WPF。我当前的项目也有许多类似的功能，我们认为将 WPF 与 Direct3D 内容复合的能力非常强大。能够将您的场景渲染成任何东西 - 不仅仅是一个矩形窗口，这真是太好了。在 WinForms 中，您几乎被限制在一个矩形内，并且您在那里也遇到了空域问题（微妙，但是当菜单拉到您的 hwnd 时出现闪烁问题等）。带有 D3DImage 的 WPF 合成器摆脱了所有这些问题，并让您发挥想象力来构建一个非常灵活的 UI。诸如在 WPF3D 对象一侧实时渲染场景之类的事情是可能的，

- - -原来的 - - - - -

如果您要托管 DX，您可能需要考虑它 - 特别是因为它使您能够使用 UI 进行场景合成，并且如果您使用[D3DImage](http://msdn.microsoft.com/en-us/library/system.windows.interop.d3dimage.aspx)则不会出现空域问题。

这确实适用于 SlimDX 和 WPF。

- - 编辑 - - -

有关将 Direct3D 与 Winforms 结合使用的缺点以及 WPF/DX 集成的优点的更多信息，请参阅：

[MSDN 关于空域的文章](http://msdn.microsoft.com/en-us/library/aa970688.aspx)

[关于 D3DImage 介绍的 Codeproject 文章](http://www.codeproject.com/KB/WPF/D3DImage.aspx)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-12T23:49:38.647

我发现，一旦我掌握了 Expression Blend 和 WPF，我在构建 UI 方面的效率就比使用 Windows 窗体更高。在我看来，这是新技术/工具的最大因素之一；如果您不能使用新工具更快地获得与旧工具相同的结果，那么您只使用 10% 的时间的所有花里胡哨的东西都无法弥补。

除此之外，WPF 与 Forms 相比还有其他优势：

*   使用 XAML 中的接口可以更轻松地微调所有这些晦涩的属性，或者将一个控件的整个部分剪切并粘贴到另一个控件中，

*   WPF 使模块化界面变得更加容易，通过控件分解屏幕控件。形式可以在一定程度上做同样的事情，但我总是觉得这是一场战斗，

*   有些花里胡哨很酷。我发现动画（故事板）的使用对于数据输入屏幕非常有用，您需要根据选择的产品等不同的输入框。使用表单，您必须为每个数据输入屏幕创建一个单独的面板/表单，使用 WPF 我使用动画来隐藏和移动各种文本框。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-12T21:54:39.063

如果您正在编写大量自定义控件，我会选择 WPF。WPF 设计的一部分是可扩展、可组合的，结果是编写自定义控件非常简单。

我已经在 WinForms 中编写了一些自定义控件，这有时会非常具有挑战性。布局确实需要一些时间。我生命中的几个周末都花在了 WinForm 控件布局上。在 WPF 中编写等效控件很容易。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-12T22:12:29.630

我们也刚刚经历了这些……我们开始通过 WinForms 迁移到 WPF。我认为现在将 WinForms 抛在脑后是一个非常容易的决定。工具越来越好，如果您的团队中可以找到一位真正的设计师，那么几乎没有什么是您无法组合在一起的。

我们开始意识到我们的未来实际上不是 WPF，而是 Silverlight。随着 Silverlight 的成熟，它越来越与 WPF 相提并论，它允许您跨平台运行。Silverlight 的路径更像是 Adob​​e Air，总有一天它会出现在浏览器之外（实际上你现在可以做到，但很痛苦）。我真的认为 .NET UI 的未来将是 Silverlight。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-12T22:13:12.700

在这种情况下，我会说跟随你的供应商（即微软）的领导。他们自己的内部生产越来越多地使用 WPF；它的范围（想想 Silverlight）和深度显然比 WinForms 更大。他们也越来越多地参考最佳实践来使用它。从所有证据（这里和其他地方）来看，它似乎已经为黄金时段的开发做好了准备。

您对 WinForms 没有特别的亲和力（我猜是基于熟悉程度）。你最终需要切换。一个新项目将是开始这个​​过程的好地方，其他一切都是平等的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-12T22:31:11.673

最近刚刚完成了一个非常相似的产品（用于在 WPF 中挖掘数据的 3d 查看器），我绝对可以推荐 WPF/SlimDX。

这些工具有点松懈（尤其是 Visual Studio），但是 WPF 使得使用一点 Zing 制作应用程序变得更加容易，而不是大多数东西都有的默认控件灰色。

使用 3.5SP1 中的 D3DImage 可以很容易地在控件中托管 SlimDX 设备。

总的来说，我认为 WPF 并不好用，只是不同而已。有些事情更好，有些事情更糟。但这绝对是未来。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-10-20T17:32:45.520

值得一提的是，现在是 2020 年，我已经使用 MVVM 和 Windows 窗体在 WPF 中编写了桌面应用程序。我必须说，我不会错过为 WPF 编写样板类型的代码，例如转换器的类，使用某种事件调解器在视图、命令等之间进行通信。使用 MVVM Light 可以帮助解决这个问题。我喜欢 WPF/MVVM 中代码的清晰分离，但对于小型项目，我认为快速推出 Windows 窗体应用程序的能力不容小觑。对于图形密集型应用程序，WPF 将比 Windows 窗体执行得更好。

这些天来，我倾向于尽可能倾向于 Web 开发，因为只要有网络连接，任何地方都可以使用 Web。当然，Web 开发通常也有更长的产品交付时间。积极的一面是，您已经知道的 C# 可以转化为 ASP.NET 中的开发。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-12T21:54:47.737

> AFAIK WPF 是 WinForms 的继承者，对吧？

我不相信这是真的，因为 MS 可能想推动这一点。在 Winforms 上编写的遗留代码太多了，以至于在不久的将来甚至有些遥远的将来都不能成为现实。

因此，考虑到这一点，如果您愿意并且有能力花时间学习 WPF，我会这样做。否则我会使用 Winforms。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-06-23T15:17:58.000

在您的情况下，WPF 是有意义的。对我来说，这是一个应用程序选择的应用程序，因为在 Windows 窗体中有很多事情可以做得很好（比如业务应用程序的快速开发）。我正在使用 WPF 为媒体中心应用程序（我的 50 英寸等离子屏幕上的媒体控制台的个人项目）编写一个不错的 GUI。

但是，如果我正在编写数据输入和显示应用程序，我通常会使用 Windows 窗体以加快开发速度。[XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)编辑器在 Visual Studio 2010 中更好，但仍有一段路要走。如果没有参考，很多属性属性都没有 IntelliSense 帮助，因此不可能知道它们中的内容（这是我花费大量时间试图通过书籍或网络上的示例找到这些值的地方） . 也就是说，如果您编写 WPF，您可以制作一些非常引人注目的用户界面。

# .net - 如何从非标准端口使用 .NET Web 服务？

> ID：640641
> 
> 赞同：1
> 
> 时间：2009-03-12T21:52:05.293
> 
> 标签：.net, visual-studio-2008, web-services

我们的网络服务是通过路由器访问的，该路由器使用端口转发连接到实际的网络服务器。当我们尝试在 Visual Studio 中建立 Web 引用时，似乎 .NET 框架会返回带有端口的完整 URL 到 Visual Studio，以便在发现期间进行引用。然后，Visual Studio 尝试与该 Web 服务建立连接以创建代理对象（或其他），但由于我们不允许访问该非标准端口而被拒绝。

原始网络服务 URL

```
http://webservices.example.com/SomeService.asmx 
```

从路由器返回的 Web 服务 URL

```
http://webservices.example.com:25001/SomeService.asmx 
```

我的问题是，如果您知道如何使 .NET 框架在从发现调用返回 URL 时不包含端口。这是描述此过程的图表：

![图表](https://www.websequencediagrams.com/cgi-bin/cdraw?lz=VlMtPlJvdXRlcjogUmVxdWVzdCB3ZWIgc2VydmljZSBvbiBwb3J0IDgwCgAhBi0-V2ViIFNlcnZlcjogRm9yd2FyZHMAHwkyNTAwMQoAGQotAFUKRnVsbCBVUkwgZm9yAFcNaW5jbHVkaW5nAGYFAGAILT5WUwALKgCBPAwANDVZb3UgY2Fubm90IGFjY2VzAIFOBXRoYXQAgXsF&s=rose)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T23:12:33.557

这可能会奏效：

> [在 ASMX 中手动设置soap:address](http://blogs.thinktecture.com/cweyer/archive/2005/11/16/414319.aspx)

这是链接失效的代码片段：

```
using System.Configuration;
using System.Web.Services.Description;

namespace Thinktecture.Tools.Web.Services.Metadata
{
  public class SoapAddressReflector : SoapExtensionReflector
  {
    public override void ReflectMethod()
    {
      ServiceDescription sd = ReflectionContext.ServiceDescription;

      foreach (Service service in sd.Services)
      {
        foreach (Port port in service.Ports)
        {
          foreach (ServiceDescriptionFormatExtension extension in port.Extensions)
          {
            if (extension is SoapAddressBinding)
            {
              SoapAddressBinding address = (SoapAddressBinding)extension;

              // Set the address here:
              address.Location = ConfigurationManager.AppSettings["SoapAddress"];
            }
          }
        }
      }
    }
  }
} 
```

配置：

```
<configuration>
 <appSettings>
  <add key="SoapAddress" value="http://www.thinktecture.com/Test/"/>
 </appSettings>

 <system.web>
  <webServices>
    <soapExtensionReflectorTypes>
      <add type="Thinktecture.Tools.Web.Services.Metadata.SoapAddressReflector, SoapAddressReflector"/>
    </soapExtensionReflectorTypes>
  </webServices>
 </system.web>
</configuration> 
```

**更新：**

上述技术似乎工作得很好，但如果您有多个服务，则会有一些限制。您还需要在完全信任下运行，因此在部分信任环境中这样做是行不通的。

我不确定除了使用[`SoapExtensionReflector`](http://msdn.microsoft.com/en-us/library/system.web.services.description.soapextensionreflector.aspx). 谷歌一番好之后，所有的结果都指向了 SoapExtensionReflector 方法。

但是这个怎么样？如果 Web 服务不经常更改，您可以复制生成的 WDSL，编辑 SOAP/HTTP 绑定，然后将其作为静态 XML 文件单独发布？

# lua - 如何按值复制 Lua 表？

> ID：640642
> 
> 赞同：63
> 
> 时间：2009-03-12T21:52:05.467
> 
> 标签：lua, lua-table

最近我写了一些 Lua 代码，比如：

```
local a = {}
for i = 1, n do
   local copy = a
   -- alter the values in the copy
end 
```

显然，这不是我想要做的，因为变量包含对匿名表的引用，而不是 Lua 中表本身的值。[这在Programming in Lua](http://www.lua.org/pil/2.5.html)中有明确规定，但我忘记了。

所以问题是我应该写什么而不是`copy = a`获取值的副本`a`？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-03-13T09:51:30.167

表副本有许多潜在的定义。这取决于您想要简单复制还是深度复制，是否想要复制、共享或忽略元表等。没有单一的实现可以满足所有人。

一种方法是简单地创建一个新表并复制所有键/值对：

```
function table.shallow_copy(t)
  local t2 = {}
  for k,v in pairs(t) do
    t2[k] = v
  end
  return t2
end

copy = table.shallow_copy(a) 
```

请注意，您应该使用`pairs`而不是`ipairs`，因为`ipairs`仅迭代表键的子集（即连续的正整数键以递增顺序从一个开始）。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-03-20T00:56:28.750

为了说明这一点，我个人`table.copy`也关注元表：

```
function table.copy(t)
  local u = { }
  for k, v in pairs(t) do u[k] = v end
  return setmetatable(u, getmetatable(t))
end 
```

没有足够广泛认可的复制功能被称为“标准”。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-10-14T17:49:10.460

为了玩一点可读的代码高尔夫，这里有一个处理标准棘手情况的简短版本：

*   表作为键，
*   保留元表，和
*   递归表。

我们可以在 7 行中做到这一点：

```
function copy(obj, seen)
  if type(obj) ~= 'table' then return obj end
  if seen and seen[obj] then return seen[obj] end
  local s = seen or {}
  local res = setmetatable({}, getmetatable(obj))
  s[obj] = res
  for k, v in pairs(obj) do res[copy(k, s)] = copy(v, s) end
  return res
end 
```

[在这个 gist](https://gist.github.com/tylerneylon/81333721109155b2d244)中有一个关于 Lua 深拷贝操作的简短描述。

另一个有用的参考是[这个 Lua-users wiki 页面](http://lua-users.org/wiki/CopyTable)，其中包含一个关于如何避免元方法的`__pairs`示例。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-04-18T08:07:57.263

完整版的深拷贝，处理所有 3 种情况：

1.  表循环引用
2.  也是表的键
3.  元表

通用版：

```
local function deepcopy(o, seen)
  seen = seen or {}
  if o == nil then return nil end
  if seen[o] then return seen[o] end

  local no
  if type(o) == 'table' then
    no = {}
    seen[o] = no

    for k, v in next, o, nil do
      no[deepcopy(k, seen)] = deepcopy(v, seen)
    end
    setmetatable(no, deepcopy(getmetatable(o), seen))
  else -- number, string, boolean, etc
    no = o
  end
  return no
end 
```

或表格版本：

```
function table.deepcopy(o, seen)
  seen = seen or {}
  if o == nil then return nil end
  if seen[o] then return seen[o] end

  local no = {}
  seen[o] = no
  setmetatable(no, deepcopy(getmetatable(o), seen))

  for k, v in next, o, nil do
    k = (type(k) == 'table') and k:deepcopy(seen) or k
    v = (type(v) == 'table') and v:deepcopy(seen) or v
    no[k] = v
  end
  return no
end 
```

基于[lua-users.org/wiki/CopyTable](http://lua-users.org/wiki/CopyTable)和[Alan Yates](https://stackoverflow.com/a/5710588/2294006)的功能。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2011-04-19T01:17:52.790

可选的深度、图通用、递归版本：

```
function table.copy(t, deep, seen)
    seen = seen or {}
    if t == nil then return nil end
    if seen[t] then return seen[t] end

    local nt = {}
    for k, v in pairs(t) do
        if deep and type(v) == 'table' then
            nt[k] = table.copy(v, deep, seen)
        else
            nt[k] = v
        end
    end
    setmetatable(nt, table.copy(getmetatable(t), deep, seen))
    seen[t] = nt
    return nt
end 
```

也许元表副本也应该是可选的？

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-12T21:52:19.613

这是我实际所做的：

```
for j,x in ipairs(a) do copy[j] = x end 
```

正如[Doub 所提到](https://stackoverflow.com/a/641993/1438)的，如果您的表键不是严格单调递增的，那么应该`pairs`不是`ipairs`。

我还发现了一个[`deepcopy`](http://lua-users.org/wiki/CopyTable)更强大的功能：

```
function deepcopy(orig)
    local orig_type = type(orig)
    local copy
    if orig_type == 'table' then
        copy = {}
        for orig_key, orig_value in next, orig, nil do
            copy[deepcopy(orig_key)] = deepcopy(orig_value)
        end
        setmetatable(copy, deepcopy(getmetatable(orig)))
    else -- number, string, boolean, etc
        copy = orig
    end
    return copy
end 
```

它通过递归调用自身来处理表和元表（[这是它自己的奖励](http://xkcd.com/1270)）。一个聪明的地方是您可以将任何值传递给它（无论是否是表），它将被正确复制。但是，代价是它可能会溢出堆栈。因此，可能需要更健壮（非递归）的[函数。](https://gist.github.com/Deco/3985043)

但这对于想要将数组复制到另一个变量的非常简单的情况来说是多余的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-03-13T21:19:37.547

（不幸的是，文档很少）[stdlib](http://luaforge.net/projects/stdlib)项目对标准 Lua 发行版附带的几个库进行了许多有价值的扩展。其中有几个关于表格复制和合并主题的变体。

这个库也包含在[Lua for Windows](http://luaforwindows.luaforge.net/)发行版中，应该是任何认真的 Lua 用户工具箱的一部分。

手动实现这样的事情时要确保的一件事是正确处理元表。对于简单的表结构应用程序，您可能没有任何元表，简单的循环 using`pairs()`是一个可以接受的答案。但是如果表被用作树，或者包含循环引用，或者有元表，那么事情就会变得更加复杂。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-06-26T15:25:05.533

不要忘记函数也是引用，所以如果你想完全“复制”所有值，你也需要获得单独的函数；但是，我知道复制函数的唯一方法是使用`loadstring(string.dump(func))`，根据 Lua 参考手册，它不适用于具有上值的函数。

```
do
    local function table_copy (tbl)
        local new_tbl = {}
        for key,value in pairs(tbl) do
            local value_type = type(value)
            local new_value
            if value_type == "function" then
                new_value = loadstring(string.dump(value))
                -- Problems may occur if the function has upvalues.
            elseif value_type == "table" then
                new_value = table_copy(value)
            else
                new_value = value
            end
            new_tbl[key] = new_value
        end
        return new_tbl
    end
    table.copy = table_copy
end 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-09-24T07:55:10.070

警告：标记的解决方案不**正确**！

当表包含表时，仍将使用对这些表的引用。我一直在寻找两个小时来寻找我犯的错误，而这是因为使用了上面的代码。

因此，您需要检查该值是否为表格。如果是，您应该递归调用 table.copy！

这是正确的 table.copy 函数：

```
function table.copy(t)
  local t2 = {};
  for k,v in pairs(t) do
    if type(v) == "table" then
        t2[k] = table.copy(v);
    else
        t2[k] = v;
    end
  end
  return t2;
end 
```

注意：当表包含函数或其他特殊类型时，这也可能是不完整的，但这可能是我们大多数人不需要的。上面的代码很容易适应那些需要它的人。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-15T23:05:28.347

我认为 Lua 在其标准库中没有 'table.copy()' 的原因是因为任务定义不精确。正如这里已经显示的那样，您可以制作“一层深”的副本（您已经这样做了），一个带有或不关心可能重复引用的深拷贝。然后是元表。

就个人而言，我仍然希望他们提供内置功能。只有当人们对它的语义不满意时，他们才需要自己去做。但是，实际上并不经常需要按值复制。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-13T00:48:21.143

这和基本表一样好。如果您需要复制带有元表的表，请使用 deepcopy 之类的东西。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-06-10T22:20:40.393

在大多数情况下，当我需要复制一个表时，我想要一个不与原始表共享任何内容的副本，这样对原始表的任何修改都不会影响副本（反之亦然）。

到目前为止显示的所有片段都无法为可能具有共享键或与表共享键的表创建副本，因为这些将指向原始表。很容易看出您是否尝试复制创建为： 的表`a = {}; a[a] = a`。[Jon 引用的deepcopy](http://lua-users.org/wiki/CopyTable)函数负责处理此问题，因此如果您需要创建真实/完整副本，`deepcopy`则应使用该函数。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-01-31T18:29:53.863

在此处使用 penlight 库： [https ://stevedonovan.github.io/Penlight/api/libraries/pl.tablex.html#deepcopy](https://stevedonovan.github.io/Penlight/api/libraries/pl.tablex.html#deepcopy)

```
local pl = require 'pl.import_into'()
local newTable = pl.tablex.deepcopy(oldTable) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-06-22T14:24:09.993

这可能是最简单的方法：

```
local data = {DIN1 = "Input(z)", DIN2 = "Input(y)", AINA1 = "Input(x)"}

function table.copy(mytable)  --mytable = the table you need to copy

    newtable = {}

    for k,v in pairs(mytable) do
        newtable[k] = v
    end
    return newtable
end

new_table = table.copy(data)  --copys the table "data" 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2016-10-02T23:31:10.740

在我的情况下，当表中的信息只有数据和其他表（不包括函数，...）时，以下代码行是获胜的解决方案：

```
local copyOfTable = json.decode( json.encode( sourceTable ) ) 
```

我正在为 Fibaro Home Center 2 上的一些家庭自动化编写 Lua 代码。Lua 的实现非常有限，没有您可以参考的中央函数库。每个函数都需要在代码中声明，以保持代码可用，因此像这样的单行解决方案是有利的。

# sql-server - 如果存在索引，如何构建使用全文搜索的 sql 查询？

> ID：640643
> 
> 赞同：0
> 
> 时间：2009-03-12T21:52:12.190
> 
> 标签：sql-server, full-text-search

我需要构建一个 sqlserver 查询，如果一个文本列有一个全文索引，它将被使用，如果没有，查询将降级为 O(N²) 的`LIKE '%word%'`？

我相信答案会是这样的：

```
IF has_full_text_index('mycolumn')
    select mytable_id from mytable where contains(mycolumn, 'word')
ELSE
    select mytable_id from mytable where mycolumn like '%word%'
ENDIF 
```

查询将由程序生成。查询将始终只有一个单词要匹配。查看列是否具有全文索引的测试必须很快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T22:13:22.887

虽然我倾向于同意 Ken 的观点，即您将知道您的哪些表属于全文目录，但您可以查询

```
sp_help_fulltext_tables {catalogname} 
```

对于目录中的表。（通过[MSDN](http://msdn.microsoft.com/en-us/library/aa933422(SQL.80).aspx)）

# javascript - Intellisense 用于 VS2008 中的外部 javascript 文件

> ID：640646
> 
> 赞同：0
> 
> 时间：2009-03-12T21:52:48.880
> 
> 标签：javascript, visual-studio-2008, intellisense

我正在尝试让 Visual Studio 2008 SP1 对外部 javascript 文件进行智能感知，如[ScottGu](http://weblogs.asp.net/scottgu/archive/2007/06/21/vs-2008-javascript-intellisense.aspx)所述，但它不起作用。

我有一个 ASP.NET MVC 项目，其中 Scripts 目录中有几个 javascript 文件。所有脚本都包含在母版页上。Intellisense 已启用，但它只为我提供了基本的 javascript 语言内容——我的脚本中没有任何定义。我曾尝试`/// <reference path="Global.js" />`在文件顶部添加评论，但没有成功。它也不适用于母版页的脚本块。我还需要做些什么来使它正常工作吗？

**编辑：**我没有使用 jquery。从 Scott 的文章看来，我不需要任何 -vsdoc.js 文件；这是不正确的吗？如果是这样，我自己的外部脚本的这些文件来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T22:10:02.927

尝试下载修补程序 KB958502：

[https://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=14883&wa=wsignin1.0](https://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=14883&wa=wsignin1.0)

确保文件 -vsdoc.js 与主 js 脚本位于同一目录中。并且必须具有相同的名称。例如 jquery.1.3.2.js 和 jquery.1.3.2-vsdoc.js

当我安装了修补程序时，我不得不重新加载所有的视觉工作室。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T21:57:34.890

您是否将所有调试脚本都留在了 Scripts 文件夹中？例如 jquery-1.2.6-vsdoc.js？

# .net - 是否有理由不在您自己的代码中使用 .NET Framework 定义的异常类？

> ID：640651
> 
> 赞同：6
> 
> 时间：2009-03-12T21:54:19.407
> 
> 标签：.net, exception, exception-handling, enterprise-library

因此，我们正在使用[Enterprise Library 4.1 异常处理应用程序块](http://msdn.microsoft.com/en-us/library/dd203116.aspx)来处理记录/处理多项目应用程序中的异常。我们有一些自定义异常并且正在抛出一些异常，其类在 .NET 框架的标准类库中定义（例如 ArgumentException、InvalidOperationException、ArgumentNullException 等）。

今天，我们的团队负责人决定他不希望我们使用后者，因为 .NET 框架会抛出这些类型的异常，并且为了便于使用应用程序块的策略进行过滤，我们应该只使用自定义异常，去就实际使用自定义版本复制 .NET 标准类库异常而言，如*Custom* ArgumentException、*Custom* InvalidOperationException 等。

我的问题是，这种方法有什么问题？当时我无法用手指触摸它，但我闻起来不对劲，我无法摆脱对它的不安情绪。我是否担心一些真正无关紧要的事情？我想它只是感觉就像尾巴在这里摇着狗一样......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-12T22:06:25.633

伊克。我不喜欢的是：

*   它复制了现有类型
*   它违反了最小惊喜原则
*   这意味着如果你想在任何地方找到你使用了错误的参数值（比如说），你必须寻找两个异常的类型层次结构，而不是仅仅寻找`ArgumentException`.

我建议您让您的团队负责人阅读[Effective Java 2nd edition](https://rads.stackoverflow.com/amzn/click/com/0321356683)的第 60 条。是的，它是关于 Java 而不是 C# - 但原则保持不变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-12T22:14:13.617

Krzysztof Cwalina 和 Brad Abrams的[框架设计指南](http://www.amazon.co.uk/Framework-Design-Guidelines-Conventions-Libraries/dp/0321246756/ref=sr_1_2?ie=UTF8&s=books&qid=1236880864&sr=8-2)书（第一版）建议尽可能抛出`System`命名空间中定义的现有异常，并且越具体越好。如果不合适，则抛出自定义异常。

创建一个*自定义*`ArgumentNullException`的平行宇宙来匹配`System.ArgumentNullException`是重复的工作，我看不到任何价值。归根结底，如果你的代码抛出一个`System.ArgumentNullException`而不是框架类，你可以从堆栈跟踪中确定谁最终负责.

当涉及到代码维护时间时，这对于现在和将来来说是不必要的额外工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-12T22:21:11.900

我回应 Jon Skeet 和 Kev 的回答。我只想补充一点，如果您的异常策略想要处理与您自己的异常不同的框架级异常，请考虑使用异常的堆栈跟踪。

```
// Somewhere within a custom exception handler policy
var frame = new StackTrace(exception).GetFrame(0);
if (frame.GetMethod().DeclaringType.Namespace.StartsWith("MyNamespace.")) 
{
    // Handle exceptions from our code
}
else 
{
    // Handle framework-level exceptions
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T22:01:16.393

好吧，您的代码抛出的异常和 .net 基类抛出的异常都应该以相同的方式处理。

两者都可能是*您的*代码中出现问题的症状，因此两者都不应该被忽略或过滤！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T22:16:43.957

当异常正确地描述了您试图暴露的问题类型时（例如，当参数为空时，您应该抛出 ArgumentNullException），抛出 .Net 异常很好。如果您发现 .Net 框架无法处理的情况（例如，您想将 6 除以 3，但您的应用程序不允许这样做），您应该创建一个自定义异常。

# sql - 每天按实例汇总的 SQL 查询

> ID：640656
> 
> 赞同：1
> 
> 时间：2009-03-12T21:55:26.440
> 
> 标签：sql, mysql

我在 mysql 数据库中有一个包含货币交易的表。假设表格称为*事务*：

```
id int,
to_user int,
from_user int,
created datetime,
amount double 
```

我正在尝试创建一个查询，该查询返回按每天出现的交易数量分组的平均交易金额。适用的列是金额和已创建。

所以我试图回答这个问题：在有 0 到 2 笔交易、2 到 4 笔交易、4 到 6 笔交易等的日子里，平均发生的交易量是多少？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T22:12:29.613

经过几次误解，我似乎终于得到了你需要的东西:)

```
SELECT  cnt_range * 2 AS days_range,
        CASE WHEN SUM(trans_cnt) > 0 THEN
             SUM(trans_sum) / SUM(trans_cnt)
             ELSE 0
        END AS average_amount
FROM    (
        SELECT  SUM(amount) AS trans_sum,
                COUNT(*) AS trans_cnt,
                FLOOR(COUNT(*) / 2) AS cnt_range
        FROM    transactions
        GROUP BY
                TO_DATE(created)
        ) ao
GROUP BY
        cnt_range 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T22:12:40.690

这是一个尝试（但未经测试）：

```
SELECT CASE WHEN txn_per_day BETWEEN 0 AND 2 THEN 2
            WHEN txn_per_day BETWEEN 2 AND 4 THEN 4
            WHEN txn_per_day BETWEEN 4 AND 6 THEN 6
            ELSE 8 -- or more
       END CASE AS num_txns, AVG(t3.amount)
FROM (
  SELECT t1.*, COUNT(*) AS txn_per_day
  FROM transactions t1 JOIN transactions t2 
    ON (TO_DAYS(t1.created) = TO_DAYS(t2.created))
  GROUP BY t1.id
) t3
GROUP BY num_txns; 
```

这不是特别快。生成报告是可以的，但如果您需要它在 PHP 请求期间运行，那就不好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T22:14:19.267

```
SELECT AVG(`num`), ((`num` - 1) DIV 2) * 2 AS `tier`
FROM (
    SELECT DATE_FORMAT(`created`, '%Y-%m-%d') AS `day`, COUNT(*) AS `num`
    FROM `yourtable`
    GROUP BY 1
) AS `src`
GROUP BY `tier` 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-12T22:21:00.530

尝试类似的东西

```
SELECT AVG(`amount`) as `amount`,
    DATE_FORMAT(`created`, '%Y-%m-%d') as `date`
FROM `transactions`
GROUP BY DATE_FORMAT(`created`, '%Y-%m-%d') 
```

在这里查看更多[日期和时间函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)并查看[BETWEEN 函数](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between "BETWEEN 函数")

# c++ - C和C++有什么区别

> ID：640657
> 
> 赞同：15
> 
> 时间：2009-03-12T21:56:08.293
> 
> 标签：c++, c

我知道 C++ 有对象的概念，但 C 没有。我也知道几乎所有关于 C 的知识都适合[K & R](https://rads.stackoverflow.com/amzn/click/com/0131103628)，但 C++ 库要复杂得多。不过，肯定还有其他很大的不同。

C 和 C++ 之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-12T22:01:01.420

C++ 语言说它们是相同的：

```
int C = 0;
assert(C++ == C); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-03-12T22:01:51.697

[在此处](http://www.research.att.com/~bs/bs_faq.html#difference)查看 Stroustrup 的常见问题解答，特别是：

**C 和 C++ 有什么区别？**

> C++ 是 C 的直接后代，它保留了几乎所有 C 作为子集。C++ 提供比 C 更强的类型检查，并且直接支持比 C 更广泛的编程风格。C++ 是“更好的 C”，因为它支持使用 C 完成的编程风格，具有更好的类型检查和更多的符号支持（没有损失效率）。在同样的意义上，ANSI C 是比 K&R C 更好的 C。此外，C++ 支持数据抽象、面向对象编程和泛型编程（参见 C++ 编程语言（第 3 版）”；提供了讨论兼容性问题的附录 B用于下载）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-03-12T22:00:12.497

我想你回答了你自己的问题：类

它是一个完全不同的设计范式。我认为混乱的出现是因为许多人开发的 C++ 程序基本上是 C 程序，甚至没有意识到这一点。

用它的创造者 Stroustrup 的话来说，这允许：

*   [数据抽象](http://www.research.att.com/~bs/bs_faq.html#class)
*   [面向对象编程](http://www.research.att.com/~bs/bs_faq.html#oop)
*   [泛型编程。](http://www.research.att.com/~bs/bs_faq.html#generic)

编辑：添加了一些其他有趣的东西

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-12T22:37:48.990

简而言之，C 渴望成为一种“可移植的汇编语言”。它使事情变得简单，让你做几乎直接映射到底层硬件的事情，并且不呈现很多高级抽象（你有函数和......就是这样）

C++ 试图成为一切。高级语言、低级语言、面向对象语言、多范式语言、系统编程语言、嵌入式编程语言和应用程序开发语言。

除了一些共享语法之外，这两种语言实际上并没有太多共同点。AC 程序可以编译为 C++，只需进行微小的更改，但它与为该语言编写的“正确”C++ 代码没有任何共同之处。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-03-13T03:30:14.390

这是一个显示 c 和 c++ 之间“不兼容性”的网站：

[http://david.tribble.com/text/cdiffs.htm#C++-vs-C](http://david.tribble.com/text/cdiffs.htm#C++-vs-C)

实际上，c 和 c++ 在很多方面存在分歧（除了类、模板、异常等）。

至于主要差异，这里有一个很好的列表：

*   匿名工会
*   班级
*   构造函数和析构函数
*   异常和 try/catch 块
*   外部函数链接（例如，extern "C"）
*   函数重载
*   成员函数
*   命名空间
*   new 和 delete 运算符和函数
*   运算符重载
*   引用类型
*   标准模板库 (STL)
*   模板类
*   模板函数

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-08-22T22:55:30.563

C++主要是C的扩展。最初C++被称为“C with **classes** ”，突出了主要的原始语言扩展。那时已经支持函数**重载**。从那时起，C++ 获得了**异常**、分层**命名空间、****模板**形式的通用编程，以及最后**的多线程**支持。从 C++11 开始，还有一些对垃圾收集的最小核心语言支持，**例如**Boehm[垃圾收集器](http://en.wikipedia.org/wiki/Boehm_garbage_collector). 较小的扩展包括引用类型、尾随函数返回类型语法、可被覆盖的内存分配和释放机制、运行时类型信息等。

C 和 C++ 之间的差异，即 C 和 C++ 的“C 子集”之间的差异，在*C++11 标准的附录 C*中进行了总结，标题为“兼容性”，大约 20 页塞满，其中 C1 部分涉及C兼容性大约是10页。

它也是 C++98 和 C++03 中的附录 C，它也是新的 C++14 标准中的附录 C。

* * *

从该标准的 C++11 附录 C 开始，列出了 C 和 C++ 之间的以下不兼容性：

## §C1.1 词汇约定

新关键字（§2.12）

*该段落仅指 C++11 §2.12。以下列表是从该表和 C99 中的相应表生成的。*

```
    C99                  C++11

    _布尔               
    _复杂的            
    _假想          
                        对齐             
                        对齐             
                        汇编                 
    自动 自动                
                        布尔                
    休息休息               
    案例案例                
                        抓住               
    字符字符                
                        char16_t            
                        char32_t            
                        班级               
    常量常量               
                        const_cast          
                        常量表达式           
    继续 继续            
                        声明类型            
    默认 默认             
                        删除              
    渡渡鸟                  
    双双              
                        dynamic_cast        
    其他的                
    枚举枚举                
                        明确的            
                        出口              
    外部外部              
                        错误的               
    浮动 浮动               
    为 为                 
                        朋友              
    转到转到                
    如果如果                  
    内联内联              
    整数                 
    长长的                
                        可变的             
                        命名空间           
                        新的                 
                        无例外            
                        空指针             
                        操作员            
                        私人的             
                        受保护           
                        上市              
    注册 注册            
                        reinterpret_cast    
    严格            
    返回 返回              
    短短               
    签字 签字              
    大小的大小              
    静态的              
                        静态断言       
                        static_cast         
    结构体              
    开关开关              
                        模板            
                        这                
                        线程本地        
                        扔               
                        真的                
                        尝试                 
    类型定义             
                        类型标识              
                        类型名称            
    工会联盟               
    未签名 未签名            
                        使用               
                        虚拟的             
    无效 无效                
    挥发性的            
                        wchar_t             
    一会儿一会儿               

```

字符文字的类型从更改`int`为`char` (§2.14.3)

制作的字符串文字`const`(§2.14.5)

## §C1.2 基本概念

C++ 没有“暂定定义”（第 3.1 节）。

A`struct`是 C++ 中的范围，而不是 C 中的范围（第 3.3 节）。

显式声明为 const 而未显式声明的文件范围的名称`extern`具有内部链接，而在 C 中它将具有外部链接（3.5 美元）。

`main`不能递归调用，也不能获取其地址（第 3.6 节）。

C 允许在多个地方使用“兼容类型”，而 C++ 不允许（第 3.9 节）。

## §C1.3 标准转换。

转换`void*`为指向对象的指针类型需要强制转换（第 4.10 节）。

只有指向非易失`const`性和非易失性对象的指针可以隐式转换为`void*`（第 4.10 节）。

## §C1.4 表达式。

不允许隐式声明函数（第 5.2.2 节）。

类型必须在声明中声明，而不是在表达式中（第 5.3.3 节、第 5.4 节）。

条件表达式、赋值表达式或逗号表达式的结果可能是左值（第 5.16 节、第 5.17 节、第 5.18 节）。

## §C1.5 声明。

现在跳过具有显式或隐式初始化程序的声明是无效的（除非跨未输入的整个块）（§6.4.2，§6.6.4）

现在，从声明为返回值而不实际返回值的函数（显式或隐式）返回是无效的（第 6.6.3 节）。

## §C1.6 声明。

在 C++ 中，`static`or`extern`说明符只能应用于对象或函数的名称。在 C++（第 7.1.1 节）中将这些说明符与类型声明一起使用是非法的。

C++`typedef`名称必须不同于在同一范围内声明的任何类类型名称（除非`typedef`是具有相同名称的类名称的同义词）（第 7.1.3 节）。

`const`对象必须在 C++ 中初始化，但可以在 C 中保持未初始化（第 7.1.6 节）。

`int`C++ 中没有隐式（第 7.1.6 节）。

该关键字`auto`不能用作存储类说明符（第 7.1.6.4 节）。

枚举类型的 C++ 对象只能分配相同枚举类型的值（第 7.2 节）。

在 C++ 中，枚举数的类型是它的枚举（第 7.2 节）。

## §C1.7 声明符。

在 C++ 中，使用空参数列表声明的函数不接受任何参数 ($8.3.5)。

在 C++ 中，类型可能未在返回类型或参数类型中定义（第 8.3.5 节、第 5.3.3 节）。

在 C++ 中，函数定义的语法不包括“旧式”C 函数（第 8.4 节）。

在 C++ 中，使用字符串初始化字符数组时，字符串中的字符数（包括终止符`'\0'`）不得超过数组中的元素数（第 8.5.2 节）。

## §C1.8 类。

在 C++ 中，类声明将类名引入到声明它的作用域中，并将该名称的任何对象、函数或其他声明隐藏在封闭作用域中（第 9.1 节、第 7.1.3 节）。

在 C++ 中，嵌套类的名称是其封闭类的本地名称（第 9.7 节）。

在 C++ 中，`typedef`在类定义中使用名称后（第 9.9 节），可能不会在该名称中重新声明该名称。

## §C1.9 特殊成员函数。

隐式声明的复制构造函数和隐式声明的复制赋值运算符不能复制`volatile`左值（第 12.8 节）。

## §C1.10 预处理指令。

是否`__STDC__`已定义，如果已定义，其值是什么，由实现定义（第 16.8 节）。

* * *

为了简化比较关键字表的重新生成，并建立对给定表的信心，这里是用于生成它的 C++ 程序：

```
#include <algorithm>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <vector>
#include <string>
using namespace std;

#define ITEMS_OF( c )   c.begin(), c.end()

enum class Language { c, cpp };

auto compare( Language const a, Language const b )
    -> int
{ return int( a ) - int( b ); }

struct Keyword
{
    string      word;
    Language    language;

    friend
    auto operator<( Keyword const& a, Keyword const& b )
        -> bool
    {
        if( int const r = a.word.compare( b.word ) ) { return (r < 0); }
        return (compare( a.language, b.language ) < 0);
    }
};

void add_words_from(
    string const& filename, Language const language, vector< Keyword >& words
    )
{
    ifstream            f( filename );
    string              word;

    while( getline( f, word ) )
    {
        words.push_back( Keyword{word, language} );
    }
}

auto main() -> int
{
    vector< Keyword >   words;
    add_words_from( "kwc.txt", Language::c, words );
    add_words_from( "kwcpp.txt", Language::cpp, words );
    sort( ITEMS_OF( words ) );

    int const w = 20;

    int previous_column = -1;
    string previous_word = "";
    cout << left;
    for( Keyword const& kw : words )
    {
        int const column = (int) kw.language;
        int const column_advance = column - (previous_column + 1);
        if( column_advance < 0 || previous_word != kw.word )
        {
            cout << endl;
            if( column > 0 ) { cout << setw( w*column ) << ""; }
        }
        else
        {
            cout << setw( w*column_advance ) << "";
        }
        cout << setw( w ) << kw.word;
        previous_column = column; previous_word = kw.word;
    }
    cout << endl;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-12T22:04:26.247

模板是另一个很大的区别（除了类/对象）。模板支持例如类型安全的通用容器类型（它们的第一个用例）和（混蛋）lambda 表达式（`boost::lambda`）。

C++ 是一种比 C 更大的语言（不仅仅是库）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-12T22:24:35.323

这个问题没有简短的答案。
一般来说，C++ 支持：
- OOP 范式；
- 通用编程；
- 模板元编程；
- 抽象数据类型；
- 新的库和标准支持功能范式的元素；
- 使您的程序最受支持的其他工具；
- 你也可以编写类似 C 风格的程序，但使用 C++ 编译器；

但是纯 C - 比 C++ 快一点，而且级别更低。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-03-12T23:12:34.523

C++ 相对于 C 的另一个特性是以 throw ... catch 的形式处理异常。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-03-13T00:02:32.093

C++ 比带有类的 C 多得多。C++ 内部还有许多其他概念，例如模板、函数和运算符重载、异常以及这里已经提到的许多其他概念。这使得 C++ 非常强大和灵活，但也很难学习。不是单一的概念难以理解，而是它们的总和以及它们如何一起发挥作用。看一下 boost，看看 C++ 可以做什么。而且我想要花很长时间才能理解引擎盖下发生的事情，这在 C 的情况下非常清楚。

或者简而言之：C++ 比带有类的 C 多得多，或者换句话说，C++ 比 Java 加内存管理多得多。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-05-03T17:32:44.327

[在C++ for C 程序员](http://blog.brush.co.nz/2010/05/cpp-1/)的 2 部分中的第 1 部分中，列出了一些非 OOP 差异：

> *   函数的默认参数
> *   函数重载
> *   您可以在代码中任何需要它们的地方声明局部变量，而不仅仅是在函数的开头（也是 C99 功能）
> *   参考文献，如`int& x`
> *   一般的 const 正确性
> *   命名空间
> *   内置布尔类型、、`bool`with`true`和`false`关键字（也在 C99 中通过 stdbool.h）
> *   inline 关键字和相关的怪癖，包括隐式内联和自动内联
> *   比 C 更大的标准库

# c# - 如何确定“IIsWebDirectory”或“IIsWebVirtualDir”是否为 ASP.NET 应用程序？

> ID：640658
> 
> 赞同：5
> 
> 时间：2009-03-12T21:56:19.137
> 
> 标签：c#, asp.net, iis, directoryservices

我目前正在编写一个 C# asp.net 应用程序来连接到 IIS 服务器并查询虚拟目录/web 目录信息。

我能够确定我应该处理的两种类型是“IIsWebDirectory”和“IIsWebVirtualDir”。

如何确定它们是否已配置为 C# 中的“应用程序”？

您还可以在[此处](https://stackoverflow.com/questions/636569/how-do-i-determine-the-asp-net-version-of-a-virtual-directory-or-website-using-c)和[此处查看我在 C# 和 IIS 中的冒险经历](https://stackoverflow.com/questions/637090/directoryentry-exists-throws-an-comexception-access-denied-c)

**更新**

@Kev - 我在您的回答中获取了信息并开发了以下简单的解决方案来检查 AppFriendlyName 是否未设置为“默认应用程序”

```
private void CheckIfApp(DirectoryEntry de)
{
    if(de.SchemaClassName.Equals("IIsWebDirectory") || de.SchemaClassName.Equals("IIsWebVirtualDir"))
    {
        if (de.Properties["AppFriendlyName"].Value != null)
        {
            string friendlyName = de.Properties["AppFriendlyName"].Value.ToString();

            if (!friendlyName.Equals("Default Application"))
            {
                //do something...
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-13T03:05:40.687

您可以通过三种方式解决此问题：

*   普通的旧 System.DirectoryServices
*   解析 IIS metabase.xml 文件
*   System.DirectoryServices 和一些 COM 互操作

**普通的旧 System.DirectoryServices**

由于元数据库属性继承，确定一个`IIsWebDirectory`或一个`IIsWebVirtualDir` *IIS 管理对象*是否配置为单独使用的应用程序`System.DirectoryServices`有时可能不是显而易见的事情。

例如，当您创建“应用程序”时，通常会在元数据库管理对象`IIsWebDirectory`或`IIsWebVirtualDir`元数据库管理对象上设置三个属性 -

```
AppFriendlyName
AppIsolated
AppRoot 
```

在元数据库中，您会看到如下内容：

```
<!-- This is an application -->
<IIsWebVirtualDir   Location ="/LM/W3SVC/1/ROOT/MyApp"
    AccessFlags="AccessRead | AccessScript"
    AppFriendlyName="MyAppKev"
    AppIsolated="2"
    AppRoot="/LM/W3SVC/1/Root/MyApp"    
    >
</IIsWebVirtualDir> 
```

现在你会认为它就像检查这三个属性的存在一样简单，特别是`AppIsolated`属性，因为这是用于指示应用程序隔离类型的属性（进程内 [0]，进程外 [ 1] 或池化 [2]) - 每个应用程序都需要此属性。作为旁注，在运行 IIS6 的服务器上，您只会看到`AppIsolated=0|1`IIS 是否在 IIS5 兼容模式下运行。当您创建自己的应用程序时，您应该始终设置`AppIsolated=2`这意味着站点或应用程序将在您的应用程序池之一 (w3wp.exe) 中运行。

无论如何...由于元数据库属性继承，检查上面列出的三个属性中的任何一个都不能保证您正在检查的对象实际上是一个应用程序 - 无论是使用 ADSI、WMI 还是`DirectoryServices`API。即使您正在检查的对象只是一个虚拟目录（不是应用程序），您仍然会得到返回的值，因为它们将从父应用程序继承。

例如，如果`/MyVdir`是位于默认网站中的虚拟目录（不是应用程序），您仍然会看到 的值`AppIsolated`，这是因为它继承自`IIS://Localhost/w3svc/1/root`)。`AppFriendlyName`和`AppRoot`属性也是如此。

我在这里采用的方法是将`DirectoryEntry.Path`属性与`AppRoot`目标管理对象上的属性进行比较。`AppRoot`是一个属性，指示特定应用程序的根目录。如果您正在深入检查站点元数据库层次结构中的 IIS 管理对象并且您需要知道其应用程序的根目录，这会很方便。

所以，假设我有一个应用程序位于：

```
IIS://Localhost/w3svc/1/root/MyApp 
```

...并说我们有一个实例`DirectoryEntry`：

```
DirectoryEntry de = new DirectoryEntry("IIS://Localhost/w3svc/1/root/MyApp"); 
```

该`de.Path`属性将设置为`IIS://Localhost/w3svc/1/root/MyApp`，`AppRoot`管理对象属性 ,`de.Properties["AppRoot"].Value`将设置为`/LM/W3SVC/1/Root/MyApp`。您需要做的就是去掉前导`IIS://Localhost`和`/LM`字符串并进行不区分大小写的字符串比较。如果匹配，则该路径上的对象是应用程序。

**解析 IIS metabase.xml 文件**

我过去使用另一种方法作为死服务器重建工作的一部分，我们有元数据库文件，一个包含 vdirs 和我们知道我们创建的应用程序的数据库表，没有太多其他方法 - 服务器有 1200 个网站以及弹出之前的大量虚拟目录和应用程序。基本上我将整个`metabase.xml`文件加载到`XMLDocument`. 然后，我使用 XPath 来查找与我感兴趣的路径匹配的`AppIsolated`属性是否存在。`Location`

这是一段代码，应该可以为您提供大致的思路：

```
private XmlNamespaceManager _nsm = 
        new XmlNamespaceManager(new NameTable());
private XmlDocument _doc = new XmlDocument();
_doc.Load(@"c:\windows\system32\inetsrv\metabase.xml");
_nsm.AddNamespace("iis", "urn:microsoft-catalog:XML_Metabase_V64_0");

// lmPath could be build from the DirectoryEntry.Path property
string lmPath = "/lm/w3svc/1/root/myapp";

// Try as an IIsWebDirectory object
string iisWebDirectoryXPath = 
    String.Format(@"//iis:IIsWebDirectory[translate(@Location, 
            'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
            'abcdefghijklmnopqrstuvwxyz') = '{0}']",
            lmPath);

mbNode = _doc.DocumentElement.SelectSingleNode(iisWebDirectoryXPath, _nsm);

if(mbNode != null)
{
    // We found an IIsWebDirectory - is it an application though?
    if (mbNode.Attributes["AppIsolated"] != null)
    {
        // IIsWebDirectory is an Application
    }
}
else
{
    // Is our object an IIsWebVirtualDir?
    string iisWebVirtualDirectoryXPath = 
        String.Format(@"//iis:IIsWebVirtualDir[translate(@Location, 
                'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                'abcdefghijklmnopqrstuvwxyz') = '{0}']",
                lmPath);

    mbNode = _doc.DocumentElement
            .SelectSingleNode(iisWebVirtualDirectoryXPath, _nsm);

    if (mbNode != null)
    {
        // Yes it's an IIsWebVirtualDir
        if (mbNode.Attributes["Path"] != null)
        {
            if(mbNode.Attributes["AppIsolated"] != null)
            {
                // And it's an application
            }
        }
    }
} 
```

`metabase.xml`只要应用程序/虚拟目录的周转率不高，解析原始文件就可以正常工作。这是因为内存中的元数据库更新不会立即刷新到`metabase.xml`文件中。我不建议这样做，我只是为了系统恢复而以这种方式处理问题。

**System.DirectoryServices 和一些 COM 互操作**

最后，如果您的开发 PC 没有运行 IIS6/Windows 2003，您可能无法正确测试第三种方法（可能也是最简单的方法）（我没有可用的 XP 机器来验证这是否适用于 IIS 5.1 ）。您要做的是添加对名为“Active DS IIS Extension Dll”( `%systemroot%\system32\inetsrv\iisext.dll`) 的 COM 库的引用，它列在 Visual Studio 的“添加引用”对话框的“COM”选项卡上。添加此引用时，Visual Studio 还将自动解析并引用依赖项“Active DS 类型库”( `%systemroot%\system32\activeds.tlb`)。在您的解决方案引用文件夹中，您会看到它们被列为“ActiveDS”和“IISExt”。

使用“Active DS IIS Extension”库，我们可以通过执行以下操作来测试特定路径上的 IIS 管理对象是否实际上是 IIS 应用程序：

```
using (DirectoryEntry de = 
        new DirectoryEntry("IIS://Localhost/w3svc/1/root/MyApp"))
{
    // Cast our native underlying object to the correct interface
    IISExt.IISApp2 app = (IISExt.IISApp2)de.NativeObject;
    int status = app.AppGetStatus2();

    switch(status)
    {
        case 0:
            Console.WriteLine("It's an app but it's stopped.");
            break;

        case 1:
            Console.WriteLine("It's an app and it's running.");
            break;

        case 2:
            Console.WriteLine("No application found here.");
            break;
    }

} 
```

还有第四种使用 WMI 的方法，但我只是为了一些相当简单的 IIS/应用程序池管理任务而涉足其中。

# svn - 带有修订历史问题的 SVN 导出

> ID：640660
> 
> 赞同：4
> 
> 时间：2009-03-12T21:56:39.823
> 
> 标签：svn, tortoisesvn, export, history, revision

如果可能，我需要向我们的客户提供我们 SVN 存储库中单个子目录的转储以及修订历史记录。我知道您可以进行转储，但我不相信您可以告诉它在 repo 中隔离单个子目录。如果我导出我只会得到头部或单个修订，这不是我需要的。有没有办法实现这一点，或者这只是不支持？

编辑：

我需要的是所有修订历史和对每个文件的更改。

编辑：

看起来 rmeador 的解决方案有一个警告。在将加载命令执行到空白存储库时，我收到有关修订或文件不存在的神秘错误。svnadmin load 似乎很困惑，因为“trunk”目录的创建被 svndumpfilter 过滤掉了。因此创建“trunk/MySubDirecory”失败。在目标空仓库上为“trunk”手动执行 svn add/commit，然后执行“svnadmin load”解决了这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T21:59:49.080

可以使用[svndumpfilter](http://svnbook.red-bean.com/en/1.5/svn.ref.svndumpfilter.html)过滤转储文件以仅包含一个子目录。然后可以将这样的转储文件加载到新的存储库中，并且它可以正常工作，就好像存储库一直是那个目录一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-08-12T06:22:23.687

我在搜索上面的答案时发现了这个

[http://daveharris.wordpress.com/2008/08/05/svn-dump-parts-of-a-repository/](http://daveharris.wordpress.com/2008/08/05/svn-dump-parts-of-a-repository/)

希望这可以帮助某人。

# api - 缺乏参考级文档？

> ID：640665
> 
> 赞同：1
> 
> 时间：2009-03-12T21:58:50.737
> 
> 标签：api, documentation, reference

我的工作倾向于使用其他地方的工具和库，而不是提供这些东西供外部使用。但是对于我们内部所做的事情，“文档”意味着提供简明扼要地列举功能供其他人使用的信息。根据习惯，我们倾向于生成一些看起来像 UNIX 手册页的东西，但我不会说我们认为这是最终格式。

然而，当谈到我们使用的（主要是 .NET）库和工具时，这一级别的信息似乎非常稀少，即使是 IDE 中的“F1”类型帮助也是如此。

我们在评估准确、简洁的 API（和类似）参考材料方面是否不同寻常？别人容易找到吗？还是您在教程、演练和视频中发现更多价值？

我认为这些东西将是第一种也是最容易生产的材料，因为它对于拥有受控的开发和发布过程几乎是强制性的。

目前这种恶化的一个很好的例子是关于 ASP.NET MVC，但我并不是说它特别令人震惊，只是典型的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T22:26:32.543

忘记 MVC，我希望 MS 为常规的 .Net 库生成体面的文档。从我记事起，Microsoft 文档就几乎无法使用。近乎废话。

每隔一段时间，我就会不小心按 F1 并浏览 MSDN 文档。而且，和往常一样，几分钟后，我意识到谷歌速度更快。

举个例子，看看你需要多长时间才能找到日期时间字符串格式的字符。

我认为这个事实已经延续到大多数第三方供应商身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T22:30:36.747

不同类型的文档对于不同的用途是合适的（也是必要的）。

*   当您需要广泛了解如何使用某项技术时，一段**视频**可以让您从 10,000 英尺的角度了解其功能。但这些很少显示 API 使用的可读示例。

*   当您需要使用该技术组合一个基本项目时，分步**教程**是很好的。但是这些并没有向您展示奇特的案例或最佳实践；他们只展示了使用该技术的一种场景。

*   当您需要学习使用该技术设计解决方案的最佳实践或与其他技术集成的方法时，**面向任务的**文档是最好的。

*   当您最熟悉该技术但只需要方法签名等的参考时，**API 文档**是合适的。这些可以集成到 IDE 中。

总是缺乏有效的文档。ASP.NET MVC 可能是一个例子，但在 Java 世界中也好不到哪里去。是的，Javadoc 参考资料可在线获得，但许多条目是琐碎的或占位符文本。API 参考文档通常不足以解释如何在应用程序设计的上下文中*最好*地使用每个给定的类和方法。

# javascript - JqueryUI 显示突出显示错误的单元格

> ID：640669
> 
> 赞同：0
> 
> 时间：2009-03-12T21:59:34.310
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 Jquery 在表的末尾添加一行，效果很好。我想使用 JqueryUI highlight 方法在添加行时突出显示该行。它有效，但它不是突出显示新行，而是突出显示它上面的行。我猜这是因为我使用 .after 函数来添加新行。我怎样才能使它突出显示正确的行？我的代码看起来像这样

```
$('#playlistTable tr:last').after('<tr><td>text to add to table</td></tr>').show('highlight',500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T22:06:11.953

这是一种方式：

```
 $('#playlistTable tr:last').after("<tr><td>'text to add to table'</td></tr>"));
 $('#playlistTable tr:last').show('highlight',500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-13T00:07:08.090

你可以这样做是你想使用链接。

```
$("<tr><td>'text to add to table'</td></tr>").insertAfter('#playlistTable tr:last').show('highlight',500); 
```

[您可以在http://docs.jquery.com/Manipulation/insertAfter#content](http://docs.jquery.com/Manipulation/insertAfter#content)查看文档

# jquery - Drupal 中带有 hook_form_alter 的 jQuery Magic

> ID：640677
> 
> 赞同：3
> 
> 时间：2009-03-12T22:01:27.940
> 
> 标签：jquery, drupal, html-select

Pro Drupal 书中没有太多关于 ahah 的教程，但我试图从简单的东西开始。我有两种内容类型，“主题”和“提示”和类别。主题是提示中的节点参考字段。主题按类别组织。

在填写提示表单时，我希望在选择主题列表时主题所属的类别出现在 div 中。

我找到了一个 jQuery 教程，但很好奇如何在所有这些中使用 ahah。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-13T15:02:13.553

AHAH 用于替换页面上的一部分 HTML。因此，您可以在一个模块中创建一个菜单项，该菜单项指向一个函数，该函数将发现并返回您想要在 div 中的文本。

这在第 270 页的 Pro Drupal 开发中显示。您可以从以下位置下载 poof 模块

[http://www.drupalbook.com/files/PDD2ed_code.zip](http://www.drupalbook.com/files/PDD2ed_code.zip)

并检查它以了解它是如何工作的。唯一的区别是 poof 模块使用提交表单元素而不是您要使用的选择表单元素，并且它返回硬编码字符串“POOF”，而您想要发现并返回类别的名称。但这是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T03:28:26.093

Drupal 中的 AHAH 表格还不是很容易。在 Drupal 5 中这几乎是不可能的，在 Drupal 6 中这是非常可行的，但是代码非常难看，看起来在 Drupal 7 中会改进很多。

如果您使用的是 Drupal 6，我建议您尝试[AHAH Helper 模块](http://drupal.org/project/ahah_helper)。它允许您拥有 AHAH 表单，而无需编写*任何*JavaScript 代码。

# jquery - 我的 jquery 代码不工作 IE6，IE7

> ID：640691
> 
> 赞同：0
> 
> 时间：2009-03-12T22:06:18.130
> 
> 标签：jquery

下面的代码工作正常，但不能在 IE6、IE7 中，下面是代码是否有任何错误请帮忙

```
$(document).ready(function(){

    $(".backgroundElement").bind( "keyup change", function () {

        var color=$("#colorpickerField1").attr('value');
        var brnbackgroundurl=$("#brnbackgroundurl").attr('value');
        var scrollwithpage=$('#scrollwithpage').val();
        var bgposition=$('#bgposition').val();
        var bgrepeat=$('#bgrepeat').val();

        $("body").css({
           'background':'#'+color,
           'background':'url('+brnbackgroundurl+')'+bgrepeat+' '+ bgposition,
           'background-attachment':scrollwithpage
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T22:42:37.887

```
'url('+brnbackgroundurl+')'+bgrepeat 
```

我认为错误出在这部分，您缺少一个空格。

像这样：

```
'url('+brnbackgroundurl+') '+bgrepeat 
```

并且为了避免更多问题，只需使用正确的属性顺序即可。来自 w3schools 的示例：

```
background: #00ff00 url('smiley.gif') no-repeat fixed center; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T22:08:31.463

你确实设置了两次背景.. 尝试使用 background-image 作为第二个参数。

# c# - 没有 Spring.NET 的 Apache ActiveMQ 访问

> ID：640694
> 
> 赞同：2
> 
> 时间：2009-03-12T22:06:29.143
> 
> 标签：c#, apache, activemq

我希望这里的某个人能够帮助我解决从 C# 与 ActiveMQ 集成的困难。这是我到目前为止所做的：

```
using Apache.NMS;
using Apache.NMS.ActiveMQ;
namespace JMSTest {
  class Program {
    static void Main(string[] args) {
      IConnectionFactory factory = new ConnectionFactory("tcp://localhost:61616/");
      IConnection connection = factory.CreateConnection();
      ISession session = connection.CreateSession();
    }
  }
} 
```

非常基本的东西：只需创建一个连接工厂，然后使用它来创建连接并最后创建一个会话。现在，当我执行此代码时，这是被抛出的异常：

```
System.ArgumentOutOfRangeException: Index and length must refer to a location within the string.
Parameter name: length
   at System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy)
   at System.String.Substring(Int32 startIndex, Int32 length)
   at Apache.NMS.ActiveMQ.OpenWire.StringPackageSplitter.StringPackageSplitterEnumerator.System.Collections.IEnumerator.get_Current()
   at Apache.NMS.ActiveMQ.OpenWire.OpenWireBinaryWriter.Write(String text)
   at Apache.NMS.ActiveMQ.OpenWire.BaseDataStreamMarshaller.LooseMarshalString(String value, BinaryWriter dataOut)
   at Apache.NMS.ActiveMQ.OpenWire.V2.ConnectionIdMarshaller.LooseMarshal(OpenWireFormat wireFormat, Object o, BinaryWriter dataOut)
   at Apache.NMS.ActiveMQ.OpenWire.OpenWireFormat.LooseMarshalNestedObject(DataStructure o, BinaryWriter dataOut)
   at Apache.NMS.ActiveMQ.OpenWire.BaseDataStreamMarshaller.LooseMarshalCachedObject(OpenWireFormat wireFormat, DataStructure o, BinaryWriter dataOut)
   at Apache.NMS.ActiveMQ.OpenWire.V2.ConnectionInfoMarshaller.LooseMarshal(OpenWireFormat wireFormat, Object o, BinaryWriter dataOut)
   at Apache.NMS.ActiveMQ.OpenWire.OpenWireFormat.Marshal(Object o, BinaryWriter ds)
   at Apache.NMS.ActiveMQ.Transport.Tcp.TcpTransport.Oneway(Command command) : Transport connection error: Index and length must refer to a location within the string.
Parameter name: length 
```

有谁知道发生了什么？我正在使用 Apache ActiveMQ 5.2.0 版（从他们的网站上全新下载）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-13T03:39:37.643

我尝试了与您在这里完全相同的方法，它似乎有效。内部网络上的某个人回复了您在 Nabble 上的请求，说有一个错误（在哪里？）已修复。也许下载最新版本的 Apache.NMS/Apache.NMS.ActiveMQ 并重试。

Apache.NMS 与[Spring.NET](http://www.springframework.net/download.html)一起提供——这可能是获取 Apache.NMS 的最好和最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-13T10:54:03.277

好了，问题解决了。花了一段时间，但在安迪·怀特发送的帖子的帮助下，我能够按照我想要的方式启动并运行它。

问题当然是那些当前在[http://svn.apache.org/viewvc/activemq/activemq-dotnet/](http://svn.apache.org/viewvc/activemq/activemq-dotnet/)上可用的库完全被破坏并且根本无法工作。

谢谢安迪！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-22T02:42:55.973

只是为了回应评论“使用大小超过 25MB 的框架来发送和接收来自/到消息队列的消息似乎有点矫枉过正。”

我当然同意，这确实是一个打包问题，我们包括针对 .NET 1.1 到 3.0 的编译二进制文件（使用 .pdbs 进行调试和发布构建）参考文档、示例应用程序等。如果您查看创建基于 ActiveMQ NMS 的 Spring.NET 应用程序所需的 .dll 的大小，它是

Common.Logging 28KB、Spring.Aop 152KB、Spring.Core 744KB、Spring.Data 340KB 和 Spring.Messaging.Nns 104KB，总共约 1.4MB。

标记

# google-maps - 谷歌地图显示两个地点之间的路线和距离

> ID：640695
> 
> 赞同：2
> 
> 时间：2009-03-12T22:06:52.293
> 
> 标签：google-maps, distance

我正在开发一个个人资料网站，该网站显示使用谷歌地图的人的位置。

我已经实现了谷歌地图，现在它显示了你正在查看的人住在哪里以及你住在哪里。

代码在这里：

```
 var map = null;
  var geocoder = null;

  function initialize() {
    if (GBrowserIsCompatible()) {
      map = new GMap2(document.getElementById("map"));
      map.addControl(new GLargeMapControl());
      map.addControl(new GScaleControl());
      map.addControl(new GMapTypeControl());
      geocoder = new GClientGeocoder();
    }
  }

  function showAddresses(address1,address2) {
    if (geocoder) {
      geocoder.getLatLng(
        address1,
        function(point) {
          if (!point) {
            alert(address1 + " not found");
          } else {
            map.setCenter(point, 13);
            var marker = new GMarker(point);
            map.addOverlay(marker);
            marker.openInfoWindowHtml(address1);
          }
        }
      );

      geocoder.getLatLng(
      address2,
      function(point) {
        if (!point) {
          alert(address2 + " not found");
        } else {
          map.setCenter(point, 13);
          var marker = new GMarker(point);
          map.addOverlay(marker);
        }
      }
    );
    }
  } 
```

然而，它没有做的是当这两个地方相距太远以至于地图上不适合时修改缩放级别。我不知道如何解决这个问题。

下一步是我想让地图在遵循该路线时显示两点之间的视觉路线及其距离。我已经在谷歌地图网站上尝试过，我知道他们有这个功能。我只是找不到任何关于如何实现它的文档。

或者只是创建一个指向谷歌地图的超链接并为您提供准备好的页面会更好吗？那我也不知道怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T22:14:12.213

从来没有做过，但是在 api 中看到了 GDirections：

[http://code.google.com/apis/maps/documentation/reference.html#GDirections](http://code.google.com/apis/maps/documentation/reference.html#GDirections)

看起来像您正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T00:17:55.540

将所有点添加到多边形。从 Polygon 中获取 LatLongBounds，它可用于导出缩放级别。

```
 private function setMapZoomLevelBasedOnPlottedPoints(polygonPoints:Array):void
    {
        var pointBounds:LatLngBounds = getLatLongBounds(polygonPoints);
        _map.setCenter(pointBounds.getCenter());
        _map.setZoom(_map.getBoundsZoomLevel(pointBounds) - 1);
    }

    private function getLatLongBounds(polygonPoints:Array):LatLngBounds
    {
    for(var i:Number; i < polygonPoints; i++)
    {
            polygonPoints.push(polygonPoints[i] as LatLong);
    }
        var polygon:IPolygon = new Polygon(polygonPoints);
        return polygon.getLatLngBounds();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T22:13:42.417

它在 API 中。你可以找到它

```
route site:http://code.google.com/apis/maps 
```

例如，这里有一个页面，它在 Flash 叠加层中显示“司机路线”。当您在 Flash 之外制作地图时，API 会有所不同，但基本代码相同。 [http://code.google.com/apis/maps/documentation/flash/services.html](http://code.google.com/apis/maps/documentation/flash/services.html)

我在 MapQuest 上做了更多的工作，所以我刚刚进入 Google Maps API。

# macos - 使用 PackageMaker 在安装时运行脚本

> ID：640701
> 
> 赞同：16
> 
> 时间：2009-03-12T22:11:11.783
> 
> 标签：macos, installation, packagemaker

我有一个需要为其创建安装程序的应用程序，安装程序需要做的所有事情（除了复制应用程序）就是运行一个不属于应用程序本身的脚本（或可执行文件）。关于我如何做到这一点的任何帮助？我在“**要求**”选项卡中看到**“脚本结果”操作，并且“****操作**”选项卡中还有“**预安装操作**”，其中包含“**打开文件**”操作。这些中的任何一个都可以完成这项工作还是我应该寻找其他地方？

 ***** * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-12T22:17:24.250

[这](http://s.sudre.free.fr/Stuff/PackageMaker_Howto.html)是一个很好的方法

> 在安装过程中可以启动 7 种类型的脚本：
> 
> **InstallationCheck：** 此脚本在安装过程开始时启动（甚至在身份验证步骤之前）。它可用于检查该软件包是否可以安装在此计算机上。
> 
> **VolumeCheck：** 此脚本在“选择目标”步骤中启动。它用于确定可以在哪个卷上安装 Package。
> 
> **预检：** 此脚本在用户单击“安装”按钮后立即启动。
> 
> **preinstall / preupgrade：** 如果有一个预检脚本，则在预检脚本之后启动此脚本（在单个软件包安装的情况下）；否则就在用户单击“安装”按钮之后。
> 
> 如您所见，这里有两种类型的脚本。preinstall 是在 Package 从未安装时启动的（从 Installer.app 的角度来看），preupgrade 是在 Package 已经安装时启动的。为了确定一个包是否已经安装，Installer.app 正在查看以下目录的内容：/Library/Receipts。如果其中有一个名为 PackageName.pkg 的文件，则该 Package 已经安装，否则为第一次安装。
> 
> **postinstall / postupgrade：** 此脚本在安装包中的文件后启动。请参阅（预安装/预升级）以查看启动了哪一个。
> 
> **postflight：** 此脚本在 postinstall / postupgrade 脚本之后或已安装软件包时启动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-10-22T02:20:55.970

我刚刚设法在我用 PackageMaker 制作的包中包含了一个 Shell 脚本。我需要在安装后将我的应用程序添加到登录项中，所以我制作了一个名为的脚本`postflight.sh`并将其放入文件夹中。（似乎它适用于任何位置）

然后在我的包中，我有应用程序。在 Contents，Package:Applications 中，在 Scripts 选项卡中，我选择`postflight.sh`in Postflight 部分。就是这样。

我的`postflight.sh`开始

```
#!/bin/bash 
```

然后它有一些脚本将应用程序放入登录项。当我没有那个时，我可以制作包，但安装失败。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-06T02:46:52.250

这篇[PackageMaker How-To](http://s.sudre.free.fr/Stuff/PackageMaker_Howto.html)文章已经过时了，但它提供了一些关于脚本的非常有用的信息，大约在一半的时候。查找显示从 shell 和 perl 中看到的命令行变量的表，以及一些有用的退出状态值。

# compact-framework - 在 Compact Framework 中读取 StreamReader 后转换文件编码

> ID：640705
> 
> 赞同：0
> 
> 时间：2009-03-12T22:12:46.243
> 
> 标签：compact-framework, streamreader

我逐行阅读文本文件，到目前为止一切顺利。我只是用这个：

```
 using (StreamReader sr = new StreamReader(this._inFilePath))

            {
                string line;
                int index = 0;

                // Read and display lines from the file until the end of 
                // the file is reached:
                while ((line = sr.ReadLine()) != null)
                {
                    //skip empty lines
                    if (line == "")
                    {
                        continue;
                    } 
}
} 
```

现在我注意到我可能需要在阅读文件后将其转换为 Unicode。它是如何完成的？有人使用 Convert 类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-12T22:16:05.970

*阅读后*无法将文本转换为 Unicode ，因为到那时它已经是一个字符串，包含映射到 Unicode 代码点的实际字符。您在代码示例中所做的是将文件读取*为*Unicode，因为[这是默认`StreamReader`行为](http://msdn.microsoft.com/en-us/library/f2ke0fzy.aspx)。

是什么让你认为你必须转换任何东西？文本是否损坏？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T23:43:08.880

问题解决了：

```
 using (StreamReader sr = new StreamReader(this._inFilePath, System.Text.Encoding.Default)) 
```

显然默认对应于 ANSI，并且生成的文件是 ANSI（不是 UTF-8）。

谢谢大家的回复！

# iphone - 更改相同类型的所有界面元素的颜色

> ID：640717
> 
> 赞同：2
> 
> 时间：2009-03-12T22:15:18.967
> 
> 标签：iphone, objective-c, uikit

我想知道是否可以用几行代码更改我的应用程序中按钮的默认颜色？手动更改每个按钮的颜色可能真的很无聊。特别是如果你有很多。

例如，我希望我的所有按钮都是橙色而不是原来的白色。

提前谢谢你，伊利亚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T23:15:45.093

恐怕没有全局设置。

可以遍历对象的所有视图和子视图，查询它们的类型，然后根据需要应用自定义颜色。这允许您在应用程序中有一个位置，您可以将视图传递到并应用所有内容。

就像是;

```
//! Applies application specific styles to UIKit objects
void applyStyles(UIView* view)
{
  for(UIView* subview in view.subviews)
  {
    // test type of view
    if([[subview class] isEqualToString:@"UIButton"] == YES)
    {
      // apply colors for buttons
    }
    else if([[subview class] isEqualToString:@"SomethingElse"] == YES)
    {
      // apply colors for something else
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-17T23:55:49.167

我建议创建 UIButton (MyCustomButton) 的子类，并在子类的构造函数中应用您想要的任何风格元素。

如上所述将 UIButtons 传递给某种“StyleManager”比说更好的方法

```
button.backgroundColor = [UIColor orangeColor]; 
```

但你仍然必须通过你的代码并说出类似的东西

```
[StyleManager applyStyles:viewThatContainsButton]; 
```

这将将样式应用到代码库中的每个控制器和某些视图元素的解决方案传播开来。创建子类可以让您使用一行代码应用样式，而不是每个视图一行。

将您的问题的解决方案收集到一个类中可以消除这种解决方案的蔓延，并且还应该减少***维护***工作。

# c++ - 最常用的 STL 算法、谓词、迭代器

> ID：640721
> 
> 赞同：6
> 
> 时间：2009-03-12T22:18:54.590
> 
> 标签：c++, stl

我在stackoverflow上找不到这个问题。但我想知道人们如何使用 STL（没有花哨的提升）......只是一个 ol' 时尚 STL。多年来获得的技巧/提示/最常用的案例......也许还有陷阱......

让我们分享它...

每个答案一个提示...带有代码示例-

**编辑**这是一个糟糕的问题，因为它会导致否决票吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-12T22:22:10.837

我最喜欢的是将任何可流式传输的内容更改为字符串：

```
template <class TYPE> std::string Str( const TYPE & t ) {
    std::ostringstream os;
    os << t;
    return os.str();
} 
```

然后：

```
string beast = Str( 666 ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-12T22:26:47.923

我在几乎所有项目中都使用 STL，从循环（使用迭代器）到将输入拆分为程序。

用空格标记输入字符串并将结果输入到 std::vector 以供稍后解析：

```
std::stringstream iss(input);
std::vector<std::string> * _input = new std::vector<std::string>();

std::copy(std::istream_iterator<std::string>(iss), 
          std::istream_iterator<std::string>(), 
          std::back_inserter<std::vector<std::string> >(*_input)); 
```

其他最喜欢的当然是 std::reverse 和`<algorithm>`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-12T22:21:45.083

使用vector替换pointer+new。那是巨大的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-13T00:16:56.570

我喜欢 istream_iterator 和 ostream_iterator。

读取流并使其看起来像任何其他容器的好方法：

```
// Copies a stream of integers on the std input
// into a vector.
int main()
{
    std::vector<int>    data;
    std::copy(std::istream_iterator<int>(std::cin),
              std::istream_iterator<>(),
              std::back_inserter(data)
             );

    // By uisng the istream_iterator<> the input just becomes another container.
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-12T22:59:21.513

我爱矢量。这*应该*是 C++ 数组。不过，我做了很多实时工作。不需要确定性的人可能更喜欢列表。

几乎每个人都在使用乱七八糟的东西。

我不太会使用算法，因为我们在这里仍然使用 VS6（它不能处理复杂的模板实例化）。不过这很快就会过去。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-12T22:21:51.243

最有用的算法（恕我直言） - std::for_each

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-12T22:58:47.490

我不记得有一个最喜欢或最常用的算法/谓词/迭代器，只是那个为我当时试图完成的工作做得最好的那个。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-12T23:26:32.523

如果由于某种原因无法访问 Boost Bind，则这些东西`functional`：、、、、`bind1st`等非常有用。`bind2nd``mem_fun``equal_to`

这是一个非常主观的问题，很大程度上取决于您的团队编码风格、项目类型和其他未知因素。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-12T22:25:25.947

没有最常用的 STL 算法、谓词或迭代器。这就像问 C++ 语言中最常用的运算符是什么。你更经常使用什么，`operator+`或者`operator-`？你喜欢`if`吗`while`？或者也许到`throw`？

一切都在必须使用时使用。

PS：我建议你在问这些问题之前先阅读Scott Meyers 的[Effective STL](https://rads.stackoverflow.com/amzn/click/com/0201749629)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-12T22:42:06.220

问画家“你最喜欢/最常用的画笔是什么？” :)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-03T21:13:17.597

以下内容有点“邪恶”，但它使我们免于许多错误。

（更新，感谢@Ricky65 的评论让我回到了这里。）C++11 有一个[基于范围的 for 循环](http://en.wikipedia.org/wiki/C++11#Range-based_for-loop)，如果你的编译器支持它，它就远胜于此；不过，我们仍然使用一些*非常*古老的编译器。

```
#define FOREACH(iter,stlContainer) \
for ( typeof(stlContainer.begin()) iter = stlContainer.begin(), \
                                   iter##End_Cached = stlContainer.end(); \
      iter != iter##End_Cached; \
      ++迭代)

```

（进一步更新，归功于 Boost 开发人员。）它松散地基于更复杂但功能更强大`BOOST_FOREACH`的宏，但优点是在小型案例的调试构建中更容易逐步完成，并且不需要一小堆提升标头（在某些代码库/组中是禁止的）。

使用`std::for_each`通常是可取的，但有一些缺点：

*   用户必须非常了解/// 之间的交互，`bind1st`才能`bind2nd`有效地将其用于非平凡的“访问”——boost 修复了很多这些问题，但并不是每个人都拥有或知道`ptr_fun`boost`mem_fun`
*   用户可能需要为单个使用点提供自己的单独函子（通常是结构）；所述结构不能在循环周围的函数中声明，导致相关代码的“非局部性”——在某些情况下，它的读取以及逻辑与函数其余部分的流程不一致
*   它并不总是很好地内联，具体取决于编译器

上面列出的 FOREACH 宏提供了一些东西：

*   就像`std::for_each`，你不会让你的边界测试出错（没有迭代结束，等等）
*   它将使用`const_iterators`常量容器

请注意，它确实需要一个有点非标准的“typeof”扩展。

一个典型的用法可能是：

```
列表<shared_ptr<事物>> m_memberList；
// 之后
FOREACH(iter, m_memberList)
{
   if ( (*iter)->getValue() < 42 ) {
      doSomethingWith( *iter );
   }
}

```

我对这个宏并不完全满意，但它在这里非常宝贵，特别是对于在 STL 感知设计方面没有太多经验的程序员。

（请随时指出优点/缺点/缺陷，我会更新答案。）

# c++ - 使用 stl 函数快速填充矢量、映射和集合

> ID：640731
> 
> 赞同：5
> 
> 时间：2009-03-12T22:22:10.090
> 
> 标签：c++, stl

我想用一些测试数据很快地填充这些容器。最好和快速的方法是什么？它不应该太复杂，因此和不人道的短，但也不应该冗长

**编辑**

伙计们，我认为你可以用 memset 做一些事情，知道向量有一个下划线数组？另外，地图呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-12T22:30:10.867

*   提升分配库方式（[http://www.boost.org/doc/libs/1_38_0/libs/assign/doc/index.html](http://www.boost.org/doc/libs/1_38_0/libs/assign/doc/index.html)）

    使用命名空间 boost::assign;
    标准::向量<int> v;
    v += 1,2,3,4,5,6,7,8,9;

    std::map< std::string, int > m;
    插入（米）（“酒吧”，1）（“富”，2）；

    向量<int> v;
    v += 1, 2, repeat_fun(4, &rand), 4;

*   std::generate 或 std::generate_n

*   std::backinserter - 有时会帮助你

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-12T22:28:01.150

您可以使用`std::fill`或`std::generate`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-12T23:06:45.740

如果您已经有初始数据，比如在 C 样式数组中，请不要忘记这些 STL 容器具有“2-iterator 构造函数”。

```
const char raw_data[100] = { ... };

std::vector<char> v(raw_data, raw_data + 100); 
```

**编辑**：我被要求展示一个地图的例子。通常不会有成对的数组，但在过去，我创建了一个 Python 脚本，它从原始数据文件生成成对的数组。然后我#include这个代码生成的结构并用它初始化一个地图，如下所示：

```
#include <map>
#include <string>
#include <utility>

using namespace std;

typedef map<string, int> MyMap;

// this array may have been generated from a script, for example:
const MyMap::value_type raw_data[2] = {
   MyMap::value_type("hello", 42),
   MyMap::value_type("world", 88),
};

MyMap my_map(raw_data, raw_data + 2); 
```

或者，如果您有一个键数组和数据值数组，您可以循环它们，调用 map.insert(make_pair(key, value));

您还询问 memset 和向量。我认为使用 memset 初始化向量没有任何真正的优点，因为可以通过构造函数为向量的所有元素赋予初始值：

```
vector<int> v2(100, 42);  // 100 ints all with the value of 42
vector<string> v(42, "initial value");   // 42 copies of "initial value" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T22:36:22.723

我使用自定义运算符插入数据：

```
#include <vector>
#include <iostream>
#include <string>

using namespace std;

template <class T>
vector<T>& operator<<(vector<T>& vec, const T& x) {
    vec.push_back(x);
    return vec;
}

vector<string>& operator<<(vector<string>& vec, char* cstr) {
    string s(cstr);
    vec.push_back(s);
    return vec;
}

int main() {
    vector<int> foo;
    vector<string> bar;
    foo << 7 << 8 << 9 << 10;
    bar << "foo" << "bar" << "baz";
} 
```

# python - GAE 中的格式化文本

> ID：640733
> 
> 赞同：3
> 
> 时间：2009-03-12T22:22:32.677
> 
> 标签：python, google-app-engine, google-cloud-datastore

谷歌应用引擎问题：从用户那里获取格式化文本（不一定是富文本）然后将其存储在数据存储中的文本或博客属性中的好方法是什么？我主要寻找的是存储换行符和空格字符串，以便文本返回时看起来与提交时相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T22:41:52.803

文本将始终以与您输入的方式相同的方式“返回”。您将丢失一些对 HTML 的格式呈现（正如您注意到行尾和空格）。一种解决方案可能是将文本呈现为`<pre>` [元素（这意味着预格式化文本）](http://www.w3schools.com/TAGS/tag_pre.asp)。

```
<pre>
This text     will

be formatted correctly
</pre> 
```

另一种方法是将您的格式转换为格式正确的 HTML。通常，Wiki 可能会这样做：*将文本存储为标记，并将其呈现为 HTML*。这可能正是这个网站对它的帖子等所做的事情。如果你选择这条路线，我可以推荐[creoleparser](http://code.google.com/p/creoleparser/)库，它在 Appengine 上运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-13T08:00:57.793

其他常用的*简化标记*包括[Textile](http://pypi.python.org/pypi/textile)和[Markdown](http://pypi.python.org/pypi/Markdown)。

# c# - 保存 IList 或 IQueryable 到 Excel - C#

> ID：640734
> 
> 赞同：3
> 
> 时间：2009-03-12T22:23:12.147
> 
> 标签：c#, excel, .net-3.5

我正在通过 Linq to SQL 生成报告并将其显示在网站上。

我需要将报告保存在 MS Excel（或 .csv）中并将其通过电子邮件发送给用户。

关于如何将其保存为 Excel 或 .csv 的任何想法？

.NET 3.5 / C#

编辑：

Gridview [hack](http://mattberseth.com/blog/2007/04/export_gridview_to_excel_1.html)完美。如果您在页面上使用 AJAX，请确保将 PostBaseTrigger 添加到更新面板以导致 FULL POSTBACK，否则它将无法正常工作。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Button ID="Button1" runat="server" Text="Export Grid" 
            onclick="Button1_Click" />
    </ContentTemplate>
    <Triggers>
        <asp:PostBackTrigger ControlID="Button1" />
    </Triggers>
</asp:UpdatePanel> 
```

我还找到了一个[在 .NET 中生成 Excel XML 工作簿的库](http://www.carlosag.net/Tools/ExcelXmlWriter/)，但是它不像公认的解决方案那么简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-12T22:51:37.100

转到[Code Project上有关](http://www.codeproject.com/KB/linq/LINQtoCSV.aspx)[**LINQtoCSV**](http://www.codeproject.com/KB/linq/LINQtoCSV.aspx)[的这篇文章](http://www.codeproject.com/KB/linq/LINQtoCSV.aspx)**。然后在 VS 中打开源代码并注释掉 FieldMapper.cs 中的第 201 行，以修复破坏列排序的错误：**

 **```
//Array.Sort(m_IndexToInfo); 
```

重新编译，你很高兴。

（我从文章的评论中发现）

然后使用：

```
CsvFileDescription outputFileDescription = new CsvFileDescription
{
    SeparatorChar = '\t', // tab delimited
    FirstLineHasColumnNames = false // no column names in first record
};

CsvContext cc = new CsvContext();

cc.Write(
    YOUR_IQUERYABLE_RESULT_HERE,
    "filename.csv",
    outputFileDescription); 
```

我做了一个简化的 IQueryable `<T`>.WriteToFile(path) 扩展方法，但我在这台机器上没有它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T22:30:34.203

这个[gridview hack](http://mattberseth.com/blog/2007/04/export_gridview_to_excel_1.html)是我找到的最简单的解决方案。

# javascript - Google Chrome：JavaScript 关联数组，乱序求值

> ID：640745
> 
> 赞同：7
> 
> 时间：2009-03-12T22:28:59.603
> 
> 标签：javascript, google-chrome, associative-array

好的，所以在网页上，我有一个 JavaScript 对象，我将其用作关联数组。这在页面加载时静态存在于脚本块中：

```
var salesWeeks = {
    "200911" : ["11 / 2009", "Fiscal 2009"],
    "200910" : ["10 / 2009", "Fiscal 2009"],
    "200909" : ["09 / 2009", "Fiscal 2009"],
    "200908" : ["08 / 2009", "Fiscal 2009"],
    "200907" : ["07 / 2009", "Fiscal 2009"],
    "200906" : ["06 / 2009", "Fiscal 2009"],
    "200905" : ["05 / 2009", "Fiscal 2009"],
    "200904" : ["04 / 2009", "Fiscal 2009"],
    "200903" : ["03 / 2009", "Fiscal 2009"],
    "200902" : ["02 / 2009", "Fiscal 2009"],
    "200901" : ["01 / 2009", "Fiscal 2009"],
    "200852" : ["52 / 2008", "Fiscal 2009"],
    "200851" : ["51 / 2008", "Fiscal 2009"]
}; 
```

键/值对的顺序是有意的，因为我将对象转换为 HTML 选择框，如下所示：

```
<select id="ddl_sw" name="ddl_sw">
<option value="">== SELECT WEEK ==</option>
<option value="200911">11 / 2009 (Fiscal 2009)</option>
<option value="200910">10 / 2009 (Fiscal 2009)</option>
<option value="200909">09 / 2009 (Fiscal 2009)</option>
<option value="200908">08 / 2009 (Fiscal 2009)</option>
<option value="200907">07 / 2009 (Fiscal 2009)</option>
<option value="200906">06 / 2009 (Fiscal 2009)</option>
<option value="200905">05 / 2009 (Fiscal 2009)</option>
<option value="200904">04 / 2009 (Fiscal 2009)</option>
<option value="200903">03 / 2009 (Fiscal 2009)</option>
<option value="200902">02 / 2009 (Fiscal 2009)</option>
<option value="200901">01 / 2009 (Fiscal 2009)</option>
<option value="200852">52 / 2008 (Fiscal 2009)</option>
<option value="200851">51 / 2008 (Fiscal 2009)</option>
</select> 
```

...使用看起来像这样的代码（从函数中截取）：

```
var arr = [];
arr.push(
    "<select id=\"ddl_sw\" name=\"ddl_sw\">" +
    "<option value=\"\">== SELECT WEEK ==</option>"
);

for(var key in salesWeeks)
{
    arr.push(
        "<option value=\"" + key + "\">" +
        salesWeeks[key][0] + " (" + salesWeeks[key][1] + ")" +
        "<\/option>"
    );
}

arr.push("<\/select>");

return arr.join(""); 
```

这在 IE、FireFox 和 Opera 中都可以正常工作。

然而在 Chrome 中，这个顺序很奇怪：

```
<select id="ddl_sw" name="ddl_sw">
<option value="">== SELECT WEEK ==</option>
<option value="200852">52 / 2008 (Fiscal 2009)</option>
<option value="200908">08 / 2009 (Fiscal 2009)</option>
<option value="200906">06 / 2009 (Fiscal 2009)</option>
<option value="200902">02 / 2009 (Fiscal 2009)</option>
<option value="200907">07 / 2009 (Fiscal 2009)</option>
<option value="200904">04 / 2009 (Fiscal 2009)</option>
<option value="200909">09 / 2009 (Fiscal 2009)</option>
<option value="200903">03 / 2009 (Fiscal 2009)</option>
<option value="200905">05 / 2009 (Fiscal 2009)</option>
<option value="200901">01 / 2009 (Fiscal 2009)</option>
<option value="200910">10 / 2009 (Fiscal 2009)</option>
<option value="200911">11 / 2009 (Fiscal 2009)</option>
<option value="200851">51 / 2008 (Fiscal 2009)</option>
</select> 
```

注意：这个顺序虽然很奇怪，但在随后的刷新中不会改变。它总是按这个顺序。

那么，Chrome 在做什么呢？它如何处理循环的一些优化？

首先，依赖键/值对在*任何*关联数组中声明的顺序是错误的吗？

我以前从未质疑过它，我只是假设这个顺序会成立，因为这种技术在其他浏览器中一直对我有用。但我想我从未见过它在任何地方都说订单是有保证的。也许不是？

任何见解都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-12T22:42:03.503

将关联数组想象成一个纸袋，其中放置了所有键值对。当您将手伸入麻袋查看这些对时（例如使用 for...in 循环），您遇到它们的顺序实际上是随机的。

如果您想按特定顺序查看它们，则需要将键提取到数组中并对其进行排序。然后遍历数组，使用您遇到的键来索引关联数组。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-12T22:33:41.467

不能保证元素在关联数组中的存储顺序。您必须明确地对输出进行排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T23:10:06.277

正如其他答案所说，对象属性的迭代顺序在规范中没有定义，即使主要浏览器都以定义的顺序迭代它们。

如果对象的所有属性都包含原始值，Chrome 也会按顺序枚举它们。John Resig 在此处（在“for 循环顺序”下）提供了有关 Chrome 行为的更多详细信息：http: [//ejohn.org/blog/javascript-in-chrome/](http://ejohn.org/blog/javascript-in-chrome/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-05-24T22:20:17.050

正如所指出的，Chrome 的行为是完全有效的。

这是一些 OO 思维可以提供帮助的一个很好的例子。你真的想要一个关联数组还是只是一个对象列表？

```
var salesWeeks = [
    ["200911", "11 / 2009", "Fiscal 2009"],
    ...
]
...
for(var key in salesWeeks)
{
    arr.push(
        "<option value=\"" + salesWeeks[key][0] + "\">" +
        salesWeeks[key][1] + " (" + salesWeeks[key][2] + ")" +
        "<\/option>"
    );
} 
```

我认为会更好地为您服务（对于那些提倡某种形式的人来说，顺序已经定义了-您为什么要做额外的工作？）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-01-23T22:00:14.250

@curtainDog：不！不！在 JavaScript 中将“for .. in”与 Array 对象一起使用是不好的 - 这里的大多数响应的全部要点是“for .. in”不保证任何顺序。此外，“for .. in”将从对象的构造函数的原型中获取属性，并且不会遍历不存在的键。

@Samnan：规范只是说不能保证迭代顺序；这意味着浏览器可以自由地以排序顺序、插入顺序、随机顺序或其他方式进行迭代。它就像一个哈希表——认为它是随机的，即使它碰巧以某种明显的顺序出现。

我相当确定大多数浏览器会使用 Array 对象查找“for..in”，并按数字顺序进行迭代，这样事情就不会中断；然而，它并没有像大多数使用它的人认为的那样做，除非你特别需要*object*类型的迭代，否则应该避免它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-05T22:08:03.197

这不是一个真正的好习惯，但是......

如果您在值中添加空格，则 chrome 不会将值视为数字，也不会按值对它​​们进行排序。

例子：

```
<select>
  <option value=" 3">Third</option>
  <option value=" 1">First</option>
  <option value=" 2">Second</option>
</select> 
```

好的一面是，您不必像有人建议的那样从 ID 中添加然后删除字母字符（不记得是否在此帖子或其他类似问题的帖子中），您可以轻松修剪它，但大多数时候空间只是忽略，如果您将它们发布或获取到另一个文件，他们只会看到整数值而不是空格。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2010-09-29T13:44:17.653

与所有其他答案相反，它肯定是 Chrome 中的一个错误

**原因：**

如果数据结构是像 Barry 所说的纸袋，那么：

值应始终随机化。铬不是这种情况

如果数据结构是顺序的，那么：

这些值应按它们添加到结构中的顺序排列

虽然其他浏览器遵循第二种方法，但 chrome 都不遵循，并且仍然没有解释 chrome 在访问时对数据结构的排序顺序是什么。

# windows - 您可以在 WinPE 环境中为 GUI 使用哪些编程语言/平台？

> ID：640763
> 
> 赞同：3
> 
> 时间：2009-03-12T22:36:21.070
> 
> 标签：windows, user-interface, programming-languages, winpe

我正在着手开展一个必须在[WinPE](http://perl-win32-gui.sourceforge.net/cgi-bin/docs.cgi)中交付的项目。我可能会使用 WinPE 3.0。我也知道[Bart 的 PE](http://www.nu2.nu/pebuilder/)和[VistaPE](http://www.vistape.net/)，但我想我会坚持使用 WinPE。我需要 x64 支持和全系列的存储驱动程序。

我想开发一个具有 GUI 和网络访问权限的应用程序。我想在 Visual Studio 中工作来设计我的 GUI，尽管这不是必需的。

在支持 GUI 的情况下，我可以使用哪些编程语言来定位 WinPE？通过一些研究，我发现（微软）根本不支持 .NET，所以这似乎排除了所有 C#、现代 VB 等。有人运行 Java/Swing 吗？带有 MFC 或 ATL（现代）的 C++？入侵 .NET 以获得 CLR 支持？

* * *

我可以用[Win32::GUI 运行 Perl。](http://perl-win32-gui.sourceforge.net/cgi-bin/docs.cgi)但它不允许我使用 Visual Studio 和资源视图来创建我想要的 GUI。这一切都必须以编程方式完成。或者这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-01-12T22:16:41.160

试试Realbasic，程序会自己编译本地dll。我用它通过 PXE 为 PE 创建了一个前端加载器。Realbasic 是跨平台的 windows/mac/linux。你会想要专业版，但在我的公司，这是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-07-05T16:22:07.583

您可以使用 Mono 和 C#，但它会使 WinPE 更大。我听说你可以使用 mkbundle 来保持它更合理。

我个人使用 Borland Delphi（v7 和更早版本，不确定 turbo 是否有效）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:50:03.000

您现在可以使用 .NET，从 WinPE 4.0 [http://www.deploymentresearch.com/Blog/tabid/62/EntryId/41/Windows-8-Preview-Howto-Creating-a-WinPE-boot-image-with -NET-Framework-and-PowerShell.aspx](http://www.deploymentresearch.com/Blog/tabid/62/EntryId/41/Windows-8-Preview-Howto-Creating-a-WinPE-boot-image-with-NET-Framework-and-PowerShell.aspx)

# javascript - 如何将“stringByEvaluatingJavaScriptFromString”传递给 webView 框架？

> ID：640767
> 
> 赞同：2
> 
> 时间：2009-03-12T22:37:30.613
> 
> 标签：javascript, webview

[[webView mainFrame] loadHTMLString:html_string baseURL:[NSURL fileURLWithPath:@"/"]]; [[[webView mainFrame] webView] stringByEvaluatingJavaScriptFromString:test];

当我省略引用 location.href = "#id" 的第二行时，webView 将滚动到适当的行，页面加载正常。但是当我包含它并期望它工作时，我只会得到一个空白页。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-04T16:49:40.763

我想如果页面仍在加载设置位置会中止它。您可以尝试通过 webView:didFinishLoadForFrame: 委托等待。

# c++ - 优化读/写大数据（C++）

> ID：640784
> 
> 赞同：7
> 
> 时间：2009-03-12T22:44:28.430
> 
> 标签：c++, optimization

我正在为 C++ 模拟应用程序优化读取/写入大量数据。称为“映射”的数据基本上由整数、双精度、浮点数和单个枚举组成。大多数地图数据的大小是固定的，但其中一小部分的大小可以变化（从几 KB 到几 KB）。几个这样的映射（通常是数百万）在应用程序启动时计算一次，然后存储在单个二进制文件中，以便在每个仿真时间步进行解析。

由于有几百万张地图，这个二进制文件的解析非常慢，而 fseek 和 fread 是主要的瓶颈。我正在寻找一种替代方法来做同样的事情。

任何指针？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-12T22:50:27.587

由于您没有提到您正在运行它的操作系统，您是否查看过内存映射文件，然后使用标准内存例程来“遍历”文件？

这样你就不用 fseek/fread 而是使用指针算法。这是一个将一个文件从源文件复制到目标文件[的 mmap 示例。](http://www.cs.purdue.edu/homes/fahmy/cs503/mmap.txt)这可以提高性能。

您可以研究的其他事情是将文件拆分为较小的文件，并使用与时间单位相对应的哈希值关闭然后打开下一个文件以继续模拟，这样可以处理可以更积极地缓存的较小文件由主机操作系统！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-12T23:17:14.823

您可以考虑使用内存映射文件。例如，请参见[boost::interprocess](http://www.boost.org/doc/libs/1_38_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.mapped_file)，因为它们提供了方便的实现。

您也可以考虑使用[stlxxl](http://stxxl.sourceforge.net/)，它提供了针对大型基于文件的数据集的类似 STL 的功能。

还有一个——如果你想像迭代器一样访问你的数据，那么看看[boost::iterator_facade](http://www.boost.org/doc/libs/1_38_0/libs/iterator/doc/iterator_facade.html)。

如果您不想玩花哨的技巧，您可以提供额外的二进制文件，其中包含带有结构的文件的索引（包含结构起始偏移量的偏移量）。这将提供*间接*随机访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-12T23:35:12.160

这个想法的有效性取决于您的访问模式，但如果您不是在每个周期查看可变大小的数据，您可以通过重新排列文件结构来加快访问速度：
而不是像这样编写结构的直接转储：

```
struct { 
  int x;
  enum t;
  int sz
  char variable_data[sz];
}; 
```

您可以预先编写所有固定大小的部分，然后存储可变部分：

```
struct {
  int x;
  enum t;
  int sz;
  long offset_to_variable_data;
}; 
```

现在，当您在每个周期解析文件时，您可以一次线性读取 N 条记录。当您需要获取可变大小的数据时，您只需要处理 fseek 。您甚至可以考虑将该变量部分保存在一个单独的文件中，以便您也只能通过该文件向前读取。

如果您确实按照其他人的建议使用内存映射文件，此策略甚至可以提高您的性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-12T22:51:54.200

在这种情况下可能不相关，但我设法通过写入压缩数据（zlib）和动态解压缩来提高文件读写繁重的应用程序的性能，减少读/写时间与增加 CPU 负载是一个胜利.

或者，如果您的问题是数据量不适合内存，并且您想将磁盘用作缓存，则可以查看 memcached，它提供了可扩展的分布式内存缓存。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-12T23:08:59.213

“数百万”地图听起来不像是很多数据。是什么阻止您将所有数据保存在内存中？

另一种选择是使用一些适合您需要的标准文件格式，例如[sqlite](http://www.sqlite.org/)（使用 SQL 存储/检索数据）或一些专门的格式，如[hdf5或使用](http://www.hdfgroup.org/HDF5/whatishdf5.html)[Google Protocol Buffers](http://code.google.com/apis/protocolbuffers/)等定义您自己的格式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-12T22:49:38.230

使用内存映射文件（[http://en.wikipedia.org/wiki/Memory-mapped_file](http://en.wikipedia.org/wiki/Memory-mapped_file)）；

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-12T22:51:27.647

将计算的数据存储在关系数据库中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-07T02:39:39.970

[Boost](http://www.boost.org)和[ACE](http://www.cs.wustl.edu/~schmidt/ACE.html)等框架提供对内存映射文件的平台独立访问。这应该会显着加快您的解析速度。

# .net - .net 使用 WebBrowser 控件和打印对话框进行批量打印

> ID：640789
> 
> 赞同：1
> 
> 时间：2009-03-12T22:45:49.610
> 
> 标签：.net, printing

我正在使用 .net webbrowser 控件打印 html 文档，并且我希望能够显示一次打印对话框，以便用户可以选择他们的打印机。

有什么方法可以显示打印对话框而不在每次 webbrowser 控件打印时都显示它？

是否可以使用打印文档并以某种方式将其设置传递给 webbrowser 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T08:43:46.077

您可以将参数传递给 Print-command 来说明是否显示打印对话框。例如，如果`m_webBrowser`是您的 WebBrowser 控件：

```
短标志 = 0x03；// PRINT_DONTBOTHERUSER 和 PRINT_WAITFORCOMPLETION
布尔显示对话框 = 假；
((mshtml.HTMLDocumentClass)m_webBrowser.Document).execCommand("Print", showDialog, flags);

```

来自 IDM_PRINT 命令 ID 的 MSDN 条目的更多信息（令人惊讶）。

# perl - 在 Perl 中创建客户端服务器的最简单和最轻量的方法是什么？

> ID：640790
> 
> 赞同：0
> 
> 时间：2009-03-12T22:46:06.413
> 
> 标签：perl, client-server

如果这个方案是基于HTTP协议的会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-13T06:46:18.927

在 CPAN 中检出[HTTP::Daemon 。](http://search.cpan.org/~gaas/libwww-perl-5.825/lib/HTTP/Daemon.pm)它将为您提供服务器的基础知识。然后，您可以覆盖方法来处理您的 HTTP。

或者，尝试[HTTP::Server::Simple](http://search.cpan.org/~jesse/HTTP-Server-Simple-0.38/lib/HTTP/Server/Simple.pm)，尽管该模块看起来不像第一个模块那么成熟。

最后，您可以看看[Net::Server](http://search.cpan.org/~rhandom/Net-Server-0.97/lib/Net/Server.pod)，这是一种更通用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-13T12:56:57.537

使用[IO::All](http://search.cpan.org/~ingy/IO-All-0.39/lib/IO/All.pod#Client/Server_Sockets)，您可以在大约 2 行代码中创建一个客户端/服务器（参见链接）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-03-13T08:59:44.953

HTTP Perl 客户端实现很慢（一百万个 CPU 周期仅用于 HTTP 标头处理）。（如果你要求快速，他们会害你。强烈禁止要求快速实施。）可以尝试[WWW::Curl](http://search.cpan.org/perldoc?WWW::Curl)或更好的[LWP::Curl](http://search.cpan.org/perldoc?LWP::Curl)，这似乎处于早期阶段但很有希望。在服务器端使用 apache2 和 mod_perl。如果你不想要 HTTP 使用[PlRPC](http://search.cpan.org/dist/PlRPC/)似乎很有希望。

**编辑**：如果你注意到它，他们会投票给你。当然。

# apache-flex - 比较 Flex 3 和 4

> ID：640791
> 
> 赞同：-2
> 
> 时间：2009-03-12T22:46:11.107
> 
> 标签：apache-flex, flex3, comparison, adobe, flex4

我在哪里可以找到比较 Flex 3 和 new 4 的图表或文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-13T20:04:36.743

官方的[Adob​​e Flex 4 开源网站](http://opensource.adobe.com/wiki/display/flexsdk/Gumbo)目前是查找有关该框架即将发布的版本信息的最佳位置。然而值得注意的是，Flex 4 仍处于开发阶段，他们甚至还没有将其视为测试版。从现在到最终版本之间，这可能会发生重大变化。

* * *

更新：

Beta 1 于 2009 年 6 月 1 日发布。

# c# - 如何循环通过 PropertyCollection

> ID：640792
> 
> 赞同：23
> 
> 时间：2009-03-12T22:46:25.630
> 
> 标签：c#, asp.net, iis, directoryservices

谁能提供一个如何循环 System.DirectoryServices.PropertyCollection 并输出属性名称和值的示例？

我正在使用 C#。

@JaredPar - PropertyCollection 没有名称/值属性。它确实有一个 PropertyNames 和 Values，类型为 System.Collection.ICollection。我不知道构成 PropertyCollection 对象的基线对象类型。

再次@JaredPar - 我最初用错误的类型错误地标记了问题。那是我的错。

**更新：** 基于 Zhaph - Ben Duguid 输入，我能够开发以下代码。

```
using System.Collections;
using System.DirectoryServices;

public void DisplayValue(DirectoryEntry de)
{
    if(de.Children != null)
    {
        foreach(DirectoryEntry child in de.Children)
        {
            PropertyCollection pc = child.Properties;
            IDictionaryEnumerator ide = pc.GetEnumerator();
            ide.Reset();
            while(ide.MoveNext())
            {
                PropertyValueCollection pvc = ide.Entry.Value as PropertyValueCollection;

                Console.WriteLine(string.Format("Name: {0}", ide.Entry.Key.ToString()));
                Console.WriteLine(string.Format("Value: {0}", pvc.Value));                
            }
        }      
    }  
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-03-12T23:07:13.133

在运行时在监视窗口中查看 PropertyValueCollection 的值以识别元素的类型，它包含&您可以扩展它以进一步查看每个元素具有的属性。

添加到@JaredPar 的代码

```
 PropertyCollection collection = GetTheCollection();
foreach ( PropertyValueCollection value in collection ) {
  // Do something with the value
  Console.WriteLine(value.PropertyName);
  Console.WriteLine(value.Value);
  Console.WriteLine(value.Count);
} 

```

编辑：PropertyCollection 由[PropertyValueCollection组成](http://msdn.microsoft.com/en-us/library/system.directoryservices.propertycollection.item.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-12T23:13:15.583

PropertyCollection 有一个 PropertyName 集合 - 它是字符串的集合（请参阅[PropertyCollection.Contains](http://msdn.microsoft.com/en-us/library/system.directoryservices.propertycollection.contains.aspx)和[PropertyCollection.Item](http://msdn.microsoft.com/en-us/library/system.directoryservices.propertycollection.item.aspx)，它们都采用字符串）。

您通常可以调用[GetEnumerator](http://msdn.microsoft.com/en-us/library/system.directoryservices.propertycollection.getenumerator.aspx)以允许您使用通常的枚举方法来枚举集合 - 在这种情况下，您将获得一个包含字符串键的 IDictionary，然后是每个项目/值的对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-08-12T16:24:02.783

```
usr = result.GetDirectoryEntry();
foreach (string strProperty in usr.Properties.PropertyNames)
{
   Console.WriteLine("{0}:{1}" ,strProperty, usr.Properties[strProperty].Value);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-12T23:09:47.853

```
foreach(var k in collection.Keys) 
{
     string name = k;
     string value = collection[k];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T22:54:44.503

**编辑**我误读了 OP，因为我说的是 PropertyValueCollection 而不是 PropertyCollection。留下帖子，因为其他帖子正在引用它。

我不确定我明白你在问什么你只是想遍历集合中的每个值吗？如果是这样，此代码将起作用

```
PropertyValueCollection collection = GetTheCollection();
foreach ( object value in collection ) {
  // Do something with the value
} 
```

打印出名称/值

```
Console.WriteLine(collection.Name);
Console.WriteLine(collection.Value); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-13T21:45:39.530

如果您只想要几件物品，您真的不必做任何神奇的事情......

使用语句：System、System.DirectoryServices 和 System.AccountManagement

```
public void GetUserDetail(string username, string password)
{
    UserDetail userDetail = new UserDetail();
    try
    {
        PrincipalContext principalContext = new PrincipalContext(ContextType.Domain, "mydomain.com", username, password);

        //Authenticate against Active Directory
        if (!principalContext.ValidateCredentials(username, password))
        {
            //Username or Password were incorrect or user doesn't exist
            return userDetail;
        }

        //Get the details of the user passed in
        UserPrincipal userPrincipal = UserPrincipal.FindByIdentity(principalContext, principalContext.UserName);

        //get the properties of the user passed in
        DirectoryEntry directoryEntry = userPrincipal.GetUnderlyingObject() as DirectoryEntry;

        userDetail.FirstName = directoryEntry.Properties["givenname"].Value.ToString();
        userDetail.LastName = directoryEntry.Properties["sn"].Value.ToString();
    }
    catch (Exception ex)
    {
       //Catch your Excption
    }

    return userDetail;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-21T04:58:11.400

我在另一个帖子上发布了我的答案，然后发现这个帖子问了一个类似的问题。

我尝试了建议的方法，但在转换到 DictionaryEntry 时总是得到一个无效的转换异常。有了 DictionaryEntry，像 FirstOrDefault 这样的东西就很时髦。所以，我只是这样做：

```
var directoryEntry = adUser.GetUnderlyingObject() as DirectoryEntry;
directoryEntry.RefreshCache();
var propNames = directoryEntry.Properties.PropertyNames.Cast<string>();
var props = propNames
    .Select(x => new { Key = x, Value = directoryEntry.Properties[x].Value.ToString() })
    .ToList(); 
```

有了这些，我就可以轻松地直接通过 Key 查询任何属性。使用合并和安全导航运算符允许默认为空字符串或其他任何内容。

```
var myProp = props.FirstOrDefault(x => x.Key == "someKey"))?.Value ?? string.Empty; 
```

如果我想查看所有道具，这是一个类似的 foreach。

```
foreach (var prop in props)
{
     Console.WriteLine($"{prop.Key} - {prop.Value}");
} 
```

请注意，“adUser”对象是 UserPrincipal 对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-08T18:57:36.987

```
public string GetValue(string propertyName, SearchResult result)
{
    foreach (var property in result.Properties)
    {
        if (((DictionaryEntry)property).Key.ToString() == propertyName)
        {
            return ((ResultPropertyValueCollection)((DictionaryEntry)property).Value)[0].ToString();
        }
    }
    return null;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-07T22:30:03.277

我不确定为什么很难找到答案，但是使用下面的代码，我可以遍历所有属性并提取我想要的属性并将代码重用于任何属性。如果需要，您可以以不同方式处理目录条目部分

```
getAnyProperty("[servername]", @"CN=[cn name]", "description");

   public List<string> getAnyProperty(string originatingServer, string distinguishedName, string propertyToSearchFor)
    {
        string path = "LDAP://" + originatingServer + @"/" + distinguishedName;
        DirectoryEntry objRootDSE = new DirectoryEntry(path, [Username], [Password]);
// DirectoryEntry objRootDSE = new DirectoryEntry();

        List<string> returnValue = new List<string>();
        System.DirectoryServices.PropertyCollection properties = objRootDSE.Properties;
        foreach (string propertyName in properties.PropertyNames)
        {
            PropertyValueCollection propertyValues = properties[propertyName];
            if (propertyName == propertyToSearchFor)
            {
                foreach (string propertyValue in propertyValues)
                {
                    returnValue.Add(propertyValue);
                }
            }
        }

        return returnValue;
    } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2010-10-28T04:30:09.100

我认为有一个更简单的方法

```
foreach (DictionaryEntry e in child.Properties) 
{
    Console.Write(e.Key);
    Console.Write(e.Value);
} 
```

# c# - 在 C# 中将 VML 渲染为位图

> ID：640794
> 
> 赞同：4
> 
> 时间：2009-03-12T22:47:28.560
> 
> 标签：c#, bitmap, vml

C#/.NET 中有没有办法将 VML 渲染为位图？

我认为这应该很容易，但我似乎无法在 .NET 文档中找到类似的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-23T17:14:15.280

在寻找类似的解决方案时，我遇到了一个两步过程。

1.  将 VML 转换为 SVG。
2.  将 SVG 渲染为图像。

SourceForge 有一个基于 XSL 的项目来将 VML 转换为 SVG。

(sourceforge.net/projects/vectorconverter/)

我一直在用它进行测试，在某些情况下它可以正常工作。

接下来是[CodePlex 上的 SVG 到 PNG 处理程序](http://svg.codeplex.com/)。一旦注册处理 *.svg 文件，处理程序将读取文件并将图像以 .png 格式发送回浏览器。您可以下载源代码并查看它是如何完成的。

您可以将 2 个步骤串在一起以从 vml 获取位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T04:00:07.907

您不使用 SVG 的任何特殊原因？你会更幸运地找到图书馆。我相信 SVG 是 VML 的继承者。

# c - 我该如何改进这个 Makefile？

> ID：640801
> 
> 赞同：1
> 
> 时间：2009-03-12T22:49:38.290
> 
> 标签：c, makefile

我对创建 Makefile 了解不多，但我一直在阅读[make 手册](http://www.gnu.org/software/make/manual/)，并且取得了一些进展。我的 Makefile 工作并做我想做的事。

我的情况通常涉及需要编译 1 到 3 个不同的程序并通过网络表单发送给我的助教进行标记等。每个应用程序的结构是“prog.c”、“prog_lib.h”和“prog_lib.c”。过去，我一直为每个程序创建单独的目录，并为每个目录创建单独的 Makefile 以构建其中包含的程序。然后我将每个文件夹 tar 并分别提交。

最近，TA 一直要求将所有源文件放在一个目录和一个 Makefile 中，其中包含要构建的各种目标，这样他们的标记应用程序就可以在没有任何人工干预的情况下工作。

我想知道更有经验的人如何改进这个 Makefile 以及我的情况通常是如何解决的？当我继续下一个作业并且必须更新几个地方时，我想减少我需要做的打字量。

这是我的Makefile：

```
ASSIGNMENT = 3
TARNAME = Assignment$(ASSIGNMENT).tar.bz2

CC = gcc
CFLAGS = -O2 -Wall -ansi -pedantic -W # I like warnings
LDFLAGS = -lm
DEBUG = -g # to resolve symbols in GDB and valgrind

FREQ_OUT = frequency_table
FREQ_SOURCES = frequency_table.c frequency_table_lib.c
FREQ_OBJECTS = frequency_table.o frequency_table_lib.o

DECODE_OUT = decode
DECODE_SOURCES = decode.c decode_lib.c
DECODE_OBJECTS = decode.o decode_lib.o

SOURCES = $(FREQ_SOURCES) $(DECODE_SOURCES)
OBJECTS = $(FREQ_OBJECTS) $(DECODE_OBJECTS)
OUT = $(FREQ_OUT) $(DECODE_OUT)

.PHONY: info
info:
    @echo -e "make info\n" \
            "\tmake all \t\t\tMake all targets\n" \
            "\tmake frequency_table \t\tMakes frequency table\n" \
            "\tmake decode \t\t\tMakes decode\n" \
            "\tmake dist \t\t\tMakes tar archive of sources and Makefile\n" \
            "\tmake clean \t\t\tRemoves all the object files and executables\n" \
            "\tmake distclean \t\t\tPerforms clean and removes tar archive"

.PHONY: all
all:    $(OUT)

$(FREQ_OUT):    $(FREQ_OBJECTS)
    $(CC) $(CFLAGS) $(DEBUG) $(LDFLAGS) $(FREQ_OBJECTS) -o $@

$(DECODE_OUT):  $(DECODE_OBJECTS)
    $(CC) $(CFLAGS) $(DEBUG) $(LDFLAGS) $(DECODE_OBJECTS) -o $@

.o:
    $(CC) -c $(CFLAGS) -o $@ $<

.PHONY: dist
dist: $(SOURCES)
    @echo "Creating tar archive. See $(TARNAME)"
    tar cvjf $(TARNAME) $(SOURCES) $(wildcard *_lib.h) Makefile

.PHONY: clean
clean:
    rm -f $(OUT) $(OBJECTS)

.PHONY: distclean
distclean: clean
    rm -f $(TARNAME) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-12T23:06:25.007

你真的不需要`$(CC) $(CFLAGS) $(DEBUG) $(LDFLAGS) $(FREQ_OBJECTS) -o $@`线条。make 已经知道如何构建二进制文件。

如果您的文件名对于不同的二进制文件（binary.c 和 binary_lib.c）是恒定的，您还可以为此创建一个通用规则：

```
FOO := $(shell ls *_lib.c)
BIN = $(FOO:%_lib.c=%)

$(BIN) : % : %.o %_lib.o 
```

**编辑：**这是它的工作原理：

1.  FOO 是以 _lib.c 结尾的所有文件的列表
2.  BIN 是同一个列表，去掉了“_lib.c”后缀，所以它是你的二进制文件的列表
3.  最后一行是您的制作规则。该规则规定 $(BIN) 中的每个 foo 取决于 foo.o 和 foo_lib.o

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-12T23:28:41.037

将“all”作为第一个目标，除非您确实确定您的用户必须在“make”之后键入一些内容才能构建项目。'信息' 目标很好，但不合常规。

（我确实有一个 makefile，其中默认目标不是全部 - 在一个包含 100 多个命令的源代码的目录中。我不希望 'make all' 成为默认值；我希望只构建我想要的一两个构建。有一个“全部”。但这很不寻常。通常，默认值应该是“全部”。）

此外，'$(FREQ_OUT)' 和 '$(DECODE_OUT)' 都不是 PHONY 目标；它们是真正的程序，不是吗？'all'、'info'、'dist'、'clean'、'realclean' 等目标 - 这些都是假的。但是您构建的程序不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T23:04:11.843

根据我的经验，你不应该需要`.o`目标，这是隐含的。

此外，隐式版本通常包含 的值`$(CPPFLAGS)`，您应该在其中放置您可能需要的任何`-I`*路径*或`-D`*宏选项。*

我还将包括`$(DEBUG)`in `$(CFLAGS)`，而不是在任何构建目标中明确列出它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-12T23:07:38.543

例子：

```
# CC, CFLAGS, etc. go here

# Object variables go here
MYPROG_OBJECTS = main.o someother.o

# all, info, etc. targets go here

# first actual target:
myprog: $(MYPROG_OBJECTS)
    <Do the linking stuff>

# This will take care of the objects, sources are placed in src directory:
%.o: src/%.c
   <The usual compilation commands>

# Automatic dependency magic:
%.d: src/%.c
   $(CC) -MM -o$@ $<

-include (MYPROG_OBJECTS:%.o=%.d) 
```

# python - 从 Python 写入 Vista 中的串口

> ID：640802
> 
> 赞同：5
> 
> 时间：2009-03-12T22:49:56.450
> 
> 标签：python, windows

如何从 Python 写入 Vista 中的串口？termios 包似乎只支持 posix。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-12T23:02:11.943

[pyserial](http://pyserial.wiki.sourceforge.net/pySerial)可以解决问题，您需要Windows 的[python 扩展才能](http://sourceforge.net/projects/pywin32/)使其在 Windows 中工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-13T01:47:42.280

似乎使用[pyserial](http://pyserial.wiki.sourceforge.net/pySerial)并不比这更难：

```
import serial

ser = serial.Serial(0)  # open first serial port with 9600,8,N,1
print ser.portstr       # check which port was really used
ser.write('hello')
ser.close() 
```

# c# - Microsoft Unity - 将代码转换为 xml

> ID：640806
> 
> 赞同：3
> 
> 时间：2009-03-12T22:50:44.060
> 
> 标签：c#, inversion-of-control, aop, ioc-container

有人可以提供我应该与 Enterprise Library 4.1 中的 Microsoft Unity 应用程序块一起使用的 XML 配置来实现与以下相同的结果吗？

```
 using System;
    using Microsoft.Practices.Unity;
    using Microsoft.Practices.Unity.InterceptionExtension;

    namespace ConsoleApplication1

    {

    class Program
    {

        static void Main(string[] args)
        {

            IUnityContainer container = new UnityContainer();
            container.AddNewExtension<Interception>();
            container.RegisterType<ILogger, Logger>();
            container.Configure<Interception>().SetInterceptorFor<ILogger>(new InterfaceInterceptor());

            var logger = container.Resolve<ILogger>();
            logger.Write("World.");
            Console.ReadKey();
        }

    }

    public interface ILogger
    {
        [Test]
        void Write(string message);
    }

    public class Logger : ILogger
    {
        public void Write(string message)
        {
            Console.Write(message);
        }

    }

    public class TestAttribute : HandlerAttribute
    {

        public override ICallHandler CreateHandler(IUnityContainer container)
        {
            return new TestHandler();
        }

    }

    public class TestHandler : ICallHandler
    {

        public int Order { get; set; }

        public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
        {
            Console.Write("Hello, ");
            return getNext()(input, getNext);
        }

    }

} 
```

所以代替这个：

```
 IUnityContainer container = new UnityContainer();
    container.AddNewExtension<Interception>();
    container.RegisterType<ILogger, Logger>();
    container.Configure<Interception>().SetInterceptorFor<ILogger>(new InterfaceInterceptor()); 
```

我会有这个：

```
 IUnityContainer container = new UnityContainer();
        UnityConfigurationSection section = (UnityConfigurationSection)ConfigurationManager.GetSection("unity");
        section.Containers.Default.Configure(container); 
```

使用 XML 配置文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T16:31:07.967

我自己找到了答案：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
  </configSections>

  <unity>
    <typeAliases>
      <typeAlias alias="ILogger" type="ConsoleApplication1.ILogger, ConsoleApplication1" />
      <typeAlias alias="Logger" type="ConsoleApplication1.Logger, ConsoleApplication1" />
      <typeAlias alias="TestAttribute" type="ConsoleApplication1.TestAttribute, ConsoleApplication1" />
      <typeAlias alias="TestHandler" type="ConsoleApplication1.TestHandler, ConsoleApplication1" />
      <typeAlias alias="interface" type="Microsoft.Practices.Unity.InterceptionExtension.InterfaceInterceptor, Microsoft.Practices.Unity.Interception, Version=1.2.0.0" />
    </typeAliases>
    <containers>
      <container name="ConfigureInterceptorForType">
        <extensions>
          <add type="Microsoft.Practices.Unity.InterceptionExtension.Interception, Microsoft.Practices.Unity.Interception" />
        </extensions>
        <extensionConfig>
          <add name="interception" type="Microsoft.Practices.Unity.InterceptionExtension.Configuration.InterceptionConfigurationElement, Microsoft.Practices.Unity.Interception.Configuration">
            <interceptors>
              <interceptor type="interface">
                <key type="ILogger"/>
              </interceptor>
            </interceptors>
          </add>
        </extensionConfig>
        <types>
          <type type="ILogger" mapTo="Logger" />
        </types>
      </container>
    </containers>
  </unity>
</configuration> 
```

再一次，C# 代码：

```
using System;
using System.Configuration;
using Microsoft.Practices.Unity;
using Microsoft.Practices.Unity.Configuration;
using Microsoft.Practices.Unity.InterceptionExtension;
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            //IUnityContainer container = new UnityContainer(); 
            //container.AddNewExtension<Interception>(); 
            //container.RegisterType<ILogger, Logger>(); 
            //container.Configure<Interception>().SetInterceptorFor<ILogger>(new InterfaceInterceptor()); 

            IUnityContainer container = new UnityContainer();
            UnityConfigurationSection section = (UnityConfigurationSection)ConfigurationManager.GetSection("unity");
            section.Containers["ConfigureInterceptorForType"].Configure(container);

            var logger = container.Resolve<ILogger>(); 
            logger.Write("World."); 
            Console.ReadKey();
        }
    } 

    public interface ILogger
    {
        [Test]        
        void Write(string message);
    } 

    public class Logger : ILogger
    {
        public void Write(string message)
        {
            Console.Write(message);
        }
    } 

    public class TestAttribute : HandlerAttribute
    {
        public override ICallHandler CreateHandler(IUnityContainer container) 
        { 
            return new TestHandler(); 
        }
    } 

    public class TestHandler : ICallHandler
    {
        public int Order { get; set; } 

        public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
        {
            Console.Write("Hello, "); 
            return getNext()(input, getNext);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-07T15:57:58.573

这可以在没有 Test 属性的情况下完成吗？纯粹来自 XML。只需指定要拦截的接口，它将拦截所有或匹配的方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-25T13:19:29.697

我使用 Unity 2 编写了一个示例，它与之前的答案非常相似。可以在以下位置进行检查：

[http://hmadrigal.wordpress.com/2010/12/25/aspect-orienting-programming-and-interceptor-design-pattern-with-unity-2/](http://hmadrigal.wordpress.com/2010/12/25/aspect-oriented-programming-and-interceptor-design-pattern-with-unity-2/)

最好的问候，赫伯

# php - 使用 DOMXPath 替换节点，同时保持其位置

> ID：640815
> 
> 赞同：0
> 
> 时间：2009-03-12T22:54:22.820
> 
> 标签：php, xml, dom, domdocument

好的，所以那天晚上我有了一个巧妙的小想法，为 DOMDOCUMENT 创建一个辅助类，它在某种程度上模仿 jQuery 操作 HTML 或基于 XML 的字符串的 DOM 的能力。使用 XPath 代替 css 选择器。例如：

```
$Xml->load($source)
    ->path('//root/items')
    ->each(function($Context)
    {
        echo $Context->nodeValue;
    }); 
```

这将在每个结果节点上调用回调函数。不幸的是，PHP 版本 < 5.3.x 不支持 lambda 函数或闭包，所以我不得不暂时做一些类似这样的事情：

```
$Xml->load($source)
    ->path('//root/items')
    ->walk('printValue', 'param1', 'param2'); 
```

目前一切都很好，我认为这个项目对很多人都有用，但我坚持使用其中一个功能。我正在尝试模仿 jQuery 的“替换”方法。使用以下代码，我可以通过应用以下方法轻松完成此操作：

```
$Xml->load($source)
    ->path('//root/items')
    ->replace($Xml->createElement('foo', 'bar')); // can be an object, string or XPath pattern 
```

这个方法背后的代码是：

```
public function replace($Content)
{
    foreach($this->results as $Element)
    {
        $Element->parentNode->appendChild($Content->cloneNode(true));
        $Element->parentNode->removeChild($Element);
    }

    return $this;
} 
```

现在，这行得通。它将每个结果元素替换为 $Content 的克隆版本。问题在于它将它们添加到父节点的子节点列表的底部。问题是，我如何克隆这个元素来替换其他元素，同时仍然保留 DOM 中的原始位置？

我正在考虑对要替换的节点进行逆向工程。基本上，从 $Content 复制值、属性和元素名称，但我无法更改目标元素的实际元素名称。

反射可能是一种可能性，但必须有一种更简单的方法来做到这一点。

有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T23:07:33.257

使用 replaceChild 而不是 appendChild/removeChild。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T23:01:49.150

查找 $element 在删除之前是否有下一个同胞，如果有，则在下一个同胞之前执行 insertBefore ，否则只需追加。

```
public function replace($Content)
{
        foreach($this->results as $Element)
        {
                if ($Element->nextSibling) {
                    $NextSiblingReference = $Element->nextSibling;
                    $Element->parentNode->insertBefore($Content->cloneNode(true),$NextSiblingReference);
                }
                else {
                    $Element->parentNode->appendChild($Content->cloneNode(true));   
                }
                $Element->parentNode->removeChild($Element);
        }

        return $this;
} 
```

虽然完全未经测试。

或者正如 AnthonyWJones 建议的那样[replaceChild](http://us2.php.net/manual/en/domnode.replacechild.php)，**我**怎么会错过那个时刻 :)

# firebug - 萤火虫简介

> ID：640828
> 
> 赞同：0
> 
> 时间：2009-03-12T23:00:37.470
> 
> 标签：firebug, profiler

firebug 配置文件可以通过 HTTPS 工作吗？我已经通过 HTTP 使用它并且它可以工作，但是当我在 HTTPS 上尝试它时，没有显示任何详细信息，即调用的函数、花费的时间等。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T01:58:41.020

firebug*可以*通过 HTTPS 进行分析，刚刚尝试并看到它工作。但是，似乎有些网站和某些版本可以工作，而有些则不能。firebug [google group](http://groups.google.com/group/firebug/search?group=firebug&q=profiler) and [project page](http://code.google.com/p/fbug/issues/list)可能是获取更多信息的好地方。

# encryption - 将 AWS 凭证作为用户数据传递给 EC2 实例的最佳方法是什么？

> ID：640838
> 
> 赞同：24
> 
> 时间：2009-03-12T23:05:46.770
> 
> 标签：encryption, amazon-s3, amazon-ec2, amazon-web-services

我有一个基于 AWS 的作业处理架构，需要 EC2 实例查询 S3 和 SQS。为了让正在运行的实例能够访问 API，凭据以 base64 编码的 shell 脚本的形式作为用户数据 (-f) 发送。例如：

```
$ cat ec2.sh
...
export AWS_ACCOUNT_NUMBER='1111-1111-1111'
export AWS_ACCESS_KEY_ID='0x0x0x0x0x0x0x0x0x0'
...
$ zip -P 'secret-password' ec2.sh
$ openssl enc -base64 -in ec2.zip 
```

许多实例已启动...

```
$ ec2run ami-a83fabc0 -n 20 -f ec2.zip 
```

每个实例使用硬编码到初始化脚本中的“秘密密码”对 ec2.zip 进行解码和解密。虽然它确实有效，但我的方法有两个问题。

1.  'zip -P' 不是很安全
2.  密码在实例中是硬编码的（它始终是“秘密密码”）

[该方法与此处](http://blogs.oracle.com/ec2/entry/using_parameterized_launches_to_customize)描述的方法非常相似

有没有更优雅或被接受的方法？使用 gpg 加密凭证并将私钥存储在实例上以解密它是我现在正在考虑的一种方法，但我不知道有任何警告。我可以直接使用 AWS 密钥对吗？我是否遗漏了 API 中一些非常明显的部分？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-13T04:57:14.290

您可以将凭据存储在机器上（或传输、使用然后删除它们。）

您可以通过安全通道传输凭据（例如，使用`scp`非交互式身份验证，例如密钥对），这样您就不需要执行任何自定义加密（只需确保`0400`始终正确设置密钥文件的权限，例如设置主文件的权限并使用`scp -p`）

如果以上内容不能回答您的问题，请提供更具体的详细信息。您的设置是什么以及您要达到的目标。是否要从一个中心位置在多个节点上启动 EC2 操作？SSH 在多个节点和中心位置之间是否可用？等等。

* * *

**编辑**

您是否考虑过[参数化您的 AMI](http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1085)，要求实例化您的 AMI 的人员首先`ec2-run-instances -f user-data-file`使用他们的 AWS 密钥填充用户数据 ( )？然后，您的 AMI 可以从`http://169.254.169.254/1.0/user-data`.

* * *

**更新**

好的，这是迄今为止讨论的各种方法的安全性比较：

1.  **存储在未加密****的 AMI 中**的数据的安全性**`user-data`**
    *   **低的**
    *   *任何*设法登录 AMI 并有权访问`telnet`、`curl`、等的用户都可以访问明文`wget`数据（可以访问明文`http://169.254.169.254/1.0/user-data`）
    *   您容易受到代理请求攻击（例如，攻击者要求可能在 AMI 上运行或未运行的 Apache 获取并转发明文`http://169.254.169.254/1.0/user-data`）
2.  **存储在 AMI 中****并使用易于获取的密钥加密（或解密）**的数据的安全性**`user-data`**
    *   **低的**
    *   容易获得的密钥（密码）可能包括：
        *   密钥硬编码在 ABI 内的脚本中（攻击者可以在其中获取 ABI）
        *   密钥硬编码在 AMI 本身的脚本中，*任何*设法登录 AMI 的用户都可以读取该脚本
        *   任何其他容易获得的信息，例如公钥等。
        *   任何私钥（其公钥可能很容易获得）
    *   给定一个容易获得的密钥（密码），第 1 点中确定的相同问题也适用，即：
        *   *任何*设法登录 AMI 并有权访问`telnet`、`curl`、等的用户都可以访问解密的数据`wget`（可以访问明文`http://169.254.169.254/1.0/user-data`）
        *   您容易受到代理请求攻击（例如，攻击者要求 Apache 可能会或可能不会在 AMI 上运行以获取和转发加密的`http://169.254.169.254/1.0/user-data`，然后用易于获得的密钥解密）
3.  **存储在 AMI 中****并使用不易获得的密钥加密**时的数据安全性**`user-data`**
    *   **平均的**
    *   *任何*设法登录 AMI 并有权访问`telnet`、`curl`、`wget`等的用户都可以访问加密数据（可以访问encrypted `http://169.254.169.254/1.0/user-data`）
        *   然后可以使用蛮力攻击尝试解密加密数据
4.  **存储在 AMI 上、安全位置**的数据的安全性（加密没有附加价值）
    *   **更高**
    *   数据只能由一个用户访问，即需要数据才能操作的用户
        *   例如，用户拥有的文件：掩码为 0600 或 0400 的用户
    *   攻击者必须能够冒充特定用户才能访问数据
        *   额外的安全层，例如拒绝用户直接登录（必须通过`root`交互式模拟）提高了安全性

因此，任何涉及 AMI`user-data`的方法都不是最安全的，因为访问机器上的*任何*用户（最弱点）都会危及数据。

如果 S3 凭证仅在有限的时间段内需要（即仅在部署过程中），*如果*AWS 允许您覆盖或删除`user-data`完成后的内容（但这似乎不是情况。）如果可能的话，另一种方法是在部署过程期间创建临时 S3 凭证（`user-data`在部署过程完成并且凭证已被 AWS 无效后，从 泄露这些凭证，不再构成安全性）威胁。）

如果上述不适用（例如，已部署的节点无限期需要 S3 凭证）或不可能（例如，不能发布临时 S3 凭证仅用于部署），那么最好的方法仍然是硬着头皮和`scp`各个节点的凭证，可能并行，具有正确的所有权和权限。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-06-19T21:45:44.703

我写了一篇文章，研究了将机密安全地传递给 EC2 实例的各种方法以及每种方法的优缺点。

[http://www.shlomoswidler.com/2009/08/how-to-keep-your-aws-credentials-on-ec2/](http://www.shlomoswidler.com/2009/08/how-to-keep-your-aws-credentials-on-ec2/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-24T16:22:18.053

最好的方法是使用实[​​例配置文件](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/UsingIAM.html#UsingIAMrolesWithAmazonEC2Instances)。基本思想是：

*   创建实例配置文件
*   创建新的 IAM 角色
*   将策略分配给先前创建的角色，例如：

    {“声明”：[{“Sid”：“Stmt1369049349504”，“动作”：“sqs：*”，“效果”：“允许”，“资源”：“* ”}]}

*   将角色和实例配置文件关联在一起。

*   当您启动一个新的 EC2 实例时，请确保您提供实例配置文件名称。

如果一切正常，并且您用于从 EC2 实例中连接到 AWS 服务的库支持从实例元数据中检索凭证，则您的代码将能够使用 AWS 服务。

来自 boto-user 邮件列表的完整示例：

首先，您必须创建一个 JSON 策略文档，该文档表示 IAM 角色应该有权访问哪些服务和资源。例如，此策略授予存储桶“my_bucket”的所有 S3 操作。您可以使用适合您的应用程序的任何策略。

```
BUCKET_POLICY = """{
  "Statement":[{
    "Effect":"Allow",
    "Action":["s3:*"],
    "Resource":["arn:aws:s3:::my_bucket"]}]}""" 
```

接下来，您需要在 IAM 中创建一个实例配置文件。

```
import boto
c = boto.connect_iam()
instance_profile = c.create_instance_profile('myinstanceprofile') 
```

拥有实例配置文件后，您需要创建角色、将角色添加到实例配置文件并将策略与角色相关联。

```
role = c.create_role('myrole')
c.add_role_to_instance_profile('myinstanceprofile', 'myrole')
c.put_role_policy('myrole', 'mypolicy', BUCKET_POLICY) 
```

现在，您可以在启动实例时使用该实例配置文件：

```
ec2 = boto.connect_ec2()
ec2.run_instances('ami-xxxxxxx', ..., instance_profile_name='myinstanceprofile') 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-19T12:46:53.683

我想指出，不再需要向您的 EC2 实例提供任何凭证。使用 IAM，您可以为您的 EC2 实例创建角色。在这些角色中，您可以设置细粒度的策略，例如，允许您的 EC2 实例从特定 S3 存储桶获取特定对象，仅此而已。您可以在 AWS 文档中阅读有关 IAM 角色的更多信息：

[http://docs.aws.amazon.com/IAM/latest/UserGuide/WorkingWithRoles.html](http://docs.aws.amazon.com/IAM/latest/UserGuide/WorkingWithRoles.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-28T17:37:47.790

就像其他人已经在这里指出的那样，您实际上不需要通过使用 IAM 角色来存储 EC2 实例的 AWS 凭证 - [https://aws.amazon.com/blogs/security/a-safer-way-to-分发-aws-credentials-to-ec2/](https://aws.amazon.com/blogs/security/a-safer-way-to-distribute-aws-credentials-to-ec2/)。我要补充一点，您也可以使用相同的方法为您的 EC2 实例安全地存储**NON-AWS 凭证**，例如，如果您有一些想要保持安全的数据库凭证。您将非 aws 凭证保存在 S3 Bukcet 上，并使用 IAM 角色访问该存储桶。您可以在此处找到更多详细信息 - [https://aws.amazon.com/blogs/security/using-iam-roles-to-distribute-non-aws-credentials-to-your-ec2-instances/](https://aws.amazon.com/blogs/security/using-iam-roles-to-distribute-non-aws-credentials-to-your-ec2-instances/)

# linq - LINQ - 如果未找到行，则从具有最大值的字段返回值

> ID：640857
> 
> 赞同：2
> 
> 时间：2009-03-12T23:14:33.380
> 
> 标签：linq

我有一张这样的桌子...

```
ID   Description  LowThreshold   HighThreshold
1    BAD          0.0            .69
2    MEETS        .70            .89
3    GOOD         .90            2 
```

这里的目标是编写一个 LINQ 查询，它将根据给定的小数选择正确的描述。例如 .75 在 .70 和 .89 之间，所以它会返回“MEETS”。但是，踢球者是，如果 Number 高于所有范围，则自动返回具有最高 HighThreshold 的记录的描述。所以，如果我通过了 5，我应该得到“GOOD”返回。

到目前为止我有这个，但它的分数高于 2 时出错，显然：

```
private string GetEvaluationDescription (decimal score)
{
      string evaluationText = myContext.PerformanceRanges.Where
                        (e =>
                              e.LowThreshold <= score
                              &&
                              e.HighThreshold >= score
                        )
                        .Select(eval => eval.Description).First().ToString();
} 
```

我想只用这个查询来完成这个，但我的想象力并没有让我到达那里。我尝试了在[这篇](https://stackoverflow.com/questions/341264/linq-max-or-default)文章中找到的内容，但无法正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T23:33:59.993

那这个呢：

```
var range = myContext.PerformanceRanges
            .SingleOrDefault(e=>e.LowThreshold <= score && e.HighThreshold >= score)??
            PerformanceRanges.Single(
                                      e=>e.HighThreshold == PerformanceRanges
                                                            .Max(p=> p.HighThreshold)
                                    );

string evaluationText = range.Description; 
```

The `range` query will select the element that matches with the Thereshold ranges, and if the value is greater (the first query will return null), it will select the greatest range.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T23:22:56.463

那这个呢：

```
 string evaluationText = myContext.PerformanceRanges.Where
                    (e =>
                          (e.LowThreshold <= score
                          &&
                          e.HighThreshold >= score) || 
                         (e.HighThreshold == 
                            myContext.PerformanceRanges.Max (
                                  x => x.HighThreshold) 
                            && score > e.HighThreshold )
                    )
                    .Select(eval => eval.Description).First().ToString(); 
```

# database - 显示与搜索与排序数据库中的字符串

> ID：640858
> 
> 赞同：1
> 
> 时间：2009-03-12T23:15:30.927
> 
> 标签：database, string, search, sorting

假设我有一个充满音乐艺术家的数据库。考虑以下艺术家：

The Beatles - “The” 是正式名称的一部分，但如果我们按字母顺序排列，我们不想用“T”对其进行排序。我们不能轻易地将它存储为“Beatles, The”，因为这样我们就无法正确搜索它。

Beyoncé - 我们需要让用户能够搜索“Beyonce”（没有变音符号）并返回正确的结果。没有用户会在搜索时知道如何或花时间在最后一个“e”上键入特殊的变音字符，但我们显然希望在需要输出它时正确显示它。

**解决这些问题的最佳方法是什么？**在数据库中保留“官方名称”、“搜索名称”和“排序名称”似乎很浪费，因为绝大多数条目都完全相同，但我想不出任何其他选择.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T23:34:23.580

图书馆学的人对此有一个标准的答案。ALA 申报规则以完全标准的方式涵盖了所有这些案例。

你在谈论语法排序顺序。这是一个值得商榷的话题。有些人会质疑你的立场。

通常，您将标题转换为标准化形式：“Beatles, The”。一般来说，你就这样离开它。然后排序。

您可以在此处阅读有关编目规则：[http ://en.wikipedia.org/wiki/Library_catalog#Cataloging_rules](http://en.wikipedia.org/wiki/Library_catalog#Cataloging_rules)

对于“扩展”字符，您有多种选择。对于某些人来说，é 是一流的字母，变音符号是其中的一部分。他们并不困惑。对于其他人来说，所有的变音字符都映射到朴素的字符上。这种映射是一些 Unicode 处理工具的特性。

您可以在此处阅读有关 Unicode 变音符号剥离的信息：http: [//lexsrv3.nlm.nih.gov/SPECIALIST/Projects/lvg/current/docs/designDoc/UDF/unicode/NormOperations/stripDiacritics.html](http://lexsrv3.nlm.nih.gov/SPECIALIST/Projects/lvg/current/docs/designDoc/UDF/unicode/NormOperations/stripDiacritics.html)

[http://www.siao2.com/2005/02/19/376617.aspx](http://www.siao2.com/2005/02/19/376617.aspx)

# sql-server - 将列类型从 ntext 更改为 varbinary(max)

> ID：640862
> 
> 赞同：6
> 
> 时间：2009-03-12T23:18:13.463
> 
> 标签：sql-server, database, type-conversion

我有一个有`ntext`字段的表。[MSDN](http://msdn.microsoft.com/en-us/library/ms187993.aspx)表示`ntext`已弃用，他们建议使用其他数据类型：

> 在 Microsoft SQL Server 的未来版本中，将删除 ntext、text 和 image 数据类型。避免在新的开发工作中使用这些数据类型，并计划修改当前使用它们的应用程序。请改用 nvarchar(max)、varchar(max) 和 varbinary(max)。

在我的特殊情况下，决定切换到`varbinary(max)`. 我试图改变表定义，但没有奏效。

```
ALTER TABLE MyTable ALTER COLUMN MyColumn VARBINARY(MAX); 
```

**将类型更改为的可能性是什么`varbinary(max)`？**我尝试从`ntext`->`nvarchar(max)`然后从`nvarchar(max)`->更改类型，`varbinary(max)`但这是不可能的（错误：不允许从数据类型 nvarchar(max) 到 varbinary(max) 的隐式转换）。

唯一可行的解​​决方案是添加一个 type 的新列`varbinary(max)`，将现有值转换为新列，然后删除旧列。这需要太多时间（在我大约 15GB 的数据集上大约需要 30 分钟）。这就是为什么我正在研究实现相同目标的其他可能性（可能就地=不移动数据和转换）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-13T01:10:45.753

我认为您使用 varbinary(max) 是因为您的 ntext 列中包含非文本数据？在这种情况下，我认为您将不得不向表中添加一个单独的 varbinary(max) 列，然后运行转换操作以从 ntext 复制到新列。然后，删除旧列，并将新列重命名为旧名称。

“不允许从数据类型 nvarchar(max) 到 varbinary(max) 的隐式转换”意味着您必须明确说明转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T00:58:09.403

似乎这种转换必须在某个时候发生。如果您搜索，您会发现很多人从 text 转换为 varchar(max) 并表示转换需要 20 多分钟。我研究了几分钟后的两分钱，所以不要把它当作福音。

如果您的表只需要插入，您可以转换保留表中的现有数据，然后重命名这些表，以便保留然后生产。然后在停机期间从旧表中移动任何新创建的数据。

当然，处理更新会使事情变得更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-13T08:46:36.907

添加额外的列可能是最好的方法。我赞成逐步做这种事情来降低风险

1.  将列 varbinary(max) 添加为可为空
2.  修改插入代码以填充两列
3.  闲暇之余，比如通宵，使用 CAST 运行 UPDATE 语句
4.  删除旧列的所有代码支持，确保读取新列
5.  删除旧列，并在需要时将新列更改为非空

# text - 仅 PC 上的 Firefox 3 中的文本换行不一致

> ID：640863
> 
> 赞同：0
> 
> 时间：2009-03-12T23:18:41.577
> 
> 标签：text, word-wrap, sifr, firefox-3

这是我在 Firefox 3.0 中反复出现的问题。似乎当我不断刷新时，有时它会包裹，有时则不会。当它不换行时，我可以调整窗口大小，sIFR'd 元素将捕捉到正确的大小。我需要根据容器的宽度包装我的元素。

我有最新的 sIFR 3.0 'nightly build'。

我想 sIFR 一个 h2 标签。h2 标签包含在一个 div 中，并且都设置了宽度。

```
<div class="recipe-title">
   <h2>This is a recipe title</h2>
</div> 
```

在我的 sifr.js 文件中，我设置了以下参数：

```
forceWidth = true; 
fitExactly = true; 
preventWrap = false; 
```

我的 .sifr.CSS 文件如下所示：

```
@media screen {
  .sIFR-active .recipe-title h2 { width:455px; font-size:16px; text-transform:uppercase; }
} 
```

我的普通 CSS 文件如下所示：

```
.recipe-title, .recipe-title h2 { width:400px; } 
```

其他所有浏览器似乎都可以在所有其他浏览器中运行，除了 PC 上的 FF3。这是一个已知的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-15T20:37:00.670

sIFR 可能初始化得太早。最简单的解决方法是设置`sIFR.useDomLoaded = false;`before `sIFR.activate()`，这将等到页面加载后再替换元素。

您还可以考虑使用`sIFR.useStyleCheck = true;`哪个需要更多 CSS，但会等到 CSS 加载完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-29T10:42:52.567

对于普通用户...确保为您的对象或图像设置 div 容器的宽度和高度。如果未设置这些值，Firefox 将自动换行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-17T22:14:42.963

我很确定它是 text-transform:uppercase 在设置 flash 宽度后扩大字宽

一段时间以来，我一直在尝试解决这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-13T18:29:20.547

一种可能性是您可能需要在元素上指定高度。IE7 可能有类似的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-15T15:36:48.767

sIFR.activate() 是位于 sifr.js 文件还是 sifr-addons.js 文件中？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-04T22:01:45.967

根据马克的建议，取消注释**sIFR.useStyleCheck = true;** 就在 sIFR.activate() 为我工作之前。

罗伯特，sIFR.activate() 在 sifr.js 中找到。

# oracle - MS-Access ODBC 连接到 Oracle for SQL

> ID：640866
> 
> 赞同：2
> 
> 时间：2009-03-12T23:20:14.317
> 
> 标签：oracle, ms-access, odbc

我正在尝试使用 Access 2003 连接到 Oracle 数据库。

我想使用 ODBC 连接并且我想设置它以便用户不需要输入密码。

我遇到的问题之一是我的 sql 查询使用 INTERFACE.Products 并且 Access 看到了句点并认为我正在尝试打开文件。IE Interface.MDB，当那是我的 sql 查询的一部分时。

```
Option Compare Database

Function OracleConnect() As Boolean

    Dim ws As Workspace
    Dim db As Database
    Dim LConnect As String
    Dim myQuery As String
    Dim myRS As Recordset

    On Error GoTo Err_Execute

    LConnect = "ODBC;DSN=Oracle;UID=user;PWD=password;"

    'Point to the current workspace
    Set ws = DBEngine.Workspaces(0)

    'Connect to Oracle
    Set db = ws.OpenDatabase("", False, True, LConnect)

    myQuery = "Select * from INTERFACE.Products"

    Set rst = db.OpenRecordset(myQuery)

    rst.Close
    db.Close

    Exit Function

Err_Execute:
    MsgBox MsgBox("Error Number:  " & Err.Number & " Message: " & Err.Description)

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-13T02:58:44.260

你能试试类似的东西：

```
Set rst = db.OpenRecordset(mQuery, dbOpenSnapshot, dbSQLPassThrough) 
```

这只会将查询逐字发送到 Oracle 数据库。

在您的[Access 文档](http://msdn.microsoft.com/en-us/library/bb243019.aspx)中，`OpenRecordset`您会找到以下说明：

> *如果您在 Microsoft Access 工作区中打开 Recordset 并且未指定类型，OpenRecordset 将创建一个表类型的 Recordset。*

这可能是您遇到错误的根源。

作为一项规则，我建议始终在参数中明确说明`OpenRecordset`：默认行为并不总是一致的，它可能会产生奇怪的错误。

我不确定您的设计，但让事情变得更容易的一种方法可能是在 Access 中简单地创建链接表。
在这种情况下，您将能够像编写`INTERFACE.Products`本地`Products`表一样针对您的 Oracle 表编写查询。
它还可以使您不必自己管理连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T01:32:50.763

您创建的记录集必须使用用 Access SQL 编写的查询。该表必须是 Access 表（在 mdb 中定义的表）。它可以是本地表或链接表。Access 表不能有“.”。（点）在它的名字中。如果您要在 Access 中链接 Oracle 表 INTERFACE.Products，它将是 INTERFACE_Products（Access 将用“_”替换远程数据库表名中的非法字符），除非您在 Access 中将其重命名。因此，您的查询应该是“从 INTERFACE_Products 中选择 *”

可以使用 Oracle SQL 创建记录集，但必须使用 Pass-Through 查询创建。

# javascript - 滑动地图如何工作？

> ID：640868
> 
> 赞同：2
> 
> 时间：2009-03-12T23:23:25.060
> 
> 标签：javascript, html, css, maps

Slippy maps 是 web 小部件，它允许用户通过抓取和拖动来平移二维平面。谷歌地图使这种控制变得流行，并且可以在今天的许多现代地图系统中看到。很明显，当您看到它们加载时，它们实际上是一个图像网格，在用户平移时根据需要加载。我的问题是；这些图像是如何在 HTML/JS/CSS 中对齐、移动和动态加载的？它们是带有背景图像的 div 吗？它们是否加载到具有溢出的父 div 中：隐藏？当用户平移时，他们使用什么策略来防止内存泄漏。是否有任何第三方库可以更轻松地构建它们。我对地理地图不感兴趣，只是常用来显示它们的界面。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-12T23:28:57.277

通常，图像元素的网格会四处移动，当一些元素离开查看器的末端并被隐藏时，它们会移动到网格的另一侧，并且 src 属性会更改为指向新的地图图块。

正如您所说，所有这些都将通过溢出加载到父元素中：隐藏；

就示例而言，您可以查看开源 Open Layers 实现：

[http://openlayers.org/](http://openlayers.org/)

# php - 如何在 PHP 中正确格式化这个 json 对象

> ID：640870
> 
> 赞同：0
> 
> 时间：2009-03-12T23:23:38.397
> 
> 标签：php, javascript, json

我需要能够在 PHP 中创建一个数据结构，例如创建一个汽车供应商数组。这些数组元素中的每一个都包含一个子数组，其中包含该供应商的汽车类型。

所以你会有类似的东西

```
$cars['toyota'] = array("camry", "etc"); 
```

我需要能够在 PHP 中创建这个数据结构，以便在 JavaScript 方面我可以做类似的事情

```
alert(cars.vendor[0].type[1]) 
```

如何在 PHP 端对该数据结构进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-06-27T04:35:07.807

```
$data = array();
$data['userDetails'] =array( array("username"=>$username,"password"=>$password));
$data["wsfunction"]="user_authentication"; 
```

然后json编码函数的输出如下

```
{"userDetails":[{"username":"Username","password":"Password"}],"wsfunction":"user_authentication"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T23:27:48.497

如果您的 PHP > 5.2.0，请尝试[`json_encode($cars)`](http://www.php.net/json_encode).

这将在数​​组中创建一个数组，但它不会为您提供 javascript 示例中的内容：

```
$vendors = array(
  'toyota' => array('camry', 'etc.'),
  'honda' => array('civic', 'fit', 'etc.'),
); 
```

您可能不需要所有嵌入式级别`vendors[0].types[1]`来组织您的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T23:35:23.157

这是如何设置它以按照您的意愿进行操作：

```
<script>
    var test = <?php
        print json_encode(array('vendor' => array(
            'toyota' => array('type' => array('camry','siena')),
            'mitsubishi' => array('type' => array('mirage','galant'))
        )));
    ?>;
    alert(test.vendor['toyota'].type[1]); // siena
    alert(test.vendor['mitsubishi'].type[0]); // mirage
</script> 
```

我建议跳过供应商并完全输入其中的一部分，除非您在该对象中也持有其他东西，并执行以下操作：

```
<script>
    var vendors = <?php
        print json_encode(array(
            'toyota' => array('camry','siena'),
            'mitsubishi' => array('mirage','galant')
        ));
    ?>;
    alert(vendors['toyota'][1]); // siena
    alert(vendors['mitsubishi'][0]); // mirage
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-13T04:48:46.837

这是我的做法：

```
class EmptyObject {}
$cars = new EmptyObject();
$cars->vendor[] = array('type' => array('camry','sienna'));
$cars->vendor[] = array('type' => array('mirage','galant'));
$json = json_encode($cars);
print $json;
// this produces:
// {"vendor":[{"type":["camry","sienna"]},{"type":["mirage","galant"]}]} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-13T12:45:43.133

好吧，如果您使用的是 PHP 5，您可以使用函数[json_encode](http://ar.php.net/manual/en/function.json-encode.php)，正如许多人已经回答的那样。

如果没有，如果您使用的是 PHP 4，那么您将需要[类似这样的额外](http://abeautifulsite.net/notebook/71)内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T23:34:46.077

嘿，关联数组和对象在 Javascript 中被平等对待。因此，PHP结构

```
$cars['toyota'] = array("camry", "etc"); 
```

相当于 JSON 中的这个：

```
var cars = { "toyota": [ "camry", "etc" ] }; 
```

您可以使用[json_encode](http://ie2.php.net/json_encode)函数轻松地将 PHP 结构转换为 JSON 结构。有关 JSON 格式的详细信息，请参阅[json.org](http://json.org)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T23:36:20.520

```
$cars = array();
$cars['toyota'] = array("camry", "etc");
$json = json_encode($cars); 
```

会给你一个javascript结构

```
var cars = {
    toyota: [ 'camry', 'etc' ]
}; 
```

如果你想

```
var cars = {
    vendor: [ { type: [ 'camry', 'etc' ] } ]
} 
```

这将允许您调用`alert(cars.vendor[0].type[1])`PHP 数组应该看起来像

```
$cars = array(
    'vendor' => array(
        array('type' => array("camry", "etc"))
    )
);
$json = json_encode($cars); 
```

[但正如上面](https://stackoverflow.com/questions/640870/how-do-i-properly-format-this-json-object-in-php/640896#640896)所指出的，您也许应该跳过`vendor`-part 并使用适当的供应商名称作为键。

# c++ - 如何在OpenGL中绘制纹理

> ID：640874
> 
> 赞同：4
> 
> 时间：2009-03-12T23:25:47.533
> 
> 标签：c++, opengl, graphics

现在我的 OpenGL 应用程序变得越来越大、越来越复杂，我注意到它在非常低端的系统（如上网本）上也变得有点慢。在 Java 中，我可以通过绘制到 BufferedImage 然后将其绘制到屏幕并每隔一段时间更新缓存的渲染来解决这个问题。我将如何使用 C++ 在 OpenGL 中执行此操作？

我找到了一些指南，但它们似乎只适用于较新的硬件/特定的 Nvidia 卡。由于缓存的渲染操作只会每隔一段时间更新一次，我可以牺牲速度来换取兼容性。

```
glBegin(GL_QUADS);
       setColor(DARK_BLUE); 
       glVertex2f(0, 0);                  //TL
       glVertex2f(appWidth, 0);           //TR
       setColor(LIGHT_BLUE);
       glVertex2f(appWidth, appHeight);   //BR
       glVertex2f(0, appHeight);          //BR
glEnd(); 
```

这是我特别关心的事情。占据整个屏幕的渐变每秒被重新绘制多次。如何将其缓存到纹理然后仅绘制该纹理以提高性能？

此外，我在 Java 中使用的一个技巧是将其渲染为 1 X 高度纹理，然后将其缩放到宽度 x 高度以提高性能并降低内存使用量。openGL有这样的技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-12T23:33:30.043

如果您出于兼容性原因不想使用[帧缓冲区对象](http://www.opengl.org/registry/specs/ARB/framebuffer_object.txt)（但它们非常广泛可用），那么您也不想使用旧的（和不可移植的）[Pbuffers](http://www.opengl.org/registry/specs/ARB/wgl_pbuffer.txt)。[这使您可以轻松地使用glReadPixels](http://www.opengl.org/sdk/docs/man/xhtml/glReadPixels.xml)读取帧缓冲区的内容，并使用[glTexImage2D](http://www.opengl.org/sdk/docs/man/xhtml/glTexImage2D.xml)使用该数据创建新纹理。

让我补充一点，我真的不认为在你的情况下你会获得很多。在屏幕上绘制纹理至少需要每个像素的纹素访问，如果替代方案只是像您现在所做的那样插入颜色，那么这并不是一个巨大的节省！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-13T17:30:01.170

我真诚地怀疑从纹理中绘制比绘制渐变要少。

在绘制渐变时：

*   在每个像素处插入颜色

在绘制纹理时：

*   在每个像素处插入纹理坐标
*   颜色仍然在每个像素处插值
*   每个像素的纹理查找
*   将查找颜色与当前颜色相乘

并不是说其中任何一个都很慢，但绘制无纹理多边形的速度几乎和它一样快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T23:36:04.123

考虑使用显示列表而不是纹理。纹理读取（尤其是大的）比 8 或 9 个函数调用慢很多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-12T23:45:14.540

在进行任何优化之前，您应该确保您完全了解瓶颈。你可能会对结果感到惊讶。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-13T18:59:36.963

嘿，我想我会给你一些见解。

基本上有两种方法可以做到这一点。

用于更现代硬件的帧缓冲区对象 (FBO)，以及用于回退的后台缓冲区。

以前的一张海报中的文章是一篇很好的文章，可以参考它，谷歌上有很多针对 FBO 的教程。

在我的 2d Engine (Phoenix) 中，我们决定只使用后缓冲方法。我们的课程相当简单，您可以在此处查看标题和源代码：

[http://code.google.com/p/phoenixgl/source/browse/branches/0.3/libPhoenixGL/PhRenderTexture.h](http://code.google.com/p/phoenixgl/source/browse/branches/0.3/libPhoenixGL/PhRenderTexture.h) [http://code.google.com/p/phoenixgl/source/browse/branches/0.3/libPhoenixGL /PhRenderTexture.cpp](http://code.google.com/p/phoenixgl/source/browse/branches/0.3/libPhoenixGL/PhRenderTexture.cpp)

希望有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T23:32:17.940

查看 FBO - 帧缓冲区对象。它是一个扩展，可让您渲染到任意渲染目标，包括纹理。这个扩展应该在最新的硬件上可用。这是一个相当不错的 FBO 入门：[OpenGL Frame Buffer Object 101](http://www.gamedev.net/reference/articles/article2331.asp)

# python - 谁能指出 TG2 相对于 Django 的优缺点？

> ID：640877
> 
> 赞同：7
> 
> 时间：2009-03-12T23:26:35.143
> 
> 标签：python, django, turbogears, turbogears2

Django 是我最喜欢的 Python Web 框架。我已经尝试过其他的，如 pylons、web2py、nevow 等。

但我从来没有对 TurboGears 充满热情。

现在 TG2 测试版结束了，我可以试一试。我想知道与 Django 相比有哪些优缺点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-31T22:21:15.483

TG2 有几个我认为很重要的优点：

*   多数据库支持
*   分片/数据分区支持
*   长期支持聚合、多列主键
*   为您处理多数据库事务的事务系统
*   一个可与上述所有内容一起使用的管理系统
*   开箱即用的可重用模板片段支持
*   创建可重用模板标签库的简单方法
*   更灵活地使用非标准组件

还有更多，但我认为知道 Django 比 TG2 有一些优势也很重要：

*   更大、社区、更活跃的 IRC 频道
*   更多可重用的应用程序组件
*   更多开发的文档

所有这一切意味着 Django 比 TG2 更容易入门，但我个人认为您获得的额外功能和灵活性是值得的。但是您的需求可能总是不同的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-13T00:06:44.003

TG2 采用 Pylons 并更改了一些默认值 - 对象调度而不是 Routes，Genshi 而不是 Mako。他们相信[只有一种方法可以做到这一点](http://wiki.python.org/moin/TOOWTDI)，因此应用程序可以依赖于任何 TurboGears 网站的相同 API。

## 相似之处

*   TG2 和 Django 都区分网站和组件，因此您最终也会看到TurboGears 的[可重用构建块](http://djangoplugables.com/)。

## 差异

*   Django 使用自己的处理程序来处理 HTTP、路由、模板和持久性。Django 还拥有出色的文档和成熟的社区。

*   TurboGears 默认使用同类最佳库，显然是[Paste](http://pythonpaste.org/)、对象调度、[Genshi](http://genshi.edgewall.org/)和[SqlAlchemy](http://www.sqlalchemy.org/)。这种理念产生了一个更好的全能工具集，但存在不稳定的风险——因为这意味着如果出现更好的库，就会放弃向后兼容性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-09-07T00:40:33.993

优点。

*   SQLAlchemy > django ORM
*   开箱即用的多种模板语言（genshi、mako、jinja2）
*   对 WSGI 更友好
*   对象调度 > 路由 > 正则表达式路由。您可以使用 TG2 获得前 2 个
*   几乎所有组件都是可选的，您可以保留核心并使用任何 ORM、模板、身份验证库等。
*   Sprox > django 表单

缺点。- 管理员更基本（还没有内联对象！） - 更少的第三方应用程序 - “应用程序”系统仍在制作中。- 考虑到它的模块化，您需要从不同来源（SQLAlchemy、Genshi 或 Mako、repoze.who、Pylons 等）阅读文档

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-10-05T03:10:41.570

几个月前，我在同一个问题上苦苦挣扎，并决定使用**Turbogears 2**，我的推理很简单。“*我是 python 新手，我想学习它不仅是为了 web 项目，而且是为了替代 php 来编写小助手的脚本*”

我不喜欢 Django 的地方，在我看来就像一个“封闭平台”。ORM、模板系统、会话等它们都是 Django 的

另一方面，Turbogears 2 使用已知的开放平台并将它们粘合起来，就像[Appfuse](http://appfuse.org)为 Java所做的那样

通过 TurboGears 2，我学习了 SQLAlchemy，以后可以将其用于小型 Python 脚本，或者从 Python shell 中解决常见任务。

主要缺点是缺乏完整的文档和错误消息。

有时您必须非常深入地搜索才能找到简单的解决方案，学习曲线很陡峭，但从长远来看是值得的。让我非常困惑的错误消息（来自 10 多年的 Java 开发）。当真正的问题是未导入模块时，我花了很多时间试图找到“ascii 编码错误”。

这是我的观点，请记住我是 python 新手，我可能对这里所说的很多事情都错了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-13T00:33:17.217

除了 Nikhil 在他的回答中给出的内容之外，我认为另一个小区别是 Turbogears 提供了对 javascript 小部件和与[Mochikit](http://mochikit.com/)集成的一些支持。

而 Django 坚定地保持 javascript 框架中立。

（至少对于旧版本的 Turbogears 是这样的……这可能在 TG2 中有所改变）

**编辑：**我刚刚浏览了 TG2 文档，发现它确实发生了变化。Turbogears 现在使用 ToscaWidgets，它可以在下面使用 jQuery、ExtJS、Dojo 等。这很好地使它更加框架中立，同时仍然提供漂亮的 javascript 小部件。

如果你没有任何 javascript 经验，这让我觉得我是**Turbogears的****专业人士**，如果你正在编写很多专门的 javascript，我觉得这是 Django 的专业人士。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-13T02:16:20.773

最重要的问题之一不仅是该平台提供或该平台提供了哪些技术功能，还在于开源项目的驱动理念和支持它的社区的性质。

我自己在这场斗争中没有狗，但我发现[Mark Ramm 在 2008 年 DjangoCon 上的演讲在](http://www.youtube.com/watch?v=fipFKyW2FA4&feature=PlayList&p=D415FAF806EC47A1&index=12)这一点上非常有趣（毫无疑问，Google 将产生无止境的后续讨论）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-13T00:37:04.430

因为 Django 使用它自己的 ORM，所以它限制了您学习该特定 Web 框架的 ORM。我认为使用具有更流行的 ORM 的 Web 框架（例如 TG 使用的 SqlAlchemy）会增加您的就业机会。只是我的2美分..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-13T14:06:02.910

最后我检查了一下，django 的数据实现很差。这是我书中的一个巨大弱点。Django 的 orm 不允许我使用底层数据库的功能。例如，我不能使用复合主键，这对良好的数据库设计很重要。它也不支持多个数据库，这没什么大不了的，直到您真正需要它并发现如果不求助于手动操作就无法做到这一点。最后，如果您必须以团队友好的方式更改数据库结构，您必须尝试在一组 3rd 方迁移工具之间进行选择。

Turbogears 似乎在架构上更合理，尽最大努力集成本身就很棒的各个工具。由于 TG 更像是一个集成器，您可以根据自己的喜好切换部件。不喜欢 SQL 炼金术？您可以使用 SQLObject。不喜欢 Genshi 模板？您可以使用 Mako 甚至 django，尽管您也没有完全坚持使用 django 的默认设置。

tg2 的缺点时间：

*   TG 有一个小得多的社区，而社区通常有它的好处。
*   Django 有一个更好的名字。我真的很喜欢这个名字;-)
*   对于初学者来说，Django 似乎更简单，管理工具也很酷。
*   TG 有不错的文档，但你还需要去 Genshi 的站点学习 Genshi，SQL Alchemy 的站点来学习，等等。Django 有很好的文档。

我的 2 美分。

# sql - 标签的数据库模式（例如，每个帖子都有一些可选标签）

> ID：640882
> 
> 赞同：7
> 
> 时间：2009-03-12T23:29:03.470
> 
> 标签：sql, architecture, schema, many-to-many

我有一个类似 SO、Wordpress 等的网站，您可以在其中发布帖子，并且您可以在上面添加（可选）标签。

处理此问题的通用数据库模式是什么？我假设它是一个 many<->many 结构，有三个表。

有人有想法么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-13T11:38:36.367

三表多对多结构应该没问题。

例如。`Posts, PostsToTags(post_id,tag_id), Tags`

关键是索引。确保您的 PostsToTags 表被双向索引（`post_id,tag_id`和`tag_id,post_id`），如果读取性能非常关键，您可以引入索引视图（它可以为您提供 post_name、tag_name）

当然，您还需要帖子和标签的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T23:38:40.310

“我假设它是一个 many<->many 结构，有三张桌子。有人有什么想法吗？”

更重要的是，没有任何严肃的选择，不是吗？多对多关系中的两个关系表至少需要一个关联表来承载所有外键组合。

这样做吗？谁知道。他们的数据模型包括引用计数，以及 - 众所周知 - 日期时间戳和原始创建者以及许多其他关于标签的垃圾。

至少，必须有三张桌子。

他们在 SO 上做了什么很难知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-12T23:33:00.107

我不完全确定这是否是 SO 使用的。但是这里有一个很好的[讨论](http://www.pui.ch/phred/archives/2005/04/tags-database-schemas.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-13T04:47:21.053

看看 wordpress 如何处理帖子的标签是个好主意，它会给你一些想法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-13T06:58:18.240

当然，另一种可能性是只有两个表。

鉴于最多有 5 个标签，一个问题表具有五个对标签表的可空外键引用是可能的。

不是很规范化，但它可能会更高效。

# eclipse - 如何在 Eclipse 中显示行号？

> ID：640884
> 
> 赞同：749
> 
> 时间：2009-03-12T23:29:28.477
> 
> 标签：eclipse, configuration

如何在 Eclipse 中*默认显示行号？*

* * *

## 回答 #1

> 赞同：1107
> 
> 时间：2009-03-12T23:38:34.710

*窗口→首选项→常规→编辑器→文本编辑器→显示行号*。

* * *

编辑：我很久以前写过这篇文章，但正如@ArtOfWarfar 和@voidstate 提到的，你现在可以简单地：

右键单击装订线并选择“显示行号”：

![](https://i.stack.imgur.com/KP7mH.png)

* * *

## 回答 #2

> 赞同：484
> 
> 时间：2012-03-22T10:43:14.277

如果这不起作用，它可能会被您当前的设置覆盖。您可以右键单击代码左侧通常会出现行号的栏中，然后使用上下文菜单将其打开。

![显示此上下文菜单的屏幕](https://i.stack.imgur.com/gU1FN.png)

* * *

## 回答 #3

> 赞同：94
> 
> 时间：2009-03-13T05:09:07.117

2015 年 11 月更新：

## 在 Eclipse Mars 4.5.1 中，行号（令人讨厌）再次默认关闭。请按照以下说明启用它。

* * *

2013 年 12 月更新：

[Lars Vogel](http://www.vogella.com/people/larsvogel.html)刚刚[在他的博客上发表](http://blog.vogella.com/2013/12/10/line-numbers-are-default-in-eclipse-sdk-luna-as-of-today/)：

## 到目前为止，行号在 Eclipse SDK Luna (4.4) 中是默认的

（2013 年 12 月 10 日）

> 如果用户希望在 Eclipse IDE 的文本编辑器中默认激活行号，我们进行了一项用户调查。
> 反应非常明确：

```
YES : 80.07% (1852 responses)
NO  : 19.93% (461 responses)
Total  : 2313
Skipped:   15 
```

> 使用[错误 421313](https://bugs.eclipse.org/bugs/show_bug.cgi?id=421313)，[Review - Line number 应该默认激活](https://git.eclipse.org/r/#/c/18233/)，我们为 Eclipse SDK 构建启用了它，我假设其他 Eclipse 包将跟随。

* * *

2014 年 8 月更新

**Eclipse Mars 4.5M1 的行号默认长度**现在为**120**（而不是 80）。
请参阅“[如何自定义 Eclipse 的文本编辑器代码格式](https://stackoverflow.com/a/25250064/6309)”。

* * *

原始答案（2009 年 3 月）

要在默认情况下真正拥有它，您可以编写一个脚本，确保在启动 eclipse 之前：
**`[workspace]\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.ui.editors.prefs`**确实包含：

```
lineNumberRuler=true 
```

（`[workspace]`作为 Eclipse 工作区的根目录）
然后 Eclipse 将以“默认显示的行号”打开

* * *

否则，您也可以键入“CTRL+1”，然后键入“line”，这将使您可以访问“显示行号”命令
（这将切换到选项的文本编辑器部分中的“显示行号”选项。

或者您可以在 Windows 首选项中键入“numb”以访问文本编辑器部分：

![显示行号](https://i.stack.imgur.com/DY3h7.png)

^(图片来自博客“ [Mkyong.com ”的“](http://www.mkyong.com/)[如何在 Eclipse 中显示行号](http://www.mkyong.com/eclipse/how-to-display-line-numbers-in-eclipse/)”)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2014-12-18T04:50:09.087

就如此容易。 `Ctrl`+ `F10`，然后`N`，显示或隐藏行号。

参考：[http ://www.shortcutworld.com/en/win/Eclipse.html](http://www.shortcutworld.com/en/win/Eclipse.html)

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2013-03-02T00:34:14.223

Mac OSX 上的细微变化：
Eclipse → Preferences → General → Editors → Text Editors → Show line numbers

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2012-03-01T21:34:44.197

在这个文件中

[工作区].metadata.plugins\org.eclipse.core.runtime.settings\org.eclipse.ui.editors.prefs

确保参数

lineNumberColor=0,0,0

不是 255,255, 255，这是白色的

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2013-05-17T09:02:09.833

Windows → 首选项 → 常规 → 文本编辑器 → 显示数字线

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2012-08-30T07:03:25.710

转到 Windows → 首选项 → 常规 → 文本编辑器 → 显示数字线。单击确定，然后单击应用更改。然后它会自动显示行数。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2014-07-10T07:01:41.117

一种简单的方法是使用快捷键，例如：Ctrl+F10，然后按 n“它显示行号并隐藏行号。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2013-09-17T12:19:27.000

最佳答案很好，但您也可以将其绑定到一个键（快捷键）来切换它。

Window > Preferences > Keys 然后在过滤器中输入“行号”并将其绑定到一个键。

我使用 CTRL + S + L。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2017-07-13T05:49:13.080

打开日食

转到 -> Windows -> 首选项 -> 编辑器 -> 文本编辑器 -> 显示行号

勾选**显示行号**复选框

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-06-22T12:03:59.267

***单击窗口选项卡，然后单击首选项***

![单击窗口选项卡](https://i.stack.imgur.com/k00vy.png)

***这样做并检查显示行号***

![检查显示行号](https://i.stack.imgur.com/a5FpL.png)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-07-09T10:34:31.637

在 Mac 上执行以下操作：

```
cmd + , or ADT -> Preferences 
```

展开常规 -> 编辑器 -> 文本编辑器

```
Check box: Show line numbers 
```

![在此处输入图像描述](https://i.stack.imgur.com/BBTFN.jpg)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-10-14T12:23:44.153

日食改变了偏好的位置

eclipse -> 偏好

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-03-21T14:59:28.477

Eclipse 在 Preferences 的左上角有一个搜索功能。在该搜索框中输入“行号”，然后...

如果您每次忘记都厌倦了谷歌搜索...

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-10-16T05:39:46.313

这将是提出问题的适当解决方案：

字符串 lineNumbers = AbstractDecoratedTextEditorPreferenceConstants.EDITOR_LINE_NUMBER_RULER; EditorsUI.getPreferenceStore().setValue(lineNumbers, true);

# iphone - iPhone 上 SQLite 的最佳 Cocoa/Objective-C 包装器库

> ID：640885
> 
> 赞同：53
> 
> 时间：2009-03-12T23:30:22.077
> 
> 标签：iphone, objective-c, cocoa-touch, sqlite

我正在为 iPhone 开发并且正在寻找一个好的 Cocoa/Objective-C 库来使用 SQLite。我不想使用标准的过程 SQLite C API。我在[sqlite.org](http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers)的 Objective-C 部分看到了选项，但我不确定在库 API 设计、稳定性和功能方面哪个是最好的。我想使用一些正在积极开发中的东西，希望它会存在一段时间。有人根据使用经验提出建议吗？

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-03-12T23:57:18.753

我个人使用[FMDB](https://github.com/ccgus/fmdb)，最后一次更新是昨天。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-13T02:18:02.300

我也是 FMDatabase 的粉丝，尽管我不得不定制我自己的版本。我的应用程序使用我编写的称为 ArchDBObject 的层，它透明地将对象与数据库表示进行转换；我正在考虑以某种形式发布它，但我还没有真正决定如何发布。

在任何情况下，FMDatabase 都可以在[https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)获得。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2011-06-27T10:58:33.610

我发现的最简单的是这个[https://github.com/misato/SQLiteManager4iOS](https://github.com/misato/SQLiteManager4iOS)

Ester Sanchez 的 SQLiteManager。

使用它基本上是这样的：

```
NSArray *results = [dbManager getRowsForQuery:@"SELECT * FROM table WHERE id = 1"]; 
```

`results`是一个包含字典的数组。每个字典都是一个返回的行，其中键是表中每一列的名称。

之后，您可以执行以下操作：

```
NSDictionary *aPerson = [results objectAtIndex:0];
NSString *firstName = aPerson[@"firstName"];
NSString *email = aPerson[@"email"]; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-14T06:41:30.817

FMDB 很好，因为它是不必处理 C 调用和类型转换的最简单的方法，同时仍然让您可以完全访问 SQL。

我通常不喜欢对象关系包装器的一点是，您离正在生成的 SQL 太远，而这正是性能开始受到影响的时候。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-25T05:18:51.210

我花了最后几个小时研究这些选项——这些选项还没有投入生产，所以 YMMV。

我发现的最轻的包装纸在这里：

[http://th30z.netsons.org/2008/11/objective-c-sqlite-wrapper/](http://th30z.netsons.org/2008/11/objective-c-sqlite-wrapper/)

不知道有没有正式的名字。它只是 1 个类，它抽象了 SQLite api 的讨厌，同时保留了直接使用 SQL 的价值。学习曲线是 5 分钟，假设您已经了解 SQL。由于它是如此之小，我可以想象修复任何可能出现问题的东西会很容易。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-03-24T08:09:34.380

如果您愿意，您还可以查看以下存储库，它提供了一组可用于创建 SQL 语句的类，并提供了一种处理 SQLite 数据库连接的简单方法。它位于[https://github.com/ziminji/objective-c-sql-query-builder](https://github.com/ziminji/objective-c-sql-query-builder)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-03T21:00:52.937

[我在http://code.google.com/p/chibiorm/](http://code.google.com/p/chibiorm/)的 FDBM 上有一个简单的 ORM 。

有了它，您可以根据需要使用原始 SQL，将任何 SQL 作为字典列表返回，或者使用漂亮的 OO 样式。

# javascript - jquery编码问题

> ID：640901
> 
> 赞同：0
> 
> 时间：2009-03-12T23:36:46.243
> 
> 标签：javascript, jquery, encoding

我有一个用 windows-1251 字符集编写的 a.js 文件。
现在，我有一个 b.php 脚本，它有

```
header('Content-Type: text/html; charset=windows-1251'); 
```

在里面。它还包括模板中某处的 a.js。
所以我正在使用 jQuery.load 将 b.php 加载到 c.php 中（也以这种方式标头）。我得到的是？？？而不是由js文件生成内容的地方的普通话。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T04:34:32.783

header() 语句仅适用于 PHP 输出，当您的浏览器拉取 .js 文件时，它可能会以不同的方式处理它。

您是否能够编辑该 .js 文件并使用其他常用编码（例如 utf-8 或 iso-8859-1）保存它？有许多免费的编辑器可以以不同的编码加载/保存。这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T23:48:24.063

```
<meta http-equiv="content-type" content="text/html; charset=windows-1251" /> 
```

页面顶部会影响这一点，即您以正常方式加载的页面。

# c# - 更快的方式来做一个列表 .包含（）

> ID：640902
> 
> 赞同：7
> 
> 时间：2009-03-12T23:37:01.267
> 
> 标签：c#, list, extension-methods, contains

我正在尝试做我认为是“反相交”的事情（我不确定正确的名称是什么，但这就是 EpicGames 的 Tim Sweeney 在旧的 UnrealEd 中所说的）

```
// foo and bar have some identical elements (given a case-insensitive match)
List‹string› foo = GetFoo();
List‹string› bar = GetBar();

// remove non matches
foo = foo.Where(x => bar.Contains(x, StringComparer.InvariantCultureIgnoreCase)).ToList();
bar = bar.Where(x => foo.Contains(x, StringComparer.InvariantCultureIgnoreCase)).ToList(); 
```

稍后，我做另一件事，从原始结果中减去结果，以查看我删除了哪些元素。使用 .Except() 非常快，所以没有问题。

必须有一种更快的方法来做到这一点，因为在任一列表中都有约 30,000 个元素（字符串）时，这种方法的性能非常糟糕。优选地，一种执行此步骤的方法以及稍后的一举一动会很好。我尝试使用 .Exists() 而不是 .Contains()，但速度稍慢。我觉得有点厚，但我认为 .Except() 和 .Intersect() 和/或 .Union() 的某种组合应该是可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-12T23:44:58.207

这种操作可以称为对称差分。

您需要不同的数据结构，例如哈希表。将两个集合的交集添加到它，然后将每个集合的交集区分开。

**更新：**

我有一些时间在代码中尝试这个。我使用`HashSet<T>`了一组 50,000 个字符串，长度为 2 到 10 个字符，结果如下：

> **原始**：79499 毫秒
> 
> **哈希集**：33 毫秒

顺便说一句，我认为 HashSet 上有一个方法`SymmetricExceptWith`可以为我完成工作，但它实际上将两个集合中的不同元素添加到调用该方法的集合中。也许这就是你想要的，而不是让最初的两组保持不变，代码会更优雅。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        // foo and bar have some identical elements (given a case-insensitive match)
        var foo = getRandomStrings();
        var bar = getRandomStrings();

        var timer = new Stopwatch();

        timer.Start();
        // remove non matches
        var f = foo.Where(x => !bar.Contains(x)).ToList();
        var b = bar.Where(x => !foo.Contains(x)).ToList();
        timer.Stop();

        Debug.WriteLine(String.Format("Original: {0} ms", timer.ElapsedMilliseconds));

        timer.Reset();

        timer.Start();
        var intersect = new HashSet<String>(foo);
        intersect.IntersectWith(bar);

        var fSet = new HashSet<String>(foo);
        var bSet = new HashSet<String>(bar);

        fSet.ExceptWith(intersect);
        bSet.ExceptWith(intersect);
        timer.Stop();

        var fCheck = new HashSet<String>(f);
        var bCheck = new HashSet<String>(b);

        Debug.WriteLine(String.Format("Hashset: {0} ms", timer.ElapsedMilliseconds));

        Console.WriteLine("Sets equal? {0} {1}", fSet.SetEquals(fCheck), bSet.SetEquals(bCheck)); //bSet.SetEquals(set));
        Console.ReadKey();
    }

    static Random _rnd = new Random();

    private const int Count = 50000;

    private static List<string> getRandomStrings() 
    {
        var strings = new List<String>(Count);

        var chars = new Char[10];

        for (var i = 0; i < Count; i++)
        {
            var len = _rnd.Next(2, 10);

            for (var j = 0; j < len; j++)
            {
                var c = (Char)_rnd.Next('a', 'z');
                chars[j] = c;
            }

            strings.Add(new String(chars, 0, len));
        }

        return strings;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-12T23:52:02.773

使用 intersect 可以这样完成：

```
var matches = ((from f in foo 
                select f)
              .Intersect(
                  from b in bar 
                  select b, StringComparer.InvariantCultureIgnoreCase)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T23:47:06.313

如果每个列表中的元素都是唯一的，则应考虑使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)

> HashSet(T) 类提供高性能的集合操作。集合是不包含重复元素且其元素没有特定顺序的集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-19T02:15:10.467

使用排序列表，您可以使用二进制搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T23:45:25.990

包含在列表中是 O(N) 操作。如果您有不同的数据结构，例如排序列表或字典，您将大大减少您的时间。访问排序列表中的键通常是 O(log N) 时间，而在哈希中通常是 O(1) 时间。

# jquery - jQuery - 我怎样才能找到一个 id 是否有一个特定的字符串？

> ID：640903
> 
> 赞同：16
> 
> 时间：2009-03-12T23:37:55.163
> 
> 标签：jquery

我有一个表，我想知道它的最后一个 td 它的 id 是否包含某个字符串。例如，如果我最后一个 td 的 id 为“1234abc”，我想知道这个 id 是否包含“34a”。我需要在“if”语句中做到这一点。

如果（myLastTdId 包含“blablabla”）{ 做某事}

谢谢！！！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-13T00:16:05.353

您可以使用“ [attributeContains](http://docs.jquery.com/Selectors/attributeContains) ”选择器：

```
if($("#yourTable td:last-child[id*='34a']").length > 0) { 
   //Exists, do something...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-12T23:41:37.840

这很容易用`indexOf`和完成`last-child`。

```
<table id='mytable'>
<tr>
  <td id='abc'></td>
  <td id='cde'></td>
</tr>
</table>

<script>
if($('#mytable td:last-child').attr('id').indexOf('d') != -1) {
   alert('found!');
}
</script> 
```

在这里它会提醒'found'，因为`d`出现在字符串中`cde`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-12T23:44:53.323

如果您`td`是“裸露的”（即未包装在 jQuery 对象中），则可以`id`直接访问其属性：

```
if (myTD.id.indexOf("34a") > -1) {
    // do stuff
} 
```

如果它*在*jQuery 对象中，则需要先将其取出：

```
if (jMyTD[0].id.indexOf("34a") > -1 {
    // do stuff
} 
```

该`indexOf`函数查找一个字符串在另一个字符串中的偏移量。如果第一个字符串根本不包含第二个，则返回 -1。

**编辑：**

再三考虑，您可能需要澄清您的问题。目前尚不清楚您尝试将“34a”与哪些匹配：

*   `<td id="1234abcd">blahblah</td>`
*   `<td id="blahblah">1234abcd</td>`
*   `<table id="1234abcd"><tr><td>blahblah</td></tr></table>`
*   `<table id="blahblah"><tr><td>1234abcd</td></tr></table>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-13T00:40:37.573

如果您是指每个 tr 中的最后一个 td 还是最后一个 td，则不完全清楚：

```
if ($('#myTable td:last[id*=34a]').length) {
    ...
} 
```

# cocoa-touch - 为什么这个 iPhone 程序不调用 -loadView？

> ID：640904
> 
> 赞同：3
> 
> 时间：2009-03-12T23:38:24.210
> 
> 标签：cocoa-touch

我正在尝试通过基本的 iPhone 编程来工作，并且我对 Interface Builder 的工作原理有很好的基本了解，所以我决定尝试以编程方式制作视图。我浏览了 ViewController Apple 指南并到处搜索，但似乎找不到解决问题的方法。这让我相信这是一个非常简单的解决方案，但我只是真的把头撞在墙上。基本上我要做的就是创建一个将主窗口作为子视图的视图。我知道如果 self.view 没有定义，那么应该调用 loadView 方法，并且应该在那里设置一切。这是我的代码的当前状态：

代表：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {    
    StartMenuViewController *aViewController = [[StartMenuViewController alloc] init];
    self.myViewController = aViewController;
    [aViewController release];

    UIView *controllersView = [myViewController view];

    window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];
    [window setBackgroundColor:[UIColor redColor]];

    [window addSubview:controllersView];
    [window makeKeyAndVisible];
} 
```

视图控制器：

```
- (id)init {
    if (self = [super init]) {
        self.title = @"Start Menu";
    }
    return self;
}

// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView {
    UIView *startView = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    [startView setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];
    [startView setBackgroundColor:[UIColor greenColor]];
    self.view = startView;
    [startView release];
} 
```

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-12T23:50:52.387

您确定您是从 UIViewController 继承而不是覆盖 - (UIView*)view 的实现吗？

编辑：更多信息：

UIViewController 具有“-(UIView*) view”消息的特殊实现，因此当它被调用时，如果未设置视图*成员变量，则调用 loadView 方法。*因此，如果您在子类中提供“- (id)view”的实现（或名为 view 的属性），它将破坏“-loadView”的自动调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-03T08:29:59.063

只是为了记录“未调用 loadView”的情况：

我写了一个 2 UITableViewController(s) 来处理主 ViewController 的详细数据。由于魔鬼在#2，我为#1 制作了一个简单的 UITableViewController，并在 XIB 中为“主”ViewController 引用它。

当我完成 #2 后，我可以简单地将代码复制到 #1，删除复杂的代码，然后继续生活。

但令我沮丧的是，几天的工作，无论我做了什么，我的简单＃1 UITableViewController 都没有调用 viewLoad。

今天我终于意识到我是在将XIB中的UITableViewController引用到主ViewController程序。- 当然，从未调用过 loadView。

只是为了帮助其他犯同样错误的傻瓜....

最好的问候，查尔斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T05:27:17.913

viewDidLoad 仅当视图未从 nib 归档时，在设置视图后调用方法。

loadView 仅在视图探测器为 nil 时调用。以编程方式创建视图时使用。默认：创建一个没有子视图的 UIView 对象。

*   (void)loadView { UIView *view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame]; [查看 setBackgroundColor:_color]; self.view = 视图；[查看发布]；}

    通过实现 loadView 方法，您可以连接到默认的内存管理行为。如果内存不足，视图控制器可能会收到 didReceiveMemoryWarning 消息。默认实现检查视图是否正在使用中。如果它的视图不在视图层次结构中并且视图控制器实现了 loadView 方法，则它的视图被释放。稍后当需要视图时，再次调用 loadView 方法来创建视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T23:45:14.430

我强烈建议您至少在初始窗口/视图中使用界面构建器。

如果您在 XCode 中创建一个新项目，您应该能够从许多预定义的 iPhone 模板中进行选择，这些模板附带所有设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-13T01:09:59.327

除非我读错了，否则您没有像这样将任何视图与控制器的视图属性相关联

```
myViewController.view = controllersView; 
```

因此，就 Cocoa 而言，您在窗口中设置的视图没有可以调用 loadView 的控制器。loadView 是一个视图控制器，而不是视图方法。您分配给窗口的视图不与任何视图控制器相关联。所以你的视图控制器 loadView 方法永远不会被调用。得到它？您尝试显示的视图没有与之关联的视图控制器。

当您使用界面构建器创建视图时，您可以将您在 IB 中创建的 UIView 对象链接到 IB 中的控制器中的视图属性，框架会自动

但是如果没有在 IB 中完成，你必须设置它

# smartclient - 对“偶尔连接”场景的支持有多重要？

> ID：640907
> 
> 赞同：3
> 
> 时间：2009-03-12T23:39:08.127
> 
> 标签：smartclient, offline-mode, occasionallyconnected

不久前，智能客户端被吹捧为“偶尔连接”使用环境的解决方案，而像 Google Gears 这样的工具包也出于同样的原因应运而生。在我看来，持续、可靠的互联网访问正变得越来越普遍（即使在商用飞机等地方），所以我向社区提出的问题是：具有离线支持的解决方案的相关性如何？

我是从数据密集型企业应用程序（例如 CRM）的角度来解决这个问题的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-03-04T23:55:50.607

在过去的 3 年中，我构建了 2 个独立的偶尔连接的智能客户端。

我发现添加“偶尔连接”会使应用程序的复杂性（和开发时间）增加大约 3 或 4 倍。因此，添加它是一个非常昂贵的功能。

但是这些应用程序有可靠的商业案例，因为我确信许多系统都有。一种是针对经常去客户站点（无论出于何种原因，安全有时是原因之一）他们的无线连接不起作用的路上的工程师。用户仍然希望像连接时一样继续使用系统，然后在连接可用时毫不费力地（就他们而言）自行同步。

第二个应用程序要么在 LAN 上使用，要么根本没有连接，直到用户返回“办公室”。

从个人的角度来看，我喜欢这样的想法，无论有没有活跃的连接，我都可以继续“做我的工作”，事实上，即使连接在活动中途中断，一切仍然有效，我不会丢失任何数据.

实现这种无缝连接 -> 断开连接 -> 连接等场景需要大量的工作和测试，因此必须有一个非常强大的业务案例。

最后，我认为我们永远无法假设始终存在互联网连接。无论是硬件或服务提供商故障，还是某些活动的安全阻止连接，在某个时间点，您的用户将处于断开连接模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-12T23:44:55.443

我认为这取决于应用程序的类型。对于某些应用程序，互联网访问比其他应用程序更相关，但对于一般生产力应用程序，我认为离线场景将保持相关性。作为软件行业的顾问，互联网无处不在，但并不是每个客户都允许我将笔记本电脑连接到他们的网络。另一方面，随着 3g 和移动数据访问变得负担得起，也许未来将把我们带到任何地方的互联网。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T23:43:45.057

好吧，如果您在全球范围内思考，可靠的互联网访问并不像您想象的那么普遍。即使在本地，WiFi 也不是那么可靠，尤其是当您从一个地方移动到另一个地方时。为偶尔连接的场景构建可提供更好的用户体验；我不认为它总是必需的，但它非常好。:)

# iphone - 对外部下载的 PNG 执行 iPhone 优化

> ID：640909
> 
> 赞同：7
> 
> 时间：2009-03-12T23:40:26.623
> 
> 标签：iphone, optimization, png

将 PNG 添加到 XCode iPhone 项目时，编译器会使用 pngcrush 对其进行优化。一旦在设备上，图像的渲染性能非常快。

我的问题是我的应用程序在运行时从外部源（从 Picasa 网络相册，使用 Google 数据 API）下载其 PNG。不幸的是，这些图像的性能很差。当我在图像上进行自定义渲染时，它似乎比其内部存储的对应物慢 100 倍。我强烈怀疑这是因为下载的图像尚未优化。

有谁知道如何在 iPhone 上运行时优化外部下载的 PNG？我希望有一堂课能做到这一点。我什至考虑将 pngcrush 的源代码添加到我的应用程序中，这似乎很激烈。我自己也找不到合适的答案。我将非常感谢任何帮助。

谢谢！

更新：有些人建议这可能是由于文件的大小，但事实并非如此。在我的测试过程中，我添加了一个切换按钮，用于在使用嵌入式版本和下载完全相同的 PNG 版本之间进行切换。唯一的区别是嵌入式的在编译过程中被“pngcrush”优化了。这会进行一些字节交换（从 RGBA 到 BRGA）和 alpha 的预乘。（[http://iphonedevelopment.blogspot.com/2008/10/iphone-optimized-pngs.html](http://iphonedevelopment.blogspot.com/2008/10/iphone-optimized-pngs.html)）

另外，我指的性能不是下载，而是渲染。我将自定义绘画叠加在图像之上（覆盖 UIView 的 drawRect 方法），当背景是下载版本时非常不稳定，而当它是嵌入式（因此优化）版本时非常流畅。同样，它是完全相同的文件。唯一的区别是优化，我希望我可以在运行时，在设备上，下载后对图像执行。

再次感谢大家的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-13T18:29:36.147

您发布的那个链接几乎可以回答您的问题。

在构建过程中，XCode 会对您的 png 进行预处理，因此它的格式对 iPhone 中的图形芯片更友好。

尚未像这样处理的 Png 可能会使用较慢的渲染路径，该路径处理非原生格式以及必须为每种颜色单独计算 alpha 的事实。

所以你有两个选择；

1.  执行与 pngcrush 相同的工作并交换排序/预乘 alpha。加速可能是由于其中之一或两者。

2.  加载图像后，您可以从中“创建”新图像。这个新图像应该是 iPhone 的本机格式，因此性能应该更快。缺点是它可能会占用更多内存。

例如

```
CGRect area = CGRectMake(0, 0, width, height);
CGSize size = area.size;
UIGraphicsBeginImageContext(size);

[oldImage drawInRect:area];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-13T00:33:54.687

你说它“似乎”慢了 100 倍这一事实表明你没有进行任何实验，但做了一个猜测（它必须是 PNG 优化），并且现在正在沿着基于预感的路径前进。

在尝试解决问题之前，您应该花时间确认问题所在。我的直觉说PNG优化不应该是问题：这主要影响图像的加载，但是一旦它们在内存中，它们最初的文件格式就无关紧要了。

无论如何，您应该尝试 AB 比较，或者让您的代码从其他地方加载优化的 PNG 并查看它的比较情况，或者制作一个仅在两种 PNG 类型上进行一些绘图的测试应用程序。一旦您确认了问题所在，您就可以确定是否需要将 pngcrush 编译到您的应用程序中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-13T00:08:57.087

从表面上看，这听起来像是有别的东西在起作用。任何额外的图像处理都只会增加时间，直到它显示在屏幕上......

是否有可能通过发送适当的 HTTP 标头让服务器对图像进行 gzip 压缩？（如果它甚至对文件大小有很大帮助，那就是。）

暂时使用 pngcrush 源可能也是一个很好的测试，只是为了获得一些测量结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-13T03:19:54.710

好吧，似乎一个好方法（因为你不能在 iPhone 上运行 pngcrush 并期望它加快速度）是通过运行 pngcrush 的代理发出你的请求。代理将具有很好的马力，实际上可以让您在 100 倍的痛苦中获得一些收益。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-12T23:47:01.227

您是否以原始下载大小存储 png？如果是大图像，则渲染时间会更长。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-10-08T06:55:14.300

尝试 pincrush 将正常的 png 文件转换为粉碎的 png 文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-13T20:24:05.980

`drawRect:`你说你通过覆盖 UIView 的方法在图像之上绘图。您是否尝试通过在其上重复绘制整个图像和自定义内容来制作一些动画？

如果您将自定义内容放在单独的视图或图层中，并让操作系统处理在背景上合成结果，您可能会获得更好的结果。操作系统只会更新您实际更改的屏幕部分，而不会经常重新绘制整个图像。

# vb.net - VB.net 子程序使用参数

> ID：640928
> 
> 赞同：1
> 
> 时间：2009-03-12T23:47:53.020
> 
> 标签：vb.net, parameters

我正在尝试创建一个接受 3 个整数作为参数的 DisplayAverage 子过程。此过程应找到这 3 个数字的平均值，并在列表框中显示这些数字及其平均值。我知道我在这里做错了什么，我只是不知道是什么。

```
Private Sub btnAverage_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAverage.Click
    Dim a As Integer = CInt(txtone.Text)
    Dim b As Integer = CInt(txtTwo.Text)
    Dim c As Integer = CInt(txtThree.Text)
    Dim average As Double
    average = (a + b + c) / 3

    lstOutput.Items.Add(average.ToString())

End Sub

Sub DisplayMyName()
    lstOutput.Items.Add("David Whitney")
End Sub

Sub DisplayAverage()
    Dim a As Integer = CInt(txtone.Text)
    Dim b As Integer = CInt(txtTwo.Text)
    Dim c As Integer = CInt(txtThree.Text)
    Dim average As Double
    average = (a + b + c) / 3

    lstOutput.Items.Add("The average of " & a & " and " _
            & b & " and " & c & " is " & average)

End Sub

Private Sub btnAve_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAve.Click
    lstOutput.Items.Clear()
    DisplayMyName()

    Dim a As Integer = CInt(txtone.Text)
    Dim b As Integer = CInt(txtTwo.Text)
    Dim c As Integer = CInt(txtThree.Text)
    Dim average As Double
    average = (a + b + c) / 3

    lstOutput.Items.Add(average.ToString())

    DisplayAverage()

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T00:01:26.933

你有代码可以写出几次平均值。您真正需要做的就是：

```
Private Sub btnAve_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAve.Click
    lstOutput.Items.Clear()
    lstOutput.Items.Add("David Whitney")
    Dim a,b,c As Float
    Try
        a = Convert.ToSingle(txtone.Text)
        b = Convert.ToSingle(txtTwo.Text)
        c = Convert.ToSingle(txtThree.Text)
    Catch ex As FormatException
        MessageBox.Show("Please enter a valid number for a, b, and c.", "Error")
        Exit Sub
    End Try

    Dim average As Double = (a + b + c) / 3

    lstOutput.Items.Add("The average of " & a & " and " _
        & b & " and " & c & " is " & average)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T00:24:51.573

我同意克里斯，您需要将代码放在一个地方，但我不会在按钮单击事件中使用它。将它放在自己的例程中，称为平均或类似。

而且，如果您使用的是 .NET Framework 3.5 ... LINQ，那么还有一种更好的方法来平均数字。你可以在这里找到基础知识：http: [//tinyurl.com/bd2zcq](http://tinyurl.com/bd2zcq)

LINQ 方法的好处是您可以根据需要对任意数量的数字进行平均，因此该算法具有很好的重用性。也许是一个助手类？

# c# - 摆脱为每个可能的条件编写 ifs/elseifs 的习惯

> ID：640930
> 
> 赞同：2
> 
> 时间：2009-03-12T23:49:01.393
> 
> 标签：c#

在解析 xml 文档的节点或属性时，如果文档很大，我会有一堆 if 和 else 语句。

显然，从长远来看，100 多个 ifs 并不能构成可维护的代码。

除了这样做，还有其他更好的方法吗？我在 Hanselman 的博客上读到，他的一个朋友有同样的情况，写了大量的 ifs/else if 并且通常很糟糕的代码。Hanselman 提供了一些更易于维护的方式的片段，但整个代码不可用，因此很难准确理解（整个画面）正在发生的事情。[if, else 之后的生活](http://www.hanselman.com/blog/BackToBasicsLifeAfterIfForAndSwitchLikeADataStructuresReminder.aspx)

我使用的是 .NET 3.5，所以我拥有扩展方法和 LINQ 的全部功能。但是，我使用 .NET 2.0 工作，因此我也会感谢 v2.0 中的任何解决方案。:)

我的代码看起来与 Hanselman 网站上的问题非常相似：

if (xmlNode.Attributes["a"].Value == "abc" {

}
else if (xmlNode.Attributes["b"].Value == "xyz"
{
wt = MyEnum.Haze;
}

我可以有一个字典来存储我正在寻找的值作为键，也许是值中的一个委托（或者我想在找到所需值时发生的任何事情），所以我可以说 if (containskey) 获取委托并执行它，在伪代码中。

这种事情一直在继续。显然是非常幼稚的编码方式。我在解析文本文档的值等时遇到了同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-13T01:04:36.000

如果您需要将`<condition on xml node`> 映射到`<change of state`> ，则无法避免在*某处*定义该映射。这完全取决于您可以对条件做出多少假设以及在这些条件下您会做什么。我认为字典的想法是一个很好的想法。为了提供尽可能多的灵活性，我会这样开始：

```
Dictionary<Predicate<XmlNode>, Action> mappings; 
```

然后开始尽可能简化。例如，您是否经常像示例中那样将 wt 设置为 MyEnum 的值？如果是这样，你想要这样的东西：

```
Func<MyEnum, Action> setWt = val => 
    () => wt = val; 
```

对于您只需检查属性是否具有特定值的大概常见情况，您也需要一些便利：

```
Func<string, string, Predicate<XmlNode>> checkAttr = (attr, val) => 
    node => node.Attributes[attr] == val; 
```

现在您的字典可以包含以下项目：

```
 ...
 {checkAttr("a", "abc"), setWt(MyEnum.Haze)},
 ... 
```

这既好又简洁，但也不限于简单的`<attribute, value`> 到`<enum`> 映射。好的，所以现在你有一个包含这些条件-动作对的大字典，你只需说：

```
foreach(DictionaryEntry<Predicate<XmlNode>, Action> mapping in mappings)
{
     if (mapping.Key(xmlNode))
     {
         mapping.Value();
         break;
      }
} 
```

如果你避免使用 lambda 语法和字典初始化器，你应该可以在 2.0 中做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-12T23:59:43.567

您所指的链接说明了我最喜欢的方法之一 - 填充字典并将其用作从您的 xml 属性到您正在设置的值的映射等。

我使用的另一个“技巧”是对此进行扩展。如果您围绕包含特定属性的逻辑不仅仅是设置一个值，您可以为委托制作一个属性名称（或值）字典，其中委托设置您的值并可选择执行一些逻辑。

这很好，因为它适用于 .net 2 和 .net3/3.5。不过，在 .net 3.5 中设置代理可能会更好。

获得地图后，您可以对所有属性执行 foreach 循环，然后查找委托，如果存在，则调用它，如果不存在，继续/抛出/等 - 一切由您决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-13T01:31:05.640

你在这里做的是执行一个测试列表。对于每个测试，如果谓词为真，则执行一个动作。当测试通过时，停止处理列表。对？

有几个人建议使用字典，但使用字典的问题在于您无法控制其中项目的顺序。如果你想以特定的顺序执行测试（如前所述，你这样做），那是行不通的。所以列表似乎是要走的路。

假设谓词正在检查`XmlElement`.

您的测试是一个类的实例：

```
class Test
{
    string Predicate { get; set; }
    Action Verb { get; set; }

    Test(string predicate, Action verb)
    {
       Predicate = predicate;
       Verb = verb;
    }

    bool Execute(XmlElement e)
    {
        if (e.SelectSingleNode(Predicate) != null)
        {
            Verb();
            return true;
        }
        return false;
    }
} 
```

要填充测试列表：

```
List<Test> tests = new List<Test>();
tests.Add(new Test("@foo = 'bar'", Method1));
tests.Add(new Test("@foo = 'baz'", Method2));
tests.Add(new Test("@foo = 'bat'", Method3)); 
```

要执行测试：

```
foreach (Test t in tests)
{
   if (t.Execute()) break;
} 
```

您已经消除了很多 if/else 混乱，但您已经将其替换为：

```
void Method1()
{
   ... do something here
}

void Method2()
{
   ... do something else here
} 
```

但是，如果您的方法命名良好，那么这会产生非常干净的代码。

要使用 .NET 2.0，我认为您需要将其添加到代码中：

```
public delegate void Action(); 
```

因为我认为该类型是在 3.0 中定义的。我可能是错的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T23:52:49.450

好吧，我会在 3.5 中使用 LINQ。但是，您是否考虑过使用类型化数据集？这是一种可能性还是架构太松散？您可以推断出架构，并且仍然可以减少大量 gobbeldy-gook 代码。这是一种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T23:54:59.087

根据文档和您的场景以及您使用 if/elses 的目的...如果它用于验证您的 XML 文档，请根据模式对其进行验证。如果它验证，您可以安全地假设某些元素存在......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-13T00:19:56.093

很难说出你需要做什么。如果要根据 XML 属性设置一个变量，那么 Hanselman 提到的单行方法是最优雅的。

```
MyEnum wt = (MyEnum)Enum.Parse(typeof(MyEnum), xmlNode.Attributes["a"].Value, true); 
```

从您提供的简短示例看来，您可能需要根据不同的 XML 属性设置变量，如果是这种情况，您可能无法解决对大 if/else 块的需求。

如果您正在处理的 XML 中确实有类似的结构，则有时将 XML 节点作为 DataRow 处理会更容易。如果您的 XML 到处都是，那么这种方法就不是很好了。

```
DataSet xmlDerivedSet = new DataSet();
xmlDerivedSet.ReadXml(xmlFilename);

foreach (DataRow row in xmlDerivedSet.Tables[0].Rows)
{
    MyClass xmlDerivedClass = new MyClass(row);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-13T01:29:07.113

如果您正在为每个大节点进行处理，您可能还希望有一些特定类型的 xml 阅读器类，以便更干净地集成，将其与应用程序的实际逻辑分开。

假设您正在进行的处理是针对您在 Xml 中收到的大量客户数据。您可以定义一个类，如：

```
public class CustomerXmlReader
{
    public class CustomerXmlReader(XmlReader xml){}
    public Customer Read()
    { // read the next customer
    }
} 
```

这样，应用程序的其余部分将继续使用 Customer 对象，而您避免将其与 Xml 处理混合。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-13T01:43:40.197

一旦你清除了实现细节，Scott Hanselman 所描述的就是一种简单的表驱动方法。这些在许多书中都有讨论，例如 Steve McConnell 的“代码完成”，第 12 章（任一版本）。也在 Stack Overflow 上进行了讨论， [here。](https://stackoverflow.com/questions/105311/what-are-table-driven-methods)

# php - 使用 PHP 递归计数文件

> ID：640931
> 
> 赞同：10
> 
> 时间：2009-03-12T23:49:30.440
> 
> 标签：php, recursion, count

一个新手的简单问题，我的 Google-Fu 让我失望了。使用 PHP，您如何计算给定目录中的文件数，包括任何子目录（以及它们可能拥有的任何子目录等）？例如，如果目录结构如下所示：

```
/Dir_A/  
/Dir_A/File1.blah  
/Dir_A/Dir_B/  
/Dir_A/Dir_B/File2.blah  
/Dir_A/Dir_B/File3.blah  
/Dir_A/Dir_B/Dir_C/  
/Dir_A/Dir_B/Dir_C/File4.blah  
/Dir_A/Dir_D/  
/Dir_A/Dir_D/File5.blah

```

对于“./Dir_A”，脚本应返回“5”。

我拼凑了以下内容，但并没有完全返回正确的答案，我不确定为什么：

```
函数 getFilecount($path = '.', $filecount = 0, $total = 0){  
    $ignore = array('cgi-bin', '.', '..', '.DS_Store' );  
    $dh = @opendir( $path );  
    而（假！==（$file=readdir（$dh）））{  
        if( !in_array( $file, $ignore ) ){  
            if(is_dir("$path/$file")){  
                $filecount = count(glob("$path/$file/" . "*"));  
                $total += $filecount;  
                回声$文件计数；/* 调试 */
                回声“$总计”；/* 调试 */
                回声“$路径/$文件
”；/* 调试 */
                getFilecount("$path/$file", $filecount, $total);  
            }  
        }  
    }  
    返回$总计；  
}  

```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-12T23:57:26.880

这应该可以解决问题：

```
function getFileCount($path) {
    $size = 0;
    $ignore = array('.','..','cgi-bin','.DS_Store');
    $files = scandir($path);
    foreach($files as $t) {
        if(in_array($t, $ignore)) continue;
        if (is_dir(rtrim($path, '/') . '/' . $t)) {
            $size += getFileCount(rtrim($path, '/') . '/' . $t);
        } else {
            $size++;
        }   
    }
    return $size;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-12T23:59:51.227

使用 SPL，然后查看是否仍然出现错误。

[递归目录迭代器](http://www.php.net/~helly/php/ext/spl/classRecursiveDirectoryIterator.html)

使用示例：

```
<?php

$path = realpath('/etc');

$objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path), RecursiveIteratorIterator::SELF_FIRST);
foreach($objects as $name => $object){
    echo "$name\n";
}

?> 
```

这将打印 $path 下的所有文件和目录的列表（包括 $path ifself）。如果要省略目录，请删除 RecursiveIteratorIterator::SELF_FIRST 部分。

然后只需使用 isDir()

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-25T09:52:59.787

根据安德鲁的回答......

```
 $path = realpath('my-big/directory');
    $objects = new RecursiveIteratorIterator(
        new RecursiveDirectoryIterator($path),
        RecursiveIteratorIterator::SELF_FIRST
    );
    $count=iterator_count($objects);
    echo number_format($count); //680,642 wooohaah! 
```

像这样我可以计算（不列出）数千个文件。680,642 个文件实际上不到 4.6 秒；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T03:06:22.783

Paolo Bergantino 几乎已经完成了他的代码，但该函数仍然会计算 .DS_Store 文件，因为他拼错了。下面的正确代码

```
function getFileCount($path) {
    $size = 0;
    $ignore = array('.','..','cgi-bin','.DS_Store');
    $files = scandir($path);
    foreach($files as $t) {
        if(in_array($t, $ignore)) continue;
        if (is_dir(rtrim($path, '/') . '/' . $t)) {
            $size += getFileCount(rtrim($path, '/') . '/' . $t);
        } else {
            $size++;
        }   
    }
    return $size;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-12T23:56:46.010

你为什么要传递 $filecount？[passed-in] 值没有被使用；唯一的用法是在 "$total += $filecount" 并且您在此之前覆盖了 $filecount。

当函数遇到常规（非目录）文件时，您会错过这种情况。

编辑：我刚刚注意到对 glob() 的调用。这不是必需的。无论如何，您的函数正在递归地触及整个目录树中的每个文件。请参阅@Paolo Bergantino 的回答。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-03-13T00:04:09.127

检查`glob()`函数的 PHP 手册：http: [//php.net/glob](http://php.net/glob)

它在注释中有关于如何使其递归的示例。

# browser - 网络浏览器的 cookie 密钥的最大大小是多少？

> ID：640938
> 
> 赞同：321
> 
> 时间：2009-03-12T23:53:45.097
> 
> 标签：browser, cookies

网络浏览器的 cookie 密钥的最大大小是多少？

我知道 cookie 的最大大小是 4KB，但是密钥也有限制吗？

* * *

## 回答 #1

> 赞同：383
> 
> 时间：2011-01-05T12:57:15.260

您读到的 4K 限制是针对整个 cookie 的，包括名称、值、到期日期等。如果您想支持大多数浏览器，我建议将名称保持在 4000 字节以下，整体 cookie 大小在 4093 字节以下。

需要注意的一件事：如果名称太大，则无法删除 cookie（至少在 JavaScript 中）。通过更新 cookie 并将其设置为过期来删除 cookie。如果名称太大，比如 4090 字节，我发现我无法设置到期日期。我只是出于兴趣才研究这个，而不是我打算拥有那么大的名字。

要了解更多信息，这里是常见浏览器的“[浏览器 Cookie 限制](http://browsercookielimits.iain.guru/)”。

* * *

在这个问题上，如果你想支持大多数浏览器，那么每个域不要超过**50 个 cookie，每个域**不超过**4093 个字节**。也就是说，所有 cookie 的大小不应超过 4093 字节。

这意味着您可以拥有 1 个 4093 字节的 cookie，或 2 个 2045 字节的 cookie，等等。

* * *

由于 IE7，我曾经说过 4095 字节，但是现在 Mobile Safari 带有 4096 字节，每个 cookie 有 3 字节开销，因此最大 4093 字节。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2009-03-13T00:06:23.083

实际上，定义 cookie 如何工作的文档 RFC 2965 指定不应**有 cookie 的键或值大小的最大长度**，并鼓励实现支持*任意大*的cookie。每个浏览器的实现最大值必然不同，因此请查阅各个浏览器文档。

[请参阅RFC](http://www.ietf.org/rfc/rfc2965.txt)中的第 5.3 节“实施限制” 。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-06-21T21:56:03.537

如果应用规范允许您也可以使用*网络*存储（它支持 IE8+）。

它有**5M**（大多数浏览器）或**10M**（IE）的内存可供使用。

“ [Web Storage (Second Edition)](http://www.w3.org/TR/webstorage/) ”是 API，“ [HTML5 Local Storage](http://www.w3schools.com/html/html5_webstorage.asp) ”是快速入门。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2020-06-09T21:59:26.120

不完全是对原始问题的直接回答，但对于快速尝试直观地了解他们的 cookie 信息存储计划而不实施复杂的限制器算法的好奇者来说，这个字符串是 4096 个 ASCII 字符字节：

`"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmn"`

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2009-03-13T00:05:07.987

cookie 密钥（用于标识会话）和 cookie 是相同的东西，以不同的方式使用。所以限制是一样的。据微软称其为 4096 字节。

[MSDN](http://msdn.microsoft.com/en-us/library/ms178194.aspx)

> cookie 通常限制为 4096 字节，并且每个站点不能存储超过 20 个 cookie。通过使用带有子键的单个 cookie，您使用的站点分配的这 20 个 cookie 中的更少。此外，单个 cookie 占用大约 50 个字符作为开销（过期信息等），加上您存储在其中的值的长度，所有这些都计入 4096 字节的限制。如果您存储五个子键而不是五个单独的 cookie，则可以节省单独 cookie 的开销，并且可以节省大约 200 个字节。

# c - 在 Linux 中创建静态库的问题

> ID：640945
> 
> 赞同：1
> 
> 时间：2009-03-12T23:57:29.517
> 
> 标签：c, makefile

我正在制作一个简单的库以在我的应用程序中使用，以省去一遍又一遍地定义一些函数的麻烦......

这是我的生成文件：

```
CC=gcc
CFLAGS=-Wall -g -Wextra
OBJS=getline.o debug.o
LIB=libjimi.a
.PHONY: clean purge

libjimi.so : $(OBJS)
        ar rcs $(LIB) $(OBJS)
        @echo done!
%.o : %.c
        $(CC) $(CFLAGS) -c $^

clean :
        @rm *.o

purge : clean
        @rm $(LIB) 
```

现在，如果我链接库，我会得到一个段错误，但是如果我链接我链接的目标文件来创建库，它可以工作......建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-13T00:15:05.513

你的目标说 libjimi.so 是共享库的扩展，它应该只是 libjimi.a 的静态库。

请注意，当您使用静态库时，您只需像任何其他目标文件一样链接它，但对于共享库，您使用 -l 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-13T00:19:00.900

Linux (Unix) 上的静态库通常以 ' `.a`' 结尾；共享对象以 ' `.so`' 结尾。您的图书馆规则目前是：

```
libjimi.so : $(OBJS)
    ar rcs $(LIB) $(OBJS)
    @echo done! 
```

它应该是：

```
$(LIB): $(OBJS)
    ar rcs $(LIB) $(OBJS)
    @echo done! 
```

就个人而言，我倾向于使用

```
AR      = ar
ARFLAGS = rv 
```

导致：

```
$(LIB): $(OBJS)
    $(AR) $(ARFLAGS) $(LIB) $(OBJS) 
```

现在可以通过设置宏来调整构建的所有方面——如果有必要的话。

在不知道崩溃发生在哪里的情况下，很难知道是什么原因造成的。一种可能性是由于 makefile 混淆，您链接的是旧版本的库，而不是当前的工作版本。

`clean`顺便说一句，隐藏一个或`purge`目标正在做什么是不好的。`make`让echo 命令更好（`@`前面没有）。不过，这`@`完全适合`echo`；它的缺席将导致相同的信息被提交两次。

# c# - 需要一个使用 ORM 的 .NET 的“良好业务线应用程序”示例

> ID：640946
> 
> 赞同：2
> 
> 时间：2009-03-12T23:57:33.807
> 
> 标签：c#, .net, nhibernate, mvp

我正在尝试转向 TDD、ORM、Mocking 等。我需要一个使用 ORM 最好是 NHibernate 的业务应用程序的一个很好的例子。

它必须是开源的并使用存储库模式。

我通过示例学习得最好，我玩过存储库模式和工作单元模式，但没有在任何有意义的应用程序中使用。

我熟悉 IoC（我使用 unity）、WCF、Workflow Foundation、WPF、Smart Client Software Factory、Webclient Software Factory 等。

我已经学会了所有的“基础知识”（它们是非常高级的原理，被称为基础知识，IMO）我似乎无法将它们放在一起。

我们编写的应用程序在架构上遵循所有“最佳实践”，我们有业务逻辑层、数据访问层、MVP、MVVP、MVC 等。但是我们的 BLL 中从来没有任何代码

```
return dal.GetBlahBlahBlah(); 
```

我不得不问自己我所有的业务逻辑在哪里？？？

可能我们 95% 的数据访问是通过存储过程进行的，我不得不假设它全部是数据库。其中一些 SP 很大，有很多 if 语句、case 语句和偶尔出现的游标。

如上所述，我知道如何使用所有这些很酷的技术，但似乎我使用它们的唯一目的是为 sql server 制作一个非常非常复杂、过度架构的报告工具。

如果 ALT.NET 是更好的方法，如果在代码中包含所有业务逻辑是更好的方法，那么必须有一个开源应用程序以所有正确的方式将它们组合在一起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-13T11:04:09.820

我没有遇到任何 LOB 应用程序，但我听说[Cuyahoa](http://www.cuyahoga-project.org/)是如何使用 NHibernate 的一个很好的例子。

我熟悉[Suteki Shop](http://code.google.com/p/sutekishop/)中的代码，这是一个使用 ASP.Net MVC 和 Linq-To-Sql 的电子商务平台，目前处于活动状态并且重构得非常好，应该可以让您深入了解您的内容'正在尝试。

倒数第二个是 Rob Conery 的[MVC StoreFront](http://blog.wekeroad.com/mvc-storefront/)。Rob 是截屏大师，他对学习 TDD 提出了深刻的见解。

我的最后一个链接是[夏天的 nhibernate](http://www.summerofnhibernate.com/)另一个系列的截屏视频，这次专门关于使用 NHibernate

# c# - 如何使用多个线程分段处理图像？

> ID：640952
> 
> 赞同：0
> 
> 时间：2009-03-13T00:01:09.260
> 
> 标签：c#, performance, multithreading, image-processing

我正在尝试快速处理大图像（大约 2000x2000）。我正在使用 TrackBar 来更改图像的整体亮度。问题是 TrackBar（众所周知）可以非常快速地移动。这没关系，因为我不需要为 TrackBar 的*每个*刻度都处理图像，但它确实需要合理响应。想想图像编辑器中的亮度 TrackBar。

我已经尝试在另一个线程中进行所有处理，这有效，但它仍然太慢（即使在位图上使用 LockBits）。我不能使用 ColorMatrix，因为它允许组件溢出，并且我需要将值剪辑为 255。所以，我认为我可以通过使用 ThreadPool 并将图像拆分为多个部分来实现良好的性能。

这种方法的问题是我对多头应用程序没有太多经验，而且我不知道如何避免出现竞争条件（在已经锁定的图像上调用 LockBits 等）。谁能给我一个如何做到这一点的例子？

这是我到目前为止的代码。我知道这远非好事，但我只是在解决这个问题并在这一点上尝试了一堆不同的东西。基本概念就是以一张基础图片为源，对每个像素进行一些操作，然后将处理后的像素绘制成一个显示位图。任何帮助都是极好的。

```
 public Form1( )
    {
        InitializeComponent( );
        testPBox1.Image = Properties.Resources.test;
        trackBar1.Value = 100;
        trackBar1.ValueChanged += trackBar1_ValueChanged;        
    }     

    void trackBar1_ValueChanged( object sender, EventArgs e )
    {
        testPBox1.IntensityScale = (float) trackBar1.Value / 100;
    }

class TestPBox : Control
{
    private const int MIN_SAT_WARNING = 240;        
    private Bitmap m_srcBitmap;
    private Bitmap m_dispBitmap;
    private float m_scale;           

    public TestPBox( )
    {
        this.DoubleBuffered = true;                                              
        IntensityScale = 1.0f;
    }      

    public Bitmap Image
    {
        get
        {
            return m_dispBitmap;
        }
        set
        {
            if ( value != null )
            {
                m_srcBitmap = value;
                m_dispBitmap = (Bitmap) value.Clone( );
                Invalidate( );
            }
        }
    }

    [DefaultValue( 1.0f )]
    public float IntensityScale
    {
        get
        {
            return m_scale;
        }
        set
        {
            if ( value == 0.0 || m_scale == value )
            {                   
                return;
            }

            if ( !this.DesignMode )
            {
                m_scale = value;
                ProcessImage( );                    
            }
        }
    }   

    private void ProcessImage( )
    {
        if ( Image != null )
        {
            int sections = 10;
            int sectionHeight = (int) m_srcBitmap.Height / sections;
            for ( int i = 0; i < sections; ++i )
            {
                Rectangle next = new Rectangle( 0, i * sectionHeight, m_srcBitmap.Width, sectionHeight );
                ThreadPool.QueueUserWorkItem( new WaitCallback( delegate { ChangeIntensity( next ); } ) );
            }
        }
    }

    private unsafe void ChangeIntensity( Rectangle rect )
    {            
        BitmapData srcData = m_srcBitmap.LockBits( rect, ImageLockMode.ReadWrite, PixelFormat.Format32bppRgb );
        BitmapData dspData = m_dispBitmap.LockBits( rect, ImageLockMode.ReadWrite, PixelFormat.Format32bppRgb );            
        byte* pSrc = (byte*) srcData.Scan0;
        byte* pDsp = (byte*) dspData.Scan0;

        for ( int y = 0; y < rect.Height; ++y )
        {
            for ( int x = 0; x < rect.Width; ++x )
            {
                // we are dealing with a monochrome image, so r = g = b.
                // We only need to get one component value to use for all r, g, and b.
                byte b = (byte) CompMinMax( 0, 255, (int) ( pSrc[0] * m_scale ) );
                Color c = ( b > MIN_SAT_WARNING ) ? Color.FromArgb( b, Color.Red ) : Color.FromArgb( 255, b, b, b );                     

                // windows stores images internally in 
                // reverse byte order, i.e., Bgra, not Argb.
                pDsp[3] = (byte) c.A;
                pDsp[2] = (byte) c.R;
                pDsp[1] = (byte) c.G;
                pDsp[0] = (byte) c.B;

                pSrc += 4;
                pDsp += 4;                        
            }
        }

        m_srcBitmap.UnlockBits( srcData );
        m_dispBitmap.UnlockBits( dspData );
        this.Invalidate( );                      
    }

    private int CompMinMax( int min, int max, int value )
    {
        if ( value > max ) return max;
        if ( value < min ) return min;
        return value;
    }        

    protected override void OnPaint( PaintEventArgs e )
    {
        if ( Image != null )
        {               
            Graphics g = e.Graphics;
            Rectangle drawingRect = PaintUtils.CenterInRect( ClientRectangle, PaintUtils.ScaleRect( ClientRectangle, Image.Size ).Size );
            g.DrawImage( Image, drawingRect, 0, 0, Image.Width, Image.Height, GraphicsUnit.Pixel );         
        }

        base.OnPaint( e );
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-13T00:11:15.990

您是否考虑过在用户拖动轨迹栏时生成图像的缩小版本并对其进行图像处理？这将给你响应，同时仍然给用户有用的反馈，直到他们确定最终值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-13T01:12:41.130

如果您想使用当前的方法，可以进行一些小的调整，以摆脱竞争条件。

您需要更改的是对其进行调整，以便在 ProcessImage 中调用 LockBits/UnlockBits，而不是在单个线程池请求中。但是，您还需要跟踪传递给您的线程池委托的 WaitHandle，以便您可以阻塞直到所有线程池线程完成。只是在您的所有代表都完成之前不要解锁这些位，使其无效并返回。

但是，根据您的发布时间框架，您可能需要考虑使用任务并行库而不是 ThreadPool。C# 4 将包含这一点，但如果您不能等那么久，Mono 版本今天运行得相当好。它实际上使这种类型的工作比通过 ThreadPool 完成要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-23T23:19:43.467

通常，对图像子集的多线程处理是可能的，但通常对于通过处理子集和处理整个图像可以产生相同结果的算法是有意义的。换句话说，如果 A 和 B 是图像的子集，这应该是有效的方程：

```
alg(A + B) = alg(A) + alg(B) 
```

因此，您需要确定您的*某些操作*是否属于此类算法。

# java - Java Swing 自定义文本 JEditorPane

> ID：640957
> 
> 赞同：4
> 
> 时间：2009-03-13T00:03:25.523
> 
> 标签：java, swing, text, jeditorpane

我有一个不断附加到的对象（模型）列表（类似于日志文件），我想在 JEditorPane（视图）中显示为富文本。我怎样才能把它们粘在一起？

[http://java.sun.com/docs/books/tutorial/uiswing/components/generaltext.html#document](http://java.sun.com/docs/books/tutorial/uiswing/components/generaltext.html#document)似乎没有提供足够的信息来使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-13T09:39:18.307

一种简单的解决方案是将模型中的每个对象转换为 HTML 并附加字符串以创建可以在 JEditorPane 上设置的 HTML 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-13T14:59:17.930

您可以`DefaultStyledDocument`与 一起使用`AttributeSet`：

```
SimpleAttributeSet attr = new SimpleAttributeSet();
StyleConstants.setBold(attr , true);
StyleConstants.setForeground(attr, Color.RED); 
document.insertString(document.getLenght(),"yourstring", attr)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-13T11:27:51.777

建立一个习惯`Abstract Document`是痛苦的。你最好使用一个中间模型来监听`Object`模型和文档中的变化（使用 a [`DocumentListener`](http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/event/DocumentListener.html)）并根据情况更新模型或视图。如果您在用户时间内工作（而不是`Object`每秒更新模型 1,000 次），这将非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-19T14:01:47.367

好的，所以最简单的方法是扩展 JTextPane。扩展类创建并管理基础列表。在格式更改（例如新颜色）时，列表会完全重新格式化数据。唯一真正的问题是自动滚动不是 100% 可靠的，两者：

```
Container parent = getParent();

// get the parent until scroll pane is found
while (parent != null && !(parent instanceof JScrollPane)) {
    parent = parent.getParent();
}

if (parent != null) {
    JScrollPane scrollPane = (JScrollPane)parent;
    scrollPane.getVerticalScrollBar().setValue(scrollPane.getVerticalScrollBar().getMaximum());
} 
```

和

```
scrollRectToVisible(new Rectangle(0, getHeight() - 2, 1, 1)); 
```

提供不一致的结果，文本窗格有时不会一直滚动。

# user-interface - Web 应用程序界面优化 - 字体/提示？

> ID：640961
> 
> 赞同：0
> 
> 时间：2009-03-13T00:05:44.100
> 
> 标签：user-interface, fonts

我正在构建一个在屏幕上包含大量信息的界面……数十个输入，并带有随附的标签。由于信息量很大，字体必然变得非常小。

但我希望它尽可能具有可读性和可用性.. 是否有一种非常好的字体，既可读又紧凑，在浏览器中运行良好（特别是在这种情况下，IE7）？

有人有任何其他提示来解决这个问题吗？是否有一些像素/em 大小和字体的特定组合，或者其他一些可以帮助我的 CSS 巫术？

这是一个 Intranet 应用程序，因此我们实际上可以非常具体。

任何建议表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-13T00:12:06.080

要让它跨浏览器调整大小，请使用 ems。将 body 元素上的 font-size 设置为 62.5% 以使 em 大小更清晰。1.2em = 12 像素。

Arial 是相当不错的字体。Helvetica 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T00:08:34.403

您是否牢记可访问性？是否可以重新设计界面以减少显示的信息，让视力低于 20/20 的人可以轻松阅读您的页面？

通常，无衬线字体在使用小尺寸时更具可读性。如果你想使用等宽字体，我个人非常喜欢 Vista 的 'consolas' 字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-13T00:11:41.277

根据 2006 年的这篇文章： [http ://www.kathymarks.com/archives/2006/11/best_fonts_for_the_web_1.html](http://www.kathymarks.com/archives/2006/11/best_fonts_for_the_web_1.html)

塔霍马可能是赢家：

“Tahoma (Windows)。Tahoma 专为屏幕上的易读性而设计。它预装在 Windows 系统上。与 Verdana 风格相似，它更窄、更紧凑”

# python - 电子邮件集成

> ID：640970
> 
> 赞同：12
> 
> 时间：2009-03-13T00:09:14.370
> 
> 标签：python, django, email

我想知道是否有人可以帮助我。在某些 Web 应用程序中，应用程序会发送电子邮件，例如发布新消息时。然后，您无需登录应用程序来发布回复，您只需回复电子邮件，它就会自动使用您的回复更新网络应用程序。

我的问题是，这是如何完成的，它叫什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-13T00:20:12.083

**一般来说：**

1）为此目的设置一个专用的电子邮件帐户。

2）让程序监控邮箱（假设是fetchmail，因为我就是这样做的）。

3) 当一封电子邮件到达帐户时，fetchmail 下载电子邮件，将其写入磁盘，并以电子邮件文件作为参数调用您编写的脚本或程序。

4) 您的脚本或程序解析电子邮件并采取适当的措施。

对人们来说通常很神秘的部分是 fetchmail 部分（#2）。

**特别是在邮件服务器上** *（如果您控制邮件服务器足以将电子邮件重定向到脚本）*：

1-3) 配置要通过管道传输到您编写的脚本的地址。

4) 同上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-08-26T20:27:59.127

你应该看看[Lamson](http://lamsonproject.org)；它会让你做你所描述的事情，除此之外。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-13T00:41:04.233

根据您的标签，我假设您想在 Django 中执行此操作。

有一个名为[jutda-helpdesk](http://code.google.com/p/jutda-helpdesk/)的应用程序可以使用 poplib 完成您正在寻找的工作，这意味着您只需设置一个与 POP3 兼容的电子邮件地址。

看看他们的[get_email.py](http://code.google.com/p/jutda-helpdesk/source/browse/trunk/management/commands/get_email.py)看看他们是怎么做的。您只需从 cron 运行此脚本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-13T08:36:14.043

这是 Rails 世界领先的领域：[Rails 内置了对接收电子邮件的支持](http://guides.rubyonrails.org/action_mailer_basics.html#receiving-emails)。邮件服务器配置可能只是相同的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-13T00:34:48.897

要查看有关如何在 python 中接收电子邮件并处理然后使用 django 的工作示例，请查看：[http ://code.google.com/p/jutda-helpdesk/](http://code.google.com/p/jutda-helpdesk/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-13T00:27:36.997

用于此目的的常用工具是[procmail](http://en.wikipedia.org/wiki/Procmail)。

您需要设置专用的电子邮件地址（即外发电子邮件中的“from_email”地址）。然后，您的 MTA（例如 postfix 或 qmail）会将邮件发送到该地址到 procmail，而不是实际的邮箱。

然后，Procmail 可以将电子邮件传递给您的 python 脚本，该脚本可以在应用程序中进行更新。请参阅James Bennett 编写的[独立 django 脚本](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)，了解如何编写可与您的应用程序一起使用的 python 脚本。

# javascript - 仅在使用 JavaScript 创建文本框后，将焦点从 JavaScript 设置为文本框？

> ID：640971
> 
> 赞同：0
> 
> 时间：2009-03-13T00:09:31.000
> 
> 标签：javascript, focus

所以我刚刚用 JavaScript 创建了一个文本框，如下所示：

**编辑：添加了 len 变量**

```
var len = tbl.rows.length;
                     var rtb = tbl.insertRow(len);
                     var cName = rtb.insertCell(0);
                     var cDis = rtb.insertCell(1);
                     var cDur = rtb.insertCell(2);
                     cName.innerHTML = '<input type="text"  name="tbName1' + len + '" value="' + selected_text + '" >';
                     cDis.innerHTML = '<input type="text" name="tbDis1' + len + '" id="tbDis1' + len + '" >';
                     cDur.innerHTML = '<input type="text"  name="tbDur1' + len + '" >';
                     var txtBox = document.getElementById('tbDist1' + len);
                     txtBox.focus(); 
```

**编辑：将第二行更改为最后一行。**仍然得到这个错误： txtBox is null txtBox.focus();

最后一行不起作用。创建文本框后，我无法为其设置焦点。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T00:13:23.347

如果你检查你的值，`txtBox`你会发现它是未定义的。您尝试获取具有 id 的元素`tbDist1 + (len-1)`，但您创建了具有 id 的元素`tbDis1 + len`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-13T00:14:46.027

嗯...您正在通过说创建文本框，`id="tbDis1' + len + '"`但您正在通过执行来访问它`'tbDist1' + (len - 1)`...为什么？我不确定上下文，但这会尝试关注先前添加的文本框（如果有的话）。此外，您正在创建它`tbDis`并尝试使用`tbDist`. 里面少了一个`t`。将 id 设置为`id="tbDist1' + len + '"`并访问它`'tbDist1' + (len)`应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-13T00:13:25.343

不知道它应该如何工作：你之前有 tbDis 和 len，然后是 tbDist（注意：t）和 len-1 之后。奇怪的... ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-13T00:13:38.090

Err，它看起来像一个错字。您要求 (afaict) `tbDist1`，但正在创建`tbDis1`.

[编辑：马吕斯也发现了我`len`错过`len-1`的。]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-07T06:20:18.677

我无法调用文本框和 idk。为什么？！！

--> var txtBox = document.getElementById('tbDist1' + len);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-07T07:03:16.517

我有这个简单的代码：

```
<html>
<body>
<form id="f1">

<asp:Label id="tt"  runat="server" Text="Label" onclick="lblClick()"></asp:Label>

</form>
<script type ="text/javascript">

          function lblClick() {
             document.forms[0].tt.Text ="java";// here is the problem .. and idk why?
          }
</script>
</body>
</html> 
```

# browser - 后退/前进按钮和可用性

> ID：640973
> 
> 赞同：7
> 
> 时间：2009-03-13T00:10:42.793
> 
> 标签：browser, user-interface, navigation, usability, back-button

浏览器或类似浏览器的应用程序中的后退和前进按钮会*暂时*导航（用户导航页面的顺序），这可能不一定反映页面的逻辑顺序。是否有任何研究关注这如何影响用户的心理模型？关于如何提高可用性和减少混乱的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-13T00:26:15.390

2003 年对面包屑（逻辑导航）的使用以及它们是否增加了后退按钮的可用性（时间导航）进行了相当广泛的研究。就在[这里](http://psychology.wichita.edu/surl/usabilitynews/52/breadcrumb.htm)。

这是来自 Firefox 内部的一篇文章，关于[后退按钮如何与选项卡式浏览交互](http://weblogs.mozillazine.org/ben/archives/009210.html)以及它导致的一些 UI 混乱。

这是[另一篇](http://jrdodds.blogs.com/blog/2006/04/the_back_button.html)关于人们有时如何使用“Back”来表示“Undo”的文章。

希望这可以帮助你！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-13T12:27:54.360

有几条很好的研究希望提高 Back 的可用性。一个问题是让返回更像是最近访问的页面而不是历史：

*   Greenberg S & Cockburn A (1999) 背靠背：Web 浏览器后退按钮的替代行为。第五届年度人为因素和网络会议论文集，6 月 3 日在美国马里兰州盖瑟斯堡 NIST 举行。

*   Cockburn A、McKenzie B 和 JasonSmith M（2002 年）评估 Web 浏览器后退和前进按钮的时间行为。第十一届国际万维网会议，美国夏威夷檀香山，5 月 7 日至 11 日。

另一个研究方向关注的是如何更容易地访问 Back 序列中的“关键”页面（即导航分支的页面）：

*   Milic-Frayling N、Jones J、Rodden K、Smyth G、Blackwell A 和 Sommerer R (2004) SmartBack: Supporting Users in Back Navigation WWW 2004，2004 年 5 月 17-22 日，美国纽约。

*   Orner D & MacKenzie IS (2006)。Histree - 分层后退菜单。IADIS 国际会议 WWW/Internet 2006 – 第二卷

*   Kaasten S 和格林伯格 S (2001)。在 Web 浏览器中集成返回、历史记录和书签。CHI 2001 • 3 月 31 日至 4 月 5 日，379-380。

虽然人们可能会对研究人员测试的确切设计提出质疑，但这两条研究的总体思路都迟迟不能在现代浏览器 IMO 中实施。

据说用户使用 Back 来表示“撤消”。实际上，这更像是他们用它来表示“取消”（恢复导航，而不是数据输入），有时他们用它来表示“确定”。无论如何，它会导致问题，特别是在富互联网应用程序中。我认为如果我们要解决这些问题，我们需要采用与 Back 分开的 Undo 标准。（[http://www.zuschlogin.com/?p=41](http://www.zuschlogin.com/?p=41)）。

# programming-languages - 静态绑定和动态绑定有什么区别？

> ID：640974
> 
> 赞同：24
> 
> 时间：2009-03-13T00:10:46.927
> 
> 标签：programming-languages, language-design

绑定时间可以分为两种类型：静态和动态。静态绑定和动态绑定有什么区别？

你能举一个简单的例子来进一步说明吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-13T00:15:59.957

在最一般的术语中，**静态绑定**意味着*在编译时*解析引用。

```
Animal a = new Animal();
a.Roar(); // The compiler can resolve this method call statically. 
```

**动态绑定**意味着引用*在运行时*被解析。

```
public void MakeSomeNoise(object a) {
   // Things happen...
   ((Animal) a).Roar(); // You won't know if this works until runtime!
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-13T00:16:49.703

这取决于绑定发生的时间：编译时（静态）或运行时（动态）。调用简单类方法时使用静态绑定。当您开始处理类层次结构和虚拟方法时，编译器将开始使用所谓的[VTABLE](http://en.wikipedia.org/wiki/Virtual_table)。那时编译器并不确切知道要调用什么方法，它必须等到运行时才能确定要调用的正确方法（这是通过[VTABLE](http://en.wikipedia.org/wiki/Virtual_table)完成的）。这称为动态绑定。

有关更多详细信息和参考，请参阅有关[虚拟表](http://en.wikipedia.org/wiki/Virtual_table)的Wikipedia 文章。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-16T12:19:20.360

我遇到了一个quora用户“Monis Yousuf”的完美答案。他完美地解释了这一点。我把它放在这里是为了其他人。

绑定主要是面向对象编程中与多态性相关的概念。

首先，了解什么是**多态**。书上说它的意思是“一个名字和多种形式”。没错，但太抽象了。让我们举一个现实生活中的例子。你去看“医生”，医生可能是眼科专家、耳鼻喉科专家、神经外科医生、顺势疗法医生等。

这里的“医生”是一个名字，可以有多种类型；每个人都执行自己的功能。这是现实生活中的多态性。

**函数重载：**这个概念描述了静态绑定。函数重载可以粗略地定义为，两个或多个同名但签名不同（包括参数个数、参数类型、返回类型不同）的方法（函数）称为重载方法（或函数）。

假设您必须计算矩形和圆形的面积。见下面的代码： -

```
class CalculateArea {

    private static final double PI = 3.14;

    /* 
       Method to return area of a rectangle 
       Area of rectangle = length X width
    */
    double Area(double length, double width) {
        return (length * width);
    }

    /*
      Method to return area of circle
      Area of circle = π * r * r
    */
    double Area(double radius) {
        return PI * radius * radius;
    }
} 
```

在上面的代码中，有两个方法“Area”具有不同的参数。这种情况称为函数重载。

现在，来到真正的问题：这个静态绑定如何？

当您在代码中调用上述任何函数时，您必须指定要传递的参数。在这种情况下，您将通过：

*   两个double类型的参数[调用第一个方法，计算是一个矩形]
*   double 类型的单个参数 [将调用第二种方法，计算圆的面积]

因为，在编译时 java 编译器可以确定调用哪个函数，它是编译时（或 STATIC）绑定。

函数覆盖：函数覆盖是一个在继承中显示的概念。大致可以定义为：当父类中存在一个方法，而其子类也有相同的签名方法相同时，称为函数覆盖。[还有更多，但为了简单起见，我写了这个定义]下面的代码会更容易理解。

```
class ParentClass {
    int show() {
        System.out.println("I am from parent class");
    }
}

class ChildClass extends ParentClass{
    int show() {
        System.out.println("I am from child class");
    }
}

class SomeOtherClass {
    public static void main (String[] s) {
        ParentClass obj = new ChildClass();
        obj.show();
    }
} 
```

在上面的代码中，该方法`show()`被覆盖，因为父类和子类中都存在相同的签名（和名称）。

在第三个类中`SomeOtherClass`，一个类型的引用变量（obj）`ParentClass`保存了 ChildClass 的对象。接下来，方法`show(`) 从同一个引用变量 (obj) 中调用。

同样，同样的问题：这个动态绑定如何？

在编译时，编译器检查 Reference 变量的类型`ParentClass`并检查该方法`show()`是否存在于此类中。一旦它检查到这一点，编译就成功了。

现在，当程序运行时，它看到对象是 of ，`ChildClass`因此，它运行`show()`. `ChildClass`由于此决定发生在 RUNTIME，因此称为**动态绑定**（或运行时多态性）。

原始答案的[链接](https://www.quora.com/What-is-the-difference-between-static-and-dynamic-binding)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T11:48:12.627

**静态绑定：是*****在编译时***解析类型、成员和操作的过程。 例如：

```
Car car = new Car();
car.Drive(); 
```

在此示例中，编译器通过在对象上查找无参数`Drive`方法来执行绑定。`car`如果没有找到那个方法！搜索带有[可选参数](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/named-and-optional-arguments)的方法，如果没有找到该方法，则再次搜索该方法的[基类](https://docs.microsoft.com/en-us/dotnet/csharp/tutorials/inheritance)，`Car`如果没有找到该方法，则再次搜索[扩展方法](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods)的`Car`类型。如果找不到匹配项，您将收到编译错误！

在这种情况下，*绑定是由编译器完成的*，并且绑定依赖于静态地知道对象的类型。这使它成为静态绑定。

**动态绑定：**动态绑定将绑定（解析类型、成员和操作的过程）从编译时推迟到**运行时**。例如：

```
dynamic d = new Car();
d.Drive(); 
```

*动态类型*告诉编译器我们期望运行*时类型*有方法，但我们不能*静态*`d`地证明它。由于d是动态的，编译器会将绑定延迟到 d*直到 runtime*。`Drive`*`d``Drive`*

 **动态绑定对于在编译时我们知道某个函数、操作成员存在但编译器不知道的情况很有用！这通常发生在我们与*动态编程语言*、*COM*和*反射*进行互操作时。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-03-04T13:07:14.870

在编译时完成的绑定是静态绑定，在运行时完成的绑定是动态绑定。在静态绑定中，指针的数据类型决定调用哪个方法。但在动态绑定中，对象的数据类型决定调用哪个方法。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-07-14T05:29:31.580

*** 执行时间：-***变量与其值的绑定，以及变量在执行时与特定存储位置的绑定称为执行时间绑定。

它可能有两种类型

1.  在进入子程序时。
2.  在执行期间的任意点。

**编译时间绑定：-（** 翻译时间）它包括以下内容。

1.  程序员选择的绑定。
2.  由译者选择的装订。
3.  加载程序选择的绑定。

# asp.net-mvc - Control 的概念在 MVC 中有意义吗？

> ID：640979
> 
> 赞同：2
> 
> 时间：2009-03-13T00:12:55.783
> 
> 标签：asp.net-mvc, model-view-controller, controls

我最近开始使用MVC，我想到的一件事是控件的概念是否可能存在于MVC中？

从我看到的框架允许应用程序很好地分解为模型、视图和控制器，但我想不出一个很好的方法来获取该应用程序的“垂直切片”并在另一个应用程序中重用它。

我的意思是让我感到震惊的是，我使用 MVC 构建的任何 UI 组件都可能不太适合重用，就像您可以在 ASP.NET WebForms 中重用 Contol 一样。好的，有 HTML 助手，但我正在考虑更模块化的东西。更像是 WPF 中的控制模型。

这种二分法是否符合 MVC 与 WebForms 的核心，或者可重用的 UI 组件是否可以在 MVC 世界中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-13T00:23:54.820

您仍然可以`ascx`在 ASP.NET Web 窗体中使用文件和其他功能。MVC 中唯一缺少的部分是回发模型和面向视图状态的状态管理。不再有`<form runat="server">`，也没有自动生成的隐藏字段。除了这些，所有其他功能都可以在 ASP.NET MVC 中使用。您仍然可以使用基于 REST 的机制编写发布数据的控件，并在您的视图中使用它们。

所以，是的，只要您的控件不依赖服务器端表单进行回发，您就可以像在 ASP.NET Web 表单中使用它们一样使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-07T20:20:55.167

我一直在寻找同样的东西 - 对于具有自己的数据路径的可重用小部件，并在史蒂夫桑德森的博客上找到了这个：

[http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/](http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/)

来自文章：

“你听说过局部视图，那么局部请求呢？在任何 MVC 请求中，你可以设置内部局部请求的集合，每个内部局部请求都可以设置自己的内部局部请求等等。每个局部请求呈现任何普通常规控制器中的普通旧操作方法，每个都可以生成一个独立的小部件。”

本文恭敬地提供了 MVC Contrib Group 的子控制器策略 ( [http://www.mvccontrib.org/](http://www.mvccontrib.org/) ) 的替代方案，这也是您正在寻找的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-13T00:27:41.050

我想在 MVC 中更难将渲染和回发处理完全封装在一个您只需放在页面上的控件中。这在某些方面是因为 ASP.NET Webforms 是从 HTTP 语义中非常抽象的，并且该抽象是一个可以创建可重用用户控件的框架。

ASP.NET MVC 没有网络表单的抽象，因此您可以控制三个不同控制器的帖子。当您迁移到 ASP.NET MVC 时，您可能会觉得您失去了易于使用的控件，但我认为您有一个更好的框架来分离和重用域逻辑。

在 ASP.NET MVC 中，您有可以重用的部分视图。Rob Conery 对此有一篇很好的文章：[ASP.NET MVC: Using UserControls Usefully](http://blog.wekeroad.com/2008/01/07/aspnet-mvc-using-usercontrols-usefully/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:22:15.573

我认为最接近老式控件的是局部视图，这些实际上只是共享标记，您可以将其放在任何页面上。但是，他们没有自己的开箱即用控制器，因此为共享 UI 组件（部分视图）提供动力的代码需要存在于使用它的每个页面的控制器中。有一些方法可以减少代码的重复，但如果不实现部分视图控制器和绑定，我认为没有办法完全解决它。

# c++ - 从文件流中检测换行字节

> ID：640983
> 
> 赞同：2
> 
> 时间：2009-03-13T00:13:36.327
> 
> 标签：c++, newline, text-files, fstream

我正在尝试从包含组织名称（不带空格）和浮点整数的文本文件中收集信息。我想将此信息存储在数组结构中。

到目前为止，我遇到的问题是收集信息。这是文本文件的示例：

> CBA 12.3 4.5 7.5 2.9 4.1
> 
> TLS 3.9 1 8.6 12.8 4.9

每个组织最多可以有 128 个不同的号码，文本文件中最多可以有 200 个组织。

这是我的结构到目前为止的样子：

```
struct callCentre
{
char name[256];
float data[20];
}; 
```

我的主要：

```
int main()
{
callCentre aCentre[10];
getdata(aCentre);
calcdata(aCentre);
printdata(aCentre);
return 0;
} 
```

和getdata函数：

```
void getdata(callCentre aCentre[])
{
ifstream ins;
char dataset[20];

cout << "Enter the name of the data file: ";
cin >> dataset;

ins.open(dataset);

if(ins.good())
{
    while(ins.good())
    {
        ins >> aCentre[c].name;
        for(int i = 0; i < MAX; i++)
        {
            ins >> aCentre[c].data[i];
            if(ins == '\n')
                break;
        }
        c++;
    }
}
else
{
    cout << "Data files couldnt be found." << endl;
}
ins.close();
} 
```

我在 getdata 函数中试图实现的是：首先将组织名称存储到结构中，然后将每个浮点数读入数据数组，直到程序检测到换行字节。但是，到目前为止，我对换行字节的检查不起作用。

假设变量*c*和*MAX*已经定义。

我应该如何正确处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-13T00:20:03.550

>> 运算符将空格视为分隔符，其中包括换行符，因此它只会吃掉那些，而您永远看不到它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-13T00:29:41.750

您需要阅读线条，然后将线条切碎。下面的一些hackery说明了基本思想：

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main() {
    string line;
    while( getline( cin, line ) ) {
        istringstream is( line );
        string cs;
        is >> cs;
        double vals[10];
        int i = 0;
        while( is >> vals[i] ) {
            i++;
        }

        cout << "CS: " << cs;
        for ( int j = 0; j < i; j++ ) {
            cout << " " << vals[j];
        }
        cout << endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-13T00:20:52.800

```
char byte = ins.peek(); 
```

或者

```
if(ins.peek() == '\n') break; 
```

（编辑）：您还需要在 peek() 之后检查 eof，因为某些文件可能没有结束换行符。

我想指出，您可能需要考虑使用 a`vector<callCentre>`而不是静态数组。如果您的输入文件长度超过了数组的容量，您将遍历整个堆栈。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-13T00:31:05.787

我会逐行读取文件，并分别解析每一行的值：

```
std::string line;
while (std::getline(ins, line)) {
  std::istringstream sline(line);
  sline >> aCentre[c].name;
  int i = 0;
  while (sline >> aCentre[c].data[i])
    i++;
  c++;
} 
```

# visual-c++ - 在没有 Visual Studio 的情况下有什么方法可以查看调试输出？

> ID：640986
> 
> 赞同：5
> 
> 时间：2009-03-13T00:15:02.500
> 
> 标签：visual-c++, debugging

使用 MFC 的 TRACE 宏或 Windows API 中的 OutputDebugString，您可以写入 Visual Studio 的输出窗口。有没有办法在没有安装 Visual Studio 并且不想安装它的系统上查看此输出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-13T00:19:23.257

您可以使用 Sysinternals/Microsoft 的 Debugview

[http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-13T00:18:01.900

[您可以使用DebugView for Windows](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)捕获 OutputDebugString 的输出：

> DebugView 是一个应用程序，可让您监视本地系统上的调试输出，或者可以通过 TCP/IP 访问的网络上的任何计算机。它能够显示内核模式和 Win32 调试输出，因此您不需要调试器来捕获应用程序或设备驱动程序生成的调试输出，也不需要修改应用程序或驱动程序以使用非标准调试输出 API。

# css - 仅当存在 2 个类时，您可以使用 CSS 定位元素吗？

> ID：640996
> 
> 赞同：90
> 
> 时间：2009-03-13T00:18:47.703
> 
> 标签：css, css-selectors

正如您可能已经知道的那样，您可能有多个由空格分隔的元素上的类。

### 例子

```
<div class="content main"></div> 
```

使用 CSS，您可以`div`使用`.content`或来定位它`.main`。*当且仅当*两个类都存在时，有没有办法针对它？

### 例子

```
<div class="content main">I want this div</div>
<div class="content">I don't care about this one</div>
<div class="main">I don't want this</div> 
```

我将使用哪个 CSS 选择器来获得第一个`div`（假设我不能使用`.content:first-child`或类似的）？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2009-03-13T00:20:29.353

是的，只需将它们连接起来：`.content.main`. 请参阅[CSS 类选择器](http://www.w3.org/TR/CSS2/selector.html#class-html)。

但请注意，最高版本 6 的 Internet Explorer 不支持多个类选择器，仅支持最后一个类名。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-08-21T05:39:55.983

只是为了它（我真的不建议你这样做），还有*另*一种方法可以做到：

```
.content[class~="main"] {} 
```

或者：

```
.main[class~="content"] {} 
```

参考：[http ://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

> E[foo~="warning"] 匹配任何“foo”属性值为**空格分隔值**列表的 E 元素，其中一个值完全等于“warning”

演示：http: [//jsfiddle.net/eXrSg/](http://jsfiddle.net/eXrSg/)

### 为什么这实际上很有用（至少对于 IE6）：

由于 IE6 不支持多类，我们不能使用`.content.main`，**但是**有一些像[IE-7.js](http://code.google.com/p/ie7-js/)这样的 javascript 库启用了属性选择器，但是当涉及到多个类时似乎仍然失败。我已经在 IE6 中使用启用属性选择器的 javascript 测试了这个解决方法，它很丑陋，但它可以工作。

我还没有找到使 IE6 支持多个类选择器的脚本，但我发现了许多启用属性选择器的脚本。如果有人知道一个可行的*方法*，请在评论中给我留言，这样我就可以摆脱这种解决方法。*************