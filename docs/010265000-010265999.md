# StackOverflow 问答 10265000-10265999

# android - Android SQLiteDatabase 语法错误

> ID：10265003
> 
> 赞同：0
> 
> 时间：2012-04-22T03:34:41.527
> 
> 标签：android, sqlite, syntax-error

我是安卓新手。当我尝试在本地访问 SQLiteDatabase 时，遇到了语法错误。导致语法错误的代码如下。

```
final String tbl = "group";   
SQLiteDatabase db = dbHelper.getWritableDatabase();
db.delete(tbl, null, null); 
```

中存在语法错误`DELETE FROM group`。但是当我将变量更改`tbl`为

```
final String tbl = "\"group\""; 
```

谁能告诉我错误的原因？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:57:18.240

"group" 是 'GROUP BY' 的一部分，用于对结果进行分组排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:40:50.710

GROUP 是保留字。如果您在限定符（例如表名）周围加上引号，即使它是保留字，您也可以使用它。

我建议更改名称。

# php - Joomla 中的 PHP Echo 网址 - MySQL

> ID：10265008
> 
> 赞同：1
> 
> 时间：2012-04-22T03:36:24.257
> 
> 标签：php, mysql, joomla

我有一个自动 FTP 报告给服务器供我的客户查看的软件。我试图找出一种简单的方法来为我的 Joomla 用户合并这些报告。

所以这是我迄今为止认为最简单的。

[报告样本：此处](http://www.garranteedsolutions.com/reports/progress.php?id=p-25951946357-508786)的报告 样本

该软件会生成链接，然后我通常会通过电子邮件将它们发送出去。因此，我正在考虑在每个客户端下的 Admin > User Manager 中添加另一个字段以过去网址。

在前端使用文章中的 Jumi（它允许 PHP 和 Java）。

使用 Joomla Wrapper 的代码 iFrame 报告 Web 地址并使 src 动态化。所以它从数据库中提取网址。

```
<script type="text/javascript">
function iFrameHeight() {
var h = 0;
if (!document.all) {
    h = document.getElementById('blockrandom').contentDocument.height;
    document.getElementById('blockrandom').style.height = h + 60 + 'px';
} else if (document.all) {
    h = document.frames('blockrandom').document.body.scrollHeight;
    document.all.blockrandom.style.height = h + 20 + 'px';
}
}
</script>

<iframe onload="iFrameHeight()" id="blockrandom" name="iframe" src="http://www.garranteedsolutions.com/reports/progress.php?id=p-25951946357-508786" width="100%" height="1000" scrolling="no" class="wrapper">
This option will not work correctly. Unfortunately, your browser does not support inline frames.</iframe> 
```

我在数据库中添加了一个名为“门户”的附加列

您如何编写 php 代码来填充已登录用户的“门户”列中的网址，以便他们只看到他们的报告？

# java - 创建文件

> ID：10265011
> 
> 赞同：3
> 
> 时间：2012-04-22T03:36:39.187
> 
> 标签：java

我想创建一个文件，但下面的代码没有创建任何文件。

```
package InputOutput;

import java.io.*;

public class FinalProject{

    private File f;

    public File createFile() throws IOException{
        f = new File("E:\\Programming\\Class files\\practice\\src\\InputOutput\\helpSystem.txt");
        return f;
    }

    public static void main(String[] args) throws IOException{
        FinalProject fp = new FinalProject();
        fp.createFile();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T03:39:54.163

在 Java[`File`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)中表示文件或目录的路径名，而不是可写文件流。如果您需要创建文件，请调用`createNewFile`对象`File`：

```
try {
    f.createNewFile();
} catch (IOException ex) {
    // Cannot create new file
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T03:39:42.557

在您的 createFile 方法中添加以下内容：

```
if(!f.exists()) {
    f.createNewFile();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T03:40:26.827

这是创建文件的正确代码。

```
public File createFile() throws IOException{
f = new File("E:\\Programming\\Class files\\practice\\src\\InputOutput\\helpSystem.txt");
if(!f.exists()) {
f.createNewFile();
}
return f;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T17:53:46.137

如果指定的文件不存在，则调用 createNewFile 方法创建一个新文件 [这里](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createNewFile%28%29)是说明的链接。

希望它有所帮助！

# coldfusion - 两次实例化一个 CFC

> ID：10265019
> 
> 赞同：1
> 
> 时间：2012-04-22T03:39:11.837
> 
> 标签：coldfusion, coldfusion-8, cfc

当我尝试从 2 个不同的 CFC 实例化一个 CFC 时，ColdFusion 返回 500 错误。我尝试让其中一个 CFC 扩展另一个，但它没有解决问题。这是可能的，还是我只是做错了什么？

```
<!--- one.cfc --->
<cfcomponent name="FirstCFC">
   <cfset this.Tools = createObject('component', 'toolbox').init()>
....
</cfcomponent>

<!--- two.cfc --->
<cfcomponent name="SecondFC">
   <cfset this.Tools = createObject('component', 'toolbox').init()>
....
</cfcomponent>

<!--- toolbox.cfc --->
<cfcomponent name="Toolbox">
   <cffunction name="init" access="public">
      <cfreturn this>
   </cffunction>

   <cffunction name="someFunc" access="public">
   </cffunction>
</cfcomponent> 
```

这是 500 错误的屏幕截图

![在此处输入图像描述](../Images/172dfa22899b2cd2dec9a589a95a6e06.png)

这是一个更“完整”的代码示例

[http://pastebin.com/zJ1zpHYy](http://pastebin.com/zJ1zpHYy)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:24:24.943

您包含的 java 堆栈跟踪指示**无限递归错误**。创建类型 A 的对象时要小心，因为它们的伪构造函数中有一个 B 类型的新对象。如果对象 B*本身在**其*伪构造函数中创建了 A 类型的对象，那么您自己就会无限递归地创建对象，并以丑陋的 java 堆栈跟踪结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:53:50.340

肖恩是对的。他发布了更多代码，您可以看到 two.cfc 生成 tools.cfc 和 tools.cfc 生成 two.cfc。

您需要转向注入式设置（例如，ala ColdSpring）。

# android - LinearLayout 空间分布

> ID：10265021
> 
> 赞同：4
> 
> 时间：2012-04-22T03:39:32.493
> 
> 标签：android, android-layout

我有一个复杂的布局情况，其中一个水平线`LinearLayout`容纳了另外两个`LinearLayout`s。这些布局的内容是动态的，可以是任何类型的视图，并且在运行时从不同的独立源生成。

只要有足够的空间，我想同时显示它们，否则将它们限制为可用空间的 50%。所以我希望那些孩子在有足够空间`LinearLayout`的时候拥有，而在没有空间的时候。这意味着空间分布可以是10-90、25-75、60-40；当没有足够的空间来显示两个视图的全部内容时，它只会是 50-50。到目前为止，我还没有找到从 XML 执行此操作的方法，所以我正在从代码中执行此操作。我的问题是我可以只使用 XML 属性来实现我想要的吗？一种不同的布局可以做到吗？`layout_width="wrap_content"``layout_weight="0.5"`

这是我当前的布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:padding="2dp" >

    <LinearLayout
        android:id="@+id/title_frame"
        android:layout_width="wrap_content"
        android:layout_height="48dp"/>

    <LinearLayout
        android:id="@+id/options_frame"
        android:layout_width="wrap_content"
        android:layout_height="48dp"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:56:08.057

尝试这个。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:padding="2dp" >

    <LinearLayout
        android:id="@+id/title_frame"
        android:layout_width="wrap_content"
        android:layout_height="48dp" android:layout_weight="1">

    </LinearLayout>

    <LinearLayout
        android:id="@+id/options_frame"
        android:layout_width="wrap_content"
        android:layout_height="48dp" android:layout_weight="1">

    </LinearLayout>

</LinearLayout> 
```

我用 textviews 尝试过，这应该可以根据要求工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T23:30:55.230

这似乎无法仅使用 XML 属性来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T03:41:46.157

在使用 weight concept 时将 layout_width="wrap_content" 更改为 layout_width="fill_parent" 。

# python - 如何更改打印文本的速度（python）

> ID：10265022
> 
> 赞同：-1
> 
> 时间：2012-04-22T03:39:35.830
> 
> 标签：python

我想要完成的是第一个文本在 1 秒后出现。然后 2，等等。直到 10。然后当时间等于 10 时，时间减少，所以文本在 9 秒后出现，然后是 8 等等。

如何修复此代码以使其正常工作？

错误：

```
Traceback (most recent call last):
  File "C:/Users/Eric/Dropbox/time.py", line 13, in <module>
    time.sleep(time)
AttributeError: 'int' object has no attribute 'sleep' 
```

编码 ：

```
import time
x = 1
t = 1
time = t + 1
while x == 1:

    print time
    if time >=10:
        time = t - 1
    elif time <= 0:
        time = t + 1
    time.sleep(time) 
```

* * *

编辑：

```
import time
x = 1
t = 1
time1 = 0
while x == 1:

    if time1 == 10:
        time1 = time1 - 1
    elif time1 == 0:
        time1 = time1 + 1
    else :
        time1 = time1 + 1
    print time1
    time.sleep(time1) 
```

所以我改变了程序，所以我几乎可以正常工作。它的作用是计数到 10，然后计数到 9，然后返回到 10。例如。1,2,3,4,5,6,7,8,9,10,9,10,9,10 我如何设置它以便程序将时间增加到十然后减少到零然后再次增加？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T03:41:46.607

您正在`time`用自己的`time`变量（第 4 行）覆盖导入的模块（第 1 行）。你可以：

*   将您的`time`变量重命名为其他名称

    ```
    import time
    x = 1
    t = 1
    time_passed = t + 1 # use "time_passed" instead of "time" for example
    while x == 1:
        print time_passed
        if time_passed >= 10:
            time_passed = t - 1
        elif time_passed <= 0:
            time_passed = t + 1
        time.sleep(time_passed) 
    ```

*   使用别名导入的`time`模块`import time as tm``tm.sleep(time)`

    ```
    import time as tm # alias the time module as "tm" for example
    x = 1
    t = 1
    time  = t + 1
    while x == 1:
        print time
        if time >= 10:
            time = t - 1
        elif time <= 0:
            time = t + 1
        tm.sleep(time) # use "tm" to refer to the module 
    ```

*   `sleep`仅从`time`with导入`from time import sleep`并`sleep(time)`改为使用

    ```
    from time import sleep # only import "sleep" from time, not the whole module
    x = 1
    t = 1
    time  = t + 1
    while x == 1:
        print time
        if time >= 10:
            time = t - 1
        elif time <= 0:
            time = t + 1
        sleep(time) # use "sleep" directly 
    ```

* * *

修复此问题后，您还需要以某种方式记住您需要在下一次迭代时增加或减少时间。例如：

```
from time import sleep
x = 1
t = 1
time  = t + 1
incr = True
while x == 1:
    print time
    if time >= 10:
        time = 9
        incr = False
    elif time <= 0:
        time = t + 1
        incr = True
    else:
        if incr:
            time = time + 1
        else:
            time = time - 1
    sleep(time) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T03:41:58.297

导入后您正在重新定义“时间”...

尝试使用不同的变量名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T03:42:22.633

您的`time`变量与`time`您导入的模块 ( ) 冲突。您可以使用`curTime`or`myTime`作为变量名。

# jquery - 添加 JQueryMobile 后 URL 的 ASP MVC3 问题

> ID：10265026
> 
> 赞同：1
> 
> 时间：2012-04-22T03:40:08.047
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, mobile, razor

还有其他人在使用 MVC3、JQuery 1.7.1 和 JQuery Mobile 1.1.0 时遇到问题吗？每当我提交标准 MVC 表单时，我的 URL 来自：

**本地主机/站点/控制器/操作**

至

**本地主机/站点/控制器/动作#/控制器/动作**

我正在简化一个非常混乱的现有站点，因此我正在通过控制器清理和删除不需要的 jquery 表单处理并仅使用 Razor 来处理控制器。我想知道我的项目中是否存在冲突，但我设法从一个新项目中复制了它：

打开VS2010，新建Empty MVC3 Project——即下面没有提到的都是默认的MVC项目

添加测试控制器：

```
using System.Web.Mvc;
using MvcApplication1.Models;

namespace MvcApplication1.Controllers
{
    public class TestController : Controller
     {
        public ActionResult Testing()
        {
            return View(new TestModel());
        }

        [HttpPost]
        public ActionResult Testing(TestModel testModel)
        {
            if (ModelState.IsValid)
            {
                //Temp for examples sake
                ModelState.AddModelError("EmailAddress", "Account not found.");
            }

            return View();
        } 
    }
} 
```

添加测试模型：

```
using System.ComponentModel.DataAnnotations;

namespace MvcApplication1.Models
{
    public class TestModel
    {
        [Required(ErrorMessage = "Email is required.")]
        [DataType(DataType.EmailAddress)]
        [StringLength(50, ErrorMessage = "Email too long.")]
        public string EmailAddress { get; set; }
    }
} 
```

使用视图测试添加视图文件夹测试：

```
@model MvcApplication1.Models.TestModel

@using (Html.BeginForm("Testing", "Test", FormMethod.Post))
{ 
    <div id="divForgotPassword">
        <fieldset data-role="fieldcontain">
            <legend>Forgot Password</legend>
            <div id="editor-label">
                <label for="txtLogonID">
                    Email Address:</label></div>
            <div id="editor-field">
                @Html.TextBoxFor(m => m.EmailAddress, new { type = "email" })
                <br />
                @Html.ValidationMessageFor(m => m.EmailAddress)</div>
            <input type="submit" value="Reset Password" data-role="button" data-inline="true" />
        </fieldset>
    </div>
} 
```

运行并访问[http://localhost:65298/Test/Testing](http://localhost:65298/Test/Testing) 点击重置密码，验证器工作，URL 不变

将 jquery.mobile-1.1.0.js 和 jquery-1.7.1.min.js 添加到脚本文件夹

在 _Layout.cshtml 中添加： 并将 jquery 1.5.1 更改为 1.7.1

运行并再次访问我们的页面点击重置密码，验证器工作，但现在你有： **http://localhost:65298/Test/Testing#/Test/Testing**

我一定做错了什么？？这样做的主要问题是，我不喜欢使用该 URL 运行其他 javascript。我也担心它会干扰其他东西，而且它看起来很丑而且一定是错的......

提前谢谢了！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:13:19.770

如前所述，通过 ajax 加载页面是 jQm 的默认行为。Using`rel="external"` *确实*适用于链接，但它实际上适用于移动应用程序范围之外的链接（例如访问托管在同一域上的“主要”非移动站点），它不适用于表单提交。对于在您的移动应用程序和/或表单提交*范围内*的单个链接，添加属性`data-ajax="false"`是推荐的方法。

因此，对于**单个链接**，您可以这样做：

```
<a href="/nonMobileHome" rel="external">Full website (non-mobile)</a>
<a href="/user/edit/5" data-ajax="false">Load mobile page without ajax</a> 
```

对于**表单提交**，请使用：

```
<form action="/user/edit/5" method="post" data-ajax="false"> 
```

对于**页面上的所有链接/表单**，请在加载 jQuery Mobile**之前**将此 javascript 添加到您的页面：

```
$(document).bind("mobileinit", function () { $.mobile.ajaxEnabled = false; }); 
```

我发现在 ASP.NET MVC 中，通过在站点范围的 js 文件中包含上面的 javascript 语句来全局禁用 jQm 的 ajax 加载行为是最简单的。不幸的是，这个问题在 MVC4 和 Visual Studio 2012 中仍然存在，即使 Microsoft 默认包含一个 jQuery Mobile MVC4 模板。

有关在 jQuery Mobile 中抑制 ajax 加载的更多信息：http: [//jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)
[http://jquerymobile.com/test/docs/forms/forms-sample.html](http://jquerymobile.com/test/docs/forms/forms-sample.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T03:44:43.120

这是 jQuery mobile 的默认行为。对于所有链接，它不是以正常方式加载页面，而是发送 ajax 请求并加载页面，然后更新（只是附加）url。

如果您想禁用此行为，您可以`rel=external`输入链接，链接将在没有 ajax 的情况下加载，然后您的 url 将是正常的。

```
<a href="User/somepage" rel="external" />I wont be using ajax for navigation</a> 
```

[http://jquerymobile.com/demos/1.0a4.1/#docs/pages/docs-navmodel.html](http://jquerymobile.com/demos/1.0a4.1/#docs/pages/docs-navmodel.html)

# xcode - 许多对象库不起作用

> ID：10265027
> 
> 赞同：0
> 
> 时间：2012-04-22T03:40:08.530
> 
> 标签：xcode, cocoa, imagekit

我刚开始学习可可编程。我试图构建一个简单的图像查看器。我创建了一个新项目，然后从对象库中添加了一个图像查看器。问题是我得到了一个我什至无法通过谷歌搜索找到的错误。

```
2012-04-21 20:36:20.620 ImageViewer[2095:403] An uncaught exception was raised
2012-04-21 20:36:20.621 ImageViewer[2095:403] *** -[NSKeyedUnarchiver decodeObjectForKey:]: cannot decode object of class (IKImageView)
2012-04-21 20:36:20.624 ImageViewer[2095:403] (
    0   CoreFoundation                      0x00007fff83a42fc6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff89dd3d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff83a42dfa +[NSException raise:format:arguments:] + 106
    3   CoreFoundation                      0x00007fff83a42d84 +[NSException raise:format:] + 116
    4   Foundation                          0x00007fff8b957729 _decodeObjectBinary + 2714
    5   Foundation                          0x00007fff8b95899a -[NSKeyedUnarchiver _decodeArrayOfObjectsForKey:] + 1193
    6   Foundation                          0x00007fff8b92f480 -[NSArray(NSArray) initWithCoder:] + 486
    7   Foundation                          0x00007fff8b9577bb _decodeObjectBinary + 2860
    8   Foundation                          0x00007fff8b956ad6 _decodeObject + 201
    9   AppKit                              0x00007fff8eceac18 -[NSView initWithCoder:] + 1051
    10  Foundation                          0x00007fff8b9577bb _decodeObjectBinary + 2860
    11  Foundation                          0x00007fff8b956ad6 _decodeObject + 201
    12  AppKit                              0x00007fff8eddc106 -[NSWindowTemplate initWithCoder:] + 3998
    13  Foundation                          0x00007fff8b9577bb _decodeObjectBinary + 2860
    14  Foundation                          0x00007fff8b95899a -[NSKeyedUnarchiver _decodeArrayOfObjectsForKey:] + 1193
    15  Foundation                          0x00007fff8b95839b -[NSSet(NSSet) initWithCoder:] + 519
    16  Foundation                          0x00007fff8b9577bb _decodeObjectBinary + 2860
    17  Foundation                          0x00007fff8b956ad6 _decodeObject + 201
    18  AppKit                              0x00007fff8ebed99d -[NSIBObjectData initWithCoder:] + 2099
    19  Foundation                          0x00007fff8b9577bb _decodeObjectBinary + 2860
    20  Foundation                          0x00007fff8b956ad6 _decodeObject + 201
    21  AppKit                              0x00007fff8ebed048 loadNib + 235
    22  AppKit                              0x00007fff8ebec59c +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 217
    23  AppKit                              0x00007fff8ebec4b7 +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 141
    24  AppKit                              0x00007fff8ebec3fa +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 364
    25  AppKit                              0x00007fff8ee5f9b3 NSApplicationMain + 398
    26  ImageViewer                         0x00000001087035a2 main + 34
    27  ImageViewer                         0x0000000108703574 start + 52
    28  ???                                 0x0000000000000003 0x0 + 3
) 
```

看起来..我需要链接一个框架，但可可框架已经链接了。

还有什么我需要检查的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T03:51:25.620

堆栈跟踪抱怨缺少一个`IKImageView`类，该类是 ImageKit 的一部分，而 ImageKit 又是 Quartz 框架的一部分。

您需要将其添加`Quartz.framework`到项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T03:48:15.470

> -[NSKeyedUnarchiver decodeObjectForKey:]：无法解码类的对象（IKImageView）

您是否将 ImageKit 框架添加到您的项目中？除非您这样做，否则您的应用不会包含定义 IKImageView 的代码。

# jquery - 单击时上传 JQuery 文件

> ID：10265028
> 
> 赞同：0
> 
> 时间：2012-04-22T03:40:19.870
> 
> 标签：jquery

我不想使用输入类型的文件进行文件上传，而是想使用一个可点击的 div，它像输入一样调用正常的文件上传。

```
instead of this
<input type="file"/> 

I want this
<div>Click to upload</div>
and paste the file path in the div 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:11:29.997

主意：

当用户点击 div 时，在文件输入上调用 click 事件，当它改变时，在 div 上插入 html

在 div 上

```
 $('#magicdiv').click(function(){
 $('#leupload').click();
  }); 
```

在上传文件上

```
$('#leupload').change(function(){
$('#magicdiv').html( $(this).val() );
}); 
```

# css - a：悬停在菜单 li 项目上不起 作用

> ID：10265035
> 
> 赞同：0
> 
> 时间：2012-04-22T03:41:42.413
> 
> 标签：css, menu

我正在用 CSS 构建一个垂直菜单，但我无法让 a:hover 工作，它什么也没做。我一直在搜索和审查代码（我是 CSS 新手），但无法弄清楚......如果有人有任何建议，非常感谢 :)

这是CSS：

```
.menu_container{
position: absolute;
float: left;
width: 270px;
margin-top: 220px;  
}
.main_menu ul { 
padding: 0px; 
margin:0px;
list-style-type: none;  
}
.main_menu ul li {
padding-right: 25px;
font-family:Arial, Helvetica, sans-serif; 
font-size:11px; 
letter-spacing:4px;
text-align:right; 
line-height:35px;  
list-style-type:none;  
}
.main_menu ul li a  {  
text-decoration:none;  
color:#999;  
} 
.main_menu ul li a:hover {
text-decoration:none;  
color:#999;  
font-weight:bold;  
background:url(images/circle_grey.gif) right center no-repeat;
padding-right: 25px; 
float:right;
}   
.main_menu ul li a.selected  {
background: url(images/circle.gif) right center no-repeat;
padding-right: 25px; 
float:right;
color: #bc4c9b;
font-weight:bold;  
} 
```

HTML：

```
<div class="menu_container">
<div class="main_menu">  
<ul>  
<li><a href="index.html">HOME</a></li>  
<li><a href="quienes_somos.html" class="selected" >QUIÉNES SOMOS</a></li>  
<li><a href="consultoria.html">Consultoría</a></li>  
<li><a href="capacitacion.html">Capacitación</a></li>  
<li><a href="academico.html">Académico / ARTÍCULOS</a></li>  
<li><a href="alianzas.html">Alianzas</a></li> 
<li><a href="proyectos.html">Proyectos</a></li>  
<li><a href="contacto.html">Contacto</a></li>   
</ul>  
</div> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:35:05.917

菜单在悬停时浮动到左侧，也在`.selected`课堂上，这就是导致问题的原因。以下是`float`删除了属性的固定类：

```
.main_menu ul li a:hover {
  text-decoration:none;  
  color:#999;  
  font-weight:bold;  
  background:url(images/circle_grey.gif) right center no-repeat;
  padding-right: 25px; 
}

.main_menu ul li a.selected  {
  background: url(images/circle.gif) right center no-repeat;
  padding-right: 25px; 
  color: #bc4c9b;
  font-weight:bold;  
} 
```

# bitmap - 使用更多空间编程珍珠的恒定时间进行初始化 - 第 1 列

> ID：10265040
> 
> 赞同：3
> 
> 时间：2012-04-22T03:42:10.713
> 
> 标签：bitmap, initialization, programming-pearls

我正在阅读“Programming Pearls”，我对其中一个解决方案解释感到非常困惑——第 1 列中的问题 9。

问题是：当使用位图数据表示一组整数时，第一阶段将该组初始化为空。但是初始化空间本身可能需要大量时间。展示如何通过设计一种技术在第一次访问向量时将其初始化为零来规避此问题。

答案是：初始化向量*数据*[0...n-1] 的效果可以通过包含在两个额外的 n 元素向量*from*和*to*以及一个整数*top*中的签名来实现。如果元素 *数据*[i] 已经被初始化，那么*from* [i] < *top* and *to* [*from*[i]] = i。因此*from*是一个简单的签名，*to*和*top*一起确保*from*不会被内存的随机内容意外签名。

我已多次阅读此答案。我不明白。

有人可以解释一下吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T01:10:38.197

这个页面帮助了我：[http ://comments.gmane.org/gmane.comp.programming.algogeeks/30667](http://comments.gmane.org/gmane.comp.programming.algogeeks/30667)

但是让我看看我能不能解释一下。

基本上问题是：如果向量足够大，将向量初始化为全 0 会花费大量时间。那么，我们如何通过使用更多空间来避免初始化为 0 呢？即我们如何区分这个向量中的随机数据和我们故意放在那里的数据？

Bentley 的解决方案是使用与数据向量大小相同的“from”（映射）和“to”（签名 [实际上只是从索引的反向映射]）向量和“top”，即数字到目前为止数据数组中的元素。如下所述，这一点很重要`from[i] < top`。

使用解决方案中的示例：我们声明一个数据数组并将元素数设置为零：

```
top = 0
data = int array of integers of size 1,000,000 
       (all random values since we did not initialize it) 
```

在索引 1 处插入一个元素（在这种情况下 i=1）。但是现在我们怎么知道那不是一个随机值呢？我们使用地图和签名。“从”的索引等于数据的索引。

```
from[i] = top
to[top] = i
data[i] = 0 (I don't think it matters whether you set it to 0 or your intended value of 3)
top++ (top is now 1) 
```

所以你可能会说如果`to[from[i]] == i`碰巧怎么办。好吧，既然我们声明`from[i] < top`，这是不可能的。

检查以下两种情况：

A) 数据数组中尚未插入任何元素（即 top = 0），这意味着`from[i] < 0`它不是有效的数组索引。所以这是不可能的。

B）插入了一个元素（即顶部> 0，可以说它是1）因为`from[i] < top`=> `from[i] = 0`。但是，我们在数据数组中插入了一个元素，因此我们明确设置了`to[from[i]] = i`.

其余为 top = 2...n

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T07:45:03.020

我发现以下链接中的帖子对于理解常量时间初始化技巧背后的想法非常有帮助。

链接：[http ://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time/](http://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time/)

希望能帮助到你-

# javascript - 选择下拉列表并自动选中复选框，如果下拉列表的选定值不为空

> ID：10265042
> 
> 赞同：0
> 
> 时间：2012-04-22T03:42:35.783
> 
> 标签：javascript

当人们选择下拉列表时，如果下拉列表的选定值不为空，复选框将自动选中。但我遇到了“sel[i] is undefined”错误。

Javascript部分：

```
var chk = document.getElementsByTagName("input");
var sel = document.getElementsByTagName("select");

    for (var i=0; i< sel.length; i++) {
      sel[i].onchange = function(){

        if (sel[i].value !== ''){
        chk[i].checked  = true;

    }
    else{
        chk[i].checked = false;

    }
  };
} 
```

HTML部分：

```
<form name="form1">
<div class="container">
<input id='checkbox_id1' name='checkbox_id1' type='checkbox' value='1' /></label>&nbsp;

Select
      <label>
          <select id="select_id1" name="select">
            <option value=""></option>
            <option value="111">111</option>
            <option value="222">222</option>
          </select>
          </label>

    <hr>
<input id='checkbox_id2' name='checkbox_id1' type='checkbox' value='1' /></label>&nbsp;

Select
      <label>
          <select id="select_id2" name="select">
            <option value=""></option>
            <option value="111">111</option>
            <option value="222">222</option>
          </select>
          </label>
</div> 
```

jsfiddle：http: [//jsfiddle.net/planetoid/GwEuu/](http://jsfiddle.net/planetoid/GwEuu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:47:39.727

您的值`i`不是您认为的那样，因为在`for`实际调用任何事件处理程序之前循环已经运行完成，因此是循环 `i`结束时的值。`for`

要为每个事件处理程序捕获适当的值`i`，您可以使用这样的自执行函数，在每个特定事件处理程序的闭包中捕获它：

```
var chk = document.getElementsByTagName("input");
var sel = document.getElementsByTagName("select");

for (var i = 0; i < sel.length; i++) {
    (function(i) {
        sel[i].onchange = function(){
            chk[i].checked = sel[i].value !== '';
        }
    })(i);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/yds6w/](http://jsfiddle.net/jfriend00/yds6w/)

仅供参考，我还简化了`.checked`分配代码。

* * *

但是，在看了你的代码之后，我相信这可能是一种更好的实现方式，不需要自执行功能。与其依赖复选框和输入标签的完美并行数组，不如将选择的 ID 转换为相应复选框的 ID，并用于`this`引用选择元素。因此，`i`在事件处理程序中不使用。

```
var sel = document.getElementsByTagName("select");

for (var i = 0; i < sel.length; i++) {
    sel[i].onchange = function(){
        var checkboxId = this.id.replace("select_", "checkbox_");
        document.getElementById(checkboxId).checked = this.value !== '';
    }
} 
```

​ 工作演示：http: [//jsfiddle.net/jfriend00/g3UQG/](http://jsfiddle.net/jfriend00/g3UQG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T03:48:40.460

我看到 jfriend00 打败了我，但你也可以使用这个语法来达到同样的效果（我也缩短了内部代码）：

```
var chk = document.getElementsByTagName("input"),
    sel = document.getElementsByTagName("select");

for (var i=0; i< sel.length; i++) {
    sel[i].onchange = (function (i) {
        return function(){    
            chk[i].checked = sel[i].value !== '';
        };
    }(i));
} 
```

# ruby-on-rails - MongoDB 子串匹配查询

> ID：10265046
> 
> 赞同：1
> 
> 时间：2012-04-22T03:42:57.293
> 
> 标签：ruby-on-rails, string, mongodb, substring

我的应用程序正在尝试将传入字符串与我的 Mongo 数据库中的文档进行匹配，其中字段具有关键字列表。目标是查看关键字是否存在于字符串中。

这是一个例子：

传入字符串：

```
"John Doe is from Florida and is a fan of American Express" 
```

MongoDB 中文档的字段具有如下值：

```
in_words: "georgia,american express" 
```

因此，数据库记录有以逗号分隔的单词或关键字，其中一些是两个或多个单词。

目前，我的 RoR 应用程序提取文档并为每个对 inwords 发出 split(',') 命令的文档提取 inwords，然后遍历每个文档并查看它是否存在于字符串中。

我真的很想找到一种方法将这种类型的搜索推送到实际的数据库查询中，以加快处理速度。我可以将数据库中的 in_words 更改为如下数组：

```
in_words: ["georgia", "american express"] 
```

但我仍然不确定如何查询这个？

总而言之，我的目标是通过将该人的 inwords/关键字列表与传入字符串进行比较来找到与传入字符串匹配的人。并在数据库层执行此查询。

提前感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:55:14.123

作为第一步，您绝对应该将 in_words 拆分为一个数组。

您的查询仍然是一个棘手的问题。

接下来考虑对该数组字段使用[$regex查询。](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

构造正则表达式会有点困难，因为您想匹配输入字符串中的任何单个单词，或者它出现任何一对作品（多少个单词？？）。您可能会从我的博客条目中获得更多关于如何构建合适的正则表达式的想法，[在这里](http://blog.abodit.com/2011/11/mongodb-substring-search-with-a-difference/)我将输入字符串的子字符串与数据库进行匹配（正常 LIKE 操作的逆操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:54:01.243

您可以通过将长字符串拆分为单独的标记并将它们放入单独的数组来解决此问题。并使用`$all`查询有效地找到匹配的关键字。

查看样品

```
> db.splitter.insert({tags:'John Doe is from Florida and is a fan of American Express'.split(' ')})
> db.splitter.insert({tags:'John Doe is a super man'.split(' ')})
> db.splitter.insert({tags:'John cena is a dummy'.split(' ')})
> db.splitter.insert({tags:'the rock rocks'.split(' ')}) 
```

当你查询

```
> db.splitter.find({tags:{$all:['John','Doe']}}) 
```

它会回来

```
> db.splitter.find({tags:{$all:['John','Doe']}})
{ "_id" : ObjectId("4f9435fa3dd9f18b05e6e330"), "tags" : [  "John",     "Doe",  "is",   "from",     "Florida",  "and",  "is",   "a",    "fan",  "of",   "American",     "Express" ] }
{ "_id" : ObjectId("4f9436083dd9f18b05e6e331"), "tags" : [ "John", "Doe", "is", "a", "super", "man" ] } 
```

请记住，此操作区分大小写。

如果您正在寻找部分匹配，请`$in`改用`$all`

此外，您可能需要在插入之前删除干扰词（'a'、'the'、'is'...）以获得准确的结果。

我希望很清楚

# php - PHP登录脚本需要用户登录两次

> ID：10265047
> 
> 赞同：1
> 
> 时间：2012-04-22T03:43:09.540
> 
> 标签：php, redirect, login, session-variables

我创建的登录系统最初很好地记录了用户，用户被重定向到预期的索引。但是，当用户单击导航链接以导航到另一个页面（受限制）时，用户将被重定向到登录页面。当他们第二次登录时，每个页面都可以正常访问。

我尝试打印出会话 ID 并转储了会话数组。我注意到，当用户首先进入页面登录时，他们的会话 id 为“x”，然后他们被重定向到仍然有会话 id“x”的索引页面。但是，当他们尝试导航到站点上的另一个页面时，他们会被重定向到登录页面并且会话 ID 为“y”。当他们第二次登录时，每个页面都会显示他们的会话 ID 为“y”。

用户重定向后会话 ID 发生更改的原因是什么？

这是我的登录脚本。

```
 session_start();

   $username = mysql_real_escape_string($_POST['username']);
   $password = mysql_real_escape_string(md5($_POST['password']));
   $submit = $_POST['submit'];
   $error = '';

    if(isset($submit)){     
    // Check if fields are filled out
    if($username == '' or $password == ''){
        $error = 'Please enter a Username and Password';
    }else{  // Proceed with login process

        // See if user exists
        $query = mysql_query("SELECT * FROM users WHERE username='$username'");

        if(mysql_num_rows($query)<1){
            echo 'Invalid Username/Password Combination';
        }else{  // Grab user's information
            $user = mysql_fetch_assoc($query);

            if($password == $user['password']){//Login Success, Redirect and set Session Vars

                $_SESSION["loggedIn"] = true;
                $_SESSION['username'] = $user['username'];
                $_SESSION['name'] = $user['first'];
                $_SESSION['auth'] = $user['authorization'];
                session_write_close();      

                header("Location: home.php");
                exit;

            }else{
                $error = 'Invalid Username/Password Combination';
            }
        }   
    }
    } 
```

和页面限制脚本：

```
session_start();

if(isset($_SESSION["loggedIn"])){
        echo '<div align="right" id="user">Welcome '.trim($_SESSION['name']).'! <a href="../resources/php/logout.php">Sign Out</a> | <a href="../resources/php/editAccount.php">Edit Account</a></div>';
    }else{
        header("Location: login.php");    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:28:10.107

尝试在受限页面上设置会话变量。

```
session_start();
$_SESSION["loggedIn"]
$_SESSION["loggedIn"];
$_SESSION['username'];
$_SESSION['name'];
$_SESSION['auth']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T04:46:32.820

出于调试目的，请`print_r($_SESSION)`在每个页面上设置，看看它是否打印正确...您可以设置一个值，看看它是否带有跨页...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-14T16:15:40.470

我遇到了非常相似的问题，并发现在指向无法识别设置会话值的页面的链接中包含 GET 参数是问题所在。虽然 session_start() 是页面脚本的第一行，导致需要第二次登录，但上一页链接中的 GET 参数被处理为请求页面的第一行（至少这是我的猜测至于为什么）。

# android - 备份我的整个应用程序（sqlite、文件夹和文件）的最佳方式 - Android

> ID：10265048
> 
> 赞同：2
> 
> 时间：2012-04-22T03:43:10.133
> 
> 标签：android, backup

我有一个应用程序可以创建一些文件夹并在其中加载大量图像。这些图像也在应用程序数据库中注册。

到目前为止，一切都很好。这些天，由于一个巨大的问题，我不得不格式化我的平板电脑。我丢失了所有图像和所有数据库。

有没有办法备份（和恢复）这一切？它可以在本地完成，也可以存储在我的网站文件夹或 ftp 中。

我看到了一些 Android 的备份类，但似乎它们没有做我想要的（备份文件、文件夹和数据库），我必须注册到谷歌自己的备份服务。

任何人都可以帮助我吗？

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:19:57.730

使用此[云存储](https://developers.google.com/appengine/docs/java/googlestorage/)。在您的情况下，这是唯一有意义的事情。

# java - 如何使用java监控窗口进程？

> ID：10265050
> 
> 赞同：1
> 
> 时间：2012-04-22T03:43:11.897
> 
> 标签：java, windows, multithreading, process, java-native-interface

当windows任务列表中的进程使用java被杀死时，如何获得回调？如何监控事件？我想意识到如果进程被杀死然后启动自动？

非常感谢！</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:15:19.367

好的，您可以分配一个线程，每 N 秒调用一次外部进程

```
tasklist /v 
```

可能在您的窗口标题或程序名称上使用过滤器。

`tasklist`要从java启动，你可以这样做

```
Process p = Runtime.getRuntime().exec("tasklist /v");
BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream())); 
```

然后阅读`BufferedReader`并检查您的流程。

记住每次以正确的方式终止进程。

# php - 如何在 php 中使用 fwrite 命令将 $ 符号写入文件

> ID：10265054
> 
> 赞同：0
> 
> 时间：2012-04-22T03:45:01.183
> 
> 标签：php, file, fwrite

我正在尝试使用以下代码创建具有数组声明的文件。但是变量名称不会出现在结果创建的页面中。

```
function createFile($fname,$code){
    $fp=fopen("products/".$fname,"w") or die("Can not open file");
    fwrite($fp,"<?php   
        $pageeInfo[productcode]=".$code.";
        ?>");

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T03:47:25.477

单引号禁止变量插值。

```
'$' 
```

但不要编写自修改代码；改用某种数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T03:56:33.763

完成此操作的正确方法是使用[var_export](http://php.net/manual/function.var-export.php)：

```
function createFile($fname, $code)
{
    return file_put_contents(
        "products/".$fname, // filename
        '<?php $pageInfo = ' // start tag
        .var_export(array( // we export an array
            'productcode' => $code,
            // add more keys if needed here
        ), true)
        .';' // end tag is not required
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T03:48:44.197

看起来您正在嵌套 php 标签。您可以尝试取出嵌套的 php 标签。

```
function createFile($fname,$code){
    $fp=fopen("products/".$fname,"w") or die("Can not open file");
    fwrite($fp, $pageeInfo[productcode].'='.$code); 
```

# facebook - 如何通过 api 检索 Facebook 链接分享历史记录？

> ID：10265055
> 
> 赞同：0
> 
> 时间：2012-04-22T03:45:55.623
> 
> 标签：facebook, api, share

在我的页面中，我有一个 Facebook“分享”按钮来分享 URL。然后，在 URL 共享并出现在我朋友的新闻源中之后，我不知道该链接被重新共享了多少次。是否有任何 API 可以读取该转发信息？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:04:44.840

您可以使用[FQL](http://developers.facebook.com/docs/reference/fql)表[link_stat](http://developers.facebook.com/docs/reference/fql/link_stat/)来查询该数据，例如：

```
SELECT 
    url, share_count 
FROM 
    link_stat 
WHERE 
    url="SHARED_URL" 
```

[这是官方南方公园页面](http://developers.facebook.com/tools/explorer?method=GET&path=fql?q=SELECT%20url,%20share_count%20FROM%20link_stat%20WHERE%20url=%22http://www.southparkstudios.com/%22)的示例。您可以从该表中获得更多统计信息，因此请务必阅读文档。

# eclipse-plugin - hadoop 与 MultiInputs，TotalOrderPartitioner----------- 与 hadoop-eclipse-plugins

> ID：10265056
> 
> 赞同：1
> 
> 时间：2012-04-22T03:46:03.853
> 
> 标签：eclipse-plugin, hadoop

我有两个问题：

1.  现在我使用了hadoop0.20.203和hadoop1.0.0。但我发现这两个版本都没有 MultiInputs 、 TotalOrderPartitioner 等类。（我打开 $HADOOP_HOME/hadoop-core-1.0.0.jar 文件，在 ort/apache/hadoop/mapreduce/lib/input/* 中找不到 .class 文件）。
    但我必须用它们来做一些工作。我错过了什么吗？我应该选择什么版本？

2.  我想为 hadoop1.0.2 找到一个插件（因为我发现这个版本的 hadoop-core-1.0.2.jar 文件有我想要的类。）我想找到一个已编译的。我在哪里可以找到它？（我有一些但似乎没有）

总之，我的目标只是找到一个可用的hadoop- *- -*版本，以及eclipse的插件。这个版本可以处理 TotalOrder 等。我应该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:29:19.590

如果它们存在于 1.0.2 中，您可以改用这个版本吗？如果您的集群当前使用 1.0.0 并且您无法将其升级为运行 1.0.2，那么您可以获取这两个文件的源并将它们添加到您的作业 jar 中（就像它们是您编写的代码一样）。

1.0.2 可从镜像列表下载：

*   [http://www.apache.org/dyn/closer.cgi/hadoop/common/](http://www.apache.org/dyn/closer.cgi/hadoop/common/)

例如：[http ://apache.mirrorcatalogs.com/hadoop/common/hadoop-1.0.2/hadoop-1.0.2-bin.tar.gz](http://apache.mirrorcatalogs.com/hadoop/common/hadoop-1.0.2/hadoop-1.0.2-bin.tar.gz)

# ruby - gem install ruby -debug 在 Windows 7 上不起作用

> ID：10265059
> 
> 赞同：2
> 
> 时间：2012-04-22T03:46:41.393
> 
> 标签：ruby, ruby-1.9.3, ruby-debug

我在 Windows 7 上安装 ruby​​ 调试器并收到以下错误。在这个问题之前，我查看了以下帖子，它们不适合我，或者我明显误解了一些东西，请帮忙。

[无法在 Windows 上安装 ruby​​-debug gem](https://stackoverflow.com/questions/1972494/ruby-debug-gem-install-problem-on-windows)

[错误：安装 ruby​​-debug-ide](https://stackoverflow.com/questions/8283477/error-installing-ruby-debug-ide)

```
$ gem install ruby-debug
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug:
      ERROR: Failed to build gem native extension.
    c:/Ruby193/bin/ruby.exe extconf.rb
Can't handle 1.9.x yet
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

  Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=c:/Ruby193/bin/ruby

Gem files will remain installed in c:/Ruby193/lib/ruby/gems/1.9.1/gems/linecache-0.46 for inspection.
Results logged to c:/Ruby193/lib/ruby/gems/1.9.1/gems/linecache-0.46/ext/gem_make.out 
```

* * *

```
$ gem install ruby-debug19
   Temporarily enhancing PATH to include DevKit...
   Building native extensions.  This could take a while...
   ERROR:  Error installing ruby-debug19:
    ERROR: Failed to build gem native extension.

    c:/Ruby193/bin/ruby.exe extconf.rb
 checking for rb_method_entry_t.body in method.h... *** extconf.rb failed ***
 Could not create Makefile due to some reason, probably lack of
 necessary libraries and/or headers.  Check the mkmf.log file for more
 details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=c:/Ruby193/bin/ruby
    --with-ruby-dir
    --without-ruby-dir
    --with-ruby-include
    --without-ruby-include=${ruby-dir}/include
    --with-ruby-lib
    --without-ruby-lib=${ruby-dir}/lib
 c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an    executable file. (RuntimeError)
 You have to install development tools first.
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:491:in `block in try_compile'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:443:in `with_werror'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:491:in `try_compile'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:1002:in `block in have_struct_member'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from c:/Ruby193/lib/ruby/1.9.1/mkmf.rb:1001:in `have_struct_member'
    from extconf.rb:10:in `block in <main>'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:18:in `call'
    from c:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:18:in `create_makefile_with_core'
    from extconf.rb:24:in `<main>'

  Gem files will remain installed in c:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.25 for inspection.
 Results logged to c:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.25/ext/ruby_debug/gem_make.out 
```

# c# - 使用 c# 从特定字符串中删除停用词

> ID：10265062
> 
> 赞同：-9
> 
> 时间：2012-04-22T03:47:05.757
> 
> 标签：c#

我有一个单词数组，我想从输入字符串中删除它们，谁能告诉我执行此任务的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T03:55:49.440

这应该工作

```
string[] arrToCheck = new string[] { "try ", "yourself", "before " };

string input = "Did you try this yourself before asking";
foreach (string word in arrToCheck )
{
   input = input.Replace(word, "");
}
MessageBox.Show("result is "+input); 
```

输入变量现在将有一个字符串，该字符串在您的数组中没有这些单词。

# jpql - hql/jpql 休眠与 jpa 不适用于 cos 和 radions 功能

> ID：10265065
> 
> 赞同：0
> 
> 时间：2012-04-22T03:47:38.303
> 
> 标签：jpql, trigonometry

以下查询在 mysql 查询浏览器中运行良好，但是当我将其移至 jpql 或本机查询并尝试使用实体管理器执行时，没有得到任何结果，也没有看到任何错误。

我正在使用 Hibernate core 3.3.0 Entity Manager 3.4.0 和 spring IOC 来进行 entityManager 注入

```
select * from location
where 1=1
    and latitude is not null and longitude is not null
    and (6371 *

    acos(   cos( radians(12.922253 ) ) *
            cos( radians(latitude) ) *
            cos( radians( 77.614417 ) - radians(longitude) )
            + sin( radians(12.922253 ) ) *
            sin( radians( latitude ) )
        ) ) < 100.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:44:39.710

我相信“&&”不是 JPQL 的一部分。尝试用“和”替换它。

# css - 使用@font-face 问题

> ID：10265066
> 
> 赞同：0
> 
> 时间：2012-04-22T03:47:38.137
> 
> 标签：css, fonts, font-face

我在使用@font-face 时遇到了一点麻烦，这让我很困惑。我觉得我做得对与否。

所以我做了声明

```
@font-face{
    font-family: Art Post black; 
    src: url('/fonts/ArtPostblack.ttf');
    }
@font-face{
    font-family: SimplyDelicious; 
    src: url('/fonts/SimplyDeliciousFont3.ttf');
    } 
```

然后打了电话

```
#blah{font-family:Art Post black; } #blah2{font-family:SimplyDelicious;} 
```

现在的问题是 Art Post 黑色作品，但 SimplyDelicious 也不起作用 当我删除 Art Post 黑色字体时。它不会改变，这意味着自定义字体仍然没有被删除。所以...我很困惑，我做得对吗？好吧，我猜不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:59:24.447

您的语法是正确的，但它非常基本。首先，使用这个推荐的@font-face 语法：

```
@font-face {
    font-family: 'MyFontFamily';
    src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
         url('myfont-webfont.woff') format('woff'), 
         url('myfont-webfont.ttf')  format('truetype'),
         url('myfont-webfont.svg#svgFontName') format('svg');
} 
```

**更新：如果字体名称中包含空格，则在@font-face 语法和css 选择中都需要在字体名称周围加上“”。如果您没有代码显示的单引号或双引号，它将无法正确选择。那很可能是你的问题。不过，也可以使用这种新的防弹语法来使其更加跨浏览器。**

来源：[http ://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

然后确保您的链接是正确的。请记住，在 URL 开头使用 / 会将浏览器定向到域的根目录。因此，将其粘贴到域名后的地址栏中，看看它是否下载了字体文件，如果是，则您的链接是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:52:31.807

这种调用不同字体的方式可能会有所帮助：

```
@font-face {
    font-family: 'myriadproregular';
    src: local('myriadproregular'), url('myriadproregular.ttf') format("truetype");
}
@font-face {
    font-family: 'myriadprocond';
    src: local('myriadprocond'), url('myriadprocond.ttf') format("truetype");
}
@font-face {
    font-family: 'myriadprosemibold';
    src: local('myriadprosemibold'), url('myriadprosemibold.ttf') format("truetype");
} 
```

* * *

```
and in your case 

@font-face{
    font-family: Art Post black; (why this font name have space? it was supposed to be like ArtPostblack )

    src: url('/fonts/ArtPostblack.ttf');
    }
@font-face{
    font-family: SimplyDelicious; 
    src: url('/fonts/SimplyDeliciousFont3.ttf');
    } 
```

并确保它们靠近 css 文件和正确的路径。

# debugging - IDE工具选择——跨平台x86 ASM调试

> ID：10265069
> 
> 赞同：4
> 
> 时间：2012-04-22T03:48:27.097
> 
> 标签：debugging, assembly, ide, x86, jasmin-x86

我正在写一个教学教程来教大学生和编程爱好者在 x86 上编译概念。

[我想要一个像WinASM](http://www.winasm.net/)这样的 IDE 工具，让他们能够调试他们的工作，但我知道他们可能并不都在家里运行 Windows。

我是针对[Jasmin](https://github.com/TUM-LRR/Jasmin)的最佳选择吗？（或者你有更好的建议 - 为什么？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T00:30:59.413

我见过的另一种方法是使用通用的教学架构（例如 MIPS）并在仿真下运行它。特别是对于 MIPS，有很多交互式模拟器（如[SPIM](http://spimsimulator.sourceforge.net/)），以及完整的系统模拟器（如[QEMU](http://www.qemu.org/)）。事实上，MIPS 架构比 x86 简单得多（而且寄存器匮乏！）这绝对是一个优点——这意味着您可以花更多时间专注于有趣的编译主题，而不是教授架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:26:21.140

*   [这是另一种方法](https://stackoverflow.com/a/12189102/15441)（虽然不利于调试） - 在 C++ 中内联执行汇编程序

*   [生成 ASM 的 AC repl](http://neugierig.org/software/c-repl/) - 用于了解生成的汇编程序。

*   [你也可以只依赖旧的 gdb](http://www.cs.cmu.edu/~gilpin/tutorial/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T23:05:25.607

你有没有考虑过在线调试工具？那里有几个。我个人喜欢这个[asm 调试器](http://asmdebugger.com)。

# postgresql - postgresql 调用具有相同名称的列

> ID：10265070
> 
> 赞同：2
> 
> 时间：2012-04-22T03:48:36.903
> 
> 标签：postgresql

我有两个表，它们具有相同的 ID 名称（我无法更改表的设计方式）并且我正在尝试查询 table2 的 ID，当它们连接时我将如何执行此操作？

```
create table table1(
    id          integer, -- PG: serial
    description MediumString not null,
    primary key (id)
);

create table table2 (
    id          integer, -- PG: serial
    tid         references table1(id),
    primary key (id)
); 
```

所以基本上当他们加入时，如果我执行以下查询，两列将具有相同的名称“id”

```
select * from table1
join table2 on table1.id = table2.tid; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T08:19:00.020

如果您想要两个“id”，则为列命名

```
SELECT table1.id AS id1, table2.id AS id2
FROM table1... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-21T17:02:03.773

如果您想查询两个表上的所有 * 但仍然能够引用特定的 id，您也可以这样做，您最终会得到可能不会使用的重复 id 列，但在某些情况下，如果您真的需要所有数据，值得。

```
select table1.*, table2.*, table1.id as 'table1.id', table2.id as 'table2.id'
from ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T03:53:41.703

您不能使用 选择它`select *`。尝试这个 ：

```
select table1.id, table1.description, table2.id, table2.tid
from table1
inner join table2
 on table1.id = table2.tid 
```

# css - 如何以简单的形式使用 CSS？

> ID：10265071
> 
> 赞同：0
> 
> 时间：2012-04-22T03:48:40.500
> 
> 标签：css, simple-form

我有一个 text_area 显示的高度太大。

我正在使用简单的表单并且我已经阅读了他们的文档，但仍然不清楚如何将 css 类应用于 text_area。

我的表格：

```
 <div class="field">
    <p>What's on your mind?</p>
    <%= f.text_area :content, :wrapper_html => { :class => 'height-100px' }, placeholder: "Thought leads to action..." %>
  </div> 
```

我的CSS：

```
.height-100px {
   height:100px;
} 
```

当我将 CSS 应用于围绕输入字段的 div 时，它会截断高度，但会插入一个滚动条。显然，在这种情况下，我没有应用正确的 css。

我认为这是一个容易回答的问题，但请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:20:27.307

我最终将类名“mf”应用于该部分，并使用通用的“textarea”元素来设置网站上所有文本区域的样式：

```
.mf {
textarea { 
height:50px;
}
} 
```

直接在simpleform元素上应用类名会很好，但它对我不起作用......

# c# - 将联接添加到此 LINQ 查询

> ID：10265081
> 
> 赞同：0
> 
> 时间：2012-04-22T03:50:49.220
> 
> 标签：c#, linq

我正在使用以下查询，但无法弄清楚如何向其中添加联接：

```
var chi = Lnq.attlnks.Where(a => a.ownerid == emSysid)
                     .Select(c => new { sysid }); 
```

如何将其加入“附加”表`(ON attlnks.sysid = attach.sysid)`并选择“名称”，其中 sysid 是行 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:03:50.923

对于 Linq 中的连接，查询表达式形式通常比 lambda 语法更具可读性 - 我相信这就是您所要求的：

```
var chi = from t in Lnq.attach
          join a in Lnq.attlnks
          on t.sysid equals a.sysid
          where a.ownerid == emSysid
          select t.name; 
```

如果最多只有一个条目应该匹配，您可以`FirstOrDefault()`在这种情况下链接 a（或其他替代方案，如 SingleOrDefault、Single、First 等）：

```
var chi = (from t in Lnq.attach
          join a in Lnq.attlnks
          on t.sysid equals a.sysid
          where a.ownerid == emSysid
          select t.name).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:08:45.270

如果我理解您的问题，这应该可以正常工作：

```
var query = from a in attlinks
     join aa in attach on a.sysid equals aa.sysid into a2
     where a2.sysid == a2.ownerid 
     select a2.Name; 
```

# javascript - 在调整大小的新弹出窗口中打开表单

> ID：10265083
> 
> 赞同：0
> 
> 时间：2012-04-22T03:51:28.987
> 
> 标签：javascript, html, forms, submit

我创建了将一些参数传递到另一个页面的新表单和按钮；但我需要提交按钮来打开大小符合规格的新弹出窗口。

这就是我通过超链接的方式；我需要相同的按钮功能

```
out.println("<a onclick=\"window.open(this.href,this.target,'height=500, scrollbars=1, width=950, resizable');return false;\" target=\"_blank\"  href=\"chart.jsp?room=" + B.getNumber() + "&building=" + B.getBuilding() + "\">view chart</a>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:36:03.563

我能想到的最简单的方法是不使用内联 JavaScript：

```
var form = document.getElementsByTagName('form')[0]; // or any other way to identify the form

form.onsubmit = function(e) {
    var eTarget = e.target;
    window.open(eTarget.action, eTarget.name, 'height=500, scrollbars=1, width=950, resizable');
    return false;
};​ 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/YGKmg/1/)。

# python - 检查 for 循环变量是否在字符串的最后索引处（不是变量 == 字符串 [index_Integer]）

> ID：10265086
> 
> 赞同：0
> 
> 时间：2012-04-22T03:53:03.877
> 
> 标签：python, if-statement, for-loop, iteration

我觉得我在 for 循环和用户输入方面做错了

每当我执行 for 循环时，我确实相信 for 循环中的局部变量在列表中只有一个条目

```
list[index_int] #returns value of the indexed entry in the list
user_input = "1234"
user_input[-1] >>> 4

    def print_numbers(n):
    for entry in n:
        if entry == "1":
            if (entry == n[-1]):
                print "E"
            else:
                print entry + "s,",
        elif entry == "0":
            if (entry == n[-1]):
                print "X"
            else:
                print entry + "X,",
        else:
            if (entry == n[-1]): #applies if entry is equal to the value of user input       at index value of (-1), which I do not want
                print entry + "L"
            else:
                print entry + "s,",            
user_input = raw_input()
if user_input.isdigit():
    print_numbers(user_input)
else:
    print user_input 
```

当我想放下 101 或 212 时，我得到了这些

```
Intention -> 1s, X, E
Result:
E
X, E

Intention -> 2s, 1s, 2L
Result:
2L 
1s, 2L 
```

我确实相信原因是在 for 循环期间，每个变量在其自己的列表中只有一个元素。

有没有办法检查for循环是否在列表（字符串）的最后一个索引位置（变量不等于字符串索引的值，即entry == n [-1]）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T03:56:18.300

你正在寻找[`enumerate()`](http://docs.python.org/library/functions.html#enumerate). 还有一点，但你应该能够弄清楚那部分。

# c - 写一个shell。使用管道执行命令时出现“未初始化的字节”

> ID：10265089
> 
> 赞同：0
> 
> 时间：2012-04-22T03:53:44.757
> 
> 标签：c, shell, exec, fork, pipe

我正在尝试用 C 编写我自己的 shell。下面的代码适用于没有管道的命令，否则不能。

使用 --trace-children=yes 和 --track-origins=yes 运行 valgrind 会给我一个“Syscall param execve(argv) points to uninitialised byte(s)”（请参阅​​下面的完整错误）。

*在相关方法中（参见下面的 makeargs），valgrind 在“ argv = (char ** )malloc((count+1) * sizeof(char*));”这一行告诉我“未初始化的值是由堆分配创建的”

使用我的“ls | sort”valgrind 的测试输入表示“分配了一个大小为 12 的块”。我看不出这是怎么可能的，因为 ls 和 sort 每个都调用 makeargs 并且两者都应该分配 8 个字节，因为 char* 应该有 4 个字节，然后 execvp 最后需要的 (char*)NULL 应该有 4 个字节的参数数组。

执行此命令后程序挂起。

我不确定为什么会发生这种情况，因为如果只有一次调用 makeargs （没有管道），它就可以工作。任何输入将不胜感激。

```
void execCommand(char** commandParts, int pipeCount)
{
  const int PIPE_READ = 0;
  const int PIPE_WRITE = 1;
  int numCommands = pipeCount + 1;
  int newfds[2];
  int oldfds[2];

  int k = 0;
  for(k; k < numCommands; k++)
  {

    //more commands exist
    if(k < pipeCount)
    {
      if (pipe(newfds) == -1) 
      {
        perror("new pipe error");
        exit(EXIT_FAILURE);
      }
    }

    if(fork() == 0) //child
    {
      //is prev command
      if(k > 0)
      {
        dup2(oldfds[PIPE_READ], STDIN_FILENO);
        close(oldfds[PIPE_READ]);
        close(oldfds[PIPE_WRITE]);
      }

      //more commands exist
      if(k < pipeCount)
      {
        close(newfds[PIPE_READ]);
        dup2(newfds[PIPE_WRITE], STDOUT_FILENO);
        close(newfds[PIPE_WRITE]);
      }
      char** args = NULL;
      int argcount = makeargs(commandParts[k], &args);

      if(execvp(args[0], args) == -1)
      {
        printf("%s: command not found \n", args[0]);
      }
    }
    else //parent
    {
      int status;
      waitpid(-1, &status, NULL);

      //is prev command
      if(k > 0)
      {
        close(oldfds[PIPE_READ]);
        close(oldfds[PIPE_WRITE]);
      }
      //more commands exist
      if(k < pipeCount)
      {
        oldfds[PIPE_READ] = newfds[PIPE_READ];
        oldfds[PIPE_WRITE] = newfds[PIPE_WRITE];
      }
    }
    //there are pipes
    if(pipeCount > 0 && k > 0)
    {
      close(newfds[PIPE_READ]);
      close(newfds[PIPE_WRITE]);
    } 
    //   if(argcount > 0)
    //    cleanArgs(argcount, args);   
  }
} 
```

被调用的 make args 方法

```
int makeargs(char *s, char *** argv)
{
  stripLeadingAndTrailingSpaces(s);
  int k =0, count = 0;
  for(k; k < strlen(s); k++)
  {
    if(s[k] == ' ')
    count++;
  }
  count++;

  char* parts = strtok (s," ");
  strip(parts);

  *argv = (char **)malloc((count+1) * sizeof(char*));

  (*argv)[0] = (char *)malloc(strlen(parts)+1);
  strcpy((*argv)[0], parts);

  int i = 1;
  for(i; i < count; i++)
  {
    parts = strtok (NULL, " ");
    if(parts != NULL)
    {
      strip(parts);
      (*argv)[i] = (char *)malloc(strlen(parts)+1);
      strcpy((*argv)[i], parts);
    }
  }
  (*argv)[count] = NULL;

  return count;
} 
```

valgrind 输出

```
==3603== Syscall param execve(argv) points to uninitialised byte(s)
==3603==    at 0x40E2CDF: execve (execve.c:60)
==3603==    by 0x40E314E: execvp (execvp.c:30)
==3603==    by 0x8049069: main (cscd340_s12_hw2.c:250)
==3603==  Address 0x41c617c is 4 bytes inside a block of size 12 alloc'd
==3603==    at 0x4028876: malloc (vg_replace_malloc.c:236)
==3603==    by 0x8049416: makeargs (ush.c:100)
==3603==    by 0x8048E61: execCommand (cscd340_s12_hw2.c:191)
==3603==    by 0x8049069: main (cscd340_s12_hw2.c:250)
==3603==  Uninitialised value was created by a heap allocation
==3603==    at 0x4028876: malloc (vg_replace_malloc.c:236)
==3603==    by 0x8049416: makeargs (ush.c:100)
==3603==    by 0x8048E61: execCommand (cscd340_s12_hw2.c:191)
==3603==    by 0x8049069: main (cscd340_s12_hw2.c:250) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:49:05.373

你有一些错误的计算：`count`是空格数，而不是命令行中的单词数。这会影响复制代码：

```
for(i; i < count; i++)
{
  parts = strtok (NULL, " ");
  if(parts != NULL)
  {
    ...
  }
} 
```

如果输入命令行中的单词太少，则某些尾随条目`argv`将未初始化。你可能想做这样的事情：

```
for(i; i <= count; i++)
{
  parts = strtok (NULL, " ");
  if(parts != NULL)
  {
    ... // consider using strdup
  }
  else
  {
    (*argv)[i] = NULL;
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:53:30.897

最后，我将问题追踪到我的 stripLeadingAndTrailingSpaces(s);

我有

```
void stripLeadingAndTrailingSpaces(char temp[]) 
{
   int len = strlen(temp), start = 0;  
   while(isspace(temp[len]))
   {
      len--;
   }
   while(isspace(temp[start]))
   {
      start++;
   }  
   memmove(temp, temp + start, len);
} 
```

但需要

```
void stripLeadingAndTrailingSpaces(char temp[]) 
{
   int len = strlen(temp)+1, start = 0;  
   while(isspace(temp[len-2]))
   {
      temp[len-2] = '\0';
      len--;
   }
   while(isspace(temp[start]))
   {
      start++;
      len--;
   }  
   memmove(temp, temp + start, len);
} 
```

旧的 strip 方法有几个问题：

1.  我正在检查'/0'，看看它最后是否是一个空格。
2.  我没有将新的空终止符应用于新端。
3.  切割前面的空间时，我并没有减少长度。

# symbols - $_GET 弄乱了 URL，因为 &

> ID：10265096
> 
> 赞同：1
> 
> 时间：2012-04-22T03:54:25.777
> 
> 标签：symbols

我怎样才能得到它，以便我可以在我没有引入新的 $_GET 的 URL 中使用 &。

www.example.com/index.php?u=brian&art=this%20is%20my%20issue%20&%20enjoying%20issues。

www.example.com/index.php?u=brian&art=this%20is%20my%20issue%20* *&* *%20enjoying%20issues。

我试图在 URL 中的文本之间包含 & 符号。

我有一个来自另一个页面的链接，该链接发送到上述链接，但由于“&”符号或只是因为 URL 试图找到另一个 $_GET 字符串，它不会在数据库中找到它。

我该如何解决这个问题？对不起，如果这个问题对你的价值来说太无聊了。我也很抱歉尝试已经用谷歌搜索但找不到它。但是，嘿！这就是谷歌搜索结果的开始方式。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:56:17.873

使用`%26`而不是`&`在 URL 内。

# javascript - 验证失败后脚本不会停止

> ID：10265098
> 
> 赞同：0
> 
> 时间：2012-04-22T03:54:36.290
> 
> 标签：javascript, validation

我正在对来自[javascript-coder](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)的输入框使用 javascript 验证，它在我的非 ajax 页面上运行良好，但是当我使用 ajax 发布输入时，即使验证失败，脚本也会运行而不会停止。[我从这里](https://stackoverflow.com/questions/4958773/javascript-input-validation)尝试了一个示例，但是当我尝试该建议时，验证根本不起作用。在我的 ajax 脚本中，我可以通过在发布数据之前简单地将其放入 jquery 验证中：

```
var frm = $(this).closest('form');        
        if($(frm).valid()){ 
```

但我真的很想坚持使用这个验证库，所以我希望社区中的某个人更熟悉 javascript，甚至这个验证库也可以帮助我找到一个等价物，因为我无法在所有文档中找到任何允许你在向前移动我的 ajax 脚本之前测试验证是否失败。

我的表格：

```
<form method="post" name="send_message_frm" id="send_message_frm">
        <div style="margin-top:20px;"></div>
        <fieldset>
          <div class="clear"></div>
          <div style="margin-top:20px;"></div>
          <label>Product Group Name:</label>
          <input name="desc" class="text-input medium3-input required" type="text" id="desc" value="">
          <div style="color:red;" id='send_message_frm_desc_errorloc' ></div>
          <div style="margin-top:20px;"></div>
        </fieldset>
        <input name="user" class="text-input medium3-input" type="hidden" id="user" value="<?php echo $myid ; ?>">
        <div style="margin-top:20px;"></div>
         <input type="submit" id="send-message" name="submit" value="Send" class='button'  />
        <div style="margin-top:20px;"></div>
      </form>  
<script  type="text/javascript">

    var frmvalidator = new Validator("send_message_frm");
    frmvalidator.EnableOnPageErrorDisplay();
    frmvalidator.EnableMsgsTogether();
    frmvalidator.addValidation("desc","alnum","Only numbers and letters are allowed");
    frmvalidator.addValidation("desc","req","Please enter a description");

</script> 
```

我的 Ajax 脚本：

```
<script type="text/javascript">

$(document).ready(function(){
    //Validate form....what can I put here to test if validation is completed properly????

    //onclick handler send message btn
    $("#send-message").click(function(){
        $(this).closest('form').submit(function(){
            return false;
        });
        var frm = $(this).closest('form');        

            $("#ajax-loading").show();
            var data = $(frm).serialize();
            $(frm).find('textarea,select,input').attr('disabled', 'disabled');            
            $.post( 
                    "productgroup_add.php", 
                    data, 
                    function(data){ 
                        $("#ajax-loading").hide();
                        $(frm).find('textarea,select,input').removeAttr('disabled');
                        $("#send_message_frm").prepend(data);
                    } 
           );
        }
    );
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:09:34.740

查看验证脚本后，我发现（怀疑）它将验证方法附加到表单的 OnSubmit 事件处理程序，这听起来很正确......

```
this.formobj.onsubmit = form_submit_handler; 
```

但是......它也将自己附加到表单对象：

```
this.formobj.validatorobj = this; 
```

它有一个方法，您可以调用它来验证您的表单：

```
if (!this.runAddnlValidations()) 
```

要运行验证，看起来您可以执行以下操作：

```
if(!document.forms[0].validatorobj.runAddnlValidations()) return; 
```

# silverlight - SL5 在重新导航到另一个 PDF 时出现浏览器 WebBrowser 控制错误“尝试撤销尚未注册的放置目标”

> ID：10265104
> 
> 赞同：2
> 
> 时间：2012-04-22T03:56:22.367
> 
> 标签：silverlight, visual-studio-2010, pdf, iis-7.5, silverlight-5.0

最后咬紧牙关，用导航到**.pdf**的适当 SL5 Trusted In-Browser WebBrowser 替换了我在 silverlight 应用程序中显示 PDF 内容的技巧。

当我尝试将 WebBrowser**重新导航****到另一个 PDF**时，我看到错误**“尝试撤销尚未注册的放置目标（HRESULT 异常：0x80040100）”**

**这仅在我部署到 IIS（本地 IIS*和*另一台服务器 IIS 7.5）时发生......在 VS2010 中运行时不会发生。**

***细节：***

用户界面非常简单。1 个网格，带 2 列：

第1栏第2栏
================================================ ==============================
树视图 `<WebBrowser x:Name="ContentWebBrowser" Grid.Column="1"></WebBrowser>`

当用户在树视图中选择一个项目时，我只需调用：

```
Uri serverUri = new Uri(string.Format("http://{0}:{1}/",
Application.Current.Host.Source.DnsSafeHost,
Application.Current.Host.Source.Port));

var relative= "/Content/x/y/z.pdf"; //This is dynamiclly pulled from Treeview, EDITED FOR SO
Uri relativeUri = new Uri(relative, UriKind.Relative);

ContentWebBrowser.Navigate(new Uri(serverUri, relativeUri)); 
```

使用 Cassini 通过 VS2010 运行带和不带调试器的 silverlight，我可以在我的列表视图中逐项选择项目，并且我的 WebBrowser 将“重新导航”调用上面相同的代码。但是，一旦我部署到本地 iis，任何时候我最终第二次调用 Navigate 都会收到此错误：

```
System.Exception: Trying to revoke a drop target that has not been registered (Exception from HRESULT: 0x80040100)
   at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.WebBrowser_Navigate(DependencyObject obj, Uri source)
   at System.Windows.Controls.WebBrowser.Navigate(Uri source)
   at SystemUtilities.Views.WebContentListView.TreeViewItem_Selected(Object sender, RoutedEventArgs e) 
```

**其他怪事**：有时我可以“重新导航” 3 或 4 次，然后才看到此异常。有时当我在我的 SL 应用程序中加载另一个页面时，会抛出此错误。当我将 PDF 加载到 WebBrowser 时，无论是否缓存 PDF，都会发生这种情况。如果我显示标准 html 或图像而不是 PDF，则不会发生这种情况。

**编辑**：我添加了逻辑来检查以确保在尝试重新导航 WebBrowser 之前触发 LoadCompleted 事件，但这似乎并不重要。（不是 100% 确定，但我认为它忽略了 PDF 可能仍在加载的事实，只是表示 DOM 已准备好）。虽然，即使在看起来第一个 pdf 完成加载后我想要很长时间（30 秒），我仍然会收到错误消息。

有什么建议么？

* * *

**新**我在 skydrive 上发布了我的示例。查看自述文件以进行复制！： http: [//sdrv.ms/JSn1KB](http://sdrv.ms/JSn1KB)

# java - 如何使用单个 JOptionPane.showMessageDialog() 语句显示多个输出？

> ID：10265106
> 
> 赞同：4
> 
> 时间：2012-04-22T03:57:20.050
> 
> 标签：java, swing, joptionpane

如何使用`JOptionPane.showMessageDialog()`. 例如，我在下面发布一个示例。现在，在下面所述的示例中，`a1,b1,c1`必须使用“`JOptionPane.showMessageDialog()`有没有办法在一个窗口中显示所有值？”一一显示这些值。因为在下面的示例中，三个窗口将一个接一个地出现。

```
class demo()
{
    public static void main(String args[])   
    {
          String a=JOptionPane.showInputDialog(null,"Enter a number");
          int a1=Integer.parseInt(a);
          String b=JOptionPane.showInputDialog(null,"Enter a number");
          int b1=Integer.parseInt(b);

          int c=a1+b1;
          JOptionPane.showMessageDialog(null,a1);
          JOptionPane.showMessageDialog(null,b1); 
          JOptionPane.showmessageDialog(null,c1);
    } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T04:28:27.720

如果您想将每个值放在一个新行中，您不需要将 a`JLabel`与 HTML 或 a 一起使用`JTextArea`，您可以简单地`\n`在 中使用`String`：

```
JOptionPane.showMessageDialog(null, "line1\nline2"); 
```

当然，您可以通过添加它们来简单地连接您的值`String`：

```
a1 + "\n" + a2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T03:59:56.383

解决这个问题的一些方法：

*   创建一个 JLabel 来保存您的输出并使用 HTML 来允许显示多行 JLabel，然后将 JLabel 作为 JOptionPane.showMessageDialog 的第二个参数传递。
*   或者您可以创建一个 JTextArea，将结果 Strings + "\n" 附加到 JTextArea，然后将其传递给 JOptionPane.showMessageDialog 方法。如果您这样做，请通过调用它来防止其他人编辑您的 JTextArea `setEditable(false)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-22T04:05:20.763

为什么你不能把所有这些都放在一个字符串中并只使用一个 JOptionPane。

```
 int c=a1+b1;
 String s = "a1: "+a1+" b1: "+b1+"c: "+c;
 JOptionPane.showMessageDialog(null,s); 
```

而不是 3 JOptionPane。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-21T23:20:18.430

为什么不试试这个：

```
JOptionPane.showMessageDialog(null,  a1 + "\n" + b1 + "\n" + c1); 
```

这将在对话框中的三个不同行中打印所有内容。

# java - 哪个选项/工具显示 Java 的使用期限阈值？

> ID：10265108
> 
> 赞同：1
> 
> 时间：2012-04-22T03:58:07.047
> 
> 标签：java, jvm

我曾经找到一种方法来显示 Hotspot JVM 的当前使用期限阈值（除其他外）。我相信这是一个 JVM 选项，可配置为以指定的时间间隔将信息打印到标准输出。我现在找不到了。我在寻找什么选项/工具来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T04:01:14.870

我相信你正在寻找：`-XX:+PrintTenuringDistribution`。你看过[这里](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)吗？我应该问：*你为什么在乎？* 通常不建议修改这些标志，除非您真的知道自己在做什么。我会坚持调整我的堆大小，让 JVM 人体工程学来完成剩下的工作。

# maven - Maven删除外部文件

> ID：10265109
> 
> 赞同：4
> 
> 时间：2012-04-22T03:58:30.330
> 
> 标签：maven, file-io

我正在使用 Eclipse/maven 插件。我想删除具有绝对路径的外部文件，我有以下示例，但它声称只删除驻留在项目中的相对文件

```
<plugin>
                <artifactId>maven-clean-plugin</artifactId>
                <version>2.4.1</version>
                <configuration>
                    <filesets>
                        <fileset>
                            <directory>some/relative/path</directory>
                            <includes>
                                <include>**/*.tmp</include>
                                <include>**/*.log</include>
                            </includes>
                            <excludes>
                                <exclude>**/important.log</exclude>
                                <exclude>**/another-important.log</exclude>
                            </excludes>
                            <followSymlinks>false</followSymlinks>
                        </fileset>
                    </filesets>
                </configuration>
            </plugin> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T08:38:33.987

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.4.1</version>
    <configuration>
        <followSymLinks>false</followSymLinks>
        <filesets>
            <fileset>
            <directory>D:\apache-tomcat-6.0.24\webapps\cat360-web-1.0.0</directory>
            </fileset>
        </filesets>
    </configuration>
</plugin> 
```

# php - PHP 中用于缩进 XML 输出的自定义代码中的错误

> ID：10265111
> 
> 赞同：0
> 
> 时间：2012-04-22T03:59:02.847
> 
> 标签：php, regex, debugging, syntax-highlighting

我有通过 PHP 自动缩进 XML 的代码：

```
function xmlpp($xml, $html_output=false) {
    if ($xml == '') return 'NULL';
    try {
        $xml_obj = @new SimpleXMLElement($xml);
    } catch (Exception $ex) {
        // Error parsing xml, return same string
        return ($html_output) ? htmlentities($xml) : $xml;
    }
    $level = 4;
    $indent = 0; // current indentation level
    $pretty = array();

    // get an array containing each XML element
    $xml = explode("\n", preg_replace('/>\s*</', ">\n<", $xml_obj->asXML()));

    // shift off opening XML tag if present
    if (count($xml) && preg_match('/^<\?\s*xml/', $xml[0])) {
        //$pretty[] = array_shift($xml);
        array_shift($xml);
    }

    foreach ($xml as $el) {
        if (preg_match('/^<([\w])+[^>\/]*>$/U', $el)) {
            // opening tag, increase indent
            $pretty[] = str_repeat(' ', $indent) . $el;
            $indent += $level;
        } else {
            if (preg_match('/^<\/.+>$/', $el)) {
                $indent -= $level;  // closing tag, decrease indent
            }
            if ($indent < 0) {
                $indent += $level;
            }
            $pretty[] = str_repeat(' ', $indent) . $el;
        }
    }
    $xml = implode("\n", str_replace('"', "'", $pretty));
    return ($html_output) ? htmlentities($xml, ENT_COMPAT, 'UTF-8') : $xml;
} 
```

问题是每当我得到一个包含`/`字符的属性值时，缩进级别就会降低。例如，为以下内容生成的输出不正确：

```
 <function desc='Cancel/Refund'>
    <const value='1'/>
    <const value='1'/>
    <const value='1'/>
</function> 
```

我知道正则表达式不应该与 Cancel/Refud 匹配，但它确实如此，我不知道如何解决这个问题。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:54:57.567

```
<[^\/].+[^\/]> 
```

正`[^\/]`则表达式开头和结尾的 表示匹配不以 a 开头且不以 a`/`结尾的标签`/`。这样你只能得到开始标签而不是结束标签或空标签。将`.+`匹配任何内容，因此只要`/`标签不以`/`.

# java - 无法调试 Eclipse 类文件：刚开始面临这个问题

> ID：10265112
> 
> 赞同：2
> 
> 时间：2012-04-22T03:59:06.343
> 
> 标签：java, debugging

![日食截图](../Images/9fdeb1f4ed48157440ba052cd84e2f4e.png) 调试“String.hashCode（）行：不可用”时面临问题

我已经对此进行了裁判，[如何在 ECLIPSE 中调试 .class 文件？](https://stackoverflow.com/questions/5288370/how-to-debug-class-files-in-eclipse) 但这谈到了调试构建，但我想知道我现有的系统有什么问题

@siegi 我已经完成了这些更改，但无法修改突出显示的（蓝色）par 以指向 C:\Program Files\Java\jdk1.6.0_31\jre\lib\rt.jar

![实施变更](../Images/6688d010dd43f64a25f7d237af3039a5.png)

还有一个问题：String.hashCode() line: 1489 [local variables available]

![eclipse调试快照](../Images/b94bd3d905b57adb6f4cb5b93ee62bf7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T04:16:24.457

我认为问题在于您使用的是 JRE 中的类文件。我猜它们是在没有[`LineNumberTable`属性](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.12)的情况下编译的。您可以尝试使用 JDK JRE 运行您的应用程序（如果我在 Windows 上没记错的话，路径应该类似于`C:\Program Files\Java\jdk6\jre`）。

# backbone.js - 主干.js：更新模型，重新排序和重新渲染模型集合

> ID：10265113
> 
> 赞同：5
> 
> 时间：2012-04-22T03:59:19.940
> 
> 标签：backbone.js, socket.io

在我的应用程序中，我有一个 socket.io 连接，它正在监听后端并获取客户端浏览器持有的模型的更新（它通过 id 检索模型并调用`set`模型属性）。

我希望对集合进行排序，然后作为一个整体重新渲染，以反映模型上的任何新排序`set`（大多数示例似乎是围绕重新渲染的单个视图）。实现这一目标的方法是什么？

注意我已经从示例 todo 应用程序（这是第一个骨干应用程序）中逐字提升了一个骨干.js 布局。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T07:42:02.803

[`comparator`](http://backbonejs.org/#Collection-comparator)您可以通过为您的收藏提供方法来实现您想要的。

**例子：**

```
ModelCollection = Backbone.Collection.extend({
    comparator: function(a, b) {
        if ( a.get("name") > b.get("name") ) return 1;
        if ( a.get("name") < b.get("name") ) return -1;
        if ( a.get("name") === b.get("name") ) return 0;
    },

    initialize: function() {
        this.on('change:name', function() { this.sort() }, this);
    }
}); 
```

在`comparator`此示例中，您的集合将按`name`内部模型的属性升序排序。

请注意，您的集合在更改其任何`models`. 默认情况下，排序仅在创建新模型并将它们添加到集合时发生；但是`comparator` *会*被`collection.sort`方法使用。

`change`上面的代码通过设置一个事件侦听器来利用这一点，该侦听器只是将任何s 上的集合重新排序`name`为其`models`.

为了完成这幅图，我们在`View`与集合关联的关联中设置了一个适当的事件侦听器，以确保它在任何更改时重新呈现：

```
CollectionView = Backbone.View.extend({
    initialize: function() {
        this.collection = new ModelCollection();
        this.collection.on('all', function() { this.render() }, this);
    },

    render: function() {
        this.$el.html(this.collection.toJSON());
    }
}); 
```

而已 ：）

* * *

[骨干文档](http://backbonejs.org)的相关摘录：

> 默认情况下没有`comparator`集合。如果您定义 a `comparator`，它将用于按排序顺序维护集合。这意味着随着模型的添加，它们会被插入到`collection.models`. 比较器可以定义为`sortBy`（传递一个接受单个参数的函数）、一个`sort`（传递一个需要两个参数的比较器函数）或一个指示要排序的属性的字符串。**[...]**如果您以后更改模型属性，带有 a 的集合`comparator`不会自动重新排序，因此您可能希望`sort`在更改会影响顺序的模型属性后调用。

# python - Urllib2 & BeautifulSoup : 不错的一对，但太慢了 - urllib3 & 线程？

> ID：10265115
> 
> 赞同：6
> 
> 时间：2012-04-22T03:59:31.330
> 
> 标签：python, multithreading, performance, beautifulsoup, urllib2

当我听到一些关于线程和 urllib3 的好消息时，我正在寻找一种优化我的代码的方法。显然，人们不同意哪种解决方案是最好的。

下面我的脚本的问题是执行时间：太慢了！

**第 1 步**：我获取此页面 [http://www.cambridgeesol.org/institutions/results.php?region=Afghanistan&type=&BULATS=on](http://www.cambridgeesol.org/institutions/results.php?region=Afghanistan&type=&BULATS=on)

**第 2 步**：我用 BeautifulSoup 解析页面

**第 3 步：**我将数据放入 Excel 文档中

**第 4 步：**我对列表中的所有国家（大列表）一次又一次地重复（我只是将 url 中的“阿富汗”更改为另一个国家）

这是我的代码：

```
ws = wb.add_sheet("BULATS_IA") #We add a new tab in the excel doc
    x = 0 # We need x and y for pulling the data into the excel doc
    y = 0
    Countries_List = ['Afghanistan','Albania','Andorra','Argentina','Armenia','Australia','Austria','Azerbaijan','Bahrain','Bangladesh','Belgium','Belize','Bolivia','Bosnia and Herzegovina','Brazil','Brunei Darussalam','Bulgaria','Cameroon','Canada','Central African Republic','Chile','China','Colombia','Costa Rica','Croatia','Cuba','Cyprus','Czech Republic','Denmark','Dominican Republic','Ecuador','Egypt','Eritrea','Estonia','Ethiopia','Faroe Islands','Fiji','Finland','France','French Polynesia','Georgia','Germany','Gibraltar','Greece','Grenada','Hong Kong','Hungary','Iceland','India','Indonesia','Iran','Iraq','Ireland','Israel','Italy','Jamaica','Japan','Jordan','Kazakhstan','Kenya','Kuwait','Latvia','Lebanon','Libya','Liechtenstein','Lithuania','Luxembourg','Macau','Macedonia','Malaysia','Maldives','Malta','Mexico','Monaco','Montenegro','Morocco','Mozambique','Myanmar (Burma)','Nepal','Netherlands','New Caledonia','New Zealand','Nigeria','Norway','Oman','Pakistan','Palestine','Papua New Guinea','Paraguay','Peru','Philippines','Poland','Portugal','Qatar','Romania','Russia','Saudi Arabia','Serbia','Singapore','Slovakia','Slovenia','South Africa','South Korea','Spain','Sri Lanka','Sweden','Switzerland','Syria','Taiwan','Thailand','Trinadad and Tobago','Tunisia','Turkey','Ukraine','United Arab Emirates','United Kingdom','United States','Uruguay','Uzbekistan','Venezuela','Vietnam']
    Longueur = len(Countries_List)

    for Countries in Countries_List:
        y = 0

        htmlSource = urllib.urlopen("http://www.cambridgeesol.org/institutions/results.php?region=%s&type=&BULATS=on" % (Countries)).read() # I am opening the page with the name of the correspondant country in the url
        s = soup(htmlSource)
        tableGood = s.findAll('table')
        try:
            rows = tableGood[3].findAll('tr')
            for tr in rows:
                cols = tr.findAll('td')
                y = 0
                x = x + 1
                for td in cols:
                    hum =  td.text
                    ws.write(x,y,hum)
                    y = y + 1
                    wb.save("%s.xls" % name_excel)

        except (IndexError):
            pass 
```

所以我知道一切都不完美，但我期待在 Python 中学习新事物！该脚本非常慢，因为 urllib2 并没有那么快，而且 BeautifulSoup。对于汤的事情，我想我真的不能让它变得更好，但是对于 urllib2，我没有。

编辑 1： [多处理对 urllib2 没用？](https://stackoverflow.com/questions/6905800/multiprocessing-useless-with-urllib2) 对我来说似乎很有趣。你们如何看待这个潜在的解决方案？！

```
# Make sure that the queue is thread-safe!!

def producer(self):
    # Only need one producer, although you could have multiple
    with fh = open('urllist.txt', 'r'):
        for line in fh:
            self.queue.enqueue(line.strip())

def consumer(self):
    # Fire up N of these babies for some speed
    while True:
        url = self.queue.dequeue()
        dh = urllib2.urlopen(url)
        with fh = open('/dev/null', 'w'): # gotta put it somewhere
            fh.write(dh.read()) 
```

编辑 2： URLLIB3 谁能告诉我更多关于它的事情？

> 对多个请求（HTTPConnectionPool 和 HTTPSConnectionPool）重复使用相同的套接字连接（带有可选的客户端证书验证）。 [https://github.com/shazow/urllib3](https://github.com/shazow/urllib3)

至于我为不同的页面请求同一个网站 122 次，我想重用相同的套接字连接可能很有趣，我错了吗？不能更快吗？...

```
http = urllib3.PoolManager()
r = http.request('GET', 'http://www.bulats.org')
for Pages in Pages_List:
    r = http.request('GET', 'http://www.bulats.org/agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=%s' % (Pages))
    s = soup(r.data) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T04:41:29.673

考虑使用类似[workerpool](http://pypi.python.org/pypi/workerpool/)的东西。参考[Mass Downloader](https://github.com/shazow/workerpool/wiki/Mass-Downloader)示例，结合[urllib3](http://pypi.python.org/pypi/urllib3)看起来像：

```
import workerpool
import urllib3

URL_LIST = [] # Fill this from somewhere

NUM_SOCKETS = 3
NUM_WORKERS = 5

# We want a few more workers than sockets so that they have extra
# time to parse things and such.

http = urllib3.PoolManager(maxsize=NUM_SOCKETS)
workers = workerpool.WorkerPool(size=NUM_WORKERS)

class MyJob(workerpool.Job):
    def __init__(self, url):
       self.url = url

    def run(self):
        r = http.request('GET', self.url)
        # ... do parsing stuff here

for url in URL_LIST:
    workers.put(MyJob(url))

# Send shutdown jobs to all threads, and wait until all the jobs have been completed
# (If you don't do this, the script might hang due to a rogue undead thread.)
workers.shutdown()
workers.wait() 
```

您可能会从 Mass Downloader 示例中注意到，有多种方法可以做到这一点。我选择这个特殊的例子只是因为它不那么神奇，但其他任何策略也是有效的。

**免责声明：**我是 urllib3 和 workerpool 的作者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T08:36:52.863

我不认为 urllib 或 BeautifulSoup 很慢。我在本地机器上运行您的代码，并使用修改后的版本（删除了 excel 内容）。打开连接、下载内容、解析内容并将其打印到一个国家/地区的控制台大约需要 100 毫秒。

10ms 是 BeautifulSoup 解析内容并打印到每个国家/地区的控制台所花费的总时间。这已经足够快了。

我不相信使用 Scrappy 或 Threading 可以解决问题。因为问题是**期望**它会很快。

欢迎来到 HTTP 的世界。有时会很慢，有时会很快。连接速度慢的几个原因

*   因为服务器处理您的请求（有时返回 404）
*   DNS解析，
*   HTTP握手，
*   您的 ISP 的连接稳定性，
*   你的带宽速率，
*   丢包率

ETC..

不要忘记，您正在尝试向服务器发出 121 个 HTTP 请求，但您不知道他们拥有什么样的服务器。他们也可能因为随后的呼叫而禁止您的 IP 地址。

看看请求库。阅读他们的文档。如果您这样做是为了更多地学习 Python，请不要直接跳入 Scrapy。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:52:59.550

**大家好，**

一些来自问题的消息！我找到了这个脚本，它可能很有用！我实际上正在测试它并且很有希望（6.03 运行下面的脚本）。

我的想法是找到一种将其与 urllib3 混合的方法。实际上，我多次在同一主机上提出请求。

> 每当您请求同一主机时，PoolManager 都会为您重用连接。这应该涵盖大多数场景而不会显着降低效率，但您始终可以下拉到较低级别的组件以进行更精细的控制。（urrlib3 文档网站）

无论如何，这似乎很有趣，如果我还看不到如何混合这两个功能（urllib3 和下面的线程脚本），我想这是可行的！:-)

非常感谢您花时间帮我解决这个问题，它闻起来很香！

```
import Queue
import threading
import urllib2
import time
from bs4 import BeautifulSoup as BeautifulSoup

hosts = ["http://www.bulats.org//agents/find-an-agent?field_continent_tid=All&field_country_tid=All", "http://www.bulats.org//agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=1", "http://www.bulats.org//agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=2", "http://www.bulats.org//agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=3", "http://www.bulats.org//agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=4", "http://www.bulats.org//agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=5", "http://www.bulats.org//agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=6"]

queue = Queue.Queue()
out_queue = Queue.Queue()

class ThreadUrl(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, queue, out_queue):
        threading.Thread.__init__(self)
        self.queue = queue
        self.out_queue = out_queue

    def run(self):
        while True:
            #grabs host from queue
            host = self.queue.get()

            #grabs urls of hosts and then grabs chunk of webpage
            url = urllib2.urlopen(host)
            chunk = url.read()

            #place chunk into out queue
            self.out_queue.put(chunk)

            #signals to queue job is done
            self.queue.task_done()

class DatamineThread(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, out_queue):
        threading.Thread.__init__(self)
        self.out_queue = out_queue

    def run(self):
        while True:
            #grabs host from queue
            chunk = self.out_queue.get()

            #parse the chunk
            soup = BeautifulSoup(chunk)
            #print soup.findAll(['table'])

            tableau = soup.find('table')
        rows = tableau.findAll('tr')
        for tr in rows:
            cols = tr.findAll('td')
            for td in cols:
                    texte_bu = td.text
                    texte_bu = texte_bu.encode('utf-8')
                    print texte_bu

            #signals to queue job is done
            self.out_queue.task_done()

start = time.time()
def main():

    #spawn a pool of threads, and pass them queue instance
    for i in range(5):
        t = ThreadUrl(queue, out_queue)
        t.setDaemon(True)
        t.start()

    #populate queue with data
    for host in hosts:
        queue.put(host)

    for i in range(5):
        dt = DatamineThread(out_queue)
        dt.setDaemon(True)
        dt.start()

    #wait on the queue until everything has been processed
    queue.join()
    out_queue.join()

main()
print "Elapsed Time: %s" % (time.time() - start) 
```

# php - PHP脚本没有在IF语句中输入ELSE子句（登录测试）

> ID：10265118
> 
> 赞同：1
> 
> 时间：2012-04-22T04:00:58.133
> 
> 标签：php, mysql

我被这个难住了。非常简单的登录屏幕。当密码匹配时，脚本会完美运行并跳转到 main.php。当 uname 或 pswd 错误时，脚本不会进入 ELSE 子句，也不会转到 badlogin.php。脚本只是挂在空白的白色屏幕上。

任何帮助都会很棒。

```
<?php
include("dbconnect.php");
$u_name = mysql_real_escape_string($_POST['uname']);
$p_word = mysql_real_escape_string($_POST['pword']);
# *** querying all records ***
$query = mysql_query("SELECT * FROM notes_users WHERE valid_password = '$p_word' && valid_username = '$u_name'");
while($rst = mysql_fetch_array($query)) {

if (($rst[valid_username] == $u_name) AND ($rst[valid_password] == $p_word)) {
    session_start();
    $_SESSION['login'] = "1";
    header('Location: main.php') ;
} else {
    session_start();
    $_SESSION['login'] = '';
    header('Location: badlogin.php') ;
}

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:14:13.033

如果查询没有返回结果，那么 "while($rst = mysql_fetch_array($query))" 将永远不会被证明为真，并且完全跳过 while 循环。

编辑：您可以将其更改为“do while”或仅修复您的 while 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:17:04.267

您应该在 和 周围`valid_username`加上引号`valid_password`。现在，您将它们用作常量。而且您不需要循环并`if`检查配对是否匹配，您已经在查询中检查了它。~~我认为您的问题可能是您在进行第二次比较时将数据库中的值与转义值进行比较。~~Wiseguy 和 VDH 是对的，您永远不会输入`while`查询返回的时间`false`。无论如何，这个更简单的版本应该解决所有这些问题：

```
<?php
session_start();
include("dbconnect.php");
$u_name = mysql_real_escape_string($_POST['uname']);
$p_word = mysql_real_escape_string($_POST['pword']);
# *** querying all records ***
$query = mysql_query("SELECT * FROM notes_users WHERE valid_password = '$p_word' AND valid_username = '$u_name'");
if(mysql_num_rows($query) > 0) {
    $_SESSION['login'] = "1";
    header('Location: main.php') ;
} else {
    $_SESSION['login'] = '';
    header('Location: badlogin.php') ;
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T04:19:33.707

以下是一些更改，如果您只期望匹配，则不应遍历结果：

```
<?php
//Session start at the top
session_start();
include("dbconnect.php");

$u_name = mysql_real_escape_string($_POST['uname']);
$p_word = mysql_real_escape_string($_POST['pword']);

# *** querying all records ***
//Some changes, use a LIMIT clause unless your expecting multiple users
//And as your only checking for row existence there no need to return *
//And never have plain txt passwords in db, use at least sha1 and not md5
$query = mysql_query('SELECT 1 
                      FROM notes_users 
                      WHERE valid_password ="'.sha1($p_word).'" && valid_username = '.$u_name.'" LIMIT 1');

//assoc
$rst = mysql_fetch_assoc($query);

//User found
if(mysql_num_rows($rst)==1){
    $_SESSION['login'] = true;
    header('Location: ./main.php');
    die;
}else{
//User not found    
    $_SESSION['login'] = false;
    header('Location: ./badlogin.php');
    die;    
}
?> 
```

# ruby - 如何在没有 Rails 的情况下设置 Heroku 调度程序？

> ID：10265120
> 
> 赞同：5
> 
> 时间：2012-04-22T04:01:36.820
> 
> 标签：ruby, heroku, sinatra

阅读此处的文档[https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)，我了解了如何使用 Rails 安排任务。但我想知道如何使用常规 ruby​​ 安排任务？

我必须在任务字段中输入什么才能运行我的 ruby​​ 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:34:51.267

您应该能够将[Rakefile](http://rake.rubyforge.org/files/doc/rakefile_rdoc.html)添加到您的常规 ruby​​ 应用程序中，并`rake task_name`通过调度程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T14:04:04.507

不确定从前是否必须使用 rake，但不再使用。直接使用 ruby​​ 即可：

```
ruby path/to/yourfile.rb arg1 arg2 
```

# java - Java 方程绘图

> ID：10265121
> 
> 赞同：0
> 
> 时间：2012-04-22T04:01:52.527
> 
> 标签：java, c, plot, equation, graphic

我们需要一个 Java API 来评估和绘制我们作为参数传递的方程。我们不想评估情节的每一个点以便稍后制作情节，我们需要一个 API 来为我们做这件事

# objective-c - 为什么在 Objective-C 和 iOS 中，[[NSMutableArray alloc] init] 给出警告但 NSMutableArray.new 没有？

> ID：10265122
> 
> 赞同：1
> 
> 时间：2012-04-22T04:02:06.960
> 
> 标签：objective-c, ios

我有我的`MainView`班级的财产，`arr`

```
@property NSMutableArray *arr; 
```

在我`ViewController.m`的里面`viewDidLoad`，如果我使用

```
MainView *mainView = (MainView *) self.view;
mainView.arr = [[NSMutableArray alloc] init]; 
```

它编译了，但给出了“将保留的对象分配给不安全的属性；分配后对象将被释放”的警告。但是如果我将上面的第二行更改为

```
mainView.arr = NSMutableArray.new; 
```

则不会有任何警告。我以为`alloc init`是一样的`new`？为什么第一个版本会发出警告，实际上它是危险的还是可以做到没有警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:35:19.953

如果您使用`[NSMutableArray new]`语法，您将看到警告，因此您的问题消失并不是问题，而是您的非标准语法`NSMutableArray.new`没有生成警告。问题是您的属性默认为 unsafe_unretained，每当您将保留对象分配给 unsafe_unretained 对象时，ARC 都会立即为您释放它。只需尝试将一个对象添加到您的数组，然后 NSLog'ing 它，您就会看到说明问题的 EXC_BAD_ACCESS。将您的财产更改为：

```
@property (strong, nonatomic) NSMutableArray *arr; 
```

你的问题就消失了。

同样，您的非标准用法缺少警告`NSMutableArray.new`并不表示没有问题，而是编译器没有为您生成警告。（坦率地说，我真的很惊讶用于调用方法的点语法完全有效。点表示法通常用于访问属性，而不是用于调用方法。）`[NSMutableArray new]`如果你真的想使用`new`. 但首选语法确实是`[[NSMutableArray alloc] init]`.

注意警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:18:13.860

我认为您收到警告的原因是因为 arr 不是强参考。如果你尝试“@property (strong, nonatomic) NSMutableArray *arr;”，警告就会消失。

PS“（强，非原子）”是采用自动引用计数（ARC）时使用的方法。我也很惊讶 NSMutableArray.new 起作用了。我认为最好使用“[[NSMutableArray alloc] init]”。这样，Xcode 会告诉你你正在实例化的类是否有一个更合适的、特殊的初始化器（例如“initWithFrame:”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T04:26:58.047

你必须告诉财产的类型。例如：

```
@property (retain) NSMutableArray *arr; 
```

请参阅文档中的*属性类型*。

# mysql - 在验证数据库逻辑模式是否符合第三范式时需要一些帮助

> ID：10265123
> 
> 赞同：3
> 
> 时间：2012-04-22T04:02:16.820
> 
> 标签：mysql, sql, database-design, normalization, third-normal-form

这原本是对此处另一个问题中提出的逻辑模式的“更新”：[在 MySQL 中出现错误 1701、错误 1452 和错误 1305 - 需要一些专业知识](https://stackoverflow.com/questions/10258515/getting-error-1701-error-1452-and-error-1305-errors-in-mysql-need-some-expert)......

我想我已经成功地将这个模式验证为第一和第二范式，但我不确定这是否符合第三范式。这是有问题的模型：

![对第三范式的逻辑数据库模型的尝试](../Images/e1dd5996b730fd3e44bb5350f9708ed1.png)

这是相关代码（注意：由于某种原因，我无法在 sql 代码中重新创建 1:1 关系，如上面的逻辑模型所示）：

```
-- database_schema.sql.
-- This sql script creates the structure.
-- of the rugby club database.

DROP DATABASE IF EXISTS database_rugby;

CREATE DATABASE database_rugby;

USE database_rugby;

-- Create the "person" table.
--
-- This table has one:one relationships
-- with the parent, coach and player 
-- tables.
DROP TABLE IF EXISTS `person` ;
CREATE TABLE `person` (
  `personID` INT(5) NOT NULL AUTO_INCREMENT ,
  `firstName` VARCHAR(50) NOT NULL ,
  `lastName` VARCHAR(50) NOT NULL ,
  `dateOfBirth` DATE NOT NULL ,
  `streetAddress` VARCHAR(150) NOT NULL ,
  `suburbAddress` VARCHAR(150) NULL DEFAULT NULL ,
  `cityAddress` VARCHAR(150) NOT NULL ,
  `photo` BLOB NULL DEFAULT NULL ,
  PRIMARY KEY (`personID`))
ENGINE = InnoDB;

-- Create the "parent" table.
DROP TABLE IF EXISTS `parent` ;
CREATE TABLE `parent` (
  `parentID` INT(5) NOT NULL ,
  `personID` INT(5) NOT NULL ,
  PRIMARY KEY (`parentID`, `personID`), 
  FOREIGN KEY (`personID`) REFERENCES `person` (`personID`)
  ON DELETE CASCADE 
  ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "school" table.
DROP TABLE IF EXISTS `school` ;
CREATE TABLE `school` (
  `schoolID` INT(5) NOT NULL AUTO_INCREMENT ,
  `schoolName` VARCHAR(100) NOT NULL ,
  PRIMARY KEY (`schoolID`))
ENGINE = InnoDB;

-- Create the "player" table.
--
-- Inherits fields from the "person"
-- and "school" tables.
DROP TABLE IF EXISTS `player` ;

CREATE TABLE `player` (
  `playerID` INT(5) NOT NULL ,
  `personID` INT(5) NOT NULL ,
  `schoolID` INT(5) NOT NULL ,
  PRIMARY KEY (`playerID`, `personID`), 
    FOREIGN KEY (`personID`) 
    REFERENCES `person` (`personID`)
    ON DELETE CASCADE 
    ON UPDATE CASCADE, 
    FOREIGN KEY (`schoolID`)
    REFERENCES `school` (`schoolID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "coach" table.
DROP TABLE IF EXISTS `coach`;
CREATE TABLE `coach`(
  `coachID` INT(5) NOT NULL ,
  `dateBeganCoaching` DATE NOT NULL ,
  `personID` INT(5) NOT NULL ,
  PRIMARY KEY (`coachID`, `personID`), 
  FOREIGN KEY (`personID`) 
  REFERENCES `person` (`personID`)
  ON DELETE CASCADE 
  ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "family" table.
--
-- This is a linking table 
-- that describes the many:many 
-- relationship between "parent" 
-- and "player" tables.
DROP TABLE IF EXISTS `family` ;
CREATE TABLE `family` (
  `parentID` INT(5) NOT NULL ,
  `playerID` INT(5) NOT NULL ,
    FOREIGN KEY (`playerID` )
    REFERENCES `player` (`playerID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    FOREIGN KEY (`parentID`)
    REFERENCES `parent` (`parentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- Create the "grade" table.
DROP TABLE IF EXISTS `grade`;
CREATE  TABLE `grade`(
  `gradeID` INT(5) NOT NULL AUTO_INCREMENT ,
  `gradeName` VARCHAR(50) NOT NULL ,
  `minWeight` INT(3) NOT NULL ,
  `maxWeight` INT(3) NOT NULL ,
  `minAge` INT(3) NOT NULL ,
  `maxAge` INT(3) NOT NULL ,
  `ballSize` INT(1) NOT NULL ,
  PRIMARY KEY (`gradeID`) )
ENGINE = InnoDB;

-- Create the "coachQualification" table.
DROP TABLE IF EXISTS `coachQualification` ;

CREATE TABLE `coachQualification` (
  `qualID` INT(5) NOT NULL AUTO_INCREMENT ,
  `qualName` CHAR(5) NOT NULL ,
  `gradeID` INT(5) NOT NULL ,
  PRIMARY KEY (`qualID`) ,
    FOREIGN KEY (`gradeID`)
    REFERENCES `grade` (`gradeID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "homePhone" table.
DROP TABLE IF EXISTS `homePhone` ;
CREATE TABLE `homePhone` (
  `homePhoneID` INT(5) NOT NULL AUTO_INCREMENT ,
  `homeNumber` CHAR(9) NOT NULL ,
  PRIMARY KEY (`homePhoneID`))
ENGINE = InnoDB;

-- Create the "mobilePhone" table.
DROP TABLE IF EXISTS `mobilePhone` ;

CREATE TABLE `mobilePhone` (
  `mobilePhoneID` INT(5) NOT NULL AUTO_INCREMENT ,
  `mobileNumber` CHAR(10) NULL DEFAULT NULL ,
  PRIMARY KEY (`mobilePhoneID`))
ENGINE = InnoDB;

-- Create the "emailAddress" table.
DROP TABLE IF EXISTS `emailAddress` ;

CREATE TABLE `emailAddress` (
  `emailAddressID` INT(5) NOT NULL AUTO_INCREMENT ,
  `emailAddress` CHAR(10) NULL DEFAULT NULL ,
  PRIMARY KEY (`emailAddressID`))
ENGINE = InnoDB;

-- Create the "Contact" table
--
-- This is a linking table 
-- that describes the many:many 
-- relationships between "person" 
-- and the "homePhone", "mobilePhone", 
-- and "emailAddress" tables.
DROP TABLE IF EXISTS `contact` ;
CREATE TABLE `contact` (
  `personID` INT(5) NOT NULL ,
  `homePhoneID` INT(5) NOT NULL ,
  `mobilePhoneID` INT(5) NULL DEFAULT NULL ,
  `emailAddressID` INT(5) NULL DEFAULT NULL ,
    FOREIGN KEY (`personID` )
    REFERENCES `person` (`personID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    FOREIGN KEY (`homePhoneID`)
    REFERENCES `homePhone` (`homePhoneID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    FOREIGN KEY (`mobilePhoneID`)
    REFERENCES `mobilePhone` (`mobilePhoneID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    FOREIGN KEY (`emailAddressID`)
    REFERENCES `emailAddress` (`emailAddressID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "qualificationSet" table.
--
-- This is a linking table 
-- that describes the many:many 
-- relationship between "coach" 
-- and "coachQualification" tables.
DROP TABLE IF EXISTS `qualificationSet` ;
CREATE TABLE `qualificationSet` (
  `coachID` INT(5) NOT NULL ,
  `qualID` INT(5) NOT NULL ,
    FOREIGN KEY (`coachID`)
    REFERENCES `coach` (`coachID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    FOREIGN KEY (`qualID`)
    REFERENCES `coachQualification` (`qualID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "team" table.
DROP TABLE IF EXISTS `team` ;
CREATE TABLE `team` (
  `teamID` INT(5) NOT NULL AUTO_INCREMENT ,
  `teamName` VARCHAR(50) NOT NULL ,
  `teamYear` INT(2) NOT NULL ,
  `gradeID` INT(5) NOT NULL ,
  PRIMARY KEY (`teamID`) ,
    FOREIGN KEY (`gradeID`)
    REFERENCES `grade` (`gradeID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "teamAllocation" table
--
-- this is a linking table for a 
-- many:many relationship between
-- team and player tables.
DROP TABLE IF EXISTS `teamAllocation` ;

CREATE TABLE `teamAllocation` (
  `teamID` INT(5) NOT NULL ,
  `playerID` INT(5) NOT NULL ,
    FOREIGN KEY (`teamID` )
    REFERENCES `team` (`teamID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    FOREIGN KEY (`playerID`)
    REFERENCES `player` (`playerID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "teamCoachAllocation" table.
--
-- This is a linking table 
-- that describes the many:many 
-- relationship between "coach" 
-- and "team" tables.
DROP TABLE IF EXISTS `teamCoachAllocation` ;
CREATE TABLE `teamCoachAllocation` (
  `coachID` INT(5) NOT NULL ,
  `teamID` INT(5) NOT NULL ,
    FOREIGN KEY (`coachID`)
    REFERENCES `coach` (`coachID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    FOREIGN KEY (`teamID`)
    REFERENCES `team` (`teamID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

从下面的这些链接：

*   [http://en.wikipedia.org/wiki/First_normal_form](http://en.wikipedia.org/wiki/First_normal_form)
*   [http://en.wikipedia.org/wiki/Second_normal_form](http://en.wikipedia.org/wiki/Second_normal_form)
*   [http://en.wikipedia.org/wiki/Third_normal_form](http://en.wikipedia.org/wiki/Third_normal_form)

这是我对规范化到 3NF 的理解：

*   第一范式意味着不允许重复值
*   第二范式意味着 1NF 和属性依赖于整个主键而不是主键的一部分（如果该表中的值需要以某种方式相互关联并进行比较，我认为这是分区表）。
*   第三范式表示 2NF 且没有传递值（例如，如果 x = y 和 y = z，x = z）

将理论知识付诸实践对我来说非常困难，尤其是将“实践”转化为工作的、规范化的 MySQL 代码。如果有人能够帮助我完成模型并给我一些关于将模型规范化为 3NF 的指示，我将非常感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:17:31.713

我认为这不在 3NF 中，在`contact`桌子周围。如果我错了，这仍然是存储数据的不好方法，可能应该更改。

对不起，如果这有点混乱......

`contact`由于整个表是主键，因此完全有可能在表中具有以下结构：

```
+------------+-------------+----------------+-------- -+
| 人物 | homephoneid | 手机ID | 电子邮件ID |
+------------+-------------+----------------+-------- -+
| 1 | 1 | 1 | 1 |
| 1 | 1 | 1 | 2 |
| 1 | 1 | 2 | 3 |
+------------+-------------+----------------+-------- -+

```

如您所见，两者`homephoneid`都是`mobilephoneid`重复的，因此更新表`homephone`将导致 3 次更新到`contact`.

我不同意数据模型，因为您*需要*一个`person`我`homehone`没有，只有一个手机。在这种情况下，当创建一个新的时，`person`您还必须创建一个新的`contact`和一个新的`homephone`.

由于`contact`只是主键且主键值不能为空，因此您还*需要*创建 a`mobilephone`和 an `emailaddress`，这意味着`person`依赖于`emailaddress`.

As `emailaddress`isdependent on `contact`，这又取决于`person`你创建了一个循环依赖，它打破了 3NF。

在我看来，如果您想确保人们*必须*拥有家庭电话号码，您有两种选择：

1.  如果您只想`person`拥有*一个* `homephone`，请将其添加到`person`表中。这是唯一的联系级别信息，应该存储在那里。
2.  如果你想让人们拥有多个家庭电话号码——记住多个人可以使用同一个电话号码——但不关心手机，那么你需要创建一个表 `personhomephones`，比如说，用主键`personid, homephoneid`而不是`homephoneid`放在联系表。

就个人而言，我不会做这些。我不会确保某人必须有一个家庭电话号码，而是一个主要电话号码，你不在乎它是什么类型。我会允许人们添加不同的联系方式，但不允许这些方式存在

这将需要以下结构：

*   `person`- 添加`primaryPhoneID`
*   `primaryphone ( primaryphoneID, phonenumber)`- PK`primaryphoneID`

那么对于允许不存在的联系方式：

*   `contactType ( contactTypeID, contactType )`- PK`contactTypeID`
*   `contact ( contactID, contactTypeID, value )`- PK`contactID, contactTypeID`
*   `personContact ( personID, contactID, contactTypeID )`- PK一切

虽然这可能会导致重复`contact`，`primaryphone`它们是不同的数据位，我认为这很好。如果您坚持不允许任何重复，则必须将电话与其他联系方式分开，这会使模型更加复杂：

*   `phonetype ( phoneTypeId, phoneType )`
*   `phone ( phoneID, phoneTypeID, phonenumber)`- PK`phoneID, phoneTypeID`
*   `contactPhone ( personID, phoneTypeID, phoneID )`- PK一切

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T09:59:07.257

有一种[算法](http://www.sci.csueastbay.edu/~billard/cs4660/node21.html)可以最终分解模式中的每个关系，以便在 3NF 中获得等效的模式。[谷歌](https://www.google.com/search?q=3nf%20decomposition%20algorithm&ie=utf-8&oe=utf-8)对此有好处！！

要获得有关架构设计的提示，您至少应该描述您需要表示的实体的上下文和功能约束。

# c++ - OpenCV 2.3：将 Mat 转换为 RGBA 像素数组

> ID：10265125
> 
> 赞同：8
> 
> 时间：2012-04-22T04:02:52.000
> 
> 标签：c++, opencv, webcam, sfml

我正在尝试使用 OpenCV 从网络摄像头抓取帧并使用 SFML 在窗口中显示它们。

VideoCapture 以 OpenCV 的 Mat 格式返回帧。为了显示帧，SFML 需要 uint8 格式的一维像素数组，（据我所知）可以与 uchar 互换。该数组预计代表每像素 RGBA 32 位。

所以，我有一个 uchar 数组，我正在循环 Mat 数据并复制每个像素：

```
VideoCapture cap(0);
Mat frame;
cap >> frame;

uchar* camData = new uchar[640*480*4];
uchar* pixelPtr = frame.data;
for(int i = 0; i < frame.rows; i++)
{
    for(int j = 0; j < frame.cols; j++)
    {
        camData[i*frame.cols + j + 2] = pixelPtr[i*frame.cols + j + 0]; // B
        camData[i*frame.cols + j + 1] = pixelPtr[i*frame.cols + j + 1]; // G
        camData[i*frame.cols + j + 0] = pixelPtr[i*frame.cols + j + 2]; // R
        camData[i*frame.cols + j + 3] = 255;

    }
}
img.LoadFromPixels(640, 480, camData); //Load pixels into SFML Image object for display 
```

不幸的是，这并不完全奏效。该循环中的某些内容是错误的，因为当我加载和显示 camData 时生成的图像被打乱了。

据我所知，要么我在循环中的数学是错误的，所以像素被分配错误，或者 Mat 数据的格式不是 BGR。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T09:38:32.267

OpenCV 可以为您完成所有工作：

```
VideoCapture cap(0);
Mat frame;
cap >> frame;

uchar* camData = new uchar[frame.total()*4];
Mat continuousRGBA(frame.size(), CV_8UC4, camData);
cv::cvtColor(frame, continuousRGBA, CV_BGR2RGBA, 4);
img.LoadFromPixels(frame.cols, frame.rows, camData); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-20T07:23:49.607

我更喜欢接受的答案，但这个片段可以帮助您了解正在发生的事情。

```
 for (int i=0; i<srcMat.rows; i++) {
            for (int j=0; j<srcMat.cols; j++) {
                int index = (i*srcMat.cols+j)*4;
                // copy while converting to RGBA order
                dstRBBA[index + 0] = srcMat[index + 2 ];
                dstRBBA[index + 1] = srcMat[index + 1 ];
                dstRBBA[index + 2] = srcMat[index + 0 ];
                dstRBBA[index + 3] = srcMat[index + 3 ];
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-09T14:06:26.543

对我来说，以下代码工作：

```
VideoCapture capture(0);
Mat mat_frame;
capture >> mat_frame; // get a new frame from camera            

// Be sure that we are dealing with RGB colorspace...
Mat rgbFrame(width, height, CV_8UC3);
cvtColor(mat_frame, rgbFrame, CV_BGR2RGB);

// ...now let it convert it to RGBA
Mat newSrc = Mat(rgbFrame.rows, rgbFrame.cols, CV_8UC4);
int from_to[] = { 0,0, 1,1, 2,2, 3,3 };
mixChannels(&rgbFrame, 2, &newSrc, 1, from_to, 4); 
```

结果（newSrc）是一个预乘图像！

# linux - Android 模拟器阻止 VMware linux 主机上的声音

> ID：10265126
> 
> 赞同：0
> 
> 时间：2012-04-22T04:03:23.407
> 
> 标签：linux, audio, emulation, vmware

我在 VMWare 上使用 linux 10.04（32 位）。在这个 vm 中，我安装了 Eclipse 并运行了一个 Android 模拟器。声音通常可以在 VM 上运行，但是一旦我启动 Android Emulator，声音就会断开，出现此错误消息，

默认声音设备无法打开：

使用的设备 ID 超出了您系统的范围。

连接虚拟设备声音失败。

谁能告诉模拟器运行时如何启用声音？

我使用 -port 命令在不同的端口上启动了模拟器仍然没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T00:59:58.207

将Skype安装到虚拟机后，此问题已解决！

# c - 如何将我的错误描述添加到 perror 函数

> ID：10265129
> 
> 赞同：0
> 
> 时间：2012-04-22T04:03:32.993
> 
> 标签：c, error-handling, errno

如何将错误添加到错误堆栈？

这是我想要的一个例子

```
#include <stdio.h>
#include <stdlib.h>

int Div (int a, int b, int * c) {
   if (b == 0) {
       // add to perror: "cannot divide by zero!"
       return 0;
   }
   *c = a / b;
   return 1;
}

int main () {
   int n;
   if (!Div(2, 0, &n)) {
      perror("could not divide");
   }
   return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:28:51.620

唯一的方法是更改​​ C 标准库，而您不想这样做。

如果您更改`libc`并使用修改后的号码，您可以添加自己的`errno`号码。但是你的程序只能在你修改过的“标准”库的系统上正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T04:08:55.490

没有标准（或非标准，在我知道的系统上）添加新`errno`值的方法；您可以分配给以`errno`使用现有值，但这对于不属于标准库的任何内容都不是一个好主意。

# jquery - 使用 jquery 自动完成编辑表单

> ID：10265139
> 
> 赞同：-1
> 
> 时间：2012-04-22T04:06:01.033
> 
> 标签：jquery

我在使用 jquery 和 form 时遇到问题。例如，1 有一些患者编辑表格

```
<form>
    <input type="text" name="patient_medic_record_number">
    <input type="text" name="name">
    <input type="text" name="address">
    <select name="sex">
        <option value="--SEX--">
        <option value="Male">
        <option value="Female">
     </select>
</form> 
```

如何从 mysql 数据库加载数据，然后在我插入 Patient_medic_record_number 时自动完成姓名、地址、性别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:29:53.960

好的伙计，您可以使用 JQuery [Ajax 方法](http://api.jquery.com/jQuery.ajax/)来加载数据。

当您输入**Patient_medic_record_number**时，您必须使用它的 OnChange 事件来引发您的 XMLhttpRequest，如下所示：

```
$("input[name=patient_medic_record_number]").change(function(){

      var num = $(this).val();

      $.ajax({
                type: "POST",
                url: "YourPage.aspx/FillControl",
                data: "{ 'id': '" + num + "' }",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {

                    $("#input[name=name]").val(data.d[0]);
                    $("#input[name=address]").val(data.d[1]);
                    $("#input[name=sex]").val(data.d[2]);

            });
        });

}); 
```

然后在您的代码中使用此 Web 方法返回 JSON 值：

```
[WebMethod]
public static object[] FillControl(string id)
{

     //Do something with id and etc

     return new object[]{"Ali foroughi" , "No where" , "Male"};

} 
```

如果您想了解更多详细信息，请评论我。

# jquery - if $('img').attr("src", "")

> ID：10265144
> 
> 赞同：3
> 
> 时间：2012-04-22T04:07:40.390
> 
> 标签：jquery, if-statement, src, attr

如果图像为空白，我正在尝试使用 jQuery 来编辑图像的 SRC。这是我当前的代码：

```
 <script type="text/javascript">
    $(document).ready(function() {
        var $this = $(this),
            img = $('img');
        if img.attr("src", ""){
            $this.attr("src", "default.gif");
        }
    });
</script> 
```

它不工作。我在 Chrome 控制台中遇到的当前错误是：
Uncaught SyntaxError: Unexpected identifier

谁能帮忙？非常感谢先进。
- 约旦。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T04:10:06.193

`attr()`获取或设置属性。它不评估/比较它们。你需要做的是：

```
if ($this.attr('src') == '')
    $this.attr('src','default.gif');
} 
```

或者，稍微更快/更高效：

```
var that = this;
if (that.src == ''){
    that.src = 'default.gif';
} 
```

而且，如前所述，错误消息可能是由于省略了`if`要评估的语句周围的括号造成的。

参考：

*   [`attr()`](http://api.jquery.com/attr/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-26T07:10:19.480

请在此之后给出分号。

```
var $this = $(this); 
```

# php - PHP在debian上不显示错误

> ID：10265145
> 
> 赞同：1
> 
> 时间：2012-04-22T04:07:52.400
> 
> 标签：php, apache, debian

我在 debian 上安装了 PHP 和 apache web 服务器。出于某种原因，即使打开了 display_errors()、error_reporting(E_ALL) 和 display_startup_errors()，它仍然不显示错误。但是如果没有错误 PHP 工作，否则我只看到一个空白的白屏。错误记录在错误日志和所有内容中。在我的windows设置中我没有遇到这个问题，所以也许是debian？如果有人有任何经验或提示，请告诉我。

# objective-c - 使用现有的单视图应用程序代码创建动画的最佳选择是什么？

> ID：10265147
> 
> 赞同：0
> 
> 时间：2012-04-22T04:08:47.900
> 
> 标签：objective-c, ios, animation

我已经完成了我的应用程序，但我想用一些漂亮的动画来完善它。没什么可疯狂的，我只需要循环一些精灵，让它看起来像植物正在生长。出于显而易见的原因，我不想尝试将其放入 cocos2d 框架中。我在网上找到了一些分类的动画，但动画看起来很糟糕而且不自然。关于如何最好地实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:15:36.670

UIImageView 动画将是最简单的。[http://mobile.tutsplus.com/tutorials/iphone/uiimageview-animation/](http://mobile.tutsplus.com/tutorials/iphone/uiimageview-animation/)

# python - 在 Paraview 中，如何更改状态的数据文件文件名以从给定的数据文件和状态创建快照？

> ID：10265148
> 
> 赞同：1
> 
> 时间：2012-04-22T04:08:51.410
> 
> 标签：python, paraview

我目前能够在 ParaView 中为模拟的每个时间步正确地可视化一个 .vtp 文件，并为每个时间步打印一个屏幕截图。我想批量执行此操作，但我想为每个状态（视点、应用的过滤器等）保持相同的状态。我已经将状态保存到一个 .psvm 文件中，并且我尝试编写一个 python 脚本，在 pvbatch 运行之后，它将（希望）打印屏幕截图。但是，不幸的是，它不起作用。我试图通过处理状态文件并进行搜索和替换来更改状态中的文件名，但它仍然无法正常工作。例如，它只绘制第一个数据输入，即使当前文件不同（尽管 GetSources() 显示一个总是增加的源列表）。我在雪豹中使用 ParaView 3.14.0。我相信这很容易，但是我对关于 python 和 paraview 的大量信息感到不知所措，而没有提到这个特定的问题。拜托，拜托，非常欢迎任何建议，如果之前已经回答过，我很抱歉（我查看了谷歌、paraview 邮件列表和这里）。下面是我的脚本，也可以在[http://pastebin.com/4xiLNrS0](http://pastebin.com/4xiLNrS0)。[此外，您可以在http://goo.gl/XjPpE](http://goo.gl/XjPpE)中找到一些示例文件和状态。

```
#!/bin/python
import glob, string, os, commands
from paraview.simple import *

#help(servermanager)
# vtp files are inside the local subdir DISPLAY
files = (commands.getoutput("ls DISPLAY/data-*.vtp | grep -v contacts")).split()

# process each file
for filename in files:
    fullfn = commands.getoutput("ls $PWD/" + filename)
    fn = filename.replace('DISPLAY/', '')
    #os.system("cp ../dem_git/addons/paraview_state.pvsm tmp.pvsm")
    os.system("cp ~/Desktop/state.pvsm tmp.pvsm")
    os.system("sed -i.bck 's/DATA.vtp/" + fullfn.replace('/','\/') + "/1' tmp.pvsm") # replace first intance with full path
    os.system("sed -i.bck 's/DATA.vtp/" + fullfn.replace('/','\/') + "/1' tmp.pvsm") # replace second intance with full path
    os.system("sed -i.bck 's/DATA.vtp/" + fn + "/1' tmp.pvsm") # replace third with just the filename path
    servermanager.LoadState("tmp.pvsm")
    pm = servermanager.ProxyManager()
    reader = pm.GetProxy('sources', fullfn)
    reader.FileName = fullfn
    reader.FileNameChanged()
    reader.UpdatePipeline()

    view = servermanager.GetRenderView()
    SetActiveView(view)
    view.StillRender()

    WriteImage(filename.replace(".vtp", ".png"))
    os.system("rm -f tmp.pvsm")
    os.system("rm -f tmp.pvsm.bck")

    Delete(reader) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T11:35:49.147

我意识到这是一个老问题，但我最近遇到了完全相同的问题，也找不到任何答案。您需要做的就是添加`Delete(view)`after`Delete(reader)`以使您的脚本正常工作。

# php - 无法让 xmlhttprequest 发送方法工作

> ID：10265151
> 
> 赞同：1
> 
> 时间：2012-04-22T04:09:11.153
> 
> 标签：php, javascript, ajax, xmlhttprequest

原谅这个简单的问题。我想将一个变量从 javascript 传递给 php，我知道这可以通过 xmlhttprequest 对象来完成。所以我构建了一个测试脚本来弄清楚如何做到这一点。

我正在使用 XAMPP，并将以下文件 main.php 和 test.php 放入 htdocs 文件夹中的正确位置。

main.php 尝试使用 xmlhttprequest 将变量传递给 test.php。test.php 只是简单地回显变量。然后我尝试在 main.php 中显示回显结果。

当我在浏览器中加载 main.php 并查看源代码时，我希望看到变量回显。相反，我看到一条错误消息，指出应该传递给 test.php 的变量未定义。

任何帮助都将受到欢迎。

```
 <html>
    <head>
    <title>Main</title>

    <script type="text/javascript" src="../scripts/jquery-1.7.1.min.js"></script>

    <script language="javascript" type="text/javascript">

    $(document).ready(function () {

        xmlhttp=new XMLHttpRequest();

        xmlhttp.open("GET","test.php?var1=hello", true);
        xmlhttp.send(null);

        <?php include("test.php"); ?>

    });

    </script>

</head>
<body></body>
</html> 
```

这是 test.php 中的代码，它与 main.php 位于同一文件夹中

```
<?php
$name=$_GET['var1'];
echo $name;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:16:07.373

我相信您正在以异步模式运行请求，因此请检查就绪状态更改：

```
xmlhttp=new XMLHttpRequest(); 

xmlhttp.open("GET","test.php?var1=hello", true); 
xmlhttp.send(null); 

xmlhttp.onreadystatechange=function() {
  if (xmlhttp.readyState==4) {
   alert(xmlhttp.responseText)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:46:27.923

我注意到您似乎正在使用 jQuery（如果它是 Sizzle，请忽略其余部分），因此您不需要使用它！jQuery 内置了 Ajax 方法，大大简化了它！

```
$.ajax({
    url:"test.php",
    method:"get",
    data:{
             var1:"hello"
         }
}).done(function(data){
     alert(data);
}); 
```

将创建一个 XMLHttpRequest 并发送它。

# javascript - 如何从父网页运行 iFrame 的脚本？

> ID：10265157
> 
> 赞同：3
> 
> 时间：2012-04-22T04:11:05.770
> 
> 标签：javascript, html, iframe, cross-domain

好的，假设我有一个网页，网页 B。网页 B 有一个名为“test()”的函数。现在假设我有另一个网页，网页 A。网页 A 有一个带有网页 B 源的 iFrame。如何从网页 A 执行网页 B 的“test()”功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:39:17.087

您不能通过父页面中的任何代码“直接”控制 iframe 中页面的 javascript。

但是，如果您能够更改两个页面，则可以更改“页面 B”以根据其查询字符串中的参数运行 javascript。

在“页面 A”中，将 iframe src 设置为：

`http://mydomain.com/pageb.html?func=myfunc&param=foo&param2=bar`

然后在“页面 B”中运行一些像这样的 javascript：

```
function queryToLookup(query) {
    var lookup= {};
    var params= query.slice(1).split(/[&;]/);
    for (var i= 0; i<params.length; i++) {
        var ix= params[i].indexOf('=');
        if (ix!==-1) {
            var name= decodeURIComponent(params[i].slice(0, ix));
            var value= decodeURIComponent(params[i].slice(ix+1));
            if (!(name in lookup))
                lookup[name]= [];
            lookup[name].push(value);
        }
    }
    return lookup;
}

function myTestFunc(p1, p2) {
    alert('param 1 is ' + p1 + ' and p2 is ' + p2);
}

jQuery(document).ready(function() {
    var params = queryToLookup(location.search);
    switch(lookup['func'])
    {
        case 'myfunc': myTestFunc(params['param1'], params['param2']);
        case 'otherfunc': myTestFunc('someval', params['param1']);
        default: alert('No function requested');
    }
}); 
```

这当然是一个非常基本的例子，但可以适应做各种疯狂的事情。限制是您不能真正将消息传递回“页面 A”，尽管您“可以”（我认为）调整页面 A 中的技术然后调用`top.location = 'pagea.html?message=foo'`（例如破帧的工作原理）。

# android - Android HttpPost 失败 - 服务器接收到空查询字符串参数

> ID：10265159
> 
> 赞同：0
> 
> 时间：2012-04-22T04:11:31.230
> 
> 标签：android, wcf, http, rest, http-post

我的机器上有一个简单的 WCF Web 服务，我已经开发了它来为 Android 和 IOS 设备提供服务。

该服务有一个方法如下：

```
[OperationContract]
    [WebInvoke(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "/?message={message}")]
    string ServiceMessage(string message); 
```

我有 3 个客户端，一个使用 HttpWebRequest 的 .NET 测试客户端运行良好，一个 IOS 客户端运行良好，一个 Android 客户端使用 HttpPost 和 HttpClient 类开发失败。

使用 Fiddler 反向代理我已经调试了 .net 客户端的输出：

```
POST http://127.0.0.1:8888/Service1.svc/?message=_|JSON MESSAGE BODY|_HTTP/1.1
Content-Type: application/json; charset=utf-8
Host: 127.0.0.1:8888
Content-Length: 338
Expect: 100-continue
Connection: Keep-Alive

_|JSON MESSAGE BODY|_ 
```

另一方面，这是 Android HTTP Post 的输出：

```
POST http://10.0.2.2:8888/Service1.svc/ HTTP/1.1
Content-Type: application/json; charset=utf-8
Content-Length: 139
Host: 10.0.2.2:8888
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)
Expect: 100-Continue

message=_|JSON MESSAGE BODY|_ 
```

如您所见，.Net 将消息参数放在 Post 的顶部，并且没有将消息变量名称放在底部，而 Android 没有将消息正文放在 Post 的顶部，而是将消息变量名称放在底端。

这是我的 Android 邮政编码，

```
 HttpPost httpPost = new HttpPost(url);      
    String messageBody = "message=" + jsonMessageParameter;
    StringEntity entity = new StringEntity(messageBody);
    httpPost.setEntity(entity);
    httpPost.setHeader("Content-Type", "application/json; charset=utf-8");
    HttpResponse response = hc.execute(httpPost);
    InputStream content = response.getEntity().getContent();
    String json = ConvertStreamToString(content); 
```

使用此代码调用时，会调用服务器方法，但消息方法参数为空。我尝试使用 Uri.Builder 类来让 android 帖子将消息放在标题中，但效果不佳。如果有人可以在这里帮助我，我会坚持几个小时。

先感谢您 ，

詹姆士

编辑 ：

我将Android代码更改为：

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("message", jsonMessageParameter));

    HttpPost httpPost = new HttpPost(url);
     UrlEncodedFormEntity urlEncodedFromEntity = new UrlEncodedFormEntity(
     nameValuePairs);
     urlEncodedFromEntity.setContentType(new BasicHeader("Content-Type",
     "application/json; charset=utf-8"));

    httpPost.setEntity(urlEncodedFromEntity);

    InputStream postStream = httpPost.getEntity().getContent();
    String postOutput = ConvertStreamToString(postStream);
    HttpResponse response = hc.execute(httpPost);
    InputStream content = response.getEntity().getContent();
    String json = ConvertStreamToString(content); 
```

但 Fiddler 的监控仍然如下：

```
POST http://10.0.2.2:8888/Service1.svc/ HTTP/1.1
Content-Length: 189
Content-Type: application/json; charset=utf-8
Host: 10.0.2.2:8888
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)
Expect: 100-Continue

message=_|MESSAGE_JSON|_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:12:23.317

这里有几点。

首先，您专门添加`message=`到您的 Android POST 正文中：

```
String messageBody = "message=" + jsonMessageParameter; 
```

这也可能是有问题的，因为您指定`Content-Type: application/json`但通过添加`message=`您没有提供有效的 JSON 对象。

其次，为什么 .Net 实现将 JSON 对象复制为 URL 和正文中的参数？对于 POST 请求，这看起来很奇怪且非常罕见，如果您的 JSON 对象使 URL 超过最大 URL 长度，可能会导致问题。

所以我会尝试`message=`在正文中删除并将 JSON 对象作为 URL 参数删除，因为处理 POST 的服务器应该读取正文而不是 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:53:02.007

HttpPost 用于发布，afaik。

```
String url;
input = url + URLEncoder.encode(messageBody, "utf-8");
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(input);
InputStream stream = httpclient.execute(httpget).getEntity().getContent();
String s = streamToString(stream);
JSONObject jObject = new JSONObject(s); 
```

这个非常精确的代码（加上一些 try/catch）适用于我查询 GoogleBooks，也许你可以毫不费力地将它调整到你的服务中？

最好的祝福。

# javascript - SlidesJS隐藏分页

> ID：10265161
> 
> 赞同：1
> 
> 时间：2012-04-22T04:11:49.153
> 
> 标签：javascript, jquery, slideshow

我正在使用 Slidesjs 在我的网站上使用一个简单的滚动条。但是，我无法隐藏显示 1 和 2 要点的分页。

该项目的链接是 www.barterscloset.com

我试图将它隐藏在 css 和 Jquery.hide 函数中。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T04:14:37.310

有一个内置选项，将这些行添加到您触发插件的位置：

```
pagination: false,
generatePagination: false 
```

所以你的整个通话看起来像这样（如果你没有设置其他选项，那就是）

```
$(function(){
    $("#slides").slides({
        pagination: false,
        generatePagination: false
    });
}); 
```

# linux - Linux time 命令输出中 real、user 和 sys 的含义

> ID：10265162
> 
> 赞同：39
> 
> 时间：2012-04-22T04:12:03.397
> 
> 标签：linux, time

```
$ time ./Test 

real    0m2.906s
user    0m2.887s
sys     0m0.017s 
```

这是程序代码：

```
#include <iostream>
#include <map>

void func_a() {
    std::map<int, int> m;
    for (unsigned int i = 0; i < 10000; i++) {
        m.insert(std::pair<int, int>(i, i));
    }
}

void func_b() {
    std::map<int, int> m;
    for (unsigned int i = 0; i < 1000000; i++) {
        m.insert(std::pair<int, int>(i, i));
    }
}

int main() {
    func_a();
    func_b();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-22T04:20:12.020

如果您查看[联机帮助页](http://linux.about.com/library/cmd/blcmdl1_time.htm)( `man time`)，它会指出：

> time 命令使用给定的参数运行指定的程序命令。当命令完成时，时间会向标准输出写入一条消息，提供有关此程序运行的计时统计信息。这些统计数据包括 (i) 调用和终止之间经过的实时时间，(ii) 用户 CPU 时间（由 times(2) 返回的结构 tms 中的 tms_utime 和 tms_cutime 值的总和），以及 (iii)系统 CPU 时间（times(2) 返回的 struct tms 中的 tms_stime 和 tms_cstime 值的总和）。

Basically though, the `user` time is how long your program was running on the CPU, and the `sys` time was how long your program was waiting for the operating system to perform tasks for it. If you're interested in benchmarking, `user + sys` is a good time to use. `real` can be affected by other running processes, and is more inconsistent.

# google-app-engine - Google App Engine Memcache 对象类型

> ID：10265163
> 
> 赞同：0
> 
> 时间：2012-04-22T04:12:25.113
> 
> 标签：google-app-engine, memcached

非常简短的问题：我只能在 GAE 的内存缓存中存储实体类型的对象还是支持其他类型？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T06:41:30.437

对于 Java，您可以使用实现 java.Serializable 的每个对象，如 Javadoc [https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/memcache/MemcacheService中所述](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/memcache/MemcacheService)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T20:59:36.980

对于 Python：根据[source](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/api/memcache/__init__.py)，任何类型都是可以接受的。

```
def add(self, key, value, time=0, min_compress_len=0, namespace=None):
"""Sets a key's value, iff item is not already in memcache.

  Args:
    key: Key to set.  See docs on Client for details.
    value: Value to set.  Any type.  If complex, will be pickled.
    ... 
```

# c# - 身份验证、哈希、盐、https 过程？

> ID：10265166
> 
> 赞同：1
> 
> 时间：2012-04-22T04:13:12.550
> 
> 标签：c#, wcf, web-services, rest, authentication

嗨，我想我可能做错了，任何人都可以帮助解释你如何散列/加盐密码。您是从客户端还是从 Web 服务执行此操作？

我有一个具有密码数据成员的数据合同，在我的服务中，我这样做是为了在保存密码之前创建密码的哈希/盐：

```
 So here is the process in which I was thinking.

Rest Service has https for secure connection
User creates account (along with password)
//to stop packet sniffing when user creates account https is used during POST so no one can see the password? 
web service then creates a hash of the password to store it
//so if anyone did get access to the service/database they couldnt make much use of the data in terms of breaching accounts
Then some means to authenticate that user there after 
```

它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:12:02.920

听起来你在正确的轨道上。客户端永远不应该与盐值一起散列，因为攻击者可以访问该代码。而且 https 确实会保护连接，不允许其他人读取数据。

在身份验证期间，您执行相同的操作：获取用户通过 https 输入的密码，对该值进行哈希/加盐，然后将结果哈希与数据库中的值进行比较。当然，如果您曾经`Student`向客户端返回一个对象，它不应该包含任何值。

`Password`不重用 的属性可能是明智的，`Student`因为现在您无法判断它是包含纯密码还是散列值。

# jquery - 使用前进/后退按钮支持添加 URL 值的 jQuery 最佳实践

> ID：10265172
> 
> 赞同：3
> 
> 时间：2012-04-22T04:15:02.240
> 
> 标签：jquery, url, hash, browser-history

我一直在互联网上进行挖掘，并没有找到任何关于向 URL 添加哈希和值的文章，其中包含一些魔力。

我正在开发一个网络应用程序，我的最终目标是为“页面”的 url 添加一个哈希值，并在指定“页面”上的哪个视频处于活动状态之后添加一个值。有了它，我将启用书签并直接链接到页面内的视频。IE `localhost#pageTwo?videoTitle`

似乎 Ben Alman 的[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/) + [Hashchange](http://benalman.com/projects/jquery-hashchange-plugin/)是最好的答案......但它们已经过时了，可能有更好的答案我找不到。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:09:53.507

[单页应用程序](http://learn.knockoutjs.com/#/?tutorial=webmail)的 knockout.js 教程使用了一个名为[Sammy.js](http://sammyjs.org/)的插件。它有相当多的魔力，超过我的头。我只在教程中使用 Sammy 进行淘汰赛，但它非常简单。看看吧，也许它对你有用。虽然公平地说，我还没有尝试过 jQuery BBQ 或 Hashcage。

回帖，让我知道结果如何。

# sql - 选择多个子句

> ID：10265173
> 
> 赞同：0
> 
> 时间：2012-04-22T04:15:03.177
> 
> 标签：sql, sql-server, stored-procedures

**架构**

我有 3 个包含以下列的表：

```
tblClients [ClientID, ClientName, Client Contact]
tblEvents [EventID, EventName]
tblEventBook [EventBookID, EventID, ClientID] 
```

*   `tblEventBook EventID`火柴`tblEvents EventID`
*   `tblEventBook ClientID`火柴`tblClients ClientID`

我有两个参数：`@useEventID`和`@useClientID`

我想检索不等于和`tblClient`的所有行。`tblEventBook``useEventID``useClientID`

我尝试使用以下内容，但它不起作用：

```
SELECT * 
FROM tblClients 
WHERE tblEventBook.EventID <> @useEventID 
  AND tblEventBook.ClientID <> @useClientID 
```

样本数据：

**tblEventBook**

```
EventBookID EventID ClientID 
1           1          1 
2           2          2
3           3          1
4           4          2 
```

**tblClients**

```
ClientID ClientName  ClientContact
1        TestNameA   12345
2        TestNameB   54321 
```

**tbl事件**

```
EventID EventName
1       TestEventA
2       TestEventB
3       TestEventC
4       TestEventD
5       TestEventE 
```

所需结果

我使用时需要得到以下结果：

1.  `@useClientID = 1, @useEventID = 1`

    它应该返回`ClientID 2`

2.  `@useClientID = 2, @useEventID = 1`

    它应该返回`ClientID 1 and 2`

3.  `@useClientID = 2, @useEventID = 2`

    它应该返回`ClientID 1`

4.  `@useClientID = 5, @useEventID = 2`

    它应该返回`ClientID 1 and 2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:22:25.420

我不是 100% 确定你想在这里做什么，但试试这个：

```
SELECT * FROM tblEventBook

WHERE 

EventID <> @useEventID 

AND

ClientID <> @useClientID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:22:32.487

如果没有一些样本数据和期望的结果，很难准确地确定你想要什么，但这是我从你的单词问题中的第一个猜测：

```
SELECT c.ClientID, c.ClientName, c.[Client Contact],
    e.EventID, e.EventName,
    eb.EventBookID
  FROM dbo.tblClients AS c
  LEFT OUTER JOIN dbo.tblEventBook AS eb
  ON c.ClientID = eb.ClientID
  LEFT OUTER JOIN dbo.tblEvents AS e
  ON eb.EventID = e.EventID
  WHERE eb.EventID <> @useEventID
  AND eb.ClientID <> @useClientID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T04:25:53.390

如果我正确理解您的要求：

```
SELECT        *
FROM           tblClients
WHERE        (ClientID IN
                             (SELECT        ClientID
                               FROM            tblEventBook
                               WHERE        (ClientID <> @useClientID) AND (EventID <> @useEventID))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T04:33:49.613

此解决方案将排除所有具有@useClientID 的tblClients 和与@useEventID 匹配的相关tblEventBook：

```
select * from tblClients c
where c.ClientID <> @useClientID
and not exists(select 1 from tblEventBook where ClientID=c.ClientID and EventID=@useEventID) 
```

但是从您的描述中，我也看到了一个稍微不同的可能性，如果存在具有@useClientID 和@useEventID 的相关tblEventBook 记录，我们只排除tblClients：

```
select * from tblClients c
where not exists(
    select 1 from tblEventBook 
    where ClientID=c.ClientID 
    and EventID=@useEventID
    and ClientID=@useClientID
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T04:43:54.817

试试这个

```
select *
from  @tblClients c
join @tblEventBook eb
on c.ClientID = eb.ClientID
where c.ClientID != @useClientID
and eb.EventBookID != @useEventID 
```

# cloud-foundry - 如何读取vmc推送日志

> ID：10265178
> 
> 赞同：1
> 
> 时间：2012-04-22T04:16:16.483
> 
> 标签：cloud-foundry, vmc

当我使用 vmc 推送项目到 micro cloudfoundry 时，启动应用程序错误，智能提示如下。但我找不到日志是我的项目路径。

```
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (206K): OK   
Push Status: OK
Stopping Application: OK
Staging Application: OK                                                         
Starting Application: ..........................Error 306: Error retrieving file 'logs/startup.log' 
```

在哪里可以找到日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:49:26.237

您还可以使用`vmc files <myapp> path/to/file`. 例如：

`vmc files myapp logs/stderr.log`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:37:58.767

你跑来`vmc push`部署应用程序。您**应该**能够运行`vmc logs myapp`以查看日志。

但我从未见过这样的 306 错误。我担心这`vmc logs myapp`可能会因为您在推送期间遇到的相同根本原因而失败。

您应该能够通过 ssh 连接到 Micro Cloud Foundry 实例，然后跟踪日志。他们会在这里：

```
/var/vcap/data/dea/apps/myapp-a-bunch-of-other-letters-and-digits/tomcat 
```

# facebook - FB 应用程序在用户新闻提要上作为应用程序发布

> ID：10265180
> 
> 赞同：0
> 
> 时间：2012-04-22T04:16:34.970
> 
> 标签：facebook, facebook-graph-api, feed

不确定这是否可能（或者是否有类似的方法）：

我有一个 Facebook 应用程序，当用户安装它时，我想生成新闻提要以仅向该用户显示。

我希望新闻提要帖子由应用程序而不是用户本身来拟人化。

这可能吗？

如果没有，有没有办法用 FB Page 实现同样的目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:25:48.757

不，没有办法代表应用程序或页面在用户的时间轴上写，帖子将始终归因于用户。

如果您需要直接与用户交流，最好的选择是从 API 获取他们的电子邮件地址或使用[请求](https://developers.facebook.com/docs/requests/)

# c# - 使用 System.Data.DataSet 在 .Net 中读取 XML / RSS？

> ID：10265181
> 
> 赞同：0
> 
> 时间：2012-04-22T04:16:48.917
> 
> 标签：c#, .net, xml, visual-studio-2008

我真的没有太多地使用 XML，我希望能得到一些帮助。

我正在尝试从 WeatherBug 读取 RSS 提要

我在这里找到了一些示例代码：

[http://geekswithblogs.net/thibbard/archive/2006/01/13/65764.aspx](http://geekswithblogs.net/thibbard/archive/2006/01/13/65764.aspx)

他们在哪里使用 System.Data.DataSet 来读取 XML 提要。

（他们使用的是 VBasic 我使用的是 VC#）

这是我正在尝试阅读的 XML 示例：

[http://api.wxbug.ne​​t/getLiveCompactWeatherRSS.aspx?ACode=A5333948364&zipcode=80918&unittype=0&OutputType=1](http://api.wxbug.net/getLiveCompactWeatherRSS.aspx?ACode=A5333948364&zipcode=80918&unittype=0&OutputType=1)

在代码示例中，他们得到风速如下：

_wind = DS.Tables("wind-speed").Rows(0).Item("wind-speed_Text")

我怎么知道为每个索引值指定什么？我想我理解他们是如何确定指定风速的，但他们是如何确定如何指定风速文本的？

我可以使用以下方法查看调试器中的值：

m_ds.Tables["风速"].Rows[0].ItemArray

我可以看到 3 个值。“MPH”、“3”和 0。

MPH 将是单位。“3”是速度。不知道 0 是什么。

我将如何访问 aws:WebURL 的值？

而且我只看到 8 张桌子。但还有更多的价值。通过调试器，我在 Weather 表中找到了这些 URL 以及 wind-direction 和 gust-direction 的值。

我以为我已经把整张桌子的东西都钉牢了，但似乎没有押韵也没有理由。

谁能让我走上正确的道路？基本上我只需要知道如何根据我在 XML 中看到的内容找出如何在 DataTables 中查找内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:46:22.600

快捷方便：

```
XDocument doc = XDocument.Load("http://api.wxbug.net/getLiveCompactWeatherRSS.aspx?ACode=A5333948364&zipcode=80918&unittype=0&OutputType=1");
            XNamespace ns = "http://www.aws.com/aws";
            var webUrl = doc.Element(ns + "weather").Element(ns + "WebURL").Value;
            var wind = doc.Element(ns + "weather").Element(ns + "wind-speed").Value; 
```

您还可以使用 LINQ：

```
XDocument doc = XDocument.Load("http://api.wxbug.net/getLiveCompactWeatherRSS.aspx?ACode=A5333948364&zipcode=80918&unittype=0&OutputType=1");
            XNamespace ns = "http://www.aws.com/aws";
            var v = from d in doc.Elements(ns + "weather") select new { WebUrl = d.Element(ns + "WebURL").Value, WindSpeed = d.Element(ns + "wind-speed").Value};
            foreach (var c in v)
            {
                Console.WriteLine(c.WebUrl + "--" + c.WindSpeed);
            } 
```

# linux - 如何从 struct page 获取 struct vm_area_struct

> ID：10265188
> 
> 赞同：3
> 
> 时间：2012-04-22T04:19:28.217
> 
> 标签：linux, linux-kernel, kernel

基本上，我需要使用一个页面来识别进程或任务，并据此做出一些关于是否允许换出页面的决定。因为内核 AFAIK 中的交换模块主要处理*struct page*，所以我想知道是否存在一些我遗漏的现有技巧。来自 include/linux/mm_types.h (v >= 2.6)，以下注释：

*   系统中的每个物理页面都有一个与
*   它来跟踪我们在
*   片刻。请注意，我们无法跟踪哪些任务正在使用
*   一个页面，但如果它是一个 pagecache 页面，rmap 结构可以告诉我们
*   谁在映射它。

建议我们可以通过一些物理到虚拟的反向映射来做到这一点，但我无法从 rmap 函数（在 mm/rmap.c 中）弄清楚如何实现我正在寻找的东西。

在此先感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:28:27.933

要回答您的实际问题“如何从 struct page 获取 struct vm_area_struct”，至少有两个答案。

对于匿名页面，您可以使用`page_anon_vma()`，它返回一个`anon_vma`- 它存储在`page->mapping`一个特殊标志集以指示它不是一个`struct address_space`（以节省空间）。

从`anon_vma`您可以步行，`anon_vma_chain`并且每个入口指向一个`vma`。从`vma`那里你可以得到`mm`然后**一个**任务。

参见`page_referenced_anon()`示例。

对于文件页面，您查看`page->mapping`which 是 a `struct address_space`，然后从那里走到`i_mmap`which 是 a `struct prio_tree_root`。见`page_referenced_file()`。

我不确定这是否真的会帮助你实现你的想法，但你去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-02T04:20:14.363

像这样的东西可能就是你想要的。

这是原型：

```
// [ http://lxr.free-electrons.com/source/include/linux/rmap.h#L27 ]
149 struct anon_vma *page_get_anon_vma(struct page *page); 
```

这就是你可以使用它的方式： // [ [http://lxr.free-electrons.com/source/mm/ksm.c#L1898](http://lxr.free-electrons.com/source/mm/ksm.c#L1898) ] // [...]

```
 anon_vma = page_get_anon_vma(page);
1902    anon_vma_lock_read(anon_vma);
1903    anon_vma_interval_tree_foreach(vmac, &anon_vma->rb_root,
1904                                                0, ULONG_MAX) {
1906                         vma = vmac->vma;
1907                         if (page_address < vma->vm_start ||
1908                             page_address >= vma->vm_end)
1909                                 continue;
[...]   }
        anon_vma_unlock_read(anon_vma); 
```

# python - Python - 一个类可以像一个模块一样吗？

> ID：10265193
> 
> 赞同：1
> 
> 时间：2012-04-22T04:20:31.037
> 
> 标签：python, package

我正在考虑这样设置的包实现：

```
wordproc
    __init__.py
    _generic.py
    gedit.py
    oofice.py
    word.py 
```

_generic.py 会有这样的类：

```
class WordProc (object):

    def __init__ (self):
        pass

    def createNewDoc (self):
        print "createNewDoc unimplemented in current interface"

    def getWordCount (self):
        print "getWordCount unimplemented in current interface"

    etc... 
```

这些可能会如图所示打印出来，或引发错误。特定于应用程序的模块将只是 _generic.py 的副本，其中 WordProc 类派生自 _generic.WordProc。通过这种方式，功能可以随着时间的推移迭代地实现，关于未实现事物的消息只会引发警报。

我想象 __init__.py 可以查找以下内容（按顺序列出）以确定要使用的模块：

1.  wordproc 模块变量
2.  路径中的设置文件
3.  wordproc 环境变量
4.  尝试确定环境的函数
5.  __init__.py 中的默认值（可能是 _generic.py）

我认为 3 可以是每个应用程序模块中的一个函数，或者这些可以进入具有特别命名的环境测试脚本（例如 env.py）的文件夹，并且 __init__.py 可以循环它们。

我想在任何想要使用 wordproc 的库中简单地做到这一点：

```
import wordproc as wp

wp.createNewDoc()
etc... 
```

我不知道如何让 wp 解析到由 __init__.py 确定的正确模块中的正确类。这样做没有意义：

```
import wordproc.gedit as wp 
```

这破坏了让 __init__.py 确定要使用 wordproc 中的哪个模块的意义。我需要类继承之类的东西，但是在模块级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:37:55.740

你可以这样写来达到你想要的效果`__init__.py`：

1.  首先导入相应的模块。请参阅有关动态导入的python 文档[`importlib.import_module`](http://docs.python.org/library/importlib.html#importlib.import_module)或获取帮助。[`__import__`](http://docs.python.org/library/functions.html#__import__)
2.  实例化要从中导出方法的类
3.  将实例方法分配给 locals()

> ```
> # import appropriate module as mod depending on settings, environment
> # using importlib.import_module, or __import__
> 
> __all__ = []
> 
> _instance = mod.WordProc()
> for attr in dir(_instance):
>     if not attr.startswith('_') and callable(getattr(_instance, attr)):
>         locals()[attr] = getattr(_instance, attr) 
> ```

# c# - 应该使用什么 DataType 在特定 WCF 合同的 1 个参数中保存二进制文件（例如 Excel 文件）？

> ID：10265194
> 
> 赞同：1
> 
> 时间：2012-04-22T04:20:59.027
> 
> 标签：c#, wcf, wcf-binding, binaryfiles

我想编写一个 WCF 合同，将整个二进制文件对象（例如 Excel 文件）从客户端传输到服务器。我*应该*为保存这个二进制对象的合约参数使用什么数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:24:26.793

在危险方面：

什么是字节[]？

# session - 文件和数据库中的会话之间的区别

> ID：10265200
> 
> 赞同：13
> 
> 时间：2012-04-22T04:22:13.380
> 
> 标签：session, session-storage, session-store

在文件和数据库中存储会话有什么区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T04:33:58.910

主要区别在于从数据库中获取会话信息比从文件系统中获取会话信息要快很多。这部分是因为数据库缓存，但也因为如果有大量会话文件，文件系统可能无法很好地处理它。当单个目录中有几千个文件时，大多数文件系统开始降级，而数据库不会遇到这个问题。

其他原因包括细粒度的安全性、复制和/或分片，所有这些对于 DBMS 来说都是肉和土豆，而不是文件系统。

如果您只有几个会话，那没关系，但是当有 10,000 或 10,000,000 个会话时，它肯定有。

# java - 如何将 XMP XML 块序列化为现有的 JPEG 图像？

> ID：10265206
> 
> 赞同：1
> 
> 时间：2012-04-22T04:24:31.660
> 
> 标签：java, xml, jpeg, xmp

我有许多包含损坏的 XMP XML 块的 JPEG 图像。我可以轻松修复这些块，但我不确定如何将“固定”数据写回图像文件。

我目前正在使用 JAVA，但我愿意接受任何能让这项任务变得简单的事情。

这是前面提出的[关于 XMP XML 的另一个问题的目标。](https://stackoverflow.com/questions/9961629/how-do-you-trim-the-xmp-xml-contained-within-a-jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:48:29.353

在 JAVA 中，您可以使用[Apache Sanselan 库](http://commons.apache.org/imaging/)：

```
String newXmpXmlString = "<the><new/><xmp/><xml/></the>";
File file = new File('path/to/file');
new JpegXmpRewriter().updateXmpXml(new ByteSourceFile(file), new BufferedOutputStream(new FileOutputStream(file)), newXmpXmlString); 
```

有关上述解决方案的更详细示例，Google Code 上有一个开源项目，其中包含一个小型[jPeg XMP XML Trimmer](https://code.google.com/p/jpegxmpxmltrimmer/)。

# javascript - node.js process.env：将 process.env 属性分配给未定义的字符串类型的结果？

> ID：10265208
> 
> 赞同：15
> 
> 时间：2012-04-22T04:25:30.863
> 
> 标签：javascript, node.js

node.js[`process.env`](http://nodejs.org/api/process.html#process_process_env)对象处理属性分配的方式似乎与常规 JavaScript 对象不同。在这种情况下，如何让`process.env`对象像普通对象一样工作？

下面是说明不同分配行为的示例代码。出于某种原因，分配`undefined`给属性会导致字符串类型（仅适用于`process.env`）：

```
function demo(description, dict) {
    console.log(description);
    dict.A = undefined;
    console.log('typeof dict.A: ' + typeof dict.A + '\n');
}
demo('Passing empty object:', {});
demo('Passing process.env:',  process.env); 
```

结果输出不同，具体取决于是否传递了空对象`{}`或对象：`process.env`

```
$节点测试.js
传递空对象：
typeof dict.A: 未定义

传递 process.env：
typeof dict.A: 字符串

```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-22T04:39:07.300

该`process.env`对象强制其所有属性为字符串类型，因为环境变量必须始终为字符串。我不完全确定您的目的，但也许您可以尝试其中一种作为解决方法：

*   将`process.env`对象复制到一个新对象中，然后该对象将正常运行：

    ```
    envCopy = {};
    for (e in process.env) envCopy[e] = process.env[e]; 
    ```

*   `''`如果您希望它是“空白”，则分配给一个属性

    ```
    process.env.A = ''; 
    ```

    当您将其视为布尔值时，它将返回 false

    ```
    if (process.env.A) {
        ...
    } 
    ```

*   或者正如*Jonathan Lonowski*指出的那样，您也可以`delete`从`process.env`

    ```
    delete process.env.A; 
    ```

希望这可以帮助

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-22T04:40:50.123

发生这种情况是因为`process.env`强制其所有值`String`：

```
process.env.A = undefined;
console.log(process.env.A);        // 'undefined' (note the quotes)

process.env.A = true;
console.log(process.env.A);        // 'true'
console.log(typeof process.env.A); // 'string' 
```

如果您需要删除环境变量，则必须[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)：

```
function demo(description, dict) {
    console.log(description);
    delete dict.A;
    console.log('typeof dict.A: ' + typeof dict.A + '\n');
}
demo('Passing process.env:', process.env);

// Passing process.env:
// typeof dict.A: undefined 
```

# python - 字典中的 bvCase 不敏感正则表达式替换

> ID：10265210
> 
> 赞同：3
> 
> 时间：2012-04-22T04:25:36.820
> 
> 标签：python, regex, recursion

很抱歉，但我无法从谷歌给我的任何解决方案中找到可行的解决方案（某些网站上的一些“食谱”非常接近，但是太旧了，我还没有找到任何东西这给了我正在寻找的结果。

我正在重命名文件，所以我有一个吐出文件名的函数，为此我只是使用'test_string's：所以，首先删除所有点，（和下划线）和东西 - 因为这些是最常见的所有这些教授所做的事情都不同，并且如果不删除所有这些东西就无法处理（或查看）。5个例子：

```
test_string_1 = 'legal.studies.131.race.relations.in.the.United.States.' 
```

'legal.studies' --> '法律研究'

```
test_string_2 = 'mediastudies the triumph of bluray over hddvd' 
```

'mediastudies' --> '媒体研究', 'bluray' --> '蓝光, 'hddvd' --> 'HD DVD'

```
test_string_3 = 'computer Science Microsoft vs unix' 
```

'计算机科学' --> '计算机科学'、'unix' --> 'UNIX'

```
test_string_4 = 'Perception - metamers dts' 
```

“感知”已经很好了（但谁在乎），大局是他们希望将音频信息保留在那里，所以“dts”--> DTS

```
test_string_5 = 'Perception - Cue Integration - flashing dot example aac20 xvid' 
```

'aac20' --> 'AAC2.0', 'xvid' --> 'XviD'

目前我正在通过以下方式运行它：

```
new_string = re.sub(r'(?i)Legal(\s|-|)Studies', 'Legal Studies', re.sub(r'(?i)Sociology', 'Sociology', re.sub(r'(?i)Media(\s|-|)Studies', 'Media Studies', re.sub(r'(?i)UNIX', 'UNIX', re.sub(r'(?i)Blu(\s|-|)ray', 'Blu-ray', re.sub(r'(?i)HD(\s|-|)DVD', 'HD DVD', re.sub(r'(?i)xvid(\s|-|)', 'XviD', re.sub(r'(?i)aac(\s|-|)2(\s|-|\.|)0', 'AAC2.0', re.sub(r'(?i)dts', 'DTS', re.sub(r'\.', r' ', original_string.title())))))))))) 
```

我把它们全部放在一条线上；因为我没有太多改变/更新它，而且（我的大脑/ADD 的工作方式）一旦我不乱做其他事情，就更容易让它尽可能少/不碍事这部分了。

所以，以我的例子：

```
new_test_string_1 = 'Legal Studies 131 Race Relations In The United States'
new_test_string_2 = 'Media Studies The Triumph Of Blu-ray Over HD DVD'
new_test_string_3 = 'Computer Science Microsoft Vs UNIX'
new_test_string_4 = 'Perception - Metamers DTS'
new_test_string_5 = 'Perception - Cue Integration - Flashing Dot Example AAC2.0 XviD' 
```

然而，随着我拥有越来越多的这些，它真的开始成为我想要拥有一本字典或其他东西的那种东西——我不想把代码炸成任何疯狂的东西，但我想能够添加新的替代品，因为现实生活中的例子需要添加（例如，有很多音频编解码器/容器/任何东西，看起来我可能不得不把它们都扔进去）。我对这个主列表/字典/其他使用的方法没有意见。

大图：我正在修复文件名中的空格和下划线，用大写的东西替换一堆狗屎（目前，除了我正在制作的 re.subs 之外，普遍使用标题，它处理大量大写不完美且输入中可能有也可能没有空格、破折号或点的情况下，输出应该有）。

类似地，一个单行的、未命名的（例如 lambda）函数会更可取。

PS 很抱歉有些奇怪和一些最初的不清楚。这里的问题之一是在我的专业/学习中，大多数东西实际上非常简单，其他课程需要所有蓝光、HD DVD、DTS、AAC2.0、XviD 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:07:13.077

```
>>> import re
>>> def string_fix(text,substitutions):
        text_no_dots = text.replace('.',' ').strip()
        for key,substitution in substitutions.items():
            text_no_dots = re.sub(key,substitution,text_no_dots,flags=re.IGNORECASE)
        return text_no_dots

>>> teststring = 'legal.studies.131.race.relations.in.the.U.S.'
>>> d = {
     r'Legal(\s|-|)Studies' : 'Legal Studies', 
     r'Sociology'           : 'Sociology', 
     r'Media(\s|-|)Studies' : 'Media Studies'
}
>>> string_fix(teststring,d)
'Legal Studies 131 race relations in the U S' 
```

这是一种更好的方法，无需字典

```
>>> teststring = 'legal.studies.131.race.relations.in.the.U.S.'
>>> def repl(match):
        return ' '.join(re.findall('\w+',match.group())).title()

>>> re.sub(r'Legal(\s|-|)Studies|Sociology|Media(\s|-|)Studies',repl,teststring.replace('.',' ').strip(),flags=re.IGNORECASE)
'Legal Studies 131 race relations in the U S' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:57:12.657

```
import re

def string_fix(filename, dict):
    filename = filename.replace('.', ' ')
    for key, val in dict.items():
        filename = re.sub(key, val, filename, flags=re.IGNORECASE)
    return filename

dict = {
         r'Legal[\s\-_]?Studies' : 'Legal Studies',
         r'Media[\s\-_]?Studies' : 'Media Studies',
         r'dts' : 'DTS',
         r'hd[\s\-_]?dvd': 'HD DVD',
         r'blu[\s\-_]?ray' : 'Blu-ray',
         r'unix' : 'UNIX',
         r'aac[\s\-_]?2[\.]?0' : 'AAC2.0',
         r'xvid' : 'XviD',
         r'computer[\s\-_]?science' : 'Computer Science'
     }

string_1 = 'legal.studies.131.race.relations.in.the.United.States.'
string_2 = 'mediastudies the triumph of bluray over hddvd'
string_3 = 'computer Science Microsoft vs unix'
string_4 = 'Perception - metamers dts'
string_5 = 'Perception - Cue Integration - flashing dot example aac20 xvid'

print(string_fix(string_1, dict))
print(string_fix(string_2, dict))
print(string_fix(string_3, dict))
print(string_fix(string_4, dict))
print(string_fix(string_5, dict)) 
```

# php - 从 include() 获取调用文件名

> ID：10265216
> 
> 赞同：10
> 
> 时间：2012-04-22T04:26:34.603
> 
> 标签：php, include, include-path, magic-constants

我想从包含的文件中获取包含另一个文件的文件的名称。

我知道有`__FILE__`魔法常数，但这没有帮助，因为它返回包含文件的名称*，而不是**包含*文件的名称。

 *有没有办法做到这一点？或者由于 PHP 的解释方式是不可能的？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-31T09:06:24.027

所以这个问题很老了，但我一直在寻找答案，离开这里后不满意，我遇到了`$_SERVER['SCRIPT_FILENAME'];` 当然，如果执行包含的 php 文件是网页，则此方法有效。

这为您提供了服务器上“包含文件”的完整路径。例如 /var/www/index.php。因此，如果您只想要文件名，例如 index.php，您将需要使用 basename()，例如

`basename($_SERVER['SCRIPT_FILENAME']);`

因此，如果在您的 index.php 中有以下行：

`<?php include("./somephp.php"); ?>`

在 somephp.php 你有

`echo "this is the file that included me: " . basename($_SERVER['SCRIPT_FILENAME']);`

你会得到

`this is the file that included me: index.php`

输出到浏览器。如果用户在访问您的文件时没有在 url 中明确包含文件名（例如，`www.example.com`而不是 `www.example.com/index.php`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-20T22:33:45.320

## 解决方案

知道用于包含文件的函数是`include`, `include_once`,`require`和`require_once`, 也知道它们是 PHP 中的保留字, 意味着不能声明同名的用户函数, 并且基于[wedgwood 的](https://stackoverflow.com/a/10265300/402022)使用思想`debug_backtrace`你可以实际工作从调用包含的文件中取出。

我们要做的是遍历回溯，直到找到对四个包含函数中任何一个的最近调用，以及调用它的文件。以下代码演示了该技术：

```
function GetIncludingFile()
{
    $file = false;
    $backtrace =  debug_backtrace();
    $include_functions = array('include', 'include_once', 'require', 'require_once');
    for ($index = 0; $index < count($backtrace); $index++)
    {
        $function = $backtrace[$index]['function'];
        if (in_array($function, $include_functions))
        {
            $file = $backtrace[$index]['file'];
            break;
        }
    }
    return $file;
} 
```

上面的代码将返回最后一次包含发生的文件的绝对路径，如果没有任何包含，它将返回 false。请注意，该文件可能已从另一个文件包含的文件中包含，上述功能仅适用于最深的包含。

通过简单的修改，您还可以获得最后包含的文件：

```
function GetIncludedFile()
{
    $file = false;
    $backtrace =  debug_backtrace();
    $include_functions = array('include', 'include_once', 'require', 'require_once');
    for ($index = 0; $index < count($backtrace); $index++)
    {
        $function = $backtrace[$index]['function'];
        if (in_array($function, $include_functions))
        {
            $file = $backtrace[$index - 1]['file'];
            break;
        }
    }
    return $file;
} 
```

* * *

## 观察

请注意，`__FILE__`不是包含文件，而是当前文件。例如：

文件 A.php：

```
<?php
    function callme()
    {
        echo __FILE__;
    }
?> 
```

文件 B.php：

```
<?php
    include('A.php');
    callme();
?> 
```

文件索引.php：

```
<?php
    include('B.php');
?> 
```

在上面的示例中，在文件 B.php 的上下文中，包含文件是 B.php（包含文件是 index.php），但函数的输出`callme`是 A.php 的路径，因为`__FILE__`在 A.php .

* * *

另请注意，这`$_SERVER['SCRIPT_FILENAME']`将给出客户端请求的脚本的绝对路径。如果`$_SERVER['SCRIPT_FILENAME'] == __FILE__`这意味着当前文件是请求的文件，因此*可能*没有任何包含...

上面的方法检查当前文件是否是请求的文件，但如果它没有被包含则不检查（下面是如何包含请求的文件的示例）。检查是否没有任何夹杂物的实际解决方案可能是检查`count(get_included_files()) == 1`.

* * *

请求的文件可以通过以下方式成为包含文件：

文件 x.php

```
<?php
   $var = 'something';
   include('index.php');
?> 
```

文件 index.php

```
<?php
    if (!isset($var))
    {
        include('x.php');
        exit;
    }
    echo 'something';
?> 
```

在上面的例子中，文件 index.php 将包含 x.php，然后 x.php 将包含 index.php，然后 index.php 输出“something”并将控制权返回给 x.php，x.php 将控制权返回给 index .php 并到达退出；

这表明即使 index.php 是请求的脚本，它也被包含在另一个脚本中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-22T04:44:42.420

我找不到简单的方法来解决这个问题。但是如果 include 对你来说真的很重要，你可以用一些全局变量和你自己的 include 函数来破解它。

例如

```
<?php                                                                            

    $g_including_files = array();                                                    

    function my_include($file) {                                                     
        $bt =  debug_backtrace();

        global $g_including_files;                                                   
        $g_including_files[basename($file)] = $bt[0]['file']; 
        return include($file);                                                                                                                                                                     
    } 
```

可能对你有帮助:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-22T05:01:12.940

这实际上只是 PHP 模板引擎所做的一个特例。考虑具有此功能：

```
function ScopedInclude($file, $params = array())
{
    extract($params);
    include $file;
} 
```

然后`A.php`可以包括`C.php`这样的：

```
<?php
// A.php
ScopedInclude('C.php', array('includerFile' => __FILE__)); 
```

此外，`B.php`可以毫无困难地包括`C.php`相同的方式。

```
<?php
// B.php
ScopedInclude('C.php', array('includerFile' => __FILE__)); 
```

`C.php`可以通过查看 $params 数组来了解它的包含器。

```
<?php
// C.php
echo $includerFile; 
```*

# java - 使用 Java Servlet 从 PostgreSQL 搜索。无法显示任何结果

> ID：10265224
> 
> 赞同：-1
> 
> 时间：2012-04-22T04:28:26.307
> 
> 标签：java, postgresql, servlets

当我按 Name 或 Latname 搜索时，它不会返回任何内容。仅在给出出生日期时才返回值。另一个问题是如果出生日期留空，我 **在“birthyear”列中得到空值违反了非空约束** 错误。

```
 import java.util.*;
    import java.sql.*;
    import java.io.*;

    import javax.servlet.RequestDispatcher;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    /**
     * Servlet implementation class searchfromdatabase
     */
    public class searchfromdatabase extends HttpServlet {
        private static final long serialVersionUID = 1L;

        /**
         * @see HttpServlet#HttpServlet()
         */
        public searchfromdatabase() {
            super();
            // TODO Auto-generated constructor stub
        }

        /**
         * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doGet(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {
            System.out.println("command: " + request.getParameter("command"));
            response.setContentType("text/html");
            java.io.PrintWriter out = response.getWriter();
            out.println("<html><head>");
            out.println("<title>Search form</title></head><body>");
            out.println("<h2>Artist details.</h2><tr>");

            // HTMl Customer Input
            out.println("<form method=\"post\" action =\""
                    + request.getContextPath() + "/searchfromdatabase\" >");

            out.println("<table border='0' width='300' align='center' bgcolor='#CDFFFF'>");
            out.println("<tr><td colspan=2 style='font-size:12pt;color:#00000;' align='center'><h3>Search Artist</h3></td></tr>");
            out.println("<tr><td ><b>Artist Name</b></td><td>: <input  type='text' name='givenname' id='givenname'></td></tr>");
            out.println("<tr><td ><b>Artist Last Name</b></td><td>: <input  type='text' name='familyname' id='familyname'></td></tr>");
            out.println("<tr><td ><b>Date of Birth</b></td><td>: <input  type='text' name='birthyear' id='birthyear'></td></tr>");
            out.println("<tr><td colspan=2 align='center'><input  type='submit' name='submit' value='Submit'></td></tr></table>");
            out.println("</form>");
            out.println("</body></html>");
        }

        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

            java.io.PrintWriter out = response.getWriter();
            Connection conn = null;{
            try {
                Class.forName("org.postgresql.Driver");
                conn = DriverManager.getConnection(
                        "jdbc:postgresql://localhost:5432/caglar", "postgres",
                        "abracadabra");
                System.out.println("Connected to the database");
            String  agent_name  = request.getParameter("givenname");
            String  agent_lastname  = request.getParameter("familyname");
            String  dob  = request.getParameter("birthyear");

            //if dob is left blank
            if (request.getParameter("birthyear").equals("")) {
                dob = null;
                // otherwise, get the exact number and define it as variable
            } else {
                dob = request.getParameter("birthyear");
            }
            //
            ArrayList al=null;
            ArrayList agent_list =new ArrayList();

            //Problem 1: If dob is not given, it is not searching by name or lastname.

            String query = "select * from agent where givenname='"+agent_name+"' or familyname='"+agent_lastname+"' or birthyear='"+dob+"' order by givenname";
            System.out.println("query" + query);
            Statement st = conn.createStatement();
            ResultSet  rs = st.executeQuery(query);

            while(rs.next())
            {
                al  = new ArrayList();

              al.add(rs.getString(1));
              al.add(rs.getString(2));
              al.add(rs.getString(3));
              al.add(rs.getString(4));
              System.out.println("al :: "+al);
              agent_list.add(al);
            }

            request.setAttribute("agentList",agent_list);

         System.out.println("agentList " + agent_list);

        //   out.println("agent_list " + agent_list);

        // HTML results
        response.setContentType("text/html");
        //java.io.PrintWriter out = response.getWriter();
        out.println("<html><head>");
        out.println("<title>Final Results</title></head><body>");
        out.println("<table width='700px' align='center'  style='border:1px solid #000000;'><tr><td colspan=8 align='center' style='background-color:ffeeff'><b>Artist Record</b></td>");
        out.println("</tr><tr style='background-color:efefef;'><td><b>Artist ID</b></td><td><b>Date of Birth</b></td><td><b>Artist First Name</b></td><td><b>Artist Last Name</b></td></tr>");

        int count=0;
        String color = "#F9EBB3";

        if(request.getAttribute("agentList")!=null)
        {
         al=(ArrayList)request.getAttribute("agentList");
            Iterator itr = al.iterator();

            while(itr.hasNext())
            {

                if((count%2)==0)
                {

                    color = "#eeffee";

                }
                else
                {
                     color = "#F9EBB3";
                }
                count++;
                ArrayList agentList = (ArrayList)itr.next();

                out.println("<tr style='background-color:"+color+";'>");
                out.println("<td>"+agentList.get(0)+"</td>");
                out.println("<td>"+agentList.get(1)+"</td>");
                out.println("<td>"+agentList.get(2)+"</td>");
                out.println("<td>"+agentList.get(3)+"</td></tr>");
            }
        }
        if(count==0)
        {
            out.println("<tr><td colspan=8 align='center' style='background-color:eeffee'><b>No Record</b></td></tr>");
        }
        conn.close();
        System.out.println("Disconnected from database");
    } catch (Exception e) {
    e.printStackTrace();
    }
            out.println("</table></body></html>");  

        }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:46:06.587

```
 String query = "select * from agent where givenname='"+agent_name+"' or familyname='"+agent_lastname+"' ";
if(dob!=null && !"".equals(dob))
  query = query + " or birthyear='"+dob+"'";

query = query+  "order by givenname"; 
```

用于构造查询的用户条件语句。

# java - java类似的功能不同的条件

> ID：10265233
> 
> 赞同：2
> 
> 时间：2012-04-22T04:30:57.147
> 
> 标签：java, conditional-statements

我有一组这样定义的函数：

```
public void foo1(int a, int b){
    if (a > b){
        c++;
    }
}

public void foo2(int a, int b){
    if (a > b && b = 7){
        c++;
    }
}

public void foo3(int a, int b){
    if (a >= b){
        c++;
    }
} 
```

仅在 a 和 b 的条件上有所不同。有没有办法将这些作为一个函数包含在内，我可以将条件设​​置为变量？或者类似的东西？

编辑：请注意这是一个简单的例子，我想知道是否可以将条件传递给函数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T04:39:29.657

对于通用解决方案，您可以定义一个接口：

```
public interface Predicate {
    public boolean eval(int a, int b);
} 
```

然后定义你的功能：

```
public void foo(Predicate predicate, int a, int b) {
    if (predicate.eval(a, b)) {
        c++;
    }
} 
```

然后你可以定义各种`Predicate`对象：

```
Predicate test1 = new Predicate() {
    @Override
    public boolean eval(int a, int b) {
        return a >= b;
    }
};
// etc. 
```

并通过适合的任何一个`foo()`。

或者，您可以查看使用[`Callable`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html)接口`Boolean`作为类型参数。（但是，它不能接受参数，因此它不完全符合您的模式。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T04:34:52.030

您可以拥有一个这样的函数，它结合了所有条件：

```
public void foo(int a, int b) {
    if (a >= b && b == 7) {
        c++;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T05:41:42.137

想到的第一个解决方案实际上是

```
public void foo(int a, int b, boolean condition){
    if (condition){
        c++;
    }
} 
```

该调用将“看起来像”传递一个条件：

```
foo( a, b, a>b );
foo( a, b, a > b && b = 7 );
foo( a, b, a>=b ); 
```

您实际上通过了条件测试的结果，但在许多情况下这已经足够了。

只是在这里添加它，因为它很简单，似乎没有其他人提到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T04:42:11.463

@Nikhar 是对的，在处理此问题时您可以做的一件事是使用 OR 运算符来解决您的困惑

```
function foo( int a, int b ) {
 if ( ( a > b ) || (a > b && b = 7) || (a >= b) ) // if any of the condition is true then
    c++;  // increment it
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T04:44:36.393

你可以有一个像

```
public interface MyCondn{
  boolean check(int a, int b);
} 
```

然后，

```
public void foo(MyCondn cond, int a, int b){

   if(cond.check(a,b))
      c++;
} 
```

您可以将条件定义为

```
public class Foo1 implements MyCondn{
   boolean check(int a, int b){
      return a > b;
   }
} 
```

进而，

```
classInsatnce.foo(new Foo1(), a,  b); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T04:56:02.487

一旦 Java 获得 lambda，将函数作为参数（在这种情况下为谓词）传递将很容易实现，直到现在它们*可以*使用非常冗长的匿名内部函数来实现。例如，您所要求的可以以一种类型安全的通用方式实现，如下所示：

```
public class Test {

    private int c = 0;

    public void foo(Predicate<Integer, Integer> pred) {
        if (pred.condition()) {
            c++;
        }
    }

    public static void main(String[] args) {

        Test t = new Test();
        int a = 10;
        int b = 7;

        t.foo(new Predicate<Integer, Integer>(a, b) {
            @Override
            public boolean condition() {
                return a > b;
            }
        });

        t.foo(new Predicate<Integer, Integer>(a, b) {
            @Override
            public boolean condition() {
                return a > b && b == 7;
            }
        });

        t.foo(new Predicate<Integer, Integer>(a, b) {
            @Override
            public boolean condition() {
                return a >= b;
            }
        });

    }

}

abstract class Predicate<S, T> {
    S a;
    T b;
    Predicate(S a, T b) {
        this.a = a;
        this.b = b;
    }
    public abstract boolean condition();
} 
```

# postgresql - 如何在 postgres 查询中排名

> ID：10265234
> 
> 赞同：29
> 
> 时间：2012-04-22T04:31:01.640
> 
> 标签：postgresql

我正在尝试对表中的数据子集进行排名，但我认为我做错了。我找不到有关 postgres 的 rank() 功能的太多信息，也许我找错了地方。无论哪种方式：

我想知道基于日期的表集群中的 id 的排名。我的查询如下：

```
select cluster_id,feed_id,pub_date,rank 
from (select feed_id,pub_date,cluster_id,rank() 
    over (order by pub_date asc) from url_info) 
as bar where cluster_id = 9876 and feed_id = 1234; 
```

我在以下stackoverflow帖子之后对此进行建模： [postgres rank](https://stackoverflow.com/questions/1466698/how-should-i-handle-ranked-x-out-of-y-data-in-postgresql)

我认为我做错了什么的原因是 url_info 中只有 39 行位于 cluster_id 9876 中，并且此查询运行了 10 分钟并且再也没有回来。（实际上重新运行了很长一段时间，它没有返回任何结果，但在集群 9876 中有一行 id 1234）我希望这会告诉我“id 1234 是给定标准的第 5 位）。它将根据我的查询约束返回相对排名，对吗？

这是 postgres 8.4 顺便说一句。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-22T09:19:53.017

通过将 rank() 函数放在子选择中，而不在 over 子句中指定 PARTITION BY 或在该子选择中指定任何谓词，您的查询要求对 pub_date 排序的整个 url_info 表产生排名。这可能就是为什么它运行这么久才能对所有 url_info 进行排序，Pg 必须按 pub_date 对整个表进行排序，如果表非常大，这将需要一段时间。

您似乎只想为 where 子句选择的记录集生成排名，在这种情况下，您需要做的就是消除子选择，并且排名函数隐含地覆盖与该谓词匹配的记录集。

```
select 
  cluster_id
 ,feed_id
 ,pub_date
 ,rank() over (order by pub_date asc) as rank
from url_info
where cluster_id = 9876 and feed_id = 1234; 
```

如果您真正想要的是集群内的排名，无论 feed_id 是什么，您都可以在子选择中对哪些过滤器对该集群进行排名：

```
select ranked.*
from (
  select 
    cluster_id
   ,feed_id
   ,pub_date
   ,rank() over (order by pub_date asc) as rank
  from url_info
  where cluster_id = 9876
) as ranked
where feed_id = 1234; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-30T20:37:24.447

分享另一个 PostgreSQL 的 DENSE_RANK() 例子。查找前 3 名学生示例查询。 [**参考来自这个博客：**](http://www.dbrnd.com/2016/11/postgresql-how-to-calculate-rank-in-a-query-dense_rank/)

**使用示例数据创建一个表：**

```
CREATE TABLE tbl_Students
(
    StudID INT
    ,StudName CHARACTER VARYING
    ,TotalMark INT
);

INSERT INTO tbl_Students 
VALUES 
(1,'Anvesh',88),(2,'Neevan',78)
,(3,'Roy',90),(4,'Mahi',88)
,(5,'Maria',81),(6,'Jenny',90); 
```

**使用 DENSE_RANK()，计算学生的 RANK：**

```
;WITH cteStud AS
(
    SELECT 
        StudName
        ,Totalmark
        ,DENSE_RANK() OVER (ORDER BY TotalMark DESC) AS StudRank
    FROM tbl_Students
)
SELECT 
    StudName
    ,Totalmark
    ,StudRank
FROM cteStud 
WHERE StudRank <= 3; 
```

**结果：**

```
studname | totalmark | studrank
----------+-----------+----------
 Roy      |        90 |        1
 Jenny    |        90 |        1
 Anvesh   |        88 |        2
 Mahi     |        88 |        2
 Maria    |        81 |        3
(5 rows) 
```

# ruby-on-rails - 建立模型关联使查询更容易

> ID：10265237
> 
> 赞同：0
> 
> 时间：2012-04-22T04:32:35.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, orm, model

我想出了一个数据库模式，但我觉得它比 Rails ORM 更受我旧 SQL 习惯的影响。这是我开发的架构。 ![在此处输入图像描述](../Images/7e0b1fab108a78970c5d132417e1a474.png)

目前，我已经为上图中的所有表制作了模型，但是，在研究了关联之后，我相信我可以使用 Rails 关联来制作一些多对多的关系表。

在我的 PlayerStats#index 中，我发现自己在做一些`<%= Year.find(TeamYear.find(TeamUser.find(player_stat.team_user_id).team_year_id).year_id).year %>`我知道不好的事情。因此，我正在寻找有关如何基于上述规范化模式构建模型关联的指导。这是我的猜测：

用户.rb has_many :team_users

Team.rb 属于_to :team_year

Year.rb 属于_to :team_year

Team_Year.rb has_many :teams has_many :years

Team_User.rb belongs_to :user belongs_to :team_year has_one :role

Game.rb has_many :team_years

Player_stats.rb 属于_to :team_user 属于_to :game

我不确定我是否走在正确的轨道上。此外，我不确定如何利用声明这些关联。我肯定想让 Team.name（给定 Player_Stat.game_id）比`Team.find(TeamYear.find(Game.find(player_stat.game_id).away_team_year_id).team_id).name`.

我是否太努力拥有一个标准化的数据库？我应该以不同的方式思考这个问题吗？我感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:01:44.390

通过关联查看 has_many。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:19:21.727

您的数据库设计很好...

考虑例如常见的一对多关系：

用户模型，以及带有用户 ID 的主题模型..

现在在 sql 术语中，您将在 Subject 中放置一个用户 ID。主题[ id, userid, 标记]

所以在主题模型中你将定义`userid belongs_to User`..

至少详细阅读[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)一次......也许在 Rails 控制台中用一张两张桌子试一试......你会很高兴......

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)也有很好而清晰的解释，其中包含标题“基数和关联”的示例......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T06:39:59.497

数据库设计似乎还可以，除了 Game-TeamYear 关系，女巫不清楚，但查询的方向不仅仅是更容易做的事情。

尝试不从顶部开始建造，而是从底部开始，在你的情况下你的查询

```
<%= Year.find(TeamYear.find(TeamUser.find(player_stat.team_user_id).team_year_id).year_id).year %> 
```

转变为

```
<%= player_stat.team_user.team_year.year %> 
```

和查询

```
Team.find(TeamYear.find(Game.find(player_stat.game_id).away_team_year_id).team_id).name 
```

转变为

```
TeamYear.find(player_stat.game.away_team_year_id).team.name 
```

所以你只是从内部查询到外部查询，希望你明白了。

# python - 在博客应用的管理空间中自动选择作者外键字段

> ID：10265238
> 
> 赞同：0
> 
> 时间：2012-04-22T04:32:54.637
> 
> 标签：python, django, blogs, admin

我创建了一个博客应用程序，其模型具有这样的作者字段：

```
author = models.ForeignKey(User) 
```

我正在尝试修改 django admin 中的默认添加视图，以使添加的帖子采用登录的名字用户。如何？这边走：

```
def formfield_for_foreignkey(self, db_field, request, **kwargs):
    if db_field.name == 'author':
        kwargs['initial'] = request.user.id
        return db_field.formfield(**kwargs)

    return super(PostAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

好吧，在添加视图中，与作者字段对应的选择输入显示用户名。我希望此选择显示 first_name + last_name 字段而不是用户名字段。最后，当我成功完成这项任务时，我想隐藏这个选择。登录的用户不得更改向博客发送条目的用户。

我已经为此工作了几个小时，但没有成功。请帮忙！

非常感谢小伙伴们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:51:24.610

使作者外键字段显示 User.first_name + User.last_name 的一种方法是为作者中的用户使用代理模型：

```
# your_app.models
from django.contrib.auth.models import User

class AuthorUser(User):
    class Meta:
        proxy = True

    def __unicode__(self):
        return '%s %s' % (self.first_name, self.last_name)

class YourModel(models.Model):
    author = models.ForeignKey(AuthorUser) 
```

要使该字段消失，您只需将其标记为 editable=False。希望对您有所帮助。

**编辑：** 在 Django 2.0 中，您需要一个[on_delete](https://docs.djangoproject.com/en/2.0/ref/models/fields/#django.db.models.ForeignKey.on_delete)参数才能使用`ForeignKey`.

```
class YourModel(models.Model):
    author = models.ForeignKey(AuthorUser, on_delete=models.CASCADE) 
```

# php - Zend 表单创建

> ID：10265240
> 
> 赞同：1
> 
> 时间：2012-04-22T04:33:11.540
> 
> 标签：php, zend-framework

我有 3 个数据库表`rooms`，例如`room_type`和`room_status`。这是表的结构

`rooms`

`room_id, room_number, room_type_id, room_status_id`

`room_type`

`room_type_id, room_type_name, room_type_desc`

`room_status`

`room_status_id, room_status_name, room_status_desc`

所以，实际上基于这个表需要创建表单来添加新房间。我已经创建了房间控制器和模型。

我的想法是根据房间表创建表单，并为 room_type 和房间状态创建另外两个控制器。之后从 room_type 和 room_status 获取数据并将其传递给房间表单，我可以使用这些数据创建选择元素。

你能建议我如何获得更好的解决方案。我不确定这是不是一个好的解决方案。

[编辑]

`$status = $this->createElement('select', 'status');

```
 $status->setLabel("Select a status:");

    $status->addMultiOption('Active', 'active');

    $status->addMultiOption('Suspended', 'suspended');

    $this->addElement($status);` 
```

正如您在此处看到的`addMultiOptionis`静态的，如何使其从数据库中动态化？我希望我能解释一下我的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:55:45.047

如果我了解您要做什么，但我不确定我是否这样做。通过表单设置类型和状态在某些情况下会起作用。
您可能想要做的第一件事是将 a 添加`room_status_id`到您的`room`表中，以便您可以跟踪当前状态。

我想象您的上下文是酒店或会议中心的类型设置。在这种情况下，房间类型可能不会经常更改，但状态可能一天会更改数次。
因此，在管理控制台之类的表单中设置房间并指定初始类型和状态，偶尔进行更改是合适的。对于日常操作，您可能希望在各种控制器操作中包含自动状态更改。

一些伪代码例如：

```
initiate room (admin): set room_type, set room_status;

reserve room: set room_status: reserved;
room in use: set room_status: in use;
room vacant: if (room != clean) {
    set room_status: not clean
} else {
    set room_status: clean
}

room being remodeled(admin)
if (room_type === change) {
  set type: new room_type;
} else {
  don't change room_type;
}
if (inRemodel === true) {
  set room_status: unavailable;
} 
```

您可能不需要用于 room_type 和 room_status 的控制器，因为此信息不太可能被更改或操纵很多。
room_type 和 room_status 似乎它们将是最初设置然后很少更改值的那种数据。如果是这种情况，模型将是访问这些值的地方，然后只需在需要的地方传递它们。

我希望我没有完全错过重点。

[编辑] 您询问如何在评论中显示 room_type 和 room_status 的名称。你会使用一个连接：

```
//make a dbTable model for each table
//in your Application_Model_DbTable_Room, built a method similar to this to join the tables
public function fetchRoomData() {
        //setIntegrityCheck to false to allow joins
        $select = $this->select(Zend_Db_Table::SELECT_WITH_FROM_PART)
                ->setIntegrityCheck(FALSE);
        //performs join aliasing table room_type to t
        $select->join(array('t' => 'room_type'), 't.room_type_id = room.room_type_id');
        ////performs join aliasing table room_status to s
        $select->join(array('s' => 'room_status'), 's.room_status_id = room.room_status_id');

        $result = $this->fetchAll($select);

        return $result;
    } 
```

[编辑] 要显示基于 db 表的选择表单元素：

```
$bidlocation = new Zend_Form_Element_Select('room_type');
        $bidlocation->setLabel('Room Type: ');

        $b = new Application_Model_DbTable_RoomType();
        $a = $b->fetchAll();

        foreach ($a as $c) {
            //applies caps to first letter of each word
            $d = ucwords($c['room_type_name']);
            $bidlocation->addMultiOption($c['room_type_id'], $d);  
        } 
```

# c# - WPF 组合框中的自动建议

> ID：10265241
> 
> 赞同：1
> 
> 时间：2012-04-22T04:33:43.817
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我的组合框从 s 存储过程中返回一组值，如下所示

```
private void BindCombo()
{
    DataCombo.FillCombo(ComboDS(2313001), cmbClass, 0);
    DataCombo.FillCombo(DDCombo(5007), cmbGroup, 0);
} 
```

我设法给出了一个基本的自动完成建议，`IsTextSearchenabled`但无法获得我想要的自动建议框。

我看过很多自动完成/提示性文本框的例子，但似乎没有一个适合我。

这段代码显然适合我。

但我将如何在这里使用自动建议

```
using System;
using System.ComponentModel;
using System.Globalization;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace DotNetZen.AutoFilteredComboBox
{
    public class AutoFilteredComboBox : ComboBox
    {
        private int silenceEvents = 0;

    /// <summary>
    /// Creates a new instance of <see cref="AutoFilteredComboBox" />.
    /// </summary>
    public AutoFilteredComboBox()
    {
        DependencyPropertyDescriptor textProperty = DependencyPropertyDescriptor.FromProperty(
            ComboBox.TextProperty, typeof(AutoFilteredComboBox));
        textProperty.AddValueChanged(this, this.OnTextChanged);

        this.RegisterIsCaseSensitiveChangeNotification();
    }

    #region IsCaseSensitive Dependency Property
    /// <summary>
    /// The <see cref="DependencyProperty"/> object of the <see cref="IsCaseSensitive" /> dependency property.
    /// </summary>
    public static readonly DependencyProperty IsCaseSensitiveProperty =
        DependencyProperty.Register("IsCaseSensitive", typeof(bool), typeof(AutoFilteredComboBox), new UIPropertyMetadata(false));

    /// <summary>
    /// Gets or sets the way the combo box treats the case sensitivity of typed text.
    /// </summary>
    /// <value>The way the combo box treats the case sensitivity of typed text.</value>
    [System.ComponentModel.Description("The way the combo box treats the case sensitivity of typed text.")]
    [System.ComponentModel.Category("AutoFiltered ComboBox")]
    [System.ComponentModel.DefaultValue(true)]
    public bool IsCaseSensitive
    {
        [System.Diagnostics.DebuggerStepThrough]
        get
        {
            return (bool)this.GetValue(IsCaseSensitiveProperty);
        }
        [System.Diagnostics.DebuggerStepThrough]
        set
        {
            this.SetValue(IsCaseSensitiveProperty, value);
        }
    }

    protected virtual void OnIsCaseSensitiveChanged(object sender, EventArgs e)
    {
        if (this.IsCaseSensitive)
            this.IsTextSearchEnabled = false;

        this.RefreshFilter();
    }

    private void RegisterIsCaseSensitiveChangeNotification()
    {
        System.ComponentModel.DependencyPropertyDescriptor.FromProperty(IsCaseSensitiveProperty, typeof(AutoFilteredComboBox)).AddValueChanged(
            this, this.OnIsCaseSensitiveChanged);
    }
    #endregion

    #region DropDownOnFocus Dependency Property
    /// <summary>
    /// The <see cref="DependencyProperty"/> object of the <see cref="DropDownOnFocus" /> dependency property.
    /// </summary>
    public static readonly DependencyProperty DropDownOnFocusProperty =
        DependencyProperty.Register("DropDownOnFocus", typeof(bool), typeof(AutoFilteredComboBox), new UIPropertyMetadata(true));

    /// <summary>
    /// Gets or sets the way the combo box behaves when it receives focus.
    /// </summary>
    /// <value>The way the combo box behaves when it receives focus.</value>
    [System.ComponentModel.Description("The way the combo box behaves when it receives focus.")]
    [System.ComponentModel.Category("AutoFiltered ComboBox")]
    [System.ComponentModel.DefaultValue(true)]
    public bool DropDownOnFocus
    {
        [System.Diagnostics.DebuggerStepThrough]
        get
        {
            return (bool)this.GetValue(DropDownOnFocusProperty);
        }
        [System.Diagnostics.DebuggerStepThrough]
        set
        {
            this.SetValue(DropDownOnFocusProperty, value);
        }
    }
    #endregion

    #region | Handle selection |
    /// <summary>
    /// Called when <see cref="ComboBox.ApplyTemplate()"/> is called.
    /// </summary>
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        this.EditableTextBox.SelectionChanged += this.EditableTextBox_SelectionChanged;
    }

    /// <summary>
    /// Gets the text box in charge of the editable portion of the combo box.
    /// </summary>
    protected TextBox EditableTextBox
    {
        get
        {
            return ((TextBox)base.GetTemplateChild("PART_EditableTextBox"));
        }
    }

    private int start = 0, length = 0;

    private void EditableTextBox_SelectionChanged(object sender, RoutedEventArgs e)
    {
        if (this.silenceEvents == 0)
        {
            this.start = ((TextBox)(e.OriginalSource)).SelectionStart;
            this.length = ((TextBox)(e.OriginalSource)).SelectionLength;

            this.RefreshFilter();
        }
    }
    #endregion

    #region | Handle focus |
    /// <summary>
    /// Invoked whenever an unhandled <see cref="UIElement.GotFocus" /> event
    /// reaches this element in its route.
    /// </summary>
    /// <param name="e">The <see cref="RoutedEventArgs" /> that contains the event data.</param>
    protected override void OnGotFocus(RoutedEventArgs e)
    {
        base.OnGotFocus(e);

        if (this.ItemsSource != null && this.DropDownOnFocus)
        {
            this.IsDropDownOpen = true;
        }
    }
    #endregion

    #region | Handle filtering |
    private void RefreshFilter()
    {
        if (this.ItemsSource != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(this.ItemsSource);
            view.Refresh();
            this.IsDropDownOpen = true;
        }
    }

    private bool FilterPredicate(object value)
    {
        // We don't like nulls.
        if (value == null)
            return false;

        // If there is no text, there's no reason to filter.
        if (this.Text.Length == 0)
            return true;

        string prefix = this.Text;

        // If the end of the text is selected, do not mind it.
        if (this.length > 0 && this.start + this.length == this.Text.Length)
        {
            prefix = prefix.Substring(0, this.start);
        }

        return value.ToString()
            .StartsWith(prefix, !this.IsCaseSensitive, CultureInfo.CurrentCulture);
    }
    #endregion

    /// <summary>
    /// Called when the source of an item in a selector changes.
    /// </summary>
    /// <param name="oldValue">Old value of the source.</param>
    /// <param name="newValue">New value of the source.</param>
    protected override void OnItemsSourceChanged(System.Collections.IEnumerable oldValue, System.Collections.IEnumerable newValue)
    {
        if (newValue != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(newValue);
            view.Filter += this.FilterPredicate;
        }

        if (oldValue != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(oldValue);
            view.Filter -= this.FilterPredicate;
        }

        base.OnItemsSourceChanged(oldValue, newValue);
    }

    private void OnTextChanged(object sender, EventArgs e)
    {
        if (!this.IsTextSearchEnabled && this.silenceEvents == 0)
        {
            this.RefreshFilter();

            // Manually simulate the automatic selection that would have been
            // available if the IsTextSearchEnabled dependency property was set.
            if (this.Text.Length > 0)
            {
                foreach (object item in CollectionViewSource.GetDefaultView(this.ItemsSource))
                {
                    int text = item.ToString().Length, prefix = this.Text.Length;
                    this.SelectedItem = item;

                    this.silenceEvents++;
                    this.EditableTextBox.Text = item.ToString();
                    this.EditableTextBox.Select(prefix, text - prefix);
                    this.silenceEvents--;
                    break;
                }
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T15:38:44.200

还发现[AutoFilteredComboBox](http://weblogs.asp.net/okloeten/archive/2007/11/12/5088649.aspx)使用起来非常简单。虽然我做了一些改变：

*   删除了 DependencyPropertyDescriptor 的使用以避免组合框对象的内存泄漏
*   引入了 FilterItem-event 和 FilterList-event 以允许自定义过滤
*   将默认过滤从以字符串开头的字符串更改为包含字符串
*   删除了对启用 IsTextSearchEnabled 的支持
*   更改搜索字符串后立即显示下拉菜单，以便显示搜索结果

如何使用它的示例：

```
<Controls:AutoFilteredComboBox ItemsSource="{Binding ViewModel.AvailableItems}"
        SelectedValue="{Binding ViewModel.SelectedItem, Mode=TwoWay}"
        IsEditable="True" IsTextSearchEnabled="False"/> 
```

AutoFilteredComboBox 的改进版本：

```
public class AutoFilteredComboBox : ComboBox
{
    bool _ignoreTextChanged;
    string _currentText;

    /// <summary>
    /// Creates a new instance of <see cref="AutoFilteredComboBox" />.
    /// </summary>
    public AutoFilteredComboBox()
    {
        if (System.ComponentModel.DesignerProperties.GetIsInDesignMode(this)) return;
    }

    public event Func<object, string, bool> FilterItem;
    public event Action<string> FilterList;

    #region IsCaseSensitive Dependency Property
    /// <summary>
    /// The <see cref="DependencyProperty"/> object of the <see cref="IsCaseSensitive" /> dependency property.
    /// </summary>
    public static readonly DependencyProperty IsCaseSensitiveProperty =
        DependencyProperty.Register("IsCaseSensitive", typeof(bool), typeof(AutoFilteredComboBox), new UIPropertyMetadata(false));

    /// <summary>
    /// Gets or sets the way the combo box treats the case sensitivity of typed text.
    /// </summary>
    /// <value>The way the combo box treats the case sensitivity of typed text.</value>
    [Description("The way the combo box treats the case sensitivity of typed text.")]
    [Category("AutoFiltered ComboBox")]
    [DefaultValue(true)]
    public bool IsCaseSensitive
    {
        [System.Diagnostics.DebuggerStepThrough]
        get
        {
            return (bool)this.GetValue(IsCaseSensitiveProperty);
        }
        [System.Diagnostics.DebuggerStepThrough]
        set
        {
            this.SetValue(IsCaseSensitiveProperty, value);
        }
    }
    #endregion

    #region DropDownOnFocus Dependency Property
    /// <summary>
    /// The <see cref="DependencyProperty"/> object of the <see cref="DropDownOnFocus" /> dependency property.
    /// </summary>
    public static readonly DependencyProperty DropDownOnFocusProperty =
        DependencyProperty.Register("DropDownOnFocus", typeof(bool), typeof(AutoFilteredComboBox), new UIPropertyMetadata(false));

    /// <summary>
    /// Gets or sets the way the combo box behaves when it receives focus.
    /// </summary>
    /// <value>The way the combo box behaves when it receives focus.</value>
    [Description("The way the combo box behaves when it receives focus.")]
    [Category("AutoFiltered ComboBox")]
    [DefaultValue(false)]
    public bool DropDownOnFocus
    {
        [System.Diagnostics.DebuggerStepThrough]
        get
        {
            return (bool)this.GetValue(DropDownOnFocusProperty);
        }
        [System.Diagnostics.DebuggerStepThrough]
        set
        {
            this.SetValue(DropDownOnFocusProperty, value);
        }
    }
    #endregion

    #region | Handle focus |
    /// <summary>
    /// Invoked whenever an unhandled <see cref="UIElement.GotFocus" /> event
    /// reaches this element in its route.
    /// </summary>
    /// <param name="e">The <see cref="RoutedEventArgs" /> that contains the event data.</param>
    protected override void OnGotFocus(RoutedEventArgs e)
    {
        base.OnGotFocus(e);

        if (this.ItemsSource != null && this.DropDownOnFocus)
        {
            this.IsDropDownOpen = true;
        }
    }
    #endregion

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        AddHandler(TextBox.TextChangedEvent, new TextChangedEventHandler(OnTextChanged));
        KeyUp += AutoFilteredComboBox_KeyUp;
        this.IsTextSearchEnabled = false;
    }

    void AutoFilteredComboBox_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Down)
        {
            if (this.IsDropDownOpen == true)
            {
                // Ensure that focus is given to the dropdown list
                if (Keyboard.FocusedElement is TextBox)
                {
                    Keyboard.Focus(this);
                    if (this.Items.Count > 0)
                    {
                        if (this.SelectedIndex == -1 || this.SelectedIndex==0)
                            this.SelectedIndex = 0;
                    }
                }
            }
        }
        if (Keyboard.FocusedElement is TextBox)
        {
            if (e.OriginalSource is TextBox)
            {
                // Avoid the automatic selection of the first letter (As next letter will cause overwrite)
                TextBox textBox = e.OriginalSource as TextBox;
                if (textBox.Text.Length == 1 && textBox.SelectionLength == 1)
                {
                    textBox.SelectionLength = 0;
                    textBox.SelectionStart = 1;
                }
            }
        }
    }

    #region | Handle filtering |
    private void RefreshFilter()
    {
        if (this.ItemsSource != null)
        {
            Action<string> filterList = FilterList;
            if (filterList != null)
            {
                filterList(_currentText);
            }
            else
            {
                ICollectionView view = CollectionViewSource.GetDefaultView(this.ItemsSource);
                view.Refresh();
            }
            this.SelectedIndex = -1;    // Prepare so arrow down selects first
            this.IsDropDownOpen = true;
        }
    }

    private bool FilterPredicate(object value)
    {
        // We don't like nulls.
        if (value == null)
            return false;

        // If there is no text, there's no reason to filter.
        if (string.IsNullOrEmpty(_currentText))
            return true;

        Func<object, string, bool> filterItem = FilterItem;
        if (filterItem != null)
            return filterItem(value, _currentText);

        if (IsCaseSensitive)
            return value.ToString().Contains(_currentText);
        else
            return value.ToString().ToUpper().Contains(_currentText.ToUpper());                
    }
    #endregion

    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        try
        {
            _ignoreTextChanged = true;  // Ignore the following TextChanged
            base.OnSelectionChanged(e);
        }
        finally
        {
            _ignoreTextChanged = false;
        }
    }

    /// <summary>
    /// Called when the source of an item in a selector changes.
    /// </summary>
    /// <param name="oldValue">Old value of the source.</param>
    /// <param name="newValue">New value of the source.</param>
    protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
    {
        if (newValue != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(newValue);
            if (FilterList == null)
                view.Filter += this.FilterPredicate;
        }

        if (oldValue != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(oldValue);
            view.Filter -= this.FilterPredicate;
        }
        base.OnItemsSourceChanged(oldValue, newValue);
    }

    private void OnTextChanged(object sender, TextChangedEventArgs e)
    {
        if (_ignoreTextChanged)
            return;

        _currentText = Text;

        if (!this.IsTextSearchEnabled)
        {
            this.RefreshFilter();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T03:42:23.620

我找到了一个超级简单的解决方法来解决我的问题。

我创建了组合框的预览文本输入事件。

然后我就写了

```
Combobox.IsDropDownOpen = true 
```

可能不是最优雅的，但在我的情况下有效

# java - 带有 ASM 的 Java 中的字节码检测系统类

> ID：10265243
> 
> 赞同：3
> 
> 时间：2012-04-22T04:33:56.397
> 
> 标签：java

我的 javaagent 通过 -javagent 运行，在我的一个类上使用对静态方法的回调来检测类。这很好用，除了系统类，例如 java/lang、java/util，它们在调用方法时抛出 ClassDefNotFounderror（使用 INVOKESTATIC）。所以看起来他们被检测了，因为方法调用被尝试了，但是我的用户类没有访问或可见性问题。我的回调类及其方法都是公开的。

我已经尝试将我的类添加到类路径中（而不是仅仅通过 -javaagent 加载），但这并没有帮助。我需要覆盖一些系统类的保护吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:01:10.363

听起来您正在明确寻找要检测的类。为什么不使用`java.lang.instrument`拦截目标 JVM 执行时正在加载的类？看这个[例子](http://www.javalobby.org/java/forums/t19309.html)

您可以粘贴您的代码或相关部分吗？

# c# - 比较日期时出现 StackOverflowException

> ID：10265245
> 
> 赞同：1
> 
> 时间：2012-04-22T04:34:13.020
> 
> 标签：c#, datetime, properties, struct, stack-overflow

我在结构中有一个 DateTime 属性字段。我正在尝试验证 inputdate 以确保输入的值不在将来。

我正在使用以下代码：

```
public struct Car
{
    public DateTime Year
    {
        get
        {
            return Year;
        }

        set
        {
            if (value > DateTime.Now)
                throw new InvalidOperationException("Date cannot be in the futrure");
            else
                Year = value;
        }
    }
} 
```

当我现在尝试运行此代码时，我不断收到 StackOverflowException 消息“无法评估表达式，因为当前线程处于堆栈溢出状态。”

关于为什么会这样或如何解决这个问题的任何想法？

-谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T04:37:01.640

它正在自行返回...尝试设置一个变量。

```
public struct Car 
{ 
    private DateTime _year;
    public DateTime Year 
    { 
        get 
        { 
            return _year; 
        } 

        set 
        { 
            if (value > DateTime.Now) 
                throw new InvalidOperationException("Date cannot be in the futrure"); 
            else 
                _year = value; 
        } 
    } 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T04:37:43.603

您正在调用一个名为 的属性`Year`，其`get`访问器调用`Year`，其`get`访问器调用`Year`... 等等，直到堆栈溢出。

您应该创建一个私有字段 ，`private DateTime _year`来存储实际值。

# java - 寻找在用户界面中重新排序图像的建议

> ID：10265247
> 
> 赞同：5
> 
> 时间：2012-04-22T04:35:07.957
> 
> 标签：java, xml, image, swing, jlist

我正在构建一个允许用户选择文件夹的应用程序，然后该应用程序收集该文件夹中的所有图像并允许用户添加标题和描述。本质上是一个生成驱动 Flash 照片库的 XML 的接口。

我现在正在寻找各种方法来为用户提供某种方式来以不同的顺序重新排列这些图像。我倾向于一些允许拖放功能的拇指窗口，但是...
1 - 我是一个完全的 Java 菜鸟，所以这超出了我今天的技能范围。虽然我愿意解决它，如果... 2 - 这是一个良好的 GUI 用户友好的方法吗？还有其他方法可以提供更好的用户体验吗？

从本质上讲，我在寻找想法，一种你见过和使用过的东西，它优雅且易于使用，提供了这个功能。

如果有可以添加的代码示例，那就完美了……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T04:42:22.777

考虑

*   使用为轻松显示图像而构建的 JList，并允许使用最少的编码实现拖放功能。
*   对于创建 XML，也许可以尝试 JAXB，尽管我认为这不仅仅是“基本”Java。

# c - 如何通过管道读取多行输入？

> ID：10265249
> 
> 赞同：2
> 
> 时间：2012-04-22T04:35:32.680
> 
> 标签：c, pipe

好的，所以我在将输入从简单的 shell 通过管道从父进程传输到已被执行到日志记录程序的子进程时遇到了问题。子进程中的程序应该将它接收到的输入打印到文件中，但我不知道如何将输入字符串传递给它，让它处理该输入字符串，然后让它等待另一个。我想我需要在孩子的某个地方调用一个读取函数，但我不知道如何实现它。

想法？

[http://pastebin.com/pmU7viNd](http://pastebin.com/pmU7viNd) （简单外壳代码中与记录器相关的部分）

[http://pastebin.com/AnkxDdUK](http://pastebin.com/AnkxDdUK) （记录器本身的代码）

# vim - 在vim中突出显示HAML内联javascript语法？

> ID：10265252
> 
> 赞同：2
> 
> 时间：2012-04-22T04:36:17.533
> 
> 标签：vim, haml, syntax-highlighting, macvim, vim-syntax-highlighting

我在我的 haml %script 标记中添加了一些 javascript 代码。但我注意到语法突出显示不适用于标记内的 javascript 代码。有什么好的插件可以解决这个问题吗？顺便说一句，我使用 mac vim。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:59:20.677

试试`:set ft=haml.javascript`。

# c# - 在构造函数之前需要“new”关键字有什么意义？

> ID：10265260
> 
> 赞同：0
> 
> 时间：2012-04-22T04:37:42.633
> 
> 标签：c#, constructor

如果那里没有代码，代码还有什么含义？对我来说似乎没有必要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:41:32.137

立即想到的事情是在请求对象的新实例和寻找与某个对象命名相同的函数之间消除歧义。

```
class Foo
{
    public Foo() {};
}

static Foo Foo()
{
    ...
}

Foo myfoo = Foo(); // what do you want? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:46:01.297

如何避免歧义？

```
public class Foo 
{
    public override string ToString()
    {
        return "I'm a Foo!";
    }
}

public class Bar
{
    public void Test()
    {
        var result = new Foo().ToString();
    }

    public int Foo()
    {
        return 1;
    }
} 
```

使用 new 关键字，结果是“I'm a Foo!”，没有它，结果是“1”。

除此之外，这里没有什么新鲜事要说：

[https://softwareengineering.stackexchange.com/questions/47678/why-do-memory-managed-languages-retain-the-new-keyword](https://softwareengineering.stackexchange.com/questions/47678/why-do-memory-managed-languages-retain-the-new-keyword)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T04:39:18.813

如果语言支持，它可能意味着静态调用运算符。这也是一种让程序员更清楚分配内存这一事实的方法。

# visual-studio-2010 - 如何在 VC++ 中扩展列表框

> ID：10265264
> 
> 赞同：2
> 
> 时间：2012-04-22T04:38:07.690
> 
> 标签：visual-studio-2010, c++-cli

我尝试通过添加几个函数来扩展列表框。我收到一个错误（错误 C2144：语法错误：'Extended_ListBox' 应该以 ':' 开头）。有人能教我如何解决吗？我去了 VC++ 说有错误的那一行，但我不知道为什么构造函数有错误。

```
 using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;
using namespace System::Collections;
using namespace System::Collections::Generic;

#include <stdio.h>
#include <stdlib.h>
#using <mscorlib.dll>

public ref class Extended_ListBox: public ListBox{  

    public Extended_ListBox(array<String ^> ^ textLineArray, int counter){
        textLineArray_store = gcnew array<String ^>(counter);
        for (int i=0; i<counter; i++){
            this->Items->Add(textLineArray[i]);
            textLineArray_store[i] = textLineArray[i];
        }
        this->FormattingEnabled = true;
        this->Size = System::Drawing::Size(380, 225);
        this->TabIndex = 0;
        this->SelectedIndexChanged += gcnew System::EventHandler(this, &Extended_ListBox::listBox1_SelectedIndexChanged);
    }
    public Extended_ListBox(){
        this->FormattingEnabled = true;
        this->Size = System::Drawing::Size(380, 225);
        this->TabIndex = 0;
        this->SelectedIndexChanged += gcnew System::EventHandler(this, &Extended_ListBox::listBox1_SelectedIndexChanged);
    }
    private: System::Void listBox1_SelectedIndexChanged(System::Object^  sender, System::EventArgs^  e) {
                 int index=this->SelectedIndex;
                 tempstring = textLineArray_store[index];
         }  

private: array<String ^> ^ textLineArray_store;
private: String ^tempstring;
public: String ^GetSelectedString(){
            return tempstring;
        }
public: void ListBox_Update(array <String ^> ^ textLineArray, int counter){
        textLineArray_store = gcnew array<String ^>(counter);
        for (int i=0; i<counter; i++){
            this->Items->Add(textLineArray[i]);
            textLineArray_store[i] = textLineArray[i];
        }
        }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:46:26.740

在 C++/CLI 中，您指定访问修饰符（公共、私有等）的方式与在 C# 或 Java 中不同。

相反，您只需写一行（注意冒号，这是必需的）：

```
public: 
```

以下所有成员都是公开的。因此，在构造函数之前插入该行，并在构造函数之前删除`public`关键字。像那样：

```
public ref class Extended_ListBox: public ListBox{  
public:
    Extended_ListBox(array<String ^> ^ textLineArray, int counter){
        // constructor code
    }

    Extended_ListBox(){
        // default constructor code
    }

    // other public members 
    // ...

private:
    // private members
    // ...
} 
```

Similar to the members below the constructors in your current example, except that you don't have to explicitly restate `public:` or `private:` if the next member has the same visibility.

# jquery - 使用元素选择器的条件格式

> ID：10265272
> 
> 赞同：0
> 
> 时间：2012-04-22T04:39:07.720
> 
> 标签：jquery

我正在尝试突出显示所有没有`href`设置的链接，或者如果它是空白的。我写了以下内容：http: [//jsfiddle.net/nSMEf/](http://jsfiddle.net/nSMEf/)

```
$(document).ready(function() {
  if ($('.green').attr("href") == "" || typeof $('.green').attr("href") === 'undefined'){
      $('.green').attr('class', 'yellow');
  }

  if ($('.blue').attr("href") == "" || typeof $('.blue').attr("href") === 'undefined'){
       $('.blue').attr('class', 'yellow');
  }
}); 
```

我注意到 if 语句似乎只适用于首先出现的链接，并且所有以下链接的样式都相同。第二个“蓝色”组与第一个相同，但顺序交换了。

我的做法显然不对。是否可以在每个元素上有条件地应用黄色类（基于 href 是否为空白）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:44:52.747

这有帮助吗

```
 $("a").each(function(){

       if(!($(this).attr("href")) || $(this).attr("href") == "") {
          $(this).addClass("yellow");
       }       
    }); 
```

更新了 jsfiddle：http: [//jsfiddle.net/nSMEf/3/](http://jsfiddle.net/nSMEf/3/)

根据评论中的建议编辑上述代码

```
 $("a").each(function(){
    var self = $(this).attr("href");
    if(!(self) || self == "") {
        $(this).addClass("yellow");
    }        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:48:20.103

嗨呀**演示** [http://jsfiddle.net/5ehtZ/](http://jsfiddle.net/5ehtZ/) || [http://jsfiddle.net/5ehtZ/2/](http://jsfiddle.net/5ehtZ/2/)

**代码**

```
$("a").each(function(){
    //do something with the element here.
    if (!($(this).attr("href")) || $(this).attr("href") == ""){
        // now blue and green diff is not needed because you append yellow if they are empty.
         $(this).attr('class', 'yellow');
    }

});
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T04:57:13.187

等等..什么？

jQuery 选择器不能完成这项工作吗？

$('.blue[href=""]').addClass('yellow');

# jquery - 将匿名函数的返回值传递给另一个函数

> ID：10265276
> 
> 赞同：0
> 
> 时间：2012-04-22T04:39:30.063
> 
> 标签：jquery

我必须将匿名函数的返回值作为参数传递给另一个函数 hello1()

```
hello1 = function(x,m) { console.log(m) };

return $(this).each(function() {
        var self = this;
        hello1(something , function(){ return(this); });
}); 
```

当我执行 console.log(m) 时，它显示 ... return(this); 而不是对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:42:53.293

m 是一个函数，所以要得到它的结果，你必须调用它。

```
hello1 = function(x,m) { console.log(m()) }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:42:36.580

为什么不能只传入“self”？

```
hello1 = function(x,m) { console.log(m) }; 

return $(this).each(function() { 
        var self = this; 
        hello1(something , self }); 
}); 
```

# php - 检查用户是否是我的 Facebook 页面的粉丝？

> ID：10265280
> 
> 赞同：0
> 
> 时间：2012-04-22T04:41:07.643
> 
> 标签：php, facebook

我曾经使用流动代码来检查用户是否是我的页面的粉丝，而他在我的 Facebook 页面上。现在我想检查用户在我的网站上时是否是我的 facebook 页面的粉丝。

```
<?php
            $signed_request = $_REQUEST["signed_request"];
            list($encoded_sig, $payload) = explode('.', $signed_request, 2);
            $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

            if (empty($data["page"]["liked"])) {
                echo "You are not a fan!";
            } else {
                echo "Welcome back fan!";
            }
    ?> 
```

我通读了 facebook 文档，但找不到合适的答案。帮助 ？我不想用 facebook 处理任何应用程序权限。我怎样才能只通过 php 来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T07:00:27.217

`page`如果访问应用程序不在页面选项卡中，您将不会获得详细信息。

[`page_fan`您可以通过对表](http://developers.facebook.com/docs/reference/fql/page_fan/)的简单 FQL 查询来实现这一点（当然要知道 Facebook 页面的 id）：

```
SELECT uid, page_id FROM page_fan WHERE uid=me() AND page_id=PAGE_ID 
```

或者通过查询 Graph API 来[`likes`连接`user`对象](http://developers.facebook.com/docs/reference/api/user/#likes)：

```
https://graph.facebook.com/me/likes/PAGE_ID 
```

这两种方式都需要`user_likes`用户授予的权限。

要为用户的朋友获取相同的详细信息，请请求`friends_likes`许可并`me/me()`用朋友 ID 替换。

**更新：（**只是为了描述您在评论中提出的问题）如果您只需要知道用户将/需要喜欢某个 URL 和/或 Facebook 页面，则由于流程的性质，
有时可能不需要要求。`user_likes`

您可以通过[订阅 ( `FB.subscribe`)](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)事件来做到`edge.create`这一点，一旦用户喜欢该页面就会触发该事件（因为不喜欢有`edge.remove`事件）。

请注意，这仅在用户之前不喜欢该内容的情况下才可靠，因为`edge.create`仅在用户操作时触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T14:13:59.977

解决该问题的更好方法是：

```
// to generate user access token after the user is logged in
$USER_ACCESS_TOKEN = $facebook->getExtendedAccessToken();

$isFan = curl("https://api.facebook.com/method/pages.isFan?format=json&access_token=" . $USER_ACCESS_TOKEN . "&page_id=" . $FACEBOOK_PAGE_ID);

        function curl($url) {

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
            $data = curl_exec($ch);
            curl_close($ch);
            return $data;
        } 
```

# google-chrome-extension - 有什么东西可以用来在 Chrome 中巧妙地可视化 JavaScript 对象吗？

> ID：10265281
> 
> 赞同：6
> 
> 时间：2012-04-22T04:41:11.323
> 
> 标签：google-chrome-extension, javascript

我是一个经验丰富的 C# 编码器，但完全是 JavaScript 新手，我现在正试图获得一个纯 JavaScript 组件，非常称职的 Kendo UI 数据源，以便与我的 C# MVC3/4 控制器很好地交谈。* 我希望能够检查某些 JavaScript 对象，以便我可以微调我的客户端模型映射代码，但是 Chrome 调试控制台中的对象视图有点混乱和低级。

是否有一个 Chrome 插件可用于在调试脚本时可视化 JavaScript 对象，如果失败了，我可以使用一个不错的对象可视化器将对象可视化输出为 HTML。然后我可以切换它是否处于活动状态，为调试会话构建可视对象图，然后再次关闭可视化器以在我的客户端脚本中进行正常操作。

** 这个问题是一个更广泛且目标不同的问题，它与我的另一个问题的目标相同，[如何在我的 MVC4 应用程序中接受来自 Kendo UI 数据源的 JSON 请求？](https://stackoverflow.com/questions/10240422/how-can-i-accept-json-requests-from-a-kendo-ui-data-source-in-my-mvc4-applicatio)然而，这个问题更针对技术，涵盖了整个客户端-服务器往返，其中这个问题只针对在客户端上可视化 JavaScript 对象。

**编辑：** 根据下面的建议，`console.log`确实为运行时检查提供了足够的输出，但控制台通常是一个繁忙的地方，我更愿意在其他地方输出一个持久的可视化，扩展对象中的所有属性，但没有“内部”，例如__id 和 __proto，如图所示。我只想看到`models`两个对象的数组，每个对象只有 Id 和 Name 属性。

![在此处输入图像描述](../Images/db60df860b12ac0981ad4e0714d89e9d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:45:57.813

我发现将对象发送到控制台比在调试器中检查它更有用。它不那么混乱，您不必在代码中搜索断点。如果您只是执行 a `console.log(object)`，然后按 F12 并选择控制台，您的对象将坐在那里准备进行检查。

**编辑**

如果你`console.log`在`models`属性上做 a ，它会像这样出现：

![Chrome 控制台，在 console.log 'ing 对象数组之后](../Images/1cacb623628d91254f5c059b766eca59.png)

或者，如果您愿意，您可以使用类似这样的方式来吐出信息，而无需单击任何箭头：

```
function logModels(models) {
    for (o in models) for (p in models[o])
            console.log(p +'\t' + models[o][p]);
} 
```

看起来像这样：

![运行自定义日志记录功能后的 Chrome 控制台](../Images/bccd7f2c3fea2b5ad6ae3a830e01caef.png)

您还可以`Logs`通过单击栏底部的相应按钮将控制台过滤为仅显示。

# android - Flashbuilder 4.5.1 从 SQLite DB 读取，无法将信息显示为文本

> ID：10265283
> 
> 赞同：0
> 
> 时间：2012-04-22T04:41:39.560
> 
> 标签：android, apache-flex, sqlite, flash-builder, data-formats

关于我：
我才刚刚开始。我知道必须有一个简单的方法来做到这一点，但一周后我仍然很难过。
它是什么：
我制作了一个应用程序来替换很长的书面程序。我想为他们正在运行的测试填充先前给出的答案的文本输入框。
问题：
我可以从数据库中获取正确的信息；但是我不能把它放在文本输入字段中。该框仅显示：[object Object]

任何帮助将不胜感激。

以下是 Settings.mxml 页面的示例代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Settings" >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:Label id="DB_Name_Label" left="10" top="10" width="150" height="50" fontSize="28"
             text="DB Name" textAlign="right" verticalAlign="middle"/>
    <s:TextInput id="DB_Name_Input" left="170" top="10" width="300" height="50" fontSize="32"/>

    <s:Label id="Test_Title" left="10" top="70" width="150" height="50" fontSize="28"
             text="Test Title" textAlign="right" verticalAlign="middle"/>
    <s:TextInput id="Test_Title_Input" left="170" top="70" width="300" height="50" fontSize="32"/>

    <s:Button id="Equipment_Button" left="10" right="10" top="130" height="50"
              label="Save, then next Page" click="EquipmentButtonClick()"/>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import spark.events.ViewNavigatorEvent;     

            protected var sqlConnection:SQLConnection;

            public function add_info_to_DB(tableName:String, valueToBeSaved:String):void
            {
                sqlConnection = new SQLConnection();
                sqlConnection.open(File.userDirectory.resolvePath(DB_Name_Input.text+".db"));
                var add2db:SQLStatement = new SQLStatement();
                add2db.sqlConnection = sqlConnection;
                add2db.text = ("CREATE TABLE IF NOT EXISTS "+tableName+" (id INTEGER PRIMARY KEY AUTOINCREMENT, answer TEXT)");
                add2db.execute();

                add2db.text = "INSERT INTO "+tableName+" (answer) VALUES (?)";
                add2db.parameters[0] = valueToBeSaved;
                add2db.execute();
            }

            [bindable] public var testdata:Object= new Object();

            protected function EquipmentButtonClick():void
            {   
                add_info_to_DB("Test_Title",Test_Title_Input.text);         
                navigator.pushView(views.ReadfromDB, testdata);
            }
        ]]>
    </fx:Script>
</s:View> 
```

这是 ReadfromDB.mxml 页面的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Reading" >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:Label id="DB_to_Read_Label" left="10" top="10" width="150" height="50" fontSize="28"
             text="DB to Read" textAlign="right" verticalAlign="middle"/>
    <s:TextInput id="DB_to_Read" left="170" top="10" width="300" height="50" fontSize="32"/>

    <s:Label id="Test_Title" left="10" top="70" width="150" height="50" fontSize="28"
             text="Test Title" textAlign="right" verticalAlign="middle"/>
    <s:TextInput id="Test_Title_Input" left="170" top="70" width="300" height="50" fontSize="32"/>

    <s:Button id="Populate_Button" left="10" right="10" top="130" height="50" label="Populate"
              click="PopulateButtonClick()"/>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import spark.events.ViewNavigatorEvent;     

            protected var sqlConnection:SQLConnection;
            public var valueToBeRead:String;

            public function get_DB_info(tableName:String):void
            {   
                sqlConnection = new SQLConnection();
                sqlConnection.open(File.userDirectory.resolvePath(DB_to_Read.text+".db"));
                var add2db:SQLStatement = new SQLStatement();
                add2db.sqlConnection = sqlConnection;
                add2db.text = ("SELECT answer FROM "+tableName+" ORDER BY id DESC LIMIT 1");
                add2db.execute();
                valueToBeRead = add2db.getResult().data.toString();//.valueOf();//.toString();
            }

            protected function PopulateButtonClick():void
            {   
                get_DB_info("Test_Title");  
                Test_Title_Input.text = valueToBeRead;
            }
        ]]>
    </fx:Script>
</s:View> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:10:26.727

当你调用`add2db.getResult()`返回对象是一个[`SQLResult`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/data/SQLResult.html). 那里有关[数据](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/data/SQLResult.html#data)属性的信息非常有用。它说 data 属性是`Array`包含`Objects`您的结果的。

在您的情况下，看起来您的 SQL 查询将准确返回 1 个数据库行，并且该行仅包含一列：`answer`

因此，您应该能够像这样填充文本输入：

```
var firstRow:Object = add2db.getResult().data[0];
valueToBeRead = firstRow["answer"];
// or, instead of storing it in a variable, just assign it to the text input right away
Test_Title_Input.text = firstRow["answer"]; 
```

# meteor - 从服务器获取值

> ID：10265291
> 
> 赞同：11
> 
> 时间：2012-04-22T04:43:03.600
> 
> 标签：meteor

假设我不希望我的客户有权访问某个集合，但我确实希望我的客户能够就该集合中的对象提出某些问题。我将如何实现这一目标？

例如，假设我想知道当前是否有用户登录。当用户第一次登录时，我`Session`在 cookie 中设置了该用户的数据库 ID。目前，应用程序说用户登录 if `!Session.equals("user_id", null)`，这当然是非常不安全的，因为现在我可以打开 firebug 并说`Session.set("user_id", "foo")`现在我已经登录了。

我不希望客户端此时可以访问用户集合。唯一可以访问此集合的客户端代码包含在一个自执行函数中以保护它（我不确定这是否是在 Meteor 中进行安全性的正确方法，所以请随意推荐一些类似的东西以及）。因此，我想调用一些服务器端代码并​​将会话中设置的 id 传递给它，并让它告诉我这是否是有效用户。

这是我希望看到的设置方式：

```
// client
function logged_in() {
  return SomeServerMethodThatValidatesUserId(Session.get("user_id"));
} 
```

`Meteor.methods`似乎不符合要求，因为`Meteor.call`执行异步回调。pub/sub 模型看起来更有希望，但从文档来看，我不太确定它是如何工作的。

似乎建议我应该`this.set`从发布处理程序中调用以便在客户端上设置一些值，但我无法弄清楚这些值在哪里可用。

或者也许 pub/sub 模型也不适合这个，我还缺少另一种方式。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T04:51:53.160

听起来您正试图限制客户端在通过身份验证之前访问数据。这是一种方法：

`Meteor.publish`首先，在服务器上编写一个接受`user_id`参数的函数。您的函数在特权服务器环境中执行您想要的任何检查，并最终返回一个光标。一个简单的例子是：

```
// define collection on both client and server
Users = new Meteor.Collection('users');

// server-side publish
Meteor.publish('my-user', function (user_id) {
  if (someServerMethodThatValidatesUserId(user_id))
    // publish a single user object to the client
    return Users.find({_id: user_id});
}); 
```

`my-user`然后在客户端，一旦你`user_id`手头有一个订阅集：

```
// client-side
Meteor.subscribe('my-user', Session.get('user_id')); 
```

现在，当且仅当有效时，您将在客户端的用户中拥有一个文档，这由在服务器上运行`user_id`的特权函数确定。`someServerMethodThatValidatesUserId`

（`this.set`如果您想手动管理发送到客户端的特定文档，而不是依赖 Mongo 查询，则可以在您的发布功能中使用。但我认为这里没有必要这样做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T11:57:27.573

这是 Meteor 进行身份验证之前的一个古老问题。TL;DR 的答案是：

```
meteor remove autopublish 
```

然后，[管理您自己的收藏、出版物和订阅](https://stackoverflow.com/questions/19826804/understanding-meteor-publish-subscribe/21853298#21853298)。

# c# - HTMLElement - 填充它并使其像键盘填充一样

> ID：10265296
> 
> 赞同：0
> 
> 时间：2012-04-22T04:44:21.230
> 
> 标签：c#, .net, browser, sendkeys

我正在用 C# .Net 2.0 编写一个自动完成刮板。我尝试了很多技巧来在特定网站上制作一个输入框以显示其自动完成建议。因为我用 HtmlElement.SetAttribute("Blah") 填充它，所以它不像我手动填充它，所以它不显示自动完成建议

1.  SendKeys 是一个非常糟糕的解决方案，因为它是不可见且糟糕的。
2.  我试过 HtmlElement.InvokeMember("WithEveryOptionPossible") 但它什么也没做。
3.  我尝试了 SendMessage PInvoke，但发现对我的 WebBrowser 没有任何影响。

是否存在向 WebBrowser 发送键或虚拟键的现有解决方案，以便我可以触发输入框的自动提示？

[编辑]

我已经能够看到通过 Wireshark 获取的内容。之前没有考虑过。我只需要将我的 WebBrowser cookie 转换并附加到 WebRequest cookie 并使用直接自动完成 URL。现在我可以在没有 Timer 和 SetAttribute 的情况下快速获得自动完成建议。（直到我被禁止。）事实上，不再需要 WebBrowser，因为只有 session-cookie 很重要，不需要 SetAttribute。我认为前一个问题可能没有解决方案。

# objective-c - 只读属性如何工作

> ID：10265297
> 
> 赞同：2
> 
> 时间：2012-04-22T04:44:28.783
> 
> 标签：objective-c, properties

我正在阅读：[http ://cocoacast.com/?q=node/103](http://cocoacast.com/?q=node/103)

我在上面的页面中遇到了这种方法：

```
-(void)foo
   {
    self->iVar = 5; //legal because we are referencing a member variable
iVar = r; // illegal because we are referencing a readonly property
     } 
```

然后我在 Xcode 中创建了一个项目。

测试0.h

```
#import <Foundation/Foundation.h>

@interface Test0 : NSObject
{
@private int iVar;
 }
 @property (readonly, assign) int iVar;
 - (void) foo;
 @end 
```

测试0.m

```
#import "Test0.h"

@implementation Test0
@synthesize iVar;

 - (void) foo
{
iVar = 5;
 }
  @end 
```

主文件

```
 #import <Foundation/Foundation.h>
  #import "Test0.h"
  int main(int argc, const char * argv[])
  {

  @autoreleasepool {
    Test0 *t1 = [[Test0 alloc] init];
    [t1 foo];
    NSLog(@"%d", t1.iVar);
    }
    return 0;
     } 
```

控制台中的结果是 5。

我的问题：

1.  上面提到的网页使用self->iVar = 5 我用过iVar = 5

它有什么区别？

1.  上面提到的网页说 iVar = r; // 非法，因为我们引用了一个只读属性

iVar = 5 （我使用过的）与 iVar = r 不同吗？怎么不违法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T04:53:11.973

> 只读属性如何工作？

编译器根本不会生成或验证 setter 的存在。它将生成 getter，并且该属性可能由 ivar 支持。同样，setter 没有在类接口中声明。

> `self->iVar = r;`
> 
> 对比
> 
> `iVar = r;`
> 
> 它有什么区别？

没有任何。它们是相同的。它们都是 ivar 的直接赋值。`this->`在添加多余的范围解析（例如）时，它类似于其他语言。

不同之处在于您尝试使用 setter*方法*（例如`self.prop = val`或`[self setProp:val];`）。在这种情况下，编译器会发出警告，运行时会抛出异常（除非您或子类自己定义了 setter）。

> 上面提到的网页说`iVar = r; // illegal because we are referencing a readonly property.`

那是错误的。*如果 ivar 存在，*则可以直接访问只读属性的 ivar 。在这种情况下，您看不到错误，因为您是直接访问 ivar，而不是使用 setter。

* * *

其他问题：

*   该文章错误地指出原子是“互斥的”。
*   该文章错误地指出原子属性保证线程安全。

# android - android使用上下文菜单删除文件

> ID：10265303
> 
> 赞同：0
> 
> 时间：2012-04-22T04:44:56.180
> 
> 标签：android, contextmenu, delete-file

我有一个 Listview 显示当前 SD 卡上的文件。长按文件时，会弹出一个上下文菜单。

我的问题是：如何将所选项目传递给上下文菜单以从列表中删除文件，是否也可以使用它从 SD 卡中删除它？我的代码如下：

```
 public class PlayListActivity extends ListActivity {
// Songs list
public ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playlist);

    ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();

    SongsManager plm = new SongsManager();
    // get all songs from sdcard
    this.songsList = plm.getPlayList();

    // looping through playlist
    for (int i = 0; i < songsList.size(); i++) {
        // creating new HashMap
        HashMap<String, String> song = songsList.get(i);

        // adding HashList to ArrayList
        songsListData.add(song);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, songsListData,
            R.layout.playlist_item, new String[] { "songTitle", "songDate" }, new int[] {
                    R.id.songTitle, R.id.songDate });

    setListAdapter(adapter);
    // setup ListView item
    ListView lv = getListView();
    registerForContextMenu(lv);
    notifyDataSetChanged();
    // listening to single listitem click
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // getting listitem index
            int songIndex = position;
            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    Bandboxstage.class);
            // Sending songIndex to PlayerActivity
            in.putExtra("songIndex", songIndex);
            setResult(100, in);
            // Closing PlayListView
            finish();
        }
    }); 
}

private void notifyDataSetChanged() {
    // TODO Auto-generated method stub

}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.context_menu, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    switch (item.getItemId()) {
    case R.id.delete: 
        Toast.makeText(this, "Delete Called.", Toast.LENGTH_SHORT).show();
        deleteFile(info.id);

        return true;
    case R.id.share:
        Toast.makeText(this, "Share Called.", Toast.LENGTH_SHORT).show();

        default:
            return super.onContextItemSelected(item);
    }
}

private void deleteFile(long id) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:57:55.217

请参阅此[链接](https://stackoverflow.com/questions/5420282/how-to-pass-variables-on-long-press-on-listview)，它在长按时通过变量。

下面是deletefile函数

file.delete() 将删除文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:13:23.353

那么你的答案就在你的实现本身中。如果您注意到，在您的`onContextItemSelected()` 中，以下语句会引入您在主列表视图中选择的项目的信息。

> AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

您可以使用 info.position 找出您的项目在列表中的位置，然后使用 songList.get(info.position) 从您的 ArrayList 中获取对象。

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    switch (item.getItemId()) {
    case R.id.delete: 
        Toast.makeText(this, "Delete Called.", Toast.LENGTH_SHORT).show();
        //Make sure songsList is a global variable so that it can be accessed here.
        HashMap<String, String> song = songsList.get(info.position);
        //Call your delete function to delete the song.

        return true;
    case R.id.share:
        Toast.makeText(this, "Share Called.", Toast.LENGTH_SHORT).show();

        default:
            return super.onContextItemSelected(item);
    }
} 
```

# java - 什么是 Java 上的隐式构造函数

> ID：10265311
> 
> 赞同：9
> 
> 时间：2012-04-22T04:46:34.317
> 
> 标签：java, c++

Java中是否必须调用基类构造函数？在 C++ 中它是可选的，所以我问这个。

当我扩展`ArrayAdapter`时，我收到此错误：`"Implicit super constructor ArrayAdapter<String>() is undefined. Must explicitly invoke another constructor"`

那么，调用基构造函数的目的是什么？当我创建对象基类构造函数将调用 & 然后它涉及派生权。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T04:51:31.750

如果您自己不调用无参数构造函数，则会隐式调用该构造函数，如果该构造函数不存在，则该构造函数无效。需要调用超构造函数的原因是超类通常具有一些在构造后期望处于的状态，其中可能包括无法在子类中设置的私有变量。如果不调用构造函数，它会使对象处于可能无效的状态，这可能会导致各种问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:53:37.183

不需要调用超类的无参数构造函数。如果你想用 args 调用构造函数，用户**super**关键字如下所示：

```
super(arg1, ...); 
```

# php - require() 和 include() 语句在条件语句中的行为是否不同？

> ID：10265314
> 
> 赞同：3
> 
> 时间：2012-04-22T04:47:22.243
> 
> 标签：php, include, require, conditional-statements

我想看看除了需要它或需要它之外是否有任何理由（因此得名）。我偶然发现了这个说法：

> 与, 不同`include()`，`require()`将始终读取目标文件，即使它所在的行从不执行。如果要有条件地包含文件，请使用`include()`. 条件语句不会影响`require()`. 但是，如果`require()`发生的行没有被执行，那么目标文件中的任何代码都不会被执行。

我解释它的方式是包含最终不会运行的内部条件，实际上不会将它包含在其中，在我看来，这对服务器来说成本更低。我只是好奇这是不是真的。我没有在手册中看到它，所以我持怀疑态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T04:52:14.550

如果您在错误语句中包含包含，它将不会被解析。要求也是如此。主要和唯一的区别是 require 将检查文件是否存在，即使它从未执行过。好吧，至少这是我的经验。

因此，两者都只会在执行后发生，但如果文件不存在，无论是否执行，require都会显示错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T05:01:07.460

不完全是如何实现的，但这应该让您了解两者之间的区别是什么：

```
function require($file) {
   if (!is_readable($file)) {
      die("can't read $file");
   }
   include($file);
} 
```

每次您告诉 PHP 包含该文件时，include 都会读取该文件。_once 变体只是跟踪包含的内容，并且只包含一次。

# mysql - 如何：从 MYSQL 文本字段中仅选择除以 | 的数字 使用正则表达式？

> ID：10265316
> 
> 赞同：0
> 
> 时间：2012-04-22T04:48:22.967
> 
> 标签：mysql, regex

我得到了表格，其中包含字段填充数字（每个 1-2 个符号）像这样（1|5|18|44|98|22），字段也只能包含一个数字（没有分隔符**|**）我该如何搜索在这个领域某些数字？例如 - 我需要选择行，只包含 5 行。还是只有 18 和 44？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:50:29.823

您可以在查询时像这样将管道添加到字段的开头和结尾。

```
SELECT * 
FROM YOUR TABLE
WHERE INSTR( CONCAT('|', field, '|'), '|1|' ) >0 
```

将返回您的行。

```
SELECT * 
FROM YOUR TABLE
WHERE INSTR( CONCAT('|', field, '|'), '|31|' ) >0 
```

不会找到，也不会返回任何行。

```
SELECT * 
FROM YOUR TABLE
WHERE (INSTR(concat('|',field,'|'), '|18|') >0 and INSTR(concat('|',field,'|'), '|44|') >0) 
```

如果 18 和 44 都在您的领域，将返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:23:03.330

试试这个：

`SELECT * FROM table WHERE field REGEXP '(^|\|)digit_you_want_add_here($|\|)'`

# java - 将 Unicode 转换为字符串

> ID：10265320
> 
> 赞同：2
> 
> 时间：2012-04-22T04:49:49.013
> 
> 标签：java, string, unicode

考虑以下 Java 代码：

```
String str = "\u8ba9\u4ed6\u51fa\u6d77\u4e86";
// ...
System.out.print(str); 
```

我想从中获取字符`str`。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:43:32.557

你可以进入java

```
char c = "\uFFFF".toCharArray()[0];
System.out.println(c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T05:49:14.703

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T06:45:38.770

more easy way

```
<!-- https://mvnrepository.com/artifact/org.apache.commons/commons-text -->
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-text</artifactId>
    <version>1.9</version>
</dependency> 
```

```
StringEscapeUtils.unescapeJava(str); 
```

# javascript - 从 JavaScript 数组中删除索引数组

> ID：10265321
> 
> 赞同：1
> 
> 时间：2012-04-22T04:49:59.480
> 
> 标签：javascript, arrays, indices

我有一个数组：

```
var arr = ['A', 'B', 'C', 'D', 'E', 'F', 'G'] 
```

我有一个要删除的索引数组：

```
var remove = [1, 3, 5] 
```

所以结果是：

```
arr ==== ['A', 'C', 'E', 'G'] 
```

我不能在循环中使用拼接来做到这一点：

```
// WRONG
for (i = 0, l = remove.length; i < l; i++) {
    arr.splice(remove[i]);
} 
```

因为每次迭代后每个元素的索引都发生了变化。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:52:20.493

```
> arr.filter(function(x,i){return remove.indexOf(i)==-1})
["A", "C", "E", "G"] 
```

为了更高效，`remove`首先转换为对象/哈希表，如下所示：

```
var removeTable = {}
remove.forEach(function(x){removeTable[x]=true})

> arr.filter(function(x,i){return removeTable[i]})
["A", "C", "E", "G"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T04:53:39.603

不要过多地改变你的想法——从最后开始。

ABCDE F..

当您删除元素 5 时，它变为..

ABCDE

然后你删除元素 3，它变成..

ABCE

这正是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T04:52:35.717

倒数：

```
// RIGHT
for (i = (remove.length-1); i >= 0; i--) {
  arr.splice(remove[i]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T04:52:40.897

从最后开始循环并首先从最高索引中删除元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T05:15:52.820

作为替代建议，您可以使用`.push()`将要保留的项目发送到第三个数组。有关基础知识，请参见[此处](http://www.w3schools.com/jsref/jsref_push.asp)。这将允许您保持原始数组完整，尽管您似乎不想/不需要这样做。

# linux - 如何计算字符串出现在只有 AWK 的文本文件中的次数？

> ID：10265327
> 
> 赞同：3
> 
> 时间：2012-04-22T04:52:03.200
> 
> 标签：linux, awk

我正在编写一个 AWK 脚本，它采用日期列表并将其格式化为更易于阅读的列表。我能够做到这一点没问题。

真正的问题是这个。显示列表后，我想显示“2010”在文本文件中出现的次数。

我该怎么做呢？我已经搜索了好几天，但我一无所获。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T05:31:18.710

```
awk -F"2010" 'NF>0 { count += NF-1 } END { print 0+count } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T05:02:44.153

```
awk '{ for (i=1;i<=NF;i++) if ( $i == "2010" ) count++ } END { print count }' myfile.txt 
```

# iphone - 将 iOS 应用安装程序 (.ipa) 转换为 .deb

> ID：10265330
> 
> 赞同：1
> 
> 时间：2012-04-22T04:52:24.013
> 
> 标签：iphone, ios, ipa, deb

是否可以将 .ipa 安装程序转换为 .deb？我的手机越狱，所有 Cydia 应用程序都使用 .deb 安装程序安装。所有使用 .ipa 安装的应用程序都被归类为“用户应用程序”，而 .deb s 位于“系统应用程序”下。由于某种原因，我的用户应用程序都不起作用，我在考虑是否可以将这些用户应用程序重新打包到 .deb 中并将它们安装为系统应用程序。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:24:42.900

我个人创建了一些脚本来为 .deb 包构建正确的包布局。但是，如果您是从头开始，您可能需要查看 Theos，这是许多越狱开发人员用来创建他们的包的工具。

[http://iphonedevwiki.net/index.php/Theos/Getting_Started](http://iphonedevwiki.net/index.php/Theos/Getting_Started)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T04:57:26.247

.deb 是一个 debian 包文件。创建它们相当容易，您只需将要安装的文件放在各自的路径上并创建适当的控制文件。

我建议你谷歌如何创建 deb 包，以及如何提取它们，然后你从设备中获取一个 deb 并提取它的文件以使用这些控制文件作为模板。

在那之后，我认为这是一个简单的终端命令（在 linux 或你的 iPhone 的 SSH 中）将你的应用程序打包到一个 deb 中。

# php - 如何在 PHP 中验证带有空格的纯字母字符串？

> ID：10265331
> 
> 赞同：5
> 
> 时间：2012-04-22T04:52:27.713
> 
> 标签：php, regex

我知道有这个函数`ctype_alpha`，尽管`FALSE`当字符串包含空格（空白字符）时这个函数会返回。

我如何允许字母字符和空格，但没有别的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T05:24:01.480

```
$is_alpha_space = ctype_alpha(str_replace(' ', '', $input))); 
```

或者

```
$is_alpha_space = preg_match('/^[a-z\s]*$/i', $input); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T04:57:31.113

```
if (preg_match("^/[a-zA-Z ]+$/", $input)) {
    // input matches
} 
```

演示： http: [//ideone.com/jp6Wi](http://ideone.com/jp6Wi)
文档： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T04:59:14.997

`ctype_alpha(preg_replace('/\s/', '', $mystring))`

内部表达式返回不带空格的字符串，然后根据需要使用 ctype_alpha``

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-10T08:25:00.503

删除空格是可行的方法，但请记住，这些天 ctype_alpha 在空字符串上会导致错误！下面我使用的方法...

```
function validateAlpha($valueToValidate, $spaceAllowed = false) {
    if ($spaceAllowed) {
        $valueToValidate = str_replace(' ', '', $valueToValidate);
    }
    if (strlen($valueToValidate) == 0) {
        return true;
    }
    return ctype_alpha($valueToValidate);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-06T01:32:01.773

我会使用简单的正则表达式和 php 函数[preg_match()](https://www.php.net/manual/en/function.preg-match.php)来解决，如下所示：

```
if(preg_match("/^[a-zA-Z ]+$/", $varToCheck)){
  //your code here
} 
```

这里的重要部分是标识你想要的部分的正则表达式，在我的例子中，我想要一个名称字段的文本，并带有空格，如这里的大小写。[az] 是从 a 到 z 的范围，AZ 是从 A 的范围到 Z 和末尾的“”代表空格。

希望这可以帮助某人。

# javascript - 带有目的地文本框的谷歌地图 API

> ID：10265337
> 
> 赞同：0
> 
> 时间：2012-04-22T04:53:34.470
> 
> 标签：javascript, html, google-maps-api-3

这是我的代码的链接：http: [//www.canning.co.nz/Mapping/Code.txt](http://www.canning.co.nz/Mapping/Code.txt)

抱歉，它是文本格式的，由于某种原因，我在将其粘贴到此论坛时遇到了一些麻烦。

它运行良好。但是，我正在寻求一些帮助来解决我遇到的问题。目前，当我点击一个按钮后，文本框会出现在起点和终点。我想让这些文本框在页面加载时全部显示，然后只需按下按钮即可显示路线。

我可以帮忙吗？或者有没有更好的例子可以让我在网上的某个地方看看？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:15:46.937

您可以调整您当前的示例以这种方式工作。首先，您需要更多的 JavaScript 函数。您可以将它们放在 direction() 函数下方。

JavaScript：

```
function searchFunc(point) { 
    if (point) {
        if (state==1) {doEnd(point)}
        if (state==0) {doStart(point)}
    } else {
        var result=geo.getCache().get(search);
        if (result) {
            var reason="Code "+result.Status.code;
            if (reasons[result.Status.code]) {
                reason = reasons[result.Status.code]
            }
        } else {
          var reason = "";
        } 
        alert('Could not find "'+search+ '" ' + reason);
    }
}

function GLoad() {          
    var search = document.getElementById("search").value,
        search2 = document.getElementById("search2").value;
    addresses[0] = search;
    addresses[4] = search2;
    geo.getLatLng(search, searchFunc);
    geo.getLatLng(search2, searchFunc);        
} 
```

接下来，您需要删除对 handleState() 的三个调用。在函数声明的正下方有一个调用。另外两个在doStart() 和doEnd() 中。您也可以删除函数本身。此功能正在执行字段和按钮的显示/隐藏。

最后，您需要更新标签以调用 GLoad()。

```
<body onload="GLoad()" onunload="GUnload()"> 
```

现在，如果您单击“获取路线”，该页面的功能应该与以前相同，除了我们已经处理了前几次按钮单击并且所有字段都保持可见。

您可能还想删除“查找起始地址”和“查找目标地址”的按钮，但我不确定。删除它们就像从 HTML 中删除按钮一样简单。

随意问任何问题。我希望这会有所帮助！

# ruby-on-rails - 使用 { render json: } 时缺少属性

> ID：10265341
> 
> 赞同：2
> 
> 时间：2012-04-22T04:54:15.860
> 
> 标签：ruby-on-rails, json, devise, render

我有一个使用设计登录的应用程序。我在 Web 应用程序中有一个登录表单，用于对数据库的用户进行身份验证，并简单地将 @user 哈希作为 json 字符串返回。

目标是让用户对用户进行身份验证并检索他们的 authentication_token 以供将来在应用程序中使用，以防止用户必须不断登录。

问题是我无法将 authentication_token 包含在返回的 json 中。

我的 user.rb 模型

```
attr_accessible :authentication_token, :email, :password, :password_confirmation, :remember_me,  :bio, :confirmed, :deposit, :email, :fri25, :mon21, :name, :paid, :picture, :sat26, :sun20, :sun27, :thur24, :tue22, :wed23 
```

清楚地包括 authentication_token 符号。

然后在会话控制器中，我有一个名为 newApi 的自定义操作，它运行一个简单的身份验证方法并以 @user 哈希作为 json 响应。

```
def newapi
 @user = User.authenticate(params[:email],params[:password])
 respond_to do |format|
   format.json { render json: @user }
 end 
```

结束

然而，无论我做什么，身份验证令牌都不包含在 json 响应中。我错过了一些明显的东西吗？为什么不包括在内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:58:54.307

Devise > 2.x 似乎从 xml 和 json 响应中去除了属性。这可能是一项安全功能，但我不确定它是从哪里引入的。“受保护的属性”列表在这里：

[https://github.com/plataformatec/devise/blob/master/lib/devise/models/authenticatable.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/models/authenticatable.rb)

第 54 行：

```
BLACKLIST_FOR_SERIALIZATION = [:encrypted_password, :reset_password_token, :reset_password_sent_at,
    :remember_created_at, :sign_in_count, :current_sign_in_at, :last_sign_in_at, :current_sign_in_ip,
    :last_sign_in_ip, :password_salt, :confirmation_token, :confirmed_at, :confirmation_sent_at,
    :remember_token, :unconfirmed_email, :failed_attempts, :unlock_token, :locked_at, :authentication_token] 
```

初始化它的代码在第 122-135 行

评论说您可以提供自己的黑名单属性列表，或分别使用`:force_except`和附加到现有列表。`:except`

我的 hacky 解决方案是这样的：

```
def newapi
  @user = User.authenticate(params[:email],params[:password])
  respond_to do |format|
    format.json { render json: @user.as_json(:force_except => Devise::Models::Authenticatable::BLACKLIST_FOR_SERIALIZATION.delete_if{|x| x == :authentication_token} }
  end
end 
```

但我认为有一种方法可以在更优雅的地方覆盖这个列表，比如在初始化程序中。我的作品，但可能不是最好的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T19:07:14.693

虽然这很旧，但我所做的只是使用它的“方法”选项

```
to_json(methods: :arbitrary_method) 
```

因为从技术上讲，所有属性都成为模型上的可访问方法。这似乎最轻松：D

在此页面上： http: [//api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:22:27.283

我的解决方法：

```
class User < ActiveRecord::Base
  # include devise token_authenticatable and others
  devise  :token_authenticatable

  # after devise finds our user (such as when logging in)
  after_find :write_auth_token

  # write our pseudo attribute to the model
  def write_auth_token
    write_attribute(:auth_token, self.authentication_token)
  end

  # make our pseudo attribute attr_accessible
  attr_accessible :auth_token
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:02:40.610

我最终通过使用[jbuilder](https://github.com/rails/jbuilder/)自己解决了这个问题。

本质上，您只需删除`render json: @user`调用并使用 jbuilder 模板。

在 newapi.json.jbuilder 中

```
json.(
  @user, 
  :authentication_token, 
  :email, 
  :password, 
  :password_confirmation, 
  :remember_me,
  :bio, 
  :confirmed, 
  :deposit, 
  :email, 
  :fri25, 
  :mon21, 
  :name, 
  :paid, 
  :picture, 
  :sat26, 
  :sun20, 
  :sun27, 
  :thur24, 
  :tue22, 
  :wed23
) 
```

如果您有这条路线，请查看他们的文档，因为它可以满足我的所有需求，而且是我们现在返回 api 的唯一方法。如果您之前没有使用过它，请检查一下！它使 API 端点非常简单。

如果您想推出自己的设置，Nick Knudson 的回答也是有效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T16:27:12.827

@Travis Todd 的回答完全可以，是的，可能有一个更优雅的解决方案。此外，如果您想为数据库迁移或其他类似目的构建私有或临时 api，而您需要 2 个或更多这些黑名单属性，您可能需要执行以下操作：

```
def newapi
  @devise_attrs = [:encrypted_password, :remember_created_at, :sign_in_count, :current_sign_in_at] #etc..
  @user = User.authenticate(params[:email],params[:password]).includes(:identity)
  respond_to do |format|
    # I added a few other options and updated ruby syntax so that you can see how can this be customized if in need of specific user attributes or relations.
    format.json { render json: @user.as_json(force_except: Devise::Models::Authenticatable::BLACKLIST_FOR_SERIALIZATION.delete_if{|x| @devise_attrs.include?(x)}, include: [:identity]), status: 200 }
  end
end 
```

仍在等待另一个舔手指的优雅解决方案。

# xcode - 归档应用在管理器中没有图标

> ID：10265345
> 
> 赞同：3
> 
> 时间：2012-04-22T04:55:08.213
> 
> 标签：xcode, icons, archive, organizer

大家好，我正要提交我的应用程序，我已将其存档，但在管理器中，应用程序图标出于某种原因显示为空白。我没有收到任何错误消息，并且我尝试使用图标制作另一个应用程序并测试它是否在管理器中是否有图标，但应用程序图标仍显示为空白。有人知道这里的问题吗？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:02:18.723

您是否已将 iTunesArtwork.png 导入到您的项目中？如果还没有，请这样做，并确保最后有 .png 扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T03:23:14.470

在我的情况下添加 iTunesWork.png 没有帮助。也许今天版本的 XCode 是 5 有不同的方法来做到这一点。

我所做的是使用 ff 值更新项目 .plist：

图标文件 (iOS 5)

*   主图标
    *   第 6 项 ---------- **MyArchiveIconHere.png**

# javascript - JS 库页面加载与主站点 JS 库页面不同

> ID：10265349
> 
> 赞同：0
> 
> 时间：2012-04-22T04:56:22.550
> 
> 标签：javascript, css, image-gallery

我的目标是在使用 Jquery 的“动画”和 JS/CSS 的网页上直接链接到照片库。有问题的页面是[witold.org](http://witold.org) （单击任一照片以转到我想直​​接链接的画廊。）

我了解到为什么由于安全问题而[无法做到这一点。](https://stackoverflow.com/questions/10167468/is-there-a-way-to-link-directly-to-specific-content-on-this-js-css-page)

因此，我在想也许我可以只用画廊脚本为每个画廊创建额外的 HTML 页面。例如，[这个页面](http://witold.org/content_work_details/id=17/africa/index_gal.html)。

但即使我使用相同的画廊脚本，链接到相同的 CSS 和相同的 JS，画廊也有很多错误。图库似乎部分加载：最初没有加载照片，但是当鼠标悬停在拇指上时它们会显示出来，当单击拇指时会显示大的 JPG。但随后一切似乎都停止了工作。我无法通过单击拇指或单击箭头来增加到下一张照片。

我错过了一些基本的部分，但不确定是什么......我想我的问题是，如果我通过主页导航到画廊，它可以工作，但是当我只将画廊代码剥离到单独的 html 页面时，代码会失败。有任何想法吗？

# android - Android sdk 中的 NotePad 示例：笔记存储在哪里？

> ID：10265350
> 
> 赞同：2
> 
> 时间：2012-04-22T04:56:31.880
> 
> 标签：android

如果我在我的手机上构建然后安装一个 NotePad 示例应用程序，然后写一个便笺（并通过退出堆栈来保存它），那么该单个便笺存储在文件系统中的什么位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:00:46.967

它存储在一个数据库中，通常这个数据库存储在/data/<应用程序的包名>/databases/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-04T04:56:38.997

它将存储在数据库中。[在此处](https://www.tutorialspoint.com/android/android_sqlite_database.htm)阅读有关 SQLite 数据库的信息：

# python - 在哪里可以找到 Python 模块 py4cs？

> ID：10265351
> 
> 赞同：0
> 
> 时间：2012-04-22T04:56:46.810
> 
> 标签：python

我需要 python 模块 py4cs，但我无法在任何地方找到它，它不在 pypi 或其他任何地方。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T14:53:54.240

它是一组用于 Python 科学编程的工具。最初，它仅在 Hans Petter Langtangen 购买这本书时以 py4cs 的形式分发。它现在被称为 scitools 并且被广泛使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:59:51.330

它与“Python Scripting for Computational Science”一书一起提供。

# android - 将 ArrayList 从 Activity 传递给 ListFragment？

> ID：10265352
> 
> 赞同：3
> 
> 时间：2012-04-22T04:56:53.657
> 
> 标签：android, android-fragments

我正在尝试实现片段布局。我有一个作为 SplashScreen 服务的活动，并从网络上获取一些数据并创建我的自定义对象的 ArrayList。

通常，如果我使用 ListView，我会执行以下操作。

```
private ArrayList<Articles> articles;

private void isComplete() {
         Intent intent = new Intent(SplashScreen.this, ListActivity.class);
         intent.putExtra("data", articles);
         startActivity(intent);
         finish();
    } 
```

如何将相同的数据传递给片段？我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T06:12:14.853

它的简单采取 Global 类并`declare public static ArrayList<Articles> articles = new ArrayList<Articles>;` 在 main Activity `Global.articles = articles`；现在您可以在 Project 中的任何位置使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T05:02:40.923

这取决于数组列表的类型

*   putIntegerArrayListExtra（字符串名称，ArrayList 值）

*   putParcelableArrayListExtra（字符串名称，ArrayList 值）

*   putStringArrayListExtra（字符串名称，ArrayList 值）

*   putCharSequenceArrayListExtra（字符串名称，ArrayList 值）

然后，您可以通过将 put 替换为 get 并将键字符串作为参数来读取您的下一个活动，例如

```
myIntent.getStringArrayListExtra("arrayPeople"); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-22T05:03:54.373

使用 putExtra 将值传递给意图。使用 getSerializableExtra 方法检索数据

如果我有两个活动 A 和 BI 想将 ArrayList> 值传递给活动 B，那么我将在 A 类中使用以下代码

**将 ArrayList> 数据从活动 A 传递到活动 B**

```
Intent intent = new Intent(this, B.class);
HashMap<String, String> hm = new HashMap<String, String>();
hm.put("sunil", "sahoo");
ArrayList<HashMap<String, String>> arl = new ArrayList<HashMap<String, String>>();
arl.add(hm);
intent.putExtra("arraylist", arl);
startActivityForResult(intent, 500); 
```

**检索活动 B 中的值**

在 B 类中，我将编写以下代码来检索数据

```
ArrayList<HashMap<String, String>> arl =(ArrayList<HashMap<String, String>>) getIntent().getSerializableExtra("arraylist");
System.out.println("...serialized data.."+arl); 
```

# javascript - 仅检查数字验证

> ID：10265359
> 
> 赞同：1
> 
> 时间：2012-04-22T04:58:09.537
> 
> 标签：javascript, jquery

以下是我的一段代码，它检查输入格式是否是来自表单输入的 EMAIL 并相应地验证我想知道如何修改以下验证输入是否仅为数字的代码

```
 if(email.length == 0 || email.indexOf('@') == '-1'){
                var error = true;
                $('#email_error').fadeIn(500);
            }else{
                $('#email_error').fadeOut(500);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:00:16.620

使用 jQuery 的 IsNumeric 方法。

[http://api.jquery.com/jQuery.isNumeric/](http://api.jquery.com/jQuery.isNumeric/)

```
$.isNumeric("-10");  // true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T05:00:26.087

```
if (email.match(/[0-9]+/)) {
   //it's all numbers
} 
```

**编辑** 如评论中所述，为确保条目是所有数字，正则表达式必须包括开始和结束字符，`^`并且`$`：

```
if (email.match(/^[0-9]+$/)) {
   //it's all numbers
} 
```

或者更简洁：

```
if (email.match(/^\d+$/)) {
   //it's all numbers
} 
```

我不应该因为这个修复而受到赞扬，但我确实想为以后可能会发现这个问题的任何人纠正它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T04:59:30.067

检查将电子邮件地址转换为数字对象是否返回“非数字”值；如果不是，则输入是一个数字。代码如下所示：

```
if(!isNaN(Number(email)) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T05:06:10.547

我会使用：

```
if(isNaN(email*1)){
    //evaluated to NaN
}else{
    //evaluated to number
} 
```

在这种情况下，`(email*1)`有可能评估为`NaN`，因此将无法通过检查，因为虚假值列表是`0,"",false,null,undefined,NaN`

# ssh - 谁应该制作 ssh 密钥对

> ID：10265363
> 
> 赞同：1
> 
> 时间：2012-04-22T04:58:55.323
> 
> 标签：ssh, key

如果想让某人通过 ssh 访问服务器，我应该创建该对并向他们发送私钥，还是应该让他们创建该对并向我发送公钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:02:05.980

绝对是第二个，他们应该生成私钥并将公钥发送给您，这样您就不会通过网络发送私钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:06:13.470

[私钥能够生成签名](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter8.html#pubkey)。使用您的私钥创建的签名不能由没有该密钥的任何人伪造，但任何拥有您的公钥的人都可以验证特定签名是真实的。这就是当前实现服务器身份验证协议的方式。服务器发送一段随机数据，然后您的客户端对其进行签名并返回给服务器。服务器使用您的公钥来验证签名。请注意，如果服务器端没有独立的方法知道您的公钥来自*您*，然后您可以使用由受信任的第三方签名的数字证书来验证公钥。大多数系统管理员在手动设置经过身份验证的登录时不会走这么远，但金融系统有时需要个人证书。搜索“PKI”。

如果服务器端生成密钥对，那么您需要一种方法将该密钥对安全地传输到经过身份验证的客户端，然后在服务器端销毁私钥。

我可以使用服务器端的私钥和客户端的公钥来设置客户端身份验证系统。身份验证协议是服务器将随机片段发送给客户端进行加密，客户端将加密片段返回给服务器。客户端必须保护公钥不被泄露，而且这只对一台服务器有好处，而当私钥在客户端时，客户端可以使用相同的公钥对多台服务器进行身份验证。

# c++ - basic_streambuf wok的函数如何溢出和下溢

> ID：10265368
> 
> 赞同：0
> 
> 时间：2012-04-22T04:59:54.327
> 
> 标签：c++, c++11

我正在阅读 C++ 11 标准。27.6.3.4.3/7 和 27.6.3.4.5/3 节描述了函数“int_type underflow();” 和“int_type 溢出（int_type c = traits::eof());”。没有例子来解释它们是如何工作的。有人可以通过示例帮助解释这些功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T05:23:10.353

基本思想非常简单。`underflow`用于输入流。当输入缓冲区中没有数据时，`underflow`调用从实际源（例如，文件或套接字）读取数据以至少部分重新填充缓冲区。

`overflow`几乎相反 - 当缓冲区已满时，`overflow`会调用将数据写入关联的文件或套接字或其他任何内容。它也被调用来在输出流被销毁之前刷新缓冲区。

# blackberry - 如何实现可点击的LabelField。

> ID：10265370
> 
> 赞同：0
> 
> 时间：2012-04-22T05:00:14.230
> 
> 标签：blackberry

我需要创建一个`LabelField`可以执行点击操作的。我已经覆盖了`navigationClick(int status, int time)`. 但是当我点击它时`LabelField`，会出现 MenuButton 弹出窗口。如何禁用它。我正在使用的代码如下：

```
LabelField pdtitem = new LabelField(pdts.getProducts_name(),LabelField.FOCUSABLE) {
    protected boolean navigationClick(int status, int time) {
        Dialog.alert("hai");
        UiApplication.getUiApplication().pushScreen(new desc());
        return super.navigationClick(status, time);
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:56:25.967

在您的 navigationClick() 方法中使用事件。

`return true`而不是`return super.navigationClick(status, time)`;

# c# - Asp.NET MVC 是 MVC 还是 MVP？

> ID：10265378
> 
> 赞同：2
> 
> 时间：2012-04-22T05:01:29.037
> 
> 标签：c#, asp.net, .net, asp.net-mvc, design-patterns

正如我一直在阅读这篇文章：[http](http://www.codeproject.com/Articles/42830/Model-View-Controller-Model-View-Presenter-and-Mod) ://www.codeproject.com/Articles/42830/Model-View-Controller-Model-View-Presenter-and-Mod，MVC是这样解释的：

![视图-模型-控制器 UML 图](../Images/0de120792f3411ff1397b97e44af76d8.png)

在此图中，View-Model 是观察者模式，其中 Model 的任何更改都会通知 View 的`Update`方法来更新 View 的状态并将其当前状态传递给这些 View。

视图和控制器之间的关系在策略模式中定义，其中视图获得具体的控制器并在控制器中运行由策略模式定义的算法。

所以控制器更新模型和模型通知视图更新它们的状态。

但是，由于某种原因，我无法将 Asp.Net MVC 的相同逻辑可视化，因为控制器可以访问模型并将这些模型传递给视图，但视图直接使用模型来获取它们的属性等来更新它们的状态，但我不能适合 Asp.Net MVC 中视图和模型之间的观察者模式。

有人可以解释一下我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T05:10:11.250

ASP.NET MVC 支持 Web 的无状态特性，因此一旦呈现视图，控制器就无法知道模型对象实例的更改。

这与 Silverlight 或 WPF 等有状态平台不同。它们是有状态的这一事实允许控制器（或者如果您使用 MVVM，则为 ViewModel）观察 UI 上发生的事情，对模型对象进行更改，然后相应地更新视图本身。

在 ASP.NET MVC 中，当数据从控制器传递到视图时，这是一次单向旅行。没有与 View.Update() 方法等效的方法；视图被渲染一次，然后就是这样。根据 Controller.AlgorithmInterface，视图也无法回调控制器。您可以使用 AJAX 回调实现类似的功能，但是您必须使用一些幕后魔术来使用状态数据重新填充控制器（例如，通过将对象 ID 从视图传递回控制器）。

# django - 由于 Django 应用程序不活动，如何强制执行自动注销？

> ID：10265379
> 
> 赞同：7
> 
> 时间：2012-04-22T05:01:30.520
> 
> 标签：django, django-sessions

在我的 Django 应用程序中，我希望用户在 30 分钟不活动后自动注销，所以我在 settings.py 中使用了这个设置：

```
SESSION_COOKIE_AGE = 1800 
```

但是，无论活动如何，使用此设置都会在 30 分钟内将用户注销。由于 Django 应用程序不活动，如何强制执行自动注销？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-14T12:57:36.650

作为此主题的更新。Django 现在有了[SESSION_SAVE_EVERY_REQUEST](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SESSION_SAVE_EVERY_REQUEST)设置，这使它更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T08:18:39.493

[django-session-security](http://django-session-security.rtfd.org)根据服务器端和 javascript 事件（例如 mousemove、keypress 等等）记录用户活动……此外，它会在会话到期之前警告用户，并尝试**不**使会话到期（如果有活动可能来自另一个浏览器选项卡？）。

只需安装并设置`settings.SESSION_SECURITY_EXPIRE_AFTER=1800`. 你也可以设置`settings.SESSION_SECURITY_WARN_AFTER=1740`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T05:12:09.853

You could update the session of an user when he accesses your site. For example in a middleware, this force session to be set again.

```
class ActivateUser(object):
    def process_request(self, request):
        if request.user.is_authenticated():
            request.session.modified = True 
```

# java - 模式中的规范等价

> ID：10265380
> 
> 赞同：6
> 
> 时间：2012-04-22T05:01:47.413
> 
> 标签：java, pattern-matching

我指的是此处列出的测试工具[http://docs.oracle.com/javase/tutorial/essential/regex/test_harness.html](http://docs.oracle.com/javase/tutorial/essential/regex/test_harness.html)

我对该类所做的唯一更改是该模式的创建方式如下：

```
Pattern pattern = 
        Pattern.compile(console.readLine("%nEnter your regex(Pattern.CANON_EQ set): "),Pattern.CANON_EQ); 
```

[正如http://docs.oracle.com/javase/tutorial/essential/regex/pattern.html](http://docs.oracle.com/javase/tutorial/essential/regex/pattern.html)上的教程所建议的，我将模式或正则表达式作为`a\u030A`和字符串作为匹配，`\u00E5`但它以未找到匹配结束。我看到两个琴弦都是一个小盒子'a'，顶部有一个环。

我没有正确理解用例吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T05:22:14.237

`Pattern.CANON_EQ`您看到的行为与标志无关。

从控制台读取的输入与 Java 字符串文字不同。当用户（可能是您，测试此标志）`\u00E5`在控制台中键入时，读取的结果字符串`console.readLine`等同于`"\\u00E5"`，而不是“å”。自己看：http: [//ideone.com/lF7D1](http://ideone.com/lF7D1)

至于`Pattern.CANON_EQ`，它的行为与描述的完全一样：

```
Pattern withCE = Pattern.compile("^a\u030A$",Pattern.CANON_EQ);
Pattern withoutCE = Pattern.compile("^a\u030A$");
String input = "\u00E5";

System.out.println("Matches with canon eq: "
    + withCE.matcher(input).matches()); // true
System.out.println("Matches without canon eq: "
    + withoutCE.matcher(input).matches()); // false 
```

[http://ideone.com/nEV1V](http://ideone.com/nEV1V)

# android - launching a new emulator for each project I am running

> ID：10265390
> 
> 赞同：0
> 
> 时间：2012-04-22T05:04:02.293
> 
> 标签：android, android-emulator

When I run a project it will launching a new emulator for each project.. I cant work all project in same emulator.. How could I solve the problem??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:35:53.467

尝试这样做：- 当您在 Eclipse 中运行按钮时，单击向下按钮并选择运行配置，在目标选择手册中。然后它总是会询问您要在哪个模拟器/设备上运行您的应用程序，您可以选择一个您想要的。对于后续应用程序，您可以选择当前在线的模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T08:01:41.137

确保在单击运行按钮之前启动了模拟器。有时这会成为产生此问题的原因。

# iphone - 在 iOS 中切换视图控制器的最佳方法

> ID：10265392
> 
> 赞同：13
> 
> 时间：2012-04-22T05:05:06.653
> 
> 标签：iphone, objective-c, ios, ipad

我的项目中有 2 个视图控制器。在 View Controller1 内部，我想通过按下按钮切换到 View Controller 2。目前我这样做

```
- (IBAction)startController2:(id)sender {

viewController1 vc2 = [[viewController2 alloc] init];
self.view = vc2.view;
} 
```

这似乎工作正常，但按钮按下和第二个视图控制器出现之间有很大的延迟（4 秒）。如果我直接从 AppDelegate 调用 viewController2，加载速度会更快。我在这里做错了什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-22T05:43:40.140

有几件事要考虑。

## 第 1 部分：“我在这里做错了什么”？

1.  你绝对不是故意的`self.view = vc2.view`。您只需让一个视图控制器负责另一个视图控制器的视图。你可能想说的是`[self.view addSubview:vc2.view]`。仅此一项就可以解决您的问题，**但是**...

2.  实际上不要使用该解决方案。尽管它几乎直接来自[一些流行的 iPhone 编程书籍](https://rads.stackoverflow.com/amzn/click/com/143023024X)中的示例，但这是一个坏主意。阅读[“滥用 UIViewControllers”](http://blog.carbonfive.com/2011/03/09/abusing-uiviewcontrollers/)以了解原因。

## 第 2 部分：你应该做什么

这一切都在[“从其他视图控制器呈现视图控制器”](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/PresentingaViewController.html)一章中。

它会归结为：

*   [一个 UINavigationController，（请参阅此处](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html#//apple_ref/doc/uid/TP40011313-CH2-SW1)的优秀 Apple 指南），然后您只需`[navigationController pushViewController:vc2]`

*   [正如andoabhay 所建议](https://stackoverflow.com/a/10265432/768176)的那样，模态视图控制器的“手动管理”堆栈

*   [正如杰森建议](https://stackoverflow.com/a/10265430/768176)的那样，明确地将一个 VC 添加为另一个的子级

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T05:13:48.813

您应该考虑使用`UINavigationController`来切换视图控制器。如果您的构建目标是 iOS 5.0+，您还可以使用新的控制器容器概念：`[mainViewController addChildViewController:childViewController]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T05:13:56.130

使用`presentModalViewController`如下

```
[self presentModalViewController:vc2 animated:YES completion:^(void){}]; 
```

并且在`viewController1`使用中

```
[self dismissModalViewControllerAnimated:YES completion:^(void){}]; 
```

您想在哪里回到以前的控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-12T03:20:14.003

```
[aController presentViewController:bController animated:NO completion:nil];
[bController presentViewController:cController animated:NO completion:nil]; 
```

当你想关闭 cController 时，你可以这样做

```
[aController dismissViewControllerAnimated:NO completion:nil]; 
```

这是流程图。

```
aController → bController → cController
    ↑___________________________↓ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-12T08:01:15.040

您应该使用 UINavigationController 来切换视图控制器。

您在 View1 上并在按钮单击方法上添加以下代码。

`View2 *View2Controller = [[View2 alloc] initWithNibName:@"View2" bundle:nil]; [self.navigationController pushViewController:view2Controller animated:YES];`

# android - How can I use the private class in android os?

> ID：10265394
> 
> 赞同：-1
> 
> 时间：2012-04-22T05:05:12.373
> 
> 标签：android, calendar, private-class

I have just downloaded the source code of Google calendar.But in the project,some private classes,such as `android.provider.Calendar`, are included.How can I import such classes?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:18:42.977

> 我怎样才能导入这样的类？

**你没有。**这就是它们的意义所在`private`：它们不是供您使用的。

以其他方式解决您的问题。

# jvm - Will the Hotspot VM inline functions as necessary?

> ID：10265395
> 
> 赞同：1
> 
> 时间：2012-04-22T05:05:52.683
> 
> 标签：jvm

I am converting some C++ code to Java and I was wondering what I can do about the inlined functions. Can I assume that functions will be inlined by the VM (as an when necessary) and just not worry about this? How do I profile to observe this behaviour? Suppose there is a main outer function, and I throw a for loop around it and cause a million invocations. Should I expect to see an improvements as the VM inlines more and more?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T05:09:04.977

Yes Java does inline method calls. The inlining is performed by the JIT compiler, so you won't see it by examining the bytecode files.

Whether inlining actually occurs for a given method call will depend on the size of the method body, and whether the call is inlineable. (If a method call involves dispatching ... after the JVM has a bunch of global optimization designed to remove unnecessary dispatching ... then it cannot be inlined.)

The same applies to your example with your outer main function. It depends on how big the method body is. On the other hand, if the method takes a significant time to execute, then the relative importance of the optimization decreases correspondingly.

* * *

My advice is to not worry about things like this at this stage. Just write the code clearly and simply, and let the JIT compiler deal with the problem of optimizing. When your application is working, you can profile it and see if there are any "hot spots" in the code that are worthwhile optimizing by hand.

* * *

> But I should be able to see this in something like Visual VM right? I mean initially no inlining, then more and more stuff is inlined so the average time for the outer method is slightly reduced.

It may be observable and it may not, depending on the amount time spent in making the calls relative to executing the method bodies. (Profiling often relies on sampling the program counter. The reported times may be inaccurate if the number of samples for a given region of code is too small ... and for other reasons.)

It also depends on the JVM you are using. Not all JVMs will re-optimize code that they have previously optimized.

Finally, there is a way to get the JVM to dump the native code output by the JIT compiler. That will give you a definitive answer as to what has been inlined ... if you are prepared to read the machine instructions.

# objective-c - cocoa:How to make the icon has been relying on the right?

> ID：10265396
> 
> 赞同：0
> 
> 时间：2012-04-22T05:06:02.323
> 
> 标签：objective-c, macos, cocoa

this window status bar.How to make the icon has been relying on the right ? Resize the window , it automatically to the right .

![enter image description here](../Images/a6acd8284d655e7b85e99ebe6c204424.png)

```
-(void)composeInterface{
    NSView *themeFrame=[[self.window contentView] superview];
    NSRect themeFrameRect = [themeFrame frame];
    NSRect accessoryViewFrame =[self.statusBarBtn frame];
    NSRect newFrame = NSMakeRect(30,
                                 themeFrameRect.size.height - accessoryViewFrame.size.height,
                                 accessoryViewFrame.size.width,
                                 accessoryViewFrame.size.height);

    [self.statusBarBtn setFrame:newFrame];
//    [self.statusBarBtn setFrameOrigin:NSMakePoint(0, 0)];
//    [self.statusBarBtn setAutoresizingMask:323];

    [themeFrame addSubview:self.statusBarBtn];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:22:21.760

如果您希望您的图标右对齐，您需要更改它的*自动调整大小*以右对齐。***您需要在Size Inspector***中这样做：

![尺寸检查器](../Images/4170f2871ef8009454beaf0574555a25.png)

或者`-setAutoresizingMask`像这样使用：

```
[self.statusBarBtn setAutoresizingMask:333]; //NOT 323 
```

此外，您`newFrame`的 'sx 位置设置为 30，因此图标将位于左侧。

**改变这个：**

```
NSRect newFrame = NSMakeRect(30,
                             themeFrameRect.size.height - accessoryViewFrame.size.height,
                             accessoryViewFrame.size.width,
                             accessoryViewFrame.size.height); 
```

**对此：**

```
NSRect newFrame = NSMakeRect(themeFrameRect.size.width - accessoryViewFrame.size.width,
                             themeFrameRect.size.height - accessoryViewFrame.size.height,
                             accessoryViewFrame.size.width,
                             accessoryViewFrame.size.height); 
```

# database-design - 存在哪些机制来确保 Web 应用程序用户数据的隐私？

> ID：10265398
> 
> 赞同：1
> 
> 时间：2012-04-22T05:06:14.717
> 
> 标签：database-design, privacy

存在哪些机制（如果有）来保护 Web 应用程序的用户隐私和数据？我问是因为我想自己创建一个，并且想知道是否有任何方法可以保证我的用户的隐私，超出我的承诺，我不会在数据库中查看。我想大公司有复杂的程序和锁定数据的方法，但是一个人或一家小型初创公司是如何做到的呢？

我打算使用 Google App Engine。我提到它以防万一可以提供解决方案。

澄清一下，我对我可以用来保护数据免受第三方访问的安全措施的要求较少，而更多关于我可以用来保证用户对我自己/其他服务器管理员的隐私的措施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:17:32.023

据我所见，主要是通过使用法律服务条款，用户与服务或公司签订具有法律约束力的协议，以设置他们将使用和不使用其数据的方式。

另一件事是，对于某些事情，如信用卡处理等，存在使用标准，例如拥有一个可以审计访问的系统（即，它跟踪对文件的每次访问、修改以及是谁做的）。此外，敏感/机密数据通常保存在与公共服务器不同的服务器上，这样来自外部的人就不会直接接触服务器，而必须通过中间服务器。此外，从物理上讲，大多数服务器机房都处于锁定状态。许多地方都有一个键盘，可以记录进入房间的密码。

此外，请确保加密敏感/私人数据。您可以设置一个系统，其中使用基于用户密码或其他东西的哈希值的盐字符串加密私人数据（当然，如果他们更改了密码，则需要您解密并重新加密他们的数据）。这样，即使您随便查看数据库也不会看到他们的数据。现在，这仅适用于数据存储情况，因为很多时候他们会为您提供信息，以便您可以使用它。不过，密码应该总是被散列。永远不要把它们放在明文中。

商业系统上的信用卡号码是使用经常更改的盐字符串进行哈希处理的。该字符串只是存储在某处的同一台服务器上（至少它在我见过的系统上......其他较大的商业系统可能更好地保护它），但对服务器的访问非常有限。需要知道信用卡信息的程序可以向该服务器进行身份验证，服务器将使用其哈希字符串来解密这些数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:04:38.273

有两种基本工具：加密和散列。

Encryptiong 有两种形式： 对称，其中相同的密钥用于加密和解密。

PKI，你有两个密钥，你用一个加密的东西可以用另一个解密，反之亦然。

散列将一些数据转换为或多或少唯一的数字或字符串，而没有可行的返回方式。

根据您实际想要保护的内容，您可以使用这些工具来获得几乎任何您需要的东西。

示例：密码存储为哈希值。要检查密码，请再次将其转换并与哈希值进行比较 => 作为应用程序提供的您没有密码。

您让应用程序为每个用户创建一个密钥，并使用该密钥对您想要保护的所有内容进行加密。挑战在于，现在用户必须将该密钥保密并受到保护，而这是用户不太擅长的。同样搜索这种加密数据肯定会很慢。

私有数据的最大风险可能是针对您的应用程序的黑客攻击。花一些时间在[OWASP](https://www.owasp.org/index.php/Main_Page)上了解最重要的攻击以及如何对抗它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T05:19:41.167

1) 始终使用 https 发送/接收任何机密数据，

2）始终将密码存储为散列（从不明文），

3) 永远不要相信并始终仔细验证您的输入

4) 始终对您的网页进行编码以防止[跨站点脚本](http://www.cgisecurity.com/xss-faq.html)和[SQL 注入](http://msdn.microsoft.com/en-us/library/ms161953.aspx)。

并发布明确的“保密政策”。这是一个例子：

*   [http://www.promoteitplease.com.au/legal-notices/privacy-policy.html](http://www.promoteitplease.com.au/legal-notices/privacy-policy.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T07:40:17.340

我能想到四种技术。

1.  使用一些像 rot13 这样的简单函数加密数据。这可以防止意外读取机密数据，但仅此而已。

2.  加密敏感数据。将数据和加密密钥分开 - 如果可以的话，安排它，以便使用密钥管理服务器的人与使用数据管理服务器的人不同。

3.  仅限需要的人访问敏感信息。将数据分割成单独的分区，并使不同的分区可供各方访问。例如，您可以将一个人的病史存储在一个数据库中，其中不存储他们的实际姓名，但记录由某个标识符标识，而实际姓名则存储在另一个具有相同标识符的数据库中。一个人需要访问这两个数据库才能将历史与人联系起来。当然，这两个部分都需要在某个时候结合起来，并且需要有人管理发生这种情况的系统。

4.  （这是通常的公司策略）通过政策和合同加强对客户信息的保护。让员工了解机密信息的价值以及不保护它的后果。您可以让员工因违反公司政策而承担法律责任。我不是律师。

# android - simple android activity sending sms error "Conversion to Dalvik format failed with error 1"

> ID：10265399
> 
> 赞同：0
> 
> 时间：2012-04-22T05:06:27.440
> 
> 标签：android, sms

Iv'e been working with some code that will send a sms message and when i run it i get an error:

[2012-04-22 01:01:00 - SMS_Experiment] Dx 1 error; aborting [2012-04-22 01:01:00 - SMS_Experiment] Conversion to Dalvik format failed with error 1

```
 import android.app.Activity;
  import android.content.Intent;
  import android.net.Uri;
  import android.os.Bundle;
  import android.view.View;
   import android.view.View.OnClickListener;
   import android.widget.Button;
   import android.widget.Toast;

   public class SMS_ExperimentActivity extends Activity {

Button buttonSend;

@Override
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        buttonSend = (Button) findViewById(R.id.buttonSend);
       final String phoneNumber="**********";
       buttonSend.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
               try {
                 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("sms:"+ phoneNumber + "?body=Hello%20WORLD" )));

            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                    "SMS faild, please try again later!",
                    Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }
        }
      });
       }
       } 
```

and the main.xml looks like:

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/buttonSend"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Send" />

  </LinearLayout> 
```

any help would be greatly appreciated!

![enter image description here](../Images/6d340956696106235bee05f38c59bf3f.png)

![enter image description here](../Images/868566a49e7f3508988140e027741212.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:04:33.530

试试修改后的代码:::

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class SMS_ExperimentActivity extends Activity {
    @overide
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nameoflayout);
        buttonSend = (Button) findViewById(R.id.buttonSend);
       final String phoneNumber="**********";
       buttonSend.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
               try {
                 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("sms:"+ phoneNumber)));

            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                    "SMS faild, please try again later!",
                    Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }
        }
      });
       }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:16:44.117

请在外部 Jar 上查看此线程“ [Conversion to Dalvik format failed with error 1 ”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

此处的更多信息：[转换为 dalvik 格式的原因失败，错误 1](http://bimbim.in/post/2010/09/24/Reason-of-Conversion-to-dalvik-format-failed-with-error-1.aspx)

# java - Java - how do you search through an array of strings to remove all the quotation marks?

> ID：10265400
> 
> 赞同：1
> 
> 时间：2012-04-22T05:07:17.410
> 
> 标签：java, string, quotations

Let's say, for example, I have an array of 5 elements, each of them being a string. One of the strings, however, has quotation marks around it, which I would like to remove automatically. Is there a function for doing this easily?

*remove the quotation marks, that is. Not the entire string from the array

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T05:09:21.653

Remove all quotes from a string:

```
String input = "foo \"bar\" baz";
String output = input.replace("\"", ""); 
```

[http://ideone.com/RFZZq](http://ideone.com/RFZZq)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T05:15:52.633

因为`String`将在数组中，所以您必须遍历整个数组，并且对于每个元素，检查是否找到引号。如果被发现，将通过使用`String's` `replace`方法将其删除。下面的例子：

```
String[] myArray = {"This", "may", "have", "a", "\"Quotation\"", "In", "It"};
for (int i = 0; i < myArray.length; i++) {
  if (myArray[i].contains("\"")) {
      myArray[i] = myArray[i].replace("\"", "");
  }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-22T05:39:54.400

上面提到的方法很好，但你也可以通过这段代码做到这一点

```
 String s1 = "bhb/vgvg/vvv";
      String fr[] = s1.split("/");

      for (String string : fr) 
      {
        System.out.print(string);
      } 
```

它还将删除字符串中的所有引号

# objective-c - 对于一个IOS应用，在MainView.m中添加initWithCoder后，视图不会在drawRect之前清除它的内容，为什么？

> ID：10265401
> 
> 赞同：0
> 
> 时间：2012-04-22T05:07:40.330
> 
> 标签：objective-c, ios, uiview

真的很奇怪，对于一个单视图应用程序，我添加了一个`MainView`类并`ViewController.xib`使用自定义类`MainView`，并在 中捕获`touchesMoved`事件`ViewController.m`，并记录点（位置）。

然后在`drawRect`里面`MainView.m`，我画了点。所以当程序运行时，我看到的只是屏幕上的一个点，绘制到我手指移动到的位置......

但是，一旦我添加`initWithCoder`到`MainView.m`，行为就完全不同了。似乎视图在绘制点之前不会清除其内容，并且之前绘制的所有点都保留在屏幕上，但屏幕闪烁很多（我正在使用带有新 GPU 的新 iPad）......似乎在那里是几个“缓冲区”，一些具有不同的旧点集，另一个缓冲区具有不同的旧点集......当我的手指离开屏幕时，它可能是其中一个缓冲区（具有不同点集的随机缓冲区） . （还有一件事：屏幕的背景变成了全黑。之前，它是灰色或任何颜色的 Interface Builder 将视图设置为）。为什么添加`initWithCoder`如下会产生这样的效果？

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self) {

    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:14:27.037

你的`initWithCoder:`方法不对。您必须调用`[super initWithCoder:aDecoder]`，而不是普通的 old `[super init]`，否则来自 xib 文件的所有信息（包括重绘选项和背景颜色）都会丢失 - 该`aDecoder`对象包含所有这些信息，而您正在丢弃它。

# c++ - opencv中跳跃的视频处理

> ID：10265402
> 
> 赞同：0
> 
> 时间：2012-04-22T05:07:45.680
> 
> 标签：c++, opencv, computer-vision, video-processing

嘿嘿！

我有一堆从旧 vhs 磁带转换而来的旧视频文件。问题是，由于这些磁带真的很旧，视频很跳跃（有时帧的底部在屏幕的中间，然后是下一帧的顶部）

我的目标是在 opencv 中写一些东西来自动删除图像没有正确排列的帧。

我的想法是检测前一帧和下一帧之间的差异。如果视频流畅，则差异将很小。如果帧跳动，那么差异会很明显。

我的问题：opencv 如何计算两帧之间的差异？

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:44:13.780

我希望你知道如何从视频中抓取帧。如果没有，[请查看此处](http://opencv.itseez.com/doc/tutorials/highgui/video-input-psnr-ssim/video-input-psnr-ssim.html#videoinputpsnrmssim)。幸运的是，它还发现了两个视频之间的相似性。

`What you will learn in this tutorial`：

*   `How to open and read video streams`

*   `Two ways for checking image similarity: PSNR and SSIM`

我认为您可以根据自己的要求对其进行小幅调整。本教程包含有关它的所有足够信息。

您还可以查看此 SOF：[Simple and fast method to compare images forsimilarity](https://stackoverflow.com/questions/4196453/simple-and-fast-method-to-compare-images-for-similarity)

# javascript - How to find out if Google Plus One button is pressed

> ID：10265403
> 
> 赞同：0
> 
> 时间：2012-04-22T05:07:50.237
> 
> 标签：javascript, google-plus-one

I have a web site that displays a table of contents, and I'd like to use the Google Plus One button as a kind of persistent "favourite" marker. So a user would Plus One a page, and then in my table of contents I would show that page as being "Plus Oned" somehow (either bold the entry, show a plus image or something similar).

So is there any way to call the Plus One api to find out if a URL has been "Plus Oned" by the current user?

Note that I don't want to get the plus one count (as shown at [http://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/](http://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/)) and I don't want to have to manually intercept plus one clicks and store the details myself.

[http://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/](http://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/) may do what I want. The isSetByViewer parameter that is returned is possibly what I want, but simply calling the web service as described in the web page always returns a isSetByViewer value of false. I would assume that some other undocumented data or cookie/header information would have to be sent to the web service identify the current user.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T23:22:45.333

隐藏 API 中有一个`pos.plusones.getSignupState`，您可以尝试用它来代替`pos.plusones.get`. 除此之外，我认为您应该在 userID 参数中指定 G+ 用户 ID。

此外，您可以尝试使用 wireshark、webkit 检查器和 chrome://net-internals 嗅探 +1 按钮的网络流量（观察到 client6.google.com 的 SPDY 流量）。或者，您可以尝试使用 step 调试 js 代码以查找使 +1 按钮突出显示的变量。

# python - “python -v”输出太长

> ID：10265409
> 
> 赞同：4
> 
> 时间：2012-04-22T05:09:15.537
> 
> 标签：python

我刚刚在我的笔记本电脑上安装了 Ubuntu，我`python -v`在终端中输入查看是否安装了 Python。它确实已安装，但在详细说明我已安装的版本之前（例如`Python 2.7.2+ (default, Oct 4 2011, 20:03:08)`，有大量的输出，例如：

```
# installing zipimport hook
import zipimport # builtin
import errno # builtin 
```

如果我没记错的话，这种东西通常不会从`python -v`. 此外，当我使用 CTRL + D 退出解释器时，我得到一系列输出，如下所示：

```
# cleanup[2] warnings
# clear sys.path_hooks 
```

有人可以解释这里发生了什么，如果有问题我该如何解决？谢谢。此外，如果这实际上是输出并且我的记忆是错误的，那就太好了！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T05:11:38.860

您需要使用大写的 V 作为版本。该`-v`标志表示“详细”，并将显示其所有导入搜索活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T06:29:20.473

“ **-v”**附件让您看到，当您在控制台上启动“Python”时会发生什么。就像启动 Linux 操作系统一样。同样，当您退出 python 时，它会显示在 Python 关闭之前在内部完成的所有操作。很酷。

[我在这里](https://askubuntu.com/questions/799035/used-python-v-instead-of-python-version-command-to-find-the-version-of-python)找到了更好的答案

# c++ - GNU GCC 编译器优化和调试

> ID：10265411
> 
> 赞同：2
> 
> 时间：2012-04-22T05:09:22.560
> 
> 标签：c++, eclipse, debugging, optimization, gnu

我有一个关于 Eclipse CDT 和 GNU GCC 编译器的简单问题。

应用程序编译在

*   调试模式，即优化 = 无（-O0），调试 = 最大值（-g3），与编译的应用程序相比
*   优化模式，即优化 = 最大值（-O3），调试 = 无。

除了性能差异之外，是否保证以这两种模式编译的应用程序产生**完全相同**的结果？

我即将向最终用户发布该应用程序，该应用程序是基于服务器的，它处理多个多播数据馈送。任何人都可以就我应该为最终版本选择哪种编译模式向最终用户提供一些建议。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T05:27:09.740

只有当您的代码完全符合标准时，才能保证您的程序会产生相同的结果。有很多方法可以编写具有“未定义行为”的代码，这些代码实际上适用于未优化的构建，但在优化时可能会中断。

例如，假设我有：

```
struct A
{
   int i;
};

struct B
{
   int i;
};

int main()
{
    A a;
    a.i = 10;
    B* b = reinterpret_cast<B*>(&a);
    std::cout << b->i << std::endl;
    return 0;
} 
```

这几乎肯定会打印出 10，但是由于[严格的别名规则，编译器可以合法地生成执行其他操作的代码](https://stackoverflow.com/q/98650/1030301)

# php - Infinite Scroll JQuery / PHP (Loading page issue )

> ID：10265420
> 
> 赞同：0
> 
> 时间：2012-04-22T05:11:40.023
> 
> 标签：php, mysql, jquery, jquery-masonry

How can i load pages dynamically in case of an infinite Scroll.

The issue is that i have to manually create the php files. The Script searches for 2.php and then 3.php and then 4.php so on... I don't want to create these pages manually , i want it to be automatic ? :)

Some how i feel i have to create some type of loop to get the new images. Currently my code is as

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <title>Adi</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Adi</title>

<link rel="stylesheet" type="text/css" href="style.css" />

<script src="jquery-1.7.1.min.js"></script>
<script src="jquery.masonry.min.js"></script>
<script src="jquery.infinitescroll.min.js"></script>
<script src="modernizr-transitions.js"></script>
</head>

<body>
<div id="container" class="transitions-enabled infinite-scroll clearfix">
<?php
// Make a MySQL Connection
mysql_connect("localhost", "ID", "Pass") or die(mysql_error());
mysql_select_db("DB") or die(mysql_error());

// Retrieve all the data from the "test " table
$result = mysql_query("SELECT * FROM test limit 10")
or die(mysql_error());  

// store the records of the "TABLENAME" table into $row array and loop through
while ( $row = mysql_fetch_array( $result, MYSQL_ASSOC ) ) {

// Print out the contents of the entry 

//echo "details: ".$row['id'];
echo '<div class="box">';
echo "<img src=\"images/".$row['image']."\" alt=\"name\" />";
echo '</div>';
}
?>
</div>
<p>Hi</p>
<p>&nbsp;</p>

<nav id="page-nav">
  <a href="2.php"></a>
</nav>

<script >
  $(function(){
    var $container = $('#container');

    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.box',
        columnWidth: 60
      });
    });

    $container.infinitescroll({
      navSelector  : '#page-nav',    // selector for the paged navigation 
      nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
      itemSelector : '.box',     // selector for all items you'll retrieve
      loading: {
          finishedMsg: 'No more pages to load.',
          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },
      // trigger Masonry as a callback
      function( newElements ) {
        // hide new items while they are loading
        var $newElems = $( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true ); 
        });
      }
    );

  });
</script>
</body>
</html> 
```

Page 2.php

```
<?php
    // Make a MySQL Connection
    mysql_connect("localhost", "ID", "Pass") or die(mysql_error());
    mysql_select_db("DB") or die(mysql_error());

    // Retrieve all the data from the "test " table
    $result = mysql_query("SELECT * FROM test limit 5")
    or die(mysql_error());  

    // store the records of the "TABLENAME" table into $row array and loop through
    while ( $row = mysql_fetch_array( $result, MYSQL_ASSOC ) ) {

    // Print out the contents of the entry 

    //echo "details: ".$row['id'];
    echo '<div class="box">';
    echo "<img src=\"images/".$row['image']."\" alt=\"name\" />";
    echo '</div>';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:47:08.693

制作一个带有类似参数的页面，`view.php?start=100&end=150`并更改您的查询以反映：

`SELECT * FROM test LIMIT <escaped and sanitized "start">, <difference between "start" and "end">`

start 和 end 之间的差异也可能是传递的某个值，以反映在每个页面上显示多少元素。

然后，您可以使用 JQuery 来感知页面底部何时在用户的视口中可见，并且您可以使用 AJAX 请求服务器为您提供下一组图像。

所以，顺序是这样的：

*   用户加载页面 ( `view.php`)。您的脚本返回页面的完整 HTML、元素 0-10 或其他内容
*   用户滚动到页面底部。您的 JQuery 看到这种情况并说`$.post('view.php?ajax=true', { start: end+1, end: end+11 }, someFunctionThatResetsEndToReflectTheNewEndAndUpdateThePage );`
*   您的脚本发现它是一个 AJAX 请求（注意：ajax=true）并返回 XML 或 JSON 以及需要显示的数据。您也可以只制作一个单独的脚本来执行此操作。
*   您的 javascript 函数（上面的名字很长）处理数据并将其处理成用户可以理解的内容

# image - Algorithm for change specific color of when rendering

> ID：10265423
> 
> 赞同：0
> 
> 时间：2012-04-22T05:12:09.267
> 
> 标签：image, algorithm, fonts, colors, textures

Given that I have a texture file generated from a font bitmap builder like this:

![enter image description here](../Images/e13a11a64d541b60270a39217eb325c1.png)

Now I load it into my program. Then, I want to write my text with different colors rather than black such as blue, pink, ... from that original texture file.

What trick or algorithm should I use?

Any one can help me, please

Thank you very much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:17:16.447

如果您可以访问具有透明度的白色版本，则可以使用硬件顶点混合来获得所需的任何颜色，但正如我所说，文本必须是白色的。在软件循环中执行它是可能的，但只能使用蛮力。即使您使用库，它也只会扫描每个像素，转换它，然后重新编写它......这很慢。所以使用硬件顶点着色。

# c - 从 libssh2 获取未定义的引用

> ID：10265431
> 
> 赞同：1
> 
> 时间：2012-04-22T05:13:49.163
> 
> 标签：c, ubuntu, ssh, libssh2

我在我的 Ubuntu linux 上安装了 libssh2 库。编译 C 代码时，我收到此消息：

**对“libssh2_session_init_ex”的未定义引用**

我从他们的网站下载了 libssh2。我按照如何在我的计算机上安装它的说明进行操作，但似乎我仍然缺少一些东西。

这是我的make文件中的代码：

```
all: ssh
     ssh: mysshpass.c
     gcc -lssh2 -g -o mysshpass mysshpass.c

clean:
     rm -rf mysshpass 
```

C 代码的包含部分：

```
1 #include <stdlib.h>
2 #include <libssh2.h>
3 #include <libssh2_sftp.h>
4 
5 #include <sys/socket.h>
6 #include <netinet/in.h>
7 #include <arpa/inet.h>
8 #include <sys/types.h>
9 #include <stdio.h>
10 #include <string.h>
11 
12 //#include <libssh2_config.h>
13 
14 int main(int argc, char *argv[]) 
```

首先十分感谢

笔记 ：

我使用了这条新线：

```
all: ssh

ssh: mysshpass.c
    gcc -g -Lusr/src/libssh2-1.4.1/include -o mysshpass mysshpass.c
clean:
    rm -rf mysshpass 
```

但仍然存在相同的编译错误。顺便说一句，我被告知还要安装 libssh2-devel，但我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:14:18.993

1）*卸载*你所拥有的。出了点问题，它的存在只会使事情变得混乱。摆脱它。

2) *install" libssh2-dev 像这样：

```
sudo apt-get install libssh2-dev libssh2 
```

3) 再次尝试构建您的应用程序。

确保您的 makefile 或构建脚本指向正确的位置（“-I”用于编译时标头，“-L”用于链接时库）

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:38:00.143

我想你想要：

```
gcc -g \
-I /usr/src/libssh2-1.4.1/include \
-L /usr/src/libssh2-1.4.1/ \
-l ssh2 \
-o mysshpass mysshpass.c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T02:25:45.703

你可以把 -lssh 放在最后。利用：

```
gcc a.c -lssh 
```

# asp.net - asp.net 应用程序中的后台线程

> ID：10265433
> 
> 赞同：0
> 
> 时间：2012-04-22T05:14:58.797
> 
> 标签：asp.net, multithreading, global-asax, application-start, application-end

我在 global.asax 中的 Application_Start() 中运行一个后台线程，以像 Windows 服务一样使用它，但是当我的网站中的所有会话结束时 applicaton_end 会触发

我有一个与 web 服务一起工作的短信业务，我想在我的服务器中有一个代理来检查传入的消息，比如 windows 服务

我将会话超时增加到 10 小时但是当我关闭浏览器应用程序结束时触发并且我的线程停止工作

我无法更改服务器属性

我可以禁用 application_end 以使线程继续工作吗？

由于英语写作不佳，我向你道歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:31:42.837

您应该制作一个作为服务运行的单独程序或批处理程序来执行此操作。尽管 ASP.NET 在页面加载之间保留静态变量等，但您不应该使用它在后台运行事物。无法保证事情会继续运行。

如果您需要在服务器上发生某些事情时在用户端发生某些事情（例如收到消息（例如在 facebook 上）、有人响应请求或引发其他事件），您需要在 javascript 上实现一个轮询系统用户看到的网页使用 AJAX（查找它......这是一个非常棒的概念）定期与服务器交谈以查看是否发生了任何事情。这就是 Facebook 聊天与大多数网络邮件系统一起检查新消息的方式。服务器不与浏览器对话......浏览器询问服务器是否发生了任何事情。

下面是一个使用 AJAX 的聊天程序示例：[http ://www.dynamicajax.com/fr/JSON_AJAX_Web_Chat-.html](http://www.dynamicajax.com/fr/JSON_AJAX_Web_Chat-.html)

这并不完全是您正在做的事情，但它演示了在页面加载后尝试检查某些内容并使用户的浏览器响应的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:54:45.527

可以使用 .NET 版本的quartz-scheduler 库（http://quartz-scheduler.org/）来根据配置（cron 表达式）定义和触发作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T04:24:13.787

当网站中没有打开会话时，iis 会自动关闭网站应用程序以禁用此功能，您可以更改 iis 中的空闲时间或读取 global.asax (application_end) 函数中的网站链接以启动新会话

# php - 代码点火器会话问题

> ID：10265439
> 
> 赞同：1
> 
> 时间：2012-04-22T05:16:11.097
> 
> 标签：php, codeigniter

> **可能重复：**
> [Codeigniter 会话不会取消设置](https://stackoverflow.com/questions/7866332/codeigniter-session-will-not-unset)

我正在使用codeignitor。我的代码似乎不错。但问题有时是 $this->session->unset_userdata('user'); 似乎工作，有时不工作。

这是我的控制器功能

> ```
> function logout()
>   {
> 
>           $this->session->unset_userdata('user');
>           //I have also tried $this->session->sess_destroy();
>           redirect('home','refresh');
>   } 
> ```

# ruby-on-rails - 触摸 CRUD 上的所有关联模型

> ID：10265442
> 
> 赞同：0
> 
> 时间：2012-04-22T05:16:55.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 2 级嵌套模型：

```
country <- state <- city 
```

目前，在每个控制器中，在所有 CRUD 操作后，我都会找到它的父模型并`.touch`为每个模型运行。例如：

```
# cities_controller.rb
def update
  @state = State.find(params[:state_id])
  @country = Country.find(@state.id)
  ...
  @state.touch
  @country.touch
end 
```

对于 , 中的每个操作`state`，`city`只要 CRUD 成功完成，我就会触摸其父级（及其父级的父级）。

有没有 DRYer 方法可以做到这一点？我知道`autosave`选项，但它只适用于新创建的关联记录。我还想包括已销毁、更新的记录。如果一个`city`被改变了，它`state`也`country`将被加上时间戳以反映某些东西已经改变了。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:06:29.567

`touch`如果我是你，我更喜欢在这个模型中重写函数。

```
class State < ActiveRecord:Base
  def touch
    self.updated_at = Time.now
    self.state.touch
  end
end

class City < ActiveRecord:Base
  def touch
    self.updated_at = Time.now
    self.state.touch
  end
end 
```

# xml - 自动关闭 xml 标签

> ID：10265446
> 
> 赞同：0
> 
> 时间：2012-04-22T05:17:45.660
> 
> 标签：xml, eclipse, aptana, aptana3

在我的 Eclipse 3.7.2 中使用 Aptana-plugin 3.1.1 编辑 xml 文件时，它不会自动关闭 xml 标记。当我输入完开始标签时，它曾经自动插入一个结束 xml-tag。

我想我已经勾选了相关选项：XML -> XML 文件 -> 编辑器 -> 键入：插入匹配的结束标记。

我真的很喜欢 XML 编辑器的这个特性，但是几个月前它停止工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:25:04.423

我刚刚尝试了安装 Eclipse 3.7.0，它对我有用。通过右键单击 Package Explorer 中的 XML 文件并选择 Open With-->XML Editor，确保您正在使用 XML 编辑器打开文件。

# actionscript-3 - 这些应用程序使用什么 gui 框架？

> ID：10265452
> 
> 赞同：0
> 
> 时间：2012-04-22T05:19:03.600
> 
> 标签：actionscript-3, apache-flex, mdi

请查看这些链接（应用程序）

[http://pixlr.com/editor/](http://pixlr.com/editor/)

[http://www.sumopaint.com/app/](http://www.sumopaint.com/app/)

我正在研究几乎类似的应用程序（范围小，针对利基市场）。我目前正在使用弹性。主要用于 GUI（桌面应用程序）

我的问题是

这些应用程序是否使用 flex GUI 或 flash 默认 GUI 或其他一些 gui 框架，如 baseUI (http://www.soundstep.com/blog/downloads/baseui/)

当我将我的应用程序修改为第二个版本时，当前限制之一是单个文档。以上两个链接都很好地管理了 MDI。另外，我正在尝试实现类似和更统一的外观。任何想法都将一如既往地受到赞赏。干杯

# vhdl - 用户约束文件实际上是如何工作的？

> ID：10265454
> 
> 赞同：2
> 
> 时间：2012-04-22T05:19:41.960
> 
> 标签：vhdl, fpga, xilinx

我让 WebPack 再次在我的机器上运行，在综合了一个简单的设计并将其上传到我的 FPGA 之后，我的理解遇到了很大的问题。

当用户约束文件中有这样一行时：

```
NET "W1A<0>" LOC = "P18" ; 
```

综合软件如何确定 VHDL 代码如何分配此引脚？

例如，以我提供的这个示例代码为例：

```
entity Webpack_Quickstart is
Port (
W1A : out  STD_LOGIC_VECTOR(15 downto 0);
rx : in STD_LOGIC;
tx : inout STD_LOGIC;
clk : in STD_LOGIC
);
end Webpack_Quickstart;

architecture Behavioral of Webpack_Quickstart is
signal counter : STD_LOGIC_VECTOR(47 downto 0) := (others => '0');
begin
    W1A(0) <= '1';
end; 
```

这段代码究竟是如何使`WIA0`我的 FPGA 上的引脚打开的？链接是什么？只是实体声明中的端口名称是否涉及更多魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T09:14:10.303

您的`.ucf`约束应用于实施阶段。至此，您的设计已经合成，可用的顶层网络因此是“已知的”。所以是的，这只是将同名网络匹配到同名约束的问题。

虽然语法略有不同（例如使用`<>`而不是`()`索引向量），但除此之外它只是一个简单的字符串匹配。

初始配置管脚约束的最简单方法，尤其是对于大型设计，仅使用一种图形工具（PlanAhead，如果它包含在 WebPack 中）来分配管脚，并生成初始 .ucf 文件。我发现稍后直接使用标准 ISE 文本编辑器手动进行小改动是最容易的。

# c# - Task.WaitAll() 和顺序执行 Task.Wait 之间的性能差距问题

> ID：10265455
> 
> 赞同：0
> 
> 时间：2012-04-22T05:19:43.507
> 
> 标签：c#, multithreading, asynchronous, concurrency, task

我想在一些同步代码中添加并发，发现过程中存在性能问题，很难理解。

下面代码的运行结果是：

```
Mission Fibonacci1Async cost 9.4195388 seconds, value 75025
Mission Fibonacci2Async cost 0.2260129 seconds, value 75025 
```

唯一不同的是第二个函数添加了一行**await Task.WhenAll(new Task[] { t1, t2 });** ，使性能提升40倍。

谁能给我解释一下？

```
 static Task<int> Fibonacci1Async(int n)
    {
        return Task.Run<int>(() => Fibonacci1(n));
    }

    static int Fibonacci1(int n)
    {
        if (n == 0) return 0;
        else if (n == 1) return 1;
        else
        {
            var t1 = Fibonacci1Async(n - 1);
            var t2 = Fibonacci1Async(n - 2);
            return t1.Result + t2.Result;
        }
    }

    static Task<int> Fibonacci2Async(int n)
    {
        return Task.Run<int>(() => Fibonacci2(n));
    }

    static int Fibonacci2(int n)
    {
        if (n == 0) return 0;
        else if (n == 1) return 1;
        else
        {
            var t1 = Fibonacci2Async(n - 1);
            var t2 = Fibonacci2Async(n - 2);

            Task.WaitAll(new Task[] { t1, t2 });
            return t1.Result + t2.Result;
        }
    }

    static void Benchmark(Func<int, Task<int>> func)
    {
        DateTime time = DateTime.Now;
        var task = func(25);
        task.Wait();
        TimeSpan cost = DateTime.Now - time;
        Console.WriteLine("Mission {0} cost {1} seconds value {2}", func.Method.Name, cost.TotalSeconds, task.Result);
    }

    static void Main(string[] args)
    {
        Benchmark(Fibonacci1Async);
        Benchmark(Fibonacci2Async);
        Console.ReadKey();
        return;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:20:18.967

我怀疑答案与[`Task.Wait`内联](http://blogs.msdn.com/b/pfxteam/archive/2009/10/15/9907713.aspx)有关。

在表达式`t1.Result + t2.Result`中，`+`运算符从左到右（连续地）评估其参数。所以它会阻塞`t1`然后打开`t2`。

我猜在您的系统上，大部分时间`t1`已经开始但不是`t2`。在这种情况下，`Task.WaitAll`可以“内联”`t2`到当前线程池任务而不是启动一个新任务，但`+`会阻塞在`t1`.

这只是一个猜测；您应该使用分析器来准确了解发生了什么。

我无法在我的系统上重现它。我总是看到两个版本大致相同，即使对进程应用了处理器亲和性。

PS 命名约定`Async`在这里并不真正适用。此代码未使用`async`/ `await`- 它使用的是任务并行库。

# javascript - Socket.io 与clients.length 的困境（其中clients === io.sockets.clients();）

> ID：10265460
> 
> 赞同：1
> 
> 时间：2012-04-22T05:22:40.943
> 
> 标签：javascript, node.js, socket.io

通常，当我从一个客户端向另一个客户端发送一些 JSON 时，它工作正常。但是如果只有一个客户端，它仍然会发送数据包。我的解决方案是（在服务器端，在 node.js 中）：

```
var clients = io.sockets.clients();

if(clients.length > 1){
// send stuff to other client
} 
```

但是当我这样做时，会发生一些非常奇怪的事情。我将打开一个客户端，在 if 语句期间开始执行操作，而在发送 JSON 之前打印 JSON 的控制台什么也不做，因为只有一个客户端。当我打开另一个客户端并在 if 语句期间发起操作时，控制台将打印出 JSON 并将其发送到我的另一个客户端。但是，如果我转到我打开的第一个客户端并在 if 语句中发起操作，控制台将不会打印任何内容，也不会发送任何内容。为什么？我尝试将 if 语句更改为：

```
if("hello" === "hello"){
// do the same stuff as before
} 
```

并且两个客户端都可以相互发送 JSON，但是因为我更改了 if 语句，所以在打开一个客户端的情况下，我仍然会发送无用的数据包。出于显而易见的原因，最佳情况是它不会与一个客户端发送数据包，但会与多个客户端正确发送数据包。

我希望这很清楚，如果不是，我很抱歉。

如果需要，我会发布更多代码。

**编辑**：

这是更新数组的代码：

```
var clients = io.sockets.clients();

io.sockets.on("connection", function (socket) {
clients.length++;
socket.on("disconnect", function() {
clients.length--;
console.log(clients.length + " clients are connected");
});
console.log(clients.length + " clients are connected");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:06:59.477

我不确定您的代码是如何工作的（这是什么：`clients.length++`？？数组长度的增量？？）但尝试以“正常”方式执行此操作：

```
var clients;

io.sockets.on("connection", function (socket) {
  clients = io.sockets.clients();
  socket.on("disconnect", function() {
      clients = io.sockets.clients();
      console.log(clients.length + " clients are connected");
  });
  console.log(clients.length + " clients are connected");
}); 
```

甚至更好（不保持对连接用户的全局引用）：

```
function get_clients() {
  var clients = io.sockets.clients();
  console.log(clients.length + " clients are connected");
}

io.sockets.on("connection", function (socket) {
  socket.on("disconnect", function() {
    get_clients();
  });
  get_clients();
}); 
```

因为`io.sockets.clients()`在调用它的那一刻返回所有连接的客户端的数组（也许这就是你得到这种奇怪行为的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:11:03.370

最近没有做任何note.js，也许这是假的。但我想：也许客户端变量是在每个客户端连接时为他定义的，以后不会更新。这对我来说似乎是合乎逻辑的事情。我认为您需要做的是：当新客户端连接时向所有客户端触发事件，并更新“客户端”变量。

# javascript - 从输入文本框中获取值

> ID：10265469
> 
> 赞同：0
> 
> 时间：2012-04-22T05:25:13.507
> 
> 标签：javascript, jquery, input, textarea

好的。所以我有这个代码

```
<input id="suspect" value="" type="text">
<input id="reason" value="" type="text">
<textarea></textarea>
var suspect = $('input#suspect').text();
var reason = $('input#reason').text();
$('textarea').val('' + suspect + ' and ' + reason + '') 
```

然后我在这两个输入中都放了一些东西，然后 textarea 从输入中没有收到任何值。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:30:47.403

因为当您设置变量时，您尝试从中恢复输入文本的元素内没有文本（顺便说一句，对于您正在寻找的输入`.val()`）。如果您绑定到`focus`事件：

```
$('textarea').focus(
    function(){
        var suspect = $('#suspect').val(),
            reason = $('#reason').val();
        $(this).val('' + suspect + ' and ' + reason + '');
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pg85w/)。

此外，在这种情况下（因为您已将 JavaScript 放在DOM 中的元素*之后*，尽管您省略了`<script></script>`标签）您可能不使用`$(document).ready()`事件处理程序，但我通常建议将 jQuery 包装在这样的地方，只是确保事件在它们被绑定*到*的元素存在于 DOM*之后被绑定。*

 *参考：

*   [`focus()`](http://api.jquery.com/focus/).
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T05:31:57.103

*   `.text()`-- 获取元素内的文本
*   `.val()`-- 获取元素的***值***

由于文本存储在 中`value`，因此您应该使用`.val()`而不是`.text()`.

```
var suspect = $('input#suspect').val(),
    reason = $('input#reason').val();
$("textarea").val(suspect+" and "+reason); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T05:34:40.560

如果您想即时更改，请尝试键盘事件

```
$(window).keyup(function() {
var suspect = $('input#suspect').val();
var reason = $('input#reason').val();
$('textarea').val('' + suspect + ' and ' + reason + '');
}); 
```

见这里：http: [//jsfiddle.net/TtAVS/](http://jsfiddle.net/TtAVS/)

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T05:28:25.927

应该用来[`.val()`](http://api.jquery.com/val/)从输入框中获取值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T05:28:43.017

您可能想在`val()`此处使用而不是`text()`，并且还需要某种事件（例如单击），该事件会导致从输入中提取数据并将其放入 textarea。

还可能值得注意的是，由于 id 是唯一的，

```
var suspect = $('#suspect').val();
var reason = $('#reason').val(); 
```

作为选择器就足够了，而且（我发现）更容易阅读。*

# php - 从mysql数据库中的php搜索只显示一页

> ID：10265472
> 
> 赞同：1
> 
> 时间：2012-04-22T05:25:47.140
> 
> 标签：php, mysql

以下脚本仅显示第一页，并且存在指向下一页的链接，但没有引导到任何地方。有人能帮我吗？

```
$var = @$_GET['q'] ;
$trimmed = trim($var);
$limit = 10;

if ($trimmed == "")
{
    echo "<p>What are you looking for?...</p>";
    exit;
}

if (!isset($var)) 
{   
    echo "<p>We dont seem to have a search parameter!</p>";
    exit;
}

mysql_connect('xxx', 'yyy', 'zzz');
mysql_select_db('yyy') or die('Unable to select database');
$query = "select * from table  where NAME like '%$trimmed%' order by NAME";
$numresults = mysql_query($query);
$numrows = mysql_num_rows($numresults);

if ($numrows == 0)
{
    echo "<h4>Results</h4>";
    echo "<p>Sorry, your search: &quot;" . $trimmed . "&quot; returned zero results</p>";
    echo "<p><a href=\"http://www.google.com/search?q="
    . $trimmed . "\" target=\"_blank\" title=\"Look up
    " . $trimmed . " on Google\">Click here</a> to try the search on google</p>";
}

if (empty($s)) 
{
    $s = 0;
}

$query .= " limit $s,$limit";
$result = mysql_query($query) or die("Couldn't execute query");
echo "<p>You searched for: &quot;" . $var . "&quot;</p>";
echo "Results";
$count = 1 + $s;

while ($row= mysql_fetch_array($result)) 
{
    $title = $row["NAME"];
    echo "$count.-&nbsp;$title" ;
    $count++ ;
}

$currPage = (($s/$limit) + 1);
echo "<br />";

if ($s >= 1) 
{ 
    // bypass PREV link if s is 0
    $prevs = ($s - $limit);
    print "&nbsp;<a href=\"$PHP_SELF?s=$prevs&q=$var\">&lt;&lt;
    Prev 10</a>&nbsp;";
}

$pages = intval($numrows/$limit);

if ($numrows % $limit) 
{
    $pages++;
}  

if (!((($s+$limit)/$limit) == $pages) && $pages != 1) 
{
    $news = $s + $limit;
    print "<a href=\"$PHP_SELF?s=$news&q=$var\">Next 10 &gt;&gt;</a>";
} 

$a = $s + ($limit);

if ($a > $numrows) 
{ 
    $a = $numrows; 
}

$b = $s + 1;
echo "<p>Showing results $b to $a of $numrows</p>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:36:14.763

在您的代码中，`$s`每次重新加载页面或单击下一页链接时都会重置。您应该`$s = $_REQUEST['s']`在代码的开头有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:33:11.280

`PHP_SELF`是一个`$_SERVER`变量。无论如何，你应该`$_SERVER['SCRIPT_NAME']`在这里使用。

```
echo "<a href=\"{$_SERVER['SCRIPT_NAME']}?s=$news&q=$var\">Next 10 &gt;&gt;</a>"; 
```

在一些显着的改进中，您应该真正考虑清理您放入查询字符串中的变量`urlencode()`。

# joomla - Joomla：如何更改默认日期选择器？

> ID：10265474
> 
> 赞同：0
> 
> 时间：2012-04-22T05:26:44.490
> 
> 标签：joomla, datepicker

目前 Joomla 使用 mootools datepicker 作为默认 datepicker，但我的客户不喜欢它并要求我将其更改为另一组。

但是我在管理员工具中找不到任何设置来更改它..还是我忽略了它？

任何人都知道这是否可以通过设置来完成，或者我需要在 Joomla 后端更改编码来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:42:50.500

它不在管理员或参数中更改。如果要修改组件使用的日历类型，则必须重新编码。

调用日历的函数在 com_fabrik/views/form/form.js 中，它调用处理对象实例化并包含核心日历函数的 libs/jscalendar/calendar.js。

用 jQuery UI 的日历（我个人的最爱之一）之类的东西来替换它需要时间，而且可能不值得。（此时告诉“客户”这将花费大量资金，他们会改变态度）

如果他们只是不喜欢它的外观，请尝试修改 .css 文件 libs/jscalendar/calendar-system.js

# html - html5 画布 - 多个绘图实例

> ID：10265476
> 
> 赞同：0
> 
> 时间：2012-04-22T05:26:47.713
> 
> 标签：html, canvas

当试图在画布上运行多幅绘图时，我注意到如果时间错误，事情可能会变得一团糟。

即让画布通过间隔画出一条线；然后多次复制该（画线）并将每个人的笔触颜色设置为不同......最后，你会得到其他线条的笔触颜色等等......

有没有办法让多个绘图实例（context.ctx）不会干扰其他人？

下面的区间代码示例：

```
 it.ctx.strokeStyle = "rgba(200,200,0,.1)"
    it.ctx.fillStyle = "rgba(255,255,22,.01)";
    var p = i.p.split(",");

    var rp = setInterval(function(){
        if(cc>=20){
            clearInterval(rp);
            it.ctx.strokeRect( p[0],p[1],p[2],p[3] );
            return;
        }
        it.ctx.fillRect( p[0],p[1],p[2],p[3] );
        cc++;
    },30); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T22:18:54.873

如果在调用此间隔函数之间运行其他代码来修改`strokeStyle`and `fillStyle`，则每次在画布上绘制时都需要显式设置这些值：

```
var p = i.p.split(",");
var rp = setInterval(function(){
    it.ctx.save(); // Save the current canvas styles.

    it.ctx.strokeStyle = "rgba(200,200,0,.1)";
    it.ctx.fillStyle = "rgba(255,255,22,.01)";

    if(cc>=20){
        clearInterval(rp);
        it.ctx.strokeRect( p[0],p[1],p[2],p[3] );
    }
    else {
        it.ctx.fillRect( p[0],p[1],p[2],p[3] );
        cc++;
    }

    it.ctx.restore(); // Restore the original canvas styles.
},30); 
```

如果您没有在间隔函数中设置`strokeStyle`和`fillStyle`，画布将使用外部“背景”代码建立的任何内容。

# android - Android：打开指定多个收件人的短信活动

> ID：10265480
> 
> 赞同：18
> 
> 时间：2012-04-22T05:27:46.683
> 
> 标签：android, sms

我正在尝试通过启动意图来启动手机短信提供商。我在下面使用的代码是我用来启动意图的代码。

```
 Intent sendIntent = new Intent(Intent.ACTION_VIEW);
    StringBuilder uri = new StringBuilder("sms:");
    for (int i = 0; i < contacts.size(); i++) {
        uri.append(contacts.get(i).getNumber());
        uri.append(", ");
    }
    sendIntent.putExtra("sms_body", "");
    sendIntent.setType("vnd.android-dir/mms-sms");
    sendIntent.setData(Uri.parse(uri.toString()));
    startActivity(sendIntent); 
```

我特别想使用这种方法而不是自己发送消息，以便用户可以使用他们喜欢的短信客户端。我可以用一个数字而不是多个数字来实现它。我在任何地方都找不到有多个收件人的示例。这可能吗？

先感谢您

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-22T05:36:45.370

```
Intent smsIntent = new Intent(Intent.ACTION_SENDTO,Uri.parse("smsto:5551212;5551212"));
smsIntent.putExtra("sms_body", "sms message goes here");
startActivity(smsIntent); 
```

将分号分隔的电话号码列表添加到“smsto:”作为 Intent 构造函数中的 URI。另请参阅此[链接](https://stackoverflow.com/questions/5448140/sending-sms-to-multiple-people-in-android)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-17T12:48:53.553

我尝试了您的方法，几乎​​没有修改，它对我来说正常工作。这是修改后的代码。

```
StringBuilder uri = new StringBuilder("sms:");
    for (int i = 0; i < yourarray.length; i++) {
        uri.append(yourarray[i]);
        uri.append(", ");
    }
    Intent smsIntent = new Intent(Intent.ACTION_VIEW);
    smsIntent.setType("vnd.android-dir/mms-sms");
    smsIntent.setData(Uri.parse(uri.toString()));
    smsIntent.putExtra("sms_body", "Body of Message");
    startActivity(smsIntent); 
```

# connection - 如何找出 Windows (Vista) 应用程序连接到的 IP 地址

> ID：10265482
> 
> 赞同：1
> 
> 时间：2012-04-22T05:28:05.160
> 
> 标签：connection, ip, ip-address

基本上我需要找出应用程序 X 连接到的位置（ip 或域名）以及正在传回和强制的数据。该应用程序是普通的 Windows 应用程序，系统是 Windows Vista。连接非常快，像 netstat 这样的东西现在可以显示它 - 有没有办法使用 netstats 或其他程序显示过去的连接？我怀疑连接是 HTTP，所以如果这是真的，知道完整的 URL 也很好。

谢谢尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:31:19.660

看看[Wireshark](http://www.wireshark.org/)；它允许您监视机器上所有传入和传出的网络流量，并具有大量高级过滤选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T13:34:59.157

您还可以找到您的程序 PID，并`netstat -o`在 cmd 中运行，此命令列出所有活动连接和使用它的 PID。

# jquery - jquery .get 数据操作

> ID：10265484
> 
> 赞同：4
> 
> 时间：2012-04-22T05:28:11.147
> 
> 标签：jquery, html, ajax

我正在使用下面的代码来获取页面：

```
$.get('http://example.com/page1.html', function (data) {

}); 
```

现在让我们想象一下 page1.html 中有一个#content div，我需要阅读它的内部 html，因为我已经在发生 Ajax 调用的页面上有了#content div。

这样做的正确方法是什么？我试过：

```
data = $(data).find('#content').html();
$("#content").empty().append(data); 
```

但似乎 html() 函数不是正确的，因为它返回 null，而 contents() 正在返回数据，但我不够熟练，只能从中获取我需要的东西。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:10:37.483

这段代码

```
data = $(data).find('#content').html(); 
```

数据为空时返回

```
var data ="<div id='content'>my data</div>"; 
```

因为`#content`已经是父母，如果数据是

```
var data ="<div><div id='content'>my data</div><div>"; 
```

然后返回准确的 html，因为这次 #content 是子元素，您可以在父 div 中 .find() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:40:59.003

未经测试：

```
var content = $("#content", data).html(); // or var content = $("#content", $(data)).html();

$("#content").html(content); 
```

编辑：这个怎么样？

```
$('#content').load("http://example.com/page1.html #content"); 
```

来自：[http](http://api.jquery.com/load/) ://api.jquery.com/load/ - “加载页面片段”。

# android - 我的应用程序中出现 NullPointerException 错误

> ID：10265492
> 
> 赞同：0
> 
> 时间：2012-04-22T05:29:38.353
> 
> 标签：android

MakeMissedCallActivity.java：

```
package com.android.main;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.os.Bundle;
import android.util.Log;

public class MakeMissedCallActivity extends Activity {
    private Button button;
    private static boolean mCallMadeFromApp = false;
    private String LOG_TAG = "MakeMissedCall App";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Listen for call state changes before making the call through button
        CallStateListener callStateListener = new CallStateListener();
        TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(callStateListener, PhoneStateListener.LISTEN_CALL_STATE);

        // add button and add dial functionality 
        button = (Button) findViewById(R.id.buttonCall);
        button.setOnClickListener(new OnClickListener() {
            //@Override
            public void onClick(View arg0) {
                mCallMadeFromApp = true;
                Log.i(LOG_TAG, "Button clicked");
                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:+918028563681"));
                startActivity(callIntent);
            }
        });
    }

    public boolean getmCallMadeFromApp() {
        Log.i(LOG_TAG, "mCallMadeFromApp=" +mCallMadeFromApp);
        return mCallMadeFromApp;
    }

    public void setmCallMadeFromApp(boolean mNewValue) {
        mCallMadeFromApp = mNewValue;
    }
} 
```

CallStateListener.java：

```
package com.android.main;

import android.content.Intent;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;

//monitor phone call activities
public class CallStateListener extends PhoneStateListener {
    private String LOG_TAG = "MakeMissedCall App";
    MakeMissedCallActivity makeMissedCallActivity;

    CallStateListener() {
        MakeMissedCallActivity makeMissedCallActivity = new MakeMissedCallActivity();
    }

    @Override
    public void onCallStateChanged(int call_state, String incomingNumber) {
        switch(call_state) {
            case TelephonyManager.CALL_STATE_RINGING:
                Log.i(LOG_TAG, "CALL_STATE_RINGING");
                break;

            case TelephonyManager.CALL_STATE_OFFHOOK:
                Log.i(LOG_TAG, "CALL_STATE_OFFHOOK. mCallMadeFromApp=" + makeMissedCallActivity.getmCallMadeFromApp());
                break;

            case TelephonyManager.CALL_STATE_IDLE:
                if (makeMissedCallActivity.getmCallMadeFromApp() == true) {
                    makeMissedCallActivity.setmCallMadeFromApp(false);
                }
                Log.i(LOG_TAG, "CALL_STATE_IDLE");
                break;
        }
    }
} 
```

当我运行应用程序时，如果`(makeMissedCallActivity.getmCallMadeFromApp() == true)`在`CallStateListener.java.`

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T05:43:34.787

您的问题似乎出在这段代码中；

```
MakeMissedCallActivity makeMissedCallActivity;

CallStateListener() {
    MakeMissedCallActivity makeMissedCallActivity = new MakeMissedCallActivity();
} 
```

您正在创建一个私有变量，但在您的构造函数中，您正在创建一个*具有相同名称的新局部变量*并将新活动分配给该变量。当您退出构造函数时，私有变量仍将是`null`.

你的意思可能只是简单的；

```
MakeMissedCallActivity makeMissedCallActivity;

CallStateListener() {
    makeMissedCallActivity = new MakeMissedCallActivity();
} 
```

# python - get_text() 有 UnicodeEncodeError

> ID：10265493
> 
> 赞同：0
> 
> 时间：2012-04-22T05:30:19.687
> 
> 标签：python, unicode, ascii, beautifulsoup

我有以下 HTML：

```
<div class="dialog">
<div class="title title-with-sort-row">
    <h2>Description</h2>
    <div class="dialog-search-sort-bar">
    </div>
</div>
<div class="content"><div style="margin-right: 20px; margin-left: 30px;">
    <span class="description2">
        With “Antonia Polygon – Standard”, you have a figure that is unique in the Poser community. 
        She is made available under a Creative Commons License that gives endless opportunities for further development. 
        This figure was developed by a group of talented members of the Poser community in a thirty-month effort. 
        The result is a figure that has very good bending and morphing behavior.
        <br />
    </span>
</div>
</div> 
```

我需要从 的几个 div 中找到这个 div `class="dialog"`，然后在`span class="description2"`.

当我使用代码时：

```
description = soup.find(text = re.compile('Description'))
if description != None:
    someEl = description.parent
    parent1 = someEl.parent
    parent2 = parent1.parent
    description = parent2.find('span', {'class' : 'description2'})
    print 'Description: ' + str(description) 
```

我得到：

```
<span class="description2">
    With Â“Antonia Polygon Â– StandardÂ”, you have a figure that is unique in the Poser community. 
    She is made available under a Creative Commons License that gives endless opportunities for further development. 
    This figure was developed by a group of talented members of the Poser community in a thirty-month effort. 
    The result is a figure that has very good bending and morphing behavior.
    <br/>
</span> 
```

如果我尝试只获取文本，没有 HTML 和非 ASCII 字符，使用

```
description = description.get_text() 
```

我得到一个**`(UnicodeEncodeError): 'ascii' codex can't encode character u'\x93'`**

如何将此 HTML 块转换为直接 ascii？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:31:04.390

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

foo = u'With Â“Antonia Polygon Â– StandardÂ”, you have a figure that is unique in the Poser community.She is made available under a Creative Commons License that gives endless opportunities for further development. This figure was developed by a group of talented members of the Poser community in a thirty-month effort. The result is a figure that has very good bending and morphing behavior.'

print foo.encode('ascii', 'ignore') 
```

需要注意的三件事。

首先是`'ignore'`编码方法的参数。它指示该方法删除不在所选编码范围内的字符（在这种情况下，ascii 是安全的）。

其次，我们通过在字符串前面加上 . 来明确地将 foo 设置为 unicode `u`。

第三是显式文件编码指令：`# -*- coding: utf8 -*-`.

另外，如果您没有在此答案所附的评论中阅读 Daenyth 的非常好的观点，那么您就是一个愚蠢的笨蛋。如果要在 HTML/XML 中使用输出，则可以用于`xmlcharrefreplace`代替上面的大义。`ignore`

# android - Google Calendar 的 Event.Datetime 中的“-04:00”是什么意思？

> ID：10265494
> 
> 赞同：0
> 
> 时间：2012-04-22T05:30:31.263
> 
> 标签：android, json, datetime, google-calendar-api

无论我如何更改 Google 日历中事件的时区，当在 Android 上使用 Google 日历 API 拉取时，在开始和结束的 DateTime 属性后面总是有一个“-04:00”字符串。我所做的是从网络创建一个事件并在 Android 模拟器上查看结果。

例如：
如果我创建一个时区在加拿大多伦多的事件（仅供参考，这是日历的时区），它将显示

```
"dateTime" : "2012-04-25T10:00:00.000-04:00", 
```

如果我将其更改为台湾台北，它将显示

```
"dateTime" : "2012-04-24T22:00:00.000-04:00", 
```

时间会自动更改，这对于实施非常有用，但是“-04:00”代表什么？（仅供参考，多伦多的时区是“GMT-05:00”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:47:42.227

它是 UTC 偏移量，告诉您事件的时间在哪个时区表示。这可能来自日历的时区设置。多伦多目前处于[UTC-4:00 ，这意味着它比](http://www.timeanddate.com/worldclock/city.html?n=250)[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)时钟晚了四个小时。因此，当您将活动移至台北时，您将其保留在同一当地时间（25 日上午 10 点），但 API 以多伦多时间表示；即事件将在多伦多 24 日晚上 10 点发生。

多伦多的时区是 GMT-5:00（UTC 和 GMT 大致相等），因为没有夏令时，这就是偏移量。不过，API 知道多伦多目前处于夏令时，并相应地更改偏移量。

还值得注意的是，这种日期/时间格式是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)，并且是在 API 中表示时间的常用方式。

# oracle - 在用户定义的 oracle 类型中插入/更新/选择值

> ID：10265496
> 
> 赞同：2
> 
> 时间：2012-04-22T05:31:13.517
> 
> 标签：oracle, oracle10g, user-defined-types

在 oracle 中创建用户定义类型

```
CREATE OR REPLACE TYPE  "CUSTOMER_NAME" AS OBJECT(FIRST_NAME VARCHAR2(20),LAST_NAME VARCHAR2(20))
    / 
```

使用以下代码在表中插入数据。

```
 INSERT INTO STAFF_INFO(STAFF_NAME,STAFF_PWD) VALUES (CUSTOMER_NAME('" & fname.Text & "','" & lname.Text & "'),'" & password.Text & "')" 
```

但是，当我尝试

```
select STAFF_ID,STAFF_PWD,CUSTOMER_NAME(FIRST_NAME,LAST_NAME) from staff_info 
```

收到错误**ORA-00904：“LAST_NAME”：标识符无效**

当我尝试这个时

```
select * from staff_info 
```

然后，我收到此错误 **ORA-00932：数据类型不一致：预期 NUMBER 得到 ADS.CUSTOMER_NAME**

需要帮忙 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T05:38:32.933

我面前没有 Oracle 实例，但我之前处理过这个问题。我记得我必须做类似的事情：

```
select a.STAFF_ID,
       a.STAFF_PWD,
       a.STAFF_NAME.FIRST_NAME,
       a.STAFF_NAME.LAST_NAME
  from staff_info a; 
```

尽管该字段`customer_name`可能不应该与 type 的名称匹配`customer_name`。

# javascript - 我收到涉及这些行中某些内容的语法错误

> ID：10265500
> 
> 赞同：2
> 
> 时间：2012-04-22T05:31:48.837
> 
> 标签：javascript, html, css

Dreamweaver 告诉我这里有语法错误，但没有告诉我它是什么或确切的位置。

我在我的 html 文档中包含了一个 javascript 文件和一个 css 文件，所以我假设我在代码中写了一些错误。

```
<link rel="stylesheet" type="text/css" href="pizza0-1style.css" />
<script src="pizza0-1displayscript.js" /> 
```

编辑：他们在我的文件的头......是他们应该在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T05:34:03.107

尝试以这种方式关闭脚本标签：

```
<script src="pizza0-1displayscript.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T05:34:48.100

试着这样写：

```
<script type="text/javascript" src="pizza0-1displayscript.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T05:36:55.557

您不能自行关闭`script`标签。

**正确的**

```
<script></script> 
```

**不正确**

```
<script /> 
```

**事件更不正确**

```
<script><script><span/><a><br><script /> 
```

# javascript - 在 html5 中绘制路径，然后绘制图像

> ID：10265502
> 
> 赞同：1
> 
> 时间：2012-04-22T05:31:55.723
> 
> 标签：javascript, html, canvas, html5-canvas

我正在尝试画一个圆圈，然后让图像跟随圆圈周围。稍后我想相对于绘制的圆圈旋转和移动图像。我面临的问题是当我尝试旋转图像时它不会旋转。它也没有在控制台中显示错误。我的功能允许我移动圆圈并且图像随之移动，我似乎无法旋转图像。

这是代码：

```
draw: function(){
//draw self on canvas;
//intended only to be called from update, should never
//need to be deliberately called
ctx = this.context;

ctx.save();
ctx.fillStyle="#000000";
ctx.beginPath();

//void arc(double x, double y,
//         double radius, double startAngle, double endAngle,
//          optional boolean anticlockwise = false);
ctx.arc(this.x,this.y,this.size,0,Math.PI*2,true);
ctx.closePath();
ctx.fill();
//ctx.translate(this.x, this.y);
ctx.rotate(this.imgAngle);
//draw the hammer

ctx.drawImage(this.hammer,this.hammerX,this.hammerY,100,100)
ctx.rotate(Math.PI/2);

ctx.restore();

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:36:50.023

旋转只会影响旋转完成后制作的图纸。

您可以尝试将旋转调用移动到需要旋转的对象之前？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:43:37.510

**[现场演示](http://jsfiddle.net/loktar/qhfxQ/)**

尝试将您的代码更改为以下内容。您需要在绘制之前执行旋转。您可以将画布转换为实体位置，然后在该位置绘制图像`x:0,y:0`以获得您想要的效果。注意我这样做`0-50,0-50`是因为将原点放在中心，因为宽度和高度都是 100。这意味着您的图像将围绕其中心而不是围绕其角落旋转。

```
//draw the hammer
ctx.translate(this.hammerX, this.hammerY);
ctx.rotate(this.imgAngle);
ctx.drawImage(this.hammer,0-50,0-50,100,100); 
```

# c++ - C ++中文件输入的不同单词和计数

> ID：10265504
> 
> 赞同：0
> 
> 时间：2012-04-22T05:32:01.190
> 
> 标签：c++

这是要求：每当遇到一个新单词时，程序应该从动态内存中分配一个节点实例来包含该单词及其计数，并将其插入到一个链表中，以便该列表始终是排序的。如果遇到的单词已经存在于列表中，那么该单词的计数应该增加。

我确实到处搜索，正确的解决方案是使用 std::map，但我不想使用它，因为到目前为止我还没有学会。可以使用 List 或 Vector 并创建一个结构或类来操作每个节点吗？

这是我的正确代码

```
class Node {
string word;
int count;

public:
    Node() {
        word = "";
        count = 1;
    }
    Node(const Node &other) : word(other.word), count(other.count) {
        // copy constructor 
    }
    ~Node() {} // Destructor

    void printWord() const {
        cout << count << " " << word << endl;
    }
    void loadWord(ifstream &fin) { 
        fin >> word;
    }
    void setWord(const string &word) {
        this->word = word;
    }
    const string& getWord() const {
        return word;
    }
    void incrementCount() {
        count++;
    }
};

void load(list<Node> &nodes, const char *file);
void print(const list<Node> &nodes);
bool isExist(const list<Node> &nodes, const string &word, Node &node);
void error(const string &message, const char *file);
const Node& getNode(const list<Node> &nodes, const string &word);

int main(int argc, char *argv[]) {

    list<Node> nodes;

    if (argc != 2) {
        cout << "Error syntax : require an input file\n";
        return 0;
    }
    load(nodes, argv[1]);
    print(nodes);

    return 0;   
}

void print(const list<Node> &nodes) {

    list<Node>::const_iterator itr;

    for (itr = nodes.begin(); itr != nodes.end(); itr++) {
        itr->printWord();
    }
cout << '\n';
}

void load(list<Node> &nodes, const char *file) { 

    ifstream fin;
    Node node;
    string temp;

fin.open(file);

if (!fin) 
    error("Cannot open file ", file); // exit

while (!fin.eof()) {
    if (fin.good()) {
        fin >> temp;
        if (!isExist(nodes, temp, node)) {
            node.setWord(temp);
            nodes.push_back(node);
        } else {
            // increase word count here
        }

    } else if (!fin.eof()) 
        error("Unable to read data from ", file);
}
fin.close();
}

bool isExist(const list<Node> &nodes, const string &word, Node &node) {
list<Node>::const_iterator itr;
for (itr = nodes.begin(); itr != nodes.end(); itr++) {
    if(word.compare(itr->getWord()) == 0) {
        return true;
    }
}
return false;
}

const Node& getNode(const list<Node> &nodes, const string &word) {
    list<Node>::const_iterator itr;
    for (itr = nodes.begin(); itr != nodes.end(); itr++) {
        if(word.compare(itr->getWord()) == 0) {
            return *itr;
        }
    }
    return NULL; // This is fail what should I do to return a NULL value when not found
}

void error(const string &message, const char *file) {
cerr << message << file << '\n';
exit(0);
} 
```

代码不起作用，我只是尝试通过应用我的 Java 知识来生成解决问题的解决方案，但在 c++ 中控制对象似乎不同。有人可以检查我的代码并建议我更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:54:17.267

不，这不是练习向量和列表的最佳任务。您确实必须查看 std::map 文档并编写 3 行高效、美观的代码。为什么不应用您的 TreeMap Java 知识？

# dart - 在 Dart 中传递 Canvas 的 2D 上下文

> ID：10265505
> 
> 赞同：1
> 
> 时间：2012-04-22T05:32:01.893
> 
> 标签：dart, parameter-passing, dart-html

我有一个接受*CanvasRenderingContext2D*作为参数并进行绘图的函数。每当我尝试通过它时，我都会得到：

```
CanvasRenderingContext2D is not assignable to CanvasRenderingContext2D 
```

该函数如下所示：

```
 void draw(CanvasRenderingContext2D context) {
  ...
  } 
```

我认为所有内容都作为 Dart 中的引用传递（就像 JS 一样），这不应该导致这样的问题。有没有办法说我想要引用对象而不是对象本身？或者还有什么我应该知道的吗？

**编辑：**

问题是我在一个文件中导入了*dart:html*而在另一个文件中导入了*dart:dom*。对应的接口名称相同但不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:44:26.470

这很可能是因为您在同一个应用程序中使用了[dart:dom](http://api.dartlang.org/dom.html)和[dart:html 。](http://api.dartlang.org/html.html)为避免此类错误，您应该使用命名空间导入其中一个

```
#import('dart:html');
#import('dart:dom', prefix: 'dom'); 
```

然后您可以访问它们中定义的代码

```
window     // dart:html window
dom.window // dart:dom window 
```

有关更多信息，请参阅[此](https://stackoverflow.com/questions/8960937/whats-the-difference-between-darthtml-and-dartdom-package/8961468#8961468)答案

# python - Twisted 业务逻辑流程副本的 TCP 反向代理

> ID：10265506
> 
> 赞同：0
> 
> 时间：2012-04-22T05:32:18.660
> 
> 标签：python, twisted

我正在寻找一种方法来实现（Twisted）服务器进程副本的reverseProxy。我想到了一种设置，其中业务逻辑以副本的形式运行，以便于维护和升级，并将共享数据存储在数据库中，也许还存储在 memcached 中。

我在twisted.web 中看到了reverseProxy 类，但我认为这不是我要寻找的非HTTP 类。

首先，这总体上是一个好的设计和/或是否有更“扭曲”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:54:26.033

您可能需要考虑运行已建立的负载平衡反向代理，例如 HAProxy 或 nginx，因为这将是您系统的弱点。如果您的反向代理/负载均衡器中有错误，那么一切都会失败。您还可以在代理上处理 SSL，这样您扭曲的应用程序服务器就不需要处理它。

# ios - 对于 iOS 编程，当人们说“它是由 nib 构建的”时，是不是真的意味着“xib”？

> ID：10265508
> 
> 赞同：0
> 
> 时间：2012-04-22T05:32:40.880
> 
> 标签：ios, interface-builder, xib, nib

似乎人们可能会问：这个视图是从`nib`. a`nib`是编译后的形式，`xib`是 XML 形式，我们不再使用`nib`而只使用，是真的`xib`吗？所以现在，它只是意味着“它是由 xib 构建的”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:48:43.733

iOS 开发从未真正使用过 .nib 文件。它一直是.xibs。NIB 最初是 NeXT Interface Builder 的首字母缩写。iPhone 开发最初使用名为 Interface Builder 的工具来创建用户界面，并以 .xib 格式保存。Interface Builder 最近已（​​某种程度）合并到 XCode 4 中，因此您可以在那里构建您的 .xib 文件。

是的，.xib 格式是一种人类可读的 XML 格式，与 .nibs 相比，它更易于与版本控制系统（差异等）一起使用。

我想，出于遗留目的，这两种格式的发音相同……“笔尖”。可能也是因为以“x”开头的单词很难发音:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T06:22:04.240

我完全不同意@Nate 的回答。IOS 实际上***一直***有 nib 文件，它们只是被隐藏了。您会看到，当编译器将 XIB 文件展平以便应用程序可以检索它时，它实际上会将其“转换”为 .nib 文件！如果你不相信我，试试这个：

```
NSLog(@"%@", [[NSBundle mainBundle]pathForResource:@"myxib" ofType:@"xib"]); 
```

它返回 NULL，因为它不存在！现在试试这个：

```
NSLog(@"%@", [[NSBundle mainBundle]pathForResource:@"myxib" ofType:@"nib"]); 
```

很酷吧？

所以以一种扭曲的方式，说XIB真的是一个笔尖是正确的。

# c# - 添加事件处理程序 - 语法的目的

> ID：10265509
> 
> 赞同：0
> 
> 时间：2012-04-22T05:32:43.120
> 
> 标签：c#, events

这是一个有趣的问题，在上周我与一位同事交谈之前，我从未真正想过。

当我们添加事件处理程序时，我们使用如下语法：

`Button1.Click += ClickHandler`

据我所知，我们使用 += 与“add”同义，-= 与“remove”同义。

所以我的问题是，为什么语言创建者选择使用这种语法？为什么不是 Button1.Click.Add(ClickHandler)？

如果它只是意味着添加，为什么框架创建者不为 List 重载 += 运算符而不是 .Add()？

我想这与解释 VB.Net 中存在 AddHandler 和 RemoveHandler 的原因相同，但我不知道那个原因是什么。

为什么有用于添加和删除事件处理程序的特殊语言语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T10:02:00.827

非常主观的问题，定义语法的人不会在 SO 上发帖，所以需要读心术来猜测他们 14 年前的动机。无论如何都要尝试一下：

事件与属性完全等价。就像属性限制对字段的访问一样，事件限制对委托对象的访问。一个属性有一个 getter 和一个 setter。调用它们只需要 = 符号。一个就足够了，编译器可以从属性标识符相对于 = 符号的位置（左边是 setter，右边是 getter）来判断 setter 还是 getter。

一个事件有三个访问器：add、remove 和 raise。Raise 没有在 C# 中实现（与其他语言不同），所以我们只需要添加和删除的语法。我们不能像使用属性那样只使用一个符号，放置没有帮助。add 最自然的符号是`+`，remove 是`-`。它的行为也有点像赋值，因为它在逻辑上（并且在实践中）重新分配底层委托对象。所以自然选择是`+=`和`-=`。

不知道设计师是否真的遵循相同的逻辑。VB.NET 设计者当然没有，他们选择了语言关键字来映射到访问器（AddHandler、RemoveHandler、RaiseEvent）。但是 C# 是一种语言，其语法简洁和关键字的绝对最少数量是强大的设计目标。C++/CLI 与 C# 非常相似，但支持 raise 访问器，并且根本没有语法糖来创建委托对象。这赋予了它超越 C# 的功能，它不仅限于将*其*作为委托目标，这是一种称为“未绑定委托”的功能。

最后一点，C# 具有但 C++/CLI 没有的委托对象创建语法糖非常重要。因为如果你把它写出来，你会得到这样的代码：

```
SystemEvents.UserPreferenceChanged -= new UserPreferenceChangedEventHandler(repaintControls); 
```

这让任何从 .NET 编程开始的程序员都心烦意乱。您必须创建一个**新**的委托对象才能**取消订阅**事件？？？是的你是。糖更容易理解：

```
SystemEvents.UserPreferenceChanged -= repaintControls; 
```

无论如何，编译器都会生成相同的代码。这也是 VB.NET 使用关键字的可能原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:39:36.430

这完全是口味问题。出于与您给出的类似原因，Java 不允许运算符重载。有些人喜欢阅读文字，有些人则喜欢看符号表示。

# openssl - 在 Solaris 9、10 下使用 no-cipher 选项编译 openssl-1.0.0g 失败

> ID：10265510
> 
> 赞同：1
> 
> 时间：2012-04-22T05:32:54.983
> 
> 标签：openssl, solaris

我正在尝试在 Solaris 9 和 10下编译没有选项的 oepnssl-1.0.0g 。
但是我遇到了以下问题，它可能无法成功
构建。
请告诉我应该怎么做。

* * *

```
+ /bin/bash ./Configure solaris64-sparcv9-cc  
--prefix=/SYM_BC/YASU/v11_enc_local.unix/make_openssl/openssl-1.0.1/openssl  
--openssldir=/SYM_BC/YASU/v11_enc_local.unix/make_openssl/openssl-1.0.1/openssl/openssl  
**no-camellia no-idea no-mdc2 no-rc5 no-ec no-ecdh no-ecdsa no-seed**  
Configuring for solaris64-sparcv9-cc  
no-camellia [option] OPENSSL_NO_CAMELLIA (skip dir)  

:  

kssl.h => ../include/openssl/kssl.h  
srtp.h => ../include/openssl/srtp.h  
ssltest.c => ../test/ssltest.c  
making links in engines...  
sh: syntax error at line 1: \`;' unexpected  
\*** Error code 2  
The following command caused the error:  
target=links; [ -z "" ] || for i in ; do (cd $i && echo "making $target  
in engines/$i..." && make -e TOP=../.. DIR=$i $target ) || exit 1; done;  
make: Fatal error: Command failed for target \`links'  
Current working directory  
/SYM_BC/YASU/v11_enc_local.unix/make_openssl/openssl-1.0.1/engines  
*** Error code 1  
The following command caused the error:  
set -e; target=links; for dir in crypto ssl engines apps test tools; do  
if [ -d "$dir" ]; then ( cd $dir && echo "making $target in $dir..." &&  
TOP= && unset TOP ${LIB+LIB} ${LIBS+LIBS} ${INCLUDE+INCLUDE}  

:

ENGINES_ASM_OBJ='' PERLASM_SCHEME='void' FIPSLIBDIR=''  
FIPSDIR='/usr/local/ssl/fips-2.0' FIPSCANLIB="${FIPSCANLIB:-}"  
THIS=${THIS:-links} MAKEFILE=Makefile MAKEOVERRIDES= TOP=.. DIR=$dir  
$target ) || exit 1; fi; done  
make: Fatal error: Command failed for target `links'  
+ '[' yes = yes ']' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:22:57.387

刚刚遇到同样的问题。

这是修复：您应该编辑`engines/Makefile`第 14 行 -`$(ENGDIRS)`在`RECURSIVE_MAKE`.

当您向 , 提供参数`no-ec`时`Configure`，`$(ENGDIRS)`为空且没有双引号，我们会遇到语法错误。

这是补丁：

```
--- engines/Makefile    Tue Aug 24 23:46:58 2010
+++ engines/Makefile.fixed      Sat May  5 19:16:42 2012
@@ -11,7 +11,7 @@
 AR=            ar r
 ENGDIRS= ccgost

-RECURSIVE_MAKE=        [ -z "$(ENGDIRS)" ] || for i in $(ENGDIRS) ; do \
+RECURSIVE_MAKE=        [ -z "$(ENGDIRS)" ] || for i in "$(ENGDIRS)" ; do \
                    (cd $$i && echo "making $$target in $(DIR)/$$i..." && \
                    $(MAKE) -e TOP=../.. DIR=$$i $$target ) || exit 1; \
                done; 
```

# objective-c - 如何检查实体是否已存在于持久存储中

> ID：10265513
> 
> 赞同：7
> 
> 时间：2012-04-22T05:33:36.650
> 
> 标签：objective-c, core-data

我对核心数据编程非常陌生。我有一个问题希望得到澄清。

假设我有一个名为 的 NSManagedObject `Company`，具有以下属性：

*   公司名
*   公司邮箱
*   公司电话号码
*   公司用户名
*   公司密码

在这个对象中，`companyName`属性被索引。

所以，我的问题是，我怎样才能确保只有相同的 companyName、companyEmail、companyPhoneNo、companyUserName 和 companyPassword 条目？

我是否需要请求检查是否有任何具有相同属性值的记录，或者使用对象 ID 进行简单检查是否足够？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T06:21:24.113

这是一个示例可能会有所帮助：

```
NSError * error;
NSFetchRequest * fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:[NSEntityDescription entityForName:NSStringFromClass([self class])
                                    inManagedObjectContext:managedObjectContext]];
[fetchRequest setFetchLimit:1];

// check whether the entity exists or not
// set predicate as you want, here just use |companyName| as an example
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"companyName == %@", companyName]];

// if get a entity, that means exists, so fetch it.
if ([managedObjectContext countForFetchRequest:fetchRequest error:&error])
  entity = [[managedObjectContext executeFetchRequest:fetchRequest error:&error] lastObject];
// if not exists, just insert a new entity
else entity = [NSEntityDescription insertNewObjectForEntityForName:NSStringFromClass([self class])
                                            inManagedObjectContext:managedObjectContext];
[fetchRequest release];

// No matter it is new or not, just update data for |entity|
entity.companyName = companyName;
// ...

// save
if (! [managedObjectContext save:&error])
  NSLog(@"Couldn't save data to %@", NSStringFromClass([self class])); 
```

提示：`countForFetchRequest:error:`实际上并不获取实体，它只是返回一些与`predicate`您之前设置的实体匹配的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:03:20.083

您有两种选择来维护您的商店而没有重复：

1.  在插入中获取。
2.  插入所有新数据，然后在保存之前删除重复项。

什么是更快更方便？大概是第一种方式。但是您最好使用 Instruments 对其进行测试，并为您的应用找到正确的方法。

这是有关此问题的文档。 [http://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1](http://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1)

# python - 尝试使用 python3.2 获取 Facebook 身份验证

> ID：10265517
> 
> 赞同：0
> 
> 时间：2012-04-22T05:34:22.687
> 
> 标签：python, facebook, facebook-graph-api

我正在尝试按照此处提到的步骤[http://developers.facebook.com/docs/authentication/devices/](http://developers.facebook.com/docs/authentication/devices/) 从用户那里获取身份验证。我执行以下 python 脚本。

```
#!/usr/bin/python3.2
import os
import urllib
import json

data = urllib.parse.urlencode({'type': 'device_code','client_id': 439862919363245,'scope':})
data = data.encode('utf-8')
request = urllib.request.Request("https://graph.facebook.com/oauth/device")
request.add_header("Content-Type","application/json;charset=utf-8")
try:
    response = urllib.request.urlopen(request,data)
    httpcode = response.getcode()
    responseData = response.read()
    dataMap = json.loads(responseData.decode())
except Exception as e:
    print ("Exception : "+str(e))

if httpcode != 200:
    print('Error : code :'+httpcode+', data : '+data)
    sys.exit(1)

print("Success : ")
print(dataMap) 
```

我得到以下**输出：**

```
Exception : HTTP Error 400: Bad Request
Success : 
{'username': 'hamepal', 'first_name': 'Rakesh', 'last_name': 'Kumar', 'name': 'Rakesh Kumar', 'locale': 'en_GB', 'gender': 'male', 'id': '713371871'}

The output is really strange. According to document I should have received the data similar to as following.
{"code":"64a99b030985f39a93b2608a4713e758","user_code":"E5MV1N","verification_uri":"http://www.facebook.com/device","expires_in":1800,"interval":5} 
```

我在这里错过了什么吗？我也尝试复制此处给出的请求 [http://oauth-device-demo.appspot.com/](http://oauth-device-demo.appspot.com/)但我无法获得任何成功。

我试图在网上搜索，但无法得到任何工作。请帮忙。任何形式的帮助都非常感谢这里。

**编辑：** 现在当我使用与示例中相同的 client_id 时，它可以正常工作。根据页面上的通知，似乎他们仍然不支持任何其他设备。而且我必须为我的应用程序寻找身份验证流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:04:43.853

在 FB 开发者页面的顶部它说；

> 请注意，我们目前正在与数量有限的合作伙伴一起测试设备身份验证。它目前不可用于一般用途，我们不接受额外的访问申请。

这可能是你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T08:08:58.180

实际上很明显，您没有将设备身份验证的使用列入白名单。

引用[文档](http://developers.facebook.com/docs/authentication/devices/)

> 我们目前正在与数量有限的合作伙伴一起测试设备身份验证。它目前不可用于一般用途，我们不接受额外的访问申请。

您提到的[OAuth 2.0 设备身份验证流程演示](http://oauth-device-demo.appspot.com/)由[Simon Cross](http://99layers.com/sicross)（Facebook 员工）开发，并且（可能？）允许使用该流程。

# jenkins - Jenkins 文本参数重建

> ID：10265520
> 
> 赞同：2
> 
> 时间：2012-04-22T05:34:42.030
> 
> 标签：jenkins, jenkins-plugins

我正在使用 text 参数来获取多行参数，并将它们写入文件。如果我使用重建，文本参数将作为单行字符串加载（删除换行符）。

有谁知道如何解决这个问题？我猜重建插件是问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T14:14:33.547

多行文本参数似乎[相当错误](http://jenkins.361315.n4.nabble.com/Multi-line-default-values-for-new-quot-text-parameter-quot-in-Jenkins-1-418-td3629222.html)。您可能考虑的一种解决方法是用一些自定义转义系统替换换行符，然后将转义序列转换回构建中的换行符。

更高级的解决方案是修改插件本身以将转义序列转换为换行符，并在 Jenkins 中使用修改后的插件。我已经为[Claim Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Claim+plugin)做了这样的事情来显示它自己没有做的失败的矩阵作业。如果您决定走这条路线，我可以引导您完成主要步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:48:45.090

我刚刚增强了插件以添加`TextParameterValue.jelly` 它工作正常，因为 text 和 textarea 并没有什么不同，除了新行只是`StringParameterValue.jelly`用作模板并使用 `<f:textarea name="value" value="${it.value}" />`而不是 `<f:textbox name="value" value="${it.value}" />`

# session - 快速会话存储有些奇怪

> ID：10265521
> 
> 赞同：6
> 
> 时间：2012-04-22T05:34:45.217
> 
> 标签：session, node.js, express, mongoose

如果我像这样在会话中存储一个对象：

```
user.name = "Kelvin"; // user is an object pass by "mongoose" findOne's callback.
req.session.user = user; 
console.log(req.session.user.name); // Kelvin 
```

之后，我在其他快递路线中访问“用户”：

```
app.get("/somepath", function(req, resp) {
    console.log(req.session.user.name); // undefined
}); 
```

我想知道为什么 req.session.user.name 除了我设置的函数之外没有定义？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T09:14:49.663

在查看了 mongoose 源代码后，我可以说这是因为 mongoose 模型和会话是如何工作的。当您调用`req.session.user = user`then时`req.session.user`指向对象，但实际上数据需要存储在某处（如内存或 Redis）。

为了做到这一点，Express 调用`JSON.stringify(sess)`和字符串存储在内存中。这是猫鼬进入的地方。模型的构造方式是，当您对它们进行字符串化时，**仅**包含 Schema 中预定义的属性。因此，当您设置`req.session.user = user`Express 字符串化`user`（您松散`name`属性）并保存数据时。当您调用`req.session.user`另一个路由时，Express 会解析字符串化数据并获得没有`name`属性的对象。

现在如何解决这个问题？有几种方法。

*   `name`向 Schema添加属性；
*   为用户定义新的文字对象：

    `var newuser = { id: user.id, name : "Kelvin", pwd: user.pwd, etc. };` `req.session.user = newuser;`

*   在另一个字段中存储名称：（`req.session.name = "Kelvin";`最好的解决方案恕我直言）

顺便说一句：您不应该在会话中持有用户对象。如果像管理员这样的其他用户对用户对象进行了更改怎么办？你根本看不到他们。我建议在会话中只保留用户的 id 并制作自定义中间件以从数据库加载用户并将其存储在`request`对象中。

# javascript - 单击时滚动到 div ID 的 Javascript

> ID：10265523
> 
> 赞同：0
> 
> 时间：2012-04-22T05:35:31.387
> 
> 标签：javascript, html, css

在 javascript 方面，我完全是新手，因此我正在寻求您的帮助。

我的标记是这样的：

```
<body >

<div class="header_link">

<h1 style="clear:both; padding:5px;">Smooth Scroll by Dezinerfolio</h1>

<a name="top" href="#footer">GO TO FOOTER</a>
<a href="#middle">GO TO MIDDLE</a>

  <p> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec diam  magna, consequat non, adipiscing quis, congue a, mauris. Duis convallis  leo quis metus. </p>
</div>

<div class="middle_link">

<a name="middle" href="#top">GO TO TOP</a>
<a href="#footer">GO TO FOOTER</a>

  <p> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec diam  magna, consequat non, adipiscing quis, congue a, mauris. Duis convallis  leo quis metus. </p>
</div>

<div class="footer_link">

<a name="footer" href="#top">GO TO HEADER</a>
<a href="#middle">GO TO MIDDLE</a>

  <p> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec diam  magna, consequat non, adipiscing quis, congue a, mauris. Duis convallis  leo quis metus. </p>
</div>

</body> 
```

我想要的是当访问者点击那个特定的按钮时，页面应该**平滑/缓慢地滚动**到那个特定`div`的 .

*我知道 jQuery 和 MooTools 中有很多插件，但我不想使用它们，因为这是我网站中唯一需要的 javascript 函数，其余的都是纯 CSS 活动。因此，没有必要加载整个 60 到 100 KB 的 JavaScript 库（jQuery 或 MooTools）来实现这个小功能。**我正在寻找一个简单的纯 JavaScript 函数***

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T05:39:54.400

你可以看看 jQuery 源代码，看看他们是怎么做的。

或者，谷歌告诉我这些页面看起来很有希望：

*   [http://www.itnewb.com/tutorial/Creating-the-Smooth-Scroll-Effect-with-JavaScript](http://www.itnewb.com/tutorial/Creating-the-Smooth-Scroll-Effect-with-JavaScript)
*   [http://www.dezinerfolio.com/2007/08/08/df-javascript-smooth-scroll](http://www.dezinerfolio.com/2007/08/08/df-javascript-smooth-scroll)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:41:22.733

*“我正在寻找一个简单的纯 JavaScript 函数”*

这个问题没有简单的纯 Javascript 解决方案。Javascript 确实提供了“scrollTo”功能，但它会立即滚动，而不是平滑或缓慢滚动。

如果你需要支持广泛的浏览器，你应该使用 jQuery。像这样的动画就是 jQuery 的用途，很多人都付出了很多努力来确保 jQuery 的这个特性易于使用并且性能良好。自己复制此功能并不能很好地利用您的时间。

您*可以*使用 CSS3 转换轻松地做到这一点，但 IE（目前）不支持这些转换。如果您不关心 IE，这也是一个很好的解决方案。

# web - 使用地理位置标记内容

> ID：10265531
> 
> 赞同：0
> 
> 时间：2012-04-22T05:37:07.507
> 
> 标签：web, geolocation

我正在尝试开发一个用户将发布内容的应用程序。它是一个用户生成的应用程序，因此每个帖子都会附加一个位置，以便以后可以过滤该区域或城市的其他用户。

例如：假设用户可以在我的网站上列出要出售的书籍。现在，在列出时，我想为他们提供一个文本框，他们可以在其中输入位置。现在输入的位置应该是有效的，那么我该如何验证呢？

同样在发布书后，其他人在他的位置搜索一本书，那么他/她不仅应该获得他所在位置的结果，还应该获得其他附近位置的结果。

这些是我的几个问题。如果有人可以回答他们并指导我，我将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:48:55.953

要验证人们的位置，您需要使用 HTML5 地理定位功能。看看这里的演示： http: [//merged.ca/iphone/html5-geolocation](http://merged.ca/iphone/html5-geolocation)

在附近搜索有点棘手，但有一些选择。您可以使用地理编码服务（例如，Google 和 Bing 都提供地理编码 REST API）来确定人们是否在同一个城市、邮政编码等。也许更好的解决方案是使用数据库查询来搜索附近的帖子。许多数据库现在提供内置的地理空间数据类型来支持这种场景。MySQL 例如： [http ://dev.mysql.com/doc/refman/5.0/en/mysql-spatial-datatypes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-spatial-datatypes.html)

# javascript - 为什么我的 Google +1 按钮代码不起作用？

> ID：10265532
> 
> 赞同：1
> 
> 时间：2012-04-22T05:37:53.543
> 
> 标签：javascript, google-plus-one

我无法弄清楚为什么我的 Google +1 按钮代码没有按预期工作。

[http://jsfiddle.net/DerekL/EF8eE/](http://jsfiddle.net/DerekL/EF8eE/)

当您按下 +1 按钮时，`alert`应该会弹出一个。

这里我有一个回调函数：

```
function cb(obj) {
    alert();              //alert
    console.log(obj);     //Then show obj in console
}​ 
```

但是回调永远不会被触发。[我按照规范](https://developers.google.com/+/plugins/+1button/)遵循了每一步，最有趣的是我之前让它工作了......但现在它根本不起作用。奇怪的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T05:42:00.937

从[文档](https://developers.google.com/+/plugins/+1button/#plusonetag)（强调添加），

> 您可以使用这个 HTML5 有效的 +1 标记（class 属性必须设置为`g-plusone`，并且**任何按钮属性都必须以 为前缀`data-`**）。

所以改变

```
<div class="g-plusone" data-annotation="inline" callback="cb"></div> 
```

到

```
<div class="g-plusone" data-annotation="inline" data-callback="cb"></div> 
```

*达达！* [http://jsfiddle.net/mattball/FtETf](http://jsfiddle.net/mattball/FtETf) ♫</p>

# php - http:// 在 CodeIgniter 中变成 http%3A%2F%2F

> ID：10265534
> 
> 赞同：6
> 
> 时间：2012-04-22T05:38:47.677
> 
> 标签：php, codeigniter

以下重定向 url 变为 http%3A%2F%2F 而不是 http://。我怎样才能避免这种情况？

提前致谢。

```
$params = array(
            'client_id' => $client_id,
            'redirect_uri' => site_url('welcome/google_connect_redirect/'), 
            'state' => $_SESSION['state'],
            'approval_prompt' => 'force',
            'scope' => 'https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email',
            'response_type' => 'code'
        );
        $url = "https://accounts.google.com/o/oauth2/auth?".http_build_query($params);
        // send to google
        redirect($url); 
```

URL变成了这样。

```
https://accounts.google.com/o/oauth2/auth?client_id=871111192098.apps.
googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A8888%2Fmyappname
%2Findex.php%2Fwelcome%2Fgoogle_connect_redirect&state=f0babsomeletterscb5b48753358c
3b9&approval_prompt=force&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2F
userinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&
response_type=code 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T05:47:31.747

当您将带有特殊字符的字符串放入 URL 时，它们将被编码，您可以使用`urldecode`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T05:54:14.560

的重点`http_build_query()`是，在以查询字符串格式连接它们之前，它是您`urlencode()`的每个数组值。这是首选行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T05:55:03.893

查询字符串被编码是因为 URL 中有一些具有特殊含义的特殊字符。

来自[维基百科](http://en.wikipedia.org/wiki/Query_string#URL_encoding)：

> 一些字符不能成为 URL 的一部分（例如空格），而另一些字符在 URL 中具有特殊含义：例如，字符 # 可用于进一步指定文档的小节（或片段）；字符 = 用于将名称与值分开。可能需要转换查询字符串以满足这些约束。这可以使用称为 URL 编码的模式来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T18:13:54.307

这实际上是期望的行为和正确的方法。

查看手册和功能说明[http_build_query](http://php.net/http_build_query)

> 从提供的关联（或索引）数组生成 URL 编码的查询字符串。

所以基本上它的作用是遍历整个数组并对其进行urlencode（这就是你看到这些字符的原因）并将它与&连接起来。如果你想避免它，那么不要使用 http_build_query() 但我真的不推荐它。

# facebook-opengraph - 修改 Blogger 模板：有什么方法可以从标题中访问 data:post.labels 吗？

> ID：10265536
> 
> 赞同：2
> 
> 时间：2012-04-22T05:39:36.477
> 
> 标签：facebook-opengraph, blogger

我希望能够从 Blogger 的标题中访问 data:post.labels。我只打算在 时使用它`data:blog.pageType == "item"`，因此对于一个页面上的多个帖子不会有任何混淆。但是，我尝试过的任何事情都没有产生任何结果。如果我发现了一种访问数据的方法，我计划对这些数据执行以下操作：

```
<b:if cond='data:blog.pageType == &quot;item&quot;'>
    <b:loop values='data:post.labels' var='label'>
        <b:if cond='label.name == &quot;poetry&quot;'>
            <meta expr:content='&quot;Poem “&amp;quot; + data:blog.pageName + &quot;”&amp;quot; + &quot; at Form and Formlessness&quot;' property='og:title'/>
        </b:if>
        <b:if cond='label.name == &quot;article&quot;'>
            <meta expr:content='&quot;Article “&amp;quot; + data:blog.pageName + &quot;”&amp;quot; + &quot; at Form and Formlessness&quot;' property='og:title'/>
        </b:if>
        <b:if cond='label.name == &quot;lists&quot;'>
            <meta expr:content='&quot;Poem list “&amp;quot; + data:blog.pageName + &quot;”&amp;quot; + &quot; at Form and Formlessness&quot;' property='og:title'/>
        </b:if>
    </b:loop>
</b:if> 
```

我所有的帖子要么是[诗歌](http://formlesspoet.blogspot.com/search/label/poetry)，要么是诗歌[文章](http://formlesspoet.blogspot.com/search/label/articles)，要么是诗歌列表，并带有适当的标签。所以，如果我能想出一些方法来访问帖子使用的标签，这应该可行。

任何援助将不胜感激。

ps 不要担心代码中的开引号——它们是开引号和闭引号，它们工作得很好，而不必使用 Unicode 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:41:10.463

前段时间我花了很长时间寻找解决方案。我终于得出结论（以及其他建议我的人） data:post.labels 仅在 blog-posts 小部件中可用：如果您不在此范围内（例如在标题中），则它不可用。

有人确实建议了一些代码来在博客文章中使用标签填充数组，然后再调用它。但我从来没有更进一步，因为我真的想在到达后期小部件之前访问标签。

我最初的讨论是在：[http ://www.google.com/support/forum/p/blogger/thread?tid=188cd44d0908f736&hl=en](http://www.google.com/support/forum/p/blogger/thread?tid=188cd44d0908f736&hl=en)

# ubuntu - SASS 监视整个根

> ID：10265540
> 
> 赞同：4
> 
> 时间：2012-04-22T05:40:21.843
> 
> 标签：ubuntu, sass

我正在尝试在家里的开发服务器上使用 SASS。

我试图找到一种方法让 SASS 默认监视所有不同的站点（Web 根目录内的文件夹）。如果我必须手动设置 SASS 来监视每个站点以及每次创建新站点时，我都不会喜欢。

基本上，它需要找到根内部修改的每个 .scss/.sass 并在同一位置创建一个 .css。

我能找到的只是基本`sass --watch origin:destination`的，但这不是我需要的，因为我所有的 SASS 文件都在不同的文件夹中。

以防万一，我正在运行一个 Ubuntu 服务器，并且我已经安装了 ruby​​+sass。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T06:24:10.140

...呃。

显而易见的方法是正确的方法。基本`sass --watch origin:destination`是递归的，并且确实监视子文件夹。

我觉得很笨。

# javascript - 将javascript get函数添加到href

> ID：10265542
> 
> 赞同：0
> 
> 时间：2012-04-22T05:41:16.537
> 
> 标签：javascript, ajax

我对此很陌生

我有这个链接：

```
<a onclick = sendRequest('GET','room_chart.jsp') href=#>Show Chart</a> 
```

但我需要在该链接内生成动态地址。

我创建了javascript：

```
 <script language="javascript">
        var selectedOption;
        var ROOM;
        var BUILDING;

        function GetLink(){
            selectedOption = document.getElementById("roomandbuildingid").options[e.selectedIndex].text;  //getting selected option
            ROOM = selectedOption.split("|")[0].trim().split(":")[1].trim(); //parsing text
            BUILDING = selectedOption.split("|")[1].trim().split(":")[1].trim(); //parsing text
            return "'room_chart.jsp?room="+ROOM+"&building="+ BUILDING+"'"; //returning url
        }
    </script> 
```

但是当我将函数粘贴到其中时 - 它不起作用！

```
<a onclick = sendRequest('GET',GetLink()) href=#>Show Chart</a> 
```

现在，经过调试，我发现它实际上创建了正确的 srting，但不知何故我的函数不愿意接受它作为 URL！这是一个悖论——它创建了正确的字符串——如果我将它硬编码到代码中——它就可以工作！但是来自变量的动态链接 - 不起作用！

请帮忙！

见下文：我的js文件：

```
function createRequestObject(){
    var req;
    if(window.XMLHttpRequest){
        //For Firefox, Safari, Opera
        req = new XMLHttpRequest();
    }
    else if(window.ActiveXObject){
        //For IE 5+
        req = new ActiveXObject("Microsoft.XMLHTTP");
    }
    else{
        //Error for an old browser
        alert('Your browser is not IE 5 or higher, or Firefox or Safari or Opera');
    }
    return req;
}

//Make the XMLHttpRequest Object
var http = createRequestObject();

function sendRequest(method, url){
    if(method == "get" || method == "GET"){
        http.open(method,url);
        http.onreadystatechange = handleResponse;
        http.send(null);
       // alert( document.URL );
       // document.write (GetLink());
    }
}
function handleResponse(){
    if(http.readyState == 4 && http.status == 200){
        var response = http.responseText;
        if(response){  
            document.getElementById("ajax_res").innerHTML = response;
        }
    }      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:56:56.590

好的，该函数正确返回所有内容，解析未正确完成。我修好了它。JavaScript 对我来说很难调试。

# sql-server - 聚集和列存储索引如何存储

> ID：10265543
> 
> 赞同：0
> 
> 时间：2012-04-22T05:41:28.690
> 
> 标签：sql-server

我对聚集索引和列存储索引没有几个问题。我们知道在聚集索引中特定列的数据的物理顺序正在改变并存储在二叉树的叶节点中。所以，我的问题是：
1）如果我们创建聚集列A上的索引，该列A的数据将从实际存储位置中删除并添加到二叉树叶子中？还是只是重新排列原始存储位置中的数据？

2）列存储索引呢，这里特定列的数据也会从实际存储位置中删除并加载到另一个单独的文件段中？

3）从上面的2个问题来看，如果数据是从原始位置移动的，例如：我们有一个表A有coulmns colA，colB，如果我们在colA上创建上述2个索引中的任何一个，那么原始位置只包含colB数据？colA 在其他位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:38:28.167

1) 当您创建聚集索引时，表将重建为聚集索引。没有“原始存储”，聚集索引是表，表是聚集索引。聚集索引被组织为[B 树](http://en.wikipedia.org/wiki/B-tree)结构（不要与二叉树混淆）。

2) 列存储非聚集索引是表上的二级索引。与任何二级（非聚集）索引一样，非聚集索引中的每一行都是表基堆或聚集索引中数据的副本。列存储索引不是 B 树，也不是堆，而是一种针对面向列存储优化的新型数据组织。要了解面向列的存储的一般工作原理，请阅读[C-Store 论文](http://db.lcs.mit.edu/projects/cstore/vldb.pdf)。

3) 不可以。添加任何性质的非聚集索引，包括 XML、空间和列存储等特殊索引，绝不会从表基堆或聚集索引中删除数据。非聚集索引始终包含数据的副本。添加非聚集列存储索引不会以任何方式更改表基堆或聚集索引中的行和列（我怀疑您称之为“实际存储”）。

# kendo-ui - Kendoui 网格：在刷新时记住扩展的细节网格

> ID：10265548
> 
> 赞同：3
> 
> 时间：2012-04-22T05:42:41.760
> 
> 标签：kendo-ui

> **可能重复：**
> [记住在 Kendo-UI 中刷新时扩展的细节网格](https://stackoverflow.com/questions/12095392/remember-expanded-detail-grids-on-refresh-in-kendo-ui)

我有一个使用 detailInit 方法实现的网格内网格场景。在这里，当用户进行编辑时，我会进行一些计算，这些计算会更改父子节点中的数据。然后刷新数据，我将调用 datasource.read 来呈现数据。这有效并且显示了数据，但是任何展开的细节网格都会被折叠，有什么办法可以防止这种情况发生。

# javascript - 为什么要在 $(function () { ... }) 内部声明？

> ID：10265553
> 
> 赞同：3
> 
> 时间：2012-04-22T05:43:34.557
> 
> 标签：javascript, jquery

我正在查看的应用程序加载了一个外部 javascript 文件，如下所示：

```
$(function () {

    // Don't allow browser caching of forms
    $.ajaxSetup({ cache: false });

    var dialogs = {};

    var getValidationSummaryErrors = function ($form) {
        // We verify if we created it beforehand
        ...
        ...
        }
        return errorSummary;
    }; 
```

我知道该文件设置了一些变量，并且还声明了一个名为 getValidationSummaryErrors 的函数。

我不明白的是为什么这一切都在里面

```
$(function () {  ... } 
```

这样做的目的是什么？我可以在没有 "$(function () { }" 的情况下仅在平面文件中声明变量和内容吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T05:46:12.717

`$(function() { ... });`只是 的缩写`$(document).ready(function() { ... });`，它确保在 DOM 准备好之前不会执行代码，否则一些影响 DOM 的代码可能无法正常工作。

见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T05:46:03.763

```
$(function () {  ... }); 
```

意味着该函数将在页面（DOM 部分）加载后运行，而不是在代码解析时运行。这可以确保页面加载得更快，并且所有必要的东西都可用于运行 javascript。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T05:47:55.453

`$()`是 的快捷方式`jQuery.ready()`，它在页面 DOM 完全加载后执行代码。有时您想在执行某些操作之前确保文档已准备就绪。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T06:54:24.677

这是 $(document).ready(function() {...}) "的简明表示法。**注意：**当 DOM 被加载时，jQuery 文档准备就绪。它不会等待整个页面（包括图像和之类）加载。

实际上，您放入的任何脚本都会`<head>`立即执行，即如果脚本与 DOM 交互，则它需要准备好。

第三，需要分离关注点。理想情况下，您的 javaScript 和 HTML 位于不同的文件中。如果您遵循这一点，您的 HTML 中将根本没有任何内嵌脚本标签。

# javascript - Javascript：Keydown 事件：“向上”箭头键防止进一步的箭头键 Keydown 事件？（答案：键盘重影）

> ID：10265560
> 
> 赞同：9
> 
> 时间：2012-04-22T05:45:22.240
> 
> 标签：javascript, html, keyboard, keydown, onkeydown

我发现了很多相关的问题（在这里和其他地方），但还没有专门找到这个。

我正在尝试侦听箭头键（37-40）的 keydown 事件，但是当以特定顺序使用箭头键时，后续箭头不会生成“keydown”事件。

示例： [http ://blog.pothoven.net/2008/05/keydown-vs-keypress-in-javascript.html](http://blog.pothoven.net/2008/05/keydown-vs-keypress-in-javascript.html)

1.  在该页面上，单击“在此处输入->”框。
2.  按住右箭头键：表格更新为键码 39
3.  在继续按住右箭头键的同时，按住上箭头键：表格更新为 38
4.  在继续按住左右箭头键的同时，按住左箭头键：表格*不*更新

但是，如果我做同样的事情但使用*向下*箭头键而不是*向上*箭头键，那么它会按预期工作。

此外，如果我使用键盘而不是箭头键，它会按预期工作。

我正在阻止 keydown 事件的正常操作（通过在事件侦听器中返回 false 和调用 preventDefault() ），但行为仍然存在。

我以为这可能是我的键盘，但它发生在笔记本电脑和朋友的机器上。

有没有人知道发生了什么？或者一些关于解决方法的好主意？

[编辑] 这是我的意思的一个例子。我意识到这可能不适用于所有浏览器，但我只是将它放在我的笔记本电脑上以展示我正在发生的事情（在 w7 上的 chrome 以及 mac os 10.6.8 上的 chrome 和 safari 上）

```
<html>
<body>
<script>

var keysDown = {};
addEventListener("keydown", function(e) {
    keysDown[e.keyCode] = true;
    document.getElementById('latestKeydown').value=e.keyCode;
}, false);

addEventListener("keyup",function(e){
    delete keysDown[e.keyCode];
}, false);

var loop = function(){
    document.getElementById('upinput').value=keysDown[38];
    document.getElementById('downinput').value=keysDown[40];
    document.getElementById('leftinput').value=keysDown[37];
    document.getElementById('rightinput').value=keysDown[39];
}

setInterval(loop,1);

</script>
Up: <input id="upinput" type=text size=10><br />
Down: <input id="downinput" type=text size=10><br />
Left: <input id="leftinput" type=text size=10><br />
Right: <input id="rightinput" type=text size=10><br />
Recent Keydown: <input id="latestKeydown" type=text size=10><br />

</body>
</html> 
```

再一次，问题是：如果我按住 A，然后是 S，然后是 D，​​然后是 F，然后是 G，你可以看到每次我开始按住一个新键时“Recent Keydown”都会更新。

但是，如果我按住右箭头，然后是向上箭头，然后是左箭头，我看不到左箭头键的“Recent Keydown”更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T06:04:47.197

我不能就此发表权威，但根据[https://stackoverflow.com/a/4177260/562209](https://stackoverflow.com/a/4177260/562209)，除非您同时按下修饰键和非修饰键，关于多次按键“由于键盘的接线方式，PC 可能无法理解它”。

# java - 读取和比较文件中的字符和字符串

> ID：10265565
> 
> 赞同：2
> 
> 时间：2012-04-22T05:47:13.133
> 
> 标签：java

下面的代码从文件“helpFile.txt”中读取并检查由“#”表示的索引。从文件中读取的变量存储在整数 c 中，如果读取的字符是“#”，则与“#”进行比较，而不将整数转换为字符。我想知道比较是否有效，因为编译器没有显示任何错误。另外，假设程序在文件中找到了“#”，并且一个名为“topic”的字符串紧跟在“#”之后，并使用 readLine() 读取它。'String info = br.readLine()' 将只是 'topic' 还是 '#'+'topic'？抱歉问了这么长的问题。非常感谢帮助。

boolean helpOn（字符串什么）{

```
 private BufferedReader br;
    private String info, topic;
    private static PrintWriter pw = new PrintWriter(System.out, true);
    int c;

        br = new BufferedReader(new FileReader("helpFile.txt"));

    try{
        do{
            //read characters until '#' is found
            c = br.read();

            if(***c=='#'***){   //check if the character is '#'
                pw.println(c);
                if((**topic=br.readLine()**).equalsIgnoreCase(what)){   //check if 'what' string is equal to 's' which is the string after '#'
                    while((info=br.readLine())!=null){  //print info until the end of info
                        if(info!=null)
                            pw.println(info);
                    }
                    return true;
                }
            }
        }
        while(c!=-1);
    }
    catch(IOException ex){
        pw.println("File error.");
        ex.printStackTrace();
        try{
            br.close();
        }
        catch(IOException e){
            pw.println("Error closing file.");
            e.printStackTrace();
        }
        return false;
    }

    try{
        br.close();
    }
    catch(IOException ex){
        pw.println("Error closing file.");
        ex.printStackTrace();
    }
    return false; //topic not found
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:21:47.813

我试过你的代码，它对我来说很好，我想你需要检查你的“helpFile.txt”。我在里面使用了这个。

> 阿达#你好
> 
> 你好吗

这就是我得到的结果。

> c: 35
> 
> 话题：你好
> 
> 信息：你好

我打印了你使用的所有三个变量。c、主题、信息。现在，由于您在读取字符后使用 readline()，因此您必须在“helpFile.txt”中的下一行提供您的“信息”

info 将包含主题之后的任何内容，因为您正在使用 readline() 函数，它将转到下一行。试试我的例子。

一旦遇到“#”，你的 var

> C 将有“#”(35)。

然后

> 由于readline（），主题将在“#”之后直到行尾有任何内容；

然后

> info 将在主题后有下一行。

如果您正确格式化 helpFile.txt，这将正常工作

**编辑**

> 我每次都必须指定完整的文件名

您正在使用 eclipse，我猜您正在将文件保存在“SRC”文件夹中。将它们保存在您的项目文件夹中。就在 SRC 文件夹上方的一个，然后执行此操作。

```
br = new BufferedReader(new FileReader("helpFile.txt")); 
```

它应该工作。

**EDIT2** 你不需要检查 null 的信息两次

```
while((info=br.readLine())!=null){
//print info until the end of
//  if(info!=null) noT needed, u alreay did that above
pw.println("info"+info);
             } 
```

如果为NULL，它将自动跳出循环。

**编辑3**

> 我不想打印所有的文本

当您使用 # 标记块的开始时，您可以使用任何东西来标记它的结束。例如

> **帮助文件.txt**
> 
> 阿达#你好
> 
> 你好吗
> 
> $
> 
> 其他文字在这里
> 
> 等等等等等等...
> 
> ...

现在，您可以将 while 修改为：

```
while(!(info=br.readLine()).equals("$")){
      pw.println("info"+info);
                            } 
```

循环将在获得“$”后立即退出，之后不会打印任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:24:15.360

您可能想阅读您正在使用的类 (BufferedReader) 的 javadoc，它可以在[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29)找到，但我认为将字符与 == 进行比较是可以的，因为 char 实际上是一种数字类型。但是我建议您阅读有关编码的更多信息，因为我认为 FileReader 将使用默认平台编码来读取您的文件，而这可能不是您的文件编码。通知文件的编码始终是一种好习惯。关于第二个问题，根据 javadoc（再次），它将读取整行（而不是从您读取 char 的点开始）。希望对您有所帮助，我想稍后再运行它以查看结果

# entity-framework - 如何在 Code First 流畅映射中创建所需的继承属性？

> ID：10265571
> 
> 赞同：0
> 
> 时间：2012-04-22T05:48:09.013
> 
> 标签：entity-framework, ef-code-first

我有以下设置，为简洁起见进行了删节：

```
public abstract class AuditableEntity
{
    public int Id { get; set; }
    public Login Login { get; set; }  // Login that create this identity.
}

public class Login: AuditableEntity
{
    public Security Security { get; set; }
    public Guid SessionGuid { get; set; }
}

public class Security: AuditableEntity
{
    public string UserName { get; set; }
    public string PasswordHash { get; set; }
} 
```

现在只是实体本身`Login`不需要。`Login`实际上它不属于该表，因此我忽略了它：

```
modelBuilder.Entity<Login>().Ignore(l => l.Login); 
```

我希望它在所有其他表上都需要，但是当我尝试使其需要时`User`：

```
modelBuilder.Entity<Security.Security>().Property(p => p.Login).IsRequired(); 
```

我收到一个编译错误，“'Login' 类型必须是不可为空的值类型才能将其用作参数 'T'”。我注意到我可以在`Ignore`之前的调用中将它用作参数“T”，所以我假设这是其他一些隐藏的 T。

我立即显而易见的解决方案不是很优雅：

1.  `Login`对in使用 FK 值而不是参考属性`AuditableEntity`。
2.  创建一个没有 的新基类`Login`，另一个派生自添加的基类`Login`，然后从最高基类继承我的 Login 类，并从其直接后代继承所有其他类。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:55:55.283

您正在对本机 SQL 属性使用属性语法。您实际上想使用 Nav 属性语法，例如`.HasRequired(t=>t.Login).WithMany()`或类似的东西

请参阅[http://msdn.microsoft.com/en-us/library/hh295843(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh295843(v=vs.103).aspx)和*使用一个导航属性配置关系*部分

# java - java在递归函数中保留信息

> ID：10265576
> 
> 赞同：16
> 
> 时间：2012-04-22T05:48:58.670
> 
> 标签：java, recursion

是否可以通过 java 的辅助函数保留信息，而不使用静态变量。

例如，

```
public void foo(){
    int v = 0;
    fooHelper(2);
}

public void fooHelper(int depth){
    v++;
    fooHelper(depth-1)
} 
```

即我想更新变量 v 而不会丢失每个递归案例的信息，而不必访问函数外部的变量。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-22T16:34:19.207

忘记所有告诉您声明属性或在每个递归调用中更新可变对象的答案。在真正的函数式递归样式中，您通过将信息作为参数和/或返回类型传递来“保留”信息。

让我用一个简单的例子来说明，假设你想递归地计算一个`int[]`. 这里，*状态*（递归调用之间需要保留的信息）是数组中的当前索引和到目前为止的总和。这是如何做到的：

```
public int sum(int[] array) {
    return sum(array, 0, 0); 
}

private int sum(int[] array, int idx, int acc) {
    if (idx == array.length)
        return acc;
    return sum(array, idx+1, acc+array[idx]);
} 
```

像这样称呼它：

```
int[] array = {1, 2, 3};
System.out.println(sum(array)); 
```

如您所见，无需声明（静态或实例）属性，也无需传递和修改可变对象（列表、映射）——我什至没有使用局部变量，因为解决问题所需的所有信息问题作为方法参数存在。

在您问题的代码中，`v`变量应该执行`acc`参数在我的回答中所做的事情，即：每次调用递归时修改累积值。最后，您只需要从辅助函数（必须没有`void`返回类型）返回累积值，这就是您将在`foo()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T05:51:34.597

在范围内声明的变量（例如方法）只能在此范围内访问（例如不能在另一个方法中）。

如果信息仅与方法相关，请将变量保留在方法中。如果信息与整个对象/类状态相关，请将其保留为类成员（静态/非静态）。

例如：

```
public void someRecursiveMethod(int num) {
    while (num < 10) {
        num++;
        someRecursiveMethod(num);
        System.out.println("Current num = " + num);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T05:54:29.100

您可以创建一个新类 (yuck)，或者将变量作为参数传递并在 fooHelper 中返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T05:55:13.857

为什么不让它成为一个实例变量（不一定是静态的）......？

```
public class Recursive {
    int v = 0;
    public void foo(){

        fooHelper(2);
        System.out.println(v);
    }

    public void fooHelper(int depth){
        v++;
        if(depth-1!=0)//Added this because I was getting an StackOverflowError
        fooHelper(depth-1);
    }

    public static void main(String[] args) {
        Recursive r = new Recursive();
        r.foo();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T05:55:56.873

您可以返回一个列表或类似的数据结构：

```
public List<Integer> fooHelper( int v, int depth ){
    if( depth == 0 ) return new ArrayList();

    v++;
    List<Integer> result = fooHelper( v, depth-1 );

    result.add( new Integer(v) );

    return result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T06:01:58.490

因为变量 v 是原始类型，所以对其所做的更改在函数范围之外是不可见的。您可以在类中声明变量 v，例如 State 并将状态对象传递给递归函数以获得所需的效果。

```
public void foo(){
    State state = new State();
    fooHelper(state, 2);
}

public void fooHelper(State state, int depth){
    state.v++;
    fooHelper(state, depth-1);
}

class State {
    int v;
} 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-22T06:02:10.817

您可以传递一个对象来存储每个递归调用的更新。类似于下面的那个。

```
public static void fooHelper(int depth, HashMap map){
      map.put(depth, "Call " + depth);
      if (depth > 0)
      {
        fooHelper(depth-1, map);
      }
      return;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-22T06:02:35.840

我认为这被称为记忆。看起来像

```
class Fibonacci
{
     public Map < Integer , Integer > memorized = new HashMap < > ( ) ;

     public int fib ( int n )
     {
           if ( memoized . containsKey ( n ) )
           {
                 return memoized . get ( n ) ;
           }
           else
           {
                 int fib = // calculate recursively
                 memoized . put ( n , fib ) ;
                 return fib ;
           }
     }
} 
```

您应该能够从此算法中获得不错的（不是最佳的）性能。递归斐波那契算法性能糟糕的主要原因是 b/c 它重复计算相同的值。使用递归+记忆，它永远不会计算任何值超过一次。

感谢@Aristide 指出记忆和记忆之间的细微差别。

# c# - 如何在 Visual Studio 2010 中智能定位用户界面组件？

> ID：10265579
> 
> 赞同：0
> 
> 时间：2012-04-22T05:49:36.587
> 
> 标签：c#, winforms, visual-studio-2010, user-interface

我知道我可以创建一个基本表单，然后继承并扩展它，但这并不是我所指的。

我想做一些简单的事情，例如从一个选项卡复制标签或文本框，然后将其粘贴到另一个选项卡上完全相同的坐标中。Visual Studio 2010 是否有任何工具可以简化此操作（因此我不必手动检查每个组件的 Top 和 Left 属性）。一般来说，是否有一些工具可以使这类任务更容易（例如，粘贴在相同的左侧、相同的顶部、相同的右侧、相同的底部、相同的宽度、相同的高度）？

在这个领域有什么好的想法吗？**可以与 Visual Studio 2010 一起使用或在其中使用的 GUI 标准执行器插件或工具之类的东西。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:36:01.770

如果您多选控件并复制和过去，它们的位置将保持相对于彼此的位置，因此您只需记住一个控件的位置，其余的就会跟随。

另一种解决方法是将虚拟控件置于 0,0 并始终使用该虚拟控件和您想要的控件进行多选。这样你就有了一个你知道在 0,0 的锚点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:17:09.537

克隆控件很麻烦，它们的属性太多了。但是这个问题听起来像是在谈论 TabControl 并且需要在每个选项卡上显示一个特定的控件。实现起来很简单，只需更改控件的 Parent 属性：

```
 private void tabControl1_SelectedIndexChanged(object sender, EventArgs e) {
        button1.Parent = tabControl1.SelectedTab;
    } 
```

假设 button1 是最初放置在第一个标签页上的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:29:58.863

似乎 Visual Studio 2010 没有任何内置工具/方法可以使这更容易（据我所知）。也许明智的*做法*是不要浪费太多时间寻找捷径，只需检查坐标即可。它可能比使用所需的 IDE 插件/工具更好地预防痴呆症。

# jquery - 更改 asp.net 中的复选框列表呈现

> ID：10265581
> 
> 赞同：0
> 
> 时间：2012-04-22T05:49:45.490
> 
> 标签：jquery, asp.net, label, html, checkboxlist

默认情况下，asp.net 中的 CheckBoxlist 控件呈现为表格，每一行都有一个输入类型 checkbox 和一个 label 。

```
<label for="ctl00_ContentPlaceHolder1_chbStars_0">1</label> 
```

我想将 label 更改为 span tag 。

我应该使用 jquery 来查找该表的每个元素并更改它还是我缺少任何其他属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:03:32.933

当然，您可以为此使用[.replaceWith()](http://api.jquery.com/replaceWith/)

```
 $("label").replaceWith("<span>" + $(this).html() + "</span>"); 
```

# visual-c++ - 为什么在 Win 7 x86 VC++10 中编译的 Oracle OCCI 程序在 Win XP sp3 客户端 PC 中崩溃？

> ID：10265585
> 
> 赞同：0
> 
> 时间：2012-04-22T05:52:28.623
> 
> 标签：visual-c++, oracle11g, occi

我使用 Oracle OCCI 库在 Win 7 32 位下生成了一个 VC++ 程序。它在我的计算机上运行良好，但是当我将可执行文件、oraocci11.dll 和 oci.dll 复制到没有 VC++ 但安装了 VC10 可分发软件的客户端计算机时，它崩溃了。我花了很多时间试图解决这个问题，但没有成功。

有没有人遇到过这种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:22:19.427

我找到了崩溃的原因。就我而言，我还必须包含以下组件： oraociei11.dll oraociei11.sym

我真的应该在用户计算机上安装所有的即时客户端组件，但没有理由证明我制作的独立程序只能恢复很少的信息。

问候。

# python - 在 python 中使用 StringIO 的 read() 获取数据失败

> ID：10265593
> 
> 赞同：78
> 
> 时间：2012-04-22T05:55:02.783
> 
> 标签：python, stringio

使用Python2.7版本。下面是我的示例代码。

```
import StringIO
import sys

buff = StringIO.StringIO()
buff.write("hello")
print buff.read() 
```

在上面的程序中，read() 没有返回任何内容，而 getvalue() 则返回“你好”。谁能帮我解决这个问题？我需要 read() 因为我的以下代码涉及读取“n”个字节。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-04-22T06:00:35.503

您需要将缓冲区位置重置为开头。你可以这样做`buff.seek(0)`。

每次读取或写入缓冲区时，位置都会提前一位。假设您从一个空缓冲区开始。

缓冲区值为`""`，缓冲区 pos 为`0`。你做`buff.write("hello")`。显然缓冲区值是 now `hello`。然而，缓冲位置现在是`5`。当您调用时`read()`，位置 5 之后没有任何内容可读取！所以它返回一个空字符串。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-07-28T23:55:52.743

```
In [38]: out_2 = StringIO.StringIO('not use write') # be initialized to an existing string by passing the string to the constructor

In [39]: out_2.getvalue()
Out[39]: 'not use write'

In [40]: out_2.read()
Out[40]: 'not use write' 
```

或者

```
In [5]: out = StringIO.StringIO()

In [6]: out.write('use write')

In [8]: out.seek(0)

In [9]: out.read()
Out[9]: 'use write' 
```

# c# - 当我想要完全执行如果我没有添加 ISerializable 会做的事情时，如何在具有 [Serializable] 的类上实现 ISerializable？

> ID：10265602
> 
> 赞同：3
> 
> 时间：2012-04-22T05:57:11.977
> 
> 标签：c#, generics, serialization, reflection

我有一堂课，里面有一些我正在序列化的数据：

```
[Serializable]
public class SomeData {
    public int NumericField;
    public string StringField;
} 
```

我有一个很好的方便的扩展方法：

```
public static string ToJson<T> (this T value) {
    // yay no compile-time checks for [Serializable]?
    if (!typeof(T).IsSerializable)
        throw new SerializationException("Object lacks [Serializable] attribute");

    var serializer = new DataContractJsonSerializer(typeof(T));

    using (var stream = new MemoryStream()) {
        using (var writer = JsonReaderWriterFactory.CreateJsonWriter(stream, Encoding.UTF8)) {
            serializer.WriteObject(writer, value);
        }

        return Encoding.UTF8.GetString(stream.ToArray());
    }
} 
```

我真的更希望我的类`SomeData`实现了`ISerializable`，但是当我添加它时，我被告知我需要添加一个方法：

```
error CS0535: 'SomeData' does not implement interface member
System.Runtime.Serialization.ISerializable.GetObjectData(
System.Runtime.Serialization.SerializationInfo, 
System.Runtime.Serialization.StreamingContext)' 
```

问题只是我希望它**完全按照**它当前所做的那样做，但也限制`ToJson<T>`在`ISerializable`类中，所以没有人会不小心传递给它一些会引发可避免异常的东西。像这样：

```
public static string ToJson<T> (this T value) where T : ISerializable 
```

`GetObjectData`如果我不添加接口，是否有一个简洁的实现或其他一些技巧可以复制我会得到的确切行为`ISerializable`？我想要一些我可以包含在我继承的类中的东西，或者一些简洁的东西（并且总是完全相同）我可以粘贴到我想要确切`[Serializable]`发生的所有类中。通用的东西。性能不是一个大问题，但我只能使用 .Net Framework 3.5。

更新：

我非常愿意使用`[DataContract]`代替`[Serializable]`，但是如果我这样做了，是否有一种通用的方法可以实现`ISerializable`，所以`[DataContract]`如果我没有实现它会做什么`ISerializable`？`DataContract`（与您看到的任何地方相同的 qn `Serializable`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T07:46:25.093

你根本不需要`ISerializable`，也不需要`SerializationException`自己扔。`DataContractJsonSerializer`如果类型不可序列化，则会抛出异常。使用此序列化程序可序列化类型实际上有几个选项：

*   可序列化属性
*   DataContract 属性
*   ISerializable接口
*   无（适用于公共类型并序列化所有公共字段和属性）

让序列化程序执行检查将支持所有这些。

**更新**

在评论中进行了一些讨论之后，我想强调这一点：

永远**不可能**对可序列化性进行编译时检查（至少从 C# 5.0 开始）。将对象标记为`Serializable`甚至实现`ISerializable`接口并不能保证序列化程序不会在对象图中遇到不可序列化的类型并在运行时抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:19:43.290

1.  正如您自己评论的那样，添加一个空白接口并将其作为约束放在您的扩展方法中。您还可以将 ISerializable 添加[为多个类型参数约束的 C# 泛型语法约束](https://stackoverflow.com/questions/965580/c-sharp-generics-syntax-for-multiple-type-parameter-contraints)

2.  另一种选择是继承实现 ISerializable 和所需方法的基类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T15:38:56.110

若要解决此问题，请在转换后的 Visual C# .NET 类中实现 ISerializable.GetObjectData 方法。为此，在转换后的 Visual C# .NET 类中添加以下代码：

```
void System.Runtime.Serialization.ISerializable.GetObjectData(
    System.Runtime.Serialization.SerializationInfo info,
    System.Runtime.Serialization.StreamingContext context)
{
    // Code as required
} 
```

# python - Python：内存存储在单独的进程中

> ID：10265603
> 
> 赞同：0
> 
> 时间：2012-04-22T05:57:22.910
> 
> 标签：python, memcached, twisted

我正在用 Python 构建一个服务器，并且正在考虑将内存存储在一个单独的进程中，以便可以轻松升级和维护具有业务逻辑的进程。我认为 memcached 可能是我正在寻找的东西，但在我粗略的检查中，它似乎不能很好地存储 python 对象（Twisted 连接对象）。

在 python 进程之间传递 (key:value) 对象的最简单方法是什么？因为这是在 Twisted 中，所以我所追求的是最异步友好的方法。

对此设计的一般反馈也值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:23:42.213

从模块中查看`Queue`和`Pipe`类。`multiprocessing`该[文档](http://docs.python.org/library/multiprocessing.html#exchanging-objects-between-processes)有示例。

# android - eclipse android应用程序错误

> ID：10265605
> 
> 赞同：0
> 
> 时间：2012-04-22T05:57:51.817
> 
> 标签：android, eclipse

我在 Eclipse 中运行应用程序时遇到问题，我无法弄清楚问题所在。因为项目文件中没有错误。我已经重新安装了eclipse，之后我遇到了问题。文件

```
package com.goby.bus;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class GobybusActivity extends Activity {
    WebView mWebView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mWebView = (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl("file:///android_asset/index.html");
        mWebView.setWebViewClient(new mWebViewClient());
        mWebView.setBackgroundColor(Color.WHITE);
    }

    private class mWebViewClient extends WebViewClient {        

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

} 
```

日志文件：

```
04-22 11:21:54.508: D/AndroidRuntime(623): Shutting down VM
04-22 11:21:54.528: W/dalvikvm(623): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-22 11:21:54.618: E/AndroidRuntime(623): FATAL EXCEPTION: main
04-22 11:21:54.618: E/AndroidRuntime(623): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.goby.bus/com.goby.bus.MainActivity}: java.lang.ClassNotFoundException: com.goby.bus.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.goby.bus-1.apk]
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.os.Looper.loop(Looper.java:123)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-22 11:21:54.618: E/AndroidRuntime(623):  at java.lang.reflect.Method.invokeNative(Native Method)
04-22 11:21:54.618: E/AndroidRuntime(623):  at java.lang.reflect.Method.invoke(Method.java:521)
04-22 11:21:54.618: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-22 11:21:54.618: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-22 11:21:54.618: E/AndroidRuntime(623):  at dalvik.system.NativeStart.main(Native Method)
04-22 11:21:54.618: E/AndroidRuntime(623): Caused by: java.lang.ClassNotFoundException: com.goby.bus.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.goby.bus-1.apk]
04-22 11:21:54.618: E/AndroidRuntime(623):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-22 11:21:54.618: E/AndroidRuntime(623):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-22 11:21:54.618: E/AndroidRuntime(623):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-22 11:21:54.618: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 
```

欢迎大家回复。。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T06:00:18.477

似乎 XML 中指定的活动名称与您的类名称不匹配，如下行所示：

> 04-22 11:21:54.618: E/AndroidRuntime(623): 由: java.lang.ClassNotFoundException: com.goby.bus.MainActivity in loader dalvik.system.PathClassLoader [/data/app/com.goby.bus -1.apk]

在您的 android 清单 XML 中，更改

```
<activity android:name=".MainActivity "  ... > 
```

至

```
<activity android:name=".GobybusActivity"  ... > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T22:12:24.757

移动

```
WebView mWebView; 
```

以上

```
mWebView = (WebView) findViewById(R.id.webview); 
```

# mysql - 持有一个数组

> ID：10265609
> 
> 赞同：2
> 
> 时间：2012-04-22T06:00:10.833
> 
> 标签：mysql, sql, arrays

我正在尝试使用名为`MEETING`.

所以 a 的每个实例`meeting`，就像现实生活中一样可以包含可变数量的人。

所以`meeting1`（在**​​MEETING**里面）可能包含`user1`, `user2`, `user3`.

但是`meetings2`（再次在**MEETING**内部）可能包含`user1`, `user4`, `user6`, `user7`.

我将如何处理这种情况。我正在考虑创建一个数组，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T06:09:04.330

您将使用所谓的连接表。您将拥有三个表：MEETING、USER 和连接表（可以称为 MEETING_USER 或类似名称）。您的用户表将包含有关每个用户的信息（至少，一些标识符和用户名）。每个会议也将有一个唯一的 ID。然后，您的联接表将包含格式为 的行，会议中的每个用户都有一个新条目。这促进了所谓的多对多关系，因为每个会议可以有很多用户并且每个用户可以参加很多会议。

MySQL 中的一些 sql 引擎允许您添加“外键映射”，以便在搜索会议中的所有用户或用户参加的所有会议时运行得非常快。其他数据库服务器（MSSQL 等）也支持这种东西。

例子：

*   会议 1 的 ID 为 123
*   会议 2 的 ID 为 345
*   用户 1 的 id 为 3
*   用户 2 的 id 为 4
*   用户 3 的 id 为 5

如果用户 1 和 3 参加了会议 1，则连接表的某处将包含以下条目：

*   123, 3（会议 1，用户 1）
*   123, 5（会议 1，用户 3）

如果每个人都参加了第 2 次会议，则联接表中将包含以下条目：

*   345, 3（会议 2，用户 1）
*   345, 4（会议 2，用户 2）
*   345, 5（会议 3，用户 3）

# iphone - key 的值为 nil。为什么？

> ID：10265616
> 
> 赞同：0
> 
> 时间：2012-04-22T06:01:25.263
> 
> 标签：iphone, objective-c, ios, nsuserdefaults, key-value

早上好，我做了一个 IBAction 方法，它将一些对象保存到一个数组中：

```
-(IBAction)saveToFav:(id)sender
{
    NSUserDefaults *newDefaults = [NSUserDefaults standardUserDefaults];
    favorites = [[NSMutableArray alloc]initWithArray:[newDefaults mutableArrayValueForKey:@"favorites"] copyItems:YES];

    // check if array already contains an object

    if (![favorites containsObject:self.title])
    {
        [favorites addObject:self.title];
    }
    [newDefaults setObject:favorites forKey:@"favorites"];
} 
```

但是，当我调用此方法时，应用程序崩溃并出现错误：

> [NSKeyValueSlowMutableArray getObjects:range:]: 对象 0x8939030 的关键收藏夹值为 nil'

为什么会这样？谢谢！

最大限度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:34:40.193

您的数据（收藏夹）似乎尚未写入您的默认值。您可以通过运行以下命令强制保存默认值：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:14:59.530

对于关键“收藏夹”，newDefaults 为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T06:25:13.663

在这一行

```
favorites = [[NSMutableArray alloc]initWithArray:[newDefaults mutableArrayValueForKey:@"favorites"] copyItems:YES]; 
```

`nil`正在分配给`favorites`。这样做的原因是，`newDefaults`它只是建立在上一行之上，并且是空的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T06:50:59.263

当您的应用完成加载时，添加以下内容：

```
NSMutableArray *array = [[NSMutableArray alloc]init]; 
[defaults setObject:array forKey:@"favorites"]; 
[defaults synchronize]; 
```

# java - 数组中字符的组合与java中的公式nPr

> ID：10265618
> 
> 赞同：0
> 
> 时间：2012-04-22T06:01:54.483
> 
> 标签：java, arrays, combinations, npr

有人可以告诉我如何使用公式 nPr 实现存储在数组中的字符值的组合。例如，如果我有一组 {a,b,v,f} 并且我想一次选择 2 个，那么答案应该是 {a,b} {a,v} {a,f} {b,v} {b,f} {v,f}。

或任何链接，如果此问题在网络上有解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:38:40.470

这是一个通用的实现：

```
static <T> List<List<T>> combinations( List<T> list, int n ){

    List<List<T>> result;

    if( list.size() <= n ){

        result = new ArrayList<List<T>>();
        result.add( new ArrayList<T>(list) );

    }else if( n <= 0 ){

        result = new ArrayList<List<T>>();
        result.add( new ArrayList<T>() );

    }else{

        List<T> sublist = list.subList( 1, list.size() );

        result = combinations( sublist, n );

        for( List<T> alist : combinations( sublist, n-1 ) ){
            List<T> thelist = new ArrayList<T>( alist );
            thelist.add( list.get(0) );
            result.add( thelist );
        }
    }

    return result;
} 
```

像这样使用它：

```
List<Character> list = new ArrayList<Character>();
list.add('a');
list.add('b');
list.add('c');
list.add('d');

List<List<Character>> combos = combinations( list, 2 ); 
```

这是一个[ideone](http://ideone.com/Akfpj)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:29:59.050

根据您的示例，我正在打印组合：

```
public class PrintCombinations {

    public static void main( final String[] args ) {
        // testing input 1
        int n = 2;
        char[] a = { 'a', 'b', 'v', 'f' };
        solve( n, a );

        // testing input 2
        n = 3;
        a = new char[] { '1', '2', '3', '4', '5' };
        solve( n, a );

    }

    private static void solve( final int n, final char[] a ) {
        final int[] selected = new int[n];
        print( n, a, 0, selected );
    }

    // need to know how many items are selected - n, input array - a
    // item which can be selected next - from and already selected items
    private static void print( final int n, final char[] a, final int from, final int[] selected ) {
        if ( n == 0 ) { // all selected, just print them
            for ( int i = 0; i < selected.length; ++i ) {
                System.out.print( a[ selected[ i ] ] + " " );
            }
            System.out.println();
            return;
        }
        // select one and use recursion for others
        for ( int i = from; i < a.length; ++i ) {
            selected[ selected.length - n ] = i;
            print( n - 1, a, i + 1, selected );
        }
    }
} 
```

但是你必须意识到，组合的数量是![n 大于 k 是 n!/k!*(nk)!](../Images/b243d9e73df8747e898210dd8cd889d0.png)，所以它是一个相当大的数字，例如![26 超过 13 是 10400600](../Images/ae92b741cf2d8ba1df624f157949c288.png)打印输出 10 百万个数组需要一段时间......

# html - css样式表路径，坚持文件本身所在的位置？

> ID：10265623
> 
> 赞同：0
> 
> 时间：2012-04-22T06:03:12.203
> 
> 标签：html, css, file, path

我在根文件夹中有一个 css 文件，它指的是里面的文件，相对于它的路径。

例如 stylesheet.css 和 image.png 在一个文件夹中，调用如下：

```
background-image:url('image.png'); 
```

当我将它附加到 index.html 时，如下所示：

```
<LINK rel="stylesheet" type="text/css" href="stylesheet.css"> 
```

...它加载得很好，但如果想将它附加到子文件夹的文件中：

```
<LINK rel="stylesheet" type="text/css" href="../template_style.css"> 
```

...模板加载，但它实际上是在它启动的 html 文件的文件夹中查找 image.png，而不是从 css 文件本身的文件夹中查找。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:09:16.663

添加 `<base href="http://www.example.com/">`到您的`head`

有了这个，你只需要添加：

`<link rel="stylesheet" type="text/css" href="stylesheet.css">`

`stylesheet.css`如果是域或子域，则如果您的 css 位于公共根文件夹 ( `http://www.example.com/stylesheet.css`)中，则 href 必须是

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:05:01.570

CSS 相对路径是相对于 CSS 文件本身的，而不是相对于加载 CSS 文件的页面。

我通常将 CSS 文件放在 /css 中，将 CSS 的图像放在 /css/images 中。然后你可以把你的图像相对像：

```
background-image:url('images/image.png'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T06:28:52.520

```
<link rel="stylesheet" type="text/css" href="../(supposed to be subfolders name)/template_style.css"> 
```

并且对于相同的图像，如果两者都在同一个文件夹中，请确保 css 和图像都在同一个文件夹或同一个地方。

```
background-image:url("../image.png"); 
```

如果你制作一个单独的图像文件夹，那就太好了。

```
background-image:url("../folder name/image.png"); 
```

# php - 如果用户只查看自己的数据 - 是否存在 XSS 风险？

> ID：10265624
> 
> 赞同：3
> 
> 时间：2012-04-22T06:03:15.900
> 
> 标签：php, security, xss

如果我的网站只允许用户查看他们自己提交的数据，而永远不会有其他用户提交的数据（即没有一般的“帖子”等）——那么我的网站实际上是否存在 XSS 风险？

我仍将致力于 XSS 解决方案（如 httmlspecialchars() 等） - 但我很好奇攻击者是否可以通过查看他们自己的 XSS 攻击来获得任何东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T06:35:30.673

攻击者无法通过对自己使用跨站点脚本技术获得任何收益。跨站点脚本的目的是以恶意方式操纵向用户显示的页面元素，无论是网络钓鱼还是读取 cookie。换句话说，攻击只能影响客户端实体。

但是，重要的是要记住“用户只查看自己的数据”的含义。

假设我有一个网站，用户可以在其中拥有私人资料，只有他们自己可以看到。页面上有一个文本输入元素，允许用户输入他们的网站 URL。现在假设更新用户配置文件的表单使用 GET。

页面更新提交可能如下所示：

[http://www.example.com/privateprofile.pl?action=update&userwebpage=http://www.example.net](http://www.example.com/privateprofile.pl?action=update&userwebpage=http://www.example.net)

攻击者可能会通过欺骗用户加载 URL 来利用这一点：

[http://www.example.com/privateprofile.pl?action=update&userwebpage=](http://www.example.com/privateprofile.pl?action=update&userwebpage=) [malicious_js_code_here]

当然，这是一个相当微不足道的例子，但希望它展示了一般概念。令人担忧的是，他们可能会欺骗用户自己进入 XSS。当然，像这样的 XSS 攻击的可行性取决于您的具体实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:07:15.137

不，如果他们的所有数据都是私下查看的，就不会有真正的风险。XSS 的全部意义在于劫持另一个用户浏览器中的会话或其他个人信息。如果没有这样的机会，那么就没有 XSS 这样的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T06:07:23.403

是的——这根本不能保护你。其实这是正常的情况。您必须考虑的是，如果黑客可以使用 URL 将 XSS 植入您的站点，然后说服其他人打开该 URL，那么您的用户数据（cookie、密码等）可能会被窃取。

# javascript - 在 jquery 选项卡上单击

> ID：10265626
> 
> 赞同：0
> 
> 时间：2012-04-22T06:03:20.363
> 
> 标签：javascript, jquery, tabs, onclick

我有 3 个选项卡，在最后一个选项卡上我有一个带有提交按钮的表单。当用户点击提交时，我想显示一个对话框。问题：它显示一个框（没有我的文本）2 秒，页面正在刷新并进入第一个选项卡，所以我们看不到对话框。你对这个问题有任何想法吗？

这是代码的一个小示例：

```
 if (isset($_POST['Send'])) 
{ 
code to add in db
}

<script>
function thanks_referral() {
simpleModal("/thanks_referral.php",300,130);
    }
</script>

 <form method="post" onsubmit="return checkEmailContact(document.f.emailreferral.value);">
<input type="text" tabindex="1" name="name2" placeholder="friend's name" />
    <input type="email" tabindex="2" name="email2" placeholder="friend's company email" />
    <input type="submit" tabindex="4" name = "Send" onclick="" value="Send"  /></td></tr>
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:50:32.540

在表单上使用[.post()](http://api.jquery.com/jQuery.post/)并在回调中执行对话事件。

# php - 从帖子表单中获取无限循环。不确定是否是 htaccess 问题

> ID：10265627
> 
> 赞同：1
> 
> 时间：2012-04-22T06:04:23.067
> 
> 标签：php, .htaccess

提交 $_POST['form'] 时，如果空闲超过 8 或 9 分钟，我会收到超时错误；它总是在变化。这是错误的屏幕截图：

![在此处输入图像描述](../Images/bf6e1ed620fbce9b39fdb3822f5fc5f8.png)

这是我在错误日志中得到的：

```
[Sat Apr 21 20:15:00 2012] [error] [client .......] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

这不可能是我的脚本。这是一个非常标准的形式。此外，我在共享主机中拥有的所有 6 个站点上都出现此错误。这是我的 .htaccess 文件...

```
 Options +FollowSymLinks
    RewriteEngine On

    Options -Multiviews
    RewriteBase /

    RewriteRule ^([a-zA-Z0-9-]+/?)$ $1.php

    #edit forum question -- questions.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^edit/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+) edit.php?question_num=$1&question=$2 [NC]

    #edit forum question id -- questions.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^edit/([a-zA-Z0-9-]+) edit.php?question_num=$1 [NC]

    #usernames -- index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([a-zA-Z0-9-]+) index.php?post=$1 [NC] 
```

问题是任何帖子形式的站点范围。如果您等待很长时间提交，则会发生此超时错误。

我不认为这是 php.ini 的问题。我几乎已经涵盖了所有内容：

```
register_globals = off
allow_url_fopen = off

expose_php = Off
max_input_time = 18000
max_execution_time = 18000

;extension_dir = ./
upload_tmp_dir = ./tmp

;precision = 12

session.cache_expire = 10080
session.cookie_lifetime = 200000
session.gc_maxlifetime = 10000

memory_limit = 100M
post_max_size = 100M
file_uploads = On
upload_max_filesize = 192M 
```

检出 .htaccess 文件后，您能看到导致此问题的任何原因吗？或者，它是完全不同的东西吗？我还应该注意，我正在使用 cookie 并且没有会话数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:20:52.540

您的 htaccess 中需要一个 L 标志，否则它只会无限循环它们 -

```
# Important L flag! 
RewriteRule ^([a-zA-Z0-9-]+/?)$ $1.php [L]

#edit forum question -- questions.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^edit/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+) edit.php?question_num=$1&question=$2 [NC,L]

#edit forum question id -- questions.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Important $ dollar sign next line - otherwise it matches above rule
RewriteRule ^edit/([a-zA-Z0-9-]+)$ edit.php?question_num=$1 [NC,L]

#usernames -- index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-]+) index.php?post=$1 [NC,L] 
```

没有 L 它会重写规则并在重写后再次循环（再次重写）。

# ruby-on-rails - nested_attributes 字段未显示

> ID：10265628
> 
> 赞同：0
> 
> 时间：2012-04-22T06:04:28.943
> 
> 标签：ruby-on-rails, nested-attributes

在我当前的 Rails 应用程序中，我有一个用户模型，它 has_one :user_detail。目前，我无法让表单显示嵌套属性的字段，除非我已经使用 seed.rb 文件为其播种。

这是我的用户模型

```
class User < ActiveRecord::Base
  has_one :user_detail, :dependent => :destroy
  accepts_nested_attributes_for :user_detail
  attr_accessible :email, :password, :password_confirmation, :access_level, :first_name, :last_name, :user_detail_attributes
  has_secure_password
end 
```

和我的 UserDetail 模型

```
class UserDetail < ActiveRecord::Base
  belongs_to :user
end 
```

和我的表格

```
<%= form_for [:admin, @user] do |f| %>
  <p><%= f.text_field(:name, :placeholder => 'Name')%></p>
  <p><%= f.label(:email) %></p>
  <p><%= f.email_field(:email, :placeholder => 'Your Email')%></p>
  <p><%= f.password_field(:password, :placeholder => 'Choose a password') %></p>
  <p><%= f.password_field(:password_confirmation, :placeholder => 'Confirm Password') %></p>

    <%= f.fields_for :user_detail do |u| %>
      <p><%= u.text_field(:country, :placeholder => 'Country') %></p>
      <p><%= u.text_field(:state, :placeholder => 'State') %></p>
      <p><%= u.text_field(:city, :placeholder => 'City') %></p>
      <p><%= u.text_field(:phone, :placeholder => 'Phone') %> </p>
    <% end %>

  <p><%= submit_tag("Add Owner") %></p> 
```

田野不会出现，直到我用这个种子
.rb播种它们

```
UserDetail.delete_all
owner1detail = UserDetail.create(:zip => "84770",
                              :country => "US",
                              :state => "Ut",
                              :city => "St. George",
                              :user_id => owner1.id
                             ) 
```

我运行 rake db:seed。完成此操作并编辑现有用户后，这些字段就会显示出来，全部填写完毕。但是，在创建用户时，它们不会显示出来。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:37:32.713

我像这样将构建移动到我的控制器并且它有效

```
def new
  @user = User.new
  @user.build_user_detail
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:13:32.900

尝试预先构建它。

```
<%= form_for [:admin, @user] do |f| %>
  <p><%= f.text_field(:name, :placeholder => 'Name')%></p>
  <p><%= f.label(:email) %></p>
  <p><%= f.email_field(:email, :placeholder => 'Your Email')%></p>
  <p><%= f.password_field(:password, :placeholder => 'Choose a password') %></p>
  <p><%= f.password_field(:password_confirmation, :placeholder => 'Confirm Password') %></p>

    <% @user.user_detail.build if @user.user_detail.nil? %>

    <%= f.fields_for :user_detail do |u| %>
      <p><%= u.text_field(:country, :placeholder => 'Country') %></p>
      <p><%= u.text_field(:state, :placeholder => 'State') %></p>
      <p><%= u.text_field(:city, :placeholder => 'City') %></p>
      <p><%= u.text_field(:phone, :placeholder => 'Phone') %> </p>
    <% end %>

  <p><%= submit_tag("Add Owner") %></p> 
```

# javascript - 实现弹出书效果的算法是什么

> ID：10265634
> 
> 赞同：2
> 
> 时间：2012-04-22T06:04:59.380
> 
> 标签：javascript

下面是一个效果示例：

[http://2012.beercamp.com/](http://2012.beercamp.com/)

我查看了源代码，显然有一些算法计算旋转。有没有这种效果的资源，或者有人可以分解并用外行术语解释算法吗？

我尝试在 jsfiddle.net [jsfiddle](http://jsfiddle.net/colintoh/b5FTz/)中玩耍，但没有接近它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T06:41:52.207

Smashing Magazine在那个确切的网站上做了一个[完整的细分。](http://coding.smashingmagazine.com/2012/04/17/beercamp-an-experiment-with-css-3d/)

**编辑，回复评论**：`adj`不是“边”，而是“长度”。为了使弹出式书能够自行折叠而不是一团糟，内容的背景必须与它们所在的页面成一定角度。完全水平，书不起作用，完全垂直，从书的正面看不到任何东西。我们的作者选择了水平 15°，但这个选择是任意的。

一旦他选择了 15°，他就需要知道书的宽度。这就是他所说`adj`的。它是通过使用固定的“场景宽度”和任意角度创建的书的大小。他使用 Pythygoras 定理来得到它（因为数学不是他的强项），但如果你愿意，你可以用以下内容替换该行：

```
var adj = POPUP_WIDTH * Math.cos(degToRad(15)); 
```

# assembly - 在 MIPS 中铸造

> ID：10265639
> 
> 赞同：2
> 
> 时间：2012-04-22T06:05:20.067
> 
> 标签：assembly, casting, mips, mips32

我有一个有趣的问题！

我在 MIPS 中实现了一个记忆游戏，游戏首先在屏幕上随机打印一个 10-99 之间的数字，然后要求用户输入确切的数字。如果用户输入正确的数字，游戏会继续显示第一个数字和第二个随机生成的 10-99 之间的数字。并且这两个数字必须一个接一个地显示，它们之间有 3 秒的延迟。然后要求用户按照屏幕上出现的正确顺序输入数字。如果用户正确输入了两个数字，则游戏将继续输入三个数字，然后是四个数字，依此类推。

这是游戏的快速总结，但事情就是这样。

我想添加一个助手选项，如果用户输入字母 'H' ，程序会给他一个提示。

我用它来从接受数字的用户那里获取输入

> 李 $v0,5
> 
> 系统调用

这个“读取一个整数”但是一旦用户输入一个“H”它就会给出一个运行时错误，

我虽然'H'的值是：ASCII中的72，我把它作为用户用作提示的数字，但不幸的是，程序可能会生成一个随机数'72'并且当用户输入它时，它给了他一个提示，而他不想要这个提示，他只是想继续游戏

问题：

我正在寻找的是一种用高级语言进行这种铸造的方法或任何技巧。到目前为止，我找不到任何解决此问题的方法。

并且有什么方法可以清除 MIPS 中的屏幕或控制台？因为显然它是记忆游戏！所以数字应该消失！

任何关于此的建议或问题，完全欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T07:34:10.740

当从键盘输入到内存时，所有字符都可以表示为 ascii，但`read_int`系统调用将尝试从该 ascii 中解析一个整数，并且对于非数字字符它将失败。

唯一的选择是使用字符串。创建缓冲区

```
buf: .byte 0,0,0      #10-99, last byte is for null 
```

用于用户输入。读取字符串后，检查缓冲区中的第一个字符是否为“H”。

```
la $t1, buf
lb $t2, 0($t1)
li $t3, 72
beq $t2, $t3, help 
```

如果没有“H”，则继续从字符串中解析一个整数。

```
i = buf.length-2;
j = 1;
k = 0;
while(i >= 0) {    //go in reverse
    if(buf[i] != NULL) {
        k += (buf[i] - 48) * j
        j *= 10;
    }
    i--;
}
if(k == target)print("success"); 
```

每次提示时不要忘记清除缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:49:52.230

也许您可以使用读取字符（代码 12）而不是读取整数（代码 5）

如果您确实读取字符，则需要将 ascii 转换为整数。所以这意味着需要一些操作。但它可以比我认为的其他方式更容易完成。

* * *

blackcompe 对读取字符提出了一个很好的观点。

我猜你必须读取字符串（代码 8），然后通过循环和检查 ascii 中的数字或 H 来验证用户输入。如果输入无效，则返回错误消息或其他内容。

* * *

这里还有一些从 ascii 字符串转换为数字的伪代码。这假定一个有效的数字字符串。假设您只有两位数字，所以这可能是不必要的，但应该可以。

```
number = 0
for(i = 0; i < str.length; i++)
    number = 10 * number + ascii(str[i]) - ascii('0'); 
```

* * *

我同意 blackcompe 的答案要好得多。但我只是想证明转换循环确实有效。我想迭代一下，这只是将一个 ascii 数字字符串转换为一个数字。它不检查 H 并假定该数字可以是任意长度。此外，您仍然需要对其在 MIPS 中的工作进行调整。

这是一个示例，表明我的转换循环确实有效。这是用python重写的示例，因此可以进行测试。当然，在 python 中做这件事毫无意义。

```
def pointlesslyConvertStringToNumber(str):
    number = 0
    for c in str:
        //Note: ord is a function to convert a character to ascii
        number = 10 * number + ord(c) - ord('0')
    print number 
```

让我们使用数字 543：

```
pointlesslyConvertStringToNumber("543") 
```

以下是循环的分步说明：

1.  10 * 0 + 53 - 48 = 数字 = 5
2.  10 * 5 + 52 - 48 = 数字 = 54
3.  10 * 54 + 51 - 48 = 数字 = 543

* * *

这是基于上述内容的 MIPS 子程序。我知道这行得通，但我是 MIPS 初学者，所以请原谅任何愚蠢的错误。这再次假设一个有效的数字字符串。换句话说，另一个子程序将首先验证输入。

$a0 是以 null 结尾的字符串缓冲区的地址。旁边的注释是一个稍微修改的python函数，以更好地适应MIPS代码。但这并不完全是一对一的。

```
getNumber:                                  # def getNumber(input):
    addi  $sp, $sp, -8                      #
    sw    $ra, 4($sp)                       #
    sw    $a0, 0($sp)                       #
    add   $t0, $a0, $zero                   #
    add   $t1, $zero, $zero                 # i = 0
    addi  $t4, $zero, 10                    #
gnLoop:                                     # while(input[i] != None):
    lb    $t2, 0($t0)                       #
    beq   $t2, $zero, gnEnd                 # 
    mult  $t1, $t4                          # number = 10 * number
    mflo  $t1                               # 
    addi  $t3, $t2, -48                     # 
    add   $t1, $t1, $t3                     # number += ord(input[i]) - ord('0')
    addi  $t0, $t0, 1                       # i +=1
    j     gnLoop                            #
gnEnd:                                      # 
    lw    $a0, 0($sp)                       #
    lw    $ra, 4($sp)                       #
    addi  $sp, $sp, 8                       # 
    add   $v0, $zero, $t1                   # return number  
    jr    $ra                               # 
```

# batch-file - 如何在批处理脚本中“包含”数据文件？

> ID：10265642
> 
> 赞同：1
> 
> 时间：2012-04-22T06:06:46.260
> 
> 标签：batch-file

我想在批处理脚本中“包含”一个数据文件。让我向您解释一下我将如何在 Unix shell 脚本中执行此操作，这样就不用怀疑我在批处理脚本中要实现的目标。

```
#!/bin/bash
. data.txt # Load a data file.

# Sourcing a file (dot-command) imports code into the script, appending to the script
# same effect as the #include directive in a C program).
# The net result is the same as if the "sourced" lines of code were physically present in the body of the script.
# This is useful in situations when multiple scripts use a common data file or function library.

# Now, reference some data from that file.
echo "variable1 (from data.txt) = $variable1"
echo "variable3 (from data.txt) = $variable3" 
```

这是data.txt：

```
# This is a data file loaded by a script.
# Files of this type may contain variables, functions, etc.
# It may be loaded with a 'source' or '.' command by a shell script.
# Let's initialize some variables.
variable1=22
variable2=474
variable3=5
variable4=97
message1="Hello, how are you?"
message2="Enough for now. Goodbye." 
```

在批处理脚本中，我的意图是在 data.txt 中设置环境变量，并在后面创建的每个批处理脚本中“源”该文件。这也将帮助我通过仅修改一个文件（data.txt）而不是修改多个批处理脚本来更改环境变量。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T07:26:18.903

最简单的方法是将多个 SET 命令存储在 data.bat 文件中，然后任何批处理脚本都可以调用该文件。例如，这是 data.bat：

```
rem This is a data file loaded by a script.
rem Files of this type may contain variables and macros.
rem It may be loaded with a CALL THISFILE command by a Batch script.
rem Let's initialize some variables.
set variable1=22
set variable2=474
set variable3=5
set variable4=97
set message1="Hello, how are you?"
set message2="Enough for now. Goodbye." 
```

要在任何脚本中“获取”此数据文件，请使用：

```
call data.bat 
```

***附录***：“包含”具有功能的辅助（库）文件的方法。

使用“包含”文件的函数（子程序）不像变量那么直接，但可以做到。要在 Batch 中执行此操作，您需要将 data.bat 文件*物理*插入到原始 Batch 文件中。当然，这可以通过文本编辑器完成！但也可以借助一个非常简单的批处理文件 source.bat 以自动方式实现：

```
@echo off
rem Combine the Batch file given in first param with the library file
copy %1+data.bat "%~N1_FULL.bat"
rem And run the full version
%~N1_FULL.bat% 
```

例如，BASE.BAT：

```
@echo off
call :Initialize
echo variable1 (from data.bat) = %variable1%
echo variable3 (from data.bat) = %variable%
call :Display
rem IMPORTANT! This file MUST end with GOTO :EOF!
goto :EOF 
```

数据.BAT：

```
:Initialize
set variable1=22
set variable2=474
set variable3=5
set variable4=97
exit /B

:display
echo Hello, how are you?
echo Enough for now. Goodbye.
exit /B 
```

您甚至可以将 source.bat 做得更复杂，因此它会检查基础文件和库文件的修改日期，并仅在需要时创建 _FULL 版本。

我希望它有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:15:07.220

在 DOS 批处理文件中没有自动执行此操作的方法。您必须循环标记文件。就像是：

```
 for /f "tokens=1,2 delims==" %i in (data.txt) do set %i=%j 
```

当然，这行代码不考虑示例 data.txt 文件中的注释行。

# java - 尝试通过代理创建 HttpsURLConnection 时出错

> ID：10265643
> 
> 赞同：2
> 
> 时间：2012-04-22T06:06:54.323
> 
> 标签：java, httpurlconnection

当我尝试通过代理进行 url 连接时出现此错误

```
java.io.IOException: Unable to tunnel through proxy. Proxy returns "HTTP/1.1 405 Method Not Allowed"
    at sun.net.www.protocol.http.HttpURLConnection.doTunneling(Unknown Source)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(Unknown Source)
    at com.test.sslpost.main(sslpost.java:81) 
```

打开连接时会产生错误，如果我尝试不使用代理它工作正常。

请参阅下面描述的 java 代码

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.net.URL;
import java.net.URLEncoder;

import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public class sslpost {
    public static void main(String[] args) {
        try {
            TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                }

                public void checkClientTrusted(
                        java.security.cert.X509Certificate[] certs, String authType) {
                }

                public void checkServerTrusted(
                        java.security.cert.X509Certificate[] certs, String authType) {
                }
            } };

            try {

                SSLContext sc = SSLContext.getInstance("SSL");
                sc.init(null, trustAllCerts, new java.security.SecureRandom());
                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.setProperty("https.proxySet", "true");
            System.setProperty("https.proxyHost", "xxx.xxx.xxx.xxx");
            System.setProperty("https.proxyPort", "80");
            URL url = new URL("https://www.google.com");
            @SuppressWarnings("deprecation")
            HttpsURLConnection connection = (HttpsURLConnection) url
                    .openConnection();
            connection.setDoInput(true);
            connection.setDoOutput(true);

            connection.setRequestMethod("POST");
            connection.setFollowRedirects(true);

            String query = "serviceId="
                    + URLEncoder.encode("7");

            connection.setRequestProperty("Content-length",
                    String.valueOf(query.length()));
            connection.setRequestProperty("Content-Type",
                    "application/x-www- form-urlencoded");
            connection.setRequestProperty("User-Agent",
                    "Mozilla/4.0 (compatible; MSIE 5.0; Windows 98; DigExt)");

            DataOutputStream output = new DataOutputStream(
                    connection.getOutputStream());

            output.writeBytes(query);

            System.out.println("Resp Code:" + connection.getResponseCode());
            System.out.println("Resp Message:"
                    + connection.getResponseMessage());

            DataInputStream input = new DataInputStream(
                    connection.getInputStream());

            for (int c = input.read(); c != -1; c = input.read())
                System.out.print((char) c);
            input.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T08:55:20.993

你有没有调用“super.doGet(req, resp);” 在你的代码中？比如下面？

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    super.doGet(req, resp); 
```

我能够检查 super.doGet 的实现，然后您可以找到以下代码。

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    String protocol = req.getProtocol();
    String msg = lStrings.getString("http.method_get_not_supported");
    if (protocol.endsWith("1.1")) {
        resp.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, msg);
    } else {
       resp.sendError(HttpServletResponse.SC_BAD_REQUEST, msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:24:08.667

HTTPS 默认使用端口 443，而 HTTP 默认使用端口 80。

在您的代码中，您有这个

```
 System.setProperty("https.proxyPort", "80"); 
```

也许尝试将其设置为 443 而不是 80

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T06:52:01.387

我认为不需要更改代码。这意味着代理服务器无法建立隧道

您必须尝试使用​​不同的**https 代理**...

```
systemProp.https.proxyHost=""

systemProp.https.proxyPort=""

systemProp.https.proxyPassword=""

systemProp.https.proxyUser="" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-15T17:55:31.363

打开`C:\Users\yourUsername\.gradle`，您可能会发现一个`Gradle.build`包含您的代理设置的文件。删除后重试，如果找不到文件，可能是网络连接问题

# c# - 用于常见关联的 linq 查询

> ID：10265648
> 
> 赞同：2
> 
> 时间：2012-04-22T06:08:04.270
> 
> 标签：c#, linq

我有一个要解决的 linq 问题，我有一些用户可以属于多个组，现在我可以返回哪些用户属于一个组，如下所示：

```
 List<Student> students = new List<Student>();
    public List<Student> ReturnStudentByGroupName(string groupName)
    {
        List<Student> student = (from g in students
                              where
                                  (from t in g.StudentGroup where t.GroupName == groupName select t).Count() > 0
                              select g).ToList();
        return student;
    } 
```

我现在的问题是我需要找到多个组的共同用户吗？例如，谁是组 A 和组 B 的共同成员。我不是在寻找这两个组的用户列表，它应该只返回**同时**属于这两个组的用户。

有谁知道如何使用两个字符串作为输入，即字符串 firstgroupName、字符串 secondgroupName。然后返回普通学生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:17:53.603

```
IEnumerable<Student> StudentsOfGroup(Group g)
{
    return students.Where(s => s.StudentGroup.Contains(g));
}

IEnumerable<Student> CommonStudents(IEnumerable<Group> groups)
{
    return groups
        .Select(StudentsOfGroup)
        .Aggregate((acc, g) => acc.Intersect(g));
} 
```

或者根据组的数量，以下可能会更快：

```
IEnumberable<Student> CommonStudents(IEnumerable<Group> groups)
{
    var groupSet = new HashSet<Group>(groups);
    return students.Where(s => groupSet.IsSubsetOf(s.StudentGroup));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T06:21:17.030

```
IEnumberable<Student> GroupIntersection(IEnumerable<Group> groups)
{
    return students
        .Where(s => groups.All(g => s.StudentGroup.Contains(g)));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T06:33:52.080

好吧，您说您只想返回属于 A 组和 B 组的用户列表，因此您自然只需要使用两个条件而不是一个条件来修改 where 语句。

```
 List<Student> students = new List<Student>();
    public List<Student> GetIntersectingStudents(string groupOne, string groupTwo)
    {
        var student = from s in students
                      let grps = s.StudentGroup.ConvertAll(gn => gn.GroupName)
                      where grps.Contains(groupOne) && grps.Contains(groupTwo)
                      select s;
        return student.ToList();
    }
    public List<Student> GetIntersectingStudents(params string[] groups)
    {
        var student = from s in students
                      let grps = s.StudentGroup.ConvertAll(gn => gn.GroupName)
                      where !groups.Except(grps).Any()
                      select s;
        return student.ToList();
    } 
```

这里有几个方法，其中一个在方法中接受两个参数（你要求什么），另一个接受组列表（如果你需要从三个而不是两个等中获取）

**编辑：**

我想我也会把这个额外的方法放在那里，只是为了好玩。它编译了所有组及其成员的列表。

```
 public static Dictionary<string, List<Student>> GetStudentGroups()
    {
        var temp = from s in students
                   let grps = s.StudentGroup.ConvertAll(gn => gn.GroupName)
                   from grp in grps
                   group s by grp
                   into g
                   select g;
        return temp.ToDictionary(grping => grping.Key, studnt => studnt.ToList());
    } 
```

# lisp - 如何在 Common Lisp 中加载库？

> ID：10265650
> 
> 赞同：2
> 
> 时间：2012-04-22T06:08:46.980
> 
> 标签：lisp, common-lisp

当我使用 C++ 时，我可以通过使用`.a`文件或`.so`Makefile 中的文件来链接库。

但是如何在 Common Lisp 中加载库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:40:36.660

有点不清楚“在 Common Lisp 中加载库”是什么意思。

它可能意味着“我如何加载 Common Lisp 库”，在这种情况下，答案通常是“通过在 ASDF 系统定义中为您的程序引用您的包，它会在您的系统加载时自动加载”。

它可能意味着“我如何加载用另一种语言编写的库”，在这种情况下，答案可能是“通过使用 CFFI”。不过，这可能需要围绕传入或传出库的数据编写一些胶水代码，以使其在 Common Lisp 中使用起来更加愉快。

# php - 用户注册和电子邮件激活

> ID：10265651
> 
> 赞同：1
> 
> 时间：2012-04-22T06:08:56.490
> 
> 标签：php, mysql, database

**我有以下注册代码-**

```
<?php 
 // Connects to your Database 
 mysql_connect("my serner", "user", "password") or die(mysql_error()); 
 mysql_select_db("ec09580") or die(mysql_error()); 
 //This code runs if the form has been submitted
 if (isset($_POST['submit'])) { 
 //This makes sure they did not leave any fields blank
 if(isset($_POST['firstname']) && isset($_POST['lastname']) && isset($_POST['email']) && isset($_POST['username']) && isset($_POST['pass1']) && isset($_POST['pass2']))
           {
            $fname = $_POST['firstname'];
            $lname = $_POST['lastname'];

            $email_id = $_POST['email'];

            $username_r = $_POST['username'];
            $password_1 = $_POST['pass'];
            $password_2 = $_POST['pass2'];

 // checks if the username is in use
    if (!get_magic_quotes_gpc()) {

        $_POST['username'] = addslashes($_POST['username']);
    }
 $usercheck = $_POST['username'];
 $check = mysql_query("SELECT username FROM User WHERE username = '$usercheck'") 
or die(mysql_error());
 $check2 = mysql_num_rows($check);

 //if the name exists it gives an error
 if ($check2 != 0) {
        die('Sorry, the username '.$_POST['username'].' is already in use.');
    }
 // this makes sure both passwords entered match

    if ($_POST['pass'] != $_POST['pass2']) {
        die('Your passwords did not match. ');
    }
    // here we encrypt the password and add slashes if needed

    $_POST['pass'] = md5($_POST['pass']);

    if (!get_magic_quotes_gpc()) {
        $_POST['pass'] = addslashes($_POST['pass']);
        $_POST['username'] = addslashes($_POST['username']);
    }
}
 // now we insert it into the database
    $insert = "INSERT INTO User set FirstName='$fname', LastName='$lname',  Email='$email_id', username='$username_r', password='$password_1'";
    $add_member = mysql_query($insert);
    ?>
 <h1>Registered</h1>
 <p>Thank you, you have registered - you may now login</a>.</p>
 <?php 
 } 
 else 
 {  
 ?>
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
 <table border="0">
 <tr><td>Firstname:</td><td>
 <input type="text" name="firstname" maxlength="60">
 </td></tr>
 <tr><td>LastName:</td><td>
 <input type="text" name="lastname" maxlength="60">
 </td></tr>
 <tr><td>Email:</td><td>
 <input type="text" name="email" maxlength="60">
 </td></tr>
 <tr><td>Username:</td><td>
 <input type="text" name="username" maxlength="60">
 </td></tr>
 <tr><td>Password:</td><td>
 <input type="password" name="pass" maxlength="10">
 </td></tr>
 <tr><td>Confirm Password:</td><td>
 <input type="password" name="pass2" maxlength="10">
 </td></tr>
 <tr><th colspan=2><input type="submit" name="submit" 
value="Register"></th></tr> </table>
 </form>
 <?php
 }
 ?> 
```

对于激活，我有以下代码 -

```
<?php
if (isset($_GET['x'])) {
    $x = (int) $_GET['x'];
} else {
    $x = 0;
}
if (isset($_GET['y'])) {
    $y = $_GET['y'];
} else {
    $y = 0;
}
if ( ($x> 0) && (strlen($y) == 32)) {
    require_once ('mysql_connect.php');
    $query = "UPDATE User SET active=NULL WHERE (id=$x AND active='" . $y . "') LIMIT 1";  
    $result = mysql_query($query);

    if (mysql_affected_rows() == 1) {
        echo "<h3>Your account is now active. You may now log in.</h3>";
    } else {
        echo '<p><font color="red" size="+1">Your account could not be activated. Please re-check the link or contact the system administrator.</font></p>';
    }
    mysql_close();
} else {
    echo '<b>Activation link not valid!</b>';
}
?> 
```

**我不断收到此错误**--

注意：未定义变量：第 87 行 /var/www/users/ec09580/project_test/r_test.php 中的 fname 注意：未定义变量：第 87 行 /var/www/users/ec09580/project_test/r_test.php 中的 lname 注意：未定义变量：第 87 行 /var/www/users/ec09580/project_test/r_test.php 中的 email_id 注意：未定义变量：第 87 行 /var/www/users/ec09580/project_test/r_test.php 中的 username_r 注意：未定义变量：第 87 行 /var/www/users/ec09580/project_test/r_test.php 中的 password_1

我很困惑该怎么办。谁能帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T06:16:19.797

您需要移动这些行：

```
$insert = "INSERT INTO User set FirstName='$fname', LastName='$lname',  Email='$email_id', username='$username_r', password='$password_1'";

$add_member = mysql_query($insert); 
```

现在，它们不在检查这些值是否已设置的条件范围内。因此，如果表格未正确填写，您将收到这些通知，因为未设置这些变量。

更清楚地说，这两行应移至以下条件：

```
if(isset($_POST['firstname']) && isset($_POST['lastname']) && isset($_POST['email']) && isset($_POST['username']) && isset($_POST['pass1']) && isset($_POST['pass2']))
           {
                //Your existing code here

                //And move these two lines in here also:
                $insert = "INSERT INTO User set FirstName='$fname', LastName='$lname',  Email='$email_id', username='$username_r', password='$password_1'";

                $add_member = mysql_query($insert);
           } 
```

您需要将该代码移到那里，因为如果未设置任何表单值，则不会设置变量 $fname、$lname、$email_id，因为它们是在该条件下设置的。

在这种情况下，当您尝试访问未设置的变量时，PHP 会发出通知。

**正如 Brad 指出的那样，您的代码不是很安全，因此您不应该在生产环境中使用它。我刚刚为您的问题提供了解决方案。**

**如果你只是为了学校学习或做这个，那还可以，但是养成防止sql注入和验证用户输入的习惯绝对是个好主意。**

这是一个关于防止 SQL 注入的堆栈溢出问题，它比我能更好地解释它：

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:20:12.633

> 注意：未定义...

当您使用的实例尚未实例化时，会引发此类错误。

* * *

您在查询中使用的变量并未在所有执行流程中实例化。所以，收到那个错误。

这可以通过使用`isset()`检查变量之前是否已设置来消除。

例如：

```
$fname = isset($fname) ? $fname : ''; 
```

# .net - 哪种方法更好？如何用@Html.RenderAction 替换@Html.Partial？

> ID：10265655
> 
> 赞同：1
> 
> 时间：2012-04-22T06:09:21.017
> 
> 标签：.net, asp.net-mvc-3, razor, html-helper, renderaction

我们正在将我们的应用程序从 ASPNET Webforms 转换为 ASPNET MVC。目前，我们正在对现有功能进行小型 POC。

我们有一个如下所示的仪表板页面![仪表板](../Images/35dd415c100a426e1acb4e5f78848866.png)

1.  “会员仪表板”、“帐户摘要”和“计划信息”是放置在父“主页”视图上的部分视图（也是强类型）。

2.  “会员仪表板”部分视图不会为用户更改。但是“帐户摘要”和“计划信息”部分视图必须根据“计划类型”下拉列表进行更新。

3.  我为“会员仪表板”、“帐户摘要”和“计划信息”部分视图提供了三种不同的模型。

4.  我在父“主页”视图上使用 @Html.Partial 并将模型传递给部分视图。

一切正常。

对于上述情况，我该如何替换`@Html.Partial`？`@Html.RenderAction`（这样我就不必为“主页”视图使用超级模型。）

当用户更改“计划类型”下拉菜单并单击提交时，如何更新“帐户摘要”和“计划信息”部分。

# php - PHP - preg_match 与 for 循环 $i

> ID：10265658
> 
> 赞同：0
> 
> 时间：2012-04-22T06:10:37.773
> 
> 标签：php, preg-match

我是 PHP 新手，想`preg_match`从本地 HTML 文件中提取数据。我写的代码如下：

```
preg_match('#\<span class=\"creativeT\" id=\"SCreativeDesc1\">(.*?)\<\/span>#',$html,$creativedesc); 
```

它在特定的 SCreativeDesc"1" 时工作正常，但是当我用 $i （即 SCreativeDesc$i）将它放入循环时，它会触发我一个错误。

```
for ($i=1;$i<=$totalCreatives;$i++){
    preg_match('#\<span class=\"creativeT\" id=\"SCreativeDesc$i\">(.*?)\<\/span>#',$html,$creativedesc);
} 
```

要么我说：

```
for ($i=1;$i<=$totalCreatives;$i++){
    preg_match('#\<span class=\"creativeT\" id=\"SCreativeDesc" . $i . "\">(.*?)\<\/span>#',$html,$creativedesc);
} 
```

它也不起作用，我可以用循环来做到这一点吗？就像在 HTML 中它重复大约 100 次一样，我不想将它写到 100 行来进行抓取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:34:39.940

无需在这里循环。

```
preg_match('#\<span class=\"creativeT\" id=\"SCreativeDesc[0-9]+\">(.*?)\<\/span>#',$html,$creativedesc); 
```

您也可以使用稍微复杂的正则表达式来限制数字范围，但我觉得这足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:19:28.890

试试这种方式：

```
for ($i=1;$i<=$totalCreatives;$i++){
  $re = "#\<span class=\"creativeT\" id=\"SCreativeDesc" . $i . "\">(.*?)\<\/span>#";
  preg_match($re,$html,$creativedesc);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T06:18:12.167

您甚至没有正确关闭引号。您`'`在开头使用单引号，并在结尾使用双引号`"`。你想要的是：

```
preg_match('#\<span class=\"creativeT\" id=\"SCreativeDesc' . $i . '\">(.*?)\<\/span>#',$html,$creativedesc); 
```

# android - 一个广播接收器的两个事件

> ID：10265659
> 
> 赞同：0
> 
> 时间：2012-04-22T06:10:40.563
> 
> 标签：android, broadcastreceiver, boot

有一个使用 RECEIVE_BOOT_COMPLETED 的 Android 应用程序。根据文档，我不应该允许将此应用程序安装/移动到外部存储。然而，用户并不理解这一点（可能是由于某些设备上的内部存储空间很小） - 并要求选择安装在外部存储上（通过低星级评级）。

所以我也有一个相同的 BroadcastReceiver 监听 EXTERNAL_APPLICATIONS_AVAILABLE。我的问题是我可以同时使用同一个广播接收器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:33:57.343

> 我的问题是我可以同时使用同一个广播接收器吗？

当然。在`<intent-filter>`. 在`onReceive()`中，检查传入的操作`Intent`以确定您需要响应的广播。

# css - 如何在我的 wordpress 网站上的句子和照片之间的 CSS 中创建一个空格？

> ID：10265661
> 
> 赞同：0
> 
> 时间：2012-04-22T06:11:11.563
> 
> 标签：css, spacing

如何在我的 wordpress 网站上的句子和照片之间在 CSS 中创建一个空格？我尝试用以下代码包装我的句子：`<span style="font-size: 0.8em; line-height: 75%;">blahblahblah</span>`但这不起作用。

编辑：对于迟到的回复，我深表歉意。我只是想在我的照片底部包含一个 Flickr 链接来归因/归功于摄影师 - 但我希望在照片和属性/信用链接之间有一个空格。以下是我目前在我的博客文章顶部拥有的代码：

```
<img class="size-full wp-image-68 alignnone" title="What Causes Eczema" src="http://eczemafreedomacademy.com/wp-content/uploads/2012/04/what_causes_eczema.jpg" alt="What Causes Eczema" width="500" height="500" /><span style="font-size: 0.8em;">(Photo: <a href="http://www.flickr.com/photos/helga/3952984450/" target="_blank">Helga Weber</a>)</span> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:14:13.633

不确定我是否完全理解您在没有看到您的 HTML 的情况下要完成的工作，但假设最简单的情况应该可以工作。

首先为您的图片标签添加一个 id 属性。它可以使用任何 id 值，只要它不重复另一个元素的 id 并且与样式代码中的内容相匹配。

```
<img id="yourImageID"....> 
```

将样式元素添加到您的文档（通常在 head 元素内），或将此 CSS 标记添加到现有样式元素。您还可以将内部部分插入到文档链接的任何 CSS 文件中。阅读[这篇文章](http://www.w3schools.com/tags/tag_style.asp)，了解更多关于把它放在哪里的信息。

```
#yourImageID {
    margin: 1em;
} 
```

顺便说一句：将样式内联到元素上通常不是一个好习惯。`<style>`将它们放在文档中的单独元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:23:21.197

很难说没有原始 HTML 显示，但也许您需要做的就是添加`&nbsp;`到句子的末尾。

如果这不起作用，请告诉我们更多关于您正在尝试做的事情。您添加的代码不会尝试添加空格，因此我可能会感到困惑。

# c# - 建议将缓存中的数据库中的值加载到所有应用程序

> ID：10265665
> 
> 赞同：1
> 
> 时间：2012-04-22T06:12:07.210
> 
> 标签：c#, asp.net, asp.net-mvc-3, caching

我在数据库中有两个值，它们定义了我的应用程序中太多事物的行为，并且至少在不久的将来不会改变。创建静态变量并将值加载到我的应用程序中是最好的决定`Global.asax`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:23:34.580

一般规则是，当您知道您的值/数据将过期或在特定时间段后需要更改时使用缓存，否则使用静态变量。我发现了一个类似的讨论[HttpRuntime.Cache[] vs Application[]](https://stackoverflow.com/questions/326675/httpruntime-cache-vs-application)
另请查看[ASP.NET Caching: Techniques and Best Practices](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:23:21.943

是的，您可以将它们缓存在静态变量中。但是如果它们现在不需要更改并且保持不变，为什么不将它们定义为常量或在 web.config 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T06:23:36.157

我建议创建一个具有属性的静态类，这些常量设置将在您的应用程序启动时从数据库中设置其值。

每当我有存储在数据库中的“系统”设置时，我都会做同样的事情。我将它们作为属性保存在静态类中，并一直访问它们。我还对不经常更改但经常使用以减少数据库流量的小表（即项目组）的内容使用相同的技术。我创建只读集合并访问它们，而不是一直访问数据库。

但任何事情都是最适合您的问题，只要它干净且易于维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T06:25:51.710

我个人对我的 MVC 站点使用依赖注入（我更喜欢[ninject](http://www.ninject.org/)）。这允许您将变量定义为 .InSingletonScope，这意味着您不需要在应用程序中使用令人讨厌的静态变量。然后我在第一次请求时从数据库中加载值并将其存储在一个局部变量中，并且它整洁。

即我会用这个：

```
public class CachedFooProperty : IFooProperty
{
   public CachedFooProperty(IRepository<Foo> fooRepo)
   {
      Foo = fooRepo.GetFoo();
   }
   public Foo Foo{get;private set;}
} 
```

然后像这样绑定它：

```
Bind<IFooProperty>().To<CachedFooProperty>().InSingletonScope(); 
```

这种做事方式的好处是它非常容易通过简单地更改绑定来打开和关闭缓存。您也可以非常轻松地将其更改为基于 web.config 的配置方法，而无需更改使用该设置的每个位置。

# ruby-on-rails - 验证嵌入式 Mongoid 模型时 RSpec 测试中断

> ID：10265667
> 
> 赞同：1
> 
> 时间：2012-04-22T06:12:57.833
> 
> 标签：ruby-on-rails, mongodb, rspec, mongoid

当我尝试将一个文档嵌入另一个文档时，我收到此 RSpec 错误。抱歉，我是 MongoDB 新手。我习惯了 sqlite3 和 pg。我想我只是不知道如何测试这种关系。有人可以帮我吗？

```
Player attributes validations should require a name
     Failure/Error: @hero = Player.create!(@attr)
     NoMethodError:
       undefined method `validated?' for #<Hash:0x007fb33f41dc88>
     # ./spec/models/player_spec.rb:9:in `block (3 levels) in <top (required)>' 
```

我的验证只是一个简单的

```
validates_presence_of 
```

这是我的[源代码](https://github.com/protolif/game)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:48:50.200

问题是您使用了类名 Attribute - 它与其他内容发生冲突。场也行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:14:13.313

我刚刚在 GitHub 上找到了[mongoid-rspec](https://github.com/evansagge/mongoid-rspec) gem。它向 RSpec 添加了匹配器，这似乎比我习惯的对 Mongoid 更有意义。看看这个。

# iphone - 在 iPhone sdk(iOS 5.1) 中未调用 UIPanGesture 选择器方法

> ID：10265670
> 
> 赞同：0
> 
> 时间：2012-04-22T06:14:10.763
> 
> 标签：iphone, objective-c, ios5, uigesturerecognizer

我正在尝试将 UIPanGesture 用于我的观点之一。不幸的是，该 UIPanGesture 的选择器方法没有触发。

这是我的代码：

```
 UIPanGestureRecognizer * panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handleTransactionPan:)];
    [self.graphView addGestureRecognizer:panRecognizer]; 
```

这是我的选择器方法：

```
-(void)handleTransactionPan:(UIPanGestureRecognizer*)recognizer 
{
    NSLog(@"\n Inside Pan Gesture.....");
} 
```

朋友们请向我提出你的想法，我在这里做错了。

谢谢大家，莫尼什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:28:23.417

尝试这个 `UIPanGestureRecognizer * panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handleTransactionPan:)]; [self.graphView setUserInteractionEnabled:YES]; [self.graphView addGestureRecognizer:panRecognizer];`

# ios - 在 CGCreateWithImageInRect 之后，ARC 没有释放原始资产？

> ID：10265678
> 
> 赞同：0
> 
> 时间：2012-04-22T06:15:42.603
> 
> 标签：ios, ios5, nsoperationqueue, cgimage, alassetslibrary

高级摘要：我想用更高质量的版本替换相当低分辨率的 ALAsset 组图像*[group posterImage]*，以便它们可以在屏幕上显示得更大。通常我会根据界面的需要加载它们，但是*[ALAssetsGroup enumerateAssetsAtIndexes]*非常慢。（我可以预加载比可见的 x 量更宽，并且可能仍然这样做，但这似乎比它的价值更麻烦，并且仍然受到响应缓慢的影响，尤其是在 iOS5 中）

我认为我可以做的是请求每个组中的第一个资产，然后对其进行缩放，存储结果。然而，即使考虑到更大尺寸的图像，我对正在发生的内存分配感到惊讶。使用 VM Tracker，我看到大量 CGImage 分配以及我正在创建的“映射文件”缩略图。我正在使用 ARC，所以我预计原始的大图像会丢失，但我的 VM Tracker 结果并没有显示出来。

如果我使用默认的*posterImage*实现，我的 Resident Mem ~= 30mb，Dirty Mem ~= 80mb 和 Virtual tops ~240mb（本身很大）。每个分配分析器的“实时”< 10mb。

如果我改用下面的代码，我会在加载 150 个图像中的第 80 个图像时崩溃。那时我的 Resident Mem > 480mb，Dirty Mem > 420mb 和 Virtual 高达 750mb。显然这是站不住脚的。

这是我在 NSOperationQueue 内部使用的代码，用于获取每个组的第一张图像以用作高分辨率海报图像。

```
NSIndexSet* i = [NSIndexSet indexSetWithIndex:0];
ALAssetsGroupEnumerationResultsBlock assetsEnumerationBlock = ^(ALAsset *result, NSUInteger i, BOOL *stop) {

  if (result) {
     // pull the full resolution image and then scale it to fit our desired area
     ALAssetRepresentation *assetRepresentation = [result defaultRepresentation];
     CGImageRef ref = [assetRepresentation fullScreenImage];
     CGFloat imgWidth = CGImageGetWidth(ref);
     CGFloat imgHeight = CGImageGetHeight(ref);
     CGFloat minDimension = MIN(imgWidth,imgHeight);

     // grab a square subset of the image, centered, to use
     CGRect subRect = CGRectMake(0, 0, minDimension, minDimension);
     subRect.origin = CGPointMake(imgWidth / 2 - minDimension / 2, imgHeight / 2 - minDimension / 2);
     CGImageRef squareRef = CGImageCreateWithImageInRect(ref,subRect);
     // now scale it down to fit
     CGFloat heightScale = dimension / minDimension;
     UIImage* coverImage = [UIImage imageWithCGImage:squareRef scale:1/heightScale orientation:UIImageOrientationUp];

     if (coverImage) {
        [mainViewController performSelectorOnMainThread:@selector(imageDidLoad:) 
                                             withObject:[NSArray arrayWithObjects:coverImage, [NSNumber numberWithInt:photoIndex], nil] 
                                          waitUntilDone:NO];
     }      
     CGImageRelease(squareRef);
     // DO NOT RELEASE 'ref' it will be 'zombied' as it is already handled by the system
     //CGImageRelease(ref);

     *stop = YES;
   }
   else {
      // default image grab....
   }
};
[group enumerateAssetsAtIndexes:i options:NSEnumerationConcurrent usingBlock:assetsEnumerationBlock]; 
```

我是在上面做错了什么，还是我只是加载所有图像不聪明？我想得越多，我就越认为加载可见图像窗口加上它周围的缓冲区是要走的路，但我想了解更多关于我可能在上面的代码中做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:56:14.887

我做了和你一样的事情，但感谢这个答案：[Fetching last image capture through iPhone camera](https://stackoverflow.com/questions/7006292/fetching-the-last-image-captured-through-iphone-camera)，我设法让它更快，而且不会消耗太多内存。

这当然会使图像变得更小，因为您没有获取 fullScreenImage 而只是它的缩略图..

我的最终代码：

```
 ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

// Enumerate just the photos and videos group by using ALAssetsGroupSavedPhotos.
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

    // Within the group enumeration block, filter to enumerate just photos.
    [group setAssetsFilter:[ALAssetsFilter allPhotos]];
    int nrOfPhotos = 200;
    [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, nrOfPhotos)]
                            options:0
                         usingBlock:^(ALAsset *alAsset, NSUInteger index, BOOL *innerStop) {

                             // The end of the enumeration is signaled by asset == nil.
                             if (alAsset) {
                                 NSLog(@"Index: %i", index);

                                 CGImageRef imageRef = [alAsset thumbnail];
                                 UIImage *latestPhoto = [UIImage imageWithCGImage:imageRef scale:1.f orientation:UIImageOrientationUp];

                                 //Do something with images

                         }
                         }];
}
                     failureBlock: ^(NSError *error) {
                         // Typically you should handle an error more gracefully than this.
                         NSLog(@"No groups");
                     }]; 
```

# sharepoint - 在 SharePoint 2010 网站的特定页面中使用 FBA

> ID：10265683
> 
> 赞同：0
> 
> 时间：2012-04-22T06:16:56.767
> 
> 标签：sharepoint, sharepoint-2010, fba

我想在 Internet SP 2010 站点的某些 X 页面中使用 FBA（用户名/密码），因此所需的设计是：

*   对于所有网站页面（X 页面除外），该网站将使用启用匿名访问的 Windows 身份验证，因此互联网/公共用户可以查看主页、联系我们、关于我们....而不要求他们登录

*   当匿名用户打开 X 页面时，他/她将被要求通过提供用户名/密码登录（使用 FBA）

这是否适用，如果是，请提供提示/步骤

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:41:09.377

不可能完全如你所说。身份验证在 SharePoint 中按 Web 应用程序进行。您可以通过“扩展”来拥有支持两种身份验证机制的 Web 应用程序。通过使用备用访问映射，您可以访问您的 Web 应用程序，例如通过访问[http://extranet.myintranet.com](http://extranet.myintranet.com)以及[http://extranet](http://extranet) - 当使用外部 URL 时，您被迫使用 FBA，当使用内部 URL 时您可以使用 NTLM。

# c# - selenium webdriver C# 多线程

> ID：10265684
> 
> 赞同：4
> 
> 时间：2012-04-22T06:17:05.303
> 
> 标签：c#, multithreading, selenium, webdriver

Selenium WebDriver 是否支持多线程？

我试图在打开 2-4 个窗口的情况下使用它，看起来浏览器窗口 (Firefox) 有时会被冻结。

当一个线程启动时：

```
_driver.FindElement(By.Id(id)).SendKeys("MyMessage"); 
```

另一个线程同时尝试获取另一个页面元素状态。

如何处理这个？

是否有关于从不同线程访问同一页面的任何建议？

如何加快 SendKeys 方法，并且在 SendKeys 仍未完成时不允许 selenium 访问页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:42:25.947

以我的经验，Selenium WebDriver 很好地支持多线程（除非您使用的是 IE）。从您的代码看来，您在所有线程中都使用相同的驱动程序实例 - 确保每个线程都有自己的 WebDriver 实例。

# c++ - 获取数组中每个元素的索引

> ID：10265686
> 
> 赞同：-1
> 
> 时间：2012-04-22T06:17:26.677
> 
> 标签：c++

使用 C++，我正在使用 fgets 将文本文件读入 char 数组，现在我想获取此数组中每个元素的索引。即 line[0]= 0.54 3.25 1.27 9.85，然后我想返回 line 的每个元素[0] 在一个单独的数组中，即 readElement[0] = 0.54。我的 text.txt 文件具有以下格式： 0.54 3.25 1.27 9.85 1.23 4.75 2.91 3.23 这是我编写的代码：

```
char line[200]; /* declare a char array */
char* readElement [];

read = fopen("text.txt", "r");
while (fgets(line,200,read)!=NULL){ /* reads one line at a time*/
printf ("%s print line\n",line[0]); // this generates an error

readElement [n]= strtok(line, " "); // Splits spaces between words in line
    while (readElement [1] != NULL)
  {
printf ("%s\n", readElement [1]); // this print the entire line not only element 1

  readElement [1] = strtok (NULL, " ");
  }
n++;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:46:01.410

readElement 看起来声明错误。只需将其声明为指向字符串开头的指针：

```
char* readElement = NULL; 
```

您也没有检查 fopen 的返回值。这是最有可能的问题。因此，如果文件实际上没有打开，当您将“line”传递给 printf 时，它就是垃圾。

如果你真的想把每行的每个元素存储到一个数组中，你需要为它分配内存。

另外，不要将变量命名为“read”。“read”也是低级函数的名称。

```
const size_t LINE_SIZE = 200;
char line[LINE_SIZE];
char* readElement = NULL;
FILE* filestream = NULL;

filestream = fopen("text.txt", "r");
if (filestream != NULL)
{
    while (fgets(line,LINE_SIZE,filestream) != NULL)
    {
        printf ("%s print line\n", line);

        readElement = strtok(line, " ");
        while (readElement != NULL)
        {
             printf ("%s\n", readElement);
             readElement = strtok (NULL, " ");    
        }
      }
    }
    fclose(filestream);
} 
```

# python - qgridlayout 背景图片？pyqt4

> ID：10265687
> 
> 赞同：0
> 
> 时间：2012-04-22T06:17:31.607
> 
> 标签：python, pyqt4, qgridlayout

是否可以在 qgridlayout 中加载背景图像？我在网格布局中有几个按钮，我想根据整个网格布局的大小加载背景图像。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:01:36.543

`Q*Layout`s 不是小部件，所以不，您不能在它们上放置背景。但是，您（可能）将拥有一个具有您的布局的小部件。你可以在上面放一个背景。参见 s 的[`setStyleSheet`](http://doc.qt.nokia.com/4.7-snapshot/qwidget.html#styleSheet-prop)方法`QWidget`。

# remote-desktop - 如何管理您的远程桌面

> ID：10265688
> 
> 赞同：0
> 
> 时间：2012-04-22T06:17:31.950
> 
> 标签：remote-desktop

我从 1and1 租用一台服务器，他们告诉我管理它的方法是通过远程桌面：

所有详细信息都列在 1and1 控制面板中的服务器访问数据下。远程桌面默认运行并响应：

```
$ telnet 74.208.12.121 3389
Trying 74.208.12.121...
Connected to 74.208.12.121.
Escape character is '^]'. 
```

所以我的问题是，登录到远程桌面，是不是就像除了我的笔记本电脑之外还有一台单独的电脑？我是否必须像下载笔记本电脑一样下载 asp.net 4.0？如何将网页文件 FTP 到此服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:21:08.080

你是对的，这就像拥有另一台电脑一样。您必须下载网站所需的任何包/库，除非在部署时它们捆绑在网站的 bin 目录中。

要传输文件，您不应该使用 ftp。而是在设置远程桌面连接时检查“本地资源”下的“本地驱动器”选项。连接后，您可以访问本地文件，以便您可以在本地计算机和服务器之间复制文件。

# java - fxml TableView 中的错误

> ID：10265692
> 
> 赞同：1
> 
> 时间：2012-04-22T06:18:21.353
> 
> 标签：java, javafx-2, fxml

我创建了描述表格的 FXML 文件

```
 <AnchorPane fx:id="AnchorPane" id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" fx:controller="ru.pfr03.sprut.client.UnittypeController"> 
      <children> 
        <TableView fx:id="unitTypeTableView" prefHeight="400.0" prefWidth="600.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0"> 
          <TableColumn prefWidth="100.0" text="Код"> 
          </TableColumn> 
          <TableColumn prefWidth="125.0" text="Наименование"> 
          </TableColumn> 
        </TableView> 
      </children> 
    </AnchorPane> 
```

以下称此fxml

父 p = FXMLLoader.load(getClass().getResource("UnitTypeTable.Ffxml"));

FXML 控制器：

```
public class UnittypeController implements Initializable { 
    @FXML 
    private TableView<Unittype> unitTypeTableView; 

    @Override 
    public void initialize(URL url, ResourceBundle rb) { 

    }   
} 
```

我有例外：

```
Exception in Application start method 
java.lang.reflect.InvocationTargetException 
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
        at java.lang.reflect.Method.invoke(Method.java:601) 
        at com.javafx.main.Main.launchApp(Main.java:453) 
        at com.javafx.main.Main.main(Main.java:537) 
Caused by: java.lang.RuntimeException: Exception in Application start method 
        at com.sun.javafx.application.LauncherImpl.launchApplication1(Unknown Source) 
        at com.sun.javafx.application.LauncherImpl.access$000(Unknown Source) 
        at com.sun.javafx.application.LauncherImpl$1.run(Unknown Source) 
        at java.lang.Thread.run(Thread.java:722) 
Caused by: javafx.fxml.LoadException: javafx.scene.control.TableView does not have a default property. 
        at javafx.fxml.FXMLLoader$ValueElement.processEndElement(Unknown Source) 
        at javafx.fxml.FXMLLoader.processEndElement(Unknown Source) 
        at javafx.fxml.FXMLLoader.load(Unknown Source) 
        at javafx.fxml.FXMLLoader.load(Unknown Source) 
        at javafx.fxml.FXMLLoader.load(Unknown Source) 
        at javafx.fxml.FXMLLoader.load(Unknown Source) 
        at ru.pfr03.sprut.client.Sprutclient.start(Sprutclient.java:40) 
        at com.sun.javafx.application.LauncherImpl$5.run(Unknown Source) 
        at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source) 
        at com.sun.javafx.application.PlatformImpl$3.run(Unknown Source) 
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) 
        at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source) 
        at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source) 
        ... 1 more 
```

如何解决此错误？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:55:01.673

在 fxml 文件中包装`TableColumn`s 。`<columns> </columns>`

# blackberry - 如何在黑莓中将焦点设置为 Fieldmanager

> ID：10265693
> 
> 赞同：2
> 
> 时间：2012-04-22T06:18:22.837
> 
> 标签：blackberry

我是黑莓新手。我们可以在 BlackBerry 中将焦点和单击事件设置为 verticalFieldManager 吗？

这是我的代码：

```
 VerticalFieldManager itemdesc=new VerticalFieldManager(Field.FOCUSABLE);

          LabelField pdtitem=new LabelField(pdts.getProducts_name(),LabelField.FOCUSABLE){
              protected void drawFocus(Graphics graphics, boolean on)    
             {          
                // setSpace(5, 5);      
                 super.drawFocus(graphics, on);  
                 }
              protected boolean navigationClick(int status, int time) {
                // TODO Auto-generated method stub
                    UiApplication.getUiApplication().pushScreen(new desc(V,j));
                return true;
            }

          };

          itemdesc.add(pdtitem);

          Bitmap cartbt=Bitmap.getBitmapResource("cart3.png");
          BitmapField cartbtn=new BitmapField(cartbt,Field.FOCUSABLE){
              protected void drawFocus(Graphics graphics, boolean on)    
             {          
                 setSpace(5, 5);      
                 super.drawFocus(graphics, on);  
                 }

              protected boolean navigationClick(int status, int time) {
                // TODO Auto-generated method stub
                  PopupScreen pp=new PopupScreen(new login());

                Dialog.alert("hai");
                UiApplication.getUiApplication().pushScreen(pp);
                return super.navigationClick(status, time);
            }
          }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T16:06:23.467

您可以向新的 Horizo​​ntalFieldManager 添加方法

```
public boolean isFocusable(){
return true; 
```

}

# playframework-2.0 - Play 2.0 - 如何让 Play 停止解析模板注释中的代码？

> ID：10265694
> 
> 赞同：0
> 
> 时间：2012-04-22T06:18:58.077
> 
> 标签：playframework-2.0

如果我有一些错误的代码，`*scala.html`在 Play 的模板文件中进行了注释，它会在编译期间给出错误。如何让 Play 明白这只是一条评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:04:53.010

[Play 中的服务器端注释](http://www.playframework.org/documentation/2.0/ScalaTemplates)应该写成（我用过很多次，没有任何编译问题）：

```
@* your comment here *@ 
```

但根据以下帖子（http://stackoverflow.com/questions/6398059/what-is-the-server-side-comment-tag-in-scala-templates-in-play-framework）这可能会产生编译错误在 Scala 模板中（用于 Play！1.x！）

也许，但我对此表示怀疑，以下内容可能对您有用：

```
@{ /* Comment */ } 
```

# c++ - 治疗矢量 作为向量 无需复制 (C++0x)

> ID：10265695
> 
> 赞同：6
> 
> 时间：2012-04-22T06:19:02.960
> 
> 标签：c++, constants, accessor

一个类包含一个`std::vector<int*>`. 外部代码需要对该向量进行只读访问，不应修改内容（指针或其内容）。在类内部，值*可能会*发生变化（例如`double_values()`，因此`std::vector<const int*>`无法将它们存储为 a 。

有没有办法在不制作副本的情况下返回`std::vector<int*>`原样？`std::vector<const int*>`感觉应该有，因为 const 只是在编译时操作来说明可以修改和不能修改的内容。

**代码：（编译`g++ -std=c++0x`）**

```
class ReadOnlyAccess
{
public:
  ReadOnlyAccess(const std::vector<int*> & int_ptrs_param):
    int_ptrs(int_ptrs_param)
  {
  }
  const std::vector<int*> & get_int_ptrs() const
  {
    return int_ptrs;
  }
  std::vector<const int*> safely_get_int_ptrs() const
  {
    // will not compile (too bad):
    //    return int_ptrs;

    // need to copy entire vector
    std::vector<const int*> result(int_ptrs.size());
    for (int k=0; k<int_ptrs.size(); k++)
      result[k] = int_ptrs[k];
    return result;
  }
  void double_values()
  {
    for (int*p : int_ptrs)
      *p *= 2;
  }
  void print() const
  {
    for (const int * p : int_ptrs)
      std::cout << *p << " ";
    std::cout << std::endl;
  }
private:
  std::vector<int*> int_ptrs;
};

int main() {
  ReadOnlyAccess roa(std::vector<int*>{new int(10), new int(20), new int(100)});
  std::vector<const int*> safe_int_ptrs = roa.safely_get_int_ptrs();
  // does not compile (good)
  // *safe_int_ptrs[0] = -100000;
  roa.print();

  const std::vector<int*> & int_ptrs = roa.get_int_ptrs();
  // changes are made to the internal class values via the accessor! nooooo!
  *int_ptrs[0] = -100000;
  roa.print();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T07:00:05.577

如果您仍然想保留 const 指针，则返回向量将意味着一个副本。

但是，如果您的目标是提供一种在不修改它们或修改其容器的情况下使用值的方法，那么基于访问者模式的算法可能是一个非常好的解决方案，特别是现在我们可以使用 lambda 表达式：

```
#include <vector>
#include <iostream>

class Data
{
public:

    //...whatever needed to fill the values

    // here we assume that Func is equivalent to std::function< void ( int )> or std::function< void (const int& ) > and can return anything that will be ignored here.
    template< class Func > 
    void for_each_value( Func func ) const // read-only
    {
        for( const int* value : m_values ) // implicit conversion
        {
             func( *value ); // read-only reference (const &), or copy
             // if func needs to work with the adress of the object, it still can by getting a reference to it and using & to get it's adress
        }
    }

    void print() const
    {
        std::cout << "\nData values: \n";
        for_each_value( []( const int value ) { std::cout << "    "<< value << '\n'; } );
    }

    void count_values() const { return m_values.size(); }

private:

    std::vector<int*> m_values;

};

int main()
{
    Data data;
    // ... whatever needed to fill the data

    data.print();    

    std::vector<int> modified_values;
    data.for_each_value( [&]( int value ) { modified_values.push_back( value + 42 ); } );

    return 0;
} 
```

如果您理解这一点，并且使用这些值的不同方式可以简化为一些半通用算法，那么它将使您的代码更简单，并允许您将数据保留在结构中而不是暴露它的胆量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:11:34.467

您可以通过自定义迭代器提供 const 值的视图。一个简单的方法是使用`boost::iterator`：

```
#include <boost/iterator/indirect_iterator.hpp>

class ReadOnlyAccess
{
// ...
    typedef boost::indirect_iterator<const int* const*, const int> const_val_iter_type;
    const_val_iter_type cval_begin() {
        return it_t{const_cast<const int* const*>(&int_ptrs[0])};
    }
}

int main() {
    // ...
    auto x = roa.cval_begin();
    std::cout << x[0] <<' ' << x[1] << x[2] <<'\n';
    // we can still access the pointers themselves via .base() member function:
    for (int i=0; i<3; ++i)
        assert(x.base()[i] == safe_int_ptrs[i]);
    // the values are read-only, the following does not compile:
    // x[0] = -1;
    // **x.base() = -1;
    // *x.base() = nullptr;
} 
```

如果我们使用`boost::indirect_iterator<typename std::vector<int*>::const_iterator, const int>`for ，我们可以通过（但不能直接像在 eg 中那样）`const_val_iter_type`修改指向的值，所以这个解决方案不是通用的。`.base()``x[0] = -1`

# sql-server - 消除sql中的错误

> ID：10265696
> 
> 赞同：1
> 
> 时间：2012-04-22T06:19:13.820
> 
> 标签：sql-server

我在 SQL Server 中有一个查询：

```
insert into [Sha1]( 
       [IDTbl]
      ,[IDTbl_old]
      ,[IDold]
      ,[WordsAsl])
 (SELECT  [IDTbl]
      ,[IDTbl_old]
      ,[IDold]
      ,[WordsAsl]
  FROM [Sha2]) 
```

如何解决此错误：

> 无法将值 NULL 插入到列“IDTbl”、表“Sha1”中；列不允许空值。插入失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:39:26.653

`SELECT`除了从包含的行中排除这些行之外，另一个选项`NULL`是使用该`ISNULL()`函数来提供默认值，而不是`NULL`：

```
 INSERT INTO dbo.Sha1(IDTbl, IDTbl_old, IDold, WordsAsl)
     SELECT  
        ISNULL(IDTbl, 42),
        IDTbl_old,
        IDold,
        WordsAsl
     FROM dbo.Sha2 
```

在这里，我规定如果`IDTbl`来自`dbo.Sha2`be的值`NULL`，那么`SELECT`应该返回 42 （并因此将这个值插入`dbo.Sha1`而不是`NULL`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:26:35.140

源表中的某些行必须包含`NULL`在`IDTbl`字段中。

尝试：

```
 insert into [Sha1]( 
   [IDTbl]
  ,[IDTbl_old]
  ,[IDold]
  ,[WordsAsl])
SELECT  [IDTbl]
  ,[IDTbl_old]
  ,[IDold]
  ,[WordsAsl]
FROM [Sha2]
WHERE IDTbl IS NOT NULL 
```

如果目标表中的其他列有约束，您可能会发现需要使此`WHERE`子句更复杂。

# android - 使用模拟器自动运行 Apk 文件

> ID：10265697
> 
> 赞同：1
> 
> 时间：2012-04-22T06:19:16.907
> 
> 标签：android, command, emulation, apk, adb

当我点击它时，我想让我的 Windows Vista Home Premium 在模拟器中运行我的 .APK 文件。有一些方法可以从 ADB 命令行手动完成，但我想让它立即在模拟器上运行。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:21:27.953

你不能直接点击运行它。

您需要将 apk 存储在`android-sdk-windows\tools\`. 然后保持模拟器打开，您可以使用这样的安装命令安装 apk

```
adb install Application.apk 
```

我认为没有其他方法可以做到这一点。

# php - 子类可以访问父类属性数据吗？

> ID：10265702
> 
> 赞同：0
> 
> 时间：2012-04-22T06:20:07.063
> 
> 标签：php

我有一个扩展父类的子类。

在我的父类中有一个受保护的属性来存储配置数据。在父类中，此属性具有所需的所有配置文件。

但是在子类中，我无法访问该数据。如何将配置属性数据带入子类？

我在用

```
class Child extends Parent
{
    public function __construct()
    {
        print_r($this->config);
    }
} 
```

但我得到一个空洞的回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:23:23.493

除非资源是私有的，否则你可以

基本上有访问父资源的方法：

1.  父::{资源标识符}; 例如。`parent::config;`
2.  $this -> {资源标识符}; 除非资源被覆盖

* * *

现在，谈到可能导致此问题的部分。

为了存储配置，可能需要运行父构造函数。所以，

```
class Child extends Parent
{
    public function __construct()
    {
        parent::__construct();
        print_r($this->config);
    }
} 
```

# c# - 如何在 WPF 浏览器应用程序的 App.config 中创建 sql 连接字符串

> ID：10265705
> 
> 赞同：-1
> 
> 时间：2012-04-22T06:20:12.743
> 
> 标签：c#, wpf

我有以下用于连接字符串的代码，但它不起作用，有人可以帮我解决这个问题吗

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="MyConnection" 
         connectionString="Data Source=SONY-PC\SQLEXPRESS;Initial Catalog=webolusion_inhouse;User Instance=true; User ID=sa;Password=admin;"/>        
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:46:21.347

您是否添加了对 System.Configuration 的引用？

# jquery - 关于jquery图片缩放效果

> ID：10265706
> 
> 赞同：-3
> 
> 时间：2012-04-22T06:20:18.280
> 
> 标签：jquery, zooming, thumbnails

我有以下带有一些缩略图的代码：

```
<img onclick="if($(this).hasClass('zoom'{
      this.src='http://24.media.tumblr.com/tumblr_m2uql6rJsI1r9fv99o1_100.gif'; 
      $(this).animate({'width':'100','height':'50'}).removeClass('zoom')
   }else{
      this.src='http://27.media.tumblr.com/tumblr_m2uql6rJsI1r9fv99o1_500.gif';
      $(this).animate({'width':'500','height':'268'}).addClass('zoom')
   }"
   style="width: 100px; height: 50px;"
   src="http://24.media.tumblr.com/tumblr_m2uql6rJsI1r9fv99o1_100.gif" > 
```

它有效，但我不希望我的网站使用这种风格，我想要这样的东西：

```
<script type="text/javascript">#$^%@^&*$#$^#@%</script> 
```

但是太复杂了，我不会写……谁能帮帮我？

来源：http: [//jsfiddle.net/My39T/](http://jsfiddle.net/My39T/)

另一个问题是，我需要动画，所以这些图像需要宽度/高度。我可以这样做，但我没有图像宽度/高度，所以可能需要这个：

```
$('img').each(function() {
$(this).attr('height',$(this).height());
$(this).attr('width',$(this).width());
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T06:35:54.537

我认为这可以满足您的要求，但是由于您没有明确说明您想要发生的事情，因此这是基于阅读内联`onclick`处理程序的最佳猜测。

```
$(function() {
    $(".thumb > li > a").click(function() {
        var that = $(this),
            img = that.find('img'),
            src = that.href,
            h = img.height(),
            w = img.width();

        img.attr({
            'height' : h,
            'width' : w,
            'src' : src
        });
        if (that.hasClass('zoom')){
            img.animate(
                {
                    'height' : 67,
                    'width' : 100
                },1000);
        }
        else {
            img.animate(
                {
                    'height' : 268,
                    'width' : 500
                },1000);
        }
        that.toggleClass('zoom');
        return false;
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/My39T/2/)。

*   [`animate()`](http://api.jquery.com/animate/).
*   [`attr()`](http://api.jquery.com/attr/).
*   [`click()`](http://api.jquery.com/click/).
*   [`find()`](http://api.jquery.com/find/).
*   [`hasClass()`](http://api.jquery.com/hasClass/).
*   [`height()`](http://api.jquery.com/height/).
*   [`toggleClass()`](http://api.jquery.com/toggleClass/).
*   [`width()`](http://api.jquery.com/width/).

# ruby-on-rails-3 - 在 Rails 3.2 中预编译控制器资产

> ID：10265707
> 
> 赞同：2
> 
> 时间：2012-04-22T06:20:23.443
> 
> 标签：ruby-on-rails-3, asset-pipeline, rake-task

我为每个控制器都有一个单独的 scss 文件，并且我不会将它们全部导入 application.css 文件，以便我可以在布局中包含控制器特定的样式表和 js 文件。

所以在布局中我这样做：

```
<%= stylesheet_link_tag "application" %>
<%= stylesheet_link_tag params[:controller], :media => "all" %>
<%= javascript_include_tag 'application' %>
<%= javascript_include_tag params[:controller] %> 
```

但是当我运行 rake assets:precompile 时，我没有得到控制器的编译资产。

我在网上寻找解决方案，但他们都表示将所需的文件添加到 config.assets.precompile 状态。而且我不知道该放什么，以便 app/assets/stylesheets 的子文件夹和 app/assets/javascripts 的子文件夹中的所有资产自动编译。

**更新 1**

好的，我将它们全部编译到一个文件中，但是有两个问题：

1.  我有一个 _base.scss 文件，其中包含所有需要的变量和导入，并将 application.css 重命名为 application.css.scss 以便我可以先导入该文件：

    ```
    @import 'base';
    @import 'style';
    @import 'forms'; 
    ```

我需要如何使用清单来做到这一点？找不到使用 scss 本身导入整个目录的方法。

1.  我对不同控制器中的相同选择器有一些不同的操作。分离这些动作并定义女巫应该在特定页面上处理的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:08:25.637

解决方案：

到文件 config/application.rb

添加这一行：

```
config.assets.precompile += ["controller1.js", "controller1.css", "controller2.js", "controller3.js"] 
```

下次你运行 assets:precompile 它也会编译这个文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:06:35.107

怎么样：

```
config.assets.precompile += Dir::entries("app/assets/javascripts").
                               map{|f| f[/^(?!application\.).*\.js/]}.compact 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:17:12.123

这是一个坏主意，因为它为每个页面加载添加了额外的 HTTP 请求，需要大量额外的文件（其中大部分是空的，很少会有实际的控制器特定的 CSS/JS），并且忽略浏览器缓存（缓存application.css/js 一次就​​忘了它）。

最好以这样一种方式编写您的 CSS/JS，以便您可以将它们全部包含在一起并正确使用资产管道。

# objective-c - NSWindow 是否参与了 LSUIElement=1 应用程序的应用程序切换器？

> ID：10265709
> 
> 赞同：0
> 
> 时间：2012-04-22T06:21:07.453
> 
> 标签：objective-c, cocoa, nswindow

我有一个“代理”Cocoa 应用程序 ( `LSUIElement=1`)，当用户单击菜单栏图标时，它会显示一个普通窗口。

是否可以让窗口参与应用程序切换器（即当用户按下时应用程序图标显示在图标列表中`Command+Tab`）？

明确一点：我不想要停靠图标或菜单。只是应用程序切换器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:38:57.727

应用程序切换器不列出窗口，只列出应用程序，并且不列出任何没有 Dock 磁贴的应用程序。（确实，上次我检查过，它是由 Dock 提供的。）所以不，这是不可能的。

可能值得一个错误报告：可以说，任何有窗口的应用程序，用户都应该能够 ⌘⇥ 返回（特别是如果他们使用 ⌘⇥ 切换离开它）。当前的实现并不容易回到这样的窗口。

# sql - 通过从 sum(case) 语句中除两列来获取百分比

> ID：10265719
> 
> 赞同：0
> 
> 时间：2012-04-22T06:23:21.823
> 
> 标签：sql, tsql, case, aggregate

我试图将两列的结果添加到下面我的查询中的“准时”列中，并根据总列进行计算。结果我想要的是这些列：

评估员 'OntimeSum' 'PastDueSum' 'Ontime + Pastdue' '%ontime'

我已经在下面的查询中有前三个，但我不知道如何做其他的，似乎无法弄清楚它们或在任何地方找到示例。

```
WITH AppraiserTurnTime AS
(SELECT (v.ContactLastName+ ', ' +v.ContactFirstName) AS Appraiser

   ,SUM(CASE WHEN oi.SubmittedDate <= oi.AssignedDate THEN 1 ELSE 0 END) AS OnTime
   ,SUM(CASE WHEN oi.SubmittedDate >= oi.AssignedDate THEN 1 ELSE 0 END) AS PastDue

FROM OrderItems oi
JOIN Vendors v ON v.VendorID = oi.VendorID
JOIN VendorClasses vc ON vc.VendorClassID = v.VendorClassID

WHERE vc.VendorClassID in (6, 3)
GROUP BY ContactFirstName,v.ContactLastName)

SELECT * FROM AppraiserTurnTime 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:36:00.450

你已经明白了。

```
(2)   ,SUM(CASE WHEN oi.SubmittedDate <= oi.AssignedDate THEN 1 ELSE 0 END) AS OnTime
(3)   ,SUM(CASE WHEN oi.SubmittedDate >= oi.AssignedDate THEN 1 ELSE 0 END) AS PastDue 
```

总计为 (2)+(3)，按时百分比为 (2)/((2)+(3))

您可以为每个指标插入上述 (2) 和 (3) 的查询，或者如果需要，创建一个嵌套查询，以便您可以引用列，即

```
SELECT ..., OnTime+PastDue, etc.
FROM ( your original query) 
```

此外，当前查询将多计，因为您同时使用 >= 和 <=。最好确定在确切时间发生的事情是否过期。

# php - 访问 CakePHP 数据库连接

> ID：10265733
> 
> 赞同：0
> 
> 时间：2012-04-22T06:25:26.800
> 
> 标签：php, cakephp, database-connection

我正在寻找一种方法来访问 CakePHP 用来调用数据库的数据库对象。

我有一个在 CakePHP 之外编写的使用数据库的类。与其打开它自己的连接，我认为只使用一个可能已经打开的连接会很好。

我将 CakePHP 设置为使用 MySQLi，并且我构建的类也使用 MySQLi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:39:40.237

您可以使用 DboSource 类来访问数据库和进行数据库调用。
[DboSource 类 API 文档](http://api.cakephp.org/2.4/class-DboSource.html)

`getConnection`

[获取底层连接对象。](http://api.cakephp.org/2.4/class-ConnectionManager.html#__getConnectionObject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T05:48:54.503

```
$db= &ConnectionManager::getDataSource('datasourceName'); // as defined in DATABASE.php 
```

# c#-4.0 - C# 光标和图片框

> ID：10265736
> 
> 赞同：1
> 
> 时间：2012-04-22T06:27:15.857
> 
> 标签：c#-4.0, cursor, picturebox

当我的 PictureBox 被创建时，光标位置在 x=0,y=0 处，即 PictureBox 的左上角。我想把我的光标放在中心。

```
Cursor.Position = new Point(Cursor.Position.X - 75, Cursor.Position.Y - 75); 
```

我试过这样做，但没有帮助。因为我的 PictureBox 的大小是 150,150

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:34:50.517

```
Cursor.Position = this.PointToScreen(new Point(pictureBox1.Location.X + pictureBox1.Width / 2 ,pictureBox1.Location.Y + pictureBox1.Height / 2 )); 
```

# c# - 单一使用事件的模式或语言工具？

> ID：10265737
> 
> 赞同：1
> 
> 时间：2012-04-22T06:27:21.980
> 
> 标签：c#, .net, events, design-patterns

我发现自己经常需要以下代码场景

订阅事件 -> 等待事件 -> 取消订阅事件。

有没有比以下更好的方法：

```
myEvent += mydelegate;
while (mydelegatewasn't called)
{
     // do stuff
}   
myEvent -= mydelegate; 
```

还有什么是等待我的代表完成工作的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:41:30.800

您可能需要考虑查看[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)类以等待您的委托完成其工作，而不是在 while 循环中旋转。这样可以避免在等待您的委托完成时旋转。

```
void Main()
{
    RunActionOnceOnEvent(delegate()
    {
        // do stuff
    });
}

void RunActionOnceOnEvent(Action action)
{
    AutoResetEvent autoResetEvent = new AutoResetEvent(false);
    EventDelegate handler = delegate() 
    { 
        autoResetEvent.Set(); 
    }); 

    myEvent += handler;

    try
    {
        autoResetEvent.WaitOne();
        action();
    }
    finally 
    {
        myEvent -= handler;
    }
} 
```

在减少不同事件的样板代码量方面，我不确定您能否做很多事情，因为事件不是一流的。

# c++ - 设置任务栏位置 Win7 c++

> ID：10265738
> 
> 赞同：0
> 
> 时间：2012-04-22T06:27:35.703
> 
> 标签：c++, winapi

是否可以使用 Windows API 设置任务栏位置/宽度/高度？我正在运行 3 台显示器，我想防止任务栏跨越所有显示器，而不是一直保持在顶部。

这是我到目前为止没有运气的尝试......我不确定我的代码是否有问题或者它只是被阻止了。

```
#include <iostream>
#include "Windows.h"

using namespace std;

class MyClass
{
public:
    int getTaskBarHeight();
    void setTaskBarPos();
};

int MyClass::getTaskBarHeight()
{
    RECT rect;
    HWND taskBar = FindWindow(L"Shell_traywnd", NULL);
    if(taskBar && GetWindowRect(taskBar, &rect)) {
        return rect.bottom - rect.top;
    }
}

void MyClass::setTaskBarPos()
{
    RECT rect;
    HWND taskBar = FindWindow(L"Shell_traywnd", NULL);
    if(taskBar && GetWindowRect(taskBar, &rect)) {

        SetWindowPos(taskBar, HWND_TOPMOST, 0, 0, 1080, 46, SWP_NOZORDER);

    }
}

int main(void)
{
    MyClass taskbar;
    cout << taskbar.getTaskBarHeight();

    taskbar.setTaskBarPos();

    int a;
    cin >> a;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:00:28.747

要回答“跨越所有 3 个显示器”的问题，这通常取决于显示适配器的配置。您可以拥有 3 个单独的显示器（每台显示器 1 个），或 1 个横跨所有三个显示器的大显示器。后者听起来像你的情况，Windows 无法让应用栏只占据显示器的一部分。

最好的办法是调整显示驱动程序以创建 3 个单独的显示器，而不是 1 个大显示器。

# gcc - 如何在 Mac 上安装 make 和 gcc？

> ID：10265742
> 
> 赞同：33
> 
> 时间：2012-04-22T06:28:25.500
> 
> 标签：gcc, makefile, osx-lion, eclim

我想在我的 macbook air（2011 版）上安装 Eclim。但是我在安装过程中遇到了一些问题。它告诉我我没有安装make和gcc。

我试图找到解决方案，但所有解决方案都在谈论使用 XCode。事实上，我安装了 XCode。但是我仍然无法安装 Eclim，因为没有安装 make 和 gcc。

如何安装它们以便我可以安装 Eclim？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-22T06:33:19.647

更新新版本：

命令行版本现在可以直接从命令行本身安装；

*   打开“终端”（它位于应用程序/实用程序中）
*   在终端窗口中，运行命令`xcode-select --install`
*   在弹出的窗口中，单击`Install`，并同意服务条款。

安装完成后，应设置命令行实用程序属性。

* * *

旧版本：

安装最新的 XCode 版本令人困惑，不会自动安装命令行工具。在未自动安装时安装命令行工具；

*   启动 XCode。
*   转到 XCode/首选项。
*   单击“下载”选项卡。
*   单击“组件”。
*   单击命令行工具行上的“安装”。

这将安装命令行工具并使它们可以从常规命令行访问。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-06-01T03:36:13.617

在我的 mac 上安装 Homebrew 后，安装就像运行命令一样简单

`brew install make`

它可能需要root权限。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T13:18:33.297

您也可以使用安装的[这个](https://github.com/kennethreitz/osx-gcc-installer)独立的 GCC（从 Xcode 获得）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T06:33:30.893

使用现代 Xcode (4.3)，您将需要运行 GUI 并让它安装命令行工具。我将从 MacPorts [ProblemHotList](https://trac.macports.org/wiki/ProblemHotlist)中引用，因为我已将其添加为书签：

> Xcode 4.3 默认不包含一套完整的命令行工具。`xcode-select`没有它什么都不会建立，尽管它`which make`可能会返回正确的值。
> 
> 您必须打开 Xcode，转到 Preferences，然后从 Downloads 部分下载此组件。您将需要一个 Apple ID 才能下载该组件。

# java - oAuth with Scribe for LinkedIn - accessToken 问题

> ID：10265743
> 
> 赞同：0
> 
> 时间：2012-04-22T06:28:25.610
> 
> 标签：java, oauth, linkedin, scribe

我正在使用 scribe 在我的应用程序中登录 LinkedIn。

我想知道是否有办法自动化获取 accessToken 的过程，这样用户就不必输入验证者令牌。

可能的？如果是的话，我可以得到一些帮助吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:28:18.513

您可以在当前版本的 Scribe 中将回调添加到 ServiceBuilder，如下所示：

```
 OAuthService service = new ServiceBuilder()
                        .provider(LinkedInApi.class)
                        .apiKey(SystemVariables.LINKEDINAPIKEY)
                        .apiSecret(SystemVariables.LINKEDINSECRETKEY)
                        .callback("YOUR_CALLBACK_URL_HERE")
                        .build(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:07:01.737

如果您`callback`通过`ServiceBuilder`.

# asp.net - 当我按下后退按钮时，我在 gridview 中找到了已删除的行

> ID：10265748
> 
> 赞同：0
> 
> 时间：2012-04-22T06:29:41.617
> 
> 标签：asp.net, caching, gridview

我在我的gridview中使用asp.net，当我使用“删除命令按钮”和我的网格在更新面板中删除任何行时，它被删除并且没有出现但是当我在浏览器中单击返回时，我找到了删除的行，所以删除后如何使浏览器中的上一页更新为当前页？

**问题：**如何在不阻止缓存的情况下避免这种情况，还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T06:45:13.907

您需要防止带有 gridview 的页面缓存。在你后面的代码中尝试：

```
Page.Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

此外，您可能会找到一些通过 javascript 捕获后退按钮的解决方案，我认为这不是一个好主意。您的代码应处理用户返回的可能性。

# graph - 查找平面图（几何形状）的边界（边界）边

> ID：10265749
> 
> 赞同：4
> 
> 时间：2012-04-22T06:29:58.557
> 
> 标签：graph, find, border, edges

我有描述平面几何形状（面是三角形）的顶点和边列表。例如：

```
 a_______b
   /|\    /
  / | \  /
e/__|__\/c
    d

Verts: a, b, c, d, e
Edges: (a,b), (a,c), (a,d), (a,e), (b,c), (c,d), (d,e) 
```

这就是我所拥有的关于特定平面几何形状的所有信息。在此示例中，唯一的内部边缘是 (a,c) 和 (a,d)。所有其他边缘都是边界边缘。如何通过算法识别这些边界边缘（或反过来识别所有内部边缘）？

动机：如果有帮助，我正在尝试构建导航网格，其中一个步骤是构建可见性图，我认为第一步是识别边界边缘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T09:37:53.930

对于平面图，“外表面”属性不是唯一的；您可以绘制图形以使任何面成为外部面，或者您甚至可以绘制图形以使其具有不同的面 - 考虑您的示例图：

![在此处输入图像描述](../Images/57e8b063422f3438dc1965620bb2cdb3.png) ![在此处输入图像描述](../Images/1223304b282d56da8ec123c25a213525.png)

也就是说，如果您知道可以绘制图形以使所有内部面都是三角形的，则可以扫描边列表并检查它们属于多少三角形（通过检查相邻边）。如果边只属于一个三角形，则为外边。

无论如何，对我来说似乎很奇怪，您会知道图形具有这样的属性，但同时不知道各自的平面嵌入是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-19T19:09:43.360

我知道有点晚了。在 FEM 社区中，我们计算每个三角形的边，然后边界是出现一次的边。如果它是用稀疏矩阵完成的，它会非常快（对我来说）。

# ios - 原型单元格内按钮上的 iOS UIButton 标题文本

> ID：10265751
> 
> 赞同：1
> 
> 时间：2012-04-22T06:30:48.503
> 
> 标签：ios, uitableview

我正在做一个示例项目，以了解 iOS 上的原型单元格，最重要的是，这些原型单元格内的 UIControls 触发的目标操作。我已经通过继承 UITableCell、设置协议并让 UITableViewController 成为委托来实现这一点。

我现在遇到的问题是我正在通过类似这样的方式设置 cellForIndexPath 内按钮的标题文本（我现在不在我的电脑上）：

```
MyCustomCell *cell=... (as usual)
cell.button.Title.text=[datasource objectAtIndex:indexPath.row]; 
```

这工作正常，直到我点击按钮。然后按钮显示默认标题（顺便说一下，如果我没有在情节提要上设置，则根本不会出现标题）。

在按钮触发的操作将标题设置回我想要的内容后，使用 animationAutomatic 刷新行，但是在单击它时，仍然会出现默认标题，我觉得它对用户来说不是很有吸引力。（我当然不想看看我是否购买了应用程序）。

有没有人在这里帮助我的指针？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T08:13:13.410

您不应直接通过属性修改按钮的文本，而应使用 setTitle:forState: 选择器，如下所示：

```
[cell.button setTitle:text forState:UIControlStateNormal]; 
```

文档：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

# javascript - 谷歌地图圈：移动时如何触发事件以及如何获取新中心

> ID：10265752
> 
> 赞同：5
> 
> 时间：2012-04-22T06:30:49.797
> 
> 标签：javascript, google-maps-api-3

所以我能够在我的谷歌地图 v3 上制作一个圆形对象作为叠加层。我将其可编辑属性设置为 true。接下来我想做的是在用户移动圆时获取中心的坐标。为此，我需要某种响应事件而触发的方法。我以为我已经在初始化函数中设置了这一切，如下所示。但是，我没有收到任何警报框。所以我假设这个函数响应事件没有被触发。

```
function initialize() {  
    cityCenterLatLng = new google.maps.LatLng(cLat, cLong);    
    options = {  
        center : cityCenterLatLng,  
        zoom : 15,  
        mapTypeId : google.maps.MapTypeId.ROADMAP,  
        disableDefaultUI : false,  
        mapTypeControl : true,  
        streetViewControl : true,  
        mapTypeControlOptions : {  
            style : google.maps.MapTypeControlStyle.DEFAULT,  
            position : google.maps.ControlPosition.TOP_LEFT  
        }  
    };  
    map = new google.maps.Map(document.getElementById("map_canvas"), options);  
    $("#map_canvas").css("border", "3px solid black");  

    infoWindow = new google.maps.InfoWindow({});  

    var c = {  
       strokeColor: "#ff0000",  
       strokeOpacity: 0.8,  
       strokeWeight: 3,  
       fillColor: "#b0c4de",  
       fillOpacity: 0.50,  
       map: map,  
       center: cityCenterLatLng,  
       radius: 1000,  
       editable:true  
   };    

    circle = new google.maps.Circle(c);  

    google.maps.event.addListener(circle, 'distance_changed', function()   
    {
        alert('Circle moved');  
        //displayInfo(circle);  
    });  

    google.maps.event.addListener(circle, 'position_changed', function()   
    {  
        alert('dictance changed');  
        //displayInfo(circle);  
    });  
}

function displayInfo(widget)   
{  
    var info = document.getElementById('info');  
    info.innerHTML = 'Circle Center:' + circle.get('position') + ',Circle distance: ' +
    circle.get('distance');  
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T06:36:37.677

更改`distance_changed`为`center_changed`拖动移动，并用于`radius_changed`检测调整大小。其他事件在文档中。

[https://developers.google.com/maps/documentation/javascript/reference#Circle](https://developers.google.com/maps/documentation/javascript/reference#Circle)

向下滚动到“事件”。

对于新值，在侦听器函数中，写入`alert(circle.getCenter());`或`circle.getRadius()`

# svn - SVN 认为文件已经在版本控制之下

> ID：10265754
> 
> 赞同：10
> 
> 时间：2012-04-22T06:31:07.693
> 
> 标签：svn

所以我有两个文件夹，我想将它们添加到新的存储库中，但它们拒绝添加，因为它们已经在版本控制之下。我删除了这些文件夹及其子文件夹中的所有 .svn 文件夹，但 SVN 仍然以某种方式知道。我如何才能看到他们认为自己属于哪个存储库，告诉他们不要在那里，并将它们放入新的存储库而不删除它们或不必移动它们？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T06:51:15.907

如果您已删除`.svn`本地工作副本中的所有文件夹，则不应再对其进行版本控制。请注意，旧版本的 SVN，用于在所有文件夹中创建隐藏`.svn`文件夹，而不仅仅是在根文件夹或直接子文件夹中。

您还可以执行`export`命令在目标目录中创建完整的非版本控制副本，以避免手动删除`.svn`文件夹。

可能导致此错误的另一个问题是，在新存储库中，您已经有与您尝试添加的目录/文件同名的文件或目录。一个好的做法是将文件导入空目录以避免名称冲突。

因此，总而言之，该过程将是这样的：

*   从当前存储库中导出文件或`.svn`手动删除所有文件夹
*   在您的新/目标存储库中创建一个空文件夹
*   从目标存储库文件夹执行签出到本地副本
*   执行提交以添加所有新文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T07:04:43.693

如果这些文件已经在版本控制中，则删除 .svn 文件夹将不起作用。这是你必须做的：

(1) 删除所有有问题的文件夹或您之前从中删除 .svn 文件夹的文件夹。

(2) 执行 SVN UPDATE 以重新创建这些文件夹并将所有内容恢复到其中（即使您将在下一步中删除它们）。

(3) 现在，删除有问题的文件夹。

(4) 执行 SVN 提交，这将提交从存储库中删除这些文件夹。现在，如您所愿，它们已从存储库中消失。

(5) 您现在可以再次创建文件夹并做任何您想做的事情 - 从它们创建一个新的 SVN 存储库；或将它们重新添加到现有存储库中。

看起来步骤（1）-（2）是多余的和不必要的；但为了安全起见，无论如何你都应该这样做。

# android - Appcelerator、PhoneGap 或 JAVA

> ID：10265755
> 
> 赞同：1
> 
> 时间：2012-04-22T06:31:12.373
> 
> 标签：android

我期待为 Android 创建一个应用程序，但我对选择的平台感到困惑。我是一名具备 JAVA 和 OOPS 基础知识的 Web 开发人员。该应用程序非常简单，可以使用地址簿联系人，然后在线同步它们，反之亦然。

我应该选择哪个平台，Appcelerator、Phonegap 还是应该学习 JAVA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:39:14.700

对于像您描述的那样具有较少动画和 CPU 密集型任务的应用程序，我会推荐 Phonegap。如果您将来需要，您可以使用 Phonegap 将您的应用程序移植到 iOS。Java 的基本知识就足够了，因为 Phonegap 是用 HTML 和 JavaScript 构建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:21:48.793

如果你只是想为 Android 开发应用程序，Java 是如此的司空见惯。本机编写的应用程序也是稳定的。但我建议你尝试一切；-)

# android - 如何创建自己的 AR 引擎：AR 理论

> ID：10265756
> 
> 赞同：1
> 
> 时间：2012-04-22T06:31:12.957
> 
> 标签：android, ios, augmented-reality

我是一名 iOS 和 Android 开发人员，我想创建自己的 AR 引擎。

我一直在使用 iOS ARToolkit，但它一团糟！代码没有优化，我想自己做。

首先要了解如何在山上显示文字，例如，说出它的名字。换句话说，我需要知道如何使用设备摄像头、用户位置和方向以及对象位置；我可以在相机图像上的那个物体上显示一个标签。

你知道任何关于 AR 理论的书或网站吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:34:58.890

对于您提到的AR示例，（示例：当用户通过相机在屏幕上看到山时显示山的名称），使用三个因素：用户位置，方向（如果适用，您也可以使用垂直方向）和距离.

逻辑是这样的：从你正在看的“方向”上的当前“位置”，如果山在指定的“距离”内，那么程序假设你正在看山。相机图像真的不成图像。

您设备中的支持数据库，知道到那座山的确切距离（可以从您当前的位置和山的坐标计算，这在您的数据库中）。您也可以在屏幕上显示距离，以提供更多信息（和更好的用户体验）。

# c# - 如何读取c#中声明语句中定义的参数

> ID：10265757
> 
> 赞同：1
> 
> 时间：2012-04-22T06:31:22.143
> 
> 标签：c#, sql

在我的一个 c# 项目中，我想从以下过程中读取声明语句中定义的参数。

```
create procedure [dbo].[TestRecordSelectMInfo2]
@GRNo varchar(4)
as 
declare 
@SName varchar(35),
@Class Varchar(15)
begin
Select @SName = Students.SName, @Class = Class.Class from Students inner join Class on Students.ClassId = Class.ClassId where Students.GRNo = @GRNo
end 
```

如何使用 c# 读取 @SName 和 @Class 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:34:47.337

在该存储过程中使用变量没有意义。我认为你过于复杂了。

只需将您的 select 语句更改为此，它们将从存储过程返回到结果记录集中的调用代码。

```
Select Students.SName, Class.Class 
FROM Students inner join Class on Students.ClassId = Class.ClassId 
WHERE Students.GRNo = @GRNo 
```

如果你真的必须返回一个参数（我不认为你这样做）。您可以将变量定义为存储过程的输出参数，如此处[所述](https://stackoverflow.com/a/3433715/30018)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T08:03:15.393

像这样改变你的程序

```
create procedure [dbo].[TestRecordSelectMInfo3]
@GRNo varchar(4),
@SName varchar(35) output,
@Class Varchar(15) output
as 
begin
Select @SName = Students.SName, @Class = Class.Class from Students inner join Class on Students.ClassId = Class.ClassId where Students.GRNo = @GRNo
end 
```

用法：

```
private void GetData()
        {
            cmd.Parameters.Clear();
            cmd.Parameters.Add("@GRNo", SqlDbType.VarChar).Value = tbgrno.Text;
            SqlParameter SName = new SqlParameter("@SName", SqlDbType.VarChar);
            SqlParameter Class = new SqlParameter("@Class", SqlDbType.VarChar);
            SName.Direction = ParameterDirection.Output;
            Class.Direction = ParameterDirection.Output;
            SName.Size = 35;
            Class.Size = 15;
            cmd.Parameters.Add(SName);
            cmd.Parameters.Add(Class);
            dm.ExectNonActQuery("TestRecordSelectMInfo", cmd);
            tbsname.Text = cmd.Parameters["@SName"].Value.ToString();
            tbclass.Text = cmd.Parameters["@Class"].Value.ToString();
        }
        public void ExectNonActQuery(string spname, SqlCommand command)
        {
            SqlConnection cn = new SqlConnection("connection string");
            cmd = command;
            cmd.Connection = cn;
            cmd.CommandText = spname;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.ExecuteNonQuery();
        } 
```

# mysql - 带有限制子句的语法错误

> ID：10265770
> 
> 赞同：0
> 
> 时间：2012-04-22T06:34:19.803
> 
> 标签：mysql

我有这个例程在开发中工作，我把它复制到生产中，我在更新行上得到一个“检查你的语法附近......”错误。如果我取出限制子句，它会保存。

就像我说的，这在 Dev 中工作。复制并粘贴结构def，所以我知道它是相同的。

```
 DELIMITER ;;
CREATE DEFINER=`user`@`%` PROCEDURE `SQS_Get_Messages`(IN queue_requested INT, IN queue_limit INT)
    SQL SECURITY INVOKER
BEGIN
    DECLARE my_uuid INT;
    DECLARE fake INT;
    DECLARE now DATETIME;

    SELECT Get_Lock('message_get',10) INTO fake;

    SELECT NOW() INTO now;  
    SELECT UNIX_TIMESTAMP()+mod(UUID_SHORT(),1000) INTO my_uuid;

    UPDATE sqs SET `status`= my_uuid, `started_timestamp` = now WHERE `status` = 0 and `queue` = queue_requested LIMIT queue_limit; 

    SELECT RELEASE_LOCK('message_get') INTO fake;
    SELECT `id`,`body`,`status` from sqs WHERE `status` = my_uuid; 

END;;
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:02:14.647

如果它在开发中工作，但复制并粘贴到生产中失败，则说明您的开发服务器和生产服务器之间的版本不匹配，或者您无法正确复制和粘贴。我看不到任何其他解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:20:03.243

就是这样，新数据库运行的是稍微旧版本的 MySQL。谢谢肯。（我没有足够的'积分'来适当地奖励你，但你有我的感激之情。:-)）

# java - 如何从Android中的ListView获取当前选定项目的背景颜色

> ID：10265771
> 
> 赞同：0
> 
> 时间：2012-04-22T06:34:29.333
> 
> 标签：java, android, eclipse, listview, android-listview

谁能告诉我如何从`ListView`android中获取所选项目的背景颜色？在这里，我使用`ListView`了多个项目选择模式，我只想设置所选项目的背景颜色。如果用户取消选中我想将其背景颜色恢复为黑色的选项。

我可以设置所选项目的背景颜色，但我没有获得所选项目的当前背景颜色。

请帮我。

我正在使用 Android 4.0.3 和编辑器 Eclipse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:37:02.377

为此，您应该为每个项目维护一个布尔变量，最初为 false，当您单击任何项​​目时，您应该将变量设置为 true。

并在您的自定义适配器的 getView() 中检查它是真还是假并做必要的事情。

在尝试之前在drawable文件夹中有一个xml文件并将其设置为背景如果这不起作用那么上面必须工作..

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- touch down -->
    <item
        android:drawable="@drawable/list_selector_pressed"
        android:state_pressed="true"/>
    <!-- selected -->
    <item
        android:drawable="@drawable/list_selector_selected"
        android:state_selected="true"
        android:state_focused="false"
        android:state_pressed="false"/>
</selector> 
```

参考这个[LINK](http://android-codes-examples.blogspot.in/2011/03/customized-listview-items-selection.html) [LINK](http://bestsiteinthemultiverse.com/2009/12/android-selected-state-listview-example/)

# javascript - 如何使用 Google Chrome 自定义搜索引擎进行多参数查询？

> ID：10265777
> 
> 赞同：6
> 
> 时间：2012-04-22T06:35:20.830
> 
> 标签：javascript, google-chrome, search-engine

我正在从 Firefox 迁移到 Chrome，但我无法复制或模拟我的多个条件查询。在 Firefox 中，它使用我在[这里](http://kb.mozillazine.org/Multiple_parameter_keyword_searches)找到的 javascript 脚本轻而易举，但经过大量测试后，我认为无法在 Chrome 中实现。看看我修改后的货币兑换版本：

```
javascript:var s='%s'; url='http://www.google.com/finance/converter?a=%s&from=%s&to=%s'; t=''; qc=0; chunks=url.split('%s'); for(i=0; i<s.length; i++){if(s.charAt(i)=='"')qc=qc^1; t+=((s.charAt(i)==' '&&qc)?'^':s.charAt(i)); }args=t.split(/\s/); nurl=''; for(i=0; i<chunks.length; i++){nurl+=chunks[i]; if(args[i]!=undefined) {args[i]=args[i].replace(/\^/g,' '); nurl+=args[i]; }}location.replace(nurl,'< BR>'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T03:03:09.920

. . 遗憾的是，根据[这个关于 Chromium 的错误报告](https://code.google.com/p/chromium/issues/detail?id=97068)，此功能被故意禁用（参见[评论 #3](https://code.google.com/p/chromium/issues/detail?id=97068#c3)）。

. . 如果要复制该功能，则需要使用 Omnibox API。[以 http://developer.chrome.com/extensions/samples.html#be68e4d262d74d2457999fc402f5bf5e](http://developer.chrome.com/extensions/samples.html#be68e4d262d74d2457999fc402f5bf5e)为例。根据您的需要调整[示例代码](http://developer.chrome.com/extensions/examples/api/omnibox/simple-example/background.js)非常容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-16T21:33:56.647

至少从您提出问题的日期开始，Chrome 就已经支持这一点。这是我的做法：

```
javascript: (function(){
var s='%s';
url='https://www.google.com/search?hl=en&q=%s&tbo=1&tbs=qdr:%s';
query='';
urlchunks=url.split('%s');
schunks=s.split(';');
for(i=0; i<schunks.length; i++)query+=urlchunks[i]+schunks[i];
location.replace(query);
})(); 
```

1.  您可以使用具有多个参数的任何 URL，该参数需要多个参数。
2.  从多功能框使用：搜索词；搜索词

# android - 来自片段中 URL 的 Android Imageview 不显示

> ID：10265779
> 
> 赞同：0
> 
> 时间：2012-04-22T06:35:35.683
> 
> 标签：android, imageview, fragment

正是标题所说的。我正在尝试在片段中显示来自 URl 的 imageView，但没有显示任何内容。Android 不会崩溃，布局只是空的。我在清单中启用了互联网权限。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

Java代码在这里

```
public class InboxFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
  Bundle savedInstanceState) {

View V = inflater.inflate(R.layout.inbox_frag_layout, container, false);
ImageView image = (ImageView)V.findViewById(R.id.imgView);
Drawable drw =LoadImageFromWebOperations("http://i.imgur.com/Svphn.jpg");
image.setImageDrawable(drw);

return V;

}

private Drawable LoadImageFromWebOperations(String strPhotoUrl) {
try {
  InputStream is = (InputStream) new URL(strPhotoUrl).getContent();
  Drawable d = Drawable.createFromStream(is, "src name");
  return d; 
}catch (Exception e) { 
  System.out.println("Exc="+e); 
  return null;
}

}
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width = "wrap_content" 
    android:layout_height="wrap_content" 
    >
 <ImageView
    android:id="@+id/imgView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"/>
</LinearLayout> 
```

更新：改用 webview 修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:08:12.323

我怀疑这个问题，但不知道解决方案，但仍想分享。每个网络调用都需要时间来执行。这个时间总是大于执行单行代码语句的 CPU 速度。因此，当您调用 LoadImageFromWebOperations() 函数时，不要期望它会实时从网络获取可绘制对象。一旦 LoadImageFromWebOperations() 函数执行并返回响应 onCreateView() 函数将已经完成其执行并返回视图而不在 imageView 上设置图像。

可能的解决方案是：返回视图而不在其上设置图像。并在下载后等待从网络下载的图像，然后获取片段的当前视图（我不知道如何）并在其上设置图像。

我期待有人给出如何获取片段的当前视图的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:33:10.227

[为了让您的生活更轻松，请使用http://code.google.com/p/android-query/](http://code.google.com/p/android-query/)上的 AQuery 库。

使用该库将使您能够在一行中从 URL 设置图像视图：

```
aq.id(R.id.image1).image("http://www.vikispot.com/z/images/vikispot/android-w.png"); 
```

我建议这样做，因为它无需任何额外代码即可为您处理下载。它还以异步方式执行，这意味着您的 UI 线程不会被阻塞，这意味着用户不会减慢速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T06:55:59.627

您可以使用以下代码从 url::: 获取位图

```
URL newurl = new URL(streamURL); 
HttpGet httpRequest = null;
try  {
    httpRequest = new HttpGet(newurl.toURI());
} catch (URISyntaxException e) {
    e.printStackTrace();
}
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
HttpEntity entity = response.getEntity();
BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
InputStream instream = bufHttpEntity.getContent();
Bitmap mIcon_val = BitmapFactory.decodeStream(instream); 
```

# c# - 如何在 C# 中通过 linq 更新字段表？

> ID：10265785
> 
> 赞同：2
> 
> 时间：2012-04-22T06:36:52.673
> 
> 标签：c#, .net, linq, linq-to-sql, c#-4.0

我在 SQL 中有一个这样的表，需要将其转换如下：

**输入**

```
 A | B
  --------
   1 | al
   2 | bb
   3 | CC 
```

**输出**

```
 A | B
  -------
   1 | a
   2 | b
   3 | c 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T06:43:38.350

总体思路修正：

```
var result = db.tables
    .Where(x => (x.B!=null || x.B.Length > 0)
    .Select(x => 
        new 
        {
           A = x.A, 
           B = x.B[0]
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T08:59:57.363

```
db.table.ToList().ForEach(x => x.B = x.B.SubString(0, 1));
db.SubmitChanges(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T09:50:57.837

请检查它是否在 SQL 中，最后一行是可用于进行转换的查询类型，这也可用于批量更新

```
Declare @tab table(A int,B nvarchar(10))
insert into @tab
select 1,'al' UNION ALL
select 2,'bb' UNION ALL
select 3,'CC' 

select A,B from @tab

select A, left(lower(B),1) B from @tab 
```

# ios - iPad2 与 iPad3 手动定位项目的变化？

> ID：10265790
> 
> 赞同：2
> 
> 时间：2012-04-22T06:38:11.290
> 
> 标签：ios, cocoa-touch, ipad-2, ipad-3

因为 iPad 3（“新 iPad”）的像素是我的两倍，所以我不经意间让我的任何图像都大了一倍。但我的问题是，如果我在屏幕上手动放置一个对象，比如 CGRectMake，它的像素是两倍，它会出现在 iPad2 和 iPad3 的不同位置吗？
假设我正在使用下面的代码在屏幕上放置一个按钮：

```
 CGRectMake(375,500,125,125); 
```

因为它位于 X 坐标上的 375 像素，它不会出现在 iPad 2 和 iPad3 的不同位置，因为 iPad3 的像素是两倍？

我敢肯定这是一个愚蠢的问题，任何有经验的 iOS 开发人员都会嘲笑它，但由于简单的谷歌搜索没有出现任何问题，我想我会问。

谢谢！

-碎纸机2794

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T06:39:51.830

尽管不同设备的像素数量可能不同，但 Core Graphic 的坐标系不会。这是因为 CG 以点而不是像素来表达自身。

# node.js - 从正在运行的 node.js 应用程序确定项目根目录

> ID：10265798
> 
> 赞同：410
> 
> 时间：2012-04-22T06:39:20.240
> 
> 标签：node.js, working-directory

除了 之外，还有其他方法`process.cwd()`可以获取当前项目的根目录的路径名。Node 是否实现了类似 ruby​​ 的属性`Rails.root`, 。我正在寻找一些不变的、可靠的东西。

* * *

## 回答 #1

> 赞同：769
> 
> 时间：2013-09-10T14:22:58.777

有很多方法可以解决这个问题，每种方法都有自己的优缺点：

## `require.main.filename`

从[http://nodejs.org/api/modules.html](http://nodejs.org/api/modules.html)：

> 当一个文件直接从 Node 运行时，`require.main`设置为它的`module`. 就是说可以通过测试直接判断一个文件是否已经运行过`require.main === module`
> 
> 因为`module`提供了一个`filename`属性（通常等价于`__filename`），所以可以通过检查来获取当前应用程序的入口点`require.main.filename`。

因此，如果您想要应用程序的基本目录，您可以执行以下操作：

```
const { dirname } = require('path');
const appDir = dirname(require.main.filename); 
```

### 优点缺点

这在大多数情况下都非常有效，但如果您使用**pm2**之类的启动器运行您的应用程序或运行**mocha**测试，则此方法将失败。

## `module.paths`

Node 将所有模块搜索路径发布到`module.paths`. 我们可以遍历这些并选择第一个解决的问题。

```
async function getAppPath() {
  const { dirname } = require('path');
  const { constants, promises: { access } } = require('fs');

  for (let path of module.paths) {
    try {
      await access(path, constants.F_OK);
      return dirname(path);
    } catch (e) {
      // Just move on to next path
    }
  }
} 
```

### 优点缺点

这有时会起作用，但在包中使用时并不可靠，因为它可能会返回安装包的目录，而不是安装应用程序的目录。

## 使用全局变量

Node 有一个名为的全局命名空间对象`global`——你附加到这个对象的任何东西都将在你的应用程序中随处可用。因此，在您的`index.js`（或`app.js`您的主应用程序文件的名称）中，您可以定义一个全局变量：

```
// index.js
var path = require('path');
global.appRoot = path.resolve(__dirname);

// lib/moduleA/component1.js
require(appRoot + '/lib/moduleB/component2.js'); 
```

### 优点缺点

始终如一地工作，但是您必须依赖全局变量，这意味着您不能轻松地重用组件/等。

## `process.cwd()`

这将返回当前工作目录。根本不可靠，因为它完全取决于进程**从**哪个目录启动：

```
$ cd /home/demo/
$ mkdir subdir
$ echo "console.log(process.cwd());" > subdir/demo.js
$ node subdir/demo.js
/home/demo
$ cd subdir
$ node demo.js
/home/demo/subdir 
```

## 应用程序根路径

为了解决这个问题，我创建了一个名为**[app-root-path](https://www.npmjs.com/package/app-root-path)**的节点模块。用法很简单：

```
const appRoot = require('app-root-path');
const myModule = require(`${ appRoot }/lib/my-module.js`); 
```

**[app-root-path](https://github.com/inxilpro/node-app-root-path)**模块使用多种技术来确定应用程序的根路径，同时考虑到全局安装的模块（例如，如果您的应用程序正在运行`/var/www/`但模块安装在 中`~/.nvm/v0.x.x/lib/node/`）。它不会在 100% 的时间里工作，但它会在最常见的情况下工作。

### 优点缺点

在大多数情况下无需配置即可工作。还提供了一些不错的附加便利方法（参见项目页面）。最大的缺点是，如果：

*   您正在使用启动器，例如 pm2
*   **并且**，该模块未安装在您的应用程序`node_modules`目录中（例如，如果您将其安装在全局范围内）

您可以通过设置`APP_ROOT_PATH`环境变量或调用`.setPath()`模块来解决此问题，但在这种情况下，您最好使用该`global`方法。

## NODE_PATH 环境变量

如果您正在寻找一种方法来*确定*当前应用程序的根路径，那么上述解决方案之一可能最适合您。另一方面，如果您试图解决可靠地加载应用程序模块的问题，我强烈建议您查看`NODE_PATH`环境变量。

Node 的[模块系统](https://nodejs.org/api/modules.html)在不同的位置寻找模块。 [这些位置之一是任何`process.env.NODE_PATH`点](https://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)。如果您设置了这个环境变量，那么您可以`require`使用标准模块加载器来模块，而无需进行任何其他更改。

例如，如果您设置`NODE_PATH`为`/var/www/lib`，则以下内容可以正常工作：

```
require('module2/component.js');
// ^ looks for /var/www/lib/module2/component.js 
```

一个很好的方法是使用`npm`：

```
{
  "scripts": {
    "start": "NODE_PATH=. node app.js"
  }
} 
```

现在你可以开始你的应用程序了`npm start`，你是金子。我将它与我的[enforce-node-path](https://github.com/inxilpro/enforce-node-path)模块结合起来，它可以防止在未`NODE_PATH`设置的情况下意外加载应用程序。有关强制执行环境变量的更多控制，请参阅[checkenv](https://github.com/inxilpro/node-checkenv)。

**一个问题：** `NODE_PATH` **必须在节点应用程序****之外**设置。您不能这样做，`process.env.NODE_PATH = path.resolve(__dirname)`因为模块加载器会在您的应用程序运行之前缓存它将搜索的目录列表。

**[2016 年 4 月 6 日添加]**尝试解决此问题的另一个非常有前途的模块是[wavy](https://github.com/kolodny/wavy)。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-06-07T15:45:20.877

`__dirname`不是全局的；它是当前模块的本地文件，因此每个文件都有自己的本地不同值。

如果你想要运行进程的根目录，你可能确实想要使用`process.cwd()`.

如果您想要可预测性和可靠性，那么您可能需要将设置某个环境变量作为您的应用程序的要求。您的应用程序查找`MY_APP_HOME`（或其他），如果它在那里，并且应用程序存在于该目录中，那么一切都很好。如果它未定义或目录不包含您的应用程序，那么它应该退出并提示用户创建变量的错误。它可以设置为安装过程的一部分。

您可以使用类似`process.env.MY_ENV_VARIABLE`.

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2013-08-18T23:20:04.623

1-在项目根目录中创建一个文件，命名为**settings.js**

2-在这个文件里面添加这个代码

```
module.exports = {
    POST_MAX_SIZE : 40 , //MB
    UPLOAD_MAX_FILE_SIZE: 40, //MB
    PROJECT_DIR : __dirname
}; 
```

3- 在 node_modules 里面创建一个新的模块，命名为“settings”，在模块 index.js 里面写下这段代码：

```
module.exports = require("../../settings"); 
```

4-任何时候你想要你的项目目录就可以使用

```
var settings = require("settings");
settings.PROJECT_DIR; 
```

这样，您将拥有与该文件相关的所有项目目录；）

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2020-06-14T20:51:07.667

简单的：

```
require('path').resolve('./') 
```

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2015-05-26T18:14:14.337

获取全局根的最简单方法（*假设您使用 NPM 运行您的 node.js 应用程序“npm start”等*）

```
var appRoot = process.env.PWD; 
```

*如果您想交叉验证上述内容*

`process.env.PWD`假设您想与 node.js 应用程序的设置进行交叉检查。如果您想要一些运行时测试来检查 的有效性`process.env.PWD`，您可以使用此代码（我编写的代码似乎运行良好）进行交叉检查。您可以使用 package.json 文件中的 npm_package_name 交叉检查 appRoot 中最后一个文件夹的名称，例如：

```
 var path = require('path');

    var globalRoot = __dirname; //(you may have to do some substring processing if the first script you run is not in the project root, since __dirname refers to the directory that the file is in for which __dirname is called in.)

    //compare the last directory in the globalRoot path to the name of the project in your package.json file
    var folders = globalRoot.split(path.sep);
    var packageName = folders[folders.length-1];
    var pwd = process.env.PWD;
    var npmPackageName = process.env.npm_package_name;
    if(packageName !== npmPackageName){
        throw new Error('Failed check for runtime string equality between globalRoot-bottommost directory and npm_package_name.');
    }
    if(globalRoot !== pwd){
        throw new Error('Failed check for runtime string equality between globalRoot and process.env.PWD.');
    } 
```

你也可以使用这个 NPM 模块：`require('app-root-path')`它非常适合这个目的

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2017-05-14T06:08:39.103

我发现这对我来说始终如一，即使从子文件夹调用应用程序也是如此，因为它可以与某些测试框架一起使用，例如 Mocha：

```
process.mainModule.paths[0].split('node_modules')[0].slice(0, -1); 
```

为什么有效：

在运行时节点创建所有加载文件的完整路径的注册表。模块首先加载，因此位于此注册表的顶部。通过选择注册表的第一个元素并返回“node_modules”目录之前的路径，我们能够确定应用程序的根目录。

这只是一行代码，但为了简单起见（我的缘故），我将它黑盒化到一个 NPM 模块中：

[https://www.npmjs.com/package/node-root.pddivine](https://www.npmjs.com/package/node-root.pddivine)

享受！

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-12-15T12:16:27.970

就像将这一行添加到根目录中的模块一样简单，通常它是`app.js`or `app.ts`。

```
global.__basedir = __dirname; 
```

然后你的所有模块都可以访问 _basedir。

**注意：**对于打字稿实现，请按照上述步骤操作，然后您将能够使用根目录路径`global.__basedir`

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2014-04-18T13:10:30.617

所有这些“根目录”大多需要将一些虚拟路径解析为真正的堆路径，所以你应该看看`path.resolve`吗？

```
var path= require('path');
var filePath = path.resolve('our/virtual/path.ext'); 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2015-06-19T16:04:45.493

也许您可以尝试从向上遍历`__filename`直到找到 a `package.json`，然后确定这是您当前文件所属的主目录。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2017-02-05T11:17:46.420

实际上，我发现最强大的解决方案可能也是微不足道的：您只需将以下文件放在项目的根目录中：root-path.js，其中包含以下代码：

```
import * as path from 'path'
const projectRootPath = path.resolve(__dirname)
export const rootPath = projectRootPath 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2015-08-10T10:51:28.557

我发现使用 express 时有用的一种技术是在设置任何其他路由之前将以下内容添加到 app.js

```
// set rootPath
app.use(function(req, res, next) {
  req.rootPath = __dirname;
  next();
});

app.use('/myroute', myRoute); 
```

无需使用全局变量，您将根目录的路径作为请求对象的属性。

如果您的 app.js 位于项目的根目录中，则此方法有效，默认情况下，它位于项目的根目录中。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2020-05-26T01:03:37.853

**前言**

这是一个非常古老的问题，但它似乎在 2020 年和 2012 年一样触动了神经。我检查了所有其他答案，但找不到提到的以下技术（它有其自身的局限性，但其他的是也不适用于所有情况）：

**Git + 子进程**

如果您使用 Git 作为您的[版本控制系统](https://en.wikipedia.org/wiki/Version_control)，那么确定项目根目录的问题可以简化为（我会考虑项目的正确根目录 - 毕竟，您希望您的 VCS 具有尽可能完整的可见性范围） ：

> 检索存储库根路径

由于您必须运行 CLI 命令来执行此操作，因此我们需要生成一个子进程。此外，由于项目根极不可能在运行时更改，我们可以`child_process`在启动时使用模块的同步版本。

我发现[`spawnSync()`](https://nodejs.org/docs/latest/api/child_process.html#child_process_child_process_spawnsync_command_args_options)最适合这份工作。至于要运行的实际命令，[`git worktree`](https://git-scm.com/docs/git-worktree)（带有`--porcelain`便于解析的选项）是检索根目录的绝对路径所需的全部内容。

在答案末尾的示例中，我选择返回一个路径数组，因为可能有[多个工作树](https://stackoverflow.com/a/30185564/11407695)（尽管它们可能有公共路径）只是为了确定。请注意，当我们使用 CLI 命令时，`shell`应将选项设置为`true`（安全不应成为问题，因为没有不受信任的输入）。

**方法比较和后备**

了解 VCS 可能无法访问的情况是可能的，在分析文档和其他答案后，我包含了一些后备方案。提议的解决方案归结为（不包括第三方模块和包）：

| 解决方案 | 优势 | 主要问题 |
| --- | --- | --- |
| [`__filename`](https://nodejs.org/dist/latest-v17.x/docs/api/modules.html#__filename) | 指向模块文件 | 相对于模块 |
| [`__dirname`](https://nodejs.org/dist/latest-v17.x/docs/api/modules.html#__dirname) | 指向模块目录 | 如同`__filename` |
| `node_modules`树走 | 几乎保证根 | 嵌套复杂的树行走 |
| `path.resolve(".")` | 如果 CWD 是 root，则为 root | 如同`process.cwd()` |
| [`process.argv\[1\]`](https://nodejs.org/dist/latest-v17.x/docs/api/process.html#processargv) | 如同`__filename` | 如同`__filename` |
| `process.env.INIT_CWD` | 指向`npm run`目录 | 需要`npm`&& CLI 启动 |
| `process.env.PWD` | 指向当前目录 | 相对于（是）启动目录 |
| [`process.cwd()`](https://nodejs.org/dist/latest-v17.x/docs/api/process.html#processcwd) | 如同`env.PWD` | `process.chdir(path)`在运行时 |
| [`require.main.filename`](https://nodejs.org/dist/latest-v17.x/docs/api/modules.html#requiremain) | 根如果`=== module` | `require`在d 模块上失败 |

从上面的比较表中，以下方法是最普遍的：

*   `require.main.filename``require.main === module`如果满足，作为获取根的简单方法
*   `node_modules`[最近](https://stackoverflow.com/a/61430183/11407695)提出的 tree walk使用了另一个假设：

> 如果模块的`node_modules`目录里面有dir，很有可能是root

对于主应用程序，它将获取应用程序根目录，而对于一个模块——它的项目根目录。

**后备 1\. 树漫步**

我的实现使用了一种更宽松的方法，一旦找到目标目录就停止，因为对于给定的模块，它的根目录是项目根目录。可以链接调用或扩展它以使搜索深度可配置：

```
/**
 * @summary gets root by walking up node_modules
 * @param {import("fs")} fs
 * @param {import("path")} pt
 */
const getRootFromNodeModules = (fs, pt) =>

    /**
     * @param {string} [startPath]
     * @returns {string[]}
     */
    (startPath = __dirname) => {

        //avoid loop if reached root path
        if (startPath === pt.parse(startPath).root) {
            return [startPath];
        }

        const isRoot = fs.existsSync(pt.join(startPath, "node_modules"));

        if (isRoot) {
            return [startPath];
        }

        return getRootFromNodeModules(fs, pt)(pt.dirname(startPath));
    }; 
```

**Fallback 2\. 主模块**

第二个实现是微不足道的：

```
/**
 * @summary gets app entry point if run directly
 * @param {import("path")} pt
 */
const getAppEntryPoint = (pt) =>

    /**
     * @returns {string[]}
     */
    () => {

        const { main } = require;

        const { filename } = main;

        return main === module ?
            [pt.parse(filename).dir] :
            [];
    }; 
```

**执行**

我建议使用 tree walker 作为首选的后备，因为它更通用：

```
const { spawnSync } = require("child_process");
const pt = require('path');
const fs = require("fs");

/**
 * @summary returns worktree root path(s)
 * @param {function : string[] } [fallback]
 * @returns {string[]}
 */
const getProjectRoot = (fallback) => {

    const { error, stdout } = spawnSync(
        `git worktree list --porcelain`,
        {
            encoding: "utf8",
            shell: true
        }
    );

    if (!stdout) {
        console.warn(`Could not use GIT to find root:\n\n${error}`);
        return fallback ? fallback() : [];
    }

    return stdout
        .split("\n")
        .map(line => {
            const [key, value] = line.split(/\s+/) || [];
            return key === "worktree" ? value : "";
        })
        .filter(Boolean);
}; 
```

**缺点**

最明显的是安装和初始化 Git，这可能是不受欢迎/难以置信的（旁注：[在生产服务器上安装](https://stackoverflow.com/questions/30846167/is-it-a-bad-idea-to-have-git-repository-in-production-server)Git并不少见，也不是[不安全](https://security.stackexchange.com/questions/45452/is-using-git-for-deploying-a-bad-practice)的）。可以通过上述回退进行调解。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-10-18T04:25:22.713

# 上有一处`INIT_CWD`房产`process.env`。这是我目前在我的项目中使用的。

```
const {INIT_CWD} = process.env; // process.env.INIT_CWD 
const paths = require(`${INIT_CWD}/config/paths`); 
```

祝你好运...

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-10-05T08:11:28.193

将其添加到您的主应用程序文件（例如 app.js）的开头：

```
global.__basedir = __dirname; 
```

这将设置一个全局变量，该变量将始终等同于您的应用程序的基本目录。像任何其他变量一样使用它：

```
const yourModule = require(__basedir + '/path/to/module.js'); 
```

简单的...

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-11-30T11:39:57.497

我知道这个已经太晚了。但是我们可以通过两种方法获取根 URL

第一种方法

```
var path = require('path');
path.dirname(require.main.filename); 
```

第二种方法

```
var path = require('path');
path.dirname(process.mainModule.filename); 
```

参考链接：- [https://gist.github.com/geekiam/e2e3e0325abd9023d3a3](https://gist.github.com/geekiam/e2e3e0325abd9023d3a3)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-11-11T16:34:17.280

如果您想从正在运行的 node.js 应用程序中确定项目根目录，您也可以这样做。

```
process.mainModule.path 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-01-24T05:50:40.557

它对我有用

```
process.env.PWD 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-05-28T06:58:54.063

在主文件顶部添加：

```
mainDir = __dirname; 
```

然后在您需要的任何文件中使用它：

```
console.log('mainDir ' + mainDir); 
```

*   `mainDir`是全局定义的，如果您仅在当前文件中需要它 - 请`__dirname`改用。
*   主文件通常位于项目的根文件夹中，并命名为`main.js`, `index.js`, `gulpfile.js`.

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-03-18T00:59:04.647

> `process.mainModule`自 v 14.0.0 起已[弃用。](https://nodejs.org/docs/latest/api/process.html#process_process_mainmodule)参考答案时，请[使用](https://nodejs.org/docs/latest/api/modules.html#modules_accessing_the_main_module) `require.main`，其余的仍然成立。

```
process.mainModule.paths
  .filter(p => !p.includes('node_modules'))
  .shift() 
```

获取主模块中的所有路径并过滤掉带有“node_modules”的路径，然后获取剩余路径列表中的第一个。意外行为不会引发错误，只是一个`undefined`.

对我来说效果很好，即使在调用 ie 时也是如此`$ mocha`。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-04-25T17:59:49.440

这将逐步降低目录树，直到它包含一个`node_modules`目录，该目录通常指示您的项目根目录：

```
const fs = require('fs')
const path = require('path')

function getProjectRoot(currentDir = __dirname.split(path.sep)) {
  if (!currentDir.length) {
    throw Error('Could not find project root.')
  }
  const nodeModulesPath = currentDir.concat(['node_modules']).join(path.sep)
  if (fs.existsSync(nodeModulesPath) && !currentDir.includes('node_modules')) {
    return currentDir.join(path.sep)
  }
  return this.getProjectRoot(currentDir.slice(0, -1))
} 
```

它还确保`node_modules`返回的路径中没有，因为这意味着它包含在嵌套包安装中。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-03-01T04:59:49.573

**在 app.js 中创建一个函数**

`/*Function to get the app root folder*/`

```
var appRootFolder = function(dir,level){
    var arr = dir.split('\\');
    arr.splice(arr.length - level,level);
    var rootFolder = arr.join('\\');
    return rootFolder;
}

// view engine setup
app.set('views', path.join(appRootFolder(__dirname,1),'views')); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-12-02T15:08:23.713

我用这个。

对于我的模块名为`mymodule`

`var BASE_DIR = __dirname.replace(/^(.*\/mymodule)(.*)$/, '$1')`

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-01-12T17:50:19.413

## 让它性感。

```
const users = require('../../../database/users'); //  what you have
// OR
const users = require('$db/users'); //  no matter how deep you are
const products = require('/database/products'); //  alias or pathing from root directory 
```

### 解决丑陋路径问题的三个简单步骤。

1.  安装包：`npm install sexy-require --save`

2.  `require('sexy-require')`在主应用程序文件的顶部包含一次。

    ```
    require('sexy-require');
    const routers = require('/routers');
    const api = require('$api');
    ... 
    ```

3.  可选步骤。路径配置可以在`.paths`项目根目录的文件中定义。

    ```
    $db = /server/database
    $api-v1 = /server/api/legacy
    $api-v2 = /server/api/v2 
    ```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-06-24T10:15:19.480

您可以简单地在 express app 变量中添加根目录路径，然后从应用程序中获取此路径。为此`app.set('rootDirectory', __dirname);`，请在您的 index.js 或 app.js 文件中添加。并`req.app.get('rootDirectory')`用于获取代码中的根目录路径。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-09-27T03:07:08.213

老问题，我知道，但是没有问题提到要使用`progress.argv`. argv 数组包括一个完整的路径名和文件名（带或不带 .js 扩展名），用作节点执行的参数。因为它也可以包含标志，所以您必须过滤它。

这不是您可以直接使用的示例（因为使用了我自己的框架），但我认为它可以让您了解如何去做。我还使用缓存方法来避免调用此函数对系统造成太大压力，尤其是在未指定扩展名时（并且需要文件存在检查），例如：

```
node myfile 
```

或者

```
node myfile.js 
```

这就是我缓存它的原因，另请参见下面的代码。

* * *

```
function getRootFilePath()
{
        if( !isDefined( oData.SU_ROOT_FILE_PATH ) )
        {
            var sExt = false;

            each( process.argv, function( i, v )
            {
                 // Skip invalid and provided command line options
                if( !!v && isValidString( v ) && v[0] !== '-' )
                {
                    sExt = getFileExt( v );

                    if( ( sExt === 'js' ) || ( sExt === '' && fileExists( v+'.js' )) )
                    {

                        var a = uniformPath( v ).split("/"); 

                         // Chop off last string, filename
                        a[a.length-1]='';

                         // Cache it so we don't have to do it again.
                        oData.SU_ROOT_FILE_PATH=a.join("/"); 

                         // Found, skip loop
                        return true;
                    }
                }
            }, true ); // <-- true is: each in reverse order
        }

        return oData.SU_ROOT_FILE_PATH || '';
    }
}; 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-01-20T08:05:02.813

找到电子应用程序的根路径可能会很棘手。因为在生产、开发、打包等不同条件下，主进程和渲染器的根路径是不同的。

我编写了一个 npm 包[electron-root-path](https://github.com/ganeshrvel/npm-electron-root-path/)来捕获电子应用程序的根路径。

```
$ npm install electron-root-path

or 

$ yarn add electron-root-path

// Import ES6 way
import { rootPath } from 'electron-root-path';

// Import ES2015 way
const rootPath = require('electron-root-path').rootPath;

// e.g:
// read a file in the root
const location = path.join(rootPath, 'package.json');
const pkgInfo = fs.readFileSync(location, { encoding: 'utf8' }); 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-10-01T21:13:47.647

这将做：

```
path.join(...process.argv[1].split(/\/|\\/).slice(0, -1)) 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-12-02T13:57:08.123

```
path.dirname(process.mainModule.filename); 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2022-01-11T19:19:46.387

在现代版本的 npm 中，您可以将条目添加到`exports`, 以用作简写。请注意，如果您希望能够同时引用根本身和该根中的文件，则分别需要`./`两者`./*`：

`package.json`：

```
{
  "imports": {
    "#root": "./",
    "#root/*": "./*",
    ...
  },
  ...
} 
```

`./index.js`：

```
import {namedExport} from '#root/file.js' 
```

`./file.js`：

```
export const namedExport = {
  hi: "world",
}; 
```

然后：

```
$ node --experimental-specifier-resolution=node index.js 
```

* * *

您可以使用文件进一步扩展它`constants.js`，您可以在其中使用上述答案中的一种方法，或者输入绝对路径，如果您需要路径本身

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2016-06-28T18:38:36.700

尝试`path._makeLong('some_filename_on_root.js');`

例子：

```
cons path = require('path');
console.log(path._makeLong('some_filename_on_root.js'); 
```

这将从您的节点应用程序的根目录返回完整路径（与 package.json 的位置相同）

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2018-10-10T09:34:49.943

只需使用：

```
 path.resolve("./") ... output is your project root directory 
```

* * *

## 回答 #32

> 赞同：-5
> 
> 时间：2019-03-25T17:45:49.453

__dirname 将为您提供根目录，只要您位于根目录中的文件中。

```
// ProjectDirectory.js (this file is in the project's root directory because you are putting it there).
module.exports = {

    root() {
        return __dirname;
    }
} 
```

在其他一些文件中：

```
const ProjectDirectory = require('path/to/ProjectDirectory');
console.log(`Project root directory is ${ProjectDirectory.root}`); 
```

# android - 将数据从editText拖动到android中的其他editText

> ID：10265799
> 
> 赞同：0
> 
> 时间：2012-04-22T06:39:42.983
> 
> 标签：android, android-edittext

我正在为 android 设备实现 Excel，我正在使用 baseAdapter 打印 EditTexts，我想将数据从一个 EditText 拖到另一个 EditText 我该怎么做？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:34:35.597

您可以将您拥有的 EditTexts 放在相对布局中，然后在触摸侦听器上实现 EditText。当用户按下 EditText 时，使用 EditText 中的文本创建一个 TextView，然后在 TextView 上进行拖放，如果 TextView 被拖放到另一个 EditText 中，则将文本放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:32:20.853

只需在EditText的LongTouch上创建TextView，根据滑动改变它的位置，如果最后滑动的坐标是EditText的坐标复制TextView的文本在里面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T06:47:43.630

使用下面的代码，它会正常工作。

只需将您的文本视图拖到任何编辑框，它就会在编辑框中显示确切的值。只需将 2 - 3 个 textview 和 2 - 3 个 edittext 放在屏幕上的任何位置，然后按照以下代码进行操作。下面是代码。

```
 textViewObject.setOnTouchListener(this);

   @Override
   public boolean onTouch(View view, MotionEvent motionEvent)
   {
    TextView tvResult = (TextView) view;
    String strData = tvResult.getText().toString();
    if (motionEvent.getAction() == MotionEvent.ACTION_DOWN)
    {
         ClipData data = ClipData.newPlainText("text", strData);
         DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
         view.startDrag(data, shadowBuilder, view, 0);
    }
    return true;
} 
```

# linux - 为什么 wineserver 在后台运行时在子进程中设置主套接字？

> ID：10265803
> 
> 赞同：3
> 
> 时间：2012-04-22T06:40:32.857
> 
> 标签：linux, sockets, wine

当 Wine 服务器启动时，它通过 open_master_socket() 创建一个 Unix 套接字，之后启动的所有 Wine 进程都使用这个套接字连接到 Wine 服务器，这里是 server/request.c,open_master_socket() 的代码：

```
 771     if (!foreground)
 772     {
 773         if (pipe( sync_pipe ) == -1) fatal_perror( "pipe" );
 774         pid = fork();
 775         switch( pid )
 776         {
 777         case 0:  /* child */
 778             setsid();
 779             close( sync_pipe[0] );
 780 
 781             acquire_lock();
 782 
 783             /* close stdin and stdout */
 784             dup2( fd, 0 );
 785             dup2( fd, 1 );
 786 
 787             /* signal parent */
 788             dummy = 0;
 789             write( sync_pipe[1], &dummy, 1 );
 790             close( sync_pipe[1] );
 791             break;
 792 
 793         case -1:
 794             fatal_perror( "fork" );
 795             break;
 796 
 797         default:  /* parent */
 798             close( sync_pipe[1] );
 799 
 800             /* wait for child to signal us and then exit */
 801             if (read( sync_pipe[0], &dummy, 1 ) == 1) _exit(0);
 802 
 803             /* child terminated, propagate exit status */
 804             wait4( pid, &status, 0, NULL );
 805             if (WIFEXITED(status)) _exit( WEXITSTATUS(status) );
 806             _exit(1);
 807         }
 808     }
 809     else  /* remain in the foreground */
 810     {
 811         acquire_lock();
 812     } 
```

acquire_lock() 用于设置主套接字，问题是在后台运行时，为什么 fork() 让子进程完成工作，而父进程只是等待和 exit()？为什么不在前台运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:47:01.550

“`fork()`并让子进程完成工作”*是*“在后台运行”。

管道是一个习惯用法，让父级在子级进行可能失败的设置（在这种情况下，获取锁）时留在身边，并在发生故障时正确传播失败；否则，您将无法轻易发现子进程失败，而必须在事后检查其是否存在或扫描日志文件以查看是否出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:46:15.217

是的，恶魔！
感谢ninjalj，这是实现后台运行守护进程的通用方法，并让分叉的孩子（守护进程）做守护进程。使用 _exit() 而不是 exit() 的父级是为了避免意外删除临时文件。
有关守护程序的更多信息，请参阅 [如何制作进程守护程序](https://stackoverflow.com/questions/5384168/how-to-make-a-process-daemon)和 [http://software.clapper.org/daemonize/](http://software.clapper.org/daemonize/)

geekosaur 很好地解释了为什么我们需要在 _exit() 之前等待孩子。

# mysql - 查看 MySQL 执行的 SQL

> ID：10265805
> 
> 赞同：0
> 
> 时间：2012-04-22T06:40:45.277
> 
> 标签：mysql, sql

我正在使用 wordpress，我希望看到所有 SQL 都在后端执行。你们有什么好工具可以用来查看 MySQL 执行的任何 SQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:46:00.640

只需打开查询日志记录。这是一篇详细描述如何执行此操作的博客文章：[MySQL Query Logging](http://www.redips.net/mysql/query-logging/)。

要启用通用查询日志，请在 /etc/my.cnf 配置文件的 mysqld 部分下添加日志行并重新启动 MySQL 服务器。

> 日志=/var/log/mysqld.log

许多 Linux 发行版（如 Fedora）都带有创建的 /var/log/mysqld.log 文件。只需确保 mysqld.log 文件存在并且 mysql 用户具有写入权限。如果您需要创建日志文件，请使用以下命令：

```
# create mysqld.log file 
bash> touch /var/log/mysqld.log
# set owner and group owner for the mysqld.log file 
bash> chown mysql:mysql /var/log/mysqld.log 
```

要查看日志，请使用此命令

```
bash> tail -f /var/log/mysqld.log 
```

# android - 如何设置保持屏幕开启和全屏标志？

> ID：10265808
> 
> 赞同：2
> 
> 时间：2012-04-22T06:41:16.010
> 
> 标签：android, layoutparams, android-screen, android-windowmanager

全屏在我的应用程序中，我编写了以下代码：

```
 public void onCreate(Bundle savedInstanceState) {
         requestWindowFeature(Window.FEATURE_NO_TITLE);
         setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
           getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN); 
               super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);
                       .
                       .
                       . 
```

并在我的应用程序中保持屏幕打开，我在布局中编写此代码：

```
android:keepScreenOn="true" 
```

尽管并非总是如此，但有时会像这样错误我：

```
java.lang.IllegalArgumentException: View not attached to window manager
at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:381)
at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:226)
at android.view.Window$LocalWindowManager.removeView(Window.java:432)
at android.app.Dialog.dismissDialog(Dialog.java:278)
at android.app.Dialog.access$000(Dialog.java:71)
at android.app.Dialog$1.run(Dialog.java:111)
at android.app.Dialog.dismiss(Dialog.java:268)
at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
at dalvik.system.NativeStart.main(Native Method) 
```

我能做些什么？我写的是真实的代码？谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T06:59:46.543

```
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.main); 
```

必须先调用 super.onCreate....

您可以以编程方式执行此操作：

```
public class ActivityName extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // remove title
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
    }
} 
```

或者您可以通过您的 AndroidManifest.xml 文件执行此操作：

```
<activity android:name=".ActivityName"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
</activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T07:02:47.073

在 AndroidMenifest.xml 文件中添加活动

```
 android:name=".ActivityName"
        android:configChanges="orientation|keyboardHidden"
        android:keepScreenOn="true"
        android:label="@string/app_name"
        android:theme="@style/customTheme" > 
```

如果在 setContentView 之前存在，则删除以下内容

```
boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-01T05:21:05.343

要启用全屏：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

要启用屏幕：

```
getWindow().addFlags( WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON | 
                        WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-21T13:36:38.093

WindowManager.LayoutParams.FLAG_FULLSCREEN API 折旧 >= 30 (R) 建议使用此方法检查。

```
@Suppress("DEPRECATION")
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R) {
   window.insetsController?.hide(WindowInsets.Type.statusBars())
} else {
   window.setFlags(
      WindowManager.LayoutParams.FLAG_FULLSCREEN,
      WindowManager.LayoutParams.FLAG_FULLSCREEN
     )
} 
```

# r - 有没有办法在逻辑回归的向后消除中只包括 P<0.05 显着的因素

> ID：10265817
> 
> 赞同：0
> 
> 时间：2012-04-22T06:43:13.547
> 
> 标签：r, regression

使用 进行反向消除时`step()`，是否可以仅包括那些显着的因素，例如 P<0.05？

我现在正在使用这条线

```
step(FulMod3,direction="backward",trace=FALSE) 
```

得到我的最终模型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T14:52:09.537

这些问题的答案给出了起点

*   [R 中的逻辑回归（类似 SAS 的输出）](https://stackoverflow.com/questions/3439248/logistic-regression-in-r-sas-like-output)
*   [使用 P 值进行逐步回归以删除具有不显着 p 值的变量](https://stackoverflow.com/questions/3701170/stepwise-regression-using-p-value)

特别是它们将您指向包`fastbw`中`rms`，可以与`rms::lrm`（逻辑回归）结合使用。他们还解释了为什么通过 p 值逐步回归通常是一个**非常****非常****非常**糟糕的**想法**：另请参见[http://www.stata.com/support/faqs/stat/stepwise.html](http://www.stata.com/support/faqs/stat/stepwise.html)。在*一些*情况下它是合适的（否则弗兰克哈雷尔，`rms`包的作者和反对愚蠢使用逐步回归的斗士，不会写`fastbw`），但它们相对较少，通常由（例如）惩罚回归方法主导或通过 AIC 逐步方法（如在`step`）：参见例如 [https://stats.stackexchange.com/questions/13686/what-are-modern-easily-used-alternatives-to-stepwise-regression](https://stats.stackexchange.com/questions/13686/what-are-modern-easily-used-alternatives-to-stepwise-regression)和[https://stats.stackexchange.com/questions/20836/自动模型选择算法](https://stats.stackexchange.com/questions/20836/algorithms-for-automatic-model-selection)

# python - 用整个元组替换嵌套元组中的值

> ID：10265820
> 
> 赞同：1
> 
> 时间：2012-04-22T06:44:18.177
> 
> 标签：python, tuples, linguistics

好的，

我正在研究语言证明器，并且我有一系列表示语句或表达式的元组。有时，我最终得到一个嵌入的“和”语句，我试图将它“冒泡”到表面。我想要一个看起来像这样的元组：

```
('pred', ('and', 'a', 'b'), 'x') 
```

或者，举个更简单的例子：

```
( ('and', 'a', 'b'), 'x') 
```

我想将 ands 分成两个语句，以便最上面的语句产生：

```
('and', ('pred', 'a', 'x',), ('pred', 'b', 'x') ) 
```

和底部的一个：

```
('and', ('a', 'x'), ('b', 'x') ) 
```

我尝试了很多东西，但结果总是很丑陋的代码。如果有更多嵌套元组，我会遇到问题，例如：

```
('not', ('p', ('and', 'a', 'b'), 'x') ) 
```

我想导致

```
('not', ('and', ('p', 'a', 'x',), ('p', 'b', 'x') ) ) 
```

所以基本上，问题是试图用整个元组的值替换一个嵌套的元组，但是嵌套的元组被修改了。这是非常丑陋的。:(

我不是超级流利的python，所以它变得非常复杂，有很多我知道不应该存在的for循环。：（ 任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:15:01.520

这种递归方法似乎有效。

```
def recursive_bubble_ands_up(expr):
    """ Bubble all 'and's in the expression up one level, no matter how nested.
    """
    # if the expression is just a single thing, like 'a', just return it. 
    if is_atomic(expr):
        return expr
    # if it has an 'and' in one of its subexpressions 
    #  (but the subexpression isn't just the 'and' operator itself)
    #  rewrite it to bubble the and up
    and_clauses = [('and' in subexpr and not is_atomic(subexpr)) 
                   for subexpr in expr]
    if any(and_clauses):
        first_and_clause = and_clauses.index(True)
        expr_before_and = expr[:first_and_clause]
        expr_after_and = expr[first_and_clause+1:]
        and_parts = expr[first_and_clause][1:]
        expr = ('and',) + tuple([expr_before_and + (and_part,) + expr_after_and 
                                 for and_part in and_parts])
    # apply recursive_bubble_ands_up to all the elements and return result
    return tuple([recursive_bubble_ands_up(subexpr) for subexpr in expr])

def is_atomic(expr):
    """ Return True if expr is an undividable component 
    (operator or value, like 'and' or 'a'). """
    # not sure how this should be implemented in the real case, 
    #  if you're not really just working on strings
    return isinstance(expr, str) 
```

适用于您的所有示例：

```
>>> tmp.recursive_bubble_ands_up(('pred', ('and', 'a', 'b'), 'x'))
('and', ('pred', 'a', 'x'), ('pred', 'b', 'x'))
>>> tmp.recursive_bubble_ands_up(( ('and', 'a', 'b'), 'x'))
('and', ('a', 'x'), ('b', 'x'))
>>> tmp.recursive_bubble_ands_up(('not', ('p', ('and', 'a', 'b'), 'x') ))
('not', ('and', ('p', 'a', 'x'), ('p', 'b', 'x'))) 
```

请注意，这不知道任何其他“特殊”运算符，例如`not`- 正如我在评论中所说，我不确定它应该如何处理。但它应该给你一些开始。

**编辑：**哦，哎呀，我刚刚意识到这只会执行一个“冒泡”操作，例如：

```
>>> tmp.recursive_bubble_ands_up(((('and', 'a', 'b'), 'x'), 'y' ))
(('and', ('a', 'x'), ('b', 'x')), 'y')
>>> tmp.recursive_bubble_ands_up((('and', ('a', 'x'), ('b', 'x')), 'y'))
('and', (('a', 'x'), 'y'), (('b', 'x'), 'y')) 
```

所以你真正想要的可能是在一个while循环中应用它，直到输出与输入相同，如果你想让你的'and'从多个级别冒泡，就像这样：

```
def repeat_bubble_until_finished(expr):
    """ Repeat recursive_bubble_ands_up until there's no change 
    (i.e. until all possible bubbling has been done). 
    """
    while True:
        old_expr = expr
        expr = recursive_bubble_ands_up(old_expr)
        if expr == old_expr:
            break
    return expr 
```

另一方面，这样做表明实际上我的程序打破了你的“非”示例，因为它在“非”之前冒泡了“和”，你说你想让它一个人呆着：

```
>>> tmp.recursive_bubble_ands_up(('not', ('p', ('and', 'a', 'b'), 'x')))
('not', ('and', ('p', 'a', 'x'), ('p', 'b', 'x')))
>>> tmp.repeat_bubble_until_finished(('not', ('p', ('and', 'a', 'b'), 'x')))
('and', ('not', ('p', 'a', 'x')), ('not', ('p', 'b', 'x'))) 
```

所以我想你必须为 'not' into 构建一个特殊情况`recursive_bubble_ands_up`，或者在运行我的之前应用你的非处理函数，然后在`recursive_bubble_ands_up`in之前插入它，`repeat_bubble_until_finished`以便它们交替应用。

好吧，我现在真的该睡觉了。

# c# - String.Split 的最佳角色是什么？

> ID：10265822
> 
> 赞同：4
> 
> 时间：2012-04-22T06:45:11.780
> 
> 标签：c#, string

免责声明：我知道在 99% 的情况下，您不应该“序列化”连接字符串中的数据。

你们在众所周知的情况下使用什么字符：

```
string str = userId +"-"+ userName; 
```

在大多数情况下，我已经退回到 | （管道）但是，在某些情况下，用户甚至会输入。像☼（ALT+9999）这样的“不可输入”字符呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T06:53:12.733

这取决于太多因素，无法给出具体答案。

首先，你为什么*要这样做*？如果您觉得需要以这种方式存储`userId`和`userName`组合它们，请考虑替代方法，例如 CSV 样式引用或类似方法。

其次，在正常情况下，只应使用不属于字符串的分隔符。如果 userId 只是一个数字，那么“-”就可以了……但是如果这个数字可能是负数怎么办？

第三，这取决于你打算用字符串做什么。如果它只是用于日志记录或调试器或其他形式的人类消费，那么您可以放松一下，只需选择一个看起来合适的分隔符。如果您打算像这样存储数据，请使用分隔符来确保您以后可以正确提取数据，而不管`userId`or的值如何`userName`。如果您可以摆脱它，请使用`\0`例如。如果任一值来自不受信任的来源（即 Internet），则确保分隔符不能用作任一字符串中的字符。通常，您会限制每个包含的字符 - 例如，数字`userId`和字母，数字和一些标点符号`userName`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T07:00:39.273

如果是用于数据存储和检索，则无法保证用户找不到将分隔符注入字符串的方法。安全的做法是以某种方式预处理输入：

*   让我们`-`成为特殊角色
*   如果`-`在输入中遇到 a，请将其替换为`-0`.
*   用作`--`分隔符

所以`userid = "alpha-dog"`and`userName = "papa--0bear"`将被翻译成

```
alpha-0dog--papa-0-00bear 
```

重要的是您的方案必须是完全可撤销的，并且用户不应该能够破坏它，无论他们输入什么。

本质上，这是一个非常原始的消毒版本。

# javascript - 未捕获的类型错误：对象# 没有方法“拆分”

> ID：10265825
> 
> 赞同：1
> 
> 时间：2012-04-22T06:45:37.333
> 
> 标签：javascript, jquery

我正在编写一个 Javascript 函数来在网站上预加载图片。

```
function preload(images) {
if (document.images) {
        var i = 0;
        var imageArray = new Array();
        imageArray = images.split(';');
        var imageObj = new Image();
        for(i=0; i<=imageArray.length-1; i++) {
        imageObj.src=images[i];
        }
    }
}
preload('img1.jpg;img2.jpg;img3.jpg'); 
```

它给了我一个错误：Uncaught TypeError: Object # has no method 'split'

这是什么原因造成的？我该如何解决？

如果我应该提供更多信息，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T06:48:46.303

现在试试吧，images[i] 不会给你图片的名字。您在 imageArray 中有图像名称。我将 images[i] 更改为 imageArray[i]

```
function preload(images) {
if (document.images) {
        var i = 0;
        var imageArray = new Array();
        imageArray = images.split(';');
        var imageObj = new Image();
        for(i=0; i<=imageArray.length-1; i++) {
        imageObj.src=imageArray[i];
        }
    }
}
preload('img1.jpg;img2.jpg;img3.jpg'); 
```

# python - 当 Modelform 传递自定义字典时，unique=True 不起作用？

> ID：10265830
> 
> 赞同：2
> 
> 时间：2012-04-22T06:46:32.063
> 
> 标签：python, database, django, django-models, django-views

所以现在我正在编辑模型表单提供给视图的 Querydict，以使一个字段中的提交全部小写并且没有空格。但是当我构造该字典并将其传递回 Modelform 以进行验证/保存时，如果多次输入相同的内容，它不会给我一个错误。似乎 unique=True 应该适用于所有格式正确的提交，而不仅仅是来自 request.POST 的提交。关于这个问题的任何帮助/见解都会很棒。

编辑：代码

处理模型的视图

```
dict = {}
sitename = request.POST['sitename']
#insert an if statement telling them only letters are allowed
urltitle = ''.join(sitename.split()).lower()
dict['sitename'] = urltitle
make =  MakesiteForm(dict)
if make.is_valid():
      make.save() 
```

有问题的模型

```
class Makesite(models.Model):
    sitename = models.CharField(max_length=100, unique = True) 
    siteinfo = models.ManyToManyField(Siteinfo)
    ref_id = models.ManyToManyField(RefID)
    def __unicode__(self):
        return u'%s' %(self.sitename) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:27:14.053

1.不要重新分配内置`dict`函数

2.字段处理逻辑应以clean方法完成：

```
class MakesiteForm(forms.ModelForm):

    # your code... Then

    def clean_sitename(self):
        sitename = self.cleaned_data['sitename']
        return ''.join(sitename.split()).lower() 
```

3.如果表格无效，显示你会得到什么错误？

# objective-c - 可可：webview如何禁用滚动条

> ID：10265831
> 
> 赞同：5
> 
> 时间：2012-04-22T06:46:40.327
> 
> 标签：objective-c, macos, cocoa

webview 禁用滚动条 两指滚动，我想禁止。

像这样不能

```
[[webView windowScriptObject]evaluateWebScript:@" document.body.style.overflowX='hidden';"]; 
```

![在此处输入图像描述](../Images/46351a39dd37ec41a30d70e77e45f648.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-23T19:18:57.847

```
[[[webView mainFrame] frameView] setAllowsScrolling:NO]; 
```

# node.js - 确定从正在运行的 node.js 应用程序中使用的 NPM 模块

> ID：10265832
> 
> 赞同：6
> 
> 时间：2012-04-22T06:46:54.057
> 
> 标签：node.js, npm

除了`package.json`在项目根目录中获取文件之外，还有其他方法可以确定正在运行的 node.js 应用程序的依赖项列表吗？节点是否将此元信息作为全局命名空间中的某个 var 保留？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T09:44:27.690

如果您只是在应用程序目录中查找当前安装的 npm 包，那么您可以安装[npm](http://search.npmjs.org/#/npm)包 ( `npm install -g npm`) 并以[编程](http://npmjs.org/api/npm.html)方式调用[`ls`](https://github.com/isaacs/npm/blob/master/doc/api/ls.md)以列出已安装的包和依赖关系树。

*显然，这与已安装的软件包是否实际`require`在应用程序中无关。*

用法没有很好的记录，但这应该可以帮助您入门。

```
var npm = require('npm');

npm.load(function(err, npm) {
    npm.commands.ls([], true, function(err, data, lite) {
        console.log(data); //or lite for simplified output
    });
}); 
```

例如：

```
{ dependencies:
   { npm: { version: '1.1.18', dependencies: [Object] },
     request: { version: '2.9.202' } } } 
```

否则，我相信唯一的其他选择是自省[`module`](http://nodejs.org/api/modules.html#modules_modules)模块以获取与当前加载/缓存的模块路径有关的信息。但是，这绝对不像是作为公共 API 开发的。我不确定是否有任何替代品，所以很想听听是否有例如

```
var req = require('request'); // require some module for demo purposes
var m = require('module');

// properties of m contain current loaded module info, e.g. m._cache 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:01:54.360

我相信您可以使用[require-analyzer](https://github.com/nodejitsu/require-analyzer)，根据[Isaacs](https://github.com/isaacs)的说法（可能会错过一些）。您可以从 11:55在[Nodeup 的第一个播客](http://nodeup.com/one)中听到这一点。

或者您可以尝试 James [node-detective](https://github.com/substack/node-detective)，它可能会更好地找到您的依赖项（但不是通过运行代码），但由于 Javascript 的动态特性（12:46）。

> **侦探**
> 
> 使用正确的 AST 遍历查找所有对 require() 的调用，无论嵌套多么疯狂。

PS：要将这些 package.json 变量公开给 node.js，您可以使用[node-pkginfo](https://github.com/indexzero/node-pkginfo)

# .htaccess - 重写单个 URL

> ID：10265833
> 
> 赞同：0
> 
> 时间：2012-04-22T06:47:00.360
> 
> 标签：.htaccess, mod-rewrite

我想将 URL **www.mysite.com/this/index.php** 重新写入**www.mysite.com**

我知道这有点复杂..它在我的根 htaccess 上尝试了这个代码，但它似乎不起作用我在这里做错了什么？

```
RewriteCond %{HTTP_HOST} ^mysite\.us$ [OR]
RewriteCond %{HTTP_HOST} ^www\.mysite\.us$
RewriteRule ^/this/index.php$ / 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:49:59.847

erm，您希望检查`mysite.us`并`mysite.com`在重写规则中使用过，忽略这一事实，这是我认为对您有用的结果：

```
RewriteCond %{HTTP_HOST} ^mysite\.(us|com)$ [OR]
RewriteCond %{HTTP_HOST} ^www\.mysite\.(us|com)$
RewriteRule ^this/index.php$ / [R] 
```

基本上，我只是从中删除了`/`字符，`^/this`因为这就是链接的匹配方式。

并且`[R]`意味着**r**重定向，这意味着它会更改浏览器中的 url。否则你看不到 url 改变了，你只看到页面改变了。

这是htaccess.madewithlove.be[的](http://htaccess.madewithlove.be/)[屏幕截图](http://prntscr.com/8e7rq)。

# java - 声明一个二叉树，它采用一个通用类型的节点，其中包含一个通用类型的键值？

> ID：10265836
> 
> 赞同：1
> 
> 时间：2012-04-22T06:47:17.880
> 
> 标签：java, generics, binary-tree, nodes

如果我有一个节点类可以接受其键值的泛型类型：

```
class Node<K extends Comparable<K>> implements Comparable<Node<K> {
    ...
}

class KeyValueNode<K extends Comparable<K>, V> extends Node<K> {
    ...
} 
```

是否可以声明一个接受通用类型节点的通用二叉树类，它可以包含通用类型的键值？我以为它看起来像这样......

```
class BinaryTree<N<K>> {
    N<K> root;
    BinaryTree<N<K>> left, right;
    ...
} 
```

对任何明显的误解表示歉意，我仍在尝试掌握泛型和 Java 中的语法，非常感谢任何帮助或见解。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:38:56.287

二叉树结构本质上只是保存对根节点的引用。所以它应该具有与其节点相同的类型参数：

```
class BinaryTree<K extends Comparable<K>> {

    Node<K> root;
} 
```

或者对于键值设计：

```
class KeyValueBinaryTree<K extends Comparable<K>, V> {

    KeyValueNode<K, V> root;
} 
```

请注意，是否需要封闭树类是有争议的，因为它是指向彼此的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:08:02.407

你可以说：

```
class BinaryTree<N extends Node<N>> {
  Node<N> root; 
  // or even better: N root;
  BinaryTree<N> left, right;
} 
```

拥有`BinaryTree<Node<K>>`不是像[定义泛型类型](http://docs.oracle.com/javase/tutorial/java/generics/gentypes.html)*那样参数*化类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:14:49.383

这就是我编写通用二叉树类的方式

```
public class BinaryTree<N extends Node<K>, K extends Comparable> {
    N root;
    BinaryTree<N, K> left, right;
} 
```

（尽管我假设您不会真正在二叉树中描述 BinaryTree，而这只是为了您的示例来说明如何声明它）

# javascript - 如何在从数据库异步加载中用占位符替换不存在的图像

> ID：10265839
> 
> 赞同：2
> 
> 时间：2012-04-22T06:48:20.157
> 
> 标签：javascript, jquery, image, brokenimage

我有一个包含图像的数据库，我需要根据用户的请求即时加载这些图像。这些图像将作为包含 div 容器中的单独 s 的背景图像......类似于图像滚动器。

该数据库当前是本地数据库，但这不是我的问题。

问题是数据库可能没有我请求的所有图像......并且我可能会得到一个或多个不存在的图像......并且由于数据库前端和加载图像前端的事情是异步的好吧，我不确定如何用标准占位符图像替换不存在的图像。我不能在一个循环中即时执行它，因为它在加载甚至发生之前就执行了。我尝试使用 .Load 和 .error，但我不确定如何在背景图像上做到这一点。

有没有标准和简单的方法来处理这个..最好没有插件，因为我有很多...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:02:07.827

看来我无法摆脱必须创建另一个 DOM elem。这是我现在使用的：

```
<div style="background:url(providerSrc)">
<img
     style="display:none" 
       src="providerSrc"
   onerror="this.parentNode.style.backgroundImage='url(fallbackSrc)'"  
   />
</div> 
```

这取自：[http ://www.daveoncode.com/2010/08/20/image-background-fallback-img-tag-error-handlers/](http://www.daveoncode.com/2010/08/20/image-background-fallback-img-tag-error-handlers/)

如果您知道“更好”的解决方案，请回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:36:12.020

如果将占位符作为背景图像放在原始图像后面怎么办？如果图像存在，它将覆盖占位符。如果不是，则占位符不会覆盖任何内容，并且它将是可见的。

# sql-server - 如何在 SQL Server 中提取此特定子字符串？

> ID：10265841
> 
> 赞同：11
> 
> 时间：2012-04-22T06:48:52.420
> 
> 标签：sql-server, substring

我有一个具有特定模式的字符串：

```
23;chair,red [$3] 
```

即，一个数字后跟一个分号，然后一个名称后跟一个左方括号。

假设分号`;`始终存在并且左方括号`[`始终存在于字符串中，如何在 SQL Server 查询中提取（但不包括）the`;`和 the之间的文本？`[`谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-22T06:59:23.133

组合`SUBSTRING()`、`LEFT()`和`CHARINDEX()`函数。

```
SELECT LEFT(SUBSTRING(YOUR_FIELD,
                      CHARINDEX(';', YOUR_FIELD) + 1, 100),
                      CHARINDEX('[', YOUR_FIELD) - 1)
FROM YOUR_TABLE; 
```

这假设您的字段长度永远不会超过 100，但如果需要，您可以通过使用该`LEN()`函数更聪明地考虑这一点。我没有打扰，因为那里已经发生了足够多的事情，而且我没有要测试的实例，所以我只是盯着括号等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T07:04:47.117

假设它们始终存在并且不是您的数据的一部分，这将起作用：

```
declare @string varchar(8000) = '23;chair,red [$3]'
select substring(@string, charindex(';', @string) + 1, charindex(' [', @string) - charindex(';', @string) - 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T02:08:59.537

@Marc 提供的答案的替代方案

```
SELECT SUBSTRING(LEFT(YOUR_FIELD, CHARINDEX('[', YOUR_FIELD) - 1), CHARINDEX(';', YOUR_FIELD) + 1, 100)
FROM YOUR_TABLE
WHERE CHARINDEX('[', YOUR_FIELD) > 0 AND
    CHARINDEX(';', YOUR_FIELD) > 0; 
```

这确保了分隔符存在，并解决了当前接受的答案的问题，即最后执行 LEFT 是使用原始字符串中最后一个分隔符的位置，而不是修改后的子字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-06T04:18:39.060

select substring(your_field, CHARINDEX(';',your_field)+1 ,CHARINDEX('[',your_field)-CHARINDEX(';',your_field)-1) from your_table

不能让其他人工作。我相信你只想要';'之间的东西 和 '[' 在所有情况下，无论中间的字符串有多长。在 substring 函数中指定字段后，第二个参数是您将提取的内容的起始位置。也就是说，';' 是 + 1（第四位 - c），因为您不想包含“;”。下一个参数获取 '[' 的位置（位置 14）并减去 ';' 之后的位置 （第四位 - 这就是我现在在查询中减去 1 的原因）。这基本上是说子字符串（字段，我想要子字符串开始的位置，我想要子字符串多长时间）。我在其他情况下也使用过同样的功能。如果某些字段没有';' 和你' 我想在“where”子句中过滤掉那些，但这与问题有点不同。如果你的 ';' 有人说...';;;'，您将在示例中使用 3 而不是 1。希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T23:16:54.117

如果您需要将某些内容分成 3 部分，例如电子邮件地址并且您不知道中间部分的长度，请试试这个（我只是在 sqlserver 2012 上运行了这个，所以我知道它有效）：

```
SELECT top 2000 
    emailaddr_ as email,
    SUBSTRING(emailaddr_, 1,CHARINDEX('@',emailaddr_) -1) as username,
    SUBSTRING(emailaddr_, CHARINDEX('@',emailaddr_)+1, (LEN(emailaddr_) - charindex('@',emailaddr_) - charindex('.',reverse(emailaddr_)) ))  domain 
FROM 
    emailTable
WHERE 
    charindex('@',emailaddr_)>0 
    AND 
    charindex('.',emailaddr_)>0;
GO 
```

希望这可以帮助。

# c - 有符号和无符号机器字类型

> ID：10265842
> 
> 赞同：2
> 
> 时间：2012-04-22T06:48:53.200
> 
> 标签：c, integer, unsigned, signed

我需要一对标准整数类型，有符号和无符号，它们对应于（合理解释）机器字长，并且保证彼此大小相同。

在具有干净地址模型的平台上，`intptr_t`并且`uintptr_t`符合要求，因此使用这些当然是可能的。

但是，有问题的代码可能需要在各种嵌入式系统上运行。我猜其中一些仍然使用具有 286 样式架构的 CPU，其中最大的有效整数类型小于指针 - 如果不是这样，请纠正我 - 但如果是这样，那么有一个案例要做用于使用较小的整数类型。

那个较小的整数类型可能对应于`size_t`和`ptrdiff_t`- 但这些类型是否保证彼此大小相同？我确实需要能够在有符号和无符号类型之间来回转换而不会丢失。

还有什么我应该考虑的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:02:30.483

你可以使用`size_t`和`ssize_t.`

*更新：*

这当然`typedef`是为了，所以：

```
typedef size_t uword_t;
typedef ssize_t word_t; 
```

如果您遇到过具有 C99`size_t`但没有 Posix的系统，`ssize_t`那么您可以：

1.  有条件`word_t`地为该系统定义一次*- 或 -*
2.  `<unistd.h>`也许为该系统提供您自己的。它可以`ssize_t`在完全了解本地环境的情况下进行定义，还可以清理您遇到的任何其他缺失的 Posixness。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:56:37.477

为什么不只使用`int`and `unsigned int`？

C99 6.2.5/6 型

> 对于每个有符号整数类型，都有一个对应的（但不同的）无符号整数类型（用关键字 unsigned 指定），它**使用相同的存储量**（包括符号信息）并具有相同的对齐要求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:01:43.233

我已经确定 zmccord 是正确的，`intptr_t`并且`uintptr_t`是既保证可用又清晰明确的类型。如果特定变量需要小于特定平台的变量，则可以使用所需的特定大小声明它。

# ajax - 如何通过 AJAX 加载 JSF 2.0 复合组件

> ID：10265843
> 
> 赞同：0
> 
> 时间：2012-04-22T06:49:16.990
> 
> 标签：ajax, jsf, jsf-2

我设计了一个看起来像这样的复合组件：

```
 <cc:interface>
    <cc:attribute name="value" required="true" />
    <cc:attribute name="title" required="true" />
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>
    <div class="inputTile">
        <div class="inputTitle">
            <span>#{cc.attrs.title}</span>
        </div>
        <div class="inputTileContent">
            <input type="text" value="#{cc.attrs.value}" />
        </div>

    </div>
</cc:implementation> 
```

我正在尝试通过 AJAX 将其加载到我的网页上的 div 上。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:50:06.870

可能是这样的？

```
<h:panelGroup id="foo" layout="block">
    <your:composite rendered="#{bean.loadCompositeInDiv}" />
</h:panelGroup>

<h:commandButton value="Load composite in div" action="#{bean.setLoadCompositeInDiv(true)}">
    <f:ajax render="foo" />
</h:commandButton> 
```

和

```
@ManagedBean
@ViewScoped 
public class Bean {

    private boolean loadCompositeInDiv;

    // Getter+setter
} 
```

# mysql - MySQL 查询返回重复的结果

> ID：10265844
> 
> 赞同：6
> 
> 时间：2012-04-22T06:49:27.003
> 
> 标签：mysql, database

我是 MySQL 的新手，我正在使用一个有四个主表的数据库系统，如下所述：

[http://www.pastie.org/3832181](http://www.pastie.org/3832181)

此查询主要使用的表在这里：

[http://www.pastie.org/3832184](http://www.pastie.org/3832184)

看起来很简单吧？

我的查询的目的是为显式用户获取所有 BusinessID，其中 OpportunityID 为 NULL，一旦它具有这些 BusinessID，我希望它在 Business 表中找到关联的 BusinessName，并将该 BusinessName 与就业机会中的 BusinessName(Business) 匹配桌子。

这是我执行该操作的查询。

```
SELECT EmploymentOpportunity.OpportunityID, Business, Description 
FROM UserBusinessOpportunity, Business, EmploymentOpportunity
WHERE UserBusinessOpportunity.BusinessID = 
          (SELECT UserBusinessOpportunity.BusinessID 
          FROM UserBusinessOpportunity 
          WHERE UserBusinessOpportunity.UserID=1 AND
                UserBusinessOpportunity.OpportunityID is NULL) 
       AND UserBusinessOpportunity.BusinessID = Business.BusinessID 
       AND Business.BusinessName = EmploymentOpportunity.Business; 
```

子选择语句应该返回 BusinessID 的子集。我确信这是一个非常简单的查询，但它不断给我重复的结果，我知道为什么。结果集应该是 3，但它向我发送了 24 个，或者 8 个重复的这 3 个集。

谢谢，如果你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T06:51:15.663

使用`distinct`关键字删除重复项。

看看[这里](http://www.w3schools.com/sql/sql_distinct.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:00:13.140

当您在 SQL 语句中进行连接时，您可能会在某处遗漏约束。根据我从您的描述中得到的信息，听起来这个查询可能对您有用。

```
SELECT 
    User.UserID,
    Business.BusinessID,
    Business.BusinessName
FROM
    User,
    UserBusinessOpportunity,
    Business
WHERE
    User.UserID = 1 AND
    User.UserID = UserBusinessOpportunity.UserID AND
    UserBusinessOpportunity.OpportunityID IS NULL AND
    UserBusinessOpportunity.BusinessID = Business.BusinessID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T07:10:12.720

我认为您打算进行内部联接，但您的查询是隐式外部联接。

使用空字段连接通常最适合使用左连接。

尝试这个：

```
SELECT EmploymentOpportunity.OpportunityID, Business, Description
FROM EmploymentOpportunity
JOIN Business ON Business.BusinessName = EmploymentOpportunity.Business
LEFT JOIN UserBusinessOpportunity USING(BusinessID) 
WHERE
 UserBusinessOpportunity.UserID=1
AND
 UserBusinessOpportunity.OpportunityID is NULL 
```

朱利安

# ruby-on-rails-3 - 如何在不将信息放入模型的情况下利用用户输入？

> ID：10265853
> 
> 赞同：0
> 
> 时间：2012-04-22T06:51:25.613
> 
> 标签：ruby-on-rails-3, twitter

这是一个令人难以置信的新问题，但我似乎找不到答案。

我正在构建一个大量使用外部 API 的应用程序，而且我对 Rails 还很陌生，所以要绕过它仍然有点困难。在我的一生中，我无法弄清楚如何在不写入模型的情况下接受用户输入并在我的应用程序中执行功能。

例如，我只想让用户输入 Twitter 用户名并将其显示在页面上。我知道如何制作一个表格来缓存模型中的搜索，但我不知道如何……让一个功能发生在页面上。我已经为此绞尽脑汁好几天了。

请帮忙？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:51:41.577

您*不需要*模型即可使用 Rails，但如果您根本不需要 ActiveRecord，您可能会受益于[Sinatra](http://www.sinatrarb.com/)等更轻量级的框架。这并不能回答您的问题，但是如果您的应用程序真的没有数据库要求，那么值得考虑一下。

听起来您只是在尝试访问非资源丰富的用户输入，这可以通过 params 哈希在控制器中访问。因此，假设您为表单操作设置了[有效路由，您可以使用](http://guides.rubyonrails.org/routing.html)[控制器](http://guides.rubyonrails.org/action_controller_overview.html)来提取 GET 或 POST 参数。

例如：

```
# You define a non-resourceful route in routes.rb for your form action.
get 'twitternames/show'

# Form action directs user to GET the following route after filling in the form.
http://example.com/twitternames/show?user=foo

# The controller action extracts the data.
def show
  @user = params[:user]
  # render the view unless you tell rails to do something else
end

# show.html.erb
<%= @user %> 
```

创建正确的路线是关键。一旦您定义了一个可以将 URL 分成适当段的路由，其余的就会到位。

# meteor - Meteor 和 Apache Wave

> ID：10265859
> 
> 赞同：1
> 
> 时间：2012-04-22T06:52:54.243
> 
> 标签：meteor, google-wave

我一直在研究 Meteor，到目前为止我印象非常深刻。我认为 Google（现为 Apache）Wave 的差异/协作功能将与 Meteor 很好地吻合，并且已经看到/玩过 Wave 的节点实现。

我想知道是否有人研究过将 Wave 的节点实现移植到 Meteor 中。具体来说，您需要使用 Redis，或者在使用 Mongo 的 node-wave 实现中更改 Redis，我正在质疑最好的方法......

想知道你认为最好的方法是什么，如果你要这样做，你会从哪里开始（调整现有的包，从头开始构建一个新的包，等等）

谢谢，如果这过于模糊，我们深表歉意。

# c++ - 错误：带有模板的“{”标记之前的预期类名

> ID：10265861
> 
> 赞同：2
> 
> 时间：2012-04-22T06:53:41.713
> 
> 标签：c++, templates, inheritance

我正在尝试创建一个简单的基类和另一个继承自它的类。我收到以下错误。

`guard_room.h:17:1: error: expected class-name before ‘{’ token`

我查看了其他帖子，似乎我在某个地方有循环依赖，但我已经做了我读过的所有事情来解决它。这是我的课

**基类 room.h：**

```
#ifndef _room
#define _room

template <typename U, typename T>
class room
{
    public:

        //default constructor
        room();

        //overloaded constructor
        room(U, T);

        //getters/setters
        void set_treasure(T);
        void set_name(U);
        T get_treasure() const;
        U get_name() const;

    private:

        U name;

        //room monster
        //monster room_monster

        T treasure;

};

#include "room.tem"

#endif 
```

**继承类guard_room.h：**

```
#ifndef _guard_room
#define _guard_room

template <typename U, typename T> class room;

template <typename U, typename T>
class guard_room : public room
{
    public:

        //default constructor
        guard_room();

        //overloaded constructor
        guard_room(U, T, T) : room(U, T);

        //battle function?
        void battle();

    private:
        T dummy;

};

#include "guard_room.tem"
#endif 
```

我也非常困惑，我需要将基本房间类的包含放在我的继承类中。感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T07:07:49.643

首先，您的派生类需要能够看到您的基类的完整定义——您需要在派生类文件的顶部包含标题。（基类*扩展*了派生类，因此基类在很大程度上是派生类的一部分）

另外，*房间*是一个模板而不是一个类——你只能从一个具体的类继承，所以你需要指定模板参数。IE

```
#include "room.h"

template <typename U, typename T>
class guard_room : public room<U, T> 
```

最后 - 您的`.tem`文件是否还包含标题保护？（如果没有，您也需要其中的那些以避免其他编译器错误）

* * *

另外，请注意初始化列表是构造函数定义的一部分，因此以下内容无效

```
 guard_room(U, T, T) : room(U, T); 
```

如果您的构造函数定义在其他地方，那么您想要的只是

```
 guard_room(U, T, T); 
```

否则，这可能就足够了

```
 guard_room(U u, T t1, T t2) : room(u, t1) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T07:06:58.920

您在这里提供了构造函数的一半实现

```
//overloaded constructor
guard_room(U, T, T) : room(U, T); 
```

*如果*您希望实现是内联的，则还必须添加构造函数主体。

```
//overloaded constructor
guard_room(U, T, T) : room<U, T>()
{ } 
```

* * *

当构造函数的实现也包含在`.tem`文件头末尾的文件中时（如注释中所示），真正的解决方案是从构造函数声明中删除对基类的引用并将其留给单独的定义.

```
//overloaded constructor
guard_room(U, T, T); 
```

# multithreading - 有没有办法使用cherrypy的监视器来执行单个任务然后停止？

> ID：10265867
> 
> 赞同：4
> 
> 时间：2012-04-22T06:54:40.110
> 
> 标签：multithreading, monitor, cherrypy

我有一个 Web 应用程序请求运行超过 10 分钟的报告。除了提高性能之外，我现在更喜欢设置一个线程来运行报告并将其邮寄给用户，立即将该决策消息返回给用户。

我一直在看cherrypy.process.plugins.Monitor，但我不清楚它是否是正确的选择（如何处理频率参数？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:09:22.973

监视器不是正确的选择；它用于按计划重复运行相同的任务。打电话给你可能会更好`threading.Thread(target=run_report).start()`。`202 Accepted`然后，您可以连同一个 URL 一起返回给用户，供客户端查看状态和/或在新创建的报告资源准备好时检索它。

需要注意的是，当cherrypy.engine 停止时，您可能希望新线程正常关闭。查看各种插件，了解如何连接到总线上的“停止”通道的示例。如果您不在乎它是否异常终止，另一种选择是使您的线程成为守护进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T10:50:40.610

除了同意fumanchu的回答外，我想补充一点，**频率**参数实际上是以秒表示的**周期。**`cherrypy.process.plugins.Monitor`（名称具有误导性）。

另一种可能的解决方案是定期执行一个监视器，以及一组可以定期检查是否完成的工作计算。代码将类似于

```
class Scheduler:

    def __init__ (self):
        self.lock = threading.Lock()
        self.mon = Monitor(cherrypy.engine, check_computations, frequency=whatever)
        self.mon.start()
        self.computations = list() # on which we append stuff

    def check_computations (self):
        with self.lock:
            for i in self.computations:
                check(i) # Single check function 
```

注意事项：

*   `check`事务的计算时间。你不想在这个 perioic 例程上增加工作量
*   请注意如何使用锁：
    *   它正在保护`computations`列表；
    *   如果你从`check`你的程序中访问它（甚至是间接的），就会陷入死锁。如果您想从`computations`列表中取消订阅某些内容，可能就是这种情况。

# javascript - 在 Javascript 中的 RegEx 上运行 RegEx 替换

> ID：10265868
> 
> 赞同：1
> 
> 时间：2012-04-22T06:54:53.337
> 
> 标签：javascript, regex, dynamic

**我有正则表达式：**

```
var reValid = /^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|[^,'\s\\]*(?:\s+[^,'\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|[^,'\s\\]*(?:\s+[^,'\s\\]+)*)\s*)*$/; 
```

它验证了一个 CSV 文件，但我希望能够使用任何分隔符修改分隔符 (')。

是否可以在正则表达式上运行正则表达式替换？

**示例 - 使用反引号 (`) 作为分隔符：**

```
var reValid = /^\s*(?:`[^`\\]*(?:\\[\S\s][^`\\]*)*`|[^,`\s\\]*(?:\s+[^,`\s\\]+)*)\s*(?:,\s*(?:`[^`\\]*(?:\\[\S\s][^`\\]*)*`|[^,`\s\\]*(?:\s+[^,`\s\\]+)*)\s*)*$/; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T07:02:51.613

当然，只需使用 source 属性将表达式作为字符串获取，进行替换，然后使用新表达式创建一个新的 RegExp 对象：

```
var reValid = /^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|[^,'\s\\]*(?:\s+[^,'\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|[^,'\s\\]*(?:\s+[^,'\s\\]+)*)\s*)*$/;
reValid = RegExp(reValid.source.replace(/'/g, '`')); 
```

# powershell - 按文件名杀死进程

> ID：10265869
> 
> 赞同：28
> 
> 时间：2012-04-22T06:55:00.790
> 
> 标签：powershell

我有 3 个从不同地方运行的应用程序实例。所有进程都有相似的名称。

如何杀死从特定位置启动的进程？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-22T07:25:56.690

可以获取应用路径：

```
Get-Process | Where-Object {$_.Path -like "*something*"} | Stop-Process -WhatIf 
```

这仅适用于本地机器。要终止远程进程：

```
Get-WmiObject Win32_Process -Filter "ExecutablePath LIKE '%something%'" -ComputerName server1 | Invoke-WmiMethod -Name Terminate 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-01T16:46:34.593

我想稍微改进一下 Shay Levy 的答案，因为它在我的设置中效果不佳（powershell 版本 4）

```
Get-Process | Where-Object {$_.Path -like "*something*"} | Stop-Process -Force -processname {$_.ProcessName} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:19:18.537

您可以查看类`MainModule`内部的属性[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)（可以通过 powershell 调用）。

```
foreach (Process process in Process.GetProcesses())
{
   if (process.MainModule.FileName == location)
   {
       process.Kill();
   }
} 
```

我还会考虑调用此代码时可能发生的异常。如果您尝试访问不再存在的进程（自上次调用 GetProcess 以来已被终止）或您没有权限的进程，则可能会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T20:41:47.217

试试这个： [http ://technet.microsoft.com/en-us/library/ee177004.aspx](http://technet.microsoft.com/en-us/library/ee177004.aspx)

```
Stop-Process -processname notepad 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-28T17:30:13.017

下面的命令会杀死其中“某物”是路径的一部分或者是命令行参数的进程。它还被证明对于终止 powershell 脚本很有用，例如从地方
`powershell -command c:\my-place\something.ps1`运行：`something.ps1``c:\my-place`

```
gwmi win32_process | Where-Object {$_.CommandLine -like "*something*"}  | % { "$(Stop-Process $_.ProcessID)" } 
```

该解决方案在我的 64 位 Windows 10 机器上本地运行。

# django - 在萤火虫中反复出现未捕获的异常

> ID：10265870
> 
> 赞同：0
> 
> 时间：2012-04-22T06:55:12.540
> 
> 标签：django, firebug

我的项目突然开始在firebug中抛出异常，我没有添加任何新东西，我很困惑，错误：

> 未捕获的异常：[异常...“组件返回失败代码：0x80004005 (NS_ERROR_FAILURE) [nsIDOMNSHTMLTextAreaElement.selectionStart]”nsresult:“0x80004005 (NS_ERROR_FAILURE)”位置：“JS 框架 :: [http://codeblogging.net/static/js /plugins.js](http://codeblogging.net/static/js/plugins.js) :: :: 第 99 行“数据：无] 第 0 行

我刚刚`django-tinymce`在我的项目中使用过，但是直到现在都没有问题，我删除了对`tinymce.js`和的引用`tinymce-setup.js`，但没有区别！我真的不知道发生了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:58:56.140

我终于将 firefox 更新为 12 版本，并将 firebug 更新为兼容版本。

# asp.net - asp.net 中配置文件的存储位置

> ID：10265874
> 
> 赞同：0
> 
> 时间：2012-04-22T06:56:00.860
> 
> 标签：asp.net, asp.net-profiles

我是 asp.net 的新手，我不确定配置文件是存储在客户端计算机上还是在服务器端有空间？

任何人都可以帮助我？？

像下面的代码，它存储在哪里。

```
 <profiles>
 <properties>
  <add name="masterpage"/>
 </properties>
</profiles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:01:11.593

您要放置在用户配置文件中的所有项目**都存储在服务器上**。

当用户登录时，您可以为用户检索此值，并从您的服务器和本地数据库中获取该数据。

如果您为用户使用数据库，则有一个包含所有用户配置文件属性的表。

[http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

ps 您可以在用户浏览器上保存的唯一数据是 cookie - 这是有限的。

# java - 在谷歌应用引擎中从 WAR 外部存储和检索文件？

> ID：10265876
> 
> 赞同：0
> 
> 时间：2012-04-22T06:57:10.223
> 
> 标签：java, google-app-engine, web-applications, file-upload, blobstore

好吧，我很高兴在家中使用本地 Apache Tomcat 工作并在[FileServlet](http://balusc.blogspot.in/2009/02/fileservlet-supporting-resume-and.html)的帮助下提供静态文件，而且我正在遵循[此答案](https://stackoverflow.com/a/6059594/803285)中所述的说明：

> 您不应将文件存储在网络内容中。当 WAR 未展开时，这将失败，即使在展开 WAR 时，所有文件都会在您重新部署 WAR 时丢失。

但是现在我正在使用`Google App Engine`我的应用程序，我无法配置服务器，它也使用`jetty`这对我来说是新的。我的 Web 应用程序中的所有内容都通过 Eclipse 上传到服务器，但我无法将文件夹上传到 WAR 之外。现在我如何应用这种静态文件服务在这里使用`Servlet`，我应该使用[Google Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview)吗？，或者只是一个可以是[Google Cloud SQL](https://developers.google.com/cloud-sql/docs/developers_guide_java)的数据库，或者还有其他出路吗？

谢谢，
阿西夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:33:43.880

链接中的答案不适用于您：它表示不应将文件*上传*（即以编程方式创建）到 webcontent 文件夹。

只需将您想要提供的静态文件放在应用程序文件夹中即可。请参阅有关[使用静态文件](https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:32:29.510

您不需要 FileServlet 来提供静态内容。相反，声明打算为静态的文件，App Engine 将管理为它们提供服务。如果由于某种原因您需要以编程方式读取文件，则将其声明为资源。

请参阅[https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files](https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files)

# jakarta-ee - j_security_check 身份验证后可以跟另一个 Web 身份验证机制吗？

> ID：10265878
> 
> 赞同：0
> 
> 时间：2012-04-22T06:58:24.730
> 
> 标签：jakarta-ee, jaas, j-security-check

在我的网络应用程序中，我使用基于表单的登录。我有一个场景，除了 login-config.xml 中设置的表的数据之外，我还必须验证存在于不同数据库中的用户。

所以，我在想这个流程：

用户尝试访问安全资源 -> 如果没有活动会话，将被重定向到登录表单 -> 用户输入他的凭据 -> j_security_check 根据 login-config.xml 进行身份验证 -> 如果身份验证成功，很好，否则重定向到一个jsp错误页面，**我在其中检查用户是否存在于另一个数据库中（具体的活动目录。我已经有验证凭据的代码）并在成功时创建一个会话**->否则重定向到错误页面

上面以粗体突出显示的部分是否可能？

我在一些文章中读到，一旦对 j_security_check 进行了身份验证，就无法超越它。是真的吗？？？

这个问题还有其他可能的解决方案吗（除了将其他数据库中的用户添加到login-config.xml中指定的表或修改login-config.xml）？

（我正在使用 Jboss）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:53:36.150

创建 Servlet 过滤器，该过滤器将捕获在 j_security_check 之后将用户重定向到的 URL。在此过滤器中检查其他数据库中的用户凭据。

如果检查成功，则添加反映该事实的会话布尔值。如果检查失败，则删除会话（HttpSession.invalidate() 方法）并将用户重定向到错误页面。

过滤器可能会捕获所有需要授权的 URL。在您过滤器中检查是否有布尔标志，因此您不会一次又一次地进行数据库检查。

# java - getValueAt() 方法返回 null

> ID：10265880
> 
> 赞同：2
> 
> 时间：2012-04-22T06:58:43.333
> 
> 标签：java, sql, swing, jtable, defaulttablemodel

我正在尝试将 defaulttablemodel 的所有值保存到我的 sql 数据库中，但是每当我尝试通过 table.valueAt() 在最后插入的行上打印值时，它都会返回 null。

```
try{
    System.out.print(table.getValueAt(5,0)); //<- this returns null even if the table.getRowCount() is 6

    for(int i=0; i<table.getRowCount();i++){
        if((Boolean)table.getValueAt(i,1)) val=1;
        else val=0; 
        //System.out.print(table.getValueAt(i, 0) +","+ val);
        String sql1 = "INSERT INTO HREmpListofCard (EmpID, CardNbr, Status, Remarks) VALUES ("
            +"'"+empID
            +"','"+table.getValueAt(i, 0).toString() 
            +"','"+val
            +"','"+table.getValueAt(i,2).toString()+"')";

        try {
            DBConnect.getConnection().createStatement().executeUpdate(sql1);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(ListOfCardID.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(ListOfCardID.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}catch(Exception e){
    System.out.print("\nerror!");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:31:35.053

至于你的第二个问题。您可以在将变量放入查询之前检查表中的变量。例如，您可以这样做：

```
 String item1;

 if(table.getValueAt(i, 0) != null)
     item1 = table.getValueAt(i, 0);
 else
     item1 = null; 
```

将 item1 替换为“table.getValueAt(i, 0)”并为“table.getValueAt(i,2)”创建 item2

```
String sql1 = "INSERT INTO HREmpListofCard (EmpID, CardNbr, Status, Remarks) VALUES ("             
        +"'"+empID             
        +"','"+ITEM1
        +"','"+val             
        +"','"+ITEM2+"')"; 
```

我还没有测试过这个，所以我不确定它是否会工作:)

祝你好运！

# android - Android中找不到文件错误

> ID：10265881
> 
> 赞同：1
> 
> 时间：2012-04-22T06:59:04.477
> 
> 标签：android

我的资产文件夹中有两个文件夹，其中包含 3 个 html 文件。我在 webview 中加载这个 HTML 文件之一，在这个文件中我使用 href 引用其他两个文件。当我运行此代码并单击 webview 中的此链接时，我在 webview 中收到一个错误，即它找不到文件。我应该如何给出文件的路径。我只是给出文件名只是因为它与引用的 HTML 文件位于同一路径中。我究竟做错了什么？

这是在我的 html 文件中。

> ```
> Functions <a href="android.resource://com.com.com/assets/begin.html">begin()</a> 
> ```

```
<a href="android.resource://com.mypack.test/assets/begin.html">begin()</a>

<a href="file:///android_asset/begin.html">begin()</a> 
```

我试过两个都没用

我正在尝试获取 begin.html 文件。

这是我的java代码

```
 WebView web = (WebView)findViewById(R.id.webview);
        String str = readFile(parent_folder +"/"+ folder_name);
        web.loadData(str, "text/html", null); 
```

readFile() 读取 HTML 文件并返回内容。

在这个 webview 中，我链接到 assets 文件夹中的另一个 html 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:04:13.987

```
android.resource://com.com.com/assets/file 
```

如果资产文件夹中没有文件夹，请使用上述文件路径作为 uri 加载文件。如果您将文件保存在原始文件夹中并将其用作

```
android.resource://com.com.com/raw/filename 
```

**注意：：** com.com.com 是你的包名

请参阅此[链接](http://android-pro.blogspot.in/2010/01/understanding-assets.html)以使用资产文件夹中的文件

更新：：

```
 WebView web = (WebView)findViewById(R.id.webview);
   Uri path = Uri.parse("android.resource://com.com.com/raw/filename");
   web.loadUrl(path);//may need to convert uri to string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:20:08.717

看看这是否有效：

```
<a href="file:///android_asset/begin.html"> 
```

# android - 搜索列表视图

> ID：10265883
> 
> 赞同：0
> 
> 时间：2012-04-22T06:59:18.150
> 
> 标签：android, sqlite, listview, cursor, simplecursoradapter

这是我的自定义适配器：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View row = super.getView(position, convertView, parent);

    Cursor cursbbn  = getCursor();

    if (row == null)

    {

        LayoutInflater inflater = (LayoutInflater) localContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.listtype, null);
    }

    String Title = cursbbn.getString(2);
    String Readyin = cursbbn.getString(4);
    String Faovoites=cursbbn.getString(8);

    TextView titler=(TextView)row.findViewById(R.id.listmaintitle);
    TextView readyinr=(TextView)row.findViewById(R.id.listreadyin);

     int colorPos = position % colors.length;
     row.setBackgroundColor(colors[colorPos]);

    titler.setText(Title);
    readyinr.setText(Readyin);

    ImageView picture = (ImageView) row.findViewById(R.id.imageView1);
    Bitmap bitImg = BitmapFactory.decodeResource(localContext.getResources(), R.drawable.seafood);

    if(Title.contentEquals("Fajita Raps"))
        picture.setImageBitmap(getRoundedCornerImage(bitImg));

    if (Faovoites.contentEquals("YES")) {

        ImageView star = (ImageView) row.findViewById(R.id.favoritesicon);
        star.setVisibility(View.VISIBLE);

    }

    return row;
} 
```

这是我的 Search Edittext aftertextchanged 事件

```
public void afterTextChanged(final Editable s) {

            final String[] columns = new String[] {

            "_id", COL_SanID, COL_SanTitle, COL_SanCat, COL_SanReadyin,

            COL_SandServing, COL_SandIngred, COL_SandDirect, COL_SandFavor };

            Bundle extrass = getIntent().getExtras();

            final String Type = extrass.getString("CategoryType");

            mAdapter.setFilterQueryProvider(new FilterQueryProvider() {
                public Cursor runQuery(CharSequence constraint) {

                    String value = "%" + constraint + "%";
                    String Type2 = "%" + Type + "%";

                    curs = mDb.query(TABLE_NAME, columns, COL_SanTitle
                            + " LIKE ? And " + COL_SanCat + " LIKE ?",
                            new String[] { value, Type2 }, null, null,
                            COL_SanTitle + " ASC");

                    return curs;

                }
            }); 
```

最后：Logcat 异常

> 04-26 18:56:50.310: E/AndroidRuntime(878): 致命异常: main 04-26 18:56:50.310: E/AndroidRuntime(878): android.database.CursorIndexOutOfBoundsException: 请求索引-1，大小1 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.database.AbstractCursor.checkPosition(AbstractCursor.java:580) 04-26 18:56:50.310: E/AndroidRuntime(878): 在android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41) 04-26 18: 56:50.310: E/AndroidRuntime(878): 在 master.chef.mediamaster.Interface.onItemClick(Interface.java:781) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.widget.AdapterView .performItemClick(AdapterView.java:284) 04-26 18:56:50.310: E/AndroidRuntime(878):在 android.widget.ListView.performItemClick(ListView.java:3513) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.widget.AbsListView$PerformClick.run(AbsListView.java:1812) 04- 26 18:56:50.310: E/AndroidRuntime(878): 在 android.os.Handler.handleCallback(Handler.java:587) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.os。 Handler.dispatchMessage(Handler.java:92) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.os.Looper.loop(Looper.java:123) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 04-26 18:56:50.310: E/AndroidRuntime(878): 在 java.lang.reflect.Method.invokeNative(Native方法) 04-26 18:56:50.310: E/AndroidRuntime(878): at java.lang.reflect.Method.invoke(Method.java:507) 04-26 18:56:50.310: E/AndroidRuntime(878) : 在 com.android.internal.os。ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 04-26 18:56:50.310: E/AndroidRuntime(878): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 04-26 18：56：50.310：E/AndroidRuntime（878）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:49:54.213

当`getView()`你打电话时，`localCursor.moveToPosition(position);`你会得到`java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery`.

为什么会发生这种情况？因为一旦对列表视图应用了过滤，旧的光标就会关闭，而使用新的光标。`getCursor()`您可以通过调用而不是跟踪初始光标来获取当前的底层光标。摆脱`Cursor localCursor`并使用`getCursor()`。

# php - 编程新手无法弄清楚如何格式化 php 语法

> ID：10265888
> 
> 赞同：-1
> 
> 时间：2012-04-22T06:59:52.110
> 
> 标签：php, syntax

我试图让最终输出成为

```
$<a style='cursor: pointer; class="photogallery-album-thumbs" onclick=fetchalbum(albumid and albumname)> 
```

这是我知道它完全搞砸的代码。

```
$echo '<a style='cursor: pointer; onClick=fetchAlbum(' . $values['aid'] . "\" class='photo-gallery-album-thumbs-title' " . $values['name'] . ")>"; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:31:56.157

最好的办法是获得一个具有语法高亮功能的优秀代码编辑器，它是专为 PHP 编码而构建的。

**但这里有一些基础知识：**

```
<?php 
/*Standard Variable--
Anything placed between quotes is treated as a string. 
A string quote must start and end, you can continue a string but that block
must also have a start and end quote.
*/
$variable_name = "Value";
//or
$variable_name = 'Value';

//If you have a line of html with lots of double quotes, its sometime easyier to use single quotes
$variable_name = '<a style="cursor: pointer; onClick=fetchAlbum("'.$values['aid'].'") class="photo-gallery-album-thumbs-title"'.$values['name'].'")>';
//Or you have to escape the quotes or replace them with single
$variable_name = "<a style=\"cursor: pointer; onClick=fetchAlbum(\"".$values['aid']."\") class=\"photo-gallery-album-thumbs-title\"".$values['name']."\")>";
//You can also use curly brackets on double quotes but you cant use them on single
$variable_name = "<a style=\"cursor: pointer; onClick=fetchAlbum(\"{$values['aid']}\") class=\"photo-gallery-album-thumbs-title\"{$values['name']}\")>";
//Also you cant put carriage returns or tabs ect in single quotes
$variable_name = "\tSome value\r\n";
//tho yo can do
$variable_name = "\t".'Some value'.PHP_EOL;
//Using double quotes for variable assignment or printing is slower then single quotes
//Concatenation
$variable_name = "v"."a"."l"."u"."e";
//variable continuing
$variable_name .= "value";

//simple echoing out
echo 'Some value';
echo "Some value";
echo $variable_name;
print "Some value";
//or you can break out of php and put your html
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:03:37.447

试试这条线：

```
echo '<a style="cursor: pointer;" onClick="fetchAlbum('.$values['aid'].')" class="photo-gallery-album-thumbs-title">'.$values['name'].'</a>'; 
```

具有相同数量的引号很重要。它们像数学中的括号一样工作。

美元符号不是必需的。表示最`$`有可能是一个变量。函数名不能包含圆号。

从[php 文档](http://www.php.net/manual/en/functions.user-defined.php)：

> 函数名称遵循与 PHP 中其他标签相同的规则。有效的函数名称以字母或下划线开头，后跟任意数量的字母、数字或下划线。作为一个正则表达式，它将这样表示：**[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]***。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:06:59.850

我认为最好使用双引号变量插值，但使用大括号 {} 引用变量。所以你的 php 很容易格式化/读取，

IE：

```
echo "<a style='cursor: pointer;' onClick='fetchAlbum({$values['aid']})' class='photo-gallery-album-thumbs-title' {$values['name']}>"; 
```

花括号可以很容易地避免尴尬的连接（对我来说）。

如果美元符号应该在这个锚的前面，你需要像这样逃避它：

`echo "\$ ... ";`

# scala - 你如何让 sbt web 插件与 .scala 配置一起工作

> ID：10265893
> 
> 赞同：0
> 
> 时间：2012-04-22T07:00:17.883
> 
> 标签：scala, jetty, lift, sbt

我目前收到错误

> 文件中的插件定义不存在插件类路径：/C:/project_root/project/

从下面的文件。
有谁知道如何使用 .scala 配置为电梯项目正确配置 Web 插件？

* * *

插件/Build.scala：

```
import com.github.siasia.PluginKeys._
import com.github.siasia.WebPlugin._
import sbt._
import Keys._

object BuildSettings {
  val buildOrganization = "dualitystudios"
  val buildVersion      = "0.1"
  val buildScalaVersion = "2.9.1"

  val buildSettings = Defaults.defaultSettings ++ Seq (
    organization := buildOrganization,
    version      := buildVersion,
    scalaVersion := buildScalaVersion
  )
}

object Dependencies {

    val liftVersion = "2.4"
    val logbackVer = "0.9.26"

    val lift_webkit = "net.liftweb" %% "lift-webkit" % liftVersion % "compile"
    val lift_mapper = "net.liftweb" %% "lift-mapper" % liftVersion % "compile"
    //val jetty = "org.mortbay.jetty" % "jetty" % "6.1.26" % "test"
    val junit = "junit" % "junit" % "4.7" % "test"
    val testing_tools = "org.scala-tools.testing" %% "specs" % "1.6.9" % "test"
    val logbackclassic = "ch.qos.logback" % "logback-classic"  % logbackVer
    val dbConnector = "com.h2database" % "h2" % "1.2.147"
    val selenium = "org.seleniumhq.selenium" % "selenium-java" % "2.21.0"
    val mysql = "mysql" % "mysql-connector-java" % "5.1.19"
    val jetty = "org.mortbay.jetty" % "jetty" % "6.1.22" % "test"

    val liftAuth = RootProject(uri("git://github.com/keynan/LiftAthentication.git"))
}

object Resolvers {
    val scala_testing = "Scala Testing" at "http://mvnrepository.com/artifact"
    def resolve_all = Seq(scala_testing)
}

object LiftProject extends Build {

    import Dependencies._;
    import BuildSettings._;
    import Resolvers._;

    lazy val JavaNet = "Java.net Maven2 Repository" at "http://download.java.net/maven/2/"
    //lazy val sbtWeb = uri("git://github.com/siasia/xsbt-web-plugin")

    lazy val main = Project (
    "xxxxxx",
    file ("."),

    settings = buildSettings ++ Seq (
            resolvers := resolve_all, 
            libraryDependencies ++= Seq(
                lift_webkit,
                lift_mapper,
                jetty,
                junit,
                testing_tools,
                logbackclassic,
                dbConnector,
                selenium,
                mysql
            )
        ) ++ webSettings

  ) dependsOn(liftAuth)
} 
```

项目/项目/Build.scala：

```
import sbt._
import Keys._

object PluginDef extends Build {

        val jetty = "org.mortbay.jetty" % "jetty" % "6.1.22" 

            override lazy val projects = Seq(root)
            lazy val root = Project(
            "plug", 
            file("."), 
            settings = Seq(
                libraryDependencies ++= Seq(jetty))
        ) dependsOn( sbtWeb )

        lazy val sbtWeb = uri("git://github.com/siasia/xsbt-web-plugin")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:43:20.637

将您的替换`./project/project/Build.scala`为`./project/plugins.sbt`包含：

```
 libraryDependencies <+= sbtVersion(v => "com.github.siasia" %% "xsbt-web-plugin" % (v+"-0.2.11")) 
```

# jquery - jQuery动画计时小问题

> ID：10265894
> 
> 赞同：0
> 
> 时间：2012-04-22T07:00:18.730
> 
> 标签：jquery, animation

好的，我几乎完成了这件事！非常感谢所有帮助/向我展示道路的人。我尽可能多地投票给你。现在我只有最后一个问题——

请看这个小提琴并点击“增加”按钮：http: [//jsfiddle.net/2C8fy/6/](http://jsfiddle.net/2C8fy/6/)

当您单击增加按钮时，如何使图像平滑地向左滑动？第一个做到了，但其他人不滑动。我试过在动画功能中使用“left：'-=50px'”，但这似乎弄乱了图像之间的间距（它仍然存在，只是被注释掉了。如果你想看的话，只需去掉注释斜线它能做什么...）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:10:48.453

**Html / CSS 工作：**

使图像容器`#basic_div`绝对。用另一个 div 将容器内的图像包装起来，调用它`.frame`或其他东西。

制作容器`position: relative`，以及容器内的包装 div `position absolute;left:0;top:0;`。

您现在可以为内部 div 而不是图像设置动画。

**JS：**

在减少动画帧“左”属性向左 50 像素。在动画结束时，删除第一张图片，并`left`在第一张图片不再有布局时将 frame 属性重置为 0。这确保不会发生跳跃。

# php - 如何在数据库中存储为散列创建的盐？

> ID：10265897
> 
> 赞同：2
> 
> 时间：2012-04-22T07:00:33.470
> 
> 标签：php, mysql, security, hash

我一直在环顾四周，似乎有很多不同的方法可以安全地存储密码，其中一些方法比其他方法更受欢迎。假设我不使用 crypt() 之类的东西，它在某种意义上为我完成了所有工作，我应该如何存储随机生成的盐以与 sha256 或 sha512 一起使用？我想过如何做到这一点，但我坚持如何有效地工作。将它们全部存储在数据库中并且必须全部使用它们似乎效率低下。我很想知道是否实际上有一种通常使用的方法，或者这是否真的是唯一的方法？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T07:03:32.627

通常，盐与密码哈希一起存储在同一列或相邻列中。这没有什么低效的。为每个密码使用单独的盐是使您的密码系统健壮的原因。

# sqldataadapter - 使用“SQlDataAdapter”时的最佳实践

> ID：10265899
> 
> 赞同：0
> 
> 时间：2012-04-22T07:00:42.110
> 
> 标签：sqldataadapter

我在我的项目中使用了一个通用函数来返回数据集。我在这里使用“SQLDataAdapter”。这适用于其他 3 个项目。但在其中一个项目中，从其中一台客户端计算机运行此函数时会引发错误。（在服务器机器上工作正常）。

错误：- 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

这是函数的源代码：-

```
Public Function Fn_Return_Dataset(ByVal sqlquerys As String) As DataSet
    ' This function is used to return a dataset for given query
    If mydb.State <> ConnectionState.Closed Then
        mydb.Close()
    End If

    Dim dap As New SqlDataAdapter(sqlquerys, mydb)
    mydataset = New DataSet()
    Try
        dap.Fill(mydataset)
    Catch Exdat As Exception
        writelog(Exdat.Message.ToString, "MYDATA", "FN_RETURN_DATASET")
        showmsg("Sorry.....Unable to return dataset")
    Finally
        If mydb.State <> ConnectionState.Open Then
            mydb.Open()
        End If
    End Try
    Return (mydataset)
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:11:00.007

如果您的代码在服务器机器上而不是在客户端机器上运行良好，那么您有通信问题。检查您的 SQL 引擎是否启用了 TCP 以及是否打开了防火墙。您可能有一些与 DNS 相关/名称解析相关的问题 - 检查连接字符串中的服务器名称 - 使用服务器名称执行简单 ping 以检查客户端机器是否可以将服务器名称解析为 IP。

# mysql - xslt-processor 在一个数据集上返回最高结果，而在另一个数据集上没有结果

> ID：10265900
> 
> 赞同：1
> 
> 时间：2012-04-22T07:00:47.587
> 
> 标签：mysql, xml, parsing, xslt

你好，亲爱的 xml 朋友们，美好的一天，

我是 xml 新手，所以不要忍受我的问题......我目前正在使用 xslt 处理器进行一些测试 - 我有一个脚本可以在一个测试数据集上很好地运行 - 并返回良好且有效的结果与这种行为相反，如果我运行相同的脚本，我会得到愚蠢和愚蠢的结果 - 注意：我会得到一个 2 MB 的 csv 格式文件，其中只包含制表位......有趣但真实......

所以这里我的脚本是：

如果我在以下测试数据集上运行此 xslt 代码，我只会得到糟糕的糟糕结果 - 只有制表位......仅此而已......是什么导致了这个错误。注意 - 如果我针对第二个数据集运行代码，我会得到更好的结果。 - 见下文......并在此初始发布结束时查看结果......

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" encoding="utf-8" />

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="osm">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="node[tag[@k='amenity' and @v='restaurant']]">
        <xsl:value-of select="./@id"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./@lat"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./@lon"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'cuisine']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'name']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'wheelchair']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'website']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:country']/@v"/>
        <xsl:text>&#x09;</xsl:text>
    <xsl:value-of select="./tag[@k = 'addr:city']/@v"/>
    <xsl:text>&#x09;</xsl:text>        
        <xsl:value-of select="./tag[@k = 'addr:street']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:housenumber']/@v"/>
        <xsl:text>&#x0A;</xsl:text>
    </xsl:template>
        <!-- all non-restaurant nodes -->
    <xsl:template match="node[tag[@k='amenity' and @v!='restaurant']]" />

</xsl:stylesheet> 
```

如果我对这个测试数据集运行这个 - 那么我只得到一个只有制表位的文件的愚蠢结果。我没有胶水导致错误的原因是什么？

```
<node id="25242198" lat="49.0077605" lon="8.3560676" version="9" changeset="10151199" user="keinname" uid="165061" timestamp="2011-12-18T22:59:43Z">
    <tag k="addr:city" v="Karlsruhe" />
    <tag k="addr:country" v="DE" />
    <tag k="addr:housenumber" v="6" />
    <tag k="addr:postcode" v="76185" />
    <tag k="addr:street" v="Durmersheimer Straße" />
    <tag k="amenity" v="restaurant" />
    <tag k="beer_garden" v="yes" />
    <tag k="cuisine" v="german" />
    <tag k="name" v="Beim Schupi" />
    <tag k="opening_hours" v="Mo-Sa 17:00+; Su 12:00+" />
    <tag k="phone" v="+49 721 551220" />
    <tag k="website" v="http://www.schupi.de" />
</node> 
```

[...]...

注意：我得到了愚蠢和糟糕的结果 - 只有制表位，仅此而已..

但是，如果我在以下 xml 数据集上运行上述 xslt 处理器代码，我会得到很好的结果......见下文 - ！！！

```
<?xml version='1.0' encoding='UTF-8'?>
<osm version="0.6" generator="Osmosis SNAPSHOT-r26564">
  <node id="185612117" version="5" timestamp="2011-01-08T19:23:43Z" uid="290680" user="wheelmap_visitor" changeset="6906586" lat="48.8037523" lon="9.5248779">
    <tag k="addr:postcode" v="73614"/>
    <tag k="wheelchair" v="yes"/>
    <tag k="website" v="http://www.courage-restaurant.de/"/>
    <tag k="addr:country" v="DE"/>
    <tag k="name" v="Courage"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:street" v="Künkelinstraße"/>
    <tag k="addr:city" v="Schorndorf"/>
    <tag k="addr:housenumber" v="33"/>
  </node>
  <node id="252619189" version="5" timestamp="2011-01-08T19:21:43Z" uid="290680" user="wheelmap_visitor" changeset="6906586" lat="48.8067032" lon="9.5314986">
    <tag k="addr:postcode" v="73614"/>
    <tag k="wheelchair" v="yes"/>
    <tag k="website" v="www.kesselhaus-schorndorf.de"/>
    <tag k="addr:country" v="DE"/>
    <tag k="name" v="Kesselhaus"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:street" v="Arnoldstraße"/>
    <tag k="addr:city" v="Schorndorf"/>
    <tag k="addr:housenumber" v="3"/>
  </node>
  <node id="319597380" version="1" timestamp="2008-12-17T21:13:15Z" changeset="444629" lat="48.8277913" lon="9.5477029">
    <tag k="name" v="Gasthaus zur Linde"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="319597382" version="1" timestamp="2008-12-17T21:13:15Z" changeset="444629" lat="48.8282523" lon="9.5503109">
    <tag k="name" v="China-Garden"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="339591124" version="2" timestamp="2011-09-22T17:33:36Z" uid="290680" user="wheelmap_visitor" changeset="9366746" lat="48.7888015" lon="9.5079525">
    <tag k="cuisine" v="italian"/>
    <tag k="wheelchair" v="limited"/>
    <tag k="name" v="Pizzeria da Rocco"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="392682646" version="3" timestamp="2010-05-11T19:00:20Z" uid="12973" user="MattGPS" changeset="4671372" lat="48.8315734" lon="9.5468864">
    <tag k="name" v="Gasthaus an der Wieslauf"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="454516720" version="4" timestamp="2010-12-11T15:30:21Z" uid="12982" user="Michael Schulze" changeset="6625571" lat="48.8031264" lon="9.5344371">
    <tag k="addr:postcode" v="73614"/>
    <tag k="cuisine" v="regional"/>
    <tag k="website" v="http://www.deutscheshaus-schorndorf.de/"/>
    <tag k="addr:country" v="DE"/>
    <tag k="name" v="Deutsches Haus"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:street" v="Sonnenscheinstraße"/>
    <tag k="addr:city" v="Schorndorf"/>
    <tag k="addr:housenumber" v="13"/>
  </node>
  <node id="572362430" version="3" timestamp="2010-07-04T06:59:50Z" uid="106522" user="neuntoeter" changeset="5130101" lat="48.807953" lon="9.5379673">
    <tag k="smoking" v="no"/>
    <tag k="name" v="Club Kneipe"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="613988559" version="1" timestamp="2010-01-15T01:20:03Z" uid="24748" user="mabapla" changeset="3621550" lat="48.7991827" lon="9.551828">
    <tag k="name" v="Gaststätte Schützenhaus"/>
    <tag k="amenity" v="restaurant"/>
  </node>
  <node id="859532091" version="1" timestamp="2010-08-13T23:05:14Z" uid="130472" user="fx99" changeset="5486736" lat="48.8062337" lon="9.5278548">
    <tag k="website" v="http://www.weinstube-buechsenmacher.de/"/>
    <tag k="name" v="Weinstube zum Büchsenmacher"/>
    <tag k="amenity" v="restaurant"/>
    <tag k="addr:housename" v="5"/>
    <tag k="addr:street" v="Höllgasse"/>
  </node>
  <node id="1625565012" version="1" timestamp="2012-02-09T18:00:04Z" uid="131968" user="changchun_1" changeset="10636279" lat="48.8151893" lon="9.5310692">
    <tag k="name" v="Gasthaus Sonne"/>
    <tag k="amenity" v="restaurant"/>
  </node>
</osm> 
```

看到了-相当不错！！- 我在第二个数据集上运行 xslt 处理器时得到的结果：我没有胶水为什么会得到如此讨厌的结果 - 当我在第一个数据集上应用 xslt 处理器时......！？

```
185612117   48.8037523  9.5248779       Courage yes http://www.courage-restaurant.de/   DE  Schorndorf  Künkelinstraße  33

252619189   48.8067032  9.5314986       Kesselhaus  yes www.kesselhaus-schorndorf.de    DE  Schorndorf  Arnoldstraße    3

319597380   48.8277913  9.5477029       Gasthaus zur Linde                      

319597382   48.8282523  9.5503109       China-Garden                        

339591124   48.7888015  9.5079525   italian Pizzeria da Rocco   limited                 

392682646   48.8315734  9.5468864       Gasthaus an der Wieslauf                        

454516720   48.8031264  9.5344371   regional    Deutsches Haus      http://www.deutscheshaus-schorndorf.de/ DE  Schorndorf  Sonnenscheinstraße  13 
```

任何想法和指向解决方案的指针都非常受欢迎......提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:19:02.257

我得到了很好的结果：案例 2 为 11 行，案例 1 为 1 行：

```
25242198    49.0077605  8.3560676   german  Beim Schupi     http://www.schupi.de    DE  Karlsruhe   Durmersheimer StraÃŸe   6 
```

这正是我期望得到的。
任何 xslt 处理器在只存在一条记录而对多条记录工作正常时使模板化 xslt 工作表失败是很奇怪的。

我建议您再看看，如果仍然失败，请告诉我们您使用的是哪个 xslt 处理器。

# xcode - 滑动删除时如何在单元格上隐藏 UIImageView

> ID：10265904
> 
> 赞同：0
> 
> 时间：2012-04-22T07:01:46.313
> 
> 标签：xcode, uitableview, hidden

我正在实施这一点。但图像并没有隐藏。什么是正确的方法？

```
- (void)tableView:(UITableView*)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath;
{
PlayerCell *cell = [tableView dequeueReusableCellWithIdentifier:@"PlayerCell"];
cell.ratingImageView.hidden= YES;
return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:05:00.457

您必须获取使用该 IndexPath 选择的单元格，然后从该单元格中隐藏图像视图。我很确定苹果教程有一个获取所选单元格的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:07:01.660

您需要在索引路径中获取实际单元格，看看以下替换是否可以解决问题：

```
PlayerCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
```

干杯

# ruby-on-rails-3 - 乘客在哪里寻找宝石

> ID：10265913
> 
> 赞同：1
> 
> 时间：2012-04-22T07:03:20.973
> 
> 标签：ruby-on-rails-3, rubygems, coffeescript, passenger

我正在关注 Rails 网站上的 Rails3 教程第 2 版。但是，我不想使用 rails 服务器，而是想在 OS X Lion 上使用我的 apache 设置。因此，我安装了Passenger 和Passenger Preference Pane。我可以毫无问题地进入欢迎页面，但是如果我单击链接查看我的应用程序环境，我会收到以下错误消息：

```
 Ruby (Rack) application could not be started
These are the possible causes:
There may be a syntax error in the application's code. Please check for such errors and fix them.
A required library may not installed. Please install all libraries that this application requires.
The application may not be properly configured. Please check whether all configuration files are written correctly, fix any incorrect configurations, and restart this application.
A service that the application relies on (such as the database server or the Ferret search engine server) may not have been started. Please start that service.
Further information about the error may have been written to the application's log file. Please check it in order to analyse the problem.
Error message:
Could not find coffee-script-source-1.3.1 in any of the sources (Bundler::GemNotFound)
Exception class:
PhusionPassenger::UnknownError
Application root:
/Users/ash/NetBeansProjects/ruby/first_app
Backtrace:
#   File    Line    Location
0   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/spec_set.rb   90  in `materialize'
1   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/spec_set.rb   83  in `map!'
2   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/spec_set.rb   83  in `materialize'
3   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/definition.rb 127 in `specs'
4   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/definition.rb 172 in `specs_for'
5   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/definition.rb 161 in `requested_specs'
6   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/environment.rb    23  in `requested_specs'
7   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb    11  in `setup'
8   /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler.rb    107 in `setup'
9   /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb 326 in `prepare_app_process'
10  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb  156 in `initialize_server'
11  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb 572 in `report_app_init_status'
12  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb  154 in `initialize_server'
13  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   204 in `start_synchronously'
14  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   180 in `start'
15  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb  129 in `start'
16  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb 253 in `spawn_rack_application'
17  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb    132 in `lookup_or_add'
18  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb 246 in `spawn_rack_application'
19  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb    82  in `synchronize'
20  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb    79  in `synchronize'
21  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb 244 in `spawn_rack_application'
22  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb 137 in `spawn_application'
23  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb 275 in `handle_spawn_application'
24  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   357 in `__send__'
25  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   357 in `server_main_loop'
26  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   206 in `start_synchronously'
27  /Library/Ruby/Gems/1.8/gems/passenger-3.0.12/helper-scripts/passenger-spawn-server  99 
```

如果我查看`/Library/Ruby/Gems/1.8/`任何子目录，我发现没有引用咖啡脚本。但是，快速`ash$ bundle show coffee-script-source`向我展示了 gem 文件位于`/Users/ash/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/coffee-script-source-1.3.1`

（nb如果我使用rails服务器我没有这个问题，但这不是我想要的解决方案）

作为一个 Ruby 新手，我应该如何配置我的乘客设置以找到正确的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:31:41.313

Phusion 可能只知道您的系统 gem 在哪里，而不是您的 rvm gem；您需要设置`GEM_HOME`环境变量以显示它在哪里查看。

如果你使用的是 apache，大概你有一个`.htaccess`文件来启动 Phusion。在那里，在 PassengerEnabled 行之前，添加

```
SetEnv GEM_HOME '/Users/ash/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems' 
```

另一种方法，我认为应该在没有 Apache 的情况下工作，是在应用程序的配置目录中创建一个名为 setup_load_paths.rb 的文件（如果它不存在）并添加以下行：

```
ENV['GEM_HOME']='/Users/ash/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems 
```

# c# - 在c#中查找pdf文件中字符串的页码

> ID：10265917
> 
> 赞同：4
> 
> 时间：2012-04-22T07:04:03.980
> 
> 标签：c#, .net, itextsharp

我正在开发一个pdf阅读器。我想在 pdf 中找到任何字符串并知道相应的页码。我正在使用 iTextSharp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:24:59.460

像这样的东西应该工作：

```
// add any string you want to match on
Regex regex = new Regex("the", 
  RegexOptions.IgnoreCase | RegexOptions.Compiled 
);
PdfReader reader = new PdfReader(pdfPath);
PdfReaderContentParser parser = new PdfReaderContentParser(reader);
for (int i = 1; i <= reader.NumberOfPages; i++) {
  ITextExtractionStrategy strategy = parser.ProcessContent(
    i, new SimpleTextExtractionStrategy()
  );
  if ( regex.IsMatch(strategy.GetResultantText()) ) {
    // do whatever with corresponding page number i...
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:20:20.597

为了使用`Itextsharp`你可以使用`Acrobat.dll`来查找当前页码。首先打开pdf文件并使用L搜索字符串

```
Acroavdoc.open("Filepath","Temperory title") 
```

和

```
Acroavdoc.FindText("String"). 
```

如果在此 pdf 文件中找到字符串，则光标移动到特定页面，搜索到的字符串将突出显示。现在我们`Acroavpageview.GetPageNum()`用来获取当前页码。

```
Dim AcroXAVDoc As CAcroAVDoc
Dim Acroavpage As AcroAVPageView
Dim AcroXApp As CAcroApp

AcroXAVDoc = CType(CreateObject("AcroExch.AVDoc"), Acrobat.CAcroAVDoc)
AcroXApp = CType(CreateObject("AcroExch.App"), Acrobat.CAcroApp)
AcroXAVDoc.Open(TextBox1.Text, "Original document")
AcroXAVDoc.FindText("String is to searched", True, True, False)
Acroavpage = AcroXAVDoc.GetAVPageView()

Dim x As Integer = Acroavpage.GetPageNum
MsgBox("the string found in page number" & x) 
```

# asp.net - 在 ASP.net MVC3 中更改视图与重定向

> ID：10265919
> 
> 赞同：1
> 
> 时间：2012-04-22T07:04:30.690
> 
> 标签：asp.net, asp.net-mvc-3, razor, post-redirect-get

在操作后执行 GET_POST_REDIRECT 有几个优点；然而，在没有进行重定向的情况下，我们返回一个视图，即返回一个不同的视图（在 POST 之后返回一个索引视图）。

就网页和页面而言，当我们从操作方法返回不同的视图（从 POST 返回索引）时，真实情况是什么。我们什么时候可以使用它，什么时候不推荐。URL / URI 会发生什么？

如果在需要多个处理级别的单个大/复杂页面的情况下，我们应该再次重定向到同一页面并出现错误或返回相同的视图并显示错误消息，哪一个会更好或推荐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:27:14.927

您可以从操作返回任何 ActionResult。您可以为具有明确指定名称（与操作名称不同）的视图返回 ViewResult。在这种情况下，页面 URL 不会发生任何事情，只是从服务器返回不同的 HTML 用于不同的视图。

直接使用重定向或返回结果 - 这取决于您的实际案例和网站设计。没有任何具体的答案。

# php - 如何在 PHP 中移动二维数组

> ID：10265926
> 
> 赞同：0
> 
> 时间：2012-04-22T07:05:08.480
> 
> 标签：php, arrays

嗨，这是我的二维数组格式。我想删除第一个内部数组。

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [type] => section-open
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [type] => section-close
                )

        )

) 
```

我想删除所有内部数组并像这样返回它

```
Array
(
    [0] => Array
        (
            [type] => section-open
        )

    [1] => Array
        (
            [type] => section-close
        )

) 
```

我试过`array_shift`功能它​​不起作用...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T07:07:25.203

**更新**：这是基于用户给出的示例，但他希望它适用于具有多个元素的数组。

`array_shift()`删除数组的第一个元素，但这不是您想要的。

你必须自己建造一些东西。

就像是：

```
$result = array();
foreach($my_array as $element)
{
    $result[]=$element[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T08:22:53.707

由于您可能想要一个真正的 2d 移位，我创建了一个函数来执行此操作，删除数组中的第一级，但将所有项目保留在第二级。

这是一个工作示例：

[http://codepad.org/H7iaTI1E](http://codepad.org/H7iaTI1E)

和功能：

```
/**
 * Removes first level in an array, returning the 2nd level elements as an array
 * @param array Array to process
 * @return 2nd level items from the given array
 */
function array2dshift(array $array) {
    $res = array();

    foreach($array as $lvl1) {
        foreach($lvl1 as $item) {
            $res[] = $item;
        }
    }

    return $res;
} 
```

# spring - Spring 配置中的 char[] 到字符串转换

> ID：10265927
> 
> 赞同：0
> 
> 时间：2012-04-22T07:05:55.877
> 
> 标签：spring

我有一个 bean A，它返回一个属性为 char[]，另一个 bean 期望一个属性为 String，我想将属性从 bean A 注入到 bean B。

当我这样做时：

```
 <bean id="B" class="....">
        <property name="password" value="#{A.password}" />
    </bean>

    <bean id="A" class="...">
    </bean> 
```

我得到的错误是：

**无法将类型 [char[]] 的值转换为属性“密码”所需的类型 [java.lang.String]：找不到匹配的编辑器或转换策略**

知道如何解决这个问题吗？

也许通过使用表达式语言语法？

也许通过在注入 char[] 属性之前在配置中注册某种转换器，如 org.springframework.beans.propertyeditors.CharArrayPropertyEditor？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:11:27.553

看起来这会起作用：

```
<property name="password" value="#{new java.lang.String(A.password)}" /> 
```

# android - 在android教程中将数据写入NFC标签

> ID：10265928
> 
> 赞同：7
> 
> 时间：2012-04-22T07:06:31.153
> 
> 标签：android, nfc

我想开发一个基于 android NFC 的应用程序，我想在其中读取数据并将数据写入 NFC 标签。这该怎么做？谁能告诉我教程和android API。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T17:04:46.220

这里有两篇博客文章，其中介绍了代码并提供了支持视频，以帮助开发人员开始在 Android 中读取和编写 NFC 标签。

NFC 研讨会系列：[写入](http://tapintonfc.blogspot.com/2012/07/the-above-footage-from-our-nfc-workshop.html)NFC 标签：

NFC 研讨会系列：[读取](http://tapintonfc.blogspot.com/2012/07/nfc-workshop-series-how-to-read-nfc-tag.html)NFC 标签：

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T07:37:18.837

从文档开始：

[https://developer.android.com/guide/topics/connectivity/nfc/index.html](https://developer.android.com/guide/topics/connectivity/nfc/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T07:09:17.433

这些应该可以帮助您开始查询：

[http://developer.android.com/resources/samples/NFCDemo/index.html](http://developer.android.com/resources/samples/NFCDemo/index.html)

[http://developer.android.com/reference/android/nfc/package-summary.html](http://developer.android.com/reference/android/nfc/package-summary.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T09:13:03.563

你可能会发现这个[插件](http://code.google.com/p/nfc-eclipse-plugin/)（无耻插件）是一个很好的起点，它还带有一个用于读取和写入标签的 Android 项目样板。

# perl - Term::TermKey：如何启用宽鼠标支持？

> ID：10265932
> 
> 赞同：0
> 
> 时间：2012-04-22T07:07:06.887
> 
> 标签：perl, terminal, mouseevent, libtermkey

当我运行这个脚本时，鼠标的位置一直到第 255 列 - 然后计数从 0 开始。这是否意味着我的终端不支持`SGR`/mode 1006？
（编辑由于ak2的回答）

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;
use utf8;
use Term::TermKey qw(FLAG_UTF8 FORMAT_LONGMOD FORMAT_MOUSE_POS);
my $tk = Term::TermKey->new( \*STDIN );
binmode STDOUT, ':encoding(UTF-8)' if $tk->get_flags & FLAG_UTF8;

$|++;
print "\e[?1003h";
print "\e[?1006h";

say "Quit with \"q\"";
while( 1 ) {
    $tk->waitkey( my $key );
    say $tk->format_key( $key, FORMAT_LONGMOD | FORMAT_MOUSE_POS );
    last if $tk->format_key( $key, 0 ) eq 'q';
}

print "\e[?1006l";
print "\e[?1003l"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:14:09.733

不。

这意味着您还没有使用最新的`libtermkey`库，即支持大于第 255 列的位置的库。可能是因为我还没有真正发布它；）

一旦完成，我会通知您，以及对位置报告的额外 CSI 捕获支持等。

另外：如果您有更`libtermkey`具体的问题，您可能想让我更直接地知道。例如，你可以给我发电子邮件，让我知道你已经发布了一个问题；我并不总是养成搜索它们的习惯。:)

* * *

*编辑 2012/04/26*：我现在发布了`libtermkey`0.15 和`Term::TermKey`0.14，它们支持 255 以上的这些列，以及位置报告 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:32:16.347

打开模式 1006 会更改鼠标事件编码，但实际上并没有启用鼠标报告。为此，您需要打开模式 1000（仅单击和释放）、1002（单击、释放和拖动）或 1003（单击、释放和任何鼠标移动）。

# android - 分别设置媒体左/右音量？

> ID：10265933
> 
> 赞同：2
> 
> 时间：2012-04-22T07:07:14.640
> 
> 标签：android, android-audiomanager

我想将媒体左右音量设置作为一个整体单独覆盖。

*似乎无法使用AudioManager.setStreamVolume()*分别设置左右音量。
我注意到虽然可以使用*MediaPlayer.setVolume()*或*SoundPool.play()*进行设置，但我想覆盖整个系统媒体设置，以便在不同的音乐播放器和应用程序之间保持立体声平衡。

我对 Android 不是很熟悉，所以我欢迎所有可以帮助我实现这一目标的建议和技巧。

*ps：我正在使用Android 2.3.4。我不介意这是否需要通过根权限。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T04:40:27.637

系统/用户的左/右音量调节在公共 API 中不可用。它仅适用于应用程序级别，使用您提到的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:10:30.710

您可以使用此第 2 和第 3 参数设置左右音量： [SoundPool，developer.android.com](http://developer.android.com/reference/android/media/SoundPool.html#play%28int,%20float,%20float,%20int,%20int,%20float%29)

# pthreads - 跟随 pthread 程序有什么问题？

> ID：10265935
> 
> 赞同：0
> 
> 时间：2012-04-22T07:07:45.277
> 
> 标签：pthreads

我无法在 c 中执行 pthreads 程序。请告诉我以下程序有什么问题。我既没有收到任何错误，也没有收到预期的输出。

```
void *worker(void * arg)
{
  int i;
  int *id=(int *)arg;
  printf("Thread %d starts\n", *id );
}

void main(int argc, char **argv)
{
  int thrd_no,i,*thrd_id,rank=0;
  void *exit_status;
  pthread_t *threads;

  thrd_no=atoi(argv[1]-1);

  thrd_id= malloc(sizeof(int)*(thrd_no));
  threads=malloc(sizeof(pthread_t)*(thrd_no));

  for(i=0;i<thrd_no;i++)
  {
    rank=i+1;
    thrd_id[i]=pthread_create(&threads[i], NULL, worker, &rank);
  }

  for(i=0;i<thrd_no;i++)
  {
    pthread_join(threads[i], &exit_status);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:14:19.457

`thrd_no = atoi(argv[1] - 1);`可能不符合您的预期；该方式`argv`通常被传递到一个新进程并解析为一个C数组，`argv[1] - 1`可能指向`\0`（具体来说，`\0`在末尾`argv[0]`）。（更一般地说，从字符串的开头向后索引很少是正确的。）结果是`atoi()`返回 0 并且不会创建线程。你实际上打算在那里做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:59:54.680

代码段等级=i+1；thrd_id[i]=pthread_create(&threads[i], NULL, worker, &rank);

会产生竞态条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:17:17.147

您将相同的地址传递`&rank`给每个线程，因此`id`所有`*id`-s 都是相同的`worker`。

您应该更好地在堆上分配您传递给每个工作例程的地址。

您可能还包括`<stdint.h`和使用`intptr_t`，例如

```
 void worker (void* p)
 {
    intptr_t rk = (intptr_t) p;
    /// etc
 } 
```

并打电话

```
intptr_t rank = i + 1;
thrd_id[i]=pthread_create(&threads[i], NULL, worker, (void*)rank); 
```

您应该**学习使用调试器**并**使用所有警告和调试信息进行编译**，即`gcc -Wall -g`（并改进您的代码，直到它没有收到警告，然后使用`gdb`）

# facebook-graph-api - 从考拉返回的哈希对象的奇怪问题

> ID：10265937
> 
> 赞同：0
> 
> 时间：2012-04-22T07:07:56.120
> 
> 标签：facebook-graph-api, hash, sinatra, koala

我正在使用 Koala gem 接收 Facebook 提要的 Hash 对象，但我遇到了问题。

返回的Hash对象如下：

```
{"post_id"=>"19292868552_356643851019175", "message"=>"Tune in tomorrow, January 11 at 12 PM PST / 3 PM EST / 8 PM GMT to join Facebook Live from the Consumer Electronics Show. We will be discussing some of the best social applications and gadgets with people who built them. Watch the video and share your questions on Facebook Live - facebook.com/facebooklive.", "attachment"=>{"media"=>[{"href"=>"http://facebook.com/facebooklive", "alt"=>"", "type"=>"link", "src"=>"http://external.ak.fbcdn.net/safe_image.php?d=AQCkZ2fRUjE2ofi5&w=90&h=90&url=http%3A%2F%2Fprofile.ak.fbcdn.net%2Fhprofile-ak-snc4%2F195784_150984694912422_7311456_n.jpg"}], "name"=>"Facebook Live", "href"=>"http://facebook.com/facebooklive", "caption"=>"www.facebook.com", "description"=>"Facebook Live is Facebook’s official live video streaming channel, provide a deeper look into our...", "properties"=>[], "icon"=>"http://static.ak.fbcdn.net/rsrc.php/v1/yD/r/aS8ecmYRys0.gif", "fb_object_type"=>""}} 
```

现在，当我尝试访问 Hash 对象的链接时，如下所示：

```
<hash-object>["attachment]["media"][0]["href"] 
```

我收到以下错误：

> 未定义的方法`[]' for nil:NilClass`

我尝试通过以下观察来调试错误：

```
<hash-object>["attachment]["media"][0].class # Hash (still it says undefined method[] for NilClass) 
```

此外，当我在命令行中运行它时，它不会引发任何错误。我对这个问题感到困惑，因为它没有任何意义（即在命令行中工作而不是在 Sinatra 中工作）。

我尝试过的事情：

```
JSON.parse(<hash-object>.to_json) # to re-create the Hash Object 
```

而且我能够在以下之前获取对象而不会出现任何错误：

```
post["attachment"]["media"][0] # it returns the output as it should be 
```

提前致谢。

# crystal-reports - Crystal Reports：仅显示每组中的第一条记录

> ID：10265941
> 
> 赞同：1
> 
> 时间：2012-04-22T07:09:09.293
> 
> 标签：crystal-reports, formula

我搜索以获得所需的答案，但没有找到我正在寻找的确切答案 - 请帮助我。

请按照我在水晶报告中所做的步骤操作：

使用水晶报表命令（我创建了一个查询来获取所需的商业号码）-> 获得 5 个商业号码

注意：每个企业都有很多收据编号（第一期收据，第二期收据......就像那样......） - 这些收据详细信息存储在 table_receipts 中。

在 table_business - 我有关于企业编号、客户、产品详细信息的所有详细信息......

请理解链接：

table_business - table_customer - table_product - table_receipts

表之间的关系是：

*   table_business.Bno=table_receipts.Bno
*   table_customer.Cno=table_customer.Cno
*   table_product.Pno=table_product.Pno

创建水晶报表命令后；我只是在水晶报表中拖动所需的表（table_business，table_customer，table_product，table_receipts）

现在我为商业号码“BNo”创建了一个组

我需要使用参数显示有关所选商业号码的所有必需详细信息 - 除了收据之外，它会很好。

我的意思是它显示所有收据（所有分期付款收据）。我只需要显示第一张收据（即：收据编号以字母“F”开头）

希望您理解我的要求 - 请在这方面帮助我。

期待您的宝贵答复。问候，森萨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-07T17:12:47.433

这是我为同一问题尝试过的方法，它奏效了。这是一个两步过程，涉及在 Section Expert 中使用 Running Total Fields 和 Suppressing。

第一步是创建一个运行总计字段（在参数字段下方）右键单击它并单击新建并命名您的字段，即 CountFirstOnly 在左侧，您将看到可以执行功能的字段。

选择收据字段。将其带到现场进行汇总和选择计数。

在评估下选择每条记录

在更改组时重置并选择您的分组，在这种情况下为企业编号，然后单击确定

将该字段拖到您的报告中。

第 2 部分：部门专家

调出有关详细信息的部分专家，然后单击抑制 X-2 按钮

你的公式应该是：CountFirstOnly >1

点击确定

刷新您的报告

希望这可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T14:54:43.637

您应该能够通过创建一个论坛来抑制该字段（table_receipts.Rno）来做到这一点。

右键单击 {table_receipts.Rno} 字段并选择格式字段...通用选项卡...选中“抑制”框，然后单击右侧的 X-2 框。当新窗口出现时粘贴：

不是（{table_receipts.Rno} 以“F”开头）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-12T07:22:47.787

我可能有一个解决方案给你。

1）打开“报告”菜单，然后选择“部分专家”</p>

2）从左侧菜单中选择“详细信息”部分

3）勾选“禁止向下钻取”选项，然后单击其右侧的图标，然后在公式选项中输入

4)记录数 > 1

这应该抑制整个 ROW/Record 而不仅仅是字段。我从这个线程中看到了你的问题，我需要完全相同的解决方案，这很有效。

[仅显示在水晶报表详细信息部分的第一行](https://stackoverflow.com/questions/4093708/show-only-in-the-first-row-in-crystal-reports-details-section)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T09:05:05.463

听起来好像满足此要求的最简单方法是在报告中添加选择条件 - 例如：

```
Left({table_receipts.Rno},1) = "F" 
```

这应确保仅报告每个业务的第一次收据的相关产品和客户。

# jquery - jQuery - 更改的元素不会克隆

> ID：10265943
> 
> 赞同：1
> 
> 时间：2012-04-22T07:09:25.870
> 
> 标签：jquery, clone, quicksand

我已更改元素的 html 文本，在本例中为 #main_cluster_id_reach_12

```
$("#main_cluster_id_reach_12").html( '400' ).effect("highlight", {color: '#2a6500'}, 60000 * 5); 
```

这很好，但是当我尝试克隆保存它的容器时（#applications），它不包含#main_cluster_id_reach_12 的更新html，而是与页面一起加载的原始文本。这是我克隆它的方法：

```
var $applications = $('#applications');
var $data = $applications.clone(); 
```

我究竟做错了什么？

编辑：这是js和html。我正在使用 jquery 1.7.2

我想要做的是通过ajax每隔10秒更新一组集群的范围，然后用流沙按照它们的范围排序。更新没有问题，但流沙克隆了原始列表，而不是更新的列表。今天早上我一直在玩一些日志记录，看来克隆是在 ajax 更新完成之前发生的。

```
// quicksand sorting plugin
(function($) {
  $.fn.sorted = function(customOptions) {
    var options = {
      reversed: true,
      by: function(a) { return a.text(); }
    };
    $.extend(options, customOptions);
    $data = $(this);
    arr = $data.get();
    arr.sort(function(a, b) {
      var valA = options.by($(a));
      var valB = options.by($(b));
      if (options.reversed) {
        return (valA < valB) ? 1 : (valA > valB) ? -1 : 0;              
      } else {      
        return (valA < valB) ? -1 : (valA > valB) ? 1 : 0;  
      }
    });
    return $(arr);
  };
})(jQuery);

$(document).ready(function(){
    //loop through all reaches to update
    setInterval(function() {
        //reach
        $("[id^='main_cluster_id_reach_']").each(function(){

            //Check for reach updates

            //get cluster id first
            var cluster_id = parseInt(this.id.replace("main_cluster_id_reach_", ""));

            //get cluster reach         
            $.post("./lib/ajax/meme_cluster_update.php", { cluster_id: cluster_id }, 
                function(data) {

                //get reach - new
                var new_reach = 0;

                new_reach = parseInt(data.ItemReach, 10);

                //get reach - old
                var reach = $("#main_cluster_id_reach_" + cluster_id).html();

                // Format as American input
                reach = parseInt(reach.replace(/[^\d\.\-\ ]/g, ''));

                //compare new vs old and change cell view
                compareReach(cluster_id, reach, new_reach);

             }, "json");
        });

        // get the first collection
        var $applications = $('#applications');

        // clone applications to get a second collection
        var $data = $applications.clone();

        var $filteredData = $data.find('li[data-type=app]');

        var $sortedData = $filteredData.sorted({
            by: function (v) {
                return parseFloat($(v).find('span[data-type=size]').text());
            }
        });

        // finally, call quicksand
        $applications.quicksand($sortedData, {
            duration: 800,
            easing: 'easeInOutQuad'
        });
    }, 10000);

    //compare the reaches to update accordingly
    function compareReach(cluster_id, reach, new_reach) {
        //determine what color to change cells
        if(new_reach > reach) {
            $(".main_cluster_id_reach_" + cluster_id).html( new_reach ).effect("highlight", {color: '#2a6500'}, 60000 * 5);
        }
        else if(new_reach < reach) {
            $(".main_cluster_id_reach_" + cluster_id).html( new_reach ).effect("highlight", {color: '#990004'}, 60000 * 5);
        }
    } 
```

html

```
 <div class="span-24" id='demo'>
        <ul id="applications" class="image-grid">
            <li data-id="id-210639" data-type="app" class='cluster'>
                <div class='cluster_byline'>@awkwardisco</div>
                <div class="cluster_padding">
                    <span class='cluster_headline'>Avengers on Thursday!!!</span>
                    <br>
                    <div class="cluster_stats">
                        <div class="span-2 reach">
                            <strong>REACH</strong>
                            <p id="main_cluster_id_reach_210639">26777</p>
                            <span class="main_cluster_id_reach_210639" data-type="size">26777</span>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:10:10.990

谢谢各位的帮助。[我在另一个有效的线程](https://stackoverflow.com/a/5157897/551382)上遇到了一个解决方案。从 js 的角度来看，它并不漂亮，甚至可能不理想，但它正在工作。我正在做的是计算通过每个循环的项目数，然后当在 ajax .post 中达到该数字时，即发出最后一个 ajax 调用完成的信号，我运行克隆和流沙操作。

```
setInterval(function() {
        var flag = 0; //to determine when each is complete

        var count = $("[id^='main_cluster_id_reach_']").length;

        //reach
        $("[id^='main_cluster_id_reach_']").each(function(){

            //Check for reach updates

            //get cluster id first
            var cluster_id = parseInt(this.id.replace("main_cluster_id_reach_", ""));

            //get cluster reach
            $.post("./lib/ajax/meme_cluster_update.php", { cluster_id: cluster_id }, 
                function(data) {

                //get reach - new
                var new_reach = 0;

                new_reach = parseInt(data.ItemReach, 10);

                //get reach - old
                var reach = $("#main_cluster_id_reach_" + cluster_id).html();

                // Format as American input
                reach = parseInt(reach.replace(/[^\d\.\-\ ]/g, ''));

                //compare new vs old and change cell view
                compareReach(cluster_id, reach, new_reach);

                flag++;

                //if ajax is done then sort
                if(flag == count) {
                    console.log("Flags Equal, Each Complete, Now Sort");
                    quicksandSort();
                }

             }, "json");            
        }); 
    }, 10000);

    //sort with quicksand
    function quicksandSort() {
        // get the first collection
        var $applications = $('#applications');

        // clone applications to get a second collection
        var $data = $applications.clone(true);

        var $filteredData = $data.find('li[data-type=app]');

        var $sortedData = $filteredData.sorted({
            by: function (v) {
                return parseFloat($(v).find('span[data-type=size]').text());
            }
        });

        // finally, call quicksand
        $applications.quicksand($sortedData, {
            duration: 2000,
            easing: 'easeInOutQuad'
        }); 
    } 
```

# c# - 检查是否在 1“块”半径内相交

> ID：10265953
> 
> 赞同：0
> 
> 时间：2012-04-22T07:11:27.183
> 
> 标签：c#

我在 3D 系统上有两个位置，比如 [15, 32, 42] 和 [16, 32, 42]

有没有一种简单的方法可以检查它们是否在彼此之间 1 个街区的半径范围内？

这就是我所拥有的，但有没有更好的方法：

```
if (pos[0] == pos1[0] / 32 || pos[0] == pos1[0] + 1 || pos[0] == pos1[0] - 1)
{
    if (pos[1] == pos1[1] || pos[1] == pos1[1] - 1 || pos[1] == pos1[1] + 1)
    {
        if (pos[2] == pos1[2] || pos[2] == pos1[2] + 1 || pos[2] == pos1[2] - 1)
        { 
```

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:17:55.493

您可以使用`Math.abs(pos[0]-pos1[0]) <= 1`检查同一平面中的两个坐标是否最多相距 1。

总而言之，您的代码可能如下所示：

```
if( Math.abs(pos[0]-pos1[0]) <= 1 
    && Math.abs(pos[1]-pos1[1]) <= 1 
    && Math.abs(pos[2]-pos1[2]) <= 1 )
{
  Within a 1 block radius
} 
```

请注意，我不明白您为什么将第一个等式除以 32。我没有将其包含在此答案中。

另请注意，此解决方案使事情更具可读性，但您的解决方案也是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:22:26.383

我没有在 c# 中这样做，但在 Java 中我使用 JTS。[http://geoapi.codeplex.com/](http://geoapi.codeplex.com/)似乎在 c# 中提供了相同的功能。然后，您将把您的点表示为 Point 对象，并使用各种有用的地理空间功能。

但是对于这种情况，您是在寻找“如乌鸦飞翔”的距离，即毕达哥拉斯，还是寻找“步行距离”，这将涉及在人行道的有向图中找到最短的有效路线？

朱利安

# javascript - 我们如何找到下载的 jquery 插件试图连接到它的开发者网站？

> ID：10265957
> 
> 赞同：2
> 
> 时间：2012-04-22T07:11:55.393
> 
> 标签：javascript, security, jquery-plugins

我通常会下载几个 jQuery 插件。如何检查脚本是否在窃取任何信息（例如用户 cookie、会话 id..）并发送到其开发人员的服务器？

在 php 中，我们通过查找一些函数（system、passthru、shell_exec 等）来检查后门脚本。JavaScript 中是否有任何此类函数可以连接到其开发人员站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:24:19.560

我认为除了阅读整个代码并检查它是否在窃取任何东西之外，你别无他法。您可以做的另一件事是在代码中搜索诸如“document.cookie”和“navigator”之类的词以及窃取信息所需的其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T20:12:37.570

显然，您的第一步应该是阅读代码。您可以查找许多迹象，包括在代码中查找 URL 以及任何加密代码。

当然，有些代码可能太复杂而无法成为现实的建议，特别是如果它已被缩小和混淆，但应该可以扫描它。如果它正在做这样的事情，它将使用与您自己的站点通信时使用的相同函数（即 jQuery 的 ajax 函数），因此您不会看到引起怀疑的特定函数调用，但会在代码中看到可疑的 URL应该检查出来，你绝对应该避免加密代码（混淆通常是可以的，但不加密）。

其次，在互联网上搜索其他评论该插件的人。如果有什么不愉快的事情发生，很可能其他人会注意到它。避免使用没有足够用户以一种或另一种方式获得任何评论的插件。

最后，使用 Firebug 之类的工具来监视在您使用包含该插件的站点时发生的 HTTP 请求。如果它正在与基地通信，它就无法躲避你；浏览器的调试工具会很高兴地向您展示您需要了解的内容。

希望有帮助。

# iphone - 在 iphone 中选择应用内购买项目的困惑

> ID：10265958
> 
> 赞同：1
> 
> 时间：2012-04-22T07:11:56.347
> 
> 标签：iphone, ios, ipad, in-app-purchase

我必须创建两个应用内购买项目，一个是 3 美元，一个是 5 美元。如果任何用户选择 3 美元，那么他可以从应用程序中购买任意 5 件商品，我还希望允许用户再次购买这件 3 美元的商品以从应用程序购买另外 5 件商品。我的应用程序有数百件商品。我只想要一次购买.所以我必须在应用程序购买项目中使用非消耗品。

但我的问题是用户如何通过 3 美元的商品从我的应用中购买另外 5 件商品。我很困惑管理这种应用内购买。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:38:47.077

你真的应该使用消耗品购买——这会让你的用户想买多少 3 美元的东西就买多少次。

# python - 在 Python 中，我可以将变量绑定到函数/表达式以使其自动更新吗？

> ID：10265959
> 
> 赞同：3
> 
> 时间：2012-04-22T07:12:01.810
> 
> 标签：python

假设我有一个变量 A，它是函数/表达式 F 的结果。F 中又包含许多其他变量，比如说 X、Y 和 Z。

是否可以将 A 绑定到 F 以便每当 X、Y 或 Z 更改时，A 都会自动更新？

我要避免的是每次 X、Y 和 Z 更改时，我必须记住在代码中显式更新 A。我也不想每次使用 A 时都调用该函数。

示例（根据要求）：我有以下功能：

```
def calcHits():
    return sum(hitDiceRolls,level*modList['con']) 
```

在我的程序中（在函数之外），我有一个名为 hitPoints 的变量（是的，它是一个角色扮演游戏程序）。每当函数中使用的变量发生变化时，我希望 hitPoints 也发生变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T07:30:59.593

在 Python 中执行此操作的典型方法是使用`class`：

```
class ExpressionBinder:
    def __init__(self, f):
        self.f = f
        self.x = 0
        self.y = 0
        self.z = 0

    @property
    def result(self):
        return self.f(self.x, self.y, self.z) 
```

你可以像这样使用它：

```
def f(x, y, z):
    return x**3 + y**2 + z

b = ExpressionBinder(f)
b.x = 1
b.y = 2
b.z = 3
print(b.result) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T08:08:18.153

Python 中没有办法在全局或本地范围内自动重新绑定名称以响应其他名称被重新绑定。但是，应该可以创建一个可以跟踪某些值并具有返回您调用的值的成员函数的类`A`。而且，正如@Alok 指出的那样，您可以使用属性描述符来创建隐式调用函数以返回其值的成员名称，因此您可以隐藏函数并将名称视为普通的旧名称。

```
class Trk(object):
    """Track some values and compute a function if any change"""
    def __init__(self, name, fn, **objects_to_track):
        def _trk_fn(self):
            if any(self.__dict__[x] != self.original_objects[x] for x in self.original_objects):
                self.value = self.saved_fn(self.__dict___)
                # now that self.value is updated, also update self.original_objects
                for x in self.original_objects:
                    self.original_objects[x] = self.__dict__[x]
            return self.value

        self.original_objects = objects_to_track  # make reference copy
        self.__dict__.update(objects_to_track)
        self.name = name
        self.saved_fn = fn
        self.fn = self._trk_fn()
        self.value = self.fn() 
```

很抱歉，我现在很累，无法完成这个示例。我也没有测试它。但这显示了一种跟踪值的方法，如果它们不同，则做不同的事情。你像这样使用它：

```
# want to track x, y, z
trk = Trk(x, y, z)
trk.fn() # returns up-to-date value

trk.x = new_value
trk.fn() #detects that trk.x changed and computes new trk.value 
```

如果上述方法有效，您可以使用属性描述符来绑定名称，以便尝试从名称中读取值将调用`self.fn()`

编辑：哦，重要的是什么时候`self.value`更新，`self.original_objects`应该更新。我已经添加了代码来做到这一点。

现在我要睡觉了！

# java - 使用 Google App Engine 和 Jersey 将 URL 映射到 Java 方法

> ID：10265962
> 
> 赞同：0
> 
> 时间：2012-04-22T07:12:30.830
> 
> 标签：java, google-app-engine, jersey, restlet

我正在尝试[为 Jersey 运行 HelloWorld 示例](http://docs.oracle.com/cd/E19776-01/820-4867/ggnxo/index.html)，但失败了。这是我尝试过的。

我已经`appengine-web.xml`像这样设置了

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>server</application>
  <version>1</version>
</appengine-web-app> 
```

我已经这样设置了`web.xml`，

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5">
    <servlet>
        <servlet-name>server</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
            <param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.service</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>server</servlet-name>
        <url-pattern>/helloworld</url-pattern>
    </servlet-mapping>
</web-app> 
```

我有这样的服务设置，

```
package com;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Path("/helloworld")
public class service {
    @GET
    @Produces("text/plain")
    private String getString(){
        return "hello";
    }
} 
```

我正在使用这些库

`asm-3.3.1.jar` `jersey-bundle-1.12.jar` `jersey-core-1.12.jar` `jersey-server-1.12.jar`

这是该问题的视频[http://screencast.com/t/oIYKMQw1x](http://screencast.com/t/oIYKMQw1x)

知道我做错了什么吗？

谢谢！

堆栈跟踪

> 2012 年 4 月 23 日上午 12:19:27 com.sun.jersey.server.impl.application.RootResourceUriRules 严重：ResourceConfig 实例不包含任何根资源类。2012 年 4 月 23 日上午 12:19:27 com.google.appengine.tools.development.ApiProxyLocalImpl 日志严重：javax.servlet.ServletContext 日志：不可用 com.sun.jersey.api.container.ContainerException：ResourceConfig 实例不包含任何根资源类。在 com.sun.jersey.server.impl.application.RootResourceUriRules.(RootResourceUriRules.java:99) 在 com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1308) 在 com.sun。 jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:171) at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:25:30.857

所以我的问题是我正在映射到`com.service`哪个类。我需要映射到包含我的类的包。

# php - 使用PHP 中的标签将一个页面链接到内容的另一页面

> ID：10265963
> 
> 赞同：2
> 
> 时间：2012-04-22T07:12:59.610
> 
> 标签：php, html

> **可能重复：** [通过 PHP 中的用户 <a> 标记将一个页面链接到另一个页面](https://stackoverflow.com/questions/10256109/link-one-page-to-another-by-user-a-tag-in-php)

我正在制作海报，其中包含另一页所有视频的图片，当我单击一个图像时，它将重定向到具有相同图片视频的其他页面。如何完成。

第一页代码：

```
 $rss=new SimpleXMLElement($crxml);
$playlistitem=1;
foreach($rss->channel->item as $post)
{
   if($playlistitem<=18)
{    
    echo'<li>';
    $dc=$post->children('http://search.yahoo.com/mrss/');
    echo '<a href="./video/#tab'.$playlistitem.'">';
    echo '<img src="'.$dc->thumbnail->attributes()->url.'">';
    echo '</a>';
    echo '<span>'.$post->title.'</span>';
    $playlistitem++;
    }
    } 
```

第二页代码：

```
echo '<a name="tab'.$playlistitem.'">';
echo '<li class="xthumb">'.$dc->thumbnail->attributes()->url.'</li>';

echo '<li class="xpreview">'.$dc->thumbnail->attributes()->url.'</li>';
      echo '</a>';
echo '<li class="xsources_mp4">'.$dc->content->attributes()->url.'</li>';

$dc->content->attributes()->url=preg_replace('/.mp4/','.webm',$dc->content->attributes()->url);
 echo '<li class="xsources_webm">'.$dc->content->attributes()->url.'</li>';
 echo '</ul>'; 
```

# xml - 如何在 page/template_links 块中的链接之间删除/添加管道符号（'|'）？（在 XML 中，而不是 links.phtml 中）

> ID：10265965
> 
> 赞同：0
> 
> 时间：2012-04-22T07:13:09.287
> 
> 标签：xml, magento

我正在努力将我的页脚组织成列，当然我只在 local.xml 中工作，正如所有有能力的 Magento 开发人员都渴望做的那样。

在 local.xml 中，我删除了在 page.xml 和 cms.xml 中实例化的原始“ **footer_links** ”和“ **cms_footer_links ”块。**然后我引用“页脚”并实例化两个**page/template_links**块，将它们的模板分配给唯一的自定义 phtml 文件，这些文件只是 /theme/templates/page/template/links.phtml 的副本，但彼此命名不同（这样我就可以为这些块分配单独的 css 类以供以后格式化）。

问题是在左列的 page/template_links 块中的 3 个链接之间，“footer_col_links_left”，有一个管道符号（'|'）。而且，*在*我的 cms_footer_links2 cms/block 块中创建了两个链接之后，有那个管道符号（奇怪的是，即使最后一个项目也有一个尾随管道，而 template_links 块中的第三个/最后一个链接不是这种情况上文提到的）。

这些管道是从哪里来的？任何模板文件都没有明确地回显它们，而且我不相信使用了默认的 afterText，因为对于第一个链接，我继续并为 addLink 操作方法传递了所有可能的参数，但没有任何变化。

这是代码：

```
<default>
    <remove name="footer_links"/>
    <remove name="cms_footer_links"/>

    <reference name="footer">
        <block type="page/template_links" name="footer_col_links_left" as="footer_links_left" template="page/template/column_links_left.phtml" before="-">
            <action method="addLink"><label>About Us</label><url>about-us</url><title>About Us</title><prepare>true</prepare><urlParams helper="core/url/getHomeUrl"/><position>1</position><liParams/><aParams/><beforeText/><afterText/></action>
            <action method="addLink" module="contacts" ifconfig="contacts/contacts/enabled"><label>Contact</label><url>contacts</url><title>Contact Us</title><prepare>true</prepare></action>
            <action method="addLink" translate="label title" module="catalog" ifconfig="catalog/seo/site_map"><label>Site Map</label><url helper="catalog/map/getCategoryUrl" /><title>Site Map</title></action>
        </block>
        <block type="page/template_links" name="footer_col_links_mid" as="footer_links_mid" template="page/template/column_links_mid.phtml">
        </block>
        <block type="cms/block" name="cms_footer_links2">
            <!--
                The content of this block is taken from the database by its block_id.
                You can manage it in admin CMS -> Static Blocks
                Put Privacy Policy + Terms and Conditions here, call it "footer_links" in the backend
            -->
            <action method="setBlockId"><block_id>footer_links</block_id></action>
        </block>
        <block type="cms/block" name="cms_payment_logos">
            <!--
                The content of this block is taken from the database by its block_id.
                You can manage it in admin CMS -> Static Blocks
                Put credit card and Geotrust SSL logos here, call it "payment_logos" in the backend                 
            -->
            <action method="setBlockId"><block_id>payment_logos</block_id></action>
        </block>
    </reference>
</default> 
```

此外，标题 top.links 之间没有管道，我看不出它们在 XML 中有什么不同。好吧，有一点不同，我也不明白它是如何工作的，那就是在 page.xml 中实例化的 page/template_links 块“top.links”如何与模板文件无关（没有 template="/page/block/template/links.php" 就像定义“footer_links”一样）。那是怎么回事？是否有与 page/template_links 块关联的默认模板？如果是这样，那是在哪里*指定*的？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T09:17:36.027

这些管道由 css 设置：在您提供的演示链接中，它是这一行：

```
.footer li { display:inline; background:url(http://demo5.magemojo.com/skin/frontend/default/default/images/bkg_pipe2.gif) 100% 60% no-repeat; padding:0 7px 0 4px; } 
```

# php - 通过我的智能手机连接到 localhost/index.php

> ID：10265967
> 
> 赞同：2
> 
> 时间：2012-04-22T07:13:35.510
> 
> 标签：php, wifi, localhost

我想通过 WiFi 使用我的智能手机连接到我的本地主机。

我通过[www.whatismyip.com](http://www.whatismyip.com)获得了我的 IP ，并让我的智能手机成功连接到我的笔记本电脑。

但是，当我`localhost`在手机浏览器中输入网址时，什么也没有显示。

如何`localhost/index.php`通过智能手机访问页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:22:38.563

使用您的笔记本电脑 wifi 连接 ip 而不是像 192.168.50.2 这样的 localhost。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:34:24.830

1）在您的笔记本电脑上安装代理服务器（例如[FreeProxy](http://www.handcraftedsoftware.org/index.php?page=download&op=getFile&id=2&title=FreeProxy-Internet-Suite)）不要运行它！

2) 通过运行 Start -> cmd -> ipconfig 获取笔记本电脑的本地 ip（网络中使用的，由 wifi 路由器提供）。

寻找这样的一行：`Wireless LAN adapter Wireless Network Connection` 在它下面你需要来自的值`IPv4 Address`。IP 应该类似于：10.xxx 或 192.168.xx 复制此 IP 地址，下一步将需要它。

2) 在您的笔记本电脑上编辑 hosts 文件 (c:\windows\system32\drivers\etc\hosts)，您需要管理员权限才能编辑此文件。在此文件中添加一行，例如：

10.0.0.1 笔记本电脑

现在，应该将 10.0.0.1 替换为笔记本电脑的本地 IP（在步骤 #2 中获得）。保存文件。

3) 运行代理服务器。

4) 配置您的智能手机以使用代理服务器（这是智能手机特有的，您有哪一个？）。

5) 在您的智能手机浏览器中输入地址：[http://laptop/index.php](http://laptop/index.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:29:10.087

你确定你的电脑和手机在同一个局域网？</p>

你的手机可以先访问，因为你使用的是公网ip。我猜你不能使用 localhost ip 访问，因为它们不在同一个局域网中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-14T02:29:58.603

最简单的方法是将您的源上传到可通过互联网访问的服务器并获取主机 IP 地址并尝试将其加载到智能手机上。

如果你想从你的笔记本电脑访问你的应用程序，你需要弄清楚你笔记本电脑上的 ip 是什么，然后访问你的本地主机。

```
 On windows run: ipconfig /all (get ip)

 On linux run: sudo / ip -addr (get ip) 
```

确保您与智能手机上的 wifi 保持连接。

# java - 如何配置 JUnit 规则以应用于特定测试

> ID：10265975
> 
> 赞同：5
> 
> 时间：2012-04-22T07:14:35.443
> 
> 标签：java, junit

是否可以让 Junit 规则仅适用于特定测试？如果是这样，我该怎么做？

下面的代码举例说明了我想要做什么：每次我有@Rule，我希望下面的方法具有已注释的特定规则以使用它运行。我只希望该规则与相应的测试一起运行。我不希望任何其他测试受到规则的影响。

在这种情况下，当我运行这些测试时，我看到其中一个测试 EmptyFileCheck 给出了文件 DNE 不存在，但我为该函数使用了单独的注释，所以我认为它会以不同的方式运行上下文，提供 Empty，但 DNE 直到被使用。

```
import static java.lang.System.in;
import static java.lang.System.setIn;
import static org.junit.Assert.fail;

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PipedInputStream;
import java.io.PipedOutputStream;
import java.io.PrintStream;
import java.nio.channels.Pipe;

import static org.hamcrest.core.AllOf.allOf;

import org.hamcrest.Matcher;
import org.hamcrest.core.AllOf;
import static org.hamcrest.Matchers.*;
import org.hamcrest.text.StringContains;
import org.hamcrest.text.StringEndsWith;
import org.hamcrest.text.StringStartsWith;
import org.jmock.Expectations;
import org.jmock.Mockery;
import org.jmock.lib.legacy.ClassImposteriser;
import org.junit.After;
import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.contrib.java.lang.system.TextFromStandardInputStream;
import org.junit.runner.RunWith;

public class UnitTests {
    private Mockery context = new Mockery() {{
        setImposteriser(ClassImposteriser.INSTANCE);
    }};
    private main mn;
    private InputStream oldIn;
    private PrintStream oldOut;
    private InputStream mockIn;
    private InputStreamReader mockinputStream;
    private PrintStream mockOut;
    private BufferedReader reader;
    private Expectations exp;

    @Before
    public void setMinimalMockingExpectations() throws IOException {
        exp = new Expectations() {{ }};
        mn = context.mock(main.class);
        mockinputStream = context.mock(InputStreamReader.class);
        oldIn = System.in;
        oldOut = System.out;
        mockIn = context.mock(InputStream.class);
        mockOut = context.mock(PrintStream.class);
        System.setOut(mockOut);
    }

    public void configureExpectations(boolean fileOrInput, boolean verbosity) { 
        exp.one(mockOut).println("Do you want to process standard (I)nput, or a (F)ile? I/F");
        if (fileOrInput) { //it's a file
            exp.one(mockOut).println("Enter filename: ");
        } else { //it's not

        }
    }

    @After
    public void reset() {
        System.setOut(oldOut);
    }

    @Rule
    public final TextFromStandardInputStream FileNotFoundException 
        = new TextFromStandardInputStream("F\nDNE\n");
    @Test(expected=FileNotFoundException.class)
    public void EnsureFileCheckExists() throws IOException {
        final String fileName = "DNE";
        configureExpectations(true, false);
        exp.one(mn).checkFile(fileName); 
        context.checking(exp); 
        mn.main(null);
    }

    @Rule
    public final TextFromStandardInputStream FileReadAccessDenied
        = new TextFromStandardInputStream("F\nUnderPriviledged\n");:w

    @Test(expected=FileNotFoundException.class)
    public void FileReadAccessDenied() throws java.io.FileNotFoundException {
        final String fileName = "UnderPriviledged";
        configureExpectations(true, false);
        //exp.oneOf(mn).checkFile(with());  TODO: fix ME!
        context.checking(exp);
        mn.main(null);
    }

    @Rule
    public final TextFromStandardInputStream EmptyFileCheck 
        = new TextFromStandardInputStream("F\nEmpty\n");
    @Test
    public void EmptyFileCheck() throws java.io.FileNotFoundException {
        final String fileName = "Empty";
        configureExpectations(true, false);
        exp.one(mn).checkFile(fileName);
        context.checking(exp);
        mn.main(null);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T09:49:26.363

有什么理由不将代码从 @rule 注释中取出并将其移至测试主体的开头？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T07:33:35.487

你可以在你的规则中有一个 setter，这是在规则中被调用的第一件事。像这样的东西，来自[ExpectedException](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/ExpectedException.html)：

```
// These tests all pass.
public static class HasExpectedException {
     @Rule
     public ExpectedException thrown= ExpectedException.none();

     @Test
     public void throwsNothing() {
         // no exception expected, none thrown: passes.
     }

     @Test
     public void throwsNullPointerException() {
         thrown.expect(NullPointerException.class);
         throw new NullPointerException();
     }

     @Test
     public void throwsNullPointerExceptionWithMessage() {
         thrown.expect(NullPointerException.class);
         thrown.expectMessage("happened?");
         thrown.expectMessage(startsWith("What"));
         throw new NullPointerException("What happened?");
     }
} 
```

# ios - iPad 缺少 OpenGL 扩展字符串 GL_APPLE_texture_2D_limited_npot

> ID：10265978
> 
> 赞同：3
> 
> 时间：2012-04-22T07:15:32.093
> 
> 标签：ios, ipad, opengl-es

在我的 iOS 游戏中，我想在可用时使用 GL_APPLE_texture_2D_limited_npot 扩展来节省内存（游戏具有 NPOT 纹理，在我当前的实现中，我添加了一些填充以使它们具有两个的幂）。

我正在我的 iPad（第一代）中进行测试。到目前为止，我读到的每一篇文章都说所有支持 OpenGLES2（包括 iPad）的 iOS 设备也支持 GL_APPLE_texture_2D_limited_npot（这非常好，因为我的游戏使用的是 OpenGLES2）。我已经在我的 iPad 上进行了测试，它确实支持（如果我将 wrap 设置为 GL_CLAMP_TO_EDGE，我删除了填充并且图像工作），但是当我调用 glGetString(GL_EXTENSIONS) 时扩展不显示。编码：

```
const char *extensions = (const char *)glGetString(GL_EXTENSIONS);
std::cout << extensions << "\n"; 
```

结果是：

```
GL_OES_depth_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_packed_depth_stencil GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_texture_float GL_OES_texture_half_float GL_OES_vertex_array_object GL_EXT_blend_minmax GL_EXT_debug_label GL_EXT_debug_marker GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_EXT_separate_shader_objects GL_EXT_shader_texture_lod GL_EXT_texture_filter_anisotropic GL_APPLE_framebuffer_multisample GL_APPLE_rgb_422 GL_APPLE_texture_format_BGRA8888 GL_APPLE_texture_max_level GL_IMG_read_format GL_IMG_texture_compression_pvrtc 
```

为什么这个扩展不与 glGetString(GL_EXTENSIONS) 一起显示？检查它的正确方法是什么？所有 OpenGLES2 iOS 设备真的都支持吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T07:56:45.753

OpenGL ES 2.0 在规范中支持非 2 纹理的幂。无需扩展。这是规范：[http](http://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.25.pdf) ://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.25.pdf （第69页）：

> 如果 wt 和 ht 是指定的图像宽度和高度，并且如果 wt 或 ht 小于零，则生成错误 INVALID_VALUE。对于级别 0 到 k 的图像数组，二维纹理图像的最大允许宽度和高度必须至少为 2k-lod，其中 k 是 MAX_TEXTURE_SIZE 的以 2 为底的对数。lod 是图像阵列的细节层次。对于任何细节级别大于 k 的图像阵列，它可能为零。如果指定的图像太大而无法在任何条件下存储，则会生成错误 INVALID_VALUE。

没有关于二次幂限制的消息（即在 OpenGL ES 1.x 标准中）。

如果您阅读扩展规范 - [http://www.khronos.org/registry/gles/extensions/APPLE/APPLE_texture_2D_limited_npot.txt](http://www.khronos.org/registry/gles/extensions/APPLE/APPLE_texture_2D_limited_npot.txt)，那么您会注意到它是根据 OpenGL ES 1.1 规范编写的。

# wcf - 如何使用 ACS(Azure) 保护 wcf Web 服务

> ID：10265985
> 
> 赞同：1
> 
> 时间：2012-04-22T07:16:32.257
> 
> 标签：wcf, azure, web, single-sign-on, token

想知道如何启用我的 wcf Web 服务来提供加密和身份验证？目前，我的 Web 服务连接到 Azure(ACS) 并要求身份提供者进行身份验证检查，我可以实现 ssl 隧道以获取用户名和密码。但是我怎样才能获得 acs 令牌并执行 SSO？我想知道任何当前的实现，或者有什么好的例子可以效仿？

非常感谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:42:39.397

有一个带有一些很棒的文档的 codeplex 项目。

[http://acs.codeplex.com/documentation](http://acs.codeplex.com/documentation)

当您提到 SSO 时，我假设您的意思是使用 Active Directory 进行联合身份验证。如果是这样，MDSN 上有一个带有示例的示例项目。

[http://msdn.microsoft.com/en-us/library/hh127796.aspx](http://msdn.microsoft.com/en-us/library/hh127796.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:52:07.693

这里有很多有用的信息和示例 [http://msdn.microsoft.com/en-us/library/windowsazure/gg185912.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185912.aspx)

# entity-framework-4 - 用于文本本地化的 Linq 查询

> ID：10265986
> 
> 赞同：0
> 
> 时间：2012-04-22T07:16:37.597
> 
> 标签：entity-framework-4, linq-to-entities

我使用 EntityFramework 并且需要 LINQ 查询方面的帮助。我正在构建一个将存储文章的应用程序。同一篇文章可以翻译成多种语言。所以我有2张桌子：

## 文章表：

```
ArticleId
ResourceTitleId   (FK: LocalizedContent.ResourceId)
ResourceContentId (FK: LocalizedContent.ResourceId) 
```

## 本地化内容表：

```
ResourceId
LanguageId
Content 
```

因此，举例来说，如果我有英文和俄文的文章，我会在 Article 表中存储一行，如下所示：

```
 ArticleId | ResourceTitleId | ResourceContentId |
-----------|-----------------|-------------------|
          1|               1 |                 2 | 
```

然后，LocalizedContent 表将如下所示：

```
 ResourceId | LanguageId | Content |
------------|------------|---------|
           1|          1 |     aaa |
------------|------------|---------|
           1|          2 |     zzz |
------------|------------|---------|
           2|          1 |     bbb |
------------|------------|---------|
           2|          2 |     yyy | 
```

现在的问题是：我想按语言 id 选择一篇文章（比如说英语），我希望我的结果看起来像这样：

```
 ArticleId | ResourceTitle | ResourceContent |
-----------|---------------|-----------------|
          1|           aaa |             bbb | 
```

如何执行 LINQ 查询来检索我的结果，结果是一个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:31:58.997

只需在两个表之间执行内部联接，通过`LanguageId`.

```
var english = 1;
var query =
    from article in dc.Articles
    join resourceTitle in dc.LocalizedContent
        on article.ResourceTitleId equals resourceTitle.ResourceId
    join resourceContent in dc.LocalizedContent
        on article.ResourceContentId equals resourceContent.ResourceId
    where resourceTitle.LanguageId == english
       && resourceContent.LanguageId == english
    select new
    {
        article.ArticleId,
        ResourceTitle = resourceTitle.Content,
        ResourceContent = resourceContent.Content,
    }; 
```

# sql - 使用行号对数据进行分区

> ID：10265990
> 
> 赞同：0
> 
> 时间：2012-04-22T07:17:25.620
> 
> 标签：sql, sql-server, database, pivot

好的，这是我断定我迷路的情况之一。

我有一个看起来像这样的表：

![在此处输入图像描述](../Images/5e7029f5857193a8452410e4145d09c6.png)

我写了以下代码：

```
WITH CTE AS(
SELECT 
 USER_NBR
,CASE WHEN MOVIE_TYPE = 'Action'      THEN MOVIE_NAME END [ACTION]                        
,CASE WHEN MOVIE_TYPE = 'Drama'       THEN MOVIE_NAME END DRAMA
,CASE WHEN MOVIE_TYPE = 'Romance'     THEN MOVIE_NAME END ROMANCE
,ROW_NUMBER() OVER (PARTITION BY  USER_NBR ORDER BY  USER_NBR) AS OCCURANCE
FROM dbo.MOVIE)

SELECT * FROM CTE WHERE OCCURANCE = 1 
```

我得到这个结果：

![在此处输入图像描述](../Images/71476c32769b233546f38d57ef967278.png)

我不明白为什么我在查询结果中得到空值？

我究竟做错了什么？如您所见，我正在对电影进行分类。

感谢您检查这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T07:57:08.627

也许这种方法对你有用。通常，当您将行值转换为列时（例如示例中的电影类型），它是一个枢轴函数（参考[http://msdn.microsoft.com/en-us/library/ms177410.aspx](http://msdn.microsoft.com/en-us/library/ms177410.aspx)）

```
select * from 
(select user_nbr, movie_name, movie_type from movies) as movies
pivot 
(max(movie_name)
    for movie_type in ([Action], [Drama], [Romance])
)
as PivotTable 
```

结果：

```
user_nbr   Action             Drama           Romance
101        Casino Royale    Pretty Woman    Love Actually
102        Casino Royale    Pretty Woman    Love Actually 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:28:28.017

请注意，如果您试图获得这种类型的输出，则必须使用 group by 子句..

说如果你想获得所有类别的价值，那么你可以尝试以下查询..

```
WITH CTE AS(
SELECT 
 USER_NBR
,CASE WHEN MOVIE_TYPE = 'Action'      THEN MOVIE_NAME END [ACTION]                        
,CASE WHEN MOVIE_TYPE = 'Drama'       THEN MOVIE_NAME END DRAMA
,CASE WHEN MOVIE_TYPE = 'Romance'     THEN MOVIE_NAME END ROMANCE
,count(*) AS OCCURANCE
FROM dbo.MOVIE
 group by USER_NBR
)
SELECT * FROM CTE 
```

我认为这就是你想要做的..

# cordova - 从 phonegap 应用程序打开电话网络设置对话框

> ID：10265992
> 
> 赞同：9
> 
> 时间：2012-04-22T07:18:04.883
> 
> 标签：cordova, dialog, settings

当我的手机（Android）没有连接到互联网并且我打开浏览器应用程序时，它会弹出一个对话框，上面写着：

> 此应用程序需要网络访问。
> 启用移动网络或 Wi-Fi 以下载数据。

然后它有两个按钮 - 一个用于设置，一个用于取消。

按设置将我直接带到“无线和网络”设置对话框。

我想从 phoneGap 应用程序中显示一个类似的对话框。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-28T11:22:39.900

**PhoneGap 的诊断插件**可能会给你答案。

从以下链接下载插件：[下载链接](https://github.com/don/phonegap-plugins-1/tree/master/Android/Diagnostic)

比通过以下步骤：

1.  在 html 标头部分中的***cordova.js***之后添加***diagnostic.js***文件。

 **> < script type="text/javascript" charset="utf-8" src="cordova-XXXjs"></script>
> < script type="text/javascript" charset="utf-8" src="diagnostic.js " > </脚本>

2.  在您的项目中创建一个名为**src/net/avantic/diagnosticPlugin**的目录并将***Diagnostic.java***移动到其中。

3.  在您的**res/xml/plugins.xml**文件中添加以下行：

> <插件名称="诊断"值="net.avantic.diagnosticPlugin.Diagnostic"/>

4.  并在**AndroidManifest.xml**添加：

> < uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
> <use-permission android:name="android.permission.BLUETOOTH" />

### 除了调用 WIFI 设置对话框之外，您还需要在任意位置添加以下代码：

```
 //Check whether Wifi is enable or not...
 window.plugins.diagnostic.isWifiEnabled(wifiEnabledSuccessCallback, wifiEnabledErrorCallback);

 //If function success callback result is 0 it will open the wifi settings dialog box...
 function wifiEnabledSuccessCallback(result) {
      if (!result){
           alert("You must enable the Wi-Fi in device settings.");
           window.plugins.diagnostic.switchToWifiSettings();
        }
      else{
            alert("WiFi is ON!");
          }
     }

  function wifiEnabledErrorCallback(error) {
    console.log(error);
  } 
```

希望上述解决方案对您有用..**

# php - 为 WordPress 生成 PHP 函数调用

> ID：10265993
> 
> 赞同：2
> 
> 时间：2012-04-22T07:18:09.877
> 
> 标签：php, wordpress, backtracking

我正在使用wordpress。我想查看 wordpress 调用的所有函数的回溯。这是否可能仅使用 php，或者如果没有，我可以在哪里插入 debug_backtrace() 来查看所有函数调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:26:46.393

`debug_backtrace()`（转储时）将向您显示函数调用，并包括指向您调用跟踪的函数。你不能要求它为整个应用程序做一个堆栈（除非整个应用程序只是一长串函数调用和包含，在这种情况下你仍然必须找到最后一步并将跟踪调用放入那里）。

因此，对于 Wordpress，如果您试图通过反复试验来了解应用程序，您可以尝试在您认为可能的地方添加跟踪。

# asp.net - 我可以将我的 VS 2010 转移到我的新虚拟专用服务器 (VPS) 上吗？

> ID：10265995
> 
> 赞同：0
> 
> 时间：2012-04-22T07:18:21.437
> 
> 标签：asp.net, visual-studio, visual-studio-2010

我现在从 1and1 租用我自己的服务器。我可以将 Visual Studio 2010 Ultimate（我花了 1100 美元买的）移到服务器上吗？

甚至有必要吗？我不知道 ws_ftp 将如何工作……我从来没有自己的服务器。任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T08:02:33.333

通常，您使用 Visual Studio 在本地计算机上进行开发，然后发布您的 Web 应用程序并在您的 Web 服务器（即 1and1）上的 IIS 上运行编译后的代码。

要发布您的应用程序，请选择 Web 项目并单击构建 -> 发布。然后，将文件 FTP 到您的 Web 服务器。您将需要相应地配置 IIS。那里有很多信息。几个谷歌会帮你解决的。

# java - SNMP4J.jar - java.lang.ClassNotFoundException

> ID：10265998
> 
> 赞同：1
> 
> 时间：2012-04-22T07:19:46.907
> 
> 标签：java, jar, snmp, snmp4j

我正在尝试检查一些`SNMP`示例，所以

*   我已经下载了`snmp4j.jar`
*   `SNMP.java`使用编译`javac -cp snmp4j.jar SNMP.java`（没关系）
*   尝试使用 启动它`java -cp snmp4j.jar SNMP`，但是

它报告：

```
root@comp:~/workspace_c/SNMP# java -cp snmp4j.jar SNMP
Exception in thread "main" java.lang.NoClassDefFoundError: SNMP
Caused by: java.lang.ClassNotFoundException: SNMP
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: SNMP.  Program will exit. 
```

**更新：** 当我导入`snmp4j.jar`java项目时，它在`ECLIPSE`...中正常工作

**UPDATE@2：**主要部分`SNMP.java`

```
import org.snmp4j.CommunityTarget;
...
public class SNMP {
  public static void main(String[] args) {
  ...
  }
} 
```

我做错了什么？这是我第一次见面`snmp4j`，所以我知道注意到它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T08:32:33.393

如果我理解正确，`SNMP`是你的示例类，它不在罐子里。在这种情况下，您需要将 jar 和当前目录都添加到类路径中：

```
java -cp .:snmp4j.jar SNMP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:29:12.663

据我所知，您正在尝试使用`SNMP4J.jar`（大写）运行您的应用程序，但是当您编译您的应用程序时，您可能使用了小写版本。您的提示显示您正在使用具有区分大小写文件系统的 unix 操作系统。因此，请检查 JAR 文件名的大小写。我相信所有字母都是小写的。

# html - 在 Safari 扩展程序的新窗口中显示本地存储中的内容

> ID：10265999
> 
> 赞同：2
> 
> 时间：2012-04-22T07:19:52.467
> 
> 标签：html, safari, safari-extension

我正在开发一个 Safari 扩展程序并面临一些问题。

我想在新选项卡中显示存储在本地存储中的一些内容。我无法动态更改新 html 页面的内容...

我的问题是如何在新选项卡中显示动态 html 内容。每次用户单击扩展时，内容都会更改。

提前致谢！！！

编辑：我能想到的一种方法是使用javascript的DOM对象并从本地存储中检索内容。但是这个解决方案对我来说似乎是错误的。任何人都可以朝这个方向投一些光吗？

EDIT2：更准确地说，我正在开发一个 safari 扩展，其中我想在用户单击扩展按钮时在新选项卡中显示一个 html 文件。我想在该新选项卡中显示的内容是动态的，它将基于存储在本地存储中的一些数据作为键值对。要从 safari 扩展打开一个新选项卡，我可以做类似的事情

```
var newTab = safari.application.activeBrowserWindow.openTab();
newTab.url = safari.extension.baseURI + 'mainPage/mainPage.html'; 
```

其中 url 将是本地 html 文件。现在我的**问题**是如何修改本地 html 文件以在其中插入动态内容。