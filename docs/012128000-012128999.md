# StackOverflow 问答 12128000-12128999

# iphone - XCode iOS - 主屏幕风格导航

> ID：12128001
> 
> 赞同：1
> 
> 时间：2012-08-26T06:08:55.540
> 
> 标签：iphone, xcode, xcode4, ios4, interface-builder

抱歉，这是一个非常愚蠢的问题，但我想不出实际的菜单样式叫什么。我正在尝试查找有关如何创建说明页面的教程，您可以左右滑动以查看更多说明。基本上，主屏幕是如何工作的，点代表有多少个屏幕以及用户在哪个屏幕上，加上相同的动画，如果你向左/向右滑动，下一个会滑动。

如果有人知道这些通常被称为什么，我可以去查找一些教程。

非常感谢，

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T06:21:35.843

此控件称为[UIPageControl](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageControl_Class/Reference/Reference.html)。这是[教程](http://www.edumobile.org/iphone/iphone-programming-tutorials/pagecontrol-example-in-iphone/)的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T06:22:00.137

使用带有 pagingEnabled 的 UIScrollview。将 UIPageControl 添加到视图（无论您想在哪里看到点）。说明页面应作为子视图添加到 UIScrollView 确保使用 UIScrollView 和 UIPageControl 委托来更新 pageControl 中的页面。

如果您需要有关如何实现此功能的更多信息，请使用关键字 UIScrollView 和 UIPageControl 进行搜索

# php - AFNetworking 上传图像间歇性工作

> ID：12128002
> 
> 赞同：1
> 
> 时间：2012-08-26T06:09:05.210
> 
> 标签：php, objective-c, ios, cocoa-touch, afnetworking

我正在使用 AFNetworking 将图像和一些参数上传到 PHP 脚本（使用 CodeIgniter 构建），该脚本将接收图像，将文件名和参数放入数据库并将图像移动到永久位置。

这是 Obj-C：

```
NSURL *url = [NSURL URLWithString:@"http://my_api_endpoint"];
NSData *imageToUpload = UIImageJPEGRepresentation(_mainMedia, .25f);
NSDictionary *params = [[NSDictionary alloc]initWithObjectsAndKeys:
                        _topicText.text,@"Topic",
                        @"1",@"Category",
                        @"1",@"Creator",
                        nil];
AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:url];

NSString *timeStamp = [NSString stringWithFormat:@"%0.0f.jpg", [[NSDate date] timeIntervalSince1970]];

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"apidebate/debates" parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData: imageToUpload name:@"MainMedia" fileName:timeStamp mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *response = [operation responseString];
    NSLog(@"response: [%@]",response);

    [self dismissViewControllerAnimated:YES completion:nil];
    [self.delegate createTopicViewControllerDidCreate:self];

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    if([operation.response statusCode] == 403){
        NSLog(@"Upload Failed");
        return;
    }
    NSLog(@"error: %@", [operation error]);

    [self dismissViewControllerAnimated:YES completion:nil];
    [self.delegate createTopicViewControllerDidCreate:self];
}];

[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
    float width = totalBytesWritten / totalBytesExpectedToWrite;

}];

[operation start]; 
```

这是PHP：

```
//CONTROLLER FROM API
function debates_post()
{
mail('myemailaddress@gmail.com', 'Test', 'Posted');
$tmp_dir = "images/posted/";

if(isset($_FILES['MainMedia'])){
    $SaniFileName = preg_replace('/[^a-zA-Z0-9-_\.]/','', basename($_FILES['MainMedia']['name']));

    $file = $tmp_dir . $SaniFileName;
    move_uploaded_file($_FILES['MainMedia']['tmp_name'], $file);
}
else
    $SaniFileName = NULL;

$data = array('Topic'=>$this->post('Topic'), 'MainMedia'=>$this->post('MainMedia'), 'Category'=>$this->post('Category'), 'Creator'=>$this->post('Creator'));
$insert = $this->debate->post_debate($this->post('Topic'), $SaniFileName, $this->post('Category'), $this->post('Creator'));
if($insert){
    $message = $this->db->insert_id();
}
else{
    $message = 'Insert failed';
}

$this->response($message, 200);
}

//MODEL
function post_debate($Topic=NULL, $MainMedia='', $Category=NULL, $Creator=NULL){
$MainMedia = ($MainMedia)?$MainMedia:'';
$data = array(
                'Topic' => $Topic,
                'MainMedia' => $MainMedia,
                'Category' => $Category,
                'Creator' => $Creator,
                'Created' => date('Y-m-d h:i:s')
            );
return $this->db->insert('debate_table', $data);
} 
```

我目前的问题是从 iOS 上传很少完成，并且没有模式可以完成。我可以只用参数添加大照片或小照片，或者根本不添加照片，它的工作时间为 20%。当它失败时，这是我在 X-Code 中收到的错误消息：

```
2012-08-26 01:52:10.698 DebateIt[24215:907] error: Error Domain=NSURLErrorDomain 
Code=-1021 "request body stream exhausted" UserInfo=0x1dd7a0d0 
{NSErrorFailingURLStringKey=http://my_api_url, 
NSErrorFailingURLKey=http://my_api_url,
NSLocalizedDescription=request body stream exhausted, 
NSUnderlyingError=0x1e8535a0 "request body stream exhausted"} 
```

这到底是什么东西？

我有一个基本的 HTML 表单，我将相同的图像发布到同一个端点，并且每次都适用于任何大小的图像。iOS似乎允许不同大小的图像很好......但无论大小，它可能只会在第二次尝试时起作用。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T18:44:22.613

我也在使用 AFNetworking 上传图像，我没有遇到问题，也许是因为我正在使用 base64 编码我的图像数据？

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               token, @"token",
                               [UIImageJPEGRepresentation(image, 0.8) base64EncodedString],@"photo",
                               nil];

NSMutableURLRequest *request = [self.httpClient requestWithMethod:@"POST"
                                                             path:@"/user/upload/photo.json"
                                                       parameters:params]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:51:51.537

首先，确保您已下载最新版本的 AFNetworking。

您可以执行 [[AFHTTPRequestOperation alloc] initWithRequest:...]，然后使用直接属性访问器 (operation.completionBlock = ^{...}) 或 -setCompletionBlockWithSuccess:failure: 设置完成块。请记住，完成块在请求完成下载后执行。

至于多部分表单块， -appendWithFileData:mimeType:name 不久前也被删除了。您想要的方法是 -appendPartWithFileData:name:fileName:mimeType:。

进行这两项更改，一切都会正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:52:58.483

前段时间我有一个类似的错误。这是由于“Content-Length”http 标头的值与实际正文大小不匹配造成的。这个错误很微妙。发生这种情况是因为我使用字符串长度作为内容大小，并且当字符串在 UTF-8 编码中具有双字节字符时，这些字符对字符串长度的贡献为 1，而对帖子正文大小的贡献为 2。检查您的 POST 正文大小与“内容长度”。

我通过在模拟器中运行应用程序的网络嗅探来调试这个奇怪的网络错误。我喜欢HTTPScoop。

# android - 是否可以为两个应用程序使用相同的 scoreloop 排行榜

> ID：12128003
> 
> 赞同：0
> 
> 时间：2012-08-26T06:09:06.617
> 
> 标签：android, leaderboard, scoreloop

在我的 Android 应用程序中，我使用 scoreloop 排行榜，但问题是我想为另一个应用程序使用相同的排行榜。我希望这两个应用程序的分数应该在同一个排行榜上提交。

我怎样才能做到这一点？是否可以？请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:54:55.523

是的，您可以通过为两个应用程序（游戏）使用相同的 ID 来拥有相同的排行榜。

# jquery - jquery - 如果条件选择每个元素的最后一个单词

> ID：12128004
> 
> 赞同：1
> 
> 时间：2012-08-26T06:09:10.070
> 
> 标签：jquery, select, element, each

我有一个大问题。我有这个代码[http://jsfiddle.net/A7zMa/3/](http://jsfiddle.net/A7zMa/3/)。

`<span>`只有当这个词有数字（例如 ZPC85-A10 ---> ）时，我才需要添加到最后一个词（在这种情况下是机器模型`<span>ZPC85-A10</span>`）。

我需要为每个 h4 元素执行此操作。

结果将如下所示：`<h4>some text<span>ZPC85-A10</span></h4>`*必须包含连字符。

例如，型号也可以是 SD34A。

对不起，我的英语不是我的母语。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:13:29.387

```
$('div#main_cont .prod_cont h4.prod_title').each(function(){
    $(this).text($(this).text().replace(/(\w*[\d\-]+\w*)/g, "<span>$1</span>"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:32:44.627

尝试这个：

```
var reg = /([0-9])/g;

$('div#main_cont .prod_cont h4.prod_title').each(function(){
    var s = this.firstChild.textContent.split(" ");
    // or var s = $(this).text().split(" ");
    var last = s[s.length-1];
    if (last.match(reg)) {
       s[s.length-1] = '<span>'+last+'</span>';
    }
    $(this).html(s.join(" "));
}) 
```

[小提琴](http://jsfiddle.net/A7zMa/4/)

# iphone - arrayWithArray:nil 返回空数组但未记录

> ID：12128011
> 
> 赞同：3
> 
> 时间：2012-08-26T06:11:12.720
> 
> 标签：iphone, objective-c

当参数为 nil 时， NSArray 和 NSMutableArray`+arrayWithArray:`返回空数组而不是 nil。

```
 NSLog(@"%@", [[NSArray arrayWithArray:nil] class]);
    NSLog(@"%@", [[NSMutableArray arrayWithArray:nil] class]); 
```

输出：

```
 __NSArrayI
    __NSArrayM 
```

但是这种行为没有记录在 Apples 文档中。

依赖`arrayWithArray:nil`返回空数组的假设是否安全？
或者我应该像这样显式分配空数组：

```
 NSDictionary *dic = [[NSDictionary alloc] init];
    NSMutableArray *arr = [dic objectForKey:@"a"];
    if (!arr) {
        arr = [[NSMutableArray alloc] init];
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T06:16:44.647

的文档`+arrayWithArray:`说：

> 创建并返回一个数组，该数组包含另一个给定数组中的对象。

当然，`nil`不是数组，而是`[nil count]`有效并返回`0`，所以这里可能会被视为空数组。

**但我不会依赖这个事实**`[[NSMutableArray alloc] init]`并使用or创建空数组`[NSMutableArray array]`。

**添加：**

如果您`+arrayWithArray:`使用无效类型调用，例如 a `NSString`，那么程序当然会抛出异常。但是从错误信息

```
-[__NSCFConstantString count]: unrecognized selector sent to instance 0x69e4 
```

您可以看到这`count`确实是第一种用于复制数组元素的方法。这也解释了为什么它与`nil`.

# c# - 为什么与泛型的歧义不一致，而不是引发错误？

> ID：12128014
> 
> 赞同：5
> 
> 时间：2012-08-26T06:12:01.400
> 
> 标签：c#, .net, generics, ambiguity

> **可能重复：**
> [泛型方法和方法重载](https://stackoverflow.com/questions/3679562/generic-methods-and-method-overloading)

说我有一个像

```
class SortedList<K>
{
    public string this[int i] { get { return "a"; /* dummy sample code */ } }
    public string this[K key] { get { return "b"; /* dummy sample code */ } }
} 
```

现在让我们说一些家伙决定使用它：

```
static string Test1<K>(K key) { return new SortedList<K>()[key]; } 
```

编译器将此调用解析为`K key`重载。

现在，将此与说

```
static string Test2(int key) { return new SortedList<int>()[key]; }  // whoops 
```

编译器将其解析为`int i`重载。

现在，如果某个可怜的灵魂说出来`Test1(0)`，他会得到与他说出来的结果不同的结果`Test2(0)`，尽管它们的身体乍一看几乎一模一样。

更有趣的是，在这两种情况下，编译器或运行时都不会检测到歧义并给出错误。
相反，运行时只是根据值是否为泛型来改变其行为，这对于调用者来说显然是出乎意料的。

*为什么*行为不一致？
或者，更好的是，为什么没有因为歧义而没有编译器（或运行时）错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:21:58.153

你为什么认为这是不一致的行为？重点是，您使用“可能是键”类型的 getter 来覆盖 index-getter ...

你认为，应该是预期的结果？一个警告？开发人员需要检查您想为哪些泛型使用什么类型......它足够智能，可以检查，方法“test1”将处理基于键的getter，而test2只处理基于索引的getter......

您必须禁止“int”作为类型（例如使用类约束）或在此处实现其他 getter 方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:22:21.830

因为编译器不会针对它怀疑可能对您来说模棱两可的事物发出警告或错误。它会指出它认为模棱两可的东西。但是这里的编译器没有任何歧义。

假设我把正方形和长方形递给你，然后告诉你把正方形放在 a 堆里，把长方形放在 b 堆里。此外，您不必查看对象以查看它们是正方形还是矩形，因为它们已经被标记为正方形。现在... 在某个时候，我递给您一个标记为矩形的对象，但您注意到它也恰好是一个正方形。现在，我没有告诉你分析这些物体...我告诉你只是按照指示按照我标记它们的方式组织它们。这就是编译器的工作方式......完全按照您的指示去做。

# jquery - Jquery验证无线电类型

> ID：12128016
> 
> 赞同：0
> 
> 时间：2012-08-26T06:13:16.930
> 
> 标签：jquery, jquery-plugins

有谁知道如何让无线电字段类型验证正确显示在错误 div 中？现在它根本没有验证

```
<script src="http://jquery.bassistance.de/validate/lib/jquery.js" type="text/javascript"></script>
<script src="http://jquery.bassistance.de/validate/lib/jquery.metadata.js" type="text/javascript"></script>
<script src="http://jquery.bassistance.de/validate/jquery.validate.js" type="text/javascript"></script>

  <style type="text/css">
    div.error { height: 15px; overflow: hidden; }
    .cmxform p.error label { color: #FFFF00; font-size: 13px; }
    label.error, label.error { color: #FFFF00; font-size: 13px; }
    div.container { display: none }
    .container label.error { display: inline; }
    form.cmxform label.error { display: block; width: auto; }
  </style>

<script type="text/javascript">
$.validator.setDefaults({
    submitHandler: function() {
        alert("submitted!");
    }
});

$().ready(function() {
    $("#form1").validate({
        errorLabelContainer: $("#form1 div.error")
    });
    var container = $('div.container');
});
</script> 
```

形式

```
<form method="post" class="cmxform" id="form1" action="">
    <div class="error"></div>
        <input class="inputxt {required:true,minlength:3}" title="fill-in all fields" name="name" />
        <input type="radio" name="website" value="Yes" validate="required" /> YES 
        <input type="radio" name="website" value="No" /> NO
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:20:28.807

您所要做的就是将无线电组的成员之一设置为必需的，jquery 将负责其余的工作：

```
<input type="radio" name="myoptions" value="blue" class="required"> Blue<br />
<input type="radio" name="myoptions" value="red"> Red<br />
<input type="radio" name="myoptions" value="green"> Green 
```

以上将需要在继续之前选择带有“我的选项”名称的 3 个单选选项中的至少 1 个。

Mahes 的标签建议，顺便说一句，效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T07:21:15.720

这可能会派上用场：http: [//jsfiddle.net/kDyRm/](http://jsfiddle.net/kDyRm/)

从我以前的回复中得到它：[在 jsfiddle jquery 验证插件没有触发](https://stackoverflow.com/questions/12048361/in-jsfiddle-jquery-validate-plugin-is-not-firing)

还发现这很方便：http: [//jsfiddle.net/Bd688/7/](http://jsfiddle.net/Bd688/7/)

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) **文档** [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

希望演示适合原因`:)`

# css - HTML/CSS：加载时避免图像下的黑色背景

> ID：12128019
> 
> 赞同：0
> 
> 时间：2012-08-26T06:13:33.393
> 
> 标签：css, background-color

这是我的CSS：

```
body {
color: #ffffff;
background-color: #8f8f8f;

background: url(images/noise_int.png) repeat center; /* fallback */
...
background: radial-gradient(rgba(0, 0, 0, .3) 10%, rgba(0, 0, 0, .8) 90%), url(images/noise_int.png) repeat center, #8f8f8f; /* W3C */
height: auto;
background-size: auto; 
} 
```

（我确实为所有浏览器去掉了多余的背景线。）现在我相信背景颜色首先设置为灰色。然后它被告知是一个透明的渐变，在图像的顶部，在灰色色调的顶部。我认为这意味着当图像在其下方加载时会有灰色调，但事实并非如此。当图像在下方加载时，它是黑色的。当图像是逐行和隔行扫描时会发生这种情况。有没有办法防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:54:34.150

```
background: #000000 url(images/noise_int.png) repeat center; 
```

# configuration - 如何编写一个在提琴手中获取网关信息的程序

> ID：12128020
> 
> 赞同：0
> 
> 时间：2012-08-26T06:13:33.450
> 
> 标签：configuration, fiddler

在 Fiddler 中，当我查看 Tools > Fiddler Options > Connections > Show Gate Info 时，
我看到了上游网关，它是根据它在启动时采用的 IE 设置计算得出的。

有没有获取网关信息的方法。
或者有没有办法提琴手保存网关信息，我可以编程来读取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:42:01.957

Fiddler 的 About 对话框中的网关信息显示上游网关，该网关是根据它在启动时采用的 IE 设置计算得出的。

Fiddler 注册表设置随时可能更改，通常应仅使用 Fiddler 用户界面进行设置。特别是，Fiddler Extensions 不应设置或直接回复这些设置。

> HKEY_CURRENT_USER\Software\Microsoft\Fiddler2

更多更新检查[http://fiddler.wikidot.com/registrysettings](http://fiddler.wikidot.com/registrysettings)

# java - 在我的程序中引用另一个 .java 文件中的类

> ID：12128024
> 
> 赞同：1
> 
> 时间：2012-08-26T06:14:44.490
> 
> 标签：java

我对 Java 完全陌生，并且无法引用我在另一个 .java 文件中声明的类。我在 Oracle 网站上阅读了很多关于它的内容以及许多 stackoverflow 问题，但无法解决问题。以下是我采取的步骤：

**设置类路径。** 我在 UNIX 上运行它。所以我输入了 `% java -classpath /users/myUserName/algs4/assignment1`. 它没有更改类路径，而是给了我一长串其他选项。

**在我的每个 .java 文件中包含“包名称”**，这些文件具有我想要引用的类定义。

我还确保我要引用的所有文件都在同一个目录中。这是我的一些代码：

```
package assignment1;
public class Percolation
{
    private int[][] grid;
    ....
    //Other method definitions etc.
   public Percolation(int N)
   {
      uf = new WeightedQuickUnionUF(N);
      grid = new int[N][N];
      ...
      //Other code

   }

 } 
```

我的 WeightedQuickUnionUF 类也定义为：

```
package assignment1;
public class WeightedQuickUnionUF {
    private int[] id;    // id[i] = parent of i
    private int[] sz;    // sz[i] = number of objects in subtree rooted at i
    private int count;   // number of components

    //Create an empty union find data structure with N isolated sets.
    public WeightedQuickUnionUF(int N) {
        count = N;
        id = new int[N];
        sz = new int[N];
        for (int i = 0; i < N; i++) {
            id[i] = i;
            sz[i] = 1;
        }
     }
} 
```

但是现在当我使用 javac Percolation.java 编译时。它给了我错误：

```
Percolation.java:7: cannot find symbol
symbol  : class WeightedQuickUnionUF
location: class assignment1.Percolation
WeightedQuickUnionUF uf;
^ 
```

我知道这是因为编译器不知道什么是 WeightedQuickUnionUF 类。它不能引用它。但是我该怎么做呢？我已经尝试过流行的解决方案。

我没有使用任何 IDE。只是一个文本编辑器，然后在终端上编译它。

（algs4 文件夹有 stdlib.jar 等文件）

编辑：我错过了“新”关键字。我已经添加了。我也在 Percolation.java 之前编译我的 WeightedQuickUnionUF 类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T06:22:57.527

该`java`命令没有设置类路径，而是尝试运行 java 类。这就是长选项列表的原因。

您可以在编译时指定类路径：`javac -classpath . assignment1/Percolation.java`从 algs4 目录运行。注意点表示当前目录。

无需按顺序编译文件。

运行你的程序：`java -cp . assignment1.Percolation`从 algs4 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:23:09.273

您需要首先编译依赖项，即在您的情况下是`WeightedQuickUnionUF`类。

如果您想要一个匿名对象，请将其与`new`关键字一起声明：

```
uf = new WeightedQuickUnionUF(N); 
```

或者按照另一个答案中的说明使用它。

由于该答案已被删除（我不再看到它），因此另一种方法是拥有一个命名对象：

```
WeightedQuickUnionUF myObj; 
```

..

```
myObj = new WeightedQuickUnionUF(N);
uf = myObj; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T06:26:19.987

您必须编译中的类

```
order of the flow of the Object Graph. 
```

**这意味着在 WeightedQuickUnionUF 编译之前****不能**编译Percolation 类。

 **所以首先编译 WeightedQuickUnionUF，然后是 Percolation。

我认为您甚至错过了`new`关键字...在初始化 WeightedQuickUnionUF(N); 时

```
uf = new WeightedQuickUnionUF(N); 
```**

# objective-c - UIPageViewController 优化和可能的解决方案

> ID：12128025
> 
> 赞同：1
> 
> 时间：2012-08-26T06:15:29.967
> 
> 标签：objective-c, optimization, uiimage

我`UIPageViewController`在我的应用程序中使用 a 来显示图像数量（1024x768 大小）。可以用他的图片制作每个数组`UIViewControllers`并适合每个页面吗？也许如果你得到 50 张照片，它会崩溃？目前我将图像存储在 Documents 文件夹中，这样我就可以从不在屏幕上的视图控制器中删除图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:29:02.557

这不会很有效，你最好用`UIImageViews`. 即使那样你也必须小心。处理这个问题的最好方法可能是使用图像视图并在它们超出屏幕边界的一个以上图像宽度时释放它们。然后，当相关图像是要在任一方向显示的下一个图像时，当然会重新分配。

**编辑：**看起来您可以使用以下 UIPageViewController 数据源方法来设置哪个视图控制器基本上已经排队并等待右/左。使用这些，您一次应该只能分配 3 个视图控制器。

```
– pageViewController:viewControllerBeforeViewController:
– pageViewController:viewControllerAfterViewController: 
```

然后您可以使用它来设置初始控制器：

使用 UIPageViewController 设置初始视图控制器

```
-setViewControllers:direction:animated:completion: 
```

下面的句子引用自 Apple 的文档，让我相信控制器可能只能将必要的视图控制器加载到自己的内存中。

> 视图控制器可以通过 setViewControllers:direction:animated:completion: 方法一次提供一个（或一次提供两个，取决于脊椎位置和双面状态），或者根据数据源的需要提供。仅当提供数据源时才启用基于手势的导航。

# email - 如何在 iBooks HTML Widget 中使用 mailto 功能

> ID：12128028
> 
> 赞同：0
> 
> 时间：2012-08-26T06:15:40.123
> 
> 标签：email, ibooks

我已经在我的 iPad 上的网络浏览器中尝试了带有 mailto 功能的代码，它链接到邮件应用程序，但是相同的代码在 iBooks 中不起作用（mailto 在 iBooks 应用程序中完全没有任何作用）。

有谁知道通过电子邮件发送 html 表单数据的某种解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T14:42:17.063

如果您尝试在 iBooks 页面内链接，请打开链接检查器，“链接到”菜单应该有一个电子邮件选项。

如果您使用的是 HTML 小部件选项，您可以尝试以下操作：打开电子邮件

# php - 文档类型错误

> ID：12128031
> 
> 赞同：2
> 
> 时间：2012-08-26T06:15:55.407
> 
> 标签：php, xml, xslt

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
    <!DOCTYPE HTML>
    <html>
    <head>

    </head>
    <body>

    </body>
    </html>
</xsl:template>

</xsl:stylesheet> 
```

它在 DOCTYPE 中出现解析错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T16:41:55.463

**[W3C HTML 5 参考](http://dev.w3.org/html5/html-author/#doctype-declaration)建议使用`doctype-system="about:legacy-compat"`：**

> 为了与 HTML 的传统生产者（即输出 HTML 文档的软件）兼容，一种替代 DOCTYPE 可供无法输出上述 DOCTYPE 的系统使用。此限制发生在希望 DOCTYPE 包含 PUBLIC 或 SYSTEM 标识符并且无法省略它们的软件中。此 DOCTYPE 的规范形式如下：
> 
> ```
> <!DOCTYPE html SYSTEM "about:legacy-compat"> 
> ```

您可以使用任何具有以下功能的 XSLT 处理器来实现此目的：

```
<xsl:output method="html" doctype-system="about:legacy-compat" /> 
```

它将生成：

```
<!DOCTYPE HTML SYSTEM "about:legacy-compat"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T06:19:34.527

您不能将`<!DOCTYPE HTML>`声明直接嵌入到 xslt 中。使用以下内容：

```
<xsl:text disable-output-escaping='yes'>&lt;!DOCTYPE html></xsl:text> 
```

反而。有关类似问题，请参阅[使用 XSLT 设置 HTML5 文档类型。](https://stackoverflow.com/questions/3387127/set-html5-doctype-with-xslt)

# android - phonegap android应用程序中固定div中的zxing条码扫描仪

> ID：12128032
> 
> 赞同：7
> 
> 时间：2012-08-26T06:16:11.230
> 
> 标签：android, jquery-mobile, cordova, zxing

我已经在我的 android phonegap 应用程序中成功添加了 zxing 条码扫描器插件，这里是 js 代码，在页面上我可以看到条码扫描器屏幕。

```
 $('#scanpage').live('pageshow', function (event, ui) {
    //navigator.notification.alert("Search page");

    window.plugins.barcodeScanner.scan( function(result) {
        //navigator.notification.alert("We got a barcode\n" +   "Result: " + result.text + "\n" +"Format: " + result.format + "\n" +
            //    "Cancelled: " + result.cancelled);
         }, function(error) {
        navigator.notification.alert("Scanning failed: " + error);
    }); 

}); 
```

这是html5页面代码

```
div id="scanpage" data-role="page">
<div data-role="header" class="pageheader">

<div class="height30" style="padding-right:2%;">
 <div class="back" style="margin-right:2%;"><a href="#homepage">Back</a></div>
<div class="logo2" ><a href="#"  ><img src="images/scan.png" style="padding-top:12px;" alt="Scan Code" /></a>
</div>
 </div>
 </div> 

<div data-role="content"  class="wrapper" style="width:100%">

 <div style="background-color:#000000;" >
 <div style="height:400px;" id="scanarea"></div>

 <input name="" type="button" class="button" value="Focus and Scan" data-role="none"   />

  </div><!-- inner div-->

</div>  
   </div> <!-- end SCAN PAGE --> 
```

但是它是如何工作的，当我打开页面首先加载 html 但在第二个整个屏幕上覆盖着条形码扫描仪窗口时，我想在 DIV 'scanarea' 中修复这个扫描区域。但不知道如何在某些 div 区域修复它，并且在按钮单击扫描时将执行并读取条形码。

扫描窗口 ![在此处输入图像描述](../Images/6d4deaad6419c619dc7adbcdf8cfe310.png)

html页面 ![在此处输入图像描述](../Images/fcd7cb45005a9b0dbd4c4be89e9a51fa.png)

需要这样展示 ![在此处输入图像描述](../Images/07d53885a2662a68098891fb0a37d2e2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T21:40:01.593

条形码扫描屏幕被实现为完全隐藏 PhoneGap 的 web 视图的 Android 活动。如果您想自定义此屏幕，您可能需要以某种方式更改其[布局文件](https://github.com/phonegap/phonegap-plugins/blob/master/Android/BarcodeScanner/LibraryProject/res/layout/capture.xml)。

我假设您的“聚焦和扫描”按钮应该触发手动扫描（我认为默认是识别第一个条形码） - 因此您可能必须更改[活动实现](https://github.com/phonegap/phonegap-plugins/blob/master/Android/BarcodeScanner/LibraryProject/src/com/google/zxing/client/android/CaptureActivity.java)以包含该按钮的处理程序。

另请参阅[Simon Mac Donald 的博客](http://simonmacdonald.blogspot.de/)（他似乎正在开发 Android 上的条形码扫描插件）和[这个答案](https://stackoverflow.com/a/9420741/245706)（这正是我在上面写的，snap :P）。

# jquery - 如何在我的 HTML 页面中使用 jQuery 全局变量？

> ID：12128033
> 
> 赞同：0
> 
> 时间：2012-08-26T06:16:21.483
> 
> 标签：jquery, html

我有一些 jQuery 全局变量，我想将它们放入我的 HTML 文档中，这样当它们通过一些更新函数进行更新时，它们只会在全局被自动引用的每个位置更新。这将使我免于编写更新文本的函数。

基本上我想这样做：

```
<html>
<head>
   <script>
      var globalVariable=  "something";
   </script>
</head>
<body>
   <p>The jQuery global variable is equal to: $(globalVariable)</p>
<body>
</html> 
```

这甚至会起作用吗？当它们在 jQuery 中更新时，它们会在页面中更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:29:21.743

您不能在 jQuery 中执行此操作，对于此功能，最好使用 MVC 或 MVVM 框架，我建议使用 knockout.js (http://knockoutjs.com/)，使用它很容易将变量绑定到 DOM 元素：

```
 <span data-bind="text: myVariable "></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:27:42.340

不，你不能这样做。更好的方法是将您的变量插入到 div 之类的占位符中。为它们分配类，并在每次更改变量时调用该函数以用命名类替换该 div 中的值。

```
$(".classname").html("changed text") 
```

html:

```
 <div class="classname">some value</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T06:29:13.593

像这样你的意思是：**演示** [http://jsfiddle.net/v8v9m/](http://jsfiddle.net/v8v9m/)

希望能满足需求`:)`

**代码**

```
var globalVariable=  "something";

updateme(globalVariable);

$('#foo').click(function(){
        updateme("HULK");

});
function updateme(bar){
 $('#hulk').html(bar);   
}
​ 
```

**html**

```
<html>
<head>
   <script>

   </script>
</head>
<body>
    <p>The jQuery global variable is equal to:<laspanle id="hulk"></span></p>
<body>

    <input type="button" value="Update something to hulk" id="foo" />
​ 
```

# ruby-on-rails - 在 Rails 上安装 Resque 邮件队列

> ID：12128035
> 
> 赞同：0
> 
> 时间：2012-08-26T06:16:43.550
> 
> 标签：ruby-on-rails, ruby, actionmailer, resque

我在 Rails 应用程序中使用[The Resque 邮件队列](https://github.com/scottwater/resque_mail_queue)作业来异步发送邮件。在文档中，它只是说将 gem 添加到您的 gemfile 并添加 enqueue 方法..

我确实这样做了，我看到邮件被添加到redis队列中......但是邮件没有被发送，我怀疑这是因为没有工人......我以前没有使用过resque，我错过了什么吗？

```
ruby-1.9.2-p290 :011 > Resque.info
 => {:pending=>4, :processed=>0, :queues=>1, :workers=>0, :working=>0, :failed=>0, :servers=>["redis://127.0.0.1:6379/0"], :environment=>"development"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:27:00.580

例如，如果您有一个名为 SiteMailer 的邮件程序，上面有一个方法thankyou_email，您可以将其推送到 resque：

```
SiteMailer.enqueue.thankyou_email(*args) 
```

而且如果需要实时发送，依然可以使用

`SiteMailer.thankyou_email(*args).deliver.`

# jquery - 防止关注标签

> ID：12128045
> 
> 赞同：2
> 
> 时间：2012-08-26T06:19:43.533
> 
> 标签：jquery, html, css

> **可能重复：** [防止 HTML 中的 A 元素（锚链接）上的制表符](https://stackoverflow.com/questions/1561021/prevent-tabstop-on-a-element-anchor-link-in-html)

请参阅此链接第一个[示例布局](http://jsfiddle.net/jrsalunga/fUPSL/)

当我按 TAB 键并自动转到下一个输入时，有谁知道防止访问/关注链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:23:55.013

您需要[`tabindex`](http://www.w3.org/TR/html401/interact/forms.html#h-17.11.1)为元素设置自定义以跳过链接。

# java - google Caliper 示例测试不起作用？

> ID：12128053
> 
> 赞同：4
> 
> 时间：2012-08-26T06:20:49.647
> 
> 标签：java, maven, caliper

我下载了最新的 google caliper 源代码并使用 maven 构建它。现在我正在尝试运行[此处给出的 google caliper 示例测试。](http://code.google.com/p/caliper/source/browse/#git/examples/src/main/java/examples). 我正在使用以下命令来执行测试。

```
java -cp /home/rakesh/programming/refcode/caliper/caliper/target/caliper-1.0-SNAPSHOT.jar  com.google.caliper.Runner examples.StringBuilderBenchmark 
```

但我收到以下错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/google/common/base/Splitter
    at com.google.caliper.Runner.<clinit>(Runner.java:67)
Caused by: java.lang.ClassNotFoundException: com.google.common.base.Splitter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266) 
```

我试图查看 caliper jar 文件，但找不到 com.google.common.base.Splitter 类文件。即使我无法获得 Splitter.java 文件。有人可以建议我在这里缺少什么吗？

**EDIT1：**
我发现 com.google.common.base.Splitter 类存在于 appengine-tools-sdk-1.2.1.jar jar 文件中我在命令中包含了 jar 文件，如下所示。

```
java -cp /home/rakesh/programming/refcode/caliper/caliper/target/caliper-1.0-SNAPSHOT.jar:/home/rakesh/programming/refcode/caliper/examples/appengine-tools-sdk-1.2.1.jar  com.google.caliper.Runner examples.StringBuilderBenchmark 
```

但是错误是相同的，它看起来不像命令正在查看具有 Splitter 类的另一个 jar 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:01:18.430

*我的答案不是真正的答案，但是评论太长了。*

不幸的是，我对 Maven 几乎一无所知。对我有用的是下载 git 存储库并创建 eclipse 项目。这肯定不是一个干净的解决方案，但它很容易，让我可以从库中学习。

什么对我有用：

在我的工作树中，我找到了 pom.xml，切换到该目录并运行`mvn install`. 它在深处的某个地方创建了一些罐子`~/.m2/repository`。由于路径对我的耐心来说太长了，我通过创建了一个符号链接`ln -s ~/.m2/repository/com/google/ .`。我手动编译`StringBuilderBenchmark`并得到了你的错误。

然后我`mvn install`在我的番石榴文件夹中运行，现在正在运行

```
java -cp .:\
./google/caliper/caliper/1.0-SNAPSHOT/caliper-1.0-SNAPSHOT.jar:\
./google/guava/guava/12.0/guava-12.0.jar \
examples/StringBuilderBenchmark 
```

抱怨[gson](http://code.google.com/p/google-gson/)失踪`com/google/gson/JsonParser`。然后你可能需要谷歌仪器，就是这样。

*这肯定不是要走的路。Maven应该照顾好一切，我非常希望它可以。我建议将标签添加`maven`到您的问题中。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T13:26:19.257

我遇到了上述所有错误。下面是修复

`$ export CLASSPATH=/home/deepakkv/projects/poc/benchmarkparquet/target/classes:~/.m2/repository/com/google/caliper/caliper/0.5-rc1/caliper-0.5-rc1.jar:~/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jar:/home/deepakkv/softwares/google-gson-2.2.3/gson-2.2.3.jar`

`$ java com.google.caliper.Runner com.parquet.benchmark.BenchmarkParquetDirectWrites 0% Scenario{vm=java, trial=0, benchmark=TestContains1, length=1} 6.42 ns; σ=0.46 ns @ 10 trials 50% Scenario{vm=java, trial=0, benchmark=TestContains2, length=1} 5.46 ns; σ=0.26 ns @ 10 trials`

基准 ns 线性运行时 TestContains1 6.42 =============================== TestContains2 5.46 ============ ==============

vm：java试用：0长度：1

# c# - 有人可以帮我提供代理列表吗

> ID：12128054
> 
> 赞同：0
> 
> 时间：2012-08-26T06:21:18.180
> 
> 标签：c#

好的，有人说要把我的代理放在一个列表中，这样我就可以为每个请求使用一个新的代理，我将代理保存到一个列表中，但我对从这里去哪里有点困惑

这是我用来生成代理列表的代码，它来自 proxies.txt 文件。

```
 private List<string> getProxyListFromText(string input) {

        List<string> list = new List<string>();
        StreamReader reader = new StreamReader(input);
        string item = "";
        while (item != null)
        {
            item = reader.ReadLine();
            if (item != null)
            {
                list.Add(item);                

            }

        }
        reader.Close();          
        return list;

    } 
```

好的，这是请求，每个请求都应该从列表中检索不同的代理。

想象一个循环遍历名称列表的 for 循环，每个名称带来一个不同的请求，每个请求都应该有自己的代理，代理列表已经在上面的代码中生成，只需要一种方法我可以从列表。

```
 for (int i = 0; i < listBox1.Items.Count; i++)
        {

    object url;
                    WebClient wc;
                    url = getppl;
                    wc = new WebClient();

                //This should come from the proxy list
                wc.Proxy = new WebProxy(getProxyListFromText("Proxies.txt"));

                    var page = wc.DownloadString(url.ToString());
                    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
                    doc.LoadHtml(page);
                    var pplname = doc.DocumentNode.SelectNodes("/html/body/div[3]/div/div[2]/div[2]/div/div[4]/p");
     } 
```

我尝试了一个嵌套的 for 循环，但逻辑被束缚在某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:18:03.043

Change to:-

```
foreach(string prox in getProxyListFromText("Proxies.txt"))
{
 ...
 wc.Proxy = new WebProxy(prox);
 ...
} 
```

# algorithm - 最小功耗算法

> ID：12128056
> 
> 赞同：1
> 
> 时间：2012-08-26T06:21:39.640
> 
> 标签：algorithm, dynamic-programming, greedy

给定一个可以建模为有根树的逻辑电路——叶子是主要输入，内部节点是门，根是电路的单个输出。每个门可以由高或低电源电压供电。由较低电源电压供电的门消耗较少的功率，但输出信号较弱。您希望在确保电路可靠的同时最大限度地降低功耗。为确保可靠性，不应让一个由低电源电压供电的门驱动另一个由低电源电压供电的门。所有栅极在连接到低电源电压时消耗 1 纳瓦，在连接到高电源电压时消耗 2 纳瓦。

设计一种有效的算法，将逻辑电路作为输入并为每个门选择电源电压，以最大限度地降低功耗，同时确保可靠运行。

在这个问题中，我认为，它可以通过使用贪婪或动态来解决。但是我很困惑从哪里开始思考这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:08:23.687

从“你不应该让一个由低电源电压供电的门驱动另一个由低电源电压供电的门”的要求，我们知道我们的任务是在树中找到一个最大的独立集（也许减去叶子，我不知道） '不知道他们是否被认为是有动力的）。

虽然这个问题对于一般图来说是 NP-hard，但对于树来说，它可以快速有效地解决。您可以阅读这篇[简单的 3 页文章](http://ccrcweb.cs.nthu.edu.tw/~sheujp/public/journal/3.pdf)了解详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:15:38.657

You need to find a maximum independent set of the tree, while the points belong to the independent set have low supply voltage. Besides dynamic programming, there is a very simple linear greedy algorithm:

1.  Choosing all the leaves (the gates which are not drove by other gates) as low voltage.
2.  Delete all the leaves and their direct fathers.
3.  Now some internal nodes become the new leaves. Repeat to 1 until all the nodes are processed.

# c# - 是否可以在 c# 中包装一些代码而不是使用注释

> ID：12128057
> 
> 赞同：1
> 
> 时间：2012-08-26T06:21:44.523
> 
> 标签：c#, visual-studio-2008, comments

我是 C# 编程新手，我已经开始开发一个大约 500 行的项目。我声明了许多函数和变量，并且我在代码附近使用注释来轻松识别代码块，例如：

```
//code for login button
private void button1_Click(object sender, EventArgs e)
{
} 
```

但这对我来说有点困难。Visual Studio 2008 中是否有任何其他方法可以使我的代码易于识别和阅读？请帮助...谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T06:22:55.663

你应该使用`#region`这个。

`#region`允许您指定可以展开或折叠的代码块。当您想打包代码并为其命名时，这是一个不错的选择。

```
#region My wrapped code  
public class Sample   
{  
  static void Main()   
  {  
  }  
}  
#endregion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:00:13.463

您也可以使用大纲功能。选择要隐藏的代码，右键单击它并选择“大纲”-“隐藏选择”（Ctrl + M，Ctrl + H）。与区域相同的结果，但没有它们。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-26T06:23:12.863

只需输入`///`;-)

你也可以用`/* bla bla bla */`，这是经典的多行注释

# ruby - 如何使用ruby将hash标签制作成html链接

> ID：12128060
> 
> 赞同：-3
> 
> 时间：2012-08-26T06:22:12.957
> 
> 标签：ruby

给定一个带有哈希标签的字符串，我如何得到一个所有哈希标签都用 html 锚标签包裹的新字符串？

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:10:48.537

使用`twitter-text`gem 提取哈希并链接它们

[https://github.com/twitter/twitter-text-rb](https://github.com/twitter/twitter-text-rb)

`auto_link_hashtags`方法是您正在寻找的，他们有更多的看看

在项目中包含 gem 后来自 rails 控制台的示例

```
1.9.3p194 :004 > include Twitter::Autolink
 => Object 

1.9.3p194 :007 > auto_link_hashtags " #goohh" , :hashtag_url_base => "http://xyzzcac.com/hash/"
 #=> " <a class=\"tweet-url hashtag\" href=\"http://xyzzcac.com/hash/goohh\" rel=\"nofollow\" title=\"#goohh\">#goohh</a>" 
```

# java - 使用泛型的选择排序

> ID：12128066
> 
> 赞同：0
> 
> 时间：2012-08-26T06:23:04.127
> 
> 标签：java, generics, primitive

我对整数进行了选择排序并且它正在工作，当我尝试修改程序以使用泛型时，编译器抱怨并且我不知道如何修复它。如果有人能指出一些提示和建设性意见，我将不胜感激。这是代码。

```
public class SelelctionSort 
{
    public static void main(String[] args) 
    {
        int[] list = {34, 17, 23, 35, 45, 9, 1};
        System.out.println("Original Array: ");
        printArray(list);

        selectionSort(list);
        System.out.println("\nSelection sort:");
        printArray(list);

    }

    //selection sort
    public static <E extends Comparable<E>> void selectionSort(E[] list)
    {
        for(int i=0; i<list.length -1; i++)
        {
            int iSmallest = i;

            for(int j=i+1; j<list.length; j++)
            {
                if(list[iSmallest].compareTo((list[j])) > 0  )
                {
                    iSmallest = j;
                }
            }
            E iSwap = list[iSmallest];
            list[iSmallest] = list[i];
            list[i] = iSwap;

        }
    }

    public static <E> void printArray(E[] list)
    {

        for(int i=0; i<list.length; i++)
        {
            System.out.print(list[i] + ", ");
        }
    }
} 
```

以下是`javac`吐出来的。

> ```
> SelelctionSort.java:7: error: method printArray in class SelelctionSort cannot be applied to given types;
>         printArray(list);
>         ^
>   required: E[]
>   found: int[]
>   reason: inferred type does not conform to declared bound(s)
>     inferred: int
>     bound(s): Object
>   where E is a type-variable:
>     E extends Object declared in method <E>printArray(E[])
> SelelctionSort.java:9: error: method selectionSort in class SelelctionSort cannot be applied to given types;
>         selectionSort(list);
>         ^
>   required: E[]
>   found: int[]
>   reason: inferred type does not conform to declared bound(s)
>     inferred: int
>     bound(s): Comparable<int>
>   where E is a type-variable:
>     E extends Comparable<E> declared in method <E>selectionSort(E[])
> SelelctionSort.java:11: error: method printArray in class SelelctionSort cannot be applied to given types;
>         printArray(list);
>         ^
>   required: E[]
>   found: int[]
>   reason: inferred type does not conform to declared bound(s)
>     inferred: int
>     bound(s): Object
>   where E is a type-variable:
>     E extends Object declared in method <E>printArray(E[]) 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T06:29:04.333

```
int[] list = {34, 17, 23, 35, 45, 9, 1};
...
selectionSort(list); 
```

您正在尝试调用`selectionSort()`which signature is `selectionSort(E[])`，但`int`不扩展`Comparable`（它是[原始](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的，甚至不是对象） - 因此类型不匹配。

您可以尝试创建`Integer[]`并传递它。[`Integer`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html)是一个对象，它扩展了`Comparable<Integer>`.
另一种方法是**重载** `selectionSort()`以接受对象的泛型类型并为每个所需的原语重载它。这是 java 用于其[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)方法的解决方案。

这同样适用于`printArray()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:37:18.520

如上所述，您使用`selectionSort(E[])`where E extends Comparable means ，您的选择排序可以采用实现 Comparable 接口的参数。由于 int 是原始数据，因此它给出了编译错误。因此，如果您想要通用功能，那么您可以使用 Wrapper 类，所有 wrapper 类都实现了 Comparable 接口。下面的代码将起作用，只需编辑代码的版本

```
public class SelelctionSort 
{
public static void main(String[] args) 
{
    Integer[] list = {34, 17, 23, 35, 45, 9, 1};
    System.out.println("Original Array: ");
    printArray(list);

    selectionSort(list);
    System.out.println("\nSelection sort:");
    printArray(list);
    Float[] flist = {34.4f, 17.6f, 23.0f};
    selectionSort(list);
}

//selection sort
public static <E extends Comparable<E>> void selectionSort(E[] list)
{
    for(int i=0; i<list.length -1; i++)
    {
        int iSmallest = i;

        for(int j=i+1; j<list.length; j++)
        {
            if(list[iSmallest].compareTo((list[j])) > 0  )
            {
                iSmallest = j;
            }
        }
        E iSwap = list[iSmallest];
        list[iSmallest] = list[i];
        list[i] = iSwap;

    }
}

public static <E> void printArray(E[] list)
{

    for(int i=0; i<list.length; i++)
    {
        System.out.print(list[i] + ", ");
    }
}
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-15T11:36:12.590

它确实有效这个解决方案正在处理所有类型的变量，并且当我传递字符串变量时它显示错误

# javascript - 如何使用 JavaScript / jQuery 选择图像的多边形区域？

> ID：12128073
> 
> 赞同：10
> 
> 时间：2012-08-26T06:24:47.433
> 
> 标签：javascript, jquery, html, html5-canvas

我希望能够让我的用户选择他们上传的图像的特定多边形（点之间有曲线的 6-8 个顶点）区域 - 我该如何使用 HTML5 和 JS 来执行此操作？我发现的唯一库允许纯矩形选择： http: [//odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T13:33:03.620

已经有一个库可以满足您的部分需要：[polyclip.js，Zoltan Dulac](http://www.useragentman.com/blog/2011/10/29/clipping-jpeg-images-into-non-rectangular-polygons-using-polyclip-js/)您可以构建一个允许用户选择点的 UI，然后将数据提供给库，然后就完成了。

编辑：这是一个[jsFiddle 演示](https://jsfiddle.net/vvzcnb2g/)。单击以选择原始图像上的点，然后按“生成”按钮生成裁剪版本。

**HTML**：

```
<div id="mainContent">
    <div id="canvasDiv">
        <br/>
        <button id="generate" type="button">Generate
        </button> 
    </div>
    <h1>Result:</h1>
    <div class="clipParent" style="float:left;"> 
    </div> 
</div> 
```

**JS**：

```
var canvasDiv = document.getElementById('canvasDiv'); 
canvas = document.createElement('canvas'); 
canvas.setAttribute('width', 500); 
canvas.setAttribute('height', 500); 
canvas.setAttribute('id', 'canvas'); 
$(canvasDiv).prepend(canvas); 
if(typeof G_vmlCanvasManager != 'undefined') { 
    canvas = G_vmlCanvasManager.initElement(canvas); 
} 

var context = canvas.getContext('2d'); 
var imageObj = new Image(); 

imageObj.onload = function() {
    $(canvas).attr({width : this.width, height: this.height});
    context.drawImage(imageObj,0,0); 
}; 
imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg'; 

var clickX = new Array(); 
var clickY = new Array(); 
var clickDrag = new Array(); 
var paint; 

function addClick(x, y, dragging) 
{ 
    clickX.push(x); 
    clickY.push(y); 
    clickDrag.push(dragging); 
} 

function redraw(){ 
    canvas.width = canvas.width; // Clears the canvas 
    context.drawImage(imageObj,0,0); 

    context.strokeStyle = "#df4b26"; 
    context.lineJoin = "round"; 
    context.lineWidth = 5; 

    for(var i=0; i < clickX.length; i++) 
    { 
    context.beginPath(); 
    context.arc(clickX[i], clickY[i], 3, 0, 2 * Math.PI, false); 
    context.fillStyle = '#ffffff'; 
    context.fill(); 
    context.lineWidth = 5; 
    context.stroke(); 
    } 
} 

$('#canvas').click(function(e){ 
    var mouseX = e.pageX - this.offsetLeft; 
    var mouseY = e.pageY - this.offsetTop; 

    addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop); 
    redraw(); 
}); 

$('#generate').click(function(){ 
    $(".clipParent").empty(); 
    $(".clipParent").prepend('<img src="http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg" id="genimg" />'); 
    var arr = []; 
    for(var i=0; i < clickX.length; i++){ 
        arr.push(clickX[i]); 
        arr.push(clickY[i]); 
    } 
    $("#genimg")[0].setAttribute("data-polyclip",arr.join(", ")); 
    clickX=[]; 
    clickY=[]; 
    redraw(); 
    polyClip.init(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:38:55.790

您可以将图像加载到画布标签上，然后您可以在该画布上进行所有您喜欢的绘图。

# mysql - Mysql：计数，分组，但返回所有结果

> ID：12128077
> 
> 赞同：0
> 
> 时间：2012-08-26T06:25:16.680
> 
> 标签：mysql, performance, count, group-by, query-optimization

我有一个包含字段的表：

```
id | color | other fields....

1    red
2    blue
3    green
4    green
5    red
6    blue 
```

颜色是枚举（红色，蓝色，绿色）。

我想要的是按颜色排序的结果列表，并且还想知道红色/蓝色/绿色元素的计数。

因此，从上表中，我想要以下信息：

1红5红2蓝6蓝3绿4绿

并希望计数为 RED=2, BLUE=2, GREEN=2

如果我使用 GROUP BY 颜色，我只会得到 3 行。

我当然可以在外部单独循环计数或使用 2 个不同的查询。但是，任何在单个查询中以最佳方式执行此操作的方法都将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:30:06.147

```
SELECT  c.*, ColorCounts.ColorCount
FROM    colors AS c
INNER JOIN  (
            SELECT color, COUNT(*) AS ColorCount
            FROM colors
            GROUP BY color
            ) AS ColorCounts
        ON  ColorCounts.color = c.color
ORDER BY c.color, c.id 
```

# css - 背景显示在IE9的边框右侧

> ID：12128078
> 
> 赞同：0
> 
> 时间：2012-08-26T06:25:27.423
> 
> 标签：css, internet-explorer-9, right-to-left

我有一个 div`background-color`和一个 3 像素的白色边框。

当我将`html`元素设置为`direction:rtl`and`overflow-y: scroll`时，我会在边框右侧获得一个背景像素 - 仅在 IE9 中：

![在此处输入图像描述](../Images/3e7791478e731892337157d36a81ff26.png)

我在这里粘贴我的代码，因为在 JsFiddle 上我无法复制该错误。

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style>
            html {
                overflow-y: scroll;
                direction:rtl;
            }
            .main {
              margin: 0 auto;
              width: 960px;
            }
            .sld-menu-item {
                height: 85px;
                border: 3px solid #fff; 
                background-color: #d25188;
            }
    </style>
</head>
<body>
    <div class="main" role="main">
        <div class="sld-menu-item sld-menu-item-2">
        </div>
    </div>
</body> 
```

有没有人遇到过这个问题，和/或有人可以提出解决方案吗？我不能放弃滚动和 rtl 规则...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:24:08.250

我用头撞墙了几个小时，最后我用一种很奇怪的方式解决了它......将.main的宽度更改为961px，似乎微软不知道如何找到一个“中间”均匀范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:58:34.960

我只能通过设置溢出来修复它：隐藏在包含元素上并进行负边距黑客攻击：

```
.main {
    overflow: hidden;
}
.sld-menu-item {
    margin-right: -1px;
} 
```

您可能还想将 sld-menu-item 的宽度设置为 961px。大概可以把它放在一个 IE9 条件语句中。我希望有更好的方法来解决这个问题。

# php - 为什么 php 显示我的 SQL 查询错误

> ID：12128091
> 
> 赞同：-2
> 
> 时间：2012-08-26T06:27:32.683
> 
> 标签：php, mysql

更新：我的错误 - 我打错了。不用管这个问题。

我正在使用 php 更新 mysql 数据库。我在执行之前在我的网页上打印出来时使用的结果查询如下：

```
INSERT INTO perch2_content_items
(itemOrder, regionID, pageID, itemRev, itemID, itemJSON, itemSearch ) 
SELECT MAX(itemOrder)+1, 105, 81, 11, 118, 'json', 'search' 
FROM perch2_content_items WHERE regionID=105 
```

当我将此查询直接复制并粘贴到 phpmyadmin SQL 界面中时，它工作正常。表得到更新。但是，当我尝试使用我的 php 代码执行它时，它会引发错误。

```
$insertToPerch = "INSERT INTO perch2_content_items
(itemOrder, regionID, pageID, itemRev, itemID, itemJSON, itemSearch ) 
SELECT MAX(itemOrder)+1, $regionID, $pageID, 
$regionRev, $newItemID, 'json', 'search'
FROM perch2_content_items WHERE regionID=$regionID";
mysql_query(insertToPerch) or die(mysql_error()); 
```

我得到的错误是：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“insertToPerch”附近使用正确的语法

任何人都可以帮我弄清楚为什么它失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T06:30:09.220

你需要`mysql_query($insertToPerch)`没有`$`它只是字符串`'insertToPerch'`

# c# - 如何在 C# 中获得这种风格的按钮？

> ID：12128093
> 
> 赞同：2
> 
> 时间：2012-08-26T06:28:00.347
> 
> 标签：c#, button, visual-studio-2005

在旧产品中，我们使用 Sheridan 控件来生成如下所示的按钮：

![在此处输入图像描述](../Images/0cf0168988db6368a05f665a536ab9c6.png)

使用 VS2005 在 C# 中可以使用这种样式的按钮吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T12:48:44.210

按钮查看 GUI 开发历史的方式受到机器功能的严重影响。这一切都始于八十年代后期的简单矩形，那时操作系统是 16 位，视频适配器只能显示 16 种颜色。3-D 风格在九十年代开始流行，Sheridan 是早期的先驱并被广泛复制。Threed.ocx 是一个用于获得这种样式的 Microsoft 库。由具有 256 种颜色的视频适配器和足够的马力绘制斜边提供支持。它的一些残余通过 BorderStyle 属性保留在 Winforms 中。

到 2000 年代初 Winforms 开始时，视频适配器可以显示 1600 万种颜色，精细的渐变成为时尚。在 Winforms 按钮的默认样式以及 ToolStrip 和 StatusBar 等控件中清晰可见。和 Windows 视觉风格主题。这种样式的一个显着缺点是它不能轻易被覆盖。Winforms 有四个不同的按钮渲染器（注意 FlatStyle 属性），它们都是不能被覆盖的私有类。它们太复杂了，不容易暴露。

这已经完成了一个完整的循环，我们现在回到简单的平面矩形。WPF 按钮的默认样式和 Windows 8 中的 Metro 主题非常明显。不再受机器功能的影响，但（可能）受 CSS 的限制，CSS 是用于为网页提供样式的语言。Winforms 也通过 FlatStyle 和 FlatAppearance 属性支持它。

尝试恢复 3-D 样式并不容易，您必须从头开始创建一个自定义按钮控件，并将 ButtonBase 作为基类。并覆盖 OnPaint() 以按照您想要的方式绘制按钮。您是否应该尝试一下是非常值得怀疑的，3-D 风格肯定已经过时，并且与停止维护的旧程序密切相关。不是您在新程序中想要的那种关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:53:46.193

如果您想要完全一样的按钮，您是否考虑过为按钮使用图像？这样，您只需简单地拍摄该样式的图像并将其制成按钮即可。您可以获得按钮的所有功能，但您也可以让它看起来像您想要的那样。

# regex - 查找/替换、排除字符

> ID：12128097
> 
> 赞同：0
> 
> 时间：2012-08-26T06:28:27.507
> 
> 标签：regex, notepad++

类似于[Find and Replace RegEx 问题](https://stackoverflow.com/questions/2806789/find-and-replace-regex-question)

我需要做的就是在两个短语“literal”和“edited [;”之间找到一个字符串，然后用相同的字符串替换，省略所有的“//”。我不认为括号反向引用是我想要的，因为我正在使用的文本文件很大，每个字符串中通常有 3 个，有时最多 10 个“//”。

这个：

```
// --- Literal
//
//At the same time as that, joining in the music
//will be fun, I think.
// --- Edited 
```

应该变成这样：

```
// --- Literal

At the same time as that, joining in the music
will be fun, I think.
// --- Edited 
```

（Notepad++ 不支持其正则表达式中的换行符，但这与问题无关。在实际文本中，我为 \n 进行了查找替换为“nline”。）

这是我到目前为止所拥有的：

```
Find:    // --- Literalnline//(.*?)//(.*?)//(.*?)//(.*?)// --- Edited // \[;
Replace: // --- Literalnline\1\2\3\4// --- Edited // \[; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:12:27.550

一般来说，我不想用正则表达式来做这个，但我还是试了一下：[http ://regex101.com/r/tF6bZ1](http://regex101.com/r/tF6bZ1)

`/\A(\/\/ --- Literal)[\r\n]+|(\/\/ --- Edited)\z|\/\/(.*[\r\n]*)/gi`

这不会进行任何类型的任何验证，只是直接上下匹配。您应该可以替换为`\1\3\2`或此类。

祝你好运！

# android - android中的Tabview ..？

> ID：12128108
> 
> 赞同：1
> 
> 时间：2012-08-26T06:30:07.080
> 
> 标签：android, android-tabhost, tabwidget, android-tabactivity, android-tabs

我正在开发一个应用程序，我在其中使用带有 2 个选项卡视图的 tabwidget。当应用程序在屏幕上可见时，在第一个选项卡中，一些数据需要显示在我从数据库中获取的列表视图中。如果默认情况下列表视图中的数据为空，则需要显示第二个选项卡。 **如果列表为空，则当活动开始时，我想启动另一个选项卡。如果列表不为空，则需要显示当前选项卡。** 下图提供了有关我的问题的更多详细信息。

![列表视图为空的第一个选项卡](../Images/95c24732d17bec132034417654b5fa75.png)

![第二个标签](../Images/89512c9ab45d56e757a94796bde9cea0.png)

这里根据上面的图像，当用户第一次看到应用程序时，数据将为空。所以，我想显示 AddGroup 选项卡来添加组。**如果组选项卡中的列表为空，如何专注于添加组选项卡...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T06:50:11.643

设置当前查看的选项卡可以通过

```
myTabHost.setCurrentTab(tabPos); 
```

你如何获得这个 TabHost 对象取决于你在哪里初始化列表：如果它是在父活动中完成的（它扩展了 TabActivity），你可以使用

getTabHost().setCurrentTab(tabPos);

如果您需要从另一个活动内部访问 TabHost（即，当您的选项卡是活动时）或视图实现（在 ListView 内部），请向您的父活动添加一个方法，该方法可以由其中的类或具有对它的引用。把这个

```
public void switchTab(int tabPos){
    getTabHost().setCurrentTab(tabPos);
} 
```

在父活动中，然后使用某种形式

```
((MyParentTabActivity) MyChildTabActivity.this.getParent()).switchTab(1); 
```

访问它，具体取决于您要从哪里切换它。

# php - 使用文本区域注入 CSS？

> ID：12128110
> 
> 赞同：0
> 
> 时间：2012-08-26T06:30:27.320
> 
> 标签：php, html

有没有办法将粘贴到文本区域的 CSS 注入/附加到页面的头部？我正在为应用程序制作设置页面，我想通过将 CSS 添加到文本区域然后单击保存来允许主题和更改小事的选项。

其他选项：是否可以让 textarea 显示一个名为“theme.css”的文件，然后所做的任何更改都将保存为该文件。要完全更改主题，只需将新主题直接复制/粘贴到文本框中即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T06:43:45.080

如果你使用 jquery，你可以这样做

```
<script>
$("head").append("<style>body {background:blue;}</style>");
</script> 
```

作为另一种选择

您可以使用 读取 theme.css 文件`fread`，将其显示在 textarea 中并使用 将其保存到文件中`fwrite`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:12:58.487

类似的东西？

```
<!doctype html>
<html>
<head>
<script type='text/javascript'>
    function addStyle(css){
        var stl = document.createElement('style');
        stl.innerHTML = css;
        document.getElementsByTagName('head')[0].appendChild(stl);
    }
</script>
</head>
<body>
<p>Paragraph To Test<p>
<textarea id="txtarea">p{color:red;}</textarea>
<input type="button" value="Set Style" onclick="addStyle(txtarea.value);">
</body>
</html> 
```

# linq - Linq，强制一个项目是第一个？

> ID：12128116
> 
> 赞同：1
> 
> 时间：2012-08-26T06:31:53.630
> 
> 标签：linq

我有一个 MyPersonObjects 的 List<>。该列表是我可以分配某些东西的人的列表。在此列表中，我包括我自己（因为任务可以分配给我 - 通常是）。

所以，我想确保自己在列表的顶部。我知道我的 personId，这是我的 person 对象的一个​​属性 - 所以有没有办法对列表进行排序，以确保我是第一个，然后是其余的，按姓氏字母顺序排列（这是我的对象的另一个属性）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T06:50:21.550

您可以通过两个单独的标准对列表进行`OrderBy`排序，如果值相等（除您之外的所有人），则将是主要的排序顺序`ThenBy`。

```
personList.OrderBy(x => x.Id == myId ? 0 : 1)
           .ThenBy(x => x.Surname); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T06:38:51.157

一种方法是使用 Linq 按姓氏对列表进行排序，然后将自己删除并放回第一位：

```
var personList = db.MyPersonObjects.OrderBy(p => p.Surname).ToList();
var myself = personList.Single(p => p.Id == myselfId);
personList.Remove(myself);
personList.Insert(0, myself); 
```

或者创建一个自定义比较器`IComparer<MyPersonObject>`，其中的实现类似于：

```
public class PersonCompaper : IComparer<MyPersonObject>
{
    private readonly int personId;

    public PersonCompaper(int personId)
    {
        this.personId = personId;
    }

    public int Compare(MyPersonObject x, MyPersonObject y)
    {
        if (x.Id == personId && y.Id == personId)
           return 0;
        if (x.Id == personId)
            return 1;
        if (y.Id == personId)
            return -1;            
        return string.Compare(x.Surname, y.Surname);
    }
} 
```

然后你在 OrderBy 中使用它

```
db.MyPersonObjects.OrderBy(p => p, new PersonCompaper(myselfId)) 
```

# object - 发布打开图形动作时如何自定义对象的标题链接？

> ID：12128118
> 
> 赞同：0
> 
> 时间：2012-08-26T06:32:17.537
> 
> 标签：object, facebook-opengraph

我已成功在 FB Open Graph 上发布了一个带有对象的操作。对象包括图片、标题（是一个链接）和描述。当我单击标题链接时，它会从我的 Web 服务器转到包含所有元标记数据的页面。

我的问题是如何自定义此链接以打开我的 facebook 应用程序而不是打开对象网页。

我看过很多开放的图表内容。当我单击对象标题时，它会要求我安装应用程序。我只想做同样的事情。

刚开始做facebook整合。这可能是一个太简单的问题，但如果你能提供帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:32:12.210

Go to your Facebook App Dashboard:

[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)/summary

If your app is iOS, fill out the Native iOS App settings:

*   Bundle ID: Your bundle ID
*   Facebook Login: Enabled
*   Deep Linking: Enabled

For more details, see: [https://developers.facebook.com/docs/howtos/link-to-your-native-app-ios-sdk/](https://developers.facebook.com/docs/howtos/link-to-your-native-app-ios-sdk/)

If your app is Android, fill out the Native Android App settings:

*   Package Name: Your launching activity's package
*   Class Name: Your launching activity's class (full class name)
*   Facebook Login: Enabled
*   Deep Linking: Enabled

For more details, see: [https://developers.facebook.com/docs/howtos/androidsdk/3.0/link-to-your-native-app/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/link-to-your-native-app/)

# c# - 一次运行一个动画

> ID：12128119
> 
> 赞同：1
> 
> 时间：2012-08-26T06:32:42.623
> 
> 标签：c#, wpf, wpf-controls

我正在学习 c# 和 wpf。我有在 Visual Studio 2012 中运行的项目。为了更好地学习 C# 和 WPF，我正在制作一个练习应用程序，它恰好是 Simon Says 游戏。我有两个窗户。第一个窗口有一个“PLAY！” 显示下一个窗口的按钮。此窗口有 4 个按钮。我有一个整数数组，因此玩家必须按顺序按下按钮。为了向玩家显示顺序，我想按照数组中生成的顺序一个一个地为每个按钮设置动画。

这些按钮有 4 种不同的颜色，每个按钮的动画都是我用 Blend 中的 Storyboard 制作的。动画将按钮从其原始颜色变为红色，然后在两秒内返回。

动画正常工作，但所有按钮同时动画。我希望第一个按钮动画，然后当它完成时，下一个，依此类推。我将如何最好地使用 C# 和 WPF 来做到这一点。谢谢您的帮助。如果需要，我可以上传代码。

运行动画的函数

```
public void startbtn_Click(object sender, RoutedEventArgs e)
{
    // Show the animation sequence for each button
    // up until the current level. (getCurrentLevel is currently set to 5)
    for (int i = 0; i <= engine.getCurrentLevel(); i++)
    {
        // engine.animate(i) returns the button at sequence i to animate
        animate(engine.animate(i));
    }
}

private void animate(int index)
{
    // Storyboard for each button is in the format of ButtonAnimation_INDEX where INDEX is 1, 2, 3 or 4
    Storyboard btnAnimation = (Storyboard)this.Resources["ButtonAnimation_" + index];
    if (btnAnimation != null)
    {
        btnAnimation.Begin();   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:10:16.983

我使用 Completed 事件解决了这个问题。我现在有功能检查当前序列是否低于当前水平。如果是，则意味着可以为另一个按钮设置动画。所以完成的事件再次使用下一个按钮运行该函数以进行动画处理。

```
public void startbtn_Click(object sender, RoutedEventArgs e)
{
    engine.resetSequence(); // Start from sequence 0
    // Animate first button
    animate(engine.animate()); 
}

private void animate(int index)
{

    // Storyboard for each button is in the format of ButtonAnimation_INDEX where INDEX is 1, 2, 3 or 4
       Storyboard btnAnimation = (Storyboard)this.Resources["ButtonAnimation_" + index];
       // Added completed event function handler
       btnAnimation.Completed += btnAnimation_Completed;
       if (btnAnimation != null)
       {
           btnAnimation.Begin();   
        }
}

void btnAnimation_Completed(object sender, EventArgs e)
{
     // If another button can be animated in the sequence
     if (engine.CurrentSequence() < engine.getCurrentLevel())
     {
         // Increment the sequence position
         engine.nextSequence();
         // Run the animation with the next button
         animate(engine.animate());
     }
} 
```

# android - 如何在通知区域显示进度条？

> ID：12128121
> 
> 赞同：6
> 
> 时间：2012-08-26T06:32:44.457
> 
> 标签：android, notifications, progress-bar

嗨，我正在做一个 android 应用程序，其中我将视频上传到 PHP 服务器。
我`HTTPURLConnection`用来做上传。Iam 在通知区域显示进度条并对其进行更新感到震惊。
我正在搜索将近一个星期来做到这一点。但无法得到提示。如果有人知道，请帮助我：

我的代码：

```
HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        int bytesRead;
        byte[] buffer;
        String urlString = "http://xxxxx/My_path.php";
        try {
            long total = 0;
            int count = 0;
            // ------------------ CLIENT REQUEST
            UUID uniqueKey = UUID.randomUUID();
            fname = uniqueKey.toString();
            Log.e("UNIQUE NAME", fname);
            FileInputStream fileInputStream = new FileInputStream(
                    new File(selectedPath));
            URL url = new URL(urlString);                       
            conn = (HttpURLConnection) url.openConnection();
            int length=selectedPath.length();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);
            dos = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                    + fname + "" + lineEnd);
            dos.writeBytes(lineEnd);
            buffer = new byte[8192];
            bytesRead = 0;
            while ((bytesRead = fileInputStream.read(buffer)) > 0) {                                 
                dos.write(buffer, 0, bytesRead);                    
            }           
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);           
            Log.e("Debug", "File is written");
            fileInputStream.close();
            dos.flush();
            dos.close();

        } catch (MalformedURLException ex) {
            Log.e("Debug", "error: " + ex.getMessage(), ex);
        } catch (IOException ioe) {
            Log.e("Debug", "error: " + ioe.getMessage(), ioe);
        }       
        // ------------------ read the SERVER RESPONSE
        try {
            inStream = new DataInputStream(conn.getInputStream());
            String str;
            while ((str = inStream.readLine()) != null) {
                Log.e("Debug", "Server Response " + str);
            }
            inStream.close();

        } catch (IOException ioex) {
            Log.e("Debug", "error: " + ioex.getMessage(), ioex);
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T12:06:02.903

经过长时间的搜索，我完成了在通知区域显示进度条的任务。我们需要的是。`asynctask`可能是我在这里显示的代码不能完美运行，在我测试时它工作正常。如果有效，请检查并投票赞成这个答案好的。

我的代码：

```
public class loadVideo extends AsyncTask<Void, Integer, Void> {

        int progress = 0;
        Notification notification;
        NotificationManager notificationManager;
        int id = 10;

        protected void onPreExecute() {

        }

        @Override
        protected Void doInBackground(Void... params) {
            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary = "*****";
            int bytesRead;
            int sentData = 0;               
            byte[] buffer;
            String urlString = "http://xxxxx/xxx/xxxxxx.php";
            try {
                UUID uniqueKey = UUID.randomUUID();
                fname = uniqueKey.toString();
                Log.e("UNIQUE NAME", fname);
                FileInputStream fileInputStream = new FileInputStream(new File(
                        selectedPath));
                int length = fileInputStream.available();
                URL url = new URL(urlString);
                conn = (HttpURLConnection) url.openConnection();
                conn.setDoInput(true);
                conn.setDoOutput(true);
                conn.setUseCaches(false);
                conn.setRequestMethod("POST");
                conn.setRequestProperty("Connection", "Keep-Alive");
                conn.setRequestProperty("Content-Type",
                        "multipart/form-data;boundary=" + boundary);
                dos = new DataOutputStream(conn.getOutputStream());
                dos.writeBytes(twoHyphens + boundary + lineEnd);
                dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                        + fname + "" + lineEnd);
                dos.writeBytes(lineEnd);
                buffer = new byte[8192];
                bytesRead = 0;
                while ((bytesRead = fileInputStream.read(buffer)) > 0) {
                    dos.write(buffer, 0, bytesRead);
                    sentData += bytesRead;
                    int progress = (int) ((sentData / (float) length) * 100);
                    publishProgress(progress);
                }
                dos.writeBytes(lineEnd);
                dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
                Log.e("Debug", "File is written");
                fileInputStream.close();
                dos.flush();
                dos.close();

            } catch (MalformedURLException ex) {
                Log.e("Debug", "error: " + ex.getMessage(), ex);
            } catch (IOException ioe) {
                Log.e("Debug", "error: " + ioe.getMessage(), ioe);
            }
            // ------------------ read the SERVER RESPONSE
            try {
                inStream = new DataInputStream(conn.getInputStream());
                String str;
                while ((str = inStream.readLine()) != null) {
                    Log.e("Debug", "Server Response " + str);
                }
                inStream.close();

            } catch (IOException ioex) {
                Log.e("Debug", "error: " + ioex.getMessage(), ioex);
            }

            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {

            Intent intent = new Intent();
            final PendingIntent pendingIntent = PendingIntent.getActivity(
                    getApplicationContext(), 0, intent, 0);
            notification = new Notification(R.drawable.video_upload,
                    "Uploading file", System.currentTimeMillis());
            notification.flags = notification.flags
                    | Notification.FLAG_ONGOING_EVENT;
            notification.contentView = new RemoteViews(getApplicationContext()
                    .getPackageName(), R.layout.upload_progress_bar);
            notification.contentIntent = pendingIntent;
            notification.contentView.setImageViewResource(R.id.status_icon,
                    R.drawable.video_upload);
            notification.contentView.setTextViewText(R.id.status_text,
                    "Uploading...");
            notification.contentView.setProgressBar(R.id.progressBar1, 100,
                    progress[0], false);
            getApplicationContext();
            notificationManager = (NotificationManager) getApplicationContext()
                    .getSystemService(Context.NOTIFICATION_SERVICE);
            notificationManager.notify(id, notification);
        }

        protected void onPostExecute(Void result) {
            Notification notification = new Notification();
            Intent intent1 = new Intent(MultiThreadActivity.this,
                    MultiThreadActivity.class);
            final PendingIntent pendingIntent = PendingIntent.getActivity(
                    getApplicationContext(), 0, intent1, 0);
            int icon = R.drawable.check_16; // icon from resources
            CharSequence tickerText = "Video Uploaded Successfully"; // ticker-text
            CharSequence contentTitle = getResources().getString(
                    R.string.app_name); // expanded message
            // title
            CharSequence contentText = "Video Uploaded Successfully"; // expanded
                                                                        // message
            long when = System.currentTimeMillis(); // notification time
            Context context = getApplicationContext(); // application
                                                        // Context
            notification = new Notification(icon, tickerText, when);
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notification.setLatestEventInfo(context, contentTitle, contentText,
                    pendingIntent);
            String notificationService = Context.NOTIFICATION_SERVICE;
            notificationManager = (NotificationManager) context
                    .getSystemService(notificationService);
            notificationManager.notify(id, notification);
        }
    } 
```

感谢和问候桑达尔。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-28T21:20:36.157

使用更简单的方法**`setProgress`**：

```
public class loadVideo extends AsyncTask<Void, Integer, Void> {

        int progress = 0;
        NotificationCompat.Builder notificationBuilder;
        NotificationManager notificationManager;
        int id = 10;

        protected void onPreExecute() {
            //setup notification
            notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            notificationBuilder  = new NotificationCompat.Builder(getApplicationContext())
                  .setPriority(Notification.PRIORITY_MAX)
                  .setProgress(100,0,false)
                  .setContentTitle("Uploading Video")
                  .setSmallIcon(R.mipmap.ic_launcher)
                  .setContentIntent(pendingIntent)
                  .setAutoCancel(true);

            notificationManager.notify(id,notificationBuilder.build());
        }

        @Override
        protected Void doInBackground(Void... params) {
            //do whatever here
            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {
          ...
            notificationBuilder.setContentText(""+intProgress+"%");
            notificationBuilder.setProgress(100, intProgress,false);
            notificationManager.notify(id, notificationBuilder.build());
        }

        protected void onPostExecute(Void result) {
            ...
            notificationBuilder.setContentText("Upload Complete");
            notificationManager.notify(1, notificationBuilder.build());
            //continue conquering the world here...
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T06:41:45.250

在 RemoveView 中，您可以更新进度条。所以结合一些示例代码，我得到了这样的东西：

```
public class MyActivity extends Activity {
private static final int PROGRESS = 0x1;
private static final int MAX_PROGRESS = 100;

private int mProgressStatus = 0;

private Handler mHandler = new Handler();

protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    //define Notification
    //...

    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.custom_notification_layout);
    contentView.setProgressBar(R.id.progress_bar, MAX_PROGRESS, mProgressStatus, false);
    notification.contentView = contentView;

    // Start file upload in a background thread
    new Thread(new Runnable() {
        public void run() {
            while (mProgressStatus < MAX_PROGRESS) {
                mProgressStatus = doWork();

                // Update the progress bar
                mHandler.post(new Runnable() {
                    public void run() {
                        contentView.setProgressBar(R.id.progress_bar, MAX_PROGRESS, mProgressStatus, false);
                    }
                });
            }
        }
    }).start();
  }
} 
```

这篇[博客文章](http://united-coders.com/nico-heid/show-progressbar-in-notification-area-like-google-does-when-downloading-from-android/)有一个很好的实现相同的例子。希望这可以帮助。

# javascript - $.get 带有动态数据名称？

> ID：12128125
> 
> 赞同：0
> 
> 时间：2012-08-26T06:34:45.820
> 
> 标签：javascript, jquery, ajax

我在尝试设置数据名称或传入的对象时遇到问题。我正在编写一个系统，该系统使用 AJAX 向服务器发送请求，然后返回必要的数据。但是，我试图使事情变得通用，如果开发人员添加更多“slates”，那么它将自动代表它发送请求。代码如下所示：

```
 $(document).ready(function() {
           $(".slate").each(function(){

               $.get("requests.php", { $(this).attr('name') : "true" }, function(data){

               }); 
           }); 
        }); 
```

换句话说，它获取元素的名称并将其应用于查询字符串。JavaScript 似乎不喜欢

```
 $(this).attr('name') 
```

在可以理解的语法中，因为它只需要文本（而不是 var 或字符串）。有没有办法使这项工作？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T06:38:29.317

```
 $(document).ready(function() {
       $(".slate").each(function(){
           var data = {};
           data[$(this).attr('name')] = "true";
           $.get("requests.php", data, function(data){

           }); 
       }); 
    }); 
```

# opengl - 平滑圆锥法线

> ID：12128129
> 
> 赞同：2
> 
> 时间：2012-08-26T06:35:51.953
> 
> 标签：opengl, mesh, surface, smoothing, normals

我正在尝试计算圆锥的平滑法线。在四处寻找代码示例和解释时，我总是遇到面部法线的方向。我在下面发布了几张我正在做的事情的照片。第一个 - 基本上只是标准化顶点位置 - 给了我相当平滑的阴影，但边缘“缺失”并且底面不是实心的。第二个有边缘，但阴影是平的（面法线），我的光没有正确地反射掉它们。

圆锥体由 GL_TRIANGLES 构建而成。

单击图像以获得更大的版本。

[![](../Images/63f88fdb7f9b187252dc4cff4c42e160.png)](http://bantherewind.com/uploads/cone_smooth_incorrect.png)
[（来源：[bantherewind.com](http://bantherewind.com/uploads/cone_smooth_incorrect_sm.jpg)）]

[![](../Images/ef250922f477478efc2a6ba2df7a6d48.png)](http://bantherewind.com/uploads/cone_flat_incorrect.png)
[（来源：[bantherewind.com](http://bantherewind.com/uploads/cone_flat_incorrect_sm.jpg)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:17:48.183

在除顶点之外的圆锥表面上的任何一点上，都有两种明显的切向量：一种与横截面圆相切，一种在斜面上。如果将曲面表示为具有两个参数的参数方程，则可以将这些切向量作为两个偏导数。取切线的叉积，得到一个法向量。产品的顺序决定了正常点是向内还是向外。当然，底面必须分开处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:48:07.123

除了[JWWalker 的回答之外，](https://stackoverflow.com/a/12128320/524368)我想指出，顶点是一个完整的向量元组，其中包括位置和法线。所以如果你在一个位置有不同的法线，你就会得到不同*的*多个顶点。

在圆锥的情况下，这很重要，因为圆锥的尖端不是一个单独的顶点，而是它们的一整套（圆锥的外套的每个三角形都有一个尖端顶点。然后对于你在每个位置得到的基圆两个顶点，一个用于顶点的三角形，一个用于底面。

尖端和边缘都是不连续的，因此需要使用单独的顶点进行绘制。

# c# - 列出 XML 序列化加倍元素

> ID：12128130
> 
> 赞同：0
> 
> 时间：2012-08-26T06:35:59.593
> 
> 标签：c#, .net, .net-4.0

我正在尝试将一个对象序列化为 XML，并且在序列化为 XML 时一直在使用一个小测试器来试验不同的对象行为。我知道二进制序列化器很深，而 XML 很浅。但是，它似乎在使用 XML 时尝试序列化在另一个对象中组成的 List。

我的问题是，当我序列化一个列表时，我得到了复制的数据。代码和输出如下：

```
class Program
{
    static void Main(string[] args)
    {
        TestSerializer original = new TestSerializer();
        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(original.GetType());
        x.Serialize(Console.Out, original);
        Console.WriteLine("\n\n\n");

        using (MemoryStream stream = new MemoryStream())
        {
            x.Serialize(stream, original);
            stream.Seek(0, SeekOrigin.Begin);

            TestSerializer copy = x.Deserialize(stream) as TestSerializer;
            x.Serialize(Console.Out, copy);
        }
        Console.ReadLine();
    }
}

public class TestSerializer
{
    public List<string> words = new List<string>();
    public TestSerializer()
    {
        words.Add("word");
        words.Add("anotherword");
    }
} 
```

以及相应的输出：

```
<?xml version="1.0" encoding="IBM437"?>
<TestSerializer xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd=
"http://www.w3.org/2001/XMLSchema">
  <words>
    <string>word</string>
    <string>anotherword</string>
  </words>
</TestSerializer>

<?xml version="1.0" encoding="IBM437"?>
<TestSerializer xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd=
"http://www.w3.org/2001/XMLSchema">
  <words>
    <string>word</string>
    <string>anotherword</string>
    <string>word</string>
    <string>anotherword</string>
  </words>
</TestSerializer> 
```

如您所见，“原始”序列化时列表内容加倍，然后反序列化为“复制”。就这一点而言，我有什么遗漏吗？似乎不应该有重复的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:17:03.600

在 TestSerializer 类的构造函数上放置一个断点。您会注意到它在以下行中被调用：

```
TestSerializer copy = x.Deserialize(stream) as TestSerializer; 
```

因此，当您反序列化以下对象时

1.  创建 TestSerializer 的第一个实例（填充列表中的两个值）并执行默认构造函数
2.  反序列化将流中的项目添加到创建的对象（现在你有 4 个项目）

# html - 删除链接的虚线边框

> ID：12128131
> 
> 赞同：0
> 
> 时间：2012-08-26T06:36:43.203
> 
> 标签：html, css

如何`a`在焦点模式下删除标签的浅色虚线边框？
当您单击链接时，它会变为虚线。
我设置`tabindex:-1`了，但没有任何意义。

我想我是否可以删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:42:40.633

你的意思是这样的：

```
a:active {
    outline: none;
}

a:focus {
    -moz-outline-style: none;
} 
```

# activemq - 活动 MQ 出现 OutOfMemory 错误

> ID：12128134
> 
> 赞同：2
> 
> 时间：2012-08-26T06:37:16.960
> 
> 标签：activemq

我们在 tomcat 6.0.35 上运行 activeMQ5.6 作为嵌入式代理，消息传递选项设置为 PERSISTENT。我们在消费者方面遇到了 OutOfMemory 问题。消费者在做耗时的工作时速度很慢。我们曾经在运行 8-10 小时后得到 OOM。有大约 10000 条消息需要处理，它在处理 3000 条消息后给出 OOM，其余 7000 条消息保持在挂起状态。xml 格式的消息大小非常小~1KB。虽然我们在 diff 队列上有其他消费者非常快，并且还发布了大约 10000 条消息，并且消息大小非常高大约 100 KB，但我们没有在该队列上获得 OOM。虽然它是在同一个经纪人上设置的。

这是错误的堆栈跟踪和输出 activemq.xml 文件

> 信息 [11/08/12 05:39:31]ActiveMQ 会话任务 4-开始将 Nam2011_08_prototype/gdfas/mnada/usa/uf3.7z.001 上传到 Amazon S3 存储桶-线程“InactivityMonitor WriteCheck”中的 aws-s3-infotech 异常“ java.lang.OutOfMemoryError: 无法在 java.lang.Thread.start(Thread.java:640) at java.util.concurrent.ThreadPoolExecutor.addIfUnderMaximumPoolSize 的 java.lang.Thread.start0(Native Method) 创建新的本地线程(ThreadPoolExecutor.java:727) 在 java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:657) 在 org.apache.activemq.transport.AbstractInactivityMonitor.writeCheck(AbstractInactivityMonitor.java:142) 在 org.apache.activemq。 transport.AbstractInactivityMonitor$2.run(AbstractInactivityMonitor.java:111) 在 org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33) 在 java.util.TimerThread.mainLoop(Timer.java:512) 在 java.util.TimerThread.run(Timer.java:462) )

这是来自 activemq.xml 的快照

```
 <persistenceAdapter>
  <kahaDB directory="${activemq.data}/kahadb"/>
</persistenceAdapter>

<transportConnectors>
  <!-- <transportConnector name="openwire" uri="tcp://localhost:61616"/> -->
  <transportConnector name="openwire" uri="tcp://0.0.0.0:61616"/>
  <transportConnector name="stomp" uri="stomp://localhost:61613"/>
</transportConnectors>

<networkConnectors>
  <!-- by default just auto discover the other brokers -->
  <networkConnector name="defaultNetwork" uri="multicast://default"/>
  <!--
  <networkConnector name="host1 and host2" uri="static://(tcp://host1:61616,tcp://host2:61616)" failover="true"/>
  -->
</networkConnectors>

<systemUsage>
        <systemUsage>
            <memoryUsage>
                <memoryUsage limit="512 mb"/>
            </memoryUsage>
            <storeUsage>
                <storeUsage limit="100 gb"/>
            </storeUsage>
            <tempUsage>
                <tempUsage limit="50 gb"/>
            </tempUsage>
        </systemUsage>
    </systemUsage>

<!--  lets define the dispatch policy -->
<destinationPolicy>
  <policyMap>
    <policyEntries>
      <policyEntry queue="SyncServer.>"  memoryLimit="512mb" optimizedDispatch="true" queuePrefetch="10">
    <pendingQueuePolicy>
            <fileQueueCursor/>
        </pendingQueuePolicy>          
      </policyEntry>
   </policyEntries>
  </policyMap>
</destinationPolicy> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:07:39.940

这与 ActiveMQ 无关。错误

> java.lang.OutOfMemoryError：无法创建新的本地线程

意味着操作系统没有足够的空闲内存来分配给线程。我的想法是，Java 创建操作系统的每个线程都需要能够创建一个“本机”线程，这需要内存。您需要释放机器上的内存，添加内存，或者在大多数情况下，您实际上应该减少堆分配，以便为操作系统留出更多内存。

一般的经验法则是，在分配给 JVM 时，您至少需要为操作系统保留可用内存量。因此，例如，如果您有一个 2GB 堆，那么之后您需要至少有 2GB 可用空间（考虑到操作系统也将使用一些内存）。

如果您使用 JVM 设置、操作系统、64/32 位更新您的答案？和硬件我可以帮你调优。

# wpf - 如何访问主题的默认样式？

> ID：12128138
> 
> 赞同：0
> 
> 时间：2012-08-26T06:38:01.560
> 
> 标签：wpf, controltemplate, theming

在我们的 WPF 应用程序中，我们有一个自定义列表框，当它没有样式时，它与默认的 Windows 主题相匹配，例如突出显示、悬停或选定的项目（即漂亮的蓝色半透明渐变）。

但是，当我们尝试创建自己的 ListBoxItem 模板并使用此代码中的值时...

```
<Trigger Property="Selector.IsSelected" Value="True">
    <Setter TargetName="Bd" Property="Panel.Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
    <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
</Trigger> 
```

...控件失去了 Aero 主题的所有痕迹，恢复为旧的 Win95/Classic 外观。我们怎么说'嘿......将主题的'突出'样式应用到我们的边框。'？

同样，资源显然是加载的，直到我们重新模板化控件，但我们应该如何访问主题的内置样式？毕竟，那种“选择”的外观无处不在……ListBox、ComboBox、ListView，无处不在。我们也只是希望它在我们的控制之下，而不必重新发明轮子。

注意：我们使用 ShowMeTheTemplate.exe 应用程序来获取默认的“Aero”样式，但同样，这不是我们在运行它时看到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:39:45.030

您的答案似乎在这里：

*   [如何在不影响样式和主题的情况下更改所选项目的 WPF Listbox/ListBoxItem DataTemplate？](https://stackoverflow.com/questions/2175587/how-to-change-wpf-listbox-listboxitem-datatemplate-for-selected-item-without-aff)

....您应该使用`ItemsContainerStyle`而不是仅仅定义一个替换`ItemTemplate`...并定义您的`Style`using`BasedOn`以继承主题为您的 FrameworkElement 元素定义的默认样式。

您还可以使用其他一些技术来利用主题定义的默认样式（...只是为您提供了额外的选项）。

*   [http://corneliutusnea.wordpress.com/2009/12/07/merging-wpfthemes-with-your-own-styles/](http://corneliutusnea.wordpress.com/2009/12/07/merging-wpfthemes-with-your-own-styles/)

还有一种上面没有提到的技术，它使用标记扩展来合并一些样式（即，您可以合并默认样式和您的样式）。

*   [http://www.zagstudio.com/blog/384#.UDpfPqVum6M](http://www.zagstudio.com/blog/384#.UDpfPqVum6M)

*   [XAML 组合样式](https://stackoverflow.com/questions/5745001/xaml-combine-styles)

*   [http://swdeveloper.wordpress.com/2009/01/03/wpf-xaml-multiple-style-inheritance-and-markup-extensions/](http://swdeveloper.wordpress.com/2009/01/03/wpf-xaml-multiple-style-inheritance-and-markup-extensions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:57:22.840

您可以`BasedOn="{StaticResource {x:Type ItemType}}"`在您的中使用`Style`来修改现有模板，但是无法将默认模板的一部分与您的自定义模板合并，模板是整体的。

# javascript - 在 DIV Click 事件中，父级优先于子级

> ID：12128149
> 
> 赞同：1
> 
> 时间：2012-08-26T06:40:01.547
> 
> 标签：javascript, jquery, click

我有一个`div`并且里面`div`有一个子`img`元素。两者`div`都有`img`自己的 javascript `click handler`。

我的目标是当我点击 时`img`，只有`img click`被触发。但目前`div click handler`是在`img click handler`.

这是示例：http: [//jsfiddle.net/5j73w/](http://jsfiddle.net/5j73w/)

我不确定父母是否`position: relative`是罪魁祸首。但这是一种强制性的风格。我也尝试过`z-index`，`img`但无济于事。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T06:46:20.463

在使用 jQuery 1.7+ 时替换不推荐使用[`.live()`](http://api.jquery.com/live/)的 by 。[`.on()`](http://api.jquery.com/on/)

```
$('#parent > img').on('click', function(e) { 
```

**[小提琴](http://jsfiddle.net/ult_combo/5j73w/3/)**

或者，如果您需要事件委托（例如，如果您将内容动态添加到`#parent`）：

```
//run this line when #parent is in the DOM
$('#parent').on('click', '> img', function(e) { 
```

[**小提琴**](http://jsfiddle.net/ult_combo/5j73w/5/)

`.live`将事件一直冒泡到文档，然后检查给定的选择器是否与目标元素匹配，到那时你不能再停止事件传播了。从[文档](http://api.jquery.com/live/)：

> 调用`event.stopPropagation()`事件处理程序在停止附加在文档下方的事件处理程序方面是无效的；事件已经传播到`document`。

此外，要回答“父母优先”的问题，情况并非如此。当您调用 时`.live`，您实际上是在将处理程序附加到`document`.

In this case, the handler attached through `.click(function(){})` (which in jQuery 1.7+ is a shorthand for `.on('click'[, null], function(){})`, executes before the handler attached to the `document`, which is the expected event propagation bubbling behavior.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T06:45:43.980

能够通过执行以下操作进行修复：

```
$('#parent').click(function(e)
{
    console.log("parent click");
});

$('#child').click(function(e)
{
    console.log("child click");
    e.stopPropagation();
}); 
```

​</p>

这是[小提琴。](http://jsfiddle.net/JVsAw/)

# ruby-on-rails - 用户提出的 Rails 查询

> ID：12128153
> 
> 赞同：0
> 
> 时间：2012-08-26T06:40:46.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在构建一个 Rails 应用程序，用户可以在其中发布，必须喜欢表单。我希望用户能够通过文本字段搜索帖子，然后将返回帖子内容与用户查询相似的所有记录。例如，用户输入：

```
'albert einstein atomic bomb' 
```

然后，我想运行一个查询，检查每个单词以及查询本身。就像是：

```
query_result = Hash.new
query_result << Post.where('content ILIKE ?', "%albert%")
query_result << Post.where('content ILIKE ?', "%einstein%")
query_result << Post.where('content ILIKE ?', "%atomic%")
query_result << Post.where('content ILIKE ?', "%bomb%")
query_result << Post.where('content ILIKE ?', "%albert einstein atomic bomb%") 
```

这当然行不通，但我希望你明白这一点。任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:52:39.727

这样的事情呢？

```
query = 'albert einstein atomic bomb'
sub_queries = query.split("\n") << query 

query_results = []
sub_queries.each { |q| query_results << Post.where('content ILIKE ?', "%#{q}%") } 
```

您可能需要数组并`flatten`删除重复项。`query_results``uniq`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:56:28.923

您可以将[太阳黑子](https://github.com/sunspot/sunspot#readme)宝石用于此类物品。设置完成后，您可以像这样进行搜索

```
# Posts with the exact phrase "great pizza"
Post.search do
  fulltext '"great pizza"'
end

# One word can appear between the words in the phrase, so "great big pizza"
# also matches, in addition to "great pizza"
Post.search do
  fulltext '"great pizza"' do
    query_phrase_slop 1
  end
end 
```

和更多。请参阅链接中的信息。

# java - 获取变量的值

> ID：12128157
> 
> 赞同：0
> 
> 时间：2012-08-26T06:41:59.337
> 
> 标签：java, jsp, servlets

我正在为在线考试系统制作项目。项目运行成功。问题是最终用户得到了应该输入数据库的任何标记。

这是我做不到的。

我的代码如下。

```
String UserName = request.getParameter("UserName");
String q = "insert into Data (UserName,MARKS) values("+UserName+" , "+count+")";
System.out.println(q); 
```

这里，count 是存储标记的变量。

我已经打印了查询。由此我可以说我正在获取计数变量的值，但我无法获取用户输入的 USERNAME 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:46:30.780

检查参数“用户名”是否正确。

或者

`UserName`可以存储为会话值，之后您可以检索。

```
 String userName = request.getParameter("txtUserName");

session.setAttribute("userName", userName);
String manager = session.getAttribute("userName"); 
```

# javascript - 如何在 Ext JS Grid 上创建带有标签的文本字段？

> ID：12128159
> 
> 赞同：0
> 
> 时间：2012-08-26T06:42:23.127
> 
> 标签：javascript, html, extjs, forms

如何在 Ext JS Grid 上创建带有标签的文本字段？

我想在下面的页面上制作一个类似示例的文本字段：

jQuery TextExt 插件[http://textextjs.com/](http://textextjs.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:20:27.727

有一个名为 BoxSelect 的 ux 组件。

请参阅[此帖子](http://www.sencha.com/forum/showthread.php?134751-Ext.ux.form.field.BoxSelect-Intuitive-Multi-Select-ComboBox)及其中的相关链接。

# android - 可能吗？如果设备是 android 3.x 或更高版本的设备，应用程序在 2.x 设备中开发，兼容 lib V4 以使用本机库？

> ID：12128164
> 
> 赞同：1
> 
> 时间：2012-08-26T06:43:49.133
> 
> 标签：android, backwards-compatibility

在发布我的问题之前。我看了这个[堆栈溢出](https://stackoverflow.com/questions/8881797/android-compatibility-package-on-android-3)。想知道，这真的不可能吗？我有使用兼容性库 v4 在 android 2.2 中开发的应用程序。这也与 android 3.0 设备兼容。如果设备是 android 2.x，我希望我的应用程序使用 android 兼容性库 v4，如果设备是 android 3.x，我希望我的应用程序使用本机库。有什么建议吗？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:30:13.403

我还没有尝试过我推荐的方法，但它可以工作：

1.  将构建目标设置为 Honeycomb
2.  使用 if-else 语句和[构建信息](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)来确定您使用的 Android 版本
3.  如果您低于 3.0，请在代码中使用兼容性库
4.  如果您使用的是 3.0 或更高版本，请使用本机库。

为此，您需要在代码中使用完全限定名称，而不是在顶部使用 import 语句。因此，对于 3.0 及更高版本的 Fragments，您将使用：

```
android.app.Fragment fragment; 
```

代替：

```
Fragment fragment; 
```

和顶部的导入声明。最后，对于 3.0 之前的版本，您需要以下语句：

```
android.support.v4.app.Fragment fragment; 
```

您需要使用这些名称，因为您不能同时导入两个版本而只使用一个。

# ruby-on-rails-3 - speedy_c2dm：NoMethodError（nil:NilClass 的未定义方法“gsub”）

> ID：12128166
> 
> 赞同：0
> 
> 时间：2012-08-26T06:44:38.443
> 
> 标签：ruby-on-rails-3, rubygems, android-c2dm

我设置了 speedy_c2dm 以向 android 设备发送“推送”消息。

gem 工作正常，但现在我在调用时收到此 NoMethodError 消息

```
SpeedyC2DM::API.send_notification(options) 
```

options参数很好，我已经验证过了。从[ruby​​-doc](http://www.ruby-doc.org/gems/docs/s/speedy_c2dm-1.0.1/SpeedyC2DM/API.html#method-c-send_notification)我从 gem 中得到以下代码：

```
def get_auth_token(email, password)
  data = "accountType=HOSTED_OR_GOOGLE&Email=#{email}&Passwd=#{password}&service=ac2dm"
  headers = { "Content-type" => "application/x-www-form-urlencoded",
              "Content-length" => "#{data.length}"}

  uri = URI.parse(AUTH_URL)
  http = Net::HTTP.new(uri.host, uri.port)
  http.use_ssl = true
  http.verify_mode = OpenSSL::SSL::VERIFY_NONE

  response, body = http.post(uri.path, data, headers)
  return body.split("\n")[2].gsub("Auth=", "")
end 
```

可以看到最后一行使用了gsub，所以我相信问题出在身份验证方法上。

自从创建此帐户以来，我已经更改了帐户的密码，我使用密码 initializers/speedy_c2dm.rb 更新了文件：

```
C2DM_API_EMAIL = "myemail@gmail.com"
C2DM_API_PASSWORD = "mynewpassword"

SpeedyC2DM::API.set_account(C2DM_API_EMAIL, C2DM_API_PASSWORD) 
```

这会导致错误吗？即使我更新了这个文件，我还是更改了密码？（谷歌不让我回到旧密码，如果我再次更改它，我必须创建一个与旧密码不同的新密码）这是我唯一能想到的，因为我没有修改 gem 的代码. 我该如何解决？[C2DM](https://developers.google.com/android/c2dm/)现在已被弃用，但它应该继续为老用户工作。如果不需要，我不想迁移到[GCM](http://developer.android.com/guide/google/gcm/index.html)，一切都设置为与 C2DM 一起使用

欢迎任何其他解决它的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:20:37.610

在我删除用于登录我的电子邮件的“[两步验证”后，问题得到了解决。](http://support.google.com/accounts/bin/answer.py?hl=en&answer=180744)

可以在 gmail 的帐户配置中进行此更改。

# silverlight-4.0 - 如何在 ExpressionBlend 4 中显示 UserControl

> ID：12128167
> 
> 赞同：1
> 
> 时间：2012-08-26T06:45:39.003
> 
> 标签：silverlight-4.0, expression-blend-4

我无法理解如何在 ExpressionBlend 4.0 中打开 MainPage.xaml 以添加一些控件。ExpressionBlend 中未启用任何内容。

原因是我刚刚开始了我的第一个应用程序。有什么诀窍吗？附上截图供参考。

![在此处输入图像描述](../Images/313c485fd78a2339ff29e7b6afe4b665.png)

在此先感谢... Ashok kumar。

# android - OnItemClickListener 使应用程序崩溃

> ID：12128175
> 
> 赞同：0
> 
> 时间：2012-08-26T06:46:51.203
> 
> 标签：android, carousel, onclicklistener

```
I'm working with carousel i just used the Caruosel source code from [codeProject][1] site 
```

一切都很好，直到我在运行应用程序时添加了 setOnItemClickListener 函数，它崩溃了如何解决这个崩溃以使我的应用程序工作？？？

```
import com.name.w.R;
    import com.name.controls.Carousel;
    import com.name.controls.CarouselAdapter;
    import com.name.controls.CarouselAdapter.OnItemClickListener;

    public class NameActivity extends Activity  {
        /** Called when the activity is first created. */

        Carousel care;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
           care=(Carousel) findViewById(R.id.carousel);

            care.setOnItemClickListener(new OnItemClickListener(){
             public void onItemClick(CarouselAdapter<?> parent,View view,int position,long id){
                    Toast.makeText(NameActivity.this, "Position=" + position, Toast.LENGTH_SHORT).show();               
                }

            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:03:54.370

按 ID 查找视图返回 null。请在以下行之后检查是否为空。

```
care = (Carousel) findViewById(R.id.carousel);
    if (care != null) {
        care.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(CarouselAdapter<?> parent, View view,
                    int position, long id) {
                Toast.makeText(NameActivity.this, "Position=" + position,
                        Toast.LENGTH_SHORT).show();
            }
        });
    } 
```

# c++ - 线程本地存储 (TLS) 和 OpenMP

> ID：12128176
> 
> 赞同：4
> 
> 时间：2012-08-26T06:46:53.187
> 
> 标签：c++, thread-safety, openmp

OpenMP（例如 Intel C++ 12 实现）目前如何处理在 Linux 中使用 __thread 和在 Windows 中使用 __declspec(thread) 声明的 TLS 变量？它是让它们成为线程私有的还是只是忽略 TLS？

找到一篇相关论文，但仍然很困惑。

[http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1639501&tag=1](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1639501&tag=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:30:29.463

根据我的经验，__thread 用于在许多编译器（VC、gcc、icc）中实现 OpenMP threadprivate（ MSDN 上的[这个](http://msdn.microsoft.com/en-us/library/2z1788dd%28v=vs.80%29.aspx)页面也提到了这一点）。

# c# - vsto 先决条件 我怎么知道我需要哪个？

> ID：12128177
> 
> 赞同：0
> 
> 时间：2012-08-26T06:46:55.907
> 
> 标签：c#, .net, vsto

我刚刚为 Office 2010 创建了一个 VSTO 加载项。我如何知道我需要哪些先决条件以及我的加载项是否适用于 2010 和 2007 或仅适用于 2010？我很困惑为什么这似乎很明显，因为缺乏关于这个主题的文档。在编译期间，它会告诉您是否存在问题，例如，如果您在 .NET 客户端配置文件而不是完整的 .NET 上构建，但对于所有其他先决条件，我不知道如何判断。例如，我是否需要 Visual Studio for Office 2010 运行时和 Interlop 程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:21:52.647

这可能很有趣： [https](https://stackoverflow.com/a/4411365/1373170) ://stackoverflow.com/a/4411365/1373170 和[https://stackoverflow.com/a/1596868/1373170](https://stackoverflow.com/a/1596868/1373170)

如果您使用的是 .NET 4，如果您使用嵌入式互操作程序集，则不再需要发布 PIA。

我相信仍然需要 VSTO 运行时。

# scala - tomcat websocket：无法连接到tomcat服务器

> ID：12128178
> 
> 赞同：2
> 
> 时间：2012-08-26T06:46:58.720
> 
> 标签：scala, tomcat, websocket, publish-subscribe

我正在尝试在 tomcat 7.0.29 上使用 websocket 来实现 pub/sub 系统，但不知何故我不知道为什么，每次打开浏览器时它总是提醒“关闭”.. env 是 tomcat-7.0。 29，Eclipse Juno，用 scala 编写。如果有人可以提供帮助，非常感谢...

我的servlet如下：

[PubServlet]：

```
 class PubServlet extends WebSocketServlet {
 override def createWebSocketInbound (subProtocol: String, request: HttpServletRequest): StreamInbound = {
        println("create#############################################")
        new WebSocketHandler()
    }
} 
```

[初始化服务程序]：

```
public class InitServlet extends HttpServlet {

    private static final long serialVersionUID = -3163557381361759907L;

    private static List<MessageInbound> socketList;  

    public void init(ServletConfig config) throws ServletException {  
        InitServlet.socketList = new ArrayList<MessageInbound>();  
        super.init(config);  
        System.out.println("Server start============");  
    }  

    public static synchronized List<MessageInbound> getSocketList() {  
        return InitServlet.socketList;  
    }  
} 
```

[Websocket处理程序]：

```
class WebSocketHandler extends MessageInbound{

    protected override def onBinaryMessage(arg0: ByteBuffer)  {  
        // TODO Auto-generated method stub  

    }   
    protected override def onTextMessage(msg: CharBuffer)  {

    }

    protected override def onClose(status: Int) {
        println(status)
        super.onClose(status)
    }

    protected override def onOpen(outbound: WsOutbound) {
        super.onOpen(outbound)
        InitServlet.getSocketList().add(this)
    }
} 
```

我的客户代码在这里：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Index</title>
<script type="text/javascript">
var ws = null;
function startWebSocket() {
    if ('WebSocket' in window){
        ws = new WebSocket("ws://localhost:8080/PubSub_Web/index.do");
        alert(ws);
    }
    else if ('MozWebSocket' in window)
        ws = new MozWebSocket("ws://localhost:8080/PubSub_Web/index.do");
    else
        alert("not support");

    ws.onmessage = function(evt) {
        alert(evt.data);
    };

    ws.onclose = function(evt) {
        alert("close");
    };

    ws.onopen = function(evt) {
        alert("open");
    };

}

function sendMsg() {
    ws.send(document.getElementById('writeMsg').value);
}
</script>
</head>
<body onload="startWebSocket();">
<input type="text" id="writeMsg"></input>
<input type="button" value="send" onclick="sendMsg()"></input>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T09:16:51.890

您需要重写 getReadTimeout 方法，该方法用于以毫秒为单位设置套接字超时。例如，如果您想将套接字超时设置为 2 分钟 (2*60*1000)，则可以使用以下代码。

```
@Override
public int getReadTimeout() {
    return 2*60*1000;
} 
```

注意：您可以通过返回 -1 来设置无限（始终打开）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T09:50:04.180

看到[这个答案](https://stackoverflow.com/questions/12217402/websockets-not-working-on-tomcat-7/20678180#20678180)。最好使用**Tomcat 7.0.47中提供的标准 jaxax websocket-api**

# java - 不同JVM之间的同步

> ID：12128181
> 
> 赞同：1
> 
> 时间：2012-08-26T06:48:18.367
> 
> 标签：java, multithreading

我有一张这样的地图，如下所示......

键值 23 20 32 20 (20+20 =40 , min=23 max=32) 43 18 45 24 (24+18 =42 , 因为 42 >40 所以这里的 min 和 max 将相同，即 43 47 10
56 6 (24 +10 +6 =40) 所以这里 min = 45 和 max = 56 49 2
47 12

所以如上所示，将有一个名为 split 的最终常量，其值为 40

最终 int SPLIT = 40; //这将是可配置的，因为它的值可以更改。

所以我必须实现这样的逻辑，例如，如果地图的值达到 40，那么地图的第一个键从计算开始的地方开始，他的关键点恰好达到 40wilkl 被选为最小值和最大值，上面也解释了

除此之外，如果总和超过 40，我们必须忽略它，并将先前的值本身作为 min 和 max，在这种情况下 min 和 max 将相等。

请告知如何通过地图中的java实现相同的功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T06:56:21.717

我会重新设计您的应用程序，使其不需要全局锁。实现您的系统，以便只有一个 JVM 需要锁，而其他所有 JVM 都与它进行对话来执行所需的操作。

有许多替代方案，使用 ServerSocket、文件锁、数据锁，但恕我直言，这些更难正确或高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:56:34.380

您将不得不依赖用于在不同进程之间同步/通信的技术，而不是不同的 JVM 线程。看看这个线程：[Java中共享内存的任何概念](https://stackoverflow.com/questions/1491519/any-concept-of-shared-memory-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:05:37.533

有几个框架可以为您服务，
通常您需要使用跨 JVM 的共享数据结构（即集群）。
例如，我建议检查以下框架之一：
A. [Infinispan](http://www.jboss.org/infinispan/) - 它为您提供共享数据网格，但也具有缓存（例如 - 驱逐策略）策略
B. [EHCache](http://terracotta.org/products/enterprise-ehcache) - 分布式缓存

我建议您确保您的应用程序与缓存/数据网格实现松散耦合 - 例如使用这种方法：

```
Map<String,Integer> sharedJvmMap = SharedMapBuilderFactory.instance().getBuilder().createSharedMap(); 
```

并拥有一个为您创建共享地图的构建器层次结构。
构建器可能如下所示：

```
public interface SharedMapBuilder {
  <K,V> Map<K,V> createSharedMap();
} 
```

例如，该类有一个 infinispan 实现，并有一些配置文件定义您使用此构建器。
另一种选择是注入适当的构建器（使用 Spring、Juice 或任何 DI 容器）。

这样，您的应用程序代码将不知道共享地图的内部实现。

# hash - 哈希函数和完整性

> ID：12128188
> 
> 赞同：0
> 
> 时间：2012-08-26T06:49:25.107
> 
> 标签：hash, integrity

考虑以下情况：

1.  我有一个字符串 s 和哈希函数 H 生成哈希“h”。
2.  我将 s 和 h 都发送给另一个。
3.  他将s和h发回给我。
4.  在接收到的 s 和 h 上，我执行 h'=H(s) 并将其与接收到的 h 进行比较，如果它们相同，则意味着在步骤 3 中接收到的 si 与我在步骤 2 中发送的完全相同。

那是对的吗？

如果有人有 h 和 s 但没有 H 哈希函数，他能发现（或创建）H 函数吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:57:13.420

1.  是的，如果哈希相同，则两个字符串都相同，但可能会出现哈希冲突。

2.  在一般情况下，不可能从字符串及其哈希值对哈希函数进行逆向工程。显然，如果散列函数是常见的（SHA1），“攻击者”尝试不同的标准散列算法并查看使用了哪个是微不足道的。但这可以通过散列`s`和一些秘密来解决。

# clojure - 通过应用单变量函数将旧的惰性序列转换为新的惰性序列

> ID：12128193
> 
> 赞同：3
> 
> 时间：2012-08-26T06:50:27.010
> 
> 标签：clojure, lazy-evaluation

假设在 clojure 中我有一个惰性序列 (abcd .....) 并假设我有一个单变量函数 f(x)。我如何将旧的惰性序列转换为新的惰性序列 (f(a) f(b) ....)。即我寻求转变。谢谢 ：

```
(a b ....) [lazy] -> (f(a) f(b) ....) [also lazy] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T06:57:13.920

`map`做你需要的一切。它保留了您应用它的序列的“惰性”。

```
(map f old-lazy-sequence)
=> [new-lazy-sequence] 
```

无限范围的示例：

```
(take 5 
  (map (partial * 2) 
       (range)))
=> (0 2 4 6 8) 
```

# java - '"java.exe"' 未被识别为内部或外部命令，

> ID：12128195
> 
> 赞同：10
> 
> 时间：2012-08-26T06:50:31.380
> 
> 标签：java, ant

我已经下载了 Java jdk1.7.0_06 和 Java jre7。我将以下系统变量添加`JAVA_HOME C:\Program Files\Java\jdk1.7.0_06\bin`到我的 Windows 7。但是当我在我的 Windows 7 上的 CMD 命令行中键入以下内容`C:\activiti-5.10\activiti-5.10\setup>ant demo.start`以运行演示应用程序时，我在命令行中收到以下错误

***“java.exe”'不是内部或外部命令、可运行程序或批处理文件***

那么有谁知道我该如何解决这个问题？BR

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-26T07:32:18.867

如果您查看[“ant.bat”](http://svn.apache.org/viewvc/ant/core/trunk/src/script/ant.bat?view=markup)文件，您会看到它以下列方式查找“java”命令：

1.  如果`%JAVACMD%`设置了环境变量，那么它会使用它。
2.  否则，如果`%JAVA_HOME%`设置了环境变量，它会尝试使用`%JAVA_HOME%\bin\java.exe`
3.  否则，它会尝试使用`java.exe`; 即它将在您的%PATH% 上查找。

在您的情况下，您已`%JAVA_HOME%`设置 ... 但设置为 Java 安装的“bin”目录，而不是安装的根目录。所以`Ant.bat`脚本在错误的地方查找`java.exe`.

只需`%JAVA_HOME%`正确设置，它应该可以工作。

```
JAVA_HOME C:\Program Files\Java\jdk1.7.0_06 
```

* * *

正如您从上面所看到的，您不需要*在*您的 Java“bin”目录中`%PATH%`设置 Ant 即可工作，但无论如何设置它是个好主意。这样您就可以简单地从命令行运行 Java 命令。

的设置`%CLASSPATH%`与此问题无关。事实上，除非`build.xml`文件被破坏，否则 Ant 将**忽略**您的`%CLASSPATH%`环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:53:19.573

您需要将文件 java.exe 放在 PATH 变量中，但将 JRE 放在 JAVA_HOME

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T06:56:46.200

通常 JAVA_HOME 应该是“bin”文件夹的父目录。（jre 或 jdk）

在这种情况下`ant`，期望 java 来自 JDK。

尝试在 cmd 窗口中跟踪

```
set JAVA_HOME=C:\Program Files\Java\jdk1.7.0_06
set path="%JAVA_HOME%/bin;%path%;
ant 
```

（旁注：将 java.exe 添加到路径不是 ant 的要求；这对用户来说是一件方便的事情）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T07:02:32.540

JAVA_HOME 是 JDK 根文件夹的路径。例如：C:\Program Files\Java\jdk1.7.0_06 但路径定义为 C:\Program Files\Java\jdk1.7.0_06\bin

```
JAVA_HOME C:\Program Files\Java\jdk1.7.0_06
JRE_HOME C:\Program Files\Java\jre1.7.0_06
path = C:\Program Files\Java\jdk1.7.0_06\bin;C:\Program Files\Java\jre1.7.0_06\bin 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-04T12:22:13.270

只需从 %windir/System32 文件夹中删除以下文件集。实际上删除 java.exe 就足够了，但为了保持一致性，只需删除所有与 java 相关的二进制文件。

1.  java.exe
2.  javaw.exe
3.  javaws.exe

实际上，oracle windows 安装程序将这些文件的副本放入 %windir/System32 文件夹中（我不明白为什么），但看起来不需要它们（因为它们在安装它们的 JDK 文件夹下仍然可用）。

我也尝试了 SO 和其他论坛上发布的所有各种解决方案，但没有一个对我有用。我还正确设置了所有相关的环境变量（JAVA_PATH、CLASS_PATH 等）。最后，这是唯一对我有用的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-18T13:11:01.977

转到 \squirrel-sql-3.9.0>squirrel-sql.bat 。在记事本中打开 squirrel-sql.bat 并注释掉现有的逻辑，即

```
=======================================
if exist "%IZPACK_JAVA%\bin\javaw.exe" (
  set LOCAL_JAVA=%IZPACK_JAVA%\bin\javaw.exe
) else (
  set LOCAL_JAVA=javaw.exe
)

echo Using java: %LOCAL_JAVA%
================================= 
```

并添加以下逻辑

```
@echo off

set LOCAL_JAVA=C:\Program Files (x86)\Java\jre7\bin\javaw.exe

echo Using java: %LOCAL_JAVA%
================================ 
```

确保在添加上述逻辑集 LOCAL_JAVA= 时添加正确的 javax.exe 路径

并从 CMD 启动 .bat 文件 ..就是这样。它应该工作。它对我有用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-26T07:17:01.630

我同意上述解释，但如果问题仍然存在，请尝试设置：CLASSPATH = C:\Program Files\Java\jdk1.7.0_06\bin

# python - 如何将一件事与python中的许多其他事物进行比较？

> ID：12128196
> 
> 赞同：0
> 
> 时间：2012-08-26T06:50:59.287
> 
> 标签：python, random

我正在尝试编写一个程序来随机创建一个争夺高尔夫锦标赛的团队时间表（72名球员分为4组，18支球队，[每支球队包含一名来自A组的球员，一名来自B组的球员，一名来自组C，和 D 组中的一名球员] 每周更换 18 周，没有球员与他们已经玩过的球员一起比赛）

不幸的是，我不知道我在做什么。

我在想我可以使用 random.randint 来挑选球队，然后将球队与之前的球队进行比较，丢弃并重新挑选 A：本周球员已经在球队中，或者 B：球员已经在前几周与他的一名团队成员一起玩

我不知道该怎么做。

# android - 使用服务器图像作为 google map android 的标记

> ID：12128197
> 
> 赞同：0
> 
> 时间：2012-08-26T06:51:22.377
> 
> 标签：android, google-maps, google-maps-markers

![在此处输入图像描述](../Images/b5051c39fd69001ba680924efff08b7f.png)我正在开发一个应用程序，我需要显示来自服务器 url 的图像，因为谷歌地图上的注释（标记）类似于用户的个人资料图片。如何使用布局或自定义视图作为标记？

感谢 RawCoder

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:14:26.530

您可以使用`OverlayItem.setMarker()`.

```
overlayItem.setMarker(icon); 
```

您从 URL 中检索到的`icon`内容在哪里。`Drawable`

**除了您的评论和您编辑的问题之外，请编辑**：****

 **我建议您将您在问题中发布的一张图片添加到资源 drowables 中，并将其用作基础可绘制对象。从您的 URL 中检索自定义图像并将其覆盖到现有的图像上，创建一个新的可绘制图像，您将能够使用`setMarker()`.

点击将被 捕获`Overlay.onTap()`。**

# php - 艰难的 mySQL 选择查询

> ID：12128198
> 
> 赞同：0
> 
> 时间：2012-08-26T06:51:25.510
> 
> 标签：php, mysql, select

我陷入了一个奇怪的境地。它是这样的：

我有 2 张桌子。一个称为 users，其中包含我所有的用户/密码详细信息，然后我有另一个名为 userFiles 的表，其中包含用户 ID 和他有权访问的文件的 fileID。

现在，请注意，1 个帐户可以拥有多个文件的权限，多个帐户可以拥有 1 个文件的权限。

所以基本上，第一张桌子有，说：

1.  ID：1，姓名：bob，密码：helloWorld
2.  ID：2，姓名：phil，密码：what'sUp？

在表 2 中，说：

1.  uID：1，fID：67
2.  uID：1，fID：68
3.  uID：1，fID：36
4.  uID：2，fID：67
5.  uID：2，fID：68
6.  uID：2，fID：102

现在，这就是我想要做的：

我想选择所有用户！（在这种情况下都是！），另外，我想加入另一个表，但我只想加入我指定特定 fID 的行！

例如，我想用 fID 67 查询用户和用户权限

我想得到这个：

1.  ID：1，姓名：bob，密码：helloWorld，uID：1，fID：67
2.  ID：2，姓名：phil，密码：what'sUp?，uID：2，fID：67

并且，对于 fID 102（即使它给出的值不是 NULL，我也可以在我的 PHP 代码中使用它，这很好）

1.  ID：1，名称：bob，密码：helloWorld，uID：NULL，fID：NULL
2.  ID：2，名称：phil，密码：what'sUp?，uID：2，fID：102

这是我尝试使用的查询

```
SELECT * FROM users LEFT JOIN userFiles ON users.ID=userFiles.uID WHERE userFiles.fID = 102 
```

但是，这个查询只返回一行，而我不想同时返回。

如果您不能给我一个 mySQL 解决方案，请尝试帮助我，以便我可以过滤掉结果，并使用 PHP 获得我想要的东西......

万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:01:30.487

您需要将条件从 WHERE 移动到 JOIN，如下所示：

```
SELECT * FROM users
LEFT JOIN userFiles ON users.ID=userFiles.uID AND userFiles.fID = 102 
```

请注意，对于无权访问该文件的用户，只有 users.ID 字段将为 NULL - flID 字段仍将被填充。

为了将来参考，WHERE 条件过滤整个结果集，而 JOIN 条件只过滤在整个结果集上连接的记录（不影响返回的行数）。

# jquery - 如何向 ajax 发布请求添加更多参数

> ID：12128199
> 
> 赞同：0
> 
> 时间：2012-08-26T06:51:43.187
> 
> 标签：jquery, ajax, post

我可以使用 ajax GET 方法将数据发布到 php 页面，但是在向 POST 方法添加更多参数时遇到问题。下面是我使用的代码。因为我能够从 php 脚本中得到响应：

```
 if(XMLHttpRequestObject) {
   XMLHttpRequestObject.open("POST", url,true);XMLHttpRequestObject.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
 XMLHttpRequestObject.onreadystatechange = function()
 {
    document.getElementById('statuses').innerHTML = msg1;
   if (XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200) {
var content = XMLHttpRequestObject.responseText;
 $(document).ready(function(){
    $('#statuses').text(content);
    });
}
 }
XMLHttpRequestObject.send("id=" + id);
} 
```

现在假设我决定使用另一个代码来发送使用 jquery 更容易的数据，我如何从 php 脚本中获取响应？下面是第二个代码：

```
 $(document).ready(function(){ 
    // get values
     cc = $('#ft').attr('value');
     cop = $('#copt').attr('value');

     // send to processing PHP script
     $.ajax({
        type: "GET",
        cache: false,
        url: "processor.php",
        data: "cctotal="+ cc +"&coptotal="+ cop + "&id="+ id + "&get=" + 'update',
        success: function(){
            $('#processing').fadeIn(function(){
            var content = 'Customer Account Updated !' ;
            $('#statuses').text(content);
            });
        }
            });

     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:55:27.963

ajax 的默认 contentType 是`'application/x-www-form-urlencoded; charset=UTF-8'`, 和 cahce 所以你不需要设置它，`XMLHttpRequestObject`你在 jQuery 中进行的普通 JS 调用看起来像：

```
$(function() {
    $.post(url, , function(content) {
        $('#statuses').html(content);
    });
}); 
```

要使用一些添加的数据执行 POST 请求，您可以执行类似的操作

```
$(function(){ 
    cc = $('#ft').val();
    cop = $('#copt').val();

    $.ajax({
         type: 'POST',
         url: url,
         cache: false,
         data: {cctotal: cc, coptotal: cop, id: id, get: 'update'}
    }).done(function(content) {
         $('#processing').fadeIn(function(){
             $('#statuses').text('Customer Account Updated !');
         });
    });
});
​ 
```

您将在服务器上的 POST 超全局中访问该数据。例如在 PHP 中它将是：

```
$cc  = $_POST['cctotal'];
$cop = $_POST['coptotal'];
$id  = $_POST['id'];
$get = $_POST['get']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:04:50.407

```
//Try this

 $(document).ready(function(){ 
    // get values
     cc = $('#ft').attr('value');
     cop = $('#copt').attr('value');

     // send to processing PHP script
     $.ajax({
        type: "GET",
        cache: false,
        url: "processor.php",
        data: "cctotal="+ cc +"&coptotal="+ cop + "&id="+ id + "&get=" + 'update',
        success: function(data){
            $('#processing').fadeIn(function(){
            var content = 'Customer Account Updated !' ;
            $('#statuses').text(content);
            });
            alert(data) //server response here
        }
            });

     }); 
```

# php - PHP 使用 fgetcsv 显示多行

> ID：12128200
> 
> 赞同：0
> 
> 时间：2012-08-26T06:51:58.770
> 
> 标签：php, fgetcsv

我正在使用 CSV 文件输入各种内容，例如图像文件名或描述，以便为我的站点提取变量。

```
if (($handle = fopen("properties/properties.csv", "r")) !== FALSE) {
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $row++;
    $num = count($data);

        ${'property'.$row.'mainimg'} = '"'."properties/".$data[0].'"';
        ${'property'.$row.'col1desc'} = $data[1];

    for ($c=0; $c < $num; $c++) {

    }
}
fclose($handle);
} 
```

我正在使用 Excel 2010 来编辑 .csv。当我将这样的文本放入单元格时：

```
line 1
line 2
line 3 
```

它像这样保存到 .csv 中（从记事本复制粘贴）：

```
"line 1
line 2
line 3" 
```

并在我的页面上显示如下：

```
line 1 line 2 line 3 
```

如何从 .csv 中的单个单元格显示这些多行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:25:40.787

不要使用 fgetcsv。Csv 旨在将换行符作为不同的行，并且您尝试在字段中使用换行符将无济于事。首先尝试 file_get_contents，用 "\"\n\"" 分解（用引号括起来的换行符）然后再用 "," 分解。

# javascript - jQuery：在 for 循环中运行 youtube 视频，播放最后一个视频

> ID：12128204
> 
> 赞同：0
> 
> 时间：2012-08-26T06:52:41.530
> 
> 标签：javascript, jquery

我的`jQuery`功能是

```
function play_queue_video() {
    var queue_videos = $('.queue_list .view-item');
    for (var i = 0; i < queue_videos.length; i++) {
        console.log('id - ' + queue_videos[i].id);
        play_video(queue_videos[i].id, true);
    }
} 
```

如果我有`n`视频，它会播放最后一个视频，因为它只是循环播放到最后一个

**需要** - 我可以做些什么来确保每个视频都在需要的时间内播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:09:07.533

也许将您的 `play_video()` 电话包装在一个闭包中对您有用。如果不是，我会更深入地研究 YouTube API。

```
function play_queue_video() {
        var queue_videos = $('.queue_list .view-item');
        for (var i = 0; i < queue_videos.length; i++) (function (i){
            console.log('id - ' + queue_videos[i].id);
            play_video(queue_videos[i].id, true);
        }(i));
    } 
```

# c# - WCF Rest POST 方法接受 JSON 和 XML

> ID：12128206
> 
> 赞同：1
> 
> 时间：2012-08-26T06:53:12.467
> 
> 标签：c#, .net, post, wcf-rest

寻找某种方法在 WCF restful 服务中创建一个 post 方法，它可以接受 xml 和 json。我可以看到 Get 方法可以根据请求标头自动返回 json/xml。

我能想到的一种解决方案是：

1.  将帖子数据获取为“Stream”并将其读取为字符串。
2.  检查请求标头并将其反序列化为 json 或 xml。
3.  相应地设置 OutgoingResponse 格式并返回响应。

我能够做到#1，但卡在#2 和#3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:29:20.743

微软已经为你做了这件事，不要重新发明轮子。

```
public class DataController : ApiController
{
    public void Post(DataModel model)
    {
        // Whether the body contains XML, JSON, or Url-form-encoded it will be deserialized
        // into the model object which you can then interact with in a strongly-typed manner
    }
}

public class DataModel
{
    public string PropertyA { get; set; }
    public string PropertyB { get; set; }
} 
```

您可以免费下载包含新 Web API 的 ASP.NET MVC4。[http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)。这基本上是 WCF Web API 的最终产品，不再受支持。除非您已经使用原始 Web API 编写了太多代码以至于无法进行切换，否则从长远来看，这将为您节省大量时间。否则，您将被困在具有永远无法修复的错误的 Beta 产品中。

# javascript - 纯 HTML 和压缩的 Javascript 文件

> ID：12128212
> 
> 赞同：0
> 
> 时间：2012-08-26T06:54:36.007
> 
> 标签：javascript, html, compression

我有一个像这样的普通html文件

```
<html>
    <head>
        <script type="text/javascript" src="script.js"></script>
    </head>
</html> 
```

script.js 文件是 -

```
alert('hello'); 
```

我想以压缩形式（.gz 或 .zip）获得 script.js 因此，我使用 7-zp 压缩 javascript 文件并获得 script.js.gz。但是，如果我将上面的 html 替换为

```
<script type="text/javascript" src="script.js.gz"></script> 
```

我在萤火虫中收到错误提示“非法字符”。从本质上讲，它不会对 javascript 文件进行放气。

请注意：我知道 Apache mod-rewrite 和其他 javascript 压缩技术。但是，我不能在这里使用任何这些，因为我对服务器没有那种级别的控制。

任何人都可以帮忙吗？

[Stackoverflow 中的这个答案](https://stackoverflow.com/a/1166002/33581)给出了类似于我正在寻找的东西，但它提供了 Apache 设置的信息。我正在寻找相同的纯 html 场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T06:58:08.993

文件压缩是你应该留给你的网络服务器与浏览器协商的东西（取决于它们支持的压缩），这就是为什么你找到提到 Apache 设置的 SO 答案的原因。按照您尝试的方式进行操作，浏览器将无法理解如何提取 script.js.gz 文件。

在这种情况下，压缩您的 script.js 实际上会产生比原始文件更大的文件，因为它已经很短了。

# eclipse - 带有嵌入空格的命令行参数的 Eclipse RCP 应用程序

> ID：12128213
> 
> 赞同：0
> 
> 时间：2012-08-26T06:54:49.340
> 
> 标签：eclipse, eclipse-rcp

我想使用参数将工作目录传递给 RCP 程序，以便它在 IDE 和导出的产品中工作。当工作目录有空格时，命令行参数不能正常工作。我尝试了双引号和单引号的各种组合，但没有找到正确的目录。

正常工作

myapp -data @user.home/MyApp/

通过将目录设置为 @user.home/My/ 无法正常工作

-data @user.home/我的文档/MyApp

使用空格传递命令行参数的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:09:44.000

尝试这个

```
-data @user.home/"My Documents"/MyApp 
```

问候

**编辑 1**

可以试试下面的方法吗

```
-data @user.home/My\ Documents/MyApp 
```

# javascript - HTML5 Drag Release offsetX offsetY跳转

> ID：12128216
> 
> 赞同：9
> 
> 时间：2012-08-26T06:55:10.993
> 
> 标签：javascript, html, drag-and-drop

我正在玩 HTML5 拖放并在拖动时跟踪鼠标位置。

在您释放鼠标之前，OffsetX 和 OffsetY 非常棒，偏移量会在最后一次调度的拖动事件中跳转到负数

这是html：

```
<div id="dragger"></div>
<div id="console"></div> 
```

这是CSS：

```
#dragger{
    -webkit-user-drag: element;
    width: 100px;
    height: 100px;
    background: hsla(200, 100%, 50%, 0.4);
}​ 
```

和js

```
$('#dragger').bind('drag', function (e) {
    $('#console').html(e.originalEvent.offsetX);
})​ 
```

您也可以在[http://jsfiddle.net/Eu2mz/5/进行测试](http://jsfiddle.net/Eu2mz/5/)

另外，我现在只是想让它在 webkit 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-11T18:30:31.280

我遇到了同样的问题，并想出了一个可以在 99.99999% 的时间内工作的解决方案。解释如下：

# 解决方案（应该适用于您的用户遇到的所有情况）

```
eng.window.addEventListener(
    "drag"
    ,function(event){
        //If both screenX and screenY are 0, likely the user just released.
        if(!event.screenX && !event.screenY) return;

        //Your code here
    }
); 
```

# 解释

我查看了释放鼠标时返回的事件，并将其与之前的事件进行了比较，但找不到任何可以在 100% 的情况下工作的东西——对象内没有简单的“buttonPressed”功能或类似的东西。

我确实看到，当您释放时，光标位置的每一个度量都会改变：`clientX`, `layerX`, `offsetX`, `pageX`, `screenX`, 和常规`x`/ `y`。它们都默认为可能的左上角值，可能是窗口或屏幕的左上角。

但是，您的用户进入全屏模式的可能性有多大，可以将元素拖放到屏幕左上角的像素中？（在我的 Chrome 中，`screenX`实际上设置为窗口的左边缘；但`screenY`考虑到 Chrome 的 HUD）

因此，虽然上述方法在第一种边缘情况下不起作用（您的用户可能永远不会遇到），但它会每隔一段时间起作用。

在 Chrome 中测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T17:44:02.530

我不知道为什么，但是当拖动或拖放到可拖动对象之外时，会将, ,`offsetX`等`offsetY`属性更改为一些难以理解的数字。`clientX``clientY`

**修复是`preventDefault`针对文档放置和拖动事件。**

```
document.addEventListener("drag", function( event ) {
  var element = document.getElementById('console');
  element.textContent = event.clientX;
}, false);

document.addEventListener("dragover", function( event ) {
    event.preventDefault();
}, false);

document.addEventListener("drop", function( event ) {
    event.preventDefault();
}, false);
```

```
#dragger{
    width: 100px;
    height: 100px;
    background: hsla(200, 100%, 50%, 0.4);
}
```

```
<div draggable="true" id="dragger" ondragstart="event.dataTransfer.setData('text/plain',null)"></div>
<div id="console"></div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-07T15:30:57.090

## 谷歌浏览器 BUG：注意！

我从 Chrome 版本 68.* 及更早版本开始报告此问题，因此稍后可能会修复它。因为我有两台不同的电脑，都安装了 Windows 10 和完全相同的 Chrome 版本，所以我一直在拉我的头发。一方面，当您开始在它跳过的另一台计算机上拖动它时，HTML 5 幽灵层不会向前跳过（完美运行）！

最后发现当您在 Windows 显示设置上更改字体大小时会发生这种情况。（右键单击桌面 -> 显示设置 -> 缩放和布局）。

如果您将字体大小更改为 100% 以外的任何值，则会弄乱幽灵。我有一台带有 4k 显示器的电脑，需要 150% 的字体大小，而我的另一台则保持在 100%。

在 Opera 或 Edge 中似乎没有发生，并且没有时间测试所有浏览器。我已经向谷歌报告了。

`Basic example` [http://jsfiddle.net/w9uyc5k4/](http://jsfiddle.net/w9uyc5k4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T04:38:53.867

您的 jsfiddle 链接似乎也受到窗口大小的影响。在它自己的文档中尝试以缩小可能性？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-27T19:47:59.220

您可以添加拖动结束事件，它应该可以解决问题。
像这样：

```
$('#dragger').bind('dragend', function (e) {
     $('#console').html(e.originalEvent.offsetX);
}) 
```

# android - 为什么在Android中引用名称中的ID资源“加号”

> ID：12128217
> 
> 赞同：4
> 
> 时间：2012-08-26T06:55:12.677
> 
> 标签：android, android-layout

我无法为这个问题想出更好的标题，所以如果可以的话，请随时修改它。

所以这是我的问题。我决定为自己编写一个小应用程序，并且在此过程中我也在尝试更好地学习 Android 开发。我知道为什么属性中有一个[`+`（加号）](http://developer.android.com/guide/topics/ui/declaring-layout.html#id)符号，`android:id`因为它意味着“创建一个新的 id 资源”。但我不知道为什么Android需要放入`+`用于引用的那些，如下所示：

在这里，我有两个名为的按钮`StartButton`，`StopButton`并且由于它们是新资源，因此`android:id`包含`+`：

```
 <Button
    android:id="@+id/StartButton"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="53dp"
    android:textSize="18dp"
    android:text="Start"
    android:onClick="StartButton_OnClick" />

<Button
    android:id="@+id/StopButton"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/StartButton"
    android:layout_toRightOf="@+id/StartButton"
    android:text="Stop"
    android:textSize="18dp"
    tools:context=".CallerBlockerActivity"
    android:onClick="StopButton_OnClick" /> 
```

但是为什么`android:layout_alignTop`包含`+`让我感到困惑，因为在到达它`id/StartButton`时定义了它。`@id/StopButton`有人可以解释这种语法的必要性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T06:59:17.413

无论哪种方式都没有关系——第一次引用 ID 时只需要一个 +。如果 ID 已经定义，+ 无论如何都会被忽略。如果您愿意，您可以在 XML 中的每个引用之前放置一个 +，并且一切都会按预期工作。不过，这只是第一次参考所必需的。

# asp.net - 如何在我的asp.net网页上接收手机短信

> ID：12128218
> 
> 赞同：0
> 
> 时间：2012-08-26T06:55:30.517
> 
> 标签：asp.net, web-services, sms, gateway

我正在 ASP.net 中创建一个充值门户，因为我需要接收客户响应并自动处理它，因为我浏览了许多文章和博客，但不明白如何实现它....我已经实现了使用nowSMS网关将短信从我的网页发送到手机但没有得到解决方案如何从手机接收消息到我的网页............请给我简单的解决方案来解决它......和还有Web服务的源代码，我需要实现它来接收来自手机的响应......和网关......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:53:23.173

使用双向短信服务，您可以通过 [http://www.solutions4mobiles.com/en/sms-services/2way-sms.html获得此服务](http://www.solutions4mobiles.com/en/sms-services/2way-sms.html)

# algorithm - 如何快速找到最大平均间隔？

> ID：12128221
> 
> 赞同：6
> 
> 时间：2012-08-26T06:56:02.687
> 
> 标签：algorithm

从一个整数数组`A[N]`中，我想找到一个`[i,j]`具有最大化平均值的区间`(A[i] + A[i + 1] + .. + A[j]) / (j - i + 1)`。

区间的长度`(j - i + 1)`应大于`L`。`(L >= 1)`

我的想法是计算每个 i ~ j 的平均值，但是这样做太慢了。（N太大）

有比 更快的算法`O(N^2)`吗？或者我想知道是否存在一种随机方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T13:08:19.077

有一种`O(N*logC)`算法，其中`C`与数组的最大元素值成正比。与近期论文中一些比较复杂的算法相比，该算法更容易理解，并且可以在短时间内实现，并且在实际中仍然足够快。

为简单起见，我们假设数组中至少有一个非负整数。

该算法基于二分查找。首先，我们可以发现最终的答案必须在范围内`[0, max(A)]`，并且我们在每次迭代中将这个区间减半，直到它足够小（例如10 ^(-6 ）。)在每次迭代中，假设可用区间为`[a,b]`，我们需要检查最大平均值是否不小于`(a+b)/2`。如果是这样，我们得到一个更小的区间`[(a+b)/2, b]`，否则我们得到`[a, (a+b)/2]`。

现在的问题是：给定一个数字`K`，如何检查最终答案是否至少是`K`？

假设平均值是至少`K`，存在一些`i`，`j`这样`(A[i] + A[i+1] + ... + A[j]) / (j - i + 1) >= K`。我们将两边乘以`(j-i+1)`，然后将右侧向左移动，我们得到`(A[i] - K) + (A[i+1] - K) + ... + (A[j] - K) >= 0`。

所以，让`B[i] = A[i] - K`，我们只需要找到一个区间`[i, j]`( `j - i + 1 > L`) 使得`B[i] + ... + B[j] >= 0`。现在的问题是：给定数组`B`和长度`L`，我们要找到一个长度大于 的最大和的区间`L`。如果最大和为`>= 0`，则原始平均数`K`是可能的。

第二个问题可以通过线性扫描来解决。让`sumB[0] = 0`, `sumB[i] = B[1] + B[2] + ... + B[i]`. 对于每个索引`i`，以 结束的最大和间隔`B[i]`为`sumB[i] - min(sumB[0], sumB[1], ..., sumB[i-L-1])`。当随着 增加扫描阵列时`i`，我们可以保持`min(sumB[0], ..., sumB[i-L-1])`动态。

子问题的时间复杂度为`O(N)`。我们需要`O(logC)`迭代，所以总复杂度是`O(N*logC)`.

Ps 这种“平均问题”属于称为[分数规划](http://en.wikipedia.org/wiki/Fractional_programming)的问题家族。类似的问题还有最小平均加权生成树、最小平均加权循环等。

再说一遍。这`O(logC)`是一个松散的界限。我认为我们可以通过一些仔细的分析来减少它。

# java - 无法发布到 facebook 墙上显示“无法发布到墙上”

> ID：12128230
> 
> 赞同：0
> 
> 时间：2012-08-26T06:56:51.953
> 
> 标签：java, android, facebook

我正在尝试从我的 android 应用程序向 facebook 发布状态...我已经在演示项目中完成了这件事，并且当我尝试在我自己的项目中执行此操作时，它运行良好，在设备中安装了 facebook 后它正在显示“无法发布到墙上”...这是我的 logcat 的快照

![在此处输入图像描述](../Images/6b1d2fe5495e804a8ce4df5f359d266d.png)

有什么建议请......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:25:19.090

不要在主 UI 上执行网络操作。您可以启动异步任务并在其中发布消息。 [http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。

# java - 显示 JOptionPane 窗口时使用 Windows 声音

> ID：12128231
> 
> 赞同：2
> 
> 时间：2012-08-26T06:57:05.210
> 
> 标签：java, windows, swing, awt, joptionpane

例如，当我显示时，我将如何播放用户设置的感叹`JOptionPane.WARNING_MESSAGE`声或显示时的错误声音`JOptionPane.ERROR_MESSAGE`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:42:33.760

我的假设——*没有什么特别需要做的，JOptionPane 就是这么做*的——基于浏览 BasicOptionPaneUI 代码并检查是否安装了 optionPane 的 audioActionMap。

播放音频的位置在 ui 的 propertyChangeListener 中对其祖先属性的更改：

```
if ("ancestor" == e.getPropertyName()) {
    JOptionPane op = (JOptionPane)e.getSource();
    boolean isComingUp;

    // if the old value is null, then the JOptionPane is being
    // created since it didn't previously have an ancestor.
    if (e.getOldValue() == null) {
        isComingUp = true;
    } else {
        isComingUp = false;
    }

    // figure out what to do based on the message type
    switch (op.getMessageType()) {
    case JOptionPane.PLAIN_MESSAGE:
        if (isComingUp) {
            BasicLookAndFeel.playSound(optionPane,
                               "OptionPane.informationSound");
        }
        break;
    // all other message types handled as well
} 
```

共享的 actionMap 已安装（懒惰，所以 optionPane 必须已经可见一次）

```
assertTrue(UIManager.get("AuditoryCues.actionMap") instanceof ActionMap);
ActionMap map = (ActionMap) UIManager.get("AuditoryCues.actionMap");
assertNotNull(map.get("OptionPane.errorSound")); 
```

在操作系统（win 7）级别启用声音并打开硬件声音（仅用于测试）... WTF：但没有任何反应（并且假设被证明是错误的;-)

调试会话（我讨厌它......但偶尔......）结果表明执行 audioAction 不会发生，这里是涉及的方法：

```
static void playSound(JComponent c, Object actionKey) {
    LookAndFeel laf = UIManager.getLookAndFeel();
    if (laf instanceof BasicLookAndFeel) {
        ActionMap map = c.getActionMap();
        if (map != null) {
            Action audioAction = map.get(actionKey);
            if (audioAction != null) {
                // pass off firing the Action to a utility method
                // JW: we have an audioAction, so on to the next method
                ((BasicLookAndFeel)laf).playSound(audioAction);
            }
        }
    }
}

protected void playSound(Action audioAction) {
    if (audioAction != null) {
        Object[] audioStrings = (Object[])
                                UIManager.get("AuditoryCues.playList");
        if (audioStrings != null) {
           // JW: here the action is performed ... except we don't reach this
           ....
        }

} 
```

这相当惊人，不是吗？毕竟，动作是创建的，如果没有播放列表，为什么要创建它们？

问题来了：用于创建操作的列表是不同的列表

```
// in BasicLookAndFeel
protected ActionMap getAudioActionMap() {
    ActionMap audioActionMap = (ActionMap)UIManager.get(
                                          "AuditoryCues.actionMap");
    if (audioActionMap == null) {
        // here it's named cueList
        Object[] acList = (Object[])UIManager.get("AuditoryCues.cueList");

} 
```

不同列表的原因是......允许 LAF 自定义实际要播放的声音

```
// BasicLookAndFeel
// *** Auditory Feedback
"AuditoryCues.cueList", allAuditoryCues,
// this key defines which of the various cues to render.
// L&Fs that want auditory feedback NEED to override playList.
"AuditoryCues.playList", null, 
```

Ooookaaayy .. 所以让我们看看具体的 LAF 在做什么，fi Win：

```
// *** Auditory Feedback
// this key defines which of the various cues to render
// Overridden from BasicL&F. This L&F should play all sounds
// all the time. The infrastructure decides what to play.
// This is disabled until sound bugs can be resolved.
"AuditoryCues.playList", null, // table.get("AuditoryCues.cueList"), 
```

停产。

不完全是:-) 这个评论暗示了什么是可行的：

```
Object[] cueList = (Object[]) UIManager.get("AuditoryCues.cueList");
UIManager.put("AuditoryCues.playList", cueList); 
```

这实际上适用于 WindowsLAF（即使尊重操作系统声音模式，并且 - 最重要的是 -如果禁用则*不会播放），但不适用于任何其他核心 LAF。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T08:17:33.477

首先，我同意安德鲁

但是，看看[这里](http://weblogs.java.net/blog/mkarg/archive/2010/01/03/playing-default-system-sounds-java)然后[这里](http://docs.oracle.com/javase/7/docs/technotes/guides/swing/1.4/w2k_props.html)

Ps我自己没有测试过

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T01:26:50.297

使用 MadProgrammer 提供的链接（最后重新发布）作为起点，这就是我想出的：

```
import java.awt.*;
import javax.swing.JOptionPane;

//retrieve the default sound from windows system sounds
//for another sound replace "default" accordingly
    final Runnable SOUND = (Runnable)Toolkit.getDefaultToolkit().getDesktopProperty
    ("win.sound.default"); 
```

然后在显示 JOptionPane 之前：

```
if(SOUND != null)SOUND.run(); 
```

*注意*某些声音事件（例如 Program Error）无法通过这种方式访问​​。Oracle的[Windows 桌面属性支持](http://docs.oracle.com/javase/7/docs/technotes/guides/swing/1.4/w2k_props.html)页面上的音频反馈标题下提供了可访问的声音事件列表

虽然这在非 Windows 操作系统上根本不起作用，但根据[博客](http://weblogs.java.net/blog/mkarg/archive/2010/01/03/playing-default-system-sounds-java)，它不会导致程序在另一个操作系统上崩溃。我的`JDK`Linux 分区还没有，所以我目前无法测试这个。

# swt - SWT GridLayout 中的 Horizo ntalSpan 不跨越

> ID：12128235
> 
> 赞同：2
> 
> 时间：2012-08-26T06:57:20.040
> 
> 标签：swt, grid-layout, columnspan

我正在尝试像这样配置一个对话框窗口：

```
 @Override
protected Control createDialogArea(Composite parent) {

    GridLayout dialogAreaLayout = new GridLayout();
    dialogAreaLayout.numColumns = 2;
    parent.setLayout(dialogAreaLayout);

    GridData gridData = new GridData();
    gridData.grabExcessHorizontalSpace = true;
    gridData.horizontalAlignment = GridData.FILL;
    gridData.minimumWidth = 300;

    // the label in the first row should span across both columns
    gridData.horizontalSpan = 2;

    Label headlineLabel = new Label(parent, SWT.NONE);
    headlineLabel.setText("example test");
    headlineLabel.setLayoutData(gridData);

    // the rest should be ordered in two columns
    gridData.horizontalSpan = 1;

    companyLabel = new Label(parent, SWT.NONE);
    companyLabel("company");

    companyTextfield = new Text(parent, SWT.BORDER);
    companyTextfield(gridData); 
```

...

我想要完成的是第一行中的一个标签，它跨越两列，并让以下字段每行成对排序。我得到的是，标签（应该留在第二行）就在第一行，就像标签不会跨越两列一样。谁能看到，我做错了什么？

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:32:46.903

将 layoutData 设置为 headerLabel 后，将 Horizo​​ntalSpan 设置为 1。您需要为每个 SWT 小部件创建一个新的 LayoutData 对象。设置后无法重复使用。

# php - php mysql 解决方法，无需使用 UNION

> ID：12128237
> 
> 赞同：0
> 
> 时间：2012-08-26T06:57:26.143
> 
> 标签：php, mysql, sql

```
select * from car where carbrand = 'bmw' limit 1
union
select * from car where carbrand = 'mercedez' 
```

是否可以在不使用联合的情况下组合此查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T07:05:28.917

尝试

```
SELECT * FROM car WHERE carbrand IN ('bmw', 'mercedez') GROUP BY carbrand 
```

编辑：

```
SELECT * FROM car WHERE carbrand IN ('bmw', 'mercedez') GROUP BY CASE WHEN carbrand = 'bmw' THEN carbrand  ELSE car_id END 
```

看看`car_id`上面的 ELSE 条件，把它放在你各自的 id 上。

# c# - 添加事件处理程序时，是否使用'new（）'？

> ID：12128240
> 
> 赞同：3
> 
> 时间：2012-08-26T06:57:49.860
> 
> 标签：c#, event-handling, new-operator

> **可能重复：**
> [使用新处理程序附加事件处理程序与直接分配它](https://stackoverflow.com/questions/1884595/attaching-eventhandler-with-new-handler-vs-directly-assigning-it)

分配回调有什么区别，让我们说一个按钮的*Click*事件使用`+= new(...)`与 just `+=`？为了清楚起见，以下是每个示例：

```
Button b = new Button();
b.Click += new System.EventHandler(button_Click);
b.Click += button_Click; 
```

第一个是否创建了该方法的新实例，`button_Click`而第二个总是使用在*this*中定义的那个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T07:00:28.547

第二个是第一个的简写，因此两者都将创建事件处理程序并将其添加到`Click`.

这是“深度 C#”中有关事件的章节中的一个[很好的解释。](http://csharpindepth.com/Articles/Chapter2/Events.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T07:04:18.323

没有区别。

你也可以做..

```
b.Click += (e, sender) =>{
 // do something here
}; 
```

这三个都是相同的，即为委托分配一个功能。

# php - 自适应支付 IPN 交易 ID 未出现

> ID：12128241
> 
> 赞同：2
> 
> 时间：2012-08-26T06:57:58.073
> 
> 标签：php, paypal, paypal-ipn, paypal-adaptive-payments

我正在 PayPal 沙箱中测试自适应支付，IPN 正在正确返回到我的网站，但我无法让交易 ID 出现，我希望在我的数据库中使用它，因为用户将来可以使用它重新下载媒体，或者如果他们没有立即重定向到该站点并错过了初始下载。

支付方式为链式支付。

根据 IPN 开发人员指南（https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf），响应应该`transaction[n].id`用作交易 ID，我尝试过：

```
$_POST['transaction[0].id']
$_POST['transaction[0]['id']']
$_POST['txn_id'] 
```

都回来了`NULL`。我为每个 IPN 返回了 IPN 信息电子邮件，这就是我得到的：

```
VERIFIED
--------------------------------------------------------------------------------
transaction              Array
log_default_shipping_address_in_transactionfalse
action_type              PAY
ipn_notification_url     xxx
charset                  windows-1252
transaction_type         Adaptive Payment PAY
notify_version           UNVERSIONED
cancel_url               xxx
verify_sign              AM-T87RnkCBg1jNaY5s.rN3m7228AwQazhSReOMGBFi9VRyKsQwGyQ9f
sender_email             j-test_1345926524_per@hotmail.com
fees_payer               EACHRECEIVER
return_url               xxx
reverse_all_parallel_payments_on_errorfalse
pay_key                  AP-13220443VY964171X
status                   COMPLETED
test_ipn                 1
payment_request_date     Sat Aug 25 23:49:05 PDT 2012 
```

如何获取交易 ID？（最重要的是，主要接收者 ID）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:17:25.160

我写了一系列关于自适应支付 API 的文章。第二[个](http://enjoysmile.com/paypal-adaptive-payments-and-ipn-part-two/)处理从自适应支付发送到您的 IPN 处理程序的变量。

PayPal 发送了一组奇怪的变量，但可以将它们解码为我们能够在 PHP 中轻松使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:38:22.153

您需要进入 Paypal 中的主要收款人配置文件设置（在沙盒或实时环境中）并设置即时付款通知 (IPN) 首选项。这将向您指定的 URL 发送第二个 IPN，其中包含您要查找的详细信息。

# c# - Blend + Sketchflow 2012 中禁用的设计视图

> ID：12128248
> 
> 赞同：3
> 
> 时间：2012-08-26T06:59:34.373
> 
> 标签：c#, wpf, visual-studio-2012, blend

我有一个项目是在 Visual Studio 2012 的 Blend + Sketchflow 预览中创建的。这是一个简单的项目，因为我是第一次学习 C# 和 WPF。我有两个窗户。一个简单的开始屏幕，带有一个显示另一个屏幕的按钮。另一个屏幕有 4 个按钮，它们在随机顺序的动画序列中改变颜色。

我的问题是设计视图被禁用。我无法再在设计视图中打开任何 XAML 或编辑任何 Storyboard 等。我能想到的唯一不同是我在 Visual Studio 2012 中添加了一个类文件。项目刷新后，设计视图消失了，我只能看到是它的xml版本。

如果有人可以向我展示解决方案，我将不胜感激，因为我搜索了 google 和 stackoverflow 并没有找到答案。我对语言和 VS/Blend 都很陌生，所以这可能是一个简单的修复，我不知道。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:23:57.023

确保您的项目类型未设置为“控制台”，因为 Blend 将拒绝显示此类型的设计视图。如果项目类型是“窗口”，Blend 将很好地显示设计视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-07T05:44:19.010

此外，如果目标 .NET Framework 版本设置为 4.5.2，则 Blend for VS2013 将不会打开解决方案文件。将“目标框架”重置为 4.5.1（或更早版本）并且 Blend 工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:12:21.667

感谢 Surfbutler，我设法解决了这个问题。我的问题是我在 Visual Studio 2012 中临时将项目（输出）类型切换为控制台。当我将其切换回 Window 时，设计视图在 Blend 中再次开始正常工作。

# mysql - rake db:migrate 失败并出现 Mysql2::Error: Row size too large

> ID：12128249
> 
> 赞同：0
> 
> 时间：2012-08-26T06:59:51.040
> 
> 标签：mysql, ruby-on-rails

我正在为我的 rails 运行 rake db:migrate，但失败并出现以下错误：

```
==  AddColumnsToSavedSearch: migrating ========================================
-- add_column(:saved_searches, :search_param1, :string, {:limit=>1000})
   -> 0.0574s
-- add_column(:saved_searches, :search_param2, :string, {:limit=>1000})
rake aborted!
An error has occurred, all later migrations canceled:

Mysql2::Error: Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535\. You have to change some columns to TEXT or BLOBs: ALTER TABLE `saved_searches` ADD `search_param2` varchar(1000) 
```

此迁移在我的其他具有相同配置（相同操作系统和数据库）的系统上运行良好。

我的 MySQL 数据库版本是服务器版本：5.5.24-0ubuntu0.12.04.1 (Ubuntu)。

任何帮助表示赞赏。

如果您需要任何信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:55:16.023

这可能不是问题，但通常字符串数据类型用于少量文本。我相信它使用 MySQL 的 VARCHAR(255) 类型。尝试将数据类型更改为文本。尝试将列限制为大于字符串可以支持的大小时可能存在一些冲突。

# linq - Linq IQueryable.Any() 用法

> ID：12128255
> 
> 赞同：4
> 
> 时间：2012-08-26T07:00:42.493
> 
> 标签：linq, linq-to-sql, linq-to-entities

下面是我的代码。请审查它。

```
 1\. bool isUnavailable = db.Deploys.Where(p => 
     p.HostEnvironmentId == Guid.Parse(host.ID) &&
     p.Status == (int)DeployStatus.Deploying).AsEnumerable().Any(); 
```

这个有效。

以下语句不起作用。

```
2\. bool isUnavailable = db.Deploys.Where(p => 
    p.HostEnvironmentId == Guid.Parse(host.ID) &&
    p.Status == (int)DeployStatus.Deploying).Any();//Error 
```

例外是

```
 An exception of type 'System.NotSupportedException' occurred in 
Microsoft.Data.Services.Client.DLL but was not handled in user code

    Additional information: The method 'Any' is not supported.

3\. bool isUnavailable = db.Deploys.Where(p => 
        p.HostEnvironmentId.ToString() == host.ID &&
        p.Status == (int)DeployStatus.Deploying).AsEnumerable().Any();//Error 
```

例外是

```
 An exception of type 'System.NotSupportedException' occurred in 
      Microsoft.Data.Services.Client.DLL but was not handled in user code
      Additional information: The expression (([10007].HostEnvironmentId.ToString() == 
"b7db845b-cec4-49af-8f4b-b419a4e44331") And ([10007].Status == 90)) is not supported. 
```

`Deploys`Class 是构建在 WCF Data 服务的客户端代理类中的模型。我正在使用“添加服务引用”来创建 WCF 客户端代理类。

但是对于通用列表，假设如下代码。它会正常工作。

```
4.bool b=servers.Where(d => 
   d.status == (int)Enums.ServerStatus.Deploying ||
   d.status == int)Enums.ServerStatus.Unavailable).Any(); 
```

我的问题是

> 为什么在不同的类中使用相同的方法得到不同的结果。（参见方法2和方法4）。
> 
> 为什么2和3不起作用。

希望可以有人帮帮我 。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T11:09:16.403

LINQ 有一个“提供者”的概念。在不同的数据源上使用 LINQ 时，对于相同的 LINQ 查询，需要根据数据源进行不同的操作。

例如，当您想使用 LINQ 查询数据库时，需要将 LINQ 查询转换为 SQL 查询。当数据源为 OData 时，需要将查询转换为 URL。每个都有不同的提供程序，每个提供程序支持不同的 LINQ 运算符子集和其他语言结构。LINQ-to-SQL、Entity Framework 和 LINQ-to-NHibernate 是用于数据库访问的三个流行的 LINQ 提供程序。

在您的情况下，您正在使用 WCF 数据服务，其中包括 OData 的 LINQ 提供程序。由于在 OData 中无法表达`.Any()`LINQ 运算符，因此尝试在具有该提供程序的查询中使用它会引发异常。通过使用`.AsEnumerable()`，您实质上是在说停止使用 OData LINQ 提供程序并开始使用 LINQ-to-Objects 提供程序（从技术上讲，它不是提供程序，但从概念上讲，您可以将其视为一个提供程序）。这意味着只有之前`.AsEnumerable()`的内容将被转换为 OData 查询，从而检索所有`Deploy`匹配的实体`.Where()`，并且在它们全部传输到客户端之后，客户端将`.Any()`通过检查数量来执行`Deploy`它收到的实体。如果有很多这样的实体，这当然是不好的，当你想要的只是服务器端（可能是数据库）检查是否有任何实体时，它会导致不需要的数据通过网络传输。不幸的是，`.Any()`OData 1.0 不支持（我不知道 OData 2.0）。

此外，OData 可能也不支持`.ToString()`。您可能需要`Guid`直接比较结构，即创建一个包含您要比较的 GUID 值的局部变量：

```
var g = Guid.Parse("b7db845b-cec4-49af-8f4b-b419a4e44331")` 
```

然后在查询中比较 GUID，如下所示：

```
x.HostedEnvironment == g 
```

# mysql - 如何在已存在的列数据中插入特定字符

> ID：12128260
> 
> 赞同：1
> 
> 时间：2012-08-26T07:02:15.140
> 
> 标签：mysql, sql, sql-update

我有一列包含数字和字母。例如：a5c648a6。我需要`:`在每对字符之后添加以下字符，并将修改后的字符插入另一列。即，输出应该是 ike:a5:c6:48:a。请注意，我不需要`:`在最后一个字符之后添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:55:51.667

请试试这个：

在 mysql 数据库中创建以下函数：

```
DELIMITER //
CREATE FUNCTION insert2(str text, pos int, delimit varchar(124))
RETURNS text
DETERMINISTIC
BEGIN
DECLARE i INT DEFAULT 1;
DECLARE str_len INT;
DECLARE out_str text default '';
SET str_len=length(str);
WHILE(i<str_len) DO
SET out_str=CONCAT(out_str, SUBSTR(str, i,pos), delimit);
SET i=i+pos; 
END WHILE;
-- trim delimiter from end of string
SET out_str=TRIM(trailing delimit from out_str);
RETURN(out_str);
END//
DELIMITER ; 
```

然后使用要转换为 MAC 地址的字符串执行函数：

```
select insert2('a5c648a6',2,':') 
```

您现在可以将 替换`'a5c648a6'`为数据库列字段名称并运行函数来转换字符串。

# html - HTML & CSS：为什么我不能在我已经使用 margin:0 auto 的部分中居中并设置它的宽度？

> ID：12128263
> 
> 赞同：0
> 
> 时间：2012-08-26T07:02:44.297
> 
> 标签：html, css

这是我的html代码

```
<section id="usercontent">
        <h1>Section - User Content</h1>
            <article id="notifications">
                <h1>Notifications</h1>
                <p>Why I can't center this? I already use margin:0 auto;</p>
            </article>
        <article>
            <h1>Article - Left Content</h1>
                <section id="menuform">
                    <h1>User Menus</h1>
                </section>
                <section id="shareform">
                    <h1>Shout to the world</h1>
                    <form method="post">
                    <table>
                        <tr>
                            <td>Shout to the world:</td>
                        </tr>
                        <tr>
                            <td><textarea name="user_post" required="required"></textarea></td>
                        </tr>
                        <tr>
                            <td><input id="btn_share" type="submit" value="Share" name="share"></td>
                        </tr>
                    </table>
                    </form>
                    <?php
                    if(isset($_POST['share'])){

                    }
                    ?>
                </section>
        </article>
        <aside>
            <h1>Aside - Right Content</h1>
        </aside>
        <div id="clearfloats"></div>
    </section> 
```

这是我的CSS代码

```
/*user content styles*/

/*section styles*/

section#usercontent {
    width:600px;
    background-image:url('../img/content.png');
    font-size:13px;
    color:#323232;
}
section#usercontent h1 {
    visibility:hidden;
    position:absolute;
}

/*clear floats*/

section#usercontent div#clearfloats {
    clear:both;
}

section#usercontent article#notifications {
    width:500px;
    height:20px;
    margin:0 auto;
}

/*article styles*/

section#usercontent article {
    width:220px;
    float:left;
    margin-left:10px;
}
section#usercontent article section#menuform {
    border:1px solid black;
    height:50px;
}
section#usercontent article section#shareform {
    border:1px solid black;
}
section#usercontent article section#shareform table {
    margin:0 auto;
    margin-bottom:8px;
    margin-top:8px;
}
section#usercontent article section#shareform table td {
    padding:2px;
}
section#usercontent article section#shareform input#btn_share {
    border:1px solid #E0BE47;
    border-radius:8px;
    width:58px;height:20px;
    background-color:#FAF5CE;
    cursor:pointer;
    font-size:12px;
    color:#323232;
    float:right;
}
section#usercontent textarea {
    height:55px;
}

/*aside styles*/

section#usercontent aside {
    width:340px;
    float:right;
    margin-right:10px;
}
section#usercontent aside, section#usercontent article {
    margin-top:10px;
    margin-bottom:10px;
    border:1px solid #E0BE47;
    border-radius:8px;
} 
```

输出

![在此处输入图像描述](../Images/dec1524c4ad9e1531b74908f057493fd.png)

我在这方面遇到问题 section#usercontent article#notifications 我不知道如何使它居中 我已经使用 margin:0 auto; 需要建议来解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:14:48.830

您正在使用 float: left; 文章上。添加浮点数：无；到“section#usercontent article#notifications”或从“section#usercontent article”中删除浮动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T07:30:48.737

你可以试试这个：

***HTML***

```
<section id="usercontent">
        <h1>Section - User Content</h1>
            <article id="notifications">
                <span>Notifications</span>
                <p>Why I can't center this? I already use margin:0 auto;</p>
            </article>
        <article>
            <h1>Article - Left Content</h1>
                <section id="menuform">
                    <h1>User Menus</h1>
                </section>
                <section id="shareform">
                    <h1>Shout to the world</h1>
                    <form method="post">
                    <table>
                        <tr>
                            <td>Shout to the world:</td>
                        </tr>
                        <tr>
                            <td><textarea name="user_post" required="required"></textarea></td>
                        </tr>
                        <tr>
                            <td><input id="btn_share" type="submit" value="Share" name="share"></td>
                        </tr>
                    </table>
                    </form>
                    <?php
                    if(isset($_POST['share'])){

                    }
                    ?>
                </section>
        </article>
        <aside>
            <h1>Aside - Right Content</h1>
        </aside>
        <div id="clearfloats"></div>
    </section> 
```

***CSS***

```
section#usercontent {
    width:600px;
    background-image:url('../img/content.png');
    font-size:13px;
    color:#323232;
}
section#usercontent h1 {
    visibility:hidden;
    position:absolute;
}

/*clear floats*/

section#usercontent div#clearfloats {
    clear:both;
}

section#usercontent article#notifications {
    width:500px;
    height:40px;
    text-align:center;
}

/*article styles*/

section#usercontent article {
    width:220px;
    margin-left:30px;
}
section#usercontent article section#menuform {
    border:1px solid black;
    height:50px;
}
section#usercontent article section#shareform {
    border:1px solid black;
}
section#usercontent article section#shareform table {
    margin:0 auto;
    margin-bottom:8px;
    margin-top:8px;
}
section#usercontent article section#shareform table td {
    padding:2px;
}
section#usercontent article section#shareform input#btn_share {
    border:1px solid #E0BE47;
    border-radius:8px;
    width:58px;height:20px;
    background-color:#FAF5CE;
    cursor:pointer;
    font-size:12px;
    color:#323232;
    float:right;
}
section#usercontent textarea {
    height:55px;
}

/*aside styles*/

section#usercontent aside {
    width:340px;
    float:right;
    margin-right:10px;
}
section#usercontent aside, section#usercontent article {
    margin-top:10px;
    margin-bottom:10px;
    border:1px solid #E0BE47;
    border-radius:8px;
} 
```

**[JSFIDDLE 链接在这里](http://jsfiddle.net/QH5HD/5/)**

# session - 如何在会话失效（超时）之前执行自定义操作？

> ID：12128268
> 
> 赞同：1
> 
> 时间：2012-08-26T07:04:12.747
> 
> 标签：session, session-timeout

我想存储一些关于`current session's user`会话何时失效的信息（**因为超时**）。我怎样才能做到这一点？

> 如果这有帮助，我正在使用 Spring Security 3.1。因此，如果 Spring 中有任何配置，我将毫无疑问地理解这一点。

Spring Security 中有一个东西是`Session Expiration`. 当会话过期时，过滤器会捕获它，我可以从中获取我想要的信息。

然而问题是当会话失效时（**因为超时**）。因为，下一个`request`将有一个新`session`创建的，而我无法访问旧的。**我想知道如何自定义`session invalidation`？**

# javascript - JavaScript 代码中的错误

> ID：12128271
> 
> 赞同：0
> 
> 时间：2012-08-26T07:04:48.713
> 
> 标签：javascript, html, javascript-events

**演示： http:** [//jsfiddle.net/nazym/1/](http://jsfiddle.net/nazym/1/)
该代码旨在在按下按钮时显示弹出窗口，并在按下其他任何位置时隐藏它。单击按钮两次时会发生错误。
因此，当重复单击按钮时，代码应该可以显示/隐藏弹出窗口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T07:27:38.607

如果您想让它点击按钮显示弹出窗口，如果它是隐藏的，如果它显示则隐藏它（并单击其他任何地方隐藏它），这是导致问题的代码块：

```
if (ele == element) {
    hideDropDown();
    return;
} 
```

您没有将任何参数传递给 hideDropDown 函数。它应该是：

```
hideDropDown(ele); 
```

这样，onclick 处理程序就会正确地添加到元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T07:34:17.133

这似乎是实现此功能的一种非常复杂的方式。你可以用更少的代码来做到这一点，如下所示：

```
document.onclick = function(e) {
    if (!e) e = window.event;
    var target = e.target || e.srcElement;
    document.getElementById("window").style.display = 
        document.getElementById("but") === target ? "inline-block" : "none";
}; 
```

也就是说，单击文档时，检查目标/源元素是否是您的按钮：如果是，则显示弹出窗口，否则隐藏它。

演示：http: [//jsfiddle.net/nazym/12/](http://jsfiddle.net/nazym/12/)

或者，如果您希望重复单击按钮来切换弹出窗口的显示，但单击其他​​任何地方隐藏它只需稍微修改条件：

```
document.getElementById("window").style.display = 
    document.getElementById("but") === target &&
    document.getElementById("window").style.display === "none" ? "inline-block" : "none"; 
```

演示：http: [//jsfiddle.net/nazym/13/](http://jsfiddle.net/nazym/13/)

**编辑**：为了迎合您关于单击弹出窗口不应隐藏它的评论，您可以在上面添加此代码：

```
document.getElementById("window").onclick = function(e) {
    if (!e) e = window.event;
    if (e.stopPropagation) 
        e.stopPropagation(); // W3C model
    else 
        e.cancelBubble = true; // IE model
};
​ 
```

也就是说，防止弹出窗口中的点击冒泡，以免它们到达执行显示和隐藏的文档级点击处理程序。

演示：http: [//jsfiddle.net/nazym/16/](http://jsfiddle.net/nazym/16/)

# java - jsoup 从表 td 获取 url

> ID：12128279
> 
> 赞同：0
> 
> 时间：2012-08-26T07:07:33.000
> 
> 标签：java, jsoup

```
Element tables = doc.select("table")
Elements myTds = tables.select("td:eq(0)"); 
```

......

```
thetext=td.text();
thehref=td.getElementsByTag("a[href]"); 
```

我正在从 HTML 页面读取表格。我想阅读

```
<td>
<a href="student-profiles/andy.html">Andy</a>
</td> 
```

我想阅读安迪和学生档案。正文正在打印安迪。我怎样才能得到href？我尝试了几件事，但不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:04:50.853

我能够做到这一点：

元素 myTds = tables.select("td:eq(0)"); 比 tds.attr(href);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:16:06.350

//thehref=td.getElementsByTag("a");

```
function simpleURL(){
        var anchors = document.getElementsByTagName('a');
        if(anchors != null & anchors.length > 0){
                thehref= anchors[1].href;  

        }       
    } 
```

# c++ - 以编程方式验证签名 dll 的 C++

> ID：12128280
> 
> 赞同：4
> 
> 时间：2012-08-26T07:07:47.457
> 
> 标签：c++, visual-studio-2010, dll, digital-signature

我有一个签名的 dll 并想在使用它之前验证它的签名。我的应用程序是由 C++ 编写的。如何以编程方式获取 dll 的签名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T07:41:11.143

您可以使用[WinVerifyTrust 功能](http://msdn.microsoft.com/en-us/library/aa388208%28v=vs.85%29.aspx)。
除了头部有 2 到 3 个字节的差异外，DLL 和 PE 几乎相同。
完整的代码示例在[这里](http://msdn.microsoft.com/en-us/library/aa382384%28VS.85%29.aspx)（也适用于 dll）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:46:07.457

MSDN 推荐的方法是运行属于 CryptoAPI 的 SignTool -

> SignTool 返回说明签名检查结果的命令行文本。此外，SignTool 返回一个退出代码为零表示成功执行，一个表示执行失败，两个表示执行完成但出现警告。

有关详细信息，请参阅[使用 SignTool 验证文件签名](http://msdn.microsoft.com/en-us/library/aa388171%28v=vs.85%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T07:50:09.843

选项之一是[CAPICOM 库](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388154%28v=vs.85%29.aspx)，它可以从 Microsoft[以 32 位可再发行版的形式获得。](http://www.microsoft.com/en-us/download/details.aspx?id=25281)验证码可以很简单：

```
CComPtr<Capicom::ISignedCode> pSignedCode;
ATLENSURE_SUCCEEDED(pSignedCode.CoCreateInstance(__uuidof(Capicom::SignedCode)));
ATLENSURE_SUCCEEDED(pSignedCode->put_FileName(CComBSTR(pszPath)));
HRESULT nVerifyResult = pSignedCode->Verify(ATL_VARIANT_FALSE); 
```

您还可以轻松获取其他信息，例如签名者、证书等。

如果您不想使用 CAPICOM，MSDN 建议在上面的代码片段中使用[类的](http://msdn.microsoft.com/en-us/library/windows/desktop/cc778518%28v=vs.85%29.aspx#_crypto2_digital_signature_objects)[替代选项。`SignedCode`](http://msdn.microsoft.com/en-us/library/windows/desktop/cc778518%28v=vs.85%29.aspx#_crypto2_digital_signature_objects)

# javascript - 序列化表单时的编码

> ID：12128283
> 
> 赞同：2
> 
> 时间：2012-08-26T07:08:53.153
> 
> 标签：javascript, html, serialization, encoding

当我在输入中插入常规英文字符然后序列化表单（form.serialize）时，没关系。但是当我输入格鲁吉亚字符（ასდფ）时，我遇到了编码问题，它显示如下：

```
%E1%83%A1%E1%83%90%E1%83%93%E1%83%A4%E1%83%90%E1%83%A1%E1%83%93%E1%83%A4\. 
```

提前感谢您的帮助

编辑：

问题是！！！--> 如何在不编码其值的情况下序列化表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:30:44.113

我知道这不是最好的解决方案，但我这样做了：

```
function stringify(array) {
    var result = '';
    for (var i = 0; i < array.length; i++) {
        if (i != 0)
            result += '&';
        result += array[i].name + '=' + array[i].value;
    }
    return result;
}

stringify(form.serializeArray()) 
```

现在字符没有编码

# c++ - 损坏的指针 - BST - 调试

> ID：12128285
> 
> 赞同：0
> 
> 时间：2012-08-26T07:09:11.767
> 
> 标签：c++, pointers, binary-search-tree, corrupt

我正在尝试编写简单的二叉搜索树类（BST）。

当我添加单个节点（例如，value = 10）时，根会更新，并且我在 BST::insert(...) 末尾使用 VS C++ 调试器进行了验证。

然后我尝试显示（案例陈述 3）节点（值 -10）并且没有打印任何内容。原因是，当调用 getRoot() 时，根为 NULL (??!!!)

有人可以帮我调试这个问题。

```
#include <iostream>
#include <stdio.h>
#include "bst_node.h"

class BST{
private:
    bst_node *root;

public:
    bst_node* getRoot();
    void insert(bst_node *, int val);
    void deleteValue(int val);
    void display(bst_node *);
    void destroy();

    BST()
    {
        root = NULL;
        std::cout<<"BST constructor"<<"\n";
    }

    ~BST()
    {
        std::cout<<"BST destructor"<<"\n";
    }
};

int main()
{
    int item;
    int choice;
    BST tree1;
    while(1)
    {
        printf("\n Choices are:\n");
        printf("\n 1.Insertbeg\n\n 2.deleteNode\n\n 3.display\n\n 4.exit\n\n");
        printf(" Enter U'r choice: ");
        scanf("%d",&choice);
        switch(choice)
        {
            case 1: 
                {
                    printf("Enter element to be inserted: ");
                    scanf("%d",&item);
                    tree1.insert(tree1.getRoot(), item); 
                    break;
                }
            case 2:
                {
                    printf("Enter element to be deleted: ");
                    scanf("%d",&item);
//                  tree1.deleteValue(item); 
                    break;
                }
            case 3:
                {
                    tree1.display(tree1.getRoot()); 
                    break;
                }
            case 4: 
                    exit(1);
                    break;
            default: printf("INVALID CHOICE TRY AGAIN\n");
        }
    }
}

void BST::insert(bst_node* root, int val)
{
    if( root == NULL)
    {
        // add first element 
        bst_node *new_node = bst_node::create_empty_node();
        new_node->val = val;
        root = new_node;
    }

    else if(val < root->val )
    {
        insert(root->l_child, val); 
    }

    else if (val >= root->val)
    {
        insert(root->r_child, val);
    }
}

void BST::display(bst_node *root)
{
    if(root == NULL)
    {
        return;
    }
    else
    {
        std::cout << root->val <<"\n";
        display(root->l_child);
        display(root->r_child);
    }
}

void BST::deleteValue(int val)
{
    std::cout<< " Do nothing";
}

bst_node* BST::getRoot()
{
    return root;
} 
```

bst_node.h

* * *

```
class bst_node
{
public:
    int val;
    bst_node *l_child;
    bst_node *r_child;
    static bst_node* create_empty_node();
};

bst_node* bst_node::create_empty_node()
{
    bst_node *new_node;
    new_node = new bst_node;
    new_node -> l_child = new_node -> r_child = NULL;
    return(new_node);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:14:24.427

您还通过将参数命名为来*隐藏*私有成员。所有修改都将应用于局部变量。例如这一行：`root``insert()` `root``root`

```
root = new_node; 
```

不会有任何影响。您正在为一个不再使用的变量设置一个新值。

这样做*通常是*一种不好的做法（有一些例外，例如 setter）。尝试重命名并检查它是否至少解决了您的一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:17:51.670

更改`void BST::insert(bst_node* root, int val)` 为`void BST::insert(bst_node*& root, int val)` 或`void BST::insert(bst_node** root, int val)`

对函数没有其他修改的最简单的方法是使用 bst_node*&

指针本身只是传递给函数的整数，然后复制此指针，因此更改指针的值不会在函数范围之外更改。对指针的引用将使您可以在函数范围之外进行更改。

# java - 删除时哈希表重新散列

> ID：12128288
> 
> 赞同：1
> 
> 时间：2012-08-26T07:09:46.537
> 
> 标签：java, resize, hashtable

有谁知道为什么 hashtable 的 java jdk 实现在删除时不重新散列表？

如果空间使用率太低怎么办？这不是减小尺寸和重新散列的理由吗？

就像负载因子 0.75 触发 rehash on put 一样，我们可以在表的密度上设置一个像 0.25 这样的下限（当然可以在此处对最佳值进行分析）并再次触发 rehash，前提是表的大小大于初始容量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T07:35:57.607

重新散列是一项昂贵的操作，基于 java 散列的数据结构试图避免它。他们仅在查找性能不佳时才进行重新散列。这就是这种数据结构的目的：查找性能。

这是来自 HashMap java 文档的引用：

> 在设置其初始容量时，应考虑映射中的预期条目数及其负载因子，以尽量减少重新哈希操作的次数。如果初始容量大于最大条目数除以负载因子，**则不会发生重新哈希操作。**
> 
> 如果要在 HashMap 实例中存储许多映射，则**创建具有足够大容量的映射将比让它根据需要执行自动重新散列以增长表更有效地存储映射**。

除了这个论点，Java 的创建者可能会认为，如果您的哈希表中有这么多元素，那么再次拥有它们的可能性非常大，因此无需重新哈希表两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T07:35:21.457

您应该询问 Sun/Oracle 工程师以了解为什么没有减小大小的阈值。

这是我的两分钱：

*   重新散列表格需要时间
*   检查每个删除操作都需要时间

另一方面：

*   可能您不会节省太多内存（表中的对象和节点将使用更多空间）
*   可能没有很多场景首先创建（一些）非常大的哈希表，然后清空它们并渴望未使用的空间。
*   您知道任何包含该行为的流行实现（减小表大小）

在编程和生活中一样，有很多事情可以做。有些仅适用于非常特定的情况。有些根本不值得痛苦。

# bash - 有没有办法避免 bash 中的位置参数？

> ID：12128296
> 
> 赞同：70
> 
> 时间：2012-08-26T07:11:57.493
> 
> 标签：bash, shell, scripting

我必须在 bash 中编写一个函数。该函数将接受大约 7 个参数。我知道我可以调用这样的函数：

调用带参数的函数：

```
function_name $arg1 $arg2 
```

我可以在函数中引用这样的参数：

```
function_name () {
   echo "Parameter #1 is $1"
} 
```

我的问题是，有没有更好的方法来引用函数内部的参数？我可以避免使用 $1, $2, $3, .... 的东西并简单地使用 $arg1, $arg2, ...吗？

是否有合适的方法，或者我是否需要将这些参数重新分配给函数内的其他一些变量？例如：

```
function_name () {
   $ARG1=$1
   echo "Parameter #1 is $ARG1"
} 
```

任何例子将不胜感激。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-26T07:41:58.617

这样做的常用方法是将参数分配给函数中的局部变量，即：

```
copy() {
    local from=${1}
    local to=${2}

    # ...
} 
```

* * *

另一种解决方案可能是*getopt* -style 选项解析。

```
copy() {
    local arg from to
    while getopts 'f:t:' arg
    do
        case ${arg} in
            f) from=${OPTARG};;
            t) to=${OPTARG};;
            *) return 1 # illegal option
        esac
    done
}

copy -f /tmp/a -t /tmp/b 
```

* * *

可悲的是，bash 无法处理更易读的长选项*，*即：

```
copy --from /tmp/a --to /tmp/b 
```

为此，您需要使用外部`getopt`程序（我认为它仅在 GNU 系统上具有长选项支持）或手动实现长选项解析器，即：

```
copy() {
    local from to

    while [[ ${1} ]]; do
        case "${1}" in
            --from)
                from=${2}
                shift
                ;;
            --to)
                to=${2}
                shift
                ;;
            *)
                echo "Unknown parameter: ${1}" >&2
                return 1
        esac

        if ! shift; then
            echo 'Missing parameter argument.' >&2
            return 1
        fi
    done
}

copy --from /tmp/a --to /tmp/b 
```

另请参阅：[在 bash shell 脚本中使用 getopts 获取长短命令行选项](https://stackoverflow.com/questions/402377/using-getopts-in-bash-shell-script-to-get-long-and-short-command-line-options)

* * *

您也可以偷懒，只需将“变量”作为参数传递给函数，即：

```
copy() {
    local "${@}"

    # ...
}

copy from=/tmp/a to=/tmp/b 
```

并且您将在函数中拥有`${from}`和`${to}`作为局部变量。

请注意，与以下相同的问题也适用——如果未传递特定变量，它将从父环境继承。您可能需要添加一条“安全线”，例如：

```
copy() {
    local from to    # reset first
    local "${@}"

    # ...
} 
```

以确保`${from}`并且`${to}`在未通过时将被取消设置。

* * *

如果您对某些*非常糟糕*的事情感兴趣，您还可以在调用函数时将参数分配为全局变量，即：

```
from=/tmp/a to=/tmp/b copy 
```

然后你可以在函数中使用`${from}`and 。请注意，您应该*始终*传递所有参数。否则，随机变量可能会泄漏到函数中。`${to}``copy()`

 *```
from= to=/tmp/b copy   # safe
to=/tmp/b copy         # unsafe: ${from} may be declared elsewhere 
```

* * *

如果你有 bash 4.1（我认为），你也可以尝试使用关联数组。它将允许您传递命名参数，但它*会*很丑陋。就像是：

```
args=( [from]=/tmp/a [to]=/tmp/b )
copy args 
```

然后在 中`copy()`，您需要[获取数组](https://stackoverflow.com/questions/4069188/how-to-pass-an-associative-array-as-argument-to-a-function-in-bash)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-26T11:05:32.643

你总是可以通过环境传递东西：

```
#!/bin/sh
foo() {
  echo arg1 = "$arg1"
  echo arg2 = "$arg2"
}

arg1=banana arg2=apple foo 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-05-15T02:47:57.263

您所要做的就是在进入函数调用的过程中命名变量。

```
function test() {
    echo $a
}

a='hello world' test
#prove variable didnt leak
echo $a . 
```

[![在此处输入图像描述](../Images/a089d1c341e86aed519558e9741df102.png)](https://i.stack.imgur.com/r7Mnx.png)

这不仅仅是函数的一个特性，你可以在它自己的脚本中拥有这个函数并调用`a='hello world' test.sh`它，它的工作原理是一样的

* * *

作为一个额外的乐趣，您可以将此方法与位置参数结合使用（假设您正在制作一个脚本并且某些用户可能不知道变量名称）。
哎呀，为什么不让它也为这些参数设置默认值呢？好吧，很容易！

```
function test2() {
    [[ -n "$1" ]] && local a="$1"; [[ -z "$a" ]] && local a='hi'
    [[ -n "$2" ]] && local b="$2"; [[ -z "$b" ]] && local b='bye'
    echo $a $b
}

#see the defaults
test2

#use positional as usual
test2 '' there
#use named parameter
a=well test2
#mix it up
b=one test2 nice

#prove variables didnt leak
echo $a $b . 
```

[![在此处输入图像描述](../Images/eacf16d9adb017602379c50ad39f9746.png)](https://i.stack.imgur.com/26Vtr.png)

请注意，如果`test`是它自己的脚本，则不需要使用`local`关键字。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-26T07:51:10.233

Shell 函数可以完全访问其调用范围内的任何可用变量，但在函数本身内用作局部变量的变量名*除外。*此外，函数内设置的任何非局部变量在函数被调用后在外部可用。考虑以下示例：

```
A=aaa
B=bbb

echo "A=$A B=$B C=$C"

example() {
    echo "example(): A=$A B=$B C=$C"

    A=AAA
    local B=BBB
    C=CCC

    echo "example(): A=$A B=$B C=$C"
}

example

echo "A=$A B=$B C=$C" 
```

此代码段具有以下输出：

```
A=aaa B=bbb C=
example(): A=aaa B=bbb C=
example(): A=AAA B=BBB C=CCC
A=AAA B=bbb C=CCC 
```

这种方法的明显缺点是函数不再是自包含的，并且在函数外部设置变量可能会产生意想不到的副作用。如果您想将数据传递给函数而不首先将其分配给变量，这也会使事情变得更加困难，因为该函数不再使用位置参数。

处理这个问题的最常见方法是使用*局部变量*作为参数和函数中的任何临时变量：

```
example() {
   local A="$1" B="$2" C="$3" TMP="/tmp"

   ...
} 
```

这避免了函数局部变量污染 shell 命名空间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-04T13:46:15.437

我想我有一个解决方案给你。通过一些技巧，您实际上可以将命名参数与数组一起传递给函数。

我开发的方法允许您访问传递给函数的参数，如下所示：

```
testPassingParams() {

    @var hello
    l=4 @array anArrayWithFourElements
    l=2 @array anotherArrayWithTwo
    @var anotherSingle
    @reference table   # references only work in bash >=4.3
    @params anArrayOfVariedSize

    test "$hello" = "$1" && echo correct
    #
    test "${anArrayWithFourElements[0]}" = "$2" && echo correct
    test "${anArrayWithFourElements[1]}" = "$3" && echo correct
    test "${anArrayWithFourElements[2]}" = "$4" && echo correct
    # etc...
    #
    test "${anotherArrayWithTwo[0]}" = "$6" && echo correct
    test "${anotherArrayWithTwo[1]}" = "$7" && echo correct
    #
    test "$anotherSingle" = "$8" && echo correct
    #
    test "${table[test]}" = "works"
    table[inside]="adding a new value"
    #
    # I'm using * just in this example:
    test "${anArrayOfVariedSize[*]}" = "${*:10}" && echo correct
}

fourElements=( a1 a2 "a3 with spaces" a4 )
twoElements=( b1 b2 )
declare -A assocArray
assocArray[test]="works"

testPassingParams "first" "${fourElements[@]}" "${twoElements[@]}" "single with spaces" assocArray "and more... " "even more..."

test "${assocArray[inside]}" = "adding a new value" 
```

换句话说，您不仅可以通过参数名称来调用参数（这构成了更具可读性的核心），您实际上还可以传递数组（以及对变量的引用——尽管此功能仅在 bash 4.3 中有效）！另外，映射变量都在本地范围内，就像 $1 （和其他）一样。

使这项工作的代码非常轻巧，并且可以在 bash 3 和 bash 4 中使用（这些是我测试过的唯一版本）。如果您对更多类似这样的技巧感兴趣，这些技巧可以使使用 bash 进行开发变得更好、更容易，您可以查看我的[Bash Infinity Framework](https://github.com/niieani/bash-oo-framework)，下面的代码就是为此目的而开发的。

```
Function.AssignParamLocally() {
    local commandWithArgs=( $1 )
    local command="${commandWithArgs[0]}"

    shift

    if [[ "$command" == "trap" || "$command" == "l="* || "$command" == "_type="* ]]
    then
        paramNo+=-1
        return 0
    fi

    if [[ "$command" != "local" ]]
    then
        assignNormalCodeStarted=true
    fi

    local varDeclaration="${commandWithArgs[1]}"
    if [[ $varDeclaration == '-n' ]]
    then
        varDeclaration="${commandWithArgs[2]}"
    fi
    local varName="${varDeclaration%%=*}"

    # var value is only important if making an object later on from it
    local varValue="${varDeclaration#*=}"

    if [[ ! -z $assignVarType ]]
    then
        local previousParamNo=$(expr $paramNo - 1)

        if [[ "$assignVarType" == "array" ]]
        then
            # passing array:
            execute="$assignVarName=( \"\${@:$previousParamNo:$assignArrLength}\" )"
            eval "$execute"
            paramNo+=$(expr $assignArrLength - 1)

            unset assignArrLength
        elif [[ "$assignVarType" == "params" ]]
        then
            execute="$assignVarName=( \"\${@:$previousParamNo}\" )"
            eval "$execute"
        elif [[ "$assignVarType" == "reference" ]]
        then
            execute="$assignVarName=\"\$$previousParamNo\""
            eval "$execute"
        elif [[ ! -z "${!previousParamNo}" ]]
        then
            execute="$assignVarName=\"\$$previousParamNo\""
            eval "$execute"
        fi
    fi

    assignVarType="$__capture_type"
    assignVarName="$varName"
    assignArrLength="$__capture_arrLength"
}

Function.CaptureParams() {
    __capture_type="$_type"
    __capture_arrLength="$l"
}

alias @trapAssign='Function.CaptureParams; trap "declare -i \"paramNo+=1\"; Function.AssignParamLocally \"\$BASH_COMMAND\" \"\$@\"; [[ \$assignNormalCodeStarted = true ]] && trap - DEBUG && unset assignVarType && unset assignVarName && unset assignNormalCodeStarted && unset paramNo" DEBUG; '
alias @param='@trapAssign local'
alias @reference='_type=reference @trapAssign local -n'
alias @var='_type=var @param'
alias @params='_type=params @param'
alias @array='_type=array @param' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-04T04:31:24.027

我个人希望看到某种语法，例如

```
func(a b){
    echo $a
    echo $b
} 
```

但由于这不是一回事，而且我看到很多对全局变量的引用（并非没有范围和命名冲突的警告），我将分享我的方法。

使用[Michal 回答](https://stackoverflow.com/a/12128447/1175714)`copy`中的函数：

```
copy(){
    cp $from $to
}
from=/tmp/a
to=/tmp/b
copy 
```

这很糟糕，因为`from`和`to`是如此宽泛的词，以至于任何数量的函数都可以使用它。您可能很快就会遇到命名冲突或手上的“泄漏”。

```
letter(){
    echo "From: $from"
    echo "To:   $to"
    echo
    echo "$1"
}

to=Emily
letter "Hello Emily, you're fired for missing two days of work."

# Result:
#   From: /tmp/a
#   To:   Emily

#   Hello Emily, you're fired for missing two days of work. 
```

所以我的方法是“命名空间”它们。我以函数命名变量，并在函数完成后将其删除。当然，我只将它用于具有默认值的可选值。否则，我只使用位置参数。

```
copy(){
    if [[ $copy_from ]] && [[ $copy_to ]]; then
        cp $copy_from $copy_to
        unset copy_from copy_to
    fi
}
copy_from=/tmp/a
copy_to=/tmp/b
copy # Copies /tmp/a to /tmp/b
copy # Does nothing, as it ought to
letter "Emily, you're 'not' re-hired for the 'not' bribe ;)"
# From: (no /tmp/a here!)
# To:

# Emily, you're 'not' re-hired for the 'not' bribe ;) 
```

我会成为一个糟糕的老板......

* * *

在实践中，我的函数名称比“复制”或“字母”更复杂。

我记忆中最近的一个例子是`get_input()`，它有`gi_no_sort`和`gi_prompt`。

*   `gi_no_sort`是一个真/假值，用于确定是否对完成建议进行排序。默认为真
*   `gi_prompt`是一个字符串……嗯，这是不言自明的。默认为“”。

函数采用的实际参数是上述输入提示的“完成建议”的来源，并且由于所述列表取自`$@`函数中，“命名参数”是可选的^([1])，并且没有明显的方法来区分在作为完成的字符串和布尔/提示消息之间，或者在 bash 中以空格分隔的任何内容之间，就此而言^([2])；上述解决方案最终为我省去了*很多*麻烦。

笔记：

1.  所以硬编码的`shift`and `$1`,`$2`等是不可能的。

2.  例如 是`"0 Enter a command: {1..9} $(ls)"`, 的值`0`,`"Enter a command:"`和一组`1 2 3 4 5 6 7 8 9 <directory contents>`? 或者`"0"`, `"Enter"`, `"a"`, and`"command:"`也是该集合的一部分？无论你喜欢与否，Bash 都会采用后者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-19T11:47:27.283

这是一个较老的话题，但我仍然想分享下面的功能（需要 bash 4）。它解析命名参数并在脚本环境中设置变量。只需确保您需要的所有参数都具有合理的默认值。最后的导出语句也可能只是一个 eval。与 shift 结合使用可以很好地扩展现有脚本，这些脚本已经采用了一些位置参数并且您不想更改语法，但仍然增加了一些灵活性。

```
parseOptions()
{
  args=("$@")
  for opt in "${args[@]}"; do
    if [[ ! "${opt}" =~ .*=.* ]]; then
      echo "badly formatted option \"${opt}\" should be: option=value, stopping..."
      return 1
    fi
    local var="${opt%%=*}"
    local value="${opt#*=}"
    export ${var}="${value}"
  done
  return 0
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-26T07:28:54.900

参数作为单个项目的元组发送到函数，因此它们没有名称，只有位置。这允许一些有趣的可能性，如下所示，但这确实意味着你被困在 1 美元上。$2 等关于是否将它们映射到更好的名称，问题归结为函数有多大，以及它会使阅读代码更加清晰。如果它很复杂，那么映射有意义的名称（$BatchID、$FirstName、$SourceFilePath）是个好主意。不过，对于简单的东西，它可能没有必要。如果您使用像 $arg1 这样的名称，我当然不会打扰。

现在，如果您只想回显参数，则可以遍历它们：

```
for $arg in "$@"
do
  echo "$arg"
done 
```

只是一个有趣的事实；除非您正在处理列表，否则您可能对更有用的东西感兴趣*

# android - Android - 无法播放此视频！这是怎么回事？

> ID：12128307
> 
> 赞同：0
> 
> 时间：2012-08-26T07:15:34.423
> 
> 标签：android, android-videoview, mediacontroller

我正在尝试创建一个应用程序，用户可以在其中播放应用内视频（已打包在应用程序中的视频）。否`SDCard`或在线流媒体正在进行。

但无论我使用什么策略，我都无法`.mp4`在我的应用程序中运行简单的视频。我试过将视频放在`assests`文件夹中，但没有运气。我试过将视频放在`res/raw`文件夹中，再次没有运气。

每次我运行应用程序时都会显示 - 无法播放此视频。

之前我只是`VideoView`用来运行视频，现在我正在使用`MediaController`错误`VideoView`消息不断出现

请帮忙，因为它困扰了很长一段时间，无论我使用什么解决方案，我仍然无法运行简单的视频。

我的活动代码：

```
 public class MainActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            MediaController mediac;
            VideoView video1;
            mediac = new MediaController(this);        
            video1 = (VideoView) findViewById(R.id.vv01);
            video1.setMediaController(mediac);
            mediac.setAnchorView(video1);

            video1.setVideoURI(Uri.parse("android.resource://com.example.test/raw/aa"));
video1.start();

        } 
```

我的 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <VideoView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/vv01"
        android:contentDescription="@string/app_name"
        />

</LinearLayout> 
```

我尝试运行应用程序时的日志猫：

```
08-26 13:27:31.023: I/dalvikvm(624): threadid=3: reacting to signal 3
08-26 13:27:31.593: I/dalvikvm(624): Wrote stack traces to '/data/anr/traces.txt'
08-26 13:27:31.643: I/dalvikvm(624): threadid=3: reacting to signal 3
08-26 13:27:31.913: I/dalvikvm(624): Wrote stack traces to '/data/anr/traces.txt'
08-26 13:27:31.923: D/dalvikvm(624): GC_CONCURRENT freed 147K, 3% free 9345K/9607K, paused 7ms+7ms
08-26 13:27:32.053: I/dalvikvm(624): threadid=3: reacting to signal 3
08-26 13:27:32.083: I/dalvikvm(624): Wrote stack traces to '/data/anr/traces.txt'
08-26 13:27:32.533: I/dalvikvm(624): threadid=3: reacting to signal 3
08-26 13:27:32.564: I/dalvikvm(624): Wrote stack traces to '/data/anr/traces.txt'
08-26 13:27:33.033: I/dalvikvm(624): threadid=3: reacting to signal 3
08-26 13:27:33.063: I/dalvikvm(624): Wrote stack traces to '/data/anr/traces.txt'
08-26 13:27:33.613: D/MediaPlayer(624): getMetadata
08-26 13:27:33.973: E/MediaPlayer(624): error (1, -2147483648)
08-26 13:27:34.093: E/MediaPlayer(624): Error (1,-2147483648)
08-26 13:27:34.093: D/VideoView(624): Error: 1,-2147483648 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:30:49.317

您必须在 onStart （以及媒体控制器）之外声明 VideoView。

如果这不起作用，请对每个命令和 Log.e 使用 try/catch

# ios - 如何在 CoreBluetooth 框架中传递设备 UUID 以便客户端稍后重新连接

> ID：12128312
> 
> 赞同：4
> 
> 时间：2012-08-26T07:16:19.590
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy, cbperipheral

我刚刚编写了一个简单的应用程序，我在其中扫描并连接到外围设备（这也是一个 IOS 设备）。但是，我从 ConnectPeripheral 函数返回的 CBPeripheral 对象没有设备 UUID，并且它始终为空。现在我试图了解我在哪里设置它以便它通过。这就是我正在做的事情。

为了宣传我正在做的服务

```
NSDictionary *advertisingDict=[NSDictionary dictionaryWithObject: services forKey:CBAdvertisementDataServiceUUIDsKey]
[manager startAdvertising:advertisingDicts]; 
```

（从框架我了解到我无法在广告包中传递设备 UUID。如果我在这里错了，请纠正我）

我的客户端扫描服务并进入功能

```
centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral 
```

正如预期的那样，peripheral.uuid 为空。如果我在这个外围设备上调用 connectPeripheral，它也可以正常工作。我不确定当 uuid 为空时它如何理解要连接的设备。另外，如果我想稍后重新连接，我需要做什么。我如何填写这个 uuid？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:04:18.127

It has a work around. You can pass it instead of the local name of the device like this:

```
[self.peripheralManager startAdvertising:@{CBAdvertisementDataLocalNameKey : *the UUID*}]; 
```

And in the other device in the didDiscoverPeripheral function you can get it like this:

```
[advertisementData objectForKey:@"kCBAdvDataLocalName"] 
```

# jquery - google.maps.marker 位置错误（在 json 中嵌套 google.maps.latLng 对象）

> ID：12128318
> 
> 赞同：0
> 
> 时间：2012-08-26T07:17:35.083
> 
> 标签：jquery, json, google-maps-api-3

我收到以下错误，似乎无法弄清楚为什么嵌套在某些 json 中的 google.maps.latLng 对象会导致错误，特别是：

**错误：属性值无效：（-19.240542583932452、148.15044705312494）**

有谁知道为什么这段代码会导致错误？当我 console.log *json.markers[n].latLng* firebug 声明它是一个 google.maps.latLng 对象时，尽管当它作为错误的一部分包含时，它清楚地表示为 .toString() 输出（不确定是否这仅仅是因为错误消息是否为字符串）。

我在我一直在研究的 jQuery Google Maps V3 API 插件上使用以下两种方法。这是一些片段，我没有包含完整的代码，因为它只会使帖子混乱。*为了清楚起见，我硬编码了一些 json，在我完成的插件中，它将通过 ajax 调用检索。*

在我的插件的 init 方法中：

```
 // Request list of markers and return the json object
var markers = methods.requestMarkers();

// Place the markers
methods.placeMarkers(markers); 
```

作为单独的方法：

```
requestMarkers : function () {

    return {"markers":[{"id":["7"],"latLng":[new google.maps.LatLng(-19.240542583932452, 148.15044705312494)]},{"id":["8"],"latLng":[new google.maps.LatLng(-28.0497654, 153.43591700000002)]}]}
},

placeMarkers : function ( json ) {

    if (json.markers.length > 0) {

        var markers = new Array();

        for(var n=0; n < json.markers.length; n++){ 

            markers[n] = new google.maps.Marker({
                map         : methods.map,
                position    : json.markers[n].latLng
            });
        }
    }
} 
```

完整的代码可以[在 Github 上找到，并且仍然是 wip。](https://github.com/Asciant/jquery.location/blob/1.1.0-wip/js/jquery.multiple.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:09:57.887

调用 LatLng 将始终返回一个 LatLng 对象，即使提供了错误的参数。当前参数是一个包含 1 个 LatLng 对象的数组，因此您必须将位置设置为

```
json.markers[n].latLng[0] 
```

**与 github 代码相关：**
requestMarkers 函数（使用 AJAX 代码）不会返回任何内容，因此标记不会包含 json 响应。`placeMarkers()`在里面打电话`done()`

```
requestMarkers : function () {

$.ajax({
type: "get",
url: methods.options.ASSOCIATED,
dataType: "json"
}).done(function( json ) {
if (json.markers.length > 0) {
methods.placeMarkers(json);
}
});

     } 
```

# c++ - 如何从 LLVM 中的 BasicBlock 中识别后端

> ID：12128322
> 
> 赞同：3
> 
> 时间：2012-08-26T07:18:02.003
> 
> 标签：c++, c, llvm, clang

我正在编写一个 LLVM pass 来分析和修改生成的 IR 代码。有没有办法识别后端，我的意思是知道 BasicBlock 的后继者是否实际上在路径上方的某个位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:15:06.960

就在这里。

首先，请注意，您需要区分“到 BB 的每条路径都必须经过 A”和“从 A 出发的某些路径可能会导致 BB”。

我认为您正在寻找第一种情况 - 判断基本块 BB 的后继 A 是否是执行必须通过才能到达 B 的基本块。

当这种情况发生时，我们说“A 支配 B”。检查优势的接口是通过[DominatorTree](http://llvm.org/docs/doxygen/html/classllvm_1_1DominatorTree.html)类（添加到您的 pass 的 getAnalysisUsage 函数中。有关示例，请参见[编写 llvm pass](http://llvm.org/docs/WritingAnLLVMPass.html#AU%3a%3aaddRequired)）。

# php - 如何在php中从网页中获取链接

> ID：12128323
> 
> 赞同：0
> 
> 时间：2012-08-26T07:18:11.917
> 
> 标签：php

我有以下链接列表。

```
<tr><td><a href="javascript:d(43755)"> Microsoft office 2010 professional plus </a></td><td> 2012-04-09 </td><td align="right"> 28% </td></tr>
<tr><td><a href="javascript:d(43742)"> Microsoft Office 2010 all versions </a></td><td> 2010-11-03 </td><td align="right"> 63% </td></tr>
<tr><td><a href="javascript:d(43747)"> Microsoft Office 2010 Home and student </a></td><td> 2012-05-10 </td><td align="right"> 51% </td></tr> 
```

有没有办法在一个数组中获取链接 javascript:d(number) 中的所有数字和另一个数组中的日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:25:22.410

我会使用 DOM 解析器。如果您熟悉 CurRL，则可以用很少的代码完成。您可以解析页面并查找所有链接并从中获取您需要的任何信息。

这是一个很好的 CurL 指南：[curl 教程](http://net.tutsplus.com/tutorials/php/techniques-and-resources-for-mastering-curl/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T07:25:09.290

```
$input = '<tr>...........YOU PAGE HERE';
$result = array(); // your result array
preg_match_all('/d\((\d+)\).*?(\d{4}-\d{2}-\d{2})/', $input, $result, PREG_PATTERN_ORDER);
$numbers = $result[1]; // your numbers
$dates = $reult[2]; // your dates 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T07:32:40.157

我推荐这个小库[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)

# android - 如何在 Android 中更改 TextView 的 fontFamily

> ID：12128331
> 
> 赞同：802
> 
> 时间：2012-08-26T07:19:17.997
> 
> 标签：android, android-layout, textview, typeface

所以我想在 Android 中更改，`android:fontFamily`但在 Android 中没有看到任何预定义的字体。如何选择其中一个预定义的？我真的不需要定义自己的 TypeFace，但我需要的只是与现在显示的不同的东西。

```
<TextView
    android:id="@+id/HeaderText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="52dp"
    android:gravity="center"
    android:text="CallerBlocker"
    android:textSize="40dp"
    android:fontFamily="Arial"
 /> 
```

看来我在那里所做的不会真的奏效！顺便说一句`android:fontFamily="Arial"`，这是一个愚蠢的尝试！

* * *

## 回答 #1

> 赞同：1724
> 
> 时间：2012-11-11T09:22:26.737

从 android 4.1 / 4.2 / 5.0 开始，以下[Roboto](https://material.google.com/resources/roboto-noto-fonts.html)字体系列可用：

```
android:fontFamily="sans-serif"           // roboto regular
android:fontFamily="sans-serif-light"     // roboto light
android:fontFamily="sans-serif-condensed" // roboto condensed
android:fontFamily="sans-serif-black"     // roboto black
android:fontFamily="sans-serif-thin"      // roboto thin (android 4.2)
android:fontFamily="sans-serif-medium"    // roboto medium (android 5.0) 
```

[![在此处输入图像描述](../Images/a9800b8c33ac859a0d2473045929866a.png)](https://i.stack.imgur.com/M2yxI.png)

结合

```
android:textStyle="normal|bold|italic" 
```

这 16 种变体是可能的：

*   常规机器人
*   机器人斜体
*   机器人粗体
*   Roboto 粗斜体
*   机器人灯
*   Roboto-Light 斜体
*   机器人薄
*   Roboto-Thin 斜体
*   机器人浓缩
*   Roboto-Condensed 斜体
*   Roboto-Condensed 粗体
*   Roboto-Condensed 粗斜体
*   机械黑
*   Roboto-黑色斜体
*   中型机器人
*   Roboto 中斜体

`fonts.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="font_family_light">sans-serif-light</string>
    <string name="font_family_medium">sans-serif-medium</string>
    <string name="font_family_regular">sans-serif</string>
    <string name="font_family_condensed">sans-serif-condensed</string>
    <string name="font_family_black">sans-serif-black</string>
    <string name="font_family_thin">sans-serif-thin</string>
</resources> 
```

* * *

## 回答 #2

> 赞同：246
> 
> 时间：2017-03-23T12:51:32.553

从**Android-Studio 3.0**开始 ，更改字体系列非常容易

使用支持库 26，它将适用于运行 Android API 版本 16 及更高版本的设备

`font`在目录下创建一个文件夹。`res`下载您想要的字体并将其粘贴到`font`文件夹中。结构应该如下所示

[![这里](../Images/43149fcdb4338655f9e17aa1a6d7d2c6.png)](https://i.stack.imgur.com/eiChI.png)

**注意：**从 Android 支持库 26.0 开始，您必须声明两组属性（ android: 和 app: ）以确保您的字体在运行 Api 26 或更低版本的设备上加载。

现在您可以使用更改**布局**中的字体

```
<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:fontFamily="@font/dancing_script"
app:fontFamily="@font/dancing_script"/> 
```

**以编程方式**更改

 **```
 Typeface typeface = getResources().getFont(R.font.myfont);
   //or to support all versions use
Typeface typeface = ResourcesCompat.getFont(context, R.font.myfont);
 textView.setTypeface(typeface); 
```

**要使用styles.xml**更改字体，请创建样式

```
 <style name="Regular">
        <item name="android:fontFamily">@font/dancing_script</item>
        <item name="fontFamily">@font/dancing_script</item>
        <item name="android:textStyle">normal</item>
 </style> 
```

并将此样式应用于`TextView`

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    style="@style/Regular"/> 
```

您还可以创建自己的**字体系列**

**-**右键单击​​字体文件夹，然后转到**新建 > 字体资源文件**。将出现新建资源文件窗口。

**-**输入**文件名**，然后单击**确定**。新字体资源 XML 在编辑器中打开。

例如，在此处编写您自己的字体系列

```
<font-family xmlns:android="http://schemas.android.com/apk/res/android">
    <font
        android:fontStyle="normal"
        android:fontWeight="400"
        android:font="@font/lobster_regular" />
    <font
        android:fontStyle="italic"
        android:fontWeight="400"
        android:font="@font/lobster_italic" />
</font-family> 
```

这只是将特定 fontStyle 和 fontWeight 映射到将用于呈现该特定变体的字体资源。fontStyle 的有效值是 normal 或 italic；并且 fontWeight 符合[CSS 字体粗细规范](https://www.w3.org/TR/css-fonts-3/#font-weight-numeric-values)

**1.**要**更改****布局**中的字体系列，您可以编写

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fontFamily="@font/lobster"/> 
```

**2.以****编程方式**更改

 **```
 Typeface typeface = getResources().getFont(R.font.lobster);
   //or to support all versions use
Typeface typeface = ResourcesCompat.getFont(context, R.font.lobster);
 textView.setTypeface(typeface); 
```

**更改整个 App 的字体**在AppTheme 添加这两行

```
 <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
     <item name="android:fontFamily">@font/your_font</item>
     <item name="fontFamily">@font/your_font</item>
  </style> 
```

请参阅[文档](https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml.html)，[Android 自定义字体教程](https://www.journaldev.com/13291/android-custom-fonts-tutorial)了解更多信息

* * *

## 回答 #3

> 赞同：239
> 
> 时间：2012-08-26T07:38:39.990

这是以编程方式设置字体的方法：

```
TextView tv = (TextView) findViewById(R.id.appname);
Typeface face = Typeface.createFromAsset(getAssets(),
            "fonts/epimodem.ttf");
tv.setTypeface(face); 
```

将字体文件放在您的资产文件夹中。在我的例子中，我创建了一个名为 fonts 的子目录。

**编辑：**如果您想知道资产文件夹在哪里，请参阅[此问题](https://stackoverflow.com/questions/18302603/where-to-place-assets-folder-in-android-studio)

* * *

## 回答 #4

> 赞同：108
> 
> 时间：2015-04-09T08:38:04.337

我不得不解析`/system/etc/fonts.xml`最近的一个项目。以下是 Lollipop 的当前字体系列：

```
╔════╦════════════════════════════╦═════════════════════════════╗
║    ║ FONT FAMILY                ║ TTF FILE                    ║
╠════╬════════════════════════════╬═════════════════════════════╣
║  1 ║ casual                     ║ ComingSoon.ttf              ║
║  2 ║ cursive                    ║ DancingScript-Regular.ttf   ║
║  3 ║ monospace                  ║ DroidSansMono.ttf           ║
║  4 ║ sans-serif                 ║ Roboto-Regular.ttf          ║
║  5 ║ sans-serif-black           ║ Roboto-Black.ttf            ║
║  6 ║ sans-serif-condensed       ║ RobotoCondensed-Regular.ttf ║
║  7 ║ sans-serif-condensed-light ║ RobotoCondensed-Light.ttf   ║
║  8 ║ sans-serif-light           ║ Roboto-Light.ttf            ║
║  9 ║ sans-serif-medium          ║ Roboto-Medium.ttf           ║
║ 10 ║ sans-serif-smallcaps       ║ CarroisGothicSC-Regular.ttf ║
║ 11 ║ sans-serif-thin            ║ Roboto-Thin.ttf             ║
║ 12 ║ serif                      ║ NotoSerif-Regular.ttf       ║
║ 13 ║ serif-monospace            ║ CutiveMono.ttf              ║
╚════╩════════════════════════════╩═════════════════════════════╝ 
```

* * *

这是解析器（基于[FontListParser](https://github.com/android/platform_frameworks_base/blob/59701b9ba5c453e327bc0e6873a9f6ff87a10391/graphics/java/android/graphics/FontListParser.java)）：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

import android.util.Xml;

/**
 * Helper class to get the current font families on an Android device.</p>
 * 
 * Usage:</p> {@code List<SystemFont> fonts = FontListParser.safelyGetSystemFonts();}</p>
 */
public final class FontListParser {

    private static final File FONTS_XML = new File("/system/etc/fonts.xml");

    private static final File SYSTEM_FONTS_XML = new File("/system/etc/system_fonts.xml");

    public static List<SystemFont> getSystemFonts() throws Exception {
        String fontsXml;
        if (FONTS_XML.exists()) {
            fontsXml = FONTS_XML.getAbsolutePath();
        } else if (SYSTEM_FONTS_XML.exists()) {
            fontsXml = SYSTEM_FONTS_XML.getAbsolutePath();
        } else {
            throw new RuntimeException("fonts.xml does not exist on this system");
        }
        Config parser = parse(new FileInputStream(fontsXml));
        List<SystemFont> fonts = new ArrayList<>();

        for (Family family : parser.families) {
            if (family.name != null) {
                Font font = null;
                for (Font f : family.fonts) {
                    font = f;
                    if (f.weight == 400) {
                        break;
                    }
                }
                SystemFont systemFont = new SystemFont(family.name, font.fontName);
                if (fonts.contains(systemFont)) {
                    continue;
                }
                fonts.add(new SystemFont(family.name, font.fontName));
            }
        }

        for (Alias alias : parser.aliases) {
            if (alias.name == null || alias.toName == null || alias.weight == 0) {
                continue;
            }
            for (Family family : parser.families) {
                if (family.name == null || !family.name.equals(alias.toName)) {
                    continue;
                }
                for (Font font : family.fonts) {
                    if (font.weight == alias.weight) {
                        fonts.add(new SystemFont(alias.name, font.fontName));
                        break;
                    }
                }
            }
        }

        if (fonts.isEmpty()) {
            throw new Exception("No system fonts found.");
        }

        Collections.sort(fonts, new Comparator<SystemFont>() {

            @Override
            public int compare(SystemFont font1, SystemFont font2) {
                return font1.name.compareToIgnoreCase(font2.name);
            }

        });

        return fonts;
    }

    public static List<SystemFont> safelyGetSystemFonts() {
        try {
            return getSystemFonts();
        } catch (Exception e) {
            String[][] defaultSystemFonts = {
                    {
                            "cursive", "DancingScript-Regular.ttf"
                    }, {
                            "monospace", "DroidSansMono.ttf"
                    }, {
                            "sans-serif", "Roboto-Regular.ttf"
                    }, {
                            "sans-serif-light", "Roboto-Light.ttf"
                    }, {
                            "sans-serif-medium", "Roboto-Medium.ttf"
                    }, {
                            "sans-serif-black", "Roboto-Black.ttf"
                    }, {
                            "sans-serif-condensed", "RobotoCondensed-Regular.ttf"
                    }, {
                            "sans-serif-thin", "Roboto-Thin.ttf"
                    }, {
                            "serif", "NotoSerif-Regular.ttf"
                    }
            };
            List<SystemFont> fonts = new ArrayList<>();
            for (String[] names : defaultSystemFonts) {
                File file = new File("/system/fonts", names[1]);
                if (file.exists()) {
                    fonts.add(new SystemFont(names[0], file.getAbsolutePath()));
                }
            }
            return fonts;
        }
    }

    /* Parse fallback list (no names) */
    public static Config parse(InputStream in) throws XmlPullParserException, IOException {
        try {
            XmlPullParser parser = Xml.newPullParser();
            parser.setInput(in, null);
            parser.nextTag();
            return readFamilies(parser);
        } finally {
            in.close();
        }
    }

    private static Alias readAlias(XmlPullParser parser) throws XmlPullParserException, IOException {
        Alias alias = new Alias();
        alias.name = parser.getAttributeValue(null, "name");
        alias.toName = parser.getAttributeValue(null, "to");
        String weightStr = parser.getAttributeValue(null, "weight");
        if (weightStr == null) {
            alias.weight = 0;
        } else {
            alias.weight = Integer.parseInt(weightStr);
        }
        skip(parser); // alias tag is empty, ignore any contents and consume end tag
        return alias;
    }

    private static Config readFamilies(XmlPullParser parser) throws XmlPullParserException,
            IOException {
        Config config = new Config();
        parser.require(XmlPullParser.START_TAG, null, "familyset");
        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            if (parser.getName().equals("family")) {
                config.families.add(readFamily(parser));
            } else if (parser.getName().equals("alias")) {
                config.aliases.add(readAlias(parser));
            } else {
                skip(parser);
            }
        }
        return config;
    }

    private static Family readFamily(XmlPullParser parser) throws XmlPullParserException,
            IOException {
        String name = parser.getAttributeValue(null, "name");
        String lang = parser.getAttributeValue(null, "lang");
        String variant = parser.getAttributeValue(null, "variant");
        List<Font> fonts = new ArrayList<Font>();
        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String tag = parser.getName();
            if (tag.equals("font")) {
                String weightStr = parser.getAttributeValue(null, "weight");
                int weight = weightStr == null ? 400 : Integer.parseInt(weightStr);
                boolean isItalic = "italic".equals(parser.getAttributeValue(null, "style"));
                String filename = parser.nextText();
                String fullFilename = "/system/fonts/" + filename;
                fonts.add(new Font(fullFilename, weight, isItalic));
            } else {
                skip(parser);
            }
        }
        return new Family(name, fonts, lang, variant);
    }

    private static void skip(XmlPullParser parser) throws XmlPullParserException, IOException {
        int depth = 1;
        while (depth > 0) {
            switch (parser.next()) {
            case XmlPullParser.START_TAG:
                depth++;
                break;
            case XmlPullParser.END_TAG:
                depth--;
                break;
            }
        }
    }

    private FontListParser() {

    }

    public static class Alias {

        public String name;

        public String toName;

        public int weight;
    }

    public static class Config {

        public List<Alias> aliases;

        public List<Family> families;

        Config() {
            families = new ArrayList<Family>();
            aliases = new ArrayList<Alias>();
        }

    }

    public static class Family {

        public List<Font> fonts;

        public String lang;

        public String name;

        public String variant;

        public Family(String name, List<Font> fonts, String lang, String variant) {
            this.name = name;
            this.fonts = fonts;
            this.lang = lang;
            this.variant = variant;
        }

    }

    public static class Font {

        public String fontName;

        public boolean isItalic;

        public int weight;

        Font(String fontName, int weight, boolean isItalic) {
            this.fontName = fontName;
            this.weight = weight;
            this.isItalic = isItalic;
        }

    }

    public static class SystemFont {

        public String name;

        public String path;

        public SystemFont(String name, String path) {
            this.name = name;
            this.path = path;
        }

    }
} 
```

* * *

随意在您的项目中使用上述类。例如，您可以为用户提供一系列字体系列并根据他们的偏好设置字体。

一个不完整的小例子：

```
final List<FontListParser.SystemFont> fonts = FontListParser.safelyGetSystemFonts();
String[] items = new String[fonts.size()];
for (int i = 0; i < fonts.size(); i++) {
    items[i] = fonts.get(i).name;
}

new AlertDialog.Builder(this).setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        FontListParser.SystemFont selectedFont = fonts.get(which);
        // TODO: do something with the font
        Toast.makeText(getApplicationContext(), selectedFont.path, Toast.LENGTH_LONG).show();
    }
}).show(); 
```

* * *

## 回答 #5

> 赞同：52
> 
> 时间：2012-08-26T07:42:35.310

Android 不允许您从 XML 布局设置自定义字体。相反，您必须将特定字体文件捆绑在应用程序的资产文件夹中，并以编程方式进行设置。就像是：

```
TextView textView = (TextView) findViewById(<your TextView ID>);
Typeface typeFace = Typeface.createFromAsset(getAssets(), "<file name>");
textView.setTypeface(typeFace); 
```

请注意，您只能在调用 setContentView() 后运行此代码。此外，Android 仅支持某些字体，并且应为 a`.ttf (TrueType)`或`.otf (OpenType)`格式。即使这样，某些字体也可能无法使用。

[这](http://www.fontsquirrel.com/fonts/Chantelli-Antiqua)是一种绝对适用于 Android 的字体，您可以使用它来确认您的代码是否正常工作，以防您的字体文件不受 Android 支持。

Android O 更新：根据 Roger 的评论，现在可以[在 Android O 中使用 XML 。](https://developer.android.com/preview/features/working-with-fonts.html)

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2015-08-06T22:59:40.077

以编程方式设置 Roboto：

```
paint.setTypeface(Typeface.create("sans-serif-thin", Typeface.NORMAL)); 
```

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2014-10-03T19:21:58.020

如果你想要以编程方式，你可以使用

```
label.setTypeface(Typeface.SANS_SERIF, Typeface.ITALIC); 
```

您可以在哪里`SANS_SERIF`使用：

*   `DEFAULT`
*   `DEFAULT_BOLD`
*   `MONOSPACE`
*   `SANS_SERIF`
*   `SERIF`

您可以在哪里`ITALIC`使用：

*   `BOLD`
*   `BOLD_ITALIC`
*   `ITALIC`
*   `NORMAL`

一切都[在 Android 开发人员上说明](http://developer.android.com/intl/es/reference/android/graphics/Typeface.html)

* * *

## 回答 #8

> 赞同：27
> 
> 时间：2020-09-20T17:59:01.890

**Kotlin Code - Textview 从资源文件夹设置自定义字体**

*从res -> font -> avenir_next_regular.ttf*设置自定义字体

 *```
textView!!.typeface = ResourcesCompat.getFont(context!!, R.font.avenir_next_regular) 
```

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2012-08-26T07:41:59.970

它与 相同`android:typeface`。

内置字体有：

*   普通的
*   无
*   衬线
*   等宽

参见[android:typeface](http://developer.android.com/reference/android/widget/TextView.html#attr_android:typeface)。

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2019-06-04T05:05:30.420

```
Typeface typeface = ResourcesCompat.getFont(context, R.font.font_name);
textView.setTypeface(typeface); 
```

以编程方式从 res>font 目录轻松地将字体设置为任何文本视图

* * *

## 回答 #11

> 赞同：16
> 
> 时间：2019-10-08T08:18:39.903

我认为我为时已晚，但也许这个解决方案对其他人有帮助。要使用自定义字体，请将字体文件放在字体目录中。

```
textView.setTypeface(ResourcesCompat.getFont(this, R.font.lato)); 
```

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2014-07-06T13:50:38.837

我正在使用 Chris Jenx 的优秀库[Calligraphy](https://github.com/chrisjenx/Calligraphy)，旨在让您在 android 应用程序中使用自定义字体。试试看！

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2019-10-09T07:25:23.893

一种简单的方法是在项目中添加所需的**字体**。

转到**文件->新建->新建资源目录** 选择***字体***

这将在您的资源中创建一个新目录**font 。**

下载您的**字体 (.ttf)**。我同样使用[https://fonts.google.com](https://fonts.google.com)

将其添加到您的**字体**文件夹，然后在 XML 中或以编程方式使用它们。

XML -

```
<TextView 
android:id="@+id/textView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:fontFamily="@font/your_font"/> 
```

以编程方式 -

```
 Typeface typeface = ResourcesCompat.getFont(this, R.font.your_font);
 textView.setTypeface(typeface); 
```

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2012-08-26T07:38:37.797

你想要的是不可能的。您必须需要`TypeFace`在您的代码中设置。

你`XML`可以做的是

```
android:typeface="sans" | "serif" | "monospace" 
```

除此之外，你不能在 XML 中使用字体。:)

因为`Arial`您需要在代码中设置字体。

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2015-04-23T21:52:04.407

管理字体的一种简单方法是通过资源声明它们，如下所示：

```
<!--++++++++++++++++++++++++++-->
<!--added on API 16 (JB - 4.1)-->
<!--++++++++++++++++++++++++++-->
<!--the default font-->
<string name="fontFamily__roboto_regular">sans-serif</string>
<string name="fontFamily__roboto_light">sans-serif-light</string>
<string name="fontFamily__roboto_condensed">sans-serif-condensed</string>

<!--+++++++++++++++++++++++++++++-->
<!--added on API 17 (JBMR1 - 4.2)-->
<!--+++++++++++++++++++++++++++++-->
<string name="fontFamily__roboto_thin">sans-serif-thin</string>

<!--+++++++++++++++++++++++++++-->
<!--added on Lollipop (LL- 5.0)-->
<!--+++++++++++++++++++++++++++-->
<string name="fontFamily__roboto_medium">sans-serif-medium</string>
<string name="fontFamily__roboto_black">sans-serif-black</string>
<string name="fontFamily__roboto_condensed_light">sans-serif-condensed-light</string> 
```

这是基于源代码[**here**](https://android.googlesource.com/platform/frameworks/base/+/lollipop-release/data/fonts/system_fonts.xml)和[**here**](https://android.googlesource.com/platform/frameworks/base/+/master/data/fonts/fonts.xml)

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2017-07-26T12:57:24.837

动态地，您可以使用这个在 xml 中设置类似于 android:fontFamily 的 fontfamily，

```
For Custom font:

 TextView tv = ((TextView) v.findViewById(R.id.select_item_title));
 Typeface face=Typeface.createFromAsset(getAssets(),"fonts/mycustomfont.ttf"); 
 tv.setTypeface(face);

For Default font:

 tv.setTypeface(Typeface.create("sans-serif-medium",Typeface.NORMAL)); 
```

这些是使用的***默认字体***系列列表，通过替换双引号字符串**“sans-serif-medium”来使用其中的任何一个**

```
FONT FAMILY                    TTF FILE                    

1  casual                      ComingSoon.ttf              
2  cursive                     DancingScript-Regular.ttf   
3  monospace                   DroidSansMono.ttf           
4  sans-serif                  Roboto-Regular.ttf          
5  sans-serif-black            Roboto-Black.ttf            
6  sans-serif-condensed        RobotoCondensed-Regular.ttf 
7  sans-serif-condensed-light  RobotoCondensed-Light.ttf   
8  sans-serif-light            Roboto-Light.ttf            
9  sans-serif-medium           Roboto-Medium.ttf           
10  sans-serif-smallcaps       CarroisGothicSC-Regular.ttf 
11  sans-serif-thin            Roboto-Thin.ttf             
12  serif                      NotoSerif-Regular.ttf       
13  serif-monospace            CutiveMono.ttf 
```

“mycustomfont.ttf”是 ttf 文件。***路径***将在*src/assets/fonts/mycustomfont.ttf中，您可以在此*[默认字体系列](https://stackoverflow.com/questions/39535475/what-is-the-default-font-family-in-android#39536066)中参考有关默认字体的更多信息

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2019-11-12T15:43:22.487

如果您使用的是 Android Studio 3.5+，更改字体非常简单。在设计视图上选择文本小部件并在属性窗口上检查 fontFamily。值下拉列表包含所有可用的字体，您可以从中选择一种。如果您正在寻找 Google 字体，请单击更多字体选项。

**属性窗口** [![属性窗口](../Images/96862ac7a109fb526d3f4bc8414da84e.png)](https://i.stack.imgur.com/7E1xn.png)

**谷歌字体** [![谷歌字体](../Images/92f7f498b16a93912f505b5ce8e1fdc5.png)](https://i.stack.imgur.com/xzUjM.png)

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2014-04-08T10:17:21.070

通过一些试验和错误，我学到了以下内容。

在 *.xml 中，您可以将常用字体与以下功能结合起来，而不仅仅是字体：

```
 android:fontFamily="serif" 
 android:textStyle="italic" 
```

有了这两种风格，在任何其他情况下都不需要使用字体。fontfamily&textStyle 的组合范围更大。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2015-03-04T08:21:27.140

android:fontFamily 的有效值在 /system/etc/system_fonts.xml(4.x) 或 /system/etc/fonts.xml(5.x) 中定义。但是设备制造商可能会对其进行修改，因此设置 fontFamily 值所使用的实际字体取决于指定设备的上述文件。

在 AOSP 中，Arial 字体是有效的，但必须使用“arial”而不是“Arial”来定义，例如**android:fontFamily="arial"**。快速查看 Kitkat 的 system_fonts.xml

```
 <family>
    <nameset>
        <name>sans-serif</name>
        <name>arial</name>
        <name>helvetica</name>
        <name>tahoma</name>
        <name>verdana</name>
    </nameset>
    <fileset>
        <file>Roboto-Regular.ttf</file>
        <file>Roboto-Bold.ttf</file>
        <file>Roboto-Italic.ttf</file>
        <file>Roboto-BoldItalic.ttf</file>
    </fileset>
</family> 
```

///////////////////////////////////////// //////////////////////

在布局中定义“字体”有三个相关的 xml 属性—— **android:fontFamily**、**android:typeface**和**android:textStyle**。“fontFamily”和“textStyle”或“typeface”和“textStyle”的组合可以用来改变文本中字体的外观，单独使用也是如此。**TextView.java**中的代码片段如下：

```
 private void setTypefaceFromAttrs(String familyName, int typefaceIndex, int styleIndex) {
    Typeface tf = null;
    if (familyName != null) {
        tf = Typeface.create(familyName, styleIndex);
        if (tf != null) {
            setTypeface(tf);
            return;
        }
    }
    switch (typefaceIndex) {
        case SANS:
            tf = Typeface.SANS_SERIF;
            break;

        case SERIF:
            tf = Typeface.SERIF;
            break;

        case MONOSPACE:
            tf = Typeface.MONOSPACE;
            break;
    }
    setTypeface(tf, styleIndex);
}

    public void setTypeface(Typeface tf, int style) {
    if (style > 0) {
        if (tf == null) {
            tf = Typeface.defaultFromStyle(style);
        } else {
            tf = Typeface.create(tf, style);
        }

        setTypeface(tf);
        // now compute what (if any) algorithmic styling is needed
        int typefaceStyle = tf != null ? tf.getStyle() : 0;
        int need = style & ~typefaceStyle;
        mTextPaint.setFakeBoldText((need & Typeface.BOLD) != 0);
        mTextPaint.setTextSkewX((need & Typeface.ITALIC) != 0 ? -0.25f : 0);
    } else {
        mTextPaint.setFakeBoldText(false);
        mTextPaint.setTextSkewX(0);
        setTypeface(tf);
    }
} 
```

从代码中我们可以看到：

1.  如果设置了“fontFamily”，则“字体”将被忽略。
2.  “字体”具有标准和有限的有效值。实际上，这些值是“normal”“sans”“serif”和“monospace”，它们可以在 system_fonts.xml(4.x) 或 fonts.xml(5.x) 中找到。实际上“normal”和“sans”都是系统的默认字体。
3.  “fontFamily”可用于设置内置字体的所有字体，而“typeface”仅提供“sans-serif”“serif”和“monospace”（世界三大类字体类型）的典型字体.
4.  当只设置“textStyle”时，我们实际上设置了默认字体和指定样式。有效值为“正常”“粗体”“斜体”和“粗体|斜体”。

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2019-12-05T09:55:30.790

您也可以通过在 res 目录下添加一个字体文件夹来做到这一点，如下所示。

[![在此处输入图像描述](../Images/2ca07a359eaa5999a092d793584715c7.png)](https://i.stack.imgur.com/F4Dj3.png)

然后，选择字体作为资源类型。 [![在此处输入图像描述](../Images/6351727a8df92190c0aa64c731f06dff.png)](https://i.stack.imgur.com/nEEb5.png)

[您可以从https://www.1001fonts.com/](https://www.1001fonts.com/)找到可用的字体，然后将 TTF 文件提取到此字体目录。

[![在此处输入图像描述](../Images/d467f094b1655159f11b0dd0b16b329e.png)](https://i.stack.imgur.com/qHX6l.png)

最后，只需通过添加 android:fontFamily:"@font/urfontfilename" 来更改包含您的 textview 的 XML 文件

[![在此处输入图像描述](../Images/2ce0e7707bf14293766ecb71019e6fb5.png)](https://i.stack.imgur.com/FI9WW.png)

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2016-08-09T09:47:41.857

这是在某些情况下可以工作的**更简单的方法。**原理是在你的xml布局中添加一个不可见的TextVview，并在java代码中**获取它的typeFace 。**

xml文件中的布局：

```
 <TextView
        android:text="The classic bread is made of flour hot and salty. The classic bread is made of flour hot and salty. The classic bread is made of flour hot and salty."
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:fontFamily="sans-serif-thin"
        android:id="@+id/textViewDescription"/> 
```

和java代码：

```
myText.setTypeface(textViewSelectedDescription.getTypeface()); 
```

它对我有用（例如在 TextSwitcher 中）。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2019-02-16T05:26:42.797

试试这个：

```
TextView textview = (TextView) findViewById(R.id.textview);

Typeface tf= Typeface.createFromAsset(getAssets(),"fonts/Tahoma.ttf");
textview .setTypeface(tf); 
```

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2020-06-17T08:36:10.840

要通过程序设置字体，请编写...

```
 TextView tv7 = new TextView(this);
     tv7.setText(" TIME ");    
     tv7.setTypeface(Typeface.create("sans-serif-condensed",Typeface.BOLD));
     tv7.setTextSize(12);
     tbrow.addView(tv7); 
```

名称“sans-serif-condensed”是从 fonts.xml 文件中引用的，该文件应该在 app--> res--> values 文件夹中创建，并且其中包含字体。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="font_family_light">sans-serif-light</string>
    <string name="font_family_medium">sans-serif-medium</string>
    <string name="font_family_regular">sans-serif</string>
    <string name="font_family_condensed">sans-serif-condensed</string>
    <string name="font_family_black">sans-serif-black</string>
    <string name="font_family_thin">sans-serif-thin</string>
</resources> 
```

希望这很清楚！

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2016-02-19T07:33:44.243

```
<string name="font_family_display_4_material">sans-serif-light</string>
<string name="font_family_display_3_material">sans-serif</string>
<string name="font_family_display_2_material">sans-serif</string>
<string name="font_family_display_1_material">sans-serif</string>
<string name="font_family_headline_material">sans-serif</string>
<string name="font_family_title_material">sans-serif-medium</string>
<string name="font_family_subhead_material">sans-serif</string>
<string name="font_family_menu_material">sans-serif</string>
<string name="font_family_body_2_material">sans-serif-medium</string>
<string name="font_family_body_1_material">sans-serif</string>
<string name="font_family_caption_material">sans-serif</string>
<string name="font_family_button_material">sans-serif-medium</string> 
```

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2017-05-10T06:51:48.990

如果您想在很多地方使用相同字体系列的 TextView，请扩展 TextView 类并像这样设置您的字体：-

```
public class ProximaNovaTextView extends TextView {

    public ProximaNovaTextView(Context context) {
        super(context);

        applyCustomFont(context);
    }

    public ProximaNovaTextView(Context context, AttributeSet attrs) {
        super(context, attrs);

        applyCustomFont(context);
    }

    public ProximaNovaTextView(Context context, AttributeSet attrs, int defStyle) {
       super(context, attrs, defStyle);

       applyCustomFont(context);
    } 

    private void applyCustomFont(Context context) {
        Typeface customFont = FontCache.getTypeface("proximanova_regular.otf", context);
        setTypeface(customFont);
    }
} 
```

然后在 xml 中为 TextView 使用这个自定义类，如下所示：-

```
 <com.myapp.customview.ProximaNovaTextView
        android:id="@+id/feed_list_item_name_tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="14sp"
        /> 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2017-06-02T10:05:44.850

我只想提一下，Android 内部字体的地狱即将结束，因为今年在 Google IO 上我们终于得到了这个 -> [https://developer.android.com/preview/features/working-with-fonts。 html](https://developer.android.com/preview/features/working-with-fonts.html)

现在有一个新的资源类型**字体**，您可以将所有应用程序字体放在 res/fonts 文件夹中，然后使用 R.font.my_custom_font 访问，就像您可以访问**字符串**res 值、**可绘制**res 值等一样。您甚至有机会创建**font-face** xml 文件，该文件将设置您的自定义字体（关于斜体、粗体和下划线 attr）。

阅读上面的链接以获取更多信息。让我们看看支持。

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-12-31T09:14:02.037

新的字体资源允许直接设置`font`使用

```
android:fontFamily="@font/my_font_in_font_folder" 
```

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2020-09-07T21:58:09.530

您可以像这样定义自定义 FontFamily：

`/res/font/usual.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<font-family xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    tools:ignore="UnusedAttribute">
    <font
        android:fontStyle="normal"
        android:fontWeight="200"
        android:font="@font/usual_regular"
        app:fontStyle="normal"
        app:fontWeight="200"
        app:font="@font/usual_regular" />

    <font
        android:fontStyle="italic"
        android:fontWeight="200"
        android:font="@font/usual_regular_italic"
        app:fontStyle="italic"
        app:fontWeight="200"
        app:font="@font/usual_regular_italic" />

    <font
        android:fontStyle="normal"
        android:fontWeight="600"
        android:font="@font/usual_bold"
        app:fontStyle="normal"
        app:fontWeight="600"
        app:font="@font/usual_bold" />

    <font
        android:fontStyle="italic"
        android:fontWeight="600"
        android:font="@font/usual_bold_italic"
        app:fontStyle="italic"
        app:fontWeight="600"
        app:font="@font/usual_bold_italic" />
</font-family> 
```

现在你可以做

```
android:fontFamily="@font/usual" 
```

假设您的其他`font`资源也在那里，带有小写字母和`_`s。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2015-02-12T11:58:08.603

你这样设置风格`res/layout/value/style.xml`：

```
<style name="boldText">
    <item name="android:textStyle">bold|italic</item>
    <item name="android:textColor">#FFFFFF</item>
</style> 
```

并在`main.xml`文件中使用这种风格：

```
style="@style/boldText" 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2018-11-04T08:03:31.323

对于 android-studio 3 及更高版本，您可以使用此样式，然后`textView`在应用程序中更改所有字体。

在您的`style.xml`：

```
<!--OverRide all textView font-->
<style name="defaultTextViewStyle" parent="android:Widget.TextView">
        <item name="android:fontFamily">@font/your_custom_font</item>
</style> 
```

然后在你的主题中使用它：

```
<!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
        <item name="android:textViewStyle">@style/defaultTextViewStyle</item>
    </style> 
```

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2019-02-01T15:17:33.670

**以编程方式将字体添加到 TextView**的最简单方法是，首先，在项目的 Assets 文件夹中添加字体文件。例如，您的字体路径如下所示：`assets/fonts/my_font.otf`

并将其添加到 TextView 为：

科特林

```
val font_path = "fonts/my_font.otf"  

myTypeface = Typeface.createFromAsset(MyApplication.getInstance().assets, font_path)

textView.typeface = myTypeface 
```

爪哇

```
String font_path = "fonts/my_font.otf";
Typeface myTypeface = Typeface.createFromAsset(MyApplication.getInstance().assets, font_path)
textView.setTypeface(myTypeface); 
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2019-03-15T10:33:54.320

有一个不错的图书馆可用于此

```
 implementation 'uk.co.chrisjenx:calligraphy:2.3.0' 
```

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2019-05-27T14:27:03.610

您还可以使用`setTextAppearance`（需要 API 16）更改标准字体，请参阅[https://stackoverflow.com/a/36301508/2914140](https://stackoverflow.com/a/36301508/2914140)：

```
<style name="styleA">
    <item name="android:fontFamily">sans-serif</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">?android:attr/textColorPrimary</item>
</style>
<style name="styleB">
    <item name="android:fontFamily">sans-serif-light</item>
    <item name="android:textStyle">normal</item>
    <item name="android:textColor">?android:attr/textColorTertiary</item>
</style>

if(condition){
    TextViewCompat.setTextAppearance(textView, R.style.styleA);
} else {
    TextViewCompat.setTextAppearance(textView,R.style.styleB);
} 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2015-08-03T09:42:44.443

[在这里](http://androidxref.com/5.1.1_r6/xref/frameworks/base/data/fonts/fonts.xml)您可以看到所有可用的 fontFamily 值及其对应的字体文件的名称（此文件在 android 5.0+ 中使用）。在移动设备中，您可以在以下位置找到它：

> /system/etc/fonts.xml（适用于 5.0+）

（对于android 4.4及以下使用[这个](http://androidxref.com/4.4.4_r1/xref/frameworks/base/data/fonts/system_fonts.xml)版本，但我认为`fonts.xml`格式更清晰，更容易理解。）

例如，

```
 <!-- first font is default -->
20    <family name="sans-serif">
21        <font weight="100" style="normal">Roboto-Thin.ttf</font>
22        <font weight="100" style="italic">Roboto-ThinItalic.ttf</font>
23        <font weight="300" style="normal">Roboto-Light.ttf</font>
24        <font weight="300" style="italic">Roboto-LightItalic.ttf</font>
25        <font weight="400" style="normal">Roboto-Regular.ttf</font>
26        <font weight="400" style="italic">Roboto-Italic.ttf</font>
27        <font weight="500" style="normal">Roboto-Medium.ttf</font>
28        <font weight="500" style="italic">Roboto-MediumItalic.ttf</font>
29        <font weight="900" style="normal">Roboto-Black.ttf</font>
30        <font weight="900" style="italic">Roboto-BlackItalic.ttf</font>
31        <font weight="700" style="normal">Roboto-Bold.ttf</font>
32        <font weight="700" style="italic">Roboto-BoldItalic.ttf</font>
33    </family> 
```

tag的 name 属性定义`name="sans-serif"`了`family`你可以在 android:fontFamily 中使用的值。

`font`标签定义了对应的字体文件。

在这种情况下，您可以忽略 下的源代码`<!-- fallback fonts -->`，它用于字体的后备逻辑。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2015-08-03T10:21:59.160

我将[Letter Press lib](https://github.com/Pixplicity/letterpress)用于我的 NonTextView 的东西，例如 Buttons 和[kianoni fontloader lib](https://github.com/Kianoni/android-fontloading-textview)用于我的 TextViews，因为在这个 lib 中使用样式对我来说比 Letter Press 更容易，我得到了理想的反馈。这对于那些想要使用除 Roboto 字体之外的自定义字体的人来说非常有用。所以这是我对字体库的体验。对于那些想要使用自定义类来更改字体的人，我强烈建议使用此代码段创建此类

```
 public class TypefaceSpan extends MetricAffectingSpan {
    /** An <code>LruCache</code> for previously loaded typefaces. */
    private static LruCache<String, Typeface> sTypefaceCache =
            new LruCache<String, Typeface>(12);

    private Typeface mTypeface;

    /**
     * Load the {@link android.graphics.Typeface} and apply to a {@link android.text.Spannable}.
     */
    public TypefaceSpan(Context context, String typefaceName) {
        mTypeface = sTypefaceCache.get(typefaceName);

        if (mTypeface == null) {
            mTypeface = Typeface.createFromAsset(context.getApplicationContext()
                    .getAssets(), String.format("fonts/%s", typefaceName));

            // Cache the loaded Typeface
            sTypefaceCache.put(typefaceName, mTypeface);
        }
    }

    @Override
    public void updateMeasureState(TextPaint p) {
        p.setTypeface(mTypeface);

        // Note: This flag is required for proper typeface rendering
        p.setFlags(p.getFlags() | Paint.SUBPIXEL_TEXT_FLAG);
    }

    @Override
    public void updateDrawState(TextPaint tp) {
        tp.setTypeface(mTypeface);

        // Note: This flag is required for proper typeface rendering
        tp.setFlags(tp.getFlags() | Paint.SUBPIXEL_TEXT_FLAG);
    }
} 
```

并使用这样的类：

```
AppData = PreferenceManager.getDefaultSharedPreferences(this);
TextView bannertv= (TextView) findViewById(R.id.txtBanner);
    SpannableString s = new SpannableString(getResources().getString(R.string.enterkey));
    s.setSpan(new TypefaceSpan(this, AppData.getString("font-Bold",null)), 0, s.length(),
            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    bannertv.setText(s); 
```

也许这有帮助。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-05-29T13:19:25.287

您可以使用以下库轻松完成

[https://github.com/sunnag7/FontStyler](https://github.com/sunnag7/FontStyler)

```
<com.sunnag.fontstyler.FontStylerView
              android:textStyle="bold"
              android:text="@string/about_us"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:paddingTop="8dp"
              app:fontName="Lato-Bold"
              android:textSize="18sp"
              android:id="@+id/textView64" /> 
```

它重量轻且易于实现，只需将您的字体复制到资产文件夹并在 xml 中使用名称。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2018-03-26T05:30:16.033

试试这些简单的步骤。1.在res文件夹中创建字体文件夹。2\. 将.ttf 文件复制并粘贴到字体文件夹中。3\. 现在在 xml 中给出路径，如下所示。

```
 android:fontFamily="@font/frutiger" 
```

或者你的文件名是什么。这就是快乐的代码

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2022-02-16T00:30:59.003

```
<?xml version="1.0" encoding="utf-8"?>
<font-family xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    tools:ignore="UnusedAttribute">
    <font
        android:font="@font/google_sans_regular"
        android:fontStyle="normal"
        android:fontWeight="400"
        app:font="@font/google_sans_regular"
        app:fontStyle="normal"
        app:fontWeight="400" />

    <font
        android:font="@font/google_sans_italic"
        android:fontStyle="italic"
        android:fontWeight="400"
        app:font="@font/google_sans_italic"
        app:fontStyle="italic"
        app:fontWeight="400" />

    <font
        android:font="@font/google_sans_medium"
        android:fontStyle="normal"
        android:fontWeight="500"
        app:font="@font/google_sans_medium"
        app:fontStyle="normal"
        app:fontWeight="500" />

    <font
        android:font="@font/google_sans_medium_italic"
        android:fontStyle="italic"
        android:fontWeight="500"
        app:font="@font/google_sans_medium_italic"
        app:fontStyle="italic"
        app:fontWeight="500" />

    <font
        android:font="@font/google_sans_bold"
        android:fontStyle="normal"
        android:fontWeight="600"
        app:font="@font/google_sans_bold"
        app:fontStyle="normal"
        app:fontWeight="600" />

    <font
        android:font="@font/google_sans_bold_italic"
        android:fontStyle="italic"
        android:fontWeight="600"
        app:font="@font/google_sans_bold_italic"
        app:fontStyle="italic"
        app:fontWeight="600" />

</font-family> 
```*****

# jquery - jquery get 在我的本地主机上工作，但在其他站点上不工作

> ID：12128332
> 
> 赞同：0
> 
> 时间：2012-08-26T07:19:37.453
> 
> 标签：jquery, get

嗨，我在这里遇到问题这是我的代码，当我编写“http://localhost”并检索内容时它可以工作，但是当我编写其他网站（如“http://www.google.com”）时它不起作用。我已经在我的虚拟主机中上传了代码供你们测试。链接在这里。[http://faceproishere.netii.net/test.php](http://faceproishere.netii.net/test.php) 在这里你可以看到我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
</head>

<body>
<input type="text" name="field1" id="field1" value="http://localhost">

<input value="load" type="button" onClick="my_function()">

<textarea cols="15" rows="12" id="frame1" style="float:left"></textarea>
<div id="frame2" style="width:400px;height:400px;overflow:scroll;fl  oat:left"></div>

<script type="text/javascript">
function my_function()
{
    if($("#field1").val() != '' && $("#field1").val().indexOf("http",0) == 0)
    {

        $.get($("#field1").val(),function(data)
        {
            $("#frame1").html(data)
            $("#frame2").html(data)
        })

    }
}
</script>
</body>
</html> 
```

提前Tnx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:22:15.547

您不能以这种方式从其他来源访问内容。出于安全原因，这是不允许的。另见： [https ://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)

如果您检查浏览器的控制台，您可以很容易地看到此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:32:44.753

如果您有权访问 curl，但您可以设置对 curl 的调用以检索数据或地址。

curl 是大多数 Linux 发行版上可用的 bash 工具。可以在这里找到[http://curl.haxx.se/](http://curl.haxx.se/)。

您所做的是通过 ajax 设置本地请求，将结果传递到您使用 curl 获取的站点。在大多数脚本语言中，Curl 可以通过 shell 调用。如果您安装了 curl 并且需要脚本方面的帮助，请告诉我什么语言，我可能会提供帮助。

好吧，她是一个解释。当我这样做时它可能不适合你，它是在 ruby​​ sinatra 中，它非常容易设置路径和捕获链接的参数。在php中可能会更难一些。

首先，您需要一些方法来设置调用使用 curl 的 php 脚本的本地路径。最简单的方法是简单地将文件添加到您的网络路径（取决于网络服务器和框架）。

在 curl_test.php 文件中，您可以执行以下操作：

```
$response = system('curl www.google.se', $returnvalue);
echo($response) 
```

然后，您将设置您的 ajax 请求以运行该脚本，如下所示：

```
$.ajax({
  url: "localhost/curl_test.php",
  data: data,
  success: success,
  dataType: dataType
}); 
```

然后诀窍是如何将正确的数据放在数据部分中，以便您可以将获取变量发送到 curl 脚本，但是如果您想要一个 ruby​​ sinatra 示例，我会让您解决这个问题。

```
get '/data/:brand' do
  data_link =  "https://someplace.com/brands/#{params[:brand]}"
  c = Curl::Easy.perform(data_link)
  content_type :json
  c.body_str
end 
```

# iphone - ios：使 UIBarButtonItem 与 TabBar 导航交互

> ID：12128334
> 
> 赞同：0
> 
> 时间：2012-08-26T07:20:05.297
> 
> 标签：iphone, objective-c, ios

我有一个使用 UITabBarController 进行导航的项目。当用户从标签栏上的主视图导航到其他视图时，我想在这些其他视图的顶部包含一个工具栏，并带有一个后退按钮，单击该按钮时，基本上会选择标签栏的主页按钮。这显然是一个多余的功能，但我想包括它以方便使用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:27:40.200

很简单，只需制作一个 IBAction 并将其链接到栏按钮即可。然后将以下内容添加到操作中。

```
[self.tabBarController setSelectedIndex:1]; 
```

# php - 有没有办法制作原生操作系统应用程序

> ID：12128338
> 
> 赞同：1
> 
> 时间：2012-08-26T07:21:07.280
> 
> 标签：php, operating-system, winbinder

我一直在寻找一种将简单的 PHP 脚本编译为可以使用操作系统外观的跨平台可执行文件的方法。

你知道如何归档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:25:06.640

我知道在 PHP 中没有跨平台的方法可以做到这一点。有一些针对特定操作系统的绑定，但没有一个可以在多个操作系统上正常工作。

此外，无论如何，PHP 并不是真正适合编写桌面应用程序的语言——Python、Java 或 .NET 是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T07:27:59.213

有*办法*，但实际上，php 是一种为互联网设计的脚本语言......

但如果你想看看，看看@http: [//gtk.php.net/](http://gtk.php.net/)

还可以在这里查看[php.ini 中的 PHP GTK 模块](https://stackoverflow.com/questions/3794130/php-gtk-module-in-php-ini/9786279#9786279)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T07:28:41.843

您可以制作一个复制操作系统的 HTML + CSS 页面，或者将 PHP 与您的应用程序一起分发（更难）。

如果您的应用程序很简单，您可以将其移植到 C++ 等。

*这一切都取决于你的程序做什么。*

# emacs - 在 Window 7 上设置 emacs 的窗口大小

> ID：12128341
> 
> 赞同：1
> 
> 时间：2012-08-26T07:21:47.047
> 
> 标签：emacs, elisp, emacs23

我想设置窗口大小（也许是`frame`在 emacs 中）。我将[其](https://stackoverflow.com/a/11912263/930125)用于配置。它有效，但发生了一些让我感到困惑的事情。例如，如果我设置宽度 80 和高度 30。当我启动 emacs 时。它初始化为比我之前设置的 80 宽和 30 高，然后在一瞬间，它缩小到宽度 80 和高度 30。

我想问的是为什么会出现这样的情况？我可以在 emacs 初始化后立即设置窗口大小吗？如何？

工具栏也发生了类似的事情。我像这样禁用工具栏 `(tool-bar-mode 0)`

当我初始化 emacs 时，工具栏出现了，但一瞬间它就消失了。仅供参考，我将其`(tool-bar-mode 0)`放在 .emacs 文件的第一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:08:47.607

对于奇怪的调整窗口：

基本上，Emacs 在读取您的`.emacs`. 显然它必须是*一些*大小。当然，这是可定制的。在 Unix 系统上，您可以通过设置 X 资源来做到这一点，它的工作方式有点像环境变量：Emacs 可以在第一次运行时检查设置，然后再加载所有 elisp 解析机器并开始处理您的 .emacs。在 Windows 上，我认为您可以通过注册表设置这些变量。有关如何在注册表中设置变量的说明，请参阅[此 EmacsWiki 页面](http://www.emacswiki.org/emacs/MsWindowsRegistry)。你想要`Emacs.Geometry`钥匙。

我不知道是否可以更改`tool-bar-mode`为X资源。我没有打扰，因为出现和消失的工具栏比移动的窗口更刺激！

# iphone - 如何在 XCode 中使用 currentTitle 切换 UIButton

> ID：12128342
> 
> 赞同：0
> 
> 时间：2012-08-26T07:21:46.407
> 
> 标签：iphone, ios5, xcode4.3

到了这一点，我有 10 个按钮，我在每个按钮内的 Title 中写了一个数字，即 0 到 9。我在这里的问题是，我如何切换按钮功能，只要说当我按下数字 0 时，值将在 showLabel.text 中显示为 0，并且按钮处于选中状态，但是当我再次按下它时，showLabel.text 中的数字消失了，并且按钮变回正常状态。我使用下面的代码，但它不能解决我的问题。我的意思是，只是说我选择了数字“1、5、7、8”并且我想取消选择数字 5，使用下面的代码我的 showLabel 会将所有数字替换为无而不是“1、7、8”。所以我认为使用这段代码不是一个好主意。

```
-(IBAction)numberBtn:(UIButton *)sender
{
    UIButton *button = (UIButton *)sender;
    [button setTitle:@"X" forState:UIControlStateSelected];
    button.selected = !button.selected;
    if (button.selected)
    {
        number = sender.currentTitle;
        showLabel.text = [showLabel.text stringByAppendingFormat:number];
    }
    else
    {
        showLabel.text = [NSString stringWithFormat:@""];
    }
} 
```

有没有办法做到这一点？节日快乐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:14:36.573

改为这样做：

```
- (IBAction)numberBtn:(UIButton *)sender {
    sender.selected = !sender.selected;
    if (sender.selected)
    {
        NSString *number = sender.currentTitle;
        showLabel.text = [showLabel.text stringByAppendingString:number];
    }
    else
    {
        NSString *newString;
        NSString *number = sender.currentTitle;
        NSString *string = showLabel.text;
        for (int i = 0; i<string.length; ++i) {
            NSString *sub = [string substringWithRange:(NSRange){i, 1}];
            if ([sub isEqualToString:number]) {
                newString = [string substringToIndex:i];
                newString = [newString stringByAppendingString:[string substringFromIndex:i+1]];
            }
        }
        showLabel.text = newString;
    }
    [sender setTitle:@"X" forState:UIControlStateSelected];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:59:41.690

出色地。认为创建一个由 10 个布尔值组成的数组并且每次按下按钮时都是个好主意 - 您只需要在布尔数组中切换相应的值并使用“for”循环更新您的标签：

```
for (int nn=0; nn<10; ++nn)  if (boolVals[nn])  [myString appendFormat @"%d ", nn]; 
```

# windows-phone-7 - 呼叫页面上的显示面板 (WP7)

> ID：12128345
> 
> 赞同：0
> 
> 时间：2012-08-26T07:21:56.047
> 
> 标签：windows-phone-7, controls, panel

我想在 windows phone 7 的页面前显示一个小面板

一旦一个页面调用了方法，一个面板应该出现在屏幕中央的页面上方

我创建了一个扩展面板的类，我停止了如何让这个表单出现在任何调用页面的前面

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:33:21.023

您可以使用来自[Coding4Fun的控件](http://coding4fun.codeplex.com/)[MessagePrompt](http://coding4fun.codeplex.com/wikipage?title=MessagePrompt)。

将您的面板代码放在 MessagePrompt UserControl 中，并在您想要的每个页面中调用它。

# java - 无法使用 jconsole 连接到 JMX 远程

> ID：12128346
> 
> 赞同：4
> 
> 时间：2012-08-26T07:22:08.700
> 
> 标签：java, linux, spring, jmx, spring-3

我在 Spring3.1 独立环境下开发。

我正在尝试通过 jconsole 远程连接我的应用程序。它在本地工作，但是当我将我的应用程序部署到 linux 机器中时，它会超时。

我正在使用 Daemon 来运行我的环境。

这是我在 run.sh 脚本中添加的内容：

```
-Dcom.sun.management.jmxremote \
-Dcom.sun.management.jmxremote.port=6969 \
-Dcom.sun.management.jmxremote.ssl=false \
-Dcom.sun.management.jmxremote.authenticate=false \
com.mypackage.daemon.FixDaemon 
```

在applicationContext.xml里面：

```
<context:mbean-server />
<context:mbean-export /> 
```

现在在 linux 机器上做了 netstat 这就是我们所看到的：

```
[root@ logs]# netstat -an | grep 6969
tcp        0      0 :::6969                     :::*                        LISTEN 
```

所以它似乎在听。

但是当我在 jconsole 界面中添加我的 ip:6969 时，我得到连接失败弹出窗口。

知道我在做什么错吗？

谢谢，雷。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T13:19:19.917

首先尝试将此选项添加到您的应用程序中：

`-Djava.rmi.server.hostname=<ip>`

还要记住 jconsole 使用 RMI 进行通信。这意味着 jconsole 首先连接到 ip:6969。然后服务器生成一个随机端口 X，将其传回 jconsole。Jconsole 然后打开另一个到 ip:X 的连接。由于 X 是随机的，因此您无法在防火墙中打开此特定端口。您必须打开所有端口或使用另一个主题的 socks 代理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:09:09.213

1.  尝试使用机器上的 telnet 连接到该端口。如果这不成功，通常是因为防火墙丢弃了数据包。您必须与您的网络管理员交谈才能打开该端口。

    **注意**：您必须打开两个端口。一个用于绑定 RMIRegistry，另一个用于导出 RMI 对象。RMI 通常在随机高端口上导出对象。但这在防火墙环境中不起作用，因此您必须配置导出它的端口。这是通过使用 RMI URL 完成的。

2.  如果您在 Linux 上运行此程序，则执行一个`hostname -i`，如果它返回 127.0.0.1 则修复`/etc/hosts`. [JConsole 的常见问题解答条目](http://docs.oracle.com/javase/1.5.0/docs/guide/management/faq.html#linux2)对此有更多信息。

3.  我强烈建议的另一个选择是查看不涉及更改防火墙配置但仍通过 HTTP 提供 JMX 好东西的[Jolokia 。](http://www.jolokia.org/)

# javascript - 完整的 Ajax 库自动更新元标记

> ID：12128347
> 
> 赞同：0
> 
> 时间：2012-08-26T07:22:14.657
> 
> 标签：javascript, ajax

我在我的站点中使用完整的 Ajax 库，但我发现了一个问题。该脚本会自动更新，但我也想更新元标记。

请告诉我如何更新元标记，请更新 fullAjax 库，以便它会自动更新标记=作者、描述和关键字。

我已将 FullAjax 上传到 JsFiddle [JSfiddle 链接](http://jsfiddle.net/raryan/HJpxK/)

# variables - 创建 Sass mixin 时，我可以在 :nth-child 声明中使用变量吗？

> ID：12128354
> 
> 赞同：2
> 
> 时间：2012-08-26T07:24:20.493
> 
> 标签：variables, sass, mixins, css-selectors

这是我编写的 mixin（.scss 格式），但出现此错误：

> “($x)”之后的无效 CSS：预期的表达式（例如 1px，粗体），是“{”

```
@mixin x_cards_wide($x) {
  .card {
    &:nth-child(-n + $x) { margin-top:   0; }
    &:nth-child($x *  n) { margin-right: 0; }
  }
} 
```

在[CodePen上查看](http://codepen.io/anon/pen/AcflC)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T01:55:28.300

您可以使用[插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)来完成此操作：

```
@mixin x_cards_wide($x) {
  .card {
    &:nth-child(-n+#{$x}) { margin-top: 0; }
    &:nth-child(#{$x}n) { margin-right: 0; }
  }
} 
```

# java - android中java.net.Socket的默认超时值是多少？

> ID：12128361
> 
> 赞同：8
> 
> 时间：2012-08-26T07:25:45.193
> 
> 标签：java, android, sockets, android-networking, socket-timeout-exception

我正在为安卓开发一个移动应用程序。在那里，我创建了套接字并在 android 手机和 Windows 应用程序（在 pc、笔记本电脑上运行）之间传输数据。我正在使用**安卓 2.3**

测试手机**samsung galaxy pop**
电脑和手机通过 USB Tithering 连接。
数据传输正确。
但是一个问题是在应用程序中间，通过从系统中拔下移动 USB Caple 取消了十分之一，然后我抛出异常。

但有时它不会通过任何异常它只是等待，Socket也没有关闭等待数据读取
所以请在android中发送默认的socket超时时间

我的示例代码如下

```
 Socket socket=null;
    DataOutputStream dos=null;
    OutputStream os=null;
    InputStream is=null;
    DataInputStream dis=null;

    try
    {
        Log.i(tagName, "b4 creating socket");
        socket=new Socket(this.getIpAddress(),this.getPort_number());                   
        is=socket.getInputStream();             
        dos=new DataOutputStream(os);       
        dis=new DataInputStream(is);            
    }
    catch(UnknownHostException unknown_ex)
    {
        Log.i(tagName, "Exception host unknown : "+unknown_ex.toString());
        unknown_ex.printStackTrace();           
    }
    catch(IOException ioe_ex)
    {
        Log.i(tagName, "ioe Exception : "+ioe_ex.toString());           
        ioe_ex.printStackTrace();           
    }
    catch(Exception ex)
    {
        Log.i(tagName, "Exception : "+ex.toString());       
        ex.printStackTrace();       
    }

    if(dos!=null)
    {
        try
        {
            dos.close();
        }
        catch(Exception ex)
        {

        }
    }

    if(dis!=null)
    {
        try
        {
            dis.close();
        }
        catch(Exception ex){}
    }
    if(socket!=null)
    {
        try
        {
            socket.close();
        }
        catch(Exception ex)
        {

        }
    }

    socket=null;dos=null;dis=null;      
    Log.i(tagName, "MySocketConnection.connectMe() - end"); 
```

当我使用代码时

```
Socket.getSoTimeout() 
```

然后它返回 0。

请大家给出你的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T07:59:33.260

默认的套接字读取超时是无限的，正如它在[Javadoc](https://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#setSoTimeout(int))中所说的那样，“零超时被解释为无限超时。”。如果您想要一个有限值，请致电`Socket.setSoTimeout().`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:31:28.763

我不知道默认超时使用`this.socket.setSoTimeout(5000);`，但您可以尝试设置更高的超时值。这里 5000 毫秒意味着 5 秒。希望这可以解决您的问题。

# c# - scrollviewer 滚动到文本框位置

> ID：12128365
> 
> 赞同：1
> 
> 时间：2012-08-26T07:26:47.747
> 
> 标签：c#, windows-phone-7, xaml, scrollview, silverlight-toolkit

我如何在 Windows Phone 中获得表单的行为，例如`Settings >> Mobile Network >> EditAPN`. 在此页面中，它在滚动查看器中有许多文本框。当用户点击任何文本框并获得焦点时，页面向上滚动并且标题保持不变并显示 SIP 键盘。当用户从该文本框中失去焦点时，页面将恢复正常状态，SIP 键盘隐藏，标题保持不变。我想实现这种行为。我在滚动查看器中放置了一些文本框，并且在每个文本框上都有焦点事件，我正在这样做。

```
this.Scroller.ScrollToVerticalOffset(this.txtbox1.ActualHeight); 
this.Scroller.UpdateLayout(); 
```

但它不适合我。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:01:54.097

一种方法是重置默认行为以在 SIP 与代码可见时向上移动页面：

```
(App.Current as App).RootFrame.RenderTransform = new CompositeTransform(); 
```

在`TextBox_Focus`事件。折叠标题并手动滚动您需要的内容。

# android - 我应该在哪里放置 android 应用程序的设置代码

> ID：12128367
> 
> 赞同：0
> 
> 时间：2012-08-26T07:27:25.670
> 
> 标签：android

我正在开发一个需要设置预定义数据库值的 android 应用程序。例如，我想运行 sql 代码来设置数据库表并将数据插入其中。

我应该将代码放在应用程序的什么位置？如果您能告诉我如何在每次启动应用程序时运行这些代码，这也是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:32:44.990

[SQLiteOpenHelper的](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)[OnCreate()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate%28android.database.sqlite.SQLiteDatabase%29)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:35:43.623

应用程序启动时要执行的任何代码都应放在相应[Activity的](http://developer.android.com/reference/android/app/Activity.html)[onCreate()](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)中。这样，每次启动 Activity 时它都会运行。请注意，这意味着它也会在方向更改时运行，除非您自己处理它们。

如果您只希望代码在应用程序首次启动时运行，您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)来存储布尔值并将代码包含在 if-else 块中，例如：

boolean runOnce = prefs.getBoolean("runOnce", false);

```
//Pseudocode
    if(!runOnce)
    {
       //run code
       prefsEditor.putBoolean("runOnce", true);
       prefsEditor.commit();
    } 
```

# multithreading - 线程的奇怪行为

> ID：12128368
> 
> 赞同：0
> 
> 时间：2012-08-26T07:27:30.290
> 
> 标签：multithreading, invoke, invokerequired

我正在编写一个使用 MODBUS 协议与某些硬件通信的应用程序。
我正在使用代码项目中的[这个](http://www.codeproject.com/Articles/20929/Simple-Modbus-Protocol-in-C-NET-2-0)示例。

在尝试优化代码（主要是`PollFunction`函数）时，我遇到了一个非常奇怪的线程锁。

我没有将每一行字符串发送到`DoGUIUpdate`delagate，而是构建一个字符串数组并将其作为一个整体发送。

这样做会导致应用程序因`System.Reflection.targetParametercountException: Parameter count mismatch`错误而崩溃。

原代码：

```
public delegate void GUIUpdate(string paramString);
public void DoGUIUpdate(string paramString)
{
    if (InvokeRequired)
        BeginInvoke(new GUIUpdate(DoGUIUpdate), paramString);
    else
        lstRegisterValues.Items.Add(paramString);
}

private void PollFunction()
{
    ...
    string itemString;
    for (int i = 0; i < pollLength; i++)
    {
        itemString = "[" + Convert.ToString(pollStart + i + 40001) + "] , MB[" + Convert.ToString(pollStart + i) + "] = " + values[i];
        DoGUIUpdate(itemString);
    }
} 
```

我的代码：

```
public delegate void GUIUpdate2(string[] paramString);
public void DoGUIUpdate2(string[] paramString)
{
    if (InvokeRequired)
        BeginInvoke(new GUIUpdate2(DoGUIUpdate2), paramString);
    else
    {
        lstRegisterValues.Items.Clear();
        lstRegisterValues.Items.AddRange(paramString);
    }
}

string[] valuesStrings;
private void PollFunction()
{
    ...
    valuesStrings = new string[pollLength];
    for (int i = 0; i < pollLength; i++)
    {
        valuesStrings[i] = "[" + Convert.ToString(pollStart + i + 40001) + "] , MB[" + Convert.ToString(pollStart + i) + "] = " + values[i];
    }
    DoGUIUpdate2(valuesStrings);
} 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:33:27.820

我认为`BeginInvoke(new GUIUpdate2(DoGUIUpdate2), paramString);`是问题...

“begininvoke”的第二个参数接受 a`param object[] params`这将导致调用`DoGuiUpdate(string1,string2,string3)`不是你想要的......

尝试按以下方式封装：

```
BeginInvoke(new GUIUpdate2(DoGUIUpdate2), new[]{ paramString }); 
```

# mysql - 错误 1062：SQL 语法错误

> ID：12128372
> 
> 赞同：-2
> 
> 时间：2012-08-26T07:27:46.383
> 
> 标签：mysql

我有三张桌子。t1，t2，t3。我想获得 t2,t3 之间的共同值并从 t1 中选择整个记录。当我输入我的陈述时：

```
select * from db.t1 where col1 
IN (
select col1 from t2 , t3
where t2.col1=t3.col1); 
```

我收到语法错误。怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:32:31.963

这：

```
where col1.t2=col1.t3); 
```

应该：

```
where t2.col1=t3.col1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:33:16.807

假设您正在测试 t2.col1=t3.col1（而不是 col1.t2=col1.t3，如图所示），那么另一个问题是内部 SELECT 中 col1 的歧义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T07:33:29.840

我不确定，但也许您必须重命名封装的 col1 ：

```
select * from db.t1 where t1.col1 
IN (
select col1 as col1bis from t2 , t3
where t2.col1 = t3.col1); 
```

# facebook - 移动应用程序通过 REST 访问 Django 后端的 Facebook 身份验证

> ID：12128387
> 
> 赞同：2
> 
> 时间：2012-08-26T07:29:56.360
> 
> 标签：facebook, titanium-mobile, django-rest-framework

我正在开发一个基于 Titanium Mobile 的移动应用程序，并使用其[FB 模块](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Facebook)通过 FaceBook 对用户进行身份验证。现在，我们还将为这个使用[Django Rest Framework](http://django-rest-framework.org/)实现的移动应用程序实现 Web 服务。

我想知道如何最好地安全地实现这一点，以便一旦用户通过 FaceBook 进行身份验证，移动应用程序也可以通过 Django 后端进行身份验证。

# java - 替代嵌套的 FOR 循环

> ID：12128388
> 
> 赞同：0
> 
> 时间：2012-08-26T07:30:04.613
> 
> 标签：java, design-patterns

我正在寻找一个旧项目，我在那里看到了一个我在这里解释的代码：

该代码正在从数据库中加载一些记录（域对象），然后对其进行迭代，然后对于每次迭代，他们正在获取对象，通过该对象再次加载列表。他们通过在代码中放置嵌套的 for 循环来完成这项活动。

```
ParentList = getFromDatabse;
for(....){ // over ParentList
     SubChild1List = fromParentObejct;
     for(... ) { // over SubChild1List 
       subChild2List = fromSubChild1Objectl
        .. so on 
```

该代码有 7 个嵌套循环。

我的问题是建议我一些好的设计模式来避免这样混乱的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:35:20.993

使用访问者模式和递归。很难说更多，因为您的代码并没有说明太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:25:26.867

您可以尝试优化从数据库获取数据的方式。也许那时您不需要再次嵌套 for 循环来进行处理（请提供更多详细信息）。

# google-drive-api - 使用驱动 API 的应用程序引擎的替代方案？

> ID：12128394
> 
> 赞同：1
> 
> 时间：2012-08-26T07:31:25.147
> 
> 标签：google-drive-api

我基本上想编写一个使用 Drive API 的应用程序。developer.google.com 有关于如何做到这一点的教程。但问题是他们的示例要求我首先创建一个应用程序引擎实例，我不想这样做，因为我听说过关于它的非常糟糕的评论。所以，我只想知道是否有任何替代方案可用，以及在使用该服务时我可能会面临哪些挑战。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:15:44.603

您可以在可以发出 HTTPS 请求的任何平台上编写 Drive 应用程序，几乎可以在任何平台上编写。当您选择一个时，如果您有任何问题，请与我们联系。

此外，您可能应该先试用 App Engine，然后再根据“您阅读的评论”做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:04:27.873

AppEngine 有一些关于凭据存储和用户 ID 的便利类。除此之外，标准 servlet 应用程序和 GAE 应用程序几乎相同。

# iphone - 在后台时如何避免客户端-服务器中的 GKSession 断开连接

> ID：12128397
> 
> 赞同：2
> 
> 时间：2012-08-26T07:31:49.957
> 
> 标签：iphone, ios, bluetooth, gamekit, gksession

我在使用 GameKit 和 GKSession 操作时遇到问题。我正在尝试实现具有此行为的 GKSession 客户端-服务器 iOS 应用程序系统（ServerApp、ClientApp）：

1.  **ServerApp 在GKSessionModeServer**模式下创建 GKSession （仅限蓝牙）
2.  ClientApp 检测到服务器并连接到它
3.  应用程序和东西之间的一些数据交换

一切都很好，除非 ServerApp 或 ClientApp 实例进入后台。如果 ServerApp 进入后台，客户端会收到 GKPeerStateUnavailable 事件，我无法连接到它。我需要的是避免这个事件：这意味着，即使应用程序在后台，也要找到一种方法来保持 ServerApp GKSession 套接字继续运行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T15:22:33.463

也许你可以通过设置 info.plist 标志来保持应用程序在后台运行，让它像音乐播放器一样保持活跃？

这个线程讨论了这个：

[从拉兹](https://stackoverflow.com/a/6435368/1627959)

# iphone - 不显示时是否可以清除图形内存中自定义视图的内容？

> ID：12128399
> 
> 赞同：1
> 
> 时间：2012-08-26T07:32:03.123
> 
> 标签：iphone, ios, uiview

我在滚动视图中有大量自定义视图（都是同一个类），并且经常收到内存警告。是否有可能以某种方式只允许视图在即将显示时绘制，然后在不再显示时释放该视图（即它已被滚动过去）以减少内存使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:52:07.577

如果您想减少滚动视图中视图的内存使用量，更好的方法是定义一组视图并在滚动过程中通过将它们放入队列中重用它们。这需要一些工作。我不知道你想如何布局你的视图，但如果它是一个网格，你可以找到一些这样做的第三方库。其中最著名的一个叫做[GMGridView](https://github.com/gmoledina/GMGridView)，它值得一看以了解视图是如何排队的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:15:43.360

最后，我设法解决了这个问题，方法是在选择一个子视图进行完整查看时删除所有不需要的子视图，然后再添加它们，因为这不是一个成本很高的过程。

# javascript - 激活 jbimages 插件导致 TinyMCE 无法加载

> ID：12128401
> 
> 赞同：1
> 
> 时间：2012-08-26T07:32:21.753
> 
> 标签：javascript, plugins, tinymce

我正在尝试将[jbimages](http://justboil.me/tinymce-images-plugin/)插件添加到`TinyMCE`.
当我添加`,jbimages`到配置`plugins:`行时，无法加载并在 FireBug 的控制台中出现此错误： `TinyMCE``TinyMCE`

```
TypeError: this.getDoc() is undefined
http://localhost/proj/client/js/tiny_mce/tiny_mce.js
Line 1 
```

我`TinyMCE`失败的配置是这样的：

```
tinyMCE.init({
    // General options
    mode : "exact",
        elements : "question",
    theme : "advanced",
    plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,visualblocks,jbimages",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,ltr,rtl,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_resizing : true,
    language : 'fa',
        directionality : "rtl",

    // Drop lists for link/image/media/template bloglists
    template_external_list_url : "lists/template_list.js",
    external_link_list_url : "lists/link_list.js",
    external_image_list_url : "lists/image_list.js",
    media_external_list_url : "lists/media_list.js",
    relative_urls:false,
    // Replace values for the template plugin
    template_replace_values : {
        username : "Some User",
        staffid : "991234"
    }
}); 
```

问题是什么？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:59:06.850

问题解决了。
问题是我正在使用该`language`选项`TinyMCE`并`jbimages`尝试加载不存在的语言文件。我根据[这个](http://justboil.me/tinymce-images-plugin/translating-to-other-languages/)
创建了所需的语言文件，问题就解决了。`jbimages`

# java - java中的圆圈碰撞检测

> ID：12128410
> 
> 赞同：-1
> 
> 时间：2012-08-26T07:33:12.110
> 
> 标签：java, collision-detection, 2d-games

有很多这样的问题，但我都检查了它们，但没有一个能解决我遇到的问题，所以请不要将其作为重复项关闭。

我正在制作一个游戏，中间有一个大圆圈，周围有六个逐渐变大的圆圈。如果六个圆圈中的一个与中心圆圈发生碰撞，我想结束游戏。谁能提供合适的解决方案？

这是我的代码：

```
package virus;

import java.awt.*;
import java.util.Random;
import javax.swing.JPanel;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

public class VirusGamePanel extends JPanel implements MouseListener{
    private static final long serialVersionUID = 1L;//serialVersionUID field
    Random colour = new Random();//the outside ovals will always be a random colour
    private int sizeX1 = 0;//the x size of the outside ovals 
    private int sizeX2 = 0;
    private int sizeX3 = 0;
    private int sizeX4 = 0;
    private int sizeX5 = 0;
    private int sizeX6 = 0;

    private int sizeY1 = 0;//the y size of the outside ovals
    private int sizeY2 = 0;
    private int sizeY3 = 0;
    private int sizeY4 = 0;
    private int sizeY5 = 0;
    private int sizeY6 = 0;
    int score = 0;

    static String scorestring = "Score: ";
    Color rand = new Color(colour.nextInt(255), colour.nextInt(255), colour.nextInt(255)); //generate the random colour

    public void paint(Graphics g)
    {
        super.paint(g);
        g.setColor(Color.magenta);
        g.drawString(scorestring+score,275,250);
        g.setColor(Color.orange);
        g.drawOval(200, 150, 200, 200);
        g.setColor(rand);
        g.fillOval(300 - sizeX1 / 2, 50 - sizeY1 / 2, sizeX1, sizeY1);//these six ovals are supposed to increase in size
        g.fillOval(130 - sizeX2 / 2,100 - sizeY2 / 2, sizeX2, sizeY2);
        g.fillOval(480 - sizeX3 / 2,100 - sizeY3 / 2, sizeX3, sizeY3);
        g.fillOval(130 - sizeX4 / 2,400 - sizeY4 / 2, sizeX4, sizeY4);
        g.fillOval(480 - sizeX5 / 2,400 - sizeY5 / 2, sizeX5, sizeY5);
        g.fillOval(305 - sizeX6 / 2,450 - sizeY6 / 2, sizeX6, sizeY6);

        try
        {
            Thread.sleep(100);
        }
        catch(InterruptedException e)
        {
            e.printStackTrace();
        }
        inc();
    }

    private void inc()//increase the size of the ovals
    {

            sizeX1++;
            sizeY1++;
            sizeX2++;
            sizeY2++;
            sizeX3++;
            sizeY3++;
            sizeX4++;
            sizeY4++;
            sizeX5++;
            sizeY5++;
            sizeX6++;
            sizeY6++;
            repaint();

    }

    public static void main(String[] args) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:43:07.150

计算圆圈是否重叠并不难。只要两个圆的半径之和等于或大于它们的中心点之间的距离，两个圆就会重叠。

将这些放入谷歌给出了所需的公式：

*   [计算二维空间中两点之间的距离](http://www.mathwarehouse.com/algebra/distance_formula/index.php)
*   [圆的半径](http://www.mathopenref.com/radius.html)

接下来，关于您的代码的一些评论

*   覆盖`paintComponent`方法而不是`paint`方法
*   不要调用事件*调度线程，***因为**这会阻塞 UI。我的猜测是，使用当前代码，您将永远不会看到重绘。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。您想要做的解决方案是使用 Swing`Thread.sleep`*[`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)*

# c# - 正则表达式在单个 foreach 循环中一次查找两种模式

> ID：12128416
> 
> 赞同：0
> 
> 时间：2012-08-26T07:33:40.167
> 
> 标签：c#, regex

我有一个文本文件，内容如下：

```
+++++ jcguox 4/2/2011 6:19:47 AM

text here

+++++ viveksix 8/24/2012 4:09:17 AM

text again

+++++ viveksix 8/25/2012 11:01:30 AM

----- Vivek Singh 08/25/2012 11:28:12 PM

adding text

+++++ viveksix 8/25/2012 11:02:52 AM

adding more 
```

我想选择所有类型的模式，`+++++name date time`但`arraylist`条件是：

*   如果`-----name date time appears`紧随其后，`+++++name date time`则不`+++++name date time`应将其添加到`arraylist`.
*   只有当文本出现之后`+++++name date time`才`+++++name date time`应该添加到`arraylist`.

现在我能够解析两种模式`+++++name date time`并`-----name date time`使用`Regex.matches`.

问题是如何在循环中应用，例如：

```
foreach(Match m in Regex.Matches(textfile,@"+++++name date time" + @"-----name date time")
{
    if(after +++++name date time text is there)
        arraylist.Add("+++++name date time");
    else if(after +++++name date time -----name date time is there)
        //do not add in arraylist;
}

output for above case is : 

+++++ jcguox 4/2/2011 6:19:47 AM
+++++ viveksix 8/24/2012 4:09:17 AM
+++++ viveksix 8/25/2012 11:02:52 AM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:44:36.487

看一下这个...

```
Regex.Match(subjectString, @"\++ (?<author>\w+) (?<date>\d{1,2}/\d{1,2}/\d{4}) (?<time>\d{1,2}:\d{1,2}:\d{1,2} (?:AM|PM))(?!\r\n\r\n-+)") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:29:12.117

尝试这个：

```
string input = @" i have a text file with content something like this:

     +++++ jcguox 4/2/2011 6:19:47 AM

    text here

    +++++ viveksix 8/24/2012 4:09:17 AM

    text again

    +++++ viveksix 8/25/2012 11:01:30 AM

    ----- Vivek Singh 08/25/2012 11:28:12 PM

    adding text

    +++++ viveksix 8/25/2012 11:02:52 AM

    adding more";

        ArrayList al = new ArrayList();

        MatchCollection mc = Regex.Matches(input, @"\++ (?<author>\w+) (?<date>\d{1,2}/\d{1,2}/\d{4}) (?<time>\d{1,2}:\d{1,2}:\d{1,2} (?:AM|PM))(?!\r\n\r\n-+)");
        foreach (Match m in mc)
        {
            string st = m.NextMatch().ToString();
            if (Regex.Match(st, @"\++ (?<author>\w+) (?<date>\d{1,2}/\d{1,2}/\d{4}) (?<time>\d{1,2}:\d{1,2}:\d{1,2} (?:AM|PM))(?!\r\n\r\n-+)").Length > 0)
            {
                al.Add(st);
            }

        } 
```

# php - 正则表达式匹配字符串或空

> ID：12128419
> 
> 赞同：0
> 
> 时间：2012-08-26T07:34:12.613
> 
> 标签：php, regex, pattern-matching

字符串：

```
1\. {@IF var=val}
2\. {@IF var} 
```

我目前的模式：

```
/{@if ([\w]+)(?:|=([\w]+))}/si 
```

我需要的群组 (2)

```
1\. {@IF (var)=(val)}
2\. {@IF (var)} 
```

我已经使用这个正则表达式完成了#2

```
/{@if ([\w]+)}/si 
```

如何使用单个正则表达式模式匹配 #1 和 #2 字符串并生成一个/两个捕获组？

需要一个“g”修饰符。但是在我在 php 中添加了一个“g”修饰符之后，它抛出了一个未知的修饰符错误

[http://regexr.com?31uov](http://regexr.com?31uov)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:36:56.540

试试看：

```
/@IF (\w+)(?:=(\w+))?/ 
```

catpure-group 1 是“变量名”， capture-group 2 是可选的（并且可能未设置）值。

# android - 单选按钮重新选择在 android 中无法正常工作，新开发中

> ID：12128422
> 
> 赞同：0
> 
> 时间：2012-08-26T07:34:45.803
> 
> 标签：android, development-environment

我有一组 9 个收音机`Buttons`（一组 3 个），用户必须选择 3 个（每组 1 个）

在正确的选择上得分增加，而在错误的选择上得分减少，但问题是如果选择了所有 3 个正确的答案，则得分是正确的，否则它不会响应重新选择该组的另一个单选按钮。提交按钮 我已经编写了代码，我是开发新手，请指导

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

switch (buttonView.getId()) {

    case R.id.qa:cb.setChecked(false);
        cc.setChecked(false);
        cd.setChecked(false);
        s[0] = false;
        break;
    case R.id.qb:
        ca.setChecked(false);
        cc.setChecked(false);
        cd.setChecked(false);
        s[0] = false;
        break;
    case R.id.qc:
        cb.setChecked(false);
        ca.setChecked(false);
        cd.setChecked(false);
        s[0] = true;

        break;
    }
public void onClick(View v) {

            score = 0;
    for (int i = 0; i < 3; i++) {
        if (s[i] == true)
            score++;
        else
            score--;
} 
```

其中 s 是`boolean s[] = new boolean[];`

我是开发新手，所以无法解决问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:57:54.833

下面的代码示例会将单选按钮动态添加到组中，以便您可以使用任何布局以您喜欢的任何方式排列按钮。

布局：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="1" >

    <RadioButton
        android:id="@+id/rbtn1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:text="A" />

    <RadioButton
        android:id="@+id/rbtn2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:text="B" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="1" >

    <RadioButton
        android:id="@+id/rbtn3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:text="C" />

    <RadioButton
        android:id="@+id/rbtn4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:text="D" />
</LinearLayout>

</LinearLayout> 
```

代码：MainActivity.xml

```
public class MainActivity extends Activity {

private static final String GROUP_A = "GroupA";
private static final String GROUP_B = "GroupB";
private List<RadioButton> radioButtons;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    RadioButton rbtn1 = (RadioButton) findViewById(R.id.rbtn1);
    RadioButton rbtn2 = (RadioButton) findViewById(R.id.rbtn2);
    RadioButton rbtn3 = (RadioButton) findViewById(R.id.rbtn3);
    RadioButton rbtn4 = (RadioButton) findViewById(R.id.rbtn4);

    addRadioButtonToGroup(rbtn1, GROUP_A);
    addRadioButtonToGroup(rbtn2, GROUP_A);
    addRadioButtonToGroup(rbtn3, GROUP_A);
    addRadioButtonToGroup(rbtn4, GROUP_B);
}

private void addRadioButtonToGroup(RadioButton rbtn, String group) {
    rbtn.setTag(group);

    if (radioButtons == null) {
        radioButtons = new ArrayList<RadioButton>();
    }

    radioButtons.add(rbtn);

    rbtn.setOnCheckedChangeListener(new RadioButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                for (int i = 0; i < radioButtons.size(); i++) {
                    RadioButton radioButton = radioButtons.get(i);
                    if (radioButton
                            .getTag()
                            .toString()
                            .equalsIgnoreCase(
                                    buttonView.getTag().toString())) {
                        if (!radioButton.equals(buttonView)) {
                            radioButton.setChecked(false);
                        }
                    }
                }
            }
        }
    });
}

} 
```

这里..前 3 个单选按钮将属于 A 组，其他单选按钮属于 B 组，这确保可以一次检查组中的一个单选按钮。我们也不需要 RadioGroup，并且此代码可以控制以您喜欢的方式排列单选按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T07:44:29.030

使用 RadioGroup 而不是手动检查和取消检查 RadioButtons。

如果您将 3 个单选按钮放在一个单选组中，您将能够一次检查一个单选按钮，RadioGroup 将对其进行管理。

检查下面的示例：在提交按钮上单击它将计算分数。

布局：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="First Question" />

    <RadioGroup
        android:id="@+id/rg1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/rbtn1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="A" />

        <RadioButton
            android:id="@+id/rbtn2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="B" />

        <RadioButton
            android:id="@+id/rbtn3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="C" />
    </RadioGroup>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Second Question" />

    <RadioGroup
        android:id="@+id/rg2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/rbtn4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="P" />

        <RadioButton
            android:id="@+id/rbtn5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Q" />

        <RadioButton
            android:id="@+id/rbtn6"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="R" />
    </RadioGroup>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Third Question" />

    <RadioGroup
        android:id="@+id/rg3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/rbtn7"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="X" />

        <RadioButton
            android:id="@+id/rbtn8"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Y" />

        <RadioButton
            android:id="@+id/rbtn9"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Z" />
    </RadioGroup>

    <Button
        android:id="@+id/btnSubmit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Submit" />
</LinearLayout>

</ScrollView> 
```

活动 ：

```
package com.example.demo;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioGroup;
import android.widget.Toast;

public class MainActivity extends Activity {

private RadioGroup rg1;
private RadioGroup rg2;
private RadioGroup rg3;

private OnClickListener btnClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        int answerCount = 0;
        if (rg1.getCheckedRadioButtonId() == R.id.rbtn1)
            answerCount++;
        if (rg2.getCheckedRadioButtonId() == R.id.rbtn5)
            answerCount++;
        if (rg3.getCheckedRadioButtonId() == R.id.rbtn9)
            answerCount++;
        Toast.makeText(MainActivity.this, String.valueOf(answerCount),
                Toast.LENGTH_SHORT).show();
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    rg1 = (RadioGroup) findViewById(R.id.rg1);
    rg2 = (RadioGroup) findViewById(R.id.rg2);
    rg3 = (RadioGroup) findViewById(R.id.rg3);

    Button btnSumbit = (Button) findViewById(R.id.btnSubmit);
    btnSumbit.setOnClickListener(btnClickListener);
}

} 
```

# base64 - Sublime Text 2 是否有一些插件可以将图像编码为 base64

> ID：12128423
> 
> 赞同：6
> 
> 时间：2012-08-26T07:34:58.860
> 
> 标签：base64, encode, sublimetext2

Coda有一个很酷的[插件](http://www.midwinter-dg.com/downloads_coda-plugin_base64-encode-images.html)，可以通过在代码中选择图像路径然后按热键将图像编码为 base64 字符串。

Sublime Text 2 有这样的吗？我在 Package Control 集中发现只有一个 base64 编码器，但它只编码字符串。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T19:15:40.923

它包含在[Emmet](http://emmet.io/download/)（以前的 Zen Coding）中 将插入符号放在图像上，转到命令面板并键入“Encode/Decode Image”（或 Zen Coding 中的“base”），按 Enter。

# python - 使用投影查询时的 NDB 缓存

> ID：12128424
> 
> 赞同：1
> 
> 时间：2012-08-26T07:35:08.440
> 
> 标签：python, google-app-engine, app-engine-ndb

之前找不到这个特定的问题。App Engine 的 NDB 在使用投影查询与完整实体查询时如何处理缓存？

例如，如果我先进行投影查询..

```
MyModel.query().get(projected=['name']) 
```

...然后接下来进行常规查询...

```
MyModel.query().get() 
```

...我会得到什么？完整的实体？如果是这样，NDB 是否自动缓存了第一个查询的任何部分？还是 NDB 能够很好地区分，所以下次我运行投影查询时，它可能会从缓存中提取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T08:11:19.050

据我所知，查询结果仅缓存在上下文缓存中，但不会从缓存中获取查询结果。

key.get() 将被缓存并从缓存中检索，但 query.get() 不会从缓存中检索。

[https://developers.google.com/appengine/docs/python/ndb/cache](https://developers.google.com/appengine/docs/python/ndb/cache)

来自文档：查询不会在任何缓存中查找值。但是，如果缓存策略如此，查询结果将被写回上下文缓存（但永远不会写回 Memcache）。

要回答有关您将获得什么的问题，在这两个查询中，结果似乎都是从数据存储中获取的，而不是从缓存中获取的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T21:37:36.810

投影查询结果永远不会被缓存。如果按键获取返回投影结果是不正确的。所以不用担心。

# javascript - 在引导弹出窗口中包含表单？

> ID：12128425
> 
> 赞同：96
> 
> 时间：2012-08-26T07:35:18.663
> 
> 标签：javascript, jquery, twitter-bootstrap, twitter-bootstrap-3, popover

```
<div class="container">
    <div class="row" style="padding-top: 240px;">
        <a href="#" class="btn btn-large btn-primary" rel="popover"
            data-content="<form><input type="text"/></form>"
            data-placement="top" data-original-title="Fill in form">Open form</a>
    </div>
</div> 
```

**[JSfiddle](http://jsfiddle.net/EFmw8/)**

我猜我会将表单内容存储在 javascript 函数中......

### 如何在引导弹出窗口中包含表单？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2012-08-26T08:46:22.367

我会将我的表单放入标记中，而不是放入某些数据标签中。这就是它的工作方式：

## JS代码：

```
$('#popover').popover({ 
    html : true,
    title: function() {
      return $("#popover-head").html();
    },
    content: function() {
      return $("#popover-content").html();
    }
}); 
```

## HTML 标记：

```
<a href="#" id="popover">the popover link</a>
<div id="popover-head" class="hide">
  some title
</div>
<div id="popover-content" class="hide">
  <!-- MyForm -->
</div> 
```

[演示](http://jsfiddle.net/handtrix/dzr521qs/)

## 替代方法：

### X-可编辑

您可能想看看[X-Editable](http://vitalets.github.io/x-editable)。一个允许您基于弹出框在页面上创建可编辑元素的库。

![X-可编辑演示](../Images/05566e9147f032ee612aebd0d00164ca.png)

### 网页组件

Mike Costello 发布了[Bootstrap Web Components](https://github.com/MikeCostello/bootstrap-web-components)。这个漂亮的库有一个 Popovers 组件，可让您将表单作为标记嵌入：

```
<button id="popover-target" data-original-title="MyTitle" title="">Popover</button>

<bs-popover title="Popover with Title" for="popover-target">
  <!-- MyForm -->
</bs-popover> 
```

[演示](http://mikecostello.github.io/bootstrap-web-components/)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-08-26T07:38:38.523

`type="text"`在单引号内替换双引号，例如：

```
"<form><input type='text'/></form>" 
```

或者

用单引号替换双引号`data-content`，例如：

```
data-content='<form><input type="text"/></form>' 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-07T14:35:09.277

```
<a data-title="A Title" data-placement="top" data-html="true" data-content="<form><input type='text'/></form>" data-trigger="hover" rel="popover" class="btn btn-primary" id="test">Top popover</a> 
```

> 只需声明 data-html="true"

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-09T15:20:11.520

`div`您可以使用 Bootstrap 提供的`hidden`类从隐藏元素加载表单。

```
<button class="btn btn-default" id="form-popover">Form popover</button>

<div class="hidden">
  <form id="form">
    <input type="text" class="form-control" />
  </form>
</div> 
```

JavaScript：

```
$('#form-popover').popover({
    content: $('#form').parent().html(),
    html: true,
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-26T07:46:20.197

像这个**工作演示** [http://jsfiddle.net/7e2XU/21/show/#](http://jsfiddle.net/7e2XU/21/show/#) * 更新：http: [//jsfiddle.net/kz5kjmbt/](http://jsfiddle.net/kz5kjmbt/)

```
 <div class="container">
    <div class="row" style="padding-top: 240px;"> <a href="#" class="btn btn-large btn-primary" rel="popover" data-content='
<form id="mainForm" name="mainForm" method="post" action="">
    <p>
        <label>Name :</label>
        <input type="text" id="txtName" name="txtName" />
    </p>
    <p>
        <label>Address 1 :</label>
        <input type="text" id="txtAddress" name="txtAddress" />
    </p>
    <p>
        <label>City :</label>
        <input type="text" id="txtCity" name="txtCity" />
    </p>
    <p>
        <input type="submit" name="Submit" value="Submit" />
    </p>
</form>
 data-placement="top" data-original-title="Fill in form">Open form</a>

    </div>
</div> 
```

JavaScript 代码：

```
 $('a[rel=popover]').popover({
      html: 'true',
      placement: 'right'
    }) 
```

*截屏*

![工作更新的小提琴截图](../Images/a7a5ab5e2746d167e82516c0e67b8084.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-23T20:59:20.957

或者试试这个

第二个包括第二个隐藏的 div 内容，以保持表单在小提琴[http://jsfiddle.net/7e2XU/21/上工作和测试](http://jsfiddle.net/7e2XU/21/)

```
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
   <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tooltip.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-popover.js"></script>

<div id="popover-content" style="display: none" >
    <div class="container" style="margin: 25px; ">
    <div class="row" style="padding-top: 240px;">
        <label id="sample">
            <form id="mainForm" name="mainForm" method="post" action="">
    <p>
        <label>Name :</label>
        <input type="text" id="txtName" name="txtName" />
    </p>
    <p>
        <label>Address 1 :</label>
        <input type="text" id="txtAddress" name="txtAddress" />
    </p>
    <p>
        <label>City :</label>
        <input type="text" id="txtCity" name="txtCity" />
    </p>
    <p>
        <input type="submit" name="Submit" value="Submit" />
    </p>
</form>

        </label>
    </div>
          </div> 
</div>

 <a href="#" style="margin: 40px 40px;" class="btn btn-large btn-primary" rel="popover" data-content='' data-placement="left" data-original-title="Fill in form">Open form</a>

<script>

$('a[rel=popover]').popover({
    html: 'true',
placement: 'right',
content : function() {
    return $('#popover-content').html();
}
})

</script> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-03T14:35:08.083

对于任何可能需要它的人来说，这是一个完整的解决方案，到目前为止我已经使用它并取得了很好的效果

JS：

```
$(".btn-popover-container").each(function() {
    var btn = $(this).children(".popover-btn");
    var titleContainer = $(this).children(".btn-popover-title");
    var contentContainer = $(this).children(".btn-popover-content");

    var title = $(titleContainer).html();
    var content = $(contentContainer).html();

    $(btn).popover({
        html: true,
        title: title,
        content: content,
        placement: 'right'
    });
}); 
```

HTML：

```
<div class="btn-popover-container">
    <button type="button" class="btn btn-link popover-btn">Button Name</button>
    <div class="btn-popover-title">
        Popover Title
    </div>
    <div class="btn-popover-content">
        <form>
          Or Other content..
        </form>
    </div>
</div> 
```

CSS：

```
.btn-popover-container {
    display: inline-block;
}

.btn-popover-container .btn-popover-title, .btn-popover-container .btn-popover-content {
    display: none;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-05T21:55:46.170

我经常使用 WordPress，所以使用 PHP。

我的方法是将我的 HTML 包含在 PHP 变量中，然后在`data-content`.

```
$my-data-content = '<form><input type="text"/></form>'; 
```

随着

```
data-content='<?php echo $my-data-content; ?>' 
```

# python - 由于 RunTimeError 无法在 OpenERP 中安装额外的模块：在 cmp 中超出最大递归深度

> ID：12128428
> 
> 赞同：1
> 
> 时间：2012-08-26T07:35:41.267
> 
> 标签：python, python-2.7, openerp

由于某种原因，我无法在 OpenERP 6.1.2 中安装一些额外的模块。我正在尝试安装 Aeroo Reporting 和 Pexego OpenOffice Report。我已经安装了 genshi、relatorio、lxsl、earoolib，但这并不影响下面显示的错误消息。在其他地方我读过这个错误是由于配置错误。在阅读了 OpenERP 最新的“如何安装”指南之后，我再次重新安装了 OpenERP（6.1 All-in-One）（这个过程很简单，没有找到任何线索）。

我还重新安装了 Python，看看这是否导致了问题，但事实并非如此。我很困惑，因为我尝试安装的所有额外模块都会发生这种情况。原因一定是递归导入，但我不知道在哪里或解决什么来防止这种递归导入。

OpenERP 服务器运行在 Windows 7 - 64 位，使用 Python 2.7.3 32 位。我已经仔细检查以确保使用的所有 Python 都是 32 位的。

有人有什么想法吗？非常感谢您的帮助！非常感谢您的考虑。

弗莱普

```
STACK TRACE:

Client Traceback (most recent call last):
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\common\http.py", line 180, in dispatch
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\controllers\main.py", line 1052, in call_button
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\controllers\main.py", line 996, in call_common
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\controllers\main.py", line 1010, in _call_kw
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\common\openerplib\main.py", line 250, in proxy
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\common\openerplib\main.py", line 117, in proxy
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\common\http.py", line 608, in send

Server Traceback (most recent call last):
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\web\common\http.py", line 593, in send
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\netsvc.py", line 360, in dispatch_rpc
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\service\web_services.py", line 586, in dispatch
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\osv\osv.py", line 167, in execute_kw
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\osv\osv.py", line 121, in wrapper
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\osv\osv.py", line 176, in execute
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\osv\osv.py", line 164, in execute_cr
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\base\module\wizard\base_module_upgrade.py", line 101, in upgrade_module
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\pooler.py", line 39, in restart_pool
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\registry.py", line 202, in new
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\loading.py", line 338, in load_modules
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\loading.py", line 253, in load_marked_modules
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\loading.py", line 165, in load_module_graph
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\module.py", line 409, in load_openerp_module
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\module.py", line 139, in load_module
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\report_aeroo\__init__.py", line 32, in <module>
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\module.py", line 139, in load_module
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\aeroolib\__init__.py", line 14, in <module>
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\module.py", line 139, in load_module
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\openerp\addons\aeroolib\__init__.py", line 14, in <module>
  233323\Server\server\.\openerp\modules\module.py", line 139, in load_module
 **<<repeat the above 6 lines 40 times>>**
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\module.py", line 99, in find_module
  File "C:\Program Files (x86)\OpenERP 6.1-20120813-233323\Server\server\.\openerp\modules\module.py", line 175, in get_module_path
  File "ntpath.pyo", line 73, in join
  File "ntpath.pyo", line 57, in isabs
  File "ntpath.pyo", line 125, in splitdrive
RuntimeError: maximum recursion depth exceeded in cmp 
```

aeroolib__init__.py ：（此目录的位置：openerp/addons/aeroolib）

```
line 14:    from aeroolib.reporting import MIMETemplateLoader, ReportRepository, Report
line 15:    import plugins

            __version__ = '1.0.0 RC4' 
```

modules/module.py ：（此目录的位置：openerp/modules/module.py）

```
 def load_module(self, module_name):

             module_parts = module_name.split('.')
             if len(module_parts) == 3 and module_name.startswith('openerp.addons.'):
                 module_part = module_parts[2]
                 if module_name in sys.modules:
                     return sys.modules[module_name]

             if len(module_parts) == 1:
                 module_part = module_parts[0]
                 if module_part in sys.modules:
                     return sys.modules[module_part]

             try:
                 # Check if the bare module name shadows another module.
                 f, path, descr = imp.find_module(module_part)
                 is_shadowing = True
             except ImportError, e:
                 # Using `import <module_name>` instead of
                 # `import openerp.addons.<module_name>` is ugly but not harmful
                 # and kept for backward compatibility.
                 is_shadowing = False

             # Note: we don't support circular import.
**line 139:    f, path, descr = imp.find_module(module_part, ad_paths)**
             mod = imp.load_module('openerp.addons.' + module_part, f, path, descr)
             if not is_shadowing:
                 sys.modules[module_part] = mod
                 for k in sys.modules.keys():
                     if k.startswith('openerp.addons.' + module_part):
                         sys.modules[k[len('openerp.addons.'):]] = sys.modules[k]
             sys.modules['openerp.addons.' + module_part] = mod
             return mod 
```

模块/module.py：第 179 行

```
 def get_module_path(module, downloaded=False, display_warning=True):
         """Return the path of the given module.

         Search the addons paths and return the first path where the given
         module is found. If downloaded is True, return the default addons
         path if nothing else is found.

         """
         initialize_sys_path()
         for adp in ad_paths:
             if os.path.exists(opj(adp, module)) or os.path.exists(opj(adp, '%s.zip' % module)):
                 return opj(adp, module)

         if downloaded:
ln 179:      return opj(_ad, module)
         if display_warning:
             _logger.warning('module %s: module not found', module)
         return False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:32:16.993

我唯一能想到的是，OpenERP 的`aeroolib`模块不应该在 Python 路径上。我认为当 Python`aeroolib`看到这一行时，它会加载 OpenERP 模块而不是 Aeroolib 库模块：

```
from aeroolib.reporting import MIMETemplateLoader, ReportRepository, Report 
```

我建议你检查你的 Python 路径，看看它是否包含`OpenERP 6.1-20120813-233323\Server\server\openerp\addons`.

# django - unicode'对象在Django中没有属性'get'

> ID：12128431
> 
> 赞同：5
> 
> 时间：2012-08-26T07:36:17.663
> 
> 标签：django

我正在尝试按照 [Django Tutorial 6][1] 进行用户身份验证。但我卡住了。我收到此属性错误：unicode' 对象没有属性'get'。模型、视图和表格如下。不知道错误在哪里......需要一些帮助......

模型.py

```
from django.db import models
from django.contrib.auth.models import User

class Drinker(models.Model):

    user = models.OneToOneField(User)
    birthday = models.DateField()
    name = models.CharField(max_length=100)

    def __unicode__(self):
        return self.name 
```

视图.py

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template import RequestContext
from drinker.forms import RegistrationForm
from django.contrib.auth.models import User
from drinker.models import Drinker

def DrinkerRegistration(request):
    if request.POST:
        form =RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(username=form.cleaned_data['username'],email=form.cleaned_data['email'])
            password = form.cleaned_data['password']
            user.save()
            drinker=Drinker(user=user,name=form.cleaned_data['name'],birthday=form.cleaned_data['birthday'])
            drinker.save()
            return HttpResponseRedirect('/profile/')
        else:
            return render_to_response('register.html',{'form':form,},context_instance=RequestContext(request))
    else:
        form = RegistrationForm()
        return render_to_response('register.html',{'form':form,},context_instance=RequestContext(request)) 
```

表格.py

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from drinker.models import Drinker 

class RegistrationForm(ModelForm):
    username = forms.CharField(label=(u'User Name'))
    email = forms.EmailField(label =(u'Email Address'))
    password = forms.CharField(label =(u'Password'),widget=forms.PasswordInput(render_value=False))
    password1 = forms.CharField(label =(u'Verify Password'),widget=forms.PasswordInput(render_value=False))

    class Meta:
        model = Drinker
        exclude = ('user',)

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError("That username is already taken. Please select another")
    def clean(self):
        password = self.cleaned_data['password']
        password1= self.cleaned_data['password1']
        if password and password1 and password != password1:
            raise forms.ValidationError("The passwords did not match. Please try again")
        return password 
```

错误：

```
Environment:

Request Method: POST

Django Version: 1.4
Python Version: 2.7.1
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'drinker')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/cnnlakshmen_2000/Projects/Permissions/drinker/views.py" in DrinkerRegistration
  12\.       if form.is_valid():
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/forms/forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/forms/forms.py" in _get_errors
  115\.             self.full_clean()
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/forms/forms.py" in full_clean
  272\.         self._post_clean()
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/forms/models.py" in _post_clean
  311\.         exclude = self._get_validation_exclusions()
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/forms/models.py" in _get_validation_exclusions
  297\.                 field_value = self.cleaned_data.get(field, None)

Exception Type: AttributeError at /register/
Exception Value: 'unicode' object has no attribute 'get' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T08:31:26.853

您`password`从`clean()`方法返回，而不是`self.cleaned_data`.

# performance - 显示文本的优化方式

> ID：12128434
> 
> 赞同：0
> 
> 时间：2012-08-26T07:37:52.073
> 
> 标签：performance, apache-flex, itemrenderer

我正在优化在 Rect 中显示字符的项目渲染器，我注意到动态设置文本的动作很慢，现在我正在考虑使用硬编码的文本创建预制对象和项目内部 -渲染器有一个开关来选择正确的文本对象而不是使用`.text =`，有没有人对如何优化渲染器有任何其他想法，它是一个平铺布局，在屏幕上显示大约 100 个渲染器。

还有 - 我可以在渲染器中使用的最便宜（性能方面）的文本对象是什么？

谢谢

```
<!-- DNA Plus -->
<s:Group height="26" width="100%" y="20">
    <s:Rect id="backgroundTop" left="0" right="0" top="0" bottom="0"
            alpha="{(data as MiniBrick).brick.strand == StrandEnum.PLUS.value ? 1 : 0.7}">
        <s:fill>
            <s:SolidColor id="bgFillTop" color="{BrickColors.getColor((data as MiniBrick).brick)}"/>
        </s:fill>
    </s:Rect>

    <s:Rect id="selectedBackgroundTop" left="0" right="0" top="2" bottom="1" includeIn="selected">
        <s:fill>
            <s:SolidColor id="sBgFillTop" color.selected="0xB6E0F2"/>
        </s:fill>
    </s:Rect>

    <!--- @copy spark.components.supportClasses.SkinnableTextBase#textDisplay -->
    <s:Label id="textDisplayTop" width="100%" top="4" fontFamily="Consolas" text="{(data as MiniBrick).origin}"
             fontSize="20" lineBreak="explicit" verticalAlign="middle" textAlign="center"/>
</s:Group>

<!-- DNA Minus -->

<s:Group height="26" width="100%" y="46">
    <s:Rect id="backgroundBottom" left="0" right="0" top="0" bottom="0" 
            alpha="{(data as MiniBrick).brick.strand == StrandEnum.MINUS.value ? 1 : 0.7}">
        <s:fill>
            <s:SolidColor id="bgFillBottom" color="{BrickColors.getColor((data as MiniBrick).brick)}"/>
        </s:fill>
    </s:Rect>

    <s:Rect id="selectedBackgroundBottom" left="0" right="0" top="1" bottom="2" includeIn="selected">
        <s:fill>
            <s:SolidColor id="sBgFillBottom" color.selected="0xB6E0F2"/>
        </s:fill>
    </s:Rect>

    <!--- @copy spark.components.supportClasses.SkinnableTextBase#textDisplay -->
    <s:Label id="textDisplayBottom" width="100%" top="4" fontFamily="Consolas" text="{DnaDictionary.getComplementSequenceOneLetter((data as MiniBrick).origin)}"
             fontSize="20" lineBreak="explicit" verticalAlign="middle" textAlign="center"/>
</s:Group>

<!-- DNA index [tick list] -->
<s:Group width="15" id="dnaTick" y="72">
    <s:Rect horizontalCenter="0" width="2" height="2" radiusX="1">
        <s:fill>
            <s:SolidColor color="#666666"/>
        </s:fill>
    </s:Rect>
    <s:Label id="dnaTickLabel" horizontalCenter="0" y="5" height="9" color="#888888" fontFamily="Arial" fontSize="9"
             textAlign="left" />
</s:Group>

<s:Line id="firstMiniBrickInBrickLine" x="0" y="20" yFrom="72">
    <s:stroke>
        <s:SolidColorStroke caps="none" color="#FFFFFF" weight="1"/>
    </s:stroke>
</s:Line> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:46:03.383

直接回答您的问题：显示文本的最优化方式是使用[UITextField](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UITextField.html)类。但是您将很难在 ItemRenderer 中实现它，因为它不是从 UIComponent 继承的。

这也不是在您的代码中获得最大性能提升的地方。最大的问题是这个渲染器里面有 6 个数据绑定。如果屏幕上有 100 个项目，那么就有 600 个听众在观察数据变化。

因此，您应该删除所有这些绑定并通过覆盖 ItemRenderer 的`data`设置器来设置这些属性，如下所示：

```
override public function set data(value:Object):void {
    super.data = value;

    var brick:MiniBrick = value as MiniBrick;
    backgroundTop.alpha = brick.brick.strand == StrandEnum.PLUS.value ? 1 : 0.7;
    bgFillTop.color = BrickColors.getColor(brick.brick);
    ...
} 
```

如果您想进一步优化，我建议您将渲染器的信息直接放在数据上，这样就不必每次都对其进行评估，您可以编写以下内容：

```
override public function set data(value:Object):void {
    super.data = value;

    var brick:MiniBrick = value as MiniBrick;
    backgroundTop.alpha = brick.alpha;
    bgFillTop.color = brick.color;
    ...
} 
```

# java - 装饰器模式丢失了虚拟方法查找。有什么好的替代方案或解决方法吗？

> ID：12128436
> 
> 赞同：4
> 
> 时间：2012-08-26T07:38:22.653
> 
> 标签：java, oop, decorator, virtual-functions

## 背景

我处于以下情况：

我有一个`Analyzer`大致如下的类型

```
interface Analyzer {
    int computeValue();
    String performAnalysis();
} 
```

由类似的东西实现

```
class AnalyzerImpl implements Analyzer {

    @Override
    public int computeValue() {
        return 5;
    }

    @Override
    public String performAnalysis() {
        return "Result: " + computeValue();
    }
} 
```

（在我的实际代码中，`performAnalysis`使用几种复杂程度不同的方法执行许多计算`computeValue`。）

现在我需要`Analyzer`在运行时有选择地调整对象的行为（或使用调整后的行为创建包装器）。

## 我尝试了什么：

我添加了调整方法：

```
public Analyzer tweakAnalyzer(Analyzer untweakedAnalyzer) { ... } 
```

并尝试使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)解决它：

```
class AnalyzerDecorator implements Analyzer {
    Analyzer delegate;
    public AnalyzerDecorator(Analyzer delegate) {
        this.delegate = delegate;
    }

    @Override
    public int computeValue() {
        return delegate.computeValue();
    }

    @Override
    public String performAnalysis() {
        return delegate.performAnalysis();
    }
} 
```

然后我实现`tweakAnalyzer`如下：

```
public Analyzer tweakAnalyzer(Analyzer untweakedAnalyzer) {
    return new AnalyzerDecorator(untweakedAnalyzer) {
        @Override
        public int computeValue() {
            return 1337;              // tweaked value!
        }
    };
} 
```

然而，当做

```
tweakAnalyzer(new AnalyzerImpl()).performAnalysis(); 
```

我得到了*未调整的值* `Result: 5`，而不是`Result: 1337`预期的值。

（这是因为经过调整的分析器与未调整的分析器不是同一个对象，它只是一个包装器，因此对`computeValue`in的调用`AnalyzerImpl`无法按预期工作。）

[完整的 ideone.com 示例。](http://ideone.com/ajIKg)

## TL;博士：

我想在运行时调整对象的行为。我使用了装饰器模式，但“丢失”了所有虚拟方法。

## 问题：

解决此问题的最佳方法是什么，即我应该如何调整 an 的行为，以`Analyzer`使我不会丢失虚拟方法查找，或者如果我这样做也没关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T07:57:25.203

问题是你的装饰器没有被调用，`performAnalysis`因为它不知道你装饰了这个类。

您可能应该分成两个类（with`performAnalysis`和with ）`computeValue``Analyzer``performAnalysis``Calculator``computeValue`

这样，您可以独立装饰它们，并将装饰的计算器传递给`Analyzer`a'la `performAnalysis(Calculator calculator)`。

[IDEOne](http://ideone.com/Db5fv)的一个例子。是的，它基本上是行动中的[战略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:05:10.450

您可以访问分析器对象的代码吗？如果是这样，您可以使用策略模式将其设计为可调整的。

替代方案（具有多种分派的模板模式）：

```
abstract class Analyzer {

   public final int ComputeValue () {
      return doComputeValue (this);
   }

   public final string PerformAnalysis () {
      return doPerformAnalysis (this);
   }

   protected abstract int doComputeValue (Analyzer myself);
   protected abstract string doPerformAnalysis (Analyzer myself);
}

class AnalyzerImpl extends Analyzer {

   protected int doComputeValue (Analyzer myself) {
      ...
   }

   protected string doPerformAnalysis (Analyzer myself) {
      return "Result: " + myself.ComputeValue();
   }
}

class AnalyzerDecorator extends Analyzer {
    Analyzer delegate;
    ...
    protected string doPerformAnalysis (Analyzer myself) {
        return delegate.doPerformAnalysis (myself);
    }
    protected int doComputeValue (Analyzer myself) {
        return delegate.doComputeValue (myself);
    }
} 
```

# java - 使用 xalan 在 xsl 中获取 ArrayList

> ID：12128445
> 
> 赞同：1
> 
> 时间：2012-08-26T07:40:48.540
> 
> 标签：java, validation, xslt, xalan

我有一个添加数据的页面。和验证人

```
<xsl:param name="validator"/>

<xsl:variable name="errorList" select="validator:getErrorList()" />
        <xsl:for-each select="$errorList">
            <li>
                <xsl:value-of select="." />
            </li>
        </xsl:for-each> 
```

验证失败时。我返回同一页面并想要获取错误列表。现在我收到错误消息，ArrayList 无法转换为 NodeList。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-25T06:52:09.513

我遇到了同样的问题，我通过 return`org.apache.xpath.NodeSet`而不是`ArrayList<String>`在 java 方法中解决了它。XSLT 和 Java 代码如下

*   Java 方法

    ```
    public NodeSet getNodeSet(){     
    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
    Document doc = docBuilder.newDocument();  

    NodeSet nodeset =  new NodeSet();
    nodeset.addElement(doc.createTextNode("noteOne"));
    nodeset.addElement(doc.createTextNode("nodetTwo"));
    System.out.println("NodeSet length: " + nodeset.getLength());
       return nodeset;
     } 
    ```

*   XSLT 代码

    ```
     <xsl:for-each select="myclass:getNodeSet()">
            <li>
                <xsl:value-of select="." />
            </li>
      </xsl:for-each> 
    ```

我希望它可以帮助

# voxel - 具有实例化对象的场景的体素化

> ID：12128449
> 
> 赞同：1
> 
> 时间：2012-08-26T07:42:19.907
> 
> 标签：voxel, direct3d11, octree, voxels, compute-shader

我在directx11 中创建了一个简单的场景，它有一个平面作为地板，有几个球体、立方体和矩形墙。只加载了 3 个对象：平面、立方体和球体；但是立方体和球体被多次实例化，具有不同的缩放、位置和旋转。其中两个对象是动态的。

考虑到具有不同比例和旋转的对象实例，我想将整个场景（100x100x20 单位）体素化为 0.2 单位体素。

我已经阅读了几篇关于体素化的文章，并获得了来自 GPU Pro 3 的“Practical Binary Surface and Solid Voxelization with Direct3D 11”的源代码；但是所有这些文章都展示了单个对象的体素化——将它们的三角形分割成一个网格。

我将如何扩展这些方法以解决具有多个对象实例的整个场景？

我唯一能想到的就是我必须对整个场景进行自上而下的八叉树划分。但对于动态场景，这会不会太贵？

对于我的场景，我为每个加载的模型使用一个缓冲区，所以如果我要在计算着色器中进行体素化，我是否需要将所有三个缓冲区复制到一个缓冲区中？我如何考虑模型实例？

谢谢你。

# javascript - Javascript 中的 iframe 和内存管理

> ID：12128458
> 
> 赞同：27
> 
> 时间：2012-08-26T07:44:26.593
> 
> 标签：javascript, jquery, memory-management, iframe

我有将页面加载到 iframe 中的链接。我一直在使用谷歌浏览器的内存堆分析器监控内存中的数据积累，我注意到内存中有一些泄漏。

我加载了页面并拍摄了第一个快照，加起来为`2.69 MB`. 我单击了将页面打开到 iframe 中的链接，并拍摄了另一个快照给我`14.58 MB`。我使用以下 jquery 片段删除了 iframe：

```
$('#myframe').unbind();
$('#myframe').remove();
/*
* By the way, I also tried $('#myframe > *') as a selector. 
* It still didn't work. Even if it would, it doesn't look like a viable solution to me.
* It looks too resource intensive.
*
* I forgot to mention that I am not using Ajax to load my pages
*/ 
```

我又拍了一张快照，得到`5.28 MB`的结果表明与初始值有偏差`2.59 MB`，据我了解，这表明内存泄漏。

现在，我的问题是：如果我删除一个 iframe（包括其中加载的文档），垃圾收集器是否发现有必要从内存中删除该文档中包含的所有对象？还是我必须手动执行此操作？

我认为如果我将文档加载到 iframe 中，它的大小不会影响父页面上的内存使用。我虽然将它视为一个单独的窗口，但显然这不是我的一个明智的假设。

关于如何解决这个问题的任何建议？

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-01T17:25:56.310

在 iframe 中，在删除之前触发重新加载，然后将其删除。

```
<a href="#">Remove</a>
<iframe src="url" />​

$('a').click(function(){
    $('iframe')[0].contentWindow.location.reload();
    setTimeout(function(){
       $('iframe').remove();
    }, 1000);
});​ 
```

[演示在这里](http://jsfiddle.net/mrobin/DfAp9/1/)。

此外，您也可以进行手动清理 - 即，如果您的 cookie 或 HTML5 localStorage 中有数据。

```
window.onbeforeunload = function(){
    $(document).unbind().die();    //remove listeners on document
    $(document).find('*').unbind().die(); //remove listeners on all nodes
    //clean up cookies
    /remove items from localStorage
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:00:04.110

如果 iframe 中的任何对象在主窗口​​中的对象中被引用，则该对象不会从 DOM 中删除，因此，如果您有这样的事情：

主窗口：

```
var object = {};
function iframe_call(data){
    object.iframe_data = data.something
} 
```

框架：

```
function onClick(){
    parent_object.iframe_call(this);
} 
```

当您引用 DOM 对象时，尤其会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-27T16:49:15.970

```
var frame = document.getElementById("myframe");
frame.src = "about:blank"; 
```

这对我有用并防止了内存泄漏。ig您必须销毁iframe的父级，延迟执行以防止内存泄漏

# jquery - 如何在页面加载时使用 jquery 检查复选框

> ID：12128460
> 
> 赞同：1
> 
> 时间：2012-08-26T07:44:27.873
> 
> 标签：jquery, jsp, spring-mvc

我的问题是我想在页面加载时检查我的复选框。

这些复选框当前位于用户表单的末尾，如下所示：![在此处输入图像描述](../Images/7a58d13186ade639fb5b6963aa06cdec.png)

每个复选框对应一个规范对象。在我的模型图中，我添加了一个包含检查值的“规范”列表，以及一个包含所有值的“所有规范”列表：

```
List<Specification> specification=hot*******.get********otel(createHotel); //this is for check value.

List<Specification> allspecification=city****vice.getspec***fication(); //for all specification

map.addAttribute("orgspecification", specification);
map.addAttribute("allToatalspecfication", allspecification); 
```

这是相应的 JSP 页面：

```
<div id="orgspecifications" style="margin-left:1px; height: 100px; width: 97%;">
  <c:forEach step="1" items="${allToatalspecfication}" var="specification">
    <div align="left" id="${specification.id}" style="width: 28%; color: #507B07; border: solid 1px gray; float: left; margin: 3px; height: 27px; background-color: #E9EBE3;">
      <input type="checkbox" name="checkbox" value="${specification.id}" id="checkbox" class="selectall"/>
      ${specification.name}
    </div>
  </c:forEach>
</div> 
```

问题是，我正在显示所有“所有规范”列表，但我还希望检查“规范”列表的元素。如何在页面加载时实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:36:18.117

通过这样做，我解决了这个问题......

```
<div style="margin-top: 6px;">
                <div id="orgspecifications" style="margin-left:1px; height: 100px; width: 97%;">
<c:forEach step="1" items="${allToatalspecfication}"   var="specification">
                 <c:set value="${true}" var="unCheckFlag"></c:set>

                    <c:forEach  items="${orgspecification}" var="selectedspecification">

                                <c:if test="${specification.id eq selectedspecification.id}">
                                        <div align="left" id="${specification.id}" style="width: 28%; color: #507B07; border: solid 1px gray; float: left; margin: 3px; height: 27px; background-color: #E9EBE3;">
                                            <input type="checkbox" name="checkbox" value="${specification.id}" id="checkbox" class="selectall" checked="checked"/>
                                                ${specification.name}
                                        </div>
                                         <c:set value="${false}" var="unCheckFlag"></c:set>
                                </c:if>
                    </c:forEach>
                    <c:if test="${unCheckFlag == true}">

                                    <div align="left" id="${specification.id}" style="width: 28%; color: #507B07; border: solid 1px gray; float: left; margin: 3px; height: 27px; background-color: #E9EBE3;">
                                            <input type="checkbox" name="checkbox" value="${specification.id}" id="checkbox" class="selectall"/>
                                                ${specification.name}
                                    </div>
                   </c:if>      

</c:forEach>
</div> 
```

感谢大家的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:15:03.730

```
$(function(){
  $.get('some/url',function(data){
    $('.selectall').each(function(){
      if ($.inArray(+$(this).val(),data) > -1){
        $(this).attr('checked',true);
      }
    });
  });
}) 
```

请注意，我假设`data`变量包含已检查规范的`Number`类型 ID。

在服务器端，你必须有这样的东西：

```
@Controller
public class A {

  @RequestMapping('some/url')
  @ResponseBody
  public List<Integer> getIdsOfCheckedSpecs() {
    List<Integer> list = ...
    return list;
  }
} 
```

# c++ - 在 Visual Studio、C++ 中使用 FDLIBM 库

> ID：12128462
> 
> 赞同：1
> 
> 时间：2012-08-26T07:44:36.247
> 
> 标签：c++, c, visual-studio-2010, c-libraries

我将一些代码从 MATLAB 移植到 C++，发现 MATLAB 的 sin() 和 cos() 函数与 C++ 库中的 sin() 和 cos() 函数产生的结果略有不同。为了消除这些差异，我希望我的 C++ 代码调用 fdlibm 5.3 库中的 sin() 和 cos() 函数，我认为这是 MATLAB 用于 sin() 和 cos() 操作的函数。

但是，我在使用 fdlibm 库时遇到了一些困难。我正在使用 Visual Studio 2010，并从[http://www.validlab.com/software/](http://www.validlab.com/software/)下载了 fdlibm 头文件和源代码，但不确定使用这些文件的最佳方式。我是否需要先将文件构建到静态或动态库中，然后将其链接到我的代码？另外，我如何指定我想使用 fdlibm 中的 sin()，而不是 C++ 库中的？我是否需要修改 fdlibm 源代码以使 sin() 和 cos() 函数位于命名空间内？

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:00:16.537

本质上，您有两个任务要完成：

*   您必须编译 fdlibm 源以生成适合您目的的目标模块。
*   您必须将目标模块与您的其他目标模块链接起来。

我看到第一个任务有两个问题。第一，来自像 fdlibm 这样的项目的源代码通常被编写为可移植到许多系统，并且可能涉及大量的配置工作。它们可能不是非常简单的 C 或 C++ 代码，而是使用许多预处理器条件来选择某些选项，并且源代码进来的包可能有脚本来为编译做各种准备。

第二，您希望源代码符合 C++ 标准的声明`sin`和`cos`. 如果您拥有的 fdlibm 包支持 C++，这可能不需要您做任何工作。否则，您可能必须修改源以将`sin`and`cos`定义包装在 std 命名空间内，或者以其他方式修改源。

第二个问题是链接。不需要使用库。您可以简单地编译包含`sin`并`cos`生成一个（或多个）对象模块的源文件，然后将该（或多个）对象模块与您的其他对象模块链接。如果您愿意，您可以改为创建一个库，将目标模块`sin`与`cos`进入库，并将库与您的目标模块链接。使用最常见的链接器，您可以将库与目标模块链接起来，只需将其列为链接器的输入即可，与列出目标模块的方式相同。（一些链接器还有其他引用库的选项，但通常只需提供其正常文件路径就足够了。）您可以根据需要创建和链接静态库或动态库。如果您使用动态库，则它必须在可执行文件运行时存在。对于您自己使用的简单应用程序，无需使用动态库（甚至无需使用静态库；对象模块即可）。（本质上，库的目的是使将对象模块分发给其他人更容易，或者组织大型项目。简单的应用程序不需要库。）

关于链接的另一个注意事项：当您提供自己的 sin 和 cos 时，链接器有两种实现可供选择：您的 sin 和 cos 实现以及 sin 和 cos 的标准库实现。通常，标准库链接在任何用户指定的文件之后，因此仅指定您的目标模块或库就足以确保使用您的 sin 和 cos，而不是库的 sin 和 cos。如果不是这种情况，应该有链接器选项来更改考虑库的顺序。

# java - 这个数组是什么？

> ID：12128463
> 
> 赞同：8
> 
> 时间：2012-08-26T07:44:46.990
> 
> 标签：java, arrays

我在一本书中遇到了这个代码行，它说这是合法的，但我在谷歌搜索时并不真正理解。代码是：

```
Boolean [] ba []; 
```

我只知道要创建一个数组，应该是这样的：

```
int [] numberArray;

int numberArray [];

int [] [] num2DArray; 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T07:48:47.000

所有这 3 个声明在 java 中具有相同的含义：

```
Boolean  [][] ba ;
Boolean  [] ba [];
Boolean  ba [][] ; 
```

我不是很喜欢它，但由于不会有任何混淆，所以让它们等价并没有太大的危害。理由是 C 和 C++ 编码器习惯于某种符号：

```
 int a[]; 
```

而java中的建议是一致地声明之前的类型，如

```
 int[] a; 
```

这是参考：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2)

和两个提取物：

> 声明符中允许使用括号作为对 C 和 C++ 传统的致敬。然而，变量声明的一般规则允许括号出现在类型和声明符中，以便局部变量声明
> 
> [...]
> 
> 我们不建议在数组变量声明中使用“混合表示法”，因为括号同时出现在类型和声明符中。

为了在Java中更具可读性，我建议你坚持通常的

```
 Boolean[][] ba ; 
```

请注意，您对方法声明有类似的行为。`ByteArrayOutputStream`这是类源代码的摘录：

```
public synchronized byte toByteArray()[] {
    return Arrays.copyOf(buf, count);
} 
```

这是允许[的兼容性](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)，但请不要使用它。大多数编码人员乍一看不会注意到`[]`，因此不会立即读到这个方法返回一个数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T08:24:32.483

```
Boolean [] ba []; 
```

它是一个二维数组。

对于数组声明，您可以在变量名之前或之后放置括号。

```
int ba[]; or int ba []; 
```

两者都是一样的。对于二维或二维数组

```
int [] [] num2DArray;
int [] num2DArray []; 
int num2DArray[] []; 
```

这都是一样的。但建议

*String[] 是首选，因为它将 args 的类型（字符串数组）保持在一起。在更复杂且格式错误的方法签名中，很容易在参数名称后遗漏 []。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T08:01:43.580

一维和二维数组可以用不同的方式声明。

```
int arr [];
int [] arr; 
```

二维数组：

```
String [][] myStringArray = new String [x][y];
Boolean  [][] booeanArr ;
Boolean  [] booeanArr [] ;
Boolean  booeanArr [][] ; 
```

要在 java 中声明更具可读性的数组，请使用以下约定

字符串 [][] 我的字符串数组；

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T09:10:10.973

这是一个向您展示`[]`位置何时产生影响的示例。

```
Boolean[] arr, arr2[]; 
```

是的`arr`数组，`Boolean`而`arr2`是 的数组的数组`Boolean`。

# drop-down-menu - Twitter bootstrap - 断词在下拉菜单上不起作用

> ID：12128465
> 
> 赞同：10
> 
> 时间：2012-08-26T07:45:24.737
> 
> 标签：drop-down-menu, twitter-bootstrap, word-wrap

我申请`word-wrap: break-word`了 twitter bootstrap dropdown-nemu，但没有成功。这是[JSFiddle](http://jsfiddle.net/Ex5fA/)。

我尝试了一个简化的示例并且它有效：

```
<ul style="width: 60px">
    <li>
        <a style="word-wrap: break-word">fdsssssssssssssssssssssssssdfdsfsdfsdf</a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-26T08:13:40.907

这是因为`white-space: nowrap`带有链接的属性..添加此行：

```
<li><a href="#" style="word-wrap: break-word; white-space: normal;">sometextsometextsometextsometextsometext</a></li> 
```

..或在这里使用完整的小提琴：http: [//jsfiddle.net/Ex5fA/45/](http://jsfiddle.net/Ex5fA/45/)（您的`.dropdown-menu`选择器也有错别字..它是输入的`.dorpdown-nenu`；）

# django - 在模板（html）或forms.py中创建表单？:django

> ID：12128471
> 
> 赞同：0
> 
> 时间：2012-08-26T07:46:23.297
> 
> 标签：django, django-forms, django-templates, django-views

我是 django 和 python 的新手。我想在我的网站页面中有一个表格。当用户填写数据时，我想用用户输入创建一个 xml 文件。所以我需要从views.py 访问用户的数据（表单数据）。我想知道我是否只允许在 html 中使用表单？如果是，我如何在views.py 中使用它的数据？我的意思是我应该总是在 forms.py 中定义一个包含我的表单字段的类吗？如果第二种方式是规则，我应该如何处理模板（html）？（这意味着如果我在 forms.py 的一个类中定义我的字段，我是否也应该在模板（html）中重新定义它们？以及如何使用 views.py 中的数据）

我的表单需要一些输入：复选框，输入类型：文本和输入类型：文件

我真的需要你的答案。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:58:50.407

您可以完全在原始 html 中定义您的表单并编写一个仅处理发布数据的视图。但随后我们指出您将再次发明轮子。Django 提供了一堆提供 html 渲染和数据验证的字段类（从不信任用户输入）。

我建议您阅读[表单的在线文档](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs)。

# asp.net - 图像不会在视觉工作室设计时显示

> ID：12128472
> 
> 赞同：0
> 
> 时间：2012-08-26T07:46:26.313
> 
> 标签：asp.net, visual-studio, iis

**我的iis** *-portal*上有一个**虚拟目录**，其中包含图像。我在我的 asp.net 表单中放置了一个图像标签。

 ***```
 <img src="http://localhost/portal/images/button_right.gif" alt="Alternate Text" /> 
```

这是代码：

```
<%Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication15.WebForm1" %>    
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
    <html xmlns="http://www.w3.org/1999/xhtml"> 
    <head runat="server"> 
        <title></title> 
    </head> 
    <body> 
        <form id="form1" runat="server"> 
        <div> 
            <img src="http://localhost/portal/images/button_right.gif" alt="Alternate Text" /> 
        </div> 
        </form> 
    </body> 
    </html> 
```

该图像显示了我在浏览器上运行项目时的情况。该图像未在设计时显示。- 我看到的是 X，而不是图像。我设置了虚拟目录的所有读写执行权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:56:08.280

您永远不应将图像 src 指定为绝对路径。用于`~`解决您的应用程序路径。它需要该`runat="server"`属性，因为它被服务器上的 IIS 替换。

```
<img runat="server" src="~/images/button_right.gif" alt="Alternate Text" /> 
```***

# haskell - Yesod 中的基本 HTTP 身份验证

> ID：12128474
> 
> 赞同：4
> 
> 时间：2012-08-26T07:46:33.147
> 
> 标签：haskell, yesod

我有一个很小的 ​​Yesod 应用程序（使用脚手架）。我想为所有请求添加基本的 HTTP 身份验证。这是我到目前为止所尝试的：

*   我已经阅读了有关 Yesod 身份验证的文档，但不幸的是没有后端支持这一点。
*   `isAuthorized`会很棒，但我看不到那里读取标题的方法。
*   WAI 中间件会很优雅，但我找不到任何描述如何将其与完整 Yesod 应用程序一起使用的文档。同样很清楚的是，写一个并不是完全微不足道的。

这已经完成了吗？我应该如何处理这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:27:59.840

我想出了一个不理想的解决方案：我在我的所有处理函数中添加一个动作。也许它对某人有用，也许有人可以改进这一点。这是代码：

```
httpBasicAuth :: Handler ()
httpBasicAuth = do
  request <- waiRequest
  case lookup "Authorization" (requestHeaders request) of
    Just "Basic base64encodedusernameandpassword" -> return ()
    _ -> do
      setHeader "WWW-Authenticate" "Basic Realm=\"My Realm\""
      permissionDenied "Authentication required" 
```

并使用它：

```
fooR :: Handler ()
fooR = httpBasicAuth >> do
  sendResponseStatus status200 () 
```

如果发布了更好的解决方案，我将非常乐意移动“已接受”复选标记。

# javascript - 如何使用带有特殊键 ENTER 的 fireEvent

> ID：12128475
> 
> 赞同：2
> 
> 时间：2012-08-26T07:47:22.597
> 
> 标签：javascript, extjs4.1

我希望我的领域在失焦时提交。（模糊事件）。触发提交的事件是一个 ENTER 键事件。所以我这样做了：

```
outOfFocus: function(field, event) {
    console.log('Lost focus');
    field.fireEvent('specialkey', field,
        Ext.create('Ext.EventObject', {
            key: Ext.EventObject.ENTER
        })
    );
}, 
```

但它不起作用。Firebug 说了一些关于： TypeError: c is not a constructor。

有什么想法吗？

评论中要求的更多周围代码：

表格：

```
var editPic = "<img src='https://s3.amazonaws.com/bzimages/pencil.png' alt='edit' height='24' width='24' style='margin-left: 10px;'/>";
var submitPic = "<img id='submitPic' src='https://s3.amazonaws.com/bzimages/submitPic.png' alt='edit' height='24' width='24'/>";

Ext.define('BM.view.test.Edit', {
extend: 'Ext.form.Panel',
alias: 'widget.test-edit',

layout: 'anchor',
title: 'Edit Test',
defaultType: 'displayfield',

items: [
    {name: 'id', hidden: true},
{
    name: 'name',
    fieldLabel: 'Name',
    afterSubTpl: editPic,
    cls: 'editable'
},
{
    name: 'nameEdit',
    fieldLabel: 'Name',
    xtype: 'textfield',
    hidden: true,
    cls: 'editMode',
    allowBlank: false,
    afterSubTpl: submitPic
}
]

}); 
```

控制器：

```
 this.control({
        'test-edit > displayfield': {
            afterrender: this.showEditable
        },
        'test-edit': {
            afterrender: this.formRendered
        },
        'test-edit > field[cls=editMode]': {
            specialkey: this.editField,
            blur: this.outOfFocus
        }
    }); 
```

这足以理解我在做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:49:07.500

我找到了答案。它似乎不够充分，但仍然可以完成工作。

我重用了触发此函数调用的事件：

```
outOfFocus: function(field, event) {
        console.log('Lost focus');
        event.keyCode = event.ENTER;
        field.fireEvent('specialkey',field, event);
    }, 
```

仍在寻找更好的方法来做到这一点。

# bash - 如何对文件中的行进行编号（bash 或 sed）

> ID：12128478
> 
> 赞同：2
> 
> 时间：2012-08-26T07:48:29.737
> 
> 标签：bash, sed

我想为我的输入文件中的所有行编号，除了这个，匹配我的正则表达式。前任：

输入文件：

```
some text 12345
some another text qwerty
my special line
blah foo bar 
```

正则表达式：^我的

输出：

```
1 some text 12345
2 some another text qwerty
my special line
3 blah foo bar 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T07:56:12.213

`awk`可以很容易地做到这一点。awk 脚本：

```
!/^my/ {
  cnt++;
  printf "%d ", cnt
}
{
  print
} 
```

这意味着：对于与表达式不匹配的所有行，递增变量`cnt`（从零开始）并打印该数字后跟一个空格。然后只需打印整行。

演示：

```
 $ awk '!/^my/{cnt++; printf "%d ", cnt} {print}' input 
1 some text 12345
2 some another text qwerty
my special line
3 blah foo bar 
```

感谢[Thor](https://stackoverflow.com/users/1331399/thor)的精简版：

```
$ awk '!/^my/{$0=++cnt" "$0} 1' input 
```

当行与表达式不匹配时，这通过修改整行 ( `$0`) 来工作（在预递增的计数器之前）。
第一对`1`之后的`pattern{action}`本身就是一`pattern{action}`对省略了动作部分的对。`1`始终为 true，因此始终执行该操作，并且未指定时的默认操作是`{print}`. 并且`print`没有参数列表相当于`print $0`，即打印整行。

# asp.net - 循环通过复选框以确定复选框 id 并查看是否已选中

> ID：12128480
> 
> 赞同：0
> 
> 时间：2012-08-26T07:48:54.047
> 
> 标签：asp.net

我需要遍历 ASP.Net 页面中的所有复选框并确定复选框的 ID 并在选中时处理逻辑。任何伪代码都会有所帮助。问候-Yagya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:26:23.880

使用表单的 ControlCollection 循环遍历

```
foreach (Control ctl in Form.Controls)
{
  if (ctl is CheckBox)
  {
    CheckBox chk = (CheckBox)ctl;
    // Process chk as you wish
  }
} 
```

如果您希望在任何容器（面板等）中进行检查，请将代码写在像这样的递归函数中

```
 void CheckControls(ControlCollection collection)
  {
    foreach (Control ctl in collection)
    {
      if (ctl is CheckBox)
      {
        CheckBox chk = (CheckBox)ctl;
        //
      }
      if (ctl.Controls.Count > 0)
        CheckControls(ctl.Controls); // Step into the container & check inside
    }
  } 
```

使用 Form 的控件集合调用 CheckControls

```
CheckControls(Form.Controls) 
```

&它也会进入所有容器

# apache - 请求的资源（/activiti-explorer）不可用

> ID：12128482
> 
> 赞同：1
> 
> 时间：2012-08-26T07:49:06.767
> 
> 标签：apache, activiti

我面临以下问题：

*   我已经下载了在 apache 下运行的 Activiti bpm。
*   我都安装了；Java jre7 和 Java jdk1.7.0_06。
*   我将 JAVA_HOME 设置为 `C:\Program Files\Java\jdk1.7.0_06`.

但是当我尝试通过在 Windows 7 命令行中键入以下内容来运行 activiti bpm 时：

```
C:\activiti-5.10\activiti-5.10\setup>ant demo.start 
```

tomcat 服务器将启动，演示将成功构建，但如果我尝试导航到以下链接，则会`http://localhost:8080/activiti-explorer`收到以下错误：-

```
HTTP Status 404 - /activiti-explorer
________________________________________
type Status report
message /activiti-explorer

description The requested resource (/activiti-explorer) is not available.
________________________________________
Apache Tomcat/6.0.32 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T09:36:26.163

不确定这是否是正确的方法，但我似乎通过复制解决了这个问题

activiti-5.10/setup/build/webapps/activiti-explorer.war

至

activiti-5.10/apps/apache-tomcat-6.0.32/webapps

高温高压

# c# - 重构类似的方法

> ID：12128485
> 
> 赞同：2
> 
> 时间：2012-08-26T07:50:27.820
> 
> 标签：c#, refactoring

使用这种代码：

```
 public void UpdateCellFont(int id, string colName, Font font)
    {
        CellLocation location = new CellLocation(id, colName);

        if (CellAppearances.ContainsKey(location))
        {
            CellAppearances[location].Font = font;
        }
        else
        {
            CellAppearance cell = new CellAppearance(font, _DefaultBackColor, _DefaultForeColor);
            CellAppearances.Add(location, cell);
        }
    }

    public void UpdateCellBackColor(int id, string colName, Color backColor)
    {
        CellLocation location = new CellLocation(id, colName);

        if (CellAppearances.ContainsKey(location))
        {
            CellAppearances[location].BackColor = backColor;
        }
        else
        {
            CellAppearance cell = new CellAppearance(_DefaultFont, backColor, _DefaultForeColor);
            CellAppearances.Add(location, cell);
        }
    }

    public void UpdateCellForeColor(int id, string colName, Color foreColor)
    {
        CellLocation location = new CellLocation(id, colName);

        if (CellAppearances.ContainsKey(location))
        {
            CellAppearances[location].ForeColor = foreColor;
        }
        else
        {
            CellAppearance cell = new CellAppearance(_DefaultFont, _DefaultBackColor, foreColor);
            CellAppearances.Add(location, cell);
        }
    } 
```

这些方法几乎都做同样的事情——每一个都会更新 Font、BackColor 或 ForeColor（或者如果字典中没有条目，它们会创建一个新条目。

当它们作用于强类型的 CellAppearance 时，如何减少此处的重复？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T07:56:48.083

那直截了当呢？

```
public CellAppearance GetAppearance(int id, string colName){
    var location = new CellLocation(id, colName);
    if(!CellAppearances.ContainsKey(location))
       CellAppearances.Add(location, cell);
    return CellAppearances[location];
}

// usage:
GetAppearance(1,"hello").Font = myFont;
GetAppearance(2,"blubb").BackColor = myColor; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T08:43:51.660

## 代表救援！

在这种情况下，TheHe 的答案应该符合要求，但通常你可以通过使用委托作为方法参数来解决这种情况（并且组织你的主要方法有点不同）：

```
public void UpdateCellProperty (int id, string colName,
                                Action<CellAppearance> appearanceAction)
{
    CellAppearance cell;

    CellLocation location = new CellLocation(id, colName);
    if (CellAppearances.ContainsKey(location))
    {
        cell = CellAppearances[location];
    }
    else
    {
        cell = new CellAppearance(_DefaultFont, _DefaultBackColor,
                                  _DefaultForeColor);
    }
    appearanceAction(cell);
}

public void UpdateCellFont(int id, string colName, Font font)
{
    UpdateCellProperty(id, colName, c => c.Font = font);
}

public void UpdateCellBackColor(int id, string colName, Color backColor)
{
    UpdateCellProperty(id, colName, c => c.BackColor = backColor);
}

public void UpdateCellForeColor(int id, string colName, Color foreColor)
{
    UpdateCellProperty(id, colName, c => c.ForeColor = foreColor);
} 
```

我已经看到这种模式被称为“中间模式的洞”。非常合适：您定义了一个带有“孔”的方法体，该“孔”注入了委托。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T17:33:59.197

正是这些方法的条件性使它们变得复杂和重复。如果 Appearance 已经存在，你做一件事；如果没有，你做别的事情。所以确保外观存在：

```
public void EnsureCellAppearance(CellLocation location)
{
    if (CellAppearances.ContainsKey(location))
        return;
    CellAppearances.Add(location, new CellAppearance(_DefaultFont, _DefaultBackColor, _DefaultForeColor));
} 
```

现在您的方法要简单得多：

```
public void UpdateCellFont(int id, string colName, Font font)
{
    CellLocation location = new CellLocation(id, colName);
    EnsureCellAppearance(location);
    CellAppearances[location].Font = font;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T07:53:09.303

您可能必须使用反射将代码概括为不同类型的多个字段。不确定是否值得。

# iphone - 如何检查xml解析是否结束

> ID：12128488
> 
> 赞同：0
> 
> 时间：2012-08-26T07:50:58.710
> 
> 标签：iphone, ios, xml, asynchronous, xml-parsing

处理完 XML 数据（读取 xml 数据并插入 sqlite 读取数据......等）后，我想转到下一个视图。

如何检查是否已完成 XML 解析？

我附上我的代码。我在哪里可以检查解析是否完成？

```
-(IBAction)clickServerSync:(id)sender
{
    if ([util checkNetwork]) {                  
        [self LoadXml:@"LANG"];
        [self LoadXml:@"CATEGORY"];
        [self LoadXml:@"LIST"];
        [self LoadXml:@"FILE"];        
    }  
}

-(void)LoadXml:(NSString*)P_VAL
{    
    [indicator setHidden:NO];     
    NSString *smsURL = [NSString stringWithFormat:@"%@%@.asp", XML_URL, P_VAL];   

    NSString *sendAuthInfo = [NSString stringWithFormat:@"xx=%d" , 0 ];    
    NSString *val = [sendAuthInfo stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:smsURL]]autorelease];    
    [request setURL:[NSURL URLWithString:smsURL]];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody: [val dataUsingEncoding:NSUTF8StringEncoding]];

    [self startAsyncLoad:request tag:P_VAL];   
} 
- (void)startAsyncLoad:(NSMutableURLRequest*)request tag:(NSString*)tag {    
    CustomURLConnection *connection = [[CustomURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES tag:tag];    
    if (connection) {        
        [receivedData setObject:[[NSMutableData data] retain] forKey:connection.tag];        
    }    
}

- (NSMutableData*)dataForConnection:(CustomURLConnection*)connection {    
    NSMutableData *data = [receivedData objectForKey:connection.tag];    
    return data;
}

-(void)check_xmlParserEnd 
{  
    [indicator setHidden:YES];     
}

- (void)connection:(CustomURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

    NSMutableData *dataForConnection = [self dataForConnection:(CustomURLConnection*)connection];
    [dataForConnection setLength:0];
}

- (void)connection:(CustomURLConnection *)connection didReceiveData:(NSData *)data {

    NSMutableData *dataForConnection = [self dataForConnection:(CustomURLConnection*)connection];
    [dataForConnection appendData:data];

}

-(void)connectionDidFinishLoading:(CustomURLConnection*)connection
{   
    NSMutableData *dataForConnection = [self dataForConnection:(CustomURLConnection*)connection];
    [connection release]; 
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO; 
    NSXMLParser *xmlParser = [[[NSXMLParser alloc] initWithData:dataForConnection] autorelease];

    XMLParser *parser = [[XMLParser alloc] initXMLParser];  
    [xmlParser setDelegate:(id)parser]; 
    parser.viewDelegate = (id)self;  
    [xmlParser parse ];  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:33:25.760

`NSXMLParser`是一个*同步*解析器。一旦`[xmlParser parse]`返回，解析就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:36:44.470

由于您使用 NSXMLParser 并将委托设置为 self，因此您的类应该实现 NSXMLParserDelegate 方法，并且在所有完成后调用“--parserDidEndDocument:”。

# wxpython - wxPython：将 wx.TE_PROCESS_ENTER 放在 Masked TextCtrl 上

> ID：12128492
> 
> 赞同：1
> 
> 时间：2012-08-26T07:52:51.270
> 
> 标签：wxpython, textctrl

在谷歌上搜索，我发现`wx.TE_PROCESS_ENTER`在蒙面的TextCtrl上使用是不可能的，我自己尝试设置`style=wx.TE_PROCESS_ENTER`然后绑定它`wx.EVT_TEXT_ENTER`，但没有任何反应。我试图做的是制作许多蒙面的 TextCtrl 以便用户可以输入一些值，然后当按下输入按钮时调用一个函数来对其进行计算。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:56:49.387

我不确定为什么会吃掉那个事件，但你可以通过绑定到 EVT_KEY_DOWN 来模拟同样的事情。这是一个例子：

```
import wx
import wx.lib.masked as masked

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)

        control = ["Phone No", "(###) ###-#### x:###", "", 'F^-', "^\(\d{3}\) \d{3}-\d{4}", '','','']
        maskText = masked.TextCtrl(self, 
                                   mask = control[1],
                                   excludeChars = control[2],
                                   formatcodes  = control[3],
                                   includeChars = "",
                                   validRegex   = control[4],
                                   validRange   = control[5],
                                   choices      = control[6],
                                   choiceRequired = True,
                                   defaultValue = control[7],
                                   demo         = True,
                                   name         = control[0],
                                   style=wx.TE_PROCESS_ENTER)
        maskText.Bind(wx.EVT_KEY_DOWN, self.onEnter)

    #----------------------------------------------------------------------
    def onEnter(self, event):
        """"""
        keycode = event.GetKeyCode()
        if keycode == wx.WXK_RETURN or keycode == wx.WXK_NUMPAD_ENTER: 
            print "you pressed ENTER!"
        event.Skip()

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Masked!")
        panel = MyPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MyFrame()
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-23T20:59:43.893

按照这个例子，我能够让它工作

[https://www.programcreek.com/python/example/4695/wx.TE_PROCESS_ENTER](https://www.programcreek.com/python/example/4695/wx.TE_PROCESS_ENTER)

```
def __init__(self):
        wx.Frame.__init__(self, None,
                          pos=wx.DefaultPosition, size=wx.Size(450, 100),
                          style=wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION |
                          wx.CLOSE_BOX | wx.CLIP_CHILDREN,
                          title="BRUNO")
        panel = wx.Panel(self)

        ico = wx.Icon('boy.ico', wx.BITMAP_TYPE_ICO)
        self.SetIcon(ico)

        my_sizer = wx.BoxSizer(wx.VERTICAL)
        lbl = wx.StaticText(panel,
                            label="Bienvenido Sir. How can I help you?")
        my_sizer.Add(lbl, 0, wx.ALL, 5)
        self.txt = wx.TextCtrl(panel, style=wx.TE_PROCESS_ENTER,
                               size=(400, 30))
        self.txt.SetFocus()
        self.txt.Bind(wx.EVT_TEXT_ENTER, self.OnEnter)
        my_sizer.Add(self.txt, 0, wx.ALL, 5)
        panel.SetSizer(my_sizer)
        self.Show()
        speak.Speak('''Welcome back Sir, Broono at your service.''') 
```

这个网站还解释了如果你没有设置样式为 wx.TE_PROCESS_ENTER 就不能使用 EVT_TEXT_ENTER

[https://wxpython.org/Phoenix/docs/html/wx.TextCtrl.html](https://wxpython.org/Phoenix/docs/html/wx.TextCtrl.html)

# jquery - jQuery - 切换不会在页面重新加载时触发

> ID：12128499
> 
> 赞同：1
> 
> 时间：2012-08-26T07:54:19.347
> 
> 标签：jquery

我有这个 HTML。

```
<tr>
    <td width="75">Mon</td>
    <td class="bn_time" width="60">
        <input id="mon_open" name="mon_open" class="time" placeholder="opening time" />
    </td>
    <td class="bn_time" width="10" align="center">-</td>
    <td class="bn_time" width="100">
        <input id="mon_close" name="mon_close" class="time" placeholder="closing time" />
    </td>
    <td colspan="3" align="center" class="bn_holiday" hidden>Holiday</td>
    <td>
        <input type="checkbox" name="mon_closed" id="mon_closed" class="bn_closed" />
        <label for="mon_closed">Closed</label>
    </td>
</tr> 
```

我正在使用这个 jQuery。

```
$('.bn_closed').on('change', function() {
    var element = $(this);
    var id = element.attr('id');
    var day = id.slice(0,-7);
    var day_open = day+'_open';
    var day_close = day+'_close';
    var checked = element.is(':checked');
    var td = element.closest("td");
    td.siblings(".bn_time").toggle(!checked);
    td.siblings(".bn_holiday").toggle(checked);
}); 
```

达到以下目的。

```
if($('.bn_closed').is(':checked')) {
     //hide all <td> element with class bn_time
     //show <td> element with class bn_holiday
} else {
    //show all <td> element with class bn_time
    //hide <td> element with class bn_holiday
} 
```

这适用于更改事件，`.bn_closed`但是当重新加载页面并且`.bn_closed`检查带有类的元素时。切换不生效。我想要的是在页面重新加载的情况下也应该进行切换。我该怎么办？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:56:56.030

尝试这个：

```
$('.bn_closed').on('change', function() {
    // ...
}).change() 
```

# jquery - 通过 jQuery 创建一个自杀 iFrame

> ID：12128500
> 
> 赞同：0
> 
> 时间：2012-08-26T07:55:01.600
> 
> 标签：jquery, iframe

我喜欢通过 jQuery 为一个 url 创建一个 iframe，并在 N 秒后自我杀死（删除、删除）iframe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:57:22.520

您可以[`window.setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)在给定的秒数后使用将其删除。

```
$(function () {
    $('<iframe id="myFrame" name="myFrame" src="myUrl">').appendTo('body');

    // Remove it after 20 seconds
    setTimeout(function () {
       $("#myFrame").remove();
    }, 20000);
}); 
```

# mysql - 计算任何数据库表中行数的最快方法？

> ID：12128501
> 
> 赞同：0
> 
> 时间：2012-08-26T07:55:21.097
> 
> 标签：mysql, database, sql-server-2008, oracle11g

我们假设没有为表 T 定义主键。在这种情况下，如何快速/有效地为这些数据库（Oracle 11g、MySql、Mssql）计算 T 中的所有行？

似乎 count(*) 和 count(column_name) 分别可能很慢且不准确。以下似乎是最快和最可靠的方法 -

```
select count(rowid) from MySchema.TableInMySchema; 
```

你能告诉我上面的说法是否也有任何不足之处吗？如果它很好，那么我们是否对 mysql 和 mssql 有类似的语句？

提前致谢。

来源 - [http://www.thewellroundedgeek.com/2007/09/most-people-use-oracle-count-function.html](http://www.thewellroundedgeek.com/2007/09/most-people-use-oracle-count-function.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:03:11.023

`count(column_name)`并非***不***准确，它只是与 count(*) 完全不同的东西。

SQL 标准定义`count(column_name)`为等效于`count(*) where column_name IS NOT NULL`. 如果 column_name 可以为空，结果必然会有所不同。

在 Oracle（可能还有其他 DBMS）中，`count(*)`将使用非空列上的可用索引来计算行数（例如 PK 索引）。所以它会一样快

此外，没有什么类似于 SQL Server 或 MySQL 中的 rowid （在 PostgreSQL 中应该是`ctid`）。

使用`count(*)`. 这是获取行数的最佳选择。如果有足够的索引可用，则让 DBMS 在后台进行任何优化。

**编辑**

关于 Oracle 如何自动使用索引（如果可用）以及如何减少数据库完成的工作量的快速演示：

测试台的设置：

```
create table foo (id integer not null, c1 varchar(2000), c2 varchar(2000));
insert into foo (id, c1, c2)
select lvl, c1, c1 from 
(
  select level as lvl, dbms_random.string('A', 2000) as c1
  from dual 
  connect by level < 10000
); 
```

这会生成 10000 行，每行填充一些空间，以确保表具有实际大小。

现在在 SQL*Plus 中，我运行以下命令：

```
SQL> set autotrace traceonly 解释统计；
SQL> 从 foo 中选择 count(*)；

执行计划
-------------------------------------------------- --------
计划哈希值：1342139204

-------------------------------------------------- -----------------
| 身份证 | 操作 | 姓名 | 行 | 成本 (%CPU)| 时间 |
-------------------------------------------------- -----------------
| 0 | 选择声明 | | 1 | 2740 (1)| 00:00:33 |
| 1 | 排序聚合 | | 1 | | |
| 2 | 表访问已满| 福 | 9999 | 2740 (1)| 00:00:33 |
-------------------------------------------------- -----------------

统计数据
-------------------------------------------------- --------
        181 次递归调用
          0 db 块获取
      10130 一致获得
          0 次物理读取
          0 重做大小
        通过 SQL*Net 向客户端发送 430 字节
        通过 SQL*Net 从客户端收到 420 字节
          2 次 SQL*Net 往返客户端
          5种（记忆）
          0 种（磁盘）
          已处理 1 行

SQL>

```

如您所见，对需要 10130 次“IO 操作”的表进行全表扫描（我知道这不是正确的术语，但为了演示，对于从未见过的人来说，这应该是一个足够好的解释前）

现在我在该列上创建一个索引并再次运行 count(*)：

```
SQL> 在 foo (id) 上创建索引 i1；

已创建索引。

SQL> 从 foo 中选择 count(*)；

执行计划
-------------------------------------------------- --------
计划哈希值：129980005

-------------------------------------------------- --------------------
| 身份证 | 操作 | 姓名 | 行 | 成本 (%CPU)| 时间 |
-------------------------------------------------- --------------------
| 0 | 选择声明 | | 1 | 7 (0)| 00:00:01 |
| 1 | 排序聚合 | | 1 | | |
| 2 | 索引快速全扫描| I1 | 9999 | 7 (0)| 00:00:01 |
-------------------------------------------------- --------------------

统计数据
-------------------------------------------------- --------
          1 递归调用
          0 db 块获取
         27连胜
         21 次物理读取
          0 重做大小
        通过 SQL*Net 向客户端发送 430 字节
        通过 SQL*Net 从客户端收到 420 字节
          2 次 SQL*Net 往返客户端
          0 种（内存）
          0 种（磁盘）
          已处理 1 行

SQL>

```

正如您所看到的，Oracle 确实使用了 (not null!) 列上的索引，并且 IO 的数量急剧下降（从 10130 到 27 - 这不是我所说的“*非常低效*”）。

“物理读取”源于索引刚刚创建且尚未在缓存中的事实。

我希望其他 DBMS 应用相同的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T07:59:32.287

在 Oracle 中，`COUNT(*)`效率最高。实际上，`COUNT(rowid)`、`COUNT(1)`或`COUNT('fuzzy bunny')`可能同样有效。但是如果有区别，`COUNT(*)`效率会更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T07:59:07.050

我*曾经*使用`SELECT COUNT(1) FROM anything;`, 而不是星号...

有些人认为，mysql 使用星号来调用查询优化器，并在使用“1”作为静态标量时忽略任何优化......

恕我直言，这是直截了当的，因为您不使用任何变量，而且很明显，您只计算所有行。

# iphone - 即使 userInteractionEnabled 设置为 NO，UITextField 也会显示光标

> ID：12128509
> 
> 赞同：1
> 
> 时间：2012-08-26T07:56:50.187
> 
> 标签：iphone, ios, ipad, uitextfield

我有一个 UITextField，它必须闪烁光标，即使它的 userInteractionEnabled 属性设置为 NO。我不希望 UITextField 成为FirstResponder 并显示键盘。

现在你可能会问：

**1.如果要隐藏键盘，为什么要显示光标？**

A：问题是我需要向用户显示正在编辑的 UITextField，使用不同的/自定义键盘。

**2\. 那么为什么不使用 inputView 属性呢？**

A：因为 inputView 中的键盘是从底部向上出现的，我希望我的自定义键盘位于屏幕中央。

那么让我们来看看真正的问题：

**如何显示光标？有什么我可以设置的属性吗？如果没有，我将如何绘制光标？制作一个使用 alpha 添加和删除的 UIView，或者继承 UITextField 并覆盖 drawInRect？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:43:24.947

您可以添加一个带有重复动画的小型 UIView，该动画将 alpha 设置为 0 和 1 来回使用`animateWithDuration:delay:options:animations:completion:`.

```
[UIView animateWithDuration:1 
                      delay:0 
                    options:UIViewAnimationOptionRepeat 
                 animations:^{ [cursorView setAlpha:0]; }
                 completion:^(BOOL animated){ [cursorView setAlpha:1]; } ]; 
```

要将视图正确定位为文本字段的子视图，在输入的文本前面，可以使用`NSString`方法`sizewithfont:forWidth:lineBreakMode:`

# ruby-on-rails - ActiveAdmin 和 has_many 关系

> ID：12128510
> 
> 赞同：0
> 
> 时间：2012-08-26T07:56:53.137
> 
> 标签：ruby-on-rails, activeadmin

有 2 个模型客户和订单。客户有_许多订单。是否可以让订单显示为客户的成员。网址示例：

本地主机：3000/admin/customers/1/orders

此 url 将显示由客户 1 过滤的订单模型索引页面。

这可以通过使用自定义操作来实现，但我需要订单索引页面中的“批量操作”功能。table_for 没有创建“批量操作”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:06:30.350

是的，嵌套路由。

路线.rb

```
resources :customers do
  resources :orders
end 
```

客户.rb

```
accepts_nested_attributes_for :orders 
```

订单控制器.rb

```
def index
  @customer = Customer.find(params[:customer_id])
  @orders = @customer.orders.all
end 
```

路线（没有任何管理员命名空间）将类似于`customer_orders_path(customer)`.

我以前没有使用过 ActiveAdmin，所以默认情况下，您可能会从该 gem 中对您的 routes.rb 进行一些范围界定。

# android - 如何从 github 将 java/android 包安装到我的 android 设备上？

> ID：12128518
> 
> 赞同：0
> 
> 时间：2012-08-26T07:57:44.547
> 
> 标签：android, github, arabic

我不是安卓开发者，对它一无所知，如果这是一个愚蠢的问题，请原谅我。基本上，我遇到了一个 android 包，它应该支持在 android 设备上正确显示阿拉伯字母。这是链接：[https ://github.com/aawish/Better-Arabic-Reshaper](https://github.com/agawish/Better-Arabic-Reshaper)

现在，我看到的只有两个可以下载的 java 文件。但是我应该如何安装这个包呢？我需要对我的 android 设备进行 root 访问吗？是否有我需要将它们放入的目录？自述文件中没有教程或指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:49:00.807

> 但是我应该如何安装这个包呢？

第 1 步：学习 Android 开发。

第 2 步：创建一个 Android 应用程序。

步骤#3：联系该代码的作者以获得它的许可证，因为它不是开源的。

第 4 步：将代码添加到您的应用程序中，并使用它来修复您的应用程序中的阿拉伯语行为。请注意，这在较新的设备上可能不需要，并且实际上可能在较新的设备上存在问题，因为双向文本处理发生了变化。

> 我需要对我的 android 设备进行 root 访问吗？

我对此表示怀疑。

> 是否有我需要将它们放入的目录？

`src/`在您的开发机器上的 Android 应用程序项目中的某个位置。

此代码不是 Android 应用程序，也不是为了对整个设备执行任何操作而设计的。

# algorithm - 检测偶数周期的图算法

> ID：12128529
> 
> 赞同：5
> 
> 时间：2012-08-26T07:59:42.557
> 
> 标签：algorithm, graph, graph-theory

我有一个无向图。该图中的一条边是特殊的。我想找到属于包含第一条边的偶数循环的所有其他边。

我不需要列举所有的周期，我认为这本质上是 NP。我只需要知道，对于每条边，它是否满足上述条件。

蛮力搜索当然可以，但是太慢了，我正在努力想出更好的方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:47:43.267

我想我们有一个答案（我必须把这个想法归功于我的同事）。本质上，他的想法是通过偶数周期的空间进行洪水填充算法。这是有效的，因为如果您通过合并两个较小的循环形成一个大的偶数循环，那么较小的循环必须都是偶数或都是奇数。类似地，合并一个奇数和偶数循环总是形成一个更大的奇数循环。

这是一个实用的选择，只是因为我可以想象由偶数和奇数交替循环组成的病理病例。在这种情况下，我们永远不会找到两个相邻的偶数循环，因此算法会很慢。但我相信这种情况不会出现在真正的化学中。至少在目前已知的化学领域，30 年前我们从未听说过富勒烯。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T23:53:38.003

如果您的图的节点度数较小，您可以考虑使用不同的图表示：

设三个原子`u,v,w`和两个化学键`e=(u,v)`和`k=(v,w)`。表示此类数据的典型方式是在图中存储`u,v,w`为节点和`e,k`边。

但是，可以将`e`和表示`k`为图中的节点，具有像`f=(e,k)`where`f`表示从`u`到`w`或的 2 步链接`f=(e,k)`的边`f=(u,v,w)`。运行任何算法以在此类图上查找循环将返回原始图上的所有偶数循环。

当然，这只有在原始图的节点度数较小时才有效。当用户执行编辑时，您可以轻松地相应地编辑替代表示。

# eclipse - 如何转到 Eclipse 中的特定文件夹？

> ID：12128532
> 
> 赞同：5
> 
> 时间：2012-08-26T08:00:04.263
> 
> 标签：eclipse

从Eclipse，如何去特定的文件夹？我的意思是在windows中，如何打开文件夹对应的命令行或者直接打开文件资源管理器打开对应的文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T08:11:18.473

您必须使用位置`${env_var:SystemRoot}\explorer.exe`（或 cmd.exe）和参数创建一个外部工具`/select,${resource_loc}`。现在可以在 Windows 资源管理器中显示任何选定的文件或目录。

## 创建外部工具

进入外部工具配置（您可以在相应的工具栏图标中找到它）：

![在此处输入图像描述](../Images/2f9dede5fc3644844a82ecfa2ac3bfb5.png)

然后您可以创建自己的外部工具：

![外部工具创建](../Images/218129fd8635bc620d2ee1095695c222.png)

1.  创建一个新程序（在树中选择程序）
2.  将其命名为外壳
3.  将位置设置为`${env_var:SystemRoot}\explorer.exe`
4.  将参数设置为`/select,${resource_loc}`
5.  运行外部工具

创建后，您可以从上下文菜单或工具栏运行外部工具...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T20:27:48.867

一段时间以来，我一直在使用一个名为**[PathTools](http://code.google.com/p/pathtools/)**的 Eclipse 插件，对此我很满意。

它向 Eclipse 工具栏添加了许多按钮，允许您：

1.  直接在选中的文件夹打开一个cmd提示符。
2.  打开所选文件夹的资源管理器窗口。

更新站点： http: [//pathtools.googlecode.com/svn/trunk/PathToolsUpdateSite/site.xml](http://pathtools.googlecode.com/svn/trunk/PathToolsUpdateSite/site.xml)

## 示例屏幕截图

### 安装“路径工具功能”

我选择只安装`Path Tools Feature`
![在此处输入图像描述](../Images/01f5f5db6af6939fb631e85b0fa27722.png)

### 打开终端

直接在文件夹路径打开终端：（ ![在此处输入图像描述](../Images/6410a1eec072a6d5ea1b4f5fe0b376fe.png)
上面的快照适用于 OSX，但也适用于 Windows）

### 打开资源管理器

直接在 Explorer/Finder 中打开文件夹： ![在此处输入图像描述](../Images/718f736e1e210992e564ccb74bbfa3ed.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T20:34:25.997

非常简单的插件： [http ://basti1302.github.com/startexplorer/](http://basti1302.github.com/startexplorer/)

![在此处输入图像描述](../Images/eaf02aaef92af68df36ccdd5e42e25e9.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-08T09:07:30.813

2019 年更新（无需插件）：

在 Project Explorer 中右键单击所需的文件夹，转到 Show In，选择 Terminal 或 System Explorer。见下面的截图：

[![菜单截图](../Images/1d3f358ad7ab120328dd102723aaf1fd.png)](https://i.stack.imgur.com/dIMwQ.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T08:03:11.447

右键单击文件（在左窗格中）.. 然后使用 Win Goodies -> 在资源管理器中打开文件

# asp.net - 在 iis 6 和 asp.net mvc 3 中找不到默认角色提供程序

> ID：12128533
> 
> 赞同：1
> 
> 时间：2012-08-26T08:01:19.403
> 
> 标签：asp.net, asp.net-mvc-3, iis-6

我正在 ii6 上启动 asp.net mvc 3 应用程序。不使用成员资格或角色提供者。我通过手动创建授权cookie来实现授权，并在global.asax中处理它。首先 a 有这个错误：

访问被拒绝创建 App_Data 子目录 说明：出于安全原因，身份“IIS APPPOOL\ASP.NET v4.0”（此 Web 应用程序在其下运行）无权在应用程序根目录中创建 App_Data 子目录。ASP.NET 将用于服务（例如 Membership 和 Profile）的 Microsoft SQL Express 数据库文件存储在应用程序的 App_Data 子目录中。

我正在搜索此错误，并将其添加到我的 web.config 文件中，作为解决方案：在`<system.web>`节点中： `<roleManager enabled="false"> <providers> <clear /> </providers> </roleManager>`

在`<modules>`节点中`<system.webServer>`： `<remove name="RoleManager" />`

然后得到“找不到默认角色提供者”错误。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:48:15.767

解决了。IIS6 不识别`<system.webServer>`（在 IIS7 中引入），我改用`<httpModules>`了`<system.web>`：

```
<system.web>
...
<httpModules>
<remove name="RoleManager" />
</httpModules>
...
<system.web> 
```

# sqlite - 如何设计用于多条件查询的数据库（sqlite）？

> ID：12128537
> 
> 赞同：0
> 
> 时间：2012-08-26T08:01:56.137
> 
> 标签：sqlite, database-design

假设 1000,000 条记录排列为：

```
c1_v1 c2_v1 c3_v1 d1
c1_v1 c2_v1 c3_v2 d2
c1_v1 c2_v1 c3_v3 d3
...
c1_v1 c2_v2 c3_v1 d999
c1_v1 c2_v2 c3_v2 d1000
...
c1_v999 c2_v999 c3_v998 d999999
c1_v999 c2_v999 c3_v999 d1000000 
```

假设我们需要三个条件（c1_vx, c2_vx, c3_vx）来查询结果（dx），但是不同记录中的单个条件如c1_v1可能相同。记录的另一种样式：

```
c1_v1
    c2_v1
        c3_v1 : d1
        c3_v2 : d2
        c3_v3 : d3
        ...
    c2_v2
        c3_v1 : d999
        c3_v2 : d1000
    ...
c1_v999
    c2_v999
        c3_v998: d999999
        c3_v1000: d1000000 
```

如何设计用于最快查询的表？（只是查询，不关心插入/更新/删除）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:11:05.037

> 一个典型的查询操作就像 select d from t_table where c1 = 'UA1000_2048X32_MCSYN' and c2 = '1.234' and c3 = '2.345';

好吧，那么您只需要在`{c1, c2, c3}`.

理想情况下，您还会对表进行[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)，因此检索`d`只涉及没有表堆访问的索引查找，但我认为 SQLite 不支持集群。或者，考虑创建一个[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)索引`{c1, c2, c3, d}`。

* * *

> c1 是一个类似于 UA1000_2048X32_MCSYN 的字符串，c2 和 c3 是一个实数（双）

我不会尝试在查询中将数字与字符串等同起来——一些 DBMS 在这些情况下不能使用索引，SQLite 可能就是其中之一。相反，只需以最自然的方式编写查询，不要在数字文字周围加上单引号：

```
select d from t_table
where c1 = 'UA1000_2048X32_MCSYN' and c2 = 1.234 and c3 = 2.345; 
```

# android - Android 异步任务与原生 Java 线程

> ID：12128538
> 
> 赞同：1
> 
> 时间：2012-08-26T08:02:02.130
> 
> 标签：android

> **可能重复：**
> [处理程序 vs AsyncTask vs 线程](https://stackoverflow.com/questions/6964011/handler-vs-asynctask-vs-thread)

我是 android 新手，正在开发我的第一个应用程序...

哪种线程更好地创建与 UI 线程分开的进程？

AsyncTask 或使用 Handler 和 Message 扩展 Thread 类？

我已经通过了这个线程.. [在处理程序消息中放置一个对象](https://stackoverflow.com/questions/3004579/put-an-object-in-handler-message/6514779#6514779)

该人告诉说，“哦，我正在放弃使用 AsyncTask 对象，因为我认为它们增加了太多的代码耦合。”。

代码耦合是什么意思？我应该使用带有 Handler 和 Message 类的 Java 线程还是应该使用 Async 任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:41:59.550

由于这将是您的第一个应用程序，因此最好将这个问题搁置一段时间。相反，您希望让您的应用程序无论如何都能正常工作。这样做您将获得足够的经验来自己决定。

话虽如此`AsyncTask`，如果您需要在后台做某事并在 UI 中显示进度和结果，这似乎更容易使用。

这两种方法的一个真正问题是，当您旋转设备时，您的 UI 会重新创建。如果您在线程/异步任务中存储对旧 UI 的引用并在您的应用程序中使用它们，则会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:28:21.673

AsyncTask 在后台使用 Java 的本机线程。使用它们的好处是您可以获得 3 种方法 - onPreExecute、doInBackground 和 onPostExecute，它们让您的生活更轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T10:20:34.900

AsyncTask 是一个很好的抽象，用于需要在工作线程上完成的明确定义的任务（以避免阻塞主线程），同时报告进度并将结果发布到 UI。此类任务的示例是：从 Internet 下载文件、调用 Web 服务、查询数据库等。它维护一个池和一个工作线程来运行这些任务。使用 AsyncTask 使您不必编写代码来创建和管理线程以及将 UI 更新分派到 UI 线程。

当后台任务是一个正在进行的进程而不是一个定义明确的任务时，AsyncTask 是不合适的。示例：播放音乐、连续跟踪位置、连续下载新闻提要等。在这种情况下，创建和管理单独的线程是合适的。

# jquery - Ajax 哈希问题

> ID：12128542
> 
> 赞同：1
> 
> 时间：2012-08-26T08:02:28.637
> 
> 标签：jquery, ajax

我正在使用 Lamp 服务器和 Laravel php 框架。我的问题是，我无法正确实现 Ajax。它似乎有效，div#content 以我想要的方式改变，但地址看起来很相似：

```
~ytsejam/wlog/public/#http://localhos./~ytsejam/wlog/public/index.php/a 
```

在萤火虫控制台我得到这个错误：

```
Error: Syntax error, unrecognized expression: [hash=#http:/~ytsejam/wlog/public/index.php/a]
[Break On This Error]   
...{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAt...
jquery.min.js (line 3) 
```

这是我的 ajax 代码：

```
$(document).ready(function() {  

    // Check for hash value in URL  
    var hash = window.location.hash.substr(1);  
    var href = $('#sidebar-content ul li a').each(function(){  
        var href = $(this).attr('href');  
        if(hash==href.substr(0,href.length-5)){  
            var toLoad = hash+'.html #content';  
            $('#page').load(toLoad)  
        }   
    });  

    $('#sidebar-content ul li a').click(function(){  

    var toLoad = $(this).attr('href')+' #content';  
    $('#content').hide('fast',loadContent);  
    $('#load').remove();  
    $('#wrapper').append('<span id="load">LOADING...</span>');  
    $('#load').fadeIn('normal');  
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);  
    function loadContent() {  
        $('#page').load(toLoad,'',showNewContent())  
    }  
    function showNewContent() {  
        $('#page').show('normal',hideLoader());  
    }  
    function hideLoader() {  
        $('#load').fadeOut('normal');  
    }  
    return false;  

    });  
}); 
```

我该如何解决这个哈希问题？

# android - Android StrictMode 线程策略显示错误

> ID：12128544
> 
> 赞同：2
> 
> 时间：2012-08-26T08:02:36.573
> 
> 标签：android

实际上我正在尝试编写一个具有`minSDKversion:8`并且`targetSDKversion:15`我需要使用的应用程序

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

但它的显示错误

> StrictMode 无法解析为类型

我正在使用 2.2 SDK 来编译我的应用程序

已解决：我们至少需要 2.3 才能导入 StrictMode

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:12:56.963

所以重新发布答案：

“StrictMode 从 2.3 开始可用，因此您不能在 2.2 中使用它”

**归功于 Luksprog**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T10:00:27.683

试试这个...

```
if (Build.VERSION.SDK_INT > Build.VERSION_CODES.GINGERBREAD) {
                StrictMode.ThreadPolicy tp = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                StrictMode.setThreadPolicy(tp);
            } 
```

# linux - 设备驱动程序 IOCTL 传递 int

> ID：12128546
> 
> 赞同：1
> 
> 时间：2012-08-26T08:03:10.770
> 
> 标签：linux, linux-kernel, linux-device-driver, ioctl

我已经编写了一个设备驱动程序，需要将一个 int 值传递给它。为此，我正在使用 copy_from_user() 。这是我到目前为止所做的，

```
#define MY_MAGIC 'G'
#define TEST_IOCTL _IO(MY_MAGIC, 0)
#define PASS_STRUCT_ARRAY_SIZE _IOW(MY_MAGIC, 1, int )
#define TEST_IOCTL_ONE _IO(MY_MAGIC, 2)

int major;

int device_ioctl(struct inode *inode, struct file *filep, unsigned int cmd, unsigned long arg){

int ret, SIZE;

switch(cmd){

    case TEST_IOCTL:
        printk("NO argument IOCTL called\n");
        break;

    case PASS_STRUCT_ARRAY_SIZE:
            printk("Inside PASS_STRUCT_ARRAY_SIZE\n");
        ret = copy_from_user(SIZE, arg, sizeof(int));
        if(ret < 0){
            printk("Error in PASS_STRUCT_ARRAY_SIZE\n");
            return -1;  
        }
        printk("Struct Array Size : %d\n",SIZE);
        break;

    case TEST_IOCTL_ONE:
        printk("NO argument IOCTL_ONE called\n");
        break;

    default :
        return -ENOTTY;
}

return 0;

} 
```

当我调用`TEST_IOCTL`&`TEST_IOCTL_ONE`时，模块工作正常。但是，当我调用`PASS_STRUCT_ARRAY_SIZE`系统冻结。

用户空间代码是这样的，

```
if(ioctl(fd, PASS_STRUCT_ARRAY_SIZE, 10) < 0){
    perror("PASS_STRUCT_ARRAY_SIZE : ");
        return -1;
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:05:25.403

对不起，我之前的回答是错误的。由于参数是一个整数，你应该只使用它而不使用`copy_from_user`：

```
SIZE = arg; 
```

`copy_from_user`仅当参数是指针时才需要。

# iphone - 连续的模态视图控制器在dismissModalViewControllerAnimated 上使应用程序崩溃

> ID：12128548
> 
> 赞同：0
> 
> 时间：2012-08-26T08:03:25.343
> 
> 标签：iphone, ipad, ios5, uiviewcontroller, ios

从根视图控制器中，我显示了一个模态视图控制器（FormSheet），它看起来像一些用户操作的弹出窗口，单击模态视图控制器顶部的按钮（第一个）打开另一个模态视图控制器（第二个 FormSheet）。这看起来也像一个弹出窗口。第二个模态视图控制器有一个关闭按钮，并且内部事件是在第二个模态视图控制器类中编写的。当关闭按钮事件处理程序时，我调用 [self dismissModalViewControllerAnimated:YES] 来关闭第二个模态视图控制器。但此时应用程序崩溃了。（注意：我使用故事板创建 UI 和关闭 ARC 的过渡）。请告诉我我做错了什么！

> 我收到的错误消息是 [myFirstPoppViewController topViewController]: unrecognized selector sent to instance 0x6895410

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:37:28.713

这是一个糟糕的设计。如果您正在寻找创建视图层次结构，那么我建议您考虑使用[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

这样做将允许您使用为您处理的后退按钮和转换来浏览层和视图层。

# javascript - 在 jQuery 中链接时 CSS 属性不起作用

> ID：12128550
> 
> 赞同：0
> 
> 时间：2012-08-26T08:03:36.463
> 
> 标签：javascript, jquery, css

这是 jQuery 代码：

```
$("#web").hover(
  function () {
    $(this).css({
             'background-color': '#ecf5fb',
             'cursor': 'pointer',
             'border': '1px solid #378ac4'
           })
           .children("a").children("img").attr("src", "1.png")
           .end().children("p").css("opacity", "1.0");

           $('#commentweb').stop(true, true).fadeIn();
  }, 
  function () {
    $(this).css({
             'background-color': '#e8e3e3',
             'border': '1px solid grey'
             })
             .children("a").children("img").attr("src", "2.png")
             .end().children("p").css("opacity", "0.5");

             $('#commentweb').stop(true, true).fadeOut();
  }
); 
```

问题是不透明度没有改变，而其他一切都正常。但是如果我写的不是这段代码

```
$(this).css({
         'background-color': '#ecf5fb',
     'cursor': 'pointer',
     'border': '1px solid #378ac4'
       })
       .children("a").children("img").attr("src", "1.png");
$(this).children("p").css("opacity", "1.0"); 
```

有用。为什么会这样？

这是小提琴：http: [//jsfiddle.net/mMB3F/6/](http://jsfiddle.net/mMB3F/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:18:08.687

如果你想回到原来的选择，你必须调用[`.end()`](http://api.jquery.com/end/)两次，因为你在链上调用了两次子项。

```
$("#web").hover(
  function () {
    $(this).css({
             'background-color': '#ecf5fb',
             'cursor': 'pointer',
             'border': '1px solid #378ac4'
           })
           .children("a").children("img").attr("src", "1.png")
           .end().end().children("p").css("opacity", "1.0");

           $('#commentweb').stop(true, true).fadeIn();
  }, 
  function () {
    $(this).css({
             'background-color': '#e8e3e3',
             'border': '1px solid grey'
             })
             .children("a").children("img").attr("src", "2.png")
             .end().end().children("p").css("opacity", "0.5");

             $('#commentweb').stop(true, true).fadeOut();
  }
); 
```

[http://jsfiddle.net/mMB3F/8/](http://jsfiddle.net/mMB3F/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:18:00.997

如果要返回原始 jquery 对象，则需要在其中添加一个额外的 .end() - 每个过滤操作都将一个新的 jquery 对象放在堆栈上 - 每次调用 .end() “弹出”最后一个离开堆栈。这是一个更新的小提琴：http: [//jsfiddle.net/mMB3F/7/](http://jsfiddle.net/mMB3F/7/)

# c# - 如何将两个 LINQ 表达式中的 .Select 组合为一个？

> ID：12128551
> 
> 赞同：3
> 
> 时间：2012-08-26T08:04:09.297
> 
> 标签：c#, linq

我有以下代码片段。

```
protected IEnumerable<string> GetErrorsFromModelState()
{
    var errors =  ModelState.SelectMany(x => x.Value.Errors
            .Select(error => error.ErrorMessage));
    return errors;
}

protected IEnumerable<string> GetErrorsFromModelState()
{
    var exceptions = ModelState.SelectMany(x => x.Value.Errors
            .Select(error => error.Exception));
    return exceptions;
} 
```

有没有办法可以将这两者结合起来，以便 GetErrorsFromModelState 将返回所有 ErrorMessage 和 Exception 值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T08:16:49.437

你可以使用`Union`

```
protected IEnumerable<string> GetErrorsFromModelState()
{
    var exceptions = ModelState.SelectMany(x => x.Value.Errors
        .Select(error => error.Exception));

    var errors =  ModelState.SelectMany(x => x.Value.Errors
        .Select(error => error.ErrorMessage));

    return exceptions.Union(errors);
} 
```

或者您可以将它们选择到一个集合中

```
protected IEnumerable<string> GetErrorsFromModelState()
{
    var items = ModelState.SelectMany(x => x.Value.Errors
        .SelectMany(error => 
                          {
                              var e = new List<string>();
                              e.Add(error.Exception);
                              e.Add(error.ErrorString);
                              return e;
                          }));

    return items;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T08:09:08.740

当然 - 使用[Enumerable.Union](http://msdn.microsoft.com/en-us/library/bb386993.aspx)扩展方法

```
protected IEnumerable<string> GetErrorsAndExceptionsFromModelState()
{
    var errors = ModelState
                    .SelectMany(x => x.Value.Errors.Select(error => error.ErrorMessage)
                    .Union(x.Value.Errors.Select(error => error.Exception.Message)));
    return errors;
} 
```

# java - Guice 在多线程应用程序中注入 EntityManager

> ID：12128552
> 
> 赞同：2
> 
> 时间：2012-08-26T08:04:36.733
> 
> 标签：java, jpa, guice

我正在使用 Java SE 7 开发桌面应用程序。该应用程序使用多个线程，并在创建的每个线程中注入一个 DAO 类以访问我的数据库。作为持久层，我使用的是 EclipseLink 和 JPA。EntityManager 使用构造函数注入注入到我的 DAO 类中，并且由于它不是线程安全的，因此我采用了这样的 Provder 方法：

```
public PluginInstanceJpaController implements IPluginInstanceDao {

    private EntityManager em;

    @Injected
    public PluginInstanceJpaController(Provider<EntityManager> emp) {
        this.em = emp.get();
    }

    @Transactional 
    public void create(PluginInstance foo) throws Exception {
        em.persist(foo);
    }
} 
```

但是，相同的 EntityManager 实例被注入到每个 DAO 中。为了进行设置，我使用了 guice 提供的 JpaPersistModule，我确信到目前为止我的设置中没有单例。

有谁知道在注入时如何告诉 guice 创建 EntityManager 的新实例？

在另一种方法中，我尝试了 EntityManagerFactory 和 EntityManager 的自定义提供程序，并将 JpaPersistModule 排除在我的业务之外。这导致每个 DAO 都有一个 EntityManager 实例，但是 @Transactional 注释的方法没有被拦截。

我很感激这个问题的任何解决方案。到目前为止感谢！

- - 编辑 - -

DAO 类被注入到使用它们的 Runnable 中。Runnable 也通过 Provider 提供。我的模块配置如下所示：

```
public class RepositoryModule extends AbstractModule {

    @Override
    protected void configure() {

        // DAO bindings
        bind(IObjectStoreDao.class).to(ObjectStoreJpaController.class);
        bind(IPluginInstanceDao.class).to(PluginInstanceJpaController.class);
    }

    @Provides
    public PluginMonitor newMonitor(IPluginInstanceDao plugDao, IObjectStoreDao osDao) {
        PluginMonitor m = new PluginMonitor();
        m.setPluginInstanceDao(plugDao);
        m.setObjectStoreDao(osDao);
        return m;
    }
} 
```

这里 PluginMonitor 是我的 Runnable。注射器本身是在我的主线程中创建的......这可能是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T10:32:16.357

这是一个非常相似的问题：[Guice 如何将单例和非单例注入到多个线程中](https://stackoverflow.com/questions/14778380/how-guice-injects-singletons-and-non-singletons-into-multiple-threads/17880701#17880701)

对于您的 DAO，这应该有效。

```
public PluginInstanceJpaController implements IPluginInstanceDao {

    private Provider<EntityManager> emProvider;

    @Injected
    public PluginInstanceJpaController(Provider<EntityManager> emp) {
        this.em = emp;
    }

    @Transactional 
    public void create(PluginInstance foo) throws Exception {
        em.get().persist(foo);
    }
} 
```

您应该使用[Jpa 持久性模块](http://code.google.com/p/google-guice/wiki/JPA)或创建自定义 EntityManager 提供程序，它将为每个 get() 调用返回新的 EntityManager，也可以使用 ThreadLocal 实现以确保 EntityManager 将在线程之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:10:27.233

我不熟悉JPA，但希望我仍然可以提供帮助:-)

如果您查看[EntityManagerProvider 的源代码](http://google-guice.googlecode.com/svn-history/r1225/trunk/extensions/persist/src/com/google/inject/persist/jpa/EntityManagerProvider.java)，您会看到有一个`ThreadLocal<EntityManager>`. 所以默认情况下，每个线程都应该有自己的`EntityManager`. 这让我相信问题出在其他地方。您确定没有模块将其设置`EntityManager`为单例吗？您如何确定所有`EntityManager`s 都是同一个对象？每个 DAO 肯定都在自己的线程上？您能否提供有关如何在模块中配置 FooDao 以及如何为每个线程提供新 FooDao 的详细信息？

此外，您应该可以将构造函数编写为：

```
@Inject
public FooDao(EntityManager emp) {
    this.em = emp;
} 
```

Guice 将为您确定`EntityManagerProvider`提供`EntityManager`实例的魔力，并将调用`get()`该`EntityManagerProvider`实例以获取一个`EntityManager`以提供给您的构造函数。

# java - 基于列对行进行排序

> ID：12128553
> 
> 赞同：0
> 
> 时间：2012-08-26T08:04:48.623
> 
> 标签：java, sorting

有什么方法可以根据列进行排序吗？

我有这样的线条，

```
1000 Australia     Kangaroo            Canberra
1002 India         Tiger               Delhi
1092 Germany       Eagle               Berlin 
```

以上行必须根据第二列进行排序，即澳大利亚、德国、印度。

所以，结果应该是，

```
1000 Australia     Kangaroo            Canberra
1092 Germany       Eagle               Berlin   
1002 India         Tiger               Delhi 
```

数据来自文本文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:31:26.550

我建议使用 a`TreeSet`并阅读您的文本文件，并将您的数据保存在实现`Comparable`. 这样，当您添加数据时`TreeSet`，数据将以排序顺序添加。

此示例可能会有所帮助：

```
class Data implements Comparable<Data>{

    private int digits;
    private String country;
    private String animal;
    private String capital;

    public Data(int digits, String country, String animal, String capital){
        this.digits = digits;
        this.country = country;
        this.animal = animal;
        this.capital = capital;
    }

    public int getDigits() {
        return digits;
    }

    public void setDigits(int digits) {
        this.digits = digits;
    }

    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

    public String getAnimal() {
        return animal;
    }

    public void setAnimal(String animal) {
        this.animal = animal;
    }

    public String getCapital() {
        return capital;
    }

    public void setCapital(String capital) {
        this.capital = capital;
    }

    @Override
    public int compareTo(Data data) {
        return getCountry().compareTo(data.getCountry());
    }
}

class TestCountry{
    public static void main(String[] args) {
        TreeSet<Data> set = new TreeSet<Data>();
        /** 
         * Assuming that you can read the CSV file and build up the Data objects.
         * You would then put them in the set where they will be added in a sorted
         * fashion 
         */
        set.add(new Data(1000, "Australia", "Kangaroo", "Canberra"));
        set.add(new Data(1002, "India", "Tiger", "Delhi"));
        set.add(new Data(1092, "Germany", "Eagle", "Berlin"));

        for(Data data: set){
            System.out.println(data.getDigits()+"\t"+data.getCountry()+"\t"+data.getAnimal()+"\t"+data.getCapital());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:05:24.507

您可以将数据构建为此模型

**Row Class**表示行数据

```
public class Row implements Comparable<Row> {

private int number;
private String country;
private String animal;
private String city;

public Row(int number, String country, String animal, String city) {
    super();
    this.number = number;
    this.country = country;
    this.animal = animal;
    this.city = city;
}

public int getNumber() {
    return number;
}

public void setNumber(int number) {
    this.number = number;
}

public String getCountry() {
    return country;
}

public void setCountry(String country) {
    this.country = country;
}

public String getAnimal() {
    return animal;
}

public void setAnimal(String animal) {
    this.animal = animal;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}

// Easy to print and show the row data
@Override
public String toString() {
    return "Row [number=" + number + ", country=" + country + ", animal="
            + animal + ", city=" + city + "]";
}

// sort based on column "country"
@Override
public int compareTo(Row o) {
    return this.country.compareTo(o.country);
} 
```

}

并且测试**示例**将是

```
public static void main(String[] args) {

    ArrayList<Row> data = new ArrayList<Row>();
    data.add(new Row(1000, "Australia", "Kangaroo", "Canberra"));
    data.add(new Row(1002, "India", "Tiger", "Delhi"));
    data.add(new Row(1092, "Germany", "Eagle", "Berlin"));

    // To sort the data (based on column "country")
    Collections.sort(data);

    // Print and show the data
    for (int i = 0; i < data.size(); i++) {
        System.out.println(data.get(i));
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T08:07:45.800

我建议您逐行阅读该文件并在每一行上使用 StringTokenizer 来访问单个单词。然后，您可以将每一行放入以国家为键的 HashMap 中。

使用

```
Collection<String> k = yourHashMap.keySet();
Collections.sort(k); 
```

将按自然顺序对您的密钥集进行排序。然后，您可以遍历键集并以排序方式访问哈希图中的每一行。

# c# - 用 C# 动态改变元素的样式

> ID：12128556
> 
> 赞同：1
> 
> 时间：2012-08-26T08:05:23.337
> 
> 标签：c#, silverlight, windows-phone-7

我有一个带有 4x LineSeries 的图表。我定义了两种不同的样式来表示线条，并且我希望能够动态更改应用于特定 LineSeries 的样式（例如，基于用户点击按钮等）。

我似乎无法弄清楚如何从 c# 更新样式。任何帮助表示赞赏！

我试过了：

```
lineChartMood.PolylineStyle = this.Resources.PolylineStyle2 as Style; 
```

但这会返回 Null 异常。

这是页面的 XAML，包括样式定义：

```
 <phone:PhoneApplicationPage 
    x:Class="Bhutaan.ChartingTest"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:charting="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
    xmlns:local="clr-namespace:Bhutaan"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
    shell:SystemTray.IsVisible="True">

    <phone:PhoneApplicationPage.Resources>
        <Style x:Key="PolylineStyle" TargetType="Polyline">
            <Setter Property="StrokeThickness" Value="5"/>
        </Style>
        <Style x:Key="PolylineStyle2" TargetType="Polyline">
            <Setter Property="StrokeThickness" Value="1"/>
        </Style>
    </phone:PhoneApplicationPage.Resources>

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="TEST" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="added" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,-0,12,0">
            <ScrollViewer>
                <StackPanel>
                    <TextBlock Text="Great! That's been saved." FontSize="30" Margin="0,0,0,0"/>
                    <!-- Chart  -->
                    <charting:Chart
                        x:Name="myChart"
                        Margin="0,20,0,0"
                        Height="350"
                        Style="{StaticResource PhoneChartStyle}"
                        Template="{StaticResource PhoneChartPortraitTemplate}">

                        <!-- Series -->
                        <charting:LineSeries
                            x:Name="lineChartMood"
                            Title="Mood"
                            ItemsSource="{Binding}"
                            DependentValuePath="MoodValue"
                            IndependentValuePath="Timestamp"
                            PolylineStyle="{StaticResource PolylineStyle}" >

                            <charting:LineSeries.LegendItemStyle>
                                <Style TargetType="charting:LegendItem">
                                    <Setter Property="Margin" Value="5 0 5 0"/>
                                </Style>
                            </charting:LineSeries.LegendItemStyle>
                        </charting:LineSeries>
                        <!-- Series -->
                        <charting:LineSeries
                            Title="Energy"
                            ItemsSource="{Binding}"
                            DependentValuePath="EnergyValue"
                            IndependentValuePath="Timestamp">
                            <charting:LineSeries.LegendItemStyle>
                                <Style TargetType="charting:LegendItem">
                                    <Setter Property="Margin" Value="5 0 5 0"/>
                                </Style>
                            </charting:LineSeries.LegendItemStyle>
                        </charting:LineSeries>
                        <!-- Series -->
                        <charting:LineSeries
                            Title="Mental"
                            ItemsSource="{Binding}"
                            DependentValuePath="MentalValue"
                            IndependentValuePath="Timestamp">
                            <charting:LineSeries.LegendItemStyle>
                                <Style TargetType="charting:LegendItem">
                                    <Setter Property="Margin" Value="5 0 5 0"/>
                                </Style>
                            </charting:LineSeries.LegendItemStyle>
                        </charting:LineSeries>
                        <!-- Series -->
                        <charting:LineSeries
                            Title="Hunger"
                            ItemsSource="{Binding}"
                            DependentValuePath="HungerValue"
                            IndependentValuePath="Timestamp">
                            <charting:LineSeries.LegendItemStyle>
                                <Style TargetType="charting:LegendItem">
                                    <Setter Property="Margin" Value="5 0 5 0"/>
                                </Style>
                            </charting:LineSeries.LegendItemStyle>
                        </charting:LineSeries>
                    </charting:Chart>

                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:50:08.937

我测试了您的代码并找到了问题的原因。

您收到 NullReferenceException 是因为`this.lineChartMood`应用程序出于某种未知原因未设置该字段。

您必须自己获取此线系列对象。有两种可能的获取方式：

```
var lineSeriesWay1 = this.FindName("lineChartMood");
var lineSeriesWay2 = myChart.Series.OfType<LineSeries>().First(ls => ls.Name == "lineChartMood"); 
```

但我建议`this.lineSeriesMood`在构造函数中显式设置字段，如下所示：

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        // because the code 'this.FindName("lineChartMood")' doesn't work in the constructor, I'll use the following line:
        this.lineChartMood = this.myChart.Series.OfType<LineSeries>().First(ls => ls.Name == "lineChartMood");

        // other code
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        this.lineChartMood.PolylineStyle = (Style)this.Resources["PolylineStyle2"];
        this.lineChartMood.Refresh(); // you should call this method so that the style is applied
    }
} 
```

然后您将能够毫无例外地参考您的系列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T09:07:21.863

为什么不在 App.xaml 中添加资源并使用 App.Current.Resources 引用它们？我这样说是因为我觉得程序可能无法引用特定页面上定义的本地资源。我可能错了。这不是解决方案，只是一种解决方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T08:07:11.817

`lineChartMood.PolylineStyle = this.Resources.PolylineStyle2 as Style;` 应该是 `lineChartMood.PolylineStyle = this.Resources["PolylineStyle2"] as Style;`？？

# wordpress - 什么是 Wordpress 中的“function_exists”

> ID：12128558
> 
> 赞同：1
> 
> 时间：2012-08-26T08:06:26.237
> 
> 标签：wordpress

我对 WordPress 很陌生。我正在通过 Smooth Slider WP Plugin 并看到

```
if ( function_exists( 'get_smooth_slider_category' ) ) { get_smooth_slider_category('Uncategorized'); } 
```

这几乎给出了我想要的，但不完全是。这会拉取类别中的所有内容，而我之后的只是图像 URL。

我的问题是 wordpress 中的“function_exists”是什么？我检查了functions.php文件中的get_smooth_slider_category，但找不到任何东西。有人可以解释一下 function_exists 是如何工作的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T08:09:04.250

[function_exists](http://php.net/manual/en/function.function-exists.php)是一个 PHP 函数，不限于 WordPress。

来自手册“检查已定义函数的列表，包括内置（内部）和用户定义的函数名称。”

它返回 true 或 false 来判断函数是否存在。因此，您可以在它之前创建一个新函数来做一些稍微不同的事情，或者在它不存在时防止错误（通常是因为没有包含所需的文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:08:57.973

这是一个[PHP 函数](http://php.net/function-exists)，用于检查传入的名称是否与任何定义的函数（内部的或用户定义的）匹配。

这是一种在调用函数之前检查函数是否“可用”的方法。

# many-to-many - 具有多对多关系的类别和子类别

> ID：12128560
> 
> 赞同：0
> 
> 时间：2012-08-26T08:06:44.980
> 
> 标签：many-to-many, hierarchy, categories

我正在开始新项目，但不明白从哪里开始。我需要具有类别和 4 级子类别的数据库设计，但产品可以有多个类别。所以我很困惑我的数据库应该如何。请帮助我。非常感谢您提前给我时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T08:17:14.553

![your model](../Images/21a3ec3a6026cc2a4288191a76d76bbf.png)

**product**: holds the products with id
**category**: hold the category with id and name AND the parent category of the category
**product_category**: holds the cross-relation between one or many products and one or many categories...

If you use InnoDB on mysql or a *good DBMS* you should define the foreign-key constraints:

```
CREATE  TABLE IF NOT EXISTS `mydb`.`category` (
  `id` INT NOT NULL ,
  `name` VARCHAR(45) NULL ,
  `parent_id` INT NULL ,
  PRIMARY KEY (`id`) ,
  INDEX `parentCategory_idx` (`parent_id` ASC) ,
  CONSTRAINT `parentCategory`
    FOREIGN KEY (`parent_id` )
    REFERENCES `mydb`.`category` (`id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `mydb`.`product` (
  `id` INT NOT NULL ,
  `name` VARCHAR(45) NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `mydb`.`product_category` (
  `product_id` INT NOT NULL ,
  `category_id` INT NOT NULL ,
  PRIMARY KEY (`product_id`, `category_id`) ,
  INDEX `product_idx` (`product_id` ASC) ,
  INDEX `category_idx` (`category_id` ASC) ,
  CONSTRAINT `product`
    FOREIGN KEY (`product_id` )
    REFERENCES `mydb`.`product` (`id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `category`
    FOREIGN KEY (`category_id` )
    REFERENCES `mydb`.`category` (`id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

# django - Django 表单：我想要“特别”的 li 等 :)

> ID：12128567
> 
> 赞同：1
> 
> 时间：2012-08-26T08:07:39.737
> 
> 标签：django, django-forms

我有一个表格中的制造商列表（TypedMultipleChoiceField 加上 CheckboxSelectMultiple 小部件）。

其中一些是**推荐**的（有制造商模型和 is_recommended 字段）。我想给他们上特别的课。

所以我得到了：

```
<ul>
    <li>Just Audi</li>
    <li>Recommended BMW</li>
    <li>Just Skoda</li>
</ul> 
```

我想要的是：

```
<ul>
    <li>Just Audi</li>
    <li class='recommended'>Recommended BMW</li>
    <li>Just Skoda</li>
</ul> 
```

如何将课程添加到*特殊*li？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:58:26.067

您可以遍历模板上的表单字段...

```
<ul>
{% for field in form %}
    {% for option in field.field.choices.queryset %}
        <li {% if option.is_recommended %}class="recommended"{% endif %}>
        {{ option.title }}
        </li>
    {% endfor %}
{% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:36:15.697

您应该创建自己的自定义小部件（继承自`CheckBoxSelectMultiple`），以赋予您的特殊物品它的风格。

在您的特殊小部件中，覆盖该`render`方法-我尚未对其进行测试，但如下所示：

```
def render(self, name, value, attrs=None):
    if value is None:
        value = ''
    final_attrs = self.build_attrs(attrs, type=self.input_type, name=name)
    # enter your condition here
    # if Foo.objects.get(name=name).is_recommended:
    # final_attrs['class'] = 'recommended'
    if value != '':
        # Only add the 'value' attribute if a value is non-empty.
        final_attrs['value'] = force_unicode(self._format_value(value))
    return mark_safe(u'<input%s />' % self.flatatt(final_attrs)) 
```

# java - 连接到 MySQL 数据库时出现错误

> ID：12128576
> 
> 赞同：0
> 
> 时间：2012-08-26T08:08:44.870
> 
> 标签：java, mysql, jdbc

我已经下载了以下内容：

*   `mysql-essential-5.1.65-win32`从[这个 MySQL Dev 链接](http://dev.mysql.com/downloads/mirror.php?id=409234)
*   `mysql-connector-java-5.1.21.zip`来自[此链接](http://dev.mysql.com/downloads/mirror.php?id=408558)的MySQL 连接器

现在我已经开始使用`Eclipse`. 我做了如下简单的java类，

```
public class MySQLAccess {

      private static Connection connect = null;
      private Statement statement = null;
      private PreparedStatement preparedStatement = null;
      private ResultSet resultSet = null;

      public static void main(String[] args){

          try{
              Class.forName ("com.mysql.jdbc.Driver").newInstance (); 

          }catch (Exception e) {
            // TODO: handle exception
              System.out.println("Error : "+e);
        }         
      }   
} 
```

我还在我的 Java 项目中创建了一个文件夹“lib”，并将它`mysql-connector` `jar`放在那里。但是当我运行这个程序时它找不到 mysql 我在控制台中得到以下错误：

```
Erro : java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

有人可以告诉我我在哪里犯了错误吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:17:14.053

将完整的 jar 文件路径放在类路径中并重新启动 cmd（如果您从 cmd 运行）应该可以工作-

见这里 - [java.lang.ClassNotFoundException: com.mysql.jdbc.Driver](https://stackoverflow.com/questions/4233049/java-lang-classnotfoundexception-com-mysql-jdbc-driver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:23:05.677

If it your java application project then you put jar file into jdk library path ext folder.

```
eg:
C:\Program Files\Java\jdk1.6.0_13\jre\lib\ext 
```

you will get path from your project class path .

# php - 在第三方调用的 WebHook 中验证用户

> ID：12128582
> 
> 赞同：3
> 
> 时间：2012-08-26T08:09:44.823
> 
> 标签：php, security, session, authentication, webhooks

我有一个设置

1.  用户可能会也可能不会登录到我的网站，
2.  用户向第三方服务提交表单，并且
3.  第 3 方服务做它的事，然后在我的网站上调用一个“webhook”，转发所有`$_POST`数据。

所以，为了说明：

```
 +---------------------+         +---------------------------+
    | mysite.com/form.php |-------->| thirdparty.com/submit.php |
    +---------------------+         +---------------------------+
                                                  |
                                                  v
                                    +---------------------------+
                                    |   mysite.com/webhook.php  |
                                    +---------------------------+ 
```

**如果用户在提交表单时已登录，那么我如何在 webhook 中告知和验证这一事实？**

例如，我可以天真地设置一个隐藏字段，

```
<input type="hidden" name="loggedOn" value="true" /> 
```

但是任何人都可以欺骗它。我想我可能会通过用户的密码哈希，

```
<input type="hidden" name="passwordHash" value="$2a$08$Lg5XF1Tt.X5TGyfb43vBBeEFZm4GTXQhKQ6SY6emkcnhAGT8KfxFS" /> 
```

有效地使 webhook 再次“登录”，但这不可能是正确的，因为它会将用户的密码哈希暴露给客户端。

我认为必须有更好的方法来使用会话机制来做到这一点，但我是会话新手。也许我错过了适当的词汇？有人会引导我朝着正确的方向前进吗？谢谢！

* * *

**编辑：**

`sid`经过进一步研究，我认为正确的方法是为会话 id设置一个隐藏的表单字段`session_id()`，以便将其传递给 webhook，而 webhook 又将使用会话 id 继续会话`session_id($_POST['sid']); session_start();`。我现在的问题是这是否是规范（和安全）的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:36:55.073

无论如何，用户的 SessionID 对用户都是已知的，并且无论如何都可以通过中间人方法进行嗅探。因此，如果您担心安全性可能会被“黑客攻击”（并且您无法使用 SSL），那么您将实施 IP 跟踪、代理跟踪等。所有可能被欺骗或伪造的细节，甚至可能会改变会话错误（尽管很少，除了移动设备上的 IP）但它是一个额外的添加层。

因此，基本解决方案是为您创建一个 session_id，作为表单的一部分传递，然后按照您/史蒂夫的建议使用它。

您不能使用 IP 或代理标头，因为它们会丢失。所以你需要看看你可以使用什么。

按照复杂性的递增顺序，但安全性：

1.  除了帖子之外，thirdparty.com 是否会将任何数据传递给您？检查标题；您可能会发现他们通过了原始 IP、原始引荐来源网址或代理。您可以将它们用作最简单的防线 - 它们应该与原始数据（您可以存储在会话中）相匹配。

2.  在您的站点上创建表单时，创建另一个唯一 ID 并存储在会话中。在隐藏字段中也将其传递给表单，当您从“thirdparty.com”取回表单数据时，您可以检查唯一 ID 是否与会话上的匹配。然后从会话中删除 uniqueID，这意味着它只能使用一次。（这是他的回答中提到的 NONCE pd40。）

3.  如果您可以使用 javascript 然后捕获 on submit，还将详细信息发送到您的服务器。您的服务器将已经在会话中包含详细信息。当“thirdparty.com”返回给您时，调用会话并检查详细信息是否匹配。（如果您不想在会话中存储所有详细信息，您可以对其进行 MD5 - 返回时 MD5 应该匹配）。您也可以为此添加时间戳 - 如果您在 60 秒内没有收到回复，那么事情会变得有点慢 [根据您的需要调整时间戳，但要慷慨]。

4.  但是，我的首选（也是我们使用的）是让您自己的服务器接收表单数据，然后使用 Curl 生成对 thirdparty.com 的 POST 请求。不需要 webhook - 您只需在继续处理自己之前检查响应 - 用户永远不会意识到第三方参与其中并且交互是在您自己和服务器之间。

此外，如果您真的很担心，请记录您认为“无效”的所有呼叫。你会发现用户在做对之前会尝试破解几次 - 所以永远不要透露你已经将他们识别为黑客（除非有可能出现误报；所以要小心这一点）并记录. 如果您从一个 IP 收到 5 个无效请求（例如），那么您可以假设来自该 IP 的所有后续请求都是狡猾的，即使是好的。保留日志，以便您进行监控。

最后说明：如果您可以实施，SSL 总是最好的。

希望这能让您对可以实施的选项有所了解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T01:21:17.757

使用会话 ID 有助于跟踪谁发出请求并提供一些安全保护。

您还可以考虑向第三方提出的每个请求都包含：

*   检测重放的**随机数**
*   **检测旧请求的**时间戳****
***   随每个请求发送的[数字签名](/questions/tagged/digital-signature "显示标记为“数字签名”的问题")或[hmac 。](/questions/tagged/hmac "显示标记为“hmac”的问题")您将对任何*可能*被篡改的值进行签名/散列，并在**webhook中验证这些值****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:44:02.367

如果您将用户会话存储在数据库中，这会更容易。当然，任何人都可以通过该表单（欺骗它），但是如果在触发您的“webhook”时，您检查了会话表以获取有效的会话密钥，那么您会很高兴。**

# php - 从 var_dump 获取数据

> ID：12128586
> 
> 赞同：1
> 
> 时间：2012-08-26T08:10:40.690
> 
> 标签：php, var-dump, querypath

我`var_dump`正在给我：

```
 object(QueryPath)#2 (7) {
    ["errTypes":"QueryPath":private]=> int(257)
    ["document":protected]=> object(DOMDocument)#3 (34) {
        ["doctype"]=> string(22)"(object value omitted)"
        ["implementation"]=> string(22) "(object value omitted)"
        ["documentElement"]=> string(22) "(object value omitted)"
        ["actualEncoding"]=> string(5) "UTF-8"
        ["encoding"]=> string(5) "UTF-8"
        ["xmlEncoding"]=> string(5) "UTF-8"
        ["standalone"]=> bool(true)
        ["xmlStandalone"]=> bool(true)
        ["version"]=> NULL
        ["xmlVersion"]=> NULL
        ["strictErrorChecking"]=> bool(true)
        ["documentURI"]=> string(26) "http://www.therock.net.nz/"
        ["config"]=> NULL
        ["formatOutput"]=> bool(false)
        ["validateOnParse"]=> bool(false)
        ["resolveExternals"]=> bool(false)
        ["preserveWhiteSpace"]=> bool(true)
        ["recover"]=> bool(false)
        ["substituteEntities"]=> bool(false)
        ["nodeName"]=> string(9) "#document"
        ["nodeValue"]=> NULL
        ["nodeType"]=> int(13)
        ["parentNode"]=> NULL
        ["childNodes"]=> string(22) "(object value omitted)"
        ["firstChild"]=> string(22) "(object value omitted)"
        ["lastChild"]=> string(22) "(object value omitted)"
        ["previousSibling"]=> NULL
        ["attributes"]=> NULL
        ["ownerDocument"]=> NULL
        ["namespaceURI"]=> NULL
        ["prefix"]=> string(0) ""
        ["localName"]=> NULL
        ["baseURI"]=> NULL
        ["textContent"]=> string(48034)
    }
} 
```

我怎么拉`["textContent"]`？

我当前的索引页面是：

```
$loadRock = $system->get_theRock();

var_dump($loadRock); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:19:19.950

`textContent`是`DOMDocument`object的一个属性，就是property `document`，但是这个属性是`protected`，所以不能通过`$loadRock->document->textContent`。

您需要检查 的文档`QueryPath`，查看是否有访问该`document`属性的方法或其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:39:29.673

试试 $loadRock->html(); 或 $loadRock->text();

# objective-c - 通用应用程序：我应该将共享视图提取到他们自己的情节提要中吗

> ID：12128591
> 
> 赞同：1
> 
> 时间：2012-08-26T08:11:33.060
> 
> 标签：objective-c, ios, uiviewcontroller, interface-builder, uistoryboard

我有一个带有两个故事板的通用应用程序：

*   `iPhone.storyboard`
*   `iPad.storyboard`

现在我有了 iPad 和 iPhone 中都存在的视图或“视图树”。我应该创建一个“ `Universal.storyboard`”（这甚至可能吗）还是应该将这些视图排除在`nib`s 中并以“旧方式”进行操作，然后引用那些`UIViewController`s。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:32:48.820

或者，这实际上只是您是否希望使用情节提要的意见问题。如果您确实选择使用情节提要，则必须为 iPad 和 iPhone 制作单独的情节提要。即使使用故事板，如果您打算为 iPhone 和 iPad 对应物使用相同的视图控制器，您最终仍会使用一堆 userIdiom if。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:44:53.130

我不相信您可以在两个平台之间共享故事板，因为创建故事板时，您必须将它们定义为一个或另一个。

您可以使用实用程序故事板来保存您想要通过代码直接访问的内容，而不是通过 segue - 说出您想在应用程序之间轻松共享的内容，例如登录或实用程序视图。然而，它仍然限于一个设备平台或另一个。

仅供参考，如果您向情节提要对象添加标识符，则可以在代码中像这样获取它：

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"Login" bundle:nil];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"LoginPage"];

//once you have the view controller you can push it, pop it or segue to it.
[self.navigationController pushViewController:vc animated:YES]; 
```

在将 iphone 应用程序转换为 iPad 时，我学会了一个巧妙的技巧，就是将 iPhone 视图从 iPhone 故事板复制/粘贴到 iPad 故事板中，然后使用弹出框显示它们。

巧妙的技巧是——在你做任何事情之前，将 iPhone 视图控制器上的 size 属性设置为自由形式，然后选择它并命令 C 复制它。转到您的 iPad 故事板并将其粘贴进去，它将保持其大小。现在您可以随心所欲地使用它。复制对象或保持原样。这可以节省大量时间和挫败感，因为正常的复制/粘贴会将 iphone 视图转换为大的 iPad 视图，然后您必须修复它们。

一些页面可以产生很好的效果，保持完全相同的大小，并且只是在 iPad 上的弹出窗口中呈现而无需任何更改。

希望对你有帮助

# java - java解释正确

> ID：12128592
> 
> 赞同：-3
> 
> 时间：2012-08-26T08:11:33.233
> 
> 标签：java, class

我有以下问题，想知道我是否正确解释了这个问题。我是 Java 和编程的新手，所以技术术语甚至认为我阅读了我的教科书并理解了它们，我不确定我是否正确地编程了它们。请查看问题并让我知道我正在做的事情是否朝着正确的方向发展。

![在此处输入图像描述](../Images/137a1e2fbd95da9c38bf506b0ce6f833.png)

问题本身：

```
You are asked to implement a class to keep track of the students' academic result for a module. The system requires the following information about a student:
 Student identification - a unique 7-digit identification that begins with 'S' for local students and 'F' for foreign student. E.g. S1234567.
 Student name
 Quiz mark - an integer number in the range of 0 to 100
 Assignment mark - an integer number in the range of 0 to 100
 Exam mark - a floating point number in the range of 0 to 100
 Resit student - true if the student is retaking the paper, false otherwise. Resit student does not have quiz and assignment marks.
Write a Java class called Student and provide the following:
 suitable instance variables for the information described above
 constructor(s) with the appropriate actions on the instance variables
 the accessor methods for the instance variables
 the computeScore() method to compute the score as follows:
for resit students, take only the exam mark as the score
for other students, score is calculated by using the formula
9% * quiz + 21% * assignment + 70% * exam
The score calculated is to be rounded up to the nearest integer and returned.
 the findGrade() method that returns the grade based on the score:

Score range
Grade
80 to 100
A
70 to 79
B
60 to 69
C
50 to 59
D
0 to 49
F
 the toString() method that returns the attribute values as a string with description. 
```

那么这是我到目前为止的代码是否正确？我的意思是我声明构造函数的方式等等......tks

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package student_qn4;

/**
 *
 * @author 
 */
public class Student 
{
   private String student_idno, student_name;
   private int mark_quiz, mark_assig;
   private float mark_exam;
   private boolean student_resit;

   public Student (String id, String name , int quizM , int assignM , int examM) {

 studentId = id;
 studentName = name;
 quizMark = quizM;
 assignMark = assignM;
 examMark = examM;
 }

   public void setStudentnumber(String number)
   {
       student_idno = number;
   }

   public String getStudentnumber()
   {
       return student_idno;
   }

   public void setStudentname(String name)
   {
       student_name = name;
   }

   public String getStudentname()
   {
       return student_name;
   }

    public void setquizMark(int quizmarks)
   {
       mark_quiz = quizmarks;
   }

   public int getquizMark()
   {
       return mark_quiz;
   }

    public void setassigMark(int assigmarks)
   {
       mark_assig = assigmarks;
   }

   public int getassigMark()
   {
       return mark_assig;
   }

   public int computerScore()
   {
       /*do as the program asks then return the computer score */

   }

   public String findGrade()
   {
       // Based on the computeScore() I have to access what is the grade and return that
   }

   public String toString()
   {
       // What is this method supposed to do?
   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:39:30.150

通常可以，如果您接受其他答案中的评论。

但是，您的命名约定有点古怪。标准的java bean约定是用camelCase（所以markQuiz而不是mark_quiz）命名你的属性（你的int等），你的getter和setter为getMarkQuiz和setMarkQuiz（get/set之后的第一个字母现在大写）对于布尔属性，使用 isXxx() 而不是 getXxx()。

这些约定被广泛使用，将使您的代码更加工具友好（使用诸如 ecliipse/netbeans 之类的 ide）

关于您提出问题后的评论，家庭作业问题通常不受欢迎，这就是您被否决的原因。与来这里寻求答案相比，您将通过玩耍和试验，弄错然后修复它来学到更多。至少您确实提供了一个框架答案，所以您正在考虑它，为此做得很好。坚持下去！

# python - 使用 python 处理 ember.js 标记的 html

> ID：12128593
> 
> 赞同：3
> 
> 时间：2012-08-26T08:11:33.723
> 
> 标签：python, templates, ember.js, web2py

我有以下情况：

1.  我们在服务器端使用[web2py](http://www.web2py.com)
2.  我们正在提供一些[ember.js](http://emberjs.com/)页面
3.  目前这些 ember.js 页面位于 iframe 中，因为[ember.js 和 web2py 与模板 {{ }} 标记冲突](https://groups.google.com/forum/m/#!msg/web2py/-CrviALMVy8/5ly-u8SVnu4J)。这意味着我们不能轻易混合 web2py 模板和 ember.js 模板。
4.  所以我实现了辅助类解决方案：`class em(DIV)`
5.  现在我想处理原始的带有 ember 标记的 html 文件，并生成带有*em 标记的*文件，将 ember.js 和 web2py 模板系统集成到一个有凝聚力的单元中。

为此，我需要将`{{XXX}}`ember.js 文件中的所有实例更改为 {{=em('XXX')}}，*包括*跨越多行的实例。我正在考虑在这里使用正则表达式，但我想避免重新发明轮子（并且不得不处理奇怪的极端情况）

你能想到python中解析这类模板的通用方法吗？只需查找开始和结束分隔符 ( `{{`and `}}`)，然后放置`=em('XXX')`,*处理换行符*并*保持格式*（即，如果有换行符，则保留换行符）。

注意：这实际上不是 ember.js 特定的；它可以应用于任何基于多行分隔符的模板系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:23:21.400

请注意，在 web2py 的主干版本（将在未来几天内作为 web2py 2.0 发布）中，您现在可以为模板指定自定义分隔符——因此您可以更改 web2py 分隔符，使其不再与 ember 冲突。 js 分隔符。例如，在模型文件中：

```
response.delimiters = ['{%', '%}'] 
```

然后在您的 web2py 模板中，您可以执行以下操作：

```
{%=P('hello world')%}
<p>{{ember template code}}</p>
{%=P('{{ember template code generated by web2py}}')%} 
```

这将产生：

```
<p>hello world</p>
<p>{{ember template code}}</p>
<p>{{ember template code generated by web2py}}</p> 
```

注意，response.delimiters 是在每个请求上设置的，所以如果您不想更改所有页面上的 web2py 分隔符，而只更改包含 ember 代码的页面，您可以有条件地设置 response.delimiters（通过在特定操作中设置它）需要它，或者通过检查模型文件中请求的控制器和/或函数）。例如，在模型文件中：

```
if request.function in ['action1', 'action2', 'action3']:
    response.delimiters = ['{%', '%}'] 
```

或在控制器中：

```
def action1():
    response.delimiters = ['{%', '%}']
    [etc.] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T20:28:52.767

可能值得尝试一种方法，将所有 Ember.js 内容保存在单独的文件中，并且不要将其与 web2py 模板混合。幸运的是，Ember.js 很容易做到这一点。

# php - 存储表单数据

> ID：12128600
> 
> 赞同：1
> 
> 时间：2012-08-26T08:12:48.757
> 
> 标签：php

我对 php 和 stackoverflow 还很陌生，但我知道基础知识，而且我可以很快学会。

我想到了一个应用程序，该应用程序涉及向用户呈现多组复选框和单选按钮，每个组位于单独的页面上，并从菜单到达。

例如国籍办公室姓名收入概况

他们不必从每个组中进行选择，当他们做出选择时，他们可以根据他们的选择查询数据库，然后显示数据。我希望他们能够通过重新访问任何选择页面来调整他们的选择，然后重新查询数据库。

当他们通过这些选择表格进行时，我如何最好地存储他们的选择。我是否使用 cookie 或会话变量？我考虑过将他们的选择存储在数据库中，但这可能会变得复杂。

在这个阶段我只需要指针。

谢谢

贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:23:21.687

I would design this in the following manner:

Create form that has any and all the data you want about them. Write the PHP so that if you supply the ID of the user (will get to that shortly) if queries their record from the database and shows everything that they have saved. They can make any changes they like and submit the form. This updates their record in the database and the next time they view the page, the new information is shown.

When the form is submitted, it should first check to see if they exist already - if so, update the record - if not, insert it. You can do this in PHP, but you could also do it via a nice mysql statement (insert into... on duplicate key update).

When a user creates an account, their login/username is tied to a unique ID in the database. When they verify this (by logging in again) that ID is passed to a session variable so that you can access their data nice and easily from the database at any point.

Lastly, I would suggest that when you are doing this, use prepared statements to get data to and from the database, I would suggest PDO myself, it's nice, it *can* be cross database compatible and the like. If you are looking at good security, I suggest not storing the password directly, but salting it and keeping a hash that is verified on the fly. It might be a good idea to insert a semi-unique token right off the bat, so that if they forget their password you can send it to them to verify via a link back. Also, storing a username/login in a cookie is okayish, but never store a password in there. In fact, never store password in a session either - once they are verified, just store a *signed in* flag of some sort and check against that.

Edit:

If you are able to assign the user a unique ID at the start of the process (like say getting an email from the user) you can then give them a unique ID (or heck, at a pinch, use their email address) then you can then you can insert data into the final row from the start. Mysql offers the `insert ... on duplicate key update` syntax. That means you can insert the data into the row with each page that is passed, refer back to it at any point and as a bonus because you use a unique key like their email address this will keep them tied to the data, they are able to enter some data, leave your site and come back at a later time and fill the rest in.

# rally - 拉力赛：积压和重新打开缺陷

> ID：12128602
> 
> 赞同：1
> 
> 时间：2012-08-26T08:13:32.483
> 
> 标签：rally

如何优先获取积压缺陷，以及使用“.Net REST API”重新打开缺陷？

* * *

我试过这个，但是 request.Query = new Query("Iteration", Query.Operator.Equals, null).and( new Query("Release", Query.Operator.Equals, null)); 正在抛出 NullReferenceException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:19:02.930

这里有一些代码示例：http: [//developer.rallydev.com/help/rest-api-net](http://developer.rallydev.com/help/rest-api-net)

要获得包括优先级字段在内的积压缺陷，您需要执行以下操作：

```
RallyRestApi restApi = new RallyRestApi("username", "password", "https://rally1.rallydev.com", "1.24");

Request request = new Request("defect");
request.Fetch = new List()
    {
        "Name",
        "Description",
        "FormattedID",
        "Priority"
    };
request.Query = new Query("Iteration", Query.Operator.Equals, null).and(
    new Query("Release", Query.Operator.Equals, null));

QueryResult queryResult = restApi.Query(request);
foreach(var result in queryResult.Results)
{
    //Process item
    string priority = result["Priority"];
} 
```

要检查重新打开的缺陷，您还需要获取 Revisions 和 RevisionHistory，然后检查每个修订的描述以了解对 state 字段的更改。

# javascript - 为什么不能正确（parseInt）将字符串转换为int？

> ID：12128603
> 
> 赞同：0
> 
> 时间：2012-08-26T08:13:36.757
> 
> 标签：javascript, asp.net

> **可能重复：**
> [为什么 parseInt(“09”) 返回 0 而 parseInt(“07”) 返回 7？](https://stackoverflow.com/questions/8763362/why-does-parseint09-return-0-but-parseint07-return-7)

我有一个像 (10) | 这样的字符串 (01)

我想转换为int。

我使用此代码

```
parseInt("10") ----> 10
parseInt("07") ----> 7 
```

但是当我将此代码用于 (08) 时，它会转换为 (0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:16:15.803

[如果字符串以 0 开头，则默认基数为 8](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt#Octal_Interpretations_with_No_Radix)。

尝试明确指定基数：

```
parseInt("08", 10) 
```

# c# - 如何使用 c# 将 Web 示例配置到 IIS Express 7.5 服务器中？

> ID：12128607
> 
> 赞同：2
> 
> 时间：2012-08-26T08:13:56.977
> 
> 标签：c#, c#-4.0

需要从 IIS Express 7.5 服务器部署 Web 示例。我在不同平台（Asp.NET、Asp.Net MVC、Silverlight）项目中有一些 Web 示例。我创建了一个启动 exe 来运行示例浏览器。

如果机器中已安装 IIS Express 7.5，则将条目包含在 xml 文件中。参考 xml 文件 web 示例将使用 IIS Express 7.5 运行。如果机器安装了 IIS Express 7.5，则表示 Web 示例已从 IIS Express 7.5 运行，否则它已从默认的 ASP.Net Web 开发服务器运行。

如何使用 c# 将 Web 示例部署到 IIS Express 7.5 服务器中？

有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:33:38.337

您必须在 machine.config 中进行修改以设置默认值。在 Visual Studio 中工作时，最简单的方法是右键单击您的 Web 项目，转到属性 -> 使用本地 IIS 服务器 -> 选择使用 IIS Express。

# javascript - PDF 到 JPG 转换器

> ID：12128609
> 
> 赞同：2
> 
> 时间：2012-08-26T08:14:06.597
> 
> 标签：javascript, pdf, jpeg

有没有办法使用 Javascript 将 PDF 文件转换为 JPG？

我已经尝试过寻找转换器，但到目前为止我所拥有的只是[将 PDF 文件嵌入 HTML 页面的 Javascript](http://andreasgal.com/2011/06/15/pdf-js/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:08:33.490

您需要先从后端将 PDF 转换为图像。

开源工具包括

文字

ImageMagick

鬼脚本

然后使用 Javascript 显示图像。

以下帖子可能会有所帮助

[在没有 Flash 的网页中查看 PDF](https://stackoverflow.com/questions/12074747/view-pdf-in-a-web-page-without-flash)

# javascript - 如何通过 ) 或 = 拆分 JS 字符串？

> ID：12128618
> 
> 赞同：1
> 
> 时间：2012-08-26T08:16:08.287
> 
> 标签：javascript, regex, string

如何用`)`or分割 JS 字符串`=`？我知道我应该使用正则表达式，`split()`但不知道我应该使用的确切正则表达式。试过这个`mystring.split("[\\=\\)]+")`但不起作用！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T08:19:22.233

In JavaScript, wrapping the regex in quotes won't work. You have to wrap it in slashes:

```
> 'hello)world=yes'.split(/[=)]+/)
["hello", "world", "yes"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T08:19:00.703

```
result = mystring.split(/[)=]/); 
```

works. You do need to assign the result back to another (or the same) string, though.

# performance - 构建可扩展 Java EE 在线购物应用程序的最佳实践

> ID：12128621
> 
> 赞同：0
> 
> 时间：2012-08-26T08:16:17.173
> 
> 标签：performance, jakarta-ee, scalability

我想知道在设计在线购物应用程序时可以遵循的一些最佳实践。我有兴趣主要了解以下几个方面。

1.  可扩展性 - 我如何确保我的设计能够满足每年 20% 的预期用户增长的可扩展性观点。
2.  性能瓶颈。

请围绕这两个方面分享一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:15:05.170

正如成员已经谈到上面的 3 层方法；我不会沉迷其中。但是，我认为您想从数据可扩展性的角度找到更多解释。

问题 1 的答案：越来越多的现代高数据密集型应用程序倾向于水平数据扩展方法。例如 DB 的分片，使用 BigData 或允许数据库水平可扩展性的 noSQL 环境。

3 层方法使此类可扩展性更改能够轻松执行。

对问题 2 的回答：我不确定您的问题是否正确地阐述了瓶颈区域。后端/服务器端 [我假设您正在谈论基于 Web 的应用程序] 或前端（浏览器端）可能存在瓶颈。很抱歉，但很难详细说明像“性能瓶颈”这样的广义术语。更具体的问题陈述有助于获得答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:27:18.620

如果您不熟悉软件设计，您可以从一些分层架构开始：

1.  DAO 层
2.  服务层
3.  控制器/UI层

通过应用这些层，您可以在将来毫无问题地扩展您的应用程序。

示例：[堆栈溢出](https://stackoverflow.com/questions/12011330/java-ee-best-design-approach-business-logic-layer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-26T02:57:55.130

我认为在线购物应用程序类似于 MVC。

1.  除非您的数据集大小超过 10GB 或 100GB，否则我不会直接跳转到 noSQL 数据库。因为在此之前，RDBMS 可以很好地扩展。因此，如果您认为您的数据集将超出该范围，请继续使用 noSQL。
2.  这当然是一个广泛的问题。一些线索可能是：密切关注所有后端查询、所有 api 调用和所有进程。它可以进一步扩展，例如数据库设计（表的正常性），索引（基于您的查询/搜索/其他标准要求）需要根据您的要求精心设计/考虑。除此之外，遵循编码最佳实践绝对更好，以确保您的代码库对于您的开发人员来说是可维护的。你可以关注这样[的](https://code.tutsplus.com/tutorials/top-15-best-practices-for-writing-super-readable-code--net-8118)事情，那里有很多资源，包括专门用于前端和后端的资源。这一切又归结为您真正想要设计/开发的内容。关于性能，你'或[Apache 点燃](https://ignite.apache.org)以确保您的服务器之间的缓存一致性。

# javascript - 显示给定半径内数据库中的所有位置

> ID：12128625
> 
> 赞同：3
> 
> 时间：2012-08-26T08:16:50.560
> 
> 标签：javascript, google-maps, geolocation

使用谷歌地图，我想检索并显示给定点具有固定半径的所有位置。

我设法找到了[显示位置指南](http://www.domagojsalopek.com/Details/Display-locations-from-a-database-on-a-map-using-Google-Maps-JavaScript-API-and-PHP/22)，还看到了许多关于使用 SQL 查询检索它的帖子。我的数据库包含项目名称、地址（查找 alt、lon）、alt、lon 和描述。如何使用存储的 alt，lon 仅检索其中的 alt，假设半径为 50 公里。

这是我的代码：

javascript

```
function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(31.046051, 34.85161199999993);
    var myOptions = {
        zoom: 7,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function updateCoordinates(latlng)
{
  if(latlng) 
  {
    document.getElementById('lat').value = latlng.lat();
    document.getElementById('lng').value = latlng.lng();
  }
}

function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            updateCoordinates(results[0].geometry.location);
            if (marker) marker.setMap(null);
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                draggable: true
            });

            google.maps.event.addListener(marker, "dragend", function() {
                updateCoordinates(marker.getPosition());
            });

        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}

  function showPositionCoupons(sentlat, sentlon)
  {
  lat=sentlat;
  lon=sentlon;
  latlon=new google.maps.LatLng(lat, lon)
  mapholder=document.getElementById('map_canvas')

  var myOptions={
  center:latlon,zoom:14,
  mapTypeId:google.maps.MapTypeId.ROADMAP,
  mapTypeControl:false,
  };
  map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
  marker = new google.maps.Marker({position:latlon,map:map,title:"You are here!"});
  } 
```

我想我可能需要`showPositionCoupons()`在循环中使用，同时阅读 alt 和 lon？感谢您提供的任何帮助，我知道这是一个常见问题，但我无法使用现有的东西来解决它。

我尝试使用显示位置指南 DisplayLocations() 方法，但它对我不起作用，尽管那里显示的位置方式很完美，只需要排除半径范围之外的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:18:27.157

可能不完全是你所期望的，但我希望它仍然会有所帮助。从您发布的链接开始，我认为您正在使用 PHP/MySQL。

如果这是真的，我会使用 PHP/MySQL 来获取正确的结果，然后将它们显示在 Google 地图上。

如果您可以在不需要外部服务的情况下进行计算，则效率会更高。

```
// PHP/MySQL code
$sourceLat = '';
$sourceLon = '';
$radiusKm  = 50;

$proximity = mathGeoProximity($sourceLat, $sourceLon, $radiusKm);
$result    = mysql_query("
    SELECT * 
    FROM   locations
    WHERE  (lat BETWEEN " . number_format($proximity['latitudeMin'], 12, '.', '') . "
            AND " . number_format($proximity['latitudeMax'], 12, '.', '') . ")
      AND (lon BETWEEN " . number_format($proximity['longitudeMin'], 12, '.', '') . "
            AND " . number_format($proximity['longitudeMax'], 12, '.', '') . ")
");

// fetch all record and check wether they are really within the radius
$recordsWithinRadius = array();
while ($record = mysql_fetch_assoc($result)) {
    $distance = mathGeoDistance($sourceLat, $sourceLon, $record['lat'], $record['lon']);

    if ($distance <= $radiusKm) {
        $recordsWithinRadius[] = $record;
    }
}

// and then print your results using a google map
// ...

// calculate geographical proximity
function mathGeoProximity( $latitude, $longitude, $radius, $miles = false )
{
    $radius = $miles ? $radius : ($radius * 0.621371192);

    $lng_min = $longitude - $radius / abs(cos(deg2rad($latitude)) * 69);
    $lng_max = $longitude + $radius / abs(cos(deg2rad($latitude)) * 69);
    $lat_min = $latitude - ($radius / 69);
    $lat_max = $latitude + ($radius / 69);

    return array(
        'latitudeMin'  => $lat_min,
        'latitudeMax'  => $lat_max,
        'longitudeMin' => $lng_min,
        'longitudeMax' => $lng_max
    );
}

// calculate geographical distance between 2 points
function mathGeoDistance( $lat1, $lng1, $lat2, $lng2, $miles = false )
{
    $pi80 = M_PI / 180;
    $lat1 *= $pi80;
    $lng1 *= $pi80;
    $lat2 *= $pi80;
    $lng2 *= $pi80;

    $r = 6372.797; // mean radius of Earth in km
    $dlat = $lat2 - $lat1;
    $dlng = $lng2 - $lng1;
    $a = sin($dlat / 2) * sin($dlat / 2) + cos($lat1) * cos($lat2) * sin($dlng / 2) * sin($dlng / 2);
    $c = 2 * atan2(sqrt($a), sqrt(1 - $a));
    $km = $r * $c;

    return ($miles ? ($km * 0.621371192) : $km);
} 
```

然后对结果做你想要的。如果您需要它，您甚至可以通过 AJAX 调用来实现此解决方案。

**更新：如何将记录输出为 json**

```
// add this to the above php script
header('Content-type: application/json');
echo json_encode( $recordsWithinRadius );
exit(); 
```

**更新：如何通过 jquery 中的 AJAX 调用加载 json**

```
// javascript/jquery code
$(document).ready(function()
{
    $.getJSON('http://yourserver/yourscript.php', function(data)
    {
        $.each(data, function(key, record) {
            // do something with record data
            console.log(record);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:42:27.150

对于每个点，您必须计算到中心点的距离（还有一个[Google 服务](https://developers.google.com/maps/documentation/javascript/distancematrix)）。然后只绘制距离<= 50km的点。

# java - 如何使用 Eclipse Indigo 使用 m2eclipse 插件创建一个 struts 2 项目？

> ID：12128626
> 
> 赞同：3
> 
> 时间：2012-08-26T08:17:01.310
> 
> 标签：java, eclipse, jakarta-ee, maven, struts2

我通常使用命令行使用 maven 2 创建我的项目。我不太确定如何在运行 OSX Lion 的 Mac 上使用 Eclipse Indigo 中的 m2eclipse 插件和 maven 3 来做到这一点。我用这个步骤做得很好

1.  文件
2.  新的
3.  其他
4.  马文
5.  Maven 项目

但无法从 Nexus 索引器中找到 struts 2 空白原型。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T16:02:39.797

不要选择 Nexus Indexer，而是选择`Configure...`然后`Add Remote Catalog...`输入此 URL：

[http://struts.apache.org/archetype-catalog.xml](http://struts.apache.org/archetype-catalog.xml)

然后选择该目录而不是 Nexus 索引器，您应该会看到所有 struts2 原型。

# php - 为什么页面需要这么长时间才能加载？处于等待状态？

> ID：12128627
> 
> 赞同：0
> 
> 时间：2012-08-26T08:17:09.530
> 
> 标签：php, html, http-headers, webserver

我有我设计的这个网站，加载页面需要很多时间。Chrome 控制台显示其处于等待状态，这是什么，我该如何解决？

![这么多时间来加载页面](../Images/9c9a9705cbf9ee54a7f2a82e718c4e9f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:45:17.540

我认为这可能是对 facebook graph api 的调用需要一些时间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:08:47.480

似乎所有 JavaScript 都在减慢页面速度。现在，在您删除令牌检查后，HTML 加载正常，但页面仍然加载很长时间，直到它最终获得完成构建页面所需的一切。

**解决方案**

*   #1 将 JS 移动到页面底部。
*   #2 如果您真的需要所有这些异步内容，请尝试尽可能多地离线加载。如果可以的话，缓存它。

# php - php jquery multiple getJson not working what iam done worng

> ID：12128630
> 
> 赞同：0
> 
> 时间：2012-08-26T08:17:30.747
> 
> 标签：php, jquery, getjson

```
$.getJSON("Index/Locations_By_Ratings",function (data) {
    $('#LocationsContainer').html('');
    for (var i = 0; i < data.length; i++)
    {
        $.getJSON('Index/Get_Board_Type',{id:data[i].board_type},function (board_type) {
            var Board = board_type['board_types'];
        });
        $('#LocationsContainer').append('<div class="LocationBox">\
                                            <div class="left">\
                                            <div class="LocationRow"><b>Board Type</b> : '+Board+'</div>\
                                            <div class="LocationRow"><b>Area</b> : '+data[i].location+'</div>\
                                        </div>');
    }
}); 
```

in first call iam getting board_types id , in second call iam getting board type name using first call board_types id , and i want to print var Board.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:20:48.453

I see 3 problems in your code :

*   getJSON is asynchronous : the code just after is executed before you get the answer from the server (when Board isn't yet filled)
*   Board is a local variable, not visible outside the callback you give to getJSON
*   `i` has changed value when the callback is executed (remember : getJSON is asynchronous)

You can do this :

```
$.getJSON("Index/Locations_By_Ratings",function (data) {
    $('#LocationsContainer').html('');
    for (var i = 0; i < data.length; i++)
    {
        var theData = data[i];
        $.getJSON('Index/Get_Board_Type', {id:theData.board_type},function (board_type) {
            var Board = board_type['board_types'];
            $('#LocationsContainer').append('<div class="LocationBox">\
                                                <div class="left">\
                                                <div class="LocationRow"><b>Board Type</b> : '+Board+'</div>\
                                                <div class="LocationRow"><b>Area</b> : '+theData.location+'</div>\
                                            </div>');
    });}
}); 
```

# objective-c - cellForRowAtIndexPath - [indexPath 行] 滚动时返回奇怪的数字

> ID：12128638
> 
> 赞同：2
> 
> 时间：2012-08-26T08:18:44.357
> 
> 标签：objective-c, ios, xcode, uitableview

我知道还有很多其他关于 [indexPath row] 和滚动的问题，但是任何人都可以帮助我理解为什么它返回奇怪的数字吗？我似乎无法为我配置单元格的方式找到解决方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"ProfileIdentifier";

    NSUInteger row = [indexPath row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil){
        //My custom xib file is named "ProfileCell.xib"
        [[NSBundle mainBundle] loadNibNamed:@"ProfileCell" owner:self options:nil];
                cell = profileCell;
        self.profileCell = nil;
    }
//name and info are both of type NSArray
    labelName.text = [name objectAtIndex:row];
    labelInfo.text = [info objectAtIndex:row];
    NSLog(@"Row: %d", row);

    return cell;
} 
```

控制台在加载时返回：

2012-08-26 09:09:10.966 导航 [8028:f803] 行：0

2012-08-26 09:09:10.983 导航[8028:f803] 行：1

2012-08-26 09:09:10.986 导航[8028:f803] 行：2

2012-08-26 09:09:10.996 导航[8028:f803] 行：3

2012-08-26 09:09:10.999 导航 [8028:f803] 行：4

2012-08-26 09:09:11.002 导航[8028:f803] 行：5

2012-08-26 09:09:11.004 导航[8028:f803] 行：6

2012-08-26 09:09:11.007 导航 [8028:f803] 行：7

2012-08-26 09:09:11.010 导航[8028:f803] 行：8

2012-08-26 09:09:11.012 导航[8028:f803] 行：9

然后，当我向下滚动到屏幕外的单元格时，它会返回此信息：

2012-08-26 09:09:12.354 导航[8028:f803] 行：3

2012-08-26 09:09:12.404 导航[8028:f803] 行：2

2012-08-26 09:09:12.471 导航 [8028:f803] 行：1

2012-08-26 09:09:12.622 导航 [8028:f803] 行：0

每次用户滚动时，我的 labelName.text 和 labelInfo.text 都会发生变化。
但是，唯一受影响的单元格是底部的单元格。如何保持第 9 个单元格的 labelName 与 [indexPath row] 一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:53:20.210

这是使用 custom 的正确方法`UITableViewCell`：

* * *

在**.h**文件中：

```
@interface YourViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> {
    UINib *profileCellNib;
}

// ...

@end 
```

* * *

在您的**.m**文件中：

```
- (void)viewDidLoad {
    profileCellNib = [UINib nibWithNibName:@"ProfileCell" bundle:nil];
}

// ...

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ProfileIdentifier";

    NSUInteger row = [indexPath row];
    UIProfileCell *cell = (UIProfileCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil) cell = [[UINib instantiateWithOwner:self options:nil] objectAtIndex:0];

    cell.labelName.text = [name objectAtIndex:row];
    cell.labelInfo.text = [info objectAtIndex:row];

    NSLog(@"Row: %d", row);

    return cell;
} 
```

* * *

我假设`UIProfileCell`是继承自 的类`UITableViewCell`，也许您正在为自定义单元格视图使用另一个名称，在这种情况下，您应该在`-tableView:cellForRowAtIndexPath:`方法中设置正确的名称，而不是我的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:56:57.073

整个缓存机制设置错误。

这里的相关代码：

```
[[NSBundle mainBundle] loadNibNamed:@"ProfileCell" owner:self options:nil];
cell = profileCell; // profile cell is most likely nil here, you set cell to nil?
self.profileCell = nil; // if profile cell wasn't nil, it will surely be nil next pass. 
```

我敢打赌，如果您在其中记录初始化代码，`-tableView:cellForRowAtIndexPath:`您会看到每个单元都被重新创建而不是从缓存中返回。在您的情况下，对于正在显示的第一个单元格，初始化应该只发生一次。对于每个其他单元格，应使用该 `-dequeueReusableCellWithIdentifier:`方法从缓存中检索设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:28:48.473

没关系，我想出了一个解决方法：

我为每个标签设置了一个标签。然后像这样编辑代码：

```
//labelName.text = [name objectAtIndex:row];
//labelInffo.text = [info objectAtIndex:row]; 
```

替换为：

```
UILabel *label;
label = (UILabel *)[cell viewWithTag:1];
label.text = [name objectAtIndex:row];
label = (UILabel *)[cell viewWithTag:2];
label.text = [info objectAtIndex:row]; 
```

希望这可以帮助任何决定通过数组修改标签的人：x

编辑：我不确定为什么设置标签有效，但我原来的方法仍然会改变标签。有人可以解释吗？

# python - 将多项式与 numpy.convolve 相乘返回错误结果

> ID：12128646
> 
> 赞同：2
> 
> 时间：2012-08-26T08:19:36.600
> 
> 标签：python, numpy, polynomial-math, multiplication

我正在尝试使用该`numpy.convolve`函数将两个多项式相乘。我认为这真的很容易，但我发现它并不总是返回正确的产品。

乘法的实现非常简单：

```
def __mul__(self, other):
    new = ModPolynomial(self._mod_r, self._mod_n)
    try:
         new_coefs = np.convolve(self._coefs, other._coefs)
         new_coefs %= self._mod_n                # coefficients in Z/nZ
         new._coefs = new_coefs.tolist()
         new._degree = self._finddegree(new._coefs)
    except AttributeError:
         new._coefs = [(c * other) % self._mod_n for c in self._coefs]
         new._degree = self._finddegree(new._coefs)
    new._mod()       #the polynomial mod x^r-1
    return new 
```

给出错误结果的示例：

```
>>> N = 5915587277
>>> r = 1091
>>> pol = polynomials.ModPolynomial(r,N)
>>> pol += 1
>>> r_minus_1 = (pol**(r-1)).coefficients
>>> # (x+1)^r = (x+1)^(r-1) * (x+1) = (x+1)^(r-1) * x + (x+1)^(r-1) * 1
... shifted = [r_minus_1[-1]] + list(r_minus_1[:-1])   #(x+1)^(r-1) * x mod x^r-1
>>> res = [(a+b)%N for a,b in zip(shifted, r_minus_1)]
>>> tuple(res) == tuple((pol**r).coefficients)
False 
```

取幂可能不是问题，因为我使用完全相同的算法和其他多项式实现，它给出了正确的结果。“完全相同的算法”是指使用的多项式类`numpy.convolve`是另一个类的子类，仅重新实现`__mul__`，并且`_mod()`[在`_mod()`我简单地调用另`_mod()`一种方法，然后删除大于多项式次数的项的 0 系数]。

另一个失败的例子：

```
>>> pol = polynomials.ModPolynomial(r, N)   #r,N same as before
>>> pol += 1
>>> (pol**96).coefficients
(1, 96, 4560, 142880, 3321960, 61124064, 927048304, 88017926, 2458096246, 1029657217, 4817106694, 4856395617, 384842111, 2941717277, 5186464497, 5873440931, 526082533, 39852453, 1160839201, 1963430115, 3122515485, 3694777161, 1571327669, 5827174319, 2249616721, 501768628, 5713942687, 1107927924, 3954439741, 1346794697, 4091850467, 2576431255, 94278252, 5838836826, 3146740571, 1898930862, 4578131646, 1668290724, 2073150016, 2424971880, 1386950302, 1658296694, 5652662386, 1467437114, 2496056685, 1276577534, 4774523858, 5138784090, 4607975862, 5138784090, 4774523858, 1276577534, 2496056685, 1467437114, 5652662386, 1658296694, 1386950302, 2424971880, 2073150016, 1668290724, 4578131646, 1898930862, 3146740571, 5838836826, 94278252, 2576431255, 4091850467, 1346794697, 3954439741, 1107927924, 5713942687, 501768628, 2249616721, 5827174319, 1571327669, 3694777161, 3122515485, 1963430115, 1160839201, 39852453, 526082533, 5873440931, 5186464497, 2941717277, 384842111, 4856395617, 4817106694, 1029657217, 2458096246, 88017926, 927048304, 61124064, 3321960, 142880, 4560, 96, 1)
#the correct result[taken from wolframalpha]:
(1, 96, 4560, 142880, 3321960, 61124064, 927048304, 88017926, 2458096246, 1029657217, 4817106694, 4856395617, 384842111, 2941717277, 5186464497, 5873440931, 526082533, 39852453, 1160839201L, 1963430115L, 3122515485L, 3694777161L, 1571327669L, 5827174319L, 1209974072L, 5377713256L, 4674300038L, 68285275L, 2914797092L, 307152048L, 3052207818L, 1536788606L, 4970222880L, 4799194177L, 2107097922L, 859288213L, 4578131646L, 1668290724L, 1033507367L, 1385329231L, 347307653L, 618654045L, 4613019737L, 427794465L, 1456414036L, 236934885L, 3734881209L, 4099141441L, 3568333213L, 4099141441L, 3734881209L, 236934885L, 1456414036L, 427794465L, 4613019737L, 618654045L, 347307653L, 1385329231L, 1033507367L, 1668290724L, 4578131646L, 859288213L, 2107097922L, 4799194177L, 4970222880L, 1536788606L, 3052207818L, 307152048L, 2914797092L, 68285275L, 4674300038L, 5377713256L, 1209974072L, 5827174319L, 1571327669L, 3694777161L, 3122515485L, 1963430115L, 1160839201L, 39852453, 526082533, 5873440931, 5186464497, 2941717277, 384842111, 4856395617, 4817106694, 1029657217, 2458096246, 88017926, 927048304, 61124064, 3321960, 142880, 4560, 96, 1) 
```

错误的结果只出现在“大数字”中，而且指数应该是“大”[我找不到指数 < 96 的例子]。

我不知道为什么会这样。我正在使用`numpy.convolve`它，因为它是在另一个我的问题中提出的，我只是想将我的方法的速度与 numpy 方法进行比较。也许我`numpy.convolve`以错误的方式使用？

稍后我会尝试做更多的调试，试图了解究竟在哪里以及什么时候出了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T10:48:23.470

[*NumPy 是一个在固定大小的数值数据类型*](http://docs.scipy.org/doc/numpy/user/basics.types.html)数组上实现快速操作的库。它不实现任意精度算术。所以你在这里看到的是整数溢出：NumPy 将你的系数表示为 64 位整数，当它们足够大时，它们会在`numpy.convolve`.

```
>>> import numpy
>>> a = numpy.convolve([1,1], [1,1])
>>> type(a[0])
<type 'numpy.int64'> 
```

如果您需要对任意精度整数进行算术运算，则需要实现自己的卷积，以便它可以使用 Python 的任意精度整数。例如，

```
def convolve(a, b):
    """
    Generate the discrete, linear convolution of two one-dimensional sequences.
    """
    return [sum(a[j] * b[i - j] for j in range(i + 1)
                if j < len(a) and i - j < len(b))
            for i in range(len(a) + len(b) - 1)]

>>> a = [1,1]
>>> for i in range(95): a = convolve(a, [1,1])
... 
>>> from math import factorial as f
>>> all(a[i] == f(96) / f(i) / f(96 - i) for i in range(97))
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-20T17:33:32.543

如果在执行*重复*卷积时速度是一个问题`dtype=object`（如您的情况），您应该考虑使用[karatsuba](https://github.com/baruchel/karatsuba)模块而不是`numpy.convolve`. 它旨在使用高级对象（例如 with `dtype=object`），但依赖于计划来预先计算卷积。它对于单个卷积是无用的，但如果需要许多类似的卷积则非常有效。

# sql-server - what is the meaning of srvid in master.dbo.sysservers?

> ID：12128647
> 
> 赞同：0
> 
> 时间：2012-08-26T08:19:59.380
> 
> 标签：sql-server

I working in a shared project

In ASCData database, i have a procedure, but I do not understand the meaning of it

```
set @srvid = -1
SELECT @srvid = srvid FROM master.dbo.sysservers where srvname = 'ASCData_Log'
if(@srvid <> -1)
begin
-- Some insert and select query here
end 
```

Please explain help me

why have to compare @srvid ? and where is master.dbo.sysservers ?

ASCData_Log is one of database of this project.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:23:03.603

i don't know ASCData, but i think, it does the following:

1.  initialize the variable srvid with "-1" (wich will respresent an error)
2.  query the meta-data of the database-server for the server (and the server-id) of the maschine, which holds the ASCData_Log (a log-database)
3.  set the server-id to the variable "srvid"
4.  begin the procedure if "srvid" not equals "-1" (no error and a server is found)

should be the most logical interpretation...

# c# - LINQ Select()/Any() 行为不端？

> ID：12128651
> 
> 赞同：1
> 
> 时间：2012-08-26T08:20:19.953
> 
> 标签：c#, linq

我有以下代码

```
return lStoredRecords.Select(u => 
                                 u.sCardId == sCardId && 
                                 u.rtMode == eRecordType &&
                                 u.dtTime >= DateTime.Now.AddMinutes(-15.0)).Any(); 
```

但由于某种原因，它总是返回`True`，

`lStoredRecords`包含一条不满足上述条件的记录`dtTime` **-**所以我期待上面的代码行返回`False`

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T08:22:47.337

首先，不清楚你为什么要使用`Select`。我希望您只使用`Any`它自己，将谓词指定为参数。

其次，如果`lStoredRecords`有任何记录，这将*始终*返回`true`-[`Any()`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)没有谓词只返回输入序列中是否有任何记录，并且`Select`只是将输入值投影到输出值 - 它根本不做任何过滤. 如果您希望进行过滤，则应该使用[`Where`](http://msdn.microsoft.com/en-us/library/bb534803).

第三，首先不清楚你想要什么`Any`。从你的问题：

> `lStoredRecords`包含一条`dtTime`不满足上述条件的记录 - 所以我期待上面的代码行返回`False`

如果您希望它`false`在任何记录不满足条件时返回，您几乎肯定应该使用它`All`- 您想检查*所有*输入值是否符合您的条件。

所以基本上你想要：

```
return lStoredRecords.All(u => u.sCardId == sCardId && 
                               u.rtMode == eRecordType &&
                               u.dtTime >= DateTime.Now.AddMinutes(-15.0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T08:22:37.973

您当前的代码项目`lStoredRecords`到`bool`s 列表。由于这个列表确实有元素（也许一些`true`和一些`false`- 没关系），`Any()`返回 true。

改用：

```
return lStoredRecords.Any(u => 
                          u.sCardId == sCardId && 
                          u.rtMode == eRecordType &&
                          u.dtTime >= DateTime.Now.AddMinutes(-15.0)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T08:22:44.247

我认为您正在尝试这样做...

```
return lStoredRecords.Any(u => 
                             u.sCardId == sCardId && 
                             u.rtMode == eRecordType &&
                             u.dtTime >= DateTime.Now.AddMinutes(-15.0)); 
```

阅读做什么`Select`和`Any`做什么（`Where`在这里也很重要）。

`Select`您编写的表达式将转换`lStoredRecords`为`IEnumerable<bool>`，然后检查它是否有任何元素。它将被填充`true`或`false`根据你的`Select`表达。我认为你期望`Select`做`Where`实际做的事情。但更好的选择是将表达式放入`Any`. 这将防止不必要的操作。

# java - Java - Splitting String Array with a Comma

> ID：12128652
> 
> 赞同：1
> 
> 时间：2012-08-26T08:20:28.893
> 
> 标签：java, arrays, split

I'm looking to split a sentence into an array of words separated by a comma in Java.

That is, I want a sentence like:

> "The dog jumped"
> 
> "high over the"

to become

> "The,dog,jumped"
> 
> "high,over,the"

I can't seem to get it to pick up the space and insert with a comma using the .split(",") method but that doesn't appear to work, the result is still the original. Ideas? Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T08:21:58.707

The easiest way would be to use [`String#replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29), replacing spaces with `,`:

```
String s = "The dog jumped";
String sWithComma = s.replaceAll(" ", ","); 
```

If you want to allow for cases more complicated than the sample you posted (multiple spaces, tabs etc.), you should use [this other answer](https://stackoverflow.com/a/12128681/829571).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T08:26:22.660

对一个或多个空格使用正则表达式并将其替换为“，”，如下所示-

```
"The dog jumped".replaceAll("\\s+", ",") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-26T08:22:59.240

Many ways to do this. I would look at using strtok for a task like this, or maybe the apache commons StringUtils package, or replaceAll. I won't give you the exact code,because this smells like an assignment :)

# desktop - Virtualizing desktop environment for other guests

> ID：12128656
> 
> 赞同：0
> 
> 时间：2012-08-26T08:21:46.167
> 
> 标签：desktop, virtualization

I am using virtual box. Consider I am having 4 guest OS (Linux) mounted over the Host(Win 7 )

I am trying to virtualize the desktop environment in one of the guest OS and allow the other 3 Guests to access that desktop.

Pls help me with the method to do that. What all will i require to do this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:57:57.310

假设您已经设置了云服务器，这可能就像确保所有相关人员都拥有正确的密码和登录信息并确保您授予“所有用户”访问权限一样简单。确保 Linux 用户具有管理员权限，您应该没有问题。不同版本windows的用户无法访问同一台服务器的问题一直存在，但假设您的Windows用户都在同一个操作系统上，应该没有这样的问题。

[http://content.dell.com/us/en/enterprise/virtualization](http://content.dell.com/us/en/enterprise/virtualization)

# wcf-rest - WCF Rest Service With Multiple Contracts

> ID：12128664
> 
> 赞同：1
> 
> 时间：2012-08-26T08:22:49.253
> 
> 标签：wcf-rest

I am developing a WCF Rest Service that will implement multiple contracts (at current 2). I deployed the solution to IIS under the default web site. On accessing the uri:

```
http://localhost/wcfrestsample/myservices/service1/customers: 
```

I get following invalid operation exception:

> Service 'MyService' implements multiple ServiceContract types, and no endpoints are defined in the configuration file. WebServiceHost can set up default endpoints, but only if the service implements only a single ServiceContract. Either change the service to only implement a single ServiceContract, or else define endpoints for the service explicitly in the configuration file.

Below is the code details:

```
namespace WcfRestServiceSample
{
    //Data Items...

    public class Customer
    {
        public String Address { get; set; }
        public String Name { get; set; }
    }

    public class Employee
    {
        public String EmployeeNumber { get; set; }
        public DateTime JoiningDate { get; set; }
        public Double Salary { get; set; }
    }

    //Service Contracts...

    [ServiceContract]
    public interface IMyService1
    {
        [WebGet(UriTemplate = "customers")]
        IEnumerable<Customer> GetCustomers();
    }

    [ServiceContract]
    public interface IMyService2
    {
        [WebGet(UriTemplate = "employees")]
        IEnumerable<Employee> GetEmployees();
    }

    //Service Implementation...

    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
    public class MyService : IMyService1, IMyService2
    {
        public IEnumerable<Customer> GetCustomers()
        {
            return new List<Customer>
            {
                new Customer{ Address = "customer 1 address", Name = "Customer 1" },
                new Customer{ Address = "customer 2 address", Name = "Customer 2" }
            };
        }

        public IEnumerable<Employee> GetEmployees()
        {
            return new List<Employee>
            {
                new Employee{ EmployeeNumber = "Employee 1", JoiningDate = new DateTime(1995, 5, 5), Salary = 5555.55 },
                new Employee{ EmployeeNumber = "Employee 2", JoiningDate = new DateTime(1998, 8, 8), Salary = 8888.88 }
            };
        }
    }

    //The Global.asax

    public class Global : HttpApplication
    {
        void Application_Start(object sender, EventArgs e)
        {
            RouteTable.Routes.Add(new ServiceRoute("MyServices", new WebServiceHostFactory(), typeof(MyService)));
        }
    }
} 
```

The contents of the config file are as follows:

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyServiceBehavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="MyServiceBehavior" name="MyService">
        <endpoint address="service1" binding="webHttpBinding" contract="WcfRestServiceSample.IMyService1" />
        <endpoint address="service2" binding="webHttpBinding" contract="WcfRestServiceSample.IMyService2" />
      </service>
    </services>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <standardEndpoints>
      <webHttpEndpoint>
        <!-- 
            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint 
            via the attributes on the <standardEndpoint> element below
        -->
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add 
        name="UrlRoutingModule" 
        type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
  </system.webServer> 
```

**Am I missing something?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T16:40:34.673

在处理多个合约时，您根本不能使用基地址。即使端点的相对地址会为每个端点创建唯一的 URI。它像那样愚蠢。尝试在端点中提及整个地址。我认为它会起作用。

即使您的端点像：

```
<endpoint address="http://localhost/wcfrestsample/myservices/service1" binding="webHttpBinding" contract="WcfRestServiceSample.IMyService1" />
<endpoint address="http://localhost/wcfrestsample/myservices/service2" binding="webHttpBinding" contract="WcfRestServiceSample.IMyService2" /> 
```

# javascript - Unable to get value of the property 'split' after ajax call in IE8

> ID：12128669
> 
> 赞同：0
> 
> 时间：2012-08-26T08:23:08.180
> 
> 标签：javascript

I have a array which contains value `02/21/2012 8:00am` and i get this value from custom created sub-json.

So i'm splitting it using

```
var date = jsonData.list[i].mydate.split(" ")[0];
console.log(date);  //shows 02/21/2012 
```

Even though it splits and shows the value , it throws an error "Unable to get value of the property 'split': object is null or undefined" in IE8 but works fine in IE9, FF.

I also tried

```
 <meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

Nothing seem to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:32:52.547

很久以前我有同样的问题。问题是 IE8 不理解`split`方法。解决方案是`split`自己实施。
你可以使用[这个例子](http://blog.stevenlevithan.com/archives/cross-browser-split)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:28:00.373

看起来这`mydate`不是原生字符串，而是更复杂的东西，因此它被视为`split`自己的属性。尝试先将其转换为字符串：

```
var date = jsonData.list[i].mydate.toString().split(" ")[0]; 
```

# c++ - GL_POINT_SPRITE_ARB problems with rendering

> ID：12128671
> 
> 赞同：2
> 
> 时间：2012-08-26T08:23:56.400
> 
> 标签：c++, opengl, particle-system

I'm learning some OpenGL basics and when I decided to make a particle system I met some problems. When I'm trying to render GL_POINT with GL_POINT_SPRITE they do not show on the screen unless they are renderer first. Code I'm using for rendering:

```
glClear(GL_COLOR_BUFFER_BIT);

    glPushMatrix();
    glColor3f(1.0f,1.0f,1.0f);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, t->id());
    glBegin(GL_QUADS);
        glTexCoord2f(0.0f,0.0f);
        glVertex2f(10,10);

        glTexCoord2f(1.0f,0.0f);
        glVertex2f(100,10);

        glTexCoord2f(1.0f,1.0f);
        glVertex2f(100,100);

        glTexCoord2f(0.0f,1.0f);
        glVertex2f(10,100);
    glEnd();
    glDisable(GL_TEXTURE_2D);
    glPopMatrix();

    glPushMatrix();
    glColor3f(1.0f,1.0f,1.0f);
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_POINT_SPRITE_ARB);
    glBindTexture(GL_TEXTURE_2D, t->id());
    glTexEnvf(GL_POINT_SPRITE_ARB, GL_COORD_REPLACE_ARB, GL_TRUE);
    glPointSize(32);
    glBegin(GL_POINTS);
    glVertex2f(300,300);
    glEnd();
    glDisable(GL_POINT_SPRITE);
    glDisable(GL_TEXTURE_2D);
    glPopMatrix();

SDL_GL_SwapBuffers(); 
```

This only renders a textured quad but not point. When I change the order (first render point then quad) they both appear on the screen (textured point and textured quad).

Am I doing something wrong here or is this correct behavior?

Some info about my PC migh be helpful - Arch Linux 64bit with AMD Mobility Radeon HD 4550 (Catalyst 12.6 driver)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T22:25:39.940

我今天遇到了这个问题。这似乎为我解决了这个问题：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT|GL_ACCUM_BUFFER_BIT|GL_STENCIL_BUFFER_BIT); 
```

我希望它正在清除执行它的深度缓冲区。我知道这是一个非常古老的问题，但以防万一其他人偶然发现同样的问题......

# java - Vim：转到下一个方法的开头/结尾

> ID：12128678
> 
> 赞同：35
> 
> 时间：2012-08-26T08:25:11.010
> 
> 标签：java, c++, vim, methods

Vim 中是否有允许将光标移动到下一个方法的开头/结尾的本机功能？我已经知道`[[`, `]]`, `[]`, 和`][`，但是这些并没有减少工作，因为它们只适用于零列中的大括号。因此，它们在导航 C++ 代码中几乎没有用处。Vim 中是否已经内置了这样的命令？如果没有，您会推荐一个实现它的插件吗？

谢谢你的帮助！

编辑：`[{`并且`}]`不会一直工作，因为你必须在块内`{}`（而不是在该块内更深的范围内）才能在右边`{`或`}`之后结束。

编辑 2：这是一个代码清单，`[m`朋友们不工作。

```
namespace foo {

#define define_foo         \
    template <class T>     \
    struct foo_traits<X>   \
    {                      \
        using foo = X;     \
    };

template <class T>
struct foo_traits;

define_bar(T*, T*, T*);

template <class T>
struct baz;

template <class T>
struct baz<T&>
{
    static T* apply(T& t) { return &t; }
};

template <class T>
inline T a(T t) { return t; }

} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-26T09:01:48.333

Vim 具有`[m`/`]m`内置“用于 Java 或类似的结构化语言”。

我编写了处理[Vim 函数](http://www.vim.org/scripts/script.php?script_id=4002)、[VBScript](http://www.vim.org/scripts/script.php?script_id=4003)和[批处理文件](http://www.vim.org/scripts/script.php?script_id=4004)等的自定义版本。这些都由我的[CountJump 插件](http://www.vim.org/scripts/script.php?script_id=3130)提供支持，该插件可用于编写基于正则表达式的自定义跳转函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-05-30T07:35:22.017

我花了几个小时来制作这个模式：**`/^\s*\(\i\+\_[ \t\*]\+\)\+\i\+\_s*(\_[^)]*)\_s*{`**，它对我很有用。

**编辑**：更好的模式（版本 2）：**`/\(\(if\|for\|while\|switch\|catch\)\_s*\)\@64<!(\_[^)]*)\_[^;{}()]*\zs{`**

**看这里的效果：** [![在此处输入图像描述](../Images/bd262dfa208d170c3f7fa915e95c3ebc.png)](https://i.stack.imgur.com/guIeB.png) [![在此处输入图像描述](../Images/88a2fc8068b9193020e4485f9a267279.png)](https://i.stack.imgur.com/mLgbO.png)

您可以在 .vimrc中映射一些方便的**绑定，例如：**

```
" jump to the previous function
nnoremap <silent> [f :call search('^\s*\(\i\+\_[ \t\*]\+\)\+\i\+\_s*(\_[^)]*)\_s*{', "bw")<CR>
" jump to the next function
nnoremap <silent> ]f :call search('^\s*\(\i\+\_[ \t\*]\+\)\+\i\+\_s*(\_[^)]*)\_s*{', "w")<CR> 
```

**编辑**：更好的模式（版本 2）：

```
" jump to the previous function
nnoremap <silent> [f :call
\ search('\(\(if\\|for\\|while\\|switch\\|catch\)\_s*\)\@64<!(\_[^)]*)\_[^;{}()]*\zs{', "bw")<CR>
" jump to the next function
nnoremap <silent> ]f :call
\ search('\(\(if\\|for\\|while\\|switch\\|catch\)\_s*\)\@64<!(\_[^)]*)\_[^;{}()]*\zs{', "w")<CR> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T09:13:01.860

看起来像一个副本：[Vim [m motion with c#](https://stackoverflow.com/questions/6849679/vim-m-motion-with-c-sharp)

例如，您可以尝试这个肮脏的把戏：`9]}`. 它只是从当前位置跳到第 9 个`}`（如果你不是太嵌套，应该可以工作......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-20T00:04:20.680

如果您使用 taglist，我添加了一个功能。如果 taglist 支持该语言，您可以使用 Ctrl-up 和 Ctrl-down 从一个标签跳转到另一个标签。

这里：[https ://github.com/man9ourah/taglist](https://github.com/man9ourah/taglist)

这给你的`.vimrc`。

```
nmap <silent> <c-up> <plug>(TlistJumpTagUp)     " Map ctrl-up to move one tag up
nmap <silent> <c-down> <plug>(TlistJumpTagDown) " Map ctrl-down to move one tag down 
```

# slickgrid - SlickGrid 什么是数据视图？

> ID：12128680
> 
> 赞同：18
> 
> 时间：2012-08-26T08:26:15.937
> 
> 标签：slickgrid

我开始使用 SlickGrid，我对数据视图和网格（启用编辑）之间的区别感到困惑。我没有在文档中找到关于数据视图的一些讨论，尽管那里已经提到过。

请赐教。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-28T07:43:42.923

简单来说，只需要考虑三层：

```
 Grid
  ----
DataView
  ----
  Data 
```

在底部，您有原始数据。这只是一个普通的旧数组。数组中的每个项目代表一行数据（在网格中显示为一行）。

DataView 读取数据数组并通过公开几个标准方法使其可用于网格。这样，当网格想要获取用于显示的数据时，它只是通过一种标准方法与数据视图对话。

Grid 是显示组件。它的唯一职责是呈现在屏幕上显示所需输出所需的 HTML 代码。

网格从不直接访问数据。它只与数据视图对话。这允许数据视图在将数据返回到网格时执行技巧，例如提供用于表示组标题的“幻像”行。

如果您有兴趣，下面的示例只是您可以想出的最简单的示例，它使用带有 SlickGrid 的数据视图。

```
var data = [
  { title: "Primer",       rating: "A" },
  { title: "Matrix",       rating: "B" },
  { title: "Transformers", rating: "C" },
];
var columns = [
  { id: "title",  name: "Title",  field: "title" },
  { id: "rating", name: "Rating", field: "rating" }
];
var options = {
  enableColumnReorder: false  // ... whatever grid options you need
};

var dataView = new Slick.Data.DataView();
var grid = new Slick.Grid("#myGrid", dataView, columns, options);

// wire up model events to drive the grid
dataView.onRowCountChanged.subscribe(function (e, args) {
  grid.updateRowCount();
  grid.render();
});
dataView.onRowsChanged.subscribe(function (e, args) {
  grid.invalidateRows(args.rows);
  grid.render();
});

// Feed the data into the dataview
dataView.setItems(data); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-28T02:25:58.377

DataView 是数据源之上的抽象。如果客户端上的所有数据都可用（即在 Javascript 数组中），DataView 可以提供许多网格本身没有的有用功能。（网格缺乏这些特性的事实是设计使然 - SlickGrid 试图保持核心精简和简单，同时鼓励其 API 中的模块化设计和数据抽象。）

DataView 的工作原理是接收您的数据并充当数据提供者，您可以将其传递给 SlickGrid，而不是原始数据数组。例如，如果您将 DataView 分组数据，它会使网格认为“组”行只是常规数据项，因此网格不需要知道它们。DataView 告诉网格这些项目具有自定义显示和行为，并提供两者的实现。然后连接 DataView 的 onRowCountChanged 和 onRowsChanged 事件以更新网格，瞧。

以下是 DataView 添加到网格的功能的粗略列表：

*   分页。
*   排序。
*   搜索。
*   与总数分组。
*   展开/折叠组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:40:46.287

DataView 允许在不修改数据或网格的情况下对数据进行排序和过滤。您可以将其视为网格顶部的叠加层，提供与视图相关的功能 - 在某些情况下增强了这些功能。

希望有帮助！

# .net - 每个请求模式的实体框架

> ID：12128684
> 
> 赞同：2
> 
> 时间：2012-08-26T08:26:44.787
> 
> 标签：.net, entity-framework, repository-pattern, unit-of-work

我一直在尝试查找每个请求模式的 EF 示例。

我目前为每笔交易创建一个工作单元，但是当我在网站上这样做时，根据每个请求扩展它会更方便。

我已经使用 global.asax 来确定请求是否来自页面和/或回发，所以我需要做的就是将我的对象添加到 context.items。

迄今为止我发现的示例显示了上下文本身的包装器，但在工作单元中还有其他方法也是需要的，例如提交/保存和处置。

我不确定在整个场景中引入工作单元的最佳位置 - 我是否在每次更改后简单地创建一个新的工作单元，注入上下文？

另外，鉴于请求会自然终止，我是否需要在这种情况下处理上下文？

有人看过一些符合要求的例子或就上述问题提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:31:34.917

> 迄今为止我发现的示例显示了上下文本身的包装器，但在工作单元中还有其他方法也是需要的，例如提交/保存和处置。

还有什么方法？Context 提供了 commit( `SaveChanges`) 和`Dispose`.

> 我不确定在整个场景中引入工作单元的最佳位置 - 我是否在每次更改后简单地创建一个新的工作单元，注入上下文？

你想要工作单元吗？因此，在大多数情况下，每个请求只需要一个，即可将所做的所有更改保存为一个“单元”。在某些情况下，由于某些复杂的业务逻辑必须独立保存更改（并且不能通过多次调用通过相同的上下文简单地保存它们），您可能需要多个，`SaveChanges`但在这种情况下，每个请求的处理上下文将不起作用，您当需要手动启动上下文时，将不得不回到启动上下文 - 就注入而言，这意味着注入上下文工厂而不是上下文实例，其中负责调用工厂以获取上下文实例的组件也负责上下文的处理。

如果每个请求只需要一个上下文，则可以`Application_BeginRequest`在`Application_EndRequest`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:38:44.777

您可能应该为每个请求提供一个上下文。上下文应该放在它的末尾。

在请求期间可能需要使用第二个上下文来实现特殊目的，例如日志记录（您总是希望保存日志项，即使主请求上下文从未用于保存）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T22:54:31.330

您需要处理上下文（即：IDisposable），我建议您使用 DI 容器，将您的工作单元注入其中，并设置每个请求的生命周期。

您可以在请求的生命周期内多次调用 savechanges。那么工作单元带来的便利就消失了，而如果你在请求结束时只调用一次，你可以减少 RTT、延迟等。

# objective-c - AppDelegate 中的 _window ivar

> ID：12128689
> 
> 赞同：1
> 
> 时间：2012-08-26T08:28:41.280
> 
> 标签：objective-c

在 Xcode 中创建了一个空项目，它仅使用窗口对象设置 App Delegate。

虽然 AppDelegate.h 创建了一个`@property`for `window`：

`@property (strong, nonatomic) UIWindow *window;`

`.h`在 ivar或`.m`ivar中都没有提及，`_window`但是`dealloc`显示：

```
- (void)dealloc
{
[_window release];
[super dealloc];
} 
```

所以我的问题是，是否会`@property`自动为属性的关联 ivar 创建一个带有下划线的 ivar？我认为除非您编写类似`@synthesize window=_window`then 属性和 ivars 的名称。但是，在中没有这样的（或任何）`@synthesize`声明，`.m`那么`_window`来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:01:09.787

LLVM 4.0 是 Xcode 4.4 的默认编译器，它提供了一个名为*auto-synthesis*的新功能，它将自动合成声明的属性（除非它们在协议中声明）。除了合成 getter 和 setter（如果需要）实现之外，自动合成还将合成一个带有下划线前缀的实例变量。所以给出以下声明......

```
@property (strong, nonatomic) NSString *foo; 
```

...编译器将合成一个名为的实例变量`_foo`以及访问.`foo``setFoo:``_foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:30:58.723

不，对应的 ivar 是由`@property`/`@synthesize`机制自动创建的。编译器会自动创建默认命名约定的 ivar（ivar 的名称等于属性名称），你看不到它，但它存在，你可以引用它。

随着声明：

```
@synthesize window=_window; 
```

您正在合成一个 ivar 名称等于默认值的属性。

您可以通过以下方式为 ivar 指定与默认值不同的另一个名称：

```
@synthesize window=iVarWindow; 
```

**笔记**

在第一种情况下，您为 ivar 指定一个名称，前面带有下划线（在默认实现中，ivar 的名称将等于属性的名称），而在第二种情况下，您指定一个自定义名称.

如果你不合成属性（`@synthesize`在实现文件中），编译器不会自动生成访问器方法，在这种情况下你必须自己编写访问器方法，否则你将没有它们！无论如何， ivar 是由创建的`@property`，所以即使你没有`@synthesize`ivar，你也有与属性相关的 ivar，*否则你怎么能在没有 ivar 的情况下编写自己的访问器方法实现？*:-)

* * *

***更新***

使用新版本的 Xcode 4.4，即使没有属性的 @synthesize 语句，编译器也会自动生成访问器方法。

# python - 在 IPython 中使用 curses。我该如何改进呢？

> ID：12128691
> 
> 赞同：6
> 
> 时间：2012-08-26T08:29:18.210
> 
> 标签：python, ipython, ncurses

我找到了一种交互式处理curses 的方法，同时还能享受IPython 的大部分好处。它可以工作，但有一些限制，但没有我想要的那么好。

当然，最初的问题是我希望能够使用我的交互式 Python 会话，同时让它控制终端屏幕，使用 curses (ncurses) 模块（或[urwid](http://excess.org/urwid/)，例如）。一种解决方案是编写一个简单的 TCP 服务器，它带有一个简单的事件循环，该循环评估它从套接字读取的每个字符串，并发送回表示并返回结果的序列化字符串。如此处所述：[SO：有没有一种方法可以交互式地对 Python curses Application 进行编程](https://stackoverflow.com/questions/7209285/is-there-a-way-to-interactively-program-a-python-curses-application)）。

这是一个更简单的技巧（假设您安装了 IPython）。

```
 #!/usr/bin/python 
    #!/usr/bin/env python 
    from IPython import embed_kernel
    import curses

    def interact_with_curses(screen):
        '''set global stdscr variable and run embedded IPython kernel
           suitable to be called by curses.wrapper()
        '''
        global stdscr
        stdscr = screen
        embed_kernel()

    if __name__ == '__main__':
        curses.wrapper(interact_with_curses) 
```

（稍微调整一下以使 SO 的语法突出显示快乐）。

运行这将导致输出大致如下：

```
 [IPKernelApp] To connect another client to this kernel, use:
            [IPKernelApp] --existing kernel-2869.json 
```

并切换到另一个窗口或屏幕会话，您可以运行：

```
ipython console --existing kernel-2869.json 
```

连接到该过程并使用它。

这已经足够好了。然后，您可以调用诸如`stdscr.refresh()`. 使用你的 curses/window 和 pad 对象，调用`dir()`它们来探索它们的功能，并且通常使用代码就像你在一个普通的 IPython 会话中一样，它恰好正在更新另一个终端的屏幕并从中读取（通过诅咒输入函数）。

这种方法的问题和问题：

*   要退出似乎我必须从 IPython 控制台运行 quit() ，这不会以正常方式退出解释器。它似乎不允许`curses.wrapper()`重置终端，并且各种尝试调用`.endwin()`, `.resetty()`（当然在执行 a`.savetty()`之后），`.reset_shell_mode()`(and `.reset_prog_mode()`) 等等都失败了。我已经尝试在调用之后在 main 中调用它们，`curses.wrapper()`并且我已经尝试将它们注册为`atexit`
    *   **我如何干净地退出这样的会话？**
*   [Tab] 完成不起作用
    *   **如何让 IPython 的 [Tab] 通过 IPython 控制台会话完全工作到这些嵌入式内核之一？**
*   调用 IPython`embed_kernel()`函数会将套接字信息打印到 curses 屏幕，此时该屏幕已经被初始化`curses.wrapper()`。这很难看；另外，如果想做更有趣的工作，在curses中和调用`embed_kernel()`函数之前，我看不到该函数打印到stdout或stderr的文本。
    *   **如何`embed_kernel()`保持沉默并强制它通过其他机制注册连接详细信息？我可以给它我自己的套接字名称/使用路径吗？**

我相信我会想到其他问题，但我希望其他人会发现这个技巧很有用，并且会发现我想涉足 Python 诅咒编码时可以使用的其他技巧。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T04:56:35.730

事实证明，我们现在可以以一种相当自然的方式使用 IPython 以交互方式处理 curses。

从一个终端只需键入：

```
ipython kernel 
```

这将打印如下一行：

```
[IPKernelApp] To connect another client to this kernel, use:
[IPKernelApp] --existing kernel-14321.json 
```

从另一个终端/窗口类型：

```
ipython console --existing kernel-14321.json 
```

...您将进入一个看似完全正常的 IPython 会话。唯一的区别是您实际上是在另一个窗口中访问“远程”IPython 内核会话。从那里您将能够使用 curses 函数、查看另一个窗口中的更改、对其输入输入、使用 [Tab]-completion 等等。

请注意，[Ctrl]-[D] 将提供退出 IPython**控制台**（客户端），同时`quit()`将关闭 IPython**内核**（远程窗口 --- 服务器）。

但是，总的来说，这个模型比我去年在我的问题中描述的更干净、更容易。我不知道是不是新版本的 IPython (0.13.1) 还是简单的无知让我之前的尝试有些笨拙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:41:45.347

我找到了选项卡完成的答案，您可以使用获取 IPython shell 对象`get_ipython()`，然后调用`init_completer()`它：

```
get_ipython().init_completer() 
```

应该可以获取内核并关闭它，退出终端应用程序。但是在文档中爬行到目前为止还没有发现如何。

# javascript - ExtJS 4 奇怪的树加载行为

> ID：12128692
> 
> 赞同：0
> 
> 时间：2012-08-26T08:29:48.030
> 
> 标签：javascript, extjs, extjs4.1

我有一个使用 ajax 商店的树面板。当服务器获取节点的结果时，通常不是即时的（需要几秒钟）。

我有另一个网格控件，它重新加载根节点（取决于不同的参数）

如果在前一个请求完成之前发送请求，这可能会导致奇怪的行为：

1.  用户在网格上选择某些东西，这会导致树发送请求
2.  在前一个请求完成之前，用户更改了一些导致发送新请求的内容
3.  两个请求完成后扩展节点时树开始出现问题

有没有办法让我在重新加载树之前中止树存储发送的所有待处理请求？

在此先感谢您的帮助！阿米泰。

PS - ExtJS 版本 4.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:01:23.037

将数据添加到树存储是一项棘手的工作。该框架在每次加载或加载数据到树存储时都会做很多事情来保持对齐。例如，尝试将记录添加到已存在于其他地方的树中的树存储中。如果记录的 id 是持久的（意味着从服务器设置），那么一切都会松散。这是因为树店有复杂的机器，可能不适合所有用例。

所以难怪如果两个竞争请求试图将数据加载到树存储中，事情将无法正常工作。可以做什么？

1.  加载蒙版。当树枝展开时，加载掩码应覆盖树以隐藏任何其他控件。这有助于避免并发数据操作。在 4.1.1 中，这实际上适用于 OOTB（之前被破坏）。

2.  如果您允许外部控件影响树，请查看“加载”属性[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-property-loading](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-property-loading)。检查加载应防止其他操作继续进行。如果需要，可以在数据连接上使用“中止”方法来取消挂起的请求。

3.  最后查看数据连接上的 autoAbort 属性：[http](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Connection-cfg-autoAbort) ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Connection-cfg-autoAbort这将杀死所有其他未决请求，可能成为你正在寻找的东西。

# c# - 访问列表 c# 中的对象

> ID：12128701
> 
> 赞同：1
> 
> 时间：2012-08-26T08:31:41.897
> 
> 标签：c#, list, struct

代码是：

```
struct m1
{
    public int a;
    public int b;
}

int main()
{
    List <m1> mList;
    m1.initialize;
    //new. and add some items to it. 
```

现在我想首先尝试访问 mList 中的对象：

```
 for each(m1 it in mList)
    {
        m1.a = 5;
    } 
```

但它失败了。因为在 for each 我在控制台上写了 m1.first().a 之后。它的初始化值不是 5。

然后我尝试了

```
 for (int counter = 0; counter < mList.size(); counter++)
    {
        m1 it = mList[counter];
        it.a = 5;
    } 
```

同样的问题。

然后我尝试了

```
 for (int counter = 0; counter < mList.size(); counter++)
    {
        mList[counter].a = 5;
    } 
```

它甚至没有编译。它给了我一个错误。它说明了不能修改 list.this[int] 的返回值。

然后我尝试了

```
 for (int counter = 0; counter < mList.size(); counter++)
    {
        var m1 it = mList[counter];
        it.a = 5;
    } 
```

它也没有用。我尽我所能以及我在互联网和这个网站上找到的一切。您能否帮助您找到一种方法来访问列表中对象（结构类型）的参数？显然，当列表由对象（来自类）组成时很容易。如果我想从结构的对象中创建一个列表，那就很复杂了。任何帮助都将受到高度欢迎。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T08:39:56.623

问题是您已将*结构*放入列表中。当您从列表中获取它时，这将创建一个副本 - 因此修改它不会有任何好处。鉴于您的评论，您可能对值类型和引用类型在 C# 中的工作方式感到困惑，在这种情况下，我建议您阅读我[关于该主题的文章](http://www.yoda.arachsys.com/csharp/references.html)（或书籍或 MSDN 等）。

您需要获取它，修改副本，然后替换列表中的值：

```
var copy = list[index];
copy.a = 5;
list[index] = copy; 
```

但是，我强烈建议不要首先创建可变值类型，部分原因是它们恰好会导致此类问题。值类型通常应该用于无法就地更改的更多“基本”值。例如，更改“数字 5”或“1 月 1 日上午 10 点”的含义是没有意义的。如果你改变了意义，你就有了一个新的价值——所以强迫它真正*成为*一个新的价值。

目前尚不清楚（由于缺乏上下文）您是否应该创建一个不可变的值类型并将其替换在列表中，或者创建一个可变的引用类型（一个类）。甚至可能是不可变的引用类型，因为这通常有助于提高可读性。

我还建议不要使用公共字段 -[改用属性](http://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx)，将实现细节与类型的 API 分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T08:42:57.343

试试这个：

```
m1 temp ;
for (int counter = 0; counter < mList.size(); counter++)
    {
        temp = mList[counter];
        temp.a = 5;
        mList[counter] = temp
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T09:00:18.320

如果您有兴趣在不使用临时变量的情况下使用 struct：使用 struct 集合：

```
 m1[] mList = new m1[100];
            //initialize 100 items

            for (int i = 0; i < 100; i++)
            {
                mList[i].a = 5;
            } 
```

# c++ - 这是否赎回了线程安全的双重检查锁定模式？

> ID：12128706
> 
> 赞同：2
> 
> 时间：2012-08-26T08:32:50.690
> 
> 标签：c++, multithreading, singleton, double-checked-locking

原始[双重检查锁定](https://en.wikipedia.org/wiki/Double-checked_locking)模式的问题已得到充分证明：[C++ 和双重检查锁定的风险](http://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf)。我经常看到这个话题出现在关于 SO 的问题中。

我想出了一个版本，在我看来，它似乎解决了原始模式的竞争条件问题，但你觉得还可以吗？

在下面的代码中，我假设 LOCK 是正确实现的互斥锁类型，它会在锁定/解锁时导致内存屏障，并且我不会尝试处理实例的释放，因为这不是模式的一部分。

我知道做单例的其他可能方法，但这不是我要的。我特别询问模式 - 是否通过在互斥锁之外进行分配来解决竞争条件？

```
template <typename T, typename LOCK>
class Singleton
{
private:
    static T * instance_;
    static LOCK mutex;

    // private - inaccessible
    Singleton();
    Singleton(const Singleton &);
    Singleton & operator=(const Singleton &);

public:
    static T * get_instance()
    {
        if (instance_ == NULL)
        {
            T * temp = new T;
            mutex.lock();
            if (instance_ == NULL)
                instance = temp;
            else
                delete temp;
            mutex.unlock();
        }
        return instance_;
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:44:59.053

不，这不安全。存在竞争条件`instance_`（一个线程可能正在读取它（`if (instance_ == NULL)`），而另一个线程正在写入它（`instance = temp;`）），因此此代码具有未定义的行为。

您在询问由锁创建的单个内存围栏是否足够。从 C++11 的角度来看，它不是。从非 C++11 的角度来看，我不能肯定地说，但是依靠非原子和非互斥类型进行同步似乎不太可能工作（在 C++11 之前的世界中，互斥锁和原子变量只能通过编译器和处理器特定的 hack 来工作，依靠它们来做任何比它们的裸规范更多的事情似乎是愚蠢的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:31:40.443

正如在别处提到的那样，问题在于对 的访问存在数据竞争`instance_`：第一个 if 语句读取该值，而后一个赋值语句`instance_`写入该变量。由于这两个操作之间没有同步，行为是未定义的。但是如果你有 C++11，那么有一个简单的解决方案。更改声明

```
static T * instance_; 
```

到

```
static std::atomic<T *> instance_; 
```

现在所有的访问`instance_`都是原子的，保证不撕裂并提供同步。

# php - php glob 与 scandir

> ID：12128708
> 
> 赞同：2
> 
> 时间：2012-08-26T08:33:02.810
> 
> 标签：php, function, unix, scandir

我遇到了 php`glob`函数的一个特性，想知道到底发生了什么。

```
<?php
$paths = glob('../test/*');
echo 'count = ' . count($paths) .'<br/>';
echo 'paths[0] = ' . $paths[0] .'<br/>';
echo 'scandir count = ' . count (scandir ('../test') );
?> 
```

测试目录是空的，我得到了结果

```
count = 1
paths[0] = 
scandir count = 2 
```

我理解 2的`scandir`计数（`.`并且`..`也被计算在内）。
但我希望计数为`$paths`0，而不是 1。
为什么，如果它是 1，`$paths[0]`没有价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T11:47:40.300

发生的事情是“glob”返回了错误。这给出了您所看到的输出。

```
count = 1
paths[0] = 
```

阅读一份报告 ( [http://drupal.org/node/1157100](http://drupal.org/node/1157100) ) 表明`glob()`如果您无法阅读`../`父目录，即使您可以阅读，也可能会失败`../test`。我认为`scandir()`没有这个限制，所以它成功了。

这种情况下的解决方案：也授予自己对 ../ 目录的权限。

# javascript - jquery可排序的值

> ID：12128709
> 
> 赞同：0
> 
> 时间：2012-08-26T08:33:07.247
> 
> 标签：javascript, jquery, html

我有一个列表，其中每一个都有一个价值。我想在整理出来后将隐藏的值发送到一些输入

可排序的工作正常，但我无法在可排序的东西之后（和之前）获得值..

这是我的代码：

```
<input type="hidden" name="op" id="op" value="" />
<div class="wpr">
    <div class="wprCntnt">
        <ul id="sortable">
            <li class="ui-state-default" id="1" value="1" >Item 1</li>
            <li class="ui-state-default" id="2" value="2" >Item 2</li>
            <li class="ui-state-default"id="3" value="3" >Item 3</li>
            <li class="ui-state-default"id="4" value="4" >Item 4</li>
            <li class="ui-state-default"id="5" value="5" >Item 5</li>
            <li class="ui-state-default"id="6" value="6" >Item 6</li>
            <li class="ui-state-default"id="7" value="7" >Item 7</li>
        </ul>
         <input type="submit" value="submit" onclick="sayvalue()" />
    </div>       
</div>

$(function () {
    var op = $("#op");
    var lengthi = $(".ui-state-default").length;
    var valueSchtick = "";

    for (var i = 0; i < $(".ui-state-default").length; i++) {

        valueSchtick += op.val() + "," + $('.ui-state-default').eq(i).val();

        //        op.val(op.val() + ',' + $('.ui-state-default').attr('id'));
        //  op.val() = valueSchtick;
    }

    //   $("#op").val() = valueSchtick

    var sortableLinks = $("#sortable");
    sortableLinks.sortable({
        placeholder: "ui-state-highlight1"
    });

    var linkOrderData = $($("#sortable")).sortable("serialize");

    $("#sortable").disableSelection();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:24:23.323

我希望我理解你是正确的：

```
$(function () {
    var linkOrderData;
    var op = $("#op");
    var sortableLinks = $("#sortable");
    var setValues = function(){

        linkOrderData = sortableLinks.sortable("toArray");
        var values = new Array();
        $.each(linkOrderData, function(index, value){
            values.push($('#'+value).val());
        });
        values = values.toString();
        op.val(values);
    }

    sortableLinks.sortable({
        placeholder: "ui-state-highlight1",
        update: function(event, ui) {
            setValues();
        }
    });

    setValues();
    sortableLinks.disableSelection();
});​ 
```

检查[JSFiddle](http://jsfiddle.net/EYgxE/1/)

# java - 如何计算处理中两个因变量之间的距离？

> ID：12128711
> 
> 赞同：0
> 
> 时间：2012-08-26T08:33:27.370
> 
> 标签：java, distance, processing, linear-algebra

首先，我画了很多圆圈，它们在轻微移动，因为我在圆圈的中心添加了噪点。这些圆圈是“不可见的”，因为它们与背景颜色相同。

其次，我画了一些结合`ellipse(mouseX,mouseY,random(1,3),random(1,3))`, `rect`,`line`等的图案。由于颜色的原因，图案也是“看不见的”。

第三，这就是问题所在，如果圆圈与图案的距离小于一定量，我想让圆圈出现（改变颜色）。

我如何计算这些**圆圈的中心和图案边界之间的距离？**它们都是**因变量**。

然后我找到了一种思考方式：将**数组中的每个元素与数组中的每个其他元素进行比较成为一个问题** [https://forum.processing.org/topic/constantly-resizing-ellipse-based-on- distance](https://forum.processing.org/topic/constantly-resizing-ellipse-based-on-distance)，但我仍然不知道如何将形状函数修改`ellipse(x,y,radius1,radius2)`为数组。

可能是因为 Processing 中的形状函数封装得很好，不容易破解和使用。我找到了一种计算点到线距离的方法：processing.org/discourse/beta/num_1276644884.html

但是我不明白。请给我任何提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:08:05.467

你的问题主要是关于几何和数学而不是关于编程，但它是这样的：

*   两个圆的边界之间的最小距离：显然是它们的中心的距离，减去它们的半径之和。

*   圆的边界和线段之间的最小距离：查看[this](https://stackoverflow.com/q/849211/507519)、[this](http://nodedangles.wordpress.com/2010/05/16/measuring-distance-from-a-point-to-a-line-segment/)、[this](http://www.allegro.cc/forums/thread/589720)以及任何其他带有术语 的 Google 搜索结果`minimum distance between point and line segment`。再一次，您将不得不减去半径。

*   圆的边界和矩形/多边形等之间的最小距离：每个单独段的所有距离的最小值。

*   圆的边界和直线之间的最小距离：见[这个](http://www.allegro.cc/forums/thread/589720)。

*   圆和椭圆的边界之间的最小距离：搜索“点和椭圆之间的最小距离”。有很多结果，有些比其他的更直接。不要忘记减去圆的半径。

如果所有其他方法都失败了（例如对于任意形状），您可能必须逐点计算距离 - 不是很有效，但通常很有效。

一个重要的问题：您对几何重叠（即由公式定义）还是*像素*重叠感兴趣？根据绘图算法，两个形状的屏幕表示可能会重叠，而在数学上形状本身不会重叠，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T18:50:36.533

[有一个名为PVector](http://processing.org/reference/PVector.html)的处理类可以为您完成很多这项工作。您可以使用继承并创建一个[扩展](http://processing.org/reference/extends.html)Pvector 的新类。

或者您可以获取您的坐标并将它们动态更改为 PVector 以进行计算。

```
println(new PVector(x1, y1).dist(new PVector(x2, y2))); 
```

注意：PVector 也适用于 3d 矢量和坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:44:29.323

在这一点上，您可能应该更多地担心学习编程的基础知识，而不是解决问题背后的数学。事实上，现在让我们把数学问题变得超级简单，这样代码就不会变得太复杂：假设你的图案是正方形，而你只对圆心到 ' 中心的距离感兴趣图案'/正方形。

例如， ellipse() 函数只会做一件事 - 将在屏幕上绘制一个椭圆，但您需要一些东西来跟踪您使用的椭圆的属性（如位置和大小）。

跟踪属性的一种方法是将它们存储在数组中：

```
int numEllipses = 100;
float[] ellipseXValues    = new float[numEllipses];
float[] ellipseYValues    = new float[numEllipses];
float[] ellipseSizeValues = new float[numEllipses];
//etc. 
```

对于每个属性，您将使用一个数组，因为您将拥有多个椭圆“对象”。模式类似。如果您还不熟悉数组，那么以这种方式做事是一个很好的练习。你会注意到你的代码会很快变得很长，但是当你学习时，代码看起来并不重要：它更多的是理解和跟踪你所做的事情（而不是“咬得比咀嚼的多”）。

另一种方法是使用类。类很酷，因为它们允许您封装与您想到的想法相关的属性和功能。例如，您可以创建自己的`Ellipse`类或一个`Pattern`类，该类将包含您要使用的属性（如位置、颜色等），但也可以具有函数（如绘制（）函数，椭圆将在屏幕上呈现自身）方式，但另一个模式）等等。这是一个例子：

```
class Circle{
  float x,y,vx,vy,size;//store position(x,y), velocity(vx,vy) and size
  color clr;           //store color
  Circle(float ax,float ay,float as,color ac){
    x = ax;
    y = ay;
    size = as;
    clr = ac;
    vx = random(-.1,.1);//random velocity
    vy = random(-.1,.1);
  }
  void update(int w,int h){
    x += vx;//update position based on velocity
    y += vy;
    if(x < 0 || x > w) vx *= -1;//check bounds and flip velocity if there's a collision
    if(y < 0 || y > h) vy *= -1;
  }
  void draw(){
    pushStyle();//start isolating drawing commands 
    noStroke();
    fill(clr);
    ellipse(x,y,size,size);
    popStyle();//stop isolating drawing commands 
  }

} 
```

一个类就像一个模板/蓝图——它可以是你想要的任何东西。例如，您可以有一个`Vehicle`类，该类具有一个属性，该属性`numberOfWheels`确定从该类创建的实例/对象的外观：2 人的自行车，4 人的汽车等。类似地，您可以有一个`Pattern`类，它可能具有各种属性/与之相关的变量：条纹/点的数量，颜色列表等。

下面是一个如何使用 Circle 类的基本示例：

```
Circle c;
void setup(){
  size(400,400);
  smooth();
  c = new Circle(200,200,20,color(192));//create a new object from the template/class using the *new* keyword
}
void draw(){
  background(255);

  c.x = mouseX;//access and modify properties of the object
  c.y = mouseY;
  c.size = map(mouseX,0,width,20,200);
  c.clr  = color(map(mouseY,0,height,0,240));

  c.draw();//call a function/method of the object
} 
```

*注意定义/类和对象（用new*实例化）之间的区别。如果您不熟悉类，请查看[Daniel Shiffman](http://www.shiffman.net/)的优秀[对象教程](http://processing.org/learning/objects/)。在处理中，您可以探索**示例 > 基础 > 对象 > 对象**。

（不太重要：我正在使用[map()](http://processing.org/reference/map_.html)函数轻松地将鼠标位置链接到圆的属性，如大小和颜色。）

现在您可以创建自己的类型/类，还可以创建此类对象的数组。Processing 附带一个基本示例：**示例 > 基础 > 数组 > ArrayObjects**

以下是我们如何在两个单独的数组中一起使用 Circle 类（和一个非常相似的 Square）类并检查距离：

```
int maxCircles = 20;
int maxSquares = 3;
float minDist  = 50;
Circle[] circles = new Circle[maxCircles];//create an array Circle objects/instances
Square[] squares = new Square[maxSquares];

void setup(){
  size(400,400);
  smooth();
  colorMode(HSB,360,100,100);
  for(int i = 0; i < maxCircles; i++) circles[i] = new Circle(random(width),random(height),random(4,10),color(0,0,100));
  for(int i = 0; i < maxSquares; i++) squares[i] = new Square(random(width),random(height),random(4,10),color(240));
}
void draw(){
  background(0,0,95);
  for(int i = 0; i < maxCircles; i++){
    circles[i].update(width,height);

    for(int j = 0; j < maxSquares; j++){
      squares[j].update(width,height);
      //use the dist() function to compute distances
      float distance = dist(circles[i].x,circles[i].y,squares[j].x,squares[j].y);
      if(distance < minDist){//based on that, if within a threshold, map colours/etc.
        circles[i].clr = color(  0,map(distance,0,minDist,100,0),100);
      }

      squares[j].draw();
    }
    circles[i].draw();
  }
}
class Circle{
  float x,y,vx,vy,size;//store position(x,y), velocity(vx,vy) and size
  color clr;           //store color
  Circle(float ax,float ay,float as,color ac){
    x = ax;
    y = ay;
    size = as;
    clr = ac;
    vx = random(-.1,.1);//random velocity
    vy = random(-.1,.1);
  }
  void update(int w,int h){
    x += vx;//update position based on velocity
    y += vy;
    if(x < 0 || x > w) vx *= -1;//check bounds and flip velocity if there's a collision
    if(y < 0 || y > h) vy *= -1;
  }
  void draw(){
    pushStyle();//start isolating drawing commands 
    noStroke();
    fill(clr);
    ellipse(x,y,size,size);
    popStyle();//stop isolating drawing commands 
  }

}
class Square{
  float x,y,vx,vy,size;
  color clr;
  Square(float ax,float ay,float as,color ac){
    x = ax;
    y = ay;
    size = as;
    clr = ac;
    vx = random(-.02,.02);//random velocity
    vy = random(-.02,.02);
  }
  void update(int w,int h){
    x += vx;
    y += vy;
    if(x < 0 || x > w) vx *= -1;
    if(y < 0 || y > h) vy *= -1;
  }
  void draw(){
    pushStyle();
    noStroke();
    fill(clr);
    rect(x-size/2,y-size/2,size,size);
    popStyle();
  }

} 
```

正如您在注释代码中看到的那样，在对复杂概念进行了某种简化/封装之后，只需循环遍历数组并检查距离（使用[dist()](http://processing.org/reference/dist_.html)）。

这是一个快速预览，小方块“假装”成图案并影响其周围圆圈的颜色：

![圆形和正方形](../Images/948b6c49e8c0976f7a2f95a388ee1a95.png)

您也可以[在线](http://hascanvas.com/squares_and_circles)或以下运行代码：

```
var maxCircles = 20;
var maxSquares = 3;
var minDist  = 150;
var circles = new Array(maxCircles);
var squares = new Array(maxSquares);

function setup(){
  createCanvas(400,400);
  smooth();
  colorMode(HSB,360,100,100);
  for(var i = 0; i < maxCircles; i++) circles[i] = new Circle(random(width),random(height),random(4,10),color(0,0,100));
  for(i = 0; i < maxSquares; i++)     squares[i] = new Square(random(width),random(height),random(4,10),color(240));
}
function draw(){
  background(0,0,95);
  for(var i = 0; i < maxCircles; i++){
    circles[i].update(width,height);
    for(var j = 0; j < maxSquares; j++){
      squares[j].update(width,height);
      var distance = dist(circles[i].x,circles[i].y,squares[j].x,squares[j].y);
      if(distance < minDist){
        circles[i].clr = color(  0,map(distance,0,minDist,100,0),100);
      }squares[j].draw();
    }
    circles[i].draw();
  }
}
function Circle(ax,ay,as,ac){
  this.x = ax;
  this.y = ay;
  this.size = as;
  this.clr = ac;
  this.vx = random(-.1,.1);//random velocity
  this.vy = random(-.1,.1);

  this.update = function(w,h){
    this.x += this.vx;
    this.y += this.vy;
    if(this.x < 0 || this.x > this.w) this.vx *= -1;
    if(this.y < 0 || this.y > this.h) this.vy *= -1;
  }
  this.draw = function(){
    push();
    noStroke();
    fill(this.clr);
    ellipse(this.x,this.y,this.size,this.size);
    pop();
  }

}
function Square(ax,ay,as,ac){
  this.x = ax;
  this.y = ay;
  this.size = as;
  this.clr = ac;
  this.vx = random(-.02,.02);//random velocity
  this.vy = random(-.02,.02);

  this.update = function(w,h){
    this.x += this.vx;
    this.y += this.vy;
    if(this.x < 0 || this.x > this.w) this.vx *= -1;
    if(this.y < 0 || this.y > this.h) this.vy *= -1;
  }
  this.draw = function(){
    push();
    noStroke();
    fill(this.clr);
    rect(this.x-this.size/2,this.y-this.size/2,this.size,this.size);
    pop();
  }

}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.4/p5.min.js"></script>
```

希望这解释了处理该问题的一种基本方法。在您发现自己对语法和一些编程概念感到满意之后，应该更容易深入了解更多内容：

*   您可能会发现数组有些限制，因为它们的大小是固定的，并且可以探索[ArrayList](http://processing.org/reference/ArrayList.html)
*   您可能会发现基本距离函数对于您的复杂模式不够精确，并且可以找到其他计算距离的方法。

祝你好运

# ruby-on-rails - 如何制作宁静的link_to

> ID：12128720
> 
> 赞同：0
> 
> 时间：2012-08-26T08:35:24.077
> 
> 标签：ruby-on-rails, link-to

我需要生成链接

任务/新/1

但我的 link_to 会生成类似的链接

```
<%= link_to "", {:controller => "tasks", :action => "new", :pid => project.id } %> 
```

任务/新？pid=1

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:03:09.260

我假设您有嵌套的资源项目和任务。

```
<%= link_to 'New Task', new_project_task(project) %> 
```

此链接应创建路径`/projects/1/tasks/new`

简短的形式是

```
<%= link_to 'New Task', [:new, @project, :task] %> 
```

路由文件应该有

```
resources :projects do
  resources :tasks
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:44:46.053

指向“tasks/new/1”的链接实际上不会让人放松。新链接从不指定它们的 id，因为您无法知道数据库要给出的 id。按照惯例，资源背后的 id 属于该资源，而不是关系。

宁静的方式是

> /projects/1/tasks/新

您可以通过设置正确的路由来实现这一点。

看看这里：[http ://edgeguides.rubyonrails.org/routing.html](http://edgeguides.rubyonrails.org/routing.html)

并搜索标题嵌套资源。

# java - 使用 SolrIndexSearcher 进行 ids 查询

> ID：12128724
> 
> 赞同：3
> 
> 时间：2012-08-26T08:36:14.870
> 
> 标签：java, solr, lucene

我想对 SolrIndexSearcher 进行 ids 查询（使用他们的 ids 从 solr 获取几个文档） - 类似于对 SolrServer q= 的 ids 查询*：* &ids=ID1,ID2&fl=* 。

我尝试以多种方式调用 search(Query,int) 均未成功，
即

```
TopDocs results = this.indexSearcher.search(QueryParsing.parseQuery("q=\\*\\:\\*&ids=ID1,ID2&fl=*", this.indexSearcher.getSchema()) , MAX_DOCUMENTS); 
```

结果总是空的..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:51:04.323

您可以搜索`q=ids:(ID1 OR ID2)`哪个将搜索 id。
您还可以使用过滤器查询`q=*:*&fq=ids:(ID1 OR ID2)`，这是一种高效的方法，因为它利用了过滤器缓存。

# design-patterns - 服务和 DAO 设计模式

> ID：12128728
> 
> 赞同：2
> 
> 时间：2012-08-26T08:37:00.233
> 
> 标签：design-patterns, jakarta-ee

我对 Delegate-Service 和 DAO 设计模式有疑问。我们的团队认为我们将为 DAOFactory 和 DAO 对象使用单例模式。DAOFactory 将包含所有可用的 DAO 作为其属性，并在需要时提供它们。

现在我们有一个疑问，Service 说，例如 AuthenticateSerivce 是否应该包含所有必需的 DAO，例如 UserDAO、RoleDAO 等作为属性？或者它应该根据需要调用 get**DAO() 而不是设置为自己的属性。（附件是 java 文件）

代码片段：

```
public class AuthenticateService {
    UserDao userDao;
    RoleDao roleDao;

    public AuthenticateService(){
        DaoFactory daoFactory = DaoFactory.getInstance();
        userDao = daoFactory.getUserDao();
        roleDao = daoFactory.getRoleDao();
    }

}

public class DaoFactory {

    private static DaoFactory instance = null;

    UserDao userDao;
    RoleDao roleDao;
    AnnualScheduleDao annualScheduleDao;
    WeeklyScheduleDao weeklyScheduleDao;
    ProgramSlotDao programSlotDao;

    private DaoFactory (){
        // Authenticate
        userDao = new UserDaoImpl();
        roleDao = new RoleDaoImpl();

        // Schedule
        annualScheduleDao = new AnnualScheduleDaoImpl();
        weeklyScheduleDao = new WeeklyScheduleDaoImpl();
        programSlotDao = new ProgramSlotDaoImpl();

    }

} 
```

哪种方法更好，在哪些情况下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:40:59.067

我认为第一个更好（即属性），因为它更容易管理它们。代码也将变得更简洁，而不是在不同的方法中调用 Factory，或者在每个方法中都有一个 dao 变量。您可以轻松地修改 Daos 以供以后使用，而无需在多个区域进行替换。如果您决定在那里初始化 Dao，或者创建一个自定义 dao 来使用，或者稍后使用依赖注入，那么您不必重新访问对 DaoFactory 的所有调用。

第二个问题是关于在 DAO 中使用单例。我不确定每个 DaoImpl 是如何完成的，但是当服务被多个线程访问时（同样，这取决于你如何实现你的 Daos）并且它们共享同一个 Dao，就有可能出现线程问题。或者，也许您想使用一个为每个请求实例化一个新 Dao 的工厂？但如果是这种情况，那么我相信你会选择第一个选项，因为你不想在每个方法中重新创建一个 dao。

Daos 的创建成本可能很低（假设您的团队担心性能问题），因此它们不需要按需实例化，但您应该进行一些连接或资源池（例如，重用 Db 连接）。

# android - 在传感器测量开启时禁用屏幕关闭

> ID：12128729
> 
> 赞同：1
> 
> 时间：2012-08-26T08:37:00.393
> 
> 标签：android, android-screen

我有一个带有“开始测量”按钮的活动：按下它将将此活动注册为传感器列表。但是，我发现如果用户有一段时间不与它交互，屏幕会关闭并且 android 会禁用传感器监听（我猜是为了节省电池）。

我发现让后台线程也监听传感器事件有点棘手，**因为这不是问题，我只想在监听器打开时禁用关闭，并在用户按下“停止测量”时再次启用它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:28:17.280

我有一个仅使用传感器的活动，屏幕会关闭，我使用

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

并关闭

```
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

在我的活动的恢复和暂停中

# java - java.lang.NoSuchMethodError: org.opencms.jsp.I_CmsXmlContentContainer.hasMoreContent()

> ID：12128733
> 
> 赞同：0
> 
> 时间：2012-08-26T08:37:56.367
> 
> 标签：java, jsp, opencms

我是学习“Open CMS”并试图理解它的新手，以创建一些基于此 CMS 的基本站点。最新版本是`8.0.3`. 我正在使用“opencms-7-development”文档进行培训（我在第 8 版中找不到相同的文档）。

我已经在源文件和配置文件中完成了所有必要的准备工作以创建博客示例，但是当我可以尝试查看任何页面时出现以下错误。有人知道我为什么要面对这个`exception`吗？

```
javax.servlet.ServletException: java.lang.NoSuchMethodError: org.opencms.jsp.I_CmsXmlContentContainer.hasMoreContent()Z
at org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911)
at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
at org.apache.jsp.WEB_002dINF.jsp.offline.system.modules.com_deepthoughts_templates.templates.BlogEntry_jsp._jspService(BlogEntry_jsp.java:327)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
at org.opencms.flex.CmsFlexRequestDispatcher.includeExternal(CmsFlexRequestDispatcher.java:188)
at org.opencms.flex.CmsFlexRequestDispatcher.include(CmsFlexRequestDispatcher.java:163)
at org.opencms.loader.CmsJspLoader.service(CmsJspLoader.java:612)
at org.opencms.flex.CmsFlexRequestDispatcher.includeInternalWithCache(CmsFlexRequestDispatcher.java:417)
at org.opencms.flex.CmsFlexRequestDispatcher.include(CmsFlexRequestDispatcher.java:167)
at org.opencms.loader.CmsJspLoader.dispatchJsp(CmsJspLoader.java:886)
at org.opencms.loader.CmsJspLoader.load(CmsJspLoader.java:517)
at org.opencms.loader.A_CmsXmlDocumentLoader.load(A_CmsXmlDocumentLoader.java:224)
at org.opencms.loader.CmsXmlContentLoader.load(CmsXmlContentLoader.java:44)
at org.opencms.loader.CmsResourceManager.loadResource(CmsResourceManager.java:1062)
at org.opencms.main.OpenCmsCore.showResource(OpenCmsCore.java:1598)
at org.opencms.main.OpenCmsServlet.doGet(OpenCmsServlet.java:153)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoSuchMethodError: org.opencms.jsp.I_CmsXmlContentContainer.hasMoreContent()Z
    at com.deepthoughts.templates.BlogJspTemplate.hasMoreBlogs(BlogJspTemplate.java:340)
    at org.apache.jsp.WEB_002dINF.jsp.offline.system.modules.com_deepthoughts_templates.templates.BlogEntry_jsp._jspService(BlogEntry_jsp.java:162)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:42:52.753

我不确定您到底想达到什么目标，但是从阅读本文来看，您似乎想要输出文档的内容。在这种情况下，我宁愿坚持使用 cms taglibrary 而不是使用 jstl。例如：

```
<cms:contentloop element="/blog/blogpost">
    <cms:contentshow element="Headline"/>
</cms:contentloop> 
```

也许这有帮助。如果没有，您可能想发布更多模板代码。

# php - 如何使用自定义变量制作 PHP 电子邮件脚本

> ID：12128735
> 
> 赞同：-1
> 
> 时间：2012-08-26T08:38:19.657
> 
> 标签：php, email, smtp

我会尽量不要把这句话弄混。我正在尝试制作一个可以将电子邮件发送到指定地址的 php 脚本，并且我想控制电子邮件报告它发送的名称（这样我可以将其设为我的公司名称），它的发送地址发件人（这样收件人知道如果他们需要回复谁）和回复地址。我在网上找到了这个工具，就像我想要的类固醇一样。我只需要基础知识，这样当用户尝试联系我或我使用此表单联系用户时，所有信息都是正确的，就像输入正文并点击发送一样简单（作为姓名，回复地址，和地址只是常量变量）。这是我发现我试图半复制的工具： http: [//emkei.cz](http://emkei.cz)

如您所见，您可以输入任何信息，它会发送包含该信息的电子邮件。我只需要制作一个更简单的版本。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:44:08.317

使用这个功能：

```
function send_mail( $to, $subject, $body ) {
    $from = 'Company Name <email@company.com>';
    $message = "
        <html>
        <head>
            <title>Company - ". $subject ."</title>
        </head>
        <body>

        ". $body ."

        </body>
        </html>
    ";
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=utf-8" . "\r\n";
    $headers .= "X-Mailer: PHP/" . phpversion() . "\r\n";
    $headers .= "From: " . $from . "\r\n";
    // Send this message;
    $result = mail( $to, $subject, $message, $headers);
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T08:44:23.500

假设我已正确阅读您的问题，并参考 PHP 手册（http://php.net/manual/en/function.mail.php），我认为您需要的语法是：

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: Webmaster <webmaster@example.com>' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

ETC？

有很多*标题*需要设置，视情况而定……该手册值得一读。

# java - 从右到左方向按钮大小的不相关变化

> ID：12128743
> 
> 赞同：4
> 
> 时间：2012-08-26T08:39:52.337
> 
> 标签：java, swing, orientation, jscrollpane, right-to-left

我有 9 个 jbuttons 添加到 jpanel 和面板添加到 jscrollpane 并添加到 jframe。

[http://www.pic1.iran-forum.ir/images/up9/95426323683658592564.jpg](http://www.pic1.iran-forum.ir/images/up9/95426323683658592564.jpg)

当我通过以下方式更改框架方向时： `applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);`

面板向右移动并且按钮的大小得到固定并且不会填充面板但是您在下图中看到滚动条填充了面板的所有宽度

[http://www.pic1.iran-forum.ir/images/up9/60975202722295688553.jpg](http://www.pic1.iran-forum.ir/images/up9/60975202722295688553.jpg)

（我使用 gridbaglayout 添加按钮和borderlayout.center 添加滚动窗格）。

这是java中的错误还是？

编辑：它是最简单的视图。它有帮助吗？

```
import java.awt.BorderLayout;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.*;

public class MyFrame extends JFrame{
private JButton[] arrayButton = new JButton[9];
private JButton btnLeft = new JButton("<");
private JButton btnRight = new JButton(">");
private JScrollPane scpButtons = new JScrollPane();

public MyFrame() {
    for (int i = 0; i < arrayButton.length; i++) 
        arrayButton[i] = new JButton("btn");

    JPanel pnlButton = initPnlButton();
    scpButtons.setViewportView(pnlButton);
    setLayout(new BorderLayout());
    add(scpButtons, BorderLayout.CENTER);

           // comment it and see the result 
    applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);      
    pack();
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setExtendedState(JFrame.MAXIMIZED_BOTH);
    setVisible(true);
}

private JPanel initPnlButton() {
    JPanel pnlButton = new JPanel(new GridBagLayout());
    GridBagConstraints gbc = new GridBagConstraints(0, 0, 1, 1, 1, 1, 10,
            1, new Insets(0, 0, 0, 0), 0, 0);

    int ind = 0;
    int row = 3;
    int column = 4;
    for (int i = 0; i < row; i++) {
        for (int j = 1; j < column; j++) {
            gbc.gridx = j;
            gbc.gridy = i;
            pnlButton.add(arrayButton[ind++], gbc);
        }
    }
    gbc.weightx = 0;
    gbc.gridheight = 3;
    gbc.gridx = 0;
    gbc.gridy = 0;
    pnlButton.add(btnLeft, gbc);
    gbc.gridx = 4;
    gbc.gridy = 0;
    pnlButton.add(btnRight, gbc);
    pnlButton.setPreferredSize(new Dimension(1000, 700));
    return pnlButton;
}
public static void main(String[] args) {
    new MyFrame();
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T11:34:22.547

**编辑 4**

（希望是最后一个:-)

最终的罪魁祸首似乎是 scrollPane 的主视口：一旦在 RToL 中调整其视图的大小时，它会变得混乱，一旦它小于它的首选。没有跟踪到底出了什么问题，但看起来是可行的（没有找到核心中的错误并推动 snoracle 修复它；）解决方案是使视图实现可滚动，特别是实现

*   getPreferredScrollableViewportSize 返回 getPreferredSize
*   如果高度/宽度小于父高度/宽度，则实现 getScrollableTracksViewportHeight/Width 以返回 true，否则返回 false

JXPanel（包含在[SwingX](http://swingx.java.net)中）是一个 Scrollable，它默认执行第一个，并且可以通过适当地设置 ScrollableSizeHints 来为后者配置：

```
private JPanel initPnlButton() {
    JXPanel pnlButton = new JXPanel(new GridBagLayout());
    pnlButton.setScrollableWidthHint(ScrollableSizeHint.PREFERRED_STRETCH);
    pnlButton.setScrollableHeightHint(ScrollableSizeHint.PREFERRED_STRETCH);
    ...
} 
```

有了它，不需要更多的hacky线，只需在添加所有组件后应用CO：

```
applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
pack();
setExtendedState(JFrame.MAXIMIZED_BOTH);
setVisible(true); 
```

**编辑 2**

我们（@Reza Gh 和我）玩得越多，我就越倾向于将这种行为视为错误。总结我们的最新发现

*   scrollPane 似乎是罪魁祸首（Reza）
*   一旦面板的大小调整为/低于其preferredSize，不良行为就会开始（注意人工 - 至少我希望它不是Reza的生产代码的一部分 - 创建面板时设置Preferred）

**编辑**

多玩一点，在我看来，它是一种非常奇怪的实例化行为。一个要玩的片段（在实例化结束时）

```
pack();
// [1]
setSize(getWidth() + 1, getHeight() + 1);
// [2]
setExtendedState(JFrame.MAXIMIZED_BOTH);
setVisible(true);
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
    }
}); 
```

和评论 1、2 或两者

*   评论两者：框架以打包大小出现，最大化它不会填充框架但孩子停靠在右边缘
*   评论 1：框架以最大化尺寸出现，子填充完成的内容，然后调整大小以打包并再次最大化：子不填充
*   评论 2：框架几乎（大一个像素）打包大小，最大化（和所有其他调整大小）正确填充屏幕

确切的行为可能也取决于本机组件的方向（我的是 LToR）。总体而言，我认为这是面向组件的核心处理中的某个错误（毫不奇怪，这些年来它并不像我们预期的那么稳定）。

看起来一个hack是在打包后调整大小（稍微增加1个像素左右，单独最大值不起作用），然后调用applyCO。

**原来的**

这并不能解决原始问题（即在框架的实例化上应用 componentOrientation），仅演示如何在运行时安全地切换 CO

```
Action createCOToggle(final JFrame frame) {
    Action toggleComponentOrientation = new AbstractAction("toggle orientation") {

        @Override
        public void actionPerformed(ActionEvent e) {
            ComponentOrientation current = frame.getComponentOrientation();
            if (current.isLeftToRight()) {
                frame.applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
            } else {
                frame.applyComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
            }
            frame.getRootPane().revalidate();
            frame.invalidate();
            frame.validate();
            frame.repaint();
        }

    };
    return toggleComponentOrientation;
} 
```

用它配置一个动作感知组件，将使框架按预期运行，即填充整个区域。许多重新/输入/验证看起来很奇怪 - 但事实证明是必要的（在 jdk6 中），正如我们在[SwingX 测试覆盖中所经历的那样](http://swingx.java.net)

现在我的期望是，在帧的实例化结束时调用相同的动作会使它的行为也一样，即

```
.... // configure/fill frame
setVisible(true);
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        createCOToggle(MyFrame.this).actionPerformed(null);
    }
}); 
```

不幸的是，它没有。目前不知道为什么不，对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T02:11:13.433

在玩了很多属性并上下移动语句之后，我找到了答案。如果你把

```
scpButtons.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT); 
```

后

`applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);`

一切都会好起来的，不需要`setSize(getWidth() + 1, getHeight() + 1);`

太有趣了，我花了一整天的时间 :) c# 或其他语言有这样的错误吗？

如果你让`SwingUtilities`bloc 运行，在调整窗口大小之前，一切都还没有 LtR。

```
import java.awt.BorderLayout;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.*;

public class MyFrame extends JFrame {
private JButton[] arrayButton = new JButton[9];
    private JButton btnLeft = new JButton("<");
    private JButton btnRight = new JButton(">");
    private JScrollPane scpButtons = new JScrollPane();

    public MyFrame() {
        for (int i = 0; i < arrayButton.length; i++)
            arrayButton[i] = new JButton("btn");

        JMenu mnuSettings = new JMenu("MENU");
        JMenuBar menubar = new JMenuBar();
        menubar.add(mnuSettings);
        setJMenuBar(menubar);

        JPanel pnlButton = initPnlButton();
        scpButtons.setViewportView(pnlButton);
        setLayout(new BorderLayout());
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        add(scpButtons, BorderLayout.CENTER);

        pack();
        // [1]
        setExtendedState(JFrame.MAXIMIZED_BOTH);
        //setSize(getWidth() + 1, getHeight() + 1);
        // [2]
        setVisible(true);
        // SwingUtilities.invokeLater(new Runnable() {
        // public void run() {
        applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
//here
        scpButtons.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
        // }
        // });
    }

    private JPanel initPnlButton() {
        JPanel pnlButton = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints(0, 0, 1, 1, 1, 1, 10,
                1, new Insets(0, 0, 0, 0), 0, 0);

        int ind = 0;
        int row = 3;
        int column = 4;
        for (int i = 0; i < row; i++) {
            for (int j = 1; j < column; j++) {
                gbc.gridx = j;
                gbc.gridy = i;
                pnlButton.add(arrayButton[ind++], gbc);
            }
        }
        gbc.weightx = 0;
        gbc.gridheight = 3;
        gbc.gridx = 0;
        gbc.gridy = 0;
        pnlButton.add(btnRight, gbc);
        gbc.gridx = 4;
        gbc.gridy = 0;
        pnlButton.add(btnLeft, gbc);
        pnlButton.setPreferredSize(new Dimension(1000, 700));
        return pnlButton;
    }

    public static void main(String[] args) {
        new MyFrame();
    } 
```

}

# javascript - 我怎样才能从这个角度得到一个方向？（需要一些数学帮助）

> ID：12128744
> 
> 赞同：1
> 
> 时间：2012-08-26T08:39:53.230
> 
> 标签：javascript, math, game-physics

我正在尝试制作一个非常简单的游戏。在其中我有对象 ( `Circles`) 具有 a`xDirection`和 a `yDirection`，两者都可以介于`-1`to之间`1`。

我有另一个可以由用户（`Pointer`）旋转的对象`Circles`。我通过复制一些我在网上找到的代码来实现这种旋转，这些代码给了我`angle`从`Pointer`y 轴穿过`Circle`. （[这个](https://stackoverflow.com/questions/7873470/how-does-one-rotate-a-html-canvas-object-around-a-fixed-point-using-mouse-action)）。

现在我希望“游戏玩法”成为用户将指针倾斜到他希望圆圈移动的方向的情况。如果我有这个角度，有没有办法可以计算`xDirection`出`yDirection`圆？

非常感谢任何帮助，我知道我需要学习数学！哦，我在技术上使用 javascript 工作，但我认为有一个可以用多种语言实现的纯数学解决方案？

![在此处输入图像描述](../Images/889686f264c23337ba19a92115df3e22.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:48:33.860

如果我正确阅读了您的问题，则应该可以：

```
x = -sin(angle)
y = -cos(angle) 
```

# android - 在 android 中使用 MuPDF 编辑 PDF

> ID：12128746
> 
> 赞同：0
> 
> 时间：2012-08-26T08:40:00.390
> 
> 标签：android, mupdf

我正在使用 mupdf(1.0) 在我的 android 应用程序中呈现 PDF，但我还需要编辑 PDF。它没有很好地记录。我希望能够使用 MuPDF 而不是使用其他库来编辑 PDF。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:50:32.060

MuPDF 不是 PDF 编辑器，目前您不能用它来进行编辑，至少在没有自己进行大量编程的情况下不能。如果您确实想扩展 MuPDF，那么您首先应该意识到那里已经进行了一些努力。

如果您有兴趣，我建议您直接与开发人员交谈，他们可以在 irc.freenode.net 的#ghostscript IRC 频道上找到

# sql - 如何使用 group by 从表中计算 Max(Count(Columnname))

> ID：12128747
> 
> 赞同：1
> 
> 时间：2012-08-26T08:40:08.443
> 
> 标签：sql, sql-server-2008, group-by, having-clause

如何查找以下查询的数据

[原始来源](http://www.sql-ex.ru/learn_exercises.php#answer_ref)问题 89

表结构： **产品（制造商、型号、类型）**

**编辑** [将 sqlfiddle 用于架构](http://www.sqlfiddle.com/#!3/25ba8/1)

任务：
**找出产品表中型号数量最多的制造商以及型号数量最少的制造商。输出：制造商，型号数量**

有问题的提示是`GROUP BY`,`HAVING`和`IN`

我尝试了各种方法来找到这个基本上我想出的是我需要使用`Max(COUNT(model))`

结果应该是

```
maker   qty 
A        7 --max
C        1 --min 
```

我想出的一个解决方案是

```
select maker, count(ps.model) as Count from product as ps
group by ps.maker
having count(ps.model) in
(
select max(cnt) from (select count(model) as cnt from product group by maker)t
union
select min(cnt) from (select count(model) as cnt from product group by maker)t
) 
```

有没有其他办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:02:45.183

你可以简单...

```
SELECT *
FROM (
    SELECT TOP 1 maker, COUNT(*) C
    FROM product
    GROUP BY maker
    ORDER BY C DESC
) Q1
UNION
SELECT *
FROM (
    SELECT TOP 1 maker, COUNT(*) C
    FROM product
    GROUP BY maker
    ORDER BY C
) Q2; 
```

...或者如果您喜欢 CTE...

```
WITH CTE AS (
    SELECT maker, COUNT(*) C
    FROM product
    GROUP BY maker
)
SELECT *
FROM (
    SELECT TOP 1 *
    FROM CTE
    ORDER BY C DESC
) Q1
UNION
SELECT *
FROM (
    SELECT TOP 1 *
    FROM CTE
    ORDER BY C
) Q2; 
```

...as demonstrated in this [SQL Fiddle](http://www.sqlfiddle.com/#!3/25ba8/51).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:01:37.880

如果您使用的是 SQL Server 2008，则可以通过以下方式对其进行简化：[http ://www.sqlfiddle.com/#!3/25ba8/7](http://www.sqlfiddle.com/#!3/25ba8/7)

```
with counts as
(
  select maker, count(ps.model) as Count from product as ps
  group by ps.maker
)
select cx.*
from counts cx
join
(
  select min(count) as lo, max(count) as hi
  from counts
) as hi_lo 
on cx.count = hi_lo.lo or cx.count = hi_lo.hi; 
```

# windows - 使用多个 80 端口的 tomcat 实例

> ID：12128761
> 
> 赞同：3
> 
> 时间：2012-08-26T08:42:46.230
> 
> 标签：windows, apache, tomcat, port

我有三个不同应用程序的三个 tomcat 实例。他们在一台机器上使用 8080,8081,8082 端口。如何更改配置，以便用户能够从具有不同主机名的 80 端口访问？我已经在我的机器上安装了 Apache，并尝试使用以下教程对其进行配置：[如何在 Windows 上使用 Apache 对 Tomcat 5.5 进行负载平衡，](http://thought-bytes.blogspot.com/2007/03/how-to-load-balance-tomcat-55-with.html)直到负载平衡点开始。我有基于本教程的问题。在所有 tomcat 实例中，我的 Web 应用程序都在 webapps/ROOT 下。我有这个配置`httpd.conf`：

```
<IfModule jk_module>
    JkWorkersFile  D:\containters\_tomcat_backend\conf\workers.properties
    JkShmFile      D:\containters\_tomcat_backend\logs\mod_jk.shm
    JkLogFile      D:\containters\_tomcat_backend\logs\mod_jk.log
    JkLogLevel debug
    JkMount / worker1
    JkMount / worker2
</IfModule> 
```

当我从命令提示符运行 httpd.exe 时，我得到了这个警告：

> [警告] NameVirtualHost *:80 没有 VirtualHosts

我是否以正确的方式使我的应用程序与 80 端口一起工作？我该如何配置这个警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:18:34.127

对于您的方案，您将不需要负载平衡。在您的 httpd.conf 中，您应该为要使用的主机名定义 3 个虚拟主机（如此[处](https://httpd.apache.org/docs/2.2/vhosts/name-based.html)所述）。在每个`VirtualHost`指令中，为要在您的workers.properties中定义的工人插入一个 `JkMount`，例如：

```
JkMount /* worker1
...

# same for worker2 and worker3 in the other virt. hosts 
```

现在是workers.properties：

```
...
worker.list = worker1, worker2, worker3

worker.worker1.port=8009
worker.worker1.host=localhost
worker.worker1.type=ajp13

worker.worker2.port=8010
worker.worker2.host=localhost
worker.worker3.type=ajp13

worker.worker3.port=8011
worker.worker3.host=localhost
worker.worker3.type=ajp13 
```

注意：我使用的端口与您指定的端口不同，因为 Apache 和 Tomcat 之间的通信是通过[AJP](https://tomcat.apache.org/tomcat-6.0-doc/config/ajp.html)运行的。最后，在每个 tomcat 的 server.xml 中添加一个匹配的 AJP 连接器：

```
<Connector port="8009" protocol="AJP/1.3" /> 
```

有关更多详细信息，请参阅[此](https://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)内容。您提到的警告似乎是由不完整的虚拟主机配置引起的。还没有`VirtualHost`定义实例吗？

**编辑**：如果您不喜欢那么多配置，您也可以使用 Apache 作为代理并通过`ProxyPass`/`ProxyPassReverse`指令将流量分配到您的 tomcat。

# iphone - 我可以在 system(""); 中使用 NSString 吗？

> ID：12128762
> 
> 赞同：0
> 
> 时间：2012-08-26T08:42:49.100
> 
> 标签：iphone, objective-c, ios, c, tweak

我目前正在进行一项调整，用户通过首选项包编写命令的参数（例如来自 sbutils 的 sbalert）。我能够将其保存到 NSString 但不能将其用作 sbalert 命令的参数。这可能吗？有替代方案吗？我的代码是

```
int main(int argc, char **argv, char **envp) {

NSString *string1 = @"Hello World";
NSLog(@"%@", string1);
system(" sbalert -t %@", string1);

    return 0;
}

// vim:ft=objc 
```

请注意，这是一个测试，因此 NSString 不等于 Preference Bundle 中的文本仍然 theos 在编译时给我一个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T08:48:00.423

不，该`system`函数不采用格式字符串，即使采用格式字符串，您也不能使用 %@ 格式说明符 - 这仅适用于 Cocoa，在 C 标准库中不可用。你必须预先格式化你的字符串，如：

```
NSString *cmd = [NSString stringWithFormat:@"sbalert -t '%@'", string1];
system([cmd UTF8String]); 
```

# django - Django：如何从其他模型创建动态表单

> ID：12128766
> 
> 赞同：1
> 
> 时间：2012-08-26T08:43:40.977
> 
> 标签：django, forms, django-models, django-forms

我有两个模型：问题和调查

```
class Question(models.Model):
text = models.TextField()
category = models.CharField(max_length=20, choices=(('personal', 'Personal'), ('team', 'Team'), ('company', 'Company')))
low_answer = models.CharField(max_length = 200, null=True)
high_answer = models.CharField(max_length = 200, null=True)

class Survey(models.Model):
description = models.CharField(max_length = 200, null=True)
date = models.DateTimeField(auto_now_add=True)
category = models.CharField(max_length=20, choices=(('personal', 'Personal'), ('team', 'Team'), ('company', 'Company')))
questions = models.ManyToManyField(Question) 
```

所以，Survey 有一个作为 ManytoMany 的字段问题，我现在想知道如何在 Survey 上制作一个表格来收集每个问题的答案？每个问题我只需要一个 int 值。我不想自己构建表单，我更愿意为此使用 django。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:46:17.037

[您可以使用django 模型](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)表单集构建一个包含多个问题的表单

在旁注中，我认为您需要`ForiegnKey`( `OneToMany`) 与`Survey`to`Question`而不是的关系`ManyToMany`。由于一项调查有很多问题，但一个问题实例仅在一项调查中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:51:21.933

*** 一开始你需要的是多对多关系中的一个额外字段 ***

在您的模型中，我错过了名为`Answer`. An`Answer`是 a `Survey`for a中的响应`Question`。您的 int 值将包含在这个新类中。有关更多详细信息，请参阅[多对多关系的额外字段。](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)对于您的场景：

```
class Question(models.Model):
    ...

class Survey(models.Model):
    ...
    questions = models.ManyToManyField(Question, through='Answer'))

class Answer(models.Model):                   #<- this is the new model
    question = models.ForeignKey(Question)
    survey = models.ForeignKey(Survey)
    response = models.IntegerField() 
```

*** 现在表单集 ***

此时，要构建表单，可以使用[modelformset_factory](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)

```
from django.forms.models import modelformset_factory
AnswersFormSet = modelformset_factory(Answer)
formset = AnswersFormSet(queryset=Answer.objects.filter(question= some_question)) 
```

*** 就这样 ***

# perl - 在 Perl 中通过 Way2sms 自动发送短信

> ID：12128770
> 
> 赞同：6
> 
> 时间：2012-08-26T08:44:14.463
> 
> 标签：perl, lwp, lwp-useragent, way2sms

我正在尝试使用 Perl LWP 通过 Way2sms 发送短信。登录部分成功，之后我将 cookie 保存到本地文件。登录后的欢迎页面显示一个**发送短信**链接，单击哪个链接将重定向到另一个页面，其中包含手机号码和短信文本的两个输入以及一个用于提交和发送短信的按钮。Firebug 显示了如图所示的页面结构。根据 Iframe url 和表单的`action`属性，我构造了表单操作的绝对 URL，并相应地提交表单，并将 cookie 存储在文件中。但是，没有发送短信。我在这里做错了什么？代码如下。（`name`两个文本输入的属性是正确的，通过观察 Firebug 中的源代码得到，虽然那'

```
use LWP::UserAgent;
open f, "> way2sms.txt";
use HTTP::Cookies;
my $cookie_jar = HTTP::Cookies->new(
file => "cookies.txt",
autosave => 1,
);

my $ua = LWP::UserAgent->new(
    agent =>
      'Mozilla/5.0 (X11; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1',
    cookie_jar => $cookie_jar,
);
my $response = $ua->post(
    'http://site2.way2sms.com/contentt/bar/Login1.action',
    {
        username => $user,
        password => $pass,
    }
);

if ( $response->is_redirect ) {
    $response = $ua->get( $response->header('Location') );
    print 5 if $response->decoded_content =~ /Kaustav Mukherjee/i; #prints it, showing that the login is successful
}   
my $smsresp = $ua->post("http://site5.way2sms.com/jsp/quicksms.action",[MobNo=>$mob,textArea=>'Hello World']); 
```

![在此处输入图像描述](../Images/3e511d27e34a2108ff69db51cb1634c1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:42:54.337

您是否尝试过使用 Perl 模块 Net::SMS::WAY2SMS 通过way2sms.com 发送消息？这对我很有效。

要安装尝试：

```
C:\> perl -MCPAN -e "install Net::SMS::WAY2SMS" 
```

以下是发送短信的代码示例：

```
use strict;
use warnings;
use Net::SMS::WAY2SMS;

my $sms = Net::SMS::WAY2SMS->new(
    'user' => 'user_name' ,
    'password' => 'secret_password',
    'mob' => ['1234567890', '0987654321']
);

# multi line sms
$sms->send(q[testing
sending
sms]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:24:25.237

您不必设置新的用户代理，因为您可以简单地重复使用以前的用户代理。AFAIK，cookie 已经在该用户代理中。

请注意：以下略OT。

我看了一下[https://metacpan.org/pod/Net::SMS::WAY2SMS](https://metacpan.org/pod/Net::SMS::WAY2SMS)

它在我的电脑上安装了 fin。也许你想再试一次？在这里用你的具体问题打开一个新问题。请随时通知我，以便我们查看。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-02T12:57:41.320

真的看不出有什么问题，但这里是我开始看的东西：

*   从浏览器检查您的真实发布请求。确保 javascript 或其他东西没有添加在 html 中不可见的变量。
*   三重检查 MobNo 和 textArea 确实是唯一需要的参数。例如，通常会检查提交按钮，以查看执行了哪些操作。
*   看看你在发帖时得到了什么输出。它是否说明了失败？
*   尝试直接从您的浏览器中发布帖子（有 FF 插件），以确保您不会因缺少 http-referrer 而失败

我做了很多抓取/伪装成浏览器的工作，而且通常非常乏味。人们添加“安全”检查。共同点是要求您例如回发会话变量。

祝你好运！

*编辑：该网站要求您拥有有效的 +91 号码才能注册，因此我无法登录并亲自尝试。考虑到该页面上的广告数量，我真的认为他们正在添加某种变量，因为它们靠广告为生，而您正试图避免它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-26T10:33:14.340

我没有您的登录信息，因此无法为您进行测试。

但是您可以使用一些 Firefox 插件，例如 TamperData 或 HttpFox 来获取发布的 url 和发送的参数。

使用 Perl 发出与浏览器相同的请求，这会很好。

顺便说一句，您可以使用一个 $ua 发送两个请求，无需创建另一个 LWP::UserAgent 实例。

谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T09:19:44.603

您没有包括所有必需的 POST 字段

```
MobNo=
textArea=
HiddenAction=instantsms
login=
pass=
Action= 
```

这些都需要包括在内。PHP中有[**这个脚本**](http://www.goforexpert.com/php-curl-script-to-send-sms-from-way2sms/)绝对有效，您可以参考。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T12:31:14.440

**工作**脚本：（*测试于 2012 年 9 月 6 日下午 3:00 GMT+5:30）*

```
 use LWP::UserAgent;
    use HTTP::Cookies;

    my $ua = LWP::UserAgent->new(agent=>"Mozilla/5.0 (X11; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1");

    $ua->cookie_jar({ file => "/absolute/path/to/cookies.txt", autosave => 1 });
    # if windows, use \ instead of /

    # $ua->proxy(['http', 'ftp'], 'http://localhost:9666/');

    # below line seems to have done the trick
    push @{ $ua->requests_redirectable }, 'POST';

    my $response = $ua->post(
            'http://site5.way2sms.com/Login1.action',{
            "username" => "1234567890", # set your username
            "password" => "passwd0123", # set your password
            "userLogin" => "yes",
            "message" => "",
            "mobileNo" => "",
            }
    );

    if($response->is_success && $response->decoded_content =~ /Logout/i){ # you can have your name too in place of Logout
            print "Logged in!\r\n";
    }

    my $mob = "1234567890"; # mobile to send message to
    my $mes = "Hello! 123."; # message

    my $smsresp = $ua->post(
            "http://site5.way2sms.com/quicksms.action",
            {
                    'Action' => 'dsf45asvd5',
                    'HiddenAction' => 'instantsms',
                    'catnamedis' => 'Birthday',
                    'chkall' => 'on',
                    'MobNo' => $mob,
                    'textArea' => $mes,
            });

     if ($smsresp->is_success && $smsresp->decoded_content =~ /Submitted/i) {
         print "Sent!\r\n";
     } 
```

PS我希望我能得到过期的赏金O_o :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T18:01:18.747

出色地

1.  Way2SMS.com 每月更改一次隐藏参数“ **catnamedis”****的值**。
***   Way2SMS.com不那么频繁地**添加新的隐藏参数**，就像现在他们添加了名为“ **token** ”的新参数，该参数**因用户而异**，与“ **Action** ”隐藏参数相同，该参数也因用户而异。**

 **因此，脚本适用于某人，不适用于其他人，因为这种变化的值，您必须**在真实浏览器中手动登录到您的 way2sms.com 帐户并检查元素并找到您帐户的 Token 和 Action 参数的值**（此值因每个用户而异）。

这是我的**[Python 脚本](https://github.com/PrasannaVenkadesh/Py2SMS/blob/master/w2sms)**，通过它我可以实现它。您可以将它用作 Perl 程序的参考

**注意：-**在尝试我的脚本之前，根据您帐户**的 Action 参数值****更改**脚本中**变量“act”**的值，您可以使用检查元素或 Firebug 找到该值。

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-12T12:56:46.353

[此处](https://stackoverflow.com/a/53262539/3940406)使用 Python的答案

要`sms`使用`way2sms`帐户发送，您可以使用以下代码段。

在此之前，您需要`Key`从[此处创建 API](https://stackoverflow.com/a/53262539/3940406)

```
import requests
url = "https://smsapi.engineeringtgr.com/send/"
params = dict(
    Mobile='login username',
    Password='login password',
    Key='generated from above sms api',
    Message='Your message Here',
    To='recipient')

resp = requests.get(url, params)
print(resp, resp.text) 
```

**注意：每天限制为约 20 条短信******

# java - 使用 nextInt() 的整数输入

> ID：12128771
> 
> 赞同：1
> 
> 时间：2012-08-26T08:44:20.717
> 
> 标签：java, input

因此，我使用 nextInt() 在命令行中从用户那里获取整数输入。但是，我的问题是；当用户不输入整数时，即只按回车而不输入任何内容，nextInt() 不会终止，而是继续提示用户，直到用户输入整数。是否可以将第一个“无输入”作为输入，然后返回一条错误消息，说明没有输入整数？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:48:11.917

```
 String line = null;
    int val = 0;
    try {
      BufferedReader is = new BufferedReader(
        new InputStreamReader(System.in));
      line = is.readLine();
      val = Integer.parseInt(line);
    } catch (NumberFormatException ex) {
      System.err.println("Not a valid number: " + line);
    } catch (IOException e) {
      System.err.println("Unexpected IO ERROR: " + e);
    }
    System.out.println("I read this number: " + val); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:50:02.633

你可以尝试/捕捉。

```
String input = ....
try {
    int x = Integer.parseInt(input);
    System.out.println(x);
}
catch(NumberFormatException nFE) {
    System.out.println("Not an Integer");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T08:51:34.707

尝试将输入作为字符串而不是整数。如果字符串为空，则应引发您提到的错误，否则将字符串转换为整数。我不知道你的程序流程是什么，所以它是一个一般的想法，根据输入需要解析字符串。此外，在使用此方法之前，您应该确保除了整数之外没有其他任何内容作为输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T08:48:15.357

我假设您使用的是`Scanner`. 如果是这样，那么您需要指定您将使用哪个`delimiter`。像这样的东西：

```
Scanner scanner = new Scanner(System.in);
scanner.useDelimiter(System.getProperty("line.separator")); 
while (scanner.hasNextInt()){
    int i = sc.nextInt();
    /** your code **/
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T10:50:18.317

尝试这个

```
 int number;
 boolean is_valid;

    do {
        try {
            System.out.print("Enter Number :");
            Scanner kbd = new Scanner(System.in);
            number = kbd.nextInt();
            is_valid = true;
        } catch (Exception e) {
            System.out.println("Invalid Integer ");
            is_valid = false;
        }
    } while (!is_valid); 
```

# python - Python unicode 麻烦

> ID：12128780
> 
> 赞同：0
> 
> 时间：2012-08-26T08:45:23.243
> 
> 标签：python, unicode, python-2.6

我在编写的脚本中遇到了 unicode 问题。我已经搜索了互联网，包括这个网站，我尝试了很多东西，但我仍然不知道出了什么问题。

我的代码很长，但我将展示一段摘录：

```
raw_results = get_raw(args)
write_raw(raw_results)
parsed_results = parse_raw(raw_results)
write_parsed(parsed_results) 
```

基本上，我得到了以 UTF-8 编码的 XML 格式的原始结果。写入 RAW 数据没有问题。但是写入解析的数据是。所以我很确定问题出在解析数据的函数内部。

我尝试了一切，但我不明白问题是什么。即使是这条简单的线也给了我一个错误：

```
def parse_raw(raw_results)
    content = raw_results.replace(u'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>', u'') 
```

> UnicodeDecodeError：“ascii”编解码器无法解码位置 570 中的字节 0xd7：序数不在范围内（128）

理想情况下，我希望能够使用 unicode 并且没有问题，但我也没有替换/忽略任何 unicode 并仅使用常规文本的问题。我知道我没有提供我的完整代码，但理解这是一个问题，因为它与工作相关。但我希望这足以让我得到一些帮助。

**编辑：**我的 parse_raw 函数的顶部：

```
from xml.etree.ElementTree import XML, fromstring, tostring
def parse_raw(raw_results)    
    raw_results = raw_results.decode("utf-8")
    content = raw_results.replace('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>', '')
    content = "<root>\n%s\n</root>" % content
    mxml = fromstring(content) 
```

**Edit2:** : 我认为最好指出代码工作正常，除非有特殊字符。当它是 100% 英语时，没问题；每当涉及任何外国字母或重音字母时，就会出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:55:57.440

`raw_results`可能是一个`str`对象，而不是一个`unicode`对象。

`raw_results.replace(u'...', ...)`导致 Python 首先将 解码`str` `raw_results`为`unicode`. Python2`ascii`默认使用编解码器。`raw_results`包含`'\xd7'`位置 570 处的字节，编解码器无法`ascii`解码（即，它不是 ascii 字符）。

以下是如何发生此错误的演示：

```
In [27]: '\xd7'.replace(u'a',u'b')      
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd7 in position 0: ordinal not in range(128) 
```

而如果`raw_results`是 unicode，则不会有静默解码`ascii`，因此不会发生错误：

```
In [28]: u'\xd7'.replace(u'a',u'b')
Out[28]: u'\xd7' 
```

`raw_results`如果您知道适当的编解码器，则可以通过显式解码来解决此问题：

```
raw_results = raw_results.decode('latin-1') 
```

`latin-1`只是一个猜测。如果位置 570 的字符是乘法符号，则可能是正确的：

```
In [26]: print('\xd7'.decode('latin-1'))
× 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:35:59.777

Thank you everyone for the input and the nudges. I have subsequently solved my own problem by going over my code for the millionth time with a fine-toothed comb, and I have found the culprit. And I have solved all my problems now.

For anyone with a similar problem, I have the following information that could help you:

*   Use the `codecs` module for writing your files.
*   Do not try to handle it all along your code, your code should ignore any type of character set throughout methods, and should have specific methods or calls to methods where only you modify the charset. (this helped me find the problem)

My problem was that at a certain point I was trying to turn unicode into unicode. And in another place I was trying to turn normal ASCII into ASCII again. So whenever I solved one issue, another arose and I figured it was the same problem.

Break your issue into sections... and then you might find your problem!

# scala - 如何获得 Scala 2.10 反射引用的实际对象？

> ID：12128783
> 
> 赞同：10
> 
> 时间：2012-08-26T08:45:58.493
> 
> 标签：scala, reflection, scala-2.10

请考虑以下代码：

```
object ResponseType extends Enumeration {
  val Listing, Album = Value
} 
```

我可以`Symbol`像这样引用这个对象：

```
import reflect.runtime.universe._
val s = typeOf[ResponseType.Value].asInstanceOf[TypeRef].pre.typeSymbol 
```

现在，有了这个符号，我怎样才能得到实际的`ResponseType`对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T10:15:56.730

```
scala> val moduleClass = typeOf[ResponseType.Value].asInstanceOf[TypeRef].pre.typeSymbol
moduleClass: reflect.runtime.universe.Symbol = object ResponseType

scala> val module = moduleClass.owner.typeSignature.member(moduleClass.name.toTermName)
module: reflect.runtime.universe.Symbol = object ResponseType

scala> reflect.runtime.currentMirror.reflectModule(module.asModule).instance
res9: Any = ResponseType 
```

现在，一些解释是有序的，因为这是一个相当模糊的实现细节，我们（还！）无法在公共 API 中抽象出来。

为每个`object`Scala 创建一个代表其签名的底层类，内部称为*模块类*。例如，如果你编译编译`object C`器会生成`C$.class`. 这正是模块类。

请注意，模块类与伴随类不同。比如说，对于`case class C`，编译器会生成三个符号：`type C`和`term C`(another one) `type C`，其中第一个`type C`代表 C 类（包含自动生成的副本、productPrefix、productArity 等），第二个`type C`代表对象 C 的签名（包含自动生成的工厂、提取器等）。不会有任何名称冲突，因为模块类没有直接添加到符号表中，只能通过`<module>.moduleClass`.

* * *

所以你实际上从你的`typeOf[ResponseType.Value].asInstanceOf[TypeRef].pre.typeSymbol`咒语中得到的是一个代表模块类的符号。API 中没有任何函数可以让您从模块类中获取模块符号。在编译器内部肯定有一个，但我们决定不公开这个实现细节，因为它很可能很快就会改变。

要访问源模块，您需要转到`owner`，查看其成员列表并在其中查找与模块类具有相同名称的对象。这正是这样`moduleClass.owner.typeSignature.member(moduleClass.name.toTermName)`做的。一个小警告是，如果在同一范围内您有一个具有相同名称的方法，那么`member`将返回一个重载符号，您需要执行类似`.member(...).suchThat(_.isModule)`.

之后就是小菜一碟了。

* * *

**编辑。**实际上，我们正在考虑引入`ClassSymbol.module`它将返回模块类的源模块符号，否则返回 NoSymbol。很可能这最终会出现在 RC1 中。遵循发行说明。

# java - 字符串加倍

> ID：12128786
> 
> 赞同：0
> 
> 时间：2012-08-26T08:46:39.893
> 
> 标签：java, android

我尝试从屏幕上读取文本并将其更改为双倍并崩溃

```
public void equesionOperation(int signNum1) {

        S_numInTV=TV_calcScreen.getText().toString();
        S_numUp=TV_calcUp.getText().toString();

        D_numIn=Double.parseDouble(S_numInTV);
        D_numToCalc=Double.parseDouble(S_numUp);

        switch (signNum1){
        case 1: D_sum=D_numIn+D_numToCalc;break;
        case 2: D_sum=D_numIn-D_numToCalc;break;
        case 3: D_sum=D_numIn*D_numToCalc;break;
        case 4: D_sum=D_numToCalc/D_numIn;break;
        case 5: D_sum=Math.pow(D_numToCalc, D_numIn);break;
        default: break;
        }
        S_sum=(""+D_numToCalc+"  "+D_numIn);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:55:35.453

这可能有助于找到崩溃的原因。将第 3 行和第 4 行代码替换为：

```
try {
   D_numIn=Double.parseDouble(S_numInTV);
} catch (NumberFormatException nfe) {
   System.out.printf("Attempted to parse a double, but found: '%s'%n", S_numInTV);
}
try {
D_numToCalc=Double.parseDouble(S_numUp);
} catch (NumberFormatException nfe) {
   System.out.printf("Attempted to parse a double, but found: '%s'%n", S_numUp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:04:51.727

```
 S_numInTV=TV_calcScreen.getText().toString();
 S_numUp=TV_calcUp.getText().toString(); 
```

这些字符串值是文字还是数字？

```
String str1 = "100.476";
Double dObj2 = Double.valueOf(str1);
System.out.println(dObj2); 
```

上面的代码不会出现任何异常但是

```
String str1 = "ss";
    Double dObj2 = Double.valueOf(str1);
    System.out.println(dObj2); 
```

上面的代码会发生numberfomateexception

因此，在将字符串转换为双精度之前，您必须确保输入的是哪个字符串；

# android - 无法运行我的应用程序

> ID：12128788
> 
> 赞同：0
> 
> 时间：2012-08-26T08:46:49.833
> 
> 标签：android

我正在尝试在我的应用程序中使用带有通知的远程视图。但是当我运行我的应用程序时，我得到了`E/AndroidRuntime(11337): java.lang.RuntimeException: Unable to start activity ComponentInfo{net.jeema.HWDTest/net.jeema.HWDTest.HWDTestActivity}: java.lang.NullPointerException`。不知道为什么会发生。我是 android 新手。请帮助我。无法提示为什么我在这里遇到运行时异常。

我的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
        final RemoteViews contentView = new RemoteViews(getPackageName(),
                R.layout.upload_progress_bar);
        contentView.setProgressBar(R.id.progress_bar, MAX_PROGRESS,
                mProgressStatus, false);
        notification=new Notification();
        notification.contentView = contentView;

        // Start file upload in a background thread
        new Thread(new Runnable() {
            public void run() {
                while (mProgressStatus < MAX_PROGRESS) {
                    mProgressStatus = doWork();

                    // Update the progress bar
                    mHandler.post(new Runnable() {
                        public void run() {
                            contentView.setProgressBar(R.id.progress_bar,
                                    MAX_PROGRESS, mProgressStatus, false);
                        }
                    });
                }
            }

            private int doWork() {
                HttpURLConnection conn = null;
                DataOutputStream dos = null;
                DataInputStream inStream = null;
                String lineEnd = "\r\n";
                String twoHyphens = "--";
                String boundary = "*****";
                int bytesRead;
                byte[] buffer;
                String urlString = "http://xxxxx/xxxx/xxx.php";
                try {
                    UUID uniqueKey = UUID.randomUUID();
                    fname = uniqueKey.toString();
                    Log.e("UNIQUE NAME", fname);
                    FileInputStream fileInputStream = new FileInputStream(
                            new File(selectedPath));
                    URL url = new URL(urlString);
                    conn = (HttpURLConnection) url.openConnection();
                    int length = fileInputStream.available();
                    System.out.println("Video Length--->>>>" + length);
                    conn.setDoInput(true);
                    conn.setDoOutput(true);
                    conn.setUseCaches(false);
                    conn.setRequestMethod("POST");
                    conn.setRequestProperty("Connection", "Keep-Alive");
                    conn.setRequestProperty("Content-Type",
                            "multipart/form-data;boundary=" + boundary);
                    dos = new DataOutputStream(conn.getOutputStream());
                    dos.writeBytes(twoHyphens + boundary + lineEnd);
                    dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                            + fname + "" + lineEnd);
                    dos.writeBytes(lineEnd);
                    buffer = new byte[8192];
                    bytesRead = 0;
                    while ((bytesRead = fileInputStream.read(buffer)) > 0) {
                        dos.write(buffer, 0, bytesRead);
                    }
                    dos.writeBytes(lineEnd);
                    dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
                    Log.e("Debug", "File is written");
                    fileInputStream.close();
                    dos.flush();
                    dos.close();

                } catch (MalformedURLException ex) {
                    Log.e("Debug", "error: " + ex.getMessage(), ex);
                } catch (IOException ioe) {
                    Log.e("Debug", "error: " + ioe.getMessage(), ioe);
                }
                // ------------------ read the SERVER RESPONSE
                try {
                    inStream = new DataInputStream(conn.getInputStream());
                    String str;
                    while ((str = inStream.readLine()) != null) {
                        Log.e("Debug", "Server Response " + str);
                    }
                    inStream.close();

                } catch (IOException ioex) {
                    Log.e("Debug", "error: " + ioex.getMessage(), ioex);
                }
                return 0;
            }
        }).start();
    } 
```

我的日志猫：

```
08-26 14:15:49.542: E/AndroidRuntime(12359): FATAL EXCEPTION: main
08-26 14:15:49.542: E/AndroidRuntime(12359): java.lang.RuntimeException: Unable to start activity ComponentInfo{net.jeema.HWDTest/net.jeema.HWDTest.HWDTestActivity}: java.lang.NullPointerException
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.os.Looper.loop(Looper.java:123)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.app.ActivityThread.main(ActivityThread.java:3683)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at java.lang.reflect.Method.invokeNative(Native Method)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at java.lang.reflect.Method.invoke(Method.java:507)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at dalvik.system.NativeStart.main(Native Method)
08-26 14:15:49.542: E/AndroidRuntime(12359): Caused by: java.lang.NullPointerException
08-26 14:15:49.542: E/AndroidRuntime(12359):    at net.jeema.HWDTest.HWDTestActivity.onCreate(HWDTestActivity.java:36)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-26 14:15:49.542: E/AndroidRuntime(12359):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-26 14:15:49.542: E/AndroidRuntime(12359):    ... 11 more 
```

我的清单.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.jeema.HWDTest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".HWDTestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>         
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:55:28.513

您在创建通知之前正在使用它......试试这种方式：

```
notification=new Notification();
notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT; 
```

# javascript - iframe 加载后删除类

> ID：12128793
> 
> 赞同：-2
> 
> 时间：2012-08-26T08:47:50.193
> 
> 标签：javascript, jquery, html

我需要在 iframe 加载后删除隐藏的类，我的代码[http://jsfiddle.net/rzP5S/3/](http://jsfiddle.net/rzP5S/3/)，我尝试使用 .ready() 但没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:53:23.650

你可以试试

```
<iframe onload="removeClass();" ... /> 
```

编辑：

stackoverflow 上的相关线程：[动态插入的 iframe 中的 jQuery .ready](https://stackoverflow.com/questions/205087/jquery-ready-in-a-dynamically-inserted-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:59:02.300

你可以试试

```
$(window).load(function () {
 //Use removeClass() here
 $('#contentpage').children().removeClass('onePost');
}); 
```

# c# - 尝试在 wpf 应用程序中使用 winforms 控件

> ID：12128797
> 
> 赞同：1
> 
> 时间：2012-08-26T08:48:22.167
> 
> 标签：c#, wpf, winforms

我正在尝试在一个简单的 WPF 应用程序中使用使用 winforms 的 MonthCalendar 控件。我发现通过使用 WindowsFormsHost，winforms 控件可以在 wpf 应用程序中使用。它适用于 winforms 的内置控件，但是当我尝试实例化此控件 MonthCalendar 的对象时，我收到一条错误消息，提示“无法实例化 MonthCalendar 的对象”。

关于为什么会发生这种情况以及如何克服这个问题的任何建议？MonthCalendar 的源代码位于[http://www.codeproject.com/Articles/10840/Another-Month-Calendar?msg=2298161#xx2298161xx](http://www.codeproject.com/Articles/10840/Another-Month-Calendar?msg=2298161#xx2298161xx)

我在 xaml 中实例化它：

```
<Window x:Class="MonthCalendarTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
    xmlns:pc="clr-namespace:Pabo.Calendar"
    Title="MainWindow" Height="350" Width="525">
<Grid Height="65" Width="280">

    <WindowsFormsHost Margin="0,0,12,12" Height="100">
        <pc:MonthCalendar></pc:MonthCalendar>

    </WindowsFormsHost>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:21:07.863

我可以按照以下步骤使其工作：

*   使用 Visual Studio 2010
*   创建新的 WPF 应用程序
*   将平台更改为“.Net Framework 4”（不是客户端配置文件）
*   添加对 System.Windows.Forms 和 WindowsFormIntegration 的引用

*   从以下网址下载 MonthCalendar：http:
    [//www.codeproject.com/KB/selection/MonthCalendar/MonthCalendar_src_vs2005.zip](http://www.codeproject.com/KB/selection/MonthCalendar/MonthCalendar_src_vs2005.zip)

*   提取 MonthCalendar，并作为现有项目添加到解决方案
*   将 MonthCalendar 平台更改为“.Net Framework 4”（不是客户端配置文件）
*   删除并重新添加 System.Design 参考，以便您使用 .NET 4 之一
*   在 WPF 应用程序中添加对 MonthCalendar 项目的引用
*   在 XAML 中使用命名空间引用 xmlns:pc="clr-namespace:Pabo.Calendar;assembly=MonthCalendar"

![在此处输入图像描述](../Images/d5b0d3e8d36312a2ce7c61220b5db01b.png)

```
<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        xmlns:pc="clr-namespace:Pabo.Calendar;assembly=MonthCalendar"
    Title="MainWindow" Height="350" Width="525">
    <Grid Height="65" Width="280">
        <WindowsFormsHost Margin="0,0,12,12" Height="100">
            <pc:MonthCalendar x:Name="myCalendar"/>
        </WindowsFormsHost>
    </Grid>
</Window> 
```

那么你有什么不同的做法呢？

您是否将 MonthCalendar 保留在它自己的项目中？

您在哪个操作系统平台上运行？

# css - CSS 元素特定的伪元素

> ID：12128801
> 
> 赞同：0
> 
> 时间：2012-08-26T08:48:34.350
> 
> 标签：css, pseudo-element

这可能不是问这个问题的正确地方，但无论如何我都会问，如果我选择了错误的发布位置，有人可以移动它。

我已经阅读了各种可用于设置实际不存在的“假”元素样式的伪元素。我知道有像 ':before' 和 ':after' 这样的。

我也知道还有其他用于特定元素的，比如`::input-placeholder`. 是否有人知道提供所有不同伪元素（包括特定元素的伪元素）详细信息的参考资料？

我用谷歌搜索了它，我找不到任何可以同时执行更“通用”*和*与特定元素相关联的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:50:37.523

CSS3 中的所有伪元素或一般的 CSS3 构造都没有权威的列表，因为 CS3 本身就是一个移动的目标，是一个成熟度各不相同的模块的集合。W3C 只维护模块的链接集合：http: [//www.w3.org/Style/CSS/current-work.en.html](http://www.w3.org/Style/CSS/current-work.en.html)

我遇到的最好的编译是[MDN CSS Reference](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference)。但请注意，您还需要关注 Mozilla 和 WebKit 扩展的链接，以了解可能在浏览器中实现的内容。

在特定的情况下`::input-placeholder`，即使在草稿中也不存在这样的伪元素，但是有供应商前缀的版本，请参阅问题[Change an input's HTML5 placeholder color with CSS](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)。

# php - 带有逗号分隔符的 foreach 循环导致错误

> ID：12128802
> 
> 赞同：0
> 
> 时间：2012-08-26T08:48:35.700
> 
> 标签：php, zend-framework, socialengine

我正在我的网站上实现 jplayer，需要在 php 中生成播放列表。我几乎已经解决了逗号分隔问题，但是我用来获取歌曲网址和歌曲标题的调用导致 php 错误，我不太确定我做错了什么。我使用社交引擎 Zend 的扩展。我通常能够在 for each 循环中使用`<?php echo $this->string()->truncate($song->getTitle(), 50) ?>`并 `<?php $current_url = explode('?', $song->getFilePath()); echo $current_url[0]; ?>`生成我的 mp3 标题和 url，而不会出现问题。我的代码在下面，有人可以指出我正确的方向吗？

```
<?php
  $count = 0;
  foreach( $songs as $song => $item): if( !empty($song) ): ?>
  <?php if ( $count ) { print ", "; } $count++; ?>

{

    title:"<?php echo $this->string()->truncate($song->getTitle(), 50) ?>",

    mp3:"<?php $current_url = explode('?', $song->getFilePath());
echo $current_url[0]; ?>"

}
<?php endif; endforeach; ?> 
```

编辑：我看到的错误是“在 ...player.tpl 中的非对象上调用成员函数 getTitle()”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:03:28.393

你`$song`在你应该使用的循环内部使用`$item`. `$song`只是数组键，所以没有调用方法`getTitle`while`$item`是您的实际对象。

# android - 如何通过视口使我的网站宽度适合移动设备的大小？

> ID：12128805
> 
> 赞同：1
> 
> 时间：2012-08-26T08:49:08.377
> 
> 标签：android, iphone, safari

我有一个宽度为 1280 像素的网站。当我第一次看到它时，我想使网站宽度适合移动设备的大小。

然后，我如下使用视口元标记，但它不起作用。

```
<meta name="viewport" content="width=1280, initial-scale=0.25" /> 
```

如何通过视口使我的网站宽度适合移动设备的大小？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:05:45.920

试试这个：

```
<meta name="viewport" charset="utf-8" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/> 
```

*width=device-width*应该可以解决问题。初始*比例、最大比例和用户可缩放*将阻止用户对您的网站应用任何类型的缩放，如果不需要，您可以将其删除。

# objective-c - 在IOS中从返回的json对象发出http请求并解析特定数据

> ID：12128806
> 
> 赞同：0
> 
> 时间：2012-08-26T08:49:14.930
> 
> 标签：objective-c, ios, json

我已经通过教程管理了在 obj-C 中发出 http 请求和解析 json 对象。从我得到的数据中不，我想将前 17 个保存到一个数组中，并将 20-33 中的项保存到另一个数组中。问题是数据的顺序与我在 http 请求中的顺序不同，但在另一个请求中，所以我不能这样做，因为它们的顺序不同。

这是我的代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

    // convert to JSON
    NSError *myError = nil;
    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];
    NSMutableArray *array_1 = [NSMutableArray array];
    NSMutableArray *array_2 = [NSMutableArray array];
    int index=0;

    // show all values
    for(id key in res) {
        index=index+1;
        id value = [res objectForKey:key];

        NSString *keyAsString = (NSString *)key;
        NSString *valueAsString = (NSString *)value;

       if (index<=17){
            [array_1 addObject:valueAsString];
            NSLog(@"%i: array 1 filling up: %@",index, keyAsString);
            NSLog(@"%@",array_1);

        } else if ((index>20)&&(index<=33)){
            [array_2 addObject:valueAsString];

        }
    }
} 
```

所以我希望我的数据与我在浏览器中运行脚本时的顺序相同。我想这与 NSDictionary 有关，但我不知道还能使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:08:28.337

An`NSDictionary`只是键与值的关联。键/值对没有顺序。可能的解决方案：

*   使用数组而不是字典作为 JSON 数据中的顶级对象。
*   以可以排序的方式选择字典键。

**添加**

如果字典键是排序字符串，那么你可以这样做

```
int index = 0;
NSArray *sortedKeys = [[res allKeys] sortedArrayUsingSelector: @selector(compare:)];
for (NSString *key in sortedKeys) {
    index = index + 1;
    NSString  *value = [res objectForKey:key];
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:08:58.580

没有简单的方法可以实现这一目标。正如 NSDictionary 的文档所述，字典中键的顺序是未指定的。如果您确实必须依赖项目的顺序，请使用 JSON 本身中的数组包装它们（在解析期间生成 NSArray），或者创建一个 NSDictionary 的子类，以使键顺序保持不变。

# emacs - Emacs Gnus 接收邮件(dis)order

> ID：12128809
> 
> 赞同：3
> 
> 时间：2012-08-26T08:49:49.610
> 
> 标签：emacs, gmail, gnus

在使用 Emacs 的这些年里，我从未将它用于电子邮件。总是认为它是一个非常复杂的系统（更不用说电子邮件是一个过于复杂的系统，无法进行消息传递，但这是一个不同的抱怨）。现在，第一次使用 Gnus 并将其连接到 GMail 时，收件箱中出现的电子邮件没有按顺序或顺序到达。例如，大约 2 年前的一条消息出现在列表顶部，然后是上周的另一条消息，而今天收到的一堆消息根本没有加载。

不幸的是，我在试验我的 X 服务器方面做得太过分了......而且我需要掩盖它无法启动的时间...... :)

我怀疑消息的选择可能会受到“状态”或某种优先级的影响，GMail 出于其机器人思维，正在分配给这些消息 - 显然是错误的。如果我的猜测是正确的，是否可以覆盖此行为，例如以接收消息的相同顺序加载消息？这对我有很大帮助。提前致谢！

我放弃了更接近中间的某个地方的编辑，但是，从最后开始阅读，你会在我放弃之前得到这个想法：

```
!. [   8: ***********            ] *****, *****!!! check this out(:  # Can't even find this...
 . [   0: ***********            ]                                 
!. [  19: ***********            ] Re: Hello ****. Nice to meet you
 . [ 162: Twitter                ] ******, ***** ******, and 2 othe 
 . [  38: Vimeo                  ] Welcome to Vimeo!                  # Almost two years ago
!. [  25: ***********            ] Re: Do you use haxe-mode still?  
!. [  58: ***************        ] Re: wvxvw (*****) from lispforum
!. [  26: *************          ] Re: bug#11813: Segmentation fault
 . [ 174: Open Spoon Foundation  ] Apache Flex Community Revue July 
!. [  72: *************          ] Re: bug#11850: crash (null font)   # Second newest        (1)
!. [  42: *************          ] Re: bug#11813: bug#11850: crash (  # Received a month ago
!.     <  17: ***********           > 
!. [  25: ACM International Confe] ICFP Programming Contest: one wee
!. [  19: ACM International Confe] Message to attendees of ICFP 2012
!. [  57: ***************        ] Probably no one else for ICFP    
!. [  61: ************           ] Re: bug#11850: bug#11813: bug#118
 . [  55: ********** via LinkedIn] ת מעצב למישהו עם שנה ניסיון ומעלה
!. [   5: ***************        ] Be wary of Dropbox and git repos
 . [  14: ACM International Confe] Task Details for ICFP 2012 Progra  # 
 . [  26: ACM International Confe] How to contact us during the Cont
 . [  14: ACM International Confe] Submission
 . [  15: ACM International Confe] Lightning Division Entry MD5 Keys
 . [  14: ACM International Confe] Underground growths
 . [  15: ACM International Confe] More Lambdas
 . [  19: ***************        ] Re: [CLSQL] OUTER JOIN             # This actually arrived before
 . [  28: ***************        ] [CLSQL] Problem with clsql-mysql.d # the patch.
 .     [  30: ************           ]                                #
 .         [  36: ***************        ]                            #                           
!. [   2: Unblock Review Team    ] Response to your unblock appeal    # They blocked me instead of 
                                                                      # some other dude!                          
 . [  15: CouchSurfing           ] We miss you on CouchSurfing!       # Stopped counting :)
------------------- missing 1 message here  ---------------------------------------------------------
 . [  18: ****************       ] [CLSQL] [PATCH] Clisp portability
------------------- missing 1 message here  ---------------------------------------------------------
 . [  33: ***************        ] Re: [CLSQL] CLSQL Digest, Vol 56,                        
 . [  23: ***************        ] [CLSQL] Newbie troubles with the t                      
 .     [  52: ********           ]                                     
------------------- missing 5 messages here ---------------------------------------------------------
!. [  20: agent.ruby@amd.com     ] AMD Game subscription update.                                  
 . [  29: *********              ] Re: hey (******)                    # This is the 57'th newest (11)
 .     [  34: *****              ]                                     # This message has 12 more 
                                                                       # responses
------------------- missing 25 messages here --------------------------------------------------------
 . [  91: Glassdoor              ] Lots of new jobs on Glassdoor - ma     
!. [  21: ***************        ] Hi there                            # This is the 32'th newest (10)
------------------- missing 7 messages here ---------------------------------------------------------
 . [  17: **********             ] [CLSQL] Postmodern changes affecti  # Received about a year ago
 .     [  32: ********           ]                                     # 
 . [  98: **********             ] [CLSQL] clsql on cmucl under 64 bi  # This is the 25'th newest (9)
------------------- missing 5 messages here ---------------------------------------------------------
 . [  10: Coursera               ] Welcome to Coursera!                # This is the 19'th newest (7)
 . [   1: Machine Learning | Cour] Welcome to Machine Learning!        # This is the 20'th newest (8)
------------------- missing 3 messages here ---------------------------------------------------------
 . [ 146: Jobmaster.co.il        ] כוז הצעות עבודה לתאריך: 22/08/2012  # This is the 16'th newest (6)
------------------- missing 5 messages here ---------------------------------------------------------   
 . [  49: <***************@mail.r] [CLSQL] CLSQL on ECL                # This is the 11'th newest (5) 
------------------- missing 2 messages here ---------------------------------------------------------                    
 . [  41: Mail Delivery Subsystem] Delivery Status Notification (Fail
------------------- missing 1 message here  ---------------------------------------------------------
 . [ 148: Jobmaster.co.il        ] כוז הצעות עבודה לתאריך: 23/08/2012  # This is the 6'th newest  (4)
 . [  87: Udacity                ] Udacity Newsletter - August 2012    # This is the 5'th newest  (3)
------------------- missing 2 messages here ---------------------------------------------------------
 . [  17: ************           ] call today                          # This is the newest       (0) 
```

**编辑**

我今天尝试了 Alpine 邮件代理，看看这是否与 GMail 提供邮件的方式有关，但是，对不起，这是 Gnus 的问题，或者是我的配置问题，下面是大致的列表同一时期，通过Alpine检索到的同一个邮箱：

```
 2004 Aug 13     Nisha Hitech                   (15K) Nisha Group - Recruitment & Placement
    2005 Aug 14     ***** *********** via LinkedIn (13K) Join my network on LinkedIn
  N 2006 Aug 14     Glassdoor                      (34K) Lots of new jobs on Glassdoor - maybe
    2007 Aug 16     ***** ******                    (4K) Re: bug#11850: bug#11813: bug#11850: 
*   2008 Aug 16     ***** *********                 (4K) Hi there
    2009 Aug 16     ****** ****                     (2M) Quiz - stuff
    2010 Aug 16     ****** ****                    (.6M) XML
    2011 Aug 17     ****** ****                     (1M) Updated quiz
  N 2012 Aug 17     **** *****                      (7K) [CLSQL] Postmodern changes affecting 
  N 2013 Aug 17     **** *******                    (6K) Re: [CLSQL] Postmodern changes affect
    2014 Aug 17     ****** ****                     (1M) Adjustments
    2015 Aug 17     ****** ****                    (17K) Re: Adjustments
    2016 Aug 18     ****** ****                     (1M) Updated
    2017 Aug 18     Sampler                         (9K) Error
    2018 Aug 18     ****** ****                    (.5M) Score
    2019 Aug 18     ****** ****                    (17K) Re: Score
    2020 Aug 19     donotreply@hunterhrms.com       (2K) Thank you for your CV
    2021 Aug 19     **** ******- Hiway             (18K) בהמשך לשיחתנו
    2022 Aug 19     ****** *****                   (62K) חבר ITR-משרות פיתוח פלאש
    2023 Aug 19     **** ******- Hiway             (19K) RE: בהמשך לשיחתנו
    2024 Aug 19     ***** *********                (15K) Re: Hi there
    2025 Aug 19     *** *******                     (2K) flash
    2026 Aug 19     *** *******                     (2K) sent you an email on other address
    2027 Aug 19     *** *******                     (4K) Re: sent you an email on other addres
    2028 Aug 20     ****** ****                     (8K) Fwd: Machine Learning is now live!
    2029 Aug 20     service@paypal.co.il           (10K) How to reset your PayPal password
    2030 Aug 20     service@paypal.co.il            (9K) You just changed your password
    2031 Aug 20     service@paypal.co.il            (8K) You linked your bank account to your 
    2032 Aug 20     ****** ****                     (3K) Re: Machine Learning is now live!
    2033 Aug 20     NCsoft Support                  (3K) Verify your e-mail address for your N
    2034 Aug 20     NCsoft Support                  (4K) Thank you for creating a new NCsoft M
  N 2035 Aug 20     ***** ****                     (10K) [CLSQL] clsql on cmucl under 64 bit u
    2036 Aug 20     *** *. via LinkedIn            (13K) Join my network on LinkedIn
    2037 Tuesday    Reggae                          (3K) Re: Machine Learning is now live!
  N 2038 Tuesday    Machine Learning | Coursera St  (3K) Welcome to Machine Learning!
  N 2039 Tuesday    Coursera                        (4K) Welcome to Coursera!
    2040 Tuesday    *** ******** via LinkedIn       (6K) nice meeting you
    2041 Tuesday    *** ********                    (9K) RE: Join my network on LinkedIn
    2042 Tuesday    *** ********                    (3K) RE: Join my network on LinkedIn
    2043 Tuesday    הסוכן החכם של ג'ובנט           (32K) דרוש/ה GUI FLEX Architect
    2044 Aug 19     ***** ******                    (5K) Carambola - ****
    2045 Wednesday  **** *****                      (1K) Re: Carambola - ****
    2046 Wednesday  *** ********                    (4K) RE: Join my network on LinkedIn
    2047 Wednesday  ***** ******                    (5K) Re: Carambola - ****
    2048 Wednesday  *** ********                    (4K) RE: Join my network on LinkedIn
  N 2049 Thursday   Jobmaster.co.il                (16K) ריכוז הצעות עבודה לתאריך: 22/08/2012
    2050 Thursday   ***** ******                   (17K) Re: Carambola - ****
  N 2051 Thursday   ***************@mail.ru         (7K) [CLSQL] CLSQL on ECL
    2052 Thursday   web-admin@winehq.org            (2K) Welcome to "WineHQ Forums"
    2053 Thursday   web-admin@winehq.org            (2K) Topic approved - "OpenGL renderer isn
  N 2054 Thursday   Mail Delivery Subsystem         (3K) Delivery Status Notification (Failure
    2055 Thursday   web-admin@winehq.org            (2K) Post approved - "Re: OpenGL renderer 
  N 2056 Friday     Jobmaster.co.il                (16K) ריכוז הצעות עבודה לתאריך: 23/08/2012
  N 2057 Thursday   Udacity                        (28K) Udacity Newsletter - August 2012
    2058 Friday     ggtse@gigabyte.com.tw           (5K) GIGABYTE Tech. Support Reply Notifica
    2059 Friday     web-admin@winehq.org            (2K) Post approved - "Re: OpenGL renderer 
    2060 Yesterday  ***** ******                    (5K) Re: bug#11850: bug#11813: bug#11850: 
    2061 Yesterday  *** ********                    (4K) call today 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:38:37.997

消息的索引顺序由服务器 (gmail) 控制，而不是 Emacs/Gnus。我猜想在为大量消息优化他们的服务器时，谷歌打破了惯例，文章编号不再按顺序分配。唯一的答案就是下载所有标题，这样 Gnus 就可以根据日期或您的偏好自行进行排序。如果您的收件箱中有很多邮件，您可能需要先清理一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:32:01.827

查看Gnus 手册中的[此页面](http://www.gnu.org/software/emacs/manual/html_node/gnus/Sorting-the-Summary-Buffer.html)。基本上，Gnus 默认按文章编号排序。这对我来说一直都是日期顺序，但您的 GMail 电子邮件可能发生了一些奇怪的事情 - 您是否从其他邮件服务器导入了它们？（我不知道 - 我只是猜测）

无论如何，我猜你想要类似的东西

```
(setq gnus-thread-sort-functions
      '(gnus-thread-sort-by-number
        gnus-thread-sort-by-date)) 
```

请注意，这假定您使用的是线程显示（这是默认设置，可能是您想要的）。如果没有，我链接到的页面有相关的修改。

# c# - 如何获取超网格的所有行甚至删除的行

> ID：12128811
> 
> 赞同：3
> 
> 时间：2012-08-26T08:50:06.440
> 
> 标签：c#, datatable, infragistics, ultrawingrid

我想获得一个超网格的所有行，甚至删除行。我已使用以下代码仅选择此网格的一列，但它导致了错误：

> “已删除的行信息无法通过行访问。”

```
((DataTable)grid1.DataSource).AsEnumerable()
                             .Select(row => row.Field<String>("filedName"))
                             .ToList(); 
```

我曾经`.AcceptChanges()`解决过这个错误，但现在结果不包含已删除的行。

谁能帮我获取所有行，包括这个超网格的已删除行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T09:07:31.887

对 DataRow 应用 Delete 方法后，无法直接访问它。如果您调用[AcceptChanges](http://msdn.microsoft.com/en-us/library/system.data.datarow.acceptchanges)，则此 DataRow 将从集合中删除，就像它从未存在过一样。（因此，如果您尚未更新数据库，则该行将永远不会从数据库中删除）

要反转[Delete](http://msdn.microsoft.com/en-us/library/system.data.datarow.delete)方法的效果，唯一可能的方法是使用 RejectChanges 方法，但此后，该行将不再被删除。

我不能在 LinQ 中给你一个例子，但是，通常你需要做这样的事情

```
for(int x = 0; x < datatable.Rows.Count; x++)
{
   DataRow r = dataTable.Rows[x];
   if(r.RowState == DataRowState.Deleted)
   {
       r.RejectChanges();
       .... //do you stuff
       r.Delete(); // redelete the row,
   }
} 
```

此外，如果您只对已删除的行感兴趣，您可以通过这种方式更改上面的代码，以从原始表中提取已删除行的子集。

```
DataTable deletedRowsTable = datatable.GetChanges(DataRowState.Deleted);
for(int x = 0; x < deletedRowsTable.Rows.Count; x++)
{
    .....
    // no more if needed here, because the rows are all deleted
    .....
} 
```

# xamarin.ios - 在 MonoTouch 和 Mono for Android 中引用 ADO.NET 项目

> ID：12128815
> 
> 赞同：0
> 
> 时间：2012-08-26T08:50:30.100
> 
> 标签：xamarin.ios, xamarin.android

我正在尝试使用 MonoTouch + Mono for Android 实现客户端-服务器解决方案。

对于服务器端，我使用的是 ADO.NET 实体模型。AFAIK，这不是上述框架的一部分，但我的问题是：

我可以仅为了部分重用客户端上的实体而在客户端中引用（通用）基于 ADO.NET/EF4 的数据层项目吗？或者，对于这个架构问题是否有不同的解决方案？

编辑：忘了说，对于客户端，我正在考虑从 POCO 模板自动生成的 POCO 实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:45:09.387

执行此操作的一个好方法是采用 ADO.NET 实体框架中的代码优先方法。在服务器上创建实体并为其构建 DataContext 实现后，请按照以下步骤将实体添加到 Mono for Android 项目（如果您使用的是 Visual Studio）。

1.  右键单击 Mono for android 项目并选择添加现有项目
2.  选择要添加的文件
3.  单击打开按钮旁边的小箭头，然后选择链接。

现在，当您在服务器项目或客户端中编辑文件时，它们将保持同步。请记住，您可以从实体中使用的一组属性和 API 是有限的。把事情做对可能需要一些技巧。

**提示：**使用部分类来添加特定于环境的行为和数据。为每个实体类添加第二个 .cs 文件，并将客户端上不需要的任何成员添加到该文件中。这同样适用于您只需要在您的应用程序中而不是在服务器上的客户端功能。

当您使用 MonoDevelop 在 Mac 上工作时，上述所有方法也适用。该应用程序还支持链接与 .csproj 文件位置不同的项目。

# regex - 将字符串拆分为带空格的数字

> ID：12128819
> 
> 赞同：0
> 
> 时间：2012-08-26T08:51:40.077
> 
> 标签：regex, split

我有一条线需要分成三个数字（价格、税收、总价）：

```
Total 17 387,25 3 477,50 20 864,75 
```

有可能这样做吗？重要的是数字不必是千，这一行也是有效的：

```
Total 9999,99 1999,99 11 999,99 
```

所有分隔符都是空格。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T08:55:11.290

```
(\d[\d ]*,\d+) ([\d ]+,\d+) ([\d ]+,\d+) 
```

1 美元 = 价格 2 美元 = 税 3 美元 = 总计

# c# - 在 EF CF 中播种和保存数组

> ID：12128822
> 
> 赞同：1
> 
> 时间：2012-08-26T08:52:24.157
> 
> 标签：c#, .net, entity-framework, ef-code-first

我的 ASP.NET MVC 项目中有两个模型。在播种以包含测试数据时，我执行以下操作：

```
context.Dialogs.Add(new Dialog
{
    Id = 1,
    Chapter = 1,
    Index = 0,
    DialogColor = "default-color",
    DialogText = "blah blah!",
    Character = "none",
    Transition = false,
    Fade = true,
    Timer = 0,
    Actions = new List<Action>
    {
        new Action { ActionText = "--continue--", ActionLink = 1, Id=1 }
    }
}); 
```

这将记录保存在 Dialog 表中，但未保存 Actions，我知道我可能可以先保存对话框，然后将 Action 添加到它，但我希望能够像上面那样将其全部内联添加？

对话模型：

```
public class Dialog
{
    [Key]
    public int Id { get; set; }
    public int Chapter { get; set; }
    public int Index { get; set; }
    public string DialogColor { get; set; }
    public string DialogText { get; set; }
    public string Character { get; set; }
    public bool Transition { get; set; }
    public bool Fade { get; set; }
    public int Timer { get; set; }

    public virtual IEnumerable<Action> Actions { get; set; }
} 
```

行动模式：

```
public class Action
{
    [Key]
    public int Id { get; set; }
    public string ActionText { get; set; }
    public int ActionLink { get; set; }

    public Dialog Dialog { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:20:49.587

您需要更新模型以使用 ICollection，以便实体框架进行正确的关联。从这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/47296641-0426-49c2-b048-bf890c6d6af2/)：

> 实体框架不支持通过 Add 和 Remove 方法公开为 IEnumerable 的集合属性。

在您的对话框类中，将您的属性更新为：

```
 public virtual ICollection<Action> Actions { get; set; } 
```

**编辑：**

结合其他要查找的内容，导航属性是否已映射？

您可以尝试添加流畅的映射：

```
 protected override void OnModelCreating( DbModelBuilder modelBuilder )
  {
     modelBuilder.Entity<Dialog>()
        .HasMany(d => d.Actions)
        .WithOptional(a => a.Dialog);

  } 
```

FK 是否真的被映射到数据库中？注意：操作表上的 Dialog_Id。如果你没有这个，那么 EF 实际上并没有映射你的关系

![在此处输入图像描述](../Images/93cc154591a52d0987ea886b7b7ea502.png)

如果这些都不起作用，您可以在列表中创建实体时始终将实体显式添加到您的上下文中：

```
 context.Dialogs.Add( new Dialog
     {
        Id = 1,
        Chapter = 1,
        Index = 0,
        DialogColor = "default-color",
        DialogText = "blah blah!",
        Character = "none",
        Transition = false,
        Fade = true,
        Timer = 0,
        Actions = new List<Action>
            {
                context.Actions.Add(new Action()
                                       {
                                          ActionText = "--continue--",
                                          ActionLink = 1, Id=1 
                                       })
            }
     } ); 
```

将实体添加到上下文后， [DbSet.Add](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.add%28v=vs.103%29.aspx)方法将返回该实体。

# javascript - JavaScript Scope：如何创建具有不同值的匿名函数？

> ID：12128823
> 
> 赞同：0
> 
> 时间：2012-08-26T08:52:25.840
> 
> 标签：javascript, dojo

我有许多按钮，我想以编程方式为每个按钮添加一个 onclick 函数。我希望这些函数知道它们附加到哪个按钮编号，但我不想解析按钮 ID 来获取数字。肯定有更好的办法：

```
 require(["dojo/dom", "dojo/domReady!", "dojo/on"], function(dom, domReady, on) {
        for (var i = 0; i < 10; i++) {
            on(dom.byId("button"+ i), "click", function(e) {
                console.log("Number: "+ i);
            });
        }
    }); 
```

如何添加一个函数以便它正确输出按钮编号而不执行此操作：

```
console.log("Number: "+ e.srcElement.id.substring(6)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T08:57:25.093

怎么样

```
for (var i = 0; i < 10; i++) {
    on(dom.byId("button"+ i), "click", (function(number){
        return function(e) {
            console.log("Number: "+ number);
        };
    })(i));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:22:37.793

您可以通过以下方式实现相同的目的[`dojo/_base/lang::partial`](http://livedocs.dojotoolkit.org/dojo/_base/lang#partial)：

```
require([
    "dojo/_base/lang",
    "dojo/dom",
    "dojo/on",
    "dojo/domReady!"
], function(
    lang,
    dom,
    on
) {

    var button_onClick = function(i, event) {
        console.log("Number:", i);
    }

    for (var i = 1; i <= 3; i++) {
        on(dom.byId("button" + i), "click", lang.partial(button_onClick, i));
    }

});​ 
```

在 jsFiddle 上查看一个工作示例：http: [//jsfiddle.net/phusick/KhsXB/](http://jsfiddle.net/phusick/KhsXB/)

# php - ((basename($PHP_SELF) == FILENAME_DEFAULT

> ID：12128824
> 
> 赞同：-2
> 
> 时间：2012-08-26T08:52:44.500
> 
> 标签：php

我希望右框只能看到 index.php
代码

```
if ($oscTemplate->hasBlocks('boxes_column_right')) {
?>
<div id="columnRight" class="grid_<?php echo $oscTemplate->getGridColumnWidth(); ?>">
<div><?php echo $oscTemplate->getBlocks('boxes_column_right'); ?></div> 
alternative with index page
if ($oscTemplate->hasBlocks('boxes_column_right')) && ((basename($PHP_SELF) == FILENAME_DEFAULT)) {
?>
<div id="columnRight" class="grid_<?php echo $oscTemplate->getGridColumnWidth(); ?>">
<div><?php echo $oscTemplate->getBlocks('boxes_column_right'); ?></div> 
```

但它没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T08:58:05.980

你可以做：

```
$basename = str_replace(".php","",basename($_SERVER['REQUEST_URI']));
if( $basename == "index" ) {
  //show right column
} 
```

或者

```
$name = basename($_SERVER['PHP_SELF']);
if ($oscTemplate->hasBlocks('boxes_column_right')) && (($name == "index.php")) {
  //show right column
} 
```

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:42:03.173

我用它来完成类似的任务：

`if ($current_page = FILENAME_DEFAULT) { //Show }`

# c - 如何在 C 程序中嵌入库？

> ID：12128826
> 
> 赞同：1
> 
> 时间：2012-08-26T08:52:59.467
> 
> 标签：c

我想在我的程序中嵌入 lib tar 库，所以如果我从另一台没有安装 libtar 的计算机上运行它，它可以正常运行。这也消除了版本问题。

我对C仍然知之甚少。这可能吗？最佳实践是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:57:01.693

您必须将您的应用程序与您要使用[的库的静态版本链接。](http://en.wikipedia.org/wiki/Static_library#Creating_static_libraries_in_C.2FC.2B.2B)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T08:58:05.170

您可以拥有一个静态库并将您的程序与该库链接。这会将静态库嵌入到您的程序中，因此您不需要单独拥有。

# java - java嵌套类-eclipse问题

> ID：12128828
> 
> 赞同：0
> 
> 时间：2012-08-26T08:53:28.377
> 
> 标签：java, eclipse, nested

我需要一个嵌套类，但是我使用一个类一个文件系统进行开发。我只是将需要嵌套的类移到外部类内部，并使内部类的实例化保持不变。但是，当尝试在 Eclipse 中调试时，我的嵌套类会收到以下错误消息`" Source not found." -(ClassNotFoundException)`。但是代码工作正常，只是我无法主动调试并在我的嵌套类中查看当前异常行。

```
public class Tract {
    public class chicken{

    }
    public Tract{
        chicken = new chicken(d);
    }
} 
```

谢谢，丹尼尔

# java - 为什么 0.1 正确地以浮点数表示？（我知道为什么不是 2.0-1.9 的结果）

> ID：12128829
> 
> 赞同：11
> 
> 时间：2012-08-26T08:53:41.047
> 
> 标签：java, floating-point

我最近读了很多关于浮点表示的内容（包括：[How To Represent 0.1 In Floating Point Arithmetic And Decimal](https://stackoverflow.com/questions/3448777/how-to-represent-0-1-in-floating-point-arithmetic-and-decimal)）。现在我明白 0.1 无法正确表示，当我这样做时：

```
System.out.println(2.0f - 1.9f); 
```

我永远不会得到精确的结果。

所以问题是：如何在以下代码中表示 0.1f 才能正确打印 0.1？那是某种合成糖吗？在我上面提到的文章中说：0.1 在内存中表示为 0.100000001490116119384765625。那么为什么我没有得到这段代码的输出：

```
System.out.println(0.1f); 
```

Java 是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T09:01:45.700

`System.out.println`对浮点数和双精度数执行一些舍入。它使用`Float.toString()`, 它本身（在 oraclew JDK 中）委托给`FloatingDecimal`该类 - 您可以查看[源代码以`FloatingDecimal#toJavaFormatString()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/misc/FloatingDecimal.java#FloatingDecimal.toJavaFormatString%28%29)获取血腥细节。

如果你试试：

```
BigDecimal bd = new BigDecimal(0.1f);
System.out.println(bd); 
```

您将看到 0.1f 的实际值：0.100000001490116119384765625。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T09:03:05.240

从文档中`Float.toString(float)`（它总是会给出与您正在打印的字符串相同的结果）：

> m 或 a 的小数部分必须打印多少位？必须至少有一个数字来表示小数部分，除此之外，必须有尽可能多的数字，但仅能将参数值与浮点类型的相邻值区分开来。

由于 0.1f 是最接近精确值的可表示浮点数`0.1`，因此不需要更多数字来唯一地将其与该类型的任何其他值区分开来是有道理的`float`。

# c# - 按发件人电子邮件地址查找电子邮件 - 过滤器语法

> ID：12128830
> 
> 赞同：4
> 
> 时间：2012-08-26T08:53:53.703
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2010

在 Outlook 2010 加载项中，我想在给定电子邮件地址发送的文件夹中查找项目：

```
MailItem FindEmailFromSender(MAPIFolder folder, string emailAddress)
{
    string filter = "[sender] = '" + emailAddress + "'"; // This filter is wrong.
    return folder.Items.Find(filter) as MailItem;
} 
```

看起来这应该非常简单，但我就是找不到正确的语法。过滤发件人电子邮件地址的正确过滤器语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:36:11.603

根据您需要使用的[MailItem 文档](http://msdn.microsoft.com/en-us/library/office/bb176688%28v=office.12%29.aspx)

`[SenderEmailAddress]`发件人的电子邮件地址

或者

`[SenderName]`发件人的显示名称

您还应该注意，属性名称区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:39:44.247

您可能正在寻找**电子邮件帐户**属性过滤器。这个例子对我有用......

```
string filter = "[E-mail Account] = '" + emailAddress + "'"; // filters on exact address
return folder.Items.Find(filter) as MailItem; 
```

如果要按发件人姓名搜索，可以使用：

```
string filter = "[From] = '" + senderName + "'"; // filters on exact sender name "Bob Johns"
return folder.Items.Find(filter) as MailItem; 
```

另请参阅[MSDN 以获取项目过滤参考](http://msdn.microsoft.com/en-us/library/office/bb147583%28v=office.12%29.aspx)和此[MSDN 博客文章，描述如何](http://blogs.msdn.com/b/philliphoff/archive/2008/12/19/finding-dasl-property-names.aspx)使用 Advanced Find 查找 DASL 属性名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:12:30.017

感谢 nemesv[上面的回答](https://stackoverflow.com/a/12153937/361684)。[由于另一个问题的答案](https://stackoverflow.com/a/2258609/361684)，我还设法弄清楚如何在“代表”另一个帐户发送电子邮件时找到发件人地址。为了完整起见，我将其包括在这里：

```
MailItem FindEmailSentOnBehalfSender(MAPIFolder folder, string emailAddress)
{
    string filter = "@SQL=\"http://schemas.microsoft.com/mapi/proptag/0x0065001F\" = '{0}'";
    return folder.Items.Find(string.Format(filter, emailAddress)) as MailItem;
} 
```

# c++ - 使用 Fiddler 拦截 Boost.Asio HTTP/S 请求

> ID：12128832
> 
> 赞同：2
> 
> 时间：2012-08-26T08:54:39.047
> 
> 标签：c++, boost-asio, fiddler

我正在使用 Boost:Asio 执行 HTTP GET（使用来自[http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/example/http/client/async_client.cpp](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/example/http/client/async_client.cpp)的示例）

我没有在提琴手上看到我的请求（仅在 WireShark 上）我该如何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-28T15:03:12.497

我有类似的问题关于如何解决它，所以我只是分享我的经验。据我所知，`Asio`在套接字级别工作并且没有像@marcinj 指出的那样使用wininet，Fiddler 在wininet 上工作，但我们仍然可以通过使用Fiddler 作为代理来做到这一点。

**首先，解释一下为什么它不能`Boost:Asio`像解释 IE 上的流量一样工作？**

另请参阅[如何在 fiddler 中捕获套接字编程的发送和接收请求](https://stackoverflow.com/questions/29769598/how-to-catch-the-socket-programmings-send-and-receive-request-in-fiddler)

> Fiddler 将自己作为 HTTP 代理服务器插入到堆栈中。它依靠网络浏览器识别 PC 上配置了代理并通过该代理进行发送。您的代码未检测到要通过的代理发送 - 因此 Fiddler 将无法监控您的流量。
> 
> 你有几个选择。
> 
> 1.  由于您是自己的 Windows，只需从使用直接套接字切换到使用[WinInet](https://msdn.microsoft.com/en-us/library/windows/desktop/aa385331(v=vs.85).aspx) HTTP API。它将为您进行自动代理检测，而无需您考虑。如果需要，它也会进行代理身份验证。
>     
>     
> 2.  或者。使用[Wireshark](https://www.wireshark.org/)或[NetMon](https://www.microsoft.com/en-us/download/details.aspx?id=4865)来分析您的流量，而不是 Fiddler。
>     
>     
> 
> 我推荐＃1，因为这意味着您的代码将在真正的代理服务器（通常在企业网络上找到）存在的情况下工作，而 Fiddler 只会使用它。
> 
> 我想还有第三个选项，您可以自动检测浏览器代理设置，然后为代理创建一个套接字，使用 HTTP 代理协议等……但这不是最佳做法。

**二、怎么办？**

有一个很好的例子[关于](https://stackoverflow.com/questions/11523829/how-to-add-proxy-support-to-boostasio)传递代理地址来创建一个基于[Socket(java.net.Proxy)](https://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#Socket(java.net.Proxy))或[Configure a PHP/cURL Application to Use Fiddler](https://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/ConfigurePHPcURL)的客户端，或者客户端应用程序不是你自己编写的，但如果你可以控制/配置您的客户端连接端点地址和端口，我们可以让 Fiddler 以任何方式拦截 HTTP(s) 流量（将 HTTP 请求重新路由为 HTTPS 请求或将 HTTPS 请求重新路由为 HTTPS 服务器的 HTTPS 请求）作为反向代理（需要一个参数）。`Boost:asio`

默认情况下，Fiddler 正在监听 8888。如果在浏览器中访问[http://localhost:8888/](http://localhost:8888/)，它会显示如下默认页面：

```
<!doctype html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Fiddler Echo Service</title></head><body style="font-family: arial,sans-serif;"><h1>Fiddler Echo Service</h1><br /><pre>GET / HTTP/1.1
Host: localhost:8888
Connection: keep-alive
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36
DNT: 1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3
Accept-Encoding: gzip, deflate, br
Accept-Language: zh-CN,zh;q=0.9
Cookie: _ga=GA9.1.123456789.1234567890

</pre>This page returned a <b>HTTP/200</b> response <br />Originating Process Information: <code>chrome:3628</code><br /><hr /><ul><li>To configure Fiddler as a reverse proxy instead of seeing this page, see <a href='http://fiddler2.com/r/?REVERSEPROXY'>Reverse Proxy Setup</a><li>You can download the <a href="FiddlerRoot.cer">FiddlerRoot certificate</a></ul></body></html> 
```

1.  如果目标服务器是 HTTP 服务器或目标服务器是 HTTPS 服务器并且客户端根据您配置的地址支持 HTTP，则只需在里面添加以下代码`OnBeforeRequest`（在规则 -> 自定义规则... Ctrl+R，FiddlerScript )，另请参阅[修改请求或响应](https://docs.telerik.com/fiddler/knowledgebase/fiddlerscript/modifyrequestorresponse#modifying-a-request-or-response)。

```
//MessageBox.Show(oSession.fullUrl);
// string Session.fullUrl: Retrieves the complete URI, including protocol/scheme, in the form http://www.host.com/filepath?query.
//FiddlerObject.log("Session.fullUrl=" + oSession.fullUrl);
// string Session.url: Gets or sets the URL (without protocol) being requested from the server, in the form www.host.com/filepath?query."
//FiddlerObject.log("Session.url=" + oSession.url);
// string Session.PathAndQuery: Returns the path and query part of the URL. (For a CONNECT request, returns the host:port to be connected.)
//FiddlerObject.log("Session.PathAndQuery=" + oSession.PathAndQuery); // e.g. /filepath?query but host:port for a CONNECT request
// string Session.host: Gets/Sets the host to which this request is targeted. MAY include IPv6 literal brackets. MAY include a trailing port#.
// int Session.port: Returns the server port to which this request is targeted.
//FiddlerObject.log("Session.host=" + oSession.host + ", port=" + oSession.port);
// string Session.hostname: DNS Name of the host server (no port) targeted by this request. Will include IPv6-literal brackets for IPv6-literal addresses
//Gets/Sets the hostname to which this request is targeted; does NOT include any port# but will include IPv6-literal brackets for IPv6 literals.
FiddlerObject.log("Session: hostname=" + oSession.hostname +  ", oRequest.pipeClient.LocalPort=" + oSession.oRequest.pipeClient.LocalPort);

//bool Fiddler.Utilities.isLocalhostname(sHostnameWithoutPort))
// Determines if the specified Hostname is a either 'localhost' or an IPv4 or IPv6 loopback literal
// Returns true if True if the sHostname is 127.0.0.1, 'localhost', or ::1\. Note that list is not complete.

// Run Fiddler on your machine, and then add this block of code and test it works on the your same machine:
// Use the `curl http://localhost:8888/get`command  or Using a browser, go to http://localhost:8888/get.
if (Utilities.isLocalhostname(oSession.hostname)) {
    // By default, Fiddler is listening on 8888\. Inspect what ports are being listened using proexp or netstat
    // :: Lists the listening ports of a process with the specified image name including extension name(case-insensitive), fiddler.exe
    // for /f "skip=1 tokens=2,9 delims=," %a in ('tasklist /fo csv /fi "IMAGENAME eq fiddler.exe" 2^>NUL') do (netstat -ano | findstr "PID LISTENING" | findstr "PID %a")
    //oSession.host = "httpbin.org:443"; // oSession.oRequest.headers.UriScheme = "https";
    oSession.fullUrl = "https://httpbin.org" + oSession.PathAndQuery;
} 
```

您可以将使用实际 url 的预期响应与通过 url localhost 连接将请求转发到实际 url 的 Fiddler 代理（即 httpbin.org）的上述响应进行比较。

2.  如果目标服务器是 HTTPS 服务器，但客户端不支持 HTTP，则上述更改还不够。

使用命令`curl -v https://localhost:8888/get`（或浏览器），我们发现了一个错误

```
* schannel: sent initial handshake data: sent 182 bytes
* schannel: SSL/TLS connection with localhost port 8888 (step 2/3)
* schannel: failed to receive handshake, need more data 
```

[检查Wireshark](https://www.wireshark.org/download.html)中的流量，我发现 Fiddler 在客户端发送第一个 TLS 请求（Client Hello）后没有执行任何 HTTPS 握手。

Fiddler 输出日志：

> 18:28:44:5960 HTTPSLint> 警告：ClientHello 记录的长度为 508 字节。某些服务器在 ClientHello 大于 255 字节时存在问题。[https://github.com/ssllabs/research/wiki/Long-Handshake-Intolerance](https://github.com/ssllabs/research/wiki/Long-Handshake-Intolerance)

为了解决它，我们需要在规则脚本之外做：

1.  将 Fiddler 配置为反向代理服务器，它将所有目的端口等于第二个参数[!listen](http://fiddler2.com/r/?quickexec)命令的请求转发到目标服务器。单击工具 > Fiddler 选项 > 连接。确保选中“允许远程客户端连接”。它使 fiddler 能够响应 HTTPS 的 SSL/TLS 握手请求。此步骤是持久配置。

2.  在 HKEY_CURRENT_USER\SOFTWARE\Microsoft\Fiddler2 中创建一个名为 ReverseProxyForPort 的新 DWORD。将 DWORD 设置为 Fiddler 将重新路由入站流量的本地端口（通常是标准 HTTP 服务器的端口 80）。

```
:: reg query HKEY_CURRENT_USER\SOFTWARE\Microsoft\Fiddler2 /v ReverseProxyForPort
reg add HKEY_CURRENT_USER\SOFTWARE\Microsoft\Fiddler2 /v ReverseProxyForPort /t REG_DWORD /d 58080 /f && REM /f Force overwriting the existing registry entry without prompt to 58080
:: Deletes the registry key
:: REG DELETE HKEY_CURRENT_USER\SOFTWARE\Microsoft\Fiddler2 /v ReverseProxyForPort  /f && REM /f Forces the deletion without prompt. 
```

3.  重新启动 Fiddler 并通过左下角`!listen *PORT [CERTHOSTNAME]*`Fiddler框中的脚本命令启动代理服务器侦听指定端口，方法是键入，其中 ServerHostName 是服务器的主机名；例如，对于[https://Fuzzle/](https://Fuzzle/)，您可以使用 fuzzle 作为服务器名称。`QuickExec``!listen 443 ServerHostName`

似乎没有必要在 Windows 注册表 (REGEDIT.exe) 中创建一个新的`DWORD`命名`ReverseProxyForPort`内部。`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Fiddler2`

[QuickExec - 默认命令](https://docs.telerik.com/fiddler/knowledgebase/quickexec#default-commands)

> `!listen *PORT [CERTHOSTNAME]*`
> 
> 在另一个端口上设置额外的侦听器，可选择由 HTTPS 证书保护
> 
> ```
> !listen 8889
> !listen 4443 localhost
> !listen 444 secure.example.com 
> ```

**也可以看看**

*   [使用 Fiddler 作为反向代理](https://docs.telerik.com/fiddler/configure-fiddler/tasks/UseFiddlerAsReverseProxy#use-fiddler-as-a-reverse-proxy)
*   维基百科[反向代理](https://en.wikipedia.org/wiki/Reverse_proxy)
*   [代理服务器和反向代理服务器的区别？](https://stackoverflow.com/questions/224664/difference-between-proxy-server-and-reverse-proxy-server)

    > 从用户的角度来看，向*代理*或*反向代理*服务器发送请求时：
    > 
    > *   *代理*- 需要**两个参数**：
    >     1）获取什么和 2）哪个代理服务器使用中间
    > *   *反向代理*- 需要**一个参数**：
    >     1.) 获取什么反向代理从另一台服务器获取用户不知道的内容并**返回结果，就好像它来自反向代理服务器** pspi 于 4 月 13 日 5:47 回答

*   [将 Fiddler 作为 HTTPS 服务器的反向代理运行](https://stackoverflow.com/questions/25836331/running-fiddler-as-a-reverse-proxy-for-https-server)
*   [提琴手将 https 重定向到 localhost](https://stackoverflow.com/questions/28547919/fiddler-redirect-https-to-localhost)

    > 以下代码用于`static function OnBeforeRequest(oSession:Fiddler.Session) {}`：
    > 
    > ```
    > if (oSession.HostnameIs("YYYY.azurewebsites.net")) oSession.host = "127.0.0.1:19703"; 
    > ```

*   [将 Fiddler 作为 HTTP 到 HTTPS 反向代理运行](https://stackoverflow.com/questions/28850330/running-fiddler-as-http-to-https-reverse-proxy)

    > Fiddler 将入站请求从 HTTP 转换为 HTTPS 的最简单方法是在 OnBeforeRequest 中添加一些内容，例如：
    > 
    > ```
    > if (oSession.HostnameIs("myhost") && (oSession.oRequest.pipeClient.LocalPort == 80)) {
    >   oSession.fullUrl = "https://" + oSession.url;
    > } 
    > ```
    > 
    > 当然，这假定 Fiddler 被配置为在端口 80 上运行，这是 HTTP 的默认端口。您可以在您喜欢的任何端口上运行它（例如，如果端口 80 已在使用中），但您需要更改客户端请求的 URL 中的端口，如果您可以这样做，您可能能够更改客户端以使用 HTTPS URL 开头。

*   [在 WinHTTP 中设置 WinINet 代理配置](https://docs.microsoft.com/en-us/windows/desktop/WinHttp/setting-wininet-proxy-configurations-in-winhttp)
*   [MS - 如何使用注册表文件配置客户端代理服务器设置](https://support.microsoft.com/en-us/help/819961/how-to-configure-client-proxy-server-settings-by-using-a-registry-file)
*   [配置 Fiddler 以解密 HTTPS 流量](https://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T09:38:32.147

Asio 在套接字级别工作并且不使用 wininet - 所以提琴手无法捕捉到它的流量。

我一直在寻找解决方案，要让 fiddler 与 asio 一起工作，您需要将其用作代理。要在提琴手中启用代理，请使用工具 -> Telerik Fiddler 选项 -> 连接。

要将代理服务器与 asio 一起使用，您需要使用其 IP 地址 + 端口而不是目标服务器。然后在 GET 中，您需要提供完整的目标 uri - 不仅是路径。如需更好的解释，请参见此处：[如何向 boost::asio 添加代理支持？](https://stackoverflow.com/questions/11523829/how-to-add-proxy-support-to-boostasio)

# cakephp - 更改 php 链接 cakephp 上的日期格式

> ID：12128833
> 
> 赞同：0
> 
> 时间：2012-08-26T08:54:51.947
> 
> 标签：cakephp, date, format

以下代码是表格的输出，其中我有一个日期列表，这些日期也是该日期事件的超链接。它目前显示 YMD，我希望它显示 DMY。

我尝试在数组中使用 'dateFormat'=>'DMY' 但这并没有改变任何东西。

> Html->link($shiftsession['Shiftsession']['sessionDate'], array('controller' => 'shiftsessions', 'action' => 'view', $shiftsession['Shiftsession']['SessionID'] )); ?>

[http://book.cakephp.org/1.2/view/203/options-dateFormat](http://book.cakephp.org/1.2/view/203/options-dateFormat)

如果有人能对您如何正确使用 dateFormat 有所了解，我会很兴奋。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:23:28.637

好的 ole' [PHP date()](http://php.net/manual/en/function.date.php)来拯救：

```
<?php
//use PHP's date() to format the date in any way you'd like
$theDate = date('DMY', strtotime($shiftsession['Shiftsession']['sessionDate']));

//build the link using the newly formatted date
$this->Html->link($theDate, array(
    'controller' => 'shiftsessions',
    'action' => 'view',
    $shiftsession['Shiftsession']['SessionID']
)); 
```

（显然你可以把整个事情写成一行......例如在 StackOverflow 上的目的，它读起来像这个 imo 更好）

**使用 CakePHP：**

CakePHP 有一个不错的[Time Helper](http://book.cakephp.org/2.0/en/core-libraries/helpers/time.html)，但它没有一个选项可以准确地指定您想要的格式。相反，它有`gmt()`, 和`niceShort()`, 和`timeAgo()`...等

# mysql - 减号运算符在 mysql 中给我错误

> ID：12128844
> 
> 赞同：5
> 
> 时间：2012-08-26T08:57:21.040
> 
> 标签：mysql

我有两个疑问。

当我对它们使用减号运算符时，第一个查询返回 11 行，第二个查询返回 6 行，据我所知，它应该返回 5 行

```
 SELECT location from uploads where username='Gates'
 MINUS
 SELECT fileshare FROM `whiteboard` where username='Gates' and friend='Curlyclouds' 
```

但我收到**以下错误：**

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`whiteboard`在第 2 行的 'minus SELECT fileshare FROM where username='Gates' andfriend='Cur'附近使用正确的语法

希望我的问题很清楚，任何帮助都会对我有所帮助.....谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T08:59:32.657

MySQL 不支持`EXCEPT`或`MINUS`.

您可以使用`NOT EXISTS`,`OUTER JOIN ... NULL`或`NOT IN`（注意 NULL）进行反半连接。

[在此处查看示例和性能比较](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-25T20:47:36.843

使用“不在”或“不存在”对非常大的数据集执行“减”查询会导致查询时间过长。我想出了一种模仿其他数据库执行的基于集合的操作（合并、排序、删除重复项）的方法。

```
select column1, count(*), min(setnum)
from
(
      select distinct column1, 1 as setnum
        from table1
   union all
      select distinct column1, 2 as setnum
        from table2
) as tbl_a
group by column1  
having count(*) = 1 and min(setnum) = 1 
```

与使用不存在或不存在相比，上述选择在大型数据集上产生了非常好的性能。本质上，它正在寻找仅存在于第一个集合中而不存在于第二个集合中的行。我最近经常使用它，在性能方面取得了非常好的成功。

# java - GAE上的Java聊天应用程序，将消息写入文件时遇到问题

> ID：12128847
> 
> 赞同：0
> 
> 时间：2012-08-26T08:57:43.563
> 
> 标签：java, google-app-engine, jsf, java-ee-6

我在 Google App Engine 平台上的 JSF 程序有问题。当我读到GAE 不支持*FileOutputStream类时，我几乎完成了在 Java EE 中实现聊天应用程序。*通过这个类对象，我创建文件，在其中写入聊天消息，并通过脚本在 index.xhtml 网站上加载和刷新该文件。

我需要帮助，因为我不知道我可以替换哪个类*FileOutputStream*来完成这个应用程序。我[在 Python 中找到了示例，](http://vimeo.com/8066901)所以我知道这是可能的，但是如何在 Java 中实现呢？

我将不胜感激任何帮助。

*下面我用FileOutputSream*操作粘贴一段 ChatBean 类：

```
@Stateful
@ApplicationScoped
@ManagedBean(name="Chat")
public class ChatBean {

    private List<String> users = new ArrayList<String>();
    private String newUser;
    FileOutputStream chatHtmlBufferWriter;

    public ChatBean () throws IOException {
        ServletContext ctx = (ServletContext) FacesContext.getCurrentInstance().getExternalContext().getContext();
        String chatHtmlPath = ctx.getRealPath("/") + "chat";
        try {
            this.chatHtmlBufferWriter = new FileOutputStream(chatHtmlPath);  
            this.chatHtmlBufferWriter.write("Start chatu ąęć. <br />".getBytes("UTF-8"));
        } catch (IOException ex) {
            this.chatHtmlBufferWriter.close();
            throw ex;
        }

        users.add("Admin");
    }

    @PreDestroy
    public void closeFileBuffor() throws Exception {
        this.chatHtmlBufferWriter.close();
    }

    public String addMessage(String msg) throws IOException {
        this.chatHtmlBufferWriter.write(msg.getBytes("UTF-8"));    
        FacesContext.getCurrentInstance().getExternalContext().redirect("index.xhtml");
        return "index"; 
    } 
...
} 
```

index.xhtml 文件中的脚本：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
            <script>
                var currPos = 0;
                var loadChat = function() {
                    $("#chatForm\\:chatbox").load('chat');
                    currPos = $(".chat")[0].scrollHeight;
                    $(".chat").scrollTop(currPos);
                }
                var scrollChat = function() {
                    $("#chatForm\\:chatbox").load('chat');
                    $(".chat").scrollTop(currPos);
                }
                var currPos;

                $(document).ready(function() {
                    $("#chatForm\\:chatbox").load('chat', function(){
                        loadChat();
                    });
                    var refreshId = setInterval(function() {
                        scrollChat();
                    }, 1000);
                    $.ajaxSetup({ cache: false });                    
                    $("#chatForm\\:chatbox").scroll(function() {
                        currPos = $(".chat").scrollTop();
                    });
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:59:34.187

基本上，您不能直接写入文件系统（尽管您可以读取）。

您将需要使用现有的 GAE 存储 API 之一，例如具有[File like API](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)的 blobstore 。[存储数据页面](https://developers.google.com/appengine/docs/java/datastore/)上详细介绍了其他选项。

但是，我不确定您是否正确地考虑了这一点。您只想创建一个返回当前消息并由您的脚本调用的 GET 方法。消息永远不会被写入文件。首先，您可以将消息存储在内存中。我怀疑您链接到的教程也是如此。

（更新：我最初说 FileOutputStream 在白名单中，但我正在查看`FilterOutputStream`。哎呀。）

# performance - 衡量一个 common-lisp 程序的性能

> ID：12128849
> 
> 赞同：13
> 
> 时间：2012-08-26T08:57:58.947
> 
> 标签：performance, common-lisp

我写了一个 common-lisp 程序，它比它需要的要慢。现在我想分析我的代码，看看我的时间都花在了哪里。有没有人们使用的工具？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T13:38:47.247

如果您使用的是[SLIME](http://common-lisp.net/project/slime/) ，除了和实现特定工具之外，您还可以使用一些[分析命令。](http://common-lisp.net/project/slime/doc/html/Profiling.html)[`time`](http://www.lispworks.com/documentation/HyperSpec/Body/m_time.htm)

用于`M-x slime-toggle-profile-fdefinition`（取消）分析特定功能、`M-x slime-profile-report`显示结果和`M-x slime-profile-reset`重置。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-26T09:04:17.657

如果您使用的是[SBCL](http://sbcl.org/)，则可以使用简洁的统计分析器 - [http://www.sbcl.org/manual/Statistical-Profiler.html](http://www.sbcl.org/manual/Statistical-Profiler.html)。

对于简单的测量，您可以使用[`time`](http://www.lispworks.com/documentation/HyperSpec/Body/m_time.htm)，它在所有 Common Lisp 实现中都可用。

# android - 在页面适配器中实现按钮

> ID：12128852
> 
> 赞同：0
> 
> 时间：2012-08-26T08:58:57.400
> 
> 标签：android, android-viewpager, imagebutton

我一直在努力实现按钮来更新我的页面适配器中的文本视图。这是迄今为止我的页面适配器的代码

```
public class CharacterStatsPagerAdapter extends PagerAdapter {
public int getCount() {
    return 2;
}

int maxhp = 0;
View view = null;

public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    switch (position) {
    case 0:

        view = inflater.inflate(R.layout.characterstats1, null);

        TextView characternamedisplay = (TextView) view.findViewById(R.id.textView1);
        characternamedisplay.setText(com.echaractersheet.BasicInfo.characternameresult);

        TextView genderdisplay = (TextView) view.findViewById(R.id.textView2);
        genderdisplay.setText(com.echaractersheet.BasicInfo.genderresult);

        TextView classdisplay = (TextView) view.findViewById(R.id.textView3);
        classdisplay.setText(com.echaractersheet.BasicInfo.classresult);

        TextView racedisplay = (TextView) view.findViewById(R.id.textView4);
        racedisplay.setText(com.echaractersheet.BasicInfo.raceresult);

        ImageButton plusmaxhp = (ImageButton) view.findViewById(R.id.imageButton1);
        plusmaxhp.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v) {
                maxhp = maxhp + 1;
                TextView maxhpdisplay = (TextView) view.findViewById(R.id.textView5);
                maxhpdisplay.setText(maxhp);

            }

        });

        break;
    case 1:
        view = inflater.inflate(R.layout.characterstats2, null);
        break;
    }

    ((ViewPager) collection).addView(view, 0);

    return view;
} 
```

前 4 个文本视图更新得非常好，但问题出在我的图像按钮上。当我单击按钮更新字符 hp 时，程序强制关闭，根据 logcat，它是一个空指针异常，我不确定它为什么会发生。

我一直在[用 viewPager 引用 Button 活动？](https://stackoverflow.com/questions/9099746/button-activity-with-viewpager)以及[如何在 viewpager 中编写按钮 onClick 方法？](https://stackoverflow.com/questions/8698789/how-to-write-button-onclick-method-in-viewpager)但在摆脱我的空指针异常方面收效甚微。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:55:55.787

已修复您的代码。请参考以下：

```
public static class CharacterStatsPagerAdapter extends PagerAdapter {
public int getCount() {
    return 2;
}

int maxhp = 0;
View view = null;
View view2 = null;

public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View localView = null;
    switch (position) {
        case 0:

            view = inflater.inflate(R.layout.page1, null);

            TextView characternamedisplay = (TextView) view.findViewById(R.id.textView1);
            characternamedisplay.setText(R.string.hello_world);

            TextView genderdisplay = (TextView) view.findViewById(R.id.textView2);
            genderdisplay.setText(R.string.hello_world);

            TextView classdisplay = (TextView) view.findViewById(R.id.textView3);
            classdisplay.setText(R.string.hello_world);

            TextView racedisplay = (TextView) view.findViewById(R.id.textView4);
            racedisplay.setText(R.string.hello_world);

            ImageButton plusmaxhp = (ImageButton) view.findViewById(R.id.imageButton1);
            plusmaxhp.setOnClickListener(new View.OnClickListener(){
                public void onClick(View v) {
                    maxhp = maxhp + 1;
                    TextView maxhpdisplay = (TextView) view.findViewById(R.id.textView5);
                    if (maxhpdisplay != null) { 
                        maxhpdisplay.setText(String.valueOf(maxhp));
                    }
                }

            });
            localView = view;
            break;
        case 1:
            view2 = inflater.inflate(R.layout.page2, null);
            localView = view2;
            break;
    }

    ((ViewPager) collection).addView(localView, 0);

    return localView;
}

@Override
public boolean isViewFromObject(View view, Object o) {

    return (view == (View)o);
}
} 
```

似乎问题出在以下几点：您对两个视图都使用了相同的变量。如果寻呼机首先调用获取第一个项目，然后再调用第二个项目，那么您的变量将保存对第二个项目的引用，该项目在哪里没有 textView5。

# ruby-on-rails - JRuby database.yml 文件配置以使用 IBM DB2

> ID：12128860
> 
> 赞同：2
> 
> 时间：2012-08-26T08:59:32.273
> 
> 标签：ruby-on-rails, jdbc, db2, jruby

我已经安装了：

1.  JRuby (1.7.0.preview2)
2.  导轨 (3.2.8)
3.  IBM DB2 Express C (1.01)
4.  活动记录-jdbc-适配器 (1.2.2)

我应该如何更改 database.yml 文件以使我的 Rails 应用程序连接到 DB2 数据库？

我关注了这篇文章：

[https://github.com/jruby/activerecord-jdbc-adapter](https://github.com/jruby/activerecord-jdbc-adapter)

但是没有 DB2 数据库的例子。另外，为什么说我应该将 Jruby 更改为始终使用 JDBC 适配器。

> 如果您使用的是 Rails 3，则需要修改 Gemfile 以使用 JRuby 下的 activerecord-jdbc-adapter gem。将您的 Gemfile 更改为如下所示（以 sqlite3 为例）：

```
if defined?(JRUBY_VERSION)
  gem 'activerecord-jdbc-adapter'
  gem 'jdbc-sqlite3'
else
  gem 'sqlite3-ruby', :require => 'sqlite3'
end 
```

我应该把上面的声明放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T12:31:51.833

这是一个简单的工作格式：

```
development:
  adapter: jdbc
  driver: com.ibm.db2.jcc.DB2Driver
  url: jdbc:db2://localhost:50000/devp
  host: localhost
  port: 50000
  database: devp
  username: db2inst1
  password: mypass 
```

请注意，您必须：

> 将 db2jcc.jar 和 db2jcc_license_cu.jar 复制到 jruby/lib (~/.rvm/rubies/jruby-*/lib) 目录。

或者如果您使用的是扭矩箱：

> 将 db2jcc.jar 和 db2jcc_license_cu.jar 复制到应用程序 lib 文件夹。

# django - 如何在Django中设置最大值的排序字段+1的默认值

> ID：12128862
> 
> 赞同：4
> 
> 时间：2012-08-26T09:00:02.350
> 
> 标签：django, django-models, django-forms, django-admin

提前致谢。我在 Django 中创建了一个模型，其中有一个标题、url 和一个排序字段。现在我已将该排序字段的默认值设置为`ZERO`. 我的要求是这个默认值应该更改为`current highest Ordering number + 1`. 我可以在管理界面中做到这一点吗？

```
class FooterLinks(models.Model):
    title = models.CharField(_("Title"), max_length=200, null = True, blank = True)
    link = models.CharField(_("Link"), max_length = 200)
    order = models.IntegerField(_("Sort Order"), default=0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-13T22:48:13.330

受 Burhan 回答的启发，我能够解决我的一个问题，类似于你的问题。

所以对于你的问题：在我的models.py中创建可调用的*get_new_default*

```
from django.db.models import Max

def get_new_default():
    new_order_default = FooterLinks.objects.all().aggregate(Max('order'))['order__max']+1
    return new_order_default

class FooterLinks(models.Model):
    order = models.CharField(_("Sort Order"), default = get_new_default) 
```

这会将新的最大订单值粘贴到文本框中并保持该字段可编辑。

* * *

**----！！编辑 ！！ - -**

这引发了一个问题，在重置数据库时，因为没有对象可以计算最大值。修复方法是计算所有找到的对象，如果不存在，则默认设置为 1：

```
from django.db.models import Max

    def get_new_default():
        if FooterLinks.objects.all().count() == 0:
            new_order_default = 1
        else:
            new_order_default = FooterLinks.objects.all().aggregate(Max('order'))['order__max']+1
        return new_order_default

    class FooterLinks(models.Model):
        order = models.CharField(_("Sort Order"), default = get_new_default) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:35:02.440

```
from django.db.models import Max
new_default = FooterLinks.objects.all().aggregate(Max('order'))['order__max']+1
FooterLinks.objects.filter(order=0).update(order=new_default) 
```

要使更改永久化，请使用 South 进行数据库迁移；或如 danihp 建议的那样覆盖 save 方法。

但是请注意，如果您的表变得非常大，最好将此逻辑实现为数据库上的触发器。

编辑：

不，您将运行一次，它会更新数据库中的所有条目 - 理想情况下，您应该在正常的系统停机/维护窗口期间执行此操作。

要调整文本框中的值，您需要更新您在模型中给出的默认值。请注意，`default`可以采用值***或可调用对象***（换句话说，方法）。每次呈现该字段时，都会调用该方法。

您可以使用它来确保始终通过提供一种方法作为默认值来计算默认值。

# javascript - 在循环中调用函数时出现奇怪的 javascript 行为

> ID：12128869
> 
> 赞同：1
> 
> 时间：2012-08-26T09:01:52.530
> 
> 标签：javascript

我正在运行一个简单的测试，我得到一个奇怪的行为，这里是 js 代码：

```
 var handler = function(index,params){

    params.id = index;

}

function test(){
    var params = {'id':0};
    console.log(params);
    gradualRepetitionCalls(0,10,params);
}

function gradualRepetitionCalls(index, maxIndex,params) 
{
    if (index < maxIndex) 
    {
        handler(index,params);
        index++;

        gradualRepetitionCalls(index,maxIndex,params);
    }
}

test(); 
```

奇怪的是，`console.log(params)`显示id是'9'，而我希望它是'0'。是`console.log()`异步的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:09:04.187

好吧，你的代码片段过于复杂，试试这个：

```
var params = {id: 0};
console.log(params);
params.id = 1; 
```

在 Firefox 中，它显示：

```
Object { id=0 } 
```

但是当我单击一个对象向下钻取时，它会显示`id=1`. 在谷歌浏览器中，它只显示`Object`，但是`id=1`当向下钻取时。

这种奇怪行为的原因是，`console`了解您正在记录一个对象（而不仅仅是一个字符串），并且每次查看控制台或刷新它时，它都会显示该对象的当前状态。

如果您发现这种行为容易出错且违反直觉，这里有一些解决方法：

```
console.log(JSON.stringify(params));
console.log(params.id); 
```

另请注意，这就是 JavaScript 调试器的工作方式，这不是 JavaScript*本身*的错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:04:46.990

不，console.log 是同步的。但是您只创建了一个对象并将该对象“输出”到控制台 - 之后，您更改了该对象的属性（对象通过引用传递！）。控制台只显示该对象的最近状态，而不是从它被记录的时间点开始的快照。

# javascript - 将 wakanda 连接到 wamp 服务器

> ID：12128871
> 
> 赞同：1
> 
> 时间：2012-08-26T09:02:02.097
> 
> 标签：javascript, web-applications, wampserver, wakanda

我使用 wakanda 作为我的 IDE，我刚开始发现它有自己的 wakanda 服务器，这个 IDE 非常简单，在我尝试了 sencha Extjs 之后很容易。我一直在寻找但直到现在才找到的一个问题是，如何将我的 wakanda IDE 连接到任何其他服务器，但它有一个，因为如果我想启动我的工作，我不会在本地启动它。 ..

我试着在他们的网站上找到任何东西[，](http://www.wakanda.org/)但此时找不到任何帮助......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:54:51.617

Wakanda 工作室的 GUI 设计器使用 Wakanda 框架中的小部件绑定在一起，并使用数据源连接到服务器。数据源使用数据提供者与 WakandaDB REST API 进行通信。即使可以从 LAMP 或 WAMP 平台访问 WakandaDB，Wakanda 服务器也可以通过 Web 访问它，而无需任何外部 HTTP 服务器。

Wakanda Server 尚未在标准共享主机服务中提供，但大多数主机公司都提出了 VPS 和/或专用服务器服务，这些服务非常适合 Wakanda。

我们最近还提供了一个关于“将 Wakanda 应用程序部署到云端”的网络研讨会：http: [//go.4d.com/deploying-on-the-cloud-webinar.html](http://go.4d.com/deploying-on-the-cloud-webinar.html)

我们自己的团队在 Windows Azure 和 Amazon 上成功测试了 Wakanda。Wakanda 单元测试每天使用此类云提供商执行。

请注意，我之前在 stackoverflow 上也提供了类似的答案 :-)

->[在哪里托管 Wakanda [客户端/服务器端纯 JS '框架']？](https://stackoverflow.com/questions/9385080/where-to-host-wakanda-a-client-server-side-pure-js-framework/9393843#9393843)

# android - 每 n 秒获取传感器值

> ID：12128872
> 
> 赞同：2
> 
> 时间：2012-08-26T09:02:07.247
> 
> 标签：android, android-sensors

我需要每 n 秒获取一个传感器的值。在寄存器侦听器中设置时间似乎不够，好像没有发生任何变化就不会调用任何事件，而我想获取传感器的值，即使它没有改变......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:10:42.353

你可以创建一个线程，让它休眠 n 秒，然后监听传感器数据。您还可以在其中创建一个名为类似的方法，该方法`getSensorData()`将返回数据类型。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:48:16.427

这几天我也遇到了这个问题。我通过以下方式解决了它：

在 onSensorChanged 方法中，我首先将所有数据存储到一个数组中，比如 acc[time, acc_x, acc_y, acc_z]。每次有传感器变化时，我都会检查这个时间戳和存储在 acc 中的第一个时间戳之间的差异，即 acc[0]。如果差异大于 0.2s（使用您想要的时间跨度），我将使用时间跨度中的 acc 平均值，例如 meanAcc，并将其存储到另一个数组中。然后acc将被清除。并重复上述步骤。

帮助这可以提供帮助。

# c++ - fusion::nview 和 const 令人头疼

> ID：12128873
> 
> 赞同：0
> 
> 时间：2012-08-26T09:02:45.477
> 
> 标签：c++, boost, vector, constants, boost-fusion

我已经被困在代码中一段时间​​了。我可以解决这个问题，但如果我什至无法编译代码，我会感到非常糟糕。代码中描述了这些问题。

```
namespace fusion = boost::fusion;

  template <int N, typename T>
  struct viewTraits
  {

    typedef typename T::value_type value_type;

    typedef typename fusion::result_of::as_nview<value_type, N>::type view_type;

    typedef std::vector<view_type> result_type;
  };

  int main ()
  {

    typedef boost::fusion::vector<int, double> VecType;

    typedef std::vector<VecType> Matrix;

    typedef viewTraits<0, Matrix>::result_type R;

    Matrix m (20);
    for (int i = 0; i < 20; ++i)
    {
      m[i] = VecType (i, i+0.1*i);
    }
    R r;

    /*
    * the following can compile, but not what I want
    */
    BOOST_FOREACH (Matrix::value_type v, m)
    {
      r.push_back (fusion::as_nview <0>(v) );
    }

    /*
    * the following cannot compile???, why???
    */
    BOOST_FOREACH (Matrix::value_type const &v, m)
    {
      r.push_back (fusion::as_nview <0>(v) );
    }
  } 
```

请任何人都可以指出我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:48:34.633

BOOST_FOREACH expects the loop variable as first parameter so that can't be const (and it is picky about commas since it is a macro). Take a look at [the documented pitfalls](http://www.boost.org/doc/libs/1_51_0/doc/html/foreach/pitfalls.html).

# php - MySQL日期插入错误

> ID：12128874
> 
> 赞同：4
> 
> 时间：2012-08-26T09:02:57.970
> 
> 标签：php, mysql

我正在尝试插入格式*为 2012 年 8 月 12 日*的日期，但是当我在插入后检查数据库集时，我只能在日期字段上看到*00-00-0000 ？*

这是我使用的查询：

```
$query= "INSERT INTO ambition_opportunities SET

 opp_deadline='".strtotime($_POST['deadline'])."'"; // date field come with date picker** 

 $sql = mysql_query($query) or die(mysql_error()); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T09:10:04.973

如[日期和时间文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)中所述：

> MySQL 可以识别[`DATE`](http://dev.mysql.com/doc/en/datetime.html)以下格式的值：
> 
> *   作为一个`'YYYY-MM-DD'`或`'YY-MM-DD'`格式的字符串。允许使用“宽松”语法：任何标点符号都可以用作日期部分之间的分隔符。例如，`'2012-12-31'`、`'2012/12/31'`、`'2012^12^31'`和`'2012@12@31'`是等价的。
>     
>     
> *   作为在任何一种格式中都没有分隔符的`'YYYYMMDD'`字符串`'YYMMDD'`，前提是该字符串作为日期有意义。例如，`'20070523'`and`'070523'`被解释为`'2007-05-23'`, 但是`'071332'`是非法的（它有无意义的月份和日期部分）并且变成`'0000-00-00'`.
>     
>     
> *   作为任一`YYYYMMDD`格式`YYMMDD`的数字，前提是该数字作为日期有意义。例如`19830905`和`830905`被解释为`'1983-09-05'`。

因此，字符串`'12-Aug-2012'`不是有效的 MySQL 日期文字。您有三个选项（以某种模糊的偏好顺序，没有任何关于您的要求的进一步信息）：

1.  配置 Datepicker 以使用其[`dateFormat`选项](http://docs.jquery.com/UI/Datepicker#option-dateFormat)以支持的格式提供日期：

    ```
    $( ".selector" ).datepicker({ dateFormat: "yyyy-mm-dd" }); 
    ```

2.  使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数来转换字符串：

    ```
    opp_deadline=STR_TO_DATE('$_POST[deadline]', '%d-%b-%Y') 
    ```

    **注意：**请参阅下面有关 SQL 注入的警告。

3.  将接收到的字符串转换为 PHP 时间戳——例如，[`strtotime()`](http://www.php.net/manual/en/function.strtotime.php)按照您当前的方式使用：

    ```
    $timestamp = strtotime($_POST['deadline']); 
    ```

    然后是：

    *   使用以下格式格式化时间戳[`date()`](http://php.net/manual/en/function.date.php)：

        ```
        $date = date('Y-m-d', $timestamp); 
        ```

    *   使用以下命令将时间戳直接传递给 MySQL [`FROM_UNIXTIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_from-unixtime)：

        ```
        opp_deadline=FROM_UNIXTIME('$timestamp') 
        ```

* * *

## 警告

1.  **您的代码容易受到 SQL 注入的攻击。** 您*确实*应该使用[准备好的语句](https://stackoverflow.com/a/60496/623041)，将变量作为参数传递给其中，这些参数不会针对 SQL 进行评估。如果您不知道我在说什么，或者如何解决它，请阅读[Bobby Tables](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)的故事。

2.  此外，正如PHP 手册关于函数的章节[的介绍](http://www.php.net/manual/en/intro.mysql.php)`mysql_*`中所述：

    > 不建议将此扩展用于编写新代码。相反，应该使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。在选择 MySQL API 时，另请参阅[MySQL API 概述](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)以获得更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T04:29:43.813

我正在尝试在文本框 2013-12-24 中插入日期。数据库中的日期显示为 1970-01-01

$date=$year & $month & $day; $date= Date("Ymd", strtotime($date));

```
 $query = "INSERT INTO `book` VALUES('$id', '$title', '$author_name', '$publisher', '$date' )"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:09:26.007

正如您所提到的，数据库中字段的类型是`00-00-0000`. 您插入格式为： 的值`12-Aug-2012`。

您应该将您的月份值从“月份名称”转换为“数字”，例如：

```
Jan -> 01,
Feb -> 02 ... 
```

你明白了。

在那之后，它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T09:15:33.120

您必须确保输入的日期格式为`YYYY-MM-DD`. *2012 年 8 月 12 日*不是有效的[MySQL 日期格式](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-literals.html)，这就是它返回错误的原因。

此外，您的代码易受 SQL 注入攻击。我强烈建议您在将数据插入数据库时​​使用[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)以防止[SQL 注入](https://stackoverflow.com/questions/11939226/sql-injections-and-adodb-library-general-php-website-security-with-examples/11941396)，作为一种快速解决方案或更好地使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

您的插入查询应该如下所示：

```
 SET
 opp_provider='".mysql_real_escape_string($_POST['provider'])."'"; 
```

# php - 在 PHP 中的两个文本字符串之间写入文本

> ID：12128877
> 
> 赞同：3
> 
> 时间：2012-08-26T09:03:10.887
> 
> 标签：php, string

假设我在文件中有这些数据（externalfile.txt）

```
#1#First#/1#
#2#Something#/2#

#end# 
```

我想在`#/2#`和之间写文字`#end#`，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:23:34.700

不知道这是否是正确的方法，但你可以看看

```
$newval='new text';
$file_contents = file_get_contents('externalfile.txt');
file_put_contents('externalfile.txt', preg_replace("/#\/2#/", "#/2#\n$newval\n", $file_contents)); 
```

无论如何，它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:21:18.223

此 PHP 代码在`#end#`字符串最后一次出现之前插入一个新文本：

```
$str = file_get_contents('file.txt');
$splitted = explode('#end#',$str);
$pos = count($splitted)-2;
$splitted[$pos] .= 'new text';
$str = implode('#end#',$splitted);
echo $str; 
```

# android - 无法在谷歌地图中显示精确位置

> ID：12128879
> 
> 赞同：0
> 
> 时间：2012-08-26T09:03:36.213
> 
> 标签：android, google-maps

我正在谷歌地图上开发一个安卓应用程序。我已经在模拟器的应用程序中成功显示了 MapView。但是当我试图在地图上插入一个精确的标记时，出现了以下关于“无法启动活动组件信息”的问题。这是我的代码：

```
package com.example.maps;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.Menu;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem; 
```

公共类 MainActivity 扩展 MapActivity {

```
MapView map;
MapController controller;
Drawable d;
List<Overlay> overlayList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    map = (MapView)findViewById(R.id.mapRef);
    map.setBuiltInZoomControls(true);

    controller = map.getController();
    GeoPoint point = new GeoPoint(23129491,72541321);
    controller.animateTo(point);
    controller.setZoom(19);

    d = getResources().getDrawable(R.drawable.taxi);
    OverlayItem overlayItem =  new OverlayItem(point, "Hello there!","This is the taxi");
    drawPinpoint draw = new drawPinpoint(d, MainActivity.this);
    draw.insertPinpoint(overlayItem);
    overlayList.add(draw);

}

static class drawPinpoint extends ItemizedOverlay<OverlayItem>{

    private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
    private Context c;

    public drawPinpoint(Drawable arg0) {
        super(boundCenter(arg0));
        // TODO Auto-generated constructor stub
    }

    public drawPinpoint(Drawable m, Context context) {
        // TODO Auto-generated constructor stub
        this(m);
        c = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return pinpoints.get(i);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return pinpoints.size();
    }

    public void insertPinpoint(OverlayItem item){
        pinpoints.add(item);
        this.populate();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

这是我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.maps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
<uses-library android:name="com.google.android.maps"/>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是我的 NullPointerException 堆栈跟踪：

08-26 14:19:11.760: W/dalvikvm(528): threadid=1: 线程退出未捕获异常 (group=0x4001d800) 08-26 14:19:11.790: E/AndroidRuntime(528): 致命异常: main 08-26 14:19:11.790: E/AndroidRuntime(528): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.maps/com.example.maps.MainActivity}: java.lang.NullPointerException 08- 26 14:19:11.790: E/AndroidRuntime(528): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 android.app。 ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125) 08-26 14:19:11.790 : E/AndroidRuntime(528): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 08-26 14:19:11.790:E/AndroidRuntime(528): 在 android.os.Handler.dispatchMessage(Handler.java:99) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 android.os.Looper.loop(Looper.java :123) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 08-26 14:19:11.790: E/AndroidRuntime(528):在 java.lang.reflect.Method.invokeNative(Native Method) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 java.lang.reflect.Method.invoke(Method.java:521) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 08-26 14:19:11.790: E/AndroidRuntime(528):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 dalvik.system.NativeStart.main(Native Method) 08-26 14:19:11.790：E/AndroidRuntime(528)：由 java.lang 引起。NullPointerException 08-26 14:19:11.790: E/AndroidRuntime(528): at com.example.maps.MainActivity.onCreate(MainActivity.java:42) 08-26 14:19:11.790: E/AndroidRuntime(528):在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-26 14:19:11.790: E/AndroidRuntime(528): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 08-26 14 :19:11.790: E/AndroidRuntime(528): ... 11 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:04:36.497

我认为您的代码的第 42 行是：

```
overlayList.add(draw); 
```

并且您还没有创建一个 overlayList 对象。

# c# - 如何限制我的选择，使其不选择空字符串值？

> ID：12128880
> 
> 赞同：1
> 
> 时间：2012-08-26T09:04:06.817
> 
> 标签：c#

我有以下代码：

```
 protected IEnumerable<string> GetErrorsFromModelState() {
        var errors = ModelState
         .SelectMany(x => x.Value.Errors.Select(error => error.ErrorMessage)
         .Union(x.Value.Errors.Select(error => error.Exception.Message)));
        return errors;
    } 
```

它可以工作，但是当有“”的 ErrorMessage 条目时，它会将其添加到字符串列表中。有没有办法让它只选择 ErrorMessages 如果它们不是 "" ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:07:37.947

尝试检查空字符串，如果它为空或为空，则丢弃选择和投影。

```
 protected IEnumerable<string> GetErrorsFromModelState() {
        var errors = ModelState
         .SelectMany(x => x.Value.Errors.Where(error=>!String.IsNullOrEmpty(error.ErrorMessage)).Select(error => error.ErrorMessage)
         .Union(x.Value.Errors.Where(error=>!String.IsNullOrEmpty(error.ErrorMessage)).Select(error => error.Exception.Message)));
        return errors;
    } 
```

# iphone - 我可以允许用户在 GPUImage Framew 中放大和缩小吗

> ID：12128882
> 
> 赞同：0
> 
> 时间：2012-08-26T09:04:37.413
> 
> 标签：iphone, ios, ios5, opengl-es

我从 github 下载 gpuiimage 框架并开始在 ios 开发中使用它

我可以允许用户在 ios 中放大和缩小 GPUImage 框架吗？我也想在 gpuimage 框架中打开和关闭闪光灯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:19:26.553

该`GPUImage`框架用于图像处理。如果您希望用户能够缩放照片，您需要考虑将[UIPinchGestureRecognizer](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPinchGestureRecognizer_Class/Reference/Reference.html)添加到顶层`UIImageView`。然后使用[AVFoundation](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVFoundationFramework/_index.html)框架来使用设备 LED。在您的项目中使用 GPUImage 框架不会阻止您执行任何这些操作。

# android - 播放 png 序列后的内存问题

> ID：12128885
> 
> 赞同：0
> 
> 时间：2012-08-26T09:05:15.140
> 
> 标签：android, memory-management, android-animation

我正在`AnimationDrawable`播放一个运行良好的 PNG 序列。问题是在添加这部分后，应用程序从使用 ~7MB 的 RAM 变为 ~32MB。

我知道我们不能直接调用释放内存，但是在这种情况下是否有某种方法可以最大限度地减少内存使用`Animation`......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:00:11.210

[动画 Drawable 在 Android 中第二次运行时导致 OutOfMemoryError](https://stackoverflow.com/questions/9082181/animation-drawable-causing-outofmemoryerror-on-second-run-in-android)

这个问题的答案提出了一种释放动画drawable中使用的位图的解决方案，调用 .recycle() 来释放位图。您会期望 AnimationDrawable 为您执行此操作，实际上它可能会在您离开活动时执行此操作，但是这可能对您有用，而无需依赖 System.gc();

这似乎是一个普遍的问题。上面的链接是迄今为止最好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:40:42.350

我想我找到了解决办法。我通过将背景资源设置为序列的最后一个可绘制对象，将其设置`AnimationDrawable`为 null 然后调用垃圾回收来解决了这个问题

```
animationDrawable = null;
imageView.setBackgroundResource(R.drawable.last_png);
System.gc(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T10:40:18.033

gc() 仅在需要时运行，并且调用表示您愿意完成它。但是当你真的需要内存时，调用它是没有用的。调用 gc 并不能保证内存已被清理并且您将有足够的空间运行。

您需要删除已使用的资源并根据需要加载它们以保持较低的 ram 使用率。

# django - 如何过滤今天创建的对象（Django）

> ID：12128889
> 
> 赞同：1
> 
> 时间：2012-08-26T09:06:17.243
> 
> 标签：django, datetime

```
orders = Order.objects.filter(date__range=[datetime.datetime.now(), datetime.timedelta(days=1)]) 
```

我想这并不完全符合我的要求，但是当我在我的 python shell 中输入它时，我不断收到这个警告。

```
RuntimeWarning: DateTimeField received a naive datetime (2012-08-26 02:03:25.614372) while time zone support is active. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T09:28:04.417

这可能会对您有所帮助：[链接](https://stackoverflow.com/questions/4668619/django-database-query-how-to-filter-objects-by-date-range)。我没有检查此代码，但是：

```
import datetime
yesterday = datetime.date.today() - datetime.timedelta(days=1)
orders = Order.objects.filter(date__gt=yesterday) 
```

它将带来所有订单，其中日期字段包含昨天的日期。由于您没有未来的订单，这可能会奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T09:25:45.167

Django 的 datetime 对象现在支持时区。`datetime.datetime.now()`返回天真的对象（无时区）。要比较它们，您需要`datetime.datetime.now()`了解时区。

您可以使用`django.utils.timezone`，它有一个 API 可以让`datetime.datetime`实例感知时区。

例如：

```
from django.utils import timezone

timezone.make_aware(datetime_object, tzinfo_object) 
```

请参阅[Django 时区](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-15T14:08:26.947

如果您正在使用时区感知日期，我建议您获取一天中的第一个瞬间并使用它进行过滤。

```
dt = timezone.now()
start = dt.replace(hour=0, minute=0, second=0, microsecond=0)
Order.objects.filter(created__gte=start) 
```

请注意，如果您想要另一天的订单，例如昨天，这很容易：

```
dt = timezone.now() - timedelta(days=1)
start = dt.replace(hour=0, minute=0, second=0, microsecond=0)
end = dt.replace(hour=23, minute=59, second=59, microsecond=999999)
Order.objects.filter(created__range=(start, end)) 
```

来源[在这里](https://bradmontgomery.net/blog/date-lookups-django/)

# asp.net-mvc - 组合式 ASP.NET MVC Web 应用程序（MEF、Areas、DI）的最佳实践

> ID：12128890
> 
> 赞同：11
> 
> 时间：2012-08-26T09:06:41.420
> 
> 标签：asp.net-mvc, dependency-injection, dependencies, mef, asp.net-mvc-areas

我目前正在研究如何重构现有的不是非常模块化的 ASP.NET MVC 3.0 应用程序的体系结构。我有一个类似插件的结构，以使现有项目可扩展。

我已经搜索了制作模块化 Web 应用程序的不同策略，并发现了以下内容。我希望你对这些想法发表评论。

*   **不同项目中的 MVC 区域**

对于每个插件，我想创建一个单独的 ASP.NET MVC 项目，其中包含插件的控制器、视图和视图模型。“员工”模块将包含一个用于列出、创建、更新和删除员工的区域。不过这听起来不错，AreaRegistration 需要将所有区域放在“bin”目录中。我找到了一种将我的 Area 项目直接放在 Areas 文件夹中并从“/Areas/[AreaName]/bin”文件夹中解析 A​​rea 程序集的方法：

```
BuildManager.AddReferencedAssembly.Add(Assembly.LoadFrom(…));
AppDomain.CurrentDomain.AssemblyResolve += ResolveAssemblies; 
```

这工作得很好，允许我在主项目的 Areas 文件夹中部署插件。我喜欢使用 ASP.NET MVC 开箱即用的区​​域功能。

*   **MVC 可移植区域 (MVCContrib)**

[http://elegantcode.com/2012/04/06/mvc-portable-areas/](http://elegantcode.com/2012/04/06/mvc-portable-areas/)

可移植区域似乎不是一个好方法，因为它们要求将视图编译为区域项目文件中的嵌入资源。这将阻止 IIS 缓存。另一方面，我真的无法想象性能缺陷到底有多大。

*   **使用 MEF 的基于 MVC 的模块**

[http://www.fidelitydesign.net/?p=104](http://www.fidelitydesign.net/?p=104)

为了在其他项目中创建松散耦合的服务，我严重依赖 MEF。因此，我认为使用它来发现 ASP.NET MVC 模块/插件是一个好主意。我最终会使用一个 ControllerFactory 来实例化使用“Export”属性导出的控制器。这样我就可以完全控制插件实例化并且可以使用 MEF 来获取服务。然而，使用 MEF 确实需要比使用开箱即用的控制器的 MVC 区域需要更多的工作。

*   **跨插件项目的实体框架**

到目前为止，我无法解决的一个问题是如何在各个插件项目中分配实体。目前我们使用数据库优先方法，它由一个包含所有实体的 *.edmx 模型文件组成。即使使用 DbContext 或 Code First，也不可能为一个数据库使用多个 DbContext 类。一种想法是使用 MEF 将来自不同插件的实体加载到中央 DbContext 类中。但是我不知道这是否是受支持和/或推荐的设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:55:49.113

另一种选择是使用我的 Griffin.MvcContrib。它为您处理所有管道，并允许您编写视图和使用几乎不需要代码更改的区域。

将它与 IoC 容器一起使用以获得强大的插件系统。

这是一篇演示如何的文章：http: [//www.codeproject.com/Articles/386674/ASP-NET-MVC-3-plug-in-architecture-using-Griffin-M](http://www.codeproject.com/Articles/386674/ASP-NET-MVC-3-plug-in-architecture-using-Griffin-M)

# jquery - 在 JQuery 中逐行突出显示 span 标签内容

> ID：12128892
> 
> 赞同：2
> 
> 时间：2012-08-26T09:06:58.897
> 
> 标签：jquery

我使用这些代码行来突出显示我的句子，每个细节都可以，但我想逐行突出显示（此代码一起突出显示 span 标签中的所有行）

**JavaScript 代码**

```
$(document).ready(function(){

  var seconds = 5;
  var el = $('span#test');
  var width = el.outerWidth();
  var height = el.outerHeight();
  var wrapper = $('<span>').css({
    width: width + 'px',
    height: height + 'px',
    position: 'relative'
  });
  var background = $('<span>').css({
    width: 0,
    height: height + 'px',
    position: 'absolute',
    background: '#0f0'
  });
  wrapper.append(background);
  wrapper.append(el.css('position','absolute'));
  $('body').append(wrapper);
  background.animate({width: '+=' + width},1000*seconds);

});​ 
```

我该怎么做？

我知道我可以通过将其拆分为字符来做到这一点（**例如：** [Highligh Line By Line](http://jsfiddle.net/9UgEF/34/)），但我使用了自定义字体。

**我的演示：http:** [//jsfiddle.net/9UgEF/41/](http://jsfiddle.net/9UgEF/41/)

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:57:41.270

我的第一个想法是使用 :first-line 选择器和缓冲区，但不幸的是，这个选择器在 jQuery/Sizzle 中不可用，所以我想出了另一种解决方案，`span`根据它`span`的宽度将行分割成 a 。它虽然使用了 Canvas 2D API。

解决问题的基本方法是使用`$.fn.animate()`每行，例如，对每行应用具有开始延迟的动画，如下所示：

```
// apply animation per line (fading out as example)
$('span .line').each(function(idx) 
{
    $(this).wrap('<span class="linecontent">');
    $(this).delay(idx * 1500).fadeOut(1500);
}); 
```

使用 javascript 时，将段落拆分为行会出现问题。我应用的解决方案是基于使用 RegEx 单词边界分隔单词，如果除了纯文本之外还有任何其他内容要包装，这将出现问题。但是，任何非空白 Unicode 字符都应该被识别为单词的一部分。

这是分词代码（期望跨度中的文本内容）：

```
// split words
words = ($('span').text().split(/\W/));
lineWidth = $('span').width() - 80; // security offset

canvas = document.createElement('canvas');

$(canvas).css(
{
    'height': $('span').height(),
    'width': lineWidth
});
ctx = canvas.getContext('2d');
ctx.font = $('span').css('font');

line = []; 
lines = [];

while (words.length > 0)
{
    metrics = ctx.measureText(line.join(' '));

    if (metrics.width < lineWidth) 
    {
        line.push(words.shift());         
    } else 
    {
        lines.push(line);
        line = [];
    }
}

$('span').empty();
sp = $('span');
$(lines).each(function() 
{
    l = $('<span class="line">').append(this.join(' '));
    $(l).css('display', 'inline-block');
    $(sp).append(l);
}); 
```

我创建了一个[小提琴](http://jsfiddle.net/Vvz5Z/2/)来演示这种线分离并向每条线应用淡出动画。调整小提琴中的突出显示代码以处理`span.line`元素并使用动画延迟应该没有问题，而且使用自定义字体也不应该出现问题，因为 Canvas API afaik 优雅地接受了这一点。但是，如上所述，有一个问题：分离这个词。

# mysql - 交换中的 MySQL InnoDB 索引

> ID：12128903
> 
> 赞同：0
> 
> 时间：2012-08-26T09:08:38.313
> 
> 标签：mysql, replication, innodb

我找不到任何关于我的问题的信息。这是一个更理论的问题。例如，我有表**关键字**。

```
CREATE TABLE IF NOT EXISTS `keywords` (
  `kid` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `language_id` int(11) NOT NULL,
  `keyword` varchar(120) NOT NULL,
  PRIMARY KEY (`kid`),
  UNIQUE KEY `custom_idx` (`language_id`,`keyword`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

我的服务器有 1GB 的可用 RAM 内存。我的表有数百万行，我的**custom_idx**大小超过 1GB。*索引无法装入 RAM 内存*。mysql会做什么？是不是只有这个索引的一部分会存储在内存中？这会极大地破坏 BTREE/聚集索引的性能吗？

另外，如果我的索引大小不能适应**innodb_buffer_pool_size**限制，会发生什么？

复制是索引无法放入 RAM 内存的巨大 InnoDB 数据库的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:18:39.403

InnoDB 使用 InnoDB 缓冲池（其大小由`innodb_buffer_pool_size`变量控制）来缓存很多不同的数据结构，包括行数据和索引。如果你的数据集对于这个缓冲池来说太大了，MySQL当然会交换。效果有多大，你必须衡量。它可以是“几乎不引人注意”和“查询时间延长 1000 倍”之间的任何内容。

复制肯定不是解决方案。复制只会将您的数据同步到另一台机器，并且不允许它们之间存在模式差异（例如，不同的索引，如果您有这个想法的话）。如果另一台机器同样装备不足，您将使用两台而不是一台慢速数据库服务器。您可能应该在第一台服务器中安装更多内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:12:47.850

InnoDB 将尽可能多的数据加载到内存中。如果它不适合内存 - 好吧，它不会加载它。这有两个副作用。首先，如果它需要查找不在 RAM 中的数据，它必须从磁盘加载它。但它首先需要将任何更改的数据刷新回磁盘，即内存中。此外，如果任何唯一索引无法放入内存，那么当您尝试插入/更新行时，应从磁盘读取索引；这是第一个值得注意的性能问题之一 - 当唯一索引无法放入内存时插入速度很慢，因为它是应该读取所​​有索引值的少数情况之一。

不是复制，而是分片/分区是将数据集放入不同服务器的 RAM 的方法。

# android - 在 Android 中重复 3 次后停止 AnimationDrawable

> ID：12128904
> 
> 赞同：2
> 
> 时间：2012-08-26T09:08:40.653
> 
> 标签：android, animation

我想知道是否有办法在 AnimationDrawable 重复 X 次（比如说 3 次）后停止 AnimationDrawable，就像 Animation 对象一样。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:34:12.853

是的，你应该使用

> 动画监听器

并覆盖 onAnimationRepeat

>

```
 public void onAnimationRepeat(Animation animation) {

                if (counter == 3) {
                // break 
                }  // else go on
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:22:58.477

```
if (x==3){parentView.clearAnimation();} 
```

parentView 是将动画应用到的视图。

# c# - 将列表参数传递给 SQL Server 存储过程

> ID：12128906
> 
> 赞同：1
> 
> 时间：2012-08-26T09:08:48.377
> 
> 标签：c#, sql-server-2012

我是 c# 和 .Net 的新手，我需要你的帮助。

我在 DB 中创建了一个接受表值参数（id 列表）的过程，并且我正在寻找适合 Oracle Associative Array 的等价物。

--数据库中的新数据类型：

```
CREATE TYPE IDType AS TABLE
(
        ID bigint  
)
GO

-- DB Procedure
Create procedure TVP_PROC (@ID IDType readonly)
    Declare @TVP IDType
    Insert into @TVP select ID from @ID
As
  Update  my_tbl set id=(select ID from @TVP) 
```

它应该像这样运行： exec TVP_PROC @ID //@ID is alist of id's

.Net 代码：

```
Public void UpdateID (List long<long> IDS )
{
    Datatable datatable = new datatable ();
    Datatable.columns.add (“IDS”,typeof(int64));
    Foreach (int64 id in IDS)
    {
        Datatable.Rows.Add(id);
    }
}

Var Query =hibernate.createsqlquery(“Exec TVP_PROC @ID:IDS”); 
```

询问。？？？？？？

问题 ：

1.  除了使用数据表变量并在每次迭代时分配 id 之外，还有其他首选方法来编写它吗？

2.  更重要的是，分配 table\list 变量的适当方法是什么？是否有任何表值\数组变量可以定义为这种数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:57:02.307

好吧，现在您已经在数据库中创建了表类型和存储过程，在 C# 中，您需要如下代码：

```
// define connection and command object
using(SqlConnection conn = new SqlConnection("your-connection-string-here"))
using(SqlCommand cmd = new SqlCommand("dbo.TVP_PROC", conn))
{
   // define the command to be a stored procedure
   cmd.CommandType = CommandType.StoredProcedure;

   // set up parameters
   cmd.Parameters.Add("@ID", SqlDbType.Structured).Value = datatable;

   // open connection, execute stored procedure, close connection
   conn.Open();
   cmd.ExecuteNonQuery();
   conn.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:57:12.213

```
 Datatable datatable = new datatable ();
    Datatable.columns.add (“IDS”,typeof(int64));
    Foreach (int64 id in IDS)
    {
        Datatable.Rows.Add(id);
    }

 // Configure the SqlCommand and table-valued parameter.
 SqlCommand insertCommand = new SqlCommand("TVP_PROC", connection);

 insertCommand.CommandType = CommandType.StoredProcedure;

 //pass here your datatable
 SqlParameter tvpParam = insertCommand.Parameters.AddWithValue("@ID", datatable);

 //specify type of your parameter
 tvpParam.SqlDbType = SqlDbType.Structured;

  // Execute the command.
  insertCommand.ExecuteNonQuery(); 
```

# php - jqgrid json数据不适用于json_decode

> ID：12128910
> 
> 赞同：0
> 
> 时间：2012-08-26T09:09:12.743
> 
> 标签：php, javascript, json, jqgrid

我有一个 json 字符串发布到服务器，如下所示：

```
{\"groupOp\":\"AND\",\"rules\":[{\"field\":\"screen_name\",\"op\":\"bw\",\"data\":\"aaa\"}]} 
```

它对我来说看起来不错，但问题是 PHP 函数`json_decode`返回 NULL。我做了一个键盘示例来说明这里的问题：http: [//codepad.org/SOJw9cZb](http://codepad.org/SOJw9cZb)。我必须对这个字符串做什么才能让 json_decode 正常工作？

这个 json 字符串由 jqgrid[过滤工具栏](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atoolbar_searching)模块发送到服务器以识别搜索参数。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:01:56.503

```
var_dump(json_decode(str_replace('\"', '"', '{\"groupOp\":\"AND\",\"rules\":[{\"field\":\"screen_name\",\"op\":\"bw\",\"data\":\"aaa\"}]}'))); 
```

工作得很好。即将 \" 转换为 "

有效的 JSON 是

```
{"groupOp":"AND","rules":[{"field":"screen_name","op":"bw","data":"aaa"}]} 
```

# javascript - 显示 HTML 代码块

> ID：12128912
> 
> 赞同：0
> 
> 时间：2012-08-26T09:09:30.597
> 
> 标签：javascript

我正在尝试创建一个包含代码示例（HTML、JavaScript、CSS 等）的网站，并且需要弄清楚如何在浏览器不将其解释为文本以外的任何内容的情况下显示代码。

我写了一个JavaScript函数来转换文本中的<，>，然后它写入结果，但是浏览器似乎仍然识别< /script>（没有/script前后的空格。

```
 function codeToHTML(input) {
            var output = "";
            for(i=0;i<input.length;i++) {
                var c = input.charAt(i);
                if(c=='<') {
                    output+="&lt;";
                } else if (c=='>') {
                    output+="&gt;"; 
                } else if (c=='\n') {
                    output+="<br>";
                } else if (c==' ') {
                    output+="&nbsp;";
                } else {
                    output+=c;
                }
            }
            return output;
        } 
```

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:28:09.050

HTML5 有一个非常有用的`<code>`标记功能，您放入其中的所有内容都将以代码格式显示。您还可以使用`<pre>`标签，以便它以您想要的方式显示它。

如果您正在谈论专门处理特殊字符，我想您可以为此编写一些 js，但如果它们是静态示例，我认为只需像您一样简单地反斜杠和/或编写相应的代码会更容易在你的 JavaScript 中。如果你仔细想想，让脚本运行的原因是它看到了一个`<script>`标签。摆脱它，它知道不运行它，所以就这样做`&ltscript&gt`。这听起来很烦人，但我认为从长远来看它会少很多麻烦。理想情况下，您的 HTML 应该专注于内容，我会说显示代码是内容的事情，而不是 Javascript 的事情。

如果您正在处理大量代码，您也可以只使用[HTML 转换器](http://web.forret.com/tools/html.asp)。希望这可以帮助。

# java - 将部分 Java 6 库添加到 Java 5 环境

> ID：12128916
> 
> 赞同：2
> 
> 时间：2012-08-26T09:10:32.487
> 
> 标签：java, xml, java-6, java-5

我有一种情况，我需要使用 javax.xml 库，其中大部分来自 Java 6。但是我的部署服务器在 Java 5 上运行，我无法控制。

那么是否可以将这些特定的库添加到项目中并可以在 Java 5 环境中运行？

我主要使用

```
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource; 
```

我正在使用的代码

```
 XMLInputFactory xif = XMLInputFactory.newFactory();
    StreamSource xml = new StreamSource("input.xml");
    XMLStreamReader xsr = xif.createXMLStreamReader(xml);
    while(xsr.hasNext()) {
        if(xsr.isStartElement() && xsr.getLocalName().equals("StandardError")) {
            break;
        }
        xsr.next();
    } 
```

那么任何人都可以告诉我如何避免这种情况，以便我的应用程序可以在 Java 5 环境中运行而不会出现问题。

在我们使用 maven 构建之间，所以任何库都必须进入 pom.xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:12:18.147

**[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)**和[**StAX (JSR-173)是在**](http://jcp.org/en/jsr/detail?id=173)[**Java EE 5**](http://www.oracle.com/technetwork/java/javaee/tech/javaee5-jsp-135162.html)中引入的，并且与 Java SE 5（这些规范发布时的 JDK 版本）完全兼容。当然，这些标准的实现作为 Java SE 6 的一部分包含在内。

**java.net 存储库**

您可以从 java.net 存储库获取标准的公共 API

```
 <repository>
        <id>java.net</id>
        <name>java.net Maven Repository</name>
        <url>https://maven-repository.dev.java.net/nonav/repository</url>
    </repository> 
```

以下是最新版本的 JAXB 公共 API 的依赖项

```
 <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.2</version>
    </dependency> 
```

**实现**

除了公共 API 之外，您还需要实现。每个规范都有多个实现。下面是一个 POM 文件的链接，该文件将[EclipseLink MOXy](http://www.eclipse.org/eclipselink/moxy.php)作为 JAXB 实现引入（注意：我是 MOXy 负责人）。

*   [https://github.com/bdoughan/blog20120418/blob/master/pom.xml](https://github.com/bdoughan/blog20120418/blob/master/pom.xml)

**关于 Java SE 5**

自 2009 年 10 月以来，Java SE 5 没有收到任何公开更新，甚至 Java SE 6 也正迅速接近生命的尽头。如果可能的话，我会推荐使用 Java SE 7（Java SE 8 目前正在开发中）。

*   [http://www.oracle.com/technetwork/java/eol-135779.html](http://www.oracle.com/technetwork/java/eol-135779.html)

# grails - 如何在已部署的 Grails 2.1.0 应用程序中包含 Groovy 2.0？

> ID：12128921
> 
> 赞同：8
> 
> 时间：2012-08-26T09:11:41.377
> 
> 标签：grails, deployment, groovy, war

我已将我的开发箱更新为 Grails 2.1.0 和 Groovy 2.0（Ubuntu 12.04 64Bit，STS 2.9）。

将我的应用程序从 2.0 迁移到 2.1.0 后，我注意到 WAR 文件仍然包含 groovy-all Groovy 1.8.6 jar。

我的问题是：

*   是否可以（或建议）让 Grails 包含 Groovy 2.0 Jar？
*   这样做有意义吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-26T11:14:44.203

Grails 2.1 基于 Groovy 1.8，Grails 2.2 使用 Groovy 2.0，Grails 2.3 使用 Groovy 2.1。过去对 Groovy 版本的更改需要对 Grails 核心代码进行更改，因此当然不建议（并且可能不可能）使用特定 Grails 版本所针对的版本以外的 Groovy 版本。

# c - 具有 typedef 的结构

> ID：12128922
> 
> 赞同：0
> 
> 时间：2012-08-26T09:12:47.920
> 
> 标签：c, struct, typedef

> **可能重复：**
> [结构的用途，typedef struct，在 C++](https://stackoverflow.com/questions/1083959/purpose-of-struct-typedef-struct-in-c)
> [typedef struct vs struct 定义中](https://stackoverflow.com/questions/1675351/typedef-struct-vs-struct-definitions)

我知道在 C 中有两种声明结构的方法

```
struct point{
    int x, y;
}; 
```

和：

```
typedef struct{
    int x, y;
} point; 
```

但这两种方法有什么区别，我什么时候使用 typedef 方法而不是其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:16:47.433

区别：

1.  第一个是有效的 C89；
2.  第一个不会使结构的标签（“point”）成为完整的类型定义，因此您只能`point p;`与第二个一起使用。
3.  我们的 C 编程之神 Linus Torvalds 强烈建议**不要**对结构使用 typedef（除非明确需要将实际字段和类型隐藏在不透明的结构后面），因为它会降低可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:18:39.470

`struct`在*C*中只有一种声明 a的方法，使用`struct`关键字，可选地后跟结构名称，然后是大括号中的成员字段列表。所以你可以有：

```
 struct point_st {
     int x, y;
  }; 
```

这`point_st`是您的结构的名称（或标签）。请注意，结构名称在 C 中的命名空间与类型不同（这在 C++ 中不同）。所以我习惯用`_st`如上所示的结构名称后缀。

您可以（独立地）使用 typedef 定义类型名称，例如

```
 typedef struct point_st Point; 
```

（您可以`typedef`在任何 C 类型上使用，顺便说一句）。

例如 Gtk 和 Glib 有很多不透明的类型，它们就是这样的不透明结构；只有实现知道并关心结构成员。

当然编译器需要知道结构的字段来分配它；但如果您只使用指向不透明结构的指针，则无需声明该结构（即大括号中的字段）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:19:24.170

对于第一种形式，变量声明必须是：

```
struct point A; 
```

第二种形式允许声明变量而`struct`不像

```
point B; 
```

# sencha-touch - 在 SenchaTouch2 中显示多个列表

> ID：12128926
> 
> 赞同：0
> 
> 时间：2012-08-26T09:13:11.493
> 
> 标签：sencha-touch, sencha-touch-2

我有一些 JSON 数据，像这样

```
category:Fruits
 item:Banana
 item:Apple
 item:Peach
category:Vegetables
 item:Cucumber
 item:Tomato 
```

对于这些数据，我想显示 2 个带有 vbox 布局的列表，如下所示

```
|  Friuts  |   Vegetables  |
----------------------------
|  Banana  |   Cucumber    |
|   Apple  |    Tomato     |
|   Peach  |               | 
```

当然，数据是从服务器获取的，列表数量和项目可能会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:57:39.393

我希望你的意思是`HBOX`布局在这里。只需通过 Ajax 请求访问 JSON 数据，访问单个列表并使用`setData()`List 的功能将单个类别数据填充到列表中。

# html - 部分滚动条不出现

> ID：12128927
> 
> 赞同：0
> 
> 时间：2012-08-26T09:14:12.730
> 
> 标签：html, css

嗨，我正在尝试使用我在网上找到的一些代码创建一个 Twitter 固定样式的标题，并且到目前为止我所得到的内容有效，但是内容滚动条没有完全显示。如以 100% 浏览时，您无法完全看到页脚中的任何内容

现场演示：http: [//jsfiddle.net/HPcxT/](http://jsfiddle.net/HPcxT/)

如果有人可以帮助我，那就太好了。这也是我正在谈论的屏幕截图！

![在此处输入图像描述](../Images/4426672c231632f40cb14a2e9af90bd5.png)

代码： **CSS**

```
 html {
 height:100%; /* fix height to 100% for IE */
 max-height:100%; /* fix height for other browsers */
 padding:0; /*remove padding */
 margin:0; /* remove margins */
 border:0; /* remove borders */
 background:#fff; /*color background - only works in IE */
 /* hide overflow:hidden from IE5/Mac */
 /* \*/
 overflow:hidden; /*get rid of scroll bars in IE */
 /* */
}
body {
 height:100%;
 max-height:100%;
 overflow:hidden;
 padding:0;
 margin:0;
 border:0;
    font: 13px/1.5 Helvetica Neue,Arial,Helvetica,'Liberation Sans',FreeSans,sans-serif;
}
#content {
 display:block;
 height:100%;
 max-height:100%;
 overflow:auto;
 padding-left:100px;
 position:relative;
 z-index:3;
 word-wrap:break-word;
 top:45px;
}
#head {
 position:absolute;
 margin:0;
 top:0;
 display:block;
 width:100%;
 height:40px;
    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
 background:#333333;
    background: -moz-linear-gradient(center top , #333333, #111111) repeat scroll 0 0 transparent;
}
#logo a {
    background: url("twitter_logo_right.png") no-repeat scroll 20px 9px transparent;
    color: #FFFFFF;
    display: block;
    height: 40px;
    margin-right: 5px;
    outline: medium none;
    text-indent: -9999px;
    width: 140px;
 float:left;
}
.searchbox{
    -moz-border-radius: 4px 4px 4px 4px;
    -moz-box-shadow: 0 1px 0 #444444;
    background: none repeat scroll 0 0 #666666;
    border: 1px solid black;
    color: #CCCCCC;
    font: 13px Arial,sans-serif;
    padding: 6px 25px 4px 6px;
    width: 215px;
 float:left;
}

.searchbox:focus {
    background: none repeat scroll 0 0 #eeeeee;
    border: 1px solid #999999;
}
#head ul {
  margin:0;
  padding:0;
  background:transparent;
  height:100%;
  margin-left:60px;
  padding-left:60px;
  padding-top:10px;
}
#head ul li {  display:inline;}
#head ul li a { padding-left:20px;  color:#BABABA; text-decoration:none;}
#head ul li a:hover { color:#FFFFFF;  }

table tr td{height:100px; width:300px; -moz-border-radius:12px; background-color:#C6C6C6; margin:botton:30px;}
table tr td a{color: #007B9F; font-size:1.5em; text-decoration:none;} 
```

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>WebSpeaks.in</title>
</head>
<body>
<div id="head">
   <div id="logo">
    <a href="#"></a>
   </div>
   <form style="display:inline;">
    <input style="margin-top:3px;" class="searchbox" type="text"/>
   </form>
 <ul>
  <li>
   <a href="#" title="Home">Home</a> 
  <li>
  <li>
   <a href="#" title="Profile">Profile</a> 
  </li>
  <li>
   <a href="#" title="Profile">Messages</a> 
  </li>
  <li>
   <a href="#" title="Profile">Who To Follow</a> 
  </li>
 </ul>

</div>
<div id="content">
 <div>
  <table>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/02/how-to-hide-add-item-button-magento.html">How to hide 'Add Item' button in Magento Backend Grid</a></td>
   </tr>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/02/learn-method-chaining-with-advanced.html">Learn Simple Method Chaining in PHP </a></td>
   </tr>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/02/create-simple-paint-canvas-using.html">Create Simple Paint Canvas using JavaScript</a></td>
   </tr>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/01/quickview-my-first-magento-extension.html">Quickview: My First Magento Extension</a></td>
   </tr>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/01/disabling-right-click-on-web-pagediv.html">Disabling Right Click on Web Page/DIV, Disabling Text Copy From a Web Page</a></td>
   </tr>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/01/google-like-instant-preview-using.html">Google like Instant Preview using jQuery & base64 Image Encoding in PHP</a></td>
   </tr>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/01/bubbly-image-gallery-with-jquery.html">Stylish Bubbly Image Gallery with jQuery</a></td>
   </tr>
   <tr>
    <td><a href="http://www.webspeaks.in/2011/01/here-is-simple-script-showing-image.html">Image Zoom Effect with jQuery</a></td>
   </tr>
  </table>
 </div>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:30:50.763

有一种 hacky 解决方案，我不知道是否所有浏览器都支持它，但你可以这样做：

```
#content {
    height: calc(100% - 45px);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:28:18.420

设置`#head:10%`和`#content:90%`，现在检查它 ht​​tp [://jsfiddle.net/HPcxT/3](http://jsfiddle.net/HPcxT/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:35:44.903

试试这个：

**CSS**

```
html,
body
{
    height:100%;
}
header
{
    background-color:#000;
    color:#fff;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:40px;
}
#content
{
    position:absolute;
    top:40px;
    bottom:0;
    width:100%;
}
#scroll
{
    overflow:auto;
    background-color:#ccc;
    width:100%;
    height:100%;
} 
```

**HTML**

```
<header>
    Header
</header>
<div id="content">
    <div id="scroll">
        Content
    </div>
</div> 
```

**[演示](http://jsfiddle.net/sVUf2/)**

# php - 如何在 PHP codeigniter 中创建不同的基于会员的网站？

> ID：12128928
> 
> 赞同：0
> 
> 时间：2012-08-26T09:14:40.937
> 
> 标签：php, membership

我创建了一个带有电子邮件验证的注册表单，并以所有安全性登录表单。现在我想在其中添加按月付费的会员结构。还可以免费试用 30 天。我无法理解实现这件事的逻辑。如果有人给我正确的方向来实现它，那就太好了。

这是主要要求

第一个用户可以使用试用会员 30 天。第二是月会费，用户可以通过支付月费随时开始，也可以在注册时选择-免费或月费。

我的系统在 php 中并在 codeigniter 框架上创建。但我想你不用担心，我只想知道这件事的逻辑或理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:32:16.103

你会用paypal做付费会员吗？如果是这样，事情会更容易： 0.向他展示试用选择**和**入口直接付款。如果他选择 30 天试用，那么 1.在数据库用户表中注册用户注册日期或创建试用表和输入用户和他们的注册日期 2.当用户重新登录时，检查 30 天是否过期 如果是 让他进入 如果没有让他支付费用 -> 引导他成为贝宝付费会员 在这个过程中你不要必须要求他直接付款**或**30天试用，让他一次做一件事。在网站上给他替代方案。让他知道他可以选择。我想这会给你一个想法。

# java - 使用 Webdriver 确定页面是否已更改

> ID：12128930
> 
> 赞同：9
> 
> 时间：2012-08-26T09:15:01.717
> 
> 标签：java, selenium, webdriver

有时网页的可见内容取决于页面输入元素的状态（例如，输入元素“选择你的大学”可能仅在您在“工作”字段中选择“学生”后出现）或单击某些页面元素（如下拉菜单纽扣）。我正在尝试使用 Selenium Webdriver 自动查找此类页面元素依赖项的过程。第一个想法是在文本输入字段中输入一些东西，设置选中/未选中的复选框，单击一些按钮/链接等，看看页面上是否有任何元素出现/消失。问题是：

*   有没有一种简单的方法可以确定页面上是否出现了某些内容？好吧，我可以在每次更改后制作从网页元素到 {'visible', 'invisible'} 状态的映射，并找出是否有某些变化，但是为此目的是否有内置的东西？

*   单击某些按钮可能会导致加载另一个页面，并且我想留在我正在测试的页面中，有没有办法确定 click() 方法是否会导致加载另一个页面并阻止它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T00:10:55.293

Divi对问题2的回答很好。对于第 1 部分，您可以检查元素是否像您所说的那样显示：

```
 webElement.isDisplayed(); 
```

或者您可以比较事件前后页面的 html。

```
driver.getPageSource(); 
```

（如果在每个事件之后发生更改，您也可以检查 url）。

获取 html 源的一个问题是事件可能在您最后一次操作之后触发并且尚未完成，从而使 html 保持不变。要解决此问题，您可以检查以下一些条件：

```
(Boolean) ((JavascriptExecutor)driver).executeScript("return jQuery.ready"); 
((JavascriptExecutor)driver).executeScript("return document.readyState").equals("complete"); 
```

或者您可能正在使用另一个 javascript 框架，该框架具有类似于 jQuery.ready 的另一个功能。

最后，您可能会遇到事件仅在您更改活动元素、跳出字段等后才会触发的问题。因此您可以运行以下内容：

```
Actions actionObject = new Actions(driver); 
actionObject.sendKeys(Key.TAB).perform(); 
```

或者你可以使用 javascript 来设置它（我没有检查下面的代码，我会将 webElement 设置为 html 基本元素）：

```
((JavascriptExecutor) driver).executeScript("arguments[0].focus();", webElement); 
```

我不建议使用 webdriver 来单击 body 元素，因为这可能会撤消您的最后一次单击。

为了完整起见，我将 Divi 对问题 2 的回答包括在内：

我们可以通过获取页​​面的 url 并将其与预期的 url 进行比较来检查它是否重定向到另一个页面

```
WebDriver driver;

driver.getCurrentUrl() // will returns the String value 
```

如果您当前的网址与您的预期网址不匹配，则意味着您有两种方法

1）您可以使用硒（或）网络驱动程序导航方法中的打开功能再次打开您的预期网址

```
driver.navigate().to("expected_url"); 
```

2）您可以使用后退导航

```
driver.navigate().back(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-05T08:24:20.780

根据 James 的回答，并且由于我们的测试站点不使用 jQuery，以下内容对我有用：

```
public static class WebDriverExtensions
{
    public static void WaitForPage(this IWebDriver driver)
    {
        WaitForPage(driver, 60, 200);
    }

    private static void WaitForPage(IWebDriver driver, int seconds, int waitFor)
    {
        while (!((IJavaScriptExecutor)driver).ExecuteScript("return document.readyState").Equals("complete"))
        {
            System.Threading.Thread.Sleep(50);
        }
        bool stillChanging = true;
        int iterations = 0;
        int maxIterations = (1000 * seconds) / waitFor;
        string previous = "";
        string current = "";
        while (stillChanging && iterations < maxIterations)
        {
            current = driver.PageSource;
            System.Threading.Thread.Sleep(waitFor);
            stillChanging = (!previous.Equals(current));
            previous = current;
        }
    }

    public static void Click(this IWebElement el, IWebDriver driver)
    {
        el.Click();
        driver.WaitForPage();
    }
 } 
```

我在代码中所做的是调用 el.Click(driver) 而不是 el.Click()。该方法将在页面停止更改后返回。您还可以在更改可能会更改页面上的某些内容之前/之后调用公共 driver.WaitForPage() 方法。应该修改硬编码值，以确保您的最大超时和检查更改之间的时间按预期工作。使 waitFor 太小，您将无法检测到更改。让它太大，每次点击后你必须等待很长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:49:57.707

好吧，您的第一个问题是检查 Java 中的可见性

```
Selenium selenium;

selenium.isVisible("id=element_id"); // it will return boolean value whether the element is present or not 
```

如果你想使用 webDriver 意味着然后使用

```
RenderedWebElement webElement=findElement(By.id("element_id"));
webElement.isDisplayed(); 
```

对于你的第二个问题

我们可以通过获取页​​面的 url 并将其与预期的 url 进行比较来检查它是否重定向到另一个页面

```
WebDriver driver;

driver.getCurrentUrl() // will returns the String value 
```

如果您当前的网址与您的预期网址不匹配，则意味着您有两种方法

1）您可以使用硒（或）网络驱动程序导航方法中的打开功能再次打开您的预期网址

```
driver.navigate().to("expected_url"); 
```

2）您可以使用后退导航

```
driver.navigate().back(); 
```

# c - 如何计算C中的字符串数组元素？

> ID：12128934
> 
> 赞同：0
> 
> 时间：2012-08-26T09:15:44.593
> 
> 标签：c, arrays, string, for-loop, while-loop

我希望我的循环重复多次，因为很多是“水果”数组中的字符串。

首先通过使用“while”循环进行了尝试，但我无法使其正常工作（现在它已被注释），因为（如调试器所示）它在第 4 次迭代时出现了段错误。此方法应适用于字符或整数数组，但不适用于字符串数组。为什么会这样？

然后我尝试使用“for”循环并希望它在达到数组中存储在“count”变量中的字符串元素总数时停止。但是，我找不到计算数组中字符串数的好方法。这甚至可能吗？“sizeof”运算符在这里似乎不是一个好的解决方案。

提前感谢您的回复。

```
#include <stdio.h>

int main()
{
    char *fruits[]={"Apple", "Grapefruit", "Banana"};
    int i=0;
    int count=sizeof(*fruits);

    char **bitter=&fruits[1];

    printf("Bitter fruit is: %s", *bitter);

    puts(" ");

    printf("All fruits are: ");

    for (;i<count;i++);
    {
        printf("%s ",*(fruits+i));
    }

    /*
        while ( fruits[i] != '\0')
        {
        printf("%s ",*(fruits+i));
        }

    stuff above failed. why?
    */

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:19:38.597

一种简单的方法是将 NULL 附加到您的列表中：

```
char *fruits[] = {"Apple", "Grapefruit", "Banana", NULL}; 
```

然后你可以像这样打印所有水果：

```
int i = 0;
while (fruits[i] != NULL) {
    printf ("%s ",*(fruits+i));
    i++;
} 
```

至于为什么你原来的 while 循环失败：

*   你`i`没有增加
*   您正在检查`fruits[i] != '\0'`where`fruits[i]`是否是指向`char`并且`'\0'`等于`char`0 的指针。因此，您实际上是在检查是否`fruits[i]`指向 0，但是对于前三个迭代，情况并非如此，因为`fruits[i]`指向相应水果的第一个字符，而在第四个迭代`fruits[i]`指向不属于您的程序的内存位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T12:38:08.123

```
#include <stdio.h>
int main()
{
    char *fruits[]={"Apple", "Grapefruit", "Banana"};
    int i=0;
    int count=sizeof(fruits)/sizeof(fruits[0]);
    char **bitter=&fruits[1];

    printf("Bitter fruit is: %s\n", *bitter);
    printf("All fruits are:\n");
    for(i=0;i<count;i++)
    {
        printf("%s\n",fruits[i]);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-04T13:49:32.327

您还可以考虑使用标头 string.h 中的 strlen() ：

```
#include <stdio.h>
#include <string.h>
int main()
{
    char *myarray[] = {"Mere", "Pere", "Gutui"};
    int i = 0;
    int lungime = strlen(*myarray);

    while (i < (lungime - 1)){
            printf("Fruit no. %d is %s\n", i, *(myarray + i));
            i++;
    }
    return 0;
} 
```

# sql - 将分区定义从一个表复制到另一个表

> ID：12128935
> 
> 赞同：1
> 
> 时间：2012-08-26T09:15:51.157
> 
> 标签：sql, oracle, partitioning

我有一个表 USERS，其中包含 USER_ID 和 NAME 列，它在 USER_ID 列上进行了分区。

比如说，我想创建另一个表 USER_PHN，其中包含 USER_ID 和 PHN_NO 列。此表在 USER_ID 上的分区应与 USERS 表中的分区相同。是否可以将分区定义从原始表复制到新表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:42:59.363

如果 users 和 user_phn 具有引用约束，则可以使用引用分区，如果您碰巧使用的是 Oracle 11g。有关文档，请参阅[Oracle® Database VLDB 和分区指南 11g 第 1 版 (11.1)](http://docs.oracle.com/cd/B28359_01/server.111/b32024/partition.htm#CACIHDII)。

这里的优点之一是冗余数据较少，因为分区键不需要子行中的副本。这已经在 FK 关系中定义了。

子表从父表继承分区定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:22:11.543

考虑在一个过程中编写 USERS 表的脚本，在 DDL 中找到分区部分并将表名替换为 USER_PHN，然后执行它。

# jquery - jQuery 触控设备

> ID：12128936
> 
> 赞同：0
> 
> 时间：2012-08-26T09:16:23.543
> 
> 标签：jquery, jquery-mobile, touch

我有个问题。我在这个链接[http://www.doppiacopia.com/indexDesktop.html](http://www.doppiacopia.com/indexDesktop.html)上做了这个效果， 我必须在触摸设备上重新创建这个效果。

有没有办法，创建一个虚拟鼠标？

还是另一种解决方案？

谢谢，

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:29:02.483

由于没有鼠标，因此触摸设备中存在 nomouseover 事件。您只能在此处点击或滑动。但是，您可以使用 jQuery mobile 并使用其 vmouseover 事件来虚拟处理鼠标悬停。尽管它已针对普通鼠标事件进行了规范化。你可以试一试。

[http://jquerymobile.com/demos/1.1.0-rc.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/api/events.html)

# .net - 基类中的 MEF ImportMany 从所有组件中导入所有导出 - 如何防止这种情况？

> ID：12128940
> 
> 赞同：3
> 
> 时间：2012-08-26T09:17:09.410
> 
> 标签：.net, dependencies, mef, composition

我正在使用 MEF 组合来自多个程序集的导出类型。我正在使用一个基类，它应该`ImportMany`依赖于派生类中的指定。它看起来像这样：

**底座组装：**

```
public abstract class BaseClass
{
    [ImportMany(typeof(IDependency)]
    public IEnumerable<IDependency> Dependencies { get; private set; }

    protected BaseClass()
    {
        var catalog = GetCatalog();
        var container = new CompositionContainer(catalog);
        container.ComposeParts(this);
    }

    protected abstract ComposablePartCatalog GetCatalog();
} 
```

**大会 A：**

```
[Export(typeof(BaseClass))]
public class MyA : BaseClass
{
    protected override ComposablePartCatalog GetCatalog()
    {
        return new AssemblyCatalog(Assembly.GetExecutingAssembly());
    }
}

[Export(typeof(IDependency)]
public class DependencyA1 : IDependency {}

[Export(typeof(IDependency)]
public class DependencyA2 : IDependency {} 
```

**组装 B：**

```
[Export(typeof(BaseClass))]
public class MyB : BaseClass
{
    protected override ComposablePartCatalog GetCatalog()
    {
        return new AssemblyCatalog(Assembly.GetExecutingAssembly());
    }
}

[Export(typeof(IDependency)]
public class DependencyB1 : IDependency {}

[Export(typeof(IDependency)]
public class DependencyB2 : IDependency {} 
```

然后我在基础程序集中编写所有内容：

```
static void Main(string[] args)
{
    DirectoryCatalog catalog = new DirectoryCatalog(path, "*.dll");
    var container = new CompositionContainer(catalog);
    IEnumerable<BaseClass> values = container.GetExportedValues<BaseClass>();

    // both BaseClass instances now have 4 Dependencies - from both Assemby A and Assembly B!
} 
```

我遇到的问题是，当我使用 MEF 组合`MyA`and`MyB`时，每个都包含来自两个程序集的导出`IDependency`-ies！我只想`MyA`包含 export`DependencyA1`和`DependencyA2`，与`MyB`.

我知道我可能应该为此使用依赖注入容器，但我希望可以使用 MEF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:12:49.727

在另一个作品的鼻子下做一个作品是非常讨厌的；）。

所以我会解决手动调用 container.GetExportedValues 并在构造函数中自己设置属性，这样你就可以一起摆脱 [ImportMany] 了。并且它没有在外部组合上被操纵。

HTH爱丽儿

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:59:50.287

您正在使用这种方法在 MEF 周围做一些奇怪的舞蹈，您实际上是在多次组合 BaseClass，这将根据最后发生的组合为您提供不同的结果。当前编写代码的方式在 Main 中发生的组合将是最后设置 ImportMany 的方式，因为这发生在构造函数调用 BaseClass 之后。与 Ariel 类似，我建议您不要在同一个对象上进行多个合成。

如果你必须用 MEF 做这样的事情，这里有几种方法我可以看到它可能工作：1）不要在构造函数中做第二个组合，而是使用[IPartImportsSatisfiedNotification](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.ipartimportssatisfiednotification)并在 OnImportsSatisifed 中进行第二次合成，尽管在第二次合成时要注意对该方法的第二次调用。2) 执行 Ariel 的建议，不要使用 ImportMany，而是简单地执行 GetExportedValues 以将该字段设置为其他程序集级目录。请记住，这仍然是一个很大的假设，即每个程序集只有一个派生类，否则您仍然会遇到重叠。3) 您可以将 ImportMany 移动到派生类中，并为每个派生类型导入唯一的依赖类型（即 IADependency 或 IBDendency）。4）您可以使用元数据来过滤特定派生类型的导入。

我不确定这些是否完美，但如果我要选择一个选项，我可能会选择 #4 的一些变体，并使用元数据在导入之间进行过滤。请参阅[MEF 如何确定其导入的顺序？](https://stackoverflow.com/questions/1770297/how-does-mef-determine-the-order-of-its-imports)它显示了如何订购导入，但存在用于过滤它们的类似代码示例。

# php - 将文本组织成句子

> ID：12128943
> 
> 赞同：1
> 
> 时间：2012-08-26T09:17:21.530
> 
> 标签：php, regex

所以我有一些文字：

这是一个句子。这是另一句话。这是第三句话。

任何我都试图找到一种方法将每个句子放入数组或换行。像这样的东西：

[0] => 这是一个句子。

[1] =>这是另一个句子。

[2] =>这是第三句话。

我意识到这很难做到，但不一定要完全证明。因此，如果在错误的位置拆分时，我得到仅由一个单词或半个句子组成的奇数值是可以的。所以，基本上我需要在“。”，“？”处分割。和 ”！”。

我玩过 preg_match_all() 但我很难理解正则表达式。

这是我到目前为止所拥有的，但它不起作用。如您所知，我对正则表达式的了解非常不稳定。如果有人能指出我正确的方向，我将不胜感激。谢谢你。

```
<?php

$string = "This is a sentence. This is another sentence. This is a third sentence .";

preg_match_all('/\.(.*)>\./', $string, $matches);
print_r($matches);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:34:09.690

我添加了一个句子应该以大写字母开头的条件。它不会在末尾捕获多个标点符号。

```
preg_match_all('/[AZ][^!?.]+[!?.]/', $string, $matches, PREG_PATTERN_ORDER);

```

# java - Java 中 PHP 的 gzcompress

> ID：12128944
> 
> 赞同：2
> 
> 时间：2012-08-26T09:17:35.443
> 
> 标签：java, php, compression, gzip

我尝试像 php 的 gzcompress 函数那样在 Java 中压缩字符串。但我无法在结果中得到相同的字节数组。

**我的PHP代码：**

```
<?php
echo 'This is a test';
$compressed = gzcompress('This is a test');
echo '<br>';
for ($i=0; $i<strlen($compressed); $i++) {
    echo '['.$i.'] = '.ord($compressed[$i]).'<br>';
}
?> 
```

***结果：***

这是一个测试

```
[0] = 120 
[1] = 156 
[2] = 11 
[3] = 201 
[4] = 200 
[5] = 44 
[6] = 86 
[7] = 0 
[8] = 162 
[9] = 68 
[10] = 133 
[11] = 146 
[12] = 212 
[13] = 226 
[14] = 18 
[15] = 0 
[16] = 36 
[17] = 115 
[18] = 4 
[19] = 246 
```

**Java代码：**

```
public class Main {

    public static byte[] compressString(String uncompressedString) throws IllegalArgumentException, IllegalStateException {
        try {
            byte[] utfEncodedBytes = uncompressedString.getBytes();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            try (GZIPOutputStream gzipOutputStream = new GZIPOutputStream(baos)) {
                gzipOutputStream.write(utfEncodedBytes);
                gzipOutputStream.finish();
            }
            return baos.toByteArray();
        } catch (Exception e) {
            throw new IllegalStateException("GZIP compression failed: " + e, e);
        }
    }

    public static void main(String[] args) {
        String input = "This is a test";
        System.out.println("Input:  " + input);
        byte[] compressed = compressString(input);
        for (int i = 0; i < compressed.length; i++) {
            System.out.println("[" + i + "] = " + (compressed[i] & 0xFF));
        }
    }
} 
```

***结果：***

输入：这是一个测试

```
[0] = 31 
[1] = 139 
[2] = 8 
[3] = 0 
[4] = 0 
[5] = 0 
[6] = 0 
[7] = 0 
[8] = 0 
[9] = 0 
[10] = 11 
[11] = 201 
[12] = 200 
[13] = 44 
[14] = 86 
[15] = 0 
[16] = 162 
[17] = 68 
[18] = 133 
[19] = 146 
[20] = 212 
[21] = 226 
[22] = 18 
[23] = 0 
[24] = 50 
[25] = 159 
[26] = 122 
[27] = 192 
[28] = 14
[29] = 0 
[30] = 0 
[31] = 0 
```

压缩数组的中间部分是相同的。但它们在开始和结束时是不同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T10:19:16.870

[gzcompress 函数](http://php.net/manual/en/function.gzcompress.php)的文档特别指出它使用的压缩算法是 zlib，即

> 与 gzip 压缩不同，后者包含一些标头数据。有关 gzip 压缩，请参阅 gzencode()。

Java 的 GZIPOutputStream 进行正确的 gzip 压缩，包括正确的标头。DeflaterOutputStream 在没有 gzip 标头的情况下进行简单的放气，这可能更接近您所追求的，或者有第三方解决方案，例如[JZlib](http://www.jcraft.com/jzlib/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T10:03:37.273

根据 RFC [http://www.gzip.org/zlib/rfc-gzip.html](http://www.gzip.org/zlib/rfc-gzip.html)

它指出文件的开头应该包含。

> ID1 (IDentification 1) ID2 (IDentification 2) 这些具有固定值 ID1 = 31 (0x1f, \037), ID2 = 139 (0x8b, \213)，以将文件标识为 gzip 格式。
> 
> CM（压缩方法） 这标识文件中使用的压缩方法。CM = 0-7 保留。CM = 8 表示“deflate”压缩方法，这是 gzip 常用的一种，在其他地方有文档说明。

所以前三个字节应该是 31、139、8。第四个字节应该是 0-31 之间的值（使用位 0 到 4，并且保留 5,6 和 7）。我怀疑您在 PHP 中看到的输出不是 gz 格式。

# winforms - 如何在停靠和取消停靠时更改 DevExpress DockPanel TabText

> ID：12128945
> 
> 赞同：1
> 
> 时间：2012-08-26T09:17:37.563
> 
> 标签：winforms, devexpress

在停靠和取消停靠时..我在“TabText”中遇到问题我有 5 个面板而停靠到左侧我想显示它的名称并从中取消停靠.它将转到表单的底部...

我的问题是，当它到达底部时，我设置`TabText`为`" "`.. 但是当所有选项卡都停靠在底部时，只有几分之一秒的名称显示在其中...我使用`VisibilityChangedEventArgs`事件设置`TabText`为`" "`

我需要一个解决方案，即使在几分之一秒内停靠到底部名称时也不会出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:54:06.320

我解决了这个问题..这是可以在 DevExpress Dock 面板的 VisibilityChangedEventArgs 之前调用的代码

```
 protected override void UpdateRootPanels()
    {
        DockWindow objWindow = null;
        base.UpdateRootPanels();
        try
        {
            this.BeginUpdate();
            if (this.ActivePanel != null && this.ActivePanel.Count > 0)
            {
                for (int iCount = 0; iCount < this.ActivePanel.Count; iCount++)
                {
                    if (ActivePanel[iCount].Visibility == DockVisibility.Visible)
                    {
                        objWindow = GetDockWindowByName(ActivePanel[iCount].Name);
                        if ((objWindow.DockState == DockWindowDockStateConstants.Collapsed && this.PanelActivationList[1].Dock == DockingStyle.Fill)
                            || (objWindow.DockState == DockWindowDockStateConstants.Collapsed && this.PanelActivationList[1].Dock == DockingStyle.Right))
                        {
                            this.ActivePanel[iCount].TabText = " ";
                        }
                        //.Invoke((MethodInvoker)delegate { this.ActivePanel[iCount].TabText = " "; }, null);
                    }
                }
            }
        }
        finally
        {
            this.EndUpdate();
        }
    } 
```

# python - 来自子文件夹的 Python 随机行

> ID：12128948
> 
> 赞同：7
> 
> 时间：2012-08-26T09:17:47.390
> 
> 标签：python, python-3.x, random-sample

我在多个子文件夹中的 .txt 文件中有很多任务。我正在尝试从这些文件夹、它们包含的文件以及最后一个文件中的文本行中随机选择总共 10 个任务。应删除或标记选定的行，以便在下次执行时不会选择它。这可能是一个太宽泛的问题，但我会很感激任何意见或方向。

这是我到目前为止的代码：

```
#!/usr/bin/python  
import random   
with open('C:\\Tasks\\file.txt') as f:  
    lines = random.sample(f.readlines(),10)    
print(lines) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T23:28:25.963

这是一个简单的解决方案，每个样本只通过一次文件。如果您确切知道将从文件中采样的项目数量，那可能是最佳选择。

首先是示例功能。这使用了@NedBatchelder 在对早期答案的评论中链接到的相同算法（尽管那里显示的 Perl 代码只选择了一行，而不是几行）。它从可迭代的行中选择值，并且只需要在任何给定时间将当前选择的行保存在内存中（加上下一个候选行）。`ValueError`如果可迭代的值少于请求的样本大小，它会引发 a 。

```
import random

def random_sample(n, items):
    results = []

    for i, v in enumerate(items):
        r = random.randint(0, i)
        if r < n:
            if i < n:
                results.insert(r, v) # add first n items in random order
            else:
                results[r] = v # at a decreasing rate, replace random items

    if len(results) < n:
        raise ValueError("Sample larger than population.")

    return results 
```

**编辑：**在另一个问题中，用户@DzinX 注意到，如果您对大量值进行采样，则`insert`在此代码中使用 会使性能变差（ ）。`O(N^2)`他避免这个问题的改进版本[在这里](https://stackoverflow.com/a/12583436/1405065)。**/编辑**

现在我们只需要为我们的函数创建一个合适的可迭代项来采样。这是我使用生成器的方法。此代码一次只会打开一个文件，并且一次不需要超过一行内存。可选`exclude`参数（如果存在）应该是`set`包含在先前运行中选择的行（因此不应再次产生）。

```
import os

def lines_generator(base_folder, exclude = None):
    for dirpath, dirs, files in os.walk(base_folder):
        for filename in files:
            if filename.endswith(".txt"):
                fullPath = os.path.join(dirpath, filename)
                with open(fullPath) as f:
                     for line in f:
                         cleanLine = line.strip()
                         if exclude is None or cleanLine not in exclude:
                             yield cleanLine 
```

现在，我们只需要一个包装函数将这两个部分联系在一起（并管理一组可见的行）。它可以返回单个大小`n`的样本或样本列表`count`，利用来自随机样本的切片也是随机样本的事实。

```
_seen = set()

def get_sample(n, count = None):
    base_folder = r"C:\Tasks"
    if count is None:
        sample = random_sample(n, lines_generator(base_folder, _seen))
        _seen.update(sample)
        return sample
    else:
        sample = random_sample(count * n, lines_generator(base_folder, _seen))
        _seen.update(sample)
        return [sample[i * n:(i + 1) * n] for i in range(count)] 
```

以下是它的使用方法：

```
def main():
    s1 = get_sample(10)
    print("Sample1:", *s1, sep="\n")

    s2, s3 = get_sample(10,2) # get two samples with only one read of the files
    print("\nSample2:", *s2, sep="\n")
    print("\nSample3:", *s3, sep="\n")

    s4 = get_sample(5000) # this will probably raise a ValueError! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T10:23:19.677

要在所有这些文件中获得适当的随机分布，您需要将它们视为一大组行并随机选择 10 个。换句话说，您必须至少阅读所有这些文件一次才能至少弄清楚*您有多少行*。

但是，您不需要将所有行都保存在内存中。您必须分两个阶段执行此操作：索引您的文件以计算每个文件中的行数，然后从这些文件中选择 10 个随机行进行读取。

第一次索引：

```
import os

root_path = r'C:\Tasks\\'
total_lines = 0
file_indices = dict()

# Based on https://stackoverflow.com/q/845058, bufcount function
def linecount(filename, buf_size=1024*1024):
    with open(filename) as f:
        return sum(buf.count('\n') for buf in iter(lambda: f.read(buf_size), ''))

for dirpath, dirnames, filenames in os.walk(root_path):
    for filename in filenames:
         if not filename.endswith('.txt'):
             continue
         path = os.path.join(dirpath, filename)
         file_indices[total_lines] = path
         total_lines += linecount(path)

offsets = list(file_indices.keys())
offsets.sort() 
```

现在我们有了一个偏移映射、指向文件名和总行数。现在我们选择十个随机索引，并从您的文件中读取这些：

```
import random
import bisect

tasks = list(range(total_lines))
task_indices = random.sample(tasks, 10)

for index in task_indices:
     # find the closest file index
     file_index = offsets[bisect.bisect(offsets, index) - 1]
     path = file_indices[file_index]
     curr_line = file_index
     with open(path) as f:
         while curr_line <= index:
             task = f.readline()
             curr_line += 1
     print(task)
     tasks.remove(index) 
```

请注意，您只需要索引一次；您可以将结果存储在某处，并且仅在文件更新时更新它。

另请注意，您的任务现在“存储”在`tasks`列表中；这些是文件中行的索引，我在打印所选任务时从该变量中删除索引。下次您运行`random.sample()`选择时，之前选择的任务将不再可供下次选择。如果您的文件确实发生更改，则此结构将需要更新，因为必须重新计算索引。这`file_indices`将帮助您完成该任务，但这超出了此答案的范围。:-)

如果您只需要*一个*10 项样本，请改用[Blckknght 的解决方案](https://stackoverflow.com/a/12134726)，因为它只会遍历文件一次，而我的需要 10 个额外的文件打开。如果您需要*多个*样本，此解决方案每次需要样本时只需要额外打开 10 个文件，它不会再次扫描所有文件。如果您的文件少于 10 个，仍然使用 Blckknght 的答案。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T19:25:40.380

**编辑：**经过仔细审查，这个答案不符合要求。重做它让我想到了水库采样算法，@Blckknght 在他的回答中使用了该算法。所以忽略这个答案。

很少有办法做到这一点。这是一个...

1.  获取所有任务文件的列表
2.  随机选择一个
3.  从该文件中随机选择一行
4.  重复直到我们有所需的行数

编码...

```
import os
import random

def file_iterator(top_dir):
    """Gather all task files"""
    files = []
    for dirpath, dirnames, filenames in os.walk(top_dir):
        for filename in filenames:
            if not filename.endswith('.txt'):
                continue
            path = os.path.join(dirpath, filename)
            files.append(path)
    return files

def random_lines(files, number=10):
    """Select a random file, select a random line until we have enough
    """
    selected_tasks = []

    while len(selected_tasks) < number:
        f = random.choice(files)
        with open(f) as tasks:
            lines = tasks.readlines()
            l = random.choice(lines)
            selected_tasks.append(l)
    return selected_tasks

## Usage
files = file_iterator(r'C:\\Tasks')
random_tasks = random_lines(files) 
```

# c - 为串口设备存储字符串命令的最优雅方式？

> ID：12128949
> 
> 赞同：1
> 
> 时间：2012-08-26T09:18:05.223
> 
> 标签：c, serial-port

假设我正在与串行端口设备通信，并且有大量命令 (74) 用于控制此类设备。存储和使用它们的最佳方式是什么？

当然，我可以通过以下方式组织它们：

```
static char *cmd_msgs[] =
{
    "start",
    "stop",
    "reset",
    "quit",
    "",
    "",
    "",
    "",
    ...
}; 
```

或人类可读：

```
char cmd_start_str[] = "start";
...
char cmd_quit_str[] = "quit"; 
```

有人可以指出处理此类任务的工作示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T09:24:04.743

第一种方法很好——不要使用很多具有唯一名称的全局变量，它们很难引用，尤其是当你想循环它们时。这就是字符串数组的用途（您的第一种方式）。如果您想要人类可读的代码（您应该想要），请使用一个合理命名的枚举，其值对应于实际的命令字符串。所以做类似的事情

```
const char *cmds[] = {
    "command 1",
    "command 2",
    "Print Hello World",
    "Explode House"
};

enum {
    COMMAND_ONE,
    COMMAND_TWO,
    COMMAND_SAYHELLO,
    COMMAND_BOOM
}; 
```

`cmds[COMMAND_SAYHELLO]`这样，您可以通过索引数组轻松地引用您的命令，但您仍然可以通过编写等来获得可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:27:07.960

如果您使用第一个选项，您通常需要第二组常量或 #defines 来定义数组中每个字符串的偏移量：

例如

```
#DEFINE cmd_start 0
#DEFINE cmd_stop 1 
```

所以可以使用 `cmd_msgs[cmd_start]`

所以我会选择你的第二个选择

```
char* cmd_start_str = "start"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:40:24.620

对于这个应用程序，我会使用一个结构数组。

```
// Command handler signature. Choose as per your requirement.
    typedef int (*cmdHandlerType)(char * hostCmdString); 

    //Command Structure
    typedef struct
    {
        char *commandString; /**< points to the Command String*/
        cmdHandlerType cmdHandler; /**< points to the Command function*/
    } commandStruct;

    //All the commands and its functions
    static commandStruct  Commands[] = {
                            {"TEMP", TempCommand},
                            {"GAIN",   GainCommand}, 
                            {"SETPT", SetPtCommand},
                            {"...", ... },
                         };
int TempCommand( char *str)
{
     ...
} 
```

这样，当您从主机获取命令时，您可以匹配命令字符串并调用相应的处理程序。

# mysql - 如何创建包含 4 个表的视图 - 除了一个字段外，所有表都相同

> ID：12128950
> 
> 赞同：0
> 
> 时间：2012-08-26T09:18:24.110
> 
> 标签：mysql

我有 4 个要创建视图的表。除一个字段外，所有表都具有相同的列。

这是一个例子。然后字段数约为15。

```
table A
a b c d f1

table B
a b c d f2

table C
a b c d f3

table D
a b c d f4 
```

我想创建一个看起来像这样的视图

```
a b c d f1 f2 f3 f4 
```

我在 RDS 上使用我的 mysql 的最新版本。使用 mysql 语法创建此视图的最有效方法是什么？

添加了说明。a、b、c、d 字段将相互连接。IE

```
A.a=B.a.=C.a=D.a and A.b=B.b etc.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:27:16.800

鉴于假设，您的字段、 和`a`类似于`b`您的目的的唯一键（如果不是，请澄清），您的-Syntax 将如下所示：`c``d`[`CREATE VIEW`](http://dev.mysql.com/doc/refman/5.6/en/view-syntax.html)

```
CREATE VIEW your_view AS 
SELECT A.a, A.b, A.c, A.d,
       A.f1, B.f2, C.f3, D.f4
FROM   A
INNER JOIN B ON A.a = B.a AND A.b = B.b AND A.c = B.c AND A.d = B.d
INNER JOIN C ON A.a = C.a AND A.b = C.b AND A.c = C.c AND A.d = C.d
INNER JOIN D ON A.a = D.a AND A.b = D.b AND A.c = D.c AND A.d = D.d; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:27:27.253

```
CREATE VIEW foo AS
SELECT * FROM tableA NATURAL JOIN tableB NATURAL JOIN tableC NATURAL JOIN tableD 
```

# google-chrome-extension - 使用 Chrome 扩展程序向现有网站添加额外页面

> ID：12128953
> 
> 赞同：2
> 
> 时间：2012-08-26T09:18:39.173
> 
> 标签：google-chrome-extension

我想创建一个扩展程序，向现有网站添加额外的页面。例如，我想将[https://stackoverflow.com/statistics](https://stackoverflow.com/statistics)添加到 stackoverflow，以便我可以使用自定义统计信息填充它。

**这可以做到吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:24:13.217

是的，这是可能的。您可以使用重定向 ( )，或使用[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)[`chrome.webRequest.onBeforeRequest`](http://developer.chrome.com/extensions/webRequest.html#event-onBeforeRequest)将控件重写/添加到当前页面。当您选择后一个选项时，该页面必须“存在”。404 错误页面是可以的，但不存在的域会失败（因为 Chrome 会显示自己的错误页面，并且这些页面无法编写脚本）。

# ruby-on-rails - 添加此代码会破坏我的模型

> ID：12128957
> 
> 赞同：-3
> 
> 时间：2012-08-26T09:19:12.023
> 
> 标签：ruby-on-rails, model, syntax-error

添加此代码

```
def send_messages
  return if recipient_list.blank?

  recipient_list.each do |recipient|
  recipient = User.find(recipient)
  messages.build(user_id: recipient.id, conversation_id: self.id)
end 
```

对我的模型

```
class Conversation < ActiveRecord::Base
  attr_accessible :recipient_list
  after_create :send_messages

  has_many :messages
end 
```

导致对我的模型的任何引用抛出

```
syntax error, unexpected $end, expecting keyword_end 
```

从模型...没有它我的模型工作得很好。这段代码有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:22:02.857

您错过了关闭 do 块的结束：

```
def send_messages
  return if recipient_list.blank?

  recipient_list.each do |recipient|
    recipient = User.find(recipient)
    messages.build(user_id: recipient.id, conversation_id: self.id)
  end
end 
```

# gwt - SmartGWT 画布 getPrintHTML

> ID：12128962
> 
> 赞同：0
> 
> 时间：2012-08-26T09:20:09.020
> 
> 标签：gwt, smartgwt

我们想要转换为 PDF 的小部件面临问题。该小部件具有一些自定义图像和一个自定义热点小部件。它在浏览器上运行良好。

但是当我们调用 getPrintHTML 时，它会忽略图像并打印其他所有内容。小部件的 HTML 似乎包含 DIV，图像被设置为背景图像（而不是前景图像）。

问题：

1.  Canvas.getPrintHTML 会忽略背景图像吗？
2.  有没有办法超越或解决这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:39:07.310

查看 SmartGWT EE Javadoc。

[http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/docs/Printing.html](http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/docs/Printing.html)

打印属性可能吗？[http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/util/PrintProperties.html](http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/util/PrintProperties.html)

# plone - 如何在 Plone 4 rss 中附加 fqbn

> ID：12128964
> 
> 赞同：0
> 
> 时间：2012-08-26T09:20:15.277
> 
> 标签：plone

需要处理一个愚蠢的 rss 阅读器，它只使用包含 fqdn 的链接正确呈现任何以 ../ 或 / 开头的链接都将视为本地文件并返回。

那可能是plone 4 rss的mod吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:09:14.360

RSS 提要按原样传递内容正文 HTML：

[https://github.com/plone/Products.CMFPlone/blob/master/Products/CMFPlone/skins/plone_templates/rss_template.pt#L61](https://github.com/plone/Products.CMFPlone/blob/master/Products/CMFPlone/skins/plone_templates/rss_template.pt#L61)

您的正文内容具有相对链接。

解决方案

*   使用 TinyMCE 编辑器的 UID 链接功能（仅影响新内容）

*   创建一个自定义 RSS 视图，它将重写到绝对 URL 的链接。可以应用于此问题的示例[http://collective-docs.readthedocs.org/en/latest/misc/html.html?highlight=lxml#rewriting-relative-links](http://collective-docs.readthedocs.org/en/latest/misc/html.html?highlight=lxml#rewriting-relative-links)

# ios - iOS 应用程序崩溃时的内存转储

> ID：12128965
> 
> 赞同：0
> 
> 时间：2012-08-26T09:21:01.793
> 
> 标签：ios, xcode, cocoa-touch

有没有办法在发生崩溃时获取内存转储并将其加载到 Xcode？这样我就可以调试崩溃，就像设备连接到调试器时发生崩溃一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:25:03.973

不，没有办法做到这一点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-26T09:33:42.027

理解和分析ios应用崩溃报告：

[http://developer.apple.com/library/ios/ipad/#technotes/tn2151/_index.html](http://developer.apple.com/library/ios/ipad/#technotes/tn2151/_index.html)

# codeigniter - Fuelphp有auto_link()吗？

> ID：12128966
> 
> 赞同：0
> 
> 时间：2012-08-26T09:21:06.307
> 
> 标签：codeigniter, fuelphp

对此很抱歉，但我真的需要这个功能，在文档或谷歌中找不到它。Fuel PHP 是否有类似 codeigniter 的 `auto_link()' 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T10:28:35.297

自己做，这是 CodeIgniter 使用的函数：

**url_helper.php**第 380 行。

```
function auto_link($str, $type = 'both', $popup = FALSE)
{
    if ($type != 'email')
    {
        if (preg_match_all("#(^|\s|\()((http(s?)://)|(www\.))(\w+[^\s\)\<]+)#i", $str, $matches))
        {
            $pop = ($popup == TRUE) ? " target=\"_blank\" " : "";

            for ($i = 0; $i < count($matches['0']); $i++)
            {
                $period = '';
                if (preg_match("|\.$|", $matches['6'][$i]))
                {
                    $period = '.';
                    $matches['6'][$i] = substr($matches['6'][$i], 0, -1);
                }

                $str = str_replace($matches['0'][$i],
                                    $matches['1'][$i].'<a href="http'.
                                    $matches['4'][$i].'://'.
                                    $matches['5'][$i].
                                    $matches['6'][$i].'"'.$pop.'>http'.
                                    $matches['4'][$i].'://'.
                                    $matches['5'][$i].
                                    $matches['6'][$i].'</a>'.
                                    $period, $str);
            }
        }
    }

    if ($type != 'url')
    {
        if (preg_match_all("/([a-zA-Z0-9_\.\-\+]+)@([a-zA-Z0-9\-]+)\.([a-zA-Z0-9\-\.]*)/i", $str, $matches))
        {
            for ($i = 0; $i < count($matches['0']); $i++)
            {
                $period = '';
                if (preg_match("|\.$|", $matches['3'][$i]))
                {
                    $period = '.';
                    $matches['3'][$i] = substr($matches['3'][$i], 0, -1);
                }

                $str = str_replace($matches['0'][$i], safe_mailto($matches['1'][$i].'@'.$matches['2'][$i].'.'.$matches['3'][$i]).$period, $str);
            }
        }
    }

    return $str;
} 
```

# php - 选择 $_FILES[ 的值 ]["tmp_name"]

> ID：12128969
> 
> 赞同：1
> 
> 时间：2012-08-26T09:21:18.080
> 
> 标签：php

有没有办法让客户端选择值`$_FILES[<filename>]["tmp_name"]`而不是让它随机生成？例如，是否有某种类型的属性我可以以某种方式附加到文件本身，称为“tmp_name”，以便在上传时接收 PHP 脚本读取**我的** `tmp_name`而不是生成随机的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:25:29.940

不。

上传的文件数据存储在一个*随机命名的**临时文件*中。用户对此没有影响很好，如果他这样做可能是一个安全问题。您[可以在 php.ini 中配置将在其中创建此临时文件的目录，仅此](http://php.net/manual/en/ini.core.php#ini.upload-tmp-dir)而已。

# jquery - $.extend(deep, target, obj) 的正确用法是什么？我的代码不起作用

> ID：12128970
> 
> 赞同：0
> 
> 时间：2012-08-26T09:21:19.300
> 
> 标签：jquery

我在使用 $.extend 函数时遇到问题，请参阅下面的代码...

```
//Function to merge the opts with the defaultOpts

var foo = function(opts){
    var opts = opts ? opts : {};

    console.log('BEFORE: ');
    console.log(JSON.stringify(opts));

    var defaultOpts = {
        className  : 'defaultClass',
        selectable : false,
        ID         : null,
        buttons    : []
    }   

    $.extend(true, opts, defaultOpts);

    console.log('AFTER: ');
    console.log(JSON.stringify(opts));
}

//Run the function and pass in a few options

foo({
    className : 'realClassName',
    buttons   : [
        {
            something : 'nothing'
        },
        {
            something : 'nothing'
        }
    ]
}); 
```

输出的问题是“className”属性被默认值替换，但由于某种原因，“buttons”属性按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:23:57.893

尝试：

```
$.extend(true, opts, defaultOpts, opts); 
```

或者：

```
var nuOpts = {};
$.extend(true, nuOpts, defaultOpts, opts);
opts = nuOpts; 
```

# css - LI 的均匀分布在 IE7 中不起作用

> ID：12128974
> 
> 赞同：1
> 
> 时间：2012-08-26T09:22:20.627
> 
> 标签：css, internet-explorer-7, html-lists, text-alignment

我试图在我`LI`的 s 中证明/分发我的 s `UL`，并且我已经设法在除 IE7 之外的所有浏览器中这样做。看看[这个](http://jsfiddle.net/xmu9P/12/)在 IE7 和任何其他浏览器中 - 只有在 IE7 中它无法传播（导航`UL`是*Hiya Hola Bonjour Ni Hao Yo!*和*Cookie Cheese Mangoes Underwear*）。

我正在使用[IE7 JS Library](http://code.google.com/p/ie7-js/)，所以我的使用`:after`不是问题。我的用法也不是`inherit`。

详细说明问题的图片（请注意，JSFiddle 和下面的屏幕截图中的文字不同）：

![在此处输入图像描述](../Images/75e308859ec067e34bf933026002f765.png)

几个小时以来，我一直在绞尽脑汁。有人可以将我推向正确的方向吗？谢谢！:)

PS它还不是很漂亮，但是颜色只是为了澄清，如果你质疑我的品味:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:07:45.100

耶，我找到了答案。

我`display:inline-block, zoom:1, *display:inline`从`UL.justify`（有效地使其成为`display:block`）中删除，并添加了`-ms-text-justify:distribute-all-lines; text-justify:distribute-all-lines`. 我添加`text-align: left`到`LI`s，et voìla，它在**所有浏览器**中运行良好。

如果你想`:after`在 IE7 中使用，我会推荐[IE7 JS Library](http://code.google.com/p/ie7-js/)。但是，如果您想在不依赖 Javascript 的情况下执行此操作（我一般都订阅该学派，但在这种情况下不是），您可以使用针对`lt IE8`显示的条件注释`<div class="justifyAfter"></div>`。

希望这对任何人都有用:)

这是代码：

```
/* Navigation */
nav li {
    display: -moz-inline-stack; display: inline-block; zoom: 1; *display: inline;
    text-align: left;
}

.justify {
    text-align: justify; -ms-text-justify: distribute-all-lines; text-justify: distribute-all-lines;
}

.justify:after, . justifyAfter {
    content: "";
    display: -moz-inline-stack; display: inline-block; zoom: 1; *display: inline;
    width: 100%;
} 
```

# wcf - WCF 如何提供比 ASMX Web 服务更高的安全性？

> ID：12128975
> 
> 赞同：4
> 
> 时间：2012-08-26T09:22:35.090
> 
> 标签：wcf, asmx, wcf-security

我是 WCF 的新手，我想知道 WCF 如何提供比 ASMX Web 服务更高的安全性？

当我们考虑安全部分时，我们更喜欢哪种绑定？

这么多装订，我该如何选择最好的装订？

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:05:15.670

这是一个**非常非常广泛的**问题。

WCF 通过提供更多开箱即用的功能和选项来提供更多的安全性：它不仅支持传输安全性（使用 SSL 和 https 来保护您的链接，如 ASMX），还支持消息加密，并且消息默认加密并进行数字签名。

MSDN 上的这个主题[Bindings and Security](http://msdn.microsoft.com/en-us/library/ms731172.aspx)可能是一个很好的起点 - 它解释了每个绑定的各种与安全相关的特性。[编程 WCF 安全](http://msdn.microsoft.com/en-us/library/ms731925.aspx)主题更详细，WCF 安全的终极“一站式站点”是[Codeplex 上的 WCF 安全指南站点，](http://wcfsecurity.codeplex.com/)由 Microsoft 的模式和实践小组创建和维护。

* * *

至于选择正确的绑定 - 我会推荐Juval Lowy 在他的优秀著作[Programming WCF Services](https://rads.stackoverflow.com/amzn/click/com/0596805489)（针对中高级开发人员）中提出的[决策流程图。](http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:41:31.180

确实，这是一个非常开放的问题。这完全取决于您的要求，然后您可以决定选择提供安全性的正确绑定。

例如，如果您关心互操作性并且需要与非 WCF 系统进行通信，则应该选择 basicHttpBinding 或 wsHttpBinding。在某些情况下，您的服务可以驻留在单个系统上，在这种情况下 netNamedPipeBinding 将是最有效的选择。如果您需要跨多台计算机进行通信，netTcpBinding 或 netPeerTcpBinding 可能是最佳选择。如果服务需要支持断开连接或排队的呼叫，netMsmqBinding 或 msmqIntegrationBinding 将是候选选项。

WCF 安全常见问题解答 [http://www.codeproject.com/Articles/36732/WCF-FAQ-Part-3-10-security-related-FAQ](http://www.codeproject.com/Articles/36732/WCF-FAQ-Part-3-10-security-related-FAQ)

绑定默认安全 [http://www.topwcftutorials.net/2012/06/wcf-bindings-default-security.html](http://www.topwcftutorials.net/2012/06/wcf-bindings-default-security.html)

# c++ - 如何在 Makefile 中正确使用变量？

> ID：12128978
> 
> 赞同：3
> 
> 时间：2012-08-26T09:23:04.637
> 
> 标签：c++, makefile, g++, sfml

我正在关注一个创建简单乒乓球游戏的教程，并想尝试使用 makefile。我做了一些研究并写了一个，但我无法让它工作。
这就是我的项目文件夹的样子。

```
project/
|__include/
|  |__*.h
|__release/
|  |__obj/
|  |__Makefile
|__src/
   |__*.cpp 
```

这是我的 Makefile：

```
CXX         :=  g++

# Directories
SDIR        :=  ../src
IDIR        :=  ../include
ODIR        :=  ./obj
VPATH       :=  $(SDIR)

# Files
_SRCS       :=  stdafx.cpp Pang.cpp Game.cpp MainMenu.cpp SplashScreen.cpp
SRCS        :=  $(patsubst %,$(SDIR)/%,$(_SRCS))
_DEPS       :=  stdafx.h Game.h MainMenu.h SplashScreen.h
DEPS        :=  $(patsubst %,$(IDIR)/%,$(_DEPS))
_OBJS       :=  $(_SRCS:.cpp=.o)
OBJS        :=  $(patsubst %,$(ODIR)/%,$(_OBJS))
EXES        :=  Pang

# Parameters
CXXFLAGS    :=  -O2 -g -Wall -fmessage-length=0
LIBS        :=  -lsfml-audio -lsfml-graphics -lsfml-window -lsfml-system

# Default rule
all: $(SRCS) $(EXES)

# Generic compilation rule
$(ODIR)%.o : %.cpp
    $(CXX) $(CXXFLAGS) -c $< -o $@

# Link object files
$(EXES): $(OBJS)
    $(CXX) $(CXXFLAGS) -o $@ $^ $(LIBS)

# Clean Rule
clean:
    rm -f $(ODIR)/*.o $(EXES) 
```

当我运行 make 时，这就是我得到的：

```
make all 
make: *** No rule to make target `obj/stdafx.o', needed by `Pang'.  Stop. 
```

SFML 似乎以前可以工作，所以我认为这不是问题。
任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T10:12:44.770

这：

```
$(ODIR)%.o : %.cpp 
```

应该：

```
$(ODIR)/%.o : %.cpp 
```

（注意斜线）

第一个是期望`./objstdafx.o`创建文件的规则。第二个需要像`./obj/stdafx.o`. 所以对于第一个，make 不知道如何构建`obj/stdafx.o`。

有关模式匹配规则的更多信息，请参阅[文档](http://www.gnu.org/software/make/manual/html_node/Pattern-Match.html#Pattern-Match)。

# c# - 如何从 linq group by 的数据表中选择多列？

> ID：12128985
> 
> 赞同：3
> 
> 时间：2012-08-26T09:24:28.207
> 
> 标签：c#, linq

我有一个 DataTable，我想用一列分组。

我为此使用此代码：

```
DataTable  dtList = list1.Items.GetDataTable();
         var grouped = from row in dtList.AsEnumerable()
                      group row by row["T"] into valueGroup
                      select new { Value = valueGroup.Key, ID = valueGroup.Max(id => id["ID"]) }; 
```

我的问题是：它是选择两列（id，value）。我想选择乘法列。

如何选择 dtlist 的其他列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:57:49.727

如果要选择多个要分组的列，请尝试以下操作：

```
DataTable  dtList = list1.Items.GetDataTable();
var grouped = from row in dtList.AsEnumerable()
                      group row by new { T = row["T"], U = row["U"] } into valueGroup
                      select new { Value = valueGroup.Key, ID = valueGroup.Max(id => id["ID"]) }; 
```

这将为您提供作为匿名类型对象返回的多个列，这些对象`T`和`U`属性可在`Value`返回集的字段中访问。

我已经对此进行了测试，它似乎适用于示例数据集。

它基于此处描述的解决方案：http: [//social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/54f6ac70-e74c-4d9d-a9ee-6373714c0755](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/54f6ac70-e74c-4d9d-a9ee-6373714c0755)。

**编辑**

当使用`group by`子句时，所有项目都被分成组，每个组只返回一个项目，所以为了引用一个列，你必须把它放在`group by`子句中或者在它上面使用聚合方法（就像你对`ID`字段所做的那样和`Max()`方法）。

**但是，如果要创建组，请获取`ID`每个组的最大值，然后检索这些项目的其他列**（每个组中具有最大值`ID`），您可以将 a`join`用于同一个表。此代码显示了如何在您的示例`T`和`U`列的情况下执行此操作。它似乎在测试数据集上正常工作：

```
var dtListEnumerable = dtList.AsEnumerable();
//group items and get max ID for each group
var groupedTemp = from row in dtListEnumerable
          group row by row["T"] into valueGroup
          select new { Value = valueGroup.Key, ID = valueGroup.Max(id => id["ID"]) };

//join to get the rest of columns for each item with max ID returned for each group
var grouped = from groupedItem in groupedTemp
          join row in dtListEnumerable on groupedItem.ID equals row["ID"]
              into tablesJoined
          from row in tablesJoined.DefaultIfEmpty()
          select new
          {
              ID = groupedItem.ID,
              T = row["T"], 
              U = row["U"]
          }; 
```

如果您需要任何帮助，请告诉我。如果它没有返回您要检索的数据，请提供有关它的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T09:47:01.833

选择 dtList 中的多列（column1、column2、column3）：

```
DataTable  dtList = list1.Items.GetDataTable();
var grouped = from row in dtList.AsEnumerable()
                  group row by row["T"] into valueGroup
                  select new {
                         Value = valueGroup.Key,
                         ID = valueGroup.Max(id => id["ID"]),
                         col1 = row["column1"].ToString(),
                         col2 = row["column2"].ToString(),
                         col3 = row["column3"].ToString()
                          }; 
```

# ruby-on-rails - 如何在 Ruby on Rails 中格式化日期和/或时间输入？

> ID：12128987
> 
> 赞同：2
> 
> 时间：2012-08-26T09:24:40.900
> 
> 标签：ruby-on-rails, forms, formatting, ruby-on-rails-3.2

这个问题与这个问题几乎相同：

*   [表单字段中的 Rails 日期格式](https://stackoverflow.com/questions/2443094/rails-date-format-in-form-field)

除了最佳答案对我不起作用。我对 Ruby 和 RoR 都是新手，所以我不确定我到底在做什么。这是我到目前为止所拥有的。

我在我的 : 添加了默认的日期和时间格式`en.yml`：

```
en:
  date:
    formats:
      default: '%d.%m.%Y'
  time:
    formats:
      default: '%H:%M' 
```

我还使用以下代码添加了一个新的初始化程序：

```
Date::DATE_FORMATS[:default] = '%d.%m.%Y'
Time::DATE_FORMATS[:default] = '%H:%M' 
```

当我去 Rails 控制台做`Time.now.to_s`或者`Date.today.to_s`我得到正确的结果时。例如，当从数据库中获取并显示在模型索引页面上时，它们也会正确显示。

但是，当我尝试创建一个带有一些日期和时间字段（不是日期时间！）的表单时，我得到了很好`YYYY-MM-DD`的日期，而整个`YYYY-MM-DD HH:mm:ss.nnnnnn`时间。

正确格式化这些输入值的最佳做法是什么？我想避免更改视图中的任何内容（就像在[这里](https://stackoverflow.com/questions/1422274/format-datetime-in-text-box-in-rails)所做的那样），并在应用程序级别上正确解决这个问题 - 如果可能的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:41:16.163

这就是我最终做的事情：

首先，我在模型中定义了一个自定义字段：

```
 attr_accessible :entry_date_formatted

  def entry_date_formatted
    self.entry_date.strftime '%d.%m.%Y' unless self.entry_date.nil?
  end

  def entry_date_formatted=(value)
    return if value.nil? or value.blank?
    self.entry_date = DateTime.strptime(value, '%d.%m.%Y').to_date
  end 
```

然后我将表格从更改`entry_date`为`entry_date_formatted`：

```
<%= form.text_field :entry_date_formatted, :placeholder => 'Date' %> 
```

最后但并非最不重要的一点是，我已将相关字段添加到我的语言环境文件中：

```
en:
  activerecord:
    attributes:
      time_entry:
        entry_date_formatted: Entry date
        start_time_formatted: Start time
        end_time_formatted: End time 
```

这可能不是最好的方法，但它现在对我很有用。

# java - 将数据插入数据库

> ID：12128988
> 
> 赞同：-4
> 
> 时间：2012-08-26T09:24:59.240
> 
> 标签：java, jsp, jakarta-ee, servlets

我正在做一个在线考试系统的项目。一切正常，但我面临一个问题。用户首先通过输入用户名、密码、电话等创建帐户。然后将数据插入数据库并开始考试。它工作正常。但是当用户完成考试时，我想用用户名将分数添加到数据库中。为此，我在数据库中有一个名为 DATA 的表。我已经为用户名创建了一个会话并尝试获取该用户名的属性，但我无法将数据添加到数据库中。

我的代码如下：

```
String str = (String)session.getAttribute("UserName");
String q = "insert into Data (UserName, Marks) values ('"+str+"' , "+count+")";
System.out.println(q); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:36:38.000

尝试将其添加到您的代码中，但在此之前了解[JDBC](http://www.jdbc-tutorial.com/)。

```
Connection con = null;
String url = "jdbc:mysql://localhost:3306/";
String db = "jdbctutorial";
String driver = "com.mysql.jdbc.Driver";
try {
    Class.forName(driver);
    con = DriverManager.getConnection(url + db, "root", "root");
    try {
        String str = (String)session.getAttribute("UserName");
        String q =
            "insert into Data (UserName, Marks) values ('" + str +
            "' , " + count + ")";
        Statement st = con.createStatement();
        int val = st.executeUpdate(q);
        System.out.println("Marks added.");
    } catch (SQLException s) {
        System.out.println("SQL statement is not executed!");
    }

} 
```

您还可以使用`PreparedStatement`哪个比 更安全`Statement`，性能也更好。

```
 String sql = "INSERT into Data VALUES(?,?)";
  PreparedStatement prest = con.prepareStatement(sql);
  prest.setString(1, str);
  prest.setInt(2, count);
  ps.executeUpdate();
  System.out.println("Marks added.");
  con.close(); 
```

# android - GPS需要互联网吗？

> ID：12128990
> 
> 赞同：71
> 
> 时间：2012-08-26T09:25:26.547
> 
> 标签：android, google-maps, geolocation, gps

在我的应用程序中读取我当前的位置（国家、城市、地区等）之前，是否需要同时打开`Internet`和打开？`GPS`如果是，那么是否有任何替代方法可以仅从 GPS 获取位置？由于互联网可用性是一个问题。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-26T16:18:11.763

正如其他人所说，GPS 不需要互联网。

**GPS**基本上是一种基于卫星的定位系统，旨在根据从 GPS 星座中的多个卫星接收到的时间信息计算地理坐标。GPS 的首次定位时间 (TTFF) 相对较慢，并且从冷启动（意味着没有最后一个已知位置）开始，可能需要长达 15 分钟才能从卫星下载所需的数据以计算位置。 **[蜂窝网络使用的A-GPS](https://en.wikipedia.org/wiki/Assisted_GPS)**通过使用蜂窝网络将卫星数据传送到手机，缩短了这一时间。

但无论是 A-GPS 还是 GPS 位置，派生的只是地理坐标（纬度/经度）。仅从 GPS 获取更多信息是不可能的。

为了能够返回坐标以外的任何内容（例如地址），您需要一些机制来执行**[Reverse Geocoding](https://en.wikipedia.org/wiki/Reverse_geocoding)**。通常这是通过查询服务器或网络服务来完成的（例如使用[Google 地图](https://developers.google.com/maps/web-services/overview)或[Bing 地图](https://msdn.microsoft.com/en-us/library/dd877180.aspx)，但还有其他）。一些服务将允许您在本地缓存数据，但仍需要一段时间的互联网连接才能下载周边地区的地图信息。

虽然这需要大量的工作，但您可以编写自己的工具来执行反向地理编码，但您仍然需要能够将数据存储在某个地方，因为执行此操作所需的数据量远远超过您可以存储在电话，这意味着您仍然需要互联网连接才能做到这一点。如果您想到 Garmin GPS 导航装置之类的工具，它们确实会在本地存储数据，所以这是可能的，但您需要对其进行优化以获得最大的存储空间，并且可能需要比手机中通常可用的更多的东西。

## 底线：

对您的问题的简短回答是，不，您不需要有效的互联网连接来获取*坐标*，但除非您正在构建专用设备或拥有无限存储空间，否则您将需要互联网连接才能将这些坐标转换为其他任何东西。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-24T22:33:04.840

在安卓 4

进入设置->定位服务->

取消选中 Google 的位置服务。
检查 GPS 卫星。

对于测试，您可以使用[GPS 测试](https://play.google.com/store/apps/details?id=com.chartcross.gpstest)。请在户外测试！
离线地图可在新版本的[谷歌地图上](https://play.google.com/store/apps/details?id=com.google.android.apps.maps&hl=en)使用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-26T12:59:07.520

有两个问题：

1.  根据您的设备接收到的一些外部信号获取当前坐标（经度、纬度，可能还有海拔），以及
2.  从坐标中导出人类可读的位置（地址）。

要获得坐标，您不需要互联网。GPS是基于卫星的。但是要从坐标中获取街道/城市信息，您需要自己在设备上实现地图和相应的算法（大量工作！）或依赖经过验证的服务，例如 Google，在这种情况下，您需要互联网连接。

最近，谷歌允许[缓存地图](http://google-latlong.blogspot.de/2012/06/go-offline-with-google-maps-for-android.html)，这至少允许您在没有数据连接的情况下在地图上显示您的当前位置，前提是您提前缓存了地图，当您可以访问互联网时。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-26T12:29:35.707

GPS不需要任何类型的互联网或无线连接，但有像A-GPS这样的技术使用移动网络来缩短首次定位时间，或在卫星能见度低的情况下缩短初始定位或提高精度.

Android 手机倾向于使用 A-GPS。如果没有连接，他们使用纯 GPS。它们不会覆盖数据网络模式。如果您停用它，手机将不会使用任何数据连接（如果您在国外，这很方便，并且不想支付昂贵的数据漫游费用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T09:30:15.587

我发现 GPS 不需要互联网，但当然如果您需要下载地图，则需要数据连接或 wifi。

[http://androidforums.com/samsung-fascinate/288871-gps-independent-3g-wi-fi.html](http://androidforums.com/samsung-fascinate/288871-gps-independent-3g-wi-fi.html) http://www.droidforums.net/forum/droid-applications/63145-does-google-navigation-gps -requires-3g-work.html

# notepad++ - 根据 Notepad++ 中的清单突出显示

> ID：12128994
> 
> 赞同：0
> 
> 时间：2012-08-26T09:26:12.870
> 
> 标签：notepad++

我们按照我们的清单遵循我们自己定义的编码标准，使用 Notepad++
例如：
1) 如果我们声明任何字符串，它应该以 s 开头，如下所示
String sTest = null;
如果是 String Test = null; 我想强调这一点，因为它不是以 s 开头的。
对于 int 它应该是
int iCount = 0;
2）如果使用 StringTokenizer 而不是 FrameworkUtil.split ，那么我还需要在 Notepad++ 中突出显示它
请告诉我如何在 Notepad++ 中突出显示上述条件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:45:13.993

您可能无法突出显示不符合上述约定的声明。但是，您可以使用 Notepad++ 的内置正则表达式搜索功能找到所有这些声明。我在这里为您的 String 类型和 int 类型陈述 2 个示例：

```
For type 'String':

(1) Go to the source file
(2) Ctrl+Home to get to the first line of file
(3) Ctrl+F, a search box will appear
(4) In that search box, at left-bottom corner, 
    there is a radiobox named 'Regular expression', select it
(5) Also in that search box, enter the text to search for as: 
    String[\s]+[^s].+

For type 'int':

(1) Go to the source file
(2) Ctrl+Home to get to the first line of file
(3) Ctrl+F, a search box will appear
(4) In that search box, at left-bottom corner, 
    there is a radiobox named 'Regular expression', select it
(5) Also in that search box, enter the text to search for as: 
    int[\s]+[^i].+ 
```

您也可以对其他类型执行此操作，例如您的类型为“abc”，变量名称的初始字符为“x”，然后使用以下搜索文本：

```
abc[\s]+[^x].+ 
```

或者，如果您想为 Notepad++ 创建自己的突出显示语法，请尝试以下操作：[http://weblogs.asp.net/jgalloway/archive/2006/11/25/creating-a-user-defined-language-in-notepad。 aspx](http://weblogs.asp.net/jgalloway/archive/2006/11/25/creating-a-user-defined-language-in-notepad.aspx)

# r - 来自给定分布的样本

> ID：12128996
> 
> 赞同：-1
> 
> 时间：2012-08-26T09:26:42.017
> 
> 标签：r, text, random, distribution

我有一个包含值分布的文本文件，每行一个，例如：

```
2313213.32
321233.23
97938.23
21323
211555 
```

如何从这个分布中随机抽样 1000 次，并从这个随机抽样中获得平均值？最好使用R。

先感谢您，

鲁巴尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:33:10.860

```
#test<-readLines('your.file')
#test<-as.numeric(test)

test<-c(2313213.32,321233.23,97938.23,21323,211555)

out<-sample(test,1000,replace=TRUE)

out.mean<-mean(out)
> out.mean
[1] 618679.5 
```

# c# - 如何更新 Entity Framework 4.5 中的特定列？

> ID：12128997
> 
> 赞同：2
> 
> 时间：2012-08-26T09:26:42.887
> 
> 标签：c#, entity-framework

我有这个生成的实体：

```
 public partial class Player
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public System.DateTime Birthdate { get; set; }
        public PlayerPosition Position { get; set; }
        public int IdTeam { get; set; }

        public virtual Team Team { get; set; }
    } 
```

我想制作一种方法来更新玩家的位置。

我正在这样做：

```
 Player playerToUpdate = new Player
        {
            Id = 34,
            Position=PlayerPosition.Defender
        };
        playersRepository.Attach(playerToUpdate);
        playersRepository.UpdatePosition(playerToUpdate);

        public void Attach(T entity)
        {
            DbSet.Attach(entity);
        }

        public void UpdatePosition(Player playerToUpdate)
        {
            Context.Entry(playerToUpdate).Property(p => p.Position).IsModified = true;
        } 
```

我得到一个验证异常（*名称字段是必需的*）

修复它的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:32:17.740

你为什么不先加载现有的播放器，更新位置，然后保存回来？

这是一个现有的球员 - 对吧？你显然也有玩家的`ID`...

就像是：

```
Player existingPlayer = playersRepository.GetByID(34);

existingPlayer.Position = PlayerPosition.Defender;
playersRepository.Save(existingPlayer); 
```

当然，您可以`playersRepository`自己将其包装成一个方法：

```
public void UpdatePosition(int playerID, PlayerPosition newPosition)
{
    Player existingPlayer = playersRepository.GetByID(playerID);

    existingPlayer.Position = newPosition;
    this.Save(existingPlayer);  // assuming you have a Save method on the repository
} 
```

然后就叫它：

```
playersRepository.UpdatePosition(34, PlayerPosition.Defender); 
```

Entity Framework 足够聪明，可以发现只有`Position`on 那个播放器发生了变化，所以它会生成类似于以下内容的 SQL：

```
UPDATE dbo.Player
SET Postion = 'Defender' 
WHERE PlayerID = 34 
```

# c# - HttpWebResponse 编码

> ID：12128998
> 
> 赞同：1
> 
> 时间：2012-08-26T09:26:48.673
> 
> 标签：c#, character-encoding, httpwebrequest, httpwebresponse

我在尝试从 google.com 获取 html 时遇到编码问题。请给我一个建议如何解决这个问题。非常感谢。

```
public string Html
    {
        get
        {
            try
            {
                var request = WebRequest.Create(Url) as HttpWebRequest;
                request.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1,gzip(gfe)";
                if (request != null)
                {
                    var response = request.GetResponse() as HttpWebResponse;
                    if (response != null)
                    {
                        string Charset = response.CharacterSet;
                        Encoding encoding = Encoding.GetEncoding(Charset);
                        var sr = new StreamReader(response.GetResponseStream(), encoding);
                        return sr.ReadToEnd();
                    }
                }
                return string.Format("Could not create object HttpWebRequest for '{0}'", Url);
            }
            catch (Exception e)
            {
                return e.Message;
            }
        }
    } 
```

这里还有一张图片：

![在此处输入图像描述](../Images/7dbb0bc88e8d36dc94a766f56424ac68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:17:42.150

您面临的问题是由于某种原因 Google 不会在标头中发送任何编码信息。如果您使用下面的链接检查标题（特别是 Content-Type 标题）并将第一个（来自您的图像）与第二个进行比较，您会发现第一个缺少一些重要信息。

[http://web-sniffer.net/?url=http://www.google.com.ua/intl/ils/ads/](http://web-sniffer.net/?url=http://www.google.com.ua/intl/ils/ads/)

[http://web-sniffer.net/?url=http://www.google.de/](http://web-sniffer.net/?url=http://www.google.de/)

您需要在这里做的是首先解析返回的 HTML 并查找`<meta>`指定编码的 -element，然后使用该新信息重新解码您获得的流。根据您之后对 HTML 所做的事情，您可能希望将[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)作为一个用于处理 HTML 的优秀库，或者只是编写一个正则表达式来提取编码（尽管我真的会推荐第一个替代方案）。