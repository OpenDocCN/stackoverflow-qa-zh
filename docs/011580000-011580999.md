# StackOverflow 问答 11580000-11580999

# java - QuerySyntaxException：Hibernate 无法识别 java 中的 postgres 查询语法

> ID：11580003
> 
> 赞同：2
> 
> 时间：2012-07-20T13:06:03.330
> 
> 标签：java, sql, hibernate, postgresql

我面临在 java 中使用 hibernate 对 postgres 表执行以下查询的问题。

该查询用于使用内部联接从 3 个表中检索数据。

## 询问 ：

QryJourney = "SELECT Journey.id, Journey.operatingday, Journey.linename, Journey.scheduledeparture, Journey.scheduledeparturestopname, Journeydetail.stopname, Journeydetail.latitude, Journeydetail.longitude FROM Journey left join Journey_journeydetail ON Journey.id = Journey_journeydetail.journey_id left JOIN Journeydetail ON Journey_journeydetail.journeydetails_id = Journeydetail.id WHERE Journey.id = '155815228' ORDER BY Journeydetail.schedulearrival";

一旦执行，就会发生以下异常。

## 例外 ：

线程“main” org.hibernate.hql.internal.ast.QuerySyntaxException 中的异常：意外令牌：在第 1 行，第 268 列附近打开 [SELECT Journey.id，journey.operatingday，journey.linename，journey.scheduledeparture，journey.scheduledeparturestopname， Journeydetail.stopname ，journeydetail.latitude，journeydetail.longitude FROM de.db.journeyTracker.model.journey 左加入journey_journeydetail ON Journey.id = Journey_journeydetail.journey_id 左加入journeydetail ON Journey_journeydetail.journeydetails_id =journeydetail.id WHEREjourney.id ='155815228 ' ORDER BY traveldetail.schedulearrival]

Tis 查询在其 SQL 窗格上执行时在 postgres 上 100% 正常工作。有人有什么想法吗？

问候乌斯曼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T13:59:48.510

Hibernate 查询是用 [Hibernate Query Language (HQL)](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch16.html)而非原生 SQL 编写的。在 HQL 中重新表述您的查询或使用 [本机查询](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch11.html#objectstate-querying-nativesql)将 SQL 与 Hibernate 结合使用。

Hibernate 是一个对象关系映射器。它不仅会给你一个结果集。如果需要，请直接使用[JDBC](http://docs.oracle.com/javase/6/docs/technotes/guides/jdbc/)，使用[PgJDBC](http://jdbc.postgresql.org/)。

如果您希望本地域对象作为查询结果，请使用 Hibernate 和 HQL 或通过本地查询映射。原生查询更复杂，因为您必须明确告诉 Hibernate 所有结果列如何映射到您的结果对象。

# angularjs - angular.js 链接行为 - 禁用特定 URL 的深度链接

> ID：11580004
> 
> 赞同：53
> 
> 时间：2012-07-20T13:06:05.137
> 
> 标签：angularjs

我有一个启用了 HTML5 模式的 Angular.js 应用程序。

```
$location.Html5mode(true).hashbang("!"); 
```

我想要实现的是获取一些 URL 或`<a>`标签来执行正常的浏览行为，而不是使用 HTML5 历史 API 更改地址栏中的 URL 并使用 Angular 控制器处理它。

我有这个链接：

```
<a href='/auth/facebook'>Sign in with Facebook</a>
<a href='/auth/twitter'>Sign in with Twitter</a>
<a href='/auth/...'>Sign in with ...</a> 
```

我希望浏览器将用户`/auth/...`重定向到，然后用户将被重定向到身份验证服务。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-08-08T04:56:28.943

`target="_self"`在 Angular 1.0.1 中添加作品：

```
<a target="_self" href='/auth/facebook'>Sign in with Facebook</a> 
```

此功能已记录在案（[https://docs.angularjs.org/guide/$location](https://docs.angularjs.org/guide/$location) - 搜索“_self”）

如果您好奇，请查看角度源（第 5365 行 @ v1.0.1）。点击劫持只有在`!elm.attr('target')`为真时才会发生。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-02-19T03:18:24.597

Fran6co 方法的替代方法是禁用 $locationProvider 中的 'rewriteLinks' 选项：

```
$locationProvider.html5Mode({
    enabled: true,
    rewriteLinks: false
}); 
```

这将完成与调用 $rootElement.off('click') 完全相同的事情，但不会干扰处理应用程序根元素上的点击事件的其他 javascript。

请参阅[文档](https://docs.angularjs.org/api/ng/provider/$locationProvider)和[相关来源](https://github.com/angular/angular.js/blob/master/src/ng/location.js#L843)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-02T20:26:10.830

这是关闭深度链接的代码。它从 rootElement 禁用 click 事件处理程序。

```
angular.module('myApp', [])
   .run(['$location', '$rootElement', function ($location, $rootElement) {
      $rootElement.off('click');
}]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-10T18:22:08.227

要解决 Nik 的答案，如果您有很多链接并且不想为每个链接添加目标，您可以使用指令：

```
Module.directive('a', function () {
    return {
        restrict: 'E',
        link: function(scope, element, attrs) {
            element.attr("target", "_self");
        }
    };
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T15:39:56.757

我现在用 angular 遇到过几次同样的问题，虽然我想出了两个功能性的解决方案，但都感觉像 hacks 而不是很“棱角分明”。

**黑客＃1：**

`window.location`将刷新绑定到链接的`click`事件。

```
<a 
  href=/external/link.html 
  onclick="window.location = 'http://example.com/external/link.html';"
> 
```

这种方法的缺点和问题是相当明显的。

**黑客 #2**

`$route`设置执行`$window.location`更改的Angular 。

```
// Route
.when('/external', {
  templateUrl: 'path/to/dummy/template', 
  controller: 'external'
})

// Controller
.controller('external', ['$window', function ($window) {
  $window.location = 'http://www.google.com';
}]) 
```

我想您可以使用`$routeParams`或查询字符串来扩展它，让一个控制器处理所有“外部”链接。

正如我所说，这些解决方案都不是很令人满意，但如果你必须在短期内让它发挥作用，它们可能会有所帮助。

顺便说一句，我真的很想看到 Angular 支持`rel=external`这种类型的功能，就像 jQueryMobile 使用它来禁用 ajax 页面加载一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T20:57:06.650

在您的路线中尝试：

`$routeProvider.otherwise({})`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-14T23:00:47.730

为了增加蜻蜓的答案，我发现限制 target="_self" 属性数量的最佳实践是**永远不要**将 ng-app 属性放在 body 标记上。通过这样做，您告诉 Angular， body 标签中的**所有内容**都是 Angular 应用程序的一部分。

如果您在不受角度影响的静态包装器中工作，请将您的 ng-app 属性放在仅围绕您的角度应用程序将要工作的位置的 div （或其他元素）上。这样你只会必须将 target='_self' 属性放在将成为 ng-app 元素的子元素的链接上。

```
<body>
    ... top markup ...
    <div ng-app="myApp">
        <div ng-view></div>
    </div>
    ... bottom markup ...
</body> 
```

# ruby-on-rails - Rails 3 通过条件验证唯一性

> ID：11580015
> 
> 赞同：0
> 
> 时间：2012-07-20T13:06:49.977
> 
> 标签：ruby-on-rails, validation, unique

我有带有布尔字段默认值的模型 Post。帖子属于用户。我想确保用户只有一个默认（例如设置为 true）帖子。试过这个：

```
validates :default, uniqueness: { scope: :user_id }, if: :default? 
```

但它允许创建两个帖子`default: true, user_id: 1`

你能帮我么？

PS这个结构非常适合`validates :name, uniqueness: { scope: :user_id }, unless: :default?`布尔值可能有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:40:57.963

试试这个验证：

```
validate :only_one_default_post_per_user

def only_one_default_post_per_user
  if Post.exists?(:user_id => user_id, :default => true)
    errors.add("Error! There is a default post for this user!")
  end
end 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-20T13:46:24.670

问题解决了。10`rails s`次​​重新启动后，它才开始工作。

# node.js - socket.io nodejs客户端显示“GET http://localhost:8888/socket.io/1/?t=1342788870007 404（未找到）”

> ID：11580016
> 
> 赞同：3
> 
> 时间：2012-07-20T13:06:50.070
> 
> 标签：node.js, socket.io

客户端错误是：

```
GET http://localhost:8888/socket.io/1/?t=1342788870007 404 (Not Found)socket.io.js:1632

Socket.handshake socket.io.js:1632
Socket.connect socket.io.js:1671
Socket socket.io.js:1530
io.connect socket.io.js:91 
```

（匿名函数）

我的客户js：

```
var socket = new io.connect("http://localhost", 8888);

socket.on("chatRoom", function(data){
  $("#log").html($("#log").html() + "<br>" + data);
})

$("#chatform").submit(function (event) {
  event.preventDefault();
  socket.emit('chatRoom', $("#chat").val())
}) 
```

我的服务器是：

```
var express = require('../node_modules/express'),
app = express.createServer(),
io = require('../node_modules/socket.io').listen(app),
fs = require('fs');

app.use(express.bodyParser());

 var port = 8888;

 // get html page ok
app.get('/html/*', function (req, res) {
    res.sendfile(__dirname + '/html/' + req.params[0]);
});

// chat
io.sockets.on('connection', function (socket) {
  socket.on("login", function(message){
    socket.emit('chatRoom', "sombody connect");
  })

  socket.on("chatRoom", function(data){
      socket.emit('chatRoom',"from server");
  })
})

app.listen(port); 
```

谁能告诉我出了什么问题？我在服务器中使用 express+socket.io，在客户端中使用 socket.io.js 服务器和客户端都在本地主机中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T10:34:48.527

这是您的问题（在服务器端代码中）：

```
app.listen(port); 
```

您需要创建一个单独的 HTTP 服务器：

```
...
var app    = express();
var server = require('http').createServer(app);
var io     = require('../node_modules/socket.io').listen(server);
...
server.listen(port); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T07:34:40.587

正如@ebohlman 提到的

尝试使用

```
var socket = io.connect('http://localhost:8888'); 
```

在您的客户端 js 中，而不是

```
var socket = new io.connect("http://localhost", 8888); 
```

# django - 如何在 django 中使用 QuerySet 制作固定装置？

> ID：11580018
> 
> 赞同：15
> 
> 时间：2012-07-20T13:06:53.520
> 
> 标签：django, django-models, django-fixtures

Django dumpdata 命令被破坏，因为它不支持任何合理的方法来缩小转储的数据量。我需要**创建各种查询集的固定装置**（而且我不需要关心从外部模型关系中转储对象）。限制这些查询集的项目数量，比如 django-test-utils makefixture 是不够的。试图通过使用带有自定义管理器的代理模型来实现这一点，但这种方法不起作用 - dumpdata 省略了代理模型（这是合理的）。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-20T13:27:29.120

如果`dumpdata`不起作用，您可以通过[Django Serializing data](https://docs.djangoproject.com/en/dev/topics/serialization/#serializing-django-objects)来做同样的事情。

```
from django.core import serializers
data = serializers.serialize("json", SomeModel.objects.all()) 
```

然后写`data`在一个文件上。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-24T06:54:20.213

以下步骤将有助于完成解决方案，为**创建各种查询集的固定**提供支持。

```
from django.core import serializers
from django.core.management.commands.dumpdata import sort_dependencies

app_list = {}

# Add all your querysets here. The key for the dictionary can be just a 
# unique dummy string (A safe hack after reading django code)
app_list['app1_name'] = FirstModel.objects.all()
app_list['app2_name'] = SecondModel.objects.all()

# The sort_dependencies will ensure that the models are sorted so that
# those with foreign keys are taken care. If SecondModel has a fk to FirstModel,
# then sort_dependencies will take care of the ordering in the json file so that
# FirstModel comes first in the fixture thus preventing ambiguity when reloading
data = serializers.serialize("json", sort_dependencies(app_list.items()))
f = open('output.json', 'w')
f.write(data)
f.close() 
```

现在输出将在`output.json`文件中可用。从 json 文件重建模型：

```
from django.core import serializers

for obj in serializers.deserialize('json', open('output.json').read()):
    obj.save() 
```

**编辑**：奇怪的是， sort_dependencies 没有按预期工作。所以我最终使用了 python ordereddict 并自己决定了顺序。

```
import collections

app_list = collections.OrderedDict() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-08T14:48:18.127

如果要将 json 数据直接保存到文件中，可以使用：

```
from django.core import serializers

data = YourModel.objects.all()
with open("fixtures.json", "w") as out:
    serializers.serialize("json", data, stream=out) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T13:54:28.717

我不确定您所说的“外部模型关系”是什么意思，也许举个例子会有所帮助，但是您可以将 dumpdata 传递给您感兴趣的模型...

```
manage.py dumpdata --help
Usage: ./manage.py dumpdata [options] [appname appname.ModelName ...] 
```

还有排除开关：

```
-e EXCLUDE, --exclude=EXCLUDE
                    An appname or appname.ModelName to exclude (use
                    multiple --exclude to exclude multiple apps/models). 
```

# vb.net - 如何在 VB.net 中删除 XDocument 的格式

> ID：11580019
> 
> 赞同：3
> 
> 时间：2012-07-20T13:06:54.640
> 
> 标签：vb.net, linq, linq-to-xml

我想在加载到 XDocument 后删除我的 xml 文件的格式。我有以下代码。

```
Dim xmldoc As XDocument = XDocument.Parse(XMLStr)
.
.
.
.
Dim FinalStr as String = xmldoc.ToString() 
```

当我使用这个字符串时，我得到了多个新行和多个空格。我不想要那些空格和新行，任何人都可以告诉我如何删除它。我知道可以选择`SaveOptions.DisableFormatting`删除格式，但我不会保存文档。

我也尝试了正则表达式，但也删除了一些内容空间，所以我想删除 XDocument 放置的格式空间和换行符。

**更新：**

我试过`xmldoc.ToString(SaveOptions.DisableFormatting)`了，但它也删除了一些空格。例如，当我的 xml 像这样

```
<title>My <b>tilte</b> <i>Company</i></title> 
```

它删除了`<b>tilte</b> <i>Company</i>`标签之间的空间。我希望我的标题为

“我的**公司** *”*，但它给了“我**的***公司*”

谁能帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T13:08:03.560

你正在寻找 `xmldoc.ToString(SaveOptions.DisableFormatting)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:43:35.420

**我认为您的问题将通过以下方式解决：**

```
Dim xmldoc As XDocument = XDocument.Parse(XMLStr, LoadOptions.PreserveWhitespace) 
```

**有关更多信息，请访问[XDocument.Parse 方法（字符串、LoadOptions）](http://msdn.microsoft.com/en-us/library/bb551294.aspx#Y0)**

# c++ - 在 C++ 中从 POSIX 线程打开 /proc/net/tcp 大部分时间都会失败

> ID：11580020
> 
> 赞同：7
> 
> 时间：2012-07-20T13:06:55.157
> 
> 标签：c++, linux, pthreads

当我尝试从 C++ 中的子 POSIX 线程打开 /proc/net/tcp 时，它失败并出现“没有这样的文件或目录”错误。如果我尝试从父线程打开它，它每次都会成功，并且在父线程中打开/关闭它的过程也会使它在子线程中成功大约三分之一的时间。我可以在 100% 的时间内在子线程中打开 /proc/uptime 而不会出现问题。下面是一些可以使用“g++ -Wall test.cc -o test -pthread”编译的示例代码：

```
#include <iostream>
#include <fstream>
#include <cstring>
#include <cerrno>
#include <pthread.h>

using namespace std;

void * open_test (void *)
{
    ifstream in;
    in.open("/proc/net/tcp");
    if (in.fail())
        cout << "Failed - " << strerror(errno) << endl;
    else
        cout << "Succeeded" << endl;
    in.close();

    return 0;
}

int main (int argc, char * argv[])
{
    open_test(NULL);

    pthread_t thread;
    pthread_create(&thread, NULL, open_test, NULL);
    pthread_exit(0);
} 
```

我在 Linux 内核 3.2.0 上使用 Intel i5-2520M（2 个内核 * 2 个虚拟内核）的 Ubuntu 12.04 机器上运行它。这是我连续运行上述代码 6 次的输出：

```
mike@ung:/tmp$ ./test
Succeeded
Failed - No such file or directory
mike@ung:/tmp$ ./test
Succeeded
Succeeded
mike@ung:/tmp$ ./test
Succeeded
Failed - No such file or directory
mike@ung:/tmp$ ./test
Succeeded
Failed - No such file or directory
mike@ung:/tmp$ ./test
Succeeded
Succeeded
mike@ung:/tmp$ ./test
Succeeded
Failed - No such file or directory
mike@ung:/tmp$ 
```

可能值得注意的是，如果我使用 fork 而不是 posix 线程，我就没有这个问题。如果我使用fork，那么子进程读取/proc/net/tcp没有问题

只需输入几个数据点......看起来这是 Linux 中的回归，因为 2.6.35 似乎 100% 的时间都在工作。3.2.0 大部分时间都在呕吐，即使在我基于 Pentium M 的旧笔记本电脑上也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T08:13:56.573

正如斯科特在他的回答中指出的那样，添加 a 可以`pthread_join(thread, NULL)`修复症状。但为什么？

让我们把程序放在 gdb 中，并在打开失败的地方设置一个断点：

```
(gdb) break test.cc:14
Breakpoint 1 at 0x400c98: file test.cc, line 14. 
```

然后我们可以观察到两种不同类型的行为：

1.  ```
    (gdb) run […]
    Succeeded
    [New Thread 0x7ffff7fd1700 (LWP 18937)]          // <- child thread
    [Thread 0x7ffff7fd3740 (LWP 18934) exited]       // <- parent thread
    [Switching to Thread 0x7ffff7fd1700 (LWP 18937)]
    Breakpoint 1, open_test () at test.cc:14 
    ```

2.  ```
    (gdb) run
    Succeeded
    [New Thread 0x7ffff7fd1700 (LWP 19427)]          // <- child thread
    Succeeded
    [Thread 0x7ffff7fd1700 (LWP 19427) exited]
    [Inferior 1 (process 19424) exited normally] 
    ```

第一个建议父进程在子进程之前退出。与在 Linux 上一样，进程和线程几乎相同，这意味着与主进程关联的 PID 已被清除。没有什么能阻止子线程运行。它和他的 pid 仍然完全有效。只是`/proc/self`指向主进程的PID，此时已被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:29:18.967

如果在 pthread_exit() 调用之前添加 pthread_join(thread, NULL) 调用，您的程序将正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T16:33:25.307

这种行为似乎是`/proc`虚拟文件系统中的一种错误。~~如果您在打开文件之前添加此代码：~~

 ~~```
 system("ls -l /proc/net /proc/self/net/tcp"); 
```~~ 

~~您将看到它`/proc/net`是 的符号链接`/proc/self/net`，并且`/proc/sec/net/tcp`对于对 的两个调用都正确列出`open_test`，即使在生成的线程调用失败时也是如此。~~

**编辑：**我刚刚意识到上面的测试是假的，因为 self 指的是系统调用的 shell 进程，而不是这个进程。改用以下函数也会显示错误：

```
void ls_command () {
    ostringstream cmd;
    cmd << "ls -l /proc/net "
        << "/proc/" << getpid()
        << "/net/tcp "
        << "/proc/" << syscall(SYS_gettid)
        << "/net/tcp";
    system(cmd.str().c_str());
} 
```

您会看到生成的线程有时无法看到父母的`/net/tcp`文件。事实上它已经消失了，因为这是运行`ls`命令的生成的 shell 进程。

下面的解决方法允许子线程可靠地访问它的`/proc/net/tcp`.

~~我的理论是，这是某种竞争条件错误，正确地将`/proc/self`线程的条目设置为父状态和线程特定状态的正确混合。~~作为测试和解决方法，我修改了`open_test`代码以使用与线程关联的“进程标识符”，而不是尝试访问父进程的（因为`/proc/self`指的是父进程 ID，而不是线程的）。

**编辑：**`/proc/self/...`正如证据表明的那样，该错误与父进程在子线程有机会读取它之前清理其状态有关。我仍然认为这是一个错误，因为子线程在技术上仍然是该过程的一部分。`getpid()`主线程调用前后还是一样的`pthread_exit()`。在所有子线程完成之前，父进程的`/proc`条目应保持有效。虽然

**Edit2：**乔纳斯认为这可能不是一个错误。作为证据，有这个来自`man proc`：

```
       /proc/[pid]/fd
              ...
              在多线程进程中，这个目录的内容是
              如果主线程已经终止，则不可用（典型
              通过调用 pthread_exit(3)) 结盟。
```

但是然后考虑`/proc/self`在同一个`man`页面条目中的这个条目：

```
       /proc/自我
              这个目录是指访问/proc文件的进程
              系统，并且与 /proc 目录相同
              同一进程的进程ID。
```

如果人们相信这不是一个错误，因为线程和进程在 Linux 中的处理方式相同，那么线程应该有一个`/proc/self`可以工作的期望。当版本不再可用时，可以通过修改`/proc/self`以更改为使用`/proc/[gettid]`值来轻松修复该错误，就像下面的解决方法一样。`/proc/[getpid]`

```
void * open_test (void *)
{
    ifstream in;
    string file = "/proc/net/tcp";
    in.open(file.c_str());
    if (in.fail()) {
        ostringstream ss;
        ss << "/proc/" << syscall(SYS_gettid) << "/net/tcp";
        cout << "Can't access " << file
             << ", using " << ss.str() << " instead" << endl;
        file = ss.str();
        in.open(file.c_str());
    }
    if (in.fail())
        cout << "Failed - " << strerror(errno) << endl;
    else
        cout << "Succeeded" << endl;
    in.close();

    return 0;
} 
```

# java - 如何使用 Jsch 通过 SSH 运行需要密码的命令

> ID：11580021
> 
> 赞同：4
> 
> 时间：2012-07-20T13:06:55.917
> 
> 标签：java, ssh, jsch

我正在尝试使用 JSch 在目标主机上运行命令，并且希望能够指示密码，例如：“sudo echo hello”，然后输入当前用户的密码。

我不明白如何与提示正确交互。下面的代码显示了我尝试提供密码的两种方式，它们都失败并显示消息：

> sudo：不存在 tty，也没有指定 askpass 程序

我正在处理这个：

```
JSch jsch=new JSch();
String host="192.168.0.17";
String user="xxx";
String passwd="xxx";

Session session=jsch.getSession(user, host, 22);
session.setPassword(passwd);
session.setConfig("StrictHostKeyChecking", "no"); 
session.connect();  

ChannelExec channel=(ChannelExec)session.openChannel("exec");
channel.setCommand("sudo echo hello");
channel.setErrStream(System.err);
channel.connect();

int id = 1;
// must write on output stream?
if(id==0){
channel.getOutputStream().write(passwd.getBytes());
}
// must read on input stream?
else if(id==1){
channel.getInputStream().read(passwd.getBytes());
}

channel.disconnect(); 
```

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:01:55.567

试试[http://www.jcraft.com/jsch/examples/Sudo.java.html](http://www.jcraft.com/jsch/examples/Sudo.java.html)怎么样？

# python - 如何在 Python 中获取计算机的完全限定域名？

> ID：11580023
> 
> 赞同：47
> 
> 时间：2012-07-20T13:07:08.770
> 
> 标签：python, networking, dns, subdomain

我知道我可以使用 platform.node() 来获取我的计算机的网络名称：

```
>>> import platform
>>> platform.node()
'MyComputerName' 
```

但我真正想要的是类似于以下内容的东西：

```
>>> get_full_network_domain_name()
'MyComputerName.it.na.mycompany.com' 
```

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-20T13:08:36.247

完全限定的域名由[`socket.getfqdn()`](http://docs.python.org/library/socket.html#socket.getfqdn).

# sql-server - SQL Server 数据库可以通过英国邮政编码驱动 Google 地图吗？

> ID：11580024
> 
> 赞同：1
> 
> 时间：2012-07-20T13:07:13.297
> 
> 标签：sql-server, database, google-maps, dynamic, postal-code

我们有一个房产/住宿资料页面，其中列出了房产地址，包括邮政编码。此信息存储在 SQL Server 数据库表中，页面有一个记录集，允许我们根据用户选择（通过链接或使用表单）的 propertyID 将配置文件信息提供到页面上。

我们在数据库表中创建了一个字段，允许我们为属性插入 Google 地图嵌入代码，然后我们会在属性配置文件页面上调用它，但这需要我们首先在 Google 地图中创建嵌入代码，必须将其粘贴到我们的数据库字段等中，然后才能在我们的页面上显示地图。

所以......我们想根据邮政编码数据库驱动地图。那可能吗？

我们真的不想进入经度/纬度坐标，我们只想让地图识别邮政编码并在地图上放置该邮政编码出现的地方标记。

我们如何实现这一目标？我们已经尝试过查看文档和帮助文件，但我们真的不知道我们要的是什么，因此找到答案非常困难，或者我们找到的答案似乎非常技术性（Google API、地理编码等） ) 对于我们想要实现的目标。

有人能指出我们正确的方向吗？

我们希望有某种方法可以将邮政编码动态插入到来自 Google Maps 的通用嵌入代码中，而剩下的工作由 Google Maps 完成。

无论如何，我们将不胜感激可以提供的任何帮助和建议。谢谢你。

问候新泽西州

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:21:56.763

传统上，英国的邮政编码数据需要花费大量资金。

您现在可以下载军械测量数据并将其数据转换为纬度和经度，这样您就可以在谷歌地图上绘制坐标。（http://www.ordnancesurvey.co.uk/oswebsite/products/code-point-open/index.html）

# java - Java - 奇怪的静态字符串行为 - 新字符串（“xxx”）与“xxx”

> ID：11580035
> 
> 赞同：16
> 
> 时间：2012-07-20T13:08:02.517
> 
> 标签：java, string, static, initialization

```
public class Test {

    private static final String str1 = new String("en");
    private static Test instance = initInstance();

    private static final String str2 = new String("en");
    private static final String str3 = "en";

    private Test() {
    }

    public static void main(String[] args) {
    }

    private static Test initInstance() {
        instance = new Test();
        System.out.println(str1 + ',' + str2 + ',' + str3);
        return instance;
    }
} 
```

**从理论上讲**，到处都是静态的，它应该导致“en，en，en”。

结果：“en,null,en”

预期：“en，null，null”（因为我发现静态顺序实际上很重要）

有人可以解释一下吗？"en" 和 new String("en") 有什么不同？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T13:12:11.910

是的。在您调用该方法时，str2 尚未初始化（字段按声明顺序初始化）并且 str3 是编译时常量。

编译时常量由编译器内联在类文件中。new String("..") 不是常量，因为它使用构造函数。

字符串常量由字符串字面量："" 定义，它们被放置在 jvm 实例中的字符串池中，以便重复使用。与此相反，使用 new String(..) 会创建一个新实例，因此应避免使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-20T13:12:18.067

*发生这种情况是因为用常量*初始化的类变量首先被初始化，然后才完成更复杂的初始化程序（如使用 的表达式`new String()`）（然后按源顺序完成）。见[JLS §8.3.2.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.1)：

> 8.3.2.1。类变量的初始化器
> 
> *[...]*
> 
> 在运行时，使用常量表达式（第[15.28 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)`static`）初始化的字段首先被初始化（第[12.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)）。这也适用于接口中的此类字段（[第 9.3.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.3.1)）。这些字段是“常量”，永远不会被观察到具有默认初始值（[§4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)），即使是狡猾的程序（[§13.4.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.4.9)）。`final`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T13:17:14.960

**1.**因为`str3 = "en" is a String literal in literal pool, and str1 = new String("en") is a String object`在String对象池。

**2.**由于**“en”是一个字面量，即“常量”，它会在开头被初始化**。

**3.**也称为**常量折叠**，预先计算常量以更快地执行。

# git - Git归档存储库作为一个功能齐全的存储库？

> ID：11580038
> 
> 赞同：0
> 
> 时间：2012-07-20T13:08:10.893
> 
> 标签：git, archive

我需要在对文件类型和内容有限制的地方设置一个 git 存储库。当然，这可能会成为同步的痛苦，所以我可以通过归档存储库来克服这个限制。

但是，归档存储库会使归档变成这样：归档或没有存储库可能性的文件。

**我想知道，有没有办法让 git 与存档存储库**（比如说，一个 .zip 文件）**作为一个完整的功能存储库**进行交互，唯一的区别是它包含在不同的文件系统结构中？

如果可能的话，我希望能够做这样的事情：

```
git clone /myRepo /otherlocation/repo.zip
# myRepo is a directory with all the files
# repo.zip is a compressed zip file
# could git treat both as repositories anyway -- any approach? 
```

我希望能够对这个存档执行其他克隆、推送和拉取，作为将不同的本地存储库与我拥有的这个受限位置同步的一种方式。

**背景**：

我需要从事一个项目，但我没有得到任何地方来托管我的存储库。目前，我正在使用我创建的 git 存储库的本地副本，但我希望将其同步到真实服务器中。由于没有给我任何放置代码的地方，我正在考虑使用 Sharepoint 文件夹来保存有关该项目的文档。Sharepoint 确实限制了我可以发布到它的文件类型，并且我可以设置服务器，以便我可以将它的文档库作为 UNC 路径访问。

但是，我可以通过将所有内容归档到 .zip 文件并上传来克服文件类型的限制。我不想每次都手动执行所有这些操作，而是想看看 git（或其他任何东西）是否可以为我解决这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T14:32:11.737

我会定期（可能每周一次）`git bundle`您的本地存储库并将生成的文件放在共享点服务器上的某个位置。我会让每个捆绑包成为一个完整的存储库，并保留最后一对作为备份，这也让事情变得简单，而不是使用`git bundle`的增量功能。

# api - OAuth 流程、Twitter 和可读性

> ID：11580039
> 
> 赞同：0
> 
> 时间：2012-07-20T13:08:22.173
> 
> 标签：api, twitter, oauth, readability

据我所知，Twitter 和 Readability 在 OAuth 过程的顺序上有所不同。[推特要求](https://dev.twitter.com/docs/api#oauth)：

1.  请求令牌
2.  授权/认证
3.  访问令牌

而[可读性](http://www.readability.com/developers/api)要求：

1.  授权
2.  请求令牌
3.  访问令牌

同时，[OAuth 规范](http://oauth.net/core/diagram.png)指出 Twitter 流程​​是正确的。我是否遗漏了什么，或者可读性有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:54:23.937

查看可读性文档，我认为他们只是懒于编写它。如果您已经授权，请求令牌是无用的，所以我相信他们只是将 URL 的顺序不正确。

# wpf - StackPanel 的方向属性定义为单独的 xaml 文件中的顶级组件被忽略

> ID：11580040
> 
> 赞同：0
> 
> 时间：2012-07-20T13:08:25.840
> 
> 标签：wpf, xaml

我在一个名为 HPanel.xaml 的文件中定义了一个 StackPanel，如下所示：

```
<StackPanel Orientation="Horizontal" 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" /> 
```

然后，像这样使用 HPanel：

```
<v:HPanel>
  <Label Content="The label" />
  <TextBox Text="{Binding transporter.Foo, 
    UpdateSourceTrigger=PropertyChanged}" />
</v:HPanel> 
```

会给我一个垂直方向而不是水平方向的堆栈面板。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:44:24.100

多田！

我现在已经制作了一个有效的测试用例，如果我有一个代码，stackpanel 会变得很好。要处理的属性需要 InitializeComponent。

MainWindow.xaml：

```
<Window x:Class="wpftestapp.MainWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:v="clr-namespace:wpftestapp.views"
     Title="MainWindow" Height="350" Width="525">
    <v:HPanel>
      <Label Content="a"/>
      <Label Content="b"/>
      <Label Content="c"/>
    </v:HPanel>
</Window> 
```

HPanel.xaml：

```
<StackPanel Orientation="Horizontal"
    x:Class="wpftestapp.views.HPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"/> 
```

HPanel.xaml.cs：

```
using System.Windows.Controls;

namespace wpftestapp.views
{
  public partial class HPanel : StackPanel
  {
    public HPanel()
    {
      InitializeComponent();
    }
  }
} 
```

谢谢您的帮助！

# c# - LINQ 语法和 where 子句

> ID：11580044
> 
> 赞同：0
> 
> 时间：2012-07-20T13:08:55.043
> 
> 标签：c#, linq

我写了一些 LINQ 但它没有返回正确的数据，它似乎忽略了我的 where 子句。谁能告诉我我在语法上做错了什么？

```
IEnumerable<Ranking> lst = (from r in results
    join m in membersToRank on r.UserId equals m.userId
    join t in teamsToRank on m.teamId equals t.teamId
    where r.ResultDate >= rankingStart
        && r.ResultDate <= rankingEnd 
    select new Ranking
    {
        memberId = m.memberId,
        chain = t.chain,
        name = m.name,
        teamId = m.teamId,
        value = results.Count(i => i.IsCorrect && i.UserId == m.userId)
    }).ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:11:05.837

这条线

```
value = results.Count(i => i.IsCorrect && i.UserId == m.userId) 
```

将绕过该`where`子句。你必须在`where`那里重复

```
value = results.Where(...).Count(i => i.IsCorrect && i.UserId == m.userId) 
```

或者

```
var results2 = results.Where(...) 
```

然后只使用`results2`.

（作为旁注，它甚至会绕过`join`，因此根据您的需要它可能会变得更复杂一些）

# java - 封装常见的异常处理逻辑

> ID：11580045
> 
> 赞同：2
> 
> 时间：2012-07-20T13:09:06.603
> 
> 标签：java, oop, object, java-me, encapsulation

我有一系列 Web 服务方法调用，它们都遵循以下格式。每种方法的唯一区别是 httpRequest.methodName()。谁能想到我可以封装通用逻辑的方法？另请注意，我的环境是 J2ME。

```
public Response webserviceCall(Request request) {

    HTTPRequest httpRequest = new HTTPRequest(new ConnectionProperties());

    String errorMessage = "";
    String errorCode = "";

    try {
        // the only thing different
        httpRequest.methodName();
    } catch (SDKException e) {
        errorMessage = e.getMessage();
        errorCode = e.getErrorCode();
    }

    Error error = new Error(errorMessage,errorCode);

    return new Response(error);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:48:00.580

一种替代方法是将代码放在抽象类中，并将其更改为调用抽象方法（例如，将其命名为进程）：

```
abstract class BaseWebService {
   public abstract Response process(HTTPRequest request) throws SDKException;

   public Response webserviceCall(Request request) {

       HTTPRequest httpRequest = new HTTPRequest(new ConnectionProperties());

       String errorMessage = "";
       String errorCode = "";

       try {
           process(httpRequest);
       } catch (SDKException e) {
           errorMessage = e.getMessage();
           errorCode = e.getErrorCode();
       }

       Error error = new Error(errorMessage,errorCode);

       return new Response(error);
   }
 } 
```

然后让您的每个服务扩展该类并`process`根据需要实现该方法

```
class OneService extends BaseWebService {

   Response process(HTTPRequest request) throws SDKException{
        return request.methodName();
   } 
} 
```

作为记录，这是[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)

# wordpress - 为什么阿帕奇的 指令不断给我错误 500？

> ID：11580048
> 
> 赞同：0
> 
> 时间：2012-07-20T13:09:22.747
> 
> 标签：wordpress, apache, .htaccess

.htaccess 中的这个指令：

```
<Files wp-config.php>  
order allow,deny  
deny from all 
</Files> 
```

给我错误 500。你可能有什么好主意吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:13:42.917

我想到了两种可能性：

首先，通常我会看到引用的文件名：`<Files "wp-config.php">`. 我忘记了 Apache 是否需要引号，所以试试这个，看看是否能解决问题。

其次，您的 Apache 服务器管理员可能没有启用`AllowOverride`允许您执行此操作所需的权限。

无论哪种情况，检查 Apache 错误日志都会发现真正的问题。

# mongodb - 如何使用原子操作增加 mongoDB 文档中的 Datetime 字段？吗啡也一样？

> ID：11580055
> 
> 赞同：3
> 
> 时间：2012-07-20T13:09:35.947
> 
> 标签：mongodb, datetime, morphia

好。就是这样。

我有一个带有**日期时间**字段的文档。现在我需要执行原子操作，这将在某一天增加这个值。

怎么做？

最终我需要通过**morphia**来做到这一点，如果你知道怎么做，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:08:31.427

[日期是自 Unix 纪元 ( MongoDB Dates](http://www.mongodb.org/display/DOCS/Dates) )以来的毫秒数。

因此，您可以查询带有您想要增加的日期的文档，并添加（[在 Morphia 中的 inc/dec](http://code.google.com/p/morphia/wiki/Updating#inc/dec)）您需要的毫秒数 - 例如一天。

# php - 对月份进行排序，使它们处于连续的序列中

> ID：11580056
> 
> 赞同：3
> 
> 时间：2012-07-20T13:09:44.030
> 
> 标签：php, arrays

我有一个月份数组（数字，1-12），我想对它们进行排序，这将构成最大的连续序列。一个例子：

`array(1,2,3)`：

很简单，就是一月到三月，不需要排序

`array(1,2,11,12)`：

这可能是 11 月至 2 月的一个连续序列，因此应按 11、12、1、2 进行排序

`array(1,4,5,11,12)`：

这应该是 4-5 月，11-1 月，所以应该分成两部分：4,5 和 11,12,1

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:06:50.683

一旦你弄清楚如何表达`12`可以环绕的事实，这很容易做到`1`。

这是我的解决方案。它自然地对传入的数组进行排序，然后创建一个`$months`如下所示的数组：

```
$months = 1 2 3 4 5 6 7 8 9 10 11 12 1 2 3 4 5 6 7 8 9 10 11 12 
```

从该数组中，我循环输入数组以在未设置月份值的位置放置零。因此，输入数组`array( 1, 2, 11, 12)`，`$inputs`数组变为：

```
$inputs = 1 2 0 0 0 0 0 0 0 0  11 12 1 2 0 0 0 0 0 0 0 0  11 12 
```

从这里开始，算法很简单：遍历`$inputs`数组以找到非 0 的最长序列。这将生成所有可能的顺序序列。

```
function sort_months( $array)
{
    natsort( $array);

    $keys = array_flip( $array);
    $inputs = array();
    $months = array_merge( range( 1, 12), range( 1, 12));

    foreach( $months as $m) {
        $inputs[] = (isset( $keys[$m])) ? $m : 0;
    }

    $sequences = array();

    for( $i = 0, $ii = count( $inputs); $i < $ii; $i++) {
        if( $inputs[$i] != 0) {
            $sequence = array( $inputs[$i]);
            for( $k = $i + 1, $kk = $ii + 1; $k < $kk;  $sequence[] = $inputs[$k], $k++) {
                if( !isset( $inputs[$k]) || $inputs[$k] == 0) {
                    break;
                }
            }
            $sequences[] = $sequence;
        }
    }

    return $sequences;
} 
```

使用输入`array( 12, 11, 1, 2)`，这[将输出](http://viper-7.com/ovmC4M)：

```
array(8) {
  [0]=>
  array(2) {
    [0]=>
    int(1)
    [1]=>
    int(2)
  }
  [1]=>
  array(1) {
    [0]=>
    int(2)
  }
  [2]=>
  array(4) {
    [0]=>
    int(11)
    [1]=>
    int(12)
    [2]=>
    int(1)
    [3]=>
    int(2)
  }
  [3]=>
  array(3) {
    [0]=>
    int(12)
    [1]=>
    int(1)
    [2]=>
    int(2)
  }
  [4]=>
  array(2) {
    [0]=>
    int(1)
    [1]=>
    int(2)
  }
  [5]=>
  array(1) {
    [0]=>
    int(2)
  }
  [6]=>
  array(2) {
    [0]=>
    int(11)
    [1]=>
    int(12)
  }
  [7]=>
  array(1) {
    [0]=>
    int(12)
  }
} 
```

您可以看到最长的顺序序列实际上存在于数组中（以及所有其他可能的序列）：

```
[2]=>
  array(4) {
    [0]=>
    int(11)
    [1]=>
    int(12)
    [2]=>
    int(1)
    [3]=>
    int(2)
  } 
```

我将其留给 OP 来确定如何选择要使用哪些序列来表示输入到该函数的所有月份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:33:55.953

查看您的数据，我们看到以下先决条件：

1.  最大范围是 1 到 12。
2.  输入是排序的，因此是有序的。
3.  只有一个地方发生了环绕：从 12 点到 1 点。

考虑到这一点，我们可以说：

1.  第一个值为 1 或没有环绕。
2.  最后一个值为 12 或没有环绕。
3.  如果有环绕，则从开始 (1,2,...) 开始的所有连续月份都会环绕。

这是一个相对简单的功能：

```
function group_months(array $months) {
    $count = count($months);
    if (!$count || $months[0] != 1 || $months[$count-1] != 12 || $count === 12) {
        return $months;
    }
    for ($size = 1; $months[$size] === $size+1;) {
        $size++;
    }
    return array_merge(array_slice($months, $size), range(1, $size));
} 
```

或者在 shift-push 变体中（移动 1,2,... 到结束）：

```
function group_months(array $months)
{
    $count = count($months);
    if ($count && $count != 12 && $months[$count - 1] === 12) {
        for ($month = 1; $months[0] === $month; $month++) {
            $months[] = array_shift($months);
        }
    }
    return $months;
} 
```

或者在 pop-unshift 变体中（将 ..,11,12 移到前面）：

```
function group_months(array $months)
{
    $count = count($months);
    if ($count-- && $count != 11 && $months[0] === 1) {
        for ($month = 12; $months[$count] === $month; $month--) {
            array_unshift($months, array_pop($months));
        }
    }
    return $months;
} 
```

如果您想对数组中的数字进行分组，请参阅已经有字符串输出解决方案的相关问题：

*   [在连续数字之间使用连字符缩短数字列表](https://stackoverflow.com/q/9448129/367456)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:14:55.347

Try the PHP function below. It works fine with all 3 examples given:

```
<pre>
<?php
function split_months($array)
{
    // remove duplicate values, if any
    // sort the array in ascending order
    $array = array_unique($array);
    sort($array);

    $results = array();

    // loop until the array is empty
    while(!empty($array))
    {
        // extract the first entry of the array
        $entry = array_shift($array);

        if(empty($results))
            $results[] = array($entry);
        else
        {
            // find in which sub-array of $results $entry needs to be stored
            foreach($results as $index => $values)
            {
                // extract the last value
                $last = array_pop($values);

                // compare with $entry
                if($entry-1 == $last)
                {
                    $results[$index][] = $entry;
                    unset($entry);
                    break;
                }
            }

            // there was no sub-array to store $entry: store it in a new sub-array
            if(isset($entry))
            $results[] = array($entry);
        }
    }

    // if $results contain no array, or only one, there is nothing to optimize
    if(sizeof($results) <= 1)
        return $results;

    // lastly, search if one result sub-array is starting with "1", and another is ending with "12"
    // in that case, join these 2 sub-arrays in one
    foreach($results as $index => $values)
    {
        if($values[0] == 1)
            $index1 = $index;
        elseif($values[sizeof($values)-1] == 12)
            $index12 = $index;

        if(isset($index1) && isset($index12))
            break;
    }
    if(isset($index1) && isset($index12))
    {
            // merge both sub-arrays
        $results[$index12] = array_merge($results[$index12], $results[$index1]);
            // remove the sub-array starting with "1"
        unset($results[$index1]);
    }

    return $results;
}

$array1 = array(1,2,3);
$array2 = array(1,2,11,12);
$array3 = array(1,4,5,11,12);

print_r(split_months($array1));
print_r(split_months($array2));
print_r(split_months($array3));
?>
</pre> 
```

The output will be:

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

)
Array
(
    [1] => Array
        (
            [0] => 11
            [1] => 12
            [2] => 1
            [3] => 2
        )

)
Array
(
    [1] => Array
        (
            [0] => 4
            [1] => 5
        )

    [2] => Array
        (
            [0] => 11
            [1] => 12
            [2] => 1
        )

) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T13:55:58.933

我的 PHP 不足以编写实现，但我很想知道这是否可以通过使用循环数组或链接列表结构来实现。

`next`首先，创建这样一个包含 12 个布尔元素的结构，通过将最终元素的属性设置为第一个元素来使其成为圆形。相反，第`previous`一个元素被设置为最后一个元素。这代表您的“环绕式”日历。

然后，您可以读取数组，将“日历”的每个元素设置`true`为元素索引出现在输入数组中的位置。

然后你循环你的“日历”，直到你找到最大的完整的`true`元素序列。重复以找到任何较小的并将它们输出为数组。

希望这对您来说是一个可行的起点，我很想看到有人用 PHP 实现它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T13:21:56.113

我不确定你是否做对了。我的意思是像你的第三个例子。`array(1, 2, 4, 5, 11, 12)`你怎么能确定这些不是 1-2 月、4-5 月和 11-12 月的 3 个序列或 11-2 月和 4-5 月的 2 个序列。是否有任何用户输入可以控制此序列或我正在发生的其他事情？

# groovy - 使用位于另一个文件夹（Gradle）中的 .groovy 文件中的类

> ID：11580057
> 
> 赞同：2
> 
> 时间：2012-07-20T13:09:44.263
> 
> 标签：groovy, gradle

我有这个**build.gradle**文件可以正常工作：

```
class Utils  {
  def doit(){
    println "hi from utils"
  }
}

task hello << {
  def utils = new Utils()
  utils.doit();
} 
```

如果我将 class/.groovy 文件移动到这样的子文件夹：

```
test
 -> groovy
     -> Utils.groovy
 -> build.gradle 
```

并将 build.gradle 文件修改为：

```
dependencies {
    runtime fileTree(dir: 'groovy', include: '*.groovy')
}

task hello << {
  def utils = new Utils()
  utils.doit();
} 
```

无法再找到 Utils 类：

```
...unable to resolve class Utils 
```

我假设子文件夹**groovy**应该作为 .gradle 文件中类路径/依赖项的导入/条目添加。我已经阅读了这些页面：

[http://gradle.org/docs/current/userguide/dependency_management.html](http://gradle.org/docs/current/userguide/dependency_management.html) http://gradle.org/docs/current/userguide/custom_plugins.html [http://gradle.org/docs/current/userguide/custom_tasks。 html](http://gradle.org/docs/current/userguide/custom_tasks.html)

但无法找到任何描述如何在 .gradle 文件中导入 .groovy 文件的文档。我缺少哪个页面来描述这个简单的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:13:07.683

如果您将 build.gradle 更改为

```
task hello << {
  def utils = new Utils()
  utils.doit();
} 
```

然后代替

```
test
 -> groovy
     -> Utils.groovy
 -> build.gradle 
```

将`Utils.groovy`文件移动到`buildSrc/src/main/groovy`这样：

```
test
 -> buildSrc
     -> src
         -> main
             -> groovy
                 -> Utils.groovy
 -> build.gradle 
```

并且 gradle 应该自动拾取它。

[有关详细信息，请参阅文档](https://docs.gradle.org/current/userguide/organizing_build_logic.html)中的“41.4\. 在 buildSrc 项目中构建源”部分。

# z3 - Z3 C-API 卡住

> ID：11580064
> 
> 赞同：1
> 
> 时间：2012-07-20T13:10:16.683
> 
> 标签：z3

我正在使用 Z3 C-API 来解决一些包含非线性整数算术 (NIA) 约束的问题。我正在为 linux 使用 z3 4.0。当我运行调用 Z3 C-API 的程序时，它会卡在一些问题上，并且不会产生任何答案——sat、unsat 或 unknown。它卡在 Z3_check_and_get_model() 调用中。我尝试运行它超过 10 分钟，但没有得到任何答案。二进制文件继续做一些工作，CPU 使用率几乎是 100%。

我认为这是由于非线性约束而发生的，但是当我在 Z3-SMT 在线以及带有 -smt2 选项的 z3 linux 二进制文件上尝试相同的示例时，它快速为我提供了一个模型的解决方案。尽管在 NIA 领域中的问题相对简单。

我不确定为什么会这样。我是否在这里遗漏了一些东西 - 也许我需要提供一些配置设置才能获得与带有 -smt2 输入的 z3 二进制文件相同的性能？或者这是一个错误？

# actionscript-3 - 垃圾收集未拾取 Actionscript 3.0 点对象

> ID：11580073
> 
> 赞同：0
> 
> 时间：2012-07-20T13:11:10.303
> 
> 标签：actionscript-3, memory-leaks, garbage-collection, point

我刚刚尝试修复项目中的一些内存泄漏，并发现了一个有趣的问题。似乎我的绝大多数“点”对象都没有被垃圾收集器拾取。每一帧它都会创建大约 5000 个新的 Point 对象，其中似乎只有不到 10% 的对象被拾取。即使您使用这样的代码：

```
var tempPoint :Point = new Point();
tempPoint = null; 
```

即使我重复它超过 500 次，似乎也只有一小部分被抹去。这真的让我现在很紧张，我想知道是否有人以前遇到过这个问题，知道如何解决它/绕过它，或者关心我到底做错了什么。

很想知道任何人对此的想法

附言。我正在使用 The Miner 检查资源使用情况

编辑：现在已经快速检查了我在哪里运行了大约一个小时的程序，虽然内存使用量增加了大约 140MB，但它确实在此时开始垃圾收集并且没有超过那个。所以他们会被捡起来，但直到你创造了几百万;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:47:04.913

你等他们被抹去多久？

如果您每帧创建 5000 个新对象，那么使用对象池可能是个好主意。

```
class PointPool {
    private var _points:Vector.<Point>;

    public function PointPool() {
        _points = new Vector.<Point>();
    }

    public function createPoint(x:Number, y:Number):Point {
        var p:Point = null;

        if( _points.length > 0 ) 
            p = _points.pop();
        else
            p = new Point();

        p.x = x;
        p.y = y;

        return p;
   }

   public function returnPoint(point:Point):void {
        _points.push(point);
   }
} 
```

只是一个想法 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:12:47.047

我将引用**[Grant Skinner](http://gskinner.com/blog/archives/2006/06/as3_resource_ma.html)**来回答您的问题：

> 了解 FP9 中的垃圾收集器的一个*非常重要的事情是它的操作是延迟的。*当所有活动引用都被删除时，您的对象不会立即被删除，而是会在未来某个不确定的时间被删除（从开发人员的角度来看）。
> 
> [...]
> 
> 重要的是要记住，您无法控制何时释放对象，因此当您使用完对象后，必须尽可能使它们保持惰性。

那么，您的代码发生了什么？FP 创建了近 5000 个`Point`. 如果您查看一段时间内的内存使用情况，您可能会注意到它会在几秒钟后降至初始值。

避免这种行为的最佳方法是将创建的对象*池*化并重用它们，而不是创建一个新对象。

# java - 与 JBoss AS 7 和 Jetty 一起部署时使用 RestEasy 序列化 POJO 的区别

> ID：11580082
> 
> 赞同：0
> 
> 时间：2012-07-20T13:11:59.163
> 
> 标签：java, spring, jetty, jboss7.x, resteasy

在 JBoss AS 7 和 Jetty 上部署我的应用程序时，我注意到当 RestEasy 序列化我的 POJO 时出现了不希望的差异。使用 Jetty，我有以下 JSON：

```
{
"pojo-name":{
    "lines":[
        {
            "code":"250-1",
            "id":1143,
         }]
    }
} 
```

然而，当部署在 JBoss AS 7 上时，@XmlRootElement 注释给出的“pojo-name”会简单地消失，从而导致：

```
{
"lines":[
    {
        "code":"250-1",
        "id":1143,
    }]
} 
```

我有一个具有以下依赖项的 POM 文件：

```
 <dependency>
      <groupId>org.jboss.resteasy</groupId>
      <artifactId>resteasy-jaxrs</artifactId>
      <version>${resteasy.version}</version>
      <scope>provided</scope>
  </dependency>
  <dependency>
      <groupId>org.jboss.resteasy</groupId>
      <artifactId>resteasy-jaxb-provider</artifactId>
      <version>${resteasy.version}</version>
      <scope>provided</scope>
  </dependency>
  <dependency>
      <groupId>org.jboss.resteasy</groupId>
      <artifactId>jaxrs-api</artifactId>
      <version>${resteasy.version}</version>
      <scope>provided</scope>
  </dependency>
  <dependency>
      <groupId>org.jboss.resteasy</groupId>
      <artifactId>resteasy-spring</artifactId>
      <version>${resteasy.version}</version>
      <exclusions>
          <exclusion>
              <artifactId>commons-logging</artifactId>
              <groupId>commons-logging</groupId>
          </exclusion>
          <exclusion>
              <artifactId>jaxb-impl</artifactId>
              <groupId>com.sun.xml.bind</groupId>
          </exclusion>
          <exclusion>
              <artifactId>sjsxp</artifactId>
              <groupId>com.sun.xml.stream</groupId>
           </exclusion>
           <exclusion>
              <artifactId>jsr250-api</artifactId>
              <groupId>javax.annotation</groupId>
           </exclusion>
           <exclusion>
              <artifactId>activation</artifactId>
              <groupId>javax.activation</groupId>
           </exclusion>
      </exclusions>
 </dependency> 
```

我的 POJO 类如下所示：

```
@XmlRootElement(name = "pojo-name")
public class LinesResponse implements Serializable {

    private static final long serialVersionUID = -8717658630497030320L;

    private List<Lines> lines;

    public LinesResponse() {}

    // Getters and setters
} 
```

您的帮助将不胜感激！谢谢你们。

* * *

### 编辑：

看来我面临着 JAXB 提供者之间可能存在的冲突。也许当我的应用程序使用 Jetty 部署时，我将 Jettison 作为 JAXB 提供者，并且在部署在 JBoss Jackson 上时。从[JBoss 文档](http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html_single/#Possible_Jackson_Problems)中，我们有：

> 如果您的 Jackson 类使用 JAXB 注释进行注释，并且您的类路径中有 resteasy-jaxb-provider，您可能会触发 Jettision JAXB 编组代码。要关闭 JAXB json marshaller，请在您的类上使用 @org.jboss.resteasy.annotations.providers.jaxb.IgnoreMediaTypes("application/*+json")。

回到家后，我一定会尝试这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:18:00.597

刚刚证实了上述假设。这是 JAXB 提供者之间的冲突。当部署在 JBoss 上时，我的应用程序使用的是 Jackson，而在 Jetty 上它使用的是 Jettison。为了解决这个问题，我强制使用杰克逊提供者

```
 <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>${resteasy.version}</version>
        <scope>provided</scope>
   </dependency> 
```

# regex - 测试模型属性的正则表达式

> ID：11580083
> 
> 赞同：0
> 
> 时间：2012-07-20T13:12:00.610
> 
> 标签：regex, asp.net-mvc-3, entity-framework-4

这是我模型的一部分

```
[RegularExpression(@"^([a-z][a-z0-9.-]+)\\((?! +\r?$)[a-z0-9 ]+)\r?$", ErrorMessage = @"Enter the account in domain\account format.")]
    [ScaffoldColumn(true)]
    [DisplayName("Account Name")]
    string Col_DomainName { get; set; } 
```

我想写一个 UnitTest 来测试它。我怎么做？我正在使用 NUnit。

谢谢！

# asp.net-mvc-3 - 将通用模型添加到辅助类

> ID：11580090
> 
> 赞同：0
> 
> 时间：2012-07-20T13:12:25.837
> 
> 标签：asp.net-mvc-3, html-helper

我有以下代码来生成选择列表项以显示在我的下拉列表中。

```
public static IEnumerable<SelectListItem> ToSelectListItems(this IEnumerable<BlogCategory>    categories, int selectedId)
    {
        return categories.OrderBy(category => category.Category)
            .Select(category => new SelectListItem
            {
                Selected = (category.ID == selectedId),
                Text = category.Category,
                Value = category.ID.ToString()
            });
    } 
```

我想使用这个助手类来生成其他列表项，然后是 BlogCategory。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:24:21.187

您可以为查找实体创建一个基类：

```
public class BaseEntity
{
   public int Id {get;set;}
   public string Title {get;set;}
}

public class Category : BaseEntity
{
   //Category fields
}

public class Blog : BaseEntity
{
   //Blog fields
}  

public static IEnumerable<SelectListItem> ToSelectListItems(this IEnumerable<BaseEntity> entityList, int selectedId)
{
    return entityList.OrderBy(q => q.Title)
        .Select(q => new SelectListItem
        {
            Selected = (q.Id == selectedId),
            Text = q.Title,
            Value = q.Id.ToString()
        });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:34:07.567

于尔根，

**假设**您的意思是其他列表项都符合与 BlogCategory 相同的结构，那么您可以使用接口，而不是帮助程序中的具体类。

这可能是这样的：

```
public interface ICategory
{
    int ID { get; set; }
    string Category { get; set; }
}

public class BlogCategory : ICategory
{
    public int ID { get; set; }
    public string Category { get; set; }
} 

public class PostCategory : ICategory
{
    public int ID { get; set; }
    public string Category { get; set; }
} 
```

等等，等等。然后根据需要使用您现有的帮助程序类，使用您的其他类来对抗这个接口：

```
public static IEnumerable<SelectListItem> ToSelectListItems
    (this IEnumerable<ICategory> categories, int selectedId)
{
    return categories.OrderBy(category => category.Category)
        .Select(category => new SelectListItem
        {
            Selected = (category.ID == selectedId),
            Text = category.Category,
            Value = category.ID.ToString()
        });
} 
```

请享用...

# javascript - 将容器添加到所有 JQuery 选择

> ID：11580092
> 
> 赞同：0
> 
> 时间：2012-07-20T13:12:33.580
> 
> 标签：javascript, jquery, jsp

我正在开发一个 Web 应用程序，其中相同的 JSP 页面使用不同的参数加载到同一页面的多个区域。为每个部分构建了动态 javascript，问题是当我在类名上使用 jQuery 选择器时，我在该 JSP 的所有实例中返回了该类的所有元素。

我想做的是在该动态javascript文件中以某种方式覆盖基本 $('.classname') 样式选择器以执行类似... $('<%=containerDiv%> .className') 的操作而无需重构执行此操作的所有代码。

我尝试更改的所有代码都封装到一个 javascript 对象中，因此我希望在构造函数中执行此操作。

提前致谢。

编辑：

在伪代码中，我正在寻找的是......

```
$(regularConstructor) = $(localVar + ' ' + regularConstructor); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:19:55.317

您可以尝试不生成，而只是在选择器中提供上下文作为第二个参数。

这将是这样的：

```
var widget = $("<div/>"); //Creating dom node
/*
  Or you can get it by your dinamic id: 
  widget = $("<%=containerDiv%>");
*/
widget.html("<div class='classname'>111</div>"); //Filling it with content
widget.appendTo("body"); //Inserting it to document
$(".classname", widget).fadeOut(); //working with elements inside your widget 
```

而且你有一个 Dom 节点链接，你可以在脚本中使用它而不会在选择器中发生冲突。

# java - 在运行后台任务之前，我可以取消一个 swingworker 并等待它完成吗

> ID：11580094
> 
> 赞同：1
> 
> 时间：2012-07-20T13:12:44.307
> 
> 标签：java, swingworker, future, executor

在运行后台任务之前，我可以取消`Swingworker`并等待它完成吗？或者，我可以向运行代码的任务发送中断`doInBackground()`而不取消整个摇摆工人。？

我的问题是我不希望在代码完成`done()`之前启动代码`doInBackground()`。早期的代码从未调用过取消，`Swingworker`而是我只是设置了一个可变布尔值，`WidgetController`它将检查并且如果设置为正常关闭。这一切都很好，除了`WidgetController`有时需要很长时间来检查这个标志，所以我需要能够使用中断方法。

### 伪示例

当用户单击启动时会显示一个对话框，此调用`WidgetDialogListener`此创建实例`WidgetWorker`，此启动`WidgetController`，显示一个`WidgetProgressDialog`并在显示正常完成时`WidgetController`显示所做操作`ShowWidgetReport`的摘要`WidgetController`。

运行`WidgetController`时，`WidgetProgressDialog`会显示进度。如果用户单击取消按钮以停止进度，这会导致发送中断，`WidgetController`然后**无需等待`widgetcontroller`实际完成** ，就会调用 done 方法导致`ShowWidgetReport`显示。但我不希望它在`WidgetController`实际完成之前这样做。

```
class WidgetDialogListener implements ActionListener
{
    public  WidgetDialogListener()
    {

    }

    public  void actionPerformed(ActionEvent e)
    {
        StartFixSongsDialog.this.dispose();
        WidgetProgressDialog wpd = new FixSongsDialog();
        wpd.setVisible(true);
        WidgetWorker ww = new WidgetWorker();
        wpd.setSwingWorker(ww);
        Executors.newSingleThreadScheduledExecutor().submit(ww);
    }
}

   class WidgetProgressDialog
   {
      ....................

        private void actionPerformed(ActionEvent e)
        {
            //Main.stopTask();
            swingWorker.cancel(true);
        }
    }

class WidgetWorker extends SwingWorker<String, Object>
{
    @Override
    public String doInBackground() throws Exception
    {
       new WidgetController().startCreateWidgets();
       return "";
    }

    @Override
    protected void done()
    {
        ShowWidgetReport showReport = new ShowWidgetReport();
        showReport.setVisible(true);
    }
} 
```

## 编辑

我使用了Waiting for a cancelled future 中的`AwaitingWorker`描述[来真正完成](https://stackoverflow.com/questions/3522427/waiting-for-a-cancelled-future-to-actually-finish?rq=1)Jacob 指给我的

```
abstract class AwaitingWorker<T, V> extends SwingWorker<T, V>
{
    private final CountDownLatch actuallyFinishedLatch = new CountDownLatch(1);

    protected abstract T performOperation() throws Exception;

    @Override
    protected final T doInBackground() throws Exception
    {
        try
        {
            return performOperation();
        }
        finally
        {
            actuallyFinishedLatch.countDown();
        }
    }

    public void awaitActualCompletion() throws InterruptedException
    {
        actuallyFinishedLatch.await();
    }
}

class WidgetWorker extends AwaitingWorker<String, Object>
{
    @Override
    public String performOperation() throws Exception
    {
        new WidgetController().startCreateWidgets();
        return "";
    }

    @Override
    protected void done()
    {
        try
        {
            awaitActualCompletion();
        }
        catch(InterruptedException ioe)
        {

        }
        ShowWidgetReport showReport = new ShowWidgetReport();
        showReport.setVisible(true);
    }
} 
```

也许完全误解了解决方案，但似乎无论您采用哪种方式，gui 线程最终都会等待非 gui 任务完成，而我想要的是在完成任何操作之前完成非 gui 任务gui线程。

# android - 鉴于它是活动中的嵌套类，如何初始化自定义surfaceView？

> ID：11580096
> 
> 赞同：1
> 
> 时间：2012-07-20T13:12:48.160
> 
> 标签：android, surfaceview, android-view, nested-class, xml-layout

我有一个看起来像这样的自定义 SurfaceView：

```
public class GFXSurface extends Activity implements OnTouchListener 
{
    .
    .
    GameSurface gameSurfaceView;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game); 
        gameSurfaceView = (GameSurface)findViewById(R.id.svgame);
        fullscreen();
        initialize();
    }
    .
    .
    .
    public class GameSurface extends SurfaceView implements Runnable 
    {
        .
        .
        public GameSurface(Context context) 
        {
            super(context);
            ourHolder = getHolder();
        }
        .
        .
        .
    }
} 
```

我的问题是如何在我的 xml 布局中引用它？

我正在使用 xml 布局，因为我需要在该表面视图之上添加一些东西

我尝试了几种方法，但都失败了......

这不起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

  <com.bla.bla.GFXSurface.GameSurface
    android:id="@+id/svgame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
 .
 .
 .
</FrameLayout> 
```

非常感谢你的帮助！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:13:55.673

您的`GameSurface`课程必须是静态的。您不能在布局中使用非静态嵌套类，因为您需要外部类实例来创建此类的对象。

# selenium-ide - 使用 selenium IDE 保存元标记的内容

> ID：11580097
> 
> 赞同：-1
> 
> 时间：2012-07-20T13:12:57.010
> 
> 标签：selenium-ide

我想保存元标记的内容，例如 `<meta name="description" content="This is test meta description!" />`

我试过这个：

```
<td>store</td>
<td>//meta[@name='description']</td>
<td>b</td>
</tr>
<tr>
<td>echo</td>
<td>${b}</td>
<td></td>
</tr> 
```

我在 Selenium IDE 中的 echo 结果是：

```
[info] Executing: |echo | ${b} | |
[info] echo: //meta[@name='description'] 
```

但我需要获取内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:20:08.067

以下是场景的解决方案

```
storeAttribute  |  //meta[@name='description']@content  |  variable
echo  | ${variable} 
```

# android - ListView 不显示在 Android 中 Tabhost 的 RelativeLayout 内？

> ID：11580099
> 
> 赞同：0
> 
> 时间：2012-07-20T13:13:01.347
> 
> 标签：android, android-listview, android-tabhost, android-relativelayout

目前我在简单的Android应用程序中工作，使用Tabhost创建三个选项卡，第一个选项卡使用RelativeLayout创建ListView，但ListView不可见，所以我尝试为ListView设置背景颜色（白色），只显示白色ListView 未显示，但结果相同，所以请帮助我，如何在 Android 的 Tabbar 中设置列​​表视图。

提前致谢

我试过这个

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/tabhost"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <RelativeLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TabWidget android:id="@android:id/tabs"
      android:layout_width="fill_parent"
      android:layout_alignParentBottom = "true"
      android:layout_height="wrap_content"
     />

    <FrameLayout android:id="@android:id/tabcontent"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab1"

    android:layout_width="fill_parent"
    android:layout_height="200dip" >

    <ListView
        android:id="@+id/edittext01"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="#ffff"
        android:paddingTop="10px" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:24:28.947

您实际上需要根据上面的选项卡指定 ListView 位置，然后使用 RelativeLayout 属性`android:layout_above="id_of_FrameLayout_containing_ListView "`来显示您想要的列表。

对于 ListView 中的内容，检查您添加的项目是否正确添加，以及是否使用 AdapterClass 绘制每个列表项。

希望这个解释对你有用......

# security - 检索 Shiro 主体

> ID：11580101
> 
> 赞同：4
> 
> 时间：2012-07-20T13:13:04.463
> 
> 标签：security, jsf, shiro

注意：由于随后的研究，这个问题已经完全重组。

我正在尝试从 Shiro 的主题中检索值`PrincipalCollection`。我在集合中添加了两个主体。`Username`和`UUID`。当我尝试回忆这些时，我得到一个`SimplePrincipalCollection`大小 = 1 的值，而这反过来又具有`LinkedHashMap`大小 = 2 的主体。

问题是如何直接检索主体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-28T09:22:56.617

为此目的，不需要两个添加多个原则。您可以创建一个包含您需要的所有信息的简单对象 (POJO)，并将其用作唯一原则。

```
public class MyRealm extends JdbcRealm {

...
enter code here

@Override
protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {

    SimpleAuthenticationInfo info = null;
    try {
        //GET USER INFO FROM DB etc. here
        MyPrinciple USER_OBJECT = new MyPrinciple();
        USER_OBJECT.setId(UUID);
        USER_OBJECT.setUsername(username);
        info = new SimpleAuthenticationInfo(USER_OBJECT, password.toCharArray(), getName());

    } catch (IOException | SQLException e) {
        logger.error(message, e);
        throw new AuthenticationException(message, e);
    }

    return info;
} 
```

然后，当您需要登录用户的用户信息时，您可以简单地调用 getPrinciple() 并在将其转换为您的用户类 (POJO) 后使用它的 getter 方法：

```
MyPrinciple LoggedInUser = (MyPrinciple ) SecurityUtils.getSubject().getPrinciple();
long uid = LoggedInUser.getId();
String username = LoggedInUser.getUsername(); 
```

# c++ - 用于生成 boost::mpl::vector 序列的宏

> ID：11580102
> 
> 赞同：1
> 
> 时间：2012-07-20T13:13:07.193
> 
> 标签：c++, boost-mpl

经过长时间搜索如何使用可变参数生成函数后，我找到了一些解决方案。

```
 #define item(z, n, _) \
    BOOST_PP_EXPR_IF(n, +) BOOST_PP_CAT(p, n) \
    #define add(z, n, _) \
    template inline T add( BOOST_PP_ENUM_PARAMS( BOOST_PP_INC(n), T p) ) \
    { \
        return BOOST_PP_REPEAT(BOOST_PP_INC(n), item, ~); \
    } \
    BOOST_PP_REPEAT(ADD_MAX_ARITY, add, ~)
    #undef item
    #undef add 
```

这是宏生成函数，如 T add(...){ return a+b....;}，我创建了如何进行宏递归扩展。[对序列的宏递归扩展](https://stackoverflow.com/questions/1286950/macro-recursive-expansion-to-a-sequence)。我的问题可能会混合以前的 2 个解决方案来生成这样的东西？

```
 #define MPL(x) boost::mpl::vector{boost::mpl::char_{x}}
    #define MPL1(x,x1) boost::mpl::vector{boost::mpl::char_{x} ,boost::mpl::char_{x1} }
    ........
    #define MPLN(x,..xn) boost::mpl::vector{boost::mpl::char_{x}...,boost::mpl::char_{xn} } 
```

# javascript - 用于验证表达式的 asp validationExpression 中的代码使我们能够避免单词末尾的任何字母 (d)

> ID：11580105
> 
> 赞同：0
> 
> 时间：2012-07-20T13:13:14.450
> 
> 标签：javascript, asp.net, validation

我需要一个aspvalidationExpression中的代码来验证一个表达式，如果Word末尾有任何字母（d），我们就可以避免提交

例子：

禁用：GIAC1-IMME-D（坏）

启用：GIAC1-IMME（好）

放在这里 ：

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator5"  runat="server" ControlToValidate="date_Fin" 
Display="Dynamic" ErrorMessage="Invalid date"
 ForeColor="Red" ValidationExpression=""></asp:RegularExpressionValidator>

tnks my clan 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:19:55.207

我假设您正在谈论 RegularExpressionValidator 控件的 ValidationExpression 属性。如果是这种情况，您可以使用下面的正则表达式。它将匹配包含除换行符以外的任何内容且不以小写或大写 d 结尾的任何字符串。

```
^.*[^Dd]$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:19:20.150

CascadeMode = CascadeMode.StopOnFirstFailure;

RuleFor(x => x.Field).Trim().ToUpper() .EndsWith("D") .WithMessage("No Ds please");

# iphone - 从presentModalViewController返回时如何更新slider和switch的值？

> ID：11580106
> 
> 赞同：1
> 
> 时间：2012-07-20T13:13:13.650
> 
> 标签：iphone, objective-c, ios, xcode

我有他们有一些设置属性的帐户。作为设置，有 的值`UISlider`和 的值`UISwitch`。当我运行应用程序时它工作正常，我可以显示最后一个值，`NSUserDefaults`因为 viewDidLoad 方法有效。顺便说一下，我的应用程序有一个标签栏控制器。因此，当我切换选项卡时它也可以正常工作，因为我可以获取开关和滑块的值并在 viewWillAppear 方法中更新它们。但是在我的设置开关中，我呈现了一个视图，其中包含用户列表，因此用户可以选择任何帐户。当我从呈现的视图中返回时，我无法更新开关和滑块的值。我需要一个触发方法来更新它们的值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:19:23.213

是的，这是苹果的 3 种方法：

```
1) Delegation
2) NSNotificationCenter
3) KVO 
```

但是，对于您的特定情况，模式视图，委托模式是 Apple 推荐的一种，也是我推荐的一种。

不过，它需要比其他 2 个选项更多的编码。

首先，您必须在模态显示的视图中声明协议：

```
in your .h

@protocol MyProtocol;

@interface MyClass : NSObject

@property (nonatomic, weak) id<MyProtocol> delegate;

@end

@protocol MyProtocol <NSObject>

-(void)updateValues:(NSArray *)values;

@end 
```

然后在从原始视图控制器模态显示模态视图之前，只需像这样设置 delgate

```
myModallyPresentedController.delegate = self; 
```

然后让您的呈现视图控制器采用协议

```
in your .h

MyPresentingViewController : UIViewController <MyProtocol>

in .m

//Implement method:

-(void)updateValues:(NSArray *)values {
   //Update Values.
} 
```

最后当用户按下“完成”

你可以打电话

```
[delegate updatedValues:myValues]; 
```

并相应更新。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:18:23.933

我前段时间写了这篇文章，基本上只是将它粘贴到所有这些问题中。顺便说一句，如果有人有建议可以使这更容易理解/更好，我很想听听他们的意见。

您可以使用委托在类之间传递信息；这对于您希望在使用方法时传递信息的情况特别有用。

```
Delegates

//In parent .m file:
//assign the delegate
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"segueName"])
    {
        childController *foo = segue.destinationViewController;
        foo.delegate = self;
    }

}

//implement protocol method(s):
- (void) methodName:(dataType*) dataName
{
    //An example of what you could do if your data was an NSDate
    buttonLabel.titleLabel.text = [[date description] substringToIndex:10];
}

//In parent .h file:
//import child header
#import "ChildName.h"

//indicate conformity with protocol
@interface ParentName : UIViewController <ChildNameDelegate>

//In child .h file
//declare protocol
@protocol ChildNameDelegate
- (void) methodName:(dataType*) dataName;
@end

//declare delegate
@property (weak, nonatomic) id<ChildNameDelegate> delegate;

//In child .m file
//synthesize delegate
@synthesize delegate; 

//use method
- (IBAction)actionName:(id)sender 
{
    [delegate methodName:assignedData];
} 
```

# java - 为有效信用卡生成随机数的好方法是什么？

> ID：11580107
> 
> 赞同：8
> 
> 时间：2012-07-20T13:13:16.537
> 
> 标签：java, credit-card

我正在用 Java 开发一组用于验证和使用信用卡的工具。到目前为止，我支持：

*   LUHN 验证。

*   日期验证（简单到期）。

*   基于品牌（Visa、MasterCard 等）的卡代码长度验证（CVV、CVC、CID）。

*   信用卡号长度验证（基于品牌）。

*   BIN/IIN 验证（针对有效数字的数据库）。

*   隐藏数字 (425010 * * * * * * 1234)

为了使工具集更完整，我想创建一个基于不同卡品牌的信用卡随机数生成器。此功能将（希望）使我的测试用例更加可靠。

基本上，我希望能够生成以下数字：

*   LUHN 有效

*   基于品牌前缀有效

*   基于 BIN/IIN 前缀号码有效

对于 BIN/IIN 有效卡号，我正在考虑从数据库中查找一个随机 BIN/IIN 号码（当然基于品牌），然后使用`Random`. 显然，这在大多数情况下都是无效的，我将不得不增加一个数字，直到它通过 LUHN 验证。

我似乎想不出更好的办法。也许有人可以建议一些更聪明的东西......？

期待您的建议！提前致谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-29T07:07:36.860

不久前，我编写了一个名为**MockNeat**的库。其中一项功能是允许开发人员生成不同的有效信用卡号。

检查此方法：[creditCards()](https://www.mockneat.com/docs/#creditcards)。

将 1000 张信用卡 AMEX 和 Mastercard 写入文件以供以后使用的简短示例：

```
 MockNeat m = MockNeat.threadLocal();
    final Path path = Paths.get("cc.txt");

// Write in a file 1000 credit cards AMEX and Mastercard:
 m.creditCards()
            .types(MASTERCARD, AMERICAN_EXPRESS)
            .list(1000)
            .consume(list -> {
                try { Files.write(path, list, CREATE, WRITE); }
                catch (IOException e) { e.printStackTrace(); }
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:02:58.540

> 此功能将（希望）使我的测试用例更加可靠。

我不相信。以我的经验，在单元测试中使用随机数据不是一个好主意，因为你永远不知道你是否已经涵盖了所有重要的案例......和错误。

我建议您手动创建测试信用卡号，并注意它们涵盖所有需要测试的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-24T21:26:27.227

这里有一些 Groovy 来生成 LUHN 有效的信用卡。我相信你可以用你自己的语言重写它：

```
cardPrepend = "400141"
cardLength = "16"

random = new Random()
myString = ""

    (cardLength.toInteger() - cardPrepend.length()).times{
        randomNumber = random.nextInt(9)
        myString = myString + randomNumber.toString()  
    }

    myString = cardPrepend + myString

    myStringMinusLastDigit = myString.substring(0, myString.length()-1)
    mod10Digit = getMod10Digit(myStringMinusLastDigit)
    myString = myStringMinusLastDigit + mod10Digit

    return  """${myString}"""  

//-------------------------------------------------------------------------
def getMod10Digit(String number) {
    int weight = 2;
    int sum    = 0;
    for (int i = number.length() - 1; i >= 0; i--) {
        int digit = weight * Integer.parseInt(number.substring(i,i+1));
        sum = sum + (digit / 10) + (digit % 10);
        weight = (weight == 2) ? 1: 2;
    }

    return ((10 - (sum % 10)) % 10);
    } 
```

# android - 禁用音量摇杆，使其可用于控制游戏

> ID：11580111
> 
> 赞同：0
> 
> 时间：2012-07-20T13:13:48.363
> 
> 标签：android, button, volume

嗨，我正在制作一个蛇游戏作为初学者 android 项目，我想要的功能之一是让音量控制键控制蛇。我编写了代码来处理控制，但是当我尝试玩游戏时，它会出现音量菜单而不是控制蛇。我想知道是否有某种方法可以覆盖音量键的原始操作。这是我处理控件的代码部分

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent msg) {

    if (keyCode == KeyEvent.KEYCODE_DPAD_UP) {
        if (mMode == READY) {
            /*
             * At the beginning of the game, or the end of a previous one,
             * we should start a new game.
             */
            initNewGame();
            setMode(RUNNING);
            update();
            return (true);
        }

        if (mMode == PAUSE) {
            /*
             * If the game is merely paused, we should just continue where
             * we left off.
             */
            setMode(RUNNING);
            update();
            return (true);
        }

        if (mMode == PAUSED) {
            /*
             * If the game is merely paused by the user then we shall tell them their score, we should just continue where
             * we left off.
             */
            setMode(RUNNING);
            update();
            return (true);
        }

        if (mDirection != SOUTH) {
            mNextDirection = NORTH;
        }
        return (true);
    }
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        if (mMode == RUNNING) {
            /*
             * At the beginning of the game, or the end of a previous one,
             * we should start a new game.
             */
            setMode(PAUSED);
            update();
            return (true);
        }
        if (mMode == PAUSED) {
            /*
             * If the game is merely paused by the user then we shall tell them their score, we should just continue where
             * we left off.
             */
            setMode(RUNNING);
            update();
            return (true);
        }

    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_DOWN) {
        if (mMode == READY) {
            /*
             * At the beginning of the game, or the end of a previous one,
             * we should start a new game.
             */
            initNewGameChaos();
            setMode(RUNNING);
            update();
            return (true);
        }

        if (mMode == PAUSED) {
            /*
             * If the game is merely paused by the user then we shall tell them their score, we should just continue where
             * we left off.
             */
            setMode(RUNNING);
            update();
            return (true);
        }

        if (mDirection != NORTH) {
            mNextDirection = SOUTH;
        }
        return (true);

    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {
        if (mMode == READY) {
            /*
             * At the beginning of the game, or the end of a previous one,
             * we should start a new game.
             */
            initNewGameHard();
            setMode(RUNNING);
            update();
            return (true);
        }
        if (mMode == PAUSED) {

            setMode(RUNNING);
            update();
            return (true);
        }

        if (mDirection != EAST) {
            mNextDirection = WEST;
        }
        return (true);
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {
        if (mMode == READY) {

            initNewGameEasy();
            setMode(RUNNING);
            update();
            return (true);
        }
        if (mDirection != WEST) {
            mNextDirection = EAST;
        }

        if (mMode == PAUSED) {

            setMode(RUNNING);
            update();
            return (true);
        }

        return (true);
    }
    if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
        if (mMode == LOSE) {

            setMode(READY);
            update();
            return (true);
        }
        if (mMode == RUNNING) {

            setMode(PAUSED);
            update();
            return (true);
        }
        if (mMode == PAUSED) {

            setMode(RUNNING);
            update();
            return (true);
        }

    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        if (mDirection == WEST) {
            mNextDirection = SOUTH;
        }
        if (mDirection == SOUTH) {
            mNextDirection = EAST;
        }
        if (mDirection == EAST) {
            mNextDirection = NORTH;
        }
        if (mDirection != NORTH) {
            mNextDirection = WEST;
        }
            if (mMode == PAUSED) {

                setMode(RUNNING);
                update();
                return (true);
            }
     return true;
      }

    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
        if (mDirection == WEST) {
            mNextDirection = NORTH;
        }
        if (mDirection == NORTH) {
            mNextDirection = EAST;
        }
        if (mDirection == EAST) {
            mNextDirection = SOUTH;
        }
        if (mDirection != SOUTH) {
            mNextDirection = WEST;
        }
            if (mMode == PAUSED) {

                setMode(RUNNING);
                update();
                return (true);
            }

    return true;
    }

}     
  return super.onKeyDown(keyCode, msg);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:16:08.610

处理完音量键后返回`true`，而不是通过调用该`super`方法。

```
if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
    // handle the keypress here
    return true;
} 
```

# c# - 并行调用会减慢分析器的速度吗？

> ID：11580116
> 
> 赞同：0
> 
> 时间：2012-07-20T13:14:06.340
> 
> 标签：c#, performance, parallel-processing, profiling

我的任务是找出是什么让我被分配到的应用程序如此缓慢。我决定试一试 Redgate 的**Ants Profiler**。运行它时，大多数热点都包含在原始开发人员编写为`Parallel.For()`循环的循环中。

为了看看它会产生什么效果，我用标准的 for 循环替换了它们，并且分析器加速了几秒钟。但是，在没有分析器的情况下进行测试，使用`DateTime.Now`一个此类循环的开始和结束之间的简单差异，表明该`Parallel.For()`循环的速度是原来的两倍多。

尝试使用 Parallel 类时，通过分析器运行代码是否可能会造成人为瓶颈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:18:29.763

问题在于，在执行并行操作时，探查器会对所有线程进行采样，这使得正常探查器的性能下降会随着线程的增多而变大。

# jquery - jQuery 和冷融合

> ID：11580120
> 
> 赞同：1
> 
> 时间：2012-07-20T13:14:31.080
> 
> 标签：jquery, coldfusion

我有一个需要输出结果的页面，我正在使用带有 json 的 jquery 来返回和显示结果，但是结果没有显示在相关的 div 中，当用户将鼠标悬停在相关图像上时会出现。这是下面的脚本：

```
<style>
#normaldiv {}
.normaldiv {width:200px; height:200px; float:left; margin-left:15px; margin-bottom:15px; background-color:#CCC; position:relative;}
.hoverdiv {width:250px; height:350px; -moz-box-shadow: 0 0 10px #000; -webkit-box-shadow: 0 0 10px #000; box-shadow: 0 0 10px #000; top:-10px; z-index:10000; position:absolute; background-color:#FFF;/**/ margin-left:-25px;}
</style> 
```

```
<script type="text/javascript">
                $(document).ready(function(){

                var mydata  = eval({"COLUMNS":["SONG_ID","SONG_TITLE","SONG_DESC","SONG_ACTIVE","SONG_DATE","LINK"],"DATA":[21, "This Track - Original Mix (3:00)", "<p><strong>Artist: <\/strong>Me<br \/> <strong>Label:&nbsp;<\/strong>My Own <br \/> <strong>Genre: <\/strong>Country (<span class=\"trackTags\">Chilled<\/span>)<strong><\/strong><br \/> <strong>Release Date: <\/strong>2012-05-28<\/p>", 1, "May, 28 2012 00:00:00", "http:\/\/www.byme.com\/track\/this-track-original\/4356789", 161, 21]]})
                var output = document.getElementById('normaldiv');
            var colMap = new Object();

       //first - find my columnsco
        for(var i = 0; i < mydata.COLUMNS.length; i++) {
        colMap[mydata.COLUMNS[i]] = i;        
        }

        for(var i = 0; i < mydata.DATA.length; i++) {
        var str = " Title: " + mydata.DATA[i][colMap["SONG_TITLE"]] + "- Release Date: " + mydata.DATA[i][colMap["SONG_DATE"]] +  "Link: " + mydata.DATA[i][colMap["LINK"]] + "<br />" + mydata.DATA[i][colMap["SONG_DESC"]] + "<br />"+ "<br />";
            var title = mydata.DATA[i][colMap["SONG_TITLE"]] ;
            var reldate = mydata.DATA[i][colMap["SONG_DATE"]];
            var buynow = mydata.DATA[i][colMap["LINK"]];
            var reldesc = mydata.DATA[i][colMap["SONG_DESC"]];
            var relcov =  mydata.DATA[i][colMap["PHOTO_ID"]];
            output.innerHTML += "<div class=normaldiv>" + "<img src=images/rel/"+  mydata.DATA[i][colMap["PHOTO_ID"]]+".jpg width=200 height=200/>" +"</div>";
            var content = document.createTextNode(title);

        }   

            $(".normaldiv").hover(
        function () {
        $(this).append($('<div class=hoverdiv></div>'));
           }, 
        function () {
        $(this).find("div:last").remove();
                  }
                );
                });

</script>

<div id="normaldiv"></div> 
```

有人可以告诉我脚本是否正确吗？我添加了一个模拟的 json 数据结果。

我正在将图像加载到 normaldiv 中，但是当人们将鼠标悬停在图像上时，我希望内容出现在悬停 div 中。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:38:34.413

看起来您正在将 ColdFusion 查询的结果直接序列化为 JSON。虽然这在生成 JSON 方面是有效的，但在我看来，在客户端上使用它会带来巨大的痛苦，因为你最终会得到糟糕的 COLUMN 和 DATA 属性，这让你很难使用。

我会从 CF 创建一个更好的 JSON 对象......当它到达客户端时看起来像这样：

```
[
    {
        "song_id": 1234,
        "song_title": "My awesome song",
        "song_desc": "A description",
        "song_active": true,
        "song_date": "July 20, 2012 or whatever format you wish",
        "link": "http://stackoverflow.com"
    },
    {
        "song_id": 1235,
        "song_title": "My Other awesome song",
        "song_desc": "Another description",
        "song_active": false,
        "song_date": "July 18, 2012 or whatever format you wish",
        "link": "http://stackoverflow.com/again"
    },
] 
```

这种格式将允许您更轻松地遍历返回的 JSON 数据，并在从 CFML 返回数据的客户端代码中执行以下操作（其中 mydata 是返回的 JSON 的名称）：

```
for(var i = 0; i < mydata.length; i++) {
    var str = " Title: " + mydata[i].song_title + "- Release Date: " + mydata[i].song_date +  "Link: " + mydata[i].link + "<br />" + mydata[i].song_desc + "<br />"+ "<br />";
    output.innerHTML += str;
} 
```

再说一次，这只是我对在客户端使用 CF 生成的 JSON 的偏好，我想我会把它扔在那里供你考虑。

除此之外，您似乎对 HTML 元素（普通和悬停 div）有一些失误。例如， normaldiv 不是一个 ID，它是一个类，所以 getElementByID 不起作用。此外，当您悬停时，您正在添加一个空的 div class=hoverdiv ...当我认为您想要创建悬停 div 并附加 JSON 数据时。以下是对有效示例代码的重写（好吧，可能足以让您继续前进！）：

```
<html>
<head>
<title>TEST</title>
<style type="text/css">
    .normaldiv {width:200px; height:200px; float:left; margin-left:15px; margin-bottom:15px; background-color:#CCC; position:relative;}
    .hoverdiv {width:250px; height:350px; -moz-box-shadow: 0 0 10px #000; -webkit-box-shadow: 0 0 10px #000; box-shadow: 0 0 10px #000; top:-10px; z-index:10000; position:absolute; background-color:#FFF;/**/ margin-left:-25px;}
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        var mydata  = [
            {
                "song_id": 1234,
                "song_title": "My awesome song",
                "song_desc": "A description",
                "song_active": true,
                "song_date": "July 20, 2012 or whatever format you wish",
                "link": "http://stackoverflow.com"
            },
            {
                "song_id": 1235,
                "song_title": "My Other awesome song",
                "song_desc": "Another description",
                "song_active": false,
                "song_date": "July 18, 2012 or whatever format you wish",
                "link": "http://stackoverflow.com/again"
            },
        ]
        var output = $("<div class='hoverdiv'><\/div>");

        for(var i = 0; i < mydata.length; i++) {
            var str = " Title: " + mydata[i].song_title + "- Release Date: " + mydata[i].song_date +  "Link: " + mydata[i].link + "<br />" + mydata[i].song_desc + "<br />"+ "<br />";
            var title = mydata[i].song_title;
            var reldate = mydata[i].song_date;
            output.append(str);
            alert(str);
        } 

        $(".normaldiv").hover(
            function () {
                $(this).append(output);
            }, 
            function () {
                $(this).find("div:last").remove();
            }
        );
    });
</script>
</head>
<body>
    <div class="normaldiv"><img src="images/rel/161.jpg" width="200" height="200"></div>
</body>
</html> 
```

希望能帮助到你！

# salesforce - 在 Salesforce 模板中，如何递归检查父属性？

> ID：11580124
> 
> 赞同：0
> 
> 时间：2012-07-20T13:14:46.997
> 
> 标签：salesforce

我是一名开发人员，但我之前没有接触过销售人员。

我得到了这个：

```
<td class="textAlignRight">
<apex:outputPanel rendered="{!relatedTo.c2g__OwnerCompany__r.c2g__LogoURL__c<>''}"><img src="{!relatedTo.c2g__OwnerCompany__r.c2g__LogoURL__c}"/>
</apex:outputPanel>
</td> 
```

并告诉我不要放入 OwnerCompany 的徽标，而应该放入 Parent 的徽标，但如果 Parent 的 LogoURL 属性为空，我应该放入其父级的 LogoURL，依此类推，直到找到logo 或者没有更多的父母，在这种情况下，我应该将 OwnerCompany LogoURL 放入。

我在搜索销售人员使用的语言时遇到问题。有谁知道我该如何解决这个问题？对带有循环的方法的某种函数调用？

编辑：

显然它需要这样做：

```
Invoice > Account > LogoURL

Invoice > Account > ParentAccount > LogoURL

Invoice > Account > ParentAccount > ParentAccount > LogoURL 
```

等等

其中 Invoice 是relatedToType。

所以我想我需要检查 LogoURL，如果是空白检查 ParentAccount，如果是空白，检查 ParentAccount.ParentAccount 等，如果最后一个是空白，使用

发票 > OwnerCompany > LogoURL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:37:57.417

我将对此进行尝试...此代码假定该`c2g__OwnerCompany__r`字段指向一个帐户记录，该记录又具有`c2g_OwnerCompany__r`指向父帐户的自己的字段（如果有的话）。VisualForce 并不是真正为这种类型的递归而构建的，我想你会明白为什么：

```
<apex:variable var="parentLogo" value="{!relatedTo.c2g__OwnerCompany__r.c2g__LogoURL__c}" />
<apex:variable var="parentLogo2" value="{!relatedTo.c2g__OwnerCompany__r.c2g__OwnerCompany__r.c2g__LogoURL__c}" />
<apex:variable var="parentLogo3" value="{!relatedTo.c2g__OwnerCompany__r.c2g__OwnerCompany__r.c2g__OwnerCompany__r.c2g__LogoURL__c}" />
<td class="textAlignRight">
    <apex:outputPanel rendered="{!parentLogo<>''}">
        <img src="{!parentLogo}"/>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!AND(NOT(parentLogo<>''), parentLogo2<>'')}">
        <img src="{!parentLogo2}"/>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!AND(NOT(parentLogo<>''), NOT(parentLogo2<>'') parentLogo3<>'')}">
        <img src="{!parentLogo3}"/>
    </apex:outputPanel>
</td> 
```

我不会真正推荐这种方法，因为它很快就会把你的 VF 页面弄得一团糟，而且你可以从多少级开始限制。

另一种解决方案是在你的控制器类中处理这个问题，在那里对递归有更多的控制。值得注意的是，Salesforce 对您在单个调用的上下文中可以访问数据库的次数施加了严格的限制，因此您需要找到一种方法来限制其查询的数量。如果您可以保证您只有几个级别的父帐户并且没有循环引用，我可能只会使用它：

```
public String getLogoUrl() {
    String logo;
    Account acc= [select Id, c2g__OwnerCompany__c, c2g__LogoURL__c from Account where Id = :relatedTo.c2g__OwnerCompany__c];
    // running SOQL queries inside of loops is most certainly NOT a Salesforce best practice
    while ( true ) {
        logo = acc.c2g__LogoURL__c;
        if ( acc.c2g__OwnerCompany__c != null )
            acc = [select Id, c2g__OwnerCompany__c, c2g__LogoURL__c from Account where Id = :acc.c2g__OwnerCompany__c];
        else
            break;
    }
    return logo;
} 
```

这反过来又将您的 VF 页面简化为与您开始时类似的内容。当页面通过控制器中的调用加载时，该`logoUrl`变量将自动填充：`getLogoUrl`

```
<td class="textAlignRight">
    <apex:outputPanel rendered="{!AND(NOT(ISNULL(logoUrl)), logoUrl<>'')}">
        <img src="{!logoUrl}"/>
    </apex:outputPanel>
</td> 
```

# c# - 如何在.net中将SID转换为字符串

> ID：11580128
> 
> 赞同：28
> 
> 时间：2012-07-20T13:15:16.630
> 
> 标签：c#, .net

我想将 SID 的 System.Byte[] 类型转换为字符串。

我的代码：

```
string path = "LDAP://DC=abc,DC=contoso,DC=com";
DirectoryEntry entry = new DirectoryEntry(path);
DirectorySearcher mySearcher = new DirectorySearcher(entry);

mySearcher.Filter = "(&(objectClass=user)(samaccountname=user1))";
results = mySearcher.FindAll();
foreach (SearchResult searchResult in results)
{
    Console.WriteLine(searchResult.Properties["ObjectSID"][0].ToString());
} 
```

我尝试了这个，但它从我当前登录的域中获取值，并且我需要来自给定域的值。

```
System.Security.Principal.NTAccount(user1)
    .Translate([System.Security.Principal.SecurityIdentifier]).value 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-20T13:39:39.777

看一下[SecurityIdentifier](http://msdn.microsoft.com/en-us/library/system.security.principal.securityidentifier.aspx)类。然后你可以做一些简单的事情，比如，

```
var sidInBytes = (byte[]) *somestuff*
var sid = new SecurityIdentifier(sidInBytes, 0);
// This gives you what you want
sid.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T10:35:36.750

这就是我所做的，经过一些阅读后，将值存储在 oct 中似乎更安全。如果您不知道另一侧有哪些服务器。下面的代码显示了如何做到这一点以获得您想要的结果

```
private static string ExtractSinglePropertyValueFromByteArray(object value)
{
    //all if checks etc has been omitted
    string propertyValue = string.Empty;
    var bytes = (byte[])value;
    var propertyValueOct = BuildOctString(bytes); // 010500....etc
    var propertyValueSec = BuildSecString(bytes); // S-1-5-...etc
    propertyValue = propertyValueSec;
    return propertyValue;
}

private static string BuildSecString(byte[] bytes)
{
    return new SecurityIdentifier(bytes,0).Value.ToString();
}

private static string BuildOctString(byte[] bytes)
{
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < bytes.Length; i++)
    {
        sb.Append(bytes[i].ToString("X2"));
    }
    return sb.ToString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-10T19:20:27.603

在 directoryEntry 中加载属性后 ....

```
var usrId = (byte[])directoryEntry.Properties["objectSid"][0];
var objectID = (new SecurityIdentifier(usrId,0)).ToString(); 
```

# blackberry - 使用 AppWorld 进行黑莓开发

> ID：11580129
> 
> 赞同：-3
> 
> 时间：2012-07-20T13:15:20.630
> 
> 标签：blackberry, appworld

在 AppWorld 的帮助下，我在哪里可以找到有关 Blackberry 开发的信息？（最有兴趣与订阅合作）与Iphone下开发的主要区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:50:14.133

[黑莓开发者网站](https://developer.blackberry.com/)

[黑莓支持论坛](http://supportforums.blackberry.com/t5/Developer-Support-Forums/ct-p/blackberrydev)

# php - 带有条件的多重循环

> ID：11580130
> 
> 赞同：1
> 
> 时间：2012-07-20T13:15:21.967
> 
> 标签：php, for-loop, calendar

我正在构建一个基于“层”的每周日历应用程序。这个日历是一个基于 Day-Hour 的矩阵，在 $calendar 变量中表示为数组：

```
hour |Monday | Tuesday | Wednesday ...
12am
01am
02am
... 
```

如果想将假期应用于日历，我会这样做：

```
$holidays = getHolidays();
for( $day = 0; $i < count($calendar)); $day ++)
{
    for( $hour = 0; $i < count($calendar[$day])); $hour ++)
    {
        if ( exists_in_array( $calendar[$day][$hour] ,  $holidays ) )
        {
            $calendar[$day][$hour] = "holiday";
        }
    }
} 
```

现在，如果我想申请设置特殊事件，我会这样做：

```
$specialDates = getSpecialDates();

for( $day = 0; $i < count($calendar)); $day ++)
{
    for( $hour = 0; $i < count($calendar[$day])); $hour ++)
    {
        if ( exists_in_array( $calendar[$day][$hour] ,  $specialDates  ) )
        {
            $calendar[$day][$hour] = "special";
        }
    }
} 
```

此刻，我很担心，因为有一个循环来迭代日历以应用新层可能会使应用程序变得越来越慢。

那么，在我的日历中添加不同的信息是否是一种好习惯（在我的情况下）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:38:55.437

为什么不使用同一组循环而不是多次循环呢？

```
$specialDates = getSpecialDates();
$holidays = getHolidays();
for( $day = 0; $i < count($calendar)); $day ++)
{
    for( $hour = 0; $i < count($calendar[$day])); $hour ++)
    {
        if ( exists_in_array( $calendar[$day][$hour] ,  $specialDates  ) )
        {
            $calendar[$day][$hour] = "special";
        }
        if ( exists_in_array( $calendar[$day][$hour] ,  $holidays ) )
        {
            $calendar[$day][$hour] = "holiday";
        }
    }
} 
```

# iphone - 通过 iPhone 应用程序在 Facebook 墙上发布图像

> ID：11580132
> 
> 赞同：-2
> 
> 时间：2012-07-20T13:15:24.273
> 
> 标签：iphone, facebook, image, post, share

> **可能重复：**
> [使用 facebook connect for iPhone 上传照片的记录过程](https://stackoverflow.com/questions/750328/documented-process-for-using-facebook-connect-for-the-iphone-to-upload-photos)

我有一个 iPhone 应用程序，想知道如何制作一张图片，点击该图片后，该图片将发布到用户的 Facebook 个人资料中。

该应用程序基于 Facebook，我的意思是，您使用您的 Facebook 帐户注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:39:08.007

使用[facebook 的 sdk](https://github.com/facebook/facebook-ios-sdk)发布照片、文本和链接。或者您可以使用[Sharekit](http://getsharekit.com/) - 它是一个功能强大的 sdk，可以在 Facebook、Twitter、ReadItLater 等上发布。

# mysql - 在mysql中使用concat（）准备statemnt给出错误

> ID：11580134
> 
> 赞同：3
> 
> 时间：2012-07-20T13:15:37.630
> 
> 标签：mysql, insert, mysql-error-1064

下面给出的代码是存储过程的一部分（mysql 5.5.20）：

```
prepare stmnt1 from concat('insert into ' , tableName ,  '(employee_id , administrator_id) values(? , ?) ' ) ;                   
set @a = 19 ;
set @b = 11;
execute stmnt1 using @a , @b ; 
```

`tableName`是局部变量

当我创建程序时，我收到此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to         
your MySQL server version for the right syntax to use near 'concat('insert into ' , 
tableName ,  '(employee_id , administrator_id) values(? ' at line 23 
```

好像这种说法在mysql中是不可能的。
请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:18:49.487

请试试这个。

```
set @sql = concat('insert into ' , tableName ,  '(employee_id , administrator_id) values(? , ?) ' ) ; 
prepare stmnt1 from @sql;                
set @a = 19 ;
set @b = 11;
execute stmnt1 using @a , @b ;

deallocate prepare stmnt1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T13:21:26.237

在变量中使用它

```
set @sql_string = 
concat('insert into ' , tableName ,  '(employee_id , administrator_id) values(? , ?) ' ) ;  
prepare stmnt1 from @sql_string;                 
set @a = 19 ; 
set @b = 11; 
execute stmnt1 using @a , @b ; 
```

# wpf - 在页面之间传递单个 DataContext 实例

> ID：11580136
> 
> 赞同：1
> 
> 时间：2012-07-20T13:15:47.847
> 
> 标签：wpf, mvvm, viewmodel, datacontext

我正在使用 MVVM 开发 WPF xBap 应用程序。我现在想要传递 ViewModel 的单个实例以用作用户将在其中来回导航的 2 个页面之间的 DataContext。

我遇到了一些问题，我想知道是否有人可以确认这是否真的可行。

我看过很多类似的帖子，但没有一个适合我的问题，所以我只是重申，不是 2 个视图创建自己的 ViewModel 实例作为 DataContext，而是 2 个视图共享一个实例。

非常感谢

大卫

# yii - Yii 错误：session_regenerate_id()

> ID：11580140
> 
> 赞同：0
> 
> 时间：2012-07-20T13:16:02.487
> 
> 标签：yii

当我在填写表单后尝试创建用户时，会出现以下错误。请帮我解决这个问题：

> session_regenerate_id() [function.session-regenerate-id]：无法重新生成会话 ID - 标头已发送

这是什么错误以及如何解决这个..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T11:23:16.467

使用： headers_sent() 来知道标头已经发送到哪里并更正它。

# jquery - jQuery Validation Plugin - 防止重复错误消息

> ID：11580147
> 
> 赞同：0
> 
> 时间：2012-07-20T13:16:26.303
> 
> 标签：jquery, validation, jquery-validate

我有一条规则，规定每个阶段选择的总数量必须等于预订的乘客数量。每个阶段都在 DIV 中定义，如下例所示：-

**HTML**

```
<div id="Stage_1">
    <select data-stage="1" id="Quantity1" name="Items[1].Quantity">...</select>
    <select data-stage="1" id="Quantity2" name="Items[2].Quantity">...</select>
    <select data-stage="1" id="Quantity3" name="Items[3].Quantity">...</select>
</div>
<div id="Stage_2">
    <select data-stage="2" id="Quantity4" name="Items[4].Quantity">...</select>
    <select data-stage="2" id="Quantity5" name="Items[5].Quantity">...</select>
</div> 
```

例如，如果我在上面的示例中有 4 名乘客的预订，数量 1-3 的总和值必须等于 4，数量 4-5 的总和值也必须等于 4。

然后我使用 jQuery 验证插件来验证...

**脚本**

```
function ValidateStages(value, element, options) {
    var stage = options[0];

    var valid = true;
    var arrVS = new Array(0);

    jQuery('div[id*="Stage_' + stage + '"] select[id*="Quantity"]').each(function () {
        var e = jQuery(this);
        if (arrVS[e.attr('data-stage')] == undefined) {
            arrVS[e.attr('data-stage')] = 0;
        }
        arrVS[e.attr('data-stage')] += parseInt(e.val());
    });

    for (key in arrVS) {
        if(arrVS[key] != MaxPassengers) {
            valid = false;
        }
    }

    return valid;
}

jQuery(document).ready(function () {
    jQuery.validator.addMethod("validate_stages", ValidateStages, "Stage {0} error ");

    jQuery('form:first').validate({
        errorContainer: "#ValidationSummary",
        errorLabelContainer: "#ValidationSummary",
        rules: {
            "Items[1].Quantity": { validate_stages: [1] } ,
            "Items[2].Quantity": { validate_stages: [1] } ,
            "Items[3].Quantity": { validate_stages: [1] } ,
            "Items[4].Quantity": { validate_stages: [2] } ,
            "Items[5].Quantity": { validate_stages: [2] } 
        },
    });
}); 
```

**问题**

我有以下问题：-

1.  页面上的每个下拉菜单都会显示错误消息。例如，如果说“*第 1 阶段错误第 1 阶段错误第 1 阶段错误第 2 阶段错误第 2 阶段错误*”。如果 Stage 1 和 Stage 2 无效，它应该只显示“ *stage 1 error stage 2 error* ”

2.  如您所见，规则是硬编码的。我确实尝试创建一个动态创建规则的函数（见下文），但我不知道如何应用它。如果我尝试执行*规则：{ GetRules() }*那么我只会收到一条错误消息“预期：”

    ```
    var GetRules = function () {
        var rules = '';
        jQuery('div[id*="Stage_"]').each(function (i) {
            jQuery('#' + jQuery(this).attr('id') + ' select[id*="Quantity_"]').each(function (j) {
                var name = jQuery(this).attr('name');
                rules = rules + '"' + name + '": { validate_stages: [' + (i + 1) + '] }, ';
            });
        });

        if (rules.length > 2) {
            rules = rules.slice(0, -2);
        }
        return rules;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:09:57.387

我自己想通了。我需要对验证器上的控件进行分组。完成此操作后，我能够在单独的容器中显示每个阶段的错误。组和规则是动态创建的，如下所示...

```
var validation =
{
    errorContainer: "#ValidationSummary",
    errorLabelContainer: "#ValidationSummary",
    groups: {}, rules: {}, messages: {}
};

jQuery('div[id*="Stage_"]').each(function (i) {
    jQuery('#' + jQuery(this).attr('id') + ' select[id*="Quantity_"]').each(function (j) {
        var name = jQuery(this).attr('name');
        var Rule = name;
        validation.rules[Rule] = { validate_stages: [i + 1] };
    });
});

jQuery('div[id*="Stage_"]').each(function (i) {
    var group_ctrls = ''
    jQuery('#' + jQuery(this).attr('id') + ' select[id*="Quantity_"]').each(function (j) {
        var name = jQuery(this).attr('name');
        group_ctrls = group_ctrls + name + ' ';
    });
    validation.groups['group_' + i] = group_ctrls;
});

jQuery('form:first').validate(validation); 
```

# google-maps - 有没有办法从电子表格中的地址检索谷歌地图经度和纬度？

> ID：11580148
> 
> 赞同：6
> 
> 时间：2012-07-20T13:16:26.740
> 
> 标签：google-maps, google-maps-api-3, latitude-longitude, google-sheets, geotagging

我目前正在处理数据列表，其中一列数据是列表的地址。我计划在谷歌地图上绘制我的每个地址，但我想避免必须手动将地址粘贴到谷歌来获取我需要的参数。

*   经度
*   纬度

我的 excel 表（或者我在 Google Docs 电子表格中有它）包含大约 3000 个地址。所以我希望有办法尝试自动获取这些额外的列数据，以便我可以导入我的后端。

我将把一个 CSV 文件导入我的数据库（因为我已经将 long 和 lat 设置为将要导入的自定义字段），所以我需要将最终值作为我的 excel 表中的列。我附上了一个例子。

任何帮助，将不胜感激

![在此处输入图像描述](../Images/e512bc0e901b0c4fb9ef0bec464aaca8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:48:21.550

试试Pamela Fox 的[这篇博文。](http://blog.pamelafox.org/2008/11/geocoding-with-google-spreadsheets-and.html)它相当旧，但我上次尝试时工作。它一次限制为 100 个电子表格条目，但多次运行并不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T18:13:52.233

我正在使用好的 ol' Google 电子表格小工具，但[它们已被弃用](https://support.google.com/drive/answer/2791335)。

最近，我看到我的一篇旧博客文章停止显示与其集成的 Google 地图。

一项新的搜索在 GitHub 上发现了这个很棒的项目，名为[geo-googledocs](https://github.com/mapbox/geo-googledocs)：

> 将 MapBox 与 Google Docs 集成的工具 [http://mapbox.com/blog/mapping-google-doc-spreadsheet/](http://mapbox.com/blog/mapping-google-doc-spreadsheet/)

它做得很好！您可以在我现在为我提到的旧博客文章更新的[这个电子表格上看到它。](http://www.leniel.net/2009/06/astar-pathfinding-search-csharp-part-2.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-21T15:14:37.563

与 Google 电子表格相关的答案现在已经过时了。

我使用了这个运行良好的网站：[http ://www.findlatitudeandlongitude.com/batch-geocode/#.U_YD8x_8aYN](http://www.findlatitudeandlongitude.com/batch-geocode/#.U_YD8x_8aYN)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-18T15:32:13.383

谷歌电子表格小工具，就像[geocodezip](https://stackoverflow.com/users/1210329/geocodezip)的答案所指出的那样，很快就会被禁用。

Stephen Morse 的[地址到纬度/经度的批量转换](http://stevemorse.org/jcal/latlonbatch.html)页面允许通过 Yahoo 进行复制和粘贴转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-22T23:57:35.733

[您可以使用免费的GeoSheets](http://www.geosheets.com)插件直接在 Google 电子表格中对地址进行地理编码。它允许您执行各种轻量级 GIS 任务并创建地图，而无需编写大量代码。

安装插件后，试试这个：

```
=GEO_GEOCODE(A1:A10) 
```

这应该返回您正在寻找的 lat/lng 列表。

# openerp - 字段只读和组属性

> ID：11580150
> 
> 赞同：2
> 
> 时间：2012-07-20T13:16:32.430
> 
> 标签：openerp

我希望在 Openerp 6.1 视图中只读一个字段。

我希望该字段对于除特定组之外的所有组都是只读的，假设经理应该能够编辑它，而其他人应该只能查看。

我不清楚如何在视图中做到这一点？请建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:59:49.617

您只需在模型中创建一个[功能字段](http://doc.openerp.com/v6.1/developer/03_modules_2.html#functional-fields)，如果用户属于经理组，则该字段为 true，否则为 false，然后[`attrs`](http://doc.openerp.com/v6.0/developer/2_6_views_events/views/design_element.html#field)为您的字段添加，以便在用户属于经理组或只读的情况下可编辑。

或者你可以试试这个方法：

```
'your_field_name': fields.char(
    'Customer Reference',
    size=64,
    write=['base.group_partner_manager'],
    read=['base.group_user'],
    ), 
```

您可以在[https://answers.launchpad.net/openobject-server/+question/178779中找到它](https://answers.launchpad.net/openobject-server/+question/178779)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:12:56.227

您需要分享有关 wht 模型（模块）以及我们在谈论什么视图的更多信息。

它是一个基本模块，那么唯一的方法可能是继承它然后进行更改。

您可以尝试以下捷径，但我不确定它是否适合您。

转到设置>>自定义>>数据库结构>>字段>>

在那里找到您要更改的字段和模型，然后在安全性中更改它。

![在此处输入图像描述](../Images/cad29e6259a5191781c3b6142f7bdd6d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:46:27.547

OpenERP 提供了一种通过访问权限对特定组应用限制的工具。让我们举个简单的例子，如果您有两个组用户和模型 project.project 的经理，并且您允许该用户只能读取项目，而经理可以读取，写入，更新，删除一个项目。创建两个组用户和经理并授予您想要的权限给予。现在将此组应用于 xml 中的字段，例如：groups="project.group_project_user"

# c# - 使用 BeginInvoke 禁用表单控件

> ID：11580151
> 
> 赞同：0
> 
> 时间：2012-07-20T13:16:32.480
> 
> 标签：c#, .net

我正在使用以下代码来禁用表单控件，而我正在执行一些 longTask() 线程。但是控件没有被禁用。这是我的 disable() 方法代码。

```
 public void disableFormControls()
    {
        if (InvokeRequired)
        {
            this.BeginInvoke(new Action(disableFormControls));
            return;
        }
        groupBoxInput.Enabled = false;
        groupBoxOutput.Enabled = false;
        btnGen.Enabled = false;
        btnReset.Enabled = false;
    } 
```

我是这样称呼它的。注意：LongTask() 将在单独的线程中运行。

```
 private void LongTask()
    {
        disableFormControls();
        Console.WriteLine("Started Records::" + DateTime.Now);
        //Doing my long tasks here 
        enableFormControls();
    } 
```

你能告诉我我错在哪里吗..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:21:52.837

试试这个，我将 Invoke 更改为`enableForm`call `disableFormControls`。此外，我同步而不是异步执行此操作，因此您的后台线程在 UI 正确更新之前不会执行任何操作。我还假设`disableFormControls`是您的表单上的一种方法。

```
public void disableFormControls()
{
    if (InvokeRequired)
    {
        this.Invoke(new Action(disableFormControls));
        return;
    }
    groupBoxInput.Enabled = false;
    groupBoxOutput.Enabled = false;
    btnGen.Enabled = false;
    btnReset.Enabled = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:20:10.543

为确保您在 UI 线程上同步执行代码，请`Invoke`使用`BeginInvoke`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:23:05.080

您在这里有两个选择，因为您不能从非 UI 线程修改 winform UI 控件

1.  您可以将启用/禁用 UI 代码移回 UI 线程。在开始任务之前，禁用 UI 线程中的控件，并在任务完成时使用调度程序在 UI 线程中重新启用它们。

2.  您可以使用数据绑定将这些控件的启用状态绑定到一些您可以从任何线程自由修改的非 UI 对象。

# mysql - 自动增量不变

> ID：11580153
> 
> 赞同：2
> 
> 时间：2012-07-20T13:16:47.517
> 
> 标签：mysql

我正在尝试更改自动增量值以使其从特定数字开始：

```
ALTER TABLE batchinfo AUTO_INCREMENT = 20000; 
```

但是当我查询记录时，旧的编号 (1,2...) 仍然存在，尽管该语句似乎成功了。我正在使用 MySQL 工作台。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:19:32.287

更改`AUTO_INCREMENT`不会更改过去生成的值，它只会设置*下一个*生成的值。如果要更改过去的值，则需要执行`UPDATE`. 例如，像这样：

```
UPDATE batchinfo SET id = id + 19999; 
```

**请注意**，您没有任何其他表引用此列，否则它们的引用将无效。（除非这些引用被正确注明；只有 InnoDB 表支持外键。并且所有这些外键都必须定义`ON UPDATE CASCADE`为该命令具有预期效果。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:19:24.347

该查询执行**下一个** `AUTO_INCREMENT`值的更改。它不会更改现有值。

如果您已经有值 1、2、3、... 100，然后更改`AUTO_INCREMENT`为 20000，则下一个输入的值将不是 101，而是 20000。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:20:06.173

您的查询为从现在开始生成的自动增量值设置了一个新的起始值。它不会更新已经存储在表中的自动增量值。

# javascript - 如何通过javascript检查是否可以在浏览器中安装Flash

> ID：11580161
> 
> 赞同：4
> 
> 时间：2012-07-20T13:17:04.517
> 
> 标签：javascript, flash, browser

我想检查托管浏览器的平台是否支持 Flash。我不想检查它是否已安装（我知道该怎么做）。我只是想知道建议用户安装Flash插件是否合理。如果从不支持 Flash 的 iOS 设备查看页面，我不想显示“请安装 Flash”消息 - 我将显示 HTML5 版本的控件。

我知道一种解决方案是在用户代理中检查 iPad/iPhone/iPod 以检测苹果，但是是否有一些库不仅可以检查苹果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:18:41.883

然后不再显示“请安装 Flash”文本，而是显示 HTML5 版本的控件。将该 HTML5 代码放在“请安装 Flash”的位置。

* * *

此外，首先使用 HTML5 更容易（更像是可取的），然后在不支持的情况下回退到 Flash。像这样的东西：

```
<video src="html5_video_url">

    <!-- contents in here are only shown when video is not supported -->
    <embed src="flash_video_url"/>

</video> 
```

此外，UA 检测是不可取的，因为它可以被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:59:16.730

除了 iThings 之外，播放器的版本到浏览器和版本到系统的匹配，或者更确切地说是播放器的版本和它打算在其上运行的系统，还有几个问题。

困难如下：Linux 没有 64 位版本（调试器从未存在，播放器代号为 Square，afaik 只是 32 位应用程序的包装器）。

在免费系统上，供应商不会告诉您不允许安装哪些软件……从技术上讲，任何可以与 NPAPI（Netscape 插件 API）接口的应用程序都可以用作实现这些 API 的浏览器的插件。这些 API 有一个更新版本，Netscape 不想实现（实际上，除了 Google Chrome 之外没有人实现它们），该版本也称为 Pepper Plugin API。

不幸的是，似乎没有办法使用 JavaScript 来测试 NPAPI 的可用性。如果你有这个，你可以淘汰所有在技术上不能显示任何插件的浏览器，包括 Flash。我想必须有一些间接的方法来做到这一点，如果存在界面或类似的东西，就会出现一些浏览器功能，但目前想不出任何东西......当然，也有 ActiveX。所以，行动的过程是首先测试NPAPI，如果不是，那么，也许是AX，如果不是，那么当然，浏览器不可能运行Flash（不幸的是，它不能保证Flash确实会起作用）。

# c++ - const_cast：覆盖一个常量状态

> ID：11580169
> 
> 赞同：0
> 
> 时间：2012-07-20T13:17:39.333
> 
> 标签：c++, constants, undefined-behavior, const-cast

我正在尝试使用 const_cast 运算符并尝试覆盖作为参数传递的参数 o 的 const 状态：

```
void function1 (const Object *o)
{
    ...
    function2( const_cast < Object *> ( o ) ); //Exception in g++
}

void function2 (Object *o) {} 
```

但是覆盖 o 的 const 状态会在 g++（GNU/Linux）中引发异常，在 VS 2010（Win）中它运行良好......

有没有更可靠的方法来覆盖函数参数的 const 状态？

**更新：**

MSDN 写道：您不能使用 const_cast 运算符直接覆盖常量变量的常量状态 :-(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:26:15.020

> MSDN 写道：您不能使用 const_cast 运算符直接覆盖常量变量的常量状态 :-(。

`const_cast`允许您`const`从指针中删除说明符，但它不会影响值本身的“常量状态”。编译器可能决定将该值放入只读内存（嗯，它是 const！），然后尝试修改它，即使通过`const_cast`，也可能导致访问冲突。

这是一个代码片段：

```
static const int A = 1; // it's constant, it might appear on a read-only memory page
static int B = 2; // it's a regular variable

const int* pA = &A; // a const pointer
int* pB1 = &B; // a pointer
const int* pB2 = &B; // a const pointer to regular variable

*pA = 0; // Compiler error, we are not allowed to modify const
*const_cast<int*>(pA) = 1; // Runtime error, although const specifier is stripped from the variable, it is still on read-only memory and is not available for updates
*pB1 = 2; // OK
*pB2 = 3; // Compiler error, we are not allowed to modify const
*const_cast<int*>(pB2) = 4; // OK, we stripped const specifier and unlocked update, and the value is availalbe for update too because it is a regular variable 
```

也就是说，`const_cast`在编译期间删除 const 说明符，但是改变底层内存的访问模式并不是它的目的、权限或设计。

# jquery - jquery中的会话处理

> ID：11580172
> 
> 赞同：11
> 
> 时间：2012-07-20T13:18:04.240
> 
> 标签：jquery

我正在使用以下代码将值存储在 jQuery 中的会话对象中，但我收到错误 $.session function is not a function。

我还从 githhub 站点添加了插件“jquery.session.js”，但它不起作用。请让我帮忙看看有什么问题

```
 // To Store
 $(function() {
      $.session("myVar", "value");
 });

 // To Read
$(function() {
      alert( $.session("myVar") );
}); 
```

如果还有其他方法可以做到这一点......那么也告诉我......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T13:22:08.830

假设您指的是[这个插件](https://github.com/AlexChittock/JQuery-Session-Plugin)，您的代码应该是：

```
// To Store
$(function() {
    $.session.set("myVar", "value");
});

// To Read
$(function() {
    alert($.session.get("myVar"));
}); 
```

在使用插件之前，请记住*阅读其文档*以了解如何使用它。在这种情况下，可以在`README.markdown`文件中找到一个使用示例，该文件显示在项目页面上。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-04T16:21:11.047

在我看来，你不应该加载和使用你不需要的插件。这个特殊的 jQuery 插件并没有给你任何东西，因为直接使用 JavaScript`sessionStorage`对象的复杂程度完全相同。该插件也不提供与其他 jQuery 功能交互的更简单的方法。此外，使用插件的做法不利于深入理解某些东西是如何工作的。sessionStorage 只有在理解的情况下才应该使用。如果它理解了，那么使用 jQuery 插件实际上是更多的努力。

考虑`sessionStorage`直接使用： [https ://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Storage#sessionStorage](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Storage#sessionStorage)

# asp.net-mvc - ASP.NET MVC 如何避免直接调用 URL

> ID：11580175
> 
> 赞同：2
> 
> 时间：2012-07-20T13:18:18.247
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我的控制器中有一个执行删除操作的操作方法：

```
private ActionResult Delete(int id)
{           
     if (delete(id))
     {
          return Content("success");
     } 
     else 
     {
          return Content("something went wrong!");
     }

} 
```

我以这种方式使用 jQuery ajax 从我的视图中调用它：

```
jQuery('#NotificationArea').load('/MyController/Delete/5'); 
```

为此，我需要在 global.asax 中注册控制器操作：

```
routes.MapRoute(
   "Delete",
   "MyController/Delete/{id}",
   new { controller = "MyController", action = "Delete" }
); 
```

但我意识到这是危险的，因为每个人都可以直接从浏览器调用此操作并更改 id 以删除不同的元素：

```
myDomain.com/MyController/Delete/20 
```

如何避免这种潜在的安全问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:30:38.780

一种选择是在删除函数之上使用 [HttpPost] 属性。这样，只有当您加载的页面发布该数据并直接点击该网址不起作用时，它才会起作用。

您还可以在页面上放置一些内容，以便只有来自同一页面的帖子才有效。一些属性。让我回复你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:35:21.607

您基本上可以使用 AcceptVerbs 属性装饰您的 Delete 操作方法。您可以阅读这篇[文章](http://stephenwalther.com/archive/2009/01/21/asp-net-mvc-tip-46-ndash-donrsquot-use-delete-links-because.aspx)以获得更多详细信息。

# sql - 触发器中的光标

> ID：11580177
> 
> 赞同：0
> 
> 时间：2012-07-20T13:18:26.413
> 
> 标签：sql, oracle, triggers, plsql, cursor

我有一个现有的表`postn_matrix`，其中包含员工列表和他们的人数。在组织中的职位。

每当添加或删除用户的位置时，相应的计数都会通过此触发器反映在表中（VIA UPDATE）

现在，如果有一个新用户，他将没有条目`postn_matrix`，所以我必须为他/她插入一条新记录（VIA INSERT）。这需要从 BASE TABLE 中引入。

更新似乎工作正常，但我无法将新用户引入表中。

我一直在尝试用光标处理这种情况。但它还没有任何帮助。我希望一些专家可以向我展示光明.. :)。除了使用光标之外的任何其他建议将不胜感激

```
CREATE OR REPLACE TRIGGER TRIG1
BEFORE INSERT OR DELETE ON (BASETABLE)
FOR EACH ROW
DECLARE
  cursor c1 is
  select person_id 
  from postn_matrix;

  v_temp varchar2(15);
BEGIN
  IF INSERTING THEN
    open c1;    
    LOOP
      fetch c1 into v_temp;

      if v_temp!=:new.person_id THEN
        insert into POSTN_MATRIX (PERSON_ID)
        VALUES (:new.PERSON_ID);
      else
        UPDATE POSTN_MATRIX
        //this is working fine ;

      END IF;
    end loop;
    close c1;

END
/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:43:59.007

`pstn_matrix`由于循环（缺少退出子句-希望您刚刚丢失了将其转换为问题），您将尝试为游标返回的*每条*记录插入一条记录，无论`:new.person_id`是否有任何匹配; 如果有匹配，你也会做`update`. 这可能不是您想要的，并且您可能会遇到约束违规等情况。您也没有设置您的计数器字段 - 如果该字段不可为空，则将出错。但是你还没有说你得到了什么错误，如果有的话。

如果您必须通过触发器执行此操作，那么您可以检查新人是否有一行：

```
DECLARE
  v_temp postn_matrix.person_id%TYPE;
BEGIN
  IF INSERTING THEN
    select max(person_id) into v_temp
    from postn_matrix
    where person_id = :new.person_id;

    if v_temp is null then
      -- no record found, so insert one
      insert into postn_matrix (person_id, position_count)
      values (:new.person_id, 1);
    else
      -- record exists, so update
      update postn_matrix ...
    end if;
  ... 
```

...或使用[`merge`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm).

但我不喜欢这个模型，而且你正在设置潜在的数据差异与对基表的并发修改。试图保持这样的计数并不一定像看起来那么简单。

我通常更愿意将此作为视图，它始终是最新的，并且不需要使事情复杂化的触发器：

```
create view postn_matrix as
  select person_id, count(*)
  from basetable
  group by person_id; 
```

当然，我可能会误解或过度简化您的基表的功能和您的需求`postn_matrix`。即使作为一种观点，它似乎也有点微不足道。例如，如果您有单独`person`的`person_position`表格，那么您可以添加一个外部联接来查看没有职位的人：

```
create view postn_matrix as
  select p.person_id, count(pp.position_id)
  from person p
  left join person_position pp on pp.person_id = p.person_id
  group by p.person_id; 
```

# linux-kernel - linux系统调用中的参数传递

> ID：11580178
> 
> 赞同：2
> 
> 时间：2012-07-20T13:18:27.127
> 
> 标签：linux-kernel, system-calls, kernel

来自 Robert Love 的书，（在系统调用实现中）

> 不知何故，用户空间必须在陷阱期间将参数传递给内核。最简单的方法是通过传递系统调用号的相同方式：参数存储在寄存器中。在 x86-32 上，寄存器 ebx、ecx、edx、esi 和 edi 按顺序包含前五个参数。在不太可能出现六个或更多参数的情况下，使用单个寄存器来保存指向 user-存储所有参数的空间。

但是`asymlinkage`为每个系统调用加上前缀，这些系统调用期望参数位于系统堆栈中。还有当模式切换发生时，如何将参数复制到内核堆栈中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:39:46.327

参数由系统调用粘合逻辑放置到堆栈上。所有系统调用都是通过一个中断陷阱进行的（我相信 x86 上的 int 0x80）。此中断处理程序的内核代码完成了将参数放入堆栈以供系统调用处理程序使用的必要工作。

查看此常见问题解答以回答这个问题： http: [//kernelnewbies.org/FAQ/asmlinkage](http://kernelnewbies.org/FAQ/asmlinkage)

# java - 防止 java 程序的两个实例在 CMC 中同时运行

> ID：11580180
> 
> 赞同：0
> 
> 时间：2012-07-20T13:18:28.643
> 
> 标签：java

我在 CMC 中安排了一个 java 程序，但我不希望该程序的两个实例同时运行，我该如何防止呢？是否可以通过 CMC 配置来实现这一点？

同样使用 java 我无法确定程序的实例是否正在运行。

谢谢

# wcf - WCF TCP 会话在 PERCALL 服务中打开？

> ID：11580188
> 
> 赞同：0
> 
> 时间：2012-07-20T13:19:00.670
> 
> 标签：wcf, service, tcp

我遇到的问题是，当我从客户端调用服务时，没有关闭或处置客户端，服务在（几乎）相同数量的调用后没有响应。

合同设置为

```
[ServiceContract(SessionMode = SessionMode.Allowed)] 
```

方法设置为

```
[OperationContract(IsOneWay = true)] 
```

该服务设置为

```
[ServiceLocatorBehavior]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Single)] 
```

TCP端点的“网络会话”是否有可能保持活动状态，即使服务是PERCALL（将被释放，而不是像会话一样重用）和方法ISONEWAY？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T22:11:57.270

由于“失败”，客户没有被处置。处理客户端后，服务确实运行正常！

# unit-testing - 单元测试运行期间的装配位置

> ID：11580189
> 
> 赞同：1
> 
> 时间：2012-07-20T13:19:07.843
> 
> 标签：unit-testing, resharper

我希望在 mstest 运行时更改我的装配位置。如果我使用 Visual Studio 运行我的 mstest 单元测试，它会在我的项目文件夹的子文件夹中运行。但是如果我使用 resharper 运行我的 mstest 单元测试，this.GetType().Module.Assembly.Location 的调用会显示 C:/temp/somewhere。

如何更改 resharper 行为？我已经尝试更改 ReSharper -> 选项 -> 工具 -> UnitTesting -> 运行测试。但它没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:38:47.273

只需取消选中`"Shadow-copy assemblies being tested"`.
测试将从您在`"Run tests from"`选项中选择的位置运行。

# alchemyapi - AlchemyAPI setCustomParameters 的使用

> ID：11580192
> 
> 赞同：0
> 
> 时间：2012-07-20T13:19:16.020
> 
> 标签：alchemyapi

我正在尝试[使用 Alchemy API](http://www.alchemyapi.com/)来测试情绪分析。

我能够运行基本示例，但是我没有得到确切`setCustomParameters`使用方法的位置。这个方法的完整包名是

```
com.alchemyapi.api.AlchemyAPI_Params.setCustomParameters` 
```

用于设置参数。例如：

```
AlchemyAPI_TextParams conceptParams = new AlchemyAPI_TextParams();
conceptParams.setCustomParameters(?????) 
```

我无法获得此 API 的任何文档。

如果有人已经使用过这个 API，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:54:38.737

我在 AlchemyAPI 工作。

该`setCustomParameters`方法用于调整 AlchemyAPI 中未记录的或客户特定的参数。

正常使用 SDK 时无需调用该方法。

所有重要的功能都在 SDK（ 、 等）中明确公开`setOutputMode`，`setSourceText`并记录在[http://www.alchemyapi.com/api/](http://www.alchemyapi.com/api/)。

（如果您需要直接帮助，请在 alchemyapi.com 上发送电子邮件支持）。

# security - 尽管设置了标头，但不允许 CORS 请求

> ID：11580200
> 
> 赞同：2
> 
> 时间：2012-07-20T13:19:28.550
> 
> 标签：security, http, cross-domain, cors

尝试执行 XHR 请求时出现以下错误。我已经设置了 CORS 响应标头，但显然出了点问题。任何人都可以发现错误吗？

> XMLHttpRequest 无法加载[http://domain.dev/path](http://domain.dev/path)。Access-Control-Allow-Origin 不允许来源[http://mobile.dev 。](http://mobile.dev)

**预检请求标头（选项）**

这是一个飞行前请求，用于验证请求。

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:origin, x-pre-process, x-requested-with, x-client, x-client-version, accept, x-session
Access-Control-Request-Method:GET
Cache-Control:max-age=0
Connection:keep-alive
Host:my-app.dev
Origin:http://mobile.dev
Pragma:no-cache
Referer:http://mobile.dev/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.2 (KHTML, like Gecko) Chrome/22.0.1211.0 Safari/537.2 
```

**响应标头**

这是服务器对飞行前请求的响应。

```
Access-Control-Allow-Headers:origin, x-pre-process, x-requested-with, x-client, x-client-version, accept, x-session
Access-Control-Allow-Methods:GET, POST, PUT, PATCH, DELETE
Access-Control-Allow-Origin:http://mobile.dev
Access-Control-Max-Age:3600
Cache-Control:max-age=0, private, must-revalidate
Connection:close
Content-Type:text/html; charset=utf-8
ETag:"7215ee9c7d9dc229d2921a40e899ec5f"
X-Request-Id:3fca5f24077bcbd1351d552edf311f82
X-Runtime:0.014551 
```

**真实请求头**

这是真正的请求，由于上面引用的错误，浏览器取消了该请求。

```
Accept:application/json, text/javascript, */*; q=0.01
Cache-Control:no-cache
Origin:http://mobile.dev
Pragma:no-cache
Referer:http://mobile.dev/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.2 (KHTML, like Gecko) Chrome/22.0.1211.0 Safari/537.2
X-Client:mobile
X-Client-Version:1.6
X-Pre-Process:underscore
X-Requested-With:XMLHttpRequest
X-Session:j9y01yw33txmdbcz1ao258uy7bzjlm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:48:36.863

似乎有必要正确处理飞行前的 OPTIONS 请求，但不足以使跨站点资源请求正常工作。

在 OPTIONS 请求返回满意的标头后，对同一 URL 的任何后续请求的所有响应也必须具有必要的“Access-Control-Allow-Origin”标头，否则浏览器会吞下它们，甚至不会显示在调试器窗口中。

所以看起来浏览器因为 OPTIONS 响应中的一些问题而取消了请求，但实际上，浏览器正在查看来自真实请求的响应标头，然后拒绝它们。

（从我自己的类似问题中复制的答案[Access-Control-Allow-Origin header not working - 我做错了什么？](https://stackoverflow.com/questions/11933626/access-control-allow-origin-header-not-working-what-am-i-doing-wrong)以防万一）

# deployment - JBoss 7 上的 Java EE 6 + CDI - 可以像 Seam 那样进行热部署吗？

> ID：11580201
> 
> 赞同：4
> 
> 时间：2012-07-20T13:19:30.127
> 
> 标签：deployment, java-ee-6, jboss7.x, cdi, seam2

我在 JBoss5/6 上使用 Seam 2 做了几个项目，并且喜欢某些 java 类（通常是 GUI 处理程序和 util 类）可以放在一个特殊的 src 文件夹中并在保存文件和一个特殊的类加载器后通过特殊的类加载器热替换的特性。爆炸目标之后自动运行。

现在我喜欢切换到 Java EE 6 + CDI 并使用 JBoss7，所以我开始使用 eclipse Juno 中的 JBoss 工具生成的基于 maven 的 Java EE Web 项目。如果我只更改 xhtml 文件，我可以在自动重新发布后看到更改，但对于 java 文件的更改则不然。

有没有办法在我的新项目设置中获得与以前使用 Seam 2 类似的行为，而无需使用 JRebel 等 3rd 方工具？

* * *

编辑 2012/07/23：

我为这个问题添加了另一点——对于像 JBoss7 这样的新容器，应用程序的重启似乎很快——那么是否有必要尝试集成代码替换工具并希望获得最好的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:47:46.573

大约一年前，当我针对该堆栈（Java EE 6 / CDI / JBoss AS 6）[评估 JRebel时，即使该工具也无法应对 CDI。](http://zeroturnaround.com/forum/topic.php?id=1393)在过去的 12 个月中，这种情况可能有所改善，但总的来说：

我不知道 JBoss AS 上的 Java EE 6 有任何高级热部署支持，无论是否有工具支持。

（如果你读到[最后](http://zeroturnaround.com/forum/topic.php?id=1393)，情况似乎对 GF 更好，但这超出了你的问题范围）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:33:31.927

看看[JRebel](http://www.jrebel.com)。CDI 零件在不断改进，虽然还有很长的路要走，但它可以节省很多时间。如果您发现 JRebel 无法交付的情况，请在论坛上报告，开发人员将尽最大努力改善体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:42:08.660

关于第二个问题，即使容器启动不花时间，比如 Tomcat 或 Jetty，应用程序的部署时间也不会变得更快，并且可能仍然需要相当长的时间。

所以答案是——是的——代码替换工具仍然适用于轻量级容器。

# .net - 将 Microsoft Access 表单放入 OLE 容器

> ID：11580204
> 
> 赞同：0
> 
> 时间：2012-07-20T13:19:34.003
> 
> 标签：.net, interop, ole

简单的问题，在 Visual Basic 6 中，您有 OLE 容器。

是否可以将 Microsoft Access 窗体放入 Visual Basic 6 OLE 容器中？这是[我第一个问题](https://stackoverflow.com/questions/11564626/is-it-possible-to-host-a-microsoft-access-form-inside-a-net-form)的后续。我已经弄清楚如何在 .Net windows 窗体上使用 OLE 容器，所以现在我想将 Microsoft Form 放入 OLE 容器中。

这是一种可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:25:42.260

否。Access 不实现 ActiveX 文档/OLE 可插入接口。

您可以尝试将 Access 作为隐藏的进程外 COM 服务器运行并提供您自己的 UI，但模仿界面并非易事。

# c# - 为什么 Convert.ToInt32(null) 在 c# 中返回 0

> ID：11580208
> 
> 赞同：38
> 
> 时间：2012-07-20T13:19:51.797
> 
> 标签：c#, null

我今天刚遇到这个，如果你将 null 转换为 int32

```
Convert.ToInt32(null) 
```

它返回 0

我期待一个 InvalidCastException ......

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-20T13:22:42.333

> 知道为什么会这样吗？

因为那是记录在案的行为？无论是[`Convert.ToInt32(object)`](http://msdn.microsoft.com/en-us/library/23511zys.aspx)还是[`Convert.ToInt32(string)`](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)，文档都非常清楚地说明：

（在返回值下）

> 一个 32 位有符号整数，等于 value 中的数字，如果 value 为 null，则为 0（零）。

或者

> 等效于 value 的 32 位有符号整数，如果 value 为空，则为零。

与往常一样，如果现实与期望不符，您应该做的第一件事是检查您的期望是否与记录的行为相符。

就我个人而言，我并不完全认同 Gavin 所展示的“与 VB6 的兼容性”论点。我意识到它来自微软，这很可能是它表现得那样的真正原因——但我认为这不是表现得那样的*好*理由。有很多 VB 特定的转换方法——所以如果框架设计者真的认为返回零是一个不理想的结果，他们应该做他们认为最好的任何事情，并提供一个 VB6 兼容的转换供 VB6 程序员使用。

显然，一旦在 .NET 1.0 中定义了该行为，就不能为以后的版本更改它——但这与说它必须以与 VB6 相同的方式运行是不同的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-20T13:22:48.743

请参阅[http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)

**编辑**

上面的 URL 会自动恢复到最新的 Framework 版本，因为下面的文本是专门在版本 4 上发布的。请参阅下面显示文本的修改后的 URL。

[http://msdn.microsoft.com/en-us/library/sf1aw27b(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/sf1aw27b(v=vs.100).aspx)

它解释说：

> 如果字符串为空，则 Convert 类中的所有字符串到数字的转换方法都返回零。这种行为的最初动机是他们将为从 Visual Basic 6 迁移到 Visual Basic .NET 的程序员提供一组转换方法，以反映现有 Visual Basic 6 转换方法的行为。假设是 C# 程序员更愿意使用转换运算符，而 Visual Basic 传统上使用转换方法进行类型转换。
> 
> 传统上，.NET Framework 试图保持版本之间的高度兼容性。实际上，这意味着，在没有非常令人信服的理由的情况下，一旦以特定方式实现了方法并且该实现公开（如在字符串参数为 null 时返回 0 的方法中），它就无法更改，因为会破坏依赖于既定行为的代码。这使您提出的两个解决方案都非常成问题。在第一种情况下，对于可能依赖为空字符串返回零的方法的客户，抛出异常会更改方法的实现。在第二种情况下，重要的是要记住 .NET Framework 在重载决议中不考虑返回类型。这意味着您的方法必须替换现有的 Convert。
> 
> 在 Convert 类中的字符串到数字的转换方法的情况下，这种对兼容性的关注更加强烈，因为 Parse 是为 .NET 支持的每种基本数字类型执行字符串到数字的转换的推荐方法框架，并且每个 Parse 方法的行为与其对应的 Convert 方法不同。与 Convert 类中的字符串到数字的转换方法（如果要转换的字符串为 null 时返回零）不同，每个 Parse 方法都会引发 ArgumentNullException，这是您争论的行为。数字 Parse 方法的重载，例如 Int32.Parse 和 Double.Parse，还具有允许对解析操作进行更细粒度控制的优点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T13:21:26.187

因为 Int32 的默认值为零。Int32 不能为 null，因为它们是值类型，而不是引用类型，因此您将获得默认值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-20T13:21:55.383

因为这[就是记录](http://msdn.microsoft.com/en-us/library/23511zys.aspx)它将返回的内容。也许你在想`(int)null`，这将是一个`NullReferenceException`（不是`InvalidCastException`；我不知道为什么）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-20T13:24:24.260

因为这是在 Convert 类中编写方法的方式。如果参数值是`null`它只是返回 0。

```
public static int ToInt32(object value)
{
    if (value == null)
    {
        return 0;
    }
    else
    {
        return ((IConvertible)value).ToInt32(null);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-25T11:15:57.657

为了让您拥有 InvalidCastException，您必须进行*非受控*演员表。

例如：

```
int i = (int)null; 
```

如果你执行它，应该引发异常。

指某东西的用途

```
Convert.ToInt32(var) 
```

当您不信任*var*中的值时很有用，例如从数据库中读取。

# ios - 将行添加到从 Storyboard 构建的 UITableView

> ID：11580210
> 
> 赞同：0
> 
> 时间：2012-07-20T13:19:54.563
> 
> 标签：ios, uitableview, uikit

我有一个`UITableView`从 Storyboard 构建的静态效果，效果很好。不过，我想从用户定义的文件中以编程方式填充第一个类别

简单地说，我想遍历数组中的所有字符串并将它们添加为第一类行的单元格。对于第二类，我在情节提要中定义了一系列稍微复杂的单元格（包含许多标签、文本字段、按钮和其他控件），我不想在代码中重新创建它们。

据我了解，`UITableView`从情节提要构建的默认行为是将`nib`文件用作隐式`datasource`. 如果我使用自定义类 as `datasource`，我的第二部分不起作用。我想到了两种可能的方法来解决这个问题：

*   填写我的第一个类别`datasource`并将其余部分委托给`nib`文件。这可能吗？是否有一些方法可以以编程方式要求`nib`填写我的`UITableView`？
*   将我的故事板构建的单元格导出到代码中，然后将此代码粘贴到我的`datasource`. 这种方法的缺点是使我的第二类更难修改。

这两个选项之一是否可行？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:26:17.737

使用 Storyboard 时有两种表格视图：

*   静止的
*   动态的

您目前使用的是前者。您可以在 Storyboard 中定义所有内容，并且代码很少。

但是您需要更改为后者。

您仍然可以将`UITableViewCell`s 保留在 Storyboard 中；无需在代码中执行此操作（尽管如果它使事情变得更容易，您可以这样做）。您可以使用“重用标识符”引用模板单元格。

否则你几乎得到它。您需要编写代码来实现数据源和（可能）更多表视图委托的方法。

这是一种从静态到动态的巧妙切换。我一直想提高雷达，因为我确信 Xcode 可以让它更容易做......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:30:18.870

我会使用动态原型单元。然后，我会设置`ViewController`as the`delegate`和`dataSource`. 然后，我将创建一个自定义子类，`UITableViewCell`并将第二部分的元素连接到`IBOutlet`custom 中的 s `UITableViewCell`。

如果第一部分不能用一种通用单元类型完成，我也会`UITableViewCell`为该部分创建一个自定义子类。

然后我会使用该`cellForRowAtIndexPath:`方法来设置单元格，其中包含我想要的信息。因此，如果我使用的第一部分`FirstSectionCell`和我的第二部分用作我的`SecondSectionCell`自定义子类，则如下所示：`UITableViewCell``cellForRowAtIndexPath:`

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if(indexPath.section==0)
    {
        FirstSectionCell *firstCell = [tableView dequeueReusableCellWithIdentifier:@"First Cell Prototype"];

        //Set up the first cell.

        return firstCell;
    } 
    else if(indexPath.section ==1)
    {
        SecondSectionCell *secondCell = [tableView dequeueReusableCellWithIdentifier:@"Second Cell Ptototype"];

        //Set up second cell.
        secondCell.someLabel.text = @"whatever";
        //etc.

        return secondCell;
    }
    else 
    {
        //if you have another section handle it here.
    }
} 
```

# beanshell - beanshell 初学者-如何检查 variable.toString 中是否不包含任何值？

> ID：11580217
> 
> 赞同：3
> 
> 时间：2012-07-20T13:20:07.250
> 
> 标签：beanshell

在一个 beanshell 程序中，我在一个变量中得到一个值。现在，如果没有为该变量获得值，那么我想将其设置为“缺失”

在一个非常旧的 Beanshell 版本中，我使用如下所示的命令来执行此操作——

```
 contact.toString() != '' 
```

但是我更新了 Beanshell 库，现在我收到一条错误消息，指出我不能在第一个撇号之后放置第二个撇号（即 '' 是错误的）。

如何在 Beanshell 中正确检查上述情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T01:27:35.870

Java 语言中使用撇号来表示字符。你不能有一个 '' char 值。然而，早期版本的 beanshell 可能一直在对空字符串进行一些隐式转换，在升级后不知何故被破坏。

使用 toString() 检查有效值对我来说似乎有点浪费，但如果 'contact' 不为空，但在 toString() 表示中仍然没有值，则检查字符串值如下：

```
if(contact != null) {
   contactStr = contact.toString();
   if(contactStr != null @and contactStr.length() > 0) {
     /// value is something other than null or ""
   }
} 
```

而 toString() 是唯一的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T12:49:27.233

如果要检查是否`contact`已定义，请执行以下操作：

> 如果（联系 == 无效）

[http://www.beanshell.org/manual/specialvarsvalues.html](http://www.beanshell.org/manual/specialvarsvalues.html)

# javascript - 将金额分配给不同的字段javascript

> ID：11580220
> 
> 赞同：0
> 
> 时间：2012-07-20T13:20:15.750
> 
> 标签：javascript, field, allocation

我有一个问题，其实至少我不知道怎么做。我有几个字段显示不同的数量，每个位置由一个 id 示例标识：p1、p2、p3 等......

因此，此字段包含十进制形式的金额。

我想做什么。因为实际上我将被引导分配在一个存款字段中输入的金额。

就是说只要存款金额>0那么我就分散到各个帖子

例如，假设我有

```
 300 = p1, p2 and p3 = 120 = 50
and I have a deposit for an amount of 450 Euros, so I would
p1 = 0 and o1 fields (fields that is revealing what has been imputed) 300
p2 = 0 and the fields 120 o2
p3 = 20 fields and o3 = 30 
```

我实际上尝试了许多条件，但我纠结了刷子。

这就是它给出的：

```
<script type="text/javascript">
  function ventilation()
 {
 var montantacompte = document.getElementById("montantacompte").value;
 var p1             = document.getElementById("p1").value;
 var p2             = document.getElementById("p2").value;  
 var p3             = document.getElementById("p3").value;  
 var p4             = document.getElementById("p4").value;   
 var p5             = document.getElementById("p5").value;      
 var p7             = document.getElementById("p7").value;                  
 var p8             = document.getElementById("p8").value;   
 var p9             = document.getElementById("p9").value;   
 var p10            = document.getElementById("p10").value; 
 var p11            = document.getElementById("p11").value;   
 var p12            = document.getElementById("p12").value;  
 var p13            = document.getElementById("p13").value;

    if(p1>0 &&p1-montantacompte>=0)
     {

         f1=p1-montantacompte;
         document.getElementById('p1').value=f1;
         document.getElementById('o1').value=Math.round(montantacompte*100)/100;
     }
        if(p1>0 &&p1-montantacompte<=(p1+p2))
     {
         reste1=montantacompte-p1;
         impute=p1;
         impute2=reste1;
         f1=m1-impute;
         document.getElementById('p1').value=f1;
         document.getElementById('o1').value=Math.round(impute*100)/100;
         document.getElementById('o2').value=Math.round(impute2*100)/100;

     }

 }
</script> 
```

我也尝试过循环但我也纠结刷，我对javascript的小知识无济于事。

```
<script type="text/javascript">
  function ventilation()
 {
 var reste          = document.getElementById("montantacompte").value;
 var ac             = document.getElementById("montantacompte").value;
 var p1             = document.getElementById("p1").value;
 var p2             = document.getElementById("p2").value;  
 var p3             = document.getElementById("p3").value;  
 var p4             = document.getElementById("p4").value;   
 var p5             = document.getElementById("p5").value;      
 var p7             = document.getElementById("p7").value;                  
 var p8             = document.getElementById("p8").value;   
 var p9             = document.getElementById("p9").value;   
 var p10            = document.getElementById("p10").value; 
 var p11            = document.getElementById("p11").value;   
 var p12            = document.getElementById("p12").value;  
 var p13            = document.getElementById("p13").value;
 var c              = 1;
 while(reste>0 && c<13)
 {
     if(reste> 'p'+c)
     {
         reste = 'p'+c -  ac;
         document.getElementById('p'+c).value=Math.round(honoraires*100)/100;
         print reste;
     }
 }

</script> 
```

突然，我不知道因为每次我都没有到达更多的情况下。

提前感谢所有可以帮助我进步的人。

您忠诚的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:54:15.483

据我了解此问题，用户输入付款金额，然后将此金额应用于订单上的订单项。

输入：17100

第 1 项： `<input id="p1" class="items" value="16000.00 €"/>`

第 2 项： `<input id="p1" class="items" value="535.00 €"/>`

第 3 项： `<input id="p1" class="items" value="955.00 €"/>`

```
 function getItems()
 {
 var items = new Array();
 var itemCount = document.getElementsByClassName("items");

 for(var i = 0; i < itemCount.length; i++)
 {
     items[i] = document.getElementById("p" + (i+1)).value;
 }

 return items;
 }

 function setItems(items,payAmt)
 {
   document.getElementById("inputField").value = payAmt;
   for(var i = 0; i < items.length; i++)
   {
      document.getElementById("p" + (i+1)).value = items[i];
   }
 }

 function itemSum(items)
 {
var sum = 0;

for(var i=0; i < items.length; i++)
{
    sum = items[i] + sum;
}

return sum;
 }

 function payment(inputElm)
 {
 var items = getItems();
 var payAmt = document.getElementById("inputField").value;
 var i = 0;
 var sum = itemSum(items);

 while(payAmt != 0 && sum != 0)
 {
     var temp = items[i] - payAmt;
     if(temp > 0)
     {
         items[i] = temp;
         break;
     }
     else if(temp < 0)
     {
         items[i] = 0;
         payAmt = temp*-1;
      }
     i++;
     sum = itemSum(items);
 }

  setItems(items, payAmt);
 } 
```

如果我正确理解您的问题，我认为应该这样做。您需要确保 ID 匹配并且这是未经测试的，因此其中很可能会出现一两个错误。

# model-view-controller - 模型应该与外部服务交互吗？

> ID：11580228
> 
> 赞同：1
> 
> 时间：2012-07-20T13:21:27.720
> 
> 标签：model-view-controller

**示例 1：**

模型类“新闻”以两种不同的语言存储其文本（字段：en_text、jp_text）。通常它只有一种语言的文本。我应该使用 Google Translate API 翻译回调 before_save 中的文本，还是应该将此代码放在控制器中？

**示例 2**

模型类“付款”。当付款将要结算时，系统必须通知外部服务有关付款的成功结算。这段代码应该放在哪里，模型还是控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:50:12.120

该模型通常用于“获取”或“设置”数据，因此从技术上讲，如果您的外部服务提供“获取”或“设置”数据的服务，那么可以。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-22T18:29:40.073

您的模型应该是您应用程序的整个业务逻辑。您的应用程序的要求意味着您应该翻译您的文本或在付款时通知某些服务，不是吗？这意味着你应该把它写在你的模型中。

控制器是一个实体，它处理一些业务逻辑操作的请求参数。控制器不应包含此类部件。

据我所知，您目前正在使用 Rails，因此请查看以下链接（此模式对非 Ruby 程序员也有帮助）：

[http://api.rubyonrails.org/classes/ActiveResource/Base.html](http://api.rubyonrails.org/classes/ActiveResource/Base.html)

[http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model) - 经典 :)

# ios - 收到的 APNS 推送通知不正确

> ID：11580230
> 
> 赞同：-1
> 
> 时间：2012-07-20T13:21:46.020
> 
> 标签：ios, push-notification, apple-push-notifications

我们公司有多个应用程序，当然都有不同的应用程序 ID。我们最近发现推送通知是从应用 X 发送到设备的，而实际上它是为应用 Y 发送的

用户打开应用 Y，我们的后端注册它的设备令牌。用户使用该应用程序并存在相同用户现在打开应用程序 X，后端也注册此设备。

现在推送消息被发送到应用程序 Y，用户收到此消息，但设备显示它好像它已被应用程序 X 接收。单击通知时，应用程序 X 将打开。

注意：所有应用程序都使用单独的数据库

我们检查了我们使用的 .pem 文件（我们向 apns 发送通知的后端是用 PHP 编写的），这些都很好。连接管理器也使用正确的证书正确地发送到 APNS。

这个问题的问题是什么，当然还有解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T22:21:03.013

您是否记得在与 APNS 通信的 .php 脚本结束时关闭与 APNS 服务器的连接？

只需将这一行放在最后：

```
fclose($fp); 
```

$fp 是您之前声明的连接，如下所示：

```
$fp = stream_socket_client(
    'ssl://gateway.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx); 
```

您遇到此问题的原因可能是因为来自其他应用程序的连接尚未关闭。当它们保持打开状态时，会从最后一个打开与服务器的连接的应用程序发送新通知。我的公司遇到了同样的问题，当我们在所有不同应用程序的 APNS 脚本结束时关闭连接时，问题就消失了。

请让我知道这是否对您有用。

# javascript - 搜索引擎可以读取外部 javascript 链接生成的链接吗？

> ID：11580231
> 
> 赞同：-1
> 
> 时间：2012-07-20T13:21:45.970
> 
> 标签：javascript

我发布了一个不清楚的问题，之前该问题被投票关闭并删除。我很抱歉，但作为一个新手，我不知道如何问，所以我决定再试一次，有一个记录在案的问题。

**请等待几分钟，然后再投票否决这个问题，我真的需要一个答案。如果您评论说这个问题很愚蠢，我会关闭它。**

在我的 header.php 中，我加载了一个 javascript 代码，该代码将来自外部站点的几个链接加载到我的站点上。

```
<script type="text/javascript">
    el="http://EXTERNALSITE.com/sc/out.php?s=MYSITESID"
    sl=new Array();  
    sh=new Array();  
    st=new Array();  
    thpm=new Array();  

    sn=new Array(); 
    ns=new Array();  
    sd=new Array();  
    th=new Array();  

    a="</a>";  
    af="<a target='_blank'";  
    ps="<img border='0' src=thumbs/";  

    function dw(n) {  
        document.write(n,"\n");  
    }

    function showLink(n,s,b){
        if (!s){
            s='anc'
        } 

        if (!b){b=''}  
        else {b="&b="+b}  

        ast = af + " class='" + s + "' href='" + el;  
        n=n-1; 

        if (sl[n]&&sl[n]!=""){  
            dw(ast+"&o="+sl[n]+b+"'>"+sn[n]+a)  
        }  
        else{
            dw(ast+b+"'>"+et+a)  
        } 
    }  
</script>

<script type="text/javascript" src="http://EXTERNALSITE.COM/js/MYSITEDID.js"></script> 
```

这是我用来显示链接的代码：

```
<script language="JavaScript"> showLink(1)</script> 
```

**问题是，搜索引擎可以读取这个脚本生成的链接吗？**

页面加载后，我的源代码中有这个：

```
<script language="JavaScript" type="text/javascript">  
    showLink(4);
</script>

<a rel="nofollow" target="_blank" class="anc" href="http://EXTERNALSITE.COM/sc/out.php?s=MYSITEID&amp;o=http%3A%2F%2Fwww.thelink.com">  
    The Link  
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:25:41.020

谷歌似乎[可以做到这一点](http://www.webmasterworld.com/google/4159807.htm)，尽管不能保证动态生成的链接将如何被处理以赋予 pagerank

# php - MYSQL IF 语句按类别重新排序

> ID：11580234
> 
> 赞同：1
> 
> 时间：2012-07-20T13:21:54.773
> 
> 标签：php, mysql, if-statement, sql-update, sql-order-by

我一直在尝试根据菜单结构的类别和订单 ID 对数据库中的表重新排序。

这就是我大致拥有的表结构

```
menuid menuname 订单 categoryid
--------------------------------------
1 第一项 1 1
2 第二项 2 1
3 第三项 1 2
4 第四项 2 2
```

我试过这种语法：

```
UPDATE yourtable SET id=IF(id=2, 3, 2) where id in(2,3) 
```

像这样：

```
UPDATE menu
SET order = IF(order = `3`, `2`, `3`)
WHERE order = `3` 
```

我收到此错误：

```
您的 SQL 语法有错误；检查与您对应的手册
 MySQL 服务器版本，用于在 'order = IF(order = `3`, `2`, `3`) 附近使用正确的语法
 WHERE order = `3`' 在第 2 行
```

解决方案代码：

```
UPDATE menu
SET `order` = case when `order` = 3 then 2 else 3 end
WHERE `order` = 3 AND section = 2 OR `order` = 2 AND section = 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:25:32.477

尝试

```
UPDATE menu
SET `order` = case when `order` = 3 
                   then 2 
                   else `order` 
              end 
```

顺便说一句`order`，是 MySQL 中的保留字。你必须用反引号来逃避它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:26:22.117

为什么不使用 CASE 表达式。你的 WHERE 没有意义

```
UPDATE menu 
SET order = case when order = `3` then `2` else `3` end 
```

# matlab - 如何强调球面上的某些区域

> ID：11580239
> 
> 赞同：4
> 
> 时间：2012-07-20T13:21:57.343
> 
> 标签：matlab, plot, 3d, transparency, geometry-surface

**介绍**

我试图强调球面上的某个区域，说这个区域应该被着色为不透明（alpha = 1.0），而球体的其他部分应该被着色为半透明（alpha = 0.5）。

**问题**

考虑`WAlpha(Data >= DummyValue) = 1.0`and `WAlpha(Data < DummyValue) = 0.5`，以下命令无法按预期工作：

```
surf(X, Y, Z, Data, 'AlphaData', WAlpha, 'FaceAlpha', 'interp'); 
```

它将所有未选择的区域绘制为完全透明的：

![错误的透明度](../Images/7a9b59e9d212a41be990810f8a23af72.png)

**笔记**

将“FaceAlpha”设置为标量值时我没有问题（即它不是我的图形卡的问题）：

```
surf(X, Y, Z, Data, 'AlphaData', WAlpha, 'FaceAlpha', 0.5); 
```

![处处半透明](../Images/be3954babfbde670af957ca3c976da0b.png)

**源代码**

这是我为重现该问题而创建的非常简短的虚拟代码的链接：[link](https://gist.github.com/3150662)

如果您对强调选定区域而不是使用透明度有任何其他想法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:01:05.217

这是快速测试：

```
%# surface data
Z = membrane;

%# alpha-transparency matrix
A = ones(size(Z))*0.3;          %# transparent by default
A(abs(Z)>0.5) = 1;              %# make certain region opaque

%# plot
figure('Renderer','opengl')
surf(Z, 'AlphaData',A, 'AlphaDataMapping','none', ...
    'FaceAlpha','interp', 'EdgeColor','none') 
```

结果：

![截屏](../Images/c795d4515ae5a2106ad6c65d0f10d480.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:00:17.807

哎呀，找到了……

需要更改对象的`Alim`属性，`axes`因为它在设置时设置*不正确*，而不是保留。所以命令是：`[min(WAlpha) max(WAlpha)]``AlphaData``[0 1]`

```
surf(X, Y, Z, Data, 'AlphaData', WAlpha, 'FaceAlpha', 'interp');
alim([0 1]); 
```

# java - Google App Engine - 错误 503_Service 不可用

> ID：11580240
> 
> 赞同：1
> 
> 时间：2012-07-20T13:21:59.140
> 
> 标签：java, eclipse, google-app-engine

我正在编写一个简单的 gae webapp，它应该通过表单向我发送电子邮件：

我已经编写了该 gae 代码：

索引.html：

```
<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <title>A form</title>
 </head>
 <body>
 <form action="/feedback" method="post">

  <!-- Simple text field -->
 <label for="name">Name </label>
 <input type="text" name="name"/>
 <br/>

  <!-- Email -->
 <label for="email">Email </label>
 <input type="email" name="email"/>
 <br/>

  <!-- Textarea -->
 <label for="description">Description </label>
 <textarea  name="description" cols="50" rows="5">Type your comment here</textarea>
 <br/>

<input type="submit" name="submit" value="Send Request" action="/feedback"/>
 </form>
 </body>
</html> 
```

web.xml

```
<servlet>
    <servlet-name>FeedbackServlet</servlet-name>
    <servlet-class>at.wunderapps.servlets.FeedbackServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>FeedbackServlet</servlet-name>
    <url-pattern>/feedback</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

小服务程序：

```
import java.io.IOException;
import java.util.Properties;

import javax.mail.Message;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class FeedbackServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String name = req.getParameter("name");
        String description = req.getParameter("description");
        String email = req.getParameter("email");
        Properties props = new Properties();
        Session session = Session.getDefaultInstance(props, null);

        String msgBody = name  + description + email + " :EMAIL";

        try {
            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress("apps@gmail.com",
                    "Es FUNKTIONIERT!!!"));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress("my.mail@mail.com", "Your name"));
            msg.setSubject("Bestellung");
            msg.setText(msgBody);
            Transport.send(msg);

        } catch (Exception e) {
            resp.setContentType("text/plain");
            resp.getWriter().println("Something went wrong. Please try again.");
            throw new RuntimeException(e);
        }

        resp.setContentType("text/plain");
        resp.getWriter().println(
                "Thanks you for your feedback. An Email has been send out.");
    }
} 
```

当我在做 localhost 我得到：

```
HTTP ERROR: 503

Problem accessing /. Reason:

    SERVICE_UNAVAILABLE 
```

我得到的例外是：

> java.lang.ClassNotFoundException: at.wunderapps.servlets
> 
> 严重：javax.servlet.ServletContext 日志：不可用 javax.servlet.UnavailableException：at.wunderapps.servlets
> 
> 20.07.2012 13:13:46 com.google.apphosting.utils.jetty.JettyLogger 警告警告：FeedbackServlet 失败：java.lang.NullPointerException 20.07.2012 13:13:46 com.google.apphosting.utils.jetty.JettyLogger 警告警告：上下文 com.google.appengine.tools.development.DevAppEngineWebAppContext@495c998a{/,C:\Users\Desktop\mailservice\war} java.lang.NullPointerException 启动失败

我想问题可能是 inde.html 找不到我的 servlet。但是为什么，因为 web.xml 似乎没问题？你能帮我么？

PS.：我在 Windows 7 上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:45:00.600

```
<servlet-class>at.wunderapps.servlets.FeedbackServlet</servlet-class> 
```

如果这是您的 servlet 的完全限定名称，那么 FeedbackServlet.java 文件的第一行应该是

```
package at.wunderapps.servlets; 
```

并且 FeedbackServlet.class 文件应位于

```
<yourWebAppRootFolder>/WEB-INF/classes/at/wunderapps/servlets/FeedbackServlet.class 
```

或者，如果您将 Eclipse 用于您的 IDE，那么只需将您的代码放入

```
<yourWebAppRootFolder>/src/at/wunderapps/servlets/FeedbackServlet.java 
```

# asp.net - 使用 DataReader 将数据加载到标签中，其中不确定查询结果中的总行数

> ID：11580241
> 
> 赞同：0
> 
> 时间：2012-07-20T13:22:04.533
> 
> 标签：asp.net, vb.net, sqldatareader

如果您不知道查询结果可能包含多少行，您将如何编写代码以从查询中读取数据并在单独的标签中显示每一行？如果您尝试使用 DataReader 读取太多行，当您尝试读取不存在的行上的列数据时，它会引发异常。我不确定如何编码。

```
If dr.HasRows Then
    dr.Read()
    LN2.Text = dr.Item("linenum").ToString
Else
    LN2.visible  = False         
End If 
```

此示例显示了我如何使用 DataReader 加载第二行。如果有两行数据，则此方法有效，但如果只有一行数据，则会引发异常。我最多有 12 行数据，但是我的实际查询结果可能包含 1 到 12 行数据之间的任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:00:15.217

该`Read`方法返回一个布尔值，指示下一行的读取是否成功。因此，您可以将代码更改为以下内容：

```
If dr.Read() Then
    LN2.Text = dr.Item("linenum").ToString
Else
    LN2.visible  = False         
End If 
```

但是，通常在这种情况下，在固定数量的标签中显示不同数量的数据行并不是最好的方法。例如，如果您改用单个`ListBox`控件，则所有加载代码都可以简化为以下内容：

```
While dr.Read()
    ListBox1.Items.Add(dr.Item("linenum").ToString())
End While 
```

如果您需要为每一行显示多列数据，我建议使用`ListView`控件（`View`属性设置为`Details`）或`DataGridView`控件。

# php - 如何使用正则表达式获取字符串中子字符串的计数？

> ID：11580244
> 
> 赞同：2
> 
> 时间：2012-07-20T13:22:14.033
> 
> 标签：php

我有一个字符串和子字符串的格式，例如“Hello world！%1, abcdef%2, gfgf%14”，即子字符串的格式是'%'+digit (0...infinity)，我需要得到任何字符串中此子字符串的计数。我知道 substring_count 函数，但是对于这个函数，我需要知道一个定义的行。那么，请告诉我，我怎样才能使用正则表达式或其他任何东西来计数？

编辑：

此代码有效：

```
$r = "Hello world!%1, abcdef%2, gfgf%14";

$matches = array();
preg_match_all('/\%\d+/', $r, $matches);
echo isset($matches[0]) ? count($matches[0]) : 0; 
```

但是如果我在 %1 之前或之后有一个空格，则代码不起作用。请修复这个表达式。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:28:03.307

```
<?php

$str = "Hello world!%1, abcdef%2, gfgf%14";

$match_count = preg_match_all("/%\d+/", $str);

echo $match_count; 
```

顺便说一句，`$matches`将保存所有匹配的子字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:27:06.690

如果你永远不会使用 % 符号来定义我认为的子字符串以外的任何东西，那么最简单的方法就是这样做：

```
$pieces = explode('%',$string);
$num_substrings = count($pieces) + 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:30:06.187

将 preg_match_all 与 $matches 数组（第三个参数）一起使用，然后计算出现的长度或数组：

```
$r = "Hello world!%1, abcdef%2, gfgf%14";

$matches = array();
preg_match_all('/\%\d+/', $r, $matches);
echo isset($matches[0]) ? count($matches[0]) : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:57:56.493

`preg_match_all`返回匹配的数量。

```
$r = "Hello world!%1, abcdef%2, gfgf%14";
echo preg_match_all('/\%\d+/', $r, $matches);
// in PHP >= 5.4 you can leave out $matches 
```

结果：

```
3 
```

# java - 如何在 BeanIO 中设置字符编码？

> ID：11580248
> 
> 赞同：2
> 
> 时间：2012-07-20T13:22:30.510
> 
> 标签：java, xml, character-encoding, bean-io

我有一个固定长度的流。我想将编码设置为 Windows-1252 或 latin1。

我怎样才能做到这一点？

通过 XML 会更好，但如果代码是唯一的方法，也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:48:30.467

字符编码在 BeanIO 库外部使用基本的 Java I/O API 进行控制。这是一个快速而肮脏的示例，显示了编写设置：

```
Charset charset = Charset.forName("ISO-8859-1"); // ISO Latin Alphabet No. 1
OutputStream ostream = new ByteArrayOutputStream(); // or other OutputStream
Writer writer = new OutputStreamWriter(ostream, charset);

BeanWriter beanWriter = streamFactory.createWriter(nameOfMappedStream, writer);

// write beans here...

writer.flush(); 
```

阅读应该类似。

# c# - 不确定如何在此类上实现 IEnumerable

> ID：11580249
> 
> 赞同：0
> 
> 时间：2012-07-20T13:22:38.983
> 
> 标签：c#, api

继续开发我在之前的帖子中提到的API，我遇到了以下情况：

> 我需要能够访问网络服务返回的响应列表。

问题是我不确定如何在这个类上实现 IEnumerable。

```
...
public class ResponseBodyResponse
{
    public ResponseListResponse ResponseList { get; set; }

    public class ResponseListResponse 
    {
        public ResponseInfoResponse ResponseInfo { get; set; }

        public class ResponseInfoResponse 
        {
            public string RequestId { get; set; }
            public string RequestType { get; set; }
            public DateTime RequestDate { get; set; }
            public string RequestStatus { get; set; }
            public string Error { get; set; }
            public string Memo { get; set; }
        }

        public ResponseListResponse()
        {
            ResponseInfo = new ResponseInfoResponse();
        }
    }

    public ResponseBodyResponse()
    {
        ResponseList = new ResponseListResponse();
    }
... 
```

在有人问我之前，我确实得到了 xsd 文件的副本，但是使用 xsd.exe 生成类导致了类名冲突的文件的荒谬混杂，导致超过 1000 个模棱两可的命名错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:24:32.643

您确实应该从 Web 服务返回一个具体的集合，例如列表或数组，而不是实现`IEnumerable<T>`，即使列表和数组（以及其他集合）确实实现了它。它不是`IEnumerable<T>`序列化的关键。

此外，嵌套的类结构使您的代码难以使用。

由于我不确定您对上述代码的意图，因此这是一个示例

```
public class Road 
{
    public Car[] Cars { get; set; } // this can be also `List<Car>`
}
public class Car
{
    // stuff
} 
```

# linux - 蹩脚的 linux 查询：查看 PNG 和 JPG ......但速度很快

> ID：11580250
> 
> 赞同：-1
> 
> 时间：2012-07-20T13:22:40.477
> 
> 标签：linux, firefox, ubuntu, gimp

任何人都知道一些 Linux/Ubuntu 的图像查看器，它们的加载时间比我可以使用 apt-get 安装的 gimp 和 firefox 更快，或者已经在系统上。

每次我需要查看图像时都不得不等待这些加载。我需要一些快速而快速的东西。

我也在寻找可以从命令行运行的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:25:04.670

基因组之眼非常轻快：[http ://projects.gnome.org/eog/](http://projects.gnome.org/eog/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:25:46.660

尝试“显示”命令行。apt-get 安装 imagemagick

沙查尔

# ajax - 无法触发 Dajax 分页

> ID：11580254
> 
> 赞同：0
> 
> 时间：2012-07-20T13:22:43.507
> 
> 标签：ajax, django, dajaxice

我目前正在浏览[http://www.dajaxproject.com/pagination/](http://www.dajaxproject.com/pagination/)上的 Dajax 示例，当我执行随机数示例和简单表单示例时，我可以看到：

[2012 年 7 月 20 日 15:06:37]“POST /dajaxice/couch.randomize/HTTP/1.1”200 61

[2012 年 7 月 20 日 15:06:38]“POST /dajaxice/couch.updatecombo/HTTP/1.1”200 438

这些信息告诉我正在执行相应的 ajax 任务。现在我正在尝试做分页示例，但我不知道如何触发我的 ajax，没有 onclick 或 onchange 事件，它应该在我提供页面时直接加载。

当我使用一个按钮（onclick 事件）来调用我的分页时，它起作用了。

我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:44:20.573

您是完全按原样使用示例中的代码，还是添加了代码？如果有，发布代码可能会有所帮助。我假设你有一个所需的 javascript 框架（jQuery、mootools 等）——这是 Dajax 的要求。

你在 ajax.py 中导入了 Dajax 吗？该示例没有它，但我认为它是必需的：

```
from dajax.core import Dajax 
```

如示例使用 Dajax()

dajaxice 和 dajax 也有一些已安装的应用程序 settings.py 要求 - 在文档[https://github.com/jorgebastida/django-dajaxice/wiki/installation中描述](https://github.com/jorgebastida/django-dajaxice/wiki/installation)

您可能还想为 Dajax 打开一些日志记录 - 请参阅[Dajax 安装](https://stackoverflow.com/questions/11083168/dajax-instalation/11515774#11515774)示例，如果您还没有，请使用 debug=True 运行一段时间。

* * *

**更新：**

@Nicholas TJ - 注意到您通过备用电话对设置和成功的评论。我确实注意到了另一个问题，这里的分页示例存在问题，关于如何从模板调用 Dajax 进程。

[如何从我的 Django 模板中调用 Dajax / Dajaxice 函数](https://stackoverflow.com/questions/10053660/how-do-i-call-dajax-dajaxice-functions-from-my-django-template)

我一直在通过 JS 函数调用 Dajax，所以模板调用方法对我来说是一个未开发的领域。听起来您的 onclick 调用也取得了类似的成功。尚未研究过弃用模板调用程序的可能性 - 可能是一个过时的例子。

我还注意到示例 'pagination_page.html' 的标题写为 'paginator_page' - 如果将标题用作模板名称，则会出现明显的问题。当我有能力的时候，我会给这个例子一个镜头。

好的-冒着荒谬的风险-新的**更新**。在香草示例没有之后，我得到了一个稍微修改的示例。

这个需要

```
from dajax.core import Dajax 
```

在示例中没有的 ajax.py 中。在我为基本视图使用 RequestContext 之前，它也没有工作 - a la：

```
def pagination_example(request):
items = get_pagination_page(1)
return render_to_response('paginator_example.html',{'items':items},context_instance=RequestContext(request)) 
```

然后它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:05:07.237

需要使用 onclick 按钮、onchange 选项或 js 调用 ajax 任务。

对于这个 dajax 分页示例，它需要首先使用 Django 的 Paginator 将数据填充到 HTML 模板中，一旦完成，您将可以选择单击“上一个”或“下一个”按钮，这将触发达贾克斯任务。

如果您的数据一开始是空的，您将根本看不到“上一个”和“下一个”按钮。

# android - 使用 viewpager 时出现 ClassNotfoundexception

> ID：11580255
> 
> 赞同：0
> 
> 时间：2012-07-20T13:22:47.007
> 
> 标签：android, android-layout, android-viewpager, android-view

我正在尝试实现 Viewpager ，我添加了支持所需的外部 jar。但是，当我启动应用程序时，我正在逼近。下面是日志。

```
07-20 18:48:00.578: W/dalvikvm(21560): threadid=1: thread exiting with uncaught exception (group=0x40019740)
07-20 18:48:00.578: E/AndroidRuntime(21560): FATAL EXCEPTION: main
07-20 18:48:00.578: E/AndroidRuntime(21560): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.SimpleViewPager/com.example.SimpleViewPager.SimpleViewPagerActivity}: android.view.InflateException: Binary XML file line #6: Error inflating class android.support.v4.view.ViewPager
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1668)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1684)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.os.Looper.loop(Looper.java:130)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.ActivityThread.main(ActivityThread.java:3750)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at java.lang.reflect.Method.invokeNative(Native Method)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at java.lang.reflect.Method.invoke(Method.java:507)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:861)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:619)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at dalvik.system.NativeStart.main(Native Method)
07-20 18:48:00.578: E/AndroidRuntime(21560): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class android.support.v4.view.ViewPager
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:224)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.Activity.setContentView(Activity.java:1769)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at com.example.SimpleViewPager.SimpleViewPagerActivity.onCreate(SimpleViewPagerActivity.java:18)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1632)
07-20 18:48:00.578: E/AndroidRuntime(21560):    ... 11 more
07-20 18:48:00.578: E/AndroidRuntime(21560): Caused by: java.lang.ClassNotFoundException: android.support.v4.view.ViewPager in loader dalvik.system.PathClassLoader[/data/app/com.example.SimpleViewPager-1.apk]
07-20 18:48:00.578: E/AndroidRuntime(21560):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
07-20 18:48:00.578: E/AndroidRuntime(21560):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
07-20 18:48:00.578: E/AndroidRuntime(21560):    ... 20 more
07-20 18:48:00.585: D/KeyguardViewMediator(213): setHidden false` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:28:20.143

`libs`在您的应用程序包层次结构中创建一个目录。

将外部jar文件放入其中，

然后`Right Click on jar file -> Add to Build Path`..

**清理**您的项目并再次运行..

# c# - 查询与 NHibernate 关系的一些属性

> ID：11580258
> 
> 赞同：0
> 
> 时间：2012-07-20T13:22:57.293
> 
> 标签：c#, nhibernate, orm, viewmodel

我有一个像这样的 Nhibernate 映射模型：

```
public class A
{
   public virtual long Id { get; set; }
   public virtual long Number { get; set; }

   /* and other 20 properties... */
}

public class B
{
   public virtual long Id { get; set; } 
   public virtual A ItemA { get; set; }
   public virtual string Name { get; set; }
   public virtual DateTime Date { get; set; }
} 
```

我想创建一个查询（queryover、linq、hql 等......无论如何）来获取一个`List<B>`并用 Id 和 Number 属性填充 ItemA 属性，因为我只需要这个属性（我在 A 类中有很多属性，我会不要在我的结果中使用它）。有什么办法可以做到这一点还是我应该创建一个`ViewModel`？如果我需要创建一个`ViewModel`，我该怎么做`QueryOver`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:29:44.720

是的，您必须创建一个视图模型，如下所示：

```
public class BViewModel
{
    public virtual long Id { get; set; } 
    public virtual AViewModel ItemA { get; set; }
    public virtual string Name { get; set; }
    public virtual DateTime Date { get; set; }
}

public class AViewModel
{
    public virtual long Id { get; set; }
    public virtual long Number { get; set; }
} 
```

现在你可以像这样使用 linq 查询它：

```
var listOfB = session.Query<B>()
    .Select(b => new BViewModel
        {
            Id = b.Id,
            Name = b.Name,
            Date = b.Date,
            ItemA = new AViewModel 
                {
                    Id = b.ItemA.Id,
                    Number = b.ItemA.Number,
                },
        }).ToList(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T13:53:45.550

使用`QueryOver`，您可以使用`JoinAlias`将 A 与 B 连接起来，并`SelectList`仅检索您想要的属性。
然后使用`TransformUsing`将结果转换为您想要的任何格式。
类似于以下内容：

```
A aTemplate = null;
s.QueryOver<B>().
  .JoinAlias(() => aTemplate)
  .Where (/*whatever conditions*/)
  .SelectList(list => list
      .Select(() => aTemplate.Id)
      .Select(() => aTemplate.Number)
  .TransformUsing(Transformers.AliasToBeanTransformer)
  .List<A/*or some DTO*/>(); 
```

# android - 用户选择组合框时在 web 视图中弹出的视图的样式

> ID：11580268
> 
> 赞同：6
> 
> 时间：2012-07-20T13:23:39.217
> 
> 标签：android, styles

我需要找到当用户单击 html 页面中的组合框时弹出的视图的 webview 使用什么样式/主题。

![在此处输入图像描述](../Images/58382f3e017c035baed346427eb2577f.png)

在某些手机上，文本被截断，我需要减小文本大小或允许每行跨越多行。

到目前为止，我已经尝试了 5 种样式，但均未成功：

```
<style name="teststyle1" parent="@android:style/Widget.DropDownItem.Spinner">
    <item name="android:singleLine">false</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">#FF00FF</item>
    <item name="android:checkMark">@drawable/another_btn_radio</item>
</style>

<style name="teststyle2" parent="@android:style/Widget.TextView.SpinnerItem">
    <item name="android:singleLine">false</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">#FF00FF</item>
    <item name="android:checkMark">@drawable/another_btn_radio</item>
</style>

<style name="teststyle3" parent="@android:style/Widget.DropDownItem">
    <item name="android:singleLine">false</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">#FF00FF</item>
    <item name="android:checkMark">@drawable/another_btn_radio</item>
</style>

<style name="teststyle4" parent="@android:style/Widget.Spinner">
    <item name="android:singleLine">false</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">#FF00FF</item>
    <item name="android:checkMark">@drawable/another_btn_radio</item>
</style>

<style name="teststyle5" parent="@android:style/Widget.Spinner">
    <item name="android:singleLine">false</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">#FF00FF</item>
    <item name="android:checkMark">@drawable/another_btn_radio</item>
</style> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:13:11.170

允许多行会更好。如果只设置大小。如果你想在某个时候添加一些单词，它会被改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:59:31.217

这种变化实际上将在 android 中没有的东西的 HTML 端完成。使用 webkit-appearance CSS 标签指定外观样式，然后您可以使用 CSS 进行包装。

网址：[http ://css-infos.net/property/-webkit-appearance](http://css-infos.net/property/-webkit-appearance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:06:23.120

查看这些屏幕来自哪个活动`AndroidManifest.xml`的`<activity>`标签。在`android:theme`属性下是您设置主题的地方，或者在这种情况下找出当前主题是什么！看起来可能是`Theme.Dark`，但我不确定我的头顶

或者，如果您只是想更改该视图中的列表项以适合标题，则只需更改字体大小即可。您可以在布局中或以编程方式在 Activity 中设置它：

```
TextView view = (TextView) findViewById('R.id.your_view');
view.setTextSize(12);
// ^^^ will set font size to 12dp, you can use 'setTextSize(pt,12)' for different units 
```

我会查看`AndroidManifest.xml`并查看活动的主题，它看起来像是一个系统样式。来源：

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

* * *

### 更多要查看的链接

* * *

*   [在自定义对话框中设置微调器](https://stackoverflow.com/questions/3673717/set-spinner-within-custom-dialog)

*   [Android：Spinner 小部件的文本颜色属性隐藏在哪里？](https://stackoverflow.com/questions/6159113/android-where-is-the-spinner-widgets-text-color-attribute-hiding)

*   [Android - 自定义 Spinner 小部件的外观和感觉](https://stackoverflow.com/questions/3177700/android-customizing-the-spinner-widget-look-and-feel)

* * *

### 另一个刺在这个

* * *

这个项目在 Github 上吗？你能发布你的注册逻辑`view`吗？

# c# - Visual Studio 2012 条件捆绑

> ID：11580274
> 
> 赞同：14
> 
> 时间：2012-07-20T13:24:07.583
> 
> 标签：c#, asp.net, css, visual-studio-2012, bundling-and-minification

我刚开始使用 VS 2012 RC。我创建了一个带有母版页和单个 Web 表单的测试站点。目前，我正在使用此代码捆绑`Styles`网站上的整个文件夹：

**全球.asax**

```
BundleTable.Bundles.EnableDefaultBundles(); 
```

**站点主**

```
<link rel="stylesheet" type="text/css" href="Styles/css" /> 
```

**问题：**测试站点有一个站点级 CSS 文件，用于控制站点的整体外观。除了站点级 CSS 之外，每个页面*都可以*有自己的 CSS 定义。是否可以仅`site.css`在母版页中包含该文件，然后根据每个页面的需要有条件地将 .css 文件添加到包中？

我在后面的代码中尝试了这个，`Default.aspx`但没有奏效：

```
BundleTable.Bundles.Add(new Bundle("~/Styles/Default.css")); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T20:50:34.123

我的建议：

转到`Global.asax`。确保该方法`Application_Start`包含以下行：

```
protected void Application_Start()
{
    ...
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

`BundleConfig`按如下方式查找或创建类，最好在文件夹中`App_Start`：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        ...

        bundles.Add(new StyleBundle("~page1").Include(
             "~/Styles/site.css",
             "~/Styles/page1.css"));

        bundles.Add(new StyleBundle("~page2").Include(
             "~/Styles/site.css",
             "~/Styles/page2.css"));

        ...

        bundles.Add(new StyleBundle("~pageN").Include(
             "~/Styles/site.css",
             "~/Styles/pageN.css"));

    }
} 
```

现在在每个适当的页面中使用相应的包：

```
<link rel="stylesheet" type="text/css" href="Styles/page1" /> 
```

或者更好的代码：

```
@Styles.Render("~/Styles/page1") 
```

（这是`cshtml`，但`aspx`语法肯定非常相似）。

> 请注意，每页必须有一个单独的捆绑包。您不应该即时修改同一个捆绑包。捆绑包具有虚拟网址。在您的示例中，它只是`css`. 这些由浏览器缓存，因此无论天气如何，您都在运行中更改了 bundle 的内容，浏览器可能会认为这是相同的并且不会重新获取它。

* * *

如果您不想将每个页面手动添加到上述方法中。你可以自动化它。以下代码可以让您了解如何：

```
public class MyStyleHelper
{
    public static string RenderPageSpecificStyle(string pagePath)
    {
        var pageName = GetPageName(pagePath);
        string bundleName = EnsureBundle(pageName);
        return bundleName;
    }

    public static string GetPageName(string pagePath)
    {
        string pageFileName = pagePath.Substring(pagePath.LastIndexOf('/'));
        string pageNameWithoutExtension = Path.GetFileNameWithoutExtension(pageFileName);
        return pageNameWithoutExtension;
    }

    public static string EnsureBundle(string pageName)
    {
        var bundleName = "~/styles/" + pageName;
        var bundle = BundleTable.Bundles.GetBundleFor(bundleName);
        if (bundle == null)
        {
            bundle = new StyleBundle(bundleName).Include(
                "~/styles/site.css",
                "~/styles/" + pageName + ".css");
            BundleTable.Bundles.Add(bundle);
        }
        return bundleName;
    }
} 
```

用法：

```
<link rel="stylesheet" type="text/css" href="<%: MyStyleHelper.RenderPageSpecificStyle(Page.AppRelativeVirtualPath) %>" /> 
```

# jquery - jqplot bar Chart 鼠标悬停效果

> ID：11580282
> 
> 赞同：0
> 
> 时间：2012-07-20T13:24:24.703
> 
> 标签：jquery, jqplot

我希望在条形图值的正上方包含 tooptip div

例如：如果条形图值约为 90,80 在鼠标悬停时，[值框] 应该在当前条形图值的正上方。

是否有可能在酒吧的起始顶部获得鼠标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:30:47.630

刚刚浏览过，可以通过以下方式访问

```
x = plot1.axes.xaxis.u2p(data[0]),  // convert x axis unita to pixels
y = plot1.axes.yaxis.u2p(data[1]);  // convert y axis units to pixels 
```

# memory - 将大量二进制数据从 u-boot 传递到 linux 内核

> ID：11580285
> 
> 赞同：9
> 
> 时间：2012-07-20T13:24:38.887
> 
> 标签：memory, linux-kernel, arm, embedded-linux, u-boot

在将大量数据（3 MB）从 uboot 传递到 imx50 ARM 板上的 linux 内核 2.6.35.3 时遇到一些问题。该数据在内核设备驱动探测函数中是必需的，然后应该被释放。首先 uboot 将数据从闪存加载到 RAM，然后使用 bootargs 为 linux 内核传递物理地址。在内核中，我尝试使用 arch/arm/kernel/setup.c 文件中的 reserve_resource() 保留一定数量的内存：

```
--- a/arch/arm/kernel/setup.c   Tue Jul 17 11:22:39 2012 +0300
+++ b/arch/arm/kernel/setup.c   Fri Jul 20 14:17:16 2012 +0300

struct resource my_mem_res = {
    .name = "My_Region",
    .start = 0x77c00000,
    .end = 0x77ffffff,
    .flags = IORESOURCE_MEM | IORESOURCE_BUSY,
};

@@ -477,6 +479,10 @@
    kernel_code.end     = virt_to_phys(_etext - 1);
    kernel_data.start   = virt_to_phys(_data);
    kernel_data.end     = virt_to_phys(_end - 1);
+   my_mem_res.start    = mi->bank[i].start + mi->bank[i].size - 0x400000;
+   my_mem_res.end      = mi->bank[i].start + mi->bank[i].size - 1;

    for (i = 0; i < mi->nr_banks; i++) {
        if (mi->bank[i].size == 0)
@@ -496,6 +502,8 @@
        if (kernel_data.start >= res->start &&
            kernel_data.end <= res->end)
            request_resource(res, &kernel_data);
+
+       request_resource(res, &my_mem_res);
    }

    if (mdesc->video_start) { 
```

通过这个我试图告诉内核它保留了这个内存区域并且这个数据不应该被内核修改。

```
70000000-77ffffff : System RAM
  70027000-7056ffff : Kernel text
  70588000-7062094f : Kernel data
  77c00000-77ffffff : My_Region 
```

在驱动程序`ioremap(0x77c00000, AREA_SIZE)`中用于获取内核内存地址。但是当我转储内存内容时，只有零。如果使用`mem=120M`（总共 128MB RAM 可用）启动内核，那么我的数据在内核系统 ram 区域之上，那么我得到了我期望的数据。

所以，我的问题：

为什么我得到零以及如何将大量二进制数据从 uboot 传递到 linux 内核？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T07:01:08.653

您可以使用自定义*ATAG*来传递数据块或传递数据的地址和长度。请注意，*ATAG*中的“A”代表 ARM，因此该解决方案不能移植到其他架构。*ATAG*比命令行 bootarg IMO 更可取，因为*您*不希望用户使用物理内存地址。此外，Linux 内核将在启用 MMU（即虚拟内存）之前处理*ATAG列表。*

在 U-Boot 中，查看`lib_arm/armlinux.c`或`arch/arm/lib/bootm.c`查找构建 ARM 标记列表的例程。为新标签编写自己的例程，然后在*do_bootm_linux()*中调用它。

在 Linux 内核中，当尚未启用虚拟内存时，*ATAG*会在 中处理。`arch/arm/kernel/setup.c`如果您只是从 U-Boot 传递地址和长度值，则可以将指针和长度分配给导出的全局变量，

```
void          *my_data;
unsigned int  my_dlen;
EXPORT_SYMBOL(my_data);
EXPORT_SYMBOL(my_dlen); 
```

然后驱动程序可以检索它。

```
extern void          *my_data;
extern unsigned int  my_dlen;

request_mem_region(my_data, my_dlen, DRV_NAME);
md_map = ioremap(my_data, my_dlen); 
```

我使用类似的代码来探测 U-Boot 中的 SRAM，然后将找到的起始地址和 KByte 数传递给自定义*ATAG*中的内核。内核驱动程序获取这些值，如果它们不为零且具有合理的值，则从 SRAM 中创建块设备。与您的情况的主要区别在于 SRAM 与 SDRAM 的物理地址范围完全不同。

**注意***ATAG*是由 U-Boot 为内核可以使用的物理内存构建的，所以这确实是您需要定义和排除保留 RAM 的地方 。在内核中这样做可能为时已晚。

# php - 使用 PHP 对 Magento 类别进行排序时忽略大小写

> ID：11580287
> 
> 赞同：0
> 
> 时间：2012-07-20T13:24:44.177
> 
> 标签：php, magento, sorting

我们目前正在调用 Magento 中的类别列表，并使用下面的字母顺序对它们进行排序......

```
ksort($categories, SORT_STRING); 
```

问题是 PHP 在所有大写实例之后对小写实例进行排序，例如，它们的排序如下：-

```
Apple
Banana
Cherry
apple
banana
cherry 
```

而不是...

```
Apple
apple
Banana
banana
Cherry
cherry 
```

请任何人告诉我们如何在使用 PHP 排序时忽略区分大小写。我们现在玩了很多排序函数，包括 sort、ksort、asort、usort 和 natsort，但没有实现我们想要的。

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:28:03.370

尝试

```
uksort($categories, 'strcasecmp'); 
```

# visual-studio-2010 - 从消息框中复制和粘贴日文文本

> ID：11580289
> 
> 赞同：0
> 
> 时间：2012-07-20T13:24:48.450
> 
> 标签：visual-studio-2010, localization, msgbox

我刚刚为 Visual Studio 2010 安装了一个专有的 VSI 插件。它是日语的，当我尝试使用它时，它会给我这个可爱的消息框：

![消息框中的日语废话](../Images/21384eb29e3600ff85adf52ad7974a48.png)

（实际文字隐藏，不能透露，但绝对是日文表意文字）

问题是：我不会说日语，即使是远程。我很想将其复制并粘贴到 Google 翻译中。

Windows 消息框有一个很好的（而且完全不为人知的）功能：您可以 CTRL-C 将它们放入剪贴板中。所以我正在这样做，但这就是我在 CTRL-V 的任何地方得到的结果：

```
---------------------------
Microsoft Visual Studio
---------------------------
???????????????
---------------------------
OK   
--------------------------- 
```

有帮助，不是吗？知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:47:20.633

你要把这个粘贴到哪里？

我做了一个实验......我使用了字符映射，选择了 Arial Unicode MS，并选择了一些表意字符。我复制了这些字符，然后可以将它们粘贴到 Visual Studio 或记事本中并查看表意文字。

然后我试图复制你所做的：

我用 MessageBox 编写了一个 WPF 程序（Unicode 程序也是如此），并使用了一组表意字符。我运行了程序，然后像你一样执行了 CTRL-C，然后我在记事本和 Visual Studio 中执行了 CTRL-V。

我正确地看到了表意文字，以及 OK 文本和 -------- 分隔符。

这是在 Windows 7 上。

您可以使用剪贴板查看器工具查看剪贴板上已放置的格式/文本。

也许您的程序 VSI 插件不是作为 Unicode 构建的，所以这会影响它在剪贴板上放置文本的方式？理想情况下，您希望 CF_UNICODETEXT 在剪贴板上。

# javascript - 删除没有 Jquery 的包装 div（原始 javascript）

> ID：11580292
> 
> 赞同：4
> 
> 时间：2012-07-20T13:24:58.347
> 
> 标签：javascript, html, wrapper

我知道有一个名为 unwrap 的 Jquery 解决方案，但我正在编写“原始”JavaScript。没有 jQuery，我没有找到任何解决方案。

我想像这样删除一个div：

```
<div><div id="mydiv">Important text here</div></div> 
```

删除“mydiv”后：

```
<div>Important text here</div> 
```

我该怎么办，我想知道理论。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T13:31:17.753

这条线不应该工作吗

```
 document.getElementById("mydiv").outerHTML = document.getElementById("mydiv").innerHTML 
```

请参阅此[JSBin 示例](http://jsbin.com/oxapac/edit#javascript,html)（检查元素）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:28:03.983

您需要为此使用[`removeChild`](https://developer.mozilla.org/En/DOM/Node.removeChild)方法：

```
var divToRemove = document.getElementById('mydiv').;
var tmpStr = divToRemove.innerHTML;
var parent = divToRemove.parentNode;
parent.removeChild(divToRemove);
parent.inerHTML(tmpStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:28:15.760

尝试

```
​var el = document.getElementById('mydiv');
var text = el.innerText; //or el.innerHTML
    el.parentNode.innerHTML = text;
​ 
```

这将用 mydiv 的内容替换 mydiv 父级的 html。

# c - ISO C++ 禁止在转换为 c++ 的遗留代码中增加 'void*' 类型的指针

> ID：11580303
> 
> 赞同：1
> 
> 时间：2012-07-20T13:25:34.000
> 
> 标签：c, g++, void-pointers

我知道它的老问题，但是保持现在转换为 c++ 的 c 应用程序（旧版）的旧逻辑的简单解决方案是什么？

在 c 中它的工作：

```
void *p;
void *response = malloc(60 * 81);

p = response ;
p+=4; 
```

在 g++ 中给出：ISO C++ 禁止递增“void*”类型的指针更新：
如果我将其更改为 char*，我会收到此错误：

```
char *p;
char *response = malloc(60 * 81);

error: invalid conversion from ‘void*’ to ‘char*’ 
```

char* 也可以保存其他类型（基本类型），如 short 、 int 、 bool 吗？这就是为什么在这个遗留代码中使用它来保存不同的类型，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:28:21.097

最简单的方法是将 to 强制`void *`转换为`char *`。由于 ISO C 也禁止`void*`算术，gcc 将其视为 a`char*`作为扩展。有关更多详细信息，请参见：http: [//gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Pointer-Arith.html#Pointer-Arith](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Pointer-Arith.html#Pointer-Arith)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T13:29:48.707

它只在 gcc 中工作。void * 上的指针算法未定义。在这种情况下，Gcc 将其视为 char *。因此，修复遗留代码的最佳方法是仔细更改所有指向 char * 的指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T13:28:36.927

最简单的方法可能是寻找编译器选项来改变这种行为。

最好的可能是将类型更改为`char *`，因为这似乎符合用法和意图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:43:30.877

从 gnu C 移植到 C++ 并非易事。算术`void*`不是 C，它是一个扩展。

将这些东西移植到 C++ 应该更加小心，特别是如果 C 代码从一开始就不太合适。该数据具有“预期”类型，因此您应该在 C++ 中使用该类型，而不是像`char`. 显然这不被认为是 C 字符串，`+= 4`为 C 字符串做没有多大意义。因此假设基本类型的大小为`4`，可能从其余代码中您可以猜到必须如何解释它。

一旦你有正确的类型，使用`new[]`来分配数组。`malloc`如果可以避免，请不要在 C++ 中使用。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-20T13:27:20.347

因为“指针算术”......如果你写 `p += 4`它意味着：`p += ((sizeof(void *) * 4)`

# javascript - 在 Enter 键上确认 Jquery UI 对话框提示

> ID：11580304
> 
> 赞同：1
> 
> 时间：2012-07-20T13:25:34.597
> 
> 标签：javascript, jquery, jquery-ui, modal-dialog, jquery-ui-dialog

我已经尝试了以下堆栈答案中建议的技术，但没有运气：

[在 <Enter> 上提交 jQuery UI 对话框](https://stackoverflow.com/questions/868889/submit-jquery-ui-dialog-on-enter)

我的代码一定有问题。登录时，我会弹出一个免责声明，警告用户在网站中找到的信息是机密的。我希望它继续，用户所要做的就是按回车键。这是我的原始代码（我已包含浏览器检查）：

```
 $("#loginForm").submit(function (e) {
    e.preventDefault();

    if ($.browser.msie) {
        $("#dialog-confirm")
        .dialog({
            resizable: false,
            height: 300,
            width: 550,
            modal: true,
            buttons: {
                "Continue": function (e) {
                    $("#loginForm").unbind('submit').submit(),
                    $(this).dialog("close"),
                    $("#loginForm").submit();
                    $("#btnLogin").click();
                },
                Cancel: function (e) {
                    e.preventDefault();
                    $(this).dialog("close");
                }
            }

        })
    }
    else {
        $("#dialog-browser")
        .dialog({
            resizable: false,
            height: 220,
            width: 480,
            modal: true,
            buttons: {
                "Close": function (e) {
                    e.preventDefault();
                    $(this).dialog("close");
                }
            }
        })
    };
}); 
```

现在这是我使用 keyup 命令的代码：

```
$("#loginForm").submit(function (e) {
    e.preventDefault();

    if ($.browser.msie) {
        $("#dialog-confirm")
        .dialog({
            resizable: false,
            height: 300,
            width: 550,
            modal: true,
            buttons: {
                "Continue": function (e) {
                    $("#loginForm").unbind('submit').submit(),
                    $(this).dialog("close"),
                    $("#loginForm").submit();
                    $("#btnLogin").click();
                },
                Cancel: function (e) {
                    e.preventDefault();
                    $(this).dialog("close");
                }
            },
  HERE>>>      open: function() { 
                $("#dialog-confirm").keypress(function(e) { 
                  if (e.keyCode == $.ui.keyCode.ENTER) { 
                    $("#loginForm").unbind('submit').submit(),
                    $(this).dialog("close"),
                    $("#loginForm").submit();
                    $("#btnLogin").click(); 
                  } 
                }); 
              } 
        })
    }
    else {
        $("#dialog-browser")
        .dialog({
            resizable: false,
            height: 220,
            width: 480,
            modal: true,
            buttons: {
                "Close": function (e) {
                    e.preventDefault();
                    $(this).dialog("close");
                }
            }
        })
    };
}); 
```

不幸的是，这对我不起作用，我一生都无法弄清楚为什么？如果有人能看到问题出在哪里，我将非常感激！

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:11:20.470

我把这一天大部分时间都放在一边，然后重新审视它。我让它工作了！这是我的代码：

```
$("#loginForm").submit(function (e) {
    e.preventDefault();

    if ($.browser.msie) {
        $("#dialog-confirm")
        .dialog({
            resizable: false,
            height: 300,
            width: 550,
            modal: true,
            buttons: {
                "Continue": {
                    text: "Continue",
                    id: "btnContinue",
                    click: function (e) {
                        $("#loginForm").unbind('submit').submit(),
                        $(this).dialog("close"),
                        $("#loginForm").submit();
                        $("#btnLogin").click();
                    }
                },
                Cancel: function (e) {
                    e.preventDefault();
                    $(this).dialog("close");
                }
            },
            open: function () {
                $(document).keydown(function (event) {
                    if (event.keyCode == 13) {
                        $("#btnContinue").click();
                    }
                });
            }
        })
    } 
```

本质上，我为对话框中的按钮分配了一个 ID 值，而不是 $("#dialog-confirm").keydown 我使用了 $(document).keydown。由于该功能仅在对话框打开后设置，因此不一定会影响我页面的其余部分。在 keydown 函数内部，我让它按下我通过 ID 调用的继续按钮。

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:44:43.947

尝试使用这个：

```
$("#dialog-confirm").keydown(function (event) {
        if (event.keyCode == 13) {
            // Submit it
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:27:32.780

如果对话框中没有任何将获得焦点的元素（即：输入元素），您可以尝试此问题中建议的方法：[jquery-ui Dialog: Make a button in the dialog as the default action (Enter key)](https://stackoverflow.com/questions/2522125/jquery-ui-dialog-make-a-button-in-the-dialog-the-default-action-enter-key)

# perl - 在 Perl 中推入哈希的末尾

> ID：11580305
> 
> 赞同：2
> 
> 时间：2012-07-20T13:25:37.677
> 
> 标签：perl, data-structures, hash, push

所以我试图用下面的代码做的是推一个字符串，让我们说“这个字符串”到散列中每个键的末尾。我完全不知道如何做到这一点。这是我的代码：

```
use warnings;
use strict;
use File::Find;

my @name;
my $filename;
my $line;
my @severity = ();
my @files;
my @info = ();
my $key;
my %hoa;
my $xmlfile;
my $comment;
my @comments;

open( OUTPUT, "> $ARGV[0]" );
my $dir = 'c:/programs/TEST/Test';

while ( defined( $input = glob( $dir . "\\*.txt" ) ) ) {
    open( INPUT, "< $input" );

    while (<INPUT>) {
        chomp;

        if (/File/) {
            my @line = split /:/;
            $key = $line[1];
            push @{ $hoa{$key} }, "Filename\n";
        }

        if ( /XML/ ... /File/ ) {
            $xmlfile = $1;
            push @{ $hoa{$key} }, "XML file is $xmlfile\n";

        }
        if (/Important/) {
            push @{ $hoa{$key} }, "Severity is $_\n";
        }
        if (/^\D/) {
            next if /Important/;
            push @{ $hoa{$key} }, "Given comment is $_\n";
        }
        push @{ $hoa{$key} }, "this string\n";
    }

}

foreach my $k ( keys %hoa ) {
    my @list = @{ $hoa{$k} };
    foreach my $l (@list) {
        print OUTPUT $l, "\n";
    }
}

}
close INPUT;
close OUTPUT; 
```

我有“这个字符串”的地方是我试图将该字符串推到数组末尾的地方。然而，最终发生的是它最终打印了三遍“这个字符串”，而不是像我想要的那样在每个键的末尾。当我试图把它放在 while() 循环之外时，它说 $key 的值没有被初始化。所以请，有什么帮助吗？如果您需要澄清我的问题，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:47:51.717

没有冒犯，但是这段代码中有很多问题我什至不知道从哪里开始......

`my $something; my @somethings`首先， Perl 中不需要“初始化块”（脚本开头的所有这些行）。事实上，这不仅仅是“冗余”——它实际上是令人困惑的：每次我遇到一个新变量时，我都必须来回移动我的注意力来检查它的类型。此外，即使有了所有这些`$input`var 仍然没有声明为本地；它要么在注释中丢失，要么给出的代码有遗漏。

其次，你为什么声明你打算使用 File::Find（好）——但是根本不使用它？它可以大大简化所有这些`while(glob) { while(<FH>) { ... } }`程序。

第三，我不确定为什么`$key`只有在读取的行与 /File/ 匹配时才分配某些东西 - 但在所有其他情况下使用它的值作为键。这是尝试读取按部分组织的文件吗？然后可以通过 slurp/splitting 或本地化`$/`变量来完成更简单的操作...

无论如何，关键是如果扫描文件的第一行与 不匹配`/File/`，则使用前一个（即，来自前一个文件！）值 - 我不太确定它的意图。如果第一个文件的第一行不`/File/`匹配，则使用空字符串作为键 - 再次，它闻起来像一个错误......

您能否更详细地描述您的任务？给出一些测试输入/输出结果，也许......在短期任务中继续进行，在过程中组织你的代码会很棒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:47:20.227

您的程序构思不周，违反了许多*良好的实践*规则。这里没有一一列举，而是一个结构更好的等效程序。

我想知道您是否知道*所有*语句都将`if`被测试并可能执行？也许您需要使用`elsif`?

除了 $key 在使用时未定义的可能性之外，您还设置`$xmlfile`了`$1`将*永远不会*定义的选项，因为在您的任何正则表达式中都没有捕获。

不可能从您的代码中看出您正在尝试做什么，因此只有在您向我们展示您的输出、输入并说明如何从另一个中推导出一个时，我们才能为您提供帮助。

```
use strict;
use warnings;

use File::Find;

my ($outfile) = @ARGV;

my $dir = 'c:/programs/TEST/Test';

my %hoa;
my $key;

while (my $input = glob "$dir/*.txt") {

  open my $in, '<', $input or die $!;

  while (<$in>) {

    chomp;

    if (/File/) {
      my $key = (split /:/)[1];
      push @{ $hoa{$key} }, "Filename\n";
    }

    if (/XML/ ... /File/) {
      my $xmlfile = $1;
      push @{ $hoa{$key} }, "XML file is $xmlfile\n";
    }

    if (/Important/) {
      push @{ $hoa{$key} }, "Severity is $_\n";
    }

    if (/^\D/) {
      next if /Important/;
      push @{ $hoa{$key} }, "Given comment is $_\n";
    }

    push @{ $hoa{$key} }, "this string\n";
  }

  close $in;
}

open my $out, '>', $outfile or die $!;

foreach my $k (keys %hoa) {
  foreach my $l (@{ $hoa{$k} }) {
    print $out $l, "\n";
  }
}

close $out; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:47:26.037

我怀疑根据您的代码，每次循环都不会调用设置 $key 的行，并且您不会触发任何其他 if 语句。

这会将“这个字符串”附加到数组的末尾。基于您在数组末尾获得 3 个“此字符串”，我怀疑两行没有通过 if (/FILE/) 或任何其他 if 语句。这将使 $key 值保持不变，最后，您将使用 $key 设置时的最后一个值将“此字符串”附加到数组中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:20:07.777

这会将字符串附加`"this string"`到 hash 的每个元素`%hoa`，这些元素是数组引用：

```
for (values(%hoa)) { push @{$_}, "this string"; } 
```

把它放在你的while循环之外，你会在每个元素的末尾打印“这个字符串” `%hoa`。

它将在找到`undef`ined 元素的地方自动激活数组引用。如果它不能将一个元素作为数组解引用，它也会阻塞，如果它找到一个简单的标量并且*没有*在严格的条件下运行，它将通过*符号引用来操作数组：*

 *```
my %autoviv = ( a => ['foo'], b => undef );
push @$_, "PUSH" for values %autoviv;        # ( a => ['foo', 'PUSH'], b => ['PUSH'] )

my %fatal = ( a => {} );
push @$_, "PUSH" for values %fatal;          # FATAL:  "Not an ARRAY reference at..."

my %dangerous = (a => "foo");
push @$_, "PUSH" for values %dangerous;      # Yikes!  @foo is now ("PUSH")

use strict;
my %kablam = (a => "foo");
push @$_, "PUSH" for values %kablam;         # "Can't use string ("foo") as an ARRAY ref ..." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T13:41:52.433

据我了解，使用命令遍历哈希`map`以修改其键。一个例子：

**编辑**：我进行了编辑，因为我意识到该`map`命令可以分配给相同的哈希。无需创建一个新的。

```
#!/usr/bin/perl

use warnings;
use strict;
use Data::Dumper;

my %hash = qw|
    key1    value1
    key2    value2
    key3    value3
|;

my %hash = map { $_ . "this string" => $hash{ $_ } } keys %hash;

print Dump \%hash; 
```

像这样运行它：

```
perl script.pl 
```

具有以下输出：

```
$VAR1 = {
          'key3this string' => 'value3',
          'key2this string' => 'value2',
          'key1this string' => 'value1'
        }; 
```*

# testing - 如何让 Selenium 响应 Chrome 的站点初始化弹出窗口？

> ID：11580309
> 
> 赞同：3
> 
> 时间：2012-07-20T13:25:43.927
> 
> 标签：testing, selenium, selenium-chromedriver

我正在用 ChromeDriver 尝试 Selenium 来自动化一些音频/视频测试。但是当我用我的应用程序启动 Chrome 浏览器时，它会问我一个问题 http:... 想要使用你的相机和麦克风 允许拒绝选项 我想点击允许并继续在网站上编写脚本。但如果不选择允许，我将无法继续。不幸的是，Chrome 以一种非 DOM 格式弹出这个问题，我无法以明显的方式执行 driver.findElement 并在“允许”选项上单击“单击”来响应。你们中有人遇到过这种情况吗？处理这种情况的最佳方法是什么？

干杯！——布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:32:32.473

请参阅[此答案](https://stackoverflow.com/questions/11537103/how-to-handle-print-dialog-in-selenium/11539854#11539854)（打印对话框）或[此答案](https://stackoverflow.com/a/11577621/1273080)（“运行方式...”对话框）。

不同的对话框，但是原因（总之WebDriver不能处理这些对话框）和可能的解决方案是完全一样的：

*   该类允许您以编程方式“按”键盘上的任何内容（或盲目单击），因此可以通过按or[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)来摆脱对话框。但是，如上所述，任何高级交互都取决于操作系统/语言/打印机。`Enter``Esc`

    ```
    // press Escape programatically - the print dialog must have focus, obviously
    Robot r = new Robot();
    r.keyPress(KeyEvent.VK_ESCAPE);
    r.keyRelease(KeyEvent.VK_ESCAPE); 
    ```

    当然，您也可以通过此类键入任何内容。

*   [自动车](http://www.autoitscript.com/site/autoit/)。它是一个 Windows 程序，可用于处理任何系统级自动化。与上述相同的依赖关系。

请注意（据我所知）您无法真正检查对话框是否出现，因此如果它在没有摄像头的计算机上运行，​​您将无法捕捉到可能的错误......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T16:15:34.133

如果您使用的是[ChromeDriver](http://seleniumhq.org/docs/03_webdriver.html#chrome-driver)，您可以使用任何“本机”弹出窗口

```
Alert popup = webDriver.switchTo().alert();
// here you can examine the text within the alert using popup.getText();
popup.accept(); 
```

# time - 批量变量评估

> ID：11580314
> 
> 赞同：0
> 
> 时间：2012-07-20T13:26:06.443
> 
> 标签：time, batch-file, wait

新批次。我已经将我的问题缩小到我认为如何评估批处理变量。

```
setlocal enableextensions enabledelayedexpansion
set timelimit=30
for /F "USEBACKQ tokens=4,6,8" %%a in (`systeminfo ^| qgrep -e "System Up Time:"`) do set /A timepassed=%%a*24*60+%%b*60+%%c

IF "!timepassed!" LEQ "%timelimit%" (

echo %timelimit%

) ELSE (

echo !timepassed!

) 
```

运行时，我希望批处理输出 !timepassed! （目前为 1250）但是，它总是输出 %timelimit% (30)，让我相信 LEQ IF 正在被采用，这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:13:23.893

按照建议，在您的代码中尝试以下更改

`/A`使用选项设置变量值

```
set /a timelimit=30 
```

并将值与

```
IF !timepassed! LEQ !timelimit! ( 
```

# c#-4.0 - MQQueue 属性（C# API 到 Websphere MQ）

> ID：11580315
> 
> 赞同：1
> 
> 时间：2012-07-20T13:26:11.087
> 
> 标签：c#-4.0, ibm-mq

我发现这段代码可以枚举 QueueManager 的队列列表。它有效，但我在它提供的列表中看到了很多系统队列，甚至频道名称。是否有一些属性我可以测试以查看它是否是“正常”用户定义的队列？ObjectType、QueueType、Usage 似乎总是为每个队列名称提供相同的值。

```
 // GET QueueNames - this worked on 07/19/2012 - but returned a lot of system queue, and unclear how to separate user queues from system queues. 
            PCFMessageAgent agent = new PCFMessageAgent(mqQMgr);

            // Build the query request.
            PCFMessage requestMessage = new PCFMessage(CMQCFC.MQCMD_INQUIRE_Q_NAMES);
            requestMessage.AddParameter(MQC.MQCA_Q_NAME, "*");

            // Send the request and retrieve the response.
            PCFMessage[] responses = agent.Send(requestMessage);

            // Retrieve the values requested from the response.
            string[] queueNames = responses[0].GetStringListParameterValue(CMQCFC.MQCACF_Q_NAMES);
            //string[] objType = responses[0].GetStringListParameterValue(CMQCFC.MQIACF_OBJECT_TYPE);

            int loopCounter = 0;
            foreach (string queueName in queueNames)
            {
                loopCounter++;
                Console.WriteLine("QueueName=" + queueName);
                try
                {
                    mqQueue = mqQMgr.AccessQueue(
                             queueName,
                             MQC.MQOO_OUTPUT                   // open queue for output
                             + MQC.MQOO_INQUIRE              // inquire required to get CurrentDepth 
                             + MQC.MQOO_FAIL_IF_QUIESCING);   // but not if MQM stopping

                    Console.WriteLine("QueueName=" + queueName +
                                      " CurrentDepth=" + mqQueue.CurrentDepth +
                                      " MaxDepth=" + mqQueue.MaximumDepth + 
                                      " QueueType=" + mqQueue.QueueType +
                                      " Usage=" + mqQueue.Usage
                                      );
                }
                catch (MQException mex)
                {
                    Console.WriteLine(mex.Message);
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:41:37.813

对我来说，您的示例代码仅列出队列，没有其他对象，但是它列出了所有队列。您可以添加另一个过滤器`requestMessage.AddParameter(MQC.MQIA_Q_TYPE, MQC.MQQT_MODEL);`以仅列出模型队列。其他可用`MQC.MQIA_Q_TYPE`的值为`MQC.MQQT_LOCAL`、`MQQT_ALIAS`和。`MQQT_CLUSTER``MQC.MQQT_REMOTE`

所有系统或预定义的队列名称都以 . 开头`SYSTEM`。因此，您可能可以在列出后使用此字符串过滤掉预定义的队列。此外，如果您查看队列定义，则有 DEFTYPE 属性，系统定义的队列的值为`PREDEFINED`. 但我无法添加第三个参数来按 DEFTYPE 过滤队列名称。我得到了 3014 原因码。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:37:33.317

正如 Shashi 所指出的，您只会看到来自该 PCF 命令的队列名称。

如果您只对以 PAYROLL 开头的名称进行排队，请更改：

```
requestMessage.AddParameter(MQC.MQCA_Q_NAME, "*"); 
```

到

```
requestMessage.AddParameter(MQC.MQCA_Q_NAME, "PAYROLL.*"); 
```

或者添加一个 if 语句来排除您不想看到的队列名称：

```
if (!(queueName.startsWith("SYSTEM.")))
{
   // do something
} 
```

# ios - 如何创建一个 imageView 来打开一个 url？

> ID：11580320
> 
> 赞同：0
> 
> 时间：2012-07-20T13:26:34.853
> 
> 标签：ios, uiimageview

我有一个 UIImageView（在运行时从远程服务器加载的图像），现在我想通过单击此图像打开一个特定的 url（比如 www.google.com）。我通过单击按钮完成了此操作，但我不知道如何使用 imageView 来执行此操作。任何建议或示例代码将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:31:06.503

你需要的是 UIGestureRecognizer

```
UITapGestureRecognizer* recognizer;
recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(openLink)];
self.imageView.userInteractionEnabled = YES;
[self.imageView addGestureRecognizer:recognizer]; 
```

然后实现`openLink`打开url的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:31:09.337

在界面生成器（或您的故事板）中，选择您的 UIImageView。`Control-drag`从图像到类的头文件。选择“动作”，并根据需要命名。这将添加类似

```
- (IBAction)loadURL:(id)sender; 
```

在您的标题中，并且

```
- (IBAction)loadURL:(id)sender {
} 
```

在您的 .m 文件中。在这个函数中插入你需要的任何代码，我认为你很高兴！

让我知道你是否成功了。

编辑：哎呀，好像我说得太快了，这不起作用，因为您无法向 UIImageView 添加操作。另一个编辑即将推出。

编辑#2：

好的，首先确保您的图像视图在 xib 或情节提要中“启用了用户交互”。然后通过控制拖动你的 UIImageView 到你的头文件来为图像添加一个出口。然后使用 UIResponder 方法 touchesBegan、touchesMoved、touchesEnded（等等）来检测图像视图上的触摸：将其添加到您的 .m 文件中：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    if ([touch view] == yourImageView)
    {
            NSLog(@"Touched !");
    }

} 
```

# transform - Unity3d Box Collider 顶点

> ID：11580324
> 
> 赞同：1
> 
> 时间：2012-07-20T13:26:50.773
> 
> 标签：transform, local, unity3d

如何在 Unity3d 的世界空间中获取盒子对撞机的顶点？（具有正确的旋转和比例）。仅仅在对象上做本地世界是行不通的。

obj.transform.localToWorldMatrix.MultiplyPoint3x4（范围）；我尝试过为其他角落做类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:36:33.110

由于您可以轻松获得[BoxCollider 的*中心*和*范围*](http://docs.unity3d.com/Documentation/ScriptReference/Bounds.html)，您可以通过从中心添加或减去范围轻松获得局部顶点位置，然后使用[Vector3.TransformPoint() 之类的方法将其转换为全局世界空间](http://docs.unity3d.com/Documentation/ScriptReference/Transform.TransformPoint.html)

以下脚本打印每个 Update() 调用附加到与脚本相同的 GameObject 的 BoxCollider 的每个顶点的全局位置。

```
using System.Collections;
public class DebugPrintColliderVertices : MonoBehaviour
{
const uint NUM_VERTICES = 8;

private BoxCollider boxCollider;
private Transform[] vertices;

void Awake()
{
    boxCollider = (BoxCollider)this.gameObject.GetComponent(typeof(BoxCollider));

    if (boxCollider ==  null)
    {
        Debug.Log ("Collider not found on " + this.gameObject.name + ". Ending script.");   
        this.enabled = false;
    }

    vertices = new Transform[NUM_VERTICES];
}

void Update()
{
    Vector3 colliderCentre  = boxCollider.center;
    Vector3 colliderExtents = boxCollider.extents;

    for (int i = 0; i != NUM_VERTICES ; ++i)
    {
        Vector3 extents = colliderExtents;

        extents.Scale (new Vector3((i & 1) == 0 ? 1 : -1, (i & 2) == 0 ? 1 : -1, (i & 4) == 0 ? 1 : -1));

        Vector3 vertexPosLocal = colliderCentre + extents;

        Vector3 vertexPosGlobal = boxCollider.transform.TransformPoint(vertexPosLocal);

        // display vector3 to six decimal places
        Debug.Log ("Vertex " + i + " @ " + vertexPosGlobal.ToString("F6"));
    }       
}
} 
```

请注意，BoxCollider 的大小乘以它所附加的 GameObject 的 transform.scale。我没有在所述脚本中包含该计算，但从这一点来看，找到整体旋转/比例应该是相当微不足道的。

# jquery - JQGrid .getGridParam 将检查的行作为分隔字符串

> ID：11580325
> 
> 赞同：1
> 
> 时间：2012-07-20T13:26:54.647
> 
> 标签：jquery, jqgrid, grid, row

我正在使用

```
var blkstr = jQuery("#toolbar1").getGridParam('selarrrow');
var  roles = $.map(blkstr, function(val,index) {                    
var str = val;
return str;
}).join(",");
alert(roles); 
```

警报显示完全像这样 - `1,2,3,4` 我在发布类似的内容时尝试发布“角色” `2%2C+3%2C+4%2C+1`。我只需要检查的行元素的 id 就像`1,2,3,4`被 POSTED 到服务器一样。

提前感谢，阿比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:07:52.440

您可以尝试将其格式化为 JSON 或使用不同的分隔符，例如`_`不会在 HTTP 请求中转义的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:42:03.740

```
$.ajax({
        url:'http://192.168.1.2:8080/ConstructionHub/user/createuser?',
        data:{firstName:fname,lastName:lname,uname:uname,password:cpassword,phoneno:phno,address:address,street:street,city:city,state:state,country:country,postbox:postbox,zip:zip,url:url,search:search,weblink:weblink,email:email,roles:roles},
        dataType:'xml',
        contentType:'application/x-www-form-urlencoded',
        crossDomain:true,
        timeout:10000,
        async: false,
        cache: false,
        type:'POST',
        success:function(data){
            if($(data).find("isException").text() == "false")
            {
                //alert('No Exceptions found');
                if($(data).find("message").text() == "true")
                    onTrue();
                else
                    onFalse();
            }
            else
            {
                alert($(data).find("message").text());
            }
        },

        error:function(XMLHttpRequest,textStatus, errorThrown) {
                  //  alert("Error status :"+textStatus);
                  //  alert("Error type :"+errorThrown);
                    alert("Error message :"+XMLHttpRequest.responseXML);
                                                           } 
         }); 
```

以上是我用来发布的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:34:27.063

您使用哪种方法进行发布？试试：jQuery.post(url, {角色：角色});

希望这可以帮助。

# jquery - jquery 一些 url 调用是空的

> ID：11580330
> 
> 赞同：1
> 
> 时间：2012-07-20T13:27:05.463
> 
> 标签：jquery, url, src

我正在使用 jquery 来填充一些带有图像的 div。当我单击 jstree 节点时，应该填充 div。它有效，但有时即使目录中有图像，我对图像的调用也会返回空。

这是一段代码，显示了我在做什么：

```
}).bind("select_node.jstree", function (event, data) {

var ImgTeamA;
ImgTeamA = "img/"+node_id+"-teamA.png";
myImg1 = new Image;
myImg1.src=ImgTeamA

alert(myImg1.width);
alert(myImg1.src)

$("#div1").html(myImg1).css("border","1px solid"); 
```

问题是这样的。尽管 myImg1 存在于 img 目录中，但 alert(myImg1.width) 有时显示为 0。当我再次单击该节点时，div1 显示图像。它是零星的。有时单击显示图像，有时我必须双击节点。任何人都可以给我一些指示如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:29:53.400

在将图像加载到浏览器之前，您无法获取图像的宽度，请尝试以下操作：

```
}).bind("select_node.jstree", function (event, data) {
    var myImg1 = new Image;
        myImg1.src = "img/"+node_id+"-teamA.png";
        myImg1.onload = function() {
            alert(myImg1.width);
            alert(myImg1.src);
        }

    $("#div1").html(myImg1).css("border","1px solid");
}); 
```

# python - PAMIE 的类型错误

> ID：11580340
> 
> 赞同：3
> 
> 时间：2012-07-20T13:27:36.297
> 
> 标签：python, pywin32, pamie

我在 PAMIE 上收到一个带有非常简单脚本的 TypeError，但我不确定我能做什么。我找到了一个答案，暗示库`pywin32`可能没有`self`为这个特定的方法（`getElementsByTagName`）设置参数，但我不确定，因为我不知道在哪里可以找到它的定义。

```
from  PAM30 import PAMIE

ie = PAMIE()
ie.navigate('google.com')
ie.getButtons()
ie.quit()
print 'done' 
```

错误是：

```
Traceback (most recent call last):
  File "c:\pamie1.py", line 1, in <module>
    from  PAM30 import PAMIE
  File "C:\Python27\Lib\site-packages\PAM30.py", line 678, in getButtons
    return self.getElementsList("input", filter)
  File "C:\Python27\Lib\site-packages\PAM30.py", line 939, in getElementsList
    elements = self._ie.Document.getElementsByTagName(tag)
TypeError: getElementsByTagName() takes exactly 1 argument (2 given) 
```

这是有问题的行`PAM30`

```
elements = self._ie.Document.getElementsByTagName(tag) 
```

`_ie_`在哪里

```
self._ie = win32com.client.dynamic.Dispatch('InternetExplorer.Application') 
```

我正在使用带有 Python2.7 32bit 的 Windows 7x64

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:53:02.697

[sourceforge 错误链接](http://sourceforge.net/tracker/index.php?func=detail&aid=3562879&group_id=78018&atid=551954)

“解决方法”似乎是启用兼容性视图（`Tools > Compatibility View settings > Display all websites in Compatibility View`）。

这是IE的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T19:22:22.083

解决方法 - PAMIE30 中的更改

```
elements = self._ie.Document.getElementsByTagName(tag) 
```

到

```
elements = self._ie.Document.body.all.tags(tag) 
```

这将在不需要使用兼容性视图的情况下工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T05:37:38.447

修改这一行：

`elements = self._ie.Document.getElementsByTagName(tag)`

到

`elements = self._ie.Document.Body.getElementsByTagName(tag)`

# c++ - 具有静态和特征类的未解决的外部

> ID：11580352
> 
> 赞同：0
> 
> 时间：2012-07-20T13:28:16.837
> 
> 标签：c++, gcc

我有一个像这样的特质类

```
template <int Size, typename T>
class Traits<Vector<Size, T>>
{
    enum {ElementCount = Size};
}; 
```

这很好用，但是在比较不同特征实例的大小时，我会收到很多 GCC 警告。所以我想我会`static const int ElementCount`改用，但现在 GCC 抱怨未`ElementCount`找到未解决的外部（即）。我该如何解决这个问题？我当然不能为每个组合实例化 Traits 类。为什么 GCC 用枚举正确地看到了这一点，但用 const static 却没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:30:47.660

您会收到很多警告，因为您正在比较来自不同枚举的值。

您可以创建一个返回 int 进行比较的静态函数：

```
template <int Size, typename T>
class Traits<Vector<Size, T>>
{
    enum {ElementCount = Size};

    static int GetElementCount() {return static_cast<int>(ElementCount);}
}; 
```

# java - 从日期字符串中获取java中的日期对象

> ID：11580353
> 
> 赞同：0
> 
> 时间：2012-07-20T13:28:19.003
> 
> 标签：java, mysql, date, simpledateformat

我的页面上有一个 jquery datepicker：

```
$( "#dob" ).datepicker({
        yearRange: "-100:+0", 
        dateFormat: 'dd-mm-yyyy',
        changeMonth: true,
        changeYear: true,
        showAnim: 'slideDown',
        minDate: '-100Y',
        maxDate: '-1D'
    }); 
```

`25-12-1988`我在我的 servlet 中将dob 字符串设为 : 。

我试过这个：

```
SimpleDateFormat formatter=new SimpleDateFormat("dd-mm-yyyy");
            try {
                ud.setDob(formatter.parse(dob));
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

将其插入 Db 我正在这样做：

```
pstm.setDate(9,new java.sql.Date(ud.getDob().getTime())); 
```

在数据库中我得到了这个：`1988-01-25 00:00:00`这是不正确的。

列的数据类型是`datetime`

哪里有问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:29:31.100

`mm`是“分钟”。“月”是`MM`：

```
SimpleDateFormat formatter=new SimpleDateFormat("dd-MM-yyyy"); 
```

（请参阅[javadoc`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。）

# django - 如何在不插入的情况下更新 Django modelform？

> ID：11580356
> 
> 赞同：0
> 
> 时间：2012-07-20T13:28:24.800
> 
> 标签：django, modelform, updatemodel

我的 Django 代码插入新行而不是更新现有行时遇到问题。这里的许多人都曾就类似问题寻求帮助，但通常他们忘记设置`instance`为`form = SomeModelForm(request.POST or None, instance=some_model_instance)`. 我似乎做得对，但它仍然没有保存现有数据。

另一张海报也有完全相同的问题（[当我想要 UPDATE 时，请参阅 Django 表单 INSERTs](https://stackoverflow.com/questions/2376797/django-form-inserts-when-i-want-it-to-update)）。看起来给他解决问题的代码解决了这个问题，但是当他问到时，没有人解释为什么它会起作用！

**看法**

```
 if form_type == "edit_event":
        # we need to load all the data based on the event_id
        event_id = request.POST['event_id'] or None
        event_to_edit = mapDataManager.getEvent(event_id)
        if event_to_edit and mapDataManager.userCreatedEvent(request.user, event_to_edit):
            # this user actually created this event
            # let them edit it
            event_form = EventModelForm(request.POST or None, instance=event_to_edit)
            location_form = LocationModelForm(request.POST or None, instance=event_to_edit.location)
            list_of_event_scheds = EventSchedule.objects.filter(pk=event_id).values()
            event_sched_formset = EventScheduleModelFormSet(request.POST or None, initial=list_of_event_scheds)

            if event_form and location_form and event_sched_formset:
                if event_form.is_valid() and location_form.is_valid() and event_sched_formset.is_valid():
                    # update event
                    mapDataManager.updateEvent(event_form, location_form, event_sched_formset)
                    # redirect
                    return HttpResponseRedirect(reverse('map'))
                else:
                    # set feedback to show edit event form
                    feedback = "edit_event" 
```

**更新事件（）**

```
def updateEvent(self, event_form, location_form, event_sched_forms):

    event = event_form.save(commit=False)
    location = location_form.save()
    event.location = location
    event.save()
    for event_sched_form in event_sched_forms: # loop through formset
        event_sched = event_sched_form.save(commit=False)
        event_sched.event = event
        event_sched.save() 
```

谁能帮我吗？我错过了一些非常基本的东西吗？

**编辑**：澄清一下，我的所有表格都没有更新，所有表格都在插入。根据丹尼尔的建议，我认为我需要使用表单集来链接正在编辑的所有三个模型表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:01:50.693

出于某种奇怪的原因，您正确地传递`instance`给主表单，但传递`initial`给 EventScheduleModelFormSet，这是问题的直接原因。

但是，由于这些模型显然具有外键关系，因此听起来您应该使用内联模型表单集：

```
from django.forms.models import inlineformset_factory
eventschedule_formset_class = inlineformset_factory(Event, EventSchedule)
event_sched_formset = eventschedule_formset_class(request.POST or None,
                                                  instance=event_to_edit) 
```

现在不需要该`updateEvent`逻辑 - 您只需保存`event_sched_formset`，它将正确引用该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:51:00.623

您正在尝试保存 EventScheduleModelFormSet 表单？没有实例集，只有初始数据，因此您每次都在创建一个新对象。还是我错过了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T01:50:49.440

在此博客文章的帮助下，我能够按照 Daniel 的建议使内联模型表单集工作：http: [//charlesleifer.com/blog/djangos-inlineformsetfactory-and-you/](http://charlesleifer.com/blog/djangos-inlineformsetfactory-and-you/)

仅供参考，我缺少的一个关键点是表单集的实例引用了父模型。此外，如果您在模板中手动显示表单集，请不要忘记包含 {{ formset.id }}。

# php - android 应用程序写来获取 id 2 php 的地名给 null

> ID：11580360
> 
> 赞同：0
> 
> 时间：2012-07-20T13:28:37.337
> 
> 标签：php, android

我正在尝试这段代码，但它给出了 null。它应该在哪里给我地名。我的代码中似乎有什么问题？我想通过提供地点 ID 来获取地点详细信息。但我也调试过，它总是返回 null

**代码**

```
String result = "";
                InputStream is = null;
                // the year data to send
                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("place_id", "2"));

                // http post
                try {
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost(
                            "http://example.com/getAllPeopleBornAfter.php");
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();
                } catch (Exception e) {
                    Log.e("log_tag", "Error in http connection " + e.toString());
                }
                // convert response to string
                try {
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(is, "iso-8859-1"), 8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();

                    result = sb.toString();
                } catch (Exception e) {
                    Log.e("log_tag", "Error converting result " + e.toString());
                }

                // parse json data
                try {
                    JSONArray jArray = new JSONArray(result);
                    for (int i = 0; i < jArray.length(); i++) {
                        JSONObject json_data = jArray.getJSONObject(i);
                        TextView z = (TextView)findViewById(R.id.textView1);
                        z.setText(json_data.getString("place_id"));
                    }
                } catch (JSONException e) {
                    Log.e("log_tag", "Error parsing data " + e.toString());
                }
            }

        }); 
```

**PHP**

```
<?php
include "db_config.php";

$q=mysql_query("SELECT 'name' FROM places WHERE place_id='".$_REQUEST['place_id']."'");

while($e=mysql_fetch_assoc($q))
        $output[]=$e;

print(json_encode($output));

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:18:50.160

这就是答案

```
ref.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                String result = "";
                InputStream is = null;

                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("place_id", "3"));

                try {
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost(
                            "http://hopscriber.com/test.php");
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();

                } catch (Exception e) {
                    Log.e("log_tag", "Error in http connection " + e.toString());
                }
                // convert response to string
                try {
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(is, "iso-8859-1"), 8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();
                } catch (Exception e) {
                    Log.e("log_tag", "Error converting result " + e.toString());
                }

                // parse json data
                String version = null;
                try {
                    JSONArray jArray = new JSONArray(result);
                    for (int i = 0; i < jArray.length(); i++) {
                        JSONObject json_data = jArray.getJSONObject(i);
                        version = json_data.getString("name");
                        Toast.makeText(getBaseContext(), version,
                                Toast.LENGTH_LONG).show();
                        TextView x = (TextView) findViewById(R.id.textView1);
                        x.setText(version);
                    }
                } catch (JSONException e1) {
                    Toast.makeText(getBaseContext(), version, Toast.LENGTH_LONG)
                            .show();
                } catch (ParseException e1) {
                    e1.printStackTrace();
                }
            }

        }); 
```

php

```
<?php

include "db_config.php";

$query = mysql_query("SELECT * FROM places WHERE place_id='".mysql_real_escape_string($_POST[place_id])."'");

while($e=mysql_fetch_assoc($query))
    $output[]=$e;

print(json_encode($output));

mysql_close();
?> 
```

谢谢大家的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:35:33.767

信息太少，无法提供帮助。您确定您的 PHP 脚本返回任何内容吗？http响应的日志记录显示了什么？也许您的代码一切都很好，而 null 是您应该得到的，因为问题潜伏在其他地方？

顺便说一句：您的 PHP 代码非常糟糕。您对 SQL 注入的利用持开放态度，一般来说，在尝试使用它应该返回的预期数据之前，您应该始终检查查询（或 fopen 或任何东西）是否成功，因为不能保证一切正常。错误检查的习惯对于可靠的软件开发至关重要。我还建议不要使用“？>”，如果它只是纯 PHP 脚本文件，而不是与 HTML 或任何东西混合（混合也很糟糕）。

# javascript - 使用 Xpath 和 Javascript 解析 HTML

> ID：11580362
> 
> 赞同：3
> 
> 时间：2012-07-20T13:28:45.803
> 
> 标签：javascript, jquery, xpath, html-parsing, html-agility-pack

在 .NET 中有一个可爱的库，它允许我使用 xpath 查询（HTML 敏捷项目）轻松解析外部 html 页面 - 问题是我必须在客户端做，所以只有 javascript。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:37:37.097

jQuery 还支持 xPath 选择器以及 CSS，您可以从下面的链接获取更多信息。

[http://docs.jquery.com/DOM/Traversing/Selectors](http://docs.jquery.com/DOM/Traversing/Selectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:40:42.220

你可以试试[https://github.com/andrejpavlovic/xpathjs](https://github.com/andrejpavlovic/xpathjs)

实际上有很多，默认情况下有一个 window.evaluate 方法。

但大多数框架使用 jQuery/Mootols/Dojo (Sizzle) 等选择器的原因是，在所有现代现代浏览器中，它几乎都支持原生浏览器，如果不支持就会退回。所以在大多数方面它更快。

# lotus-notes - 在 Notes 客户端中限制附件的大小？

> ID：11580363
> 
> 赞同：0
> 
> 时间：2012-07-20T13:28:46.613
> 
> 标签：lotus-notes, lotus-domino

好吧，也许我正在失明或忽略某些东西。

由于您可以在 Inotes 客户端中设置附件的大小限制，因此我认为您也可以为 Notes 客户端执行此操作。

通过服务器设置、策略等，我得出的结论是，除了将 lotusscript 添加到备忘录、约会、（更多）表格的查询保存中之外，这是不可能的。

而且我不是真正的粉丝，它是一个多米诺骨牌模板，而不是自定义模板。我预见到一些问题。不是我现在能想到的。

制定邮件规则也不行。

我可以将代码放在富文本元素的 onchange 或验证事件中。再次是邮件模板。

所以最大的问题是......除了篡改邮件模板之外，有没有办法通过策略或任何其他方式来做到这一点。

谢谢

---> ken 的回答让我意识到我的问题并不完整。为了捕捉我们计划使用filesendr 应用程序的所有大邮件，您可以在openntf 上找到它们。在我们的测试环境中。它就像一个魅力。但是人们仍然可以发送大附件，filesendr 会启动，但在发件人的邮件文件中，带有附件的备忘录将被存储，或者在安装时存储在 DAOS 中。我们希望限制允许的附件大小，而不破坏模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:56:37.000

您不能对添加到 Notes 电子邮件或文档的附件大小设置限制。用户可以将任意大小的文件附加到文档中，包括电子邮件文档。也许使用数据库配额可以在一定程度上限制它，但这不是您正在寻找的粒度。

但是，您可以在服务器上设置最大消息大小的限制，如果消息超过该大小，Notes 路由器将失败（即发送未送达报告）。请按照以下步骤查找设置：

*   转到服务器上的 Domino 目录，
*   单击配置 > 服务器 > 配置。
*   为您的服务器选择配置文档。
*   单击路由器/SMTP > 限制和控制 > 限制
*   将最大消息大小字段设置为某个值，例如 10,000KB

这将阻止任何大于 10MB 的消息通过路由器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:45:34.593

如果你坚持在客户端这样做，你有两个选择：修改模板，或者编写一个插件，使用 C API 扩展管理器特性来拦截 NSFNoteUpdate 操作并检查附件的大小。

# php - 无需 API PHP 即可获取 Youtube 用户名

> ID：11580366
> 
> 赞同：1
> 
> 时间：2012-07-20T13:28:53.540
> 
> 标签：php, youtube

您如何检索 Youtube 上正在使用您的 PHP 应用程序的用户的用户名？我宁愿在没有 API 的情况下执行此操作，但如果需要指出我正确的方向，因为我不知道要下载什么，我已经访问了谷歌开发者网站/地方。

我从 2009 年找到了一些代码，但它是从 youtube 视频中检索用户名的，但它没有用。我尝试使用 and 阅读页面的内容，`fopen()`但`file_get_contents()`它总是看起来好像我没有登录，而我是通过 FireFox 登录的。

不知道这是否有区别，但我是通过 localhost 在 EasyPHP 上运行的

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:30:38.593

你不能，按照设计。您没有他们使用的会话 cookie 服务器端`fread`。Youtube 根据该会话 cookie 确定您是否登录，而您的服务器上没有。

如果您想要他们的 YouTube 用户名，请使用 JavaScript 中的客户端 API，或者只是通过文本输入字段向他们询问。不可能在服务器端找到它，因为它应该是。未经我的明确许可和互动，您的服务器无法找到我的 Youtube 用户名。

# objective-c - UItableviewcontroller 单元格文本标签内容不显示

> ID：11580367
> 
> 赞同：1
> 
> 时间：2012-07-20T13:28:54.320
> 
> 标签：objective-c, ios, xcode, uitableview

我已经在我的应用程序中成功解析了 json 文件，但是当我尝试在表格视图中显示所有文件时，它没有显示出来。这是我的代码。

```
NSString *urlstr=[NSString stringWithFormat:@"http://minora.p41techdev.net/portal.php"];

NSURL *url=[NSURL URLWithString:urlstr];

NSData *data =[NSData dataWithContentsOfURL:url];

NSError *error;

NSArray *json=(NSMutableArray*) [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

//NSLog(@"%@",json);
NSDictionary *dict =[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"a title", @"more data",nil] forKeys:[NSArray arrayWithObjects:@"titleKey",@"dataKey", nil]];

NSLog(@"1");

NSString *integ = [dict valueForKey:@"id"];
NSString *title=[dict valueForKey:@"title"];
NSString *category=[dict valueForKey:@"category"];
NSString *description=[dict valueForKey:@"description"];
NSString *spectitle=[dict valueForKey:@"spectitle"];
NSString *specvalue=[dict valueForKey:@"specvalue"];

NSArray *arr =[NSArray arrayWithObjects:integ,title,category,description,spectitle,specvalue, nil];

[tablearray addObject:arr];    
NSLog(@"%@",tablearray);

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
// Return the number of rows in the section.
return [tablearray count];
NSLog(@"5");

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell.textLabel.text=[[tablearray objectAtIndex:indexPath.row] objectAtIndex:1];   

    return cell; 
```

}

我的 json 文件看起来像这样

```
[
{
    "id": "1",
    "category": "New Category1",
    "title": "New Product2",
    "description": "Please type a description1",
    "imgurl": "http://s.wordpress.org/about/images/wordpress-logo-notext-bg.png",
    "spectitle": "Specification",
    "specvalue": "Value"
},
{
    "id": "2",
    "category": "Mobile",
    "title": "Samsung",
    "description": "Please type a description",
    "imgurl": "http://s.wordpress.org/about/images/wordpress-logo-notext-bg.png",
    "spectitle": "Price",
    "specvalue": "100$"
}
] 
```

请指导...

我遇到这样的线程问题

```
2012-07-20 19:36:03.504 tablevc[2253:f803] 1
2012-07-20 19:36:03.505 tablevc[2253:f803] 2
2012-07-20 19:36:03.507 tablevc[2253:f803] 4
2012-07-20 19:36:03.507 tablevc[2253:f803] 3
2012-07-20 19:36:03.508 tablevc[2253:f803] *** Assertion failure in -[UITableView _createPreparedCellForGlobalRow:withIndexPath:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061
2012-07-20 19:36:03.508 tablevc[2253:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:'
*** First throw call stack:
(0x13d2022 0x1563cd6 0x137aa48 0x9b32cb 0xb6d28 0xb73ce 0xa2cbd 0xb16f1 0x5ad21 0x13d3e42    0x1d8a679 0x1d94579 0x1d194f7 0x1d1b3f6 0x1d1aad0 0x13a699e 0x133d640 0x13094c6 0x1308d84  0x1308c9b 0x12bb7d8 0x12bb88a 0x1c626 0x2ae2 0x2a55 0x1)
 terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:32:40.297

我在任何地方都没有看到 tablearray 的初始化。

将此添加到您的 viewDidLoad 方法中：

```
tablearray = [[NSMutableArray alloc] init]; 
```

我还看到您在数组中插入了一个数组。这意味着当您需要访问正确的数据（在您的情况下为 NSString）时，您必须使用正确的索引：

```
cell.textLabel.text=[[tablearray objectAtIndex:indexPath.row] objectAtIndex:1]; 
```

我使用了“objectAtIndex:1”，因为标题字符串存储在内部数组的索引 1 处。更好、更通用的方法是使用 NSDictionary。例如：

```
NSDictionary *dict =[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"a title", @"more data",nil] forKeys:[NSArray arrayWithObjects:@"titleKey",@"dataKey"]]; 
```

此外，请确保您的代表为您的表格返回正确数量的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:35:34.617

表格视图中的部分数至少为一个...

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
    //#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;//It should be at least one.......
    } 
```

`cellForRowAtIndexPath:`在方法中编写以下代码。否则你会得到错误。

```
if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    } 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T05:59:43.457

你有 1 个元素的 tablarray 。该元素是一个包含一些条目的数组。您的数据源仅声明一个单元格（tablearray 计数，即 1）。

无论如何，您的 cellForIndexPath 方法将始终查找 json 数组中的第一个也是唯一一个元素。

编辑：不相关，但是如果未设置 json 中的字段，则返回 nil，这将终止 arrayWithObjects 中的数组，这可能会导致越界索引。使用这种方法要*非常*小心，用它很容易射中自己的脚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T15:50:15.247

您应该像这样初始化单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }
    [[cell textLabel] setText:[tablearray objectAtIndex:indexPath.row]];

    // Configure the cell...

    return cell;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T13:33:43.377

在表数组中添加 arr 后调用`[tableView reloadData]`...

```
[tablearray addObject:arr];
[tableView reloadData]
NSLog(@"2"); 
```

希望能帮助到你

# windows-8 - Windows Metro：img 标签中的链接不起作用

> ID：11580370
> 
> 赞同：0
> 
> 时间：2012-07-20T13:29:07.393
> 
> 标签：windows-8, microsoft-metro

我正在使用 HTML+Javascript 在 Metro 中开发一个应用程序。当它们用于在 img 标签中创建链接时，我的链接不起作用：

```
<h4><a href="/pages/childpage.html">Go to child page</a></h4>
<a href="/pages/childpage.html"><img src="/images/home/child.jpg" /></a> 
```

第一个链接工作正常，第二个链接不行。当我单击图像时，它会阻止应用程序。

对于链接，我[按照文档中的建议](http://msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx)使用 Application.PageControlNavigator 。我的 JS 有：

```
(function () {
   "use strict"; 

   function linkClickEventHandler(eventInfo) {
       eventInfo.preventDefault();
       var link = eventInfo.target;
       WinJS.Navigation.navigate(link.href);
   }

   WinJS.UI.Pages.define("/pages/home/home.html", {
       ready: function (element, options) {
           WinJS.Utilities.query("a").listen("click", linkClickEventHandler, false);
           WinJS.UI.processAll();
       }
   });
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:39:58.800

问题是 link.href 在标签内使用标签时返回 src 字符串而不是 href 字符串。在您的情况下，link.href 返回“/images/home/child.jpg”。我认为这是一个错误而不是一个功能。解决方法是不使用 href.link。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T05:46:33.997

你可以这样做：

使用`<a>`标签的 onclick 属性并调用 handler() 函数，如下所示：

```
<a onclick="handler();"><img src="/images/home/child.png" /></a> 
```

处理函数的主体如下图所示：

```
function handler()
{
     WinJS.Navigation.navigate('/pages/childpage.html');
} 
```

对我来说工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:37:22.490

通过块，我假设您的意思是“挂起”？当您单击图像时，它会调用您的 linkClickEventHandler 吗？

# sql - 在 SQL 中选择多个列

> ID：11580379
> 
> 赞同：0
> 
> 时间：2012-07-20T13:30:05.083
> 
> 标签：sql, sql-server-2005, insert, multiple-columns

我有一个包含一百多列的表，但我只想选择名为 nvarchar1、nvarchar2、... nvarchar64 的列。所有这 64 列都彼此相邻，所以我想也许有一种方法可以使用列索引进行选择，但我找不到解决方案。

注意：我不想做明显的解决方案，

```
SELECT nvarchar1,
       nvarchar2,
       ...
       nvarchar64
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:31:49.383

使用此查询的结果：

```
select  column_name + ','
from    information_schema.columns
where   table_name = 'your table name'
        and column_name like 'nvarchar%' 
```

# javascript - 文本 如果未定义 id 或 class 如何删除文本？

> ID：11580382
> 
> 赞同：0
> 
> 时间：2012-07-20T13:30:05.430
> 
> 标签：javascript, jquery

如何通过 javascript 或 jquery 从 DOM 中删除 tspan 元素？

```
<tspan >abc.com</tspan> 
```

注意： id 或 class 没有为 tspan 定义，这个元素是由 ajax 请求动态产生的。

一般来说，我的问题是如何搜索具有指定文本内容的元素（在我的情况下为 tspan）？

我知道 :text 选择器，但在这种情况下无法应用。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:32:37.817

使用[包含（）](http://api.jquery.com/contains-selector/)：

```
$('tspan:contains(abc.com)').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:31:24.790

试试这个

```
$('tspan').not('[id],[class]').text('');​​​​​​​​​ 
```

应该摆脱它吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:32:50.887

您可以使用[filter()](http://api.jquery.com/filter/)：

```
$("tspan").filter(function() {
    return $(this).text() == "abc.com";
}).remove(); 
```

: [contains()](http://api.jquery.com/contains-selector/)选择器的工作方式几乎相同，但匹配一个子字符串，这意味着它`tspan:contains(abc.com)`还将匹配内部文本为 的元素`"foo abc.com bar"`，这可能不是您想要的。

# php - 使用 ORM 时的 PHP 性能和内存

> ID：11580384
> 
> 赞同：0
> 
> 时间：2012-07-20T13:30:16.530
> 
> 标签：php, oop, orm

我正在使用 PDO 来获取对象的行。我对此有两个问题：

1- 在对象中使用私有属性并使用可能调用另一个函数本身的 __get() 方法返回它们，例如 getLabel()，这在检索大量记录时如何影响 php 性能？可以接受吗？

一个例子：

```
class model
{
  private p1;
  public p2;
  function __get($name)
  {
    return $this->{'get'.$name}();
  }
  function getP1()
  {
    return '';
  }
}

$obj = new model;
$obj->p1 VS. $obj->p2 
```

2- 对于具有许多列的类，在类定义中定义所有这些列，然后在检索大量记录时选择其中一些列，这如何影响 php 内存使用，因为它们是在具有空值的对象中定义的？可以接受吗？

我不会一一获取行，也不是一次获取所有行。

一个例子：

```
class model
{
  public $p1 = null;
  public $p2 = null;
  public $p3 = null;
  public $p4 = null;
  public $p5 = null;
  public $p6 = null;
  public $p7 = null;
  public $p8 = null;
  public $p9 = null;
  public $p10 = null;
}

sql: select p1, p2 from model limit 100 
```

每个对象有 8 个未使用的属性。这如何影响 php 性能和内存？

**据我所知，学说使用这两种模式。他们如何克服这种影响 php 性能的问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:36:08.340

> 在对象中使用私有属性并使用可能调用另一个函数本身的 __get() 方法返回它们，例如 getLabel()，这在检索大量记录时如何影响 php 性能？可以接受吗？

与其他常见的解决方法相比，魔术方法的成本很高。如果没有看到您的应用程序，很难说到底有多贵。

[__get/__set/__call 使用 PHP 的性能问题](https://stackoverflow.com/questions/3330852/get-set-call-performance-questions-with-php)

> 对于具有许多列的类，在类定义中定义所有这些列，然后在检索大量记录时选择其中一些列，这如何影响 php 内存使用，因为它们是在具有空值的对象中定义的？可以接受吗？

只要您使用 PDO 遍历结果集，您的内存就不会太高。但是，如果您遍历结果并将它们保存到一个集合中，那么您的整个结果集将占用大量内存。与往常一样，您希望选择尽可能少的字段和行。

# postgresql - PostgreSQL 错误：运算符 >> 不是有效的排序运算符

> ID：11580387
> 
> 赞同：3
> 
> 时间：2012-07-20T13:30:18.467
> 
> 标签：postgresql, operators, b-tree

首先，我对 postgresql 没有太多经验，所以我提前道歉。我最近将我的服务器从 postgresql 8.3 版升级到了 9 版，在恢复我的数据后，我在一个无法解决的查询中遇到了操作员问题。我正在尝试查询：

> database=# select bbox from dems order by bbox using >> limit 1;

bbox 是我的表中的一列 dems 类型的 box。

我得到结果：

> 错误：运算符 >> 不是有效的排序运算符
> 
> 第1行：使用>>limit 1从dems order by bbox中选择bbox；
> 
> 提示：排序运算符必须是 btree 运算符族的“<”或“>”成员。

我认为“>>”运算符内置在 postgresql 中用于类型框，我想知道我在这里做错了什么。该查询与 8.3 版完美配合。我的老同事编写了原始代码并设置了服务器，所以我可能会遗漏一些恢复步骤。任何帮助都会很棒，同时我将继续阅读文档。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:03:32.870

您的基本问题是您似乎试图通过简单地对它们进行排序来生成包含框的树。订购不是做到这一点的方法。而是使用递归查询和窗口函数（两者都需要 8.4 或更高版本的 iirc）。在这种情况下，类似于：

```
WITH RECURSIVE bbox_tree (id, bbox, level, position, path) AS
( select id, bbox, 1, rownumber() over (order by id), id::text
   from dems
  UNION ALL
 SELECT d.id, d.bbox, t.level + 1, rownumber over (partition by t.id order by d.id),
        p.path || ',' d.id
   FROM dems d
   JOIN bbox_tree t ON t.bbox >> d.bbox )
SELECT bbox FROM  bbox_tree order by string_to_array(t.path, ','); 
```

您实际上将不得不在这里创建一棵树。

# iphone - 如何将 UIButtons 添加到我的自定义视图（cutom drawRect）

> ID：11580389
> 
> 赞同：0
> 
> 时间：2012-07-20T13:30:19.637
> 
> 标签：iphone, objective-c, ios5, drawrect

这个 iOS5+ 项目正在使用情节提要并且 ARC 已打开。

我正在制作一个内部带有“圆圈”的自定义视图（这将代表一次点击，这将只是一个背景图像）并且我需要在内部绘制圆段（我已经在我的 drawRect 中这样做了）代表一个时间跨度（在代码中会更清楚）。

现在你的时间跨度代表一个事件，它来自事件数组，包含事件项（在代码中也更清晰）

现在我想要在圆的顶部绘制按钮，这些按钮需要链接到某些事件。（这可能就像向与 ID 对应的按钮添加标识符一样简单，并在单击时打开显示标题和按钮的注释。所以基本上我希望这些按钮的行为类似于 mapkit 中的地图注释，然后能够单击按钮并转到详细信息页面（我已经制作并用于我的 mapView）（我还想为这些按钮使用自定义图像）

我将如何解决这个问题？

这个问题的重要文件的文件结构是：

```
Event.h
Event.m
RadarViewController.h
RadarViewController.m
RadarView.h
RadarView.m 
```

时钟的绘制发生在 RadarView.m 的 drawRect 中。在故事板中有一个带有 RadarViewController 类的 UIView，它上面有一个带有 RadarView 类的子类。绘制时钟的是radarView的drawRect（并在那里实现了drawRect函数。）

我可以通过单例访问事件数组（将在代码中明确。）

----- 编码 -----

这是我当前的 drawRect 函数：

```
RadarView.m

- (void) drawRect:(CGRect)dirtyRect{
    CGRect bounds = [self bounds];
    CGPoint center;
    center.x = (bounds.origin.x + bounds.size.width)/2.0;
    center.y = center.x;

    // Set context being drawn upon
    CGContextRef context = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] setStroke];
    CGContextAddArc(context, center.x, center.y, center.x, 0, 2*M_PI, YES);
    CGContextStrokePath(context);
    SingletonManager *sharedManager = [SingletonManager sharedManager];

    Event *tmp;
    double radius;
    double startRad;
    double endRad;

    if(currentLocation == nil){
        currentLocation = [sharedManager currentLocation].location;
    }

    for(int i = 0; i < [sharedManager.eventsManager count]; i++){
        tmp = [sharedManager.eventsManager objectAtIndex:i];
        CLLocation *loc = [[CLLocation alloc] initWithLatitude:tmp.coordinate.latitude longitude:tmp.coordinate.longitude];
        CLLocationDistance distance = [currentLocation distanceFromLocation:loc];
        if(distance>0){

            while(distance > 400.0){
                distance -= 400.0;
            }
            radius= distance / 400.0;
            radius *= center.y;
            [[UIColor redColor] setStroke];
            CGContextSetLineWidth(context, 5);
            CGContextSetAlpha(context, 0.6);

            startRad = [self getRadians:tmp.start];
            endRad = [self getRadians:tmp.einde];

            CGContextAddArc(context, center.x, center.y, radius, startRad, endRad, YES);
            CGContextStrokePath(context);
        }
    }
} 
```

- 更新 -

我想在 RadarView 中尝试的是：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSLog(@"This is called <3");
        UIButton *btn= [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btn.frame = CGRectMake(0, 0, 25, 25);
        btn.backgroundColor = [UIColor clearColor];
        [btn setTitle:@"test" forState:UIControlStateNormal];
        [btn addTarget:self action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:btn]; 
    }
    return self;
} 
```

但这不起作用，它不显示

# sharepoint - CAML“不在”查询

> ID：11580391
> 
> 赞同：8
> 
> 时间：2012-07-20T13:30:29.050
> 
> 标签：sharepoint, caml

有没有办法在 SharePoint 2010 中执行类似“NOT IN”行为的操作？我可以很容易地实现这样的 IN 行为：

```
<Where>
   <In>
      <FieldRef Name="ID"/>
      <Values>
         <Value Type="Counter">1</Value>
         <Value Type="Counter">2</Value>
         <Value Type="Counter">3</Value>
         <Value Type="Counter">4</Value>
         <Value Type="Counter">5</Value>
      </Values>
   </In>
</Where> 
```

但是有没有办法选择所有不在值枚举中的值？

这是用例：我有一个 AllowMultipleValues = true 的 Lookup 字段，我需要从 LookupList 中获取所有项目，这些项目不包含在 Lookup 字段中

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T14:32:45.940

从 SharePoint 2010 开始，有`NotIncludes`可能适合您的元素。来自 MSDN：

> 如果指定字段是允许多个值的查找字段，则指定将 Value 元素从由 FieldRef 元素指定的字段的列表项中排除。

模板：

```
<NotIncludes>
    <FieldRef Name="Field_Name" />
    <Value Type="Field_Type" />
    <XML />
</NotIncludes> 
```

*   [**更多阅读：NotIncludes 元素**](http://msdn.microsoft.com/en-us/library/ff630174%28v=office.14%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-30T16:44:29.350

要获得与“In”相反的行为，您必须进行嵌套的“Neq”查询。如果您正在处理具有**多个值**的查找字段，则“NotIncludes”可以替换或与“Neq”结合使用。

```
<Query>
    <Where>
        <And>
            <And>
                <Neq>
                    <FieldRef Name="ID" /><Value Type="Counter">5</Value>
                </Neq>
                <Neq>
                    <FieldRef Name="ID" /><Value Type="Counter">13</Value>
                </Neq>
            </And>
            <And>
                <NotIncludes>
                    <FieldRef Name="children" /><Value Type="Lookup">20</Value>
                </NotIncludes>
                <NotIncludes>
                    <FieldRef Name="children" /><Value Type="Lookup">32</Value>
                </NotIncludes>
            </And>
        </And>
    </Where>
</Query> 
```

如果您想要更多变量，则需要进行更多嵌套。玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:02:52.277

我认为不相等选项将是构建此 CAML 查询的最佳方式

也许这个（没有测试这个，所以请耐心等待）

```
<Query>
   <Where>
     <And>
       <Neq>
          <FieldRef Name="ID" /><Value Type="Counter">1</Value>
       </Neq>
       <Neq>
          <FieldRef Name="ID" /><Value Type="Counter">2</Value>
       </Neq>
       <Neq>
          <FieldRef Name="ID" /><Value Type="Counter">3</Value>
       </Neq>
     </And>
   </Where>
</Query> 
```

你应该看看可用的比较运算符

*   包含
*   开始于
*   等式，等式
*   Neq，不等于
*   Gt，大于
*   Lt, 小于
*   Geq, 大于或等于
*   Leq，小于等于
*   DateRangesOverlap，将重复事件中的日期与指定值进行比较
*   IsNotNull
*   一片空白

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T12:09:33.737

我最接近的是使用`<NotIncludes></NotIncludes>`，但由于某种原因，它的工作方式与`<In></In>`. 在`<In>`我可以使用`<Values>`. 看起来`<NotIncludes>`您只能指定一个值。其余部分必须被`<Or>`编辑，类似于`<Neq>`.

# openlayers - OpenLayers 中的 ESRI 休息服务未显示

> ID：11580394
> 
> 赞同：1
> 
> 时间：2012-07-20T13:30:42.027
> 
> 标签：openlayers, esri

我正在使用 OpenLayers 开发一个地图项目，我想在谷歌图像底图上显示街道数据。ESRI 通过他们的 ArcGIS REST 服务器提供了一个很好的街道叠加层，但我无法让 OpenLayers 加载它。我试过按照文档和[这个示例](http://dev.openlayers.org/examples/arcgis93rest.html)进行操作，但无法弄清楚我在做什么不同的事情，这使它不起作用。它将与 Google 卫星底图一起在图层面板中放置一个新图层，但该图层中没有加载任何内容——它是空白的。这是我的代码：

```
function addOpenLayers() {
    var mapcenter = new OpenLayers.LonLat(-90.8, 46.45)
    var base = new OpenLayers.Layer.Google("Google Satellite", {type: google.maps.MapTypeId.SATELLITE, numZoomLevels:22});

    var olOptions = {
        controls: [new OpenLayers.Control.PanZoomBar, new OpenLayers.Control.LayerSwitcher, new OpenLayers.Control.Navigation],
    }
    var olMap = new OpenLayers.Map("map", olOptions);

    olMap.addLayer(base);

    olMap.setCenter(mapcenter.transform(
        new OpenLayers.Projection("EPSG:4326"),
        olMap.getProjectionObject()
    ), 10);

    //This is the part that doesn't work:
    var esriRoadsUrl = "http://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer";
    var esriRoads = new OpenLayers.Layer.ArcGIS93Rest("Roads", esriRoadsUrl, {layers: "show:0"});
    esriRoads.isBaseLayer = false;

    olMap.addLayer(esriRoads);
} 
```

# matlab - Matlab：根据波长而不是频率绘制

> ID：11580399
> 
> 赞同：0
> 
> 时间：2012-07-20T13:30:49.637
> 
> 标签：matlab, plot, frequency

我有一系列与频率相关的点。如何根据波长而不是频率绘制该阵列？请记住，我不想定义函数，只是在这里使用数组。下面是我如何绘制称为 Q 的数组：

```
f = 100:500;  % frequency points
Q = f^2;      % a "function" of frequency
plot(f,Q) 
```

现在我知道我可以简单地定义一个新阵列`lambda=c/f`，其中 c=光速，但是我可以根据波长重新绘制 Q，而不必将 Q 重新定义为波长的函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:47:32.650

当然，只需更改 x 轴：

```
plot(c./f, Q); 
```

# php - 需要将xml转换为php数组

> ID：11580402
> 
> 赞同：-1
> 
> 时间：2012-07-20T13:30:54.800
> 
> 标签：php, xml

我有 XML 喜欢：

```
[domain] => Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [name] => AlOkJainist
                    [com] => y
                    [comscore] => 805
                    [net] => y
                    [netscore] => 779
                    [tv] => y
                    [tvscore] => 753
                    [cc] => y
                    [ccscore] => 728
                )

        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [name] => BargainsdiAlOg
                    [com] => y
                    [comscore] => 805
                    [net] => y
                    [netscore] => 779
                    [tv] => y
                    [tvscore] => 753
                    [cc] => y
                    [ccscore] => 728
                )

        )

    [2] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [name] => AlOkayJain
                    [com] => y
                    [comscore] => 792
                    [net] => y
                    [netscore] => 766
                    [tv] => y
                    [tvscore] => 740
                    [cc] => y
                    [ccscore] => 715
                )

        )

    )

) 
```

我想创建 PHP 数组，如：

```
array(
    'AlOkJainist' => array([com] => y, [net] => y),
    'BargainsdiAlOg' => array([com] => y, [net] => y),
    'AlOkayJain' => array([com] => y, [net] => y),

); 
```

请帮帮我，我试过但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:37:24.330

您可以使用 php 提供的[SimpleXML](http://php.net/manual/en/book.simplexml.php)库。传递 xml 文档，然后递归循环并构建一个数组。

```
function toArray( $obj, &$arr = null ) {
    if ( is_null( $arr ) )   $arr = array();
    if ( is_string( $obj ) ) $obj = new SimpleXMLElement( $obj );

    // Get attributes for current node and add to current array element
    $attributes = $obj->attributes();
    foreach ($attributes as $attrib => $value) {
      $arr['attributes'][$attrib] = (string)$value;
    }

    $children = $obj->children();
    $executed = false;
    // Check all children of node
    foreach ($children as $elementName => $node) {
      // Check if there are multiple node with the same key and generate a multiarray
      if($arr[$elementName] != null) {
        if($arr[$elementName][0] !== null) {
          $i = count($arr[$elementName]);
          toArray($node, $arr[$elementName][$i]);
        } else {
          $tmp = $arr[$elementName];
          $arr[$elementName] = array();
          $arr[$elementName][0] = $tmp;
          $i = count($arr[$elementName]);
          toArray($node, $arr[$elementName][$i]);
        }
      } else {
        $arr[$elementName] = array();
        toArray($node, $arr[$elementName]);
      }
      $executed = true;
    }
    // Check if is already processed and if already contains attributes
    if(!$executed && $children->getName() == "" && !isset ($arr['attributes'])) {
      $arr = (String)$obj;
    }
    return $arr;
  } 
```

# algorithm - 演练算法

> ID：11580403
> 
> 赞同：-1
> 
> 时间：2012-07-20T13:30:59.607
> 
> 标签：algorithm, fibonacci

嗨，我正在尝试理解这个算法，并试图通过它来查看会产生什么值，但这样做的运气并不好。我想我不知道我是否做对了。这是算法

```
Algorithm Fast-Fibonacci(n)
Let fib[0] and fib[1] be 1.
for each i from 2 to n, do:
  Let fib[i] be fib[i - 2] + fib[i - 1].
end of loop
return fib[n].

say Fast-Fib(5)
fib[0] = 0
Fib[1] = 1
fib[2] = {2-2] + [2-1] = 1
fib[3] = [3-2] + [3-1] = 3
fib[4] = 4-2] + [4-1] = 5 
```

那么循环退出对吗？导致 01135 作为答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:35:33.150

您正在访问 的元素`fib`，因此`Fast-Fib(5)`您将获得：

```
fib[0] = 1
fib[1] = 1
fib[2] = fib[2-2] + fib[2-1] = fib[0] + fib[1] = 1+1 = 2 // i==2
fib[3] = fib[3-2] + fib[3-1] = fib[1] + fib[2] = 1+2 = 3 // i==3
fib[4] = fib[4-2] + fib[4-1] = fib[2] + fib[3] = 2+3 = 5 // i==4
fib[5] = fib[5-2] + fib[5-1] = fib[3] + fib[4] = 3+5 = 8 // i==5 
```

返回`fib[5]`（即5）

*注意*：我根据问题初始条件（`fib[0]`= `fib[1]`=1）更新了值；经常`fib[0]`=0；`fib[1]`=1

# javascript - 访问主机名/端口号以调用 ajax 请求

> ID：11580404
> 
> 赞同：1
> 
> 时间：2012-07-20T13:30:59.737
> 
> 标签：javascript, ajax, jquery

我正在使用 ajax 请求从 URL 重新运行 json。

这在本地工作如下：

```
$.ajax({
            url: "http://localhost:8080/updates.json",      
            type: 'post',
            dataType : "json",
            success : function(jsonResponse) {  
            }); 

            },
            error: function (err) {
            } 

        }); 
```

url 需要更新，以便无论部署在哪个 na eof 服务器上都能正常工作。

url 是否可以替换为：“http://”+getThisHostName()+":8080/updates.json"？

是否有返回当前主机名路径的安全方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:34:51.370

你可以这样做

```
//say you are on http://domain.com:8080
//this will request from http://domain.com:8080/updates.json
$.ajax({
    url: "/updates.json", 
    ...
}); 
```

# database-design - 描述键值数据库的模型/规范

> ID：11580405
> 
> 赞同：3
> 
> 时间：2012-07-20T13:31:04.073
> 
> 标签：database-design, nosql, redis, data-modeling, key-value-store

我正在寻找一种正式/半正式的方式来描述使用键值方法（例如 Redis）的数据库模型。

我想这一切都归结为描述命名方案（每个键的期望值）：有没有擅长这样做的模型？任何例子都会很棒。

非常感谢。

# c# - 如何与 Selenium 中的不可见 div 交互？

> ID：11580414
> 
> 赞同：0
> 
> 时间：2012-07-20T13:31:32.510
> 
> 标签：c#, selenium

我在 C# 中使用 Selenium Firefox 驱动程序。在它测试的网站上有一个div。当我单击 div 时，它会显示另一个具有 contenteditable 的 div（所以它就像输入但文本在 div 的内部）。

我需要用 Selenium 对其进行测试，但是当我单击 div 时，第二个不显示。当我尝试更改第二个 div 的内部时，Selenium 返回错误，即它无法与不可见的元素交互。

所以我尝试使用 document.evaluate 调用 JavaScript 来查找具有类名的 div（它没有 id）并删除显示属性。但是我有错误，因为由于 div 是不可见的，所以它不在 DOM 中。

如何从 Selenium Firefox WebDriver 将文本正确放入第二个 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:06:31.133

检查您用于查找第一个 div 的定位器。很可能它是不正确的，因此您实际上并没有单击第一个 div，因此第二个 div 永远不会变得可见。

要使用类名查找 div，请使用`"css=div[class='className']"`

# spring-mvc - SpringMVC 错误：Bean 名称“用户”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：11580415
> 
> 赞同：0
> 
> 时间：2012-07-20T13:31:36.690
> 
> 标签：spring-mvc

环境：SpringMVC Maven Netbeans Glassfish

> 严重：Bean 名称“用户”的 BindingResult 和普通目标对象都不能用作请求属性 java.lang.IllegalStateException：Bean 名称“用户”的 BindingResult 和普通目标对象都不能用作 org.springframework.web.servlet.support 的请求属性.BindStatus.(BindStatus.java:141) at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178) at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath( AbstractDataBoundFormElementTag.java:198) 在 org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164) 在 org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag。autogenerateId(AbstractDataBoundFormElementTag.java:151) at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142) at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag. java:126) 在 org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421) 在 org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)在 org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102) 在 org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) 在 org.apache.jsp .user_jsp._jspx_meth_form_input_0(user_jsp.java:178) 在 org.apache.jsp.user_jsp._jspx_meth_form_form_0(user_jsp.java:120) 在 org.apache.jsp.user_jsp._jspService(user_jsp.java:76) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase .java:111) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:847) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403) 在 org.apache.jasper.servlet。 JspServlet.serviceJspFile(JspServlet.java:492) at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378) at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) at org.apache .catalina.core.StandardWrapper.service(StandardWrapper.java:1539) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) 在 org.apache.catalina.core.StandardContextValve。在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) 在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) 调用(StandardContextValve.java:175) .enterprise.web.WebPipeline.invoke(WebPipeline.java:98) at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java :162) 在 org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) 在 com.sun.enterprise.v3。 services.impl.ContainerMapper.service(ContainerMapper.java:174) 在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828) 在 com.sun.grizzly。http.ProcessorTask.doProcess(ProcessorTask.java:725) 在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019) 在 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) ) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask. java:59) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util。AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722)

用户.jsp：

```
 <form:form action="createuser.do" modelAttribute="user" method="POST">
        <table align="center" >
            <tr>
                <td>User Name :</td>
                <td><form:input path="userName"/></td>
            </tr>
            <tr>  
                <td><input type="submit" value="Submit" /></td>
            </tr>
        </table>
    </form:form> 
```

我的控制器：

```
@Controller
public class UserController {
    @RequestMapping(value = "/createuser.do", method = RequestMethod.POST)
    public void create(@ModelAttribute("user")  User user, BindingResult result) {
        System.out.print("user name: "+user.getUserName());
    }
} 
```

当我访问“http://localhost:8080/NBGFMN/user.jsp”java.lang.IllegalStateException 时在浏览器上出现此错误：Bean 名称“用户”的 BindingResult 和普通目标对象都不能用作请求属性

如果我`form:input path="userName"`从 jsp 中删除 )，则当我单击提交按钮控制台输出“用户名：null”时，jsp 会正确显示。

stackoverflow 中有很多关于这个相同错误的帖子，但没有一个解决方案对我有用。

我添加了以下GET方法和welcome.jsp

```
@RequestMapping(value = "/welcome.do", method = RequestMethod.GET)
public ModelAndView printHello()
{
    ModelAndView m = new ModelAndView("welcome");
    m.addObject("ppp", "hello");
    return m;
}

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <c:out value="${ppp}" ></c:out>
    </body>
</html> 
```

并访问“http://localhost:8080/NBGFMN/welcome.do”，效果很好。

我添加了以下 GET（创建用户），它可以工作：

```
@RequestMapping(value = "/createuser.do", method = RequestMethod.GET)
public String create(ModelMap mm) 
{
    mm.addAttribute("auser", new User("Andy"));
    return "welcome";
}

<body>
    <c:out value="${auser.userName}" ></c:out>
</body> 
```

我访问“http://localhost:8080/NBGFMN/createuser.do”，浏览器输出“Andy”

但是表单 POST 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:55:29.863

您是否尝试在`GET`处理程序中设置一个请求属性，其名称`user`和值包含一些包含字段的对象`userName`？像这样：

```
@Controller
public class UserController {

    @RequestMapping(value = "/createuser.do", method = RequestMethod.GET)
    public void create(ModelMap mm) {
        mm.addAttribute("user", new UserFormObject());
    }

    @RequestMapping(value = "/createuser.do", method = RequestMethod.POST)
    public void create(@ModelAttribute("user") User user, BindingResult result) {
        System.out.print("user name: "+user.getUserName());
    }
} 
```

在您的 JSP 中，您需要`method=post`为您的`form:form`元素指定[默认方法是`GET`](http://www.w3.org/TR/2011/WD-html5-20110525/Overview.html#form-submission-0)，它与您的处理程序不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T00:07:03.817

在这种情况下，我必须提出两个重要的观点：

1.  `BindingResult`与直接`@ModelAttribute`条目相关联
2.  当您报告错误时，您会将其与模型属性相关联。此属性名称应出现在 中`@ModelAttribute`，并且区分大小写。

样本：

```
@ModelAttribute("side") SideDetails s,BindingResult sideResult          
@ModelAttribute("track") TrackDetails t, BindingResult trackResult 
```

在上面的例子中，`sideResult`目标为`SideDetails`. 同样，`trackResult`将有`TrackDetails`作为目标。

用 报错时`sideResult`，会在 model 中搜索属性名`SideDetails`。找不到这个属性，我们得到这个博客中报告的错误。

希望这可以帮助。

# ios - 前台和后台线程的不同 ManagedObjectContexts

> ID：11580421
> 
> 赞同：2
> 
> 时间：2012-07-20T13:31:52.697
> 
> 标签：ios, core-data, nsmanagedobjectcontext, nsoperation

我是 iOS 开发新手。我正在编写一个允许用户读取/写入核心数据记录的 iOS 应用程序。这些记录将通过 http 同步到服务器。我有一组在执行同步的后台线程中运行的链式（串行）NSOperations。

用户可以在同步我们运行的同时读/写。我的计划是在应用程序中使用两个 managedObjectContexts（都使用相同的 persistentStoreCoordinator），一个用于前台，一个用于后台。

我的 NSOperations 创建的所有后台线程都将连续运行并使用后台 MOC。所有基于 UI 的东西都将使用前台 MOC。

我的问题是：这是可接受的 iOS 核心数据模式吗？我可以愉快地在这两个 MOC 中对同一个模型数据库进行读/写操作，而不必担心锁定和并发问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T12:23:43.933

这是一种常见的核心数据模式，框架旨在适应这种模式。

如果您自己管理线程，则需要使用一种称为“线程限制”的技术，您可以在标题为“与核心数据的并发”部分的文档中阅读更多相关信息。

除了线程限制之外，iOS 5.0 中还有旨在帮助管理并发的新功能。现在可以`NSManagedObjectContext`使用`NSManagedObjectContextConcurrencyType`. 您可以在 a`NSMainQueueConcurrencyType`和之间进行选择`NSPrivateQueueConcurrencyType`。

在主线程上运行的上下文，`NSMainQueueConcurrencyType`可用于为 UI 提供服务。上下文`NSPrivateQueueConcurrencyType`用于后台任务。

`performBlock:`要使用私有上下文，您可以通过和方法与之交互，`performBlockAndWait:`以确保您的代码在正确的线程上执行。要使用主队列上下文，您可以正常与它交互，或者如果您的代码未在主线程上运行，则使用块方法。

这些新功能在文档中没有详细讨论，在“iOS v5.0 的核心数据发布说明”部分中有一些信息。然而，WWDC 2012 会议视频中有更深入的讨论：“Session 214 - Core Data Best Practices”。

# html - 检查流星模板中的空值

> ID：11580422
> 
> 赞同：5
> 
> 时间：2012-07-20T13:31:55.863
> 
> 标签：html, templates, meteor

我正在使用流星。我有一个看起来像这样的模板，

```
<template name="SearchAct">
{{#each SearchPerson}}
    <div class="result"><!--This is one search result box-->
        <div class="resultContent">
            <img src={{payload.pic_square}} alt="profile photo" class="floatLeft" />
            <p>{{payload.uid}}</p>
            <span class="floatLeft">
                {{payload.first_name}}
                <br/>
                {{payload.last_name}}
            </span>
            <input type="checkbox" class="floatRight" />
            <h4>Tennis</h4>
            <span class="age_location">
                {{#if payload.birthday}}
                    {{payload.birthday}},
                {{/if}}
                {{#if payload.sex}}
                    {{payload.sex}}
                {{/if}}
                <br/>
                {{#if payload.hometown_location}}
                    {{payload.hometown_location.city}},
                    {{payload.hometown_location.state}},
                    {{payload.hometown_location.country}}
                {{/if}}
            </span>
            <div class="line"></div>
            <a href="#" class="clear" onclick="renderProfile({{payload.uid}});">See Their Details</a>  
        </div><!-- End of resultContent--> 
    </div><!-- End of result box-->
{{/each}}
</template> 
```

现在我想检查`{{payload.birthday}}`. 在这里，如果我得到`null`价值，我想显示一条消息。我怎么能检查一个`null`值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T08:53:21.760

我认为你只需要一个`{{else}}`：

```
<span class="age_location">
    {{#if payload.birthday}}
        {{payload.birthday}}
    {{else}}
        No birthday found
    {{/if}}
</span> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T00:03:55.693

Handlebars（以及 Meteor 的扩展）不允许模板内的逻辑。因此，您需要使用 Handlebars 助手扩展您的模板或所有项目的模板。将以下内容放入项目中任何客户端加载的 JavaScript 文件中：

```
Handlebars.registerHelper("isNull", function(value) {
  return value === null;
}); 
```

然后你可以在你的模板中使用它作为你的参数`if`：

```
{{#if isNull payload.birthday}}Your birthday is null!{{/if}} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-25T08:49:52.120

我想你可以试试这个，`count`如果值`birthday`eql 0 为假，你可以使用，它对我有用

```
<span class="age_location">
    {{#if payload.birthday.count}}
        {{payload.birthday}}
    {{else}}
        you display message
    {{/if}}
</span> 
```

参考：[https ://groups.google.com/forum/#!topic/meteor-talk/Gumkz9VnLYY](https://groups.google.com/forum/#!topic/meteor-talk/Gumkz9VnLYY)

# c# - 在我的数据库中存储时区信息的最佳方式是什么？

> ID：11580423
> 
> 赞同：23
> 
> 时间：2012-07-20T13:32:00.657
> 
> 标签：c#, sql-server, timezone, timezone-offset

我有一个我接管的 asp.net-mvc 网站，并且有一个页面页面，人们可以在其中输入信息和时间（包括本地时区）。数据库保留了开始时间、结束时间和时区，因为我觉得它有点不稳定。这是获取列表以供选择的代码：

```
 static private IEnumerable<SelectListItem> GetTimeZones(string selected)
    {
        var timeZoneNames = TimeZoneInfo.GetSystemTimeZones()
            .Where(tz => tz.DisplayName.Contains("London")
                         || tz.DisplayName.Contains("Hong Kong")
                         || tz.DisplayName.Contains("Mumbai")
                         || tz.DisplayName.Contains("Eastern Time"))
            .ConvertAll(tz => tz.DisplayName).ToList();

        var items = new List<SelectListItem>();
        foreach (var item in timeZoneNames)
        {
            var slItem = new SelectListItem();
            slItem.Text = item;
            slItem.Value = item;
            slItem.Selected = item == selected;
            items.Add(slItem);
        }

        return items;
    } 
```

所以它只是存储从 TimeZoneInfo.GetSystemTimeZones() 返回的完整字符串

这种方法有什么缺陷吗？我有点担心[在这里读到](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.getsystemtimezones.aspx)这来自机器本地，如果不同的机器有不同的设置会怎样。此外，试图弄清楚是否所有内容都列为 UTC 或 GMT 等。. 有更好的建议吗？例如，我应该在网站上转换为 UTC 并规范数据库中的所有时间吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-20T13:34:33.460

您应该存储由返回的 ID [`TimeZoneInfo.Id`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.id.aspx)。这就是标识符 - 用于*标识*时区的字符串。使用显示名称是一个非常糟糕的主意，因为它可能因文化而异，而且不太可能是稳定的。

然后，您可以使用[`TimeZoneInfo.FindSystemTimeZoneById`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.findsystemtimezonebyid.aspx)从 ID 中检索区域。

诚然，我更喜欢 TZDB 进行时区处理，但那是另一回事 :)

# python - Python soaplib“Hello World”程序 - 参数和类型未显示在客户端

> ID：11580425
> 
> 赞同：0
> 
> 时间：2012-07-20T13:32:03.727
> 
> 标签：python, suds, soaplib

我正在尝试运行soaplib Hello World 程序：

```
import soaplib
from soaplib.core.service import rpc, DefinitionBase
from soaplib.core.model.primitive import String, Integer
from soaplib.core.server import wsgi
from soaplib.core.model.clazz import Array
from soaplib.core.service import soap

class HelloWorldService(DefinitionBase):
    @soap(String,Integer,_returns=Array(String))
    def say_hello(self,name,times):
        results = []
        for i in range(0,times):
            results.append('Hello, %s'%name)
        import pdb; pdb.set_trace() 
        return results

if __name__=='__main__':
    try:
        from wsgiref.simple_server import make_server
        soap_application = soaplib.core.Application([HelloWorldService], 'tns')
        wsgi_application = wsgi.Application(soap_application)
        server = make_server('localhost', 7789, wsgi_application)
        server.serve_forever()
    except ImportError:
        print "Error: example server code requires Python >= 2.5" 
```

我在使用浏览器和简单的 suds 客户端连接到服务时遇到问题。我使用[此处最佳答案](https://stackoverflow.com/questions/241892/suds-programmatic-access-to-methods-and-types)中的代码来获取我的小 Web 服务的方法列表，以及它们是参数和类型。我得到的结果并不是特别令人鼓舞：

```
say_hello(None: say_hello) 
```

因此，我无法正确调用该函数的原因似乎是它的参数和类型似乎没有注册：但是，据我所知，情况并非如此。我特别傻眼，因为这是soaplib 网站上展示的hello world 程序。

我在这里和其他地方都进行了搜索，但似乎在任何地方都没有找到类似的问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:48:23.170

我试过[soaplib“Hello world”示例](http://soaplib.github.com/soaplib/2_0/pages/helloworld.html)。如果您像以前一样添加它，它会起作用 `from soaplib.core.service import soap`。

我已经安装`soaplib`并`suds`使用`pip install`.

```
$ pip freeze | grep -e'soaplib\|suds'
soaplib==2.0.0-beta2
suds==0.4 
```

似乎`soaplib`被重构为`rpclib`替换为`spyne`. 它不能提供对项目的信心。

# c# - EF Code First：无法连接到 SQL Server

> ID：11580431
> 
> 赞同：1
> 
> 时间：2012-07-20T13:32:37.120
> 
> 标签：c#, .net, sql-server, entity-framework, ado.net

我正在尝试使用代码优先方法创建数据库。当我运行以下代码时，出现以下异常。我们怎样才能克服这一点？

笔记：

*   我的系统上有 SQL Server 2008 R2。
*   我没有使用任何配置文件。我假设它将使用约定创建数据库
*   已经没有打开的连接；我刚刚重新启动系统并进行了测试。还是同样的问题。
*   **EntityFramework.dll**的运行时版本是 v4.0.3xxx

**例外**：

> 提供者未返回 ProviderManifestToken 字符串

**留言**：

> 此操作需要连接到“主”数据库。无法创建到“主”数据库的连接，因为原始数据库连接已打开并且凭据已从连接字符串中删除。提供一个未打开的连接。

**内部异常**：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

代码：

```
using System.Data.Entity;
namespace LijosEF
{
  public class Dinner
  {
      public int DinnerID { get; set; }
      public int Title { get; set; }
  }

  public class RSVP
  {
    public int RSVPID { get; set; }
    public int DinnerID { get; set; }

    public virtual Dinner Dinner { get; set; }
  }

  //System.Data.Entity.DbContext is from EntityFramework.dll
  public class NerdDinners : System.Data.Entity.DbContext
  {
    public DbSet<Dinner> Dinners { get; set; }
    public DbSet<RSVP> RSVPs { get; set; }
  }
}

namespace LijosEF
{
class Program
{
    static void Main(string[] args)
    {
        using (var db = new NerdDinners())
        {
            var product = new Dinner { DinnerID = 1, Title = 101 };
            db.Dinners.Add(product);
            int recordsAffected = db.SaveChanges();
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:43:13.393

没有任何连接信息。EF 将尝试在 SQL Express 而不是 SQL Server 中创建数据库。如果你想在 SQL Server 中创建它，你需要提供一个连接字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:45:18.867

```
public class NerdDinners : System.Data.Entity.DbContext
{
    public DbSet<Dinner> Dinners { get; set; }
    public DbSet<RSVP> RSVPs { get; set; }
} 
```

将其更改为

```
public class NerdDinners : System.Data.Entity.DbContext
{
    public NerdDinners(string connString):base(connString)
    {}
    public DbSet<Dinner> Dinners { get; set; }
    public DbSet<RSVP> RSVPs { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T14:05:59.420

解决和知道您在做什么的最简单方法是在您的 app.config 中添加一个 Connectionstring，如下所示：

```
<connectionStrings>
    <clear/>
    <add name="NerdDinners"
          providerName="System.Data.SqlClient"
          connectionString="Server=.;Database=NerdDinners;Integrated Security=True;"/>
  </connectionStrings> 
```

# c# - 当这些数字是字符串时比较数字

> ID：11580433
> 
> 赞同：2
> 
> 时间：2012-07-20T13:32:37.490
> 
> 标签：c#, string, comparison

以下是一些简短的背景信息：

在设计规则引擎以将表单的各个方面与所需的输入进行比较时，我偶然发现了必须检查一个数字是否大于另一个数字的问题，使用 > 和 < 运算符很容易，对吧？错了，我必须比较的这两个类型是字符串，它们必须是字符串，它不是可以改变的。

所以希望看看引擎会在哪里发生故障，所以我知道从哪里开始，我告诉它比较“100”和“10,000”，当它正确计算出 10k 更大时，你可以想象我的惊讶，然后我意识到 DUH 它只是比较字符串长度，所以我比较了 1001 和 1000，再次正确，1001 更大。

但我坚持认为这不应该起作用，所以我一直在用各种各样的场景来打击引擎，决心看着它失败。在一位同事指出该系统能够比较 1001 和 1000 作为文件名并正确排序后，最新的想法是它比较了某种 aschii 字符值，测试继续。这将失败，我不能接受它能够正确计算当两者都是字符串时哪个数值更大。

所以我的下一个想法是它正在排列每个字符的第一个字符并通过字符串的每个部分比较值。当我测试 11,111 到 9,999 并认为 9,999 更大时，我终于成功了。完美，我很高兴将 1 与 9 进行比较，每次 9 都赢了，简单的修复，在较短的字符串前面加上 0。

通过引擎运行这个新理论，它又一次愉快地计算出哪个更大。

但是我仍然不相信，这种比较肯定还有其他陷阱，但是我没有比较来测试来证明我的理论。所以我向你提出的问题是，你认为这可能会在什么情况下失败？

你自己以前试过这个吗？当它们是字符串时比较数字，你面临的陷阱是什么？我是否已经将它们全部覆盖了，还是我忽略了一些主要的陷阱？

我不相信这种方法是万无一失的（但是请注意，我没有测试诸如 100d 到 10000 之类的字符串，因为有验证可以确定这一点）

提前致谢！

注意：我确实做了一些谷歌搜索和搜索，我认为这里没有任何问题，是的，有些是相似的，但他们担心字符串中不想要数字，不想要只有数字的字符串，所以我认为这不同足以发帖。

注2：我的具体问题是使用数字字符串而不是整数时，数字比较会在哪里失败

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:35:30.040

要比较字符串中的数字，最好先将它们转换为数字，例如使用`int.Parse`. 让其他人弄清楚将字符串解析为数字的所有文化敏感的复杂性，然后只使用简单的数字比较，这更加万无一失，更不用说更容易了。

如果字符串并不总是数字，请[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)适当使用和处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:48:08.223

让我看看我是否理解你的问题：

您基本上是在询问以下是否成立：

给定正整数 n1 和 n2 及其对应的词法表示 L(n1) 和 L(n2)，n1 < n2 当且仅当 L(n1) < L(n2)？

如果这是问题，那么它是正确的，您可以从词典排序的定义中得出它。

请参阅：[http](http://www.dartmouth.edu/~matc/DiscreteMath/III.5.pdf) : //www.dartmouth.edu/~matc/DiscreteMath/III.5.pdf 定义定义 III.5.2。

但是，您没有提到所有整数都是正数，但负整数正好相反。

让我担心的是存在不代表整数的非字符串的可能性。你能以某种方式避免它吗？如果不是，这是非常危险的做法，并且会产生非常意想不到的行为。

# android - 具有公共服务的应用程序自动启动

> ID：11580435
> 
> 赞同：-1
> 
> 时间：2012-07-20T13:32:42.743
> 
> 标签：android, android-service

我支持具有下一个结构的项目：

库项目，包含常用类：Activity、Java 类和 Service 类。还存在 3 个使用此库的另一个项目。在我使用服务的每个项目中，从下一个 Intent 开始：

意图意图 = 新意图（上下文，LibraryService.class）。

服务不共享，其他应用程序不应访问它们。

问题是，如果有 2 个或所有 3 个应用程序使用这个库，安装在设备上，当我启动一个实例时，其他应用程序也会启动。我在 DDMS 中看到所有 3 个应用程序都已启动。我认为，公共服务类中的问题。这是真的？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:41:17.933

检查您的清单文件。也许您没有正确过滤意图。

```
 <... android:name="YourApp">
        <intent-filter>
            <action android:name="com.your.intent.to.filter" />       
        </intent-filter> 
    </..> 
```

# php - 用php将html输出保存在txt文件中

> ID：11580440
> 
> 赞同：1
> 
> 时间：2012-07-20T13:33:00.373
> 
> 标签：php, html, file-io

需要生成一个txt文件，输出html代码如下

```
<?php
function video() {
  $video = 'BYN-DEM7Mzw';
  echo '<script type="text/javascript">
    function youtubeFeedCallback( data ){
      document.writeln( data.entry[ "media$group" ][ "media$description" ].$t.replace( /\n/g, "<br/>" ) + "<br/>" ); }
    </script>
    <script type="text/javascript" src="http://gdata.youtube.com/feeds/api/videos/'.$video.'?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback"></script>';
}
ob_start();
video();
$output = ob_get_clean();
$desc = $output;
$video = 'BYN-DEM7Mzw';
$arq = $video.".txt";
$f = fopen($arq, "w+");
fclose;
$f = fopen($arq, "a+");
$content = "";
if(filesize($arq) > 0)
$content = fread($f, filesize($arq));
fwrite($f, $desc);
fclose($f);
?> 
```

文件保存我的脚本而不是输出 html 的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:41:27.910

我认为您应该在其中使用正确的[标题](http://php.net/manual/en/function.header.php)和正确的[mime](http://en.wikipedia.org/wiki/MIME)。

例如

```
header('Content-Description: File Transfer');
header('Content-type: text/plain');
header('Content-Disposition: attachment; filename='.$file);
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));

if ($file != '')
{ 
    echo file_get_contents($file);
} 
```

# c# - 如何为以下 SQL 编写 Entity Framework 4 查询？

> ID：11580442
> 
> 赞同：2
> 
> 时间：2012-07-20T13:33:27.580
> 
> 标签：c#, entity-framework

我的应用程序中有一个 Entity Framework 4 模型。我需要它来生成以下 SQL：

```
SELECT *
FROM       Reads            AS R
INNER JOIN Images           AS I ON R.ReadId = I.ReadId AND I.ImageTypeId = 2
LEFT OUTER JOIN Alarms      AS A ON R.ReadId = A.ReadId AND A.DomainId IN (103,102,101,2,1,12) AND A.i_active = 1
LEFT OUTER JOIN ListDetails AS L ON L.ListDetailId = A.ListDetailId
WHERE R.i_active = 1 
```

这是我现在在我的代码中对此查询的内容：

```
var items = from read  in query
            join plate in context.Images      on read.ReadId        equals plate.ReadId
            join temp1 in context.Alarms      on read.ReadId        equals temp1.ReadId       into alarms  from alarm in  alarms.DefaultIfEmpty()
            join temp2 in context.ListDetails on alarm.ListDetailId equals temp2.ListDetailId into entries from entry in entries.DefaultIfEmpty()
            where plate.ImageTypeId == 2 && plate.IActive == 1
            select new { read, plate, alarm, entry.OfficerNotes }; 
```

如何修改实体框架查询以获得我需要的 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:38:27.277

对于左连接 - 我建议使用 a`from`而`where`不是`join`，我发现它更干净

对于具有多个连接条件的内部连接 ​​- 您需要连接两个匹配的匿名类型，或使用`from`with`where`条件

对于 x IN 列表，您需要在查询之外指定您的列表并使用`Any`方法或`Contains`方法

```
List<int> domainIds = new List<int>() { 103,102,101,2,1,12 };

    var items = from read  in query
                join plate in context.Images
                on new { read.ReadId, ImageTypeId = 2 } equals new { plate.ReadId, plate.ImageTypeId }
                from alarm in context.Alarms
                                     .Where(x => x.IActive == 1)
                                     .Where(x => domainIds.Any(y => y == x.DomainId))
                                     .Where(x => read.ReadId == x.ReadId)
                                     .DefaultIfEmpty()
                from entry in context.ListDetails 
                                     .Where(x => alarm.ListDetailId == x.ListDetailId)
                                     .DefaultIfEmpty()
                select new { read, plate, alarm, entry.OfficerNotes }; 
```

# javascript - 仅使用 javascript 而没有 cookie 的年龄验证：如何？

> ID：11580443
> 
> 赞同：1
> 
> 时间：2012-07-20T13:33:32.957
> 
> 标签：javascript, cookies

我正在为一家销售啤酒的欧盟公司建立一个网站，并且需要一个年龄验证启动画面。这很容易，我已经有了一个。我在页眉中使用了一个轻量级的 cookie 插件（在优秀的 ht​​tp: [//microjs.com](https://github.com/js-coder/cookie.js)上可以找到[cookie.js](http://microjs.com)）。这或多或少是我的设置：

JS（在`<head>`元素中）

```
if (cookie.get("agechecked")) {
    document.documentElement.className += " agechecked";
} 
```

CSS

```
.agechecker { display: block; width: 100%; height: 100%; ... } 
.agechecked .agechecker { display: none }; 
```

可悲的是，对于少数游客来说，年龄检查不能正常工作。有些人无法通过它，对于其他人来说，它会在每次页面加载后弹出，而对于某些人来说，cookie 只是不起作用，这意味着“记住我”复选框对他们来说已损坏。我想使用替代路线至少确保年龄检查不会阻止任何人完全查看该网站。

我只有 javascript 可供我使用，不想使用 cookie。因为我很确定会话的等价物是浏览器关闭后过期的 cookie - 所以这将我的选择限制为......是的，什么？

我正在考虑的替代方案：

*   [jStorage](http://www.jstorage.info/) - 但这依赖于 jQuery 或 Prototype 等框架，这意味着我必须在页面标题中加载 jQuery。那不行；
*   该`window.name`方法结合 JSON 将数据存储在 window`name`属性中，这对我的口味来说有点太 hacky，并且也不会延续到其他选项卡
*   我可以检查推荐人（访问者是否已经在该域的另一个页面上？）这是他/她通过年龄检查的 90% 保证

我在 stackoverflow 上找不到任何真正有用的信息，但我相信你们中的一些人已经建立了年龄验证。你是如何解决这些问题的？

（编辑：我知道，我应该构建一个实际发布到服务器的表单，我可以在其中以无数不同的方式存储和检索信息，但只要从我这里拿走我就必须依赖 javascript。无能为力）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:37:50.957

HTML5 webstorage ( [`localStorage`](https://stackoverflow.com/tags/local-storage/info)) 是一种客户端持久性机制。有关浏览器兼容性，请参阅[http://caniuse.com/#feat=namevalue-storage](http://caniuse.com/#feat=namevalue-storage)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:43:14.120

我阅读了您的问题，因为您需要一种在不使用 cookie 的情况下跨网页保持状态的方法。这里有几个选择：

*   Html5 本地存储[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)
*   URL 中的数据 (http://example.com/app/agechecked/main)
*   数据作为 GET 变量 ( ?agechecked=1 )

# java - 结果集工作

> ID：11580446
> 
> 赞同：1
> 
> 时间：2012-07-20T13:33:42.253
> 
> 标签：java, jdbc, resultset

我热衷于深入了解 ResultSet 的工作原理。我对 ResultSet 有很多疑问。比如性能方面哪个更好。

```
 while(rs.next())
{
  //  iterate as well as do call some other functions.
}
  or 
while(rs.next())
{
 // iterate and store the column values in a map
}
// do functions using the map. 
```

因为该表被许多其他并发程序访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:42:44.320

这将取决于很多因素。

*   您的“其他功能”的处理密集程度如何。如果处理是最小的，那么它并不重要，但它涉及大量的 CPU 使用，然后延迟处理直到结果集关闭应该可以提高事务性能。
*   结果集有多大？如果它相当小，那么将它读入 Map 就可以了，但如果它很大并且您的处理会将其处理成更小的形式，那么您最好在循环内进行处理。

查看免费 VisualVM 中的 CPU 和内存分析，或使用一些基本时序来了解正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:08:38.080

最好的做法是，通常遵循的标准是将所有值存储到一个对象中，然后返回该对象。这不过是一个数据传输对象（DTO 设计模式）。

在第一种情况下，你正在做

1.  建立与数据库的连接。
2.  执行一些 SQL 语句，然后通过获取结果集。
3.  以及 ResultSet 的迭代，在这一步中：您将调用一些其他函数，我们不知道需要多少时间才能完成。

    主要缺点是长时间按住连接对象不好，因为它可能是其他用户需要的，当然它是最昂贵的。

# javascript - Javascript 属性访问速度：var.property 与 var["property"] 的区别？

> ID：11580448
> 
> 赞同：6
> 
> 时间：2012-07-20T13:33:44.053
> 
> 标签：javascript, performance

我有一个非常基本的 JavaScript 问题。

我正在编写一个将生成 JavaScript 代码的程序。为了访问变量的属性，我有两种选择：

```
1\. make the property access a static query. i.e.
var result = object.property

OR

2\. make the property access a dynamic query, i.e.
var result = object["property"] 
```

它对我的不同之处在于，对于第一种情况（静态查询情况），我必须为每个属性访问生成单独的代码。而在第二种情况（动态查询情况）中，我可以为每个属性重用相同的函数。

我可以决定我是否知道这对性能有什么影响？

`obj.property`更快还是`obj["property"]`？

可能这也取决于将用于解释 javascript 的引擎，所以我必须提到我将使用 Rhino 作为我的 javascript 引擎。

所以请对这个问题有所了解。

谢谢，问候， VImal

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:35:30.857

Javascript 中没有静态属性，只有动态属性访问存在。

无论您在源代码文件中放置什么语法，始终以相同的方式查询属性。

使用 jshint 为您的 JS 文件推荐好的源代码约定：

[http://jshint.com/](http://jshint.com/)

始终建议使用点表示法。仅当您的 Javascript 属性没有传入 JS 语法的 id 时，才使用引号表示法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:37:43.180

强调代码的可重用性和可维护性。完成后，如果它运行缓慢，请尝试查看它在哪里运行缓慢并更好。

`object.property`那么，在效率和效率方面有什么区别`obj["property"]`吗？我不这么认为，但大多数情况下，我认为在完成的工作代码遇到性能问题之前，您不应该打扰。最后一部分应该是你的担心。

即使你发现你的代码运行缓慢，我敢打赌这不会是原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T14:06:58.233

我在 Node.JS 上做了这个测试

```
var obj = {test:"test"}

var time1 = new Date();
var t1 = time1.getTime();  

for(i = 0; i < 1000000000; i++){
  obj.test;
}

var time2 = new Date();
var t2 = time2.getTime();

console.log(t2-t1)

var time3 = new Date();
var t3 = time3.getTime();

for(i = 0; i < 1000000000; i++){
  obj["test"];
}

var time4 = new Date();
var t4 = time4.getTime();

console.log(t4-t3) 
```

我发现两者的表现几乎相同，`obj.test`表现略好于`obj["test"]`

# objective-c - Sqlite3 数据库标准和属性：从 .CSV 或 .XLS 到 Xcode 4.3.3 中的 .sqlite

> ID：11580451
> 
> 赞同：0
> 
> 时间：2012-07-20T13:34:01.817
> 
> 标签：objective-c, sqlite, csv, xls

Hy，将 .xls 或 .csv 文件转换为 .sqlite 文件时需要选择和检查哪些标准/属性。我应该注意什么和注意什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:21:42.963

我明白了，最简单的方法是使用 NAVICAT FOR SQLITE 从 .xls 文件中导入它。使用任何其他软件可能会导致一些问题..

# orbeon - Orbeon 缓存标头

> ID：11580453
> 
> 赞同：0
> 
> 时间：2012-07-20T13:34:16.900
> 
> 标签：orbeon

我正在运行 orbeon 3.70beta，我需要避免缓存。特别是我需要 orbeon 在 http 响应中返回以下属性：

```
Cache-Control=max-age=0  
Pragma=no-cache  
Expires=0 
```

我在 properties.xml 上尝试了这个属性：

```
<property as="xs:string"
      name="oxf.http.page.cache-headers"
      value="Cache-Control: max-age=0; Pragma: no-cache; Expires: 0"/>

<property as="xs:string"
      name="oxf.http.resource.cache-headers"
      value="Cache-Control: max-age=0; Pragma: no-cache; Expires: 0"/> 
```

但我仍然收到这样的回复：

```
Cache-Control:public
Content-Language:en-US
Content-Length:772
Content-Type:text/html; charset=utf-8
Date:Fri, 20 Jul 2012 13:14:18 GMT
Expires:Fri, 20 Jul 2012 13:14:18 GMT
Last-Modified:Fri, 20 Jul 2012 13:00:51 GMT
Pragma:
Server:WebSphere Application Server/6.1

Note:
Also I add a filter in the web.xml and add the compiled filter but it 
seems that orbeon is overriding the cache headers in some point.

Note2:
I already override the cache headers on other application (using a filter) in the 
same websphere and the headers are successfully overridden. So the Websphere 
is not the problem. 
```

我将非常感谢您的帮助。

谢谢，弗朗西斯科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:26:00.953

这些属性是为 Orbeon Forms 4.0 添加的，因此它们不适用于 3.7。（3.7.1 已经超过 3 年了，而您使用的 3.7.0beta 版本可能更老。）最好的办法是使用像[UrlRewriteFilter](https://code.google.com/p/urlrewritefilter/)这样的 servlet 过滤器或像 Apache 这样的前端 HTTP 服务器来做到这一点。

# java - 如何使用 Java 获取用户 IP 和主机名

> ID：11580456
> 
> 赞同：-2
> 
> 时间：2012-07-20T13:34:28.977
> 
> 标签：java, ip, localhost, remote-host

```
InetAddress addr = java.net.InetAddress.getRemoteHost();
MyHost = addr.getHostName();
IPaddressString = addr.getHostAddress(); 
```

上述代码返回用户本地数据为 127.0.0.1 和 Localhost

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:40:58.350

**1.**如果你想要远程用户的IP，那么你必须有他的域名，如果你想要他的域名，那么你必须有他的IP。

**2.**现在我希望你在 LAN 环境中，并且已经正确配置了 IP。

**3.**尝试为您的PC分配一个ip假设192.168.20.1，另一台PC为192.168.20.2

**4.**如果您有与远程PC关联的域名，那么您将使用您的代码获得他的域名作为回报。

# c++ - C++ 不同的单例实现

> ID：11580461
> 
> 赞同：2
> 
> 时间：2012-07-20T13:34:35.503
> 
> 标签：c++, design-patterns, static, singleton, lazy-initialization

我通常以这种方式实现单例模式：

```
class Singleton
{
    public:
        virtual ~Singleton() {}

        static Singleton& GetInstance()
        {
            static Singleton instance;
            return instance;
        }

    private:
        Singleton();
        Singleton(const Singleton&);
        Singleton& operator=(const Singleton&);
} 
```

最近，我遇到了这个实现，它略有不同：

```
class Singleton
{
    public:
        Singleton();
        virtual ~Singleton() {}

        static Singleton& GetInstance()
        {
            return instance;
        }

    private:
        Singleton(const Singleton&);
        Singleton& operator=(const Singleton&);

        static Singleton instance;
}

Singleton Singleton::instance; 
```

哪个实施更好？

不将构造函数设为私有（第二次实现）不是很危险吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:36:20.167

它们是有区别的。在第一种情况下`instance`，在第一次调用函数时初始化。在第二种情况下，它在程序启动时被初始化。

如果您创建一个`public`构造函数 - 它不是 a `singleton`，因为它可以由任何人创建

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:13:30.523

我不需要重复其他答案中关于懒惰构造单例的好处。

让我补充一下：

> ```
> public:
>     Singleton();
>     virtual ~Singleton() {} 
> ```

这个特定类的设计者觉得有必要允许：

*   从这个`Singleton`类派生，说派生类被称为`DerSingleton`
*   `DerSingleton`可以有可以用指针删除的实例`Singleton`（所以`DerSingleton`不是单例）

的任何实例`DerSingleton`也是`Singleton`定义的实例，因此可以得出，如果`DerSingleton`被实例化，`Singleton`则不是单例。

所以这个设计断言了两件事：

*   这个类是一个单例
*   这个类*不是*单例

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T13:45:53.857

如果您在另一个命名空间级别变量或类静态成员的初始化期间尝试使用单例，则会出现主要的行为差异。在第一种情况下，由于实际对象是在第一次函数调用期间按需创建的，因此*构造期间*的行为将得到很好的定义。在第二种情况下，所有的赌注都被取消了，因为来自不同翻译单元的静态对象初始化的相对顺序是未定义的。

另请注意，虽然第一个在*施工*期间是安全的，但在破坏期间可能不是。也就是说，如果具有静态存储持续时间的对象在构造过程中不使用单例，则可以在单例实例之前对其进行初始化。销毁的顺序与构造的顺序相反，在这种特殊情况下，单例将在另一个对象之前被销毁。如果该对象在其析构函数中使用单例，它将导致未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T13:40:19.333

第二种实现是**错误**的。默认构造函数应该是私有的。事实上，它本身并不是一个单例。除此之外，@Andrew 和@Brady 的答案中提到了实现之间的差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T13:40:53.610

两者之间的一个重要区别是第二个示例中实例的创建是线程安全的。

你是绝对正确的，构造函数应该是私有的。

这是一个相关的问题：[https ://stackoverflow.com/a/10479084/1158895](https://stackoverflow.com/a/10479084/1158895)

# fiddler - 通过 Fiddler 发送时，使用 HttpWebRequest 从 WinForms 应用程序向 Web 服务发送 POST 不起作用

> ID：11580462
> 
> 赞同：0
> 
> 时间：2012-07-20T13:34:36.083
> 
> 标签：fiddler

我在 VB.Net WinForms 应用程序中使用 HttpWebRequest 从内部网络服务获取数据。在 Fiddler 未运行时运行时，我使用的代码适用于 GET 和 POST。如果我让 Fiddler 运行 GET 工作并被捕获但 POST 未完成。在这种情况下，Fiddler 捕获了初始请求，但从未得到响应，应用程序也没有得到响应。

该代码为 POST 设置适当的属性构建 HttpWebRequest，将要发送的数据编码为 JSON，然后执行此操作。

```
Using postStream As Stream = webrequestobj.GetRequestStream()
    postStream.Write(WebServiceByteData, 0, WebServiceByteData.Length)
End Using 
```

我使用 WireShark 捕获生成的网络数据包，并注意到当发送 POST 而不通过 Fiddler 时，会发生以下情况。

*   当执行“postStream As Stream = webrequestobj.GetRequestStream()”时，会发送一个包含所有标头信息的数据包，其中包括“Expect: 100-continue”标头，但没有请求数据。
*   执行 postStrean.Write 调用时，会发送一个包含请求数据的附加数据包。

在 Fiddler 运行的情况下，直到 postStream.Write 执行后，才会在网络上放置任何东西。此时，带有“Expect: 100-continue”标头的标头数据包和请求数据包在服务响应“100 Continue”之前被背靠背发送。我猜这会使 web 服务感到困惑，因为它不希望得到请求数据包。它不响应请求的数据。

我使用 Composer 手动创建没有“Expect: 100-continue”标头的请求。执行此操作时，会生成相同的两个数据包，并且服务会使用预期的数据进行响应。

因此，为了能够使用 Fiddler 捕获 POST 流量，看起来我需要能够告诉 HttpWebRequest 不要发出“Expect：100-continue”标头（我已经看过但没有找到方法）或 Fiddler 以不同的方式处理数据包，可能在看到“100 Continue”响应或剥离“Expect: 100-continue”标头之前不发送第二个数据包。

我可能错过了 Fiddler 中的设置选项，但到目前为止我没有尝试过任何不同。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:09:13.317

老问题，但简短的回答是，缺少 100/Continue 响应根本不重要。

要了解有关 Expect: Continue 的更多信息，包括如何根据需要删除此标头，请参阅[http://blogs.msdn.com/b/fiddler/archive/2011/11/05/http-expect-continue-delays-transmitting -post-body-by-up-to-350-milliseconds.aspx](http://blogs.msdn.com/b/fiddler/archive/2011/11/05/http-expect-continue-delays-transmitting-post-bodies-by-up-to-350-milliseconds.aspx)

# php - 在编辑器中链接到其他帖子时使用标准永久链接

> ID：11580465
> 
> 赞同：2
> 
> 时间：2012-07-20T13:34:39.467
> 
> 标签：php, wordpress

我注意到，当使用 visual/html 编辑器插入指向其他帖子/页面的链接时，WordPress 使用在永久链接设置中选择的 url 结构。

是否可以在编辑器的链接对话框中使用标准的永久链接结构 (yourdomain.com/?p=123)？

这样，我将能够更改我链接到的帖子或页面的 slug，同时仍然保持活动链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:43:05.127

如果您决定更改帖子的永久链接而不是向公众公开丑陋的永久链接（并冒着被共享和索引）。重定向有一个设置，每当您自动更改永久链接时都会添加新的重定向，因此您在更改链接时无需执行任何操作。

# wpf - 自定义命令更新 CanExecute

> ID：11580466
> 
> 赞同：2
> 
> 时间：2012-07-20T13:34:40.403
> 
> 标签：wpf, command

我必须在 WPF 应用程序中使用这个命令（我真的不喜欢它，但如果我必须 -> 我必须）： [http ://wpftutorial.net/DelegateCommand.html](http://wpftutorial.net/DelegateCommand.html)

但是我在这里遇到的主要问题是我不想在我的代码的几乎每一行中都调用

> RaiseCanExecuteChanged()

方法。那么我该怎么做才能像 RoutedUICommand 那样自动执行该操作。

我有很多数据绑定，例如如果 Foo.FooProp != null 命令可以执行。但是我想要尽可能少的代码，所以我必须在任何地方注册事件或在我的应用程序中更新命令......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:31:55.810

当我使用 a时，只要命令依赖的属性发生更改`DelegateCommand`，我就手动引发事件。`CanExecuteChanged``PropertyChange`

这是我几天前做的一个例子，`CanExecute`它基于`IsLoading`and`IsValid`属性：

```
public MyViewModel()
{
    this.PropertyChanged += MyViewModel_PropertyChanged;
}

void MyViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    switch (e.PropertyName)
    {
        case "IsLoading":
        case "IsValid":
            ((DelegateCommand)MyCommand).RaiseCanExecuteChanged();
            break;
    }
}

public ICommand MyCommand
{
    get
    {
        if (_myCommand == null)
            _myCommand = new DelegateCommand(Run, CanRun);

        return _myCommand;
    }
}

public bool CanRun()
{
    return this.IsValid && !IsLoading;
} 
```

我发现这使逻辑易于遵循和维护，并且仅`CanExecuteChanged()`在相关属性更改时才检查方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T13:44:44.077

您可以实现一种表单，每当 UI 中可能的结果发生变化时，`DelegateCommand`它就会调用添加到的委托。`CanExecuteChanged`此示例使用[`CommandManager.RequerySuggested`](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.requerysuggested.aspx).

```
public class AutoDelegateCommand : DelegateCommand, ICommand
{
    public AutoDelegateCommand(Action<object> execute)
        : base(execute)
    {
    }        

    public AutoDelegateCommand(Action<object> execute, Predicate<object> canExecute)
        : base(execute, canExecute)
    {
    }

    event EventHandler ICommand.CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }
} 
```

我想我以前见过这样的例子，也许是在 MVVMLight 工具包中？

# java - 同一群体中的重复个体

> ID：11580470
> 
> 赞同：2
> 
> 时间：2012-07-20T13:35:02.150
> 
> 标签：java, genetic-algorithm, genetic-programming

[我实现了jenes](http://jenes.ciselab.org/Home)库提供的 Java 示例（[教程 5：ObjectChromosome‎</a>）。我发现人群中的个体都是相同的（即没有发生随机化）；](http://jenes.ciselab.org/tutorials/tutorial5/jenes-tutorial-problem5-ocproblem-java)

 [我在 OCProblem 类之后添加了以下代码`ga.evolve();`来打印人口中的每个人：

```
ga.evolve();
Population pop= ga.getCurrentPopulation();
ArrayList population_test= pop.getIndividuals();

for(int n=0; n < population_test.size(); n++){
    Individual<ObjectChromosome> individual=(Individual<ObjectChromosome>) population_test.get(n);
    ObjectChromosome chrom = individual.getChromosome();

    int i1 = (Integer)chrom.getValue(0);
    int i2 = (Integer)chrom.getValue(1);
    double i3= (double)chrom.getValue(2);
    boolean i4= (boolean)chrom.getValue(3);
    Color i5= (Color)chrom.getValue(4);

    System.out.println("[ "+ i1+" , "+ i2+" , "+ i3+" , "+ i4+" , "+ i5+" ] "); 
} 
```

输出是令人震惊的个人是重复的！这是之前代码的输出

> 教程 5：找到最接近目标的颜色序列。[6，20，0.5623470035526044，false，（红色）] [6，20，0.5623470035526044，false，false，（红色）] [6，20，0.56234700355526044 ）] [6，20，0.5623470035526044，false，（红色）] [6，20，0.5623470035526044，false，false，（red）] [6，20，0.5623470035526044 (红色) ] [ 6 ,20 , 0.5623470035526044 , 假 , (红色) ] [ 6 , 20 ,0.5623470035526044 , 假 , (红色) ]](http://jenes.ciselab.org/tutorials/tutorial5/jenes-tutorial-problem5-ocproblem-java) 

[有谁知道为什么](http://jenes.ciselab.org/tutorials/tutorial5/jenes-tutorial-problem5-ocproblem-java)[jenes](http://jenes.ciselab.org/Home)库中的随机方法对人群不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:20:02.610

免责声明： *我对遗传算法或特别是这个库没有丝毫（嗯，也许是一些）想法。*

尽管如此，我还是大胆猜测一下：

1）你得到的每个循环：

```
ObjectChromosome chrom = individual.getChromosome(); 
```

然后使用一些未在此范围内定义的名为*template*的变量，愉快地丢弃此信息：

```
int i1 = (Integer)template.getValue(0); 
```

ETC...

2）这个猜测有点超出我的直接知识：检查所有人口。真的不可能所有标本都进化成具有相同的遗传指纹吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T17:14:39.600

显然，突变率太低（如果我正确理解他们的 API，则为 2%）。如果您更改此行：

> ga.addStage(new SimpleMutator(0.02));

对于这样的事情：

> ga.addStage(new SimpleMutator(0.2));

这将增加突变率。它应该可以解决问题。至于为什么他们在教程中采用这种方式，我不知道，但我认为教程与他们的最新版本有点过时了。

# php - 当 Zend_Form 验证，验证并发现错误时所有 jQuery 隐藏字段都显示出来？

> ID：11580473
> 
> 赞同：0
> 
> 时间：2012-07-20T13:35:06.700
> 
> 标签：php, jquery, zend-framework, zend-form, show-hide

我正在使用`Zend_Form`和表单验证。问题是我使用 jQuery`show()`和`hide()`函数隐藏了一些表单字段。

这里的问题是，如果验证发现错误，所有的表单字段都会显示出来，我想要的是保持隐藏和可见字段的状态。知道为什么会这样吗？

如果代码有所不同，请索取，我会立即提供。

`Zend_Form`代码：

```
$this->setMethod('post');

$element = new Zend_Form_Element_File("file", array(
    'validators' => array(
        array('Extension', true, 'hume')
    )
));
$element->setDestination("/var/www/testGraduationProject1/public/TempFolder/");
$element->setLabel("Upload");
$this->addElement($element);

$this->addElement('submit', 'Upload', array(
    'ignore' => true,
    'label' => 'Upload',
));

$this->addElement('select', 'Work_Space', array(
    'Multioptions' =>
        array(
            'Hume_Compile_Selection' => 'Please Select Compiling type',
            'Hume_Recourses' => 'Hume Recourses',
            'Hume_Compile' => 'Hume Compile',
        ),
    'id' => 'Work_Space',
    'label' => 'Compiler'
));

$this->addElement('select', 'Editor', array(
    'Multioptions' =>
        array(
            'Choose Editor' => 'Choose Editor',
            'TinyMce' => 'TinyMce',
            'Ymacs' => 'Ymacs',
        ),
    'id' => 'Editor',
    'label' => 'Editor'
));

$this->addElement('text', 'File_Name', array(
    'label' => 'File name',
    'required' => true,
));

$this->addElement('checkbox', 'Advanced_Settings', array(
    'checked' => '0',
    'label' => 'Advanced Settings',
    'id' => 'Advanced_Settings',
));

$this->addElement('textarea', 'Advanced_Options', array(
    'label' => 'Advanced Options',
    'cols' => 50,
    'rows' => 7,
    'id' => 'Advanced_Options',
    'validators' => array(
        array('regex', true, array(
            'pattern' => '/[^[a-zA-Z ><+.,!@#$%^&*()\"\'=]/',
            'messages' => 'Please only numbers without spaces'
            )
        )
    ),
    'attribs' => array('disabled' => 'disabled'),
));

$this->addElement('textarea', 'comment', array(
    'label' => 'Hume Code',
    'required' => true,
    'class' => 'markItUp',
    'id' => 'comment'
));

$this->addElement('checkbox', 'Few_Compile', array(
    'checked' => '1',
    'label' => 'Fewer Results',
    'class' => 'Fewer_Results'
));

$this->addElement('submit', 'Compile_Recourses', array(
    'ignore' => true,
    'label' => 'Compile Recourses',
    'class' => 'Compile_Recourses'
));

$this->addElement('radio', 'Time_Out', array(
    'label' => 'Compiling Time',
    'multiOptions' => array(
         '5' => '5s',
         '10' => '10s',
         '15' => '15s',
     ),
     'value' => array('5s' => '5s')
));

$this->addElement('checkbox', 'Compile_Advanced', array(
    'checked' => '0',
    'label' => "Set Heap Wire Stack Size's",
    'id' => 'Compile_Advanced',
));

$this->addElement('textarea', 'Heap_Size', array(
    'label' => 'Heap Size',
    'Id' => 'Heap-Size',
    'cols' => 5,
    'rows' => 1,
    'validators' => array(
        array('regex', true, array(
            'pattern' => '/[0-9]/',
            'messages' => 'Please only numbers without spaces'
            )
        )
    ),
    'attribs' => array('disabled' => 'disabled'),
));

$this->addElement('textarea', 'Wire_Heap_Size', array(
    'label' => 'Wire_Heap Size',
    'Id' => 'Wire-Heap-Size',
    'cols' => 5,
    'rows' => 1,
    'validators' => array(
        array('regex', false, array(
            'pattern' => '/[0-9]/',
            'messages' => 'Please only numbers without spaces'
            )
        )
    ),
    'attribs' => array('disabled' => 'disabled'),
));

$this->addElement('textarea', 'Stack_Size', array(
    'label' => 'Stack Size',
    'Id' => 'Stack-Size',
    'cols' => 5,
    'rows' => 1,
    'validators' => array(
        array('regex', false, array(
            'pattern' => '/[0-9]/',
            'messages' => 'Please only numbers without spaces'
            )
        )
    ),
    'attribs' => array('disabled' => 'disabled'),
));

$this->addElement('submit', 'Execute_Hume', array(
    'ignore' => true,
    'label' => 'Execute And Compile Hume',
));

$this->addElement('submit', 'Compile_Hume', array(
    'ignore' => true,
    'label' => 'Compile Hume',
));

// die($this->UserHasId);
if ($this->UserHasId) {
    $this->addElement('submit', 'Save_File', array(
        'ignore' => true,
        'label' => 'Save File',
    ));
} 
```

jQuery`hide()`和`show()`函数

```
<script type="text/javascript">
    $(document).ready(function(){              
        $("#Advanced_Settings").click(function(){

            if ($('#Advanced_Settings').is(':checked')) {
                $('#Advanced_Options').removeAttr('disabled');
                $('#Few_Compile').attr("disabled", "disabled");

            } else {
                $('#Advanced_Options').attr("disabled", "disabled");
                $('#Few_Compile').removeAttr('disabled');
            }  
        });     
    });
</script>
<script type="text/javascript">
    $(document).ready(function(){              
        $("#Compile_Advanced").click(function(){

            if ($('#Compile_Advanced').is(':checked')) {
                $('#Heap_Size').removeAttr('disabled');
                $('#Wire_Heap_Size').removeAttr('disabled');
                $('#Stack_Size').removeAttr('disabled');

            } else {
                $('#Heap_Size').attr("disabled", "disabled");
                $('#Wire_Heap_Size').attr("disabled", "disabled");
                $('#Stack_Size').attr("disabled", "disabled");

            }  
        });     
    });
</script>

<script type="text/javascript">
    $(document).ready(function(){
        var WorkSpace = $("#Work_Space").val();
        if(WorkSpace == "Hume_Compile_Selection"){

            $('#Time_Out-label').hide();
            $('#Time_Out-element').hide();
            $('#Compile_Advanced-label').hide();
            $('#Compile_Advanced-element').hide();              
            $('#Heap_Size-label').hide();
            $('#Heap_Size-element').hide();
            $('#Wire_Heap_Size-label').hide();
            $('#Wire_Heap_Size-element').hide();
            $('#Stack_Size-label').hide();
            $('#Stack_Size-element').hide();
            $('#Compile_Hume-element').hide();
            $('#Execute_Hume').hide();

            $('#Advanced_Settings-label').hide();
            $('#Advanced_Settings-element').hide();
            $('#Advanced_Options-label').hide();
            $('#Advanced_Options-element').hide();
            $('#Few_Compile-label').hide();
            $('#Few_Compile-element').hide();
            $('#Compile_Recourses-label').hide();
            $('#Compile_Recourses-element').hide();
        }
        $("#Work_Space").change(function(){
            var WorkSpace = $(this).val();
            if(WorkSpace == "Hume_Recourses"){

                $('#Time_Out-label').hide();
                $('#Time_Out-element').hide();
                $('#Compile_Advanced-label').hide();
                $('#Compile_Advanced-element').hide();              
                $('#Heap_Size-label').hide();
                $('#Heap_Size-element').hide();
                $('#Wire_Heap_Size-label').hide();
                $('#Wire_Heap_Size-element').hide();
                $('#Stack_Size-label').hide();
                $('#Stack_Size-element').hide();
                $('#Compile_Hume-element').hide();
                $('#Execute_Hume').hide();

                $('#Advanced_Settings-label').show();
                $('#Advanced_Settings-element').show();
                $('#Advanced_Options-label').show();
                $('#Advanced_Options-element').show();
                $('#Few_Compile-label').show();
                $('#Few_Compile-element').show();
                $('#Compile_Recourses-label').show();
                $('#Compile_Recourses-element').show();
            }else if(WorkSpace == "Hume_Compile"){
                $('#Time_Out-label').show();
                $('#Time_Out-element').show();
                $('#Compile_Advanced-label').show();
                $('#Compile_Advanced-element').show();              
                $('#Heap_Size-label').show();
                $('#Heap_Size-element').show();
                $('#Wire_Heap_Size-label').show();
                $('#Wire_Heap_Size-element').show();
                $('#Stack_Size-label').show();
                $('#Stack_Size-element').show();
                $('#Compile_Hume-element').show();
                $('#Execute_Hume').show();

                $('#Advanced_Settings-label').hide();
                $('#Advanced_Settings-element').hide();
                $('#Advanced_Options-label').hide();
                $('#Advanced_Options-element').hide();
                $('#Few_Compile-label').hide();
                $('#Few_Compile-element').hide();
                $('#Compile_Recourses-label').hide();
                $('#Compile_Recourses-element').hide();
            }else if(WorkSpace == "Hume_Compile_Selection"){
                $('#Time_Out-label').hide();
                $('#Time_Out-element').hide();
                $('#Compile_Advanced-label').hide();
                $('#Compile_Advanced-element').hide();              
                $('#Heap_Size-label').hide();
                $('#Heap_Size-element').hide();
                $('#Wire_Heap_Size-label').hide();
                $('#Wire_Heap_Size-element').hide();
                $('#Stack_Size-label').hide();
                $('#Stack_Size-element').hide();
                $('#Compile_Hume-element').hide();
                $('#Execute_Hume').hide();

                $('#Advanced_Settings-label').hide();
                $('#Advanced_Settings-element').hide();
                $('#Advanced_Options-label').hide();
                $('#Advanced_Options-element').hide();
                $('#Few_Compile-label').hide();
                $('#Few_Compile-element').hide();
                $('#Compile_Recourses-label').hide();
                $('#Compile_Recourses-element').hide();
            }
        });     
    });
</script>

<script type="text/javascript">
    $(document).ready(function(){
        var count = 0;
        var Editor = $("#Editor").val();
        if(Editor == "Choose Editor"){

            $('#File_Name-label').hide();
            $('#File_Name-element').hide();
            $('#File_Name').hide();

            $('#comment-label').hide();
            $('#comment-element').hide();            
            $('#comment').hide();           
            $('#iframe-ymacs').hide();

            $('#ymacs-use').hide(); 
        }
        $("#Editor").change(function(){
            var Editor = $(this).val();
            if(Editor == "TinyMce"){

                $('#File_Name-label').show();
                $('#File_Name-element').show();            
                $('#File_Name').show();

                $('#comment-label').show();
                $('#comment-element').show();            
                $('#comment').show();

                $('#iframe-ymacs').hide();
                $('#ymacs-use').hide(); 

                $('#accordionResizer').show(); 
                if(count != 0){
                    $('#comment').hide();
                    $('#comment_parent').show();
                }

                if(count == 0){
                    $('#comment-label').show();
                    $('#comment-element').show();            
                    $('#comment').show();
                    tinyMCE.init({

                        // General options
                        mode : "exact",
                        elements : "comment",
                        theme : "advanced",
                        skin : "o2k7",
                        skin_variant : "black",
                        plugins : "safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
                        save_onsavecallback : "saveContent",

                        // Theme options
                        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull", 
                        theme_advanced_buttons2 : "search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,forecolor,backcolor", 
                        theme_advanced_buttons3 : "hr,removeformat,|,sub,sup,|,charmap,|,print,|,fullscreen,code", 
                        theme_advanced_buttons4 : "styleselect,formatselect,fontselect,fontsizeselect",
                        theme_advanced_toolbar_location : "top", 
                        theme_advanced_toolbar_align : "left", 
                        theme_advanced_statusbar_location : "bottom", 
                        theme_advanced_resizing : false,

                        // Drop lists for link/image/media/template dialogs
                        template_external_list_url : "lists/template_list.js",
                        external_link_list_url : "lists/link_list.js",
                        external_image_list_url : "lists/image_list.js",
                        media_external_list_url : "lists/media_list.js",

                        // Replace values for the template plugin
                        template_replace_values : {
                            username : "Some User",
                            staffid : "991234"
                        }       
                    });
                    count++;
                }

            }else if(Editor == "Choose Editor"){

                $('#File_Name-label').hide();
                $('#File_Name-element').hide();            
                $('#File_Name').hide();

                $('#comment-label').hide();
                $('#comment-element').hide();            
                $('#comment').hide();

                $('#iframe-ymacs').hide();
                $('#ymacs-use').hide(); 
                $('#accordionResizer').show();
            }else if(Editor == "Ymacs"){
                $('#File_Name-label').show();
                $('#File_Name-element').show();            
                $('#File_Name').show();

                $('#comment-label').hide();
                $('#comment-element').hide();            
                $('#comment').hide();

                $('#iframe-ymacs').show();
                //$('#iframe-ymacs').contentWindow.location.reload(true);
                // document.getElementById("#iframe-ymacs").contentDocument.location.reload(true);
                //var iframe = document.getElementById("#iframe-ymacs");
                //alert(iframe);
                // iframe.src = iframe.src;
                jQuery.each($("#iframe-ymacs"), function() {
                    $(this).attr({
                        src: $(this).attr("/index/editor")
                    });
                });
                $('#iframe-ymacs').attr('src', '/index/editor'); 
                $('#ymacs-use').show(); 
                $('#accordionResizer').hide();
                //autoResize('#ymacs');
                //$('#accordionResizer').hide(); 
            }
        });     
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:39:33.953

如果我理解，表单已发布，经过验证的服务器端，当它出现错误时，它会被填充并发送回用户。然后，用户会看到带有错误消息的表单，对吗？如果是这种情况，您将需要触发 Advanced_Settings 和 Compile_Advanced 复选框来检查它是否应该显示。就像是：

```
 <script type="text/javascript">
        $(document).ready(function(){              
            $("#Advanced_Settings").click(function(){

                if ($('#Advanced_Settings').is(':checked')) {
                    $('#Advanced_Options').removeAttr('disabled');
                    $('#Few_Compile').attr("disabled", "disabled");

                } else {
                    $('#Advanced_Options').attr("disabled", "disabled");
                    $('#Few_Compile').removeAttr('disabled');
                }  
            }); 

        $('#Advanced_Settings').click();  //This should trigger you checkbox click event
        });

</script> 
```

如果首次提交表单时未单击该复选框，则应该隐藏您的高级设置。

# css - CSS 在 vagrant 环境中的格式不正确

> ID：11580478
> 
> 赞同：3
> 
> 时间：2012-07-20T13:35:32.760
> 
> 标签：css, ubuntu, nfs, vagrant

我有流浪设置作为我的本地开发环境。当 vagrant 启动并且我编辑我的 CSS 文件并在浏览器中查看其源代码时，**我编写的新 CSS 不在文件中，并且文件现在附加了大量问号**：

```
�������������������������� 
```

如果我做 vagrant halt 或 destroy 然后将其恢复，CSS 文件就可以了，新代码可见且格式正确，并且没有问号的迹象。一旦我再次编辑它，同样的事情就会发生。显然，我不想在每次更改 CSS 时都破坏和创建 vagrant。

对此有什么想法吗？

**更新**：有人告诉我这可能与没有安装 NFS 和 vagrant 有关 - 我在 ubuntu 上，我的文件位于加密的主目录中，所以我相信 NFS 不起作用 - 还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T04:50:56.503

也许您可以基于此线程禁用 sendfile：

[vagrant 中的 JS 和 CSS 文件在 VM 之外保存时未正确编码](https://stackoverflow.com/questions/12782946/js-and-css-files-in-vagrant-not-properly-encoded-when-saved-outside-of-the-vm)

在 httpd.conf 中将 enableSendFile 设置为关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:56:25.613

我的虚拟机上没有激活 nfs 有很多问题

当你在文件上运行“ls -la file.css”时你有什么信息？

# virtuemart - 如何在 Virtuemart 中添加自定义字段按钮

> ID：11580482
> 
> 赞同：0
> 
> 时间：2012-07-20T13:35:49.100
> 
> 标签：virtuemart

我希望这个问题有一个简单的答案。我正在使用 Joomla 2.5.6 和 VirtueMart 版本 2.0.8e 创建产品目录。在产品详细信息页面上，我想包含我自己的 pdf 按钮，该按钮将链接到产品手册。

在Virtuemart表单回复的建议下，我在mergemart创建了一个图片自定义字段，但是遇到了两个大问题。

1.  我现在不知道将图像链接到pdf。
2.  我似乎无法从图像中删除标题。

[http://aleksdesign.ca/joomla/component/virtuemart/software-and-solutions/streem-alert-detail?Itemid=0](http://aleksdesign.ca/joomla/component/virtuemart/software-and-solutions/streem-alert-detail?Itemid=0)

请指教。

谢谢， 阿列克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:09:21.357

我的建议是使用 Virtuemart 文件功能。在管理控制面板的“商店”下，选择“媒体”。在那里您可以上传您想要下载的文件。请务必将它们与产品相关联，它们将包含在产品页面中以供下载。要从链接中制作一个按钮，您可以使用 CSS 将它们设置为按钮的样式。我能想到的唯一选择是为 VM 构建一个自定义插件，这将是大量的额外工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T04:31:59.243

在**Joomla Virtuemart 2.0**中制作自定义字段非常简单。您需要打开您的**管理员**，然后转到：

**Virtuemart->产品->自定义字段**

在那里，您将找到一个创建新自定义字段的链接，您可以根据自己的选择创建自定义字段。它提供了各种自定义字段类型。创建并保存自定义字段后，您需要转到要添加它的产品。喜欢：

**产品->您的产品名称->**

打开您的产品并转到**自定义字段**，在底部您可以看到您的自定义字段。将您的自定义字段添加到产品，保存并从您网站的前端检查此产品。

我希望这是有道理的。

谢谢。

# c# - 为什么 Microsoft.Build.Evaluation 在 64 位 PC 上将 $(ProgramFiles) 评估为“c:\program files”？

> ID：11580485
> 
> 赞同：2
> 
> 时间：2012-07-20T13:35:59.500
> 
> 标签：c#, .net, windows, visual-studio-2010, msbuild

我有一个 C# 项目文件 (.csproj)，其中包含对*$(ProgramFiles)*的引用。我使用的是 64 位 Windows 7。当我在 Visual Studio 2010 中编译此项目文件时，它会在*c:\Program Files (X86)*中正确定位该文件。

如果我尝试变得聪明，而是使用 Microsoft.Build.Evaluation.ProjectCollection.LoadProject([project file]) 来尝试在代码中构建它，它会将*$(ProgramFiles)*错误地评估为*c:\Program Files*。

知道问题的原因可能是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:40:34.440

Visual Studio 2010 是一个 32 位进程，[WOW](http://en.wikipedia.org/wiki/WOW64)会给`c:\Program Files (X86)`32 位进程。

我在这里的假设：

> 如果我尝试变得聪明，而是使用 Microsoft.Build.Evaluation.ProjectCollection.LoadProject([project file])，试图在代码中构建它

是不是当您“在代码中”执行此操作时，您的代码正在执行 x64，因此您获得了正常的环境值。

`ProgramFiles(x86)`如果需要 x86 程序文件目录的路径，可以使用 x64 中的环境变量。在 MSBuild 中，这是`$(MSBuildProgramFiles32)`.

# javascript - 如何在 three.js 中创建闪亮的对象？

> ID：11580489
> 
> 赞同：1
> 
> 时间：2012-07-20T13:36:09.993
> 
> 标签：javascript, colors, three.js

我想用三个.js 制作一个立方体，表面有光泽（如银牌/金牌）。有没有我可以使用的特殊材料（比如meshbasicmaterial ..）或者我怎么能做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:42:28.267

试试这个材料：

```
THREE.MeshPhongMaterial( { color: 0xffffff } ) 
```

我从[这里](http://alteredqualia.com/three/examples/webgl_cars.html)得到的。我认为要让它按你的意愿工作，你的场景中必须有一些其他的物体来反射。否则，它看起来不会令人印象深刻。

编辑：我将其更改为 mrdoob 建议的内容。这是他的图书馆，所以我肯定会同意他的意见。

# android - 如何从活动中在android中添加动态数量的片段

> ID：11580497
> 
> 赞同：1
> 
> 时间：2012-07-20T13:36:42.197
> 
> 标签：android, android-layout, android-fragments

我有一个带有必要方法的`fragment`命名`DetailFragment`哪个`extends Fragment`类：`Override`

```
public class DetailFragment extends Fragment{
     //Some neccessary methods are over here
     @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View view = inflater.inflate(R.layout.details, container, false);
    return view;
    }
} 
```

我有一个主要活动：`FragmentActivity extends FragmentActivity`其中设置内容： `setContentView(R.layout.main);`。如果我想添加`DetailFragment`from `FragmentActivity`，我必须在布局文件中声明一个`LinearLayout`（或任何布局） 。通过这种方式，我可以添加一个：`android:id="@+id/container_fragment"``main.xml``DetailFragment`

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
DetailFragment df = new DetailFragment();
ft.add(R.id.container_fragment, df);
ft.commit(); 
```

但是，我只能在其中添加`DetailFragment`1 `container_fragment`。如果我想`DetailFragment`从活动中添加 2 个或更多，我是否必须`container_fragment`在`main.xml`布局中添加 2 个或更多其他？如果没有，我应该怎么做，你能举个例子吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:56:16.220

布局可以包含多个片段，你只需要在调用类的`add`函数时指定不同的标签`FragmentTransaction`。

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.add(R.id.container_fragment, new DetailFragment(), "df_1");
ft.add(R.id.container_fragment, new DetailFragment(), "df_2");
ft.commit(); 
```

# cocoa - 重用主菜单的子菜单作为上下文菜单时避免蓝闪行为

> ID：11580505
> 
> 赞同：1
> 
> 时间：2012-07-20T13:37:44.393
> 
> 标签：cocoa, menu, contextmenu, reusability

我有以下问题： 在 Cocoa 应用程序中，在主菜单中定义并附加了一个子菜单。现在我需要与上下文菜单完全相同的子菜单`NSView`。

现在，我的目标是避免创建与主菜单完全相同的副本。我认为我可以重用已经存在的子菜单。实际上，我可以将相应的菜单分配给`NSView`with Interface Builder，这似乎可行。

但不幸的是，我现在每次在上下文菜单中选择一个项目时，相应的根主菜单项都会闪烁蓝色。

有没有办法禁用这种行为？或者您有其他建议如何在不复制现有子菜单的情况下解决此问题？

# php - php。如何重复和修改数组元素的 HTML 代码？

> ID：11580506
> 
> 赞同：2
> 
> 时间：2012-07-20T13:37:47.470
> 
> 标签：php

我有`$array=array("nothing","1","2","3","4","5","6","7","8","9","10");`一段代码作为模板：

```
$var=<<<EOF

$array[0]
<div>
  <!-- something else -->
  <ul>
    <li>$array[1]</li>
    <li>$array[2]</li>
    <li>$array[3]</li>
  </ul>
  <!-- something else -->
</div>

EOF; 
```

我想在有数组元素时动态重复和修改这个 HTML 代码。我的意思是这个结果：

```
$var=<<<EOF

$array[0]
<div>
  <!-- something else -->
  <ul>
    <li>$array[1]</li>
    <li>$array[2]</li>
    <li>$array[3]</li>
  </ul>
  <!-- something else -->
</div>
<div>
  <!-- something else -->
  <ul>
    <li>$array[4]</li>
    <li>$array[5]</li>
    <li>$array[6]</li>
  </ul>
  <!-- something else -->
</div>
<div>
  <!-- something else -->
  <ul>
    <li>$array[7]</li>
    <li>$array[8]</li>
    <li>$array[9]</li>
  </ul>
  <!-- something else -->
</div>
<div>
  <!-- something else -->
  <ul>
    <li>$array[10]</li>
  </ul>
  <!-- something else -->
</div>

EOF; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:57:39.460

```
<?php
$array[0];

for ($i = 0; $i <= count($array); $i + 3) {
?>
<div>
  <!-- something else -->
  <ul>
    <li><? $array[$i + 1] ?></li>
    <li><? $array[$i + 2] ?></li>
    <li><? $array[$i + 3] ?></li>
  </ul>
  <!-- something else -->
</div>
<?php } ?> 
```

你想要的循环不是标准的，所以只能希望它对你有用。

基本上它以 , 开头`$i = 0`并打印`$i + 1`(= 1), (=2), (=3), 下一轮`$i`等于 3 ( `$i + 3`), 并打印`$i + 1`(=3+1=4), (=5) , (=6),依此类推，直到数组到达末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:16:34.137

扩展@Nadav 的答案并使其变得更好：

```
<?php
$array = array(0);

for ($i = 1; $i < count($array); ): ?>
<div>
  <!-- something else -->
  <ul>
    <li><?php echo $array[$i++] ?></li> // i == 1, 4, 7, ....
    <li><?php echo $array[$i++] ?></li> // i == 2, 5, 8, ....
    <li><?php echo $array[$i++] ?></li> // i == 3, 6, 9, ....
  </ul>
  <!-- something else -->
</div>
<?php endfor; ?> 
```

* * *

但是，如果 2,3 不存在或 5,6 不存在，以上**将失败，等等。**

# 更新：

此代码将正常工作：

```
<?php

$array = array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 11, 22);

for ($i = 1; $i < count($array);): ?>
<div>
  <!-- something else -->
  <ul>
    <?php for($j = 0; $j < 3 && $i + $j < count($array); ++$j):?>
    <li><?php echo $array[$j + $i] ?></li>
    <?php endfor; $i += $j;?> 
  </ul>
  <!-- something else -->
</div>
<?php endfor; ?> 
```

演示：[http ://codepad.org/LFGMkd1G](http://codepad.org/LFGMkd1G)

# c - POSIX 线程 - 只做一次

> ID：11580509
> 
> 赞同：1
> 
> 时间：2012-07-20T13:37:58.227
> 
> 标签：c, pthreads

确保代码区域只能由一个 pthread 执行的最简单方法是什么？

假设有`n`线程（`n`不等于1）

```
// do this once
int x;
x = some_function(); 
printf( "%d\n", x ); 
```

我是否使用共享变量和障碍？让所有变量将它们的线程 ID (?) 分配给一个共享变量，然后写入该变量的最后一个线程可能是主线程？然后稍后在程序中，您可以根据共享变量检查线程 ID 吗？

非常感谢。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:41:48.073

试试 pthread_once() 函数。它是为这个明确的目的而制作的。 [http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_once.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_once.html)

您将使用共享变量来存储结果。为确保变量稳定，您可以使用互斥锁包装 pthread_once()。所有线程都需要锁定和解锁互斥锁，而大多数线程在中间什么都不做，但这种方式可以确保在允许任何线程继续之前完全更新变量。

# php - 在将 BLOB 数据从 php 插入 MySQL 时，我看不到准确的数据类型

> ID：11580511
> 
> 赞同：1
> 
> 时间：2012-07-20T13:38:01.277
> 
> 标签：php, mysql, types, insert, blob

基本上是在进行测试以了解如何在 php/mysql 之间上传/显示图像。

问题是在我上传图像后，在数据库中，BLOB 列只是显示“im”而不是“image/jpeg”。将数据作为“im”插入可能是什么问题？

非常感谢

这是代码

```
$aname = $_POST['aname'];
$adetails = $_POST['adetails'];
$aphoto = addslashes(file_get_contents($_FILES['aphoto']['tmp_name']));
$image = getimagesize($_FILES['aphoto']['tmp_name']); //to know about image type etc.
$aphototype = $image['mime'];

$q = "INSERT INTO animaldata VALUES('','$aname','$adetails','$aphoto','$aphototype')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:48:21.030

我最好的猜测是你最后插入的列应该是一个 varchar，或者不够长（例如，最多只允许 2 个字符），或者类似的东西。还要检查您的表结构！

请注意，在不指定哪些列的情况下插入动物数据，您也会产生一些歧义。我建议命名列，并可能为您的第一列设置默认值...

```
INSERT INTO animaldata
    (Name, Details, Photo, PhotoType)
    Values('$aname', '$adetails', '$aphoto', '$aphototype'); 
```

也查看准备好的陈述......让你的陈述更安全一点;）

# iphone - 如何在 iPhone 中管理多个 UIImageView

> ID：11580512
> 
> 赞同：0
> 
> 时间：2012-07-20T13:38:05.667
> 
> 标签：iphone

我想`UIImageView`在主视图上的每次点击时动态创建，并且还想移动`UIImageView`由手指移动创建的所有内容。我在每次触摸时都成功地进行了动态创建，我的代码如下：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    CGPoint pt = [touch locationInView:self.view];

    imgView = [[[UIImageView alloc] initWithFrame:CGRectMake(pt.x,pt.y, 100, 100)] autorelease];
    imgFilepath = [[NSBundle mainBundle] pathForResource:@"img" ofType:@"png"];
    img = [[UIImage alloc] initWithContentsOfFile:imgFilepath];
    imgView.tag=i;  
    [imgView setImage:img];
    [img release];
    [self.view addSubview:imgView];
} 
```

现在我想移动任何`UIImageView`由手指运动动态创建的东西。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:42:40.380

在您创建它的方法（即您发布的方法）中将 UIImageView 的 userInteractionEnabled 属性设置为 yes：

```
imgView.userInteractionEnabled = YES; 
```

那么你很可能需要继承 UIImageView 并实现以下方法来移动你的图像视图：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
```

提示：在 touchesMoved: 等方法中，您需要跟踪用户手指移动的位置——在阅读了更多文档之后，您很可能最终会使用`-[UITouch locationInView:]`——您需要将坐标转换为您的图像视图，然后在这种情况下移动图像视图本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:42:06.820

在`touchesBegan`检测`imageView`你触摸过的。通过`touchesMoved`将选定`imageView`对象的中心设置为移动的触摸点来移动选定对象。

# php - 上一页 | Drupal 7 中的下一个寻呼机

> ID：11580515
> 
> 赞同：3
> 
> 时间：2012-07-20T13:38:19.603
> 
> 标签：php, drupal-7, pagination

我正在 Drupal 7 中创建我的网站。我需要

`<<Prev | Next>>`

我的网站的分页系统。它是必需的，因为我不想使用 drupal 寻呼机（它不是必需的）。有没有办法改变 Drupal 寻呼机或者我必须使用 Drupal 7 API？

如果我必须使用 API，请给我一个链接或帮助我更改 Drupal 7 分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:43:20.880

您将要阅读有关分页的 Drupal 文档。

这是一种获取 Next/Prev 链接并根据需要设置样式的方法：

Drupal 7：[theme_pager_next](http://api.drupal.org/api/drupal/includes!pager.inc/function/theme_pager_next/7)和[theme_pager_previous](http://api.drupal.org/api/drupal/includes!pager.inc/function/theme_pager_previous/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:51:59.157

您需要在主题 template.php [http://api.drupal.org/api/drupal/includes!pager.inc/function/theme_pager/7](http://api.drupal.org/api/drupal/includes!pager.inc/function/theme_pager/7)中覆盖此功能， theme_pager 将重命名为 YOURTHEMENAME_pager。复制完整的函数并将其重命名，并根据您的要求对函数进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T09:55:13.717

一个非常简单的寻呼机，没有第一个/最后一个链接：

```
<?php
function phptemplate_pager($tags = array(), $limit = 10, $element = 0, $parameters = array()) {
  global $pager_page_array, $pager_total;
  $page_prev = $pager_page_array[$element] - 1;
  $page_curr = $pager_page_array[$element] + 1;
  $page_next = $pager_page_array[$element] + 1;
  if ($pager_total[$element] > 1) {
    $output = '<div class="previous-next">';
    if ($pager_page_array[$element]!=0) $output.= '<a href="?page='.$page_prev.'" class="previous">Previous</a>';
    $output.= '<div class="previous-next-page">Page '.$page_curr.'/'.$pager_total[$element].'</div>';
    if ($page_curr!=$pager_total[$element]) $output.= '<a href="?page='.$page_next.'" class="next">Next</a>';
    $output.= '</div>';
    return $output;
  }
}
?> 
```

你可以自己设置主题，没什么特别的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T13:58:04.557

如果您只想为按钮添加一个类，请使用：

```
function mytheme_pager_link($variables)
{
    $variables['attributes']['class'] = 'btn';
    return theme_pager_link($variables);
} 
```

# reporting-services - ssrs 2008 默认参数到另一个报告

> ID：11580516
> 
> 赞同：0
> 
> 时间：2012-07-20T13:38:20.027
> 
> 标签：reporting-services

我试图通过使用“转到 URL”将参数从 SSRS 的一个报告传递到另一个报告，但是当第二个报告显示我必须重新选择参数（它们不会通过）。你有什么建议吗？

在过去的 3 天里，我对此进行了研究，但没有给出我需要的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:26:26.403

确保您访问的 URL 类似于：

> http://SERVERNAME/reportserver?[PathToReport]&rs:Command=Render&Parameter1=[value]&Parameter2=[Value]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:48:28.790

您可以使用“**转到报告**”操作并将参数值从报告 1 传递到报告 2。

以下屏幕显示了如何使用“转到报告”操作将参数从报告 1 传递到报告 2：

![在此处输入图像描述](../Images/1433c6ce377ec7861cd3148bcee64752.png)

# mysql - MySql 中的两种 JOIN 方式

> ID：11580518
> 
> 赞同：0
> 
> 时间：2012-07-20T13:38:24.587
> 
> 标签：mysql, join

我正在尝试使用 4 个不同的表构建查询：

*   用户_许可证
*   许可证
*   产品
*   要求

有`Users`多个`Licences`，存储在`Users_Licences`. `Products`有多个`Requests`，并且在`Request`表中你有目标许可证，在`Products`表中你有`source_licence`。

我想列出`Products`指定用户在其`Users_Licences`表中拥有的所有具有目标许可证和源许可证（通过）的请求。

很复杂，但这是我现在所处的位置（不工作）：

```
SELECT 
    Request.id AS offer_id, Request.product_id, 
    Request.licence_id AS target_licence_id, 
    Request.trans_price, Products.source_licence_id    
FROM 
    Request    
JOIN 
    Products ON Request.product_id = Products.id    
JOIN 
    Licences ON Products.source_licence_id = Licences.id    
JOIN 
    Licences ON Request.licence_id = Licences.id    
JOIN 
    Users_Licences ON Licences.id = Users_Licences.licence_id    
WHERE 
    Users_Licences.user_id = '$user_id'    
GROUP BY 
    Request.id    
ORDER BY 
    Request.trans_price DESC 
```

你能帮帮我吗？如果我删除该行

```
JOIN Licences ON Products.source_licence_id = Licences.id 
```

它有效，但我有部分结果......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:43:15.900

当您多次使用该表时，您需要使用不同的别名

```
SELECT Request.id AS offer_id, Request.product_id, Request.licence_id AS target_licence_id, Request.trans_price 
, Products.source_licence_id     
FROM Request     
JOIN Products ON Request.product_id = Products.id     
JOIN Licences as l1 ON Products.source_licence_id = l1.id     
JOIN Licences as l2 ON Request.licence_id = l2.id     
JOIN Users_Licences ON l2.id = Users_Licences.licence_id     
WHERE Users_Licences.user_id='$user_id'     
GROUP BY Request.id     
ORDER BY Request.trans_price DESC 
```

# selenium - Selenium - 如何通过浏览器名称获取本地 WebDriver

> ID：11580523
> 
> 赞同：0
> 
> 时间：2012-07-20T13:38:50.087
> 
> 标签：selenium, webdriver

可以通过 DesiredCapabilties 对象通过诸如“firefox”之类的浏览器名称来实例化 RemoteWebDriver。

但是如何使用浏览器名称获取本地驱动程序，例如“FireFoxDriver”？

我的用例如下：要测试的浏览器是通过外部文本文件中的属性指定的。使用另一个属性设置网格 url。如果网格 url 设置为“本地”，我想在文本文件中设置的浏览器上本地运行测试。

（这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:36:31.847

我可以建议一个黑客。在本地计算机上启动 selenium-server，然后您可以使用 remotewebdriver 和主机 url 作为`http://localhost:4444/wd/hub`.

这样您就可以使用相同的远程驱动程序和外部文本文件来控制本地机器上的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:05:33.517

当然。有什么阻碍吗？

```
public static void main(String[] args) {
    WebDriver driver = openBrowser(args[0]);
    // now work with driver as usual
}

public static WebDriver openBrowser(String browserName) {
    if ((browserName == null) || (browserName.trim().isEmpty())) {
        throw new IllegalArgumentException("No browser name found.");
    }

    // works with Java 7, on Java < 7, you have to write an if-else block instead
    switch (browserName.toLowerCase()) {
        case "ff": // fall through
        case "firefox":
            return new FirefoxDriver();
        case "ie": // fall through
        case "iexplore": // fall through
        case "internet explorer":
            return new InternetExplorerDriver();
        default:
            throw new IllegalArgumentException("No valid browser name found.");
    }
} 
```

# diff - TYPO3 个性化：xclass 系统 VS 差异/补丁方法

> ID：11580527
> 
> 赞同：0
> 
> 时间：2012-07-20T13:39:02.413
> 
> 标签：diff, patch, typo3

如果没有可用的钩子，个性化 TYPO3 项目和模块的行为最方便的方法是什么？

TYPO3 xclass 系统的传统差异/补丁方法，基于 Subversion 或 git？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:58:04.097

XCLASS 就是为这样的用例而发明的。所以我更喜欢xclass而不是diff。如果您编写一个 XClass，它可以在多个版本上保持稳定。特别是如果您只需要更改一些简短的方法。

乍一看，差异看起来更快更容易，但我想不是。

但如果可能的话，你应该考虑使用 Hook。特别是如果你想 XCLASS 一个扩展，请先联系作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:51:15.810

如果您认为拥有这样的钩子普遍感兴趣，您可以向 Gerrit 推送请求（请参阅[http://wiki.typo3.org/Contribution_Walkthrough_Tutorials](http://wiki.typo3.org/Contribution_Walkthrough_Tutorials)）。

XCLASSing 运行良好，但问题是您可能必须为每个主要版本调整 XCLASS。

# ruby-on-rails-3 - 将 sproutcore 与 rails 集成

> ID：11580528
> 
> 赞同：0
> 
> 时间：2012-07-20T13:39:05.533
> 
> 标签：ruby-on-rails-3, sproutcore

# 错误

```
Routing Error

No route matches [GET] "/_sproutcore" 
```

# 路线.rb

```
 bulk_routes "/api/bulk" 
```

# 怀疑

我完全按照[http://sproutguides-drogus.strobeapp.com/rails.html#authorization](http://sproutguides-drogus.strobeapp.com/rails.html#authorization)中的指示做了，但是在做 rails 生成 bulk:install 而不是

```
route  bulk_routes "/api/bulk"
 route  mount Bulk::Sproutcore.new => "/_sproutcore"
create  app/bulk/application_resource.rb
create  config/initializers/bulk_api.rb 
```

它只是

```
route  bulk_routes "/api/bulk"
create  app/bulk/application_resource.rb
create  config/initializers/bulk_api.rb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:58:35.503

根据[https://github.com/drogus/bulk_api](https://github.com/drogus/bulk_api)，bulk_api gem 已被弃用并且不再维护，这可能是它不起作用的原因。开发人员指出了一些可能有用的附加资源。

# c++ - 意外的未定义引用

> ID：11580530
> 
> 赞同：0
> 
> 时间：2012-07-20T13:39:07.887
> 
> 标签：c++, c, cmake, static-libraries

我收到一个未定义的引用错误，不知道原因。

所以我有 2 个文件构成一个静态库：keyboard_input.c、keyboard_input.h

这是 .h 文件的内容：

```
#ifndef __MOD_KBINPUT__
#define __MOD_KBINPUT__

int kbInit();
int kbWait();

int kbTest();

#endif 
```

CMakeLists.txt 文件如下所示：

```
FILE(
GLOB_RECURSE
sources
*.c
)
INCLUDE_DIRECTORIES("${PROJECT_SOURCE_DIR}/include/utils/kbreader")
ADD_LIBRARY(keyboardReader ${sources}) 
```

编译这个库会给出一些警告：

```
src/utils/kbreader/keyboard_input.c: In function ‘kbInit’:
src/utils/kbreader/keyboard_input.c:13:14: warning: assignment from incompatible pointer type [enabled by default]
src/utils/kbreader/keyboard_input.c: In function ‘kbWait’:
src/utils/kbreader/keyboard_input.c:21:55: warning: passing argument 4 of ‘fread’ from  incompatible pointer type [enabled by default]
/usr/include/stdio.h:708:15: note: expected ‘struct FILE * __restrict__’ but argument is of type ‘struct FILE *’ 
```

现在，对于我的主要可执行文件（main.cpp）：

```
#include <keyboard_input.h>
int main()
{
  kbTest();
  return 0;
} 
```

由以下 CMakeLists.txt 文件处理：

```
include_directories("${PROJECT_SOURCE_DIR}/include/utils/kbreader")

file(
    GLOB_RECURSE
    srcs
    *.cpp
)

add_executable(
    PEM
    ${srcs}
)
target_link_libraries(PEM keyboardReader) 
```

最终得到那个错误：

```
CMakeFiles/PEM.dir/main.cpp.o: In function `main':
main.cpp:(.text+0xb): undefined reference to `kbTest()'
collect2: ld returned 1 exit status
make[2]: *** [src/PEM/main2/PEM] Error 1
make[1]: *** [src/PEM/main2/CMakeFiles/PEM.dir/all] Error 2 
```

libkeyboardReader.a 被创建，并且 kbTest() 函数除了

```
{return 0; } 
```

如果我在头文件中设置 kbTest() 的定义，它就可以工作。

但是当我输入时，我没有得到一些东西： make keyboardReader 这里是输出：

```
[ 73%] Building C object src/utils/kbreader/CMakeFiles/KeyboardReader.dir/keyboard_input.c.o
[Warning explained above]
Linking C static library ../../../lib/libKeyboardReader.a 
```

有什么不对？注意错误消息是否使我的库省略了keyboard_input.c 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:45:58.813

您正在混合 C 和 C++ 文件。为了让它工作，你只需要告诉 C++ 编译器它正在调用一个 C 函数，方法是改变头文件，如下所示：

```
#ifndef MOD_KBINPUT
#define MOD_KBINPUT
/* note I also fixed the macro so you aren't using a system-reserved name */

#if __cplusplus
/* this is the important part */
extern "C" {
#endif

int kbInit();
int kbWait();

int kbTest();

#if __cplusplus
}
#endif

#endif 
```

否则，C++ 编译器假定该函数将被赋予一个 C++ 内部名称（它对签名中的所有类型信息进行编码，这是让链接器区分重载函数的原因），然后链接器找不到它。

# asp.net - 试图操纵 DOM 以将属性添加到 ASP.net 页面上的一些标记

> ID：11580531
> 
> 赞同：1
> 
> 时间：2012-07-20T13:39:08.480
> 
> 标签：asp.net, html, dom

我不知道为什么，但是

```
 ]> 
```

一直显示在我的文档上，所以我认为它没有被正确解释。我的页面顶部如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
[
  <!ATTLIST span parentNode CDATA #IMPLIED>
  <!ATTLIST span value CDATA #IMPLIED>
]> 
```

我不确定为什么。我的文件头的完整名称是：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebFormDesignerFrameset.aspx.cs" Inherits="BICWeb.WebFormDesignerFrameset" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>
<%@ Register Assembly="InspectTech.Web.WebControls" Namespace="InspectTech.Web.WebControls"
TagPrefix="iwc" %>
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
[
  <!ATTLIST span parentNode CDATA #IMPLIED>
  <!ATTLIST span value CDATA #IMPLIED>
]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:49:53.313

我相信你必须`<!ELEMENT span EMPTY>`在你的属性之前声明一个。

您可以查看[http://xmlwriter.net/xml_guide/attlist_declaration.shtml](http://xmlwriter.net/xml_guide/attlist_declaration.shtml)了解更多信息。

# jquery - 修改 JQuery 进度覆盖脚本

> ID：11580532
> 
> 赞同：1
> 
> 时间：2012-07-20T13:39:15.397
> 
> 标签：jquery

我有一个在按下提交按钮时触发的覆盖。谁能帮我修改这个脚本来处理页面加载？先感谢您

```
<script type="text/javascript">
$(document).ready(function(e) {
    $('div.submitbutton').click(function(event){
        $(this).val('Loading.. Please wait');
        $('#loading').show();
        setTimeout(function(){
            $('#myform').submit();
        },200);
    }); 
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:00:13.273

如果你在页面渲染时让你的加载 div 可见。比你只需要在加载所有内容时删除加载 div ：

```
<!-- This is valid in the <head> element in HTML5 -->
<noscript>
    <style>
        #loading { display: none; }
    </style>
</noscript>

<div id="loading">
    loading ...
</div>

$(document).ready(function() { 
   $('#loading').hide();
}); 
```

# android - Android：检查服务内部的互联网连接，并等待互联网连接建立

> ID：11580535
> 
> 赞同：0
> 
> 时间：2012-07-20T13:39:34.923
> 
> 标签：android, service

```
public class FBPost extends Service{

        private Bundle params = new Bundle();
        private String userID="";

        String response;

        public void onCreate(String userID,String name)
        {
            super.onCreate();
            params.putString("message", "Test " + new Date().toLocaleString() );
            params.putString("caption", "Hey there");
            this.userID=userID;
        }

        @Override
        public int onStartCommand( Intent intent , int flags , int startId )
        {
            if(checkInternetConnection())
            {
                fb_post();
            return 0;
            }
            else
            {
                 BroadcastReceiver connec_recv= new BroadcastReceiver() {

                     @Override
                     public void onReceive(Context context, Intent intent) {

                         if(checkInternetConnection())
                             fb_post();
                         } 
                 };

                 final IntentFilter intentFilter = new IntentFilter();
                 intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
                 registerReceiver(connec_recv, intentFilter);
            }
        }

        @Override
        public IBinder onBind(Intent arg0) {
            // TODO Auto-generated method stub
            return null;
        }

         private boolean checkInternetConnection() {
                ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

                // test for connection
                if (cm.getActiveNetworkInfo() != null
                        && cm.getActiveNetworkInfo().isAvailable()
                        && cm.getActiveNetworkInfo().isConnected()) {
                     try{
                            URL url = new URL("http://www.google.com");
                            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
                            in.close();
                            return true;
                        } catch (Exception e) {
                            return false;
                        }
                }
                    return false;
            }

         private void fb_post()
         {
            //MORE CODE
         }

} 
```

如果仍然没有互联网连接怎么办？我应该从广播接收器而不是 fb_post() 调用同一服务的另一个实例吗？每次连接广播接收器收到连接更改广播时，我可以让服务等待（）然后通知（）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:02:01.513

在我看来，实现这种功能的正确方法如下：

*   如果没有连接 - 放弃`Service`，注册 a`BroadcastReceiver`以侦听连接更改并在某处（`SharedPreferences`例如）保存一个标志，告诉您还有工作要做
*   当连接建立并且你的标志是`true`- 重新开始`Service`并完成工作

希望这可以帮助。

# java - Andengine BitmapTextureAtlas

> ID：11580536
> 
> 赞同：1
> 
> 时间：2012-07-20T13:39:38.157
> 
> 标签：java, android, opengl-es-2.0, andengine, game-engine

是`power of 2 rule`Andengine GLES2 中需要的，还是仅适用于 GLES1。例如，我知道建议使用宽度和高度值作为 2 的幂来创建您的 BitmapTextureAtlas `512x512`。但这有必要吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:45:32.373

我的理解是在 GLES2 中它不是必需的。我认为/猜测某些边缘设备可能没有完整或完整的实现，所以我仍然这样做。

编辑：“我仍然这样做”作为生产的一般规则。在测试期间，我玩过它不是 2 的幂，它在我的设备上运行良好。

# java - 从字符串中删除所有格式、编号列表、项目符号列表、空格、制表符等

> ID：11580539
> 
> 赞同：0
> 
> 时间：2012-07-20T13:39:53.633
> 
> 标签：java, formatting, jtextarea

我正在制作一个自定义文档比较工具。我正在将 word 文档中的内容与网页内容进行比较。我正在解析网页，只是删除文本并将其与我从 word 文档复制到 JTextarea 的文本进行比较。

我要做的就是比较文本，确保没有拼写错误或遗漏单词。当我解析网页时，我没有得到任何格式，如编号或项目符号列表。我的问题是，当我将 word doc 的内容复制到 jtextarea 时，它会保留所有编号列表、项目符号列表等。

我想要的是采取以下文本示例：

> 解决方案 1：重新启动网络硬件
> 
> 如果 Xbox LIVE 性能看起来很慢，请尝试重新启动您的网络硬件。就是这样：
> 
> 1.  关闭您的 Xbox 360 控制台和任何网络硬件（例如，您的调制解调器和路由器）。
> 2.  等待 30 秒。
> 3.  打开调制解调器，然后等待一分钟。

并将其变成：

> 解决方案 1：重新启动您的网络硬件
> 如果 Xbox LIVE 性能似乎很慢，请尝试重新启动您的网络硬件。方法如下：
> 关闭 Xbox 360 主机和任何网络硬件（例如调制解调器和路由器）。
> 等待 30 秒。
> 打开调制解调器，然后等待一分钟。

我已经有一个正则表达式来删除所有的空白行，我只是不知道我应该如何处理删除额外的选项卡、列表样式等。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:50:51.247

您可以尝试以下启发式方法：

*   用空格替换所有选项卡（等）（请参阅[`String.replaceAll()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)）
*   用空格替换所有空格后跟数字后跟点的行开头（请参阅正则表达式：`|^ *\d*\\.|`--carret-space-star-backslash-d-backslash-backslash-dot）
*   用一个空格替换所有空格系列（正则表达式：`| +|`--space-spaces-plus）（以删除多余的）-将此保留为最后一步

如果您遇到不想要的其他模式，您可以在那里添加任何其他替换逻辑

*注意*：我`|`在正则表达式周围添加了以使前导空格更容易看到，但是当您输入代码时它们不是正则表达式的一部分。

# c++ - 用c ++将信息写入空窗口

> ID：11580549
> 
> 赞同：1
> 
> 时间：2012-07-20T13:40:27.033
> 
> 标签：c++, windows, debugging, game-engine, directx-11

所以我正在构建这个游戏引擎，发现很难用 D3D11 在主游戏窗口中创建某种带有调试信息的叠加层，或者根本无法绘制文本，所以我想我会创建另一个窗口包含我的调试数据。

我的窗口创建得很好，但我不知道如何将调试信息写入其中。我不想使用 windows 窗体设计器，因为那将不得不将我的项目转换为我不想要的 CLR 项目。

我现在已经至少搜索了 3 个小时（老实说）并尝试了各种解决方案，但它们中没有一个看起来真正实用/它们不起作用。

我想写的调试信息来自全局浮点值。一个例子是`CAM_POS_X`它保存一个浮点值，该值指示相机当前位于哪个 X 坐标。

需要这样的东西：

|SiriusAlpha 0.1 调试窗口_ |
|当前X位置：`CAM_POS_X`|
|当前 Y 位置：`CAM_POS_Y`|
|当前Z位置：`CAM_POS_Z`|
|当前偏航：`CAM_YAW`***_* __ *_* __** |
|当前音高：`CAM_PITCH`***_* __****|
|当前的FPS：`CUR_FPS`*****_ *_* ____** |***

 ***所有这些值都不一定是浮点变量。它们可以是字符串、双精度数、整数甚至布尔值。

如果有人愿意向我解释如何在 D3D11 中执行此操作，并且我可以跳过整个调试窗口 schenennigans，我会更高兴。

否则，如果有人可以向我解释这是如何完成的，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:50:32.763

你试过[TextOut()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145133%28v=vs.85%29.aspx)吗？阅读 msdn 上的文章。你应该已经有了一个设备上下文，剩下的就很简单了。

> TextOut 函数使用当前选择的字体、背景颜色和文本颜色在指定位置写入字符串。

打印到字符串是微不足道的。

```
wchar buf[128];
swprintf(buf, "Current X Position: %f", CAM_X_POS);
TextOut(yourDC, screenXPos, screenYPos, &buf, sizeof(buf)); 
```

我没有对此进行测试，但从 MSDN 文档来看，这应该可以正常工作。***

# html - Css 在 Internet Explorer 中无法正确显示

> ID：11580550
> 
> 赞同：0
> 
> 时间：2012-07-20T13:40:31.693
> 
> 标签：html, css, internet-explorer, firefox, google-chrome

本质上，我打算创建一个从屏幕顶部到底部的进度条。分成三部分，顶部是一种颜色，中间是另一种颜色，底部是另一种颜色。

不幸的是，此代码仅适用于 FF 和 Chrome，但在 IE（所有版本）中显示不正确。它目前仅在 IE 中显示顶部颜色。

代码：

```
html, body 
{ 
  height: 100%; 
  margin: 10px;overflow: hidden;
} 

#head
{
  height: 80px;
  background-color:black;
}

#content
{
  min-height: 100%; 
  height: 100%; 
  margin: 0 auto; /*Allow for footer height*/
  vertical-align:bottom;
}

#prgsBar
{
  margin: 0 auto -80px; /*Allow for footer height*/
  background-color:gray;
} 

#footer, #push
{
   height: 100px; /*Push must be same height as Footer */
} 
```

HTML：

```
 <div id='content' style='background-color:red'>    
  <div id='head'>        
   <h5>Hello</h5>   
  </div>    
   <div id='prgsBar' style='height: 29%;'/></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:46:06.287

你的#prgsBar 是一个自闭标签，不应该这样。

更改`<div id='prgsBar' style='height: 29%;'/></div>` 为`<div id='prgsBar' style='height: 29%;'></div>`

# php - JS/jQuery 中可变数量的可编辑字段

> ID：11580554
> 
> 赞同：0
> 
> 时间：2012-07-20T13:40:50.903
> 
> 标签：php, javascript, jquery

我想要做的是使用 php 从数据库中提取可变数量的记录。我想让用户能够点击文本，它会将文本切换为输入框，并在提交时更新数据库。

我知道如何使用 onclick 属性执行此操作，并将与 mySQL 数据库中的行对应的 id 号传递给 javascript 函数。我正在尝试确定如何使用[Unobtrusive Javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)技术来做到这一点。

这是创建 div 的代码部分，当用户单击区域、帐户编号、dv 或地址字段时，它将切换出输入框的文本，如上所述。

```
while($row = mysql_fetch_array($query)) {
    $business_name = $row['business_name'];
    $resource_id = $row['resource_id'];
    $totaldv += $row['dv'];
    if(!in_array($row['zone'], $zoneArray)) {
        $zones .= $row['zone'] . " ";
        array_push($zoneArray, $row['zone']);
    }
    $account_numbers .= "
    <div>". $row['zone'] . "</div>
    <div>" .  $row['account_number'] . "</div>
    <div>" .  number_format($row['dv']) . " kW</div>
    <div>" . $row['street_address'] . " " . $row['city'] . ", " . $row['state'] . "</div>
    ";
} 
```

我遇到的问题在于客户可能有 1 个帐户或 83 个帐户，我需要能够为输入框切换正确的文本并将行的 id 从数据库传递到表单。我在想也许使用将类应用于某些领域？

我以前做过类似的事情，但它总是一个静态的输入，所以我能够隐藏文本并显示加载页面时生成的输入框。与此类似的东西（当然它不是不引人注目的）

```
$content .= "
            <tr>
                <td width=35><IMG SRC=images/$i.png height=20></td>
                <td width=35 id=rank".$i.">$rankImages</td>
                <td width=380>
                    <span id=text".$i." style=\"cursor:pointer;\" onclick=\"editItem($i);\">".$itemArray[$i]."</span>
                    <span id=$i"."input>
                    <input id=$i type=text value=".$itemArray[$i].">
                    <IMG SRC=images/save.png style=\"cursor:pointer;\" onclick=\"saveItem($i);\">
                    <IMG SRC=images/cancel.png style=\"cursor:pointer;\" onclick=\"cancelEdit($i);\">
                    </span>
                </td>
            </tr>";

function editItem(line_num) {
        $("#text" + line_num).hide();
        $("#" + line_num + "input").show();         
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:00:29.017

我将采用的方法是使用`data-*`属性，然后使用 jQuery 的[`.data()`](http://api.jquery.com/data/)函数访问该数据。一个较短但外观相似的 HTML 外观示例：

```
<div class="editable-row" data-row-id="1">
    <span class="uneditable">row one</span>
    <input type="text" value="row one" />
</div>
<div class="editable-row" data-row-id="2">
    <span class="uneditable">row two</span>
    <input type="text" value="row two" />
</div>
<div class="editable-row" data-row-id="3">
    <span class="uneditable">row three</span>
    <input type="text" value="row three" />
</div>
<div class="editable-row" data-row-id="4">
    <span class="uneditable">row four</span>
    <input type="text" value="row four" />
</div> 
```

你的 JavaScript 看起来像这样：

```
$(document).ready(function () {
    $(".editable-row").on("click", function () {
        var $this = $(this),
            rowId = parseInt($this.data("rowId"), 10);

        $this.find("input").show();
        $this.find(".uneditable").hide();

        // do something with rowId
    });
}); 
```

# macos - grep 和聚光灯，得到不同的结果

> ID：11580555
> 
> 赞同：1
> 
> 时间：2012-07-20T13:40:52.483
> 
> 标签：macos, grep, spotlight

所以我用这个

```
grep -lrai "search query" /right/here/ 
```

在 100 多个 pdf 文件中搜索一个单词（这就是我包含的原因`-a`）。

使用 grep 显示 3 个结果，而 Spotlight 中的简单搜索将在同一目录中显示更多结果。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:44:43.780

不幸的是，使用“-a”选项不会神奇地将 PDF 文档转换为纯文本文档。如果您需要 grep 搜索，则必须先将 PDF 转换为文本文档（即使用此配方：[http](http://www.ehow.com/how_4794405_convert-pdf-word-document-mac.html) ://www.ehow.com/how_4794405_convert-pdf-word-document-mac.html ）。

# encoding - sws_scale 在较小的 x264 mp4 编码中搞砸了最后一个像素行

> ID：11580559
> 
> 赞同：2
> 
> 时间：2012-07-20T13:40:59.523
> 
> 标签：encoding, ffmpeg, libavcodec, libavformat, libav

我正在将 PIX_FMT_ARGB 格式的图片混合到 mp4 视频中。

一切都很好，除了输出图像的最后一个像素行被搞砸了，在大多数情况下最后一行是完全黑色的，有时还有其他颜色，它似乎在某种程度上取决于它运行的机器。

我绝对确定错误必须在 sws_scale 中，因为我在缩放之前和之后保存图像。输入图像没有错误，但是在 sws_scale() 之后我保存了 yuv 图像并且错误很明显。

这是一个例子：

**原来的**

![在此处输入图像描述](../Images/9cba0481b2c1ed4c0f01b70af7bad012.png)

**Yuvfile（在 sws_scale 之后）**

![在此处输入图像描述](../Images/228622657773e211f7c9f496660604ac.png)

在 Yuvfile 的底部，您将看到黑色行。

这就是我进行缩放的方式（在官方 ffmpeg 示例之后，或多或少）：

```
static int sws_flags = SWS_FAST_BILINEAR | SWS_ACCURATE_RND;

if (img_convert_ctx == NULL)
{
   img_convert_ctx = sws_getContext( srcWidth, srcHeight,
           PIX_FMT_ARGB,
           codecContext->width, codecContext->height,
           codecContext->pix_fmt,
           sws_flags, NULL, NULL, NULL );
   if (img_convert_ctx == NULL)
   {
      av_log(c, AV_LOG_ERROR, "%s","Cannot initialize the conversion context\n");
      exit(1);
   }
}
fill_image(tmp_picture, pic, pic_size, frame_count, ptr->srcWidth, ptr->srcHeight );

sws_scale(img_convert_ctx, tmp_picture->data, tmp_picture->linesize,
        0, srcHeight, picture->data, picture->linesize); 
```

我还尝试了许多不同的 SWS_ 标志，但都产生了相同的结果。

这可能是 sws_scale 中的错误还是我做错了什么？我正在使用最新版本的 ffmpeg 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:02:05.270

问题是这个功能：

```
fill_image(tmp_picture, pic, pic_size, frame_count, ptr->srcWidth, ptr->srcHeight ); 
```

它没有正确地将输入图像复制到 tmp_picture。确实跳过了最后一行。

士气：不要相信多年的功能：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T05:13:36.023

180 不是 8 的倍数，这可能是黑色行的原因。您可以尝试将其缩放到最接近的 8 倍数，例如 184 或 192（16 的倍数）吗？非 h264 编解码器需要 8 的倍数作为高度。

# python - Python：打开两个 CSV，一个路径很好，另一个所有反斜杠都加倍

> ID：11580561
> 
> 赞同：0
> 
> 时间：2012-07-20T13:41:06.747
> 
> 标签：python, csv, escaping, filepath, backslash

我正在使用 csv 文件来存储我的程序所需的大量变量。我使用 os.path 来定义两个文件的相对路径，并将这些路径发送到一个名为 get_csv_args 的函数，该函数打开 csv 并解析信息。第一个路径可以正常打开，但第二个路径会导致错误，因为路径中的反斜杠都被加倍了。我尝试使用 os.path.normpath 但没有帮助。

**主功能**

```
import os
from misc.get_csv_args import get_csv_args
def main():
    server=os.path.abspath('..\..\server_info.csv')
    archive=os.path.abspath('.\CreateDelete_archive_info.csv')
    print server
    print archive
    print str(get_csv_args(server))
    print str(get_csv_args(os.path.normpath(archive)))

if __name__ == '__main__':
    main() 
```

**get_csv_args**

```
import csv, os.path
def get_csv_args(filename):
    read_args = csv.reader(open(os.path.normpath(filename), 'rb'))
    args = []
    for row in read_args:
        args = args + row[:2] #Add the first two items in each row to the args list
    args = filter(lambda name: name.strip(), args) #Remove whitespace entries from the list
    return args 
```

**主输出**

> C:\Users\blahblahblah\src\server_info.csv
> 
> C:\Users\blahblahblah\src\test_cases\archive\CreateDelete_archive_info.csv
> 
> ['server', 'server_name', 'UID', 'user', 'PWD', 'password']
> 
> 回溯（最近一次通话最后）：
> 
> 等等等等等等
> 
> IOError：[Errno 2] 没有这样的文件或目录：'C:\\Users\\blahblahblah\\src\\test_cases\\archive\\CreateDelete_archive_info.csv'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:51:52.030

反斜杠被加倍是正常行为，不会导致您的错误 - 它发生是因为反斜杠是转义字符（例如，`'\t'`是一个制表符，但是`'\\t'`是一个反斜杠后跟一个“t”）。不过，这可能会给您带来实际的问题（例如，名为 '.\thing' 的文件会导致严重的损坏），因此您应该使用正斜杠或[原始字符串](http://docs.python.org/reference/lexical_analysis.html#string-literals)作为路径。

最有可能导致您当前的问题是文件 CreateDelete_archive_info.csv 实际上不存在。确保您拥有正确的名称和路径 - 例如，在命令提示符下，执行以下操作：

```
dir C:\Users\blahblahblah\src\test_cases\archive\CreateDelete_archive_info.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:44:17.240

您是否尝试过：

```
archive=os.path.abspath('CreateDelete_archive_info.csv') 
```

没有`.\`？

# android - android画廊滚动像查看寻呼机

> ID：11580566
> 
> 赞同：2
> 
> 时间：2012-07-20T13:41:38.253
> 
> 标签：android, android-viewpager, android-gallery

我同时使用了 Gallery 和 ViewPager 小部件，我正在从 Web 服务获取图像，但我无法将它们放在 ViewPager 中，但在 Gallery 中很容易。我将本教程用于 ViewPager [http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo ​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

我想要像 ViewPager 滚动一样滚动的 android Gallery 小部件，

这可能吗，我该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T14:06:13.173

这是 PagerAdapter 的 instantiateItem() 方法的一个简单示例，它将动态地用图像视图填充它。

```
@Override
public Object instantiateItem( final View pager, final int position )
{
    //Note: if you do not have a local reference to the context make one and
    //set it to the context that gets passed in to the constructor.
    //Another option might be to use pager.getContext() which is how its
    //done in the tutorial that you linked.
    ImageView mImg = new ImageView(context);

    /*Code to dynamically set your image goes here.
    Exactly what it will be is going to depend on 
    how your images are stored. 
    In this example it would be if the images
    are on the SD card and have filenames
    with incrementing numbers like: (img0.png, img1.png, img2.png etc...)*/

    Bitmap mBitmap = BitmapFactory.decodeFile(
         Environment.getExternalStorageDirectory() + "/img" + position + ".png");
    mImg.setImageBitmap(mBitmap);

    ((ViewPager) collection).addView(mImg, 0);
    return mImg;

} 
```

# c# - C# - 获取打开的窗口不能正常工作

> ID：11580567
> 
> 赞同：1
> 
> 时间：2012-07-20T13:41:38.417
> 
> 标签：c#, .net, windows

我有一个启动另一个应用程序的系统服务。这个应用程序（用 C# 编写）有时需要获取所有打开的窗口（应用程序）并列出它们的名称。

我用过`EnumWindow`（来自 Win32），我用过`Process.GetProcesses()`和`process.MainWindowTitle`（来自 C#）我得到的只是：

> 进程：UI0Detect
> 
> 窗口标题：交互式服务检测

如果我手动运行该应用程序，它会为我提供所有应有的窗口。但是当系统服务运行应用程序时，我得到的只是这一项服务。

如何让应用程序为我提供正确的活动窗口列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:50:27.207

Windows 服务不会像普通程序一样在同一个“会话”中运行，因此第二个启动的程序也会在您的服务启动时在特殊会话中启动。您将需要使用[CreateProcessAsUser](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)并在要监控的用户会话中创建您的第二个应用程序。

有关详细信息，请参阅有关编写交互式服务的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683502%28v=vs.85%29.aspx)

# excel - 如何使用密码打开工作簿，禁用事件

> ID：11580569
> 
> 赞同：1
> 
> 时间：2012-07-20T13:41:40.647
> 
> 标签：excel, vba, ms-access, copy

如何使用密码打开工作簿，禁用事件，然后将后台工作表复制到第二个文件并保存。我需要 VBA，在 MS-Access 和 Excel 文件中工作

我一直这样做到现在，正在工作。

```
Private Sub TestFunction()

'strPath = CurrentDb.Properties(0)
'strPath = Left(strPath, Len(strPath) - Len(Dir(strPath, vbNormal))) & "Temp\"
Dim CopyFrom As Object
Dim CopyTo As Object ''Early binding: Workbook
Dim CopyThis As Object
Dim xl As Object ''Early binding: New Excel.Application

Set xl = CreateObject("Excel.Application")
xl.Visible = True
Set CopyFrom = xl.Workbooks.Open("D:\A01.xls")
'CopyFrom.EnableEvents = False
Set CopyThis = CopyFrom.Sheets(1) ''Sheet number 1
Set CopyTo = xl.Workbooks.Open("D:\PM1.xls")
CopyThis.Copy After:=CopyTo.Sheets(CopyTo.Sheets.Count)
CopyFrom.Close
End Sub 
```

这将打开 Excel，我将传递副本的工作表输入到第二个文件。

但我需要在后台传递密码，删除工作表并保存第二个文件，全部在后台。我还需要删除一张纸，而不问我，比如：

```
CopyTo.Sheets("Sheet1").Delete 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T14:33:46.847

**密码问题**

仔细检查它是“打开文件”密码（`password`参数）还是“修改文件”密码（`WriteResPassword`参数）。

就像是：

```
Sub OpenMyFile()
    Workbooks.Open Filename:="Path", Password:="OpenFile", WriteResPassword:="WriteFile"
End Sub 
```

**删除不提醒**

对于您的第二个问题，您可以执行以下操作：

```
Application.DisplayAlerts=False
CopyTo.Sheets("Sheet1").Delete
Application.DisplayAlerts=True 
```

# performance - 最新的 AutoRoute 和 MapPoint 的“优化停靠点”工具要慢得多

> ID：11580571
> 
> 赞同：0
> 
> 时间：2012-07-20T13:41:46.433
> 
> 标签：performance, optimization, traveling-salesman, mappoint

我有 AutoRoute 11.0、AutoRoute 2010、MapPoint 2010、MapPoint 2011、MapPoint 2013。

我注意到，当我**优化停止**时，第一个需要合理的时间，而其他 4 个（更新的......）要慢得多。

例如，我尝试使用相同的 67 个站点，分布在托斯卡纳、拉齐奥和坎帕尼亚（在意大利）。较旧的 AutoRoute 需要半分钟，而其他 AutoRoute 大约需要 20 分钟。不幸的是，如此缓慢的过程对我们的客户毫无用处。

**这怎么解释？**算法的变化？设置一些设置？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:11:59.893

我联系了 Microsoft 并意识到这个问题可能是由于地图的复杂性增加所致。因此，该算法有更多的道路需要考虑，性能会降低。

作为替代方案，他们向我推荐了[Opti-Time TourSolver](http://www.opti-time.com/en/fleet-planner-sofware-demo)，这是 MapPoint 的专业插件，它具有用于优化的本机算法，速度更快，并且还允许在我们满意时停止它。这个软件还有很多更多的功能，即使它不是那么便宜。

# sql - 插入语句在函数内部不起作用（PostgreSQL）

> ID：11580573
> 
> 赞同：2
> 
> 时间：2012-07-20T13:41:47.503
> 
> 标签：sql, function, postgresql, stored-procedures, insert

我有一个用 PostgreSQL 编写的函数，用于遍历一个大表并将大量值插入到另一个表中。输出很好，显然已插入大量行，但实际上没有将值插入目标表（我的代码中的“资源”表）。

我尝试将插入语句放入事务中，但无济于事。我是否缺少某种模糊的访问或权限设置？我在网上找到了几个像我一样这样做的例子，所以我在这个上拉了一点头发......

这是我的功能：

```
DECLARE
datatype_property record; 
property record;
new_resource_id bigint;
BEGIN  
    RAISE NOTICE 'Starting...';
    FOR datatype_property IN  
      SELECT * FROM datatype_properties
    LOOP  
        RAISE NOTICE 'Trying to insert';

        if not exists(select * from resources where uri = datatype_property.subject_resource) then
              SELECT INTO new_resource_id NEXTVAL('resources_id_seq');  
              INSERT INTO resources (id, uri) VALUES(  
                    new_resource_id,    
                    datatype_property.subject_resource
              );   
            RAISE NOTICE 'Inserted % with id %',datatype_property.subject_resource, new_resource_id;
        end if;
    END LOOP; 

 FOR property IN  
      SELECT * FROM properties 
 LOOP  

        if not exists(select * from resources where uri = property.source_uri) then
                SELECT INTO new_resource_id NEXTVAL('resources_id_seq');
              INSERT INTO resources (id, uri) VALUES(  
                        new_resource_id,
                        resource.source_uri
              ) ;   
                RAISE NOTICE 'Inserted % with id %',resource.source_uri, new_resource_id;
        end if;
        if not exists(select * from resources where uri = property.destination_uri) then
                SELECT INTO new_resource_id NEXTVAL('resources_id_seq');
              INSERT INTO resources (id, uri) VALUES(  
                        new_resource_id,
                        resource.source_uri
              ) ;   
        RAISE NOTICE 'Inserted % with id %',resource.source_uri, new_resource_id;
        end if;
 END LOOP;  
 RETURN; 
```

结尾;

编辑：我已经使用以下链接中的说明激活了 plpgsql 语言：

[http://wiki.postgresql.org/wiki/CREATE_OR_REPLACE_LANGUAGE](http://wiki.postgresql.org/wiki/CREATE_OR_REPLACE_LANGUAGE)

编辑2：

这段代码：

```
DECLARE
datatype_property record; 
property record;
new_resource_id bigint;
BEGIN  

    insert into resources (id, uri) values ('3', 'www.google.com');
END 
```

也不起作用：O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:19:33.613

您的问题听起来确实像是您没有提交事务（正如 Pavel 指出的那样），或者您用来检查行的工具是例如使用 REPEATABLE READ 作为其隔离级别或某种缓存。

但是您的功能一开始就不是一个好的解决方案。在循环中逐行插入总是一个坏主意。这将比进行单次插入要慢得多（并且可扩展性较差）。

如果我没记错的话，这两个循环可以重写为以下语句：

```
insert into resource (id, uri)
select NEXTVAL('resources_id_seq'),
       dt.subject_resource
from datatype_properties dt
where not exists (select 1
                  from resources r
                  where r.uri = dt.subject_resource);

insert into resources (id, uri)
select nextval('resources_id_seq'),
       p.source_uri
from properties p
where not exists (select 1 
                  from resources r 
                  where r.uri = p.source_uri
                     or r.uri = p.destinatioin_uri); 
```

# facebook - 将 Facebook 评论插件链接或连接到粉丝页面墙贴上的评论

> ID：11580579
> 
> 赞同：9
> 
> 时间：2012-07-20T13:42:00.397
> 
> 标签：facebook, facebook-opengraph, facebook-comments

Facebook 评论插件 - 据我了解，如果我将 facebook 评论插件放在帖子网页上，并且被评论的帖子的永久链接与基本 URL 匹配，那么评论将使用我的帖子永久链接通过 facebook 存储。

可以说，如果我将永久链接发布到我的 facebook 页面墙上（我是管理员），打开的图形标签就会发挥作用，所有相关数据都会被拉入，fb:admins、fb:app 等。

但是是否可以将我的 facebook 页面（使用我的 facebook 页面 ID）连接到该永久链接 - 以便使用评论插件在页面上发布的评论，连接/链接到我的 facebook 页面墙上的帖子评论？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:08:18.253

目前这是不可能的。我们已经在网站本身上使用 Facebook 应用程序和 Facebook Javascript SDK 实现了自定义解决方案。您需要使用来自服务器的应用访问令牌通过[FQL](http://developers.facebook.com/docs/reference/fql/)查询特定页面帖子的评论表，以检索所有评论并将其呈现在页面上。

然后，您需要为用户提供多个状态的多个入口点，以便为他们启用发布功能。你需要解决四种情况：

1.  用户不喜欢该页面且未授权您的应用
2.  用户不喜欢该页面并授权您的应用
3.  用户喜欢该页面但未授权您的应用
4.  用户喜欢该页面并授权您的应用

用户需要喜欢您的页面并使用 publish_stream 权限授权您的应用，以便能够通过您的网站评论您的页面帖子。当然，您需要维护页面上的帖子和网站上的帖子之间的引用。

几年前我们这样做的网站是[BIGGBOSS](http://biggboss.cz/news/2594)点击“Komentáře”，然后[在 Facebook 上](https://www.facebook.com/biggbosslabel/posts/471685279546552)找到具有相同评论的相同帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:25:59.803

据我了解您的问题，无法将评论框中的评论（集成在您的非 Facebook 页面（例如您的博客）中）与发布到您的粉丝专页上的帖子的评论联系起来。

唯一的解决方案是使用 open-graph 构建自定义评论框并将评论发布到 fanpagepost 并另外从 fanpage 中提取评论以显示在您的博客上。

但这需要在人们能够对您的博客发表评论之前接受许可对话框，这可能会减少发表的评论。您将失去内置评论框的好处。

# java - selenium web 驱动程序测试 web 元素已更新

> ID：11580584
> 
> 赞同：1
> 
> 时间：2012-07-20T13:42:25.863
> 
> 标签：java, selenium, webdriver, selenium-webdriver

您将如何检查特定的 WebElement 是否已更新？

我有一个执行表单保存的测试，然后 UI 返回成功/错误消息。

我正在进行一系列保存，我需要测试并查看消息是否符合预期。

Selenium 的速度如此之快，以至于浏览器没有机会赶上。

这是我用于测试错误消息的代码（也有一个等效的成功消息函数）

```
 public void assertErrorMessage(String errorMsg) {

    // set the wait time a bit so the page can load.
    driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);
    List<WebElement> results = driver.findElements(By.xpath("//div[@id='lift__noticesContainer__']/descendant::*"));
    boolean success = false;
    String message = "";
    for (WebElement result : results) {

        String id = result.getAttribute("id");
        if (id.contains("___error")) {
            success = true;
        }
        if (result.getTagName().equals("li")) {
            message += result.getText().trim();
        }
    }
    Assert.assertTrue(success, "No error message generated");
    Assert.assertTrue(message.equals(errorMsg), "Expecting message: \"" + errorMsg + "\" but got \"" + message + "\"");

} 
```

在编写时，它会查找特定的存在`<div>`并检查是否包含某些属性。如果是，请获取消息。

问题是，这将永远是真的，因此我的测试失败了，因为消息与之前的消息不同，但 UI 还没有赶上 selenium 的位置。

到目前为止，我的解决方案是强制 Thread.sleep(2000) 暂停一下以允许 UI 跟上。我知道使用 Thread.sleep() 是不受欢迎的。

即（伪代码）

```
page.setField("value");
page.save();
Thread.sleep(2000);
page.assertErrorMessage("Error message"); 
```

有什么方法可以让我检查 WebElement 是否已更新？如果是这样，我可以使用 Selenium 等待来测试它。

或者也许其他人对如何做到这一点有建议？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:15:54.720

如果每次执行 page.save() 时显示的结果不断得到。

确保您的代码等待浏览器更新消息的最佳方法是使用[WebDriverWait](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html)对象。

一个简单的例子是 -

```
new WebDriverWait(driver, 10).until(ExpectedConditions.textToBePresentInElement(By.xpath("xpath"), "message")); 
```

您可以检查该特定元素是否具有您要查找的消息。如果该消息在 10 秒后仍未出现，则将引发 TimedOutException。

您可以查看更多适合您情况的[ExpectedConditions变体。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)希望这对您有所帮助。

# javascript - Javascript、target.id 和 event.srcElement.id

> ID：11580586
> 
> 赞同：0
> 
> 时间：2012-07-20T13:42:35.747
> 
> 标签：javascript

我试图理解部分javascript代码是指代码是：[链接](http://jsfiddle.net/xHue9/1/)，现在还有2个第一个包含的css文件（sansStyle.css）：

```
body, p, td, ol, ul, select, span, div, input {
    font: .9em/1.1em verdana, geneva, arial, helvetica, sans-serif;
} 
```

第二个包含（serifStyle.css）：

```
 body, p, td, ol, ul, select, span, div, input {
        font: 1.1em/1.2em Times New Roman, Times, serif;
    } 
```

我的问题只是我不理解的javascript代码的一小部分，如果你看看链接和javascript部分是：

```
if (inVal) {
        if (typeof inVal == "string") {
            title = inVal;
        }
        else {
            title = inVal.target.id;
        }
    }
    else {
        title = window.event.srcElement.id;
    } 
```

现在我明白我们在 else 引用 id 因为它的值与我们需要的 title 值相同，但问题是如果它不是字符串那它是什么？以及它是如何获得例如 inVal.target.id 什么是 inVal.target 是什么？以及关于窗口 event.srcElement.id 它是什么事件？如果有人可以帮助我理解这两个我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:46:17.720

inVal 是单击事件，目标是发生该事件的 DOM 元素。如果你看这一行：

```
allButtons[i].onclick = setActiveStylesheet; 
```

您会看到，当单击按钮并将事件作为参数传递给该函数时，该函数被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:58:43.597

inVal 可以是两个东西，它可以是一个字符串，也可以是一个点击事件。

1.) inVal 在获得标题时可以是一个字符串（这是我假设的样式）看到这一行`setActiveStylesheet(title)`

如果您仔细观察，标题将始终是来自 cookie`var thisCookie = cookieVal("style");`或来自**getActiveStylesheet()**函数的字符串

2.) inVal 可以是一个点击事件，正如 Haynar 指出的那样

```
allButtons[i].onclick = setActiveStylesheet; 
```

因此你检查它是否是一个字符串

```
 if (typeof inVal == "string") {
        title = inVal; // when it comes form the cookie or getActiveStylesheet()
    }
    else {
        title = inVal.target.id; // it is an event
    } 
```

**window.event**是事件属性。例如**window.event.type**会给你发生的事件的类型。与明智的**window.event.srcElement**或**window.event.target**一样，这两个属性都返回发生事件的 HTML 元素。**window.event.srcElement.id**将返回事件的 id。

# google-maps - 谷歌地图从

> ID：11580595
> 
> 赞同：3
> 
> 时间：2012-07-20T13:43:13.653
> 
> 标签：google-maps, google-maps-api-3

我需要在谷歌地图 V3 中画一个圆圈，但我有 2 个坐标，中心和外部位置。问题是 API 需要中心和“半径”。例如：

```
var myCirclePath = [];
myCirclePath.push(new google.maps.LatLng(18.111111,66.111111));
myCirclePath.push(new google.maps.LatLng(18.223344,66.222222));

var myCircle = new google.maps.Circle({
    center: myCirclePath[0],
    radius: // what do I put here????
    map: map
}); 
```

我在网上搜索了很多关于弧度、度数、sin、atan 等等的东西……但是，我不擅长数学，我完全迷路了。

所以，问题是：
a）我应该在“半径：”选项中输入什么？
b）如何将缩放围绕圆圈居中？“Bounds.Extend”不会这样做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:56:34.993

> 所以，问题是：
> 
> a）我应该在“半径：”选项中输入什么？

使用[几何库](https://developers.google.com/maps/documentation/javascript/geometry#Distance)computeDistanceBetween() 查找半径（传入你的两个点）

> b）如何将缩放围绕圆圈居中？“Bounds.Extend”不会这样做

一旦你创建了[circle](https://developers.google.com/maps/documentation/javascript/reference#Circle)，你可以调用它的 getBounds() 方法来获取它的边界

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:47:08.083

如果我错了，请纠正我，但半径不是圆的中心点和外点之间的距离吗？我会选择这个。

# asp.net-mvc-3 - MVCScaffolding 和 Database Sync 用于不断变化的模型

> ID：11580602
> 
> 赞同：0
> 
> 时间：2012-07-20T13:43:40.037
> 
> 标签：asp.net-mvc-3, code-first, asp.net-mvc-scaffolding

我使用了 Nuget 包管理器中的 MVCScaffolding，并遵循了有关其工作原理的简短教程。它看起来很简单，当我运行 `Scaffold Controller Team –Repository -Force`它时，它将创建围绕“团队”的所有存储库模式的东西。

然而，为了尝试（并成功）打破这一点，我决定在“团队”类（`myRandomField`）中添加一个额外的字段。正如我所料，当我编译时，在 MVC 视图中出现错误：

> 自创建数据库以来，支持“MvcApplication1Context”上下文的模型已更改。手动删除/更新数据库，或使用 IDatabaseInitializer 实例调用 Database.SetInitializer。例如，DropCreateDatabaseIfModelChanges 策略将自动删除并重新创建数据库，并可选择使用新数据为其播种。

显然这个错误是因为我已经更新了模型（代码优先？？）并且数据库现在与我的模型“不同步”。

解决此问题的最佳方法是什么？是否有一种简单的方法可以与模型进行数据库同步 - 我计划对我的模型进行大量编辑，因为我开始的项目将逐渐推出（因此每次都进行完整的数据库重建是不可能的）在这种情况下，代码优先对我来说是正确的方法吗？我真的很喜欢这个插件/工具，如果不使用它会很可惜。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:48:53.833

杰德，

正如我在上面的评论中提到的，如果您“很高兴”丢失数据库中的所有现有数据，那么您可以将以下内容添加到 global.asax 中：

```
[Conditional("DEBUG")]
private static void InitializeDb()
{
    using (var db = new YourContext())
    {
        // double indemnity to ensure just sqlserver express
        if (db.Database.Connection.DataSource != null
            && db.Database.Connection.DataSource.IndexOf("sqlexpress", 
            StringComparison.InvariantCultureIgnoreCase) > -1)
        {
            // Initializer code here
            Database.SetInitializer(new DropCreateDatabaseIfModelChanges<YourContext>());
        }
    }
} 
```

然后从 调用这个`Application_Start()`，即

```
protected void Application_Start()
{
    InitializeDb();
    ViewEngines.Engines.Add(new MobileViewEngine());
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);
} 
```

如果您希望保留数据，则必须使用数据迁移工具。我使用 Red Gate 工具（[SQL 比较包](http://www.red-gate.com/products/sql-development/sql-comparison-bundle/)）来执行此操作。基本上，这会查看您的新架构和旧架构，并将现有数据迁移到新架构中，为测试和部署做好准备，所有这些都无需触及原始 db 文件。

我认为这对你应该很有效。

# java - 时间正则表达式问题

> ID：11580604
> 
> 赞同：2
> 
> 时间：2012-07-20T13:43:43.760
> 
> 标签：java, regex

我想返回时间格式 HH:MM am|pm (11:45 AM) 或任何时间匹配这个正则表达式：

```
 String meridian = "^(0[1-9]|[10-12]):(0[1-9]|[11-59])\\s(AM|PM|am|pm)"; 
```

但它不适合我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:46:24.320

`[10-12]`相当于`[1012]`相当于`[012]`

同样`[11-59]`等价于`[123459]`

采用：

```
^(0[0-9]|1[0-2]):[0-5][0-9]\\s(AM|PM|am|pm)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:48:26.113

`[...]`是一组字符，而不是数字。

要匹配 和 之间的所有数字`01`，`12`请使用`(0[1-9]|1[0-2])`。

要匹配 和 之间的所有数字`00`，`59`请使用`[0-5][0-9]`

# java - 获取保存文件的位置，而无需在保存/打开对话框中选择/提供文件

> ID：11580606
> 
> 赞同：0
> 
> 时间：2012-07-20T13:43:48.540
> 
> 标签：java, swing, jfilechooser

我想保存一个用户选择的文件，但似乎有必要在给定字段中给出一个名称。但我希望该用户只选择保存文件的位置。

有没有其他方法可以使用或不使用对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:46:21.110

允许只选择目录，您可以使用它`JFileChooser`来允许用户选择位置而无需指定文件名。看[`setFileSelectionMode`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#setFileSelectionMode%28int%29)方法

*编辑*

下面的代码允许我选择一个目录并点击 OK 按钮

```
public static void main( String[] args ) {
  EventQueue.invokeLater( new Runnable() {
    @Override
    public void run() {
      JFileChooser chooser = new JFileChooser(  );
      chooser.setFileSelectionMode( JFileChooser.DIRECTORIES_ONLY );
      chooser.showSaveDialog( null );
      System.out.println( chooser.getSelectedFile() );
    }
  } );
} 
```

您可以选择已经选择默认目的地。如果默认值对于大多数情况来说足够好，在大多数情况下，用户只需按下回车键。

如果这不是你的意思，恐怕我没有理解你的要求。

# php - PHP MySQL：查询小于和大于

> ID：11580608
> 
> 赞同：1
> 
> 时间：2012-07-20T13:43:58.567
> 
> 标签：php, mysql

我的 PHP 文件中有以下 mysql 查询：

```
$shopID   = mysql_real_escape_string($_GET['shop_id']);
$latitudeCenter = mysql_real_escape_string($_GET['lat_center']);
$longtitudeCenter = mysql_real_escape_string($_GET['lng_center']);

$lat_min = $latitudeCenter - 0.045;
$lat_max = $latitudeCenter + 0.045;
$long_min = $longtitudeCenter - (0.045 / cos($latitudeCenter*M_PI/180);
$long_max = $longtitudeCenter + (0.045 / cos($latitudeCenter*M_PI/180);

$sql = "SELECT * FROM shops WHERE shop_id = '$shopID' AND lat >= '$lat_min' AND lat <= '$lat_max' AND lng >= '$long_min' AND lng <= '$long_max'"; 
```

由于某种原因，查询未成功运行。上述查询有效吗？谢谢

编辑：

$long_min 和 $long_max 计算有问题，因为当它们被注释掉时，它工作正常。

这是我试图转换为 PHP 的代码：

```
lat_min = lat_center - 0.045;
lat_max = lat_center + 0.045;
long_min = long_center - (0.045 / Math.cos(lat_center*Math.PI/180);
long_max = long_center + (0.045 / Math.cos(lat_center*Math.PI/180); 
```

我的 PHP 有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:51:20.823

使用 MySQl's`BETWEEN`并且**永远不要**使用引号来比较数字。所以查询变为：

```
$sql = "SELECT *
  FROM shops
  WHERE shop_id = $shopID
    AND lat BETWEEN $lat_min AND $lat_max
    AND lng BETWEEN $long_min AND $long_max"; 
```

在哪里，我认为该`shop_id`列是自动递增的数字。

# html - CSS - 浮动导致不希望的渲染

> ID：11580612
> 
> 赞同：1
> 
> 时间：2012-07-20T13:44:04.093
> 
> 标签：html, css, layout

我的 CSS：

```
body
{
    font-family:verdana;
    line-height:1.5em;
    color:#666;
    font-size:0.8em;
}

.objectAttributesOuter
{
    border: 1px solid #999;
    padding:6px;
    margin:6px;
    background-color:#EDEEFA
}

.objectAttributes
{
    padding: 5px, 0px, 5px, 5px;
}

.whiteBoxWithBorder
{
    padding:5px;
    margin-right:5px;
    background-color:#fff;    
    border: solid 1px #ccc;
    float:left;
} 
```

我的 HTML：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft&reg; HTML Help Workshop 4.1">
<Title>Details</Title>
<link rel  = "stylesheet" href="css.css" type = "text/css" />
</HEAD>
<BODY>

<div class = "objectAttributesOuter">
    <div class="objectAttributes">
         <div class="whiteBoxWithBorder">
                GetType()
         </div> 
         <div class="whiteBoxWithBorder">
                Returns the type ...
         </div>
    </div>
</div>

</BODY>
</HTML> 
```

理想的渲染是在“objectAttributesOuter”内渲染“whiteBox”，但您可以看到它重叠。如果我删除浮动标签，则 2 个 div 会在 whiteBox 内呈现，但不会并排显示。

有什么想法可以让它们在“objectAttributesOuter”标签中并排显示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:00:18.667

看看这个[**myFiddle**](http://jsfiddle.net/cwDFA/)

采用`<div style="clear:both"></div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:47:29.410

尝试将 overflow:auto 放在 .objectAttributes 上，看看是否有帮助。

如果您的容器和浮动元素有宽度，这也会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:49:45.773

在 objectAttributesOuter 上放置一个 float:left:

```
.objectAttributesOuter
{
    border: 1px solid #999;
    padding:6px;
    margin:6px;
    background-color:#EDEEFA;
    float:left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T13:52:09.033

更改 objectAttributesOuter 类如下；

```
.objectAttributesOuter
{
    border: 1px solid #999;
    padding:6px;
    margin:6px;
    background-color:#EDEEFA;
    overflow:auto;
} 
```

# ruby-on-rails - 在 Rails / Postgres 中使用字符串主键时，我应该删除默认的“id”字段吗？

> ID：11580613
> 
> 赞同：0
> 
> 时间：2012-07-20T13:44:10.390
> 
> 标签：ruby-on-rails, postgresql, activerecord, heroku

这是基于[我之前提出](https://stackoverflow.com/questions/11494417/how-to-isolate-id-from-string-primary-key-in-heroku-postgres)的一个问题（没有任何运气）。

我有一个使用字符串作为主键的模型：

```
class Employee < ActiveRecord::Base
   self.primary_key = "employment_id"
end 
```

该表还包含带有唯一性约束的 Rails 默认“id”字段。

当我在本地添加新员工时，一切正常，Rails 会自动生成一个新的唯一 ID。

但是，当我在 Heroku Postgres 上运行它时，它似乎将 'id' 和 'employment_id' 视为同一个字段。我试图通过手动设置一个唯一的 id 来解决这个问题，但仍然得到这种行为：

```
Employee.new do |s|

  max_id = Employee.maximum(:id)  
  puts max_id.to_s             # => 1803 

  s.employment_id = "fred_01"      
  s.id = max_id + 1 

  puts employment_id.to_s      # => 1804

end 
```

我在本地运行 postgres 9.1.3（而 Heroku 在 9.1.4 上）。我在 Rails 3.2.3 上。

我的问题是：

*   知道这里发生了什么吗？
*   您认为我使用employment_id 作为主键是否正确？
*   如果我删除“id”字段会有帮助吗？
*   您还有其他最佳实践推荐吗？

谢谢你的帮助！

德里克。

**编辑：**

按要求添加迁移文件：

```
class CreateEmployees < ActiveRecord::Migration
  def change
    create_table :employees do |t|
      t.string :employment_id, :unique => true
      etc...
    end
  end
end 
```

**编辑**

非常好心的没有人指出这一点，但我现在很清楚，真正的答案是“仅仅因为你可以，并不意味着你应该！”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T05:59:51.767

Rails 4.2.0 和 Postgres 的更新，以防它帮助任何人......

将 a`id: :string`放入`create_table`选项中：

```
class FooMigration < ActiveRecord::Migration
  def change
    create_table :foo, id: :string do |t|
      t.string :name, null: false
      t.timestamps null: false
    end
  end
end 
```

耙分贝：迁移

```
== 20150225043441 FooMigration: migrating ===========================
-- create_table(:foo, {:id=>:string})    -> 0.0031s
== 20150225043441 FooMigration: migrated (0.0032s) ================== 
```

rails db（和 \d foo）

```
psql (9.3.6)
Type "help" for help.

bar_development=# \d foo
                  Table "public.foo"
   Column   |            Type             | Modifiers 
------------+-----------------------------+-----------
 id         | character varying           | not null
 name       | character varying           | not null
 created_at | timestamp without time zone | not null
 updated_at | timestamp without time zone | not null
Indexes:
    "foo_pkey" PRIMARY KEY, btree (id) 
```

我最终得到一个带有主键索引的“非空”字符串列。

使用除以外的列名`id`更复杂。

`schema.rb`编辑（2015 年 2 月 26 日）：rails 生成文件时似乎存在错误。它不会记录自定义主键状态，您需要进入并编辑它以将`id: :string`选项添加到`create_table`调用中。

IE。

```
create_table "foo", id: :string, force: :cascade do |t|
  t.string   "name",       null: false
  t.datetime "created_at", null: false
  t.datetime "updated_at", null: false
end 
```

糟糕的部分：每次进行迁移时，该更改都将被撤消。您必须密切关注文件内容（或编写测试:)）。

该错误已在[PR 18228](https://github.com/rails/rails/pull/18228)中修复，并于 2015 年 1 月 3 日合并到 rails:master。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:44:20.273

根据[这篇](https://stackoverflow.com/questions/1200568/using-rails-how-can-i-set-my-primary-key-to-not-be-an-integer-typed-column)文章，它应该可以解决问题：

```
class CreateEmployees < ActiveRecord::Migration
  def change
    create_table :employees, {:id => false} do |t|
      t.string :employment_id, :unique => true
      etc...
    end
  end
  execute "ALTER TABLE employees ADD PRIMARY KEY (employment_id);"
end 
```

同样在您的模型中：

```
class Employee < ActiveRecord::Base
  set_primary_key :employment_id
  ...
end 
```

# mysql - 阅读 const 表后注意到不可能的 WHERE

> ID：11580614
> 
> 赞同：1
> 
> 时间：2012-07-20T13:44:15.233
> 
> 标签：mysql, inner-join

我的两个表无法加入。跑步

```
EXPLAIN SELECT  `A`.`id` 
FROM  `demo`.`A` AS  `A` 
INNER JOIN  `demo`.`B` AS  `B` 
ON (  `A`.`id` = 'B.A_id' ) 
```

产量

```
extra="Impossible WHERE noticed after reading const tables" 
```

结果。我所有的研究表明，这条消息应该意味着其中一个表是空的，或者 where 条件包含一些永远无法满足的条件，例如“where 1=0”。

为了隔离问题，我创建了数据库的副本并删除了除复制问题所需的表和行之外的所有内容。为了消除可能的问题，我删除了其中一张表上的所有索引。

我什至尝试过：

```
mysql> select * from A where id=23;
+----+
| id |
+----+
| 23 |
+----+
1 row in set (0.00 sec)

mysql> select * from B where A_id=23;
+------+------+
| A_id | B_id |
+------+------+
|   23 |   10 |
|   23 |   13 |
+------+------+
2 rows in set (0.00 sec) 
```

所以这个连接应该至少产生一行。有些东西必须被打破，但我不知道是什么。

见[https://gist.github.com/3150634](https://gist.github.com/3150634)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:49:03.107

您在 where 条件中使用了错误的字符。用`替换'：

```
SELECT  `A`.`id` 
FROM  `demo`.`A` AS  `A` 
INNER JOIN  `demo`.`B` AS  `B` 
ON (  `A`.`id` = `B`.`A_id` ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:50:55.317

将“B.A_id”更改为

```
EXPLAIN SELECT  `A`.`id`  
FROM  `demo`.`A` AS  `A`  
INNER JOIN  `demo`.`B` AS  `B`  
ON (  `A`.`id` = `B`.`A_id' ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:49:34.027

这不应该是

```
ON (  `A`.`id` = `B`.`A_id` ) 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:10:29.930

我终于弄清楚发生了什么。在原始查询中，CakePHP 生成

```
... ON (  `Equipment`.`id` = 'ql.equipment_id' AND ... 
```

所以 ql.equipment_id 作为一个常量字符串给出。难怪 MySQL 将条件标记为“不可能”！

当我看那些的时候，我需要更用力地眯着眼睛！

感谢大家的快速回复。

# python - 将 python 中的 wget 与 Popen 一起使用

> ID：11580622
> 
> 赞同：0
> 
> 时间：2012-07-20T13:44:35.450
> 
> 标签：python, shell, popen

我正在编写一个 python (2.7) 脚本来检查是否缺少某些文件并通过 wget 下载它们。一切正常，但是在下载完成并且脚本应该退出后，bash（我从中启动 python 脚本）没有正确显示。我有光标并且可以输入内容，但没有显示标准提示。我必须调整终端窗口的大小才能正确显示提示。这可能是什么原因？

```
tilenames = ['File1', 'File2', ...]
web_url = http://...

for t in tilenames:
    try:
        open(t, 'r')
    except IOError:
        print 'file %s not found.' % (t)
        command = ['wget', '-P', './SRTM/', web_url + t ]
        output = Popen(command, stdout=subprocess.PIPE)

print "Done" 
```

我认为这与调用 wget 进程的方式有关。最后一个命令*print "Done"*实际上是在 wget 将其所有输出写入 shell 之前完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:48:58.267

只需添加一个[`.communicate()`](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)后输出，如下所示：

```
tilenames = ['File1', 'File2', ...]
web_url = http://...

for t in tilenames:
    try:
        open(t, 'r')
    except IOError:
        print 'file %s not found.' % (t)
        command = ['wget', '-P', './SRTM/', web_url + t ]
        p = Popen(command, stdout=subprocess.PIPE)
        stdout, stderr = p.communicate()

print "Done" 
```

`communicate`将返回写入`stdout`和`None`用于 stderr 的输出，因为它没有转发到 a `PIPE`（您将在终端上看到它）。

顺便提一句。您应该关闭打开的文件对象（要检查文件是否存在，您可以使用[os.path](http://docs.python.org/library/os.path.html)中的函数，例如[os.path.exists](http://docs.python.org/library/os.path.html#os.path.exists)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:49:15.867

wget 将其统计信息写入`stderr`，这就是它扰乱您的终端的原因。stdout 和 stderr 会以不同的时间间隔刷新和查询，因此您可能会`Done`在`wget`.

一个解决方法是调用或重定向`wget`使用或类似的东西。`-q``stderr``stderr=open("/dev/null", "w")`

此外，您可能应该使用它[`.communicate()`](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)来避免管道问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:55:51.323

您可以使用 os.system （但请参阅[http://docs.python.org/release/2.5.2/lib/node536.html](http://docs.python.org/release/2.5.2/lib/node536.html)）。基本上 Popen 旨在允许您的 python 进程从命令输出中读取。您似乎不需要这样做，因此下面的片段应该可以满足您的需求：

```
import os
import subprocess

p = subprocess.Popen(['wget','http://www.aol.com'],stdout=subprocess.PIPE)
os.waitpid(p.pid,0)
print "done" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T22:01:55.003

如果您将 -q 选项添加到 wget 它也可以工作（相当模式）

# python - Youtube 视频上传

> ID：11580623
> 
> 赞同：0
> 
> 时间：2012-07-20T13:44:37.167
> 
> 标签：python, video, upload, youtube

我正在尝试使用[gdata api](http://code.google.com/p/gdata-python-client/)将视频上传到 youtube 。
我还查看了[hello-youtube](http://code.google.com/p/hello-youtube/)示例。
有谁知道我是否可以在不需要用户登录 youtube 的情况下使用 youtube 浏览器上传？我希望用户从他们的计算机中选择一个视频，并将其上传到我的开发者帐户（而不是用户帐户）。这可能吗？如果是这样，有人可以帮我举个例子吗？

非常感谢！

编辑

我发现可以使用任何普通的 youtube 帐户从服务器端登录（不共享我的密码，尽管如果有人提交不良内容，我的帐户仍然会被暂停）。代码可以在[python开发者指南的“ClientLogin authentication for installed applications”中找到](http://developers.google.com/youtube/1.0/developers_guide_python)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:53:34.497

这是一个非常糟糕的主意，因为您要对频道的内容和帐户的使用负责。

这也意味着您将与全世界分享您的 Google 密码。坏主意，坏主意，坏主意，...

# regex - 正则表达式操作

> ID：11580626
> 
> 赞同：0
> 
> 时间：2012-07-20T13:44:41.723
> 
> 标签：regex, matcher, regex-greedy

我的输入是

```
String input = "I am doing <span id='icms'>test</span>on <span id='icms'>regex</span> exp." 
```

现在我的输出就像

```
"regex exp" 
```

但是我的输出需要这样

```
I am doing test on regex exp 
```

所以需要关于正则表达式和匹配器的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:49:05.933

你需要两个替代品。首先替换`<span[^>]*id=['"]icms['"][^>]*>([^<]*)</span>`为`' $1 '`（不带引号；它们只是告诉您必须预先添加一个空格），然后用一个空格替换`' {2,}'`（再次不带引号）。

快速 PowerShell 测试：

```
PS> "I am doing <span id='icms'>test</span>on <span id='icms'>regex</span> exp." -replace '<span[^>]*id=[''"]icms[''"][^>]*>([^<]*)</span>',' $1 ' -replace ' {2,}',' '
I am doing test on regex exp. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:49:13.870

以下将捕获不是标签的每个部分，这似乎是您想要的：

```
(?:(.*)<.*?>(.*))* 
```

编辑：

然后对于这个特定的标签：

`(?:(.*?)<span id='icms'>([^<]*?)</span>(.*))*`

# sql - PostgreSQL - 计算层次结构中的元素

> ID：11580634
> 
> 赞同：1
> 
> 时间：2012-07-20T13:44:48.737
> 
> 标签：sql, postgresql

这里有张桌子：

```
CREATE TABLE product_categories (
id INT NOT NULL PRIMARY KEY,
parent INT NOT NULL,
name varchar(50) NOT NULL,
isProduct boolean NOT NULL
); 
```

有没有办法计算每个类别中的产品数量？

那是：

```
INSERT INTO product_categories VALUES (1, NULL, 'Main', 'no');

INSERT INTO product_categories VALUES (2, 1, 'Plant', 'no');
INSERT INTO product_categories VALUES (3, 2, 'Cactus', 'yes');
INSERT INTO product_categories VALUES (4, 2, 'Spruce', 'yes');
INSERT INTO product_categories VALUES (5, 2, 'Birch', 'yes');
INSERT INTO product_categories VALUES (6, 2, 'Pine', 'yes');

INSERT INTO product_categories VALUES (7, 1, 'Stock', 'no');
INSERT INTO product_categories VALUES (8, 7, 'Spade', 'yes');
INSERT INTO product_categories VALUES (9, 7, 'Watering can', 'yes'); 
```

并且应该收到：

```
Category | Count
Main     | 6
Plant    | 4
Stock    | 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:54:50.423

您需要使用[递归公用表表达式](http://www.postgresql.org/docs/8.4/static/queries-with.html)

```
WITH RECURSIVE Parents AS
(   SELECT  ID, Parent, Name, IsProduct
    FROM    product_categories
    WHERE   Parent IS NOT NULL
    UNION ALL
    SELECT  c.ID, p.Parent, c.Name, c.IsProduct
    FROM    product_categories c
            INNER JOIN Parents p
                ON p.ID = c.Parent
)
SELECT  pc.Name, 
        COUNT(*) AS Products, 
        ARRAY_AGG(p.Name) AS ProductList
FROM    product_categories pc
        INNER JOIN Parents p
            ON p.Parent = pc.ID
WHERE   p.IsProduct = 'yes'
GROUP BY pc.Name 
```

**[工作示例](http://www.sqlfiddle.com/#!1/683ee/13)**

# html - 从网页文本区域获取的文本中的 cr 或 lf 字符是什么？

> ID：11580635
> 
> 赞同：0
> 
> 时间：2012-07-20T13:44:52.080
> 
> 标签：html, sql-server

我正在将网页上的 textarea 中的副本保存到 sql server db 中。当在其他地方显示文本时，此过程会保留回车和换行。

我想以编程方式向同一个字段添加一些内容 - 有谁知道创建这个 cr 和 lf 的字符是什么？我无法使用 ASCII 转换器确定它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:46:04.353

CR + LF 在 T-SQL 中如下：

```
SELECT 'foo' + CHAR(13) + CHAR(10) + 'bar'; 
```

在很多情况下，将两者都包括在内很重要，并且按特定顺序列出它们很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:48:32.310

当显示 HTML 时，它将主要忽略空白，因此 HTML 中的 CR+LF（回车和换行）不会导致在浏览器中呈现的 HTML 中显示新行。

相反，HTML 分别使用[段落标签](http://www.w3schools.com/tags/tag_p.asp) `<p></p>`和[换行标签](http://www.w3schools.com/tags/tag_br.asp) `<br />`来表示段落和换行符。

# google-docs-api - 如何从谷歌文档中提取文本以显示在我的网站上？

> ID：11580636
> 
> 赞同：1
> 
> 时间：2012-07-20T13:44:57.597
> 
> 标签：google-docs-api

我有一个用户想要使用谷歌文档更新他们网站上的文本。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:16:19.667

我还没有研究过是否可以使用 API，但我*知道*加载页面和解析内容很容易。

这是我使用 C# 解析 Google 文档时的一个（相当无意义的）片段 -

```
contents = title = browser.ResponseData;
contents = contents.Substring(contents.IndexOf(">DOCS_mutations") + 20);
contents = contents.Substring(0, contents.IndexOf("\"}") + 1);
contents = contents.Substring(contents.IndexOf("\"s\":"));
contents = contents.Substring(contents.IndexOf(":") + 1);
contents = contents.Substring(1, contents.Length - 2);

title = title.Substring(title.IndexOf("/><script type=\"text/javascript\">"));

title = title.Substring(title.IndexOf("config, '") + 9);
title = title.Substring(0, title.IndexOf("'")); 
```

上面的代码片段通过解析以下区域（其中*foo*是我的文档的内容）从 HTML 中获取文档的内容 -

```
DOCS_mutations = [{"ty":"is","ibi":1,"s":"foo"}, 
```

该信息只是说明*如何*做到这一点的一个例子。

重要的是要注意某些字符被替换为其他字符，这样它们就不会干扰 HTML。例如，内容

`foo " / \ <`

被替换为

`foo \" / \ \u003C`

我**强烈**建议您考虑考虑一种可以满足您的客户的替代方案，因为这种解析另一个页面以更新另一个页面的方法感觉非常不必要。

假设您使用的是 PHP，如果您*真的*需要这样做，那么我建议您使用[cURL](http://php.net/manual/en/book.curl.php)或`[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)`将文档下载到您的服务器上。

我应该注意，您**必须**考虑您的想法的效率，因为您**当然**不希望*每次*有人希望查看您的页面时都从 Google Docs 下载最新文档。我建议根据站点管理员的请求/指示调用重新下载。另请注意，Google 文档会定期更新服务器端版本（在您修改文档时）。需要注意这一点，因为如果您不考虑这一点，这将使您的服务器可以下载未完成的文档。

最后，作为使用 Google Docs 的替代方案，我希望建议您创建一个管理控制面板供您的客户使用。问他是什么让他希望以这种方式使用 Google Docs，然后实现使您*自己的*编辑器成为Google Docs的可接受**替代品的功能。**

如果您需要进一步说明，或者您需要一些示例代码，请告诉我。

# sitecore - 构建 TDS 项目时出现无效许可异常

> ID：11580637
> 
> 赞同：8
> 
> 时间：2012-07-20T13:45:03.637
> 
> 标签：sitecore, sitecore6, tds

我们正在运行带有几个 TDS 项目的 Sitecore 6.5，并且我一直在尝试让 TFS 构建在我们的 TFS 构建服务器上工作。当项目尝试构建时，我们收到以下错误：

```
C:\Program Files (x86)\MSBuild\HedgehogDevelopment\SitecoreProject\v9.0\HedgehogDevelopment.SitecoreProject.targets (354): 
Exception Invalid License(Exception) in file sitecore\content.item. 
Stack trace: at HedgehogDevelopment.SitecoreProject.Tasks.CollectSitecoreItems.Execute() 
```

我们已经在构建服务器上安装了 TDS，并且我在注册表中验证了许可证密钥与我们的许可证匹配。不太确定下一步可能是什么。以前有人在 TDS 持续集成构建中遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-10T20:53:18.623

I appreciate that this is an old question but wanted to add this in case anyone else stumbles upon it.

I've been setting up TDS on Visual Studio Online (what was TFS Online) following this wonderful article from Michael Edwards: [http://www.experimentsincode.com/?p=586](http://www.experimentsincode.com/?p=586)

Although it's a bit vague at the end of the article - you can actually include the License info with a config file. You have to add this file manually here: C:\Program Files (x86)\MSBuild\HedgehogDevelopment\SitecoreProject\v9.0 Call the file TDSLicense.config

Save the following (with your license information in) in the file:

```
<?xml version="1.0" encoding="utf-8" ?>
<license Owner="CompanyName" Key="aaaa-bbb-ccc-dddd" /> 
```

If it's a permissions issue with reading the license from the registry - this should sort it out.

Micheal's blog post is well worth a read - it goes over and above what I've detailed here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:08:17.590

我不确定我是否有答案，但我经常发生的两件事是：

1.  Hedgehog许可证每月到期一次（不确定这是不是我公司的协议）
2.  有时我无法使用 TDS 同步，除非我重新安装 SiteCore 连接器。幸运的是，有一个内置按钮：只需在 Visual Studio 中右键单击 TDS，然后选择“安装 SiteCore 连接器”。

希望这可以帮助。

# iphone - 为创建的 UIToolbar 设置 UIToolbarPosition

> ID：11580638
> 
> 赞同：3
> 
> 时间：2012-07-20T13:45:05.590
> 
> 标签：iphone, objective-c, ios, ios5, uitoolbar

我正在编写仅针对 iOS5 设备的应用程序，因此我正在尝试最大限度地使用新`appearance`API。

我可以`UIToolbar`用以下方法改变我的背景：

```
[[UIToolbar appearance] setBackgroundImage:<myImage> forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

一切正常，但我正在寻找更多的定制，所以我想知道使用`UIToolbarPosition`并遇到了一些问题。使用 InterfaceBuilder 或以`UIToolbar`编程方式添加我将它定位在主视图的顶部 - 所以我希望`UIToolbarPosition`设置`UIToolbarPositionTop`为设置`UIToolbarPosition`（是的，我已经用谷歌搜索过了）。

所以 - 主要问题 - 如何`UIToolbar`正确创建和标记它，所以它只能响应`UIToolbarPositionTop`or `UIToolbarPositionBottom`，所以我可以使用：

```
[[UIToolbar appearance] setBackgroundImage:<myImage_1> forToolbarPosition:UIToolbarPositionTop barMetrics:UIBarMetricsDefault];

[[UIToolbar appearance] setBackgroundImage:<myImage_2> forToolbarPosition:UIToolbarPositionBottom barMetrics:UIBarMetricsDefault]; 
```

**编辑：**按要求提供更多详细信息。

我的应用程序中有多个工具栏 - 例如，在 2 个屏幕上位于屏幕顶部的工具栏、充当键盘辅助视图的工具栏和位于模态屏幕底部的 2 个工具栏。我想最大限度地使用新的外观 API，而不是在每个屏幕上自定义工具栏，因此我在询问整个 UIToolbarPosition 的事情以及如何使用它。

我知道我可以通过分别自定义每个 UIToolbar 来实现我想要的，但我只是对新的 API 和 UIToolbarPosition 的使用感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:26:00.647

`UIToolbarPostion`不是您应该以编程方式设置的属性 - 相反，它允许您告诉程序如何处理位于不同位置的工具栏。这主要用于因屏幕变化（自动旋转）而被推动的工具栏，或者位于具有可变内容的导航控制器之类的东西上。

话虽如此，如果您想直接访问您的工具栏以便您可以使用它们/设置属性/等，有几种方法。听起来您知道标签是什么，这是一种有效的方法 - 只需在 IB 中或以编程方式为工具栏提供一个标签（在 IB 的侧栏中编辑标签属性或`.tag`在声明工具栏时使用该属性）。然后您可以使用该`viewWithTag`方法访问您的工具栏。但是，更好的方法是通过控制从工具栏拖动到头文件来为工具栏创建一个 IB 属性（与标签或按钮相同）。然后你就可以写了`[nameOfToolbarProperty doSomeMethod]`。如果您正在使用代码创建工具栏，那么只需以相同的方式引用它，例如

`UIToolbar *tref = [/*toolbar creation code*/];`

总之，您的代码

```
[[UIToolbar appearance] setBackgroundImage:<myImage_1> forToolbarPosition:UIToolbarPositionTop barMetrics:UIBarMetricsDefault]; 
```

可以通过添加来工作

```
//Connect this to your toolbar in Interface Builder
@property (weak, nonatomic) IBOutlet UIToolbar *tref; 
```

到你的标题。然后就做

```
 [tref setBackgroundImage:<myImage_1> forToolbarPosition:UIToolbarPositionTop barMetrics:UIBarMetricsDefault]; 
```

请注意，这只是告诉程序如果工具栏位于顶部位置时要显示什么图像 - 它不会设置工具栏的位置。`UIToolbarPosition`是一个常数（所以你不能设置它）。

# php - 在 PHP 中使用上传调整图像大小

> ID：11580639
> 
> 赞同：-4
> 
> 时间：2012-07-20T13:45:07.223
> 
> 标签：php, image

这是我的工作图像上传和重命名代码，但是我需要一些帮助来调整正在上传的图像的大小。

上传代码：

```
// Upload File to Directory
    $code = md5(time());
    $image = $_FILES['userfile']['name'];
    $imagename = $code.$image;
    $file_name = basename($_FILES['userfile']['name']);
    $uploaddir = '../_gallery/' . $imagename;
    $uploadfile = $uploaddir . basename($_FILES['userfile']['name']);
    move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile); 
```

存储到 MySQL：

```
$sql="UPDATE b_thome SET 
hdescription = '$front_description', 
himg = '$uploadfile', 
hndescription = '$right_description', 
hfacebook='$facebook_link', 
htwitter='$twitter_link' 
WHERE locationid = '$location'"; 
```

有没有一种简单的方法来调整图像集 600 x 800px 的大小？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:50:31.907

使用[GD](http://php.net/manual/en/book.image.php)库来调整它的大小，它提供了图像管理所需的所有功能。有了它，您可以使用这样的函数来创建一个图像，它是第一个图像的缩减：

```
function resizeImage($file, $filename, $newwidth = 800, $newheight = 600)
{       
    $type = substr($file,strrpos($file,".")+1);

    switch($type) 
    {
        case 'jpg':
            $src = imagecreatefromjpeg($file);
            break;
        case 'jpeg':
            $src = imagecreatefromjpeg($file);
            break;
        case 'gif':
            $src = imagecreatefromgif($file);
            break;
        case 'png':
            $src = imagecreatefrompng($file);
            break;
        default:
            $src = imagecreatefromjpeg($file);
            break;
    }

    list($width,$height)=getimagesize($file);
    $tmp=imagecreatetruecolor($newwidth,$newheight);
    imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

    switch($type) {
        case 'jpg':
            imagejpeg($tmp,$filename,100);
            break;
        case 'jpeg':
            imagejpeg($tmp,$filename,100);
            break;
        case 'gif':
            imagegif($tmp,$filename,100);
            break;
        case 'png':
            imagepng($tmp,$filename,9);
            break;
        case 'wbm':
            imagewbmp($tmp,$filename,100);
            break;
        default:
            imagejpeg($tmp,$filename,100);
            break;
    }
    imagedestroy($src);
    imagedestroy($tmp);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:07:45.747

[或者，如果您很懒惰，可以使用一个名为PHP Image Magican](http://phpimagemagician.jarrodoberto.com/)的开源项目，它可以轻松轻松地调整图像大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:47:30.627

请参阅[PHP GD 库](http://php.net/manual/en/book.image.php)以在上传时调整图像大小

# c# - 新 ControlChannelTrigger (WinRT) 中的访问被拒绝 (HRESULT 0x80070005)

> ID：11580643
> 
> 赞同：1
> 
> 时间：2012-07-20T13:45:18.580
> 
> 标签：c#, background, windows-runtime

我彻底绝望了……

这是我的代码：

```
ControlChannelTrigger theChannel = new ControlChannelTrigger("channelId", 15, ControlChannelTriggerResourceType.RequestHardwareSlot); 
```

它总是抛出 UnauthorizedAccessException (HRESULT 0x80070005)。

这是我使用的清单

```
 <?xml version="1.0" encoding="utf-8"?>
<Package xmlns="http://schemas.microsoft.com/appx/2010/manifest">
  <Identity Name="cf45d5c8-2936-4d1f-9075-51a87ceb60ba" Publisher="CN=snuk182" Version="1.0.0.0" />
  <Properties>
    <DisplayName>Applic</DisplayName>
    <PublisherDisplayName>snuk182</PublisherDisplayName>
    <Logo>Assets\StoreLogo.png</Logo>
  </Properties>
  <Prerequisites>
    <OSMinVersion>6.2.0</OSMinVersion>
    <OSMaxVersionTested>6.2.0</OSMaxVersionTested>
  </Prerequisites>
  <Resources>
    <Resource Language="x-generate" />
  </Resources>
  <Applications>
    <Application Id="App" Executable="$targetnametoken$.exe" EntryPoint="Applic.App">
      <VisualElements DisplayName="Applic" Logo="Assets\Logo.png" SmallLogo="Assets\SmallLogo.png" Description="Applic" ForegroundText="light" BackgroundColor="#464646" ToastCapable="true">
        <LockScreen Notification="badgeAndTileText" BadgeLogo="ImageResources\badge.png" />
        <DefaultTile ShowName="allLogos" WideLogo="ImageResources\widelogo.png" />
        <SplashScreen Image="Assets\SplashScreen.png" />
      </VisualElements>
      <Extensions>
        <Extension Category="windows.backgroundTasks" Executable="$targetnametoken$.exe" EntryPoint="Applic.BackgroundTask">
          <BackgroundTasks>
            <Task Type="controlChannel" />
          </BackgroundTasks>
        </Extension>
      </Extensions>
    </Application>
  </Applications>
  <Capabilities>
    <Capability Name="removableStorage" />
    <Capability Name="internetClient" />
  </Capabilities>
</Package> 
```

在这里或网上都没有找到任何答案。不知道发生了什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:44:26.390

哈哈，我已经整理好了。在周末之前这样做太明显了。 **我必须在系统设置中将我的应用程序标记为锁屏应用程序。** 谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-05T13:39:30.787

最初我无法弄清楚如何“在系统设置中将我的应用程序标记为锁屏应用程序”但在这里找到并想分享 [![在此处输入图像描述](../Images/3b1e2cfebae43270607b5d534382fc8e.png)](https://i.stack.imgur.com/yg0rR.png)

# linq - 找不到结果时，linq 查询返回什么

> ID：11580646
> 
> 赞同：2
> 
> 时间：2012-07-20T13:45:27.020
> 
> 标签：linq, null

我正在使用查询来查看用户是否已存在于数据库中。如果它找到一个用户，它会将其添加到列表（而不是数据库）中，并显示一条消息。如果用户不存在，程序继续添加用户。

将查询结果添加到列表时存在问题，但结果一无所获。如果查询什么也没找到（用户还不存在），则返回的值不是 null 或 0，所以我不确定如何检查。

我的代码工作正常，但我的问题是试图找到一种更优雅的方法。我尝试将查询结果添加到列表中。如果它是“捕获”，则表示用户不存在，应添加。现在我的代码是：

```
 var userIsNew =
                        from f in controlEntities.Users
                        where (f.UserId == userIdTextBox.Text)
                        select f;

                    List<Users> temp = new List<Users>(); 

                    try
                    {
                        temp = userIsNew.ToList<Users>();
                    }
                    catch
                    {
                        //do nothing
                    }

                    if (temp.Count > 0)
                    {
                        MessageBox.Show("This UserId already exists in the Database. \nPlease try another UserId.");
                    } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:32:50.943

```
 var userIsNew = (from f in controlEntities.Users
                                where (f.UserId == userIdTextBox.Text)
                                select f).FirstOrDefault();

        if (userIsNew != null)
        {
            MessageBox.Show("This UserId already exists in the Database. \nPlease try another UserId.");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T03:18:44.807

另一种方法是：

```
 bool userIsNew = controlEntities.Users.
            Count(f => f.UserId == userIdTextBox.Text) == 0;

        if (!userIsNew)
        {
            MessageBox.Show("This UserId already exists in the Database. \nPlease try another UserId.");
        } 
```

它很有效，因为数据服务器只返回一个数字而不是结果集。

# google-maps-api-3 - 单击 Google Maps v3 更改起点和终点值

> ID：11580647
> 
> 赞同：0
> 
> 时间：2012-07-20T13:45:30.530
> 
> 标签：google-maps-api-3

我想在点击时更改我的出发地和目的地（纬度和经度），这是我的实际代码

```
ser.route({ 'origin': new google.maps.LatLng(-23.563594, -46.654129), 'destination':  new google.maps.LatLng(
-23.563672, -46.640396), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK')ren.setDirections(res);    
    }) 
```

我想改变这个值来绘制一条路径，例如，我点击一个点，他们点击另一个点，所以它得到这个值并绘制一条路径。

我有一条路径，但只有 A 点和 B 点，我想在地图上创建这些点。

[如果需要，这是我对完整代码的测试。](http://www.inventoresdegaragem.com/dbteste/index.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:03:40.043

添加一个[MapsEventListenter](https://developers.google.com/maps/documentation/javascript/reference#MapsEventListener)监听地图上的点击。

[地图](https://developers.google.com/maps/documentation/javascript/reference#Map) [点击事件](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)有一个 latLng 属性。为您的起始位置捕获第一个，为您的结束地址捕获第二个（您可能需要添加一些逻辑以让您的用户拖动它们或在他们弄错时删除它们）。

# android - Android：使用 SurfaceView 时如何支持多种屏幕分辨率

> ID：11580649
> 
> 赞同：1
> 
> 时间：2012-07-20T13:45:31.440
> 
> 标签：android, image, bitmap, scaling, resolutions

**在支持不同的设备及其屏幕时，我遇到了一个问题：**我有一个游戏，我在一个网格中绘制了很多 70px*70px 的图标。

.png 文件为 70*70 @ 315ppi。

在我的 java 代码中，我现在使用以下代码将图像绘制到网格中：

```
for (int x = 0; x < Map.getxSize(); x++) {
        for (int y = 0; y < Map.getySize(); y++) {
            ballSprite.setX(x*70);
            ballSprite.setY(y*70);
            ballSprite.setCurrentFrame(Map.mArray[x][y]-1); //-1 because 0 field is empty
            ballSprite.onDraw(canvas);
        }
    } 
```

(x*70) 非常适合我的 Galaxy Nexus，但是当我在具有 hdpi 800 的设备上测试它时，70px 的值太高了。

使该值适应不同屏幕的最佳方法是什么？谢谢你的协助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:43:23.887

将 X 和 Y 与适当的比例因子相乘。

```
Display display = getWindowManager().getDefaultDisplay(); 
int currentWidth = display.getWidth();  
int currentHeight = display.getHeight();

float scaleX = width that application was written for (in your case Galaxy Nexus width) / currentWidth  .
float scaleY = height that application was written for (in your case Galaxy Nexus height) / currentHeight . 
```

ballSprite.setX(x*70*scaleX) 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-20T00:39:45.920

请参考自己

```
 https://developer.android.com/training/multiscreen/screendensities 
```

你会看到

```
36x36 (0.75x) for low-density (ldpi)
48x48 (1.0x baseline) for medium-density (mdpi)
72x72 (1.5x) for high-density (hdpi)
96x96 (2.0x) for extra-high-density (xhdpi)
144x144 (3.0x) for extra-extra-high-density (xxhdpi)
192x192 (4.0x) for extra-extra-extra-high-density (xxxhdpi) 
```

这些你会看到 0.75x 到 4.0x 我很确定你会使用这些值来缩放 UI 对象以获得屏幕密度。你可能会发现更多，但这些是主要的。

PS新设备不使用from mdpi to xxxhdpi。您将在链接中看到这一点。

# r - 聚合（计数）匹配条件的行，按唯一值分组

> ID：11580650
> 
> 赞同：20
> 
> 时间：2012-07-20T13:45:32.637
> 
> 标签：r

这似乎是一个简单的问题，但我一直在努力解决这个问题：

鉴于此数据框标识了`id`与`contact`谁分组的交互`contactGrp`，

```
head(data)
   id               sesTs  contact    contactGrp   relpos   maxpos
1 6849 2012-06-25 15:58:34   peter        west    0.000000      3
2 6849 2012-06-25 18:24:49   sarah        south   0.500000      3
3 6849 2012-06-27 00:13:30   sarah        south   1.000000      3
4 1235 2012-06-29 17:49:35   peter        west    0.000000      2
5 1235 2012-06-29 23:56:35   peter        west    1.000000      2
6 5893 2012-06-30 22:21:33   carl         east    0.000000      1 
```

有多少联系人`unique(data$contactGrp)`与`relpos=1`和`maxpos>1`？

预期的结果是：

```
1 west   1
2 south  1
3 east   0 
```

我尝试过的一小部分行：

*   `aggregate(data, by=list('contactGrp'), FUN=count)`产生错误，没有过滤
*   using`data.table`似乎需要一个密钥，这在此数据中不是唯一的……</li>
*   `ddply(data,"contactGrp",summarise,count=???)`不确定使用哪个函数来填充`count`列
*   `ddply(subset(data,maxpos>1 & relpos==0), c('contactGrp'), function(df)count(df$relpos))`有效，但给了我一个额外的专栏`x`，感觉好像我把它复杂化了……</li>

SQL 会很简单：`Select contactGrp, count(*) as cnt from data where … Group by contactGrp`但我正在努力学习`R`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-20T14:38:01.817

这是`data.table`解决方案：

```
> library(data.table)
> dt <- data.table(sessions)
> dt[, length(contact[relpos == 0 & maxpos > 1]), by = contactGrp]
     contactGrp V1
[1,]       west  2
[2,]      south  0
[3,]       east  0

> dt[, length(contact[relpos == 1 & maxpos > 1]), by = contactGrp]
     contactGrp V1
[1,]       west  1
[2,]      south  1
[3,]       east  0 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-20T14:03:38.527

我认为这是`ddply`您正在寻找的版本：

```
ddply(sessions,.(contactGrp),
      summarise,
      count = length(contact[relpos == 0 & maxpos > 1])) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-20T17:38:14.953

您第一次尝试使用 aggregate 行不起作用，因为没有 function `count`。你的意思是`length`。您所要做的就是使用 relpos 和 maxpos 的条件数据选择来执行它，并选择一个虚拟变量来获取（不管哪个）的计数。然而，内置`table`命令并非使用各种灵活的聚合命令，而是专门为此而设计的。

```
with( data[data$relpos == 1 & data$maxpos > 1,], table(contactGrp) ) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-20T14:09:31.150

这是另一种方法：

```
a <- data.frame(id=1:10, contact=sample(c("peter", "sahrah"), 10, T), contactGrp=sample(c("west", "east"), 10, T), relpos=sample(0:1, 10, T), maxpos=runif(10, 0,10))

library(sqldf)
sqldf("Select contactGrp, count(*) as cnt from a where relpos=0 and maxpos > 1 Group by contactGrp")
  contactGrp cnt
1       east   3
2       west   1 
```

# android - 在 Android 应用上理解和实现 Eclipse 的语音识别

> ID：11580651
> 
> 赞同：1
> 
> 时间：2012-07-20T13:45:35.823
> 
> 标签：android, speech-recognition

我目前正在开发一个应用程序，我需要能够让用户在必要时只用他们的声音来控制应用程序。我得到了一些显然来自 android 的语音识别代码的副本，我尝试在我的应用程序中使用它。代码本身看起来相当简单，但我需要帮助理解一些部分并在应用程序上实现它。我在安卓设备上运行了这个应用程序，当我使用演讲时，我得到了一个我可能说过的短语列表。我希望能够设置和活动，如果其中一个结果是“关闭应用程序”，例如它将关闭应用程序。我想我可以通过为语音识别器的结果做一个 if 语句来设置它。比如如果 results == close app 然后运行 ​​Activity 关闭。我没有任何设置，因为我

```
package com.example.com.proto1;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

import java.util.ArrayList;
import java.util.List;

    /**
     * Sample code that invokes the speech recognition intent API.
     */
    public class VoiceRecognition extends Activity implements OnClickListener {

        private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

        private ListView mList;

        /**
         * Called with the activity is first created.
         */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Inflate our UI from its XML layout description.
            setContentView(R.layout.voice_recognition);

            // Get display items for later interaction
            Button speakButton = (Button) findViewById(R.id.btn_speak);

            mList = (ListView) findViewById(R.id.list);

            // Check to see if a recognition activity is present
            PackageManager pm = getPackageManager();
            List<ResolveInfo> activities = pm.queryIntentActivities(
                    new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
            if (activities.size() != 0) {
                speakButton.setOnClickListener(this);
            } else {
                speakButton.setEnabled(false);
                speakButton.setText("Recognizer not present");
            }
        }

        /**
         * Handle the click on the start recognition button.
         */
        public void onClick(View v) {
            if (v.getId() == R.id.btn_speak) {
                startVoiceRecognitionActivity();
            }
        }

        /**
         * Fire an intent to start the speech recognition activity.
         */
        private void startVoiceRecognitionActivity() {
            Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                    RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speech recognition demo");
            startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
        }

        /**
         * Handle the results from the recognition activity.
         */
        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
                // Fill the list view with the strings the recognizer thought it could have heard
                ArrayList<String> matches = data.getStringArrayListExtra(
                        RecognizerIntent.EXTRA_RESULTS);
                mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
                        matches));
            }

            super.onActivityResult(requestCode, resultCode, data);

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:06:26.263

这是您从语音识别活动中收到的结果：

```
ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS); 
```

`matches`是您已发音的可能文本列表。如果你想在说出一些神奇的短语时关闭你的应用程序，你需要这样的东西：

```
if (matches.contains("close")) {
     finish();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T17:05:20.380

如果您想超越字符串比较，您可以尝试词干或语音匹配。

您将需要它以使您的识别更加准确，或者如果您有一些难以识别的单词。

[在这里](https://github.com/gast-lib/gast-lib/tree/master/library/src/root/gast/speech/text)查看实现词干和语音匹配的代码。代码的其他部分使用匹配进行语音识别。如果您想了解所有细节，还有这[本书。](http://www.amazon.com/Greg-Milette/e/B00851G18G)

# c++ - 在 C++ windows XP 中等效于 int 21

> ID：11580653
> 
> 赞同：1
> 
> 时间：2012-07-20T13:45:46.833
> 
> 标签：c++, assembly, inline-assembly

中断在 C++ 的内联汇编器中不起作用（我尝试过 VC++ 10、GCC 4、Digital Mars）。是否有任何等效中断的窗口可自由访问内存区域？我怎样才能获得系统属性和视频内存？（我可以吗？）

这些我想知道：

```
mov ah,06h
mov dl,35h 
int 21f    //would print '5' on screen but it isnt (works in only pure assembler) 
```

和：

```
mov ax,1500h
mov ch,97h
int 2f   //would get me info for the cache-hit number on DI:SI 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:55:23.700

Win32 应用程序不调用中断，它们调用系统服务。[Iczelion 的页面](http://win32assembly.online.fr/tutorials.html)上有许多 Windows 教程的程序集。

# javascript - Jquery 元素用法

> ID：11580664
> 
> 赞同：0
> 
> 时间：2012-07-20T13:46:24.917
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何从 JQuery 选择器中获取 DOM 元素](https://stackoverflow.com/questions/1677880/how-to-get-a-dom-element-from-a-jquery-selector)

我知道使用普通的 javascript 我可以做到

```
formitem.validity.valid 
```

或者

```
formitem.checkValidity(); 
```

我如何使用 Jquery 来调用这些函数？下面我使用自定义属性选择器来获取我的元素，但似乎无法像下面那样使用它......

```
$('[data-dependID=pobText]').validity.valid 
```

或者

```
$('[data-dependID=pobText]').formitem.checkValidity(); 
```

很简单，但我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:47:44.573

使用获取，

IE

```
$('[data-dependID=pobText]').get(0).formitem.checkValidity(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:47:57.133

您需要为此获取 DOM 节点：

```
$('[data-dependID=pobText]').get(0).validity.valid;
$('[data-dependID=pobText]').get(0).formitem.checkValidity(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:48:12.230

用于`.get(n)`获取第 n 个元素作为 DOM 对象，或者只是`[n]`

```
$('selector').get(n).foo 
```

或者

```
$('selector')[n].foo 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T13:48:16.913

jQuery 对 DOM 的调用返回一个类似数组的对象，因此您可以通过索引访问“数组”中的 DOM 元素。该`get()`方法做同样的事情，只是它将它封装在一个函数调用中（这是一个开销）。

更好地使用索引：

```
$('[data-dependID=pobText]')[n].validity.valid;
$('[data-dependID=pobText]')[n].checkValidity(); 
```

# php - PHP中依赖注入容器的直接示例

> ID：11580665
> 
> 赞同：2
> 
> 时间：2012-07-20T13:46:28.863
> 
> 标签：php, dependency-injection

有人可以为 PHP 中的依赖注入容器 (DIC) 提供一个基本的工作示例吗？

我知道这是一个模糊的问题，我一直在研究一些例子，特别是 Fabian Potencier 的例子，他用一个工作示例很好地解释了 PHP 中的 DI 是什么。

除了 Fabian，我还浏览了一些文章，但我正在寻找 DIC 的工作示例，以便像我这样的人通过一个简单的工作示例获得更好的理解。

可能是一个小小的解释，为什么我们需要使用 DIC 也会有所帮助，比如它在什么情况下会派上用场等等。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:59:55.030

我不知道你是否读过那篇文章：
[http ://richardmiller.co.uk/2011/07/07/dependency-injection-moving-from-basics-to-container/](http://richardmiller.co.uk/2011/07/07/dependency-injection-moving-from-basics-to-container/)

但它帮助我了解了 DI 的优势

Richard Miller 还对为什么使用 DI 做了一个很好的介绍：
[https ://speakerdeck.com/u/richardmiller/p/dependency-injection-and-the-symfony2-service-container](https://speakerdeck.com/u/richardmiller/p/dependency-injection-and-the-symfony2-service-container)

它只提供了虚拟代码示例，但您肯定会认识到一些现实世界的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T19:54:14.600

如果你到目前为止还没有读过这篇文章，我强烈推荐它：

*   [控制容器的反转和依赖注入模式](http://martinfowler.com/articles/injection.html)

它不会太长，但也不会太短。根据 Container，它谈到了最初用 Java 编写的 PicoContainer。它的 PHP 变体存在：

*   [http://svn.picocontainer.codehaus.org/browse/picocontainer/php/picocontainer/trunk/container](http://svn.picocontainer.codehaus.org/browse/picocontainer/php/picocontainer/trunk/container)

PicoContainer 的特定文档是：

*   [http://docs.codehaus.org/display/PICO/Home](http://docs.codehaus.org/display/PICO/Home)
*   在这里： http: [//picocontainer.codehaus.org/](http://picocontainer.codehaus.org/)

我在其他一些答案中描述了一个*非常基本的 PHP 服务定位器（* [PHP Globals 的安全替代品（良好的编码实践）](https://stackoverflow.com/a/10963049/367456)），但我会说它更像是一种惰性初始化模式。但是您要求进行很多简化的事情，所以这可能是有用的。

# postgresql - 如何在 HSQL 中创建不区分大小写的索引或约束

> ID：11580666
> 
> 赞同：0
> 
> 时间：2012-07-20T13:46:29.953
> 
> 标签：postgresql, hsqldb, in-memory-database

如何在 PostgreSQL ( `;sql.syntax_pgs=true`) 模式下运行的 HSQL 中创建不区分大小写的索引或约束？

在 Postgres 中，可以使用 lower() 或 lcase() 来完成：

```
CREATE UNIQUE INDEX lower_username_index ON enduser_table ((lcase(name))); 
```

PostgreSQL 也有 CITEXT 数据类型，但不幸的是 HSQL 似乎不支持它。

我目前在 HSQL 2.2.8 和 PostgreSQL 9.0.5。或者，其他可能更适合测试 PostgreSQL DDL 和 SQL 的内存数据库？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:32:11.797

使用 HSQLDB，最好定义一个 UNIQUE 约束，而不是一个唯一索引。

有两种方法可以实现您的目标：

1.  将列的类型更改为 VARCHAR_IGNORECASE，然后使用`ALTER TABLE enduser_table ADD CONSTRAINT CONST_1 UNIQUE(name)`

2.  或者，创建一个生成的列，然后在该列上创建 UNIQUE 约束。`ALTER TABLE enduser_table ADD COLUMN lc_name VARCHAR(1000) GENERATED ALWAYS AS (LCASE(name))'

使用这两种方法，NAME 列中的重复值都会被拒绝。对于第一种方法，索引用于在 NAME 列上进行搜索。使用第二种方法，索引用于搜索 lc_name 列。

（更新）如果要使用 PosgreSQL CITEXT 类型，请在 HSQLDB 中定义类型，然后使用第一个替代方案。

```
CREATE TYPE CITEXT AS VARCHAR_IGNORECASE(2000)
CREATE TABLE enduser_table (name CITEXT, ...
ALTER TABLE enduser_table ADD CONSTRAINT CONST_1 UNIQUE(name) 
```

# ios - 使用并发类型 NSPrivateQueueConcurrencyType 保存上下文时出现死锁

> ID：11580667
> 
> 赞同：1
> 
> 时间：2012-07-20T13:46:35.663
> 
> 标签：ios, core-data

两天以来，我一直在尝试让 Core Data 使用多个线程。我尝试了使用 NSOperations 的标准线程限制方法、合并通知、使用 objectWithId、每个线程的上下文字典，但我仍然遇到奇怪的死锁、不一致的异常和一堆其他讨厌的东西。这让我发疯......此外，当两个线程都可能对共享持久存储进行更改时，我找不到一个关于如何在两个线程中管理上下文的示例或解释......

我尝试使用新的 iOS 5 方法，这应该更容易，但仍然出现错误。第一个问题是保存上下文时的死锁。我删除了所有不必要的代码，并且在足够快地执行此代码时仍然会出现死锁（通过快速点击按钮）：

```
 NSManagedObjectContext *context = [StoreDataRetriever sharedRetriever].managedObjectContext;

    for (int i = 0; i < 5; i++) {            
        NSError *error = nil;
        NSLog(@"Main thread: %@, is main? %d", [NSThread currentThread], [NSThread isMainThread]);
        BOOL saveOK = [context save:&error];

        if (!saveOK) {
            NSLog(@"ERROR!!! SAVING CONTEXT IN MAIN");
        }

        [context performBlock:^{

            NSLog(@"Block thread: %@", [NSThread currentThread]);

            NSError *error = nil;
            BOOL savedOK = NO;

            savedOK = [context save:&error]; 

            if (!savedOK) {
                NSLog(@"ERROR!!! SAVING CONTEXT IN BLOCK");
            }
        }];
    } 
```

数据库没有其他更改，什么都没有，只是保存上下文。这段代码有什么问题？它应该是什么样子？

注意：[StoreDataRetriever sharedRetriever].managedObjectContext 是在 appDelegate 中使用 initWithConcurrencyType:NSPrivateQueueConcurrencyType 创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:03:50.880

这段代码是怎么回事？您正在将上下文同步保存在线程上，然后安排在上下文专用队列上保存。5次。所以基本上，你很可能有两个保存操作，一个同步和一个异步，相互冲突。

这显然是一个问题。您不应该使用该队列之外的私有队列保存上下文。如果上下文队列上没有计划块，它将与当前上下文实现一起使用。但这仍然是错误的。

```
…
for (int i = 0; i < 5; i++) {            
    NSLog(@"Main thread: %@, is main? %d", [NSThread currentThread], [NSThread isMainThread]);
    __block NSError *error = nil;
    __block BOOL saveOK = YES;
[context performBlockAndWait: ^{
    saveOK = [context save: &error];
}];

    if (!saveOK) {
        NSLog(@"ERROR!!!");
    }
    … 
```

使用该代码，您可以在同一个线程上同步执行保存操作 - 感谢 GCD - 节省了上下文切换和同步内容，并且没有任何同时在该上下文上运行两个操作的风险。

使用 NSMainQueueConcurrencyType 时也适用相同的规则，但有一个例外。该队列仅绑定到主线程和主线程。您可以使用带有 performBlock 和 performBlockAndWait（如 NSPrivateQueueConcurrencyType）的任何线程的主队列在上下文中调度块，并且（例外：）您可以直接在主线程上使用上下文。

NSConfinementConcurrencyType 将上下文绑定到特定线程，您不能使用 GCD 或块来处理这样的上下文，只能使用绑定的线程。到目前为止，几乎没有理由使用该并发模型。如果必须，请使用它，但如果您不是绝对必须，请不要。

* * *

**编辑**

这是一篇关于多上下文设置的非常好的文章：http: [//www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

# c# - TextBox：绑定为双精度，通过 IMultiValueConverter 转换：ViewModel 中的值更改时不更新

> ID：11580668
> 
> 赞同：1
> 
> 时间：2012-07-20T13:46:35.460
> 
> 标签：c#, wpf, formatting, caliburn.micro, imultivalueconverter

我正在使用 Caliburn.Micro。

在我的视图中，我有一个`TextBox`Binded to`double X`和一个在我的 ViewModel`Button`中*改变**X*值的。

```
public void ButtonPressed()
    {
        X = AnObject.GetDouble;
        NotifyOfPropertyChange(() => X);
    }

    public double X { get; set; } 
```

**我的目标**是限制显示的小数位数。此数字可在应用程序中配置，因此可用作 AnObject 的属性。因此我定义了一个`IMultiValueConverter`：

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return String.Format(values[1].ToString(), values[0]);
    } 
```

并将我的 TextBox 定义如下：

```
<TextBox>
     <TextBox.Text>
           <MultiBinding Converter="{StaticResource coordinateConverter}" >
                 <Binding Path="X" />
                 <Binding Path="AnObject.FormatNumberOfDecimals" />
           </MultiBinding>
     </TextBox.Text>
</TextBox> 
```

**什么有效：** X 的初始值为零，格式正确。

**什么不起作用：**按下按钮时，新值不会显示在 TextBox 中。

也欢迎不使用 IMultiValueConverter 的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:17:56.073

我过去也遇到过这样的问题，`MultiConverter`当其中一个绑定值更新时， a 不会自动更新。

由于您没有为第二个值使用绑定，因此您可以切换到单个`IValueConverter`，并将您的格式作为`ConverterParameter`

或者干脆使用`StringFormat`绑定的属性

```
<TextBox Text="{Binding X, StringFormat=D4}" /> 
```

请注意，如果您绑定的是`Content`属性而不是`Text`属性，例如在 a 上`Label`，`StringFormat`则绑定的属性将不起作用，您需要改为设置标签的`ContentStringFormat`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:01:52.017

事实证明，我的`string FormatNumberOfDecimals`应该是 format`{0:0.0000}`而不是`0.00000`.

`0.0000`适用于标签的 ContentStringFormat 并且不会在我的 Visual Studio 设计器中导致异常，但在使用`String.Format()`.

`{0:0.0000}`适用于标签的 ContentStringFormat 和使用`String.Format()`. 不幸的是，我的 Visual Studio 设计视图现在抛出异常，并且对带有我的 TextBox 的视图没有用处。

```
System.FormatException
Input string was not in a correct format.
at System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args)
at System.String.Format(IFormatProvider provider, String format, Object[] args)
at System.String.Format(String format, Object arg0) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-14T09:37:23.610

那是工作

十进制借方 = 0; 小数信用 = 0;

```
 decimal.TryParse(values[0].ToString(), out debit);
        decimal.TryParse(values[1].ToString(), out credit);

        decimal total = debit - credit;

        return total.ToString("0.00"); // string form 
```

# asp.net - history.back 在 IE8 中的特定页面上不起作用

> ID：11580671
> 
> 赞同：1
> 
> 时间：2012-07-20T13:46:51.940
> 
> 标签：asp.net, internet-explorer-8

我正在开发一个 ASP.NET 应用程序，它在应用程序的所有页面上都有以下后退按钮。

```
<input type="button" id="btnBack" onclick="history.back();" value = "<- Back" /> 
```

有一个特定的 Test.aspx 页面大部分时间都不起作用。Test.aspx 页面只有一个`autopostback`设置为 true 的下拉列表。

当我将下拉列表中的值更改为某个值时，例如从默认值`value1`更改为`value2`，然后单击`btnBack`，它在大多数情况下都不起作用。当它不起作用时，我看到浏览器的后退按钮被禁用。

有趣的是，这只发生在 Test.aspx 页面上。

我读了这个问题：[IE8 Back Button Stops Working on ASP .NET Page](https://stackoverflow.com/q/3367241/1539782)。但不幸的是，它并没有太大帮助。

编辑：我还在`Page.SmartNavigation = true;`代码隐藏中设置以防止回发被添加到浏览器历史记录中，但它也没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:06:34.073

```
When it doesn't work, I see that the browser's back button is disabled. 
```

这是这个调用不起作用的主要线索，因为这个函数实际上调用了和这个按钮相同的函数。如果由于某种原因没有上一页，则无法返回。

# javascript - javascript，如何按类从输入中获取值？

> ID：11580673
> 
> 赞同：0
> 
> 时间：2012-07-20T13:46:59.097
> 
> 标签：javascript

我使用此代码从输入框中获取值：

```
var suggest_type = document.getElementById('ac-type').value; 
```

现在我需要在其他几个页面上应用我的 js 代码。我听说在一个网站上重复 ID 不太好。所以，我正在考虑改变使用这样的类：

```
var suggest_type = document.getElementByClass('ac-type').value; 
```

这没有得到价值。我如何使用类来获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:49:34.510

在一个网站上重复 id 绝对没问题，而不是在单个 html 文档上。

ID 在一个 html 页面中应该是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:50:43.103

它实际上是：

```
var suggest_type = document.getElementsByClassName('ac-type')[0].value; 
```

但我同意 Jon Taylor 的观点，一个网站中的 ID 可以是相同的，只要它们不在同一页面上重复即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:52:12.807

你应该坚持使用 ID——它们只需要在一个页面中是唯一的。

如果*必须*使用类，则需要使用`getElementsByClassName()`：

```
var elems = document.getElementsByClassName('ac-type');
var value = elems[0].value; 
```

但是，旧浏览器不支持此功能，这是坚持使用 ID 的另一个好理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T13:49:52.150

尝试使用这个：

```
var elements = document.getElementsByClassName('ac-type'); // this is an array containing all matched elements 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T13:52:56.287

只需使用 - 即可使用 jquery

```
$('.ac-type').val(); 
```

你会得到价值。

# visual-studio-2010 - VS2010 web部署连接字符串参数不能为null或为空

> ID：11580680
> 
> 赞同：27
> 
> 时间：2012-07-20T13:47:23.803
> 
> 标签：visual-studio-2010, visual-studio, iis-7, connection-string, webdeploy

将网站部署到运行 IIS7 的 Windows 2008 r2 服务器时遇到问题。我之前已将另一个站点部署到此服务器。Web 部署正在连接我的文件并将其复制到服务器，但我看到以下错误。

```
1 The 'Connection String' argument cannot be null or empty
2   Web deployment task failed.((20/07/2012 14:19:16) An error occurred when the request was processed on the remote computer.)

(20/07/2012 14:19:16) An error occurred when the request was processed on the remote computer. Could not find a part of the path 'C:\Users\Me\Documents\Visual Studio 2010\Projects\MySite\MySiteClient\obj\Release\AutoScripts\EFDbContext-Deployment_SchemaOnly.sql'.     0   0   MySiteClient 
```

我已验证该路径存在于我的本地计算机上。

我尝试在没有 web.config 转换的情况下发布，并使用 xdt:transform 函数来设置远程服务器字符串。

我还在 Package/Publish SQL 选项卡中明确设置了目标数据库和源数据库的连接字符串，我不知道问题出在哪里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-06-03T21:00:41.173

这发生在我身上，我设法隔离了问题......在我手动添加新的`SQL Server`连接字符串后，我`Web.config`在尝试部署到远程服务器时开始遇到这个错误。

当我在 Visual Studio 2012 中打开 web deploy Publish 配置文件时，我注意到`Settings`它在选项卡下设置了此选项：***Use this connection string at runtime (update destination Web.config)***。

奇怪的是，这是由 VS 2012 自动设置的......

要解决此问题，只需取消选中该复选框，网络部署应该会重新开始工作。

![在此处输入图像描述](../Images/89169f9aa0fc7b4bb329eaa618704956.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-25T16:54:38.460

除了 Leniel 的回答之外，如果您没有使用 SqlClient 或 Entity Framework Code First 并因此看不到复选框，请暂时将 web.config 的连接字符串中的 providerName 设置为 System.Data.SqlClient 然后返回到您的发布设置以取消选中复选框。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-02T15:59:34.943

我遇到了同样的问题：

> 2>C:...\Microsoft.Web.Publishing.targets(4270,5): 错误：“db-Web.config 连接字符串”参数不能为空或为空。2>C:...\Microsoft.Web.Publishing.targets(4270,5)：错误：“dbAudit-Web.config 连接字符串”参数不能为空或为空。2>C:...\Microsoft.Web.Publishing.targets(4270,5): 错误：“dbLog-Web.config 连接字符串”参数不能为空或为空。

正如我使用的那样：

```
<connectionStrings>
  <add name="db" providerName="MySql.Data" connectionString="server=mysql.gko.local;user=maindk;database=gavekortet;port=3306;password=123456" />
  <add name="dbLog" providerName="MySql.Data" connectionString="server=mysql.gko.local;user=maindk;database=logs;port=3306;password=123456" />
  <add name="dbAudit" providerName="MySql.Data" connectionString="server=mysql.gko.local;user=maindk;database=audit;port=3306;password=123456;pooling=false" />
</connectionStrings> 
```

当我在这里阅读时，问题与**发布配置文件**有关，然后我打开了`.pubxml`文件，发现：

```
<ItemGroup>
  <MSDeployParameterValue Include="$(DeployParameterPrefix)db-Web.config Connection String" />
  <MSDeployParameterValue Include="$(DeployParameterPrefix)dbAudit-Web.config Connection String" />
  <MSDeployParameterValue Include="$(DeployParameterPrefix)dbLog-Web.config Connection String" />
</ItemGroup> 
```

添加`<UpdateDestWebConfig>False</UpdateDestWebConfig>`到每个节点，所以它会变成：

```
<ItemGroup>
<MSDeployParameterValue Include="$(DeployParameterPrefix)db-Web.config Connection String">
  <UpdateDestWebConfig>False</UpdateDestWebConfig>
</MSDeployParameterValue>
<MSDeployParameterValue Include="$(DeployParameterPrefix)dbAudit-Web.config Connection String">
  <UpdateDestWebConfig>False</UpdateDestWebConfig>
</MSDeployParameterValue>
<MSDeployParameterValue Include="$(DeployParameterPrefix)dbLog-Web.config Connection String">
  <UpdateDestWebConfig>False</UpdateDestWebConfig>
</MSDeployParameterValue>
</ItemGroup> 
```

**只需删除此条目**，一切都恢复正常......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-23T14:48:57.487

提供的解决方案都没有帮助我。

我终于发现在我的本地`Web.config`，有一个空的默认连接字符串称为`LocalMySqlServer`（可能由**Mysql.Data** NuGet 包放在那里）。

在我删除下面突出显示的行后，我能够成功发布。

[![在此处输入图像描述](../Images/c05cfffbf157597873533f23b670621d.png)](https://i.stack.imgur.com/OiBCT.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-27T19:53:36.397

当我将 Web 应用程序部署到 Azure Web 服务器时，我遇到了同样的问题。我通过创建一个新服务器来解决它。在那一点上，我意识到之前该服务器上还有另一个应用程序。该应用程序使用了未被第二个应用程序覆盖的上下文名称，因此人们一直在寻找被第二个应用程序覆盖的连接字符串。我认为清除您的服务器可能会解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-12T15:07:10.547

我遇到了完全相同的问题-在 VS 2017 上出乎意料。

原来这是因为我以管理员身份运行 VS。我关闭了应用程序，正常重启，一切恢复正常。

# java - 基本 Java IO，总是抛出异常

> ID：11580682
> 
> 赞同：1
> 
> 时间：2012-07-20T13:47:27.347
> 
> 标签：java, io

我是 Java 新手，正在尝试编写一个具有一个参数的程序，即文本文件的路径。该程序将找到文本文件并将其打印到屏幕上。最终，我将构建它以格式化给定的文本文件，然后将其打印到输出文件中，但我稍后会到达那里。

无论如何，我的程序总是抛出 IOException，我不知道为什么。给定参数 C:\JavaUtility\input.txt ，我在运行时收到“错误，无法读取文件”。我的代码位于下面。

```
import java.io.*;

public class utility {
    public static void main(String[] path){

        try{

        FileReader fr = new FileReader(path[0]);
        BufferedReader textReader = new BufferedReader(fr);

        String aLine;

        int numberOfLines = 0;
        while ((aLine = textReader.readLine()) != null) {
            numberOfLines++;
        }

        String[] textData = new String[numberOfLines];

        for (int i=0;i < numberOfLines; i++){
            textData[i] = textReader.readLine();
        }

        System.out.println(textData);

        return;
        }
        catch(IOException e){
            System.out.println("Error, could not read file");

        }       
    }       
} 
```

[编辑] 感谢大家的帮助！因此，鉴于我的最终目标，我认为找到行数并存储在有限数组中仍然很有用。所以我最终写了两个类。首先，`ReadFile.java`找到我想要的数据并处理大部分阅读。第二个`FileData.java`调用 ReadFile 中的方法并打印出来。我已经将它们发布在下面，以防有人后来发现它们有用。

```
package textfiles;
import java.io.*;

public class ReadFile {

        private String path;

        public ReadFile(String file_path){
            path = file_path;
        }

        int readLines() throws IOException{

            FileReader file_to_read = new FileReader(path);
            BufferedReader bf = new BufferedReader(file_to_read);

            String aLine;
            int numberOfLines = 0;

            while ((aLine = bf.readLine()) != null){
                numberOfLines++;
            }
            bf.close();
            return numberOfLines;
        }

        public String[] OpenFile() throws IOException{

            FileReader fr = new FileReader(path);
            BufferedReader textReader = new BufferedReader(fr);

            int numberOfLines = readLines();
            String[] textData = new String[numberOfLines];

            for(int i=0; i < numberOfLines; i++){
                textData[i] = textReader.readLine();
            }

            textReader.close();
            return textData;
        }
} 
```

* * *

* * *

```
package textfiles;
import java.io.IOException;

public class FileData {

    public static void main(String[] args)throws IOException{

        String file_name = args[0];

        try{
            ReadFile file = new ReadFile(file_name);
            String[] aryLines = file.OpenFile();

            for(int i=0; i < aryLines.length; i++){
                System.out.println(aryLines[i]);
            }

        }

        catch (IOException e){
            System.out.println(e.getMessage());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:49:40.450

你在文件的末尾。当您确定文件中的行数时，您已经阅读到文件末尾，~~并且`EOF Flag`设置了。~~[编辑：正如@EJP 下面的注释，`BufferedReader`在文件末尾返回 null 读数。然而，您的阅读器不在您想要的位置，这一事实仍然是正确的。] 过去，我只是通过关闭和重新打开文件来解决这个问题。或者，查看`Array Lists`或简单`Lists`. 它们会动态调整大小，因此您无需提前知道文件中的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:13:31.743

正如@mikeTheLiar 所提到的，您位于文件末尾。`BufferedReader`reference 是文件处理程序，其内部光标指向文件中的当前位置。当你触发`readLine()`方法时，指针读取字符直到它到达换行符，返回字符串。指针设置到新位置。一旦你阅读了所有的行，然后`readLine()`返回`null`。~~之后如果你调用`readLine()`它会抛出 IOException。~~如前所述`@EJP`

使用 IO API 时最好的编码规则之一是始终检查 EOF 条件——就像你在第一个循环中的方式一样。一旦你到达 EOF 之后，你不应该在没有重置光标的情况下在同一个引用上调用 read 方法——这可以通过调用`reset()`方法来完成。

恕我直言，在您的情况下，不需要第二个循环。您可以仅使用一个循环来实现该功能。

```
import java.io.*; 
import java.util.ArrayList;

public class utility { 
public static void main(String[] path){ 

    try{ 

    FileReader fr = new FileReader(path[0]); 
    BufferedReader textReader = new BufferedReader(fr); 

    String aLine; 

    int numberOfLines = 0; 
    ArrayList readLines = new ArrayList();
    while ((aLine = textReader.readLine()) != null) { 
        numberOfLines++; 
        readLines.add(aLine);
    } 
    //Assuming you need array of lines, if not then you can print the lines directly in above loop
    String[] textData = readLines.toArray(); 

    System.out.println(textData); 

    return; 
    } 
    catch(IOException e){ 
        System.out.println("Error, could not read file"); 

    }        
 }     
} 
```

***编辑***

我试过你的代码 - 它工作正常并打印数组引用。正如评论中所建议的，问题出在源代码上（由于安全或任何其他原因，文件可能无法读取） - 如果您可以打印异常消息并获取引发异常的确切行号，那将很有帮助。

除了 IO 异常之外的几个观察：

您试图打开文件两次。`readLines()`方法是从内部调用的`OpenFile()`。`OpenFile()`在创建时首先打开以下代码文件序列`textReader`。之后，您正在调用`readLines()`它在创建时再次尝试打开文件`file_to_read`。

你应该尽量避免这种情况，在你的流程中你应该`int numberOfLines = readLines();`先打电话`FileReader fr = new FileReader(path);`

恕我直言，应该只有一种方法，并且您应该只对文件进行一次迭代——从效率/性能和代码可维护性的角度来看。`ReadFile`您可以按如下方式更改您的班级：

```
package textfiles;                     
import java.io.*;
import java.util.ArrayList;                     

public class ReadFile {                     

    private String path;                     

    public ReadFile(String file_path){                     
        path = file_path;                     
    }                     
    //You need not have separate file for counting lines in file
    //Java provides dynamic sized arrays using ArrayList
    //There is no need to count lines             
    public String[] OpenFile() throws IOException{                     

        FileReader fr = new FileReader(path);                     
        BufferedReader textReader = new BufferedReader(fr);                     

        ArrayList fileLines = new ArrayList();
        String readLine = textReader.readLine();
        while(readLine != null){                     
            fileLines.add(readLine);
            readLine = textReader.readLine();                     
        }                     

        textReader.close();                     
        return fileLines.toArray();                     
    }
  } 
```

另一个*小*观察：在某些地方没有遵循 java 变量命名约定。`OpenFile()`方法应该是`openFile()`而且`file_to_read`应该是`fileToRead`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:52:40.717

与这里的几个答案相反， readLine() 不会在文件末尾抛出异常，它只是不断返回 null。你的问题被另一个问题掩盖了。永远不要只编造自己的错误信息。始终打印带有异常的那个。如果您这样做了，您可能会立即发现问题。几乎可以肯定，您根本无法打开该文件，要么是因为它不存在，要么您没有读取权限。例外会告诉你。

# sqlite - 删除表格中的重复内容

> ID：11580687
> 
> 赞同：1
> 
> 时间：2012-07-20T13:47:32.777
> 
> 标签：sqlite

我有一个`table_news`包含这些字段的表：

```
_ID = INTEGER PRIMARY KEY AUTOINCREMENT 
ID = TEXT NOT NULL 
CONTENT = TEXT NOT NULL
ZONE TEXT = NOT NULL 
AREA TEXT = NOT NULL
TITLE TEXT = NOT NULL
DATE TEXT = NOT NULL
AUTHOR TEXT = NOT NULL 
```

该表填充如下：

```
Column    Row 1 Value                   Row 2 Value
------------------------------------------------------
_ID       1                             2
ID        "5"                           "5"
CONTENT   "Discover New York."          "Discover New York."
ZONE      "New York"                    "New York"
AREA      "New York"                    "New York"
TITLE     "Let's discover the world."   "Let's discover the world."
DATE      "2012-07-04"                  "2012-07-04"   
AUTHOR    "Henry Brakman"               "Henry Brakman" 
```

所以我只想做一个 SQL 语句来删除这些重复的行之一。

我试过这个（为便于阅读添加了换行符，命令写为单个字符串）：

```
public SQLiteStatement removeSameContentNews() { 
   return bdd.compileStatement("DELETE FROM table_news "
      + "WHERE _ID NOT IN (SELECT MIN( _ID) "
      + "FROM table_news "
      + "GROUP BY ID, CONTENT, ZONE, AREA, TITLE, DATE, AUTHOR)"); 
} 
```

但这没有删除任何内容..

我终于用 UNIQUE 关键字使用了唯一性，它工作正常：

```
private static final String CREATE_TABLE_NEWS = 
   "CREATE TABLE " + TABLE_NEWS + " (" + COLUMN_ROWID 
   + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COL_ID 
   + " TEXT NOT NULL UNIQUE, " + COL_CONTENT 
   + " TEXT NOT NULL, " + COL_ZONE + " TEXT NOT NULL, "
   + COL_AREA + " TEXT NOT NULL, " + COL_TITLE 
   + " TEXT NOT NULL, " + COL_DATE + " TEXT NOT NULL, " 
   + COL_AUTHOR + " TEXT NOT NULL);"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:53:28.380

您可以使用以下查询示例：

```
DELETE FROM table WHERE _ID NOT IN (
    SELECT MIN( _ID) 
    FROM table 
    GROUP BY ID, CONTENT, ZONE, AREA, TITLE, DATE, AUTHOR
) 
```

**编辑**

或者，您可以使用：

```
DELETE FROM table_news WHERE EXISTS
  (SELECT 1 FROM table_news t
    WHERE t.ID=table_news.ID AND 
    t.ID=table_news.CONTENT AND  
    t.ID=table_news.ZONE AND  
    t.ID=table_news.AREA AND  
    t.ID=table_news.TITLE AND  
    t.ID=table_news.DATE AND  
    t.ID=table_news.AUTHOR AND 
    t.rowid > table_news.rowid) 
```

# android - 不同平板电脑的资源 android

> ID：11580689
> 
> 赞同：0
> 
> 时间：2012-07-20T13:47:37.757
> 
> 标签：android, resources, resolution, tablet, hdpi

我需要在我的应用程序中为两个三星平板电脑放置不同的资源。600x1024 (Samsung Galaxy Tab 7in) 800x1280 (Samsung Galaxy Tab 8.9 in) 所以我在 res 文件夹中创建了两个不同的文件夹**drawable-port** (for 7 in) 和**drawable-large-port** (for 8.9in) 但两个设备都选择了**drawable-large-port**文件夹中的资源。

当我为两个设备运行 getResources().getConfiguration().screenLayout 时，输出结果为 SCREENLAYOUT_SIZE_LARGE

那么文件夹名称应该是什么，以便两个设备从不同的文件夹中选择资源。

谢谢纳林德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:06:05.930

这两个设备都是大**屏幕**，所以在这种情况下，当它们查看您的可绘制文件夹时，它们都在获取相同的资源。他们总是会去**drawable-large-port**进行纵向和**drawable-large-land**进行横向。

您可以通过为两个设备创建不同的布局来添加此功能，这两个设备以不同的方式使用**drawable-large-port**中的可绘制对象来利用不同大小的屏幕。您可以为布局定义不同的尺寸，如下所示：

```
res/layout-sw600dp/   // For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/   // For 10” tablets (720dp wide and bigger) 
```

[您可以在http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)阅读有关处理不同尺寸屏幕/设备的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:10:38.620

您可以使用以下方法测量屏幕宽度：

```
 Display display = getWindowManager().getDefaultDisplay(); 
    int width = display.getWidth();
    int height = display.getHeight();
    System.out.println("width :: "+width);
    System.out.println("height :: "+height); 
```

然后你可以设置Drawable，使用宽度为：

```
if(width == 600)
    // set drawable-1
else if(width == 800)
    // set drawable-2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T10:10:41.460

更好的结果将以下内容放入可绘制对象中

---------------- 手机 ------------------------

可绘制的 ldpi

可绘制的 mdpi

可绘制的 hdpi

----------------- 适用于 7 英寸平板电脑----------------

可绘制的大 mdpi

drawable-large-hdpi（适用于 Nexus 7）

---------------- 适用于 10 英寸平板电脑 ----------------

可绘制-xlarge-mdpi

# ios - 更改 UIButton 的文本

> ID：11580700
> 
> 赞同：-4
> 
> 时间：2012-07-20T13:48:09.187
> 
> 标签：ios, cocoa-touch, text, uibutton

我正在做一个问答游戏，我想要按钮来显示问题的答案选项。如果我使用 label.text 我知道该怎么做，但是我怎么能只用一个按钮来做同样的事情呢？

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:49:44.043

[button setTitle:@"New Title" forState:UIControlStateNormal];

[从苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)中很容易看到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:49:47.570

您设置按钮的标题文本：

```
[button setTitle:@"Answer 1" forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:50:57.070

试试这个：

```
yourButton.titleLabel.text = @""; 
```

# php - 将数组导出到 CSV 失败：给定字符串

> ID：11580702
> 
> 赞同：1
> 
> 时间：2012-07-20T13:48:12.260
> 
> 标签：php, arrays, csv

当我尝试将数组导出到 CSV 文件时，我无法解决出现的问题。我已经多次使用此功能没有问题，但在这里我看不出我的错误在哪里。

我设置了一个数组：

```
$mytags= array(); 
```

我通过循环填充它。当我通过它打印内容`print_r($mytags);` 时似乎没问题，这里有一些我的输出示例：

```
Array ( [0] => [1] => air-travel [2] => airports [3] => security-airport [4] => city-airport  ... ) 
```

之后，我尝试通过 fputcsv 将结果导出到 CSV：

```
$fp = fopen('file.csv', 'w');
foreach ($mytags as $fields) {
    fputcsv($fp, $fields);
} 
```

但我得到这个错误：

> 警告：fputcsv() 期望参数 2 是数组，字符串在 C:\wamp\www\tests\capturetags.php 第 55 行给出

问题可能是只有一个字段吗？或者，我尝试替换`$fields`为`$mytags`写入 CSV，在这种情况下，我得到一个 4GB 的文件，所以它不是有人看到如何在 CSV 文件中记录这个唯一字段吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:51:36.113

错误很清楚，`$fields`不是数组，是字符串。你需要一个数组。

```
fputcsv($fp, $mytags); 
```

没有 foreach 循环就可以完成这项工作。

# jquery - 如何使我的工具提示居中？

> ID：11580715
> 
> 赞同：3
> 
> 时间：2012-07-20T13:48:58.157
> 
> 标签：jquery

我试图将我的工具提示气泡居中但没有成功:(我猜这个解决方案很简单，但我无法实现它。有人可以帮我吗？THX ！[在这里摆弄](http://jsfiddle.net/Pwcnw/1/)
我的代码：

```
$(document).ready(function(){
$(".menu .a").hover(function() {
var checkWidth = $(this).outerWidth() - $(this).outerWidth()/2;
    $(this).next("em").css({left:checkWidth}).animate({opacity: "show"}, "slow");
    }, function() {
    $(this).next("em").animate({opacity: "hide"}, "fast");
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:53:14.257

[这个小提琴](http://jsfiddle.net/Pwcnw/5/)应该适合你。您必须考虑工具提示本身的宽度。

```
var checkWidth = $(this).outerWidth() - $(this).outerWidth()/2 - $(this).next("em").outerWidth()/2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:55:34.987

这个怎么样：

```
.menu li em {
white-space:nowrap;
background-color:red;
position: absolute;
margin-top:-100px;
margin-left: -50px; /* I added just this line */
text-align: center;
padding: 20px;
font:12px helvetica, arial, sans-serif;
display:none;
} 
```

# jsf - 检查哪个表单有错误

> ID：11580722
> 
> 赞同：1
> 
> 时间：2012-07-20T13:49:08.957
> 
> 标签：jsf, jsf-2

我有一个模态窗口，我只想在页面上的几个表单之一出现错误时启动它。有没有办法使用 el 来识别特定表单是否有错误？

示例伪代码：

```
<h:form id="form1">

</h:form>

<h:form id="form2">

</h:form>

<a4j:rendered="#{form1.hasErrors()}">
    ... modal here ... 
</a4j:rendered> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T14:14:16.703

如果您`execute="@form"`在 ajax 请求中有一个，那么您可以[`UIForm#isSubmitted()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIForm.html#isSubmitted%28%29)与[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29).

```
<h:form binding="#{form1}">

</h:form>

<h:form binding="#{form2}">

</h:form>

<a4j:xxx rendered="#{form1.submitted and facesContext.validationFailed}">
    Validation of form1 has failed.
</a4j:xxx>

<a4j:xxx rendered="#{form2.submitted and facesContext.validationFailed}">
    Validation of form2 has failed.
</a4j:xxx> 
```

# python - R，python：“'vmmin' 中的初始值不是有限的”错误

> ID：11580727
> 
> 赞同：0
> 
> 时间：2012-07-20T13:49:23.793
> 
> 标签：python, r, numpy, rpy2

我正在尝试通过 rpy2 在 Python 中使用 R 的 fitdistr：

```
x = MASS.fitdistr(np.asarray(myValues), "beta", start=startParams) 
```

但我收到了这条信息：

```
Error in optim(x = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  : 
  initial value in 'vmmin' is not finite
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 82, in __call__
    return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)
  File "/usr/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 34, in __call__
    res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Error in optim(x = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  : 
  initial value in 'vmmin' is not finite 
```

现在，我的数组中没有 NaN，但只是为了仔细检查我运行了这个：

```
numpy.isfinite(myValues) 
```

...返回`True`数组的每个值。

关于这里有什么问题的任何线索？

# c - 如何解释 ffmpeg AVERROR

> ID：11580728
> 
> 赞同：5
> 
> 时间：2012-07-20T13:49:32.293
> 
> 标签：c, error-handling, ffmpeg

有人知道 AVERROR 含义的列表在哪里吗？就像是

```
-1: reason A
-2: reason B 
```

等等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T13:55:52.583

您可以使用[`av_strerror()`](http://ffmpeg.org/doxygen/trunk/group__lavu__error.html#g5792b4a2d18d7d9cb0efbcfc335dce24)来获取错误代码的字符串表示形式。

如果您只是想查找它，可以参考[libavutil/error.c](http://ffmpeg.org/doxygen/trunk/error_8c.html)和[libavutil/error.h](http://ffmpeg.org/doxygen/trunk/error_8h.html)的文档。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-02T00:35:50.847

采用

```
printf("%s", av_err2str(ret)); 
```

其中 ret 是从函数返回的整数（例如 avformat_open_input(...)）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-20T14:56:00.517

给你（取自[libavutil/error.c](http://ffmpeg.org/doxygen/trunk/error_8c.html)）：

```
{ ERROR_TAG(BSF_NOT_FOUND),      "Bitstream filter not found"                     },
{ ERROR_TAG(BUG),                "Internal bug, should not have happened"         },
{ ERROR_TAG(BUG2),               "Internal bug, should not have happened"         },
{ ERROR_TAG(BUFFER_TOO_SMALL),   "Buffer too small"                               },
{ ERROR_TAG(DECODER_NOT_FOUND),  "Decoder not found"                              },
{ ERROR_TAG(DEMUXER_NOT_FOUND),  "Demuxer not found"                              },
{ ERROR_TAG(ENCODER_NOT_FOUND),  "Encoder not found"                              },
{ ERROR_TAG(EOF),                "End of file"                                    },
{ ERROR_TAG(EXIT),               "Immediate exit requested"                       },
{ ERROR_TAG(EXTERNAL),           "Generic error in an external library"           },
{ ERROR_TAG(FILTER_NOT_FOUND),   "Filter not found"                               },
{ ERROR_TAG(INVALIDDATA),        "Invalid data found when processing input"       },
{ ERROR_TAG(MUXER_NOT_FOUND),    "Muxer not found"                                },
{ ERROR_TAG(OPTION_NOT_FOUND),   "Option not found"                               },
{ ERROR_TAG(PATCHWELCOME),       "Not yet implemented in FFmpeg, patches welcome" },
{ ERROR_TAG(PROTOCOL_NOT_FOUND), "Protocol not found"                             },
{ ERROR_TAG(STREAM_NOT_FOUND),   "Stream not found"                               },
{ ERROR_TAG(UNKNOWN),            "Unknown error occurred"                         }, 
```

但这是与版本相关的方式，最好`av_strerror()`让库为您提供错误代码的字符串表示形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T15:53:37.080

请注意，大多数函数都会返回 NEGATIVE 错误。所以你必须调用 av_strerror(-returnvalue)

# c++ - 窗口创建问题

> ID：11580731
> 
> 赞同：-3
> 
> 时间：2012-07-20T13:49:33.840
> 
> 标签：c++, windows, winapi

谁能告诉我我的窗口创建有什么问题？这个函数是从主函数中调用的，它全部编译并运行良好。然而，渲染出来的窗口根本就不是一个窗口，而只是一个白色的大方块。这是我的窗口创建功能：

```
/**
 *  handles everything for initialising a window
 *
 *  @param  hInst               unique handle of window instance
 *  @param  hPrevInst           legacy parameter for copying memory from other instance into this one
 *  @param  cmdLine             commands application is started with
 *  @param  cmdShow             specifies how program should be displayed (maximised, minimized, or hidden)
 */
int Window::Init (HINSTANCE hInst, HINSTANCE hPrevInst, PSTR cmdLine, int cmdShow)
{
    //  name of application
    static TCHAR    appName[]       = TEXT ("App");

    //  contains window class information
    WNDCLASSEX      wndC;

    //  window handle
    HWND            hWnd;

    //  define the windows class information
    wndC.cbSize                 = sizeof (WNDCLASSEX);          //  specifies the size of the structure (in bytes)
    wndC.style                  = CS_HREDRAW | CS_VREDRAW;      //  employs window class style to redraw if any resizing occurs
    wndC.lpfnWndProc            = WndProc;                      //  pointer to the window procedure function
    wndC.cbClsExtra             = 0;                            //  number of extra bytres to allocate for window class
    wndC.cbWndExtra             = 0;                            //  number of extra bytes to allocate per window instance
    wndC.hInstance              = hInst;                        //  handle to instnace conatining window procedure for this class
    wndC.hIcon                  = NULL;                         //  handle to large 32x32 (shown when alt + tab)
    wndC.hCursor                = LoadCursor (NULL, IDC_ARROW); //  handle to class cursor resource
    wndC.hbrBackground          = (HBRUSH) (COLOR_WINDOW + 1);  //  handle to class background brush (for painting background)
    wndC.lpszMenuName           = NULL;                         //  pointer to string with name of class menu (no default menu)
    wndC.lpszClassName          = appName;                      //  specifies windows class name
    wndC.hIconSm                = NULL;                         //  handle to small 16x16 icon (top left corner of window)

    //  registers window class with system, will terminate is parameter is invalid
    if (!RegisterClassEx (&wndC))   return 0;

    //  rect used for defining window
    RECT            wndRc;

    //  calculate size of window based on entire client window size
    wndRc.left                  = 0;
    wndRc.top                   = 0;
    wndRc.right                 = 800;
    wndRc.bottom                = 600;

    long            tStyle      = 0;

    //  style chosen based on whether this window is fullscreen
    if (mFullScreen)
        tStyle                  = WS_POPUP;
    else
    {
        tStyle                  = WS_OVERLAPPEDWINDOW;
        //  calculates required size of window rectangle, based on desired client-rectangle size
        AdjustWindowRect (&wndRc, tStyle, FALSE); 
    }

    //  now class is registered, we create a window with it
    hWnd                        = CreateWindowEx (0, appName, appName, WS_POPUP, CW_USEDEFAULT, CW_USEDEFAULT, 
                                    wndRc.right - wndRc.left, wndRc.bottom - wndRc.top, NULL, NULL, hInst, NULL);
    //  check we have a valid handle
    if (hWnd == NULL)               return 0;

    //  show window and update it (cmdShow allows user to specify whether they want window to start maximised, minimised, etc.)
    ShowWindow (hWnd, cmdShow);
    UpdateWindow (hWnd);

    //  if we fail to create the direct x device send an error message and terminate
    if (DirectDraw::GetInstance()->CreateDevice (hWnd, 800, 600, mFullScreen) != 1)
    {
        MessageBox (hWnd, "Failed to create surfaces", "Error", MB_OK);
        return 0;
    }

    //  adds rectangle to the specified window's update region (portion of window to be redrawn)
    InvalidateRect (hWnd, NULL, TRUE);

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:36:17.890

感谢 Arx 和 Tenfour 在我的帖子的评论中，问题只是我将窗口类的样式设置为“WS_POPUP”，这显然不适合在全屏窗口之外。

# c# - 如何使用 C# 在 REST 服务的 json 请求正文中添加 POST 数据

> ID：11580735
> 
> 赞同：0
> 
> 时间：2012-07-20T13:49:42.327
> 
> 标签：c#, windows-phone-7, windows-phone

```
private void CreateNewTasklist(string TasklistTitleValue)
    {
        AuthenticationProcess objUri = new AuthenticationProcess();

        if (string.IsNullOrEmpty(TasklistTitleValue))
        {
            MessageBox.Show("Please Enter the Tasklist Title.");
        }
        else
        {
            //Read the Token result in Isolated storage.
            string TokenResult = TasklistManager.ReadTokenResult();
            var Token = Auth.ParseAuthJsonString(TokenResult);

            var request = new RestRequest(objUri.CreateTasklist, Method.POST);
            request.AddHeader("content-type", "application/json");

            RestClient client = new RestClient("https://www.googleapis.com");
            client.Authenticator = new OAuth2AuthorizationRequestHeaderAuthenticator(Token.access_token);
            client.ExecuteAsync<TasklistManager>(request, TaskListsLoaded);
        }
    } 
```

在这里，我得到字符串 TasklistTitleValue 值..我想发布它。如何将其作为内容类型添加到请求正文为 application/json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:52:20.533

你可以这样做：

```
var httpWebRequest = (HttpWebRequest)WebRequest.Create("http://url");
httpWebRequest.ContentType = "text/json";
httpWebRequest.Method = "POST";

using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
{
string json = "{\"user\":\"test\"," +
              "\"password\":\"bla"}";

streamWriter.Write(json);
streamWriter.Flush();
streamWriter.Close();

var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
    var result = streamReader.ReadToEnd();
} 
```

或者你可以使用这个：

[https://github.com/ademargomes/JsonRequest](https://github.com/ademargomes/JsonRequest)

# haskell - 如何放置约束或验证/条件验证（在类型变量上）？这里：如何强制半径> 0？

> ID：11580736
> 
> 赞同：1
> 
> 时间：2012-07-20T13:49:42.517
> 
> 标签：haskell, types, typeclass

如果必须设置约束，则创建的任何 Circle 的 Radius 必须大于零（ Radius > 0 ）。怎么做？

```
data Point = Point Float Float deriving (Show)  
data Radius = Radius Float deriving (Show)  
data Shape = Circle Point Radius deriving (Show)
surface :: Shape -> Float  
surface (Circle _ (Radius r)) = pi * r ^ 2 
```

如果方便，请提供更多示例，说明如何在各种场景中设置约束/验证。例如，数据电话可以有正则表达式或特定的起始号码集（区号或国家代码等）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:52:22.633

实现数据类型字段验证的最简单方法不是从模块中导出值构造函数，而是定义和导出函数，这些函数在使用隐藏值构造函数实际构造和返回对象之前执行所需的检查。

一个简单的例子，有两种可能的方式来报告错误：

```
module MyModule
( Radius  -- we do not export value constructors
, radius
, radius'
) where

data Radius = Radius Float deriving (Show)

radius :: Float -> Maybe Radius
radius r | r > 0     = Just (Radius r)
         | otherwise = Nothing

radius' :: Float -> Radius
radius' r | r > 0     = Radius r
          | otherwise = error "negative radius" 
```

这样，您模块的用户将只能通过您个人定义的函数创建新值，而不是通过使他们能够跳过所有检查的值构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:18:03.683

如果您想要比 Riccardo 的解决方案更有趣的东西，您可以使用镜头作为类型的接口。您目前可以使用[fclabels](http://hackage.haskell.org/package/fclabels)执行此操作，尽管没有办法区分外部构造函数的失败与您尝试验证的内部值的失败。

我还编写了一个实验性[镜头库](http://hackage.haskell.org/package/yall)，试图以更结构化的方式解决该用例，但在这个阶段我真的不推荐它。

# passwords - 我怎样才能解密这个脚本？

> ID：11580738
> 
> 赞同：0
> 
> 时间：2012-07-20T13:49:44.727
> 
> 标签：passwords, encryption

如何解密如下加密的密码：

```
function PwdHash($pwd, $salt = null)
{
    if ($salt === null)     {
        $salt = substr(md5(uniqid(rand(), true)), 0, SALT_LENGTH);
    }
    else     {
        $salt = substr($salt, 0, SALT_LENGTH);
    }
    return $salt . sha1($pwd . $salt);
} 
```

鉴于 SALT_LENGTH 是 9？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:55:54.707

这不是一个[加密](http://en.wikipedia.org/wiki/Encryption)函数，这是[hash](http://en.wikipedia.org/wiki/Cryptographic_hash_function)，所以它根本不应该被解密。唯一可行的方法是使用此算法进行暴力破解，并希望您最终会遇到碰撞，但这可能需要很长时间。

# iphone - 如何动态创建 NSMutableArray？

> ID：11580742
> 
> 赞同：1
> 
> 时间：2012-07-20T13:49:48.130
> 
> 标签：iphone, objective-c, cocoa-touch, nsmutablearray

我想使用用户在文本字段中输入的名称创建一个数组，为此我想知道如何动态创建一个数组。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:55:35.010

如果您的意思是动态变量名称，那么您可以完成此操作的唯一方法是创建数组，然后将其存储在字典中：

```
NSMutableDictionary *myArrays;//declared and initialized somewhere

NSMutableArray *newArray = [[NSMutableArray alloc] init];
[myArrays addObject:newArray forKey:someLabel.text]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:08:21.613

您可以动态声明一个数组，但您永远不能使用输入字符串作为对象数组的名称。

说出您的目标是什么，我们可以帮助您解决它。如果您有这样的要求，看起来您想做某事并且您采取了错误的方法。

# wpf - 将 wpf datagrid 行列数据（控件）显示到画布中

> ID：11580745
> 
> 赞同：0
> 
> 时间：2012-07-20T13:50:01.360
> 
> 标签：wpf, datagrid

我正在使用 WPF Datagrid，其中将动态添加行。我可以在选定的数据网格单元格中动态创建标签、文本框、按钮等 wpf 控件。

我需要将数据网格单元格内容控件显示到画布中。换句话说，行和列中的控件需要在画布上以表格格式显示。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:13:08.930

我不确定您要问什么，但是您可以使用 a`DataGridTemplateColumn`来指定应将项目绘制为`Canvas`

```
<DataGridTemplateColumn Header="ColumnHeader">
    <DataGridTemplateColumn.CellTemplate>
         <DataTemplate>
            <Canvas>
                <Label ... />
                <TextBox ... />
                <Button ... />
            </Canvas>
         </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

如果您希望将项目放置`Canvas`在.`DataGrid``DataGrid`

如果是这种情况，我建议您改用`ItemsControl`

```
<ItemsControl ItemsSource="{Binding MyCollection}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Canvas.Left" Value="{Binding X}" />
            <Setter Property="Canvas.Top" Value="{Binding Y}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

# magento - Magento：从控制器重定向到 phtml 页面？

> ID：11580747
> 
> 赞同：0
> 
> 时间：2012-07-20T13:50:21.280
> 
> 标签：magento, redirect

我有一个控制器，我想从那里重定向到某个 phtml 页面。该页面存储在*app\design\frontend\default\mystuff\template\catalog\product\view\myphtml.phtml*中。

如何从我的控制器重定向到此页面？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:02:59.987

*最新：OP 表示需要单独显示此模板*

如果您只想显示*您*的模板，您可以在控制器操作中执行此操作：

```
public yourAction()
{
    $block = $this->getLayout()->createBlock('core/template')
                                   ->setTemplate('catalog/product/view/myphtml.phtml');

    $this->getResponse()->setBody(
        $block->toHtml()
    );
} 
```

您还可以使用布局 XML，在您的控制器中启动：

```
public yourAction()
{
    $this->loadLayout(false)->renderLayout(); //false keeps default handle from loading
} 
```

在（理想情况下）您模块的布局 XML 中，执行以下操作：

```
<?xml version="1.0"?>
<layout>
    <yourmodule_yourcontroller_youraction>
        <block type="core/template" template="catalog/product/view/myphtml.phtml" output="toHtml" />
    </yourmodule_yourcontroller_youraction>
</layout> 
```

如果您需要知道您的完整操作名称（`yourmodule_yourcontroller_youraction`），您可以在控制器操作中通过 获取该信息`echo $this->getFullActionName();`。

最后，如果您尝试加载一个看起来像标准页面的产品视图页面，但您可以自己操作，您可以这样做：

```
public yourAction()
{
    $this->loadLayout()->renderLayout();
} 
```

然后在您的布局 XML 中：

```
<?xml version="1.0"?>
<layout>
    <yourmodule_yourcontroller_youraction>
        <reference name="content">
            <block type="core/template" template="catalog/product/view/myphtml.phtml" name="your.block" />
        </reference>
    </yourmodule_yourcontroller_youraction>
</layout> 
```

* * *

*上一篇： OP 表示他/她要更改用于产品视图块的模板，并做出相应的答复。*

Magento 的布局 XML 系统很好地处理了这个任务。由于您是最终实施者，因此您可以使用名为*local.xml*的特殊布局文件，该文件应位于您的自定义主题文件夹中（可能`app/design/frontend/default/mystuff/layout/`）。

该文件应如下所示：

```
<?xml version="1.0"?>
<layout>
    <catalog_product_view>
        <reference name="product.info">
            <action method="setTemplate">
                <tpl>catalog/product/view/myphtml.phtml</tpl>
            </action>
        </reference>
    </catalog_product_view>
</layout> 
```

您的布局说明将与所有其他说明一起合并和处理。作为参考，该`product.info`块是在*catalog.xml*布局文件中建立的。上述说明可以用简单的英语表述如下：

> 对于由完整动作名称标识的渲染范围`catalog_product_view`和在布局中由名称标识的块实例`product.info`，使用参数调用其`setTemplate()`方法`catalog/product/view/myphtml.phtml`。

# mfc - 使用 CMake 制作包含 MFC 的项目

> ID：11580748
> 
> 赞同：5
> 
> 时间：2012-07-20T13:50:22.243
> 
> 标签：mfc, cmake

我有一个项目，我必须使用一个使用 MFC 的 COM 模块。我使用 CMake 来制作我的项目。谁能告诉我我必须在我的 CMakeLists.txt 中包含什么，以便我可以在我的项目中使用 MFC？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:40:50.567

您需要添加`_AFXDLL`到预处理器定义并将 CMake 变量`CMAKE_MFC_FLAG`设置`1`为静态 MFC 库或`2`共享库。

```
add_definitions(-D_AFXDLL)
set(CMAKE_MFC_FLAG 1) 
```

欲了解更多信息，请运行

```
cmake --help-variable CMAKE_MFC_FLAG 
```

# entity-framework - 在 WCF 数据服务中保存投影更改时忽略非实体属性

> ID：11580753
> 
> 赞同：1
> 
> 时间：2012-07-20T13:50:36.427
> 
> 标签：entity-framework, wcf-data-services, odata

为了减少来自 WCF 数据服务的数据量，我使用了投影技术。

Linq 查询看起来像：

```
...
    _ctx.Files.Select(x => new FileProjection() { Id=x.Id, Name = x.Name });
...

[DataServiceKey("Id")]
public class FileProjection : ViewModelBase
{
    private string _name;

    public Guid Id { get; set; }
    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            NotifyOfPropertyChange(() => Name);
        }
    }

    public string MyCustomProperty { get; set; }
} 
```

FileProjection 类具有 File 实体模型中不存在的附加属性。

它在获取数据时工作正常。但是，如果我尝试更新名称，我会在 SaveChanges 中遇到异常：

> 附加信息：“DataAccessLayer.Context.File”类型上不存在“MyCustomProperty”属性。确保仅使用类型定义的属性名称。

有没有办法在 SaveChanges 期间忽略 MyCustomProperty？

或者 XXXProjection 类不应该有任何自定义公共属性？

客户端是 Silverlight 应用程序、WCF 数据服务 v5.0.1、oData v3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:15:32.450

目前，这样做的唯一方法是将属性设为内部或私有。所有公共属性都将被序列化，如果服务器无法识别它，它将失败。

或者您可以使用 Phani 的解决方法：http: [//blogs.msdn.com/b/phaniraj/archive/2008/12/11/customizing-serialization-of-entities-in-the-ado-net-data-services -client-library.aspx](http://blogs.msdn.com/b/phaniraj/archive/2008/12/11/customizing-serialization-of-entities-in-the-ado-net-data-services-client-library.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T07:26:20.290

以前的解决方法（使用事件的事件处理程序`DataServiceContext.WritingEntity`）的这个问题是它只适用于 Atom - 它不适用于 JSON。

WCF 数据服务客户端和 OData 客户端的新版本现在支持一些管道事件拦截，它适用于 JSON 和 ATOM。更多信息在这里：

[http://blogs.msdn.com/b/odatateam/archive/2013/07/26/using-the-new-client-hooks-in-wcf-data-services-client.aspx](http://blogs.msdn.com/b/odatateam/archive/2013/07/26/using-the-new-client-hooks-in-wcf-data-services-client.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T18:09:26.453

如果 private 或 internal 对你不起作用，在我的情况下，你可以简单地使用方法来代替。

```
public string GetName()
public void SetName(string value) 
```

这些方法将忽略序列化，您可以跨类库维护状态。

# facebook - Facebook OAuth 2.0 和 https 重定向 URL

> ID：11580755
> 
> 赞同：0
> 
> 时间：2012-07-20T13:50:48.657
> 
> 标签：facebook, oauth

我正在制作一个像 www.firstcovers.com 这样的网站，并且对带有 OAuth 2.0 facebook 重定向 URL 的 https 有点困惑。在 [code] 中获取访问令牌后，指向您网站的重定向 URL 应该是**https**或**http**对于网站（不是画布应用程序）？

请清除我的困惑。谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:40:11.987

对于非画布应用程序，您可以[同时使用](https://developers.facebook.com/docs/authentication/server-side/). 唯一的要求是：

> redirect_uri 必须与应用设置的 App Domain 属性中指定的基域相同

但是不是，该`code`值不是*访问令牌*，而是*授权码*！您仍然需要将其换成`access token`，请参阅第[4 节。将代码换成 User Access Token](https://developers.facebook.com/docs/authentication/server-side/)。

# cocoa - 获取 NSTextView 的连续拖动事件

> ID：11580758
> 
> 赞同：4
> 
> 时间：2012-07-20T13:50:52.967
> 
> 标签：cocoa, mouseevent, nstextview, appkit

一般来说，我是`NSTextView`AppKit 事件处理的新手，所以这可能很简单。*我正在尝试*以正确的方式处理从`NSTextView`. 那是：

1.  用户选择文本范围。
2.  用户单击并开始拖动该文本。

我想在拖动文本时获取事件。

我有一个自定义的 NSTextView 子类，我正在覆盖`- dragSelectionWithEvent:offset:slideBack:`并返回`YES`，但每次拖动它只会被调用一次，而不是连续调用。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T23:23:03.747

这很简单！只需覆盖子类中的`NSResponder`（鼠标按下、鼠标拖动等）的鼠标事件`NSTextView`。

看看我在哪里解决它[https://github.com/Shopify/superdb/blob/develop/SuperDebug/Super%20Debug/SuperDraggableShellView.m#L129](https://github.com/Shopify/superdb/blob/develop/SuperDebug/Super%20Debug/SuperDraggableShellView.m#L129)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-06T15:12:14.123

覆盖`draggingUpdated(_:)`, 部分`NSDraggingDestination`, 将执行此操作。

# mysql - rails 合并哈希语法

> ID：11580765
> 
> 赞同：0
> 
> 时间：2012-07-20T13:51:09.660
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我有一个观察者，它序列化一个哈希并将其作为我的用户模型上的 TEXT 字段保存到 mySQL 数据库中。我遇到的问题是我试图向现有哈希添加一个新的键/值，而不是覆盖它。它似乎只是在覆盖它。我的合并语法不正确吗？

这是我的观察者：

```
class NotificationObserver < ActiveRecord::Observer
  observe :event

  def after_update(event)
    usersToNotify=event.following

    usersToNotify.each do |u|               
        u.messages.merge! 'event'=>event.id
        u.save 
    end
  end
end 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:57:01.903

如果您**只**需要在哈希中添加一个新的键值对，请执行以下操作：

```
usersToNotify.each do |u|               
  u.messages['event'] = event.id
  u.save 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:00:48.963

它适用于我使用 Ruby 1.9.3，同时使用文字和隐式哈希。例如：

```
[1] pry(main)> foo = {foo: 'bar'}
=> {:foo=>"bar"}
[2] pry(main)> bar = {bar: 'baz'}
=> {:bar=>"baz"}
[3] pry(main)> foo.merge! bar
=> {:foo=>"bar", :bar=>"baz"}
[4] pry(main)> foo.merge! alice: 'bob'
=> {:foo=>"bar", :bar=>"baz", :alice=>"bob"} 
```

您可以尝试使用符号而不是字符串作为键，除非您知道自己有[HashWithIndifferentAccess](http://as.rubyonrails.org/classes/HashWithIndifferentAccess.html)。您可能还希望通过将散列括在大括号中来确保传递散列文字，以避免与解析器产生任何歧义。

可能还有其他事情发生，因此如果上述建议对您不起作用，请确保使用实际错误消息和示例更新您的问题。

# javascript - 复合视图绑定到的初始事件

> ID：11580767
> 
> 赞同：1
> 
> 时间：2012-07-20T13:51:18.377
> 
> 标签：javascript, backbone.js, marionette

根据复合视图中的[复合视图文档](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html#section-54)，事件`reset`，`remove`并且`add`已经绑定到集合。

说了这么多，为什么我需要绑定`reset`事件来渲染我的CompositeView？

PS：
我正在使用`Backbone.Marionette v0.9.1`
更多细节请看代码（1），（2）
其实问题是关于serializeData，因为当从 `initialEvents`变量has_message调用渲染函数时设置为零。所以`ul.messages`没有在模板中定义。我应该如何解决它？

* * *

(1)

```
var CompositeView = Marionette.CompositeView.extend({

    template: CompositeTemplate,

    itemView: messageView,

    initialize: function () {
        this.collection = new MessageCollection();
        this.collection.fetch();

        this.bindTo(this.collection, 'reset', this.render);
        // deleting the previous line 
        // I cannot see the collection rendered after the fetch.
    },

    serializeData: function () {
        return {
            has_messages: this.collection.length > 0
        };
    },

    appendHtml: function (collectionView, itemView) {
        collectionView.$el.find('ul.messages').append(itemView.el);
    }

}); 
```

* * *

(2)

```
// Template

{{#if has_messages }}
    <!-- list messages -->
    <ul class="list messages"></ul>
{{else}}
    no messages
{{/if}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:51:09.047

需要自己绑定“重置”是因为复合视图将重置事件绑定到集合渲染，而不是整个复合视图：

[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md#events-and-callbacks](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md#events-and-callbacks)

您的 serializeData 函数的问题可能是由上下文问题引起的。您需要将事件绑定更改为此：

`this.bindTo(this.collection, 'reset', this.render, this);`

这会将视图的上下文与事件绑定。

# google-chrome-devtools - 在 Chrome 开发工具中自动保存到文件

> ID：11580769
> 
> 赞同：2
> 
> 时间：2012-07-20T13:51:20.657
> 
> 标签：google-chrome-devtools, autosave

我正在观看来自 Google IO 2012 的 Chrome Dev Tools 演变视频，然后看到了这个名为 Chrome Dev tools autosave 的工具，它自动保存从 chrome dev tools 编辑的文件。我在 Windows 上并且已经安装了节点，所以我只做了以下操作：

1.  从这里安装 devtools 自动保存：[https ://chrome.google.com/webstore/detail/mlejngncgiocofkcbnnpaieapabmanfl/details](https://chrome.google.com/webstore/detail/mlejngncgiocofkcbnnpaieapabmanfl/details)
2.  安装了服务器：`npm install -g autosave`一切都按照它所说的那样安装`running on http://127.0.0.1:9104`

3.  创建了一个 routes.js 文件并将其保存到我运行服务器安装的文件夹中。这是 routes.js 文件的样子：

    ```
    exports.routes = [{
    from: /http:\/\/127.0.0.1\//,
    to: 'D:\/web_files/'
    }]; 
    ```

显然`localhost`从 Chrome 访问不起作用（它只适用于 firefox 和其他我不知道为什么的浏览器）所以我`127.0.0.1`在那里而不是`localhost` 我在 chrome 扩展的选项上有这个：

![在此处输入图像描述](../Images/f7999a7c6df09c5e22cd5030b1c94479.png)

知道我错过了什么吗？当我尝试修改文件中的某些样式时，它不起作用：

```
http://127.0.0.1/tester/css/css1.html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:57:49.423

首先，您不需要 routes.js 文件。在 Autosave 版本 1.x 中没有必要。

CSS 样式表的 URL 是怎样的？请注意，自动保存还不适用于内联样式表（通过 包含在内`<style>`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T04:04:29.803

我是 Mac OSX 用户，我必须安装[nodejs](http://nodejs.org/)才能自动保存。这些是我遵循的步骤：1）安装 nodejs 2）在终端中运行此命令

```
sudo npm install -g autosave
sudo npm run-script -g autosave autostart 
```

3）启用实验扩展 API 4）从 chrome 扩展安装 AutoSave 扩展 5）关闭 chrome，重新启动笔记本电脑

您可以通过在终端中键入“自动保存”来验证自动保存是否正常工作，您将得到如下信息：

```
saba$ autosave
http://127.0.0.1:9104 is already in use. Exiting. 
```

多田！！您已准备好使用自动保存。

# c++ - 设置多个 C++ DLLS 的版本信息

> ID：11580775
> 
> 赞同：0
> 
> 时间：2012-07-20T13:51:54.060
> 
> 标签：c++, visual-c++

我需要在我的项目中设置/更新多个 C++ DLL 的版本信息。我正在考虑拥有一个通用版本信息资源 (.rc) 文件。我可以更新此 rc 文件中的版本详细信息，将其构建为已编译资源 (.res) 文件，并将所有 C++ DLL 项目设置为链接到此 .res 文件。但版本信息还包含其他信息，如“FileDescription”、“FileName”，每个 DLL 都不同。是否有任何解决方案可以一步设置多个 C++ DLL 的版本信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:07:02.010

我们如何做到这一点是在我们的公共包含路径中有一个名为“version.rc2”的文件，然后我们在每个项目的 .rc2 文件中#include 该文件。在项目 .rc2 文件中的 #include "version.rc2" 之前，我们还 #include 一个名为 ProjVerInfo.h 的文件，该文件在每个项目中定义，为每个项目#defines FILE_DESCRIPTION、INTERNAL_NAME 和 ORIGINAL_NAME。当每个项目的 version.rc2 文件被#included 时，这些文本将被替换到所有版本信息中。

# mysql - 无法将记录复制到具有引用键的表中

> ID：11580776
> 
> 赞同：0
> 
> 时间：2012-07-20T13:51:56.380
> 
> 标签：mysql

我有一个表，比如说，table2，它与父表 table1 相连。我还有table3，我想将它的内容复制到连接到table1的table2中。Table3 的外键列中可能有一些在 table1 中不可用的值，当我尝试复制这些值时会导致错误。我怎样才能解决这个问题，以便只复制在父表中有引用的记录？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:59:00.293

```
Insert into Table2 (<columnList>)
Select <columnlist> 
From Table3 Inner join Table1
On Table3.fieldFromTable3 = Table1.ReferredFieldFromTable1 
```

根据需要使用列，并在 Join 中提供适当的字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:54:06.910

```
insert into table2 (col1, col2, ...)
select col1, col2, ... from table3
where table3.refcol in (select keycol from table1) 
```

当然，您需要用实际的列名替换样本。:-)

# delphi - 从 dbgrid 中选择字段

> ID：11580783
> 
> 赞同：0
> 
> 时间：2012-07-20T13:52:16.143
> 
> 标签：delphi, delphi-7, dbgrid, tadotable

我有一个链接到 DataSource（链接到 TADOTable）的 DBGrid。所有这些都通过 TADOConnection 运行并连接到 MS Access

网格包含各种值，我想在单击特定字段时对其进行编辑。我在更新普通文本字段时没有遇到任何困难，但是我无法编辑包含 OLE 对象的字段。

我想要做的是，当我单击一个字段时，我想要一个打开的对话框打开并让我选择一个文件。之后，我选择的文件必须更新为我选择的行的字段。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:19:41.477

我自己想通了。将其发布在这里，以便其他人可以受益。我刚刚去了我的 DBGrid，在对象检查器中，在事件下，我选择了 OnCellClick：

```
procedure TfrmOne.dbgOneCellClick(Column: TColumn);
begin
var
  line : integer;
begin
  line := DataSource1.DataSet.FieldValues['ID']; 
```

如您所见，line 获取所选行的字段值，在本例中为 ID。每行都有其唯一的 ID（主键），链接/来自数据库。使用这个主键，我做了一个简单的 IF 语句：

```
tblOne.Close;
tblOne.Open;
tblOne.First
while not tblOne.Eof do
if tblOne['ID'] = line then
begin
 if OpenDialog1.Execute then
  {*Insert Code here*}
 Exit;
end else
 tblOne.Next;
end; 
```

基本上第二段代码中发生的事情是，ID 与当前表行匹配。如果不匹配，则数据库移动一行，直到最终匹配。从这里可以专门使用该行（如最初在 DBGrid 中看到/选择的那样）和更新字段（OLE 对象）。

这不是 Append 或 Edit 命令的替代品，它仅允许用户执行 opendialog，然后将这些文件保存到 DBGrid 中的选定字段。请注意，要将照片添加到数据库 (jpeg)，您将需要 blobstreams 等。可以在此处找到完整指南：[http ://delphi.about.com/od/database/l/aa030601a.​​htm](http://delphi.about.com/od/database/l/aa030601a.htm)

# android - 选项卡android中的listview

> ID：11580788
> 
> 赞同：2
> 
> 时间：2012-07-20T13:52:29.653
> 
> 标签：android, listview, tabs

一世

我正在处理列表视图。我有一个包含 4 个元素的选项卡。当我单击 tab2 时，我想显示一个列表视图。问题是我只在我的活动中看到列表中的第一个元素。如果我单独测试应用程序（显示带有元素的列表）一切正常。

需要帮忙。谢谢！

主.java

```
public class MainTabActivity extends TabActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_menu);

        Resources ressources = getResources(); 
        TabHost tabHost = getTabHost(); 

        // Android tab
        Intent intentAndroid = new Intent().setClass(this, SLS_v1Activity.class);
        TabSpec tabSpecAndroid = tabHost
            .newTabSpec("Key")
        //  .setIndicator("", ressources.getDrawable(R.drawable.icon_android_config))
            .setIndicator("Key")
            .setContent(intentAndroid);
....

//      / /add all tabs 
        tabHost.addTab(tabKey);
        .....
        tabHost.setCurrentTab(0);
    }

} 
```

在新活动中，我有 tab_contact.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    android:orientation="vertical" >

    <EditText
        android:id="@+id/edit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <requestFocus />
    </EditText>

    <LinearLayout

        android:id="@+id/RelativeLayout2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >

        <ListView
        android:id="@+id/list"
          android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >
        </ListView>
    </LinearLayout>

</LinearLayout> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:56:00.120

尝试设置fill_parent：

```
<ListView 
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
</ListView> 
```

# python - python程序的web界面：上传和下载文件

> ID：11580789
> 
> 赞同：0
> 
> 时间：2012-07-20T13:52:31.780
> 
> 标签：python, html, file-upload, download, flask

我正在尝试制作一个简单的 Web 应用程序，可以在其中上传文件并将文件提供给 python 脚本。Flask 似乎适合这样的目的。然后，用户可以从脚本下载文件输出。请让我知道如何在 python 脚本中解析文件并获取输出。到目前为止，我设法执行以下上传文件的操作：

```
from flask import Flask
from flask import request
app = Flask(__name__)

def allowed_file(filename):
    return '.' in filename and \
        filename.rsplit('.', 1)[1] in ALLOWED_EXTENSIONS

@app.route('/', methods=['GET', 'POST'])
def upload_file():
    if request.method == 'POST':
        file = request.files['file']
        if file and allowed_file(file.filename):
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            return redirect(url_for('uploaded_file',
                        filename=filename))
    return '''
<!doctype html>
<title>Upload new File</title>
<h1>Upload new File</h1>
<form action="" method=post enctype=multipart/form-data>
<p><input type=file name=file>
<input type=submit value=Upload>
</form
'''
app.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:59:37.000

文件阅读在这里有很好的记录：

[http://docs.python.org/tutorial/inputoutput.html](http://docs.python.org/tutorial/inputoutput.html)

获得文件后，您可以通过以下方式获取其内容：

```
f = open(os.path.join(app.config['UPLOAD_FOLDER'], filename),'r')
data = f.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T14:47:29.367

Flask 不是处理文件上传任务的好方法。我推荐[nginx文件上传模块](http://wiki.nginx.org/HttpUploadModule)

# maven-2 - 在 Spring 3.1 和 Hibernate 4 中使用 c3p0 时无法从 MySQL DB 获取连接

> ID：11580790
> 
> 赞同：1
> 
> 时间：2012-07-20T13:52:35.807
> 
> 标签：maven-2, spring-3, c3p0, hibernate-4.x

从 mysql db 获取连接时，我遇到了一个令人沮丧的错误。我在Spring **3.1**和**Hibernate 4中使用****c3p0** ..

 ****任何帮助将不胜感激！提前致谢..

带着敬意..

* * *

这是我用于池的**Maven**依赖项：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <!-- Hibernate c3p0 connection pool -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
    </dependency> 
```

**Spring Hibernate 数据库配置：**

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="com.mysql.jdbc.Driver" />
    <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/ext4playground" />
    <property name="user" value="xx" />
    <property name="password" value="xx" />
    <property name="maxPoolSize" value="10" />
    <property name="initialPoolSize" value="3" />
    <property name="maxStatements" value="50" />
    <property name="minPoolSize" value="3" />
    <property name="idleConnectionTestPeriod" value="100" />
    <property name="maxIdleTime" value="200" />
    <property name="acquireIncrement" value="1" />
</bean>

<!-- Hibernate SessionFactory -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource"><ref local="dataSource"/></property>
    <property name="packagesToScan" value="com.tk.sample.ext4.model" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.use_sql_comments">true</prop>
            <prop key="hibernate.format_sql">false</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="hibernate.generate_statistics">true</prop>
            <prop key="hibernate.connection.characterEncoding">UTF-8</prop>
            <prop key="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</prop>
            <!-- c3p0 properties -->
            <prop key="hibernate.c3p0.min_size">2</prop>
            <prop key="hibernate.c3p0.max_size">50</prop>
            <prop key="hibernate.c3p0.timeout">300</prop>
            <prop key="hibernate.c3p0.max_statements">50</prop>
            <prop key="hibernate.c3p0.idle_test_period">3000</prop>
            <prop key="hibernate.c3p0.acquireRetryAttempts">30</prop>
            <prop key="hibernate.c3p0.acquireIncrement">5</prop>
            <prop key="hibernate.c3p0.initialPoolSize">2</prop>
            <prop key="hibernate.c3p0.maxPoolSize">50</prop>
            <prop key="hibernate.c3p0.maxIdleTime">300</prop>
            <prop key="hibernate.c3p0.maxStatements">50</prop>
            <prop key="hibernate.c3p0.minPoolSize">2</prop>
            <prop key="hibernate.c3p0.preferredTestQuery">SELECT 1;</prop>
            <prop key="hibernate.c3p0.testConnectionOnCheckout">true</prop>                
        </props>
    </property>
</bean>

<!-- Transaction manager for a single Hibernate SessionFactory (alternative to JTA) -->
<tx:annotation-driven/>
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory"><ref local="sessionFactory"/></property>
</bean> 
```

**完整的堆栈跟踪：**

```
org.springframework.transaction.CannotCreateTransactionException: **Could not open Hibernate Session for transaction**; nested exception is org.hibernate.exception.GenericJDBCException: **Could not open connection**
at org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:440)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.startTransaction(TransactionalTestExecutionListener.java:513)
at org.springframework.test.context.transaction.TransactionalTestExecutionListener.startNewTransaction(TransactionalTestExecutionListener.java:271)
at org.springframework.test.context.transaction.TransactionalTestExecutionListener.beforeTestMethod(TransactionalTestExecutionListener.java:164)
at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:358)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:73)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
Caused by: org.hibernate.exception.GenericJDBCException: Could not open connection
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1309)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:399)
    ... 23 more
Caused by: java.sql.SQLException: Connections could not be acquired from the underlying database!
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:529)
    at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
    at org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:79)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:279)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    ... 28 more
Caused by: com.mchange.v2.resourcepool.CannotAcquireResourceException: A ResourcePool could not acquire a resource from its primary factory or source.
    at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1319)
    at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
    at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:23:12.297

请检查您的日志。在您在上面显示的异常之前，c3p0 将记录堆栈跟踪，详细说明池尝试从数据库获取连接失败。如果您将日志记录级别设置为 FINE（如果您需要特定的记录器，请使用 com.mchange.v2.resourcepool.BasicResourcePool），您将看到记录的每次失败尝试。如果您将日志级别保留在常规 INFO（或 WARN），您将只看到“一轮”失败尝试中的最后一次失败尝试（默认情况下 30 次失败尝试，重试延迟为 1 秒）。如果您一直在 INFO 登录，您应该已经能够在您的日志中找到这些异常。

请注意，在您的配置中，您已经定义了一些 c3p0 配置参数多达 3 次，有时甚至不一致。这不是您的问题的原因，但它有点不雅，并且对于实际采用哪个值留下了一些不确定性。例如，maxPoolSize、hibernate.c3p0.max_size 和 hibernate.c3p0.maxPoolSize 都沿相同的 c3p0 参数滴流。如果您想查看实际设置了哪个值，请检查您的日志（在 INFO 处）以了解 c3p0 池在初始化时生成的配置转储。****

# javascript - 如何将控件添加到 JavaScript 计时器

> ID：11580791
> 
> 赞同：-5
> 
> 时间：2012-07-20T13:52:38.860
> 
> 标签：javascript

如何将“暂停”、“恢复”、“重置”和“结束”功能添加到以下 JavaScript 倒计时？

```
var sec = 0;

function pad(val) {
    return val > 9 ? val : "0" + val;
}
setInterval(function() {
    document.getElementById("seconds").innerHTML = pad(++sec % 60);
    document.getElementById("minutes").innerHTML = pad(parseInt(sec / 60, 10));
}, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:56:33.567

你需要有指向`setInterval`函数的指针：

```
var sec = 0,
  timeoutHandler;

function pad(val) {
    return val > 9 ? val : "0" + val;
}

function pausePad() {
    clearTimeout( timeoutHandler );
}

function resumePad() {
    pausePad();
    runPad();
}

function resetPad() {
    sec = 0;
    resumePad();
}

function runPad() {
    timeoutHandler = setInterval(function() {
        document.getElementById("seconds").innerHTML = pad(++sec % 60);
        document.getElementById("minutes").innerHTML = pad(parseInt(sec / 60, 10));
    }, 1000);
}
runPad(); 
```

# c# - Oracle 存储过程的问题

> ID：11580793
> 
> 赞同：0
> 
> 时间：2012-07-20T13:52:46.270
> 
> 标签：c#, .net, stored-procedures, ado.net, oracle11g

我编写了以下存储过程来检索要发送到我的 C# 应用程序的 DataSet 的数据。

您能否为我的存储过程建议一个更健壮的设计？我假设这不是返回记录集的最佳方式。

```
CREATE OR REPLACE PROCEDURE GET_EMPLOYEE_DATA 
(
  EMPLOYEE_EMAIL IN VARCHAR2,
  EMP_RECORD_SET1 OUT SYS_REFCURSOR,
  EMP_RECORD_SET2 OUT SYS_REFCURSOR,
  EMP_RECORD_SET3 OUT SYS_REFCURSOR,
  EMP_RECORD_SET4 OUT SYS_REFCURSOR
) AS 
BEGIN
  OPEN EMP_RECORD_SET1 FOR

  SELECT EMPLOYEENAME AS EMP_NAME,
         EMPLOYEELASTNAME AS EMP_LAST_NAME,
         EMPLOYEEFIRSTNAME AS EMP_FIRST_NAME
         FROM EMP.EMPLOYEES
         WHERE EMP_EMAIL = EMPLOYEE_EMAIL
      ;

     OPEN EMP_RECORD_SET2 FOR 

        SELECT EMPLOYEEADD AS EMP_ADDRESSESS,
         EMPLOYEECITY AS EMP_CITY,
         EMPLOYEE_STATE AS EMP_STATE
         FROM EMP.EMPLOYEES_ADDRESSES
         WHERE EMP_EMAIL = EMPLOYEE_EMAIL;

      OPEN EMP_RECORD_SET3 FOR

        SELECT EMPLOYEEPHONE AS EMP_PHONE,
         EMPLOYEEEXTENSION AS EMP_EXTENSION
         FROM EMP.EMPLOYEES_CONTACTS
         WHERE EMP_EMAIL = EMPLOYEE_EMAIL
      ;

      OPEN EMP_RECORD_SET4 FOR

  SELECT EMPLOYEEJOB AS EMP_JOB,
         EMPLOYEERESPONSIBILITIES AS EMP_RESPONSIBILITIES
         FROM EMP.EMPLOYEES_DATA
         WHERE EMP_EMAIL = EMPLOYEE_EMAIL
      ;

END GET_PROTOCOL_INFO_SP; 
```

我需要知道我的语法是否正确以及是否应该关闭游标。我有 4 个不同的表，在应用程序中调用数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:45:59.340

*   您的语法似乎是有效的。
*   您不能关闭存储过程中的游标。由于游标被返回给客户端，客户端应用程序负责关闭它们。假设客户端是基于标签的 C# 应用程序，C# 应用程序将需要关闭光标。

在架构上，设计一个返回 4 个单独参数的存储过程是不常见的，`SYS_REFCURSOR`特别是在大多数查询似乎返回 1 行数据（假设`EMP_EMAIL`是`EMPLOYEES`表中的键）或少数数据行（如果，对于例如，员工可能有多个地址）。如果`EMP_EMAIL`不是`EMPLOYEES`表中的键，我看不到客户有任何方法可以确定哪个地址，哪个电话号码，或者哪个工作与哪个员工一起工作，这几乎肯定是一个错误。返回一个单一的会更常见`SYS_REFCURSOR`如果要返回许多行，则将数据库中的四个表连接在一起，如果您知道应该只返回一行，则返回标量（可能是标量类型），或者如果您真的需要，则有四个单独的过程返回四个独立的结果集。就个人而言，我更喜欢返回集合，而不是`SYS_REFCURSOR`如果您真的希望将地址`OUT`与电话号码分开，但如果您的 C# 应用程序确实声明了四个单独的 GUI 控件来显示这四个，那么这可能更难映射到您的 C# 应用程序单独的结果集。

作为一般约定，我强烈建议使用某种命名约定来标识参数并将它们与列名和潜在的列名分开。我建议使用锚定类型。我个人会使用`P_`前缀，例如

```
CREATE OR REPLACE PROCEDURE GET_EMPLOYEE_DATA 
(
  P_EMPLOYEE_EMAIL IN EMP.EMPLOYEES.EMAIL%TYPE,
  P_EMP_RECORD_SET1 OUT SYS_REFCURSOR,
  P_EMP_RECORD_SET2 OUT SYS_REFCURSOR,
  P_EMP_RECORD_SET3 OUT SYS_REFCURSOR,
  P_EMP_RECORD_SET4 OUT SYS_REFCURSOR
) 
```

这种命名约定的原因是，当您在 PL/SQL 块中编写 SQL 语句时，首先使用列名解析标识符，然后使用局部变量。这导致很多人无意中编写了代码，他们打算将局部变量与列名进行比较，但最终将列名与其自身进行比较。例如，如果我写这样的东西

```
CREATE OR REPLACE PROCEDURE get_employee (
  emp_email  IN emp.employees.email%type,
  rc        OUT sys_refcursor 
)
AS
BEGIN
  OPEN rc
   FOR select *
         from emp.employees e
        where e.emp_email = emp_email;
END; 
```

很明显，我的意图是将`emp_email`表`employees`中的值与`emp_email`参数进行比较。但是，此代码最终将`emp_email`表中的 与自身进行比较，并返回表中不为 NULL`employees`的每一行。`emp_email`相反，如果我对参数使用一致的命名约定

```
CREATE OR REPLACE PROCEDURE get_employee (
  p_emp_email  IN emp.employees.email%type,
  p_rc        OUT sys_refcursor 
)
AS
BEGIN
  OPEN p_rc
   FOR select *
         from emp.employees e
        where e.emp_email = p_emp_email;
END; 
```

那么当我打算引用局部变量时，如果我无意中引用了列名，就会立即清楚得多，反之亦然。

一般来说，我也强烈建议每个程序都成为一个包的一部分。这有助于组织，允许您将相关程序组合在一起。在这种情况下，如果您决定将此过程分成四个单独的过程，每个过程都返回一个`SYS_REFCURSOR`. 包允许您定义仅可用于包中的方法的私有方法，这有助于封装。并且包有助于依赖管理，因为仅当您更改包规范而不是包体时才需要重新编译其他包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:04:28.797

如果您想获得 4 个不同的数据表，这似乎是一个足够合理的 SP。
您还可以考虑仅检索一个已连接的数据表，具体取决于每位员工的预期行数和您的应用程序的需求。

在任何情况下，您都可能希望为数据表使用更有意义的名称（例如`Employees_Phones`等`Employees_Addresses`）

# c# - Asp.net、C#、列表参数

> ID：11580794
> 
> 赞同：0
> 
> 时间：2012-07-20T13:52:47.797
> 
> 标签：c#, asp.net, asp.net-mvc-3

我将 JSON 参数传递给 asp.net C#。参数可以是单个或多个数据。

所以我编写了将参数作为 LIST 类类型的代码。

但它返回错误，**“对象引用未设置为对象的实例。”**

我这样写测试代码，它会犯同样的错误。

请检查我的代码，并请给我建议。

测试代码，

在控制器类中

```
[HttpGet]
public ActionResult modelTest(TestList obj)
{

    return Content(obj.wow.Count.ToString());
} 
```

以及模型和列表类，

```
public class TestList
{
    public List<TestModel> wow { get; set; }
}

public class TestModel
{
    public string id { get; set; }
    public string name { get; set; }
} 
```

并调用***/Test/modelTest/?id=myId&name=john&age=11***

然后，发生错误，

```
Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 338:        {
Line 339:            
Line 340:            return Content(obj.wow.Count.ToString());
Line 341:        }
Line 342: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:54:03.527

该`wow`列表可能从未初始化。

您可以（例如）在 TestList 构造函数中执行此操作：

```
public class TestList
{
   public TestList() {
      wow = new List<TestModel>();
   }
    public List<TestModel> wow { get; private set; }//if you do this way, you can have a private setter
} 
```

或者如果你需要一个公共二传手

```
public class TestList {

    private List<TestModel> wow_;

    public List<TestModel> wow {
       get {
          if (wow_ == null) wow_ = new List<TestModel>();
          return wow_;
       }
       set {wow_ = value;}
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:13:43.443

我认为您的呼叫系统不正确。您需要为 json 数据添加“TestList”之类的列表。调试它并检查“modelTest”方法实际接收到的内容。

# node.js - 将 Express.js 2 迁移到 3，特别是 app.dynamicHelpers() 到 app.locals.use？

> ID：11580796
> 
> 赞同：19
> 
> 时间：2012-07-20T13:53:04.070
> 
> 标签：node.js, express

将 Express.js 从第 2 版更新到第 3 版，并且由于`app.dynamicHelpers({..})`在 V3 中不再存在以下对中断的调用：

```
app.dynamicHelpers({

    request: function(req){
      return req
    },
    ...etc.
}); 
```

有一个[迁移指南](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)是这样说的：

*   `app.dynamicHelpers()`（使用中间件 + res.locals）

但我很难过如何做到这一点。有没有更具体的例子来说明如何迁移它？

相关SO帖子： [nodejs express 3.0](https://stackoverflow.com/questions/10204055/nodejs-express-3-0)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-26T20:02:51.163

**我对session.user**有同样的问题，只是通过理解 app.use 函数需要在配置部分而不是以前的位置来修复**它**。

前：

```
app.configure();
app.dynamicHelpers({
  user: function(req, res) {
    return req.session.user;
  }
}); 
```

后：

```
app.configure(function(){
  //...
  app.use(function(req, res, next){
    res.locals.user = req.session.user;
    next();
  });
  //...
}); 
```

对于 Flash 看看[connect-flash](https://github.com/jaredhanson/connect-flash)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-19T19:14:32.190

16 票的解决方案是正确的，但请务必在参考这篇文章`res.locals`之前使用分配 [https://stackoverflow.com/a/12597730/1132109](https://stackoverflow.com/a/12597730/1132109)`app.use(app.router);`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T15:59:53.307

查看 github 上的示例文件夹。例如[身份验证](https://github.com/visionmedia/express/blob/master/examples/auth/app.js)：

```
app.use(function(req, res, next){
  var err = req.session.error,
      msg = req.session.success;
  delete req.session.error;
  delete req.session.success;
  res.locals.message = '';
  if (err) res.locals.message = '<p class="msg error">' + err + '</p>';
  if (msg) res.locals.message = '<p class="msg success">' + msg + '</p>';
  next();
}); 
```

然后，您可以在模板中使用变量“消息”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T17:03:18.210

reponse.locals.use 是 Express 的一项新的有用功能，可让您将变量发送到首先需要评估的模型。例如，假设您想将 3 个变量发送到您的视图，所有这些变量都必须在对 mongodb 的请求之后。“旧”方法是嵌套 3 个回调，当最后一个回调返回时，您将呈现您的视图。locals.use 让这变得容易多了，因为它会评估你的函数，并且只有在所有函数都被评估后才会呈现你的视图。

这是有关如何使用它们的一小段代码（这是咖啡脚本，希望您可以将其转换为 javascript :D）

```
response.locals.use (request, response, done) ->
    myAsynchMethod (value) ->
        reponse.locals.myProperty = value
        done() 
```

在这种情况下，将有一个名为 myProperty 的变量，您可以在视图上使用它的值设置为 myAsynchMethod 给回调的任何值。

# jquery - 在backbone.js 视图中提交被调用多次

> ID：11580797
> 
> 赞同：1
> 
> 时间：2012-07-20T13:53:08.500
> 
> 标签：jquery, backbone.js, backbone-events

我对我的表单提交有一个看法，我收到了多个电话，因此正在调用多个记录。如何停止接听多个电话？

保存第一条记录后，当我尝试保存另一条记录时，它会保存两次，然后保存三次，随着我继续添加记录而继续增加。

我以另一种观点给出了这个事件

事件：{

```
 "submit" : function(){$('#newWaitlistForm').submit();},

}, 
```

我的表单视图是

var FormView = Backbone.View.extend({

```
el: "#newUser",

template: $.template( null, $('#newUser-tmpl') ),

events: {
   "submit" : "submit",

},

initialize: function() {
    this.render();
},

submit: function(e){
    var self = this;    
    console.log('submit');
    e.preventDefault();
    e.stopPropagation();
    var model = new Reservation($('#newWaitlistForm').serializeObject());
    var saved = model.save(null, {
        success: function(data){
            console.log({'success': data});
            //waitlist.add(data);               
            self.$el.find('input,textarea,select').val('');             
            self.goBack();
        },error: function(model, response) {
            console.log({'error': response});
        }
    }, {wait:true});
    console.log({saved: saved});
},

goBack: function(){
    $('.current').removeClass('current');
    $('.main').addClass('current');
},
render: function(){
    this.$el.html($.tmpl(this.template,{}));

    this.$el.find('input[name="phone"]').mask("(999) 999-9999");
    var today = Date.parse('now').toString('MM/dd');
    return this;
}
  }); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:21:25.490

此问题的一个可能来源是您创建主干视图的位置。如果您要为要保存的每条记录创建一个新视图，那么您需要通过取消绑定其所有事件来确保您已正确处理前一个视图。否则内存中的所有视图都会得到提交事件并处理它。这篇文章解释了这个问题，并为这个问题提供了一个很好的解决方案：

[http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

基本思想是让您的视图定义以下功能：

```
 bindTo: function(model, ev, callback) {
      model.bind(ev, callback, this);
      return this.bindings.push({
        model: model,
        ev: ev,
        callback: callback
      });
    },
    unbindFromAll: function() {
      _.each(this.bindings, function(binding) {
        return binding.model.unbind(binding.ev, binding.callback);
      });
      return this.bindings = [];
    },
    dispose: function() {
      this.unbindFromAll();
      this.unbind();
      return this.remove();
    } 
```

您可以将这些函数放在视图基类中以实现可重用性。

然后，您应该定义一个辅助函数来显示和新创建的视图。就像是：

```
showView: function(view) {
      if (this.currentView) {
        this.currentView.dispose();
      }
      this.currentView = view;
      this.currentView.render();

    } 
```

您应该使用 bindTo 方法将事件绑定到视图。

# c++ - C++ 的 Activator.CreateInstance？

> ID：11580811
> 
> 赞同：3
> 
> 时间：2012-07-20T13:53:59.030
> 
> 标签：c++, .net

在我的 .NET 项目中，我有一些根据 xml 创建新对象的代码。激活器是使这成为可能的核心。我可以在 C++ 中做类似的事情吗？我找到了一些 IOC/DI 框架，但我真的不需要太多功能。另一种方法当然是简单地编写一个开关，但每次我想出一个新类型时都需要修改（连同 XML）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:09:10.960

如果你不想要一个开关，你可以沿着这些路线滚动你的工厂

```
#include <map>
#include <string>

class IHasCreate
{
};

typedef IHasCreate* (*CreateFunc)();

std::map<std::string,CreateFunc> factorymap;

class foo : IHasCreate
{
public:

    static IHasCreate* CreateFoo()
    {
        return new foo();
    }
};

class bar: IHasCreate
{
    public:
    static IHasCreate* CreateBar()
    {
        return new bar();
    }
};

IHasCreate* FactoryCreate( const std::string & name )
{
    return factorymap[name]();
}

int main()
{
    factorymap["foo"] = &foo::CreateFoo;
    factorymap["bar"] = &bar::CreateBar;

    IHasCreate *fooboject =  FactoryCreate("foo");
    IHasCreate *barboject =  FactoryCreate("bar");

    return 0;
} 
```

可以通过使用某些人可能会觉得更有吸引力的某种宏魔法来向 factorymap 添加东西。

```
#include <map>
#include <string>

class IHasCreate
{
};

typedef IHasCreate* (*CreateFunc)();

std::map<std::string,CreateFunc> factorymap;

bool RegisterType( const std::string& type , CreateFunc func )
{
    factorymap[type] = func;
    return true;
}

IHasCreate* FactoryCreate( const std::string & name )
{
    return factorymap[name]();
}

#define REGISTER(type)  \
IHasCreate* type##createfunc() { return new type(); } \
bool type##temp = RegisterType( #type , &type##createfunc); 

class foo : public IHasCreate
{
};

REGISTER(foo);

class bar: public IHasCreate
{
};

REGISTER(bar);

int main()
{

    IHasCreate *fooboject =  FactoryCreate("foo");
    IHasCreate *barboject =  FactoryCreate("bar");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:33:57.067

“超级工厂”最酷的 C++ 实现是我的好朋友 Francis 的一个，你可以在 CodeProject 上找到这篇[文章。](http://www.codeproject.com/Articles/254722/Super-Factory)

我相信他写这家工厂时正是考虑到了这种需求。它还支持他的（反）序列化框架[Daabli](http://daabli.sourceforge.net/)，该框架读取纯文本 C 样式（以及一些工作 - JSON、XML）文件并重新创建对象图。

希望这可以帮助！

# java - Java - 为什么这个要点有问题？

> ID：11580821
> 
> 赞同：0
> 
> 时间：2012-07-20T13:54:40.190
> 
> 标签：java, swing, jtextpane, htmleditorkit, bulletedlist

作为我的一个项目的一部分，我有一个 JTextPane 和一个 JButton。该按钮向 JTextPane 添加了一个项目符号点：

```
HTMLEditorKit.InsertHTMLTextAction bulletAction = new
    HTMLEditorKit.InsertHTMLTextAction("Bullet", "<li></li>",
    HTML.Tag.BODY, HTML.Tag.UL);  
JButton bulletButton = new JButton(bulletAction); 
```

单击按钮时，将创建项目符号。如果您在带有项目符号的行上键入，然后再次单击该按钮，则会创建 2 个项目符号。但是，如果您不在项目符号点所在的行上键入，然后单击按钮，则只会输入 1。

为什么它有这个奇怪的创建故障？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T02:06:17.197

部分原因是 Swing 依赖段落在文档周围进行导航和光标定位。Swing 对 HTML 的处理有时也有问题，信不信由你。除非您覆盖 Swing 的默认行为，否则您几乎无能为力。

[我在这里](https://stackoverflow.com/questions/17522022/jtextpane-bullet-with-htmleditorkit-list-not-rendering-correctly-unless-i-do-s/19738001#19738001)回答了一个类似的问题，以防您需要更多详细信息。另请参阅 Stephane 在同一页面上的答案以获取替代实现。希望有帮助。

# git - IndexDiff 返回的修改和更改的文件状态有什么区别？

> ID：11580822
> 
> 赞同：1
> 
> 时间：2012-07-20T13:54:42.727
> 
> 标签：git, jgit

我发现只有：

// 在 repo 中，在索引中，内容差异 => 已更改 // 在索引中，在 workdir 中，内容不同 => 已修改

但我无法理解其中的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:22:46.887

查看类 IndexDiff 中的 getter 的 javadoc：

```
/**
 * @return list of files changed from tree to index
 */
public Set<String> getChanged() 
```

这些是树 HEAD 点（在大多数情况下是当前分支的尖端）和 Git 索引之间不同的文件

```
/**
 * @return list of files modified on disk relative to the index
 */
public Set<String> getModified() 
```

这些是磁盘上的文件（又名工作树）和 Git 索引之间的不同文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-06T21:49:55.190

命令 javadoc 中没有太多详细说明。我使用[git status 单元测试](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/StatusCommandTest.java)来了解**git status**是如何工作的。

简而言之：

> modified - 如果您修改现有文件而不将其添加到索引中，您会得到什么
> 
> 更改 - 如果您修改现有文件并在其上调用 'git add ...' 会得到什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:23:18.037

既然你没有得到任何答案，我给你一个开始。

首先，我认为两者之间存在区别：

*   工作目录：这是您正在处理的文件系统。当您修改文件时，文件系统上的内容已更改。通常，这是操作系统保持最新状态的工作。

*   索引：Git 使用什么来了解正在发生的事情。这是 Git 内部机制来跟踪发生的事情。即使对我来说有点模糊，它也应该知道文件系统上的更改或您添加的更改（使用 git add [-u]），或者您提交的更改（或所有更改）

*   存储库/本地副本：您可能拥有不同版本文件的不同位置。Git 使用哈希来保存关于它们的信息（但如果你问这个问题，你应该知道它）

我知道 Git 的一个问题是处理 repo 的大小，当 repo 大小非常大时它会变得很慢。更准确地说，他们的团队正在努力减少 lstat 调用的数量，以更新 Git 对您的文件系统的了解（因此这意味着 Git 通常知道您何时修改工作目录中的文件）

我不知道你在看什么，但你可能会在 google 上搜索 git-update-index（我认为当你执行 git add 时会调用它）、'Git lstat' 或这类东西。

而且，很抱歉，但你的问题真的不清楚：缩写太多，行太少。“内容差异”是否意味着您对内容运行了 diff 命令或内容不同？您的符号不清楚，为什么在您可能列出项目时使用 // 并且 => 表示结果或其他任何内容。人们在回答之前花时间搜索文档，请花时间写清楚的问题。

我希望这能帮到您

文森特

# sql - SQL：如何获取本周的星期日

> ID：11580833
> 
> 赞同：10
> 
> 时间：2012-07-20T13:55:23.913
> 
> 标签：sql, sql-server-2008, date

在给定任何时间戳的情况下，我想获得本周的最后一天（星期日）。我尝试了以下脚本，但它返回星期六作为最后一天，而不是我预期的星期日。

```
Select DATEADD(DAY , 7-DATEPART(WEEKDAY,GETDATE()),GETDATE()) AS 'Last Day Of Week' 
```

欢迎任何答案！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T13:59:38.933

如果您将标准 DATEFIRST 从星期日 (7) 更改为星期一 (1)，它将起作用：

```
SET DATEFIRST 1

Select DATEADD(DAY , 7-DATEPART(WEEKDAY,GETDATE()),GETDATE()) AS 'Last Day Of Week' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-30T17:50:06.870

```
DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 6) 
```

我知道这篇文章很旧，但是当通过谷歌搜索时，这篇文章在顶部。

总是很高兴更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:00:19.323

为您的命令添加前缀`set datefirst 1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-24T16:20:13.300

以下不适用于某些`DATEFIRST`（语言）的星期日：

```
 DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 6) 
```

此外，设置`DATEFIRST`并不总是一种选择（功能不能使用`SET DATEFIRST`）

这是一个通用的：

*   从星期一开始，它会持续数周
*   总是返回本周的星期日
*   无论`DATEFIRST`设置如何都可以工作
*   不变`DATEFIRST`，因此可以在函数中使用

```
 DECLARE @today DATE = getdate(); (or any other date);

    SELECT dateadd(day, ((15-@@datefirst) - datepart(dw, @today)) % 7, @today); 
```

# performance - drupal 内容添加很慢

> ID：11580840
> 
> 赞同：0
> 
> 时间：2012-07-20T13:55:38.653
> 
> 标签：performance, drupal, web

添加内容时，drupal 站点速度很慢。它冻结了。我是 drupal 的新手，我不知道如何调试它。我正在使用开发模块。有人可以提出可能的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:25:14.557

你的php内存用完了吗？如果您安装了太多模块，则可能会发生这种情况。您可以通过更改服务器配置文件中的 phpmem 变量来解决此问题。一个典型的迹象是白屏。

您还可以检查您的服务器 apache 和 sql 日志，看看它们是否为您提供任何线索。

# java - 检查 PhoneGap Android 应用 LVL 许可证，在异步线程中使用

> ID：11580842
> 
> 赞同：2
> 
> 时间：2012-07-20T13:55:41.290
> 
> 标签：java, android, cordova, asynchronous, android-lvl

我想知道如何在我的 Phonegap 应用程序开始加载时在异步线程中触发 Android 的 LVL 许可证验证。如果验证导致“无法访问”，我希望该应用程序关闭。我更喜欢这种逻辑，而不是通常的一步一步设置。LVL 需要几秒钟的时间，如果一个邪恶的未经许可的用户在应用程序关闭前看到应用程序几秒钟，那不是问题。

**问题**是我对 Java 不感兴趣。

**我的应用** 我有一个在 Google Play 中发布的 PhoneGap (Cordova) 付费应用，它使用 LVL 验证来检查应用是否由用户付费。工作就像一个魅力，除了检查大约需要五秒钟。通常，即使是启动画面也不会显示几秒钟，似乎是因为这个。

因此，用户在黑屏上停留了 5 秒钟，*然后*在加载 Java 代码时出现启动屏幕，最后在 Java*脚本*完成之前，他们会看到默认的灰色主屏幕。所以我非常有动力减少这种启动延迟。

我已经阅读了[一些](https://stackoverflow.com/questions/7136786/android-lvl-licensing-service-is-incredibly-slow-solutions-async)建议使用异步方法的评论：立即开始加载 URL，并将许可证检查作为 asyncTask 运行。但我不知道如何将 webview 传递给 asyncTask 以便在许可证无效时关闭 webview。

**我的第一次尝试**由于许可证检查本身是一个异步过程，我尝试先设置启动画面并加载 URL，然后进行许可证检查。请参阅下面的代码。如果检查返回“不允许”，则回调应关闭应用程序。但是，如果我尝试这种设置，不知何故 LVL 服务器*总是*返回“有效”，即使我将强制响应设置为“无效”或“未知”或 Google Play 上的任何其他内容。

我正在寻找 A 或 B：A. 一种让 LVL 正确响应的方法。B. 另一种实现异步许可证检查的方法。

**下面的代码**是当前代码的抽象。DroidGap 是 web 视图。基本上，onCreate 启动许可检查，许可检查回调加载应用程序的 HTML 或关闭 web 视图。

```
public class App extends DroidGap {

    public void onCreate(Bundle icicle) {
        super.setIntegerProperty("splashscreen", R.drawable.splash);
        super.loadUrl("file:///android_asset/www/index.html");

        mCheckerCallback = new LicenseCheckerCallback();
        checkAccess(mCheckerCallback);
    }

private class MyCheckerCallback implements LicenseCheckerCallback() {
    public void Allow() {
         //Do nothing
    }
    public void DontAllow(){
         finish();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T08:19:22.020

斯科特问我是否找到了解决办法。回忆我是怎么做的已经太久了，但下面的设置似乎对我有用。希望有帮助！

```
package com.phonegap.mappingtheforest.helloworld;

import org.apache.cordova.DroidGap;

//import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.provider.Settings.Secure;
import android.util.Log;
import android.widget.Toast;

import com.android.vending.licensing.AESObfuscator;
import com.android.vending.licensing.LicenseChecker;
import com.android.vending.licensing.LicenseCheckerCallback;
import com.android.vending.licensing.ServerManagedPolicy;
//import com.phonegap.afforditfull.R;

public class App extends DroidGap { 

    private LicenseChecker mChecker;
    private LicenseCheckerCallback mLicenseCheckerCallback;
    private static final String BASE64_PUBLIC_KEY = "MyBase64PublicKey";
 // Generate 20 random bytes, and put them here.
    private static final byte[] SALT = new byte[] {
     //[my bunch of integers]
     };
    private AESObfuscator mObsfuscator;
    private String android_id;

    /** Called when the activity is first created. */ 
    @Override 
    public void onCreate(Bundle icicle) { 
         super.onCreate(icicle); 
         //setContentView(R.layout.main);
         super.loadUrl("file:///android_asset/www/index.html",1);
         //super.setStringProperty("loadingDialog", "Starting Afford-It...");
         super.setIntegerProperty("splashscreen", R.drawable.splash);
         android_id = Secure.getString(this.getContentResolver(), Secure.ANDROID_ID);
         mObsfuscator = new AESObfuscator(SALT, getPackageName(), android_id);
         ServerManagedPolicy serverPolicy = new ServerManagedPolicy(this,mObsfuscator);

         mLicenseCheckerCallback = new MyLicenseCheckerCallback();
         mChecker = new LicenseChecker(
             this, serverPolicy,
             BASE64_PUBLIC_KEY  // Your public licensing key.
             );
         mChecker.checkAccess(mLicenseCheckerCallback);  
    }

private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
        public void allow() {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // Should allow user access.
            Log.w("LicenseChecker", "Allow");
            Intent i = new Intent(App.this, DroidGap.class);
            startActivity(i);
            finish();
        }

        public void dontAllow() {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            Log.w("LicenseChecker", "Don't Allow");
            // Should not allow access. An app can handle as needed,
            // typically by informing the user that the app is not licensed
            // and then shutting down the app or limiting the user to a
            // restricted set of features.
            // In this example, we show a dialog that takes the user to Market.
            showDialog(0);

        }

        @Override
        public void applicationError(ApplicationErrorCode errorCode) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            toast("Error: " + errorCode.name());

        }
    }
    @Override
    protected Dialog onCreateDialog(int id) {
        // We have only one dialog.
        return new AlertDialog.Builder(this)
                .setTitle("Application Not Licensed")
                .setCancelable(false)
                .setMessage(
                        "This application is not licensed. Please purchase it from Android Market")
                .setPositiveButton("Buy App",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                Intent marketIntent = new Intent(
                                        Intent.ACTION_VIEW,
                                        Uri.parse("market://details?id=com.phonegap.mappingtheforest.afforditpaid" + getPackageName()));
                                startActivity(marketIntent);
                                finish();
                            }
                        })
                .setNegativeButton("Exit",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                finish();
                            }
                        }).create();
    }   

    public void toast(String string) {
        Toast.makeText(this, string, Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onDestroy() {
    super.onDestroy();
    mChecker.onDestroy();
  }
} 
```

# javascript - 如何在我的 javascript 表单验证中添加正则表达式测试？

> ID：11580849
> 
> 赞同：0
> 
> 时间：2012-07-20T13:55:59.420
> 
> 标签：javascript, forms, validation

我已经使用 javascript 创建了一个简单的表单验证，并希望在输入中添加一些模式测试，以确保显然提交了正确的信息，但我对此很陌生，我想看看是否有人可以帮助我添加模式测试。

到目前为止，我的验证代码是：

```
function validate(form) {
var fail = false;
var name = document.getElementById("full_name");

if (name.value.length == 0) {
  document.getElementById("okName").className = "fail";
  fail = true;
}else{
  document.getElementById("okName").className = "success";
}

var email = document.getElementById("email");
var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

if (email.value.length == 0) {
  document.getElementById("okEmail").className = "fail";
    fail = true;
}else{
  document.getElementById("okEmail").className = "success";
} 
```

}

我认为我必须将条件添加到电子邮件验证的“if”语句中，但不知道从哪里开始？我知道我会如何使用 jQuery：

```
if( value.length<1 /*|| value==field_values[$(this).attr('id')]*/ || ( $(this).attr('id')=='email' && !emailPattern.test(value) )  ) 
```

但我不确定如何在原始 JavaScript 中做同样的事情，因为我不知道如何在纯 JavaScript 中定位电子邮件的输入！如果有人可以帮助我，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:02:43.873

这看起来像：

```
var email = document.getElementById("email");
var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

if (!emailPattern.test(email.value)) {
  document.getElementById("okEmail").className = "fail";
    fail = true;
}else{
  document.getElementById("okEmail").className = "success";
} 
```

也不需要检查字符串的长度。无需为这样一个简单的任务而对您的网页进行 jQuerize。:-)

一些忠告：

*   永远不要只依赖客户端验证
*   验证控制是否确实存在（即 if (email) { ... } ）
*   修剪字符串或提供名称模式（您的表单通过在表单字段中输入单个空格字符进行验证）
*   您的电子邮件模式实际上也不正确（点也是 [] 中的“任何字符”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:02:06.653

```
if (email.value.length === 0 || !emailPattern.test(email.value) ) {
  document.getElementById("okEmail").className = "fail";
  fail = true;
} else {
  document.getElementById("okEmail").className = "success";
} 
```

# http-status-code-404 - TYPO3：RealURL + tt_news + 404 不起作用

> ID：11580855
> 
> 赞同：0
> 
> 时间：2012-07-20T13:56:21.343
> 
> 标签：http-status-code-404, typo3, tt-news, realurl

我想给 tt_news 的 SINGLE 视图所在的页面（id=57）一个特殊的 URL，所以我用它来配置 RealURL：

```
 'fixedPostVars' => array(
        '57' => array(
            array(
                'GETvar' => 'tx_ttnews[tt_news]',
                'lookUpTable' => array(
                    'table' => 'tt_news',
                    'id_field' => 'uid',
                    'alias_field' => 'title',
                    'addWhereClause' => ' AND NOT deleted',
                    'useUniqueCache' => 1,
                    'useUniqueCache_conf' => array(
                        'strtolower' => 1,
                        'spaceCharacter' => '-',
                    ),
                ),
            ),
        ),
    ), 
```

问题是 404 中的重定向不起作用：

[http://www.mypage.com/blog/artikel/asdasd](http://www.mypage.com/blog/artikel/asdasd) ---> 工作正常。转到第 404 页。

[http://www.mypage.com/blog/artikel/whatever/whateveragain](http://www.mypage.com/blog/artikel/whatever/whateveragain) ---> 工作正常。转到第 404 页。

[http://www.mypage.com/blog/artikel/whatever](http://www.mypage.com/blog/artikel/whatever) ---> 不会重定向到 404。我得到“没有给出 news_id”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:28:07.600

这对于`TYPO3`该页面存在并包含插件是正常的，因此不能将其视为不存在它并不关心扩展程序没有获得所有必需的参数。

有两个解决方案，我推荐的一个是编写将在页面呈现过程开始时运行的小扩展，将检查参数是否存在以及它是否指向现有且未禁用的`tt_news`记录，在其他情况下它应该返回完全限定的 404 状态并重定向到您的 404 页面 - 这将有利于[seo](/questions/tagged/seo "显示标记为“seo”的问题")的目的。

```
function main($content, $conf) {

    $newsParams = t3lib_div::_GET('tx_ttnews');
    if (is_array($newsParams) && intval($newsParams['tt_news']) > 0) {
        $foundItems = $GLOBALS['TYPO3_DB']->exec_SELECTgetRows('uid', 'tt_news', 'deleted=0 AND hidden=0 AND uid=' . intval($newsParams['tt_news']));

        if (count($foundItems) == 1) {
            return null; // if news exists and is available - return null
        }
    }

    // If above condition aren't met, set redirect header
    // return null after that to avoid futher code processing

    header('Location: http://yourdomain.tld/404.html');
    return null;

} 
```

在 TypoScript 中仅在 page=57 上添加这一行：

```
page.1 < plugin.tx_yourext_pi1 
```

## 其他解决方案

更简单，它只是检查 SINGLE 视图所需的 URL 中的参数：&tx_ttnews[tt_news]=123 是否存在并且大于 0，如果不只是将重定向标签添加到页面的`<head>`部分（只是从我的头顶写，所以自己调试一下，请）

在您的页面上添加`57`模块并在设置使用[条件下](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/4/)检查参数是否存在：`extension teamplate``Template`

```
[globalVar = GP:tx_ttnews|tt_news < 1]
  page.headerData.1 = TEXT
  page.headerData.1.value = <meta http-equiv="refresh" content="0;url=http://www.mypage.com/404">
[global] 
```

# android - 对非静态字段的静态引用（android）

> ID：11580857
> 
> 赞同：0
> 
> 时间：2012-07-20T13:56:28.277
> 
> 标签：android, listview, static, android-mapview, non-static

我正在尝试在列表中显示我在 MapView 中创建的标记。因此，在 CustomPinpoint 类中，我创建了一个覆盖站点的 Arraylist，我在 Mapview 中使用它来显示标记，并在我的 Listview 中使用它来总结不同的标记。然而，当尝试设置列表视图时，我得到了无法对非静态字段进行静态引用的错误。我明白为什么会出现这个错误，但我不明白或不知道如何解决这个问题。（顺便说一句，创建标记数据库是保存标记的最佳方式吗？还是其他更好的方法？）

问候，

主.java

```
package com.lars.pinpoint;

import java.io.IOException;

import java.util.List;
import java.util.Locale;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;
import com.lars.pinpoint.R;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.view.MotionEvent;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TabHost;
import android.widget.TextView;
import android.widget.Toast;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabContentFactory;

public class Main extends MapActivity implements OnTabChangeListener{
    /** Called when the activity is first created. */
    private static final String LIST_TAB_TAG = "List";
    private static final String MAP_TAB_TAG = "Map";
    MapView map;
    ListView listView;
    TabHost tabHost;
    long start;
    long stop;
    int x, y;
    MyLocationOverlay compass;
    MyLocationOverlay MyLoc;
    MapController controller;
    GeoPoint touchedPoint;
    Drawable d;
    List<Overlay> overlayList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tabHost = (TabHost) findViewById(android.R.id.tabhost);
        tabHost.setup();

        // setup list view
        listView = (ListView) findViewById(R.id.list);
        listView.setEmptyView((TextView) findViewById(R.id.empty));

        // create some dummy coordinates to add to the list

        listView.setAdapter(new ArrayAdapter<OverlayItem>(this, android.R.layout.simple_list_item_1, CustomPinpoint.pinpoints));

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                GeoPoint geoPoint = ((OverlayItem) listView.getAdapter().getItem(position)).getPoint();
                if(geoPoint != null) {

                    map.getController().animateTo(geoPoint);

                    tabHost.setCurrentTab(1);

            }

            }
        });

        map = (MapView) findViewById(R.id.mapview);
        map.setBuiltInZoomControls(true);
        map.postInvalidate();

        Touch t = new Touch();
        overlayList = map.getOverlays();
        overlayList.add(t);
        compass = new MyLocationOverlay(Main.this, map);
        overlayList.add(compass);
        controller = map.getController();

        d = getResources().getDrawable(R.drawable.ic_launcher);

        MyLoc = new MyLocationOverlay(Main.this, map);
        overlayList.add(MyLoc);
        map.postInvalidate();
        MyLoc.runOnFirstFix(new Runnable() {
            public void run() {
                map.getController().animateTo(MyLoc.getMyLocation());
                }
        }); 

        tabHost.addTab(tabHost.newTabSpec(LIST_TAB_TAG).setIndicator("List").setContent(new TabContentFactory() {
            public View createTabContent(String arg0) {
                return listView;
            }
        }));
        tabHost.addTab(tabHost.newTabSpec(MAP_TAB_TAG).setIndicator("Map").setContent(new TabContentFactory() {
            public View createTabContent(String arg0) {
                return map;
            }
        }));

        //HACK to get the list view to show up first,
        // otherwise the mapview would be bleeding through and visible
        tabHost.setCurrentTab(1);
        tabHost.setCurrentTab(0);

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        compass.disableCompass();
        super.onPause();
        MyLoc.disableMyLocation();
        finish();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        compass.enableCompass();
        super.onResume();
        MyLoc.enableMyLocation();

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    class Touch extends Overlay {
        public boolean onTouchEvent(MotionEvent e, MapView m) {
            if (e.getAction() == MotionEvent.ACTION_DOWN) {
                start = e.getEventTime();
                x = (int) e.getX();
                y = (int) e.getY();
                touchedPoint = map.getProjection().fromPixels(x, y);

            }
            if (e.getAction() == MotionEvent.ACTION_UP) {
                stop = e.getEventTime();
            }
            if (stop - start > 1500) {
                AlertDialog alert = new AlertDialog.Builder(Main.this).create();
                alert.setTitle("Pick an option.");

                alert.setButton(DialogInterface.BUTTON_POSITIVE,"Place a pinpoint.",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int which) {
                                // TODO Auto-generated method stub

                                OverlayItem overlayItem = new OverlayItem(touchedPoint, "Pinpoint", "2nd String");
                                CustomPinpoint custom = new CustomPinpoint(d, Main.this);
                                custom.insertPinpoint(overlayItem);
                                overlayList.add(custom);

                            }
                        });
                alert.setButton(DialogInterface.BUTTON_NEUTRAL,"Get address.",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int which) {
                                // TODO Auto-generated method stub

                            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                                try{

                                    List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() /1E6, touchedPoint.getLongitudeE6()/1E6, 1);                          

                                    if (address.size() > 0){
                                        String display = "";                                                
                                        for (int i = 0; i < address.get(0).getMaxAddressLineIndex(); i++){

                                            display += address.get(0).getAddressLine(i) + "\n";
                                        }
                                        Toast t3 = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                                        t3.show();
                                    }

                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }finally{

                                }

                            }
                        });
                alert.setButton(DialogInterface.BUTTON_NEGATIVE,"Toggle View", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub

                        if (map.isSatellite()){
                            map.setSatellite(false);

                        }else{

                            map.setSatellite(true);
                        }

                    }
                });
                alert.show();
                return true;
            }

            return false;
        }
    }

     public void gpsCurrentLocation()
     {

         GeoPoint p = MyLoc.getMyLocation();
         map.getController().animateTo(p);

     }

    // Menu XML file (menu.xml)
     @Override
     public boolean onCreateOptionsMenu(Menu menu)
     {
     MenuInflater menuInflater = getMenuInflater();
     menuInflater.inflate(R.menu.activity_main, menu);
     return true;
     }

     /**
     * Event Handling for Individual menu item selected
     * Identify single menu item by it's id
     * */

     @Override
     public boolean onOptionsItemSelected(MenuItem item)
     {

     switch (item.getItemId())
     {
     case R.id.my_location:
     Toast.makeText(Main.this, "Moving To Current location", Toast.LENGTH_SHORT).show();
     gpsCurrentLocation();

     return true;

     default:
     return super.onOptionsItemSelected(item);
     }
     }

    public void onTabChanged(String tabId) {
        // TODO Auto-generated method stub

    }

} 
```

CustomPinpoint.java

```
package com.lars.pinpoint;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class CustomPinpoint extends ItemizedOverlay<OverlayItem>{

public ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();

public CustomPinpoint(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}

public CustomPinpoint(Drawable m, Context context) {
    // TODO Auto-generated constructor stub
    this(m);
    Context c = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void insertPinpoint(OverlayItem item){
    pinpoints.add(item);
    this.populate();
} 
```

}

PS。我很抱歉这个愚蠢的问题，但这对我来说都是比较新的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:04:22.920

非静态字段属于类的每个实例，您不能直接从类中访问它。

所以你需要：

*   实例化您的类并从结果对象访问该字段。在这种情况下，制作单例可能很有用。
*   或者将代码的调用部分声明为非静态的。

# php - PDO 新手，如何正确编写此 SQL？

> ID：11580864
> 
> 赞同：0
> 
> 时间：2012-07-20T13:56:45.253
> 
> 标签：php, mysql, pdo

我是 PDO 的新手，我的问题是，是否应该在将 $input 添加到查询之前对其进行转义？我应该如何最好地实施它？

```
$input= $_POST['time']; //2012-07-21 17:00:00

foreach($db->query('SELECT * FROM events WHERE TIMESTAMPDIFF( HOUR , TIME, $input ) < 2') as $row) {
    echo $row['name'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:17:51.397

在您的情况下，尽管您应该使用准备好的语句，但您不会使用 PDO::quote()，这是您切换到 mysqli 或 PDO 的主要原因之一。

```
$db = new PDO('mysql:host=localhost;dbname=db', 'user','pass');

$query = $db->prepare('SELECT * FROM events WHERE TIMESTAMPDIFF( HOUR , TIME, :input ) < 2');
$query->bindValue(":input", $input, PDO::PARAM_INT);
$query->execute();
while($row = $query->fetch(PDO::FETCH_ASSOC))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:17:35.810

我同意真理。

虽然要回答您的问题 mysql_real_escape_string() 需要一个活动连接才能工作。如果您没有打开任何与数据库的连接，它将无法工作，否则它将采用最后打开的连接，除非您明确指定连接。

# android - GooglePlay 类似的界面

> ID：11580865
> 
> 赞同：1
> 
> 时间：2012-07-20T13:56:56.583
> 
> 标签：android, android-layout

这是什么功能？

![在此处输入图像描述](../Images/692307361dd7876483146bc345ea51a2.png)

是 FragmentPagerAdapter 吗？API 10 是否有任何预定义的样式/功能可以实现相同的功能？请给我一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:08:30.040

那是 a [`PagerTitleStrip`](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)which 与 a 一起使用[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)（所以是的，`FragmentPagerAdapter`如果你想使用，你的想法是正确的`Fragments`- 你应该使用它，但是当我使用它时我很懒）。只需像这样添加`PagerTitleStrip`您的孩子`ViewPager`：

```
<com.android.support.v4.view.ViewPager
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
    <com.android.support.v4.view.PagerTitleStrip
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="10dip"
        />
</com.android.support.v4.view.ViewPager> 
```

在您`PagerAdapter`编写的内容中，请务必覆盖该`getPageTitle()`方法。Android 应该为您处理所有其他事情，但如果您想要显示的自定义字体以及显示的字体颜色和背景，则必须手动设置样式。

它包含在支持库中（在 Eclipse 中右键单击您的项目，选择 Android 工具 > 添加兼容性包）并且一直兼容到 API 级别 4，因此您在 API 级别 10 中使用它不会有任何问题。如果您只需要滑动标题功能，那么链接的 JakeWharton 库就太过分了——它是在 Google 将其添加`PagerTitleStrip`到兼容性库之前开发的——但确实有一些额外的样式可供您在需要时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:05:25.770

如果您愿意，Jake Wharton 有 ViewPagerIndicator - 为低于 3.0 的版本提供支持。

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

# javascript - 防止 Rails 远程调用的 JQuery 函数

> ID：11580866
> 
> 赞同：0
> 
> 时间：2012-07-20T13:56:57.187
> 
> 标签：javascript, jquery, ruby-on-rails, jqmodal

我的页面上有一个链接，它可以进行 AJAX 远程调用，它周围`passcheck_path`的`p`标签提供了激活覆盖整个页面的 JQuery 模式框的功能。

```
<p class="right blackout">
  <%= link_to "blank screen", passcheck_path, :remote => true %>
</p> 
```

JS如下：

```
$().ready( function() {
    $('.blackoutwindow').jqm({
        modal: true,
        trigger: '.blackout',
        overlay: 100
    });
}); 
```

当我单击链接时，会出现模式，但根本不会发生远程调用。但是，当我删除`p`标签时，远程调用可以正常工作（但显然模式不会触发）。我真的不知道它为什么会这样，但我认为 javascript 覆盖了某些东西？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:34:02.133

这您使用[jqModal 插件取消绑定链接上定义的所有点击处理程序，也包括 rails 的那些。](http://dev.iceburg.net/jquery/jqModal/)

因此，要么将插件切换到[另一个](http://technology-code.blogspot.ch/2011/02/best-jquery-modal-box-plugin.html)插件，要么将[jqueryui 模态对话框](http://jqueryui.com/demos/dialog/)切换到jqModal，因为 jqModal 似乎已经过时了，或者你可以通过使用 jqModal 的 onShow 回调远程调用来实现一个工作区：

```
$('.blackoutwindow').jqm({
    modal: true,
    onShow: function() {
        $.get($(this).attr('href')); // DIY Implementation of the remote call
    },
    trigger: '.blackout',
    overlay: 100
}); 
```

**[看看这个小提琴看看问题和解决方案](http://jsfiddle.net/xQqSq/)**

# spring - 了解所有实体共有的 Spring Data JPA 存储库

> ID：11580867
> 
> 赞同：2
> 
> 时间：2012-07-20T13:56:59.807
> 
> 标签：spring, repository, spring-data-jpa

我参考了以下 Spring 文档：[http ://static.springsource.org/spring-data/data-jpa/docs/1.1.0.RELEASE/reference/html/#repositories.custom-behaviour-for-all -存储库](http://static.springsource.org/spring-data/data-jpa/docs/1.1.0.RELEASE/reference/html/#repositories.custom-behaviour-for-all-repositories)

如上所述，我试图了解 Jpa 自定义存储库背后的逻辑。

我的猜测是我必须创建一个扩展**MyRepository接口的****UserRepository**接口（在我的情况下，**User**是特定实体），然后为它提供一个具有适当参数类型的实现。然后，每个实体都有一个存储库，每个存储库共享**MyRepository**接口中定义的许多常用方法。

 ****这提出了几个问题：

一：**如果我跨多个实体执行操作怎么办：我使用哪个存储库？** 二：**Spring Data Jpa 是否允许没有任何类型参数的存储库？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:50:45.437

> 如果我跨多个实体执行操作怎么办：我使用哪个存储库？

[spring-data-jpa](/questions/tagged/spring-data-jpa "显示标记为“spring-data-jpa”的问题")引入了“*每个实体的 DAO* ”方法（不一定是最好的方法）。如果您需要跨多个实体执行操作，请使用服务层。

> Spring Data Jpa 是否允许没有任何类型参数的存储库？

不，你能建议一些用例吗？每个 DAO 都应该为一个实体提供强大的、类型安全的接口。如果您需要更灵活的 DAO，也许您应该探索 JPA 中的继承？****

# java - 获取 Apache 的 HttpPost 中发送的参数

> ID：11580869
> 
> 赞同：2
> 
> 时间：2012-07-20T13:57:16.163
> 
> 标签：java, android, apache, post

我正在向我的服务器发送一个 json 字符串，有时对于 HttpGet 来说太多了，所以我正在使用 HttpPost。我像这样添加了字符串数据：

```
URL Url = new URL(url);
URI uri = new URI(Url.getProtocol(), Url.getHost(),Url.getPath(), Url.getQuery(), null);
Log.i("url_encoded", uri.toString());
HttpPost post = new HttpPost(uri);

List<NameValuePair> parameters = new ArrayList<NameValuePair>(); 
parameters.add(new BasicNameValuePair("data", touchPointsJSON));
post.setEntity(new UrlEncodedFormEntity(parameters));

Log.i("post URI", ""+post.getURI());
client.execute(post); 
```

我遇到的问题是我看不到在`client.execute(post)`. 我想这样做，以便即使对于 POST 请求，我也可以找出数据字符串是否太多。
关于如何实现这一点的任何想法？

# javascript - JS 调试器是否暂停整个 JS 事件循环？

> ID：11580872
> 
> 赞同：5
> 
> 时间：2012-07-20T13:57:17.293
> 
> 标签：javascript, debugging, javascript-debugger

我有一些非常奇怪的行为。我有以下 JQuery：

```
myElement.fadeOut(100); 
```

存在某种竞争条件，因此元素最终不会被隐藏。如果我在该行上放置一个调试器并单步执行代码，它工作正常并且元素淡出并被隐藏。[称它为](http://en.wikipedia.org/wiki/Heisenbug)Heisenbug 。

**我的问题不是关于比赛条件*本身***。我想知道考虑到 JavaScript 运行时的性质，这怎么可能发生。据我了解，以下谓词是正确的：

1.  fadeOut() 由 JQuery animate() 实现
2.  animate() 由一系列`setTimeout()`调用实现
3.  `setTimeout()`安排在某个时间点执行队列中的函数
4.  当事件到达队列的开头时，函数被执行。
5.  只有一个事件循环，按顺序执行。
6.  在任何给定的时间点，只有一个通过调用堆栈的函数/路径正在执行。

鉴于我正在调试器中单步执行一个函数，因此必须暂停执行，并且不能执行其他函数。

我看不出在这种情况下怎么可能出现竞争条件。**您能否建议在调试代码和非调试代码之间的执行有什么不同？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:07:06.000

您的要点是正确的，除了使用[requestAnimationFrame()](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)而不是`setTimeout()`浏览器是否支持它。

`myElement`例如，如果调试会话由 AJAX 调用异步创建，但`fadeOut()`在不等待请求完成的情况下被调用，则调试会话可能会对代码的行为产生影响。

在这种情况下，手动单步执行代码可以为请求返回和调用之前创建的元素提供足够的时间`fadeOut()`，而在正常情况下请求不会返回。

# python - 对掩码数组的子数组进行有效平均

> ID：11580873
> 
> 赞同：1
> 
> 时间：2012-07-20T13:57:21.050
> 
> 标签：python, numpy

> **可能重复：**
> [平均分组 2D numpy 数组](https://stackoverflow.com/questions/4624112/grouping-2d-numpy-array-in-average)

我需要通过对原始数组的 8x8 元素块进行平均来对形状 (2880, 5760) 的二维数组进行“下采样”以形成 (360, 720)。哪种方法是使用 NumPy 的有效方法？

**编辑** 我只是意识到我需要在 masked_arrays 上执行此操作，因此链式 mean() 不会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:04:37.663

首先引入两个额外的轴，然后沿这些轴采取手段。如果`X`是您的数据：

```
X.reshape(360, 8, 720, 8).mean(axis=3).mean(axis=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:45:17.550

这也是适用于掩码数组的方式

```
import numpy as np, numpy.random
nx = 100
ny = 101
bx = 3
by = 4
arr = np.random.uniform(size = (nx * bx, ny * by))
arr = np.ma.masked_array(arr,arr<.1)
rebinarr = np.swapaxes(arr.reshape(nx, bx, ny, by), 1, 2).reshape(nx, ny, bx * by).mean(axis=2)
print rebinarr.shape
>> (100,101) 
```

# python - 使用 Python 请求将文件放入 S3

> ID：11580874
> 
> 赞同：3
> 
> 时间：2012-07-20T13:57:21.230
> 
> 标签：python, amazon-s3, boto, python-requests

我有这个使用该`generate_url(300, 'PUT', ...)`方法生成的 URL，我想使用[请求库](http://python-requests.org/)将文件上传到其中。

这是我一直在使用的代码：`requests.put(url, data=content, headers={'Content-Type': content_type})`，我也尝试了一些变体，但我得到的错误总是一样的。

我每次都从 S3 收到 403 -`SignatureDoesNotMatch`错误，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-26T14:07:39.193

使用`boto3`，这是如何生成上传 url 和其中的`PUT`一些数据：

```
session = boto3.Session(aws_access_key_id="XXX", aws_secret_access_key="XXX")
s3client = session.client('s3')
url = s3client.generate_presigned_url('put_object', Params={'Bucket': 'mybucket', 'Key': 'mykey'})

requests.put(url, data=content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:02:44.473

如果您的存储桶不是公开写入，S3 需要身份验证令牌。请检查令牌。

我建议你直接使用[boto](http://code.google.com/p/boto/)。

```
bucket.new_key()
key.name = keyname
key.set_contents_from_filename(filename, {"Content-Type": content_type})
# optional if file public to read
bucket.set_acl('public-read', key.name) 
```

另请检查您是否添加了 Content-Length 标头。它是必需的并参与身份验证哈希计算。

# c++ - 列出目标文件中未定义的引用

> ID：11580875
> 
> 赞同：4
> 
> 时间：2012-07-20T13:57:36.063
> 
> 标签：c++, c, gcc, g++

所以我正在用 g++ 构建一堆模块。我用 -c 打了一些源文件来生成 .o 目标文件。然后我在某些时候使用 ld 的 -r 标志组合目标文件以生成更多 .o 文件。在这个过程中的某个地方，没有包含一个函数。所以我想做的是找到一个快速工具，它可以查看 .o 文件并告诉哪些引用当前未定义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T14:00:48.827

在 Linux 上，你会使用`objdump -t`它。`*UND*`在其输出中寻找。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T14:00:30.300

`nm`在 Linux/Unix 上尝试该命令。在输出中，“U”表示符号未定义。

另请参阅：[nm 和 objdump 之间的区别](https://stackoverflow.com/questions/7219845/difference-between-nm-and-objdump)。

# python - hadoop，python：命令没有从脚本运行，也没有失败，但从命令行运行良好

> ID：11580878
> 
> 赞同：1
> 
> 时间：2012-07-20T13:57:44.783
> 
> 标签：python, hadoop, hadoop-streaming

我有一个运行 python 命令的 python 程序

```
WARNING:root:executing - echo ~/Downloads/dw/hadoop_out/hadoop_out.2012-07-20 > /tmp/hadoop_load_file.tmp
WARNING:root:hadoop output file path written to /tmp/hadoop_load_file.tmp
WARNING:root:executing - /usr/local/hadoop/bin/hadoop dfs -cat ~/Downloads/dw/proposalLoader_out/part-00000 > ~/Downloads/dw/hadoop_out/hadoop_out.2012-07-20
WARNING:root:hadoop path exists, removing - /usr/local/hadoop/bin/hadoop dfs -test -d ~/Downloads/dw/proposalLoader_in
Deleted hdfs://master:54310/home/hduser/Downloads/dw/Loader_in
test: File does not exist: /home/hduser/Downloads/dw/Loader_out
WARNING:root:executing - /usr/local/hadoop/bin/hadoop dfs -mkdir ~/Downloads/dw/proposalLoader_in
WARNING:root:executing - /usr/local/hadoop/bin/hadoop dfs -copyFromLocal ~/Downloads/dw/load_input.txt ~/Downloads/dw/Loader_in 
```

但是当我看到里面的东西时，我什么`HDFS`也得不到

```
$ hadoop dfs -ls ~/Downloads/dw/Loader_in
Found 1 items
-rw-r--r--   3 hduser supergroup          0 2012-07-20 06:49 /home/hduser/Downloads/dw/Loader_in/load_input.txt 
```

当我从 运行相同的命令时`shell`，它会执行并获取数据`HDFS`

```
$ /usr/local/hadoop/bin/hadoop dfs -copyFromLocal ~/Downloads/dw/load_input.txt ~/Downloads/dw/Loader_in

$ hadoop dfs -ls ~/Downloads/dw/Loader_in
Found 1 items
-rw-r--r--   3 hduser supergroup       2311 2012-07-20 06:50 /home/hduser/Downloads/dw/Loader_in 
```

我不知道为什么我会看到这种行为，执行命令的代码如下

```
def execute(command):
    if not command:
        return (-1, 'command can not be empty or null')
    return subprocess.call(command, shell=True) 
```

# objective-c - 尝试对应用程序进行单元测试时架构 x86_64 的未定义符号

> ID：11580879
> 
> 赞同：1
> 
> 时间：2012-07-20T13:57:45.407
> 
> 标签：objective-c, xcode, macos, xcode4.3

尝试运行单元测试时，我在 XCode 中遇到错误。有任何想法吗？

我尝试将构建设置中的框架搜索路径更改为 $(SDKROOT)/Developer/Library/Frameworks $(DEVELOPER_LIBRARY_DIR)/Frameworks

但这并没有改变什么。

```
ld: warning: directory not found for option '-F/Applications/Xcode'

ld: warning: directory not found for option '-
F4.3.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/Developer/Library/Frameworks'

ld: warning: directory not found for option '-F/Applications/Xcode'

ld: warning: directory not found for option '-F4.3.2.app/Contents/Developer/Library/Frameworks'

ld: warning: ignoring file /Applications/Xcode 4.3.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/Library/Frameworks//SenTestingKit.framework/SenTestingKit, file was built for unsupported file format which is not the architecture being linked (x86_64)

Undefined symbols for architecture x86_64:
  "_STComposeString", referenced from:
      -[AddressBookFrameworkSyncHelperTest testAddingAPersonToGroupsFromAVcard] in AddressBookFrameworkSyncHelperTest.o
      -[SyncTesting testExample] in SyncTesting.o
  "_OBJC_CLASS_$_SenTestCase", referenced from:
      _OBJC_CLASS_$_AddressBookFrameworkSyncHelperTest in AddressBookFrameworkSyncHelperTest.o
      _OBJC_CLASS_$_SyncTesting in SyncTesting.o
  "_OBJC_CLASS_$_AddressBookFrameworkSyncHelper", referenced from:
      objc-class-ref in AddressBookFrameworkSyncHelperTest.o
     (maybe you meant: _OBJC_CLASS_$_AddressBookFrameworkSyncHelperTest)
  "_OBJC_METACLASS_$_SenTestCase", referenced from:
      _OBJC_METACLASS_$_AddressBookFrameworkSyncHelperTest in AddressBookFrameworkSyncHelperTest.o
      _OBJC_METACLASS_$_SyncTesting in SyncTesting.o

ld: symbol(s) not found for architecture x86_64

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:54:41.397

These error messages show the problem:

> ld: warning: directory not found for option '-F/Applications/Xcode'
> 
> ld: warning: directory not found for option '-F4.3.2.app/Contents/Developer/Library/Frameworks'

Clearly you've got "/Applications/Xcode" and "4.3.2.app/Contents/Developer/Library/Frameworks" on your frameworks paths separately, instead of "/Applications/Xcode 4.3.2.app/Contents/Developer/Library/Frameworks".

If this is something you did, you're probably missing quotes somewhere. Maybe just doing the exact same thing you tried, but with quotes around it, will work?

If it's something that Xcode is doing automatically, Apple's missing quotes somewhere, and the workaround is probably to rename your "Xcode 4.3.2.app" to something without spaces in it.

But there may be a second problem here as well:

> ld: warning: ignoring file /Applications/Xcode 4.3.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/Library/Frameworks//SenTestingKit.framework/SenTestingKit, file was built for unsupported file format which is not the architecture being linked (x86_64)

In this case, the quotes are right, and it's finding the framework… but apparently you've only got the 32-bit (i386) build installed, not the 64-bit (x86_64) one that you need.

I'm also a bit curious where this came from in the first place, as when I look at the 10.6 SDK in my Xcode 4.3.2, there's no framework called SenTestingKit.framework. Which implies that you may have hacked up your Xcode install in various ways, and the right solution might be to uninstall, reinstall, and do things properly. But it's possible this is some additional install from within Xcode (or from developer.apple.com) that you've installed and I haven't.

# iphone - 使用magicrecord替代fetchedResultsController代码？

> ID：11580881
> 
> 赞同：8
> 
> 时间：2012-07-20T13:57:52.007
> 
> 标签：iphone, ios, uitableview, core-data, magicalrecord

我正在将我的应用程序的核心数据移至 Magical Record。为了更新 UITableView，我以前有这个代码：

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Entry" inManagedObjectContext:[CoreDataStore mainStore].context];
    [fetchRequest setEntity:entity];

    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"creationDate" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Use the sectionIdentifier property to group into sections.
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[CoreDataStore mainStore].context sectionNameKeyPath:@"sectionIdentifier" cacheName:@"Root"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    self.fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

我应该保留这段代码，还是应该使用神奇的记录以不同的方式工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T00:49:20.557

你可以这样使用：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    _fetchedResultsController = [NSManagedObject fetchAllGroupedBy:nil withPredicate:nil sortedBy:@"date" ascending:NO delegate:self];

    return _fetchedResultsController;
} 
```

你必须`NSManagedObject`用你的子类替换。

[您可以在此处](https://github.com/magicalpanda/MagicalRecord/blob/master/MagicalRecord/Categories/NSManagedObject/NSManagedObject+MagicalFinders.h)查看其他选项（标题底部）。

# c# - 新创建的对话框上的 InvokeRequired

> ID：11580882
> 
> 赞同：1
> 
> 时间：2012-07-20T13:58:06.010
> 
> 标签：c#, .net, winforms

我们的应用程序中有以下方法来显示对话框。该方法从 UI 线程和非 UI 线程调用。是否可以在 messageDialog 上调用 InvokeRequired 以确保对话框将显示在 UI 线程上？

```
public static DialogResult ShowMessageDialog(MessageInfo messageInfo,ButtonFlags flags,IconType iconId,HorizontalAlignment btnAlignment,bool topMost)
{
DialogResult retDialogResult = DialogResult.None;

MessageDialog messageDialog = new MessageDialog(messageInfo.GetLanguageBasedFieldValue(MessageInfoField.Message), iconId);
messageDialog.TopMost = topMost;

// Initialize the layout of Message Dialog.
messageDialog.Initialize();
retDialogResult = messageDialog.ShowDialog();

return retDialogResult;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:26:48.873

不，`InvokeRequired`永远不会返回 true，因为`MessageDialog`它是在您正在执行的线程上构造的。此外，`InvokeRequired`在创建控件的句柄之前将始终返回 false，直到稍后才会发生（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)）。

要么确保你总是`ShowMessageDialog`从 UI 线程调用，要么有办法`ShowMessageDialog`进入 UI 线程，例如存储一个`ISynchronizeInvoke`. 我认为前者是一个更好的解决方案。

# python - python中的执行时间

> ID：11580884
> 
> 赞同：0
> 
> 时间：2012-07-20T13:58:11.730
> 
> 标签：python

通过 python 程序，向特定设备发送命令，该设备代表命令响应。现在我必须计算发送和接收之间的时间（意味着需要多少时间来响应命令）。

前任。

```
设备 IP - 10.0.0.10
通过我们的本地系统将“L004”命令传输到 10.0.10。
从 10.0.0.10 收到“L”响应。

```

所以现在我必须计算开始时间和结束时间之间的时间差。

请提供一个我可以计算的API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:59:59.350

```
import time

t1 = time.time()

# some time-demanding operations

t2 = time.time()

print "operation took around {0} seconds to complete".format(t2 - t1) 
```

`time.time()`将当前的 unix 时间戳作为浮点数返回。将此数字存储在代码的给定点并计算差异。您将以秒（和分数）为单位获得时差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:01:58.297

[`timeit`](http://docs.python.org/library/timeit.html)标准模块可以轻松完成此类任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-18T19:12:17.527

只需使用“timeit”模块。它适用于 Python 2 和 Python 3

```
import timeit

start = timeit.default_timer()
#ALL THE PROGRAM STATEMETNS
stop = timeit.default_timer()
execution_time = stop - start

print("Program Executed in "+execution_time) #It returns time in sec 
```

它以秒为单位返回，您可以获得执行时间。很简单，但您应该在启动程序执行的 Main Function 中编写这些。如果即使出现错误也想获得执行时间，那么将参数“Start”带到它并在那里计算

`def sample_function(start,**kwargs): try: #your statements except: #Except Statements stop = timeit.default_timer() execution_time = stop - start

# sql - 从 XML 数据类型中获取字段列表

> ID：11580885
> 
> 赞同：0
> 
> 时间：2012-07-20T13:58:15.310
> 
> 标签：sql, sql-server-2005, sqlxml

给定这样的表结构：

```
DECLARE @Employees TABLE(EmployeeID INT ,EmployeeDetails XML)

INSERT INTO @Employees( EmployeeID ,EmployeeDetails )
VALUES ( 1 ,'<Employee><EmployeeDetails><EmployeeName> Priyanka </EmployeeName><Age> 24 </Age><Address> Argentina</Address></EmployeeDetails></Employee>')

INSERT INTO @Employees
( EmployeeID ,EmployeeDetails )
VALUES ( 2 ,'<Employee><EmployeeDetails><EmployeeName> Sarkar </EmployeeName><Age> 28 </Age><Address> Australia</Address></EmployeeDetails></Employee>') 
```

如何创建查询以获取 EmployeeDetails 标记下的所有标记名称（不是值）的列表？（假设所有记录的结构都相同）。

因此，期望的结果是：

```
EmployeeName
Age
Address 
```

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:22:23.217

尝试这样的事情：

```
SELECT
    DISTINCT T.C.value('local-name(.)[1]', 'varchar(100)')
FROM @Employees
CROSS APPLY EmployeeDetails.nodes('Employee/EmployeeDetails/*') AS T(C) 
```

# jsp - jsp页面中的tomcat7和EL；pageContext.request.contextPath 为空？

> ID：11580886
> 
> 赞同：5
> 
> 时间：2012-07-20T13:58:18.550
> 
> 标签：jsp, el, tomcat7

我的 JSP 页面包含：

```
<script>
    var bt_wd40_appurl = "${pageContext.request.contextPath}";
</script> 
```

视图/源显示值的“”。到目前为止我没有发现任何错误。

我的 web.xml 指定版本 2.5。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T14:34:02.833

如果您在 ROOT 上部署 webapp，它将为空。另请参阅它的[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29)（重点是我的）：

> ## 获取上下文路径
> 
> `java.lang.String getContextPath()`
> 
> 返回请求 URI 中指示请求上下文的部分。上下文路径始终位于请求 URI 的首位。路径以“/”字符开头，但不以“/”字符结尾。**对于默认（根）上下文中的 servlet，此方法返回“”。**容器不解码此字符串。

您确定您*确实*将其部署在上下文路径上吗？请注意，上下文路径不包含 URL 的方案/域部分，它是域相对 URL。

# sql - EXISTS 中的 CASE 语句

> ID：11580888
> 
> 赞同：1
> 
> 时间：2012-07-20T13:58:20.690
> 
> 标签：sql, sql-server-2008, case, exists

我需要创建一个如下所示的查询：

> 从 SomeTable B
> WHERE EXISTS中选择 attr
>     （当 B.some_attr = 0
>         THEN（从 C WHERE Bz = z 选择 x）
>      时 B.some_attr = 1
>         THEN（从 D WHERE Bz = x）选择 x）
>      END）

但是 SQL Server 拒绝执行这会带来一些语法错误。
如何修改此查询以使其正常工作？

**编辑：**我正在添加错误：

> 消息 156，级别 15，状态 1，第 4 行关键字“CASE”附近的语法不正确。
> 消息 156，级别 15，状态 1，第 6 行 关键字“WHEN”附近的语法不正确。
> 消息 102，级别 15，状态 1，第 8 行 ')' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:07:15.020

试试这个：

```
SELECT A 
FROM B 
WHERE 
     CASE 
     WHEN B.some_attr = 0 AND EXISTS(SELECT x FROM C WHERE B.z = z) THEN 1
     WHEN B.some_attr = 1 AND EXISTS(SELECT x FROM D WHERE B.z = x) THEN 1
     END = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:04:48.407

试试这个：

```
SELECT A
FROM B
WHERE 
    (CASE WHEN B.some_attr = 0
          THEN (SELECT x FROM C WHERE B.z = z)
          WHEN B.some_attr = 1
          THEN (SELECT x FROM D WHERE B.z = x)
     END) is not null 
```

这假设子查询返回一行。如果没有，只需输入 max(x) 而不是 x。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:08:24.803

我认为这也应该有效：

```
SELECT attr 
FROM SomeTable B 
WHERE EXISTS (
    SELECT 1 FROM C WHERE B.some_attr = 0 AND B.z = z UNION ALL
    SELECT 1 FROM D WHERE B.some_attr = 1 AND B.z = x
) 
```

# classloader - Jboss 中的日志级别为 7 个类加载器

> ID：11580890
> 
> 赞同：0
> 
> 时间：2012-07-20T13:58:23.780
> 
> 标签：classloader, jboss7.x

如何将 Jboss 中的类加载器的日志级别更改为 7？

作为旁注；我在 Jboss 5 及以下版本中找到了有关如何执行此操作的信息，但由于 Jboss 7 中的类加载和日志记录已完全改变，我无法弄清楚如何执行此操作。

[https://community.jboss.org/wiki/EnableClassloaderLogging](https://community.jboss.org/wiki/EnableClassloaderLogging)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T14:12:16.373

在启动脚本中将以下内容添加到 JAVA_OPTS。

```
-verbose:class 
```

以下是您的 Jboss 配置文件（例如standalone.xml）。

```
<profile>
    <subsystem xmlns="urn:jboss:domain:logging:1.1">
        <logger category="org.jboss.as.deployment">
            <level name="DEBUG"/>
        </logger>
    </subsystem>
</profile> 
```

# smalltalk - 如何在 Squeak 中启动全局变量

> ID：11580901
> 
> 赞同：3
> 
> 时间：2012-07-20T13:59:01.953
> 
> 标签：smalltalk, squeak

我不是指类变量。我想要一个可以在任何地方使用的变量。我应该如何启动它？

我知道一种方法是`Smalltalk at: #variableName put: theValue.`，但我不想在创建它后立即赋予它价值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:11:37.990

这应该可以解决问题：

> Smalltalk 在：#VariableName 放：nil

当您在 Smalltalk 字典中创建全局变量时，您正在创建一个具有 a`key`和 a的关联`value`，因此如果不提供某种值，您将无法逃脱。

您可以稍后返回并使用以下命令更改值：

> Smalltalk 在：#VariableName 放：newValue

任何引用全局变量的编译代码都将看到新值，因为编译代码引用了关联。

# php - 无法在数据库中存储日期

> ID：11580903
> 
> 赞同：1
> 
> 时间：2012-07-20T13:59:19.913
> 
> 标签：php, mysql, sql, database

我正在尝试将数据存储到数据库中。如果我使用以下代码

```
$sql="INSERT INTO rohit(content,tags,uniquefield,required)
        VALUES('$l','$y','$z','$t')";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  } 
```

它正在运行，但是当我再添加一个字段时，它会给出错误检查 mysql 语法

```
$sql="INSERT INTO rohit(content,tags,uniquefield,required,numeric)
        VALUES('$l','$y','$z','$t','$n')";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  } 
```

我已经定义了数据库中的所有字段。可能的错误是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:00:59.850

`numeric`是保留字。将它放在抽动中以逃避它：

```
$sql="INSERT INTO rohit(content,tags,uniquefield,required,`numeric`)VALUES('$l','$y','$z','$t','$n')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:01:06.220

因为您正在尝试将字符串值添加到**数字**字段，并且我猜该列的类型不是字符串，因为名称

# c++ - 构造一个可以使用基于范围迭代的对象

> ID：11580904
> 
> 赞同：3
> 
> 时间：2012-07-20T13:59:24.680
> 
> 标签：c++, arrays, for-loop, c++11, iterator

我写了一个简短的实用函数，一个对象来“包装”一个可迭代的容器，这样我就可以使用基于范围的`for`.

```
template <typename Iterable>
struct ReverseWrapper {
private:
  Iterable& m_iterable;

public:
  ReverseWrapper(Iterable& iterable) : m_iterable(iterable) {}

  auto begin() const ->decltype(m_iterable.rbegin()) {
    return m_iterable.rbegin();
  }

  auto end() const ->decltype(m_iterable.rend()) {
    return m_iterable.rend();
  }
};

template <typename Iterable>
ReverseWrapper<Iterable> reverseIterate(Iterable& list) {
  return ReverseWrapper<Iterable>(list);
} 
```

这适用于 C++ 可迭代对象，但不适用于静态数组。对象需要什么来支持使用基于范围的迭代`for`？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:01:54.770

为可迭代对象选择`begin`和`end`函数的实际规则如下：使用类`begin`和`end`函数（如果有的话）。使用全局函数的重载，[`std::begin`](http://en.cppreference.com/w/cpp/iterator/begin)如果[`std::end`](http://en.cppreference.com/w/cpp/iterator/end)提供了一些。

静态数组不是类/结构，它们没有/不能有成员函数。foreach 循环调用的函数是全局函数`std::begin`and `std::end`，以数组为参数。假设`std::rbegin`并且`std::rend`存在，您必须按以下方式构建包装器：

```
template <typename Iterable>
struct ReverseWrapper {
private:
  Iterable& m_iterable;

public:
  ReverseWrapper(Iterable&& iterable) : m_iterable(iterable) {}

  auto begin() const -> decltype(rbegin(m_iterable)) {
    return rbegin(m_iterable);
  }

  auto end() const -> decltype(rend(m_iterable)) {
    return rend(m_iterable);
  }
};

template<typename Iterable>
auto reverseIterate(Iterable&& list)
    -> ReverseWrapper<Iterable>
{
    return ReverseWrapper<Iterable>(std::forward<Iterable>(list));
} 
```

尽管存在于 c++14 标准中[`std::rbegin`](http://en.cppreference.com/w/cpp/iterator/rbegin)，[`std::rend`](http://en.cppreference.com/w/cpp/iterator/rend)但它们在 c++11 标准中不可用。因此，要使上述代码与 c++11 一起使用，您必须手动实现这些函数：

```
template<typename T, std::size_t N>
auto rbegin(T (&array)[N])
    -> std::reverse_iterator<T*>
{
    return std::reverse_iterator<T*>(std::end(array));
}

template<typename T, std::size_t N>
auto rend(T (&array)[N])
    -> std::reverse_iterator<T*>
{
    return std::reverse_iterator<T*>(std::begin(array));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:09:43.557

在您的代码中，`Iterable`模板参数需要具有`begin`和`end`成员函数。普通 C++ 数组没有这些功能。相反，您必须使用[`std::begin`](http://en.cppreference.com/w/cpp/iterator/begin)and [`std::end`](http://en.cppreference.com/w/cpp/iterator/end)，它们是 C++11 标准的一部分。

但是，似乎没有任何`std::rbegin`或`std::rend`功能，这意味着您必须自己实现这些功能，可能还需要实现实际的迭代器类。

# asp.net-mvc - 是否可以以 InputName/InputValue 格式绑定到 Key/Value 字典输入

> ID：11580905
> 
> 赞同：0
> 
> 时间：2012-07-20T13:59:25.553
> 
> 标签：asp.net-mvc

是否可以以 InputName/InputValue 格式绑定到 Key/Value 字典输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:47:17.967

如果您希望表单中的值像`List<KeyValuePair<string,string>>`操作方法一样出现，您必须使用自定义模型绑定器。

```
public class CustomModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var form = controllerContext.HttpContext.Request.Form;  
        return form.Cast<string>().Select(s => new KeyValuePair<string,string>(s, form[s])).ToList();
    }
}

[HttpPost]
public ActionResult Save(List<KeyValuePair<string,string>> form)
{
  ...
} 
```

如果您对其他选项感到满意，您可以`FormCollection`按照@Tommy 的建议进行。顺便说一句`FormCollection`，是一个内置的字典类，其中包含表单提交的所有值。

**您还可以创建一个简单的类，该类具有名称作为表单字段名称的属性，默认模型绑定器会自动实例化并设置类的值并提供给操作。这是人们通常遵循的方法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:28:30.980

如果您将正确的参数传递给您的操作方法，MVC 已经这样做了。 **注意 - 强烈建议在您的操作方法中使用强类型视图和模型。**

话虽如此，如果您的方法签名使用以下内容：

```
public ActionResult MyMethod(FormsCollection MyFormValues) 
```

然后在您的代码中，您可以使用

```
var myFormValue = MyFormValues("InputName"); 
```

其中 InputName 是 FormsCollection 中使用的键，它将为您提供从 HTML 设置的值。

# jquery - Jquery $.post 问题

> ID：11580910
> 
> 赞同：0
> 
> 时间：2012-07-20T13:59:49.000
> 
> 标签：jquery, forms, post

我正在使用 Jquery 来处理表单而不加载新页面。我已经能够通过放置在输入字段“mailingfield”中的电子邮件地址获得警报。我无法弄清楚为什么帖子不起作用（更直接地说，图像在点击时没有做任何事情。.mailbutton 是一个图像。

```
window.onload = init;

function init() {
    $(".mailbutton").click(function() {
        var email = $(".mailingfield").val();
        $.post("/localhost/PHP_scripts/mailinglist.php", {
            email: email
        }, function(data) {
            var content = $(data).find('#content');
            $("#box").empty().append(content);
        }
        });
    }; 
```

mailinglist.php 正在寻找由 $_POST 设置的“电子邮件”。然后它会验证安全性等，然后如果电子邮件地址通过了插入数据库的验证，那么代码会解析一个带有 div ID 内容的 html 块。如果验证失败，它会在内容 div 之前生成一个类似的 html 块，并带有相关警告。我是否以正确的方式解决这个问题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:07:46.433

尝试使用 firebug 检查 NET 选项卡，查看是否在单击时发送请求，如果使用 chrome 检查 netowrk 选项卡以查看单击时是否生成任何请求..

你确定你的帖子网址是正确的....

这意味着如果您的网站是[http://www.example.com/](http://www.example.com/) 并且您从中发送 ajax 请求的页面是[http://www.example.com/makeajaxcall/ajaxrequest.php](http://www.example.com/makeajaxcall/ajaxrequest.php)那么您所在的 ajax url发布数据将是[http://www.example.com/localhost/PHP_scripts/mailinglist.php](http://www.example.com/localhost/PHP_scripts/mailinglist.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:05:29.310

我建议像这样将事件绑定到文档就绪块中的按钮（更不用说我修复了您的语法错误。只要 url 正确，这将起作用）：

~~window.onload = 初始化；~~

```
$(function(){

   $(".mailbutton").click(function() {
      var email = $(".mailingfield").val();
      $.post("/localhost/PHP_scripts/mailinglist.php", { email: email }, function(data) {
            var content = $(data).find('#content');
            $("#box").empty().append(content);
      });
   });
}); 
```

# java - spring 单例 bean 字段未填充

> ID：11580911
> 
> 赞同：3
> 
> 时间：2012-07-20T13:59:57.190
> 
> 标签：java, spring

我需要一个带有一些内部字段的服务（单例拟合），比如挂起的线程列表（是的，所有内容都写成线程安全的）问题是，如果我使用`@autowire`这个 bean，字段似乎是空的。调试我看到代理正确绑定到 `CGLIB$CALLBACK_X`具有填充字段的实例（字段正确链接到填充的 bean），但它提供的字段是空的。

以下代码行大致了解我在说什么。

```
@Service
public class myService{

   @Autowired
   private Monitor monitor;

   public List getSomething(){
       return monitor.getList();
   }
}

@Service
public class myStatefulService{

   //This field will be populated for sure by someone before getSomething() is called
   private List list;

   public synchronized List getSomething(){
       return this.list;
   }

   //Called by other services that self inject this bean 
   public synchronized void addToList(Object o){
      this.list.add(o);
   }
} 
```

`monitor`在我得到的 getList 调用期间调试变量

```
monitor => instance of correct class
 fields:
   CGLIB$BOUND => true
   CGLIB$CALLBACK_0.advised => proxyFactory (correct)
   CGLIB$CALLBACK_1.target (reference to the correct instance of myStatefulService class)
        fields:
          list => [.........] (correctly populated)
   CGLIB$CALLBACK_2 ..... 
   ......
   ......
   ......
   list => [] (the list that would be populated is empty instead) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T16:44:28.023

你是好奇还是你有一些真正的问题？不过这里有一个解释。

当使用 CGLIB 代理类时，Spring 将创建一个子类，称为`myService$EnhancerByCGLIB`. 这个增强的类将覆盖您的一些（如果不是全部）业务方法，以围绕您的实际代码应用横切关注点。

真正的惊喜来了。这个额外的子类不调用`super`基类的方法。相反，它会创建第二个实例`myService`并委托给它。这意味着您现在有两个对象：您的真实对象和指向（包装）它的 CGLIB 增强对象。

增强类只是一个虚拟代理。它仍然具有与您的基类（继承自它）相同的字段，但未使用它们。当您调用对象`addToList()`时`myService$EnhancerByCGLIB`，它将首先应用一些 AOP 逻辑，调用`addToList()`（`myService`它包装）并在返回时应用剩余的 AOP 逻辑。该`myService$EnhancerByCGLIB.list`领域从未被触及。

为什么 Spring 不能使用相同的类和委托 via `super`？我想为简单起见：首先创建“*原始*”bean，然后在后处理期间应用 AOP 代理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:08:02.977

“在调用 getSomething() 之前，这个字段肯定会被某人填充”

被某人？不，Spring bean 工厂。如果您不配置它，则不会填充任何内容。

并不是每个 bean 都需要在 Spring 的控制之下。听起来您想要一个`List`客户端可以以线程安全的方式添加和删除项目。如果是这样，请删除`@Autowired`注释，创建一个新的`List`，并公开添加和删除的方法。

我会推荐一个来自新并发集合的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-14T13:05:05.377

CGLIB 将代理受保护的 getter。

所以你可以拥有：

```
@Autowired
private Monitor monitor;

protected Monitor getMonitor() { return monitor; }

public List getSomething(){
    return getMonitor().getList();
} 
```

getMonitor() 将被代理以在另一个注入了监视器的实例上调用 getMonitor()。

# javascript - 将谷歌地图 v3 点击事件更改为 jquery？

> ID：11580915
> 
> 赞同：1
> 
> 时间：2012-07-20T14:00:08.127
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有这个工作代码：

```
 google.maps.event.addListener(marker, 'click', (function (marker, i)
            {
                return function ()
                {
                    infowindow.setContent(locations[i][0]);
                    infowindow.open(map, marker);
                }
            })(marker, i)); 
```

但是，我想将其更改为 jQuery。

我试过了，但没有成功。

```
 $(google.maps.event).on('click', marker, function ()
  {
    (function (marker, i)
    {
      return function ()
      {
        infowindow.setContent(locations[i][0]);
        infowindow.open(map, marker);
      }
    })(marker, i)
  }); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:04:46.290

您试图将`google.maps.event`其视为 DOM 元素，但事实并非如此。`.addListener`是 Google Maps API 独有的一种方法，不能由 jQuery 控制。

但是，有几个 jQuery 插件旨在使操作 Google Maps API 更容易。我本人最近使用[gMap 2](http://labs.mario.ec/jquery-gmap/)取得了巨大成功。谷歌搜索“jquery plugin google maps”将返回许多类似的插件，包括[谷歌自己的一个](http://code.google.com/p/jquery-ui-map/)。

# iphone - NSBlockOperation 或 NSOperation 与 ALAsset 块使用 ALAsset URL 显示照片库图像

> ID：11580918
> 
> 赞同：2
> 
> 时间：2012-07-20T14:00:12.360
> 
> 标签：iphone, nsoperation, nsoperationqueue, alassetslibrary, nsblockoperation

我问这个问题关于我的问题[以有效的方式显示照片库图像 iPhone](https://stackoverflow.com/questions/11545396/display-photolibrary-images-in-an-effectual-way-iphone)和*[高效的 UITableView "cellForRowIndexPath" 方法来绑定 PhotoLibrary 图像](https://stackoverflow.com/questions/9135915/highly-efficiant-uitableview-cellforrowindexpath-method-to-bind-the-photolibra)*。

所以我想要求不要在不阅读以下详细信息的情况下将答案复制到这个答案:)

让我们来解决问题，

我已经详细研究了我上面提到的问题，并且我从[这里找到了关于](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html)**操作队列**的文档。

因此，我创建了一个示例应用程序，通过 ALAsset 块使用操作队列显示七个照片库图像。

以下是示例应用程序详细信息。

**第1步：**

在 NSOperationalQueueViewController **viewDidLoad**方法中，我已将所有照片库 ALAsset [URL 检索](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)到名为`urlArray`.

**第2步：**

将所有 URL 添加到 中后`urlArray`， **if(group != nil)**条件将为 false `assetGroupEnumerator`，因此我创建了一个`NSOperationQueue`，然后通过`for`循环创建了七个 UIImageView，并`NSOperation`使用相应的**图像视图**和**URL**创建了我的子类对象对于每一个，**并将**它们添加到`NSOperationQueue`.

[在这里](http://pastebin.com/MeYdde8h)查看我的`NSOperation`子类。

**[在此处](http://pastebin.com/aA3XkE7k)**查看我的实现 (VierwController) 类**。**

 **让我们来看看这个问题。

它没有一致地显示所有七个图像。部分图像丢失。丢失的顺序多次更改（一次不显示第六和第七，另一次不显示第二和第三）。控制台日志显示**找不到照片图片编号**。但是，URL 已正确记录。

[您可以在此处](http://pastebin.com/b2wJGM6s)查看日志详细信息。

我的课有错误吗？

此外，当我浏览上述[操作队列](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html)文档时，我已经阅读了关于`NSBlockOperation`. 我是否需要在处理 ALAsset 块时实施`NSBlockOperation`而不是？`NSOperation`

描述`NSBlockOperation`说

> 您按原样使用的类可以同时执行一个或多个块对象。因为它可以执行多个块，所以块操作对象使用组语义进行操作；只有当所有相关块都完成执行时，操作本身才被认为完成。

如何实现`NSBlockOperation`与我的示例应用程序有关的 with ALAsset 块？

我已经完成了 Stack Overflow 问题*[Learning NSBlockOperation](https://stackoverflow.com/questions/11009027/learning-nsblockoperation)*。但是，我没有任何想法来实现`NSBlockOperation`with ALAsset 块！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T06:44:32.347

**这是关于“如何使用 ALAsset 库访问 iPhonePhoto 库中的所有图像并在 UIScrollView 上显示它们（如 iPhoneSimulator）”的教程。** 首先添加`AssetsLibrary.framework`到您的项目中。

然后在你的`viewController.h`文件中导入`#import <AssetsLibrary/AssetsLibrary.h>`头文件。

这是你的`viewController.h`文件

```
#import <UIKit/UIKit.h>
#import <AssetsLibrary/AssetsLibrary.h>
#import "AppDelegate.h"

@interface ViewController : UIViewController <UIScrollViewDelegate>
{
    ALAssetsLibrary *assetsLibrary;
    NSMutableArray *groups;
    ALAssetsGroup *assetsGroup;

   // I will show all images on `UIScrollView`
    UIScrollView *myScrollView;

    UIActivityIndicatorView *activityIndicator;

    NSMutableArray *assetsArray;
    // Will handle thumbnail of images 
    NSMutableArray *imageThumbnailArray;
    // Will handle original images 
    NSMutableArray *imageOriginalArray;

    UIButton *buttonImage;
 }

-(void)displayImages;
-(void)loadScrollView;

@end 
```

这是你的`viewController.m`文件—— `viewWillAppear:`

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@implementation ViewController

- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];

  assetsArray = [[NSMutableArray alloc]init];
  imageThumbnailArray = [[NSMutableArray alloc]init];
  imageOriginalArray = [[NSMutableArray alloc]init];

  myScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 416.0)];
  myScrollView.delegate = self;
  myScrollView.contentSize = CGSizeMake(320.0, 416.0);
  myScrollView.backgroundColor = [UIColor whiteColor];

  activityIndicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
  activityIndicator.center = myScrollView.center;
  [myScrollView addSubview:activityIndicator];
  [self.view addSubview:myScrollView];

  [activityIndicator startAnimating];

} 
```

`viewDidAppear:`

```
-(void)viewDidAppear:(BOOL)animated
{
 if (!assetsLibrary) {
        assetsLibrary = [[ALAssetsLibrary alloc] init];
    }
    if (!groups) {
     groups = [[NSMutableArray alloc] init];
  } 
 else {
     [groups removeAllObjects];
 }

 ALAssetsLibraryGroupsEnumerationResultsBlock listGroupBlock = ^(ALAssetsGroup *group, BOOL *stop) {
        //NSLog(@"group %@",group);
        if (group) {
            [groups addObject:group];
         //NSLog(@"groups %@",groups);
     } else {
         //Call display Images method here.
         [self displayImages];
        }
 };
 ALAssetsLibraryAccessFailureBlock failureBlock = ^(NSError *error) {
     NSString *errorMessage = nil;
        switch ([error code]) {
         case ALAssetsLibraryAccessUserDeniedError:
            case ALAssetsLibraryAccessGloballyDeniedError:
             errorMessage = @"The user has declined access to it.";
                break;
            default:
             errorMessage = @"Reason unknown.";
             break;
     }
    };
    [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:listGroupBlock failureBlock:failureBlock];

} 
```

这是`displayImages:`方法体

```
-(void)displayImages
{
// NSLog(@"groups %d",[groups count]);
  for (int i = 0 ; i< [groups count]; i++) {
     assetsGroup = [groups objectAtIndex:i];
        if (!assetsArray) {
         assetsArray = [[NSMutableArray alloc] init];
        }
        else {
         [assetsArray removeAllObjects];
     }

     ALAssetsGroupEnumerationResultsBlock assetsEnumerationBlock = ^(ALAsset *result, NSUInteger index, BOOL *stop) {

            if (result) {
                [assetsArray addObject:result];
            }
     };
        ALAssetsFilter *onlyPhotosFilter = [ALAssetsFilter allPhotos];
        [assetsGroup setAssetsFilter:onlyPhotosFilter];
        [assetsGroup enumerateAssetsUsingBlock:assetsEnumerationBlock];

    }

    //Seprate the thumbnail and original images
    for(int i=0;i<[assetsArray count]; i++)
    {
        ALAsset *asset = [assetsArray objectAtIndex:i];
        CGImageRef thumbnailImageRef = [asset thumbnail];
        UIImage *thumbnail = [UIImage imageWithCGImage:thumbnailImageRef];
        [imageThumbnailArray addObject:thumbnail];

        ALAssetRepresentation *representation = [asset defaultRepresentation];
        CGImageRef originalImage = [representation fullResolutionImage];
        UIImage *original = [UIImage imageWithCGImage:originalImage];
        [imageOriginalArray addObject:original];
    }

    [self loadScrollView];
} 
```

现在你有两个`array`一个 is`imageThumbnailArray`和另一个 is `imageOriginalArray`。用于`imageThumbnailArray`显示`UIScrollView`您的滚动不会很慢的内容....并`imageOriginalArray`用于图像的放大预览。

'loadScrollView:' 方法，这是如何`UIScrollView`像**iPhoneSimulator上的图像**

```
#pragma mark - LoadImages on UIScrollView
-(void)loadScrollView
{
    float horizontal = 8.0;
    float vertical = 8.0;

    for(int i=0; i<[imageThumbnailArray count]; i++)
    {
        if((i%4) == 0 && i!=0)
        {
            horizontal = 8.0;
            vertical = vertical + 70.0 + 8.0;
        }

        buttonImage = [UIButton buttonWithType:UIButtonTypeCustom];
        [buttonImage setFrame:CGRectMake(horizontal, vertical, 70.0, 70.0)];
        [buttonImage setTag:i];
    [   buttonImage setImage:[imageThumbnailArray objectAtIndex:i] forState:UIControlStateNormal];
        [buttonImage addTarget:self action:@selector(buttonImagePressed:) forControlEvents:UIControlEventTouchUpInside];
        [myScrollView addSubview:buttonImage];
        horizontal = horizontal + 70.0 + 8.0;

    }

    [myScrollView setContentSize:CGSizeMake(320.0, vertical + 78.0)];
    [activityIndicator stopAnimating];
    [activityIndicator removeFromSuperview];
} 
```

在这里你可以找到`button`点击了哪张图片——

```
#pragma mark - Button Pressed method
-(void)buttonImagePressed:(id)sender
{
     NSLog(@"you have pressed : %d button",[sender tag]);   
} 
```

希望本教程对您和许多搜索相同内容的用户有所帮助。谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T18:14:48.273

您在 DisplayImages NSOperation 子类中有一行更新 UI（DisplayImages.m 第 54 行）：

```
self.imageView.image = topicImage; 
```

此操作队列在后台线程上运行，我们知道您应该只在主线程上更新 UI 的状态。由于更新图像视图的视图肯定会更新 UI，因此可以通过将调用包装为以下内容来简单地解决此问题：

```
dispatch_async(dispatch_get_main_queue(), ^{
   self.imageView.image = topicImage;
}); 
```

这会在主队列上进行异步调用，以使用图像更新 UIImageView。它是异步的，因此您的其他任务可以在后台安排，并且它在主队列上运行是安全的 - 这是主线程。**

# php - session_start() [function.session-start]：无法发送会话 cookie - 标头已发送

> ID：11580919
> 
> 赞同：-2
> 
> 时间：2012-07-20T14:00:13.717
> 
> 标签：php, session

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我是面向对象的 PHP 新手。此代码在函数 php 中运行良好，但在 OOP PHP 中会出错。

当我打开 index.php 时，错误消息如下所示，但所有其他代码都运行良好::

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers 
  already sent by (output started at 
  E:\XAMPP\xampp\htdocs\photo_gallery_new\public\layout\header.php:14) in 
  E:\XAMPP\xampp\htdocs\photo_gallery_new\Includes\session.php on line 15

  Warning: session_start() [function.session-start]: Cannot send session cache limiter -
   headers already sent (output started at 
  E:\XAMPP\xampp\htdocs\photo_gallery_new\public\layout\header.php:14) in
   E:\XAMPP\xampp\htdocs\photo_gallery_new\Includes\session.php on line 15 
```

编码 ：：

索引.php

```
 <?php  include ("../public/layout/header.php"); ?> // for design   header
<h2> Menu </h2>
 <?php

require_once ("../Includes/initiate.php");   // it makes error 
//require_once ("../Includes/user.php");    // it works 
//require_once ("../Includes/database_object.php");  // it makes error      

echo $user->full_name();
echo "<hr />";
  ?>
</div>   
  <?php  include ("../public/layout/footer.php");   ?>  // design for footer 
```

用户.php

```
<?php
require_once ("database.php");

 class USER extends  databaseObject {  // it makes error
//class USER {  // but it works         
     public $id; public $username; public $password;    public $firstName;
         public $lastName;
     // user authenticate   
     public static function authenticate( $username="", $password="" ) { ...  } 

     public function full_name()  {..... } // find full name
     // common database action
     public static function record_all_user() { ...  } // find all user

     public static function record_by_id($id=0) {.....} // find specific user

     public static function record_by_sql($sql="") { ...... }  // check sql
    ?> 
```

头文件.php

```
 <html>
  <head>
 <title> Photo Gallery </title>
<link href="stylesheet/main.css" media="all" rel="stylesheet" type="text/css" />
  </head>
<body>
   <div id="header">
     <h1> PHOTO GALLERY </h1>
   </div>
<div id="main"> 
```

会话.php

```
<?php
   class Session {          
    private $logged_in = FALSE;
    public $user_id;            
    function  __construct()  {
        session_start();
        $this->check_login();           
          .............................
            }

    public function is_logged_in() {....} // check loged in  

    public function login($user) { .....  }

    public function logout() {
        unset($_SESSION['user_id']);
        unset($this->user_id);
        $this->logged_in = FALSE;
    }

    private function check_login()  {... .}  // check login
}    

$session = new Session();
 ?> 
```

启动.php

```
 <?php
  require_once ("Config.php");
require_once ("Functions.php");
require_once ("session.php");
require_once ("Database.php");
require_once ("database_object.php");  // this makes error
require_once ("user.php");
 ?> 
```

数据库对象.php

```
 <?php
require_once ("database.php");
   class databaseObject {

}
$newClass = new databaseObject();
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:04:16.513

您不能包含在调用之前直接发送给用户的*任何*`session_start();`内容。这包括空格、html 等。

确保您的第一个`<?php`在它之前没有任何空格。确保在调用 session_start*后包含标题。*那应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:06:35.187

在您的 index.php 文件中，您正在向浏览器输出字符：

```
 <?php  include ("../public/layout/header.php"); ?> // for design   header
<h2> Menu </h2>            <----- this line
 <?php

require_once ("../Includes/initiate.php");   // it makes error 
```

您必须将 require_once 文件移到此行上方或缓冲输出，直到您发送了所有标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:07:05.923

在调用之前不应产生任何输出`session_start()`。

在你的`index.php`，你包括`../Includes/initiate.php`。在此文件中，您包含在其构造函数`session.php`中调用的 。`session_start()`这会产生一个错误，因为您已经在 index.php 中生成了输出，其中包含`header.php`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:05:39.007

尝试更改您的要求语句的顺序：

```
<?php
require_once ("session.php");
require_once ("Config.php");
require_once ("Functions.php");
require_once ("Database.php");
require_once ("database_object.php");  // this makes error
require_once ("user.php");
 ?> 
```

在将任何内容发送到浏览器之前，需要启动 php 会话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T14:05:42.093

检查，你可能有`echo`，`print`在你的会话创建之前给出输出

# openerp - 合作伙伴分支机构位置

> ID：11580936
> 
> 赞同：1
> 
> 时间：2012-07-20T14:01:18.057
> 
> 标签：openerp

我在 OpenERP 6.1 中有一个具有不同分支 (A, branch1) , (A, branch2) 的合作伙伴 A

我是否需要为所有分支机构创建一个单独的合作伙伴，然后相应地指向其父合作伙伴字段，还是我遗漏了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:37:22.073

问题是，您是否直接与每个分支机构（销售订单、发票等）打交道？

*   如果您这样做，您应该为每个分支机构打开一个合作伙伴，以便您可以将每个文档与相应的合作伙伴分支机构相关联。
*   如果不是，您正在与一个拥有多个分支机构的合作伙伴打交道，并且拥有一个拥有多个联系地址的合作伙伴就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:33:36.743

我建议询问分行是否有单独的银行账户。如果是这样，那么您应该创建一个单独的合作伙伴帐户，否则创建一个合作伙伴帐户并找到一种方法将不同的分支帐户放入其中。

# silverlight - Silverlight 中的 HyperlinkBut ton 指向旧的 URI

> ID：11580937
> 
> 赞同：0
> 
> 时间：2012-07-20T14:01:20.270
> 
> 标签：silverlight, silverlight-5.0

我是 Silverlight 的新手。A 使用 SilverLight Business Application 模板创建应用程序。我向 MainPain.xaml 添加了一个 HypperlinkBut​​ton 指向一个视图，比如**ProductListView**。现在我创建了一个新视图，比如**DataFormView**，我希望 HyperlinkBut​​ton 指向该新视图以便对其进行测试，但是当我运行应用程序时，它是显示的旧视图（ProductListView），尽管我已经更改了 NavigateUri属性指向新视图。我添加了一个新的 HyperlinkBut​​ton 来指向新视图，但它似乎是显示的旧主页（带有一个超链接按钮）。

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:57:32.737

了解 Silverlight 中导航的最简单方法，只需打开新的 Silverlight 导航应用程序项目，您可以在其中使用导航框架和超链接按钮执行简单的导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:05:44.220

这可能是 xap 文件被缓存的问题。尝试重建应用程序。还有其他方法可以清除浏览器缓存：

[http://www.codeproject.com/Articles/143414/Prevent-your-Silverlight-XAP-File-from-Caching-in](http://www.codeproject.com/Articles/143414/Prevent-your-Silverlight-XAP-File-from-Caching-in)

[以编程方式使 Silverlight XAP 文件从浏览器缓存中过期](https://stackoverflow.com/questions/2281919/making-the-silverlight-xap-file-expire-from-browser-cache-programmatically)

# c# - 如果不是 Null，则 AutoMapper 映射嵌套对象的属性

> ID：11580938
> 
> 赞同：3
> 
> 时间：2012-07-20T14:01:29.310
> 
> 标签：c#, automapper, automapper-2

我有以下示例对象..

```
 public class ComplexObject
  {
    public string Name { get; set; }
    public SimpleObject Child1 { get; set; }
    public SimpleObject Child2 { get; set; }
  }
  public class SimpleObject : IEquatable< SimpleObject >
  {
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Gender { get; set; }
    public int? Age { get; set; }
  } 
```

使用以下 AutoMapper 配置

```
 Mapper.CreateMap<SimpleObject, SimpleObject>()
    .ForAllMembers(expression=>expression.Condition(r=>!r.IsSourceValueNull));

  Mapper.CreateMap<ComplexObject, ComplexObject>()
    .ForAllMembers(expression=>expression.Condition(resolutionContext=>!resolutionContext.IsSourceValueNull)); 
```

以及以下 NUnit 测试...

```
[SetUp] public void Should_run_before_each_test()
{
  child1 = new SimpleObject { FirstName = "Tom", LastName = "Smith", Age = 34, Gender = "Male" };
  child2 = new SimpleObject { FirstName = "Andy", LastName = "Smith-bob", Age = 21, Gender = "Male" };
}

[ Test ]
public void Should_ignore_null_properties_in_nested_objects()
{
  var source = new ComplexObject()
  {
    Name = "blue",
    Child1 = new SimpleObject{FirstName = "dot", LastName = "net"}
  };
  var destination = new ComplexObject()
  {
    Name = "Andy",
    Child1 = child1,
    Child2 = child2
  };

  destination = Mapper.Map(source, destination);

  destination.Name.Should(Be.EqualTo(source.Name));
  destination.Child1.FirstName.Should(Be.EqualTo("dot"));
  destination.Child1.LastName.Should(Be.EqualTo("net")  );
  destination.Child1.Age.Should(Be.EqualTo(child1.Age)  );
  destination.Child1.Gender.Should(Be.EqualTo(child1.Gender)  );
} 
```

上面的测试在断言年龄时失败，因为 AutoMapper 正在将 null 推送到目标对象。

我是否对 AutoMapper 期望过高，或者我错过了一些重要的地图配置步骤。

最终目标是通过 MVC 操作将一个非常复杂的域对象绑定到传入的表单数据。然后，AutoMapper 将用于仅将非空属性（在对象图的所有深度）合并到整个多步骤表单中维护的真实实例中。

以防万一有人需要知道...我还尝试了以下映射配置，但没有任何运气:(

```
 Mapper.CreateMap<ComplexObject, ComplexObject>()
    .ForMember(x=>x.Child1, l=>l.ResolveUsing(x=>x.Child1 == null?null:Mapper.Map<SimpleObject,SimpleObject>(x.Child1)))
    .ForMember(x=>x.Child2, l=>l.ResolveUsing(x=>x.Child2 == null?null:Mapper.Map<SimpleObject,SimpleObject>(x.Child2)))
    .ForAllMembers(expression=>expression.Condition(resolutionContext=>!resolutionContext.IsSourceValueNull)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:11:44.693

如果源值为空，为什么您期望目标对象上的值不为空？的默认值为，`int?`因此`null`，当您调用

`destination.Child1.Age.Should(Be.EqualTo(child1.Age));`

这`.Should`就是失败的地方。这应该是预期的行为。

尝试类似的东西`Assert.Null(detination.Child1.Age)`，它应该通过。AutoMapper 不会“推送”该值，没有源值，因此`Age`只会使用它的默认值。

# c++ - glGenBuffers - 释放内存？

> ID：11580940
> 
> 赞同：7
> 
> 时间：2012-07-20T14:01:34.270
> 
> 标签：c++, opengl, graphics

当我使用 glGenBuffers 创建一个带有指向它的 VBO 时，我（认为）正在分配内存。对 glGenBuffers 的后续调用应该返回不同的指针，但是之前分配的内存呢？在 Nehe 示例中，我没有看到“空闲内存”调用......而且我读到 openGL 是一种“状态机”，这是否意味着如果我的 initializeBuffers() 函数被多次调用，我不会需要释放任何东西并“按原样”使用 glGenBuffers 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T14:06:40.910

对于您拨打的任何`glGenBuffers`电话，您都必须拨打相应的[`glDeleteBuffers`](http://www.opengl.org/wiki/GLAPI/glDeleteBuffers)电话。

请注意，您传递给的指针`glGenBuffers`未分配/解除分配。事实上，甚至可能这些调用实际上并没有在 cpu 内存中分配任何东西，但你也不能保证这一点。

您传递给`glGenBuffers`的是一个已经分配的数组（或单个值），它将存储您引用 gpu 资源的“名称”，工作流程如下所示：

```
GLuint buffer; //Note: statically allocated
glGenBuffers(1, &buffer); // Allocate a GPU-resource - only updates value in buffer
//Work a bit with buffer
glDeleteBuffers(1, &buffer); //Deallocate the gpu-resource 
```

作为指针传递的原因`buffer`是因为您可以创建多个缓冲区，例如：

```
GLuint buffer[3]; //Note: again statically allocated
glGenBuffers(3, &buffer); // Allocate a GPU-resource - update values in buffer
//Work a bit with buffer
glDeleteBuffers(3, &buffer); //Deallocate the gpu-resource 
```

当然，`buffer`很可能由您动态分配，例如：

```
std::vector<GLuint> buffer(3); //std::vector uses dynamic allocation
glGenBuffers(3, &buffer[0]); // Allocate a GPU-resource - update values in buffer
//Work a bit with buffer
glDeleteBuffers(3, &buffer[0]); //Deallocate the gpu-resource 
```

# c++ - 使用套接字在 C++ 中进行客户端到服务器身份验证

> ID：11580944
> 
> 赞同：26
> 
> 时间：2012-07-20T14:01:51.457
> 
> 标签：c++, sockets, authentication, encryption

我正在为我的小型服务器客户端程序实现登录/身份验证系统。我想知道如何解决这个问题，我希望一如既往地从 Stack Overflow 获得一些很棒的提示/建议。我想我会这样做。

*   客户端连接到服务器。
*   服务器向客户端发送一个“令牌”（可能基于时间等等）
*   客户端返回用户名和 sha1 加密密码以及令牌。
*   服务器接收它们并根据服务器端数据库中的凭据对用户进行身份验证。
*   令牌现已验证，用户已使用令牌登录。

这完全是一种安全的方式吗？我认为客户端还发送一个串行密钥或类似的密钥以形成串行/令牌对，以便另一个客户端不能伪造相同的令牌（尽管令牌是由服务器端生成的）。

不需要实施细节，因为我有能力进行实施。

我的问题应该是两个问题：

*   有什么方法可以实现带有套接字的登录/认证系统
*   有什么方法可以保护我的客户端到服务器的连接
*   **编辑**：我忘了问，因为这是一个 C++ 问题，有没有可以帮助加密/身份验证的库？

安全对我来说是一个问题，所以我想确保我做对了。

也许一些背景信息。这是一个游戏服务器，一个人用他的帐户登录并被带到一个“大厅”，在那里他可以选择一个“世界服务器”来玩。世界服务器是一个单独的进程（可能）在同一网络中的不同机器上运行。

出于这个原因，我想在此有一个会话的概念，用户登录并生成一个会话，登录服务器将会话中继到用户选择的世界服务器，以便世界服务器知道用户实际上是登录。

我认为客户端必须确认与世界服务器的会话以及所有这些，但我稍后会担心。

真诚的， *杰西*

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-20T14:14:23.610

您通常根本*不想*通过链接发送密码，即使加密也不行。通常的方法是质询-响应协议。

1.  客户端连接到服务器，发送用户名（但*不是*密码）
2.  服务器通过发送唯一的随机数来响应
3.  客户端使用其密码的哈希作为密钥加密该随机数
4.  客户端将加密后的随机数发送给服务器
5.  服务器使用用户密码的正确哈希加密随机数
6.  服务器比较两个加密的随机数

这有几个优点。首先，这意味着密码永远不会以任何形式通过链接。其次，它不受重放攻击的影响——如果攻击者记录了对话，他们以后就不能重放客户端的回复来登录，因为随机数会改变。

保护连接（即加密内容）要简单一些。通常，两者中的一个（实际上并不重要）选择一个随机数，用另一个的公钥对其进行加密，然后将其发送给另一个。另一个解密它，然后他们使用它作为对称加密的密钥来加密会话的其余部分。

库：[Beecrypt](http://beecrypt.sourceforge.net/doxygen/c++/index.html)和[OpenSSL](http://www.openssl.org/)是两个明显的库。除非您有相当具体的理由不这样做，否则您可能想要使用 TLS（它比我上面概述的要多得多，包括双向身份验证，因此服务器不仅知道客户端是谁是，但客户端也知道服务器是谁，因此可以合理地验证它没有连接到可能只是收集他的信用卡号并使用它运行的其他人）。

编辑：

要验证每个数据包而无需加密所有内容的开销，您可以执行以下操作：

1.  服务器将其公钥与质询一起发送
2.  客户端生成一个随机数，使用服务器的公钥对其进行加密，并将其与响应一起发回
3.  该数字是用于反模式加密的第一个数字
4.  客户端在它发送的每个数据包中都包含一个计数器模式结果

计数器模式意味着您只需生成连续数字，然后使用正确的密钥依次加密每个数字。在这种情况下，密钥将是客户端密码的哈希值。这意味着每个数据包都将包含一个唯一的随机数，客户端和服务器都可以生成该随机数，但没有其他人可以生成。通过使用计数器模式加密，每个数据包将有一个唯一的随机数。通过从一个随机数开始，每个会话将有一个唯一的随机数序列。

为了最大限度地减少开销，您可以只发送每个数据包的一部分结果——例如，如果您在计数器模式下使用 AES，它将为您加密的每个数字生成 16 个字节的结果。每个数据包仅包含（例如）两个字节，因此您只需每 8 个数据包加密一次数字。从理论上讲，这会降低安全性——攻击者可以只尝试一个数据包的所有 65536 个可能的值，但如果您假设连接在（例如）两次错误尝试后被破坏，那么攻击者获得正确值的机会就会变得非常小（当然，您几乎可以通过控制允许的错误尝试次数和每个数据包中包含的身份验证大小来选择愿意接受的机会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:13:53.730

如果安全性对您来说是一个大问题，请不要自己动手。您需要一个安全的套接字库。类似[OpenSSL](http://www.openssl.org/)的东西。

# java - 声纳违规：安全 - 阵列直接存储

> ID：11580948
> 
> 赞同：65
> 
> 时间：2012-07-20T14:02:03.367
> 
> 标签：java, sonarqube

存在声纳违规：

**声纳违规：安全 - 阵列直接存储**

```
public void setMyArray(String[] myArray) { 
  this.myArray = myArray; 
} 
```

**解决方案：**

```
public void setMyArray(String[] newMyArray) { 
  if(newMyArray == null) { 
    this.myArray = new String[0]; 
  } else { 
   this.myArray = Arrays.copyOf(newMyArray, newMyArray.length); 
  } 
} 
```

但我想知道为什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-20T14:08:55.723

它抱怨您存储的数组与调用者持有的数组相同。也就是说，如果调用者随后修改了这个数组，那么存储在对象中的数组（以及对象本身）将会改变。

解决方案是在对象被传递时在对象内制作副本。这称为**防御性复制**。对集合的后续修改不会影响存储在对象中的数组。

在返回集合时（例如在相应的`getMyArray()`调用中）通常这样做也是一种很好的做法。否则接收器可能会执行修改并影响存储的实例。

请注意，这显然适用于所有可变集合（实际上是所有可变对象）——而不仅仅是数组。另请注意，这会对性能产生影响，需要与其他问题一起评估。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-20T14:04:41.657

这被称为防御性复制。关于该主题的一篇不错的文章是[“无论如何，它是谁的对象？”](http://www.ibm.com/developerworks/java/library/j-jtp06243/index.html) Brian Goetz 讨论了 getter 和 setter 的值和引用语义之间的区别。

基本上，引用语义（没有副本）的风险是您错误地认为您拥有该数组，并且当您修改它时，您还修改了具有该数组别名的其他结构。您可以在线找到许多关于防御性复制和与对象别名相关的问题的信息。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-17T18:45:09.060

我遇到过同样的问题：

> **安全性 - 数组直接存储用户提供的数组** **“palomitas”直接存储。**

我原来的方法：

```
public void setCheck(boolean[] palomitas) {
        this.check=palomitas;
    } 
```

固定转为：

```
public void setCheck(boolean[] palomitas) { 
      if(palomitas == null) { 
        this.check = new boolean[0]; 
      } else { 
       this.check = Arrays.copyOf(palomitas, palomitas.length); 
      } 
} 
```

其他示例：

> **安全性 - 数组直接存储用户提供的数组**

```
private String[] arrString;

    public ListaJorgeAdapter(String[] stringArg) {      
        arrString = stringArg;
    } 
```

固定的：

```
public ListaJorgeAdapter(String[] stringArg) {  
    if(stringArg == null) { 
      this.arrString = new String[0]; 
    } else { 
      this.arrString = Arrays.copyOf(stringArg, stringArg.length); 
    } 
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-16T09:50:45.440

要消除它们，您必须在存储/返回它之前克隆数组，如以下类实现所示，因此没有人可以修改或获取您的类的原始数据，而只能是它们的副本。

```
public byte[] getarrString() {
    return arrString.clone();
}
/**
 * @param arrStringthe arrString to set
 */
public void arrString(byte[] arrString) {
    this.arrString= arrString.clone();
} 
```

我像这样使用它，现在我没有收到任何违反声纳的行为......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-12T09:48:59.893

这比这一切都容易。您只需要将方法参数重命名为其他任何名称，以避免违反声纳。

[http://osdir.com/ml/java-sonar-general/2012-01/msg00223.html](http://osdir.com/ml/java-sonar-general/2012-01/msg00223.html)

```
public void setInventoryClassId(String[] newInventoryClassId)
    {                
            if(newInventoryClassId == null)
            {
                    this.inventoryClassId = new String[0];
            }
            else
            {
                    this.inventoryClassId = Arrays.copyOf(newInventoryClassId, newInventoryClassId.length);
            }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T11:46:05.747

采取防御性实施方式可以为您节省大量时间。在 Guava 中，您可以获得另一个很好的解决方案来实现目标：ImmutableCollections

[http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained](http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-14T11:15:54.370

在某些情况下，这是一个设计决策，不会错过。在这些情况下，您需要修改 Sonar 规则以将其排除，以便它不会在报告中显示此类问题。

# iphone - 如何在 Phonegap 中实现 AdMob

> ID：11580950
> 
> 赞同：5
> 
> 时间：2012-07-20T14:02:06.403
> 
> 标签：iphone, ios, cordova, admob

我有一个 phonegap 应用程序，我正在尝试实施 Admob。

我正在使用 phonegap 版本 1.4.1，我使用这个网站作为我的参考：http: [//iphone.keyvisuals.com/iphonedev/implementing-admob-ads-in-a-phonegap-project-for-ios-no -plugins-required/](http://iphone.keyvisuals.com/iphonedev/implementing-admob-ads-in-a-phonegap-project-for-ios-no-plugins-required/)

我的代码如下：

```
(void)webViewDidFinishLoad:(UIWebView *)theWebView
{

bannerView_ = [[GADBannerView alloc]init];
[bannerView_ setDelegate:self];
[bannerView_ setFrame:CGRectMake(0, 0, 320, 50)];

// Specify the ad's "unit identifier." This is your AdMob Publisher ID.
bannerView_.adUnitID = MY_BANNER_UNIT_ID;

// Let the runtime know which UIViewController to restore after taking
// the user wherever the ad goes and add it to the view hierarchy.
bannerView_.rootViewController = self.viewController;
[self.viewController.view addSubview:bannerView_];

// Initiate a generic request to load it with an ad.
[bannerView_ loadRequest:[GADRequest request]];

// only valid if AdGap.plist specifies a protocol to handle
if(self.invokeString)
{
    // this is passed before the deviceready event is fired, so you can access it in js when you receive deviceready
    NSString* jsString = [NSString stringWithFormat:@"var invokeString = \"%@\";", self.invokeString];
    [theWebView stringByEvaluatingJavaScriptFromString:jsString];
}
return [ super webViewDidFinishLoad:theWebView ];
} 
```

一切都很好，但是当我运行应用程序时，没有显示任何广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:14:44.403

请确保您的“theWebView”对象完成其网络加载。并且 bannerView_ 是您的对象的注册属性。

另外，我希望您只输入“MY_BANNER_UNIT_ID”来隐藏您的横幅单元 ID。

如果横幅单元 ID 正确，请检查您的 admob 设置。

最后，请使用像 Charles 或类似的 iphone 代理来验证呼叫是否正常发出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T12:28:36.140

Phonegap 已升级。它支持新功能。只需将此代码添加到您的配置中。

```
<gap:plugin name="com.admob.plugin" version="1.0.0" source="plugins.cordova.io"/> 
```

# php - 如何使用jQuery DatePicker从开始日期设置结束日期加一

> ID：11580952
> 
> 赞同：1
> 
> 时间：2012-07-20T14:02:10.897
> 
> 标签：php, jquery

我已经在我的网站上成功集成了[jQuery DatePicker](http://jqueryui.com/demos/datepicker/)，并且想知道如何设置以下内容：

1.  不允许从当前日期加上 2 天选择开始日期。例如，如果今天的日期是 2012 年 7 月 20 日，那么访问者只能选择 2012 年 7 月 22 日开始的日期。
2.  结束日期必须从开始日期加一开始。如果开始日期是 2012 年 7 月 23 日，那么结束日期应该是 12 年 7 月 24 日。

顺便说一句，我正在制作酒店预订日历。

这是我基于示例的代码：

```
<script>
    $(function() {
        $( "#sd" ).datepicker();
    });

    $(function() {
        $( "#ed" ).datepicker();
    }); 
</script>

<tr>
  <td>Check In</td>
  <td>:</td>
  <td><input name="sd" type="text" id="sd" value="<?php echo $_SESSION['checkin'] ?>" size="10"" maxlength="8" /></td>
</tr>
<tr>
  <td>Check Out</td>
  <td>:</td>
  <td><input name="ed" type="text" id="ed" value="<?php echo $_SESSION['checkout'] ?>" size="10" maxlength="10" /></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:26:39.207

您可以在[日期选择器](http://jqueryui.com/demos/datepicker/)事件中执行此操作。

```
$(function() {
    $( "#sd" ).datepicker({
        // before datepicker opens run this function
        beforeShow: function(){
            // this gets today's date       
            var theDate = new Date();
            // sets "theDate" 2 days ahead of today
            theDate.setDate(theDate.getDate() + 2);
            // set min date as 2 days from today
            $(this).datepicker('option','minDate',theDate);         
        },
        // When datepicker for start date closes run this function
        onClose: function(){
            // this gets the selected start date        
            var theDate = new Date($(this).datepicker('getDate'));
            // this sets "theDate" 1 day forward of start date
            theDate.setDate(theDate.getDate() + 1);
            // set min date for the end date as one day after start date
            $('#ed').datepicker('option','minDate',theDate);

        }
    });
    $( "#ed" ).datepicker();     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:06:35.263

请检查[Jquery: DatePicker: start/end date](https://stackoverflow.com/questions/2694126/jquery-datepicker-start-end-date)以获得答案。

长话短说 ：

```
 <script type="text/javascript">
$(document).ready(function () {

  $('#endDate').datepicker({ showOn: 'button',
      buttonImage: '../images/Calendar.png',
      buttonImageOnly: true, onSelect: function () { },
      onClose: function () { $(this).focus(); }
    });

  $('#startDate').datepicker({ showOn: 'button',
      buttonImage: '../images/Calendar.png',
      buttonImageOnly: true, onSelect:
        function (dateText, inst) {
          $('#endDate').datepicker("option", 'minDate', new Date(dateText));
        }
      ,
      onClose: function () { $(this).focus(); }
    });

}); 
```

# ruby - Resque vs Sidekiq？

> ID：11580954
> 
> 赞同：131
> 
> 时间：2012-07-20T14:02:16.510
> 
> 标签：ruby, ruby-on-rails-3, resque, sidekiq

我目前正在使用`Resque`我的后台进程，但最近我听到了很多关于`sidekiq`. 有人可以比较/区分吗？

特别是我想知道有没有办法以编程方式监控工作是否在`sidekiq`

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-07-20T14:30:48.480

### 回复：

优点：

*   不需要线程安全（几乎可以与任何 gem 一起使用）；
*   ~~没有解释器偏好（您可以使用任何 ruby​​）；~~
    [Resque 目前支持 MRI 2.3.0 或更高版本](https://github.com/resque/resque/blob/master/README.markdown)
*   大量的插件。

缺点

*   每个工作人员运行一个进程（使用更多内存）；
*   不会重试作业（无论如何，开箱即用）。

### Sidekiq：

优点

*   每个工人运行线程（使用更少的内存）；
*   更少的分叉（工作更快）；
*   开箱即用的更多选项。

缺点

*   **[巨大]需要您的代码和****所有依赖**项的线程安全。如果你用线程运行线程不安全的代码，你就是在自找麻烦；
*   在某些红宝石上比其他红宝石效果更好（推荐使用 jruby，由于 GVL（全局 VM 锁定），MRI 的效率会降低）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T21:54:45.867

从问题：

> 特别是我想知道有没有办法以编程方式监控工作是否在 sidekiq 中完成

这是一个解决方案：

1.  [Sidekiq::状态宝石](https://github.com/utgarda/sidekiq-status)
2.  批处理 API (Sidekiq Pro) -[用法](https://github.com/mperham/sidekiq/issues/536)

# c - 从 sscanf 读取问题

> ID：11580959
> 
> 赞同：1
> 
> 时间：2012-07-20T14:02:27.727
> 
> 标签：c, char, handle

所有这一切可能是一个真正简单的，但我错过了一些东西，希望你能提供帮助。好的，这是我的问题，我可以说得很简单。

我`readfile`在使用 USB 设备后返回一个缓冲区。这一切正常，我可以通过使用这样的循环来很好地输出缓冲区

```
for (long i=0; i<sizeof(buffer); i++)  //for all chars in string
{
    unsigned char c = buffer[i];

    switch (Format)
    {
        case 2:         //hex
            printf("%02x",c);
        break;
        case 1:         //asc
            printf("%c",c);
        break;
    }  //end of switch format
} 
```

当我使用 text ( `%c`) 版本时，我可以按照我预期的方式在屏幕上看到缓冲区中的数据。但是我的问题是当我使用`sscanf`. 我`strstr`用来搜索缓冲区中的一些键并用于`sscanf`检索其数据。然而，`sscanf`失败。可能是什么问题呢？

下面是我用来扫描缓冲区的代码示例，它适用于这个独立版本。上面代码中的缓冲区部分无法读取。即使我可以看到它`printf`。

```
#include <stdio.h> 
#include <string.h> 
#include <windows.h> 

int main () 
{ 
    // in my application this comes from the handle and readfile
    char buffer[255]="CODE-12345.MEP-12453.PRD-222.CODE-12355" ;    
    //
    int i; 
    int codes[256];  
    char *pos = buffer;  
    size_t current = 0;  
    //  
    while ((pos=strstr(pos, "PRD")) != NULL) {  
        if (sscanf(pos, "PRD - %d", codes+current))  
            ++current;  
        pos += 4;  
    }  

    for (i=0; i<current; i++) 
        printf("%d\n", codes[i]); 
    system("pause");
    return 0; 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:18:56.957

问题是，您`ReadFile`在您感兴趣的数据之前给了您不可打印的字符，特别是`'\0'`在开头带有 a 。由于 C 中的字符串是 NUL 终止的，所有标准函数都假定缓冲区中没有任何内容。

我不知道您正在阅读的究竟是什么，但也许您正在阅读包含标题的消息？在这种情况下，您应该先跳过标题。

盲目尝试解决问题，你可以手动跳过坏字符，假设它们都在开头。

首先，让我们确保缓冲区始终是 NUL 终止的：

```
char buffer[1000 + 1];    // +1 in case it read all 1000 characters
ReadFile(h,buffer,0x224,&read,NULL);
buffer[read] = '\0'; 
```

然后，我们知道有.`read`填充的字节数`ReadFile`。我们首先需要从那里回过头来找出好的数据从哪里开始。然后，我们需要再往前走，找到数据不感兴趣的第一个地方。请注意，我假设在消息的末尾没有可打印的字符。如果有，那么这将变得更加复杂。在这种情况下，最好自己编写`strstr`不终止于`'\0'`，但读取到给定长度的内容。

所以而不是

```
char *pos = buffer; 
```

我们的确是

```
// strip away the bad part in the end
for (; read > 0; --read)
    if (buffer[read - 1] >= ' ' && buffer[read - 1] <= 126)
        break;
buffer[read] = '\0';
// find where the good data start
int good_position;
for (good_position = read; good_position > 0; --good_position)
    if (buffer[good_position - 1] < ' ' || buffer[good_position - 1] > 126)
        break;
char *pos = buffer + good_position; 
```

其余的可以保持不变。

注意：我从数组的后面开始，因为假设开头是标题，那么它可能包含可能被解释为可打印字符的数据。另一方面，最后它可能是全零或什么的。

# javascript - 将命令行参数发送到 npm 脚本

> ID：11580961
> 
> 赞同：1120
> 
> 时间：2012-07-20T14:02:36.277
> 
> 标签：javascript, node.js, npm

我目前的`scripts`部分`package.json`如下所示：

```
"scripts": {
    "start": "node ./script.js server"
} 
```

...这意味着我可以运行`npm start`以启动服务器。到现在为止还挺好。

但是，我希望能够运行类似的东西`npm start 8080`并将参数传递给`script.js`（例如`npm start 8080`=> `node ./script.js server 8080`）。这可能吗？

* * *

## 回答 #1

> 赞同：1535
> 
> 时间：2013-01-18T17:20:59.277

## npm 2 及更新版本

自 npm 2 (2014) 以来，可以[将 args 传递给。`npm run`](https://github.com/npm/npm/pull/5518)语法如下：

`npm run <command> [-- <args>]`

注意`--`分隔符，用于分隔传递给`npm`命令本身的参数和传递给脚本的参数。

举个例子`package.json`：

```
 "scripts": {
    "grunt": "grunt",
    "server": "node server.js"
  } 
```

以下是将参数传递给这些脚本的方法：

```
npm run grunt -- task:target  // invokes `grunt task:target`
npm run server -- --port=1337 // invokes `node server.js --port=1337` 
```

*注意*：**如果您的参数不以`-`or开头，则不需要`--`显式分隔符；`--`但为了清楚起见，最好还是这样做。**

```
npm run grunt task:target     // invokes `grunt task:target` 
```

请注意下面的行为差异（`test.js`has ）：以or`console.log(process.argv)`开头的参数*传递给**而不是传递给 script*，并在那里默默地吞下。`-``--` *`npm`*

```
$ npm run test foobar
['C:\\Program Files\\nodejs\\node.exe', 'C:\\git\\myrepo\\test.js',  'foobar']

$ npm run test -foobar
['C:\\Program Files\\nodejs\\node.exe', 'C:\\git\\myrepo\\test.js']

$ npm run test --foobar
['C:\\Program Files\\nodejs\\node.exe', 'C:\\git\\myrepo\\test.js']

$ npm run test -- foobar
['C:\\Program Files\\nodejs\\node.exe', 'C:\\git\\myrepo\\test.js', 'foobar']

$ npm run test -- -foobar
['C:\\Program Files\\nodejs\\node.exe', 'C:\\git\\myrepo\\test.js', '-foobar']

$ npm run test -- --foobar
['C:\\Program Files\\nodejs\\node.exe', 'C:\\git\\myrepo\\test.js', '--foobar'] 
```

当您使用*npm 实际*使用的参数时，差异会更加明显：

```
$ npm test --help      // this is disguised `npm --help test`
npm test [-- <args>]

aliases: tst, t 
```

要获取参数值，[请参阅此问题](https://stackoverflow.com/q/4351521/245966)。要读取命名参数，最好使用[yargs](https://github.com/yargs/yargs)或[minimist 之](https://github.com/substack/minimist)类的解析库；nodejs`process.argv`全局公开，包含命令行参数值，但这是一个低级 API（空格分隔的字符串数组，由操作系统提供给节点可执行文件）。

* * *

~~**编辑 2013.10.03：**目前无法直接使用。但是[打开了一个相关的 GitHub 问题`npm`](https://github.com/isaacs/npm/issues/3494)来实现您要求的行为。似乎共识是实现这一点，但这取决于之前解决的另一个问题。~~

* * *

**原始答案（2013.01）：**作为某种解决方法（虽然不是很方便），您可以执行以下操作：

`package.json`从is说出你的包名`myPackage`，你也有

```
"scripts": {
    "start": "node ./script.js server"
} 
```

然后添加`package.json`：

```
"config": {
    "myPort": "8080"
} 
```

在你的`script.js`：

```
// defaulting to 8080 in case if script invoked not via "npm run-script" but directly
var port = process.env.npm_package_config_myPort || 8080 
```

这样，默认情况下`npm start`将使用 8080。但是您可以对其进行配置（该值将存储`npm`在其内部存储中）：

```
npm config set myPackage:myPort 9090 
```

然后，在调用时`npm start`，将使用 9090（默认 from`package.json`被覆盖）。

* * *

## 回答 #2

> 赞同：291
> 
> 时间：2014-08-18T04:48:47.923

您要求能够运行*类似* `npm start 8080`. 这是可能的，无需`script.js`如下修改或配置文件。

例如，在您的`"scripts"`JSON 值中，包括--

```
"start": "node ./script.js server $PORT" 
```

然后从命令行：

```
$ PORT=8080 npm start 
```

我已经确认这可以使用 bash 和 npm 1.4.23。请注意，此解决方法不需要解决 GitHub npm[问题 #3494](https://github.com/npm/npm/issues/3494)。

* * *

## 回答 #3

> 赞同：121
> 
> 时间：2013-10-15T12:27:10.833

你也可以这样做：

在`package.json`：

```
"scripts": {
    "cool": "./cool.js"
} 
```

在`cool.js`：

```
 console.log({ myVar: process.env.npm_config_myVar }); 
```

在 CLI 中：

```
npm --myVar=something run-script cool 
```

应该输出：

```
{ myVar: 'something' } 
```

更新：使用 npm 3.10.3，它似乎将`process.env.npm_config_`变量小写？我也在使用`better-npm-run`，所以我不确定这是否是普通的默认行为，但这个答案*是*有效的。而不是`process.env.npm_config_myVar`，尝试`process.env.npm_config_myvar`

* * *

## 回答 #4

> 赞同：89
> 
> 时间：2016-03-30T12:43:12.390

*jakub.g*的答案是正确的，但是使用 grunt 的示例似乎有点复杂。

所以我更简单的答案：

**- 向 npm 脚本发送命令行参数**

将命令行参数发送到 npm 脚本的语法：

```
npm run [command] [-- <args>] 
```

想象一下，我们的 package.json 中有一个 npm start 任务来启动 webpack 开发服务器：

```
"scripts": {
  "start": "webpack-dev-server --port 5000"
}, 
```

我们从命令行运行它`npm start`

现在，如果我们想将一个端口传递给 npm 脚本：

```
"scripts": {
  "start": "webpack-dev-server --port process.env.port || 8080"
}, 
```

运行它并通过命令行传递端口，例如 5000，如下所示：

```
npm start --port:5000 
```

**- 使用 package.json 配置：**

正如*jakub.g*所提到的，您也可以在*package.json的配置中设置参数*

```
"config": {
  "myPort": "5000"
}

"scripts": {
  "start": "webpack-dev-server --port process.env.npm_package_config_myPort || 8080"
}, 
```

`npm start`将使用配置中指定的端口，或者您可以覆盖它

```
npm config set myPackage:myPort 3000 
```

**- 在你的 npm 脚本中设置一个参数**

读取 npm 脚本中的变量集的示例。在这个例子中`NODE_ENV`

```
"scripts": {
  "start:prod": "NODE_ENV=prod node server.js",
  "start:dev": "NODE_ENV=dev node server.js"
}, 
```

*在prod*或*dev*中读取*server.js*中的NODE_ENV

 **```
var env = process.env.NODE_ENV || 'prod'

if(env === 'dev'){
    var app = require("./serverDev.js");
} else {
    var app = require("./serverProd.js");
} 
```

* * *

## 回答 #5

> 赞同：76
> 
> 时间：2014-10-24T10:03:01.430

从**npm 2.x**开始，您可以通过分隔[将 args 传递给运行脚本](https://github.com/npm/npm/pull/5518)`--`

**终端**

```
npm run-script start -- --foo=3 
```

**包.json**

```
"start": "node ./index.js" 
```

**索引.js**

```
console.log('process.argv', process.argv); 
```

* * *

## 回答 #6

> 赞同：51
> 
> 时间：2020-02-28T20:19:18.773

我过去一直在使用这种单线器，在离开 Node.js 一段时间后，最近不得不尝试重新发现它。与@francoisrv 提到的解决方案类似，它利用了`node_config_*`变量。

创建以下最小`package.json`文件：

```
{
  "name": "argument",
  "version": "1.0.0",
  "scripts": {
    "argument": "echo \"The value of --foo is '${npm_config_foo}'\""
  }
} 
```

运行以下命令：

```
npm run argument --foo=bar 
```

观察以下输出：

> --foo 的值为 'bar'

所有这些都很好地记录在 npm 官方文档中：

*   [https://docs.npmjs.com/using-npm/config](https://docs.npmjs.com/using-npm/config)

**注意：**[环境变量](https://docs.npmjs.com/using-npm/config#environment-variables)标题解释了脚本中的变量的行为与文档中定义的不同。在*区分大小写*以及参数是用*空格还是等号*定义时都是如此。

**注意：**如果您使用带连字符的参数，这些将在相应的环境变量中替换为下划线。例如，`npm run example --foo-bar=baz`将对应于`${npm_config_foo_bar}`。

**注意：**对于非 WSL Windows 用户，请参阅下面@Doctor Blue 的评论... TL;DR 替换`${npm_config_foo}`为`%npm_config_foo%`.

* * *

## 回答 #7

> 赞同：43
> 
> 时间：2017-09-10T07:45:18.073

在您的代码中使用，然后只需为您的脚本值条目`process.argv`提供尾随。`$*`

例如，使用一个简单的脚本尝试它，该脚本只将提供的参数记录到标准输出`echoargs.js`：

```
console.log('arguments: ' + process.argv.slice(2)); 
```

包.json：

```
"scripts": {
    "start": "node echoargs.js $*"
} 
```

例子：

```
> npm start 1 2 3
arguments: 1,2,3 
```

`process.argv[0]`是可执行文件（节点），`process.argv[1]`是您的脚本。

*使用 npm v5.3.0 和 node v8.4.0 测试*

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2015-06-18T05:16:35.893

如果您想将参数传递到 npm 脚本的中间，而不是将它们附加到末尾，那么内联环境变量似乎可以很好地工作：

```
"scripts": {
  "dev": "BABEL_ARGS=-w npm run build && cd lib/server && nodemon index.js",
  "start": "npm run build && node lib/server/index.js",
  "build": "mkdir -p lib && babel $BABEL_ARGS -s inline --stage 0 src -d lib",
}, 
```

在这里，`npm run dev`将`-w`watch 标志传递给 babel，但`npm run start`只运行一次常规构建。

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2019-12-27T14:21:20.867

上面的大多数答案都只是将参数传递到由 npm 调用的 NodeJS 脚本中。我的解决方案是通用的。

只需使用 shell 解释器（例如`sh`）调用包装 npm 脚本并像往常一样传递参数。唯一的例外是第一个参数编号是`0`。

例如，您想添加 npm script `someprogram --env=<argument_1>`，其中`someprogram`仅打印`env`参数的值：

## 包.json

```
"scripts": {
  "command": "sh -c 'someprogram --env=$0'"
} 
```

当你运行它时：

```
% npm run -s command my-environment
my-environment 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2021-01-01T14:22:00.167

*对于 Windows 上的 PowerShell 用户*

接受的答案对我来说不适用于 npm 6.14。无论是添加 no`--`还是包括它一次都不起作用。但是，在论点之前放置`--`两次或放置一次就可以了。`"--"`例子：

```
npm run <my_script> -- -- <my arguments like --this> 
```

## 怀疑原因

就像在 bash 中一样，`--`指示 PowerShell 将所有以下参数视为文字字符串，而不是选项（[例如，请参阅此答案](https://stackoverflow.com/questions/15780174/powershell-command-line-parameters-and)）。问题似乎是该命令的解释比预期的多一次，失去了`'--'`. 例如，通过做

```
npm run <my_script> -- --option value 
```

npm 将运行

```
<my_script> value 
```

然而，做

```
npm run <my_script> "--" --option value 
```

结果是

```
<my_script> "--option" "value" 
```

效果很好。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2014-06-18T03:44:19.517

这并不能真正回答您的问题，但您始终可以使用环境变量：

```
"scripts": {
    "start": "PORT=3000 node server.js"
} 
```

然后在你的 server.js 文件中：

```
var port = process.env.PORT || 3000; 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-05-12T20:09:28.793

当我试图通过运行 sequelize seed:generate cli 命令来解决我的问题时，我发现了这个问题：

```
node_modules/.bin/sequelize seed:generate --name=user 
```

让我进入正题。我想在我的**package.json**文件中有一个简短的脚本命令并同时提供 --name 参数

经过一些实验后得到了答案。这是我在**package.json中的命令**

```
"scripts: {
  "seed:generate":"NODE_ENV=development node_modules/.bin/sequelize seed:generate"
} 
```

**...这是在终端中运行它以为用户**生成种子文件的示例

 **```
> yarn seed:generate --name=user

> npm run seed:generate -- --name=user 
```

供参考

```
yarn -v
1.6.0

npm -v
5.6.0 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-01-08T19:02:38.183

**注意：**这种方法会即时修改您`package.json`的，如果您别无选择，请使用它。

我必须将命令行参数传递给我的脚本，例如：

```
"scripts": {
    "start": "npm run build && npm run watch",
    "watch": "concurrently  \"npm run watch-ts\" \"npm run watch-node\"",
    ...
} 
```

所以，这意味着我用`npm run start`.

现在，如果我想传递一些论点，我可能会从以下开始：

```
npm run start -- --config=someConfig 
```

它的作用是：`npm run build && npm run watch -- --config=someConfig`. 问题在于，它总是将参数附加到脚本的末尾。这意味着所有链接的脚本都没有得到这些参数（Args 可能是也可能不是所有人都需要，但那是另一回事。）。此外，当调用链接的脚本时，这些脚本将不会获得传递的参数。即`watch`脚本不会得到传递的参数。

我的应用程序的生产用法是`.exe`，因此在 exe 中传递参数可以正常工作，但如果想在开发过程中这样做，它会变得有问题。

我找不到任何合适的方法来实现这一点，所以这就是我尝试过的。

我创建了一个 javascript 文件：`start-script.js`在应用程序的父级，我有一个“default.package.json”，而不是维护“package.json”，我维护“default.package.json”。的目的`start-script.json`是读取`default.package.json`、提取`scripts`和查找，`npm run scriptname`然后将传递的参数附加到这些脚本中。在此之后，它将创建一个新`package.json`的并使用修改后的脚本从 default.package.json 复制数据，然后调用`npm run start`.

```
const fs = require('fs');
const { spawn } = require('child_process');

// open default.package.json
const defaultPackage = fs.readFileSync('./default.package.json');
try {
    const packageOb = JSON.parse(defaultPackage);
    // loop over the scripts present in this object, edit them with flags
    if ('scripts' in packageOb && process.argv.length > 2) {

        const passedFlags = ` -- ${process.argv.slice(2).join(' ')}`;
        // assuming the script names have words, : or -, modify the regex if required.
        const regexPattern = /(npm run [\w:-]*)/g;
        const scriptsWithFlags = Object.entries(packageOb.scripts).reduce((acc, [key, value]) => {
            const patternMatches = value.match(regexPattern);
            // loop over all the matched strings and attach the desired flags.
            if (patternMatches) {
                for (let eachMatchedPattern of patternMatches) {
                    const startIndex = value.indexOf(eachMatchedPattern);
                    const endIndex = startIndex + eachMatchedPattern.length;
                    // save the string which doen't fall in this matched pattern range.
                    value = value.slice(0, startIndex) + eachMatchedPattern + passedFlags + value.slice(endIndex);
                }
            }
            acc[key] = value;
            return acc;
        }, {});
        packageOb.scripts = scriptsWithFlags;
    }

    const modifiedJSON = JSON.stringify(packageOb, null, 4);
    fs.writeFileSync('./package.json', modifiedJSON);

    // now run your npm start script
    let cmd = 'npm';
    // check if this works in your OS
    if (process.platform === 'win32') {
        cmd = 'npm.cmd';    // https://github.com/nodejs/node/issues/3675
    }
    spawn(cmd, ['run', 'start'], { stdio: 'inherit' });

} catch(e) {
    console.log('Error while parsing default.package.json', e);
} 
```

现在，`npm run start`我不做，而是做`node start-script.js --c=somethis --r=somethingElse`

初始运行看起来不错，但尚未彻底测试。如果您喜欢应用程序开发，请使用它。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-10-20T13:25:00.910

我发现可以像向 Node.js 一样传递变量：

```
// index.js
console.log(process.env.TEST_ENV_VAR) 
```

```
// package.json
...
"scripts": { "start": "node index.js" },
... 
```

```
TEST_ENV_VAR=hello npm start 
```

打印出“你好”

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-07-31T05:16:24.170

据我所知，当人们想以更简单的方式运行脚本时，他们会使用 package.json 脚本。例如，要使用`nodemon`安装在本地 node_modules 中的，我们不能`nodemon`直接从 cli 调用，但我们可以使用`./node_modules/nodemon/nodemon.js`. 所以，为了简化这个冗长的输入，我们可以把这个...

```
    ...

    脚本：{
      '开始'：'nodemon app.js'
    }

    ...

```

...然后调用`npm start`以 app.js 作为第一个参数的“nodemon”。

我想说的是，如果您只想使用`node`命令启动服务器，我认为您不需要使用`scripts`. 打字`npm start`或`node app.js`有同样的努力。

但是，如果您确实想使用`nodemon`，并且想要传递动态参数，请不要使用`script`。尝试改用符号链接。

例如，将迁移与`sequelize`. 我创建了一个符号链接...

`ln -s node_modules/sequelize/bin/sequelize sequelize`

...而且我可以通过任何争论当我称之为...

```
./sequlize -h /* show help */

./sequelize -m /* upgrade migration */

./sequelize -m -u /* downgrade migration */ 
```

ETC...

在这一点上，使用符号链接是我能想到的最好方法，但我并不认为这是最好的做法。

我也希望您对我的回答提出意见。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-03-14T01:02:22.713

我知道已经有一个批准的答案，但我有点喜欢这种 JSON 方法。

```
npm start '{"PROJECT_NAME_STR":"my amazing stuff", "CRAZY_ARR":[0,7,"hungry"], "MAGICAL_NUMBER_INT": 42, "THING_BOO":true}'; 
```

通常我有 1 个我需要的 var，例如项目名称，所以我觉得这很简单。

我的 package.json 中也经常有这样的东西

```
"scripts": {
    "start": "NODE_ENV=development node local.js"
} 
```

并且贪婪我想要“全部”，NODE_ENV*和*CMD 行 arg 的东西。

您只需在文件中访问这些内容（在我的情况下为 local.js）

```
console.log(process.env.NODE_ENV, starter_obj.CRAZY_ARR, starter_obj.PROJECT_NAME_STR, starter_obj.MAGICAL_NUMBER_INT, starter_obj.THING_BOO); 
```

你只需要在它上面放一点（我正在运行 v10.16.0 btw）

```
var starter_obj = JSON.parse(JSON.parse(process.env.npm_config_argv).remain[0]); 
```

Anyhoo，问题已经回答了。想我会分享，因为我经常使用这种方法。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-31T06:48:15.163

**npm run script_target -- <argument>**基本上这是传递命令行参数的方式，但它只在脚本只有一个命令运行的情况下才有效，就像我正在运行一个命令，即**npm run start -- 4200**

```
"script":{
       "start" : "ng serve --port="
 } 
```

这将运行以传递命令行参数，但是如果我们一起运行多个命令，例如**npm run build c:/workspace/file**

```
"script":{
       "build" : "copy c:/file <arg> && ng build"
 } 
```

但它会在运行**copy c:/file && ng build c:/work space/file**时像这样解释 ，我们应该像这样 **copy c:/file c:/work space/file && ng build**

注意：-因此命令行参数仅在脚本中只有一个命令的情况下才起作用。

**我读了上面的一些答案，其中一些人正在写你可以使用 $ 符号访问命令行参数，但这不会起作用**

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-21T10:10:30.270

我解决了这样的问题，看看`test-watch`脚本：

```
"scripts": {
    "dev": "tsc-watch --onSuccess \"node ./dist/server.js\"",
    "test": "tsc && cross-env NODE_OPTIONS=--experimental-vm-modules NODE_NO_WARNINGS=1 jest",
    "test-watch": "cross-env NODE_OPTIONS=--experimental-vm-modules NODE_NO_WARNINGS=1 tsc-watch --onSuccess",
  }, 
```

您可以像这样调用`test-watch`脚本：

```
// Run all tests with odata in their name
npm run test-watch "jest odata" 
```****

# html - 如何修复 CSS 滑块中的锚点？

> ID：11580964
> 
> 赞同：0
> 
> 时间：2012-07-20T14:02:43.673
> 
> 标签：html, css, anchor, haml, sass

我有一个没有脚本的滑块。但是有一个小问题，它与锚点一起工作，所以页面一直滚动，当开关滑动时。有没有什么办法解决这一问题？如果我添加 event.preventDefault()，滑块就不能工作了。

我从这个网站上拿的：[手风琴](http://www.sitepoint.com/css3-horizontal-accordion-using-target-selector/#fbid=bkp8srz3DX9)

这是我的haml代码：

```
%article.accordion
  %section#slide1.blue
    %h2 
      = link_to 'Slide 1', '#slide1'
    %p Some text
  %section#slide2.grey
    %h2 
      = link_to 'Slide 2', '#slide2'
    %p Some text
  %section#slide3.green
    %h2 
      = link_to 'Slide 3', '#slide3'
    %p Some text
  %section#slide4.light-blue
    %h2
      = link_to 'Slide 4', '#slide4'
    %p Some text 
```

很骚：

```
article.accordion
  display: block
  width: 100%
  margin: 0  auto
  overflow: auto
  section
    position: relative
    display: block
    float: left
    width: 4%
    height: 370px
    overflow: hidden
    margin: 1px
    h2
      position: absolute
      font-size: 1em
      font-weight: bold
      width: 185px
      height: 4%
      top: 185px
      text-align: left
      right: 0
      text-indent: 1em
      padding: 0
      margin: 0
      color: #ddd
      -webkit-transform-origin: 100% 0%
      -moz-transform-origin: 100% 0%
      -ms-transform-origin: 100% 0%
      -o-transform-origin: 100% 0%
      transform-origin: 100% 0%
      -webkit-transform: rotate(90deg)
      -moz-transform: rotate(90deg)
      -ms-transform: rotate(90deg)
      -o-transform: rotate(90deg)
      transform: rotate(90deg)
      a
        display: block
        width: 100%
        line-height: 2.8em
        text-decoration: none
        color: inherit
        outline: 0 none
    &:target
      width: 87%
      padding: 0 1em
      color: $color-blue
      background-color: #fff
      h2  
        color: $color-white

article.accordion
  position:relative
  section, section h2
    -webkit-transition: all 1s ease
    -moz-transition: all 1s ease
    -ms-transition: all 1s ease
    -o-transition: all 1s ease
    transition: all 1s ease 
```

# sharepoint-2010 - 前 10 名过滤器仪表板设计师

> ID：11580967
> 
> 赞同：2
> 
> 时间：2012-07-20T14:02:49.630
> 
> 标签：sharepoint-2010, performancepoint, dashboard-designer

我正在使用性能点在 Sharepoint 2010 BI 中心显示报告。我的要求是默认显示所有层次结构级别的前 10 项。用户不应右键单击并选择前 10 个过滤器，而是默认情况下报告应显示前 10 个项目。我不知道我应该如何实现这一点。

**我尝试过的过程**：

我创建了一个过滤器以在下拉列表中显示区域，并希望将其连接到我的报告，并根据区域选择显示每个客户中的前 10 名客户和前 10 名产品。

有人可以帮我解决这个问题吗

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:13:51.157

在分析服务多维数据集中设置 topcount 命名集，并将此集用作报告的基础。您应该创建尽可能多的命名集，因为您有不同的层次结构。

[有关 Microsoft 开发人员网络的更多信息，请参阅此链接](http://msdn.microsoft.com/en-us/library/ms144792.aspx)

# c++ - C 和 C++ 与 extern "C" 的链接

> ID：11580968
> 
> 赞同：4
> 
> 时间：2012-07-20T14:02:50.783
> 
> 标签：c++, c, extern, linkage

我在 .h 文件中定义了一个 C++ 函数，如下所示并在 .cpp 文件中实现：

```
extern "C" void func(bool first, float min, float* state[6], float* err[6][6])
{
    //uses vectors and classes and other C++ constructs
} 
```

如何在 C 文件中调用 func？如何设置我的文件架构/makefile 来编译它？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T14:07:12.133

您以正常方式从 C 调用该函数。但是，您需要将 包装`extern "C"`在预处理器宏中以防止 C 编译器看到它：

```
#ifndef __cplusplus
extern "C"
#endif
void func(bool first, float min, float* state[6], float* err[6][6]); 
```

假设您正在使用 GCC，然后使用 编译 C 代码`gcc`，使用 编译 C++ 代码`g++`，然后使用 链接`g++`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:09:28.430

要在 C 中调用它，您需要做的就是正常调用它。因为您告诉编译器使用 C 调用约定和 ABI with `extern "C"`，所以您可以正常调用它：

```
func(args); 
```

对于编译器，将其用于 C++：

```
g++ -c -o myfunc.o myfunc.cpp 
```

然后对于C：

```
gcc -c -o main.o somec.c 
```

比链接：

```
g++ -o main main.o myfunc.o 
```

确保函数的 C++ 标头**仅使用 C CONSTRUCTS**。因此，请改为`<vector>`在`.cpp`文件中包含类似的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T14:06:58.807

在 C 中使用

```
func(/* put arguments here */); 
```

通过说 extern "C" 你是在要求编译器不要破坏你的名字。否则，C++ 编译器会倾向于在链接器之前破坏它们（即添加额外的符号以使它们唯一）。

您还需要确保已设置为使用 C 调用约定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:20:50.010

```
//header file included from both C and C++ files

#ifndef __cplusplus
#include <stdbool.h> // for C99 type bool
#endif

#ifdef __cplusplus
extern "C" {
#endif

void func(bool first, float min, float* state[6], float* err[6][6]);

#ifdef __cplusplus
} // extern "C"
#endif 
```

```
// cpp file
#include "the_above_header.h"
#include <vector>

extern "C" void func(bool first, float min, float* state[6], float* err[6][6]);
{
    //uses vectors and classes and other C++ constructs
}

// c file
#include "the_above_header.h"

int main() {
    bool b;
    float f;
    float *s[6];
    float *err[6][6];
    func(b,f,s,err);
} 
```

# php - 无法从基于 url CI 的站点中删除 index.php

> ID：11580970
> 
> 赞同：0
> 
> 时间：2012-07-20T14:03:07.090
> 
> 标签：php, codeigniter, mod-rewrite, ubuntu

我有基于 Code Igniter 的站点，它位于 /var/www/mysite 文件夹中的 ubuntu 12.04 上。我的 ubuntu 用作服务器，因此我通过其他计算机访问我的站点，但两台计算机都在 LAN 网络上。我使用[http://xxx.yyy.zzz.ttt/mysite](http://xxx.yyy.zzz.ttt/mysite)网址访问它。

我遇到的问题是我不能使用没有“index.php”的url。所以我有[http://xxx.yyy.zzz.ttt/mysite/index.php/phpinfo](http://xxx.yyy.zzz.ttt/mysite/index.php/phpinfo)来访问我的控制器 phpinfo 而不是[http://xxx.yyy.zzz.ttt/mysite/phpinfo](http://xxx.yyy.zzz.ttt/mysite/phpinfo)

我已经很好地检查了 mod_revrite[在这里](https://stackoverflow.com/questions/9021425/how-to-check-if-mod-rewrite-is-enabled-in-php)可以很好地工作 并且还检查了 mysite 中的文件夹、文件和子文件夹是否具有所有 777 文件权限。

我还在 .htaccess 文件中添加了所有必要的规则，但仍然没有成功

知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:07:53.360

我要做的第一件事是确保您遵循所有[CI 说明](http://codeigniter.com/user_guide/general/urls.html)。

可能是您没有将配置文件更新为空白字符串，而不是使用 index.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:55:00.530

你知道是什么问题吗。

sites-available 中的默认文件有选项

AllowOverride None for /var/wwww

我将其设置为 All 并且成功了。:)

干杯:)

# algorithm - 如何从文件中删除重复项？

> ID：11580971
> 
> 赞同：1
> 
> 时间：2012-07-20T14:03:12.820
> 
> 标签：algorithm, data-structures, language-agnostic

如何从大数字的大文件中删除重复项？这是一个关于算法和数据结构的面试问题，而不是`sort -u`诸如此类的问题。

我假设该文件不适合内存并且数字范围足够大，因此我不能使用内存计数/桶排序。

唯一的选择是对文件进行排序（例如`merge sort`）并再次传递排序后的文件以过滤掉重复项。

是否有意义。还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:16:11.583

如果您在合并排序中使用“合并”（又名“联合”）的重复删除变体，您甚至不需要单独传递已排序的数据。哈希表应该是空的以表现良好，即比文件本身还要大 - 我们被告知文件本身*很大*。

查找多路合并（例如[此处](http://www.scribd.com/wahid311/d/35455946/114-Multiway-Merging)）和外部排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:05:37.697

是的，解决方案是有道理的。

另一种方法是构建基于文件系统的哈希表，并将其作为一个集合进行维护。首先迭代所有元素并将它们插入到您的集合中，然后 - 在第二次迭代中，打印集合中的所有元素。

就大 O 复杂性而言，执行和数据相关的性能更好，哈希提供`O(n)`时间平均情况和`O(n^2)`最坏情况，而合并排序选项提供更稳定的`O(nlogn)`解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:20:57.437

Mergesort 或 Timsort（这是一种改进的合并排序）是一个好主意。例如：http : [//stromberg.dnsalias.org/~strombrg/sort-comparison/](http://stromberg.dnsalias.org/~strombrg/sort-comparison/)

您可能还可以从布隆过滤器中获得一些里程。它是一种概率数据结构，对内存的要求很低。您可以使用布隆过滤器调整错误概率。EG：[http](http://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/) ://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/ 您可以使用一个来丢弃绝对唯一的值，然后通过其他方法更仔细地检查可能不是唯一的值. 如果您的输入数据集有很多重复项，这将特别有价值。它不需要直接比较元素，它只是使用可能大量的散列函数对元素进行散列。

您还可以使用磁盘 BTree 或 2-3 树或类似的。这些通常存储在磁盘上，并按键顺序保持键/值对。

# mysql - 比较并连接多个表，但仅显示是否存在关系

> ID：11580972
> 
> 赞同：0
> 
> 时间：2012-07-20T14:03:17.977
> 
> 标签：mysql, sql, database

我有多个列需要比较和加入。

这是我需要用来比较其他人的表格。

**主表**

```
--Check Number-- --Reimbursement--
-----1000-----------5800.11
-----1001-----------5802.12
-----1002-----------5801.13
-----1003-----------5800.11
-----1004-----------5804.14 
```

我需要比较多个这样的表

**子表1**

```
--Check Number --Name----Total Cash---Bonus-
-----1003------John-------5500.11------300
-----1000------Jane-------5502.12------300
-----1002------Joe--------5501.13------300
-----1001------Jay--------5500.11------300
-----1004------Janie------5504.14------300 
```

**子表2**

```
--Check Number --Name----Total Cash---Bonus-
-----1013------John-------5500.11------300
-----1010------Jane-------5502.12------300
-----1002------Joe--------5501.13------300
-----1011------Jay--------5500.11------300
-----1014------Janie------5504.14------300 
```

最终结果应该是这样的

```
--Check Number --Name----Total Cash---Bonus-----Reimbursement--
-----1003------John-------5500.11------300-----------5800.11
-----1000------Jane-------5502.12------300-----------5800.11
-----1002------Joe--------5501.13------300-----------5801.13
-----1001------Jay--------5500.11------300-----------5802.12
-----1004------Janie------5504.14------300-----------5804.14 
```

**不是**

```
--Check Number --Name----Total Cash1---Bonus1---------Total Cash2---Bonus2-----Reimbursement--
-----1003--------John-------5500.11------300------------------NULL------NULL-----------5800.11
-----1000--------Jane-------5502.12------300------------------NULL------NULL-----------5800.11
-----1002--------Joe--------5501.13------300------------------NULL------NULL-----------5801.13
-----1001--------Jay--------5500.11------300------------------NULL------NULL-----------5802.12
-----1004--------Janie------5504.14------300------------------NULL------NULL-----------5804.14 
```

所以我需要将所有表与主表进行比较，并只加入具有相同支票号码的表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:14:08.467

您可以将其作为两个单独的查询并将它们联合在一起：

```
select mt.CheckNumber as CheckNumber,
  c1.name as Name,
  c1.TotalCash as TotalCash,
  c1.Bonus as Bonus,
  mt.Reimbursement as Reimbursement
from MainTable mt
  inner join ChildTable1 c1 on c1.CheckNumber = mt.CheckNumber
UNION
select mt.CheckNumber as CheckNumber,
  c2.name as Name,
  c2.TotalCash as TotalCash,
  c2.Bonus as Bonus,
  mt.Reimbursement as Reimbursement
from MainTable mt
  inner join ChildTable2 c2 on c2.CheckNumber = mt.CheckNumber 
```

# sql - 将日期时间值插入到 informix 表中失败

> ID：11580977
> 
> 赞同：4
> 
> 时间：2012-07-20T14:03:39.827
> 
> 标签：sql, datetime, informix

我正在尝试将测试值`'10.06.2011 10:24'`插入到 informix **7.3（可悲）**数据库中。目标列是

*   系统日期时间
*   长度：16
*   精度 10

虽然这些工作

```
select  to_date('10.06.2011 10:24', "%d.%m.%Y %H:%M") from test;
INSERT into test values('10.06.2011') 
```

这些不是

```
insert into test values('10.06.2011 10:24');
insert into test values(to_date('10.06.2011 10:24:00', "%d.%m.%Y %H:%M")) 
```

我尝试了更多的方法，例如添加秒数，但如果有效，则没有。我得到的所有错误都是语法错误，没有任何详细信息。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:00:17.963

`10.06.2011`您尝试插入列的日期部分的格式`DATETIME`是错误的。

使用您的示例，接受的格式是：`2011-10-06 10:24:00`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T05:29:02.853

您可以使用环境变量操纵`DATE`类型字段的呈现和解释方式。`DBDATE`将其设置为“DMY4”。将按照您显示的日期格式化日期。

但正如弗兰克所说，格式`DATETIME`是固定的：它必须是`'YYYY-MM-DD hh:mm:ss.fffff'`或部分，取决于所讨论`DATETIME`列的比例和精度。

**更新**（第二条评论有点长......）

您对“目标栏”格式的声明让我感到困扰。如果您运行以下命令：

```
dbschema -d <database> -t <table> 
```

...结果将告诉您 Informix 理解的列定义。是一个`DATE`还是一个`DATETIME`？

您可以在列中插入一个`DATETIME`值`DATE`（时间被截断），也可以在列中插入一个`DATE`值`DATETIME`（时间默认为午夜）。但该值必须能够强制转换为目标列格式，并且`DD.MM.YYYY hh:mm`对`DATETIME`.

# file-io - 大文件和其他小文件之间的有效差异

> ID：11580980
> 
> 赞同：1
> 
> 时间：2012-07-20T14:03:49.560
> 
> 标签：file-io, random, diff

我希望就这个问题得到一些专家的建议。

我有两个文本文件，一个很大（~ GB），另一个很小（~ MB）。这些文件基本上每行都有信息。我可以说较大的文件包含有关较小文件的信息子集。文件中的每一行都组织为由空格分隔的元组，通过查看这两个文件中的一个或多个列来找到差异。这两个文件都基于此类列之一（文档 ID）进行排序。

我通过在文档 ID 和行号上保留索引并在较大文件中随机访问该行以启动差异来实现它。但是这种方法很慢。我想知道这种情况的任何好的机制。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:35:36.107

如果已知文件按相同的键以相同的顺序排序，并且共享公共键的行应该完全匹配，那么`comm`可能就是您想要的 - 它具有允许您仅显示那些行的标志在两个文件之间是通用的，或者在一个文件中但不在另一个文件中的行。

# ajax - 通过 AJAX 发布数据后如何呈现视图？

> ID：11580981
> 
> 赞同：0
> 
> 时间：2012-07-20T14:03:50.503
> 
> 标签：ajax, django

我已经构建了一个可以运行的应用程序，并使用表单提交数据。提交后，视图会重定向回来以显示更改。凉爽的。Django 101。现在，我不使用表单，而是使用 Ajax 通过 POST 调用提交数据。这成功地将数据保存到数据库中。

现在，困难的部分（或者可能不是，只是很难找到）是是否可以告诉 Django 将已提交的新项目（通过 Ajax）添加到当前页面，而无需刷新页面。目前，我的应用程序保存数据，刷新后该项目显示在页面上，但这显然不是所需的结果。

如果可能的话，我想使用我目前正在使用的完全相同的视图和模板 - 基本上我想知道是否有办法用 Ajax 调用替换正常的 HTTP 请求（这会导致页面刷新） ，并获得相同的结果（使用 jQuery）。我今天大部分时间都在解决这个问题，所以在我把所有的头发都拔掉之前，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:10:07.140

我是这样做的：

有表格的页面包含这样的表格

联系人.html

```
{% include "contact_form.html" %} 
```

这样就可以重复使用了。

接下来我设置我的视图代码（这个视图代码假设联系表单需要保存到数据库，因此是 CreateView）：

```
class ContactView(CreateView):
    http_method_names = ['post']
    template_name = "contact_form.html"
    form_class = ContactForm 
    success_url = "contact_form_succes.html" 
```

这里有几点需要注意，这个视图只接受pots方法，因为表单会通过contact.html页面接收。对于这个视图，我设置了另一个模板，它是我们在contact.html 中包含的，即裸表单。

contact_form.html

```
<form method="POST" action="/contact">{% crsf_token %}
    {{ form.as_p }}
</form> 
```

现在将 javascript 添加到 contact.html 页面：

```
$("body").on("submit", 'form', function(event) {
    event.preventDefault();
    $("#contact").load($(this).attr("action"),
    $(this).serializeArray(),
    function(responseText, responseStatus) {
            // response callback
    });
 }); 
```

这会将表单发布到 ContactView 并替换 #contact 之间的任何内容，这是我们的表单。您不能使用 jquery 的 .load 函数来实现一些更花哨的 html 替换。

此代码基于现有的工作项目，但稍作修改以使解释发生的事情更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:01:56.273

我有一个非常相似的问题，这就是我让它工作的方式......

在`views.py`

```
from django.utils import simplejson
...
ctx = {some data to be returned to the page}
if ajax == True:
    return HttpResponse(simplejson.dumps(ctx), mimetype='json') 
```

然后在javascript中

```
jQuery.ajax({
    target: '#id_to_be_updated',
    type: "POST",
    url: "/",
    dataType: 'json',
    contentType: "text/javascript; charset=\"utf-8\"",
    data: {
        'foo':foo,
        'bar':bar,
    },

    success: function(data){
        $("#id_to_be_updated").append(data.foo);
    }
}); 
```

# javascript - Javascript圆形选框功能

> ID：11580986
> 
> 赞同：0
> 
> 时间：2012-07-20T14:04:25.700
> 
> 标签：javascript, prototypejs, marquee

我创建了这个脚本来模仿选取框 HTML 标记的行为：

```
function MoveNoticias() {
var valorAbs = $('moverlo').offsetLeft;
var ancho = $('moverlo').getWidth();
valorAbs = Math.abs(valorAbs);
if (  valorAbs >= ancho ) {
    $('moverlo').setStyle({ left: ancho - 100 });
    valorAbs = ancho;
}
new Effect.Move('moverlo', { x: -100, y: 0, mode: 'relative' });
setTimeout(MoveNoticias, 1);
} 
```

一切都很好，直到这一部分：

```
if (  valorAbs >= ancho ) {
    $('moverlo').setStyle({ left: ancho - 100 });
    valorAbs = ancho;
} 
```

“选框”的位置很好，但它仍然闪烁并固定在那里，没有向左滑动。

我不知道为什么，我正在努力寻找方法，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:08:59.413

您需要创建您正在滑动的内容的克隆。然后滑动它们直到到达第一个面板的末端 - 然后将位置重置为零。不要将其移回原始位置 - 直接设置样式属性即可。

# backbone.js - Backbone.js 页面布局和模型集合在全球范围内可用

> ID：11580988
> 
> 赞同：0
> 
> 时间：2012-07-20T14:04:32.977
> 
> 标签：backbone.js

我正在开发一个用于练习的简单 Backbone.js 应用程序 - 一个人物报价数据库。（`Person`有很多`Quotes`和`Comments`）

**问题**

1.  我想要两种布局。

    一种是标准的两栏布局，一栏作为侧边栏，另一栏作为内容区域。（我想将视图嵌入到该列中，并保持侧边栏不变。）

    另一种是用于身份验证的简单单列布局（我也想添加身份验证，因为这是一个练习项目）。一个带有登录表单的简单页面。显然，这种布局只会用于一个视图。

    我怎样才能做到这一点？是否有插件可以使这成为可能/容易？（本质上，有没有与 Rails 布局系统等效的东西？）

2.  在那个侧边栏上，我想要一个`Person`模型对象列表，因此`Person`每个页面上都必须提供所有对象的列表。在 Rails 中，我将通过 ApplicationController 中的简单 before_filter 来完成此操作。

    实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:26:24.917

1.  我从事的项目也需要类似的布局结构。我们有一个 Rails 应用程序，前端有两个主干实例。为了获得我们的布局，我们使用了 jQuery-UI-Layout。这将允许您创建多个代表侧边栏和列的“面板”。然后您可以简单地将您的视图渲染到每个面板中，它们将被很好地分开。

2.  当您创建报价和评论视图​​时，您可以将人员集合传递给他们，以便他们可以访问人员模型对象。

所以...

假设你有一个'main_view'，这个主视图将初始化你的 jQuery ui 布局。

```
$(this.el).layout({options}) 
```

选项将在您的报价和评论面板上设置大小。然后您创建您的视图并将它们传递给“人”集合，这是您的“人”模型的集合。

```
new App.Views.QuotePanelView({
  el: $(this.el).find('#quote_panel'),
  collection: people
}) 
```

这里的人是人的集合。评论面板也是如此。

```
var people = new People([
  {"name" : "James Cameron"},
  {"name" : "Bat Man"},
  {"name" : "Cool Guy"}
]); 
```

# c# - 如何将自定义按钮的文本属性绑定到自定义按钮的标签？

> ID：11580989
> 
> 赞同：0
> 
> 时间：2012-07-20T14:04:33.100
> 
> 标签：c#, wpf, data-binding, custom-controls

我正在为我的项目创建一个自定义按钮。我为按钮的文本创建了一个依赖属性，并在矩形上放置了一个标签。现在我想将此文本属性绑定到标签的内容属性。

我标签的代码是

```
<Label x:Name="lblContent" Content="" Margin="8,16,24,18.04" d:LayoutOverrides="Height" Background="#006C6C6C" Foreground="#FF00D6FF" FontSize="20" Padding="0" ScrollViewer.VerticalScrollBarVisibility="Disabled"/> 
```

这是我的财产

```
public CustomButton()
    {
        this.InitializeComponent();
        TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(CustomButton));
    }

    static DependencyProperty TextProperty;

    public string Text
    {
        get { return (string)base.GetValue(TextProperty); }
        set { base.SetValue(TextProperty, value); }
    } 
```

但是我怎样才能将这个数据绑定添加到它呢？我在数据绑定方面并没有真正的经验，谷歌对我没有多大帮助:(除了我的问题：是否有任何教程可以解释初学者可以理解的整个绑定主题？我发现的 msdn 或其他网站不能很好地解释它恕我直言.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:00:40.443

如果您可以显示自定义按钮的完整 XAML，这将非常有帮助，但假设 Label 是在 ControlTemplate 中创建的，您可以执行以下操作（或类似的操作）：

```
<Label x:Name="lblContent" Content="{TemplateBinding Text}" />" 
```

如果它不起作用，请编辑您的问题并为按钮添加 XAML..

# iphone - 在 ios 5 中何时使用强引用和弱引用

> ID：11580993
> 
> 赞同：3
> 
> 时间：2012-07-20T14:04:43.470
> 
> 标签：iphone, memory-management

> **可能的重复：**
> [Objective-C 中的弱和强属性设置器属性](https://stackoverflow.com/questions/7912555/weak-and-strong-property-setter-attributes-in-objective-c)

我是 iphone 开发新手。谁能告诉我何时使用强引用以及何时使用弱引用以及原子和非原子之间的区别。我浏览了很多链接，但我仍然不清楚。我还想知道在 ios5 之前使用的保留、复制和分配之间的区别。

任何帮助表示赞赏..

谢谢，拉吉

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T14:39:20.980

在设计数据时，您需要了解所有权的概念。数据向下拥有。所有权永远不会备份您的数据层次结构。如果A有一个指向B的指针，B指向C，那么C拥有A，你有一个循环引用图，由于A间接引用C和C引用A而导致内存泄漏。释放A并没有得到删除是因为 C 仍然有一个引用，除非 A 这样做，否则它不会被删除 - 一个 catch 22。

为了避免这样的情况，您使用强指针指向“向下”数据，并使用弱指针指向任何反向引用（例如父指针）。

如果一个属性是原子的，它会生成一个允许从多个线程设置它的设置器。您不能有一个线程同时更改另一个属性的竞争条件。非原子属性没有那个线程锁定系统。

最后，当您通过在对象上调用 [myObject retain] 将其分配给对象时，保留属性会增加对象的引用计数。Copy 调用 [myObject copy] 因此该属性不引用原始文件，但复制和分配只是直接分配，没有引用计数调整。

# c# - C# 比较日期范围

> ID：11580996
> 
> 赞同：0
> 
> 时间：2012-07-20T14:04:54.480
> 
> 标签：c#, .net, sql, linq

需要一些严重的脑力！我有一个问题，我试图计算两个给定日期范围内的天数多收费用。基本上我有如下发票行：

```
BillID     AccountID     BilledFrom        BillTo      Price
 34         3456         10/10/2012       10/12/2012    86p 
```

然后我有一个定价矩阵，可以是：

```
AccountID      EffectiveFrom       EffectiveTo     Price
 3456          09/09/2009          10/11/2012      86p
 3456          11/11/2012          20/11/2012      56p
 3456          21/11/2012          10/12/2013      24p
 3456          11/12/2013           null           18p -- null never expires 
```

目前，初始价格是在 BillFrom 日期介于 EffectiveFrom 和 EffectiveTo 日期之间并按天计费的情况下采用的。现在我想计算账单中的多收费用，因为您可以看到 BillTo 日期超过了 86p 行的 EffectiveTo 日期。因此，在 1 个月的时间里，客户在第 2 行被多收了费用，或者应该开始定价。我需要一个 SQL 或 C# 中的函数，这将产生：

```
OverchargeID    type      BillID       Reason       Days     Price
    1          Credit      34       PriceChange      10        36p       (86p-56p)
    2          Credit      34       PriceChange      19        64p       (86p-24p) 
```

我将处理 56000 条记录，其中可能有多达 10 个价格范围。我有下面的代码在服务器端工作，但它根本不实用，大约需要 10 分钟。对此代码的任何解决方案或修改将不胜感激。

```
foreach (InvoiceOverchargePriceChange_SelectResult line in result) {

            //Get the invoiceLineRecord
            InvoiceLine invoiceLine = _dataContext.InvoiceLines.Where(m=>m.InvoiceLineID == line.InvoiceLineID).FirstOrDefault();

            // get the prices for each line
            List<Pricing_SelectResult> prices = ctrl.Select(line.AccountID, null, null, null, null)
                                                    .Where(m=>m.BillingMethodID == line.BillingMethodID)
                                                    .OrderByDescending(m=>m.EffectiveFrom).ToList();

            // if the price count is greater than 1 then need to check if overcharges occurred
            if (prices.Count > 1) {

                DateTime date = new DateTime();
                int days = 0;
                decimal charge = 0; ;
                for (int i = 0; i < prices.Count(); i++) {
                    days = 0;
                    charge = 0;

                    //if it goes in we found our price that we used
                    if (invoiceLine.BillFrom >= prices[i].EffectiveFrom && prices[i].EffectiveTo != null) {

                        date = invoiceLine.BillTo;
                        if (prices[i].EffectiveTo == null) break;
                        //check the Bill to date does not exceed the effective To date, if it does go in
                        while (date >= prices[i].EffectiveTo) {

                            if (date == invoiceLine.BillTo) {

                                //if its first go set the price
                                charge = prices.Where(m => date >= m.EffectiveFrom).FirstOrDefault().Price;

                            }

                            if (charge == prices.Where(m => date >= m.EffectiveFrom).FirstOrDefault().Price) {

                                //increment the days counter
                                days++;
                                date = date.AddDays(-1);

                            }
                            else {

                                //insert the days and price into db here...

                                //reset the days
                                days = 0;
                                charge = prices.Where(m => date >= m.EffectiveFrom).FirstOrDefault().Price;

                            }

                        }

                    }

                }

            }

        } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:01:02.273

试试这个...

```
 select 
      ROW_NUMBER() over (order by BillID, StartDate),
      case when (billprice>pricingprice) then 'Credit' else 'Debit' end,
      BillID,
      DATEDIFF(d, startdate,enddate)+1 as days,
      billprice-pricingprice
 from
 (
      select 
           BillID, 
           case when Effectivefrom>BilledFrom then Effectivefrom else BilledFrom end startdate, 
           case when isnull(effectiveto,GETDATE())<BillTo 
                then isnull(effectiveto,GETDATE()) else billto-1 end enddate,
           bill.price as billprice,
           pricing.price as pricingprice
      from pricing
     inner join bill
                on bill.accountid= pricing.accountid 
                and (billedfrom<isnull(effectiveto,getdate())) and (BillTo>Effectivefrom)
                and bill.price <> pricing.price 
 ) v 
```

# html - jQuery Mobile：动态加载的内容使 DOM 膨胀

> ID：11580998
> 
> 赞同：3
> 
> 时间：2012-07-20T14:05:00.997
> 
> 标签：html, caching, dom, jquery-mobile

TLDR：通过 AJAX 将弹出组件注入然后替换到 div 会导致 jQM 在 div 之外插入自己的覆盖元素而不删除它们。

我有一个 jQM 网页，它在 ajax 调用成功时动态加载 div 标签的内容：

```
$("#contentPane").html(data).trigger("create"); 
```

ajax 调用可以进行多次，每次都替换 div 的先前内容。加载的内容各不相同：它们可能具有与以前相同的组件，或者它们可能完全不同。

我注意到的是，如果我注入的内容包含从页面“弹出”的 UI 组件（例如对话框或`data-native-menu = "false"`带有活动页面的主要内容 div。

例如：

```
<body>
    ...
    <div class="ui-page ui-body-b ui-page-header-fixed ui-page-active" position="fixed" data-theme="b" data-role="page">
        <div id="contentHeader" class="ui-header ui-bar-b ui-header-fixed slidedown" data-theme="b" data-position="fixed" data-role="header" role="banner">...</div>
        <div id="contentPane" class="ui-content ui-body-b" data-theme="b" data-role="content" role="main">...</div>
        <div class="ui-selectmenu ui-overlay-shadow ui-corner-all ui-body-a pop ui-selectmenu-hidden">...</div>
        <div class="ui-selectmenu-screen ui-screen-hidden"></div>
    </div>
    ...
    <div class="ui-page ui-body-c ui-dialog ui-overlay-a" data-overlay-theme="a" data-theme="c" data-role="dialog" tabindex="0" style="min-height: 399px;">
</body> 
```

问题是每当我替换“contentPane”div 的内容时，这些覆盖元素都会留在 DOM 中。如果我注入的新内容也需要覆盖元素，JQM 会创建新内容而不删除过时的内容。所以最终我的 DOM 看起来像这样：

```
<div class="ui-page ui-body-b ui-page-header-fixed ui-page-active" position="fixed" data-theme="b" data-role="page">
    <div id="contentHeader" class="ui-header ui-bar-b ui-header-fixed slidedown" data-theme="b" data-position="fixed" data-role="header" role="banner">...</div>
    <div id="contentPane" class="ui-content ui-body-b" data-theme="b" data-role="content" role="main">...</div>
    <div class="ui-selectmenu-screen ui-screen-hidden" style="height: 3150px;"></div>
    <div class="ui-selectmenu ui-overlay-shadow ui-corner-all ui-body-a pop ui-selectmenu-hidden">...</div>
    <div class="ui-selectmenu-screen ui-screen-hidden"></div>
    <div class="ui-selectmenu ui-selectmenu-hidden ui-overlay-shadow ui-corner-all ui-body-a pop">...</div>
    <div class="ui-selectmenu-screen ui-screen-hidden"></div>
    <div class="ui-selectmenu ui-selectmenu-hidden ui-overlay-shadow ui-corner-all ui-body-a pop">...</div>
    <div class="ui-selectmenu-screen ui-screen-hidden"></div>
    <div class="ui-selectmenu ui-selectmenu-hidden ui-overlay-shadow ui-corner-all ui-body-a pop">...</div>
    <div class="ui-selectmenu-screen ui-screen-hidden"></div>
    <div class="ui-selectmenu ui-selectmenu-hidden ui-overlay-shadow ui-corner-all ui-body-a pop">...</div>
</div> 
```

现在这不是一个大问题，因为它不会破坏任何功能，但是看看这是一个移动应用程序，如果它失控，膨胀 DOM 可能会导致性能下降。

我想知道是否有某种方法可以告诉 JQM 清理任何这些陈旧的 DOM 元素，或者是否有一种方法我可以检查这些覆盖中的任何一个是否已经过时，例如使用`$(".ui-overlay-shadow, .ui-overlay-a")`然后检查一些财产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:45:34.183

您可以将注入页面的元素保存到变量中，然后使用`.remove()`jQuery 中的运算符[Documentation](http://api.jquery.com/remove/)。

```
var injectedDomElement = ...;
$(document).one("pagehide", function(){
    injectedDomElement.remove();
} 
```