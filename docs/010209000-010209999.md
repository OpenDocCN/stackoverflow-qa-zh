# StackOverflow 问答 10209000-10209999

# c++ - 如果成员函数是运算符，我可以在编译时检查吗？

> ID：10209008
> 
> 赞同：1
> 
> 时间：2012-04-18T12:04:59.367
> 
> 标签：c++, templates, c++11, operator-overloading, typetraits

我将类的成员函数的签名和实际指针作为模板类的模板参数传递。有没有办法为运算符重载对此类进行不同的专门化？我试图查看`type_traits`并从中获得提示`std::is_copy_assignable`，但似乎 g++ 使用了内置函数（`__has_trivial_copy`例如）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:01:36.680

好吧，我研究了这个问题。

我认为有可能得到结果，但这相当复杂，因为类 A 想知道它自己的模板参数之一是否是类 B 的运算符，它必须首先检查 B::operator 是否存在，然后检查是否它等于模板参数。这迅速增加了任务的难度。

此外，我在测试时发现，g++ 对高级模板使用的支持仍然很差。例如，这段代码做了第2步，即假设某个成员函数存在，检查模板参数是否等于同一个成员函数：

```
#include <iostream>
using namespace std;

struct Hello{
    int helloworld(){
        return 0;
    }
    int goodbyeworld(){
        return 0;
    }
};

template<typename T1, T1, typename T2, T2> struct is_same_method{
    static constexpr bool value=false;
};

template<typename Return, typename Class, typename... Args, Return(Class::*member)(Args...)>
struct is_same_method<Return(Class::*)(Args...), member, Return(Class::*)(Args...), member>{
    static constexpr bool value=true;
};

#define method_test(a, b) is_same_method<decltype(a), a, decltype(b), b>::value

template<typename T, T> struct what_am_I_passed;

template<typename Return, typename Class, typename... Args, Return(Class::*member)(Args...)>
struct what_am_I_passed<Return(Class::*)(Args...), member>{
    static void so_what(){
        /*
         * error: ‘decltype (& Class:: helloworld)’ is not a valid type for a template constant parameter.
        */
        cout<<"you passed me "<<(method_test(member, &Class::helloworld)?"helloworld":"something else")<<endl;
    }
};

int main(){
    what_am_I_passed<decltype(&Hello::helloworld), &Hello::helloworld>::so_what();
} 
```

现在，此代码在 g++ 4.4、4.5 中失败，在 4.6.1 中崩溃，并且从 4.6.2 开始工作。

在经历了所有这些麻烦之后，我决定在运行时移植一些逻辑。这就是我的结局。

```
#include <iostream>
#include <type_traits>
using namespace std;

template<typename mem_type, mem_type mem> struct operator_type{
    enum types{
        //complete me...
        NONE=0, ADD, SUB, MUL, DIV, MOD, POW, UNM, EQ, NEQ, LT, LE, GT, GE, SUBSCRIPT, CALL
    };
    static types what(){ return NONE; }
};

typedef operator_type<int, 0>::types op_types;

template<typename Return, typename Class, typename... Args, Return(Class::*mem)(Args...)>
class operator_type<Return(Class::*)(Args...), mem>{

#define isOp(name, symbol, args)\
        template<typename Class_,int=0> static bool is##name(float&&){ return false; }\
        template<typename Class_, Return(Class_::*innermem)(Args...)=&Class_::operator symbol>\
        static bool is##name(int&&){ return innermem==mem  && (args<0 || sizeof...(Args)==args); }
#define testOp(name)    if(is##name<Class>(0)) return op_types::name

    //complete me...
    isOp(ADD, +, 1)
    isOp(SUB, -, 1)
    isOp(MUL, *, 1)
    isOp(DIV, /, 1)
    isOp(MOD, %, 1)
    isOp(POW, ^, 1)
    isOp(UNM, -, 0)
    isOp(EQ, ==, 1)
    isOp(NEQ, !=, 1)
    isOp(LT, <, 1)
    isOp(LE, <=, 1)
    isOp(GT, >, 1)
    isOp(GE, >=, 1)
    isOp(SUBSCRIPT, [], 1)
    isOp(CALL, (), -1)

public:

    static op_types what(){
        //complete me...
        testOp(ADD);
        testOp(SUB);
        testOp(MUL);
        testOp(DIV);
        testOp(MOD);
        testOp(POW);
        testOp(UNM);
        testOp(EQ);
        testOp(NEQ);
        testOp(LT);
        testOp(LE);
        testOp(GT);
        testOp(GE);
        testOp(SUBSCRIPT);
        testOp(CALL);
        return op_types::NONE;
    }
};

template<typename T, T> struct wants_to_know_operators;

template<typename Return, typename Class, typename... Args, Return(Class::*mem)(Args...)>
struct wants_to_know_operators<Return(Class::*)(Args...), mem>{
    typedef operator_type<decltype(mem), mem> my_operator_type;
    static void stuff(){
        switch(my_operator_type::what()){
        case op_types::NONE:        cout<<"this is not an operator"<<endl; break;
        case op_types::CALL:        cout<<"this is operator()"<<endl; break;
        case op_types::SUBSCRIPT:   cout<<"this is operator[]"<<endl; break;
        case op_types::SUB:         cout<<"this is operator-"<<endl; break;
        case op_types::UNM:         cout<<"this is operator- (unary)"<<endl; break;
        //complete me...
        default: cout<<"something else..."<<endl; break;
        }
    }
};

struct Test{
    void operator()(){

    }
    Test& operator-(){
        return *this;
    }
    Test& operator-(int){
        return *this;
    }
    int operator[](int){
        return 0;
    }
    int operator[](iostream){
        return 0;
    }
    int operator==(int){
        return 0;
    }
    void f(){}
};

int main(){
    wants_to_know_operators<decltype(&Test::f), &Test::f>::stuff();
    wants_to_know_operators<int(Test::*)(int), &Test::operator[]>::stuff();
    wants_to_know_operators<int(Test::*)(iostream), &Test::operator[]>::stuff();
    wants_to_know_operators<decltype(&Test::operator()), &Test::operator()>::stuff();
    wants_to_know_operators<decltype(&Test::operator==), &Test::operator==>::stuff();
    wants_to_know_operators<Test&(Test::*)(), &Test::operator- >::stuff();
    wants_to_know_operators<Test&(Test::*)(int), &Test::operator- >::stuff();
} 
```

语法有点麻烦，但它是我能用模板解决的最好的。请注意，它可以区分同一运算符的不同重载。就我的目标而言，这已经足够，甚至可能更可取，因为整个事情都是关于将 C++ 函数导出到 Lua，当然你不能在编译时将内容推送到 Lua 堆栈上。

# c#-4.0 - 在 C# 中使用 oledb 在访问中删除表

> ID：10209009
> 
> 赞同：1
> 
> 时间：2012-04-18T12:05:08.547
> 
> 标签：c#-4.0, ms-access-2007

我正在尝试通过 c# 中的编码删除在访问中创建的整个表。

我目前正在使用以下编码：

```
 string dstr = "DROP TABLE [" + in_table + "] ";
            OleDbCommand cmd1 = new OleDbCommand(dstr, con);
            cmd1.ExecuteNonQuery(); 
```

我在上述命令中收到语法错误。我也尝试不使用方括号，但错误仍然相同。

我知道上面的命令肯定有一些愚蠢的错误，但是如果有人能输入正确的命令，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:26:16.563

确保`in_table`有一些有效的表名。设置一个断点并观察。您也可以将分号 (;) 放在语句的末尾（虽然不是强制性的）。

# php - Codeigniter htaccess 不工作

> ID：10209010
> 
> 赞同：3
> 
> 时间：2012-04-18T12:05:14.057
> 
> 标签：php, .htaccess, codeigniter

我在我的网站上使用这个 htaccess 文件来删除 index.php。

```
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

但是这个文件不起作用。在 Apache 模块中启用了重写。使用的 codeigniter 版本是 2.0.1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:17:25.233

我已经在没有 codeigniter 的情况下对此进行了测试，并且可以正常工作。

我在 htdocs 下创建了一个名为“demo”的文件夹。我将“.htaccess”与您的内容+附加行（RewriteBase）一起放在那里：

```
RewriteEngine on
RewriteBase /demo/
# RewriteCond $1 !^(index\.php)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

然后是下面的“index.php”：

```
<?php
echo $_SERVER['PATH_INFO']; 
```

测试： [http://localhost/demo/hello](http://localhost/demo/hello)

结果：/你好

* * *

检查事项：

*   如果您将“.htaccess”放在文件夹中，请不要忘记添加 RewriteBase。
*   确保为您的目录启用了 FollowSymLinks。有关详细信息，请参阅[此链接](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:12:23.310

读 [这个](http://codeigniter.com/user_guide/general/urls.html)

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-18T12:07:29.543

**对于Codeigniter 3**，这可能是相当晚的解决方案

 **把它放在你的根文件夹

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

转到 apache/apache_version/conf/httpd.conf（我使用 Laragon）

放在 httpd.conf 的末尾

```
Listen 9595
<VirtualHost *:9595>
DocumentRoot "C:\laragon\www\capstone_project"
<Directory "C:\laragon\www\capstone_project">
Order allow,deny
Allow from all
AllowOverride All
</Directory>
</VirtualHost> 
```

重新启动你的apache，看看它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-25T12:20:24.703

将其复制到您的 .htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /CI_FOLDER/
#CI_FOLDER is the Location of your CI files.

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-08T14:53:04.223

检查您的 Apache 站点配置文件。在 Ubuntu 14.04 上，该文件为 /etc/apache2/sites-available/site.conf

像这样换行

```
AllowOverride None 
```

对此

```
AllowOverride All 
```

重新启动 Apache 以加载更新的 site.conf

```
sudo service apache2 restart 
```

这为我解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-18T02:32:01.613

将此代码放入 CI_Folder 的 .htaccess 文件中

```
 <IfModule mod_rewrite.c> 
    Options +FollowSymLinks 
    RewriteEngine on 
    RewriteBase /foldername/ 
    RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d 
    RewriteRule ^(.*)$ /foldername/index.php?/$1 [QSA,L] 
    </IfModule>
    # BEGIN Expire headers <ifModule mod_expires.c>
        ExpiresActive On
        ExpiresDefault "access plus 5 seconds"
        ExpiresByType image/x-icon "access plus 2592000 seconds"
        ExpiresByType image/jpeg "access plus 2592000 seconds"
        ExpiresByType image/png "access plus 2592000 seconds"
        ExpiresByType image/gif "access plus 2592000 seconds"
        ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
        ExpiresByType text/css "access plus 604800 seconds"
        ExpiresByType text/javascript "access plus 216000 seconds"
        ExpiresByType application/javascript "access plus 216000 seconds"
        ExpiresByType application/x-javascript "access plus 216000 seconds"
        ExpiresByType text/html "access plus 600 seconds"
        ExpiresByType application/xhtml+xml "access plus 600 seconds" </ifModule>
    # END Expire headers

    # BEGIN Cache-Control Headers <ifModule mod_headers.c>
        <filesMatch "\.(ico|jpe?g|png|gif|swf)$">
            Header set Cache-Control "public"
        </filesMatch>
        <filesMatch "\.(css)$">
            Header set Cache-Control "public"
        </filesMatch>
        <filesMatch "\.(js)$">
            Header set Cache-Control "private"
        </filesMatch>
        <filesMatch "\.(x?html?|php)$">
            Header set Cache-Control "private, must-revalidate"
        </filesMatch> </ifModule>
    # END Cache-Control Headers
    # BEGIN GZIP COMPRESSION <IfModule mod_gzip.c> mod_gzip_on Yes mod_gzip_dechunk Yes mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$ mod_gzip_item_include handler ^cgi-script$ mod_gzip_item_include mime ^text/.* mod_gzip_item_include mime ^application/x-javascript.* mod_gzip_item_exclude mime ^image/.* mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.* </IfModule>
    # END GZIP COMPRESSION 
```**

# iphone - 抓取视频的第一帧 - 缩略图分辨率 - iPhone

> ID：10209012
> 
> 赞同：6
> 
> 时间：2012-04-18T12:05:21.913
> 
> 标签：iphone, objective-c, ipad, video, thumbnails

我想在我的应用中显示视频的（静态）第一帧作为预览。

我已通读此线程并了解我可以使用缩略图：

[从 iPhone SDK 中的视频 url 或数据获取缩略图](https://stackoverflow.com/questions/1347562/getting-thumbnail-from-a-video-url-or-data-in-iphone-sdk)

我有两个问题：

1）缩略图的分辨率是多少？我希望将预览设置为 4:3 格式，并想知道如果放大后图像最终是否会变得模糊。

2) iPhone / iPad 的缩略图分辨率是否不同？

3) 有没有更好的方法来抓取和显示视频的第一帧？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T12:09:47.507

以下代码可能对您有所帮助

```
NSString *str = [[self.vedioArray objectAtIndex:i] valueForKey:@"vName"];
    NSURL *videoURL = [NSURL URLWithString:str] ;
    MPMoviePlayerController *player = [[[MPMoviePlayerController alloc] initWithContentURL:videoURL]autorelease];
  UIImage  *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
    player = nil; 
```

# objective-c - 如何在 Objective-C/iOS 中可靠地对命令进行排序

> ID：10209021
> 
> 赞同：0
> 
> 时间：2012-04-18T12:05:46.243
> 
> 标签：objective-c, ios, objective-c-blocks

我正在努力尝试在这里找出一些东西，并且可以使用一些指针。编写具有 Web 视图的应用程序。我希望它从一定距离开始，找到用户位置，然后放大到该点，居中，然后添加地图注释。

我了解这些要求中的每一个的机制，但是在对它们进行排序时遇到问题，以便它们按顺序发生。由于 Obj-C 的并发性，我不能指望在下一个任务开始之前完成一个任务。

我正在寻找允许我完成一项任务的解决方案，完成后，执行下一项，依此类推。我认为这将涉及块，但我只是在学习所有这些，它们让我头晕目眩。

我会很感激任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T13:00:54.027

如果您使用[NSOperation](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)和 NSOperationQueues，您可以使每个单独的操作都依赖于必须首先完成的操作。

**编辑**

这里大致介绍一下操作的使用方法。更多信息可以在并发优先编程指南的[操作队列部分找到。](http://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW1)我绝对推荐你阅读这篇文章，因为我只会介绍你可以用操作做什么的一小部分。

首先，创建您的操作。您可以创建块操作（在其中提供块）、调用操作（在其中提供 Cocoa 调用），或者您可以自己子类化 NSOperation 类并重写`main`以完成工作。

假设您选择块操作：

```
NSBlockOperation op1 = [NSBlockOperation blockOperationWithBlock: 
                          ^{
                               // Do some work.
                          }];
NSBlockOperation op2 = [NSBlockOperation blockOperationWithBlock: 
                          ^{
                               // Do some different work.
                          }];
NSBlockOperation op3 = [NSBlockOperation blockOperationWithBlock: 
                          ^{
                               // Do yet more work.
                          }]; 
```

现在，您可以将这些全部放在队列中执行。

```
NSOperationQueue* opQueue = [[NSOperationQueue alloc] init];
[opQueue addOperation: op1];
[opQueue addOperation: op2];
[opQueue addOperation: op3]; 
```

这将运行所有操作，可能并行（取决于可用的系统资源），除非您设置队列的最大并发操作计数。假设 op3 只应在 op1 和 op2 完成后完成。您可以设置依赖关系来建模关系（在将操作放入队列之前！）。

```
NSOperationQueue* opQueue = [[NSOperationQueue alloc] init];
[op3 addDependency: op1];
[op3 addDependency: op2];
[opQueue addOperation: op1];
[opQueue addOperation: op2];
[opQueue addOperation: op3]; 
```

现在 op3 只会在 op1 和 op2 完成后运行。这样做的好处是您设置了依赖关系，然后将所有操作推送到队列中并忘记它们（尽管向 op3 添加完成处理程序以告诉您它们何时完成可能是个好主意）。然后操作系统负责平衡负载与并行化和您定义的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:13:08.373

我等待某事首先完成的一种方法是将其放入返回 BOOL 的子例程中： -(BOOL)myMethod { // 此处的方法 Return YES; } 然后调用它： If (myMethod) { // 你接下来要做什么 }

# c# - 生成的服务引用可能会引发哪些异常？

> ID：10209025
> 
> 赞同：10
> 
> 时间：2012-04-18T12:06:02.080
> 
> 标签：c#, wcf, web-services, service-reference

我使用“添加服务引用...”在 Visual Studio 2010 中添加了一个 Web 服务。这会在一个名为`Reference.cs`. 现在，如果我调用其中一种方法，我不知道该方法可能会抛出什么异常。大概它可以抛出与网络相关的异常，例如`SocketException`or `IOException`？

可以在 msdn 或源代码中检查 .NET 中的常规方法，以揭示可能引发的异常，例如[File.Open](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx)。这里很清楚我应该捕获并重新抛出哪些异常以在稍后阶段显示错误消息。

**对于那些生成的方法，我怎么知道它们可能抛出什么异常？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T12:40:10.517

好吧，在这种情况下存在“标准”异常和“自定义”异常（`FaultContact`由服务开发人员定义为 s 并出现在服务合同参考中的那些）。

在第一种情况下，我想你的担忧是[`CommunicationException`](http://msdn.microsoft.com/en-us/library/system.servicemodel.communicationexception.aspx)和[`TimeoutException`](http://msdn.microsoft.com/en-us/library/system.timeoutexception.aspx)；这些记录了（[模型的基础](http://msdn.microsoft.com/en-us/library/ms729840.aspx)`ICommunicationObject.BeginOpen`）和其他“打开”方法的可能例外情况。记录了“关闭”方法。还有用于发送消息的方法，例如. 在[可能的更多中](http://msdn.microsoft.com/en-us/library/ms789039.aspx)，这些应该是可发现的。[`ICommunicationObject`](http://msdn.microsoft.com/en-us/library/system.servicemodel.icommunicationobject.aspx)[`CommunicationObjectFaultedException`](http://msdn.microsoft.com/en-us/library/system.servicemodel.communicationobjectfaultedexception.aspx)[`QuotaExceededException`](http://msdn.microsoft.com/en-us/library/system.servicemodel.quotaexceededexception.aspx)[`IRequestChannel.Request`](http://msdn.microsoft.com/en-us/library/ms195350.aspx)

值得注意的是，从上面链接的 MSDN 文章中，是这样的：

> 通道抛出的所有异常必须是 `System.TimeoutException`、`System.ServiceModel.CommunicationException`或派生自 CommunicationException 的类型。（也可能抛出 ObjectDisposedException 等异常，但仅表明调用代码误用了通道。如果正确使用了通道，则必须只抛出给定的异常。）

然后是“故障”，这是在服务端引发的异常，并且（可能，如果启用）向调用者详细说明，然后调用者可以处理该异常或抛出正确的客户端异常：

> 在产生故障时，自定义通道不应该直接发送故障，而是应该抛出异常，并由上层决定是否将该异常转换为故障以及如何发送。

该频道`State`提供了一个事件`Faulted`，您可以订阅该事件，以便在它达到这种状态时得到通知，并可能采取行动。默认情况下（不配置抑制（？））错误将作为托管异常引发；再次重申：

> 在 WCF 客户端中，客户端应用程序感兴趣的通信期间发生的 SOAP 错误将作为托管异常引发。虽然在任何程序的执行过程中都可能发生许多异常，但使用 WCF 客户端编程模型的应用程序可以期望处理作为通信结果的 [...] 两种类型的异常。

这[又是指](http://msdn.microsoft.com/en-us/library/ms732013.aspx)上面提到的`CommunicationException`和`TimeoutException`。

最后，至少现在是出乎意料的：

> `FaultException`当侦听器收到操作合同中未预期或未指定的错误时，将引发异常；这通常发生在调试应用程序并且服务将 `System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults` 属性设置为 true 时。

# macos - 每次打开终端都需要重新加载 bash 吗？

> ID：10209031
> 
> 赞同：1
> 
> 时间：2012-04-18T12:06:30.207
> 
> 标签：macos, bash, terminal, osx-lion

每次我打开终端时，我似乎都没有加载我的 bash 配置文件。
我的意思是，如果我输入：

git
节点
酿造

等等...我得到“找不到命令”

如果我运行：

> 源〜/ .bashrc

然后它解决了这个问题。我似乎必须在每次重启时都这样做

有什么办法让它自动执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:12:03.873

大概这是 Mac OS X 吧？您看到此行为的原因是 Terminal.app 创建了一个登录 shell，它仅提供源`~/.bash_profile`或`~/.profile`前者不存在。要解决您的问题，可以：

*   `~/.bashrc`从您的`~/.bash_profile`或`~/.profile`
*   将您的命令放入`~/.bash_profile`或`~/.profile`代替`~/.bashrc`
*   配置 Terminal.app 以创建交互式非登录 shell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:10:46.890

添加

```
source ~/.bashrc 
```

在`~/.profile`或`~/.bash_profile`

# javascript - JavaScript Split & jQuery .val() 我可以链接它们吗？

> ID：10209036
> 
> 赞同：2
> 
> 时间：2012-04-18T12:06:42.360
> 
> 标签：javascript, jquery

这是一个非常简单的问题...我可以将 JS 方法添加/链接`.split()`到 jQuery 的`.val()`方法吗？例如...

```
var myNewArray =  $("#myString").val().split(","); 
```

我好像弄`$("#myString").val().split`的不是Firebug中的一个函数？我以为我可以链接我的 JS 和 jQuery 方法，也许我错了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:16:39.683

你为什么不看一下[文档](http://api.jquery.com/val/)？它说：

> 返回：字符串、数字、数组

因此，您可以`.split()`在 30%（更准确地说：33.33...%）的情况下使用。这取决于您使用`.val()`的是哪个元素。

所以你的问题的答案是：这取决于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:12:11.763

是的，您可以`val()`返回一个字符串，因此在之后链接时它不是 jQuery ，检查 jquery refrence ，关于用 javascript 链接 jquery 在大多数情况下答案是否定的，因为大多数 jquery 方法返回一个 jquery 对象而不是 DOM 元素或原始 javascript类型，但在这种情况下你返回一个字符串，所以一切都应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:12:48.697

也许您的选择器找不到元素，它返回一个空的 jQuery 对象。当你`val()`在这个对象上调用方法时，你会得到`undefined`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:15:32.310

您可以使用 .val().split(",")。但我对#myString 中的内容有疑问。如果是标签，那么你必须这样写：

```
$(#myString).text().split(" "); 
```

# objective-c - 如何使 CGContextShowTextAtPoint() 自动缩小某个矩形中的文本

> ID：10209044
> 
> 赞同：1
> 
> 时间：2012-04-18T12:07:20.150
> 
> 标签：objective-c, ios, text, size, cgcontext

我正在使用 CGContextShowTextAtPoint() 手动绘制文本，因为该文本被放置在图像上并且是可读的. 图像不是静态的，所以我不能使用任何静态图像代替文本。所以我需要绘制真实的文本对象。但是，如果例如文本长度大于某个给定值，我还需要更改此文本的字体大小。UILabel 有自动缩小文本的选项，但我不知道如何让它在每个符号周围绘制边框。那么有没有办法自动收缩由 CGContextShowTextAtPoint() 手动绘制的文本，或者至少测量文本点的长度，使用特定的字体设置绘制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:12:07.070

您可以使用核心图形绘制并设置最小字体大小以调整文本大小以适应：

```
[YOURSTRING drawAtPoint:CGPointMake(1, 1) forWidth:250 withFont:[UIFont fontWithName:@"Helvetica" size:14] minFontSize:10 actualFontSize:nil lineBreakMode:UILineBreakModeTailTruncation baselineAdjustment:UIBaselineAdjustmentNone]; 
```

您还可以使用以下方法获取文本字符串的大小：

```
CGSize expectedLabelSize = [YOURSTRING sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14] constrainedToSize:CGSizeMake(MAXFLOAT, MAXFLOAT)]; 
```

# php - 错误处理和解决方法 allow_url_fopen 和 allow_url_include 在服务器上被禁用

> ID：10209046
> 
> 赞同：1
> 
> 时间：2012-04-18T12:07:32.423
> 
> 标签：php, file-get-contents, getimagesize

我的 php 应用程序中有几个函数可以传递对 file_get_contents()、file_put_contents 和 getimagesize() 的调用。

问题是，当在 php.ini 中禁用 allow_url_fopen 和 allow_url_include 时，我在这些关键功能上遇到错误。

> 警告：getimagesize() [function.getimagesize]: URL file-access is disabled in server configuration in /home/content/.../html/_sites/mysite/wp-content/themes/mytheme/functions.php 在线2534

解决这些问题的方法有哪些？

**编辑**：这些都是与调用 php 脚本位于同一网络服务器上的所有本地文件。是否有读取/写入文件内容的首选方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:15:31.240

您可以使用 curl 获取远程页面。您可以将 curl 请求的结果存储到变量和 echo() 中，而不是使用 url 包装器来获取内容。

理论上，您也可以 eval() 返回的数据。但是运行远程获取的 PHP 代码是一个巨大的安全风险，以这种方式包含的任何 PHP 代码实际上可以做任何你能做的事情。 **不要这样做！**allow_url_include 也是如此

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:18:41.133

如果您可以访问您的网络服务器，您可能需要找到您的 php.ini 文件，例如：

```
/etc/php5/apache/php.ini 
```

并使用这些选项：

```
; http://php.net/allow-url-fopen
allow_url_fopen = On

; http://php.net/allow-url-include
allow_url_include = Off 
```

如果您使用托管帐户，这些选项可能会在控制面板上以交互方式提供。

第二种解决方案可能是使用 cURL。我想您试图使用 URL 调用 getimagesize 。此处的文档：http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

```
$ch = curl_init('http://example.com/image.php');
$fp = fopen('/my/folder/flower.gif', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

# ruby - 为 Ruby 中的 elif 拼写错误触发警告或编译时错误

> ID：10209049
> 
> 赞同：4
> 
> 时间：2012-04-18T12:07:45.117
> 
> 标签：ruby

我有一个错字（哦，好吧，Python 例程），但奇怪的是 Ruby 并没有抱怨它：

```
> if false; put "NO"; elif true; puts "YE"; end
=> nil

> if false; puts "NO"; elsif true; puts "YE"; end    #proper way
YE 
```

当我意识到这是完美的 Ruby 语法时，我不得不思考了半分钟。Ruby 将其解释为第一个`if`子句命令的一部分，`elif`是一个命令，它不存在但在编译时不知道。即使打开了警告标志，Ruby 也没有发出警告。

有没有办法警告这些问题？我是否必须为此类拼写错误查找所有来源？我可以以某种方式强制这是编译时错误吗？

（我知道，它是一种动态语言，你应该通过单元测试来检测这些问题，但是在编写新代码时它仍然很烦人。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:39:29.803

在这种特定情况下，您可以选择具有适当语法高亮显示的编辑器，以直观地检测不是关键字（按原样`elsif`）。

例如，Kate 编辑器甚至对`elif`和有不同的自动缩进`elsif`。

# php - 是否有任何通用 CRUD 客户端应用程序？

> ID：10209052
> 
> 赞同：6
> 
> 时间：2012-04-18T12:07:54.760
> 
> 标签：php, curl, crud

我正在使用 PHP Tonic 创建一个 CRUD 样式 API，它使用相同的 URL（例如 /somepath/person），您可以对其执行 POST、GET、PUT 和 DELETE 请求。但是我在测试 API 时遇到了问题。测试 GET 显然很容易（只需用浏览器访问 URL），但我如何测试剩下的 3 个请求方法呢？

我在想象一个桌面 CRUD 客户端，在其中我得到一个简单的文本框，用于放置查询参数、一个 URL 框和一个发送按钮。

像这样的应用程序是否已经存在，还是我必须制作一个？

* * *

*替代问题，我可以为此使用 CURL 吗？在这种情况下，怎么做？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:37:20.020

我已经为 Chrome 使用了插件“高级 REST 客户端应用程序”，它运行良好且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:15:55.413

嗯，很好的问题！以下 Chrome 扩展程序可以完成工作

*   [高级 REST 客户端应用程序](https://chrome.google.com/webstore/detail/hgmloofddffdnphfgcellkdfbfbjeloo)
*   [REST 控制台](https://chrome.google.com/webstore/detail/cokgbflfommojglbmbpenpphppikmonn)
*   [邮递员 REST 客户端](https://chrome.google.com/webstore/detail/fdmmgilgnpjigdojojpjoooidkmcomcm)

* * *

第二个答案，是的 curl 可以为你完成这项工作 -[这是一个例子](http://singletonio.blogspot.com/2009/07/simple-php-rest-client-using-curl.html)。

# glassfish-3 - Glassfish 完整功能列表

> ID：10209054
> 
> 赞同：0
> 
> 时间：2012-04-18T12:07:59.957
> 
> 标签：glassfish-3

我正在寻找 GlassFish v3 的某种功能列表。有谁知道在哪里可以找到这样的清单？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:40:30.327

我不知道任何完整的功能列表。我认为这些功能必须源自 Glassfish 实现和支持的技术/规范。

[Glassfish 发行说明](http://glassfish.java.net/docs/3.1/release-notes.pdf)可能是一个很好的起点，尽管仅列出了该发行版的新功能。

# r - 在R中合并多个csv文件

> ID：10209056
> 
> 赞同：1
> 
> 时间：2012-04-18T12:08:04.940
> 
> 标签：r, dataframe

我有大约 100 个带有通用标题的 csv 文件，我想将它们合并。标题是“Lat”、“Long”和“value”。我正在尝试合并所有 csv 文件，以便输出为

```
"Lat" "Lon" "Value1" "Value2"..."Value 100" 
```

`Lat`所有 csv 文件的`Lon`列都是相同的。合并两个文件很容易

```
merge(data.frame1, data.frame2, by=c('Lat','Lon')) 
```

但是，我尝试了以下无效的代码：

```
file_list <- list.files(~/source)   
list_of_files <- lapply(file_list, read.csv)  
m1 <- merge_all(list_of_files, by=c("Lat","Lon"), all=TRUE) 
```

引发错误

```
Error in merge.data.frame(dfs[[1]], Recall(dfs[-1]), all = TRUE, sort = FALSE,  : 
  formal argument "all" matched by multiple actual arguments. 
```

任何人都可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:17:29.070

你可以使用[`Reduce`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/funprog.html)和平原`merge`：

```
m1 <- Reduce(function(old, new) { merge(old, new, by=c('Lat','Lon')) }, list_of_files) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:02:07.387

这可能也有效，但您没有向我们提供任何可使用的数据。我个人使用dbaupp的方式，不确定哪个更快；但是，我很少涉足大数据，所以 Reduce 方法对我来说更容易使用，这就是我的方式（我将在几个月内发布一个新的 R 包，它具有执行 multimerge 的功能，基本上是基于与 dbaupp 的反应相同）。如果您正在处理大数据，您可能需要对两者进行基准测试（PS 我从某个地方偷了这个，因为我很少在循环中思考解决问题但不能引用哪里）。

```
DF <- list_of_files[[1]][, c('lat', 'Lon')]
    for (.df in list_of_files) {
    DF <-merge(DF,.df,by=c('Lat', 'Lon'), all=T, suffixes=c("", ""))
}
DF 
```

# javascript - 鼓励 JavaScript 应用程序错误/错误报告的最佳实践？

> ID：10209058
> 
> 赞同：0
> 
> 时间：2012-04-18T12:08:08.757
> 
> 标签：javascript, bug-tracking

我编写了一个 JavaScript 应用程序/工具（在网站上），其中包含一些相当复杂的逻辑和用户界面。用户本身就是开发人员。

鼓励用户报告问题的最佳方式是什么？

我目前的想法是避免使用任何类型的错误跟踪应用程序。相反，只需提供一个非常简单的联系表格，没有必填字段。用户可以提供尽可能少的信息。

有没有人发现这是一种明智的方法？任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:15:04.720

不是答案，我知道 - 但对于日志记录/错误跟踪，您可以在幕后发出 Ajax 请求（不显眼）并将日志信息作为参数传递，然后将该信息记录到文件、数据库等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:21:17.297

按照您的建议，通过简单的界面获取反馈或问题。在后端将这些链接到一个简单的错误/问题跟踪器。无需重新发明/重新实施问题/问题/错误跟踪。

# c - Linux 和实时信号

> ID：10209063
> 
> 赞同：0
> 
> 时间：2012-04-18T12:08:17.463
> 
> 标签：c, linux, signals

我正在尝试编写在 Linux 中使用实时信号的简单程序。但是我遇到了奇怪的行为，首先是代码：

```
#include<signal.h>
#include<sys/types.h>
#include<stdlib.h>
#include<stdio.h>
#include"errhandling.h"
#include<string.h>
#include<errno.h>
#include<unistd.h>

void baz(int sig,siginfo_t* info,void *context)
{
  if (sig==SIGUSR1)
      printf("SIGUSR1 %d\n",info->si_value.sival_int);
  else if(sig==SIGRTMIN)
      printf("SIGRTMIN %d\n",info->si_value.sival_int);
  else 
      printf("SIGRTMIN+1 %d\n",info->si_value.sival_int);
  return ;
}

void sig_output()
{
  sigset_t set;
  sigprocmask(0,NULL,&set);
  printf("blokowane sa: ");
  if (sigismember(&set,SIGUSR1))
      printf("SIGUSR1 ");
  if(sigismember(&set,SIGUSR2))
      printf(" SIGUSR2");
  printf("\n");
  return ;
}

int received=0;
int usr2=0;

void foo(int sig)
{
  return ;
}

void usr1_handler(int sig)
{
  printf("usr1_handler\n");
  //++received;
}

void usr2_handler(int sig)
{
  usr2=1;
}

int main(int argc,char **argv)
{
  int i=0;
  pid_t pid=getppid();
  struct sigaction a;
  struct sigaction a2;
  a.sa_flags=SA_SIGINFO;
  sigset_t set;
  sigemptyset(&set);
  //sigaddset(&set,SIGRTMAX);
  sigemptyset(&(a.sa_mask));
  sigemptyset(&(a2.sa_mask));
  a.sa_sigaction=baz;
  sigaction(SIGRTMIN,&a,NULL);
  a2.sa_handler=usr1_handler;
  sigaction(SIGRTMIN+1,&a2,NULL);
  //sigprocmask(SIG_SET,&(a.sa_mask),NULL);
  while(!usr2)
  {
      printf("while\n"); 
      sigsuspend(&set);

  }
      //pause()
  printf("after while\n");
  return EXIT_SUCCESS;
} 
```

当我运行该程序并使用 sigsuspend 进入此循环并将其发送到该程序 SIGRTMIN 时，一切正常-处理程序执行并等待另一个信号，但是当我发送 SIGRTMIN+1 时出现分段错误。

似乎对于实时信号，我需要使用带有 3 个参数的扩展处理程序，但为什么呢？是在某处指定的吗？我在我的朋友 OpenSUSE 12.1 上运行这个程序，我没有收到 SIGRTMIN+1 的分段错误，但是在我的 Xubuntu 11.10 上，当我发送 SIGRTMIN+1 时我遇到了分段错误。是我的系统有问题吗？还是依赖于实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:23:25.317

您似乎缺少将处理程序分配给`a2.sa_sigaction`.

* * *

一般来说，通过原始整数值引用信号并不是一个好主意，因为各种信号的定义可能是特定于平台的。

* * *

`Update:`确保`struct sigaction`结构正确初始化，例如`memset()`将它们设置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:31:31.507

不要在信号处理程序中使用 printf() 和朋友。不要固执......这是一个替代品。

```
#include <stdarg.h>

int myprintf(const char *fmt, ...);
int myprintf(const char *fmt, ...)
{
    va_list args;
    char buff[512];
    int rc;

    va_start( args, fmt );

    rc = vsnprintf ( buff, sizeof buff, fmt, args );
    va_end (args);

    if (rc >0 && rc < sizeof buff) write(1, buff, rc);

    return rc;
} 
```

更新：这似乎工作：

```
#include <signal.h>
#include <sys/types.h>
#include <stdlib.h>
#include <stdio.h>
#pragma #include"errhandling.h"
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <stdarg.h>

int myprintf(const char *fmt, ...);
int myprintf(const char *fmt, ...)
{
  va_list args;
  char buff[512];
  int rc;

  va_start( args, fmt );
  rc = vsnprintf ( buff, sizeof buff, fmt, args );
  va_end (args);

  if (rc > 0 && rc < sizeof buff) write(1, buff, rc);

  return rc;
}

void baz(int sig, siginfo_t *info, void *context)
{
#define INFO_VAL(p) p?p->si_value.sival_int:0
  if (sig==SIGUSR1)
      myprintf("SIGUSR1 %d\n", INFO_VAL(info) );
  else if(sig==SIGRTMIN)
      myprintf("SIGRTMIN %d\n", INFO_VAL(info) );
  else
      myprintf("SIGRTMIN%+d %p\n", sig-SIGRTMIN, INFO_VAL(info) );
  return ;
#undef INFO_VAL
}

void sig_output()
{
  sigset_t set;
  sigprocmask(0,NULL,&set);
  myprintf("blokowane sa: ");
  if (sigismember(&set,SIGUSR1))
      myprintf("SIGUSR1 ");
  if(sigismember(&set,SIGUSR2))
      myprintf(" SIGUSR2");
  myprintf("\n");
  return ;
}
volatile int received=0;
volatile int usr2=0;

void foo(int sig)
{
  return ;
}

void usr1_handler(int sig)
{
  myprintf("usr1_handler\n");
  //++received;
}

void usr2_handler(int sig)
{
  usr2=1;
}

int main(int argc,char **argv)
{
  int i=0;
  pid_t pid=getppid();
  struct sigaction a, a2;
  sigset_t set;

  sigemptyset(&set);
  //sigaddset(&set,SIGRTMAX);
  sigemptyset(&a.sa_mask);
  sigemptyset(&a2.sa_mask);
  a.sa_flags = 0;
  a2.sa_flags = SA_SIGINFO;
  a2.sa_sigaction = baz;
  a.sa_handler = usr1_handler;
  sigaction(SIGUSR1,&a,NULL);

  a.sa_handler = usr2_handler;
  sigaction(SIGUSR2,&a,NULL);

  sigaction(SIGRTMIN+1,&a2,NULL);
  sigaction(SIGRTMIN+2,&a2,NULL);
  sigaction(SIGRTMIN+3,&a2,NULL);
  //sigprocmask(SIG_SET,&(a.sa_mask),NULL);
  while(!usr2)
  {
      myprintf("while(!usr2)\n");
      sigsuspend(&set);

  }
      //pause()
  myprintf("after while\n");
  return EXIT_SUCCESS;
} 
```

# c++ - 从指针获取迭代器

> ID：10209065
> 
> 赞同：0
> 
> 时间：2012-04-18T12:08:24.187
> 
> 标签：c++, pointers, iterator

以下问题[分段错误执行方法](https://stackoverflow.com/questions/10166462/segmentation-fault-executing-method)我停在另一个问题中。

鉴于：

```
Cluster * base;
Cluster * absorbed;

list<Cluster>::iterator li = clusters.begin();

// li is then pointed to some element.

absorbed = &(*li);   // Get a pointer to the chosen element.

base->joinCluster(absorbed);   // Perform an action with absorbed.

// li contines the cycle and now point to clusters.end()

// Now, absorbed should be deleted from list. li doesn't point to absorbed anymore.
li = & (* absorbed);
clusters.erase(li); 
```

试图做与上述相反的操作，但 g++ 返回错误：`error: no match for 'operator=' in 'li = absorbed'` 我该怎么做？

我试图避免循环遍历列表中的所有元素以再次找到那个`absorbed`。

**编辑：**

对不起，但我明白我错过了说之后`absorbed = &(* li);` `li`继续循环直到`clusters.end()`。所以，在循环结束时，`li`不再指向`absorbed`。我想我有两个选择：要么我再次循环遍历所有元素`clusters`以找到`absorbed`元素；要么 或者我利用`absorbed`指针从`clusters`. 但是，我怎样才能实现第二个选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:10:31.303

只需跳过该`li = &(*absorbed)`行，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T12:11:33.923

您无法`std::list<T>::iterator`从`T*`. 您必须使用原始`li`版本来执行迭代器操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T12:11:41.440

**擦掉就行了！**
如果您要删除它，则无需尝试重​​新输入值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:25:40.387

代替

```
// Now, absorbed should be deleted from list
li = & (* absorbed);
clusters.erase(li); 
```

利用：

```
clusters.pop_front(); 
```

如果您总是处理第一个元素。

无法从值中获取迭代器。不是原因，但相同的值可以在多个容器中或多个容器中，而不是在一个容器中。

# wcf - 在 .Net 4 WCF 中使用 Coldfusion 生成的 SOAP 服务的问题/错误

> ID：10209067
> 
> 赞同：1
> 
> 时间：2012-04-18T12:08:25.607
> 
> 标签：wcf, c#-4.0, coldfusion, wsdl, svcutil.exe

我有一个必须使用 SOAP Web 服务的 .Net 4 项目。我有一些在 Visual Studio (2008/2010) 中添加 Web 引用的经验，并且我使用 Web 服务引用工具。

在我开始之前：

我已将 WSDL 上传到[http://pastebin.com/huSE0Qeh](http://pastebin.com/huSE0Qeh)

所以对于我的问题：

我将 Web 服务引用添加到我的项目中，生成了类和方法，并编写了一些基本代码进行测试。我已经让负责该服务的人员确认了代码，并让我的 PHP 对应方从相同的 WSDL 生成一些 PHP 文件。

问题是响应对象包含空属性。我没有例外。

我接下来尝试了什么：

我尝试使用 WSDL.exe 创建类文件，它确实做到了，但我再次在响应对象中得到一个空值。我还看到了以下错误（我已将它们修剪掉）：

```
> R2706: A wsdl:binding in a DESCRIPTION MUST use the value of "literal"
> for the use attribute in all soapbind:body, soapbind:fault,
> soapbind:header and soapbind:headerfault elements.
>   -  Input element soapbind:body of operation 'getProfile' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'.
>   -  Output element soapbind:body of operation 'getProfile' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'.
>   -  soapbind:fault 'CFCInvocationException' on operation 'getProfile' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'.
>   -  Input element soapbind:body of operation 'getGroups' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'.
>   -  Output element soapbind:body of operation 'getGroups' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'.
>   -  soapbind:fault 'CFCInvocationException' on operation 'getGroups' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'.
>   -  Input element soapbind:body of operation 'MessageReply' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'.
>   -  Output element soapbind:body of operation 'MessageReply' on portType 'connect.cfcSoapBinding' from namespace 'http://ws'. 
```

然后我尝试（在谷歌搜索之后）使用 svcutil.exe 使用以下命令：

```
svcutil.exe /language:cs /out:generatedProxy.cs /config:app.config http://www.myurl.com/test.wsdl 
```

但随后收到以下错误（再次修剪）：

```
Warning: Fault named CFCInvocationException in operation getProfile cannot be imported. Unsupported WSDL, the fault message part must reference an element. This fault message does not reference an element. If you have edit access to the WSDL document, you can fix the problem by referencing a schema element using the 'element' attribute.

Warning: Fault named CFCInvocationException in operation getGroups cannot be imported. Unsupported WSDL, the fault message part must reference an element. This fault message does not reference an element. If you have edit access to the WSDL document, you can fix the problem by referencing a schema element using the 'element' attribute. 
```

我也尝试（在更多谷歌搜索之后）使用该`/useSerializerForFault`标志，但我再次收到更多错误。

所以我现在很茫然。PHP 等效项工作正常，一个名为 SOAP UI 的工具也能正常工作，所以我认为这是 Visual Studio/.Net 问题是否正确？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T23:47:49.590

经过数小时的反复试验，“发现”将属性设置为`encoded`而不是`literal`罪魁祸首。Visual Studio 在处理这个问题时遇到了问题，谢天谢地，Coldfusion 开发人员改用`literal`了我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:39:34.557

似乎他们的`CFCInvocationException`错误的 ColdFusion WSDL 定义对于 Visual Studio 代理生成器来说是不可接受的。您可以尝试弄清楚如何调整 WSDL 以使 WCF（或 ASMX）代理生成器接受它，但我建议您从 WSDL 中完全删除故障定义。

错误定义用于生成 WCF`FaultException`泛型的强类型版本（不记得在 ASMX 领域发生了什么）。如果您从 WSDL 中删除“有问题的”故障定义，您可能会丢失它可能包含的一些详细信息，但如果它被抛出，您仍然能够捕捉到故障。至少将这作为成功调用 ColdFusion 服务的第一步，您可以随时返回并在以后添加错误的 WSDL。

# c++ - MFC：如何将 CExplorer 的 headersw 连接到项目以及需要哪些库才能从我的程序中进行编辑？

> ID：10209069
> 
> 赞同：0
> 
> 时间：2012-04-18T12:08:28.397
> 
> 标签：c++, mfc

我在我的窗口上看到了控件，但是如果我尝试创建 CExplorer，我会收到 Error 1 error C2065: 'CExplorer' : undeclared identifier =( 所以我想知道有什么问题吗？

# javascript - 从函数中获取多维数组

> ID：10209073
> 
> 赞同：0
> 
> 时间：2012-04-18T12:08:59.880
> 
> 标签：javascript, multidimensional-array

我正在尝试将多维数组初始化为函数中的值。我已经尝试过了，但结果不是我所期望的。

*elemSize*是一个具有维度的数组，而*init*是每个元素的值。

```
function MakeArray(elemSize, init) {
    var a = [];

    for (var i = 0; i < elemSize.length; i++) {
        var aj = [];
        for (var j = 0; j < elemSize[i]; j++) {
            aj[j] = init;
        }
        a[i] = aj;
    }

    return a;
} 
```

这是结果

```
>>> var a = MakeArray([3,2], 5);
undefined
>>> a
[[5, 5, 5], [5, 5]] 
```

但我会得到：

```
[[5 5] [5 5] [5 5]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:13:37.410

你的逻辑有点不对劲。这是输出您想要的代码（包含两个元素的三个数组）：

```
function MakeArray(elemSize, init) {
    var a = [];

    for (var i = 0; i < elemSize[0]; i++) {
        var aj = [];
        for (var j = 0; j < elemSize[1]; j++) {
            aj[j] = init;
        }
        a[i] = aj;
    }

    return a;
} 
```

elemSize 的第一个元素表示数组的数量，第二个元素表示每个数组的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:13:31.213

不要迭代`elemSize.length`and`elemSize[i]`但是 `elemSize[0]`and `elemSize[1]`：

```
function MakeArray(elemSize, init) {
    var a = [];

    for (var i = 0; i < elemSize[0]; i++) {
        var aj = [];
        for (var j = 0; j < elemSize[1]; j++) {
            aj[j] = init;
        }
        a[i] = aj;
    }

    return a;
} 
```

如果您想要一个真正的多维数组，那么您必须创建一个递归函数，因为您的循环方法不适用于此：

```
function MakeArray(elemSize,init){
    if(elemSize.length === 0)
        return init;

    var result = [];
    var otherSize = elemSize.slice(1);
    var otherArray = MakeArray(otherSize,init); 
    for(var i = 0; i < elemSize[0]; ++i){
        result.push(otherArray);
    }
    return result;
}

var myArray = MakeArray([5,5,5],2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:19:09.110

您需要一种递归算法来创建具有任意维度的数组。

```
function MakeArray(sizes, init) {
    var a = [];
    if (sizes.length > 1) {
        var b = sizes.slice(1);
        for (var i = 0; i < sizes[0]; i++) {
            a.push( MakeArray(b, init) );
        }
    } else {
        for (var i = 0; i < sizes[0]; i++) {
            a.push( init );
        }
    }
    return a;
} 
```

# c# - SerialPort 类偶尔会挂在 Dispose 上

> ID：10209090
> 
> 赞同：12
> 
> 时间：2012-04-18T12:10:20.710
> 
> 标签：c#, .net, serial-port

我编写了一个 .net 4.0 控制台应用程序，它定期与 GSM 调制解调器对话以获取收到的 SMS 消息的列表（它是一个 USB 调制解调器，但代码通过串行端口驱动程序连接到它并发送 AT 命令 - 顺便说一句，它是Sierra Wireless 调制解调器，但我无法更改它，而且我有最新的驱动程序）。发生的情况是，经过一段时间（可能是几个小时，可能是几天）后，它就会停止工作。这是一个日志片段...

```
2012-04-17 23:07:31 DEBUG Modem Check (108) - Executing AT command 'AT+CPMS="ME"'...
2012-04-17 23:07:31 DEBUG Modem Check (108) - Finished executing 'AT+CPMS="ME"'
2012-04-17 23:07:31 DEBUG Modem Check (108) - Detaching event handlers for 'COM13'
2012-04-17 23:07:31 DEBUG Modem Check (108) - Disposing the SerialPort for 'COM13' 
```

这就是日志的结尾——即使我希望至少再看到一条语句，也仅此而已，以下是相关代码：

```
internal T Execute()
{
    var modemPort = new SerialPort();
    T ret;

    try
    {
        modemPort.ErrorReceived += ModemPortErrorReceived;

        modemPort.PortName = _descriptor.PortName;
        modemPort.Handshake = Handshake.None;
        modemPort.DataBits = 8;
        modemPort.StopBits = StopBits.One;
        modemPort.Parity = Parity.None;
        modemPort.ReadTimeout = ReadTimeout;
        modemPort.WriteTimeout = WriteTimeout;
        modemPort.NewLine = "\r\n";
        modemPort.BaudRate = _descriptor.Baud;

        if (!modemPort.IsOpen)
        {
            modemPort.Open();
        }

        ret = _command.Execute(modemPort, _logger);

        _logger.Debug("Detaching event handlers for '{0}'",
                      _descriptor.PortName);

        modemPort.ErrorReceived -= ModemPortErrorReceived;

        _logger.Debug("Disposing the SerialPort for '{0}'",
                      _descriptor.PortName);
    }
    catch (IOException ex)
    {
        _logger.Error(ex.Message);

        throw new CommandException(
            string.Format(CultureInfo.CurrentCulture,
                          ModemWrapperStrings.COMMAND_ERROR,
                          ex.Message),
            ex);
    }
    catch (UnauthorizedAccessException ex)
    {
        _logger.Error(ex.Message);

        throw new CommandException(
            string.Format(CultureInfo.CurrentCulture,
                          ModemWrapperStrings.COMMAND_ERROR,
                          ex.Message),
            ex);
    }
    finally
    {
        modemPort.Dispose();

        _logger.Debug("Modem on port '{0}' disposed",
                      _descriptor.PortName);
    }

    return ret;
} 
```

如您所见，它挂在 SerialPort 类的 Dispose 方法上。

我做了一些谷歌搜索，我遇到了这个问题：[Serial Port Close Hangs the application](https://connect.microsoft.com/VisualStudio/feedback/details/202137/serialport-close-hangs-the-application) from this thread: [serial port hangs while closing](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/ce8ce1a3-64ed-4f26-b9ad-e2ff1d3be0a5/)。共识似乎是在不同的线程中关闭端口，但这仅适用于表单应用程序吗？就我而言，我有一个简单的控制台应用程序，所以我认为它不适用（它只是在主线程的循环中运行）。我什至不确定这实际上是这个问题（我的感觉是调制解调器的串行端口驱动程序更有可能存在问题，但我不知道，也许我对调制解调器不公平）。在我看来，我有三个选择：

1.  在不同的线程中关闭端口
2.  在关闭港口之前延迟
3.  让端口永远开放

我真的不喜欢这些解决方法，但我正在考虑让端口保持打开状态，然后看看会发生什么（我感觉它会泄漏内存或更糟，暴露调制解调器的其他问题，但也许我只是悲观如果是这种情况，我可能会每 24 小时关闭一次，然后重新打开一次）所以我的问题是......

此代码是否存在可能导致这种行为的替代问题，或者是否有替代我上面概述的解决方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T13:21:11.670

SerialPort 有点容易出现死锁。到目前为止，最常见的原因是您发现的原因，它是通过在 DataReceived 事件处理程序中使用 Invoke() 触发的。显然不是你的情况。

这些死锁与 SerialPort 在幕后启动的工作线程有关。该线程有助于检测端口上的异步事件，底层原生winapi是WaitCommEvent()。该工作人员使 DataReceived、PinChanged 和 ErrorReceived 事件起作用。请注意您*如何*使用 ErrorReceived。

Dispose() 方法与 Close() 方法做同样的事情，它通知工作线程退出。然而，缺陷是它*不等待*线程退出。这是一个麻烦的秘诀，在 MSDN 文章的备注部分中明确记录了 SerialPort.Close() 的类型：

> 任何应用程序的最佳做法是在调用 Close 方法后等待一段时间，然后再尝试调用 Open 方法，因为端口可能不会立即关闭。

坦率地说，这是“最佳实践”建议最糟糕的做法，因为它根本没有具体说明您应该等待多长时间。有充分的理由，没有保证的安全价值。等待一两秒钟应该是 99.9% 好的。当机器负载很重并且工作线程根本没有足够的周期来及时检测关闭条件时，就会出现 0.1% 故障模式。当然是完全不可调试的。

解决这个问题，只在程序开始时打开一个串口并在退出时关闭它。除了线程问题之外，这还确保了当另一个程序进入并从您手中窃取端口时，您不会随机失去对端口的访问权限。请注意，实际上不再需要关闭端口，如果您不这样做，Windows 会处理它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-23T18:01:06.610

如果您使用 DataRecieved 事件或串行端口对象中的任何其他事件，则应在处理串行端口之前从中删除事件处理程序。

```
mySerial.DataReceived -= DataReceivedHandler;
mySerial.Dispose(); 
```

发生挂起是因为您在已处置的对象上触发了一个事件……这显然是一个错误。

但是，在您的情况下，您已经这样做了..并且由于端口尚未关闭而发生挂起。在您尝试重新打开它之前，可能 thread.sleep 可能允许端口“稳定”。它也可能是特定于硬件的……这就是为什么没有最佳实践的原因。

与 Forms 控件相同： [如何从控件中删除所有事件处理程序](https://stackoverflow.com/questions/91778/how-to-remove-all-event-handlers-from-a-control)

# android - 更改不确定进度条的样式

> ID：10209098
> 
> 赞同：2
> 
> 时间：2012-04-18T12:10:57.633
> 
> 标签：android, progress-bar

我想改变我现在拥有的几乎不可见的东西： ![在此处输入图像描述](../Images/1e43fe504ddb0faa7f4b39daa1dae86a.png) 为此： ![在此处输入图像描述](../Images/d70d1bfb40633dea7d2f2b250ad7cd9a.png)

这是一个没有文字、标题和背景的自定义进度对话框。只有旋转器。

我将此实现用于进度对话框：

```
public class IndeterminateProgressSpinner extends Dialog {
static Dialog dialog;

public static IndeterminateProgressSpinner show(Context context,
        OnCancelListener cancelListener) {
    dialog = new IndeterminateProgressSpinner(context);
    dialog.setTitle(null);
    dialog.setCancelable(false);
    dialog.setOnCancelListener(cancelListener);
    /* The next line will add the ProgressBar to the dialog. */
    ProgressBar pb = new ProgressBar(context);
    dialog.addContentView(pb, new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    dialog.show();
    return (IndeterminateProgressSpinner) dialog;
}

public IndeterminateProgressSpinner(Context context) {
    super(context, R.style.indeterminateProgressSpinner);
} 
```

这就是风格`R.style.indeterminateProgressSpinner`

```
 <style name="indeterminateProgressSpinner">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:indeterminateOnly">true</item>
    </style> 
```

谢谢你

# html - 查找边界来自哪里

> ID：10209102
> 
> 赞同：0
> 
> 时间：2012-04-18T12:11:27.790
> 
> 标签：html, css, image, twitter-bootstrap

我正在使用 Twitter Bootstrap 在 PhoneGap 上创建布局。

with 是 768px;

我有这个简单的 HTML：

```
<div class="container">
<div class="span12" style="background: red;">
<img src="img/teste.png">
</div>
</div> 
```

我放置红色背景只是为了检查宽度是否正常。这是图片，768px； ![在此处输入图像描述](../Images/39a0c867cb752adba7b26f48ee098356.png)

这是我添加图像时该死的左边距： ![在此处输入图像描述](../Images/8d268aa9216be4c9743f4f6fc40b30f7.png)

我已经检查了 bootstrap.css 和 bootstrap-responsive.css 的边距命令，但什么也没有。

图像宽度为 768px（选中）。我需要使图像适合 768px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:15:11.447

尝试将边距和填充重新设置为零

```
*{margin:0px;Padding:0px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:24:13.007

您看到的那个边距是引导网格系统的一部分。它可以使内容与引导程序中给出的宽度正确匹配，并由`.row`div 偏移，您没有将其包含在标记中。

因此，只需将您的`.span12`div 包含在一个`.row`div 中，它就应该被删除。

```
<div class="container">
    <div class="row">
        <div class="span12" style="background: red;">
            <img src="img/teste.png">
        </div>
    </div>
</div> 
```

# tridion - 如何获取 Tridion 中的当前字段名称？

> ID：10209104
> 
> 赞同：4
> 
> 时间：2012-04-18T12:11:38.490
> 
> 标签：tridion

我在 Tridion 2011 SP1 的功能区工具栏中添加了一个按钮。当我单击按钮时，它将打开一个 aspx 页面。在该 aspx 页面中，我需要访问光标当前所在的当前字段名称。请提供我要使用的对象？对于我使用的模式名称`$display.getView().getItem().getSchemaId()`。同样有没有办法获取当前字段名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:33:18.937

我得到的最接近的是使用此代码（在组件编辑窗口中）：

```
$display.getView().getSourceEditorName() 
```

这将返回**当前字段的名称**，即使方法名称表明它做了其他事情。

如果您想从弹出窗口中获取相同的值，请`opener`像这样调用它：

```
opener.$display.getView().getSourceEditorName() 
```

## 更好的解决方案

与其在弹出窗口中查找字段名称，不如在调用命令时将其作为参数传递到弹出窗口中。您可以从`target`传递给`_execute`命令方法的参数中获取它。

```
GUI.Extension.prototype._execute = function GUI$Extension$_execute(target) {
    target.editor.setFocus();
    var fieldName = target.item.getSourceEditorName();
    var popup = $popup.create("/WebUI/Editors/GUI.Extensions/Extension.aspx",
                "width=400px,height=150px,resizable=0",
                { fieldName: fieldName });
} 
```

然后使用以下命令在弹出窗口的 JavaScript 中读取它：

```
var fieldName = window.dialogArguments.fieldName; 
```

# spring-roo - roo启动问题

> ID：10209105
> 
> 赞同：0
> 
> 时间：2012-04-18T12:11:39.070
> 
> 标签：spring-roo

启动 roo 后，我得到一个异常，如下所示：

```
Welcome to Spring Roo. For assistance press TAB or type "hint" then hit ENTER.
NullPointerException at org.springframework.roo.project.AbstractProjectOperation
s.addModuleDependency(AbstractProjectOperations.java:293) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:12:03.937

这是一个令人尴尬的已知错误。忽略它。

[https://jira.springsource.org/browse/ROO-3111](https://jira.springsource.org/browse/ROO-3111)

还要确保您的 Roo 安装目录对于正在使用 Roo 的用户是可写的（即 chmod -R a+rw roo-directory）。

# python - 检查文件是否存在失败

> ID：10209113
> 
> 赞同：2
> 
> 时间：2012-04-18T12:11:54.510
> 
> 标签：python, file-io

这是我的代码：

```
# header.py

def add_header(filename):
    header = '"""\nName of Project"""'
    try:
        f = open(filename, 'w')
    except IOError:
        print "Sorry could not open file, please check path"
    else:
        with f:
            f.seek(0,0)
            f.write(header)
        print "Header added to", filename

if __name__ == "__main__":
    filename = raw_input("Please provide path to file: ")
    add_header(filename) 
```

当我运行这个脚本（通过执行 python header.py）时，即使我提供了一个不存在的文件名，它也不会返回函数中的消息。即使我用 return 语句替换 print 语句，它也不返回任何内容。我将如何在函数中显示消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:25:09.157

我相信您总是在创建文件。因此，您不会看到没有异常的文件。将 write 或 file open write 置于 try except 下并没有什么坏处，因为您可能没有创建文件的权限。

我发现使用诸如 try except 和 else 之类的语句来测试 Python 命令行中的语句，这是解决驾驶舱错误的一个非常好的地方，而且我在证明一个概念时产生大量驾驶舱错误方面经验丰富。

您使用 try except 的事实非常好。我只需要回顾一下当逻辑流通过其中一个时会发生什么。命令行是执行此操作的好地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T12:30:08.620

正确的做法是尝试读取文件，如果有效，则读取数据，然后将新数据写入文件。

如果文件不存在，写入文件将创建该文件，并覆盖现有内容。

我还注意到您正在以一种奇怪的方式使用 with 语句，请考虑：

```
try:
    with open(filename, 'w') as f:
        f.seek(0,0)
        f.write(header)
    print("Header added to", filename)
except IOError:
    print("Sorry could not open file, please check path") 
```

这种方式更具可读性。

要了解如何以最佳方式执行此操作，请参阅[user1313312 的答案](https://stackoverflow.com/a/10209577/722121)。我的方法有效，但不是最好的方法，我会留待解释。

* * *

老答案：

现在，为了解决你的问题，你真的想做这样的事情：

```
def add_header(filename):
    header = '"""\nName of Project"""'
    try:
        with open(filename, 'r') as f:
            data = f.read()
        with open(filename, 'w') as f:
            f.write(header+"\n"+data)
        print("Header added to"+filename)
    except IOError:
        print("Sorry could not open file, please check path")

if __name__ == "__main__":
    filename = raw_input("Please provide path to file: ")
    add_header(filename) 
```

由于我们只有写入文件（覆盖现有内容）和追加（最后）的选择，我们需要构建一种预先添加数据的方法。我们可以通过读取内容（同时方便地检查文件是否存在）然后写入标题和内容来做到这一点（这里我添加了一个换行符以提高可读性）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T12:41:49.487

这是 Lattywares 解决方案的略微修改版本。由于无法将数据附加到文件的开头，因此会读取整个内容并重新写入文件，包括您的标题。通过以读/写模式打开文件，我们可以使用同一个文件处理程序执行这两个操作而无需释放它。这应该提供一些针对竞争条件的保护。

```
try:
    with open(filename, 'r+') as f:
        data = f.read()
        f.seek(0,0)
        f.write(header)
        f.write(data)
        #f.truncate() is not needed here as the file will always grow
    print("Header added to", filename)
except IOError:
    print("Sorry, could not open file for reading/writing") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T12:42:24.233

此脚本以“w”模式（写入模式）打开文件，这意味着一旦文件不存在，它将被创建。所以没有IOError。

# python - Automator/Applescript 重命名文件，如果

> ID：10209122
> 
> 赞同：1
> 
> 时间：2012-04-18T12:12:22.013
> 
> 标签：python, applescript, automator

我有一大堆被我的艺术家错误命名的图像。我希望通过使用 Automator 来避免给他更多的工作，但我是新手。现在它们的命名顺序是 what001a 和 what002a，但应该是 what001a 和 what001b。所以基本上奇数编号是A，偶数编号是B。所以我需要一个脚本，将偶数编号更改为B图像并将它们全部重新编号为正确的顺序编号。我将如何编写该脚本？

![图像列表](../Images/fd7d7ec724e13f00af1275b518505d54.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:03:37.920

嵌入在 AppleScript 中的小型 Rub​​y 脚本提供了一个非常舒适的解决方案，允许您在 Finder 中选择要重命名的文件并显示信息性成功或错误消息。

该算法重命名文件如下：

```
number = first 3 digits in filename                # e.g. "006"
letter = the letter following those digits         # e.g. "a"
if number is even, change letter to its successor  # e.g. "b"
number = (number + 1)/2                            # 5 or 6 => 3
replace number and letter in filename 
```

![之前和之后](../Images/990d51cb6702bceb1e75de260623e463.png)

这里是：

```
-- ask for files
set filesToRename to choose file with prompt "Select the files to rename" with multiple selections allowed

-- prepare ruby command
set ruby_script to "ruby -e \"s=ARGV[0]; m=s.match(/(\\d{3})(\\w)/); n=m[1].to_i; a=m[2]; a.succ! if n.even?; r=sprintf('%03d',(n+1)/2)+a; puts s.sub(/\\d{3}\\w/,r);\" "

tell application "Finder"

    -- process files, record errors
    set counter to 0
    set errors to {}
    repeat with f in filesToRename
        try
            do shell script ruby_script & (f's name as text)
            set f's name to result
            set counter to counter + 1
        on error
            copy (f's name as text) to the end of errors
        end try
    end repeat

    -- display report
    set msg to (counter as text) & " files renamed successfully!\n"
    if errors is not {} then
        set AppleScript's text item delimiters to "\n"
        set msg to msg & "The following files could NOT be renamed:\n" & (errors as text)
        set AppleScript's text item delimiters to ""
    end if
    display dialog msg
end tell 
```

请注意，当文件名包含空格时，**它将**失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:28:12.683

我的一个朋友写了一个 Python 脚本来做我需要的事情。想我会把它贴在这里作为任何偶然发现类似问题寻求帮助的人的答案。虽然它在 Python 中，所以如果有人想将它转换为 AppleScript 以供可能需要它的人使用。

```
import os
import re
import shutil

def toInt(str):
  try:
    return int(str)
  except:
    return 0

filePath = "./"
extension = "png"

dirList = os.listdir(filePath)

regx = re.compile("[0-9]+a")

for filename in dirList:
  ext = filename[-len(extension):]
  if(ext != extension): continue
  rslts = regx.search(filename)
  if(rslts == None): continue
  pieces = regx.split(filename)
  if(len(pieces) < 2): pieces.append("")
  filenumber = toInt(rslts.group(0).rstrip("a"))
  newFileNum = (filenumber + 1) / 2
  fileChar = "b"
  if(filenumber % 2): fileChar = "a"
  newFileName = "%s%03d%s%s" % (pieces[0], newFileNum, fileChar, pieces[1])
  shutil.move("%s%s" % (filePath, filename), "%s%s" % (filePath, newFileName)) 
```

# objective-c - 如何知道 iPhone 用户 SIM 卡是否已更改？

> ID：10209127
> 
> 赞同：3
> 
> 时间：2012-04-18T12:12:34.647
> 
> 标签：objective-c, ios, cocoa-touch

我正在开发一个应用程序，它需要知道用户自上次启动以来是否更改了他的 SIM 卡。除了通知[**subscriberCellularProviderDidUpdateNotifier**](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Reference/CTTelephonyNetworkInfo/Reference/Reference.html) ，我在文档中找不到任何东西，它警告我SIM卡已更改，但如果用户在手机关闭时执行此操作，我的应用程序将不会意识到这一点。是否有可能做到这一点，或者这种情况有什么解决方法吗？应用程序[**WhatsApp Messenger**](http://itunes.apple.com/us/app/whatsapp-messenger/id310633997?mt=8)似乎能够做我需要的事情。

我已经看到有关此问题的其他问题，但仍未找到任何令人满意的答案。

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:08:11.537

您可以获得的所有信息都是阅读`[CTTelephonyNetworkInfo subscriberCellularProvider];`。

这是一个[CTCarrier](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596)对象。这包含一个mobileNetworkCode 和一个carrierName。但是你只能识别运营商的变化。所以如果一张verizon卡与另一张verizon卡交换，你就无法识别它，我猜。

# node.js - Node.js 的 Google 搜索 API 包装器

> ID：10209128
> 
> 赞同：11
> 
> 时间：2012-04-18T12:12:35.437
> 
> 标签：node.js, google-search-api

我正在寻找要在 Node.js 中使用的 Google 搜索 API 包装器，我已经四处搜索，但没有找到更新和完全烘焙的东西。任何人都可以推荐一些有用的东西吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T20:22:09.873

你为什么不为谷歌 API 使用节点客户端库？[https://github.com/google/google-api-nodejs-client](https://github.com/google/google-api-nodejs-client)

```
var googleapis = require('googleapis');
googleapis.discover('customsearch', 'v1').execute(function(err, client) {
  // set api key
  client.withApiKey('...');
  client.search.cse.list({ q: '...' }).execute(console.log);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T21:39:05.690

我假设您不是指已弃用的 Google Web Search API ...

[Google 自定义搜索 API](https://developers.google.com/custom-search/)是一个 RESTful API。这意味着您无需专门的包装器即可轻松访问它。

有几个模块可以使这更容易。我通常使用的是[request](https://github.com/mikeal/request)模块，它可以让您非常简单地发出 HTTP 请求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-15T00:56:38.207

我刚刚使用了 node-google-images，它在不到 2 分钟的时间内立即生效：

[https://github.com/vdemedes/node-google-images](https://github.com/vdemedes/node-google-images)

打电话

```
npm install google-images 
```

接着

```
client = require( 'google-images' );

client.search( 'Chicken Teriyaki', function (err, images) {
    console.log(images)
}); 
```

将返回

> [{宽度：'1920'，高度：'1280'，网址：' [http](http://www.springkitchenrestaurant.com/Chicken_Teriyaki.jpg) ://www.springkitchenrestaurant.com/Chicken_Teriyaki.jpg'，writeTo：[功能]}]

（实际上，它将返回 4 个结果，但 stackoverflow 阻止我发布超过 2 个链接...... - 你明白了要点！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-08T18:00:10.863

您可以使用 jsearch 模块。安装：

```
npm install jsearch 
```

用法：

```
js.google('queryStringYouWant',10,function(response){
    console.log(response) // for Google results 
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-09T22:01:31.877

[您可以使用SerpApi](https://serpapi.com)等第三方服务及其[Node.js 库](https://github.com/serpapi/google-search-results-nodejs)来抓取 Google 并获取结构化 JSON。

要安装它：

```
npm install google-search-results-nodejs 
```

代码示例：

```
var gsr = require('GoogleSearchResults')
let serp = new gsr.GoogleSearchResults()
query_params = {
  q: "query",
  google_domain: "Google Domain", 
  location: "Location Requested", 
  device: device,
  hl: "Google UI Language",
  gl: "Google Country",
  safe: "Safe Search Flag",
  num: "Number of Results",
  start: "Pagination Offset",
  serp_api_key: "demo"
}

callback = function(data) {
 console.log(data)
}

// Show result as JSON
serp.json(query_params, callback)

// Show results as JSON with Images
serp.jsonWithImages(query_params, callback)

// Show result as HTML file
serp.html(query_params, callback) 
```

# windows-phone-7 - 如何在 windows phone 7 应用程序的全景视图中有一个应用程序栏？

> ID：10209137
> 
> 赞同：0
> 
> 时间：2012-04-18T12:12:49.077
> 
> 标签：windows-phone-7

我想知道如何在我的 windows phone 7 应用程序的全景屏幕中有一个应用程序栏？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:19:29.537

您应该会发现以下有用的“演练：在 Windows Phone 的全景页面上创建应用程序栏”：-

[http://msdn.microsoft.com/en-us/library/hh394045(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh394045(v=vs.92).aspx)

# c# - C# LINQ - Union() 和 Group() - 结果

> ID：10209139
> 
> 赞同：6
> 
> 时间：2012-04-18T12:12:54.453
> 
> 标签：c#, linq, union, grouping

我有一个对象列表，其中每个对象都有一个“名称”和其他不同的东西。我想过滤掉那些在该列表中没有唯一名称的对象。

是否有一个 LINQ 语句，我可以在其中“Union()”所有结果组并只返回我的对象​​的 IEnumerable？

喜欢

```
IEnumerable<MyObject> Results = (from x in Objects 
                                 group x by x.Name into g
                                 where g.Count() > 1
                                 select g)
                                 .COMBINE_OR_WHATEVER(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T12:15:37.293

就在这里。您可以使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx).

```
IEnumerable<MyObject> Results = (from x in Objects 
                                 group x by x.Name into g
                                 where g.Count() > 1
                                 select g)
                                 .SelectMany(x => x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:26:32.367

我认为您只想要具有唯一名称的对象（“*我想过**滤掉**那些在该列表中**没有***唯一名称的对象”）：

```
var result = Objects.GroupBy(o => o.Name)
            .Where(grp => grp.Count() == 1)
            .SelectMany(grp => grp); 
```

# jquery - Jquery 和 colorbox - 没有退出按钮？

> ID：10209141
> 
> 赞同：1
> 
> 时间：2012-04-18T12:12:58.730
> 
> 标签：jquery, colorbox

最后，我的彩盒工作正常。

但它没有显示任何按钮？

看这里： [http ://www.logo-fabrikken.dk](http://www.logo-fabrikken.dk)

尝试在右侧菜单中按“kontakt”以查看我的 Colorbox 问题

问候，尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:23:14.490

的资源的资源位置`ColorBox`被错误地解析。

任何一个，

*   放在`colorbox.css`根目录下。即在`popup`文件夹之外，在您的文件旁边`style.css`。
*   或者，更改`colorbox.css`文件中资源的位置。例如

    ```
    background:url(popup/images/controls.png) 
    ```

    应该成为

    ```
    background:url(images/controls.png) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:17:57.863

upload `controls.png`，您还没有上传 images 文件夹中的图片。尝试在 chrome 中打开您的 url 并检查它，它会显示您缺少的资源。

# certificate - ADFS 2.0 - 为不同 AD 中的服务请求令牌

> ID：10209143
> 
> 赞同：1
> 
> 时间：2012-04-18T12:12:59.773
> 
> 标签：certificate, wif, adfs2.0

我有以下情况：

活动目录 1：WCF 客户端、ADFS 2.0 (STS)

Active Directory 2：WCF 服务（依赖方）

我已将 RP 添加到 ADFS，但是当我从 ADFS 请求令牌时，收到以下错误：System.ServiceModel.FaultException: ID3242: 无法对安全令牌进行身份验证或授权。

查看 ADFS 的事件日志，我发现匹配错误：

> 尝试为指纹“XXXXXXXXXXXX”标识的信赖方信任“http://XXXXXX/Service1/”证书构建证书链时出错。可能的原因是证书已被吊销，无法验证依赖方信任的加密证书吊销设置指定的证书链或证书不在其有效期内。
> 
> 您可以使用 AD FS 2.0 的 Windows PowerShell 命令来配置依赖方加密证书的吊销设置。信赖方信任的加密证书吊销设置：CheckChainExcludeRoot 构建证书链时发生以下错误：未知错误。未知错误。
> 
> User Action: 请确保信赖方信任的加密证书有效且未被撤销。如果吊销设置未指定“无”或“仅缓存”设置，请确保 AD FS 2.0 可以访问证书吊销列表。验证您的代理服务器设置。有关如何验证代理服务器设置的详细信息，请参阅 AD FS 2.0 故障排除指南 (http://go.microsoft.com/fwlink/?LinkId=182180)。

看起来 ADFS 不信任来自 RP 的签名证书（可以理解，颁发签名证书的 CA 位于不同的 AD 中）。CertificateRevokationList 可从两个 Active Directory 访问。

我已将 CA 证书添加到“本地计算机”的受信任根证书中，但我认为问题在于验证机制。

我必须进行哪些配置才能让 ADFS 颁发使用正确证书签名的令牌，或者如何让 ADFS 相信证书有效？

**编辑：**

我尝试使用 powershell 命令更改吊销检查：

```
 Set-ADFSRelyingPartyTrust  -SigningCertificateRevocationCheck CheckEndCert 
```

但没有运气： Set-ADFSRelyingPartyTrust ：无法使用指定的命名参数解析参数集。

```
At line:1 char:26
+ Set-ADFSRelyingPartyTrust <<<<   -SigningCertificateRevocationCheck CheckEndCert
    + CategoryInfo          : InvalidArgument: (:) [Set-ADFSRelyingPartyTrust], ParameterBindingException
    + FullyQualifiedErrorId : AmbiguousParameterSet,Microsoft.IdentityServer.PowerShell.Commands.SetRelyingPartyTrustC
   ommand 
```

**编辑2**：这有效：

```
(Get-ADFSRelyingPartyTrust) | Set-ADFSRelyingPartyTrust  -EncryptionCertificateRevocationCheck CheckEndCert 
```

但现在我在 Active Directory 1 中的客户抱怨证书......

> System.ServiceModel.Security.SecurityNegotiationException：与目标“http://XXXXXXXXXXXXXXXXXX/Service1/”的“http://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/Service1/”的 SOAP 安全协商失败。有关更多详细信息，请参阅内部异常。---> System.IdentityModel.Tokens.SecurityTokenValidationException: X.509 证书 CN=RP-Service 链构建失败。使用的证书具有无法验证的信任链。更换证书或更改 certificateValidationMode。无法将证书链构建到受信任的根颁发机构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T11:21:57.517

也许您应该尝试将您的 RP-Service 证书添加到运行 WCF 客户端的计算机上的 Trusted People 存储中。这就是我在使用自签名证书测试与 ADFS 联合下的 WCF 调用时所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T19:39:38.867

对我有用的命令是这样的：

```
Set-ADFSRelyingPartyTrust  -TargetName <relyingpartytrustName> -EncryptionCertificateRevocationCheck None 
```

我们有几次，导致在各处（即托管 WCF 服务的服务器）安装签名和加密证书（ADFS 生成的自签名证书）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:56:46.507

我面临同样的错误。有什么帮助是使用

```
Set-ADFSRelyingPartyTrust  -EncryptionCertificateRevocationCheck None 
```

但这只会禁用对 RP 部分的检查。由于我们谈论的是联合，因此在联合服务器上也会发生同样的情况。所以你也必须在那里做。无论如何，它只改变了我得到的错误——我仍然无法联合 ATM。

# c++ - 由 EditControl 或剪贴板引起？

> ID：10209145
> 
> 赞同：2
> 
> 时间：2012-04-18T12:13:04.827
> 
> 标签：c++, winapi, controls, clipboard, edit

好的，所以我正在用 C++ 编写这个程序，它应该将剪贴板文本附加到自动剪贴板选项卡内的编辑控件中。我已经设置了程序，以便它支持 unicode 文本。

当我在程序外复制文本时，程序会正确附加文本。但是，如果我复制来自程序的文本，它会向我显示好像它正在复制需要转换为 int unicode 的 ansi 字符。

我不确定问题是来自编辑控件还是来自剪贴板。编辑控件输出不是 unicode 格式吗？还是剪贴板复制为ansi并粘贴为unicode？

编辑：所以我发现根据 MSDN 文档，编辑控件中的 WM_COPY 是在 CF_TEXT 模式下处理的，而不是剪贴板的 CF_UNICODETEXT：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms649022( v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649022(v=vs.85).aspx)

因此，我从我的 AutoClipboardEdit 控件开始添加了一些子类，但由于某种原因，我在 WM_DRAWCLIPBOARD 消息上收到了损坏的堆错误。所以我被困在那里：

Edit2：我通过不释放剪贴板上使用的文本字符串的分配内存来使其工作。在这种情况下，变量的名称是 hMem2。似乎如果我释放 hMem2，程序会因“堆损坏”错误而崩溃。我的猜测是操作系统本身管理和释放内存。这似乎是可能的，因为数据的 SetClipboardData 参数是一个指针。我还尝试通过将 WM_COPY 消息发送到无限循环中来测试内存是否真的泄漏，以查看堆是否会永远增加；但到目前为止似乎并非如此。

所以，我需要有人向我确认没有内存泄漏，或者操作系统确实相应地管理和释放剪贴板。

这是完整的源代码：

```
 #define UNICODE
        #define _UNICODE

        #pragma comment(linker,"\"/manifestdependency:type='win32' \
        name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \
        processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"")
        #pragma comment(lib, "Comctl32.lib")
        #include <tchar.h>
        #include <Windows.h>
        #include <CommCtrl.h>

        #include <sstream>
        using namespace std;
        TCHAR temp[1024];

        enum TabIndexes
        {
            ID_ReadingPageTab,
            ID_AutoClipboardTab
        };
        enum WindowControls
        {
            ID_SelectAll,
            ID_TabControls,
            ID_ReadingPageEdit,
            ID_AutoClipboardEdit,
            ID_AutoClipboardCheckbox,
            ID_AutoReadCheckbox,
            ID_AutoClearCheckbox,
            ID_ReadPauseResumeButton,
            ID_StopButton
        };

        //***************Global Variables***************
        HWND MainWindowHandle;
        HWND ClipboardViewer;
        HWND TabControls;
        HWND ReadingPageEdit;
        HWND AutoClipboardEdit;
        HWND AutoClipboardCheckbox;
        HWND AutoReadCheckbox;
        HWND AutoClearCheckbox;
        HWND ReadPauseResumeButton;
        HWND StopButton;
        RECT WindowReactangle;
        RECT EditControlsDimension;
        HACCEL SelectAll;
        int Textlength;

        void ShowReport()
        {
            LPTSTR ErrorText = NULL;
            FormatMessage
                (
                    FORMAT_MESSAGE_ALLOCATE_BUFFER |
                    FORMAT_MESSAGE_FROM_SYSTEM |
                    FORMAT_MESSAGE_IGNORE_INSERTS, //dwFlags
                    NULL, //lpSource
                    GetLastError(), //dwMessageId
                    MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), //dwLanguageId
                    (LPTSTR)&ErrorText, //lpBuffer
                    0, //nSize
                    NULL //*Arguments
                );
            MessageBox(NULL, ErrorText, TEXT("Last Error:"), MB_OK);
        }
        void OutputBox(LPTSTR OutputText)
        {
            MessageBox(NULL, OutputText, _T("WARNING!!!"), MB_OK);
        }

WNDPROC OldProc;
LRESULT CALLBACK EditControl
    (
        HWND hwnd,
        UINT uMsg,
        WPARAM wParam,
        LPARAM lParam
    )
{
    WPARAM StartOfSelectection;
    LPARAM EndOfSelection;
    int SelectionSize;
    int TextSize;
    TCHAR* hMem1;
    TCHAR* hMem2;

    if (uMsg == WM_COPY)
    {
        OpenClipboard(NULL);

        SendMessage(hwnd, EM_GETSEL, (WPARAM)&StartOfSelectection, (LPARAM)&EndOfSelection);
        SelectionSize = EndOfSelection - StartOfSelectection + 1;

        TextSize = SendMessage(hwnd, WM_GETTEXTLENGTH, 0, 0);
        TextSize -= (TextSize - EndOfSelection - 1);
        hMem1 = new TCHAR[TextSize]();
        ZeroMemory(hMem1, TextSize*sizeof(TCHAR));
        SendMessage(hwnd, WM_GETTEXT, TextSize, (LONG)hMem1);

        hMem2 = new TCHAR[SelectionSize]();
        ZeroMemory(hMem2, SelectionSize*sizeof(TCHAR));
        for(int Index=0; StartOfSelectection<EndOfSelection; ++StartOfSelectection)
            hMem2[Index++] = hMem1[StartOfSelectection];
        SetClipboardData(CF_UNICODETEXT, (HANDLE)hMem2);

        CloseClipboard();
        delete[] hMem1;
        //delete[] hMem2;
    }
    return OldProc(hwnd, uMsg, wParam, lParam);
}

        void CreateControls(HWND hWndParent)
        {
            GetClientRect(hWndParent, &WindowReactangle);
            const INITCOMMONCONTROLSEX CommonControls = {sizeof(INITCOMMONCONTROLSEX), ICC_TAB_CLASSES};
            InitCommonControlsEx(&CommonControls);
            TabControls = CreateWindow
            (
                WC_TABCONTROL, //lpClassName
                NULL, //lpWindowName
                WS_VISIBLE | WS_CHILD, //dwStyle
                WindowReactangle.left, //x
                WindowReactangle.top, //y
                WindowReactangle.right, //nWidth
                WindowReactangle.bottom - 100, //nHeight
                hWndParent, //hWndParent
                (HMENU)ID_TabControls, //hMenu
                NULL, //hInstance
                NULL //lpParam
            );
            TCITEM TabItemStructure = {0};
            TabItemStructure.mask = TCIF_TEXT;
            TabItemStructure.pszText = _T("Reading Page");
            SendMessage(TabControls, TCM_INSERTITEM, ID_ReadingPageTab, (LPARAM)&TabItemStructure);
            TabItemStructure.pszText = _T("Auto-Clipboard");
            SendMessage(TabControls, TCM_INSERTITEM, ID_AutoClipboardTab, (LPARAM)&TabItemStructure);

            ACCEL AcceleratorStructure;
            AcceleratorStructure.fVirt = FCONTROL | FVIRTKEY;
            AcceleratorStructure.key = 0x41;
            AcceleratorStructure.cmd = ID_SelectAll;
            SelectAll = CreateAcceleratorTable(&AcceleratorStructure, 1);

            ReadingPageEdit = CreateWindow
            (
                _T("EDIT"), //lpClassName
                NULL, //lpWindowName
                WS_VISIBLE | WS_CHILD | WS_VSCROLL | WS_BORDER | ES_MULTILINE, //dwStyle
                5, //x
                30, //y
                WindowReactangle.right - 10, //nWidth
                WindowReactangle.bottom - 135, //nHeight
                TabControls, //hWndParent
                (HMENU)ID_ReadingPageEdit, //hMenu
                NULL, //hInstance
                NULL //lpParam
            );

            AutoClipboardEdit = CreateWindow
            (
                _T("EDIT"), //lpClassName
                NULL, //lpWindowName
                WS_CHILD | WS_VSCROLL | WS_BORDER | ES_MULTILINE, //dwStyle
                5, //x
                30, //y
                WindowReactangle.right - 10, //nWidth
                WindowReactangle.bottom - 135, //nHeight
                TabControls, //hWndParent
                (HMENU)ID_AutoClipboardEdit, //hMenu
                NULL, //hInstance
                NULL //lpParam
            );

            AutoClipboardCheckbox = CreateWindow
            (
                _T("BUTTON"), //lpClassName
                _T("Auto-Clipboard"), //lpWindowName
                BS_AUTOCHECKBOX | WS_VISIBLE | WS_CHILD, //dwStyle
                10, //x
                WindowReactangle.bottom -100 +10, //y
                150, //nWidth
                25, //nHeight
                hWndParent, //hWndParent
                (HMENU)ID_AutoClipboardCheckbox, //hMenu
                NULL, //hInstance
                NULL //lpParam
            );
            SendMessage(AutoClipboardCheckbox, BM_CLICK, TRUE, 0);
    OldProc = (WNDPROC)SetWindowLongPtr(AutoClipboardEdit, GWLP_WNDPROC, (LONG)EditControl);    

            AutoReadCheckbox = CreateWindow
            (
                _T("BUTTON"), //lpClassName
                _T("Auto-Read"), //lpWindowName
                BS_AUTOCHECKBOX | WS_VISIBLE | WS_CHILD, //dwStyle
                10, //x
                WindowReactangle.bottom -100 +35, //y
                150, //nWidth
                25, //nHeight
                hWndParent, //hWndParent
                (HMENU)ID_AutoReadCheckbox, //hMenu
                NULL, //hInstance
                NULL //lpParam
            );

            AutoClearCheckbox = CreateWindow
            (
                _T("BUTTON"), //lpClassName
                _T("Auto-Clear"), //lpWindowName
                BS_AUTOCHECKBOX | WS_VISIBLE | WS_CHILD, //dwStyle
                10, //x
                WindowReactangle.bottom -100 +60, //y
                150, //nWidth
                25, //nHeight
                hWndParent, //hWndParent
                (HMENU)ID_AutoReadCheckbox, //hMenu
                NULL, //hInstance
                NULL //lpParam
            );
        }

        LRESULT WINAPI MainWindowProcedure
            (
                HWND hwnd,
                UINT uMsg,
                WPARAM wParam,
                LPARAM lParam
            )
        {
            switch(uMsg)
            {
            //Clipboard Events
            case WM_CHANGECBCHAIN:
                if ((HWND)wParam == ClipboardViewer)
                    ClipboardViewer = (HWND)lParam;
                return 0;
            case WM_DRAWCLIPBOARD:
                OpenClipboard(NULL);
                SendMessage(AutoClipboardEdit, EM_SETSEL, (WPARAM)-1, (LPARAM)-1);
                SendMessage(AutoClipboardEdit, EM_REPLACESEL, 0, (LPARAM)GetClipboardData(CF_UNICODETEXT)); //CF_TEXT //CF_UNICODETEXT
                CloseClipboard();
                break;

            //Window Controls Events
            case WM_COMMAND:
                switch (LOWORD(wParam))
                {
                case ID_SelectAll:
                    if (HIWORD(wParam)==1)
                        SendMessage(GetFocus(), EM_SETSEL, (WPARAM)0, (LPARAM)-1);
                    break;
                case ID_AutoClipboardCheckbox:
                    if (SendMessage(AutoClipboardCheckbox, BM_GETCHECK, 0, 0) == BST_CHECKED)   
                        ClipboardViewer = SetClipboardViewer(hwnd);
                    else
                        ChangeClipboardChain(hwnd, ClipboardViewer);
                    break;
                }
                return 0;

            //Tab Controls Events
            case WM_NOTIFY:
                if (SendMessage(TabControls, TCM_GETCURSEL, 0, 0))
                {
                    ShowWindow(ReadingPageEdit, SW_HIDE);
                    ShowWindow(AutoClipboardEdit, SW_SHOW);
                } else
                {
                    ShowWindow(AutoClipboardEdit, SW_HIDE);
                    ShowWindow(ReadingPageEdit, SW_SHOW);
                }
            break;

            //Main Window Events
            case WM_SIZE:
            {   
                int LOPARAM = lParam & 0xFFFF;
                int HIPARAM = lParam >> 16;
                SetWindowPos(TabControls, NULL, 0, 0, LOPARAM, HIPARAM-100, SWP_DRAWFRAME);
                SetWindowPos(ReadingPageEdit, NULL, 5, 30, LOPARAM-10, HIPARAM-100-35, SWP_DRAWFRAME);
                SetWindowPos(AutoClipboardEdit, NULL, 5, 30, LOPARAM-10, HIPARAM-100-35, SWP_DRAWFRAME);
                SetWindowPos(AutoClipboardCheckbox, NULL, 10, HIPARAM-100+10, 150, 25, SWP_DRAWFRAME);
                SetWindowPos(AutoReadCheckbox, NULL, 10, HIPARAM-100+35, 150, 25, SWP_DRAWFRAME);
                SetWindowPos(AutoClearCheckbox, NULL, 10, HIPARAM-100+60, 150, 25, SWP_DRAWFRAME);
                return 0;
            }
            case WM_CREATE:
                CreateControls(hwnd);
                return 0;
            case WM_DESTROY:
                DestroyAcceleratorTable(SelectAll);
                ChangeClipboardChain(hwnd, ClipboardViewer);
                PostQuitMessage(ERROR_SUCCESS);
                return 0;
            }
            return DefWindowProc(hwnd, uMsg, wParam, lParam);
        }

        void CreateMainWindow()
        {
            WNDCLASSEX WindowClassStructure;
            WindowClassStructure.cbSize = sizeof(WNDCLASSEX);
            WindowClassStructure.style = CS_HREDRAW | CS_VREDRAW;
            WindowClassStructure.lpfnWndProc = MainWindowProcedure;
            WindowClassStructure.cbClsExtra = 0;
            WindowClassStructure.cbWndExtra = 0;
            WindowClassStructure.hInstance = NULL;
            WindowClassStructure.hIcon = LoadIcon(NULL, IDI_INFORMATION);
            WindowClassStructure.hCursor = LoadCursor(NULL, IDC_ARROW);
            WindowClassStructure.hbrBackground = (HBRUSH)(COLOR_BTNFACE + 1);
            WindowClassStructure.lpszMenuName = NULL;
            WindowClassStructure.lpszClassName = _T("MainClass");
            WindowClassStructure.hIconSm = LoadIcon(NULL, IDI_INFORMATION);
            RegisterClassEx(&WindowClassStructure);

            MainWindowHandle = CreateWindow
            (
                _T("MainClass"), //lpClassName
                _T("Clipboard Reader"), //lpWindowName
                WS_VISIBLE | WS_OVERLAPPEDWINDOW, //dwStyle
                CW_USEDEFAULT, //x
                CW_USEDEFAULT, //y
                640, //nWidth
                480, // nHeight
                NULL, //hWndParent
                NULL, //hMenu
                NULL, //hInstance
                NULL //lpParam
            );
        }

        int WINAPI _tWinMain
            (
                HINSTANCE hInstance,
                HINSTANCE hPrevInstance,
                LPTSTR lpCmdLine,
                int nCmdShow
            )
        {
            CreateMainWindow();

            MSG MessageStructure = {0};
            while(MessageStructure.message != WM_QUIT)
            {
                if (PeekMessage(&MessageStructure, NULL, 0, 0, PM_REMOVE))
                {
                    if (!TranslateAccelerator(MainWindowHandle, SelectAll, &MessageStructure))
                    {
                        TranslateMessage(&MessageStructure);
                        DispatchMessage(&MessageStructure);
                    }
                }
            }

            return MessageStructure.wParam;
        } 
```

# android - 在android的/system/app目录中安装应用程序

> ID：10209146
> 
> 赞同：1
> 
> 时间：2012-04-18T12:13:06.687
> 
> 标签：android, installation, system

通常当我们安装安卓应用程序时，它们会进入`/data/app`存放用户应用程序的目录。但`/system/app`目录包含浏览器、图库、电子邮件等系统应用程序。

所以，我希望我的应用程序安装在`/system/app`目录中。

有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:42:07.780

如果手机没有root，或者您没有将自己的自定义rom刷入设备，则无法做到这一点。

# java - TCP 接收窗口大小总是满的

> ID：10209148
> 
> 赞同：0
> 
> 时间：2012-04-18T12:13:10.493
> 
> 标签：java, tcp

我有一个设备可以非常快地向 Windows XP 操作系统发送具有 1440 字节有效负载的 TCP 数据包。我将 TcpAckFrequency 设置为 0，即收到包后立即发回 ACK。我编写了一个 Java 应用程序，它在线程中读取套接字：

```
in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
in.read(charArray, 0, 720); 
```

我的问题是Windows缓冲区在收到一些（50-60）数据包后变满，然后发送一个DUP ACK，这会减慢通信速度。

我不明白为什么它会变满，因为我总是在读取缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:26:23.710

一种可能的解释是 Java 应用程序无法跟上。换句话说，它无法在设备发送数据时以最快的速度处理数据。如果这是问题所在，您必须想出一个解决方案，让应用程序更快地处理数据。

如果您有多个内核，则可以通过重构 Java 应用程序以使用一个线程从套接字读取数据并使用另一个线程（或多个线程）进行处理来获得更好的吞吐量。

另一种解决方案可能只是对 Java 应用程序进行概要分析，以查看是否有调整优化的空间。

最后，您可以通过为`BufferedReader`.

# java - 如何使用模式将图标设置为树节点

> ID：10209152
> 
> 赞同：1
> 
> 时间：2012-04-18T12:13:27.063
> 
> 标签：java, image, swing, jtree

我有以下情况：

![我想在树中存储对象的方式](../Images/99e1358a220ef18b336e3c3a0cfd79af.png)

对于 ech 树节点，我有不同类型的图像图标。

我实际设置这些图标的方式是重写`getTreeCellRendererComponent`、验证用户对象（标题），然后绘制图标。

否则，将图标设置为对象图标（对于 o3），因为它没有稳定的名称。

```
private final String OBJECTS, OBJECT, MATERIAL, DIMENSIONS, L, W, H,
        LEFT, RIGHT, FRONT, BACK, TOP, BOTTOM; //=...

@Override
public Component getTreeCellRendererComponent(JTree tree, Object value,
boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {

    super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
    node = (DefaultMutableTreeNode) value;
    String str = node.getUserObject().toString().toLowerCase();

    if (str.contains("objects")) {
        setIcon(new ImageIcon(OBJECTS));
    }
    else if (str.contains("components")) {
        setIcon(new ImageIcon(OBJECTS));
    }
    else if (str.contains("dimensions")) {
        setIcon(new ImageIcon(DIMENSIONS));
    }
    else if (str.contains("materials")) {
        setIcon(new ImageIcon(MATERIAL));

    }
    else if (str.contains("length")) {
        setIcon(new ImageIcon(L));
    }
    else if (str.contains("width")) {
        setIcon(new ImageIcon(W));
    }
    else if (str.contains("height")) {
        setIcon(new ImageIcon(H));
    }
    else if (node.getParent().toString().toLowerCase().contains("components") ||
             node.getParent().toString().toLowerCase().contains("objects")) {
        setIcon(new ImageIcon(OBJECT));
    }

    return this;
} 
```

我一直在画材料的孩子。我知道顺序（上、下、L、R、前、下），但我需要一种方法来识别节点。我正在考虑让他们的父母并以某种方式通过他们在子列表中的编号来识别他们。在这里需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:23:44.477

您在制定将图像/图标映射到节点的决策时遇到了问题。

我建议您使用策略模式，以便您可以更改如何找出应为相关节点使用哪个图标的方式。

然后，您可以尝试不同的方法来解决问题，并且例程也不会被所有 ifs 等卡住。

# asp.net-mvc-3 - 在循环中要在 Ajax.ActionLink 方法中引用的每个项目中动态设置 div id？

> ID：10209153
> 
> 赞同：1
> 
> 时间：2012-04-18T12:13:27.247
> 
> 标签：asp.net-mvc-3, razor

我们有更好的方法来处理它吗？

```
@foreach (var item in Model)
{
    <div id="divDetail@{@item.CategoryId}"/>
        @Ajax.ActionLink(
            item.CategoryName, 
            "GetDetails", 
            new { id = item.CategoryId }, 
            new AjaxOptions() { UpdateTargetId = string.Format("divDetail{0}", item.CategoryId) })
       }
    </div>
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:57:10.950

我会使用`HTML.ActionLink`辅助方法来生成链接，然后使用我的自定义 jQuery ajax 调用来获取数据。这样做的好处是我拥有完全的控制权，因此我可以在显示在详细 div 中之前对响应数据进行一些操作。

我在链接中添加了一个 CSS 类，以便在绑定我的功能时我可以更具体（在选择元素时）。

```
@foreach (var item in Model)
{
    <div id='divDetail@(item.ID)'></div>
    @Html.ActionLink(item.CategoryName, "GetDetails", new { @id = item.CategoryId}, new {@id= "link-"+item.CategoryId, @class="lnkItem" })    
} 
```

脚本是

```
<script type="text/javascript">
    $(function () {
        $(".lnkItem").click(function (e) {
            e.preventDefault();
            var itemId = $(this).attr("id").split("-")[1]
            $.get($(this).attr("href"), { id: itemId }, function (data) {
               //i am free to do anything here before showing the data !
                $("#divDetail" + itemId).html(data);
            })
        });
    });
</script> 
```

# java - Selenium：擦除来自不同域的 cookie

> ID：10209160
> 
> 赞同：0
> 
> 时间：2012-04-18T12:13:42.597
> 
> 标签：java, internet-explorer, firefox, cookies, selenium

我正在尝试实现一些从不同域导航的 Selenium 测试用例。在我的测试开始时，我希望从我工作过的所有域中删除所有 cookie。

我只设法使用 deleteAllVisibleCookies 命令从特定域中删除 cookie。但是我需要从另外两个尚未激活的域中删除 cookie。我正在 Eclipse 中实现 JUnit 4 脚本。如果您能帮助我找到一种方法，从一开始就从我选择的域中删除 cookie，我将不胜感激。

如果您能告诉我如何从 Firefox、IE 和 Chrome 中删除 cookie，我将不胜感激。

任何你需要我回答的问题来帮助我，就写吧！

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:52:38.177

您可以使用 getCookies 方法并迭代并从“您工作过的域”中删除所有内容

这是python中的一个示例，但在java中的想法相同：

```
wd = self.webdriver
cookies = wd.get_cookies()
for cookie in cookies:
    if cookie["domain"] == [domains i've worked]:
       wd.delete_cookie(cookie["name"]) 
```

# testing - 将非标准测试集成到 TeamCity

> ID：10209163
> 
> 赞同：6
> 
> 时间：2012-04-18T12:13:51.803
> 
> 标签：testing, ant, junit, teamcity

我正在尝试使用 TeamCity 自动运行一些测试（在我自己的测试基础架构中）。

我们没有使用 java 或 ant，但我可以从 perl 脚本生成 junit 测试结果：

```
run_tests.pl 
```

它生成 junit 结果文件（junit1.xml、junit2.xml 等）。

我之前通过将其作为命令行运行并为其提供了 junit 文件的路径，已将其集成到 Jenkins 中。

在 TeamCity 中，由于与 ant 和 junit 的更紧密集成，我需要从 ant junit 任务运行 run_tests.pl。

那么如何从 ant 运行命令来执行此操作呢？或者有没有更简单的方法来实现我想要的（在teamcity中报告的junit或其他测试结果）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:08:25.533

好的，找到了一个很好的方法来做到这一点。您需要的关键是 XML 报告处理，因此您不需要 ant 或 junit 任务[http://confluence.jetbrains.net/display/TCD7/XML+Report+Processing](http://confluence.jetbrains.net/display/TCD7/XML+Report+Processing)。

概括：

*   使用命令行构建步骤创建您的 junit1.xml 文件
*   将构建功能添加到 XML 报告处理类型的构建配置中
*   将报告类型设置为 ANT JUnit
*   添加+:junit*.xml的监控规则

# ios - 在应用内购买产品的描述中指定 JSON 数据

> ID：10209164
> 
> 赞同：-1
> 
> 时间：2012-04-18T12:13:57.777
> 
> 标签：ios, in-app-purchase

有没有人尝试在应用内购买产品的描述中指定 JSON 数据？我没有注意到产品描述显示在任何地方。苹果会批准这样的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:32:41.920

呃，没有真正的意义，因为它只允许在描述字段中使用 255 个符号。

# delphi - 全局异常中的delphi屏幕截图

> ID：10209165
> 
> 赞同：3
> 
> 时间：2012-04-18T12:14:00.350
> 
> 标签：delphi, exception-handling, screenshot, delphi-2006

我正在开发一个组件，*使用 Delphi 2006*，该组件检索系统信息并写入文件。要求是我必须在组件中合并一个全局异常处理程序，因此当异常发生时，它将被捕获并将我的自定义消息显示给用户。

```
 procedure Tmy.GlobalExceptionHandlerThis(Sender : TObject; E : Exception );
  begin
    //catch the exception and show the message
      TakeScreenShotAndSaveInapplicationFolder;
      MessageDlg('Exception has Occured  , Detail  '+E.Message,mtError,[mbOK],0);
  end; 
```

这工作正常，但根据要求我必须捕获错误屏幕截图（这是为了直观地找到异常弹出的表单）

所以我这样做了，从[delphigeist.com](http://www.delphigeist.com/2009/09/take-screenshot.html)截取屏幕截图代码：

```
procedure TakeScreenShotAndSaveInapplicationFolder;
var
  thisBitmap: TBitmap;
  sDate : string;
begin
  DateSeparator :='_';
  TimeSeparator:='_';
  sDate :=DateTimeToStr(now);
  thisBitmap := TBitmap.Create;
  ScreenshotArea(thisBitmap, Screen.DesktopRect, True);
  thisBitmap.SaveToFile(ExtractFilePath(Application.ExeName)+sDate+'.jpg');
  FreeAndNil(thisBitmap);
end; 
```

**问题：**

发生异常时，我也想截取消息的屏幕截图，但使用我的代码会发生这种情况

[![在此处输入图像描述](../Images/46308632fb64706bc57f12dd26c01aae.png)](https://i.stack.imgur.com/2cXrx.jpg "显示全尺寸版本")

谁能告诉我怎样才能得到这样的屏幕截图？那就是沿着表格获取消息

[![在此处输入图像描述](../Images/29e12d8b7679caa01652555f73dcfca6.png)](https://i.stack.imgur.com/HTj1r.png "显示全尺寸版本")

`MessageDlg('Exception has Occured, Detail ' + E.Message,mtError,[mbOK],0);` 是模态的，所以在消息之后我无法截屏。在我不能之前，那么当显示异常消息时，我什么时候可以直接截屏？

```
procedure Tmy.GlobalExceptionHandlerThis(Sender : TObject; E : Exception );
begin
  //catch the exception and show the message
  TakeScreenShotAndSaveInapplicationFolder;
  MessageDlg('Exception has Occured  , Detail  '+E.Message,mtError,[mbOK],0);
  TakeScreenShotAndSaveInapplicationFolder;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:23:07.080

修改[此消息框](https://stackoverflow.com/a/9642293/757830)（围绕 的包装`Windows.MessageBox`），如下所示：

```
{ TAwMessageBox }

type
  TAwMessageBox = class(TObject)
  private
    FCaption: String;
    FFlags: Cardinal;
    FHookProc: TFarProc;
    FText: String;
    FWndHook: HHOOK;
    function Execute: Integer;
    procedure HookProc(var Message: THookMessage);
  end;

function TAwMessageBox.Execute: Integer;
begin
  try
    try
      FHookProc := MakeHookInstance(HookProc);
      FWndHook := SetWindowsHookEx(WH_CALLWNDPROCRET, FHookProc, 0,
        GetCurrentThreadID);
      Result := Application.MessageBox(PChar(FText), PChar(FCaption), FFlags);
    finally
      if FWndHook <> 0 then
        UnhookWindowsHookEx(FWndHook);
      if FHookProc <> nil then
        FreeHookInstance(FHookProc);
    end;
  except
    Result := 0;
  end;
end;

procedure TAwMessageBox.HookProc(var Message: THookMessage);
var
  Data: PCWPRetStruct;
  Title: array[0..255] of Char;
begin
  with Message do
    if nCode < 0 then
      Result := CallNextHookEx(FWndHook, nCode, wParam, lParam)
    else
      Result := 0;
  if Message.nCode = HC_ACTION then
  begin
    Data := PCWPRetStruct(Message.lParam);
    if (Data.message = WM_ACTIVATE) and (LoWord(Data.wParam) = WA_INACTIVE) then
    begin
      ZeroMemory(@Title, SizeOf(Title));
      GetWindowText(Data.hwnd, @Title, SizeOf(Title));
      if String(Title) = FCaption then
      begin
        TakeScreenShotAndSaveInapplicationFolder;
        UnhookWindowsHookEx(FWndHook);
        FWndHook := 0;
        FreeHookInstance(FHookProc);
        FHookProc := nil;
      end;
    end;
  end;
end;

function MsgBox(const Text: String; Flags: Cardinal;
  const Caption: String): Integer;
begin
  with TAwMessageBox.Create do
  try
    FCaption := Caption;
    FFlags := Flags;
    FText := Text;
    Result := Execute;
  finally
    Free;
  end;
end; 
```

测试代码和屏幕截图：

```
procedure TForm1.ApplicationEvents1Exception(Sender: TObject; E: Exception);
begin
  MsgBox('Exception has occured. Details:'#13#10#13#10 + E.Message,
    MB_OK or MB_ICONERROR, 'Error');
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  raise Exception.Create('Test exception');
end; 
```

[![截屏](../Images/d768a364f4e40567393db687cb1ec73e.png)](https://i.imgur.com/xmq2W.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:30:54.460

消息对话框（和异常对话框）是模态的，因此第一个 TakeScreenShotAndSaveInApplicationFolder 调用将在它显示之前执行，第二个调用将在它关闭之前执行。

您*可以*创建自己的消息对话框，将屏幕捕获作为其 Show 例程的一部分，但我建议您应该查看客户的需求，而不是他们的要求并获得更好的解决方案。

从它的声音来看，他们希望能够准确地看到应用程序在错误发生时所处的状态。这意味着screengrab +错误详细信息，我不明白为什么错误详细信息需要专门作为screengrab的一部分。

为什么不考虑使用第 3 方错误记录系统（MadExcept、JclDebug）并将其扩展为捕获应用程序的屏幕截图而不显示错误消息？

这将为您提供同样多的信息（更多，由于异常日志可以产生的附加信息），而无需在出现错误对话框时尝试截屏。

另外，我会质疑抓住整个桌面屏幕。它很容易在不经意间抓取背景窗口上的敏感信息。

参考链接：

Jcl - [http://sourceforge.net/projects/jcl/](http://sourceforge.net/projects/jcl/)

MadExcept - [http://madshi.net/madExceptDescription.htm](http://madshi.net/madExceptDescription.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:56:47.357

使用您自己的自定义表单来显示错误对话框并让该表单控制屏幕截图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T06:50:39.877

在通过@NGLN 想法（上面的答案）和@Pieter B 想法通过表单本身截屏之后，我设法得到了我想要的东西。所以我使用[Open-Source-SynTaskDialog](http://blog.synopse.info/post/2011/03/05/Open-Source-SynTaskDialog-unit-for-XP,Vista,Seven)来显示我的异常消息，如下所示

```
 procedure Tmy.GlobalExceptionHandlerThis(Sender : TObject; E : Exception );
   begin
    var Task: TTaskDialog;
       begin
          Task.Title:='Error message';
          Task.Inst := 'An error/exception has occured';
          Task.Content := 'the details are ...';
          Task.Execute([],0,[],tiError ,tfiShield ,200);
       end; 
```

我在里面`SynTaskDialog.pas`做了这个

```
 procedure TTaskDialogForm.ButtonClick(Sender: TObject);
            begin

           TakeScreenShotAndSaveInapplicationFolder; {<--take the snap shot here..!!!}
          if (Sender<>nil) and Sender.InheritsFrom(TSynButton) then
          with TSynButton(Sender) do begin
          self.Tag := Tag;
          if Tag in [mrOk..mrNo] then
          self.ModalResult := Tag;
          Close;
         end;
        end; 
```

[![在此处输入图像描述](../Images/1f6ad7b5912ff2e98a92e9216630c168.png)](https://i.stack.imgur.com/JxUII.jpg "显示全尺寸图像")

这是我做的，`button click`因为`onshow`快照只有一半

# android - android中sqlite中的where子句

> ID：10209167
> 
> 赞同：2
> 
> 时间：2012-04-18T12:14:03.987
> 
> 标签：android, sqlite

我有两个应用程序应用程序 A 和应用程序 B。从 AI 中，我使用 contentProvider 将图像、两个字符串值保存到数据库中。

从应用程序 B 我正在访问这个数据库并获取图像。我正在使用的代码如下

```
byte b[] = null;
Cursor c = mContext.getContentResolver().query(allTitles, projection,null, null, null);
if (c.moveToFirst()) {
    do{
        if(info.activityInfo.name !=   null) {
            if(c.getString(1).equals(info.activityInfo.name)){
                b=c.getBlob(0);
            }
        }
    } while (c.moveToNext());
}
c.close(); 
```

在选择区域中，我给出了 null 所以我得到了数据库中的所有值，我必须运行这个循环。相反，我想给出一个 where 子句来获得确切的原始数据。

```
Cursor c = mContext.getContentResolver().query(allTitles, projection,"activity_name ="+info.activityInfo.name, null, null); 
```

所以我已经像这样改变了，但它不起作用。我应该如何给出选择参数？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:25:42.913

尝试..

```
Cursor c = mContext.getContentResolver().query(allTitles, projection,"activity_name = "+info.activityInfo.name, null, null);

or

Cursor c = mContext.getContentResolver().query(allTitles, projection,"activity_name = ? ", new String[]{info.activityInfo.name}, null); 
```

如果活动名称是文本

```
Cursor c = mContext.getContentResolver().query(allTitles, projection,"activity_name = "+"'"+info.activityInfo.name+"'", null, null);

    or

    Cursor c = mContext.getContentResolver().query(allTitles, projection,"activity_name = ? ", new String[]{"'"+info.activityInfo.name+"'"+}, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:26:21.307

你需要一个 '？' 让 Android 在 WHERE 子句中为您输入值。语法应该是，

光标 c = mContext.getContentResolver().query(allTitles, projection,"activity_name =?", new String[]{info.activityInfo.name}, null);

# objective-c - 调整窗口大小时，为什么我的 NSWindow 中的 NSViews 没有调整大小？

> ID：10209168
> 
> 赞同：2
> 
> 时间：2012-04-18T12:14:04.493
> 
> 标签：objective-c, macos, nswindow, nsviewcontroller, autoresizingmask

我正在努力弄清楚为什么我的视图没有在拖动时调整我的 NSWindow 的大小。

好的，这是我的结构：

*   子类化 NSWindowController 的视图***（使用自动布局检查窗口。自动调整大小检查视图。窗口的视图没有连接到 IB 中的任何东西，应该是吗？）***
    *   各种按钮
    *   自定义视图 **（选中自动调整子视图大小）**
        *   子类化 NSViewController 的视图**（Auto Resizes Subviews & Translates Mask 检查）**
            *   各种子视图**（选中自动调整子视图大小）**
        *   子类化 NSViewController 的视图**（Auto Resizes Subviews & Translates Mask 检查）**
            *   各种子视图**（选中自动调整子视图大小）**

我将这些视图中的每一个添加到我的 NSWindowController 的自定义视图中。这是我文件中唯一相关的方法：

```
-(void)setActiveView:(NSString*) viewString{
    if ([currentViewController view] != nil)
        [[currentViewController view] removeFromSuperview];    

    if ([viewString isEqualToString:kFirstView]){
        FirstViewController *viewController = [[FirstViewController alloc]initWithNibName:kFirstView bundle:nil];
        if (viewController != nil){
            currentViewController = viewController;
        }

    }

    else if ([viewString isEqualToString:kSecondView]){
        SecondViewController *viewController = [[SecondViewController alloc]initWithNibName:kSecondView bundle:nil];
        if (viewController != nil){
            currentViewController = viewController;
        }
    }

    //Resize Controller to Window's size.
    [[currentViewController view] setFrame:[myWindowView bounds]];

    //Embed current view into Custom View in host view.
    [myWindowView addSubview:[currentViewController view]];

} 
```

当我更改视图时，要调整大小的 setFrame 确实有效，但当我拖动以调整窗口大小时则无效。据我所知，因为 setFrame 在我更改视图时起作用，所以唯一真正重要（但不起作用）的是我的 NSWindowController 中的自定义视图。

此外，这就是我将这个窗口向前推进的方式：

```
 myController = [[MyWindowController alloc]initWithWindowNibName:@"MyWindow"];
    [myController showWindow:nil]; 
```

是的，我已经在我的 initwithframe 中尝试过：

```
[myWindowView setAutoresizesSubviews:YES];
[myWindowView setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable]; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:55:16.707

Try to do this without *Auto Layout*.

**Try this:**

*   Uncheck *Use Auto Layout* for window.

*   Go to *Size inspector* and make *autosizing* to Your Views like this:

    ![autosizing](../Images/59ed85cebd4767873acacaea9a4edb8d.png)

# facebook-graph-api - 同时安装多个 facebook 应用程序

> ID：10209170
> 
> 赞同：1
> 
> 时间：2012-04-18T12:14:20.913
> 
> 标签：facebook-graph-api

我们使用 facebook SDK 同时安装多个 facebook 应用程序，但有时并非所有应用程序都已安装。关于我们一次可以安装的 facebook 应用程序的数量（在 facebook 方面），似乎存在一些限制或错误。

目前我们已经实施了一种解决方法，包括在每次安装应用程序之间等待几秒钟，但显然这不是一个解决方案，它也无法正常工作。

有没有人遇到过这样的问题？你用它做了什么？

谢谢！

相关安装代码：

```
 FB.api('/'+pageId+'/tabs?access_token='+pageAccessToken, 'post', params, 
```

# c# - 在 azure 中读取作为 blob 上传的 excelsheet

> ID：10209171
> 
> 赞同：0
> 
> 时间：2012-04-18T12:14:28.277
> 
> 标签：c#, azure

我正在使用 asp.net 的 FileUpload 控件并使用一些数据上传 excel。我无法将其保存在某个文件夹中。我可以有 excel 工作表文件流，也可以在将 excel 作为 blob 上传后拥有 Blobstream。现在我想将第一张 excel 表转换为数据表，那我该怎么做呢？我正在使用 C# .NET。我不想使用互操作库。我可以使用外部库。Oledb 连接失败，因为我没有任何 excel 物理路径作为数据源。我尝试了以下链接：

1) [http://www.codeproject.com/Articles/14639/Fast-Excel-file-reader-with-basic-functionality](http://www.codeproject.com/Articles/14639/Fast-Excel-file-reader-with-basic-functionality)

2) [http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:19:39.670

根据 Excel 文件的类型，您可以使用您发布的示例或使用 OpenXML 替代方案（适用于 xlsx 文件）： http: [//openexcel.codeplex.com/](http://openexcel.codeplex.com/)

现在，物理路径的问题很容易解决。将文件保存到 blob 存储非常棒。但是，如果您愿意，您也**可以**将其保存在本地资源中以在本地使用。这将允许您使用简单的 OleDb 连接来处理文件。完成文件后，您可以将其从本地资源中删除（它仍然可以在 blob 存储中使用，因为您也将它上传到了那里）。

不要忘记有某种清理机制以防您的处理失败。您不希望最终得到一个充满临时文件的磁盘（即使这可能需要一段时间才能发生）。

在此处阅读有关本地资源的更多信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:44:37.783

您遵循的方法不是正确的方法，正如您所说，您登录到 azure 并进行了更改，在 azure 上运行的 VM 对您来说不是永久的。对于任何更新，您将获得新的 VM 机器。您可能不得不为此寻找转身，而不是手动修改。您可以使用 azure 应用程序中的启动任务。请参阅下面的链接，它可能会对您有所帮助。

[http://msdn.microsoft.com/en-us/library/gg456327.aspx](http://msdn.microsoft.com/en-us/library/gg456327.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:23:58.180

我首先根据链接创建了本地存储：

[http://msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx)

上面的 Sandrino 建议。感谢桑德里诺。然后我使用了 oledb 连接，它给了我一个错误“Microsoft.Jet.Oledb.4.0 dll 未注册”。然后我登录到 azure 服务器并在 IIS 中将应用程序池配置更改为 32 位。要将应用程序池更改为 32 位，请参阅以下链接：

[http://blog.nkadesign.com/2008/windows-2008-the-microsoftjetoledb40-provider-is-not-registered-on-the-local-machine/](http://blog.nkadesign.com/2008/windows-2008-the-microsoftjetoledb40-provider-is-not-registered-on-the-local-machine/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:16:44.317

您应该使用 OpenXML SDK，这是官方建议的处理 MS Office 文档的方式 - [http://www.microsoft.com/download/en/details.aspx?id=5124](http://www.microsoft.com/download/en/details.aspx?id=5124)

# ruby-on-rails-3 - 学习 Rails、研讨会、课程、资源

> ID：10209172
> 
> 赞同：-2
> 
> 时间：2012-04-18T12:14:33.223
> 
> 标签：ruby-on-rails-3

尝试学习 Rails，但对于初学者来说，野兽相当复杂 :) 任何人都知道英国伦敦的课程、研讨会、指导等。

我没有编程背景，但我是一名网页设计师/开发人员。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:12:12.470

I know this doesn't directly answer you current question but I found that the Ruby On Rails Tutorial by Michael Hartl really helped me.

Here is a link: [http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2)

# android - 从android中的mp3文件中提取专辑封面

> ID：10209176
> 
> 赞同：7
> 
> 时间：2012-04-18T12:14:43.487
> 
> 标签：android, mp3

大家好，在我的媒体播放器中，我需要显示这首歌的专辑封面（我不知道它实际上是如何发音的......我希望是对的）。我知道我必须从歌曲本身中提取图像，但是如何？我想知道。所以任何帮助，如果可能的话，使用某种代码。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-04T10:10:14.690

对于 api 10 及更高版本

```
android.media.MediaMetadataRetriever mmr = new MediaMetadataRetriever();
        mmr.setDataSource(songsList.get(songIndex).get("songPath"));

        byte [] data = mmr.getEmbeddedPicture();
               //coverart is an Imageview object

        // convert the byte array to a bitmap
        if(data != null)
        {
            Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
            coverart.setImageBitmap(bitmap); //associated cover art in bitmap
        }
        else
        {
            coverart.setImageResource(R.drawable.fallback_cover); //any default cover resourse folder
        }

            coverart.setAdjustViewBounds(true);
            coverart.setLayoutParams(new LinearLayout.LayoutParams(500, 500)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T03:41:43.743

尝试[FFmpegMediaMetadataRetriever](https://github.com/wseemann/FFmpegMediaMetadataRetriever)：

```
FFmpegMediaMetadataRetriever retriever = new FFmpegMediaMetadataRetriever();
retriever.setDataSource(uri);
byte [] data = retriever.getEmbeddedPicture();

// convert the byte array to a bitmap
Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
// do something with the image ...
// mImageView.setImageBitmap(bitmap);

retriever.release(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-19T13:08:11.977

您可以使用 Album_id 尝试使用 Picasso。它是开源的，内存缓存更少。

依赖：

```
implementation 'com.squareup.picasso:picasso:2.71828' 
```

代码：

```
String albumId = songObject.getAlbum_id();

final Uri albumUri = Uri.parse("content://media/external/audio/albumart");

Uri uri = ContentUris.withAppendedId(albumUri, Long.parseLong(albumId));

    Picasso.get().load(uri)
            .fit()
            .centerCrop()
            .error(R.drawable.img_album)
            .into(holder.imgAlbumSongObject); 
```

这已经很晚了。但是，可能会帮助某人。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-24T11:29:54.440

```
 MediaMetadataRetriever mmr = new MediaMetadataRetriever();
 mmr.setDataSource(filePath);

String albumName = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUM)); 
```

请注意，这仅适用于 api 级别 10 或更高版本

# javascript - IE9 中的 Javascript 问题与 Windows 7 Professional 而不是 Windows 7 Enterprise

> ID：10209177
> 
> 赞同：4
> 
> 时间：2012-04-18T12:14:46.987
> 
> 标签：javascript, windows-7, internet-explorer-9

1.  是否有可能只在带有 Windows 7 Professional 的 IE9 中而不是在带有 Windows Enterprise 的 IE9 中出现与 javascript 相关的错误？
2.  在 32 位 Windows 7 和 64 位 Windows 7 之间，IE9 对 javascript 的行为方式有什么不同吗？

请帮我解决一下这个。完整的javascript函数如下。

```
function foo() {
    var isChecked = false;
    var checkBoxField = "MyCheckBox1";
    for(j=0;j<document.forms[0].elements.length;j++) {
        if(document.forms[0].elements[j].name.search(checkBoxField) == 0) {
            if (document.forms[0].elements[j].checked == true) { 
                isChecked = true;
            }
        }
    }
    alert(isChecked);
} 
```

检查 checkBoxField 时，isChecked 变量必须为真。**在 IE9-Windows 7 企业版**（不确定 32 位或 64 位）中为真，在 IE9-Windows 7 专业版（32 位）中为**假**

道歉。在查看问题发生的确切机器中的 IE 设置后，很明显这是由于缓存造成的。**Preserve Favorites website data**设置保留旧的 js 文件并且不下载更新版本（即使我们尝试清除 cookie、历史、临时文件等）。一旦取消选中该设置 - 历史记录，缓存清除一切开始工作。干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:54:12.967

道歉。在查看问题发生的确切机器中的 IE 设置后，很明显这是由于缓存造成的。Preserve Favorites website data 设置保留旧的 js 文件并且不下载更新版本（即使我们尝试清除 cookie、历史、临时文件等）。一旦取消选中该设置 - 历史记录，缓存清除一切开始工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:20:22.423

不同的 Windows 版本应该没有任何区别，因为大多数时候您将使用 32 位即。但是你永远不知道 ie javascript 中有什么样的错误

你可以尝试的是使用[jquery](http://jquery.com/) 你的代码看起来像

```
function foo() {
    var isChecked = $("name='MyCheckBox1':first").attr('checked');      
    alert(isChecked);
} 
```

将您的复选框 id 设置为 MyCheckBox1 并进一步简化

```
function foo() {
    var isChecked = $("#MyCheckBox1").attr('checked');      
    alert(isChecked);
} 
```

不确定它是否会帮助你，但这是我的 20 美分。

# php - 访问类被引用？

> ID：10209180
> 
> 赞同：0
> 
> 时间：2012-04-18T12:14:55.800
> 
> 标签：php, oop, class

我知道这似乎是一个奇怪的问题，但假设我有两节课；

```
class Class1 {
    private $foo;
    function addBar(Class2 &$bar)
    {
        $this->foo = $bar;
    }
}

class Class2 {
    private $foo
}

$a = new Class1;
$b = new Class2;
$a->addBar($b); 
```

有什么办法`Class2`可以从中读取信息`Class1`吗？即使它们在这里位于同一代码块中，但它们在我的脚本中位于单独的文件中。我需要这个的原因是因为我已经`Class2`通过引用进行了链接，但在已经链接`Class2`之前不允许运行`Class1`，而且我知道我可以传递另一个变量来引用`Class2`（`Class1`例如`$b->addFoo($a)`），但如果可能的话，我宁愿避免这种情况。

我希望这可以做到！
提前致谢

**编辑**

感谢所有提供帮助的人，我决定另辟蹊径。再次感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:27:19.950

```
class Class1 {
    private $foo;
    function addBar(Class2 $bar)
    {
        $this->foo = $bar;
        $bar->addBar($this);
    }
}

class Class2 {
    private $foo
    function addBar(Class1 $bar)
    {
        $this->foo = $bar;
    }
}

$a = new Class1;
$b = new Class2;
$a->addBar($b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:27:45.550

```
class Class1 {
    private $foo;
    function addBar(Class2 &$bar)
    {
        $this->foo = $bar;
        $bar->doSomething();
    }
}

class Class2 {
    private $foo
    function doSomething()
    {
        //code
    }
}

$a = new Class1;
$b = new Class2;
$a->addBar($b); 
```

这种方式`doSomething`在之后`Class2()`运行`addBar()``Class1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:23:23.180

`Class2`可以调用`Class1`对象的方法，但不能访问私有数据。但它必须引用一个`Class1`实例才能调用它的任何方法。

您的示例并未显示`Class2`实际包含任何代码，听起来您正试图避免在`$b`. 那没有意义。 如果您从未在其上调用任何方法，则`Class2`无法“做”*任何事情。*

# jsf - 如何用backing bean打开新窗口？

> ID：10209184
> 
> 赞同：4
> 
> 时间：2012-04-18T12:15:07.597
> 
> 标签：jsf

我正在为我的项目前端使用 JSF。我怎样才能用backing bean打开一个新窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:25:57.080

设置`target="_blank"`在`<h:commandLink>`或上`<h:form>`。

例如

```
<h:form>
    <h:commandLink value="Open in new window" action="#{bean.action}" target="_blank" />
</h:form> 
```

或者

```
<h:form target="_blank">
    <h:commandButton value="Open in new window" action="#{bean.action}" />
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T14:01:00.613

除了 BalusC 的答案。在以下情况下的一种hacky解决方案：

*   commandLink 不能在 UI 中使用（由于页面样式或任何其他原因）
*   表单的目标无法更改

    ```
    <!-- Group and render them together.-->
    <h:panelGroup rendered="#{mybean.showButton}">

    <!-- Visible and clickable commandButton. No action, just onclick js event.-->
    <h:commandButton value="My Commandbutton"
    onclick="document.getElementById('myForm.realTargetBlankLink').click();"/>

    <!-- Invisible link. Action, target _blank.-->
    <h:commandLink id="realTargetBlankLink" action="#{myBean.myDesiredAction}"
    target="_blank"/>

    </h:panelGroup> 
    ```

# objective-c - 如何识别具有特定索引的 NSTableView 中的行对象？

> ID：10209188
> 
> 赞同：0
> 
> 时间：2012-04-18T12:15:20.133
> 
> 标签：objective-c, cocoa, nstableview, nsarraycontroller, selectedindex

我在 InterfaceBuilder 中使用 NSArrayController 来管理在 NSTableView 中显示的对象。当我选择一行或多行时，会调用以下代码来删除对象并更新选择。

```
NSIndexSet* selectedRowIndices = [m_tableView selectedRowIndexes];
if (!selectedRowIndices || selectedRowIndices.count < 1) {
    return;
}
[self removeObjectsAtIndices:selectedRowIndices];

// -------------------------------------------------------
// SELECT ROW BELOW OR EQUAL TO THE LAST DELETED ROW.
// -------------------------------------------------------

// Retrieve the highest selection index (lowest row).
NSInteger highestSelectedRowIndex = NSNotFound;
for (NSUInteger index = selectedRowIndices.firstIndex; index < selectedRowIndices.count; ++index) {
    if (index > highestSelectedRowIndex) {
        highestSelectedRowIndex = index;
    }
}
if (highestSelectedRowIndex != NSNotFound && highestSelectedRowIndex < [m_tableView numberOfRows]) {
    // 1) Get the selected object for the highest selected index.
    // TODO: Retrieve the object from m_tableView or m_arrayController somehow!?!
    // 2) Update the table view selection.
    //[self updateTableViewWithSelectedObjects:...];
} 
```

但是，我不知道如何识别与前一个选择的最高索引匹配的对象。
为什么？我想将新选择移动到最后一个选择下方的行。

* * *

**注意：**上面的代码包含几个错误！

这就是我最终得到的结果——感谢 Thomas 的澄清。

```
NSUInteger nextSelectedRowIndex = selectedRowIndices.firstIndex;
if (nextSelectedRowIndex != NSNotFound) {
    if (nextSelectedRowIndex >= m_tableView.numberOfRows) {
        nextSelectedRowIndex = m_tableView.numberOfRows - 1;
    }
    id nextSelection = [[m_arrayController arrangedObjects] objectAtIndex:nextSelectedRowIndex];
    [self updateTableViewWithSelectedObjects:nextSelection]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:42:10.380

an 中的索引`NSIndexSet`是有序的。无需循环即可找到最高点。

如果要选择给定行，只需`-selectRowIndexes:byExtendingSelection:`使用要建立的新选择进行调用。例如，`[m_tableView selectRowIndexes:[NSIndexSet indexSetWithIndex:highestSelectedRowIndex] byExtendingSelection:NO]`。你不需要知道那是哪个对象。

如果您仍然想知道该对象，则必须获取数组控制器`arrangedObjects`并应用于`-objectAtIndex:`该对象。

# exception-handling - 异常处理代码中的非法表达式错误

> ID：10209193
> 
> 赞同：0
> 
> 时间：2012-04-18T12:15:35.140
> 
> 标签：exception-handling, freepascal

我正在编写一个小程序来计算 FreePascal 中的交通罚款。源代码如下：

```
 program TrafficFine;

{$mode objfpc}{$H+}

uses
{$IFDEF UNIX}{$IFDEF UseCThreads}
cthreads,
{$ENDIF}{$ENDIF}
Classes,SysUtils;

var
    userInput : Char;
    Fine      : Integer;
    TotalFine : Integer;
    DaysPassed: Integer;
    FineType  : Integer;

begin

    userInput := 'y';   

    while (userInput = 'Y') or (userInput = 'y') do
    begin;
        writeln('Enter type of fine:');
        writeln('- Enter 1 for not wearing a seat-belt.');
        writeln('- Enter 2 for driving without a license');
        writeln('- Enter 3 for over-speeding.');

        try
            write('Enter value: ');
            readln(FineType);
            if(FineType <0) or (FineType>3) then
                raise exception.Create('Fine type outside of range.');
            case FineType of
            1:  Fine:= 500;
            2:  Fine:= 1000;
            3:  Fine:= 2000;
        except
        on e: exception do {line 39}
        begin
            Writeln('Error: '+e.message);
            continue;
        end;

        write('Enter number of days passed since fine: ');
        readln(DaysPassed);
        if daysPassed<=10 then
            TotalFine := Fine;
        else if (daysPassed >10) and (daysPassed <=30) then
            TotalFine := Fine * 2;
        else
            TotalFine := Fine*2 + Fine*0.5;

        writeln('Total Fine is ' + IntToStr(TotalFine));        
        writeln('Would you like to calculate another fine: ');
        readln(userInput);  
    end;
end. 
```

我收到以下错误：

> 免费 Pascal 编译器版本 2.4.4-2ubuntu1 [2011/09/27] for i386 版权所有 (c) 1993-2010 by Florian Klaempfl 目标操作系统：Linux for i386 编译 /home/ubuntu/Desktop/TrafficFine.pas TrafficFine.pas(39 ,3) 错误：非法表达式 TrafficFine.pas(40,3) 错误：预期常量表达式 TrafficFine.pas(40,3) 致命：语法错误，预期为“：”但发现“标识符打开”致命：编译中止

我直接从一本书中遵循了这个例子，所以我不确定我哪里出错了。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:46:15.653

您的代码中有几个缺陷，我在源代码中进行了更正和评论。试试这个新版本。

```
program TrafficFine;

{$mode objfpc}{$H+}

uses
{$IFDEF UNIX}{$IFDEF UseCThreads}
cthreads,
{$ENDIF}{$ENDIF}
Classes,SysUtils;

var
    userInput : Char;
    Fine      : Integer;
    TotalFine : Integer;
    DaysPassed: Integer;
    FineType  : Integer;

begin

    userInput := 'y';

    while (userInput = 'Y') or (userInput = 'y') do
    begin //removed semicolon
        writeln('Enter type of fine:');
        writeln('- Enter 1 for not wearing a seat-belt.');
        writeln('- Enter 2 for driving without a license');
        writeln('- Enter 3 for over-speeding.');

        try
            write('Enter value: ');
            readln(FineType);
            if(FineType <0) or (FineType>3) then
                raise exception.Create('Fine type outside of range.');
            case FineType of
            1:  Fine:= 500;
            2:  Fine:= 1000;
            3:  Fine:= 2000;
            end;//added end;
        except
        on e: exception do {line 39}
        begin
            Writeln('Error: '+e.message);
            continue;
        end;
        end; //added end;

        write('Enter number of days passed since fine: ');
        readln(DaysPassed);
        if daysPassed<=10 then
            TotalFine := Fine //removed semicolon
        else if (daysPassed >10) and (daysPassed <=30) then
            TotalFine := Fine * 2 //removed semicolon
        else
            TotalFine := (Fine*2) + (Fine div 2);//replaced this sentence (Fine*2) + (Fine*0.5)

        writeln('Total Fine is ' + IntToStr(TotalFine));
        writeln('Would you like to calculate another fine: ');
        readln(userInput);
    end;
end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:35:53.340

好像你忘了用 End 结束 Case；

# vb.net - 如何解决由于 Microsoft.Office.Interop.Access.ApplicationClass 引起的这个错误？

> ID：10209196
> 
> 赞同：2
> 
> 时间：2012-04-18T12:15:44.753
> 
> 标签：vb.net, vb6-migration

当我处理 COM 组件访问时，我收到了这个错误。

> 无法将“Microsoft.Office.Interop.Access.ApplicationClass”类型的 COM 对象转换为接口类型“Microsoft.Office.Interop.Access._Application”。
> 
> 此操作失败，因为 IID 为“{68CCE6C0-6129-101B-AF4E-00AA003F0F07}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：加载类型库/DLL 时出错。（来自 HRESULT 的异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)）。

实际上它是一个从 B 6.0 迁移到 VB.NET 的项目。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-30T19:41:26.167

有时，MS Access 互操作（以及一般互操作）与 64 位可执行文件不兼容。将您的项目编译类型更改为“x86”为我解决了这个问题。默认值为“任何 CPU”，这意味着您可以在 64 位模式下运行它，这与您的互操作不兼容。

另一种可能是您的 COM 库版本与您安装在 CPU 上的版本不匹配。当同一项目的两个不同开发人员没有相同版本的 Access 时，可能会发生这种情况。这不太可能，但仍有可能。

# iframe - Sencha：Google 文档在 iPhone/iPad 的 IFRAME 中崩溃

> ID：10209197
> 
> 赞同：1
> 
> 时间：2012-04-18T12:15:49.867
> 
> 标签：iframe, google-docs, sencha-touch-2

我创建了一个 Sencha Touch 2.0 应用程序，它需要在 IFRAME 中使用 google 查看器打开文档。这些文件在桌面浏览器和黑莓中都可以正常打开。但它会强制 iOS 中的浏览器崩溃。这是我在 sencha 面板中使用的嵌入式 src Iframe：

```
<iframe 
src="https://docs.google.com/viewer?url=https://betagalaxy.classlink.net/Files/Chemistry%20-%20Carbon%20Rings%20v1.ppt&embedded=true" />
</iframe> 
```

有人用 Sencha Touch 遇到过同样的错误吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:24:35.000

尝试使用嵌入而不是 iframe，这是我的解决方法，到目前为止

```
<embed src="https://docs.google.com/viewer?url=https://betagalaxy.classlink.net/Files/Chemistry%20-%20Carbon%20Rings%20v1.ppt&embedded=true" ></embed> 
```

# java - 通过 Java 进行多播，地址错误

> ID：10209200
> 
> 赞同：2
> 
> 时间：2012-04-18T12:16:05.163
> 
> 标签：java, network-programming

我们的老师让我们修改 MulticastImageSender (MIS) 和 MulticastImageReceiver (MIR) 类中的两个程序。唯一的问题是，我似乎无法弄清楚如何让它们像他给我们时那样正常工作。我一直被告知我的地址不是多播地址。

MIS 的参数：java -jar MIS.jar 127.0.0.0 1234 4 "/home/kevin/Pictures/ME.png" MIR 的参数：java -jar MIR.jar 127.0.0.0 1234

然后我先运行接收器，但我不断得到这些输出

MIS 的输出：

```
Sent /home/kevin/Pictures/ME.png to 127.0.0.0 on port 1234 
```

MIR 的输出：

```
Exception in thread "main" java.lang.IllegalArgumentException: Not a multicast address
at MulticastImageReceiver.main(MulticastImageReceiver.java:35) 
```

现在我知道多播地址是 244.xxx 并保留了一些地址，但我想我需要使用本地机器地址将其发送给自己。或者通过使用 244.xxx 地址创建我的多播套接字，我的路由器（计算机网络接口卡？）知道我的地址是 127.0.0.0，并且发送者使用相同的路由器（NIC？）创建多播套接字知道发送它又给我了？

** 我曾经发布过这个问题，但无济于事。我意识到我收到的错误来自这一行

```
if (!multicastAddress.isMulticastAddress()) 
```

我只是在学习所有这些东西，并试图弄清楚如何实际运行这个程序，以便我可以真正开始我的任务。我所需要的只是快速解释要使用的地址和原因。

使用 Ubuntu Oneric、Eclipse IDE、Java

资源：

```
MIS

public class MulticastImageSender 
{
private static final int TIMEOUT = 3000; // Time between sends (milliseconds)
private static final int MAXFILELEN = 65000; // File must fit in single datagram

public static void main(String[] args) throws IOException, InterruptedException 
{
    if (args.length < 4) // Test for correct # of args
        throw new IllegalArgumentException("Parameter(s): <Multicast Address> <Port> <TTL> <Image File> [<Image File>...]");

    InetAddress multicastAddress = InetAddress.getByName(args[0]);
    int destPort = Integer.parseInt(args[1]);
    // Destination port of multicast packets
    int TTL = Integer.parseInt(args[2]);
    // Create a UDP multicast socket with any available local port
    MulticastSocket socket = new MulticastSocket();
    socket.setTimeToLive(TTL);
    // Set the TTL
    for (int i=3; i < args.length; i++)
    {
        RandomAccessFile file = new RandomAccessFile(args[i], "r");
        if (file.length() > MAXFILELEN)
            throw new IOException("File too big");
        byte [] fileBuffer = new byte[(int) file.length()];
        file.read(fileBuffer);
        file.close();
        // Create a datagram to send
        DatagramPacket sendPacket = new DatagramPacket(fileBuffer, fileBuffer.length, multicastAddress, destPort);
        socket.send(sendPacket); // Send the echo string
        System.out.println("Sent " + args[i] + " to " + sendPacket.getAddress().getHostAddress() + " on port " + sendPacket.getPort());
        Thread.sleep(TIMEOUT);
    }
    socket.close();
}
} 
```

MIR 及其支持线程

```
import java.awt.event.*;
import javax.swing.*;
import java.net.*;
import java.io.*;

public class MulticastImageReceiver extends JFrame 
{

private static final long serialVersionUID = 1L;
private JLabel picture;
// Label to contain image
public MulticastImageReceiver() 
{
    super("Multicast Image Receiver"); // Set the window title
    setSize(300, 300);
    // Set the window size
    picture = new JLabel("No image", SwingConstants.CENTER);
    JScrollPane scrollPane = new JScrollPane(picture);
    getContentPane().add(scrollPane, "Center");
    addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent evt){ System.exit(0);}});
}

public JLabel getPicture() 
{
    return picture;
}

public static void main(String[] args) throws IOException 
{
    if (args.length != 2) // Test for correct # of args
        throw new IllegalArgumentException( "Parameter(s): <Multicast Address> <Port>");

    final InetAddress multicastAddress = InetAddress.getByName(args[0]);
    if (!multicastAddress.isMulticastAddress())
        throw new IllegalArgumentException("Not a multicast address");

    int port = Integer.parseInt(args[1]);
    // Destination port of multicast packets
    MulticastImageReceiver multicastImageReceiver = new MulticastImageReceiver();
    multicastImageReceiver.setVisible(true);
    new Thread(new MulticastImageReceiverThread(multicastImageReceiver, multicastAddress, port,"No Image")).start();
}
} 
```

米尔螺纹

```
import java.awt.*;
import javax.swing.*;
import java.net.*;
import java.io.*;

class MulticastImageReceiverThread implements Runnable 
{
private static final int MAXFILELEN = 65000;
// File must fit in single datagram
private InetAddress multicastAddress;
// Sender multicast address
private int port;
// Sender port
Runnable updateImage;
// Anonymous class for Swing event queue to update label
String imageText;
// Label text
byte[] image = new byte[MAXFILELEN];
// Bytes of image
boolean imageValid = false;
// True if image contains valid bytes

public MulticastImageReceiverThread(final MulticastImageReceiver frame, InetAddress multicastAddress, int port, String initialImageText) 
{
    this.multicastAddress = multicastAddress;
    this.port = port;
    this.imageText = initialImageText;
    updateImage = new Runnable() 
    {
        public void run() 
        {
            JLabel picture = frame.getPicture();
            picture.setText(imageText);
            if (imageValid) 
            {
                ImageIcon newImage = new ImageIcon(image);
                picture.setIcon(newImage);
                picture.setPreferredSize(new Dimension(newImage.getIconWidth(), newImage.getIconHeight()));
            } 
            else
                picture.setIcon(null);

            picture.revalidate();
        }
    };
}

public void changeImage() 
{
    try 
    {
        SwingUtilities.invokeAndWait(updateImage);
        // Put update in queue and wait until handled
    } 
    catch (Exception e) 
    { 
        System.out.println(e.getMessage());}
}

public void run() 
{
    // Create a datagram to receive
    DatagramPacket recvPacket = new DatagramPacket(image, MAXFILELEN);
    MulticastSocket socket;
    // Create a UDP multicast socket with the specified local port
    try 
    {
        socket = new MulticastSocket(port);
        socket.joinGroup(multicastAddress); // Join the multicast group
    } 
    catch (IOException e) 
    {
        imageText = "Problem with multicast socket";
        imageValid = false; changeImage(); return;
    }
    for (;;) 
    {
        try 
        {
            socket.receive(recvPacket); // Receive the image
        } 
        catch (IOException e) 
        { break; }
        // Assume exception due to file closing
        imageText = "";
        imageValid = true;
        changeImage();
        recvPacket.setLength(MAXFILELEN);
        // You have to reset this!!!
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:19:37.550

127.0.0.1 不是多播它是本地主机（单播）

多播是旧的 D 类空间。所以从 224.0.0.0 到 239.255.255.255

看

[https://www.rfc-editor.org/rfc/rfc1112](https://www.rfc-editor.org/rfc/rfc1112) 了解更多信息

或者

[http://www.iana.org/assignments/multicast-addresses/multicast-addresses.xml](http://www.iana.org/assignments/multicast-addresses/multicast-addresses.xml)

因此，在 ADHOC 组中选择一些东西，你应该很高兴。

-edit- 回应评论。

在 IP 多播中，目标地址将其标识为多播。因此，如果您让 MIS 将其发送到源为 127.0.0.1 的多播地址，并且接收器也在同一台计算机上侦听该地址，则*应该*可以正常工作。真的没有什么神奇的，除了一旦你加入一个多播组，你的 TCP 堆栈表明它对该地址的数据包感兴趣并且它被传递。根据本地网络的复杂性/设置，多播数据包将到达第一个启用 IGMP 的交换机或第一个路由器（除非它正在运行多播路由协议，否则它们将被丢弃/忽略）。

因此，如果您尝试使用实际的多播地址，它不起作用吗？

# android - 什么时候需要 WebService 或 Android Service？

> ID：10209201
> 
> 赞同：0
> 
> 时间：2012-04-18T12:16:08.703
> 
> 标签：android, web-services, service

在过去的两周里，我一直在阅读有关本地和远程 Android 服务、IPC、AIDL 的大量内容……当我认为我理解了某些事情时，我又搞砸了。

我的目的是发送一些数据供另一台设备接收。例如共享一个字符串数组或任何其他对象。

我仍然不明白一些基本的架构概念：我是否必须实现应用程序必须监听的 Web 服务？否则其他设备中的应用程序怎么会知道有“消息”在等待呢？

任何人都可以为这样的典型任务起草一个基本架构吗？

Messenger 服务、本地服务、AIDL、Parcelable、Web 服务？

对不起，无知。我真的混淆了非常基本的概念。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:36:28.137

*   服务

那是在 Android 上运行在后台处理任务的东西。类似于 Thread 的东西，但更像是一种无形的 Acitivity。

它可以是本地服务（在与其通信的 Activity 的进程中）或远程服务。如果它是远程服务，那么您需要序列化进程之间的所有通信。该机制称为 IPC。

对于 Android 上的 IPC，您有 AIDL 来定义服务的远程接口（因为您不能在其他进程中调用方法）并且您有 Parcellable 的东西来序列化对象。

Messanger Service 是一种使用 android 的 Message 类在 Process 之间传输数据的 Service。

以上所有内容仅用于在您的设备内进行操作。不适用于其他设备。

*   网络服务

是涉及网络服务器和互联网的东西，它并不是真正的 Android 特定的。你最好是维基百科：）

* * *

*   如何从设备 A 向设备 B 发送数据：

有几种方法可以做到这一点，创建一个类似于聊天服务器并允许为已注册设备发送/轮询消息的 Web 服务将是一种方法。另一个通过 TCP 直接通信（在本地 WiFi 中）。取决于你需要什么。

*   应用程序内部架构。

处理网络通信并让您的活动发送/接收消息的服务可能是一个好主意。但是也没有通用模式可以做到这一点，这取决于您的应用程序需要什么。

# iphone - 设备不支持 MFMail 作曲家表

> ID：10209215
> 
> 赞同：1
> 
> 时间：2012-04-18T12:17:22.397
> 
> 标签：iphone, mfmailcomposer

我有一个要发送邮件的应用程序。我有一个指向 MailComposer 表的按钮，它在我的模拟器中运行良好，但无法发送邮件，所以我需要使用该设备我的问题是每次我单击按钮指示它的邮件编写器设备不支持 MFMailComposer 表，我使用的设备是 3G iphone。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-28T13:22:34.583

检查设备是否至少添加了一个邮件帐户。

# iphone - Facebook API 在朋友墙上发布消息

> ID：10209217
> 
> 赞同：0
> 
> 时间：2012-04-18T12:17:27.050
> 
> 标签：iphone, objective-c, facebook-graph-api, ios5

我想问如何在 Facebook API 中实现文本视图。我想在朋友墙上发布消息，以及如何从 Facebook 获取朋友列表和个人详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:22:14.520

您必须使用 IOS Facebook API。他们创建了一个非常详细的介绍页面。

看看这里： [https ://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)

此图显示了从授权到在新闻提要上发布内容的整个过程。（也复制自 Facebook 开发者教程） ![https://developers.facebook.com/attachment/ios-app-flow.png](../Images/22a37f53d04dba463b118ee9bed414e1.png)

描述获取好友列表的过程： [Facebook Api to check in users in an iOS app](https://stackoverflow.com/questions/10123931/facebook-api-to-check-in-users-in-an-ios-app/10126217#comment13062668_10126217)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:11:02.177

由于 facebook ios 6 中的许多错误和许多关于 Open Graph API 的负面评论。facebook 删除了“通过 API 发布到朋友墙”。只能使用 ios 5 的 fbconnect。

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"100004925467891", @"to",
                               @"http://pri.com/pit.png", @"picture",
                               @"http://pr.com", @"link",
                               @"Data", @"caption",
                               @"data",@"description",
                               @"Birthday Reminder",@"name",nil];
[[delegate facebook] dialog:@"feed" andParams:params andDelegate:self]; 
```

但是，如果你发布到自己的墙 Open Graph API 仍然有效。

# clojure - Clojure，合并两个地图数组

> ID：10209218
> 
> 赞同：6
> 
> 时间：2012-04-18T12:17:28.653
> 
> 标签：clojure

我有两个地图数组

第一个是`[{:a 1 :b 2 :d 6} {:a 2 :b 2} {:a 7 :b 7}]`

第二个是`[{:a 3 :c 3 :e 9 :y 7} {:a 2 :b 6 :c 8}]`

根据`a`ie 的值，如果它在第二个数组中匹配，“第二个地图”应该与“第一个地图”合并，并且结果的地图数组应该是

水库应该是`[{:a 1 :b 2 :d 6} {:a 2 :b 6 :c 8} {:a 7 :b 7} {:a 3 :c 3 :e 9 :y 7}]`

谁可以帮我这个事。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T20:53:20.707

干得好：

```
user> (def xs [{:a 1 :b 2 :d 6} {:a 2 :b 2} {:a 7 :b 7}])
#'user/xs
user> (def ys  [{:a 3 :c 3 :e 9 :y 7} {:a 2 :b 6 :c 8}])
#'user/ys
user> (for [[a ms] (group-by :a (concat xs ys))] (apply merge ms))
({:a 1, :b 2, :d 6} {:a 2, :c 8, :b 6} {:a 7, :b 7} {:y 7, :a 3, :c 3, :e 9}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T14:27:43.200

这个数据结构对我来说看起来很笨拙，但这是我的看法：

```
(defn key-by-a [coll]
  "Convert a list of maps to a map of maps keyed by their vals at :a"
  (apply hash-map (mapcat (juxt :a identity) coll)))

(defn merge-map-lists [l1 l2]
  (->> [l1 l2]
    (map key-by-a)
    (apply merge-with merge)
    (vals))) 
```

它不做的一件事是维护输入列表的顺序，但由于不清楚哪个列表决定（两者可能具有不同顺序的相同键），所以我把它省略了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T05:54:24.717

也许 clojure.set/join 是你想要的：

这是[clojure.set/join](http://clojuredocs.org/clojure.set/join)的文档：

```
user=> (def animals #{{:name "betsy" :owner "brian" :kind "cow"}
                      {:name "jake"  :owner "brian" :kind "horse"}
                      {:name "josie" :owner "dawn"  :kind "cow"}})

user=> (def personalities #{{:kind "cow" :personality "stoic"}
                            {:kind "horse" :personality "skittish"}})
#'user/personalities
user=> (join animals personalities)

#{{:owner "dawn",  :name "josie", :kind "cow",   :personality "stoic"}
  {:owner "brian", :name "betsy", :kind "cow",   :personality "stoic"}
  {:owner "brian", :name "jake",  :kind "horse", :personality "skittish"}}

user=> (join animals personalities)
#{{:kind "horse", :owner "brian", :name "jake", :species "cow", :personality "stoic"}
  {:kind "cow", :owner "dawn", :name "josie", :species "cow", :personality "stoic"}
  {:kind "horse", :owner "brian", :name "jake", :species "horse", :personality "skittish"}
  {:kind "cow", :owner "brian", :name "betsy", :species "cow", :personality "stoic"}
  {:kind "cow", :owner "dawn", :name "josie", :species "horse", :personality "skittish"}
  {:kind "cow", :owner "brian", :name "betsy", :species "horse", :personality "skittish"}}

;; Notice that "Jake" is both a horse and a cow in the first line. That's 
;; likely not what you want. You can tell `join` to only produce output 
;; where the `:kind` value is the same as the `:species` value like this:

user=> (join animals personalities {:kind :species})
#{{:kind "cow", :owner "dawn", :name "josie", :species "cow", :personality "stoic"}
  {:kind "horse", :owner "brian", :name "jake", :species "horse", :personality "skittish"}
  {:kind "cow", :owner "brian", :name "betsy", :species "cow", :personality "stoic"}} 
```

# magento - Apache SOLR 排序顺序

> ID：10209223
> 
> 赞同：1
> 
> 时间：2012-04-18T12:17:51.467
> 
> 标签：magento, solr

我在基于 magento 企业的商店中使用 apache solr 搜索。

我有一些难题，我无法自己解决。如果一些有solr expirience的人请帮助我；）

Solr 搜索非常好并且工作正常，但我对搜索结果进行排序有问题。

我可以举例说明：

我们通过查询 ex 搜索产品。“HP-118”，我们收到了 ex 的回复。40 种产品。按此顺序“HP-118 LaserJet”、“HP-118 DescJet”、“HP-118 盒子”、“HP-118 的简单事物”、“HP-118 的另一个简单事物”、“HP-118 BoxJet” ETC...

我的问题出在示例中的最后一个产品中。我需要在开始时一起查看具有搜索查询的产品..

前任。“HP-118 LaserJet”、“HP-118 DescJet”、“HP-118 盒子”、“HP-118 BoxJet”、“HP-118 的简单事物”、“HP-118 的另一个简单事物”

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:41:10.200

这一切都涉及到*分值*（除非您明确设置其他排序顺序）。要检查结果按此顺序返回的原因，您可以执行以下操作：

1.  阅读[http://wiki.apache.org/solr/SolrRelevancyFAQ](http://wiki.apache.org/solr/SolrRelevancyFAQ)
2.  将分数添加到返回的字段，以便您可以看到差异等（以及*分数*到 fl 参数）
3.  在responces中开启debug模式（request中添加*&debugQuery=on*参数）
4.  研究调试，它会告诉你为什么给定的结果是用值 X 评分的

希望你能在调试中找到答案。有一些方法可以提升特定字段，但为了帮助解决这个问题，您需要指定更多信息。

# asp.net - iframe 不显示源链接

> ID：10209225
> 
> 赞同：2
> 
> 时间：2012-04-18T12:18:09.547
> 
> 标签：asp.net, iframe

我刚刚注意到某些网页无法通过框架查看。我必须显示这个[网站](https://mebbis.meb.gov.tr/login1.aspx)(https://mebbis.meb.gov.tr/login1.aspx) 但我只是不知道从哪里开始。除此之外，我还尝试了其他几个网站，如 google、facebook、yahoo 等……但它们似乎都不能通过 iframe 显示。我对 google yahoo facebook 不是很感兴趣。但是我必须让这个[网站](https://mebbis.meb.gov.tr/login1.aspx)正常工作。有没有人知道解决这个问题的解决方法？谢谢

```
<iframe runat="server" id="mainFrame" name="main" width="100%" src="https://mebbis.meb.gov.tr/login1.aspx" style="height: 600px;">Your browser doesn't support frames.</iframe> 
```

Ps 我正在与 asp.net 合作，因此任何建议都将不胜感激。

为什么需要这个：我设计了一个可以拍摄相框照片的网站，以便我们的用户可以登录 mebbis.gov.tr 以证明他们目前是学生，这样他们就可以以优惠的价格乘坐公共汽车。我们已经工作了一个多月，我们在这一点上陷入了困境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:24:25.963

我最近在电子学习课件中看到了这一点，因为课件通常加载在 iframe 中。

一些网站添加了一个设置，以便它们在 iframe 中不可见。该设置是一个名为“x-frame-options”的标题

这方面的一个例子是 facebook，它传回：

> x-frame-options 拒绝

这可以在 net 面板下的 firebug 中查看。

有关标头的更多详细信息在这里：

[https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)

## 编辑

我注意到您发送的链接没有标题。因为该网站实际上正在返回一个错误，它看起来像是检测到您正在通过 onload javascript 事件中的 iframe 加载它并将您重定向到错误页面。

```
if (self != top) self.location='http://mebbis.meb.gov.tr/hatali.jpg' 
```

如果一个网站专门试图停止通过 iframe 加载，您可能不应该这样做。

# ruby - Nokogiri：无法使用“a”标签链接访问“p”标签文本

> ID：10209226
> 
> 赞同：-1
> 
> 时间：2012-04-18T12:18:16.067
> 
> 标签：ruby, nokogiri

我的 HTML 代码是这样的：

```
<h3>Head1</h3>
<p>text before link<a href="http://www.google.com" title="http://www.google.com"    target="_blank">Link 1</a>text after link</p>
<h3>Head2</h3>
<p>text before link<a href="http://www.google.com" title="http://www.google.com" target="_blank">Link 2</a>text after link</p>
<h3>Head3</h3>
<p>text before link<a href="http://www.google.com" title="http://www.google.com" target="_blank">Link 3</a>text after link</p> 
```

我正在使用 NOKOGIRI 进行 HTML 解析。在上述情况下，假设上面的 html 代码在 @text

```
@page_data = Nokogiri::HTML(@text)
@headings = @page_data.css('h3')
@desc = @page_data.css('p') 
```

但是在 @desc 中，它只返回文本，它不会为“Link 1”、“Link 2”、“Link 3”创建链接。

因为链接存在于文本之间，所以我不能再次单独链接它。
在这种情况下，如何在“p”标签中实现带有链接的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:47:19.180

您的问题对您要完成的工作不是很清楚。如果以此...

> 在这种情况下，如何在“p”标签中实现带有链接的文本？

...您的意思是，*“我怎样才能获得每个`<p>`标签的 HTML 内容？”* 那么这将做到这一点：

```
require "nokogiri"
frag = Nokogiri::HTML.fragment(my_html)
frag.css('h3').each do |header|
  puts header.text
  para = header.next_element
  puts para.inner_html
end
#=> Head1
#=> text before link<a href="http://www.google.com" title="http://www.google.com" target="_blank">Link 1</a>text after link
#=> Head2
#=> text before link<a href="http://www.google.com" title="http://www.google.com" target="_blank">Link 2</a>text after link
#=> Head3
#=> text before link<a href="http://www.google.com" title="http://www.google.com" target="_blank">Link 3</a>text after link 
```

相反，如果您的意思是*“如何仅获取每个段落中的锚文本？”* 那么你可以这样做：

```
frag.css('h3').each do |header|
  anchor = header.next_element.at_css('a')
  puts "#{header.text}: #{anchor.text}"
end
#=> Head1: Link 1
#=> Head2: Link 2
#=> Head3: Link 3 
```

...或者你可以这样做：

```
frag.xpath('.//p/a').each do |anchor|
  puts anchor.text
end
#=> Link 1
#=> Link 2
#=> Link 3 
```

如果这些都不是您想要的，那么请编辑您的问题以更清楚地解释您想要的最终结果。

# javascript - 在画布中打开本地图像

> ID：10209227
> 
> 赞同：18
> 
> 时间：2012-04-18T12:18:17.437
> 
> 标签：javascript, jquery, html

我正在尝试制作一个 javascript 图像颜色选择器。可以在画布中打开本地图像，而不将其上传到服务器吗？

```
function draw() {
    var ctx = document.getElementById('canvas').getContext('2d');
    var img = new Image();
    img.onload = function(){
        ctx.drawImage(img,0,0);
    }

    img.src = $('#uploadimage').val(); 
}

<input type='file' name='img' size='65' id='uploadimage' /> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-18T12:48:31.310

并非所有浏览器（IE 和 Opera AFAIK）都支持，但您可以使用[File API获取数据 URI](http://www.w3.org/TR/FileAPI/)

```
function draw() {
  var ctx = document.getElementById('canvas').getContext('2d')
    , img = new Image()
    , f = document.getElementById("uploadimage").files[0]
    , url = window.URL || window.webkitURL
    , src = url.createObjectURL(f);

  img.src = src;
  img.onload = function(){
    ctx.drawImage(img,0,0);
    url.revokeObjectURL(src);
  }
}

<input type='file' name='img' size='65' id='uploadimage' /> 
```

我[在这里添加了一个小提琴](http://jsfiddle.net/fWLJ9/)作为示例。

# python - 使用 Twisted 的网络爬虫

> ID：10209229
> 
> 赞同：0
> 
> 时间：2012-04-18T12:18:23.033
> 
> 标签：python, web-crawler, twisted

我正在尝试用python和twisted创建一个网络爬虫。发生了什么是在调用的时候 `reactor.run()`

我不知道要获取的所有链接。所以代码如下：

```
def crawl(url):
    d = getPage(url)
    d.addCallback(handlePage)
    reactor.run() 
```

并且句柄页面具有以下内容：

```
def handlePage(output):
    urls = getAllUrls(output) 
```

所以现在我需要在 urls 中的每个 url 上应用 crawl()。我该怎么做？我应该停止反应器并重新开始吗？如果我遗漏了一些明显的东西，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:42:33.553

你不想停止反应堆。您只想下载更多页面。因此，您需要重构您的`crawl`函数以不停止**或**启动反应器。

```
def crawl(url):
    d = getPage(url)
    d.addCallback(handlePage)

def handlePage(output):
    urls = getAllUrls(output)
    for url in urls:
        crawl(url)

crawl(url)
reactor.run() 
```

不过，您可能希望查看[scrapy](http://scrapy.org/)而不是从头开始构建自己的。

# c# - 将键盘快捷键绑定到 WPF 中视图模型中的命令

> ID：10209231
> 
> 赞同：7
> 
> 时间：2012-04-18T12:18:31.623
> 
> 标签：c#, wpf, mvvm

我有一个应用程序，其中有`UserControl`一个工具栏。此工具栏有一个按钮`Execute`，该按钮又将其命令绑定到`ICommand`视图模型作为属性公开的派生类。

```
<Button Grid.Row="0" Command="{Binding ExecuteCommand}">Execute</Button> 
```

现在，我也想将它绑定到键盘快捷键 ( `F5`)。这需要在`UserControl`since的上下文中绑定，它仅在此用户控件当前可见时才适用。

另一种选择是将它绑定到`KeyDown`实际包含要执行的文本的文本框，但是当谈到如何将事件从控件路由到视图模型中的命令时，我真的很不稳定，而代码中没有真正丑陋的黑客攻击- 在用户控件后面。

任何指针表示赞赏！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T12:43:23.327

还有一个答案不知为何消失了。这很好用：

```
<UserControl.InputBindings>
  <KeyBinding Key="F5" Command="{Binding ExecuteCommand}" />
</UserControl.InputBindings> 
```

如果可能的话，我想把功劳归功于那个人。请再次出现:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:35:57.570

Afaik，没有办法直接绑定到按键，但有一些解决方法。好像其他人也有这个问题，你看过[这个帖子](https://stackoverflow.com/questions/1711038/key-press-inside-of-textbox-mvvm)吗？我的另一个建议是查看[附加命令](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)。

# c++ - 资源而不是外部文件 C++

> ID：10209233
> 
> 赞同：0
> 
> 时间：2012-04-18T12:18:36.853
> 
> 标签：c++, windows, visual-studio, file-io, embedded-resource

我正在重用一些旧代码（最初是在 c 上开发的，而不是 c++），并带有一些打开/读取/操作文本文件的功能。文本文件的路径作为字符串 (char*) 传递给函数，然后使用：打开，`FileToUse = fopen(filename, "rb");`然后多次调用`fread()`和`fseek()`使用。众所周知，此代码适用于外部文本文件，但现在我想将文本文件作为资源包含在我的项目中（Visual Studio 中的 MFC C++）。

我在网上找到了一些关于如何使用此代码中的资源的示例：

```
HINSTANCE hInst = AfxGetResourceHandle();
HRSRC hResource = FindResource(hInst, MAKEINTRESOURCE(IDR_TEXTFILE1), "TEXTFILE");

if (hResource){
  HGLOBAL hLoadedResource = LoadResource(hInst, hResource);
  if (hLoadedResource){
    const char* pResource = LockResource(hLoadedResource);
    if (pResource){
      DWORD dwResourceSize = SizeofResource(hInst, hResource);
      if (0 != dwResourceSize){                            // if(FileToUse){
        memcpy(&Buffer, pResource, (15 * 2));              //   fread($Buffer, 15, 2, FileToUse);
        pTemp = pResource + 200;                           //   fseek(FileToUse, 200, SEEK_SET);
        pTemp = pTemp + 100;                               //   fseek(FileToUse, 100, SEEK_CUR);
        pTemp = pResource + (dwResourceSize - 1) - 40;     //   fseek(FileToUse, -40, SEEK_END);
      }
    }
  }
} 
```

如图所示，我用 memcpy() 替换了 fread 调用，但是我缺少 fread 的返回值（实际读取的项目），并且在原始代码中，文件指针被 fseek 移动了，我想知道我使用临时指针的方法是否正确.

我的最终目标是模拟对具有相似函数原型的资源的 fread 和 fseek 调用：

`size_t resread( void* buffer, size_t size, size_t count, char* resource );`

`int resseek( char* resource, long offset, int origin );`

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:01:26.647

感谢您的帮助，根据 Agent_L 的建议，这是我想出的：

文本资源类型：

```
struct _resource {
    const char * content;      // File content
    size_t size;               // File size
    size_t ptrloc;             // 'Pointer' location
};
typedef struct _resource RES_TXT; 
```

基于 fread 重读：

```
size_t resread( void* buffer, size_t size, size_t count, RES_TXT * resource)
{
    size_t actualCount = ( resource->size - resource->ptrloc ) / size;
    actualCount = min( count, actualCount );
    if ( actualCount <= 0 ) return 0;
    memcpy(buffer, (resource->_ptr + resource->ptrloc), (actualCount * size) );
    resource->ptrloc += (actualCount * size);
    return actualCount;
} 
```

并基于 fseek 完成 reseek：

```
int resseek( RES_TXT * resource, long offset, int origin ) {
    size_t nextloc;
    switch ( origin ) {
        case SEEK_SET: nextloc = 0;
            break;
        case SEEK_CUR: nextloc = resource->ptrloc;
            break;
        case SEEK_END: nextloc = resource->size;
            break;
        default: return -1;
    }
    nextloc += offset;
    if ( nextloc >= 0  && nextloc < resource->size )
        resource->ptrloc = nextloc;
    else
        return -1;
    return 0;
} 
```

现在可以替换对 fseek 和 fread 的任何调用以使用资源而不是外部文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:51:56.990

The file handle contains not only the data but also it's length and current position. You have to duplicate that. (handwirtten code, unproven):

```
struct resFile
{
    char* pData;
    int iLenght;
    int iCurrPosition;
};

size_t resread( void* buffer, size_t size, size_t count, resFile* resource)
{
    int ActualRead = min(size*count, resource->iLenght - resource->iCurrPosition);
    memcpy(buffer, resource->pData + resource->iCurrPosition, ActualRead);
    resource->iCurrPostion += ActualRead;
    return ActualRead;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:14:07.150

让我通知您`fread`移动当前文件位置。这意味着您不需要`fseek`每次都调用。从这个角度来看，您的代码**可以**`resseek`通过简单的增加`Buffer`指针来避免实现

# java - notifyAll() 方法在我的代码中不起作用

> ID：10209235
> 
> 赞同：0
> 
> 时间：2012-04-18T12:18:41.177
> 
> 标签：java

我正在尝试使用线程在 Java 中实现 Bully 算法。
这是我编写的代码。

```
package newbully;

public class NewBully {

    public static void main(String[] args) {
        int total_processes = 4;
        Thread1[] t = new Thread1[total_processes];
        for (int i = 0; i < total_processes; i++) {
            t[i] = new Thread1(new Process(i+1, i+1), total_processes);
        }
        try {
            Election.initialElection(t);
        } catch (Exception e) {
            System.out.println("Possibly you are using null references in array");
        }
        for (int i = 0; i < total_processes; i++) {
            new Thread(t[i]).start();
        }
    }
}

package newbully;

public class Election {

    private static boolean pingFlag = false;
    private static boolean electionFlag = false;
    private static boolean messageFlag = false;

    public static boolean isMessageFlag() {
        return messageFlag;
    }

    public static void setMessageFlag(boolean messageFlag) {
        Election.messageFlag = messageFlag;
    }

    public static boolean isPingFlag() {
        return pingFlag;
    }

    public static void setPingFlag(boolean pingFlag) {
        Election.pingFlag = pingFlag;
    }

    public static boolean isElectionFlag() {
        return electionFlag;
    }

    public static void setElectionFlag(boolean electionFlag) {
        Election.electionFlag = electionFlag;
    }

    public static void initialElection(Thread1[] t) {
        Process temp = new Process(-1, -1);
        for (int i = 0; i < t.length; i++) {
            if (temp.getPriority() < t[i].getProcess().getPriority()) {
                temp = t[i].getProcess();
            }
        }
        t[temp.pid - 1].getProcess().CoOrdinatorFlag = true;
    }
}

package newbully;

public class Process {

    int pid;
    boolean downflag,CoOrdinatorFlag;

    public boolean isCoOrdinatorFlag() {
        return CoOrdinatorFlag;
    }

    public void setCoOrdinatorFlag(boolean isCoOrdinator) {
        this.CoOrdinatorFlag = isCoOrdinator;
    }
    int priority;

    public boolean isDownflag() {
        return downflag;
    }

    public void setDownflag(boolean downflag) {
        this.downflag = downflag;
    }

    public int getPid() {
        return pid;
    }

    public void setPid(int pid) {
        this.pid = pid;
    }

    public int getPriority() {
        return priority;
    }

    public void setPriority(int priority) {
        this.priority = priority;
    }

    public Process() {
    }

    public Process(int pid, int priority) {
        this.pid = pid;
        this.downflag = false;
        this.priority = priority;
        this.CoOrdinatorFlag = false;
    }
}

package newbully;

import java.util.*;
import java.io.*;
import java.net.*;

public class Thread1 implements Runnable {

    private Process process;
    private int total_processes;
    ServerSocket[] sock;
    Random r;

    public Process getProcess() {
        return process;
    }

    public void setProcess(Process process) {
        this.process = process;
    }

    public Thread1(Process process, int total_processes) {
        this.process = process;
        this.total_processes = total_processes;
        this.r = new Random();
        this.sock = new ServerSocket[total_processes];
    }

    private void recovery() {
    }

    synchronized private void pingCoOrdinator() {
        try {
            if (Election.isPingFlag()) {
                wait();
            }
            if (!Election.isElectionFlag()) {
                Election.setPingFlag(true);
                System.out.println("Process[" + this.process.getPid() + "]: Are you alive?");
                Socket outgoing = new Socket(InetAddress.getLocalHost(), 12345);
                outgoing.close();
                Election.setPingFlag(false);
                notifyAll();
            }
        } catch (Exception ex) {
            //Initiate Election
            System.out.println("process[" + this.process.getPid() + "]: -> Co-Ordinator is down\nInitiating Election");
            Election.setElectionFlag(true);
            Election.setPingFlag(false);
            notifyAll();
        }
    }

    synchronized private void executeJob() {
        int temp = r.nextInt(20);
        for (int i = 0; i <= temp; i++) {
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                System.out.println("Error Executing Thread:" + process.getPid());
                System.out.println(e.getMessage());
            }
        }
    }

    synchronized private boolean sendMessage() {
        boolean response = false;
        int i = 0;
        try {
            if (Election.isMessageFlag()) {
                wait();
            }
            Election.setMessageFlag(true);

            for (i = this.process.getPid() + 1; i <= this.total_processes; i++) {
                try {
                    Socket electionMessage = new Socket(InetAddress.getLocalHost(), 10000 + i);
                    System.out.println("Process[" + this.process.getPid() + "] -> Process[" + i + "]  responded to election message successfully");
                    electionMessage.close();
                    response = true;
                } catch (Exception ex) {
                    System.out.println("Process[" + this.process.getPid() + "] -> Process[" + i + "] did not respond to election message");
                }
            }
            Election.setMessageFlag(false);
            notifyAll();
        } catch (Exception ex1) {
            System.out.println(ex1.getMessage());
        }

        return response;
    }

    synchronized private void serve() {
        try {
            //service counter
            ServerSocket s = new ServerSocket(12345);
            for (int counter = 0; counter <= 10; counter++) {
                Socket incoming = s.accept();
                System.out.println("Process[" + this.process.getPid() + "]:Yes");
                Scanner scan = new Scanner(incoming.getInputStream());
                PrintWriter out = new PrintWriter(incoming.getOutputStream(), true);
                if (scan.hasNextLine()) {
                    if (scan.nextLine().equals("Who is the co-ordinator?")) {
                        System.out.print("Process[" + this.process.getPid() + "]:");
                        out.println(this.process);
                    }
                }
                if (counter == 10) {//after serving 10 requests go down
                    this.process.setCoOrdinatorFlag(false);
                    this.process.setDownflag(true);
                    try {
                        incoming.close();
                        s.close();
                        sock[this.process.getPid() - 1].close();
                        Thread.sleep((this.r.nextInt(10) + 1) * 50000);//going down
                        recovery();
                    } catch (InterruptedException e) {
                        System.out.println(e.getMessage());
                    }
                }
            }
        } catch (IOException ex) {
            System.out.println(ex.getMessage());
        }
    }

    @Override
    public void run() {
        try {
            sock[this.process.getPid() - 1] = new ServerSocket(10000 + this.process.getPid());
        } catch (IOException ex) {
            System.out.println(ex.getMessage());
        }
        while (true) {
            if (process.isCoOrdinatorFlag()) {
                //serve other processes
                serve();
            } else {
                while (true) {
                    //Execute some task
                    executeJob();

                    //Ping the co-ordinator
                    pingCoOrdinator();

                    if (Election.isElectionFlag()) {
                        if (!sendMessage()) {//elect self as co-ordinator
                            System.out.println("New Co-Ordinator: Process[" + this.process.getPid() + "]");
                            this.process.setCoOrdinatorFlag(true);
                            Election.setElectionFlag(false);
                            break;
                        }
                    }
                }
            }
        }
    }
} 
```

当我试图从我创建的 4 个线程中执行代码时，一些线程正在使用 wait() 调用预先等待。notifyAll() 不会通知他们。谁能建议为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T12:28:19.200

每个线程都在调用`wait()`自己（在自己的`Thread1`实例上）。这意味着当您调用`notifyAll()`同一个`Thread1`实例时，只会`Thread1`通知正在等待它的单个线程，而不是所有其他线程。

你要做的就是让你的所有`Thread1`对象都调用`wait()`一个单一的、通用的对象，同时也调用`notifyAll()`同一个对象。

当然，您必须在调用时`wait()`或`notifyAll()`在公共对象上进行同步；如果你不这样做，你会得到一个`IllegalMonitorStateException`.

```
// Object to be used as a lock; pass this to all Thread1 instances
Object lock = new Object();

// Somewhere else in your code
synchronized (lock) {
    lock.wait();
}

// Where you want to notify
synchronized (lock) {
    lock.notifyAll();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T12:22:53.227

两者`notify()`（或`notifyAll()`）都`wait()`必须写入`synchronized`同一监视器上的块中。

例如：

```
synchronized(myLock) {
    wait();
}

..................

synchronized(myLock) {
    notifyAll();
} 
```

# c# - 当输入不正确时取消复选框检查

> ID：10209240
> 
> 赞同：0
> 
> 时间：2012-04-18T12:19:12.987
> 
> 标签：c#, wpf, checkbox

（使用 WPF 应用程序）这是这种情况：

有 3 个用户输入字段。1 代表小时，1 代表分钟，1 代表秒。在它后面是一个“将时间除以一半”的复选框，它只是将用户输入创建的时间跨度除以一半。

但是当复选框被选中时，如果用户在字段中输入了任何数字，我首先会检查代码：小时/分钟/秒。如果全部为 0，则会弹出一个消息框，告诉用户他需要输入一些东西。但在这一点上，我想“取消”复选框的检查。

我应该使用 e.Cancel 之类的东西吗？或者我应该将 IsChecked 与消息框一起设置回 false 吗？

我想知道处理这个问题的正确方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:24:51.637

我认为你的方法是错误的。该复选框应仅在有有效输入时启用。您可以在文本框上设置 LostFocus 事件，并在该事件中检查所有输入值。如果输入正确，则启用复选框，否则禁用它。无需取消勾选

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:28:47.750

单击复选框的操作有两个步骤：

*   验证时间
*   把它分成两半

如果您想在唯一操作中维护这两个步骤，则选中复选框的操作实际上会触发事件，执行验证步骤，*然后*取消选中它。我认为从这个角度来看，设置为更`checkbox.IsChecked`正确`false`。

正如史蒂夫指出的那样，我会将验证步骤与操作分开。*当*输入无效时禁用复选框`TextChanged`，对文本框的事件设置检查功能。如果一切正常，您可以启用`CheckBox`. 如果不禁用它，如果选中则取消选中它。

# ruby - RVM 和 Jenkins 设置

> ID：10209242
> 
> 赞同：21
> 
> 时间：2012-04-18T12:19:15.163
> 
> 标签：ruby, ruby-on-rails-3, continuous-integration, jenkins, rvm

我是 Jenkins CI 的新手。我在远程 Jenkins 中安装 RVM，当我在 shell 下执行时。

```
#!/bin/bash -x
source ~/.bashrc
rvm use 1.9.3@rails-3.2.3 
```

我收到以下错误。

```
+ source /var/lib/jenkins/.bashrc
++ PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/var/lib/jenkins/.rvm/bin:/var/lib/jenkins/.rvm/bin
+ rvm use 1.9.3@rails-3.2.3

RVM is not a function, selecting rubies with 'rvm use ...' will not work.
You need to change your terminal settings to allow shell login.
Please visit https://rvm.io/workflow/screen/ for example. 
```

这是什么意思？我没有任何想法。请帮我。

**更新：**我在脚本下面尝试过，但我仍然收到错误：

```
#!/bin/bash -x
source /home/zeck/.bashrc
[[ -s ".rvmrc" ]] && source .rvmrc
export RAILS_ENV=test
bundle install 
```

错误：

```
/tmp/hudson457106939700368111.sh: line 5: bundle: command not found
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

Jenkins 构建 shell 无法检测 RVM、gemsets 和 gems。我应该怎么办？

**更新2：**因此詹金斯无法检测到红宝石。

```
+ ruby -v
/tmp/hudson2505951775163045158.sh: line 5: ruby: command not found
Build step 'Execute shell' marked build as failure
Finished: FAILUR 
```

我没有使用任何 jenkins 插件，我只是从 Build->Execute shell 部分运行脚本。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-09T15:35:17.393

正如错误消息所暗示的，RVM 需要一个登录 shell。将 hashbang 行更改为`#!/bin/bash -xl`应该可以解决此问题。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-18T14:13:57.807

尝试：

```
. $(/home/RVM_USER/.rvm/bin/rvm env 1.9.3@rails-3.2.3 --path) 
```

确保运行稳定的 RVM：

```
rvm get stable 
```

*注意：上一个 Jenkins 版本并不总是接受“source”，而是“.”。RVM_USER 是安装 RVM 的用户。或者，您也可以在主 PATH 中导出 RVM 命令。*

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-03T17:20:41.860

是的，显然你错过了`$HOME/.rvm/bin`你的`PATH`. 我在 Mac OS X 上成功地使用了 Hudson 的 rvm。首先要注意的是，除非您定义`BASH_ENV`环境变量（`ENV`对于 sh），否则`.bashrc`只能使用交互式非登录 shell 自动调用。当您从命令行执行以下操作时，就会启动这样的 shell：

```
$ /bin/bash 
```

当你`#!/bin/bash`在你的脚本中使用时，`.bashrc`不会被调用。

为了使 rvm 与 Hudson 一起工作，我在我的`.bash_profile`:

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
export PATH

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

感谢`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"`我每次启动新终端窗口（交互式，登录 shell）时都启用了 rvm。

我没有在我的 . 文件中放任何东西`.bashrc`，尤其是我没有在那里采购 rvm 脚本。这并没有错，但是如果任何其他脚本做出一些愚蠢的事情，比如设置 `export BASH_ENV=$HOME/.bashrc' 然后调用非交互式 shell，你就会看到可能发生的事情 - 实际上很容易忘记。

因此，与其将内容加载到 .bashrc 中，不如让脚本独立于任何 shell 启动文件，并确保在脚本中设置了正确的环境。我仍然保留`$HOME/.rvm/bin`在我的 中`.bash_profile`，但是我在脚本的开头包含以下内容：

```
#!/bin/bash

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"

rvm use 1.9.3-head@MyGemSet

set -ex
cucumber # just an example 
```

请注意，如果后面的任何命令失败，该`-e`选项会强制脚本以错误代码退出。`set -ex`这是您在使用 Hudson 脚本时可能需要的行为。说 RVM 需要登录 shell 是不正确的。虽然使用`#!/bin/bash -l`在您的脚本中使用会起作用，但它似乎不是最好的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-27T12:24:48.080

只需将此代码添加到您的 shell 脚本中，我认为 rvm 是从您的源代码加载的，因此它应该可以工作，否则需要导出 PATH 变量

```
#!/bin/bash -l
source ~/.bashrc
rvm use 1.9.3@rails-3.2.3 
```

l 用于登录shell，如果包含x，那么它也用于调试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-01T12:13:14.800

在詹金斯的构建命令中添加一个shebang为我解决了这个问题

```
 #!/usr/bin/env bash

    rvm use 2.0.0
    bundle install
    rake test
    ... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-23T19:09:36.183

Jenkins 节点不会以相同的方式加载路径，因此它没有使用正确的路径来查找 rvm 的 ruby​​ 版本。您可以设置给定代理的路径。

1.  通过执行找到您当前的 PATH`echo $PATH`
2.  假设您已经正确设置了 rvm，通过运行找到 rvm 的 ruby​​ 版本所在的位置`which ruby`
3.  您的代理的配置中有一个设置，您可以在其中设置环境变量。将 PATH 设置为 1 和 2 连接。

# linux - 如何通过 UDP 管理多个客户端和值班服务器之间的中间桥接服务器的会话？

> ID：10209243
> 
> 赞同：1
> 
> 时间：2012-04-18T12:19:16.793
> 
> 标签：linux, network-programming, udp

我需要制作一个如下图所示的桥梁。它只是一个 UDP 服务器，它接收来自客户端的数据包，并将其转发到另一台服务器。该图将很好地理解该场景。

```
+--------+sendto()  recvfrom()+-----------+                    
| client |------------------->|           |                         +-------------+  
|        |        1           | bridge    |sendto()      recvfrom() |             |
|        |                    |           |------------------------>|    duty     |
|        |                    |           |           2             |   server    | 
|        |                    |           |recvfrom()      sendto() | processing  |   
|        |                    |           |<------------------------|             |
|        |recvfrom()  sendto()|           |            3            |             |
|        |<-------------------|           |                         +-------------+  
+--------+         4          +-----------+ 
```

这里发送和接收数据的函数写在设备的侧面。通信过程由箭头符号下的数字 1、2、3 和 4 标识。我试图以一种可以代表时间线的方式绘制图形：从上到下。

现在进入正题。当我只有一个客户需要管理时，这很容易做到。但是让我们假设客户数量可以很多。假设客户端是使用拨号器连接到互联网的电话，而服务器是运行 Asterisk/Freeswitch 或类似设备的 SIP 服务器。在这种情况下，可能会出现许多客户端。我不想将桥接服务器用作代理服务器（运行 kamailio 和 rtpproxy），以便通信高效。

我知道 Asterisk 或 SIP 服务器可以管理 udp 会话。但怎么能过桥。由于 udp 没有会话，我该如何完成第四步。如何识别值班服务器对客户的回复？应该编写什么类型的软件（当然是为了效率而轻量级，我自己需要编写）来处理会话。如果有人可以通过 udp 给我一个会话管理的想法，那将对我非常有帮助。我搜索了很多，但没有找到任何合适的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:50:08.060

这是我在 TCP/UDP 流量的通用代理实现中使用的算法：

## 程序模块：

一个连接创建者和多个代理工作者

它们被实现为自包含线程。

## 流动：

Creator 模块负责接受和处理新的连接。它通知并将初始数据传递给工作人员，该工作人员将从该点开始处理该连接的所有 I/O，同时它将打开到另一端的连接（也可以在工作人员中完成）。

工作人员将获得连接并在其生命周期内对其负责。

## 一些技术要点：

UDP 连接由 IP 和 PORT（SRC 和 DEST）确定。

Creator 可能会等待来自所有来源的消息，而 worker 可能会等待来自特定来源的消息（通过绑定 UDP 套接字）。

为了性能，worker 应该适合系统拥有的内核数量，并允许每个内核处理异步套接字。另外，如果一个worker处理多个socket，当Creator/Boss分配新的连接时，需要放置一个算法来在worker之间进行负载均衡。

# jquery - 当我不一次在浏览器中加载所有数据时，知道 jquery 滚动的长度吗？

> ID：10209244
> 
> 赞同：0
> 
> 时间：2012-04-18T12:19:24.310
> 
> 标签：jquery, scroll, infinite-scroll

我使用查询来检索数据库的 100 000 多行。我在用户浏览器的表格中将其显示给用户。

我不想一次将所有这些数据加载到浏览器中。每行的高度是已知的，并且所有的行高都相同。但我不知道用户的屏幕分辨率。

是否可以确定表格的总高度以及滚动条的长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:28:29.560

我认为你应该加载大约。默认为 20-30 行，然后使用无限滚动 jquery 插件，因此您不必担心滚动条的高度和其他东西。希望这可以帮助。

[http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T12:27:00.043

一种获取文档总高度的方法可能是这样的

```
$(document).height(); 
```

或用于抓取桌子高度：

```
$('tableID').height(); 
```

但是什么时候从查询中插入更多数据呢？我需要比你写的更多的东西才能给出更好的答案..

# c++ - 在 linux 中通过 C++（或 python）访问多个键盘输入

> ID：10209252
> 
> 赞同：7
> 
> 时间：2012-04-18T12:19:46.833
> 
> 标签：c++, python, linux, keyboard

我想在我自己的应用程序中读取连接到计算机的（最多 4 个）键盘的输入。

### 我的情况

对于一个小型活动，我想将三个 USB 条形码扫描仪连接到笔记本电脑（有键盘）

默认情况下，条形码扫描仪就像键盘一样工作。如果它扫描条形码，它只需输入数字并按“返回”键。这很棒，而且开箱即用。

对于我的应用程序，三个条形码扫描仪将同时工作，并且可能与默认应用程序发生冲突。也应该有意见在笔记本电脑键盘上手动输入条形码。

### 目标

因此，我需要使用我的自定义应用程序（C++ 或 python）读取四个键盘的输入并分别处理它们。

### 环境

我的特定环境是安装了三个条形码扫描仪的笔记本电脑上的 Ubuntu 11.04。该应用程序是用 C++ 或 python 编写的（取决于这个问题的答案）。

*提前感谢您的任何提示或答案*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:30:10.730

为什么不去设备节点

可能在这里找到 cat /dev/input/by-path/yourDevice

并在这里阅读代码

就像他们在[这里做的一样](http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/)

（注意：原始链接已损坏，但可以在[web.archive.org](http://web.archive.org/web/20110809160137/http://www.thelinuxdaily.com/2010/05/grab-raw-keyboard-input-from-event-device-node-devinputevent/)上找到内容）

# ipad - 由于 iPad 应用程序中的内存警告，数组对象在 iPad 应用程序中被释放

> ID：10209258
> 
> 赞同：0
> 
> 时间：2012-04-18T12:20:23.463
> 
> 标签：ipad, ios4, drawing, nsmutablearray, cgcontextdrawimage

我正在开发一个 iPad 应用程序。在我的 iPad 中，如果我只运行该应用程序，则什么也不会发生，如果我启动其他一些应用程序近 4 到 5 次，那么我的应用程序显示应用程序收到内存警告级别 1 和应用程序收到内存警告级别 2，并且在我的应用程序中用户也有能力绘制他们的作品。每当发生内存警告时，我已将该绘制视图（最多 50 个视图）存储在 NSMutableArray 中，所有用户绘图都被删除，视图会像初始阶段一样被加载。我还在该应用程序中使用了核心图框工作。我还使用分析器和仪器工具检查了我的应用程序中是否存在泄漏。

1.  该应用程序可能有什么问题？

2\. 如何避免图纸视图被删除？

1.  如何停止内存警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:26:33.977

您无法阻止内存警告——它们是系统工作方式的一部分。当它需要更多内存时，它会向各种正在运行的应用程序发送警告，让它们释放不需要的内存。

为防止您的绘图被删除，您需要将它们写入一个或多个文件，以便稍后恢复它们。然后，您可以在收到警告时安全地发布图纸，并在需要时将其读回。

# asp.net - Web.Config 无法呈现特殊字符

> ID：10209263
> 
> 赞同：4
> 
> 时间：2012-04-18T12:20:58.563
> 
> 标签：asp.net, iis, web-config

我有一个 ASP.NET Web 应用程序，这是 Web.Config 中的以下条目

```
<add key="FromName" value="Test™"/> 
```

当我尝试浏览该站点时，出现以下错误-

配置文件不是格式良好的 XML

它将上述密钥转换为以下方式 -

```
<add key="FromName" value="Test�"/> 
```

在 IIS 中，我设置了 UTF-8 格式。很长一段时间以来，我一直在努力寻找答案。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:23:10.400

您应该使用 ASCII 值：

```
<add key="FromName" value="Test&#0153;" /> 
```

如果返回为`Test&#0153;`，那么您必须对结果进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:24:25.380

您应该使用商标 xml 实体：[http ://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

# javascript - 如何在 Jquery Mobile 中创建一个指向 data.prevPage 的按钮？

> ID：10209264
> 
> 赞同：1
> 
> 时间：2012-04-18T12:21:04.177
> 
> 标签：javascript, jquery, jquery-mobile, hyperlink

我想手动创建一个指向上一页的按钮。

这一切都好：

```
newButton = $("<a href='" + $prevPage + "' title='back' data-rel='back'>" + someText + "</a>").buttonMarkup({
    shadow: true,
    corners: true,
    theme: "a",
    iconpos: "left",
    icon: 'arrow-l'
    }); 
```

我的问题是设置*$prevPage*变量。JQM 提供的数据对象包含一个*prevPage*对象，所以我的问题是：

如何从该对象中提取 URL 或 Hashchange？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:29:02.943

大多数使用这样的东西 -

```
<a href="" data-role="button" data-icon="back" onclick="history.go(-1);">Back</a> 
```

您不必使用此方法提取哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:29:08.037

尝试使用[`history.back()`](https://developer.mozilla.org/en/DOM/window.history)方法：

`<a href='javascript:history.back();' title='back' data-rel='back'>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:34:04.323

pagebeforeshow 文档并没有说太多关于 prevPage 对象的内容，而且它很重要，所以他们可能应该更新它，但是在 Chrome 的调试器中进行了一些挖掘之后，我相信我已经找到了你（和我）正在寻找的东西。

`prevPage`从技术上讲，它是一组 HTMLDivElements。最近的一个是第 0 个元素，因此为了访问对象本身，您需要`data.prevPage[0]`. 从那里您可以访问上一页上的几乎所有内容（`data.prevPage[0].innerHTML`实际上是整个页面的副本 - 不要问我为什么）。最简单的方法可能是获取前一页的 ID 或`data.prevPage[0].id`, 并对其进行处理（您应该从 ID 中知道您的页面标题是什么）。

如果没有，您可以抓取标题本身的 innerHTML。整个代码块看起来像这样：

```
$('#yourPage').live('pagebeforeshow', function(event, data) {
  var ID = data.prevPage[0].id;
  // do something with ID
}); 
```

# database - 开箱即用的基于 REST 的数据存储/检索服务器端组件？

> ID：10209265
> 
> 赞同：0
> 
> 时间：2012-04-18T12:21:04.677
> 
> 标签：database, rest

我正在寻找一个服务器端组件，它处理不同类型数据的存储。我已经用 Java（在工作中）从头开始编写了这样一个组件。现在我对准备安装这样的组件很感兴趣，因为我想专注于在一个小项目中编写客户端作为一种爱好。

一些细节：我有几个通过 id 连接的不同对象类型（大约 5 到 10 个）。客户端应该能够使用以下类型的命令通过 http 以 JSON 格式发送/接收数据：

*   通过 id 获取文档
*   提交新文件
*   更新文档
*   可选：给定时间戳，请求自该日期以来已更改的文档 ID 列表

应该可以将某些操作限制为特定用户（即更新现有文档）。因此，那里可能还需要某种简单的身份验证/组模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:36:51.730

试试[弹性搜索](http://www.elasticsearch.org/)。或[solr](http://lucene.apache.org/solr/)。或[mongodb](http://support.mongolab.com/entries/20433053-rest-api-for-mongodb)。或[沙发数据库](http://wiki.apache.org/couchdb/HTTP_Document_API)。

不确定身份验证+授权模块。也许您应该使用具有此类插件的反向 http 代理连接后备存储。

# ios - iOS：Facebook评论插件手机不断重新加载

> ID：10209267
> 
> 赞同：6
> 
> 时间：2012-04-18T12:21:16.340
> 
> 标签：ios, facebook, ios5, ios4, ios-simulator

最近我一直在尝试将 Facebook 社交插件集成到 iOS 中的自定义 UIWebView 中，用于评论网页。我添加了 Like 按钮和 Comments 插件。这是我加载到 Web 视图中的 HTML 代码：

```
 <html>
    <body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="http://www.heretheweb.com" data-send="false" data-layout="button_count" data-width="240" data-show-faces="false"></div>
<div class="fb-comments" data-href="http://www.heretheweb.com" data-num-posts="5" data-width="470"></div>
<body>
</html> 
```

周一的第一次实现在 4 个平台上都成功了，包括模拟器（iOS 4 和 iOS 5）、iPhone 3G iOS4 和 iPhone 4 iOS 5。周二，我一直在开发这个，最终我的自定义 UIWebView 工作没有问题前三个。但是在 iPhone 4 (iOS 5) 上，网络视图不断地重新加载同一个网页，导致评论框永远不会出现。该网址是这样的：

[https://m.facebook.com/plugins/comments.php?channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D4%23cb%3Df28c738848%26origin%3Dhttp% 253A%252F%252Fwww.heretheweb.com%252Ff3fdf142e8%26domain%3Dwww.heretheweb.com%26relation%3Dparent.parent&href=http%3A%2F%2Fwww.heretheweb.com&locale=en_US&mobile=true&numposts=5&sdk=joey&width=470](https://m.facebook.com/plugins/comments.php?channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D4%23cb%3Df28c738848%26origin%3Dhttp%253A%252F%252Fwww.heretheweb.com%252Ff3fdf142e8%26domain%3Dwww.heretheweb.com%26relation%3Dparent.parent&href=http%3A%2F%2Fwww.heretheweb.com&locale=en_US&mobile=true&numposts=5&sdk=joey&width=470)

我真的不知道我在做什么错，我已经清理了 uiWebView 委托方法，我用断点检查了所有我可以覆盖的方法。什么都没有...网页在开始时被加载，然后它循环尝试加载上面的 URL...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:07:30.250

facebook 评论插件中存在一个错误，当评论插件在启用 Retina 的设备上加载时，该错误会导致无限加载循环。

在一个 fb js 脚本中有一行如下所示：

`if(window.devicePixelRatio>1)document.location.reload()`

因此，如果您在具有高密度屏幕的设备上访问该页面，那么您注定要失败。

我在[这里报告了这个问题](https://developers.facebook.com/bugs/302285693202310)

我想出了一个肮脏的黑客来修复它，但在使用它之前要三思而后行，它可能随时停止工作。

请注意，此方法仅在您将插件嵌入 UIWebView 时有效，如果您在访问 safari 中的页面时遇到问题，则别无选择，只能等待来自 facebook 的修复。

我的想法是在 UIWebView 加载 js 代码时即时“修复”它。

为了即时处理请求，我创建了自己的 NSURLProtocol 实现：

```
<FBCommentsFixingURLProtocol.h>

#import <Foundation/Foundation.h>

@interface FBCommentsFixingURLProtocol : NSURLProtocol

@end

<FBCommentsFixingURLProtocol.m>
#import "FBCommentsFixingURLProtocol.h"

static NSString *FBCommentsFixingHeader = @"X-FBFix";

@interface FBCommentsFixingURLProtocol () 
@property (nonatomic, readwrite, strong) NSURLRequest *request;
@property (nonatomic, readwrite, strong) NSURLConnection *connection;
@property (nonatomic, readwrite, strong) NSURLResponse *response;

@end

@implementation FBCommentsFixingURLProtocol
@synthesize request = request_;
@synthesize connection = connection_;
@synthesize response = response_;

+ (BOOL)canInitWithRequest:(NSURLRequest *)request
{
    if (([request.URL.scheme isEqualToString:@"https"] || [request.URL.scheme     isEqualToString:@"http"]) && [request.URL.absoluteString rangeOfString:@"facebook.com/plugins/comments.php"].location != NSNotFound &&
    [request valueForHTTPHeaderField:FBCommentsFixingHeader] == nil)
{
    return YES;
}
return NO;
}

+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request
{
    return request;
}

- (id)initWithRequest:(NSURLRequest *)request
       cachedResponse:(NSCachedURLResponse *)cachedResponse
           client:(id <NSURLProtocolClient>)client
{
    // Modify request so we don't loop
    NSMutableURLRequest *myRequest = [request mutableCopy];
    [myRequest setValue:@"" forHTTPHeaderField:FBCommentsFixingHeader];
    self = [super initWithRequest:myRequest
               cachedResponse:cachedResponse
                       client:client];
    if (self)
    {
       [self setRequest:myRequest];
    }
    return self;
}

- (void)startLoading
{
    NSURLConnection *connection = [NSURLConnection connectionWithRequest:[self request]
                                                            delegate:self];
    [self setConnection:connection];

}

- (void)stopLoading
{
    [[self connection] cancel];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSString *dataAsString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
     //Just modify the script to prevent it from execution on Retina devices.
    //window.devicePixelRatio = 2 for the Retina Display
    NSString* modified =  [dataAsString stringByReplacingOccurrencesOfString:@"if(window.devicePixelRatio>1)document.location.reload();" withString:@""];
    NSData* dataMod=[modified dataUsingEncoding:NSUTF8StringEncoding];
    [[self client] URLProtocol:self didLoadData:dataMod];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [[self client] URLProtocol:self didFailWithError:error];
    [self setConnection:nil];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self setResponse:response];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [[self client] URLProtocolDidFinishLoading:self];
    [self setConnection:nil];
}

@end 
```

然后我在应用程序委托 didFinishLaunchingWithOptions 中注册了它：

```
[NSURLProtocol registerClass:[FBCommentsFixingURLProtocol class]]; 
```

我知道这是一个肮脏的黑客，但它仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:06:26.387

好的...解决了。由于某些奇怪和奇怪的原因，有时仅在 iPhone 4（不是模拟器、iPhone 3G 或 iPad 2）中加载评论 Web 部件时，它会尝试一次又一次地重新加载（Cache-Control 标头设置为 max-age=0 ，所以它一直强制重新加载）

解决方案是检查 UIWebViewNavigationType，如果它等于 UIWebViewNavigationTypeReload，shouldStartLoadWithRequest: 返回 NO。

这真的很棘手 ¬¬

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:38:07.113

我在 safari/ios mobile 下也有同样的问题，在 sencha touch 1 上开发的 web 应用程序上，它可以在其他浏览器和 SO 下工作，但是在这个问题上，它一直在加载和加载。我找不到线索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-12T13:19:52.717

下面的代码对我来说工作正常

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 300, 400)];
NSString *html = @"<div id=\"fb-root\"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = \"https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.5\";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><div class=\"fb-comments\" data-href=\"URL_OF_YOUR_PAGE\" data-numposts=\"5\"></div>";
    [webView loadHTMLString:html baseURL:[NSURL URLWithString:@"https://facebook.com"]];
    [self.view addSubview:webView]; 
```

# c# - WebService 解析器错误

> ID：10209274
> 
> 赞同：0
> 
> 时间：2012-04-18T12:21:56.473
> 
> 标签：c#, web-services

我在 VS 中创建了一个 Web 服务（hello world），当我运行 Web 服务时，我收到以下错误消息：

> 解析器错误
> 
> 说明：解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> 解析器错误消息：无法创建类型“UpdaterWS.Service1”。
> 
> 源错误：
> 
> 第 1 行：<%@ WebService Language="C#" CodeBehind="Service1.asmx.cs" Class="UpdaterWS.Service1" %>

我怎样才能解决这个问题？

代码：

```
namespace WebService1HelloTest
{
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
 public class Service1 : System.Web.Services.WebService
{
[WebMethod]
    public string HelloWorld()
    {
        return "Hello World";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:29:43.270

添加服务后是否进行了重建？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:39:35.480

您的服务在`WebService1HelloTest`命名空间中，但您指的是`UpdaterWS`命名空间。

无论如何，您为什么要使用 ASMX 服务？这是一项不应该用于新开发的遗留技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-15T11:13:12.800

正如 John Saunders 所说，您的服务位于 WebService1HelloTest 命名空间中，但您指的是 UpdaterWS 命名空间。

要修复它，请右键单击您的 WebService1HelloTest.asmx 文件并选择查看标记。您将看到您的类指的是 UpdaterWS.Service1。将其更改为 WebService1HelloTest.HelloWorld ，您应该准备好了。

# java - Android：使按钮脱离视图

> ID：10209278
> 
> 赞同：0
> 
> 时间：2012-04-18T12:22:27.553
> 
> 标签：java, android, menu, animated

我必须从屏幕顶部滑动复杂的动画菜单。由于它的性质，我不能使用slidingDrawer ...还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:42:16.220

您可能可以使用 Canvas 和 Drawables 来完成此操作。看这里：

[http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:39:51.040

如果您提供负参数，您应该能够在屏幕外为整个布局设置动画。这将允许您在屏幕上方或下方隐藏布局，并在需要时将其滑入。

# mysql - 查询三个条件

> ID：10209289
> 
> 赞同：0
> 
> 时间：2012-04-18T12:22:57.907
> 
> 标签：mysql

我需要进行查询，该查询将从某个表中选择所有名称和所有昵称，但仅选择 id 在某个数组中的位置。这是查询：

```
SELECT n. * FROM nikovi n 
INNER JOIN sajt_nikovi s ON n.id = s.nik
WHERE s.sajt = '50' and     n.nadimak like '%ana%' or n.ime like '%ana%' 
```

它从表中找到了所有条目，其中 n.ime 喜欢 '%ana%'，而不仅仅是这个连接的条目。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:26:39.510

AND 比 OR 更难绑定，这意味着它会评估类似的东西；

```
WHERE (s.sajt = '50' and n.nadimak like '%ana%') or n.ime like '%ana%' 
```

如果您的意思是别的，您需要添加括号以使数据库清楚。在这种情况下，您需要将其更改为；

```
WHERE s.sajt = '50' and (n.nadimak like '%ana%' or n.ime like '%ana%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:27:26.097

分组您的`OR`：

```
SELECT n. * 
FROM nikovi n 
INNER JOIN sajt_nikovi s 
ON n.id = s.nik 
WHERE s.sajt = '50' 
AND (n.nadimak LIKE '%ana%' OR n.ime LIKE '%ana%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:28:06.913

当您混合 AND 和 OR 时，请始终使用括号

```
SELECT n. * FROM nikovi n INNER JOIN sajt_nikovi s ON n.id = s.nik WHERE s.sajt = '50' AND (n.nadimak LIKE '%ana%' OR n.ime LIKE '%ana%') 
```

# c++ - OpenGL 纹理占用过多内存

> ID：10209290
> 
> 赞同：1
> 
> 时间：2012-04-18T12:22:58.747
> 
> 标签：c++, qt, opengl

我有 75 * 9 * 32 的图像，在 PNG 格式的硬盘上总共有 64 MB。如果我加载每个 128*256 像素的图像，它会占用高达 1.5 GB 的 RAM 内存！我没有启用 mipmapping。

*我想这可能是因为 GPU 只存储原始图像，有没有办法收紧内存使用？*

我正在使用仅创建一次的帧缓冲区对象加载纹理。

我使用以下内容加载纹理：

```
 QImage catchImage = catchFbo->toImage();
        QImage t = QGLWidget::convertToGLFormat(catchImage);

        glGenTextures( 1, &Item::texture[i] );
        glBindTexture( GL_TEXTURE_2D, Item::texture[i] );
        glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, t.width(), t.height(), 0, GL_RGBA, GL_UNSIGNED_BYTE, t.bits() );
        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );
        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST ); 
```

编辑： GL_COMPRESSED_RGBA 而不是 GL_RGBA 似乎有很大的不同。它现在使用 500 MB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:31:22.090

> 我想这可能是因为 GPU 只存储原始图像，

好吧，它们当然是原始格式。尽管 GPU 可以直接支持 Deflate 和 JPEG 解压缩，但它们并不支持。

> 有没有办法收紧内存使用？

您可以使用压缩纹理格式。是的，现代 GPU*确实*支持动态解压缩，但使用的编解码器与 PNG 或 JPEG 大不相同。

> 我正在使用仅创建一次的帧缓冲区对象加载纹理。

为什么？FBO 用于其他用途。您可以直接从文件中加载 QImage，而无需此类代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:29:50.450

您可以将它们转换为更压缩的格式或从磁盘延迟加载它们，仅此而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:27:18.583

您需要实现剪辑。当然，这本身并不能防止占用内存，所以当图像落在您的视图范围内时，您需要延迟加载图像。关于这方面的一篇不错的文章在[这里](http://www.opengl.org/wiki/Clipping)。

# c# - PGP 加密和解密

> ID：10209291
> 
> 赞同：18
> 
> 时间：2012-04-18T12:23:05.627
> 
> 标签：c#, encryption, pgp

我真的很挣扎，我需要在 C# 中使用 BouncyCastle 加密和解密字符串。我确实尝试过自己做这件事。我确实设法创建了自己的密钥（私人和公共）。

请记住，我刚从大学毕业。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-18T13:31:18.110

我花了一段时间才找到一个使用充气城堡进行 PGP 的体面示例。这是我在生产中使用的。我很确定它起源于[这里](https://code.msdn.microsoft.com/vstudio/Pretty-Good-Privacy-using-4f473c67)。

```
using System;
using System.IO;
using Org.BouncyCastle.Bcpg;
using Org.BouncyCastle.Bcpg.OpenPgp;
using Org.BouncyCastle.Security;
using Org.BouncyCastle.Utilities.IO;

namespace FileEncryptionTasks.Helpers.PGP
{
    public static class PGPEncryptDecrypt
    {
        private const int BufferSize = 0x10000; // should always be power of 2

        #region Encrypt

        /*
         * Encrypt the file.
         */

        public static void EncryptFile(string inputFile, string outputFile, string publicKeyFile, bool armor, bool withIntegrityCheck)
        {
            try
            {
                using (Stream publicKeyStream = File.OpenRead(publicKeyFile))
                {
                    PgpPublicKey encKey = ReadPublicKey(publicKeyStream);

                    using (MemoryStream bOut = new MemoryStream())
                    {
                        PgpCompressedDataGenerator comData = new PgpCompressedDataGenerator(CompressionAlgorithmTag.Zip);
                        PgpUtilities.WriteFileToLiteralData(comData.Open(bOut), PgpLiteralData.Binary, new FileInfo(inputFile));

                        comData.Close();
                        PgpEncryptedDataGenerator cPk = new PgpEncryptedDataGenerator(SymmetricKeyAlgorithmTag.Cast5, withIntegrityCheck, new SecureRandom());

                        cPk.AddMethod(encKey);
                        byte[] bytes = bOut.ToArray();

                        using (Stream outputStream = File.Create(outputFile))
                        {
                            if (armor)
                            {
                                using (ArmoredOutputStream armoredStream = new ArmoredOutputStream(outputStream))
                                {
                                    using (Stream cOut = cPk.Open(armoredStream, bytes.Length))
                                    {
                                        cOut.Write(bytes, 0, bytes.Length);
                                    }
                                }
                            }
                            else
                            {
                                using (Stream cOut = cPk.Open(outputStream, bytes.Length))
                                {
                                    cOut.Write(bytes, 0, bytes.Length);
                                }
                            }
                        }
                    }
                }
            }
            catch (PgpException e)
            {
                throw;
            }
        }

        #endregion Encrypt

        #region Encrypt and Sign

        /*
         * Encrypt and sign the file pointed to by unencryptedFileInfo and
         */

        public static void EncryptAndSign(string inputFile, string outputFile, string publicKeyFile, string privateKeyFile, string passPhrase, bool armor)
        {
            PgpEncryptionKeys encryptionKeys = new PgpEncryptionKeys(publicKeyFile, privateKeyFile, passPhrase);

            if (!File.Exists(inputFile))
                throw new FileNotFoundException(String.Format("Input file [{0}] does not exist.", inputFile));

            if (!File.Exists(publicKeyFile))
                throw new FileNotFoundException(String.Format("Public Key file [{0}] does not exist.", publicKeyFile));

            if (!File.Exists(privateKeyFile))
                throw new FileNotFoundException(String.Format("Private Key file [{0}] does not exist.", privateKeyFile));

            if (String.IsNullOrEmpty(passPhrase))
                throw new ArgumentNullException("Invalid Pass Phrase.");

            if (encryptionKeys == null)
                throw new ArgumentNullException("Encryption Key not found.");

            using (Stream outputStream = File.Create(outputFile))
            {
                if (armor)
                    using (ArmoredOutputStream armoredOutputStream = new ArmoredOutputStream(outputStream))
                    {
                        OutputEncrypted(inputFile, armoredOutputStream, encryptionKeys);
                    }
                else
                    OutputEncrypted(inputFile, outputStream, encryptionKeys);
            }
        }

        private static void OutputEncrypted(string inputFile, Stream outputStream, PgpEncryptionKeys encryptionKeys)
        {
            using (Stream encryptedOut = ChainEncryptedOut(outputStream, encryptionKeys))
            {
                FileInfo unencryptedFileInfo = new FileInfo(inputFile);
                using (Stream compressedOut = ChainCompressedOut(encryptedOut))
                {
                    PgpSignatureGenerator signatureGenerator = InitSignatureGenerator(compressedOut, encryptionKeys);
                    using (Stream literalOut = ChainLiteralOut(compressedOut, unencryptedFileInfo))
                    {
                        using (FileStream inputFileStream = unencryptedFileInfo.OpenRead())
                        {
                            WriteOutputAndSign(compressedOut, literalOut, inputFileStream, signatureGenerator);
                            inputFileStream.Close();
                        }
                    }
                }
            }
        }

        private static void WriteOutputAndSign(Stream compressedOut, Stream literalOut, FileStream inputFile, PgpSignatureGenerator signatureGenerator)
        {
            int length = 0;
            byte[] buf = new byte[BufferSize];
            while ((length = inputFile.Read(buf, 0, buf.Length)) > 0)
            {
                literalOut.Write(buf, 0, length);
                signatureGenerator.Update(buf, 0, length);
            }
            signatureGenerator.Generate().Encode(compressedOut);
        }

        private static Stream ChainEncryptedOut(Stream outputStream, PgpEncryptionKeys m_encryptionKeys)
        {
            PgpEncryptedDataGenerator encryptedDataGenerator;
            encryptedDataGenerator = new PgpEncryptedDataGenerator(SymmetricKeyAlgorithmTag.TripleDes, new SecureRandom());
            encryptedDataGenerator.AddMethod(m_encryptionKeys.PublicKey);
            return encryptedDataGenerator.Open(outputStream, new byte[BufferSize]);
        }

        private static Stream ChainCompressedOut(Stream encryptedOut)
        {
            PgpCompressedDataGenerator compressedDataGenerator = new PgpCompressedDataGenerator(CompressionAlgorithmTag.Zip);
            return compressedDataGenerator.Open(encryptedOut);
        }

        private static Stream ChainLiteralOut(Stream compressedOut, FileInfo file)
        {
            PgpLiteralDataGenerator pgpLiteralDataGenerator = new PgpLiteralDataGenerator();
            return pgpLiteralDataGenerator.Open(compressedOut, PgpLiteralData.Binary, file);
        }

        private static PgpSignatureGenerator InitSignatureGenerator(Stream compressedOut, PgpEncryptionKeys m_encryptionKeys)
        {
            const bool IsCritical = false;
            const bool IsNested = false;
            PublicKeyAlgorithmTag tag = m_encryptionKeys.SecretKey.PublicKey.Algorithm;
            PgpSignatureGenerator pgpSignatureGenerator = new PgpSignatureGenerator(tag, HashAlgorithmTag.Sha1);
            pgpSignatureGenerator.InitSign(PgpSignature.BinaryDocument, m_encryptionKeys.PrivateKey);
            foreach (string userId in m_encryptionKeys.SecretKey.PublicKey.GetUserIds())
            {
                PgpSignatureSubpacketGenerator subPacketGenerator = new PgpSignatureSubpacketGenerator();
                subPacketGenerator.SetSignerUserId(IsCritical, userId);
                pgpSignatureGenerator.SetHashedSubpackets(subPacketGenerator.Generate());
                // Just the first one!
                break;
            }
            pgpSignatureGenerator.GenerateOnePassVersion(IsNested).Encode(compressedOut);
            return pgpSignatureGenerator;
        }

        #endregion Encrypt and Sign

        #region Decrypt

        /*
       * decrypt a given stream.
       */

        public static void Decrypt(string inputfile, string privateKeyFile, string passPhrase, string outputFile)
        {
            if (!File.Exists(inputfile))
                throw new FileNotFoundException(String.Format("Encrypted File [{0}] not found.", inputfile));

            if (!File.Exists(privateKeyFile))
                throw new FileNotFoundException(String.Format("Private Key File [{0}] not found.", privateKeyFile));

            if (String.IsNullOrEmpty(outputFile))
                throw new ArgumentNullException("Invalid Output file path.");

            using (Stream inputStream = File.OpenRead(inputfile))
            {
                using (Stream keyIn = File.OpenRead(privateKeyFile))
                {
                    Decrypt(inputStream, keyIn, passPhrase, outputFile);
                }
            }
        }

        /*
        * decrypt a given stream.
        */

        public static void Decrypt(Stream inputStream, Stream privateKeyStream, string passPhrase, string outputFile)
        {
            try
            {
                PgpObjectFactory pgpF = null;
                PgpEncryptedDataList enc = null;
                PgpObject o = null;
                PgpPrivateKey sKey = null;
                PgpPublicKeyEncryptedData pbe = null;
                PgpSecretKeyRingBundle pgpSec = null;

                pgpF = new PgpObjectFactory(PgpUtilities.GetDecoderStream(inputStream));
                // find secret key
                pgpSec = new PgpSecretKeyRingBundle(PgpUtilities.GetDecoderStream(privateKeyStream));

                if (pgpF != null)
                    o = pgpF.NextPgpObject();

                // the first object might be a PGP marker packet.
                if (o is PgpEncryptedDataList)
                    enc = (PgpEncryptedDataList)o;
                else
                    enc = (PgpEncryptedDataList)pgpF.NextPgpObject();

                // decrypt
                foreach (PgpPublicKeyEncryptedData pked in enc.GetEncryptedDataObjects())
                {
                    sKey = FindSecretKey(pgpSec, pked.KeyId, passPhrase.ToCharArray());

                    if (sKey != null)
                    {
                        pbe = pked;
                        break;
                    }
                }

                if (sKey == null)
                    throw new ArgumentException("Secret key for message not found.");

                PgpObjectFactory plainFact = null;

                using (Stream clear = pbe.GetDataStream(sKey))
                {
                    plainFact = new PgpObjectFactory(clear);
                }

                PgpObject message = plainFact.NextPgpObject();

                if (message is PgpCompressedData)
                {
                    PgpCompressedData cData = (PgpCompressedData)message;
                    PgpObjectFactory of = null;

                    using (Stream compDataIn = cData.GetDataStream())
                    {
                        of = new PgpObjectFactory(compDataIn);
                    }

                    message = of.NextPgpObject();
                    if (message is PgpOnePassSignatureList)
                    {
                        message = of.NextPgpObject();
                        PgpLiteralData Ld = null;
                        Ld = (PgpLiteralData)message;
                        using (Stream output = File.Create(outputFile))
                        {
                            Stream unc = Ld.GetInputStream();
                            Streams.PipeAll(unc, output);
                        }
                    }
                    else
                    {
                        PgpLiteralData Ld = null;
                        Ld = (PgpLiteralData)message;
                        using (Stream output = File.Create(outputFile))
                        {
                            Stream unc = Ld.GetInputStream();
                            Streams.PipeAll(unc, output);
                        }
                    }
                }
                else if (message is PgpLiteralData)
                {
                    PgpLiteralData ld = (PgpLiteralData)message;
                    string outFileName = ld.FileName;

                    using (Stream fOut = File.Create(outputFile))
                    {
                        Stream unc = ld.GetInputStream();
                        Streams.PipeAll(unc, fOut);
                    }
                }
                else if (message is PgpOnePassSignatureList)
                    throw new PgpException("Encrypted message contains a signed message - not literal data.");
                else
                    throw new PgpException("Message is not a simple encrypted file - type unknown.");

                #region commented code

                //if (pbe.IsIntegrityProtected())
                //{
                //    if (!pbe.Verify())
                //        msg = "message failed integrity check.";
                //    //Console.Error.WriteLine("message failed integrity check");
                //    else
                //        msg = "message integrity check passed.";
                //    //Console.Error.WriteLine("message integrity check passed");
                //}
                //else
                //{
                //    msg = "no message integrity check.";
                //    //Console.Error.WriteLine("no message integrity check");
                //}

                #endregion commented code
            }
            catch (PgpException ex)
            {
                throw;
            }
        }

        #endregion Decrypt

        #region Private helpers

        /*
        * A simple routine that opens a key ring file and loads the first available key suitable for encryption.
        */

        private static PgpPublicKey ReadPublicKey(Stream inputStream)
        {
            inputStream = PgpUtilities.GetDecoderStream(inputStream);

            PgpPublicKeyRingBundle pgpPub = new PgpPublicKeyRingBundle(inputStream);

            // we just loop through the collection till we find a key suitable for encryption, in the real
            // world you would probably want to be a bit smarter about this.
            // iterate through the key rings.
            foreach (PgpPublicKeyRing kRing in pgpPub.GetKeyRings())
            {
                foreach (PgpPublicKey k in kRing.GetPublicKeys())
                {
                    if (k.IsEncryptionKey)
                        return k;
                }
            }

            throw new ArgumentException("Can't find encryption key in key ring.");
        }

        /*
        * Search a secret key ring collection for a secret key corresponding to keyId if it exists.
        */

        private static PgpPrivateKey FindSecretKey(PgpSecretKeyRingBundle pgpSec, long keyId, char[] pass)
        {
            PgpSecretKey pgpSecKey = pgpSec.GetSecretKey(keyId);

            if (pgpSecKey == null)
                return null;

            return pgpSecKey.ExtractPrivateKey(pass);
        }

        #endregion Private helpers
    }
} 
```

它使用：

```
using System;
using System.IO;
using System.Linq;
using Org.BouncyCastle.Bcpg.OpenPgp;

namespace FileEncryptionTasks.Helpers.PGP
{
    public class PgpEncryptionKeys
    {
        public PgpPublicKey PublicKey { get; private set; }

        public PgpPrivateKey PrivateKey { get; private set; }

        public PgpSecretKey SecretKey { get; private set; }

        /// <summary>
        /// Initializes a new instance of the EncryptionKeys class.
        /// Two keys are required to encrypt and sign data. Your private key and the recipients public key.
        /// The data is encrypted with the recipients public key and signed with your private key.
        /// </summary>
        /// <param name="publicKeyPath">The key used to encrypt the data</param>
        /// <param name="privateKeyPath">The key used to sign the data.</param>
        /// <param name="passPhrase">The (your) password required to access the private key</param>
        /// <exception cref="ArgumentException">Public key not found. Private key not found. Missing password</exception>
        public PgpEncryptionKeys(string publicKeyPath, string privateKeyPath, string passPhrase)
        {
            if (!File.Exists(publicKeyPath))
                throw new ArgumentException("Public key file not found", "publicKeyPath");
            if (!File.Exists(privateKeyPath))
                throw new ArgumentException("Private key file not found", "privateKeyPath");
            if (String.IsNullOrEmpty(passPhrase))
                throw new ArgumentException("passPhrase is null or empty.", "passPhrase");
            PublicKey = ReadPublicKey(publicKeyPath);
            SecretKey = ReadSecretKey(privateKeyPath);
            PrivateKey = ReadPrivateKey(passPhrase);
        }

        #region Secret Key

        private PgpSecretKey ReadSecretKey(string privateKeyPath)
        {
            using (Stream keyIn = File.OpenRead(privateKeyPath))
            {
                using (Stream inputStream = PgpUtilities.GetDecoderStream(keyIn))
                {
                    PgpSecretKeyRingBundle secretKeyRingBundle = new PgpSecretKeyRingBundle(inputStream);
                    PgpSecretKey foundKey = GetFirstSecretKey(secretKeyRingBundle);
                    if (foundKey != null)
                        return foundKey;
                }
            }
            throw new ArgumentException("Can't find signing key in key ring.");
        }

        /// <summary>
        /// Return the first key we can use to encrypt.
        /// Note: A file can contain multiple keys (stored in "key rings")
        /// </summary>
        private PgpSecretKey GetFirstSecretKey(PgpSecretKeyRingBundle secretKeyRingBundle)
        {
            foreach (PgpSecretKeyRing kRing in secretKeyRingBundle.GetKeyRings())
            {
                PgpSecretKey key = kRing.GetSecretKeys()
                    .Cast<PgpSecretKey>()
                    .Where(k => k.IsSigningKey)
                    .FirstOrDefault();
                if (key != null)
                    return key;
            }
            return null;
        }

        #endregion Secret Key

        #region Public Key

        private PgpPublicKey ReadPublicKey(string publicKeyPath)
        {
            using (Stream keyIn = File.OpenRead(publicKeyPath))
            {
                using (Stream inputStream = PgpUtilities.GetDecoderStream(keyIn))
                {
                    PgpPublicKeyRingBundle publicKeyRingBundle = new PgpPublicKeyRingBundle(inputStream);
                    PgpPublicKey foundKey = GetFirstPublicKey(publicKeyRingBundle);
                    if (foundKey != null)
                        return foundKey;
                }
            }
            throw new ArgumentException("No encryption key found in public key ring.");
        }

        private PgpPublicKey GetFirstPublicKey(PgpPublicKeyRingBundle publicKeyRingBundle)
        {
            foreach (PgpPublicKeyRing kRing in publicKeyRingBundle.GetKeyRings())
            {
                PgpPublicKey key = kRing.GetPublicKeys()
                    .Cast<PgpPublicKey>()
                    .Where(k => k.IsEncryptionKey)
                    .FirstOrDefault();
                if (key != null)
                    return key;
            }
            return null;
        }

        #endregion Public Key

        #region Private Key

        private PgpPrivateKey ReadPrivateKey(string passPhrase)
        {
            PgpPrivateKey privateKey = SecretKey.ExtractPrivateKey(passPhrase.ToCharArray());
            if (privateKey != null)
                return privateKey;
            throw new ArgumentException("No private key found in secret key.");
        }

        #endregion Private Key
    }
} 
```

加密文件：

```
PGPEncryptDecrypt.EncryptFile(inputFileName, 
                              outputFileName,
                              recipientKeyFileName,
                              shouldArmor,
                              shouldCheckIntegrity); 
```

解密文件：

```
PGPEncryptDecrypt.Decrypt(inputFileName, 
                          privateKeyFileName,
                          passPhrase, 
                          outputFileName); 
```

# java - 链接方法/小修正 - Java

> ID：10209300
> 
> 赞同：0
> 
> 时间：2012-04-18T12:23:39.777
> 
> 标签：java, arraylist, multidimensional-array

在过去的几天里，我一直在为大学做一个 Java 项目。我遇到了一些问题，在本网站用户的帮助下我克服了这些问题。我正在做的是单词搜索，它将用户输入的单词作为字符串的数组列表，并将它们随机映射到二维数组上。我已经创建了用于选择行和列、选择单词的方向以及检查是否有*足够的*空白空间用于所述单词的方法。我在编译该代码时遇到了一些错误。这是我之前的问题，所以你可以看到，从那时起我已经取得了一些进展:) [https://stackoverflow.com/questions/10193291/adding-words-to-a-2-d-array](https://stackoverflow.com/questions/10193291/adding-words-to-a-2-d-array)

具体来说，问题是我试图通过使用随机数来决定选择哪种方法来引用 doitfit 方法（上、下、左或右）。它没有编译：/

```
 import java.io.* ;

import java.util.ArrayList ;

public class WordSearchPuzzle

{

    private char[][] puzzle ;

    private ArrayList<String> puzzleWords ;

    private int letterCount = 0 ;

    private int gridDimensions;

    public static int row, column;

    public WordSearchPuzzle(ArrayList<String> userSpecifiedWords)

    {

        this.puzzleWords = userSpecifiedWords ;

    }

    private void createPuzzleGrid()

    {

        int i, itemLength;

        String item;

        for (i = 0; i < puzzleWords.size(); i++) {

            item = puzzleWords.get(i);

            itemLength = item.length();

            letterCount = letterCount + itemLength;

        }

        gridDimensions = letterCount * 2;

        puzzle = new char[gridDimensions][gridDimensions] ;

    }

    private void generateWordSearchPuzzle()

    {

    }

    public void northSouthEastWest(String word)

    {

        int upDownLeftRight, north, south, east, west;

        north = 1;

        south = 2;

        east = 3;

        west = 4;

        String Word;

        upDownLeftRight = (int)(Math.random() * 4);

        if(upDownLeftRight == north){

            fitWordNorth(word);

        }else if(upDownLeftRight == south){

            fitWordSouth(word);

        }else if(upDownLeftRight == east){

            fitWordEast(word);

        }else if(upDownLeftRight == west){

            fitWordWest(word);

        }

    }

    public void firstSpace(String word) 

    {  

        row = (int)(Math.random() * gridDimensions);

        column = (int)(Math.random() * gridDimensions);

        if(puzzle[row][column] != ' ') { 

            firstSpace(word);

        } else {

            northSouthEastWest(word);

        }

    }

    public void fitWordNorth(String word)

    {

        boolean clear = false;

        int p, i; 

        if(row >= word.length()){

            for(i = row - 1; i < word.length(); i--){

                if(puzzle[i][column] != ' '){

                    firstSpace(word);

                }else{

                    clear = true;

                }

                if(clear == true){

                    for(p = 0; p < word.length(); p++){

                        puzzle[row - p][column] = word.charAt(p);

                    }

                }else{

                    firstSpace(word);

                }

            }

        }

    }

    public void fitWordSouth(String word)

    {

        boolean clear = false;

        int row, column, p, i; 

        if(row >= word.length()){

            for(i = row + 1; i < word.length(); i++){

                if(puzzle[i][column] != ' '){

                    firstSpace(word);

                }

                clear = true;

            }

        }else{

            firstSpace(word);

        }

        if(clear == true){

            for(p = 0; p < word.length(); p++){

                puzzle[row + p][column] = word.charAt(p);

            }

        }else{

            firstSpace(word);

        }

    }

    public void fitWordWest(String word)

    {

        boolean clear = false;

        int row, column, p, i; 

        if(column >= word.length()){

            for(i = column - 1; i < word.length(); i--){

                if(puzzle[row][i] != ' '){

                    firstSpace(word);

                }

                clear = true;

            }

        }else{

            firstSpace(word);

        }

        if(clear == true){

            for(p = 0; p < word.length(); p++){

                puzzle[row][column - p] = word.charAt(p);

            }

        }else{

            firstSpace(word);

        }

    }

    public void fitWordEast(String word)

    {

        boolean clear = false;

        int row, column, p, i; 

        if(column >= word.length()){

            for(i = column + 1; i < word.length(); i++){

                if(puzzle[row][i] != ' '){

                    firstSpace(word);

                }

                clear = true;

            }

        }else{

            firstSpace(word);

        }

        if(clear == true){

            for(p = 0; p < word.length(); p++){

                puzzle[row][column + p] = word.charAt(p);

            }

        }else{

            firstSpace(word);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:48:21.470

您正在从您的 northSouthEastWest() 函数调用 fitWordNorth(Word)、fitWordSouth(Word)、fitWordEast(Word)、fitWordWest(Word) 函数。编译器抱怨，因为在类范围或方法范围内没有定义为 Word 的变量。

我也没有看到程序中的任何地方都调用了 northSouthEastWest() 函数。请将该函数定义为 northSouthEastWest(String Word) 以使该函数起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:26:45.990

在进一步查看您的代码后，可能会有很多建议。当我有时间时，我会更新这个答案。您可能有一个主要方法..类似

```
/**
     * @param args
     */
    public static void main(String[] args) {
        if(null!=args && args.length>0){
            WordSearchPuzzle wsp = new WordSearchPuzzle(Arrays.asList(args));
        }else{
            System.err.println("Please enter words to search");
        }
        //TODO
        //Call your functions in the series that you want...
    } 
```

你的构造函数可以像

```
public WordSearchPuzzle(List<String> userSpecifiedWords)
    {
        this.puzzleWords = userSpecifiedWords ;
    } 
```

将您的 puzzleWords 变量定义为 List 而不是 ArrayList

```
 private List<String> puzzleWords ; 
```

您的 northSouthEastWest 函数可以是：（north, south, east, and west 可以是常量）

```
 public static final int NORTH= 0;
    public static final int SOUTH = 1;
    public static final int EAST = 2;
    public static final int WEST = 3;

    public void northSouthEastWest(String Word)
    {
        int upDownLeftRight = (int)(Math.random() * 3);
        switch(upDownLeftRight){
        case NORTH: fitWordNorth(Word);break;
        case SOUTH: fitWordSouth(Word);break;
        case WEST: fitWordWest(Word);break;
        case EAST:  fitWordEast(Word);break;
        }
    } 
```

您可以考虑创建另一个具有属性 row、column、p、i 的类，并将该对象的实例包含在您的拼图类中。

# java - Hibernate 可嵌入类中的可选字段

> ID：10209302
> 
> 赞同：2
> 
> 时间：2012-04-18T12:23:41.027
> 
> 标签：java, hibernate

我有一个可嵌入的类，地址。这个想法是使用 @AttributeOverride(s) 映射到遗留数据库模式。但是，我希望这些字段是可选的。例如，并非每条记录都有 STREET_ADDRESS_2。

下面的类可以很好地保存/保存到数据库中，但是在执行 getAll() 操作时会出现“java.sql.SQLSyntaxErrorException：用户缺少权限或找不到对象”。具体来说，getStreet2() 方法会导致问题。

```
@Embeddable
public class Address implements Serializable {

private static final long serialVersionUID = 1L;

private String street1;
private String street2;
private String state;
private String zip;
private String city;
private String phone;

@Column(name = "STREET1", updatable=false, insertable=false)
public String getStreet1() {
    return street1;
}

public void setStreet1(String street1) {
    this.street1 = street1;
}

//@Basic(optional=true)
@Column(name="STREET2", insertable=false, updatable=false)
@NotFound(action=NotFoundAction.IGNORE)
public String getStreet2() {
    return street2;
}

public void setStreet2(String street2) {
    this.street2 = street2;
}

@Column(name="STATE", updatable=false, insertable=false)
public String getState() {
    return state;
}

public void setState(String state) {
    this.state = state;
}

@Column(name="ZIP", updatable=false, insertable=false)
public String getZip() {
    return zip;
}

public void setZip(String zip) {
    this.zip = zip;
}

@Column(name="CITY", updatable=false, insertable=false)
public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}

@Column(name="PHONE", updatable=false, insertable=false)
public String getPhone() {
    return phone;
}

public void setPhone(String phone) {
    this.phone = phone;
}

@Override
public String toString() {
    return "Address [street1=" + street1 + ", street2=" + street2
            + ", state=" + state + ", zip=" + zip + ", city=" + city
            + ", phone=" + phone + "]";
} 
```

使用 Embedded 类的调用如下所示：

```
@Embedded
@AttributeOverrides({
        @AttributeOverride(name = "street1", column = @Column(name = "PERSON_STREET_1")),
        @AttributeOverride(name = "street2", column = @Column(name = "PERSON_STREET_2")),
        @AttributeOverride(name = "city", column = @Column(name = "PERSON_CITY")),
        @AttributeOverride(name = "state", column = @Column(name = "PERSON_STATE")),
        @AttributeOverride(name = "zip", column = @Column(name = "PERSON_ZIP")),
        @AttributeOverride(name = "phone", column = @Column(name = "SOLDIER_PHONE")) })
@NotFound(action=NotFoundAction.IGNORE)
public Address getPersonAddress() {
    return personAddress;
}

public void setPersonAddress(Address personAddress) {
    this.personAddress = personAddress;
}

@Embedded
@AttributeOverrides({
        @AttributeOverride(name = "street1", column = @Column(name = "DEPARTMENT_STREET")),
        @AttributeOverride(name = "city", column = @Column(name = "DEPARTMENT_CITY")),
        @AttributeOverride(name = "state", column = @Column(name = "DEPARTMENT_STATE")),
        @AttributeOverride(name = "zip", column = @Column(name = "DEPARTMENT_ZIP")),
        @AttributeOverride(name = "phone", column = @Column(name = "UNIT_PHONE")) })
public Address getDepartmentAddress() {
    return DepartmentAddress;
}

public void setDepartmentAddress(Address DepartmentAddress) {
    this.DepartmentAddress = DepartmentAddress;
} 
```

它似乎爆炸了，因为部门地址在数据库中没有要覆盖的 Street2。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:21:42.270

在 JPA 中，没有从 Embeddable 中仅派生属性映射子集的概念。每次在实体中使用@Embedded，Embeddable 的所有属性都将成为具有默认映射的实体的属性。与您的情况一样，您可以覆盖属性（以及关联），但不能删除它们。

此外，我不知道 Hibernate 中供应商对此的特定支持。

# ruby-on-rails - 如何在使用 Rails 3.x 时自定义 Twitter 引导程序？

> ID：10209303
> 
> 赞同：8
> 
> 时间：2012-04-18T12:23:41.120
> 
> 标签：ruby-on-rails, css, ruby-on-rails-3, twitter-bootstrap, less

我正在使用 Rails 3.2，并按照此处 RailCasts 中的说明使用 twitter-bootstrap-rails gem 将 Twitter 引导程序集成到我的 Rails 应用程序中 - [http://railscasts.com/episodes/328-twitter-bootstrap-basics](http://railscasts.com/episodes/328-twitter-bootstrap-basics)。

我在我的应用程序中添加了一个导航栏。

我想知道如何从导航栏中删除渐变？我应该编辑什么以及在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T00:15:02.417

你也可以通过修改less变量@navbarBackgroundHighlight来处理它。如果您将其设置为与 navbarBackground 相同的颜色，那么您将没有渐变。例如：

```
@navbarBackgroundHighlight: white;
@navbarBackground: white; 
```

中提琴。没有渐变，也没有破坏 CSS 的内部结构。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T12:42:22.983

引导渐变来自`.navbar-inner`类，可以通过重置`background-image`bootstrap.css 样式表上设置的属性来删除。我建议您在自己的样式表上重置它们，这样当引导程序更新时，您不必返回并重做您的更改，因此将以下内容放在您的样式表上以删除渐变：

**CSS**

```
.navbar-inner {
  background-color: #2c2c2c; /* place your solid color here */
  background-image: none;
  background-repeat: no-repeat;
  filter: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T08:33:27.257

Bootstrap LESS 变量有 2 个非常好的参考资料。

*   [http://bootstrap.lesscss.ru/less.html](http://bootstrap.lesscss.ru/less.html) （这是一个俄罗斯网站 - 但这个页面是英文的。我在主要的英文网站上找不到类似的页面）

*   [https://github.com/twitter/bootstrap/blob/master/less/variables.less](https://github.com/twitter/bootstrap/blob/master/less/variables.less)

# c++ - 如何在子目录中搜索文件？

> ID：10209310
> 
> 赞同：0
> 
> 时间：2012-04-18T12:24:19.060
> 
> 标签：c++, windows, winapi

我必须创建一个程序，在特定目录的子目录（下例中的文件夹 A）中搜索文件“letter.txt”。

例如：

```
folderA/
   folderA1/...
   folderA2/...
   folderA3/...
   folderA4/letter.txt
   folderA5/... 
```

我必须使用什么 API：

```
- list subdirectories of a specific directory ( folderA ), 
- open each of these subdirectories ( folderA1, folderA2, folderA3, etc ) 
- search and open the file letter.txt ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:30:16.763

在原始 Win32 中，这将使用 来完成[`FindFirstFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)，但您必须手动编写递归代码；很难正确处理所有极端情况（例如，如果您有创建循环目录结构的重解析点会发生什么？）。

为了更方便，您可以使用`Boost.Filesystem`; 类[`recursive_directory_iterator`](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#Class-recursive_directory_iterator)正是你想要的。过去我也使用过[recls 库](http://synesis.com.au/software/recls/)，我很满意——它可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:29:04.177

我知道如何完成这项任务的最佳方法是使用 Boost.filesystem 库。

[http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm)

它提供了一个目录迭代器（和一个递归目录迭代器），允许您遍历目录中的文件和目录，以查找您需要的文件。

# c# - 如何在 C# 的 GridView 中进行多行选择

> ID：10209311
> 
> 赞同：3
> 
> 时间：2012-04-18T12:24:19.637
> 
> 标签：c#, winforms, gridview, desktop-application

我是 C# 和 Visual Studio 的新手，在 Internet 上找不到任何关于我的问题的示例。问题是如何在 GridView 类型的对象中启用多行选择功能。

似乎很容易设置为 true 成员变量，但我找不到答案。您的帮助将不胜感激。

我找到了答案：
感谢那些阅读我的问题并提供帮助的人。顺便说一句，GridView 是 DevXpress 的一个控件。

moView.OptionsSelection.MultiSelect = true;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:43:17.927

```
DataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
DataGridView1.MultiSelect = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:29:18.357

设置 MultiSelect = True，记住你需要 Ctrl + Click 来选择多行

# scala - 使用模式匹配查找子列表

> ID：10209317
> 
> 赞同：2
> 
> 时间：2012-04-18T12:24:33.023
> 
> 标签：scala

我需要使用模式匹配查找子列表，我该怎么做？

```
val list1 = List(2, 3)
val list2 = List(1, "2", list1, "r")
val list3 = list2 match {
      case // insert match statement here
      case _ => "failed"
}

assertEquals(list1, list3) 
```

我无法更改给定的代码，我只能在此处插入代码， `case // insert match statement here` 这是学校任务（不是工作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:40:33.250

你不想要一个*match*，你想要一个*find*：

```
list2.find(_ == list1) 
```

会给你一个`Some(List(2, 3))`（或者`None`如果它找不到）。要完全匹配您的代码，您需要：

```
list2.find(_ == list1).getOrElse("failed") 
```

尽管使用`Option`而不是可能的字符串是处理错误情况的更好方法。

如果你真的想使用匹配，你必须递归地做：

```
final def findOrFailed(xs: List[Any], what: Any): Any = xs match {
  case x :: rest => if (x == what) x else findOrFailed(rest,what)
  case _ => "failed"
} 
```

（同样，我更喜欢一个选项，但我在这里给出了字符串版本。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:39:34.880

干得好。仅`.find`用于第一个列表。由于您不清楚您正在寻找哪个子列表，我只是假设第一个。否则，您必须调整用于查找调用的谓词。

```
val list1 = List(2, 3)
val list2 = List(1, "2", list1, "r")
val list3 = list2.find(_.isInstanceOf[List[_]]) match {
      case Some(listFound) => listFound
      case _ => "failed"
}

assertEquals(list1, list3) // true 
```

## 另一个“解决方案”：

问题不够清楚。正如 Rex 指出的那样，使用 match 声明，您不会走得太远。为了只满足上面的最小示例（这可能是家庭作业所需的全部），您可以匹配确切的列表。即你可以硬编码你想要列表的第三个元素。在这种情况下，您可以编写如下内容：

```
case x :: y :: mylist :: rest => mylist 
```

这几乎没有任何意义，但解决了所需的断言，所以充其量是一个练习`::`用于构造列表。

# c# - 来自处理程序的 context.Response.Redirect 不起作用

> ID：10209327
> 
> 赞同：1
> 
> 时间：2012-04-18T12:24:58.067
> 
> 标签：c#, handler, httpcontext, response.redirect

我正在尝试执行以下操作： - 通过 JQuery 调用处理程序上的函数， - 处理完成后，重定向到页面。

问题是页面似乎没有加载。

为了清楚起见，我制作了以下代码。

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="WebApplication3._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script type="text/javascript" src="js/jquery-ui.js"></script>
<script type="text/javascript" src="js/jquery.js""></script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
  <script type="text/javascript" language="javascript">
function CallHandler() {
      console.info("Entering CallHandler");
      $.ajax({
          type: 'POST',
          url: "Handlers/MyFunction.ashx",
          data: { helloworld: 'hello world'},
          success: function (data) {
              console.info(data);
              }
          });
      }

    </script>
<asp:HyperLink runat="server" ID="linkForTest" onclick='CallHandler();' Text='Click Me'     />            
</asp:Content> 
```

我的处理程序如下：

```
/// <summary>
/// Summary description for MyFunction
/// </summary>
public class MyFunction : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Write(context.Request["HelloWorld"]);
        context.Response.Redirect("~/Login/WebForm1.aspx");
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

它应该调用我的页面“Login/Webform1.aspx”，但它什么也没调用。但是，Firebug 似乎没有发现问题......只是它一直在尝试加载页面......并且失败了。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T23:16:38.270

我很确定响应 ajax 请求的重定向不会重定向主机页面。有几种方法可以处理这个问题。一种方法是您可以执行客户端重定向以响应来自处理程序的某种通知或状态代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:29:33.460

您正在传递处理程序`helloworld`并读取它，`HelloWorld`看看这是否是空引用错误？此外，在 $.ajax 调用上使用错误处理程序并查看它是否被抛出。

```
 console.info("Entering CallHandler");
  $.ajax({
      type: 'POST',
      url: "Handlers/MyFunction.ashx",
      data: { HelloWorld: 'hello world'},
      success: function (data) {
          console.info(data);
          },
      error: function (data) {
          console.error(data);
          }
      });
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T01:37:07.130

重定向时，您要重定向的页面内容将作为 ajax 结果传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:26:25.987

它在循环吗？

即使它在页面上重定向到它，它是否也会重定向？

也许您需要在重定向之前检查 context.Request.Url

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-03T07:53:48.553

您可以使用javascript通过客户端调用另一种方式调用response.redirect

```
console.info("Entering CallHandler");
  $.ajax({
      type: 'POST',
      url: "Handlers/MyFunction.ashx",
      data: { HelloWorld: 'hello world'},
      success: function (data) {
                   window.location.href ="WebForm1.aspx"  ;
          },
      error: function (data) {
          console.error(data);
          }
      });
  }
```

# javascript - 我们如何在 flex 中使用 addCallback 函数

> ID：10209332
> 
> 赞同：0
> 
> 时间：2012-04-18T12:25:38.313
> 
> 标签：javascript, apache-flex

如何从 java 脚本中调用 flex 函数？我正在使用以下链接中定义的以下代码

```
ExternalInterface.addCallback( "javascriptfunction", flexfunction); 
```

[http://www.switchonthecode.com/tutorials/flex-javascript-basics-using-externalinterface](http://www.switchonthecode.com/tutorials/flex-javascript-basics-using-externalinterface)

[http://circlecube.com/2010/12/actionscript-as3-javascript-call-flash-to-and-from-javascript/](http://circlecube.com/2010/12/actionscript-as3-javascript-call-flash-to-and-from-javascript/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:33:28.180

在`flex 4.5`

首先添加一个 addcallback，就像在你的 mxml 中这样

```
public function initApp():void {
        ExternalInterface.addCallback("myFlexFunction",myFunc);
} 
```

`myFlexFunction`现在可以从您的 javascript 访问。

让你的 index.template.html 看起来像这样

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>addCallback() Wrapper</title>
        <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript">
            var swfVersionStr = "0";
            var xiSwfUrlStr = "";
            var flashvars = {};
            var params = {};
            params.quality = "high";
            params.bgcolor = "#ffffff";
            params.allowscriptaccess = "sameDomain";
            var attributes = {};
            attributes.id = "AddCallbackExample";
            attributes.name = "AddCallbackExample";
            attributes.align = "middle";
            swfobject.embedSWF(
                "AddCallbackExample.swf", "flashContent",
                "100%", "100%",
                swfVersionStr, xiSwfUrlStr,
                flashvars, params, attributes);
        </script>
    </head>
    <SCRIPT LANGUAGE="JavaScript">
        function callApp() {
            window.document.title = document.getElementById("newTitle").value;
            var AddCallbackExample = document.getElementById("AddCallbackExample");
            AddCallbackExample.myFlexFunction(window.document.title);
        }
    </SCRIPT>

    <body>
        <form id="f1">
            Enter a new title: <input type="text" size="30" id="newTitle" onchange="callApp()">
        </form>
        <div id="flashContent"/>
   </body>
</html> 
```

和你这样的弹性应用程序

```
<?xml version="1.0"?>
<!-- wrapper/AddCallbackExample.mxml -->
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    xmlns:s="library://ns.adobe.com/flex/spark" creationComplete="initApp()">
    <fx:Script>
        import flash.external.*;

         public function initApp():void {
            ExternalInterface.addCallback("myFlexFunction",myFunc);
         }  

         public function myFunc(s:String):void {
            l1.text = s;
         }
    </fx:Script>

    <s:Label id="l1"/>

</s:Application> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:37:54.153

您应该为您的问题提供更多背景信息。根据我在教程中阅读的内容，您可能忽略了为代码添加安全访问权限。更准确地看这里：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29 ，尤其是这里：

> SecurityError — 包含环境属于调用代码无权访问的安全沙箱。要解决此问题，请执行以下步骤： 在包含 HTML 页面的 SWF 文件的对象标记中，设置以下参数：

```
param name="allowScriptAccess" value="always" 

In the SWF file, add the following ActionScript:

flash.system.Security.allowDomain(sourceDomain) 
```

希望能帮助到你。

# oracle - Oracle 11g - 创建 X 实例，用于测试

> ID：10209334
> 
> 赞同：0
> 
> 时间：2012-04-18T12:25:41.087
> 
> 标签：oracle, oracle11g

我们有一个涉及托管环境中的多个实例的生产问题。我想在本地做一些测试，并想在本地重现类似的环境。有没有办法创建，比如说 40 个实例，创建一个简单的表，用循环填充它？

好像做40个左右需要很多时间。理想情况下，创建 Instance1、Instance2 等等，不管表是什么，并希望放入大量数据来模拟某种处理。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:57:51.467

我不能 100% 确定这是否能准确回答您的问题，但我会试一试。

Oracle 有一个数据库，这是一个数据文件的集合。实例只是为客户端充当数据库接口的进程集合。所以我的假设是你想在数据库中创建模式并用表填充它们并将一些数据放入这些表中。如果是这样的话，那就很简单了：

假设用户的默认表空间是 USERS 以 dba 身份登录并运行

```
begin
 for i in 1..40 loop
    execute immediate 'create user schema_'||i||' identified by bigsecret quota unlimited on users';
    execute immediate 'create table schema_'||i||'.z as select * from dba_tables';
  end loop;
end;
/ 
```

这会在一个循环中创建 40 个模式，名为 SCHEMA_1 ... SCHEMA_40。在每个模式中，都会创建一个名为 Z 的表作为 DBA_TABLES 的副本。清理

```
begin
 for i in 1..4 loop
    execute immediate 'drop user schema_'||i||' cascade';
  end loop;
end;
/ 
```

我希望这有帮助。

# iphone - 将 iphone-exif 用于 EXIF 数据

> ID：10209337
> 
> 赞同：2
> 
> 时间：2012-04-18T12:25:55.567
> 
> 标签：iphone, objective-c, exif, libexif

我想在我的项目中将[iphone-exif 库](http://code.google.com/p/iphone-exif/)用于 EXIF 数据。但我不知道我是否犯了任何错误

架构 i386 的未定义符号：“_OBJC_CLASS_$_EXFJpeg”，引用自：ViewController.o ld 中的 objc-class-ref：未找到架构 i386 的符号

请为此提供一些解决方案。提前感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:44:46.100

当您下载 iPhone-exif 时，您会发现两个预编译库。

1.  发布-iphoneos/libiphone-exif.a
2.  发布-simulator-iphonesimulator/libiphone-exif.a

根据您希望在哪里运行您的应用程序，您需要链接到正确的文件。您可能将 Release-iphoneos/libiphone-exif.a 添加到您的项目中，然后您尝试在模拟器（i386 架构！）上运行。

最简单的方法：创建上述两者的通用库。

1.  打开终端
2.  cd 到您的 iphone-ex 下载文件夹 ( `cd iphone-exif-0-9`)
3.  `lipo -arch i386 Release-simulator-iphonesimulator/libiphone-exif.a -arch armv6 Release-iphoneos/libiphone-exif.a -create -output libiphone-exif-universal.a`
4.  将文件“ `libiphone-exif-universal.a`”添加到您的 Xcode 项目中

但我刚刚发现缺少 armv7 版本。如果您想将您的应用程序放在应用程序商店中，您曾经还需要为 armv7 构建库（在源代码之外！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T13:11:06.417

而不是使用该库请通过此[解决方案](https://stackoverflow.com/questions/9766394/get-exif-data-from-uiimage-uiimagepickercontroller/9890442#9890442)

实际上我遇到了同样的问题，所以我为自己创建了它以获取 EXIF 信息的目的..

# symfony - 树枝和自动转义

> ID：10209345
> 
> 赞同：3
> 
> 时间：2012-04-18T12:26:34.240
> 
> 标签：symfony, escaping, twig

我正在学习 Symfony2。目前，我正在尝试在树枝模板中呈现表单标签。标签包含一个 html 标记，该标记在我的 twig 文件中未正确呈现。

下面是创建表单字段的代码：

```
$builder->add('zipcode', 'integer', array(
        'label' => '<abbr title="Zone Improvement Plan">CAP</abbr> code',
        )); 
```

在树枝文件中，我将字段标签呈现如下：

```
{{ form_label(form.zipcode) }} 
```

我尝试了 raw、escape、e 过滤器，但我的 html 页面中提供的结果始终是字符串

```
 <abbr title="Zone Improvement Plan">CAP</abbr> code 
```

而不是相应的 HTML 代码！

有什么建议吗？提前致谢！

后来我找到了解决办法。解决方案是在路径中禁用 Symfony 提供的标签块内的自动转义：symfony / src / Symfony / Bridge / Twig / Resources / views / Form / form_div_layout.html.twig

因此，在您的 twig 文件中，您必须将以下几行放在表单之外： {% form_theme form _self %}

```
{% block generic_label %}
{% spaceless %}
  {% if required %}
      {% set attr = attr|merge({'class': attr.class|default('') ~ ' required'}) %}
  {% endif %}
  <label{% for attrname,attrvalue in attr %} {{attrname}}="{{attrvalue}}"{% endfor %}>{% autoescape false %}{{ label|trans }}{% endautoescape %}</label>
{% endspaceless %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T13:58:01.207

来自[冉阿让](https://stackoverflow.com/users/1339429/jeanvaljean)本人：

```
{% autoescape false %}{{ form.zipcode.vars.label | trans }}{% endautoescape %} 
```

要将这种行为推广到您的整个应用程序，您可以覆盖标签的表单块：

```
{% block generic_label %}
    {% spaceless %}
        {% if required %}
            {% set attr = attr|merge({'class': attr.class|default('') ~ ' required'}) %}
        {% endif %}
        <label{% for attrname,attrvalue in attr %} {{attrname}}="{{attrvalue}}"{% endfor %}>
            {% autoescape false %}{{ label|trans }}{% endautoescape %}
        </label>
    {% endspaceless %}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T15:12:33.717

禁用 autoespace 过滤器只是为了渲染一个变量并不是最好的事情，因为当你阅读代码时它并不是很清楚。

所以，而不是：

```
{% autoescape false %}{{ label|trans }}{% endautoescape %} 
```

您可以使用 ：

`{{ label|trans|raw }}`

# mysql - Mysql死锁检测

> ID：10209347
> 
> 赞同：5
> 
> 时间：2012-04-18T12:26:43.070
> 
> 标签：mysql, database-deadlocks

MySQL是否总是自动检测死锁？或者在某些情况下 MySQL 无法确定它正在处理死锁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:47:11.613

根据文档，表级锁定存储引擎 MyISAM 是[无死锁的](http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html)。

InnoDB 有[死锁检测](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlock-detection.html)。

NDB 检测是通过超时实现的。您可以为事务设置[TransactionDeadlockDetectionTimeout](http://dev.mysql.com/doc/refman/5.1/en/mysql-cluster-ndbd-definition.html)参数。

因此，无论是回滚还是超时，死锁最终都会恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:31:59.993

我认为这取决于您使用的引擎，例如 innodb 可以自动执行此操作。

更多解释在[这里。](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlock-detection.html)

# smtp - 设置 SMTP 邮件服务器。完成安装 SMTP。怎么办？

> ID：10209353
> 
> 赞同：-1
> 
> 时间：2012-04-18T12:27:10.590
> 
> 标签：smtp, windows-server-2008, mail-server

我想使用我自己的域来托管我自己的邮件服务器。到目前为止，我可以看到需要安装 SMTP，并且必须修改 DNS 记录以指向我的邮件服务器。到目前为止，一切都很好。但是邮件帐户呢？如何使用用户名和密码创建 mail@mydomain.com，以便我可以开始在 Outlook 中接收电子邮件？既然我已经在我的服务器上安装了 SMTP，还需要什么才能在 Outlook 中接收邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:32:09.057

只安装 smtp 服务并不能满足您的需要。为了让用户收到他们的邮件，您需要一个 pop 服务器，或一个 IMAP 服务器或一个交换服务器。

您需要的是一个单独的邮件托管包。像来自 Ipswitch 的 Imail 之类的东西。或者从微软交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:31:48.777

SMTP 只是一种邮件传输机制，它会接收远程 SMTP 服务器的电子邮件，然后尝试发送它们。它不处理邮箱或电子邮件帐户，为此您需要一个 POP3、IMAP 或 Exchange 服务器。

# php - foreach 循环中的 $_POST 超全局变量不起作用

> ID：10209357
> 
> 赞同：0
> 
> 时间：2012-04-18T12:27:26.657
> 
> 标签：php, select, post, foreach, shopping-cart

使用以下代码，我选择一个数量，然后检查我选择的数量的项目，然后单击添加按钮提交表单。

```
<form name="addtocart" method="post" action="checkbox.php"> 

//foreach loop below loops through array of items fetched from the db
<?php foreach($result2 as $row) { ?>

<select name="qty">
<?php for ($i=0; $i < $row['prd_quantity'] + 1 ; $i++) { ?>
<option value = "<?php echo $i; ?>" ><?php echo $i; ?></option>;    
<?php }?>
</select>

<input type="checkbox" name="checkitem[]" id="addtocart"  value="<?php echo   $row['prd_id'] ?>" optional /></p>

<?php } ?>
enter code here
<input type="submit" value="Make Order"/>

</form> 
```

在选择元素上选择 8 后，下面的 $ordqty 仍然输出 0。我认为它与循环和`$_POST`超全局有关，但是

> 检查项目[ ]

作品。帮助将不胜感激。谢谢。

```
$ordqty = $_POST['qty'];
//$ordqty returns 0. 
```

下面是为第一个项目生成的 HTML，其`$row['prd_quantity'] = 8`:

```
<select name = "qty">

<option value="0">0</option>
;
<option value="1">1</option>
;
<option value="2">2</option>
;
<option value="3">3</option>
;
<option value="4">4</option>
;
<option value="5">5</option>
;
<option value="6">6</option>
;
<option value="7">7</option>
;
<option value="8">8</option>
;
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:38:16.417

在我看来，如果您的数据库返回不止一行，那么`select`您的响应中将有多个元素，全部命名为`qty`. 这可以解释为什么表单没有发布正确的值。你检查过吗？

尝试以下方式：

```
<select name="qty[<?php echo $row['prd_id']; ?>]">
    <?php for ($i=0; $i < $row['prd_quantity'] + 1 ; $i++) { ?>
        <option value = "<?php echo $i; ?>" ><?php echo $i; ?></option>;    
    <?php }?>
</select> 
```

这将发布一系列由产品 ID 键入的选择。

## 更新

感谢您使用有效的产品 ID 索引所选项目数量数组的想法。

为了访问 qty[ ] 数组的元素，我知道这可能会更好，但我做到了：

```
//Array below holds the values of the quantities entered

$new_ord_qty = $_POST['qty'];

//Array below holds product ids -- in the HTML code -- prodid is the name of a hidden inputfield inside the foreach loop whose value i have set to $row['prd_id'] 

$prod_id_array = $_POST['prodid']; 

for($i=0; $i<count($checked_items_array);$i++) {

for ($i=0; $i < count($new_ord_qty); $i++) {

//Array below holds the values of the quantities entered with the prod_id_array elements as //the indices

$ord_qty = $new_ord_qty[$prod_id_array[$i]];

// Here echo will output an array of the quantities entered for the checked items
echo $ord_qty; 

}

} 
```

谢谢各位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:32:37.060

我认为问题可能是您将复选框作为数组传递`checkitems[]`传递，但您将数量作为单个传递`qty`可能值得将数量选择的名称更改为`qty[]`

显然，您可能还需要更新代码以处理作为数组的 qty 并将其与 checkitem 值匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:36:44.040

问题应该是您有多个具有相同名称的选择，我假设 POST 变量将显示最后一个，该变量仍设置为 0。您可以为每个下拉列表使用 id 后缀，例如 qty_0、qty_1。

你能发布段生成的 HTML 代码吗？这可能会有所帮助。

# mysql - MySQL 工作台 - 自引用表和自定义脚本

> ID：10209359
> 
> 赞同：2
> 
> 时间：2012-04-18T12:27:45.300
> 
> 标签：mysql, mysql-workbench

我使用 MySQL 5.3.28 创建我的数据库。其中一张表是指自己，这是一个很大的痛苦。这是最初创建的代码：

```
CREATE  TABLE IF NOT EXISTS `dhbpsychiatry`.`activity` (
`ActivityId` INT(11) NOT NULL AUTO_INCREMENT ,
`NeedsRepeating` BINARY(1) NULL DEFAULT NULL , 
`Prerequisition` INT(11) NOT NULL DEFAULT 0 ,
`ActivityName` VARCHAR(45) NOT NULL ,
`ActivityDescription` VARCHAR(45) NULL ,
 PRIMARY KEY (`ActivityId`) ,
 INDEX `Prerequisition` (`ActivityId` ASC) ,
 CONSTRAINT `Prerequisition`
 FOREIGN KEY (`ActivityId` ) 
 REFERENCES `dhbpsychiatry`.`activity` (`ActivityId` )

 ON DELETE NO ACTION
 ON UPDATE NO ACTION) 
```

问题当然是创建第一行。

```
INSERT INTO `dhbpsychiatry`.`activity` (`ActivityId`, `Prerequisition`,
`ActivityName`) VALUES (1, 1, 'No prerequisition'); 
```

返回

```
 ERROR 1452: Cannot add or update a child row: a foreign key constraint fails 
```

如果我尝试更简单也一样

```
INSERT INTO `dhbpsychiatry`.`activity` (`ActivityName`) 
VALUES ('No prerequisition'); 
```

我想我已经尝试了所有可能性，使 FK 可以为空，不可为空，有或没有默认值......

经过一番挖掘后，我发现了一些可行的方法：

```
SET FOREIGN_KEY_CHECKS = 0;
Insert into activity (ActivityID, ActivityName) VALUES (0,'No prerequisition');
SET FOREIGN_KEY_CHECKS = 1; 
```

所以我用这些行在工作台中创建了一个新的 SQL 脚本。

所以我在这里有两个问题：

1.  如何在没有脚本的情况下添加第一行？

或者如果它不可能

2 每当我对数据库进行工程设计时，如何自动添加要执行的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:39:23.343

您的索引和外键定义很混乱。主要问题是该列`ActivityId`正在引用自身。

尝试这个：

```
CREATE  TABLE IF NOT EXISTS `dhbpsychiatry`.`activity` (
`ActivityId` INT(11) NOT NULL AUTO_INCREMENT ,
`NeedsRepeating` BINARY(1) NULL DEFAULT NULL , 
`Prerequisition` INT(11) NOT NULL DEFAULT 0 ,
`ActivityName` VARCHAR(45) NOT NULL ,
`ActivityDescription` VARCHAR(45) NULL ,
 PRIMARY KEY (`ActivityId`) ,
 INDEX `Prerequisition_idx` (`Prerequisition`) ,  --- changed the index name
                                                  --- and the indexed column

 CONSTRAINT `Prerequisition_fk`                   --- changed the constraint name

   FOREIGN KEY (`Prerequisition` )                --- main issue !! changed  
                                                  --- the referencing column
   REFERENCES `dhbpsychiatry`.`activity` (`ActivityId`)
     ON DELETE NO ACTION
     ON UPDATE NO ACTION
) 
```

# php - 无法在 PHP if 语句中访问 $_POST 变量

> ID：10209368
> 
> 赞同：0
> 
> 时间：2012-04-18T12:28:27.780
> 
> 标签：php

我将隐藏变量从 HTML 传递到 PHP 页面。在 PHP 页面中，我想在表单中使用该变量。

```
<?php               
   $newVar=trim($_POST['newVar']);
   $subject = "new var is ---> $newVar";
?> 
```

我无法`$newVar`在任何`if`声明中使用 - 它显示为空白。如果我尝试回`$subject`显，它会显示`$newVar`但是当我尝试`$subject`在任何`if`语句中回显 的值时，它不会显示 的值`$newVar`。

**我的代码是：** html 标记是：

```
<a href="#" class="applyNow"  onclick="document.sendVar.newVar.value='myVar'; document.sendVar.submit(); return false">New Variable</a>

<form method="post" name="sendVar" action="test.php" style="display:none;">
    <input type="hidden" name="newVar" value="">
    <input type="submit" value="Send form!">
</form> 
```

php:

```
<?php               
   $newVar=trim($_POST['newVar']);
   $subject = "new var is ---> $newVar";
?>

if(isset($_POST['submit'])) {
    if(!isset($hasError)) {
       $from_add = "test@test.com";         
       $emailTo = 'shruti@example.com';                 
       $headers = "From: $from_add \r\n";
       $headers .= "Reply-To: $from_add \r\n";
       $headers .= "Return-Path: $from_add\r\n";
       $headers .= "X-Mailer: PHP \r\n";

       mail($emailTo, $subject, $headers);
 // HERE in $subject.. value of newVar is not displaying

       $emailSent = true;
     }

    $from_add = "do-not-reply@example.com";     
    $headers = "From: $from_add \r\n";
    $headers .= "Reply-To: $from_add \r\n";
    $headers .= "Return-Path: $from_add\r\n";
    $headers .= "X-Mailer: PHP \r\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:56:55.963

您似乎已经结束了一个 PHP 代码部分`?>`而不是开始一个新的代码部分`<?php`- 尽管我假设这只是一个复制/粘贴错误，因为您没有抱怨您可以在浏览器中看到您的 PHP 源代码。

您在这里遇到的实际问题是您正在检查是否`$_POST['submit']`已设置，但它永远不会是因为您没有命名任何表单控件`submit`，因此`if`块中的任何代码都不会被执行。

在您的 HTML 中，更改：

```
<input type="submit" value="Send form!"> 
```

...至：

```
<input type="submit" name="submit" value="Send form!"> 
```

...它应该工作。

# asp.net-mvc-3 - ASP.Net MVC 3 检索 CheckBoxList 值

> ID：10209369
> 
> 赞同：1
> 
> 时间：2012-04-18T12:28:28.670
> 
> 标签：asp.net-mvc-3, viewmodel, checkbox, checkboxlist, editorfor

我正在开发一个 ASP.Net MVC 3 Web 应用程序，并且在我的控制器的 HttpPost 方法中检索选定的复选框值时遇到了困难。希望有人可以提供帮助。

我有 2 个 ViewModel

```
public class ViewModelShiftSubSpecialties
{
    public IEnumerable<ViewModelCheckBox> SpecialtyList { get; set; }
}

public class ViewModelCheckBox
{
    public string Id { get; set; }
    public string Name { get; set; }
    public bool Checked { get; set; }
    public string Specialty { get; set; }
} 
```

以及我用作 EditorTemplate 的部分视图

```
@model Locum.UI.ViewModels.ViewModelCheckBox

@Html.HiddenFor(x => x.Id)        
@Html.CheckBoxFor(x => x.Checked)
@Html.LabelFor(x => x.Name, Model.Name)<br /> 
```

在我的视图中，我在两个标题下创建复选框，医学和外科

```
<h3>Medicine</h3>
foreach (var sub in Model.SpecialtyList)
{
if (sub.Specialty.Equals("Medicine"))
 {
    @Html.EditorFor(m => sub)
 }
}
<h3>Surgery</h3>

foreach (var sub in Model.SpecialtyList)
{
if (sub.Specialty.Equals("Surgery"))
 {
    @Html.EditorFor(m => sub)
 }

} 
```

然后在我的 HttpPost 控制器中，我尝试获取所选复选框的值，但 mode.SpecialtyList 始终为 Null

```
 [HttpPost]
    public ActionResult AssignSubSpecialties(ViewModelShiftSubSpecialties model)
    {
        foreach (var item in model.SpecialtyList)
        {
            if (item.Checked)
            {
                //do some logic
            }
        }

        return View();
    } 
```

有谁知道为什么 model.SpecialtyList 总是空的？

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:51:11.460

给复选框提供相同的名称，例如：

```
<input type="checkbox" name="ViewModelShiftSubSpecialties.SpecialtyList" .../> 
```

它会发布一个数组

# java - 查找 XML 文档中的所有命名空间声明 - xPath 1.0 与 xPath 2.0

> ID：10209372
> 
> 赞同：7
> 
> 时间：2012-04-18T12:28:46.157
> 
> 标签：java, xml, xpath, xml-namespaces, saxon

作为 Java 6 应用程序的一部分，我想在 XML 文档中查找所有名称空间声明，包括任何重复项。

**编辑**：根据 Martin 的要求，这是我正在使用的 Java 代码：

```
XPathFactory xPathFactory = XPathFactory.newInstance();
XPath xPath = xPathFactory.newXPath();
XPathExpression xPathExpression = xPathExpression = xPath.compile("//namespace::*"); 
NodeList nodeList = (NodeList) xPathExpression.evaluate(xmlDomDocument, XPathConstants.NODESET); 
```

假设我有这个 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns:ele="element.com" xmlns:att="attribute.com" xmlns:txt="textnode.com">
    <ele:one>a</ele:one>
    <two att:c="d">e</two>
    <three>txt:f</three>
</root> 
```

**为了查找所有命名空间声明，我使用 xPath 1.0**将此 xPath 语句应用于 XML 文档：

```
//namespace::* 
```

它找到了 4 个命名空间声明，这是我所期望（和希望）的：

```
/root[1]/@xmlns:att - attribute.com
/root[1]/@xmlns:ele - element.com
/root[1]/@xmlns:txt - textnode.com
/root[1]/@xmlns:xml - http://www.w3.org/XML/1998/namespace 
```

但是，如果我改为**使用 xPath 2.0**，那么我会得到 16 个命名空间声明（之前的每个声明 4 次），这不是我所期望的（或不希望的）：

```
/root[1]/@xmlns:xml - http://www.w3.org/XML/1998/namespace
/root[1]/@xmlns:att - attribute.com
/root[1]/@xmlns:ele - element.com
/root[1]/@xmlns:txt - textnode.com
/root[1]/@xmlns:xml - http://www.w3.org/XML/1998/namespace
/root[1]/@xmlns:att - attribute.com
/root[1]/@xmlns:ele - element.com
/root[1]/@xmlns:txt - textnode.com
/root[1]/@xmlns:xml - http://www.w3.org/XML/1998/namespace
/root[1]/@xmlns:att - attribute.com
/root[1]/@xmlns:ele - element.com
/root[1]/@xmlns:txt - textnode.com
/root[1]/@xmlns:xml - http://www.w3.org/XML/1998/namespace
/root[1]/@xmlns:att - attribute.com
/root[1]/@xmlns:ele - element.com
/root[1]/@xmlns:txt - textnode.com 
```

即使我使用 xPath 语句的非缩写版本，也会看到同样的差异：

```
/descendant-or-self::node()/namespace::* 
```

在 oXygen 中测试的各种 XML 解析器（LIBXML、MSXML.NET、Saxon）中都可以看到它。（**编辑：**正如我稍后在评论中提到的，这种说法是不正确的。虽然我认为我正在测试各种 XML 解析器，但我真的不是。）

**问题一：** 为什么从 xPath 1.0 到 xPath 2.0 的区别？

**问题2：** 使用 xPath 2.0 获得预期结果是否可能/合理？

提示：使用`distinct-values()`xPath 2.0 中的函数**不会**返回所需的结果，因为我想要所有命名空间声明，即使同一个命名空间被声明了两次。例如，考虑这个 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <bar:one xmlns:bar="http://www.bar.com">alpha</bar:one>
    <bar:two xmlns:bar="http://www.bar.com">bravo</bar:two>
</root> 
```

期望的结果是：

```
/root[1]/@xmlns:xml - http://www.w3.org/XML/1998/namespace
/root[1]/bar:one[1]/@xmlns:bar - http://www.bar.com
/root[1]/bar:two[1]/@xmlns:bar - http://www.bar.com 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T17:22:17.330

我认为这将获得所有命名空间，没有任何重复：

```
for $i in 1 to count(//namespace::*) return 
if (empty(index-of((//namespace::*)[position() = (1 to ($i - 1))][name() = name((//namespace::*)[$i])], (//namespace::*)[$i]))) 
then (//namespace::*)[$i] 
else () 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T13:07:02.813

> 为了查找所有命名空间声明，我使用 xPath 1.0 将此 xPath 语句应用于 XML 文档：
> 
> ```
> //namespace::* It finds 4 namespace declarations, which is what I expect (and desire):
> 
> /root[1]/@xmlns:att - attribute.com
> /root[1]/@xmlns:ele - element.com 
> /root[1]/@xmlns:txt - textnode.com 
> /root[1]/@xmlns:xml - http://www.w3.org/XML/1998/namespace 
> ```

**您正在使用不兼容的（有缺陷的）XPath 1.0 实现**。

**使用我拥有的所有 XSLT 1.0 处理器，我得到了不同且正确的结果。此转换（仅评估 XPath 表达式并为每个选定的命名空间节点打印一行）：**

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:for-each select="//namespace::*">
       <xsl:value-of select="concat(name(), ': ', ., '&#xA;')"/>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root xmlns:ele="element.com" xmlns:att="attribute.com" xmlns:txt="textnode.com">
    <ele:one>a</ele:one>
    <two att:c="d">e</two>
    <three>txt:f</three>
</root> 
```

**产生正确的结果**：

```
xml: http://www.w3.org/XML/1998/namespace
ele: element.com
att: attribute.com
txt: textnode.com
xml: http://www.w3.org/XML/1998/namespace
ele: element.com
att: attribute.com
txt: textnode.com
xml: http://www.w3.org/XML/1998/namespace
ele: element.com
att: attribute.com
txt: textnode.com
xml: http://www.w3.org/XML/1998/namespace
ele: element.com
att: attribute.com
txt: textnode.com 
```

**使用所有这些 XSLT 1.0 和 XSLT 2.0 处理器**：

MSXML3、MSXML4、MSXML6、.NET XslCompiledTransform、.NET XslTransform、Altova (XML SPY)、Saxon 6.5.4、Saxon 9.1.07、XQSharp。

**这是一个简短的 C# 程序，它确认在 .NET 中选择的节点数为 16：**

```
namespace TestNamespaces
{
    using System;
    using System.IO;
    using System.Xml.XPath;

    class Test
    {
        static void Main(string[] args)
        {
            string xml =
@"<root xmlns:ele='element.com' xmlns:att='attribute.com' xmlns:txt='textnode.com'>
    <ele:one>a</ele:one>
    <two att:c='d'>e</two>
    <three>txt:f</three>
</root>";
            XPathDocument doc = new XPathDocument(new StringReader(xml));

            double count = 
              (double) doc.CreateNavigator().Evaluate("count(//namespace::*)");

            Console.WriteLine(count);
        }
    }
} 
```

**结果是**：

`16`.

**更新**：

这是一个 XPath 2.0 表达式，它只查找“不同的”命名空间节点并为每个节点生成一行名称 - 值对：

```
for $i in distinct-values(
             for $ns in //namespace::*
               return
                  index-of(
                           (for $x in //namespace::*
                             return
                                concat(name($x), ' ', string($x))

                            ),
                            concat(name($ns), ' ', string($ns))
                          )
                          [1]
                                                  )
  return
    for $x in (//namespace::*)[$i]
     return
        concat(name($x), ' :', string($x), '&#xA;') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T16:15:54.737

正如前面的线程所指出的，`//namespace::*`将根据 XPath 1.0 和 XPath 2.0 实现返回所有命名空间节点，其中有 16 个。如果您发现没有正确实现规范的实现，我不会感到惊讶。

使用 XPath 1.0 或 XPath 2.0 查找所有命名空间声明（与命名空间节点不同）通常是不可能的，因为以下两个文档在数据模型级别被认为是等效的：

文件 A：

```
<a xmlns="one">
  <b/>
</a> 
```

文件 B：

```
<a xmlns="one">
  <b xmlns="one"/>
</a> 
```

但是，如果我们将“重要命名空间声明”定义为存在于子元素上但不存在于其父元素上的命名空间，那么您可以尝试以下 XPath 2.0 表达式：

```
for $e in //* return
  for $n in $e/namespace::* return
     if (not(some $p in $n/../namespace::* satisfies ($p/name() eq $e/name() and string($p) eq string($n)))) then concat($e/name(), '->', $n/name(), '=', string($n)) else () 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T16:02:01.873

这是我使用 .NET `XPathDocument`（XSLT/XPath 1.0 数据模型）、`XmlDocument`（DOM 数据模型）和 MSXML 6 的 DOM 的 XPath 1.0 实现的结果；针对您的示例 XML 文档运行的测试代码是

```
 Console.WriteLine("XPathDocument:");
    XPathDocument xpathDoc = new XPathDocument("../../XMLFile4.xml");
    foreach (XPathNavigator nav in xpathDoc.CreateNavigator().Select("//namespace::*"))
    {
        Console.WriteLine("Node type: {0}; name: {1}; value: {2}.", nav.NodeType, nav.Name, nav.Value);
    }
    Console.WriteLine();

    Console.WriteLine("DOM XmlDocument:");
    XmlDocument doc = new XmlDocument();
    doc.Load("../../XMLFile4.xml");
    foreach (XmlNode node in doc.SelectNodes("//namespace::*"))
    {
        Console.WriteLine("Node type: {0}; name: {1}; value: {2}.", node.NodeType, node.Name, node.Value);
    }
    Console.WriteLine();

    Console.WriteLine("MSXML 6 DOM:");
    dynamic msxmlDoc = Activator.CreateInstance(Type.GetTypeFromProgID("Msxml2.DOMDocument.6.0"));
    msxmlDoc.load("../../XMLFile4.xml");
    foreach (dynamic node in msxmlDoc.selectNodes("//namespace::*"))
    {
        Console.WriteLine("Node type: {0}; name: {1}; value: {2}.", node.nodeType, node.name, node.nodeValue);
    } 
```

它的输出是

```
XPathDocument:
Node type: Namespace; name: txt; value: textnode.com.
Node type: Namespace; name: att; value: attribute.com.
Node type: Namespace; name: ele; value: element.com.
Node type: Namespace; name: xml; value: http://www.w3.org/XML/1998/namespace.
Node type: Namespace; name: txt; value: textnode.com.
Node type: Namespace; name: att; value: attribute.com.
Node type: Namespace; name: ele; value: element.com.
Node type: Namespace; name: xml; value: http://www.w3.org/XML/1998/namespace.
Node type: Namespace; name: txt; value: textnode.com.
Node type: Namespace; name: att; value: attribute.com.
Node type: Namespace; name: ele; value: element.com.
Node type: Namespace; name: xml; value: http://www.w3.org/XML/1998/namespace.
Node type: Namespace; name: txt; value: textnode.com.
Node type: Namespace; name: att; value: attribute.com.
Node type: Namespace; name: ele; value: element.com.
Node type: Namespace; name: xml; value: http://www.w3.org/XML/1998/namespace.

DOM XmlDocument:
Node type: Attribute; name: xmlns:txt; value: textnode.com.
Node type: Attribute; name: xmlns:att; value: attribute.com.
Node type: Attribute; name: xmlns:ele; value: element.com.
Node type: Attribute; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespa
ce.
Node type: Attribute; name: xmlns:txt; value: textnode.com.
Node type: Attribute; name: xmlns:att; value: attribute.com.
Node type: Attribute; name: xmlns:ele; value: element.com.
Node type: Attribute; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespa
ce.
Node type: Attribute; name: xmlns:txt; value: textnode.com.
Node type: Attribute; name: xmlns:att; value: attribute.com.
Node type: Attribute; name: xmlns:ele; value: element.com.
Node type: Attribute; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespa
ce.
Node type: Attribute; name: xmlns:txt; value: textnode.com.
Node type: Attribute; name: xmlns:att; value: attribute.com.
Node type: Attribute; name: xmlns:ele; value: element.com.
Node type: Attribute; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespa
ce.

MSXML 6 DOM:
Node type: 2; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespace.
Node type: 2; name: xmlns:ele; value: element.com.
Node type: 2; name: xmlns:att; value: attribute.com.
Node type: 2; name: xmlns:txt; value: textnode.com.
Node type: 2; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespace.
Node type: 2; name: xmlns:ele; value: element.com.
Node type: 2; name: xmlns:att; value: attribute.com.
Node type: 2; name: xmlns:txt; value: textnode.com.
Node type: 2; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespace.
Node type: 2; name: xmlns:ele; value: element.com.
Node type: 2; name: xmlns:att; value: attribute.com.
Node type: 2; name: xmlns:txt; value: textnode.com.
Node type: 2; name: xmlns:xml; value: http://www.w3.org/XML/1998/namespace.
Node type: 2; name: xmlns:ele; value: element.com.
Node type: 2; name: xmlns:att; value: attribute.com.
Node type: 2; name: xmlns:txt; value: textnode.com. 
```

所以这肯定不是 XPath 1.0 与 XPath 2.0 的问题。我认为您看到的问题是将具有命名空间节点的 XPath 数据模型映射到具有属性节点的 DOM 模型的缺点。更熟悉 Java XPath API 的人需要告诉您，您看到的行为是否正确地依赖于实现，因为 API 规范对于将 XPath 命名空间轴映射到 DOM 模型的情况不够精确，或者它是否是一个错误。

# internet-explorer - 使用 IE 时文件访问异常

> ID：10209381
> 
> 赞同：0
> 
> 时间：2012-04-18T12:29:18.893
> 
> 标签：internet-explorer, permissions, io

当使用 IE 浏览器并尝试使用 File.SaveAs 方法上传文件时，我收到**拒绝访问**错误，但在 Chrome 浏览器中没有任何问题。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:13:59.407

这是服务器问题而不是客户端问题..

# c# - 检查 Ajax 请求

> ID：10209382
> 
> 赞同：1
> 
> 时间：2012-04-18T12:29:31.697
> 
> 标签：c#, javascript, ajax, httprequest

我研究了如何检查是否通过 C# 中的 AJAX 发送请求，但它似乎对我不起作用。我的代码如下。我使用一种方法在客户端 AJAX 页面（在我的情况下，正在使用 activeXobject）。ajax 页面正在检查 ajax 属性服务器端的请求，但 X-Requested-With 属性均未返回任何内容（打印时出现空白）。想法？

Ajax 方法 (Javascript)

```
/*
* Ajax page loads with url
* @param url : URL to call for ajax page load
* @param element : Element ID to be updated
*/
function ajax(url, element) {
    UtilLogger.log(HtmlLogger.INFO, "-AJAX Call for " + url + " in " + element + "-");
    var ajx;
    if (window.HXMLHttpRequest) {
        UtilLogger.log(HtmlLogger.FINE, "Using XMLHttpRequest");
        ajx = new XMLHttpRequest();
    }
    else {
        UtilLogger.log(HtmlLogger.FINE, "Using ActiveXObject");
        ajx = new ActiveXObject("Microsoft.XMLHTTP");
    }
    ajx.open("GET", url, true);
    ajx.send();
    ajx.onreadystatechange = function () {
        if (ajx.readyState == 4 && ajx.status == 200) {
            document.getElementById(element).innerHTML = ajx.responseText;
        }
        else if (ajx.readyState == 4 && ajx.status == 400) {
            alert("Page Error. Please refresh and try again.");
        }
        else if (ajx.readyState == 4 && ajx.status == 500) {
            alert("Server Error. Please refresh and try again.");
        }
    }
    UtilLogger.log(HtmlLogger.INFO, "-END AJAX Call for " + url + " in " + element + "-");
} 
```

Ajax 登录检查 (C#)

```
/* Checks for ajax request validity
 * @param HttpResponse resp : response to redirect if not ajax request
 * @param HttpRequest req : request to check for ajax
 */
public static void checkAjax(HttpResponse resp, HttpRequest req)
{
    if(req == null || 
        (req["X-Requested-With"] != "XMLHttpRequest" && 
        (req.Headers != null && req.Headers["X-Requested-With"] != "XMLHttpRequest"))){
           // resp.Redirect("./ajaxerror.aspx");
            resp.Write(req["X-Requested-With"] + ":" + req.Headers["X-Requested-With"]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:45:41.393

您的客户端请求不会自动向您的服务器提供任何“X-Requested-With”标头或查询参数（但某些框架（如 Microsoft AJAX）会提供）。AJAX 调用与任何 HTTP 请求一样工作，以添加一些标头：

```
xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"); 
```

# asp.net-mvc-3 - 将自定义路由迁移到 ASP.NET MVC 自定义路由以支持 List

> ID：10209384
> 
> 赞同：2
> 
> 时间：2012-04-18T12:29:34.523
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我在基于 Django 的 Web 应用程序中有一个类似于以下内容的 URL：

```
/market/prices/2011-05-01/min/stocks/msft/dell/appl/ 
```

该应用程序正在用 ASP.NET MVC 3 重写。**我需要维护 URL**。

问题的症结在于我支持由正斜杠分隔的多个股票代码符号。

我想要一个看起来像这样的自定义路线：

```
routes.MapRoute(
    "Stocks",
    "{queryDate}/{minOrMax}/stocks/{listOfStocksSeparatedByForwardSlash}",
    new { controller = "Market", action = "Prices" }
); 
```

控制器看起来像：

```
public ActionResult Prices(string queryDate, string minOrMax, ICollection<string> listOfStocksSeparatedByForwardSlash) {
    var model = repository.List(queryDate, minOrMax, listOfStocksSeparatedByForwardSlash);
    return View(model );
} 
```

我目前的解决方案如下：

```
routes.MapRoute(
    "Stocks",
    "{queryDate}/{minOrMax}/stocks/{*listOfStocksSeparatedByForwardSlash}",
    new { controller = "Market", action = "Prices" }
);

public ActionResult Prices(string queryDate, string minOrMax, string listOfStocksSeparatedByForwardSlash) {
    var list = listOfStocksSeparatedByForwardSlash.Split('/').ToList();
    var model = repository.List(queryDate, minOrMax, list);
    return View(model );
} 
```

虽然这可行，但我很想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:30:55.257

好的，这是一个选项，尽管我认为您的方法更容易。

您可以提供附加到路由的 RouteHandler，如下所示：

```
 routes.MapRoute(
    name: "Test",
    url: "Test/{someDate}/{*tickerSymbols}",
    defaults: new { controller = "Home", action = "Test" }).RouteHandler = new SlashSeparatedTrailingParametersRouteHandler("tickerSymbols", "tickers"); 
```

路由处理程序是

```
 public class SlashSeparatedTrailingParametersRouteHandler : IRouteHandler
{
    private readonly string catchallParameterName;
    private readonly string actionTargetParameter;

    public SlashSeparatedTrailingParametersRouteHandler(string catchallParameterName, string actionTargetParameter)
    {
        this.catchallParameterName = catchallParameterName;
        this.actionTargetParameter = actionTargetParameter;
    }

    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        if (requestContext == null)
        {
            throw new ArgumentNullException("requestContext");
        }

        IRouteHandler handler = new MvcRouteHandler();
        var vals = requestContext.RouteData.Values;
        vals[this.actionTargetParameter] = vals[this.catchallParameterName].ToString().Split('/');
        return handler.GetHttpHandler(requestContext);
    }
} 
```

如果这是您的控制器操作：

```
 [HttpGet]
public ActionResult Test(DateTime someDate, string[] tickers)
{
    if (tickers == null)
    {
        throw new ArgumentNullException("tickers");
    }

    return Content(string.Format("{0} and {1}", someDate, tickers.Length.ToString(CultureInfo.InvariantCulture)));
} 
```

这是你的帖子：

```
 http://localhost/Test/12-06-2012/Foo/Bar 
```

那么你的输出是：

```
 12/6/2012 12:00:00 AM and 2 
```

在优雅方面，这改进了 action 方法的参数，但代价是必须编写自己的路由处理程序。

# mysql - MySQL 选择和限制

> ID：10209388
> 
> 赞同：0
> 
> 时间：2012-04-18T12:29:53.020
> 
> 标签：mysql, select, limit

我有一张桌子

```
id    ip
1     127.0.0.1
2     127.0.0.1
3     127.0.0.1
4     192.168.2.2
5     192.168.70.1
6     217.11.24.65 
```

我需要从 3 个 ips 获取行，即如果我有限制 3，我必须获得**1、2、3、4、5**

如果限制 2 - 1,2,3,4

即受唯一IP限制

```
SELECT id FROM ips LIMIT 3 // returns 1,2,3 but i want 1,2,3,4,5 
```

抱歉英语不好，感谢理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:33:51.833

```
SELECT id
FROM ips
WHERE ip IN (SELECT DISTINCT ip FROM ips ORDER BY id LIMIT 3) 
```

由于 MySQL 5.5 还不支持`LIMIT`inside of `ANY`，这里有一个简单的解决方法：

```
SELECT id
FROM ips
WHERE ip IN (SELECT * FROM (SELECT DISTINCT ip FROM ips ORDER BY id LIMIT 3) alias) 
```

# zend-framework - Zend Registry 是如何工作的

> ID：10209389
> 
> 赞同：3
> 
> 时间：2012-04-18T12:29:54.393
> 
> 标签：zend-framework

我想知道 Zend_Registry 是否使用 phpMemory、会话或其他方法。

这个问题更多的是我的好奇。

```
Zend_Registry::set('test', array()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T12:43:06.780

Zend_Registry 是**`static`** 存储数组的类型变量的包装器。

来自维基百科的静态变量定义

> 在计算机编程中，静态变量是静态分配的变量——它的生命周期贯穿程序的整个运行。

类似地，存储在 Zend_Registry 中的变量会扩展到整个程序运行。

一个简单的 My Registry 类

```
 class My_Registry
    {
    static $storage;

   public static function set($key,$value)
    {
    self::$storage[$key] = $value;
    }

 public static function get($key)
    {
    return self::$storage[$key];
    }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:34:50.647

`Zend_Registry`几乎只是一个数组（它继承自`ArrayObject`）。它不提供持久存储，因此无需使用会话或文件。

# android - Android中的Intent.EXTRA_SUBJECT多个值

> ID：10209391
> 
> 赞同：0
> 
> 时间：2012-04-18T12:30:04.457
> 
> 标签：android, arrays, email, android-intent

我想在文本消息正文中显示多个值，但是即使 textArray 有值，下面的代码也不显示正文消息。有没有办法通过循环向电子邮件正文添加值？

```
 public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent sharingIntent = new Intent(Intent.ACTION_SEND);
            sharingIntent.setType("text/html");
            sharingIntent.putExtra(Intent.EXTRA_SUBJECT, "Example");

            int sizeOfArray = list.size();
            String textArray [] = new String[sizeOfArray];

            for(int i = 0;sizeOfArray > i;i++)
            {
                HashMap<String, String> arrayString = list.get(i);
                String user = arrayString.get("user");
                String book = arrayString.get("book");
                textArray[i] = user + " - " + book;
            }

            sharingIntent.putExtra(Intent.EXTRA_TEXT, textArray);
            startActivity(Intent.createChooser(sharingIntent,"Share using"));
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:40:25.040

很难获得有关 Intent Receiver 期望作为额外值的正确文档，但我很确定您需要将 a`String`而不是 a传递`String[]`给 putExtra，因为 Receiver 最终会将值转换为 a `String`，因此更好地控制那。

话虽如此，您对循环的实现很奇怪。你真的有一个`HashMap<String, String>`作为输入的列表吗？

我会做 ：

```
StringBuffer sb = new StringBuffer();
for(HashMap<String, String> item: list){
    String user = item.get("user");
    String book = item.get("book");
    sb.append(user + " - " + book+", ");
}
String value = sb.substring(0, Math.max(0,sb.length()-2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:40:53.240

Intent.EXTRA_TEXT 根据文档需要 CharSequence：http: [//developer.android.com/reference/android/content/Intent.html#EXTRA_TEXT](http://developer.android.com/reference/android/content/Intent.html#EXTRA_TEXT)

我猜当你传入一个数组时，接收活动不知道如何处理它，只是跳过它。

尝试加入您的数组值并将它们作为字符串传递。

```
String arg = org.apache.commons.lang.StringUtils.join (textArray, '\n');
sharingIntent.putExtra(Intent.EXTRA_TEXT, arg); 
```

# drupal - 编辑 include/mail.inc，在那里添加我自己的 SMTP 设置

> ID：10209397
> 
> 赞同：0
> 
> 时间：2012-04-18T12:30:19.313
> 
> 标签：drupal

以下函数包含在 Drupal6 的 include/mail.inc 中，它使用埋在名为“php.ini”的文件中的默认 SMTP 设置来发送邮件。

```
function drupal_mail_send($message) {
  // Allow for a custom mail backend.
  if (variable_get('smtp_library', '') && file_exists(variable_get('smtp_library', ''))) {
    include_once './'. variable_get('smtp_library', '');
    return drupal_mail_wrapper($message);
  }
  else {
    $mimeheaders = array();
    foreach ($message['headers'] as $name => $value) {
      $mimeheaders[] = $name .': '. mime_header_encode($value);
    }
    return mail(
      $message['to'],
      mime_header_encode($message['subject']),
      // Note: e-mail uses CRLF for line-endings, but PHP's API requires LF.
      // They will appear correctly in the actual e-mail that is sent.
      str_replace("\r", '', $message['body']),
      // For headers, PHP's API suggests that we use CRLF normally,
      // but some MTAs incorrecly replace LF with CRLF. See #234403.
      join("\n", $mimeheaders)
    );
  }
} 
```

但是我使用共享主机，因此我无法编辑 php.ini，我想编辑上面的函数“drupal_mail_send”，将下面的代码添加到该函数中，以便它可以绕过 PHP mail() 函数并直接发送电子邮件到我最喜欢的 SMTP 服务器。

```
include('Mail.php');

$recipients = array( 'someone@example.com' ); # Can be one or more emails

$headers = array (
    'From' => 'someone@example.com',
    'To' => join(', ', $recipients),
    'Subject' => 'Testing email from project web',
);

$body = "This was sent via php from project web!\n";

$mail_object =& Mail::factory('smtp',
    array(
        'host' => 'prwebmail',
        'auth' => true,
        'username' => 'YOUR_PROJECT_NAME',
        'password' => 'PASSWORD', # As set on your project's config page
        #'debug' => true, # uncomment to enable debugging
    ));

$mail_object->send($recipients, $headers, $body); 
```

你能写下修改后的代码供我参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:08:40.523

中的代码`drupal_mail_send`是 Drupal 核心功能的一部分，不应直接更改，因为您的更改可能会在您更新 Drupal 时被覆盖。

Drupal 核心文件的修改通常被 Drupal 社区称为“黑客核心”，并且在很大程度上[不鼓励](http://drupal.org/best-practices/do-not-hack-core)。

Drupal 已经有许多可用的模块可以帮助您。看：

[http://drupal.org/project/phpmailer](http://drupal.org/project/phpmailer)模块：

> 添加 SMTP 支持以使用 PHPMailer 库发送电子邮件。随附有关如何使用 Google Mail 作为邮件服务器的详细配置说明。

[http://drupal.org/project/smtp](http://drupal.org/project/smtp)模块：

> 这个模块允许 Drupal 绕过 PHP 的 mail() 函数并将电子邮件直接发送到 SMTP 服务器。

# java - Hazelcast ：从 hazelcast 集群中关闭特定成员

> ID：10209399
> 
> 赞同：0
> 
> 时间：2012-04-18T12:30:39.483
> 
> 标签：java, spring-mvc, distributed-caching, hazelcast

我正在使用带有 spring MVC 的 hazelcast 并使用上下文加载实例。现在由于弹簧代码中的错误，有时我的上下文会重新加载。

每当 spring 上下文重新加载时，hazelcast 都会在其集群中创建一个新成员。我正在努力解决春季的错误，但直到我想知道如何在不影响其他成员的情况下关闭 hazelcast 集群的特定成员。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:57:48.623

我最近遇到了这个问题。我唯一的解决方案是创建一个与 spring servlet 调度程序关联的 servlet 上下文侦听器，并在“contextDextroyed”事件上关闭 hazelcast 实例。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:31:15.113

您需要做的就是在上下文初始化时创建一个关闭钩子，并在上下文退出时调用关闭方法（请阅读手册）。

# c - 在 C 中将字符串添加到文本文件

> ID：10209400
> 
> 赞同：0
> 
> 时间：2012-04-18T12:30:41.163
> 
> 标签：c, string, file

我正在制作一个购物清单程序，我想包含一个用户输入字符串，将其放在文本文件的下一个可用行中。现在这会将字符串添加到文件中，但随后会在多个空格中放入随机字符，然后，如果我输入其他内容，它将不会在下一行。

```
void AddToFile(FILE *a) {
    char addItem[20];
    printf("Enter item: ");
    scanf("%s", &addItem);
    fwrite(addItem, sizeof(addItem), 1, a);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:32:02.723

这一行应该是：

```
 // strlen instead of sizeof
    fwrite(addItem, strlen(addItem), sizeof(char), a); 
```

您的代码始终写入 20 个字符，而不是字符串的实际字符数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T12:37:41.187

除了 pivotnig 声明的更正之外，`fwrite()`不会将换行符写入文件。在 之后写入新行`fwrite()`或将其附加到.`addItem`之前的缓冲区`fwrite()`。

您应该通过限制复制到的字符数来防止缓冲区溢出`buf`：

```
scanf("%19s", addItem); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:37:41.893

在当前示例中，如果您尝试编写超过 20 个字符的项目，您将遇到麻烦，因为 scanf 将覆盖未分配的内存。稍微改进的版本是：

```
scanf("%19s",&addItem); 
```

这样，至少你不会覆盖随机内存。

编辑：感谢杰克指出 \0 也必须写。

# android - 混淆代码

> ID：10209404
> 
> 赞同：9
> 
> 时间：2012-04-18T12:30:57.857
> 
> 标签：android, obfuscation, proguard

我被要求为 android 创建一个简单的应用程序。事实上，第一个我会得到报酬，所以我真的不想把它搞砸:)。其中一项要求是必须对代码进行混淆处理。

我了解了混淆的一般概念，但我不想犯任何愚蠢的错误。

我究竟要做什么才能使代码混淆？将其作为发布版本导出是否可以完成这项工作，还是需要一些其他步骤？任何评论也表示赞赏。

PS。如果重要的话，我正在使用 Eclipse。

**编辑**

从anwsers中建议的文章中：

> 要启用 ProGuard 使其作为 Ant 或 Eclipse 构建的一部分运行，请在 /project.properties 文件中设置 proguard.config 属性。路径可以是绝对路径，也可以是相对于项目根目录的路径。
> 
> 如果您将 proguard.cfg 文件保留在其默认位置（项目的根目录），您可以像这样指定它的位置：
> 
> proguard.config=proguard.cfg

我的项目目录中确实有**project.properties**文件。但我没有**proguard.cfg**文件。相反，我有**proguard-project.txt**文件。估计是换了

项目属性：

> 此文件由 Android 工具自动生成。请勿修改此文件——您的更改将被删除！
> 
> 必须在版本控制系统中检查此文件。
> 
> 要自定义 Ant 构建系统使用的属性，请编辑“ant.properties”，并覆盖值以使脚本适应您的项目结构。
> 
> 要使 ProGuard 能够缩小和混淆您的代码，请取消注释（可用属性：sdk.dir、user.home）：
> 
> proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt
> 
> 项目目标。目标=android-7

最初除了最后一行之外的所有内容都被注释掉了。

在**proguard-project.txt**中，所有内容都被注释掉了。

我想我在这里迷路了，所以如果有人可以逐步告诉我应该做什么以及如何检查它是否真的有效，我将非常感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T01:46:02.810

官方开发网站上的文章已过时。从 SDK Tools r17 开始，他们改变了 ProGuard 配置的工作方式。基本上，他们将以前的文件拆分`proguard.cfg`为两个文件（并且还简单地将它们制作为 .txt 文件）：`proguard-android.txt`和`proguard-project.txt`. `proguard-android.txt`驻留在您的`{SDK dir}\tools\proguard`目录中，并且位于您`proguard-project.txt`的每个项目目录中。

他们拆分文件，以便 Android 团队认为非常标准的一般配置/标志将在`proguard-android.txt`文件中，并且可以随每个 SDK 工具修订版进行更新（基本上是静默更新）。然后任何开发人员/项目特定的标志，开发人员可以添加到`proguard-project.txt`文件中。

这就是为什么您注意到`proguard-project.txt`文件中的所有内容都被注释掉的原因，因为通常大多数人没有任何项目特定需求，*他们只想使用标准设置运行 ProGuard 并完成它。*

供参考（一个很好的解释）：[http ://tools.android.com/recent/proguardimprovements](http://tools.android.com/recent/proguardimprovements)

**一步一步（每天：P）**

（使用 Eclipse IDE）启用 ProGuard 并仅使用**默认**设置进行收缩和混淆：

*   首先将您的 SDK 工具更新到最新版本（撰写本文时为 r19）
*   在`project.properties`取消注释的行中说：

> proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt

如果您在 r17 之前创建了项目，那么您可能看不到相同的内容。如果是这种情况，我建议您创建一个新的虚拟项目（在更新 SDK 工具之后）并复制`proguard-project.txt`和`project.properties`文件。

就是这样！ProGuard 现在将启用并运行，但**仅**在发布版本上运行（当您使用 Android 工具并导出已签名/未签名的 apk 时）。

当您进行发布构建时，您会注意到将在您的项目文件夹中创建一个新的 ProGuard 文件夹。在此文件夹中，您可以找到四个文件，其中包含保留或删除的类/方法等内容。另请注意，当您进行混淆时，您还将在出现错误时混淆您的堆栈跟踪。

**编辑：（9/4/12）**只是想更新这个答案以反映工具 r20 的变化。

Android 团队现在添加了一个额外的 proguard 配置文件。它是`proguard-android-optimize.txt`并且它也驻留在`{SDK dir}\tools\proguard`目录中。这个文件和原来的`proguard-android.txt`配置文件一样，**除了**它**开启了**proguard优化。

添加这个附加文件是为了方便那些想要打开优化的人（也许他们可以做一些事情，比如去除日志调用，这需要打开优化）。现在您可以简单地在文件中指向该文件，`project.properties`如下所示：

```
proguard.config=${sdk.dir}\tools\proguard\proguard-android-optimize.txt:proguard-project.txt 
```

和以前一样，不要尝试更改任何`proguard-android...`配置文件。任何项目特定的标志都应该`proguard-project.txt`放在项目文件夹中的文件中。

# javascript - 如何使用 jquery 删除除最后 2 个之外的所有类 div？

> ID：10209405
> 
> 赞同：5
> 
> 时间：2012-04-18T12:31:06.280
> 
> 标签：javascript, jquery, jquery-selectors

如何使用 jquery 删除除最后 2 个之外的所有类 div？

我有一组注释显示在 .comment_container 类中。当点击显示所有评论时，特定微博的所有评论列表会显示在默认显示的最近的 2 条评论之前。

但是，如果用户在单击查看所有评论之前键入评论，则此评论将添加到列表中，现在显示 3 个最近的评论。由于我设置了一些后端代码的方式，当单击显示所有链接时，它会导致最近的评论显示两次。

无需详细说明，但我决定做的是计算 div 总数，并从总数中删除除 2 之外的所有 div（列表中的最后 2 个是最新的）。

如何使用 jquery 实现这一点？

亲切的问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T12:37:05.373

使用 `slice()`（并感谢@Felix Kling 进行更新）：

```
$(".comment_container").slice(0, -2).remove(); 
```

但是，鉴于您对问题的描述，这听起来并不是最好的做法。您可能值得您开始一个关于您遇到的问题的新问题，其中包含有关您的代码的一些详细信息。

[有关slice()](http://api.jquery.com/slice/)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:37:08.880

您不想包含的最后两个 div 是否有 ID？

我相信你可以使用 jQuery`.not()`来删除最后两个 div 在你选择你是这样的选择器之后

`$('.comment_container').not('#lastDiv, #lastButone')`

然后你可以显示所有评论，但不是那些 2。

有关[.not()的更多信息](http://api.jquery.com/not/)

# java - File.getUsableSpace() 不返回与 Linux 中的“df”命令相同的值

> ID：10209411
> 
> 赞同：3
> 
> 时间：2012-04-18T12:31:27.513
> 
> 标签：java, linux

我想打印分区的所有可用空间的字节数，`File.getUsuableSpace()`但它返回的值不同于**df**命令（在 Linux 中）。

差别不大，但相差几兆字节。

可能是什么情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:33:37.800

您的 File 实例表示的文件是否与您正在运行 df 的文件位于同一分区上？

来自[文档：“返回](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getUsableSpace%28%29)**分区**上此虚拟机可用的字节数**：“返回此抽象路径名命名**

 **重点是我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:59:35.417

这只会给出可用空间，try`getFreeSpace()`会返回可用空间而不是可用空间。这适用于 Java 1.6，有关更多信息，请查看[File 类文档](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getFreeSpace%28%29)。**

# php - 如何将换行符转换为 \n

> ID：10209413
> 
> 赞同：5
> 
> 时间：2012-04-18T12:31:29.093
> 
> 标签：php, javascript

我有一个来自数据库的返回字符串。

返回字符串必须采用 javascript 格式。

```
<?php
    $db = "this is a line
           this is a new line";
?> 
```

我将如何将上述转换为：

```
<?php $db = "this is a line \n this is a new line"; ?> 
```

Javascript：

```
<script>
    var jdb = <?php echo $db; ?>
</script> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-18T12:35:17.813

试试这个（2014-11-08 更新）：

```
<?php

   $db = "this is a line
          this is a new line
          ";

?>
<script type="text/javascript">
  var jdb = <?php echo json_encode($db) ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T12:34:03.830

```
$db = preg_replace("/\n/m", '\n', $db); 
```

应该做的伎俩

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-18T21:21:36.633

要正确保留`\r`和`\n`换行符，您可以轻松使用[strtr](http://us2.php.net/strtr)。

```
$db = strtr( $db, array(  "\n" => "\\n",  "\r" => "\\r"  )); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T12:36:06.997

我不明白这一点，但你可以（通过添加反斜杠来转义换行符）

```
$db = str_replace("\n","\\n",$db); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T12:36:10.633

```
$db = str_replace("\r\n", "\\n", $db); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T12:34:56.450

我不确定我是否理解正确，因为 \n 是换行符！？

但您可能需要：

```
$db = str_replace("\r\n", "\n", $db); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T12:46:44.793

你想将它输出到 javascript...嗯，所以如果你想将它插入到 html 中，你可能想要这样的东西（测试运行）：

```
<div id="test"></div>
<script type="text/javascript">
<?php
  $string = "123
  456"; // or $string = "123\n456";
  $string = str_replace(array("\r\n","\n"),"\\\\n",$string);
  echo "document.getElementById('test').innerHTML = '".htmlentities($string)."';";
?>
</script> 
```

通过js输出`123\n 456`到div

如果你只是想在 js 中使用它，只需删除两个斜杠，使其在 php 中为“\n”，在 js 中为“\n”。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-04-19T06:24:07.420

您应该查看 nl2br()，它将所有新行转换为 HTML <br />。 [http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

# java - 如何使用离线和在线数据库创建java桌面应用程序，定期同步？

> ID：10209414
> 
> 赞同：5
> 
> 时间：2012-04-18T12:31:29.853
> 
> 标签：java, database

我想创建java桌面应用程序，它将它的数据离线存储在数据库中（不仅仅是一些配置文件）。当用户离线时，应用程序应该可以正常工作。当用户在线时，离线数据库应该能够与在线主数据库同步。

有什么想法可以使用哪些技术来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:13:05.857

这已经在 stackoverflow 上讨论了很多，它通常归结为：不要推出自己的解决方案 - 这是一个非常专业的领域 - 查找 SymmetricDS。它做你想做的事。

我最喜欢的讨论之一是[离线/在线数据同步策略](https://stackoverflow.com/questions/271610/strategy-for-offline-online-data-synchronization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:30:32.273

本地应用程序运行时，不仅要更改数据库，还要记录更改。当连接可用时，这些更改将发送到服务器。此外，应用程序接收存储在服务器上的记录更改（来自其他应用程序实例）。

主要问题是如何合并不同实例所做的更改。可以有 3 种变体：

1）每个应用程序实例只能修改整个数据库的私有部分。你很幸运，不需要合并，服务器只能存储日志，不能运行整个数据库。

2) 修改总是可以自动合并（例如，应用程序可以为一个公共变量添加一个值，但不能直接设置它）。服务器运行整个数据库，接受来自客户端的部分日志，生成自己的日志并将其发送给客户端。

3) 允许客户端进行任意修改。这会导致潜在的冲突。在发生冲突的情况下，应拒绝冲突更改之一。这意味着，如果客户端进行了本地修改，那么服务器稍后可能会拒绝该修改。用户界面必须反映这个问题。在其余部分，这与变体 2 类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:47:45.023

将可用的纯 java DB 实现之一用作本地 DB。使用任何其他数据库作为远程数据库。实现尝试连接到远程数据库并在失败时回退到本地数据库的逻辑。如果成功连接到远程数据库，则执行数据同步。

# java - Oracle ADF 安全应用程序出现 HTTP 401 错误

> ID：10209417
> 
> 赞同：2
> 
> 时间：2012-04-18T12:31:41.963
> 
> 标签：java, oracle-adf, http-status-code-401

我是 Oracle ADF 框架的新手。我使用 Weblogic 10.3.5.0 在 JDeveloper 11g R2 上进行开发。我开发了一个项目，如[Youtube 上](http://www.youtube.com/watch?v=mAWBezngA1s&list=UUDuJRHUKigQbAFMoewPZxzg&index=5&feature=plpp_video)的 Firebox 培训视频中所述。[你可以从这里](http://dl.dropbox.com/u/7799447/Proje.rar)下载我的项目

该视频是关于创建客户登录页面的。您必须创建登录、错误和目标页面。当您尝试打开目标页面登录页面时，您输入您的凭据。成功后，您应该被定向到目标页面。我使用支持 bean 来处理凭据，但响应页面提供的不是重定向到目标页面：

错误 401——未经授权来自 RFC 2068 超文本传输​​协议——HTTP/1.1：10.4.2 401 未经授权

而weblogic控制台这个错误：

```
 Target URL -- http://127.0.0.1:7101/Deneme-ViewController-context-root/faces/protectedPage.jspx
<ViewHandlerImpl> <_checkTimestamp> Apache Trinidad is running with time-stamp checking enabled. This should not be used in a production environment. See the org.apache.myfaces.trinidad.CHECK_FILE_MODIFICATION property in WEB-INF/web.xml
<UIXEditableValue> <_isBeanValidationAvailable> A Bean Validation provider is not present, therefore bean validation is disabled
<LifecycleImpl> <_handleException> ADF_FACES-60098:Faces lifecycle receives unhandled exceptions in phase RENDER_RESPONSE 6
java.lang.IllegalStateException: Cannot forward a response that is already committed
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:122)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at oracle.adfinternal.view.faces.config.rich.RecordRequestAttributesDuringDispatch.dispatch(RecordRequestAttributesDuringDispatch.java:44)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at org.apache.myfaces.trinidadinternal.context.FacesContextFactoryImpl$OverrideDispatch.dispatch(FacesContextFactoryImpl.java:167)
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:363)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at org.apache.myfaces.trinidadinternal.application.ViewDeclarationLanguageFactoryImpl$ChangeApplyingVDLWrapper.buildView(ViewDeclarationLanguageFactoryImpl.java:341)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._renderResponse(LifecycleImpl.java:982)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._executePhase(LifecycleImpl.java:334)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:232)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:313)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.adf.model.servlet.ADFBindingFilter.doFilter(ADFBindingFilter.java:173)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.adfinternal.view.faces.webapp.rich.RegistrationFilter.doFilter(RegistrationFilter.java:122)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
    at oracle.adfinternal.view.faces.activedata.AdsFilter.doFilter(AdsFilter.java:60)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl._doFilterImpl(TrinidadFilterImpl.java:293)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl.doFilter(TrinidadFilterImpl.java:199)
    at org.apache.myfaces.trinidad.webapp.TrinidadFilter.doFilter(TrinidadFilter.java:92)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:111)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:313)
    at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:413)
    at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:94)
    at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:161)
    at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:136)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
<Apr 18, 2012 3:21:24 PM EEST> <Error> <HTTP> <BEA-101020> <[ServletContext@28001210[app:Deneme module:Deneme-ViewController-context-root path:/Deneme-ViewController-context-root spec-version:2.5]] Servlet failed with Exception
java.lang.IllegalStateException: Cannot forward a response that is already committed
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:122)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at oracle.adfinternal.view.faces.config.rich.RecordRequestAttributesDuringDispatch.dispatch(RecordRequestAttributesDuringDispatch.java:44)
    Truncated. see log file for complete stacktrace
> 
<Apr 18, 2012 3:21:24 PM EEST> <Notice> <Diagnostics> <BEA-320068> <Watch 'UncheckedException' with severity 'Notice' on server 'DefaultServer' has triggered at Apr 18, 2012 3:21:24 PM EEST. Notification details: 
WatchRuleType: Log 
WatchRule: (SEVERITY = 'Error') AND ((MSGID = 'WL-101020') OR (MSGID = 'WL-101017') OR (MSGID = 'WL-000802') OR (MSGID = 'BEA-101020') OR (MSGID = 'BEA-101017') OR (MSGID = 'BEA-000802')) 
WatchData: DATE = Apr 18, 2012 3:21:24 PM EEST SERVER = DefaultServer MESSAGE = [ServletContext@28001210[app:Deneme module:Deneme-ViewController-context-root path:/Deneme-ViewController-context-root spec-version:2.5]] Servlet failed with Exception
java.lang.IllegalStateException: Cannot forward a response that is already committed
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:122)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at oracle.adfinternal.view.faces.config.rich.RecordRequestAttributesDuringDispatch.dispatch(RecordRequestAttributesDuringDispatch.java:44)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at org.apache.myfaces.trinidadinternal.context.FacesContextFactoryImpl$OverrideDispatch.dispatch(FacesContextFactoryImpl.java:167)
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:363)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at org.apache.myfaces.trinidadinternal.application.ViewDeclarationLanguageFactoryImpl$ChangeApplyingVDLWrapper.buildView(ViewDeclarationLanguageFactoryImpl.java:341)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._renderResponse(LifecycleImpl.java:982)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._executePhase(LifecycleImpl.java:334)
    at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:232)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:313)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.adf.model.servlet.ADFBindingFilter.doFilter(ADFBindingFilter.java:173)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.adfinternal.view.faces.webapp.rich.RegistrationFilter.doFilter(RegistrationFilter.java:122)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
    at oracle.adfinternal.view.faces.activedata.AdsFilter.doFilter(AdsFilter.java:60)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:468)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl._doFilterImpl(TrinidadFilterImpl.java:293)
    at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl.doFilter(TrinidadFilterImpl.java:199)
    at org.apache.myfaces.trinidad.webapp.TrinidadFilter.doFilter(TrinidadFilter.java:92)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:111)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:313)
    at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:413)
    at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:94)
    at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:161)
    at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:136)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
 SUBSYSTEM = HTTP USERID = <WLS Kernel> SEVERITY = Error THREAD = [ACTIVE] ExecuteThread: '6' for queue: 'weblogic.kernel.Default (self-tuning)' MSGID = BEA-101020 MACHINE = Metasis-PC TXID =  CONTEXTID = 922cea34c05f1394:4758d71c:136c5648195:-8000-0000000000000074 TIMESTAMP = 1334751684128  
WatchAlarmType: AutomaticReset 
WatchAlarmResetPeriod: 30000 
> 
<Apr 18, 2012 3:21:26 PM EEST> <Alert> <Diagnostics> <BEA-320016> <Creating diagnostic image in c:\users\metasis\appdata\roaming\jdeveloper\system11.1.2.1.38.60.81\defaultdomain\servers\defaultserver\adr\diag\ofm\defaultdomain\defaultserver\incident\incdir_39 with a lockout minute period of 1.> 
```

我的支持 bean java 代码：

```
public String doLogin() {
    String un = _username;
    byte[] pw = _password.getBytes();
    FacesContext ctx = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest)ctx.getExternalContext().getRequest();
    Subject mySubject;
    try {
        mySubject = Authentication.login(new URLCallbackHandler(un, pw));
        ServletAuthentication.runAs(mySubject, request);
        ServletAuthentication.generateNewSessionID(request);
        String loginUrl = "/adfAuthentication?success_url=/faces/protectedPage.jspx";
        HttpServletResponse response = (HttpServletResponse)ctx.getExternalContext().getResponse();
                    RequestDispatcher dispatcher = request.getRequestDispatcher(loginUrl);
                    dispatcher.forward(request, response);
        //response.sendRedirect(loginUrl);
    } catch (FailedLoginException e) {
        FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Invalid Username or Password", "Invalid Username or Password");
        ctx.addMessage(null, msg);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

在应用程序启动之前有一个有趣的错误代码：

```
[03:20:38 PM] Redeploying Application...
<CodebasePolicyHandler> <migrateDeploymentPolicies> Migration of codebase policy failed. Reason: oracle.security.jps.JpsException: java.lang.reflect.InvocationTargetException.
<AppPolicyHandler> <migrateAppPolicies> Migration of application policy failed. Reason: oracle.security.jps.JpsException: java.lang.reflect.InvocationTargetException.
[03:20:55 PM] Application Redeployed Successfully. 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T18:17:27.593

您的 jazn-data.xml 似乎已损坏，请按照[本文](http://udayarocks.wordpress.com/2012/09/06/how-to-fix-the-adf-security-error-jpsanonymousroleimpl-in-jdev-11-1-1-6-0/)中的步骤，特别是第 4 步，您应该没问题，我在本地环境中尝试过，从 xml 中删除匿名角色后它工作正常

# objective-c - 从当前日期减去 7 天

> ID：10209427
> 
> 赞同：131
> 
> 时间：2012-04-18T12:32:08.790
> 
> 标签：objective-c, ios, nsdate

看来我不能从当前日期减去 7 天。这就是我的做法：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
[offsetComponents setDay:-7];
NSDate *sevenDaysAgo = [gregorian dateByAddingComponents:offsetComponents toDate:[NSDate date] options:0]; 
```

SevenDaysAgo 获得与当前日期相同的值。

请帮忙。

编辑：在我的代码中，我忘记用正确的日期替换获取当前日期的变量。所以上面的代码是有效的。

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-04-22T12:56:55.423

**代码：**

```
NSDate *currentDate = [NSDate date];
NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
[dateComponents setDay:-7];
NSDate *sevenDaysAgo = [[NSCalendar currentCalendar] dateByAddingComponents:dateComponents toDate:currentDate options:0];
NSLog(@"\ncurrentDate: %@\nseven days ago: %@", currentDate, sevenDaysAgo);
[dateComponents release]; 
```

**输出：**

```
currentDate: 2012-04-22 12:53:45 +0000
seven days ago: 2012-04-15 12:53:45 +0000 
```

我完全同意 JeremyP 的观点。

BR。
尤金

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2015-02-17T18:26:18.177

如果您至少运行 iOS 8 或 OS X 10.9，还有一种更简洁的方法：

```
NSDate *sevenDaysAgo = [[NSCalendar currentCalendar] dateByAddingUnit:NSCalendarUnitDay
                                                                value:-7
                                                               toDate:[NSDate date]
                                                              options:0]; 
```

或者，使用 Swift 2：

```
let sevenDaysAgo = NSCalendar.currentCalendar().dateByAddingUnit(.Day, value: -7,
    toDate: NSDate(), options: NSCalendarOptions(rawValue: 0)) 
```

使用 Swift 3 及更高版本，它变得更加紧凑：

```
let sevenDaysAgo = Calendar.current.date(byAdding: .day, value: -7, to: Date()) 
```

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2012-04-18T12:36:23.877

使用 dateByAddingTimeInterval 方法：

```
NSDate *now = [NSDate date];
NSDate *sevenDaysAgo = [now dateByAddingTimeInterval:-7*24*60*60];
NSLog(@"7 days ago: %@", sevenDaysAgo); 
```

输出：

```
7 days ago: 2012-04-11 11:35:38 +0000 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2016-09-28T16:23:58.887

## 斯威夫特 3

```
Calendar.current.date(byAdding: .day, value: -7, to: Date()) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-01-09T05:34:31.143

# Swift 4.2 - 自我变异（更新）

如果原始发帖人已经有一个日期变量（更新/变异本身），这是原始发帖人一周前可以获得的另一种方式。

```
extension Date {
    mutating func changeDays(by days: Int) {
        self = Calendar.current.date(byAdding: .day, value: days, to: self)!
    }
} 
```

## 用法

```
var myDate = Date()       // Jan 08, 2019
myDate.changeDays(by: 7)  // Jan 15, 2019
myDate.changeDays(by: 7)  // Jan 22, 2019
myDate.changeDays(by: -1) // Jan 21, 2019 
```

### 或者

```
// Iterate through one week
for i in 1...7 {
    myDate.changeDays(by: i)
    // Do something
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-11-30T19:53:20.353

## Swift 运算符扩展：

```
extension Date {

    static func -(lhs: Date, rhs: Int) -> Date {
        return Calendar.current.date(byAdding: .day, value: -rhs, to: lhs)!
    }
} 
```

## 用法

```
let today = Date()
let sevenDayAgo = today - 7 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-09-23T20:13:25.467

dymv 的回答很好。这你可以在 swift 中使用

```
extension NSDate {    
    static func changeDaysBy(days : Int) -> NSDate {
        let currentDate = NSDate()
        let dateComponents = NSDateComponents()
        dateComponents.day = days
        return NSCalendar.currentCalendar().dateByAddingComponents(dateComponents, toDate: currentDate, options: NSCalendarOptions(rawValue: 0))!
    }
} 
```

你可以用

```
NSDate.changeDaysBy(-7) // Date week earlier
NSDate.changeDaysBy(14) // Date in next two weeks 
```

希望对 dymv 有所帮助并感谢

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-10-01T13:21:19.470

**Swift 4.2** iOS 11.x [Babec的](https://stackoverflow.com/users/2798882/babac)解决方案，纯Swift

```
extension Date {
  static func changeDaysBy(days : Int) -> Date {
    let currentDate = Date()
    var dateComponents = DateComponents()
    dateComponents.day = days
    return Calendar.current.date(byAdding: dateComponents, to: currentDate)!
  }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-06-25T15:59:55.537

原始接受答案的 Swift 3.0+ 版本

Date().addingTimeInterval(-7 * 24 * 60 * 60)

但是，这仅使用绝对值。在大多数情况下，使用日历答案可能更合适。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-11-25T05:46:52.623

**斯威夫特 5**

从当前日期添加或减去日期的函数。

```
func addOrSubtructDay(day:Int)->Date{
  return Calendar.current.date(byAdding: .day, value: day, to: Date())!
} 
```

现在调用函数

```
var dayAddedDate = addOrSubtructDay(7)
var daySubtractedDate = addOrSubtructDay(-7) 
```

*   添加日期传递预期日期值
*   减去传递负日值

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-07-27T09:19:56.920

斯威夫特 3：

对 Dov 答案的修改。

```
extension Date {

    func dateBeforeOrAfterFromToday(numberOfDays :Int?) -> Date {

        let resultDate = Calendar.current.date(byAdding: .day, value: numberOfDays!, to: Date())!
        return resultDate
    }
} 
```

用法：

```
let dateBefore =  Date().dateBeforeOrAfterFromToday(numberOfDays : -7)
let dateAfter = Date().dateBeforeOrAfterFromToday(numberOfDays : 7)
print ("dateBefore : \(dateBefore), dateAfter :\(dateAfter)") 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2017-01-03T15:21:42.207

斯威夫特 3.0

这是功能，您可以减少天、月、日，例如这里，我已将当前系统日期的年份减少了 100 年，您可以对天、月执行此操作，也只需设置计数器并将其存储在array ，你可以在任何地方使用这个数组然后 func currentTime()

```
 {

    let date = Date()
    let calendar = Calendar.current
    var year = calendar.component(.year, from: date)
    let month = calendar.component(.month, from: date)
    let  day = calendar.component(.day, from: date)
    let pastyear = year - 100
    var someInts = [Int]()
    printLog(msg: "\(day):\(month):\(year)" )

    for _ in pastyear...year        {
        year -= 1
                     print("\(year) ")
        someInts.append(year)
    }
          print(someInts)
        } 
```

# html - 标记列中最高值的标签

> ID：10209429
> 
> 赞同：1
> 
> 时间：2012-04-18T12:32:10.617
> 
> 标签：html, bash, awk, sed, tabular

鉴于下表，我想分别总结每一行，找出总和值的最高值和第二高值，并在相应的行中放置一个标记（例如，一个 html 标记，用于第一个总和值：`<b>num1</b>`以及第二高的值：）`<i>num2</i>`：

```
cat input.txt
0.743745 0.00145661
0.740159 0.00208729
0.743907 0.0019944
0.769515 0.0051214
0.768735 0.00453603
0.755945 0.00203796 
```

如果我们总结输入文件的每一行，我们将获得以下值：

```
0.7452
0.7422
0.7459
0.7746
0.7733
0.7580 
```

给定这些计算值，所需的输出应如下所示：

```
cat output.txt
0.743745 0.00145661
0.740159 0.00208729
0.743907 0.0019944
<b>0.769515 0.0051214</b>
<i>0.768735 0.00453603</i>
0.755945 0.00203796 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:40:58.933

```
awk '{print NR"\t"$0"\t"$1+$2}' input.txt |
  sort -k3gr |
    sed -r -e '1s#\t(.*)\t#\t<b>\1</b>\t#' -e '2s#\t(.*)\t#\t<i>\1</i>\t#' |
      sort -n |
        cut -f2 
```

* * *

```
0.743745 0.00145661
0.740159 0.00208729
0.743907 0.0019944
<b>0.769515 0.0051214</b>
<i>0.768735 0.00453603</i>
0.755945 0.00203796 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:01:25.237

见下文：

```
kent$  cat test
0.743745 0.00145661
0.740159 0.00208729
0.743907 0.0019944
0.769515 0.0051214
0.768735 0.00453603
0.755945 0.00203796

kent$  awk '{a[NR]=$0;s=$1+$2;
if(m==""||s>m){m=s;mr=NR; }
if(n==""||(s>n&&s<m)){n=s;nr=NR;} }
END{for(i=1;i<=NR;i++)if(i==mr) print "<b>"a[i]"</b>" 
        else if(i==nr) print "<i>"a[i]"</i>"
        else print a[i]}' test
0.743745 0.00145661
0.740159 0.00208729
0.743907 0.0019944
<b>0.769515 0.0051214</b>
<i>0.768735 0.00453603</i>
0.755945 0.00203796 
```

# iphone - 避免同时移动两个视图

> ID：10209433
> 
> 赞同：0
> 
> 时间：2012-04-18T12:32:26.880
> 
> 标签：iphone, ios, cocoa-touch, uiview

我有几个 UIImageView 作为 UIView 的子视图，它们充当画布。ImageViews 接收触摸事件，所以我可以移动它们。如果我平移两个视图，每个手指都可以同时移动两个视图。我不想要那个。

我检查了 superview 上的 maximumNumberOfTouches 属性，但它会影响该视图，但它不会阻止每个其他子视图接收触摸事件。

任何想法如何避免这种行为？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:43:15.750

如何设置一个图像视图已经在移动的标志，并且所有视图上的平移手势在实际移动它们的视图之前检查该标志？一旦视图停止移动，只需将标志设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:37:06.407

您可以这样做，将 UIImageView 扩展为自定义 UIView 可能称为 YouImageView

在触摸事件中

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    for ( UIView *v in self.superview.subviews )
    {
        if ( v != self )
        {
            v.userInteractionEnabled = NO;
        }
    }

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    for ( UIView *v in self.superview.subviews )
    {
        v.userInteractionEnabled = YES;
    }

} 
```

完毕！

# forms - symfony 1.4 表单 - 如何在提交表单时设置一个字段的值？

> ID：10209434
> 
> 赞同：1
> 
> 时间：2012-04-18T12:32:30.110
> 
> 标签：forms, symfony1, save, symfony-1.4

我怎样才能做到这一点？

我正在努力：

```
$this->form->getObject()->setWebsiteid($website);

$this->form->setDefault('websiteid', $website);

$request->setParameter('websiteid', $website); 
```

上面的任何一个都不起作用

我的代码：

```
$this->form = new sfGuardRegisterForm();

if ($request->isMethod('post'))
{
  $website=new Website();
  $website->save();

  $this->form->bind($request->getParameter($this->form->getName()));
  if ($this->form->isValid())
  {
    /* here I try do that */
    $this->form->getObject()->setWebsiteid($website);
    /* here I try do that end */

    $user = $this->form->save();
    $this->getUser()->signIn($user);

    $this->redirect('@homepage');
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:43:55.680

是`websiteid`你`User`模型的一部分吗？

您`websiteid`在表单中使用 的小部件吗？

您可以在保存后添加值：

```
$user = $this->form->save();
$user->setWebsiteid($website);
$user->save(); 
```

但第一个解决方案对我来说似乎没问题..

# android-4.0-ice-cream-sandwich - Nexus S 更新到 ICS 后，NFC 芯片未在锁屏中激活

> ID：10209435
> 
> 赞同：1
> 
> 时间：2012-04-18T12:32:31.803
> 
> 标签：android-4.0-ice-cream-sandwich, nfc, lockscreen

更新到 ics 后，我在 nexus 上的应用程序出现问题。我的应用程序在激活锁屏时读取所有扫描的 RFID 标签（它是关于获取 rfid-serial-number）。这在 2.3.6 上运行良好。

*   启动应用
*   将设备置于睡眠模式
*   来自 NfcService 的 logcat 消息：“NFC-C 关闭，断开连接”
*   按电源按钮唤醒设备
*   来自 NfcService 的 logcat 消息：“NFC-C ON”
*   标签被设备读取而无需解锁锁屏，在状态栏中显示通知/播放声音
*   将设备重新置于睡眠模式

所以更新后，我将设备从睡眠中唤醒，但 nfc 没有重新打开！我必须解锁设备才能读取标签...有什么解决方法可以在设备锁定时读取我的标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:16:43.053

您的观察是正确的：在屏幕解锁之前没有打开 NFC。我认为这实际上是一个疏忽，它在之前的版本中被打开了。我听说不少人将他们的公共交通卡和 Nexus S 手机放在同一个口袋里。当他们解锁手机时，他们在 Gingerbread 的标签应用程序中报告了许多“未知标签”通知。

我认为禁用此功能的唯一方法是构建您自己的 Android 自定义固件，以重新启用旧行为。

# database - SQLite：结束事务花费的时间太长

> ID：10209438
> 
> 赞同：4
> 
> 时间：2012-04-18T12:32:41.323
> 
> 标签：database, sqlite, transactions

我在事务中插入几行。但是当我执行“END TRANSACTION”时，它需要大约 250 毫秒来执行，而“BEGIN TRANSACTION”几乎不需要大约 1 毫秒。我需要在这里加快速度以适应我的应用程序。我怎样才能？

[编辑] * 单个线程正在访问数据库。* 我在这个数据库中有 2 个表，它们都有主键。* 在事务中，每个表中都有一个插入。* 操作系统 - Windows 7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T13:39:53.383

使用 sqlite 的开箱即用或默认设置，250 毫秒提交事务是有意义的。这是由于 sqlite 如何提交您的事务。它等待 VFS 保证写入已提交到磁盘以返回。

这里有几个优化的可能性。

## 每个事务封装更多插入

如果可能，每个事务执行更多的插入。尝试在一个事务中运行 100 次插入，看看与仅 1 次插入相比差异有多大。您甚至可能看不到任何内容（即 100 次插入可能会花费超过 250 毫秒的时间）。

最重要的是，您将物有所值，因为每次插入最终将花费更少的时间（平均而言）。

## 使用 WAL 日志

我强烈建议您尝试 WAL 日志，因为您应该会看到 250 毫秒的显着减少。WAL 不应该比常规日志更安全。WAL 速度更快的原因在于它的名字：它附加到日志文件，而不是让数据库文件在每次提交时吸收提交的更改。阅读全文以获取完整[的](http://www.sqlite.org/wal.html)故事。

要激活 WAL 日志，请将`journal_mode`pragma 设置为`WAL`：

```
PRAGMA journal_mode = WAL; 
```

## 更改同步编译指示

这对您来说可能不够好，也可能不够好，因为它不太安全。因此，只有在您了解风险是什么，并且如果前面的两个建议对您来说不够好，或者您无法使用它们时，我才会推荐它。

基本上，将其更改`synchronous` `pragma`为 NORMAL 或 OFF 将导致 sqlite 在 VFS 之后不等待以保证写入已提交到磁盘以返回。

请先阅读[文档](http://www.sqlite.org/pragma.html#pragma_synchronous)，然后如果您仍想尝试，可以将您的 pragma 设置为 OFF 或 NORMAL：

```
PRAGMA synchronous = NORMAL; 
```

或者

```
PRAGMA synchronous = OFF; 
```

# jquery - 图像翻转 jQuery 方法行为异常

> ID：10209440
> 
> 赞同：0
> 
> 时间：2012-04-18T12:32:54.703
> 
> 标签：jquery

我为图像翻转构建了一个 jQuery 函数，即当我将鼠标悬停在它们应该放大的特定图像上时。但问题是这些图像有两种类型，有时它们带有绿色边框，有时带有红色边框。当它们有红色边框时，图像名称以**"RB"**结尾。现在问题是不管图像是否包含 RB，它是否被放大了。我使用了一个布尔值作为决策参数，它的名字是**"pos"**。当我打印它时，会显示正确的值，但在代码逻辑中它都是错误的。

```
<script type="text/javascript">
            var preLoadImages=['../icons/alfresco64.png','../icons/RSS64.jpg',
                            '../icons/google_calendar64.png','../icons/connections64.png',
                            '../icons/linkedin64.png','../icons/salesforce64.png',
                            '../icons/sharepoint_2010_64.png'];

        var imgs=[];
        for(var i=0;i<preLoadImages.length;i++){
            imgs[i]=new Image();
            imgs[i].src=preLoadImages[i];
        }
        $(document).ready(function(){

            $('#slider img').mouseover(function(){
                var j;
                var imgFile=$(this).attr('src');
                var imgFileID=$(this).attr('id');

                if(imgFileID=="Alfresco"){
                    j=0;
                }
                if(imgFileID=="GoogleCalendar"){
                    j=2;
                }
                if(imgFileID=="Linkedin"){
                    j=4;
                }
                if(imgFileID=="Rss"){
                    j=1;
                }
                if(imgFileID=="Salesforce"){
                    j=5;
                }
                if(imgFileID=="Sharepoint"){
                    j=6;
                }
                if(imgFileID=="Connections"){
                    j=3;
                }
                if((j>=0)&&(j<=6)){
                var pos=/RB.png$/.test(imgFile);

                if(pos){
                    return false;
   } if(!pos){
                $(this).hover(
                function(){
                    $(this).attr('src',imgs[j].src);
        },
                function(){
                    $(this).attr('src',imgFile);
                }
       );
       }
                } 
            });
        });
    </script> 
```

据我说，当图像 src 包含 RB 时，该方法应该返回 false。但它总是放大悬停时的图像。请帮助我是 jQuery 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:56:01.703

It's not a good idea to do recognition on name, after 2-3 weeks you will forget about this little thing. Put a html5 like attribute to your images and use it for making difference.

And if in only hover effect you can try to do it with clean css and skip the js. If you use css look how to make a 'sprite' and use it to boot loading speed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:38:16.720

如果您创建一个 jsFiddle 我可以提供帮助，但乍一看这可能是一个问题：

```
if (pos) {
   return false;
} 

if (!pos) { 
     ... 
} 
```

将其更改为：

```
if (pos) {
   return false;
} else { 
     ... 
} 
```

# session - 如何在nodejs的会话中保存参数。现在的例子

> ID：10209442
> 
> 赞同：1
> 
> 时间：2012-04-18T12:33:01.917
> 
> 标签：session, node.js, nowjs-sockets

我使用 nowjs 并且会话有问题。这是代码：

```
now.on('connect', function(){
    if(this.user.session){
        this.user.session.views++;
        console.log(this.user.session.views);
    }

});

app.get('/', function(req, res){
    var body = '';
    body = body+' <script src="/nowjs/now.js"></script>';
    if (req.session.views) {
        ++req.session.views;
    } else {
        req.session.views = 1;
        body += '<p>First time visiting? view this page in several browsers :)</p>';
    }
    res.send(body + '<p>viewed <strong>' + req.session.views + '</strong> times.</p>');
    console.log("body");
}); 
```

没有问题，我可以在“this.user.session”中写入任何内容，但在下次调用时，所有内容都会被删除。在我的示例中，它计算您进入该站点的次数。并且“views”每次都增加1，但它应该增加2，因为我是“this.user.session.views++;”。我错过了什么或无法完成？

如果你有一些 nowjs+sessions 帖子的例子，请谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:02:26.607

我正在使用 nowjs 和会话和 Passport 进行身份验证......我写了一个简单的要点来让它们一起工作......

[https://gist.github.com/2266544](https://gist.github.com/2266544)

# sharepoint - SharePoint 2010：如何将 ItemStyle.XSL 文件中的“onmouseover”属性用于内容查询 Webpart？

> ID：10209444
> 
> 赞同：1
> 
> 时间：2012-04-18T12:33:10.803
> 
> 标签：sharepoint

我目前使用内容查询 Webpart 在 SharePoint 2010 中工作。我只想显示一个列表，但是当用户将鼠标悬停在项目上时，我希望他/她看到描述。我试图将“onmouseover”属性放在任何地方，但似乎没有任何效果。

到目前为止，这是我的代码：

 ````
<xsl:variable name="SafeLinkUrl">
    <xsl:call-template name="OuterTemplate.GetSafeLink">
            <xsl:with-param name="UrlColumnName" select="'LinkUrl'"/>
    </xsl:call-template>
</xsl:variable>

<xsl:variable name="DisplayTitle">
    <xsl:call-template name="OuterTemplate.GetTitle">
        <xsl:with-param name="Title" select="@Title"/>
        <xsl:with-param name="UrlColumnName" select="'LinkUrl'"/>
    </xsl:call-template>
</xsl:variable>

<xsl:variable name="Description">
        <xsl:value-of select="@Description" />
</xsl:variable>

<xsl:variable name="Start">
        <xsl:value-of select="ddwrt:FormatDateTime(string(@Start), 1033, 'H:mm')" />
</xsl:variable>

<xsl:variable name="End">
        <xsl:value-of select="ddwrt:FormatDateTime(string(@End), 1033, 'H:mm')" />
</xsl:variable>

<xsl:variable name="Speaker">
        <xsl:value-of select="@Speaker" />
</xsl:variable>

<xsl:variable name="tableStart">
    <xsl:if test="$CurPos = 1">
        <![CDATA[ 
        <table border=1 bgcolor=#CCFFFF>
          <tr>
            <td><b>Start</b></td>
            <td><b>End</b></td>
            <td><b>Title</b></td>
            <td><b>Speaker</b></td>
          </tr>   
        ]]>
    </xsl:if>
</xsl:variable>

<xsl:variable name="tableEnd">
    <xsl:if test="$CurPos = $Last">
        <![CDATA[ </table> ]]>
    </xsl:if>
</xsl:variable>

<xsl:comment>Start of HTML section</xsl:comment> 
<xsl:value-of select="$tableStart" disable-output-escaping="yes"/>

<tr>
  <td><b> <xsl:value-of select="$Start"/> </b></td>

  <td><b> <xsl:value-of select="$End"/> </b></td>

  <td style="width:500px"><b> <xsl:value-of select="$DisplayTitle"/></b></td>

  <td> <xsl:attribute name="onmouseover"> <xsl:value-of select="@Description"/> </xsl:attribute> </td>

  <td><b> <xsl:value-of select="$Speaker"/> </b></td>
</tr>

<xsl:value-of select="$tableEnd" disable-output-escaping="yes"/> 
```` 

我应该把'onmouseover'属性放在哪里，这样当你的鼠标悬停在一个项目上时，它会显示描述？

提前致谢。

# sql-server - 将任意 XML 导入 SQL Server

> ID：10209445
> 
> 赞同：-1
> 
> 时间：2012-04-18T12:33:24.267
> 
> 标签：sql-server, xml

是否可以解析和导入**任意**XML 文件并将其导入 SQL Server 表？

XML 文件可以是高度分层的。

我有 1 Gb XML 文件，我对此一无所知。

如何确定它包含哪些表，在 SQL Server 上创建它们并将数据批量加载到 SQL Server？

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:01:00.480

不。

XML 和 SQL 是非常非常不同的东西。可以将 SQL 数据保存为 XML，并且此类 SQL 类 XML 可以转换回 SQL 数据库，但并非源自类 SQL 系统的任意 XML 不太可能轻易转换为SQL 数据库模式以任何有意义的方式。

您可以在键值类型设计中计算出表示通用 XML 的 SQL 模式，但它不会是该词的传统含义中的 SQL 模式。

# indexing - RavenDB：基于另一个索引的索引

> ID：10209452
> 
> 赞同：1
> 
> 时间：2012-04-18T12:33:56.677
> 
> 标签：indexing, nosql, ravendb

是否可以使用一个索引作为另一个索引的基础？

```
public class BlogPostsOrderedByCreated : AbstractIndexCreationTask<BlogPost, BlogPost> {
    /* Ordering Blogs after creation-date */
}

// TODO: Implement another index that uses above index
//public class BlogSelection : 
```

这甚至可能吗，还是我必须创建一个复制其他索引代码的全新索引？如果不可能，那为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:03:25.767

不，你不能这样做，因为实现它非常复杂，而且交换的价值很小。

实现这一点很复杂，因为： - 当第一个索引有任何更改时，您应该在第二个索引中通知。- 你如何实现交易？

而且可能还有更多。索引之间的可靠会引发一些非常复杂的问题需要解决，所以你最好只有两个索引。

如果这在您的场景中没有意义，您可能做错了事。例如，您不必创建任何 BlogPostsOrderedByCreated 和 BlogSelection 索引，只需使用一个 linq 查询即可：

```
session.Query<Post>()
       .Where(x => x.Name == "Blog selection")
       .OrderBy(x => x.CreatedDate)
       .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:54:52.593

我的一般理解是，这从客户端来说会很棘手——在一天结束时，这些索引定义被转换为 linq 到对象并发送到服务器。当所说的 linq 被干预时，它只能访问 System 命名空间和一些乌鸦特定的东西。

在这种情况下可行的是在服务器上的捆绑包中定义索引。然后你可以做更多有趣的事情。不完全确定它会起作用，但我认为你会有一个战斗的机会。

# iphone - 追踪 iPhone 上的越界访问

> ID：10209455
> 
> 赞同：1
> 
> 时间：2012-04-18T12:33:59.483
> 
> 标签：iphone, c++, objective-c, ios, memory

我平均工作（约 20k 行代码，Objective-C 与 C++ 混合），我正在努力寻找 EXC_BAD_ACCESS 错误。

我已经尝试了所有常见的技术（比如启用 NSZombie、保护边缘等）。到目前为止，我已经排除了访问已释放对象的可能性，以及双释放错误。

似乎有些东西写在不应该写的内存空间上。但是，正如许多内存错误一样，它不会一直发生，也不会总是在同一个地方崩溃。（有时我会收到“对象在被释放后被修改”的消息）。

有时，被覆盖的内存属于**分配器**，它在 malloc 或 free() 上崩溃。

而且，当然，应用程序中的某些更改可能会影响错误的行为——如果我尝试注释掉部分代码，错误出现的频率就会降低，因此更难找到它。

最后，我一直在研究使用**valgrind**，但似乎所有使用它的人都在模拟器上工作。但我的代码必须在实际设备上运行（有些代码是**ARM**特定的）

是否有关于如何调试此类错误的一般提示**？**

注意：该应用程序涉及**视频处理**，因此使用的内存量相当大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:11:47.667

If you feel that the C++ code is causing the issue you could copy the C++ out of your iPhone project and create a Mac project. With this you could set up various stress tests. And, you should be able to use valgrind as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:05:19.230

XCode 上有一些特殊的工具可用。您可以尝试使用它们来分析您的代码。 [http://developer.apple.com/library/mac/#featuredarticles/StaticAnalysis/index.html](http://developer.apple.com/library/mac/#featuredarticles/StaticAnalysis/index.html) 它会在使用无效对象的情况下产生一些警告，以便帮助您找到问题。

# php - catch 语句中函数的错误处理

> ID：10209456
> 
> 赞同：1
> 
> 时间：2012-04-18T12:34:02.020
> 
> 标签：php, oop, zend-framework, error-handling, dry

这是一段代码，我想知道是否应该对其进行重构以使其更符合 Clean Code 实践。

这是一个负责退还客户订单的类。

```
class RefundServiceInvoker {

    private $_orders;

    public function refundOrder() {   
        $this->getOrdersFromDB(); //This function gets all orders from DB and sets $_orders
        foreach ($this->_orders as $order) { 
            try {
                $order->refund(); //Some lines may throw an exception when refunded due to some business logic (ex. the order was already shipped)
                $this->updateOrderStatus('refunded')            
            } catch (Exception $e) {                   
                $this->logError($e);
                $this->sendMailToAdmin();
            }
        }
    }
} 
```

当然，这段代码比我的原始代码高度简化。

我的主要问题是如果`$order->refund();`抛出异常，它将被捕获并记录到数据库，然后发送邮件。但是，如果`$this->logError($e);`它本身抛出异常怎么办？或者如果邮件服务器关闭并抛出异常怎么办？

如果数据库自己宕机并`$this->getOrdersFromDB();`抛出异常怎么办？

我的第一个解决方案是将所有内容包装在一个大文件中`try{}catch{}`：

```
public function refundOrder() {   
            try {              
            $this->getOrdersFromDB(); //This function gets all orders from DB and sets $_orders
            foreach ($this->_orders as $order) { 

                    $order->refund(); //Some lines may throw an exception when refunded due to some business logic (ex. the order was already shipped)
                    $this->updateOrderStatus('refunded')            
                } catch (Exception $e) {                   
                    $this->logError($e);
                    $this->sendMailToAdmin();
                }
            }
        } 
```

但这意味着如果一个订单失败，那么所有订单都会失败！我应该`try{}catch{}`为整个功能放置 2 个，为每个订单放置另一个吗？但是在这种情况下，catch 中的函数也可能会抛出一个不会被捕获的异常。

笔记：

该应用程序是使用 Zend 框架 1.11.11 构建的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:43:56.897

没有灵丹妙药可以解决这些问题。如果一个函数可以抛出并且你关心它，你必须包裹它`try`-`catch`就这么简单。

进入细节：如果没有关于应用程序架构的更多信息，实际上不可能评估这种或那种方法的优点，但这里有一些一般性建议：

*   **甚至在**调用之前检查先决条件`refundOrder`。确保订单已成功加载；确保您将要操作的订单都是*可退款的（尝试退款由于业务逻辑而无法退款的订单的目的是什么？在尝试退款**之前*不应该通知用户/操作员吗？） .
*   **使用多个级别的`try`/ `catch`，但可能不是全部在**里面**`refundOrder`。外部块旨在捕获任何*真正*意外的错误，那么`refundOrder`仅在内部捕获它们有什么意义呢？您不想在应用程序的其他部分也这样做吗？最里面的`try`/`catch`是必要的，这样一个不可退款的订单就不会杀死所有的过程。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:12:56.590

如果您需要记录并邮寄每个异常，那么您需要这样的东西：

```
class RefundServiceInvoker {

   private $_orders;

   public function refundOrder() {
      try {
         $this->getOrdersFromDB();
         foreach ($this->_orders as $order) {
            try {
               $order->refund();
            } catch (MyBusinessException $e) {
               # deals with the problematic $order without stopping the loop
               $this->logError($e);
               $this->sendMailToAdmin();
            }
            $this->updateOrderStatus('refunded');
         }
      } catch(Exception $e) {
         # deals with unexpected bugs
         $this->logError($e);
         $this->sendMailToAdmin();
      }
   }
} 
```

但是您必须在 log 和 mail 方法中放置一个 try/catch，以防止它们在服务器离线时抛出任何异常，例如。如果不这样做，$orders 循环将在日志/邮件失败时停止。

如果您只需要在refund() 方法中记录/邮寄您的业务异常，那么您需要这样的东西：

```
class RefundServiceInvoker {

   private $_orders;

   public function refundOrder() {
      $this->getOrdersFromDB();
      foreach ($this->_orders as $order) {
         try {
            $order->refund();
         } catch (MyBusinessException $e) {
            # deals with the problematic $order without stopping the loop
            $this->logError($e);
            $this->sendMailToAdmin();
         }
         $this->updateOrderStatus('refunded');
      }
   }
} 
```

任何其他异常都会导致 http 500 – 内部服务器错误页面，这通常是您想要的，因为这是一个意外错误。

还有其他方法可以处理此问题，但如您所见，这取决于您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:50:03.277

作为`logError($e)`并且`sendMailToAdmin()`可能是最后使用的函数，通常在 try/catch 块中，我会确保它们永远不会抛出异常。

```
function logError($e)
{
    try
    {
        //your logic that may throw an Exception here
    }
    catch {}
}

function sendMailToAdmin($e)
{
    try
    {
        //your logic that may throw an Exception here
    }
    catch {}
} 
```**

# java - Javadocs和多行描述？

> ID：10209459
> 
> 赞同：-2
> 
> 时间：2012-04-18T12:34:05.750
> 
> 标签：java, documentation, javadoc

我在使用 javadocs 时遇到问题。它似乎既有用又非常愚蠢！我正在尝试为一个类编写多行描述：

```
/**
 * this is my class, there are many like it, but this one is mine!
 * 
 * blah blah blah
 *       - blah blah
 *       - blah blah
*/ 
```

但是当使用该类时，描述显示为单行blob！请告诉我制作它的人比这更聪明，并且有一种方法可以使 javadocs 显示多行描述。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T12:36:14.447

插入 HTML 标签，例如：

```
/**
 * <p>this is my class, there are many like it, but this one is mine!</p>
 * 
 * <p>blah blah blah<p>
 * <ul>
 *  <li>blah blah</li>
 *  <li>blah blah</li>
 * </ul>
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:38:32.377

Javadoc 像 HTML 一样工作。试试类似的东西

```
-blah blah <br /> -blah blah 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:38:51.733

您可以在 javadoc 中使用 html 标签。例如，您可以使用以下内容：

```
/**
 * this is my class, there are many like it, but this one is mine!<br/>
 * 
 * blah blah blah
 *     <ul>  <li>blah blah</li>
 *       <li> blah blah</li>
 *     </ul>
*/ 
```

# ruby-on-rails - 如何编写一个方法来获取 JSON 数据并解析它然后保存到数据库中

> ID：10209461
> 
> 赞同：2
> 
> 时间：2012-04-18T12:34:11.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我试图像这样从我的数据库 to_json 渲染数据，效果很好。

```
 def getOrderDetails
    #To get the details of a particular guest_order and its batches and items
    @guest_order = GuestOrder.find(params[:id])
    render json: @guest_order.to_json(except: [:created_at, :updated_at], 
            include: {order_batches: {except: [:guest_order_id, :created_at, :updated_at], 
            include: {order_items: {except: [:order_batch_id, :created_at, :updated_at] } }
                }
              }
            )
  end 
```

但是，我不知道如何编写一个方法来获取 json 数据并解析它，然后更新到数据库中。

如果我像这样从手机发送 json 数据，

```
 Parameters:{"updateStatus" => "{\"itemId\":1,\"status\":\"accepted\",\"statusTime\":\"2012-04-25 18:28:30\",\"batchId\":5}"} 
```

这里的状态是这些接受、烹饪、准备、交付、取消之一。statusTime 是特定状态的值。

如何获取这些数据并解析然后更新到数据库中的下表

```
def updateStatus

  # How to parse json and save in database

end 
```

表模式如下所示，

```
# == Schema Information
#
# Table name: order_items
#
#  id             :integer         not null, primary key
#  quantity       :integer
#  accepted       :datetime
#  cooking        :datetime
#  ready          :datetime
#  delivered      :datetime
#  cancelled      :datetime
#  order_batch_id :integer
#  dish_id        :integer
#  created_at     :datetime
#  updated_at     :datetime
# 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:53:10.577

Rails 将根据请求中的查询参数创建一个哈希。

如果您以正确的格式发出请求，Rails 参数哈希将包含以下数据。

```
puts params.inspect
=>
{ "order_items" => { "id" => 9, "cooking" => "2012-03-11 15:16:15.0000" }, :action => "action_name", etc } 
```

实际上你根本不需要解析 json。

```
def updateStatus
  @order_item = OrderItem.create(params[:order_items])
  respond_to do |format|
    format.json { render @order_item }
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:54:59.857

尝试 ：

安装 json gem

```
data = JSON.parse(params[:data])
new_record = OrderItem.new(data[:order_items]) 
new_record.save 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:44:01.110

```
 def updateStatus
    order = JSON.parse(params["updateStatus"])
    @item = OrderItem.where(order_batch_id: order["batchId"], item_id: order["itemId"])
    status = order["status"]
    case status
      when "cancelled"
        @item.first.update_attributes(cancelled: order["statusTime"])
      when "accepted"
        @item.first.update_attributes(accepted: order["statusTime"])
      when "cooking"
        @item.first.update_attributes(cooking: order["statusTime"])
      when "ready"
        @item.first.update_attributes(ready: order["statusTime"])
      when "delivered"
        @item.first.update_attributes(delivered: order["statusTime"])
    end
    render json: @item.to_json(except: [:created_at, :updated_at], message: "success")
  end 
```

# magento - Magento cronjobs

> ID：10209462
> 
> 赞同：0
> 
> 时间：2012-04-18T12:34:11.950
> 
> 标签：magento, crontab

我的 Debian crontab 工作正常，因为一些脚本定期运行没有问题，运行 magento cron.php 时出现问题：

在遵循了几个文档之后，我到目前为止已经尝试过：

```
*/5 * * * * /bin/sh /absolute/path/to/magento/cron.sh

*/5 * * * * /usr/bin/php -f /absolute/path/to/magento/cron.php

*/5 * * * * curl -s -o /dev/null http://www.mysite.com/absolute/path/to/magento/cron.php 
```

根据 Debian syslog，该文件每 5 分钟执行一次，但似乎什么也没发生，在我们的模块（xtento 扩展）中，cronjob 的声明是正确的：

```
 <crontab>
    <jobs>
        <export_apply_all>
            <schedule>
                <cron_expr>*/1 * * * *</cron_expr>
            </schedule>
            <run>
                <model>export/observer::cronjob</model>
            </run>
        </export_apply_all>
    </jobs>
</crontab> 
```

这是一个付费且稳定的扩展，所以我不知道为什么 magento 没有安排任务......数据库表“cron_schedule”仍然是空的，什么都没有......甚至没有安排默认的清除日志任务......任何想法我错过了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-08T10:12:05.607

正如我所想的那样，cron.php 无法正常工作。请打开位于 magento 根目录下的 cron.php 文件。然后转到第 48 行，然后您将看到一个名为 $isShellDisabled 的变量。请始终将此变量设为真。请在尝试块上方添加以下行。然后再次点击 cron.php。

```
$isShellDisabled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-26T17:17:03.203

尝试添加

```
Mage::log('cron running'); 
```

到站点根目录中的 cron.php（大约第 50 行）。

然后检查您的日志文件 var/log/system.log 以查看您的 Debian cron 是否确实触发了您的 Magento cron。如果 5/10 分钟后没有任何记录，则问题出在 Debian cron。

如果没有记录，请尝试为您的 Magento 版本下载一个新的 cron.php 文件。

# visual-studio-2010 - 在 .net 中添加类的作者信息

> ID：10209463
> 
> 赞同：0
> 
> 时间：2012-04-18T12:34:12.620
> 
> 标签：visual-studio-2010

这些天，我开始学习编写企业级代码，并开始关注开源代码。除了在代码中添加注释的可读性之外，我还喜欢在我编写的代码/文件中使用作者姓名。

我们是否有任何插件/宏/扩展程序会在开始时自动将我的姓名和电子邮件 ID 添加到我在 Visual Studio 中创建的文件中。

任何自动生成评论模板的插件或过程，自动导致我可以减少对模板的打扰，并且可以打扰更多关于描述的内容，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:37:09.633

> 除了在代码中添加注释的可读性之外，我还喜欢在我编写的代码/文件中使用作者姓名。

为什么？它提供了哪些*有用*的信息，而这些信息在别处无法更好地确定？就我个人而言，我一直觉得它很痛苦——当涉及到其他维护者时，它很快就会过时，而且只会让代码变得混乱。

任何体面的源代码控制系统都会向您显示文件的历史记录，包括每次提交的幕后人员，并显示文件的注释版本以显示最后一次编辑每一行的提交。这两者都比手写的、过时的注解有用得多，而这些注解在实际编写代码时是*无关紧要**的*。

我强烈建议您停止寻找这样的功能。

# html - 如何在 HTML 中表示一组“拥有并属于许多”自我关系项？

> ID：10209468
> 
> 赞同：1
> 
> 时间：2012-04-18T12:34:35.780
> 
> 标签：html, markup, directed-acyclic-graphs

我正在开发一个 Ruby on Rails 系统，该系统有一个与*自身*`Project`相关的表（循环关系是不可能的）。通过这种方式，一个项目可以成为多个其他项目的一部分，这非常有用，并且是新应用程序所基于的遗留系统的杀手级功能。我需要一种方法来在单个页面上显示所有项目及其、和其他简单属性。每个项目都必须相对于它们的每个父项显示（重复条目很好），并且每个属性值必须*由浏览器*与其他属性对齐（没有一个总是会中断的“静态宽度”渣滓）。项目也必须是可折叠的，尽管我怀疑这与解决方案无关。`has_and_belongs_to_many`*`name``short_name`*

 **当前的解决方案类似于[如何在 HTML 表格中呈现树？](https://stackoverflow.com/questions/945460/how-do-i-present-a-tree-in-an-html-table)解决方案：使用 a`<table>`并使用 CSS 在最左侧的列中实现“树状”结构`padding-left`。通过存储每个项目的父项目 ID 来保持完整的父子关系。因为这不是语义标记，所以很难用 JavaScript 处理结果表。如果要折叠一个节点，则必须在折叠的一个节点`<tr>`之后遍历每个节点，直到找到同一级别的节点，而不仅仅是删除子节点列表。此外，多个项目不止一次展示

**是否有一种语义方式可以在 HTML**（任何版本）中表示这样的数据结构，而不会牺牲所有合理设置样式的能力？据我所知，表格列表无法正确对齐，并且无法将列表与表格混合。

我没有标记`ruby`或`ruby-on-rails`因为编程语言与任务无关，只是为了解释现有系统的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:25:37.587

您可以将列表与表格混合使用...您的帖子有点难以接受，我相信绘图会有所帮助，但从我可以从中获得的东西，如果可以的话，我会尽力提供帮助

```
<table>
  <tr>
    <% obj1.each do |o1| %>
    <td>
      <ul id="tree_<%= o1.id %>">
        <% obj2.each do |o2| %>
          <li><%= o2.name %></li>
        <% end %>
      </ul>
    </td>
    <% end %>
  </tr>
</table> 
```

然后你可以隐藏指定 ul.tree 的列

也许我误解了您的需求，但我希望这会有所帮助！:)

去铁轨！！**

# jquery - 最新的 JQuery mobile 在 iphone/safari 浏览器中导致 oracle apex 应用程序出现白页

> ID：10209469
> 
> 赞同：1
> 
> 时间：2012-04-18T12:34:39.930
> 
> 标签：jquery, oracle, jquery-mobile, oracle-apex

我目前正在尝试开发一个 oracle APEX 应用程序，该应用程序将在使用 jquery 移动框架的 iphone 上使用。

我看过一些网页，其中包含使用 jquery mobile version 1.0a4.1 成功完成此操作的示例。

这个版本已经很老了，我需要利用从那时起发生的一些修复。我尝试升级到 v1.1 final 并且在我的计算机（firefox/chrome）上的浏览器中呈现页面时一切正常。但是当我尝试在 safari 或我的 iphone 中渲染页面时，我只会得到一个完整的空白页面。

有谁知道如何解决这一问题？我能让它再次工作的唯一方法是将 jquery mobile 降级到 v1.0a4.1

谢谢。

这是我的页面模板

标题

```
<!DOCTYPE html>
   <html lang="&BROWSER_LANGUAGE." xmlns="http://www.w3.org/1999/xhtml"
       xmlns:htmldb="http://htmldb.oracle.com" xmlns:apex="http://apex.oracle.com">
   <head>
     <title>#TITLE#</title>
     <link rel="icon" href="#IMAGE_PREFIX#favicon.ico" type="image/x-icon">
     <link rel="shortcut icon" href="#IMAGE_PREFIX#favicon.ico" type="image/x-icon">#HEAD#

     <!--<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />-->
     <!--<script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>-->

     <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
     <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
     <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

     <link rel="stylesheet" href="#WORKSPACE_IMAGES#mobile_style.css" type="text/css" />
   </head>
   <body #ONLOAD#>
     <div data-role="page">#FORM_OPEN# 
```

身体

```
 <div data-role="header" data-add-back-btn="true">
    <h1>#TITLE#</h1>
      #NAVIGATION_BAR#
  </div><!-- /header -->
  <div id="messages">#SUCCESS_MESSAGE##NOTIFICATION_MESSAGE##GLOBAL_NOTIFICATION#</div>
    <div data-role="content">
      <ul data-role="listview">
        #REGION_POSITION_01#
        #REGION_POSITION_02#
        #REGION_POSITION_03#
        #REGION_POSITION_04#
        #REGION_POSITION_05#
        #REGION_POSITION_06#
        #REGION_POSITION_07#
      </ul>
      #BOX_BODY#
    </div><!-- /content --> 
```

页脚

```
 <div data-role="footer">
     <h4>#REGION_POSITION_08#</h4>
   </div><!-- /footer -->

   #FORM_CLOSE#
 </div>
</body> 
```

# android - 如何接收联系人更改：Android

> ID：10209474
> 
> 赞同：0
> 
> 时间：2012-04-18T12:35:11.677
> 
> 标签：android, broadcastreceiver

`BroadcastReceiver`如果联系人已被删除/更新，我想实现一个监听。我读过`ContantObserver`但我不知道如何在应用程序后台运行它，比如`BroadcastReceiver`.

我该如何实施？有什么方法可以`ContantObserver`在应用程序的后台运行。

我遵循[了这个常见问题解答。](https://stackoverflow.com/questions/1401280/how-to-listen-for-changes-in-contact-database)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:39:17.073

实现一个广播接收器并在定位这个接收器的`onChange`方法中发送广播`ContentObserver`.. 看到[这个](http://thinkandroid.wordpress.com/2010/02/02/custom-intents-and-broadcasting-with-receivers/)使用自定义意图和广播..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T07:44:35.620

启动服务并将 ContentObserver 注册到此服务器

这是我所做的示例代码，它将监听 Co​​ntacts.CONTENT_URI 中的任何更改并通知用户

这是服务

```
public class ContactObserverService extends Service implements ContactObserver.OnUpdate {
private ContactObserver contactObserver ;

public ContactObserverService() {
}

@Override
public void onCreate(){
    super.onCreate();
    contactObserver = new ContactObserver(this);
    Toast.makeText(this,"Service Started",Toast.LENGTH_SHORT).show();
    this.getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI,false,contactObserver);
}

@Override
public void onDestroy() {
    if( contactObserver !=null  )
    {
        this.getContentResolver().unregisterContentObserver(contactObserver);
    }
    super.onDestroy();
}

@Nullable
@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // The service is starting, due to a call to startService()
    return START_STICKY;
}

@Override
public void onUpdate(Uri uri) {
    NotificationCompat.Builder builder = (NotificationCompat.Builder) new NotificationCompat.Builder(this)
            .setContentTitle("Contact Update Notifier")
            .setContentText(uri.getQuery())
            .setSmallIcon(R.drawable.images);
    NotificationManager manager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    manager.notify(1,builder.build());
}
} 
```

ContentObserver 类是

```
public class ContactObserver extends ContentObserver {
private OnUpdate onUpdate;

public interface OnUpdate{
    void onUpdate(Uri uri);
}
public ContactObserver(OnUpdate onUpdate) {
    super(new Handler());
    this.onUpdate = onUpdate;
}

@Override
public void onChange(boolean selfChange) {
    this.onChange(selfChange, null);
}
@Override
public void onChange(boolean selfChange, Uri uri) {
    // this is NOT UI thread, this is a BACKGROUND thread
    uri.getQueryParameterNames();
    onUpdate.onUpdate(uri);
}
} 
```

# vhdl - VHDL 函数无法编译

> ID：10209475
> 
> 赞同：2
> 
> 时间：2012-04-18T12:35:12.987
> 
> 标签：vhdl

我正在尝试在 VHDL 中定义一个函数，但我得到了

> 错误：tst.vhd(4)：靠近“子类型”：语法错误

这是代码

```
subtype word10 is bit_vector(9 downto 0);
subtype word8 is bit_vector(7 downto 0);

function tst (input : in word10) return word10 is
    variable tmp : word10;
    -- code here
    begin

    return tmp;
end tst;

entity tester is
end;

architecture tst of tester is
begin
end; 
```

这是我第一次用 VHDL 编码，我不知道是什么错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:44:58.083

问题是您试图定义的东西（子类型和函数）需要在库单元（包或实体）或其他一些主体内声明，而不仅仅是自己挂出。尝试将声明移动到测试器实体（即：在“实体测试器是”行之后）：

```
entity tester is
    subtype word10 is bit_vector(9 downto 0);
    subtype word8 is bit_vector(7 downto 0);

    function tst (input : in word10) return word10 is
        variable tmp : word10;
        -- code here
        begin

        return tmp;
    end tst;
end tester; 
```

您声明子类型和函数的确切位置将取决于您需要它们可见的范围。如果您需要在整个设计中访问它们，通常会将它们收集在一起并在一个包中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:30:08.653

`subtype`s 和`function`s 通常在`package`s 和`package body`s 中声明 - 如果您尝试按原样编译该代码，那么，是的，它将失败。

尝试（只是在我的脑海中输入，所以可能有语法错误，但它应该给你正确的想法）：

```
package mypkg is
    subtype word10 is bit_vector(9 downto 0);
    subtype word8 is bit_vector(7 downto 0);
    function tst (input : in word10) return word10;
end package;
package body mypkg is      
    function tst (input : in word10) return word10 is
        variable tmp : word10;
    begin
        -- code here
        return tmp;
    end function;
end package body; 
```

为了“运行”任何代码（这对于旨在描述硬件的代码有点用词不当），您还需要`entity`在模拟器中“详细说明”，然后才能调用您的`tst`函数。实体更多地用作 VHDL 构建块，过程用于捕获块内的行为 - 功能和过程通常在实体和过程中用于捕获经常使用的功能，如在软件世界中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T13:06:33.490

问题是，您必须`SUBTYPE` **在**de 定义和`begin`.

但是，我不确定您是否意识到 VHDL 不是一种编程语言，而是一种设计语言。如果你想合成你的代码，那么你应该小心你的情况是否可以合成函数。

# google-chrome - Three.js 在球体上不显示纹理

> ID：10209488
> 
> 赞同：0
> 
> 时间：2012-04-18T12:36:17.977
> 
> 标签：google-chrome, textures, webgl, three.js

有一些关于纹理的线程没有显示出来。我已经尝试了所有这些，但没有任何帮助。

我现在已经花了几个小时。每次我最终看到一个黑色的球体。

我正在使用 Chrome v18 和 Windows 7。我也尝试过 Firefox，但这个浏览器并不真正支持 Three.js。

这是脚本的主体：

```
<body>

    <script src="../build/Three.js"></script>

    <script src="js/Stats.js"></script>
    <script src="../build/jquery-1.7.2.min.js"></script> 
```

这是脚本本身：

```
// stap1) camera, set the scene size
    var WIDTH = 400,
        HEIGHT = 300;

    // set some camera attributes
    var VIEW_ANGLE = 45,
        ASPECT = WIDTH / HEIGHT,
        NEAR = 0.1,
        FAR = 10000;

    var camera = new THREE.PerspectiveCamera(  
                VIEW_ANGLE,
          ASPECT,
          NEAR,
          FAR  );
// stap2) scene:                
    var scene = new THREE.Scene();
    // the camera starts at 0,0,0 so pull it back
   scene.add(camera);
     camera.position.z = +300;
    // get the DOM element to attach to
    // - assume we've got jQuery to hand
    var container = $('#container');

    // stap3)create a WebGL renderer:
    var renderer = new THREE.WebGLRenderer();
    // start the renderer
    renderer.setSize(WIDTH, HEIGHT);
    // attach the render-supplied DOM element
    container.append(renderer.domElement);

    // bol maken:
    // create the sphere's material
    // b.v: THREE.MeshBasicMaterial
    var sphereMaterial = new THREE.MeshLambertMaterial(
    {
        map: THREE.ImageUtils.loadTexture("http://dev.root.nl/tree/examples/textures/ash_uvgrid01.jpg")
    });

    // set up the sphere vars
    var radius = 50, segments = 16, rings = 16;
    var sphereGeometry = new THREE.SphereGeometry(radius, segments, rings); 
    // create a new mesh with sphere geometry -
    var sphere = new THREE.Mesh(
       sphereGeometry,
       sphereMaterial
         );

    sphere.position.x=0;
    var s=1;
    sphere.scale.set(s, s, s);  

    // add the sphere to the scene
    scene.add(sphere);
    // create a point light
    var pointLight = new THREE.PointLight( 0xFFFFFF );
    // set its position
    pointLight.position.x = 10;
    pointLight.position.y = 50;
    pointLight.position.z = 130;
    // add to the scene
    scene.add(pointLight);
    // draw!
    renderer.render(scene, camera); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:57:42.747

您需要等到用作纹理的图像完全下载。

我已将您的代码放在网上： http: [//jsfiddle.net/4Qg7K/](http://jsfiddle.net/4Qg7K/)并添加了一个经典的“渲染循环”：

```
requestAnimationFrame(render);

function render(){
  requestAnimationFrame(render);

  sphere.rotation.y += 0.005; //rotation stuff, just for fun

  renderer.render(scene, camera);
}; 
```

`requestAnimationFrame``render`函数就像一个计时器，每次浏览器准备好更新网页时调用该函数。

顺便说一句，Three.js 在 Firefox 上运行良好。

# redirect - JSF 外部链接

> ID：10209489
> 
> 赞同：1
> 
> 时间：2012-04-18T12:36:19.007
> 
> 标签：redirect, jsf-2

作为[这个问题](https://stackoverflow.com/questions/5092439/jsf-external-site-redirect)，我正在尝试添加指向外部站点的链接。
问题是使用：

```
<a href="stackoverflow.com">Go to this site!</a> 
```

我认为这个标签不应该由 JSF 控制（不是吗？）并生成直接的 HTML，但无论如何 JSF 会修改并生成一个相对链接（`http://localhost/webapp/stackoverflow.com`），就好像它是一个`outcome`. 即使 url 以`www.`. 所以，问题是：

> 我被迫在 JSF 中放置协议，即使带有`<a>`标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:42:59.237

这不是 JSF 特有的。JSF 只是一个 HTML 代码生成器。使用纯 HTML 时，您会遇到完全相同的问题。HTML 文档中的所有相对 URL 始终相对于当前请求的基本 URL（如您在浏览器地址栏中看到的或在 HTML`<base>`标记中指定的）。

您需要明确指定方案以使其成为绝对 URL。

```
<a href="http://stackoverflow.com">Go to this site!</a> 
```

# asp.net - 从 RadGrid 中删除空项目

> ID：10209493
> 
> 赞同：1
> 
> 时间：2012-04-18T12:36:34.143
> 
> 标签：asp.net, header, telerik, row, radgrid

我有一个 RadGrid，它首先是空的（如图所示）。为了让 RadGrid 在 RadGrid 中显示没有任何数据的标题，我需要设置：

```
ShowHeadersWhenNoRecords="true" 
```

但是标题仍然不可见。经过一番研究，我发现必须有 RadGrid 的数据源，即使它是空的。所以我将 RadGrid 的 DataSource 设置为一个空的数据表，这很有效。但随后 RadGrid 在标题下方显示了一个文本，其中包含：“没有记录”或类似的内容。为了删除该文本，我将以下代码添加到 RadGrid：

```
 NoDetailRecordsText="" NoMasterRecordsText="" 
```

所以现在标题下方没有文字，除了一个白色的小条，我认为它非常难看（见下图）。有谁知道如何删除 RadGrid 标题下方的白色条带？

![见标题下方的白色条带！](../Images/4f290d48a2d60924cd3b854686975302.png)

先感谢您！

亲切的问候，韦斯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:43:26.670

这可以很容易地使用 jQuery 之类的东西或只是好的 ol' 普通 JavaScript 来完成，但我认为 RadGrid 上没有类似的属性`DontShowWhiteStripOnEmptyGrid`或任何东西。

使用 jQuery，我可以让[这个 RadGrid](http://demos.telerik.com/aspnet-ajax/grid/examples/performance/linq/defaultcs.aspx)上的白色条消失，使用这个：

```
$('.rgNoRecords').hide() 
```

# java - AsyncTask 的 publishProgress 方法是异步的吗？

> ID：10209497
> 
> 赞同：1
> 
> 时间：2012-04-18T12:36:54.920
> 
> 标签：java, android, android-asynctask

我已经使用`AsyncTask`了很多 - 但我遇到了一个看似简单的问题，让我感到困惑。问题是这样的：

> 是不是`publishProgress(Progress... values)`应该马上回来？换句话说，这个方法是异步的吗？

# 一些背景：

我正在尝试确定以下代码是否

*   无论响应如何，每三秒触发一次 HTTP 请求***或***
*   触发一个 HTTP 请求，等待响应，***然后***在触发下一个请求之前休眠三秒钟。

公共类 MyAsyncTask {

```
@Override
protected void doInBackground(String... params) {
    while (mRunning) {
        // Call publishProgress
        this.publishProgress(makeHttpRequest());

        // Sleep for 3 seconds
        synchronized (lock) {
            try {
                lock.wait(3 * 1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    return null;
}

private HttpResponse makeHttpRequest() {
    HttpResponse ajaxResponse = null;
    Throwable throwable = null;
    try {
        ajaxResponse = mHttpClient.execute(mHttpGet);
    } catch (ClientProtocolException e) {
        // Handle exception
    } catch (IOException e) {
        // Handle exception
    } catch (Exception e) {
        // Handle exception
    }

    return ajaxResponse;

}

@Override
protected void onProgressUpdate(HttpResponse... values) {
    // Do something with the response
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:47:03.363

你在这里问两个不同的事情：

*   `publishProgress()`确实会立即返回，它只是向某些人发布消息`Handler`
*   与行为方式无关`publishProgress()`，您的代码将始终执行 HTTP 请求，等待响应，然后休眠三秒钟。只是内联方法调用`publishProgress(makeHttpRequest())`并不意味着它 `makeHttpRequest()`没有在你的`doInBackground()`方法中被调用的地方执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:45:52.763

```
this.publishProgress(makeHttpRequest()); 
```

等于（Java 不能传递方法。只是结果）

```
HttpResponse resp = makeHttpRequest();
this.publishProgess(resp); 
```

`makeHttpReqest`在后台也是如此。

您比传递立即返回的`HttpResponse`对象`publishProgress`。然后将进度对象异步发送到`onProgressUpdate()`UI 线程中。

-> 这是*然后睡觉*的方式。

# php - 在选择元素中使用数组输出的mysql查询

> ID：10209498
> 
> 赞同：0
> 
> 时间：2012-04-18T12:37:04.750
> 
> 标签：php, mysql, arrays, option

我正在尝试为表单中的几个 html 选项元素编写一个通用函数。每个元素的选项列表都会有所不同，所以我想要做的是根据在我的 mysql 表中引用它们的“id”显示选项，这将是一个数组。该表有 2 列，第一个“id”只是一个数字，第二个“prod_option”是我想要显示的值。请有人可以解释我的代码有什么问题吗？

这是我在 select 元素中调用函数的地方。我的连接没有问题。

```
//This should select 'prod_option' for id's 1,2 & 3 for example
<td><div class="formInput"><label>Cap or Vac:</label>
<select name="pack_req" id="pack_req[]" 
value="**<?php $newProd->packRequirements(1,2,3); ?>**" /></select></div></td>

//function in class
public function packRequirements($values){
$con = $this->connection;
$itms = array($values);

$sql = $con->query("SELECT `prod_option` 
FROM `packaging_requirements` 
WHERE `id`    IN('".implode("', '", $itms)."')"); 

while($r = $sql->fetch_array(MYSQLI_ASSOC)):
echo '<option value="'$itms['prod_option']'"</option>';  
endwhile;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:40:00.613

您可能希望将您的功能放在选择标签之间，例如：

```
<select><?php $newProd->packRequirements(1,2,3); ?></select> 
```

代替：

```
<select value="**<?php $newProd->packRequirements(1,2,3); ?>**"></select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:40:55.183

您的 HTML 似乎是错误的。选择是这样的：

```
<select name="myname">
    <option value="42">Everything</option>
</select> 
```

但是相反，您的代码会生成

```
<select name="pack_req" id="pack_req[]" value="**<option value=". 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:56:08.500

you have to write like this:

```
<select name='selectName'><?php newProd->packRequirements(array(1,2,3)) ?></select>

public function packRequirements($itms = array()) {
   $con = $this->connection;

   $sql = $con->query("SELECT `prod_option` FROM `packaging_requirements` WHERE `id` IN('" . implode(",", $itms) . "')"); 

  while($r = $sql->fetch_array(MYSQLI_ASSOC)) {
     echo '<option value="' . $r['prod_option'] . '">' . $r['prod_option'] . '</option>';
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:50:23.837

```
<td><div class="formInput"><label>Cap or Vac:</label>
<select name="pack_req" id="pack_req[]">
**<?php $newProd->packRequirements(1,2,3); ?>**</select></div></td>

//function in class
public function packRequirements($values){
$con = $this->connection;
$itms = array($values);

$sql = $con->query("SELECT `prod_option` 
FROM `packaging_requirements` 
WHERE `id`    IN('".implode("', '", $itms)."')"); 

while($r = $sql->fetch_array(MYSQLI_ASSOC)):
echo '<option value=".$itms['prod_option'].">'.$itms['prod_option'].'</option>';  
endwhile;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T14:32:42.183

尝试这个 ：

```
public function packRequirements($values = array())
{
   $result ='';
   $string =  implode(',', $values);

   $sql = $con->query("SELECT `prod_option` 
                      FROM `packaging_requirements` 
                      WHERE `id`    IN('".$string."')");
   while($r = $sql->fetch_array(MYSQLI_ASSOC)){
        $result .= '<option value=".$r['prod_option'].">'.$r['prod_option'].'</option>';  
   }
 return $result;

}

<select name="pack_req" id="pack_req[]">
**<?php echo $newProd->packRequirements(arra(1,2,3)); ?>**
</select> 
```

# magento - Magento：在标准结帐（不是单页结帐）中删除地方（评论）订单页面

> ID：10209499
> 
> 赞同：1
> 
> 时间：2012-04-18T12:37:05.247
> 
> 标签：magento, paypal, checkout, magento-1.6

我正在做一个网站只提供“免费送货”的项目。

我是我的标准页面（不是一页结帐），来自 Paypal 后，客户仍然需要查看“查看订单”页面。这个页面是不必要的，因为我们只有免费送货。

有没有办法删除这个页面？

谢谢

# python - Python - 将变量参数传递给 subprocess.call 的最佳方法

> ID：10209511
> 
> 赞同：2
> 
> 时间：2012-04-18T12:37:38.123
> 
> 标签：python, function

我正在尝试使用 python 脚本多次调用外部命令，每次都使用不同的变量。

我看到有人建议使用 subprocess.call 来执行此操作，但是我找到的所有文档都没有解释如何传递此函数变量（例如来自列表）。

我尝试了许多不同的格式，我认为替换是最好的，但似乎该函数不会接受该变量。我*试图*开始工作的代码是：

```
#!/usr/bin/python
domain_list             = ["google.com", "google.ie"]

from subprocess import call

for x in domain_list:
    print x
    cmd_list       = ['dig', '+short', '%s'] %x
    call(cmd_list, shell=True) 
```

这是失败的：

```
Traceback (most recent call last):
File "./dnscheck.py", line 16, in <module>
cmd_list    = ['dig', '+short', '%s'] %arg
TypeError: unsupported operand type(s) for %: 'list' and 'str' 
```

真的，我希望能够传递一堆不同的域（在列表中定义）来挖掘和接收这些域的 IP。

我刚开始使用python，如果这是非常基本的，很抱歉！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:39:58.663

您正在尝试在列表上使用[模运算符](http://docs.python.org/reference/expressions.html#binary-arithmetic-operations)，我假设您想对最后一项进行字符串格式化，因为百分比符号被重载以使用字符串进行格式化，但是您只想插入没有任何格式化的项目，你可以直接给它：

```
['dig', '+short', x] 
```

如果您确实想使用格式化，则需要对字符串执行此操作：

```
['dig', '+short', '%s' % x] 
```

但是请注意，鉴于您没有进行任何格式化，这毫无意义。

# c# - 多线程示例 - 我需要锁定字典吗

> ID：10209517
> 
> 赞同：1
> 
> 时间：2012-04-18T12:38:04.750
> 
> 标签：c#, multithreading, locking

我的一位学生要求我创建一个解释多线程的示例。我想出了这个伪示例，它将产生线程，这些线程将随机循环次数并在循环时休眠。我通过一个使用 Guid 来识别每个线程的字典来跟踪这些线程。

字典可用于用于监视这些线程并可能“杀死”它们的页面。

这看起来合理吗：

```
public class LongProcess
    {
        public static Dictionary<Guid, LongProcess> Monitor = new Dictionary<Guid, LongProcess>();

        public Guid Id { get; set; }

        public int Iterations { get; set; }//number of loops

        public int SleepFactor { get; set; }//rest period while looping

        public int CompletedIterations { get; set; }//number of completed loops

        void Process()
        {
            for(var i = 0 ; i < Iterations; i++)
            {
                Thread.Sleep(1000*SleepFactor);
                SleepFactor = new Random(DateTime.Now.Millisecond).Next(1, 5);
                this.CompletedIterations++;
            }
        }

        public void Start()
        {
            Monitor.Add(Id, this);
            var thread = new Thread(new ThreadStart(Process));
            thread.Start();
        }
    } 
```

下面是如何使用这个类：

```
 var id = Guid.NewGuid();
    var rnd = new Random(DateTime.Now.Millisecond);
    var process = new LongProcess
                      {
                          Iterations = rnd.Next(5, 20),
                          SleepFactor = rnd.Next(1, 5),
                          Id = id
                      };
    process.Start(); 
```

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:42:33.893

只要所有调用都`process.Start`发生在同一个线程上，您就不需要锁定字典，因为它不会在`LongProcess`类内部启动的后台线程中访问。这意味着：您的类`LongProcess`不是线程安全的，但在您当前的代码中这不是问题。
为了安全起见并避免锁定，您可以使用[`ConcurrentDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx).NET4 中的新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T13:20:56.883

其他人已经回答了关于字典锁的问题，我同意他们的看法。

我要改变的一件事是属性的设置器。它们目前是公开的，这意味着您可以在线程迭代时修改底层值，这不是一个很好的 api 设计。

我会在类中添加一个构造函数来获取你想要的参数并将设置器设为私有，这样任何人都不会意外更改你的类上的值，从而导致奇怪的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:43:46.960

您将需要锁定字典，它将被多个线程访问，或者您可以使用 System.Collections.Concurrent.ConcurrentDictionary，它在设计上是线程安全的

# jquery - 获取值文本框并将其发送到 php

> ID：10209527
> 
> 赞同：0
> 
> 时间：2012-04-18T12:38:33.557
> 
> 标签：jquery

我有一个表格，需要将文本框的值发送到 php 端。

我总是将变量的值隐藏起来，然后将其发送到 php 端。我认为这是愚蠢的。有没有办法发送这样的文本框值

```
$.post("adasda", {"degisken1":$("#txtEmail").val()} ,function(response){}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:50:00.657

是的，您可以通过 jquery ajax 、 post 或 get 方法发送文本框值。下面是一个示例

```
$("#searchForm").submit(function(event) {
    /* stop form from submitting normally */
    event.preventDefault(); 

    /* get some values from elements on the page: */
    var $form = $( this ),
        term = $form.find( 'input[name="s"]' ).val(),
        url = $form.attr( 'action' );

    /* Send the data using post and and get the results */
    $.post( url, { s: term },
        function( data ) {
            // write your code here
        }
    );
}); 
```

详情见这里[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

谢谢

# c# - 如何在datagridview的comboboxcell中填充和选择数据

> ID：10209528
> 
> 赞同：0
> 
> 时间：2012-04-18T12:38:38.537
> 
> 标签：c#, winforms, datasource, datagridviewcomboboxcell

朋友们，我的 Windows 应用程序中有一个 datagridview。它有 6 列，其中 2nd(colindex 1) 是组合框类型。其他是文本框类型。我必须从 table1 填充这个组合框。table1 中有两列 - ID 和 Name。只有名称将显示在组合框中。用户可以从该组合框中选择任何一个并在其他 5 列中写入内容。按下保存按钮后，组合框中的 selectedItem 的 ID 和其他 5 个文本框的值将存储在 table2 中。当再次加载表单时，它将从 table2 中获取数据并在 datagridview 中显示相应的数据。我使用数据源来填充组合框。但它不起作用。有没有人有任何想法，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:57:21.747

尝试将`DisplayMember`组合框的 设置为 ，将组合框的`"Name"`设置`ValueMember`为`ID`。

此外，您在设计时执行的绑定（就此而言，任何更改）都在`InitializeComponent`您的类的方法中，具体取决于您使用的 Visual Studio 版本，它将驻留在相同或单独的文件中。

# disqus - 我从 DISQUS 收到 503 connection failed 错误

> ID：10209529
> 
> 赞同：0
> 
> 时间：2012-04-18T12:38:41.197
> 
> 标签：disqus

我最近将**DISQUS**评论系统集成到我的博客（不是 wordpress、博客或任何其他类型的）。我将以前的评论作为**WXR** xml 文件**导入 DISQUS**。每当我转到帖子时，我都会看到**DISQUS成功显示所有评论，但是当我查看 firebug 时，我看到两个 URL** [http://realtime.services.disqus.com/](http://realtime.services.disqus.com/api/2/thread/XXXXXXX)的后台正在发生一些轮询（XHR 请求）[api/2/thread/XXXXXXX](http://realtime.services.disqus.com/api/2/thread/XXXXXXX)和[http://qq.disqus.com/1334752299515229035/XXXXXXX/](http://qq.disqus.com/1334752299515229035/XXXXXXX/)`503`请求因错误而失败。

有趣的是，这仅发生在我的机器上，而不是其他机器上。在其他机器上，我什至看不到任何请求启动。任何机构都可以帮助我为什么会发生这种情况？

**更新**：我也可以在其他机器上重现该问题，一旦用户对帖子发表评论就会发生。这真的让我发疯了！

这是萤火虫屏幕截图

![在此处输入图像描述](../Images/42d62e4d458d0a7997eb056c3fce557e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:40:38.760

DISQUS 经常轮询他们的服务器以加载评论，并且只有当有人从他们的机器上发表评论时才会发生这种轮询。在我的办公机器中，由于连接速度或连接设置速度较慢，我收到“503 连接错误”。

# ios - 在IOS中触摸view时，触摸点会发光吗？

> ID：10209531
> 
> 赞同：1
> 
> 时间：2012-04-18T12:38:42.267
> 
> 标签：ios, touch

就像标题一样，当我触摸 UIView 时，我希望触摸点发光，我想出了一个想法，在触摸点上显示发光图像，但是如果通过代码？任何示例或想法？谢谢分享！ ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:44:52.360

您可以尝试以下代码中的 touchesBegan 事件：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   if([touch view] ==self.my_view)//Check click your uiview or not
  {
       CGRect frame = [your_image_view frame];
       CGPoint touchLocation = [touch locationInView:touch.view];
       frame.origin.x=touchLocation.x;
       frame.origin.y=touchLocation.y;
       [your_image_view setFrame:frame];
       [self.my_view addSubview:your_image_view];
  }

} 
```

谢谢..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:45:45.073

那么第一步是检测你的 UIView 上的触摸，我建议使用高级 API [UIGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)并添加到你的视图中。然后你可以使用回调来做任何你想做的事情，也许是某种动画？如果是这样，您可以使用动画块为您的更改设置动画。

# java - Java：方法返回

> ID：10209532
> 
> 赞同：0
> 
> 时间：2012-04-18T12:38:46.403
> 
> 标签：java, methods

```
public class EulerProblem14 {

 int chainLength=1;
public int findChainLength(int number){
    System.out.println("number "+number);
    System.out.println("Chainlength  "+chainLength);

    if(number==1){
       System.out.println("the number is finally 1 return chain length");
       return chainLength;
    }
   if(number%2==0){
       chainLength++;
     return findChainLength(number/2);
   }
   else {
       chainLength++;
       findChainLength(number*3+1);
   }
   System.out.println("THIS SHOULD NOT BE EXECUTED");
   return -1;
}
public static void main(String args[]){

    System.out.println(new EulerProblem14().findChainLength(13));

} 
```

在解决 Project Euler[问题 14](https://projecteuler.net/problem=14)时，我在 java 中的方法返回中遇到了一个我以前从未遇到过的奇怪问题。在上面的方法中，当数字最终为 1 时，它应该返回链的计数。但这是输入 13 的输出。

> 编号 13 链长 1
> 
> 编号 40 链长 2
> 
> 编号 20 链长 3
> 
> 数字 10 链长 4
> 
> 数字 5 链长 5
> 
> 编号 16 链长 6
> 
> 编号 8 链长 7
> 
> 数字 4 链长 8
> 
> 数字 2 链长 9
> 
> 数字 1 链长 10
> 
> 数字最终为 1 返回链长
> 
> 这不应该被执行
> 
> 这不应该被执行
> 
> -1

问题出在最后一部分，当数字变为 1 而不是返回 chainlength = 10 它以某种方式跳过它并执行不应该执行的代码并返回 -1 。它适用于 2 的所有幂，例如 1,2,4,8，但对于其他幂则失败。

这对我来说可能是一个愚蠢的错误。尽管如此，这对我来说是个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T12:40:20.053

我没有仔细看，但我怀疑这一点：

```
else {
    chainLength++;
    findChainLength(number*3+1);
} 
```

实际上应该是：

```
else {
    chainLength++;
    return findChainLength(number*3+1);
} 
```

然后，您应该能够完全删除该方法的最后两行，因为它们无法访问。

# jquery - 我应该如何在 ASP.NET MVC 3 中处理多个文件上传？

> ID：10209537
> 
> 赞同：1
> 
> 时间：2012-04-18T12:39:04.530
> 
> 标签：jquery, asp.net-mvc-3, razor, asyncfileupload, multifile-uploader

我有一个 ASP.NET MVC 3 应用程序，它需要能够将多个文件上传到服务器。

### 以下是我希望它具有的功能：

*   用于显示上传文件的 JQuery Grid
*   JQuery 上传模式对话框（其中包含 FileUpload 控件）
*   异步上传（上传窗口会显示上传过程中的文件）
*   不想使用 Flash 插件。

### 很高兴拥有：

*   文件上传模式应该是可重用的。

### 问题：

*   Jquery 是否可以选择将文件异步发送到操作方法并将其保存在文件夹和会话变量中？

*   由于我在很多视图中都使用这个组件，我应该遵循 PRG 模式，还是使用 JQuery 异步上传文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:56:02.813

Use Jquery file upload pluging.

I usually use plupload.

[http://www.plupload.com/](http://www.plupload.com/)

My Sample To Use PlUpload:

in View:

```
<div id="file-upload-continer">
    <div id="btnInsertFile" style="display: inline-block; width: 100px; border: 1px solid gray;">Choose File</div>
</div>

<table class="file-upload-box">
<tr>
     <th>Title</th><th></th><th></th>
</tr>
</table>

<script type="text/javascript">
$(function () {
    var uploader = new plupload.Uploader({
        url: '@Url.Action("Upload")',
        multipart : true,
        multipart_params: { },
        runtimes: 'html5,html4',
        container: 'file-upload-continer',
        button_browse_hover : true,
        browse_button: 'btnInsertFile'
    });

    uploader.bind('Init', function (up, params) {
        $('.select-document, .file-upload-box').removeClass("hidden");
        $('.upload-support').addClass("hidden");
    });

    uploader.init();

    uploader.bind('FilesAdded', function (up, files) {
        $.each(files, function (i, file) {
            var newRow = 
                "<tr class='file-row' id='" + file.id + "'>" +
                    "<td class='title'>" + file.name + " (" + formatFileSize(file.size) + ") </td>" +
                    "<td class='cancel' id='cancel" + file.id + "'></td>" +
                    "<td class='status' id='cancel" + file.id + "'></td>" +
                "</tr>";

            $('.file-upload-box').append(newRow);

            //Bind cancel click event
            $('#cancel'+file.id).click(function(){
                $('#' + file.id).remove();
                uploader.removeFile(file);
                $(this).unbind().remove();
            });                 

        });

        uploader.start();
    });

    uploader.bind('BeforeUpload', function (up, file) {
        $(".status", ".file-row#" + file.id).addClass('throbber');
    });

    uploader.bind('FileUploaded', function (up, file) {
        $(".throbber", ".file-row#" + file.id).addClass('success').removeClass('throbber');
        $(".cancel", ".file-row#" + file.id).removeClass('cancel');
    });

    uploader.bind('Error', function (up, err) {
            $(".throbber", ".file-row#" + err.file.id).addClass('error').removeClass('throbber');
            $(".cancel", ".file-row#" + err.file.id).removeClass('cancel');
    });

});

</script> 
```

and in My Controller:

```
public ActionResult Upload(string name = "", int chunk = 0)
{
    if (Request.Files.Count < 1)
        return Json(false);

    HttpPostedFileBase fileUpload = Request.Files[0];

    // Save file

    return Json(true, "text/html");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:55:11.767

如果您想使用 jQuery 上传文件，我会向您推荐这个库：

[http://www.uploadify.com/](http://www.uploadify.com/)

它可以异步上传多个文件。他们的网站上有足够的例子。

[http://www.uploadify.com/demos/](http://www.uploadify.com/demos/)

# arrays - JSTL 不生成 JSON 数据

> ID：10209539
> 
> 赞同：2
> 
> 时间：2012-04-18T12:39:10.530
> 
> 标签：arrays, json, jsp, jstl

我正在尝试使用 JSP/JSTL 编写一个 API 来生成 JSON 输出，但它无法正常工作，我无法找出问题所在。**在使用C 标记库**读取数组时，我遇到了问题。这里是代码：

```
<%@ page import="java.lang.*,java.io.*,java.util.*,java.sql.*"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%>
<%@ taglib prefix="json" uri="http://www.atg.com/taglibs/json" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<sql:setDataSource var="snapshot" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/abc" user="root"  password="xxx"/>
<sql:query dataSource="${snapshot}" var="result" sql="SELECT countries_name,countries_iso_code_2  FROM countries"/>

<json:object> 
    <json:object name="list">
        <c:forEach var="row" items="${result.rows}">
        <json:object items="countries">
            <json:property name="Country" value="${row.countries_name}"/>
            <json:property name="iso" value="${row.countries_iso_code_2}"/>
        </json:object>
        </c:forEach>
  </json:object>
</json:object> 
```

我得到的例外是

```
org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.ws.indexajson_jsp
    org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:178)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:370)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

请帮我解决问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:08:52.790

我刚刚解决了它。我刚刚删除了**C 标记库** 将 json 生成代码更改为

```
<json:object> 
    <json:object name="list">
        <json:array name="countries" var="row" items="${result.rows}">
            <json:object>
                <json:property name="Country" value="${row.countries_name}"/>
                <json:property name="iso" value="${row.countries_iso_code_2}"/>
            </json:object>
        </json:array>
    </json:object>
</json:object> 
```

它有效。我得到的问题是我的数组语法。

# fonts - 支持一些基本音乐符号的网络字体

> ID：10209549
> 
> 赞同：1
> 
> 时间：2012-04-18T12:39:36.060
> 
> 标签：fonts, webfonts

我正在处理一个显示一些音符名称的网页，例如“B”、“Bb”（降 B）或 C#（升 C）。为了更好的可读性，我更喜欢显示正确的扁平和锐利符号。

似乎标准的无衬线字体如 Arial 或 Helvetica 不支持这些符号，这使我得出结论，我需要找到一种看起来类似于广泛使用的无衬线字体（Arial、Helvetica）和在加法有这两个符号。

Q1：你知道这样的网络字体吗？

Q2：还是我完全弄错了，Arial 和 Helvetica 确实支持乐谱符号，而且它们恰好在这两种字体的相同位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:34:43.253

除了使用 CSS3 允许程序员安全地使用自定义字体之外，您还可以只使用上标或下标 'b' 或 '#'。人们很可能会明白你的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:37:04.160

[https://graphicdesign.stackexchange.com/questions/7058/web-font-that-supports-some-basic-music-symbols](https://graphicdesign.stackexchange.com/questions/7058/web-font-that-supports-some-basic-music-symbols)

这可能**是**一个用户体验问题，因为这样的网络字体将无法访问。如果您不喜欢 b 或 # ，那么您可以使用带有“flat”或“sharp”替代文本的内联图像，以便屏幕阅读器能够应付。

如果您只是使用音乐网络字体中的一个随机字符（例如，降音板位于 M 通常所在的位置），屏幕阅读器可以将降 A-flat 读为 AM——无论是单词*am*还是两个字母*AM——*这不好。使用 Ab 或 C# 也是如此：屏幕阅读器不一定会读出上下文所需的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-19T15:40:45.050

至于 Q1，IMO 显示足够扁平和锐利符号的字体是 Arial Unicode MS： [![Flat-Sharp-Symbols](../Images/514087bb7ae99fb5ddf08d420de50b55.png)](https://i.stack.imgur.com/NQl1e.png)

它也用于本网站： [https://en.wikipedia.org/wiki/Chord_names_and_symbols_(popular_music)](https://en.wikipedia.org/wiki/Chord_names_and_symbols_(popular_music))

不幸的是，这个字体的大小是 22 MB，对于那些符号来说有点大。

# cordova - PhoneGap / Cordova 1.6 和 dojo 1.7.2 AMD 在网络上工作，而不是在本地工作？

> ID：10209558
> 
> 赞同：1
> 
> 时间：2012-04-18T12:40:24.980
> 
> 标签：cordova, dojo, amd

我最近将我的 PhoneGap/dojo1.6 应用程序升级到了 cordova 1.6，一切正常。

然后我使用托管 dojo 升级到 dojo 1.7.2： [script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" data-dojo-config="异步：真"][/script]

再一次，一切正常。

但是当我尝试使用本地 dojo 时，就像我在使用 dojo1.6 和 cordova1.6 时所做的那样，找到并加载了 dojo.js，但应用程序不会启动/加载其他 dojo 模块文件。

[脚本 src="dojo1.7.2/dojo/dojo.js" data-dojo-config="async: true"][/script]

我结束了整个 dojo1.7.2 的复制（没有构建任何东西），但应用程序仍然无法加载，并且我在控制台中没有收到任何错误消息。

有谁知道可能是什么问题？

在此先感谢，盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:01:16.120

尝试在您的 dojo [script src=] 中使用以下配置：

```
data-dojo-config="async:false,parseOnLoad:true" 
```

**还要在 dojo.js 文件之前**包含 cordova.js文件。

# android - Android在RelativeLayout的顶部和中心对齐图像

> ID：10209564
> 
> 赞同：8
> 
> 时间：2012-04-18T12:40:47.640
> 
> 标签：android, android-imageview

我正在尝试将图像对齐到我的相对布局的顶部，然后水平居中。这是我使用的代码：

```
<ImageView  
        android:id="@+id/collection_image_background"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"  /> 
```

，但是这段代码不起作用。我的图像居中，但未在我的相对布局顶部对齐。我试过了`android:scaleType="fitStart"`，但它实际上是左对齐图像和它的父元素的顶部。

那么知道如何根据需要正确对齐图像吗？

PS我忘了提到我正在将图像设置为`ImageView`这样：

```
 BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inTempStorage = new byte[8*1024];

    ops = BitmapFactory.decodeStream(cis,null,o2);
    ImageView view = (ImageView) findViewById(R.id.collection_image_background);
    view.setImageBitmap(ops); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T12:43:20.143

代码似乎很完美，除了您分配的内容区域`fill_parent`采用整个视图并将显示为中心，因此只需修改它`wrap_content`

```
 <ImageView  
            android:id="@+id/collection_image_background"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"  /> 
```

# jquery - 在我的 jquery 对话框的按钮上添加一个类

> ID：10209570
> 
> 赞同：1
> 
> 时间：2012-04-18T12:41:03.623
> 
> 标签：jquery, jquery-ui-dialog

我有一个 jQuery 对话框：

```
 // Configure buttons
    var dialogButtons = {};

    dialogButtons[buttonConfirm] = function () {
        $.ajax({
            type: "Post",
            url: href,
            cache: false,
            success: function (data) { var func = success; window[func](data); }
        });
        $(this).dialog("close");
    };

    dialogButtons[buttonCancel] = function () {
        $(this).dialog("close");
    };

    // Configure dialog
    $dialog.dialog(
        {
            modal: true,
            closeOnEscape: true,
            resizable: false,
            buttons: dialogButtons
        });

    // Opening dialog
    $dialog.dialog('open'); 
```

**我的问题**：我想在我的按钮上设置一个特定的类“btn”。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:48:31.403

@Colin 有一个答案，但我想我会更具体地讨论有问题的对话。jQuery-UI 有一个`widget`方法可以返回由对话框本身组成的元素。将此与定位`ui-button`类相结合，您可以获得所需的内容：

```
$dialog.dialog('widget') // Grab widget (UI element)
  .find('.ui-button')    // Locate buttons within
  .addClass('btn');      // hadd btn class to them 
```

编辑：另外，这是一个例子：http: [//jsfiddle.net/8WckB/](http://jsfiddle.net/8WckB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:50:44.813

```
// Configure dialog
$dialog.dialog({
    modal: true,
    closeOnEscape: true,
    resizable: false,
    buttons: dialogButtons,
    open: function(e, ui) { 
        $(this).parents(".ui-dialog").find(".ui-dialog-buttonset"); // here is your 
                                                                    // button container
        $(this).parents(".ui-dialog").find(".ui-dialog-buttonset .ui-button").addClass("btn"); // whereas this would select
                                                                                               // all buttons in button container
        // you could even use the widget method
        // $(this).dialog("widget").find(".ui-dialog-buttonset .ui-button")
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T13:50:59.703

如果您查看源代码，在方法`_createButtons`中`jquery.ui.dialog.js`您会看到由按钮文本索引的哈希如果不是函数，则被视为属性集合。因此，您可以执行以下操作：

```
var $dlg = $('#dlg').dialog({
    buttons: {
        'firstButton': {            
            'click': function() {
                $dlg.dialog('close');
            },
            'text' : 'OK',         
            'class': 'myclass'
        },
        'Cancel': function(){
            $dlg.dialog('close');
        }
    }
}); 
```

这是布拉德小提琴的一个分支，演示了代码[http://jsfiddle.net/uWnpy/](http://jsfiddle.net/uWnpy/)

# c# - 如何按日期时间列对整个 gridview 行进行排序？

> ID：10209573
> 
> 赞同：-4
> 
> 时间：2012-04-18T12:41:16.710
> 
> 标签：c#, asp.net, sql

*   我的asp页面和sqldatasource上有一个gridview，用于将数据表信息绑定到gridview。
*   我有 6 列：
*   第一列称为 ID ：类型：int，递增一，主键。
*   其他列是名称，年龄等。
*   最后一列称为Added:type:datetime。

我需要添加一个按钮或下拉列表并不重要，我可以通过 DateTime 列对整个 gridview 行进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:51:40.390

由于您已经使用了`SQLDataSource`，`Gridview`我想说使用 GridView 的[AllowSorting](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.allowsorting.aspx)属性（`AllowSorting="True"`在您的标记中）将是您最简单的选择。这将自动生成按钮，让您按您喜欢的任何列进行排序。

例如：

```
<asp:GridView ID="GridView1" AllowSorting="True"> 
```

第二种选择是在您的数据源中进行排序。您可以将`SelectCommand`in更改为`SQLDataSource`以“ `ORDER BY Added DESC`.”结尾。如果您不希望排序是动态的、用户提示的事件，而只是静态的、默认的`GridView`、不会改变的排序，这将是理想的。

例如：

```
<asp:SQLDataSource ID="SQLDataSource1"
    SelectCommand="SELECT ID, Name, Age, Column4, Column5, Added FROM yourTable ORDER BY Added DESC"> 
```

# cookies - Apache CXF 不使用“Expires”指令处理 cookie？

> ID：10209580
> 
> 赞同：0
> 
> 时间：2012-04-18T12:41:51.500
> 
> 标签：cookies, jersey, cxf

我们在同一个 java 项目中使用 SUN Jersey 客户端使用一些 REST 服务和使用 Apache CXF 来提供一些 REST 服务。我们使用的一些服务返回带有“过期”指令集的 cookie。例如`Set-Cookie: name=value; Expires=Wed, 09 Jun 2021 10:18:14 GMT`。

考虑下面的代码，假设 wr 是 Jersey WebResource。ClientResponse 也是一个 Jersey 类。

```
ClientResponse resp = wr.get(ClientResponse.class);
System.out.println(resp.getCookies()) 
```

现在，对于带有 expires 指令的 cookie，不会返回实际的 cookie。相反，expires 指令本身作为 cookie 返回（cookie 的名称是 Expires，值是日期）。

经过一番挖掘，我们发现这是由于 CXF 解析 Set-Cookie HTTP 头的方式造成的。请参考[此处](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-frontend-jaxrs/2.5.2/org/apache/cxf/jaxrs/impl/NewCookieHeaderProvider.java?av=f)的 fromString 方法。基本上，代码认为`<name>=<value>`它在 Set-Cookie 标头中找到的最后一对是 cookie。在这种情况下，`expires=<date>`发生在之后`name=value`（后者是所需的实际 cookie）。

OTOH，Jersey 的标头解析代码[在这里](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-core/1.2/com/sun/jersey/core/header/reader/CookiesParser.java#CookiesParser.parseNewCookie%28java.lang.String%29)（实际的 impl 类在[这里](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-core/1.2/com/sun/jersey/core/impl/provider/header/NewCookieProvider.java#NewCookieProvider.fromString%28java.lang.String%29)，它调用前者）返回实际的 cookie，忽略 expires 指令。这种行为对我们来说已经足够好了。所以我们想选择泽西的版本。我们如何做到这一点？请注意，我们还需要项目仍然使用 CXF（服务服务），因此无法删除依赖项。

有问题的项目是一个 Maven 项目。

# ios - 使用多页 UITableView 数据创建文本 pdf

> ID：10209583
> 
> 赞同：1
> 
> 时间：2012-04-18T12:42:04.530
> 
> 标签：ios, uipageviewcontroller

> **可能重复：**
> [当表格视图太大而无法显示在屏幕上时，打印表格视图的所有行](https://stackoverflow.com/questions/13795141/print-all-rows-of-a-table-view-when-its-too-large-to-fit-on-screen)

我需要实现创建文本 pdf 的功能，其中包含具有 UITableView 控制器的视图的多个页面。

我可以创建 pdf，但只有一页。

问题是这样的：我无法在将 tableView 渲染到 pdf 上下文时破坏它。我正在使用以下代码来执行此操作：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

UIGraphicsBeginPDFContextToFile([NSString stringWithFormat:@"%@/test.pdf",documentsDirectory],CGRectMake(0, 0, m_TableView.frame.size.width, m_TableView.frame.size.height), nil);

UIGraphicsBeginPDFPage();
[self.m_TableView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIGraphicsEndPDFContext(); 
```

如您所见，我正在使用`self.m_TableView.layer`渲染。我不能打破 UITableView 层。

有没有其他方法可以从 tableview 控件创建包含多个页面的 pdf？

# jsf - PrimeFaces dataTable - 如何在更改时滚动到底部

> ID：10209589
> 
> 赞同：1
> 
> 时间：2012-04-18T12:42:29.910
> 
> 标签：jsf, primefaces

我有一个 PrimeFaces 数据表，它会根据页面的各种控件的操作进行刷新。（我用`p:ajax update="myDataTable"`..）

我有一个调用`row.scrollIntoView(true)`最后一个表行的 JavaScript 方法。（更好的`row.scrollIntoViewIfNeeded(true)`似乎仅在 Chrome 中可用。）

好吧，我需要表格在这样的刷新时滚动到最后一个条目。有什么我可以听的活动吗？还是有替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T21:46:50.177

将 JQuery 用于（PrimeFaces 原生支持）：

```
function scrollToBottom() {
    $('.ui-datatable-scrollable-body').scrollTop(100000)
} 
```

下一个，

```
<p:ajax update="myDataTable" oncomplete="scrollToBottom()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:45:42.460

`p:ajax`标签有一个`oncomplete`属性。你可以使用：

```
<p:ajax update="myDataTable" oncomplete="yourJsMethod()"/> 
```

# c# - 两个 CheckListBoxes，用户可以在任何一个上选择一个项目并在另一个上选择一个项目？

> ID：10209590
> 
> 赞同：-2
> 
> 时间：2012-04-18T12:42:31.810
> 
> 标签：c#, .net, winforms, visual-studio

这是我的场景：

1.  我在 Winform 上有**两个清单框**（即**名称和昵称**清单框）
2.  如果用户在第一个清单框中选择**名称，**则应在第二个清单框中自动选择相应的**昵称**
3.  如果用户**在第二个清单框中选择昵称，**则应在第一个清单框中自动选择相应的**名称**

任何人都可以帮助如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:54:54.600

您应该使用每个复选框中的 SelectedIndexChanged 事件，并从对应值的另一个复选框中搜索项目集合。您应该从数据库或类似的东西中获取匹配项。

希望有帮助..

# javascript - 加载大 HTML

> ID：10209598
> 
> 赞同：0
> 
> 时间：2012-04-18T12:43:01.373
> 
> 标签：javascript, html

我有一个非常大的 html 文件，dom 元素的大小超过 1500。基本上有很多 div 元素，我们加载所有这些 div。但是，我们不会在开始时显示所有这些 div。有没有办法可以按需加载这些 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:53:57.180

我假设您的意思是 1500 个元素。

研究 AJAX 和延迟加载，因此当用户接近它或它可见时加载内容。

[http://www.thewebsqueeze.com/web-design-tutorials/introduction-to-ajax-with-jquery.html](http://www.thewebsqueeze.com/web-design-tutorials/introduction-to-ajax-with-jquery.html)

[http://www.lunatech-research.com/archives/2011/08/10/lazy-loading-jquery-ui-ajax-play](http://www.lunatech-research.com/archives/2011/08/10/lazy-loading-jquery-ui-ajax-play)

[http://cflove.org/2010/09/how-to-build-a-lazyload-ondemand-load-with-jquery.cfm](http://cflove.org/2010/09/how-to-build-a-lazyload-ondemand-load-with-jquery.cfm)

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

一个更重要的问题，你真的需要 1500 个元素吗，看起来很多。有没有办法可以减少元素的数量、使用分页或单独的页面？

# 例子

```
function loadHeads() {
  $.ajax({
    url: "/mycontent.html",
    context: document.body
  }).done(function(data) { 
    $("#container").html(data);
  });
}

$("#container").bind("mouseleave", function() {
   $(this).empty();
});

<div id="head" onclick="loadHeads()"></div>
<div id="container"></div> 
```

# sql-server - 跳过 SQL Server 子查询

> ID：10209600
> 
> 赞同：0
> 
> 时间：2012-04-18T12:43:04.523
> 
> 标签：sql-server

我想像这样使用左外连接：

```
 SELECT ...
FROM Table1
LEFT OUTER JOIN
(SELECT only e.g. 3rd record... , SomeField FROM Table2) tbl2
  ON Table1.SomeField = tbl2.SomeField 
```

如果我需要子查询不仅要从 Table2 中选择第 3 条记录，还要选择具有 SomeField = Table1.SomeField 的 Table2 记录中的第 3 条记录，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:48:10.140

如果这是 sql server 2005 或更新版本，您可以使用[row_number()](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.90%29.aspx)：

```
LEFT JOIN
(
   select *
     from
     (
       select *,
              row_number() over (order by something) rn
         from Table2
        where Table2.Column = Table1.Column
     ) a
    where a.rn = 3
) a 
```

不幸的是，您需要将其嵌套更深，因为您不能直接在条件中使用 row_number。

**编辑：**

我的错 - 我并没有真正注意到加入部分。如果要连接派生表，请使用：

```
LEFT JOIN
(
   select *,
          row_number() over (partition by SomeField order by something) rn
     from Table2
) tbl2
  ON Table1.SomeField = tbl2.SomeField
 AND tbl2.rn = 3 
```

注意：您需要在 row_number() 中使用 ORDER BY 以保持一致。

# spotify - 有没有办法使用 spotify web api 为艺术家/专辑/歌曲获取艺术品？

> ID：10209610
> 
> 赞同：0
> 
> 时间：2012-04-18T12:43:23.857
> 
> 标签：spotify

> **可能重复：**
> [使用 Spotify API 检索封面图稿](https://stackoverflow.com/questions/10123804/retrieve-cover-artwork-using-spotify-api)

有没有办法使用 spotify web api 为艺术家/专辑/歌曲获取艺术品？查找，搜索或其他任何东西......提前非常感谢！

# android - 如何为android中的许多服务多次调用asynctask

> ID：10209615
> 
> 赞同：0
> 
> 时间：2012-04-18T12:43:46.810
> 
> 标签：android, web-services, android-asynctask

我有 PHP 网络服务，我想把它叫做 throw `AsyncTask`..在这个阶段我没有问题..我的问题是我想让一个类扩展`AsyncTask`并传递给它`uri`，以便*在许多活动中多次*`webservices`调用它，但我不知道该怎么做并调用 asynctask .. 任何帮助.. 谢谢

 *这是我试图做的，但它不起作用

```
 public class GetNetworkData  extends AsyncTask<String, Void, String>{

    String uri;
    private OnPostExecuteListener  mPostExecuteListener = null;
    public static interface OnPostExecuteListener
    {

                void onPostExecute(String result);

            }

    GetNetworkData(
            String Url,
            OnPostExecuteListener postExecuteListener) throws Exception {

            uri = Url;
            mPostExecuteListener = postExecuteListener;
            if (mPostExecuteListener == null)
                throw new Exception("Param cannot be null.");
        }

    @Override
    protected String  doInBackground(String... params) {
        // TODO Auto-generated method stub  

        JSONObject param=null;
      String result = null;
      HttpClient httpClient = new DefaultHttpClient();
            HttpHost httpHost = new HttpHost("192.168.3.111",80);  
            HttpPost httpPost = new HttpPost(uri);
            httpPost.addHeader("Content-Type", "application/json; charset=utf-8");

            try
            {
                //HttpEntity bodyEntity = new StringEntity(param.toString(), "utf8");
                //httpPost.setEntity(bodyEntity);
                HttpResponse response = httpClient.execute(httpPost);
                HttpEntity entity = response.getEntity();

                if (entity != null) {
                    InputStream instream = entity.getContent();
                    BufferedReader reader = new BufferedReader(
                         new InputStreamReader(instream));
                    StringBuilder sb = new StringBuilder();

                    String line = null;
                    while ((line = reader.readLine()) != null)
                        sb.append(line + "\n");

                    result = sb.toString();
                    instream.close();      
                }

                }
                catch (Exception e) {
                    // TODO: handle exception
                }

        return result;
    }   

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
         if (mPostExecuteListener != null)
         {
          try {
                    JSONObject json = new JSONObject(result);
                    mPostExecuteListener.onPostExecute(result);
                } catch (JSONException e){
                    e.printStackTrace();
                }
            }           
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:51:59.117

`GetNetworkData`随时随地创建类实例。如果所有调用的`Url`和参数都相同，您可以考虑一个包装类，它将这些保存在实例变量中并按需创建对象。`postExecuteListener``GetNetworkData`

使用的代码`GetNetworkData`是：

```
String url = "http://....";
GetNetworkData.OnPostExecuteListener listener = new GetNetworkData.OnPostExecuteListener() {
    @Override
    public void onPostExecute(String result) {
        Log.d("AsyncTask", "onPostExecute: " + result); 
        //Do what you want to do after the task is complete
    }
};

GetNetworkData task = new GetNetworkData(url, listener);
task.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:56:22.837

打电话做它喜欢，

```
String url = "so and so url";
new GetNetworkData().execute(url); 
```

在你的 doInBackground() 中，

```
@Override  
protected String  doInBackground(String... params) {  
    // TODO Auto-generated method stub  
    urlToUse = params[0];     
} 
```

每次执行AsyncTask..它都会去`doInBackgroud()`执行里面的代码..在代码执行完成后..它会自动进入`onPostExecute()`AsyncTask的生命周期。我认为..您不需要为此做任何事情..对于 AsyncTask 的每个不同调用。*

# android - 类似幻灯片的应用程序

> ID：10209617
> 
> 赞同：0
> 
> 时间：2012-04-18T12:43:50.550
> 
> 标签：android, android-layout, slideshow, android-animation

我应该做一个简单的android应用程序，实际上它几乎就像幻灯片一样简单。

好消息是每张幻灯片的内容都非常相似——一些文字和一张照片。所以我只需要做一个布局，然后简单地通过滑动或按下按钮来切换它的内容。

我认为如果我添加一些合适的动画会更有吸引力 - 例如翻转整个页面。

是否已经有一个工具可以做到这一点？如果不是最好/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:17:52.110

[http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)

# asp.net-mvc - 删除客户端验证

> ID：10209622
> 
> 赞同：2
> 
> 时间：2012-04-18T12:44:11.557
> 
> 标签：asp.net-mvc

假设我有一个特定的问题需要删除一些数据注释的必需属性，我该怎么做？

我知道视图模型，但由于某些原因我不想使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:11:11.457

如果您只想禁用客户端中单个字段的验证，则可以覆盖验证属性，如下所示：

```
@Html.TexBoxFor(model => model.SomeValue,                  
new Dictionary<string, object> { { "data-val", false }}) 
```

这是更多答案的[来源](https://stackoverflow.com/questions/5367287/asp-net-mvc-3-disable-required-validation-attribute-under-certain-circumstances)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:18:41.123

这将禁用基于选择器的某些元素的验证

```
var validationSettings = $.data($('#formToValidateId').get(0), 'validator').settings;  
validationSettings.ignore = '.ignore'; 
```

查看此[博客](http://bartwullems.blogspot.com/2012/03/aspnet-mvc-3-configuring-unobtrusive.html)以获取更多信息

# javascript - Raphael 中的堆叠折线图或流线图？

> ID：10209623
> 
> 赞同：4
> 
> 时间：2012-04-18T12:44:11.843
> 
> 标签：javascript, d3.js, raphael, stacked-area-chart, stream-graph

有人在 Raphael 中有任何堆叠图（或流图）的例子吗？

我想知道是否有与此[D3 流图](http://mbostock.github.com/d3/ex/stream.html)等效的 Raphael 工作：

![在此处输入图像描述](../Images/542906ed7cd6f4fa2e2f0e69246c52ca.png)

我见过的最接近的是[这个折线图](http://raphaeljs.com/chart.html)示例：

![在此处输入图像描述](../Images/b85f4ca4d9ec5983dbeb2c6617c1bd82.png)

我想我可以基于此敲出一个堆叠图，但如果有人已经有了一些大纲代码，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:24:53.477

你在寻找这样的东西[吗](http://g.raphaeljs.com/)？它以拉斐尔为原型。

如果你需要更强大的东西，我可以推荐[Sencha ExtJS](http://www.sencha.com/products/extjs/examples/#sample-3)。 [面积图 #1](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/charts/Area%20-%20BrowserStats.html)和[面积图 #2](http://dev.sencha.com/deploy/ext-4.0.7-gpl/examples/charts/Area.html)看起来很像您发布的 D3 流图。

# c# - 文件流异常

> ID：10209624
> 
> 赞同：0
> 
> 时间：2012-04-18T12:44:21.137
> 
> 标签：c#, filestream, argumentexception

```
byte[] bFileName = new byte[512];
r2Socket.Receive(bFileName);
String FileName = Encoding.UTF8.GetString(bFileName);
System.Windows.Forms.MessageBox.Show(FileName); // It's Ok. Show FileName = "text.jpg"

FileStream = new FileStream("D:\\" + FileName, FileMode.Create, FileAccess.Write); 
```

> 文件流参数异常
> 
> path 是一个空字符串 ("")，只包含空格，或者包含一个或多个**无效字符**。- 或 - path 指的是非文件设备，例如 NTFS 环境中的“con:”、“com1:”、“lpt1:”等。

为什么会发生？谢谢。

==

```
//CLIENT
byte[] bFileName = new byte[512];
Socket Socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
Socket.Connect(textBoxIP.Text, int.Parse(textBoxPORT.Text));
FileInfo sFileInfo = new FileInfo(textBoxFILE.Text);
string FileName = sFileInfo.Name;
bFileName = Encoding.UTF8.GetBytes(FileName);
Socket.Send(bFileName);
//SERVER
Socket rSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
IPAddress rIPAddress = Dns.GetHostEntry("localhost").AddressList[0];
IPEndPoint rIPEndPoint = new IPEndPoint(IPAddress.Any, int.Parse(textBoxPORT2.Text));
rSocket.Bind(rIPEndPoint);
rSocket.Listen(1);
byte[] bFileName = new byte[512];
r2Socket.Receive(bFileName);
String FileName = Encoding.UTF8.GetString(bFileName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:11:22.740

I'm going to guess it's because you are using UTF-8, and NTFS uses something else, thus the invalid characters error. I would try using another encoding.

Check out this SO post: [What encoding are filenames in NTFS stored as?](https://stackoverflow.com/questions/2050973/what-encoding-are-filenames-in-ntfs-stored-as)

# c# - MVC3 EF 代码优先“外键”数据

> ID：10209628
> 
> 赞同：1
> 
> 时间：2012-04-18T12:44:39.317
> 
> 标签：c#, asp.net-mvc, entity-framework

我来自网络表单，我正在尝试在 MVC 中复制一个简单的数据模型。我是 .NET 和 C# 新手，如果这是一个非常简单的问题，请原谅。我有“信件”，每个信件都有一个类别和多个收件人。EF 似乎在 SQL 后端正确创建了我的数据模型，但我无法访问视图中的类别。这是我的模型：

```
namespace FFLettersMVC.Models
{
    public class Letter
    {
        public int id {get; set;}
        public DateTime dateCreated { get; set; }
        public string letterTitle { get; set; }
        public DateTime dateMailed { get; set; }
        public string createdBy { get; set; }
        public string Type { get; set; }
        public int CategoryID { get; set; }
        public Category Category { get; set; }
        public virtual ICollection<Recipient> Recipient { get; set; }
    }
    public class Category
    {
        public int id { get; set; }
        public string name { get; set; }
    }
    public class Recipient
    {
        public int id { get; set; }
        public int letterID { get; set; }
        public string fname { get; set; }
        public string lname { get; set; }
        public string ssnTin { get; set; }
        public string email { get; set; }
        public Letter Letter { get; set; }
    }
} 
```

详细信息页面的控制器代码：

```
//
// GET: /Letter/Details/5

public ViewResult Details(int id)
{
    Letter letter = db.Letters.Find(id);
    return View(letter);
} 
```

查看代码尝试访问评论属性：

```
<div class="display-label">Category</div>
<div class="display-field">
     @Html.DisplayFor(model => model.Category.name)
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:54:43.843

你需要把它变成虚拟的，就像你对 Recipient 所做的那样。

```
public virtual Category Category { get; set; } 
```

将属性标记为“虚拟”会通知 EF 在创建其代理时覆盖该属性。

# java - Java - 清理文件路径

> ID：10209635
> 
> 赞同：1
> 
> 时间：2012-04-18T12:45:12.433
> 
> 标签：java, path

我想清理我在应用程序中使用的路径。路径可以修改，有时我会得到类似的东西：

```
C:/users/Username/Desktop/\..\..\..\Windows\Web\..\..\Program Files\..\Program Files\..\Python27\ 
```

但我想有类似的东西：

```
C:\Python27\ 
```

那是一个例子！

如何清理路径以仅获取必要的部分？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:48:59.727

如果`fileName`是您的文件名字符串，则类似于：

```
String cleanedFilename = new File(fileName).getCanonicalPath(); 
```

应该这样做...

另请参阅[API 说明](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath%28%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T12:48:27.617

您可以尝试使用 File.getCanonicalPath() 方法：

```
File file = new File("my/init/path");
String path = file.getCanonicalPath(); 
```

我还没有测试，但告诉我们！

**编辑：** @MathiasSchwarz 是对的，使用 getCanonicalPath() 而不是 getAbsolutePath() （[链接](https://stackoverflow.com/questions/1099300/whats-the-difference-between-getpath-getabsolutepath-and-getcanonicalpath)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T12:51:42.307

这是我刚刚尝试过的代码。

`new File("c:/temp/..").getCanonicalPath();`

它返回'C：\'，这是正确的。的父母`c:/temp`确实是`c:\`

# python - 为什么我应该在 python 的多线程中 start() 之后加入()？

> ID：10209638
> 
> 赞同：2
> 
> 时间：2012-04-18T12:45:39.690
> 
> 标签：python, multithreading

正如示例代码所示：

```
for temp in range(0, 10):
       thread = threading.Thread(target = current_post.post)
       thread.start()
       threads.append(thread)

for current in range(10):
        threads[current].join() 
```

该代码只是python文件的一部分，但它代表大多数情况：我应该在多线程`join()`之后执行。`start()`我已经被它弄糊涂了好几天了。众所周知，当我们执行时`thread.start()`，会启动一个新线程，python 会自动运行不同的线程，这就是我们所需要的。如果是这样，我为什么要在`thread.join()`之后添加`start()`？`join()`意味着**等到当前线程完成 IMO**。但这是否意味着一种单线程？我必须等待每个线程完成他们的任务，而不是多线程！`join()`仅表示IMO一一执行指定的功能。无法`start()`完美完成多线程？为什么我要添加`join()`功能让他们一个一个完成？谢谢任何帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:47:37.007

您这样做是为了确保您的线程实际上已经完成（并且在您的主线程退出后不会成为僵尸进程）。

但是，您不必在启动线程后立即执行此操作。您可以在流程的最后阶段执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:48:19.020

Join 将阻塞当前线程，直到调用 join 的线程完成。

本质上，您的代码正在启动大量线程，然后等待它们全部完成。

如果您不这样做，那么该进程可能会退出，并且您的任何线程都不会做任何事情。

# python - 在 CSV 文件中搜索单个列以查找特定值并返回整行

> ID：10209641
> 
> 赞同：3
> 
> 时间：2012-04-18T12:45:44.447
> 
> 标签：python, search, csv

**问题**

该代码无法正确识别输入（项目）。即使 CSV 文件中存在这样的值，它也会简单地转储到我的失败消息中。谁能帮我确定我做错了什么？

**背景**

我正在开发一个小程序，该程序要求用户输入（此处未给出函数），搜索 CSV 文件（项目）中的特定列并返回整行。CSV 数据格式如下所示。我已经从实际数量（49 个字段名称，18000+ 行）中缩短了数据。

代码

```
import csv
from collections import namedtuple
from contextlib import closing

def search():
    item = 1000001
    raw_data = 'active_sanitized.csv'
    failure = 'No matching item could be found with that item code. Please try again.'
    check = False

    with closing(open(raw_data, newline='')) as open_data:
        read_data = csv.DictReader(open_data, delimiter=';')
        item_data = namedtuple('item_data', read_data.fieldnames)
        while check == False:
            for row in map(item_data._make, read_data):
                if row.Item == item:
                    return row
                else:
                    return failure 
```

CSV 结构

```
active_sanitized.csv
Item;Name;Cost;Qty;Price;Description
1000001;Name here:1;1001;1;11;Item description here:1
1000002;Name here:2;1002;2;22;Item description here:2
1000003;Name here:3;1003;3;33;Item description here:3
1000004;Name here:4;1004;4;44;Item description here:4
1000005;Name here:5;1005;5;55;Item description here:5
1000006;Name here:6;1006;6;66;Item description here:6
1000007;Name here:7;1007;7;77;Item description here:7
1000008;Name here:8;1008;8;88;Item description here:8
1000009;Name here:9;1009;9;99;Item description here:9 
```

**笔记**

我在 Python 方面的经验相对较少，但我认为这将是一个很好的问题，以便了解更多信息。

我确定了打开（并包装在关闭函数中）CSV 文件的方法，通过 DictReader 读取数据（以获取字段名称），然后创建一个命名元组以便能够快速选择输出所需的列（项目、成本、价格、名称）。列顺序很重要，因此使用 DictReader 和 namedtuple。

虽然有可能对每个字段名称进行硬编码，但我觉得如果程序可以在文件打开时读取它们，那么在处理具有相同列名但列组织不同的类似文件时会更有帮助。

**研究**

*   CSV Header and named tuple： [将 CSV 文件数据读取为命名元组行的 Python 方法是什么？](https://stackoverflow.com/questions/9007174/what-is-the-pythonic-way-to-read-a-csv-file-header)
*   将 CSV 数据转换为元组：[如何拆分 CSV 行，使行 [0] 是名称，其余项目是元组？](https://stackoverflow.com/questions/7394644/how-to-split-a-csv-row-so-row0-is-the-name-and-any-remaining-items-are-a-tuple)
*   还有其他研究链接，但我不能发布超过两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:03:10.007

你有这三个问题：

*   你在第一次失败时返回，所以它永远不会超过第一行。
*   您正在从文件中读取字符串，并与 int 进行比较。
*   `_make`迭代字典键，而不是值，产生错误的结果 ( `item_data(Item='Name', Name='Price', Cost='Qty', Qty='Item', Price='Cost', Description='Description')`)。

    ```
    for row in (item_data(**data) for data in read_data):
        if row.Item == str(item):
            return row
    return failure 
    ```

这解决了手头的问题 - 我们检查字符串，并且仅在没有匹配的项目时才返回（尽管您可能希望开始将字符串转换为数据中的整数，而不是对字符串/整数问题进行这种骇人听闻的修复） .

我还改变了你循环的方式 - 使用生成器表达式可以获得更自然的语法，使用来自 dict 的命名属性的正常构造语法。这比使用`_make`and更简洁、更易读`map()`。它还解决了问题 3。

# wcf - WCF 服务合同从 ExtJs 前端接收文件上传

> ID：10209646
> 
> 赞同：2
> 
> 时间：2012-04-18T12:45:53.933
> 
> 标签：wcf, extjs, file-upload, upload, extjs4

我查看了现有问题，但找不到完全匹配的问题。也许我遗漏了一些明显的东西，如果是这样 - 请在正确的地方指导我。这是我的问题：

我有 ExtJs 前端和需要将二进制数据上传到 WCF 后端的应用程序。在前端我有以下代码（我使用 Ext.form.field.File 控件让用户选择一个文件）

```
// Create a dummy form in the controller after user selected a file
var form = Ext.create('Ext.form.Panel', {
  items: [ my_file_field ]
});

form.getForm().submit({
  method: 'POST',
  url: 'myservice.url',
  ...
}); 
```

在后端，我有以下合同：

```
namespace MyApp
{
    [ServiceContract]
    public interface ITransferService
    {
        [OperationContract]
        [WebInvoke(UriTemplate = "UploadImage", Method = "POST")]
        void SaveImage(Stream buffer);
    }

} 
```

它工作“很好”，除了一件小事：在里面的流中，`SaveImage()`我不仅从用户选择的文件中获得二进制数据，而且还获得一堆标题和编码字段：

```
------WebKitFormBoundary26wAkvwGTnAMELFM
Content-Disposition: form-data; name="ext-gen1654"; filename="photo.png"
Content-Type: application/octet-stream
..... binary data goes here .... 
------WebKitFormBoundary26wAkvwGTnAMELFM-- 
```

我错过了什么？如何更改服务合同以便获得干净的二进制数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:52:07.210

我发现这篇文章：[http ://antscode.blogspot.com/2009/11/parsing-multipart-form-data-in-wcf.html](http://antscode.blogspot.com/2009/11/parsing-multipart-form-data-in-wcf.html)

有人知道更简单的解决方案吗？并不是说提出的解析逻辑很复杂，但我的印象是这是一项常见的任务，应该有更简单的方法来完成它。我不敢相信 MSFT 不理解 WCF 中开箱即用的标准网页 POST...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:29:16.667

这应该将附加到当前请求的文件返回给您，但文件键或索引。希望这可以帮助！

```
Stream file = HttpContext.Current.Request.Files.Get(<file_key>).InputStream; 
```

# javascript - 将箭头添加到 div jQuery 插件问题

> ID：10209647
> 
> 赞同：1
> 
> 时间：2012-04-18T12:45:54.073
> 
> 标签：javascript, jquery, html, jquery-plugins

我只想在 div 中添加 4 个箭头：

![在此处输入图像描述](../Images/b83db7577551d40a3f7d4432d3469ad6.png)

我让它工作：http: [//jsfiddle.net/ctNDr/](http://jsfiddle.net/ctNDr/)

但是当我尝试制作一个 jquery 插件时，它会出错：http: [//jsfiddle.net/DY3EJ/](http://jsfiddle.net/DY3EJ/)

这是输出：

```
<img class="arrows" src="arrow-top.png" alt="Arrow-Top" style="height: 26px; width: 20px; top: 50px; left: 480480px; position: absolute; display: none;">
<img class="arrows" src="arrow-right.png" alt="Arrow-Top" style="position: absolute; display: none;">
<img class="arrows" src="arrow-bottom.png" alt="Arrow-Top" style="left: 480480px; position: absolute; display: none;">
<img class="arrows" src="arrow-left.png" alt="Arrow-Top" style="height: 20px; width: 26px; top: 50250px; left: 480px; position: absolute; display: none;"> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:55:15.630

看看[插件创作指南](http://docs.jquery.com/Plugins/Authoring)。您需要像这样设置插件的名称，`$.fn.yourplugin`

```
(function( $ ){

  $.fn.myPlugin = function() {

    // there's no need to do $(this) because
    // "this" is already a jquery object

    // $(this) would be the same as $($('#element'));

    this.fadeIn('normal', function(){

      // the this keyword is a DOM element

    });

  };
})( jQuery ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:28:36.130

您遇到了几个问题，但我最终能够让它工作。我删除了该`this.each()`功能，因为它没有任何用途。此外，您的顶部、右侧、底部、左侧计算需要包含在括号中。出于视觉目的，在 jsFiddle 中，我上课，`.arrows { background-color: red; }`因为我没有任何图像要处理。

**注意事项：**

1.  `options.MouseOver`从未使用过。

2.  `options.Fade`并且由于您在插件中处理的方式而`options.FadeSpeed`基于第一次调用。`.AddArrow()``.hover()`

3.  您可能需要考虑[`.stop(true,true)`](http://api.jquery.com/stop/)在悬停时调用淡入/淡出之前添加以消除动画排队。

* * *

***[点击这里查看 jsFiddle 演示：](http://jsfiddle.net/DotNetScott/X2dPV/)***

```
(function( $ ){

    $.fn.AddArrow = function(options) {

        var defaults = {
            ArrowHeight: '32',
            ArrowWidth: '32',
            ArrowPath: 'images/arrow.png',
            Orientation: 'Top',
            Fade: true,
            FadeSpeed: 300,
            MouseOver: true            
        };

        var o = $.extend(defaults, options);
        var pos = this.position();
        var width = this.width();
        var height = this.height();

        switch (o.Orientation) {
            case "Top":
                this.append($('<img>', { 
                    src: o.ArrowPath, 
                    alt: "Arrow-Top",
                    class: "arrows",
                    style: "height: "+o.ArrowHeight+"px; width: "+o.ArrowWidth+"px; top: "+pos.top+"px; left: "+((width / 2) + pos.left)+"px; position: absolute; display: none;"
                }));
                break;
            case "Right":
                this.append($('<img>', { 
                    src: o.ArrowPath, 
                    alt: "Arrow-Right",
                    class: "arrows",
                    style: "height: "+o.ArrowHeight+"px; width: "+o.ArrowWidth+"px; top: "+(pos.top + (height / 2))+"px; left: "+(width + (pos.left - o.ArrowWidth))+"px; position: absolute; display: none;"
            }));
                break;
            case "Bottom":
                this.append($('<img>', { 
                    src: o.ArrowPath, 
                    alt: "Arrow-Bottom",
                    class: "arrows",
                    style: "height: "+o.ArrowHeight+"px; width: "+o.ArrowWidth+"px; top: "+(pos.top + (height - o.ArrowHeight))+"px; left: "+((width / 2) + pos.left)+"px; position: absolute; display: none;"
                }));
                break;
            case "Left":
                this.append($('<img>', { 
                    src: o.ArrowPath, 
                    alt: "Arrow-Left",
                    class: "arrows",
                    style: "height: "+o.ArrowHeight+"px; width: "+o.ArrowWidth+"px; top: "+(pos.top + (height / 2))+"px; left: "+pos.left+"px; position: absolute; display: none;"
                }));
                break;
        }

        if(o.Fade) {         
            this.hover(function() {
                $(".arrows").fadeIn(o.FadeSpeed);
            }, function() {
                $(".arrows").fadeOut(o.FadeSpeed);
            });
        }

    }

})( jQuery ); 
```

# sql - 生成我的数据库数据的 SQL 脚本 (SQL SERVER)

> ID：10209648
> 
> 赞同：11
> 
> 时间：2012-04-18T12:46:01.280
> 
> 标签：sql, sql-server

我找不到如何使用迄今为止在我的数据库中完成的所有 INSERT 生成脚本，我设法为我的数据库本身而不是数据生成脚本。

我怎么能这样做？提前致谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-18T12:49:34.160

试试这个，使用 Sql Server Management Studio：

1.  右键单击数据库
2.  选择任务 -> 生成脚本
3.  （如果您获得介绍屏幕，请单击下一步）
4.  选择“选择特定的数据库对象”
5.  选择要为（表、存储过程等）生成脚本的对象
6.  单击下一步，然后指定输出文件名
7.  这将仅生成模式。如果您还想做数据生成脚本，请单击“高级”按钮并向下滚动到“要脚本的数据类型”并将其从“仅模式”更改为“仅数据”或“模式和数据”
8.  点击完成生成脚本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:59:15.533

如果您使用的是 SQL Server 2008，您可以通过在“生成脚本”对话框中设置“脚本数据”选项来为 sql server 数据库中的数据生成脚本

要打开“生成脚本”对话框，请执行以下操作。1\. 在服务器资源管理器中右键单击数据库名称 2\. 选择任务 -> 生成脚本 3\. 单击下一步直到到达脚本选项 4\. 在表/视图选项下设置“脚本数据”。将其更改为 true 以生成数据脚本。

如果您的版本是 SQL Server 2008 之前的版本，那么有许多工具可用，例如 [RedGate 的 Sql Compare](http://www.red-gate.com/products/sql-development/sql-compare/)！

# node.js - Node.js 中的奇怪错误消息

> ID：10209653
> 
> 赞同：4
> 
> 时间：2012-04-18T12:46:32.547
> 
> 标签：node.js, crash, express

我最近收到了很多奇怪的错误消息，现在我什至无法启动 app.js。以下是什么意思，有人知道如何解决吗？

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Cannot read property 'port' of null
    at Object.<anonymous> (/Users/henrikpetersson81/node/last/test4/app.js:15:64)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T12:14:40.057

该端口可能已被使用。我就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T13:28:34.490

[最近](https://stackoverflow.com/questions/10068714/how-to-get-node-js-express-to-listen-only-on-localhost)看到一个类似的问题。您可能会遇到类似的问题。也许您正在使用的库之一（或您自己的代码）正在尝试在完成`app.address().port`之前访问`app.listen`并调用相应的回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:02:31.990

我发现一篇文章解释了相同的错误消息，这是端口的问题。我将端口从 3000 更改为 5959，现在它可以工作了。奇怪的是端口突然停止工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T09:32:57.207

我遇到过同样的问题。事实证明，当你杀死节点服务器时，它可能没有被杀死，所以在使用 nodemon（或简单的问题）时，服务器仍在监听 3000 端口。为了克服这个简单的关闭终端并重新启动服务器。（在 ubuntu 机器上，使用节点和 Nodemon）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-09T03:31:37.177

我有一个类似的问题，其中 port:3000 仅由 node.js 脚本使用。杀死 PID 对我来说是端口：3000。

```
lsof -i :3000
kill -9 <PID> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-08T09:11:09.743

您的本地主机正在侦听的端口正在被其他应用程序/服务使用。尝试将以下位置的端口更改为不同的端口号，例如 8888 或 3000，您应该一切顺利。

/Users/henrikpetersson81/node/last/test4/app.js

# sql - 按小时排序时显示完整日期时间

> ID：10209654
> 
> 赞同：0
> 
> 时间：2012-04-18T12:46:33.793
> 
> 标签：sql, sql-server

我正在使用微软的 sql 服务器。我正在尝试按全职排序我的结果。

我的原始数据如下所示：

```
TimeStamp                           TotalOffered
2012-04-16 08:00:00                 18
2012-04-16 08:30:00                 34
2012-04-16 09:00:00                 30
2012-04-16 09:30:00                 68 
```

我按小时块排序，例如 08:00:00 期间的数据总和为 52，09:00:00 的数据总和为 98，我将其按天细分。

我的代码是：

```
select datepart(hour,[TimeStamp]), SUM([TotalOffered])
from [my table]
group by 
datepart(hour,[sus_CallPerformance_TimeStamp]), 
dateadd(d, 0, datediff(d, 0, [sus_CallPerformance_TimeStamp])) 
```

我试图让数据显示完整的时间戳而不是小时。

目前结果显示为：

```
8   52
9   98 
```

我希望结果显示为：

```
2012-04-16 08:00:00   52
2012-04-16 09:00:00   98 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:57:34.257

```
SELECT  DATEADD(HOUR, DATEPART(HOUR, TimeStamp), DATEDIFF(DAY, 0, TimeStamp)) [TimeStamp],
        SUM(TotalOffered) [TotalOffered]
FROM    [My Table]
GROUP BY DATEADD(HOUR, DATEPART(HOUR, TimeStamp), DATEDIFF(DAY, 0, TimeStamp))
ORDER BY [TimeStamp] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T13:06:55.717

试试这个：

```
declare @t table (ts datetime, od int)
insert into @t (ts, od) values ('2012-04-16 08:00:00', 18)
insert into @t (ts, od) values ('2012-04-16 08:30:00', 34)
insert into @t (ts, od) values ('2012-04-16 09:00:00', 30)
insert into @t (ts, od) values ('2012-04-16 09:30:00', 68)

select * from @t

select 
    dateadd(hour, datepart(hour, ts), cast(floor(cast(ts as real)) as datetime)) as solution,
    sum(od)
    from @t
    group by dateadd(hour, datepart(hour, ts), cast(floor(cast(ts as real)) as datetime))
    order by dateadd(hour, datepart(hour, ts), cast(floor(cast(ts as real)) as datetime)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T13:12:09.887

DateTime 字段可以转换为浮点值，其中整数表示日期，小数表示时间。如果将日期乘以 24，则整数将代表小时，如下所示：

```
SELECT CAST(FLOOR(CAST(TimeStamp AS FLOAT) * 24)/24.0 AS DateTime) AS Hr, SUM(TotalOffered) AS Total
FROM [my table]
GROUP BY FLOOR(CAST(TimeStamp AS FLOAT) * 24)
ORDER BY FLOOR(CAST(TimeStamp AS FLOAT) * 24) 
```

# javascript - 以持久的方式在 Chrome 中存储控制台日志记录

> ID：10209655
> 
> 赞同：7
> 
> 时间：2012-04-18T12:46:35.127
> 
> 标签：javascript, google-chrome, logging, console, persistent

在一个学校项目中，我正在运行一些通过控制台窗口输入并从那里运行的 javascript。该脚本操作网页并将结果输出到控制台。

问题：以持久的方式保存/保存这些结果，在浏览器关闭、脚本故障/页面重新加载或如果可能的话，电脑崩溃时不会消失。

我曾想过使用 Log4js 或 jStorage (jQuery Storage) 等框架，但由于这不是我要操作的网站，因此我无法向页面添加代码或标记。

有没有办法做到这一点？

注意：将结果记录到控制台并不重要，如果这样更容易记录，我可以将它们发送到某个地方或对它们执行其他操作。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T07:52:43.460

[这是一个将日志存储到WebStorage](http://dev.w3.org/html5/webstorage/)的小函数（跨浏览器会话持续存在）：

```
console.plog = function () {
    var key = Date.now();
    var value = JSON.stringify([].slice.call(arguments));
    localStorage.setItem(key, value);
    console.log.apply(console, arguments);
} 
```

要恢复日志，您必须运行以下表达式：

```
(function restoreLogs() {
    var timestamps = Object.keys(localStorage).sort();
    timestamps.forEach(function (ts) {
        var logArgs = JSON.parse(localStorage.getItem(ts));
        console.log.apply(console, logArgs);
    });
}()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T12:55:07.383

如果您想在 Chrome 控制台中自动保存所有内容，则必须使用以下选项运行 Chrome：

```
--enable-logging --v=1 
```

它将完整的 chrome 日志保存在其数据目录中（请注意，该文件将在每次运行时被覆盖）。更多细节[在这里](http://chromium.org/for-testers/enable-logging)。

替代方法：安装[Sawbuck](http://code.google.com/p/sawbuck/)实用程序来管理 Chrome 日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:51:44.250

使用`console.error(arg);`- 它会将控制台消息发送到浏览器`stderr`（我很确定它也会在发布版本中这样做。）

从命令行启动浏览器并将您的浏览器重定向`stderr`到某个文件（类似于 的内容`chrome 2>errlog`）。

# sql-server - 在 Powershell 后台作业中加载 SQL Server SSIS 程序集

> ID：10209658
> 
> 赞同：1
> 
> 时间：2012-04-18T12:46:43.660
> 
> 标签：sql-server, powershell, ssis, start-job

我正在尝试在 Powershell 2.0 中将 SQL Server SSIS 包作为后台作业运行，但似乎没有加载必要的程序集。

我可以毫无问题地加载 DTS 程序集并在 Powershell 中成功运行包。

```
>[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.ManagedDTS")
GAC    Version        Location                                                                                                                      
---    -------        --------                                                                                                                      
True   v2.0.50727     C:\WINDOWS\assembly\GAC_MSIL\Microsoft.SqlServer.ManagedDTS\9.0.242.0__89845dcd8080cc91\Microsoft.SqlServer.ManagedDTS.dll 
```

但是，当我在后台作业中尝试此操作时，它永远不会完成，并且作业只是继续处于运行状态。

```
$job=Start-Job -ScriptBlock {[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.ManagedDTS")} 
Wait-Job $job
Receive-Job $job 
```

正常的 Powershell 运行空间和后台作业运行的空间有什么区别？

```
>$PSVersionTable
Name                           Value
----                           -----
CLRVersion                     2.0.50727.3625
BuildVersion                   6.0.6002.18111
PSVersion                      2.0
WSManStackVersion              2.0
PSCompatibleVersions           {1.0, 2.0}
SerializationVersion           1.1.0.1
PSRemotingProtocolVersion      2.1 
```

# git - 在 cygwin 中使用 Notepad++ 进行 git

> ID：10209660
> 
> 赞同：9
> 
> 时间：2012-04-18T12:46:44.840
> 
> 标签：git, cygwin, notepad++

这是这个问题的延伸

[如何在 msysgit 中使用 Notepad++（或其他）？](https://stackoverflow.com/questions/1634161/how-do-i-use-notepad-or-other-with-msysgit/1635493#comment13111374_1635493)

我已经为我的 shell 脚本做了所有我能想到的组合。当我有我的 cygwin 控制台时（如果重要的话，我使用 mintty）我可以输入

```
npp {file} 
```

并且文件正确打开。但是当我做一个

```
git rebase -i HEAD~5 
```

npp 打开一个空白的新文档，而不是控制变基的交互式文件。知道为什么会这样吗？

```
混帐--版本
混帐版本 1.7.9

```

Windows 7 机器和 NPP 5.9.8 上的最新版本 cygwin

另外，这是我的包装脚本

```
#!/bin/sh
"C:/Program Files (x86)/Notepad++/notepad++.exe" -multiInst -notabbar \
  -nosession -noPlugin "$*" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T13:08:59.883

我对我的 cygwin 路径问题是正确的。我把我的外壳包装器改成了这个

```
#!/bin/sh
'C:/Program Files (x86)/Notepad++/notepad++.exe' -multiInst -notabbar \
  -nosession -noPlugin "$(cygpath -w "$*")" 
```

它工作得很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T11:46:10.727

这是**没有包装脚本的完整解决方案**。

这些行假定您使用的是 64 位版本的 Windows。

从命令提示符 (Cygwin) 运行以下命令：

```
git config --global core.editor \
  "'$(cygpath -u "C:\Program Files (x86)\Notepad++\notepad++.exe")' \
  -multiInst -notabbar -nosession -noPlugin" 
```

* * *

这是一个示例，说明您的**.gitconfig****在命令之后的**样子：

```
[core]
    excludesfile = /home/Aternus/.gitignore_global
    autocrlf = input
    safecrlf = true
    editor = '/cygdrive/c/Program Files (x86)/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-18T03:07:29.777

我创建了一个简单的脚本，用于运行带有 UNIX 样式路径参数的任意 Windows 命令：

**cygrun.sh**

```
#!/bin/sh
if test -z "$1"; then
    echo "Usage: $(basename "$0" .sh) program [argument]..."
    exit 1
fi

program=$1
shift
if test $# -ge 0; then
    IFS=$'\n'
    exec "$program" $(cygpath -w "$@")
else
    exec "$program"
fi 
```

这是我如何在我的 git 配置中使用它（假设是PATH 中某处`cygrun`的符号链接）：`cygrun.sh`

```
[core]
    editor = cygrun 'C:/Program Files/Notepad2/Notepad2.exe'
[difftool "diffmerge"]
    cmd = cygrun 'C:/Program Files/SourceGear/Common/DiffMerge/sgdm.exe' \"$LOCAL\" \"$REMOTE\" 
```

这样一个脚本就可以适应许多类似的用例，不需要每次都创建一个单独的包装器。从命令行使用也很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-28T00:15:12.863

```
#!/bin/dash -e
if [ "$1" ]
then k=$(cygpath -w "$1")
elif [ "$#" != 0 ]
then k=
fi
Notepad2 ${k+"$k"} 
```

1.  如果没有路径，则不传递路径

2.  如果路径为空，则传递空路径

3.  如果路径不为空，则转换为 Windows 格式。

然后我设置这些变量：

```
export EDITOR=notepad2.sh
export GIT_EDITOR='dash /usr/local/bin/notepad2.sh' 
```

1.  EDITOR 允许脚本与 Git 一起工作

2.  GIT_EDITOR 允许脚本使用[Hub 命令](//hub.github.com)

[来源](//github.com/svnpenn/dotfiles/tree/2973070/editor)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-19T06:54:29.253

有一个[没有包装脚本的现有解决方案看起来很有希望](https://stackoverflow.com/a/12726568/365237)，但是使用 cygwin git 和 cmd.exe，每次只会打开一个空文件。

要解决这个问题，你需要在你的 .gitconfig 中有这个（它与 --global 将驻留在你的 cygwin 主文件夹中）：

```
[core]
        editor = '/cygdrive/c/Program Files (x86)/Notepad++/notepad++.exe'  -multiInst -notabbar -nosession -noPlugin $(cygpath --windows "${1}") 
```

关键`$(cygpath --windows "${1}")`在最后。

似乎这将适用于 cmd.exe：

```
git config --global core.editor "'/cygdrive/c/Program Files (x86)/Notepad++/notepad++.exe'  -multiInst -notabbar -nosession -noPlugin $(cygpath --windows ${1})" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-28T07:07:34.910

对于使用 cygpath 处理记事本的参数文件路径，我将建议一个替代的简单答案。

在 Windows 中创建指向 cgywin 下主目录的符号链接。这样记事本就可以通过符号链接找到输入文件。

在我的电脑上，我用“**以管理员身份运行”打开了****cmd** ，然后在下面输入：**`C:\`**

 **```
 C:\>mklink /D home cygwin64\home 
```

有了这个，您可以简单地配置 git 如下（取自先前的答案）并假设记事本安装在以下目录中：

```
 git config --global core.editor '/cygdrive/c/Program Files (x86)/Notepad++/notepad++.exe' 
```**

# android - 滚动视图中的edittext，当它获得焦点时如何滚动到edittext

> ID：10209661
> 
> 赞同：10
> 
> 时间：2012-04-18T12:46:45.353
> 
> 标签：android, focus, android-edittext, scrollview, android-keypad

在滚动视图中有一个edittext。（并且在edittext上方的scrollview内还有其他视图。）
当用户按下edittext时，键盘变得可见并且scrollview的可见区域变小。因为那个edittext没有显示在屏幕上。（它不会滚动滚动视图，以便显示编辑文本。）
用户按下键盘上的任意键后，滚动视图滚动以便编辑文本再次可见。

**如何强制滚动视图滚动，以便在用户按下键盘之前可以看到编辑文本？**

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:paddingBottom="0dip"
        android:paddingLeft="0dip"
        android:paddingRight="0dip"
        android:paddingTop="0dip" >

        <include
            layout="@layout/trade_row_item_3cell" />

        <include
            android:id="@+id/rowQuantity"
            layout="@layout/trade_quantity_selection_row_layout" />

        <include
            layout="@layout/trade_row_item_3cell" />

        <include
            layout="@layout/trade_price_selection_et_row_layout" />

        <include
            layout="@layout/trade_row_item_3cell" />

        <include
            layout="@layout/trade_row_item_3cell" />

       <Button
            style="@style/CustomButtonText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="0" />
    </LinearLayout>
</ScrollView>

<include
    layout="@layout/trade_bottom_view" /> 
```

这是包含编辑文本的布局（trade_quantity_selection_row_layout）

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="50dip"
android:layout_gravity="left"
android:background="@android:drawable/list_selector_background">
<TextView 
    android:id="@+id/tvLeft"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:singleLine="true"
    android:textColor="#000000"
    android:paddingLeft="10dip"
    android:gravity="center_vertical"
    android:layout_gravity="center_vertical"/>
<EditText 
    android:id="@+id/etRight"
    android:paddingLeft="10dip"
    android:background="@null"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:inputType="number"
    android:gravity="center_vertical"
    android:layout_gravity="center_vertical"/>
<ImageView
    android:id="@+id/ivRight"
    android:src="@drawable/proceed"
    android:paddingRight="10dip"
     android:layout_weight="0"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"/> 
```

trade_row_item_3cell 布局包含带有编辑文本的线性布局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T13:01:20.993

[首先使用View.getLocationOnScreen (int[] location)](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5B%5D%29) 获取 Edittext 的 x/y 坐标**（方法返回后，数组按顺序包含 x 和 y 位置）**

或者

此链接可帮助您找到视图坐标 - [https://stackoverflow.com/a/2761184/28557](https://stackoverflow.com/a/2761184/28557)

然后

```
scrollView.scrollTo(x, y); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-08T06:10:00.427

只需这样做：

```
scrollView.smoothScrollTo(yourEditTextView.getLeft(), yourEditTextView.getTop()) 
```

或者如果您希望这在焦点上自动发生：

```
yourEditTextView.onFocusChangeListener = View.OnFocusChangeListener { view, hasFocus ->
            if (hasFocus) scrollView.smoothScrollTo(view.left, view.top)
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-21T08:45:32.630

**爪哇代码**

```
EditText dwEdit = (EditText) findViewById(R.id.DwEdit);       
 dwEdit.setOnTouchListener(new OnTouchListener() {
       public boolean onTouch(View view, MotionEvent event) {
            // TODO Auto-generated method stub
            if (view.getId() ==R.id.DwEdit) {
                view.getParent().requestDisallowInterceptTouchEvent(true);
                switch (event.getAction()&MotionEvent.ACTION_MASK){
                case MotionEvent.ACTION_UP:
                    view.getParent().requestDisallowInterceptTouchEvent(false);
                    break;
                }
            }
            return false;
        }
    }); 
```

**xml代码**

```
 <EditText
android:id="@+id/DwEdit"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:minLines="10"
android:scrollbarStyle="insideInset"
android:scrollbars="vertical" 
android:overScrollMode="always"
android:inputType="textCapSentences">
</EditText> 
```

# c++ - Windows 上静态链接的 OpenGL 库

> ID：10209663
> 
> 赞同：1
> 
> 时间：2012-04-18T12:46:49.270
> 
> 标签：c++, visual-c++

我想获取（或从源代码构建）静态链接到 Windows 上的 crt 的 OpenGL 库。

我不希望我的可执行文件需要 OPENGL32.dll。

我的编译器是 Visual C++ 9。

我从哪里开始？OpenGL 网站将我引导到这个 wiki [http://www.opengl.org/wiki/Getting_started](http://www.opengl.org/wiki/Getting_started) 但是那个 wiki 告诉我“在所有三个主要的桌面平台（Linux、MacOS X 和 Windows）中，OpenGL 或多或少都带有系统”。我在 Windows 上。这种说法是否属实。我如何验证这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T18:34:24.953

> Windows 上静态链接的 OpenGL 库
> 
> 我不希望我的可执行文件需要 OPENGL32.dll。

不可能的。故事结局。opengl32.dll 由 microsoft 提供，可能会在每次系统更新后更改。所以你不能静态链接它——它是一个系统组件。

您只能与在 CPU 上模拟 OpenGL的[mesa3d进行静态链接。](http://www.mesa3d.org/)但是，它并不完全兼容 OpenGL，因此您可能会遇到意想不到的问题，并且您仍然需要多个系统 dll。（我的赌注是 gdi32.dll）为您的应用程序。此外，与普通 OpenGL 相比，性能会很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:14:39.357

我相信您所说的是您不想被迫让您的应用程序与 C 运行时库动态链接（即属性/C++/代码生成/运行时库设置中的多线程 DLL 或多线程调试 DLL）。

由于 OpenGL 是系统提供的 .DLL，因此在使用 OpenGL 时，您仍然可以为您的运行时库自由选择多线程或多线程调试（这两种选择都静态链接到 C 运行时）。

# python - appengine 数据存储区 - 属性和复合索引之间的关系

> ID：10209666
> 
> 赞同：2
> 
> 时间：2012-04-18T12:46:54.177
> 
> 标签：python, google-app-engine, datastore

我的应用程序中有一个带有“date_created”属性的事件模型。我总是使用祖先查询来查询事件模型。因此，我的复合索引如下所示：

```
- kind: Event
  ancestor: yes
  properties:
  - name: date_created
    direction: desc 
```

我的问题是——“date_created”是否可以取消索引（即“indexed=False”）并且假设复合索引足够，查询仍然可以正常运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:57:54.543

不，您不能使用设置为未索引的属性来构建复合索引。

但是请参阅上周“升级到工程团队”的[issue 4231 ，所以还是有希望的。](http://code.google.com/p/googleappengine/issues/detail?id=4231)

# database - 在 Web 服务中处理 id 的最佳实践是什么？

> ID：10209673
> 
> 赞同：3
> 
> 时间：2012-04-18T12:47:22.407
> 
> 标签：database, web-services, database-design, architecture

我们有两个独立的系统通过 Web 服务进行通信。称它们为前端和后端。许多处理涉及更新后端的列表。例如，前端需要更新特定的人。目前，我们正在设计后端，我们正在决定界面应该是什么。我们将需要实际的数据库 id 来更新底层数据库，但我们也看到将数据库 id 传播给我们的消费者可能是一个坏主意。

强制客户端（即前端）必须将 id 发送回 Web 服务以更新特定实体有哪些替代方法？我们试图避免使用 id 的另一个原因是前端通常会保存这些更改以供以后发送。这将需要前端将我们的 id 保存在他们的系统中，这似乎也是一个坏主意。

我们考虑了以下几点：

1）将数据库ID发送回前端；他们必须将这些发回以处理更改

2) 将散列 ID（基于数据库 ID）发送回前端；他们必须将这些发回以处理更改。

3）不要强迫客户端发送ID，而是让他们发送原始实体和新实体，并“匹配”到我们在数据库中的实体。他们的原始实体必须与我们保存的实体相匹配。我们还必须定义什么构成了我们的实体和他们的新实体之间的匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:56:33.863

The only reasonable way for front-end would be to someway identify persons in DB.

Matching the full entity is unreliable and isn't obvious; for returning hashed ID to front-end you need to receive not-hashed ID from front-end first, or perform some revertible "hashing" (more like "encrypting") under IDs, so anyway there would be some person identifier.

IMHO it does not matter whether it will be a database ID or some piece of data (encrypted database ID) from which the ID could be extracted. Why do you think that consumers knowing the database ID would be a bad idea? I don't see any problem as long as every person belongs to a single consumer.

If there is many-to-many relation between persons (objects in DB) and consumers, then you may "encrypt" (in the broad sense) the object id so that the encryption will be consumer-dependent. For example, in communication with consumer you can use the ID of the link (between object and consumer) entry in DB.

If sending IDs to consumers seems to be the bad idea for you because of the possibility of consumer enumerating all the IDs one-by-one, you can avoid this problem by using GUIDs instead of an integer auto-incremented IDs.

PS: As for your comment, consider using e.g. GUID as an object ID. The ID is the part of data, not the part of schema, so it will be preserved when migrating between databases. Such the ID won't contain sensitive information as well, so it is perfectly safe to reveal the ID to consumer (or someone else). If you want to prevent creation of two different persons with the same SSNs, just add an `UNIQUE` key on your SSN field, but do not use SSN as the part of ID, as such approach has many serious disadvantages, with inability to reveal the ID being the least of them.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T13:04:35.643

从我的角度来看，记录的 id 不会向任何人传达任何敏感信息。
因此，将数据库 ID 传输到前端（和一般情况下）没有问题。
唯一的担忧与数据库一致性问题有关，但我看不到任何问题。
此外，从性能来看，它要好得多，因为您不需要查询数据库的属性来查找数据库 ID。

此外，如果您发送 id 的散列，则无法从散列中提取 id。
您必须在数据库中找到一个与哈希匹配的 id，这不是很好的 IMO

所以：

> 我们还看到将数据库 ID 传播给我们的消费者可能是个坏主意。

我没看到。如果你能解释为什么你认为这是一个坏主意，可能会有讨论。

# linq - 如何从具有与另一个列表中的项目匹配的属性的列表中选择对象？

> ID：10209674
> 
> 赞同：3
> 
> 时间：2012-04-18T12:47:25.137
> 
> 标签：linq, list, windows-phone-7

也许很难理解，但让我解释一下。我有一个`List`of `Channel`-objects，它们都有一个`ChannelId`属性（`int`）。我还有一个不同的`List`( `int`) - `SelectedChannelIds`，它包含`ChannelId`-s 的一个子集。

我想选择（通过`LINQ`？）所有具有与第二个匹配的 -property的`Channel`-objects 。`ChannelId``List`

换句话说，我有以下结构：

```
public class Lists
{
    public List<Channel> AllChannels = ChannelController.GetAllChannels();
    public List<int> SelectedChannelIds = ChannelController.GetSelectedChannels();

    public List<Channel> SelectedChannels; // = ?????
}

public class Channel
{
    // ...
    public int ChannelId { get; set; }
    // ...
} 
```

关于 LINQ 查询的外观有什么想法吗？或者有没有更有效的方法？我正在为 Windows Phone 7 编写代码，仅供参考。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T12:49:56.947

您可以[`List.Contains`](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)在`Where`子句中使用：

```
public Lists()
{
    SelectedChannels = AllChannels
        .Where(channel => SelectedChannelIds.Contains(channel.ChannelId))
        .ToList();
} 
```

请注意，如果您使用 a`HashSet<int>`而不是 a`List<int>`的`SelectedChannelIds`. 更改为 a`HashSet`会将性能从 O(n ² ) 提高到 O(n)，但如果您的列表总是很小，这可能不是一个重大问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:54:42.720

```
SelectedChannels = new List<Channel>(AllChannels.Where(c => SelectedChannelIds.Contains(c.ChannelId))); 
```

# android - Robotium 中的 enterText()

> ID：10209681
> 
> 赞同：2
> 
> 时间：2012-04-18T12:47:43.560
> 
> 标签：android, robotium

我是 android 测试的新手，我尝试使用 Edit Text 计算两个值。我尝试了两种方式。一种方法是 solo.enterText(EditText edittext, String text); 还有一个是solo,enterText(int index, String text);

这个对我有用

```
//Access First value (editfiled) and putting firstNumber value in it
EditText FirsteditText = (EditText) solo.getView(R.id.EditText01);
solo.enterText(FirsteditText, String.valueOf("10")); 
```

这个不适合我

```
solo.enterText(0, "10"); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:52:25.747

From the documentation of [Solo.enterText](https://github.com/jayway/robotium/blob/master/robotium-solo/src/main/java/com/jayway/android/robotium/solo/Solo.java#L1224)

> index: the index of the EditText. 0 if only one is available

You'll need to use 1 for the fist EditText if there is more than one available in your current layout.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-08T09:58:26.713

您也可以尝试不先创建 EditText 对象：

```
solo.enterText((EditText) solo.getView(ID),value); 
```

例如：

```
solo.enterText((EditText) solo.getView(R.id.number_one_value),"13"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T23:50:25.627

您有两种输入编辑文本的方法：

1.  通过 EditText 标识。

    ```
    EditText FirsteditText = (EditText) solo.getView(R.id.EditText01); 
    ```

2.  按索引。该索引是当前活动中显示的editText的索引。如果只有一个editText，使用0。如果有超过1个editText，使用1、2...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T12:39:02.543

使用这个语句：

```
String.valueOf(): in -- solo.enterText(0,String.valueOf("10")); 
```

它对我有用。

# maven-3 - Maven：依赖项的动态规范

> ID：10209686
> 
> 赞同：0
> 
> 时间：2012-04-18T12:48:03.560
> 
> 标签：maven-3

我已经开始学习 Maven 并且有以下问题：

我想动态指定构建 maven 项目的依赖项，而不是使用 POM 中指定的依赖项 - 有没有办法做到这一点？

因此，尽管我在 POM 中指定了以下依赖项

```
...
<dependencies>
<dependency>
<groupId>group</groupId>
<artifactId>ProjectComponent</artifactId>
<version>1.0</version>
 </dependency>
... 
```

我想在构建命令中指定我想使用不同的版本。有没有办法指定这个？

我的想法是，我希望在 Jenkins 中进行集成构建，并依赖于特定分支的系统最新可用快照。该快照尚未发布到 maven 存储库，所以我想在 Jenkins 中获取它并为 mvn build 指定一个依赖项。

谢谢！

**可能的解决方案**：我最终得到的是使用 ${my.lib.version} 构造并在调用 mvn 时使用 -Dmy.lib.version=1.0-SNAPSHOT" 指定它。因此我可以将它用于 Jenkins 集成构建从 svn 获取依赖项的任意快照版本，并将它们的快照版本提供给集成构建 pom。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:29:16.877

Maven 可以在配置文件的帮助下使用“动态”指定的属性（例如：*group.ProjectComponent.version ）。*

```
<dependencies>
    <dependency>
    <groupId>group</groupId>
    <artifactId>ProjectComponent</artifactId>
    <version>${group.ProjectComponent.version}</version>
</dependency> 
```

因此，如果您创建一些配置文件，您可以在它们之间切换（参见 maven 参考）

例子：

```
<profile>
    <id>stable-builds</id>
    <properties>
        <group.ProjectComponent.version>1.0</group.ProjectComponent.version>
    </properties>
    <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
</profile>

<profile>
    <id>beta-builds</id>
    <properties>
        <group.ProjectComponent.version>2.0.Beta1</group.ProjectComponent.version>
    </properties>
    <activation>
        <activeByDefault>false</activeByDefault>
    </activation>
</profile> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:46:23.767

我最终得到的是使用 ${my.lib.version} 构造并在调用 mvn 时使用 -Dmy.lib.version=1.0-SNAPSHOT" 指定它。因此我可以通过获取任意快照将它用于 Jenkins 集成构建来自 svn 的依赖项版本并将其快照版本提供给集成构建 pom。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T23:41:29.833

只是在寻找类似的东西时遇到了这个。在我的情况下，相同的应用程序代码在不同的堆栈上被重用，这意味着使用不同的“驱动程序”来访问数据。尽管驱动程序实现了相同的接口，但它们确实来自不同的工件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T13:03:55.627

不，您不能动态更改依赖项。此外，它没有意义，因为您希望有一个可重现的构建。

# ruby-on-rails - 商店中的 NoMethodError#new

> ID：10209692
> 
> 赞同：1
> 
> 时间：2012-04-18T12:48:30.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我尝试将理发师添加到我的数据库时出现错误。

我收到以下错误：

```
NoMethodError in Shop#new
Showing /Users/Augus/Rails/Barbershop/app/views/shop/new.html.erb where line #3 raised:
undefined method `barbers_path' for #<#<Class:0x105e7b818>:0x105bfe360>
Extracted source (around line #3):

1: <H1>New barber</H1>
2: 
3: <%= form_for @barber do |f| %>
4:  <%= f.text_field :name %> <br />
5:  <%= f.submit %>
6: <% end %> 
```

我不知道我做错了什么。

我的 shop_controller.rb：

```
 def new
    @barber = Barber.new
  end 
```

我的观点 new.html.erb：

```
<H1>New barber</H1>

<%= form_for @barber do |f| %>
    <%= f.text_field :name %> <br />
    <%= f.submit %>
<% end %>

<%= link_to 'Back', shop_path %> 
```

我也在我的路线中得到了这个：

```
 resources :shop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:58:30.123

当您提交新的记录表单时，会调用函数 controller#create。controller#new 是生成包含表单的页面的函数。

你需要一个带有 #create 方法的 BarberController。

像这样创建资源：

> `resources :shop do`
> 
> > `resources :barber`
> 
> `end`

一家商店有理发师。

然后`form_for [@shop, @barber], :action => 'create'`将触发`BarberController#create`最后一行应该重定向到`shop`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:02:24.020

默认情况下，Rails 会尝试根据您传入的对象确定发送表单的路径。在您的情况下，Rails 会尝试根据您的`@barber`对象构建发送表单的路径。正如你所`routes.rb`展示的，你没有写`resources :barbers`，你的表格找不到正确的路径。您必须直接指定您的路径。像这样：

```
<%= form_for @barber, url: shop_path do |f| %> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-18T12:56:19.013

代替：

```
<%= form_for @barber do |f| %> 
```

试试这个：

```
<%= form_for(@barber) do |f| %> 
```

# java - 带有 Jetty 的 Android 上的 Java I/O 错误

> ID：10209697
> 
> 赞同：1
> 
> 时间：2012-04-18T12:48:43.277
> 
> 标签：java, android, http, jetty

我在 ad-Hoc Wifi 网络中有四部 Android 手机。这些 Android 手机中的每一个都运行[Jetty](http://jetty.codehaus.org/jetty/) Web 服务器。Jetty 有一个专门用于 Android 的应用程序，但我相信这不是我想要的，所以我实际上只是下载了 Jetty JAR，并将其放入我的 Android 项目的构建路径中。Web 服务器能够处理`HTTP GET`和`POST`命令。手机使用`GET`它来从其他手机获取文件，并且`POST`用于发布基本上命令手机做某事的 XML 命令。这一切似乎工作正常。

现在，我开始在手机之间传输大量文件。更具体地说，在我的设置中，一部手机提供 450 个图像文件，其他三部手机正试图使用​​这些`HTTP GET`命令获取这些文件。每部请求文件的电话基本上都有一个 URL 列表，它可以用来获取文件，并且在结束和处理下一个之间`GET`没有延迟（如`Thread.sleep`） 。说明第一个结束和下一个开始`GET`之间没有延迟的原因是，提供 450 个文件的电话被请求非常严格地固定。`GET``GET``GET`

在执行此操作时，我注意到以下 Java I/O 错误：

> 04-17 22:48:59.183: W/System.err(31530): java.io.IOException: 关闭
> 04-17 22:48:59.183: W/System.err(31530): 在 org.eclipse.jetty。 server.HttpOutput.write(HttpOutput.java:152)
> ... 04-17
> 22:49:36.722: W/System.err(31530): java.lang.IllegalStateException: State==HEADER
> 04-17 22:49: 36.722: W/System.err(31530): 在 org.eclipse.jetty.http.HttpGenerator.flushBuffer(HttpGenerator.java:824)
> ...

这些错误偶尔会在 Jetty 尝试提供特定文件时弹出，但我不认为该错误是特定于文件的（即在不同时间弹出不同文件的相同错误），我认为这些错误有一些东西与操作系统无法足够快地读取这些文件有关吗？

我用来处理执行 a 的代码`GET`是：

```
BufferedInputStream bis = null;
OutputStream outStream = null;
    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(new URI(getURL));
        HttpResponse response = client.execute(request);

        bis = new BufferedInputStream(response.getEntity().getContent());
        outStream = new FileOutputStream(fullPath);

        bytesRead = bis.read(buf1, 0, bufLen);
        while (bytesRead != -1) {
            outStream.write(buf1, 0, bytesRead);
            bytesRead = bis.read(buf1, 0, bufLen);
        }
} 
```

我应该补充一点，错误发生在服务器端，而不是客户端。

# jsf-2 - 删除默认咆哮消息

> ID：10209699
> 
> 赞同：2
> 
> 时间：2012-04-18T12:48:47.520
> 
> 标签：jsf-2, primefaces, growl

我正在使用必需的 primefaces 和 p:inputText 字段，我使用全局 p:messages 来显示所需的信息，并且只从后端 bean 咆哮。但是，检查时会同时显示 p:messages 和必填字段的默认 p:growl 错误消息。有谁知道如何禁用默认的咆哮消息？

```
<p:messages id="messages" autoUpdate="true"/> 
<h:form id="addUser"> 
<p:growl id="newmessage" showDetail="false" globalOnly="true" /> 
<p:inputText id="name" value="#{manageUser.user.name}" required="true" /> 
```

在我的支持豆中

```
if (uf.checkUsernameAvailability(user.getLogin())) { FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Error", "Username already exists!"));} 
```

我不明白如果没有定义它们为什么会继续出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:54:05.090

和默认显示所有消息，如果设置了属性，则仅显示全局消息`p:growl`。`p:messages`

但是，这两个组件都有另一个`redisplay`可以使用的好属性。从[taglib 文档](http://www.primefaces.org/docs/vdl/3.2/)中引用：

> 定义是否应显示已呈现的消息。默认为真。

对于显示已呈现消息的组件，将此设置为 false：

```
<p:growl id="newmessage" showDetail="false" globalOnly="true" 
         redisplay="false" /> 
```

# css - 将 Google Maps Container DIV 宽度和高度设置为 100%

> ID：10209704
> 
> 赞同：63
> 
> 时间：2012-04-18T12:49:10.993
> 
> 标签：css, google-maps, google-maps-api-3, css-position, google-maps-api-2

我加载了 Google Maps API v3 并在`div`. 但是当将宽度和高度设置为 100% 和自动时，我看不到地图。

这是 HTML 代码片段。

```
<!-- Maps Container -->
<div id="map_canvas" style="height:100%;width:100px;margin:0 auto;"></div> 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-18T13:14:46.200

如果你想用它覆盖整个页面，你必须将所有父容器设置为 100% 宽度。您至少必须为#content div 设置宽度和高度的绝对值。

```
body, html {
  height: 100%;
  width: 100%;
}

div#content {
  width: 100%; height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-08-09T12:56:32.573

将地图容器设置为相对位置就可以了。这是**HTML**。

```
<body>
    <!-- Map container -->
    <div id="map_canvas"></div>
</body> 
```

和简单的**CSS**。

```
<style>
html, body, #map_canvas {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}
#map_canvas {
    position: relative;
}
</style> 
```

在所有浏览器上测试。这是**屏幕截图**。

![在此处输入图像描述](../Images/69de10bc98aaaf266870c495ff260d40.png)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-10-08T14:58:23.347

很少有人意识到 css 定位的威力。要将地图设置为占据其父容器的 100% 高度，请执行以下操作：

> `#map_canvas_container {position: relative;}`
> 
> `#map_canvas {position: absolute; top: 0; right: 0; bottom: 0; left: 0;}`

如果您在#map_canvas_container 中有任何非绝对定位的元素，它们将设置它的高度，并且地图将占用确切的可用空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-03T08:02:57.903

这对我有用。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css"> 

#cont{
    position: relative;
    width: 300px;
    height: 300px;
}
#map_canvas{
    overflow: hidden;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}
</style> 
<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=APIKEY"></script>
<script type="text/javascript">
function initialize() {
    console.log("Initializing...");
  var latlng = new google.maps.LatLng(LAT, LNG);
    var myOptions = {
      zoom: 10,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
}
</script>
</head>

<body onload="initialize()">
<div id="cont">
<div id="map_canvas" style="width: 100%; height: 100%;"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-25T20:58:01.767

如果您不能影响您的父元素（例如在嵌套组件的情况下），您可以使用`height: 100vh`它将使其成为一个完整的窗口（=视图）高度；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-30T09:26:22.417

您可以将高度设置为 -webkit-fill-available

```
<!-- Maps Container -->
<div id="map_canvas" style="height:-webkit-fill-available;width:100px;"></div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T11:01:11.093

Gmap 将内联样式位置写入相对于 div 的位置。用以下内容覆盖：

```
google.maps.event.addListener(map, 'tilesloaded', function(){
    document.getElementById('maps').style.position = 'static';
    document.getElementById('maps').style.background = 'none';
}); 
```

希望能帮助到你。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-04-15T22:15:37.453

迟到总比不到好！我给我上了一个课：

```
.map
{
    position:absolute;
    top:64px;
    width:1100px;
    height:735px;
    overflow:hidden;
    border:1px solid rgb(211,211,211);
    border-radius:3px;
} 
```

进而

```
<div id="map" class="map"></div> 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-04-18T12:54:17.957

如果这`div`是您页面上唯一的内容，请设置：

```
body, html {
  height: 100%;
  width: 100%;
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-10-01T13:24:19.163

我费了很大劲才找到答案。

你真的不需要对体型做任何事情。您只需从地图代码中删除内联样式：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.uk/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=new+york&amp;aq=&amp;sll=53.546224,-2.106543&amp;sspn=0.02453,0.084543&amp;ie=UTF8&amp;hq=&amp;hnear=New+York,+United+States&amp;t=m&amp;z=10&amp;iwloc=A&amp;output=embed"></iframe><br /><small><a href="https://maps.google.co.uk/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=new+york&amp;aq=&amp;sll=53.546224,-2.106543&amp;sspn=0.02453,0.084543&amp;ie=UTF8&amp;hq=&amp;hnear=New+York,+United+States&amp;t=m&amp;z=10&amp;iwloc=A" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

删除所有内联样式并添加类或 ID，然后按照您喜欢的方式对其进行样式设置。

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2015-09-14T07:56:32.017

这对我有用。

# map_canvas {位置：绝对；顶部：0；右：0；底部：0；左：0；}

* * *

## 回答 #12

> 赞同：-6
> 
> 时间：2013-11-11T09:45:37.920

我刚刚添加了内联样式。
`<div id="map_canvas" style="width:750px;height:484px;"></div>`
它对我有用。

# mysql - 使用 MySQL 创建循环排列的优雅方式

> ID：10209706
> 
> 赞同：1
> 
> 时间：2012-04-18T12:49:16.390
> 
> 标签：mysql, sql, permutation

我得到了一组这样的结果：

```
| id |
| 1  |
| 2  |
| 3  |
| 4  | 
```

我试图得到

```
| id |
| 4  |
| 1  |
| 2  |
| 3  | 
```

有没有什么优雅的方法可以使用 SQL 脚本来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:00:28.997

您可以使用 mod 运算符`%`，`ORDER BY`

```
DECLARE @maxId AS INT
SELECT @maxId = MAX(Id) FROM MyTable

SELECT id FROM MyTable
ORDER BY Id % @maxId 
```

您可以通过添加到 Id 来获得进一步的旋转，即

```
ORDER BY (Id + 1) % @maxId 
```

我懂了

```
3
4
1
2 
```

工作 SQL Fiddle（我刚刚发现存在） [http://sqlfiddle.com/#!3/a7f15/5](http://sqlfiddle.com/#!3/a7f15/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:00:33.100

好的，我会在 SQL 上试一试。

```
select case when id > 3 then 0
       else 1
       end
, id
from mytable
order by 1,2 
```

# regex - 在 Haskell 中将字符串解析为另一种数据类型

> ID：10209707
> 
> 赞同：4
> 
> 时间：2012-04-18T12:49:30.547
> 
> 标签：regex, parsing, haskell

最近我一直在尝试在 Haskell 中创建一个正则表达式解释器。我所做的是使用所有可能的构造函数（用于序列、、、间隔等）创建一个新数据类型，`*`然后`^`定义一个匹配器函数。它可以创造奇迹，但我的问题是我必须将输入（例如字符串`"a(b*)(c|d)ef"`）转换为我的数据类型（`"Seq (Sym a) (Seq (Rep Sym b) (Seq (Or Sym c Sym d) Sym ef))"`）。我在这部分问题上遇到了麻烦（我尝试创建一个新的数据类型，一个解析树，但我完全失败了）。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T12:54:08.850

规范的方法是使用解析器组合库，例如[Parsec](http://hackage.haskell.org/package/parsec)。解析器组合库（如解析器生成器）让您可以编写语法描述，生成从字符串到该语言标记的解析器。

您只需将语法编码为 Parsec 函数。

作为示例，请参阅之前的 SO 问题：[Using Parsec to parse regular expressions](https://stackoverflow.com/questions/9020254/using-parsec-to-parse-regular-expressions)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T12:57:39.160

那是一篇关于正则表达式实现的有趣文章（一出戏）：

[玩正则表达式](http://sebfisch.github.com/haskell-regexp/regexp-play.pdf)

# ajax - MVC：如何向我的 Ajax ActionResult 添加额外数据

> ID：10209710
> 
> 赞同：1
> 
> 时间：2012-04-18T12:49:56.507
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-partialview

有没有办法可以在 MVC 中向我的 Ajax ActionResult 添加额外数据？

我希望我的控制器创建一个新的 PartialView，然后向其中添加额外的数据，然后可以在 Ajax OnSuccess 函数中获取这些数据。

我尝试从控制器传回一个 Json 结果，其中包含我的自定义数据并在 OnSuccess 函数中使用它，但是因为我只传回我的自定义数据而没有 HTML，Ajax UpdateTarget div 现在变为空白，因为 Ajax用我的不是 HTML 的 Json 结果填充 div。

我想要一种方法让我的控制器发回 PartialView 以便我的 UpdateTarget div 得到更新，它还包含我自己的自定义数据，我可以在 OnSuccess 函数中使用这些数据。

任何帮助，将不胜感激。

谢谢迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:00:47.673

您可以在控制器中使用以下方法：

```
 public string UpdateDivWithContent()
  {
      var yourModel = ... //make custom data to create your partial    
      return RenderPartialViewToString("YourPartialViewName", yourModel)
  } 
```

我将此方法放入基本控制器中：

```
 protected string RenderPartialViewToString(string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
        {
            viewName = ControllerContext.RouteData.GetRequiredString("action");
        }

        ViewData.Model = model;

        using (StringWriter sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
            viewResult.View.Render(viewContext, sw);

            return sw.GetStringBuilder().ToString();
        }
    } 
```

使用手动 ajax 调用从您的视图中调用此操作，例如：

```
$.ajax({
    url: '@(Url.Action("UpdateDivWithContent","YourControllerName")'
    type: 'POST',
    data: {
        //some params to be passed to the controller
    },
    success: function (result) {
        //result is an html string of your customized partial view
        $("#yourDivId").html(result);
    }
}); 
```

# php - 使用 Facebook PHP SDK 自动登录不起作用

> ID：10209723
> 
> 赞同：0
> 
> 时间：2012-04-18T12:50:28.540
> 
> 标签：php, facebook, facebook-php-sdk

我使用 Facebook PHP SDK 将 facebook 与我的网站集成，我已经登录了我的 facebook 帐户，但是当我进入我的网站时，不会发生自动登录？

```
 $facebook = new Facebook(array(
      'appId'  => XXXXXX,
      'secret' => XXXXXXXXXXXXXX,
    ));

$user = $facebook->getUser();

// Login or logout url will be needed depending on current user state.
if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
} else {
    $loginUrl = $facebook->getLoginUrl();
} 
```

这里`$user`的值为“0”，在我进入 Facebook 帐户后进入我的网页。

如果我通过我网站的 facebook 登录登录。它有效，即`$user`会得到一个ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:29:39.840

> 但是当我进入我的网站时，不会发生自动登录？

单独的 PHP SDK 无法为重新访问您页面的用户提供自动登录，因为它无法读取 Facebook 在自己域下设置的 cookie。

你必须将它与JS SDK结合起来，它可以进行跨域请求，因此能够确定当前登录Facebook的用户以及他们之前是否访问过你的页面并使用过你的应用程序。

`FB.getLoginStatus`是为此使用的方法；如果它返回用户已经连接到您的应用程序，您可能会触发从 JavaScript 重新加载您的页面，以便 PHP SDK 也会知道用户。（如果您不重新加载页面，PHP 只会在用户下次单击您页面中的链接时才知道用户，从而触发对您服务器的下一个请求。）

# javascript - 拉斐尔和格拉斐尔有什么区别？

> ID：10209726
> 
> 赞同：6
> 
> 时间：2012-04-18T12:50:47.663
> 
> 标签：javascript, raphael, graphael

我确定我只是昏暗，但[Raphael](http://raphaeljs.com/)和[gRaphael](http://g.raphaeljs.com/)有什么区别？

我无法通过阅读他们的主页来判断（gRaphael 主页只是说“基于 Raphaël 图形库”），谷歌也没有提供帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T13:03:29.433

[Raphaël](http://raphaeljs.com)是一个矢量图形库，用于操作在 HTML 页面中呈现的矢量图形标记 (SVG/VML)。使用它，您可以创建 SVG/VML 元素并将其添加到 DOM 并进一步操作其中的元素。

[gRaphaël](http://g.raphaeljs.com/)是 Raphaël 的扩展，在 Raphaël 的[Paper](http://raphaeljs.com/reference.html#Paper)概念中添加了图形。想想 **图表**aël。因此 gRaphaël 仅在加载 Raphaël 时才有效，并在绘制实际图形时使用它。gRaphaël 可用于在 SVG 中创建图表，目前支持线、条、饼和点等图表类型。

如果您不想制作任何这些图表类型，您应该直接使用 Raphaël 来绘制您正在设计的任何内容。在某些情况下，例如定义颜色、笔触属性以及在图表上放置一些重叠的项目（例如标题文本），您需要学习一点 Raphaël 的 api 才能有效地使用 gRaphaël。您会发现前者的文档比后者的文档写得更好，并且被更多人倾注。它们都出自同一作者之手，但 gRaphaël 可能是基础库的演示，它似乎旨在简化 SVG 的编程使用。

如果您只对绘制 SVG 图表和图形感兴趣，您可能还对[Google 的图表工具](https://developers.google.com/chart/interactive/docs/gallery)感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T12:52:48.240

gRaphaël 是一个使用通用绘图库 Raphaël的**图表创建库。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:51:59.130

Graphael 仅用于图形，Raphael 更通用。

# zend-framework - 如何在视图文件中包含css

> ID：10209736
> 
> 赞同：7
> 
> 时间：2012-04-18T12:51:29.960
> 
> 标签：zend-framework

我在视图文件中包含了css，如下所示

```
<link rel="stylesheet" type="text/css" href="<?php echo $this->baseUrl('style/root.css'); ?>" />
<link rel="stylesheet" type="text/css" href="<?php echo $this->baseUrl('style/reset.css'); ?>" /> 
```

但它给出了这个错误->

```
 <b>Message:</b> Invalid controller specified (style)  </p> 
```

在application.ini中，我用过这个

```
resources.frontController.baseUrl = "/zendtest/public"
resources.view[] = ""; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T13:14:18.647

在任何视图文件（.phtml 扩展名）中，对 javascript 或 css 使用类似的内容：

```
$this->headScript()->prependFile('/scripts/jquery.min.js');
$this->headScript()->appendFile('/scripts/fg.menu.js');

$this->headLink()->appendStylesheet('/css/form.css');
$this->headLink()->prependStylesheet('/css/jquery_ui_theme/jquery-ui.custom.css'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:19:34.977

下面的代码对我有用，（我想你的css文件在'Public/css/bootstrp.css'中）并将该行粘贴到你的视图的头部。

`<link href="<?php echo $this->baseUrl() . '/css/bootstrap.css'; ?>" media="all" rel="stylesheet" type="text/css" />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T13:06:22.240

看看[headLink() 视图助手](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headlink)，它将完全满足您的需求。

# redirect - Google 无法关注您的网址，因为它重定向的次数过多

> ID：10209753
> 
> 赞同：1
> 
> 时间：2012-04-18T12:52:05.573
> 
> 标签：redirect, http-status-code-301, google-search-console

我在一个网站上修复了 url，其中一个问题是 url 包含的字符有时是大写的，有时是小写的，服务器不关心它，但谷歌做了，并将页面索引为重复。还有一些 url 包含根本不允许出现在 URL 的那一部分的字符，例如逗号“，”和括号“()”，尽管 [圆括号在技术上不是保留][1] 我仍然决定摆脱它们通过对它们进行编码。

我添加了一个检查，检查 url 是否有效，如果没有，将执行 301 重定向到正确的 url。

例如 [http://www.example.com/articles/SomeGreatArticle(2012).html](http://www.example.com/articles/SomeGreatArticle(2012).html) 会做一个 301 重定向到 [http://www.example.com/articles/somegreatarticle%282012%29.html](http://www.example.com/articles/somegreatarticle%282012%29.html)

它可以工作，并且会重定向到正确的 url。

但是对于一小部分页面（这可能是迄今为止谷歌索引的唯一页面），谷歌网站管理员工具开始在“抓取错误”>“未遵循”选项卡下给我以下错误：

> Google 无法跟踪您的网址，因为它重定向的次数过多。

用引号搜索这个错误会给我 0 个结果，我确信我不是唯一一个遇到这个错误的人，所以我想知道更多关于它的信息，例如：

1.  在谷歌认为它太多之前，一个页面可以做多少重定向？
2.  这种错误的其他可能原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:34:10.300

**解决方案**

根据这个实验[http://www.monperrus.net/martin/google+url+encoding](http://www.monperrus.net/martin/google+url+encoding)

谷歌有自己的字符编码规则，谷歌总是编码一些字符，总是解码其他字符。

以下字符从不编码

```
-,.@~_*)!$'( 
```

所以即使你给谷歌这个网址

```
http://www.example.com/articles/somegreatarticle%282012%29.html 
```

在圆括号 () 被编码的地方，谷歌将转换这个 URL，解码括号并跟随这个 URL：

```
http://www.example.com/articles/somegreatarticle(2012).html 
```

**我的情况发生了什么：**

```
http://www.example.com/articles/somegreatarticle(2012).html 
```

我的服务器会做一个 301 重定向到

```
http://www.example.com/articles/somegreatarticle%282012%29.html 
```

而 Googlebot 会忽略编码的括号并遵循：

```
http://www.example.com/articles/somegreatarticle(2012).html 
```

被重定向到

```
http://www.example.com/articles/somegreatarticle%282012%29.html 
```

跟随

```
http://www.example.com/articles/somegreatarticle(2012).html 
```

被重定向到

```
http://www.example.com/articles/somegreatarticle%282012%29.html 
```

并在几次尝试后放弃并显示“ **Google 无法关注您的 URL，因为它重定向了太多次**”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:55:10.653

我不知道谷歌网站管理员工具，但我在 PHP 中看到了类似的错误，当存在无限循环的重定向时。确保没有任何页面重定向到自身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:23:57.537

好吧，首先我会从网址中删除 () 和 , 符号，事实上 googlebot 很难使用这些符号。而且他们也没有为 SEO 目的带来任何好处。客户端的可读性不是问题，所以如果我只使用 - 或 _ 破折号。尽量不要在文件/文件夹名称中使用任何其他字符。

您还应该清理您的 html，有很多错误和问题需要解决。

对于谷歌、浏览器和您的访问者来说，更清洁的来源会更好。

我找不到任何明确的问题，谷歌会遇到问题。

# c++ - c++: 结构向量

> ID：10209756
> 
> 赞同：-1
> 
> 时间：2012-04-18T12:52:10.233
> 
> 标签：c++

我正在使用一个空的结构向量。

现在，当我向其中一个结构成员输入数据时，它会改变向量的大小吗？

如果是，我应该如何初始化迭代器？我有一个运行时错误，我的猜测是我的迭代器无效。

一些相关代码：

```
 struct wordstype
{
    string word;
    int counter_same;
    int counter_contained;
    int counter_same1;
};
 std::vector<wordstype>::iterator iv=vec1.begin();
string temp_str;
string::iterator is=str1.begin();

while (is!=str1.end())
{
    if (((*is)!='-')&&((*is)!='.')&&((*is)!=',')&&((*is)!=';')&&((*is)!='?')&&((*is)!='!')&&((*is)!=':'))
    {
        temp_str.push_back(*is);
        ++is;
    }
    else
    {        
        (*iv).word=temp_str;
        ++iv;
        str1.erase(is);
        temp_str.clear();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:55:07.673

更改结构成员的值不会影响向量的大小。你得到一个运行时错误，因为你试图访问一个**空**向量的第一个元素。

试试这个：

```
wordstype wt;       // create a new struct
wt.word = temp_str; // set its elements as desired
vec1.push_back(wt); // insert the new struct into the empty vector 
```

或者，您可以将向量声明为

```
vector<wordstype> vec1(1); 
```

它将使用大小 1 初始化它。然后您当前的代码将起作用（有点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:55:15.223

不，在向量元素存在于向量中之前，您无法访问它的内容。

如果`vec1.empty()`是`true`，则向量中没有元素。

您需要在 的单独实例中创建新数据`wordstype`，然后将其推送到向量上。

# jquery - addClass() removeClass() issues in jquery

> ID：10209763
> 
> 赞同：0
> 
> 时间：2012-04-18T12:52:43.500
> 
> 标签：jquery, html, css

Hello friends heres my code

**Jquery**

```
<script>
    $(document).ready(function(){
        $('#sitemap').children('li').addClass('cl');

        $('.cl').mouseenter(function() {
            $(this).css('background','#eee');
            $(this).siblings('li').css('background','');
            $(this).parents().css('background','');
        })

        $('.cl').mouseout(function() {
            $(this).css('background','');
        })
    })
</script> 
```

**HTML**

```
<ul id="sitemap">
    <li>
        one
        <ul>
            <li>two</li>
            <li>two</li>
            <li>two</li>
            <li>two</li>
        </ul>
    </li>
    <li>one</li>
    <li>one</li>
</ul> 
```

i am getting confused how to solve my problem actually i want a simple effect when `mouseenter()` on `<li>` background color will change .. but when I use nested list then its not working fine . I want when user hover the li the background color will change

Please help me

Thanks in advance :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:56:37.727

You don't really need JavaScript for this, just use CSS

```
 #sitemap li {
  background-color:white;
  }

  #sitemap li:hover {
  background-color:red;
  } 
```

you can also add any other selectors you require.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:56:50.853

If you're in standards mode and you don't need to support IE6, you can do this with just CSS:

```
.cl:hover {
    background: #eee;
} 
```

No JavaScript required. Unfortunately, IE6 only respects `:hover` on `a` elements. Also note that you need to be standards (not quirks) mode for it to work correctly in IE7.

* * *

**Update**: Based on your comment below:

> problem is when i use nested list then this code will change all nested `<li>` background color

It sounds to me like you want to be highlighting something more specific than the `li`, then, because setting the top-level `li`'s background color will color it **and** its descendant elements (unless they have an override color, which would be ugly in the case of your first item with the `ul` in it). I think I'd change the structure:

```
<ul id="sitemap">
    <li>
        <div>one</div>
        <ul>
            <li><div>two</div></li>
            <li><div>two</div></li>
            <li><div>two</div></li>
            <li><div>two</div></li>
        </ul>
    </li>
    <li><div>one</div></li>
    <li><div>one</div></li>
</ul> 
```

...and then use this CSS:

```
#sitemap div:hover {
    background: #eee;
} 
```

[Live example](http://jsbin.com/uhereg) | [source](http://jsbin.com/uhereg/edit#html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T13:06:31.443

请`Update`您`jquery`使用以下代码

```
$(function() {
    $("#sitemap").children("li").each(function() {
        $(this).mouseover(function() {
            $(this).css ("background-Color", "#c0c0c0");
        });
        $(this).mouseout(function () {
            $(this).css("background-Color", "#FFF"); 
        });
    });
});​ 
```

看到这个 Jsfiddle：http: [//jsfiddle.net/v4CL5/](http://jsfiddle.net/v4CL5/)

希望这对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:55:23.453

该`.children()`函数仅向下一层 DOM，因此您的选择器将仅匹配直接低于with ID的`<li>`元素。使用该函数来匹配该元素内的所有元素，无论它们位于 DOM 的哪个级别。`<ul>``sitemap``.find()``<li>`

也就是说，如果您可以访问 HTML，我不确定为什么要使用 jQuery 添加类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T12:56:32.383

just change

```
$('#sitemap').children('li') 
```

into

```
$('#sitemap li') 
```

since `children()` is looking for *immediate* children of `#sitemap` list (and not also for sub-nested list-items)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T13:32:17.663

这应该让你开始，虽然我认为我不得不关闭所有孩子'ul li'有点笨拙：

[http://jsfiddle.net/Ashenkase/weHBT/](http://jsfiddle.net/Ashenkase/weHBT/)

# c# - c#中的ANSI vs SHIFT JIS vs UTF-8

> ID：10209766
> 
> 赞同：5
> 
> 时间：2012-04-18T12:52:55.663
> 
> 标签：c#, encoding, character-encoding

一段时间以来，我一直试图找出差异。问题在于 ANSI 编码的文件包含日文字符，例如：`­‚È‚­‚Æ‚à1‚Â‚ÌINCREMENTs‚ª•K—v‚Å‚·.`它在 shift-jis 中等效，`少なくとも1つのINCREMENT行が必要です.`预计为日文。

从网页上的文件（ANSI）读取后，我需要显示这些字符。UTF-8 中还有一些其他文件显示的字符没有看到这个。我发现很难弄清楚有什么区别以及如何更改编码以在这里做正确的事情。我使用 c# 来读取这个文件并显示它，如果它在 web 上修改，我还需要将字符串写回文件中. 这里有任何编码和解码模式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T13:11:56.387

就代码页而言，“ANSI”（`Encoding.Default`在 .NET 中）基本上只是表示“该系统使用的非 Unicode 代码页”——确切地说是什么代码页，取决于系统的配置方式，但在西方欧洲系统，很可能是Windows-1252。

对于该文本来自的系统，“ANSI”似乎表示 Shift-JIS - 因此除非您的系统具有相同的代码页，否则您需要告诉您的代码将文本读取为 Shift-JIS。

假设您正在使用[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)读取文件，则有各种使用[Encoding](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)的构造函数，因此只需使用`Encoding.GetEncoding("shift_jis")`or获取 Shift-JIS 编码`Encoding.GetEncoding(932)`并使用它来构造您的 StreamReader。

# objective-c - Can't load a URL form a popover in a webview

> ID：10209767
> 
> 赞同：0
> 
> 时间：2012-04-18T12:53:00.287
> 
> 标签：objective-c, ios, xcode, ipad

I have a favorites popover and a webView. When you select a cell in the tableview of the popover, the webview should load that URL, but I get a SIGABRT or a BAD_ACCESS.

Here's some code:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
if (tableView == favoritesTable1) {
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        textField.text = cell.textLabel.text;
        [web loadRequest:[[NSURLRequest alloc] initWithURL:[[NSURL alloc] initWithString:cell.textLabel.text]]];
        [cell release];
        [favoritesTable1 reloadData];
    }
} 
```

I want to get something like this but full working:

![example image](../Images/339c756f774246dacb41f4c67e9dfe2b.png)

PS: The popover is a new viewController from the same class where the webview is set.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:00:41.587

既然你没有`retain`牢房，你就不应该这样`release`做......几乎可以肯定，你的崩溃来自哪里。

此外，您在不使用自动释放的情况下使用 alloc/init 会泄漏一些内存。尝试这个

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    if (tableView == favoritesTable1) {
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        textField.text = cell.textLabel.text;
        [web loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:cell.textLabel.text]]];
        [favoritesTable1 reloadData];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:59:54.213

您使用 alloc init 初始化 NSURLRequest 和 NSURL，它们都返回保留的对象，确保您根据内存管理规则正确初始化它们。我还看到你释放了细胞——你不必这样做，因为你不拥有它。试试这个方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
if (tableView == favoritesTable1) {
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        textField.text = cell.textLabel.text;
        NSURL *url = [[NSURL alloc] initWithString:cell.textLabel.text];
        NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
        [web loadRequest:request];
        [url release];
        [request release];
        [favoritesTable1 reloadData];
    }
} 
```

什么是网络变量？它也可能导致问题。

# browser - 有没有办法告诉浏览器这是一个不好记住的 URL？

> ID：10209774
> 
> 赞同：0
> 
> 时间：2012-04-18T12:53:27.557
> 
> 标签：browser

我正在向客户发送电子邮件，并为每个客户提供一个自定义 URL，当他们访问时，他们会登录。

这很好，除非他们使用会记住 URL 的共享浏览器。

有没有办法向浏览器建议它不应该记住 URL？

**编辑：**这个问题与页面缓存无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:56:50.067

Have the link log them in once. Then make them create credentials that let them access the site in the future. Whats to stop a random person from typing in the url and gaining access to the content?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T00:49:09.860

是的。您可以使用 301 或 302 重定向它们。然后浏览器将不会保存它们访问的 URL。至少这适用于基于 Mozilla 的浏览器，我也可以想象其他浏览器。

另一种更丑陋的方式是回复错误并包含一个进行刷新的主体。这是否适用于大多数浏览器，可能不是。但是，浏览器不会缓存返回错误的页面（404 Page Not Found 可以工作，您也可以使用 403 Forbidden。）

除此之外，你无能为力。JavaScript 不再允许你回味历史了……

# c# - 为什么这个 ToolStripControlHost 不起作用？

> ID：10209775
> 
> 赞同：2
> 
> 时间：2012-04-18T12:53:37.010
> 
> 标签：c#, winforms, toolstripcontrolhost

我正在尝试模仿[这个](https://stackoverflow.com/a/4339544/939213)答案，但尽管这有效：

```
public class TrackBarMenuItem : ToolStripControlHost
{
    TrackBar trackBar;
    public TrackBarMenuItem()
        : base(new TrackBar())
    {
        trackBar = Control as TrackBar;
    }
} 
```

这不会：

```
public class PanelMenuItem : ToolStripControlHost
{
    Panel panel;
    public PanelMenuItem()
        : base(new Panel())
    {
        panel = Control as Panel;
        Visible = true;
        Enabled = true;
        panel.AutoSize = false;
        panel.Size = new Size(100, 50);
    }
} 
```

为什么？

我这样称呼他们：

```
contextMenuStrip1.Items.Add(new TrackBarMenuItem());
contextMenuStrip1.Items.Add(new PanelMenuItem()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T13:05:13.443

设置面板的最小尺寸：

```
public class PanelMenuItem : ToolStripControlHost {
  Panel panel;
  public PanelMenuItem()
    : base(new Panel()) {
    panel = Control as Panel;
    Visible = true;
    Enabled = true;
    panel.AutoSize = false;
    panel.Size = new Size(100, 50);

    panel.MinimumSize = panel.Size;
  }
} 
```

# pdo - 带有特殊字符的 PHP PDO

> ID：10209777
> 
> 赞同：4
> 
> 时间：2012-04-18T12:53:42.713
> 
> 标签：pdo, special-characters, php-5.3

我正在使用**PDO**进行 MySQL 数据库连接、选择、更新和删除。

但是我在选择带有**特殊字符**的行时遇到问题，例如，我想选择一个带有“Judge-Fürstová Mila”的页面标题，

表`page`，

```
id    title                     content
1     Judge-Fürstová Mila       xxx 
```

SQL,

```
SELECT *
FROM page
WHERE title = 'Judge-Fürstová Mila' 
```

如果我通过 phpmyadmin 查询，则返回结果。

但它会`0`随着 PDO 返回，

```
$sql = ' SELECT *
    FROM page
    WHERE title = ?';

$items = $connection->fetch_assoc($sql,'Judge-Fürstová Mila'); 
```

下面是我的数据库类，

```
class database_pdo
{
    # database handler
    protected $connection = null;

    # make a connection
    public function __construct($dsn,$username,$password)
    {
        try 
        {
            # MySQL with PDO_MYSQL  
            $this->connection = new PDO($dsn, $username, $password);
            $this->connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
        }
        catch (PDOException $e) 
        {
            # call the get_error function
            $this->get_error($e);
        }
    }

    # don't forget to add getter method to get $this->connection, it's just a good practice.
    public function get_connection()
    {
        return $this->connection;
    }

    public function fetch_assoc($query, $params = array())
    {
        try
        {
            # prepare the query
            $stmt = $this->connection->prepare($query);

            # if $params is not an array, let's make it array with one value of former $params
            if (!is_array($params)) $params = array($params);

            # execute the query
            $stmt->execute($params);

            # return the result
            return $stmt->fetch();
        }
        catch (PDOException $e) 
        {
            # call the get_error function
            $this->get_error($e);
        }

    } 
```

我错过了我的数据库类或其他东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T13:03:19.197

尝试添加`charset=UTF-8`您的`$dsn`, 并更改

```
$this->connection = new PDO($dsn, $username, $password); 
```

到

```
$this->connection = new PDO($dsn, $username, $password, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

我相信是那个`SET NAMES utf8`东西，至少在我的情况下

# arrays - 从 For Each 覆盖值

> ID：10209781
> 
> 赞同：1
> 
> 时间：2012-04-18T12:53:59.407
> 
> 标签：arrays, asp-classic, foreach

我正在使用 For Each 迭代一个集合。每次我找到一个以“;”结尾的字符串时，我都需要删除那个“;”。（它用于 csv 解析，我有一个来自第三方的伪造文件）。

当我识别一行时，我希望它覆盖现有的值，例如“12;” 与“12”。

这段代码找到了所有正确的行，但没有覆盖 arrAccounts。

```
dim con
For Each con In arrAccounts(x)
    if Right(con,1) = ";" then
        dim length
        length =  Len(con)
        con = Left(con, (length-1))
    end if
next 
```

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:29:04.397

我认为唯一的事情是您必须再次将新值插入到数组中。

```
dim i, con
for i = 0 to ubound(arrAccounts(x)) ''# for keeping track which item we are looking at
    con = arrAccounts(x)(i)
    if right(con, 1) = ";" then
        con = left(con, len(con) - 1)
        arrAccounts(x)(i) = con ''# insert the new value back into the array at the same position
    end if
next 
```

# c# - WFP 用户控件，按 Enter 键触发

> ID：10209783
> 
> 赞同：0
> 
> 时间：2012-04-18T12:54:05.853
> 
> 标签：c#, wpf, user-controls

（使用 WPF 应用程序）

情况：在 WPF 应用程序中，我制作了一个 WPF 用户控件，该控件已多次放置在应用程序窗口中。

在 usercontroll 中是一个做某事的按钮。例如只是做一个简单的消息框。

我想要做的是在按下 Enter 键时激活按钮。

但问题就在这里。如果我要在用户控件中做到这一点，它会按下应用程序中每个用户控件实例的所有按钮吗？

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:22:18.113

> 它会按下应用程序中每个用户控件实例的所有按钮吗？

不会。当您处理 Enter 键时，只会涉及一个实例，通常是一个包含输入焦点的实例。

如需进一步阅读，您可以从[MSDN开始](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing)

# java - JDom 是否有任何 org.w3c.dom 包装器？

> ID：10209797
> 
> 赞同：2
> 
> 时间：2012-04-18T12:54:39.117
> 
> 标签：java, xml, dom, w3c, jdom

我正在尝试增强[jOOX](http://code.google.com/p/joox/ "jOOX 是 Java 中用于 DOM 操作的流畅 API。 为方便起见，它模仿了 jquery API") API，使其还可以对[JDom](http://jdom.org)文档进行操作，而不仅仅是`org.w3c.dom.Document`. 我没有复制所有内容，而是想知道是否有任何库实现 的接口`org.w3c.dom`，同时包装[JDom](http://jdom.org)？

请注意，我不是在寻找`org.jdom.output.DOMOutputter`，它将 JDom 文档转换为 DOM 文档。我怀疑频繁的转换会非常缓慢。我正在寻找一个包装器，它使用 JDom 类实现 w3c dom。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:37:14.783

作为 JDOM 2.x 项目的一部分，我将其完全放在一起。它是 DOM 格式的 JDOM 的只读包装器。它足够全面，可以通过本机 javax.xml.xpath 以及 Xalan XPath 引擎运行 JDOM……我已将它广泛用作 JDOM 2.x 测试工具的一部分。

因此，如果您使用的是 JDOM 2.0.0，您可以使用“contrib”部分中的 DOM 代码覆盖 JDOM 实例。

这不是官方支持的 JDOM 代码，但对于您的目的来说它可能已经足够了。

[请参阅https://github.com/hunterhacker/jdom/tree/master/contrib/src/java/org/jdom2/contrib/dom](https://github.com/hunterhacker/jdom/tree/master/contrib/src/java/org/jdom2/contrib/dom)处的代码

典型用法是：

```
org.w3c.dom.Document domdoc = org.jdom2.contrib.dom.DOM.wrap(jdomdoc); 
```

返回的 domdoc 中的所有 DOM 节点也实现了 org.jdom2.contrib.dom.Wrapper 接口，因此，例如，您可以说：

```
org.jdom2.Element emt = (org.jdom2.Element)((Wrapper)node).getWrapped();
org.jdom2.Document doc = (org.jdom2.Document)((Wrapper)domdoc).getWrapped(); 
```

此代码在 JDOM 项目中（*尚未*）得到官方支持......但它足够有用且功能齐全。

# vb.net - 访问在运行时动态创建的文本框

> ID：10209798
> 
> 赞同：-2
> 
> 时间：2012-04-18T12:54:40.623
> 
> 标签：vb.net, winforms

我在运行时动态添加文本框。以后如何在程序中访问它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:01:01.163

命名动态创建的控件

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim MyTextBox As New TextBox
    MyTextBox.Name = "MyTextBox"
    Me.Controls.Add(MyTextBox)
end sub 
```

程序中的其他地方：

```
 'set text
    Me.Controls("MyTextBox").Text = "Hi there"
    'fetch text
    Dim thetext = Me.Controls("MyTextBox").Text

    'fetch textbox
    Dim tb As TextBox = CType(Me.Controls("MyTextBox"), TextBox)
    tb.Text = ""
    tb.BackColor = Color.Red 
```

另一种方法是遍历 me.controlls-collection 并以这种方式找到控件（也许你已经在那些或其他东西上设置了 .tag="mycontrol" ......

# android - 在应用设置中保存用户信息

> ID：10209814
> 
> 赞同：30
> 
> 时间：2012-04-18T12:55:26.167
> 
> 标签：android

我正在我的应用程序中创建登录。用户输入他的信息，我将其发送到网络服务以检查并获取他的 ID。现在我需要将它保存在我的应用程序中的某个位置，以便我可以检查他是否已登录。

那么这些信息应该保存在哪里？我知道每个应用程序都有它的设置，所以应该有这个信息？也许有人可以给我更多信息这是什么以及如何做。

谢谢。

我找到了这篇文章： [在 Android 应用程序中存储用户设置的最合适的方法是什么](https://stackoverflow.com/questions/785973/what-is-the-most-appropriate-way-to-store-user-settings-in-android-application)

我相信我的问题是重复的。但是，如果您有更多东西可以分享，那就太好了。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-18T13:00:56.797

首先使用此代码在 SharedPreferences 中保存用户信息，例如 uname 和密码。

```
SharedPreferences settings = getSharedPreferences("UserInfo", 0);
SharedPreferences.Editor editor = settings.edit();
editor.putString("Username",txtUname.getText().toString());
editor.putString("Password",txtPWD.getText().toString());
editor.commit(); 
```

然后从下面的代码中获取 SharedPreferences

```
SharedPreferences settings = getSharedPreferences("UserInfo", 0);
txtUname.setText(settings.getString("Username", "").toString());
txtPWD.setText(settings.getString("Password", "").toString()); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-18T13:06:47.200

答案是**使用应用程序类或共享首选项**

我假设您可以轻松搜索 和的`Application Class`示例`SharedPreferences``SQLite Database`

所以我提到我在*哪里使用哪些选项*

`Application Class`

当我得到任何东西（var、array、list、objects）只为应用程序的生命周期存储时。当它接近时（对于 Android 强制关闭），我使用应用程序类。

`SharedPreferences`

当我得到一些简短的信息（如 id、token、用户名、标志）时，我会使用它，只要应用程序停留在设备中，我就想存储它......并且每次启动应用程序时都需要使用这些信息。

`SQLite Database`

当有记录格式（行 - 列）的批量数据时，我用它来存储在数据库中，因此它变得易于存储、检索和操作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-18T12:58:05.903

您可以为此使用[SharedPreferences 。](http://developer.android.com/reference/android/content/SharedPreferences.html)

参考中的一些代码（[取自文档](http://developer.android.com/guide/topics/data/data-storage.html#pref)）：

```
public class Calc extends Activity {
    public static final String PREFS_NAME = "MyPrefsFile";

    @Override
    protected void onCreate(Bundle state){
       super.onCreate(state);
       . . .

       // Restore preferences
       SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
       boolean silent = settings.getBoolean("silentMode", false);
       setSilent(silent);
    }

    @Override
    protected void onStop(){
       super.onStop();

      // We need an Editor object to make preference changes.
      // All objects are from android.context.Context
      SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
      SharedPreferences.Editor editor = settings.edit();
      editor.putBoolean("silentMode", mSilentMode);

      // Commit the edits!
      editor.commit();
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-17T08:30:22.277

如果用户从设置 -> 应用程序管理器 -> 您的应用程序 -> 清除数据中清除应用程序数据

那么所有保存在共享首选项中的数据都将被删除

# xcode - UIView：隐藏绘图并再次显示

> ID：10209817
> 
> 赞同：0
> 
> 时间：2012-04-18T12:55:36.287
> 
> 标签：xcode, uiview, hide, draw, layer

我在运行时创建一个视图，并使用它在其`drawRect:`上绘制图形。在下一步中，我将包含图像内容的子层添加到视图层，然后显示它。有用。但是视图上的图形仍然显示在图像下方。在`view.layer.contents = nil;`创建子层之前，视图上的图形被删除。但我需要再次展示它。使用`[view setNeedsDisplay];`（调用`drawRect:`）我可以再次绘制它。

有没有（更简单）的方法来隐藏（或覆盖）这个图形并再次显示它（不删除和重绘它）？谢谢。

编辑：我可以这样做：`layer.backgroundColor = [UIColor blackColor].CGColor;`这个数字被覆盖了。但是背景颜色必须是透明的。非常感谢其他想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:48:39.653

您可以使用：

```
view.layer.hidden = YES; 
```

如果您只想隐藏和显示一个子图层，您可以保留对该子图层的引用，或者通过查找来找到它`view.layer.sublayers`。

# android - 从其他线程更改视图

> ID：10209819
> 
> 赞同：1
> 
> 时间：2012-04-18T12:55:57.850
> 
> 标签：android, android-asynctask, android-imageview, android-handler

我写了一个代码来从互联网上下载图像。我必须在`ImageView`动态创建的中显示它。

我得到一个错误，只有创建视图层次结构的原始线程才能触及它的视图。我知道我必须写一个句柄，但我该怎么做？

这是我的代码：

```
public class ResimCek implements Runnable {

        int resimID = 0;

        public ResimCek(int parcaID) {
            // store parameter for later user
            resimID = parcaID;
        }

        public void run() {

            int resID = getResources().getIdentifier(Integer.toString(resimID) , "tag", getPackageName()); 
            ImageView resim = (ImageView) findViewById(resID);

            Drawable image = ImageOperations(getBaseContext(),"http://141.11.11.206/parca/" + Integer.toString(resimID) + ".jpg" ,"I" + Integer.toString(resimID) + ".jpg");

            // I AM GETTING ERROR HERE ******************
            resim.setImageDrawable(image); // *************************
        }
    }

    private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
        try {
            InputStream is = (InputStream) this.fetch(url);
            Drawable d = Drawable.createFromStream(new URL(url).openConnection().getInputStream(),saveFilename);
            return d;
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    public Object fetch(String address) throws MalformedURLException,IOException {
        URL url = new URL(address);
        Object content = url.getContent();
        return content;
    }
    private void MalzemeEkle(String malzemeKodu, String malzemeTanimi) {
        ImageView parcaresmi = new ImageView(this);
        parcaresmi.setId(Integer.parseInt(malzemeKodu));
        Runnable r = new ResimCek(Integer.parseInt(malzemeKodu)); 
        new Thread(r).start(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:00:02.460

```
public class ResimCek implements Runnable {

        int resimID = 0;

        public ResimCek(int parcaID) {
            // store parameter for later user
            resimID = parcaID;
        }

        public void run() {

            int resID = getResources().getIdentifier(Integer.toString(resimID) , "tag", getPackageName()); 
            ImageView resim = (ImageView) findViewById(resID);

            Drawable image = ImageOperations(getBaseContext(),"http://141.11.11.206/parca/" + Integer.toString(resimID) + ".jpg" ,"I" + Integer.toString(resimID) + ".jpg");

            // I AM GETTING ERROR HERE ******************
            resim.setImageDrawable(image); // *************************
        }
    }

new Handler().post(new ResimCek(Integer.parseInt(malzemeKodu))); instead of new Thread(r).start(); 
```

无论如何，如果这是一个活动..那么

```
runOnUIThread(new ResimCek(Integer.parseInt(malzemeKodu))); `instead of new Thread(r).start();` 
```

也会工作..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:08:04.593

您应该创建一个处理程序：

```
 final Handler   myHandler   = new Handler() {
                                    @Override
                                    public void handleMessage(Message msg)
                                    {
                                        /*do all your ui action here to display the image ()*/
                                        resim.setImageDrawable(image);
                                    }
                                }; 
```

并在下载图像时调用您的可运行文件：

```
myHandler.sendEmptyMessage(0); 
```

您可以在此处找到处理程序的其他选项 [http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# iphone - iPhone中的Ruby On Rails

> ID：10209821
> 
> 赞同：0
> 
> 时间：2012-04-18T12:56:00.153
> 
> 标签：iphone, ruby-on-rails

我正在尝试创建一个使用 Web 服务来存储和检索数据的应用程序。我们正在使用 Ruby On Rails 网络服务。我们无法使用 post 方法在 Ruby On rails Webservice 上存储数据。有没有人知道如何发送请求以将数据保存到服务器。如何访问 ruby​​ on rails web 服务？？？？？？任何帮助将不胜感激！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:57:20.713

由于 RoR 符合 Rest 规范，您可以使用[RestKit](https://github.com/RestKit/RestKit)获取/发布您的数据。

> RestKit 是一个 Cocoa 框架，用于与 iOS 和 Mac OS X 上的 Objective C 中的 RESTful Web 服务进行交互。它提供了一组用于与 Web 服务交互的原语，将 GET、POST、PUT 和 DELETE HTTP 动词包装在一个干净、简单的界面后面。RestKit 还提供了一个系统，通过将远程资源从 JSON（或 XML）有效负载映射回本地域对象来对远程资源进行建模。具有普通 NSObject 派生类和属性的对象映射函数。还包括一个对象映射实现，它提供了一个 Core Data 支持的存储，用于持久化从 Web 加载的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:05:43.143

您可以选择[rc-tool](http://code.google.com/a/eclipselabs.org/p/restclient-tool/downloads/list)或[RestClient](http://adam.heroku.com/past/2008/3/9/rest_client/)

# php - mysql_fetch_array() 期望参数 1 是资源提取单个 id

> ID：10209826
> 
> 赞同：-2
> 
> 时间：2012-04-18T12:56:22.500
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我正在使用此代码在数据库中提取申请人的状态，以便他们在登录时根据用户 ID 显示他们的状态，但我收到以下错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in 
Warning: mysql_free_result() expects parameter 1 to be resource, boolean given in 

$result = mysql_query("SELECT status from users where user_id = ".intval($_SESSION['user_id']));

while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    printf("status: %s  ", $row[0]);
}

mysql_free_result($result);
echo $row['status']; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:01:46.000

您收到此消息是因为您的查询由于某种原因失败。在查询后添加`or die(mysql_error())`以查看错误。

这应该用于调试目的，并且在将应用程序转移到生产环境时应该更优雅地处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:59:17.640

这应该是这样的

```
$result = mysql_query("SELECT status from users where user_id = '".intval($_SESSION['user_id'])."'"); 
```

你缺少单引号

# javascript - 检测文本溢出：省略号是否在输入字段上处于活动状态

> ID：10209831
> 
> 赞同：2
> 
> 时间：2012-04-18T12:56:36.323
> 
> 标签：javascript, tooltip, ellipsis, css

我想知道是否有一种方法可以检测`text-overflow:ellipsis`输入字段是否处于活动状态，这样我就可以显示带有全文的工具提示。

CSS：

```
input[type='text']
{
    text-overflow:ellipsis;
} 
```

html:

```
<input type="text" onmouseover="Tooltip.Show(this)" value="some long text" /> 
```

Javascript：

```
Tooltip.Show = function (input)
{
    // This is where i need the see if the current input show ellipsis.
    if ($(input).isEllipsisActive()) 
    {
        // Show the tooltip
    }
} 
```

安德烈亚斯
_

* * *

请注意，这个问题是关于`input`元素的。一个普通的 HTML 元素（例如`div`）也必须有

```
white-space: nowrap;
overflow: hidden; 
```

申请`text-overflow: ellipsis;`。（`Overflow`也可以是`scroll`或`auto`。）有关更多信息，请参阅[此链接](https://css-tricks.com/almanac/properties/t/text-overflow/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T13:04:50.327

如果您想知道输入文本何时太长且隐藏......没有原生支持检查这样的想法。你可以破解它。您可以使用相同的文本制作一个 tmp 容器，查看该容器/文本的宽度并将其与输入的长度进行比较。如果 tmp 容器更长......你有太长的文本和。

像这样的东西：

```
function isEllipsisActive() {
  return_val = false;
  var text = $('input_selector').val();
  var html = "<span id="tmpsmp">" + text + "</span>";
  $(body).append(html);

  if($('input_selector').width() < $('#tmpsmp').width()) {
   return_val = true;
  }

  return return_val;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-15T07:55:19.593

谢谢亚历山德连科。

刚刚编辑了一点你的解决方案：

```
 function isEllipsisActive(el) {
  return_val = false;
  var text = el.val();
  var html = "<span id='tmpsmp'>" + text + "</span>";
  $("body").append(html);

  if(el.width() < $('#tmpsmp').width()) {
   return_val = true;
  }
  $('#tmpsmp').remove();
  return return_val;
} 
```

# iphone - iPhone 单元测试与 iPhone 设置参数

> ID：10209834
> 
> 赞同：1
> 
> 时间：2012-04-18T12:56:49.607
> 
> 标签：iphone, objective-c, xcode, unit-testing, settings

我想创建一个 iphone 单元测试来测试我的功能，它使用了设备设置（例如日期和时间格式，例如 24/12 小时）。我该如何测试呢？如何模拟设备设置的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:58:10.303

我不知道有任何工具可以让您以编程方式更改系统设置。另一方面，由于日期和时间格式取决于所选的语言环境，因此通过在测试中提供您自己的语言环境来将您的测试与本地系统隔离应该不会太难。

现在，系统语言环境只不过是对您的测试的间接输入。您应该将系统区域设置（显式和隐式）的所有用法重定向到您自己的包装器。有了这个包装器，您可以控制在测试和生产过程中使用的语言环境。

# java - 设计方法：具有大量数据的过程或 Java？

> ID：10209840
> 
> 赞同：0
> 
> 时间：2012-04-18T12:57:10.353
> 
> 标签：java, stored-procedures

考虑一个层次结构：

品牌 --> 产品 --> 项目 --> 数量。

假设有不同的表，如上所示链接，有 10,000 多行。我想通过以下方式获取所有数据：

品牌 -- 与他们 -- 产品 -- 与他们 -- 项目 -- 与他们 -- 数量。

我想到了这种方法 a) 从非常基本的地图中的过程中获取所有记录 b) 遍历这些地图并在 Java 中将它们全部链接起来。

由于它需要很多时间，还有比这更好的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:21:40.903

看起来您正在连接关系数据库中的表，因此很自然地为此使用 SQL。Java 是错误的工具，您可能会遇到许多错误。

如果查询返回的数据过多，请尝试使用`LIMIT`，或根据 ffriend 的建议，向查询添加参数以选择整个结果集中的特定块。

如果客户端真的需要一次性完成全部内容，您可以在使用游标完成从数据库读取之前开始流式传输响应（我假设它是您正在编写的某种 Web 服务）。但这是一个很大的努力，如果你的服务器不能处理数据，可能客户端也不能。

# php - 将页面内容发送到电子邮件

> ID：10209843
> 
> 赞同：1
> 
> 时间：2012-04-18T12:57:11.830
> 
> 标签：php, email

我想将页面内容发送到电子邮件。我写

```
if($_GET['send_mail'] == 1){
$message = file_get_contents('send_daily_bespoke_call_status.php');
echo "sendmail" . $message;
mail('abc@gmail.com', 'Report for Bespoke Users', $message);    
} 
```

但是页面不会永远加载。如何将页面内容发送到电子邮件。我的页面内容有几个数组，所以我不能包含 << 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:39:25.860

如何使用对象缓冲：

```
if($_GET['send_mail'] == 1){
    ob_start();
    include 'send_daily_bespoke_call_status.php';
    $output_buffer = ob_get_contents();
    ob_end_clean();
    mail('abc@gmail.com', 'Report for Bespoke Users', $output_buffer);
} 
```

此外，`mail()`您也可以使用 PEAR 的 SMTP 邮件包： http: [//pear.php.net/package/Mail/](http://pear.php.net/package/Mail/)

# xml - 如何在不同类型（“基于模块”）上使用 XSLT 模板？

> ID：10209847
> 
> 赞同：0
> 
> 时间：2012-04-18T12:57:22.250
> 
> 标签：xml, xslt

我正在使用 XML 来构建调查。调查中的一个（矩阵）问题，具有列和行，如下所示：

```
<?xml version= "1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="SurveyTemplate.xsl"?>

<Survey>
    <id>1</id>
    <title>Spørgeskema</title>
    <ViewList>
        <View>
            <id>1</id>
            <parrent_id>null</parrent_id>
            <order>1</order>
            <title>Dette er titlen på den første side / kategori</title>
            <QuestionList>
                <Question>
                    <id>1</id>
                    <visible>false</visible>
                    <order>1</order>
                    <classname>matrixradio</classname>
                    <type>MatrixRadio</type>
                    <wording>Dette er et spørgsmål</wording>
                    <helptext>Dette er en hjælpetekst, som kan hjælpe respondenten med at forstå spørgsmålet</helptext>
                    <RowList>
                        <Row>
                            <id>412</id>
                            <order>1</order>
                            <visible>true</visible>
                            <css_class_name>Hvis man har lyst til at formatere den r�kke p� en speciel m�de</css_class_name>
                            <helptext>Dette er en hjælpetekst, der kan hjælpe respondenten med at forstå hvad denne række betyder</helptext>
                            <title>Dette er titlen på den første række</title>
                            <ColumnList>
                                <Column>
                                    <id>3421</id>
                                    <visible>true</visible>
                                    <order>1</order>
                                    <title>Dette er titlen på den første kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>false</value>
                                </Column>
                                <Column>
                                    <id>123</id>
                                    <visible>true</visible>
                                    <order>2</order>
                                    <title>Dette er titlen på den anden kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>true</value>
                                </Column>
                                <Column>
                                    <id>444</id>
                                    <visible>true</visible>
                                    <order>1</order>
                                    <title>Dette er titlen på den tredje kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>false</value>
                                </Column>
                                <Column>
                                    <id>222</id>
                                    <visible>true</visible>
                                    <order>1</order>
                                    <title>Dette er titlen på den fjerde kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>false</value>
                                </Column>
                            </ColumnList>
                        </Row>
                        <Row>
                            <id>555</id>
                            <order>2</order>
                            <visible>true</visible>
                            <css_class_name>Hvis man har lyst til at formatere den række på en speciel måde</css_class_name>
                            <helptext>Dette er en hjælpetekst, der kan hjælpe respondenten med at forstå hvad denne række betyder</helptext>
                            <title>Dette er titlen på den anden række</title>
                            <ColumnList>
                                <Column>
                                    <id>3421</id>
                                    <visible>true</visible>
                                    <order>1</order>
                                    <title>Dette er titlen på den første kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>true</value>
                                </Column>
                                <Column>
                                    <id>123</id>
                                    <visible>true</visible>
                                    <order>2</order>
                                    <title>Dette er titlen på den anden kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>false</value>
                                </Column>
                                <Column>
                                    <id>444</id>
                                    <visible>true</visible>
                                    <order>1</order>
                                    <title>Dette er titlen på den tredje kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>false</value>
                                </Column>
                                <Column>
                                    <id>222</id>
                                    <visible>true</visible>
                                    <order>1</order>
                                    <title>Dette er titlen på den fjerde kolonne</title>
                                    <helptext>Hjælpetekst, der hjælper brugeren med at forstå denne kolonne</helptext>
                                    <value>false</value>
                                </Column>
                            </ColumnList>
                        </Row>
                    </RowList>
                </Question>
                <Question>
                    <id>412</id>
                    <visible>true</visible>
                    <order>2</order>
                    <type>Matrix</type>
                    <wording>Dette er også et spørgsmål</wording>
                    <helptext>Dette er en hjælpetekst, som kan hjælpe respondenten med at forstå spørgsmålet</helptext>
                </Question>
            </QuestionList>
        </View>
        <View>
            <id>2</id>
            <parrent_id>null</parrent_id>
            <order>1</order>
            <title>Moo</title>
        </View>
    </ViewList>
</Survey> 
```

我想使用不同的 XSLT 模板，具体取决于

```
<type>MatrixRadio</type> 
```

节点。因此，即使所有问题都以相同的方式构建，它们看起来也可能不同。我会为每种问题类型使用不同的 .XSLT 文件，它定义了问题、列和行的外观。

如果我使用以下代码包含“模块/模板”：

```
 <xsl:include href="MatrixRadio.xslt" /> 
```

该模板包含有关如何格式化问题、行和列的定义。如果同一页面上有不同类型的问题，会不会产生干扰，因为定义每种类型的 Question、Row 和 Column 的 XSLT 模板会相互覆盖？

据我所知，当您使用 xsl:include - 它从样式表中获取内容并将其放入当前。如果我需要使用 4 个不同的样式表，并且这些样式表中的模板具有相同的名称，我认为会有麻烦。

**- 编辑**

根据评论，我编写了以下代码，但我无法开始工作：

**调查模板.xsl**

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:include href="MatrixRadio.xslt" />

  <xsl:template match="/">
    <html>
      <body>
        <h2>XSLT-Test template</h2>
        <xsl:apply-templates/>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="ViewList">
    <p>
      <xsl:for-each select="View">
        <xsl:call-template name="ViewTemplate">
        </xsl:call-template>
      </xsl:for-each>
    </p>

  </xsl:template>

  <xsl:template name="ViewTemplate">

    <p>
      <xsl:value-of select="title"/>
    </p>

  </xsl:template>
</xsl:stylesheet> 
```

和

**MatrixRadio.xslt**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="Question[type = 'MatrixRadio']">

    <div>
      <xsl:attribute name="class">
        <xsl:value-of select="classname"/>
      </xsl:attribute>
      <b>
        <xsl:value-of select="order"/> . <xsl:value-of select="wording"/>
      </b>

    </div>

  </xsl:template>

</xsl:stylesheet> 
```

未处理 MatrixRadio.xslt 模板。我将它与我在上面发布的 XML 结构一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:24:17.053

您的代码大部分都很好，但是您没有在 MatrixRadio 中调用模板，所以它没有发生。ViewTemplate 模板的一个小改动：

```
<xsl:template name="ViewTemplate">
    <p>
        <xsl:value-of select="title"/>
    </p>
    <xsl:apply-templates select="QuestionList"/>    
</xsl:template> 
```

它工作正常

# ios - 如何调用scrollViewDidScroll：与UIScrollView 一样，但在自定义动画期间？

> ID：10209849
> 
> 赞同：6
> 
> 时间：2012-04-18T12:57:29.560
> 
> 标签：ios, cocoa-touch, uiscrollview, core-animation, cakeyframeanimation

我有一个非常大的水平滚动 UIScrollView 正在重用其子视图（当它们超出可见区域时移动和更新它们，类似于 UITableView 正在重用单元格）。这依赖于 scrollViewDidScroll: 委托调用，它给了我实际的 contentOffset，在这里我决定何时重用特定的子视图。到现在为止还挺好。

有时我需要以编程方式更改 contentOffset，但需要使用自定义动画（惯性和反弹到最终位置）。我可以使用核心动画很容易地做到这一点。

**问题是，在自定义动画期间 scrollViewDidScroll: 委托方法未被调用 -> 我必须手动执行，以便子视图重用工作。**我试图用每 0.02 秒触发一次的计时器来调用它。现在有两个问题：

1.  我必须使用 [[_scrollView.layer presentationLayer] bounds].origin.x 获取 UIScrollView contentOffset，因为在动画正常 _scrollView.contentOffset 期间不会改变。

    *然而，来自presentationLayer 的信息不足以进行精确同步——有时它有点晚了。*

2.  问题是当新的 contentOffset 远离当前位置时。看起来内置的 UIScrollView 动画是 CAKeyframeAnimation，并且应该在关键帧位置上调用 scrollViewDidScroll。但我无法得到这些。

    *如果我依赖与关键帧**不**同步的计时器，视图会在错误的位置重用，并且在动画过程中我根本看不到它们。*

**任何人都可以阐明在 setContentOffset:X animated:YES 期间 UIScrollView 如何以及何时调用 scrollViewDidScroll？是否可以在不违反应用商店规则的情况下重现它？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:01:57.167

首先，我不会使用`NSTimer`延迟 0.02 秒的 an - 这不是计时器的用途。尝试使用 a `CADisplayLink`，它每帧触发一次。

* * *

在您的回调方法中，如果您的自定义动画正在运行，您可以运行您自己的物理代码并分别调用 -setContentOffset:animated:。这甚至可以让您以指数方式缓解 CA 不允许您这样做。

# c# - ODBC 公共语言参考？

> ID：10209851
> 
> 赞同：2
> 
> 时间：2012-04-18T12:57:36.317
> 
> 标签：c#, database, odbc

我有一个应用程序，它使用几个不同的数据库来收集类似的信息。我通过一个 ODBC 接口来做到这一点，该接口有效地将我的持久层从我的应用程序层中抽象出来，并且它工作得相当好。

事情是这样的：我想要比

```
SELECT * FROM [TableName] 
```

据我所知，这适用于所有 ODBC 数据库，但是当您开始变得更加具体时，语法和语言的使用就会变得更加成问题。在 MySQL 中有效的查询不一定在 MSSQL 中有效；对 Oracle 运行良好的查询对 PostgreSQL 来说不会那么好。

但是 ODBC 是一个抽象层，所以我认为必须有一个所有符合 ODBC 的数据库系统都支持的语言参考。如果我使用这些语言结构编写查询，我应该期望得到类似的结果，而不管数据库系统如何。

我对吗？有这样的标准吗？如果是这样，我在哪里可以找到语言参考，以便我可以相应地编写查询？我特别感兴趣的东西是这样的结构：

*   顶部（限制）
*   中（子串）
*   铸造（转换）

等感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:56:53.493

对于函数，ODBC 标准在[附录 E：标量函数](http://msdn.microsoft.com/en-us/library/ms711813.aspx)中列出。这包括子字符串。您需要使用语法 {fn func_name(arguments)}。SQL 92 中的强制转换函数在 ODBC 中进行转换（例如，SQL92 中的 CAST（值 AS 类型）在 ODBC 中是 {fn CONVERT (value, type)}）。然而，Top 不是一个函数，而是您的数据库可能支持或不支持的 SQL 语法的一部分（例如，Oracle 没有 top）。

# zend-framework - Zend 框架控制器到模块路由

> ID：10209855
> 
> 赞同：0
> 
> 时间：2012-04-18T12:57:44.600
> 
> 标签：zend-framework, frameworks, module, routing, controllers

因此，我一直在尽我最大的努力尽可能多地吸收对我来说相当新的 Zend 框架，距离我第一次尝试和到目前为止做得很好已经大约两周了。

但是我遇到了一个我无法弄清楚的小问题。

所以这就是交易，我有一个标准的 Zend Framework 项目，其中包含许多模块。像这样 ：

```
- Project
- - Application
- - - configs
- - - controllers
- - - - IndexController
- - - - WMSController
- - - forms
- - - layouts
- - - models
- - - modules
- - - - content
- - - - - controllers
- - - - - - IndexController
- - - - - models
- - - - - views
- - - - - Bootstrap
- - - views
- - - bootstrap
- - public

etc.. 
```

现在我在视图中为 WMSController 设置了一个简单的测试链接，它应该将某人点击它指向内容模块的 IndexController。

```
<a href="wms/content"> test link to content module</a> 
```

现在您可能会看到此链接不起作用，因为它指向 localhost/wms/content，这将是 WMSController 中的内容操作，目前不存在。

现在我想做的是让 wms/content 实际上指向内容模块的 IndexController。为什么？好吧，我只是不希望用户键入 localhost/content 来访问作为 WMS 一部分的内容模块。我想强迫他们先通过 WMS 控制器。

我已经阅读了很多关于路由是使用引导程序或自动加载器的解决方案的内容，但几乎所有这些内容都只是帮助您将某个 url 指向特定控制器中的特定操作。

我想要的是一个指向特定模块中特定控制器中特定操作的 url。

注意：所有其他控制器和视图仍然是默认生成的版本，尚未对其进行任何更改！

如果有人可以向我展示如何完成此操作的代码示例，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:38:24.470

如果我理解正确，您只想`/wms/content`指向模块***内容***控制器***Index*** action ***index***。这是一个简单的路由器可以工作的情况（至少在你想变得更复杂之前）

在您的 application.ini 中添加以下行：

```
resources.router.routes.content.route = "wms/content"
resources.router.routes.content.defaults.module = "content" 
resources.router.routes.content.defaults.controller = "index"
resources.router.routes.content.defaults.action = "index" 
```

这是构建自定义路线的最简单方法。
**注意：* *左起第 4 个参数是路由的名称，因此如果您将它与允许使用路由名称的方法（例如 url() 助手）一起使用，您可以只使用路由名称。
`$this->url(array(), 'content');`

这就是您使用命名路由的方式，我个人可能会考虑重命名我的模块*wms*（如果可能且实用），然后从默认的 Index 控制器重定向到那里。因为一旦您从命名和自定义路由开始，就很难退出......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:25:39.910

根据你的问题，你

> 想强迫他们先通过 WMS 控制器

你可以做一件事。每当用户键入 localhost/content/** 时，无论您想在 WMSController 中做什么，您都可以将其放在模块中所有控制器的父类中：“内容”。这样，您可以在每次请求到达此控制器时检查某些内容/执行操作（无论用户是否想转到另一个模块。）

类 Content_AnyController 扩展 MyControllers_Controller_Action_Admin{ .... }

在哪里

```
class Reviewmo_Controller_Action extends Zend_Controller_Action{ 
    public function init(){
    //Things you want to do each time
    }

} 
```

这就是我认为您想要实现的目标，因为如果您只想简单地重定向到 WMSController 的 ContentAction，您可以简单地重定向到该控制器。

# sharepoint - 如何在 SharePoint 包中包含 RDL 报告并能够将其部署到不同的服务器

> ID：10209859
> 
> 赞同：0
> 
> 时间：2012-04-18T12:58:02.397
> 
> 标签：sharepoint, reporting-services

我如何在 SharePoint 包文件 (wsp) 中打包 rdl 报告，并且以后能够更改连接字符串，以便我可以将该包部署到不同的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:41:59.910

除了部署文件之外，您还需要使用[ReportingService2006.CreateReport](http://msdn.microsoft.com/en-us/library/reportservice2006.reportingservice2006.createreport.aspx)和[ReportingService2006.CreateDataSource](http://msdn.microsoft.com/en-us/library/reportservice2006.reportingservice2006.createdatasource.aspx)将它们注册到 SSRS 。

将数据源部署到数据连接库并在 Reporting Services 中注册后，您可以手动或以编程方式对其进行更改。

有关详细信息，请参阅：

*   [在 SharePoint 集成模式下使用 Reporting Services 自动部署报表](http://blogs.msdn.com/b/feldman/archive/2007/11/18/automating-report-deployment-with-reporting-services-in-sharepoint-integration-mode.aspx)
*   [以集成模式部署报表](http://blogs.devhorizon.com/reza/2008/10/18/deploying-ssrs-reports-in-integrated-mode/)

# sql-server - 导出到 PostgreSQL 时出现 SQL Server 导入和导出向导错误

> ID：10209860
> 
> 赞同：4
> 
> 时间：2012-04-18T12:58:02.540
> 
> 标签：sql-server, database, postgresql

我正在尝试使用 SQL Server 的导入和导出向导 (SQL Server 2008 R2) 导出 SQL Server 数据库。数据库模式在目标 PostgreSQL 数据库中创建得很好，大多数数据也是如此。仅当我尝试导出`NULL`在第一行中有值的列时才会崩溃：

`Error 0xc020844b: Data Flow Task 22: An exception has occurred during data insertion, the message returned from the provider is: Kan een object van het type System.Int32 niet converteren naar het type System.Char[]. (SQL Server Import and Export Wizard)`

不幸的是，相关的例外是荷兰语，但它说它不能将类型的对象转换`System.Int32`为`System.Char[]`. `int`原始 SQL Server 架构中的列类型`integer`在生成的 PostgreSQL 数据库中。

仅当第一行中的列值为 时才会发生这种情况`NULL`。我认为它试图根据列的第一个值推断数据的类型，`System.Char[]`如果第一个值是`NULL`. 有没有办法改变这种行为，并让数据的类型以与生成的 PostgreSQL 列的类型相同的方式推断出来（因为它正确地做到了）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:33:27.197

问题似乎不在 PostgreSQL 方面，因此您可能应该寻找该错误的转换工具。来自 psql：

```
test=# CREATE TABLE import (id int NOT NULL PRIMARY KEY, val1 int, val2 int);
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "import_pkey" for table "import"
CREATE TABLE
test=# COPY import FROM STDIN (FORMAT CSV);
Enter data to be copied followed by a newline.
End with a backslash and a period on a line by itself.
>> 1,,111
>> 2,22,222
>> \.
test=# SELECT * FROM import;
 id | val1 | val2 
----+------+------
  1 |      |  111
  2 |   22 |  222
(2 rows) 
```

# php - Facebook：从数据库中删除未经授权的应用程序的用户

> ID：10209862
> 
> 赞同：0
> 
> 时间：2012-04-18T12:58:06.710
> 
> 标签：php, facebook, facebook-php-sdk

我有一个使用 Facebook 注册插件的网站。

一切正常，但我有一个问题：如果有人在 Facebook 上并且未经授权我的应用程序然后再也没有返回我的网站，我怎么知道？

我问的原因是我将用户数据存储在数据库中，即`access_token`Facebook ID 和（自定义字段）用户名，以及它们的`joined`日期和`last_active`日期。

当用户未经授权我的应用程序时，Facebook 是否可以与我的网站进行交互，从而允许我将它们从我的网站数据库中删除？

甚至像这样简单的东西：

```
$unauth_url = 'http://example.com/unauthorize';
file_get_contents($unauth_url . '?signed_request=' . $signed_facebook_request); 
```

在页面被删除时运行的应用程序将完成工作。

有这样的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:13:57.070

在 fb 平台中有一个有趣的选项，称为[Deauthorize Callback](http://developers.facebook.com/docs/authentication) ... 当用户删除您的应用程序时，它会简单地调用您的应用程序或网站上的一个页面。简单的把数据库记录删除代码放到这个页面...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:16:24.660

在您的 facebook-app 配置中，有一个名为 deauth-request 的选项（或类似的选项）。在那里你可以定义一个回调 url，如果有人未授权你的应用程序，它将被调用。例如，Facebook 通过该请求传递一些 POST 信息以识别用户。

您只需在您的服务器上实现一个脚本，该脚本从您的数据库中删除具有该访问令牌的用户。

# python - 使用 Python 基于来自用户的 JSON 构建 mongoDB 查询

> ID：10209863
> 
> 赞同：4
> 
> 时间：2012-04-18T12:58:23.080
> 
> 标签：python, mongodb

我需要一个用于 mongodb 的自定义查询生成器。我已经完成了可供查询的文档（字段）列表的用户界面。用户可以选择“结果列”、“条件”、“分组依据”和“排序依据”。让我解释一下使用 SQL 语言.. 看例子：

```
SELECT col1, col2 FROM table WHERE col1=1 AND col2="foo" OR col3 > "2012-01-01 00:00:00" OR col3 < "2012-01-02 00:00:00" AND col5 IN (100, 101, 102) GROUP BY col4, col5 ORDER BY col1 DESC, col2 ASC 
```

所以

*   SELECT col1, col2 -- 结果列
*   WHERE col1=1 AND col2="foo" OR col3 > "2012-01-01 00:00:00" OR col3 < "2012-01-02 00:00:00" -- 条件
*   GROUP BY col4, col5 -- 按语句分组
*   ORDER BY col1 DESC, col2 ASC -- 按语句排序

列计数、条件、分组依据和排序依据应由 Python 基于用户界面提交的 JSON 数据生成。

我只是好奇是否可以用它的 MapReduce 为 mongoDB 做？您可能看到任何模块吗？另外，如果您对 MongoDB 很熟悉，能否将此 SQL 查询转换为 MongoDB 查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T14:43:47.497

最简单（也是最可扩展）的解决方案可能是将过滤条件转换为 MongoDB 查询，并在客户端进行聚合。

以你上面的例子为例，让我们分解它并构造一个 MongoDB 查询（我将使用[PyMongo](http://api.mongodb.org/python/current/)来展示它，但如果你愿意，你可以使用 Mongoengine 或其他 ODM 来做同样的事情）：

> WHERE col1=1 AND col2="foo" OR col3 > "2012-01-01 00:00:00" OR col3 < "2012-01-02 00:00:00" -- 条件

这是 PyMongo`find()`方法的第一个参数。我们必须使用`$or`运算符显式构建逻辑 AND/OR 树：

```
from bson.tz_util import utc
cursor = db.collection.find({'$or': [
    {'col1': 1, 'col2': 'foo'},
    {'col3': {'$gt': datetime(2012, 01, 01, tzinfo=utc)}},
    {'col3': {'$lt': datetime(2012, 01, 02, tzinfo=utc)}},
]}) 
```

请注意，在与日期/时间字段进行比较时，MongoDB 不会将字符串转换为日期，因此我在这里使用 Python[`datetime`](http://docs.python.org/library/datetime.html)模块明确地这样做了。该[`datetime`](http://docs.python.org/library/datetime.html#datetime-objects)模块中的类假定 0 作为未指定参数的默认值。

> SELECT col1, col2 -- 结果列

我们可以使用[字段选择](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)来仅检索我们想要的字段：

```
from bson.tz_util import utc
cursor = db.collection.find({'$or': [
    {'col1': 1, 'col2': 'foo'},
    {'col3': {'$gt': datetime(2012, 01, 01, tzinfo=utc)}},
    {'col3': {'$lt': datetime(2012, 01, 02, tzinfo=utc)}},
]}, fields=['col1', 'col2']) 
```

> GROUP BY col4, col5 -- 按语句分组

这不能使用标准的 MongoDB 查询有效地完成（尽管稍后我将展示如何使用新的[聚合框架](http://www.mongodb.org/display/DOCS/Aggregation+Framework)在服务器端完成这一切）。相反，知道我们想按这些列进行分组，我们可以通过按这些字段排序来简化应用程序代码：

```
from bson.tz_util import utc
from pymongo import ASCENDING
cursor = db.collection.find({'$or': [
    {'col1': 1, 'col2': 'foo'},
    {'col3': {'$gt': datetime(2012, 01, 01, tzinfo=utc)}},
    {'col3': {'$lt': datetime(2012, 01, 02, tzinfo=utc)}},
]}, fields=['col1', 'col2', 'col4', 'col5'])
cursor.sort([('col4', ASCENDING), ('col5', ASCENDING)]) 
```

> ORDER BY col1 DESC, col2 ASC -- 按语句排序

这应该在应用您想要的聚合函数后在您的应用程序代码中完成（假设我们想要对 col4 求和，并取 col5 的最大值）：

```
from bson.tz_util import utc
from pymongo import ASCENDING
cursor = db.collection.find({'$or': [
    {'col1': 1, 'col2': 'foo'},
    {'col3': {'$gt': datetime(2012, 01, 01, tzinfo=utc)}},
    {'col3': {'$lt': datetime(2012, 01, 02, tzinfo=utc)}},
]}, fields=['col1', 'col2', 'col4', 'col5'])
cursor.sort([('col4', ASCENDING), ('col5', ASCENDING)])

# groupby REQUIRES that the iterable be sorted to work 
# correctly; we've asked Mongo to do this, so we don't
# need to do so explicitly here.
from itertools import groupby
groups = groupby(cursor, keyfunc=lambda doc: (doc['col1'], doc['col2'])
out = []
for (col1, col2), docs in groups:
    col4sum = 0
    col5max = float('-inf')
    for doc in docs:
        col4sum += doc['col4']
        col5max = max(col5max, doc['col5'])
    out.append({
        'col1': col1,
        'col2': col2,
        'col4sum': col4sum,
        'col5max': col5max
    }) 
```

# 使用聚合框架

如果您使用的是 MongoDB 2.1 或更高版本（2.1.x 是导致即将发布的 2.2.0 稳定版本的开发系列），您可以使用聚合框架在服务器端完成所有这些工作。为此，请使用以下`aggregate`命令：

```
from bson.son import SON
from pymongo import ASCENDING, DESCENDING
group_key = SON([('col4', '$col4'), ('col5': '$col5')])
sort_key = SON([('$col1', DESCENDING), ('$col2', ASCENDING)])
db.command('aggregate', 'collection_name', pipeline=[
    # this is like the WHERE clause
    {'$match': {'$or': [
        {'col1': 1, 'col2': 'foo'},
        {'col3': {'$gt': datetime(2012, 01, 01, tzinfo=utc)}},
        {'col3': {'$lt': datetime(2012, 01, 02, tzinfo=utc)}},
        ]}},
    # SELECT sum(col4), max(col5) ... GROUP BY col4, col5
    {'$group': {
        '_id': group_key,
        'col4sum': {'$sum': '$col4'},
        'col5max': {'$max': '$col5'}}},
    # ORDER BY col1 DESC, col2 ASC
    {'$sort': sort_key}
]) 
```

该`aggregate`命令返回一个 BSON 文档（即 Python 字典），它受到 MongoDB 的通常限制：如果要返回的文档大小大于 16MB，它将失败。此外，对于内存中的排序（如`$sort`在此聚合结束时所要求的那样），如果排序需要服务器上 10% 以上的物理 RAM，则聚合框架将失败（这是为了防止代价高昂的聚合被逐出Mongo 用于数据文件的所有内存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:25:30.640

你的问题是什么。当然你可以对Mongo做这些查询，和mapreduce无关。如果你想快速开始使用 Mongo，你可以尝试像[mongoengine这样的 ORM](http://mongoengine.org/)

# c# - C# 来自循环的匿名对象的匿名数组

> ID：10209864
> 
> 赞同：2
> 
> 时间：2012-04-18T12:58:26.080
> 
> 标签：c#, anonymous-types

我有一个我正在调用的网络服务，它根据电子邮件、名字和姓氏进行重复检查。我从业务层返回的对象非常大，并且比我需要传回的数据多得多。在我的网络服务功能中，我只想通过 JSON 传回 10 个字段。我没有用这 10 个字段创建一个新类，而是希望循环遍历我的大型返回对象，然后只创建一个包含这 10 个字段的匿名对象列表或数组。

我知道我可以像这样手动创建一个匿名对象数组

```
obj.DataSource = new[]
{
    new {  Text = "Silverlight",  Count = 10,  Link = "/Tags/Silverlight"  },
    new {  Text = "IIS 7",        Count = 11,  Link = "http://iis.net"     }, 
    new {  Text = "IE 8",         Count = 12,  Link = "/Tags/IE8"          }, 
    new {  Text = "C#",           Count = 13,  Link = "/Tags/C#"           },
    new {  Text = "Azure",        Count = 13,  Link = "?Tag=Azure"         } 
}; 
```

我的问题是我想做那件事，除了循环遍历我的大对象并且只提取我需要返回的字段。

```
private class DupeReturn
{
    public string FirstName;
    public string LastName;
    public string Phone;
    public string Owner;
    public string Address;
    public string City;
    public string State;
    public string Zip;
    public string LastModified;
}

[WebMethod]
[System.Web.Script.Services.ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string CheckForDupes(string Email, string FirstName, string LastName)
{
    contact[] list = Services.Contact.GetDupes(Email, FirstName, LastName);
    if (list != null && list.Length > 0)
    {
        List<DupeReturn> dupes = new List<DupeReturn> { };
        foreach (contact i in list)
        {
            DupeReturn currentObj = new DupeReturn
            {
                FirstName = i.firstname,
                LastName = i.lastname,
                Phone = i.telephone1,
                Owner = i.ownerid.ToString(),
                Address = i.address1_line1,
                City = i.address1_city,
                State = i.address1_stateorprovince,
                Zip = i.address1_postalcode,
                LastModified = i.ctca_lastactivityon.ToString()
            };
            dupes.Add(currentObj);
        }
        return Newtonsoft.Json.JsonConvert.SerializeObject(dupes);    
    }
} 
```

如果我不需要的话，我真的不想上额外的私人课程。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:05:46.717

使用 LINQ，您可以创建匿名类型的列表。

```
var dupes = list.Select(i => new { FirstName = i.firstname,
                                   LastName = i.lastname,
                                   Phone = i.telephone1,
                                   Owner = i.ownerid.ToString(),
                                   Address = i.address1_line1,
                                   City = i.address1_city,
                                   State = i.address1_stateorprovince,
                                   Zip = i.address1_postalcode,
                                   LastModified = i.ctca_lastactivityon.ToString()
                                    }); 
```

# c# - 将字符串中的 JSON 日期替换为更易读的日期

> ID：10209867
> 
> 赞同：9
> 
> 时间：2012-04-18T12:58:41.307
> 
> 标签：c#, regex, json

我们想向正在测试我们的应用程序的用户展示一些 JSON。所以我们在 ASP.NET 代码隐藏文件中调用我们的 REST 服务并返回一个字符串，其中包含大量 JSON。

然后我们将它放在页面中的 PRE 元素中，调用 beautify 来创建可读性好的 JSON，一切都很好：显示了人类可读的内容。

好的，但有一件事：所有日期都以正常的 JSON 格式显示，如“/Date(1319266795390+0800)/”

我想要做的是在 JSON (C#) 字符串中用“正常”日期替换那些 JSON 日期，所以在后面的代码中，在我将字符串添加到 PRE 元素之前。

我正在考虑一些正则表达式，但我无法弄清楚如何......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T14:19:46.017

一段时间以来，我一直在处理 JSON 字符串中的日期，[没有标准的方法](https://stackoverflow.com/questions/10286204/the-right-json-date-format)，这就是为什么有这么多不同的方法来做到这一点！如果 JSON 规范首先可以指定日期的标准格式，也许会更好！

微软正在以自己的方式做这件事，以 UTC 格式计算自 1970 年以来的毫秒数，这类似于`"/Date(1319266795390+0800)/"`

自从在输出之上使用正则表达式以来，我们一直将上述字符串更改为[ISO-8601 格式](http://www.w3.org/TR/NOTE-datetime)`ASP.Net JavaScriptSerializer`。它是 W3C 标准，*人类可读*，也是大多数浏览器将 Date 序列化为字符串的方式，方法如下：

```
static readonly long DATE1970_TICKS = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc).Ticks;
static readonly Regex DATE_SERIALIZATION_REGEX = new Regex(@"\\/Date\((?<ticks>-?\d+)\)\\/", RegexOptions.Compiled);

static string ISO8601Serialization(string input)
{
    return DATE_SERIALIZATION_REGEX.Replace(input, match =>
    {
        var ticks = long.Parse(match.Groups["ticks"].Value) * 10000;
        return new DateTime(ticks + DATE1970_TICKS).ToLocalTime().ToString("yyyy-MM-ddTHH:mm:ss.fff");
    });
} 
```

您可以轻松更改格式以满足您的需求，查看自定义日期和时间格式，[请查看此处的 MSDN 文章](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

以下是它的使用方法：

```
JavaScriptSerializer ser = new JavaScriptSerializer();
var JsonSrt = ISO8601Serialization(ser.Serialize(DateTime.Now));    // "\"2012-05-09T14:51:38.333\"" 
```

更新：

有一种替代方法可以使用 Regex 将 JavaScript 中从服务器返回的 JSON 字符串调整为更易读的形式：

```
var str = "/Date(1319266795390+0800)/";
str.replace(/\/Date\((\d+)\+\d+\)\//, function (str, date) {
    return new Date(Number(date)).toString();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T13:21:48.513

解决方案在问题中显示的字符串内。JavaScript Date 对象将解析该格式并生成可读版本，因此`Date(1319266795390+0800)`返回“Wed Apr 18 2012 08:13:22 GMT-0500 (Central Daylight Time)”。

要从字符串中删除正斜杠，您可以使用带有正则表达式的替换函数：`"/Date(1319266795390+0800)/".replace(/\//g, '')`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T10:07:54.313

你可以使用这个：

```
string date = "/Date(1319266795390+0800)/";
string regex = @"/Date\((.*?)\+(.*?)\)/";
Match match = Regex.Match(date, regex);
DateTime d = new DateTime(1970, 01, 01).AddMilliseconds(long.Parse(match.Result("$1"))); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T21:37:45.563

假设您要序列化的类如下所示：

```
public class Something
{
    public int ID;
    public string Name;
    public DateTime Date;
} 
```

将其更改为：

```
public class Something
    {
        public int ID;
        public string Name;
        public DateTime Date;
        public string HumanReadableDate { get { return Date.ToLongDateString(); } }
    } 
```

或者，如果您希望该额外属性仅在测试环境中显示：

```
public class Something
    {
        public int ID;
        public string Name;
        public DateTime Date;
        #if DEBUG
        public string HumanReadableDate { get { return Date.ToLongDateString(); } }
        #endif
    } 
```

`.ToLongDateString()`另外，您可以使用`.ToString("yyyy-MM-dd HH:mm")`或任何其他格式代替

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T22:00:36.067

用作正则表达式，例如：

```
(?<= /Date\( ) 
  (?<ticks>[0-9]+)
  ((?<zonesign>[+-])
   (?<zonehour>[0-9]{2})
   (?<zoneminutes>[0-9]{2})
  )?
(?= \)/ ) 
```

这将匹配括号内的部分`/Date(1319266795390+0800)/`。然后，您可以调用`Regex.Replace`整个 JSON 字符串来用格式正确的数字替换数字`DateTime`：

使用`Match`您在匹配评估器委托中获得的对象并提取刻度、区域符号、区域小时和区域分钟部分，将其转换为整数。

然后将 javascript 记号转换为 .NET 记号（应为 *10000），用`DateTime`记号构造 .NET 并添加/减去时区的小时和分钟。将 转换`DateTime`为字符串并将其作为替换返回。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T05:26:13.977

如果您的 JSON 是 .NET 类的序列化表示，也许您可​​以使用`DataContractJsonSerializer`在服务器上对其进行反序列化，或者如果您不需要通用解决方案来处理多个数据集：

```
string json = "{\"Test\": \"This is the content\"}";
DataContractJsonSerializer ds = new DataContractJsonSerializer(typeof(TestJson));
var deserialisedContent = ds.ReadObject(new MemoryStream(Encoding.ASCII.GetBytes(json)));

foreach (var field in typeof (TestJson).GetFields())
{
    Console.WriteLine("{0}:{1}", field.Name, field.GetValue(deserialisedContent));
}

...

[DataContract]
private class TestJson
{
    [DataMember]
    public string Test;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-10T19:02:26.797

使用 Newtonsoft.JSON。您可以为每种类型提供自己的序列化程序，并根据需要序列化日期。

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-11T13:13:40.857

创建一个字符串属性，例如我在此处定义的 dateofbirth，并将您的 datetime 变量返回为：

```
 public string DateOfBirthString
    {
        get { return DateOfBirth.ToUniversalTime().ToString("yyyy-MM-dd HH:mm:ss"); }
        set { DateOfBirth = string.IsNullOrEmpty(value) ? new DateTime(1900, 1, 1) : Convert.ToDateTime(value); }
    } 
```

因为这将返回字符串，所以它在客户端是相同的，所以也从用户那里获取字符串 dateTime 并转换它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-18T15:08:38.590

```
string input = [yourjsonstring]; 
MatchEvaluator me = new MatchEvaluator(MTListServicePage.MatchDate);
string json = Regex.Replace(input, "\\\\/\\Date[(](-?\\d+)[)]\\\\/", me, RegexOptions.None) 
```

# sql - 在 SQL Server 2005 中插入查询

> ID：10209868
> 
> 赞同：0
> 
> 时间：2012-04-18T12:58:42.583
> 
> 标签：sql, sql-server, sql-server-2005, insert

我的 SQL Server 表结构是：

```
BranchName
BranchManagerName
Address
Zip Info
PhoneNo
FaxNo
Email
Status
CreatedOn 
```

现在我尝试将 , 等列的值作为三个`Zip Info`值传递。`State=XXXX``city=YYYY``Zip=123`

我需要这三个值（`State,City,Zip`）`Zip Info`以这种格式`state,city-Zip`（ ）存储`xxxx,yyyy-123`在sql表中的列中。

如何在 SQL Server 2005 中编写插入查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T13:01:09.777

**不不不不不不不！！！**

不要这样做！将它们保存为单独的列。切勿在单个列中存储多个字段！

尝试为 选择所有行时会遇到问题`State='NY'`，您需要不断地进行字符串操作并进行缓慢的非索引搜索。

将它们存储为单独的列，并在显示它们时将它们连接起来。

```
SELECT
    ISNULL(State,'')+ISNULL(', '+city,'')+ISNULL('-'+Zip,'') AS ZipInfo
    FROM YourTable 
```

您始终可以在插入中连接字符串：

```
INSERT INTO YourTable
        (col1, col2, col3, Col123)
    VALUES
        (@col1, @col2, @col3, @col1+', '+@col2+'-'+@col3) 
```

您的“空保护”将根据需要而有所不同，在 SELECT 中，我假设您可以有 NULL 值，在 INSERT 中我假设不会有 NULL 值。

如果您将它们存储为 3 列并创建一个视图或计算列（如果您真的希望它们作为单个字段），您的情况会好得多。通过尝试将值存储在一起，您正在着手解决一个常见的不良设计问题。

在这里寻找[在 SQL Server 中拆分字符串的乐趣！](https://stackoverflow.com/a/2507408/65223)

此外，不要在列名中添加空格，除非 [您喜欢] 在整个 [over the] 地方都有 [大括号]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:06:30.420

我同意@KM。您不应该将此数据存储在同一字段中。如果您将 Zip Info 数据存储在同一字段中，那么您在搜索数据时会遇到严重问题，因此您不应该**这样**做。

但如果你必须，那么你将有一个类似于这样的插入：

```
INSERT INTO yourTable
(
    BranchName
    , BranchManagerName
    , Address
    ,[Zip Info]
    ,PhoneNo
    , FaxNo
    , Email
    ,Status
    , CreatedOn
)
SELECT  BranchName
    , BranchManagerName
    , Address
    ,State + ', ' + City + '-' + Zip
    ,PhoneNo
    , FaxNo
    , Email
    ,Status
    , CreatedOn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:23:10.277

兄弟，如果你想为字段 zip_info 添加 state,city-Zip 格式的值，state,city 和 zip 的值如下 XXX,YYYY,123 你只需将所有三个值都放在下面的格式Zip_Info 在插入语句中的位置

'XXX,YYYY-123'

# jquery - 零星的 chrome aw 快照屏幕

> ID：10209869
> 
> 赞同：1
> 
> 时间：2012-04-18T12:58:48.327
> 
> 标签：jquery, asp.net-mvc, google-chrome, knockout.js

我们正在开发一个 asp.net mvc 3 应用程序，该应用程序在 javascript 计时器上轮询服务器以获取数据。当数据返回时，我们使用 jquery 1.7.1 和 knockout 2.0 显示它。该视图是一个小部件，显示一些带有文本和图标的通知 div。

当我们将计时器间隔加快到 5 秒并返回大量通知时，就会出现问题。随机时间后，我们会出现 chrome 的“Aw Snap”页面。让计时器滴答作响的 3 分钟到 30 分钟之间的任何时间。请注意，我们的应用程序需要 24/7 全天候在浏览器中打开，这就是我们进行长期测试的原因。

经过研究，除了查看 google chrome 日志记录之外，似乎没有其他方法可以诊断“Aw Snap”页面。我们尝试使用带有详细日志记录的 Sawbuck，当“Aw Snap”页面出现时，它没有显示任何异常。

我们正处于从 dom 中删除元素、注释代码、删除 css 样式、尝试我们能想到的一切以查明真相的阶段。所有这些都失败了。

有谁知道下一步该怎么做？是什么导致 chrome Aw Snap 页面？它可能是一个 javascript 调用还是可能是由于 dom 操作？任何帮助将不胜感激。

更新：

当我们在 windbg 中加载转储文件（在注释中提到）时，我们会得到这个异常发生位置的调用堆栈。运行 .ecxr 命令后，我们得到： .ecxr 命令：0:000> .ecxr eax=1a300000 ebx=1ef4fb04 ecx=17323425 edx=3dd5ee49 esi=1ef4faed edi=17323425 eip=17b12d23 esp=0044eab0 ebp0ac n=0044e0 up ei pl nz na pe nc cs=0023 ss=002b ds=002b es=002b fs=0053 gs=002b efl=00010206 17b12d23 test byte ptr [eax+0Ch],4 ds:002b:1a30000c=?? 调用堆栈：警告：帧 IP 不在任何已知模块中。以下框架可能是错误的。

更新 #2：根据 ericb 的要求：

定时器功能：

```
$.ajax({
        url: aUpdateUrl,
        type: 'post',
        success: function (aData) {
            try {
                if (self.IsAutoUpdating) {
                    self.OnBeforeDataUpdated();
                    self.Data(aData);
                    self._setUpdateTime();
                    self.DataRefreshed = true;
                    self._applyAutoSizing();
                }
            }
            catch (error) {
                self.Widget.HandleError(error);
            }
        },
        complete: function () {
            self.Widget.Loaded = true;
            if (self.IsAutoUpdating) {
                self.AutoUpdateTimer = setTimeout(function () {
                    self.StartAutoUpdate(self.AutoUpdateUrl);
                }, self.UpdateInterval);
            }
        }
    }); 
```

我们的完整函数将计时器设置为在 self.UpdateInterval 时间中再次调用，我们的测试设置为 5 秒。

此外，这里是 html 以及我们如何将其连接到淘汰赛：

```
<div id="notifications-@Model.Key" class="notification-items">

<ul data-bind="foreach: { data: Dashboard.WidgetLayer@(Model.Key).NotificationModel.notificationsToShow,
    afterRemove: Dashboard.WidgetLayer@(Model.Key).NotificationModel.hideNotificationElement,
    afterAdd: Dashboard.WidgetLayer@(Model.Key).NotificationModel.showNotificationElement }">
    <li class="notification-item group" data-bind="click: Dashboard.WidgetLayer@(Model.Key).NotificationModel.onNotificationClick">
        <div>
            <img class="notification-icon" data-bind="attr: {src: Spec.Icon}" alt="icon"></img>
        </div>
        <div class="notification-content group">
            <div class="notification-header">
                <div class="title">
                    <span class="subject-name" data-bind='text: SubjectTitle'></span>:&nbsp;<span class="spec-title" data-bind='text: Spec.Title'></span>
                </div>
                <button class="acknowledge-notification" data-bind="click: Dashboard.WidgetLayer@(Model.Key).NotificationModel.acknowledgeNotification, clickBubble: false"></button>
                <div class="time-since-event" data-bind='text: FormattedTimestamp'></div>
            </div>
            <div>
                <div class="spacer"></div>
                <div class="details action-details" data-bind='text: Details'> </div>
            </div>
        </div>
    </li>
</ul> 
```

我们还通过淡入/淡出在通知 div 上设置了 jquery live 设置，如下所示：

```
$('#notifications-@Model.Key .notification-item').live({
        mouseenter:
            function() {
                var lElement = this;
                $(lElement).find('.time-since-event').stop(true, true).fadeOut(0, function (){$('.acknowledge-notification', lElement).fadeIn(2000);});

            },
        mouseleave:
            function() {
                var lElement = this;
                $(lElement).find('.acknowledge-notification').stop(true, true).fadeOut(0, function (){$('.time-since-event', lElement).fadeIn(1000);});
            }
    }); 
```

更新通知列表的其余 javascript 代码基于 knockoutjs 的动画转换现场示例，可在此处获得：http: [//knockoutjs.com/examples/animatedTransitions.html](http://knockoutjs.com/examples/animatedTransitions.html)

如果需要，我可以提供代码，但它是 150 行，为了简洁起见决定将其排除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:26:12.843

也许您可能想看看不同的轮询技术。根据您拥有的用户数量，我建议您查看 Signalr：

[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

我最近做了一个关于如何将 signalr 和 knockoutjs 集成在一起的演讲。

幻灯片和示例：[http ://bit.ly/FamilyFeudSlides](http://bit.ly/FamilyFeudSlides)

代码：[https ://github.com/jasonmore/familyfeud](https://github.com/jasonmore/familyfeud)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T17:41:40.483

原因可能是优化引擎。

我遇到了类似的问题，我能够将其隔离为由 V8 优化引擎引起的 Aw Snap 崩溃。我有一个重复运行的 ~2400 行的大函数。在函数的第 300 次左右调用之后（数量变化很大，取决于其他看似无关的更改），优化引擎将启动，Windows 任务管理器将显示 RAM 使用量的巨大峰值，这将导致“Aw卡扣”在选项卡上。

事实证明，Chrome 可以使用标志 --js-flags="--allow-natives-syntax" 启动，然后`%NeverOptimizeFunction(functionName);`可以使用原生 V8 javascript 命令来阻止 Chrome 尝试运行其优化器。

可以想象，这不是最容易追踪的错误，所以我只是将其添加为另一件事的建议，以考虑作为可怕的“Aw Snap”的潜在原因。

# bash - 正确处理文件名中带有空格的文件列表

> ID：10209870
> 
> 赞同：2
> 
> 时间：2012-04-18T12:58:55.147
> 
> 标签：bash, loops, whitespace, filenames

我想遍历 Bash 中的文件列表并执行一些操作。问题：文件名可能包含空格，这会产生一个明显的通配符问题或`ls`：

```
touch a\ b
FILES=* # or $(ls)

for FILE in $FILES; do echo $FILE; done 
```

产量

```
a
b 
```

现在，处理这个问题的传统方法是使用`find … -print0`。但是，这只适用于（很好地）与 Bash 变量/循环一起使用`xargs -0`，而不是与 Bash 变量/循环一起使用。

我的想法是设置`$IFS`为空字符来完成这项工作。但是， comp.unix.shell 似乎认为[这在 bash 中是不可能的](https://groups.google.com/d/topic/comp.unix.shell/rNX500nae3c/discussion)。

真可惜。嗯，理论上是可以使用其他字符的，比如`:`（毕竟`$PATH`也使用这种格式）：

```
IFS=$':'
FILES=$(find . -print0 | xargs -0 printf "%s:")

for FILE in $FILES; do echo $FILE; done 
```

（输出略有不同，但足够公平。）

但是，我不禁觉得这很笨拙，应该有更*直接*的方法来做到这一点。**我正在寻找一种更直接的方法来实现这一点，最好使用通配符或`ls`.**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:37:22.553

处理这个问题的最好方法是将文件列表存储为一个数组，而不是一个字符串（并确保双引号所有变量替换）：

```
files=(*)
for file in "${files[@]}"; do
    echo "$file"
done 
```

如果您想从`find`的输出中生成一个数组（例如，如果您需要递归搜索），请参阅[这个先前的答案](https://stackoverflow.com/questions/1116992/capturing-output-of-find-print0-into-a-bash-array/1120952#1120952)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:25:25.107

您在第一个示例中所拥有的内容在 Msys Bash、Cygwin 和我的 Fedora 机器上对我来说很好：

```
FILES=*
for FILE in $FILES
do
    echo $FILE
done 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-04-10T15:07:38.150

前进非常重要

```
IFS="" 
```

否则将找不到后面有两个空格的文件

# c++ - c++11 std::async 在 mingw 中不起作用

> ID：10209871
> 
> 赞同：11
> 
> 时间：2012-04-18T12:58:58.650
> 
> 标签：c++, c++11, concurrency, mingw, stdasync

从 Herb Sutter 的[演示文稿](http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/-Not-Your-Father-s-C-)中运行此代码。这在 gcc 4.6.3 下的 linux 中运行良好。我在想mingw不支持future.h，但是这个错误真的很难理解！

```
#include <iostream>
#include <vector>
#include <string>
#include <future>
#include <algorithm>

using namespace std;

string flip( string s ) {
  reverse( begin(s), end(s) );
  return s;
}

int main() {
  vector<future<string>> v;

  v.push_back( async([]{ return flip(" ,olleH"); }) );
  v.push_back( async([]{ return flip(".gnaL"); }) );
  v.push_back( async([]{ return flip("\n!TXEN"); }) );

  for( auto& e: v ) {
    cout << e.get();
  }
} 
```

这是错误：

```
$ x86_64-w64-mingw32-g++.exe -std=c++0x -pthread swap.cpp
swap.cpp: In function 'int main()':
swap.cpp:17:51: error: invalid use of incomplete type 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<std::basic_string<char> >}'
In file included from swap.cpp:4:0:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:111:11: error: declaration of 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<std::basic_string<char> >}'
swap.cpp:18:49: error: invalid use of incomplete type 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<std::basic_string<char> >}'
In file included from swap.cpp:4:0:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:111:11: error: declaration of 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<std::basic_string<char> >}'
swap.cpp:19:51: error: invalid use of incomplete type 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<std::basic_string<char> >}'
In file included from swap.cpp:4:0:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:111:11: error: declaration of 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<std::basic_string<char> >}'
swap.cpp:22:14: error: invalid use of incomplete type 'class std::future<std::basic_string<char> >'
In file included from swap.cpp:4:0:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:111:11: error: declaration of 'class std::future<std::basic_string<char> >'
In file included from c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_algobase.h:68:0,
                 from c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/char_traits.h:41,
                 from c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/ios:41,
                 from c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/ostream:40,
                 from c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/iostream:40,
                 from swap.cpp:1:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_iterator.h: In instantiation of '__gnu_cxx::__normal_iterator<_Iterator, _Container>& __gnu_cxx::__normal_iterator<_Iterator, _Container>::operator++() [with _Iterator = std::future<std::basic_string<char> >*; _Container = std::vector<std::future<std::basic_string<char> > >; __gnu_cxx::__normal_iterator<_Iterator, _Container> = __gnu_cxx::__normal_iterator<std::future<std::basic_string<char> >*, std::vector<std::future<std::basic_string<char> > > >]':
swap.cpp:21:17:   required from here
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_iterator.h:750:2: error: cannot increment a pointer to incomplete type 'std::future<std::basic_string<char> >'
In file included from c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/vector:65:0,
                 from swap.cpp:2:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_vector.h: In instantiation of 'std::_Vector_base<_Tp, _Alloc>::~_Vector_base() [with _Tp = std::future<std::basic_string<char> >; _Alloc = std::allocator<std::future<std::basic_string<char> > >]':
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_vector.h:247:15:   required from 'std::vector<_Tp, _Alloc>::vector() [with _Tp = std::future<std::basic_string<char> >; _Alloc = std::allocator<std::future<std::basic_string<char> > >]'
swap.cpp:15:26:   required from here
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_vector.h:161:9: error: invalid use of incomplete type 'class std::future<std::basic_string<char> >'
In file included from swap.cpp:4:0:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:111:11: error: declaration of 'class std::future<std::basic_string<char> >'
In file included from c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/vector:63:0,
                 from swap.cpp:2:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_construct.h: In instantiation of 'void std::_Destroy(_ForwardIterator, _ForwardIterator) [with _ForwardIterator = std::future<std::basic_string<char> >*]':
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_construct.h:155:7:   required from 'void std::_Destroy(_ForwardIterator, _ForwardIterator, std::allocator<_T2>&) [with _ForwardIterator = std::future<std::basic_string<char> >*; _Tp = std::future<std::basic_string<char> >]'
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_vector.h:403:9:   required from 'std::vector<_Tp, _Alloc>::~vector() [with _Tp = std::future<std::basic_string<char> >; _Alloc = std::allocator<std::future<std::basic_string<char> > >]'
swap.cpp:15:26:   required from here
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/bits/stl_construct.h:128:7: error: invalid use of incomplete type '_Value_type {aka class std::future<std::basic_string<char> >}'
In file included from swap.cpp:4:0:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:111:11: error: declaration of '_Value_type {aka class std::future<std::basic_string<char> >}'
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future: At global scope:
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:187:5: error: 'typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type std::async(_Fn&&, _Args&& ...) [with _Fn = main()::<lambda()>; _Args = {}; typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type = std::future<std::basic_string<char> >]', declared using local type 'main()::<lambda()>', is used but never defined [-fpermissive]
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:187:5: error: 'typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type std::async(_Fn&&, _Args&& ...) [with _Fn = main()::<lambda()>; _Args = {}; typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type = std::future<std::basic_string<char> >]', declared using local type 'main()::<lambda()>', is used but never defined [-fpermissive]
c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.0/include/c++/future:187:5: error: 'typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type std::async(_Fn&&, _Args&& ...) [with _Fn = main()::<lambda()>; _Args = {}; typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type = std::future<std::basic_string<char> >]', declared using local type 'main()::<lambda()>', is used but never defined [-fpermissive] 
```

我在 Windows 中使用 GCC 4.7。

```
$ g++ -v
Using built-in specs.
COLLECT_GCC=c:\mingw64\bin\x86_64-w64-mingw32-g++.exe
COLLECT_LTO_WRAPPER=c:/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/4.7.0/lto-wrapper.exe
Target: x86_64-w64-mingw32
Configured with: ../gcc-4.7.0/configure --build=x86_64-w64-mingw32 --enable-targets=all --disable-multilib --enable-64bit --prefix=/mingw64 --with-sysroot=/mingw64 --disable-shared --enable-static --disable-nls --enable-version-specific-runtime-libs --disable-win32-registry --without-dwarf2 --enable-sjlj-exceptions --enable-fully-dynamic-string --enable-languages=c,ada,lto,c++,objc,obj-c++,fortran --enable-libgomp --enable-lto --enable-libssp -enable-gnattools --disable-bootstrap --with-gcc --with-gnu-as --with-gnu-ld --with-stabs --enable-interwork --with-mpfr-include=/home/beta/gcc-build/../gcc-4.7.0/mpfr/src --with-mpfr-lib=/home/beta/gcc-build/mpfr/src/.libs
Thread model: win32
gcc version 4.7.0 (GCC) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-06T15:56:47.307

也许对我来说更容易解释，因为我写了那个代码，但这并不难，只要看看错误输出的第一行：

```
swap.cpp:22:14: error: invalid use of incomplete type 'class std::future<std::basic_string<char> >' 
```

这告诉您这`std::future`是一个不完整的类型，即它已声明但未定义。下一行会告诉您它的确切声明位置（然后所有其他错误都是由于尝试以不同方式使用该不完整类型而引起的。）

如果您查看 GCC 的`<future>`标头，您会看到类型声明在顶部附近，但是定义取决于此预处理器条件：

```
#if defined(_GLIBCXX_HAS_GTHREADS) && defined(_GLIBCXX_USE_C99_STDINT_TR1) \
  && (ATOMIC_INT_LOCK_FREE > 1) 
```

如果你用这些宏编译一些简单的测试，你会发现`_GLIBCXX_HAS_GTHREADS`没有定义，那是因为你的`gcc -v`节目

```
线程型号：win32
```

还没有人提供必要的代码来使 C++11 线程功能在 Windows 上运行。

制作`<future>`工作会更难，但实际上并没有那么难实现`<thread>`，`<mutex>`而且还没有人加紧去做这项工作。昨天我发布了一些关于如何为 win32 线程模型启用 C++11 线程功能的想法：http: [//gcc.gnu.org/ml/libstdc++/2012-05/msg00020.html](http://gcc.gnu.org/ml/libstdc++/2012-05/msg00020.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T15:04:14.150

**名为“MinGW builds”的特殊 MinGW 构建确实通过 gcc 提供了 C++11 支持，包括*async*、*thread*、*future*和 friends**

*（这秒了 IcemanX 否决的答案）*

它已移至[http://sourceforge.net/projects/mingwbuilds/](http://sourceforge.net/projects/mingwbuilds/)

正如 Jonathan Wakely 指出的那样（正确且权威地）其他版本的 GCC 的问题是它们不提供对*pthreads*的支持，但 MinGW-builds 提供。使用 Windows 线程的解决方案可能会更好，但目前不可用。

我为 MinGW build+eclipse 写了详细的**安装和设置说明**，这里：[http ://scrupulousabstractions.tumblr.com/post/36441490955/eclipse-mingw-builds](http://scrupulousabstractions.tumblr.com/post/36441490955/eclipse-mingw-builds)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T15:23:07.770

不知道 std::async 是否有有效的实现（如果有的话），但 std::thread 可与 MinGW/GCC 4.7 版本一起使用，可在项目站点[http://code.google.com/p/mingw-builds /](http://code.google.com/p/mingw-builds/)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T09:48:00.623

标准 MinGW 库和编译器不支持`std::async(*args)`

但是有一个修改版的MinGW，它的功能和原来的一样，就是：[TDM-GCC MinGW](http://tdm-gcc.tdragon.net/download "基于 GNU 工具链的 32 位和 64 位 Windows 编译器套件")

它可以免费下载并定期更新。此外，它还支持*32 位和 64 位*用于**编译代码。**

希望对你有帮助^^

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T03:01:48.167

[只需从此处](https://sourceforge.net/projects/mingw-w64/)下载 MinGW 安装程序并使用配置 posix 线程进行安装。

[![在此处输入图像描述](../Images/70ba12bf329864ecadb38f7ab82c2913.png)](https://i.stack.imgur.com/1dK0I.png)

如果您已经安装了旧的 MinGW，请编辑您的环境变量，以便使用新安装的 MinGW。

# c# - 拒绝访问 - CreateDirectory C#

> ID：10209876
> 
> 赞同：-1
> 
> 时间：2012-04-18T12:59:10.777
> 
> 标签：c#, asp.net, windows, impersonation

我有一个带有按钮的 ASP.NET 应用程序。当您单击该按钮时，它有一行在我通过另一台服务器（不是 Web 服务器）上的 AD 组读取、写入、修改的目录中创建子目录。

当我单击按钮时，子目录出现访问被拒绝错误。

在 web.config 中将 Impersonate 设置为 true。

身份验证是 Windows。

WindowsIdentity 设置为我。

由于上述两件事，该应用程序正在我的帐户下运行。

我可以单击该按钮并让它在 Windows 资源管理器中打开该文件夹。所以我可以访问父母。

如果我在文件夹中创建一个子文件夹。我可以单击按钮并让它在 Windows 资源管理器中打开子文件夹

我可以使用 C# 代码完成所有这些工作。

只有当我尝试使用 C# 创建子文件夹时，它才会告诉我访问被拒绝。但我有读、写和修改权限。

不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:12:12.163

You should try granting permission to the `sysname\iis_wpg` group.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:19:43.740

您正在运行哪个版本的 IIS？

在应用程序池部分检查运行网站的身份。验证身份对该目录具有适当的权限。这就是用于执行操作系统工作的身份。

请注意，您可能需要在 7/7.5 中通过目录上的命令行授予身份，例如

```
icacls c:\inetpub\wwwroot /grant "IIS APPPOOL\DefaultAppPool":(OI)(CI)(RX) 
```

请参阅[Icalcs](http://technet.microsoft.com/en-us/library/cc753525%28v=WS.10%29.aspx)文档。

# android - 当用户选择打开并在 android.so 中安装时完成时，应用程序的行为有两种不同的方式。那么 resion 是什么？

> ID：10209878
> 
> 赞同：5
> 
> 时间：2012-04-18T12:59:14.057
> 
> 标签：android

**注意：请不要用 ECLIPSE 直接测试它。请先生成 .APK 文件 稍后将 .APK 复制到您的设备内存中，然后从那里安装**

申请流程

1）打开加载屏幕（出现5秒）----->打开新闻标题屏幕

2）当用户点击后退按钮时从新闻屏幕我覆盖

```
public void onBackPressed() {
        moveTaskToBack(true);
} 
```

3）当用户再次打开他的应用程序时，他直接打开他的新闻标题屏幕

这是我的要求，当用户在安装时选择 case1（在以下情况下指定）时，我成功完成了此操作

我构建 apk 然后将其上传到服务器。然后在我的 Galaxy 2.2 上，我在浏览器中输入 url 并下载 apk。下载完成后我安装它。安装完成后，我有两个选择

> 案例 1：- 完成
> 
> 案例 2：- 打开

当我按打开应用程序第一次成功打开时。当我再次单击应用程序（第二次）时，它再次打开加载屏幕。

但是当我选择完成并稍后通过应用程序菜单访问它时，它可以正常工作！所以这个选择决定了应用程序以后的行为方式？为什么？如何？我很困惑

现在我上传一些简单的示例代码

> 活动一：HelloWorldActivity.java

这包含名为“第一个屏幕”的简单按钮

```
package com.hb.Screens;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class HelloWorldActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button tv=(Button) findViewById(R.id.btn);
        tv.setText("First screen");
        tv.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                startActivity(new Intent(HelloWorldActivity.this, secondScreen.class));
                HelloWorldActivity.this.finish();
            }
        });
    }

} 
```

> 活动二：secondScreen.java

这包含名为“第二屏”的简单按钮

```
package com.hb.Screens;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;

public class secondScreen extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        Button tv = (Button) findViewById(R.id.btn);
        tv.setText("Second screen");
    }

    @Override
    public void onBackPressed() {
        moveTaskToBack(true);
    }

    @Override
    protected void onResume() {
        super.onResume();

    }
} 
```

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.hb.Screens"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="4" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".HelloWorldActivity"

                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".secondScreen"></activity>
     </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:08:56.297

如果您已将多个活动声明为启动器活动，则将其删除。如果清单中有两个启动器活动，那么它可能会发出。当我将多个活动声明为启动器活动时，我遇到了崩溃问题。

`Open`是完成安装后直接打开应用程序的工具。

`Done`如果您不打算在安装后打开应用程序，则可以选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:02:57.387

**打开**很简单，启动新安装的应用程序

和

**完成**，只需返回上一个位置。

它都与应用程序的行为方式无关。

# php - PHP SDK + 代码点火器

> ID：10209881
> 
> 赞同：0
> 
> 时间：2012-04-18T12:59:20.327
> 
> 标签：php, facebook, codeigniter

首先，我下载了 Facebook PHP SDK 并在这里应用了第一个答案： [Using Facebook PHP-SDK 3.x to register/login user with Codeigniter 2.1.0](https://stackoverflow.com/questions/9454238/using-facebook-php-sdk-3-x-to-register-login-user-with-codeigniter-2-1-0)

在我的控制器中：

1.  我尝试获取用户： $this->facebook->getUser(); .. 如果是 0，我调用另一个函数 $this->facebook_login(); - 否则我会在数据库中保存一些数据，例如名称。

2.  在 facebook_login() 中，会生成一个 Login Url：$this->facebook->getLoginUrl() - 并传递给视图，该视图显示它。

3.  到目前为止，我单击登录 url 并重定向到 Facebook，请求批准和身份验证等 - 然后将我重定向回“1”中的页面。

4.  问题是，getUser 返回零。我打印了 $ *SESSION 变量，发现只有 fb* {appId}_state 正在设置。

我尝试使用以下代码创建另一个不在 CI 文件夹中的 php 文件（login.php）：

```
<?php

define('BASEPATH', '');
require_once('application/libraries/facebook.php');

$fb = new Facebook(array('appId'=>'...', 'secret'=>'...'));

$user = $fb->getUser();

if($user == 0){
    $login = $fb->getLoginUrl();
    echo '<a href="'.$login.'">Login</a>';
} else {
    print_r($fb->api('/me'));
}

?> 
```

如果我访问 login.php 然后访问上面“1”中的页面 - getUser 返回用户 ID 并且 $_SESSION 包含用户详细信息。因此，我猜问题出在 CodeIgniter 但我不知道如何解决它。

我搜索并尝试了几种解决方案，但这是我能做的最好的。如果可能，我不想使用 JS SDK。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:14:15.753

[我找到了一个解决方案，并在这里](http://www.galalaly.me/index.php/2012/04/using-facebook-php-sdk-3-with-codeigniter-2-1/)写了一篇关于它的博客文章。

# visual-studio-2010 - Visual Studio 崩溃丢失所有新设置的断点

> ID：10209883
> 
> 赞同：1
> 
> 时间：2012-04-18T12:59:35.467
> 
> 标签：visual-studio-2010, visual-c++, crash, breakpoints, data-loss

每当我在运行我的 VC++ 应用程序时安装的 Visual Studio 2010 Professional 崩溃时，我都会丢失我在该会话期间设置的所有断点（之前会话中的其他断点仍然存在），这使我相信断点仅在项目关闭时才真正保存。任何人都可以确认这一点，并提供有用的提示（除了偶尔关闭和重新打开我的项目）？

注意：会话不是指调试会话，而只是项目打开的时间段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:21:32.913

您是否经常更改断点？可以导出断点以供以后重用：

[http://weblogs.asp.net/scottgu/archive/2010/04/21/vs-2010-debugger-improvements-breakpoints-datatips-import-export.aspx](http://weblogs.asp.net/scottgu/archive/2010/04/21/vs-2010-debugger-improvements-breakpoints-datatips-import-export.aspx)

# javascript - 创建某个标签时是否有可能引发事件？

> ID：10209884
> 
> 赞同：2
> 
> 时间：2012-04-18T12:59:35.690
> 
> 标签：javascript, jquery, dom, dom-events

我想为`onCreate`将创建的与 JQuery 选择器匹配的所有标记创建一个事件的等效项。

例如，让我们考虑一个结果`$("#foo > .bar > ul > li")`为空集的文档。我有一个名为的函数`fooBar`，我希望`$("#foo > .bar > ul > li")`在创建标签匹配时调用此函数。

我想在我的

```
$(function() {}); 
```

有人知道这种可能性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:09:30.197

As far as I'm aware there aren't any events that are fired when elements are added to the DOM, so there's nothing you can bind a handler to in order to check for this.

What you can do is set up a polling routine that will periodically check the DOM for elements that match your selector, compare the current number of matches against the previous value, and perform whatever actions you wish if they differ.

```
var matchedElements = 0;

function poll() {
    var $elements = $("#foo > .bar > ul > li");
    if($elements.length > matchedElements) {
        fooBar();
    }
    matchedElements = $elements.length;
}

setInterval(poll, 500); // runs poll() every half a second 
```

This all assumes that you're not controlling the creation of these elements, or at least aren't controlling them in a way that allows you to reliably know they've been created.

If the only source of these elements is a single function you've written then you could simply extend that to trigger a handler for a custom event bound in jQuery.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T13:22:08.423

## 最实用的解决方案

您可以连接到[`DOMNodeInserted`](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted)事件`document`以检测更改，并使用[`.is`](http://docs.jquery.com/Is)来检查它们是否与您选择的选择器匹配。

```
$(function() {
    var selector = "whatever";
    $(document).on('DOMNodeInserted', function(e) {
        if ($(e.srcElement || e.target).is(selector)) {
            alert("Matching element inserted!");
        }
    });
});​ 
```

**[看到它在行动](http://jsfiddle.net/agq4v/)**。

## 兼容性和替代品

这种方法很方便，但它确实有两个缺点：

1.  该`DOMNodeInserted`事件已弃用。
2.  它不适用于 IE < 9，并且无法使其工作。

至于第一个，我不会认为这是一个问题。它可能已被弃用，但只要没有其他选择，我真的不认为任何浏览器供应商会取消此功能。也许在五年左右这将成为一个实际问题，但由于代码总共有 10 行左右，因此更新它以符合最新标准肯定会很容易。

对于 IE 兼容性，可悲的事实是你不能直接做任何事情。但是，您可以诉诸冗长、可怕的 hack，通过修改 DOM 元素的原型来提供结果。请参阅为[IE8 量身定制的示例](http://jsfiddle.net/kLNQ8/)。

可悲的是，这种方法存在多个问题：

*   您需要找出所有可能导致 DOM 被修改的[方法](https://developer.mozilla.org/en/DOM/element#Methods)（或者至少是您将使用的所有方法）并将它们编织到解决方案中。将来，您将有义务检查是否添加了新的 DOM 变异方法并跟上对它们的支持。
*   对于您选择以此为目标的所有浏览器（如果不止一个），您需要格外小心地为方法提供正确的替换。
*   扩展 DOM（通常）[可能会有问题](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)。如果您认为这种特定的扩展方法不好，请考虑 IE7 不支持它，并且在该浏览器上，您必须替换*DOM 中所有元素的*方法，以确保您挂钩所有可能的修改。
*   具体来说，您不能仅使用此代码定位所有当前浏览器（例如，Chrome 将这些方法定义为 on `Node.prototype`，而不是 on `Element.prototype`）。即使是在开玩笑，也不应该提及针对*未来的浏览器。*

最后，您始终可以决定使用轮询来检测更改，正如 Anthony 在他的回答中所解释的那样。

## 相关资源

*   [DOMNodeInserted 在 IE 中的等效项？](https://stackoverflow.com/questions/2143929/domnodeinserted-equivalent-in-ie)
*   [修改每个可能的 DOM 元素的原型](https://stackoverflow.com/questions/3653818/modify-prototypes-of-every-possible-dom-element)

# java - 对 PHP SOAP 服务器的 Android KSOAP2 请求

> ID：10209887
> 
> 赞同：4
> 
> 时间：2012-04-18T12:59:46.680
> 
> 标签：java, php, android, soap, ksoap2

我正在尝试在我的 android 应用程序中创建一个 SOAP 客户端。我已经用 php SOAP 客户端测试了服务器，它一直在工作。但在我的 android 应用程序中，我仍然遇到异常。谁能帮助我出了什么问题以及如何解决？谢谢

PHP

```
<?php
class service
{      
public function service()
{   }

public function login($nickname, $password)
{   

    $sql = "select nick from user 
    where 
    nick =\"$nick\"
    and
    pass = \"$password\"";

    if (($result = $this->db->query($sql)) && ($result->num_rows == 1))
        return true;
    else
        return false;
}  
}

$server = new SoapServer(null, array(
'uri' => "urn://www.domain.cz",
'soap_version' => SOAP_1_2)
);              
$server->setClass("service");     
$server->handle(); 
?> 
```

安卓

```
private static String SOAP_ACTION = "http://www.domain.cz/server/server.php";
    private static String NAMESPACE = "urn://www.domain.cz";
    //need fix namespace to work, final solution
    // private static String NAMESPACE = "http://www.domain.cz/server/";
    private static String METHOD_NAME = "login";
    private static String URL = "http://www.domain.cz";

public void Connect()
{
    //Initialize soap request + add parameters
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    //Use this to add parameters
    request.addProperty("nick","peter");
    request.addProperty("password","somepassword");

    //Declare the version of the SOAP request
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
    envelope.setOutputSoapObject(request);

    //Needed to make the internet call
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
            //this is the actual part that will call the webservice
            androidHttpTransport.call(SOAP_ACTION, envelope);//HERE is xmlpullparserexception after a while
    } catch (Exception e) {
            e.printStackTrace();
    }

    // Get the SoapResult from the envelope body.
    SoapObject result = (SoapObject)envelope.bodyIn;

    if(result != null){
            TextView t = (TextView)this.findViewById(R.id.resultbox);

            //Get the first property and change the label text
            t.setText("SOAP response:\n\n" + result.getProperty(0).toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:41:44.143

您的 URL 应该是肥皂端点，即`http://www.domain.cz/server/server.php`

您的 SOAP_ACTION 应包含方法名称，即`http://www.domain.cz/server/server.php/login`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:54:37.823

你正在使用 KSOAP(?) 我猜想。我认为您需要将 URL 指向 Web 服务路径。我在您的 URL 中没有看到 WSDL。

# javascript - jquery获取子元素值

> ID：10209893
> 
> 赞同：1
> 
> 时间：2012-04-18T13:00:12.763
> 
> 标签：javascript, jquery

这是一个愚蠢的问题，但我卡住了。为什么我的第一个有效，而另一个无效 3\. 通过阅读文档，所有 4 个都应该完成这项工作。我想在更大的用例中获取表单的一个元素，同一页面上可能有其他元素在其他表单或其他 div 中具有相同的名称，所以第四个选项是我真正想要工作的。但我不明白为什么所有这些都不起作用。

[http://jsfiddle.net/7vF5z/1/](http://jsfiddle.net/7vF5z/1/)

html:

```
 <form id="filter_form_id" name="filter_form" method="get" action="/retrieved_data_records">

 <select id="brand_id" name="brands">
 <option value="0"></option>
 <option value="143272526">Brand1</option>
 <option selected="selected" value="269998788">Brand2</option>
 <option value="330516076">Brand3</option>
 <option value="330516077">Brand4</option>

 </select>
</form> 
```

js：

```
 alert ("The val: " +  $('#brand_id').val() );    
 alert ("The val: " +  $('brands').val() );  
 alert ("The val: " +  $('#filter_form_id brands').val() );  
 alert ("The val: " +  $('#filter_form_id > brands').val() ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T13:02:38.697

你从哪里得到这些选择器？

1.  `$('brands').val()`正在寻找`nodeName`是`brands`（都不是）的元素。要检查名称属性，请使用`$('[name="brands"]').val()`
2.  `$('#filter_form_id brands')`正在寻找那些`nodeName`是（都不是）的元素，这些元素是 ID 为（绝对不是）`brands`的元素的后代。`filter_form_id`
3.  `$('#filter_form_id => brands')`完全无效。如果你想要你想要的子选择器`$('#filter_form_id > brands')`

如需更完整的文档，请查看可用选择器的[jQuery 文档](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T13:01:44.953

您的选择器`brands`就像一个元素名称一样使用。您需要使用属性选择器，例如`[name="brands"]`.

更新的测试用例：http: [//jsfiddle.net/7vF5z/3/](http://jsfiddle.net/7vF5z/3/)

```
alert ("The val: " +  $('#brand_id').val() );    
alert ("The val: " +  $('[name="brands"]').val() );  
alert ("The val: " +  $('#filter_form_id [name="brands"]').val() );  
alert ("The val: " +  $('#filter_form_id > [name="brands"]').val() ); 
```

* * *

> 第四个选项是我真正想要工作的

如果这应该是一个子选择器，那么您需要通过以下方式更正它：

*   使用正确的子选择器语法
*   使用属性选择器，如我的示例所示。

没有真正的理由在那里使用子选择器，除非您将`name`在同一表单中拥有多个具有相同值的控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T13:03:23.347

因为使用纯字符串 like `brands`，jQuery 会查找具有该名称的标签。而且`brands`不是标签。否则你能做的是，`$('select[name="brands"]').val()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T13:05:24.177

```
// OK
alert ("The val: " +  $('#brand_id').val() );
// there is no tag <brands />
alert ("The val: " +  $('brands').val() );  
// there is still no tag <brands />
alert ("The val: " +  $('#filter_form_id brands').val() );
// KO, doesn't mean anything
alert ("The val: " +  $('#filter_form_id => brands').val() ); 
```

# sql - 如何在大型数据库中找到从一个表到另一个表的连接路径

> ID：10209894
> 
> 赞同：5
> 
> 时间：2012-04-18T13:00:22.680
> 
> 标签：sql, database, sql-server-2008, tsql

是否有一种简单的方法（或工具）可以在大型数据库中查找从一个表到另一个表的连接路径？

我目前正在开发一个数据库有超过 150 个表的项目。下面是我正在尝试做的一些用例。

用例：

输入

*   选择表 A
*   选择表 B

输出

*   打印出表之间的所有可用路径。
*   打印出最有效的路线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T20:35:59.467

由于我假设您有一些通过数据库的非常复杂的路径，您将无法仅使用一个查询甚至几个查询来完成它。我已经完成了（通过我继承的一个项目），并学到了一些有趣的东西。但我必须编写一个程序来做到这一点。

我所做的是使用 Diego 在他的回答中引用的模式视图，并应用一些方法来解决图论问题（因为这基本上就是你所拥有的，在这里，表是节点，外键链接在图中。）

基本上，如果我没记错的话（这是几年前的事），你从一个表开始，然后通过将每个引用的另一个表的名称放入队列来处理它的所有外键。检查自引用和循环（您需要一个哈希集或已处理表的列表。）然后将下一个表从队列中弹出并重复。最终，您将遇到另一张桌子，或者已经处理了您可以从原始桌子“到达”的每张桌子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T13:44:31.240

这应该可以帮助你。它将显示您的表、具有 FK 的列、引用的表和列以及 FK 名称。

```
SELECT
K_Table = FK.TABLE_NAME,
FK_Column = CU.COLUMN_NAME,
PK_Table = PK.TABLE_NAME,
PK_Column = PT.COLUMN_NAME,
Constraint_Name = C.CONSTRAINT_NAME
FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
SELECT i1.TABLE_NAME, i2.COLUMN_NAME
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2 ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
WHERE i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
) PT ON PT.TABLE_NAME = PK.TABLE_NAME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T22:24:21.603

我从 Zen 和上面的代码中借用了代码并创建了这个。到目前为止，它似乎工作得很好。

```
IF OBJECT_ID('tempdb.dbo.#TableSchema') IS NOT NULL BEGIN DROP TABLE #TableSchema END
SELECT
PK_Table = PK.TABLE_NAME,
PK_Column = PT.COLUMN_NAME,
K_Table = FK.TABLE_NAME,
FK_Column = CU.COLUMN_NAME,
Constraint_Name = C.CONSTRAINT_NAME
INTO #TableSchema
FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
SELECT i1.TABLE_NAME, i2.COLUMN_NAME
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2 ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
WHERE i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
) PT ON PT.TABLE_NAME = PK.TABLE_NAME

CREATE TABLE [#TablesList] (
 c_from NVARCHAR(450), 
 c_to NVARCHAR(450),
 PRIMARY KEY (c_from, c_to)
 );

INSERT    INTO [#TablesList]
SELECT DISTINCT PK_Table,K_Table from #TableSchema

IF OBJECT_ID('__TablesLink__') IS NOT NULL BEGIN DROP TABLE [__TablesLink__] END
CREATE TABLE [__TablesLink__] (c_path NVARCHAR(MAX));-- PRIMARY KEY);

WITH PathCTE 
AS
(SELECT c_from, c_to,
        CAST('>' + CAST(c_from AS NVARCHAR(MAX)) + '>' + 
        CAST(c_to AS NVARCHAR(MAX)) + '>' AS NVARCHAR(MAX)) AS c_path
 FROM [#TablesList] AS C1
 UNION ALL
 SELECT C.c_from, C.c_to,
        CAST(P.c_path + C.c_to + '>' AS NVARCHAR(max))
 FROM PathCTE AS P
 JOIN [#TablesList] AS C
   ON P.c_to = C.c_from
 WHERE P.c_path NOT LIKE '%>' + 
                    CAST(C.c_from AS NVARCHAR(max)) + 
                    '>' + 
                    CAST(C.c_to AS NVARCHAR(max)) + 
                    '>%')

INSERT INTO [__TablesLink__]
SELECT c_path FROM PathCTE;

SELECT c_path
FROM [__TablesLink__]
WHERE c_path LIKE '>' + 'tableA' + '>%'
  AND c_path LIKE '%>'+ 'tableZ' +'>'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-24T15:23:41.080

我不同意上面推荐的答案，这实际上很容易通过几个递归 CTE 来实现。其中第一个可用于导航给定源表中的所有外键路径。如果存在路径，则此结果可用于定位目标表。

第二个递归 CTE 可用于备份结果链以查找两个表之间的选定路径信息。

请看下面...

```
DECLARE @SOURCE_TABLE_NAME  NVARCHAR(200) = 'MYSOURCETABLE'
DECLARE @SOURCE_SCHEMA_NAME NVARCHAR(200) = 'MYSOURCESCHEMA'
DECLARE @TARGET_TABLE_NAME  NVARCHAR(200) = 'MYTARGETTABLE'
DECLARE @TARGET_SCHEMA_NAME NVARCHAR(200) = 'MYTARGETSCHEMA'

-- holds the navigation of all foreign-key routes from the source table onwards.
--------------------------------------------------------------------------------
DECLARE @RESULTS AS TABLE
(
    [ROW_ID]            [UNIQUEIDENTIFIER] NOT NULL PRIMARY KEY,
    [PARENT_ROW]        [UNIQUEIDENTIFIER]  NULL,
    [CHILD_SCHEMA]      [NVARCHAR](250)     NULL,
    [CHILD_TABLE]       [NVARCHAR](250)     NULL,
    [CHILD_COLUMN]      [NVARCHAR](250)     NULL,
    [PARENT_SCHEMA]     [NVARCHAR](250)     NULL,
    [PARENT_TABLE]      [NVARCHAR](250)     NULL,
    [PARENT_COLUMN]     [NVARCHAR](250)     NULL,
    [CONSTRAINT_NAME]   [NVARCHAR](250)     NULL,
    [PATH]              [NVARCHAR](600)     NULL,
    [DEPTH]             [INT]               NOT NULL
)

;WITH [PARENT_RELATIONS]
        AS ( 
                -- return specific process
                --------------------------
                SELECT  NEWID()                                                                             AS [ROW_ID]             ,
                        CAST(NULL AS UNIQUEIDENTIFIER)                                                      AS [PARENT_ROW]         ,
                        [CHILD].[TABLE_SCHEMA]                                                              AS [CHILD_SCHEMA]       ,
                        [CHILD].[TABLE_NAME]                                                                AS [CHILD_TABLE]        ,
                        [CHILD_COLUMN].[COLUMN_NAME]                                                        AS [CHILD_COLUMN]       ,
                        [PARENT].[TABLE_SCHEMA]                                                             AS [PARENT_SCHEMA]      , 
                        [PARENT].[TABLE_NAME]                                                               AS [PARENT_TABLE]       ,
                        [PARENT_COLUMN].[COLUMN_NAME]                                                       AS [PARENT_COLUMN]      ,
                        [CONTRAINT].[CONSTRAINT_NAME]                                                       AS [CONSTRAINT_NAME]    ,
                        CAST(UPPER( 
                            '[' + [CHILD].[TABLE_SCHEMA]    + '].[' + [CHILD].[TABLE_NAME]  + '].[' + [CHILD_COLUMN].[COLUMN_NAME]  + '] = ' +
                            '[' + [PARENT].[TABLE_SCHEMA]   + '].[' + [PARENT].[TABLE_NAME] + '].[' + [PARENT_COLUMN].[COLUMN_NAME] + ']') AS [varchar](600))           AS [PATH]   ,
                        0                                                                                   AS [DEPTH]  

                FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS [CONTRAINT]

                    INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS [CHILD]
                    ON [CONTRAINT].[CONSTRAINT_NAME] = [CHILD].[CONSTRAINT_NAME]

                    INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS [PARENT]
                    ON  [PARENT].[CONSTRAINT_NAME] = [CONTRAINT].[UNIQUE_CONSTRAINT_NAME]
                    AND [PARENT].[CONSTRAINT_TYPE] = 'PRIMARY KEY'

                    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE [CHILD_COLUMN] 
                    ON [CONTRAINT].[CONSTRAINT_NAME] = [CHILD_COLUMN].[CONSTRAINT_NAME]

                    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS [PARENT_COLUMN]
                    ON  [PARENT_COLUMN].[CONSTRAINT_NAME]   = [PARENT].[CONSTRAINT_NAME]
                    AND [PARENT_COLUMN].[TABLE_NAME]        = [PARENT].[TABLE_NAME]

                WHERE   [CHILD].[TABLE_NAME]    = @SOURCE_TABLE_NAME
                AND     [CHILD].[TABLE_SCHEMA]  = @SOURCE_SCHEMA_NAME

            UNION ALL

                -- return related relationships
                --------------------------
                SELECT  NEWID()                                                                             AS [ROW_ID]             ,
                        [PARENT_RELATIONS].[ROW_ID]                                                         AS [PARENT_ROW]         ,
                        [CHILD].[TABLE_SCHEMA]                                                              AS [CHILD_SCHEMA]       ,
                        [CHILD].[TABLE_NAME]                                                                AS [CHILD_TABLE]        ,
                        [CHILD_COLUMN].[COLUMN_NAME]                                                        AS [CHILD_COLUMN]       ,
                        [PARENT].[TABLE_SCHEMA]                                                             AS [PARENT_SCHEMA]      , 
                        [PARENT].[TABLE_NAME]                                                               AS [PARENT_TABLE]       ,
                        [PARENT_COLUMN].[COLUMN_NAME]                                                       AS [PARENT_COLUMN]      ,
                        [CONTRAINT].[CONSTRAINT_NAME]                                                       AS [CONSTRAINT_NAME]    ,
                        CAST([PARENT_RELATIONS].[PATH] + UPPER(' -->> ' +
                            '[' + [CHILD].[TABLE_SCHEMA]    + '].[' + [CHILD].[TABLE_NAME]  + '].[' + [CHILD_COLUMN].[COLUMN_NAME]  + '] = ' +
                            '[' + [PARENT].[TABLE_SCHEMA]   + '].[' + [PARENT].[TABLE_NAME] + '].[' + [PARENT_COLUMN].[COLUMN_NAME] + ']') AS [varchar](600))           
                                                                            AS [PATH]   ,
                        [PARENT_RELATIONS].[DEPTH] + 1                                                      AS [DEPTH]  

                FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS [CONTRAINT]

                    INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS [CHILD]
                    ON [CONTRAINT].[CONSTRAINT_NAME] = [CHILD].[CONSTRAINT_NAME]

                    INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS [PARENT]
                    ON  [PARENT].[CONSTRAINT_NAME] = [CONTRAINT].[UNIQUE_CONSTRAINT_NAME]
                    AND [PARENT].[CONSTRAINT_TYPE] = 'PRIMARY KEY'

                    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE [CHILD_COLUMN] 
                    ON [CONTRAINT].[CONSTRAINT_NAME] = [CHILD_COLUMN].[CONSTRAINT_NAME]

                    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS [PARENT_COLUMN]
                    ON  [PARENT_COLUMN].[CONSTRAINT_NAME]   = [PARENT].[CONSTRAINT_NAME]
                    AND [PARENT_COLUMN].[TABLE_NAME]        = [PARENT].[TABLE_NAME]

                        INNER JOIN [PARENT_RELATIONS] AS [PARENT_RELATIONS]
                        ON  [PARENT_RELATIONS].[PARENT_TABLE]       = [CHILD].[TABLE_NAME]
                        AND [PARENT_RELATIONS].[PARENT_SCHEMA]      = [CHILD].[TABLE_SCHEMA]

            )

            -- inserts all possible results into local storage for iteration
            ----------------------------------------------------------------
            INSERT INTO @RESULTS SELECT * FROM [PARENT_RELATIONS];

;WITH [KNOWN_PATH]
AS (
            -- return the optimal root target row information
        -------------------------------------------------
        SELECT      [FILTER].[PARENT_ROW]       as [PARENT_ROW]     ,
                    [FILTER].[CHILD_SCHEMA]     as [CHILD_SCHEMA]   ,
                    [FILTER].[CHILD_TABLE]      as [CHILD_TABLE]    ,
                    [FILTER].[CHILD_COLUMN]     as [CHILD_COLUMN]   ,
                    [FILTER].[PARENT_SCHEMA]    as [PARENT_SCHEMA]  , 
                    [FILTER].[PARENT_TABLE]     as [PARENT_TABLE]   ,
                    [FILTER].[PARENT_COLUMN]    as [PARENT_COLUMN]  ,
                    [FILTER].[DEPTH]            as [DEPTH]          ,
                    [FILTER].[PATH]             as [PATH]
        FROM        (
                        SELECT      ROW_NUMBER() OVER(ORDER BY [DEPTH]) AS [OPTIMAL],
                                    [RESULTS].[PARENT_ROW]          as [PARENT_ROW]     ,
                                    [RESULTS].[CHILD_SCHEMA]        as [CHILD_SCHEMA]   ,
                                    [RESULTS].[CHILD_TABLE]         as [CHILD_TABLE]    ,
                                    [RESULTS].[CHILD_COLUMN]        as [CHILD_COLUMN]   ,
                                    [RESULTS].[PARENT_SCHEMA]       as [PARENT_SCHEMA]  , 
                                    [RESULTS].[PARENT_TABLE]        as [PARENT_TABLE]   ,
                                    [RESULTS].[PARENT_COLUMN]       as [PARENT_COLUMN]  ,
                                    [RESULTS].[DEPTH]               as [DEPTH]          ,
                                    [RESULTS].[PATH]                as [PATH]

                        FROM    @RESULTS AS [RESULTS]
                        WHERE   [RESULTS].[PARENT_TABLE]    = @TARGET_TABLE_NAME
                        AND     [RESULTS].[PARENT_SCHEMA]   = @TARGET_SCHEMA_NAME
                    ) AS [FILTER]
        WHERE   [FILTER].[OPTIMAL] = 1

        UNION ALL

            -- return the parent of the target up the path
            -------------------------------------------
            SELECT      [RESULTS].[PARENT_ROW]          as [PARENT_ROW]     ,
                        [RESULTS].[CHILD_SCHEMA]        as [CHILD_SCHEMA]   ,
                        [RESULTS].[CHILD_TABLE]         as [CHILD_TABLE]    ,
                        [RESULTS].[CHILD_COLUMN]        as [CHILD_COLUMN]   ,
                        [RESULTS].[PARENT_SCHEMA]       as [PARENT_SCHEMA]  , 
                        [RESULTS].[PARENT_TABLE]        as [PARENT_TABLE]   ,
                        [RESULTS].[PARENT_COLUMN]       as [PARENT_COLUMN]  ,
                        [RESULTS].[DEPTH]               as [DEPTH]          ,
                        [RESULTS].[PATH]                as [PATH]

            FROM    @RESULTS AS [RESULTS]

                INNER JOIN [KNOWN_PATH]
                ON [RESULTS].[ROW_ID] = [KNOWN_PATH].[PARENT_ROW]

        )

        -- return the correct path from one-table to another
        ----------------------------------------------------
        SELECT  [DEPTH]         ,
                [PATH]          ,
                [CHILD_SCHEMA]  , 
                [CHILD_TABLE]   ,
                [CHILD_COLUMN]  ,
                [PARENT_SCHEMA] ,
                [PARENT_TABLE]  ,
                [PARENT_COLUMN]  
        FROM [KNOWN_PATH] ORDER BY [DEPTH] ASC 
```

注意：如果从源表到目的表存在多条路由，可以利用ROW_NUMBER()在二级CTE的primer语句中组织结果集，对结果进行过滤，只得到最优路径使用最低 DEPTH 结果。我现在已经编辑了 SQL 语句以包含它，因为这是请求者请求的。

亲切的问候，

蒂姆

# path - 使用 MacPorts 安装 wxWidgets-devel 后，我应该在 PATH 中添加什么？

> ID：10209898
> 
> 赞同：1
> 
> 时间：2012-04-18T13:00:38.207
> 
> 标签：path, macports, wxwidgets

我在 Snow Leopard 上使用 Macports 安装 wxWidgets-devel，希望随后能成功安装 wxHaskell ...

我必须检查您的路径以确保您使用的是 wxWidgets 而不是默认的 Mac ”

端口内容 wxWidgets-devel 说我在 /opt/local/bin (wx-config, wxrc) 和 /opt/local/include/wx-2.9/wx... 和 /opt/local/ 中安装了很多 wx 的东西lib/libwx_baseu...

我应该在 PATH 中添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:26:01.517

安装后你应该有 wx-config 脚本可用。尝试运行

> wx-config --cxxflags

或者

> wx-config --libs

第一个返回编译器的所有参数，第二个返回链接器的所有参数。

# c# - C# Forms - 从 Buttons、PictureBoxes、

> ID：10209900
> 
> 赞同：2
> 
> 时间：2012-04-18T13:00:48.060
> 
> 标签：c#, forms, controls

这就是问题所在：我添加了很多按钮、图片框、文本框和其他控件，如下所示：

`btnStart = new Button();`bla bla bla 文本 文本 文本...

我一直在添加更多。所以，我了解到我可以一一删除它们：

```
Controls.Remove(btnStart); 
```

但我确实想知道的是，如果有一种方法可以一次删除所有这些，而不是在我想删除它们时指定它们中的每一个。基本上我想创建新的：

```
private void ClrScr() { //Help??? } 
```

一旦从此表单调用，它将删除所有控件（一切都以一种形式完成）。任何人都可以帮忙吗？我对此还是很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:03:08.590

`Controls.Clear( )`应该这样做。

编辑：

如下所述 -`Controls.Clear( )`可能导致内存泄漏。看看这个答案：[如何在不导致内存泄漏的情况下清除（）控件](https://stackoverflow.com/questions/7705234/how-to-clear-controls-without-causing-a-memory-leak)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:03:12.443

如果要删除主窗体的所有子控件，只需使用`Controls.Clear()`

如果您有一些不想删除的固定控件，则将动态生成的控件添加到面板中。然后您可以调用`mypanel.Controls.Clear()`仅删除这些控件。

编辑：似乎 Controls.Clear 会导致内存泄漏，因此您可以使用Hans Passant 的[这个答案](https://stackoverflow.com/questions/7705234/how-to-clear-controls-without-causing-a-memory-leak)。

# android - 不同线程的内部存储

> ID：10209904
> 
> 赞同：0
> 
> 时间：2012-04-18T13:01:02.830
> 
> 标签：android, multithreading

美好的一天，我有一个理论问题。我有一个运行一些线程的应用程序。其中一个线程将 xml 文件下载到本地存储，其他线程是否可以访问该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:05:16.903

所有线程都可以访问，但如果您不**同步**访问数据，数据可能会损坏或不完整。有多种选择。请参阅[本文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。

# visual-studio-2010 - 输入为浮点数

> ID：10209923
> 
> 赞同：1
> 
> 时间：2012-04-18T13:01:39.157
> 
> 标签：visual-studio-2010

我想使用 MFC 应用程序在 Visual Studio 2010 上制作一个计算器。为此，我使用了一个对话框来创建计算器并添加按钮和编辑框。众所周知，编辑框用作输入。所以我想将输入设为浮点输入。所以这就是下面的句子：

有一句话：先选两个编辑框，放在对话框上。使用 View 菜单中的 Class Wizard 将每个连接到一个浮点数、值 number1 或 number2 。

编辑框在那里。现在如何将它们连接到浮点数 1 ？程序是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:23:20.640

如果我正确理解您的问题，您希望将编辑框绑定到`float`对话框的成员变量。这称为[对话数据交换](http://msdn.microsoft.com/en-us/library/xwz5tb1x.aspx)。在这个答案中，我将尝试解释如何用代码来实现这一点（它应该比教授类向导更有帮助）。

基本上，您`float`在对话框中定义了两个成员变量，以及它们的访问器：

```
class CYourDialog : CDialog
{
    // ...

public:
    float GetNumber1() const {
        return m_number1;
    }

    void SetNumber1(float val) {
        m_number1 = val;
    }

    float GetNumber2() const {
        return m_number2;
    }

    void SetNumber2(float val) {
        m_number2 = val;
    }

private:
    float m_number1;
    float m_number2;
}; 
```

然后，您覆盖对话框的[DoDataExchange()方法，并从那里调用](http://msdn.microsoft.com/en-us/library/x4d0y489.aspx)[DDX_Text()](http://msdn.microsoft.com/en-us/library/a1xttfdt.aspx)以将成员变量绑定到您的控件：

```
void CYourDialog::DoDataExchange(CDataExchange *dx)
{
    CDialog::DoDataExchange(dx);
    DDX_Text(dx, IDC_NUMBER1_CONTROL_ID, m_number1);
    DDX_Text(dx, IDC_NUMBER2_CONTROL_ID, m_number2);
} 
```

从那里开始，MFC 框架将在对话框初始化时使用成员变量的值自动填充编辑框，并在`OK`单击按钮时使用编辑框的值更新成员变量。这是一件好事，因为您只需读取和写入这些成员变量，而不是直接操作编辑框。

# java - 如何在android中使用unicodes显示阿拉伯字符？

> ID：10209924
> 
> 赞同：2
> 
> 时间：2012-04-18T13:01:44.457
> 
> 标签：java, android

我是 android 新手。我准备了一个应用程序，它支持多种语言。我想显示`Arabic`字符。我找到了一个 Unicode 站点，

```
http://www.unics.uni-hannover.de/nhtcapri/arabic-alphabet.html 
```

我使用以下代码显示阿拉伯字母，

```
StringBuilder sb = new StringBuilder();
         sb.append("\u0649");
         tv.setText(sb.toString()); 
```

它工作正常，但显示方形框。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:40:05.653

Android 2.1 和 Android 2.2(support) 没有正确实现阿拉伯字体。
Android 3.x（来自 Honeycomb）完全支持阿拉伯语。[您可以在此PDF](http://unicode.org/charts/PDF/UFB50.pdf)
中找到阿拉伯语的 Unicode 字符， 或者您可以按照此[答案](https://stackoverflow.com/a/7962813/1213738) 中给出的程序进行休整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:06:57.997

在 Honeycomb 之前，没有对阿拉伯字体的原生支持。

# php - Codeigniter uri->segment 在查询中不起作用

> ID：10209927
> 
> 赞同：0
> 
> 时间：2012-04-18T13:01:47.053
> 
> 标签：php, codeigniter

我通过 uri 传递了一些变量，然后使用 $this->uri->segment(3) 收集它们使用我收集的值进行活动记录查询。当其中一个变量是诸如“first_last”之类的组合词时，即使我知道数据库有这样的条目，查询也会返回 null。但是，如果它是一个单词，例如“first”，则查询可以正常工作。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:00:56.877

我认为这是因为 URL 中的字符被拒绝。查看 CI 的配置并在允许的字符的正则表达式中添加“_”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:07:19.200

将“first_last”更改为“first-last”也会导致下划线在 url 上不好，然后看看它是否有效；）

# python - 备用 CSV 行删除

> ID：10209932
> 
> 赞同：0
> 
> 时间：2012-04-18T13:02:06.547
> 
> 标签：python

我有一个csv文件如下：

```
gindex
1
1
2
2
3
3
7
7 
```

我错误地将每个元素打印了两次。如何删除每个重复的行并获得以下结果：

```
gindex
1
2
3
7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:10:28.900

不需要花哨的 csv 处理，如果它真的只是你想要解雇的每第二行，请执行以下操作：

```
with open("csv") as f:
    for i, line in enumerate(f):
         if i % 2 == 0:
             print(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:06:36.410

您可以将文件读入一个数组，跳过每隔一行，然后将其写出（这次是正确的！）覆盖原始文件。如果文件太大而无法存储在内存中，请在将原始文件读入临时文件时将更正的版本写出，然后移动/复制以覆盖原始文件。

# c++ - 使用opencv绘制正弦波

> ID：10209935
> 
> 赞同：7
> 
> 时间：2012-04-18T13:02:13.427
> 
> 标签：c++, visual-studio-2010, opencv, graph

我想使用 openCV 在图像上绘制正弦波。我开发了以下代码，但输出未按预期出现：

```
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include "opencv/cv.h"
#include "opencv/highgui.h"
void main()
{ 
double y[100]; 
      float x; 

  for(x=0;x<100;x++)
  {
      y[(int)floor(x)]=sin(x);

  }

  IplImage *grf = cvCreateImage( cvSize( 200, 200), IPL_DEPTH_8U, 1 );

  for(int x=0;x<100;x++)
  {
  cvLine(grf ,                         /* the dest image */
          cvPoint(x, y[x]),  /* start point */

           cvPoint(x+1, y[x+1]),            /* end point */
           CV_RGB(255, 0, 0),      /* the color; green */
           2, 4, 0);                    /* thickness, line type, shift */

  }

  cvNamedWindow("img", CV_WINDOW_AUTOSIZE);
    cvShowImage("img", grf);
    cvWaitKey(0);
    cvDestroyWindow("img");
    cvReleaseImage(&grf);
} 
```

我已经验证了 y 数组中的值是正确的，并使用 MATLAB 绘制了这些 y 值。MATLAB 图出现正弦波。你能告诉我为什么我没有使用上面的代码得到正确的情节。

我的正弦波输出图如下：你可以看到我只是得到一条水平线而不是正弦波。对此有任何帮助吗？

![在此处输入图像描述](../Images/24f874484d3ba60f2f0bd0d5fdd164d4.png)

已解决：按照答案后，我得到以下图像：

![在此处输入图像描述](../Images/df62d32d1803ff86d53904f745bb741b.png) 谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T13:07:57.263

该`sin`函数返回一个值 [-1:1]，因此您在图像上的第 0 行和第 1 行之间设置坐标。您需要增加 的幅度`sin`，将其移至零值并降低正弦波的频率（因为 sin 接受以弧度表示的角度，因此您将分 4 步通过一个周期）：

```
y[(int)floor(x)]=10 + 10*sin(2*.1*PI*x); 
```

因此，您将能够看到正弦波。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:14:57.170

*   在您设置像素值以显示正弦波的位置，添加偏移量。由于图像是 200x200，请尝试将 100,100 添加到 x,y。这应该给你一个从中心开始的自波

# linux - 多个线程定期更新全局变量，而第三个线程等待读取

> ID：10209937
> 
> 赞同：4
> 
> 时间：2012-04-18T13:02:22.003
> 
> 标签：linux, multithreading, thread-safety, pthreads, posix

我有两个线程 A，B 定期更新两个全局传感器读取变量，它们执行相同的例程。第三个线程 C 将在这些值更新后立即对它们进行一些计算。我设置了一些条件变量，当 A 和 B 都更新全局变量时，C 将立即读取。我担心线程 C 错过了一些传感器读数，因为它使用 while 循环的轮询安排在新的 A、B 更新之后。我不确定我的担心是否必要，因为我是 pthread 的新手。我的开发环境是嵌入式linux板，目前正在学习pthread。有没有比为每个全局变量设置两个条件变量更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:42:03.257

我将使用一个互斥锁、一个条件变量和一个谓词整数生成计数器（只是一个初始化为零的常规整数）。逻辑是这样工作的：

更新值：锁定互斥锁。更新值。增加谓词整数。广播条件变量。释放互斥锁。

读取当前值：锁定互斥体。复制谓词整数生成计数器的值。读取值。释放互斥锁。

检查新值：锁定互斥锁。检查谓词整数与您上次读取值时复制的值。如果不同，就有新的价值。释放互斥锁。

等待新值：锁定互斥体。虽然谓词整数仍然保留上次读取值时所保留的值，但阻止释放互斥锁的条件变量。为下一次等待复制新的谓词整数。注意新值。释放互斥锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:14:51.353

您的另一个选择是普通互斥锁。

```
pthread_mutex_t lockX = PTHREAD_MUTEX_INITIALIZER;

[...]

pthread_mutex_lock(lockX);
// do things with shared variable
pthread_mutex_unlock(lockX); 
```

这适用于读取和写入，因为即使使用单个 int，线程 A 也可能读取**一半**值，然后线程 B 写入同一个变量，线程 B 继续读取另一半，从而产生“值”从未存在过。

顺便说一句，您不必*将*全局变量与线程一起使用。您可以将包含任何内容的结构指针传递给线程函数。

# timeout - 在 JSF Richfaces 3.3 中处理 LTPA 令牌超时 (websphere 7.x)

> ID：10209940
> 
> 赞同：1
> 
> 时间：2012-04-18T13:02:31.583
> 
> 标签：timeout, websphere, richfaces, httpsession, ltpa

我在 websphere server 7.x 上使用 JSF richfaces 3.3。

问题是，当用户使用浏览器窗口登录到应用程序并使其保持打开状态超过 LTPA 令牌超时时间时，就会发生 LTPA 令牌过期异常。然后页面不会重定向到配置的“注销”页面。但它被重定向到登录页面，成功登录后会显示一个奇怪的 xml 页面。我知道发生这种情况是因为当我们尝试访问 JSF 资源时 LTPA 令牌超时，因为不存在身份验证详细信息，页面被重定向到登录页面。然后，由于不存在适当的会话，Faces 上下文仍在尝试访问先前的会话 JSF 树，此异常正在发生。

所以问题是：如何在 JSF richfaces3.3 中处理这种 LTPA 令牌超时的情况？

PS：页面在网络会话到期时被重定向到“注销”页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:35:23.050

万西，

如果 LTPA 令牌已过期并且您尝试访问受保护的资源，它自然会将您带到登录页面。

这是预期的行为！

再次登录后，您将返回您请求的页面。根据您的应用程序，可能会创建一个新的 HTTPSession，或者在此期间甚至可能不会创建它。

应构建应用程序来处理此问题。一种方法可能是将用户重定向到应用程序的主页，说明所需信息不可用并且您正在重定向用户（在检查 HTTP 会话以获取所需信息之后）

高温高压

# php - DateTime 类的对象无法转换为字符串

> ID：10209941
> 
> 赞同：60
> 
> 时间：2012-04-18T13:02:36.803
> 
> 标签：php, mysql, datetime, insert

我有一个表格，其中包含2012年**4 月 20 日星期五格式的字符串值**`Film_Release`

我正在循环，我想将它们转换`datetime`成另一个表。我的第二个表有一个名为 的列`Films_Date`，格式为`DATE`。我收到此错误

> DateTime 类的对象无法转换为字符串

```
$dateFromDB = $info['Film_Release'];
$newDate = DateTime::createFromFormat("l dS F Y",$dateFromDB); //( http:php.net/manual/en/datetime.createfromformat.php) 
```

然后我`$newdate`通过插入命令插入到表中。

为什么我会收到这样的错误？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-18T13:06:12.737

因为`$newDate`是类型的对象`DateTime`，而不是字符串。该[文档](http://php.net/manual/en/datetime.createfromformat.php)是明确的：

> 返回`DateTime`根据指定格式格式化的新对象。

如果要从字符串转换`DateTime`回字符串以更改格式，请[`DateTime::format`](http://www.php.net/manual/en/datetime.format.php)在最后调用以从`DateTime`.

```
$newDate = DateTime::createFromFormat("l dS F Y", $dateFromDB);
$newDate = $newDate->format('d/m/Y'); // for example 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-02T19:11:33.870

试试这个：

```
$Date = $row['valdate']->format('d/m/Y'); // the result will 01/12/2015 
```

注意：`$row['valdate']`它是数据库中的起息日

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-12T20:28:34.063

用这个： `$newDate = $dateInDB->format('Y-m-d');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-13T18:56:21.813

如果您使用 Symfony 的 Twig 模板，您可以使用经典模板`{{object.date_attribute.format('d/m/Y')}}`来获取所需的格式化日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T13:08:15.920

您正在尝试插入`$newdate`您的数据库。您需要先将其转换为字符串。使用该`DateTime::format`方法转换回字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-17T00:38:40.337

检查以确保有电影上映日期；如果缺少日期，您将无法在非对象上进行格式化。

```
if ($info['Film_Release']){ //check if the date exists
   $dateFromDB = $info['Film_Release'];
   $newDate = DateTime::createFromFormat("l dS F Y", $dateFromDB);
   $newDate = $newDate->format('d/m/Y'); 
} else {
   $newDate = "none"; 
} 
```

或者

```
 $newDate = ($info['Film_Release']) ? DateTime::createFromFormat("l dS F Y", $info['Film_Release'])->format('d/m/Y'): "none" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-18T08:25:49.473

这有点离题，但我来自谷歌搜索同样的错误。对我来说，当我从 mssql 数据库中选择日期时间字段而不是稍后在 php-script 中使用它时，就会出现这个错误。像这样：

```
$SQL="SELECT Created
FROM test_table";

$stmt = sqlsrv_query($con, $SQL);
if( $stmt === false ) {
    die( print_r( sqlsrv_errors(), true));
}

$Row = sqlsrv_fetch_array($stmt,SQLSRV_FETCH_ASSOC);

$SQL="INSERT INTO another_test_table (datetime_field) VALUES ('".$Row['Created']."')";
$stmt = sqlsrv_query($con, $SQL);
if( $stmt === false ) {
    die( print_r( sqlsrv_errors(), true));
} 
```

INSERT 语句给出错误：`Object of class DateTime could not be converted to string`

我意识到你**不能**只从数据库中选择日期时间：

```
SELECT Created FROM test_table 
```

**但是**您必须为此字段使用 CONVERT ：

```
SELECT CONVERT(varchar(24),Created) as Created FROM test_table 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-12T23:01:41.993

```
$Date = $row['Received_date']->format('d/m/Y'); 
```

然后它从数据库中给定的日期对象

# c# - 自定义 AuthenticationType 和 Elmah (C#)

> ID：10209946
> 
> 赞同：1
> 
> 时间：2012-04-18T13:02:59.637
> 
> 标签：c#, authentication, elmah

我试图限制对我的 elmax.axd 页面的访问。

该站点不使用常规的 ASP.NET 身份验证，而是使用自定义身份验证。

我想知道我怎样才能让这些一起玩。

我尝试将其添加到我的`web.config`

![在此处输入图像描述](../Images/725b654d70fbc035fce39a0b861cd66d.png)

但我只得到一个`401 - Unauthorized: Access is denied due to invalid credentials.`错误。

我知道我已登录系统： ![在此处输入图像描述](../Images/0612063df11fe96d74e49268531a0002.png)

谁能指出我正确的方向？

# javascript - 有没有办法从 Firefox 扩展中创建整个屏幕的屏幕截图？

> ID：10209947
> 
> 赞同：3
> 
> 时间：2012-04-18T13:03:08.290
> 
> 标签：javascript, firefox-addon, screenshot

我目前正在使用画布使用 JavaScript 创建屏幕截图并将它们编码为 base64。

但是，我目前的截图只包括实际的网页，没有其他内容（没有地址栏等），我想知道是否可以实现全屏截图（任务栏和整个浏览器窗口，等）以编程方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:01:54.713

Firefox 没有此功能。[您可以做的最好的事情是通过js-ctypes](https://developer.mozilla.org/en/js-ctypes)使用操作系统功能。然而，这并不简单。无论如何，我需要 Windows API 的这段代码，所以它来了。首先，您需要设置库、函数和数据类型：

```
Components.utils.import("resource://gre/modules/ctypes.jsm");

var userlib = ctypes.open("user32");
var gdilib = ctypes.open("gdi32");

var HWND = ctypes.voidptr_t;
var HGDIOBJ = ctypes.voidptr_t;
var HDC = HGDIOBJ;
var HBITMAP = HGDIOBJ;
var LPCTSTR = ctypes.unsigned_char.ptr;
var WORD = ctypes.uint16_t;
var DWORD = ctypes.uint32_t;

var SRCCOPY = 0xCC0020;

var BITMAPCOREHEADER = ctypes.StructType("BITMAPCOREHEADER", [
  {bcSize: DWORD},
  {bcWidth: WORD},
  {bcHeight: WORD},
  {bcPlanes: WORD},
  {bcBitCount: WORD}
]);

var GetDC = userlib.declare(
  "GetDC", ctypes.winapi_abi,
  HDC,
  HWND
);

var ReleaseDC = userlib.declare(
  "ReleaseDC", ctypes.winapi_abi,
  ctypes.int,
  HWND, HDC
);

var CreateCompatibleDC = gdilib.declare(
  "CreateCompatibleDC", ctypes.winapi_abi,
  HDC,
  HDC
);

var CreateCompatibleBitmap = gdilib.declare(
  "CreateCompatibleBitmap", ctypes.winapi_abi,
  HBITMAP,
  HDC, ctypes.int, ctypes.int
);

var DeleteObject = gdilib.declare(
  "DeleteObject", ctypes.winapi_abi,
  ctypes.bool,
  HGDIOBJ
);

var SelectObject = gdilib.declare(
  "SelectObject", ctypes.winapi_abi,
  HGDIOBJ,
  HDC, HGDIOBJ
);

var BitBlt = gdilib.declare(
  "BitBlt", ctypes.winapi_abi,
  ctypes.bool,
  HDC, ctypes.int, ctypes.int, ctypes.int, ctypes.int,
  HDC, ctypes.int, ctypes.int, DWORD
);

var GetDIBits = gdilib.declare(
  "GetDIBits", ctypes.winapi_abi,
  ctypes.int,
  HDC, HBITMAP, ctypes.unsigned_int, ctypes.unsigned_int,
  ctypes.unsigned_char.ptr, BITMAPCOREHEADER.ptr, ctypes.unsigned_int
); 
```

现在有趣的部分：

```
// The screen part we want to copy
var x = 0;
var y = 0;
var width = screen.width;
var height = screen.height;

// Create a bitmap/device context for the data
var screenDC = GetDC(null);
var dc = CreateCompatibleDC(screenDC);
var bitmap = CreateCompatibleBitmap(screenDC, width, height);

// Copy screen contents to bitmap
SelectObject(dc, bitmap);
BitBlt(dc, 0, 0, width, height, screenDC, x, y, SRCCOPY);

// Extract bitmap data
var bitmapHeader = new BITMAPCOREHEADER();
bitmapHeader.bcSize = BITMAPCOREHEADER.size;
bitmapHeader.bcWidth = width;
bitmapHeader.bcHeight = height;
bitmapHeader.bcPlanes = 1;
bitmapHeader.bcBitCount = 32;

var dataSize = width * height * 4;
var buffer = new ctypes.ArrayType(ctypes.unsigned_char, dataSize)();
GetDIBits(dc, bitmap, 0, height, buffer, bitmapHeader.address(), 0);

// Clean up
ReleaseDC(null, screenDC);
DeleteObject(dc);
DeleteObject(bitmap);

userlib.close();
gdilib.close();

// Draw data to the canvas
var canvas = document.getElementById("canvas");
canvas.setAttribute("width", width);
canvas.setAttribute("height", height);

var context = canvas.getContext("2d");
var imageData = context.createImageData(width, height);
for (var i = 0; i < height; i++)
{
  // Windows bitmaps are stored bottom-to-top, they are also using BGR0
  // byte order instead of RGBA. The data needs to be corrected here.
  var offset1 = i * width * 4;
  var offset2 = (height - 1 - i) * width * 4;
  for (var j = 0; j < width; j++)
  {
    imageData.data[offset1 + j * 4 + 0] = buffer[offset2 + j * 4 + 2];
    imageData.data[offset1 + j * 4 + 1] = buffer[offset2 + j * 4 + 1];
    imageData.data[offset1 + j * 4 + 2] = buffer[offset2 + j * 4 + 0];
    imageData.data[offset1 + j * 4 + 3] = 255;
  }
}
context.putImageData(imageData, 0, 0); 
```

对于其他操作系统，您当然需要完全不同的代码。另一种方法是用你的扩展打包一个专门的 DLL 并通过 js-ctypes 使用它——这将允许用 C++ 编写相同的东西，这会稍微简单一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:28:07.177

否 - 如评论所述的安全性。

您唯一能做的就是从文档信息（如 location.href）中获取您需要/可以获取的内容。将其作为可见信息添加到底部/顶部 => grap => 再次隐藏（如果用户应该继续工作）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-12T09:34:47.317

**首先按下`shift+F2`** 它打开Firefox控制台..给出命令`screenshot --fullpage`并按Enter（对于整页）

`screenshot`（仅适用于可见部分）

您也可以通过转到**工具-> Web 开发人员-> 开发人员工具栏来执行此操作**

值得一试..最好没有扩展

# java - Java 常量池的目的是什么？

> ID：10209952
> 
> 赞同：78
> 
> 时间：2012-04-18T13:03:21.763
> 
> 标签：java, vm-implementation, class-constants

我目前正在尝试更深入地研究 Java 虚拟机的规范。我一直[在在线阅读 Inside the JVM book](http://www.artima.com/insidejvm/ed2/index.html)，其中有一个我似乎无法理解的令人困惑的抽象：常量池。这是本书的摘录：

> 对于它加载的每种类型，Java 虚拟机都必须存储一个常量池。常量池是类型使用的一组有序常量，包括文字（字符串、整数和浮点常量）和对类型、字段和方法的符号引用。常量池中的条目由索引引用，很像数组的元素。因为它持有对一个类型使用的所有类型、字段和方法的符号引用，所以常量池在 Java 程序的动态链接中起着核心作用

总的来说，我对上述和 CP 有几个问题：

1.  CP 是否位于`.class`每种类型的文件中？
2.  作者所说的“符号引用”是什么意思？
3.  用简单的英语来说，常量池的目的是什么？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-18T13:25:33.640

常量池是`.class`文件（及其内存表示）的一部分，其中包含运行该类代码所需的常量。

这些常量包括程序员指定的文字和编译器生成的符号引用。符号引用基本上是从代码中引用的类、方法和字段的名称。JVM 使用这些引用将您的代码链接到它所依赖的其他类。

例如下面的代码

```
System.out.println("Hello, world!"); 
```

产生以下字节码（`javap`输出）

```
0:   getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;              
3:   ldc     #3; //String Hello, world!                                                  
5:   invokevirtual   #4; //Method java/io/PrintStream.println:(Ljava/lang/String;)V 
```

`#n`这里是对常量池的引用。`#2`是对`System.out`字段的符号引用，`#3`是`Hello, world!`字符串并且`#4`是对`PrintStream.println(String)`方法的符号引用。

如您所见，符号引用不仅仅是名称 - 例如，对方法的符号引用还包含有关其参数 ( `Ljava/lang/String;`) 和返回类型 ( `V`means `void`) 的信息。

您可以通过为该类运行来检查该类的常量池`javap -verbose`。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-12-03T17:24:19.280

我认为了解如何使用图表构建框架会有所帮助。

![在此处输入图像描述](../Images/fbb4bf9708be8893695e55a986d184e9.png)

帧是操作数（操作指令）所在的位置，也是动态链接发生的位置。可以说，这是一种速记方式，使用常量池来跟踪类及其成员。

每个帧都包含对运行时常量池的引用。引用指向为该帧执行的方法的类的常量池。此参考有助于支持动态链接。

C/C++ 代码通常被编译为一个目标文件，然后将多个目标文件链接在一起以产生一个可用的工件，例如可执行文件或 dll。在链接阶段，每个目标文件中的符号引用被替换为相对于最终可执行文件的实际内存地址。在 Java 中，这个链接阶段是在运行时动态完成的。

编译 Java 文件时，对变量和方法的所有引用都作为符号引用存储在类的常量池中。符号引用是逻辑引用，而不是实际指向物理内存位置的引用。

这是[James Blooms JVM Internals](http://blog.jamesdbloom.com/JVMInternals.html)的链接，了解更多详细信息。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-18T13:15:23.420

> 用简单的英语来说，常量池的目的是什么？

CP 是一个非常独特的存储区域，用于存储常量值以减少冗余：

```
System.err.println("Hello");
System.out.println("Hello"); 
```

在 CP 中只有一个 String 对象“Hello”，编译器在两行中都替换为同一个引用。您的 .class 文件仅包含一个 Hello 字符串。（其他类型相同）。

> CP 是否位于每种类型的 .Class 文件中？

是的，看这里：[http ://en.wikipedia.org/wiki/Java_class_file](http://en.wikipedia.org/wiki/Java_class_file)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-01T13:01:37.443

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-05T08:53:26.500

它可能被解释为浏览器的浏览历史，减少每次查找或构建的需要

# regex - 正则表达式允许空字符串或具有特定长度的字符串

> ID：10209956
> 
> 赞同：3
> 
> 时间：2012-04-18T13:03:32.317
> 
> 标签：regex

嗨，我在尝试创建一个正则表达式时遇到问题，该表达式将允许我将该字段为空或长度为 9 的字符串（如果已填充）。

当前使用的正则表达式是：`^[0-9]{9}`

如果该字段是必填的，则该字段有效，但是我们有一个新要求，即该字段也可以为空。我试过`^[0-9]{0|9`} 但显然这不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T13:05:14.783

```
^(|[0-9]{9})$ 
```

应该做的伎俩。

**编辑：**但是说真的；执行@Felix Kling 在评论中建议的操作：通过`.length`属性`.equals("")`等测试字符串。

# ios - 在动画IOS中动态更改图像

> ID：10209957
> 
> 赞同：1
> 
> 时间：2012-04-18T13:03:34.020
> 
> 标签：ios, animation

我需要为图像设置动画。我有大量图像，这需要作为视频播放。在播放之间有时我需要更改一些图像，因为它们将在服务器上更新。所以播放应该会自动更新这个新图像。

我尝试过使用 UIImageView。在那里我们无法控制动画。然后我尝试 CAKeyframeAnimation 为 values 属性提供图像数组。我可以播放和暂停动画。但在这里我也不能在播放时动态更改图像。

谁能帮我解决这个问题。

谢谢米娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:12:45.360

UIImageView 上的动画系统非常有限。我建议您使用 2 图像视图进行自己的实现。

您将更改一个图像视图中的图像并使用淡入和淡出`UIView animateWithDuration`

我给你写了一个方法。请注意：我没有测试过。

它假设您将框架放在一个名为“frames”的数组中，并且将两个框架`UIIMageView`放在一起，称为“imgv1”和“imgv2”

```
-(void)performAnimationOfFrameAtIndex:(NSNumber*)indexNum
{        
    int index = [indexNum intValue];
    if(index >= frames.count)
    {
        return;
    }
    UIImage *img = [frames objectAtIndex:index];

    UIImageView *imgIn;
    UIImageView *imgOut;
    if(index % 2 == 0)
    {
        imgIn = imgv1;
        imgOut = imgv2;
    }
    else {
        imgIn = imgv2;
        imgOut = imgv1;
    }
    imgIn.image = img;
    [self.view sendSubviewToBack:imgIn];

    [UIView animateWithDuration:0.1 animations:^{
        imgIn.alpha = 1;
        imgOut.alpha = 0;
    } completion:^(BOOL finished) {
        [self performSelectorOnMainThread:@selector(performAnimationOfFrameAtIndex:) withObject:[NSNumber numberWithInt:index+1] waitUntilDone:NO];
    }];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:35:48.647

使用两个`UIImageViews`并交换它们。

如果您对“动画”有弱引用`UIView`，请务必检查动画是否已在完成块中完成。否则，当您导航到另一个视图时，您可能会遇到性能问题，对动画方法的递归调用将继续！

```
- (void)animateImagesAtIndex:(NSNumber *)imageIdx {
    // Do something here
    [UIView animateWithDuration:1 animations:^{
        // Do swap
    }
    completion:^(BOOL finished) {
        if (finished) {
            [self animateImagesAtIndex:imageIdx];
        }
    }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T17:12:23.897

UIImageView 支持一系列图像的动画。您只需使用图像数组设置属性动画图像，并调用方法 startAnimating 和 stopAnimating。

# java - gson.toJson() 抛出 StackOverflowError

> ID：10209959
> 
> 赞同：97
> 
> 时间：2012-04-18T13:03:40.870
> 
> 标签：java, json, object, gson, stack-overflow

我想从我的对象生成一个 JSON 字符串：

```
Gson gson = new Gson();
String json = gson.toJson(item); 
```

每次我尝试这样做时，都会收到此错误：

```
14:46:40,236 ERROR [[BomItemToJSON]] Servlet.service() for servlet BomItemToJSON threw exception
java.lang.StackOverflowError
    at com.google.gson.stream.JsonWriter.string(JsonWriter.java:473)
    at com.google.gson.stream.JsonWriter.writeDeferredName(JsonWriter.java:347)
    at com.google.gson.stream.JsonWriter.value(JsonWriter.java:440)
    at com.google.gson.internal.bind.TypeAdapters$7.write(TypeAdapters.java:235)
    at com.google.gson.internal.bind.TypeAdapters$7.write(TypeAdapters.java:220)
    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:200)
    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:96)
    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:60)
    at com.google.gson.Gson$FutureTypeAdapter.write(Gson.java:843) 
```

这些是我的**BomItem**类的属性：

```
private int itemId;
private Collection<BomModule> modules;
private boolean deprecated;
private String partNumber;
private String description; //LOB
private int quantity;
private String unitPriceDollar;
private String unitPriceEuro;
private String discount; 
private String totalDollar;
private String totalEuro;
private String itemClass;
private String itemType;
private String vendor;
private Calendar listPriceDate;
private String unitWeight;
private String unitAveragePower;
private String unitMaxHeatDissipation;
private String unitRackSpace; 
```

我引用的**BomModule**类的属性：

```
private int moduleId;
private String moduleName;
private boolean isRootModule;
private Collection<BomModule> parentModules;
private Collection<BomModule> subModules;
private Collection<BomItem> items;
private int quantity; 
```

知道是什么导致了这个错误吗？我该如何解决？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-18T13:05:05.580

那个问题是你有一个循环引用。

在`BomModule`您参考的课程中：

```
private Collection<BomModule> parentModules;
private Collection<BomModule> subModules; 
```

`BomModule`显然，GSON 根本不喜欢对 的自我引用。

一种解决方法是设置模块`null`以避免递归循环。这样我可以避免 StackOverFlow-Exception。

```
item.setModules(null); 
```

或者使用关键字标记您**不想在序列化 json 中显示的字段，例如：**`transient`

```
private transient Collection<BomModule> parentModules;
private transient Collection<BomModule> subModules; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-28T22:02:16.700

当我将 Log4J 记录器作为类属性时，我遇到了这个问题，例如：

```
private Logger logger = Logger.getLogger(Foo.class); 
```

这可以通过制作记录器`static`或简单地将其移动到实际函数中来解决。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-09-23T22:36:20.160

如果您正在使用 Realm 并且遇到此错误，并且出现问题的对象扩展了 RealmObject，请不要忘记`realm.copyFromRealm(myObject)`在传递给 GSON 进行序列化之前创建一个没有所有 Realm 绑定的副本。

我错过了为一堆被复制的对象中的一个做这个......我花了很长时间才意识到堆栈跟踪没有命名对象类/类型。问题是，问题是由循环引用引起的，但它是 RealmObject 基类中某处的循环引用，而不是您自己的子类，这使得它更难被发现！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-07-15T17:11:02.463

正如 SLaks 所说，如果您的对象中有循环引用，则会发生 StackOverflowError。

要修复它，您可以将 TypeAdapter 用于您的对象。

例如，如果您只需要从您的对象生成字符串，您可以像这样使用适配器：

```
class MyTypeAdapter<T> extends TypeAdapter<T> {
    public T read(JsonReader reader) throws IOException {
        return null;
    }

    public void write(JsonWriter writer, T obj) throws IOException {
        if (obj == null) {
            writer.nullValue();
            return;
        }
        writer.value(obj.toString());
    }
} 
```

并像这样注册它：

```
Gson gson = new GsonBuilder()
               .registerTypeAdapter(BomItem.class, new MyTypeAdapter<BomItem>())
               .create(); 
```

或者像这样，如果你有接口并且想为它的所有子类使用适配器：

```
Gson gson = new GsonBuilder()
               .registerTypeHierarchyAdapter(BomItemInterface.class, new MyTypeAdapter<BomItemInterface>())
               .create(); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-12-06T12:58:29.570

我的回答有点晚了，但我认为这个问题还没有很好的解决方案。我最初是[在这里](https://stackoverflow.com/a/43410950/1770778)找到的。

使用 Gson，您可以像这样标记您**希望**包含在 json 中的字段`@Expose`：

```
@Expose
String myString;  // will be serialized as myString 
```

并使用以下命令创建 gson 对象：

```
Gson gson = new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create(); 
```

**您只是不**公开的循环引用。这对我有用！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-22T07:09:39.233

当您的超类中有记录器时，此错误很常见。正如@Zar 之前建议的那样，您可以将**静态**用于您的记录器字段，但这也有效：

```
protected final transient Logger logger = Logger.getLogger(this.getClass()); 
```

PS可能会起作用，并使用@Expose注释在此处检查更多信息：[https ://stackoverflow.com/a/7811253/1766166](https://stackoverflow.com/a/7811253/1766166)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-20T04:21:12.560

我也有同样的问题。就我而言，原因是我的序列化类的构造函数采用上下文变量，如下所示：

```
public MetaInfo(Context context) 
```

当我删除这个参数时，错误就消失了。

```
public MetaInfo() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-23T04:11:02.360

编辑：对不起，这是我的第一个答案。感谢您的建议。

我创建了自己的 Json 转换器

我使用的主要解决方案是为每个对象引用创建一个父对象集。如果子引用指向已存在的父对象，它将被丢弃。然后我结合了一个额外的解决方案，限制参考时间以避免实体之间的双向关系中的不定式循环。

我的描述不太好，希望对大家有所帮助。

这是我对 Java 社区的第一个贡献（解决您的问题）。你可以检查一下；）有一个 README.md 文件 [https://github.com/trannamtrung1st/TSON](https://github.com/trannamtrung1st/TSON)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-31T16:16:59.083

对于 Android 用户，`Bundle`由于自引用`Bundle`导致`StackOverflowError`.

要序列化捆绑包，请[注册一个`BundleTypeAdapterFactory`](https://github.com/google-gson/typeadapters/blob/master/android/src/main/java/BundleTypeAdapterFactory.java).

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-01T20:33:55.167

在 Android 中，gson 堆栈溢出原来是一个 Handler 的声明。将其移至未反序列化的类。

根据 Zar 的建议，当这发生在另一段代码中时，我将处理程序设为静态。使处理程序静态也有效。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-27T04:50:26.917

`BomItem`指`BOMModule`（`Collection<BomModule> modules`），`BOMModule`指`BOMItem`（`Collection<BomItem> items`）。Gson 库不喜欢循环引用。从您的课程中删除此循环依赖项。我过去也遇到过与 gson lib 相同的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-12T17:48:33.397

当我输入时，我遇到了这个问题：

```
Logger logger = Logger.getLogger( this.getClass().getName() ); 
```

在我的对象中......经过一个小时左右的调试后，这非常有意义！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-12T22:49:36.637

避免不必要的变通方法，例如将值设置为 null 或使字段瞬态。正确的做法是使用 @Expose 注释其中一个字段，然后告诉 Gson 仅序列化带有注释的字段：

```
private Collection<BomModule> parentModules;
@Expose
private Collection<BomModule> subModules;

...
Gson gson = new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create(); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-24T05:11:43.677

我有一个类似的问题，该类有一个 InputStream 变量，我真的不必坚持。因此将其更改为瞬态解决了这个问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-03-08T20:58:32.493

经过一段时间与这个问题的斗争，我相信我有一个解决方案。问题在于未解决的双向连接，以及在序列化时如何表示连接。解决该行为的方法是“告诉”`gson`如何序列化对象。为此，我们使用`Adapters`.

通过使用`Adapters`，我们可以知道`gson`如何序列化`Entity`类中的每个属性以及要序列化哪些属性。

设`Foo`和是两个与有关系和有关系的`Bar`实体。我们定义适配器，因此当序列化时，通过从循环引用的角度定义如何序列化是不可能的。`Foo``OneToMany``Bar``Bar``ManyToOne``Foo``Bar``gson``Bar``Foo``Bar`

```
public class BarAdapter implements JsonSerializer<Bar> {
    @Override
    public JsonElement serialize(Bar bar, Type typeOfSrc, JsonSerializationContext context) {
        JsonObject jsonObject = new JsonObject();
        jsonObject.addProperty("id", bar.getId());
        jsonObject.addProperty("name", bar.getName());
        jsonObject.addProperty("foo_id", bar.getFoo().getId());
        return jsonObject;
    }
} 
```

这里`foo_id`用于表示`Foo`将被序列化并导致我们的循环引用问题的实体。现在，当我们使用适配器时，`Foo`将不会再次序列化，`Bar`只会获取其 id 并将其放入`JSON`。现在我们有了`Bar`适配器，我们可以用它来序列化`Foo`. 这是想法：

```
public String getSomething() {
    //getRelevantFoos() is some method that fetches foos from database, and puts them in list
    List<Foo> fooList = getRelevantFoos();

    GsonBuilder gsonBuilder = new GsonBuilder();
    gsonBuilder.registerTypeAdapter(Bar.class, new BarAdapter());
    Gson gson = gsonBuilder.create();

    String jsonResponse = gson.toJson(fooList);
    return jsonResponse;
} 
```

还有一件事要澄清，`foo_id`不是强制性的，可以跳过。此示例中适配器的目的是序列化`Bar`，并通过放置`foo_id`我们显示`Bar`可以触发`ManyToOne`而不会再次`Foo`触发`OneToMany`...

答案基于个人经验，因此请随时发表评论，证明我错了，纠正错误或扩大答案。无论如何，我希望有人会发现这个答案很有用。

# build - 从 Repository() 编译的源代码不会放在 Hierarchical SCons 项目的变体目录中

> ID：10209961
> 
> 赞同：1
> 
> 时间：2012-04-18T13:03:48.827
> 
> 标签：build, scons

我有一个分层项目，它使用来自公共系统目录的源代码，为此我使用 SCons`Repository()`函数并希望将所有构建输出（本地代码和从存储库中获取的代码）放置在 variant_dir 中。

如果我`Repository()`在一个简单的场景中使用该函数（非分层且不调用子目录 SConscripts），那么编译后的 Repository() 对象文件将按预期放置在 variant_dir 中。但是如果我在分层构建中做同样的事情，编译的`Repository()`目标文件会放在项目根目录中。

假设我想使用位于系统目录中的以下源代码：

```
/usr/local/repoDir/repoFile.cc 
```

我有以下项目结构：

```
# tree .
.
|-- SConstruct
|-- build
|   `-- linux_x86_64
`-- moduleA
    |-- localFile.cc
    `-- SConscript 
```

以下是构建脚本：

SConstruct

**编辑：**从对 Repository() 的调用中删除文件名，感谢来自 users@scons.tigris.org 的 Dirk Ba​​echle 指出这一点。

```
env = Environment()

env.Repository('/usr/local/repoDir')

env['variantDir'] = 'build/linux_x86_64'

SConscript('moduleA/SConscript',
           exports = ['env'],
           variant_dir = env['variantDir'],
           duplicate = 0) 
```

模块A/SConscript

```
import os

Import('env')

srcFiles = [
  'localFile.cc',
  #os.path.join(env['variantDir'], 'repoFile.cc'),          # fails to find source file
  #'#%s' % os.path.join(env['variantDir'], 'repoFile.cc'),  # fails to find source file
  #'repoFile.cc',                                           # fails to find source file
  '#repoFile.cc',  # only option that works, but places object in root proj dir
]

env.Append(CPPPATH = ['.', '#'])
env.Program(target = 'myApp', source = srcFiles) 
```

我希望该`repoFile.cc`文件被编译并将其目标文件放置在 中`build/linux_x86_64`，而是将其放置在与根 SConstruct 相同的目录中。

正如您从 中的评论中看到的那样`moduleA/SConscript`，我尝试引用了`repoFile.cc`几种不同的方法，唯一有效的方法就是其中提到的。此外，我尝试在 中调用该`Repository()`函数`moduleA/SConscript`，但它没有改变任何东西。

**编辑**：这是编译输出

```
# scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
g++ -o repoFile.o -c -Ibuild/linux_x86_64 -ImoduleA -I/usr/local/repoDir/moduleA -I/usr/local/repoDir/build/linux_x86_64 -I. -I/usr/local/repoDir /usr/local/repoDir/repoFile.cc
g++ -o build/linux_x86_64/localFile.o -c -Ibuild/linux_x86_64 -ImoduleA -I/usr/local/repoDir/moduleA -I/usr/local/repoDir/build/linux_x86_64 -I. -I/usr/local/repoDir moduleA/localFile.cpp
g++ -o build/linux_x86_64/myApp build/linux_x86_64/localFile.o repoFile.o
scons: done building targets. 
```

结果目录结构：

```
# tree .
.
|-- repoFile.o    <=== This file should be in build/linux_x86_64 NOT here
|-- SConstruct
|-- build
|   `-- linux_x86_64
|       |-- localFile.o
|       `-- myApp
`-- moduleA
    |-- localFile.cpp
    `-- SConscript 
```

我检查了一下，发现了这个，但它并不完全相同：

[Scons Hierarchical Builds with Repository 目录](https://stackoverflow.com/q/4043689/1158895)

关于如何在正确的位置获取目标文件的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:29:06.550

我在 SCons-users 邮件列表上问了同样的问题，并收到了一些部分回答了这个问题的信息。感谢您`Dirk Baechle`帮助我解决这个问题。

该`Repository()`函数有效地将传入的目录*挂载*到 SCons 项目的根目录：即`SConstruct`文件所在的目录。如果需要在 SCons 项目的子目录中引用 repo 子目录中的文件，则子目录名称（repo 目录和 scons 项目目录的名称）必须匹配。这就是为什么上述问题中文件中的不同选项`SConscript`无法找到 repo 文件的原因。

如果 repo 子目录`moduleA`与 file 一起存在`repoFile.cc`，那么它将按预期找到，并且编译后的对象将按预期放置在 variant_dir 中。

我看到该`Repository()`功能的一个限制是您不能将 repo 目录*挂载*到 SCons 项目子目录。这听起来像是一个功能请求。

SCons 将编译后的目标文件放在源目录中的事实对我来说似乎是一个错误。至少，它应该放在 variant_dir 根目录中。

# delphi - Delphi - ADODataSet 子集

> ID：10209964
> 
> 赞同：2
> 
> 时间：2012-04-18T13:04:00.493
> 
> 标签：delphi, datagrid, drop-down-menu, tadodataset

我正在 Delphi 中构建一个表单，它有一个服务下拉列表和一个用于选择服务的附加组件网格。我得到的数据来自 API，我将服务的数据存储在 ADODataSet 中，如下所示：

```
ID (integer)
Name (string)
Description (string)
BasePrice (currency)
AddOns (array of AddOn, not currently stored in the ADODataSet) 
```

我想让网格根据下拉列表中的选择填充插件数据（每个服务都有不同的插件列表）。如何存储 AddOn 信息以便它可以与服务信息相关联？我需要创建第二个 ADODataSet 还是有办法将其存储在与服务相同的 ADODataSet 中？

附加组件具有以下字段：

```
ID (integer)
Name (string)
Description (string)
UnitPrice (currency)
Quantity (integer) 
```

我正在使用 Delphi 2005 并且有 Indy for Delphi。

**编辑**

在挖掘数据集的字段编辑器时，我发现我可以创建一个“数据集”类型的字段。这能让我把两者联系在一起吗？如果是这样，有人可以解释这是如何完成的吗？

我尝试通过创建第二个数据集 (ADODataSetAddOns) 并将新数据集分配给第一个数据集 (ADODataSetServices.AddOns) 中的数据集字段来做到这一点，但收到错误消息“数据集没有匹配的 ADO 数据类型”，我假设是参考 AddOns 字段未找到数据集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:38:47.330

您可以使用 2 个数据集（主-详细信息）来显示服务和插件之间的关系，然后将[`TClientDataset`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DBClient.TClientDataSet)其用作内存数据集，您可以使用`Service Id`,`Addon Id`对作为索引来存储选择，该客户端数据集的结构可以像这样在运行时创建

```
 ClientDataSet1.FieldDefs.Clear;
  ClientDataSet1.FieldDefs.Add('IdService', ftInteger);
  ClientDataSet1.FieldDefs.Add('IdAddon ', ftInteger);
  //add morr fieldd here is you want 
  ClientDataSet1.IndexDefs.Add('Index1','IdService;IdAddon',[ixPrimary, ixUnique]);
  ClientDataSet1.IndexName:='Index1';
  ClientDataSet1.CreateDataSet; 
```

最后，当您需要将用户选择的数据传递给服务时，您可以像任何 TDataset 一样遍历 ClientDataset。

# vba - 在VB6中使用microsoft word11 word12,word14对象库之一

> ID：10209965
> 
> 赞同：0
> 
> 时间：2012-04-18T13:04:09.680
> 
> 标签：vba, vb6, ms-word

我正在开发一个使用 Microsoft office word 的 vb6 应用程序。每个 word11,word12,word14 对象库都可以使我的应用程序正常工作。但是我如何检测安装了哪个版本的 Office，从而检测到哪个版本的“Microsoft Word 对象库”可用，然后加载它？

注意：我不想使用 .net，因为我的许多客户不想安装 .netframework。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:38:26.833

使用后期绑定 ( `... As Object`) 或针对您想要支持的最早版本进行构建。对象库是向后兼容的，COM 处理版本控制，因此您将始终安装最新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T13:32:18.770

一般来说：

*   在调用所有版本可能不支持的任何方法/属性之前，对您计划支持的最低版本 Word 进行编码或进行版本测试

*   您不加载 Word 对象库；您调用 Word 的一个实例并使其自动化。如果有多个版本，Windows 会确定调用哪个版本的 Word；拥有 Word 对象后，您可以查询其版本以进行版本测试。

在我的 PPT FAQ 网站上，有一些关于此的一般信息；相同的代码应该可以在 VB6 中工作，只需稍作改动（如果有的话）。

从 PowerPoint 控制 Office 应用程序（由 Naresh Nichani 和 Brian Reilly 撰写） [http://www.pptfaq.com/FAQ00795_Controlling_Office_Applications_from_PowerPoint_-by_Naresh_Nichani_and_Brian_Reilly-.htm](http://www.pptfaq.com/FAQ00795_Controlling_Office_Applications_from_PowerPoint_-by_Naresh_Nichani_and_Brian_Reilly-.htm)

# macos - 从我的服务器请求 webm 视频时获得“206 部分内容”状态

> ID：10209968
> 
> 赞同：1
> 
> 时间：2012-04-18T13:04:20.840
> 
> 标签：macos, xampp, html5-video

我在我的**MAC上使用****XAMPP**服务器。我创建了一个页面，上面有一个**视频**标签！（我正在使用**video.js**框架）视频文件不播放，当我在**firebug （** **firefox**上的插件）上检查它时，**GET**操作返回该文件**的“206 Partial Content”**状态。

 ******我怎样才能让它工作？感谢您的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T05:08:32.180

longilong 的答案效果很好。我只是想解释一下如何添加我在谷歌搜索之前不知道的 mime 类型。

1-在您的站点目录（您的页面所在的路径）中创建一个名为“.htaccess”的文本文件

> *htaccess 文件只是一个 apache 配置文件，它仅覆盖它所在路径的主要 apache 配置*

2-将这些行添加到新的 .htaccess 文件中：

```
# Audio
AddType audio/ogg                      oga ogg
AddType audio/mp4                      m4a

# Video
AddType video/ogg                      ogv
AddType video/mp4                      mp4 m4v
AddType video/webm                     webm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:05:37.823

据我所知，Firefox 4+ 支持 WebM。如果您的服务器配置不正确，也可能发生此错误。例如，如果未添加 mime 类型。在此处查看此帖子：[在网站上播放电影/DVD。](https://stackoverflow.com/questions/9728977/playing-a-movie-dvd-on-a-website/9736361#9736361)希望对您有所帮助******

# c# - Process.Start 不在现场工作

> ID：10209969
> 
> 赞同：0
> 
> 时间：2012-04-18T13:04:25.397
> 
> 标签：c#, asp.net, process, mailto

每当用户单击向某人发送电子邮件时，我试图在用户接受弹出框中的免责声明后打开电子邮件客户端。它适用于本地，但不适用于现场。

```
public void btnEmail_click(object sender, EventArgs e)
{             
     Process.Start("mailto:blah@blah.com");
} 
```

我现在意识到这显然无法正常工作。有没有办法用javascript做我正在寻找的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:09:47.120

The problem is **probabbly** is that your client doesn't have default *Mail Client* setupped on machine.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:54:58.460

在 JavaScript 中，只需设置 location.href

```
<input type="button" value="Send E-mall" onclick="location.href='mailto:blah@blah.com';"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:07:42.770

您必须注册`mailto`协议处理程序才能像这样开箱即用。

查看[使用 mailto 协议以编程方式注册 Windows 程序，](https://stackoverflow.com/questions/231/register-windows-program-with-the-mailto-protocol-programmatically)了解如何通过代码完成。

## 或者

如果您想打开 Outlook 并向某人发送邮件 -

`Outlook /c ipm.note /m blah@blah.com`

通过代码 -

```
string app = "Outlook.exe";
string arguments = @"/c ipm.note /m blah@blah.com";

Process proc = new Process();
proc.StartInfo = new ProcessStartInfo(app, arguments);
proc.Start(); 
```

# asp.net-mvc-3 - 使用 MVC Razor 在 if/else 中混合文本和函数

> ID：10209973
> 
> 赞同：26
> 
> 时间：2012-04-18T13:04:42.190
> 
> 标签：asp.net-mvc-3, razor

我在局部视图中有以下代码：

```
@if (Request.IsAuthenticated)
{
    Hello, @Html.ActionLink(User.Identity.Name, "ChangePassword", "Account") &#124; Html.ActionLink("Log off", "LogOff", "Account")
}
else
{
    @Html.ActionLink("Log in", "Login", "Account")
} 
```

预期输出（带有适当的操作链接）：

*   如果登录：你好吉姆 | 注销
*   如果未登录：登录

但是，这会导致错误：

*   在 VS 中，单词“Hello”上有一个错误：“Cannot resolve symbol 'Hello'” and “&#” has “Expression expected”
*   在浏览器中，我得到“CS1040：预处理器指令必须作为行上的第一个非空白字符出现”

如果我`<p>...</p>`在以“Hello”开头的行周围加上一个，错误就会消失。

`@Html`我在同一行中混合调用和文本显然存在一些语法错误。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-18T13:06:18.450

代码块 ( `{ ... }`) 的内容应该是代码，而不是标记。

如果您想将文本直接放入代码块中，您有以下三种选择：

*   将其包装在任何 HTML 标记中
*   将其包裹在特殊的 Razor`<text>`标记中，该标记只会呈现没有标记的文本
*   在行前加上`@:`，这是等效的

请参阅[SottGu 的博客文章](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)。

# awk - 使用 awk 消除与字段 1 指定的匹配且在字段 2 的定义值内的记录

> ID：10209974
> 
> 赞同：0
> 
> 时间：2012-04-18T13:04:42.647
> 
> 标签：awk

我有一个问题，我正在尝试使用 awk 来解决。它可用于选择优质的单核苷酸多态性 (SNP) 以放置在 SNP 芯片上，其中要求没有 SNP 在另一个 SNP 的 60bp 内。该文件如下所示：

comp1008_seq1 20
comp1008_seq1 234
comp1008_seq1 260
comp1008_seq1 500
comp3044_seq1 300
comp3044_seq1 350
comp3044_seq1 460
comp3044_seq1 600
......

当它们来自同一组件（基于字段 1）时，我只想打印不在 +-60 范围内（基于字段 2）的记录。因此，当它们来自不同的组件（基于字段 1）时，它们是否在 +-60 范围内并不重要。上面示例中的输出应如下所示：

comp1008_seq1 20
comp1008_seq1 234
comp1008_seq1 500
comp3044_seq1 300
comp3044_seq1 460
comp3044_seq1 600

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:27:14.180

[http://ideone.com/h6oEI](http://ideone.com/h6oEI)

```
{
        if ($1 != last1 || abs($2-last2) > 60 ) print   
        last1 = $1; last2 = $2
}

function abs(x){
        return x > 0 ? x : -x
} 
```

# eclipse - 为 Android 升级 Eclipse - 遇到问题

> ID：10209975
> 
> 赞同：0
> 
> 时间：2012-04-18T13:04:48.670
> 
> 标签：eclipse

我将 Android 软件更新到了最新最好的版本，它告诉我需要将 Eclipse 更新到 Helios 或更新版本。所以，我升级到 Indigo，现在我在 eclipse 启动时收到以下消息，无法继续升级和恢复工作......

[![日食开始问题](../Images/266664c90bbb076d152757fe76cfb116.png)](https://i.stack.imgur.com/PwAC4.png)
[（来源：[pelepublications.com](http://pelepublications.com/eclipse_issue.png)）]

我担心将 eclipse 移动到另一个文件夹 b/c 我不太了解 eclipse 首选项以及它是否会给我带来问题（需要更新假定默认位置的首选项）以及是否需要在 Java/IDE 文件夹中。（我也怀疑这不应该是问题。）

我尝试创建一个包含以下内容的批处理文件来传递他们推荐的参数，并且它不会改变错误。

```
"C:\Program Files\Java\IDE\eclipse\eclipse.exe" -vmargs -Dosgi.locking=none 
```

我还尝试更改现在具有以下内容的 eclipse.ini 文件夹 - 请注意最后一行（这也没有帮助）

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Xms40m
-Xmx384m
-Dosgi.locking=none 
```

有谁知道我做错了什么/我该如何解决这个问题？我得回去工作了...

我在 Windows 7 上运行 Eclipse

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:35:40.733

我认为 Windows 7 不允许应用程序写入 Program Files 文件夹，除非您以管理员身份运行；我相信这就是您看到此消息的原因 - Eclipse 无法在您安装它的位置创建锁定文件。

Eclipse 不在乎它“安装”在哪里（实际上它只是解压缩）；它不会将任何东西放在您的 Windows 注册表或类似的东西中，因此您可以随意移动它。您的工作区和项目是存储重要内容的地方。

# iphone - 如何在 iOS 上的 AVPlayer 或 MPMoviePlayerController 中选择音频通道？

> ID：10209980
> 
> 赞同：4
> 
> 时间：2012-04-18T13:05:06.203
> 
> 标签：iphone, ios, ipad

我正在使用 AVPlayer 或 MPMoviePlayerController 在 iOS 上播放视频文件。如何在播放过程中切换音频通道？

我查看了 API 文档，但找不到任何有关音频通道切换的信息（例如，仅启用左音频通道）。

如果您能给我一些帮助，请不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:52:23.800

AudioMixer示例应用程序[有](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html)帮助吗？

# ruby-on-rails-3 - 具有自定义属性的延迟作业

> ID：10209986
> 
> 赞同：3
> 
> 时间：2012-04-18T13:05:23.533
> 
> 标签：ruby-on-rails-3, delayed-job

我正在使用带有 ActiveRecord 和 Rails 3.2.3 的延迟作业 3.0.2。我有一个使用 has_secure_password 混合的用户模型，因此密码仅以加密方式存储。现在我想使用延迟作业发送欢迎电子邮件，其中应包含未加密密码的副本。

创建记录时，明文密码在 User#password 中。但是延迟的工作似乎只序列化/反序列化记录的 id 并通过执行 User.find(X) 创建模型的新实例。这样我的纯文本密码就丢失了，用户在他的电子邮件中得到一个空密码。

我如何告诉延迟作业也序列化/反序列化自定义“虚拟”属性，否则这些属性不会存储在数据库中？

这是我用于延迟作业 2.x 的猴子补丁，效果很好。

```
class ActiveRecord::Base
  def self.yaml_new(klass, tag, val)
    klass.find(val['attributes']['id']).tap do |m|
      val.except("attributes").each_pair{ |k, v| m.send("#{k}=", v) }
    end
  rescue ActiveRecord::RecordNotFound
    raise Delayed::DeserializationError
  end
end 
```

它不适用于延迟作业 3.x。我对修复我的猴子补丁也不是很感兴趣，因为我*希望*有一个*适当的解决方案*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:13:49.163

在延迟作业 3.x 中，最好的方法是覆盖 ActiveRecord 类上的一些方法，然后强制 Psych YAML 反序列化器从序列化数据中加载 ActiveRecord 对象。默认情况下，延迟作业仅使用反序列化的 id，然后从数据库加载 ActiveRecord 对象。因此，假设我有一个名为 ShipmentImport 的 ActiveRecord 类，并且我想要一个名为“user_id”的 attr_accessor 来处理延迟的作业序列化/反序列化。这就是我要做的。

在 ShipmentImport ActiveRecord 类中，添加以下内容：

```
def encode_with(coder)
  super
  coder['user_id'] = @user_id
end

def init_with(coder)
 super
  @user_id = coder['user_id']
  self
end 
```

在您的应用程序的初始化程序中，为您的 ActiveRecord 类添加以下内容：

```
Psych.load_tags[['!ruby/ActiveRecord', ShipmentImport.name].join(':')] = ShipmentImport 
```

# php - Flex 命令问题

> ID：10209987
> 
> 赞同：0
> 
> 时间：2012-04-18T13:05:23.673
> 
> 标签：php, linux, apache-flex

我在将 .css 文件转换为 .swf 时遇到问题，如果我通过 shell 运行 flex commad 它可以正常工作，但不幸的是通过 php 无法正常工作。

```
<?php
    $tm = time();
    $file_n = $_FILES["file"]["name"];
    $path = "";
    if ($_FILES["file"]["type"] == "text/css") {
        if ($_FILES["file"]["error"] > 0) {
            return "Error has occured: " . $_FILES["file"]["error"] . "<br />";
        }
        else
        {
            if (file_exists("upload/" . $_FILES["file"]["name"])) {
                move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $tm . "_" . $file_n);
                $path = "upload/" . $tm . "_" . $file_n;
            }
            else
            {
                move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]);
                $path = "upload/" . $file_n;
            }
        }

        $paths = explode(".", $path);
        exec("mxmlc ".$file_n);
        $parr = array('path' => $paths[0].".swf");
        $jurl = json_encode($parr);
        echo $jurl;
    }
    else
    {
        echo "Sorry not supported file type!";
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:30:50.117

这是正确的答案，因为它适用于我的情况：我使用了**shell_exec**而不是**exec**并将路径添加到命令

```
<?php
require_once("md5prefix.php");
$file_n = $_FILES["file"]["name"];
$tm = generatePassword(8);
$path = "";
if ($_FILES["file"]["type"] == "text/css") {
    if ($_FILES["file"]["error"] > 0) {
        return "Error has occured: " . $_FILES["file"]["error"] . "<br />";
    }
    else
    {
        if (file_exists("upload/" . $_FILES["file"]["name"])) {
            move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $tm . "_" . $file_n);
            $path = "upload/" . $tm . "_" . $file_n;
        }
        else
        {
            move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]);
            $path = "upload/" . $file_n;
        }
    }
    $paths = explode(".", $path);
    $output = shell_exec('/home/flexer/flex_sdk_4.6/bin/mxmlc ' . $path); 
    $parr = array('path' => $paths[0].".swf");
    $jurl = json_encode($parr);
    echo $jurl;
}
else
{
    echo "Sorry not supported file type!";
}
?> 
```

# tomcat - 为什么在 Tomcat 工作时输入流被锁定？

> ID：10209994
> 
> 赞同：0
> 
> 时间：2012-04-18T13:05:49.087
> 
> 标签：tomcat, servlets

我有一个带有几个 servlet 的 Tomcat 应用程序。该应用程序运行嵌入式 Java Applet 和 GWT 网页。

问题是我从 Tomcat 获取一些数据的 POST 请求被阻止，而另一个 servlet 请求（不同的 servlet）正在处理另一个请求。

这是我获取数据的小程序代码：

```
Integer code =  new Integer(FETCH_IMAGE); 
Serializable objs[] =  { code, username, id.getID(), id.getSeriesID(), id.getStudyID()   };
//URLConnection con =  postObjects(servletUrl, objs);
System.out.println("---->POST image request start...");
URLConnection con =  servletHttpConnection.postObjects(objs);
System.out.println("---->POST image request end...");
System.out.println("---->ObjectInputStream start...");
ObjectInputStream in = new ObjectInputStream( con.getInputStream());
System.out.println("---->ObjectInputStream end...");

//Read the value as an Object
System.out.println("---->Read stream for image start...");
Object obj = in.readObject();
System.out.println("---->Read stream for image end..."); 
```

我的 Tomcat 实例正在执行一些 I/O，同时我的小程序执行上面的代码以尝试获取一些数据。我还在“doPost”方法的开头转储了一个日志，直到请求 #1 结束它才到达那里。我的小程序在以下位置被阻止：

```
ObjectInputStream in = new ObjectInputStream( con.getInputStream()); 
```

我可以围绕这个问题进行设计吗？或者为什么它被阻塞在那里，为什么 Tomcat 在 #1 工作时无法响应我的请求 #2？

# cakephp - 虚拟字段作为其他模型字段的别名 - SQL：未知列错误

> ID：10209999
> 
> 赞同：0
> 
> 时间：2012-04-18T13:06:07.597
> 
> 标签：cakephp, cakephp-1.3, cakephp-model

我是现有 Cake 项目的新手，我们试图在模型中使用 virtualField 来为另一个模型字段设置别名。在上下文中：

```
class Product extends AppModel {

    var $name = 'Product';
    var $hasOne = array('ProductPrice');

    var $virtualFields = array(
        'price' => 'ProductPrice.current_price'
    );

    // Typical fields in the database for Product.  id, name, etc.
}

class ProductPrice extends AppModel {
    var $name = 'ProductPrice';
    var $belongsTo = array('Product');

    //  Fields are product_id, current_price
} 
```

ProductPrice 模型用于数据库中的一个视图，该视图包含不同的价格层，其 current_price 列允许检索产品的当前价格。通过以下方式访问 Product 模型时：

```
$this->Product->find('all' ....); 
```

我在获取价格字段方面没有任何问题。问题是，如果对 Product 的查询是通过类似的方式间接完成的

```
$this->Inventory->find('all'); 
```

我们得到：
`SQL Error: 1054: Unknown column 'ProductPrice.current_price' in 'field list' [CORE/cake/libs/model/datasources`/dbo_source.php，第 681 行]

我知道问题在于 Inventory 查询生成的 SQL 不会尝试加入 ProductPrice 视图。我假设这会通过 Product 模型自动发生，因为它知道它是“hasOne”ProductPrice。

我尝试将 Inventory 模型上的“递归”设置为 2,1 等，但没有成功。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:32:01.293

**TLDR：**

您不能在[VirtualField](http://book.cakephp.org/1.3/en/view/1608/Virtual-fields)中使用来自不同模型的字段。

* * *

**其他选项：**

如果您正在执行以下查询：

```
$this->Inventory->find('all'); 
```

您可以使用 CakePHP 的[Containable 行为](http://book.cakephp.org/1.3/en/view/1323/Containable)之类的东西来确保获得所需的数据：

```
//controller code
$inv = $this->Inventory->getInventory();

//model code
class Inventory extends AppModel {

    public $actsAs = array('Containable');

    public function getInventory() {
        return $this->find('all', array(
            'contain' => array(
                'Product' => array(
                    'ProductPrice'
                )
            )
        ));
    }
} 
```

在上面的代码示例中使用 containsable 应该以如下格式返回**数据**：

```
[0] => Array
    (
        [Inventory] => Array
            (
                [id] => 12345
            )
        [Product] => Array
            (
                [0] => Array
                    (
                        [id] => 54321
                        [title] => product A
                    )
                [ProductPrice] => Array
                (
                    [id] => 6789
                    [current_price] => 24.99
                )
            )
//... 
```

当您获得这样的数据时，应该很容易访问产品的当前价格。

您也可以只在控制器中执行此操作，但最好将您的查询保留在模型中以保持在“胖模型，瘦控制器”的口头禅中。如果你真的想把它保存在你的控制器中，你可以这样做：

```
$inv = $this->find('all', array(
    'contain' => array(
        'Product' => array(
            'ProductPrice'
        )
    )
); 
```

（但是 - 您仍然必须指定模型 $actsAs Containable （根据第一个代码示例）。