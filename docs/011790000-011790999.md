# StackOverflow 问答 11790000-11790999

# c# - 将 DataRow 附加到从 DataAdapter 填充的 DataTable 中，清除所有记录

> ID：11790007
> 
> 赞同：1
> 
> 时间：2012-08-03T05:49:59.493
> 
> 标签：c#, sql, database, datagridview, datatable

我有`DataGridView`一个绑定到它的，从带有.NET 数据提供程序库`DataTable`的数据库中填充。`PostgreSQL``Npgsql`

填充记录有效，但是当我只想将单个记录附加到已经存在`DataTable`时，以前的记录就会消失：

```
NpgsqlDataAdapter npDataAdapterSingle = new NpgsqlDataAdapter("SELECT * from \"Weight\" ORDER BY id DESC LIMIT 1", this.npConnection);
DataTable tmpTable = new DataTable("tmpTable");
npDataAdapterSingle.Fill(tmpTable);

DSWeight.WeightRow row = this.dSWeight.Weight.NewWeightRow();
row.ItemArray = tmpTable.Rows[0].ItemArray;
this.dSWeight.Weight.Rows.InsertAt(row, 0); //Prepend, but i also tried this.dsWeight.Weight.Rows.Add(row); 
```

如果我选择所有记录，没有`LIMIT`'ing，那么它会按预期工作。但我想——如果我已经有了这些记录，为什么还要重新查询数据库？这就是我想要的原因`LIMIT`。

也许还有另一种解决方案，因为我手动将新记录添加到数据库并查询它们以将它们添加到数据表，而不是它应该的方式：将新记录添加到数据表并将它们添加到数据库。我这样做是因为我希望数据库管理 id 和时间戳字段并让 datagridview 填充这些字段。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:42:02.870

我不确定 DSWeight.WeightRow 的数据类型和“this”对象的范围，因为我只能看到部分代码而不是完整的方法。这可能对你有用。请试一试。

```
NpgsqlDataAdapter npDataAdapterSingle = new NpgsqlDataAdapter("SELECT * from \"Weight\" ORDER BY id DESC LIMIT 1", this.npConnection);
DataTable tmpTable = new DataTable("tmpTable");
npDataAdapterSingle.Fill(tmpTable);

row =  tmpTable.NewRow();

foreach (DataColumn col in tmpTable.Columns)
   row[col.ColumnName] = tmpTable.Rows[0][col.ColumnName];

tmpTable.Rows.Add(row, 0); 
```

# c++ - 在单独分配的堆栈上运行函数

> ID：11790008
> 
> 赞同：0
> 
> 时间：2012-08-03T05:50:00.053
> 
> 标签：c++, assembly, x86, stack

我正在尝试在单独分配的堆栈上运行一个函数。

我想保留堆栈以供以后使用，以便我可以恢复它并恢复该功能。

以下代码编译并运行，但屏幕上没有任何内容。

```
#include <cstdlib>
#include <csetjmp>
#include <iostream>
using namespace std;

unsigned char stack[65535];
unsigned char *base_ptr = stack + 65535 - 1;

unsigned char *old_stack;
unsigned char *old_base;

void function()
{
    cout << "hello world" << endl;
}

int main()
{
    __asm
    {
        mov old_base, ebp
        mov old_stack, esp

        mov ebp, base_ptr
        mov esp, base_ptr

        call function

        mov ebp, old_base
        mov esp, old_stack
    }
} 
```

使用vs2012/win8/intel Q9650

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:46:33.260

欢迎使用 C++ 和名称修饰。C++ 中的函数名称被编译器修改（这样使用 gcc 函数对我来说变成了 _Z8functionv）。这是为了方便函数重载。编译器会跟踪它在后台赋予不同函数的实际名称，因此您不会意识到这一点。对于任何其他尝试与 C++ 交互的语言来说，这都是一个问题。

此代码不会链接到我的计算机上。

解决方案：1）用g++编译并传递-S标志（所以g++ -S test.cpp）。然后看一下汇编输出（cat test.s），看看调用了什么函数。然后将“调用函数”中的名称更改为“调用_Z8functionv”（对我来说 - 它对你来说很容易不同）。2）使用 C：将 cout << 更改为 printf 语句，以上应该可以工作。

我认为你没有使用 gcc（因为汇编器是从前到后的气体 - 我不得不切换汇编器上的所有操作数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:18:38.303

根据 Intel 的 x86 文档`MOV`，第 3-403 页，您应该`SS`在加载新`ESP`值之前立即加载寄存器。这会阻止任何中断运行，直到`ESP`被分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:17:53.470

实际上，我认为您的代码没有任何问题。您的样本按原样编译、链接并按预期运行。

也许您的控制台设置有问题，或者一些全局 STL/CRT 初始化或其他问题。无论如何，您可以在您的内部放置一个断点`function`以确保您到达那里。

# android - Android 上的增强现实动画模型

> ID：11790012
> 
> 赞同：2
> 
> 时间：2012-08-03T05:50:19.387
> 
> 标签：android, augmented-reality, artoolkit

我需要在 .obj 中的模型上应用一些动画。目前我正在使用 Vuforia SDK 和 Artoolkit，但似乎它们都没有任何示例显示这一点。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:15:12.237

据我所知 .obj 不支持绑定和骨骼动画。您可以为每个动画帧使用不同的 .obj 模型。另请参阅此问题：[Wavefront .obj 文件是否支持动画？](https://stackoverflow.com/questions/757145/do-wavefront-obj-files-support-animation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T06:04:59.717

.obj 模型不支持动画，但您可以使用具有动画且非常轻的 md2 模型。[在这里](https://stackoverflow.com/a/12158889/1206201)查看我的 ans以使用 Qcar 执行此操作。

# html - Flash 视频下载器如何工作？

> ID：11790016
> 
> 赞同：0
> 
> 时间：2012-08-03T05:50:35.617
> 
> 标签：html, video-streaming, drm, flash-video

考虑以下来自 Vimeo - 流行视频托管网站的视频[的嵌入代码：](http://pragmaticstudio.com/screencasts/rubymotion)

```
<iframe src="http://player.vimeo.com/video/41321504?title=0&amp;byline=0&amp;portrait=0&amp;color=c8c8c8" width="400" height="300" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

视频嵌入 url( `http://player.vimeo.com/video/41321504`) 确实打开，如果直接在新的浏览器窗口中打开，但不包含 html 源代码中任何位置的视频位置，从而阻止下载，我猜这是 flash DRM 的一个功能。但是随后，[第三方网站](http://savevideo.me/)进入并能够将直接网址提供给同一视频

```
http://av.vimeo.com/42007/964/95995392.mp4?aksessionid=96d0b8ffbb4c0c04b1c6b7f1562de7d5&token=1343971749_85ce464ec3361604fbda75e38e29f4e8 
```

从程序员的角度来看，我想知道它是如何工作的？这些视频下载器如何能够获取 html 源中甚至不存在的视频的直接 url？如果有人可以逐步解释，他们的流程是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:56:26.880

他们对 flash 对象进行服务器端分析，这将建立下载视频的连接。这种联系很容易被捕捉到。这甚至可以在浏览器中使用，例如使用 Firebug：

[![flash player的瀑布图](../Images/fcddfd5ac753b3974984265e10aaebc0.png)](https://i.stack.imgur.com/9KmRm.png)

# android - HTML5/Javascript 中的相机应用程序是否适用于 Android

> ID：11790022
> 
> 赞同：1
> 
> 时间：2012-08-03T05:51:00.723
> 
> 标签：android, cordova

使用 Android 的 Phonegap1.9.0 相机应用程序。按照 phonegap 文档的步骤进行操作。但是当我启动应用程序并单击捕获手机时，什么也没有发生。

当我查看 logcat`navigator.camera.getPicture is undefined`

下面指定的开发版本。

*   Phonegap 版本：1.9.0
*   日食：3.7.2
*   安卓：[https ://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)
*   平均价格：4.1
*   设备：三星 GT-S5830，操作系统-Android 2.3.6

有人可以建议我遵循的步骤以及应该用于支持相机的特定版本。

HTML 代码如下：

```
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, height=device-height, 
    initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <title>PhoneGap WP7</title>
  <link rel="stylesheet" href="master.css" type="text/css" media="screen" 
    title="no title" charset="utf-8" />

  <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>

  <script type="text/javascript" charset="utf-8" src="javascript.js"></script>
</head>
<body onLoad="setTimeout('delayer()', 5000)">
  <h1>
    VS Mag PhoneGap Photo Demo</h1>
  <button onclick="capturePhoto();">Capture a Photo</button>
  <br>

  <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">Display from Library</button><br>
  <img style="display: none; width: 200px; height: 200px;" alt="" id="capturedPhoto" src="" />
  <img style="display: none; width: 200px; height: 200px;" alt="" id="selectedFromPhotoLibrary"
    src="" />
</body>
</html> 
```

下面是我的 JAVA 脚本代码：

```
var pictureSource;   // Picture source
var destinationType; // Sets the format of returned value 

// Wait for PhoneGap to connect with the device
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready to be used!
function onDeviceReady() 
{
    pictureSource = navigator.camera.PictureSourceType;
    destinationType = navigator.camera.DestinationType;
}

function selectPhoto(useCamera) 
{

  pictureSource = navigator.camera.PictureSourceType;
  destinationType = navigator.camera.DestinationType;

 if (useCamera) 
 { // take picture
  navigator.camera.getPicture(photoLoaded, onError, { allowEdit: true, destinationType: destinationType.FILE_URI });
 }
else 
{
// select from library
navigator.camera.getPicture(photoLoaded, onError, { allowEdit: true, sourceType: pictureSource.PHOTOLIBRARY, destinationType:
destinationType.FILE_URI });
}
}

//display image on the screen
function photoLoaded(imageData) 
    {
    var temp_image=imageData;
    document.getElementById("imageControl").src=temp_image;

    }

// Called when a photo is successfully retrieved
function onPhotoDataSuccess(imageData) {
    var capturedPhoto = document.getElementById('capturedPhoto');
    capturedPhoto.style.display = 'block';
    capturedPhoto.src = imageData;
    navigator.notification.alert("Picture Successfully Captured!");
}

// Called when a photo is successfully retrieved
function onPhotoURISuccess(imageURI) {
    var selectedFromPhotoLibrary = document.getElementById('selectedFromPhotoLibrary');
    selectedFromPhotoLibrary.style.display = 'block';
    selectedFromPhotoLibrary.src = imageURI;
    navigator.notification.alert("Picture Imported Captured!");
}

function capturePhoto() {

    // Take picture using device camera and retrieve image
    navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
}

// A button will call this function
//
function getPhoto(source) {
    // Retrieve image file location from specified source
    navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50,
        destinationType: destinationType.FILE_URI,
        sourceType: source
    });
}
// Error Handling
function onFail(message) {
    alert('Failed because: ' + message);
} 
```

# linux - 在 Linux 上查找内核是 32 位还是 64 位

> ID：11790024
> 
> 赞同：1
> 
> 时间：2012-08-03T05:51:08.743
> 
> 标签：linux, linux-kernel, 64-bit, cpu, 32bit-64bit

当我运行 uname -a 时，我得到：

Linux 2.6.18-164.el5 #1 SMP 2009 年 8 月 18 日星期二 15:51:48 EDT x86_64 x86_64 x86_64 GNU/Linux

我知道 x86_64 应该暗示 64 位内核，但为什么这个数字出现 3 次？每个实例意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T05:55:32.290

Uname 有单独的命令来打印“机器、处理器和硬件平台”——在您的情况下，所有这些都是相同的。以下输出分别可以清楚地说明：

```
~$ uname -m # print machine
x86_64
~$ uname -p # print processor
x86_64
~$ uname -i # print hw platform
x86_64 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T06:01:29.023

使用 uname -m 命令仅显示内核名称。

在你的情况下

unname -m

x86_64

表示 64 位

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T05:57:24.970

# unname -a

将为您提供有关系统的所有详细信息。它还包括机器硬件名称、处理器类型和硬件平台。

所以，

1.  x86_64 是机器名称。
2.  x86_64 是处理器类型。
3.  x86_64 是硬件平台。

采用：

# unname --帮助

更多地了解它的选项。

# java - 如何限制 EditText 在 Java 中仅输入浮点值？

> ID：11790027
> 
> 赞同：9
> 
> 时间：2012-08-03T05:51:16.187
> 
> 标签：java, android, android-edittext

我找到了将其限制为 xml 中的 Integer/float 的答案，我想以编程方式进行。我可以设置`setInputType(InputType.TYPE_CLASS_NUMBER)`整数值，但浮点值呢？

我想要它们的`xxxx.xxx`格式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T05:53:55.560

我想你正在寻找

```
android:inputType="numberDecimal" 
```

在 xml 文件中和

```
InputType.TYPE_NUMBER_FLAG_DECIMAL 
```

在java源文件中。

**TYPE_NUMBER_FLAG_DECIMAL**是 TYPE_CLASS_NUMBER 的标志，**允许**十进制输入。

有关更多信息，请参阅[此](http://developer.android.com/reference/android/text/InputType.html)

以另一种方式，您可以使用测试输入值

```
if(editText.getText().toString().contains("."))
     //Its a float value
else
     //Not a float value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-06T06:48:38.000

那么简单地使用

> editText.setInputType(InputType.TYPE_CLASS_NUMBER|InputType.TYPE_NUMBER_FLAG_DECIMAL)

仅当您想以编程方式执行此操作时。

# android - 即使数据库具有正确的信息，Android 游标也会返回垃圾数据

> ID：11790029
> 
> 赞同：0
> 
> 时间：2012-08-03T05:51:23.620
> 
> 标签：android, cursor

我有一个连接侦听器，它给了我 Collection，我必须在数据库中插入这些字符串集，并检查它是否已经存在于 DB 中，如果不存在则插入。大多数情况下，当网络连接从 OFF 状态变为 ON 时，都会调用此侦听器，由于网络不稳定，此方法被频繁调用，此时我放置 WHERE 条件的游标数据始终失败，游标计数返回 0。我检查了游标/数据库是否关闭，它没有抛出任何异常。也尝试使用阻塞线程，但仍然在第 3 次或第 4 次游标调用中得到垃圾，我提取了 .db 文件并检查其条目 DB 数据是否完美存储在其中，但仍然返回查询失败。

实际上，我正在使用 asmack API 使用 XMPP 帐户登录并获取 Rosters，对于 Roster，我们必须设置监听器，它提供 presentChanged()、entriesUpdate() 等，同时调用网络连接开/关情况 entryUpdate() 方法，我在这里检查数据库中是否已经存在条目，如果不存在则插入，这里游标返回垃圾值。

请让我知道光标损坏的原因可能是什么？Android 是否对 Cursor 有此类问题？

**注意：**我没有使用 ContentProvider

这是代码：

```
private synchronized ArrayList<Contact> updateDBForNewEntries(int connectionIndex, Hashtable<String, String> addresses){
if(connectionIndex == NONE || addresses == null || addresses.size() <= 0)
return null;
String to = getAccountUserName(connectionIndex);
if(to == null){
return null;
}
AddressBookDBAdapter dbHelper = new AddressBookDBAdapter(context);
dbHelper.open();
String contactLookupTableName, whereClause, idColumn;           

if (connectionIndex == MAIN_INDEX) {
contactLookupTableName = AddressBookDBAdapter.TABLENAME_CONTACT_DETAILS;
idColumn = AddressBookDBAdapter.CONTACT_ID;
} else {
contactLookupTableName = AddressBookDBAdapter.TABLENAME_VCARD_LOOKUP;
idColumn = AddressBookDBAdapter.VCARD_ID;
}
ArrayList<Contact> addedContactsList = new ArrayList<Contact>();
Iterator<String> iterator = addresses.keySet().iterator();
to = Utils.trimStringWithSlash(to);

while (iterator.hasNext()) {
String mailId = Utils.trimStringWithSlash((iterator.next()).trim()).toLowerCase();

if(mailId == null || mailId.trim().length() <= 0)
    continue;

//check TO and FROM conditions
if(to.equalsIgnoreCase(mailId)){
    mailId = null;
    continue;               
}       
Utils.debugLog("*******frm update Mail Id = " + mailId);

if (connectionIndex == MAIN_INDEX) {
contactLookupTableName = AddressBookDBAdapter.TABLENAME_CONTACT_DETAILS;
whereClause = AddressBookDBAdapter.DATA_TYPE + "='"+ CONTACT_DATATYPE.IM + "' AND "+ AddressBookDBAdapter.DATA + " = '" + mailId.toLowerCase() + "'";

SQLiteCursor detailCursor = dbHelper.query(contactLookupTableName,
            new String[] { idColumn },
            whereClause, null, null, null, null);
Utils.debugLog("**** detailed cursor = " + (detailCursor != null? detailCursor.getCount():null)+"; whereclause="+whereClause);
try{
if(detailCursor != null){
if (!detailCursor.isClosed() && detailCursor.moveToFirst()) {
String searchKey = detailCursor.getString(0);
Utils.debugLog("****** mail Id already exist here="+whereClause + ";"+searchKey);                   
//TODO: Perform update operation here       
} else{
//Mail Id not exist in database so add it a a new entry
//TODO:: Perform insertion      
}
}
if(detailCursor != null && !detailCursor.isClosed())
    detailCursor.close();
}catch(Exception e){}
detailCursor = null;
} 
mailId = null;
}
Utils.debugLog("*** While loop ends " );
dbHelper.close();
to = null;
return addedContactsList;
} 
```

谢谢， 问候， 阿帕纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:55:47.573

```
try {
     for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {

     }
} 
```

尝试像这样使用和增加光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:01:29.243

不知道 Android 有关于光标的问题。你能发布一些代码吗？也许您忘记将光标移动到 First，或者您的“WHERE”子句缺少某些内容。

# android - 无法在服务中调用蓝牙广播接收器方法

> ID：11790030
> 
> 赞同：0
> 
> 时间：2012-08-03T05:51:30.467
> 
> 标签：android, service, bluetooth, broadcastreceiver

我有这个服务类：

```
 public class BluetoothService extends Service {

    private static Activity mActivity;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
        this.registerReceiver(bluetoothReceiver, intentFilter);     
    }

    @Override
    public void onDestroy() {
        if (bluetoothReceiver != null) {
            this.unregisterReceiver(bluetoothReceiver);
        }       
    }

    @Override
    public void onStart(Intent intent, int startid) {
           //
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {        
        return START_STICKY;
    }

    public static BroadcastReceiver bluetoothReceiver = new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {
                final int state = intent.getIntExtra(BluetoothAdapter.EXTRA_STATE, BluetoothAdapter.ERROR);
                TextView tvStatus = (TextView) mActivity.findViewById(R.id.tvtatus);
                Messaging.appendMessage(tvStatus, Bluetooth.getDeviceState(state));
                if (Bluetooth.isBluetoothEnabled()) {
                    Messaging.appendMessage(tvStatus, Bluetooth.showMessage());
                }               
            }
        }
    };  
} 
```

在我的活动课上，我有这个：

```
public class MainActivity extends Activity {

    private TextView tvStatus;
    private Intent intentBluetooth;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       tvStatus = (TextView)findViewById(R.id.tvtatus);

       intentBluetooth = new Intent(this, BluetoothService.class);
       startService(intentBluetooth);
    }
} 
```

Service 类中的 BroadcastReceiver 方法 (bluetoothReceiver) 永远不会被调用。我不知道为什么。如果我首先在 Activity 中拥有 IntentFilter 和 BroadcastReceiver 代码，那么它可以工作 - 但不是在 [单独的] 服务中。我难住了。

我的 AndroidManifest.xml 是：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.onegoal.androidexample"
        android:versionCode="1"
        android:versionName="1.0.0" 
        android:installLocation="auto"
        android:hardwareAccelerated="true">

        <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" />

        <uses-permission android:name="android.permission.BLUETOOTH" />
        <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
        <uses-feature android:name="android.hardware.bluetooth" android:required="false" /> 

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" 
            android:debuggable="true" >
            <activity
                android:name=".MainActivity"
                android:label="@string/app_name"
                android:theme="@android:style/Theme.NoTitleBar" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <service android:name=".BluetoothService">
            </service>
        </application>  
    </manifest> 
```

我是 Android 新手，所以我所做的可能不是最好的。希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:23:39.630

**也许您的接收器是静态**的这一事实导致了问题。

`BroadcastReceiver`永远不应该是静态的。它会导致很多问题。

您的代码的其他非常糟糕的设计问题 - 持有对服务内部活动的引用，并使用它来修改视图确实是错误的做法。它很容易导致内存韭菜。正确的为什么要在和之间进行通信`Service`是`Activity`通过实现 android 的`Messanger`，或者通过它们在它们之间发送广播`BroadcastReceiver`。

如果你听我的建议 - 你不必让你的接收器静态（我猜你只是因为你在里面使用了 mActivity 静态实例而让它成为静态），我很确定它会解决你的问题问题

你可以在这里阅读：http `Messanger`: [//developer.android.com/reference/android/os/Messenger.html](http://developer.android.com/reference/android/os/Messenger.html)

相信你会在网上找到很多使用示例。

从服务广播活动更新的示例：

```
public class MyService extends Service {

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    super.onCreate();

    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
    this.registerReceiver(bluetoothReceiver, intentFilter);
}

@Override
public void onDestroy() {
    if (bluetoothReceiver != null) {
        this.unregisterReceiver(bluetoothReceiver);
    }
    super.onDestroy();
}

public BroadcastReceiver bluetoothReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {
            final int state = intent.getIntExtra(BluetoothAdapter.EXTRA_STATE, BluetoothAdapter.ERROR);
            updateUIWithNewState(state);
        }
    }
};

protected void updateUIWithNewState(int state) {
    Intent intent = new Intent("serviceUpdateReceivedAction");
    intent.putExtra("state", state);
    sendBroadcast(intent);
}

} 
```

这就是活动：

```
public class MyActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = new Intent(this, MyService.class);
    startService(intent);
}

@Override
protected void onResume() {
    super.onResume();

    registerReceiver(mServiceUpdatesReceiver, new IntentFilter("serviceUpdateReceivedAction"));
}

@Override
protected void onPause() {
    unregisterReceiver(mServiceUpdatesReceiver);
    super.onPause();
}

private BroadcastReceiver mServiceUpdatesReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        int state = intent.getIntExtra("state", -1);
        // do what ever you want in the UI according to the state
    }
};
} 
```

# jquery - 从 Flask 设置 iframe src 响应

> ID：11790031
> 
> 赞同：1
> 
> 时间：2012-08-03T05:51:34.343
> 
> 标签：jquery, python, flask

目前，我有一个关于 Flask 应用程序的问题。

我正在开发一个需要生成报告的网络应用程序（一些自动生成的 html 文件，如 junit 报告）。

在report_dispay 页面上，我在左侧有一个导航栏，上面有多个报告标题（html 链接）；在右侧，有一个 iframe，单击一个链接时将在其中显示报告。生成报告后，我将 URI（相对文件位置，即“reports/html/index”）发回。但是当我设置iframe的src属性时，flask命令行打印404，找不到“reports/html/index”。

您知道如何将生成的报告“注册”到应用程序吗？

非常感谢，维康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:48:09.723

您需要为这些报告注册一个处理程序：

```
# Other imports here
from werkzeug.utils import safe_join

# ... snip Flask setup ...

@app.route("/reports/<path:report_name>")
def report_viewer(report_name):
    if report_name is None:
        abort(404)

    BASE_PATH = "/your/base/path/to/reports"

    fp = safe_join(BASE_PATH, report_name)
    with open(fp, "r") as fo:
        file_contents = fo.read()

    return file_contents 
```

# windows - Windows 上的 Mac 编译器

> ID：11790032
> 
> 赞同：3
> 
> 时间：2012-08-03T05:51:46.060
> 
> 标签：windows, macos, compiler-construction, cross-platform, cross-compiling

是否可以在 Windows 上开发跨平台应用程序，也可以从 Windows 编译为 Mac OS X？我已经检查了 Qt，但这需要使用 Xcode 从 Mac 编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:13:11.720

如果这是您的优先事项，那么一个选项将是 Java，因为至少在一个平台上构建的 jar 文件可以在另一个平台上运行。

但是，如果您在谈论 C 或 C++ ...

如果您正在创建一个小型命令行工具，那么您*可以*使用 gcc 和交叉编译器来完成这项工作，但我认为这将是很多工作。

但是，如果您想创建一个 GUI 应用程序，我会敦促您现在放弃。有很多问题 - 您必须使用无法在任何其他平台上构建的 Carbon 或 Cocoa API，您必须链接到编译主机上不存在的框架，您不会能够轻松生成 .plist 文件。Qt 无济于事，因为您需要能够构建它，它依赖于这些相同的框架。

简而言之，除了在实际的 Mac 上构建之外别无选择。

此外，在修复错误时，您绝对必须在 Mac（物理或虚拟）上执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:15:01.903

据我所知，一般来说你确实需要一个mac来制作可执行文件，即使是一个简单的ansi c程序你也需要gcc for mac。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:05:46.753

您可以创建[MacPorts](http://guide.macports.org/) [Portfile](http://guide.macports.org/#development.introduction)。（如果您的应用程序是开源的）

> MacPorts 端口是包含在 Portfile 中的一组规范，用于定义应用程序、其特征以及安装它所需的任何文件或特殊说明。这允许您使用单个命令来告诉 MacPorts 自动下载、编译和安装应用程序和库。

看看[IMCROSS](http://www.sandroid.org/imcross/)。

> IMCROSS 是一种在 Linux（或可能是其他 *nix）系统上安装交叉编译器和交叉编译库的简单脚本方法，因此您可以开发旨在同时在 Microsoft Windows 和 Mac OS X 上运行的程序，并且在与您开发这些程序的 Linux 版本相同的环境中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T21:32:09.490

您当然可以使用[Real Studio](http://www.realstudio.com)来做到这一点。它可以毫无问题地在 Windows 上创建 Mac OS X 应用程序。

它可以针对 Windows、OS X 和 Linux 进行交叉编译。它可以从任何平台进行。它还可以创建网络应用程序。

听起来你应该检查一下。

# javascript - 从一种形式的数组到另一种形式的数据转换

> ID：11790034
> 
> 赞同：0
> 
> 时间：2012-08-03T05:51:46.537
> 
> 标签：javascript, jquery, arrays

我对从一种形式的数组到另一种形式的数据结构转换表示怀疑。

我的输入数据的形式是，

```
var testVar=[

{
    "count": 1,
    "term": "Company",
    "Company": [
        {
            "Tata": [
                {
                    "count": 1,
                    "term": "Tatagroup"
                }
            ],
            "sector": "Automotive",
            "type": "Car"
        },
      ]
},
{
    "count": 2,
    "term": "Country",
    "Country": [
        {
            "France": [
                {
                    "count": 1,
                    "term": "France"
                }
            ],
            "region": "Europe",
            "Player": "Zidane",
            "term": "France",
            "code": "FRA"
        },
        {
            "region": "Europe",
            "Player": "Federer",
            "term": "Switzerland",
            "Switzerland": [
                {
                    "count": 1,
                    "term": "Switzerland"
                }
            ],
            "code": "SWI"
        }
    ]
}]; 
```

我正在尝试将其转换为形式，

```
[ "Tata" : [{"sector" : "automotive"}, "type" : "car"], "France": [{"region" : "Europe}, {"Player" : "Zidane"} , {"code" : "FRA"}], "switzerland" : [{"region" : "Europe}, {"Player" : "Federer"} , {"code" : "SWI"}]]; 
```

我想出的代码看起来像[http://jsfiddle.net/X2apw/2/](http://jsfiddle.net/X2apw/2/)，但它并不准确..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:22:39.940

```
var testvar = [...];

var result = {};
for (var i=0; i<testvar.length; i++) {
    var arr = testvar[i][testvar[i].term];
    for (var j=0; j<arr.length; j++) {
        var resarr = [];
        for (var k in arr[j]) {
            if (typeof arr[j][k] == "string") {
                 var obj = {};
                 obj[k] = arr[j][k];
                 resarr.push(obj);
            } else {
                 result[k] = resarr;
            }
        }
    }
} 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/X2apw/3/)）

但是，我强烈建议您在结果格式中只使用一个对象而不是一组单一属性对象。将内部循环体更改为：

```
 var resobj = {};
        for (var k in arr[j]) {
            if (typeof arr[j][k] == "string") {
                 resobj[k] = arr[j][k];
            } else {
                 result[k] = resobj;
            }
        } 
```

（[演示](http://jsfiddle.net/X2apw/4/)）

# html - HTML::模板 被跳过的块

> ID：11790037
> 
> 赞同：0
> 
> 时间：2012-08-03T05:52:11.733
> 
> 标签：html, perl, templates

我无法让[HTML::Template](http://search.cpan.org/dist/HTML-Template/)的`<TMPL_IF>`块发挥作用——我的模板似乎只是完全跳过了该代码。

```
 <TMPL_LOOP NAME=DATA>
    <TMPL_VAR NAME=complete><br>
    <TMPL_IF NAME="complete">
                    <!-- Some HTML here -->
    <TMPLE_ELSE>
        <!-- Some other HTML here -->
    </TMPL_IF>
  </TMPL_LOOP> 
```

该`TMPL_VAR`行正在显示预期值，但它下面的块中没有任何内容显示。我传递给模板的数据结构是：

```
 $VAR1 = [
      {
        'code' => 26,
        'message' => 'Start building sensors for Jarvis',
        'complete' => 0
      },
      {
        'code' => 33,
        'message' => 'Machine learning to determine if actions are appropriate or not',
        'complete' => 0
      },
      {
        'code' => 37,
        'message' => 'Play by genre audioserv method',
        'complete' => 0
      }
    ]; 
```

非常感谢任何帮助 - 在过去的一个小时里，我一直在努力解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:17:39.620

来自[精美手册](http://search.cpan.org/dist/HTML-Template/lib/HTML/Template.pm#TMPL_IF)：

> 标签允许您根据`<TMPL_IF>`给定参数名称的值包含或不包含模板块。如果参数的值对 Perl 来说是正确的——比如 '1'——那么这个块就会包含在输出中。如果它没有被定义，或者被赋予了一个错误的值——比如“0”——那么它就会被跳过。

你所有的`complete`s 都是零，所以`<TMPL_IF>`不会显示任何东西。您可能希望显示“else”分支，但您没有任何[`<TMPL_ELSE>`](http://search.cpan.org/dist/HTML-Template/lib/HTML/Template.pm#TMPL_ELSE)分支，您有`<TMPLE_ELSE>`. 修正错字并重试。

# delphi - Delphi 7 - 将 Base64 字符串解码为字节数组

> ID：11790042
> 
> 赞同：3
> 
> 时间：2012-08-03T05:52:33.113
> 
> 标签：delphi, base64

我正在制作一个构建器/存根应用程序。构建器用 XE2 编码，而存根用 Delphi 7 编码。

在 XE2 中，当我使用“EncdDecd”时，它具有编码 EncodeBase64 和 DecodeBase64 的功能。但是在 Delphi 7 中，当我使用 EncdDecd 时，它没有我需要的 DecodeBase64 函数。

在我的构建器中，我将文件加载到流中并将其编码为 B64 AnsiString 并将其添加到存根的资源中。目标是让存根将此 B64 AnsiString 解码为字节数组，并最终将其写入磁盘上的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T23:49:53.970

All versions of Delphi from v6 onward ship with Indy preinstalled. Its `IdCoderMIME` unit has `TIdEncoderMIME` and `TIdDecoderMIME` classes for encoding/decoding base64 content.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:39:14.083

有很多 base64 免费的 Delphi 代码可供您使用。[TurboPower LockBox 3](http://lockbox.seanbdurkin.id.au/HomePage)还具有 base64 的实现。这可以在 Delphi 7 中编译。

# php - 如何使用 $_GET 或 $_POST 变量来区分每种类型的请求？

> ID：11790052
> 
> 赞同：1
> 
> 时间：2012-08-03T05:53:36.700
> 
> 标签：php, http, post, get

> **可能重复：**
> [PHP 检测请求类型（GET、POST、PUT 或 DELETE）](https://stackoverflow.com/questions/359047/php-detecting-request-type-get-post-put-or-delete)

我想在人们多次提交表单时显示警告，并且当他使用`GET`请求页面时`count`变量重置为 0；

我正在使用这种技术：

```
<input type="hidden" name="submissioncount" value="<?php echo $subCount; ?>" /> 
```

但在我看来 $_GET 和 $_POST 总是存在的：

```
<?php
if(isset($_GET)){
  $warning = "GET exist";
}else{
  $warning = 'GET not exist';
}
if(isset($_POST)){
  $warning2 = "POST exsit";
}else{
  $warning2 = 'POST not exist ';
}

?>
<!DOCTYPE html>
<html>
<head></head>
<body>
<?php
  echo $warning;
  echo $warning2; 
?>
<form acion='<?php echo $_SERVER['PHP_SELF']?>' method='POST' >
<input type='submit' />
</form>
</body>
</html> 
```

原来它的回报存在？我在哪里做错或任何其他工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:57:46.837

`$_GET`并且`$_POST`超全局变量无论是否通过都**存在，因此检查它们将返回 true。**检查其中的条目以确定它们是否存在。

`if(isset($_POST['submissioncount'])`或者 `if(isset($_GET[some_GET_variable])`

* * *

交替，

```
$meth = $_SERVER['REQUEST_METHOD'];
if($meth == 'GET')
//do something
else if($meth == 'POST')
//do something else 
```

# php - PHP从字符串中获取所有图像的URL

> ID：11790059
> 
> 赞同：6
> 
> 时间：2012-08-03T05:54:35.327
> 
> 标签：php, regex, string, image, url

我需要一个用于 PHP 的函数或正则表达式字符串，我可以像这样传递一个字符串：

> Lorem ipsum dolor sit amet，[http](http://www.gettyimages.com/images/marketing/frontdoorStill/PanoramicImagesRM/FD_image.jpg) ://www.gettyimages.com/images/marketing/frontdoorStill/PanoramicImagesRM/FD_image.jpg consectetur adipiscing elit。Nullam sed diam lectus，一个 rutrum orci。暂停潜力。Nulla facilisi。暂停潜力。Ut [http://www.handsonuniverse.org/get_images/images/20090802.ngc6992.HOS.jpg](http://www.handsonuniverse.org/get_images/images/20090802.ngc6992.HOS.jpg) ullamcorper mauris sit amet elit tristique sat amet laoreet nunc condimentum。Lorem ipsum dolor sit amet, consectetur adipiscing elit。Aliquam euismod arcu non odio [http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg](http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg) aliquam vestibulum。Sed eleifend Tellus id augue luctus ac ultrices leo semper。

我会得到回报：

> [http://www.gettyimages.com/images/marketing/frontdoorStill/PanoramicImagesRM/FD_image.jpg](http://www.gettyimages.com/images/marketing/frontdoorStill/PanoramicImagesRM/FD_image.jpg) [http://www.handsonuniverse.org/get_images/images/20090802.ngc6992.HOS.jpg](http://www.handsonuniverse.org/get_images/images/20090802.ngc6992.HOS.jpg) [http://www.prelovac。 com/vladimir/wp-content/uploads/2008/03/example.jpg](http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg)

在一个数组中。我需要它来根据天气抓取 URL，它们是否包含常规图像扩展名，例如 *.jpg、*.png、*.bmp 等。任何人都知道存在这样的 URL，这样我就可以避免重新发明轮子？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T06:00:10.770

好吧，下面将适用于您的示例：

```
preg_match_all('/(https?:\/\/\S+\.(?:jpg|png|gif))\s+/', $content, $matches); 
```

添加您想要捕获的任何其他扩展。

请注意，上述内容不一定是稳健的（`www.blah.com/image.jpg`例如，它不匹配）。它也不会匹配没有以扩展名结尾的 URL，即使它们是图像（即，`http://domain.com/blah.jpg?loadsmall=true`或其他东西）。有一些方法可以让它更智能，但这真的取决于你期望什么样的输入，因为这会驱动你的解析需要多么复杂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-03T06:12:27.400

如果您不想使用正则表达式执行此操作。相反，解析 HTML。

```
<?php
$html='YOUR_STRING';
$dom = new domDocument; 
$dom->loadHTML($html); 
$dom->preserveWhiteSpace = false;
$images = $dom->getElementsByTagName('img');

foreach ($images as $image) 
   {   
     echo $image->getAttribute('src'); 
   }

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:03:24.870

这是正则表达式： `/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/g`

演示：[http ://regexr.com?31ni5](http://regexr.com?31ni5)

积分用于一些随机的 Google 结果。

# c++ - 如果构造函数内部的某些其他实例化失败，构造是否会失败

> ID：11790063
> 
> 赞同：0
> 
> 时间：2012-08-03T05:55:06.700
> 
> 标签：c++, constructor

我有一个这样的构造函数

```
 ClassA::ClassA(void)
    {
       pImplClassA = new (std::nothrow) pImplClassA();
       if (pImplClassA == null)
       {
         return;
       }
    }
    ClassA::SomeFunc()
    {
      pImplClassA->SomeFunc();
    } 
```

我的问题是，如果 pClassB 失败，classA 实例是否也会为空，或者当我这样做时它已经实例化了。

```
 ClassA* pClassA = new ClassA()
    pClassA->SomeFunc(); 
```

pClassA 不应该为 null，因为构造函数失败了。如果不是，我仍然可以调用 ClassA::SomeFunc() 并且它会在那里崩溃，因为它没有被实例化。

pClassA 是否为空？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T05:57:22.787

你说的失败是什么意思？如果`ClassB`' 的构造函数抛出异常，因为你没有在`ClassA`' 的构造函数中捕获它，就好像`ClassA`' 的构造函数会抛出异常，所以不，不会创建对象，也没有什么`pClassA`可说的。

# eclipse - 使用 Eclipse 从 Windows 机器在 UNIX 机器上进行远程 C 开发

> ID：11790066
> 
> 赞同：6
> 
> 时间：2012-08-03T05:55:45.233
> 
> 标签：eclipse, autocomplete, aix, remote-access, xlc

我可以使用 ssh/telnet 对 AIX 机器进行终端访问（无 root 访问权限）。我需要使用 C 开发程序并使用 xlc 编译器对其进行编译。目前我可以使用 RSE 在 eclipse(Juno) 中打开远程文件并编辑文件，但代码完成和错误检查将不起作用。任何人都可以帮我设置eclipse，这样代码完成就可以工作，而且我可以从我的Windows机器上编译代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:57:23.807

你可以试试这个，[http://wiki.eclipse.org/PTP/rdt-setup](http://wiki.eclipse.org/PTP/rdt-setup)或者..检查...

[如何在 Eclipse 中的远程计算机上构建 c++ 项目？](https://stackoverflow.com/questions/856444/how-to-build-a-c-project-on-a-remote-computer-in-eclipse)

有点类似。如果你看第三个答案。

您也可以尝试 X11 Forwarding -

[http://tartarus.org/~simon/putty-snapshots/htmldoc/Chapter3.html#using-x-forwarding](http://tartarus.org/~simon/putty-snapshots/htmldoc/Chapter3.html#using-x-forwarding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:51:56.760

与其尝试设置 Eclipse 和 CDT 来进行远程开发，不如考虑购买 IBM Rational Developer for Power Systems Software (RDP)，这是一个基于 Eclipse 的远程开发环境，允许使用 C 和 C++（以及 COBOL）应用程序从 Windows 或 Linux 系统在 AIX 上进行开发。更多信息可以在[这里](http://www.ibm.com/software/rational/products/rdp)找到。

# timezone - 如何从Android中的数字时区值获取时区名称

> ID：11790068
> 
> 赞同：4
> 
> 时间：2012-08-03T05:55:46.843
> 
> 标签：timezone, utc, android-calendar, vcalendar

我基本上是在尝试在 Android 中读取 .vcs 文件。它具有以下格式的时区值：

时间：+05:30

现在我想获取与该值对应的时区名称。意味着在这种情况下它将是加尔各答（印度）。

在android中是否有任何代码可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:26:36.977

```
 TimeZone tz = TimeZone.getTimeZone("GMT-06:00");

        String tzarr[] = TimeZone.getAvailableIDs(tz.getRawOffset());
        for(int i=0;i<tzarr.length;i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:59:50.673

（我假设您可以轻松地将文本解析为偏移量。）

一般来说，你不能。像 "+05:30" 这样的东西只是表示*在某个特定时间*与 UTC 的偏移量。它没有表示偏移量在一年中（或跨历史）的时区内如何变化。例如，在某些时候，欧洲/伦敦时区与非洲/卡萨布兰卡时区具有相同的偏移量 - 但并非总是如此。

假设这与特定日期/时间相关联，您可以使用`TimeZone.getAvailableIDs`，遍历所有时区，检查该特定时刻与 UTC 的偏移量（使用[`TimeZone.getOffset(long)`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getOffset%28long%29)）并查看哪些时区在正确的时间具有正确的偏移量。不过可能有很多这样的区域。

如果您*没有*特定的日期/时间，则更加模糊。您可以使用`getRawOffset`and`getDSTSavings`查看目标偏移量是*任何*特定区域的标准偏移量*还是*DST 偏移量 - 尽管请注意，这些调用假定对于特定时区，DST 偏移量和标准偏移量在历史记录中保持相同（这不是t 总是正确的）。

# iphone - 一页iPhone应用程序中的pushView动画？

> ID：11790070
> 
> 赞同：0
> 
> 时间：2012-08-03T05:55:53.663
> 
> 标签：iphone, uiviewanimation

我有一个基于 Web 的应用程序，只有一个视图控制器。我的应用程序中有一些快捷按钮，它们将加载一些网址。我需要的是每次单击快捷方式按钮时的推送动画，就像 pushViewController 一样。

我只有一个 UIView 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:22:02.890

所以，我自己找到了解决方案，

像动画一样推送任何视图

```
CATransition *animation = [CATransition animation];
[animation setDuration:0.5];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromRight];
[animation setTimingFunction:[CAMediaTimingFunction   functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];    
[[self.view layer] addAnimation:animation forKey:@"SwitchToView1"]; 
```

感谢您的反馈，

# php - facebook php注销问题

> ID：11790072
> 
> 赞同：-1
> 
> 时间：2012-08-03T05:56:21.020
> 
> 标签：php, javascript, facebook

我一直在将此代码用于 facebook sdk 注销，但它不起作用。但是我可以成功登录。这是代码。

```
if ($user) {
$logoutUrl = $facebook->getLogoutUrl();
} 
else {
$loginUrl = $facebook->getLoginUrl(array(
'scope' => 'user_about_me, user_hometown')
);
}

?>

<?php if ($user){ ?>
<a href="<?php echo $logoutUrl; ?>">Logout Here</a>
<?php }else{ ?>
<a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
<?php }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:16:31.340

默认的 Facebook SDK[使用](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php#L51)php 的内置会话实现来存储它的数据。其中最后登录的[用户 id](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php#L43)。

当您的用户单击注销链接时，facebook 会将她注销，并将她发送回您的站点，但是 facebook 无法删除您站点的`$_SESSION`. 添加一个`next`参数，以便 facebook 将用户发送回那里，您可以使用[session_destroy](http://php.net/manual/en/function.session-destroy.php)`$facebook->getLogoutUrl()`清除整个会话（在所有用户注销之后）。

如果您不想只清除 facebook 特定值的整个会话，则在类上有一个名为[destroySession](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L1187)`BaseFacebook`的方法（由于某种原因未在官方 sdk 文档中列出）。

# iphone - 一次 CGAffineTransformMakeScale 和 Rotation？

> ID：11790074
> 
> 赞同：0
> 
> 时间：2012-08-03T05:56:22.443
> 
> 标签：iphone, ios, ios5, core-graphics

我想一次应用缩放和旋转。问题是当我这样做时旋转是正确的，但缩放会减小。我分别测试比例和旋转，它工作得很好。以下是我的代码

```
CGAffineTransform transformScale = CGAffineTransformMakeScale( tmp.size, tmp.size);
CGAffineTransform transformRotate = CGAffineTransformMakeRotation((CGFloat)tmp.rotation);
[iview setTransform:CGAffineTransformConcat(transformScale, transformRotate)]; 
```

# jquery - Jquery if 和 else if 验证语句

> ID：11790077
> 
> 赞同：0
> 
> 时间：2012-08-03T05:56:33.033
> 
> 标签：jquery, forms, validation, form-submit

您好，我一直在尝试使此表单无法正常工作，因此，如果 textarea 为空并且未选择任何单选按钮，则提交时会为两者发送一条消息，如果 textarea 有文本但未选择收音机 trow第二条消息，如果正在选择单选按钮但 textarea 为空，则显示第三条消息，最后一条消息，如果两个 textarea 都有文本并且正在选择单选按钮，则显示成功消息。

这是我的html：

```
 <div id="main" role="main">

                <form action="?q=dt-index" method="post" name="subscribeForm" id="myform">

                    <div id="comment_holder" class="input_holder" style="position: relative;">
                        <textarea rows="6" cols="30" placeholder="Please enter text" name="comment" class="inp"></textarea>
                    </div>

                    <div class="cbox">
                        <input type="radio" name="smile_selected" value="Awesome" id="yummy1" />
                            <label for="yummy1" class="yummy">Awesome</label>
                        <input type="radio" name="smile_selected" value="Good" id="cool1" />
                            <label for="cool1" class="cool">Good</label>
                        <input type="radio" name="smile_selected" value="Okay" id="ok1" />
                            <label for="ok1" class="ok_smile">Okay</label>
                        <input type="radio" name="smile_selected" value="Yuck" id="yuck1" />
                            <label for="yuck1" class="yuck">Yuck</label>
                    </div>

                    <div id="loading_button">
                        <button type="submit" class="default">Send</button>
                    </div>

                </form>

                <div id="errors"></div> <!-- Error container -->

            </div> 
```

这是我的 jQuery：

```
 $(document).ready(function() {

            /* on submitting my form */
                $( '#myform' ).submit(function() {

            /*          if Textarea is empty and redio button are not checked display message error for both */
                        if($('#myform textarea').val()=="")
                        {
                             if (!$(":radio:checked").attr('checked')) {
                                 $('#errors').empty().text('Please enter your message and select a radio'); 
                                return false;
                             }  
                        }

            /*          else if Textarea is empty display message error */
                        else if($('#myform textarea').val()=="") {  
                            $('#errors').empty().text('Please enter your message');
                            return false;
                    }

            /*          if radio button is not being selected display message error */
                        if (!$(":radio:checked").attr('checked')) {
                            $('#errors').empty().text('Please select a radio');
                            return false;
                    }

            /*          Everthing is good display success message and add SENDING class to submit button */
                        else {
                            $('#myform :submit').addClass('sending').html('Sending message...');
                            $('#errors').empty().text('All Good :D');
                        }
                });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:14:23.127

您的 if 语句逻辑有点多余，它只允许选择一个单选按钮，因为您忘记在第三个“if”之前添加一个“else”。但这是一种更好的方法，它也是可扩展的：

```
$(document).ready(function() {

        /* on submitting my form */
            $( '#myform' ).submit(function() {

               var errors = [];

        /*     else if Textarea is empty display message error */
               if($('#myform textarea').val()=="") {  
                    errors[errors.length] = 'enter your message';
                }

        /*      if radio button is not being selected display message error */
                if (!$(":radio:checked").attr('checked')) {
                   errors[errors.length] = 'select a radio';
                }

                if(errors.length > 0){
                    var errMsg = "Please  "

                    for(e = 0; e < errors.length-1; e++){
                        errMsg += errors[e]+", ";
                    }

                     errMsg = errMsg.substr(0, errMsg.length -2)+" and "+errors[errors.length-1]+".";
                     $('#errors').empty().text(errMsg);
                     return false;
                }

        /*          Everthing is good display success message and add SENDING class to submit button */
                    else {
                        $('#myform :submit').addClass('sending').html('Sending message...');
                        $('#errors').empty().text('All Good :D');
                    }

            });
        });​ 
```

这是一个显示它有效的链接：http: [//jsfiddle.net/66CHS/](http://jsfiddle.net/66CHS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:12:44.697

您的情况存在逻辑错误`if`：

它目前是这样的：

```
if($('#myform textarea').val()=="")
{
    .... 
}
else if($('#myform textarea').val()=="") {  
    ....
} 
```

`if`你也有同样的条件`else if`——这意味着`else if`永远不会被触发。

它应该是这样的：

```
if($('#myform textarea').val()=="" && !$(":radio:checked").attr('checked')) {
  // no text and no radio
}
else if($('#myform textarea').val()=="") {
  // no text
}
else if(!$(":radio:checked").attr('checked')) {
  // no radio
}
else {
  // all good
} 
```

# drupal-7 - 如何在 drupal 7 中邀请 Facebook、twitter、gmail、Yahoo 朋友加入 drupal 站点

> ID：11790099
> 
> 赞同：1
> 
> 时间：2012-08-03T05:58:11.020
> 
> 标签：drupal-7

我必须邀请 drupal 7 中的 Facebook、twitter、gmail、Yahoo 朋友加入 drupal 7 站点。我已经为此搜索了 drupal 模块，但没有找到任何模块。是否有任何模块可以执行上述任务。或者我可以执行的任何其他方式来完成此任务，任何人都知道请告诉我。

谢谢你，拉胡尔驳船

# java - 在Struts1的struts-config中提供action参数值

> ID：11790100
> 
> 赞同：1
> 
> 时间：2012-08-03T05:58:12.727
> 
> 标签：java, jakarta-ee, struts1

就像在 Struts2 中一样，我们可以在 struts.xml 中提供一个参数值，如下所示

```
<action name="myS2Action" class="demo.myS2Action">
    <result>/myS2Page.jsp</result>
    <param name="myS2Param">value</param>
</action> 
```

在 Struts1 中，有没有办法在 struts-config.xml 中设置一些参数值？

我在 struts-config.xml 中有以下条目

```
<form-bean name="myS1Form" type="demo.MyS1Form"></form-bean>
<action path="/myS1Action" type="demo.myS1Action" name="myS1Form" scope="request" >
    <forward name="success" path="/myS1Page.jsp"></forward>
</action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:08:11.987

在 Strut1 配置中，我们可以使用`set-property`标签。以下问题与`set-property`标签的使用有关。

[在 Struts1 中，如何在 action 标签中使用 set-property 标签？](https://stackoverflow.com/q/13248696/1307229)

# php - php pdf下载越来越腐败

> ID：11790101
> 
> 赞同：1
> 
> 时间：2012-08-03T05:58:20.613
> 
> 标签：php

我有一个强制下载pdf文件的代码。下面的代码

```
$file_name = 'Bv_Ebook.pdf';
$file_url = 'http://' .$_SERVER['HTTP_HOST'].'/sites/default/files/'. $file_name;
header('Content-Type: text/html');
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=\"".$file_name."\""); 
readfile($file_url); 
```

此代码在我们的测试版服务器上运行，pdf 已下载并可打开。

在我们的实时服务器上，相同的代码下载了 pdf，但 pdf 文件无法打开，它说：

**无法打开文档** 不支持文件类型纯文本文档（文本/纯文本）

虽然我已经[强制下载 pdf](https://stackoverflow.com/questions/10682929/force-pdf-download-with-php-file-corrupt-on-windows)和[apache 标头设置](https://stackoverflow.com/questions/3610746/serve-file-to-user-over-http-via-php)，但似乎没有任何效果。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:04:36.633

使用 is_readable() 检查文件权限以检查文件是否可访问。如果可以访问，请检查以下内容：

您能否尝试将您的标题修改为以下内容：

```
//We'll be outputting a PDF.
header('Content-type: application/pdf');

//PDF name.
header('Content-Disposition: attachment; filename="'.$file_name.'"'); 
```

然后进行文件读取或任何操作，在我的情况下，我使用 file_get_contents(file_path) + echo 来显示内容并起到了魅力。

# android - 在android中的编辑文本中格式化信用卡

> ID：11790102
> 
> 赞同：76
> 
> 时间：2012-08-03T05:58:25.043
> 
> 标签：android, formatting, android-edittext

如何`EditText`接受格式输入：

```
4digit 4digit 4digit 4digit 
```

我尝试[自定义格式编辑文本输入 android 接受信用卡号](https://stackoverflow.com/questions/5947674/custom-format-edit-text-input-android-to-accept-credit-card-number)，但不幸的是我无法删除空格。只要有空间，我就不能删除它。请帮助我找出问题所在。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2014-02-10T14:28:14.407

在找到多个“OK”的答案后。我转向了一个更好的 TextWatcher，它的设计目的是独立于`TextView`.

TextWatcher 类如下：

```
/**
 * Formats the watched EditText to a credit card number
 */
public static class FourDigitCardFormatWatcher implements TextWatcher {

    // Change this to what you want... ' ', '-' etc..
    private static final char space = ' ';

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        // Remove spacing char
        if (s.length() > 0 && (s.length() % 5) == 0) {
            final char c = s.charAt(s.length() - 1);
            if (space == c) {
                s.delete(s.length() - 1, s.length());
            }
        }
        // Insert char where needed.
        if (s.length() > 0 && (s.length() % 5) == 0) {
            char c = s.charAt(s.length() - 1);
            // Only if its a digit where there should be a space we insert a space
            if (Character.isDigit(c) && TextUtils.split(s.toString(), String.valueOf(space)).length <= 3) {
                s.insert(s.length() - 1, String.valueOf(space));
            }
        }
    }
} 
```

然后像其他任何`TextWatcher`.

```
{
  //...
  mEditTextCreditCard.addTextChangedListener(new FourDigitCardFormatWatcher()); 
} 
```

这将自动删除空间，因此用户在编辑时实际上可以减少击键。

## 警告

如果您正在使用`inputType="numberDigit"`这将禁用 '-' 和 ' ' 字符，所以我建议使用 , `inputType="phone"`。这可以启用其他字符，但只需使用自定义输入过滤器并解决问题。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-12-11T09:03:46.533

[![演示 - 这是如何工作的](../Images/e91913fe2bf0ebf98620b0b90af7a318.png)](https://i.stack.imgur.com/zNb0r.gif)

[github.com 上的示例](https://github.com/Gary111/MaskedEditText)

迟到的答案，但我想它可能对某人有帮助：

```
 cardNumberEditText.addTextChangedListener(new TextWatcher() {

        private static final int TOTAL_SYMBOLS = 19; // size of pattern 0000-0000-0000-0000
        private static final int TOTAL_DIGITS = 16; // max numbers of digits in pattern: 0000 x 4
        private static final int DIVIDER_MODULO = 5; // means divider position is every 5th symbol beginning with 1
        private static final int DIVIDER_POSITION = DIVIDER_MODULO - 1; // means divider position is every 4th symbol beginning with 0
        private static final char DIVIDER = '-';

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // noop
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // noop
        }

        @Override
        public void afterTextChanged(Editable s) {
            if (!isInputCorrect(s, TOTAL_SYMBOLS, DIVIDER_MODULO, DIVIDER)) {
                s.replace(0, s.length(), buildCorrectString(getDigitArray(s, TOTAL_DIGITS), DIVIDER_POSITION, DIVIDER));
            }
        }

        private boolean isInputCorrect(Editable s, int totalSymbols, int dividerModulo, char divider) {
            boolean isCorrect = s.length() <= totalSymbols; // check size of entered string
            for (int i = 0; i < s.length(); i++) { // check that every element is right
                if (i > 0 && (i + 1) % dividerModulo == 0) {
                    isCorrect &= divider == s.charAt(i);
                } else {
                    isCorrect &= Character.isDigit(s.charAt(i));
                }
            }
            return isCorrect;
        }

        private String buildCorrectString(char[] digits, int dividerPosition, char divider) {
            final StringBuilder formatted = new StringBuilder();

            for (int i = 0; i < digits.length; i++) {
                if (digits[i] != 0) {
                    formatted.append(digits[i]);
                    if ((i > 0) && (i < (digits.length - 1)) && (((i + 1) % dividerPosition) == 0)) {
                        formatted.append(divider);
                    }
                }
            }

            return formatted.toString();
        }

        private char[] getDigitArray(final Editable s, final int size) {
            char[] digits = new char[size];
            int index = 0;
            for (int i = 0; i < s.length() && index < size; i++) {
                char current = s.charAt(i);
                if (Character.isDigit(current)) {
                    digits[index] = current;
                    index++;
                }
            }
            return digits;
        }
    }); 
```

这与开始字符串/结束字符串/中间字符串编辑完美配合，*粘贴*也完美。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-10-23T08:34:50.453

我修改了 Chris Jenkins 的答案以使其更加健壮。这样，即使用户编辑了文本的中间部分，间距字符仍然会正确插入（并在错误的位置自动删除）。

要使其正常工作，请确保`EditText`按如下方式设置属性（注意 上的空格`digits`）：

```
android:digits="01234 56789"
android:inputType="number"
android:maxLength="19" 
```

那么这里就是`TextWatcher`你需要的。匿名类也可以设为静态，因为它独立于`EditText`.

```
 yourTextView.addTextChangedListener(new TextWatcher() {
        private static final char space = ' ';

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            // Remove all spacing char
            int pos = 0;
            while (true) {
                if (pos >= s.length()) break;
                if (space == s.charAt(pos) && (((pos + 1) % 5) != 0 || pos + 1 == s.length())) {
                    s.delete(pos, pos + 1);
                } else {
                    pos++;
                }
            }

            // Insert char where needed.
            pos = 4;
            while (true) {
                if (pos >= s.length()) break;
                final char c = s.charAt(pos);
                // Only if its a digit where there should be a space we insert a space
                if ("0123456789".indexOf(c) >= 0) {
                    s.insert(pos, "" + space);
                }
                pos += 5;
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-10-12T02:06:45.443

这是使用正则表达式的更清洁的解决方案。尽管正则表达式可能效率低下，但在这种情况下它们就足够了，因为它正在处理最多 19 个字符的字符串，即使处理发生在每次按键之后。

```
editTxtCardNumber.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int arg1, int arg2,
            int arg3) { }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) { }

    @Override
    public void afterTextChanged(Editable s) {
        String initial = s.toString();
        // remove all non-digits characters
        String processed = initial.replaceAll("\\D", "");
        // insert a space after all groups of 4 digits that are followed by another digit
        processed = processed.replaceAll("(\\d{4})(?=\\d)", "$1 ");
        // to avoid stackoverflow errors, check that the processed is different from what's already
        //  there before setting
        if (!initial.equals(processed)) {
            // set the value
            s.replace(0, initial.length(), processed);
        }

    }

}); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-10-14T14:55:35.337

这是我用于信用卡号码的类。下面的用法示例。

[![在此处输入图像描述](../Images/83b09e772981f36b23032113301a5790.png)](https://media.giphy.com/media/kZoSjtUIgVhTx8AZbB/giphy.gif)

FormattedNumberEditText.kt

```
import android.content.Context
import android.text.Editable
import android.text.InputType
import android.text.TextWatcher
import android.text.method.DigitsKeyListener
import android.util.AttributeSet
import android.widget.EditText

open class FormattedNumberEditText : AppCompatEditText {

    var prefix = ""
        private set

    var groupSeparator = ' '
        private set

    var numberOfGroups = 4
        private set

    var groupLength = 4
        private set

    var inputLength = numberOfGroups * (groupLength + 1) - 1
        private set

    private val digitsKeyListener = DigitsKeyListener.getInstance("0123456789")

    private lateinit var separatorAndDigitsKeyListener: DigitsKeyListener

    private var initCompleted = false

    constructor(context: Context) : super(context) {
        init(null)
    }

    constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {
        init(attrs)
    }

    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {
        init(attrs)
    }

    private fun init(attrs: AttributeSet?) {
        if (attrs != null) {
            val a = context.theme.obtainStyledAttributes(attrs, R.styleable.FormattedNumberEditText, 0, 0)
            prefix = a.getString(R.styleable.FormattedNumberEditText_prefix) ?: prefix
            val separatorStr = a.getString(R.styleable.FormattedNumberEditText_groupSeparator)
            if (!separatorStr.isNullOrEmpty()) {
                groupSeparator = separatorStr[0]
            }
            numberOfGroups = a.getInteger(R.styleable.FormattedNumberEditText_numberOfGroups, numberOfGroups)
            groupLength = a.getInteger(R.styleable.FormattedNumberEditText_groupLength, groupLength)
        }

        inputLength = numberOfGroups * (groupLength + 1) - 1
        separatorAndDigitsKeyListener = DigitsKeyListener.getInstance("0123456789$groupSeparator")

        setText(prefix)
        setSelection(text!!.length)
        inputType = InputType.TYPE_CLASS_NUMBER
        keyListener = digitsKeyListener
        addTextChangedListener(TextChangeListener())

        initCompleted = true
    }

    override fun onSelectionChanged(start: Int, end: Int) {
        if (!initCompleted) {
            return
        }

        // make sure input always starts with the prefix
        if (!text!!.startsWith(prefix)) {
            setText(prefix)
            setSelection(text!!.length, text!!.length)
            return
        }

        // make sure cursor is always at the end of the string
        if (start != text!!.length || end != text!!.length) {
            setSelection(text!!.length)
        } else {
            super.onSelectionChanged(start, end)
        }
    }

    private inner class TextChangeListener : TextWatcher {

        var textBefore = ""
        var enteredText = ""
        var deletedChars = 0

        var listenerEnabled = true

        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
            if (!listenerEnabled) return

            textBefore = text.toString()
            enteredText = ""
            deletedChars = 0
        }

        override fun onTextChanged(text: CharSequence?, start: Int, lengthBefore: Int, lengthAfter: Int) {
            if (!listenerEnabled) return

            if (text == null) {
                deletedChars = textBefore.length
                return
            }

            if (text.length < textBefore.length) {
                deletedChars = textBefore.length - text.length
                return
            }

            enteredText = text.toString().substring(textBefore.length, text.length)
        }

        override fun afterTextChanged(s: Editable?) {
            if (!listenerEnabled) return

            if (s == null) {
                return
            }

            listenerEnabled = false

            if (deletedChars > 0) {
                handleTextChange(s)
            } else {
                if (enteredText.length > 1) {
                    s.replace(s.length - enteredText.length, s.length, "")

                    // Append one char at a time
                    enteredText.forEach {
                        s.append("$it")
                        handleTextChange(s)
                    }
                } else {
                    handleTextChange(s)
                }
            }

            listenerEnabled = true
        }

        fun handleTextChange(s: Editable) {
            if (s.length > inputLength) {
                while (s.length > inputLength) {
                    s.delete(s.length - 1, s.length)
                }
            } else if (s.isNotEmpty() && s.length % (groupLength + 1) == 0) {
                if (s.last() == groupSeparator) {
                    s.delete(s.length - 1, s.length)
                } else if (s.last().isDigit() && s.length < inputLength) {
                    keyListener = separatorAndDigitsKeyListener
                    s.insert(s.length - 1, groupSeparator.toString())
                    keyListener = digitsKeyListener
                }
            }
        }

    }

} 
```

attrs.xml（属于/res/values）

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="FormattedNumberEditText">
        <attr name="prefix" format="string" />
        <attr name="numberOfGroups" format="integer" />
        <attr name="groupLength" format="integer" />
        <attr name="groupSeparator" format="string" />
    </declare-styleable>
</resources> 
```

使用示例

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Credit card number" />

    <com.example.myapplication.FormattedNumberEditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:text="Credit card number (different separator)" />

    <com.example.myapplication.FormattedNumberEditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:groupSeparator="-" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:text="Phone number starting with +370" />

    <com.example.myapplication.FormattedNumberEditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:groupLength="13"
        app:groupSeparator=" "
        app:numberOfGroups="1"
        app:prefix="+370\u0020" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:text="IBAN number starting with LT" />

    <com.example.myapplication.FormattedNumberEditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:groupLength="4"
        app:groupSeparator=" "
        app:numberOfGroups="5"
        app:prefix="LT" />

</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-04-21T13:48:40.670

我正在将我的解决方案添加到列表中。据我所知，它没有缺点。您可以在中间进行编辑，删除空格字符，复制并粘贴到其中等。

为了允许在字符串中的任何位置进行编辑并保持光标位置，遍历 Editable 并一一取出所有空格（如果有）。然后在适当的位置添加新的空格。这将确保光标随着对内容所做的更改而移动。

```
import java.util.LinkedList;

import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;

/**
 * Formats the watched EditText to groups of characters, with spaces between them.
 */
public class GroupedInputFormatWatcher implements TextWatcher {

    private static final char SPACE_CHAR = ' ';
    private static final String SPACE_STRING = String.valueOf(SPACE_CHAR);
    private static final int GROUPSIZE = 4;

    /**
     * Breakdown of this regexp:
     * ^             - Start of the string
     * (\\d{4}\\s)*  - A group of four digits, followed by a whitespace, e.g. "1234 ". Zero or more times.
     * \\d{0,4}      - Up to four (optional) digits.
     * (?<!\\s)$     - End of the string, but NOT with a whitespace just before it.
     * 
     * Example of matching strings:
     *  - "2304 52"
     *  - "2304"
     *  - ""
     */
    private final String regexp = "^(\\d{4}\\s)*\\d{0,4}(?<!\\s)$";
    private boolean isUpdating = false;

    private final EditText editText;

    public GroupedInputFormatWatcher(EditText editText) {
        this.editText = editText;
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        String originalString = s.toString();

        // Check if we are already updating, to avoid infinite loop.
        // Also check if the string is already in a valid format.
        if (isUpdating || originalString.matches(regexp)) {
            return;
        }

        // Set flag to indicate that we are updating the Editable.
        isUpdating = true;

        // First all whitespaces must be removed. Find the index of all whitespace.
        LinkedList<Integer> spaceIndices = new LinkedList <Integer>();
        for (int index = originalString.indexOf(SPACE_CHAR); index >= 0; index = originalString.indexOf(SPACE_CHAR, index + 1)) {
            spaceIndices.offerLast(index);
        }

        // Delete the whitespace, starting from the end of the string and working towards the beginning.
        Integer spaceIndex = null;
        while (!spaceIndices.isEmpty()) {
            spaceIndex = spaceIndices.removeLast();
            s.delete(spaceIndex, spaceIndex + 1);
        }

        // Loop through the string again and add whitespaces in the correct positions
        for(int i = 0; ((i + 1) * GROUPSIZE + i) < s.length(); i++) {
            s.insert((i + 1) * GROUPSIZE + i, SPACE_STRING);
        }

        // Finally check that the cursor is not placed before a whitespace.
        // This will happen if, for example, the user deleted the digit '5' in
        // the string: "1234 567".
        // If it is, move it back one step; otherwise it will be impossible to delete
        // further numbers.
        int cursorPos = editText.getSelectionStart();
        if (cursorPos > 0 && s.charAt(cursorPos - 1) == SPACE_CHAR) {
            editText.setSelection(cursorPos - 1);
        }

        isUpdating = false;
    }
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-03-07T17:05:36.533

不确定**TextWatcher**是否正确使用 - 我们应该使用**InputFilter**

根据 Android 文档，TextWatcher 应该用于外部使用示例：一个 [EditView] 用于密码输入**+** 一个 [TextView] 视图显示“弱”、“强”等...

对于**信用卡格式**，我使用**InputFilter**：

```
public class CreditCardInputFilter implements InputFilter {
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        if (dest != null & dest.toString().trim().length() > 24) return null;
        if (source.length() == 1 && (dstart == 4 || dstart == 9 || dstart == 14))
            return " " + new String(source.toString());
        return null; // keep original
    }
} 
```

并结合长度过滤器（Android SDK）：

```
mEditCardNumber.setFilters(new InputFilter[]{
     new InputFilter.LengthFilter(24),
     new CreditCardInputFilter(),
}); 
```

这可以处理键入和删除数字时的情况。

（！）但这不能处理复制/粘贴整个字符串的情况，这应该在不同的 InputFilter 类中完成

希望能帮助到你 ！

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-03-14T21:59:45.387

我刚刚完成了下一个实现并且对我来说效果很好，即使在`EditText`.

[要点文件](https://gist.github.com/epool/8a071e17436b500ae357)

```
/**
 * Text watcher for giving "#### #### #### ####" format to edit text.
 * Created by epool on 3/14/16.
 */
public class CreditCardFormattingTextWatcher implements TextWatcher {

    private static final String EMPTY_STRING = "";
    private static final String WHITE_SPACE = " ";
    private String lastSource = EMPTY_STRING;

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        String source = s.toString();
        if (!lastSource.equals(source)) {
            source = source.replace(WHITE_SPACE, EMPTY_STRING);
            StringBuilder stringBuilder = new StringBuilder();
            for (int i = 0; i < source.length(); i++) {
                if (i > 0 && i % 4 == 0) {
                    stringBuilder.append(WHITE_SPACE);
                }
                stringBuilder.append(source.charAt(i));
            }
            lastSource = stringBuilder.toString();
            s.replace(0, s.length(), lastSource);
        }
    }

} 
```

**用法：** `editText.addTextChangedListener(new CreditCardFormattingTextWatcher());`

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-02-02T01:35:16.713

即使用户编辑中间字符串，此实现也可确保正确放置间距字符。还支持出现在软键盘上的其他字符（如破折号）；也就是说，用户不能输入它们。可以进行的一项改进：此实现不允许删除字符串中间的空格字符。

```
public class CreditCardTextWatcher implements TextWatcher {

    public static final char SPACING_CHAR = '-'; // Using a Unicode character seems to stuff the logic up.

    @Override
    public void beforeTextChanged(final CharSequence s, final int start, final int count, final int after) { }

    @Override
    public void onTextChanged(final CharSequence s, final int start, final int before, final int count) { }

    @Override
    public void afterTextChanged(final Editable s) {
        if (s.length() > 0) {

            // Any changes we make to s in here will cause this method to be run again.  Thus we only make changes where they need to be made,
            // otherwise we'll be in an infinite loop.

            // Delete any spacing characters that are out of place.
            for (int i=s.length()-1; i>=0; --i) {
                if (s.charAt(i) == SPACING_CHAR  // There is a spacing char at this position ,
                        && (i+1 == s.length()    // And it's either the last digit in the string (bad),
                        || (i+1) % 5 != 0)) {    // Or the position is not meant to contain a spacing char?

                    s.delete(i,i+1);
                }
            }

            // Insert any spacing characters that are missing.
            for (int i=14; i>=4; i-=5) {
                if (i < s.length() && s.charAt(i) != SPACING_CHAR) {
                    s.insert(i, String.valueOf(SPACING_CHAR));
                }
            }
        }
    }
} 
```

与适当的`PasswordTransformationMethod`实现一起很好地屏蔽 CC 数字。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-03-05T18:28:06.537

如果您使用的是 Kotlin，这可能会有所帮助：

```
class CreditCardTextFormatter(
    private var separator: String = " - ",
    private var divider: Int = 5
) : TextWatcher {

    override fun afterTextChanged(s: Editable?) {
        if (s == null) {
            return
        }
        val oldString = s.toString()
        val newString = getNewString(oldString)
        if (newString != oldString) {
            s.replace(0, oldString.length, getNewString(oldString))
        }
    }

    private fun getNewString(value: String): String {

        var newString = value.replace(separator, "")

        var divider = this.divider
        while (newString.length >= divider) {
            newString = newString.substring(0, divider - 1) + this.separator + newString.substring(divider - 1)
            divider += this.divider + separator.length - 1
        }
        return newString
    }

    override fun beforeTextChanged(p0: CharSequence?, p1: Int, p2: Int, p3: Int) {
    }

    override fun onTextChanged(p0: CharSequence?, p1: Int, p2: Int, p3: Int) {
    }
} 
```

XML：

```
<EditText
        android:id="@+id/etCardNumber"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:digits="0123456789- "
        android:inputType="number"
        android:hint="____ - ____ - ____ - ____"
        android:maxLength="25" /> 
```

以及如何使用它：

```
etCardNumber.addTextChangedListener(CreditCardTextFormatter()) 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-08-07T05:21:17.870

我认为无论是中间文本操作还是复制粘贴操作，我的解决方案都可以很好地工作。

请看下面的代码，

```
 class BankNumberTextWatcher implements TextWatcher {
      private int previousCodeLen = 0;

      @Override
      public void beforeTextChanged(CharSequence s, int start, int count, int after) {
      }

      @Override
      public void onTextChanged(CharSequence s, int start, int before, int count) {
      }

      @Override
      public void afterTextChanged(Editable s) {
          if (s.length() > 0) {
              String numbersOnly = s.toString().replaceAll("[^0-9]", "");
              // current code pattern miss-match, then handle cursor position and format the code
              handleEditInput(numbersOnly);
          } else {
              previousCodeLen = 0;
          }
      }

      /**
       * Handle EditText input process for credit card including insert, delete during middle position,
       * end position or copy-paste controller
       *
       * @param numbersOnly the pure number without non-digital characters
       */
      private void handleEditInput(final String numbersOnly) {
          String code = formatNumbersAsCode(numbersOnly);
          int cursorStart = etBankCardNumber.getSelectionStart();
          etBankCardNumber.removeTextChangedListener(this);
          etBankCardNumber.setText(code);
          int codeLen = code.length();
          if (cursorStart != codeLen) {
             // middle-string operation
             if (cursorStart > 0 && cursorStart % 5 == 0) {
                if (codeLen > previousCodeLen) {
                    // insert, move cursor to next
                    cursorStart++;
                } else if (codeLen < previousCodeLen) {
                    // delete, move cursor to previous
                    cursorStart--;
                }
             }
             etBankCardNumber.setSelection(cursorStart);
          } else {
             // end-string operation
             etBankCardNumber.setSelection(codeLen);
          }
          etBankCardNumber.addTextChangedListener(this);
          previousCodeLen = codeLen;
      }

      /**
       * formats credit code like 1234 1234 5123 1234
       *
       * @param s
       * @return
       */
       public String formatNumbersAsCode(CharSequence s) {
          if (TextUtils.isEmpty(s)) {
            return "";
          }
          int len = s.length();
          StringBuilder tmp = new StringBuilder();
          for (int i = 0; i < len; ++i) {
              tmp.append(s.charAt(i));
              if ((i + 1) % 4 == 0 && (i + 1) != len) {
                  tmp.append(" ");
              }
          }
          return tmp.toString();
        }
  } 
```

使 inputType 为 EditText 的编号，以避免布局文件中的其他字符。

希望对您有所帮助。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-08-03T06:12:12.723

请看这个[项目](https://github.com/vekexasia/android-form-edittext)。Android 表单编辑文本是 EditText 的扩展，它为 edittext 带来了数据验证功能

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-01-21T10:21:16.077

经过大量搜索并没有得到任何满意的答案来满足我的需求，我最终编写了自己的函数。

这是一个根据输入的卡类型格式化输入的信用卡详细信息的示例。目前，出于格式化的目的，它负责处理 Visa、MasterCard 和 American Express。

```
 editTxtCardNumber.addTextChangedListener(new TextWatcher() {

        private boolean spaceDeleted;

        @Override
        public void onTextChanged(CharSequence s, int arg1, int arg2,
                int arg3) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            CharSequence charDeleted = s.subSequence(start, start + count);
            spaceDeleted = " ".equals(charDeleted.toString());
        }

        @Override
        public void afterTextChanged(Editable editable) {

            if(editTxtCardNumber.getText().length() > 0 && editTxtCardNumber.getText().charAt(0) == '3') {
                editTxtCardNumber.setFilters(new InputFilter[] { new InputFilter.LengthFilter(Constants.MAX_LENGTH_CARD_NUMBER_AMEX) });

                editTxtCardNumber.removeTextChangedListener(this);
                int cursorPosition = editTxtCardNumber.getSelectionStart();
                String withSpaces = formatTextAmEx(editable);
                editTxtCardNumber.setText(withSpaces);
                editTxtCardNumber.setSelection(cursorPosition + (withSpaces.length() - editable.length()));

                if (spaceDeleted) {
                    editTxtCardNumber.setSelection(editTxtCardNumber.getSelectionStart() - 1);
                    spaceDeleted = false;
                }

                editTxtCardNumber.addTextChangedListener(this);
            } else if(editTxtCardNumber.getText().length() > 0 
                    && (editTxtCardNumber.getText().charAt(0) == '4' || editTxtCardNumber.getText().charAt(0) == '5')) {
                editTxtCardNumber.setFilters(new InputFilter[] { new InputFilter.LengthFilter(Constants.MAX_LENGTH_CARD_NUMBER_VISA_MASTERCARD) });

                editTxtCardNumber.removeTextChangedListener(this);
                int cursorPosition = editTxtCardNumber.getSelectionStart();
                String withSpaces = formatTextVisaMasterCard(editable);
                editTxtCardNumber.setText(withSpaces);
                editTxtCardNumber.setSelection(cursorPosition + (withSpaces.length() - editable.length()));

                if (spaceDeleted) {
                    editTxtCardNumber.setSelection(editTxtCardNumber.getSelectionStart() - 1);
                    spaceDeleted = false;
                }

                editTxtCardNumber.addTextChangedListener(this);
            } else {
                editTxtCardNumber.setFilters(new InputFilter[] { new InputFilter.LengthFilter(Constants.MAX_LENGTH_CARD_NUMBER_VISA_MASTERCARD) });

                editTxtCardNumber.removeTextChangedListener(this);
                int cursorPosition = editTxtCardNumber.getSelectionStart();
                String withSpaces = formatTextVisaMasterCard(editable);
                editTxtCardNumber.setText(withSpaces);
                editTxtCardNumber.setSelection(cursorPosition + (withSpaces.length() - editable.length()));

                if (spaceDeleted) {
                    editTxtCardNumber.setSelection(editTxtCardNumber.getSelectionStart() - 1);
                    spaceDeleted = false;
                }

                editTxtCardNumber.addTextChangedListener(this);
            }
        }
    });

    private String formatTextVisaMasterCard(CharSequence text)
    {
        StringBuilder formatted = new StringBuilder();
        int count = 0;
        for (int i = 0; i < text.length(); ++i)
        {
            if (Character.isDigit(text.charAt(i)))
            {
                if (count % 4 == 0 && count > 0)
                    formatted.append(" ");
                formatted.append(text.charAt(i));
                ++count;
            }
        }
        return formatted.toString();
    }

    private String formatTextAmEx(CharSequence text)
    {
        StringBuilder formatted = new StringBuilder();
        int count = 0;
        for (int i = 0; i < text.length(); ++i)
        {
            if (Character.isDigit(text.charAt(i)))
            {
                if (count > 0 && ((count == 4) || (count == 10))) {
                    formatted.append(" ");
                }
                formatted.append(text.charAt(i));
                ++count;
            }
        }
        return formatted.toString();
    } 
```

除了格式化空格外，我还应用了检查以确保卡号不超过其最大限制，并且当达到最大限制时，通过更改字体来通知用户他已输入所有数字。这是执行上述操作的函数。

```
public void checkCardNoEnteredCorrectly() {
if(editTxtCardNumber.getText().length() > 0 && editTxtCardNumber.getText().charAt(0) == '3') {
    if(editTxtCardNumber.getText().length() == Constants.MAX_LENGTH_CARD_NUMBER_AMEX) {
        editTxtCardNumber.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.amex), null, null, null);
    } else {
        editTxtCardNumber.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.amex), null, null, null);
    }
} else if(editTxtCardNumber.getText().length() > 0 && editTxtCardNumber.getText().charAt(0) == '4') {
    if(editTxtCardNumber.getText().length() == Constants.MAX_LENGTH_CARD_NUMBER_VISA_MASTERCARD) {
        editTxtCardNumber.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.visa), null, null, null);
    } else {
        editTxtCardNumber.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.visa), null, null, null);
    }
} else if(editTxtCardNumber.getText().length() > 0 && editTxtCardNumber.getText().charAt(0) == '5') {
    if(editTxtCardNumber.getText().length() == Constants.MAX_LENGTH_CARD_NUMBER_VISA_MASTERCARD) {
        editTxtCardNumber.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.master_card), null, null, null);
    } else {
        editTxtCardNumber.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.master_card), null, null, null);
    }
} else {
    editTxtCardNumber.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.credit_card_number), null, null, null);
} 
```

}

注意：Constants.java 中的声明如下：

```
public static final int MAX_LENGTH_CARD_NUMBER_VISA_MASTERCARD = 19;
public static final int MAX_LENGTH_CARD_NUMBER_AMEX = 17; 
```

希望能帮助到你！

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-01-17T03:52:19.063

```
int          keyDel;
String       a;
String       a0;
int          isAppent = 0;
final String ch       = " ";

private void initListner() {

    txtCreditNumber.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            boolean flag = true;
            if (s.length() > 19) {
                txtCreditNumber.setText(a0);
                txtCreditNumber.setSelection(txtCreditNumber.getText().length());
                return;
            }
            String eachBlock[] = s.toString().split(ch);
            for(int i = 0; i < eachBlock.length; i++) {
                if (eachBlock[i].length() > 4) {
                    flag = false;
                }
            }
            if (a0.length() > s.toString().length()) {
                keyDel = 1;
            }
            if (flag) {
                if (keyDel == 0) {

                    if (((txtCreditNumber.getText().length() + 1) % 5) == 0) {

                        if (s.toString().split(ch).length <= 3) {
                            isAppent = 1;
                            txtCreditNumber.setText(s + ch);
                            isAppent = 0;
                            txtCreditNumber.setSelection(txtCreditNumber.getText().length());
                            a = txtCreditNumber.getText().toString();
                            return;
                        }
                    }
                    if (isAppent == 0) {
                        String str = s.toString();
                        if (str.lastIndexOf(ch) == str.length() - 1) {
                            str = str.substring(0, str.lastIndexOf(ch));
                            keyDel = 1;
                            txtCreditNumber.setText(str);
                            keyDel = 0;
                            txtCreditNumber.setSelection(txtCreditNumber.getText().length());
                            a = txtCreditNumber.getText().toString();
                            return;
                        }
                    }

                }
                else {
                    String str = s.toString();
                    if (str.length() > 0 && str.lastIndexOf(ch) == str.length() - 1) {
                        str = str.substring(0, str.lastIndexOf(ch));
                        keyDel = 1;
                        txtCreditNumber.setText(str);
                        keyDel = 0;
                        txtCreditNumber.setSelection(txtCreditNumber.getText().length());
                        a = txtCreditNumber.getText().toString();
                        return;
                    }
                    else {
                        a = txtCreditNumber.getText().toString();
                        keyDel = 0;
                    }
                }

            }
            else {
                String str = s.toString();
                str = str.substring(0, str.length() - 1) + ch + str.substring(str.length() - 1, str.length());

                a = str;
                txtCreditNumber.setText(a);
                txtCreditNumber.setSelection(txtCreditNumber.getText().length());
            }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // TODO Auto-generated method stub
            a0 = s.toString();
        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    });
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-01-05T16:55:13.147

你可能已经想通了，但这就是我所做的。我必须重写的唯一方法是 AfterTextChanged。

检查信用卡的形式是否已经有效，防止无限递归的基本情况

如果表单无效，请删除所有空格，然后复制到另一个字符串中，并在适当的地方插入空格。

然后只需将可编辑的内容替换为您的新字符串。

如果您需要特定步骤的代码，请随时询问。

Preethi，你不能删除空格的原因是你不能在 onTextChanged 回调中改变文本。从开发者网站：

public abstract void onTextChanged (CharSequence s, int start, int before, int count) 在 API 级别 1 中添加

调用此方法是为了通知您，在 s 内，从 start 开始的 count 个字符刚刚替换了之前有 length 的旧文本。尝试通过此回调对 s 进行更改是错误的。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-10-23T01:37:43.690

这是一个适当地使用所有功能来做出决定的示例。代码可能会更长一些，但它会更快，因为它主要使用给定值的函数（开始，之前，计数......）。此示例在用户使用退格时每 4 位添加“-”，并删除它们。同样，确保光标位于末尾。

```
public class TextWatcherImplement implements TextWatcher {

private EditText creditCard;
private String beforeText, currentText;
private boolean noAction, addStroke, dontAddChar, deleteStroke;

public TextWatcherImplement(EditText creditCard) {
    // TODO Auto-generated constructor stub
    this.creditCard = creditCard;
    noAction = false;
    addStroke = false;
    dontAddChar = false;
    deleteStroke = false;
}

/* here I save the previous string if the max character had achieved */
@Override
public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    // TODO Auto-generated method stub
    Log.i("TextWatcherImplement", "beforeTextChanged start==" + String.valueOf(start) + " count==" + String.valueOf(count) + " after==" + String.valueOf(after));
    if (start >= 19)
        beforeText = s.toString();
}

/* here I check were we add a character, or delete one. 
if we add character and it is time to add a stroke, then I flag it -> addStroke 
if we delete a character and it time to delete a stroke, I flag it -> deleteStroke
if we are in max character for the credit card, don't add char -> dontAddChar 
*/
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub
    Log.i("TextWatcherImplement", "onTextChanged start==" + String.valueOf(start) + " before==" + String.valueOf(before) + " count==" + String.valueOf(count) + " noAction ==" + String.valueOf(noAction));
    if ( (before < count) && !noAction ) {
        if ( (start == 3) || (start == 8) || (start == 13) ) {
            currentText = s.toString();
            addStroke = true;
        } else if (start >= 19) {
            currentText = s.toString();
            dontAddChar = true;
        }
    } else {
        if ( (start == 4) ||  (start == 9) ||  (start == 14)  ) { //(start == 5) || (start == 10) || (start == 15)
            currentText = s.toString();
            deleteStroke = true;
        }
    }
}

/* noAction flag is when we change the text, the interface is being called again.
the NoAction flag will prevent any action, and prevent a ongoing loop */

@Override
public void afterTextChanged(Editable stext) {
    // TODO Auto-generated method stub
    if (addStroke) {
        Log.i("TextWatcherImplement", "afterTextChanged String == " + stext + " beforeText == " + beforeText + " currentText == " + currentText);
        noAction = true;
        addStroke = false;
        creditCard.setText(currentText + "-");
    } else if (dontAddChar) {
        dontAddChar = false;
        noAction = true;
        creditCard.setText(beforeText);
    } else if (deleteStroke) {
        deleteStroke = false;
        noAction = true;
        currentText = currentText.substring(0, currentText.length() - 1);
        creditCard.setText(currentText);
    } else {
        noAction = false;
        creditCard.setSelection(creditCard.getText().length()); // set cursor at the end of the line.
    }
} 
```

}

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-03-28T10:34:58.297

`TextWatcher`这是一个使用该类的简单且易于定制的解决方案。它可以分配给您`EditText`使用的`addTextChangedListener()`方法。

```
new TextWatcher() {
    /** Formats the Field to display user-friendly separation of the input values. */
    @Override public final void afterTextChanged(final Editable pEditable) {
        // Declare the separator.
        final char lSeparator      = '-';
        // Declare the length of separated text. i.e. (XXXX-XXXX-XXXX)
        final int  lSeparationSize = 4;
        // Declare the count; tracks the number of allowed characters in a row.
              int lCount          = 0;
        // Iterate the Characters.
        for(int i = 0; i < pEditable.length(); i++) {
            // Fetch the current character.
            final char c              = pEditable.charAt(i);
            // Is it a usual character. Here, we permit alphanumerics only.
            final boolean lIsExpected = (Character.isDigit(c) || Character.isLetter(c)) && (c != lSeparator);
            // Is the character expected?
            if(lIsExpected) {
                // Increase the count.
                lCount++;
            }
            else {
                // Is it a separator?
                if(c == lSeparator) {
                    // Reset the count.
                    lCount = 0;
                    // Continue the iteration.
                    continue;
                }
            }
            // Has the count been exceeded? Is there more text coming?
            if(lCount >= (lSeparationSize + 1) && (i < pEditable.length())) {
                // Reset the count.
                lCount = 0;
                // Insert the separator.
                pEditable.insert(i, Character.toString(lSeparator));
                // Increase the iteration count.
                i++;
            }
        }
    }
    /** Unused overrides. */
    @Override public final void beforeTextChanged(final CharSequence pCharSequence, final int pStart, final int pCount, final int pAfter) { }
    @Override public final void onTextChanged(final CharSequence pCharSequence, final int pStart, final int pBefore, final int pCount) { }
} 
```

或者，这里有一个基于[epool 实现的更简洁的](https://stackoverflow.com/users/845296/epool)实现。

```
public final class TextGroupFormattingListener implements TextWatcher {

    /* Member Variables. */
    private final int    mGroupLength;
    private final String mSeparator;
    private       String mSource;

    /** Constructor. */
    public TextGroupFormattingListener(final String pSeparator, final int pGroupLength) {
        // Initialize Member Variables.
        this.mSeparator   = pSeparator;
        this.mGroupLength = pGroupLength;
        this.mSource      = "";
    }

    /** Formats the Field to display user-friendly separation of the input values. */
    @Override public final void afterTextChanged(final Editable pEditable) {
        // Fetch the Source.
        String lSource = pEditable.toString();
        // Has the text changed?
        if (!this.getSource().equals(lSource)) {
            // Remove all of the existing Separators.
            lSource = lSource.replace(this.getSeparator(), "");
            // Allocate a StringBuilder.
            StringBuilder lStringBuilder = new StringBuilder();
            // Iterate across the Source String, which contains the raw user input.
            for(int i = 0; i < lSource.length(); i++) {
                // Have we exceeded the GroupLength?
                if(i > 0 && i % this.getGroupLength() == 0) {
                    // Append the separator.
                    lStringBuilder.append(this.getSeparator());
                }
                // Append the user's character data.
                lStringBuilder.append(lSource.charAt(i));
            }
            // Track changes to the Source.
            this.setSource(lStringBuilder.toString());
            // Replace the contents of the Editable with this new String.
            pEditable.replace(0, pEditable.length(), this.getSource());
        }
    }

    /** Unused overrides. */
    @Override public final void beforeTextChanged(final CharSequence pCharSequence, final int pStart, final int pCount, final int pAfter) { }
    @Override public final void onTextChanged(final CharSequence pCharSequence, final int pStart, final int pBefore, final int pCount)    { }

    public final int getGroupLength() {
        return this.mGroupLength;
    }

    public final String getSeparator() {
        return this.mSeparator;
    }

    private final void setSource(final String pSource) {
        this.mSource = pSource;
    }

    private final String getSource() {
        return this.mSource;
    }

} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-11-06T14:38:37.743

这是我的解决方案。我的评论应该足以让 Android 开发人员了解正在发生的事情，但如果您有任何问题，请随时提问，我会尽我所能回答。

```
private KeyEvent keyEvent;

final TextWatcher cardNumberWatcher = new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence charSequence, int start, int before, int count) {
            // NOT USING
        }

        @Override
        public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
            // NOT USING
        }

        @Override
        public void afterTextChanged(Editable editable) {
            String cardNumbersOnly = editable.toString().replace("-", "");

            /**
            * @PARAM keyEvent
            * This gets called upon deleting a character so you must keep a 
            * flag to ensures this gets skipped during character deletion
            */
            if (cardNumbersOnly.length() >= 4 && keyEvent == null) {
                formatCreditCardTextAndImage(this);
            }

            keyEvent = null;
        }
    };

    cardNumberEditText.addTextChangedListener(cardNumberWatcher);

    /**
    * @LISTENER
    * Must keep track of when the backspace event has been fired to ensure    
    * that the delimiter character and the character before it is deleted 
    * consecutively to avoid the user from having to press backspace twice 
    */
    cardNumberEditText.setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() != KeyEvent.ACTION_UP) {
                // Hold reference of key event for checking within the text watcher
                keyEvent = event;
                String cardNumberString = cardNumberEditText.getText().toString();

                if (keyCode == event.KEYCODE_DEL) {
                    if (cardNumberString.substring(cardNumberString.length() - 1).equals("-")) {
                        // Remove listener to avoid infinite looping
                        cardNumberEditText.removeTextChangedListener(cardNumberWatcher);
                        // Remove hyphen and character before it
                        cardNumberEditText.setText(cardNumberString.substring(0, cardNumberString.length() - 1));
                        // Set the cursor back to the end of the text
                        cardNumberEditText.setSelection(cardNumberEditText.getText().length());
                        // Add the listener back
                        cardNumberEditText.addTextChangedListener(cardNumberWatcher);
                    }
                    else if (cardNumberString.length() < 2) {
                        cardNumberBrandImageView.setImageDrawable(null);
                        cardNumberBrandImageView.setVisibility(View.INVISIBLE);
                    }
                }
            }
            return false;
        }
    });
}

private void formatCreditCardTextAndImage (TextWatcher textWatcher) {
    // Remove to avoid infinite looping
    cardNumberEditText.removeTextChangedListener(textWatcher);

    String cardNumberString = cardNumberEditText.getText().toString();

    /**
    * @CONDITION
    * Append delimiter after every fourth character excluding the 16th
    */
    if ((cardNumberString.length() + 1) % 5 == 0 && !cardNumberString.substring(cardNumberString.length() - 1).equals("-")) {
            cardNumberEditText.setText(cardNumberString + "-");
    }

    // Set the cursor back to the end of the text
    cardNumberEditText.setSelection(cardNumberEditText.getText().length());
    cardNumberEditText.addTextChangedListener(textWatcher);

    /**
    * @CardBrand
    * Is an enum utility class that checks the card numbers 
    * against regular expressions to determine the brand and updates the UI
    */
    if (cardNumberString.length() == 2) {
        switch (CardBrand.detect(cardNumberEditText.getText().toString())) {
            case VISA:
                cardNumberBrandImageView.setImageResource(R.drawable.visa);
                cardNumberBrandImageView.setVisibility(View.VISIBLE);
                card.setBrand(Brand.Visa);
                break;
            case MASTERCARD:
                cardNumberBrandImageView.setImageResource(R.drawable.mastercard);
                cardNumberBrandImageView.setVisibility(View.VISIBLE);
                card.setBrand(Brand.MasterCard);
                break;
            case DISCOVER:
                cardNumberBrandImageView.setImageResource(R.drawable.discover);
                cardNumberBrandImageView.setVisibility(View.VISIBLE);
                card.setBrand(Brand.Discover);
                break;
            case AMERICAN_EXPRESS:
                cardNumberBrandImageView.setImageResource(R.drawable.americanexpress);
                cardNumberBrandImageView.setVisibility(View.VISIBLE);
                card.setBrand(Brand.AmericanExpress);
                break;
            case UNKNOWN:
                cardNumberBrandImageView.setImageDrawable(null);
                cardNumberBrandImageView.setVisibility(View.INVISIBLE);
                card.setBrand(null);
                break;
        }
    }
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-01-14T22:09:18.880

如果有人还在寻找答案，

尝试使用 format-edit-text 库在一行代码中自动格式化文本。这个库使用破折号来定义输入的格式。

```
editText.setFormat("any (dash) format"); 
```

## 如何使用

在 app/build.gradle 中添加 format-edit-text 库依赖

```
implementation 'com.androidwidgets:formatedittext:0.2.0' 
```

在 activity_main.xml 中添加 FormatEditText 视图

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:focusableInTouchMode="true"
    android:focusable="true">

    <com.androidwidgets.formatedittext.widgets.FormatEditText
        android:id="@+id/edit_text_1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:layout_marginLeft="16dp"
        android:layout_marginTop="16dp"
        android:layout_marginEnd="16dp"
        android:layout_marginRight="16dp"
        android:imeOptions="actionSend"
        android:inputType="number"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.0"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

在 MainActivity.java 中将信用卡格式设置为 FormatEditText 视图

```
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final FormatEditText editText1 = findViewById(R.id.edit_text_1);
        editText1.setFormat("---- ---- ---- ----");
    }
} 
```

这将产生以下输出

![](../Images/ecbcd19a782d2a0c11923201c7bf070b.png)

PS：确保将参数 inputType 添加到布局文件中的 FormatEditText 视图中。

```
android:inputType="number" 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-02-27T03:47:22.480

这个解决方案是为 IBAN 实现的，但原理是一样的，我试图纠正上面答案中的所有主要问题，如果您发现错误，请随时说出来，谢谢。

设置 EditText 并限制可以使用的字符：

```
private void setEditTextIBAN(View view) {
    editTextIBAN = (EditText) view.findViewById(R.id.client_iban);
    editTextIBAN.setKeyListener(
            DigitsKeyListener.getInstance("ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890 "));
    editTextIBAN.addTextChangedListener(new IBANTextWatcher());
} 
```

这是 TextWatcher：

```
private class IBANTextWatcher implements TextWatcher {

    // means divider position is every 5th symbol
    private static final int DIVIDER_MODULO = 5;
    private static final int GROUP_SIZE = DIVIDER_MODULO - 1;
    private static final char DIVIDER = ' ';
    private static final String STRING_DIVIDER = " ";
    private String previousText = "";

    private int deleteLength;
    private int insertLength;
    private int start;

    private String regexIBAN = "(\\w{" + GROUP_SIZE + "}" + DIVIDER +
            ")*\\w{1," + GROUP_SIZE + "}";
    private Pattern patternIBAN = Pattern.compile(regexIBAN);

    @Override
    public void beforeTextChanged(final CharSequence s, final int start, final int count, final int after) {
        this.previousText = s.toString();
        this.deleteLength = count;
        this.insertLength = after;
        this.start = start;
    }

    @Override
    public void onTextChanged(final CharSequence s, final int start, final int before, final int count) {

    }

    @Override
    public void afterTextChanged(final Editable s) {
        String originalString = s.toString();

        if (!previousText.equals(originalString) &&
                !isInputCorrect(originalString)) {
            String newString = previousText.substring(0, start);
            int cursor = start;

            if (deleteLength > 0 && s.length() > 0 &&
                    (previousText.charAt(start) == DIVIDER ||
                            start == s.length())) {
                newString = previousText.substring(0, start - 1);
                --cursor;
            }

            if (insertLength > 0) {
                newString += originalString.substring(start, start + insertLength);
                newString = buildCorrectInput(newString);
                cursor = newString.length();
            }

            newString += previousText.substring(start + deleteLength);
            s.replace(0, s.length(), buildCorrectInput(newString));

            editTextIBAN.setSelection(cursor);
        }
    }

    /**
     * Check if String has the white spaces in the correct positions, meaning
     * if we have the String "123456789" and there should exist a white space
     * every 4 characters then the correct String should be "1234 5678 9".
     *
     * @param s String to be evaluated
     * @return true if string s is written correctly
     */
    private boolean isInputCorrect(String s) {
        Matcher matcherDot = patternIBAN.matcher(s);
        return matcherDot.matches();
    }

    /**
     * Puts the white spaces in the correct positions,
     * see the example in {@link IBANTextWatcher#isInputCorrect(String)}
     * to understand the correct positions.
     *
     * @param s String to be corrected.
     * @return String corrected.
     */
    private String buildCorrectInput(String s) {
        StringBuilder sbs = new StringBuilder(
                s.replaceAll(STRING_DIVIDER, ""));

        // Insert the divider in the correct positions
        for (int i = GROUP_SIZE; i < sbs.length(); i += DIVIDER_MODULO) {
            sbs.insert(i, DIVIDER);
        }

        return sbs.toString();
    }
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-01-22T23:16:01.457

以上答案都不适合我。我创建了一个解决 start-string/end-string/mid-string 问题的解决方案。复制和粘贴也应该可以正常工作。这支持万事达卡、维萨卡和美国运通卡。您可以更改分隔符。如果您不需要付款方式类型，只需将其删除。不过是 Kotlin。这个想法很简单。每次文本更改时，我都会删除所有分隔符并根据格式重新添加它们。解决了 start-string/mid-string 问题。那么唯一的问题是您需要在添加分隔符后计算出正确的文本位置。

```
fun addCreditCardNumberTxtWatcher(et: EditText, separator: Char, paymentMethodType: PaymentMethodType): TextWatcher {
    val tw = object : TextWatcher {
        var mBlock = false
        override fun afterTextChanged(s: Editable) {
        }
        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
              Logger.d("_debug", "s: $s, start: $start, count: $count, after $after")
        }
        override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
            if (mBlock)
                return
            var lastPos = et.selectionStart
            val oldStr = et.text.toString().replace(separator.toString(), "", false)
            var newFormattedStr = ""
            if (before > 0) {
                if (lastPos > 0 && et.text.toString()[lastPos - 1] == separator) lastPos--
            }
            Logger.d("_debug", "lastPos: $lastPos, s: $s, start: $start, before: $before, count $count")
            mBlock = true
            oldStr.forEachIndexed { i, c ->
                when (paymentMethodType) {
                    PaymentMethodType.MASTERCARD, PaymentMethodType.VISA -> {
                        if (i > 0 && i % 4 == 0) {
                            newFormattedStr += separator
                        }
                    }
                    PaymentMethodType.AMERICAN_EXPRESS -> {
                        if (i == 4 || i == 10 || i == 15) {
                            newFormattedStr += separator
                        }
                    }
                }
                newFormattedStr += c
            }
            et.setText(newFormattedStr)
            if (before == 0) {
                if (et.text.toString()[lastPos - 1] == separator) lastPos++
            }
            et.setSelection(lastPos)
            mBlock = false
        }
    }
    et.addTextChangedListener(tw)
    return tw
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-03-11T06:29:33.080

我知道这个问题有点老了，但我需要为 IBAN 实施这个问题，并且对给定的答案不满意。所以我为此写了一些代码。但它以“模式”和“分隔符”作为参数，因此它也可以用于信用卡号码。

这是扩展的文本观察器类。

```
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;

public class IbanTextWatcher implements TextWatcher {

    private int[] pattern;
    private String divider;
    private String before;
    private EditText field;
    private boolean dividerDeleted;

    public IbanTextWatcher(int[] pattern, String divider, EditText field) {
        this.divider = divider;
        this.pattern = pattern;
        this.field = field;
    }

    @Override
    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        before = charSequence.toString();

        if (!String.valueOf(charSequence).equals("") && charSequence.length() > i) {
            if (String.valueOf(before.charAt(i)).equals(getDivider())) {
                dividerDeleted = true;
            } else {
                dividerDeleted = false;
            }
        }
    }

    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

    }

    @Override
    public void afterTextChanged(Editable editable) {

        String input = editable.toString().replaceAll("\\s", "");
        StringBuilder output = new StringBuilder();
        boolean error = false;
        int currentIndex = 0;
        int cursorPosition = getField().getSelectionStart();
        int lengthBefore;
        int currentPatternMember = 0;

        //prevent user to delete the divider
        if (dividerDeleted && cursorPosition != getField().getText().length()) {
            getField().setText(getBefore());
            getField().setSelection(cursorPosition + 1);
            return;
        } else if (input.equals(getBefore().replaceAll("\\s", ""))) {
            return;
        }

        for (int i = 0; i < getPattern().length; i++) {
            error = false;
            currentPatternMember = getPattern()[i];
            try {
                output.append(input.substring(currentIndex, currentIndex + currentPatternMember));
            } catch (StringIndexOutOfBoundsException e) {
                error = true;
            }

            if (!error) {
                if (i != getPattern().length - 1) {
                    output.append(getDivider());
                }
                currentIndex += currentPatternMember;
            } else {
                break;
            }
        }

        if (error) {
            output.append(input.substring(currentIndex, input.length()));
        } 

        cursorPosition = getField().getSelectionStart();
        lengthBefore = getBefore().length();
        getField().setText(output.toString());

        if (cursorPosition != lengthBefore && cursorPosition != lengthBefore + 1) {
            getField().setSelection(cursorPosition);
        } else {
            getField().setSelection(getField().getText().length());
        }
    }

    public int[] getPattern() {
        return pattern;
    }

    public String getDivider() {
        return divider;
    }

    public String getBefore() {
        return before;
    }

    public EditText getField() {
        return field;
    }
} 
```

这就是我使用它的方式：

```
int[] pattern = {2,4,4,4,4,4,2}; // 
iban.addTextChangedListener(new IbanTextWatcher(pattern, " ", iban)); //here iban is my edittext field 
```

顺便说一句，我在 xml 中设置了字段的最大长度。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-12-19T05:27:09.097

```
class XYZ : TextWatcher {

private val formatSymbols = DecimalFormatSymbols(Locale.getDefault())

private lateinit var formatter: DecimalFormat

override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
    .
    .
    formatSymbols.groupingSeparator = ' '
    formatter = DecimalFormat("####,####", formatSymbols)
    .
    .
}

override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)
    editText.addTextChangedListener(this)
}

override fun afterTextChanged(s: Editable?) {
    if (editText.error != null) {
        editText.error = null
    }
    editText.removeTextChangedListener(this)
    try {
        var originalString = s.toString()
        if (originalString.contains(" ")) {
            originalString = originalString.replace(" ", "", true)
        }
        val longVal: Long? = originalString.toLong()
        val formattedString = formatter.format(longVal)
        editText.setText(formattedString)
        editText.setSelection(editText.text.length)
    } catch (error: NumberFormatException) {
        // Print Error Or Do Whatever you want.
    }
    editText.addTextChangedListener(this)
}

} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-09-01T08:29:30.673

**1.复制粘贴这个类**

```
class EditTextForCards @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = androidx.appcompat.R.attr.editTextStyle
) : AppCompatEditText(context, attrs, defStyleAttr) {

    private var mCCPatterns = SparseArray<Pattern>()
    private var mSeparator: Separator = Separator.NONE
    private var mDrawableGravity: Gravity? = null/*Gravity.END*/
    private var isValidCard: Boolean = false
    private var mCurrentDrawableResId = Card.UNKNOWN.drawableRes

    val textWithoutSeparator
        get() = if (mSeparator == Separator.NONE) {
            text.toString()
        } else {
            text.toString().replace(mSeparator.toRegex(), "")
        }

    val isCardValid: Boolean
        get() = textWithoutSeparator.length > 12 && isValidCard

    val cardType: Card
        get() = Card.from(mCurrentDrawableResId)

    enum class Separator(private val stringValue: String) {
        NONE(""), SPACES(" "), DASHES("-");

        override fun toString() = stringValue

        internal fun toRegex() = stringValue.toRegex()

        internal val length
            get() = stringValue.length
    }

    enum class Gravity {
        START, END, LEFT, RIGHT
    }

    enum class Card(internal val value: Int, @field:DrawableRes internal val drawableRes: Int) {
        VISA(1, R.drawable.ic_visa),
        MASTERCARD(2, R.drawable.ic_mastercard),
        AMEX(4, R.drawable.amex),
        DISCOVER(8, R.drawable.discover),
        UNKNOWN(-1, R.drawable.ic_visa);

        companion object {
            internal fun from(@DrawableRes drawableRes: Int): Card {
                for (card in values()) {
                    if (card.drawableRes == drawableRes) {
                        return card
                    }
                }
                return UNKNOWN
            }
        }
    }

    private val textWatcher = object : TextWatcher {
        override fun afterTextChanged(s: Editable?) {}

        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}

        override fun onTextChanged(
            text: CharSequence,
            start: Int,
            lengthBefore: Int,
            lengthAfter: Int
        ) {
            val textWithoutSeparator = textWithoutSeparator

            var mDrawableResId = 0
            for (i in 0 until mCCPatterns.size()) {
                val key = mCCPatterns.keyAt(i)

                val p = mCCPatterns.get(key)

                val m = p.matcher(textWithoutSeparator)
                isValidCard = m.find()
                if (isValidCard) {
                    mDrawableResId = key
                    break
                }
            }
//            if (mDrawableResId != 0 && mDrawableResId != mCurrentDrawableResId) {
//                mCurrentDrawableResId = mDrawableResId
//            } else if (mDrawableResId == 0) {
//                mCurrentDrawableResId = Card.UNKNOWN.drawableRes
//            }
//            addDrawable()
            addSeparators()
        }
    }

    init {
        setDisabledCards()
        inputType = InputType.TYPE_CLASS_PHONE
        setSeparator(Separator.NONE)
//        setDrawableGravity(Gravity.END)
        attrs?.let { applyAttributes(it) }
        addTextChangedListener(textWatcher)
    }

    private fun applyAttributes(attrs: AttributeSet) {
        val a = context.theme.obtainStyledAttributes(
            attrs,
            R.styleable.EditTextForCards,
            0, 0
        )
        try {
            setSeparator(
                Separator.values()[a.getInt(
                    R.styleable.EditTextForCards_separator,
                    Separator.NONE.ordinal
                )]
            )
            setDisabledCardsInternal(a.getInt(R.styleable.EditTextForCards_disabledCards, 0))
            setDrawableGravity(
                Gravity.values()[a.getInt(
                    R.styleable.EditTextForCards_drawableGravity,
                    Gravity.END.ordinal
                )]
            )
        } finally {
            a.recycle()
        }
    }

    private fun addDrawable() {
        var currentDrawable = ContextCompat.getDrawable(context, mCurrentDrawableResId)
        if (currentDrawable != null && error.isNullOrEmpty()) {
            currentDrawable = resize(currentDrawable)
            when (mDrawableGravity) {
                Gravity.START -> setDrawablesRelative(start = currentDrawable)
                Gravity.RIGHT -> setDrawables(right = currentDrawable)
                Gravity.LEFT -> setDrawables(left = currentDrawable)
                else -> setDrawablesRelative(end = currentDrawable)
            }
        }
    }

    private fun addSeparators() {
        val text = text.toString()
        if (mSeparator != Separator.NONE) {
            if (text.length > 4 && !text.matches("(?:[0-9]{4}$mSeparator)+[0-9]{1,4}".toRegex())) {
                val sp = StringBuilder()
                val caretPosition = selectionEnd
                val segments = splitString(text.replace(mSeparator.toRegex(), ""))
                for (segment in segments) {
                    sp.append(segment).append(mSeparator)
                }
                setText("")
                append(sp.delete(sp.length - mSeparator.length, sp.length).toString())
                if (caretPosition < text.length)
                    setSelection(caretPosition)
            }
        }
    }

    private fun removeSeparators() {
        var text = text.toString()
        text = text.replace(" ".toRegex(), "").replace("-".toRegex(), "")
        setText("")
        append(text)
    }

    private fun splitString(s: String): Array<String?> {
        val arrayLength = ceil(s.length / 4.toDouble()).toInt()
        val result = arrayOfNulls<String>(arrayLength)

        var j = 0
        val lastIndex = result.size - 1
        for (i in 0 until lastIndex) {
            result[i] = s.substring(j, j + 4)
            j += 4
        }
        result[lastIndex] = s.substring(j)

        return result
    }

    /*@Deprecated("Please use the method that accepts a Separator enum instead.", ReplaceWith("this.setSeparator(Separator.)"))
    fun setSeparator(@IntRange(from = 0, to = 2) separator: Int) {
        require(!(separator > 2 || separator < 0)) {
            "The separator has to be one of the following:" +
                    "NO_SEPARATOR." +
                    "SPACES_SEPARATOR." +
                    "DASHES_SEPARATOR."
        }
        setSeparator(Separator.values()[separator])
    }*/

    /**
     * Use this method to set the separator style.
     * The default separator is [Separator.NONE].
     *
     * @param separator the style of the separator.
     */
    fun setSeparator(separator: Separator) {
        mSeparator = separator
        if (mSeparator != Separator.NONE) {
            filters = arrayOf<InputFilter>(InputFilter.LengthFilter(23))
            keyListener = DigitsKeyListener.getInstance("0123456789$mSeparator")
            addSeparators()
        } else {
            filters = arrayOf<InputFilter>(InputFilter.LengthFilter(19))
            keyListener = DigitsKeyListener.getInstance("0123456789")
            removeSeparators()
        }
    }

    /**
     * Use this method to set the location of the card drawable.
     * The default gravity is [Gravity.END].
     *
     * @param gravity the drawable location.
     */
    fun setDrawableGravity(gravity: Gravity) {
        mDrawableGravity = gravity
        addDrawable()
    }

    private fun setDisabledCardsInternal(disabledCards: Int) {
        val cards = ArrayList<Card>()
        if (containsFlag(disabledCards, Card.VISA.value)) {
            cards.add(Card.VISA)
        }
        if (containsFlag(disabledCards, Card.MASTERCARD.value)) {
            cards.add(Card.MASTERCARD)
        }
        /*if (containsFlag(disabledCards, Card.AMEX.value)) {
            cards.add(Card.AMEX)
        }
        if (containsFlag(disabledCards, Card.DISCOVER.value)) {
            cards.add(Card.DISCOVER)
        }*/
        setDisabledCards(*cards.toTypedArray())
    }

    @Deprecated(
        "Please use the method that accepts an array of Cards instead.",
        ReplaceWith("this.setDisabledCards(cards)")
    )
    fun setDisabledCards(disabledCards: Int) {
        setDisabledCardsInternal(disabledCards)
    }

    /**
     * Use this method to set which cards are disabled.
     * By default all supported cards are enabled.
     *
     * @param cards the cards to be disabled.
     */
    fun setDisabledCards(vararg cards: Card) {
        var disabledCards = 0
        for (card in cards) {
            disabledCards = disabledCards or card.value
        }
        mCCPatterns.clear()
        if (!containsFlag(disabledCards, Card.VISA.value)) {
            mCCPatterns.put(Card.VISA.drawableRes, Pattern.compile("^4[0-9]{1,12}(?:[0-9]{6})?$"))
        }
        if (!containsFlag(disabledCards, Card.MASTERCARD.value)) {
            mCCPatterns.put(Card.MASTERCARD.drawableRes, Pattern.compile("^5[1-5][0-9]{0,14}$"))
        }
        /*if (!containsFlag(disabledCards, Card.AMEX.value)) {
            mCCPatterns.put(Card.AMEX.drawableRes, Pattern.compile("^3[47][0-9]{0,13}$"))
        }
        if (!containsFlag(disabledCards, Card.DISCOVER.value)) {
            mCCPatterns.put(Card.DISCOVER.drawableRes, Pattern.compile("^6(?:011|5[0-9]{1,2})[0-9]{0,12}$"))
        }*/
        textWatcher.onTextChanged("", 0, 0, 0)
    }

    private fun containsFlag(flagSet: Int, flag: Int): Boolean {
        return flagSet or flag == flagSet
    }

    override fun onDraw(canvas: Canvas) {
        super.onDraw(canvas)
        var noDrawablesVisible = true
        for (drawable in compoundDrawables) {
            if (drawable != null) {
                noDrawablesVisible = false
                break
            }
        }
        if (noDrawablesVisible) {
            addDrawable()
        }
    }

    private fun resize(image: Drawable) =
        when (val height = measuredHeight - (paddingTop + paddingBottom)) {
            in 1 until image.intrinsicHeight -> {
                val bitmap = (image as BitmapDrawable).bitmap
                val ratio = image.getIntrinsicWidth().toFloat() / image.intrinsicHeight.toFloat()
                val resizedBitmap =
                    Bitmap.createScaledBitmap(bitmap, (height * ratio).toInt(), height, false)
                resizedBitmap.density = Bitmap.DENSITY_NONE
                BitmapDrawable(resources, resizedBitmap)
            }
            in Int.MIN_VALUE..0 -> null
            else -> image
        }

    private fun setDrawablesRelative(
        start: Drawable? = null,
        top: Drawable? = null,
        end: Drawable? = null,
        bottom: Drawable? = null
    ) =
        /*TextViewCompat.setCompoundDrawablesRelativeWithIntrinsicBounds(this, start, top, end, bottom)*/
        TextViewCompat.setCompoundDrawablesRelativeWithIntrinsicBounds(this, null, null, null, null)

    private fun setDrawables(
        left: Drawable? = null,
        top: Drawable? = null,
        right: Drawable? = null,
        bottom: Drawable? = null
    ) =
        /*setCompoundDrawablesWithIntrinsicBounds(left, top, right, bottom)*/
        setCompoundDrawablesWithIntrinsicBounds(null, null, null, null)

    companion object {
        @Deprecated("This constant has been replace with an enum.", ReplaceWith("Separator.NONE"))
        const val NO_SEPARATOR = 0

        @Deprecated("This constant has been replace with an enum.", ReplaceWith("Separator.SPACES"))
        const val SPACES_SEPARATOR = 1

        @Deprecated("This constant has been replace with an enum.", ReplaceWith("Separator.DASHES"))
        const val DASHES_SEPARATOR = 2

        @Deprecated("This constant has been replace with an enum.", ReplaceWith("null"))
        const val NONE = 0

        @Deprecated("This constant has been replace with an enum.", ReplaceWith("Card.VISA"))
        const val VISA = 1

        @Deprecated("This constant has been replace with an enum.", ReplaceWith("Card.MASTERCARD"))
        const val MASTERCARD = 2

        @Deprecated("This constant has been replace with an enum.", ReplaceWith("Card.AMEX"))
        const val AMEX = 4

        @Deprecated("This constant has been replace with an enum.", ReplaceWith("Card.DISCOVER"))
        const val DISCOVER = 8
    }
} 
```

**2.粘贴此样式**

```
<declare-styleable name="EditTextForCards">
    <attr name="separator" format="enum">
        <enum name="no_separator" value="0" />
        <enum name="spaces" value="1" />
        <enum name="dashes" value="2" />
    </attr>
    <attr name="disabledCards">
        <flag name="none" value="0" />
        <flag name="visa" value="1" />
        <flag name="mastercard" value="2" />
        <flag name="amex" value="4" />
        <flag name="discover" value="8" />
    </attr>
    <attr name="drawableGravity">
        <enum name="start" value="0" />
        <enum name="end" value="1" />
        <enum name="left" value="2" />
        <enum name="right" value="3" />
    </attr>
</declare-styleable> 
```

**3.在你的布局文件中，使用它**

```
<EditTextForCards
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="@dimen/dp_5"
        android:digits="0123456789 "
        android:hint="@string/card_number"
        android:padding="@dimen/dp_20"
        android:textColor="@android:color/white"
        android:textColorHint="@android:color/white"
        android:textSize="@dimen/sp_16"
        app:separator="spaces" /> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-09-03T12:22:56.527

```
 private class TextWatcherIBAN implements TextWatcher {

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        @Override
        public void afterTextChanged(Editable s) {
            textInputEditText.removeTextChangedListener(this);
            formatIBANEditText(textInputEditText);
            textInputEditText.addTextChangedListener(this);

        }
    }

public void formatIBANEditText(TextInputEditText editText) {
    String decimalAmount = editText.getText().toString();
    int selection = editText.getSelectionEnd() == decimalAmount.length() ? -1 : editText.getSelectionEnd();
    decimalAmount = formatIBAN(decimalAmount);
    editText.setText(decimalAmount);

    if (selection != -1) {
        editText.setSelection(selection);
    } else {
        editText.setSelection(decimalAmount.length());
    }

}

public String formatIBAN(String text) {
    return formatterIBAN(new StringBuilder(text));
}

private String formatterIBAN(StringBuilder text) {
    int group = text.toString().length() / 5;
    int spaceCount = getSpaceCount(text);
    if (spaceCount < group) {
        return formatterIBAN(text.insert(4 + 5 * spaceCount, space));
    } else {
        return text.toString();
    }
}

private int getSpaceCount(StringBuilder text) {
    int spaceCount = 0;
    for (int index = 0; index < text.length(); index++) {
        if (text.charAt(index) == space.charAt(0)) {
            spaceCount++;
        }
    }
    return spaceCount;
}

textInputEditText.addTextChangedListener(new TextWatcherIBAN()); 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-06-12T16:06:32.927

在您的布局中：

```
 <android.support.design.widget.TextInputEditText
        android:id="@+id/et_credit_card_number"
        android:digits=" 1234567890"
        android:inputType="number"
        android:maxLength="19"/> 
```

在这里，`TextWachter`它在 16 位信用卡的每 4 位数字上设置一个空格。

```
class CreditCardFormatWatcher : TextWatcherAdapter() {

    override fun afterTextChanged(s: Editable?) {
        if (s == null || s.isEmpty()) return

        s.forEachIndexed { index, c ->
            val spaceIndex = index == 4 || index == 9 || index == 14
            when {
                !spaceIndex && !c.isDigit()     -> s.delete(index, index + 1)
                spaceIndex && !c.isWhitespace() -> s.insert(index, " ")
            }
        }

        if (s.last().isWhitespace())
            s.delete(s.length - 1, s.length)
    }

} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-08-15T03:52:17.503

这是我基于[Igor Tyulkanov 的想法的](https://stackoverflow.com/a/34219645/3040498)实现，**它有一个小的改进来解决光标位置问题**

```
class CardNumbersInputWatcher(private val editText: EditText) : TextWatcher {
  companion object {
    private const val TOTAL_SYMBOLS = 19
    private const val DIVIDER_DISTANCE = 4
    private const val DIVIDER = ' '
  }

  override fun afterTextChanged(s: Editable) {
    if (!isInputCorrect(s, TOTAL_SYMBOLS, DIVIDER_DISTANCE, DIVIDER)) {
      val beforeCurPos = editText.selectionStart
      val beforeLength = s.length
      s.replace(0, s.length, buildCorrectString(s, TOTAL_SYMBOLS, DIVIDER_DISTANCE, DIVIDER))
      if (beforeLength > TOTAL_SYMBOLS && beforeCurPos <= s.length && editText.selectionStart < beforeCurPos) {
        editText.setSelection(beforeCurPos)
      }
    }
  }

  override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) = Unit
  override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) = Unit
}

private fun isInputCorrect(s: Editable, totalSymbols: Int, dividerDistance: Int, divider: Char): Boolean {
  if (s.length > totalSymbols) {
    return false
  }
  return s.withIndex().all { (index, c) ->
    if (index != 0 && ((index + 1) % (dividerDistance + 1) == 0)) {
      // it should be divider
      c == divider
    } else {
      c.isDigit()
    }
  }
}

private fun buildCorrectString(s: Editable, totalSymbols: Int, dividerDistance: Int, divider: Char): String {
  return buildString {
    for (c in s) {
      if (length >= totalSymbols) break
      if (!c.isDigit()) continue
      if (length > 0 && ((length + 1) % (dividerDistance + 1)) == 0) append(divider)
      append(c)
    }
  }
} 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2020-02-20T13:31:55.783

```
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;`

public class CreditCard implements TextWatcher
{
    EditText editText;

    public CreditCard(EditText editText)
    {
        this.editText = editText;
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        try
        {
            editText.removeTextChangedListener(this);

            String str = editText.getText().toString().replaceAll("-", "");

            editText.setText(setDash(str));

            editText.setSelection(editText.getText().toString().length());

            editText.addTextChangedListener(this);
            return;
        }

        catch (Exception ex)
        {
            ex.printStackTrace();
            editText.addTextChangedListener(this);
        }

    }

    public static String setDash(String value)
    {
        String str = "";
        int j = 0;

        for (int i = 0;i<value.length(); i++)
        {
            j++;

            if (j == 5)
            {
                str = str+"-";
                j = 1;
            }

            str = str + value.charAt(i);
        }

        return str;

    }

    public static String trimDashOfString(String string)
    {
        if (string.contains("-")) {
            return string.replace("-", "");
            } else {
            return string;
        }

    }
} 
```

# c# - 读取 .txt 文件并显示文件中的数字

> ID：11790103
> 
> 赞同：0
> 
> 时间：2012-08-03T05:58:26.903
> 
> 标签：c#, file

我正在尝试使用 c# 读取 .txt 文件并显示其内容，但我收到错误`IndexOutOfRangeException`，错误代码为.txt `0xc000013a`。

这是我的代码：

```
static void Main(string[] args)
    {
        StreamReader sStreamReader = new StreamReader("d:\\TEST.txt");
        while (!sStreamReader.EndOfStream)
        {
            string sLine = "";
            if (sLine != null)
            {
                sLine = sStreamReader.ReadLine();
                if (sLine != null)
                {
                    string[] rows = sLine.Split(",".ToCharArray());
                    double a = Convert.ToDouble(rows[1]);
                    Console.Write(a);
                    int b = Convert.ToInt32(rows[3]);
                    Console.WriteLine(b);
                    Console.WriteLine();
                }
            }
        }
    } 
```

我的文本文件如下：

```
1,2,3,4,5,6,7

1,2,3,4,5,6,7

5,6,2,7,3,8,4

3,4,3,4,3

5,3,23,12

12,30000,12,99 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:11:26.567

我会将其更改为以下内容：

```
static void Main(string[] args)
    {
        // StreamReader is IDisposable which should be wrapped in a using statement
        using (StreamReader reader = new StreamReader(@"d:\TEST.txt")) 
        {
            while (!reader.EndOfStream)
            {
                string line = reader.ReadLine();
                // make sure we have something to work with
                if (String.IsNullOrEmpty(line)) continue;

                string[] cols = line.Split(',');
                // make sure we have the minimum number of columns to process
                if (cols.Length < 4) continue;

                double a = Convert.ToDouble(cols[1]);
                Console.Write(a);
                int b = Convert.ToInt32(cols[3]);
                Console.WriteLine(b);
                Console.WriteLine();
            }
        }
    } 
```

这里有一些注意事项：

1.  StreamReader 实现 IDisposable，因此您应该将它包装在 using 子句中，以便正确处理它。
2.  不要命名诸如“sLine”之类的东西。这种形式的匈牙利语通常被认为是非常糟糕的做法。甚至微软也说不要这样做。
3.  您正在处理列，而不是行。所以应该适当地命名该变量。
4.  在盲目访问它们之前，请始终进行测试以确保您拥有所需的所有列。
5.  通常，我不会使用 Convert.ToDouble 或 Convert.ToInt32。使用 TryParse 确保它能够转换要安全得多。如果 cols[1] 和 cols[3] 有非数字数据，您的代码将会崩溃。
6.  您可以在字符串前面使用@ 符号来告诉编译器它不需要转义。
7.  简单地“继续”循环而不是将其包装在 if 语句中要干净得多。
8.  将 String 变量设置为空白字符串，然后立即将其设置为其他值会导致空白在整个范围内保留在内存中。换句话说，它在浪费内存。诚然，在这种情况下，它是一种微优化，但始终使用最佳实践并没有什么坏处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:14:58.180

这是您可以更简单的方法：

```
 string[] lines = File.ReadAllLines("d:\\TEST.txt");
        foreach (var line in lines.Where(line => line.Length > 0))
        {
            string[] numbers = line.Split(',');

            // It checks whether numbers.Length is greater than 
            // 3 because if maximum index used is 3 (numbers[3]) 
            // than the array has to contain at least 4 elements
            if (numbers.Length > 3)
            {
                double a = Convert.ToDouble(numbers[1]);
                Console.Write(a);
                int b = Convert.ToInt32(numbers[3]);
                Console.Write(b);
                Console.WriteLine();
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:00:32.393

`row.Length`您是否考虑过在访问之前检查`row[1]`和`row[3]`

我怀疑你的空行是问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T06:08:40.297

您应该考虑使用：

```
if (!string.IsNullOrEmpty(sLine)) 
```

代替

```
if (sLine != null) 
```

你有这个例外，因为有些行是空的。

但是，在使用 StreamReader 时，您应该使用以下方式编写代码：

```
using(var reader = new StreamReader(@"d:\\TEST.txt"))
{
    string line;
    while ((line= reader.ReadLine()) != null)
    {
        if (string.IsNullOrEmpty(line)) continue;

        var rows = line.Split(",".ToCharArray());
        var a = Convert.ToDouble(rows[1]);
        Console.Write(a);
        var b = Convert.ToInt32(rows[3]);
        Console.WriteLine(b);
        Console.WriteLine();
    }
} 
```

问候，

凯文

# android - 如何在 android 的 sqlite 数据库中存储（位图图像 ）和检索图像？

> ID：11790104
> 
> 赞同：66
> 
> 时间：2012-08-03T05:58:33.390
> 
> 标签：android, image, sqlite, bitmapimage

在我的项目中，我需要将图像存储到 sqlite 数据库中，还需要检索它以显示在我的 android 模拟器中。当我在解码编码字符串后直接显示它时，我使用套接字从 Java 类获得，图像显示在那里。但是，当我使用数据类型 blob 将字符串的字节数组代码存储到 sqlite 数据库中，然后使用`getblob()`包含不同值的函数再次检索它时，会发生此错误：

```
JAVA.lang.NULLPointerException: Factory returns null. 
```

我需要建议将位图图像存储到 sqlite 数据库中，并从 sqlite 数据库中检索它。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-08-03T06:09:46.287

**设置数据库**

```
public class DatabaseHelper extends SQLiteOpenHelper {
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "database_name";

    // Table Names
    private static final String DB_TABLE = "table_image";

    // column names
    private static final String KEY_NAME = "image_name";
    private static final String KEY_IMAGE = "image_data";

    // Table create statement
    private static final String CREATE_TABLE_IMAGE = "CREATE TABLE " + DB_TABLE + "("+ 
                       KEY_NAME + " TEXT," + 
                       KEY_IMAGE + " BLOB);";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        // creating table
        db.execSQL(CREATE_TABLE_IMAGE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // on upgrade drop older tables
        db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE);

        // create new table
        onCreate(db);
    }
} 
```

**插入数据库：**

```
public void addEntry( String name, byte[] image) throws SQLiteException{
    SQLiteDatabase database = this.getWritableDatabase();
    ContentValues cv = new  ContentValues();
    cv.put(KEY_NAME,    name);
    cv.put(KEY_IMAGE,   image);
    database.insert( DB_TABLE, null, cv );
} 
```

**检索数据**：

```
 byte[] image = cursor.getBlob(1); 
```

**笔记：**

1.  在插入数据库之前，您需要先将您的位图图像转换为字节数组，然后使用数据库查询应用它。
2.  从数据库中检索时，您肯定有一个图像的字节数组，您需要做的就是将字节数组转换回原始图像。所以，你必须使用 BitmapFactory 来解码。

下面是一个实用程序类，希望对您有所帮助：

```
public class DbBitmapUtility {

    // convert from bitmap to byte array
    public static byte[] getBytes(Bitmap bitmap) {
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(CompressFormat.PNG, 0, stream);
        return stream.toByteArray();
    }

    // convert from byte array to bitmap
    public static Bitmap getImage(byte[] image) {
        return BitmapFactory.decodeByteArray(image, 0, image.length);
    }
} 
```

**进一步阅读**
如果您不熟悉如何在数据库中插入和检索，请阅读本[教程](http://mrbool.com/how-to-insert-data-into-a-sqlite-database-in-android/28895)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T10:26:17.310

如果您正在使用 Android 的 MediaStore 数据库，以下是如何存储图像并在保存后显示它。

**在按钮上点击写这个**

```
 Intent in = new Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            in.putExtra("crop", "true");
            in.putExtra("outputX", 100);
            in.putExtra("outputY", 100);
            in.putExtra("scale", true);
            in.putExtra("return-data", true);

            startActivityForResult(in, 1); 
```

**然后在您的活动中执行此操作**

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == 1 && resultCode == RESULT_OK && data != null) {

            Bitmap bmp = (Bitmap) data.getExtras().get("data");

            img.setImageBitmap(bmp);
            btnadd.requestFocus();

            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bmp.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            byte[] b = baos.toByteArray();
            String encodedImageString = Base64.encodeToString(b, Base64.DEFAULT);

            byte[] bytarray = Base64.decode(encodedImageString, Base64.DEFAULT);
            Bitmap bmimage = BitmapFactory.decodeByteArray(bytarray, 0,
                    bytarray.length);

        }

    } 
```

# java - 使用非默认构造函数创建 akka 子actor

> ID：11790107
> 
> 赞同：1
> 
> 时间：2012-08-03T05:58:47.017
> 
> 标签：java, akka

有人可以帮我解决这个问题。将 akka 与 Java 一起使用时，是否可以使用`akka`带有参数的构造函数创建子角色。因为我知道主actor负责创建子actor。因此，如果我们有一个子actor，它在其构造函数中接受参数。

这是否意味着每当调用子actor时，主actor必须创建子actor的新实例才能将参数传递给子actor。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T22:03:32.333

另一种方法是使用 UntypedActorFactory （至少在 akka 2.1.2 中）：

```
ActorRef myActor = system.actorOf(new Props(new UntypedActorFactory() {
  public UntypedActor create() {
    return new MyActor("...");
  }
}), "myactor"); 
```

请参阅“使用非默认构造函数创建 Actors”下[的文档](http://doc.akka.io/docs/akka/2.1.2/java/untyped-actors.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-24T13:54:53.377

正如罗伯特所说，一旦创建了一个演员，您只需向它发送消息。这就是你如何创建一个带参数的演员，你可以从另一个演员做：

自 Akka 2.2 以来，UntypedActorFactory 已被弃用。

相反，我认为最简单的方法是这样做：

```
ActorRef myActor = system.actorOf(Props.create(MyActor.class, params), "MyActor"); 
```

或者，您可以像这样实现 Creator：

```
static class MyActorC implements Creator<MyActor> {
  @Override public MyActor create() {
    return new MyActor("...");
  }
} 
```

请参阅此处了解更多信息：

> [http://doc.akka.io/docs/akka/2.2.3/java/untyped-actors.html#untyped-actors-java](http://doc.akka.io/docs/akka/2.2.3/java/untyped-actors.html#untyped-actors-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T16:46:31.890

不必要。创建演员后，用户将能够直接向该演员发送消息。如果你有一个系统，必须创建一个新的actor来完成每条消息的工作，你最好让主管为你创建actor，然后让actor通过tell()机制发回数据。

# mysql - 嵌套数据使用什么表结构？

> ID：11790108
> 
> 赞同：0
> 
> 时间：2012-08-03T05:58:56.683
> 
> 标签：mysql, sql, database, database-design

好的，所以我正在开发一个包含分层数据的项目，我正在将其用于写书应用程序，如下所示：

*   顶级父级 (Act) - 包含 Act 名称、位置（第一个 Act）、描述和文本（介绍文本）
*   中级父/子（章节）- 包含章节名称、位置（第一章）、描述和文本（介绍文本）
*   底层（Section）——包含Section名称、位置（第一个Section）、描述和文本（实际内容文本）

现在，我想拥有可变数量的级别（例如，包括将包含全文的子部分），但我不完全确定如何有效地创建这样的表格。我最初的想法是让它们通过 parentId 连接，顶层的 parentId 为 null。

比如我想在第一位置调出一个顶级家长，这没什么大不了的。现在，我可以搜索空的父字段和 1 的位置。要调用“章节”（中级），我做同样的事情，但获取结果的 id 并将其用作 parentid。

问题在于部分，我必须有几个子查询才能得到最终结果。如果我想设置可变数量的级别，我需要大量的子查询，这将影响性能。

我看到了一个[类似的问题](https://stackoverflow.com/questions/355628/hierarchical-data-structure-design-nested-sets)，但并没有真正理解答案或如何使用它。

我已经考虑过某种分类表或将所有父 ID 带入子代（即，一个部分将在 parentid 下列出章节 ID 和行为 ID），但我没有设置它。Feedbooks.com 在提交书籍时使用类似的层次结构，但它们不会将数据存储在数据库中，它们只是接受输入并将其转换为输出（pdf、epub 或其他）。

哦，我计划在 MySQL 中构建它。

想法？

**编辑** 想象这种情况的一种更简单的方法是和一个家庭在一起。假设您有 3 个祖父（Bill、Bernard、Boe），他们之间有 5 个孩子（John、Joey、Josh、Jeremy、Jackson），他们又拥有自己的所有 2 个孩子（例如：Donald、Duey、唐尼）。假设数据库不存储那种关系，而是存储什么孩子呆在哪里的关系，我们不关心这里的生物学。

所以让我们假设唐尼开始和约翰住在一起，而约翰和比尔住在一起。唐尼是约翰的第一个孩子，约翰是比尔的第二个孩子。你如何查询比尔的第二个儿子的第一个孙子？

假设他们四处走动，现在唐纳德和约翰呆在一起。Donald 是 John 的第二个孩子（第一个孩子的位置由其他人填补），而 John 仍然是 Bill 的第二个孩子。怎么查询比尔二儿子的二孙？

如果约翰带着他所有的孩子搬到博伊家怎么办。Boe是二爷爷。您现在如何查询这些信息？您将如何存储此类信息？

如果你现在把曾孙们扔进去怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:47:52.847

这是使用闭包表的一个很好的例子，就像您引用的答案一样。你可能想看看[这里](http://karwin.blogspot.com.es/2010/03/rendering-trees-with-closure-tables.html)和[这里](http://b2berry.com/2011/11/19/hierarchical-data-persistence-via-closure-table/)。

引用第一个链接：

> 闭包表是一种设计，用于通过存储树节点之间的所有路径来表示关系数据库中的树。

# magento - 如何从magento的愿望清单中删除项目

> ID：11790110
> 
> 赞同：2
> 
> 时间：2012-08-03T05:59:08.387
> 
> 标签：magento

在 Magento 中，我想删除或删除当前登录用户的愿望清单项目。目前我通过启用复选框来选择愿望清单项目，然后使用 Mage::getModel('wishlist/item')->load($id)->delete() 删除它们。我使用的代码片段粘贴在下面。当我单击提交按钮时，项目会被删除，但只有在我再次刷新页面时才能看到效果。问题是我需要强制刷新页面才能看到删除的项目。任何人都可以建议我任何合适的解决方案。这将不胜感激。

注意：当复选框被选中时，wishlist-item id 被分配给它的值字段：

价值= $item->getWishlistItemId()

表单提交后，执行以下代码

```
 if(isset($_POST['wishlist']))  // wishlist is name of check box.
    {
      $checkboxes = $_POST['wishlist'];
   foreach ($checkboxes as $id):      
      $bulk = $_COOKIE["bulkaction"];
      if($bulk == "Remove"):
      Mage::getModel('wishlist/item')->load($id)->delete();   // $id contains the wishlist item id.
      $url = $this->getBaseUrl().'wishlist';
      header("refresh:0.0000000000001;", $url);
      endif;
  endforeach;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:07:54.390

如果我理解正确，您想删除与特定用户关联的所有愿望清单项目吗？...

```
$customerId = 1; // Replace with the customer id you are targetting

$itemCollection = Mage::getModel('wishlist/item')->getCollection()
    ->addCustomerIdFilter($customerId);

foreach($itemCollection as $item) {
    $item->delete();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T16:31:35.097

德鲁的回答肯定会从数据库中删除项目。但是，如果您想从“当前”集合中删除项目，您应该使用 Varien_Data_Collection::removeItemByKey()

```
$items = $this->getItems();
foreach ($items as $key => $item) {
    if ($condition) $items->removeDataByKey($key);
} 
```

但请注意，有时（当集合在代码中的不同位置单独访问时）它可能看起来不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-28T08:04:08.557

您可以使用

```
foreach ($items as $key => $item) {
    if ($condition) $items->removeItemByKey($key);
} 
```

# php - 触发器不起作用 - 在插入之前更改表以添加新列

> ID：11790112
> 
> 赞同：0
> 
> 时间：2012-08-03T05:59:11.370
> 
> 标签：php, mysql, triggers, alter

我正在创建一个触发器来更改一个向其添加新列并将值插入其中的表。

我的代码看起来像 lyk dis：

```
 delimiter |

 CREATE TRIGGER addfield AFTER INSERT ON `entity_group_mapping`
 FOR EACH ROW BEGIN
     ALTER TABLE user_access ADD NEW.type_name INT(2) NOT NULL;
 END;

 |
 delimiter ; 
```

它给了我一个错误：`#1103 - Incorrect table name 'NEW'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:59:34.440

从文档中：

*每个表有 4096 列的硬性限制...每个表（无论存储引擎如何）的最大行大小为 65,535 字节。*

你能达到这些限制吗？即使您不能，我建议您考虑设计，并添加记录而不是新字段。然后你可以尝试 PIVOT 表 - 将行转换为字段，互联网上有很多数据透视示例，当然还有 stackoverflow。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:09:01.897

试试这个`NEW.`

```
 ALTER TABLE user_access ADD type_name INT(2) NOT NULL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:10:34.860

`ALTER TABLE`或者`CREATE TABLE`不允许在 MySql 中的触发器内部。所以无论如何它都行不通。

# api - 您可以使用 Linkedin API 发布 Linkedin 推荐吗？

> ID：11790120
> 
> 赞同：2
> 
> 时间：2012-08-03T05:59:49.353
> 
> 标签：api, linkedin

为了改进推荐并帮助 Linkedin，我需要 api 访问权限来发布推荐。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:19:28.150

没有发布推荐的 API，只有[Profile API](https://developer.linkedin.com/documents/profile-fields#recommendations)来拉取推荐。

# moq - 使用最小起订量测试带有参数的特定方法调用

> ID：11790129
> 
> 赞同：0
> 
> 时间：2012-08-03T06:00:59.723
> 
> 标签：moq

我正在尝试使用 Moq 编写单元测试以验证注册是否成功。我的测试如下：

```
 [TestMethod()]
    public void RegisterTest()
    {
        //Arrange
        var MockRepo = new Mock<IDataRepo>() ;             
        RegisterModel model = new RegisterModel
        {
            ConfirmPassword = "SamePassword",
            Email = "myemail@address.com",
            FirstName = "MyFirstName",
            LastName = "MyLastName",
            MiddleName = "MyMiddleName",
            Password = "SamePassword"
        };
        MockRepo.Setup(ctx => ctx.Add(model)).Verifiable("Nothing was added to the Database");

        //Act
        AccountController target = new AccountController(MockRepo.Object);

        //Assert
        ActionResult actual = target.Register(model);
        MockRepo.Verify(ctx => ctx.Add(It.IsAny<RegisterModel>()));
        Assert.IsInstanceOfType(actual, typeof(ViewResult));
    } 
```

但它失败并出现以下错误

```
对模拟的预期调用至少一次，但从未执行过：ctx => ctx.Add(It.IsAny())
```

但是，当我调试测试方法时，我注意到实际上调用了 Add(T) 方法。MOQ dll 版本为 v4.0

**更新** 帐户控制器：

```
public class AccountController : Controller
{

    private IDataRepo _repo;

    public AccountController(IDataRepo Repo)
    {
        _repo = Repo;
    }

    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            User user = _repo.Users.Where(u => u.Email == model.Email).FirstOrDefault();
            if (user == null)
            {
                _repo.Add(new User
                {
                    Email = model.Email,
                    Password = model.Password,
                    FirstName = model.FirstName,
                    LastName = model.LastName,
                    MiddleName = model.MiddleName
                });

                return View("RegistrationSuccess");
            }
            else
            {
                ModelState.AddModelError("UserExists", "This Email already Exists");
            }
        }
        return View(model);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:32:17.147

您的问题是您的 Mock 需要一个`RegisterModel`实例

```
RegisterModel model = new RegisterModel
{
    ConfirmPassword = "SamePassword",
    Email = "myemail@address.com",
    FirstName = "MyFirstName",
    LastName = "MyLastName",
    MiddleName = "MyMiddleName",
    Password = "SamePassword"
};

MockRepo.Setup(ctx => ctx.Add(model)) 
```

但是该`Add`方法被`User`类的实例调用

```
_repo.Add(new User
{
    Email = model.Email,
    Password = model.Password,
    FirstName = model.FirstName,
    LastName = model.LastName,
    MiddleName = model.MiddleName
}); 
```

* * *

因此，解决此问题的一种方法是设置模拟以接受`User`实例。

```
RegisterModel model = new RegisterModel
{
    ConfirmPassword = "SamePassword",
    Email = "myemail@address.com",
    FirstName = "MyFirstName",
    LastName = "MyLastName",
    MiddleName = "MyMiddleName",
    Password = "SamePassword"
};
User expected = new User
{
    Email = model.Email,
    Password = model.Password,
    FirstName = model.FirstName,
    LastName = model.LastName,
    MiddleName = model.MiddleName
};
MockRepo.Setup(ctx => ctx.Add(expected)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:46:13.487

我发现了一种更简单的方法。而不是生成您自己的用户对象，您可以调用`It.IsAny<User>()`并且测试会运行得很好。所以我的单元测试现在变成了..

```
 //Arrange
        var MockRepo = new Mock<IDataRepo>() ;             
        var MockMembership = new Mock<IMembership>();
        RegisterModel model = new RegisterModel
        {
            ConfirmPassword = "SamePassword",
            Email = "myemail@address.com",
            FirstName = "MyFirstName",
            LastName = "MyLastName",
            MiddleName = "MyMiddleName",
            Password = "SamePassword"
        };

        MockRepo.Setup(ctx => ctx.Add(It.IsAny<User>())).Verifiable("Nothing was added to the Database");
        //Act
        AccountController target = new AccountController(MockRepo.Object, MockMembership.Object);

        //Assert
        ActionResult actual = target.Register(model);
        MockRepo.Verify(ctx => ctx.Add(It.IsAny<User>()));
        Assert.IsInstanceOfType(actual, typeof(ViewResult)); 
```

# c# - c#中有多少客户端连接到指定的UDP端口号

> ID：11790132
> 
> 赞同：0
> 
> 时间：2012-08-03T06:01:10.057
> 
> 标签：c#

如何计算连接到 C# 中 UDP 套接字的客户端数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:08:26.490

您可以使用[IPGlobalProperties](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipglobalproperties.getudpipv4statistics)和其中一种方法

```
IPGlobalProperties.GetUdpIPv4Statistics 
```

> 为本地计算机提供用户数据报协议/Internet 协议版本 4 (UDP/IPv4) 统计数据。

对于 ipv6 还有另一个功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:00:20.327

UDP 是一种无连接协议，因此没有连接数可以计算。IPGlobalProperties.GetUdpIPv4Statistics 只为您提供系统上的侦听器数量，我认为这不是您想要的。如果您指定要执行的操作会很有帮助！

# c# - 将参数传递给以编程方式创建的用户控件

> ID：11790133
> 
> 赞同：1
> 
> 时间：2012-08-03T06:01:11.077
> 
> 标签：c#, asp.net, user-controls, controls

让我以此作为开头：我为此搜索了高低，并找到了许多示例和解决方案，但我仍然无法弄清楚。

**在 .aspx.cs 代码隐藏文件中，我有以下内容：**

```
NewsArticleList listall = NewsArticleManager.GetListAll();
foreach (NewsArticle x in listall)
{
    Control c1 = (NewsArticleContainer)LoadControl("~/UserControls/NewsArticleContainer.ascx");
    ((NewsArticleContainer)c1).PopulateWithNewsArticle(x);
    mynewspanel.Controls.Add(c1);
} 
```

我在用户控件中有一个名为 PopulateWithNewsArticle() 的方法，它接受 NewsArticle，并相应地填充用户控件的 Web 控件：

```
public void PopulateWithNewsArticles(NewsArticle x)
{
   lbltitle.Text = x.Title;
   lblcategory.Text = x.Category;
   //...etc.
} 
```

现在这有效，这很好。但是我想学习/理解的是，当我 LoadControl() 时如何将 NewsArticle x 传递给用户控件，以便在创建用户控件时，我可以在用户控件的 Page_Load 上解包 NewsArticle，并设置实例化用户控件时从右侧开始的 Web 控件属性，而不是在使用 PopulateWithNewsArticle 方法实例化之后执行它（就像我现在拥有它一样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:16:17.643

`NewsArticle` 您可以在 中公开公共属性`NewsArticleContainer.ascx`，因此您将拥有如下初始化代码：

```
var control = (NewsArticleContainer)LoadControl("~/UserControls/NewsArticleContainer.ascx");
control.NewsArticle = x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T06:05:37.450

你可以使用

```
Control c1 = 
(NewsArticleContainer)LoadControl(typeof(NewsArticleContainer),new object[]{ x }); 
```

这个是 的重载`Page.LoadControl()`，它有这样的语法

```
public Control LoadControl(
    Type t,
    Object[] parameters
) 
```

之后，您还必须为您的 UserControl 创建一个有效的构造函数，这可能是这样的

```
class NewsArticleContainer:System.Web.UI.UserControl
{
   public NewsArticleContainer(NewsArticle x)
   {
      // Some cool code stuff here
   }
} 
```

有关这方面的更多信息，[请点击此处](http://msdn.microsoft.com/en-us/library/ewtd66a0.aspx)。

# scorm2004 - 这个全球目标到底是什么？

> ID：11790138
> 
> 赞同：0
> 
> 时间：2012-08-03T06:01:49.747
> 
> 标签：scorm2004

这个主要目标和全球目标之间有什么区别每个人都在谈论全球目标，并且这个全球目标没有明确的定义。

请澄清这一全球目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:18:41.280

在 SCORM 中，有两种类型的目标（本地目标和共享的全局目标）。请检查以下链接以获得您的答案：

[http://support.scorm.com/entries/96011-what-is-the-difference-between-a-local-objective-and-a-shared-global-objective](http://support.scorm.com/entries/96011-what-is-the-difference-between-a-local-objective-and-a-shared-global-objective)

[http://support.scorm.com/entries/67062-identifying-a-global-objective-vs-a-local-objective](http://support.scorm.com/entries/67062-identifying-a-global-objective-vs-a-local-objective)

# mongodb - MongoDB 错误的部分更新

> ID：11790139
> 
> 赞同：0
> 
> 时间：2012-08-03T06:02:12.490
> 
> 标签：mongodb, partial, mongodb-.net-driver

我正在尝试使用 C# 驱动程序对我在 MongoDB 中的一个文档进行部分更新。我关注了以下帖子：

[如何使用官方 c# 驱动程序在 MongoDB 中使用 Update.Set 更新多个字段？](https://stackoverflow.com/questions/4818964/how-do-you-update-multiple-field-using-update-set-in-mongodb-using-official-c-sh)

[使用 c# 驱动程序的部分 mongodb upsert？](https://stackoverflow.com/questions/7533481/partial-mongodb-upsert-using-the-c-sharp-driver)

尝试进行更新时出现以下错误：“当前只能映射类”，在 AutoMapper CreateClassMap 类中，接收到的类型是 System.Collections.Generic.IEnumerable`1[[MongoDB.Bson.BsonElement, MongoDB. Bson]]，它不能是一个接口。

我正在使用的代码是：

```
public void UpdateObjectByFields<T>(int id, Dictionary<string, object> modifiedFields)
    where T : class
{
    var collection = m_MongoDatabase.GetCollection<T>();
    var builder = new UpdateBuilder();
    foreach (var modifiedField in modifiedFields)
    {
        builder.Set(modifiedField.Key, modifiedField.Value.ToString());
    }
    collection.Update(Query.EQ("_id", id), builder);
} 
```

其中 T 类型是 Mongo 中的有效集合。

我究竟做错了什么？

谢谢，尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:58:04.417

让它工作，显然我正在为 C# 驱动程序使用一些旧的 dll。通过使用此处的 dll 修复它：

[https://github.com/mongodb/mongo-csharp-driver/downloads](https://github.com/mongodb/mongo-csharp-driver/downloads)

谢谢，尼尔。

# android - Osmdroid - 地图图块加载问题

> ID：11790140
> 
> 赞同：1
> 
> 时间：2012-08-03T06:02:21.890
> 
> 标签：android, performance, load, tile, osmdroid

我们正在使用 osmdroid-android 版本 3.0.5 - Revision 970 的源代码。此外，我们在项目中使用 jars osmdroid-third-party-3.0.8.jar 和 osmdroid-packager-3.0.8.jar 来显示 bing 地图。我们遇到了瓦片加载问题，地图瓦片加载非常缓慢。我们尝试了[链接](http://code.google.com/p/osmdroid/issues/detail?id=289)中给出的修复 ，版本为 r1073，但在这种情况下地图本身没有加载。我们正在使用 Android 3.2 。请让我知道是否有针对此磁贴问题的任何其他修复。

# linux - JRI REngine eval() 方法总是返回 null

> ID：11790142
> 
> 赞同：2
> 
> 时间：2012-08-03T06:02:44.027
> 
> 标签：linux, r, amazon-ec2, tomcat6, jri

我有一个在 Tomcat6 上运行的 Java servlet，它使用 JRI (rJava) 与安装在 Amazon linux 服务器上的 R 进行通信。我从源代码安装了 R，通过 cran 安装了 rJava，并为 Tomcat 设置了 R_HOME 和我的类路径。我必须在我的 java.library.path 目录之一中设置一些符号链接到必要的本机库（libjri.so、libR.so 和 libRblas.so），因为我无法配置 java.library.path 以包含这些目录他们安装在其中，但我认为这不是问题。当我跑

```
 ./run rtest 
```

从 $R_HOME/library/rJava/jri/ 中的命令行，我得到了预期的输出，并且 REngine 类似乎通过 eval() 生成了 R 语句。但是当我从我的类中调用 eval() 时，几乎在所有情况下都会返回一个 null 而不是 REXP 对象。无论是否打开 DEBUG，都不会记录错误。我得到 REXP 返回的唯一情况是当我设置一个数组时，例如

```
 array1=c(7245.0, 6003.0, 5504.0) 
```

在这种情况下，我得到一个 REXP，其 toString() 值为

```
 [REAL* (7245.0, 6003.0, 5504.0)] 
```

但是，如果我随后使用 eval() 调用

```
 summary(array1) 
```

我得到一个空值而不是预期的 REXP。在我的 Mac 上运行的代码是：

```
private REXP multipleRegression(Datalist list) {
    String fitStr = "fit <- lm(";
    for (int i = 0; i < list.size(); i++) {
        Datastream ds = list.get(i);
        String dsStr = ds.getId() + "=" + ds.toArrayString();
        System.out.println("VALUE: " + this.eval(dsStr));
        System.out.println("SUMMARY: " + this.eval("summary(" + ds.getId() + ")"));
        fitStr += ds.getId();
        if (i == 0)
            fitStr += " ~ ";
        else if (i == list.size() - 1)
            fitStr += ")";
        else
            fitStr += " + ";
    }
    if (list.size() == 1) {
        fitStr += "1)";
    }
    this.eval(fitStr);
    return this.eval("summary(fit)");
} 
```

同样，这适用于我的 Mac，所以我很确定问题出在环境而不是代码上。我进行了几个小时的搜索，但尚未找到解决方案。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:59:25.097

好的，所以它确实与本机库及其符号链接有关。当我没有将 libjri.so、libR.so 和 libRblas.so 的符号链接放入我的 java.library.path 时，我的应用程序中出现异常，但是一旦我得到这些符号链接，就没有更多异常了。原来我还需要 libRlapack.so。一旦我对它进行符号链接，我就开始恢复预期的 REXP 值。

# regex - 使用正则表达式在每个块的末尾多行选择带有 ID 的块

> ID：11790143
> 
> 赞同：0
> 
> 时间：2012-08-03T06:02:51.107
> 
> 标签：regex

我有正则表达式：

```
BEGIN\s+\[([\s\S]*?)END\s+ID=(.*)\] 
```

从下面的文本中选择多行文本和 ID。我只想选择带有 prefix 的 ID `X_`，但是如果我更改`ID=(.*)`为`ID=(X_.*)`begin 是从第二对而不是从第三对中选择的，因为我需要。有人可以帮我正确表达吗？

文本示例：

```
BEGIN [
text a
END ID=X_1]

BEGIN [
text b
text c
END ID=Y_1]

text aaa
text bbb

BEGIN [
text d
text e
END ID=X_2]

text xxx

BEGIN [
text bbb
END ID=X_3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:30:40.897

**假设块内没有任何换行符**并且`BEGIN`/`END`语句是其行的第一个非空格，我会这样编写正则表达式（Perl 表示法；`/x`如果您使用，请更改分隔符并删除注释、空格和修饰符不同的引擎）

```
m{
  \n \s* BEGIN \s+ \[          # match the beginning
     ( (?!\n\s*\n) .)*?        # match anything that isn't an empty line
                               # checking with a negative look-ahead (?!PATTERN)
  \n \s* END \s+ ID=X_[^\]]* \] # the ID may not contain "]"
}sx                            # /x: use extended syntax, /s: "." matches newlines 
```

**如果内容可能是任何东西**，最好创建一个所有块的列表，然后对它们进行 grep。此正则表达式匹配任何块：

```
m{ (
  BEGIN \s+ \[
  .*?              # non-greedy matching is important here
  END \s+ ID=[^\]]* \] # greedy matching is safe here
) }xs 
```

（如果需要，添加换行符）

然后只保留与此正则表达式匹配的匹配项：

```
/ID = X_[^\]]* \] $/x  # anchor at end of line 
```

如果我们不这样做，**回溯可能会阻止正确匹配**（`[\s\S]*?`可以包含`END ID=X_`）。您的正则表达式会将任何内容放入块中，直到看到 `X_.*`.

所以使用`BEGIN\s+\[([/s/S]*?)END\s+ID=(.*?)\]`- 注意额外的问号 - 一个匹配将是：

```
BEGIN [
text b
text c
END ID=Y_1]

text aaa
text bbb

BEGIN [
text d
text e
END ID=X_2] 
```

…而不是在`Y_`. 贪婪匹配（您未更改的正则表达式）应该导致整个文件被匹配：您`(.*)`吃掉所有字符（直到文件末尾）然后返回直到找到一个`]`.

### 编辑：

如果您使用 perls 正则表达式引擎，我们可以使用`(*FAIL)`动词：

```
/BEGIN\s+\[(.*?)END\s+ID=(X_[^\]]*|(*FAIL))\]/s 
```

“要么有一个以 开头的 ID，`X_`要么匹配失败”。但是，这并不能解决`END ID=X_1]`数据中的 -like 语句的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:00:03.550

正如人们一直在说的那样，这并不是`.*`吞噬一切，而是`[\s\S]*?`. `.*`不能这样做，因为（正如 OP 所说）点与换行符不匹配。

当`END\s+ID=(X_.*)\]`您的正则表达式的一部分无法匹配第二个块的最后一行时，您期望它放弃该块并从第三个块重新开始。这就是它必须做的最短匹配。

实际上，它会回溯到行首并让我们`[\s\S]*?`使用它。并且它一直在消耗直到找到一个`END\s+ID=(X_.*)\]`可以匹配的地方，这恰好是第三块的最后一行。

以下正则表达式通过逐行匹配来避免该问题，检查每一个以查看它是否以`END`. 这有效地将匹配一次限制在一个块上。

```
(?m)^BEGIN\s+\[[\r\n]+((?:(?!END).*[\r\n]+)*)END\s+ID=(X_.*)\] 
```

请注意，我曾经`^`将每个匹配项锚定到一行的开头，所以我曾经`(?m)`打开多行模式。但我没有——而且你*不应该*——打开单行/DOTALL 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:17:59.537

将您更改`.*`为`[^\]]*`（即匹配非] s），以便您的匹配项不会溢出 END 块，从而为您提供类似`BEGIN\s+\[([^\]]*?)END\s+ID=(X_[^\]]*)\]`

# android - 使用 Adob e Reader 显示 PDF 文件

> ID：11790152
> 
> 赞同：0
> 
> 时间：2012-08-03T06:03:38.383
> 
> 标签：android, file, pdf, bytearray

我创建了一个 openPDF 类，它以字节数组作为输入，并使用 Adob​​e Reader 显示 PDF 文件。代码：

```
private void openPDF(byte[] PDFByteArray) {

    try {
        // create temp file that will hold byte array
        File tempPDF = File.createTempFile("temp", ".pdf", getCacheDir());
        tempPDF.deleteOnExit();

        FileOutputStream fos = new FileOutputStream(tempPDF);
        fos.write(PDFByteArray);
        fos.close();

        Intent intent = new Intent();
           intent.setAction(Intent.ACTION_VIEW);
           Uri uri = Uri.fromFile(tempPDF);
           intent.setDataAndType(uri, "application/pdf");
           intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);     

           startActivity(intent);

    } catch (IOException ex) {
        String s = ex.toString();
        ex.printStackTrace();
    }
} 
```

当我通过 intent 时，来自 adobe reader 的错误是“Invalid file path”。我阅读了与在 android 中下载和查看 PDF 相关的所有其他帖子，但帮助很大。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:52:38.940

我认为问题在于其他应用程序无法访问您应用程序的私有数据区域（如缓存目录）中的文件。

候选解决方案：

1.  将文件的模式更改为 MODE_WORLD_READABLE 以便其他应用程序可以读取它

    ```
    ...
    String fn = "temp.pdf";
    Context c = v.getContext();
    FileOutputStream fos = null;
    try {
        fos = c.openFileOutput(fn, Context.MODE_WORLD_READABLE);
        fos.write(PDFByteArray);
    } catch (FileNotFoundException e) {
        // do something
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        if (fos!=null) {
            try {
                fos.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    String filename = c.getFilesDir() + File.separator + fn;
    File file = new File(filename);
    Uri uri = Uri.fromFile(file);
    intent.setDataAndType(uri, "application/pdf");
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);     
    startActivity(intent);
    ... 
    ```

2.  或将 pdf 文件写入 /sdcard 分区。

    您可以使用 android.os.Environment API 来获取路径，并记得将权限添加到您应用的 AndroidManifest.xml 文件中。

    ```
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
    ```

问候

陈子腾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:13:59.700

我制作了这段代码来使用 Adob​​e 的应用程序打开一个存在于 Dowloads 文件夹中的特定 .pdf 文件

```
 File folder = new File(Environment.getExternalStorageDirectory(), "Download");
    File pdf = new File(folder, "Test.pdf");

    Uri uri = Uri.fromFile(pdf);

    PackageManager pm = getPackageManager();
    Intent intent = pm.getLaunchIntentForPackage("com.adobe.reader");
    intent.setDataAndType(uri, "application/pdf");
    startActivity(intent); 
```

这个对我有用。所以我猜你的问题可能是临时文件。尝试将文件写入 sdcard。为此，您需要添加`android.permission.WRITE_EXTERNAL_STORAGE`到您的 AndroidManifest.xml。

# java - 将 XML 数据读入文本文件

> ID：11790153
> 
> 赞同：0
> 
> 时间：2012-08-03T06:03:58.730
> 
> 标签：java, xml-parsing, domparser

我对编码很陌生，任何人都可以帮助我更正我的代码。我需要读取 XML 数据并将数据存储在文本文件中。每个值必须用逗号分隔，一旦读取一条记录的数据，它需要转到下一行并执行另一条记录。

示例 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
 <xml_tool xmlns:md="http://www.example.com/XT/1.0/">  
    <md:header>       
          <md:application_version>1.0</md:application_version>      
         <md:export_date>19-04-2012</md:export_date>   
          <md:export_time>14:55</md:export_time>   
          <md:export_user>USER01</md:export_user> 
    </md:header>   
    <md:table table_name="CUSTOMER" key="customer number" record_count="2" column_count="5">  
          <md:record>   
                                        <md:column name="customer_number">123456</md:column>   
                                         <md:column name="reg_date">01-04-2012</md:column>   
                                          <md:column name="customer_name">Test Customer</md:column>  
                                          <md:column name="customer_type">Normal </md:column> 
                                          <md:column name="comments">This is a test record</md:column>       
            </md:record>     
             <md:record>             
                                           <md:column name="customer_number">555111</md:column>   
                                            <md:column name="reg_date">02-04-2012</md:column>        
                                            <md:column name="customer_name">Test Customer</md:column>     
                                            <md:column name="customer_type"> </md:column>            
                                             <md:column name="comments">This is a test record</md:column>         
                </md:record>     
      </md:table>
</xml_tool 
```

我的代码：

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import java.io.*;

public class ParseXML {

    public static void main(String argv[])throws IOException {

         try {     
             BufferedWriter writer = new BufferedWriter(new FileWriter("results/staff.txt")); 
             File fXmlFile = new File("data/hardware-info.xml");  

             DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();  
             DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();      
             Document doc = dBuilder.parse(fXmlFile);      
             doc.getDocumentElement().normalize();    
             NodeList nList = doc.getElementsByTagName("md:record");     
             for (int i = 0; i < nList.getLength(); i++) 
             {      
                 Node node = nList.item(i);    
                 if (node.getNodeType() == Node.ELEMENT_NODE)    
                 {         
                      Element eElement = (Element) node; 
                     if(eElement.hasChildNodes())    
                     {               
                         NodeList nl = node.getChildNodes();      
                         for(int j=0; j<nl.getLength(); j++)  
                         {                   
                             Node nd = nl.item(j);   
                             String name= nd.getTextContent();
                                f (name != null && !name.trim().equals(""))                                 {
                                    System.out.print(name.trim()+",");   
                                    //System.out.print(" ");
                                    writer.write(nd.getTextContent().trim() + " ");
                                }

                         } 
                         System.out.println("");
                         writer.write("\n");
                         }        
                         } }  
             writer.close();
             } 
         catch (Exception e) {       
                         e.printStackTrace();     } } 
    @SuppressWarnings("unused")
    private static String getTagValue(String sTag, Element eElement)
    {        
        NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();  
        Node nValue = (Node) nlList.item(0);       
        return nValue.getNodeValue();     
        } 
} 
```

此代码的输出：

```
123456,01-04-2012,Test Customer,Normal,,This is a test record,
555111,02-04-2012,Test Customer,This is a test record, 
```

预期输出：

```
123456,01-04-2012,Test Customer,Normal,This is a test record
555111,02-04-2012,Test Customer, ,This is a test record 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:09:06.627

我怀疑这是你的问题：

```
String name = nd.getTextContent();
if (name != null) 
```

您可能想要：

```
String name = nd.getTextContent();
if (name != null && name.length() > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:14:36.243

更改`if (name != null)`为

`if (name != null && !name.trim().equals(""))`

# ipad - g++ darwin9 的 Theos 问题

> ID：11790154
> 
> 赞同：1
> 
> 时间：2012-08-03T06:04:00.693
> 
> 标签：ipad, ios5, g++, cydia

嘿伙计们，我在 ipad 2 3g ios 5.1.1 上无论如何我尝试通过 theos 编译一个应用程序，这就是我用 makefile 找到 helloworld 目录并通过终端我输入 make 它说它正在编译但它给了我这个错误

```
 /bin/sh: /usr/bin/arm-apple-darwin9-g++: no such file ir directory
    make [2] : *** [obj/main.mm.o] Error 127
    make [1] : *** [internal-tool-all_] Error 2
    make: *** [helloworld.all.tool.variables] Error 2 
```

使用这个 theos 模板

```
 Choose template: 4 (iphone/tool)
    Project Name: helloworld
    Package Name: com.memyself.helloworld
    Author Maintainer Name: me myself 
```

我知道它在 /usr/bin 中寻找 arm-apple-darwin9-g++（我在那个目录中有 arm-apple-darwin9-c++）但是那是什么，我从哪里得到？哦，那些错误是什么我完全没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:25:05.627

很简单，从这里下载 libgcc 包[http://apt.saurik.com/cydia/debs/libgcc_4.2-20080410-1-6_iphoneos-arm.deb](http://apt.saurik.com/cydia/debs/libgcc_4.2-20080410-1-6_iphoneos-arm.deb)然后安装它。之后从 Cydia 安装 GNU C 编译器并记住将头文件放在 var/theos/include 目录中。祝你好运！

# java - 从 MySQL 数据库中获取 Java 中的 Sum(total)

> ID：11790158
> 
> 赞同：1
> 
> 时间：2012-08-03T06:04:36.667
> 
> 标签：java, mysql

我有一个数据库- ***pro***。表名是***orders***。该表有一个字段 -***总计***。总数具有值 - ***(100,200,300,400,500)***。现在我需要从上面的数据库中添加所有值。我怎样才能在 Java 中做到这一点？如何用 Java 编写查询？请帮我。这是我的代码部分：

```
 public class GetCurrentDateTime {
     private Object sum;
    public int data(){  

try{
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro","root","");

    PreparedStatement statement =  con.prepareStatement("select sum(total) from orders where status='Q' AND WEEK(date) = WEEK(CURDATE()) AND YEAR(date) = YEAR(CURDATE())");
     ResultSet result = statement.executeQuery();
     println(result,getString(1));
    }

      catch(Exception exc){
      System.out.println(exc.getMessage());
      }
return 0;   
      }

    private void println(ResultSet result, Object string) {
// TODO Auto-generated method stub

     }
      private Object getString(int i) {
// TODO Auto-generated method stub
return sum;
    }
     } 
```

这是我的另一堂课：

```
 public class Demo {
    public static void main(String[] args){
    GetCurrentDateTime obj = new GetCurrentDateTime();
    System.out.println(obj.data());

    }

   } 
```

如果我必须运行我的演示类，则意味着总数的总和将显示在 tomcat 控制台窗口上。但它是否仅显示 null 0。如何`sum(total)`在 Java 中调用函数？请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T06:20:04.900

试试这个，而不是你的数据方法

```
public double data(){
  double value=0.0;
  try{
     Class.forName("com.mysql.jdbc.Driver");
     Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro","root","");

     PreparedStatement statement =  con.prepareStatement("select sum(total) from orders where status='Q' AND WEEK(date) = WEEK(CURDATE()) AND YEAR(date) = YEAR(CURDATE())");
     ResultSet result = statement.executeQuery();
     result.next();
     String sum = result.getString(1);
     System.out.println(sum);
     value = Double.parseDouble(sum);

    } catch(Exception exc){
        System.out.println(exc.getMessage());
    }
    return value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T06:07:58.183

```
 println(result,getString(1)); 
```

应该用点代替逗号，例如：

```
println(result.getString(1)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:19:18.083

有一些语法错误需要修复。诸如 Eclipse 之类的 IDE 可以提供帮助。

您应该返回从 resultSet 检索到的值`result.getString(1)`而不打印它。您返回 0，这就是您看到 0 的原因。

如果你想在 tomcat 中看到一些东西，你的调用者类应该是一个 servlet。

尝试修复一些东西，你会更接近结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T06:08:54.910

您必须在方法 data() 中返回 result.getString(1) 而不是返回 0。

问候

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-21T16:52:09.810

你应该做这样的事情它会工作

```
 ...

        PreparedStatement statement = con.prepareStatement("select sum(total) from orders where status='Q' AND WEEK(date) = WEEK(CURDATE()) AND YEAR(date) = YEAR(CURDATE())");
        ResultSet result = statement.executeQuery();
        println(result.getString(sum(total)));
    }
    catch(Exception exc) {
        System.out.println(exc.getMessage());
    }
    return 0;   
}

private void println(ResultSet result, Object string) {
    // TODO Auto-generated method stub
}

private Object getString(int i) {
    // TODO Auto-generated method stub
    return sum;
} 
```

您需要通过在 resultSet 中指定 sum(total) 来打印或获取 sum 的结果，例如`result.getString(sum(total))`.

# android - 如何管理自定义首选项布局

> ID：11790163
> 
> 赞同：8
> 
> 时间：2012-08-03T06:05:52.350
> 
> 标签：android, android-layout

我有一个图像和两个文本的自定义首选项，我需要以编程方式更改图像。

我能够获取自定义首选项视图并使用 findViewById 在布局中找到 ImageView，但如果我尝试更改图像，这将不起作用。

我错了吗？

**偏好布局**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageforfacebook"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:padding="5dip"
        android:src="@drawable/icon" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:fadingEdge="horizontal"
            android:singleLine="true"
            android:text="titolo"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textSize="18sp" />

        <TextView
            android:id="@+android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@android:id/title"
            android:layout_below="@android:id/title"
            android:maxLines="2"
            android:text="descrizione"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>

</LinearLayout> 
```

**更改图像浏览内容的代码**

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

View v = (View) prefs_facebookimage.getView(null, null);
ImageView img = (ImageView) v.findViewById(R.id.imageforfacebook);
Uri uri = Uri.parse(path);
img.setImageURI(uri); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T12:47:52.627

我尝试`getView`了例行程序，但它对我不起作用，最后我通过自定义完成了它`Preference`：

```
public class ImageViewPreference extends Preference {
    private ImageView mImageView;
    private Bitmap mPhoto;

    public ImageViewPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.setWidgetLayoutResource(R.layout.pref_account_image);
        if (mPhoto == null) {
            mPhoto = BitmapFactory.decodeResource(
                    getContext().getResources(), R.drawable.icon);
        }
    }

    @Override
    protected void onBindView(View view) {
        super.onBindView(view);
        mImage = (ImageView) view.findViewById(R.id.pref_imageView);
        mImage.setImageBitmap(mPhoto);
    }

    public void setImage(Intent imageData) {
        mPhoto = data.getParcelableExtra("data");
    }
} 
```

这是 Preference.xml：

```
<PreferenceCategory
    android:key="@string/pref_category_myNote_key"
    android:title="@string/pref_category_myNote" >
    <com.flounder.xeniaNote.view.ImageViewPreference
        android:key="@string/pref_image_key"
        android:title="@string/pref_image"
        android:widgetLayout="@layout/pref_account_image" />
</PreferenceCategory> 
```

并调用`mImagePref.setImage`改变你`ImageView`的回调方法`onPreferenceClick`。

我希望它有帮助！祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:53:26.180

如果你把所有图像都放在 res/drawable 下，然后通过 R.drawable 访问它们会怎样。? 这种方法一直对我有用。如果您没有令人信服的理由来使用 URI，那么这种方法可能值得尝试。即使您必须使用 URI，我也建议您测试这种方法并使其正常工作。那么至少你会知道“路径”的值有问题，而不是你的一般实现。

# mod-rewrite - Mod_rewrite 查询字符串的缩写

> ID：11790165
> 
> 赞同：0
> 
> 时间：2012-08-03T06:05:58.620
> 
> 标签：mod-rewrite, url-rewriting

我正在从一个内容系统迁移到另一个内容系统，并且需要将旧 URL 映射到新 URL。旧的很短，新的更长（至少对于迁移而言。

旧 URL 如下所示：

[http://example.com/sport/0/article/16814.php](http://example.com/sport/0/article/16814.php)

其中 16814 是记录 ID。新的看起来像这样：

index.php?module=stories&type=user&func=display&tid=3&pid=16814

旧 URL 中的“运动”映射到新 URL 中的“3”，但与运动相同的位置可能是映射到“4”的“列”。两个实例中的记录 ID 映射相同。

如果条件映射是不可能的，我可以做两个单独的重写......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:11:31.020

如果没有那么多`tid`，你可以通过它们来枚举：

```
RewriteEngine On
RewriteRule ^/?sport/.*/([0-9]+)\.php /index.php?module=stories&type=user&func=display&tid=3&pid=$1 [L,QSA]
RewriteRule ^/?column/.*/([0-9]+)\.php /index.php?module=stories&type=user&func=display&tid=4&pid=$1 [L,QSA] 
```

等等

# c# - 动态绘制列表框

> ID：11790171
> 
> 赞同：-2
> 
> 时间：2012-08-03T06:07:23.407
> 
> 标签：c#

我想在 C# 的表单上动态绘制列表框，1 或 1000。我应该怎么办？我正在从 sql server 获取数据并填写列表框。

```
da = new SqlDataAdapter();
            dt = new DataTable();
            da.SelectCommand = new SqlCommand("select column_name from information_schema.columns where table_name='"+listBox1.SelectedItem+"'", myCon);
            da.Fill(dt);
            int x = dt.Rows.Count;
            listBox2.Items.Clear();
            listBox2.Items.Add(listBox1.SelectedItem);
            for (int i = 0; i < x;i++ )
                listBox2.Items.Add(Convert.ToString(dt.Rows[i][0]));
            myCon.Close(); 
```

借助此代码，我静态绘制列表框，但我想动态绘制它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:35:00.883

**代码：**动态添加**Listitem**

*默认.apsx*

```
 <asp:ListBox ID="ListBox1" runat="server"></asp:ListBox> 
```

*代码背后：*

```
DataTable dt = ds.Tables[0];
for (int i = 0; i < dt.Rows.Count; i++)
{
    string id = dt.Rows[i][0].ToString();
    string value = dt.Rows[i][1].ToString();

    ListItem li=new ListItem();
    li.Text = id;
    li.Value = value;
    ListBox1.Items.Add(li);

} 
```

**代码**：动态添加**ListBox 控件**

```
 <asp:Panel ID="Panel1" runat="server">
        </asp:Panel> 
```

*代码背后：*

```
 for (int i = 0; i < numberOfListBox ; i++)
        {
            ListBox listb = new ListBox();
            ListItem lItem = new ListItem();
            lItem.Value = i.ToString();
            lItem.Text = "item no" + i;
            listb.Items.Add(lItem);
            Panel1.Controls.Add(listb);

        } 
```

# linux - Linux，pthreads——发送停止条件

> ID：11790181
> 
> 赞同：1
> 
> 时间：2012-08-03T06:08:18.170
> 
> 标签：linux, pthreads, posix

我正在 Linux 下使用 phtreads 和 C 编写应用程序。main 函数启动了一堆线程（最多 20 个）。然后，根据某些标准，我需要立即停止所有线程。每个线程都在某个条件循环下运行，例如：

```
while (state) {....} 
```

所以我需要将每个线程的状态更改为 false （我认为目前每个线程都有一个状态就足够了，但也许将来我必须分别停止每个线程）

那么，最好的方法是什么？我可以使用某些*状态*作为全局变量并为其使用互斥锁。每次我都必须锁定、读取、解锁它才能读取它的价值。而且我认为这是一个耗时的过程。您还有其他想法如何实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:34:45.497

# 人 pthread_cancel

允许您向线程发送取消请求。

# 人 pthread_cleanup_push

允许您设置取消例程。

# osx-lion - mac中如何使用JDBC连接器连接mssql

> ID：11790184
> 
> 赞同：1
> 
> 时间：2012-08-03T06:08:24.280
> 
> 标签：osx-lion

我正在尝试使用 JDBC 连接器连接到 mssql，如何在 Xcode 4.2 或命令提示符中使用，现在我正在使用 OSX 10.7.3 是否有任何示例示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:17:48.417

本教程有详细解释：[http](http://www.vogella.com/articles/MySQLJava/article.html) ://www.vogella.com/articles/MySQLJava/article.html 。该网站非常棒，还有许多其他很棒的教程！

简而言之：

```
Class.forName("com.mysql.jdbc.Driver");
connect = DriverManager.getConnection("jdbc:mysql://localhost/dbname?user=sqluser&password=sqluserpw");
statement = connect.createStatement();
resultSet = statement.executeQuery("SELECT * FROM dbname.tablename"); 
```

这是你需要的吗？

# objective-c - 如何在ios中使用for循环随机显示每个按钮的动画

> ID：11790189
> 
> 赞同：0
> 
> 时间：2012-08-03T06:08:54.770
> 
> 标签：objective-c, ios

嗨，我有一个使用 for 循环显示的按钮列表。我想为随机按钮设置动画，任何人都可以帮助我。这是我正在尝试的代码，此代码只有最后一个按钮连续动画。

```
 -(void)arrangeFavouriteWords
  {
       [buttonsArray removeAllObjects];
       buttonsArray = [[NSMutableArray alloc]init];
       for(int i=0;i<count1;i++)
       {
           WordObject *favObj = [databaseArray objectAtIndex:i];
           float height = [MainViewController    calculateHeightOfTextFromWidth:favObj.wordName :fontValue : buttonWidth :UILineBreakModeCharacterWrap];
          myButton = [[MyCustomButton alloc]initWithIdValue:favObj.wordName];
         myButton.backgroundColor = [UIColor clearColor];
         myButton.frame = CGRectMake(0,yCoordinate,buttonWidth,height);
         myButton.tag = i;
        [myButton.titleLabel setFont:fontValue];
        [myButton setTitleColor:color forState:UIControlStateNormal];
        [myButton setTitle:favObj.wordName forState:UIControlStateNormal];
         [myButton addTarget:self action:@selector(wordClicked:)  forControlEvents:UIControlEventTouchUpInside];
        myButton.contentHorizontalAlignment = NO;
        [buttonsArray addObject:myButton];
        [displayView addSubview:myButton];
        [myButton release];
        yCoordinate = yCoordinate + height;
       }
     NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:(0.5) target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
 }
-(void)onTimer
 {

        int randomIndex = arc4random() % [buttonsArray count];
        printf("\n the random index is :%d",randomIndex);
        myButton.tag = randomIndex;
       if(randomIndex == myButton.tag)
       {
          CABasicAnimation *theAnimation;
          theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.scale"];
          theAnimation.duration=1.0;
          //theAnimation.repeatCount=HUGE_VALF;
           theAnimation.autoreverses=YES;
         theAnimation.fromValue=[NSNumber numberWithFloat:1.25f];
         theAnimation.toValue=[NSNumber numberWithFloat:1.0f];
         [myButton.layer addAnimation:theAnimation forKey:@"transform.scale"];
       }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:23:42.057

这是你的问题：

```
 myButton.tag = randomIndex;
   if(randomIndex == myButton.tag) 
```

您会看到，当您有一个指向实例的指针（在本例中为`UIButton`named `myButton`）时，它一次只包含***一个***实例，它必须是您描述的“最后一个按钮”。Objective-C（或任何其他语言）中的实例不会神奇地变成您希望它们在最方便的方法中的对象。您需要实际分配`myButton`给不同的实例，或引用该实例其他实例代替。

由于您正在设置，然后立即检查相同**的**`.tag`值（您需要正确引用每个按钮，以及将它们全部存储的地方（例如，一个 NSArray）。这样，您可以使用随机索引从数组中检索按钮。**`objectAtIndex:`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:24:46.367

你的`myButton`方法`-onTimer`是什么？我想最好从您那里获取对象`buttonsArray`并使用它：...

```
int randomIndex = arc4random() % [buttonsArray count];
UIButton *animatableButton = [buttonsArray objectAtIndex:randomIndex]; 
```

...**

# file-upload - 流星文件上传

> ID：11790191
> 
> 赞同：13
> 
> 时间：2012-08-03T06:09:03.787
> 
> 标签：file-upload, meteor

我看到以前在这里问过这个问题，但此后没有任何`Meteor.http`可用的信息。我仍在掌握 Meteor 的概念，文件上传完全让我望而却步。

**这是我的问题：**
那么，在我认为正确的方法中，
`Meteor.http.call("POST", url, [options], [asyncCallback])`
你为**url**放了什么？使用流星中的客户端/服务器 javascript 关系，它似乎并没有真正使用那么多的 url。

如果有人有一个在流星中上传文件的基本示例，那就***太棒***了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T08:11:48.277

一直在玩流星。使 collectionFS 混合了流星和 gridFS（可以兼容）。在这里测试它：[http](http://collectionfs.meteor.com/) ://collectionfs.meteor.com/ 它支持退出大文件、多个文件、用户等。我测试了 50Mb 似乎还可以，如果连接丢失或浏览器死机，用户可以恢复上传。甚至应该可以让多个用户上传到完全相同的文件 - 还没有退出找到它的用例，但这是可能的。帐户、发布等与集合一样——测试处于自动发布模式，尽管只有元数据可用——数据块通过 blob 在后台提供。

我会尝试在github上获取它，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T20:52:33.463

看看 filepicker.io。他们处理上传，将其存储到您的 S3 中，然后将您可以转储到数据库中的 URL 返回给您。

1.  将文件选择器脚本放入您的客户端文件夹。

    ```
    wget https://api.filepicker.io/v0/filepicker.js 
    ```

2.  插入文件选择器输入标签

    ```
    <input type="filepicker" id="attachment"> 
    ```

3.  在启动时，初始化它：

    ```
    Meteor.startup( function() {
        filepicker.setKey("YOUR FILEPICKER API KEY");
        filepicker.constructWidget(document.getElementById('attachment'));
    }); 
    ```

4.  附加事件处理程序

    ```
    Template.templateNameHere.events({
        'change #attachment': function(evt){
            console.log(evt.files);
        }
    }); 
    ```

（我已经发布了[如何使用 Meteor 处理文件上传？](https://stackoverflow.com/questions/10099202/how-would-one-handle-a-file-upload-with-meteor)抱歉。我是新来的。复制相同的答案两次是否符合规定？任何更了解的人都可以随时编辑。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T10:14:28.687

查看如何使用服务器上的 Meteor.Method 和客户端上的 FileReader 的 api 来完成此操作

[https://gist.github.com/dariocravero/3922137](https://gist.github.com/dariocravero/3922137)

经过几次搜索，这在我看来是处理文件上传最简单的（目前也是流星的风格），没有额外的依赖项。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-10T08:33:18.447

由于流星默认包含 JQuery，因此您可以使用 Jquery 插件，我想，类似：[https](https://github.com/blueimp/jQuery-File-Upload/wiki/Options) ://github.com/blueimp/jQuery-File-Upload/wiki/Options可以为您解决问题，并支持GET 和 PUT。

否则，让它工作会很痛苦，但并非不可能，因为您可以在流星中访问 PUT。

如果您更喜欢更纯粹的 JS 解决方案，也许您可​​以查看：http: [//igstan.ro/posts/2009-01-11-ajax-file-upload-with-pure-javascript.html](http://igstan.ro/posts/2009-01-11-ajax-file-upload-with-pure-javascript.html)

并适应它。

文件上传没有现成的支持，所以分享你的想法，我会很感兴趣的！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-09T18:41:11.363

或者*（如果你不想使用像 filepicker 这样的第三方解决方案）*你可以使用[流星路由器](https://github.com/tmeasday/meteor-router#server-side-routing)包。

这处理服务器端的 HTTP 请求。

# erlang - 默认进程标志

> ID：11790193
> 
> 赞同：6
> 
> 时间：2012-08-03T06:09:08.937
> 
> 标签：erlang

有没有办法指示 Erlang VM 将一组进程标志应用于系统中生成的每个新进程？

例如在测试环境中，我希望每个进程都设置**save_calls**标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:29:11.683

一种方法是将 Erlang 跟踪功能与 .erlang 文件结合起来。

[具体来说，您可以使用erlang:trace/3](http://www.erlang.org/doc/man/erlang.html#trace-3)提供的低级跟踪功能，也可以简单地利用[dbg:tracer/2](http://www.erlang.org/doc/man/dbg.html#tracer-2)函数来创建一个新的跟踪进程，该进程在每次收到跟踪消息时执行您的自定义处理函数.

为了使事情自动化一点，您可以在运行代码的目录或主目录中创建一个*Erlang 启动文件。*Erlang 启动文件是一个特殊的文件，称为 .erlang，每次启动运行时系统时都会执行该文件。

像下面这样的东西应该可以完成这项工作：

```
% -*- Erlang -*-
erlang:display("This is automatically executed.").
dbg:tracer(process, {fun ({trace, Pid, spawn, Pid2, {M, F, Args}}, Data) ->
                             process_flag(Pid2, save_calls, Data),
                             Data;
                         (_Trace, Data) ->
                             Data
                     end, 100}).
dbg:p(new, [procs, sos]). 
```

基本上，我正在创建一个新的跟踪进程，它将跟踪*进程*（第一个参数）。我正在指定要执行的处理程序函数和一些初始数据。在处理程序函数中，我`save_calls`为新生成的进程设置标志，同时忽略所有其他跟踪消息。我使用*Initial Data*参数将`save_calls`' 选项设置为 。在最后一次通话中，我告诉 dbg 我只对新创建的进程感兴趣。我还设置了 ( ) 选项以确保跟踪标志的继承。`100`*`sos``set_on_spawn`*

 *最后，请注意您需要如何使用`process_flag`函数的变体，它需要一个额外的参数（`Pid`您要为其设置标志的进程）。*

# ruby-on-rails - 如何在 Rails 表单中显示 file_field 的验证消息？

> ID：11790197
> 
> 赞同：1
> 
> 时间：2012-08-03T06:09:38.007
> 
> 标签：ruby-on-rails, forms, activerecord, file-upload, validation

我有一个像这样的简单模型类：

```
class Task < ActiveRecord::Base
  attr_accessible :name, :description, :image

  mount_uploader :image, ImageUploader #using CarrierWave for image uploading

  validates_presence_of :name, :image
end 
```

像这样的形式：

```
<%= simple_form_for @task, :html => { :multipart => true } do |f| %>
  <%= f.input :name %>
  <%= f.input :description %>
  <%= f.file_field :image %>
  <%= f.button :submit %>
<% end %> 
```

当我在表单上单击提交时，“名称”输入字段旁边会显示一条验证消息“不能为空”，但“图像文件”字段没有显示任何内容。我想显示“需要图像文件”之类的消息；我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:35:01.720

在您的模型中：

> validates_presence_of :image, :message => "选择文件，傻瓜！"

在您看来，您可以收到如下错误消息：

> @task.errors.messages[:image].to_sentence

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:14:01.183

请参阅：[如何在 rails 3 中验证“file_fields”](https://stackoverflow.com/questions/6041086/how-to-validate-file-fields-in-rails-3)

您需要使用内容特定类型验证任何类型的上传内容字段，然后抛出错误。我建议使用 gem 来上传图片。

# c++ - 无法将 Gloox Xmpp 客户端连接到 Openfire 服务器

> ID：11790200
> 
> 赞同：0
> 
> 时间：2012-08-03T06:09:49.767
> 
> 标签：c++, xmpp, openfire, gloox

我的任务是创建一个 C++ XMPP 客户端，该客户端必须与服务器上的其他客户端进行通信。我使用 Gloox 库编写了一个简单的 C++ XMPP 客户端，用于在服务器上注册一个新用户。我使用的服务器是 Openfire，IDE 是 VC++ 2008。

```
// register_example.cpp

class RegTest : public RegistrationHandler, ConnectionListener, LogHandler

{

public:
RegTest() {}
virtual ~RegTest() {}

void start()
{
  j = new Client( "localhost" );
  j->disableRoster();
  j->registerConnectionListener( this );
  m_reg = new Registration( j );
  m_reg->registerRegistrationHandler( this );
  j->logInstance().registerLogHandler( LogLevelDebug, LogAreaAll, this );
  j->connect();
  delete( m_reg );
  delete( j );
}

virtual void onConnect()
{
 m_reg->fetchRegistrationFields();
}

virtual void onDisconnect( ConnectionError e ){ 
printf( "register_test: disconnected: %d\n", e );    }

virtual bool onTLSConnect( const CertInfo& info )
{
  printf( "status: %d\nissuer: %s\npeer: %s\nprotocol: %s\nmac: %s\ncipher: %s\ncompression: %s\n",
  info.status, info.issuer.c_str(), info.server.c_str(),
  info.protocol.c_str(), info.mac.c_str(), info.cipher.c_str(),
  info.compression.c_str() );
  return true;
}

virtual void handleRegistrationFields( const JID& /*from*/, int fields, std::string  instructions )
{
  printf( "fields: %d\ninstructions: %s\n", fields, instructions.c_str() );
  RegistrationFields vals;
  vals.username = "testuser";
  vals.password = "testpwd";
  m_reg->createAccount( fields, vals );
}

virtual void handleRegistrationResult( const JID& /*from*/, RegistrationResult result )
{
  printf( "result: %d\n", result );
  j->disconnect();
}

virtual void handleAlreadyRegistered( const JID& /*from*/ )
{
  printf( "the account already exists.\n" );
}

virtual void handleDataForm( const JID& /*from*/, const DataForm& /*form*/ )
{
  printf( "datForm received\n" );
}

virtual void handleOOB( const JID& /*from*/, const OOB& oob )
{
  printf( "OOB registration requested. %s: %s\n", oob.desc().c_str(), oob.url().c_str() );
}

virtual void handleLog( LogLevel level, LogArea area, const std::string& message )
{
  printf("log: level: %d, area: %d, %s\n", level, area, message.c_str() );
}
 private:
 Registration *m_reg;
 Client *j;
};

int _tmain(int argc, _TCHAR* argv[])
{
  RegTest *r = new RegTest();
  r->start();
  return 0;
} 
```

代码构建成功，但是当我运行代码时，我收到以下错误代码 400--- 错误请求。请告诉我出了什么问题？日志 -

```
 **log: level: 0, area: 8, This is gloox 1.0, connecting to localhost:-1...

log: level: 1, area: 32, DnsQuery_UTF8() failed: 9003
log: level: 1, area: 32, Notice: no SRV record found for localhost, using defaul
t port.
log: level: 0, area: 32, Connecting to localhost (127.0.0.1:5222)
log: level: 0, area: 32, Connected to localhost (127.0.0.1:5222)
log: level: 0, area: 262144, <?xml version='1.0' ?><stream:stream to='localhost'
 xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'  xml:lang
='en' version='1.0'>
log: level: 0, area: 131072, <stream:stream xmlns:stream='http://etherx.jabber.o
rg/streams' xmlns='jabber:client' from='ds-001d92dde38d' id='ab49a54c' xml:lang=
'en' version='1.0'/>
log: level: 0, area: 131072, <stream:features xmlns:stream='http://etherx.jabber
.org/streams'><starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/><mechanisms xml
ns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>DIGEST-MD5</mechanism><mechanis
m>PLAIN</mechanism><mechanism>ANONYMOUS</mechanism><mechanism>CRAM-MD5</mechanis
m></mechanisms><compression xmlns='http://jabber.org/features/compress'><method>
zlib</method></compression><auth xmlns='http://jabber.org/features/iq-auth'/><re
gister xmlns='http://jabber.org/features/iq-register'/></stream:features>
log: level: 0, area: 262144, <starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>
log: level: 0, area: 131072, <proceed xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>
log: level: 0, area: 4, starting TLS handshake...
status: -842150451
issuer: CN=ds-001d92dde38d
peer: CN=ds-001d92dde38d
protocol: TLSv1
mac: SHA
cipher: AES_128
compression:
log: level: 0, area: 8, connection encryption active
log: level: 0, area: 262144, <?xml version='1.0' ?><stream:stream to='localhost'
 xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'  xml:lang
='en' version='1.0'>
log: level: 0, area: 131072, <stream:stream xmlns:stream='http://etherx.jabber.o
rg/streams' xmlns='jabber:client' from='ds-001d92dde38d' id='ab49a54c' xml:lang=
'en' version='1.0'/>
log: level: 0, area: 131072, <stream:features xmlns:stream='http://etherx.jabber
.org/streams'><mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>DI
GEST-MD5</mechanism><mechanism>PLAIN</mechanism><mechanism>ANONYMOUS</mechanism>
<mechanism>CRAM-MD5</mechanism></mechanisms><compression xmlns='http://jabber.or
g/features/compress'><method>zlib</method></compression><auth xmlns='http://jabb
er.org/features/iq-auth'/><register xmlns='http://jabber.org/features/iq-registe
r'/></stream:features>
log: level: 0, area: 262144, <auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mech
anism='ANONYMOUS'/>
log: level: 0, area: 131072, <success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/>
log: level: 0, area: 4, SASL authentication successful
log: level: 0, area: 262144, <?xml version='1.0' ?><stream:stream to='localhost'
 xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'  xml:lang
='en' version='1.0'>
log: level: 0, area: 131072, <stream:stream xmlns:stream='http://etherx.jabber.o
rg/streams' xmlns='jabber:client' from='ds-001d92dde38d' id='ab49a54c' xml:lang=
'en' version='1.0'/>
log: level: 0, area: 131072, <stream:features xmlns:stream='http://etherx.jabber
.org/streams'><compression xmlns='http://jabber.org/features/compress'><method>z
lib</method></compression><bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'/><sessi
on xmlns='urn:ietf:params:xml:ns:xmpp-session'/></stream:features>
log: level: 0, area: 262144, <iq id='uid:501a3ee9:00000029' type='set' from='loc
alhost' xmlns='jabber:client'><bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'><re
source/></bind></iq>
log: level: 0, area: 131072, <iq type='result' id='uid:501a3ee9:00000029' to='ds
-001d92dde38d/ab49a54c'><bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'><jid>ab49
a54c@ds-001d92dde38d/ab49a54c</jid></bind></iq>
log: level: 0, area: 262144, <iq id='uid:501a3ee9:00004823' type='set' from='ab4
9a54c@ds-001d92dde38d/ab49a54c' xmlns='jabber:client'><session xmlns='urn:ietf:p
arams:xml:ns:xmpp-session'/></iq>
log: level: 0, area: 131072, <iq type='result' id='uid:501a3ee9:00004823' to='ab
49a54c@ds-001d92dde38d/ab49a54c'/>
log: level: 0, area: 262144, <presence from='ab49a54c@ds-001d92dde38d/ab49a54c'
xmlns='jabber:client'><priority>0</priority><c xmlns='http://jabber.org/protocol
/caps' hash='sha-1' node='http://camaya.net/gloox' ver='1LpOuB49QCQE6BcZoAF5tBoA
Ldg='/></presence>
log: level: 0, area: 262144, <iq id='uid:501a3ee9:000018be' type='get' from='ab4
9a54c@ds-001d92dde38d/ab49a54c' xmlns='jabber:client'><query xmlns='jabber:iq:re
gister'/></iq>
log: level: 0, area: 131072, <iq type='result' id='uid:501a3ee9:000018be' to='ab
49a54c@ds-001d92dde38d/ab49a54c'><query xmlns='jabber:iq:register'><username/><p
assword/><email/><name/><x xmlns='jabber:x:data' type='form'><title>XMPP Client
Registration</title><instructions>Please provide the following information</inst
ructions><field var='FORM_TYPE' type='hidden'><value>jabber:iq:register</value><
/field><field var='username' type='text-single' label='Username'><required/></fi
eld><field var='name' type='text-single' label='Full name'/><field var='email' t
ype='text-single' label='Email'/><field var='password' type='text-private' label
='Password'><required/></field></x></query></iq>
datForm received
fields: 77
instructions:
log: level: 0, area: 262144, <iq id='uid:501a3ee9:00006784' type='set' from='ab4
9a54c@ds-001d92dde38d/ab49a54c' xmlns='jabber:client'><query xmlns='jabber:iq:re
gister'><username>testuser</username><password>testpwd</password><name/><email/>
</query></iq>
log: level: 0, area: 131072, <iq type='error' id='uid:501a3ee9:00006784' to='ab4
9a54c@ds-001d92dde38d/ab49a54c'><query xmlns='jabber:iq:register'><username>test
user</username><password>testpwd</password><name/><email/></query><error code='4
00' type='modify'><bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/></er
ror></iq>
result: 4
log: level: 0, area: 262144, </stream:stream>
register_test: disconnected: 17** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:06:42.310

服务器需要的信息多于“jabber:iq:register”命名空间的模式所支持的信息，因此服务器向您发送了一个数据表单。您必须返回优先于“jabber:iq:register”字段的填充数据表单。它在XEP-0077（带内注册）的[可扩展性部分中定义。](http://xmpp.org/extensions/xep-0077.html#extensibility)

# qtp - 如何使用 QTP 更新 QC 11 中测试实例的描述/可选 ID 字段？

> ID：11790207
> 
> 赞同：0
> 
> 时间：2012-08-03T06:10:19.663
> 
> 标签：qtp, hp-quality-center

我想使用 QTP 更新 QC 中测试实例的特定字段（描述/可选 ID）。以下是我目前正在做的事情：

1.  通过 QTP，通过调用 OTA API，我连接到 QC 并将测试实例拉入测试实验室中的测试集之一（此代码正在运行）
2.  现在我想更新每个拉取实例的描述或可选 ID 字段（我在 excel 中有所有这些东西）

PS：对不起，我不能把我的代码放在这里。我坚持添加该字段值。我可以到达 TSTestFactory 但无法超越。

如果有人有任何线索，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:14:44.293

这是我用来更新 TestSet 测试状态的代码片段。

```
 TSTestFactory tstf = (TSTestFactory)m_Connection.TSTestFactory;
  List tests = tstf.NewList("");

  foreach (TSTest test in tests)
  {
    test.Status = status;
    test.Post();
  } 
```

# javascript - 调用javascript函数时未定义

> ID：11790208
> 
> 赞同：0
> 
> 时间：2012-08-03T06:10:21.047
> 
> 标签：javascript, android, html, android-webview

我能够将数据从我的 android 传递到 javascript。但问题是，当我调用函数 setValue() 时，它变为未定义，但在加载时它传递了正确的值。下面是我的代码。

这是我的 Java 类代码

```
public class PaymentActivity extends Activity {

String amount1;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.payment);

         Bundle extras = getIntent().getExtras(); 
            if(extras !=null)
            {
                amount1 = extras.getString("amount1");

            }

        WebView web = (WebView) findViewById(R.id.web1);
        web.getSettings().setJavaScriptEnabled(true);
        web.loadUrl("javascript:window.onload = function(){setValue(\""+ amount1 +"\");};");
        web.loadUrl("file:///android_asset/www/index.html");

    }

} 
```

这是我的网页代码

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

    Whats your Name?
    <input id="name" value="" />
    <input id="pass" value="" />
    <button onclick = "setValue()">Submit</button>

<script type="text/javascript"> 
    function setValue(amount1){
    myValue = amount1;
    document.getElementById("pass").value = myValue;

    }
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:43:55.353

您不能直接从加载活动中调用 java 脚本函数。您需要使用处理程序和线程以及隐藏按钮

```
public class AskUsActivity extends Activity{
private Button scriptButton;
private WebView webView;
private Handler handler;;

MyJavaScriptInterface myJavaScriptInterface;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ask_us);

    webView = (WebView)findViewById(R.id.askUs_webView);
    scriptButton=(Button)findViewById(R.id.scriptButton);

    loadData();

    myJavaScriptInterface = new MyJavaScriptInterface(this);

    webView.loadUrl("file:///android_asset/AskUs.htm");

    webView.addJavascriptInterface(myJavaScriptInterface, "AndroidFunction");

    webView.getSettings().setJavaScriptEnabled(true);

    webView.setWebChromeClient(new WebChromeClient());

    handler=new Handler(){
        @Override
        public void handleMessage(Message msg) {
            System.out.println("inside handler");
            scriptButton.performClick();
        }
    };

    scriptButton.setOnClickListener(new Button.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            webView.loadUrl("javascript:setcontactInfo('1|*|nikhil|||');");
        }
    });

    //      String selectedImagePath="1|*|nikhil|||";

    //      webView.loadUrl("javascript:setInternational()");

    //      new Thread(){
    //          @Override
    //          public void run() {
    //              System.out.println("inside thread.................Start.......");
    //              webView.loadUrl("javascript:setcontactInfo('1|*|nikhil|||');");
    //              System.out.println("inside thread.................end.......");
    //          }
    //      }.start();

}

@Override
protected void onResume() {
    super.onResume();
    try {
        Thread.sleep(400);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    new Thread(){
        public void run() {
            System.out.println("inside thread................");
            handler.sendEmptyMessage(0);
        };
    }.start();
}

private void loadData(){
    try {

        String destPath = "/data/data/" + getPackageName()+ "/databases/kellypipe.sqlite";

        File f = new File(destPath);
        if(!f.exists()){
            Log.v("<<< TAG >>>","File Not Exist");
            InputStream in = getAssets().open("kellypipe.sqlite");
            OutputStream out = new FileOutputStream(destPath);

            byte[] buffer = new byte[1024];
            int length;
            while ((length = in.read(buffer)) > 0) {
                out.write(buffer, 0, length);
            }
            in.close();
            out.close();
        }

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        Log.v("<<< TAG >>>","ioexeption");
        e.printStackTrace();
    }

    DBManager dbManager =  new DBManager(this);
    Log.v("<<< TAG >>>","Database is there with version: "+dbManager.getReadableDatabase().getVersion());
    //      String sql = "select * from CasingMetric";

    String sql= "SELECT ID,listname,name,address,contact,email from contactInfo order by ID";

    SQLiteDatabase db = dbManager.getReadableDatabase();
    Cursor cursor = db.rawQuery(sql, null);
    Log.v("<<< TAG >>>","Query Result:"+cursor);
    cursor.moveToFirst();
    int i=cursor.getColumnIndex("listname");
    int j=cursor.getColumnIndex("name");

    int x=0;
    while(!cursor.isAfterLast()){
        x++;
        System.out.println("Listname : "+cursor.getString(i)+ "  Name: "+cursor.getString(j)+" :: X is : "+x);
        cursor.moveToNext();
    }

    cursor.close();
    db.close();
    dbManager.close();
}

public class MyJavaScriptInterface {
    Context mContext;

    MyJavaScriptInterface(Context c) {
        mContext = c;
    }

    public void showToast(String toast){
        //Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
        webView.loadUrl("javascript:callFromActivity()");
    }

    public void openAndroidDialog(){
        AlertDialog.Builder myDialog = new AlertDialog.Builder(AskUsActivity.this);
        myDialog.setTitle("DANGER!");
        myDialog.setMessage("You can do what you want!");
        myDialog.setPositiveButton("ON", null);
        myDialog.show();
    }
}

} 
```

# selenium - 无法使用 Xpath 定位 UI 元素？

> ID：11790212
> 
> 赞同：0
> 
> 时间：2012-08-03T06:10:48.767
> 
> 标签：selenium

我正在尝试使用 selenium 定位 UI 元素，但 Xpath 正在动态更改 evrytime 这是源

```
<div id="tab-1080" class="x-tab x-box-item x-tab-default x-top x-tab-top x-tab-default-     top x-noicon x-tab-noicon x-tab-default-noicon x-active x-tab-active x-tab-default-active x-top-active x-tab-top-active x-tab-default-top-active" style="margin: 0px; left: 406px; top: 0px;">
<em id="tab-1080-btnWrap" class="">
<button id="tab-1080-btnEl" class="x-tab-center" autocomplete="off" role="button"  hidefocus="true" type="button">
<span id="tab-1080-btnInnerEl" class="x-tab-inner" style="">Report Center</span>
<span id="tab-1080-btnIconEl" class="x-tab-icon x-hide-display"> </span>
</button>
</em>
</div> 
```

我需要唯一地找到它，但 id 1080 不断变化 evreytime ？任何人都可以帮助如何使用跨度 ID“报告中心”进行定位，因为这是在我的网页中区分此按钮的唯一属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:39:56.163

您可以使用

```
//span[text()='Report Center'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:19:11.073

就我个人而言，我会使用 css：它们比 xpath 更快，并且被社区普遍接受为优越，我也认为如果你做一些研究，它们也更容易使用。

[http://sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/](http://sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/)

```
span.x-tab-inner ==> finds the element by its class
span[id*=btnInnerEl]` ==> finds element by a partial piece (substring) of the id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T12:59:53.630

有多种方式；我可以建议这些（当时进入我的脑海）：

1.  `"//span[contains(text(), 'Report Center')]"`

2.  `"//span[contains(@id, 'btnInnerEl')]"`

3.  `"//span[contains(text(), 'Report Center') and contains(@id, 'btnInnerEl')]"`

# mysql - mysql触发器有问题

> ID：11790213
> 
> 赞同：0
> 
> 时间：2012-08-03T06:10:49.857
> 
> 标签：mysql

我有两个 mysql 表 -**员工**和**员工日志**

我已经为它写了下面的触发器，目的是，在员工中插入什么数据，**应该**在employee_log 中插入相同**的**数据。

 **```
 delimiter |
    CREATE TRIGGER `emp`  
    AFTER INSERT ON `employee` 
    FOR EACH ROW  
    BEGIN  
    INSERT INTO employee_log (id,userId,firstname,lastname)  
    VALUES (NEW.id,NEW.userId,NEW.firstname,NEW.lastname);  
    END | 
```

上面的触发器执行得很好，现在我已经尝试在员工表中插入记录它给我下面的错误，我不知道这里出了什么问题，请帮助..

```
 Error is -
 #1436 - Thread stack overrun: 5848 bytes used of a 131072 byte stack, and 128000 bytes needed. Use 'mysqld -O thread_stack=#' to specify a bigger stack. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:18:48.553

尝试将`thread_stack`全局变量的值设置为文件中的默认值`196608`，`my.cnf`然后重新启动 MySQL 服务器也尝试：

```
thread_stack = 256K 
```

我希望你在这里找到答案：[MySQL 错误 1436：线程堆栈溢出，使用简单查询](https://stackoverflow.com/questions/8821575/mysql-error-1436-thread-stack-overrun-with-simple-query)**

# html - 有谁知道如何在选项标签中添加上标 有谁知道如何在 <select name=" "><option value=" ">24th</option></select> 的选项标签中添加上标协议和委托是为这些仅用于目的，即在发生事件时在某个地方做某事..休息取决于您和您的要求。多个 UITableview 索引栏我在代码中的视图中添加了两个 UITableView。我正确地将代表和数据源设置为 s

> ID：11790214
> 
> 赞同：6
> 
> 时间：2012-08-03T06:10:52.823
> 
> 标签：html, css, styling

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T06:20:29.843

如果您的用户有合适的字体（[这里](http://www.fileformat.info/info/unicode/char/1d57/fontsupport.htm)有一个列表），您可以使用 Unicode 上标字符：

```
<select name=" ">
  <option value=" ">24&#x1D57;&#x02B0;</option>
</select>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T06:22:16.147

如果您将文档编码设置为 UTF-8 或使用 unicode 转义，则可以为此使用[Unicode 上标](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)，例如：

```
<option>25ᵗʰ&lt;/option> 
```

但是，这在某些字体或浏览器中可能根本无法正确显示，并且通常不如使用 HTML/CSS 上标功能好看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T14:29:21.517

为了完整起见，为了将来，我提到了通过[`font-feature-settings`](https://developer.mozilla.org/en-US/docs/Web/CSS/font-feature-settings?redirectlocale=en-US&redirectslug=CSS/font-feature-settings)在 CSS 中使用字体的 OpenType 特性的可能性。使用该[`ordn`功能](http://www.microsoft.com/typography/otspec/features_ko.htm#ordn)，您可以指定使用字体中的上标字母（如果可用）。对浏览器和字体的支持仍然非常有限，但是在足够新的 Windows 版本（安装了 Calibri 之类的“C 字体”）上的足够新的浏览器中，以下内容可以工作：

```
<style>
select, option { 
  -webkit-font-feature-settings: "ordn";
  -moz-font-feature-settings: "ordn";
  font-feature-settings: "ordn";
  font-family: Calibri;
}
</style>
<select>
<option>24th
</select> 
```

这只能在内容中的*所有*字母`option`都显示为上标时使用。

该方法会优雅地降级：当该技术不起作用时，渲染只会退回到正常显示“24th”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-03T06:17:17.013

因为选择框通常是 OS 对象而不是浏览器绘制的某些东西，所以您仅限于该对象可以执行的操作。

它是 Windows 上的 Listbox 或 Combobox，它们不具备绘制超级脚本的能力。

恐怕你将不得不生活而无法做到这一点。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-11-21T12:58:45.143

可以这样写

```
string item=HttpUtility.HtmlDecode("ml/min/1.73m&amp;#178;") 
```

有关上标的更多信息，您可以查看此链接 [http://symbolcodes.tlt.psu.edu/bylanguage/mathchart.html#super](http://symbolcodes.tlt.psu.edu/bylanguage/mathchart.html#super)

# iphone - 多个 UITableview 索引栏

> ID：11790217
> 
> 赞同：0
> 
> 时间：2012-08-03T06:11:07.177
> 
> 标签：iphone, ios, uitableview

我在代码中的视图中添加了两个 UITableView。我正确地将代表和数据源设置为 self. 我添加了所有用于返回行数、行高、节数等的委托方法。一切正常。我还在两个表中添加了索引栏。现在的问题是索引栏不适用于第一个表，而它对第二个表工作正常。

当我单击第一个表索引栏上的任何字符时，它会响应第二个表。我无法为第一张桌子采取行动。我还注意到，如果我不将第二个表添加到我的视图中，那么我可以获得第一个表的操作。

这是我的代码

```
- (void)viewDidLoad
{
    accountsTable = [[UITableView alloc] initWithFrame:CGRectMake(0,27, 320, 390)     style:UITableViewStylePlain];
    [accountsTable setDelegate:self];
    [accountsTable setDataSource:self];
    [self.view addSubview:accountsTable];
    accountsTable.backgroundColor = [UIColor clearColor];
    [accountsTable release];

    keyConnectionsTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 27, 320, 390) style:UITableViewStylePlain];
    [keyConnectionsTable setDelegate:self];
    [keyConnectionsTable setDataSource:self];
    [keyConnectionsTable setBackgroundColor:[UIColor clearColor]];
    [keyConnectionsTable setHidden:YES];
    [self.view addSubview:keyConnectionsTable];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
    return [NSArray arrayWithArray:[[UILocalizedIndexedCollation currentCollation] sectionIndexTitles]];
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    return [[UILocalizedIndexedCollation currentCollation] sectionForSectionIndexTitleAtIndex:index]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:20:09.413

您需要区分两个表视图。为此，您可以简单地使用“tag”属性并将其设置为不同的值，或者您可以`@property`在视图控制器中为每个 TableView 设置一个。

```
@property (strong) IBOutlet UITableView *tv1;
@property (strong) IBOutlet UITableView *tv2; 
```

对于您的方法，您可以执行以下操作：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *) tableView {
    if (tableView == self.tv1) {
        return 1;
    } else if (tableView == self.tv2) {
        return 2;
    }
} 
```

**底线**

您需要区分两个 TableView，否则您会弄得一团糟:)

# iphone - 单击导航返回按钮时将调用什么方法-IOS？

> ID：11790220
> 
> 赞同：0
> 
> 时间：2012-08-03T06:11:19.647
> 
> 标签：iphone, objective-c, ios, xcode

这个问题看起来重复了，但我没有为我的问题找到合适的解决方案。就我而言，单击后退按钮后，我想隐藏导航栏。例如，View1 推送了 view2，view2 将有导航栏，一旦我点击返回，它就会让我回到 view 1，它不应该包含导航栏，我需要隐藏它。我尝试在视图 2 中使用 viewWillDisappear 方法进行隐藏，它可以工作，但是如果我有更多视图并且如果我点击后退按钮，我会从 view1 推送每个视图，导航栏应该隐藏在 view1 中。无论如何，在视图 1 本身中是否知道其他视图已弹出。我在 view1 中尝试了 viewwillappear 方法，它没有被调用。我能在这里做什么。？

这个方法在我最初加载 view1 时被调用，而不是在弹出 view2 之后调用。

```
 - (void) viewWillAppear : (BOOL)animated
{
    [root_obj.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

这就是我推动视图 2 的方式。

```
[root_obj.navigationController pushViewController:view2 animated:NO]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:50:17.390

我想，你忘了调用 viewWillAppear: 超类的方法。

```
-(void) viewWillAppear : (BOOL)animated
{

    [super viewWillAppear:animated];

    [root_obj.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:13:51.903

为什么不隐藏`NavigationBar`in`View1's` `ViewDidAppear`方法

## 编辑

我不确定您的代码有什么问题，但您可以在`ViewWillAppear`或`ViewDidAppear`方法中执行此类操作以获取更多信息[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)并检查`ViewWillAppear`或`ViewDidAppear`

# javascript - 为什么 socket.io 不发出事件触发

> ID：11790224
> 
> 赞同：0
> 
> 时间：2012-08-03T06:11:42.683
> 
> 标签：javascript, node.js, express, socket.io

我正在使用 socket.io + express。我想从客户端向服务器发出 'start' 和 'user_info' 事件。但它不起作用。我是这样写的...

### 服务器.js

```
var express = require("express");
var http = require("http");
var socket = require("socket.io");
var app = express();
var ejs = require("ejs");
var server = http.createServer(app);
var io = require("socket.io").listen(server);
var redis = require("redis");
var _ = require("underscore");
require("./models/User");

app.get("/",function(req,res){

  res.render("index",{});

});

  socket.on("start",function(data){
    console.log("Started");
  });

   socket.on("user_info",function(user_info){
    var self = this;
        var name = user_info.name;
        var password = user_info.password;
    user.name = name;
    user.password = password;
    var data = JSON.stringify({name: name,password: password});
  });

### client.js

$(document).ready(function(){
    var socket = io.connect("http://localhost:8080");

    $("#register-btn").on("click",function(data){
        $("#notice").html("Registerd");
        var name = $("#name").val();
        var password = $("#password").val();
        var confirmPassword = $("#confirm-password").val();

        if (name && (password === confirmPassword)){
                    // user_info event is works.
            socket.emit("user_info",{"name": name,"password": password});
                    // I wonder why  start event does not works.
                    socket.emit("start",{"name": "yahoo"});

        }else{
            $("#notice").html("try again");
        }
    });
}); 
```

我不知道为什么没有触发“开始”事件。你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:24:04.573

您缺少 Socket.io 的连接部分

```
// Noticed I removed the var socket = require('....
var io = require("socket.io").listen(server);

io.sockets.on('connection', function (socket) {

   console.log('Client Connected')       

   socket.on("start",function(data){
      console.log("Started");
   });

   socket.on("user_info",function(user_info){
      var self = this;
      var name = user_info.name;
      var password = user_info.password;
      user.name = name;
      user.password = password;
      var data = JSON.stringify({name: name,password: password});
   });

}); 
```

您可能想阅读文档@ [http://socket.io/](http://socket.io/)

# android - Android线性/相对布局 - 如何在中间“自动调整大小”对象（3个对象）

> ID：11790225
> 
> 赞同：7
> 
> 时间：2012-08-03T06:11:51.980
> 
> 标签：android, uitableview, android-layout, android-linearlayout, android-relativelayout

我在android中有两个线性（也尝试过相对）布局的案例。一种发生在水平方向，另一种发生在垂直方向。让我们从水平开始：

它是这样的：

```
<LinearLayout ... >   
    <Button ...  layout:gravity = "left" layout:width = "wrap_content"/>
    <TextView ... layout:width = ??????? />
    <Image  .... layout:gravity = "right" layout:width = "wrap_content"/>
</LinearLayout> 
```

好吧，我希望按钮留在左边，图像留在右边（坚持到最后，不仅仅是文本视图的右边）和文本视图（可能带有自动宽度或其他）留在中间. 如果我输入 textview width = "fill/match_parent 它会将图像发送到屏幕之外。如果我输入 wrap_content，则图像不会停留在屏幕右侧。我也尝试过相对布局但没有成功。

在垂直的情况下，我有类似的情况：

```
<LinearLayout ...>
    <LinearLayout .... layout:height = "wrap_content" layout:gravity= "top" />
    <ListView layout:height = ???????>
    <LinearLayout ... layout:height = "wrap_content" layout:gravity = "bottom" />
</LinearLayout> 
```

这里的要求相同。我希望第一个 L.layout 保持在顶部，列表视图在它们之间自动调整大小，第二个线性布局保持在底部。（想象一下，我正在尝试在 iPhone 中创建一个看起来像 UITableView 的视图，该视图在底部有一个 NavigationBar、项目列表和一个 ToolBar。拳头 LinearLayout 是 NavigationBar，LIst 视图是单元格，第二个 LinearLayout 是工具栏）。

有什么建议么？更喜欢xml解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T06:19:38.483

在这里我们可以通过使用RelativeLayout来简单地完成。

**水平对齐**

```
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">  

  <Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="something"
    />

  <TextView
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/image"
    android:layout_toRightOf="@+id/button" />

  <ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:background="@drawable/icon" />
</RelativeLayout> 
```

**垂直对齐**

```
 <LinearLayout
    android:id="@+id/linear_top"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

  <ListView
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/linear_top"
    android:layout_above="@+id/linear_bottom" />

  <LinearLayout
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T06:23:50.953

对于您的第二个要求`layout_weight`，用于列表视图

```
<RelativeLayout ...>
   <LinearLayout 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent"
        android:layout_alignParentTop="true" />
   <ListView 
        android:layout_height ="0dp"
        android:layout_width="fill_parent" 
        android:layout_weight="1"
        android:layout_below="@+id/top_layout"
        android:layout_above="@+id/bottm_layout" />
   <LinearLayout 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent"   
        android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:46:50.850

您可以尝试使用**TableLayout**而不是 LinearLayout，其中**Stretch Column**为 1（Table LAyout 中的列的索引基数为 0）。

第一列是您的按钮。

第二列是您的文本视图。

第三列是你的形象。

您可以在 Google 上搜索示例或查看[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)。

**更新：**

您可以更清楚地看到这一点：

```
<RelativeLayout>
     <!-- This is Header-->
     <LinearLayout
          .....
          android:layout_alignParentTop="true" >
     </LinearLayout>

     <!-- This is your table-->
     <TableLayout
          .....
          android:stretchColumns = 1>
          <TableRow>
               <Button>
                .....
               </Button>

               <TextView>
                .....
               </TextView>

               <ImageView>
                .....
               </ImageView>
          </TableRow>
     </TableLayout>

     <!-- This is Footer-->
     <LinearLayout
          ..... 
          android:layout_alignParentBottom="true" >
     </LinearLayout>
</RelativeLayout> 
```

# php - 一对多关系的学说表现

> ID：11790229
> 
> 赞同：0
> 
> 时间：2012-08-03T06:12:06.757
> 
> 标签：php, performance, doctrine-orm, one-to-many

我想知道 OneToMany Realationship 是否会影响应用程序的性能。比如说，城市和用户实体是一对多的关系，也就是说，一个城市可以包含很多用户。现在在实体类中设置关系后，每当我检索一个城市时，我都可以通过以下方式获取其用户：

```
$users = $city->getUsers(); 
```

现在，我想知道内部架构。每当我检索城市时，它还会查询所有用户吗？如果是这样，假设一个城市可以有 10000 个用户。现在，我只检索一个城市不是性能问题，而是它与所有 10000 个用户相处得很好吗？或者，它使用了其他一些机制，我完全可以实现它？

希望从您的专家那里得到解释，以及关于这种情况的最佳实践的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:46:42.183

好吧，我不是专家，但我可以与您分享一些您可以在应用程序开发中考虑的良好实践：

### 获取="EXTRA_LAZY"

默认情况下，学说 2.0 将加载整个集合并将其存储在内存中。在像您这样的场景中，用户集合可能是表维度的性能问题。那么，为什么不将关系标记为 EXTRA_LAZY？仅在访问时才加载具有此获取模式的实体，而不会触发集合的完全加载。

```
/**
 * @ManyToMany(targetEntity="User", mappedBy="cities", fetch="EXTRA_LAZY")
 */ 
```

允许这种获取模式，您可以使用类似`slide()`且`count()`健壮的功能。例如：

```
$users = $em->getRepository('models\User')->findAll();
echo  $users->count(); 
```

该代码触发了一条 sql 语句，就像`select count(*) from users..`在 $user 集合中循环一样。

### 保湿对象

并不总是需要加载实体集合。如果您正在创建一个博客系统，我们只需要提供一个帖子标题列表。这种基础设施可以通过[Hydrating 对象](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/dql-doctrine-query-language.html#query-result-formats)进行改进以用于只读目的。

### 有用的链接

一些链接可将您引导至官方学说文档指南。

*   [提高性能](http://doctrine-orm.readthedocs.org/en/latest/reference/improving-performance.html)
*   [原则 2，最佳实践](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/best-practices.html)

# c# - C# 中的性能和内存消耗

> ID：11790232
> 
> 赞同：1
> 
> 时间：2012-08-03T06:12:20.453
> 
> 标签：c#, asp.net, .net, memory-management

我有两个问题：

1）我需要一些关于代码的专家观点，这将是性能和内存消耗明智的声音。

2）性能和内存消耗明智地遵循一段代码，为什么？

需要将可能达到最大值的计数器增加 100 并编写如下代码：

一些示例代码如下：

```
for(int i=0;i=100;i++)
{
     一些代码
}

对于（长 i=0；i=1000；i++）
{
     一些代码
}

```

如果要求相同，使用 Int16 或其他任何东西而不是 int 有多好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T06:18:42.403

> 需要将可能达到最大值的计数器增加 100 并编写如下代码：

给出的选项：

```
for(int i=0;i=100;i++)

for(long i=0;i=1000;i++) 
```

编辑：如前所述，这些甚至都不会真正编译，因为中间表达式是赋值而不是 type 的表达式`bool`。

这证明了一个非常重要的观点：**在你快速运行之前让你的代码工作**。您的两个循环不做同样的事情 - 一个的上限为 1000，另一个的上限为 100。如果您必须在“快速”和“正确”之间进行选择，您几乎*总是*想选择“正确” ”。（当然，这也有例外——但这通常是关于大量数据结果的绝对正确性，而不是*代码*的正确性。）

在此处更改变量类型不太可能产生任何可测量的差异。微优化通常就是这种情况。在性能方面，架构通常*比*方法内优化更重要——而且以后也更难改变。一般来说，您应该：

*   使用最正确和最简单地表示您的数据的类型编写最简洁的代码
*   确定合理的性能要求
*   衡量您的干净实施
*   *如果*它的性能不够好，请使用分析等来找出如何改进它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:16:53.560

```
DateTime dtStart = DateTime.Now;

for(int i=0;i=10000;i++)
{
     Some Code
}

response.write ((DateTime.Now - dtStart).TotalMilliseconds.ToString()); 
```

Long 也一样，你可以知道哪个更好...... ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:24:23.867

当你做的事情需要一个代表迭代的数字或某物的数量时，你应该总是使用`int`，除非你有很好的*语义*理由来使用不同的类型（即数据永远不能是负数，或者它可能大于 2^ 31)。此外，在编写 c# 代码时，担心这种纳米优化问题基本上无关紧要。

话虽如此，如果您想知道这样的事情之间的区别（递增 4 字节寄存器与递增 8 字节），您可以随时参考 Agner 先生的精彩[指令表](http://www.agner.org/optimize/instruction_tables.pdf)。

在 Amd64 机器上，递增与递增`long`所用的时间相同`int`。**

在 32 位 x86 机器上，递增`int`将花费更少的时间。

** 几乎所有逻辑和数学运算都是如此，只要该值不是内存绑定和未对齐的。在 .NET 中，a`long`将始终对齐，因此两者始终相同。

# wordpress - wordpress 页面上的随机评论

> ID：11790239
> 
> 赞同：0
> 
> 时间：2012-08-03T06:12:51.970
> 
> 标签：wordpress

我的问题是，如何在 wordpress 的页面上显示随机评论？在我的网站上，我有一个 wp 页面，人们在其中留下很多评论，我希望它们随机显示，而不是按日期时间分类，这是分页评论的代码，我该怎么办？谢谢 ：）

```
<?php foreach ($comments as $comment) : ?>

        <li <?php echo $oddcomment; ?>id="comment-<?php comment_ID() ?>">
            <div class="paginated-comments-number" style="float: left; color: #999; width: 30px; text-align: left;"></div>
        <?php
                if ( function_exists('get_avatar') )
                    echo get_avatar( $comment, 48 );
            ?>
            <cite><?php comment_author_link() ?> 
            </cite>
            <?php if ($comment->comment_approved == '0') : ?>
            <em>Your comment is awaiting moderation.</em>
          <?php endif; ?><br />

            <small class="commentmetadata"><a href="<?php echo Paginated_Comments_URL('comment-' . get_comment_ID()); ?>" title=""><?php comment_date('F jS, Y') ?> at <?php comment_time() ?></a> <?php edit_comment_link('edit','&nbsp;&nbsp;',''); ?></small>

            <?php comment_text() ?>
        </li>

    <?php
        /* Changes every other comment to a different class */
        $oddcomment = ( empty( $oddcomment ) ) ? 'class="alt" ' : '';
    ?>

    <?php endforeach; /* end for each comment */ ?>
</ol>

<p>
      <!-- Start Paginated Comments Pages -->
      <?php if ( Paginated_Comments_have_pages() ) : ?>
</p>
    <p>
      <?php endif; ?>
      <!-- End Paginated Comments Pages -->

      <?php else : // this is displayed if there are no comments so far ?>

      <?php if ('open' == $post->comment_status) : ?>
      <!-- If comments are open, but there are no comments. -->

      <?php else : // comments are closed ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:32:24.210

下面是一个**[短](http://codex.wordpress.org/Shortcode_API)**代码功能的建议，可以满足您的要求：

```
add_shortcode( 'randomComment', 'randomComment_handler' );

function randomComment_handler($post_id) {
    extract( shortcode_atts( array(
        'post_id' => '0',
        ), $atts ) );
    $out = "";
    $comments = get_comments("post_id=$post_id&status=approve");
    if ($comments) {
        $ndx = mt_rand(0,sizeof($comments)) - 1; 
        $comment = $comments[$ndx];
        $out = "<div class='randomComment'><div class='randomAuthor'>".$comment->comment_author."</div><div class='randomText'>".$comment->comment_content."</div></div>";
    }
    return $out;
} 
```

这进入您的`functions.php`, 并允许您将简码放在任何页面或帖子上以显示随机评论：

```
[randomComment post_id="1337"] 
```

只需`post_id`根据您要从中提取随机评论的帖子更改。

# java - 如何使用 Java 运行带有通配符的 unix / shell 命令？

> ID：11790240
> 
> 赞同：2
> 
> 时间：2012-08-03T06:12:55.857
> 
> 标签：java

我想在其中运行一些`unix/shell`命令`Java`并处理输出。我用过`getRuntime.exec()`，但它没有为某些命令提供正确的输出，例如`ls directory_path/*.tar.gz`. 对于该命令，我的程序没有给出任何输出，但给出了错误提示`No such file or directory`。但是相同的命令在命令提示符下给出了正确的输出。

有没有其他方法可以在 Java 中执行包含通配符的命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T06:22:29.427

> ***有没有其他方法可以在 Java 中执行包含通配符的命令？***

就在这里。

您的代码中存在三个潜在问题：

1.  假设您想查看外部命令的输出，您需要处理它产生的输出，并自己打印。

    按照我在此处提供的示例进行操作：

    *   [如何使 java 程序同时打印 out.println() 和 err.println() 语句？](https://stackoverflow.com/questions/3754841/how-to-make-a-java-program-to-print-both-out-println-and-err-println-)

2.  如果您天真地经历，外壳扩展`*`不起作用`Runtime.exec`。您必须`/bin/bash`明确地经历。

3.  如果您尝试列出`directory_path/*.tar.gz`您应该知道的内容（如果您不是以 a 开头`/`）`directory_path`将相对于*当前工作目录*进行解析。首先尝试给出绝对路径以确保它工作，然后尝试找出它为什么找不到相对路径。

这是一个应该有效的完整示例：

```
Process proc = new ProcessBuilder("/bin/bash", "-c",
                                  "ls /.../directory_path/*.tar.gz").start();

Reader reader = new InputStreamReader(proc.getInputStream());
int ch;
while ((ch = reader.read()) != -1)
    System.out.print((char) ch);
reader.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:15:08.680

那是因为您指定了目录的相对路径，并且您的应用程序正在工作目录中运行。您指定的路径是相对于该工作目录的。

要找出绝对路径是什么，您可以查看工作目录。

```
System.out.println("Working directory: " + System.getProperty("user.dir")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:15:21.270

“ls directory_path/*.tar.gz”相对于当前目录起作用。

# javascript - 如何等待点击事件完成

> ID：11790241
> 
> 赞同：19
> 
> 时间：2012-08-03T06:13:11.327
> 
> 标签：javascript, jquery

我将单击事件处理程序添加到元素

```
 $(".elem").click(function(){
       $.post("page.php".function(){
         //code1
      })
 }) 
```

然后我触发一个点击事件

```
$(".elem").click();
//code2 
```

如何确保 code2 在 code1 执行后执行

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T06:15:44.700

（忽略 WebWorkers）JavaScript 在单线程上运行，因此您可以确定 code2 将始终在 code1 之后执行。

*除非*您的 code1 执行诸如 Ajax 调用或 a 之类的异步操作`setTimeout()`，在这种情况下，触发的单击处理程序将完成，然后 code2 将执行，然后（最终）来自 Ajax 调用（或`setTimeout()`，或其他）的回调将运行。

**编辑：**对于您更新的问题，code2 将始终在 code1 之前执行，因为正如我上面所说的那样，异步 Ajax 回调将在稍后发生（即使 Ajax 响应非常快，它也不会在当前 JS 完成之前调用回调）。

> *“我如何确保 code2 在 code1 执行后执行”*

不带参数使用`.click()`是 的快捷方式`.trigger("click")`，但如果您实际`.trigger()`显式调用，您可以提供将传递给处理程序的其他参数，这样您就可以这样做：

```
$(".elem").click(function(e, callback) {
    $.post("page.php".function(){
      //code1

      if (typeof callback === "function")
         callback();
   });
});

$(".elem").trigger("click", function() {
    // code 2 here
}); 
```

也就是说，在单击处理程序中测试函数是否已在`callback`参数中传递，如果是则调用它。这意味着当事件“自然”发生时不会有回调，但是当您以编程方式触发它并传递一个函数时，该函数将被执行。（请注意，您传递的参数`.trigger()`不一定是函数，它可以是任何类型的数据，您可以传递多个参数，但为此我们需要一个函数。有关更多信息，请参阅[`.trigger()`文档](http://api.jquery.com/trigger)。）

演示：http: [//jsfiddle.net/nnnnnn/ZbRJ7/1/](http://jsfiddle.net/nnnnnn/ZbRJ7/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T06:17:49.883

你可以试试这样写：

```
 $(".elem").live("click", function(){
  //code1
 })

 // for newer jquery version from 1.9
 $(".elem").on("click", function(){
  //code1
 }) 
```

而且，您的触发器将始终按触发方式执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T06:19:29.870

包装`code2`方法并将其作为回调添加到内部，以便在执行`code1`后始终调用它`code1`

```
code2 = function(){/*code2*/};
$(".elem").click(function(){
  //code1
  code2();
 }) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-03T06:57:51.793

Javascript 执行是逐行的。所以无论出现什么，都会先执行。因此，在其他方法之前添加点击代码将起作用。

另外，如果有任何异步调用，则使用仅在收到响应时设置的标志。

var clicked = false; $('#elem').click(function(){ // 做一些异步进程 clicked = true; });

while (!clicked){ // 什么都不做 }

// 其他要调用的函数

或者第二个选项是，如果使用 post 方法，在属性中设置 async = true。

# struts2 - 如何将sencha与struts2集成？

> ID：11790245
> 
> 赞同：-1
> 
> 时间：2012-08-03T06:13:56.503
> 
> 标签：struts2

struts 2拦截器如何接收sencha json格式请求。请举一些整合的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:47:42.860

（出于空间目的，这更像是一个扩展的问答，而不是答案。）

为什么要在拦截器中解析 JSON？

拦截器用于整个应用程序的功能——如果你有一个特定的 JSON 参数，你需要在很多操作中，考虑使用一个基本的操作类并将你的拦截器放在JSON 拦截器*之后*，然后只查询参数的操作。否则，您将解析 JSON 两次。

如果*不是*因为应用程序的大部分功能都存在，那么您几乎可以肯定不应该在拦截器中做这项工作，而应该是一个动作。要实现这一点，您可以只使用 JSON 拦截器，也可以使用 REST 插件，它也可以处理许多其他事情。

在 Struts 2 发行版中有这些示例，但是如果您有特定的问题，在此处或在 Struts 用户邮件列表中提出真正的问题可能会更容易。询问示例是多余的，因为该发行版包含大多数 S2 功能的示例。

# ruby-on-rails - 红宝石中的对象数组

> ID：11790249
> 
> 赞同：0
> 
> 时间：2012-08-03T06:14:21.887
> 
> 标签：ruby-on-rails, ruby, arrays, object, parameters

我正在尝试学习 ruby​​，并且对将对象数组作为函数参数传递并在函数中打印它有疑问。

我有一个包含对象数组的数组，如下所示

```
describe Name
par1 = "John"
par2 = "Miley"
par3 = "Maria"
@obj_arr = [Name.new(par1),Name.new(par2),Name.new(par3)]
Name.func1(@obj_arr) 
```

我想在函数中打印名称“John”、“Miley”和“Maria”，我编写的函数 func1 如下：

```
def self.func1(parameter)
parameter.each do |p|
puts p
end
end 
```

这没有打印名称。我在访问函数中的 obj_arr 时出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:16:55.667

我认为您的问题可能是对象的 to_s 方法。您应该覆盖它以打印您想要的内容。顺便说一句，您问题中的语法有点不对劲。我认为函数的定义应该是 def self.func1 并且你错过了一个结束。这是我测试的代码：

```
irb(main):001:0> class Name
irb(main):002:1> def self.func1(parameter)
irb(main):003:2> parameter.each do |p|
irb(main):004:3* puts p
irb(main):005:3> end
irb(main):006:2> end
irb(main):007:1> end
=> nil
irb(main):008:0> class Name
irb(main):009:1> def initialize(name)
irb(main):010:2> @name = name
irb(main):011:2> end
irb(main):012:1> end
=> nil
irb(main):013:0> Name.func1([Name.new('a'), Name.new('b')])
#<Name:0x2163dc8>
#<Name:0x2163d98>
=> [#<Name:0x2163dc8 @name="a">, #<Name:0x2163d98 @name="b">]
irb(main):014:0> class Name
irb(main):015:1> def to_s
irb(main):016:2> @name
irb(main):017:2> end
irb(main):018:1> end
=> nil
irb(main):019:0> Name.func1([Name.new('a'), Name.new('b')])
a
b
=> [a, b]
irb(main):020:0> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:19:07.360

可能是 func1 是在类 Name 的实例上定义的，而不是在类本身上？

尝试：

```
 class Name
    def self.func1(parameter)
      parameter.each do |p|
        puts p
      end   
    end 
  end 
```

# c# - 创建具有动态字段的数据库

> ID：11790255
> 
> 赞同：1
> 
> 时间：2012-08-03T06:14:53.780
> 
> 标签：c#, .net, sql-server, database-design, dynamic-data

我有关于人员信息的数据库要设计

会有一些关于人的常见细节，如姓名、年龄、地址、联系方式等......

但是有一些人，例如政府公务员，商人，受薪人员，政治家等...

所以会有一些关于类别的动态字段......

常见的详细信息表可以很容易地制作，但问题在于诸如政府公务员的动态字段将有收入，部门，自从等......

我创建了三个表：

人民表：姓名、年龄、出生日期等...类别：政府公务员、受薪等行...属性：

```
------------------------
ID|Category|Field|Value
-----------------------
1 |GS      |dept |electricity 
```

上面的数据库设计（我现在使用的）是一种 带有和表的[NopCommerce](http://www.nopcommerce.com/default.aspx)数据库设计 `Nop_Customer``Nop_CustomerAttribute`

**这是一个好的还是比这更好的事情：（**对于这种情况）

要考虑的两个影响点：1-用户将为此添加数据，因此必须相应地创建控件 2-其他人将搜索此数据库。

**编辑：**

每个类别的字段将是固定的。

但是随着时间的推移，这些类别将不是由用户添加，而是由开发人员添加，因此开发人员需要不那么忙碌和可维护

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:23:57.873

为每种类型的人制作桌子。在这些表中，仅存储适用的内容。如果 Phil Jones 是一位政治家，那么他将在 Person 表中有一个条目来描述他就个人而言。他还会在政治家表中有一排，就政治家而言，可以描述他。使每个子表与人员表的 ID 列具有外键关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:22:13.000

您可以选择使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)工具，例如[NHibernate](http://nhforge.org/Default.aspx)：

> NHibernate 是一个成熟的开源对象关系映射器，适用于 .NET 框架。它在数以千计的成功项目中得到积极开发、功能齐全和使用。

然后，您可以使用 OOP 原则（例如继承）来拥有一个涵盖*基础知识*的超类，然后根据您需要的其他额外功能来扩展该类。[本](http://ayende.com/blog/3941/nhibernate-mapping-inheritance)教程为您提供了如何做到这一点的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:50:50.963

您可以使用 XML 字段，因此您可以存储非结构化数据或使用继承映射之一，请参见此处[http://www.agiledata.org/essays/mappingObjects.html](http://www.agiledata.org/essays/mappingObjects.html)

# openerp - Openerp RML 报告在菜单上打印

> ID：11790260
> 
> 赞同：4
> 
> 时间：2012-08-03T06:15:03.727
> 
> 标签：openerp

如何通过单击 openerp 中的菜单来打印 rml 报告？无需打开任何向导。我是否必须采取任何行动并返回菜单点击操作？请举例说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:12:57.837

您必须使用`<report>`标签声明报告。[这是OpenERP 文档](http://doc.openerp.com/v6.1/developer/05_reports.html#the-xml-definition)中的一个示例。

```
<?xml version="1.0"?>
<openerp>
        <data>
                <report
                        id="report_sale_order"
                        string="Print Order"
                        model="sale.order"
                        name="sale.order"
                        rml="sale/report/order.rml"
                        auto="False"
                        header="False"/>
        </data>
</openerp> 
```

在您准备好之前，您需要创建[报告文件](http://doc.openerp.com/v6.1/developer/05_reports.html#openoffice-org-reports)和[解析器](http://doc.openerp.com/v6.1/developer/05_reports.html#parser)。核心模块都使用 SXW 报告文件生成 RML 文件，然后从 RML 文件运行报告。就个人而言，我更喜欢直接使用 RML 文件。还有一个[Mako 模板引擎](http://doc.openerp.com/v6.1/developer/05_reports.html#html-reports-using-mako-templates)，但我还没有尝试过。

# php - phpstorm & phpunit

> ID：11790266
> 
> 赞同：4
> 
> 时间：2012-08-03T06:15:32.640
> 
> 标签：php, macos, phpunit, phpstorm

我创建了一个 phpunit 测试文件，当我尝试通过 phpstorm 运行它时，我收到以下消息：

```
Unable to attach test reporter to test framework or test framework quit unexpectedly 
```

似乎执行了以下命令：

```
 /usr/local/bin/php /private/var/folders/4b/qrnw7nbd6llgmhrss5rf1_880000gt/T/ide-phpunit.php  --configuration /Users/Shared/sites/pac/app/app/phpunit.xml.dist BackendControllerTest /Users/Shared/sites/pac/app/modules/Pac/Backend/Tests/Controller/BackendControllerTest.php
Testing started at 23:22 ...

Process finished with exit code 0 
```

当我通过命令行执行此操作时，我得到更多的输出

```
PHPUnit 3.6.11 by Sebastian Bergmann.

...etc...

 FAILURES!
Tests: 2, Assertions: 2, Failures: 1. 
```

似乎 phpunit 没有在 phpstorm 中执行？不应该有某种错误消息而不是用退出代码0完成吗？phpstorms 配置中 php 和 phpunit（相同）的路径应该没问题（都通过 homebrew 安装在 /usr/local/bin 中，路径添加到 phpstorm）

osx 10.7.4 php 5.3.14 PHPUnit 3.6.11

谢谢你帮助我！
马蒂亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T12:04:14.577

在终端和普通应用程序中可用的 Mac OS X 环境变量可能不同，[请查看相关问题](https://apple.stackexchange.com/q/51677)以了解如何使它们相似的解决方案。

请注意，此解决方案[不适用于 Mountain Lion](https://apple.stackexchange.com/q/57385/17551) (10.8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:04:06.560

你在你的 php.ini 中编辑 include_path 吗？

我有类似的情况。在我添加梨的包含路径后，它可以工作。

[看这个。](http://pear.php.net/manual/en/installation.checking.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-05T21:16:27.977

在 MacOSX 上，我一直在为一个 simialair 问题苦苦挣扎。

在我的案例中，原因是一个 PHP 升级脚本，它弄乱了一些权限。

我做了什么：

*   确保我有权在 pear bin_dir 和 php_dir 中使用我自己的帐户阅读和执行
*   确保 php_dir 在 include_path 中

要查找这些目录，您可以发出

```
# pear config-show 
```

（寻找 bin_dir 和 php_dir）

这意味着我会执行以下命令：

```
# (sudo) chmod -R 755 <bin_dir>
# (sudo) chmod -R 755 <php_dir> 
```

更多编码 - 更少的 IDE 配置！

# c++ - 用于 C/C++ 的 MC/DC 覆盖工具

> ID：11790267
> 
> 赞同：7
> 
> 时间：2012-08-03T06:15:34.150
> 
> 标签：c++, c, unit-testing, code-coverage

我最近参加了CS258免费在线课程，里面提到了一个叫做MC/DC覆盖的代码覆盖，它用在嵌入式软件中，比如汽车、飞机上的计算机等...

但我找不到免费工具来显示我的计划的 MC/DC 覆盖范围，有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-08T16:10:21.197

我相信 Project Coverage（现在称为[Project Couverture](http://www.open-do.org/projects/couverture/)）可能是对非侵入性和开源覆盖分析问题的第一个好的答案。他们最新的代码版本[目前在这里，并且可以](https://forge.open-do.org/scm/?group_id=8)[在这里看到](http://libre.adacore.com/uploads/project_coverage.pdf)一*英里高*的项目演示。

至于 SQLite 如何使用 just 声明 MC/DC 覆盖率`gcov`，他们基于这样一个事实：在 C 中，逻辑 AND 和 OR 遵循短路评估；这意味着在任何布尔表达式比较中......

```
if (((A == B) || (C != D)) && (E != F)) ... 
```

...根据定义，C 将在第一个“决定”整体的表达式处停止计算；因此，如果 A 等于 B，则决策已经完成 - 如果不是，则继续下一个表达式，依此类推。这意味着 MC/DC 要求...

```
Each condition in a decision must be shown to *independently*
          affect the outcome of the decision 
```

...有点“默认覆盖”。

不过，有一个例外 - 请在此处阅读他们的[解释](https://www.sqlite.org/testing.html#branch_coverage_versus_mc_dc)。

# html - 无法将xml数据加载到IE浏览器

> ID：11790271
> 
> 赞同：0
> 
> 时间：2012-08-03T06:15:39.750
> 
> 标签：html, cross-browser

我正在使用 w3schools 的以下代码将 xml 数据加载到我的 html 页面中。但它仅在 mozilla 浏览器中工作，没有其他浏览器提供任何输出...请检查代码以进行必要的更改

```
<html>
<head>
<script>
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
{
xhttp=new XMLHttpRequest();
}
else
{
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
 xhttp.open("GET",dname,false);
 xhttp.send("");
return xhttp.responseXML;
}

function displayResult()
{
xml=loadXMLDoc("cdcatalog.xml");
xsl=loadXMLDoc("cdcatalog.xsl");
// code for IE
if (window.ActiveXObject)
{
 ex=xml.transformNode(xsl);
document.getElementById("example").innerHTML=ex;
}
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation && document.implementation.createDocument)
{
xsltProcessor=new XSLTProcessor();
 xsltProcessor.importStylesheet(xsl);
 resultDocument = xsltProcessor.transformToFragment(xml,document);
  document.getElementById("example").appendChild(resultDocument);
 }
}
</script>
</head>
<body onload="displayResult()">
<div id="example" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:42:44.180

使用这条线

```
xml=new ActiveXObject("Microsoft.XMLDOM"); 
```

代替

```
 xml=new ActiveXObject("Microsoft.XMLHTTP"); 
```

有用

# iphone - 使用我们的 iphone 在网络服务器上压缩/解压缩文件

> ID：11790276
> 
> 赞同：1
> 
> 时间：2012-08-03T06:15:52.250
> 
> 标签：iphone, zip, webserver

> 是否可以使用我们的 iphone 压缩/解压缩 Web 服务器上的文件以使用该文件？

如果是，请指导我该怎么做？

我的问题是我想从网络服务器上传/下载一个**文件夹****到本地** ，我首先压缩本地文件夹，然后从网络服务器上传它。

**通过创建 Zip 上传/下载文件夹是否正确？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:08:42.590

-(void)updateFromInternet

{

进度视图.progress = 0;

```
//save to a temp file
NSString* updateURL = @"http://www.touch-code-magazine.com/wp-content/uploads/2010/06/LargeAppUpdate.zip";
NSLog(@"Checking update at : %@", updateURL);

progressView.hidden = NO;
responseData = [[NSMutableData alloc] init];

NSURLRequest* updateRequest = [NSURLRequest requestWithURL: [NSURL URLWithString:updateURL]];
NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:updateRequest delegate:self];
[connection start]; 
```

NSLog(@"下载开始...");

}

如果您有任何疑问，请检查此链接

[http://www.touch-code-magazine.com/update-dynamically-your-iphone-app-with-new-content/](http://www.touch-code-magazine.com/update-dynamically-your-iphone-app-with-new-content/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:12:34.353

终于结束了。使用 RecursionFunction 这将完成...无需压缩/解压缩文件夹..

-(void)recursiveMethod:(NSString *)strPath {

```
[client1 initWithHost:@"HostName" username:self.username password:self.password];
NSArray *listFiles = [[NSArray alloc]init];

//Fetching data from document directory.
//    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
//    
//    // Get documents folder
//    NSString *docDir  = [paths objectAtIndex:0];

NSFileManager *fm = [NSFileManager defaultManager];
if ([fm fileExistsAtPath:strPath isDirectory:&isDir] && isDir)
{
    subpaths = [fm subpathsAtPath:strPath];
}
listFiles = [fm contentsOfDirectoryAtPath:strPath error:nil];
NSLog(@"listFiles ==== %@",listFiles);

for(int j=0; j < [listFiles count] ;j++)
{
//Check For Folder

if([[listFiles objectAtIndex:j]rangeOfString:@"."].location == NSNotFound)
    {

    self.folderName = [self.folderName stringByAppendingPathComponent:[listFiles    objectAtIndex:j]];

 //Create Current Folder 
[client1 createCollection:self.folderName];
 self.countItemsInFolder = 0; //countItemsInFolder is int(counter) 

//call recursiveMethod again
strPath = [strPath stringByAppendingPathComponent:[listFiles objectAtIndex:j]];
        [self recursiveMethod:strPath];
        self.folderName = [self.folderName stringByDeletingLastPathComponent];
        strPath = [strPath stringByDeletingLastPathComponent];
    }
    else
    {
        //upload Files
        self.countItemsInFolder = j+1;
        [self appdelegate].remoteFolderForUpload = self.folderName;
        NSString *destiFilePath = [strPath stringByAppendingPathComponent:[listFiles objectAtIndex:j]];
        [client1 uploadFile:[listFiles objectAtIndex:j] toPath:self.folderName fromPath:destiFilePath];
    }

}

if([listFiles count] == self.countItemsInFolder)
{
    strPath = [strPath stringByDeletingLastPathComponent];
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:03:43.583

下载 - 从服务器下载 zip 并解压缩。

上传 - 使用[miniZip 压缩](http://www.winimage.com/zLibDll/minizip.html)设备上的文件 并上传到服务器

*   在服务器上解压缩 .zip。使用脚本自动执行此操作。不一定要通过 iPhone 远程控制服务器上的解压过程。

# ruby-on-rails-3 - 刷新页面后，搜索字段仍填充以前的搜索值

> ID：11790277
> 
> 赞同：0
> 
> 时间：2012-08-03T06:15:54.777
> 
> 标签：ruby-on-rails-3, activescaffold

我正在使用 ActiveScaffold 3.2.3 和 Rails 3.2 和 ruby​​ 1.9.3

1.  进入搜索团队
2.  单击搜索 - 显示结果
3.  单击重置 - 列表重置，但搜索字段仍填充有以前的搜索词（错误）。
4.  刷新页面 - 搜索字段仍填充有以前的搜索词，并且列表根据搜索词显示（错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:14:05.333

搜索按钮旁边的重置按钮只是关闭搜索选项卡。要重置列表（所有记录），右上角（主框）有一个带有“单击以重置”标签的按钮。

# ruby - 在 Resque worker 调用的代码中，为什么对象是哈希？

> ID：11790280
> 
> 赞同：1
> 
> 时间：2012-08-03T06:16:27.040
> 
> 标签：ruby, resque, feedzirra

我一直无法使用 Resque 工作人员触发的代码中的对象。这是一个 sinatra/datamapper 应用程序。Feed 类是一个 DataMapper 模型。这是订阅者代码

```
class Subscriber
  @queue = :subscriptions_queue

  def self.perform(feed_id)
    feed = Feed.get(feed_id)
    feed.subscribe()
  end
end 
```

运行良好，直到 subscribe() 方法执行

```
class Feed
  def subscribe    
    feed = Feedzirra::Feed.fetch_and_parse(url)
    raise feed.description
  end
end 
```

这会导致错误：

```
** [23:09:44 2012-08-02] 32028: (Job{subscriptions_queue} | Subscriber | [2]) failed: #<NoMethodError: undefined method `description' for #<Hash:0x007fa6f4b97e48>> 
```

为什么会是一个哈希？我可以在提要对象上调用检查：

```
class Feed
  def subscribe    
    feed = Feedzirra::Feed.fetch_and_parse(url)
    raise feed.inspect
  end
end 
```

正如人们所期望的那样转储饲料：

```
** [23:01:31 2012-08-02] 32010: (Job{subscriptions_queue} | Subscriber | [2]) failed: #<RuntimeError: {#<Addressable::URI:0x3fefd45f2fb8 URI:http://feeds.feedburner.com/scoutapp>=>#<Feedzirra::Parser::RSSFeedBurner:0x007fdfaa024f18 @title="Scout ~ The Blog", @url="http://blog.scoutapp.com/", @description="Scout ~ The Blog", @hubs=["http://pubsubhubbub.appspot.com/"], @entries= 
```

看看有什么地方可以看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:28:25.560

它实际上是一个带有一对的哈希`Addressable::URI => Feedzirra::Parser::RSSFeedBurner`

如果您不知道如何获取该 URI 对象，请执行`feed[feed.keys[0]].description`或`feed.values[0]`

还要检查 github repo 似乎你应该有一个`entries`方法。如果您从根 url 获取，就会发生这种情况。`feeds.entries.first`因此，如果您只想获得第一个，您也许可以做到。

# algorithm - 将元素装入盒子

> ID：11790287
> 
> 赞同：0
> 
> 时间：2012-08-03T06:16:58.673
> 
> 标签：algorithm, bounds, tag-cloud, texturepacker

我想达到所附图像中显示的效果。给定某些项目，将它们放入一个形状（盒子或其他东西），并可以选择是否调整项目的大小。

我知道必须有一些相关的**算法**，但我不知道从哪里开始寻找。

欢迎任何**关键字**、**维基百科**文章或**pdf**。

![在此处输入图像描述](../Images/542e55cf37c6f8802f92e111f23ddbd6.png) ![在此处输入图像描述](../Images/1ac39f63359c4c4d893ee95b6af68270.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:06:50.323

正如[NKamrath](https://stackoverflow.com/users/873461/nkamrath)指出的那样，问题是**Bin 打包问题**，但更常见的是**Texture Packing**。以下是我收集的资源：

*   [http://en.wikipedia.org/wiki/Bin_packing_problem](http://en.wikipedia.org/wiki/Bin_packing_problem)
*   [http://www.blackpawn.com/texts/lightmaps/default.html](http://www.blackpawn.com/texts/lightmaps/default.html)
*   [http://www.gamedev.net/topic/392413-rectangle-packing/](http://www.gamedev.net/topic/392413-rectangle-packing/)
*   [http://clb.demon.fi/projects/rectangle-bin-packing](http://clb.demon.fi/projects/rectangle-bin-packing)
*   [http://clb.demon.fi/projects/more-rectangle-bin-packing](http://clb.demon.fi/projects/more-rectangle-bin-packing)
*   [http://clb.demon.fi/files/RectangleBinPack.pdf](http://clb.demon.fi/files/RectangleBinPack.pdf)

# javascript - 将 where 子句与 javascript 变量一起使用

> ID：11790288
> 
> 赞同：0
> 
> 时间：2012-08-03T06:17:01.340
> 
> 标签：javascript, cordova, web-sql

大家好，这是我关于堆栈溢出的第一个问题。我正在使用 webSQL 和 javascript 开发一个带有 phonegap 的应用程序。在我的应用程序中有一个登录表单，它需要两个输入：用户名和密码。当用户填写这些值并单击登录时，这些值将在具有多行的数据库表中进行检查。为了检查我正在使用这个查询的值-

```
var email=document.getElementById("uname").value;
tx.executeSql('SELECT * FROM USERINF Where Email=email', [], MatchPass, errorCB1); 
```

但是该查询不适用于带有 java 脚本变量的 where 子句。我也尝试过许多语法，例如

```
where Email=@email
where Email="+email+" 
```

还有更多，但他们都没有工作。

**是否可以使用带有 where 子句的 javascript 变量？如果是，请告诉我如何。如果不是，请建议我任何其他方式来完成任务。提前致谢。**

这是我完整的**JavascriptCode**

```
// JavaScript Document
var db=window.openDatabase("CakeViewer", "1.0", "Cake Viewer", 2*1024*1024);

function login()
{

db.transaction(matchcred)

function matchcred(tx)
{
    var eml=document.getElementById("uname").value;
     tx.executeSql('SELECT * FROM USERINF Where Email=eml', [], MatchPass, errorCB1); 
 //problem is in above line-- the query is not executed with variable where clause. But it works fine if I use where Email="abc@abc.com"

}

function MatchPass(tx, results)
{
    var orgnalPass=results.rows.item(0).Password;   
    var userinputedPass=document.getElementById("pass");

    if(orgnalPass==userinputedPass.value)
    {
        window.location.href='HomePage.html';
    }
    else
    {
        errorCB();
    }
}

function errorCB(tx,err)
{
    alert("User Name or Password is not valid !");
    document.getElementById("uname").value="";
    document.getElementById("pass").value="";
}

function errorCB1()
{
    alert("Query failed");
}

function errorCB2(tx,err)
{
    alert("errorCB2"+err);
}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T06:53:48.707

最简单的方法是使用问号 (?) 来指定变量。

例如：

```
tx.executeSql('SELECT Data from Table Where something = ?', [email], MatchPass, errorCB1); 
```

?'s 从左到右解析，并从左到右匹配 [] 之间的变量。

另一个例子：

```
tx.executeSql('SELECT Data from Table Where email = ? AND username=?', [email, username], MatchPass, errorCB1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:21:22.437

```
tx.executeSql("SELECT * FROM USERINF Where Email='"+email+"'" , 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T06:25:05.790

要在查询中获取 js 变量*email*的值，您需要使用 + 运算符进行连接。还用引号将值括起来，因为值可能是字符串

```
tx.executeSql('SELECT Data from Table Where something = "'+ email+ '"', [], MatchPass, errorCB1); 
```

# java - JPA 延迟初始化异常？

> ID：11790289
> 
> 赞同：-1
> 
> 时间：2012-08-03T06:17:10.000
> 
> 标签：java, hibernate, jpa-2.0, ejb-3.0, lazy-initialization

我使用 jquery 作为 UI ， Struts2 作为 Action ， JPA 作为数据访问层。我面临的问题是当我尝试从数据库中检索值时出现 LazyInitializationException 。我得到以下堆栈跟踪：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.singpost.ctf.core.persistence.CtfTxn.ctfTxnAttribs, no session or session was closed 
```

默认情况下`Fetch="LAZY"`，当我将 Fetch 类型更改为 时，代码工作正常`EAGER`，我不知道我还需要做什么。我被困在中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:05:38.913

如果您尝试从实体访问延迟获取的属性，JPA 会尝试再次访问数据库以获取数据。您的问题是此时您不在交易范围内。有很多方法可以扩展您的事务，例如使用 openSessionInViewFilter

（[休眠/弹簧：未能延迟初始化 - 没有会话或会话被关闭](https://stackoverflow.com/questions/3041259/hibernate-spring-failed-to-lazily-initialize-no-session-or-session-was-closed)）

我个人更喜欢创建传输对象，每个要显示的页面一个，只包括必要的数据。您只需要将您的实体映射到那些传输对象中，例如使用非常强大和方便的推土机映射器。这样，管理事务就容易多了，其次，您无需在前端使用数据库实体，因为您的前端不需要了解有关持久层的任何信息。

# ant - 如何使用 Maven v. 2.x 包装 Ant v.1.8.1 构建？

> ID：11790290
> 
> 赞同：0
> 
> 时间：2012-08-03T06:17:10.420
> 
> 标签：ant, maven-2

我需要用子项目构建项目，主项目是 Maven 项目，子项目之一是 Ant 项目。我需要从一个主 pom.xml 编译所有项目我找到了解决方案[如何使用 Maven 包装 Ant 构建？](https://stackoverflow.com/questions/1456901/how-to-wrap-an-ant-build-with-maven)它的答案是正确的，但不适用于我的项目。因为当我的 ant 项目需要 Ant v. 1.8.x 时，但在构建时使用

```
<dependencies>
        <dependency>
            <groupId>ant-contrib</groupId>
            <artifactId>ant-contrib</artifactId>
            <version>1.0b3</version>
            <exclusions>
                <exclusion>
                    <groupId>ant</groupId>
                    <artifactId>ant</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.ant</groupId>
            <artifactId>ant-nodeps</artifactId>
            <version>1.8.1</version>
        </dependency>
    </dependencies>

    <modules>
        <module>Bundles/I_AboutForm</module>
        <module>Bundles/I_AppVars</module>
    </modules>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>process-resources</phase>
                        <configuration>
                            <!--<taskdef resource="net/sf/antcontrib/antlib.xml" classpathref="maven.plugin.classpath" />-->
                            <tasks>
                                <ant antfile="MainApplication/build.xml" target="compile"/>
                            </tasks>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

maven 下载了 Ant v. 1.7.1 并在构建时使用他（在本地 repo 中有 Ant v.1.8.1）。我认为，ant-contrib 1.0b3 的依赖可能会出现问题 - 可能是 ant-contrib 依赖于 Ant v. 1.7.1？

请建议我如何在 Maven 中构建 Ant v. 1.8.x 项目。谢谢，最好的问候，亚瑟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:46:21.180

看插件1.7的版本，好像用的是ant版本1.8.2 [http://maven.apache.org/plugins/maven-antrun-plugin/dependencies.html](http://maven.apache.org/plugins/maven-antrun-plugin/dependencies.html)

尝试指定插件maven-antrun-plugin的1.7版本

例如：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
                <executions>
                    <execution> 
```

# mysql - 使用 clojure.java.jdbc 从 MySQL 流式传输

> ID：11790291
> 
> 赞同：4
> 
> 时间：2012-08-03T06:17:15.047
> 
> 标签：mysql, jdbc, clojure

根据[MySQL JDBC 驱动程序的发行说明，](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-implementation-notes.html)当且仅当使用具有并发只读、只进结果和精确整数/MIN_VALUE 的获取大小的连接时，它才应该流式传输结果。

但是，当我尝试准确地生成这些条件（反对`[mysql/mysql-connector-java "5.1.21"]`）时，我的 SQL 查询仍然会永远运行（或者，更确切地说，直到它耗尽 JVM 的内存并开始繁荣）。

```
(let [query (query-only (fetch-all big-table))]
  (clojure.java.jdbc/with-connection (get-connection (:db query))
    (clojure.java.jdbc/with-query-results rows
      (into [{:fetch-size Integer/MIN_VALUE
              :concurrency :read-only
              :result-type :forward-only} (:sql-str query)]
            (:params query))
      (throw (Exception. (str "retrieved a row: " (pr-str (first rows))))))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:22:01.427

这个答案是指 postgresql 而不是 MySQL，但应该适用于两者。

用 (clojure.java.jdbc/transaction) 包装你的 with-query-results 函数，所以：

```
(let [query (query-only (fetch-all big-table))]
  (clojure.java.jdbc/with-connection (get-connection (:db query))
    (clojure.java.jdbc/transaction        
      (clojure.java.jdbc/with-query-results rows
        (into [{:fetch-size Integer/MIN_VALUE
                :concurrency :read-only
                :result-type :forward-only} (:sql-str query)]
              (:params query))
        (throw (Exception. (str "retrieved a row: " (pr-str (first rows)))))))))) 
```

[postgresql 文档](http://jdbc.postgresql.org/documentation/91/query.html#query-with-cursor)指定了启用流式传输的另一项要求：“连接不得处于自动提交模式。” 默认情况下，连接是在自动提交打开的情况下创建的，但使用 (clojure.java.jdbc/transaction) 进行包装将在自动提交关闭的情况下运行内部代码。您也可以自己在连接上调用 .setAutoCommit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:55:08.053

由于`with-query-results`还将接受原始 PreparedStatement，因此您可以尝试自己创建一个，显式传递所有正确的参数，看看是否有任何不同的行为。这至少会告诉您问题是否与创建 PreparedStatement 的 clojure.java.jdbc 相关，或者您是否需要更深入地查看驱动程序/数据库配置。

# sencha-touch - Sencha Touch：如何为列表中的不同 li/rows 编写不同的选择事件

> ID：11790296
> 
> 赞同：1
> 
> 时间：2012-08-03T06:17:41.263
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我在 Sencha Touch 中实现了不同颜色的列表视图。

并实现了一个项目点击方法来将视图推送到容器中。

并为每 4 种颜色 RedPage.js、WhitePage.js、yelloPage.js、GreenPage.js 实现了 4 个视图。

看法：

```
{
           xtype: 'list',
           id : 'ColorsList'
           width: '20%',

           itemTpl: [
                 '<div><b>{Color}<b></div>'
                 ],

       data: [
              {Color: 'Red' },
              {Color: 'Blue'},
              {Color: 'Yellow},
              {Color: 'Green}
              ]
       }, 
```

容器：

**颜色列表：'#ColorsList'，**

```
init function(){
..
..
..
..
  'ColorsList' : {
                     itemtap : 'ColorsPagesSelected'
                     },

...
...
...
}, 
```

**ColorsPagesSelected**方法：

```
 ColorsPagesSelected: function() {

           alert('Color page pushed');

           this.getColorrightnavigation().push(Ext.create('ArtGalleryApp.view.RedPage'));

           }, 
```

由于我使用**了 Colorslist** id 并用于为列表推送 RedPage，因此它为列表中的每个项目显示**RedPage**。

我不知道如何为不同的行获取不同的页面

任何人都可以帮助我，请提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:58:45.887

假设您像这样定义了彩色页面：

```
Ext.define('App.view.RedPage', {
    extend: 'Ext.Panel',
    xtype: 'RedPage',
...
}); 
```

使用有用[的 Ext.widget](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-widget)功能

```
ColorsPagesSelected: function(ct, index, target, record) {

    alert('Color page pushed');
    var color = record.get('Color'),
        pageName = color + 'Page',
        page = Ext.widget(pageName);

    this.getColorrightnavigation().push(page);

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T15:37:33.627

我最喜欢的技巧是为记录分配功能

```
{
  xtype: 'list',
  id: 'ColorsList'
  width: '20%',
  itemTpl: ['<div><b>{Color}<b></div>'],

  data: [{
    Color: 'Red',
    getPage: function() {
      return Ext.create('ArtGalleryApp.view.RedPage');
    }
  }, {
    Color: 'Blue'
  }, {
    Color: 'Yellow},
              {Color: '
    Green
  }]
},

init function(){
  'ColorsList' : {
     itemtap : 'ColorsPagesSelected'
   },   
 ColorsPagesSelected: function(ct, index, target, record) {
    alert('Color page pushed');
    this.getColorrightnavigation().push(record.getPage());
  } 
```

# html - 带 ipad 的 fckeditor

> ID：11790298
> 
> 赞同：2
> 
> 时间：2012-08-03T06:17:43.857
> 
> 标签：html, ipad, fckeditor

我在桌面上使用 FCKEditor。我们已经根据特定要求修改了 FCKEditor。就像右键单击该 FCKEditor 会弹出某个页面，然后在该弹出页面上选择一些文本将替换 FCKEditor 上的该文本。

但现在我们需要确保相同的功能可以在我们的 iPad 上运行。

我尝试了各种方法，但根本没有工作。有人知道这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:51:06.417

在 ipad 上无法右键单击。所以需要触发任何 ipad 事件而不是右键单击事件（上下文菜单）。我已经使用 ipad 的手势更改事件完成了它，它在具有相同桌面功能的 ipad 上也可以正常工作。

为此，您需要在 fck-editor 的 java-script 文件中更改 fckeditorcode_gecko.js 首先您需要将事件侦听器添加到编辑器中，例如

this._Document.addEventListener('gesturechange', FCKContextMenu_Document_OnContextMenu, false);

试试吧，如果有任何疑问，请告诉我

# jquery - 如何查找和替换里面的图片 使用jQuery？

> ID：11790299
> 
> 赞同：1
> 
> 时间：2012-08-03T06:17:47.313
> 
> 标签：jquery, html, image

我正在尝试检查图像并替换图像以进行展开和折叠`<div>` ，但我无法找到解决方案。

**html代码：**

```
<h4 id="expanderHead">Virtual Room <span id="expanderSign">+</span></h4>
<div id="expanderContent" style="display:none">
    content ... content...
</div> 
```

**jQuery：**

```
$(document).ready(function(){
   $("#expanderHead").click(function(){
      $("#expanderContent").slideToggle();
      if ($("#expanderSign").text() == "+"){
          $("#expanderSign").html("-")
      }
      else {
          $("#expanderSign").text("+")
      }
    });
}); 
```

在这里，而不是**+**和**-**我必须放置`<img src="" alt=""/>`.

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T06:24:22.280

**HTML**

```
<h4 id="expanderHead">Virtual Room <span id="expanderSign"><img src="plus-sign.png" /></span></h4>
<div id="expanderContent" style="display:none">
    content ... content...
</div>​ 
```

## 已编辑（添加了更好的 jQuery 版本）

**jQuery 新版本**

```
$(document).ready(function(){

   $("#expanderHead").click(function(){

       $("#expanderContent").slideToggle();

       var plusImg = "http://cdn2.iconfinder.com/data/icons/diagona/icon/16/129.png";
       var minusImg = "http://cdn2.iconfinder.com/data/icons/diagona/icon/16/130.png";        
       $this = $("#expanderSign img");            

       if( $this.attr('src') == plusImg ) { $this.attr('src', minusImg);} 
       else { $this.attr('src', plusImg); }

   });
}); 
```

## [**观看现场演示**](http://jsfiddle.net/akhurshid/85ywP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:07:55.967

```
$(文档).ready(函数(){

       $("#expanderHead").click(function(){
      $("#expanderContent").slideToggle();
      if ($("#imgId").attr('src') == "d2.png"){
          $("#imgId").attr("src","d1.png")
      }
      别的 {
          $("#imgId").attr("src","d2.png")
      }
    });
});

    <h4 id="expanderHead">虚拟房间 <img id='imgId' src='d2.png' /></h4>
<div id="expanderContent" style="display:none">
    内容……内容……
</div>

```

# jquery - 删除jqGrid中的垂直线

> ID：11790302
> 
> 赞同：5
> 
> 时间：2012-08-03T06:18:00.327
> 
> 标签：jquery, css, jqgrid, border

我想删除[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=start)图像中显示的线条。我怎样才能删除它？

![在此处输入图像描述](../Images/a7485fdb5cd46c6855de79a1b52f1e78.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T08:45:35.823

jqGrid 在主网格表上构建了一些额外的 div。外部 div 具有 class `ui-jqgrid`。因此，如果您需要删除整个网格中存在的左右边框，您可以使用以下 CSS：

```
.ui-jqgrid { border-right-width: 0px; border-left-width: 0px; } 
```

如果您需要删除所有网格的边框，您可以使用

```
.ui-jqgrid { border-width: 0px; } 
```

如果您想另外删除网格中单元格之间的垂直边框，您可以使用

```
.ui-jqgrid tr.ui-row-ltr td { border-right-color: transparent; } 
```

要删除行之间的水平边框，您可以使用

```
.ui-jqgrid tr.ui-row-ltr td { border-bottom-color: transparent; } 
```

要删除列标题之间的垂直边框，您可以使用

```
th.ui-th-column { border-right-color: transparent !important } 
```

或者（不使用`!important`）

```
.ui-jqgrid-labels .ui-th-column { border-right-color: transparent } 
```

（见[旧答案](https://stackoverflow.com/a/6994678/315935)）

因此，您可以根据您的具体要求选择您需要的样式。[该演示](http://www.ok-soft-gmbh.com/jqGrid/RemoveBorders.htm)演示了应用上述所有 CSS 样式的结果：

![在此处输入图像描述](../Images/2bb5939b220df102a8c1d554f9c1d4c9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:41:08.457

如果要通过[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)删除边框，则意味着您必须更改边框，`none`如下所示。

在 CSS 文件中，jquery-ui-1.8.1.custom.css（第 53 行）：

```
 #divid  .ui-widget-content {
        background: url("images/ui-bg_inset-hard_100_fcfdfd_1x100.png") repeat-x scroll 50% bottom #FCFDFD;
        border: 0 none;
        color: #222222;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:53:15.113

您可以在您的内联 CSS 中执行以下操作，而不是更改文件中的CSS [：](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)`custom.css`

```
.ui-widget-content table#YourTableId { border: 0px !important; } 
```

不要忘记`!important`，它将覆盖在自定义 CSS 文件中为您的表格定义的 CSS。

# c# - WCF - 使用“DataSet”通过 NetTcpBinding 传输数据好吗

> ID：11790309
> 
> 赞同：1
> 
> 时间：2012-08-03T06:18:47.223
> 
> 标签：c#, wcf, memory-management, dataset, buffer

服务合同之一将一个巨大的传递`DataSet`给客户。我正在使用`BufferedTranfer`模式。

在极少数情况下，我需要发送更多数据，因此我很困惑将 TransportMode 更改为 Streamed。

`"DataSet"`这是用于传输数据的好习惯`NetTcpBinding` 吗？

有什么替代品`DataSets`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T06:24:54.807

请不要从 WCF 服务返回数据集。

有关原因的信息，请参阅：[从 Web 服务返回数据集是撒旦的产物，代表世界上真正邪恶的一切，](http://www.hanselman.com/blog/ReturningDataSetsFromWebServicesIsTheSpawnOfSatanAndRepresentsAllThatIsTrulyEvilInTheWorld.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:19:12.093

在 3 层应用程序中，我们确实从 WCF 服务层返回数据集，成功且不会影响性能（太多）。原因是：我们的 SQL 数据库实体可以随时通过元数据进行更改。客户端可以请求实体的元数据信息（列、类型、大小、可为空等）。

对服务的请求命名实体并检索元数据中指定的列的当前设置作为 DataSet。这允许完全的灵活性，这是硬编码对象模型所不具备的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-03T06:51:04.677

在跨平台/网络发送数据之前，出于安全原因，建议将它们序列化甚至加密为某种格式，而 XML 似乎最有希望用于大块数据。我听说它效果更好，但我自己从未尝试过。

# python - 将字符串拆分为特定长度的组

> ID：11790311
> 
> 赞同：2
> 
> 时间：2012-08-03T06:18:50.533
> 
> 标签：python, list

我想知道在 Python`"abcdefghijklmnopqrstuvwxyz"`中将字符串拆分为 2 组列表（将字符串拆分为：）的最佳方法是什么。`["ab", "bc", "cd", ... "yz]`

或者以 3 组为一组：将字符串拆分为`["abc", "bcd", "cde", ... "xyz"]`

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:53:57.787

这是适用于任何可迭代的

```
>>> from itertools import tee, izip, islice
>>> chunksize = 2
>>> s = 'abcdefghijklmnopqrstuvwxyz'
>>> t = tee(s, chunksize)
>>> for i, j in enumerate(t):
...  next(islice(j, i, i), None)
...
>>> ["".join(k) for k in izip(*t)]
['ab', 'bc', 'cd', 'de', 'ef', 'fg', 'gh', 'hi', 'ij', 'jk', 'kl', 'lm', 'mn', 'no', 'op', 'pq', 'qr', 'rs', 'st', 'tu', 'uv', 'vw', 'wx', 'xy', 'yz'] 
```

如果`s`总是 a `str`，这更直接

```
>>> [s[i: i + chunksize] for i in range(len(s) + 1 - chunksize)]
['ab', 'bc', 'cd', 'de', 'ef', 'fg', 'gh', 'hi', 'ij', 'jk', 'kl', 'lm', 'mn', 'no', 'op', 'pq', 'qr', 'rs', 'st', 'tu', 'uv', 'vw', 'wx', 'xy', 'yz'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:43:51.633

```
def segment_string(s, segment_len):
    return [s[i:i+segment_len] for i in range(len(s) - (segment_len - 1))]

>>> for i in range(5):
        print segment_string("abcdefghijklmnopqrstuvwxyz", i)
['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
['ab', 'bc', 'cd', 'de', 'ef', 'fg', 'gh', 'hi', 'ij', 'jk', 'kl', 'lm', 'mn', 'no', 'op', 'pq', 'qr', 'rs', 'st', 'tu', 'uv', 'vw', 'wx', 'xy', 'yz']
['abc', 'bcd', 'cde', 'def', 'efg', 'fgh', 'ghi', 'hij', 'ijk', 'jkl', 'klm', 'lmn', 'mno', 'nop', 'opq', 'pqr', 'qrs', 'rst', 'stu', 'tuv', 'uvw', 'vwx', 'wxy', 'xyz']
['abcd', 'bcde', 'cdef', 'defg', 'efgh', 'fghi', 'ghij', 'hijk', 'ijkl', 'jklm', 'klmn', 'lmno', 'mnop', 'nopq', 'opqr', 'pqrs', 'qrst', 'rstu', 'stuv', 'tuvw', 'uvwx', 'vwxy', 'wxyz'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:30:24.397

这是一个单行：

```
def split_by_len(text, chunksize):
    return [text[i:(i+chunksize)] for i in range(len(text)-chunksize+1)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T06:40:33.813

```
>>> groups = zip(s, s[1:], s[2:])
>>> ["".join(g) for g in groups]
['abc', 'bcd', 'cde', 'def', 'efg', 'fgh', 'ghi', 'hij', 'ijk', 'jkl', 'klm', 'l
mn', 'mno', 'nop', 'opq', 'pqr', 'qrs', 'rst', 'stu', 'tuv', 'uvw', 'vwx', 'wxy'
, 'xyz'] 
```

# android - TableRow 内的 LinearLayout 发出警告

> ID：11790312
> 
> 赞同：2
> 
> 时间：2012-08-03T06:18:51.290
> 
> 标签：android, android-layout

我想为我的 android 应用程序制作一个自定义 TableRow。我从 LinearLayout 开始，这正是我想要显示的，但作为 TableLayout 中的 TableRow。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingBottom="3dp"
        android:paddingTop="3dp"
        android:weightSum="1" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.7"
            android:text="@string/Context" />

        <TextView
            android:id="@+id/ContextTextView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.3" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingBottom="3dp"
        android:paddingTop="3dp"
        android:weightSum="1" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.7"
            android:text="@string/SHUId" />

        <TextView
            android:id="@+id/SHUIdTextView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.3" />
    </LinearLayout>

    ...Others LinearLayouts with 2 TextViews...

</LinearLayout> 
```

所以首先我试着把这段代码放在一个 TableRow 元素中：

```
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    ...LinearLayout code from above...

<TableRow /> 
```

此时布局在 Eclipse 编辑器中正确显示但现在我在主 LinearLayout 上有一个 Lint 警告：“此 LinearLayout 布局或其 TableRow 父级无用”

然后我会说 OK TableRow 是 LinearLayout 的子类，然后我可以简单地删除主要的 LinearLayout 并将他的属性直接放在 TableRow 上，就像这样：

```
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dp" >

    <LinearLayout >
        <TextView />
        <TextView />
    <LinearLayout />

    <LinearLayout >
        <TextView />
        <TextView />
    <LinearLayout />

    ...etc...

<TableRow /> 
```

但现在布局不再正确显示（但没有警告）。我只看到第一行（第一个 TextView 有 2 个）。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:25:51.773

你`TableRow`的孩子是`TableLayout`？如果不是，你不应该使用`TableRow`- 没有`TableLayout`它只是一个水平的`LinearLayout`.

# html - 并排对齐 2 个 div - 右侧使用随机宽度，左侧使用剩余宽度

> ID：11790313
> 
> 赞同：0
> 
> 时间：2012-08-03T06:18:55.790
> 
> 标签：html, css

> **可能重复：**
> [两个 div，一个固定宽度，另一个，其余的](https://stackoverflow.com/questions/6487085/two-divs-one-fixed-width-the-other-the-rest)

我想要 2 `div`s 并排，其中右侧具有随机宽度（这包含另外 2 `div`s - 带有随机文本的标题和带有随机图像的主体，全部由 JS 生成），而左侧应该使用剩余宽度（这还包含另一个 2 `div`s - 一个标题和一个正文，都只包含静态文本）。

我目前有一个`table`非常简单的 3 s 解决方案，但是当我将所有没有严格表格内容的表格重新编码为 CSS 时（是的，我已经晚了好几年）我宁愿有这也在 CSS 中，如果可能的话？在寻找解决方案很长一段时间后，似乎它可能不是......

值得注意的是，图像高度始终相同，每个图像的宽度也在 JS 中指定。

我当前的解决方案（将 JS 和更多内容剥离为尽可能简单和清晰，图像只是一个示例，宽度可能高达 250 像素）：[我的小提琴](http://jsfiddle.net/PeyWR/2/)

HTML：

```
<table class="container" cellpadding="0">
 <tr>
  <td>
   <table class="left">
    <thead>
     <tr>
      <th>Text Header</th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>This just contains text.
      </td>
     </tr>
    </tbody>
   </table>
  </td>
  <td>
   <table class="right">
        <thead><tr>
        <th>Image Header</th>
        </tr></thead>
        <tbody>
        <tr>
        <td>
         <img src="http://www.derdiz.com/wp-content/uploads/2011/06/vertigo.jpg" width="200" height="200" border="0" style="display:block;">
        </td>
        </tr>
        </tbody>
        </table>
  </td>
 </tr>
</table> 
```

CSS：

```
table {
border-collapse: collapse;
}
table.container {
width: 500px;
background-color: #DDD;
border: 1px solid #0F0;
}
.container td {
vertical-align: top;
}
table.left {
border: 0px;
}
table.right {
border-left: 1px solid #F00;
}
.left th, .left td, .right th, .right td {
padding: 3px;
}
.left thead th, .right thead th {
background-color: #00F;
color: #FFF;
font-weight: bold;
text-align: left;
}
.right tbody td {
background-color: #888;
} 
```

请告诉您是否还想要 JS 和我未完成的纯 CSS 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:39:40.503

而不是js，如果你使用两个浮动div，一个包含文本和文本标题，一个包含图像和图像标题，我认为它应该做你想要的：

[http://jsfiddle.net/PeyWR/10/](http://jsfiddle.net/PeyWR/10/)

（我失去了你的一些造型，但我认为这个想法就在那里）。

# linux - 让 Linux 下的 R 访问 DLL

> ID：11790315
> 
> 赞同：2
> 
> 时间：2012-08-03T06:19:05.890
> 
> 标签：linux, r, dll, wine

我有一个在 Windows 中开发的 R 脚本，它需要一个特定的 DLL 在路径中，因为它使用其中包含的一些函数（通过`dyn.load`函数）。

是否可以使脚本在 Linux 下运行？也许用酒？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:53:45.917

假设您拥有非 R 代码的源代码，我认为您最好的选择是在 Linux 下编译代码，例如使用 gcc 编译器，创建共享库（`.so`文件）并将其加载到 R 中。如果您将代码（R 代码和其他源代码）在 R 包中，您可以集成 R 代码和其他源代码，以便它们可以一次性安装，源代码是动态编译的。

* * *

您没有源代码这一事实使事情变得相当复杂。这个 SO 帖子：

[在 Linux 中使用 Windows DLL](https://stackoverflow.com/questions/374157/using-windows-dll-from-linux)

建议我，你想要的不是微不足道的。一种选择是在 Windows 虚拟机中运行 dll。然后，您可以使用例如 Tcp/ip 与您机器上运行的 dll 进行通信。因此，取决于您愿意走多远，这可能是一个解决方案。上面帖子的答案也表明葡萄酒不会提供令人满意的解决方案，但帖子已经很老了，所以葡萄酒可能会在此期间得到改进。

# ruby-on-rails - 渲染与路由匹配的同一页面

> ID：11790319
> 
> 赞同：0
> 
> 时间：2012-08-03T06:19:19.487
> 
> 标签：ruby-on-rails

我正在尝试通过开发自己的自定义 CMS（是的，是的……）来学习 RoR，我想做一件简单的事情，但无法提出一个干净的解决方案。

我的路线文件具有以下匹配项：

```
match '/login' => "sessions#new" 
```

它的作用是，在点击“http://localhost:3000/login”时，让我登录以创建一个新会话。它完美地工作......

但是，这就是我的 Sessions 控制器的样子：

```
class SessionsController < ApplicationController
  def create    
    @username = params[:session][:username]
    @password = params[:session][:password]
    @rUser = User.find_by_username(params[:session][:username])

  #if user && user.authenticate(params[:session][:password])
    if @rUser && Digest::SHA2.hexdigest(@password) == @rUser.password
      # Sign the user in and redirect to the user's show page.
      redirect_to users_path, :flash => { :notice => "Logged in as #{@username}." }
    else      
      # Create an error message and re-render the signin form.
      redirect_to '/login', :flash => { :error => "Login failed.  Either the username or password was incorrect." }
    end
  end
end 
```

如果您查看我的 if-else 条件中的“else”语句，您会看到我使用 redirect_to '/login' 在登录失败时显示相同的表单。有没有更好的方法来创建指向“/login”的永久链接而不是必须使用字符串，因为如果我决定将来更改 URL，我宁愿不必在多个地方进行更改。

如果不清楚，请见谅！随意要求进一步的代码（不显示它的可悲性）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:23:17.187

```
match '/login' => "sessions#new", :as => :login 
```

然后你可以`login_path`在你的控制器中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T06:27:24.960

你可以这样做

```
 match '/login' => "sessions#new", :as => :login    

      #if want to call like localhost:3000/login

 match '/sign_in' => "sessions#new", :as => :sign_in

     #if want to call like localhost:3000/sign_in 
```

# linux - GDB 调试：使用 SIGTRAP 终止应用程序

> ID：11790321
> 
> 赞同：5
> 
> 时间：2012-08-03T06:19:30.453
> 
> 标签：linux, debugging, gdb

一直在尝试使用 GDB 远程调试在我的目标上运行的应用程序。目标是基于 Armv6，操作系统是 linux，应用程序是基于 QT 的多线程应用程序。

我可以设置断点。但是当断点被击中时，程序与 SIGTRAP 一起崩溃。

提示：我可以在同一目标上运行另一个小型多线程 QT-App 示例。

可能是什么问题呢？

## GDB日志如下

0x4ad52c 处的断点 1：文件 <> ， <>。(2 个位置) (gdb) c 继续。

程序以信号 SIGTRAP、跟踪/断点陷阱终止。该程序不再存在。(gdb)

## (gdb)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T06:54:50.533

您可能在这里有一个解决方案：

[http://sourceware.org/gdb/wiki/FAQ#GDB_does_not_see_any_threads_besides_the_one_in_which_crash_occurred.3B_or_SIGTRAP_kills_my_program_when_I_set_a_breakpoint。](http://sourceware.org/gdb/wiki/FAQ#GDB_does_not_see_any_threads_besides_the_one_in_which_crash_occurred.3B_or_SIGTRAP_kills_my_program_when_I_set_a_breakpoint.)

希望这有帮助。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T03:29:28.963

那么gdb通过ptrace跟踪进程，并且ptrace在线程所在的空间设置断点，空间addr被其他线程共享，如果其他线程到达断点，哦，内核为该线程生成一个sigtrap .

更多信息请参阅 [http://lists.alioth.debian.org/pipermail/ltrace-devel/2006-April/000036.html](http://lists.alioth.debian.org/pipermail/ltrace-devel/2006-April/000036.html)

# java - 如何在 HttpURLConnection 中添加 AsyncTask？

> ID：11790324
> 
> 赞同：4
> 
> 时间：2012-08-03T06:19:40.360
> 
> 标签：java, android, android-asynctask

我正在建立服务器连接，我的问题是我需要`AsyncTask`在我的代码上添加一个，因为它在 sdk 版本中不起作用`10`。我不想使用`StrictMode.ThreadPolicy`.

```
public class TestConnection extends Activity {

@Override
public void onCreate(Bundle cbundle) {
    super.onCreate(cbundle);

    ConnectivityManager aConnectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo aNetworkInfo = aConnectivityManager.getActiveNetworkInfo();
    if (aNetworkInfo != null && aNetworkInfo.isConnected()){
        Toast.makeText(this, "Internet Connected", Toast.LENGTH_LONG).show();
    }else{
        Toast.makeText(this, "Internet Connection Timeout", Toast.LENGTH_LONG).show();
    }

    URL aURL;
    /* Will be filled and displayed later. */
    String aString = null;

    /* We will show the data we read in a TextView. */
    TextView aTextView = new TextView(this);
    try {

        /* Define the URL we want to load data from. */
        aURL = new URL(
                "http://url");

        /* Open a connection to that URL. */
        final HttpURLConnection aHttpURLConnection = (HttpURLConnection) aURL.openConnection();

        /* Define InputStreams to read from the URLConnection. */
        InputStream aInputStream = aHttpURLConnection.getInputStream();
        BufferedInputStream aBufferedInputStream = new BufferedInputStream(
                aInputStream);

        /* Read bytes to the Buffer until there is nothing more to read(-1) */
        ByteArrayBuffer aByteArrayBuffer = new ByteArrayBuffer(50);
        int current = 0;
        while ((current = aBufferedInputStream.read()) != -1) {
            aByteArrayBuffer.append((byte) current);
        }

        /* Convert the Bytes read to a String. */
        aString = new String(aByteArrayBuffer.toByteArray());
    } catch (Exception aException) {

        /* On any Error we want to display it. */
        aString = aException.getMessage();
    }

    /* Show the String on the GUI. */
    aTextView.setText(aString);
    this.setContentView(aTextView);

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:31:04.957

```
private class ConnectionTask extends AsyncTask<String, Void, String>{
    @Override
    protected byte[] doInBackground(String... urls) {
            try {
    aURL = new URL(
            urls[0]);

    /* Open a connection to that URL. */
    final HttpURLConnection aHttpURLConnection = (HttpURLConnection) aURL.openConnection();

    /* Define InputStreams to read from the URLConnection. */
    InputStream aInputStream = aHttpURLConnection.getInputStream();
    BufferedInputStream aBufferedInputStream = new BufferedInputStream(
            aInputStream);

    /* Read bytes to the Buffer until there is nothing more to read(-1) */
    ByteArrayBuffer aByteArrayBuffer = new ByteArrayBuffer(50);
    int current = 0;
    while ((current = aBufferedInputStream.read()) != -1) {
        aByteArrayBuffer.append((byte) current);
    }

    /* Convert the Bytes read to a String. */
    aString = new String(aByteArrayBuffer.toByteArray());               } catch (IOException e) {
                Log.d(TAG, e.toString());
            }
        return aString;
    }

    @Override
    protected void onPostExecute(String result) {
               // result is what you got from your connection
aTextView.setText(result);

    }

} 
```

如何称呼它：

```
 ConnectionTask task = new ConnectionTask();
                        String[] params = new String[2];
                        params[0] = url;
                        params[1] = somethingelseifneeded;
                        task.execute(params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:31:32.097

在 oncreate() 中，您可以像这样使用::

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        StrictMode.ThreadPolicy policy = new       
                      StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
              new MyAsynTask().execute(null, null, null);
      } 
```

然后在 AsynTask 中也这样做::

```
class MyAsynTask extends AsyncTask<Long, Integer, Integer> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected <Type> doInBackground(Long... params) {
            URL ur_url = newURL(http://....) 
                   // do the works on url.....
            return <tuped>result;
        }

        @Override
        protected void onPostExecute(Integer result) {
            // set the results in Ui

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:31:55.877

参考下面的代码

```
new FetchRSSFeeds().execute();

private class FetchRSSFeeds extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage(getResources().getString(
                R.string.Loading_String));
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {

            /**
             * Write your URL connection code and fetch data here
             */

            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

             /* Show the String on the GUI. */
                    aTextView.setText(aString);
                    this.setContentView(aTextView);

    }
} 
```

# jquery - jQuery独立列表滚动

> ID：11790329
> 
> 赞同：2
> 
> 时间：2012-08-03T06:20:08.457
> 
> 标签：jquery

我在一页上有 2 个列表 - [http://jsfiddle.net/nalsur/CneTJ/](http://jsfiddle.net/nalsur/CneTJ/)

现在我想为每个人添加/创建独立滚动

如何：）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:22:45.167

您将每个列表包装在一个 div 中。给 div 一个高度并将溢出设置为自动。

**注意：**为了触发滚动，ul 列表的高度必须大于父 div。

```
.Scrollable
{
    overflow: auto;
    height: 500px;
}

<div class="Scrollable">
   <ul class="FirstUL"></ul>
</div>
<div class="Scrollable">
   <ul class="FirstUL"></ul>
</div> 
```

# javascript - JQuery多个属性过滤器不起作用

> ID：11790331
> 
> 赞同：0
> 
> 时间：2012-08-03T06:20:10.303
> 
> 标签：javascript, jquery

我有一些看起来像这样的html。它是弹出窗口上的文本框，特别是 Quora 的提问框。[http://www.quora.com/](http://www.quora.com/)

```
<div class="qtext_editor_content qed_content" group="__w2_TrzaBWs_interaction" interactive="true" w2cid="TrzaBWs" id="__w2_TrzaBWs_editor" contenteditable="true" npdkey="h5evmzsf0.cz3gxez1tjn0cnmi">add<br npdkey="h5evn1ub0.l1r3uudq6by8ehfr">This is my text</div> 
```

我想检索“这是我的文本”，但 JQuery 的多属性过滤器一直在返回页面上的所有文本。我试过做

```
$("div[class='qtext_editor_content qed_content'][group$=_interaction]").text() 
```

但没有很好的效果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:26:58.370

传递给的字符串`$("")` `jQuery("")`应该是一个 CSS 选择器，例如

`$("div.qtext_editor_content.qed_content[group=__w2_TrzaBWs_interaction]").text()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:27:11.060

它有 id，为什么不直接使用

```
$('#__w2_TrzaBWs_editor').text() 
```

# python - 如何根据 Flask 中的服务器变量选择配置？

> ID：11790332
> 
> 赞同：1
> 
> 时间：2012-08-03T06:20:10.313
> 
> 标签：python, nginx, flask, gunicorn

我正在运行 nginx + gunicorn + flask

我的 nginx 配置如下所示：

```
...

        proxy_set_header            X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header            Host $http_host;
        proxy_set_header            Stage "development";

        proxy_redirect off;

... 
```

我的烧瓶应用程序如下所示：

```
from flask import Flask, request

from werkzeug.contrib.fixers import ProxyFix

app = Flask(__name__)

# configuration settings

if request.headers.get('Stage') == 'production':
    app.config.from_object('config.production_config')
else:
    app.config.from_object('config.development_config')

@app.route('/')
def index():
    return "hello"

app.wsgi_app = ProxyFix(app.wsgi_app) 
```

然而，

这似乎行不通。

我得到一个：RuntimeError：在请求上下文之外工作

我的 nginx 已设置好，因此我可以拥有一个开发/生产环境，但我希望能够说这个“服务器位置”是一个开发环境，并且我希望 Flask 使用适当的配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:00:59.507

应用程序配置适用于整个应用程序，而请求标头仅适用于一个请求。同一个应用程序通常处理许多请求。因此，您不能根据请求标头设置配置。

当没有请求到达应用程序时，您的模块级别的代码在服务器启动时执行，因此没有当前请求。这就是“在请求上下文之外工作”消息的含义。

您正在尝试做的事情（prod 与 dev 配置）最好使用启动 gunicorn 服务器的脚本中的环境变量来完成。如果您同时想要两者，最简单的方法是运行两个 gunicorn 服务器。

或者，创建两个应用程序对象，在同一个进程中运行它们，并使用类似于这些的 WSGI 中间件进行调度：http: [//flask.pocoo.org/docs/patterns/appdispatch/](http://flask.pocoo.org/docs/patterns/appdispatch/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:17:57.990

这有点老了，但我想补充一下我们是如何用烧瓶完成这个的。其中大部分改编自[http://flask.pocoo.org/docs/config/](http://flask.pocoo.org/docs/config/)。

在我们的 config.py 中，我们定义了多个类（每个环境一个）：

```
class Config(object):
    FOO = 1
    BAR = 2

class Development(Config):
    BAR = 3 
```

然后在我们的每个应用程序节点中，我们在 gunicorn 初始化脚本中设置一个环境变量（对我们来说，这存在于主管配置中，但它不是必须的）。

```
APPLICATION_ENV='Development' 
```

然后在初始化期间在烧瓶应用程序中（仅在服务器启动时运行，而不是在请求上下文中）：

```
try:
    env = os.environ['APPLICATION_ENV']
except KeyError as e:
    logging.error('Unknown environment key, defaulting to Development')
    env = 'Development'
    app.config.from_object('config.%s' % env) 
```

现在 app.config['BAR'] 将是 3。

我们还希望支持本地配置文件（例如，在开发人员机器上或从厨师直接部署到机器而不存储在 git 中的密码）。为此，我们在上面进行了扩展，还加载了基于 app.config['LOCAL_CONFIG'] 参数的本地配置。

```
class Development(Config):
    BAR = 3
    LOCAL_CONFIG = '/etc/localConfig.py' 
```

然后在 /etc/localConfig.py

```
BAR = 4 
```

在上面的代码加载环境的初始 app.config 之后，再次在我们的应用程序初始化代码中：

```
if 'LOCAL_CONFIG' in app.config:
    #try to load the local configuration overrides
    if app.config.from_pyfile(app.config['LOCAL_CONFIG'], silent=True):
        logging.info('Loaded local config file at %s' % app.config['LOCAL_CONFIG'])
    else:
        logging.warning('Failed to load local config file at %s - does it exist?' % app.config['LOCAL_CONFIG']) 
```

此时 app.config['BAR'] 为 4。

这并不完美，因为如果您的配置中有字典，您将只能覆盖整个字典，而不是其中的键。它确实完成了我们需要的大部分工作。

# asp.net - 如何不断地将子节点绑定到父节点

> ID：11790334
> 
> 赞同：0
> 
> 时间：2012-08-03T06:20:14.950
> 
> 标签：asp.net

我在列表中有 n 个员工姓名，让它成为

> 1 2 3 。. n

我想将此详细信息绑定到我的treeview1，例如

> 1 -2 --3 。. ----...n

如何做到这一点。任何人都可以为此粘贴代码提前谢谢 Amrutha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:44:35.787

节点类应包含对父节点的引用，即：

```
public class Node {

   public Node parent;

   public Node(Node NewParent){
       this.parent=NewParent;
   }    
} 
```

除了根节点之外的所有节点都应该有一个节点作为父节点，对于根节点，父节点必须设置为空。

# iphone - 推送新视图控制器时将 UITextField 保持为第一响应者

> ID：11790335
> 
> 赞同：0
> 
> 时间：2012-08-03T06:20:17.220
> 
> 标签：iphone, objective-c, ios, uitextfield, first-responder

`UITextField`即使我推送另一个视图控制器，有什么方法可以保留第一响应者吗？

本质上，我正在截取屏幕截图，在新的视图控制器中使用该截图，然后弹出第二个视图控制器。但是，问题在于这不是一个平稳的过渡。当视图控制器弹出时，图片中的键盘消失了（因为图片在第二个视图控制器中但已经弹出），但实际的键盘还没有重新出现。图片消失后，您会看到键盘向上滑动。有没有办法阻止这种情况，这样键盘就一直在那里？

我在新的视图控制器中没有任何其他`UITextField`的s，只有屏幕截图、a `UIButton`、、`UIScrollView`和两个`UIGestureRecognizer`s。

提前致谢！

# jquery - 使第一列固定并在表格中保持可滚动

> ID：11790336
> 
> 赞同：0
> 
> 时间：2012-08-03T06:20:17.733
> 
> 标签：jquery, html, css

在我的表格中，如果 td 溢出，我想冻结第一列并使其他列可滚动。

我在[jsfiddle](http://jsfiddle.net/ZswNc/17/)中尝试过，但它没有按预期工作。

可以有 100 行。

我需要第一列是固定的，并且具有其他列的部分是可滚动的，但单个 td 将保持固定 - 在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:14:00.203

虽然并不完美，并且取决于您的用例和生成 HTML 的方式，您可以执行类似的[操作](http://jsfiddle.net/ZswNc/19/)。

**HTML**

```
<table id="main">
    <tr>
        <td class="first"> what are the possible values?</td>
        <td rowspan="2">
            <div class="rest">
            <table>
                <tr>
                    <td>100</td>
                    <td>200</td>
                    <td>300</td>
                    <td>400</td>
                    <td>500</td>
                    <td>600</td>
                    <td>700</td>
                    <td>800</td>
                    <td>900</td>
                    <td>1000</td>
                    <td>1100</td>
                </tr>                        
                <tr>
                    <td>100</td>
                    <td>200</td>
                    <td>300</td>
                    <td>400</td>
                    <td>500</td>
                    <td>600</td>
                    <td>700</td>
                    <td>800</td>
                    <td>900</td>
                    <td>1000</td>
                    <td>1100</td>
                </tr>                        
                </table>
            </div>
        </td>
    </tr>
    <tr class="first_column">
        <td class="first"> what are the possible values?</td>
    </tr>
</table>​ 
```

**CSS**

```
table {
    border-collapse: collapse;
}
table#main {
    border-top: 1px solid #DFDFDF;
    margin-bottom: 1em;
    width:400px;
    display: block;
}
table#main .first {
    width:200px;
    white-space: nowrap;
}
table#main .rest {
    overflow: scroll;
    background: silver;
    width:200px;
}
table td.first, table .rest td {
    line-height: 1.5em;
    padding: 0.5em 0.6em;
    text-align: left;
    vertical-align: middle;
    text-align: left;
} 
```

​<strong>PS 我只在 OSX 上的 Safari 6 和 Firefox 12、13 和 14 上测试过这个 ​</p>

# openerp - AttributeError: 'bool' 对象没有属性 'id'

> ID：11790340
> 
> 赞同：-1
> 
> 时间：2012-08-03T06:20:38.997
> 
> 标签：openerp

我想问一下。查询数据库时出现的错误

```
def onchange_dept_from(self, cr, uid, ids, partner):
    print partner
    if partner != False:
        # note
        cr.execute('select z.name, z.id from res_partner x, account_account z where x.property_deposit_receivable = z.id AND x.id=%s',(partner,)),
        temp = cr.fetchone()
        name = temp and temp[0] or None

        cr.execute('select z.name, z.id from res_partner x, account_account z where x.property_deposit_payable = z.id AND x.id=%s',(partner,)),
        ads = cr.fetchone()
        name2 = ads and ads[0] or None

        val = {
            'dept_from':name,
            'dept_to':name2,
        }
        return {'value':val } 
```

冲突的“id”的可能性来自我用来移动到 account.move 的函数

```
def get_move_line(self, cr, uid, deposit, type, context=None):
    return {
            'type': type,
            'name': deposit.name or 'add',
            'debit': type == 'dest' and deposit.amount or 0.0,
            'credit': type == 'src' and deposit.amount or 0.0,
            'account_id': type == 'src' and deposit.dept_from.id or deposit.dept_to.id,
            'date': deposit.date,
            'deposit_id': deposit.id
    } 
```

我想可能是因为当时我不得不查询字符串，而函数get_move。我正在寻找一个整数。我应该怎么办？我没主意了。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:47:06.700

我已经解决了这个问题。我只是添加查询以搜索 id。

```
def get_move_line(self, cr, uid, deposit, type, context=None):
    cr.execute('select b.property_deposit_payable, b.property_deposit_receivable from deposit_travel a, res_partner b where a.partner = b.id and b.id = %s',(deposit.partner.id,)),
    tmp = cr.fetchone()
    dep_pay = tmp and tmp[0] or None 
    dep_rec = tmp and tmp[1] or None
    return {
            'type': type,
            'name': deposit.name or 'add',
            'debit': type == 'dest' and deposit.amount or 0.0,
            'credit': type == 'src' and deposit.amount or 0.0,
            'account_id': type == 'src' and dep_pay or dep_rec,
            'date': deposit.date,
            'deposit_id': deposit.id 
```

# asp.net - 只是另一个 jQuery AJAX 不能正确 POST 参数

> ID：11790346
> 
> 赞同：0
> 
> 时间：2012-08-03T06:21:30.280
> 
> 标签：asp.net, ajax, jquery, get

我用谷歌搜索了很多类似的情况，但没有一个能解决我的问题。请看一下我的代码：

JavaScript：

```
 $.ajax({
        type: 'POST',
        url: 'alarmInfo.aspx',
        data: {request:'BasicGpaInfo'},
        dataType: "json",
        success: function (data) {
            alert(data);
        },
        error: function () {
            alert("Error in loading alarm information!");
        }
    }); 
```

ASP.NET：

```
 protected void Page_Load(object sender, EventArgs e)
    {
            if (Request.Form["request"] == "BasicGpaInfo")
            {
                Response.Write(BasicGpaInfo());
            }
            else
            {
                Response.Write("Nothing");
            }
    } 
```

这总是返回 "Nothing" 并且断点告诉它**`Request.Form`是 null**。我已经尝试过`GET`并且`Request.QueryString`给出了相同的情况。

我想`data`ajax 函数有问题，我尝试了以下无济于事的事情：

```
 data: $.param({request:'BasicGpaInfo'})
        data: "{request:'BasicGpaInfo'}"
        data: {request:'BasicGpaInfo'} 
```

它不适用于所有 Web 浏览器。

请给一些建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:22:26.853

我测试了你的代码，它运行良好。但是它总是返回“加载警报信息时出错！” 因为您没有从服务器返回 Json。

Javascript很好，一旦你返回json，它就会成功。

您正在返回整个页面，并且您的 ajax 方法正在从 BasicGpaInfo() 获取整个 html 而不是 Json

尝试在警报中设置断点，您将看到所有数据都在数据中

```
error: function (data) {
alert("Error in loading alarm information!");
} 
```

或者尝试

```
error: function (data) {
alert(data);
} 
```

这是完整的代码

```
$.ajax({
                type: 'POST',
                url: 'Default.aspx/BasicGpaInfoWebMethod',
                data: { request: 'BasicGpaInfo' },
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert(data);
                },
                error: function (data) {
                    alert("Error in loading alarm information!");
                    //alert(data); // uncomment to see the whole response
                }
            }); 
```

你的网络方法将是：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string BasicGpaInfoWebMethod(string request)
    {
        return request;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:10:45.980

在发布之前尝试这个 JSON.stringify。为了在 IE<=7 中使用 JSON.stringify，请包含来自 json.org 的 json2.js 文件

```
 $.ajax({
        type: 'POST',
        url: 'alarmInfo.aspx',
        data: JSON.stringify({ request: 'BasicGpaInfo'}),
        dataType: "json",
        success: function (data) {
            alert(data);
        },
        error: function () {
            alert("Error in loading alarm information!");
        }
    }); 
```

# c# - MonoMac 中的子类 NSApplication

> ID：11790349
> 
> 赞同：2
> 
> 时间：2012-08-03T06:21:41.327
> 
> 标签：c#, cocoa, mono, monomac, nsapplication

我需要在 MonoMac 中继承 NSApplication 以覆盖 NSApplication 的 sendEvent（C# 术语中的 SendEvent）方法，以便接收媒体键事件（Macbook 上的 Play、Pause、Next、Prev），如下所述：[Listening to mac keyboard play/pause events](https://stackoverflow.com/questions/2477068/listening-to-mac-keyboard-play-pause-events)在这里：[https ://bitbucket.org/nkreeger/whitedragon/src/6f530c8a34a7/component/sbAppleMediaKeyController.mm](https://bitbucket.org/nkreeger/whitedragon/src/6f530c8a34a7/component/sbAppleMediaKeyController.mm)

到目前为止，我想出了这段代码：

```
class MainClass
{
    static void Main (string[] args)
    {
        MyApp.Init ();
        MyApp.Main (args);
    }
}
class MyApp : NSApplication
{
    public override void SendEvent (NSEvent theEvent)
    {
        Console.WriteLine ("event received!");
        base.SendEvent (theEvent);
    }
    public override void SetMainMenu (NSMenu aMenu)
    {
        Console.WriteLine ("main menu set!");
        base.SetMainMenu (aMenu);
    }
} 
```

但是没有调用 SendEvent 或 SetMainMenu（我出于测试目的添加了它，因为在启动时应该调用一次 SetMainMenu），因为我没有得到任何控制台输出。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T03:52:23.433

仅子类`NSApplication`化不足以让您的子类替换正常的子类。您还必须`NSPrincipalClass`在您的应用程序列表中设置您的。

看：

[https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)

# xslt-2.0 - 删除 XSLT 中的重复属性

> ID：11790354
> 
> 赞同：1
> 
> 时间：2012-08-03T06:22:30.237
> 
> 标签：xslt-2.0

我知道这是多次发布的一个常见问题，但不幸的是，我无法使用任何建议的方法找到确切的解决方案：

这是我的 XML 的样子：

```
<root>
  <parent>
    <table>
    <attr ......>
       <type t="enumone">
       <info>
        <name .....>
       </info>
    </attr>

    <attr>
        <type t="int">
        <range min="1" max="255"/>
         </type>
         <info>
        <name .....>
       </info>
    </attr>

    <attr>
        <type t="string">
         <info>
        <name .....>
       </info>
    </attr> 
    <attr ......>
       <type t="enumtwo">
       <info>
        <name .....>
       </info>
    </attr>

    <attr>
        <type t="float">
        <range min="1.0" max="25.5"/>
         </type>
         <info>
        <name .....>
       </info>
    </attr>

    <attr>
        <type t="int">
         <info>
        <name .....>
       </info>
    </attr> 

    <attr>
        <type t="enumone">
         <info>
        <name .....>
       </info>
    </attr> 
    <attr>
        <type t="enumthree">
         <info>
        <name .....>
       </info>
    </attr> 
    <attr>
        <type t="enumone">
         <info>
        <name .....>
       </info>
    </attr> 
    </parent>
 </root> 
```

目的是使用 XSLT 从“type”元素中检索一次出现的属性“@t”：

```
Using for-each-group:
<xsl-template match="/root/parent">
  <xsl:for-each select="table">
    <xsl:for-each-group select="//type" group-by="@t">
       <xsl:copy-of select="current-group( )[1]"/>
    </xsl:for-each-group>
  </xsl:for-each>
<xsl-template> 
```

但是我没有输出！我相信有些缺陷。

使用不同的值（）：

```
<xsl:for-each select="distinct-values(type/@t)">
<xsl:sort/>
<xsl:value-of select="."/> <xsl:call-template name="newline"/>
</xsl:for-each> 
```

仍然没有想要的输出。

预期的输出是：

```
enumone
int
string
enumtwo
float
enumthree 
```

感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:39:45.107

好吧，输入样本不是格式良好的 XML，但如果你真的只想要所有元素的不同`t`属性值，那么做`type`

```
<xsl:template match="/">
  <xsl:value-of select="distinct-values(//type/@t)" separator="&#10;"/>
</xsl:template> 
```

XSLT 2.0 就足够了。

如果您还想对不同的值进行排序，则执行

```
<xsl:template match="/">
  <xsl:value-of separator="&#10;">
    <xsl:perform-sort select="distinct-values(//type/@t)">
       <xsl:sort select="."/>
    </xsl:perform-sort>
  </xsl:value-of>
</xsl:template> 
```

举一个完整的例子，输入为

```
<root>
  <foo>
    <type t="int"/>
  </foo>
  <bar>
    <type t="enum"/>
  </bar>
  <foobar>
     <foo>
        <type t="enum">
           <x/>
        </type>
     </foo>
   </foobar>
   <foo>
      <type t="string"/>
   </foo>
</root> 
```

样式表

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:value-of separator="&#10;">
    <xsl:perform-sort select="distinct-values(//type/@t)">
       <xsl:sort select="."/>
    </xsl:perform-sort>
  </xsl:value-of>
</xsl:template>

</xsl:stylesheet> 
```

输出

```
enum
int
string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:37:31.000

**只需将您的代码修改为**：

```
<xsl:template match="/">
    <xsl:for-each-group select="//type" group-by="@t">
       <xsl:copy-of select="current-group( )[1]"/>
    </xsl:for-each-group>
</xsl:template> 
```

**完整的转变**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

<xsl:template match="/">
    <xsl:for-each-group select="//type" group-by="@t">
       <xsl:copy-of select="current-group( )[1]"/>
    </xsl:for-each-group>
</xsl:template>
</xsl:stylesheet> 
```

**当应用于格式良好的 XML 文档时**：

```
<root>
  <foo>
    <type t="int"/>
  </foo>
  <bar>
    <type t="enum"/>
  </bar>
  <foobar>
     <foo>
        <type t="enum">
           <x/>
        </type>
     </foo>
   </foobar>
   <foo>
      <type t="string"/>
   </foo>
</root> 
```

**产生正确的结果**：

```
<type t="int"/>
<type t="enum"/>
<type t="string"/> 
```

# sql - Oracle SQL Developer：在没有 CDATA 的情况下导出为 XML

> ID：11790363
> 
> 赞同：2
> 
> 时间：2012-08-03T06:23:28.253
> 
> 标签：sql, xml, oracle

最近开始使用 Oracle SQL Developer。我已成功运行查询并将结果导出到 XML (encoding='UTF-8')。例如

```
<RESULTS>
    <ROW>
        <COLUMN NAME="ACCOUNTID"><![CDATA[1]]></COLUMN>
        <COLUMN NAME="ADDRLINE1"><![CDATA[XYZ company]]></COLUMN>
        <COLUMN NAME="ADDRLINE2"><![CDATA[]]></COLUMN>
        <COLUMN NAME="ADDRLINE3"><![CDATA[999 6th AVENUE]]></COLUMN>
        <COLUMN NAME="ADDRLINE4"><![CDATA[NEW YORK]]></COLUMN>
        <COLUMN NAME="ADDRLINE5"><![CDATA[NEW YORK, NY 10112]]></COLUMN>
        <COLUMN NAME="COUNTRY"><![CDATA[USA]]></COLUMN>
    </ROW> 
```

我的问题：有没有办法在没有 CDATA defs 的情况下导出？即它是“简单”的数据，我想要/需要的是：

```
<Row>
    <X>1</X>
    <ACCOUNTID>1</ACCOUNTID>
    <ADDRLINE1>XYZ company</ADDRLINE1>
    <ADDRLINE2/>
    <ADDRLINE3>999 6th AVENUE </ADDRLINE3>
    <ADDRLINE4>NEW YORK</ADDRLINE4>
    <ADDRLINE5>NEW YORK, NY 10112</ADDRLINE5>
    <COUNTRY>USA</COUNTRY>
</Row> 
```

浏览了首选项，找不到任何有用的东西。我看到一篇很老的帖子，说生成的 XML 是通过 XSL 生成的，但我找不到任何 XSL。

有没有人做过这个或有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:20:43.163

我能得到的最接近的查询是：

（我使用了一个`WITH`子句来生成表记录）

```
WITH t
  AS (SELECT '1' AS x,
             '1' AS accountid,
             'XYZ company' AS addrline1,
             NULL AS addrline2,
             '999 6th AVENUE' AS addrline3,
             'NEW YORK' AS addrline4,
             'NEW YORK, NY 10112' AS addrline5,
             'USA' AS country
        FROM dual)
SELECT xmlelement("row",
          xmlelement(x,x),
          xmlelement(accountid,accountid),
          xmlelement(addrline1,addrline1),
          xmlelement(addrline2,addrline2),
          xmlelement(addrline3,addrline3),
          xmlelement(addrline4,addrline4),
          xmlelement(addrline5,addrline5),
          xmlelement(country,country)
       )
  FROM t; 
```

生成的输出是：

```
<row>
  <X>1</X>
  <ACCOUNTID>1</ACCOUNTID>
  <ADDRLINE1>XYZ company</ADDRLINE1>
  <ADDRLINE2></ADDRLINE2>
  <ADDRLINE3>999 6th AVENUE</ADDRLINE3>
  <ADDRLINE4>NEW YORK</ADDRLINE4>
  <ADDRLINE5>NEW YORK, NY 10112</ADDRLINE5>
  <COUNTRY>USA</COUNTRY>
</row> 
```

希望能帮助到你...

# java - 捕获无法投递或垃圾邮件文件夹电子邮件

> ID：11790364
> 
> 赞同：1
> 
> 时间：2012-08-03T06:23:37.303
> 
> 标签：java, email, jakarta-mail

我在我的网络应用程序中内置了一些自动化功能，每天发送电子邮件以提醒客户约会等。基本上我使用每天早上 7 点开始的自动调度程序，检查需要通过电子邮件发送的客户的数据库，然后发送消息. 这很好，但除了实际发送电子邮件之外，我完全一无所知。

*   我可以以某种方式验证电子邮件地址实际上是真实的电子邮件并且电子邮件已成功发送吗？
*   如何检查传递到某种垃圾邮件文件夹的邮件呢？
*   更进一步......我知道那里有电子邮件服务可以根据实际打开电子邮件的人数提供统计数据。我该如何检查这种事情？

我的理解是（至少对于我的第一个问题）我需要检查发件人电子邮件地址是否有退回或无法送达的电子邮件并相应地处理它们，但是我如何使用 Java 以编程方式执行此操作？我是否需要实施另一个自动日常流程来检查电子邮件帐户中是否有无法送达的电子邮件，处理错误，然后删除邮件？我假设由于中继服务器等原因，由于中继服务器等原因，无法立即提供无法传递的错误。

我知道这是一个有点模糊和加载的问题，所以我不一定要寻找一个完整的解决方案，但或多或​​少一些可以帮助我入门的建议。我宁愿不使用外部服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:29:07.507

电子邮件通常一发不可收拾，因此没有*标准*的方法来追踪它们。让一些第三方发送电子邮件可能会减少您的邮件被发送到垃圾邮件文件夹的机会，但有时，邮件客户端似乎无需阅读就*知道*您删除了哪些电子邮件，并立即开始删除这些电子邮件。

话虽这么说，你可以看看[这个](https://stackoverflow.com/questions/3676919/how-can-i-recieive-confirmation-for-delivered-email-with-javamail-api)和[这个](https://stackoverflow.com/questions/150183/send-e-mail-and-check-status)以前的 SO 线程。根据您邮件的内容，您可能会获得某种回复。

至于能够检查哪些电子邮件有效或无效，您可以考虑使用某种激活机制。您基本上向他们发送一封邮件，其中包含一个链接，用户必须导航到该链接才能激活某种服务。如果用户激活该链接，那么您就知道他们有权访问给定的电子邮件帐户。

# javascript - 如何使用java脚本突出显示div中特定字符串的所有出现？

> ID：11790375
> 
> 赞同：7
> 
> 时间：2012-08-03T06:24:09.003
> 
> 标签：javascript, html

我需要通过选择一个字符串来突出显示所有出现的字符串，特别是 div，一旦我选择一个单词并单击一个按钮，它需要突出显示它在 div 内的所有出现，

例如 - 如果我选择

> 板球是比赛

它应该突出显示板球是游戏的所有事件，有些可能就像这个 **板球**是游戏或*板球* **是游戏**

![在此处输入图像描述](../Images/78cf92336f9d99544f07a3892c6eb4be.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T09:17:52.850

您可以`TextRange`在 IE 和`window.find()`其他浏览器中使用浏览器为您完成繁重的工作。

[这个答案](https://stackoverflow.com/a/5887719/96100)显示了如何做到这一点。它将匹配跨越元素边界的文本并使用`document.execCommand()`.

或者，James Padolsey 最近发布了一个我没有使用过但看起来可以提供帮助的脚本：http: [//james.padolsey.com/javascript/replacing-text-in-the-dom-solved/](http://james.padolsey.com/javascript/replacing-text-in-the-dom-solved/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-20T06:15:29.540

[mark.js](https://markjs.io/)似乎很适合这个。这是我的 3 行小提琴，用于获取 html“字符串”并突出显示搜索字符串。

```
$(document).ready(function() {
    var html_string = "<b>Major Tom to groundcontrol.</b> Earth is blue <span> and there's something </span> i can do";

    var with_highlight = $("<div/>").html(html_string).mark("can");

    $("#msg").html(with_highlight);
}) 
```

[链接到 jsfiddle](https://jsfiddle.net/sandeep_muthangi/4axfxv9z)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T06:36:33.373

你可以试试这个脚本

# [演示](http://www.nsftools.com/misc/SearchAndHighlight.htm)

在`highlightSearchTerms`此脚本的功能中`var bodyText = document.body.innerHTML;`，您可以将其替换为除法，然后它将为您完成任务..

```
/*
 * This is the function that actually highlights a text string by
 * adding HTML tags before and after all occurrences of the search
 * term. You can pass your own tags if you'd like, or if the
 * highlightStartTag or highlightEndTag parameters are omitted or
 * are empty strings then the default <font> tags will be used.
 */
function doHighlight(bodyText, searchTerm, highlightStartTag, highlightEndTag) 
{
  // the highlightStartTag and highlightEndTag parameters are optional
  if ((!highlightStartTag) || (!highlightEndTag)) {
    highlightStartTag = "<font style='color:blue; background-color:yellow;'>";
    highlightEndTag = "</font>";
  }

  // find all occurences of the search term in the given text,
  // and add some "highlight" tags to them (we're not using a
  // regular expression search, because we want to filter out
  // matches that occur within HTML tags and script blocks, so
  // we have to do a little extra validation)
  var newText = "";
  var i = -1;
  var lcSearchTerm = searchTerm.toLowerCase();
  var lcBodyText = bodyText.toLowerCase();

  while (bodyText.length > 0) {
    i = lcBodyText.indexOf(lcSearchTerm, i+1);
    if (i < 0) {
      newText += bodyText;
      bodyText = "";
    } else {
      // skip anything inside an HTML tag
      if (bodyText.lastIndexOf(">", i) >= bodyText.lastIndexOf("<", i)) {
        // skip anything inside a <script> block
        if (lcBodyText.lastIndexOf("/script>", i) >= lcBodyText.lastIndexOf("<script", i)) {
          newText += bodyText.substring(0, i) + highlightStartTag + bodyText.substr(i, searchTerm.length) + highlightEndTag;
          bodyText = bodyText.substr(i + searchTerm.length);
          lcBodyText = bodyText.toLowerCase();
          i = -1;
        }
      }
    }
  }

  return newText;
}
/*
 * This is sort of a wrapper function to the doHighlight function.
 * It takes the searchText that you pass, optionally splits it into
 * separate words, and transforms the text on the current web page.
 * Only the "searchText" parameter is required; all other parameters
 * are optional and can be omitted.
 */
function highlightSearchTerms(searchText, treatAsPhrase, warnOnFailure, highlightStartTag, highlightEndTag)
{
  // if the treatAsPhrase parameter is true, then we should search for 
  // the entire phrase that was entered; otherwise, we will split the
  // search string so that each word is searched for and highlighted
  // individually
  if (treatAsPhrase) {
    searchArray = [searchText];
  } else {
    searchArray = searchText.split(" ");
  }

  if (!document.body || typeof(document.body.innerHTML) == "undefined") {
    if (warnOnFailure) {
      alert("Sorry, for some reason the text of this page is unavailable. Searching will not work.");
    }
    return false;
  }

  var bodyText = document.body.innerHTML;
  for (var i = 0; i < searchArray.length; i++) {
    bodyText = doHighlight(bodyText, searchArray[i], highlightStartTag, highlightEndTag);
  }

  document.body.innerHTML = bodyText;
  return true;
}

/*
 * This displays a dialog box that allows a user to enter their own
 * search terms to highlight on the page, and then passes the search
 * text or phrase to the highlightSearchTerms function. All parameters
 * are optional.
 */
function searchPrompt(defaultText, treatAsPhrase, textColor, bgColor)
{
  // This function prompts the user for any words that should
  // be highlighted on this web page
  if (!defaultText) {
    defaultText = "";
  }

  // we can optionally use our own highlight tag values
  if ((!textColor) || (!bgColor)) {
    highlightStartTag = "";
    highlightEndTag = "";
  } else {
    highlightStartTag = "<font style='color:" + textColor + "; background-color:" + bgColor + ";'>";
    highlightEndTag = "</font>";
  }

  if (treatAsPhrase) {
    promptText = "Please enter the phrase you'd like to search for:";
  } else {
    promptText = "Please enter the words you'd like to search for, separated by spaces:";
  }

  searchText = prompt(promptText, defaultText);

  if (!searchText)  {
    alert("No search terms were entered. Exiting function.");
    return false;
  }

  return highlightSearchTerms(searchText, treatAsPhrase, true, highlightStartTag, highlightEndTag);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T06:40:13.427

这应该让你开始：http: [//jsfiddle.net/wDN5M/](http://jsfiddle.net/wDN5M/)

```
function getSelText() {
  var txt = '';
  if (window.getSelection) {
    txt = window.getSelection();
  } else if (document.getSelection) {
        txt = document.getSelection();
  } else if (document.selection) {
    txt = document.selection.createRange().text;
  }
  document.getElementById('mydiv').innerHTML = document.getElementById('mydiv').innerHTML.split(txt).join('<span class="highlight">' + txt + '</span>');
} 
```

请参阅：[使用 jQuery 在页面上（不在文本区域中）获取选定的文本](https://stackoverflow.com/questions/1317727/get-selected-text-on-the-page-not-in-a-textarea-with-jquery)

如果您希望它跨元素边界工作，您的代码将需要比这更多的参与。[在进行必要的 DOM 遍历和操作时， jQuery](http://www.jquery.com)将使您的生活更轻松。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T06:30:02.627

我会使用 jQuery 遍历 div 中的所有元素（不知道 div 中是否还有其他元素），然后使用正则表达式并进行贪婪匹配以查找文本中所有出现的选定字符串在元素中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T06:41:07.573

首先，您需要在所需文本中找到所需的子字符串，并用 <span class="search-highlight"> 将它们包装起来。每次您需要突出显示另一个字符串时，您只需获取所有 .search-highlight 跨度并将它们的 outerHtml 转换为 innerHtml。所以代码将接近：

```
function highLight(substring, block) {
   $(block).find(".search-highlight").each(function () {
      $(this).outerHtml($(this).html());
   });
   // now the block is free from previous highlights

   $(block).html($(block).html().replace(/substring/g, '<span class="search-highlight">' + substring + '</span>'));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-28T12:59:31.337

```
<form id=f1 name="f1" action="" 
onSubmit="if(this.t1.value!=null && this.t1.value!='')
findString(this.t1.value);return false"
>
<input type="text" id=t1 name=t1size=20>
<input type="submit" name=b1 value="Find">
</form>
<script>
var TRange=null;

function findString (str) {
 if (parseInt(navigator.appVersion)<4) return;
 var strFound;
 if (window.find) {

  // CODE FOR BROWSERS THAT SUPPORT window.find

  strFound=self.find(str);
  if (!strFound) {
   strFound=self.find(str,0,1);
   while (self.find(str,0,1)) continue;
  }
 }
 else if (navigator.appName.indexOf("Microsoft")!=-1) {

  // EXPLORER-SPECIFIC CODE

  if (TRange!=null) {
   TRange.collapse(false);
   strFound=TRange.findText(str);
   if (strFound) TRange.select();
  }
  if (TRange==null || strFound==0) {
   TRange=self.document.body.createTextRange();
   strFound=TRange.findText(str);
   if (strFound) TRange.select();
  }
 }
 else if (navigator.appName=="Opera") {
  alert ("Opera browsers not supported, sorry...")
  return;
 }
 if (!strFound) alert ("String '"+str+"' not found!")
 return;
}
</script> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-05-19T09:26:32.533

最好使用 JavaScript str.replace() 函数然后 window.find() 来查找过滤器值的所有出现。遍历整个页面可能有点复杂，但如果你想在父 div 或表中搜索 str.replace() 就更简单了。

在您的示例中，您只有一个 DIV，这更简单。这是我要做的（让你的 DIV 有一个 ID：myDIV）：

```
 //Searching for "District Court"
        var filter = "District Court";  

        //Here we create the highlight with html tag: <mark> around filter
        var span = '<mark>' + filter + '</mark>';

        //take the content of the DIV you want to highlight
        var searchInthisDiv =   document.getElementById("MyDiv");
        var textInDiv       =   searchInthisDiv.innerHTML;

        //needed this var for replace function, do the replace (the highlighting)
        var highlighted     =   textInDiv.replace(filter,span); 
        textInDiv.innerHTML =   highlighted; 
```

诀窍是用标签内有过滤器的跨度替换搜索字符串。str.replace 替换所有出现的搜索字符串，因此无需费心循环。Loop 可用于循环遍历 DIV 或其他 DOM 元素。

# android - 覆盖在游戏黑屏上的动画 MoPub（AdMob 原生）广告

> ID：11790376
> 
> 赞同：2
> 
> 时间：2012-08-03T06:24:14.113
> 
> 标签：android, admob, andengine, mopub

我有一个基于 AndEngine 的游戏，它使用带有 AdMob 适配器的 MoPub 广告，以及 AdMob SDK 的 v6.1.0。我正在使用今天从 GitHub 提取的最新 mopub-client 代码。删除本机适配器后，我也尝试过此操作。

我使用包含 SurfaceView 和 MoPubView 的 FrameLayout 显示广告。

我正在测试的设备是 4.1 (Jelly Bean) Galaxy Nexus。

问题是，当广告恰好是多帧广告时，随着帧数的变化，屏幕的其余部分变为空白（即，游戏消失，用户只剩下黑屏，横幅广告仍在尽职尽责地呈现在顶部)

如果我离开应用程序然后返回它，这似乎会更频繁地发生。

此外，如果我让一个对话框出现（带有后退按钮），游戏将重新出现在它后面，直到我：1）关闭对话框 2）等待横幅广告动画中的下一帧

有什么想法可以进一步调试，或者有没有人遇到过这个并且知道我需要做什么？在 SurfaceView 上覆盖横幅是否有更好的替代方法？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:28:02.040

我在 Nexus 7 上遇到了同样的问题，并通过以下方式解决：

adView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);

# php - Cron 作业连接但出现 404 错误

> ID：11790385
> 
> 赞同：0
> 
> 时间：2012-08-03T06:25:11.897
> 
> 标签：php, http, cron, scheduled-tasks, http-status-code-404

所以我多年来一直从事这些 cron 工作。除了上个月，他们一直都工作得很好。

cron作业的响应如下

```
--2012-08-03 00:00:01--  http://www.__domain__.com/cron/cleanSymFolder
Resolving www.__domain.com... 72.__.__.19
Connecting to www.__domain__.com|72.__.__.19|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2012-08-03 00:00:01 ERROR 404: Not Found. 
```

我可以去浏览器中的方法就好了。domain.com/cron/cleanSymFolder">http://www.domain.com/cron/cleanSymFolder **_** _

它运行并成功。任何想法为什么 CRON 会抛出 404 即使它已连接，即使我可以手动点击 URL？

此外，我设置了 3 个手动 cron 作业来执行此操作。所有 3 都以这种方式失败。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:31:50.393

从您提供的信息来看，它看起来像是环境问题。也许在从您运行 cron 作业的服务器到您尝试连接的 Web 服务器的途中添加了一些防火墙。

你在哪里运行你的浏览器？在您的 cron-jobs-running 机器上还是仅在您的 PC 上？

你的cron作业机器是windows还是linux？

假设它是 linux，我建议您直接转到运行作业的机器并尝试获取文件（例如通过使用`wget`命令）。这样你会发现你真的可以从这台机器上访问网络服务器......

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:49:55.153

来吧，伙计们。如果他得到状态 404，就不可能是 DNS 问题。我的猜测是，由于用户代理，远程服务器响应为 404。

# java - C++ 中的 Java 模式替换（库）

> ID：11790387
> 
> 赞同：2
> 
> 时间：2012-08-03T06:25:36.237
> 
> 标签：java, c++, boost

我在 C++ 中移植 Java 代码，其中 Java 代码一直在使用 Pattern 类来解析正则表达式。任何人都知道 C++ 中的任何库或开源用于正则表达式作为 Java 的替代品吗？我正在寻找Linux。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:48:24.670

标准库包含[正则表达式功能](http://www.cplusplus.com/reference/std/regex/)。[Boost](http://www.boost.org/)库通常被认为质量非常高。[Boost.regex](http://www.boost.org/doc/libs/1_50_0/libs/regex/doc/html/index.html)库处理正则表达式。您可以只使用那个，而不必包含所有单独的 Boost 库。

# java - 在 JTree 中获取属性 XML

> ID：11790390
> 
> 赞同：2
> 
> 时间：2012-08-03T06:25:56.290
> 
> 标签：java, xml, swing, jtree

在本[教程](http://naveedmurtuza.blogspot.com/2010/10/display-xml-in-jtree-with-dnd-support.html)中，当我右键单击删除菜单时如何获取 xml 的属性，然后显示带有属性值的对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:46:41.360

在`deleteAction`中，您可以参考`clickedPath.getLastPathComponent()`访问选定的节点。

# asp.net - 在数据表上使用 LIKE

> ID：11790391
> 
> 赞同：0
> 
> 时间：2012-08-03T06:25:57.113
> 
> 标签：asp.net, regex, datatable, full-text-search

我正在对数据表执行搜索操作。通过在数据`LIKE`表上使用子句。但它不能完美地工作。我正在搜索这样的单个列。

```
 string expression;
    expression = table.Columns[2].ColumnName.ToString() + " Like" + "'%H%'";
    DataRow[] foundRows;
    foundRows = table.Select(expression);       
    DataTable dt = new DataTable();
    foreach (DataRow dr in foundRows)
    {
        dt.ImportRow(dr);            
    } 
```

稍后将该数据表绑定`dt`到gridview。但`table.Select(expression)`没有返回确切的行。它返回不包含搜索条件的行。

我可以使用正则表达式`dt`吗？我该如何使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:38:01.290

我不确定这是整个问题，但我认为您在 like 字符串之后缺少一个空格：`" Like "`

# javascript - 融合图表工具提示

> ID：11790393
> 
> 赞同：0
> 
> 时间：2012-08-03T06:26:18.267
> 
> 标签：javascript, ios, ios4, uiwebview, flash

我已经在我的 iPad 应用程序 Web 视图中实现了 Fusion 图表（SWF 和 JS）。我想为图形实现工具提示和向下钻取。单击应该显示工具提示，双击应该会淹没图表。我怎样才能做到这一点...

# objective-c - 如何使用单例对象播放两个 AVAudioPlayer...？

> ID：11790394
> 
> 赞同：1
> 
> 时间：2012-08-03T06:26:28.893
> 
> 标签：objective-c, avaudioplayer

我是 iPhone 的初学者。我想一个一个地播放两个声音。一停然后第二次播放。只有一个按钮单击事件播放两个声音并使用单例对象。提供适用于我的应用程序的任何源代码和建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:34:51.370

您可以使用委托方法

`- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag`，属于协议`AVAudioPlayerDelegate`。

你可以在[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html#//apple_ref/occ/intfm/AVAudioPlayerDelegate/audioPlayerDidFinishPlaying%3asuccessfully%3a)阅读。

# php - 登录后重定向到上一页的最佳做法是什么？PHP

> ID：11790399
> 
> 赞同：1
> 
> 时间：2012-08-03T06:26:48.683
> 
> 标签：php, security, redirect, login, code-injection

登录后，我想将用户重定向回他们使用 PHP 所在的页面。在对此事进行了一些搜索并没有找到任何好的解决方案之后，我决定使用 $_SERVER['REQUEST_URI'] 在包含当前部分 URL 的登录表单中添加一个隐藏字段。服务器在用户登录后使用此信息将用户重定向回上一页。这一直正常工作，但是这是我的问题。

总的来说，我需要对 url 应用什么安全措施，一旦它返回到服务器，这样，如果被篡改，它就不会将用户重定向到外部和可能谨慎的站点？

例如：如果我将表单中的值从 $_SESSION['REQUEST_URI'] 更改为[http://www.google.com](http://www.google.com)，它会在登录后重定向到 Google。对此进行消毒的最佳方法是什么？

*我目前正在使用 mysql_real_escape_string() 进行 SQL 注入。

```
<form action="/signin/" method="post">
<input type="hidden" name="return" value="<?php echo $_SERVER['REQUEST_URI']; ?>" />
</form>
......
$return = mysql_real_escape_string($_POST['return']);
header('Location: '.$return); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:11:07.313

正如数百个其他答案/评论所指出的那样，每个人现在都应该使用`mysqli`。除此之外， `mysql_real_escape_string()`顾名思义，用于转义将在 MySQL 查询中使用的字符串。它没有其他用途。它并*不能*保护您免受 XSS 攻击，我将演示...

设置：

```
// represent a string without using quotes
function ab($str) {
  $out = array();
  for ($i = 0; $i < strlen($str); $i++) {
    ($chr = _ab($str[$i])) || ($chr = 'String.fromCharCode('.ord($str[$i]).')');
  }
  return implode('+', $out);
}
// represent a character without quotes
function _ab($chr) { 
  $alpha = array(
    'Array', 'Boolean', 'Date', 'Function', 'Iterator', 'Number', 'Object',
    'RegExp', 'String', 'ArrayBuffer', 'Float32Array', 'Float64Array', 'JSON',
    'Int16Array', 'Int32Array', 'Int8Array', 'Uint16Array', 'Uint32Array',
    'Uint8Array', 'Uint8ClampedArray', 'Error', 'EvalError', 'InternalError',
    'RangeError', 'ReferenceError', 'StopIteration', 'SyntaxError', 'parseInt',
    'TypeError', 'URIError', 'decodeURI', 'decodeURIComponent', 'encodeURI',
    'encodeURIComponent', 'eval', 'isFinite', 'isNaN', 'parseFloat', 'uneval'
  );
  // sort function names by length to minimize output
  usort($alpha, function($a, $b){return strlen($a) - strlen($b);});
  foreach ($alpha as $fn) {
    if (($i = strpos($fn, $chr)) !== false) return "$fn.name[$i]";
  }
  return false;
}
$mb = chr(0xC2).chr(0x8F); // eats backslashes for breakfast 
```

这个怎么运作：

```
$msg = ab('exploited!');
$payload = "console.log($msg);";
$uri = "$mb\" onmouseover=$payload title=XSS";
// try to sanitize URI
$uri = mysql_real_escape_string($uri);
?>
<a href="<?php echo $uri ?>">click me</a> 
```

这会生成“URI”，例如：

```
" onmouseover=console.log(Date.name[2]+eval.name[0]+isNaN.name[1]+Date.name[2]); title=hi 
```

它直接通过`mysql_real_escape_string()`（因为第一个“字符”实际上是一个部分多字节字符`0xC28F`，它立即吃掉它之后的字符 - 反斜杠`mysql_real_escape_string()`插入以转义引号），产生：

```
<a href="\" onmouseover=THE_PAYLOAD title=XSS">click me</a> 
```

浏览器解释为：

```
<a title="XSS"" onmouseover="THE_PAYLOAD" href="\">click me</a> 
```

您可以在 Firefox 或 IE 中打开控制台自行测试，当您将鼠标悬停在链接上时，您会看到任意 JS 代码正在执行，尽管使用了`mysql_real_escape_string()`.

`mysql_real_escape_string()`也不能保护您免受`javascript:`以下链接的影响：

```
javascript:$.post(%27/account/change-password%27,{newPassword:%27p0wned%27,newPassword2:%27p0wned%27});undefined; 
```

由于 MySQL 中没有使用百分比编码，`mysql_real_escape_string()`所以不知道`%27`是单引号还是`%22`双引号；所以它只是忽略它们。如果用户单击此链接，它将发送一个`POST`请求，将其密码更改为攻击者选择的密码。它可以被修改为也重定向到用户期望去的页面，所以他们不知道刚刚发生了什么。

对当前设置进行此类攻击的唯一障碍是 URI 是相对于根的，因此它们总是以“/”开头，但正如第一个示例所示，多字节字符串可用于欺骗浏览器，即使结果标记被破坏，由于大多数浏览器的 HTML 解析器的宽大处理，该链接仍然有效。阅读您的问题后，我只花了 15 分钟就想出了这个例子。一个坚定的攻击者无疑会想出一些*确实*构成实际威胁的东西。

所以为了安全起见，你必须使用专门为 HTML 和 URL 设计的方法来清理你的 URI。[OWASP 关于 URL 转义的指南](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#RULE_.235_-_URL_Escape_Before_Inserting_Untrusted_Data_into_HTML_URL_Parameter_Values)是一个很好的起点。否则，这里的其他答案提供了一些更安全的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:11:05.540

我发现了这个，对我来说真的很好：[Safely Redirecting with an Open URL Parameter in PHP](http://www.savagereactor.co.uk/posts/2008/12/14_safely_redirecting_with_a_url_parameter.html)

他正在与一个受信任的“推荐人”列表合作。

包括这一点，您可以使用多种方式。检查引用者，表单中的隐藏字段，如果可以，甚至服务器日志。

除了服务器日志，我认为没有更好的方法来检查用户来自何处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:08:56.173

您应该将当前 url 存储在会话变量中，例如 in `$_SESSION["last_page_visited"]`（登录和登录提交页面除外）。所以每次访问新页面时，`$_SESSION["last_page_visited"]`都会被当前的url覆盖。因此，无论您访问哪个页面，您访问的最后一页的 url 都会保存在会话中。如果您单击登录，则从任何页面，成功登录后重定向到该会话中保存的 url。如果 $_SESSION["last_page_visited"] 为空，则重定向到索引页面。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:12:49.077

如果登录页面使用 SSL/TLS 加密，并且您从服务器设置了隐藏表单字段的值（已根据您的白名单进行了验证），那么如果它在提交之前被修改，用户就会知道它，因为他们这样做了它。

SSL/TLS 是最佳实践。

# php - PDO拒绝删除一行数据（在特定表中）

> ID：11790402
> 
> 赞同：4
> 
> 时间：2012-08-03T06:27:13.543
> 
> 标签：php, mysql, pdo

好吧，我被这个难住了。我的数据库中有一个表，我似乎无法通过 PDO 删除行（我已经注意到这种行为几个星期了，在那之前它工作得很好）。

我的 PHP 代码是这样的：

```
 // Echo's have been added for testing.
    try{
            $dbh = new PDO($hostname, $username, $password);

            $sql="delete from sources where workFlowID=".$ID.";";
            $numRows=$dbh->exec($sql);
            echo "There were $numRows deleted with: $sql <br><br>";

            $sql="delete from workflow where id=".$ID." limit 1;";
            // I have only put the 'or die' section in this today to try to see where
            // it was having problems. It carries through happily as the output 
            // below shows.
            $numRows=$dbh->exec($sql) or die(print_r($dbh->errorInfo(), true));
            // This is the problem delete...
            echo "There were $numRows deleted with: $sql <br><br>";

            $dbh=null;

    }
    catch(PDOException $e){
            echo 'Error : '.$e->getMessage();
            exit();
    } 
```

输出：

```
 There were 1 deleted with: delete from sources where workflowid=1;

    There were 1 deleted with: delete from workflow where id=1 limit 1; 
```

但是，当我查看数据库时，我仍然看到我的记录在我的`workflow`表中。

我已经检查并仔细检查了数据类型。ID 和 workflowID 都是整数。它们被提供了相隔几行的相同变量。

我认为这可能是一个权限问题，所以我用以下内容全面覆盖了它：

```
 mysql> grant all privileges on storeProcess.* to 'myusername'@'localhost' with
     grant option;
    Query OK, 0 rows affected (0.19 sec) 
```

然后我认为这可能是一些时髦的时间/过载/whothehellknowswhat 问题，所以我在工作流表上创建了一个触发器来完成应用程序的工作并清理其他表。然后我将我的 PHP 代码更改为：

```
 // Echo's have been added for testing.
    try{
            $dbh = new PDO($hostname, $username, $password);

            $sql="delete from workflow where id=".$ID." limit 1;";
            $numRows=$dbh->exec($sql) or die(print_r($dbh->errorInfo(), true));
            echo "There were $numRows deleted with: $sql <br><br>";

            $dbh=null;

    }
    catch(PDOException $e){
            echo 'Error : '.$e->getMessage();
            exit();
    } 
```

现在输出是：

```
 There were 1 deleted with: delete from workflow where id=1 limit 1; 
```

但同样，记录仍然存在。

```
 mysql> select count(*) from workflow where id=1;
    +----------+
    | count(*) |
    +----------+
    |        1 |
    +----------+
    1 row in set (0.00 sec) 
```

当我使用 PDO 正在使用的帐户的用户名/密码登录时，使用完全相同的命令从控制台删除记录当然没有问题（触发器工作正常，并且也从其余表中删除数据）：

```
 mysql> delete from workflow where ID=1;
    Query OK, 1 row affected (0.00 sec)

    mysql> select count(*) from workflow where id=1;
    +----------+
    | count(*) |
    +----------+
    |        0 |
    +----------+
    1 row in set (0.00 sec) 
```

那么出了什么问题呢？

这是在我的工作桌面上运行的（Win XP，没什么花哨的，来自大公司的标准类型 SOE）。

在这些查询期间，我没有使用任何交易。此外，只有少数用户使用该应用程序，并且在任何情况下都不会达到高 CPU。

我将把代码和架构带回家在 linux 下对其进行测试，并在我回来时发布结果。

更新：我刚刚把它移到我家的 linux 系统上。完全没有变化。

编辑：

我已经按照建议更改了我的代码：

```
try{
    $dbh = new PDO($hostname, $username, $password);
    $dbh->setAttribute(PDO::ATTR_AUTOCOMMIT, true);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $sql="delete from sources where workflowid=".$ID.";";

    //echo $sql."<br><br>";

    $numRows=$dbh->exec($sql);
    echo "There were $numRows deleted with:<b> $sql </b><br><br>";

    $sql="delete from workflow where id=".$ID." limit 1;";
    $numRows=$dbh->exec($sql);
    echo "There were $numRows deleted with:<b> $sql </b><br><br>";

    $sql="delete from workflow where id=".$ID." limit 1;";
    $numRows=$dbh->exec($sql);
    echo "There were $numRows deleted with:<b> $sql </b><br><br>";

    $dbh=null;

}
catch(PDOException $e){
    echo 'Error : '.$e->getMessage();
    //exit();
} 
```

我使用以下输出运行它：

```
There were 601 deleted with: delete from sources where workflowid=77;

There were 1 deleted with: delete from workflow where id=77 limit 1;

There were 0 deleted with: delete from workflow where id=77 limit 1; 
```

该行仍未删除：

```
mysql> select count(*) from workflow where id=77;
+----------+
| count(*) |
+----------+
|        1 |
+----------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:10:45.557

该`PDO::exec()`函数返回受影响的行数，如果没有行受到影响，则返回 0。

像这样的行将`die()`因为`exec`将返回`0`被解释为布尔值 false。

```
$dblink->exec("UPDATE `sometable` SET `somecolumn`=0 WHERE `somecolumn`=0") or die("Never use die for error handling."); 
```

PDO 的最佳错误处理实践是使用 PDO 异常。启用 PDO 异常（属于 PDOException 类，请参阅文档），如下所示：

```
//enable Exception mode (uncaught exceptions work just like die() with the benefit of giving you details in logs of where execution was stopped and for what reason)
$pdoDBHandle->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

移除`or die()`并`exit();`启用异常模式。我敢打赌这会解决你的“奇怪”问题。还要看看在 PHP 中抛出异常，即使使用过程代码（替换`die()`和`exit()`.

顺便说一句`exit`，就像停止执行一样`die`，除了它在 CLI 模式下很有用，因为它会向操作系统返回成功/错误代码。它真的不是为了错误处理。

# wordpress - 如何使 wordpress 网站与移动设备兼容

> ID：11790406
> 
> 赞同：-3
> 
> 时间：2012-08-03T06:27:55.577
> 
> 标签：wordpress

我有一个在所有浏览器中都能正常工作的 wordpress 网站。现在我想让它与手机兼容。这怎么可能？。我使用了 21 个主题来制作网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:34:09.753

有一些插件和主题可以帮助您。
我用过[这个](http://wordpress.org/extend/plugins/wordpress-mobile-pack/)，它适用于大多数手机。
您可以随时在 WordPress 网站上[搜索](http://wordpress.org/extend/plugins/search.php?q=mobile%20version&sort=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:52:46.340

worpress 移动包很好.. 更多选择：
[http ://wordpress.org/extend/plugins/wp-mobile-detector/](http://wordpress.org/extend/plugins/wp-mobile-detector/)
[http://wordpress.org/extend/plugins/mobilepress/](http://wordpress.org/extend/plugins/mobilepress/)

# opencv - 如何使用opencv测量视频中检测到的物体与摄像头的距离？

> ID：11790410
> 
> 赞同：1
> 
> 时间：2012-08-03T06:28:29.717
> 
> 标签：opencv

我所知道的是视频中对象的高度和宽度。有人可以指导我使用 c 或 c++ 计算检测到的物体与视频中相机的距离吗？有没有什么算法或公式可以做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:40:03.777

Martin Ch 说您需要校准相机是正确的，但正如 vasile 指出的那样，这不是线性变化。校准你的相机意味着找到这个矩阵

```
camera_matrix = [fx,0 ,cx,
                 0,fy,cy,
                 0,0, 1]; 
```

该矩阵在 3 维坐标 (x,y,z) 上运行，并将其转换为 2 维[齐次](http://www.songho.ca/math/homogeneous/homogeneous.html)坐标。要转换为您的常规欧几里得 (x,y) 坐标，只需将第一个和第二个分量除以第三个。那么现在这些变量在做什么呢？

**cx/cy：**它们的存在是为了让您可以根据需要更改坐标系。例如，您可能希望相机空间中的原点位于图像的左上角，而世界空间中的原点位于中心。在这种情况下

```
cx = -width/2;
cy = -height/2; 
```

如果您不更改坐标系，请将其保留为 0。

**fx/fy：** 这些以 x 像素和 y 像素为单位指定焦距，它们通常接近相同的值，因此您可以只给它们相同的值 f。这些参数本质上定义了透视效果的强度。假设没有 cx 和 cy，则从世界坐标到屏幕坐标的映射（您可以从上面的矩阵中自行计算）

```
xsc = fx*xworld/zworld;
ysc = fy*yworld/zworld; 
```

正如你所看到的，使物体在近处变大而在远处变小的重要量是f/z**比。**它不是线性的，但通过使用齐次坐标，我们仍然可以使用线性变换。

简而言之。使用经过校准的相机和世界坐标中已知的对象大小，您可以计算其与相机的距离。如果您缺少其中任何一个，那是不可能的。在不知道世界坐标中的对象大小的情况下，您可以做的最好的事情是通过确定比率 xworld/zworld（知道 fx）将其屏幕位置映射到世界坐标中的射线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:34:49.923

我觉得只用相机不容易，

考虑使用第三个设备/传感器，如 kinect/立体相机，

然后您将从数据中获得深度（z）。

[https://en.wikipedia.org/wiki/OpenNI](https://en.wikipedia.org/wiki/OpenNI)

# parallel-processing - 这个模拟适合 CUDA 还是 OpenCL？

> ID：11790418
> 
> 赞同：0
> 
> 时间：2012-08-03T06:29:04.123
> 
> 标签：parallel-processing, cuda, gpu, computation

我代表一位从事数值天体物理学工作的朋友询问。

基本上他所做的是模拟一团气体。有有限数量的单元格，并且定义了时间步长，使得气体每一步不能穿过超过一个单元格。每个细胞都具有密度和温度等属性。每个时间步长，这些（和位置）都需要计算。我认为主要是位置问题，因为这主要受细胞之间重力相互作用的影响，所有这些相互作用都会相互影响。

目前他正在一个约 150 个节点的集群上运行它，但我想知道，如果它可以像这样并行化，它是否可以在一些带有 CUDA 的 GPU 上运行得更快？目前，他需要几天时间才能完成模拟。由于 GPU 通常具有约 500 个内核，因此它们似乎可以提供提升。

也许我完全错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:18:26.940

是的，这听起来像是一个不错的 GPU 应用程序。GPU 处理在大型数据集上运行相同的功能时最有效。如果您已经让它在集群计算机上并行运行，我会说编写它并在单个显卡上对其进行测试，看看这是否是对单个集群的改进，然后相应地进行扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:09:51.937

您描述的任务非常适合 GPU。GPU 已成功用于显着提高粒子、空气动力学和流体模拟等领域的性能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T13:12:22.323

在不了解有关模拟的更多细节的情况下，无法确定它是否会获得性能提升。从广义上讲，受内存限制的算法（即每个内存事务相对较少的算术运算）往往从卸载到 GPU 中受益最多。

对于天体物理学模拟，以下链接可能有用：[http ://www.astrogpu.org/](http://www.astrogpu.org/)

# java - 列表字段/属性和 Restricted.in 上的休眠投影

> ID：11790420
> 
> 赞同：0
> 
> 时间：2012-08-03T06:29:12.213
> 
> 标签：java, hibernate

我有以下产品类别

```
productClass
productID
name
make
title
colors {1..*}. 
```

我试图得到

`productID`,`colors`并且`name`只有字段..

我的产品适用于单身`attirbute`但`colorList`未被检索。

最糟糕的是..当我有一个标准（restrictions.in）时，它说sql格式不正确..缺少属性y1_

一个很好的例子是

[带有投影的休眠条件不执行 @OneToMany 映射的查询](https://stackoverflow.com/questions/4661919/hibernate-criteria-with-projection-not-performing-query-for-onetomany-mapping?rq=1)

我正在尝试使用项目获得完整的费用付款，而他正试图在费用中获得一些领域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:27:38.130

如果您想为任何颜色列表项目项目任何属性集，请考虑使用[http://github.com/moesio/seimos](http://github.com/moesio/seimos)这是一个示例：

例如，您可以使用如下条件：

```
Criteria criteria = session.createCriteria(Cat.class);
criteria.add(Restrictions.like(“description”, “Pap”)
  .addOrder(Order.asc(“description”);

Criteria subCriteria = criteria.createCriteria("kind", "kind");
subCriteria.add(Restrictions.eq("description", "persa"));

Criteria anotherSubCriteria = subCriteria.createCriteria("anAssociation","anAssociation");
anotherSubCriteria.add(Restrictions.eq("attribute", "anything"));

criteria.setResultTransformer(new AliasToBeanResultTransformer(Cat.class));

criteria.crateAlias(“kind.anAssociation”, “kind_anAssociation”);

criteria.setProjection(Projections.projectionList()
  .add(Projections.alias(Projections.property(“id”), “id”))
  .add(Projections.alias(Projections.property(“kind.id”, “kind.id”))
  .add(Projections.alias(Projections.property(“kind.anAssocation.attribute”, “kind.anAssociation.attribute”))

List cats = criteria.list(); 
```

但是如果你想保存一些代码，你可以使用 Seimos 和代码

```
Filters filters = new Filters();
filters.add(new Filters(“description”, “Pap”)
  .add(new Filter(“description”))
  .add(new Filter("kind.description", "persa"))
  .add(new Filter("kind.anAssociation.attribute", "anything"));
List<Cat> cats = dao.find(filters); 
```

所以，考虑使用[http://github.com/moesio/seimos](http://github.com/moesio/seimos)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:24:00.813

如果我对您的理解正确，那么您可以将此类查询用于您的目的：

```
 List<Object[]> results = sess.createCriteria(Category.class, "category")
                .add(Restrictions.in("category.name", new String[]{"Test1", "Test2"}))
                .createAlias("items", "item")
                .setProjection(Projections.projectionList()
                        .add(Projections.property("category.id"), "categoryId")
                        .add(Projections.property("category.name"), "categoryName")
                        .add(Projections.property("item.name"))
                        .add(Projections.property("item.initialPrice")))
         .list(); 
```

它将返回代表结果每一行的 Object[] 数组列表。

我不知道您的 Color 实体的结构以及您需要从中获取哪些字段，这就是为什么我发布了两个默认实体的示例：Category 和 Item（它们的关系在您的情况下是一对多的）。

您可以使用列表代替数组。例如，您可以通过以下方式在上面的示例中定义限制：

```
 List<String> inRestrictions = new ArrayList<String>();
 inRestrictions.add("Test1");
 inRestrictions.add("Test2");

    ...
    .add(Restrictions.in("category.name", inRestrictions))
    ... 
```

**编辑：**

如果您需要带有颜色列表的 Product 对象，则只获取它。如果你定义了正确的映射，那么颜色列表将被获取（懒惰或急切地）。

```
List<Product> results = sess.createCriteria(Product.class)
       .add(Restrictions.in("... necessary restrictions")
       .list() 
```

# javascript - YUI 测试和 DOM 测试

> ID：11790429
> 
> 赞同：0
> 
> 时间：2012-08-03T06:30:09.133
> 
> 标签：javascript, unit-testing, yui

YUI 测试页面说 YUI 支持“所有 A 级浏览器中的 DOM 事件模拟（通过事件）”。除此之外，我找不到更多细节。这是否意味着 DOM 在测试之间“重置”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:10:47.803

不，这意味着有一种`node.simulate('click')`方法可以帮助您自动化测试

您可以在以下位置获得更多信息：[模拟 DOM 事件](http://yuilibrary.com/yui/docs/event/simulate.html)。

# javascript - 使用 jquery 的目标页面或 URL 的页面加载时间

> ID：11790435
> 
> 赞同：0
> 
> 时间：2012-08-03T06:30:33.237
> 
> 标签：javascript, jquery, jquery-plugins, page-load-time

有没有办法从 Jquery 获取 URL 或页面的加载时间？例如，我向“http://www.yahoo.com”发出 ajax 请求，我想知道完全加载页面需要多长时间。我知道相同的域策略。但我只想编写一个简单的 javascript 实用程序，可以让我知道页面加载时间。

我知道有 YSlow 等工具，但我希望这个实用程序在浏览器选项卡中连续运行，并在页面加载时间超过某个阈值时发出警报（javascript）警报。

谢谢，J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:01:51.373

像这样的东西应该很好用。

```
var startTime;
$.ajax({
    // url, type, dataType, etc
    beforeSend: function(xhr){
        startTime = +new Date();
    }
    complete: function(xhr, state){
        var latency = (+new Date()) - startTime;
        window.console.log(latency);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:47:10.057

如果您使用的是 $.ajax，您可以在“beforeSend”选项调用的函数中设置一个带有开始时间的变量，例如：

```
var start = (new Date()).getTime(); 
```

然后使用“完整”选项设置另一个变量，例如：

```
var finish= (new Date()).getTime(); 
```

然后比较两者以获得秒数，例如：

```
var secs = (finish-start)/1000; 
```

或者，一旦您设置了开始变量，使用“setInterval()”来检查开始变量与当前时间，直到它超过阈值。

但是您知道 $.ajax 中也有“超时”选项，这里对此进行了很好的介绍，并且可能会有所帮助：

[确定 $.ajax 错误是否超时](https://stackoverflow.com/questions/3543683/jquery-ajax-timeout-setting)

# jquery - Jquery：并排的两个表

> ID：11790436
> 
> 赞同：0
> 
> 时间：2012-08-03T06:30:35.993
> 
> 标签：jquery, html-table

我无法并排创建两个表（模拟交易或无交易货币表）。我知道我可以创建一个有两列的表，但是我想有一个高表和一个低表，以便将来管理。这是我的代码：

```
amounts = [0.01, 1, 5, 10, 25, 50, 75, 100, 250, 500, 750, 1000, 2500, 5000, 7500, 10000, 25000, 50000, 75000, 100000, 250000, 500000, 750000, 1000000] 
var tableString = "<table border=1>";
for (i = 0; i < 24; i ++){
    tableString += "<tr><td>";
    tableString += amounts[i];
    tableString += "</td></tr>";
    if (i == 11){
        var Table = $(document.createElement('span')).attr("id", "low");
        Table.html(tableString + '</table>');
        Table.appendTo(".amounts");
        tableString = "<table border=1>";
        } 
    if (i == 23){
        var Table = $(document.createElement('span')).attr("id", "high");
        Table.html(tableString + '</table>');
        Table.appendTo(".amounts");
        } 
    } 
```

还有我的html：

```
<div class='amounts'>
</div> 
```

但是我没有并排得到两个表（即使我创建了 span 元素）。它看起来就像我使用 div 元素一样。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:48:49.637

这可能是另一种方式：

```
var amounts = [0.01, 1, 5, 10, 25, 50, 75, 100, 250, 500, 750, 1000, 2500, 5000, 7500, 10000, 25000, 50000, 75000, 100000, 250000, 500000, 750000, 1000000] ;

function createTable(el, split){

    var tableString = "<table border=1>";

    for (var i = 0; i < el.length/2; i++){

        if(i%split == 0){ tableString += "<tr>"; }
        tableString += '<td>'+el[i]+'</td><td>'+el[i+el.length/2]+'</td>';
        if(i%split == 0){ tableString += "</tr>"; }

    }

    tableString += '</table>';
    var table = $(tableString);
    table.appendTo(".amounts");
}

createTable(amounts, 2); 
```

# android - 应用程序在模拟器上运行良好，但在移动设备上运行不正常

> ID：11790439
> 
> 赞同：1
> 
> 时间：2012-08-03T06:30:53.793
> 
> 标签：android, sqlite, android-edittext, forceclose

我有一个 Android 应用程序，可以在按下“SAVE”按钮时将不同 EditText 框中的值保存到 Sqlite 数据库。这个应用程序在模拟器上运行良好，并提供所需的输出。但应用程序在移动设备中按下“保存”按钮时显示“强制关闭”错误。

我以前在 Sqlite 数据库上工作过，我很确定那部分没有错误。那么有什么问题。请帮忙。

如果有帮助，这里是 LogCat 条目：-

```
08-03 12:08:28.875: I/ActivityManager(59): Starting activity: Intent {cmp=com.SMSDb/.Settings }
08-03 12:08:29.665: I/ActivityManager(59): Displayed activity com.SMSDb/.Settings: 744 ms (total 744 ms)
08-03 12:08:47.126: D/dalvikvm(10469): GC_FOR_MALLOC freed 6935 objects / 332488 bytes in 108ms
08-03 12:08:47.155: I/ActivityManager(59): Starting activity: Intent { cmp=com.SMSDb/.SMSDbActivity }
08-03 12:08:47.765: I/ActivityManager(59): Displayed activity com.SMSDb/.SMSDbActivity: 498 ms (total 498 ms)
08-03 12:08:57.765: I/ActivityManager(59): Starting activity: Intent { cmp=com.SMSDb/.Settings }
08-03 12:08:58.526: I/ActivityManager(59): Displayed activity com.SMSDb/.Settings: 665 ms (total 665 ms)
08-03 12:09:00.438: W/KeyCharacterMap(10469): No keyboard for id 0
08-03 12:09:00.438: W/KeyCharacterMap(10469): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
08-03 12:09:04.646: I/ActivityManager(59): Starting activity: Intent { cmp=com.SMSDb/.SMSDbActivity }
08-03 12:09:05.316: I/ActivityManager(59): Displayed activity com.SMSDb/.SMSDbActivity: 535 ms (total 535 ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T06:15:39.340

**遵循这个：-**

正如上面 Nirav 所解释的那样：

*您可以检查构建目标版本（右键单击项目-属性-Android）并使用您的设备进行验证。如果不匹配，请将目标版本更改为您的设备平台版本。*

永远不要执行上述步骤，因为这样做会极大地影响 android 的整个 eclipse 环境，因此您将面临无法轻松修复的**XML 文件中的错误。**

您的整个项目将开始使用任何相应的布局在所有 java 文件上显示错误 - 特别是在 setcontentview(R.layout.YourXMLFileName)

你会被要求导入'R'（android），这不会解决你的问题......

现在，如果您更改了开发应用程序的 android 平台的版本，您应该将其更改回原始版本，只有在您完成安装后才会要求您安装某些软件包，您将能够恢复您的原始设置或解决错误...

马尼克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:06:33.330

您可以检查构建目标版本（右键单击项目-属性-Android）并使用您的设备进行验证。如果不匹配，请将目标版本更改为您的设备平台版本。

除此之外，您可以验证以下内容

- 未知来源真实

-Debuggable需要USB调试

- 非大容量存储模式/USB 连接以访问 SD 卡

- 拔下重新插入

- 重新启动手机（确保您可以拔下 USB 并取出电池）

-重新启动亚行

我从[这里参考了这些](https://stackoverflow.com/questions/4437041/application-not-running-on-android-device)

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T07:00:37.160

问题可能是您没有在模拟器上运行应用程序的新副本。因此，未检查为新安装应用程序创建新 SQLite 数据库的代码，但这总是发生在您的移动设备中，因为它会重新安装 App。因此，请尝试在应用程序的 SQLite db 的“创建”部分进行调试。或许能解决问题！！

# iphone - 如何将 NSMutableArray 值复制到 iPhone 中的另一个 NSMutableArray？

> ID：11790453
> 
> 赞同：0
> 
> 时间：2012-08-03T06:31:59.287
> 
> 标签：iphone, sqlite, nsmutablearray

在这里，`NSMutableArray`我的`AppDelegate`页面中有一个，当用户在数据库中添加值（用户名）时，数组将被更新。现在我希望将数组值（用户名）显示在下一个视图中，以便在选取器视图中列出。我知道还有更多相关的问题，但我找不到解决方案。任何帮助表示赞赏。

这是我的代码：

我在页面中声明的数组`AppDelegate`，名为`jobarray`，现在我需要将项目复制`jobarray`到下一个视图中，我已经声明了`pickerarray`。

```
pickerarray = [[NSMutableArray alloc] initWithArray:appDelegate.jobarray copyItems:YES]; 
```

但它返回错误信息，

```
['NSInvalidArgumentException', reason: '-[Coffee copyWithZone:]: unrecognized selector sent to instance 0x822d410']     where 'Coffee' is my sqlite3 object file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:41:34.857

您的 SQLite 对象不符合 NSCopying 协议 - 您尚未实现

```
- (id)copyWithZone:(NSZone *)zone; 
```

方法。您可以实现此方法以使您的对象可复制，但如果您只需要复制来显示，您最好**只复制数组本身**：

```
NSMutableArray *newArray = [originalArray mutableCopy]; 
```

这只保留了第一个数组的对象，不需要搞乱复制协议的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:34:53.750

```
[arr1 initWithObjects:@"1",@"2", nil]; 
```

没有意义，您可能想要的是使用 NSMutableArray：

```
NSArray *arr1 = [NSArray arrayWithObjects:@"1",@"2", nil];
NSMutableArray *arr2 = [arr1 mutableCopy];

NSLog(@"arr1: %p, %@", arr1, arr1);
NSLog(@"arr2: %p, %@", arr2, arr2); 
```

NSLog 输出：

```
arr1: 0x7924c50, (
                 1,
                 2
                 )
arr2: 0x7924f00, (
                 1,
                 2
                 ) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T06:45:02.563

要从数组中填充 UIPickerView，您需要首先为 UIPickerView 数据源创建一个连接，然后将其委托回 ViewController。您可以通过 CTRL 以正常方式在 Interface Builder 中拖动来执行此操作 - 从您的 UIPickerView 控件。

您还需要确保将委托协议包含到您的接口文件中。所以像这样;

```
@ViewController : UIViewController<UIPickerViewDataSource, UIPickerViewDelegate> { 
```

}

然后，您需要在实现文件中为 UIPickerView 的填充创建委托方法。

```
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
 {
    //One column
    return 1;
 }

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
 {
   //set number of rows
     return myArrayObject.count;
 }

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
 {
     //set item per row
     return [myArrayObject objectAtIndex:row];
 } 
```

这假定 myArrayObject 已在其他地方正确声明和填充。即在 viewDidLoad - 如果内容是静态的。

# c# - 如何将 WCF 服务添加到现有的 winforms 应用程序？

> ID：11790456
> 
> 赞同：1
> 
> 时间：2012-08-03T06:32:08.320
> 
> 标签：c#, wcf, service, lan

我有一个处理一些数据输入和计费的 winform 应用程序。我想添加一个只能通过本地 LAN 访问的 WCF 服务。我希望我的计费程序查询我的数据库并为客户获取一些数据。重要的是，这在同一程序中完成，而不是创建另一个程序。

我的问题是很难设置这样的 WCF 服务，我从现有的 winform 应用程序开始，而不是创建新的 WCF 服务。正确使用指令是一件简单的事情，还是因为我没有从一开始就将其设置为 WCF 服务而从根本上缺少其他东西？

另一个问题是我需要担心线程还是由 WCF 服务自动处理？例如，如果 10 台计算机同时查询我的 winforms 应用程序，WCF 是否会无缝地处理这个问题，或者我是否需要实现额外的功能来处理这个问题？

谢谢阅读

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T06:36:49.720

基本上，要创建 WCF 服务，您需要三件事：

*   用于定义服务提供的方法的**服务契约**（通常表示为 .NET 接口）。这还包括方法期望（并可能返回）的数据类型

    ```
    [ServiceContract(Namespace="http://services.yourcompany.com/Service/2012/08")]
    interface IMyService
    {
       [OperationContract]
       SomeReturnType ThisIsYourMethod(string input, int value, .....);
    }

    [DataContract(Namespace="http://data.yourcompany.com/Service/2012/08")]
    public class SomeReturnType
    {
       [DataMember] 
       public string Name { get; set; }

       [DataMember]
       public int Age { get; set; }  
    } 
    ```

*   创建要调用的实际服务代码的**服务实现。**这只是一个实现服务契约的普通 .NET 类

    ```
    public class MyServiceImplementation : IMyService
    {
         SomeReturnType ThisIsYourMethod(string input, int value, .....)
         {
             /// .... do some processing, fetch data etc.
             return ......
         }
     } 
    ```

*   实际托管 WCF 运行时并启动整个 WCF 处理的**服务主机；**这是一个`ServiceHost`能够托管您的服务的实例（或派生类）。此类需要在 Winforms 应用程序的启动过程中的某个位置进行实例化和打开。一旦服务主机打开，您的服务就可以从外部世界调用。当您的 Winforms 应用程序关闭时，您需要确保关闭服务主机。

*   此外，您可能还需要`app.config`文件中的一些配置设置来定义您的 WCF 服务向全世界提供的端点（地址、绑定、合同）。

所以这真的很简单——只需在你的 Winform 项目中创建这些项目，你就完成了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T06:35:02.860

请看这篇文章[Hosting and Consuming WCF Services](http://msdn.microsoft.com/en-us/library/bb332338.aspx)

**托管 WCF ServiceHost 的 Windows 服务**（本文中的示例）

```
using System;
using System.ServiceModel;
using System.ServiceProcess;
using QuickReturns.StockTrading.ExchangeService;

namespace QuickReturns.StockTrading.ExchangeService.Hosts
{
    public partial class ExchangeWindowsService : ServiceBase
    {
        ServiceHost host;

        public ExchangeWindowsService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            Type serviceType = typeof(TradeService);
            host = new ServiceHost(serviceType);
            host.Open();
        }

        protected override void OnStop()
        {
            if(host != null)
               host.Close();
        }
    }
} 
```

> 另一个问题是我需要担心线程还是由 WCF 服务自动处理？例如，如果 10 台计算机同时查询我的 winforms 应用程序，WCF 是否会无缝地处理这个问题，或者我是否需要实现额外的功能来处理这个问题？

我认为 wcf 将轻松处理此负载。但这取决于您要对其执行的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:46:59.967

对于作为 Windows 服务和 Web 服务托管的服务，您的客户端还需要一个代理类来访问暴露的合同成员。

# php - 读写远程文件 PHP

> ID：11790457
> 
> 赞同：-2
> 
> 时间：2012-08-03T06:32:10.677
> 
> 标签：php, file, codeigniter, codeigniter-2

我正在尝试通过 CodeIgniter（FTP 类）读取和写入远程文件到用户的浏览器。也就是说，我希望用户读取文件编辑内容并将其保存回来。

一种方法是 - 将文件下载到我的服务器 - 读取文件并回显给用户（浏览器） - 将文件的内容保存到本地副本（我的服务器） - 将文件上传回服务器

但我不想将文件下载到我的服务器我只想读写远程文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:01:42.827

您可以将其写入临时文件，并在显示后使用同一脚本中的 unlink() 函数将其删除。回显内容后直接调用它。该文件将在您的服务器上存在很短的一段时间。FTP 用于上传文件，但不能用于远程编辑。任何支持文件编辑的 FTP 客户端实际上都是将其保存到您计算机上的临时文件夹中，并在编辑后将其上传回服务器。

# php - SoapClient 未找到替代解决方案

> ID：11790461
> 
> 赞同：-1
> 
> 时间：2012-08-03T06:32:25.300
> 
> 标签：php, soap

我必须将我的网站与肥皂网络服务集成。我看到我的主人不接受肥皂

```
Fatal error: Class 'SoapClient' not found 
```

所以无论如何我都需要替代品来使用肥皂。有谁知道解决方案？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:36:31.650

您可以使用这个[NuSOAP - SOAP Toolkit for PHP](http://sourceforge.net/projects/nusoap/)，但您可能需要更改一些代码，该 api 与 PHP 的本机 SoapClient 并不完全相同。您可以考虑更新您的 PHP 版本。

# android - 为什么游戏在关卡之间会自动返回菜单？

> ID：11790463
> 
> 赞同：0
> 
> 时间：2012-08-03T06:32:35.497
> 
> 标签：android, andengine

我正在使用andEngine 开发游戏。游戏运行正常，但经过几关后，它会自动返回菜单屏幕。logcat如下。可能是什么问题？

> 08-03 11:53:10.556: ERROR/ActivityThread(302): 无法找到 com.google.settings 的提供商信息 08-03 11:53:10.556: ERROR/ActivityThread(302): 无法找到 com.google.settings 的提供商信息.google.settings 08-03 11:53:10.576: INFO/ActivityThread(302): 发布提供者 com.android.globalsearch.SuggestionProvider: com.android.globalsearch.SuggestionProvider 08-03 11:53:10.726: INFO/ActivityThread( 302): 发布提供商 com.android.globalsearch.stats: com.android.globalsearch.StatsProvider 08-03 11:53:10.726: INFO/ActivityThread(302): 发布提供商联系人；call_log: com.android.providers.contacts。 ContactsProvider 08-03 11:53:10.776：WARN/ActivityManager(51)：无法启动服务 Intent { act=android.accounts.IAccountsService cmp=com.google.android.googleapps/.GoogleLoginService }：未找到 08-03 11 :53:10.776:WARN/AccountMonitor(302)：无法连接到 Intent { act=android.accounts.IAccountsService cmp=com.google.android.googleapps/.GoogleLoginService }（缺少服务？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:38:13.800

您的游戏似乎正在尝试将用户登录到他们的 Google 帐户，但这失败了。所以有两个后续问题：1.您是否尝试在游戏中使用谷歌服务？2\. 这个错误是否发生在不包含 Google API 的 android 版本的模拟器上？

# internet-explorer - 使用 vbscript 自动滚动页面

> ID：11790471
> 
> 赞同：4
> 
> 时间：2012-08-03T06:33:37.110
> 
> 标签：internet-explorer, vbscript, automation, browser-automation

我需要使用 vbscript 拍摄页面的完整快照，为此我需要向下滚动一点。实际上，我可以在快照中截取一半页面，但我还需要在下一个快照中截取剩余部分。

加载页面后，我尝试使用以下内容

```
ie.document.body.doScroll("pageDown") 
```

但它不是向下滚动页面，有没有更好的方法来做到这一点，其实我不想让页面向下滚动，而只是向下滚动 100 像素，有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T04:24:16.430

您可以在 parentWindow 上使用[scrollBy](http://msdn.microsoft.com/en-us/library/ie/ms536728%28v=vs.85%29.aspx)。

```
ie.Document.parentWindow.scrollBy 0, 100
'as relative new.x = current.x + (0), new.y = current.y + (100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T11:47:50.400

简单地使用这个：**Window.Scroll x, y**

```
Window.Scroll 0, 0 
```

# jsf - 刷新组件绑定到请求范围的 bean

> ID：11790473
> 
> 赞同：1
> 
> 时间：2012-08-03T06:33:43.593
> 
> 标签：jsf, binding, primefaces, request, dashboard

有没有人有这样的问题的解决方案：

在我的应用程序中，我使用了一个基于 primefaces 仪表板的复杂的、以编程方式构建的仪表板。为了克服构建仪表板的面板的非唯一 ID 的问题，我将此组件绑定到请求范围的 bean。单击命令按钮后，我还想根据一些可变参数重建仪表板。

问题是，仪表板的 getter 在 Apply Request Values 阶段被触发，在 commandButton 的 actionListener 被触发之前（在 Invoke Application 阶段）。因此，尽管仪表板最终会重建，但它并没有在呈现的响应中刷新。

另一方面，如果我尝试将按钮的即时属性设置为 true，则 actionListener 在 Apply Request Values 阶段被触发，但仍在 getter 之后。比生命周期直接进入渲染响应阶段，结果是一样的。

任何人？

* * *

谢谢你的回答。让我为我的问题添加一些细节。

我将体育比赛的模型存储为会话范围 bean 的属性。它是这样的：bean 有一个属性“比赛”。这个类有一个组列表，每个组都有它的匹配表。这个想法是使用三个不同的程序构建组件作为这个锦标赛模型的渲染器。

仪表板将用于参赛者分组放置的拖放版。为了查看比赛表格和编辑他们的比赛，我使用了一个标签面板，每个表格都有面板网格。最后，我使用面板网格来显示锦标赛树。这三个组件中的每一个都呈现模型的某些部分供用户编辑。

由于模型（以及因此那些渲染组件）是根据可选参数（例如组数）动态构建的，因此在将它们绑定到会话范围的 bean 时，我遇到了 id uniqnes 的问题。所以我将它们绑定到一个请求范围的bean。随着每个请求更改模型（主要是 ajax），我想根据用户设置的参数（也存储在会话范围的 bean 中）重新渲染这些组件。

问题是，当我在调用应用程序阶段（在由“rebuild-my-model”按钮触发的动作侦听器中）重建模型时，绑定到请求范围 bean 的组件已经被“get-ed”来自 bean（或者看起来如此），并且它们不会在页面上刷新。

如果上面提到的方法完全愚蠢的话，我将非常感谢我做错了什么的线索，也许还有一个建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:29:59.880

> *问题是，仪表板的 getter 在应用请求值阶段被触发，在 commandButton 的 actionListener 被触发之前*

我不确定为什么这对你来说是个问题。也许您在 getter 方法而不是在动作侦听器方法中错误地执行业务逻辑？或者您可能是手动创建组件而不是引用 JSF 创建的组件，因此总是覆盖 JSF 视图中的组件？

一个合适的 JSF getter 方法基本上如下所示：

```
public UIComponent getDashboard() {
    return dashboard;
} 
```

它不应*包含*任何其他代码行。顺便说一句，这同样适用于 setter 方法。任何需要操作组件子级的操作都需要在 action(listener) 方法中完成，而不是在 getter/setter 方法中。

# javascript - TinyMCE 文本编辑器最大字符限制

> ID：11790474
> 
> 赞同：11
> 
> 时间：2012-08-03T06:33:45.353
> 
> 标签：javascript, codeigniter, tinymce, textarea, maxlength

我将 TinyMCE 用于`<textarea>`. 我的要求是将字符大小限制为 2000，并在工具栏下方的某处显示剩余的字符。我以某种方式设法获得了字符数；现在我坚持显示剩余的字符并防止超出限制。

这是我的 TinyMCE 代码

```
tinyMCE.init({
    // General options
    mode : "textareas",
    theme : "simple",
    plugins : "autolink,lists,pagebreak,style,table,save,advhr,advimage,
               advlink,emotions,media,noneditable,visualchars,nonbreaking,
               xhtmlxtras,template",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,
                               justifyleft,justifycenter,justifyright,
                               justifyfull,|,styleselect,formatselect,
                               fontselect,fontsizeselect", 
    theme_advanced_buttons2 : "bullist,numlist,|,outdent,indent,|,undo,redo,|,
                               link,unlink,anchor,image,code,|,forecolor,
                               backcolor",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,
    charLimit : 10, // this is a default value which can get modified later
    setup : function(ed) {
        //peform this action every time a key is pressed
        ed.onKeyUp.add(function(ed, e) {
        //define local variables
        var tinymax, tinylen, htmlcount;
        //manually setting our max character limit
        tinymax = ed.settings.charLimit;
        //grabbing the length of the curent editors content
        tinylen = ed.getContent().replace(/(<([^>]+)>)/ig,"").length;
        //setting up the text string that will display in the path area
        htmlcount = "HTML Character Count: " + tinylen + "/" + tinymax;
        //if the user has exceeded the max turn the path bar red.
        if (tinylen>tinymax){

        } 
        });
    }
}); 
```

出于测试目的，我试图限制最多 10 个字符。
欢迎任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T07:41:28.937

我建议您在 KeyDown 上执行您的代码，因为在 KeyUp 上，字母已经在编辑器中。

```
 //peform this action every time a key is pressed
    ed.onKeyDown.add(function(ed, e) {

      //define local variables
      var tinymax, tinylen, htmlcount;

      //manually setting our max character limit
      tinymax = ed.settings.charLimit;

      //grabbing the length of the curent editors content
      tinylen = ed.getContent().replace(/(<([^>]+)>)/ig,"").length;

      //setting up the text string that will display in the path area
      htmlcount = "HTML Character Count: " + tinylen + "/" + tinymax;

      //if the user has exceeded the max turn the path bar red.
      if (tinylen > tinymax){

        // place text string in path bar
        if ( $('#max_char_string').size() ){
          $('#max_char_string').html( '&nbsp;' + htmlcount);
        }
        else {
          $("div#"+ed.id+"_path_row").append('<span id="max_char_string">&nbsp;'+htmlcount+'</span>')
        }

        // prevent insertion of typed character
        e.preventDefault();
        e.stopPropagation();
        return false;
      } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:09:20.370

我有同样的问题，发现这个链接非常有用：[http ://www.ryann.ca/?p=186](http://www.ryann.ca/?p=186)

虽然我稍微改变了这一点，以便它直接从 textarea 读取 maxlength 的属性。

```
tinyMCE.init({
    // Options
    setup : function(ed) {
        ed.onKeyUp.add(function(ed, e) {
            var tinylen, htmlcount, maxlength = $("#" + tinyMCE.activeEditor.id).attr("maxlength");
            if (maxlength) {
                // grabbing the length of the curent editors content
                tinylen = ed.getContent().length;

                htmlcount = "HTML Character Count: " + tinylen + "/" + maxlength;
                if (tinylen > maxlength) {
                    htmlcount = "<span style='font-weight:bold; color: #f00;'>" + htmlcount + "</span>";
                }

                // write the html count into the path row of the active editor
                tinymce.DOM.setHTML(tinymce.DOM.get(tinyMCE.activeEditor.id+ '_path_row'), htmlcount);
            }
        });//ed.onKeyUp.add
    }//setup
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T09:44:39.470

希望它会工作:)

```
setup: function(ed) {            
            var maxlength = parseInt($('#'+(ed.id)).attr("maxlength"));
            var count = 0;
            ed.on('keydown', function(e) {
                count++;
                if (count >= maxlength)
                {
                    alert("false");
                    return false;
                }
            });
        }, 
```

# c# - 如何修复盲文印刷？

> ID：11790475
> 
> 赞同：1
> 
> 时间：2012-08-03T06:33:59.740
> 
> 标签：c#, braille

我的项目是泰米尔语到盲文的翻译系统。我想打印一个盲文文档，并在 c#（打印机对话框）中使用普通的打印机代码，但我的浮雕打印机只是打印垃圾而不是我的文档。

有什么特殊的方法可以用 C# 的压花打印机打印吗？你能帮我解决这个问题吗？我的打印机是index braille Basic D version 3，我的文档是盲文文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:40:10.847

您需要将原始数据发送到打印机。我已经使用版本 4 打印机完成了此操作，但我认为它也适用于版本 3。从 Microsoft [http://support.microsoft.com/kb/322091检查这个类](http://support.microsoft.com/kb/322091)

# matlab - 这个命令是什么意思

> ID：11790476
> 
> 赞同：-1
> 
> 时间：2012-08-03T06:34:04.207
> 
> 标签：matlab

```
capi = cell2mat(arrayfun(@(b) sum(resulti == b,1),nonzeros(unique(resulti)), 'UniformOutput', false)) 
```

为什么当我使用该代码时，我的代码无法运行并且有类似以下命令的命令？

```
??? Array dimensions must match for binary array op. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:06:06.600

所有这些都可以通过 Matlab 的文档找到，这应该始终是您的第一步！

话虽如此，这里是您的命令的细分：

`cell2mat`：根据您定义的某种格式将元胞数组转换为矩阵

`arrayfun`: 评估数组中所有元素的某个函数。该函数可以是匿名函数（例如，`@(b) sum(resulti == b,1)`）

`sum`: 将矩阵在特定方向上的所有元素相加。方向 1：沿行向下，方向 2：沿列，依此类推。

`nonzeros`：通过从输入数组中删除所有零来形成新数组。这将输出一个列向量，而与输入的形状无关。

`unique`：返回删除了所有值的所有重复项的输入数组。输出也将被排序。

键入`help [command]`或`doc [command]`获取有关所有这些命令的更多信息（我建议您这样做！）

现在，将这些组合到您的命令中：

```
A = nonzeros(unique(resulti)) 
```

将返回列向量中的所有唯一条目，并删除任何零。

```
B = arrayfun(@(b)sum(resulti==b), A, 'UniformOutput', false) 
```

`@(b) sum(resulti == b,1)`将对新创建的列向量的所有条目运行该函数`A`，并将它们收集在一个单元格数组中`B`（单元格，因为`'UniformOutput'`设置为`false`）。此函数将简单地将 的每个元素`resulti`与运行的 index进行比较`b`，并找到沿行的总计数。然后，最后，

```
capi = cell2mat(B) 
```

will convert the cell-array `B` back to a normal Matlab array.

The objective of this command seems to be to count the number of non-unique occurrences on each of the colums of `resulti`. As hinted at by @GuntherStruyf, this whole command seems a hacked-together, forced one-liner, rather than well-manageable, readable code. I would personally opt to break it over several lines, avoid `arrayfun` (slow) and instead use `bsxfun` or a `for`-loop (faster (yes, also the `for`-loop), better readable).

But that's a matter of opinion (which goes against popular opinion :)

# android - 带有触摸事件的移动图像

> ID：11790477
> 
> 赞同：1
> 
> 时间：2012-08-03T06:34:04.823
> 
> 标签：android, image, bitmap, xamarin.android

当我们从左到右和从右到左移动（触摸）图像时，我需要一个示例代码。请帮我。

问候，
查克里

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:34:19.630

试试这个代码...

**这是你的主要活动课程**

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

import android.widget.ImageView;
import android.widget.LinearLayout.LayoutParams;
import android.widget.RelativeLayout;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    ImageView imageView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imageView = (ImageView)findViewById(R.id.imageView1);

        imageView.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                int eid = event.getAction();
                switch (eid) {
                case MotionEvent.ACTION_MOVE:

                    RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) imageView.getLayoutParams();
                    int x = (int) event.getRawX();
                    int y = (int) event.getRawY();
                    mParams.leftMargin = x-50;
                    mParams.topMargin = y-50;
                    imageView.setLayoutParams(mParams);

                    break;

                default:
                    break;
                }
                return true;
            }
        });
    }

} 
```

**主要的.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="126dp"
        android:layout_marginTop="168dp"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

# objective-c - 带有嵌套 NSArray 的 NSOutLineView

> ID：11790479
> 
> 赞同：0
> 
> 时间：2012-08-03T06:34:14.067
> 
> 标签：objective-c, macos

我已经嵌套了 n 级动态数组，我想用它来绑定它`NSOutlineView`，但我不知道如何`NSOutlineView`使用它的四个委托方法来绑定它。

嵌套数组如：

```
(
 {
    id = 3;
    summary = "req 1";
    "sub_requirement" =         
    (
        {
             id = 16;
            "sub_requirement" = "";
            summary = "sub req 1";
        }
    );

},
{ 
    id = 5;
    summary = "req 1-1";
    "sub_requirement" =       
    (
        {
            id = 17;
            "sub_requirement" = "";
            summary = "sub req 1-1";
        },
        {

            id = 21;
            "sub_requirement" = "";
            summary = "req 1";
        }
    );
},
    {
    id = 7;
    summary = "req 1 1";
    "sub_requirement" =         
    (            
        {
            approved = 1;
            budget = 3600;
            description = "";
            estimate = 3600;
            "fk_feature" = 4;
            "fk_parent" = 7;
            "fk_requirementtype" = 1;
            id = 18;
            "sub_requirement" = "";
            summary = "sub req 11";
        }
    );

},

{
    id = 8;
    "sub_requirement" = "";
    summary = "req 1 2";
},

{
    id = 12;
    "sub_requirement" = "";
    summary = "req 1";
},

{
    id = 14;
    "sub_requirement" = "";
    summary = req1;
}
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:39:51.580

您可以使用[NSTreeController ，](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTreeController_Class/Reference/Reference.html)[这里](http://headnix.com/blog/69/using-nstreecontroller-in-nsoutlineview)有一些链接和教程。

# android - 通过播放 mp3 歌曲突出歌词（同步形式）

> ID：11790484
> 
> 赞同：2
> 
> 时间：2012-08-03T06:34:33.343
> 
> 标签：android, media-player

嗨，我已经使用 Media Player 创建了 Activity，用于播放带有 textView 中显示歌词的 mp3 歌曲。现在我需要以同步方式播放 mp3 歌曲来突出显示歌词。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:01:33.673

您正在寻找的是[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html) - 它允许在您的字符串中使用一些 HTML 格式来突出显示文本（b、i、..）。在这个[博客上](http://www.androidengineer.com/2010/08/easy-method-for-formatting-android.html)有一个关于这个的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:12:31.967

您可以使用

```
Spannable s = (Spannable) textview1.getText(); 
```

然后

```
s.setSpan(new ForegroundColorSpan(any color),preStart,preEnd,               Spannable.SPAN_INCLUSIVE_INCLUSIVE); 
```

# c++ - 取字符数组的最后四个字符

> ID：11790486
> 
> 赞同：1
> 
> 时间：2012-08-03T06:34:43.170
> 
> 标签：c++, visual-c++

我有

```
TCHAR szPIDKEY[255];//for product id
 DWORD dwLen = sizeof(szPIDKEY)/sizeof(szPIDKEY[0]); //calculating the size of the key
UINT res = MsiGetProperty(hInstall, _T("PIDKEY"), szPIDKEY, &dwLen); 
if(res != ERROR_SUCCESS) 
{
    //fail the installation 
    return 1; 
} 
```

密钥字符串看起来像 xxxx-xxxx-xxxx-xxxx，我只想取 TCHAR 中的最后四个 xxxx，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:42:38.547

```
 #ifndef UNICODE  
 typedef std::string String 
 #else
 typedef std::wstring String 
 #endif

String szKey = szPIDKEY;
size_t found = szKey.find_last_of("-");
String szFind = szKey.substr (found,4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:43:03.783

如果未定义 UNICODE，则 TCHAR 只是一个字符，如果已定义，则为 wchar。因此，如果您想采用最后 4 个符号，您可以像对待这些类型一样对待。

所以也许你应该做这样的事情：

```
#ifdef UNICODE
#include <wchar.h>
int get_len(TCHAR[] val) {
  return wcslen(val);
}
#else 
#include <cstring>
int get_len(TCHAR[] val) {
  return strlen(val);
}
#endif 
```

编辑：事实上，在 windows 中已经定义了一个函数，它可以执行我上面描述的操作，它是 _tcslen （感谢 jajjaj 的这个）。但是我决定保留上面的代码，以便您了解它的作用。

然后使用上面的函数，您将最后 4 个字符存储在

> szPIDKEY[_tcslen(szPIDKEY-4)], ...szPIDKEY[_tcslen(szPIDKEY-1)]

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:39:44.837

这真的那么难吗？

```
TCHAR lastFour[5] /* 4 + 1 for null terminator */
_tcscpy(lastFour, szPIDKEY + dwLen - 4); /* copy the last four characters and 
                                        null terminator */ 
```

如果你想以 C 方式处理字符串，那么你将不得不学习如何像上面那样进行指针操作。`szPIDKEY`是一个数组，但它也用作指向数组第一个元素的指针，`szPIDKEY + dwLen`然后是指向键的最后一个字符的指针（空终止符）。`szPIDKEY + dwLen - 4`指向之前四个字符的指针也是如此。

未经测试的代码。

# netbeans - Win7 中的 JavaCV/OpenCV 错误

> ID：11790490
> 
> 赞同：0
> 
> 时间：2012-08-03T06:34:51.053
> 
> 标签：netbeans, opencv, javacv

64位，JDK 1.7，OpenCV 2.40，新版JavaCV代码

```
package test; 

 import static com.googlecode.javacv.cpp.opencv_core; 
 import static com.googlecode.javacv.cpp.opencv_highgui; 
 import com.googlecode.javacv.CanvasFrame; 

        public class Test{ 
        public static void main(String args) { 
        final IplImage image = cvLoadImage("img1.png");
        final CanvasFrame canvas = new CanvasFrame("Demo");
        canvas.showImage(image);
        canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
  } 
} 
```

我收到上述代码的以下错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\Users\BBPATIL\AppData\Local\Temp\javacpp173171889406337\jniopencv_core.dll: Can't find dependent libraries
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1928)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825)
    at java.lang.Runtime.load0(Runtime.java:792)
    at java.lang.System.load(System.java:1059)
    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:418)
    at com.googlecode.javacpp.Loader.load(Loader.java:368)
    at com.googlecode.javacpp.Loader.load(Loader.java:315)
    at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:131)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at com.googlecode.javacpp.Loader.load(Loader.java:334)
    at com.googlecode.javacv.cpp.opencv_imgproc.<clinit>(opencv_imgproc.java:96)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at com.googlecode.javacpp.Loader.load(Loader.java:334)
    at com.googlecode.javacv.cpp.opencv_highgui.<clinit>(opencv_highgui.java:91)
    at sdmcetd.main(sdmcetd.java:11)
Java Result: 1 
```

请任何人尽快帮助我..!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:41:51.807

将您的环境变量（例如路径、类路径）设置为 openCV 目录。如果问题存在，请从 Internet 下载 javacv-0.1.jar 并将其作为您的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:23:17.257

*   确保您已正确设置路径变量。
*   位数如果 javacv 和 opencv 应该相同

您可以在下面的链接中找到详细说明。

[http://opencvlover.blogspot.in/2012/04/javacv-setup-with-eclipse-on-windows-7.html](http://opencvlover.blogspot.in/2012/04/javacv-setup-with-eclipse-on-windows-7.html)

# php - php 哎呀：可见性

> ID：11790498
> 
> 赞同：1
> 
> 时间：2012-08-03T06:35:04.967
> 
> 标签：php, oop, visibility

我正在用 PHP 修改我的 OOP 概念。我在这里有一个简单的 php 代码来练习可见性。

当我在 Big_Animal 中将 $name 声明为私有时，

1）为什么当我尝试从类外部为 $name 分配不同的值（即 $lion->name="King"）时它不会引发错误？

2）为什么当我尝试在 Lion 类中重新分配 $name 时它不会引发错误（即 $this->name="John"）。

据我所知，我很困惑，私有属性只能在定义属性的类中访问。

我不清楚的另一件事是受保护的属性。据我了解，受保护的属性只能在类本身及其子类中访问。它的孙子类可以访问它吗？

谢谢你。

```
<?php
abstract class Big_Animal{

 private $name="Mary";

  abstract public function Greet();

 public function Describe(){
    return "name: ".$this->name;
}

public function __set($name,$value){
    $this->name=$value;
}

public function __get($name){
    return $this->name;
}
}

class Lion extends Big_Animal{

public function Greet(){
    $this->name="John"; //no error for this
    return " roar!";
}

public function Describe(){
        return parent::Describe()." I'm a Lion!";
    }
}

$lion = new Lion();
$lion->name="King";  //no error for this
echo $lion->Describe();
echo $lion->Greet();

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:41:50.460

因为您正在使用[__set()的魔术方法](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)

> __set() 在将数据写入不可访问的属性时运行。

也可以通过 获取值，`$lion->name`因为您也使用`__get()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T06:55:09.363

1.  您的魔术方法访问器（__set 和 __get）在基类抽象类中是公共的。当您直接访问该属性时，它们会写入私有数据。尝试注释掉魔术方法并查看。然后，输出是“名字：玛丽，我是狮子！吼！”。

2.  将此添加为 Lion::Describe() 中的第一条语句：

    回声“狮子的名字：”。$this->name 。"\n";

    如您所见，现在的输出是：“Lion's name: King”。$this->name="John"; 和 $lion->name="King"; 正在修改 Lion 类对象的公共属性。不幸的是，您可以同时拥有同名的公共和私有属性，但您可以。它们只是不同的变量（在不同的范围内）。

3.  孙辈可以访问受保护的财产。您的大多数属性都应该受到保护，除非您有非常充分的理由来保护它（因此使用私有）。公共属性在大型项目中使用不多（取决于您的风格）。我宁愿坚持使用显式访问器。随着项目的进展和变得越来越复杂，您会很高兴选择对每个变量使用访问器。我更喜欢使用生成器来为您生成脚手架访问器。它节省了大量时间，减少了错误，并使访问器的创建更便宜（因此更常见）。

更新（对以下评论的回应）：1）和 2）您没有收到错误，因为您正在编辑我在上面 2）中列出的两个实例中的 Public 变量。试试 var_dump($lion)：

```
object(Lion)#1 (2) {
  ["name":"Big_Animal":private]=>
  string(4) "Mary"
  ["name"]=>
  string(4) "John"
} 
```

此外，如果您将私有或受保护的成员变量显式添加到 Lion 类，您将收到预期的错误。我同意你的观点，这不是很直观，但似乎是 PHP 中的当前现实。

3) [http://www.ibm.com/developerworks/opensource/library/os-php-7oohabits/](http://www.ibm.com/developerworks/opensource/library/os-php-7oohabits/)有一个为私有成员变量编写公共访问器的示例（尽管我再次建议为受保护成员编写公共访问器变量代替）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:46:24.783

详细说明我的评论...您正在使用一个名为 __set 的函数，它的作用是每次您尝试为此类的未知属性设置值时，都会调用此特定函数。

在您的函数中，您总是将私有字段名称更改为提供的值。由于此类可以访问其字段，因此已设置。

即使你写了 $lion->foo = "bar"，名字也会被设置为 bar，因为你的函数 __set

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-03T06:42:13.097

我想你的问题的答案就[在这里](https://stackoverflow.com/questions/7939199/abstract-private-functions)

> 抽象方法不能是私有的，因为根据定义，它们必须由派生类实现。如果您不希望它公开，则需要对其进行保护，这意味着它可以被派生类看到，但其他人不能看到。

# python - 如何检查输入不是空白，并且在python中是一个大于零的数字

> ID：11790499
> 
> 赞同：2
> 
> 时间：2012-08-03T06:35:07.983
> 
> 标签：python, python-3.x

我正在尝试在 python 中编写一个程序来计算心率训练区（对任何感兴趣的人使用 Karvonen 的公式 :-)）。

男性和女性的公式不同，但都需要年龄 (alder)、静息心率 (hvilepuls) 和最大心率 (makspuls)。

如果个人只是按 Enter，则代码会计算最大心率。

我想捕捉年龄和静息心脏的空白输入，以及为所有三个零或小于零的变量输入的值。

我已经能够捕捉到空白输入，但我似乎也无法将它与零或更少的输入结合起来。

我写的代码在下面并且可以工作，但不会阻止人们输入等于或小于零的数字。

任何其他关于清理代码的一般性评论和更好的（也许是更多的 Pythonic？）编写方式都非常感谢。

```
# Karvonens formel
#
print(
"""
Kalkulere dine treningssoner for lett løping, anaerob terskel (AT) og VO2 Max treningsøkter.

Instruksjoner

1\. Fyll inn din alder, hvilepuls og kjønn.
2\. Skriv inn din maksimale hjertefrekvens, hvis du vet det, ellers trykk enter - deretter beregnet programmet det selv som følger:
(Menn 214 - (0,8 * alder) Kvinner:. 209 - (0,7 * alder).

3\. Treningssonenes verdier beregnes ved hjelp av Karvonen formelen:
X% = (Maksimal hjertefrekvens hvilepuls) * x/100) + hvilepuls
"""
)

kjonn=""
alder=""
hvilepuls=""
makpuls=""

while kjonn.lower() != "m" and kjonn.lower() != "d":
    kjonn = input("Hvilken kjønn er du? (M)ann/(D)ame\t")

while alder=="":
    alder = int(input("Hvor mange år er du?\t"))

while hvilepuls=="":
    hvilepuls = int(input("Hva er din hvilepuls?\t"))

makspuls = input("Hva er din makspuls?\t")

if makspuls=="":
    if kjonn.lower()=="m":
        makspuls = int(214 - 0.8*int(alder))
    elif kjonn.lower() =="d":
        makspuls = int(209 - 0.7*int(alder))
    else:
        print("\n\nEnter M or D")
else:
    makspuls=int(makspuls)

prosent60 = (makspuls-hvilepuls)*0.6 + hvilepuls
prosent75 = (makspuls-hvilepuls)*0.75 + hvilepuls
prosent85 = (makspuls-hvilepuls)*0.85 + hvilepuls
prosent90 = (makspuls-hvilepuls)*0.9 + hvilepuls

# Remove decimals
prosent60 = int(prosent60)
prosent75 = int(prosent75)
prosent85 = int(prosent85)
prosent90 = int(prosent90)

print("\n\n")
if kjonn.lower()=="m":
    print("Din kjønn  er:\t\tMann")
else:
    print("Din kjønn  er:\t\tDame")
print("Din alder er:\t\t", alder)
print("Din hvilepuls er:\t", hvilepuls," slag/min")
print("Din makspuls er:\t", makspuls," slag/min")

print("\n\n")
print("Din lavsone er:\t",prosent60,"-",prosent75," slag/min")
print("Din ATsone er:\t",prosent85,"-",prosent90," slag/min")
print("Din VO2max er:\t",prosent90,"-",makspuls," slag/min")

input("\n\nTrykk enter for å avslutte") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:07:44.770

这是我的建议。

*   输入应立即得到验证和清理。通常，当您输入时，最好调用该`.strip()`方法，以防用户错误地输入了额外的空格或制表符。在您读取`'m'`or`'d'`值之后，将其强制为小写；那么其余的代码可以假设它是小写的。

*   当您想根据多个可能的合法值检查一个值时，一个好的 Python 习惯用法是使用`in (value0, value1, value2, ..., valueN)`. 在这种情况下，您可以检查`in ('m', 'd')`，但因为我们正在检查单个字符，所以我们实际上可以检查`in "md"`并且这也有效。

*   当您想允许空字符串或整数时，只需将响应读入临时变量（我使用`s`“字符串临时变量”的名称），然后您可以检查零长度字符串；如果它不是零长度，则转换为整数。您可以将整数变量初始化为负值，然后循环直到它不是负数；但我更喜欢使用`while True:`循环并添加一个显式`break`来显示成功的条件。（注意：如果这是作业，你的老师可能不同意我的观点；有些老师不喜欢看到`break`循环内部，而是更喜欢只在顶部测试循环。）

*   我添加了一些错误消息。我将“@@@@@”放在我的文本周围，以帮助确保您找到所有内容并将其本地化为您的语言。（这是一个简短的程序，很可能无论如何你都可以找到它们，但我想让它对你来说尽可能简单。）

*   我没有调用`int()`浮点数将它们转换为整数，而是使用`round()`，这样 77.9 将变为 78 而不是 77。

编辑：我刚刚编辑了代码。我将输入验证分解成一个函数，你传入一个“验证器”函数。我认为这样更干净。

代码：

```
# Karvonens formel
#
print(
"""
Kalkulere dine treningssoner for lett lping, anaerob terskel (AT) og VO2 Max treningskter.

Instruksjoner

1\. Fyll inn din alder, hvilepuls og kjnn.
2\. Skriv inn din maksimale hjertefrekvens, hvis du vet det, ellers trykk enter - deretter beregnet programmet det selv som flger:
(Menn 214 - (0,8 * alder) Kvinner:. 209 - (0,7 * alder).

3\. Treningssonenes verdier beregnes ved hjelp av Karvonen formelen:
X% = (Maksimal hjertefrekvens hvilepuls) * x/100) + hvilepuls
"""
)

kjonn=' '
alder=0
hvilepuls=0
makpuls=' '

def check_positive(n):
    if n > 0:
        return True
    else:
        print("@@@@@ Cannot enter a negative or 0 value! @@@@@")
        return False
def check_positive_or_zero(n):
    if n >= 0:
        return True
    else:
        print("@@@@@ Cannot enter a negative value! @@@@@")
        return False

def get_input_int(s_mesg, fn_validate, default=None):
    while True:
        s = input(s_mesg).strip()
        if not s and default is not None:
            return default
        # not a default value; try it as an int
        try:
            n = int(s)
        except ValueError:
            print("@@@@@ Not even an integer! @@@@@")
            continue
        # works as an int; is it valid?
        if fn_validate(n):
            return n

while kjonn not in ('m', 'd'):
    kjonn = input("Hvilken kjnn er du? (M)ann/(D)ame\t").strip().lower()

alder = get_input_int("Hvor mange r er du?\t", check_positive)
hvilepuls = get_input_int("Hva er din hvilepuls?\t", check_positive)
makspuls = get_input_int("Hva er din makspuls?\t", check_positive_or_zero, default=0)

if not makspuls:
    if kjonn == 'm':
        makspuls = int(214 - 0.8*int(alder))
    else:
        makspuls = int(209 - 0.7*int(alder))

prosent60 = (makspuls-hvilepuls)*0.6 + hvilepuls
prosent75 = (makspuls-hvilepuls)*0.75 + hvilepuls
prosent85 = (makspuls-hvilepuls)*0.85 + hvilepuls
prosent90 = (makspuls-hvilepuls)*0.9 + hvilepuls

# Remove decimals
prosent60 = round(prosent60)
prosent75 = round(prosent75)
prosent85 = round(prosent85)
prosent90 = round(prosent90)

print("\n\n")
if kjonn == 'm':
    print("Din kjnn  er:\t\tMann")
else:
    print("Din kjnn  er:\t\tDame")

print("Din alder er:\t\t", alder)
print("Din hvilepuls er:\t", hvilepuls," slag/min")
print("Din makspuls er:\t", makspuls," slag/min")

print("\n\n")
print("Din lavsone er:\t",prosent60,"-",prosent75," slag/min")
print("Din ATsone er:\t",prosent85,"-",prosent90," slag/min")
print("Din VO2max er:\t",prosent90,"-",makspuls," slag/min")

input("\n\nTrykk enter for avslutte") 
```

# iphone - 将数据从 iphone 应用程序发布到服务器

> ID：11790500
> 
> 赞同：0
> 
> 时间：2012-08-03T06:35:09.927
> 
> 标签：iphone, xcode

我正在将数据从 iphone 应用程序发送到服务器，但是当它读取字符串后它在应用程序中崩溃并且不前进

```
-(void)submitSurveyAnswers{

  NSString*survey_question_response_id="1";
  NSString*survey_id=@"1";

  NSString *question_id =@"1";
  NSString *survey_response_answer_id =@"1";
  NSString *post =[[NSString alloc] initWithFormat:@"survey_question_response_id=%@&survey_id=%@&question_id=%@&survey_response_answer_id=%@",survey_question_response_id,survey_id,question_id,survey_response_answer_id];
  NSLog(post);
  NSURL *url=[NSURL URLWithString:@"http://myserver-solutions.com/app/surveyAnswer.php?"];

  NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

 NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

 NSError *error;
 NSURLResponse *response;
 NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

 NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
 NSLog(@"%@",data);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:41:21.890

您已通过以下方式创建了一个字符串：

```
NSString*survey_question_response_id="1"; //Missing '@' while initializing string 
```

它应该像下面这样创建：

```
NSString*survey_question_response_id=@"1"; //Added '@' while initializing string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:43:30.313

```
NSString*survey_question_response_id="1"; 
```

是错的。纯双引号之间的字符串是 C 字符串（以 0 结尾的字符指针），并且不是有效的 NSString 实例。我确定你想 1\. 学习使用调试器 2\. 写

```
NSString *survey_question_response_id = @"1"; 
```

反而。

# oracle - SID、主机和端口的意义——数据库连接

> ID：11790501
> 
> 赞同：0
> 
> 时间：2012-08-03T06:35:12.500
> 
> 标签：oracle

我有一个简单的问题 reg 数据库连接参数

*   主持人
*   港口
*   西德。

AFAIK，单个实例使用主机上的单个端口，即对于主机，端口上只有一个活动实例。如果这是真的，主机和端口的集合可以唯一标识要连接的单个实例，那么我们为什么需要 SID 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:51:53.880

两个实例可以使用同一个监听器，监听同一个端口。

因此需要 SID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T06:52:55.983

一个侦听器，在单个端口上的单个主机上运行，​​可以从该单个端口提供多个 SID。

这就是配置中的参数称为“SID_LIST_LISTENER”的原因——它是一个 SID 列表。

# python - 关于 PyQt 示例程序

> ID：11790504
> 
> 赞同：9
> 
> 时间：2012-08-03T06:35:39.473
> 
> 标签：python, qt, pyqt

我目前需要一个项目的 GUI 库。我熟悉 python，发现 PyQt 可能是一个不错的选择。

我正在阅读[有关 PyQt 的教程](http://zetcode.com/tutorials/pyqt4/)，并且对以下[示例程序感到非常困惑](http://zetcode.com/tutorials/pyqt4/drawing/)

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

"""
ZetCode PyQt4 tutorial 

In this example, we draw text in Russian azbuka.

author: Jan Bodnar
website: zetcode.com 
last edited: September 2011
"""

import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):      

        self.text = u'\u041b\u0435\u0432 \u041d\u0438\u043a\u043e\u043b\u0430\
\u0435\u0432\u0438\u0447 \u0422\u043e\u043b\u0441\u0442\u043e\u0439: \n\
\u0410\u043d\u043d\u0430 \u041a\u0430\u0440\u0435\u043d\u0438\u043d\u0430'

        self.setGeometry(300, 300, 280, 170)
        self.setWindowTitle('Draw text')
        self.show()

    def paintEvent(self, event):

        qp = QtGui.QPainter()
        qp.begin(self)
        self.drawText(event, qp)
        qp.end()

    def drawText(self, event, qp):

        qp.setPen(QtGui.QColor(168, 34, 3))
        qp.setFont(QtGui.QFont('Decorative', 10))
        qp.drawText(event.rect(), QtCore.Qt.AlignCenter, self.text)        

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

这里，在 main 函数中，创建了一个 Example 对象，因此调用了`__init__()`函数`initUI()`。我的问题是函数在哪里`paintEvent()`被调用？因为如果我们运行程序，`self.text(some Russian letters)`它将完全出现在小部件上。

换句话说，`sys.exit(app.exec_())`实际上做了什么？为什么它会调用`paintEvent()`函数？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T05:16:17.833

来自[PyQt 文档](http://pyqt.sourceforge.net/Docs/PyQt4/qapplication.html#exec)：

> `int QApplication.exec_ ()`
> 
> 进入主事件循环并等待直到`exit()`被调用，然后返回设置为的值（如果通过 调用`exit()`，则为 0 ）。`exit()``quit()`
> 
> 需要调用此函数来启动事件处理。主事件循环从窗口系统接收事件并将这些事件分派给应用程序小部件。

从[另一个来源](http://zetcode.com/tutorials/pyqt4/firstprograms/)：

> `sys.exit(app.exec_())`
> 
> 最后，我们进入应用程序的主循环。事件处理从这一点开始。主循环从窗口系统接收事件并将它们分派给应用程序小部件。如果我们调用该`exit()`方法或主小部件被销毁，则主循环结束。该`sys.exit()`方法确保干净的出口。将通知环境，应用程序如何结束。
> 
> 该`exec_()`方法有一个下划线。这是因为`exec`是 Python 关键字。因此，`exec_()`改为使用。

关于[绘画](http://tinf2.vub.ac.be/~dvermeir/manual/KDE20Development-html/ch04lev1sec2.html)：

> **4.2.1。当绘画发生时**
> 
> 该`paintEvent()`方法在以下情况下被自动调用
> 
> *   您的小部件首次显示。
>     
>     
> *   在移动窗口以显示小部件的某些部分（或全部）之后。
>     
>     
> *   小部件所在的窗口在最小化后恢复。
>     
>     
> *   小部件所在的窗口被调整大小。
>     
>     
> *   用户从另一个桌面切换到小部件窗口所在的桌面。
>     
>     
> 
> 您可以通过调用手动生成绘制事件`QWidget::update()`。 `QWidget::update()`在生成绘制事件之前擦除小部件。您可以将参数传递给`update()`，这可以将绘画限制在需要它的区域（特别是矩形）。该方法的两种等效形式是`QWidget::update (int x, int y, int width, int height)`和`QWidget::update (QRect rectangle)`，其中`x`和`y`给出了矩形的左上角，宽度和高度是显而易见的。因为`update()`将绘制事件放入事件队列中，所以在当前方法退出并且控制返回到事件处理程序之前不会进行绘制。这是一件好事，因为其他事件可能正在那里等待处理，并且需要及时处理事件以使 GUI 顺利运行。
> 
> 您还可以通过调用`QWidget::repaint (int x, int y, int width, int height, bool erase)`（或几种便捷方法形式之一）来调用小部件的绘制，其中所有参数的含义与`update()`方法的情况相同，并且 erase 告诉 repaint 是否在绘制矩形之前擦除它。`repaint()`直接调用`paintEvent()` 。它不会将绘制事件放入事件队列中，因此请谨慎使用此方法。如果你试图`repaint()`从一个简单的循环中重复调用来创建一个动画，例如，动画将被绘制，但你的用户界面的其余部分将无响应，因为对应于鼠标按钮单击、键盘按下等的事件将在队列中等待。即使您没有执行像动画那样可能耗时的任务，通常也最好使用`update()`帮助保持你的 GUI 活着。
> 
> 如果您`paintEvent()`在`paintEvent()`. 否则，您所做的绘画将在下次更新小部件时消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T12:17:47.093

当一个人有一些低级编程经验时会变得更加清楚，例如在 Winapi 或 C 语言中的 X 工具包中。PyQt 是一个（非常）高级的工具包。它具有巨大的内置功能。类似的示例将需要数百甚至数千行 C 代码。因此，幕后发生了很多事情。有人已经创建了处理基本绘画的代码。GUI 编程非常复杂，使用现代 GUI 工具包，应用程序程序员可以免受这种复杂性的影响。如果不了解所有技术细节，程序员难免会感到困惑。

在 PyQt 中，我们基本上以两种方式处理事件。我们将信号连接到槽或重新实现事件处理程序（事件处理程序是槽的同义词）。提供的示例继承自`QtGui.QWidget`which 已经有一些可用的绘画代码。为了进行自定义绘制，我们必须重新实现现有的`paintEvent()`事件处理程序。根据情况，我们可能会也可能不会调用父类的`paintEvent()`方法。

`sys.exit(app.exec_())`不调用该方法`paintEvent()`。该`exec_()`方法启动一个事件循环。事件循环捕获并分派事件。绘制事件由用户或操作系统触发。例如，当我们启动示例时，会触发两次绘制事件。（`print "Event occurred"`在事件处理程序中写一行，看看这个方法被调用了多少次。）调整窗口大小，失去或获得焦点，最小化或最大化窗口，所有这些都会导致绘制事件被触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:13:26.507

`app.exec_()`启动 qt 主循环，当每个创建的小部件被销毁时结束（例如通过关闭它的窗口）。该`paintEvent`函数是一种方法，您可以从`QWidget`子类（如给定`Example`类）重载，当 QT 显示、更新或重绘 Widget 时会调用该方法。

[您可以在Qt 文档](http://qt-project.org/doc/qt-4.8/qwidget.html#paintEvent)或[PyQt 文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#paintEvent)中查找这些内容（这主要是 QT 文档的不同格式的副本，但有时包含一些有关 PyQt 特定内容的有价值信息）。

# handlebars.js - Handlebars 中的全局变量 if 块

> ID：11790507
> 
> 赞同：10
> 
> 时间：2012-08-03T06:35:50.667
> 
> 标签：handlebars.js

是否可以在 Handlebars 条件中使用全局变量？我正在编写一个列出很多对象的应用程序，我希望用户能够控制列出哪些详细信息。例如，在人员列表中仅显示名字，如下所示：

```
<ul>
{{#each people}}
    <li>
        <p>{{firstName}}</p>
        {{#if displayLastnames}}
        <p>{{lastName}}</p>
        {{/if}}
    </li>
{{/each}}
</ul> 
```

我不想实际修改数据（例如，通过删除 lastName 属性并执行`{{#if lastName}}`）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T12:02:29.493

您还可以注册一个名为“displayLastnames”的全局助手并在 if 中使用它：

```
 Handlebars.registerHelper('displayLastnames', function(block) {
    return displayLastnames; //just return global variable value
  }); 
```

并在您的示例中使用它：

```
 {{#if displayLastnames}}
    <p>{{lastName}}</p>
  {{/if}} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-03T06:52:45.127

Handlebars 为变量命名空间，因此您不能直接访问全局变量。可能最简单的方法是添加您自己的帮助程序，如下所示：

```
Handlebars.registerHelper('if_displayLastnames', function(block) {
    if(displayLastnames)
        return block.fn(this);
    else
        return block.inverse(this);
}); 
```

然后在您的模板中：

```
{{#if_displayLastnames}}
<p>{{lastName}}</p>
{{/if_displayLastnames}} 
```

当然，您可能希望将“全局”变量放在它们自己的命名空间中。

演示：http: [//jsfiddle.net/ambiguous/Y34b4/](http://jsfiddle.net/ambiguous/Y34b4/)

# matlab - 在 matlab 中查看 HDF5

> ID：11790508
> 
> 赞同：1
> 
> 时间：2012-08-03T06:35:56.150
> 
> 标签：matlab, file-io, hdf5

MATLAB 在打开和查看 HDF5 文件方面有多好？我可以看到有几个`h5...`命令，但我想知道是否有一种方法可以像使用`.mat`文件或类似`HDFView`工具那样以交互方式“查看”文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T09:17:44.393

我们使用 Matlab，我们使用 HDF5 文件。我们也使用了很多 Fortran，我们使用 HDF5 的原因之一是存储可以被 Fortran 和 Matlab 读写的数据集。用于 HDF5 的Matlab *vs* Fortran 在大多数情况下有点像 Matlab *vs* Fortran，前者更易于使用，让您可以快速尝试想法，并为您提供更紧密的数据和可视化集成。*您可能对 Matlab与*您最喜欢的编译语言有自己的看法。

Matlab 为 HDF5 提供了一个完整的（可能不完全完整，但我们还没有找到我们想要使用的 Matlab 不提供的 HDF5 Fortran API 的任何特性）接口。当您查看@GuntherStruyf 指向您的文档时，请阅读底部，您可以在其中找到有关 Matlab 的低级 HDF5 访问函数的信息。您可以单独使用高级访问功能做很多事情，但不是所有事情。如果您已经习惯了 Fortran/C/C++ 的 HDF5 API，那么在 Matlab 中采用相同的方法并忽略更高级别的函数就很容易了。

但我们也使用 HDFView，它是一种浏览 HDF5 文件的简单方法，并且在某些限制下，它是一种快速编辑 HDF5 文件的简单方法。例如，您可以从 Excel 剪切和粘贴到 HDFView；也许更相关，您可以从 Matlab 的变量编辑器中剪切和粘贴。Matlab 并没有提供那种查看 HDF5 文件的便利性。

总结一下：

*   用于查看和交互式编辑的 HDFView
*   Matlab 用于原型设计和快速部署的编程
*   Fortran/C/C++ 用于繁重的编程。

# android - 如何避免此 pgm 中的 ArrayIndexOutOfBoundsExceptions？

> ID：11790509
> 
> 赞同：-2
> 
> 时间：2012-08-03T06:35:59.900
> 
> 标签：android

如何避免 ArrayIndexOutOfBoundsExceptions.in pgm myval 和 myvals 是 ArrayList 全局变量。我想我将 GlobalVariable ， ArrayList 转换为 String[] 只是 pbm.plz 帮助我。

```
 public class TicketActivity extends Activity{
TextView t1;
TextView t2;
ListView l1;
TextView t6;
  public void onCreate(Bundle savedInstanceState){
   super.onCreate(savedInstanceState);
  setContentView(R.layout.ticket);
  t1=(TextView)findViewById(R.id.textView3);
  t2=(TextView)findViewById(R.id.textView5);
   l1=(ListView)findViewById(R.id.listView1);

     //Get the Table no Value From Edit Text

   Intent i1=getIntent();
   Bundle b=i1.getExtras();
    int num=b.getInt("Table No:");
    String pno=Integer.toString(num);
    t1.setText(pno);

        //Get The Guest Value From Edit Text

    Intent i2=getIntent();
    Bundle b1=i2.getExtras();
    int num1=b1.getInt("Guest:");
    String pno1=Integer.toString(num1);
    t2.setText(pno1);

    l1.setAdapter(new EfficientAdapter(TicketActivity.this));

   } 
   private static class EfficientAdapter extends BaseAdapter{
    private LayoutInflater mInflater;

    public EfficientAdapter(Context context){
        mInflater=LayoutInflater.from(context);

    // implementation of EfficientAdapter   
    }
    public int getCount() {

        return HomeActivity.select1.length;

    }
    public Object getItem(int position) {

        return position;
    }
    public long getItemId(int position) {

        return position ;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        String[] stockArr = new String[GlobalClass.myval.size()];
        stockArr = GlobalClass.myval.toArray(stockArr);
        String[] stockArr1=new String[GlobalClass.myvals.size()];
        stockArr1=GlobalClass.myvals.toArray(stockArr1);
    if(convertView==null){
            convertView=mInflater.inflate(R.layout.list_ticket, null);
            holder=new ViewHolder();
            holder.Text1=(TextView)          convertView.findViewById(R.id.textView1);
            holder.Text2=(TextView) convertView.findViewById(R.id.textView2);
            holder.Text3=(TextView) convertView.findViewById(R.id.textView3);
            convertView.setTag(holder);
        }
        else{
              holder=(ViewHolder)convertView.getTag();
            }

            holder.Text2.setText(stockArr[position]);
            holder.Text3.setText(stockArr1[position]);
            return convertView;

     }

    }
    static class ViewHolder{
        TextView Text1;
        TextView Text2;
        TextView Text3;

    }
      } 
```

LogCat 输出：

```
 08-03 10:50:59.417: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:50:59.497: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
   08-03 10:52:22.737: I/dalvikvm(807): threadid=3: reacting to signal 3
   08-03 10:52:23.076: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
   08-03 10:52:23.236: I/dalvikvm(807): threadid=3: reacting to signal 3
   08-03 10:52:23.387: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:52:23.507: W/System.err(807): java.lang.NullPointerException
    08-03 10:52:23.537: W/System.err(807):  at com.eConnect.Restaurant.HomeActivity.onCreate(HomeActivity.java:142)
   08-03 10:52:23.537: W/System.err(807):   at android.app.Activity.performCreate(Activity.java:4465)
   08-03 10:52:23.647: W/System.err(807):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
   08-03 10:52:23.647: W/System.err(807):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
   08-03 10:52:23.681: W/System.err(807):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
   08-03 10:52:23.696: W/System.err(807):   at android.app.ActivityThread.access$600(ActivityThread.java:123)
   08-03 10:52:23.696: W/System.err(807):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
   08-03 10:52:23.728: W/System.err(807):   at android.os.Handler.dispatchMessage(Handler.java:99)
    08-03 10:52:23.736: W/System.err(807):  at android.os.Looper.loop(Looper.java:137)
    08-03 10:52:23.776: W/System.err(807):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    08-03 10:52:23.776: W/System.err(807):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-03 10:52:23.797: W/System.err(807):  at java.lang.reflect.Method.invoke(Method.java:511)
    08-03 10:52:23.797: W/System.err(807):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    08-03 10:52:23.827: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:52:24.107: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:52:24.196: W/System.err(807):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
     08-03 10:52:24.196: W/System.err(807):     at dalvik.system.NativeStart.main(Native Method)
    08-03 10:52:24.257: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:52:24.269: D/dalvikvm(807): GC_CONCURRENT freed 100K, 3% free 9379K/9607K, paused 11ms+9ms
    08-03 10:52:24.427: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:52:24.790: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:52:24.938: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:52:25.267: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:52:25.447: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
     08-03 10:52:25.786: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:52:25.939: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:52:26.286: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:52:26.477: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:53:13.687: I/System.out(807): Length of Breakfast:12
     08-03 10:53:13.687: I/System.out(807): Length of P2:12
    08-03 10:53:15.837: I/System.out(807): Values[2EGG W/MEAT]
    08-03 10:53:15.837: I/System.out(807): Values[$ 4.7]
    08-03 10:53:17.248: I/System.out(807): Values[2EGG W/MEAT, BLUEBERRY CAKE]
    08-03 10:53:17.248: I/System.out(807): Values[$ 4.7, $ 3.0]
    08-03 10:53:21.317: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:53:21.467: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:53:21.817: I/dalvikvm(807): threadid=3: reacting to signal 3
    08-03 10:53:21.917: I/dalvikvm(807): Wrote stack traces to '/data/anr/traces.txt'
    08-03 10:53:22.087: D/AndroidRuntime(807): Shutting down VM
    08-03 10:53:22.087: W/dalvikvm(807): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
    08-03 10:53:22.237: E/AndroidRuntime(807): FATAL EXCEPTION: main
    08-03 10:53:22.237: E/AndroidRuntime(807): java.lang.ArrayIndexOutOfBoundsException: length=2; index=2
    08-03 10:53:22.237: E/AndroidRuntime(807):  at com.eConnect.Restaurant.TicketActivity$EfficientAdapter.getView(TicketActivity.java:91)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.widget.AbsListView.obtainView(AbsListView.java:2033)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.widget.ListView.makeAndAddView(ListView.java:1772)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.widget.ListView.fillDown(ListView.java:672)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.widget.ListView.fillFromTop(ListView.java:732)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.widget.ListView.layoutChildren(ListView.java:1625)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.widget.AbsListView.onLayout(AbsListView.java:1863)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.view.View.layout(View.java:11278)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.view.ViewGroup.layout(ViewGroup.java:4224)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
       08-03 10:53:22.237: E/AndroidRuntime(807):   at android.view.View.layout(View.java:11278)
     08-03 10:53:22.237: E/AndroidRuntime(807):     at android.view.ViewGroup.layout(ViewGroup.java:4224)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.view.View.layout(View.java:11278)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.view.View.layout(View.java:11278)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
         08-03 10:53:22.237: E/AndroidRuntime(807):     at android.view.View.layout(View.java:11278)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.os.Handler.dispatchMessage(Handler.java:99)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at android.os.Looper.loop(Looper.java:137)
       08-03 10:53:22.237: E/AndroidRuntime(807):   at android.app.ActivityThread.main(ActivityThread.java:4424)
        08-03 10:53:22.237: E/AndroidRuntime(807):  at java.lang.reflect.Method.invokeNative(Native Method)
         08-03 10:53:22.237: E/AndroidRuntime(807):     at java.lang.reflect.Method.invoke(Method.java:511)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
      08-03 10:53:22.237: E/AndroidRuntime(807):    at dalvik.system.NativeStart.main(Native Method)
     08-03 10:53:22.358: I/dalvikvm(807): threadid=3: reacting to signal 3 
```

提前致谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:40:15.797

确保 HomeActivity.select1.length 和 GlobalClass.myval.size() 和 GlobalClass.myvals.size() 大小相同。

我正在编辑您的答案，请记下它只是一种解决方法，因为要获得正确的解决方案，我需要很好地理解这些数据源。

```
public class TicketActivity extends Activity{
TextView t1;
TextView t2;
ListView l1;
TextView t6;
  public void onCreate(Bundle savedInstanceState){
   super.onCreate(savedInstanceState);
  setContentView(R.layout.ticket);
  t1=(TextView)findViewById(R.id.textView3);
  t2=(TextView)findViewById(R.id.textView5);
   l1=(ListView)findViewById(R.id.listView1);

     //Get the Table no Value From Edit Text

   Intent i1=getIntent();
   Bundle b=i1.getExtras();
    int num=b.getInt("Table No:");
    String pno=Integer.toString(num);
    t1.setText(pno);

        //Get The Guest Value From Edit Text

    Intent i2=getIntent();
    Bundle b1=i2.getExtras();
    int num1=b1.getInt("Guest:");
    String pno1=Integer.toString(num1);
    t2.setText(pno1);

    l1.setAdapter(new EfficientAdapter(TicketActivity.this));

   } 
   private static class EfficientAdapter extends BaseAdapter{
    private LayoutInflater mInflater;

    public EfficientAdapter(Context context){
        mInflater=LayoutInflater.from(context);

    // implementation of EfficientAdapter   
    }
    public int getCount() {

        return GlobalClass.myval.size()<GlobalClass.myvals.size()?GlobalClass.myval.size():GlobalClass.myvals.size();

    }
    public Object getItem(int position) {

        return position;
    }
    public long getItemId(int position) {

        return position ;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        String[] stockArr = new String[GlobalClass.myval.size()];
        stockArr = GlobalClass.myval.toArray(stockArr);
        String[] stockArr1=new String[GlobalClass.myvals.size()];
        stockArr1=GlobalClass.myvals.toArray(stockArr1);
    if(convertView==null){
            convertView=mInflater.inflate(R.layout.list_ticket, null);
            holder=new ViewHolder();
            holder.Text1=(TextView)          convertView.findViewById(R.id.textView1);
            holder.Text2=(TextView) convertView.findViewById(R.id.textView2);
            holder.Text3=(TextView) convertView.findViewById(R.id.textView3);
            convertView.setTag(holder);
        }
        else{
              holder=(ViewHolder)convertView.getTag();
            }

            holder.Text2.setText(stockArr[position]);
            holder.Text3.setText(stockArr1[position]);
            return convertView;

     }

    }
    static class ViewHolder{
        TextView Text1;
        TextView Text2;
        TextView Text3;

    }
      } 
```

# css - jsfiddle工作错误

> ID：11790518
> 
> 赞同：0
> 
> 时间：2012-08-03T06:36:50.227
> 
> 标签：css, menu, jsfiddle

我在 jsfiddle 制作了我的菜单，这是我的工作。

但我在我的页面上得到了不同的结果。

jsfiddle 工作吗？我需要修改一些代码吗？

```
<div id="menu_main">

  <ul>    
    <li class="mainop"><a href="#">Category</a>
      <ul>
        <li><a href='../index.php?category=Blogging'>Blogging</a></li>
        <li><a href='../index.php?category=General'>General</a></li>
        <li><a href='../index.php?category=Arts and Entertainment'>Arts and Entertainment</a></li>

        <li><a href='../index.php?category=Womens Interests'>Womens Interests</a></li>
        <li><a href='../index.php?category=Writing and Speaking'>Writing and Speaking</a></li>
      </ul>
    </li>
  </ul>  

</div> 
```

我的脚本

```
<script language="JavaScript" type="text/javascript">
$(document).ready(function() {
    $(".mainop").hover(function() {
        var $this = $(this);
        $this.find("ul").slideDown("fast");
        $this.children('a:first-child').addClass('active');
    }, function() {
        var $this = $(this);
        $this.find("ul").slideUp("fast");
        $this.children('a:first-child').removeClass('active');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:53:02.837

根据 JSFiddle，您的代码的输出 HTML 如下所示：

```
<div id="menu_main">
    <ul>
        <li class="mainop"><a href="#">Main option</a>
            <ul style="display: block; "></ul>
        </li>
        <li class="mainop"><a href="#">Main option</a></li>
        <li class="mainop"><a href="#">Main option</a></li>
    </ul>
</div> 
```

所有列表元素都消失了。

我可以看到您正在引用[columnizer jQuery plugin](http://welcome.totheinter.net/columnizer-jquery-plugin/)，但您尚未将它包含在您的 JSFiddle 页面中。这可能是您没有得到相同结果的原因。如果删除对 的调用`columnize`，列表元素会重新出现，但看起来并不漂亮。

# facebook-fql - FQL：无法从见解表中读取数据

> ID：11790521
> 
> 赞同：0
> 
> 时间：2012-08-03T06:37:01.223
> 
> 标签：facebook-fql, facebook-insights

我正在尝试通过以下请求访问我们应用程序的洞察数据：

```
https://graph.facebook.com/fql?format=json&access_token=<removed>&q=
 SELECT object_id, metric, value FROM insights WHERE metric IN 
    ('application_widget_comments_views', 
     'application_widget_comments_views_unique', 
     'application_widget_comments_views_login', 
     'application_widget_comments_views_login_unique', 
     'application_widget_comments_views_logout') 
   AND end_time=end_time_date('2012-08-01') 
   AND period=period('day') 
   AND object_id='10151074438279445' 
```

访问令牌是作为**应用程序访问令牌**获得的- 这是否意味着我不需要`read_insights`许可？

但是我总是得到一个空的数据数组。要访问见解插件和域指标，应该`object_id`是什么？

从中获取数据`comment`，`link_stat`表工作得很好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:52:47.643

您没有获取数据，因为您传递的 id 是一个 url（雅虎财经 url）。似乎只有当是应用程序的 ID`application_widget_comments_views...`时才返回数据。`object_id`

查看表格，除了通过`insights`表格之外，似乎没有任何方法可以获取 url 的见解`url_like`。

如果您在某个 url 上有 Facebook 评论，您需要拥有用于发布评论的应用程序 ID*并*成为该应用程序的管理员。

# javascript - Jquery-查找具有给定样式属性的元素

> ID：11790524
> 
> 赞同：1
> 
> 时间：2012-08-03T06:37:32.047
> 
> 标签：javascript, jquery

我有一个 html 表

```
 <table class="mytable">
       <tr>
           <td>
            test value
           </td>
       <tr>
    </table> 
```

在动态加载页面时添加 td

```
 $(".mytable tr:first").append("<td id='scheduledInMyLearnStatus' class='changeFieldValue' style='background-color:#FE2E2E;'></td>"); 
```

现在点击那个特定的 td 我想比较它是否有背景颜色 =#FE2E2E 或有其他东西

```
 $('td').live('click', function() {

       //compare here 
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:42:20.070

您可以使用 jQuery`css()`方法，请注意`live()`已弃用，您可以`on`改用：

```
$(document).on('click', '#scheduledInMyLearnStatus', function(){ // or $('.mytable').on
    if($(this).css('background-color') == "rgb(254, 46, 46)") {
      // do something
    }
}) 
```

[演示](http://jsfiddle.net/w45S9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:46:01.897

我相信你可以只使用一个选择器：

```
$(document).on("click", ".changeFieldValue[style~='background-color']", function () {
  // do something
}); 
```

如果你需要确定的颜色，'background-color: rgb(200, 122, 122)' 而不仅仅是'background-color'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:08:28.367

你可以让你的功能看起来像

$('.mytable td').live('click', function() {

```
 bgColor= hexc($(this).css("background-color"));
        if(bgColor.toUpperCase() == "#FE2E2E")
        {
            alert("Background color matched to '#FE2E2E'")
        }
        else
        {
            alert("Background color don't  matched to '#FE2E2E'")
        }

    }); 
```

和 hexc 的定义将是

函数十六进制（颜色值）

```
{
    var color = "";
    var parts = colorval.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    if(parts != null )
    {
        parts[0] = "#";
        for (var i = 1; i <= 3; ++i) 
        {
            parts[i] = parseInt(parts[i]).toString(16);
            if (parts[i].length == 1) parts[i] = '0' + parts[i];
        }
        color = parts.join('');
    }
    return color;
} 
```

# css - 我可以使用 CSS3 缩放背景吗？

> ID：11790527
> 
> 赞同：0
> 
> 时间：2012-08-03T06:38:03.120
> 
> 标签：css, transform, scale

更具体地说，是否可以使用 CSS3 缩放平铺背景图像`transform:scale(x,y)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:52:25.217

虽然您不能使用 transform:scale()，但如果您知道所需背景图像的最终尺寸，则可以使用 background-size 来获得相同的效果。

```
.selector {
    background-image: url(http://path/to/image.png);
    background-size: 200px 100px;
} 
```

但是，如果您总是想将用作背景的图像的宽度“加倍”，那么目前这似乎是不可能的。

**编辑：**请注意，虽然 background-size 样式支持基于 % 的参数，但它不是图像大小的百分比，而是窗口大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:43:13.730

您可以使用 ：

```
background-size: 200px;
background-size: 200px 100px;
background-size: 200px 100px, 400px 200px;
background-size: auto 200px;
background-size: 50% 25%;
background-size: contain;
background-size: cover; 

 (or)

img.bg {
    /* Set rules to fill background */
    min-height: 100%;
    min-width: 1024px;

    /* Set up proportionate scaling */
    width: 100%;
    height: auto;

    /* Set up positioning */
    position: fixed;
    top: 0;
    left: 0;
}

@media screen and (max-width: 1024px) { /* Specific to this particular image */
    img.bg {
        left: 50%;
        margin-left: -512px;   /* 50% */
    }
}

       (or)

    #bg {
        position:fixed; 
        top:0; 
        left:0; 

        /* Preserve aspet ratio */
        min-width:100%;
        min-height:100%;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:40:47.997

我不擅长 CSS。但只是这个想法：创建具有平铺背景的背景 div（使用 z-index）并对其进行缩放。它应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:00:36.833

是的，您可以对其进行缩放，但请尝试使用百分比。

```
background-size: 100%; 
```

但是您需要考虑屏幕的不同分辨率。4:3 4:9 等

我会推荐你​​使用这个 jQuery 脚本。[jQuery 拉伸背景](http://www.ajaxblender.com/bgstretcher-jquery-stretch-background-plugin.html)

# java - 如何在flex中格式化日期？

> ID：11790529
> 
> 赞同：1
> 
> 时间：2012-08-03T06:38:11.773
> 
> 标签：java, apache-flex

我正在使用 Flex+java+Mysql .. 因为我想插入从 flex 到 mysql 的日期时间，因为我得到了这样的日期字符串

```
 Sat Aug 4 12:05:00 GMT+0530 2012 
```

如何转换`yyyy-MM-dd HH:mm:ss z` 此格式，请提供代码`java`或`flex`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:34:11.343

在 flex API 给定的 DateFile 类中，我们有两个方法 dateTOString()、stringTODate()。

```
DateField.dateToString(dateInput.selectedDate,"DD-MM-YYYY"); 
```

请参考下面的文档。 [日期字段](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/DateField.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:43:47.597

DateField.dateToString(addr1.selectedDate,"YYYY-MM-DD").toString();

# python - 从 HTML 表中提取数据

> ID：11790535
> 
> 赞同：32
> 
> 时间：2012-08-03T06:38:49.167
> 
> 标签：python, linux, perl, bash

我正在寻找一种在 linux shell 环境中从 HTML 获取某些信息的方法。

这是我感兴趣的一点：

```
<table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
  <tr valign="top">
    <th>Tests</th>
    <th>Failures</th>
    <th>Success Rate</th>
    <th>Average Time</th>
    <th>Min Time</th>
    <th>Max Time</th>
  </tr>
  <tr valign="top" class="Failure">
    <td>103</td>
    <td>24</td>
    <td>76.70%</td>
    <td>71 ms</td>
    <td>0 ms</td>
    <td>829 ms</td>
  </tr>
</table> 
```

我想存储在 shell 变量中，或者在从上面的 html 中提取的键值对中回显这些变量。例子 ：

```
Tests         : 103
Failures      : 24
Success Rate  : 76.70 %
and so on.. 
```

我现在能做的是创建一个 java 程序，它将使用 sax 解析器或 html 解析器（如 jsoup）来提取此信息。

但是在这里使用 java 似乎是开销，将可运行的 jar 包含在要执行的“包装器”脚本中。

我确信肯定有“shell”语言可以做同样的事情，即 perl、python、bash 等。

我的问题是我对这些的经验为零，有人可以帮我解决这个“相当简单”的问题吗

**快速更新：**

我忘了提到我在 .html 文档中有更多的表格和更多的行，对此我感到抱歉（清晨）。

**更新#2：**

尝试像这样安装 Bsoup，因为我没有 root 访问权限：

```
$ wget http://www.crummy.com/software/BeautifulSoup/bs4/download/4.0/beautifulsoup4-4.1.0.tar.gz
$ tar -zxvf beautifulsoup4-4.1.0.tar.gz
$ cp -r beautifulsoup4-4.1.0/bs4 .
$ vi htmlParse.py # (paste code from ) Tichodromas' answer, just in case this (http://pastebin.com/4Je11Y9q) is what I pasted
$ run file (python htmlParse.py) 
```

*错误：*

```
$ python htmlParse.py
Traceback (most recent call last):
  File "htmlParse.py", line 1, in ?
    from bs4 import BeautifulSoup
  File "/home/gdd/setup/py/bs4/__init__.py", line 29
    from .builder import builder_registry
         ^
SyntaxError: invalid syntax 
```

**更新#3：**

运行 Tichodromas 的答案得到这个错误：

```
Traceback (most recent call last):
  File "test.py", line 27, in ?
    headings = [th.get_text() for th in table.find("tr").find_all("th")]
TypeError: 'NoneType' object is not callable 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-03T07:15:55.437

使用[BeautifulSoup4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)的 Python 解决方案（**编辑：**适当跳过**。Edit3：**用于`class="details"`选择`table`）：

```
from bs4 import BeautifulSoup

html = """
  <table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
    <tr valign="top">
      <th>Tests</th>
      <th>Failures</th>
      <th>Success Rate</th>
      <th>Average Time</th>
      <th>Min Time</th>
      <th>Max Time</th>
   </tr>
   <tr valign="top" class="Failure">
     <td>103</td>
     <td>24</td>
     <td>76.70%</td>
     <td>71 ms</td>
     <td>0 ms</td>
     <td>829 ms</td>
  </tr>
</table>"""

soup = BeautifulSoup(html)
table = soup.find("table", attrs={"class":"details"})

# The first tr contains the field names.
headings = [th.get_text() for th in table.find("tr").find_all("th")]

datasets = []
for row in table.find_all("tr")[1:]:
    dataset = zip(headings, (td.get_text() for td in row.find_all("td")))
    datasets.append(dataset)

print datasets 
```

结果如下所示：

```
[[(u'Tests', u'103'),
  (u'Failures', u'24'),
  (u'Success Rate', u'76.70%'),
  (u'Average Time', u'71 ms'),
  (u'Min Time', u'0 ms'),
  (u'Max Time', u'829 ms')]] 
```

**Edit2：**要产生所需的输出，请使用以下内容：

```
for dataset in datasets:
    for field in dataset:
        print "{0:<16}: {1}".format(field[0], field[1]) 
```

结果：

```
Tests           : 103
Failures        : 24
Success Rate    : 76.70%
Average Time    : 71 ms
Min Time        : 0 ms
Max Time        : 829 ms 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-10-03T18:02:09.023

使用[pandas.read_html](https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.read_html.html)：

```
import pandas as pd
html_tables = pd.read_html('resources/test.html')
df = html_tables[0]
df.T # transpose to align
                   0
Tests            103
Failures          24
Success Rate  76.70%
Average Time   71 ms 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-31T04:07:55.977

这是最佳答案，适用于 Python3 兼容性，并通过去除单元格中的空格进行了改进：

```
from bs4 import BeautifulSoup

html = """
  <table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
    <tr valign="top">
      <th>Tests</th>
      <th>Failures</th>
      <th>Success Rate</th>
      <th>Average Time</th>
      <th>Min Time</th>
      <th>Max Time</th>
   </tr>
   <tr valign="top" class="Failure">
     <td>103</td>
     <td>24</td>
     <td>76.70%</td>
     <td>71 ms</td>
     <td>0 ms</td>
     <td>829 ms</td>
  </tr>
</table>"""

soup = BeautifulSoup(s, 'html.parser')
table = soup.find("table")

# The first tr contains the field names.
headings = [th.get_text().strip() for th in table.find("tr").find_all("th")]

print(headings)

datasets = []
for row in table.find_all("tr")[1:]:
    dataset = dict(zip(headings, (td.get_text() for td in row.find_all("td"))))
    datasets.append(dataset)

print(datasets) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T07:53:37.880

假设您的 html 代码存储在 mycode.html 文件中，这是一种 bash 方式：

```
paste -d: <(grep '<th>' mycode.html | sed -e 's,</*th>,,g') <(grep '<td>' mycode.html | sed -e 's,</*td>,,g') 
```

注意：输出未完全对齐

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T06:56:47.307

```
undef $/;
$text = <DATA>;

@tabs = $text =~ m!<table.*?>(.*?)</table>!gms;
for (@tabs) {
    @th = m!<th>(.*?)</th>!gms;
    @td = m!<td>(.*?)</td>!gms;
}
for $i (0..$#th) {
    printf "%-16s\t: %s\n", $th[$i], $td[$i];
}

__DATA__
<table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
<tr valign="top">
<th>Tests</th>
<th>Failures</th>
<th>Success Rate</th>
<th>Average Time</th>
<th>Min Time</th>
<th>Max Time</th>
</tr>
<tr valign="top" class="Failure">
<td>103</td>
<td>24</td>
<td>76.70%</td>
<td>71 ms</td>
<td>0 ms</td>
<td>829 ms</td>
</tr>
</table> 
```

输出如下：

```
Tests               : 103
Failures            : 24
Success Rate        : 76.70%
Average Time        : 71 ms
Min Time            : 0 ms
Max Time            : 829 ms 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-03T07:39:27.910

仅使用标准库的 Python 解决方案（利用 HTML 恰好是格式良好的 XML 的事实）。可以处理多于一行的数据。

（用 Python 2.6 和 2.7 测试。问题已更新，说 OP 使用 Python 2.4，所以这个答案在这种情况下可能不是很有用。ElementTree 是在 Python 2.5 中添加的）

```
from xml.etree.ElementTree import fromstring

HTML = """
<table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
  <tr valign="top">
    <th>Tests</th>
    <th>Failures</th>
    <th>Success Rate</th>
    <th>Average Time</th>
    <th>Min Time</th>
    <th>Max Time</th>
  </tr>
  <tr valign="top" class="Failure">
    <td>103</td>
    <td>24</td>
    <td>76.70%</td>
    <td>71 ms</td>
    <td>0 ms</td>
    <td>829 ms</td>
  </tr>
  <tr valign="top" class="whatever">
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
    <td>E</td>
    <td>F</td>
  </tr>
</table>"""

tree = fromstring(HTML)
rows = tree.findall("tr")
headrow = rows[0]
datarows = rows[1:]

for num, h in enumerate(headrow):
    data = ", ".join([row[num].text for row in datarows])
    print "{0:<16}: {1}".format(h.text, data) 
```

输出：

```
Tests           : 103, A
Failures        : 24, B
Success Rate    : 76.70%, C
Average Time    : 71 ms, D
Min Time        : 0 ms, E
Max Time        : 829 ms, F 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-05T03:35:53.010

下面是我在 python 2.7 上测试过的基于 python 正则表达式的解决方案。它不依赖于 xml 模块——因此可以在 xml 格式不完全的情况下工作。

```
import re
# input args: html string
# output: tables as a list, column max length
def extract_html_tables(html):
  tables=[]
  maxlen=0
  rex1=r'<table.*?/table>'
  rex2=r'<tr.*?/tr>'
  rex3=r'<(td|th).*?/(td|th)>'
  s = re.search(rex1,html,re.DOTALL)
  while s:
    t = s.group()  # the table
    s2 = re.search(rex2,t,re.DOTALL)
    table = []
    while s2:
      r = s2.group() # the row 
      s3 = re.search(rex3,r,re.DOTALL)
      row=[]
      while s3:
        d = s3.group() # the cell
        #row.append(strip_tags(d).strip() )
        row.append(d.strip() )

        r = re.sub(rex3,'',r,1,re.DOTALL)
        s3 = re.search(rex3,r,re.DOTALL)

      table.append( row )
      if maxlen<len(row):
        maxlen = len(row)

      t = re.sub(rex2,'',t,1,re.DOTALL)
      s2 = re.search(rex2,t,re.DOTALL)

    html = re.sub(rex1,'',html,1,re.DOTALL)
    tables.append(table)
    s = re.search(rex1,html,re.DOTALL)
  return tables, maxlen

html = """
  <table class="details" border="0" cellpadding="5" cellspacing="2" width="95%">
    <tr valign="top">
      <th>Tests</th>
      <th>Failures</th>
      <th>Success Rate</th>
      <th>Average Time</th>
      <th>Min Time</th>
      <th>Max Time</th>
   </tr>
   <tr valign="top" class="Failure">
     <td>103</td>
     <td>24</td>
     <td>76.70%</td>
     <td>71 ms</td>
     <td>0 ms</td>
     <td>829 ms</td>
  </tr>
</table>"""
print extract_html_tables(html) 
```

# asp.net - 动态添加控件时出错

> ID：11790539
> 
> 赞同：1
> 
> 时间：2012-08-03T06:39:36.500
> 
> 标签：asp.net, webforms, viewstate, dynamic-controls

我有一个`UserControl`. 我在方法中动态创建了一些控件（`SPGridView`. Grid 控件的列添加到标记中`ObjectDataSource`，`Button`和`Label`），`CreateChildControl`并将它们添加到`Controls`集合中。其中两个控件在回发中添加得很好 (`Button`和`Label`)，但其中一个 ( `MenuTemplate`) 引发了带有此类内容的异常：

> "*加载视图状态失败。要加载视图状态的控件树必须与之前请求期间用于保存视图状态的控件树匹配。例如，动态添加控件时，回发期间添加的控件必须匹配在初始请求期间添加的控件的类型和位置。* "

当我将代码移动到`OnInit`方法时，所有控件都已成功添加。所以，我有一个问题：**有人能解释一下为什么有些控件成功添加到 Controls 集合中而其他控件`CreateChildControls`在回发中失败了吗？**我在[这里](http://msdn.microsoft.com/ru-ru/library/ms972976.aspx)阅读了有关 ViewState 的信息。可能有些时候我没听懂。

看我代码：

```
protected override void CreateChildControls()
{

 Label l = new Label();
 l.ID = "labelTest";
 l.Text = "Hello test!";

 Button b = new Button();
 b.Text = "Press test";
 b.ID = "buttonTest";
 b.Click += b_Click;

 Controls.Add(l);
 Controls.Add(b);

 ObjectDataSource gridDataSource = new ObjectDataSource();
 gridDataSource.ID = "gridDataSource";
 gridDataSource.SelectMethod = "GetDataSource";
 gridDataSource.TypeName = this.GetType().AssemblyQualifiedName;

 Controls.Add(gridDataSource);

 SPMenuField colMenu = new SPMenuField();
 colMenu.HeaderText = "Test";
 colMenu.TextFields = "Test";
 colMenu.MenuTemplateId = "ListMenu";

 // it is my SPGridView that added in markup
 customGridView.Columns.Add(colMenu);

 MenuTemplate titleListMenu = new MenuTemplate();
 titleListMenu.ID = "ListMenu";

 // The exception occurs here
 Controls.Add(titleListMenu);

 base.CreateChildControls();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:50:34.847

我认为，您只能在 Page_Load 或其他事件中（即在 Page_Init 之后）将项目添加到模板中，以便将其保留在回发中，而不是模板本身。模板需要在 Page_Init 阶段之前或期间创建，否则它可能不会将控件从视图状态加载到该模板中，或者可能导致错误。

# regex - 在正则表达式的可接受字符列表中添加另一个字符

> ID：11790545
> 
> 赞同：-1
> 
> 时间：2012-08-03T06:40:05.880
> 
> 标签：regex

我需要使用正则表达式验证“+”和“-”符号，但我必须将验证放入以下字符串：

```
"^[A-Za-z0-9.&,@!?#%'$()/\\\\ \\-_]+$" 
```

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:45:07.137

您已经将“-”与您的正则表达式匹配。只需像这样添加'+'：

```
"^[A-Za-z0-9.&,@!?#%'$()/\\ \-_+]+$" 
```

（实际上`"^[A-Za-z0-9.&,@!?#%'$()/\\\\ \\-_+]+$"`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:48:39.817

减号已包含在您的正则表达式中。要将加号字符添加到经过验证的字符集中，只需添加它：

```
"^[A-Za-z0-9.&,@!?#%'$()/\\\\ \\-_+]+$" 
```

# architecture - 使用 Erlang/OTP 构建容错软实时 Web 应用程序

> ID：11790547
> 
> 赞同：7
> 
> 时间：2012-08-03T06:40:14.010
> 
> 标签：architecture, erlang, real-time, erlang-otp, fault-tolerance

我想为披萨外卖店构建一个容错的软实时 Web 应用程序。它应该帮助比萨店接受客户的电话，将它们作为订单输入系统（通过 CRM 网络客户端），并帮助调度员为订单分配送货司机。

这些目标并不稀奇，但我想让服务 24/7 可用，即使其具有容错性。此外，我想让它工作得非常快并且反应灵敏。

下面是这样一个应用程序的一个非常简单的架构视图。

![披萨外卖店订单系统](../Images/52fac8df367428f59352323d73b00130.png)

问题是我不知道如何使用 Erlang/OTP 的所有优点来使应用程序非常敏感和容错。

以下是我的问题：

1.  为了提供容错，应该复制哪些系统元素，我应该怎么做？我知道我可以将每辆车的状态（坐标、分配的订单等）存储在一个复制的 Mnesia 数据库中。这是正确的方法吗？
2.  哪些数据存储服务应该是传统的基于 SQL 的（例如基于[boss_db](https://github.com/evanmiller/boss_db)），哪些应该在 Mnesia 上完成以提供非常快速的响应？在这样一个容错和高响应的应用程序中使用传统的 SQL 数据库来存储客户记录和历史记录是否可以？
3.  我是否应该尝试将所有服务（客户、车辆状态等）的所有数据存储在 RAM 中，以使应用程序具有高响应性？
4.  我是否应该将持久性车辆数据（id、容量等）存储在传统的 SQL 数据库中，并将实时数据（坐标、分配的订单、后备箱中的订单等）存储在 Mnesia 数据库中，以使应用程序更实时响应？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T09:37:26.850

首先，这是一个很大的问题，但我会尝试将其分解。让我们先看看事实。它是一个网络服务。这意味着我们有这些层：`Web Server`，`Middle ware application`然后`Data Storage`。在大多数高度可用的应用程序中，数据存储层必须具有冗余`replication`和负载管理`Distribution`。在大多数实际应用程序中，您不需要在 RAM 中存储任何内容，除非应用程序本质上是实时的，例如 a`Multi-player Game Server`或`A telecom Switch`. 所以，你的应用程序，在这种情况下，真的不需要 RAM 存储（也许在`caching`这里和那里，正如我们将要看到的那样。）

现在，这种应用程序涉及到不同类型的数据，信息在任何时候都不能具有相同的形式，因此，使用 RDMS 将迫使您以相同的方式安排一切。我的建议是您学习使用 any `document oriented database`、 a`NoSQL DB`或，`key-value system`因为它们针对现实世界的复杂性进行了很好的建模。有关任何类型存储的更多信息，[请参见此 pdf](http://cattell.net/datastores/Datastores.pdf)。我建议您使用[Couch 基础服务器](http://www.couchbase.com/)，您的数据将简单地成为`JSON documents`，`schemaless`并且可以随着应用程序的增长而发展。它带有分发和复制功能，就像任何应用程序都需要它一样。您可以在运行时添加服务器或删除服务器，整个系统只是不断地重新平衡自己。它还附带`memcached`内置用于缓存，因此对于您所说的 IN-Memory 部分，缓存将为您完成一切。

说完Storage，再说说中间件。我想谈谈作为中间件一部分的 Web 服务器。您将需要一个非常稳定的 Web 服务器，具体取决于负载，并且您想使用 Erlang，我建议使用[yaws](http://www.infoq.com/articles/vinoski-erlang-rest) [Web 服务器](http://yaws.hyber.org)并学习使用. 使用代理 sunch 作为Web 服务器集群的前端可能有助于负载管理。至少有几种方法可以在 Web 服务器前进行负载平衡。在此之后，您将需要一个 OTP 应用程序。OTP 应用程序不一定必须具有`appmods``Nginx``gen_servers`. 但正如您将学习的那样，您会发现，真正需要并行化的地方或需要顺序代码的地方。然而，它担心你想使用你还没有掌握的东西。请关注[这本网络书](http://learnyousomeerlang.com/content)和这本[Orielly 书](http://worknetlab.no-ip.org/docs/programming/erlang/ERLANG%20Programming.pdf)，以帮助您掌握有关 Erlang 的一切。您会发现尝试`Chicago Boss`和`Mochiweb`/或`Misultin`Http 服务器库很有用。

关于在 Erlang 中执行此操作，我应该提到的另一件事是，您需要掌握数据结构以及使用它们的有效方法。数据结构选择不当可能会导致问题。在每一步测试和测试一切。采用`records`如果可能，请在任何地方检查每个阶段的内存消耗。关于这个问题有很多话要说，但希望其他人也能发表他们的想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-02T23:23:25.047

破解这个游戏：[https](https://github.com/synrc/games) ://github.com/synrc/games 所有实时、低延迟、发布/订阅、数据库、架构问题都在那里，编写为最先进的软件。我建议使用 gen_fsm 来控制应用程序中的状态，就像在“好的”主管中所做的那样。riak 与 kvs lib 集成，对社交更新也有很好的支持。n2o 选择了牛仔服务器，在我看来，周围最好的服务器。[http://www.ostinelli.net/a-comparison-between-misultin-mochiweb-cowboy-nodejs-and-tornadoweb/](http://www.ostinelli.net/a-comparison-between-misultin-mochiweb-cowboy-nodejs-and-tornadoweb/)

# android - 如何在 sq Lite 中存储时间和日期值并对其进行操作？

> ID：11790553
> 
> 赞同：1
> 
> 时间：2012-08-03T06:40:38.107
> 
> 标签：android

我正在开发一个 android 应用程序，我需要向用户提供奖品，它应该在 24 小时内到期，并且应该在我的应用程序中显示减少时间。我需要将奖品提供时间存储在 sq Lite 和那个时间应该减少到24小时到0小时任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:08:21.057

使用本教程.. 将日期保存为 VARCHAR 并在检索后将其转换为日期对象。

[迪斯](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:16:09.907

我认为将数据转换为`Integer`（SQLite 数据类型）是在 SQLite 中存储日期的最佳方式，因为它使比较（使用 SQL 查询）比将日期存储为文本时更容易。如果您使用`java.util.Date`使用方法`getTime()`以毫秒为单位获取时间并将该值存储在数据库中。

# drupal - 如何将 Drupal 块插入到由 TCPDF 生成的 PDF 中

> ID：11790558
> 
> 赞同：1
> 
> 时间：2012-08-03T06:40:50.180
> 
> 标签：drupal, pdf, tcpdf

我正在使用 Drupal 7。我利用打印模块和 TCPDF 库来生成特定节点类型的可下载 PDF。现在我想在可下载的 PDF 文件中插入一个自定义 Drupal 块（PDF 的书签）。是否有任何选项可以将此块插入 PDF。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:14:32.030

您可以在相应的 tpl.php 页面中输入任何您想要的内容。在“打印”模块的文件夹中找到 pdf 文件的模板 - 通常是 sites/all/modules/print/print_pdf.tpl.php 。

您可以打印任何块、视图或任何自定义文本。

# wcf - 无法使用 InfoPath 访问 WCF 服务

> ID：11790566
> 
> 赞同：1
> 
> 时间：2012-08-03T06:41:33.720
> 
> 标签：wcf, web-services, wsdl, infopath

我正在使用 infopath 使用 wcf 服务，我可以通过 IE 轻松访问它，但无法使用 InfoPath 访问，我的 wcf 服务托管在另一台服务器上。我收到此错误：

```
WSDLReader:Could not find '/definitions/service' inside the '' namespace of the wsdl file. The parameter is incorrect.
 - WSDLReader:Analyzing the WSDL file failed. The parameter is incorrect. 
```

一切正常，但是当服务器重新启动或关闭时，它已停止工作并且现在出现此错误。当我在 InfoPath 表单所在的同一台服务器上部署相同的 Web 服务时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:30:15.270

尝试清空客户端上的 Infopah 缓存

如何更具体地取决于未给出的 Windows 和 Infopath 版本/版本

# oauth-2.0 - 有人在使用 Google Service Account 和 Google Play Api 吗？

> ID：11790571
> 
> 赞同：3
> 
> 时间：2012-08-03T06:41:57.840
> 
> 标签：oauth-2.0, google-play, google-authentication

我需要使用 Google Play api 服务。我尝试使用“服务帐户”身份验证方法获取授权令牌，但我总是得到“400 Bad request”作为响应和 json：“error”：“invalid_grant”。

有没有人使用这种授权方法，Google Play Api 作为范围，C# 作为编程语言？

我到处搜索以通过现有库或我自己按照本指南（[https://developers.google.com/accounts/docs/OAuth2ServiceAccount#libraries](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#libraries)）和其他用户的建议来实现它，但它不起作用

这是代码

```
// HEADER
Dictionary<string, string> JWTHeaderObject = new Dictionary<string, string>();
JWTHeaderObject.Add("alg", "RS256");
JWTHeaderObject.Add("typ", "JWT");
string JWTHeader = JsonConvert.SerializeObject(JWTHeaderObject);

Dictionary<string, object> JWTContentObject = new Dictionary<string, object>();
JWTContentObject.Add("iss", ".....@developer.gserviceaccount.com");
JWTContentObject.Add("scope", "https:\\/\\/www.googleapis.com\\/auth\\/androidpublisher");
JWTContentObject.Add("aud", "https:\\/\\/accounts.google.com\\/o\\/oauth2\\/token");
DateTime now = DateTime.UtcNow;
// set to maximum expiration time: 1h from now
DateTime expireDate = now.Add(new TimeSpan(0, 55, 0));
// to UNIX timestamp
JWTContentObject.Add("exp", (int)Utils.ConverDateTimeToUnixTimestamp(expireDate));
JWTContentObject.Add("iat", (int)Utils.ConverDateTimeToUnixTimestamp(now));
string JWTContent = JsonConvert.SerializeObject(JWTContentObject);

string JWTBase64Header = Utils.Base64Encode(Encoding.UTF8.GetBytes(JWTHeader));
string JWTBase64Content = Utils.Base64Encode(Encoding.UTF8.GetBytes(JWTContent));

// create JWT signature with encoded header and content and the private key obtained from API console
byte[] JWTSignatureInput = Encoding.UTF8.GetBytes(JWTBase64Header + "." + JWTBase64Content);

X509Certificate2 cert = (X509Certificate2)Utils.GetCertificate(StoreName.My, StoreLocation.CurrentUser, "thumbprint");

RSACryptoServiceProvider rsa = (RSACryptoServiceProvider)cert.PrivateKey;

// without these two lines I get invalid algorithm on SHA256
// (see: http://blogs.msdn.com/b/shawnfa/archive/2008/08/25/using-rsacryptoserviceprovider-for-rsa-sha256-signatures.aspx)
RSACryptoServiceProvider rsaClear = new RSACryptoServiceProvider();
// Export RSA parameters from 'rsa' and import them into 'rsaClear'
rsaClear.ImportParameters(rsa.ExportParameters(true));

string JWTBase64Signature = Utils.Base64Encode(rsaClear.SignData(JWTSignatureInput, CryptoConfig.CreateFromName("SHA256")));

 return JWTBase64Header + "." + JWTBase64Content + "." + JWTBase64Signature; 
```

以及此处指定的编码为 base 64 的方法：[Utils.Base64Encode()](https://stackoverflow.com/questions/11126439/google-oauth-2-0-jwt-token-request-for-service-application?rq=1)

然后我在下面调用命令，我得到 {"error":"invalid_grant"}:

```
curl -d 'grant_type=assertion&assertion_type=http%3a%2f%2foauth.net%2fgrant_type%2fjwt%2f1.0%2fbearer&assertion=eyJhbGciOiJSUzI1N---.eyJpc3MiOiIxIiwic2---.KJ-DtTtdp5oIKPWVNqN---' https://accounts.google.com/o/oauth2/token 
```

（为简洁起见减少了编码的 JWT）

# java - onClick 事件未触发 | 安卓

> ID：11790573
> 
> 赞同：59
> 
> 时间：2012-08-03T06:42:00.750
> 
> 标签：java, android, onclick

我用一个活动和一个布局制作了一个非常简单的测试应用程序。`onClick`不会在第一次按下时触发，因为它应该。

活动：

```
package com.example.mytest;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText ed1 = (EditText) findViewById(R.id.editText1);

        ed1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Toast.makeText(getApplicationContext(), "1", Toast.LENGTH_LONG)
                        .show();

            }

        });
    }

} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1"
        android:ems="10" />

</RelativeLayout> 
```

如果您运行此应用程序，然后单击第二个`editText`然后返回第一个，它不会触发`onClick`. 您可以继续来回选择，它根本不会触发`onClick`。我需要这个基本功能，但一直想不出一种让它工作的方法。想法？

## 注意

我已经尝试了在我的 API 级别 16 物理设备和我的 API 级别 8 模拟器上推荐的所有方法，但我遇到了同样的问题。

## 澄清

当`editText1`被聚焦并被点击时，该`onClick`方法被触发。如果`editText2`被聚焦，然后`editText1`被点击，它**不会**触发。大问题。

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-08-03T16:43:26.097

**概述，**当用户与任何 UI 组件交互时，会按自上而下的顺序调用各种侦听器。如果较高优先级的侦听器之一“消耗事件”，则*不会调用*较低的侦听器。

在您的情况下，这三个侦听器按顺序调用：

1.  OnTouchListener
2.  OnFocusChangeListener
3.  OnClickListener

用户第一次触摸 EditText 时，它会获得焦点，以便用户可以键入。*动作在这里被消耗。* 因此不调用较低优先级的 OnClickListener。每次连续的触摸都不会改变焦点，因此这些事件会向下传递到 OnClickListener。

按钮（和其他此类组件）不会从触摸事件中获得焦点，这就是每次调用 OnClickListener 的原因。

**基本上，**您有三个选择：

1.  自己实现一个 OnTouchListener：

    ```
    ed1.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if(MotionEvent.ACTION_UP == event.getAction())
                editTextClicked(); // Instead of your Toast
            return false;
        }
    }); 
    ```

    每次触摸 EditText 时都会执行此操作。请注意，侦听器返回`false`，这允许事件向下传播到内置的 OnFocusChangeListener，它会更改焦点，以便用户可以在 EditText 中键入。

2.  实现 OnFocusChangeListener 和 OnClickListener：

    ```
    ed1.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus)
                editTextClicked(); // Instead of your Toast
        }
    }); 
    ```

    当您的 OnClickListener 捕获所有其他事件时，此侦听器会在焦点更改时捕获第一个触摸事件。

3.  （这不是一个有效的答案，但这是一个很好的技巧。）`false`在你的 XML 中设置 focusable 属性：

    ```
    android:focusable="false" 
    ```

    现在 OnClickListener 将在*每次*单击时触发。但这使得 EditText 无用，因为用户不能再输入任何文本......

**笔记：**

[`getApplicationContext()`](https://developer.android.com/reference/android/content/Context.html#getApplicationContext())会造成内存泄漏。一个好习惯是避免使用它，除非绝对必要。您可以安全地使用`v.getContext()`。

希望有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T06:47:18.703

使编辑文本可点击。在 XML`android:clickable="true"` 或代码中

```
ed1.setClickable(true); 
```

然后做

```
ed1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
      Toast.makeText(getBaseContext(), "1",Toast.LENGTH_SHORT).show();
    }
  }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-05T13:36:16.533

我参加聚会可能为时已晚，但这里有一个代码被剪断，它解决了 onClick() 没有被调用的问题：

```
ed1.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP && !v.hasFocus()) {
            // onClick() is not called when the EditText doesn't have focus,
            // onFocusChange() is called instead, which might have a different 
            // meaning. This condition calls onClick() when click was performed
            // but wasn't reported. Condition can be extended for v.isClickable()
            // or v.isEnabled() if needed. Returning false means that everything
            // else behaves as before.
            v.performClick();
        }
        return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-04T08:28:37.690

发生这种情况是因为第一次点击获得了视图的焦点。下一次点击触发点击。

如果您要动态扩展视图，请执行以下操作：

```
android:clickable="true"
android:focusable="false"
android:focusableInTouchMode="false" 
```

如果这不起作用，请尝试在父视图上应用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-03T05:45:57.960

它是使用日期选择器最简单的方法。

```
private DatePickerDialog datePickerDialog;
EditText etJoiningDate;
etJoiningDate=(EditText)findViewById(R.id.etJoiningDate);

etJoiningDate.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        switch (event.getAction()){
            case MotionEvent.ACTION_DOWN:

                final Calendar cldr = Calendar.getInstance();
                int day = cldr.get(Calendar.DAY_OF_MONTH);
                int month = cldr.get(Calendar.MONTH);
                int year = cldr.get(Calendar.YEAR);
                // date picker dialog
                datePickerDialog = new DatePickerDialog(TestActivity.this,
                        new DatePickerDialog.OnDateSetListener() {
                            @Override
                            public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                                etJoiningDate.setText(dayOfMonth + "/" + (monthOfYear + 1) + "/" + year);
                            }
                        }, year, month, day);
                datePickerDialog.show();

                break;
        }

        return false;
    }

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T10:12:56.553

```
public class TestProject extends Activity implements OnClickListener {
TextView txtmsg;
EditText ed1, ed2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    txtmsg = (TextView) findViewById(R.id.txtmsg);
    ed1 = (EditText) findViewById(R.id.edt1);
    ed2 = (EditText) findViewById(R.id.edt2);

    ed1.setOnClickListener(this);
    ed2.setOnClickListener(this);
}

@Override
public void onClick(View v) {

    if(v==ed1){
        txtmsg.setText("1");
        Toast.makeText(this, "first",Toast.LENGTH_SHORT).show();
    }
    if(v==ed2){
        txtmsg.setText("2");
        Toast.makeText(this, "second",Toast.LENGTH_SHORT).show();
    }

} 
```

}

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/edt1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:ems="10" />

    <EditText
        android:id="@+id/edt2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/edt1"
        android:layout_marginTop="14dp"
        android:ems="10" />

    <TextView
        android:id="@+id/txtmsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/edt2"
        android:layout_below="@+id/edt2"
        android:layout_marginRight="22dp"
        android:layout_marginTop="160dp"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-20T04:09:24.617

当这发生在我身上时，我花了一分钟才弄清楚这一点。我`ImageButton`的 a `setOnClickListener`and`onClick`似乎没有触发，然后我意识到它实际上在我的 xml 布局中的另一个元素下面，所以我转了这个：

```
 <RelativeLayout>
     <ImageButton>
     <LinearLayout></LinearLayout>
 </RelativeLayout> 
```

进入这个：

```
 <RelativeLayout>
     <LinearLayout></LinearLayout>
     <ImageButton>
 </RelativeLayout> 
```

突然之间，ImageButton 没有被其他布局重叠，因为它后来被添加到父布局中，并且现在位于顶部并且每次都可以使用。祝你好运，当基本的东西突然停止工作时总是很有趣

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-07T19:37:41.453

避免使用 a `FocusChangeListener`，因为当你真的不需要它时（例如，当你进入一个活动时）它会表现得不规律。只需像这样设置`OnTouchListener`一个`OnClickListener`：

```
@Override
public boolean onTouch(View view, MotionEvent event) {
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            view.requestFocus();
            break;
    }
    return false;
} 
```

这将导致您的 EditText 首先获得焦点，并且您`onClick`的第一次正常运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-31T02:14:59.427

## 简单、可重用的 Kotlin 解决方案

我从两个自定义扩展功能开始：

```
val MotionEvent.up get() = action == MotionEvent.ACTION_UP

fun MotionEvent.isIn(view: View): Boolean {
    val rect = Rect(view.left, view.top, view.right, view.bottom)
    return rect.contains((view.left + x).toInt(), (view.top + y).toInt())
} 
```

然后听一下 Edittext 上的内容。仅当初始 ACTION_DOWN 事件最初在 Edittext 上时才会触发，并且仍然存在。

```
myEdittext.setOnTouchListener { view, motionEvent ->
    if (motionEvent.up && motionEvent.isIn(view)) {
        // Talk your action here
    }
    false
} 
```

# c# - 实体框架插入不起作用

> ID：11790575
> 
> 赞同：0
> 
> 时间：2012-08-03T06:42:05.717
> 
> 标签：c#, .net, entity-framework, datagridview, ado.net

我有一个非常简单的带有实体框架的 Windows 窗体项目。

只需我从“表单”中的“数据源”选项卡中拖动表格，它就会为我生成一个“DataGridView”和一个“BindingSource”。

数据绑定成功，当我运行项目时，我可以看到“DataGridView”正确填充了数据，并且可以从“DataGridView”更新任何单元格值。

问题是我无法在“DataGridView”中插入任何行。

这是我写的一些代码，希望对解决问题有用：

```
 Teachers_DBEntities context = new Teachers_DBEntities();

    private void SaveItem_Click(object sender, EventArgs e)
    {
        context.SaveChanges();
        MessageBox.Show("saved successfully");
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        teachers_tableBindingSource.DataSource = context.teachers_table.ToList();
    } 
```

**更新评论**

我测试了我的“BindingSource”，发现它成功理解了是否在“DataGridVeiw”中插入了新记录，但是当我调用时，更改不会应用于数据库`context.savechanges();`

`context.savechanges()`当我更新单元格时工作正常，但当我尝试在“DataGridView”中插入新记录时它不起作用。

在我的 edmx 文件中，我正确映射了所有列，主键`StoreGeneretedPattern`属性设置为`Identity`，其`Entity Key`属性设置为`true`. 它`auto-increment`在我的 SQL Server 数据库文件中的属性设置为`true`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:40:27.633

> context.savechanges() 在我更新单元格时工作正常，但当我尝试在“DataGridView”中插入新记录时它不起作用。

“它不起作用”是什么意思？新记录没有出现在数据库中？当然不会。

在这一行

```
teachers_tableBindingSource.DataSource = context.teachers_table.ToList(); 
```

你打破`DataSource`了与上下文的联系。插入其中的任何新项目都不会插入到`teachers_table`中，而是插入到`List`您在其上创建的中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:47:04.640

```
using (var context = new YourEntities ()) 
{
     var dpt = new yourObject { Name = "Test" };
     context.yourObject.Add(dpt);
     context.SaveChanges(); 
} 
```

您缺少在上下文中添加对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-06T15:55:22.193

在 .Net 4.5 中，当我删除 ToList() 时出现此错误：

> 不支持将数据绑定到商店查询。

而是使用数据填充**DbSet**，例如通过在 DbSet 上调用 Load，然后绑定到本地数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-17T15:22:11.660

我有同样的问题。经过很多小时，我终于找到了自己的解决方案......

我正在使用 C#、.Net 框架、实体框架 6.4

如果我设置

```
teachers_tableBindingSource.DataSource = context.teachers_table.ToList(); 
```

数据在 DB 中更新但未插入。

如果我设置（按照建议）

```
teachers_tableBindingSource.DataSource = context.teachers_table; 
```

我得到错误：

> System.NotSupportedException HResult=0x80131515 Mensaje = 不支持直接将数据绑定到存储查询（DbSet、DbQuery、DbSqlQuery、DbRawSqlQuery）。而是使用数据填充 DbSet，例如通过在 DbSet 上调用 Load，然后绑定到本地数据。对于 WPF 绑定到 DbSet.Local。对于 WinForms 绑定到 DbSet.Local.ToBindingList()。对于 ASP.NET WebForms，您可以绑定到对查询调用 ToList() 的结果或使用模型绑定，有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=389592](http://go.microsoft.com/fwlink/?LinkId=389592)。

最后我得到了这个提示的答案：

```
context.teachers_table.Load(); //Load records in this DataSet<>

teachers_tableBindingSource.DataSource = context.teachers_table.Local.ToBindigngList(); 
```

现在它起作用了。数据在数据库中被正确删除、插入和更新。

# javascript - javascript - 我应该把“var”放在哪里以获得特定的值

> ID：11790580
> 
> 赞同：0
> 
> 时间：2012-08-03T06:42:34.603
> 
> 标签：javascript, scope

这是一个代码片段任务 - 您应该在其中输入“var”（任意数量），以便在第一个警报中获得 17，在第二个警报中获得 21。我之前遇到过这个问题，但仍然无法解决问题。

```
a = 3;
b = 2;

function line(x) {
    a = 5;
    b = 4;
    return a*x + b
}

//b should be 17
b = line( a ) - b;
alert( b );

//c should be 21
c = line ( a ) + b;
alert(c); 
```

如果你把“var”放在b前面的函数中，它会提示“17”。由于 b 的新值，下一个警报给我们 46，由函数返回。

```
function line(x) {
     a = 5;
    var b = 4;
    return a*x + b
} 
```

这就是任务的来源：

[http://www.codecademy.com/courses/javascript-for-jquery/1?curriculum_id=4fc3018f74258b0003001f0f/#!/exercises/3](http://www.codecademy.com/courses/javascript-for-jquery/1?curriculum_id=4fc3018f74258b0003001f0f/#!/exercises/3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:14:41.520

完全使用给定的东西，完全按照给定的方式使用是不可能的。

我的意思是如果调用：

```
c = line(a) + b; 
```

取决于 b 的值，它是在：

```
b = line(a) - b; 
```

然后 100% 不可能要么做出`a`一个非常小的数字，要么做出`b`一个非常大的负数来使数学工作。

因此，我相信它们旨在成为两个单独的检查。

最好的情况，如果我们试图`b=17`包括：

```
a = 3;
3 * 5 = 15 + 4 = 19 + 4 = 23; 
```

假设您将两个背靠背运行，这是您将获得的最小的。即使你这样做了，你也不会`b = line(a) - b = 17`在第一次运行......

如果是这样写的：

```
c = line(a) - b;
d = line(a) + b; 
```

然后你可以连续运行两者并获得预期的结果。

或者你可以运行：

```
var a = 3,
    b = 2;

function line (x) {
    var a = 5,
        b = 4;
    return a*x + b;
}

b = line(a) - b; 
```

得到17。

然后你可以运行：

```
var a = 3,
    b = 2;

function line (x) {
    var a = 5,
        b = 4;
    return a*x + b;
}

c = line(a) + b; 
```

（即：完全相同的设置与不同的发起者，并且没有`b`从先前调用的返回中保存的值），并获得所需的结果。

但是不可能一个接一个地运行它们，并期望它们都工作，而不对代码做*任何事情*，只添加一个`var`或四个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:49:05.113

如果您想保持一致性，请保持这样的功能。在 a 和 b 之前使用“var”将使它们成为功能块和该调用的本地。否则它们将引用全局变量。

```
function line(x) {
    var a = 5;
    var b = 4;
    return a*x + b
} 
```

# com-interop - 如何检查 Outlook 互操作中的属性是否存在？

> ID：11790584
> 
> 赞同：0
> 
> 时间：2012-08-03T06:42:54.977
> 
> 标签：com-interop, office-interop, outlook-addin, outlook-2007, outlook-2010

我正在尝试在 Outlook 2007 及更高版本中确定电子邮件的发件人。在 Outlook 2010 中，您`Sender`在对象上有一个属性，而在 Outlook 2007 中，您必须像[这个问题](https://stackoverflow.com/questions/8655104/outlook-2007-vsto-add-in-get-email-sender-address)`MailItem`中提到的那样以不同的方式进行操作。

所以现在我需要知道当前版本的 Outlook 是否支持该`Sender`属性，如果不支持，请使用其他方法。这样做的原因是我更愿意使用该`Sender`属性来与未来版本的 Outlook 兼容，而不是在 Outlook 版本上设置条件。

所以问题是如何确定 Outlook Interop 中是否存在属性？显然，这是一个 COM 对象，我不能在这里使用反射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:12:19.493

我使用 MailItem.ItemProperties 集合来检查“Sender”属性。下面是代码

```
Microsoft.Office.Interop.Outlook.MailItem myMail;

//Code to get the mail
....

Microsoft.Office.Interop.Outlook.ItemProperties mailProps = myMail.ItemProperties;

Microsoft.Office.Interop.Outlook.ItemProperty mailProp = mailProps.Item  ("Sender"); //the parameter is case-sensitive

if(mailProp != null)
{
    //get email address using Sender object
    Microsoft.Office.Interop.Outlook.AddressEntry theSender = myMail.Sender;
}
else
{
    //use alternate method for Outlook 2007 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:50:35.317

您可以使用[IDispatch::GetIDsOfNames](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221608%28v=vs.85%29.aspx)查看属性是否存在

# mysql - 在 mysql 中改进此查询的更好方法

> ID：11790587
> 
> 赞同：1
> 
> 时间：2012-08-03T06:43:07.947
> 
> 标签：mysql

我想从不同的表中获取不同列的总和，我在下面做了类似的事情，我认为在 mysql 中有更好的方法

```
select 
(select sum(sal) from budget_tp) as sal_tp, 
(select sum(sal) from budget_fos_veri) as sal_veri,
(select sum(sal) from budget_fos_picks)as sal_pick,
(select sum(sal) from budget_bpo_other)as sal_bpo; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:47:53.343

根据“总结”的数量，您可以使用诸如填充缓存表的夜间作业（选择）之类的东西 - 因为预算数字不需要是 100% 的实时值（现在任何人说 SAP HANA，都会获得高五面对椅子）

对于纯粹的性能，您的 select 语句是最好的。

编辑：这是一种纯粹简单的方法。您还可以为庞大的数据集执行夜间作业，并且只添加自上次作业总结以来添加到表中的差异。

# c++ - 用于计算类似于 MATLAB 产品的数组元素乘积的 OpenCV 函数？

> ID：11790590
> 
> 赞同：0
> 
> 时间：2012-08-03T06:43:16.450
> 
> 标签：c++, opencv, matrix

我想`Mat`在 C++ 中沿 OpenCV 的每个维度计算产品。除了遍历 的每一行或每一列之外`Mat`，是否有任何现有的函数已经处理了这个问题？与Matlab的`prod()`功能等效的基本上是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:43:05.157

不幸的是，OpenCV 中没有这样的功能。最接近您的需求的是`reduce()`，它对每行/列执行不同的操作，但它只能提取总和、平均值、最小值或最大值。不是产品。所以，就是这样，你应该编写自己的函数。

或者更好的扩展[`cv::reduce()`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=sum#void%20reduce%28InputArray%20src,%20OutputArray%20dst,%20int%20dim,%20int%20rtype,%20int%20dtype%29)功能，把补丁发到[code.opencv.org](http://code.opencv.org)会不会很棒？

# sql - SQLite 内连接 - 使用另一个表中的值进行更新

> ID：11790595
> 
> 赞同：15
> 
> 时间：2012-08-03T06:44:06.123
> 
> 标签：sql, sqlite, join, sql-update

这很容易，并且已被多次询问，但我无法让它工作。我认为应该工作的 SQL 查询是：

```
 UPDATE table2
       SET dst.a = dst.a + src.a,
           dst.b = dst.b + src.b,
           dst.c = dst.c + src.c,
           dst.d = dst.d + src.d,
           dst.e = dst.e + src.e
      FROM table2 AS dst 
INNER JOIN table1 AS src
        ON dst.f = src.f 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-23T20:48:06.733

使用更新语句是不可能的，因为在 sqlite 中不支持更新语句中的连接。请参阅文档： [更新声明](http://sqlite.org/lang_update.html)

如果您只想将单个列更新为静态值，则可以在更新语句中正确使用子查询。请参阅此示例：[如何在 SQLite 上连接表时进行更新？](https://stackoverflow.com/questions/773441/how-do-i-make-an-update-while-joining-tables-on-sqlite)

现在在您的示例中，假设“列 f”上有一个唯一键 - 我想出的解决方法/解决方案是使用替换语句：

```
replace into table2
(a, b, c, d, e, f, g)
select src.a, src.b, src.c, src.d, src.e, dest.f, dest.g
from table1 src
inner join table2 dest on src.f = dest.f 
```

我还在 table2“列 g”中添加了一个额外的列，以显示您如何使用此方法仅“更新”某些列。

需要注意的另一件事是，如果您使用“PRAGMA foreign_keys = ON;” 由于该行被有效地删除和插入，因此可能会出现问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-18T14:03:18.973

我想出了一种使用 TRIGGER 并“反转”更新方向的替代技术，尽管以源表中的虚拟字段为代价。

一般来说，你有一张`Master`桌子和一张`Updates`桌子。您想从key field 链接`Master`的相应字段中更新一些/所有记录字段。`Updates``Key`

而不是`UPDATE Master SET ... FROM Master INNER JOIN Updates ON Mater.Key = Updates.Key`您执行以下操作：

1.  `TriggerField`向表中添加一个虚拟字段以`Updates`充当触发器的焦点。

2.  在此字段上创建触发器：

    ```
    CREATE TRIGGER UpdateTrigger AFTER UPDATE OF TriggerField ON Updates
    BEGIN
        UPDATE Master SET
            Field1 = OLD.Field1,
            Field2 = OLD.Field2,
            ...
        WHERE Master.Key = OLD.Key
    END; 
    ```

3.  使用以下命令启动更新过程：

    ```
    UPDATE Updates SET TriggerField = NULL ; 
    ```

### 笔记

1.  虚拟字段只是触发器的锚点，因此任何其他字段`UPDATE Updates SET ...`都不会触发更新到`Master`. 如果您只`INSERT`进入`Updates`，则不需要它（并且可以`OF TriggerField`在创建触发器时删除该子句）。

2.  从一些粗略的时间来看，这似乎工作的速度与`REPLACE INTO`但避免了删除和添加行的*感觉有点错误*的技术。如果您只更新其中的几个字段，`Master`因为您只列出要更改的字段，这也更简单。

3.  它比我见过的其他替代方案快几个数量级`UPDATE ... FROM`：

    ```
    UPDATE Master SET
        Field1 = ( SELECT Field1 FROM Updates WHERE Mater.Key = Updates.Key ),
        Field1 = ( SELECT Field1 FROM Updates WHERE Mater.Key = Updates.Key ),
        ...
    ; 
    ```

    对于 Tony 和我的方法，更新 1700 条记录中的六个字段大约需要 0.05 秒，但**该**方法需要**2.50 秒**`UPDATE ... ( SELECT... )`。

4.  `AFTER UPDATE`触发器`Master`似乎按预期触发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-28T00:15:50.843

正如托尼所说，解决方案是*替换*方式，但您可以使用 sqlite 隐藏字段**rowid**来模拟完整更新，例如：

```
replace into table2
(rowid,a, b, c, d, e, f, g)
select dest.rowid,src.a, src.b, src.c, src.d, src.e, dest.f, dest.g
from table1 src
inner join table2 dest on src.f = dest.f 
```

如果您没有用于替换的主键或作为标准方法使用连接进行更新，则使用此方法可以重新创建完整行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-01T04:23:11.647

SQLITE 不支持使用 INNER JOIN 进行更新，其他几个数据库也不支持。内部连接既好又简单，但它可以通过仅使用 UPDATE 和子查询选择来完成。通过使用 where 子句和带有子查询的“IN”以及“SET”的附加子查询，始终可以实现相同的结果。下面是它是如何完成的。

```
UPDATE table2
  SET a = a + (select a from table1 where table1.f = table2.f),
       b = b + (select b from table1 where table1.f = table2.f),
       c = c + (select c from table1 where table1.f = table2.f),
       d = d + (select d from table1 where table1.f = table2.f),
       e = e + (select e from table1 where table1.f = table2.f)
  WHERE RowId IN (Select table2.RowId from table1 where table1.f = table2.f) 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-08-25T06:45:45.413

使用以下查询：

```
UPDATE table2
SET a = Z.a,
    b = Z.b,
    c = Z.c,
    d = Z.d,
    e = Z.e
FROM (SELECT dst.id, 
             dst.a + src.a AS a,
             dst.b + src.b AS b,
             dst.c + src.c AS c,
             dst.d + src.d AS d,
             dst.e + src.e AS e
      FROM table2 AS dst 
      INNER JOIN table1 AS src ON dst.f = src.f
      )Z
WHERE table2.id = z.id 
```

# c# - Python hmac 和 C# hmac

> ID：11790599
> 
> 赞同：8
> 
> 时间：2012-08-03T06:44:30.430
> 
> 标签：c#, python, sha1

我们有一个 python 网络服务。它需要一个哈希作为参数。python中的哈希是这样生成的。

```
 hashed_data = hmac.new("ant", "bat", hashlib.sha1)
    print hashed_data.hexdigest() 
```

现在，这就是我从 C# 生成哈希的方式。

```
 ASCIIEncoding encoder = new ASCIIEncoding();
    Byte[] code = encoder.GetBytes("ant");
    HMACSHA1 hmSha1 = new HMACSHA1(code);
    Byte[] hashMe = encoder.GetBytes("bat");
    Byte[] hmBytes = hmSha1.ComputeHash(hashMe);
    Console.WriteLine(Convert.ToBase64String(hmBytes)); 
```

但是，我得出了不同的结果。

我应该更改散列的顺序吗？

谢谢，

乔恩

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T07:02:25.487

为了打印结果：

*   在 Python 中，您使用：`.hexdigest()`
*   在 C# 中，您使用：`Convert.ToBase64String`

这两个功能根本不做同样的事情。Python 的 hexdigest 只是将字节数组转换为十六进制字符串，而 C# 方法使用 Base64 编码来转换字节数组。因此，要获得相同的输出，只需定义一个函数：

```
public static string ToHexString(byte[] array)
{
    StringBuilder hex = new StringBuilder(array.Length * 2);
    foreach (byte b in array)
    {
        hex.AppendFormat("{0:x2}", b);
    }
    return hex.ToString();
} 
```

接着：

```
ASCIIEncoding encoder = new ASCIIEncoding();
Byte[] code = encoder.GetBytes("ant");
HMACSHA1 hmSha1 = new HMACSHA1(code);
Byte[] hashMe = encoder.GetBytes("bat");
Byte[] hmBytes = hmSha1.ComputeHash(hashMe);
Console.WriteLine(ToHexString(hmBytes)); 
```

现在您将获得与 Python 中相同的输出：

```
739ebc1e3600d5be6e9fa875bd0a572d6aee9266 
```

# .net - radiobuttonlist中对齐，文字和图片有偏移

> ID：11790603
> 
> 赞同：1
> 
> 时间：2012-08-03T06:44:36.147
> 
> 标签：.net, html, css

![偏移问题的图像](../Images/95abab4300b01ec3d2dde52d192bd861.png)

所以这就是我在没有任何设置的情况下尝试在垂直模式下制作单选按钮列表时得到的，有人可以帮我把所有东西都对齐吗？感觉什么都试过了...

```
<asp:RadioButtonList ID="selectionbuttonlist" 
                     runat="server" 
                     RepeatDirection="Horizontal"
                     OnDataBound="selectionbuttonlist_DataBound" 
                     AutoPostBack="true" 
                     RepeatLayout="Flow">
    <asp:ListItem Value="All" Selected="True">
        Allt
    </asp:ListItem>
    <asp:ListItem Value="A">
        <img src="../Images/PlanCategoryGeneral.gif" align="absmiddle" />
        Allmänt
    </asp:ListItem>
</RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:04:12.100

我用来修复对齐的代码：

```
 input[type=radio] {
    width: 13px;
    height: 13px;
    padding: 0;
    margin:0;
    vertical-align: middle;
    position: relative;
    top: -1px;
    *overflow: hidden;
}
    input[type=checkbox] {
    width: 13px;
    height: 13px;
    padding: 0;
    margin:0;
    vertical-align: middle;
    position: relative;
    top: -1px;
    *overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:03:38.990

更新（起初误解了这个问题，请参阅下面的评论）：

你见过[这个SO问题](https://stackoverflow.com/questions/396439/radio-checkbox-alignment-in-html-css)吗？情况并不完全相同，但非常接近。您应该能够通过为您的元素提供一个 CSS 类来做到这一点，然后对其进行样式设置以删除任何边距并将其对齐到例如`middle`或`bottom`(like `vertical-align:middle`)。

如果这不起作用，您可能想尝试垂直对齐到中心，然后在顶部添加一些边距距离，直到元素定位到您想要的位置。

注意：您可能必须使用类型`<asp:RadioButton CssClass="YourClass" />`来执行此操作；我不太确定它是否会直接在`<li>`元素上工作。

*我之前的回答：*

我没有对此进行测试，但以下似乎是合乎逻辑的，并且似乎受到[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.repeatdirection.aspx)的支持（将“水平”更改为“垂直”）：

```
<asp:RadioButtonList ID="selectionbuttonlist" 
                 runat="server" 
                 RepeatDirection="Vertical"
                 OnDataBound="selectionbuttonlist_DataBound" 
                 AutoPostBack="true" 
                 RepeatLayout="Flow">

    (...)
</RadioButtonList> 
```

# iphone - 如何使 UIBarButtonItem 和 UIButton 一样的点击效果？

> ID：11790604
> 
> 赞同：0
> 
> 时间：2012-08-03T06:44:37.817
> 
> 标签：iphone, objective-c, uibarbuttonitem

如何使 UIBarButtonItem 具有属性（样式：边框和标识符：自定义）单击效果（如 UIButton 选择状态）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:50:39.090

```
UIButton *button = [UIButton button...];
...

UIBarButtonItem *barButtonItem = [UIBarButtonItem initWithCustomView:button]; 
```

[查看苹果的文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html)

# javascript - JavaScript 字体指标

> ID：11790605
> 
> 赞同：7
> 
> 时间：2012-08-03T06:44:39.587
> 
> 标签：javascript, fonts

给定 (1) 字体系列和 (2) Unicode 字符代码。

是否有可能在 JavaScript 中生成如下所示的图像：

[http://www.freetype.org/freetype2/docs/tutorial/metrics.png](http://www.freetype.org/freetype2/docs/tutorial/metrics.png)

基本上，我想：

*   显示角色本身（放大）
*   获取各种字体指标
*   画一束浅灰色的线条

现在，绘制浅灰色线条很简单——我只使用 SVG。但是，如何提取字符的字体度量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-07T23:06:35.743

基于上面提到的[库](http://pomax.nihongoresources.com/pages/Font.js "图书馆")，我制作了这个 codepen

[http://codepen.io/sebilasse/pen/gPBQqm?editors=1010](http://codepen.io/sebilasse/pen/gPBQqm?editors=1010)

[编辑：capHeight 现在基于`H`下面@sebdesign 建议的字母]

HTML

```
<h4>
  Change font name
  <input value="Maven Pro"></input>
  <small>[local or google]</small> 
  and font size 
  <input value="40px" size=8></input>
  and 
  <button onclick="getMetrics()">
    <strong>get metrics</strong>
  </button>
</h4>
<div id="illustrationContainer"></div>
<pre id="log"></pre>
<canvas id="cvs" width="220" height="200"></canvas> 
```

JS

```
 (getMetrics());

function getMetrics() {
  var testtext = "Sixty Handgloves ABC";
  // if there is no getComputedStyle, this library won't work.
  if(!document.defaultView.getComputedStyle) {
    throw("ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.");
  }

  // store the old text metrics function on the Canvas2D prototype
  CanvasRenderingContext2D.prototype.measureTextWidth = CanvasRenderingContext2D.prototype.measureText;

  /**
   *  shortcut function for getting computed CSS values
   */
  var getCSSValue = function(element, property) {
    return document.defaultView.getComputedStyle(element,null).getPropertyValue(property);
  };

  // debug function
  var show = function(canvas, ctx, xstart, w, h, metrics)
  {
    document.body.appendChild(canvas);
    ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)';

    ctx.beginPath();
    ctx.moveTo(xstart,0);
    ctx.lineTo(xstart,h);
    ctx.closePath();
    ctx.stroke(); 

    ctx.beginPath();
    ctx.moveTo(xstart+metrics.bounds.maxx,0);
    ctx.lineTo(xstart+metrics.bounds.maxx,h);
    ctx.closePath();
    ctx.stroke(); 

    ctx.beginPath();
    ctx.moveTo(0,h/2-metrics.ascent);
    ctx.lineTo(w,h/2-metrics.ascent);
    ctx.closePath();
    ctx.stroke(); 

    ctx.beginPath();
    ctx.moveTo(0,h/2+metrics.descent);
    ctx.lineTo(w,h/2+metrics.descent);
    ctx.closePath();
    ctx.stroke();
  }

  /**
   * The new text metrics function
   */
  CanvasRenderingContext2D.prototype.measureText = function(textstring) {
    var metrics = this.measureTextWidth(textstring),
        fontFamily = getCSSValue(this.canvas,"font-family"),
        fontSize = getCSSValue(this.canvas,"font-size").replace("px",""),
        isSpace = !(/\S/.test(textstring));
        metrics.fontsize = fontSize;

    // for text lead values, we meaure a multiline text container.
    var leadDiv = document.createElement("div");
    leadDiv.style.position = "absolute";
    leadDiv.style.opacity = 0;
    leadDiv.style.font = fontSize + "px " + fontFamily;
    leadDiv.innerHTML = textstring + "<br/>" + textstring;
    document.body.appendChild(leadDiv);

    // make some initial guess at the text leading (using the standard TeX ratio)
    metrics.leading = 1.2 * fontSize;

    // then we try to get the real value from the browser
    var leadDivHeight = getCSSValue(leadDiv,"height");
    leadDivHeight = leadDivHeight.replace("px","");
    if (leadDivHeight >= fontSize * 2) { metrics.leading = (leadDivHeight/2) | 0; }
    document.body.removeChild(leadDiv);

    // if we're not dealing with white space, we can compute metrics
    if (!isSpace) {
        // Have characters, so measure the text
        var canvas = document.createElement("canvas");
        var padding = 100;
        canvas.width = metrics.width + padding;
        canvas.height = 3*fontSize;
        canvas.style.opacity = 1;
        canvas.style.fontFamily = fontFamily;
        canvas.style.fontSize = fontSize;
        var ctx = canvas.getContext("2d");
        ctx.font = fontSize + "px " + fontFamily;

        var w = canvas.width,
            h = canvas.height,
            baseline = h/2;

        // Set all canvas pixeldata values to 255, with all the content
        // data being 0\. This lets us scan for data[i] != 255.
        ctx.fillStyle = "white";
        ctx.fillRect(-1, -1, w+2, h+2);
        ctx.fillStyle = "black";
        ctx.fillText(textstring, padding/2, baseline);
        var pixelData = ctx.getImageData(0, 0, w, h).data;

        // canvas pixel data is w*4 by h*4, because R, G, B and A are separate,
        // consecutive values in the array, rather than stored as 32 bit ints.
        var i = 0,
            w4 = w * 4,
            len = pixelData.length;

        // Finding the ascent uses a normal, forward scanline
        while (++i < len && pixelData[i] === 255) {}
        var ascent = (i/w4)|0;

        // Finding the descent uses a reverse scanline
        i = len - 1;
        while (--i > 0 && pixelData[i] === 255) {}
        var descent = (i/w4)|0;

        // find the min-x coordinate
        for(i = 0; i<len && pixelData[i] === 255; ) {
          i += w4;
          if(i>=len) { i = (i-len) + 4; }}
        var minx = ((i%w4)/4) | 0;

        // find the max-x coordinate
        var step = 1;
        for(i = len-3; i>=0 && pixelData[i] === 255; ) {
          i -= w4;
          if(i<0) { i = (len - 3) - (step++)*4; }}
        var maxx = ((i%w4)/4) + 1 | 0;

        // set font metrics
        metrics.ascent = (baseline - ascent);
        metrics.descent = (descent - baseline);
        metrics.bounds = { minx: minx - (padding/2),
                           maxx: maxx - (padding/2),
                           miny: 0,
                           maxy: descent-ascent };
        metrics.height = 1+(descent - ascent);
    }

    // if we ARE dealing with whitespace, most values will just be zero.
    else {
        // Only whitespace, so we can't measure the text
        metrics.ascent = 0;
        metrics.descent = 0;
        metrics.bounds = { minx: 0,
                           maxx: metrics.width, // Best guess
                           miny: 0,
                           maxy: 0 };
        metrics.height = 0;
    }
    return metrics;
  };
  //callback();

  var fontName = document.getElementsByTagName('input')[0].value;
  var fontSize = document.getElementsByTagName('input')[1].value;
  var WebFontConfig = {
    google: { 
      families: [ [encodeURIComponent(fontName),'::latin'].join('') ] 
    }
  };
  var wf = document.createElement('script');
  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
    '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
  wf.type = 'text/javascript';
  wf.async = 'true';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(wf, s);
  document.body.style.fontFamily = ['"'+fontName+'"', "Arial sans"].join(' ')
  var canvas = document.getElementById('cvs'),
      context = canvas.getContext("2d");

  var w=220, h=200;

  canvas.style.font = [fontSize, fontName].join(' ');
  context.font = [fontSize, fontName].join(' ');
  context.clearRect(0, 0, canvas.width, canvas.height);
  // draw bounding box and text
  var xHeight = context.measureText("x").height;
  var capHeight = context.measureText("H").height;
  var metrics = context.measureText("Sxy");
  var xStart = (w - metrics.width)/2;
  context.fontFamily = fontName;
  context.fillStyle = "#FFAF00";
  context.fillRect(xStart, h/2-metrics.ascent, metrics.bounds.maxx-metrics.bounds.minx, 1+metrics.bounds.maxy-metrics.bounds.miny);
  context.fillStyle = "#333333";
  context.fillText(testtext, xStart, h/2);
  metrics.fontsize = parseInt(metrics.fontsize);
  metrics.offset = Math.ceil((metrics.leading - metrics.height) / 2);
  metrics.width = JSON.parse(JSON.stringify(metrics.width));
  metrics.capHeight = capHeight;
  metrics.xHeight = xHeight - 1;
  metrics.ascender = metrics.capHeight - metrics.xHeight;
  metrics.descender = metrics.descent;

  var myMetrics = {
    px: JSON.parse(JSON.stringify(metrics)),
    relative: {
      fontsize: 1,
      offset: (metrics.offset / metrics.fontsize),
      height: (metrics.height / metrics.fontsize),
      capHeight: (metrics.capHeight / metrics.fontsize),
      ascender: (metrics.ascender / metrics.fontsize),
      xHeight: (metrics.xHeight / metrics.fontsize),
      descender: (metrics.descender / metrics.fontsize)
    },
    descriptions: {
      ascent: 'distance above baseline',
      descent: 'distance below baseline',
      height: 'ascent + 1 for the baseline + descent',
      leading: 'distance between consecutive baselines',
      bounds: { 
        minx: 'can be negative',
        miny: 'can also be negative',
        maxx: 'not necessarily the same as metrics.width',
        maxy: 'not necessarily the same as metrics.height'
      },
      capHeight: 'height of the letter H',
      ascender: 'distance above the letter x',
      xHeight: 'height of the letter x (1ex)',
      descender: 'distance below the letter x'
    }
  }

  Array.prototype.slice.call(
    document.getElementsByTagName('canvas'), 0
  ).forEach(function(c, i){
    if (i > 0) document.body.removeChild(c);
  });

  document.getElementById('illustrationContainer').innerHTML = [
'<div style="margin:0; padding:0; position: relative; font-size:',fontSize,'; line-height: 1em; outline:1px solid black;">',
  testtext,
  '<div class="__ascender" style="position: absolute; width:100%; top:',myMetrics.relative.offset,'em; height:',myMetrics.relative.ascender,'em; background:rgba(220,0,5,.5);"></div>',
    '<div class="__xHeight" style="position: absolute; width:100%; top:',myMetrics.relative.offset + myMetrics.relative.ascender,'em; height:',myMetrics.relative.xHeight,'em; background:rgba(149,204,13,.5);"></div>',
    '<div class="__xHeight" style="position: absolute; width:100%; top:',myMetrics.relative.offset + myMetrics.relative.ascender + myMetrics.relative.xHeight,'em; height:',myMetrics.relative.descender,'em; background:rgba(13,126,204,.5);"></div>',
  '</div>'
  ].join('');
  myMetrics.illustrationMarkup = document.getElementById('illustrationContainer').innerHTML;
  var logstring = ["/* metrics for", fontName, 
                   "*/\nvar metrics =", 
                   JSON.stringify(myMetrics, null, '  ')].join(' ');
  document.getElementById('log').textContent = logstring;
} 
```

# objective-c - 从 tableView 转为 UIImage

> ID：11790606
> 
> 赞同：1
> 
> 时间：2012-08-03T06:44:50.637
> 
> 标签：objective-c, xcode, model-view-controller, controller, segue

嗨，我有一个带有单元格的 tableViewController，我希望它在您单击单元格时继续显示图片。考虑到 MVC 设计模式，是否建议为 imageView 创建一个新的视图控制器，或者 tableViewController 是否能够处理信息？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:52:28.210

这听起来正是本[Apple 指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html)的第一个示例中描述的内容，您可以使用此[SO question](https://stackoverflow.com/questions/1518249/is-there-a-simple-uiviewcontroller-that-displays-one-photo)中详述的解决方案。

# mysql - 查询中有两个相同的子查询 - 如何使它们为 1？

> ID：11790613
> 
> 赞同：0
> 
> 时间：2012-08-03T06:45:11.513
> 
> 标签：mysql, subquery

我有餐桌位

```
place_id | city | country_code | zipcode | lat | lon 
```

现在我想显示距离 A 地点 25 英里以内的地点。地点 A 的 place_id 为 1。

```
SELECT * 
FROM `places` 
WHERE ( 3959 * acos( cos( radians((SELECT lat FROM places WHERE place_id=1)) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians((SELECT lon FROM places WHERE place_id=1)) ) + sin( radians((SELECT lat FROM places WHERE place_id=1)) ) * sin( radians( lat ) ) ) ) < 25; 
```

这工作正常，但有两个相同的子查询

```
SELECT lat FROM places WHERE place_id=1 
```

是否可以优化此查询以不具有两个相同的子查询但将它们变为 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:49:33.827

您的三个子查询将为外部表中的每一行执行。

您可以做的是将这些子查询转换为单个子查询，该子查询`JOIN`仅对整个查询执行一次，以便找到 的纬度和经度`place_id 1`：

```
SELECT a.* 
FROM   places a
JOIN   (SELECT lat, lon FROM places WHERE place_id = 1) b ON
       (3959 * acos( cos( radians(b.lat) ) * cos( radians( a.lat ) ) * cos( radians( a.lon ) - radians(b.lon) ) + sin( radians(b.lat) ) * sin( radians( a.lat ) ) ) ) < 25; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:48:50.217

从子查询中派生一个新表并与原始表进行连接，例如

```
SELECT *
FROM places p, (SELECT lat AS new_lat FROM places WHERE place_id = 1) l
WHERE blah blah 
```

现在您可以将子查询替换为“new_lat”列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:53:12.903

您可以使用变量`@var_lon`将查询的输出缓存为：

```
SELECT *
FROM `places`
WHERE ( 3959 * acos( cos( radians((SELECT lat FROM places WHERE place_id=1)) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians((SELECT @var_lon := lon FROM places WHERE place_id=1)) ) + sin( radians(@var_lon) ) * sin( radians( lat ) ) ) ) < 25; 
```

# persistence - 创建实体 bean

> ID：11790614
> 
> 赞同：0
> 
> 时间：2012-08-03T06:45:26.620
> 
> 标签：persistence, ejb, java-ee-6, entity-bean

![客户订单应用类图](../Images/26fb6522bba7e86812bf94d8b1b799e4.png)

我想在 netbeans 中创建一个 java EE 应用程序（bean 容器和 web 容器）来存储客户和订单详细信息。一位客户可以有多个订单。但订单仅包含一位客户。1）应该能够查看带有客户编号和客户名称的订单详细信息。1）应该能够更新客户和订单的详细信息。

我已经创建了两个 bean，但我无法更新或删除客户详细信息和订单。 ![客户实体](../Images/249d7b8b918eafe6d88db63b049378ac.png)

![客户订单实体](../Images/bad32f2d8c3b34a4f26cc1600ea84bf1.png)

# java - 重命名文件，如“名称+索引”

> ID：11790615
> 
> 赞同：1
> 
> 时间：2012-08-03T06:45:29.147
> 
> 标签：java, file, rename

Java中有没有办法创建一个文件并在该文件已经存在时将其重命名，例如“Dog.jpg”，类似于“Dog(1).jpg”等等（“Dog(2).jpg”如果“Dog(1).jpg”也存在，等等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:49:28.530

`File`java中的类有一个叫做[`exists`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#exists%28%29)use的方法来检查文件是否存在

如果确实存在，请将其重命名为其他名称。

重复此过程，直到找到不存在的文件名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:48:58.953

是的，有一种方法可以创建一个文件，但如果它已经存在，则将其命名为不同的名称。你看过这个[类的](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)[javadocs`File`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)吗？具体来说，`exists()`方法。如果返回 true，请尝试创建“Dog(1).jpg”，如果`exists()`再次调用。等等

# java - 次要 GC 暂停时间正在增加。可能的原因有哪些？

> ID：11790616
> 
> 赞同：3
> 
> 时间：2012-08-03T06:45:49.080
> 
> 标签：java, garbage-collection, jvm

我们正在经历次要 GC 暂停时间的增加。该应用程序是一个用 Java 编写的服务器，每秒执行 500 个事务。CMS 收集后，暂停时间**会减少**，但运行数小时后，暂停时间会再次增加。我用*vmstat*检查了交换使用情况，没有任何交换输入/输出。

次要 gc 暂停时间增加的可能原因是什么？

这是 gc 日志文件的一部分，而次要 gc 暂停时间很短：（0.01 秒）

```
{GC 调用前的堆=123（满 0）：
 par 新一代总计 306688K，使用 275101K [0xffffffffe80010000, 0xffffffffe94cd0000, 0xffffffffe94cd0000)
  伊甸园空间 272640K, 100% 已使用 [0xffffffffe80010000, 0xffffffffe90a50000, 0xffffffffe90a50000)
  从空间 34048K，使用 7% [0xffffffffe92b90000, 0xffffffffe92df7718, 0xffffffffe94cd0000)
  到空间 34048K, 0% 使用 [0xffffffffe90a50000, 0xffffffffe90a50000, 0xffffffffe92b90000)
 并发标记扫描生成总数 3243264K，使用 71097K [0xffffffffe94cd0000, 0xffffffff5ac10000, 0xffffffff5ac10000)
 concurrent-mark-sweep perm gen 总计 262144K，已使用 30336K [0xffffffff5ac10000, 0xffffffff6ac10000, 0xffffffff6ac10000)
2012-07-29T20:00:19.790+0300:472.781:[GC 472.782:[ParNew
所需的幸存者大小 17432576 字节，新阈值 4（最大 4）
- 年龄 1：1068432 字节，总共 1068432
- 年龄 2：296272 字节，总共 1364704
- 年龄 3：68624 字节，总共 1433328
- 年龄 4：53776 字节，总共 1487104
: 275101K->2187K(306688K), 0.0111305 secs] 346199K->73301K(3549952K), 0.0127033 secs] [Times: user=0.13 sys=0.01, real=0.01 secs]
GC 调用后的堆=124（满 0）：
 par 新一代总 306688K，使用 2187K [0xffffffffe80010000, 0xffffffffe94cd0000, 0xffffffffe94cd0000)
  伊甸园空间 272640K, 0% 已使用 [0xffffffffe80010000, 0xffffffffe80010000, 0xffffffffe90a50000)
  从空间 34048K，使用 6% [0xffffffffe90a50000, 0xffffffffe90c72dc0, 0xffffffffe92b90000)
  到空间 34048K，使用 0% [0xffffffffe92b90000, 0xffffffffe92b90000, 0xffffffffe94cd0000)
 并发标记扫描生成总数 3243264K，使用 71114K [0xffffffffe94cd0000, 0xffffffff5ac10000, 0xffffffff5ac10000)
 concurrent-mark-sweep perm gen 总计 262144K，已使用 30336K [0xffffffff5ac10000, 0xffffffff6ac10000, 0xffffffff6ac10000)
}

```

以下是 gc 日志文件的一部分，而次要 gc 暂停时间很长：（0.9 秒）

```
{GC 调用前的堆=38526（全 3）：
 par 新一代总计 306688K，已使用 280310K [0xffffffffe80010000, 0xffffffffe94cd0000, 0xffffffffe94cd0000)
  伊甸园空间 272640K, 100% 已使用 [0xffffffffe80010000, 0xffffffffe90a50000, 0xffffffffe90a50000)
  从空间 34048K, 22% 使用 [0xffffffffe90a50000, 0xffffffffe911cda60, 0xffffffffe92b90000)
  到空间 34048K，使用 0% [0xffffffffe92b90000, 0xffffffffe92b90000, 0xffffffffe94cd0000)
 并发标记扫描生成总数 3243264K，已使用 1023755K [0xffffffffe94cd0000, 0xffffffff5ac10000, 0xffffffff5ac10000)
 concurrent-mark-sweep perm gen 总计 262144K，已使用 34997K [0xffffffff5ac10000, 0xffffffff6ac10000, 0xffffffff6ac10000)
2012-07-31T13：21：46.709+0300：149360.928：[GC 149360.930：[ParNew
所需的幸存者大小 17432576 字节，新阈值 4（最大 4）
- 年龄 1：1794816 字节，总共 1794816
- 年龄 2：2864408 字节，总共 4659224
- 年龄 3：72672 字节，总共 4731896
- 年龄 4：86160 字节，总共 4818056
: 280310K->7605K(306688K), 0.9073290 secs] 1304066K->1031418K(3549952K), 0.9100161 secs] [Times: user=9.34 sys=0.15, real=0.91 secs]
GC 调用后的堆=38527（满 3 个）：
 par 新一代总计 306688K，使用 7605K [0xffffffffe80010000, 0xffffffffe94cd0000, 0xffffffffe94cd0000)
  伊甸园空间 272640K, 0% 已使用 [0xffffffffe80010000, 0xffffffffe80010000, 0xffffffffe90a50000)
  从空间 34048K，使用 22% [0xffffffffe92b90000, 0xffffffffe932fd490, 0xffffffffe94cd0000)
  到空间 34048K, 0% 使用 [0xffffffffe90a50000, 0xffffffffe90a50000, 0xffffffffe92b90000)
 并发标记扫描生成总数 3243264K，已使用 1023813K [0xffffffffe94cd0000, 0xffffffff5ac10000, 0xffffffff5ac10000)
 concurrent-mark-sweep perm gen 总计 262144K，已使用 34997K [0xffffffff5ac10000, 0xffffffff6ac10000, 0xffffffff6ac10000)
}

```

**JVM参数：**

```
-d64 -服务器\
-XX:+UseParNewGC\
-XX:+UseConcMarkSweepGC\
-Xloggc:./logs/gc_"$DATE".log -XX:+PrintGCDetails -XX:+PrintGCDateStamps \
-XX:+打印GC\
-XX:PrintCMSStatistics=2\
-XX:+PrintTenuringDistribution \
-XX:+PrintHeapAtGC\
-XX:+PrintGCTaskTimeStamps \
-XX:PermSize=256m -XX:MaxPermSize=256m \
-XX:+CMSClassUnloadingEnabled \
-XX:-OmitStackTraceInFastThrow \
-XX:ParallelGCThreads=16\
-XX:ParallelCMSThreads=12\
-Dsun.rmi.dgc.server.gcInterval=0x7FFFFFFFFFFFFFFE -Dsun.rmi.dgc.client.gcInterval=0x7FFFFFFFFFFFFFE\
-Xms3500m -Xmx3500m -Xss192k

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:28:45.753

新空间只有300M，旧空间有3500M？
你应该扩大新空间的大小。
如果可能，请提供您的 jvm arg？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:10:28.023

拥有一个大的伊甸园空间非常便宜，昂贵的是复制保留的对象。

在较短的时间内，您保留了（第二种尺寸）

```
346199K->73301K, 0.0127033 secs 
```

在你更长的时间里，你保留了更多

```
1304066K->1031418K(3549952K), 0.9100161 secs 
```

即在第一种情况下，GC 花费的时间更长，因为您保留了更多数据。

在这些情况下，我尝试的第一件事是增加伊甸园的大小，希望在收集发生之前有更多的对象会死掉。

# php - 检查获取的数组是否为空或不是PHP？

> ID：11790617
> 
> 赞同：4
> 
> 时间：2012-08-03T06:45:55.257
> 
> 标签：php, mysql

我正在尝试检查 mysql_fetch_array() 函数是否返回空数组。但是我的代码似乎不起作用。在这里，我想确保如果数组为空，我想显示正在建设的消息。

代码 ：

```
$queryContents= queryMembers();
$exeQuery = mysql_query($queryContents);
while($fetchSet = mysql_fetch_array($exeQuery)) {
   if(count($fetchSet) == 0) {
     echo "This Page is Under Construction";
   }else{
     // something else to display the content
   }
} 
```

如何检查以实现此类功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T06:49:17.043

使用 mysql_num_rows 来计算行数。尝试这个。

```
$exeQuery = mysql_query($queryContents);

if(mysql_num_rows($exeQuery)== 0){
   echo "This Page is Under Construction";
}
else{
   while($fetchSet = mysql_fetch_array($exeQuery)) {

     // something else to display the content

   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T06:49:18.727

你真的应该使用`mysql_num_rows` [http://us2.php.net/manual/en/function.mysql-num-rows.php](http://us2.php.net/manual/en/function.mysql-num-rows.php)

但是，附带说明一下，您应该改用 php `empty()`。[http://us2.php.net/empty](http://us2.php.net/empty)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T06:53:17.433

> 当您使用 mysql_fetch_array() 时，它会在您使用 while 循环时一一返回数据集中的行。

*如果没有记录，则不会执行while循环。在这种情况下，声明一个布尔变量并在它进入 while 循环时使其为真。喜欢：*

> ```
> $queryContents= queryMembers();
> $exeQuery = mysql_query($queryContents);
> $recordExists = 0;
> while($fetchSet = mysql_fetch_array($exeQuery)) {
>      if($recordExists == 0 )
>        $recordExists = 1;
>      // something else to display the content
> 
> }
> 
> if($recordExists == 0 ){
>     echo "This Page is Under Construction";
> } 
> ```

*希望这有效！*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T06:52:18.013

你可以这样做：

```
while($r[]=mysql_fetch_array($sql));
// now $r has all the results
if(empty($r)){
  // do something
} 
```

来源：[php文档](http://www.php.net/manual/en/function.mysql-fetch-array.php#105221)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T06:49:59.710

尝试这个

```
if(empty($fetchSet) 
{
   echo "This Page is Under Construction";
}
else
{
 // something else to display the content
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T06:55:42.710

如果没有结果，您在 while 循环中的代码永远不会运行。如果没有更多结果，mysql_fetch_array 返回 null/false。你需要做的是先检查mysql_num_rows，然后再检查。

```
$queryContents= queryMembers();
$exeQuery = mysql_query($queryContents);

 if(mysql_num_rows ($exeQuery) == 0) {
     echo "This Page is Under Construction";
 }

while($fetchSet = mysql_fetch_array($exeQuery)) {
    // something else to display the content
} 
```

# javascript - Javascript window.postmessage() 帮助 - 不懂用法

> ID：11790627
> 
> 赞同：0
> 
> 时间：2012-08-03T06:46:33.750
> 
> 标签：javascript, web

我打算利用 websockets 来制作一个特定于域的聊天工具。到目前为止我有这个代码：

```
<!doctype html>
<html>
<head>
  <title>Chatroom Dev Stage</title>
  <script type="text/javascript">
      function submit(form) {
    var win=document.getElementbyId(iframe).contentWindow
    win.postmessage(form.msg.value, 
<body>
<h3>Conversation:</h3>
<iframe height="150px" width="300px" id="iframe"></iframe> 
<br>
<form name="sendmsg">
   <input type="text" id="msg"></input>
   <button onclick="submit()">Send</button>
</form>
</body>
</html> 
```

它会创建一个 iframe 来显示对话中的消息。这`<input> messagebox`将是用户输入消息的地方。这将完全基于客户端，不会附加或访问服务器。

问题：我不明白如何通过网络将消息发送到另一台计算机（命令的语法、IP 地址等）以及如何使用命令`window.postmessage()`。

PS - 作为一个新用户，有人可以告诉我，如果需要的话，我可以如何改进我的道德问题，以防它不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:01:24.937

您可以将要发送的内容放入 json 对象中（http://www.json.org/js.html）

并使用 AJAX 调用将其发送到 wifi 网络中的另一台计算机：http: [//www.degraeve.com/reference/simple-ajax-example.php](http://www.degraeve.com/reference/simple-ajax-example.php)

# mysql - 为什么 MySQL 查询中的三行顺序不正确？

> ID：11790636
> 
> 赞同：3
> 
> 时间：2012-08-03T06:47:08.360
> 
> 标签：mysql, sql, sql-order-by

我不知道这是 MySQL 的错误还是我的错，但它真的开始让我感到不安。

为了得到用户的答案，我使用了这个查询（这也确保问题没有被删除或隐藏）：

```
 SELECT *
    FROM answers a
    JOIN questions q
      ON a.questionid = q.qid
   WHERE a.userid = <uid> -- query parameter
     AND a.deleted = 0
     AND q.hidden = 0
     AND q.deleted = 0
ORDER BY a.created DESC 
```

问题是所有答案都按创建时间的时间戳排序，*除了*其中三个。在我个人资料上的答案截图中，查看“这个问题的排序有问题......”的问题的答案日期：

![在此处输入图像描述](../Images/ae2961613b671adc5d30f133f50db775.png)

我真的不知道发生了什么。如您所见，MySQL 查询具有`ORDER BY a.created DESC`.

* * *

**我尝试了什么？**

好吧，我已经尝试了很多东西，比如回显存储在数据库中的 Unix 时间戳，它们都是正确的。

我尝试的另一件事是调用`strtotime()`时间戳，但这只会给我带来更多问题：第一个奇怪地变成了一个巨大的负数并显示*1717 年 8 月 3 日，*但其他的被设为空白，因此显示为*1969 年 12 月 31 日*。

* * *

### 编辑

看起来其他几行也混在一起了。

* * *

### 解决方案

我发现`questions`表格和`answers`表格都有一`created`列。我通过这样做解决了这个`SELECT *, a.created as ans_created, q.created as q_created`问题，现在它可以工作了。感谢所有帮助过的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:17:06.533

我只是想回答我自己的问题，因为我弄清楚了问题所在。

我发现问题表和答案表都有一`created`列。

**问题是我`a.created`在查询中按顺序排序，但由于在 PHP 中我显示了`$row['created']`正确排序的日期，但显示的日期/时间不正确。**

我通过这样做解决了这个问题......

```
SELECT *, a.created as ans_created, q.created as q_created 
```

然后在我的 PHP 中我只是这样做`$row['ans_created']`。

感谢所有在评论和其他答案中提供帮助的人。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:06:42.413

尝试`CAST`列为`a.created`：

```
ORDER BY CAST(a.created AS DATETIME) DESC; 
```

如果您使用的是 INT 字段，请尝试：

```
ORDER BY CAST(a.created AS UNSIGNED INTEGER) DESC; 
```

# nlp - 基于词典的文本分析。有什么算法可以进行概率类别分配吗？

> ID：11790638
> 
> 赞同：0
> 
> 时间：2012-08-03T06:47:14.527
> 
> 标签：nlp

我正在使用基于词典的方法进行文本分析。基本上，我有一长串单词，标有正面/负面/愤怒/悲伤/快乐等。我将要分析的文本中的单词与词典中的单词匹配，以帮助我确定我的文本是否是积极/消极/愤怒/悲伤/快乐等。

但我想分析的文本长度各不相同。它们中的大多数都在 100 个单词以下，但请考虑以下示例：

约翰很高兴。（“快乐”类别中的 1 个单词，得分为 33%）

约翰昨天告诉玛丽他很高兴。（12.5% 快乐）

因此，比较不同的句子，我的第一句话似乎比我的第二句话更“快乐”，仅仅是因为句子更短，并且与“快乐”这个词的比例不成比例。

有没有一种算法或计算方法可以让我进行更公平的比较，也许是考虑到句子的长度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:07:17.537

正如许多人指出的那样，您必须深入到句法树，类似于[这项工作](http://erg.delph-in.net/logon)。

![语法分析](../Images/ede6dc575aa389a4b562d2975937d2e5.png)

另外，请考虑一下：
约翰昨天告诉玛丽**他**很高兴。
约翰昨天告诉玛丽**她**很高兴。

第二个没有说明约翰的幸福，但天真的算法很快就会被混淆。因此，除了语法解析之外，*代词还必须表示与主题的链接*。特别是，这意味着算法应该知道 John 是`he`和 Mary 是`she`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:00:55.357

忽略由 提出的否定问题`HappyTimeGopher`，您可以简单地将句子中快乐词的数量除以句子的长度。你得到：

约翰很高兴。（“快乐”类别中的 1 个单词 / 句子中的 3 个单词 = 快乐得分为 33%）

约翰昨天告诉玛丽他很高兴。（1/8 = 12.5% 快乐）

请记住，基于单词列表的方法只会走这么远。“我对食物很满意，但服务员很糟糕”的分数应该是多少？考虑使用更复杂的系统——以下论文是您开始研究的好地方：

*   Choi, Y. 和 Cardie, C. (2008)。使用组合语义学习作为次句子情感分析的结构推理。
*   Moilanen, K. 和 Pulman, S. (2009)。多实体情绪评分。
*   Pang, B. 和 Lee, L. (2008)。意见挖掘和情绪分析。
*   Pang, B.、Lee, L. 和 Vaithanathan, S. (2002)。竖起大拇指？：使用机器学习技术进行情绪分类。
*   Turney, PD 和 Littman, ML (2003)。衡量赞美和批评：从联想中推断语义方向。

# security - 有没有办法让 phonegap 应用程序更安全？

> ID：11790642
> 
> 赞同：1
> 
> 时间：2012-08-03T06:47:21.990
> 
> 标签：security, cordova

我已经使用 phonegap 创建了一个适用于 android 的应用程序，但我担心我编写的代码会变得多么安全……复制代码并从中构建另一个应用程序似乎相当容易……我怎样才能让它更安全？我一直在四处寻找，但还没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:53:44.073

您可能想参考[http://wiki.phonegap.com/w/page/43660891/Security](http://wiki.phonegap.com/w/page/43660891/Security)

或者你想让你的应用闭源？？？

# samsung-smart-tv - 三星 SmartTV 应用发布

> ID：11790643
> 
> 赞同：2
> 
> 时间：2012-08-03T06:47:22.753
> 
> 标签：samsung-smart-tv

我已经构建了一个三星智能电视应用程序，我需要知道我必须一步一步地做什么才能发布该应用程序。我推荐了[这个](http://seller.samsungapps.com)

并在[seller.samsung](http://seller.samsungapps.com)中继续， 但我没有获得智能电视的应用程序ID（实际上我没有在[seller.samsung](http://seller.samsungapps.com)中找到继续使用智能电视的选项）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:03:02.290

登录卖家账户后，点击`TV`屏幕右上角的链接。之后，您应该会`Support`在带有选项的菜单栏中看到元素`Add new application`。单击该按钮并按照所有说明进行操作，您应该会获得应用程序 ID。

# java - 在 Java 中使用 BufferedImage 查看大图像

> ID：11790644
> 
> 赞同：1
> 
> 时间：2012-08-03T06:47:22.473
> 
> 标签：java, image

我目前有一个图像作为 BufferedImage 加载到程序中。这个 BufferedImage 被放在一个具有固定大小的 JPanel 类中。

现在我面临的问题是如何在这个固定大小的 JPanel 中平移这个大的 BufferedImage。

JPanel 尺寸肯定小于图像。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:53:08.250

首先，将一些滚动条附加到 JPanel（南和东，使用 a `BorderLayout`），只有在图像太大和/或太高时才可见。`JPanel`在剩余空间（中心）附加另一个。在那个内部`JPanel`，您将覆盖该`paintComponent`方法并将您的部分绘制`BufferedImage`到`JPanel`. 使用滚动条的偏移量来偏移图像，并使用内部`JPanel`来绘制宽度和高度（视口）。

**注意：**只要滚动条的值发生变化，您的滚动条就会调用`repaint`您的内部方法。`JPanel`

`paintComponent`每当需要重绘图像时，系统会自动（或手动）调用。这样做，您将能够自定义您为图像提供的视图（如果需要此类功能）；旋转、缩放、像素操作、自定义叠加等。

您还可以将一些[MouseMotionListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseMotionListener.html)附加到内部`JPanel`并根据鼠标移动修改滚动条的偏移量（修改滚动条将自动触发图像上的重绘）以与您的组件进行鼠标交互。只是一个想法。

# java - 等待空闲对象Apache连接池超时

> ID：11790653
> 
> 赞同：4
> 
> 时间：2012-08-03T06:48:01.330
> 
> 标签：java, mysql, apache, connection-pooling

我使用 ConnectionPool 创建了一个池，如下所示：

我创建了一些任务以从数据库中获取连接并执行它们。我只运行我的应用程序 3 次，我的应用程序抛出异常。

```
PoolableObjectFactory mySqlPoolableObjectFactory = new MySqlPoolableObjectFactory(
            host, dbName, user, password);
    Config config = new GenericObjectPool.Config();
    config.maxActive = 10;
    config.testOnBorrow = true;
    config.testWhileIdle = true;
    config.maxIdle = 5;
    config.minIdle = 1;
    config.maxWait = 10000;
    config.timeBetweenEvictionRunsMillis = 10000;
    config.minEvictableIdleTimeMillis = 60000;

    GenericObjectPoolFactory genericObjectPoolFactory = new GenericObjectPoolFactory(
            mySqlPoolableObjectFactory, config);
    return genericObjectPoolFactory.createPool();

public Connection getConnectionFromPool() {

    Connection conn = null;

    try {

        conn = (Connection) connPool.borrowObject();

    } catch (Exception e) {

        e.printStackTrace();

    }

    return conn;
} 
```

但是当我运行很多线程时。它抛出异常

```
java.util.NoSuchElementException: Timeout waiting for idle object
    at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1174)
    at vn.vccorp.bigdata.mysql.AdmarketPool.getConnectionFromPool(AdmarketPool.java:76) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:25:51.927

```
 config.maxWait = 10000;
 config.timeBetweenEvictionRunsMillis = 10000;
config.minEvictableIdleTimeMillis = 60000; 
```

这些设置组合起来没有意义。您将只等待 10 秒来获得一个池条目，但您只会每 10 秒驱逐一次它们。驱逐需要比这更频繁地发生。这些默认值分别为 30 秒和 5 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:34:34.133

我检查了我的代码，在某些情况下我错过了 returnObject。谢谢安德烈鲍里索夫

# python - 使用python在文本文件中查找区分大小写的单词

> ID：11790656
> 
> 赞同：-3
> 
> 时间：2012-08-03T06:48:14.093
> 
> 标签：python

我有一个文本文件需要使用 python 在文件中搜索它可能是大写或小写字母

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:56:00.800

如果您希望我们花时间回答这个问题，也许您应该花更多的时间来写这个问题。不过，据我了解，您正在寻找这样的东西：

```
import sys

with open(sys.argv[0], "r") as f:
    for row in f:
        for chr in row:
            if chr.isupper():
                print chr, "uppercase"
            else:
                print chr, "lowercase" 
```

# grails - Grails gorm 如何为每个具体类插入表，其中每个具体类都继承一个抽象类

> ID：11790657
> 
> 赞同：2
> 
> 时间：2012-08-03T06:48:21.323
> 
> 标签：grails, grails-orm

大家好，以下是我有一个抽象类 AbstractProfile 和一个具体类 GoogleProfile 的情况

```
abstract class AbstractProfile  {
    .....
}

class GoogleProfile extends AbstractProfile { 

    ......
} 
```

我正在使用 grails，但 gorm 没有为 google 个人资料插入表格 当前 gorm 只为 AbstractProfile 类插入表格 请帮助提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-03T19:06:22.107

我做了一些挖掘，发现从[grails 2.3](https://web.archive.org/web/20131114094834/http://jira.grails.org/browse/GRAILS-2759)开始你有以下映射选项：

```
tablePerConcreteClass true 
```

似乎文档（即使是版本[2.4](https://web.archive.org/web/20170602021421/http://docs.grails.org/2.4.x/guide/GORM.html#inheritanceStrategies)）尚未对此进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T17:04:40.227

你可以使用这个：

```
abstract class BaseDomain {
            static mapping = {
                tablePerConcreteClass true
                id generator: 'increment'
                version false
            }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:52:17.560

Grails 2.0 保留了抽象类。为了将单个表启用到扩展类，您需要指定：

```
static mapping = {
        tablePerHierarchy       false
} 
```

到抽象类。否则，整个层次结构将“存在”在同一个表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T18:40:44.530

跟进Михаил's great answer，有两件事对我有用。

1.  将基础域类放入 src

这对我来说效果最好，因为基类和子类的约束都被应用了。子类中没有空列对我的用例很重要。但是，似乎只使用了子类中的映射块。

2.  使用`tablePerConcreteClass true`

这里的一个优点是它允许在 BaseDomain 类中声明一个索引，然后该索引出现在每个子类表中，即使用来自基类和子类的映射块。似乎只使用了基类中的约束。

```
abstract class BaseDomain {
    static mapping = {
        tablePerHierarchy false  // avoid creating the base_domain table
        tablePerConcreteClass true
        id generator: 'increment' // https://jira.grails.org/browse/GRAILS-10849
        someColumnInBaseDomain index: true  // index this column in each subclass table
    }
} 
```

# javascript - 嵌套的 Ul LI 悬停隐藏显示元素 jquery

> ID：11790659
> 
> 赞同：0
> 
> 时间：2012-08-03T06:48:38.683
> 
> 标签：javascript, jquery, html

在嵌套的 ul li 中，我需要在 li 悬停时显示编辑和更新链接。我有为我做这件事的 jquery 代码。当我从上到下遍历时，Jquery 工作正常，但是当我从下到上遍历时，它不能按预期工作并显示父 li 的隐藏 div。

我只想显示悬停 li 的跨度。这是必需的。

```
<ul id="tree">
<li><span>Mobile </span>&nbsp; <span class="links" style="display: none;">Hey Hi, YOu
    caught me!!!</span>
    <ul class="subItem">
        <li><span>GSM Mobiles </span>&nbsp; <span class="links" style="display: none;">Hey Hi,
            YOu caught me!!!</span> </li>
        <li><span>Smart Mobiles </span>&nbsp; <span class="links" style="display: none;">Hey
            Hi, YOu caught me!!!</span>
            <ul class="subItem">
                <li><span>Android Mobiles </span>&nbsp; <span class="links" style="display: none;">Hey
                    Hi, YOu caught me!!!</span> </li>
                <li><span>Sabian Mobiles </span>&nbsp; <span class="links" style="display: none;">Hey
                    Hi, YOu caught me!!!</span> </li>
            </ul>
        </li>
        <li><span>Dual SIM Mobiles </span>&nbsp; <span class="links" style="display: none;">
            Hey Hi, YOu caught me!!!</span> </li>
    </ul>
</li>
<li><span>Watches </span>&nbsp; <span class="links" style="display: none;">Hey Hi, YOu
    caught me!!!</span>
    <ul class="subItem">
        <li><span>Chronograph Watches </span>&nbsp; <span class="links" style="display: none;">
            Hey Hi, YOu caught me!!!</span> </li>
        <li><span>Water Resistance </span>&nbsp; <span class="links" style="display: none;">
            Hey Hi, YOu caught me!!!</span> </li>
    </ul>
</li>
</ul> 
```

我的 jQuery 代码在这里：

```
$('ul li').hover(function () {
            $("ul>li>span.links").hide();
            $(this).find("span.links").first().show();
        }, function () {

            $("ul>li>span.links").hide();
            $(this).find("span.links").first().hide();

        }); 
```

**这是** [jsFiddle](http://jsfiddle.net/rajanrawal/em79t/) **链接**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:57:08.653

打印出 $(this) 我注意到，您正在选择内部和外部列表，请在选择器中更具体：

```
$('#tree ul li').hover(function () {
   $("ul>li>span.links").hide();  

    $(this).find("span.links").first().show();
}, function () {
    $("ul>li>span.links").hide();
    $(this).find("span.links").first().hide();
}); 
```

# ios - 如何从覆盖按钮切换视图？

> ID：11790661
> 
> 赞同：0
> 
> 时间：2012-08-03T06:48:39.663
> 
> 标签：ios

我在覆盖层上制作了一个按钮，每次访问相机时都会加载该按钮。该按钮响应良好，我已经对其进行了测试以查看它是否是选择器的问题。我是 100% 选择器没有问题（它响应 NSLog 字符串）。

我想在每次按下它时调出一个新视图，但即使我使用了各种各样的方法，它也没有做任何事情。我的想法已经用完了，我尝试了很多方法，但都没有奏效，我的意思是没有。我确保我已经正确导入了框架，我什至创建了新项目，并从第一步重新进行了所有操作，以确保原始项目没有问题。

```
}

- (UIView*)CommomOverlay  {
//Both of the 428 values stretch the overlay bottom to top for overlay function. It
doesn't cover it. 
UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,430)];
UIImageView *FrameImg = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,430)];

[FrameImg setImage:[UIImage imageNamed:@"newGraphicOverlay.png"]];
FrameImg.userInteractionEnabled = YES;

UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
myButton.frame = CGRectMake(20, 20, 200, 44); // position in the parent view and set the
size of the button
[myButton setTitle:@"Click Me!" forState:UIControlStateNormal];
// add targets and actions
[myButton addTarget:self action:@selector(buttonPressed) 
forControlEvents:UIControlEventTouchUpInside];

[view addSubview:FrameImg];
[view addSubview:myButton];

return view;

} 
```

以下在我的 -(void)buttonPressed 方法中不起作用：

```
UIViewController *viewControllerName = [[UIViewController alloc] initWithNibName:
(NSString *) bundle:(NSBundle *)]; 
```

# git - 如何提交和/或添加未更改的文件？

> ID：11790671
> 
> 赞同：3
> 
> 时间：2012-08-03T06:49:19.203
> 
> 标签：git, github, git-commit, git-add

我有一种情况，我修改的文件没有显示为修改后的文件。

我还能提交那个文件吗？

我可以将列为未更改文件的文件添加到已更改文件吗？谢谢！

更新：当我尝试添加文件时，终端给出了这样的错误：

```
The following paths are ignored by one of your .gitignore files:
folderpath/filename.java
Use -f if you really want to add them.
fatal: no files added 
```

但是当我打开我的**.gitignore**文件时：

```
bin
gen
#built application files
*.apk
*.ap_

# files for the dex VM
*.dex

# Java class files
*.class

# generated GUI files
*R.java

# Mac OS file
.DS_Store 
```

和**信息/排除**

```
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~ 
```

我非常确定我的文件夹路径及其文件名不包含在 .gitignore 和排除文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:20:20.740

git 不会跟踪未跟踪文件中的更改。

所以首先要确保你的文件实际上是被 git 跟踪的。其他人已经详细说明了为什么您的文件可能会被输入（`.gitignore`，，`.git/info/exclude`...）

然后确保您的文件确实包含更改（似乎很明显）。您对文件做了哪些更改？请注意，您可以将 git 配置为忽略对 EOL 的更改，因此通过将 CRLF 更改为 LF 来修改文件不符合“要提交的更改”的条件。检查[这个](https://stackoverflow.com/questions/861995/is-it-possible-for-git-merge-to-ignore-line-ending-differences)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:18:40.957

您发布`.gitignore`的内容并未表明该文件已被忽略，但`.gitignore`工作副本中不仅存在您定义要忽略的文件的文件。

有关与忽略事物相关的文件和情况的概述，请参阅[此答案。](https://stackoverflow.com/a/11774567/520162)

尽管如此，你从 git 得到的信息很清楚：如果你不想找到文件被忽略的原因，`Use -f if you really want to add them.`

* * *

**编辑：**
如果您绝对确定您检查了所有`.gitignore`s，请仔细查看`.gitignore`. 例如，您的`.gitignore`包含模式`gen`。如果在 找到您更改的文件`mygenerator/myfile.java`，则`gen`模式将匹配`my`**gen**`erator`并忽略更改...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:52:18.177

我正在检查您的初始来源`.gitignore`：[https ://github.com/github/gitignore/blob/master/Android.gitignore](https://github.com/github/gitignore/blob/master/Android.gitignore)

我脑海中突然冒出一个想法：您正在使用以下模式：

```
bin
gen 
```

当他们使用

```
# generated files
bin/
gen/ 
```

区别是微不足道的——`/`但您的规则不仅可以匹配文件夹，还可以匹配文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T07:02:44.277

请检查：您修改的文件可能与`.gitignore`存储库根目录中的文件模式匹配。如果发生这种情况，文件将“超出范围” `git`。

# jquery - jQuery动态命名变量

> ID：11790672
> 
> 赞同：0
> 
> 时间：2012-08-03T06:49:20.670
> 
> 标签：jquery, variables

我正在编写代码，也许我的方法在“for”循环中工作是错误的。就这个：

```
for(var index = 0; index < $('div.parent').find('div.child').length; index++){
    var element[index] = $('div.parent').find('div.child').eq(index);
    // some code
} 
```

代码应如下所示：

```
for(var index = 0; index < $('div.parent').find('div.child').length; index++){
    var element1 = $('div.parent').find('div.child').eq(1);
    // some code with element1
    var element2 = $('div.parent').find('div.child').eq(2);
    // some code with element2   
} 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:54:00.463

您不能动态创建某个名称的变量。您将需要使用一个数组：

```
var elements = [];
var children = $('div.parent').find('div.child');
for(var index = 0; index < children.length; index++){
    elements.push( children.eq(index) );
    // some code
}

//reference by:
elements[0];
elements[1];
// etc. 
```

或者使用 jQuery 更简单：

```
var elements = $('div.parent').find('div.child').toArray(); 
```

# ruby-on-rails - 当我将我的应用程序移动到不同的服务器时，删除每当 gem 添加的 cron 作业？

> ID：11790676
> 
> 赞同：0
> 
> 时间：2012-08-03T06:49:51.893
> 
> 标签：ruby-on-rails, ruby, cron, crontab, whenever

假设我在服务器 A 上运行我的 rails 应用程序。我还启动了一些使用when gem 添加的 cron 作业。

现在，如果我想将我的应用程序转移到服务器 B，有没有办法自动停止（或删除）在服务器 A 上运行的 cron 作业并在服务器 B 上启动它们。

# java - 正则表达式查询（运行时可定制）

> ID：11790677
> 
> 赞同：0
> 
> 时间：2012-08-03T06:49:55.283
> 
> 标签：java, regex

我有一个特殊要求，我的正则表达式模式将在运行时确定，例如我有一个日期并希望对其进行检查，或者基本上`mm-dd-yyyy`我将把模式作为一个数字和一个字母来输入表达式可以是任何东西。我们可以编写任何适用于这种要求的正则表达式吗？`mm/dd/yyyy``d.mm.yyyy``NN-NN-TTTT``N``T`

我的表单看起来像[http://jsfiddle.net/E2EHZ/](http://jsfiddle.net/E2EHZ/)中显示的数据将匹配对应于文本框中指定的模式

`T`- 字母
`N`- 数字
`A`- 字母数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:12:13.750

所以基本上你会让你的用户输入一个包含`T`,`N`或`A`作为占位符的模式，其他字符需要在两者之间进行字面匹配？如果是这样，那么这很容易：只需用适当的字符类替换占位符，引用其余部分（因此正则表达式元字符被转义）并将结果用作正则表达式。

首先逃避一切*不是* `A`，`N`或`T`。如何做到这一点因语言而异，但基本上你会用`[^ANT]+`匹配的转义版本替换。在 C# 中，它可能看起来像这样：

```
Regex.Replace(s, "[^ANT]+", m => Regex.Escape(m.Value)); 
```

或在 Java 中：

```
s.replaceAll("[^ANT]+", "\\Q$0\\E" 
```

然后执行的翻译很容易：

```
T → [a-zA-Z]
N → [0-9]
A → [0-9a-zA-Z] 
```

也就是说，假设只有 ASCII。对于 Unicode，您可能想要

```
T → \p{L}
N → \p{Nd}
A → [\p{L}\p{Nd}] 
```

反而。另请注意，如果您执行简单的字符串替换，您需要先替换`A`为 ASCII 版本，然后`N`首先替换为 Unicode 变体，以避免在后续结果中替换它。

最后，如果要匹配完整的字符串，您可能希望在字符串`^`前面加上后缀。`$`

C# 中的示例实现（进行了微小的优化）：

```
string CreateRegex(string pattern) {
  string result = Regex.Replace(pattern, "[^ANT]+", m => Regex.Escape(m.Value));
  result = Regex.Replace(result, "A+", m => "[0-9a-zA-Z]" + (m.Length > 1 ? "{"+m.Length+"}" : ""));
  result = Regex.Replace(result, "T+", m => "[a-zA-Z]" + (m.Length > 1 ? "{"+m.Length+"}" : ""));
  result = Regex.Replace(result, "N+", m => "[0-9]" + (m.Length > 1 ? "{"+m.Length+"}" : ""));
  return "^" + result + "$";
} 
```

例如导致以下结果：

```
NN-NN-TTTT → ^[0-9]{2}-[0-9]{2}-[a-zA-Z]{4}$
*(@&#^(&%(@  AA-AA-NN-TTTTTTTT lreglig → \*\(@&\#\^\(&%\(@\ \ [0-9a-zA-Z]{2}-[0-9a-zA-Z]{2}-[0-9]{2}-[a-zA-Z]{8}\ lreglig 
```

或者在 Java 中（没有说优化，因为我不知道如何使用函数作为替换）：

```
String createRegex(String pattern) {
  String result = pattern.replaceAll("[^ANT]+", "\\Q$0\\E");
  result = result.replaceAll("A", "[0-9a-zA-Z]");
  result = result.replaceAll("T", "[a-zA-Z]");
  result = result.replaceAll("N", "[0-9]");
  return "^" + result + "$";
} 
```

生成的正则表达式会更长一些，因为上面的代码不会对相同的标记使用重复。

# asp.net-mvc-3 - 在大型 Web 项目中使用 WCF 的位置

> ID：11790678
> 
> 赞同：-1
> 
> 时间：2012-08-03T06:49:56.123
> 
> 标签：asp.net-mvc-3, wcf

我们正计划在 web 中开发一个大型应用程序，我们目前的计划是为业务层中的每个类创建一个 WCF 服务。这有效吗？我想知道在大型 Web 应用程序中我们可以在哪里使用 WCF 以及使用它的主要优点

我们有这些项目

```
1) MVC3 with Razor that handles UI 

2) Class Library Project that communicate with Database

3) WCF Project 
```

我们使用的方法

```
1)Creates UI and Model  in MVC 

2)Makes dll that communicate with UI (eg:Save function/Update function) using ClassLibrary Project

3)The Class Library Created is Added (Added to Bin) in WCF Project 

4) Builds the WCF and Host It in Server

5) The Hosted Service is Used in MVC Project for Communication with DB 
```

我们的技术负责人说它重量轻且更安全，但我想知道他为什么说要`WCF`用于整个应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:59:30.000

首先问这个问题，为什么需要服务层，什么时候可以通过单独的应用程序来实现。如果您只想通过松散耦合来实现这一点，那么它没有任何意义。

在我看来，服务层对于公开您的数据（dal-layer）而不是业务层很有用。以推特为例。Twitter 通过 Web 服务公开它的数据。您对数据的处理完全是您的解释。许多应用程序可以通过 HTTP 使用这些数据。因此，您的客户端可以位于远程，并且不需要与您的应用程序位于同一台服务器上。业务层可以根据数据的解释而改变。消费者则需要担心最新的更改，包括最新的 DLL。它只会消耗网络服务。模拟您的服务也很容易，然后您可以在业务层上非常轻松地编写 NUnits 测试。我还建议你看看**ASP.Net Web API**，它提供了公开服务和数据的宁静方式（具有将其公开为 JSON 的内置能力）。RestFull 服务比 WCF 有很多优点，比如你不必担心 WSDL 等。接口始终保持不变。使用 RestFul 服务非常容易。

再次与 Twitter 示例一样。使用 twitter api 的客户端不在同一台服务器上。因此，通过 HTTP 公开它是有意义的。但是，如果您没有这样的要求（客户端不在远程位置），那么通过 Web 服务公开您的数据是没有意义的。然后一个单独的应用程序将为您提供松散耦合，这对您来说应该足够好。在 HTTP 上公开数据也会对性能产生一些影响。

**更新 2**

我了解您尝试实施的方案，我认为它完全可以。他的意思是轻量级，从您的 WCF 服务中，他将与数据库进行交互，然后根据要求为每个操作和控制器发送轻量级 DTO。所以基本上你的 WCF 只会从你的类库中调用方法，会获取一些业务对象并将其转换回 DTO（根据你的操作来呈现 UI）并将其发送到控制器。

还要确保你为你的服务使用依赖注入，这样你就可以用模拟数据为你的控制器编写 NUnit 测试，因此不需要数据库来运行你的 NUnit

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:53:16.470

我的偏好是让服务层成为一个完全独立的应用程序，可以被许多应用程序使用。它使项目，尤其是大型项目，比在单个 Web 应用程序中创建服务层更容易扩展。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T07:25:50.260

很遗憾的告诉你。使用 WCF 效率较低。使用 WCF 的主要目的是让任何客户端应用程序都可以访问您的数据。不仅仅是网络应用程序。您可能还拥有 Silverlight 或 winform。WCF 与“A BIG”网络应用程序无关。

# java - 将 Java 应用程序的动态数据从英语翻译成多语言

> ID：11790679
> 
> 赞同：1
> 
> 时间：2012-08-03T06:49:56.597
> 
> 标签：java, jquery, hibernate, struts-1

我正在尝试使用 struts(i18n) 将一个 java 项目转换为不同的语言（即德语）。但我无法转换动态数据，即来自数据库的菜单。使用 i18n 概念，我更改了静态内容，但没有更改动态内容。请给出这个问题的任何解决方案。

# jquery - coffeescript 总是返回响应对象

> ID：11790685
> 
> 赞同：0
> 
> 时间：2012-08-03T06:50:33.093
> 
> 标签：jquery, ajax, coffeescript

我在咖啡脚本中有以下代码

```
getSection = (url) ->
  req = $.getJSON url
  return req.success (data) ->
    data.section 
```

或者，

```
getSection = (url) ->
  req = $.getJSON url
  req.success (data) ->
    data.section 
```

我打算返回`data.section`函数`getSection`。但它总是返回另一个对象（可能是响应/ajax 对象）。如何强制从这个内部函数返回 data.section 中的值？

提前致谢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:26:07.967

[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)是一个 AJAX 调用，**A**代表**异步**，因此`getSection`将在`$.getJSON`从服务器返回其响应之前返回。基本上，除非您想替换并执行同步（即非异步）调用，否则您无法`getSection`返回；但是，同步调用是邪恶的并且正在被弃用，所以你不应该使用它们。`data.section``$.getJSON`[`$.ajax`](http://api.jquery.com/jQuery.ajax/)

通常的解决方案是将回调传递给`getSection`：

```
getSection = (url, callback) ->
  req = $.getJSON url
  req.success (data) ->
    callback(data.section) 
```

然后你把你的逻辑放进去，`callback`而不是试图用`getSection`返回值做一些事情。

您`getSection`正在返回`req`，因为这就是[`req.success`](http://api.jquery.com/jQuery.ajax/#jqXHR)返回的内容，CoffeeScript 函数返回它们的最终值。

# sharepoint-2010 - sharepoint 2010 中的自定义页面

> ID：11790686
> 
> 赞同：0
> 
> 时间：2012-08-03T06:50:34.643
> 
> 标签：sharepoint-2010

我们目前正在开发小型 SharePoint 项目。

根据我们的要求，我们需要使用额外的下拉列表来实现自定义签入页面以选择文件状态。

想知道我们是否可以自定义默认签到页面？如果是，如何？如何重定向到自定义页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:53:36.023

我会争辩说，在签入状态下应用元数据的目的是什么？这可以是文档的元数据属性吗？如果是这样，它可以很容易地在文档栏内的大多数办公客户端中进行设置。允许他们保留其内置的办公客户端功能。如果不是这种情况。我建议使用客户端对象模型来构建一个自定义操作来设置这个值，然后签入文件。这比创建自定义操作页面要容易得多

# objective-c - 如何解决 ldap.h 文件中用于 Objective-C 代码的函数的链接器错误

> ID：11790692
> 
> 赞同：0
> 
> 时间：2012-08-03T06:50:53.673
> 
> 标签：objective-c

在这里，我正在尝试使用 LDAP 对用户进行身份验证。这是我的一些代码。

# 进口

在这里，我正在初始化 ldap 部分。

```
 LDAP          *ld;
 printf( "Connecting to host %s at port %d...\n\n", HOSTNAME, 
       PORTNUMBER );
 if ( (ld = ldap_init( HOSTNAME, PORTNUMBER )) == NULL ) {
    perror( "ldap_init" );
    return( 1 );
} 
```

我收到以下错误：

架构 x86_64 的未定义符号：“_ldap_init”，引用自：main.o 中的 _main ld：未找到架构 x86_64 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

绝对我需要添加-lldap 库的引用。由于我是这个objective-c 的新手，我在添加库时遇到了一些问题。

请指导我。

谢谢。

# c++ - 我在 Visual Studio 2008 中看不到俄语字母

> ID：11790695
> 
> 赞同：5
> 
> 时间：2012-08-03T06:51:08.967
> 
> 标签：c++, unicode, visual-studio-2008, console

我正在尝试在 Visual Studio 2008 中输出俄语单词。我写道：

```
#include <iostream>
#include <locale.h>
using namespace std;

void main()
{
    setlocale(LC_ALL,"rus");
    cout << "Я хочу видеть это по-русски!";
} 
```

当我在 Visual Studio 中按`Ctrl`+`S`保存文件时，我收到以下提示：

> 此文件中的某些 Unicode 字符无法保存在当前代码页中。您想将其保存为 unicode 吗？

我选择了“使用其他编码保存”选项并选择了“西里尔文 (Windows) - 代码页 1251”。但是，当我运行我的程序时，控制台输出显示如下：

```
???????? ??? ???? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:07:20.320

问题是您没有使用 Unicode 字符集（@ Bình Nguyên 已经提到的 wstring、wcout）。有两种方法可以解决这个问题：

1\. 使用 unicode 字符集。
2\. 转到控制面板 -> 区域和语言 -> 管理选项卡 -> 非 Unicode 程序的语言 -> 更改系统区域设置... -> 选择俄罗斯。

# asp.net - 当用户数量增加时，ASP 网站运行缓慢

> ID：11790697
> 
> 赞同：0
> 
> 时间：2012-08-03T06:51:31.353
> 
> 标签：asp.net, performance

我需要你的一些信息。我在应用程序中使用了 session.TimeOut=540。一段时间后这是否会影响我的应用程序性能。当用户数量增加时，它会变得非常慢。单击按钮的响应时间也几乎超过 2 分钟。这托管在应用程序池的服务器中。我不太了解应用程序池。如果会话超时是问题，我将删除它。请建议我的方式更多的用户。 ![在此处输入图像描述](../Images/ca5ddb20596f7bb2b4288f96da0b6bab.png)

Job Numbers,CustomerID,Tasks 将来自一个数据库。当用户单击开始按钮时，数据保存在另一个数据库中。我需要这需要为更多用户提供更快的速度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:12:03.567

1.  找出时间花在哪里

    以您所说的“单击按钮超过 2 分钟”的方法添加[秒表](http://msdn.microsoft.com/zh-cn/library/system.diagnostics.stopwatch.aspx)。您可以找到花费最多时间的语句。

2.  如果是对数据库的查询，则需要花费时间。检查你的 sql 语句。

    您是否使用“SELECT Count(*)”而不是“SELECT Count(Id)”？* 总是较慢。另外，不要尝试“SELECT * FROM....”

3.  使用缓存。

    有很多方法可以做缓存。在 ASPX 页面和您的业务层中。[OutputCache](http://msdn.microsoft.com/en-us/library/hdxfb6cy.aspx)是最简单的方法。

    并且，在用户第一次访问页面时缓存页面（例如博客文章）。

4.  你用过内存分页吗？

    在 gridview 或其他列表上进行分页时要小心。如果只调用 DataSource=xxx 和 DataBind()，即使使用 PagedDataSource，这也可能是内存分页。它花费了很多性能。请使用存储过程进行分页。

5.  检查您的服务器环境

    你在哪里部署网站？许多 ISP 会限制品牌范围和 IIS 连接数以及您帐户的 CPU 时间。

    如果您对服务器具有 RD 访问权限。当许多用户访问您的站点时，您可以查看 CPU 和内存使用情况以查看它们是否很高。如果站点速度很慢并且 CPU 和内存使用率都不高，则可能是网络品牌范围的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:55:19.417

以下是一些缩小问题范围的简单步骤 -

1) 获取可用的[HTTPWatch](http://www.httpwatch.com)（有一个免费的基本版本）并从最终用户的角度检查真正需要时间的内容。查看请求数、下载资源数和有效负载。如果没有什么可担心的，请继续下一步

2）如果它不是客户端，那么它通常是服务器上的处理时间。首先跳到 DB - 因为这很容易快速消除。查看进行了多少 DB 调用（在 staging 或 dev 中运行分析器）并查看是否有任何长时间运行的查询、缺少索引或统计信息，并注意 IO。如果一切顺利，继续前进

3) 检查您的应用程序代码。您可以在构建分析器或 Ants 等专业工具中继续使用 VS.NET。如果代码没问题，那么它是您的网络或您进行的外部调用，请检查您的网络带宽。如果您仍然无法缩小范围，请检查您的环境/硬件

实现它的最佳方法是应用负载 - 您可以使用简单的工具，例如 ab.exe（作为 Apache Web 服务器的一部分）在您的服务器上进行并发点击，并在后台运行应用程序、数据库分析器以解决问题。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:01:49.620

我认为您有一些页面需要一些时间来完成某些工作，或者由于某种原因或错误保持打开的时间比平时更长。

此页面保持锁定会话并阻止响应的其余页面，因为会话保存所有页面。

现在，随着超时时间的增加，这个页面锁定了所有内容，你的响应时间接近 2 分钟。

解决方法是找到存在长时间运行问题的页面并修复它或通过优化进程使其更快，或者如果该页面必须保持长时间运行，则禁用该页面的会话。

相对：
[在共享同一会话时处理另一个 Web 应用程序时 Web 应用程序被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)
[哪些性能计数器可用于识别 ASP.NET 瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)
[尝试使 Web 方法异步](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous/11325285#11325285)
[ASP.NET Web 窗体是否会阻止双击提交？](https://stackoverflow.com/questions/11629600/does-asp-net-web-forms-prevent-a-double-click-submission)

## 关于服务器

现在从另一方面来看，如果您的服务器受到硬件或设置错误的影响，那么[这里是另一个答案](https://stackoverflow.com/questions/6572612/checklist-for-asp-net-database-performance/6572734#6572734)，您需要检查以使其更快。

# php - 模块化站点中的上下文感知 AJAX 调用

> ID：11790698
> 
> 赞同：5
> 
> 时间：2012-08-03T06:51:52.943
> 
> 标签：php, javascript, ajax, content-management-system

**编辑：**我想到了一个可能的解决方案，但我提出了另一个问题，因为它非常具体：请参阅[AJAX proxy with PHP，这可能吗？](https://stackoverflow.com/questions/11792744/ajax-proxy-is-it-possible)

* * *

我遇到过几次这个问题...

我创建的网站具有一定程度的模块化。因此，有可能存在带有自己的 PHP 代码、CSS 和 JavaScript 的“组件”（想想粗略的 CMS），所有这些都是动态包含的。考虑如下结构：

```
{siteroot}/component/datagrid/datagrid.php
{siteroot}/component/datagrid/js/datagrid.js
{siteroot}/component/datagrid/css/datagrid.css
{siteroot}/component/datagrid/ajax/getsomedata.php 
```

现在，问题是：**对于 JavaScript 文件，特别是 AJAX 调用，我如何让它们通过 URL 进行上下文感知？** 例如，如果`datagrid.js`我想`siteroot/component/datagrid/ajax/getsomedata.php`用 AJAX 调用，我应该写（用 JQuery）：

```
$("#ajax").load("siteroot/component/datagrid/ajax/getsomedata.php"); 
```

* * *

**第一个问题**：`siteroot`不同安装的变化。我已经通过包括一名将军来做到这一点

```
var codeBase = <? echo json_encode(Config::$siteRoot); ?> 
```

在每个页面上使用 PHP，来自一个可以为每次安装轻松编辑的配置文件，所以我可以使用任何 JavaScript 之类的东西：

```
$("#ajax").load(codeBase + "/component/Datagrid/ajax/getsomedata.php"); 
```

您如何看待这种方法？

* * *

**第二个问题**：但我有返回给我的 PHP 函数还有组件文件夹或其他组件的文件夹。使**整个**URL 动态化会很好。如果我愿意，这也可以解释组件结构的变化。我发现的唯一解决方案是使用`.js.php`动态 Javascript。这很不优雅，我必须在 JavaScript 文件中包含所有框架，例如：

```
<?php
include "../../libs/framework.php"; // get my functions...
$myUrl = Config::$siteRoot . Framework::getComponentAjaxDir("datagrid") . "/getsomedata.php";
?>
$("#ajax").load(<?=json_encode($myUrl)?>); 
```

另一个副作用是我必须**确切**地知道...的`include`路径`framework.php`我不希望在我的“.js.php”文件中如此硬编码。有什么聪明的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:50:52.903

由于没有人以合适的方式回答，我回答自己是为了提供一个我发现可能有用的解决方案。我的解决方案的关键很简单：

1.  我在站点结构的固定位置创建了一个 AJAX 代理，因此我可以使用`codeBase`JavaScript 引用代理
2.  我用两个参数调用这个代理：`plugin`和`action`，它标识a）“真正的”ajax所在的插件文件夹和b）要使用的ajax文件，以及其他参数：

    $("#...").load(codeBase + "/main/ajax.php?plugin=Datagrid&action=gettable&otherparams"...)

3.  在`ajax.php`我清理参数，并使用`plugin`和`action`获取“真正的”ajax 文件：

    {serverRoot}/components/{plugin}/ajax/{action}.php

然后我只是`include`那个文件`ajax.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:49:05.387

老实说，你`problems`是现实`options`的，坦率地说，一般来说并不是那么糟糕的做法。

但是，让我们进一步探讨一下。

最好的方法是让您拥有 1 个`config.php`您可以指定的主文件`modules`，即您的数据网格等。

您可以将所有模块存储在数组变量中，如下所示：

```
$_SITE_PATH = "/var/www/html/";
$_HTTP_PATH = "http://example.com/";

$_MODULES_PATH = $_SITE_PATH."modules/"

$_MODULES = array(
    "datagrid"=>$_MODULES_PATH."datagrid/init.php",
    "something_else"=>$_MODULES_PATH."something_else/init.php"
); 
```

每个`module`都有自己的实例化目录，`init.php`这样它就可以加载所有需要的东西。

这样你就可以随心所欲地编码，当你需要一些东西时（最好是在标题状态）做这样的事情。

```
global $_MODULES;
require_once($_MODULES["datagrid"]); 
```

一切都将在需要时轻松获得，`variable`以后不会出现任何路径问题。

# image - 在matlab中找到从相机到消失点的距离

> ID：11790700
> 
> 赞同：0
> 
> 时间：2012-08-03T06:51:53.430
> 
> 标签：image, matlab, image-processing, coordinates, vanishing-point

我有这个程序可以找到给定图像集的消失点。有没有办法找到相机和消失点的距离？

此外，一旦找到消失点，我需要使用 matlab 中提供的工具手动查找 X 和 Y 坐标。如何编写将所有 X 和 Y 坐标写入文本或 excel 文件的代码段？

还有一种更好更简单的方法可以在matlab中找到消失点吗？

***Matlab调用函数找到消失点：***

```
clear all; close all;
dname = 'Height';
files = dir(dname);
files(1) = [];
files(1) = [];
for i=1:size(files, 1)
    original = imread(fullfile(dname, files(i).name));
    original = imresize(original,0.35);    
    im = im2double(rgb2gray(original)); 
    [row, col] = findVanishingPoint(im);
    imshow(original);hold;plot(col,row,'rx');
    saveas(gcf,strcat('Height_Result',num2str(i)),'jpg');
    close
end 
```

***findVanishingPoint 函数：***

```
function [row, col] = findVanishingPoint(im)

DEBUG = 0;

IM = fft2(im);
ROWS = size(IM,1); COLS = size(IM,2);

PERIOD = 2^floor(log2(COLS)-5)+2;
SIZE = floor(10*PERIOD/pi);  
SIGMA = SIZE/9; 
NORIENT = 72; 
E = 8;  
[C, S] = createGaborBank(SIZE, PERIOD, SIGMA, NORIENT, ROWS, COLS, E);

D = ones(ROWS, COLS); 
AMAX = ifftshift(real(ifft2(C{1}.*IM)).^2+real(ifft2(S{1}.*IM))).^2; 
for n=2:NORIENT
    A = ifftshift(real(ifft2(C{n}.*IM)).^2+real(ifft2(S{n}.*IM))).^2;
    D(find(A > AMAX)) = n;        
    AMAX = max(A, AMAX);        
    if (DEBUG==1)
        colormap('hot');subplot(131);imagesc(real(A));subplot(132);imagesc(real(AMAX));colorbar;
        subplot(133);imagesc(D);
        pause
end
end

if (DEBUG==2)
figure('DoubleBuffer','on');
end
T = mean(AMAX(:))-3*std(AMAX(:));
VOTE = zeros(ROWS, COLS);
for row=round(1+SIZE/2):round(ROWS-SIZE/2) 
    for col=round(1+SIZE/2):round(COLS-SIZE/2)
        if (AMAX(row,col) > T)
            indices = lineBresenham(ROWS, COLS, col, row, D(row, col)*pi/NORIENT-pi/2);
            VOTE(indices) = VOTE(indices)+AMAX(row,col);
        end
    end
    if (DEBUG==2)
        colormap('hot');imagesc(VOTE);pause;                                        
end
end
if (DEBUG==2)
close
end

M=1;
[b index] = sort(-VOTE(:));
col = floor((index(1:M)-1) / ROWS)+1;
row = mod(index(1:M)-1, ROWS)+1;
col = round(mean(col));
row = round(mean(row)); 
```

***creatGaborBank 函数：***

```
function [C, S] = createGaborBank(SIZE, PERIOD, SIGMA, NORIENT, ROWS, COLS, E)

if (length(NORIENT)==1)
    orientations=[1:NORIENT];
else
    orientations = NORIENT;
    NORIENT = max(orientations);
end

for n=orientations
    [C{n}, S{n}] = gabormask(SIZE, SIGMA, PERIOD, n*pi/NORIENT);
    C{n} = fft2(padWithZeros(C{n}, ROWS, COLS)); 
    S{n} = fft2(padWithZeros(S{n}, ROWS, COLS));
end 
```

***gabormask函数：***

```
function [cmask, smask] = gabormask(Size, sigma, period, orient, E)
if nargin < 5; E = 8; end;
if nargin < 4; orient = 0; end;
if nargin < 3; period = []; end;
if nargin < 2; sigma = []; end;
if nargin < 1; Size = []; end;

if isempty(period) & isempty(sigma); sigma = 5; end;
if isempty(period); period = sigma*2*sqrt(2); end;
if isempty(sigma); sigma = period/(2*sqrt(2)); end;
if isempty(Size); Size = 2*round(2.575*sigma) + 1; end; 

if length(Size) == 1
    sx = Size-1; sy = sx;
elseif all(size(Size) == [1 2])
    sy = Size(1)-1; sx = Size(2)-1;
else
    error('Size must be scalar or 1-by-2 vector');
end;

hy = sy/2; hx = sx/2;
[x, y] = meshgrid(-hx:sx-hx, -hy:sy-hy);

omega = 2*pi/period;
cs = omega * cos(orient);
sn = omega * sin(orient);
k = -1/(E*sigma*sigma);

g = exp(k * (E*x.*x + y.*y));   
xp = x * cs + y * sn;           
cx = cos(xp);                   
cmask = g .* cx;               
sx = sin(xp);                  
smask = g .* sx;               

cmask = cmask - mean(cmask(:));
cmask = cmask/sum(abs(cmask(:)));
smask = smask - mean(smask(:));
smask = smask/sum(abs(smask(:))); 
```

***padWithZeros 函数：***

```
function out = padWithZeros(in, ROWS, COLS)
out = padarray(in,[floor((ROWS-size(in,1))/2) floor((COLS-size(in,2))/2)],0,'both');
if size(out,1) == ROWS-1
    out = padarray(out,[1 0],0,'pre');
end
if size(out,2) == COLS-1
    out = padarray(out,[0 1],0,'pre');
end 
```

***findHorizo​​nEdge 函数：***

```
function row = findHorizon(im)
DEBUG = 2;

ROWS = size(im,1); COLS = size(im,2);
e = edge(im,'sobel', [], 'horizontal');
dd = sum(e, 2);
N=3;
row = 1; 
M = 0;
for i=1+N:length(dd)-N
    m = sum(dd(i-N:i+N));    
    if (m > M)
        M = m;
        row = i;
    end
end
imshow(e);pause 
```

***findHorizo​​n 函数：***

```
function row = findHorizon(im)
DEBUG = 2;

IM = fft2(im);
ROWS = size(IM,1); COLS = size(IM,2);

PERIOD = 2^floor(log2(COLS)-5)+2; 
SIZE = floor(10*PERIOD/pi);  
SIGMA = SIZE/9; 
NORIENT = 72; 
E = 16; 
orientations = [NORIENT/2-10:NORIENT/2+10]; 

[C, S] = createGaborBank(SIZE, PERIOD, SIGMA, orientations, ROWS, COLS, E);

ASUM = zeros(ROWS, COLS);
for n=orientations
    A = ifftshift(real(ifft2(C{n}.*IM)).^2+real(ifft2(S{n}.*IM))).^2;
    ASUM = ASUM + A;        
    if (DEBUG==1)
        colormap('hot');subplot(131);imagesc(real(A));subplot(132);imagesc(real(AMAX));colorbar;
        pause
end
end

ASUM(1:round(1+SIZE/2), :)=0; ASUM(end-round(SIZE/2):end, :)=0;
ASUM(:,end-round(SIZE/2):end)=0; ASUM(:, 1:1+round(SIZE/2))=0;
dd = sum(ASUM, 2);
[temp, row] = sort(-dd);
row = round(mean(row(1:10)));
if (DEBUG == 2)
    imagesc(ASUM);hold on;line([1:COLS],repmat(row,COLS));
    pause
end 
```

***lineImage 函数：***

```
function v = lineimage(x0, y0, angle, s) 

if (abs(tan(angle)) > 1e015)
    a(1,:) = repmat(x0,s(1),1)';
    a(2,:) = [1:s(1)];
elseif (abs(tan(angle)) < 1e-015)
    a(2,:) = repmat(y0,s(2),1)';
    a(1,:) = [1:s(2)];
else

    k = tan(angle);
    hiX = round((1-(s(1)-y0+1)+k*x0)/k);
    loX = round((s(1)-(s(1)-y0+1)+k*x0)/k);
    temp = max(loX, hiX);
    loX = max(min(loX, hiX), 1);
    hiX = min(s(2),temp);
    a(1,:) = [loX:hiX];
    a(2,:) = max(1, floor(s(1)-(k*a(1,:)+(s(1)-y0+1)-k*x0)));
end
v = (a(1,:)-1).*s(1)+a(2,:); 
```

***线向量函数：***

```
function [abscissa, ordinate] = linevector(x0, y0, angle, s) 

if (rad2deg(angle) == 90) 
        abscissa = repmat(x0,s(1),1);
        ordinate = [1:s(1)];
else
    k = tan(angle);
    hiX = round((1-(s(1)-y0+1)+k*x0)/k);
    loX = round((s(1)-(s(1)-y0+1)+k*x0)/k);
    temp = max(loX, hiX);
    loX = max(min(loX, hiX), 1);
    hiX = min(s(2),temp);

    abscissa = [loX:hiX];
    ordinate = k*abscissa+((s(1)-y0+1)-k*x0);
end 
```

***lineBresenham 函数：***

```
function [i] = lineBresenham(H,W,Sx,Sy,angle)

k = tan(angle);
if (angle == pi || angle == 0)
    Ex = W;
    Ey = Sy;
    Sx = 1;
elseif (angle == pi/2)
    Ey = 1;
    i = (Sx-1)*H+[Ey:Sy];
    return;
elseif k>0 & k < (Sy-1)/(W-Sx) 
    Ex = W;
    Ey = round(Sy-tan(angle)*(Ex-Sx));
elseif k < 0 & abs(k) < (Sy-1)/(Sx-1) 
    Ex = 1;
    Ey = round(Sy-tan(angle)*(Ex-Sx));
else
    Ey = 1;   
    Ex = round((Sy-1)/tan(angle)+Sx);
end
Dx = Ex - Sx;
Dy = Ey - Sy;
iCoords=1;
if(abs(Dy) <= abs(Dx))
    if(Ex >= Sx)
        D = 2*Dy + Dx;
        IncH = 2*Dy;
        IncD = 2*(Dy + Dx);
        X = Sx;
        Y = Sy;
        i(iCoords) = (Sx-1)*H+Sy;
        iCoords = iCoords + 1;
        while(X < Ex)
            if(D >= 0)
                D = D + IncH;
                X = X + 1;
            else
                D = D + IncD;
                X = X + 1;
                Y = Y - 1;
            end
            i(iCoords) = (X-1)*H+Y;
            iCoords = iCoords + 1;                
        end
    else 
        D = -2*Dy + Dx;
        IncH = -2*Dy;
        IncD = 2*(-Dy + Dx);
        X = Sx;
        Y = Sy;
        i(iCoords) = (Sx-1)*H+Sy;
        iCoords = iCoords + 1;
        while(X > Ex)
            if(D <= 0)
                D = D + IncH;
                X = X - 1;
            else
                D = D + IncD;
                X = X - 1;
                Y = Y - 1;
            end
            i(iCoords) = (X-1)*H+Y;
            iCoords = iCoords + 1;   
        end
    end

else 
    Tmp = Ex;
    Ex = Ey;
    Ey = Tmp;
    Tmp = Sx;
    Sx = Sy;
    Sy = Tmp;
    Dx = Ex - Sx;
    Dy = Ey - Sy;
    if(Ex >= Sx)
        D = 2*Dy + Dx;
        IncH = 2*Dy;
        IncD = 2*(Dy + Dx);
        X = Sx;
        Y = Sy;
        i(iCoords) = (Sy-1)*H+Sx;
        iCoords = iCoords + 1;
        while(X < Ex)
            if(D >= 0)
                D = D + IncH;
                X = X + 1;
            else
                D = D + IncD;
                X = X + 1;
                Y = Y - 1;
            end
            i(iCoords) = (Y-1)*H+X;
            iCoords = iCoords + 1;   
        end
    else
        D = -2*Dy + Dx;
        IncH = -2*Dy;
        IncD = 2*(-Dy + Dx);
        X = Sx;
        Y = Sy;
        i(iCoords) = (Sy-1)*H+Sx;
        iCoords = iCoords + 1;
        while(X > Ex)
            if(D <= 0)
                D = D + IncH;
                X = X - 1;
            else
                D = D + IncD;
                X = X - 1;
                Y = Y - 1;
            end
            i(iCoords) = (Y-1)*H+X;
            iCoords = iCoords + 1;   
        end
    end        
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:18:28.930

1.  消失点在无穷远处，因此到相机的距离是没有用的。

2.  使用`xlswrite`或`dlmwrite`分别写入 excel 或文本文件。

# asp.net-mvc-4 - MVC 4 捆绑 URL 而不是文件

> ID：11790701
> 
> 赞同：4
> 
> 时间：2012-08-03T06:52:00.010
> 
> 标签：asp.net-mvc-4, asp.net-optimization, bundling-and-minification

我想我的标题说明了一切，我想捆绑一组返回 JavaScriptResult 而不是物理文件的动作 url，这可能吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:27:05.483

我认为您不必等待 ASP.NET MVC 的新版本。WebOptimization 库是一个独立的项目——它以某种方式独立开发。

我不是 100% 确定这是否是您一直在寻找的东西，但现在支持虚拟路径提供程序：

[http://codebetter.com/howarddierking/2012/10/20/new-web-optimization-pre-release-package-on-nuget/](http://codebetter.com/howarddierking/2012/10/20/new-web-optimization-pre-release-package-on-nuget/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:25:40.043

你能解释一下你的场景吗？我的猜测是答案是否定的，如果你正在寻找的是捆绑是否会有效地向下钻取并获取 url 的内容，然后缩小/捆绑它们。

我们计划在下一个版本中添加虚拟路径提供程序支持，这可能会启用此场景，因为您随后将能够编写一个可以将 JavaScriptResult 提供给捆绑系统的 VPP。

那有意义吗？

# javascript - 所有图片在 prettyPhoto 中都有相同数量的 facebook 点赞

> ID：11790702
> 
> 赞同：1
> 
> 时间：2012-08-03T06:52:00.197
> 
> 标签：javascript, jquery, prettyphoto

我正在使用[jquery.prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)在我的网站上显示相册。我激活了`social_tools`在每张照片下方显示 twitter 和 facebook 小部件。

问题是如果有人喜欢一张照片，所有其他照片都会得到一个喜欢，所以每张照片都有 234 个喜欢。

这是因为我`location.href`在显示另一张图片时没有改变吗？

激活我的相册的代码是：

```
$.fn.prettyPhoto({ 
  slideShow: 3000,
  social_tools: ''
    +'<div class="pp_social">'
      +'<div class="twitter">'
        +'<a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a>'
        +'<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>'
      +'</div>'
    +'<div class="facebook">'
      +'<iframe src="http://www.facebook.com/plugins/like.php?locale=nl_NL&href='+location.href+'&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe>'
    +'</div>'
  +'</div>'
}); 
```

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:43:24.787

我编辑了 jquery.prettyPhoto 插件来解决这个问题。

在替换 facebook 链接的部分中，我添加了一个额外的占位符：

```
// Rebuild Facebook Like Button with updated href
if(settings.social_tools){
  facebook_like_link = settings.social_tools.replace('{location_href}', encodeURIComponent(location.href)).replace('{image_src}',encodeURIComponent(location.protocol+'//'+location.host+pp_images[set_position])); 
  $pp_pic_holder.find('.pp_social').html(facebook_like_link);
} 
```

额外的占位符 is`{image_src}`并且正在被图像位置替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:32:54.563

前段时间我遇到了同样的问题，尽管没有使用 jquery.prettyPhoto。我有一系列对象，每个对象都有一个单独的网页。与您类似，当有人喜欢其中一个对象时，每个人都会点赞。

问题是“喜欢”链接到同一个地址，因此被认为是相同的。一旦我们确保它们各自链接到不同的地址，它就解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-21T17:38:23.883

我已经做了：

```
// Rebuild Facebook Like Button with updated href
if(settings.social_tools){
  facebook_like_link = settings.social_tools.replace('{location_href}', pp_images[set_position]);
  $pp_pic_holder.find('.pp_social').html(facebook_like_link);
} 
```

它奏效了！

图片 url 像 href 一样被传递给 FB。现在 FB 明白这是一个不同的 url。

# android - 手机应用图片

> ID：11790703
> 
> 赞同：1
> 
> 时间：2012-08-03T06:52:03.513
> 
> 标签：android, iphone, mobile, windows-mobile, blackberry-playbook

有没有一种简单的方法来获取带有我们需要的应用程序的智能手机/平板电脑的图像？

我可以将我的应用程序拉入我的智能手机并拍照。[但它可能不像在这些应用程序网站](http://appsites.com/)中看起来那样时尚。有没有什么软件可以帮助解决这个问题？

任何 JQuery 类型的插件来模拟相同的？就像以 Android 手机图像为框架的图像滑块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:54:00.627

[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/device-frames.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/device-frames.html)

这是最好的方法……由 Google 的 Roman Nurik 开发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:09:30.187

快速提示 - 对于上述 android 链接，您可以重新调整屏幕截图的大小以适合该链接中所需的像素。那里有很多在线图像调整大小工具！

# jquery - Jquery FullCalendar-根据 ruby 应用程序中的 even_type 更改事件颜色

> ID：11790704
> 
> 赞同：1
> 
> 时间：2012-08-03T06:52:07.990
> 
> 标签：jquery, ruby-on-rails, fullcalendar

我在我的 ruby​​ 应用程序中使用来自[http://arshaw.com/fullcalendar的 Jquery 完整日历。](http://arshaw.com/fullcalendar)我想为 4 种不同类型的事件显示不同的颜色，例如（假期、学校、工作、娱乐），这些事件在我的事件表中保存为 type_of_event

现在我只使用下面的代码使用 start_at 和 end_at 获取事件：

```
scope :before, lambda {|end_time| {:conditions => ["ends_at < ?", Event.format_date(end_time)] }}
  scope :after, lambda {|start_time| {:conditions => ["starts_at > ?", Event.format_date(start_time)] }}

  # need to override the json view to return what full_calendar is expecting.
  # http://arshaw.com/fullcalendar/docs/event_data/Event_Object/
  def as_json(options = {})
    {
      :id => self.id,
      :title => self.title,
      :description => self.description || "",
      :start => starts_at.rfc822,
      :end => ends_at.rfc822,
      :allDay => self.all_day,
      :recurring => false,
      :url => Rails.application.routes.url_helpers.event_path(id),
      #:color => "red"
    }

  end

  def self.format_date(date_time)
    Time.at(date_time.to_i).to_formatted_s(:db)
  end 
```

是否有任何特定的方法可以根据 event_type 显示事件颜色意味着如果事件类型是学校，它将显示红色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:26:32.320

您是否要在模型之外的其他地方使用这些颜色？

最有可能的是，您不需要使其全局可用，因此只需在模型中添加一个常量：

```
scope :before, ...
scope :after, ...

EVENT_COLORS = { "School" => "#ff0000", "Holidays" => "#00ff00", ... }
EVENT_COLORS.default = "#0000ff" #optional step, set default color for events

...
:url => Rails.application.routes.url_helpers.event_path(id),
:color => EVENT_COLORS[self.event_type] 
```

# javascript - 如何确保 Google Charts 仪表板中的过滤饼图保持一致的切片颜色？

> ID：11790709
> 
> 赞同：1
> 
> 时间：2012-08-03T06:52:27.827
> 
> 标签：javascript, google-visualization

我有一个带有类别选择器的谷歌饼图，就像[https://developers.google.com/chart/interactive/docs/gallery/controls#overview中的示例](https://developers.google.com/chart/interactive/docs/gallery/controls#overview)

此图表的目的是按媒体显示来自多个网站的流量来源（谷歌分析配置文件）。因此，数据源具有三列：“GA 配置文件”、“媒体”和“访问次数”。

我正在使用下拉类别过滤器根据“GA 配置文件”进行过滤。换句话说，允许用户在查看不同 GA 配置文件的流量媒介之间切换。对于饼图本身，切片标签是“中等”，切片的大小基于“访问次数”。所以，数据数组最终看起来像这样：

```
var data = google.visualization.arrayToDataTable([
['Brand', 'Medium', 'Visits'],
['SiteA', 'Banner', 819527],
['SiteA', 'Direct', 489598],
['SiteA', 'Organic Search', 249444],
['SiteA', 'Paid Search', 248824],
['SiteB', 'Banner', 24858],
['SiteB', 'Direct', 24744],
['SiteB', 'Organic Search', 23751],
['SiteB', 'Paid Search', 22751]
]); 
```

（确实，如果未选择“GA 配置文件”，则该图表没有意义，因为它为每个站点分别列出了每种媒体。但是，它并不意味着以这种方式查看 - 我将类别过滤器默认设置为一个GA 配置文件中的一个，这意味着其中一个始终处于活动状态。）

无论如何，这一切都很好，除了一件事：在 GA 配置文件之间切换时，介质的颜色不一致。例如，当我选择“站点 A”时，“直接”可能是蓝色的，而“有机搜索”是红色的，而对于“站点 B”，“直接”可能是红色的，而“有机搜索”是橙色的。我希望每个媒体的切片总是相同的颜色，无论我碰巧查看哪个 GA 配置文件的数据。关于我如何实现这一目标的任何想法？我查看了文档，但没有看到任何指定切片颜色的方法；只是一种将配色方案设置为整体的方法。有没有办法在 Google Chart 选项中执行此操作，或者在初始 draw() 之后设置颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:01:47.960

API 允许您指定为每个段显示的颜色。使用它，您可以定义一组要使用的滚动颜色，如下所示：

```
var options = {
    colors: ['blue', 'red', 'orange', 'purple']
} 
```

然后将四种颜色应用于四个段，当它到达第五个段（在这种情况下，下一个站点的开始）时，它将从您分配的颜色列表中重新开始。

**更新**

如果您的数据集因站点而异，则需要为每个单独的段指定颜色。您可以创建一个遍历每个值的循环，并为每个段分配正确的颜色，以便最终得到一个颜色列表，如下所示：

```
colors: ['blue', 'red', 'orange', 'purple', 'blue', 'red', 'orange', 'purple', 'blue', 'red', 'orange', 'blue', 'purple'...] 
```

当然，这可能会变成很长的一组颜色，但这是唯一的方法。

# c# - 如果不存在，则插入 else 显示消息“已经存在”

> ID：11790710
> 
> 赞同：2
> 
> 时间：2012-08-03T06:52:32.437
> 
> 标签：c#, sql-server

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace Barcode
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string strconn = @"Data Source=ASHWINI-LAPY\SQLEXPRESS;Initial Catalog=complete;Integrated Security=True;Pooling=False";
            SqlDataReader reader = null;

            SqlConnection conn = null;

            conn = new SqlConnection(strconn);
            conn.Open();

            DateTime Dt_Time = DateTime.Now;
            string Barcode = textBox1.Text;
            SqlCommand cmd = new SqlCommand("select Barcode from table3 where @Barcode='" + textBox1.Text + "'", conn);
            cmd.Parameters.AddWithValue("@Barcode", textBox1.Text);
            reader = cmd.ExecuteReader();
            if (reader != null && reader.HasRows)
            {
                //email exists in db do something

                MessageBox.Show("Barcode Already Exists!!");

            }
            else
            {
                string strquery = string.Format("insert into table3 values('{0}','{1}')", Barcode, Dt_Time);

                cmd = new SqlCommand(strquery, conn);

                int count = (int)cmd.ExecuteNonQuery();
                MessageBox.Show("Barcode:" + Barcode +
                                "\nTime" + Dt_Time);

            } 
```

我是 C# 编码的新手，所以我尝试像下面在代码中提到的那样做，所以请有人帮助我。

我想手动插入条形码，当我按下按钮时，必须检查 SQL Server 数据库是否存在该条形码。如果没有，它必须将该条码插入数据库，但如果它已经存在，它必须给出条码已经存在的消息！

除了插入条形码，我还在数据库中插入系统日期和时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:55:47.650

**编辑**

您可以在按钮单击事件中编写的 C# 代码

```
using (System.Data.SqlClient.SqlConnection cn = 
                    new System.Data.SqlClient.SqlConnection(@"Data Source=ASHWINI-LAPY\SQLEXPRESS;Initial Catalog=complete;Integrated Security=True;Pooling=False"+
                        "Integrated Security=True"))
{
       using (System.Data.SqlClient.SqlCommand cmd= new System.Data.SqlClient.SqlCommand("IsBarcodeCheckAndInsert", cn))
       {
            cmd.CommandType=CommandType.StoredProcedure ; 
            SqlParameter parm= new SqlParameter("@BarCode", cn",SqlDbType.VarChar) ;
            parm.Value="ALFKI";
            parm.Size=25;  
            parm.Direction =ParameterDirection.Input ;
            cmd.Parameters.Add(parm);
            SqlParameter parm2=new SqlParameter("@IsExists",SqlDbType.Int);
            parm2.Direction=ParameterDirection.Output;
            cmd.Parameters.Add(parm2); 
            cn.Open();
            cmd.ExecuteNonQuery();
            cn.Close();
            int IsExists = Convert.ToInt32(cmd.Parameters["@IsExists"].Value.ToString());
            if(IsExists ==0)
                 MessageBox.Show("Barcode Already Exists !!"); 
            else if(IsExists ==1)
                 MessageBox.Show("Barcode not Exists And Inserted In DataBase!!"); 

      }
} 
```

SQL 过程

```
CREATE PROCEDURE [dbo].[IsBarcodeCheckAndInsert]
     (
       @BarCode AS VARCHAR(25),
       @IsExists AS INT out     )
 AS 
BEGIN
 IF EXISTS (SELECT * FROM table3 WHERE BarCode = @BarCode )
 BEGIN
     set @IsExists =1
 END
 ELSE
 BEGIN 
   Insert into table3 values(@BarCode ,getDate())
     set @IsExists =0
 END 
END 
```

* * *

代码有什么问题我检查你的代码代码很好..如果它在你身上不起作用，你会遇到什么错误。

只是**建议在您的第二个查询中使用 SQLParameter，即在插入查询中**也可以避免 SQLInjection 攻击以查看更多详细信息：SQLParameter[如何防止 SQL 注入？](https://stackoverflow.com/questions/4892166/how-does-sqlparameter-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:08:53.613

你可以这样做：

```
SqlCommand cmd = new SqlCommand("select Barcode from table3 where Barcode=@Barcode", conn);
cmd.Parameters.AddWithValue("@Barcode", textBox1.Text); 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:00:54.283

你混合了你的 sql 参数语法，这个：

```
SqlCommand cmd = new SqlCommand("select Barcode from table3 where @Barcode='" + textBox1.Text + "'", conn);
cmd.Parameters.AddWithValue("@Barcode", textBox1.Text); 
```

应该改成这样：

```
SqlCommand cmd = new SqlCommand("select Barcode from table3 where Barcode = @Barcode", conn);
cmd.Parameters.AddWithValue("@Barcode", textBox1.Text); 
```

基本上，您在查询中用参数名称切换了列名。

**更新**

至于“已经有一个打开的DataReader ...”异常，请使用`using`块调整代码（在“最佳实践”方法中），如下所示：

```
private void button1_Click(object sender, EventArgs e)
{
    string strconn = "<connection string";

    using (SqlConnection conn = new SqlConnection(strconn))
    {
        bool readerHasRows = false; // <-- Initialize bool here for later use
        DateTime Dt_Time = DateTime.Now;
        string Barcode = textBox1.Text;
        string commandQuery = "SELECT Barcode FROM table3 WHERE Barcode = @Barcode";
        using(SqlCommand cmd = new SqlCommand(commandQuery, conn))
        {
            cmd.Parameters.AddWithValue("@Barcode", textBox1.Text);
            using(SqlDataReader reader = cmd.ExecuteReader())
            {
                // bool initialized above is set here
                readerHasRows = (reader != null && reader.HasRows);
            }
        }

        if (readerHasRows)
        {
            //email exists in db do something
            MessageBox.Show("Barcode Already Exists!!");
        }
        else
        {
            //Same as above
            string strquery = "INSERT INTO table3 VALUES (@Barcode, @DtTime)"; // '{0}','{1}')", Barcode, Dt_Time);
            using (SqlCommand cmd = new SqlCommand(strquery, conn))
            {
                cmd.Parameters.AddWithValue("Barcode", Barcode);
                cmd.Parameters.AddWithValue("DtTime", Dt_Time);
                int count = cmd.ExecuteNonQuery(); // this already the number of affected rows by itself
                // NOTE: '\n' doesn't really work to output a line break. 
                // Environment.NewLine should be used.
                MessageBox.Show("Barcode:" + Barcode + Environment.NewLine + "Time" + Dt_Time);
            }

        // code probably goes on ...

    } // end of using(SqlConnection...
} // end of method 
```

至少应该带领你走上正轨。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T07:01:29.603

查看这些代码行：

```
string Barcode = textBox1.Text;
SqlCommand cmd = new SqlCommand("select Barcode from table3 where @Barcode='" + textBox1.Text + "'", conn);
cmd.Parameters.AddWithValue("@Barcode", textBox1.Text); 
```

如果`textBox1.Text`等于`"example"`，则生成的 SQL 查询将是

```
Select Barcode from table3 where 'example'='example' 
```

您可能希望将 SqlCommand 语句更改为：

```
SqlCommand cmd = new SqlCommand("select Barcode from table3 where Barcode=@Barcode", conn); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T14:25:16.303

您可以使用[Merge](http://technet.microsoft.com/en-us/library/bb510625.aspx)命令在一个 sql 查询中执行此操作。

在纯 SQL 中，它看起来像：

```
merge table3 WITH(HOLDLOCK) as target
    using (SELECT @Barcode, @DtTime)
        as source (Barcode, DtTime)
        on target.Barcode = @Barcode
    when not matched then
        insert ( Barcode, DtTime)
        values ( @Barcode, @DtTime); 
```

# objective-c - 如何检查Objective-C中是否存在可变数组对象？

> ID：11790712
> 
> 赞同：2
> 
> 时间：2012-08-03T06:52:48.343
> 
> 标签：objective-c

我是objective-c世界的新手。

我想知道的是如何检查可变数组对象是否存在。

这是一个例子。

```
if(![appDelegate.answerList objectAtIndex:3])
    {
        answer = [[NSMutableArray alloc] init];
    }
    else
    {
        answer = [[NSMutableArray alloc] initWithArray:[appDelegate.answerList objectAtIndex:3]];
    } 
```

在此代码上方，'answer' 对象是本地的，而 'answerList' 对象位于 appDelegate 类上。

两者都是 NSMutableArray 对象。

我不知道 answerList 的第三个对象是否被分配。

如果它已经有一个对象，我只想从 answerList 的第三个对象中复制一个对象。

但是该代码不起作用。

我不熟悉objective-c的方法。

请给我指路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:54:50.970

`count`您可以通过将数组的属性与数字进行比较来检查数组是否为空（在本例中为 4，因为数组是基于 0 的）。而且由于数组不接受存在的对象并向其所有对象`nil`发送`-retain`消息，因此从技术上讲，您只需要比较计数而不是对象的存在。但是，您也可以在其中嵌套当前的 if...else... 块，以获得更准确（如果冗余）的结果。

```
if([appDelegate.answerList count] <= 4)  //object exists, and the array contains a valid index. 
```

# r - 是否可以从报告工具中导出？

> ID：11790715
> 
> 赞同：3
> 
> 时间：2012-08-03T06:52:55.183
> 
> 标签：r, tex, xtable, reporttools

我`tableNominal{reporttools}`用来制作频率表。我理解它的方式是`tableNominal()`生成必须复制并粘贴到文本文件中的乳胶代码，然后另存为`.tex`. 但是是否可以像在`print(xtable(table), file="path/outfile.tex"))?`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:42:14.423

为此，您可以使用“Hmisc”包中的任何一个`latex`或从包中。`latexTranslate`如果你有必要的程序基础设施，输出会被发送到你的 TeX 引擎。（您可以通过添加具体示例来提高我们的答案水平。）

看起来该函数不返回字符向量，因此您需要使用策略来捕获 cat() 的输出。使用帮助页面中的示例：

```
capture.output( TN <- tableNominal(vars = vars, weights = weights, group = group, 
         cap = "Table of nominal variables.", lab = "tab: nominal") , 
         file="outfile.tex") 
```

# http - 如何防止 Mobile Safari 缓存个性化主页？

> ID：11790718
> 
> 赞同：3
> 
> 时间：2012-08-03T06:53:02.967
> 
> 标签：http, caching, heroku, sinatra, mobile-safari

[我有一个 Web 应用程序，它使用与 Sinatra 应用程序imonaplane](https://github.com/langalex/imonaplane)相同的 Twitter 身份验证代码。

主页显示“使用 Twitter 登录”或个性化内容。登录后，您将被重定向（通过 HTTP 302）到主页：

```
get '/session_auth' do
  if params[:oauth_verifier]
    access_token = twitter_client.authorize(
      session[:request_token], session[:request_token_secret], oauth_verifier: params[:oauth_verifier])
    if twitter_client.authorized?
      user = db.load(User.to_id(twitter_client.info['screen_name'])) || User.new(login: twitter_client.info['screen_name'], twitter_access_token: access_token.token,
        twitter_secret_token: access_token.secret)
      db.save! user
      session[:user_id] = user.id
    end
  end
  redirect '/'
end 
```

这在 Firefox 14.0.1 和 Safari 5.1.7 以及 iOS 模拟器中运行良好。

但是，iOS 5.1.1 上的 Mobile Safari 似乎正在缓存通用主页。这给人的印象是您没有登录，因为它仍然显示“使用 Twitter 登录”。重新加载将显示个性化内容。

这是在 Heroku、Cedar 堆栈上运行的。不使用 HTTP 缓存标头。

这里有什么问题？我是否应该明确告诉浏览器不要缓存主页，可能带有`Cache-Control: private`标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:58:09.233

不同的浏览器在 Cache-Control Header 中确认不同的值。

据我所知（尽管我现在不能引用任何好的来源）以确保在任何浏览器中都不会执行缓存，`Cache-Control`可以将 Header 设置为`"max-age=0, private, no-store, no-cache, must-revalidate"`.

# mysql - 将ms sql函数转换成mysql

> ID：11790721
> 
> 赞同：0
> 
> 时间：2012-08-03T06:53:06.123
> 
> 标签：mysql, sql, sql-server, sql-server-2008

将 ms sql 函数转换为 mysql 时遇到问题。这是ms sql函数代码：

```
CREATE FUNCTION [crewu2].[isAvailable] (@OwnerID int, @DateFrom Smalldatetime, @DateTo Smalldatetime)  
RETURNS bit AS  
BEGIN  
    DECLARE @t bit  
    IF @DateFrom IS NULL or @DateTo IS NULL 
        or EXISTS (select DateID
                     from [client_BlackDates]
                    where OwnerID=@OwnerID 
                      and ((DateFrom<=@DateFrom and @DateFrom<=DateTo) 
                            or (DateFrom<=@DateTo and @DateTo<=DateTo)))  
        SET @t=0  
    ELSE  
        SET @t=1  
RETURN @t  
END 
```

这里是在mysql中转换的：

```
DELIMITER $$  
CREATE FUNCTION isAvailable (OwnerID INT, DateFrom DATETIME, DateTo DATETIME)  
RETURNS BIT   
BEGIN  
    DECLARE t BIT;  
    IF DateFrom IS NULL OR DateTo IS NULL
        OR EXISTS (SELECT DateID
                     FROM client_BlackDates
                    WHERE OwnerID=OwnerID 
                      AND ((DateFrom<=DateFrom AND DateFrom<=DateTo)
                            OR (DateFrom<=DateTo AND DateTo<=DateTo)))  
        SET t=0;  
    ELSE  
        SET t=1;  
    RETURN t  
END $$  
DELIMITER; 
```

但它给了我以下错误：

`Error Code : 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET t=0; ELSE SET t=1; RETURN t END' at line 6`

请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:02:55.980

这应该有效（您错过了`THEN`和`END IF`）：

```
DELIMITER $$
CREATE FUNCTION isAvailable (OwnerID INT, DateFrom DATETIME, DateTo DATETIME)
RETURNS BIT
BEGIN
DECLARE t BIT;
IF DateFrom IS NULL OR DateTo IS NULL OR EXISTS (SELECT DateID FROM client_BlackDates WHERE OwnerID=OwnerID AND ((DateFrom<=DateFrom AND DateFrom<=DateTo) OR (DateFrom<=DateTo AND DateTo<=DateTo)))
**THEN** 
SET t=0;
ELSE
SET t=1;    
RETURN t;
**END IF;**
END $$
DELIMITER ; 
```

请参阅 MySQL[文档](http://dev.mysql.com/doc/refman/5.5/en/if-statement.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:07:49.760

[查看IF..THEN..ELSE 语法](http://dev.mysql.com/doc/refman/5.0/en/if-statement.html)的MySQL 手册

```
DELIMITER //
CREATE FUNCTION isAvailable (OwnerID INT, DateFrom DATETIME, DateTo DATETIME)  
RETURNS BIT   
BEGIN  
    DECLARE t BIT;  
    IF DateFrom IS NULL OR DateTo IS NULL 
       OR EXISTS (SELECT DateID
                    FROM client_BlackDates
                   WHERE OwnerID=OwnerID
                      AND ((DateFrom<=DateFrom AND DateFrom<=DateTo)
                            OR (DateFrom<=DateTo AND DateTo<=DateTo)))
        THEN
        SET t = 0;
    ELSE  
        SET t = 1;  
    END IF;
    RETURN t;
END //
DELIMITER ; 
```

# python - Python字典中的匹配键

> ID：11790733
> 
> 赞同：0
> 
> 时间：2012-08-03T06:53:28.147
> 
> 标签：python, dictionary

我有以下内容可以很好地匹配字典中的键。

```
if mydict.__contains__('bananas'):
    print "found" 
```

有没有办法基于*找不到*`if`字符串的逻辑

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T06:56:22.497

这个有可能：

```
if "bananas" not in mydict:
    print "not found" 
```*

# ios - 在ios中通过电子邮件和电话号码检索联系人的有效方法

> ID：11790734
> 
> 赞同：1
> 
> 时间：2012-08-03T06:53:30.143
> 
> 标签：ios, abaddressbook

我正在为 ios 应用程序构建自动完成功能。获取到 CFArrayRef 中的所有联系人后。给定搜索字符串，通过电子邮件和电话号码检索联系人的最有效方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:03:46.030

你搜索过SO吗？喜欢[这里](https://stackoverflow.com/questions/1645567/how-to-get-an-iphone-address-book-contacts-emails-as-nsstrings)吗？或者查看 Apple 的[文档](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)？

获取所有联系人后，您可以将字符串与`compare:`或进行比较`rangeOfString:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:26:47.060

如果我这样做，就像用户决定在我可能需要的地方输入一些东西一样，我实际上会为每个联系人创建一个 NSArray 字典（将地址对象覆盖为完整的 Cocoa 对象）。

然后当用户键入时，您可以使用 NSArray 和 NSDictionary 提供的嵌套“枚举”块方法来快速找到适当的条目。

# php - 通过点击电子邮件转发预览 html 表单并打开一个 html 表单

> ID：11790735
> 
> 赞同：-2
> 
> 时间：2012-08-03T06:53:37.070
> 
> 标签：php, cakephp, phpmyadmin, cakephp-1.3, php-5.2

预览html表单的表单数据同时发送电子邮件并打开一个新表单

控制流程是这样的

form1.html// 包含 email1.php

form2.html// 我包含在 email1.php 中

email2.php// 我包含了success.html

请帮助在提交后立即预览 form1.html，然后再预览 form2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:53:41.840

您必须使用 session 或 mysql 创建另一个 php 通过表获取结果。使用会话的编码示例：

获取结果.php

```
 <?php
    session_start();
    $firstname = $_POST['firstname']; // Gets the form's input
    $fname = $_SESSION['fname']; 
    ?> 
```

预览.php

```
 <?php
    session_start();
    $firstname = $_SESSION['fname']
    ?>

     <form action="" method="post"> <!-- Show the form -->
     <input type="text" name="firstname" value="<?php echo $firstname; ?>">
     </form> 
```

在电子邮件部分，您应该做对什么？

# php - 使用 Doctrine2 将日期保存在数据库中

> ID：11790738
> 
> 赞同：1
> 
> 时间：2012-08-03T06:53:49.457
> 
> 标签：php, symfony, doctrine-orm

我正在使用 Symfony2 和 Doctrine2，我有一个名为 Domains 的类，其中包含一些名称 - 字符串和一些日期。我使用以下代码将信息保存到数据库中：

```
public function createAction()
{
    $date = new \DateTime();
    $domain = new Domains();
    $domain->setMainDomain('new domain');
    $domain->setUser('new user');
    $domain->setSrv('server1');
    $domain->setStartDate($date->setDate(1992, 6, 3));
    $domain->setDueDate($date->setDate(1998, 7, 21));
    $domain->setPrevStartDate($date->setDate(1800, 9, 15));
    $domain->setPrevDueDate($date->setDate(1850, 10, 25));
    $domain->setNotified($date->setDate(2222, 3, 21), $date->setTime(12,01));

    $em = $this->getDoctrine()->getEntityManager();
    $em->persist($domain);
    $em->flush();

    return new Response('Added a new domain with number '.$domain->getId());
} 
```

问题是所有日期都具有列表中最后一个日期的值:(在示例中，所有日期都变为 2222-03-21。你能帮我解决这个问题，而不是为每个日期创建一个新的 DateTime 对象吗我想在数据库中坚持哪个？非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:11:19.677

这不是 Symfony2/Doctrine2 的问题。

在 PHP 中，所有对象都是通过引用传递的，因此您实际上是在传递 的同一个实例`$date`，因此显然它将所有日期设置为最后一个。

没有办法按照您想要的方式执行此操作（仅使用 1 个 DateTime 实例），但我真的不明白您为什么要这样做。

详细地说，你为什么这么认为：

```
$domain->setStartDate($date->setDate(1992, 6, 3));
$domain->setDueDate($date->setDate(1998, 7, 21));
$domain->setPrevStartDate($date->setDate(1800, 9, 15));
... 
```

比这更好：

```
$domain->setStartDate(new \DateTime('1992-6-3'));
$domain->setDueDate(new \DateTime('1998-7-21'));
$domain->setPrevStartDate(new \DateTime('1800-9-15'));
... 
```

# smartgwt - 完全完成 drop 后的智能 gwt 事件通知

> ID：11790740
> 
> 赞同：1
> 
> 时间：2012-08-03T06:53:57.880
> 
> 标签：smartgwt

我有一个带有一些 IButton 的 HStack。我可以使用 darg & drop 移动 HStack 中的按钮。现在一个想要在IButton最终集成到HStack后有一个通知。我想确定 HStack 中拖动按钮的位置。我只找到了一个 DropHander（用于 Hstack）和 DragRepositionStopHandler（用于 Button）。释放鼠标按钮后，两者都会触发事件。此时按钮不在 HStack 中。我的问题是：在将项目添加到布局小部件后，是否会有 EventHander 触发事件？

提前致谢。

梅德罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:45:10.933

After the DropEvent is fired, your Button is in position and about to become member of the HStack. Nothing can actually stop this. So when you receive this event all you have to do at the HStack is to retrieve the source of the event and call its getAbsoluteLeft and getAbsoluteTop methods. This will give you the position of the Button within the browser. If you want to receive the position within the HSTack, add them to the Left and Top coordinates of the HStack, respectively. Something like the following can be used:

```
HStack hStack = new HStack();
hStack.addDropHandler(new DropHandler() {

        @Override
        public void onDrop(DropEvent event) {
            Object source = event.getSource();
            if (source instanceof BaseWidget) { //This shall cover all Buttons and UI elements.
                int buttonLeftPosition = ((BaseWidget) source).getAbsoluteLeft();
                int buttonTopPosition = ((BaseWidget) source).getAbsoluteTop();
            }
        }
    }); 
```

# asp.net-mvc-3 - WCF 或 Normal BLL 哪一个是更好的解决方案？

> ID：11790744
> 
> 赞同：0
> 
> 时间：2012-08-03T06:54:06.523
> 
> 标签：asp.net-mvc-3, wcf, performance, web-applications, erp

我们打算在 MVC 3 中开发一个大型的 Web 应用程序，并且需要提高应用程序的性能和速度，所以我们决定使用 WCF。但是有没有一种好方法可以在 WCF 中编写我们所有的业务逻辑？什么是有效使用 WCF 的好方法？

另一个问题是有大量的类，所以需要在项目中添加大量的服务引用。

**我怎样才能有效地实现 WCF 以获得良好的性能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:17:42.830

拥有一个额外的物理层会损害而不是提高请求的原始性能，但它可能会增加可扩展性，并可以在安全架构方面为您提供额外的选择。对于原始吞吐量，您应该使用内存中的 DLL。

但是，您可以通过对抽象进行编程来获取数据，然后在其他要求允许的情况下将内存中的 DLL 或 WCF 代理放在抽象后面来保持您的选择开放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:19:53.150

不，在你的应用程序中添加分发层并不是更好的性能，否则会降低性能，更复杂。分发的第一条规则**不是分发**，因为您必须处理：序列化、安全性....

想想为什么你需要让你的应用程序被分发，你的应用程序是否需要作为服务公开并从 iSO、Android 或 WPF 中使用。如果没有，请不要使用，继续使用业务层作为 DLL。

# ios5 - 如何在iphone的同一视图中的两个不同点之间画线？

> ID：11790747
> 
> 赞同：0
> 
> 时间：2012-08-03T06:54:35.490
> 
> 标签：ios5

我只想在 ViewController 类型的同一个视图中的 2 个不同点之间画线。我已经编写了以下代码，但它没有显示线。请帮我解决这个问题。

```
- (void)drawRect:(CGRect)rect
{
[brushPattern setStroke];
[myPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
//  CGPoint *point=mytouch 
[myPath moveToPoint:[mytouch locationInView:self.view]];
CGPoint pos = [mytouch locationInView: self.view];
NSLog(@"Position of touch: %.3f, %.3f", pos.x, pos.y);   
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
[myPath addLineToPoint:[mytouch locationInView:self.view]];
[self.view setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
CGPoint pos = [mytouch locationInView: self.view];
NSLog(@"Position of touch: %.3f, %.3f", pos.x, pos.y);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:03:18.890

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  UITouch* touch = [touches anyObject];

  currentPoint = [touch locationInView:self.image];
  UIGraphicsBeginImageContext(self.view.frame.size);
  if (!(last.x == 0 && last.y == 0)) {

    CGContextRef context    = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
    CGContextSetLineWidth(context, 2.0);
    CGContextMoveToPoint(context, currentPoint.x,currentPoint.y);
     CGContextAddLineToPoint(context, last.x, last.y);
    CGContextStrokePath(context);
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapButt);
    [image setNeedsDisplay];
     CGContextFlush(UIGraphicsGetCurrentContext());
    self.image.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

  }

  last = currentPoint;
  NSLog(@"the current point is %f,%f",currentPoint.x,currentPoint.y);
  NSLog(@"the current point is %f,%f",last.x,last.y);
} 
```

# signalr - SignalR 托管在单独的 appPool 上

> ID：11790754
> 
> 赞同：5
> 
> 时间：2012-08-03T06:55:25.353
> 
> 标签：signalr

我的 Web 应用程序有一个基于**SignalR**集线器构建的聊天应用程序模块。

该应用程序将有**1000 多个**并发用户。我想将**聊天模块**托管在一个单独的应用程序池中，以将其与我的主应用程序分开，这样 SignalR 就不会成为我的主应用程序的瓶颈。

我不知道该怎么做。我已经使用 Hub 类构建了一个简单的聊天系统（很像**Google Talk**），它与我的主 Web 项目相关联，客户端代码驻留在 Site Master 中，因为它将在整个应用程序中通用。

我还希望能够在 Hub 类之外调用 Hub 方法。例如，管理员可能会从管理面板将某些任务分配给用户。因此，在成功完成服务操作（任务分配）后，从 Controller 方法中，我想向该特定用户发送**SignalR消息。**我应该使用 Hub 还是 Persistence 连接来实现这两个目标？在不同的端口上托管**SignalR**？我很感激这方面的一些指导。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:09:39.893

不是我认为你一定*要这样做*，而是我能理解分离的愿望。为此，您必须让 MVC 应用程序调用集线器方法，就好像它是 SignalR 客户端本身一样。您可以通过在同一个集线器上放置单独的方法或添加仅用于这种应用程序间通信的辅助集线器来做到这一点。

我可能会使用后一种方法，即拥有第二个集线器，因为您可以以不同的方式保护它。如果您走这条路，您只需获取`HubContext`主集线器的 ，然后拨打您想要的任何电话/触发您想要的任何信号。这可能看起来像这样：

```
public MyInterAppCommunicationHub : Hub
{
    public void SendSystemAlert(string message)
    {
       HubContext myPrimaryHubContext = GlobalHost.ConnectionManager.GetHubContext<MyPrimaryHub>();

       myPrimaryHubContext.Clients.systemAlert(message);
    }
} 
```

# tomcat - 使用 jsessionid 路径参数重定向会导致 404 错误

> ID：11790756
> 
> 赞同：0
> 
> 时间：2012-08-03T06:55:38.580
> 
> 标签：tomcat, jsessionid

自从迁移到新服务器后，我们在登录 Web 应用程序时遇到 404 错误。我们使用 Spring Acegi 进行身份验证，HTTP 流比较典型：

```
Request:
GET /dev/secure/umblogin?j_username=myuer&j_password=XXXX&j_client=1

Response:
HTTP/1.1 302 Moved Temporarily
Set-Cookie: JSESSIONID=3DABF165D2E18094632EA1478EF67D8E; Path=/dev
Location: http://hurricane.umbrellanet.ch/dev/secure/umbrellanet.go;jsessionid=3DABF165D2E18094632EA1478EF67D8E

Request:
GET /dev/login.go;jsessionid=DA122287727B72CD3F1B77DBD799531F

Response:
HTTP/1.1 404 Not Found 
```

原因在于路径参数 ';jsessionid=..' 的某个地方，其中分号被编码为 %3b，然后服务器找不到

/dev/login.go%3bjsessionid=DA122287727B72CD3F1B77DBD799531F

我确定这不是一个不常见的问题，但我找不到任何好的谷歌点击。我们使用的是 Apache Tomcat/6.0.35，浏览器是 IE 9。

谢谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:55:09.703

这本质上[是 Is it possible to disable jsessionid in tomcat servlet?](https://stackoverflow.com/questions/962729/is-it-possible-to-disable-jsessionid-in-tomcat-servlet) .

（从 Tomcat 6.0.33 开始，路径参数在 Request.getRequestURI() 中返回。这被视为一个错误修复。）

# django - 从函数中获取数据以显示在 Django 的管理员上

> ID：11790757
> 
> 赞同：1
> 
> 时间：2012-08-03T06:55:39.647
> 
> 标签：django, django-admin

我需要显示来自模型内部函数的数据。在下面的示例中，我想在 getAdult 函数中获取学生的成人。里面应该放什么？？获取数据..

```
models.py:

    class Student(models.Model):

        name = models.CharField(max_length=255)
        age = models.IntegerField(blank=True,
                                  default=0)

        birthday = models.DateField(blank=True,
                                    null=True)
        school = models.CharField(max_length=255,
                                  blank=True,
                                  default='')
        def getAdult(self):
            try:
                adult = self.relationships.filter()[0].adult

                return adult
            except IndexError:
                return None 
```

管理员.py：

```
 from django.contrib import admin
    from school.models import Student

    class StudentAdmin(admin.ModelAdmin):
        list_display=('name',??) 
```

如果问题很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:10:52.380

您的`getAdult`方法应该返回一个字符串。我不确定对象`adult`是什么类型，所以我假设它`str()`会为它返回字符串表示形式。

你可以这样做：

```
class Student(models.Model):
#your stuff

    def getAdult(self):
        try:
            adult = self.relationships.filter()[0].adult
            return str(adult)
        except Exception:
            return ''
    getAdult.shot_description = 'Adult'

class StudentAdmin(admin.ModelAdmin):
    list_display=('name', 'getAdult') 
```

有关更多信息，请参阅：[ModelAdmin 中的 list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

更新（如果对象没有内置字符串表示）

```
#example Adult model
class Adult(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    age  = models.IntegerField()

class Student(models.Model):
    #other stuff
    def getAdult(self):
        try:
            adult = self.relationships.filter()[0].adult
            return '%s %s' % (adult.first_name, adult.last_name)
        except Exception:
            return ''
    getAdult.shot_description = 'Adult'

class StudentAdmin(admin.ModelAdmin):
    list_display=('name', 'getAdult') 
```

# java - 在运行时更改 CommonsMultipartResolver 的 maxUploadSize

> ID：11790761
> 
> 赞同：4
> 
> 时间：2012-08-03T06:55:43.337
> 
> 标签：java, spring, spring-mvc, file-upload, apache-commons-fileupload

我正在使用[CommonsMultipartResolver](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/multipart/commons/CommonsMultipartResolver.html)进行文件上传。

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" >
    <!-- specify maximum file size in bytes -->
<property name="maxUploadSize" value="100000"/>
</bean 
```

我希望能够在运行时更改其属性 maxUploadSize（以便管理员可以更改大小）。请问最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T09:26:31.707

您可以在控制器中自动装配`CommonsMultipartResolver`并在运行时更新那里的属性。

例如：

```
@Controller
public class MyController {

    @Autowired
    private CommonsMultipartResolver multipartResolver;

    @RequestMapping(value = "/setMaxUploadSize", method = RequestMethod.GET)
    public ModelAndView setMaxUploadSize() {
        ...
        multipartResolver.setMaxUploadSize(5000);
        ...
    }
} 
```

# actionscript-3 - 如何在 KCCalendar 控件上设置主题？

> ID：11790762
> 
> 赞同：0
> 
> 时间：2012-08-03T06:55:41.780
> 
> 标签：actionscript-3, apache-flex, flex3

我正在试用 KCCalendar 控件的 Flex 3.2 版本。在现场演示中：

[http://www.flex-component.com/demo/kccalendar/](http://www.flex-component.com/demo/kccalendar/)

它显示了三个不同的主题，其中之一是 Outlook 主题。我只是想知道我是如何在 mxml 或动作脚本中设置这个主题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:58:58.563

您可以使用：

```
ThemeSwitcher.applyOutlookTheme(calendarComponent); //calendarComponent is the id of the calendar component. 
```

改变主题。我通过阅读您发布的演示页面的源代码发现了这一点。您可以右键单击演示页面，然后选择查看源代码。

# jsf-2 - 使用 glassfish jdbcRealm 登录时查找用户组名称

> ID：11790767
> 
> 赞同：1
> 
> 时间：2012-08-03T06:56:01.577
> 
> 标签：jsf-2, glassfish-3

我知道，当用户登录时，我们可以通过以下方式找到用户名

```
FacesContext context = FacesContext.getCurrentInstance(); 
       HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
request.login(username, password);
Principal principal = request.getUserPrincipal();
principal.getName(); 
```

但我如何获得用户组（不做任何数据库查询）。

我尝试了以下方法，但它不起作用，它总是为所有组返回 false。

```
context.getExternalContext().isUserInRole("USER")
request.isUserInRole("USER") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:19:24.127

我想指出，组和角色是不同的概念。

假设您有一个网络应用程序，其中有人可以写文章，有人只能评论，其他人只能阅读。所以你有三个角色：WRITER、COMMENTER 和 READER。

现在，此 Web 应用程序在您的组织内部使用。组织图提供以下组：PROJECTMANAGER、ARCHITECT、SYSADMIN 和 DEVELOPER。

简而言之，角色与 webapp 相关，组与您的组织图相关。

在 glassfish-web.xml 中，您可以将组和/或用户绑定到角色。例如，PROJECTMANAGER 和 ARCHITECT 是 WRITER，SYSADMIN 是 COMMENTER，而 DEVELOPER 是 READER。

因此，通常没有数据库查询就无法检索用户组。无论如何，一个策略是创建与组同名的角色（在 glassfish-web.xml 中）。此外，在管理控制台中，还有一个标志可以自动将角色映射到组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:05:39.707

增加 Alf 的信息响应的一些想法：

1.  一个用户可能属于多个组。

2.  每个组可能与多个角色相关联。对于 GlassFish 3.1.2，角色和组之间的映射是在 中进行的`glassfish-web.xml`，即：

    ```
    <security-role-mapping>
      <role-name>USER</role-name>
      <group-name>USER</group-name>
    </security-role-mapping> 
    ```

3.  角色必须在您的网络应用程序中定义，在`web.xml`：

    ```
    <security-role>
      <role-name>USER</role-name>
    </security-role> 
    ```

以上将组映射`USER`到 web 应用程序中的角色`USER`。当然，您可以选择不同的名称 - 只需在`role-name`两者的元素中保持相同的值即可。

# java - 取消部署我的应用程序时，Tomcat 抛出 java.lang.UnsupportedOperationException

> ID：11790768
> 
> 赞同：5
> 
> 时间：2012-08-03T06:56:01.987
> 
> 标签：java, tomcat, jaxb

*当我从Tomcat*取消部署我的应用程序时，我在*Tomcat*日志中看到以下错误。可能是什么问题？我应该如何解决这个问题。

----------------------------------------Tomcat日志-------- --------

```
SEVERE: The web application [/dfsmonitor] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@6ca32e]) and a value of type [com.sun.xml.stream.XMLReaderImpl] (value [com.sun.xml.stream.XMLReaderImpl@e01430]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jul 1, 2012 10:18:20 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: Unable to determine string representation of value of type [com.sun.xml.stream.writers.XMLStreamWriterImpl]
java.lang.UnsupportedOperationException
at com.sun.xml.stream.writers.XMLStreamWriterImpl.entrySet(XMLStreamWriterImpl.java:2134)
at java.util.AbstractMap.toString(AbstractMap.java:478)
at org.apache.catalina.loader.WebappClassLoader.clearThreadLocalMap(WebappClassLoader.java:2433)
at org.apache.catalina.loader.WebappClassLoader.clearReferencesThreadLocals(WebappClassLoader.java:2349)
at org.apache.catalina.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1921)
at org.apache.catalina.loader.WebappClassLoader.stop(WebappClassLoader.java:1833)
at org.apache.catalina.loader.WebappLoader.stop(WebappLoader.java:740)
at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4913)
at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:932)
at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1357)
at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1328)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:326)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1094)
at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1106)
at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:468)
at org.apache.catalina.core.StandardService.stop(StandardService.java:604)
at org.apache.catalina.core.StandardServer.stop(StandardServer.java:788)
at org.apache.catalina.startup.Catalina.stop(Catalina.java:662)
at org.apache.catalina.startup.Catalina.start(Catalina.java:629)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Jul 1, 2012 10:18:20 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/dfsmonitor] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@1bf8785]) and a value of type [com.sun.xml.stream.writers.XMLStreamWriterImpl] (value [Unknown]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Jul 1, 2012 10:18:20 PM org.apache.coyote.http11.Http11AprProtocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-8080 
```

请让我知道可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:11:46.650

您可以避免将 XMLStreamWriterImpl 实例放入线程本地，这样在关闭 Tomcat 时删除它们不会有任何问题。

但是除了在 Servlet 上实际实现 destroy 方法，或者在 Spring 等环境中注册关闭钩子并跟踪您曾经设置到 threadlocals 中的所有值，以便您可以在关闭时删除它们，我不认为你真的需要担心这个。尽管您或您正在使用的代码将此值存储到线程本地很奇怪 - 通常流编写器会快速创建和销毁并且不会持续很长时间。

# python - GAE - 访问模型元数据

> ID：11790775
> 
> 赞同：1
> 
> 时间：2012-08-03T06:56:31.133
> 
> 标签：python, google-app-engine, google-cloud-datastore

从[这个 stackoverflow 答案](https://stackoverflow.com/a/918507/1177441)中，我收集到我可以从我的数据库中获取一条记录，甚至不知道它的模型，我只需要密钥。如果这可行，那么我如何访问模型元数据以便找出它的种类？

**更新 - 从提供的答案**

```
record_kind = record.kind()
#talk about being intuitive..... and thick 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:16:55.513

类型在密钥中指定，请参阅[https://developers.google.com/appengine/docs/python/datastore/keyclass#Introduction](https://developers.google.com/appengine/docs/python/datastore/keyclass#Introduction)

# java - 在java中检测堆转储中的根本原因

> ID：11790787
> 
> 赞同：3
> 
> 时间：2012-08-03T06:57:34.807
> 
> 标签：java, heap-dump

在 java 堆转储中，我如何确切知道代码中的哪个位置/哪个线程导致了转储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:05:44.643

读取内存转储：

我建议您从[这里尝试“eclipse 内存分析器”](http://www.eclipse.org/mat/)

另一个选项（免费）是使用 JVisualVM（可在 $JAVA_HOME/bin 获得）打开它，jhat 也很酷，但已经被推荐 :)

现在，您要询问的是导致内存堆转储的线程，而不是如何进行内存转储......这取决于您如何获得内存转储。有不同的方法来获取转储。

1.  在您的进程中，一旦遇到 OutOfMemory 错误，您可以指示 JVM 生成内存转储，在这种情况下，我相信它将是 JVM 本身。

2.  假设您有一个 JMX 服务器与您的 JVM [示例一起运行，您可以从 MBean 触发堆转储创建](http://code.google.com/p/perfbench/source/browse/trunk/perfbench/jmeter-utils/src/main/java/jmeterutils/JmxHeapDumper.java)

3.  您甚至可以在应用程序外部使用系统调用（在 linux 上）：`kill -3 _YOUR_JAVA_PROCESS_ID_`将生成 heapdump。

但我很难想象你为什么需要这样的信息。稍后在评论中您提到“确切的代码行”，但这些方式通常在您的 JVM 之外......您确定需要一行代码来生成堆转储本身，还是您正在尝试找出真正的问题？

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:20:00.560

在 java 中，您在某个地方创建对象，在许多地方使用它，然后让 GC 将其收集回来。没有一条线会导致泄漏。

您应该在 MAP 等工具中寻找对象数量和它们使用的堆。选择每个目标类，看看为什么它们没有被垃圾收集。（有些人持有的参考超出了需要——比如说一个静态字段）

您可能会发现此页面上的说明更有用 - [http://scn.sap.com/people/krum.tsvetkov/blog/2007/07/02/finding-memory-leaks-with-sap-memory-analyzer](http://scn.sap.com/people/krum.tsvetkov/blog/2007/07/02/finding-memory-leaks-with-sap-memory-analyzer) （也链接来自 MAT 主页）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:02:55.713

尝试使用[Java 堆分析工具 (jhat)](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)或 jconsole（位于您的 JAVA_HOME\bin 中）。

# java - org.apache.poi.poifs.filesystem.OfficeXmlFileException

> ID：11790789
> 
> 赞同：3
> 
> 时间：2012-08-03T06:57:41.123
> 
> 标签：java, apache-poi

我想使用 POI 阅读 microsoft word 文档，即 .docx 格式，但出现错误：

```
The supplied data appears to be in the Office 2007+ XML. POI only supports OLE2 Office documents 
```

如果有人可以帮助我摆脱这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:33:43.463

您应该阅读[从 HSSF 转换为通用 SS 用户模型页面](http://poi.apache.org/spreadsheet/converting.html)，以帮助您了解需要更改的内容。

不过，作为一般指南，如果您的代码以前是

```
 HSSFWorkbook wb = new HSSFWorkbook(new FileInputStream("foo.xls"));
 HSSFSheet s = wb.getSheetAt(0);
 HSSFRow r = s.getRow(0);
 System.out.println("Cell A1 is " + r.getCell(0)); 
```

它应该改为

```
 Workbook wb = WorkbookFactory.create(new File("foo.xls")); // Or foo.xlsx
 Sheet s = wb.getSheetAt(0);
 Row r = s.getRow(0);
 System.out.println("Cell A1 is " + r.getCell(0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:11:49.923

请查看[http://poi.apache.org/spreadsheet/converting.html](http://poi.apache.org/spreadsheet/converting.html)关于新模型 XSSF 和 HSSF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:13:54.090

不确定您使用的是 POI 中的哪个 API，但我认为您使用的是 HSSF API。相反，您应该使用 XSSF API（有关详细信息，请参阅[http://poi.apache.org/spreadsheet/index.html](http://poi.apache.org/spreadsheet/index.html)）。例如，而不是使用`Workbook wb = new HSSFWorkbook();`use`Workbook wb = new XSSFWorkbook();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-06T12:58:56.147

HSSF workbook will not work for higher version of excel file instead of HSSFWorkbook use XXSFWOrkbook.You can have the complete code in the below link

[http://aravind-soa.blogspot.com/2017/02/how-to-import-excel-file-into-oracle.html](http://aravind-soa.blogspot.com/2017/02/how-to-import-excel-file-into-oracle.html)

# c# - 使用 lucene.net 进行条件搜索

> ID：11790795
> 
> 赞同：0
> 
> 时间：2012-08-03T06:58:04.453
> 
> 标签：c#, lucene.net

以下方式我用lucene.net进行了搜索。此例程针对所有名为**“Title”、“Description”、“Url”、“Country”**的索引字段搜索多个单词。

我需要知道如何给出一个条件，比如 country='UK' 或 country='US'

我希望应该像下面那样搜索多个单词，但我想再添加一个子句，当国家是英国时。所以请指导我在我的代码中添加什么。

```
 if (!string.IsNullOrEmpty(multiWordPhrase))
    {

        string[] fieldList = { "Title", "Description", "Url" };
        List<BooleanClause.Occur> occurs = new List<BooleanClause.Occur>();
        foreach (string field in fieldList)
        {
            occurs.Add(BooleanClause.Occur.SHOULD);
        }

        searcher = new IndexSearcher(_directory, false);
        Query qry = MultiFieldQueryParser.Parse(Version.LUCENE_29, multiWordPhrase, fieldList, occurs.ToArray(), new StandardAnalyzer(Version.LUCENE_29));
        TopDocs topDocs = searcher.Search(qry, null, ((PageIndex + 1) * PageSize), Sort.RELEVANCE);
        ScoreDoc[] scoreDocs = topDocs.ScoreDocs;
        int resultsCount = topDocs.TotalHits;
        list.HasData = resultsCount;
        StartRecPos = (PageIndex * PageSize) + 1;
        if (topDocs != null)
        {
            for (int i = (PageIndex * PageSize); i <= (((PageIndex + 1) * PageSize)-1) && i < topDocs.ScoreDocs.Length; i++)
            {
                Document doc = searcher.Doc(topDocs.ScoreDocs[i].doc);
                oSr = new Result();
                oSr.ID = doc.Get("ID");
                oSr.Title = doc.Get("Title");
                oSr.Description = doc.Get("Description");
                //oSr.WordCount = AllExtension.WordCount(oSr.Description, WordExist(oSr.Title, multiWordPhrase));
                string preview =
                oSr.Description = BBAReman.AllExtension.HighlightKeywords(oSr.Description, multiWordPhrase);  //sr.Description;
                oSr.Url = doc.Get("Url");
                TmpEndRecpos++;
                list.Result.Add(oSr);
            }
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:27:24.700

查找布尔查询

```
if (!string.IsNullOrEmpty(multiWordPhrase))
{
   BooleanQuery bq = new BooleanQuery();

   string[] fieldList = { "Title", "Description", "Url" };
   List<BooleanClause.Occur> occurs = new List<BooleanClause.Occur>();
   foreach (string field in fieldList)
   {
      occurs.Add(BooleanClause.Occur.SHOULD);
   }
   Query qry = MultiFieldQueryParser.Parse(Version.LUCENE_29, multiWordPhrase, fieldList, occurs.ToArray(), new StandardAnalyzer(Version.LUCENE_29));

   bq.Add(qry,BooleanClause.Occur.Must);

   //this is the country query (modify the Country field name to whatever you have)
   string country = "UK";
   Query q2 = new QueryParser(Version.LUCENE_CURRENT, "Country", analyzer).parse(country);
   bq.Add(q2,BooleanClause.Occur.Must);
   searcher = new IndexSearcher(_directory, false);

   TopDocs topDocs = searcher.Search(bq, null, ((PageIndex + 1) * PageSize), Sort.RELEVANCE);
   ScoreDoc[] scoreDocs = topDocs.ScoreDocs;
   int resultsCount = topDocs.TotalHits;
   list.HasData = resultsCount;
   StartRecPos = (PageIndex * PageSize) + 1;
   if (topDocs != null)
   {
     //loop through your results

   } 
```

# android - 更改 android API 级别时出错？

> ID：11790796
> 
> 赞同：5
> 
> 时间：2012-08-03T06:58:07.223
> 
> 标签：android

当我创建新项目时，我添加了 API 级别 14，我已经完成了我的应用程序，我想将 API 级别更改为 10，

我在资源中遇到错误--> values-v11--> style.xml 即`error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.`

在资源--> 值-v14--> style.xml

IE `error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.DarkActionBar'.`

我不明白这谁能解释

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T15:11:57.040

按照[ankita gahoi](https://stackoverflow.com/users/474419/ankita-gahoi)的建议，我进一步搜索并解决了问题。

尝试这个：

删除文件夹“values-11”和“values-14”（如果存在）。然后，如果此错误出现在控制台窗口中：

```
 "No resource identifier found for attribute 'showAsAction' in package 'android'" 
```

阅读这些问题的答案：

[“在包 'android' 中找不到属性 'showAsAction' 的资源标识符”](https://stackoverflow.com/questions/5260686/no-resource-identifier-found-for-attribute-showasaction-in-package-android)（Jason Hanley 的）

[如何更改 Android 项目的目标构建？](https://stackoverflow.com/questions/3342739/how-to-change-target-build-on-android-project)（艾伦·威尔）

我的构建目标已经设置为正确的 Android 版本，所以我将其设置为“Google APIs”，然后返回到之前的目标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T07:02:50.510

这些主题在 API 级别 11 或更高级别中可用，因此无法使用。因为您使用的是 API 级别 10。

参考这个链接 - [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T14:41:20.823

Happened to me on a specific case where one of the Android Library Projects had its reference SDK set to API 9\. What got me confused was that the Error Log showed the name of the project with the correct settings, and not the problematic one.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-18T09:19:21.627

转到 values-v11--> style.xml。替换代码：

```
<style name="LightThemeSelector" parent="android:Theme.Light"> 
```

通过代码：

```
<style name="LightThemeSelector" parent="android:Theme.Light"> 
```

# android - 共享偏好给予同时

> ID：11790797
> 
> 赞同：0
> 
> 时间：2012-08-03T06:58:19.947
> 
> 标签：android, date, sharedpreferences

每当我尝试通过单击按钮保存当前日期时，它都会正确保存，但是当我尝试检索数据时，我每次都得到 01/01/1970。

我的代码：

```
buttonsavetime.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                long date = System.currentTimeMillis();
        }
    });

long date2 = System.currentTimeMillis();
                SharedPreferences myPref = MyMixes.this.getSharedPreferences("myPrefs",MODE_WORLD_READABLE);
            SharedPreferences.Editor prefsEditor = myPref.edit();
            prefsEditor.putLong("difference",date);
            prefsEditor.commit();

            SharedPreferences myPrefs = MyMixes.this.getSharedPreferences("myPrefs",MODE_WORLD_READABLE);
            long syncdate = myPrefs.getLong("difference", System.currentTimeMillis()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:02:05.237

您正在保存 Homescreen.difference

```
prefsEditor.putLong("difference",HomeScreen.difference); 
```

这是什么？你不应该保存date2吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:03:38.233

这行应该：

```
prefsEditor.putLong("difference",HomeScreen.difference); 
```

不是

```
prefsEditor.putLong("difference",date2); 
```

# objective-c - 从另一个类调用 void 方法

> ID：11790799
> 
> 赞同：1
> 
> 时间：2012-08-03T06:58:34.143
> 
> 标签：objective-c, xcode, xcode4.3

我有两个班级：`MainClass`和`SecondClass`。我已经导入`SecondClass.H`以`MainClass.m`使用其中的一些方法。我可以调用具有双类型输入的方法，但我不能（或不知道如何）调用没有（或 void 类型）输入的方法。我可以通过命令调用 double 类型的方法：`[self.second someMethod2: type double];`我尝试通过使用调用 void 输入法：`[self.second someMethod1];`但这不起作用。

我在不同的类中有这两种方法。

-(void)pushOperand:(double)operand {

```
NSNumber *operandObject = [NSNumber numberWithDouble:operand];

[self.operandStack addObject:operandObject]; 
```

}

-（双）popOperand {

```
NSNumber *operandObject = [self.operandStack lastObject];
if( operandObject ) [self.operandStack removeLastObject];
return [operandObject doubleValue]; 
```

}

我可以使用第一种方法

[self.brain pushOperand:[self.display.text doubleValue]];

但是xcode甚至找不到第二种方法。我试过了

[self.brain popOperand];, [self.brain popOperand];, ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:12:33.023

假设您有两个类，ClassA 和 ClassB。

**重要说明，在 ClassA 的接口文件中 takeNothingAndReturnNothing 必须声明为原型， `-(void)takeNothingAndReturnNothing;`这样它才能成为公共的**

在`ClassA`您有一个名为的实例方法`takeNothingAndReturnNothing`（名称显示该方法是无效的）并且方法声明如下所示

```
-(void)takeNothingAndReturnNothing{
   NSLog("this is %s from ClassA",  __FUNCTION__);
} 
```

在`ClassB`（导入后`ClassA`）首先创建一个对象，`ClassA`然后调用它的实例方法，如下所示。

```
ClassA *theObject=[[ClassA alloc]init];
[theObject takeNothingAndReturnNothing]; 
```

# map - gnuplot 热图颜色范围

> ID：11790804
> 
> 赞同：9
> 
> 时间：2012-08-03T06:59:10.103
> 
> 标签：map, gnuplot, heat

我在一个文件中有一些 XYZ 数据，我正在使用 gnuplot 来显示它。我正在创建一个热图，即。一个 2D 图，其中 Z 值使用颜色表示。现在我正在使用以下脚本：

```
set palette defined (0 "blue", 1 "red")
plot "xyz.dat" u $1:$2:$3 w image 
```

我的问题是，gnuplot 忽略了调色板定义中的 0 和 1。它使用指定的颜色，但根据文件中的最小和最大 Z 值重新缩放。这使得很难直观地比较 z 范围不同的不同图。

如何告诉 gnuplot 停止重新缩放 z 颜色范围？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T14:06:53.590

“设置调色板定义”命令将您在使用灰度绘图时获得的灰度值映射到调色板上；缩放到 min -> 0 和 max -> 1 是它应该如何工作的。如果要制作一组具有相同数据缩放比例的图，则需要使用“set cbrange”命令。例如，

```
 set cbrange [0:0.5]
  set palette defined (0 "blue", 1 "red")
  splot '++' using 1:2:(sin($1)*cos($2)) w image 
```

给你一个最大数据值 0.5 映射到红色和 0 映射到蓝色的图像图。随后的情节，如

```
 splot '++' using 1:2:(0.5*sin($1)*cos($2)) w image 
```

将使用相同的缩放比例，因此可以比较它们。

# map - SVG 地图中的国家名称

> ID：11790805
> 
> 赞同：3
> 
> 时间：2012-08-03T06:59:12.543
> 
> 标签：map, svg, mapping

在 SVG 文件中存储国家名称的正确方法是什么？我使用 id 来存储国家代码，但是将国家名称也附加到路径上会非常有用。

根据[这篇](http://www.w3.org/TR/SVG/extend.html)文章，我应该为国家名称使用一些自定义命名空间吗？还是有一些通常使用的属性？我检查了一些公开可用的 SVG 地图，但找不到任何保留的国家/地区名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:03:42.730

每个元素都可以包含`<desc>`和`<title>`元素，这些元素[恰好用于描述所绘制的形状](http://www.w3.org/TR/SVG/struct.html#DescriptionAndTitleElements)。你应该使用其中之一。

如果您想要一个可以被查看文件内部的人/软件看到的语义描述，或者可能使用 JavaScript 对其进行操作以将其显示给用户、选择、过滤或其他方式，那么您应该使用该`<desc>`元素。

`<title>`另一方面，当鼠标悬停在该元素上时，该元素将显示给用户，就像`title`HTML 中的等效属性一样。请注意，标题必须是第一个正确作为工具提示的子元素。

# c++ - 从非常量到常量的转换示例

> ID：11790807
> 
> 赞同：1
> 
> 时间：2012-08-03T06:59:31.950
> 
> 标签：c++

引用 C++ Primer，第 4 版：

> 异常与 catch 异常说明符匹配的规则比用于将参数与参数类型匹配的规则限制得多。大多数转换都是不允许的，异常的类型和 catch 说明符必须完全匹配，只有几个可能的差异：
> 
> 1.允许从非常量到常量的转换。也就是说，非常量对象的抛出可以匹配指定为获取 const 引用的 catch。

你能给我一个例子来解释第一个术语吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:04:50.180

这是一个例子

```
int main()
{
  try
  {
    int x = 1;
    throw x;
  }
  catch (const int& e)
  {
    cout << "caught " << e << '\n';
  }
} 
```

你抛出一个非常量`int`，但你用`const int&`.

# c# - 使用不同的线程调用相同的存储过程？

> ID：11790808
> 
> 赞同：0
> 
> 时间：2012-08-03T06:59:31.933
> 
> 标签：c#, sql, multithreading

有一个存储过程执行非常繁重的过程。它在迭代大约 30 个表时重新生成 sql 插入脚本，完成该过程后，它开始将这些脚本插入到名为 X 的表中。该过程大约需要 20 分钟，这是不可接受的。您必须知道的最后一件事是由在 .NET 上创建的 web 方法调用的过程。

PS：表有索引。

这是我的问题

1.  我想使用多线程来解决这个问题。但不确定是否有帮助？我会将 sp 切成 5 块，同时从 5 个不同的线程调用它。我想知道这将有助于减少处理开始和结束之间的时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:04:22.677

这可能会起作用，因为不会阻塞或等待存储过程的其他部分完成。显然，您仍然受到服务器物理资源的限制。老实说，你能确定的唯一方法就是去做并衡量性能。

我会确保你准确地分析存储过程的每个部分的依赖关系，然后再做一次以确保。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T07:21:22.483

我还尝试从具有多个线程的控制台应用程序调用相同的 SP，但我没有看到我的 SP 正在并行运行。即使我使用线程多次调用它，它也是一个接一个地执行。我正在使用 Sql server 2008（速成版），并且我已经在 SQL Server 2008 中配置了并行处理。但它没有并行运行。任何想法或建议将不胜感激。

谢谢文卡特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:28:14.473

您是否考虑过将大量插入带索引的表所带来的性能损失。如果您还没有这样做，请在没有索引的表上尝试该过程的插入部分并衡量任何收益。如果它被证明是有益的，请编写索引创建脚本并在插入后运行它。

线程可能会有所帮助，但我的经验是优化 sql 进程可能会带来更多好处。我很想听听你的发现。

# python - 如何通过python google drive api创建一个新文件夹，MediaFileUpload有什么用？

> ID：11790810
> 
> 赞同：4
> 
> 时间：2012-08-03T06:59:37.410
> 
> 标签：python, desktop-application, google-drive-api

现在，我正在编写一个 python 桌面应用程序。我想通过 google drive api 在我的 google drive 帐户中创建一个文件夹，但我不知道该怎么做。我看过 Files: insert on API reference 的例子，但这个函数似乎只上传我电脑中存在的文件。如何创建文件夹？此外，我可以通过 google drive API 创建任何类型的文件吗？函数 MediaFileUpload 的用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:42:57.523

[此处](https://developers.google.com/drive/folder)记录了创建文件夹。在同一页面上，您还将找到有关指定 MIME 类型的信息（以回答您的第二个问题）。

MediaFileUpload 是一个类而不是一个函数。这个类的注释代码在[这里](https://code.google.com/p/google-drive-sdk-samples/source/browse/python/lib/apiclient/http.py)。

# java - Linux 上具有零端口的 CommPortIdentifier.getPortIdentifiers

> ID：11790811
> 
> 赞同：2
> 
> 时间：2012-08-03T06:59:46.590
> 
> 标签：java, linux, rxtx

我正在尝试在 ubuntu 上连接串口。但是，它对我不起作用。我成功地在 Windows 上使用不同的驱动程序运行了相同的项目。问题是我在使用这个时无法加载任何端口：

CommPortIdentifier.getPortIdentifiers(); // 我使用的是 rxtx 2.1.7

它总是返回零端口。我想使用与 minicon 配合得很好的端口 ttyS0，所以我确信端口没有被阻塞并且机器没有损坏。

有人有这个理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:12:51.780

这只是因为低权限。我不得不将自己添加到一个应该使用 ttyS0 的组中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-11T18:54:23.610

我用了这个命令

须藤 chmod 666 /dev/ttyUSB0

我遇到了同样的问题，并且在我使用此命令后立即起作用。就像 Smolda 说的，这是一个权限问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-09T15:23:55.137

如果没有任何帮助，您应该考虑将此行添加到您的 java 代码中：

```
System.setProperty("gnu.io.rxtx.SerialPorts", "/dev/yourtty"); 
```

为我做的。（仅当您使用 RXTX 库时）

# winapi - 在 Visual C++ 中旋转线段

> ID：11790812
> 
> 赞同：0
> 
> 时间：2012-08-03T06:59:48.167
> 
> 标签：winapi, mfc, geometry, gdi, trigonometry

好吧，我正在尝试使用 MFC 构建一些小型 Windows 应用程序并尝试了解事物的工作原理，但在绘制国家国旗时我被卡住了。以下代码行在中间矩形的中心绘制三个矩形和一个圆，接下来需要将辐条画成圆形，即8个直径相隔45度角。

```
void CMainWindow::OnPaint (){
CPaintDC dc(this);
for (int i=0;i <=100;i+=50) {
    dc.SetBkMode(TRANSPARENT);
    CRect rect;
    CPen pen(PS_SOLID, 1, RGB(0,0,0));
    CPen *oldPen = dc.SelectObject(&pen);
    if (i == 0){
         CBrush brush(RGB(255,130,0));
         CBrush *oldBrush = dc.SelectObject(&brush);
         dc.Rectangle(75,(i+50),275,(i+100));
    }
    else if(i == 50) {
         CBrush brush(RGB(255,255,255));
         CBrush *oldBrush = dc.SelectObject(&brush);
         dc.Rectangle(75,(i+50),275,(i+100));
         CPen pen2(PS_SOLID, 1,RGB(0,0,255));
         CPen *oldPen = dc.SelectObject(&pen2);
         dc.Ellipse(150,100,200,150);
    }
    else {
         CBrush brush(RGB(34,139,34));
         CBrush *oldBrush = dc.SelectObject(&brush);
         dc.Rectangle(75,(i+50),275,(i+100));
    }
} 
```

我不知道该怎么做，我试图在 MFC 库中找到它，但没有运气！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:27:42.030

这是 sin() cos() 方法的示例。我没有看到将整个代码块放在 for 循环中的意义，表明我删除了那部分。

```
#include "math.h"
#define PI 3.1415926535898
void DrawIndiaFlag(CDC & dc , int x, int y)
{
    dc.SetBkMode(TRANSPARENT); 
    CRect rect; 
    CPen pen(PS_SOLID, 1, RGB(0,0,0)); 
    CPen *oldPen = dc.SelectObject(&pen); 

    {
        CBrush brush(RGB(255,130,0)); 
        CBrush *oldBrush = dc.SelectObject(&brush); 
        dc.Rectangle(x,(y),x+200,(y+50)); 
        dc.SelectObject(oldBrush);
    }

    {
        CBrush brush(RGB(255,255,255)); 
        CBrush *oldBrush = dc.SelectObject(&brush); 
        dc.Rectangle(x,(50+y),x+200,(y+100)); 
        CPen pen2(PS_SOLID, 1,RGB(0,0,255)); 
        CPen *oldPen = dc.SelectObject(&pen2); 
        dc.Ellipse(x+75,y+50,x+125,y+100); 

        // Draw spokes
        int nOriginX = x+100;
        int nOriginY = y+75;
        int nRadius = 25;
        int nSpokes = 24;
        double fAngle = 2*PI/nSpokes;

        for (int i =0; i<nSpokes; i++)
        {
            dc.MoveTo(nOriginX,nOriginY);
            int nX = (int)ceil(cos((fAngle)*i)*(nRadius)+nOriginX);
            int nY = (int)ceil(sin((fAngle)*i)*(nRadius)+nOriginY);
            dc.LineTo(nX,nY);
        }
        dc.SelectObject(oldPen);

    }

    {
        CBrush brush(RGB(34,139,34)); 
        CBrush *oldBrush = dc.SelectObject(&brush); 
        dc.Rectangle(x,(100+y),x+200,(150+y)); 
        dc.SelectObject(oldBrush);
    }

    dc.SelectObject(oldPen);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:07:17.037

我认为你所追求的是`CDC::LineTo`方法（你可以`CDC::MoveTo`用来到达起点）。更多信息：

"从当前位置画一条线，直到，但不包括，由 x 和 y（或点）指定的点...用选定的笔画线。当前位置设置为 x、y 或点。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:35:12.387

我不熟悉您正在使用的 API，但您可以；

*   从一个细长的矩形开始（假设没有线条功能）作为您的线条
*   从圆的中心画到顶部，这应该是一个容易计算的坐标
*   从您的第一行获取这些起始位置并围绕圆心旋转它们，如果它们没有 API 功能，您可以按照此处所述手动执行[http://www.euclideanspace.com/maths/geometry/affine/ aroundPoint/index.htm](http://www.euclideanspace.com/maths/geometry/affine/aroundPoint/index.htm)
*   使用这些新的旋转坐标来绘制下一条线，然后重复

# jsf - java.lang.RuntimeException：找不到 FacesContext

> ID：11790813
> 
> 赞同：1
> 
> 时间：2012-08-03T06:59:48.260
> 
> 标签：jsf

我是 JSF 的新手，因为我在收到此异常前一周就开始创建 JSF 应用程序

```
java.lang.RuntimeException: Cannot find FacesContext 
```

我正在使用 Eclipse 靛蓝

我已经尝试过使用 url 模式 /faces/*、faces/HelloWorld.jsp、jsf/HelloWorld.jsp 谁能告诉我我们必须在什么时候使用哪个 url...？？

我的

## web.xml

```
<display-name>JSFTutorial</display-name>
<welcome-file-list>
    <welcome-file>HelloWorld.jsp</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/jsf/*</url-pattern>
</servlet-mapping> 
```

* * *

## 我的 faces.config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<managed-bean>
    <managed-bean-name>helloWorldBean</managed-bean-name>
    <managed-bean-class>com.myhomepageindia.jsftutorial.web.bean.HelloWorldBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
</managed-bean>

<navigation-rule>
    <display-name>HelloWorld</display-name>
    <from-view-id>/HelloWorld.jsp</from-view-id>
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>/HelloWorldResult.jsp</to-view-id>
    </navigation-case>
</navigation-rule> 
```

* * *

## 我的托管豆

```
package com.myhomepageindia.jsftutorial.web.bean;

public class HelloWorldBean {
private String firstName;
private String lastName;

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public String getCompleteName() {
    return this.firstName + " " + this.lastName;
}

public String sayHelloWorld() {
    return "success";
} 
```

## }

## HelloWorld.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"         "http://www.w3.org/TR/html4/loose.dtd">
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Hello World</title>
</head>
<body>
<%
    try {
%>
<f:view>
    <p>
        <h:message id="errors" for="firstName" style="color:red" />
        <h:message id="errors1" for="lastName" style="color:red" />
    </p>
    <h:form>
        <h:outputText value="First Name"></h:outputText>
        <h:inputText id="firstName" value="#{helloWorldBean.firstName}"
            required="true"></h:inputText>
        <h:outputText value="Last Name"></h:outputText>
        <h:inputText id="lastName" value="#{helloWorldBean.lastName}"
            required="true"></h:inputText>
        <h:commandButton action="#{helloWorldBean.sayHelloWorld}"
            value="Get Complete Name"></h:commandButton>
    </h:form>
</f:view>
<%
    } catch (Exception e) {
        out.println(e);
    }
%>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:31:27.797

根据您的 web.xml 配置，您应该调用“/jsf/”下的页面以使它们与 Faces Servlet 一起使用。有两种可能的解决方案：

*   确保您访问的是这样的页面[http://your.domain.com/YourProject/jsf/anyPAge.jsp](http://your.domain.com/YourProject/jsf/anyPAge.jsp)

*   尝试将 web.xml 中的配置更改为类似

    ```
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping> 
    ```

    然后访问您的页面，例如[http://your.domain.com/YourProject/jsf/anyPAge.jsf](http://your.domain.com/YourProject/jsf/anyPAge.jsf)

最后一个选项的注意事项：如果你使用 JSF 1.x，你**不能**使用 *.jsp 作为 url-pattern，它会给你一个巨大的错误解释：[Help with JSF 1.2 + Jboss 5.1.0](https://stackoverflow.com/q/4491703/1065197)（它不介意如果你使用 Tomcat，你会遇到同样的错误）。如果您使用的是 JSF 2.x，那么就没有问题，您应该使用 Facelets（那些带有 xhtml 扩展名的页面），如下所述：[JSF 和 Facelets 之间有什么区别？](https://stackoverflow.com/q/11457765/1065197)

* * *

测试 JSF 是否在您的项目中工作的一个非常简单的方法是制作这个简单的页面：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"         "http://www.w3.org/TR/html4/loose.dtd">
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Hello World</title>
</head>
<body>
    <f:view>
        <h:outputText value="Hello world!" />
    </f:view>
</body>
</html> 
```

如果此页面出现错误，那么您的项目或应用程序服务器中一定有其他东西阻塞了 Faces Servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:10:26.187

确保你的类路径中有所有正确的 Jar。

更改代码中的以下内容：

1.  将您更改`url-pattern`为.`web.xml``*.jsf`

2.  将所有 html 代码包装在`<f:view>`标签内

    ```
    <%@ page pageEncoding="UTF-8" %>
    <%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>
    <%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
    <!doctype ... >
    <f:view>
        <html>
             ...
        </html>
    </f:view> 
    ```

现在您的网址应该是：

```
localhost:8080/JSFTutorial/HelloWorld.jsf 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-20T07:41:51.923

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-31T15:40:44.650

对我有用的是在我的 jsp 文件中省略使用 Taglib 并将它们移动到 html 标记中，例如

```
<%@ taglib prefix="f" uri="http://java.sun.com/jsf/core" %>
<%@ taglib prefix="h" uri="http://java.sun.com/jsf/html" %>

<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
  <head><title>Simple jsp page</title></head>
  <body>

     <f:view>
        <h:outputLabel value="Hello, world"/>
     </f:view>

  </body>
</html> 
```

变成

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
   <head><title>Simple jsp page</title></head>
   <body>

     <f:view>
        <h:outputLabel value="Hello, world"/>
     </f:view>

   </body>
</html> 
```

# jsp - 如何计算日期相同的列的总和？

> ID：11790814
> 
> 赞同：0
> 
> 时间：2012-08-03T07:00:02.957
> 
> 标签：jsp

我想获得日期相同的列的总和。

日期 费用
2012 年 3 月 8 日 200
2012 年 3 月 8 日 400
2012 年 4 月 8 日 300
2012 年 4 月 8 日 100

```
<%stat=con.createStatement();
rs=stat.executeQuery("select * from pat.dbo.PHPL"); 
while(rs.next())
{
date=rs.getString("Date");
charges=rs.getString("Charges");%>
<table>

<tr>
<td><%=date%></td>
<td><%=charges%></td>
<%}%>
</tr></table> 
```

想要这个结果：

收费日期2012 年 3 月 8 日
600
2012 年 4 月 8 日 400

我希望这与 jsp 不在 sql 查询中。当我在数据库中将费用的数据类型设置为字符串时。所以查询中不可能 sum 。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:46:35.417

您没有提供有关您正在使用的 dbms 的任何信息，但是根据您的原始查询，我假设您使用的是 Microsoft 的 sqlserver。

所以，你可以写：

按日期从 pat.dbo.PHPL 组中选择日期，sum(cast(charges as float))。请参阅此链接：

[http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:59:53.077

我更喜欢 José Esteves-Pereira 通过转换的解决方案，但你可以试试这个 utnested 代码：

```
<%stat=con.createStatement();
rs=stat.executeQuery("select * from pat.dbo.PHPL");
actDate
while(rs.next())
{
  date = rs.getString("Date");
  if (actDate != date)
  {
    actDate = date;
    charges = rs.getString("Charges");
  }
  else
  {
    charges += rs.getString("Charges");
  }
%>
<table>

<tr>
<td><%=actDate %></td>
<td><%=charges%></td>
<%}%>
</tr>
</table> 
```

# c - 使用读取功能使用C（大于4GB）读取大文件，导致问题

> ID：11790822
> 
> 赞同：7
> 
> 时间：2012-08-03T07:00:36.763
> 
> 标签：c, unix, file-io, posix

我必须编写 C 代码来读取大文件。代码如下：

```
int read_from_file_open(char *filename,long size)
{
    long read1=0;
    int result=1;
    int fd;
    int check=0;
    long *buffer=(long*) malloc(size * sizeof(int));
    fd = open(filename, O_RDONLY|O_LARGEFILE);
    if (fd == -1)
    {
       printf("\nFile Open Unsuccessful\n");
       exit (0);;
    }
    long chunk=0;
    lseek(fd,0,SEEK_SET);
    printf("\nCurrent Position%d\n",lseek(fd,size,SEEK_SET));
    while ( chunk < size )
    {
        printf ("the size of chunk read is  %d\n",chunk);
        if ( read(fd,buffer,1048576) == -1 )
        {
            result=0;
        }
        if (result == 0)
        {
            printf("\nRead Unsuccessful\n");
            close(fd);
            return(result);
        }

        chunk=chunk+1048576;
        lseek(fd,chunk,SEEK_SET);
        free(buffer);
    }

    printf("\nRead Successful\n");

    close(fd);
    return(result);
} 
```

我这里面临的问题是，只要传递的参数（大小参数）小于264000000字节，似乎就可以读取。每个周期我都在增加块变量的大小。

当我通过264000000字节或更多时，读取失败，即：根据检查使用读取返回-1。

谁能指出我为什么会这样？我在正常模式下使用 cc 进行编译，而不是使用 DD64。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T08:57:20.187

首先，为什么你需要`lseek()`在你的周期？`read()`将使光标在文件中前进读取的字节数。

并且，对于主题：long 和 chunk 的最大值分别为`2147483647`，任何大于该值的数字实际上都将变为负数。

您想使用`off_t`声明 chunk:`off_t chunk`和 size as `size_t`。`lseek()`这就是失败的主要原因。

而且，再一次，正如其他人所注意到的那样，您不希望`free()`在循环内部缓冲。

另请注意，您将覆盖已读取的数据。此外，`read()`不一定会像您要求的那样读取，因此最好按实际读取的字节数而不是您要读取的字节数来推进块。

考虑到一切，正确的代码应该看起来像这样：

```
// Edited: note comments after the code
#ifndef O_LARGEFILE
#define O_LARGEFILE 0
#endif

int read_from_file_open(char *filename,size_t size)
{
int fd;
long *buffer=(long*) malloc(size * sizeof(long));
fd = open(filename, O_RDONLY|O_LARGEFILE);
   if (fd == -1)
    {
       printf("\nFile Open Unsuccessful\n");
       exit (0);;
    }
off_t chunk=0;
lseek(fd,0,SEEK_SET);
printf("\nCurrent Position%d\n",lseek(fd,size,SEEK_SET));
while ( chunk < size )
  {
   printf ("the size of chunk read is  %d\n",chunk);
   size_t readnow;
   readnow=read(fd,((char *)buffer)+chunk,1048576);
   if (readnow < 0 )
     {
        printf("\nRead Unsuccessful\n");
        free (buffer);
        close (fd);
        return 0;
     }

   chunk=chunk+readnow;
  }

printf("\nRead Successful\n");

free(buffer);
close(fd);
return 1;

} 
```

我还冒昧地删除了结果变量和所有相关逻辑，因为我相信它可以被简化。

编辑：我注意到某些系统（最值得注意的是，BSD）没有`O_LARGEFILE`，因为那里不需要它。因此，我在开头添加了一个#ifdef，这将使代码更具可移植性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:07:45.310

lseek 函数可能难以支持大文件大小。尝试使用[lseek64](http://linux.die.net/man/3/lseek64)

请查看链接以查看使用 lseek64 函数时需要定义的相关宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:24:31.320

如果是 32 位机器，读取大于 4gb 的文件会出现问题。因此，如果您使用 gcc 编译器，请尝试使用宏`-D_LARGEFILE_SOURCE=1`和`-D_FILE_OFFSET_BITS=64`.

也请检查此[链接](http://www.suse.de/~aj/linux_lfs.html)

如果您使用任何其他编译器，请检查类似类型的编译器选项。

# php - 获取数组倒数第二个元素的键和值

> ID：11790823
> 
> 赞同：2
> 
> 时间：2012-08-03T07:00:38.017
> 
> 标签：php, arrays

我有一个未定义大小的数组，例如：

```
<?php
$array["foo"] = 86 ;
$array["bar"] = 49 ;
$array["matt"] = 96 ;
?> 
```

我不想打扰数组的内部指针，而是想获得数组倒数第二个值的副本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T07:05:28.067

我不知道，为什么你使用地图，而实际上你想要一个有序列表，但是

```
$tmp = array_values($array);
echo $tmp[count($tmp) -2]; 
```

应该这样做。使用 php5.4 这应该可以工作

```
echo array_values($array)[count($array)-2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:36:56.580

我不确定您的数组计划的大小，因此将所有值复制到单独的数组中可能不是一个好主意。

下面的代码从倒数第二个位置切出一个长度为 1 的数组，并设置`$key`and `$value`。

```
$pair = array_slice($array, -2, 1, true);
$key = key($pair);
$value = current($pair); 
```

PS：大概应该放到一个简单的分离函数中吧？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:13:51.437

你可以这样做。

```
$array["foo"] = 86 ;
$array["bar"] = 49 ;
$array["matt"] = 96 ;

$x = count($array);

foreach($array as $row)
{
    if($x == 2)
    { $secondLast = $row;}
    $x--; 
}
echo $secondLast; 
```

因为您使用的是关联数组。

# c# - C# 的财务图表组件

> ID：11790824
> 
> 赞同：4
> 
> 时间：2012-08-03T07:00:40.697
> 
> 标签：c#, charts, plot

我需要一个用于为我的应用程序绘制具有以下功能的财务图表的组件：

1.  现场绘图。
2.  OHLC 图表、烛台图表和前一天收盘图表。
3.  各种分析研究。
4.  使用设计工具轻松分发。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:20:04.037

如果您正在开发*Windows 窗体*或 Web 应用程序，那么开源[Zedgraph](http://sourceforge.net/projects/zedgraph/)是一个很好的解决方案。[您可以在此处](http://goorman.free.fr/ZedGraph/zedgraph.org/wiki/index1369.html?title=Bar_Charts)查看 OHLC 和烛台图表的示例。还有足够的设计器支持将 Zedgraph 图形控件合并到您的表单中。

.NET Framework 4.0 还包含开箱即用的[Windows 窗体图表，尽管 Zedgraph 更强大。](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.aspx)

[WPF 图表](http://wpf.codeplex.com/)在 Codeplex 上的 WPF 工具包中可用。它甚至比它的*Windows 窗体*通讯器更不完整，但在 WPF 上，它至少应该是一个不错的开源替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:09:38.537

Highcharts 或 Highstock - [http://www.highcharts.com/](http://www.highcharts.com/)

不过，Highcharts 或 Highstock 用于 Web 开发。这就是你所追求的吗？

# c# - 至少一个类字段不为空

> ID：11790828
> 
> 赞同：1
> 
> 时间：2012-08-03T07:00:52.637
> 
> 标签：c#

我有一堂课：

```
public class A
{
   public string field1 {get;set;}
   public string field2 {get;set;}
} 
```

我想检查至少一个属性是否不为空。

这该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T07:08:28.337

反射可以帮助您：

```
A myInstance = new A();
Type myType = myInstance.GetType();
if (myType.GetProperties(BindingFlags.Public | BindingFlags.NonPublic | 
                            BindingFlags.Static | BindingFlags.Instance)
   .Any(property => propoerty.CanRead && property.GetValue(myInstance, null) != null)) 
{ /* something is not null in myInstance */} 
```

不管你的班级有多少属性。

*注意：正如评论所指出的，这不会检查非公共和仅设置的属性会炸毁它。代码已经过调整。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:02:54.657

它可以是 1 行 .. 像这样：

```
if (instanceOfA.field1 != null || instanceOfA.field2 != null) 
```

..事实上，对于字符串，最好这样测试：

```
if (string.IsNullOrEmpty(instanceOfA.field1) ||
    string.IsNullOrEmpty(instanceOfA.field2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:06:07.943

```
if(obj.field1 != null || obj.field2 != null) 
```

# java - 设置 JPanel 布局

> ID：11790830
> 
> 赞同：4
> 
> 时间：2012-08-03T07:00:57.903
> 
> 标签：java, swing, layout, jpanel, layout-manager

（说）我创建了一个带有三个按钮的 JPanel。我想按如下方式放置按钮（我已经使用 netbeans GUI 编辑器完成了此操作。但我需要手动编写整个 GUI）。

![在此处输入图像描述](../Images/6b6566a8c7901e884ade83fbce2e1138.png)

有人可以告诉我实现这一目标的方法吗？

***（换句话说，我需要将一些按钮右对齐，一些左对齐。）***

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T07:03:50.090

我猜您希望“*配置*”按钮尽可能位于左侧，而“*确定*”和“*取消*”组合在右侧。如果是这样，我建议使用一个`BorderLayout`并将*Configure*按钮放在 WEST 中，并使用一个流布局*Ok*、*Cancel*并将该面板放在 EAST 中。

另一种选择是使用`GridBagLayout`和利用该`GridBagConstrant.anchor`属性。

由于您花时间避免使用 NetBeans GUI 编辑器，因此这里有一个很好的示例 :-)

![在此处输入图像描述](../Images/d0fe83f82fd28ffcd3e7b5a2ac0a7050.png)

下面的代码：

```
import java.awt.BorderLayout;
import javax.swing.*;

public class FrameTestBase {

    public static void main(String args[]) {

        // Will be left-aligned.
        JPanel configurePanel = new JPanel();
        configurePanel.add(new JButton("Configure"));

        // Will be right-aligned.
        JPanel okCancelPanel = new JPanel();
        okCancelPanel.add(new JButton("Ok"));
        okCancelPanel.add(new JButton("Cancel"));

        // The full panel.
        JPanel buttonPanel = new JPanel(new BorderLayout());
        buttonPanel.add(configurePanel, BorderLayout.WEST);
        buttonPanel.add(okCancelPanel,  BorderLayout.EAST);

        // Show it.
        JFrame t = new JFrame("Button Layout Demo");
        t.setContentPane(buttonPanel);
        t.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        t.setSize(400, 65);
        t.setVisible(true);
    }
} 
```

# html - 在drupal 6中限制文本输入中的输入符号

> ID：11790832
> 
> 赞同：0
> 
> 时间：2012-08-03T07:01:11.473
> 
> 标签：html, drupal, drupal-6

我有输入文本区域，我需要将输入符号限制为仅数字，+/-/“”。有没有办法在不制作自己的 JS 文件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T04:54:35.933

在 HTML 中，您可以设置`<input pattern="[0-9+\- ]*">`. 浏览器对此 HTML5 功能的支持是有限的，并且作者对错误报告和处理的控制是原始的。

通常人们使用 JavaScript 进行这种浏览器端检查。它不需要 JavaScript 文件；该代码可以嵌入到 HTML 文档中。

# linux - 如何测量ARM功耗？

> ID：11790833
> 
> 赞同：0
> 
> 时间：2012-08-03T07:01:24.253
> 
> 标签：linux, arm, power-management

我正在尝试测量 ARM-Cortex-A9/Ubuntu 12.04 平台上的处理器的瞬时功耗。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:45:39.753

有4种明显的方法：

*   从其他可测量的参数（例如 CPU 负载）估计它
*   测量板载电源中的电流检测电阻
*   使用带有某种数据记录功能的外部电源测量整个系统的功耗[也可以使用低值电阻器和电压表]
*   [如果测量某个应用程序的功耗] 在其他具有此功能的设备上运行代码。[Apple 的开发工具和 iOS 对此提供了难以置信的支持。也非常适合分析]。

由于您使用的是 OMAP4460（Pandaboard per chance？），它可能会与 TWL6030 电源 IC 配对。快速查看数据表表明它能够测量从电池运行时的电流消耗（这就是电池电量指示器的实现方式）。将有驱动程序支持。OMAP4430（可能扩展名为 4460）没有自己的电源监控功能。

也可能值得在 TI 的网站上查看白皮书。这是很常见的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:04:34.963

我认为这主要取决于您的处理器或SOC制造商。ARM 定义处理器内核，制造商定义它周围的一切（如外围设备等）。

此外，当 Ubuntu 移植到您的平台上时，也许只有一些功率测量应用程序也支持该平台。

# c# - jQuery sortable：如何正确发布元素 id 数组？

> ID：11790841
> 
> 赞同：3
> 
> 时间：2012-08-03T07:01:52.100
> 
> 标签：c#, jquery, asp.net, ajax, asp.net-mvc-3

问题：

我正在使用可排序的 jQuery。我使用了本教程：
[http ://www.xmech.net/programming/jquery-ui-sortable-tutorial/](http://www.xmech.net/programming/jquery-ui-sortable-tutorial/)

现在这给了我一个像这样的字符串：

```
ID[]=2&ID[]=3&ID[]=4&ID[]=1 
```

或者更糟糕的是，当我调用 id 的 IDa_1、IDb_2、IDc_3、IDd_4 时，它给了我

```
IDb[]=2&IDc[]=3&IDd[]=4&IDa[]=1 
```

我发现这种格式最可怕且无用......我只想要页面：[“IDb_2”，“IDc_3”，“IDd_4”，“IDa_1”]并在数组索引中拥有元素的顺序。

为了纠正这个问题，我做了：

```
var xxx =  { pages: $(this).sortable('toArray') };
alert(JSON.stringify(xxx)); 
```

这是我的家庭控制器：

```
public string SaveSortable(string pages)
{
    string strPages = Request.Params["pages"];

    Console.WriteLine(pages);
    return pages;
}

    public ActionResult Sortable()
    {
        return View();
    } // End Action Sortable 
```

问题是，“pages”和 strPages 始终为空......
虽然它进入了正确的控制器......
我做错了什么？

这是我的 .cshtml：

```
@{
    Layout = null;
}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>

    <style type="text/css" media="all">
        html {margin: 0px; padding: 0px; height: 100%;}
        body {margin: 0px; padding: 0px; height: 100%;}
        input{margin: 0px; padding: 0px; }
    </style>

    <style type="text/css" media="all">

         .menu li 
         {
            list-style: none;
            padding: 10px;
            margin-bottom: 5px;
            border: 1px solid #000;
            background-color: #C0C0C0;
            width: 150px;
            display: inline;
        }
    </style>

    <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery-1.7.2.min.js")"></script>  
    <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery-ui/1_8_21/js/jquery-ui-1.8.21.custom.min.js")"></script>  

    <script type="text/javascript" language="javascript">

        Date.prototype.getTicksUTC = function () {
            return Date.parse(this.toUTCString()) + this.getUTCMilliseconds();
        } // End Function getTicksUTC

        var tickURL = '@Url.Content("~/Scripts/jQuery/SlickGrid/images/tick.png")';

        $(document).ready(function () {
            //$('#menu-pages').sortable();
            $("#menu-pages").sortable({
                update: function (event, ui) {
                    alert("posting");

                    //var ElementsOrder = $(this).sortable('toArray').toString();
                    var ElementsOrder = $(this).sortable('toArray');//.toString();
                    //alert(JSON.stringify(ElementsOrder));

                    var xxx =  { pages: $(this).sortable('toArray') };
                    //alert(JSON.stringify(xxx));
                    //document.writeln("<h1>"+ JSON.stringify(xxx) + "</h1>");

                    // $.post("@Url.Action("SaveSortable", "Home")?no_cache=" + new Date().getTicksUTC(), { pages: $('#menu-pages').sortable('serialize') });
                    // $.post("@Url.Action("SaveSortable", "Home")?no_cache=" + new Date().getTicksUTC(), { pages: $('#menu-pages').sortable('serialize', { key: 'id' }) });

                    $.post("@Url.Action("SaveSortable", "Home")?no_cache=" + new Date().getTicksUTC(), { pages: $(this).sortable('toArray') });

                }
            });

        });

    </script>

</head>
<body>
    <ul class="menu" id="menu-pages">
        <li id="ID_1">Home</li>
        <li id="ID_2">Blog</li>
        <li id="ID_3">About</li>
        <li id="ID_4">Contact</li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T07:12:35.877

只需使用 JSON 请求：

```
$('#menu-pages').sortable({
    update: function (event, ui) {
        $.ajax({
            url: '@Url.Action("SaveSortable", "Home")',
            type: 'POST',
            cache: false,
            contentType: 'application/json',
            data: JSON.stringify({ pages: $(this).sortable('toArray') }),
            success: function(result) {
                // ...
            }
        });
    }
}); 
```

进而：

```
[HttpPost]
public ActionResult SaveSortable(string[] pages)
{
    // pages will contain what you need => a list of ids
    ...
} 
```

作为记录，以下是 JSON 请求 POST 有效负载的样子：

```
{"pages":["ID_2","ID_3","ID_1","ID_4"]} 
```

# c# - 如何将变量的值从一个类的循环中抛出到另一个类

> ID：11790846
> 
> 赞同：-4
> 
> 时间：2012-08-03T07:02:15.097
> 
> 标签：c#

我正在尝试将一个类的循环的值用于另一个类我该怎么做。请帮我..

```
 while (!sStreamReader.EndOfStream)
            {
                string sLine = sStreamReader.ReadLine();
                // make sure we have something to work with
                if (String.IsNullOrEmpty(sLine)) continue;

                string[] cols = sLine.Split(',');
                // make sure we have the minimum number of columns to process
                if (cols.Length > 4)
                {
                    double a = Convert.ToDouble(cols[1]);
                    Console.Write(a);
                    int b = Convert.ToInt32(cols[3]);
                    Console.WriteLine(b);
                    Console.WriteLine();
                }
            } 
```

我正在尝试将 a 和 b 的值用于另一个类。这个循环是另一个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:07:53.443

您可能会更好，`Int32.TryParse`因此您一开始就不会遇到异常，但是要将其抛出到下一个级别，您会使用`throw`（[请参阅此处的 throw 与 throw ex](https://stackoverflow.com/questions/178456/what-is-the-proper-way-to-re-throw-an-exception-in-c)）。即：在你的代码中，类似

```
try {
    while (!sStreamReader.EndOfStream)
        {
            string sLine = sStreamReader.ReadLine();
            // make sure we have something to work with
            if (String.IsNullOrEmpty(sLine)) continue;

            string[] cols = sLine.Split(',');
            // make sure we have the minimum number of columns to process
            if (cols.Length > 4)
            {
                double a = Convert.ToDouble(cols[1]);
                Console.Write(a);
                int b = Convert.ToInt32(cols[3]);
                Console.WriteLine(b);
                Console.WriteLine();
            }
        }
} catch {
    throw;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:18:30.223

现在你不能使用`a`和/或`b`退出`if`语句。这是因为您只是在此处声明它们，因此您只能在最后一个大括号（if 语句的）之前访问它们。

如果您想访问它们，则必须提前声明它们。即，如果您希望它们仅在`while`循环中使用，请执行以下操作：

```
 while (!sStreamReader.EndOfStream)
    {
        double a = 0.00;
        int b = 0;

        string sLine = sStreamReader.ReadLine();
        // make sure we have something to work with
        if (String.IsNullOrEmpty(sLine)) continue;

        string[] cols = sLine.Split(',');
        // make sure we have the minimum number of columns to process
        if (cols.Length > 4)
        {
            a = Convert.ToDouble(cols[1]);
            b = Convert.ToInt32(cols[3]);
        }

        // You can now use these here too!
        Console.Write(a);
        Console.WriteLine(b);
        Console.WriteLine();
    } 
```

如果你想在范围之外使用它（你可能想循环这个词），`while`只需将它们提升到另一个级别，在`while`.

请注意，这仅适用于一个值。`a`和的值`b`每次都会被覆盖。如果您想要一个值列表或其他东西，请创建一个可以传递的数组。（见乔纳斯的例子）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:12:46.353

这取决于您想在该课程中做什么。正如我所看到的，有很多解决方案。你想要所有的 a 和 b 到你的班级吗？只需将它们保存到 2 个列表或类似的东西。然后将它们发送到类构造函数或方法中。例子 ：

```
 var listOfAs = new List<double>();
        var listOfBs = new List<int>();
        while (!sStreamReader.EndOfStream)
        {
           string sLine = sStreamReader.ReadLine();
           // make sure we have something to work with
           if (String.IsNullOrEmpty(sLine)) continue;
           string[] cols = sLine.Split(',');
           // make sure we have the minimum number of columns to process
           if (cols.Length > 4)
           {
               double a = Convert.ToDouble(cols[1]);
               listOfAs.Add(a);

               int b = Convert.ToInt32(cols[3]);
               listOfBs.Add(b);
           }
        }
//Here you can use all As and Bs and send them to the other class
MyClass.DoSomething(listOfAs,listOfBs); 
```

只想要 a 和 b foreach 案例吗？只需将它们直接发送到类构造函数或方法并直接在循环内使用它们，请注意这将发生在匹配 cols.length > 4 的 a 和 b 中。

循环内

```
double a = Convert.ToDouble(cols[1]);
int b = Convert.ToInt32(cols[3]);
MyClass.DoSomething(a,b); 
```

# jquery - 在 jstree 复选框中传递半选中节点的 id

> ID：11790855
> 
> 赞同：2
> 
> 时间：2012-08-03T07:02:53.440
> 
> 标签：jquery, asp.net-mvc-3, jstree

我在 three_state 中使用 jstree 复选框插件。我已经能够传递检查节点的 id。但出于我的目的，我还需要传递半选节点的 id（其子节点被部分选中的父节点的 id）。有什么办法我可以做到这一点？

我正在使用下面的代码：

```
real_checkboxes_names: function (n) {
    return [("check_" + (n[0].id)), n[0].id]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:35:53.913

document.getElementBId('checkedNodeID').parentNode.id 是如何工作的？首先查找插件方法，否则查看 DOM parentNode 属性是否可以帮助您（取决于生成的 html 结构，您可能需要 parentNode.parentNode）

# android - 如何处理 sencha touch 应用程序上的设备后退按钮

> ID：11790860
> 
> 赞同：10
> 
> 时间：2012-08-03T07:03:00.537
> 
> 标签：android, extjs4, extjs, sencha-touch-2, back-button

在 Sencha 触摸中，如果我使用导航视图，我可以获得返回按钮。这很好。

但是如果用户点击设备后退键怎么办？它是直接退出应用程序。在我的要求中，它不应该退出它必须返回上一个屏幕的应用程序。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-25T23:34:01.570

您可以像这样处理硬件后退按钮：

```
if (Ext.os.is('Android')) {
    document.addEventListener("backbutton", Ext.bind(onBackKeyDown, this), false);

    function onBackKeyDown(eve) {

        eve.preventDefault();

        //do something
        alert('back button pressed');

    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T08:59:04.340

尝试执行此操作时，我没有在历史支持页面上找到有用的说明；在处理导航视图时，我无论如何都看不到使用路线，该导航视图可以随时在其上拥有大量视图。

但是，如果您只是希望后退按钮起作用，则可以使用`popstate`and`pushstate`函数（请参阅[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)以获取参考）。这个想法是，您`push`在添加视图时处于状态，而`pop`在删除视图时处于关闭状态。Android 手机上的物理后退按钮或桌面浏览器上的后退按钮有效调用`history.back()`; 所以你需要做的就是确保按下标题栏上的后退按钮也是一样的，它就是触发导航视图弹出的按钮。

为了在 Sencha Touch 中使用它，我在主控制器中添加了以下内容：

在参考文献中，我引用了`main`视图（ 的实例`Ext.navigation.View`）及其标题栏，您可以从中挂钩后退按钮的事件，例如：

```
refs: {
        main: 'mainview',
        mainTitleBar: 'mainview titlebar',
}... 
```

我通过配置对象附加以下功能`control`..

```
 control: {
        main: {
            push: 'onMainPush'
        },
        mainTitleBar: {
            back: 'onBack'
        },
        ... 
```

这些定义为：

```
 onMainPush: function(view, item) {
      //do what ever logic you need then..
      history.pushState();
  },
  onBack: function() {
      history.back(); //will cause the onpopstate event to fire on window..
      //prevent back button popping main view directly..
      return false;
  }, 
```

然后我附加一个函数以在通过..的init函数弹出状态时执行

```
init: function() {
    /* pop a view when the back button is pressed
       note: if it's already at the root it's a noop */
    var that = this;
    window.addEventListener('popstate', function() {
        that.getMain().pop();
    }, false);
}, 
```

现在，按回标题栏，执行`history.back()`，这又会触发`popstate`事件，然后导致主视图弹出。

如果你想在真实的应用程序上看到这个工作，这里有一个（v.基本的！）属性查找器应用程序在 github 上使用这种[技术](https://github.com/tastejs/PropertyCross/tree/master/senchatouch2)。

# php - php 从 url 获取数据

> ID：11790863
> 
> 赞同：1
> 
> 时间：2012-08-03T07:03:16.410
> 
> 标签：php

我有一个系统，用户可以在其中动态创建表单。一旦创建了表单，就会生成一个唯一的 URL 并将其存储在数据库中。这些 URL 用于在用户在浏览器中输入表单时回调表单。

现在我想要一个特定的文件在用户在浏览器中输入生成的 url 时读取 url，这样我就可以获得唯一的 url 的最后一段并在运行时获取相应的数据。

我似乎无法弄清楚该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T07:09:43.130

如果您尝试从 URL 字符串接收数据，则需要使用`$_GET`变量 .

如果网址是`http://domain.com/page.php?var1=some-string`

你会像这样检索`var1`：

```
<?php
$var1 = $_GET['var1'];

echo $var1; //would output "some-string"
?> 
```

这是您要问的还是更深入的问题？

# jquery - prop('disabled','disabled') 和 prop('disabled',true) 有什么区别

> ID：11790864
> 
> 赞同：5
> 
> 时间：2012-08-03T07:03:18.043
> 
> 标签：jquery

我使用 jQuery 禁用选择下拉列表中的选项。我需要知道使用之间的区别

```
prop('disabled','disabled') 
```

和

```
prop('disabled',true) 
```

两者几乎都适用于所有浏览器（不确定我是否错过了任何浏览器），但在另一篇文章中，我是他说使用禁用，真的。有人可以详细说明吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T07:10:59.573

根据[W3C 表单规范](http://www.w3.org/TR/html401/interact/forms.html#adef-disabled)，禁用属性是[布尔属性](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.3.4.2)，

没错`prop('disabled',true)`。

`prop('disabled','disabled')`也有效，因为字符串的`'disabled'`计算结果为真。

# tfs - 访问团队项目门户

> ID：11790865
> 
> 赞同：0
> 
> 时间：2012-08-03T07:03:23.210
> 
> 标签：tfs, tfs-2010

我想允许一些用户访问团队项目门户，所以我在 sharepoint 管理中心授予他们读取权限。但是，我发现这些帐户只能在服务上访问团队项目门户，当登录客户端时，它们被禁止。

我怎么能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:29:40.660

我发现vs2010的默认账号是server\administrator，所以给了账号一些权限，就OK了。

# regex - 使用antcontib的properyregex任务进行子串操作

> ID：11790870
> 
> 赞同：0
> 
> 时间：2012-08-03T07:03:54.270
> 
> 标签：regex, ant, regex-negation, regex-greedy, ant-contrib

我正在尝试使用 antcontrib 的 propertyregex 进行子字符串操作。这是我的原始字符串：

```
COMPONENT:MYBuild:cat:cat 
```

我试图`MYBuild`从上面的字符串中提取。

```
<propertyregex property="builderName"
     input="${componentLine}"
     regexp="(.*)COMPONENT:.*:"
     replace=""
     casesensitive="true"
     override="true"/> 
```

但这让我着迷

```
 COMPONENT:MYBuild:cat: 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:33:48.080

正则表达式的巧妙之处之一是使用`[^x]`which 表示除 . 之外的任何字符`x`。当您必须阻止正则表达式的贪婪时，这是一件好事。例如，`[^:]*`表示选择直到下一个冒号的所有字符：

```
<propertyregex property="builderName"
     input="${componentLine}"
     regexp="[^:]*:([^:]*)"
     select="\1"
     override="true"/> 
```

第一`[^:]*:`场比赛`COMPONENT:`。这表示匹配不包含冒号的整个字符串，以及它后面的冒号。（你明白这是如何工作的吗？）

接下来的`([^:]*)`比赛`MyBuild`。它与第一个类似，只是它没有冒号，因此`MyBuild`不会包含冒号。它被括号包围，因为我想捕获它。

而不是`replace`参数，我使用`select`允许我说我想用第一个捕获组（括号中的内容）替换整个字符串的参数。

我没有对此进行测试，但它应该可以工作，或者至少为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:53:17.337

您不需要正则表达式，使用[And addon Flaka](http://code.google.com/p/flaka/)很简单：

```
<project xmlns:fl="antlib:it.haefelinger.flaka">
 <property name="componentLine" value="COMPONENT:MYBUILD:cat:cat"/>
  <fl:let>
   builderName := split('${componentLine}', ':')[1]
  </fl:let>
  <echo>$${builderName} => ${builderName}</echo>
</project> 
```

输出 ：

```
 [echo] ${builderName} => MYBUILD 
```

Flaka 还有其他功能，如果您需要正则表达式，请使用 replace()有关详细信息，
请参阅 Flaka[手册](http://code.google.com/p/flaka/wiki/Manual)和[示例](http://code.google.com/p/flaka/wiki/FlakaExamples)。

# cobol - 如何以编程方式在 IBM 大型机中设置帐户

> ID：11790872
> 
> 赞同：0
> 
> 时间：2012-08-03T07:04:17.280
> 
> 标签：cobol, mainframe, rexx

我需要通过一个程序在 IBM 大型机（Z-os、os390、i 系列）中创建一个用户帐户。是否有任何内置在 Mainframe OS 中的库供 cobol 等编程语言使用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:46:24.010

我不确定 COBOL 是否是我认为您正在尝试完成的正确语言。要以编程方式创建用户帐户，您需要在 TSO 中创建一个帐户，创建并分配一个默认 PDS（或具有执行此操作的启动例程），通过**RACF**或**TopSecret**分配安全性和权限，并且可能还有许多其他表以及需要使用新用户信息进行更新的文件。

此外，大多数商店在创建新的 TSO id 时也会在 CICS、DB2、QMF 等中创建登录凭据。但是，我离题了。无论如何，在需要各种步骤的情况下，您最好的选择是像**REXX**那样尝试尽可能地自动化。您可能必须研究每个步骤，看看它们是否真的可以使用 REXX 编写脚本。

# php - PHP 代码缓存和优化

> ID：11790873
> 
> 赞同：2
> 
> 时间：2012-08-03T07:04:21.337
> 
> 标签：php, optimization

我来自 Java EE 背景并学习 PHP，所以请给我相应的建议。

PHP 是否会在每次请求时尝试解释代码？或者JSP有没有修改TestInterval？我在 CentOS 5 上使用 PHP 5.4 和 httpd。它包含 Zend。它会自动进行操作码缓存吗？

如果我的代码不会经常更改，请建议优化技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:08:20.657

> PHP 是否会在每次请求时尝试解释代码？

理论上是的，但至少在生产中，您通常会使用字节码缓存（如 APC）。

> 它包括 Zend。它会自动进行操作码缓存吗？

您可以使用内置函数找到它`phpinfo()`。如果出现`apc`， 或`xcache`，则表示已启用。否则，您需要先启用它。您应该可以参考他们的手册来了解此步骤。

# javascript - 如何将标签与 div 控件的顶部中间对齐并在其周围绘制一个矩形？

> ID：11790881
> 
> 赞同：0
> 
> 时间：2012-08-03T07:04:38.543
> 
> 标签：javascript, css, html, microsoft-metro, windows-runtime

我在 div 控件中有一个标签。我想将它与 div 控件的顶部中间对齐并围绕该文本绘制一个矩形。我还想从左到右一一显示该标签文本的字符。

我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:23:11.937

以及将文本居中到 div 水平的中间，您只需要设置它的样式

```
div#ctrl {
     text-align: center
} 
```

要在文本周围有一个矩形，您需要定义一个边框，可能带有填充和边距：

```
div#ctrl span {
    border: 1px #333 solid;
    padding: 5px;
} 
```

您需要使用 javascript 为文本设置动画，使用 jQuery 更容易。这里有一个工作示例的链接，我从你正在寻找的内容中抽出：

[http://jsfiddle.net/5QdPh/](http://jsfiddle.net/5QdPh/)

将来尝试做更多的研究，并就以前没有回答过的具体问题提出问题。所有这些都是基本的，有据可查的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:24:17.403

这是第一部分：

[http://fiddle.jshell.net/VdmFV/](http://fiddle.jshell.net/VdmFV/)

在第二部分中，您需要一些花哨的 javascript / jQuery，您应该先尝试自己，然后再回到这里获取指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:33:09.313

```
<style>

#control {
    width:200px;
    height:200px;
    background:#ddd;
    text-align: center
}
#label {
    border:1px solid red;
}
</style>

<div id='control'>
    <span id='label'></span>
</div>

<script>
var label = document.getElementById("label");
var msg = "Message";
var i = 0;
var interval = setInterval( function() {
    label.innerHTML = msg.substr(0,i);
    i++;
    if ( i == msg.length ) {
        clearInterval(interval);
    }
}, 1000)
</script> 
```

# android - 更改屏幕外列表视图中按钮的背景图像？

> ID：11790882
> 
> 赞同：1
> 
> 时间：2012-08-03T07:04:39.167
> 
> 标签：android, android-listview, android-button

我有一个列表视图，最后有一个图像、一个文本视图和一个按钮。该按钮基本上有 3 种状态，我使用图像表示。我想要做的是更改单击按钮的背景，并根据当前状态更改列表视图中其他按钮的背景。

我使用的解决方法是根据按钮的状态更改按钮的背景图像，然后完成（）活动并重新启动它。这显示了令人讨厌的活动开始动画。它会在屏幕外的按钮上产生问题。

无论如何要更改列表视图行中任何按钮的 onClick 内的按钮屏幕外列表视图的背景图像？

# ms-access - 访问vba从ini文件中获取西里尔文字到数据库

> ID：11790884
> 
> 赞同：0
> 
> 时间：2012-08-03T07:04:48.873
> 
> 标签：ms-access, vba, ini

2012/08/31 : 更新了我的帖子

在整个网络上搜索它，找到了一些碎片，但没有任何帮助，所以我求助于你。

* * *

环境的相关资料：

编程语言是 VBA / Access 2003

将从现有的“.ini”文件中读取数据

数据应插入 Access 数据库

* * *

现在我的问题：

我有一个 ini 文件，其中包含 ini 文件中的信息。该文件看起来像这样：

```
[product_details]
product_description=my product description
product_name=my product
product_price=11.0
product_sku=myproduct2012 
```

这些信息保存在“products.ini”中，当在记事本或记事本++中打开时，它将正确显示并可以插入到我的访问数据库中，我可以在我的表单中显示这些信息

但现在有人想要这样的东西：

```
[product_details]
product_description=мое описание продукта
product_name=мой продукт
product_price=11.0
product_sku=произведение2012 
```

当通过 GetINIValue 加载这些信息时，值将作为不可读的文本保存到数据库中。

编辑：也在记事本/记事本++中显示正确，因此西里尔字符被正确传输到ini文件中

我真的尝试了很多东西（使用 UNICODE 版本的 GetINIValue，获取字符代码等，检查西里尔文文本）没有任何帮助。

它应该做什么：无论是什么语言，我都需要帮助才能从这个 ini 条目中获取值（在这种情况下，英语、德语、法语、俄语就足够了）

希望有人可以帮助我。

编辑：我已经尝试了 Remou 的测试，通过以下代码和平打开它：

```
Dim SQL As String
Dim strValue As String
strValue = GetValueOf("product_details","product_description","C:\cyrillic.txt")
SQL = "UPDATE [products] SET [product_description]='" & strValue & "' WHERE [product_id]=23;"
CurrentDb.Execute SQL,dbseechanges 
```

这是我的函数代码，用于读出我需要的特定行：

```
Public Function GetValueOf(ByVal Section As String, ByVal Entry As String, ByVal File As String)
Dim fs As New FileSystemObject
Dim ts As TextStream
Dim temp As String
Dim response As String
Dim intresponses As String
Dim SectionFoundBegin As Boolean
Dim SectionFoundEnd As Boolean
Dim DoNext As Boolean
Dim Parse() As String
Dim Finished As Boolean

SectionFoundBegin = False
SectionFoundEnd = False
Set ts = fs.OpenTextFile(File, ForReading, , TristateTrue)
response = ""
intresponses = 1
Finished = False

Do
  DoNext = False
  temp = ts.ReadLine

  If (Not Finished) Then
    If (temp = "[" & Section & "]") And Not DoNext Then
      SectionFoundBegin = True
      DoNext = True
    End If

  If ((InStr(1, temp, "[") > 0) And (SectionFoundBegin)) And Not DoNext Then
    SectionFoundEnd = True
    DoNext = True
  End If

  If (SectionFoundBegin And Not SectionFoundEnd) And Not DoNext Then
    If (InStr(1, temp, "=") > 0) Then
      Parse = Split(temp, "=")
      If (Parse(0) = Entry) Then
        While (intresponses <= UBound(Parse))
          response = response + Parse(intresponses)
          intresponses = intresponses + 1
        Wend

        DoNext = True
      Else
        DoNext = True
      End If
    Else
      DoNext = True
    End If
  End If

End If

Loop Until ts.AtEndOfStream
GetValueOf = response
End Function 
```

我需要什么：像：

```
"UPDATE [products] SET [product_description]='мое описание продукта' WHERE [product_id]=23;" 
```

我得到什么：

```
"UPDATE [products] SET [product_description]='??? ???????? ????????' WHERE [product_id]=23;" 
```

更新：现在我真的是你的帮助：

我已插入以下代码：

```
 Public Function GetUnicodeValueOf(ByVal Section As String, ByVal Entry As String, ByVal File As String)
 Dim fs As Object
 Dim ts As Object
 Set fs = CreateObject("Scripting.FileSystemObject")
 Dim temp As String
 Dim strResponse As String
 Dim intResponses As Integer
 Dim SectionFoundBegin As Boolean
 Dim SectionFoundEnd As Boolean
 Dim DoNext As Boolean
 Dim Parse() As String
 Dim Finished As Boolean

 On Error GoTo Error_GetUnicodeValueOf
 SectionFoundBegin = False
 SectionFoundEnd = False
 Set ts = fs.OpenTextFile(File, ForReading, , TristateTrue)
 strResponse = ""
 intResponses = 1
 Finished = False

 Do
   DoNext = False
   temp = ts.ReadLine

   If (Not Finished) Then
     If (temp = "[" & Section & "]") And Not DoNext Then
       SectionFoundBegin = True
       DoNext = True
     End If

   If ((InStr(1, temp, "[") > 0) And (SectionFoundBegin)) And Not DoNext Then
     SectionFoundEnd = True
     DoNext = True
   End If

   If (SectionFoundBegin And Not SectionFoundEnd) And Not DoNext Then
     If (InStr(1, temp, "=") > 0) Then
       Parse = Split(temp, "=")
       If (Parse(0) = Entry) Then
         While (intResponses <= UBound(Parse))
           strResponse = strResponse + Parse(intResponses)
           intResponses = intResponses + 1
           Finished = True
         Wend

         DoNext = True
       Else
         DoNext = True
       End If
     Else
       DoNext = True
     End If
   End If

 End If

 Loop Until ts.AtEndOfStream

 Exit_GetUnicodeValueOf:
    GetUnicodeValueOf = strResponse
    Exit Function
 Error_GetUnicodeValueOf:
ActionLogging "Fehler beim Parsen der Datei '" & File & "'"
Resume Exit_GetUnicodeValueOf
 End Function 
```

通过在我的硬盘上使用这个文件（保存为 UTF-8 没有 BOM）：

```
 [product_details]
 manufacturer_name=
 product_id=50
 sku=BU-01722
 set=4
 type=simple
 type_id=simple
 color=11
 ean=
 name=Колесникова
 description=[LANGTEXT] Колесникова Е.В Я считаю до двадцати [Рабочая тетрадь] 6-7л 
 short_description=[KURZTEXT] Колесникова Е.В
 old_id=
 weight=1.0000
 news_from_date=
 news_to_date=
 status=1
 url_key=kolesnikova
 url_path=kolesnikova.html
 visibility=4
 gift_message_available=2
 required_options=0
 has_options=0
 image_label=
 small_image_label=
 thumbnail_label=
 created_at=2012-06-25 07:58:29
 updated_at=2012-07-27 09:06:24
 price=2.0000
 special_price=
 special_from_date=
 special_to_date=
 cost=
 tax_class_id=2
 minimal_price=
 enable_googlecheckout=1
 meta_title=
 meta_keyword=
 meta_description=
 is_recurring=0
 recurring_profile=
 custom_design=
 custom_design_from=
 custom_design_to=
 custom_layout_update=
 page_layout=
 options_container=container2 
```

我需要：

```
 [LANGTEXT] Колесникова Е.В Я считаю до двадцати [Рабочая тетрадь] 6-7л 
```

来自 INI 键：**描述**

进入我的访问数据库。

首先它可以正常工作，但现在当我加载一个用“TriStateTrue”保存的文件时，一切都结束了：???????????????????????? ????????????????????? 在一行中。

使用 TriStateMixed，除了像 ÐšÐ¾Ð»ÐµÑÐ½Ð¸ÐºÐ¾Ð²Ð° Ð•.Ð' Ð¯ ÑÑ‡Ð¸Ñ‚Ð°ÑŽ Ð´Ð¾ Ð´Ð²Ð°Ð´Ñ†Ð° Ñ‚Ð¸ [Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ñ‚ÐµÑ‚Ñ€Ð°Ð´ÑŒ] 6-7Ð»

我搜索了源代码并没有发现错误。

```
 FILE is UTF-8 without BOM (coming from selfwritten Web API for Magento)
 Using Access 2003
 Need to get Cyrillic Text into my Database where also German / English Texts could be inside the File 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T09:47:53.917

很久以前，我问了这个问题，终于得到了答案，但由于时间不够，我没能在这里和其他可能有这些问题的人“回答自己”。

**首先，关于读取问题：**

```
The Edit from my Question with TryStateTrue was the Right answer, this was the correct line which was needed to load 
```

但现在有 Catch：

**VBA（6 或更低）中的规则很简单：**

```
What will be saved in an String will be stored as ASCII Value. So every Char which is not an ASCII Code will be thrown away and saved as "?" 
```

**我是如何设法保存这些数据的？**

我设法通过使用 C# (.NET) 中的自编写工具来保存这些数据，该工具可以处理 UTF-8 字符串并可以连接到数据库。

*   在列表中保存部分 + 键或设置为可执行参数，您将在其中“更新”值，例如：

    ```
    [product_details]\name;productsTableName;productsNameField;IdentKeyField;IdentKeyValue 
    ```

*   打开带参数或不带参数的可执行文件并加载列表

*   连接到所需的访问数据库
*   读取 Section\Key-Value 并通过 UPDATE-STATEMENT 直接发送到数据库，例如：

    ```
    "UPDATE [productsTableName] SET [productsNameField]='" + ValueFromSectionKey + "' WHERE [IdentKeyField]=IdentKeyValue 
    ```

*   断开数据库

*   关闭程序

**结果：**

*   一开始有点慢，因为写下了巨大的信息列表
*   还写下数据库中的所有内容，以及错误（??????而不是считаю）确保如果您的文件是ASCII-“可读”，您不会忘记任何内容
*   Access 2003 数据库中漂亮的 UTF-8 编码和可读文本

**这种方法的优点**

*   外包和消耗性工具，如果编写正确，它也可以用于其他项目
*   Access 中的可理解代码（您写下信息，然后在列出所有内容后打开一个处理这些信息的程序）
*   优化时非常快（读取长度并将列表拆分为多个同时更新数据库的工作人员）

**关于这种方法的缺点**

*   外包
*   无法直接保存到 VBA 内的变量中（6 或更低）
*   外部工具可能被防火墙阻止
*   在“更新”数据库之前，数据库中有不可读的文本
*   数据库上的更多更新调用直接
*   列表中的用户输入错误或包含分隔符的文本可能会使 UPDATE 语句失败。

希望我能帮上忙。

# php - 每个模块的默认控制器操作

> ID：11790886
> 
> 赞同：0
> 
> 时间：2012-08-03T07:04:52.423
> 
> 标签：php, zend-framework, routes

我正在为我的项目使用模块结构。这是我用来指向默认模块/控制器的代码

```
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.router.routes.home.defaults.module = main 
resources.router.routes.home.defaults.controller = index
resources.router.routes.home.defaults.action = show 
```

到目前为止，一切都很好。但是如何为每个模块设置默认控制器操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:45:13.580

```
resources.router.routes.home.defaults.module = main 
resources.router.routes.home.defaults.controller = index
resources.router.routes.home.defaults.action = show 
```

您放入 application.ini 的这部分内容设置了到此*模块/控制器/操作的**路由*，它没有将其设置为默认模块。

 *```
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" 
```

此行适用于激活模块，但需要与以下内容配对：

```
resources.modules[] = 
```

并确保每个模块在扩展的模块根目录中都有一个空的 Bootstrap.php `Zend_Application_Module_Bootstrap`。这是确保加载和路由正确发生所必需的。

现在要设置默认模块，请输入如下一行：

```
resources.frontController.defaultmodule = 'default' 
```

进入你的application.ini。

这些行：

```
resources.frontController.defaultcontrollername = 'index'
resources.frontController.defaultaction = 'index' 
```

设置默认动作和控制器，但他们为每个模块都这样做。我不知道为每个控制器指定默认操作或为每个模块指定默认控制器的方法。
我通常让 index 成为默认控制器和默认操作，如果我想要一些其他操作而不是 index 我只是转发给它：

```
public function indexAction() {
    $this->+_forward('otherAction');
} 
```

祝你好运。*

# php - 将常量 php 打印到 jQuery 中

> ID：11790889
> 
> 赞同：0
> 
> 时间：2012-08-03T07:05:25.387
> 
> 标签：php, jquery

我有一个页面，我必须将一个常量 php 打印到 jQuery 中。现在，如果我打印返回一个错误：“SyntaxError: missing ; before statement”因为我的文本包含空格并且我不想取消那个空格！这是我的代码（我之前尝试过序列化和修剪但同样的错误）

```
<script type="text/javascript">
$(document).ready(function(){

    $(".menu_an").click(function() {
        var txt = $(this).attr("id");
        var temp=<?php echo titolo_antilope; ?>;
        alert(temp);
        //$('#descrizione').text(<?php echo titolo_antilope ?>);
    });
});
</script>

<body>

                <div class="animale">
                    <div class="firstColAni">
                       <p class="txt_14 menu_an" style="cursor:pointer;" id="antilope">Antilope</p>
                       <p class="txt_14 menu_an" style="cursor:pointer;" id="bisonte">Bisonte</p>
                    </div>
                    <div class="secondColAni">
                       <p class="txt_14 menu_an" style="cursor:pointer;" id="descrizione"></p>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:08:49.317

我猜你错过了双引号。尝试这个

```
<script type="text/javascript">
$(document).ready(function(){

    $(".menu_an").click(function() {
        var txt = $(this).attr("id");
        var temp= "<?php echo titolo_antilope; ?>";
        alert(temp);
        //$('#descrizione').text(<?php echo titolo_antilope ?>);
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:06:49.277

尝试这个...

现在 temp 是 Javascript 中的字符串值，需要用双引号括起来。

```
<script type="text/javascript">
$(document).ready(function(){

    $(".menu_an").click(function() {
        var txt = $(this).attr("id");
        var temp= "<?php echo $titolo_antilope; ?>";
        alert(temp);
        //$('#descrizione').text(<?php echo $titolo_antilope ?>);
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:07:43.050

我猜`$`titolo_antilope 的标志不见了；

它是一个 php 变量，对吧？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:11:54.353

```
var temp='<?php echo titolo_antilope; ?>'; 
```

# jqplot - Jqplot：荧光笔未显示正确的工具提示

> ID：11790891
> 
> 赞同：0
> 
> 时间：2012-08-03T07:05:32.810
> 
> 标签：jqplot

在我的折线图中，我已经这样做了，

```
highlighter: { 
               show: true,
               tooltipLocation: 'ne'
             }, 
```

在图表上，如果我有一条包含三个数据点的线，则这些点绘制正确，但正在显示错误的工具提示。具体而言，工具提示正在被打乱，即对于一个数据点，它显示其他数据点的工具提示。

工具提示的显示是否取决于即将到来的订单数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:34:15.147

我懂了！！！工具提示取决于我们传递的数据点的顺序:)

# android - 在进程之间传递游标（Parcelable Cursor）

> ID：11790893
> 
> 赞同：5
> 
> 时间：2012-08-03T07:05:40.297
> 
> 标签：android, parcelable, android-cursor

我需要将`Cursor`( `SQLiteCursor`) 从服务传递到**API 10 上**的应用程序，并且很难找到一个体面（且快速）的解决方案。

我看过`CursorWindow`课。这是`Parcelable`但我无法在 API 10 上实例化此类以使用`SQLiteCursor.fillWindow()`，因为它没有有效的构造函数。`CursorWindow(boolean)`已弃用。

即使我从 中获得了一个`CursorWindow`包含数据的实例，`SQLiteCursor`我如何将此窗口复制到一个新的 中`Cursor`？我应该为此使用什么`Cursor`实现？我看不到可`Cursor`扩展`AbstractWindowedCursor`的。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:36:11.803

我实现了一个`ParcelableCursor`实现`CrossProcessCursor`和`Parcelable`接口的类。如果有人感兴趣，我会发布它。一些操作尚不支持/实现，以及使用自定义`BijectiveMap`（这很容易实现）。

```
/**
 * Prefer ParcelableCursorForIntent instead.<br/>
 * Cursor for IPC. Takes a CursorWindow as data buffer and the number of columns
 * that CursorWindow has.<br/>
 * <br/>
 * <b>NOTE: this Cursor cannot be parceled when sending by intents due to <a
 * href="http://code.google.com/p/android/issues/detail?id=4470">an Android
 * bug</a>. Please use ParcelableCursorForIntent instead.</b>
 * 
 * @author m0skit0@blablabla.eu
 * 
 */
public class ParcelableCursor implements Parcelable, CrossProcessCursor {

    /** Cursor data window */
    protected CursorWindow window = CursorHelper.getCursorWindowInstance();

    /** How many columns we have */
    protected int numColumns = 0;

    /** Column names */
    protected BijectiveMap<String, Integer> colNames = new BijectiveHashMap<String, Integer>();

    /** Current row */
    protected int curRow = -1;

    /** Is this cursor closed? */
    protected boolean closed = false;

    /** CREATOR for Parcelable */
    public static final Parcelable.Creator<ParcelableCursor> CREATOR = new Parcelable.Creator<ParcelableCursor>() { // NOPMD
                                                                                                                    // AM
        @Override
        public ParcelableCursor createFromParcel(final Parcel in) {
            return new ParcelableCursor(in);
        }

        @Override
        public ParcelableCursor[] newArray(final int size) {
            return new ParcelableCursor[size];
        }
    };

    /**
     * Creates an empty ParcelableCursor. Please consider to use
     * {@link #setFromCursor(AbstractWindowedCursor)} or
     * {@link #setFromWindow(CursorWindow)} to initialize it.
     */
    public ParcelableCursor() {
        // Empty ParcelableCursor, don't forget to use #setFromCursor
    }

    /** Constructor for Parcelable */
    public ParcelableCursor(final Parcel in) {
        readFromParcel(in); // NOPMD by yasin on 12/7/12 11:55 AM - Android's
        // Parceleble
    }

    /**
     * Adds a new column at the end and assigns it this name. This will make
     * this cursor to lose all its data, so you have to add all the columns
     * before adding any row.
     */
    private void addColumn(final String name) {
        this.numColumns++;
        this.curRow = -1;
        this.colNames.put(name, this.numColumns - 1);
    }

    @Override
    public void close() {
        this.window.close();
        this.closed = true;
    }

    @Override
    public void copyStringToBuffer(final int columnIndex,
            final CharArrayBuffer buffer) {
        // TODO: what does this do?
    }

    @Override
    public void deactivate() {
        // Deprecated, does nothing
    }

    @Override
    public int describeContents() {
        // Nothing to do here
        return 0;
    }

    @Override
    public void fillWindow(final int position, final CursorWindow window) {
        CursorHelper.copyCursorWindow(position, this.window, window);
    }

    @Override
    public byte[] getBlob(final int columnIndex) {
        return this.window.getBlob(this.curRow, columnIndex);
    }

    @Override
    public int getColumnCount() {
        return this.numColumns;
    }

    @Override
    public int getColumnIndex(final String columnName) {
        int ret = -1;
        final Integer col = this.colNames.get(columnName);
        if (col != null) {
            ret = col;
        }
        return ret;
    }

    @Override
    public int getColumnIndexOrThrow(final String columnName)
            throws IllegalArgumentException {
        final Integer col = this.colNames.get(columnName);
        if (col == null) {
            throw new IllegalArgumentException();
        }
        return col;
    }

    @Override
    public String getColumnName(final int columnIndex) {
        return this.colNames.getKey(columnIndex);
    }

    @Override
    public String[] getColumnNames() {
        if (DebugConfig.DEBUG) {
            Log.d("PARCELCURSOR.getColumnNames()---", "===GETTING COLNAMES===");
        }

        final Set<Entry<String, Integer>> set = this.colNames.entrySet();
        final String[] colArray = new String[set.size()];
        for (final String colName : this.colNames.keySet()) {
            if (DebugConfig.DEBUG) {
                Log.d("-------------PARCELCURSOR.getColumnNames()", colName);
            }
            final int pos = this.colNames.get(colName);
            colArray[pos] = colName;
        }

        return colArray;
    }

    @Override
    public int getCount() {
        return this.window.getNumRows();
    }

    @Override
    public double getDouble(final int columnIndex) {
        return this.window.getDouble(this.curRow, columnIndex);
    }

    @Override
    public Bundle getExtras() {
        // Does not support Extras
        return null;
    }

    @Override
    public float getFloat(final int columnIndex) {
        return this.window.getFloat(this.curRow, columnIndex);
    }

    @Override
    public int getInt(final int columnIndex) {
        return this.window.getInt(this.curRow, columnIndex);
    }

    @Override
    public long getLong(final int columnIndex) {
        return this.window.getLong(this.curRow, columnIndex);
    }

    @Override
    public int getPosition() {
        return this.curRow;
    }

    @Override
    public short getShort(final int columnIndex) { // NOPMD by yasin on 12/7/12
                                                    // 11:57 AM - Override
        return this.window.getShort(this.curRow, columnIndex);
    }

    @Override
    public String getString(final int columnIndex) {
        return this.window.getString(this.curRow, columnIndex);
    }

    @SuppressLint("NewApi")
    @Override
    public int getType(final int columnIndex) {
        final int currentapiVersion = android.os.Build.VERSION.SDK_INT;

        int result = 0;

        if (currentapiVersion >= android.os.Build.VERSION_CODES.HONEYCOMB) {
            result = this.window.getType(this.curRow, columnIndex);
        } else {
            if (this.window.isNull(this.curRow, columnIndex)) {
                result = 0; // FIELD_TYPE_NULL;
            } else if (this.window.isFloat(this.curRow, columnIndex)) {
                result = 2; // FIELD_TYPE_FLOAT;
            } else if (this.window.isLong(this.curRow, columnIndex)) {
                result = 1; // FIELD_TYPE_INTEGER;
            } else if (this.window.isString(this.curRow, columnIndex)) {
                result = 3; // FIELD_TYPE_STRING;
            } else if (this.window.isBlob(this.curRow, columnIndex)) {
                result = 4; // FIELD_TYPE_BLOB;
            }
        }

        return result;
    }

    @Override
    public boolean getWantsAllOnMoveCalls() {
        return false;
    }

    @Override
    public CursorWindow getWindow() {
        final CursorWindow ret = CursorHelper.getCursorWindowInstance();
        fillWindow(0, ret);
        return ret;
    }

    @Override
    public boolean isAfterLast() {
        return (this.curRow >= this.window.getNumRows());
    }

    @Override
    public boolean isBeforeFirst() {
        return (this.curRow < 0);
    }

    @Override
    public boolean isClosed() {
        return this.closed;
    }

    @Override
    public boolean isFirst() {
        return (this.curRow == 0);
    }

    @Override
    public boolean isLast() {
        return (this.curRow == this.window.getNumRows() - 1);
    }

    @Override
    public boolean isNull(final int columnIndex) {
        return this.getType(columnIndex) == FIELD_TYPE_NULL;
    }

    @Override
    public boolean move(final int offset) {
        final int oldPos = this.curRow;
        this.curRow += offset;
        if (this.curRow < -1) {
            this.curRow = -1;
            return false;
        } else if (this.curRow > this.window.getNumRows() - 1) {
            this.curRow = this.window.getNumRows() - 1;
            return false;
        }
        return onMove(oldPos, this.curRow);
    }

    @Override
    public boolean moveToFirst() {
        if (this.window.getNumRows() == 0) {
            return false;
        }
        final int oldPos = this.curRow;
        this.curRow = 0;
        return onMove(oldPos, this.curRow);
    }

    @Override
    public boolean moveToLast() {
        if (this.window.getNumRows() == 0) {
            return false;
        }
        final int oldPos = this.curRow;
        this.curRow = this.window.getNumRows() - 1;
        return onMove(oldPos, this.curRow);
    }

    @Override
    public boolean moveToNext() {
        final int oldPos = this.curRow++;
        if (isAfterLast()) {
            this.curRow = this.window.getNumRows();
            return false;
        }
        return onMove(oldPos, this.curRow);
    }

    @Override
    public boolean moveToPosition(final int position) {
        if (position < -1 && position >= this.window.getNumRows()) {
            return false;
        }
        final int oldPos = this.curRow;
        this.curRow = position;
        return onMove(oldPos, this.curRow);
    }

    @Override
    public boolean moveToPrevious() {
        final int oldPos = this.curRow--;
        if (isBeforeFirst()) {
            this.curRow = -1;
            return false;
        }
        return onMove(oldPos, this.curRow);
    }

    @Override
    public boolean onMove(final int oldPosition, final int newPosition) {
        // Don't forget to set curRow = -1 if this method returns false
        return true;
    }

    /** Restoring this object from a Parcel */
    public void readFromParcel(final Parcel in) {

        this.numColumns = in.readInt();
        this.colNames = in.readParcelable(ClassLoaderHelper.getClassLoader());
        this.curRow = in.readInt();
        this.closed = (in.readByte() == 1);
        // Closes the cursor before create a new cursor.
        if (window != null) {
            window.close();
        }
        this.window = CursorWindow.newFromParcel(in);
    }

    /** Not supported */
    @Override
    public void registerContentObserver(final ContentObserver observer) {
        // Does nothing
    }

    /** Not supported */
    @Override
    public void registerDataSetObserver(final DataSetObserver observer) {
        // Does nothing
    }

    /** Deprecated, not supported */
    @Override
    public boolean requery() {
        return false;
    }

    /** Not supported */
    @Override
    public Bundle respond(final Bundle extras) {
        // Does nothing
        return null;
    }

    /** Sets this cursor from another windowed Cursor */
    public void setFromCursor(final AbstractWindowedCursor cursor) throws CursorIndexOutOfBoundsException, IllegalStateException {

        // Reset number of columns
        this.numColumns = 0;

        // Set column names
        final String[] colNames = cursor.getColumnNames();
        if (colNames != null) {
            for (final String col : colNames) {
                addColumn(col);
            }
        }

        // Fill window
        this.window.clear();
        this.window.setNumColumns(this.numColumns);
        cursor.fillWindow(0, this.window);
        moveToPosition(-1);
    }

    /** Sets this cursor from another windowed Cursor */
    public void setFromCursor(final MatrixCursor cursor) throws CursorIndexOutOfBoundsException ,IllegalStateException{

        // Reset number of columns
        this.numColumns = 0;

        // Set column names
        final String[] colNames = cursor.getColumnNames();
        if (colNames != null) {
            for (final String col : colNames) {
                addColumn(col);
            }
        }

        // Fill window
        this.window.clear();
        this.window.setNumColumns(this.numColumns);
        cursor.fillWindow(0, this.window);
        moveToPosition(-1);
    }

    /** Sets this cursor using a CursorWindow data */
    public void setFromWindow(final CursorWindow window) {
        CursorHelper.copyCursorWindow(0, window, this.window);
        this.numColumns = CursorHelper.getCursorWindowNumCols(window);
        moveToPosition(-1);
    }

    /** Not supported */
    @Override
    public void setNotificationUri(final ContentResolver cr, final Uri uri) {
        // Does nothing
    }

    /** Not supported */
    @Override
    public void unregisterContentObserver(final ContentObserver observer) {
        // Does nothing
    }

    /** Not supported */
    @Override
    public void unregisterDataSetObserver(final DataSetObserver observer) {
        // Does nothing
    }

    @Override
    public void writeToParcel(final Parcel out, final int flags) {

        out.writeInt(this.numColumns);
        out.writeParcelable((Parcelable) this.colNames, 0);
        out.writeInt(this.curRow);
        out.writeByte(this.closed ? (byte) 1 : 0);
        this.window.writeToParcel(out, flags);
    }

} 
```

仍在寻找更标准的方法来做到这一点。任何信息将不胜感激！

编辑：这通过了很少的测试，所以在使用它之前测试它。

EDIT2：事实上，它充满了错误......我很快就会更新一个错误更少的版本。

EDIT3：使用我们自一年以来使用的工作光标进行了更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:49:13.740

使用[Content Provider](http://developer.android.com/reference/android/content/ContentProvider.html)来存储您的数据。您可以从服务和应用程序访问它。[教程](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T03:32:49.613

为了解决**[我遇到的类似问题](https://stackoverflow.com/questions/15257568/send-a-cursor-to-an-activity-from-a-service)**，我制作了自己的自定义类，它实现了**Parcelable 接口**。在里面我只是实现**HashMap**对象。所以我不再担心行数，我只是将光标映射到我*自己的 ParcelableRow 对象*。这是mi代码：

```
public class ParcelableRow implements Parcelable {
 private HashMap<String, String> colsMap;

 public static final Parcelable.Creator<ParcelableRow> CREATOR
 = new Parcelable.Creator<ParcelableRow>() {

    @Override
    public ParcelableRow createFromParcel(Parcel source) {
        return new ParcelableRow(source);
    }

    @Override
    public ParcelableRow[] newArray(int size) {
        return new ParcelableRow[size];
    }
};

public ParcelableRow(Parcel in) {
    colsMap = new HashMap<String, String>();
    readFromParcel(in);
}
public ParcelableRow() {
    colsMap = new HashMap<String, String>();
}
@Override
public int describeContents() {
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {

    for(String key: colsMap.keySet()){

        dest.writeString(key);
        dest.writeString(colsMap.get(key));

    }

}
public void readFromParcel(Parcel parcel) {

    int limit = parcel.dataSize();
    parcel.setDataPosition(0);
    for(int i = 0; i < limit; i++){
        colsMap.put(parcel.readString(), parcel.readString());
    }

}

public void addNewCol(String colName, String colValue){
    colsMap.put(colName, colValue);
}
public String getColumnValue(String colName){
    return colsMap.get(colName);
} 
```

}

我希望这对某人或您@m0skit0 有用，我只是花了几天时间试图找到可以满足我需求的东西。[这](http://blog.cluepusher.dk/2009/10/28/writing-parcelable-classes-for-android/)是我使用过的一些代码示例。欢迎提出建议。

# xaml - 如何禁用 ListView 的 Hover 和 Tile 效果？

> ID：11790894
> 
> 赞同：5
> 
> 时间：2012-08-03T07:05:39.490
> 
> 标签：xaml, listview, windows-8, windows-runtime, winrt-xaml

我想禁用 ListView 控件的某种推送效果和悬停背景颜色效果的 Tile 效果，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-18T12:41:00.410

经过一番谷歌搜索后，我发现突出显示发生在 ListViewItemPresenter 中，结果证明它非常隐藏。它位于 ListViewItem 的 ControlTemplate 内，它是 ListView 的 ItemContainer。我发现禁用效果的最简单方法是简单地覆盖此 ControlTemplate：

```
<ListView>
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <ContentPresenter/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListView.ItemContainerStyle>
<TextBlock Text="List Item" />
...
<TextBlock Text="List Item" /> 
```

来源：[https ://blog.jonstodle.com/uwp-listview-without-highlighting-and-stuff/](https://blog.jonstodle.com/uwp-listview-without-highlighting-and-stuff/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T07:57:40.253

看这个问题： [Disable cross-slide selection for a listview](https://stackoverflow.com/questions/11774209/disable-cross-slide-selection-for-a-listview)

您还可以更改模板以删除任何视觉状态和装饰 - 转到设计器并右键单击您的 ListView/编辑其他模板/编辑生成的项目容器 (ItemContainerStyle)/编辑副本... - 这将提取模板您可以使用您喜欢的方法进行修改。

# configuration - 将 SlowCheetah 与自定义配置一起使用时出现 Azure Worker Role 配置问题

> ID：11790895
> 
> 赞同：1
> 
> 时间：2012-08-03T07:05:41.830
> 
> 标签：configuration, azure, nlog, azure-worker-roles, slowcheetah

我们将 Nlog 用作 Azure 应用程序的 Worker Role 的日志记录工具。它需要 NLog.config 文件。我们安装了“SlowCheetah - XML Transforms”，并且有两个 Debug/Release 转换）。

解决方案确实成功重建。

但是当我尝试运行时，出现以下错误。（我在我的一个 Windows 服务应用程序中使用了 nolog.config 的精确转换，它在那里工作正常）。

> 错误 163 项目列表“OutputGroups”中的项目“bin\Debug\NLog.config”未定义元数据“TargetPath”的值。要使用此元数据，请通过指定 %(OutputGroups.TargetPath) 对其进行限定，或确保此列表中的所有项目都为此元数据定义一个值。C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Windows Azure Tools\1.6\Microsoft.WindowsAzure.targets 2299 5 Insight.CloudWeb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:51:48.967

我有一个解决办法。现在，您应该能够使用 SlowCheetah 为 Azure Worker Roles 转换 app.config 以及其他 XML 文件。一旦我得到修复验证，我将发布更新到 VS 库。

如果您想尝试修复，可以在[https://dl.dropbox.com/u/40134810/SlowCheetah/issue-44/SlowCheetah-issue-44.zip](https://dl.dropbox.com/u/40134810/SlowCheetah/issue-44/SlowCheetah-issue-44.zip)下载更新的 VSIX 。如果您有兴趣跟进此问题，请使用[问题 #44](https://github.com/sayedihashimi/slow-cheetah/issues/44)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:16:14.523

我不知道这是否是由 SlowCheetah 扩展完成的，但您能否验证您的 *.csproj 文件是否包含与此类似的 AfterCompile 目标？

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />

<UsingTask TaskName="TransformXml"
  AssemblyFile="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll" />

<Target Name="AfterCompile" Condition="exists(’app.$(Configuration).config’)">
  <TransformXml Source="NLog.config"
    Destination="$(IntermediateOutputPath)$(TargetFileName).config"
    Transform="NLog.$(Configuration).config" />
  <ItemGroup>
    <AppConfigWithTargetPath Remove="NLog.config"/>
    <AppConfigWithTargetPath Include="$(IntermediateOutputPath)$(TargetFileName).config">
      <TargetPath>$(TargetFileName).config</TargetPath>
    </AppConfigWithTargetPath>
  </ItemGroup>
</Target> 
```

查看 Oleg 的博[文 .Config File Transformation](http://www.olegsych.com/2010/12/config-file-transformation/)下的**App.config File Transformation**以获取更多信息。

# java - 如何在一个 CTabItem 中添加多个项目？

> ID：11790898
> 
> 赞同：0
> 
> 时间：2012-08-03T07:05:48.090
> 
> 标签：java, swt, ctabitem

```
CTabItem tabItem1 = new CTabItem(newTabFolder, SWT.CLOSE);
tabItem1.setText("Tab 1");
Label lab2 = new Label(newTabFolder, 0);
lab2.setText("Hello World");
tabItem1.setControl(table);
tabItem1.setControl(lab2); 
```

我正在尝试`CTabItem`拥有一个表格和一些标签和文本字段

但是出现的问题是任何项目/小部件都是通过使用`setControl(Control control)`功能添加的。而且我不能通过两个以上的控制。上面的代码首先添加一个表格，然后用标签覆盖它，因此一次只显示一个项目。

我同时想要两件事。

我还尝试查看是否可以将内容添加到 Control 对象，然后将该控件传递给`setControl()`函数，但我找不到任何可以添加项目/小部件来控制的函数，请告诉我如何执行此操作。

```
final Composite compositeInTab = new Composite(newTabFolder, SWT.NONE);
        compositeInTab.setLayout(new FillLayout());
        table = new Table(compositeInTab, SWT.V_SCROLL);

        btn1.addMouseListener(new MouseAdapter()
        {
            public void mouseDown(MouseEvent e)
            {
                /*JUST CREATING A TABLE AND MANAGING IT*/
                String[] titles = {"System Code","Domain Name","Organizational Unit","Organization Name"};
                for(int i=0; i<titles.length; i++)
                {
                    TableColumn column = new TableColumn(table, SWT.CENTER, i);
                    column.setText(titles[i]);
                    column.setWidth(150);
                    column.setMoveable(true);
                    column.setResizable(true);
                }
                for(int i=0; i<50; i++)
                {
                    TableItem item = new TableItem(table, 0);
                    item.setText(0, ""+i);
                    item.setText(1, ""+i);
                    item.setText(2, ""+i);
                    item.setText(3, ""+i);
                }
                for (int i = 0; i < titles.length; i++) 
                {
                    table.getColumn(i).pack();
                }
                table.setHeaderVisible(true);
                table.setSize(table.computeSize(SWT.DEFAULT, 200));
                table.setLinesVisible(true);
                /*CREATING OF TABLE COMPLETE*/

                compositeForTabFolder.setLayout(new GridLayout());
                compositeForTabFolder.setBounds(280, 0, 500, 450);
                newTabFolder.setUnselectedCloseVisible(false);

                CTabItem tabItem1 = new CTabItem(newTabFolder, SWT.CLOSE);
                tabItem1.setText("Tab 1");
                Label lab2 = new Label(compositeInTab, 0);
                lab2.setText("Hello World");
                Label lab3 = new Label(compositeInTab, 0);
                lab3.setText("Bye Bye World");
                tabItem1.setControl(compositeInTab);

                newTabFolder.setBounds(0, 0, 500, 300);
            }
        }); 
```

[图片](http://i.stack.imgur.com/EfHv7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:09:54.887

您可以使用 a `Composite`，然后添加您想要的所有内容`Composite`，然后使用`setControl(composite)`.

这样，您只需通过添加一个小部件，`setControl()`但此小部件可以有多个子级。

[这里](http://www.java2s.com/Tutorial/Java/0280__SWT/PasstheCompositetothetabssetControlmethod.htm)有一个很好的例子。

这是来自该站点的示例代码（稍作修改）：

```
public static void main(String[] args) {
    Display display = new Display();
    final Shell shell = new Shell(display);
    final TabFolder tabFolder = new TabFolder(shell, SWT.BORDER);
    for (int i = 0; i < 6; i++) {
      TabItem item = new TabItem(tabFolder, SWT.NONE);
      item.setText("TabItem " + i);
      item.setToolTipText("This is my tab" + i);

      Composite composite = new Composite(tabFolder, SWT.NONE);
      composite.setLayout(new FillLayout());
      new Button(composite, SWT.PUSH).setText("Button");
      new Text(composite, SWT.BORDER).setText("TextField");
      new Label(composite, SWT.NONE).setText("Label");

      Table table = new Table(composite, SWT.NONE);
      table.setHeaderVisible(true);

      new TableItem(table, SWT.NONE).setText("TableItem");

      item.setControl(composite);

    }
    tabFolder.pack();
    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
} 
```

# javascript - 当用户移动地图而不是 setCenter 方法时捕获 bounds_changed 事件

> ID：11790905
> 
> 赞同：3
> 
> 时间：2012-08-03T07:06:22.330
> 
> 标签：javascript, google-maps, google-maps-api-3

我想在用户移动地图时收听“bounds_changed”事件，更改缩放但我不希望在我的程序调用 setCenter 或 setZoom 方法时触发它。所以我尝试在设置中心之前删除事件并在之后再次添加它。但是，它没有用，我的事件仍在被触发。

```
var currentBoundsListener = null;

function addBoundsChangedListener() {
    currentBoundsListener = google.maps.event.addListener(map, 'bounds_changed', function () {
        // Whatever.
    });
}

function setCenter(lat, lng) {
    google.maps.event.removeListener(currentBoundsListener);
    var geo = new google.maps.LatLng(lat, lng);
    map.setCenter(geo);
    addBoundsChangedListener();
} 
```

我认为在我向其添加新侦听器之后，地图正在创建 bounds_changed 事件，就像事件是异步的一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:34:21.793

bounds_changed 事件确实是异步触发的，因此，您可以使用一个全局布尔变量来指示何时忽略它，而不是删除侦听器，例如：

```
var ignore = false; // this var is global;
currentBoundsListener = google.maps.event.addListener(map, 'bounds_changed', function () {
if(ignore) {
   ignore = false;
   return;
}

// Whatever.
});

function setCenter(lat, lng) {
    var geo = new google.maps.LatLng(lat, lng);
    ignore = true;
    map.setCenter(geo);
} 
```

# php - 使用 php 将 json 数据从 google maps html 调用解析到 mysql 数据库

> ID：11790912
> 
> 赞同：3
> 
> 时间：2012-08-03T07:06:57.200
> 
> 标签：php, mysql, json, parsing

我想将来自 google maps html 调用（如下）的位置名称添加到特定的 php 变量，以便我可以 1）将其存储在 mysql 数据库中并 2）将其显示为 echo 语句的一部分（echo $locality）。

> [http://maps.googleapis.com/maps/api/geocode/json?latlng=34.11375320612877,-118.35220470764159&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=34.11375320612877,-118.35220470764159&sensor=false)

我已经通过以下方式解码了 json 数据： json_decode($data,true); 陈述。

鉴于多变量数组结构的复杂性，我想深入研究并提取一个特定值（如果存在）。一个例子来帮助解释。

这是为节省空间而缩写的json数据：

> {“结果”：[
> { “地址组件
> ”：[
> {
> “长名称”：“2917-2981”， “短名称
> ”：“2917-2981”，
> “类型”：[“街道号码”]
> }，
> {“长名称”：“ Runyon Canyon Rd”，
> “short_name”：“Runyon Canyon Rd”，
> “types”：[“route”]
> }，
> {
> “long_name”：“Hollywood Hills”，
> “short_name”：“好莱坞山”，
> “类型”：[“邻里”，“政治”]
> }，
> {
> “ **long_name”：“洛杉矶”**，
> “short_name”：“洛杉矶”，
> **“types”：[“locality”**，“political”]
> }
> ....

我的代码：

> ...
> $data = @file_get_contents($url);
> $phpresult = json_decode($data,true);
> var_dump($phpresult);

var_dump($phpresult) 显示：

> array(2) { ["results"]=> array(8) { [0]=> array(4) { ["address_components"]=> array(8) { [0]=> array(3) { [ "long_name"]=> string(9) "2917-2981" ["short_name"]=> string(9) "2917-2981" ["types"]=> array(1) { [0]=> string( 13) "street_number" } } [1]=> array(3) { ["long_name"]=> string(16) "Runyon Canyon Rd" ["short_name"]=> string(16) "Runyon Canyon Rd" [ "types"]=> array(1) { [0]=> string(5) "route" } } [2]=> array(3) { ["long_name"]=> string(15) "Hollywood Hills" ["short_name"]=> string(15) "Hollywood Hills" ["types"]=> array(2) { [0]=> string(12) "neighborhood" [1]=> string(9) "政治“}} **[3]=>数组（3）{[“long_name”]=>字符串（11）“洛杉矶”** [“short_name”]=>字符串（11）“洛杉矶” **[“类型”]= > array(2) { [0]=> string(8) "locality"** [1]=> string(9) "political" }...<

我想通过搜索/解析/将值“洛杉矶”存储在变量 $locality 中？条件“type = locality”的数组。

我不想通过使用代码来查找信息：

> echo $phpresult['results'][0]['address_components'][3]['long_name'];

因为这假设变量始终是 1) 在数组中的相同位置和 2) 它存在。

任何帮助将非常感激。我还没有找到答案，可能已经阅读（但不完全理解）与该主题相关的每篇文章。

在此先感谢您的帮助。

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:39:37.697

你可以用这个模式做一个 preg_match ：

```
|"long_name" : "([^"]*)",\r\n"short_name" : "([^"]*)",\r\n"types" : \[ [^\]]*"locality"| 
```

[演示](http://www.switchplane.com/awesome/preg-match-regular-expression-tester/?pattern=%7C%22long_name%22%20%3a%20%22%28%5B%5E%22%5D%2a%29%22,%5Cr%5Cn%22short_name%22%20%3a%20%22%28%5B%5E%22%5D%2a%29%22,%5Cr%5Cn%22types%22%20%3a%20%5C%5B%20%5B%5E%5C%5D%5D%2a%22locality%22%7C&subject=%7B%20%22results%22%20%3a%20%5B%0D%0A%7B%0D%0A%22address_components%22%20%3a%20%5B%0D%0A%7B%0D%0A%22long_name%22%20%3a%20%222917-2981%22,%0D%0A%22short_name%22%20%3a%20%222917-2981%22,%0D%0A%22types%22%20%3a%20%5B%20%22street_number%22%20%5D%0D%0A%7D,%0D%0A%7B%20%22long_name%22%20%3a%20%22Runyon%20Canyon%20Rd%22,%0D%0A%22short_name%22%20%3a%20%22Runyon%20Canyon%20Rd%22,%0D%0A%22types%22%20%3a%20%5B%20%22route%22%20%5D%0D%0A%7D,%0D%0A%7B%0D%0A%22long_name%22%20%3a%20%22Hollywood%20Hills%22,%0D%0A%22short_name%22%20%3a%20%22Hollywood%20Hills%22,%0D%0A%22types%22%20%3a%20%5B%20%22neighborhood%22,%20%22political%22%20%5D%0D%0A%7D,%0D%0A%7B%0D%0A%22long_name%22%20%3a%20%22Los%20Angeles%22,%0D%0A%22short_name%22%20%3a%20%22Los%20Angeles%22,%0D%0A%22types%22%20%3a%20%5B%20%22random%22,%20%22locality%22,%20%22political%22%20%5D%0D%0A%7D)

这将返回一个包含 3 个元素的数组，其中长名称位于索引 1，短名称位于索引 2

或使用循环：

```
foreach($phpresult['results'][0]['address_components'] as $component){
  if(array_search('location', $component['types']) !== false){
    $location = $component['long_name'];
    break;
  }
} 
```

如果这是为您硬编码，您可以添加另一个循环来检查所有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:56:39.013

```
foreach($phpresult['results'][0]['address_components'] as $location)
{
    if(in_array("locality" , $location['types']))
    {
        $locality[] = $location['long_name'];
    }
}

print_r($locality); 
```

每个位置的数组有 3 个键：long_name、short_name 和 types。Types 是一个数组，因此，如果其中有一个“locality”值，则`types array` 获取该`long_name`位置的值并存储它。

**编辑：**此函数将存储位置类型的所有 long_names，而不仅仅是第一个。为了只获取第一个位置的 long_name ，请在`$locality[] = ...`.

# android - 如何使编辑文本的值能够发送到另一个活动？

> ID：11790914
> 
> 赞同：0
> 
> 时间：2012-08-03T07:07:13.817
> 
> 标签：android, button, android-intent, android-edittext, textview

我正在开发一个应用程序，我在 EditText 中输入日期，它将日期（输入的）发送到另一个活动并显示为 TextView。我在文本框上方创建了一个按钮。

以下是发送和获取日期的 2 个活动。PersonalInfo.class 这些是将日期发送到另一个活动的代码

```
Button btnDate = (Button) findViewById(R.id.btnDate);
        btnDate.setOnClickListener(new View.OnClickListener()
            {

                @Override
                public void onClick(View v)
                {
                    Intent dateIntent = new Intent();                   
                    dateIntent.setClass(PersonalInfo.this, Create_Events.class);
                    dateIntent.putExtra("passDate", "Date_var_here");
                    PersonalInfo.this.startActivity(dateIntent);

                }
            }); 
```

Create_Events.class 从第一个活动中获取日期的代码，它将日期显示为 textview

```
Intent dateIntent = this.getIntent();    
        /* Obtain String from Intent  */   
        if(dateIntent !=null)   
        {      
            String strDate = dateIntent.getExtras().getString("passDate");     
            TextView txtDate = (TextView) findViewById(R.id.txtDate);
            txtDate.setText(strDate);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:11:29.957

`intent`您在第二个活动中输入了错误的名称。

```
String strDate = **dateIntent**.getExtras().getString("passDate"); 
```

最终代码是

```
Intent dateIntent = this.getIntent();    
/* Obtain String from Intent  */   
if(dateIntent !=null)   
{      
    String strDate=getIntent.getStringExtra("passDate");   
    TextView txtDate = (TextView) findViewById(R.id.txtDate);
    txtDate.setText(strDate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:14:44.463

使用它从您的 EditText 中获取文本：

```
dateIntent.putExtra("passDate", idEditText.getText().toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:14:55.447

```
 EditText et = (EditText) findViewById(R.id.my_edit_text);
 String theText = et.getText().toString();
 // To pass it to another Activity you use an Intent. Example...

   Intent i = new Intent(this, MyNewActivity.class);
      i.putExtra("text_label", theText);
      startActivity(i); 
```

在新的 Activity 中（在 onCreate() 中），您获取 Intent 并检索字符串...

```
public class MyNewActivity extends Activity {

   String uriString;
  @Override
  protected void onCreate(...) {
    ...

    Intent i = getIntent();
    uriString = i.getStringExtra("text_label");

}
 } 
```

# c# - C# AVL-Tree：方法减慢了我的程序，但为什么？

> ID：11790918
> 
> 赞同：1
> 
> 时间：2012-08-03T07:07:41.260
> 
> 标签：c#, performance, avl-tree

我的 ConsoleApplication 从输入生成正确的 AVL 树。对于我的大学，我需要制定一个程序：

*   在 AVL 树中正确插入数据
*   保持平衡
*   给输出足够快和正确的某些输入

* * *

我的问题是为什么我在本主题后面介绍的程序的方法/部分如此缓慢（96% 的总时间程序运行）？

我的程序中也使用 treewalks 的其他方法/部分大约占我程序的 0.05% 或更少

* * *

我将解释部分/方法“**树中节点的等级**”，根据 DotTrace（分析工具），此方法占我整个程序的 96%（所有其他方法大约占 0.05% 或更少）。这就是为什么我在使用 dumjudge 系统提交作业时会获得 timeLimit 的原因。

* * *

*   如果输入行以 T 开头：在 AVL 树中插入新节点

* * *

*   如果输入行以 G 开头：指定节点排名的 derterminate 排名是得分高于您的人数 +1 比使用 Console.Writeline(variable) 的输出；

    例子：

*   节点值：x(10) y(5) z(2) k(5) l(4) m(9)

*   节点等级：X(1) y(3) z(6) k(3) l(5) m(2)

* * *

*   如果输入行以其他内容开头：无需解释这部分工作正常

* * *

我已经尝试了很多东西，但我不明白为什么它会变慢我希望你们能帮助我，让我看看我做错了什么。

* * *

变量：

*   MyAVLTree T：包含 AVL 树的根
*   MyNode NodeX，包含我们要从中确定排名的节点
*   Int compareVALue，是 nodeX 的值，我们将其与其他节点进行比较以确定它是更高（counter++）还是更低（什么都不做）

当没有比 nodeX 更高的节点时，该方法将返回包含节点等级的计数器变量，以便可以将其打印为输出。

* * *

在 AVL 树中产生输出或插入数据的所有输入行大约占我程序的 0.05% 或更少……除了我的程序中产生/返回 AVL 树中节点等级的方法/部分（96%）

我希望我的代码是可读的，在此先感谢您的帮助和时间。

* * *

```
 public static int RankElement(MyAVLTree T, MyNode nodeX, int compareValue)
    {
        int counter = 1;

        while (true)
        {
            if (nodeX == T.root)
            {
                UnkownTreeWalk(T, nodeX.Right, compareValue, ref counter);
                return counter;
            }
            else if (nodeX == nodeX.Parent.Right)
            {
                UnkownTreeWalk(T, nodeX.Right, compareValue, ref counter);

                while (nodeX == nodeX.Parent.Right)
                {
                    nodeX = nodeX.Parent;
                    if (nodeX == T.root)
                    {
                        return counter;
                    }
                }
                nodeX = nodeX.Parent;
                if (nodeX.playerScore > compareValue)
                    counter++;
            }
            else
            {
                UnkownTreeWalk(T, nodeX.Right, compareValue, ref counter);

                nodeX = nodeX.Parent;
                if (nodeX.playerScore > compareValue)
                    counter++;
            }
        }

    }

    public static void UnkownTreeWalk(MyAVLTree T, MyNode nodeX, int compareValue, ref int counter)
    {
        if (nodeX != null)
        {
            if (nodeX.playerScore > compareValue)
            {
                counter++;
            }
            UnkownTreeWalk(T, nodeX.Right, compareValue, ref counter);

            UnkownTreeWalk(T, nodeX.Left, compareValue, ref counter);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:57:37.497

有三件事要调查。

首先，您有一些我认为不必要的条件。在 UnknownTreeWalk 中，我们检查节点的值是否小于 compareValue。然而， compareValue 是初始节点的值，当我们调用 UnknownTreeWalk 时，我们总是在该初始节点的右侧。向右意味着它的值更大，所以检查是不必要的。您可以进行一些类似的微小更改以使事情变得更快捷。

其次，您可能有很多 CPU 缓存未命中。您可以尝试安排您的 TreeNode 在内存中连续排列。在您的情况下，这可能没什么大不了的。

第三，也是最重要的一点，我怀疑你会花很多时间在树上跑来跑去，研究它们的大小。您可以将每个子树的大小保留在它的 MyNode 对象中，然后只需查阅它，而不是到处计算。这就是我认为最有可能让你快速到达需要的地方。

最后，Rank 的实现可能要简单得多。我鼓励你从这个实现中学到关于这个问题的知识，然后写一个新的，考虑这些知识并计算这个节点右侧的所有节点。

# android - 可序列化对象的 ArrayList 作为广播接收器未接收到的额外意图

> ID：11790919
> 
> 赞同：0
> 
> 时间：2012-08-03T07:07:41.853
> 
> 标签：android, serialization, android-intent, broadcastreceiver, intentservice

我正在发送一个广播，其意图包含一个序列化对象的 ArrayList 作为额外的意图。

当这个 arrayList 包含大约 500 个有效对象时，广播接收器的 onReceive() 不会接收到它。但是有大约 100 个对象，我可以在 onReceive() 中获取 ArrayList

使用意图可以接收/发送的数据量是否存在已知限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:16:30.380

通过意图传递大量数据并不是一个好主意。通过意图传递的数据必须很小。

我看到了 3 个解决方案：

*   好：我建议您**将对象存储在数据库中**，然后通过您的意图**传递 id 。**
*   中：制作一个单例（使用 Application 类并将您的列表放在静态实例中）
*   不好**且不**推荐：将您的列表设为静态并传递 ID（或职位）。

希望这会帮助你。

# java - 如何开始使用 Chainsaw for Log4j？

> ID：11790920
> 
> 赞同：6
> 
> 时间：2012-08-03T07:07:42.213
> 
> 标签：java, log4j, appender, apache-chainsaw

我想开始使用 Chainsaw v2。几乎没有关于它的信息。我只找到了[这个](http://www.velocityreviews.com/forums/t140105-help-using-chainsaw-for-log4j.html)，但链接无法打开，所以不清楚。

我使用socketAppender：

```
log4j.rootLogger=DEBUG, server

log4j.appender.server=org.apache.log4j.net.SocketAppender
log4j.appender.server.Port=4712
log4j.appender.server.RemoteHost=localhost
log4j.appender.server.ReconnectionDelay=10000 
```

我创建了文件 log4j.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration >
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="true">
   <appender name="A2" class="org.apache.log4j.ConsoleAppender">
      <layout class="org.apache.log4j.SimpleLayout"/>
   </appender>

   <plugin name="SocketReceiver" class="org.apache.log4j.net.SocketReceiver">
      <param name="Port" value="4712"/>
   </plugin>

   <root>
      <level value="debug"/>
   </root>
</log4j:configuration> 
```

并在`let me search for configuration file`. 但是没有日志。接下来我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:40:53.323

我是电锯作者之一。试试即将发布的 Chainsaw 的最新开发者快照。它有一个新的配置 UI，它应该更容易配置，特别是如果你正在做的只是使用套接字附加程序。

这个版本有很多新功能。随时通过电子邮件发送问题或发布到 log4j-user 邮件列表。

此处提供开发人员快照：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

斯科特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:40:08.747

请仅使用一个文件 log4j.properties 或 log4j.xml。并查看这篇[文章](http://www.informit.com/guides/content.aspx?g=java&seqNum=459)的电锯。它可能对您有帮助。

这是 Chainsaw 的示例 log4j.properties 文件，

```
 log4j.rootCategory=DEBUG, zeroconf, chainsaw
  # Socket Appender
  log4j.appender.chainsaw=org.apache.log4j.net.SocketAppender
  log4j.appender.chainsaw.remoteHost=localhost
  log4j.appender.chainsaw.port=4445
  log4j.appender.chainsaw.locationInfo=true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T12:53:28.057

首先启动服务器意味着在电锯日志服务器接收器中，您可以选择第一个套接字接收器。

> log4j.rootLogger=调试，CHAINSAW_CLIENT
> 
> log4j.appender.CHAINSAW_CLIENT=org.apache.log4j.net.SocketAppender log4j.appender.CHAINSAW_CLIENT.RemoteHost=localhost log4j.appender.CHAINSAW_CLIENT.Port=4445
> log4j.appender.CHAINSAW_CLIENT.LocationInfo=true

# mysql - MySql AES_Encrypt 更安全的算法

> ID：11790923
> 
> 赞同：0
> 
> 时间：2012-08-03T07:07:45.207
> 
> 标签：mysql, security, encryption, openssl, aes

我有数千条 AES_ENCRYPT 记录。问题是我刚刚意识到 ECB 模式非常不安全。

如何将 AES_ENCRYPT 128 ECB 转换为 openssl（或其他）AES 256 CBC？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:15:05.093

[看这里](http://www.mail-archive.com/mysql@lists.mysql.com/msg73071.html)

修改文件后需要重新编译`include/my_aes.h`

```
#define AES_KEY_LENGTH 128 /* must be 128 192 or 256 */ 
```

# c# - GPS定位API？

> ID：11790940
> 
> 赞同：2
> 
> 时间：2012-08-03T07:08:47.540
> 
> 标签：c#, .net, ios, api, gps

有没有获取某个地址的 GPS 位置的 api 或方法？

我必须遍历一个列表并获取 GPS 经度和纬度。

问候，和服

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T07:13:28.170

您正在寻找的是所谓的[地理编码](http://en.wikipedia.org/wiki/Geocoding)

> 地理编码是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程

您可以为此使用[Google 地理编码服务](https://developers.google.com/maps/documentation/geocoding/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:12:10.900

如果您只是想要经度和纬度（与 GPS 无关），则有多种地理编码选项。例如：

*   [谷歌地理编码 API](https://developers.google.com/maps/documentation/geocoding/)
*   [必应地图地理编码服务](http://msdn.microsoft.com/en-us/library/cc966793.aspx)
*   [Geonames](http://www.geonames.org/export/free-geocoding.html)（也有数据转储）

在线地理编码服务往往通过 JSON 或 XML API，因此您实际上并不*需要*特定于 C# 的客户端库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:05:09.430

@Jon_Skeet 和 @Hamad 都在为您提供有效的答案。您可以直接使用 Bing 或 Google 来获取地址的经纬度详细信息。

不过，当 iOS6 正式登场时，iOS 将不再使用谷歌地图。这提出了几个问题。由于根据条款和条件从谷歌传回的任何数据都应显示在谷歌地图上。我认为 BING 也会出现类似的情况。虽然，这可能不是你关心的事情。

但为确保将来不会出现此类问题，请使用 Apple 提供的地理编码功能[链接此处以供参考](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html)

作为迂腐的人，您不希望对您实际希望对地址进行反向地理编码的任何内容进行地理编码。

# objective-c - 在 OSX 10.8 沙箱中显示带有默认应用程序的文档

> ID：11790944
> 
> 赞同：1
> 
> 时间：2012-08-03T07:09:01.150
> 
> 标签：objective-c, sandbox, osx-mountain-lion

我为启用沙盒的 OSX 10.8 编写了一个下载管理器。

下载文件后，应用程序将使用该文件类型的默认应用程序启动该文件。

我尝试以这种简单的方式做到这一点：

> [[NSWorkspace sharedWorkspace] openFile:file];
> 
> “文件”是一个 NSString 并指向 /Users/philipp/Library/Containers/com.philipp.downloader/Data/Downloads/Test mp3.mp3

iTunes 在我的扩展坞中跳了一会儿，但没有任何反应。

有什么问题，我该怎么做？

* * *

编辑：

问题是 iTunes 没有读取*Test mp3.mp3*的权限。我在我的*system.log*中找到了这条消息：

> CoreServicesUIAgent[89712]：隔离解析拒绝 pid 87288，因为它不允许读取 /Users/philipp/Downloads/Test mp3.mp3

最后一个问题是：如何为该文件设置正确的权限？

最好的问候，

菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:29:40.410

它要么需要在您的 Sandboxed 文件夹中，要么用户必须明确打开它。否则，您将无权访问。我建议修改您的方法，让用户以某种方式首先选择 MP3 文件，这样您就可以访问我了。只要确保为用户选择的文件启用访问权限！

# iphone - 用比 Core Plot 更简单的方法在 iPhone 上绘制图形

> ID：11790948
> 
> 赞同：3
> 
> 时间：2012-08-03T07:09:26.153
> 
> 标签：iphone, ios, core-plot

我需要在我的应用程序中绘制一个简单的图表。我尝试使用 Core Plot 来制作它，但我什至无法将它正确导入到我的项目中。有没有更简单但仍然漂亮的框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:23:37.360

[您可以通过以下链接在此处](http://bit.ly/NX5qWh)显示带有示例的绘图图表

同样在这里，问题类型如下。

1)[核心情节图](https://stackoverflow.com/questions/4410989/how-can-i-create-better-looking-charts-than-those-generated-by-core-plot)

2) [IOS 中可用的库](https://stackoverflow.com/questions/769749/is-there-a-good-charting-library-for-iphone)

这可能有助于您确定哪个对您更好实施很容易。

# php - 摆脱花括号外的任何东西

> ID：11790949
> 
> 赞同：0
> 
> 时间：2012-08-03T07:09:30.187
> 
> 标签：php, regex

我需要一个 php 中的正则表达式，它允许以下内容：

这是给定的示例
1\. aaa aaa{bb b {c cc}{d dd}e ee}xxx
2\. 123{asd{asd{asd{asd}asd}}asd}qwe

输出将是：
1\. {bb b {c cc}{d dd}e ee}
2\. {asd{asd{asd{asd}asd}}asd}

我试过这个但不起作用

```
preg_match_all('/{(.*?)}/', $resonse, $matches); 
```

它基本上摆脱了主要花括号之外的任何东西，即使里面有花括号。我真的需要你的帮助。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:17:21.497

您将需要 PCRE 的递归功能来执行此操作。

```
<?php
$pattern = '!
  { # patterns start with curly brace
      (?:           # ?: means that this is only for grouping, not for capturing
                    # the { } contain 
        [^{}]*      # not-curly-braces-characters
      |             # or
        (?R)        # this pattern again, i.e. {^[{}] | (?R) } again
      )*
  } # patterns ends with curly brace
!x';

foreach( array('aaa aaa{bb b {c cc}{d dd}e ee}xxx', '123{asd{asd{asd{asd}asd}}asd}qwe') as $subject ) {
    echo "\n$subject: ";
    if ( preg_match($pattern, $subject, $m) ) {
        echo $m[0];
    }
    else {
        echo '--no match--';
    }
} 
```

印刷

```
aaa aaa{bb b {c cc}{d dd}e ee}xxx: {bb b {c cc}{d dd}e ee}
123{asd{asd{asd{asd}asd}}asd}qwe: {asd{asd{asd{asd}asd}}asd} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:21:29.513

你根本不需要正则表达式：

```
$str = 'aaa aaa{bb b {c cc}{d dd}e ee}xxx';

$replace = substr(substr($str, 0, strrpos($str, '}') + 1), strpos($str, '{'));

echo $replace; // displays "{bb b {c cc}{d dd}e ee}" 
```

如果你对这段代码进行基准测试，它可能会比正则表达式快得多。你不应该用复杂的东西来做这么简单的事情。

我想你可能想为每个字符串匹配多个结果。在这种情况下，我可能仍然有一个不依赖任何模块的更快的解决方案：

```
$str = 'aaa aaa{bb b {c cc}{d dd}e ee}xxxaaa qaaa{bb b {cqwe cc}{d cdd}e qweee}xxx';
$array = str_split($str);
$opens = 0;
$result = '';

$results = array();

for($i = 0; $i < count($array); $i++) {
    if($array[$i] === '{') {
        $opens++;
    } else if($array[$i] === '}' && $opens > 0) {
        $opens--;
    }

    if($opens > 0) $result .= $array[$i];

    if($opens === 0 && strlen($result) > 0) {
        $results[] = $result . '}';
        $result = '';
    }
}

print_r($results);

/*
results:
Array
(
    [0] => {bb b {c cc}{d dd}e ee}
    [1] => {bb b {cqwe cc}{d cdd}e qweee}
)

*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:20:10.450

```
<?php
$str = "abc{def{ghi{jkl}mno{pqr}st}uvw}xyz" ;

$str = preg_match("#\{((?>[^\{\}]+)|(?R))*\}#x", $str, $matches, PREG_OFFSET_CAPTURE, 3);

print_r($matches);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:20:21.050

也许这会做到：`preg_replace('/(^[^{]*)|([^}]*$)/', '', 'aaa aaa{bb b {c cc}{d dd}e ee}xxx');`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T07:32:24.600

这真的是正则表达式的工作吗？`{`通过查找 first和 last来获取您想要的子字符串似乎更容易`}`。例如，这个：

```
$str = "abc {kjlj { jkljlkj } ljkj } kljlj";

$start = strpos($str, '{');  # First {
$end = strrpos($str, '}');   # Last }

$section = substr($str, $start, $end - $start + 1);
echo $section;  # => "{kjlj { jkljlkj } ljkj }" 
```

# ruby - 在 Rails 3 中发送带有附件的电子邮件

> ID：11790954
> 
> 赞同：0
> 
> 时间：2012-08-03T07:10:15.440
> 
> 标签：ruby, ruby-on-rails-3, smtp, actionmailer

我遵循了[Action Mailer Basics](http://guides.rubyonrails.org/action_mailer_basics.html)，但我仍然遇到以下问题：

1.  我无法向组织外部的服务器（例如 gmail）发送电子邮件
2.  我无法发送大小超过 195 **b的附件**

有什么问题吗，为什么会出现这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:13:03.027

请通过rails casts[第206](http://railscasts.com/episodes/206-action-mailer-in-rails-3)集......会帮助你..!!

# python - 解析 XML 以获取节点的值

> ID：11790956
> 
> 赞同：0
> 
> 时间：2012-08-03T07:10:25.690
> 
> 标签：python, xml

```
import xml.dom.minidom

content = """
<urlset xmlns="http://www.google.com/schemas/sitemap/0.90">
  <url>
    <loc>http://www.domain.com/</loc>
    <lastmod>2011-01-27T23:55:42+01:00</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.5</priority>
  </url>
  <url>
    <loc>http://www.domain.com/page1.html</loc>
    <lastmod>2011-01-26T17:24:27+01:00</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.5</priority>
  </url>  
  <url>
    <loc>http://www.domain.com/page2.html</loc>
    <lastmod>2011-01-26T15:35:07+01:00</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.5</priority>
  </url>  
</urlset>
"""

xml = xml.dom.minidom.parseString(content)
urlset = xml.getElementsByTagName("urlset")[0]
url = urlset.getElementsByTagName("url")

for i in range(0, url.length):
    loc = url[i].getElementsByTagName("loc")[0].childNodes[0].nodeValue
    lastmod = url[i].getElementsByTagName("lastmod")[0].childNodes[0].nodeValue
    changefreq = url[i].getElementsByTagName("changefreq")[0].childNodes[0].nodeValue
    priority = url[i].getElementsByTagName("priority")[0].childNodes[0].nodeValue
    print "%s, %s, %s, %s" % (loc, lastmod, changefreq, priority) 
```

没有更简单的方法来获取节点的值吗？

```
loc = url[i].getElementsByTagName("loc")[0].childNodes[0].nodeValue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:16:33.033

这行得通吗：`loc = getElementsByTagName("loc")[i].innerHTML`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:25:42.783

可能有更好的方法来获取节点的值......但这至少是一个更干净的选择，您不会重复自己：

```
import xml.dom.minidom

content = """
<urlset xmlns="http://www.google.com/schemas/sitemap/0.90">
  <url>
    <loc>http://www.domain.com/</loc>
    <lastmod>2011-01-27T23:55:42+01:00</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.5</priority>
  </url>
  <url>
    <loc>http://www.domain.com/page1.html</loc>
    <lastmod>2011-01-26T17:24:27+01:00</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.5</priority>
  </url>  
  <url>
    <loc>http://www.domain.com/page2.html</loc>
    <lastmod>2011-01-26T15:35:07+01:00</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.5</priority>
  </url>  
</urlset>
"""

def get_first_node_val(obj, tag):
    return obj.getElementsByTagName(tag)[0].childNodes[0].nodeValue

xml = xml.dom.minidom.parseString(content)
urlset = xml.getElementsByTagName("urlset")[0]
urls = urlset.getElementsByTagName("url")

for url in urls:
    loc = get_first_node_val(url, "loc")
    lastmod = get_first_node_val(url, "lastmod")
    changefreq = get_first_node_val(url, "changefreq")
    priority = get_first_node_val(url, "priority")
    print "%s, %s, %s, %s" % (loc, lastmod, changefreq, priority) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:26:56.273

为什么不是节点的第一个孩子

```
loc = url[i].getElementsByTagName("loc").firstChild.nodeValue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-29T18:55:34.203

向“get_first_node_val”添加附加功能，它接受具有相同节点值的 XML 元素。例如，以下包含两个 loc 元素。

```
<url>
<loc>http://domain.com/</loc>
<loc>http://sub.domain.com</loc>
<lastmod>2011-01-27T23:55:42+01:00</lastmod>
<changefreq>daily</changefreq>
<priority>0.5</priority>
</url>

def get_first_node_val(obj, tag):
  element = []
  l = 0
  for x in obj.getElementsByTagName(tag):
    element.append({tag : obj.getElementsByTagName(tag)[l].childNodes[0].nodeValue})
    l += 1
  return element 
```

输出

```
[{'loc': u'http://domain.com/'}, {'loc': u'http://sub.domain.com'}], [{'lastmod': u'2011-01-27T23:55:42+01:00'}], [{'changefreq': u'daily'}], [{'priority': u'0.5'}] 
```

# c++ - 涉及指针的函数模板重载解决方案

> ID：11790957
> 
> 赞同：1
> 
> 时间：2012-08-03T07:10:26.890
> 
> 标签：c++, templates, overloading

给定一个模板和一个更专业的重载：

```
template <typename T>
const T& some_func(const T& a, const T& b) 
{
    std::cout << "Called base template\n";
    return (a < b) ? a : b; 
}

template <typename T>
T* const& some_func(T* const& a, T* const& b) 
{
    std::cout << "Called T* overload\n";
    return (*a < *b) ? a : b; 
} 
```

然后以下工作按预期工作：

```
int main()
{
    std::cout << some_func(5.3, 6.2) << "\n";
    double a = 1;
    double b = 2;
    double *p = &a;
    double *q = &b;
    const double *ret = some_func(p, q); 
    std::cout << *ret << "\n";
    return 0;
} 
```

采用第一次印刷`Called base template`，第二次印刷`Called T* overload`。如果我们将重载签名替换为：

```
template <typename T>
const T*& some_func(const T*& a, const T*& b) 
```

然后第二个调用现在调用基本模板。鉴于这`int const& x`等于`const int& x`，我假设`T* const&`等于是不正确的`const T*&`吗？为什么第一个版本正确解析，而第二个版本没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T07:11:51.533

是的，你不正确。在`const T*&`T 中是 const，在`T* const&`指针 (T*) 中是 const。

当您`const`移到 的右侧时，就会发生变化`*`。`const T*&`和`T const *&`是等价的，但`T* const&`不同。鉴于 Typedefs 可以提供帮助

```
typedef T *TPtr; 
```

`const TPtr&`等于`TPtr const &`等于`T* const &`。

C/C++ 中的声明符很难解析（对于人类）。甚至 C 的发明者也是这么说的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:17:59.090

`T const &`并且`const T &`是相同的；和`U const *`和`const U *`是相同的。

但是`S &`和*甚至*对于. `T const &`_ 你所拥有的更糟糕，即和。*`T = S``S = U const *``T = U *`*

# php - 如何使用 SimpleXMLElement->addAttribute 命名空间？

> ID：11790965
> 
> 赞同：1
> 
> 时间：2012-08-03T07:10:52.537
> 
> 标签：php, xml, simplexml, xml-namespaces

我只是想通过 SimpleXMLElement() 使用以下方法生成下一个 xml 代码：

```
<WebOrders xmlns="http://microsoft.com/wsdl/types/"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
           xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

但是这样的代码

```
$webOrders = new SimpleXMLElement('<WebOrders/>');
$webOrders->addAttribute('xmlns', 'http://microsoft.com/wsdl/types/');
$webOrders->addAttribute('xmlns:xsi', 'http://www.w3.org/2001/XMLSchema-instance');
$webOrders->addAttribute('xmlns:xsd', 'http://www.w3.org/2001/XMLSchema'); 
```

使

```
<WebOrders xsi="http://www.w3.org/2001/XMLSchema-instance" xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://microsoft.com/wsdl/types/"><WebOrder/><WebOrder/></WebOrders> 
```

只要。

# c# - 我无法在另一台电脑上运行我的应用程序

> ID：11790969
> 
> 赞同：1
> 
> 时间：2012-08-03T07:11:02.287
> 
> 标签：c#, entity-framework, deployment, local-database

我用 c# 编写了一个程序，并将数据库用作本地数据库和实体框架。我完成了程序并创建了一个安装程序项目来部署它。我在安装程序项目中将数据库（.sdf）文件包含到模型文件夹中，并将所有 dll 文件从 C:\Program Files\Microsoft SQL Server Compact Edition\v3.5 包含到应用程序文件夹中

我的连接字符串在 App.Config 文件中是这样的：

```
 <configuration>
  <connectionStrings>
    <add name="ApplicationEntities" connectionString="metadata=res://*/Model.Model1.csdl|res://*/Model.Model1.ssdl|res://*/Model.Model1.msl;provider=System.Data.SqlServerCe.3.5;provider connection string=&quot;Data Source=|DataDirectory|\Model\ApplicationDatabase.sdf&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

当我在任何其他电脑上安装程序并运行程序时，我遇到了这样的异常：

```
 See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.ArgumentException: The specified store provider cannot be found in the configuration, or is not valid. ---> System.ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not be installed.
   at System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName)
   at System.Data.EntityClient.EntityConnection.GetFactory(String providerString)
   --- End of inner exception stack trace ---
   at System.Data.EntityClient.EntityConnection.GetFactory(String providerString)
   at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
   at System.Data.EntityClient.EntityConnection..ctor(String connectionString)
   at System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString)
   at System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
   at Smart_Mail_Sender.Model.ApplicationEntities..ctor()
   at MailSender.Settings..ctor()
   at MailSender.FormMain.serverToolStripMenuItem_Click(Object sender, EventArgs e)
   at System.Windows.Forms.ToolStripItem.RaiseEvent(Object key, EventArgs e)
   at System.Windows.Forms.ToolStripMenuItem.OnClick(EventArgs e)
   at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)
   at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)
   at System.Windows.Forms.ToolStripItem.FireEventInteractive(EventArgs e, ToolStripItemEventType met)
   at System.Windows.Forms.ToolStripItem.FireEvent(EventArgs e, ToolStripItemEventType met)
   at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)
   at System.Windows.Forms.ToolStripDropDown.OnMouseUp(MouseEventArgs mea)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ToolStrip.WndProc(Message& m)
   at System.Windows.Forms.ToolStripDropDown.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.269 (RTMGDR.030319-2600)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
Smart Mail Sender
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Program%20Files%20(x86)/Default%20Company%20Name/Setup1/Smart%20Mail%20Sender.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.278 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.282 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.269 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Data.Entity
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Data.Entity/v4.0_4.0.0.0__b77a5c561934e089/System.Data.Entity.dll
----------------------------------------
System.Core
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.233 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
System.Data
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.237 (RTMGDR.030319-2300)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Configuration
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.233 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Numerics
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Numerics/v4.0_4.0.0.0__b77a5c561934e089/System.Numerics.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

我搜索了整个互联网，找不到任何解决方法。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:16:49.070

您必须在机器上安装 SQL Server Compact 3.5 运行时。您可以将精简版的安装程序包含在您自己的安装程序中。

你可以在这里下载它，如果你还没有 [http://www.microsoft.com/en-us/download/details.aspx?id=5783](http://www.microsoft.com/en-us/download/details.aspx?id=5783)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:17:51.187

PC 上未安装正确版本的 SQL CE 3.5

还需要检查系统是32位还是64位操作系统，相应安装setup

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:19:57.853

验证目标计算机是否安装了 SQL Server Compact 3.5 并且模型文件已到位：*Model.Model1.csdl;Model.Model1.res;Model.Model1.ssdl;Model.Model1.msl*。

# crystal-reports - 如何更改水晶报表中参数的日期格式？

> ID：11790973
> 
> 赞同：0
> 
> 时间：2012-08-03T07:11:20.137
> 
> 标签：crystal-reports, date-format

默认情况下，Crystal Reports 会将日期显示为 2011 年 6 月 1 日（月/日/年），因此我必须使用以下公式将格式更改为 01-06-2011（日/月/年）
`ToText({MyDate}, "dd-MM-yyyy")`：.

我的问题是如何在使用日期参数时更改日期格式？

例如：
这是我的日期参数：{?date}
这是我的公式（称为 {@displaydate}），用于在报告中显示所选日期：
`"From : " & Minimum({?date}) & " To :" & Maximum({?date})`

在设计视图中：
日期：{@displaydate} {?date}
在预览模式中：
日期：从：2011 年 6 月 1 日到：2011 年 6 月 31 日

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:26:14.757

```
"From : " & ToText(Minimum({?date}), "dd-MM-yyyy") & 
" To :" & ToText(Maximum({?date}), "dd-MM-yyyy") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T12:14:14.103

我在 Crystel 报告中创建公式它将日期时间格式的值转换为日期。我使用以下公式。

```
CDate ({TRAN_STUDENT_INFO.Adm_Date}) 
```

# vb.net - 你调用的对象是空的

> ID：11790974
> 
> 赞同：0
> 
> 时间：2012-08-03T07:11:25.273
> 
> 标签：vb.net, internet-explorer, browser, object-reference

那是我的代码：

```
 Dim num as integer = 0
    For Each s As String In ListBox1.Items
        num = num + 1
        Dim web(num) As WebBrowser
        RefreshIESettings(s)
        Web(num).Navigate("http://www.google.com") 'There's the error
        wait("5000")
        MsgBox(Web(num).Document.Title)
    Next 
```

只有当我这样做时，我才会收到此错误：

```
 Dim webb As WebBrowser
    RefreshIESettings(s)
    Webb.Navigate("http://www.google.com") 'Here too
    wait("5000")
    MsgBox(Webb.Document.Title) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:15:39.750

在这里，您创建一个空引用数组：

```
Dim web(num) As WebBrowser 
```

您需要`web(num)`在使用它之前设置它的值，否则它将为空。

只需更改您的代码以包含

```
web(num) = New WebBrowser() 
```

在你使用之前`web(num)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:28:44.340

您需要使用“新”关键字。

两者都在这里：

```
Dim num as integer = 0
    For Each s As String In ListBox1.Items
        num = num + 1
        Dim web(num) As WebBrowser = new WebBrowser()
        RefreshIESettings(s)
        Web(num).Navigate("http://www.google.com")
        wait("5000")
        MsgBox(Web(num).Document.Title)
    Next 
```

和这里：    

```
 Dim webb As WebBrowser = new WebBrowser()
    RefreshIESettings(s)
    Webb.Navigate("http://www.google.com")
    wait("5000")
    MsgBox(Webb.Document.Title) 
```

# java - 用Java读取整数文本文件的无限循环

> ID：11790978
> 
> 赞同：0
> 
> 时间：2012-08-03T07:11:32.233
> 
> 标签：java, while-loop, infinite-loop

嗨，我有一个相当简单的程序，但我无法理解为什么我在运行它时会出现 inifite 循环。我正在读取的文件中有 10 个整数。我正在使用 Eclipse Juno，控制台中的输出从 281363 开始以 1 无限计数。我怎样才能解决这个问题？提前致谢。

```
import java.util.*;
import java.io.*;

public class TestScoreAnalyzer
{
public static void main(String[] args) throws FileNotFoundException
{
        int arraySize = 0;

        File file = new File("C:\\Users\\Quinn\\workspace\\CPS121\\src\\
                             additionalAssignments\\scoresSample.txt");
    Scanner inputFile = new Scanner(file);

        while(inputFile.hasNextInt())
    {
    arraySize++;
    System.out.println(arraySize);
    }

    inputFile.close();
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T07:12:50.150

你从不打电话`inputFile.nextInt()`- 你*只是*在打电话`hasNextInt()`，这实际上并没有提前文件中的位置。你可能想要：

```
while (inputFile.hasNextInt())
{
    arraySize++;
    System.out.println(arraySize);
    int value = inputFile.nextInt();
    // Do something with the value?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:15:02.817

[http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt) ()

扫描仪没有继续前进 - 它只是说下一个是一个 int （每次都看同一个）

# excel - 显示带有参数的数据透视表列表

> ID：11790984
> 
> 赞同：0
> 
> 时间：2012-08-03T07:11:51.687
> 
> 标签：excel, analytics, pivot-table, vba

我有一个包含许多工作表和许多数据透视表的工作簿。**在所有这些数据透视表的一个位置进行概述**将非常有助于确保我拥有一致的参数、标题等。

它应该显示关键信息，例如：

工作表名称、数据透视表名称、数据透视表位置、指向位置的超链接、选择的参数（如 OLAP 支持、当前连接的切片器等、类型（电源轴或标准）

我想我们都会很高兴为我们所有的复杂应用程序提供这个。有人知道如何在 VBA 或其他东西中设计这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:52:47.473

您应该能够遍历数据透视表并通过以下方式获取信息：

```
Dim pvt As PivotTable
Dim ws As Worksheet
Set ws = ThisWorkBook.ActiveSheet
For Each pvt In ws.PivotTables

'collect data about pivot tables and output somewhere..
Next pvt 
```

如果数据透视表在多个工作表中，则将该循环嵌套在一个循环中，该循环在工作簿工作表中循环。

这是否为您提供了一个足够的起点？

# forms - 验证表单字段以确保它不为空

> ID：11790989
> 
> 赞同：-1
> 
> 时间：2012-08-03T07:12:16.720
> 
> 标签：forms, validation, asp-classic

每个人我都是 ASP 的新手，我写了一个应该从 HTML 表单中获取输入的代码。

我给了一个文本框，该文本框的值是强制性的。如果用户没有输入该字段。asp 页面应显示消息“**该字段不能留空！** ”

我写了一个代码，但我没有得到输出。谁能帮我？

我的代码片段是

**索引.html**

```
 <form method="post" action="a1.asp">
   Field 1<input type="text" name="field1">*
   </br></br><input type="submit" name="send" value="submit">
   <input type="reset" name="clear" value="clear">
   </form> 
```

**a1.asp**

```
 <%
Function Mandatory(field1)
if field1 = "" then
response.write("Field one is mandatory!cannot be left empty")
else
response.write("Welcome to new html")
End if
End Function
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:15:44.050

您必须使用 Request.Form 从“POST”操作中获取值。

喜欢：

```
field1 = request.form("field1")
if field1 = "" then 
.... 
```

参考这个：[http ://www.w3schools.com/asp/coll_form.asp](http://www.w3schools.com/asp/coll_form.asp)

顺便说一句，asp是非常非常古老的。如果你想学习 web 开发语言，你可以试试 ASP.NET 或 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:16:54.523

没有更多信息很难说。但是您需要在某处调用该函数，并引用 Request 集合，例如：

```
<% Mandatory(Request("field1")) %> 
```

# postgresql - 更新表逻辑

> ID：11790990
> 
> 赞同：0
> 
> 时间：2012-08-03T07:12:21.353
> 
> 标签：postgresql, postgresql-8.4

我有两张表，上面有触发器。

第一的

```
CREATE OR REPLACE FUNCTION update_table()
RETURNS trigger AS
$BODY$
 BEGIN
IF    TG_OP = 'UPDATE' THEN
    UPDATE filedata SET id=NEW.id,myData=NEW.myData,the_geom=ST_TRANSFORM(NEW.the_geom,70066) WHERE num=NEW.num;
    RETURN NEW;
ELSEIF TG_OP = 'INSERT' THEN
    INSERT INTO filedata(num,id,myData,the_geom) VALUES (NEW.num,NEW.id,NEW.myData,ST_TRANSFORM(NEW.the_geom,70066));
    INSERT INTO filestatus(id,name,status) VALUES (NEW.num,NEW.myData,'Не подтвержден');
    RETURN NEW;
END IF;

 END;
$BODY$
LANGUAGE plpgsql VOLATILE 
```

第二

```
CREATE OR REPLACE FUNCTION update_table_temp()
RETURNS trigger AS
$BODY$
 BEGIN
IF    TG_OP = 'INSERT' THEN
    INSERT INTO filedata_temp(num,id,myData,the_geom) VALUES (NEW.num,NEW.id,NEW.myData,ST_TRANSFORM(NEW.the_geom,900913));
    RETURN NEW;
ELSEIF TG_OP = 'DELETE' THEN
    DELETE FROM filedata_temp WHERE num=OLD.num;
    RETURN OLD;
END IF;

 END;
$BODY$
LANGUAGE plpgsql VOLATILE 
```

我有一个问题。如果我在第一个表中插入数据，它的触发器也会在第二个表中插入数据。但是该插入会导致第二个表的触发器在第一个表上执行插入，依此类推。

你能帮我解决这个问题吗？如何让表格在不循环的情况下相互更新？

**更新**
我有另一个问题当我在表中插入数据时如何更改数据？例如，我在`the_geom`列中插入 GEOMETRY。如果几何`SRID=70066`我想把`the_geom`这个函数的工作结果放在列中`ST_TRANSFORM(the_geom,900913)`。

**更新 2**

扳机

```
 CREATE TRIGGER update_geom
  AFTER INSERT
  ON filedata_temp
  FOR EACH ROW
  EXECUTE PROCEDURE update_geom(); 
```

功能

```
 CREATE OR REPLACE FUNCTION update_geom()
 RETURNS trigger AS
 $$
 BEGIN
  IF ST_SRID(NEW.the_geom)=70066 THEN

    UPDATE filedata_temp SET id='88',the_geom=ST_TRANSFORM(NEW.the_geom,900913);
  END IF;
RETURN NEW;

END;
$$
LANGUAGE plpgsql; 
```

如果我使用这个函数触发没有工作，但如果这样：

```
 CREATE OR REPLACE FUNCTION update_geom()
 RETURNS trigger AS
 $$
 BEGIN

    UPDATE filedata_temp SET id='88',the_geom=ST_TRANSFORM(NEW.the_geom,900913);
RETURN NEW;

END;
$$
LANGUAGE plpgsql; 
```

我明白`id=88`了，但 ST_TRANSFORM 不起作用。

**更新 3**

ST_TRANSFORM() 不错的功能，但在我的情况下它做了一些奇怪的事情。

例如，我有一个表 filedata_temp(SRID=4326)。我用 srid=70066 插入几何我试试这个触发器

```
 CREATE OR REPLACE FUNCTION update_geom()
 RETURNS trigger AS
 $$
 BEGIN

    UPDATE filedata_temp the_geom=ST_TRANSFORM(NEW.the_geom,4326);
RETURN NEW;

END;
$$
LANGUAGE plpgsql; 
```

并得到这个几何图形。 `"0103000020E6100000010000001800000097832C7ABD823741DA312CBF59F6174145ED23E0088337413CB8228A65F7174145ED23E0088337413CB8228A65F7174145ED23E0088337413CB8228A65F7174115B8A7F8208337416DE8C689ADF7174115B8A7F8208337416DE8C689ADF71741D1D3BAF56383374114BFD1303AF917418B016D395F8537413C2856DFF7F717413AF95F044C853741A997BC22A3F71741F88E75BD2D85374178C92D9BE6F61741F92A3B192685374165C8D76E31F61741C84AA37B26853741F2674F6A96F5174144F25B9B16853741E849D10C1BF5174105142CD2E384374112E19E8688F31741B72C78F697843741A808260138F31741FF0C0C6A0884374151A8BBFF76F21741832CF2EEF48337418BE15C1290F21741FFFB3AC6A3833741D85A253DF4F2174113E8B8956C83374109067F2139F31741E383648E3383374100C25C64D8F3174179BAEBD7178337412DA0D6482BF41741CF38E4F7038337410AB04BD7E5F41741C936158CE182374145C1EC5D99F5174197832C7ABD823741DA312CBF59F61741"`

ST_transform() 将这个字符串从 SRID=4326 和在 EPSG:70066 中转换的几何体生成。

70066中有这个字符串

`"0103000020B2110100010000001800000097832C7ABD823741DA312CBF59F6174145ED23E0088337413CB8228A65F7174145ED23E0088337413CB8228A65F7174145ED23E0088337413CB8228A65F7174115B8A7F8208337416DE8C689ADF7174115B8A7F8208337416DE8C689ADF71741D1D3BAF56383374114BFD1303AF917418B016D395F8537413C2856DFF7F717413AF95F044C853741A997BC22A3F71741F88E75BD2D85374178C92D9BE6F61741F92A3B192685374165C8D76E31F61741C84AA37B26853741F2674F6A96F5174144F25B9B16853741E849D10C1BF5174105142CD2E384374112E19E8688F31741B72C78F697843741A808260138F31741FF0C0C6A0884374151A8BBFF76F21741832CF2EEF48337418BE15C1290F21741FFFB3AC6A3833741D85A253DF4F2174113E8B8956C83374109067F2139F31741E383648E3383374100C25C64D8F3174179BAEBD7178337412DA0D6482BF41741CF38E4F7038337410AB04BD7E5F41741C936158CE182374145C1EC5D99F5174197832C7ABD823741DA312CBF59F61741"`

而在 4326

`"0103000020E61000000100000018000000AE4F5BA2FC5B4E407E80E7E6F46C4C40F7F1BF79255C4E4019C32D62086D4C40F7F1BF79255C4E4019C32D62086D4C40F7F1BF79255C4E4019C32D62086D4C40A7CE9382325C4E40D8EA369C0D6D4C40A7CE9382325C4E40D8EA369C0D6D4C401BD2B101575C4E4064A420982A6D4C4090DF29FE665D4E4064EE5369116D4C408195B3905C5D4E403664043C0B6D4C4025A00D0E4C5D4E40F7FD7274FD6C4C404201C7B5475D4E409ADF7B26F06C4C403801C7B5475D4E40E43D0EBFE46C4C406EC339053F5D4E404085D2B7DB6C4C40BDFDA836235D4E4001EBC841BE6C4C40685B445FFA5C4E4015C4038EB86C4C40ADB5C108AD5C4E40727935C6AA6C4C408A6B4B9BA25C4E40331ECEACAC6C4C40A7368928775C4E40F7C22E47B46C4C409F640F9D595C4E4077694F81B96C4C40660C21333B5C4E4012EA7C62C56C4C406623646D2C5C4E40CE83E38FCB6C4C4042D9EDFF215C4E40C6A89957D96C4C4095D75EC00F5C4E4013FFA0A5E66C4C40AE4F5BA2FC5B4E407E80E7E6F46C4C40"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:02:01.247

你有相互递归的触发器，你想阻止递归。相反，您希望触发器仅在用户的直接操作时触发，而不是通过触发器的操作。

不幸的是，PostgreSQL 不直接支持你想要的，你需要调整你的设计以避免相互递归。

**更新的问题**：在触发器中，更改的内容`NEW`，例如

```
IF tg_op = 'INSERT' OR tg_op = 'UPDATE' THEN
    NEW.the_geom := ST_TRANSFORM(NEW.the_geom,900913)
END IF; 
```

请参阅[真正相当不错](http://www.postgresql.org/docs/current/static/triggers.html)的触发器手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:53:52.517

```
 -- The scenario is:
        -- for UPDATEs we use an "alternating bit protocol"
        -- (could also be done by bumping and synchronisng a serial number)
        -- For INSERTs: we only test for NOT EXISTS.
        -- DELETEs are not yet implemented.
        -- *******************************************************************
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

        --
        -- Tables for test: we convert int <<-->> text
        --
CREATE TABLE one
        ( id INTEGER NOT NULL PRIMARY KEY
        , flipflag boolean NOT NULL default false
        , ztext varchar
        );
CREATE TABLE two
        ( id INTEGER NOT NULL PRIMARY KEY
        , flipflag boolean NOT NULL default false
        , zval INTEGER
        );
        ------------------------
CREATE function func_one()
RETURNS TRIGGER AS $body$
BEGIN

IF tg_op = 'INSERT' THEN

        INSERT INTO two (id,zval)
        SELECT NEW.id, NEW.ztext::integer
        WHERE NOT EXISTS (
                SELECT * FROM two WHERE two.id = NEW.id)
                ;
ELSIF tg_op = 'UPDATE' THEN

        UPDATE two
        SET zval = NEW.ztext::integer
        , flipflag = NOT flipflag
        WHERE two.id = NEW.id
                ;
END IF;

        RETURN NEW;
END;

$body$
language plpgsql;
CREATE TRIGGER trig_one_i
        AFTER INSERT ON one
        FOR EACH ROW
        EXECUTE PROCEDURE func_one()
        ;

CREATE TRIGGER trig_one_u
        AFTER UPDATE ON one
        FOR EACH ROW
        WHEN (NEW.flipflag = OLD.flipflag)
        EXECUTE PROCEDURE func_one()
        ;

        ------------------------
CREATE function func_two()
RETURNS TRIGGER AS $body$
BEGIN

IF tg_op = 'INSERT' THEN
        INSERT INTO one (id,ztext)
        SELECT NEW.id, NEW.zval::varchar
        WHERE NOT EXISTS (
                SELECT * FROM one WHERE one.id = NEW.id)
                ;
ELSIF tg_op = 'UPDATE' THEN
        UPDATE one
        SET ztext = NEW.zval::varchar
        , flipflag = NOT flipflag
        WHERE one.id = NEW.id
                ;
END IF;

        RETURN NEW;
END;

$body$
language plpgsql;

CREATE TRIGGER trig_two_i
        AFTER INSERT ON two
        FOR EACH ROW
        EXECUTE PROCEDURE func_two()
        ;
CREATE TRIGGER trig_two_u
        AFTER UPDATE ON two
        FOR EACH ROW
        WHEN (NEW.flipflag = OLD.flipflag)
        EXECUTE PROCEDURE func_two()
        ;        --
        -- enter some data
        --
INSERT INTO one (id,ztext)
select gs, gs::text
FROM generate_series(1,10) gs
        ;

        -- Change some data
UPDATE one SET ztext=100 where id = 1;
UPDATE two SET zval=10*zval where id IN (2,4,6,8,10);
INSERT INTO two (id, zval) VALUES(11,14);

SELECT * FROM one ORDER BY id;
SELECT * FROM two ORDER BY id; 
```

结果：

```
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "one_pkey" for table "one"
CREATE TABLE
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "two_pkey" for table "two"
CREATE TABLE
CREATE FUNCTION
CREATE TRIGGER
CREATE TRIGGER
CREATE FUNCTION
CREATE TRIGGER
CREATE TRIGGER
INSERT 0 10
UPDATE 1
UPDATE 5
INSERT 0 1
 id | flipflag | ztext 
----+----------+-------
  1 | f        | 100
  2 | t        | 20
  3 | f        | 3
  4 | t        | 40
  5 | f        | 5
  6 | t        | 60
  7 | f        | 7
  8 | t        | 80
  9 | f        | 9
 10 | t        | 100
 11 | f        | 14
(11 rows)

 id | flipflag | zval 
----+----------+------
  1 | t        |  100
  2 | f        |   20
  3 | f        |    3
  4 | f        |   40
  5 | f        |    5
  6 | f        |   60
  7 | f        |    7
  8 | f        |   80
  9 | f        |    9
 10 | f        |  100
 11 | f        |   14
(11 rows) 
```

# java - 哪个是允许 java cardTerminal 连接到卡的 felica 协议

> ID：11790991
> 
> 赞同：0
> 
> 时间：2012-08-03T07:12:23.160
> 
> 标签：java, nfc, smartcard

我正在使用 ACR Reader 122 处理 Felica Tag。

以下代码可用于连接到所有其他类型的 nfc 标签，但不适用于 Felica 标签

```
Card card = terminal.connect("*"); 
```

我得到以下异常：

> javax.smartcardio.CardException: connect() failed at sun.security.smartcardio.TerminalImpl.connect(TerminalImpl.java:67) 原因：sun.security.smartcardio.PCSCException: SCARD_W_UNPOWERED_CARD at sun.security.smartcardio.PCSC.SCardConnect(本机方法）在 sun.security.smartcardio.CardImpl.(CardImpl.java:65) 在 sun.security.smartcardio.TerminalImpl.connect(TerminalImpl.java:61)

似乎 Felica 标签有自己的协议，但我找不到传输协议名称。

有谁知道如何使用 java 卡库连接到 felica 卡？

（Acr Reader 122 支持这种标签）

****** *** ****编辑***** *******

 **更奇怪的是，如果我做一些非常丑陋的事情，比如从黄玉标签获取“频道”，然后使用这个频道与我的 Felica 标签进行通信，它就可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:44:06.140

该包`javax.smartcardio`实现[JSR 268](http://jcp.org/en/jsr/detail?id=268)。这适用于 ISO 7816-4 卡，与 FeliCa 卡完全不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:25:52.283

答案很简单。

并非所有 ACR 122 都与 Felica Lite 兼容。

ACR122 PCSC 版本。例如 FW20X，FW40X 不是。

使用 felica lite 标签的推荐版本是 ACR122 PCSC 例如 FW10X**