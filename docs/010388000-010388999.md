# StackOverflow 问答 10388000-10388999

# html - 绝对 在 IE7 的错误位置显示下拉菜单

> ID：10388002
> 
> 赞同：0
> 
> 时间：2012-04-30T17:36:28.447
> 
> 标签：html, css, internet-explorer-7, position, css-position

如果您在 FireFox 中尝试：http:
[//jsfiddle.net/rJUKT/2/](http://jsfiddle.net/rJUKT/2/)

它工作正常。下拉菜单显示在其父级的底部，如下所示：
![下拉菜单工作正常](../Images/33de95dc2b0296d3b74ba7e5212caec7.png)

但是如果你用 IE7 试试，下拉菜单会显示在右边，像这样：
![IE7 中的错误](../Images/a147fe9b6b59ad2e2b43e4fdf6a60a72.png)

知道为什么会这样吗？

**HTML**

```
<meta http-equiv="X-UA-Compatible" content="IE=7" />
    <ul id="menu">
    <li>
        <span>Menu 1</span>
        <ul>

            <li><a href="">Link 1.1</a></li>
            <li><a href="">Link 1.2</a></li>
            <li><a href="">Link 1.3</a></li>
            <li><a href="">Link 1.4</a></li>
        </ul>
    </li>

    <li>
        <span>Menu 2</span>
        <ul>
            <li><a href="">Link 2.1</a></li>
            <li><a href="">Link 2.2</a></li>
            <li><a href="">Link 2.3</a></li>
            <li><a href="">Link 2.4</a></li>
        </ul>
    </li>
</ul> 
```

**CSS**

```
#menu { width: 100%; float: right; list-style: none; margin-top: 5px; color: #2A4153; }
#menu li {
    float: left;
    font-size: 17px;
    font-weight: bold;
    background-color: #e1f1ff;
    border:  1px solid #93b5d4;
    margin: 0 1px 0 1px;
    padding: 4px 0 0 0;
    border-bottom: none;
    height: 20px;
}

#menu li a, #menu li span { padding: 4px 7px 2px 7px; cursor: pointer;  }

#menu li ul {
    clear: both;
    position:absolute;
    display:none;
    padding:0;
    list-style:none;
    width: 150px;
    margin: -1px 0 0 -2px;
}

#menu li ul li {
    float: left;
    width: 150px;
    border:  1px solid #93b5d4;
    border-top: none;
    font-size: 15px;
    font-weight: normal;
    background-image: url('16x16/eye.png');
    background-position: 4px 4px;
    background-repeat: no-repeat;
    -moz-border-radius: 0;
}
#menu li ul li a, #menu li ul li span { display:block; padding-left: 25px; }
#menu li ul li:hover { background-color: #e5f6e8; border:  1px solid #93d4a2; border-top: none; }

#menu li:hover { background-color: #e5f6e8; border: 1px solid #93d4a2; border-bottom: none; } 
```

**JS**

```
$(function() {

    $('#menu li').hover(
        function () {
            //show its submenu
            $('ul', this).slideDown(100);

        },
        function () {
            //hide its submenu
            $('ul', this).slideUp(100);        
        }
    );

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:44:54.673

您需要为下拉 UL 设置“top”和“left”属性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:20:11.427

你可以看看这个。在此更新了一些 css 属性

[http://jsfiddle.net/vkVHC/](http://jsfiddle.net/vkVHC/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:25:03.493

如果这是您使用 jQuery 的唯一原因（用于悬停时的下拉效果），您也可以使用 CSS 来代替（从而节省网站加载的许多 kB）。此外，阿列克谢的回答是正确的。

# php - ZipArchive 文件无效

> ID：10388003
> 
> 赞同：4
> 
> 时间：2012-04-30T17:36:29.097
> 
> 标签：php, zip, ziparchive

我需要一个简单的函数，将一组文件写入一个 zip 文件。我从在线教程中找到了一些代码并稍作修改，但我似乎无法让它工作。它会创建 zip 文件，但是当我尝试提取它时，我得到一个错误：

```
Windows cannot complete the extraction.
The Compressed (zipped) Folder '...' is invalid. 
```

这是我正在使用的代码：

```
public function create_zip($files = array(),$destination = '',$overwrite = false) {
      //if the zip file already exists and overwrite is false, return false
      if(file_exists($destination) && !$overwrite) { return 'file exists'; }

      $valid_files = array();
      if(is_array($files)) {
        //cycle through each file
        foreach($files as $file) {
          //make sure the file exists
          if(file_exists($file)) {
            $valid_files[] = $file;
          }
        }
      }
      Zend_Debug::dump($valid_files);

      if(count($valid_files)) {
        //create the archive
        $zip = new ZipArchive();
        if($zip->open($destination, ZIPARCHIVE::CREATE) !== true) {
          return 'could not open zip: '.$destination;
        }
        //add the files
        foreach($valid_files as $file) {
          $zip->addFile($file);
        }
        //debug
        Zend_Debug::dump($zip->numFiles);
        Zend_Debug::dump($zip->status);

        $zip->close();

        //check to make sure the file exists
        return file_exists($destination);
      } else  {
        return 'no valid failes'. count($valid_files);
      }
} 
```

调试语句打印出以下内容：

```
 For $valid_files - array of one file name (full path to file)
 For $zip->numFiles - 1
 For $zip->status - 0
 The function returns true. 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:41:25.683

只需在文件名前添加斜杠即可。

在这里找到答案：[使用 zipArchive addFile() 不会将图像添加到 zip](https://stackoverflow.com/questions/5422983/using-ziparchive-addfile-will-not-add-image-to-zip)

# ruby-on-rails-3 - 有什么类似于锁定的宝石吗？

> ID：10388005
> 
> 赞同：0
> 
> 时间：2012-04-30T17:36:37.070
> 
> 标签：ruby-on-rails-3, lockdown

我最近将我的应用程序从 rails 2.3.8 迁移到 rails 3.0.7，我使用锁定进行访问控制，但 rails 3.x 不支持锁定。是否有任何类似于锁定访问控制的宝石，我尝试了 cancan，但它不像锁定那么有效（我必须写 if 条件，因为链接仍然可见）。

rails 3中是否有提供类似访问控制的gem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:30:17.517

您可以查看诸如用于授权的*cancan和用于身份验证的**OmniAuth*之类的宝石，还可以查看[http://railscasts.com/?tag_id=25](http://railscasts.com/?tag_id=25)和[http://railscasts.com/?tag_id=26](http://railscasts.com/?tag_id=26)了解更多信息。

# arduino - 加速度计倾斜误差校正

> ID：10388006
> 
> 赞同：1
> 
> 时间：2012-04-30T17:36:38.053
> 
> 标签：arduino, accelerometer

我正在使用 arduino 和加速度计 MMA7341 来测量振动金属台 x 方向的加速度。但是加速度计的安装倾斜了一个小角度（比如 Q）。会不会影响加速？如果它影响x方向的加速度，如何在不改变加速度传感器倾斜度的情况下进行校正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T02:25:42.303

从大多数传感器的角度来看，“倾斜”和“加速度”都是相同的，因为它们都测量的是力，而不是实际角度（倾斜）或速度变化（加速度）。

您应该做的是确保安装传感器的对象是“水平的”，尽您所能确定这样的事情，并使用来自模拟读取（）或您的设备提供的任何其他值，作为“ 0”值。

对于 MMA7341，您还需要校准模拟信号，或者使用高精度参考作为 Aref 引脚的输入，假设您是 Arduino 公开该引脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:46:08.057

我认为这取决于您要测量的内容。MMA7341 看起来可以用于加速和倾斜。如果您正在测量加速度，那么安装位置无关紧要，因为加速度是速度的变化，无论方向如何，速度增量​​都是恒定的。

如果您正在测量倾斜，那显然是不同的。您理论上可以测量初始倾斜，然后如果您愿意，可以在您的代码中进行补偿。

# .htaccess - .htaccess 可以配置为在不同页面上保留相同的地址吗？

> ID：10388011
> 
> 赞同：1
> 
> 时间：2012-04-30T17:37:05.920
> 
> 标签：.htaccess, redirect

我正在配置我的网站的桌面和移动版本，并希望使用 js 来测试浏览器尺寸，然后加载相关版本，但问题是如果有人共享来自移动版本的链接并将其发送给桌面用户，那么他们绕过了检查。有没有办法配置.htaccess（或其他方法）让地址栏显示“mysite.com”，即使我要加载“mysite.com/mobile.htm”？我知道我总是可以使用媒体查询，但这会导致加载未使用的资产，所以这种方法会好很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:44:31.850

使用重写而不是重定向。通过重定向，浏览器被指示转到另一个地址。通过 URL 重写，服务器只响应不同 URL 的内容。

仅对于此页面，它会很简单，但可能会很复杂，具体取决于您的站点。

另一种方法是在每个页面中包含一个小 JS，以确保您在设备的正确页面上，如果不是，则重定向到另一个页面。如果有一些模式可以轻松确定相应的页面，这将有所帮助。

# mysql - 是否可以使用 Mysql2 gem 更改所选数据库？

> ID：10388013
> 
> 赞同：4
> 
> 时间：2012-04-30T17:37:18.600
> 
> 标签：mysql, ruby, mysql2

我想更改 Mysql2::Client 正在使用的数据库（例如，与在 mysql 命令行中键入“use X”相同），而无需与数据库服务器建立新连接。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-19T01:45:04.280

利用`select_db`

```
db = Mysql2::Client.new
db.select_db('test') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:13:29.973

可以使用`query`切换数据库的方法：

```
db = Mysql2::Client.new
db.query('use test')
# You're now talking to the test database
db.query('use something_else')
# You're now talking to the something_else database 
```

# java - 在 java、spring 和 maven 中工作的正确方法是什么？

> ID：10388015
> 
> 赞同：0
> 
> 时间：2012-04-30T17:37:21.533
> 
> 标签：java, maven

我是 Java 新手，对我来说很难进入 Java 的概念，我正在使用 Maven，我读过一些书，但有些书给出了结构，而有些书给出了其他结构，所有的问题都是根据我读过的内容（我想使用 Spring），有一个 MVC 结构，我的问题是我不知道每件事必须在哪里.. 在哪里设置我的 getter 和 setter，我的视图在哪里，我的控制器在哪里..以及如何连接它们......我迷路了......你能给我的任何参考或任何线索？我会很高兴。

我现在的结构是

```
src/test/java
src/test/resources
src/main/resources
src/main/resources/META-INF 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:45:37.993

对于您，我强烈推荐 headfirst 的优秀[“Headfirst Design Patterns”](https://rads.stackoverflow.com/amzn/click/com/0596007124)一书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:45:35.903

该`src/test`目录用于单元测试。该`src/main`目录用于您的应用程序代码。`resources`包含必须是 jar 一部分的资源（属性文件、xml 文件等），并且必须可由类加载器（在 的情况下为应用程序类加载器，在 的情况下为`src/main/resources`测试类加载器`src/test/resources`）加载。您的应用程序的 Java 源文件必须位于`src/main/java`.

# jquery - jquery找到没有更多或更少的确切字符串

> ID：10388016
> 
> 赞同：5
> 
> 时间：2012-04-30T17:37:30.173
> 
> 标签：jquery, regex

我有一些来自面包屑的文本，用于打开页面上的菜单项。例如，说`bctext = 'pasta'`.

我想定位“意大利面”这个词，但不说“yadda yadda yadda Pasta”。只有单个单词“pasta”的实例应该匹配，或者如果`bctext`是一个短语，那么它只会找到确切的短语。

这是我到目前为止所拥有的：

```
$('ul#accordion a:contains(' + bctext + ')') 
```

但这当然会找到“yadda yadda Pasta”。

我得到`bctext`以下内容：

```
var bctext = $('#CategoryBreadcrumb ul li:last-child').prev().children().text(); 
```

然后，我使用以下内容编辑菜单：

```
$('ul#accordion a:contains(' + bctext + ')').parent()
                                            .addClass('special')
                                            .children('ul')
                                            .css('display','block'); 
```

我追求的可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T17:40:33.630

```
$('ul#accordion a').filter(function() {
    return $(this).text() == bctext;
}).parent().addClass('special').children('ul').css('display','block'); 
```

`:contains()`无论如何都不是本机选择器，因此`.filter()`与自定义回调一起使用不会有任何性能缺陷。

# c++ - Win 上的 OpenCL 库位置

> ID：10388018
> 
> 赞同：0
> 
> 时间：2012-04-30T17:37:39.230
> 
> 标签：c++, c, opencl

我尝试学习 OpenCL，在我需要包含的标题中，我在哪里可以找到“cl.h”。我在 Win7 上安装了 AMD Kernel Analyzer。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:41:08.163

可能在`include/CL/`，只是搜索`cl.h`

# c#-4.0 - 如何在 INotifyCollectionChanged/ObservableCollection 的代码中触发 CollectionChanged 事件？

> ID：10388022
> 
> 赞同：0
> 
> 时间：2012-04-30T17:37:51.043
> 
> 标签：c#-4.0, silverlight-4.0

我在 ViewModel 中定义了一个 ObservableCollection，例如：

```
//private ObservableCollection<MyObject> _myList;
public ObservableCollection<MyObject> MyList {get;set;} 
```

然后我尝试将其绑定到 ListBox 的 SelectedItems，其行为如下：

```
<i:Interaction.Behaviors>
  <My:ListBoxSelectedItemsBehavior SelectedItems="{Binding MyList, Mode=TwoWay}" />
</i:Interaction.Behaviors> 
```

然后为此列表框启用多项选择。通过用户与鼠标的交互选择多个项目时很好。

问题：最初，数据库中存储了选定的项目数据，当从数据库中检索数据时，我需要触发 CollectionChanged 并让那些 selectedItem 显示为 UI 中的选定项。即使我在加载数据时在 ViewModel 中为 MyList 做了 RaisePropertyChanged，UI 仍然没有将这些项目显示为选中状态。调试应用程序后，我发现即使加载了 MyList，也为 ViewModel 中的 Mylist 触发了 CollectionChanged，但没有为 ListBoxSelectedItemsBehavior 中的绑定项 SelectedItems 触发 CollectionChanged 事件，尽管它已绑定到 MyList。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:40:01.603

尝试使用

```
MyList.CollectionChanged+=new System.Collections.Specialized.NotifyCollectionChangedEventHandler(MyList_CollectionChanged); 
```

从后面的代码希望它可以解决您的问题。

# unix - Cygwin 按日期排序文本

> ID：10388025
> 
> 赞同：1
> 
> 时间：2012-04-30T17:38:01.273
> 
> 标签：unix, sorting, cygwin, timestamp

把这归结为我 25 年前知道的事情，然后忘记了......

我有来自 Windows 事件日志的日志输出，并且无法控制时间戳格式（如果我这样做了，我会选择像 YYYYMMDD HH24MMSS 这样合理的东西，所以当它被视为字符串时很容易排序。
我确信有一个简单的使用 sed 或某种排序参数执行此操作的方法。有人对此有快速解决方案吗？

样本数据：

```
SERVER01,1/1/2013 12:00:01 AM,8,FOO,TOO
SERVER01,4/10/2012 4:43:06 PM,8,FOO,TOO
SERVER01,4/11/2012 4:43:06 PM,8,FOO,TOO
SERVER01,4/9/2012 4:43:06 PM,8,FOO,TOO
SERVER02,12/31/2012 11:59:59 PM,8,FOO,TOO
SERVER02,4/10/2012 4:43:06 PM,8,FOO,TOO
SERVER02,4/9/2012 4:43:06 PM,8,FOO,TOO 
```

所需顺序：

```
SERVER01,4/9/2012 4:43:06 PM,8,FOO,TOO
SERVER02,4/9/2012 4:43:06 PM,8,FOO,TOO
SERVER01,4/10/2012 4:43:06 PM,8,FOO,TOO
SERVER02,4/10/2012 4:43:06 PM,8,FOO,TOO
SERVER01,4/11/2012 4:43:06 PM,8,FOO,TOO
SERVER02,12/31/2012 11:59:59 PM,8,FOO,TOO
SERVER01,1/1/2013 12:00:01 AM,8,FOO,TOO 
```

重新格式化时间戳是可以的，甚至是可取的。我只是不知道怎么做。这需要在 Windows 上运行，并且我有 Cygwin 可用（并且已经在使用它对同一个文件进行一些 grep 过滤）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:36:51.617

这是一个 Perl 脚本，它为每一行添加了一个可排序的时间戳：

```
#!/usr/bin/perl

use strict;
use warnings;

while (<>) {
    my $timestamp = (split /,/)[1];
    my($mon, $mday, $year, $hour, $min, $sec, $ampm) =
        $timestamp =~ m{^(\d+)/(\d+)/(\d+)\s+(\d+):(\d+):(\d+)\s+(AM|PM)};
    die "Can't parse timestamp on line $.\n" if not defined $ampm;
    if ($ampm eq 'AM') {
        $hour = 0 if $hour == 12;
    }
    else {
        $hour += 12 if $hour != 12;
    }

    printf "%04d-%02d-%02d %02d:%02d:%02d,%s",
           $year, $mday, $mon, $hour, $min, $sec, $_;
} 
```

对于您的示例数据，它会产生以下输出：

```
2013-01-01 00:00:01,SERVER01,1/1/2013 12:00:01 AM,8,FOO,TOO
2012-10-04 16:43:06,SERVER01,4/10/2012 4:43:06 PM,8,FOO,TOO
2012-11-04 16:43:06,SERVER01,4/11/2012 4:43:06 PM,8,FOO,TOO
2012-09-04 16:43:06,SERVER01,4/9/2012 4:43:06 PM,8,FOO,TOO
2012-31-12 23:59:59,SERVER02,12/31/2012 11:59:59 PM,8,FOO,TOO
2012-10-04 16:43:06,SERVER02,4/10/2012 4:43:06 PM,8,FOO,TOO
2012-09-04 16:43:06,SERVER02,4/9/2012 4:43:06 PM,8,FOO,TOO 
```

要按日期对样本数据进行排序，假设上面的 Perl 脚本是`foo.pl`：

```
./foo.pl in.txt | sort | sed 's/^[^,]*,//' 
```

这会产生与您问题中指定的输出相同的输出。

如果您愿意，对 Perl 脚本稍作调整可以避免使用`sort`and`sed`命令，但代价是在内存中存储、修改和排序整个文件，这对于非常大的输入可能是个问题：

```
#!/usr/bin/perl

use strict;
use warnings;

my @lines = ();

while (<>) {
    my $timestamp = (split /,/)[1];
    my($mon, $mday, $year, $hour, $min, $sec, $ampm) =
        $timestamp =~ m{^(\d+)/(\d+)/(\d+)\s+(\d+):(\d+):(\d+)\s+(AM|PM)};
    die "Can't parse timestamp on line $.\n" if not defined $ampm;
    if ($ampm eq 'AM') {
        $hour = 0 if $hour == 12;
    }
    else {
        $hour += 12 if $hour != 12;
    }

    push @lines, sprintf "%04d-%02d-%02d %02d:%02d:%02d,%s",
                         $year, $mday, $mon, $hour, $min, $sec, $_;
}

@lines = sort @lines;
foreach (@lines) {
    s/^[^,]*,//;
}
print @lines; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:33:51.037

awk 肯定是 cygwin 附带的，它可以将日期移动到可排序的格式到行的前面（我已经将新手退出到 awk，所以这很丑我敢肯定但它有效），所以你可以将日志记录到此脚本中，然后进行简单排序

```
#! /bin/awk -f
BEGIN {
   FS=",";
}
{
   linedate=$2;
   split(linedate,datetime," ");
   split(datetime[1],datepieces,"/");
   date=sprintf( "%d/%02d/%02d", datepieces[3], datepieces[1], datepieces[2]);
   split(datetime[2],timepieces,":");
   time=sprintf( "%02d:%02d:%02d", timepieces[1], timepieces[2], timepieces[3] );
   print date " " time " " datetime[3] "," $1 "," $3 "," $4 "," $5;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:59:30.650

我必须做这样的事情——我有多个带有 log4j 时间戳的日志文件需要合并。

我确定的解决方案是`gawk`将时间戳转换为从纪元开始的毫秒数，并在所有行前面加上它。之后使用`sort`就很简单了。

我转换为上述格式是因为我还想对 t9imestamp 值进行一些算术运算。您也许可以走捷径并转换为`yymmddXhhmmss`in `sed`。`X`用于和`am/pm`用于_ `0`_ _`am``1``pm`

进一步考虑，您也最好使用`gawk`, not `sed`，以便您可以使用`printf`来获取零填充数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T11:35:14.483

试试这个unix命令。

我只完成了时间戳部分。

**输入**

```
1/1/2013 12:00:01 AM
4/10/2012 4:43:06 PM
4/9/2012 4:43:06 PM
12/31/2012 11:59:59 PM
4/10/2012 4:43:06 PM
4/9/2012 4:43:06 PM 
```

**Unix 命令**

```
$>sort -t "/"  -k 1.8,1.4 Input| sort -t ":" -r -k 1 -k 2.1,2.2 -k 3.1,3.2 | sort -t " " -r -k 3.1 
```

**输出**

```
4/9/2012 4:43:06 PM
4/9/2012 4:43:06 PM
4/10/2012 4:43:06 PM
4/10/2012 4:43:06 PM
12/31/2012 11:59:59 PM
1/1/2013 12:00:01 AM 
```

您可以根据需要修改脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T19:12:42.407

克里斯，

您可能需要使用以下提供的代码，特别是查看 sort 命令。

我编写的 awk 脚本清理了 Windows Server 2003 “时间戳”，以便单个数字预先填充零。更改生成的健全时间戳的格式非常容易。

应该使用默认的 cygwin 安装。

让我知道您的想法，可能需要一些 tweeking，我很乐意根据您的反馈来做。

抢

```
$ gawk -f foo.awk event_log.txt | sort  -n -k2
SERVER01,04/09/2012 04:43:06 PM,8,FOO,TOO
SERVER01,04/10/2012 04:43:06 PM,8,FOO,TOO
SERVER01,04/11/2012 04:43:06 PM,8,FOO,TOO
SERVER02,04/09/2012 04:43:06 PM,8,FOO,TOO
SERVER02,04/10/2012 04:43:06 PM,8,FOO,TOO
SERVER02,12/31/2012 11:59:59 PM,8,FOO,TOO
SERVER01,01/01/2013 12:00:01 AM,8,FOO,TOO 
```

foo.awk 在哪里

```
BEGIN { FS = "," }
{ print $1"," prepadDate($2) "," $3 "," $4 "," $5 }

#
# Returnes a useful timestamp given the timestamp received in event logs on Windows Server 2003
#
function prepadDate(winSrvr2003ts) {

        padded_day = ""
        padded_month = ""
        year = ""

        padded_date = ""
        split(winSrvr2003ts,numbers," ")

        split(numbers[1], date, "/")
        split(numbers[2], time, ":")
        antePostMeridian = numbers[3]

        padded_day = prePadAZero(date[1])
        padded_month = prePadAZero(date[2])
        year = date[3]
        padded_hour = prePadAZero(time[1])
        minute = time[2]
        seconds = time[3]

        #
        # Alter the return statememnt to format the timestamp according to your needs
        # rememebering that string concatenation in gawk is simply a space.
        #
        return padded_day "/" padded_month "/" year " " padded_hour ":" minute ":" seconds " " antePostMeridian
}

#
# Prepend a zero to number if it is a single digit
#
function prePadAZero(number){

        if (length(number) == 1)
                padded = "0" number
        else
                padded = number

        return padded
} 
```

# sql - PL/SQL 基础网站开发

> ID：10388028
> 
> 赞同：0
> 
> 时间：2012-04-30T17:38:16.823
> 
> 标签：sql, plsql, oracle10g

我想为图书馆开发一个网站。该网站必须具有以下功能：

1.  会有一个会员登录系统。
2.  其成员可以出书（一次不超过两本）。
3.  当他们发行一本书时，它对应的按钮会自动变色。
4.  已发行书籍的名称将排队，管理员可以看到它。
5.  当他们归还书籍时，管理员可以设置其可用性。

我希望，你能猜到我需要做什么。这是最少的。会有会员加入的表格，请求新书的角落等等等等。所有这些东西都可以由pl/sql处理吗？

我对php一无所知。我使用过 oracle 10 xe、pl/sql。我可以编辑 html/css 模板。
我们来自志愿图书馆，所以我们没有钱。所有我需要自己做的，即使在学习之后（这是一种美，我以前做过类似的事情）。
您能否建议我如何做到这一点，以便我需要学习的东西相对较少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:00:50.023

如果您已经熟悉 PL/SQL，最简单的选择可能是使用[Oracle Application Express (APEX)](http://www.oracle.com/technetwork/developer-tools/apex/overview/index.html)来构建站点。如果您使用的是 10.2 版本的 Oracle XE 而不是 11.2 版本，您可以阅读[HTML DB 2 Day Developer Guide](http://www.oracle.com/pls/db102/to_toc?pathname=appdev.102/b14377/toc.htm&remark=portal%20%28Application%20development%29)（HTML DB 是成为 APEX 的产品的旧名称）。或者，如果您愿意升级到 11.2 版本的 Oracle XE，请参阅[APEX 2 天开发人员指南](http://docs.oracle.com/cd/E11882_01/appdev.112/e11946/toc.htm)。

# extjs - 在 sencha 2 的 fit 布局容器中使用带有可滚动元素的停靠元素时，为什么我的滚动有时会中断？

> ID：10388030
> 
> 赞同：1
> 
> 时间：2012-04-30T17:38:27.330
> 
> 标签：extjs, sencha-touch, sencha-touch-2

这里奇怪的问题，我没有找到任何在线信息。

当我在 Sencha Touch 2 中创建这样的布局时：

```
Ext.define("MyApp.view.Sample", {
    extend: 'Ext.Container',
    config :
    {
        layout : 'fit',
        scrollable : false,
        items : 
        [
        {
            xtype : 'container',
            docked : 'top',
            html: '<div>Stuff</div>'
        },
        {
            xtype : 'container',
            scrollable : true,
            html: '<div> Bunch of Stuff here that takes a lot of vertical space </div>'

        }
        ]
    },
}); 
```

大多数时候，一切似乎都像我想要的那样工作。第一项中的内容停靠并固定在屏幕顶部，第二项的高大内容是可滚动的。但是在测试中，有时如果我快速上下滚动并单击项目，我可以“打破”滚动，第二个项目似乎忘记了它的顶部在哪里。一直向上滚动时，第二项内容的顶部被截断。有趣的是，似乎在第二个项目的底部添加了一块等于截断高度的空白空间。

我做错了什么会导致这种行为？就像我说的那样，它不会每次都发生，但我通常可以通过 4 或 5 次尝试来重现它。

感谢您的关注！

更新：通过更多的测试，看起来这与重新调整浏览器窗口的大小有关——可能在滚动动画仍在进行的时候。另外，我很确定发生这种情况时，我的 Chrome 控制台日志中会弹出此信息：

```
Uncaught TypeError: Cannot read property 'dom' of null      Abstract.js:85
Ext.define.doSetHidden                                      Abstract.js:85
Ext.define.doSet                                            Evented.js:63
Ext.define.doFire                                           Controller.js:197
Ext.define.fire                                             Controller.js:124
Ext.define.doDispatchEvent                                  Dispatcher.js:341
Ext.define.dispatchEvent                                    Dispatcher.js:322
Ext.define.doFireEvent                                      Observable.js:235
Ext.define.fireAction                                       Observable.js:224
(anonymous function)                                        Evented.js:32
Ext.define.hide                                             Component.js:1682
Ext.define.doHideIndicators                                 View.js:225
method                                                      sencha-touch.js:3127 
```

# c++ - C++ - 字符串流<<“覆盖”

> ID：10388032
> 
> 赞同：4
> 
> 时间：2012-04-30T17:38:45.543
> 
> 标签：c++, std, stringstream

我正在用 C++ 制作一个 OpenGL 游戏。与其他语言相比，我在 C++ 方面相当缺乏经验。无论如何，我为一些图像创建了一个带有“基本”目录的字符串流。然后我将此字符串流作为函数参数传递给构造函数。构造函数附加一个图像文件名，然后尝试加载生成的路径。然而...

```
D:\CodeBlocks Projects\SnakeRoid\bin\Debug\Texts\ <-- before appending the filename
Ship01.tgacks Projects\SnakeRoid\bin\Debug\Texts\ <-- After. 
```

显然不对！结果应该是 D:\CodeBlocks Projects\SnakeRoid\bin\Debug\Texts\Ship01.tga

我的代码的相关部分：

```
std::stringstream concat;
std::string txtFullPath = "Path here";

...

concat.str(""); //Reset value (because it was changed in ...)
concat << texFullPath; //Restore the base path
PS = new PlayerShip(&TexMan, concat); //Call the constructor 
```

构造函数的代码

```
PlayerShip::PlayerShip(TextureManager * TexMan, std::stringstream &path)
{
    texId = 2;
    std::cout << path.str(); //First path above
    path << "Ship01.tga";
    std::cout  << path.str(); //Second - this is the messed up one
    //Do more fun stuff
} 
```

任何人都知道为什么它“覆盖”字符串流中已经存在的内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T17:44:41.593

> 为什么它“覆盖”字符串流中已经存在的内容

因为输出将字符放在输出缓冲区中的“放置指针”位置。新构建的流的 put 指针设置为零（以附加模式打开的文件输出流除外），因此您的输出会覆盖缓冲区中已有的字符。

如果你真的需要以这种方式追加字符串，你需要将 put 指针移动到缓冲区的末尾：

```
std::cout << p.str(); //First path above
std::stringstream path;
path.str(p.str());
path.seekp(0, std::ios_base::end); // <-- add this
path << "Ship01.tga";
std::cout << "Loading player ship from " << path.str(); 
```

编辑：问题已被编辑，编辑后的代码有效，因为它不再用于`path.str(p.str());`在不使用输出操作（并且不推进 put 指针）的情况下创建输出缓冲区：请参阅[ideone](http://ideone.com/E0zf9)了解差异。

在任何情况下，字符串本身都可以连接起来，这将使代码更容易理解：

```
std::string p = path.str() + "Ship01.tga";
std::cout << p; 
```

更不用说处理文件和路径名了，我们有[boost.filesystem](http://www.boost.org/doc/libs/release/libs/filesystem/v3/doc/index.htm)。

# python - CSRF 验证失败。请求中止

> ID：10388033
> 
> 赞同：20
> 
> 时间：2012-04-30T17:38:50.667
> 
> 标签：python, django, csrf, django-csrf, requestcontext

我尝试建立一个非常简单的网站，可以将数据添加到 sqlite3 数据库中。我有一个带有两个文本输入的 POST 表单。

索引.html：

```
{% if top_list %}
    <ul>
    <b><pre>Name    Total steps</pre></b>
    {% for t in top_list %}
        <pre>{{t.name}} {{t.total_steps}}</pre>
    {% endfor %}
    </ul>
    {% else %}
    <p>No data available.</p>
{% endif %}
<br>
<form action="/steps_count/" method="post">
    {% csrf_token %}
    Name: <input type="text" name="Name" /><br />
    Steps: <input type="text" name="Steps" /><br />
   <input type="submit" value="Add" />
 </form> 
```

表格.py：

```
from django import forms
from steps_count.models import Top_List

class Top_List_Form(forms.ModelForm):
    class Meta:
        model=Top_List 
```

视图.py：

```
# Create your views here.
from django.template import Context, loader
from django.http import HttpResponse
from steps_count.models import Top_List
from steps_count.forms import Top_List_Form
from django.template import RequestContext
from django.shortcuts import get_object_or_404, render_to_response

def index(request):

if request.method == 'POST':
    #form = Top_List_Form(request.POST)
    print "Do something"
else:
    top_list = Top_List.objects.all().order_by('total_steps').reverse()
    t = loader.get_template('steps_count/index.html')
    c = Context({'top_list': top_list,})
    #output = ''.join([(t.name+'\t'+str(t.total_steps)+'\n') for t in top_list])
    return HttpResponse(t.render(c)) 
```

但是，当我单击“提交”按钮时，出现 403 错误：

```
CSRF verification failed. Request aborted. 
```

我已包含`{% csrf_token %}`在 index.html 中。但是，如果是 RequestContext 问题，我真的不知道在哪里以及如何使用它。我希望一切都发生在同一页面上（index.html）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-07-06T13:37:26.977

您可能错过了在表单中添加以下内容：

```
{% csrf_token %} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-30T17:44:52.250

使用自动添加的[`render`快捷方式](https://docs.djangoproject.com/en/2.2/topics/http/shortcuts/#render)`RequestContext`。

```
from django.http import HttpResponse
from django.shortcuts import get_object_or_404, render
from steps_count.models import Top_List
from steps_count.forms import Top_List_Form

def index(request):

    if request.method == 'POST':
        #form = Top_List_Form(request.POST)
        return HttpResponse("Do something") # methods must return HttpResponse
    else:
        top_list = Top_List.objects.all().order_by('total_steps').reverse()
        #output = ''.join([(t.name+'\t'+str(t.total_steps)+'\n') for t in top_list])
        return render(request,'steps_count/index.html',{'top_list': top_list}) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-21T04:44:49.577

当您发现这种类型的消息时，这意味着 CSRF 令牌丢失或不正确。所以你有两个选择。

1.  对于 POST 表单，您需要确保：

    *   您的浏览器正在接受 cookie。

    *   在模板中，每个针对内部 URL 的 POST 表单内都有一个 {% csrf_token %} 模板标签。

2.  另一种简单的方法是在设置选项卡的 MIDDLEWARE_CLASSES 中注释一行（**不推荐**）（'django.middleware.csrf.CsrfViewMiddleware'）。

    ```
    MIDDLEWARE_CLASSES = (
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.common.CommonMiddleware',
        # 'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
        'django.middleware.clickjacking.XFrameOptionsMiddleware', 
    ```

    )

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-12T14:48:45.743

解决此问题的另一种最佳替代方法是使用`'@csrf_exempt'`注释。

与`Django 3.1.1`您一起使用`@csrf_exempt`您的方法即可。

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def index(request): 
```

而且你不需要`{% csrf_token %}`在你的 html 中指定。

快乐学习。。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-10T02:54:11.180

这里的一个常见错误是使用 render_to_response（这在较早的教程中通常使用），它不会自动包含 RequestContext。渲染会自动包含它。

在按照教程创建新应用程序时了解到这一点，并且 CSRF 不适用于新应用程序中的页面。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-07-01T00:19:05.933

如果您使用的是 DRF，则需要添加`@api_view(['POST'])`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-06T23:28:22.607

在您的 HTML 标头中，添加

```
<meta name="csrf_token" content="{{ csrf_token }}"> 
```

然后在你的 JS/angular 配置中：

```
app.config(function($httpProvider){
    $httpProvider.defaults.headers.post['X-CSRFToken'] = $('meta[name=csrf_token]').attr('content');
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-23T12:11:42.240

```
function yourFunctionName(data_1,data_2){
        context = {}
        context['id'] = data_1
        context['Valid'] = data_2
        $.ajax({
            beforeSend:function(xhr, settings) {
                    function getCookie(name) {
                            var cookieValue = null;
                            if (document.cookie && document.cookie != '') {
                                var cookies = document.cookie.split(';');
                                for (var i = 0; i < cookies.length; i++) {
                                    var cookie = jQuery.trim(cookies[i]);
                                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                        break;
                                    }
                                }
                            }
                            return cookieValue;
                        }
                        if (settings.url == "your-url")
                            xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                    },

            url: "your-url",
            type: "POST",
            data: JSON.stringify(context),
            dataType: 'json',
            contentType: 'application/json'
        }).done(function( data ) {
    }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-29T14:35:50.163

如果您提出`{%csrf_token%}`并且仍然遇到相同的问题，请尝试更改您的角度版本。这对我有用。最初我在使用 angular 1.4.x 版本时遇到了这个问题。在我将其降级为 angular 1.2.8 后，我的问题得到了解决。不要忘记添加 angular-cookies.js 并将其放在您的 js 文件中。
如果您使用发布请求。

```
app.run(function($http, $cookies) {
    console.log($cookies.csrftoken);
    $http.defaults.headers.post['X-CSRFToken'] = $cookies.csrftoken;
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-10T13:44:24.000

确保您的浏览器接受 cookie。我遇到了同样的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-18T06:05:49.003

使用装饰器：

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def method_name():
    # body 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-20T12:30:52.027

如果您的**django 版本**是**"4.xx"**：

```
python -m django --version

// 4.x.x 
```

如果**您的错误**包含此消息：

> 来源检查失败 - [https://example.com](https://example.com)与任何受信任的来源都不匹配。

将此代码添加到**“settings.py”**：

```
CSRF_TRUSTED_ORIGINS = ['https://example.com'] 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-03-20T10:58:09.710

1) {% csrf_token %} 不在模板中 -- 或 -- 2) {% csrf_token %} 在 html-form 之外

# android - AppWidget 父布局比它需要的大

> ID：10388038
> 
> 赞同：1
> 
> 时间：2012-04-30T17:39:16.013
> 
> 标签：android, android-widget

出于某种原因，我的应用程序小部件的父级比它应该的要大得多。这导致用户无法以他们应该能够的方式将图标向上移动到小部件上。

我希望它是 450x352，但 AppWdigetHostView 是 608x390，而父线性布局是 584x366。

![在此处输入图像描述](../Images/a856c0d5fb89e609826c7540634e16b7.png)

widget_large_info.xml

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
android:minWidth="294dp"
android:minHeight="72dp"
android:updatePeriodMillis="86400000"
android:initialLayout="@layout/widget_layout_large" /> 
```

widget_layout_large.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="0dip"
    android:background="#FF0000" >

<RelativeLayout
    android:layout_width="450dip"
    android:layout_height="352dip" >

    <!-- sub widgets and views -->

</RelativeLayout>
</LinearLayout> 
```

有没有人见过这样的事情？无论我对宽度和高度做什么，它都不想正确调整自己的大小。

# sql - 如何关闭与数据库的现有连接

> ID：10388041
> 
> 赞同：51
> 
> 时间：2012-04-30T17:39:35.670
> 
> 标签：sql, sql-server

我想关闭与 MS SQL Server 的现有连接，以便我可以通过编程方式对该数据库进行恢复。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-30T17:47:23.420

这应该断开其他所有人的连接，并让您成为唯一的用户：

```
alter database YourDb set single_user with rollback immediate 
```

注意：不要忘记

```
alter database YourDb set MULTI_USER 
```

完成后！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-28T08:45:42.600

在**还原向导**中单击“关闭与目标数据库的现有连接”

在**分离数据库向导**中单击“删除连接”项。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-30T17:42:34.887

在这里找到它：http: [//awesomesql.wordpress.com/2010/02/08/script-to-drop-all-connections-to-a-database/](http://awesomesql.wordpress.com/2010/02/08/script-to-drop-all-connections-to-a-database/)

```
DECLARE @dbname NVARCHAR(128)
SET @dbname = 'DB name here'
 -- db to drop connections 
DECLARE @processid INT 
SELECT  @processid = MIN(spid)
FROM    master.dbo.sysprocesses
WHERE   dbid = DB_ID(@dbname) 
WHILE @processid IS NOT NULL 
    BEGIN 
        EXEC ('KILL ' + @processid) 
        SELECT  @processid = MIN(spid)
        FROM    master.dbo.sysprocesses
        WHERE   dbid = DB_ID(@dbname) 
    END 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-07T13:28:06.027

您可以像这样使用光标：

```
USE master
GO

DECLARE @SQL AS VARCHAR(255)
DECLARE @SPID AS SMALLINT
DECLARE @Database AS VARCHAR(500)
SET @Database = 'AdventureWorks2016CTP3'

DECLARE Murderer CURSOR FOR
SELECT spid FROM sys.sysprocesses WHERE DB_NAME(dbid) = @Database

OPEN Murderer

FETCH NEXT FROM Murderer INTO @SPID
WHILE @@FETCH_STATUS = 0

    BEGIN
    SET @SQL = 'Kill ' + CAST(@SPID AS VARCHAR(10)) + ';'
    EXEC (@SQL)
    PRINT  ' Process ' + CAST(@SPID AS VARCHAR(10)) +' has been killed'
    FETCH NEXT FROM Murderer INTO @SPID
    END 

CLOSE Murderer
DEALLOCATE Murderer 
```

我在我的博客中写到：http: [//www.pigeonsql.com/single-post/2016/12/13/Kill-all-connections-on-DB-by-Cursor](http://www.pigeonsql.com/single-post/2016/12/13/Kill-all-connections-on-DB-by-Cursor)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-01T06:05:50.807

## 简短的回答：

您只能在“**数据库上下文**>>**还原向导”中获得“***关闭与目标数据库的现有连接*”选项，而**不是在任何特定数据库的上下文中**。

 ******## 长答案：

`Right Click`在您的服务器名称下的**数据库**上，如下所示：

并从中选择选项：“**还原数据库...** ”。

![D b](../Images/76840305fb4b0115391237275c7ed67c.png)

在“还原数据库”向导中，

1.  选择要恢复的数据库之一
2.  在左侧垂直菜单中，单击“**选项**”

![db1](../Images/b69bb2c0541e1782769f0500c9ab7d47.png)

*在这里您可以找到“关闭与目标数据库的现有连接*”的复选框

![数据库3](../Images/51910f089b2b085adfee074e34b77ecc.png)

只需检查它，您就可以继续进行还原操作。

> 完成还原后，它将自动恢复所有连接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T18:05:12.820

Stev.org 提供的完美解决方案：http: [//www.stev.org/post/2011/03/01/MS-SQL-Kill-connections-by-host.aspx](http://www.stev.org/post/2011/03/01/MS-SQL-Kill-connections-by-host.aspx)

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[KillConnectionsHost]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[KillConnectionsHost]
GO

/****** Object:  StoredProcedure [dbo].[KillConnectionsHost]    Script Date: 10/26/2012 13:59:39 ******/

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[KillConnectionsHost] @hostname varchar(MAX)
AS
    DECLARE @spid int
    DECLARE @sql varchar(MAX)

    DECLARE cur CURSOR FOR
        SELECT spid FROM sys.sysprocesses P
            JOIN sys.sysdatabases D ON (D.dbid = P.dbid)
            JOIN sys.sysusers U ON (P.uid = U.uid)
            WHERE hostname = @hostname AND hostname != ''
            AND P.spid != @@SPID

    OPEN cur

    FETCH NEXT FROM cur
        INTO @spid

    WHILE @@FETCH_STATUS = 0
    BEGIN
        PRINT CONVERT(varchar, @spid)

        SET @sql = 'KILL ' + RTRIM(@spid)
        PRINT @sql
        EXEC(@sql)

        FETCH NEXT FROM cur
            INTO @spid
    END

    CLOSE cur
    DEALLOCATE cur
GO 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-16T09:18:19.200

在最新版本的 SQL Server Management Studio 中，您现在可以右键单击数据库并“使数据库脱机”。这使您可以选择删除与数据库的所有活动连接。******

# java - 如何在 Java 中解析 SAX Parser 中的嵌套元素？

> ID：10388047
> 
> 赞同：1
> 
> 时间：2012-04-30T17:39:53.517
> 
> 标签：java, android, saxparser

我想用这种格式在java中使用SAX解析器解析一个XML文件：

```
<Deals>
  <Deal>
   <id> 10</id>
   <title> title </title>
   <city>
     <id> 1 </id>
     ...
   </city>
  </Deal>
  ...
</Deals> 
```

我在区分 Deal Node 的 id 元素和 city 节点的 id 元素时遇到了问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:46:04.047

您可以做的一件事（我已经看到并使用了它——我不确定它是最有效或最有效的方法，但它有效）是在解析器中维护一些状态，无论是定义的一组状态或一些布尔标志，用于描述您在文档中的位置。例如，您可能有：

```
boolean inDeals = false;
boolean inDeal = false;
boolean inCity = false; 
```

然后，在您的 startElement 回调中，如果开始标记为`Deals`，则设置`inDeals`为 true。同样对于`Deal`和`city`。在 endElement 回调中，执行相反的操作（例如结束标记 == `Deals`，设置`inDeals`回 false）。在您的字符方法中，或者您正在处理标签，只需根据当时解析器的状态进行处理。例如：

```
if(inDeal) {
    if(inCity) {
        cityId = /*the characters*/;
    } else dealId = /*the characters*/;
} 
```

# mysql - 将多个字段的数据合并到一个字段

> ID：10388049
> 
> 赞同：0
> 
> 时间：2012-04-30T17:40:01.847
> 
> 标签：mysql, database

> **可能重复：**
> [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

我有 2 个表，它们之间存在一对多的关系。我需要合并第二个表中 1 列中包含的数据，并将其添加到第一个表中相应的单个条目中。我怎么能在 MySQL 中做到这一点？

*   ID 是主键示例：

表 2**计算**

```
ID  Forms  Calc

1    A      20

1    B      30

1    C      10 
```

目标表：

表 1**客户端**

```
ID    Name     Forms

1     XYZ      A,B,C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:00:39.980

```
INSERT INTO Client (ID, Forms)
SELECT ID , GROUP_CONCAT(Forms)
FROM Calculation
GROUP BY ID 
```

# git - heroku 致命错误

> ID：10388051
> 
> 赞同：1
> 
> 时间：2012-04-30T17:40:15.863
> 
> 标签：git, heroku, cloud, push

我按照这个教程在 heroku 云上创建了一个 facebook 应用程序：[https](https://devcenter.heroku.com/articles/facebook) ://devcenter.heroku.com/articles/facebook但是当我输入 $ git push heroku （最后一步）时，我得到了：`fatal: 'heroku' does not appear to be a git repositoy`

？？？为什么我得到这个......关于教程我必须得到：

```
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done,  etc. 
```

当我必须得到时，也在前一步：

```
$ git commit -am "changed greeting"
[master 0ff313a] changed greeting
 1 files changed, 1 insertions(+), 1 deletions(- on screen . I got this: 
```

库/公共/图标。etc 创建模式 100644 .etc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:09:28.880

听起来您没有与本地存储库关联的远程 git 存储库。试试命令：

```
git remote -v show 
```

如果您没有类似的条目

```
heroku git@heroku.com:name-of-your-app.git (push) 
```

其中 name-of-your-app 是您的 Heroku 托管应用程序的名称，那么您需要添加一个远程 git 存储库

```
git remote add heroku git@heroku.com:name-of-your-app.git 
```

再次使用 name-of-your-app 作为 Heroku 应用程序的名称。

# grand-central-dispatch - libdispatch 的内存问题

> ID：10388057
> 
> 赞同：1
> 
> 时间：2012-04-30T17:40:41.943
> 
> 标签：grand-central-dispatch

我一直在测试来自 wiki 的示例代码，发现 libdispatch 在 OS X（Lion 10.7.3、Xcode 4.3.2）和 Linux（手动编译和安装）中分配了大量内存而没有释放它。

该代码创建了一个 SIGHUP 信号源，其中包含一个调用 100_000 次写入日志文件的处理程序。对日志的写入在串行队列中排队。

第一次运行显示正常的内存使用情况（Linux 和 OS X 均为 8-9 MiB）。发送“kill -1”后，每次发送 SIGHUP 信号时，内存使用量都会增加 1-20MiB。

我试过用 -fobj-arc 编译，没有它，但结果是一样的。我删除了 br_log 函数中的 NSString 用法，但不存在泄漏：它在 libdispatch 内部的某个地方。

我尝试了 valgrind 和 Xcode Instruments，但没有发现任何泄漏。提前致谢，

```
//
//  main.m
//  test02
//
//  Created by Aldrin Martoq on 4/29/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#include <unistd.h>
#import <Foundation/Foundation.h>
#import <dispatch/dispatch.h>

static FILE *log_file = NULL;
static NSString *log_filename = @"/tmp/br.log";
static dispatch_queue_t log_queue;

void br_log(NSString *format, ...) {
    @autoreleasepool {
        va_list ap;
        va_start(ap, format);
        NSString *s = [[NSString alloc] initWithFormat:format arguments:ap];
        va_end(ap);

        if (log_file == NULL) {
            log_queue = dispatch_queue_create("cl.martoq.log_queue", NULL);

            log_file = fopen([log_filename cStringUsingEncoding:NSUTF8StringEncoding], "a");
            NSLog(@"Log file created: %@", log_filename);
        }

        dispatch_async(log_queue, ^{
            @autoreleasepool {
                const char *c = [s cStringUsingEncoding:NSUTF8StringEncoding];
                fputs(c, log_file);
                fputs("\n", log_file);
                fflush(log_file);
                [s release];
            }
        });
    }
}

void br_setup() {
    signal(SIGHUP, SIG_IGN);
    dispatch_source_t sig_src = dispatch_source_create(DISPATCH_SOURCE_TYPE_SIGNAL, SIGHUP, 0, dispatch_get_main_queue());
    dispatch_source_set_event_handler(sig_src, ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            printf("Caught SIGHUP\n");
            for (int i = 0; i < 100000; i++) {
                br_log(@"prueba: %d", i);
            }
        });
    });
    dispatch_resume(sig_src);
}

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        // insert code here...
        NSLog(@"Hello, World!");
        br_setup();
        dispatch_main();
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:12:14.513

您如何衡量这种内存使用增长？我无法使用“堆”工具在 Mac OS X 上重现它。

您可能会看到 libdispatch 延续缓存的临时效果，这些是为每个 dispatch_async() 分配的小缓冲区，并以每个线程为基础进行缓存以提高速度。一旦临时调度工作线程退出（在您的示例中，至少在 Mac OS X 上是在 SIGHUP 后几秒钟），该缓存就会被释放。

另请注意，无需从源事件处理程序中 dispatch_async()，因为此时您已经在主队列中（源的目标队列）

顺便说一句，你已经在[libdispatch-dev@lists.macosforge.org](http://lists.macosforge.org/mailman/listinfo.cgi/libdispatch-dev/)上问过这个问题，我已经在那里回复了，请不要同时在多个论坛上问同样的问题。

# python - 用 Python 解决难题

> ID：10388060
> 
> 赞同：19
> 
> 时间：2012-04-30T17:40:51.087
> 
> 标签：python, permutation, combinations, puzzle, itertools

我有一个难题，我想用 Python 解决它。

> 谜：
> 
> 一位商人有一个 40 公斤的重量，他在他的商店中使用。有一次，它从他手中掉了下来，碎成了四块。但令人惊讶的是，现在他可以通过这 4 件的组合来称重 1 公斤到 40 公斤之间的任何重量。
> 
> 所以问题是，这 4 件的重量是多少？

现在我想用 Python 解决这个问题。

我从这个谜题中得到的唯一限制是 4 块的总和是 40。这样我就可以过滤总和为 40 的所有 4 个值的集合。

```
import itertools as it

weight = 40
full = range(1,41)
comb = [x for x in it.combinations(full,4) if sum(x)==40] 
```

`length of comb = 297`

现在我需要检查每组值`comb`并尝试所有操作组合。

例如，如果`(a,b,c,d)`是 中的第一组值`comb`，我需要检查`a,b,c,d,a+b,a-b, .................a+b+c-d,a-b+c+d........`等等。

我尝试了很多，但我被困在这个阶段，即如何检查所有这些计算组合到每组 4 个值。

**问题 ：**

1）我认为我需要列出所有可能的组合`[a,b,c,d] and [+,-]`。

2）有没有人有更好的主意并告诉我如何从这里继续前进？

另外，我想在没有任何外部库的帮助下完全做到这一点，只需要使用 python 的标准库。

**编辑**：对不起，迟到的信息。它的答案是 (1,3,9,27)，这是我几年前发现的。我已经检查并验证了答案。

编辑：目前，`fraxel`的答案与`time = 0.16 ms`. 更好更快的方法总是受欢迎的。

问候

方舟

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-30T19:08:24.673

**较早的演练答案：**

我们知道0 到 40 之间`a*A + b*B + c*C + d*D = x`的所有人，并且仅限于. 显然。下一种情况是，所以显然最小的移动是删除一个元素（这是唯一可能导致成功平衡 39 的移动）：`x``a, b, c, d``-1, 0, 1``A + B + C + D = 40``x = 39`

`A + B + C = 39`，所以`D = 1`，根据需要。

下一个：

`A + B + C - D = 38`

下一个：

`A + B + D = 37`， 所以`C = 3`

然后：

`A + B = 36`

然后：

`A + B - D = 35`

`A + B - C + D = 34`

`A + B - C = 33`

`A + B - C - D = 32`

`A + C + D = 31`， 所以`A = 9`

所以`B = 27`

所以权重是`1, 3, 9, 27`

实际上，这可以从它们都必须是 3 的倍数这一事实中立即推断出来。

**有趣的更新：**

因此，这里有一些 python 代码，可以为任何跨越空间的下降权重找到最小权重集：

```
def find_weights(W):
    weights = []
    i = 0
    while sum(weights) < W:
        weights.append(3 ** i)
        i += 1
    weights.pop()
    weights.append(W - sum(weights))
    return weights

print find_weights(40)
#output:
[1, 3, 9, 27] 
```

为了进一步说明这一解释，可以将问题视为跨越数字空间的最小权重数`[0, 40]`。很明显，每个重量可以做的事情是三元/三元（增加重量，去除重量，把重量放在另一边）。因此，如果我们`(A, B, C, D)`按降序编写（未知）权重，我们的动作可以总结为：

```
 ABCD:   Ternary:
40: ++++     0000
39: +++0     0001
38: +++-     0002
37: ++0+     0010
36: ++00     0011
35: ++0-     0012
34: ++-+     0020
33: ++-0     0021
32: ++--     0022
31: +0++     0100
etc. 
```

我把从 0 到 9 的三进制数放在旁边，以说明我们实际上是在一个三进制数系统中（以 3 为底）。我们的解决方案总是可以写成：

```
3**0 + 3**1 +3**2 +...+ 3**N >= Weight 
```

对于这成立的最小 N。最小解决方案将始终采用这种形式。

此外，我们可以轻松解决大权重问题并找到跨越空间的最小块数：

**一个人掉下一个已知重量 W，它会碎成碎片。他的新砝码允许他称重最大为 W 的任何重量。有多少个砝码，它们是什么？**

```
#what if the dropped weight was a million Kg:
print find_weights(1000000)
#output:
[1, 3, 9, 27, 81, 243, 729, 2187, 6561, 19683, 59049, 177147, 531441, 202839] 
```

尝试对大重量和未知数量的件使用排列！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T19:06:06.907

这是一个蛮力的 itertools 解决方案：

```
import itertools as it

def merchant_puzzle(weight, pieces):
    full = range(1, weight+1)
    all_nums = set(full)
    comb = [x for x in it.combinations(full, pieces) if sum(x)==weight]
    funcs = (lambda x: 0, lambda x: x, lambda x: -x)
    for c in comb:
        sums = set()
        for fmap in it.product(funcs, repeat=pieces):
            s = sum(f(x) for x, f in zip(c, fmap))
            if s > 0:
                sums.add(s)
                if sums == all_nums:
                    return c

>>> merchant_puzzle(40, 4)
(1, 3, 9, 27) 
```

有关其工作原理的解释，请查看[Avaris 给出的答案](https://stackoverflow.com/a/10389138/505154)，这是相同算法的实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T19:06:17.263

你很接近，非常接近:)。

由于这是您要解决的难题，因此我将提供指点。对于这部分：

> 例如，如果 (a,b,c,d) 是 comb 中的第一组值，我需要检查 a,b,c,d,a+b,ab,...... .....a+b+cd,a-b+c+d........等等。

考虑一下这一点：每个重量都可以放在一个秤上，另一个或两者都没有。所以对于 的情况`a`，这可以表示为`[a, -a, 0]`。其他三个也一样。现在您需要所有可能的配对以及每种重量的这 3 种可能性（提示：）`itertools.product`。然后，对配对的可能测量（比如说：`(a, -b, c, 0)`）仅仅是这些（`a-b+c+0`）的总和。

剩下的就是检查您是否可以“测量”所有需要的重量。`set`在这里可能会派上用场。

PS：正如评论中所述，对于一般情况，这些划分的权重可能没有必要区分（对于这个问题）。你可能会重新考虑`itertools.combinations`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T19:07:01.820

我蛮力逼出第二部分的地狱。

如果您不想看到答案，请不要单击此按钮。显然，如果我在排列方面做得更好，这将需要更少的剪切/粘贴搜索/替换：

[http://pastebin.com/4y2bHCVr](http://pastebin.com/4y2bHCVr)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T21:28:45.477

我不知道 Python 语法，但也许你可以解码这个 Scala 代码；从第二个 for 循环开始：

```
def setTo40 (a: Int, b: Int, c: Int, d: Int) = {

val vec = for (
  fa <- List (0, 1, -1);
  fb <- List (0, 1, -1);
  fc <- List (0, 1, -1);
  fd <- List (0, 1, -1);
  prod = fa * a + fb * b + fc * c + fd * d;
  if (prod > 0)
  ) yield (prod)

  vec.toSet
}

for (a <- (1 to 9);
  b <- (a to 14);
  c <- (b to 20);
  d = 40-(a+b+c)
  if (d > 0)) { 
    if (setTo40 (a, b, c, d).size > 39)
      println (a + " " + b + " " + c + " " + d)
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T11:33:19.700

使用砝码 [2, 5, 15, 18]，您还可以测量 1 到 40 公斤之间的所有物体，尽管其中一些需要间接测量。例如，要测量一个重 39 公斤的物体，您首先将其与 40 公斤进行比较，然后天平将悬垂到 40 公斤的一侧（因为 39 < 40），但是如果您移除 2 公斤的重量，它会悬垂到另一侧（因为39 > 38），因此您可以得出物体重量为 39 公斤的结论。

更有趣的是，使用权重 [2, 5, 15, 45]，您可以测量所有重量不超过 67 公斤的物体。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-13T18:23:37.167

如果有人不想导入库来导入组合/烫发，这将生成所有可能的 4 步策略......

```
# generates permutations of repeated values
def permutationsWithRepeats(n, v):
    perms = []
    value = [0] * n
    N = n - 1
    i = n - 1

    while i > -1:
        perms.append(list(value))

        if value[N] < v:
            value[N] += 1
        else:
            while (i > -1) and (value[i] == v):
                value[i] = 0
                i -= 1

            if i > -1:
                value[i] += 1
                i = N

    return perms

# generates the all possible permutations of 4 ternary moves
def strategy():
    move = ['-', '0', '+']
    perms = permutationsWithRepeats(4, 2)

    for i in range(len(perms)):
        s = ''

        for j in range(4):
            s += move[perms[i][j]]

        print s

# execute
strategy() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-24T17:58:17.817

我的解决方案如下：

```
 #!/usr/bin/env python3

weight = 40
parts = 4
part=[0] * parts

def test_solution(p, weight,show_result=False):
    cv=[0,0,0,0]
    for check_weight in range(1,weight+1):
        sum_ok = False
        for parts_used in range(2 ** parts):
            for options in range(2 ** parts):
                for pos in range(parts):
                    pos_neg = int('{0:0{1}b}'.format(options,parts)[pos]) * 2 - 1
                    use = int('{0:0{1}b}'.format(parts_used,parts)[pos])
                    cv[pos] = p[pos] * pos_neg * use
                if sum(cv) == check_weight:
                    if show_result:
                        print("{} = sum of:{}".format(check_weight, cv))
                    sum_ok = True
                    break
        if sum_ok:
            continue
        else:
            return False
    return True

for part[0] in range(1,weight-parts):
    for part[1] in range(part[0]+1, weight - part[0]):
        for part[2] in range( part[1] + 1 , weight - sum(part[0:2])):
            part[3] = weight - sum(part[0:3])
            if test_solution(part,weight):
                print(part)
                test_solution(part,weight,True)
                exit() 
```

它为您提供给定权重的所有解决方案

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-24T23:23:37.907

比我之前的答案更有活力，因此它也适用于其他数字。但是分成 5 个和平需要一些时间：

```
#!/usr/bin/env python3

weight = 121
nr_of_parts = 5

# weight = 40
# nr_of_parts = 4

weight = 13
nr_of_parts = 3

part=[0] * nr_of_parts

def test_solution(p, weight,show_result=False):
    cv=[0] * nr_of_parts
    for check_weight in range(1,weight+1):
        sum_ok = False
        for nr_of_parts_used in range(2 ** nr_of_parts):
            for options in range(2 ** nr_of_parts):
                for pos in range(nr_of_parts):
                    pos_neg = int('{0:0{1}b}'.format(options,nr_of_parts)[pos]) * 2 - 1
                    use = int('{0:0{1}b}'.format(nr_of_parts_used,nr_of_parts)[pos])
                    cv[pos] = p[pos] * pos_neg * use
                if sum(cv) == check_weight:
                    if show_result:
                        print("{} = sum of:{}".format(check_weight, cv))
                    sum_ok = True
                    break
        if sum_ok:
            continue
        else:
            return False
    return True

def set_parts(part,position, nr_of_parts, weight):
    if position == 0:
        part[position] = 1
        part, valid = set_parts(part,position+1,nr_of_parts,weight)
        return part, valid
    if position == nr_of_parts - 1:
        part[position] = weight - sum(part)
        if part[position -1] >= part[position]:
            return part, False
        return part, True
    part[position]=max(part[position-1]+1,part[position])
    part, valid = set_parts(part, position + 1, nr_of_parts, weight)
    if not valid:
        part[position]=max(part[position-1]+1,part[position]+1)
        part=part[0:position+1] + [0] * (nr_of_parts - position - 1)
        part, valid = set_parts(part, position + 1, nr_of_parts, weight)
    return part, valid

while True:
    part, valid = set_parts(part, 0, nr_of_parts, weight)
    if not valid:
        print(part)
        print ('No solution posible')
        exit()
    if test_solution(part,weight):
        print(part,'    ')
        test_solution(part,weight,True)
        exit()
    else:
        print(part,'   ', end='\r') 
```

# c++ - 将无符号字符数组转换为整数

> ID：10388072
> 
> 赞同：1
> 
> 时间：2012-04-30T17:41:22.350
> 
> 标签：c++, c, arrays, char, int

据我所知，在 C 编程语言中，数组是逐个元素存储在内存中的。（即元素 0、元素 1、元素 2、...、元素 n）。我正在尝试使用以下代码查看：

```
unsigned char a[] = { '\1' , '\2', '\3' ,'\4' };  
printf("%d\n", (int*) a); 
```

由于 unsigned char 是 1 个字节，而整数是 4 个字节；我认为它必须打印值：

> 00000001 00000010 00000011 00000100 = 2^2 + 2^8 + 2^9 + 2^17 + 2^24 = 16909060

但是，当我运行这个程序时，它会为每次试验产生不同的结果。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:42:27.817

您可能想使用`*(int *)a`，否则您只是在打印地址。

但是，这将调用实现定义的行为：

*   [根据平台的字节序](http://en.wikipedia.org/wiki/Endianness)，您将获得不同的结果。
*   根据平台的不同，`char`数组可能无法正确对齐以读取为`int`.
*   `char`编译器可能会基于您永远不会通过 an 读取数组的假设执行时髦的优化`int *`- 您正在打破所谓的*严格别名*规则。

# java - N位集之间的异或

> ID：10388074
> 
> 赞同：5
> 
> 时间：2012-04-30T17:41:38.520
> 
> 标签：java, string, bit-manipulation, bitset

我正在使用 BitSets 在 Java 中实现一个程序，但我陷入了以下操作：

给定 N 个 BitSet，如果所有 BitSet 中有超过 1 个，则返回 0，否则返回 1

例如，假设我们有这 3 个集合：

*   10010
*   01011
*   00111

*   11100 预期结果

对于以下套装：

*   10010
*   01011
*   00111
*   10100
*   00101

*   01000 预期结果

我正在尝试通过按位操作来进行排他，并且我已经意识到我需要的实际上是所有集合之间的排他或，但不是以迭代的方式，所以我很困惑该怎么做。这甚至可能吗？

我想避免昂贵的解决方案，即必须检查每组中的每一位，并为每个位置保留一个计数器......

谢谢你的帮助

编辑：正如一些人所问的，这是我正在从事的项目的一部分。我正在构建一个时间表生成器，基本上其中一个软约束是没有学生应该在 1 天内只有 1 节课，所以这些集合代表每小时参加的学生，我想过滤那些只有 1 节课的学生.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:42:30.427

你可以用两个值做你想做的事。一个位至少设置一次，第二个位设置不止一次。该组合可用于确定那些设置一次且不再重复。

```
int[] ints = {0b10010, 0b01011, 0b00111, 0b10100, 0b00101};
int setOnce = 0, setMore = 0;
for (int i : ints) {
    setMore |= setOnce & i;
    setOnce |= i;
}
int result = setOnce & ~setMore;
System.out.println(String.format("%5s", Integer.toBinaryString(result)).replace(' ', '0')); 
```

印刷

```
01000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:05:32.010

首先，如果不检查每组中的每一位，您就无法做到这一点。如果您可以在不检查任意位的情况下解决这个问题，那么这意味着存在两种解决方案（即，该位可以是两个值中的每一个都有两个不同的解决方案）。

如果您想要一种更有效的方式来计算多个位集的 XOR，我会考虑将您的集合表示为整数而不是单个位的集合。然后只需将整数异或在一起即可得出您的答案。否则，在我看来，您将不得不遍历每一位，检查其值并自行计算解决方案（如您在问题中所述）。

# html - 使用 iOS 在 html 文件中添加图像

> ID：10388075
> 
> 赞同：2
> 
> 时间：2012-04-30T17:41:41.237
> 
> 标签：html, ios

在我的应用中，我正在展示应用数据的报告。该报告是呈现在 UIWebView 上的“自行生成”的 html 文件。

我需要在报告中（在 html 文件中）包含存储在设备中的图像。此刻我能够得到图像的路径。类似于“/var/mobile/Applications/A10781A1-DE2B-4651-ADFB-7A6AD9B3645A/Documents/EE20AF92-215E-4DF5-8E33-0713557A34C9”

如何将图像包含在 html 文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T17:54:32.773

您可以使用以下方法包含图像：

```
<img src="img.png"> 
```

和

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[webView loadHTMLString:htmlString baseURL:baseURL]; 
```

例如，您可以将图像复制`img.png`到文档目录并将 baseURL 设置为文档目录。

更新：

我找到了一段时间后发现如何做到这一点的来源。也许你可以从那里挖掘一些更有用的信息：http: [//iphoneincubator.com/blog/windows-views/uiwebview-revisited](http://iphoneincubator.com/blog/windows-views/uiwebview-revisited)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:55:52.710

目前尚不清楚您是否从您的问题中即时构建 html。但是你可以做这样的事情。

```
NSMutableString *htmlPage = [[[NSMutableString alloc] initWithCapacity:1000] autorelease];
... // Build the page string

[htmlPage appendStringWithFormat:@"<img src=\"%@\" alt=\"image\" height=\"100\" width=\"100\"/>",[[NSBundle mainBundle] pathForResource:@"myImage" ofType:@"png"]; 
```

或者这个的一些变种。

# javascript - 如果 JavaScript 弹出窗口打开，如何编写 Watir 条件循环以单击“确定”按钮？

> ID：10388080
> 
> 赞同：0
> 
> 时间：2012-04-30T17:42:11.737
> 
> 标签：javascript, ruby, watir

所以在某些测试用例中，我的应用程序会抛出一个 JavaScript 弹出窗口，指示该月不能再写字母，这会中断我的 Watir 自动化。

有没有办法使用 Watir 捕捉 javascript 弹出窗口，然后单击“确定”按钮并继续？

这是我到目前为止所拥有的：

```
# Send New Letter
browser.link(:class,'new-message-button').click
browser.frame(:id,'letterText_ifr').click

javascript_dialog.button('OK').click # <= I need help here with conditional

browser.send_keys 'This is a test'
browser.button(:id,'send-button').click
browser.link(:id,'sign_out').click 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:02:00.747

如果您尝试了类似期望 JS 对话框出现在此处，并使用发送信件的代码来拯救它（如果失败）的方法，该怎么办？

```
browser.frame(:id,'letterText_ifr').click_no_wait
begin
  javascript_dialog.button('OK').click # <= I need help here with conditional
rescue
  browser.send_keys 'This is a test'
  browser.button(:id,'send-button').click
end
browser.link(:id,'sign_out').click 
```

它不是很优雅，但它可能会满足您的需求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T01:53:53.870

也许我误解了，但显而易见的答案似乎是：

```
javascript_dialog.button('OK').click if javascript_dialog.button('OK').exists? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:39:23.033

如果对话框出现的时间不是随机的，而是众所周知/定义的，您可以使用其中的一些：

```
until javascript_dialog.button('OK').exists? do 
    sleep 1 
end 
javascript_dialog.button('OK').click 
```

或者

```
sleep 1 until javascript_dialog.button('OK').exists?
javascript_dialog.button('OK').click 
```

或者

```
javascript_dialog.button('OK').when_present.click 
```

或者

```
javascript_dialog.button('OK').wait_until_present
javascript_dialog.button('OK').click 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:41:10.420

一旦我尝试单击 JavaScript 弹出窗口中的按钮，Ruby 就会失去浏览器的焦点并崩溃。

我最终只是忽略了错误并退出以对可能尚未发送信函的另一个人重新运行测试。（4 月 30 日在本周内，因此会导致显示警报）请参阅下面的新代码：

```
if browser.text.include?('30-Apr')
  browser.link(:id,'sign_out').click
else
  browser.send_keys 'This is a test'
  browser.button(:id,'send-button').click
end 
```

# java - 图片库教程已弃用

> ID：10388083
> 
> 赞同：1
> 
> 时间：2012-04-30T17:42:22.083
> 
> 标签：java, android

我正在努力学习本教程：http: [//developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

它不能在大于 1.6 的 API 上工作，我不能让它工作。“R.styleable”已弃用

如果有人可以为图片库提供工作教程，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T13:31:03.813

不仅教程被弃用，整个小部件自 Jelly Bean 以来也被弃用。

Google 的建议：改用 ViewPager 或 Horizo​​ntalScrollView，不要使用其他滚动视图，如 ListView。结论：帮助自己......：/

现在，您的任务是实现画廊的中心锁定滑动行为并使用 BaseAdapter 预加载和显示相邻项目。一些 UI 模式，如垂直滚动视图中的水平画廊（通常用于新闻应用程序）更难实现。

视图寻呼机的问题：它占用了父视图容器的整个高度，而忽略了它的子视图容器的高度。因此很难在垂直滚动视图中或作为列表视图项布局一个或多个视图寻呼机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:00:40.650

R.styleable 没有引用核心 android 包提供的任何内容。它指的是您的项目为 android 图库项目背景定义的样式。

在 URL 给出的示例中

你跟着这个吗？

在 res/values/ 目录中创建一个名为 attrs.xml 的新 XML 文件。插入以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="HelloGallery">
        <attr name="android:galleryItemBackground" />
    </declare-styleable>
</resources> 
```

# asp.net - 使用 ASP 表单持久性 Cookie/票证时如何禁用用户？

> ID：10388087
> 
> 赞同：1
> 
> 时间：2012-04-30T17:42:40.287
> 
> 标签：asp.net, asp.net-mvc-3, forms-authentication

我在 MVC 3 站点中使用 Forms Auth 和 ASP Universal Membership Provider。为了方便用户，我们保留了 cookie。

```
FormsAuthentication.SetAuthCookie(model.UserName, true) 
```

当我们像这样在 Membership 提供程序中禁用用户时：

```
memUser.IsApproved = model.IsActive;
provider.UpdateUser(memUser); 
```

如果他们有 cookie，他们仍然可以访问该站点。这类似于这篇文章中描述的内容：http://stackoverflow.com/questions/5825273/how-do-you-cancel-someones-persistent-cookie-if-their-membership-is-no-longer-v

我们在控制器上使用 Authorize 属性，我知道这在技术上比 Authentication 更 Authorize。但是肯定会出现重叠，所以我试图找出最好的 MVC 方法来检查用户是否实际上没有被禁用？根据成员资格数据库检查用户的自定义 AuthorizeAttribute？Forms auth 缺少一个明显的设置/方法来使票证无效？

**更新：**

这基本上是我要做的——我们使用一个自定义的权限被拒绝页面，我们用它来更好地通知用户他们没有权限而不是他们没有登录。我添加了 IsApproved 检查。当您将属性放在 Controller 或 Action 上时，AuthorizeCore 会被调用，如果它返回 false，则调用 HandleUnauthorizedRequest。

```
public class CustomAuthorization : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        if (!filterContext.HttpContext.User.Identity.IsAuthenticated || !Membership.GetUser(filterContext.HttpContext.User.Identity.Name).IsApproved)
        {
            filterContext.Result = new HttpUnauthorizedResult();

            // in the case that the user was authenticated, meaning he has a ticket, 
            // but is no longer approved we need to sign him out 
            FormsAuthentication.SignOut();
        }
        else
        {
            var permDeniedRouteVals = new System.Web.Routing.RouteValueDictionary() { { "controller", "MyErrorController" }, { "action", "MyPermissionDeniedAction" }, { "area", null } };
            filterContext.Result = new RedirectToRouteResult(permDeniedRouteVals);
        }
    }

    protected override bool AuthorizeCore(System.Web.HttpContextBase httpContext)
    {
        // since persisting ticket,
        // adding this check for the case that the user is not active in the database any more
        return base.AuthorizeCore(httpContext) && Membership.GetUser(httpContext.User.Identity.Name).IsApproved; 
    }
} 
```

用法：

```
[CustomAuthorization()]
public class MyController 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:51:55.180

好吧，无论如何，你都必须检查数据库，唯一的问题是你想怎么做。是的，您可以创建一个自定义授权属性，或者您可以为 ControllerBase 中的 OnAuthorize 覆盖编写一些代码，或者您可以在 Application_AuthenticateRequest 中执行此操作。您可以通过多种方式来执行此操作，这取决于最适合您的方式。

当然，如果这对您来说是个问题，最好的方法是不要使用持久票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:58:12.197

我几乎总是使用 Roles 和 RolesProvider，即使只有一个名为“Login”的角色——部分原因是这个问题。这样，您的`Authorize`属性可能如下所示：

```
[Authorize(Roles="Login")] 
```

where`Login`代表所有“活动”帐户必须能够登录的基本“角色”；每个受保护的操作至少都受此保护。

这样，简单地删除“登录”角色就可以有效地禁用用户......*因为*，在我的角色提供程序中，我正在根据数据库或服务器本地等效项检查登录用户的角色。

在您的情况下，您的“登录”角色可以简单地解析为检查`IsApproved`用户模型上的字段。

# php - 防止 imagejpeg() 保存图像的 EXIF 数据（规范 FileDateTime）

> ID：10388092
> 
> 赞同：8
> 
> 时间：2012-04-30T17:43:22.333
> 
> 标签：php, gd, exif

我们的服务器正在将 EXIF 数据保存到使用`imagejpeg()`. 据我所知，这*不是*默认行为（甚至可能，从我读过的内容来看）。但是，它*正在*发生，并且由于`FileDateTime`包含的信息（并使用`time`保存），它破坏了我们上传/批准系统中的功能（由于总是不同`md5_file()`，为完全相同的图像返回不同的值）。`FileDateTime`

有没有办法防止`imagejpeg()`默认保存图像的 EXIF 数据？

# 服务器信息

*   CentOS 5
*   Parallels Plesk 面板 10.4.4
*   GD 版本：捆绑（2.0.34 兼容）
*   PHP 5.3

# 代码

```
<?php
public function upload_book_cover($book, $cover, $filename = NULL, $approved = NULL){
    global $c_consummo, $user;
    $approved = bool($approved, true, true);
    if(filesize($cover)>5242880){
        return false; // Too large;
    }
    $max_width = 450;
    $cover_info = getimagesize($cover);
    if(!$this->is_valid_book_cover_type($cover_info['mime'])){
        return false; // Invalid image type
    }
    $width = $cover_info[0];
    $height = $cover_info[1];
    if($width<200){
        return false; // Too small
    } elseif($width>1500){
        return false; // Too wide
    }
    $original_cover = false;
    switch($cover_info[2]){
        case IMAGETYPE_GIF:
            $original_cover = imagecreatefromgif($cover);
            break;
        case IMAGETYPE_JPEG:
            $original_cover = imagecreatefromjpeg($cover);
            break;
        case IMAGETYPE_PNG:
            $original_cover = imagecreatefrompng($cover);
            break;
        case IMAGETYPE_BMP:
            $original_cover = imagecreatefrombmp($cover);
            break;
    }
    if(!$original_cover){
        return false; // Unsupported type
    }
    if($width>$max_width){
        $new_width = $max_width;
    } else {
        $new_width = $width;
    }
    $new_height = round($height*($new_width/$width));
    $new_cover = imagecreatetruecolor($new_width, $new_height);
    if(!$new_cover){
        return false; // Could not create true color image
    }
    if(!imagecopyresampled($new_cover, $original_cover, 0, 0, 0, 0, $new_width, $new_height, $width, $height)){
        return false; // Could not copy image
    }
    if(!imagejpeg($new_cover, $cover, 100)){
        return false; // Image could not be saved to tmp file
        // This is adding *new* EXIF data to images by itself
    }
    $file_hash = md5_file($cover);
    $duplicate_book_cover = $this->find_duplicate_book_cover($book, $file_hash);
    if($duplicate_book_cover){
        return $duplicate_book_cover;
    }
    $file_id = $c_consummo->upload_file($cover, $filename);
    ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T03:58:22.807

看起来您在这里尝试了几件事，但让我们再试一试。您的应用程序中是否需要 EXIF 信息？如果没有，让我们取消对 EXIF 的支持，看看是否完全删除它。

如果它没有删除它，那么函数可能正在从现有照片中读取它，然后只是盲目地将它包含在写入的文件中。您可以通过在每个过程中打印出EXIF信息来确定

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T11:49:57.997

不知道为什么要写入 EXIF 数据-因此以下内容可能会帮助您将其删除。

一个建议是在服务器上运行一些命令——它需要一些安装：[http](http://hacktux.com/read/remove/exif) : //hacktux.com/read/remove/exif——然后通过 PHP 的 EXEC 运行。

如果您还安装了 ImageMagick，这里还发布了使用 ImageMagick 的解决方案（或安装它：[使用 PHP 从 JPG 中删除 EXIF 数据](https://stackoverflow.com/questions/3614925/remove-exif-data-from-jpg-using-php)（但请注意有关颜色的警告）

否则，其他建议同上，尝试关闭 EXIT 扩展。

抱歉，如果他们没有帮助，但您确实要求提供任何建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T16:51:55.743

您可以将`jpeg`a 转换为`gif`first，然后将`gif`back 转换为 a `jpeg`。这样做，我的理解是你会破坏 EXIF 数据。这是一个黑客，但它应该工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T15:17:58.770

阅读本文，也许它会有所帮助：

[http://www.php.net/manual/en/function.imagecreatefromjpeg.php#65656](http://www.php.net/manual/en/function.imagecreatefromjpeg.php#65656)

还有这个：

[http://www.sentex.net/~mwandel/jhead/usage.html](http://www.sentex.net/~mwandel/jhead/usage.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-16T13:21:29.617

唯一想到的是，您可以忽略 EXIF 数据并从其他内容中生成哈希？我的建议是尝试在不保存到文件的情况下对原始输出进行散列（此处以 gif 格式输出 - 这会生成更小的 8 位图像以提高性能 - 到输出缓冲区并散列缓冲区内容）

```
if(!imagecopyresampled(...)) {...}
ob_start();
imagegif($new_cover);
$file_hash = md5(ob_get_contents());
ob_end_clean();
if(!imagejpeg($new_cover, $cover, 100)) {...} 
```

或者您可以构建一个仅包含像素信息和哈希的字符串（这里通过访问每个像素并将其值附加到字符串来完成，相反以提高性能）

```
$pixels = '';
for($x=$new_width-1; $x>=0; $x--) {
  for($y=$new_height-1; $y>=0; $y--) {
    $pixels .= imagecolorat($new_cover, $x, $y);
  }
}
$file_hash = md5($pixels); 
```

为了提高性能，您还可以选择仅从图像中采样，因为这应该同样有效，甚至可能更好（这里每 5 行的每 5 个像素采样一次）

```
$pixels = '';
for($x=$new_width-1; $x>=0; $x-=5) {
  for($y=$new_height-1; $y>=0; $y-=5) {
    $pixels .= imagecolorat($new_cover, $x, $y);
  }
}
$file_hash = md5($pixels); 
```

我希望其中一些会起作用（因为我现在无法对其进行测试）或者至少会帮助您找到适合您的方式:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-16T17:08:04.783

显然，当输入/输出文件的路径相同时，GD 不喜欢，但[功劳](https://stackoverflow.com/a/3615080/89771)不是我的。要修复，请使用新 (tmp) 文件将新创建的图像保存到：

```
<?php
...
if(!imagecopyresampled($new_cover, $original_cover, 0, 0, 0, 0, $new_width, $new_height, $width, $height)){
 return false; // Could not copy image
}
// Create a tmp file.
$cover_new = tempnam('/tmp', 'cover-');
// Use $cover_new instead of $cover
if(!imagejpeg($new_cover, $cover_new, 100)){
 return false; // Image could not be saved to tmp file
}
// Use $cover_new instead of $cover
$file_hash = md5_file($cover_new);
$duplicate_book_cover = $this->find_duplicate_book_cover($book, $file_hash);
if($duplicate_book_cover){
 return $duplicate_book_cover;
}
// Use $cover_new instead of $cover
$file_id = $c_consummo->upload_file($cover_new, $filename);
... 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-16T14:10:58.060

这有点小技巧，但它会起作用，只需在您的`switch()`声明之后执行此操作：

```
$original_cover = imagerotate($original_cover,360,0); 
```

GD 将删除任何 EXIF 数据，因为它不支持它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-09T22:53:47.983

您可以尝试`imagecreatefromjpeg`在创建的图像上使用`imagejpeg`并替换为新创建的图像。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-09T23:08:52.057

`$res = imagecreatefromjpeg($filename)`加载图像，然后`imagejpeg($res, $filename, QUALITY)`重新渲染它。

您也可以使用 imagemagick：

```
$img = new Imagick($image);
    $img->stripImage();
    $img->writeImage($image);
    $img->clear();
    $img->destroy(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-16T14:17:22.143

> 你的 PHP 必须用`--enable-exif`.

尝试通过重新编译不带此选项的 PHP 来禁用全局 EXIF 功能。

# javascript - 如何使带点内联的html按钮出现

> ID：10388094
> 
> 赞同：0
> 
> 时间：2012-04-30T17:43:31.490
> 
> 标签：javascript, jquery, html

我正在尝试添加 javascript 以将焦点设置在按钮上，并希望使按钮看起来就像用户通过 HTML 表单“选项卡”到达按钮时的样子。

我正在处理的页面有一个按钮元素： `<input type="Submit" id="myBtn" class="myBtnClass >`

在 javascript 函数中，我使用以下方法设置焦点： `$("#myBtn").focus()` 调用此函数时，我可以看到按钮图像的变化。此外，当我单击“Enter”时，表单确实被提交。但是，在这种情况下，当图像发生变化时，我看不到通常出现在按钮上的“虚线内联”。

但是当用户“选项卡”到该按钮时，会出现虚线。

我是否应该做除`$("#myBtn").focus()`" 之外的任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:48:02.107

您可以使用 css 属性：

```
`outline` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:04:24.867

可能是在 IE7 兼容模式下运行，或者使用了错误的文档类型。
有关更多信息和可能的解决方案，请参阅此类似问题：[IE 中的 CSS 'outline' 属性和 jQuery 错误](https://stackoverflow.com/questions/6073292/css-outline-property-in-ie-and-jquery-errors)

# c# - MonoGame Mac 安装说明

> ID：10388097
> 
> 赞同：5
> 
> 时间：2012-04-30T17:43:37.230
> 
> 标签：c#, macos, xna, installation, monogame

有谁知道如何在 Mac 上安装 MonoGame。我一直在四处寻找，但找不到任何指南。我有 Mono 和 MonoDevelop 并且运行良好，但我不知道如何安装 MonoGame。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:49:22.697

一般来说，MonoGame：

*   从 GitHub 下载源代码
*   开始一个新项目
*   `Add Existing Project`对于`MonoGame.YourPlatform.csproj`和`Lidgren.Network.YourPlatform.csproj`
*   在您的新项目中添加对 MonoGame 的引用

真的没有什么可以“安装”的。

# node.js - 为everyauth 配置findByUserId - node、express、mongoose、everyauth

> ID：10388098
> 
> 赞同：2
> 
> 时间：2012-04-30T17:43:50.707
> 
> 标签：node.js, express, mongoose, everyauth

我对 Node.js 和 Express 比较陌生。我正在尝试使用 Twitter 完成everyauth 的配置，并且我正在尝试访问服务器端的“res.user”，根据everyauth 的文档要求配置.findByUserId。这就是我遇到麻烦的地方。你如何配置 findByUserId？

这就是我得到的。它目前正在创建一个新用户或让他们登录，我还没有正确设置 .findByUserId 但让我可以访问我在服务器端需要的 req.user 。如果您对如何优化此代码有其他建议，也请告诉我，因为我只是在学习。

代码编辑如下...

应用程序.js

```
var express = require('express')
  , everyauth   = require('everyauth')
  , util        = require('util')
  , Promise     = everyauth.Promise
  , users       = require('./lib/users')
  , config      = require('./config.js')
  , twitter     = require('./lib/twitter')
  , games        = require('./lib/games')

  everyauth.twitter
    .consumerKey(config.twitter.consumerKey)
    .consumerSecret(config.twitter.consumerSecret)
    .findOrCreateUser( function (session, accessToken, accessTokenSecret, twitterUserMetadata) {
      var promise = this.Promise();
      users.findOrCreateUserbyTwitterData(twitterUserMetadata, accessToken, accessTokenSecret, promise)
      return promise;
    })
    .redirectPath('/');
  everyauth.everymodule.findUserById(function (userId, callback) {
      users.findById(userId, callback);
  });

var app = module.exports = express.createServer();
everyauth.helpExpress(app);
// Configuration

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({secret: "FxT10477A93d54HJx5"}));
  app.use(everyauth.middleware());
  app.set('view engine', 'jade');
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes

app.get('/', function(req, res){
  console.log(req.user);
  res.render('index', { title: 'Zeitheist 2' });
}); 
```

用户.js

```
var twitter = require(__dirname + "/twitter");
var mongoose = require('mongoose');
var Schema = mongoose.Schema
  , ObjectId = Schema.ObjectId;

var userSchema = new Schema({
    user                  : ObjectId
    , id                  : Number
    , twitterId           : Number
    , twitterName         : String
    , profileImageUrl     : String
    , name                : String
    , dateCreated         : Date
    , session             : String
    , accessToken         : String
    , accessTokenSecret   : String
});

var conn = mongoose.createConnection('mongodb://localhost/zeitheist2_test');
var userModel = conn.model('User', userSchema);

this.findOrCreateUserbyTwitterData = function(twitterData, accessToken, accessTokenSecret, promise) {
  userModel.find({'twitterId' : twitterData.id}, function(err, users) {
     if(err) throw err;
     if(users.length > 0) {
       promise.fulfill(users[0]);
     } else {
       var user = new userModel();
       user.twitterId = twitterData.id
       user.twitterName = twitterData.screen_name
       user.profileImageUrl = twitterData.profile_image_url
       user.name = twitterData.name
       user.accessToken = accessToken
       user.accessTokenSecret = accessTokenSecret
       user.save(function(err) {
         if (err) throw err;
         twitter.follow(accessToken, accessTokenSecret);
         promise.fulfill(user);
       });
     }
   });
}
this.findById = function(userId, callback) {
  userModel.findOne({'_id' : userId}, function(err, user) {
    if(err) throw err;
    if(callback) 
      callback(user);
    else
      return user;
  }); 
} 
```

为了让我访问 req.user，everyauth.everymodule.findUserById 需要如何查看？在我成功登录后登录 req.user 时的默认路由中，它显示“未定义”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:49:10.147

您的代码应如下所示：

```
everyauth.everymodule.findUserById(function (userId, callback) {
    userModel.findById(userId, callback);
}); 
```

在您的代码中，您从应该调用回调的函数返回值。请记住，node 中的大多数内容都是异步的，并且使用回调来返回任何涉及 I/O 的结果，例如数据库查找。

# python - 在 Python 上运行后台循环

> ID：10388102
> 
> 赞同：3
> 
> 时间：2012-04-30T17:44:31.330
> 
> 标签：python, serial-port, listener

我正在尝试制作一个 Python 串行端口侦听器应用程序。

我的问题是在后台运行侦听器功能而不杀死 GUI。

这是代码：

```
import sys
import getopt
import serial
from time import sleep
from threading import *
from Tkinter import *
import io
#ser = serial.serial_for_url('loop://', timeout=1)
#sio = io.TextIOWrapper(io.BufferedRWPair(ser, ser))

runing = True
ser = None
class App:
  global ser
  def __init__(self, master):
    varCOM = StringVar(master)
    varCOM.set("COM1")
    listbox = OptionMenu(master, varCOM, "COM1", "COM2", "COM3", "COM4")
    listbox.grid(row=0, column=0)

    varBaudRate = StringVar(master)
    varBaudRate.set(4800)
    listboxBaudrate = OptionMenu(master, varBaudRate, 300, 1200, 2400, 4800, 9600, 14400, 19200, 38400)
    listboxBaudrate.grid(row=0, column=1) 

    varParity = StringVar(master)
    varParity.set("None")
    listboxParity = OptionMenu(master, varParity, "None", "Even", "ODD", "Mark", "Space")
    listboxParity.grid(row=1, column=0)

    varDataBits = StringVar(master)
    varDataBits.set(8)
    listboxDataBits = OptionMenu(master, varDataBits, 5, 6, 7, 8)
    listboxDataBits.grid(row=1, column=1)

    varStopBits = StringVar(master)
    varStopBits.set(2)
    listboxStopBits = OptionMenu(master, varStopBits, 1, 2)
    listboxStopBits.grid(row=2, column=0)

  def detener():
    global runing
    runing = False
    detencion = Thread(target=detener)

  def detencionRun():
    detencion.run()

  def write():
    while runing == True:
      #sleep(10)
      line = ser.read(14)
      if line:
        print line
        file.write(line)
    itinerancia = Thread(target=write)

  def openPort(port='COM1', baudrate=1920, bytesize=8, parity='N', stopbits=1):
    try:
      global ser
      global file
      port = varCOM.get()
      baudrate = int(varBaudRate.get())
      bytesize = int(varDataBits.get())
      stopbits = int(varStopBits.get()) 
      ser = serial.Serial(port=port, baudrate=baudrate, bytesize=bytesize, parity=parity, stopbits=stopbits)
      file = open("lecture.txt", "a")
      file.write("-- INICIO PROGRAMA --\n")

      itinerancia.run()
      #while runing == True:
      #  line = ser.read(14)
      #  if line:
      #    print line
      #    file.write(line)
      file.write("\n-- FIN DEL PROGRAMA --\n")
      file.close()
    except serial.SerialException:
        print 'No se pudo abrir el puerto'
    return

  def ejecutar():
    detener = Button(master, text="Detener", command=detencionRun)
    detener.grid(row=3, column=0)

    t = Thread(target=openPort)
    t.run()

    ejecutar = Button(master, text="Ejecutar", command=ejecutar)
    ejecutar.grid(row=3, column=1)

if __name__ == '__main__':
  root = Tk()
  app = App(root)
  root.mainloop() 
```

应用程序在 while 循环中冻结。 ![应用程序冻结](../Images/b509f73c4c2147708e43d1507242bf2a.png) 抱歉我的英语和编码不好（我是 Python 新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:26:48.053

您可以尝试对您的应用程序进行多线程处理并将轮询和文件写入放在其他线程中，或者您可以尝试将端口读取和文件写入分配到较大程序循环中的较小块中，以便处理大块数据不会完全阻止程序的执行。请记住，如果您确实尝试将其打包，您可能需要使用读写缓冲区进行设置，这样您就不会在完全写入或处理之前意外转储或覆盖内存中的数据它。

# c++ - C++ - 如果在循环中声明一个对象，它的析构函数是否在循环结束时调用？

> ID：10388108
> 
> 赞同：16
> 
> 时间：2012-04-30T17:44:45.507
> 
> 标签：c++, class, object, loops

在 C++ 中，对象的析构函数在创建它的块的结束“}”处被调用，对吗？所以这意味着如果我有：

```
while(some_condition)
{
    SomeClass some_object;
    some_object.someFunction();
    some_variable = some_object.some_member;
} 
```

然后在循环的一次迭代中创建的对象的析构函数将在循环结束时调用，然后再创建另一个对象，对吗？

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-30T17:45:18.667

是的。

但是你可以自己测试一下。这是编译器不太可能出错的语言特性。

```
#include <iostream>

struct S {
  S() { std::cout << "S::S()\n"; }
  ~S() { std::cout << "S::~S()\n"; }
};

int main () {
  int i = 10;
  while(i--) {
    S s;
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T17:54:48.280

可观察到的行为是它被称为每次迭代。

不过，通常的优化规则仍然适用。如果编译器很聪明并且对象很简单，那么编译器可以做任何它喜欢的仍然产生正确行为的事情，例如：

```
#include <iostream>

struct foo {
  int i;
  foo() : i (-1) {}
  ~foo() { i = 1; }
};

int main() {
  int i = 10;
  while (--i) {
    foo f;
    std::cout << f.i;
  }
} 
```

编译为：

```
.Ltmp5:
        .cfi_def_cfa_register %rbp
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        movl    $_ZSt4cout, %edi
        movl    $-1, %esi
        callq   _ZNSolsEi
        xorl    %eax, %eax
        popq    %rbp
        ret 
```

即展开并且那里没有那个析构函数的迹象（尽管可观察到的行为仍然相同）。

# prolog - Prolog - 在给定列表中写入 k 个数字的组合

> ID：10388109
> 
> 赞同：0
> 
> 时间：2012-04-30T17:44:50.397
> 
> 标签：prolog, combinations

我正在尝试在 prolog 中定义一个函数，该函数接受形式为 combination(3,[a,b,c,d],L) 的参数，结果返回

```
L=a,b,c
L=a,b,d
L=a,c,d
L=b,c,d 
```

我的实现如下：

```
combination(K,argList,L):-
unknown(X,argList,Y),
Z is select(X,argList),
length(Z,K),
L is Z,
combination(K,Z,L).

unknown(X,[X|L],L).
unknown(X,[_|L],R) :- unknown(X,L,R). 
```

未知谓词的行为如下：![在此处输入图像描述][1]

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:51:15.343

使用您的定义想到的最简单的解决方案`unknown/3`是：

```
combination(0, _, []) :- 
    !.
combination(N, L, [V|R]) :-
    N > 0,
    NN is N - 1,
    unknown(V, L, Rem),
    combination(NN, Rem, R).

unknown(X,[X|L],L).
unknown(X,[_|L],R) :- 
    unknown(X,L,R). 
```

解释：第二个子句`combination/3`从列表中选择一个元素`L`，谓词`unknown/3`以线性方式执行，返回余数，`Rem`。一旦从列表中选择的元素数量`L`超过`N`，就会触发基本情况（ 的第一个子句`combination/3`），从而终止分支。请注意， 的定义`combination/3`依赖于不确定性，`unknown/3`其为选择替代列表元素留下了选择点。

# c++ - 使用 std::map 评估表达式树

> ID：10388117
> 
> 赞同：1
> 
> 时间：2012-04-30T17:45:28.067
> 
> 标签：c++, map, tree, expression

我不确定如何使用 map 函数来评估我的树表达式。函数是这样的

```
int Tree::evaluate(std::map< std::string, int > ipMap){ 
```

我的老师给了我一个提示，以查看我的 postorder print 功能为例，但我不确定它如何应用于此。这里是：

```
void Tree::postOrderPrint(){
if(NodeType==TYPE_OPERATOR)
{
    leftPtr->postOrderPrint();
    rightPtr->postOrderPrint();
    std::cout<< Op << "  " ;
}
else
{
    std::cout<< Op << "  " ;
}

} 
```

如果树已经构建，字符串从之前的函数中解析出来，并且这个函数真正要做的就是相当于下面的函数

```
int arithmetic_expression::evaluateTree(TreeNodePtr rootPtr)
{
if ((rootPtr->Op=="+") | (rootPtr->Op=="-")|(rootPtr->Op=="*")|(rootPtr->Op== "/")) 
{
    if (rootPtr->Op=="+")
        {
            return(evaluateTree(rootPtr->leftPtr)+ evaluateTree(rootPtr->rightPtr));
        }
    if (rootPtr->Op=="-")
    {
        return(evaluateTree(rootPtr->leftPtr)- evaluateTree(rootPtr->rightPtr));
    }
    if (rootPtr->Op=="*")
    {
        return(evaluateTree(rootPtr->leftPtr)* evaluateTree(rootPtr->rightPtr));
    }
    if (rootPtr->Op=="/")
    {
        return(evaluateTree(rootPtr->leftPtr)/ evaluateTree(rootPtr->rightPtr));
    }
}
else
{
    int Number;
    std::istringstream(rootPtr->Op) >> Number;
    return(Number);
}

} 
```

这是调用该函数的内容：

```
int arithmetic_expression::evaluate_Expression(std::map< std::string, int > ipMap)
{
if (tree != NULL){
    return(tree->evaluate(ipMap));
}
else
    return(0);

} 
```

这看起来有意义吗？

```
int Tree::evaluate(std::map< std::string, int > ipMap){

std::map<std::string, int >::iterator myIter;
myIter=ipMap.find(Op);

{
    if (myIter=="+")
    {
    return(evaluate(leftPtr)+ evaluate(rightPtr))

    }
    if (myIter=="-")
    {
    return(evaluate(leftPtr)- evaluate(rightPtr));
    }
    if (myIter=="*")
    {
    return(evaluate(leftPtr)* evaluate(rightPtr));
    }
    if (myIter=="/")
    {
    return(evaluate(leftPtr)/ evaluate(rightPtr));
    }
    }
    else{ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:38:05.217

根据注释，地图包含一个表达式，您需要使用该表达式的结果更新关联的值。为此，您需要先解析字符串并构建表达式树，然后才能对其进行评估。

```
int Tree::evaluate(std::map< std::string, int > ipMap){
  std::map< std::string, int >::iterator it;
  for (it=ipMap.begin(); it != ipMap.end(); ++it) {
    Tree tree;
    tree.parse(it->first);
    *it = tree.postOrderEvaluate();
  }
} 
```

由于您没有绑定到`evaluate`函数中的任何特定树，因此它可以是静态成员函数（或自由函数）。

`int Tree:postOrderEvaluate()`将按照以下方式进行`Tree:postOrderPrint()`：1）评估左子树，2）评估右子树，3）对两个结果执行操作，4）返回当前子树的结果。

# text - 如何使用 Java2D 使旋转的文本看起来不错

> ID：10388118
> 
> 赞同：4
> 
> 时间：2012-04-30T17:45:32.543
> 
> 标签：text, rotation, render, java-2d

我的问题不是关于如何使用 Java2D 旋转文本；而是关于如何使用 Java2D 旋转文本。我知道该怎么做。我不知道的是如何让旋转后的文字“看起来不错”。例如，如果您在 PowerPoint 中创建一个文本框并将其旋转，则无论旋转角度如何，文本都会显得清晰明了。但是，使用 0 或 90 度绘制的文本`g2D.drawString()`看起来还不错，但在其他角度则不太好。有没有办法操纵文本来清理或锐化它？如果是这样，那么如果有人能指出我在哪里学习如何做到这一点，我将非常感激。

下面是一个小程序，说明了我在说什么。旋转时较大的字体还不错，但看起来仍然不是很专业。旋转时较小的字体很糟糕。

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

public class RotateTest extends JPanel {
    String message = "How does this text look?";

    public RotateTest() {
        this.setPreferredSize(new Dimension(640, 280));
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2D = (Graphics2D) g;

        g2D.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
                       RenderingHints.VALUE_TEXT_ANTIALIAS_ON);

        g2D.setFont(new Font("MyriadPro", Font.BOLD, 20));
        g2D.drawString(message, 80, 20);

        AffineTransform orig = g2D.getTransform();

        double angle = Math.toRadians(7.0);
        g2D.rotate(-angle, -10, 80);
        g2D.drawString(message, 80, 80);
        g2D.setTransform(orig);

        angle = Math.toRadians(30.0);
        g2D.rotate(-angle, -40, 80);
        g2D.drawString(message, 60, 260);
        g2D.setTransform(orig);

        g2D.setFont(new Font("MyriadPro", Font.BOLD, 12));
        g2D.drawString(message, 380, 20);

        angle = Math.toRadians(7.0);
        g2D.rotate(-angle, -10, 80);
        g2D.drawString(message, 380, 120);
        g2D.setTransform(orig);

        angle = Math.toRadians(30.0);
        g2D.rotate(-angle, -40, 80);
        g2D.drawString(message, 320, 400);
        g2D.setTransform(orig);
    }

    private void display() {
        JFrame f = new JFrame("RotateTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new RotateTest().display();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T09:44:55.527

我曾经遇到过类似的问题，通过将高精度的文本绘制到图像上，然后绘制旋转后的图像来解决。

这是代码：

```
import java.awt.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;

import javax.swing.*;

public class RotatedText extends JPanel {
    String message = "How does this text look?";

    public RotatedText() {
        this.setPreferredSize(new Dimension(640, 280));
    }

    public BufferedImage createStringImage(Graphics g, String s) {
        int w = g.getFontMetrics().stringWidth(s) + 5;
        int h = g.getFontMetrics().getHeight();

        BufferedImage image = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
        Graphics2D imageGraphics = image.createGraphics();
        imageGraphics.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
        imageGraphics.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
        imageGraphics.setColor(Color.BLACK);
        imageGraphics.setFont(g.getFont());
        imageGraphics.drawString(s, 0, h - g.getFontMetrics().getDescent());
        imageGraphics.dispose();

        return image;
    }

    private void drawString(Graphics g, String s, int tx, int ty, double theta, double rotx, double roty) {
        AffineTransform aff = AffineTransform.getRotateInstance(theta, rotx, roty);
        aff.translate(tx, ty);

        Graphics2D g2D = ((Graphics2D) g);
        g2D.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
        g2D.drawImage(createStringImage(g, s), aff, this);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.setFont(new Font("MyriadPro", Font.BOLD, 20));

        drawString(g, message, 80, 20, 0, 0, 0);
        drawString(g, message, 80, 80, -Math.toRadians(7.0), -10, 80);
        drawString(g, message, 60, 260, -Math.toRadians(30.0), -40, 80);

        g.setFont(new Font("MyriadPro", Font.BOLD, 12));

        drawString(g, message, 380, 20, 0, 0, 0);
        drawString(g, message, 380, 120, -Math.toRadians(7.0), -10, 80);
        drawString(g, message, 320, 400, -Math.toRadians(30.0), -40, 80);
    }

    private void display() {
        JFrame f = new JFrame("RotateTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new RotatedText().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:34:57.540

我没有时间对此进行测试，但以下代码会有所帮助吗？：

```
Graphics2D g2d; 
g2d.setRenderingHints(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON); 
```

这仅适用于 Graphics2D。如果您使用的是普通 Graphics，您可以将 Graphics 对象转换为 2D 版本，如下所示：

```
Graphics2D g2d = (Graphics2D) g; //if Graphics object name is g. 
```

让我知道！祝你好运

# python - Python中的静态类

> ID：10388127
> 
> 赞同：29
> 
> 时间：2012-04-30T17:46:30.427
> 
> 标签：python, class, static, instance, class-method

我曾经读过（我认为在 Microsoft 的页面上），当您不需要一个类的两个或多个实例时，这是使用静态类的好方法。

我正在用 Python 编写一个程序。如果我`@classmethod`对类的每个方法都使用它，这是一种不好的风格吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-30T17:48:36.833

一般来说，像这样的用法最好只使用模块中的函数，而不需要类。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-30T17:49:28.087

这是一种糟糕的风格，除非你真的需要访问这个类。

> 静态方法 [...] 不会转换为 Python 类方法。哦，当然，它或多或少会产生相同的效果，但类方法的目标实际上是做一些通常甚至不可能的事情[...]（比如继承非默认构造函数）。[...] 静态方法的惯用翻译通常是模块级函数，而不是类方法或静态方法。

[来源](http://dirtsimple.org/2004/12/python-is-not-java.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-30T18:00:03.003

根据我的经验，创建一个类是一个非常好的解决方案，原因有很多。一个是您最终使用该类作为“普通”类（尤其是制作不止一个实例）比您想象的更频繁。永远坚持类也是一个合理的风格选择；这可以使其他阅读/维护您的代码的人更容易，尤其是如果他们非常 OO - 他们会对课程感到满意。正如其他回复中所指出的，仅使用“裸”功能来实现也是合理的。您可能希望从一个类开始并使其成为单例/博格模式（如果您在谷歌上搜索这些示例，则会有很多示例）；它使您可以灵活地（重新）使用该类来满足其他需求。我建议反对“静态类”方法，因为它是非常规和非 Pythonic，

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-30T17:58:55.127

您可能会为此采取一些方法。正如其他人所提到的，您可以只使用模块级函数。在这种情况下，模块本身就是将它们结合在一起的命名空间。如果您需要跟踪状态，另一个选项可能很有用，即定义一个具有普通方法的类（采用 self），然后定义它的单个全局实例，并将其实例方法复制到模块命名空间。这是标准库“随机”模块采用的方法——`lib/python2.5/random.py`在你的 python 目录中查看。在底部，它有这样的东西：

```
# Create one instance, seeded from current time, and export its methods
# as module-level functions.  [...]
_inst = Random()
seed = _inst.seed
random = _inst.random
uniform = _inst.uniform
... 
```

或者您可以采用您描述的基本方法（尽管我建议使用`@staticmethod`而不是`@classmethod`在大多数情况下）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-23T12:03:15.403

你可能实际上想要一个单例类而不是一个静态类： [Making a singleton class in python](http://python-3-patterns-idioms-test.readthedocs.org/en/latest/Singleton.html)

# python - 如何返回属性并将其保存为全局变量？（Python）

> ID：10388130
> 
> 赞同：0
> 
> 时间：2012-04-30T17:46:37.447
> 
> 标签：python, properties

这是我的代码：

```
def createProp(fget, fset, fdel):

    class prop(object):
        get=property(fget,fset,fdel)

    return prop().get
x=createProp(getter,setter,deleter) 
```

我想做的是让它返回一个属性，这样我就可以制作变量 xa 属性，但我不知道如何制作这样的函数。它正在做的是返回属性的值，而不是属性本身。

蟒蛇2.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:58:27.973

```
createProp = property 
```

属性是完全普通的对象。`property`只是另一个类。你可以在运行时创建它的一个实例，在你想要的任何上下文中（不需要类），传递它们等等。是的，你可以（毫无意义地）在本地类中创建一个，然后从那里获取它。但是由于属性的全部意义在于覆盖实例上的属性访问，因此您必须从类中获取它：`return prop.get`.

然而，as`property`通过[描述符协议](http://docs.python.org/py3k/reference/datamodel.html#implementing-descriptors)发挥其魔力，并且描述符必须在一个类中才能工作。您不能拥有一个作为属性的全局（或局部）变量——好吧，您可以，但是使用它只会给您描述符对象，而不是 run `fget`，并且分配不会触发`fset`。你不能做那样的事情，你也不应该这样做。

# browser - 在 HP-ux 上启动 Jboss 后，无法使用 IP 地址查看 JBOSS 6：浏览器上的端口

> ID：10388133
> 
> 赞同：0
> 
> 时间：2012-04-30T17:46:44.290
> 
> 标签：browser, port, ip-address, jboss6.x, hp-ux

我在远程连接的 hp-ux 上解压缩了 Jboss 应用程序服务器 6，并使用 sh run.sh 启动了应用程序服务器，它在启动的构建和 server.log 中都没有错误地启动。

但不幸的是，我无法在浏览器中查看已启动的应用程序服务器：例如

192,168.15.10:8080。

有谁可以帮忙吗？

谢谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T17:20:32.077

我假设您正在使用`jboss-as-standalone.sh`脚本启动 JBossAS。

我最近遇到了同样的问题。JBoss 假设从其他机器访问服务器管理控制台是危险的，所以它的绑定默认设置为 localhost 或 127.0.0.1 at `/standalone/configuration/standalone.xml`。

将 3 个`interfaces`元素更改为 0.0.0.0 以便它可以监听来自所有接口的请求。

```
<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:0.0.0.0}"/>
    </interface>
    <interface name="public">
        <inet-address value="${jboss.bind.address:0.0.0.0}"/>
    </interface>
    <interface name="unsecure">
        <inet-address value="${jboss.bind.address.unsecure:0.0.0.0}"/>
    </interface>
</interfaces> 
```

如果您不是在独立模式下运行 JBoss，它应该以相同的方式工作，因此请编辑该`/domain/configuration/domain.xml`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:20:14.827

默认情况下，Jboss 6 仅将其服务绑定到 127.0.0.1。您需要在启动脚本中添加“-b 0.0.0.0”，例如 run.bat -b 0.0.0.0。

# java - Java 转换导致运行时错误而不是编译错误

> ID：10388136
> 
> 赞同：4
> 
> 时间：2012-04-30T17:47:04.623
> 
> 标签：java

以下代码片段将导致运行时：

```
class Vehicle {
    public void printSound() {
        System.out.print("vehicle");
    }
}

class Car extends Vehicle {
    public void printSound() {
        System.out.print("car");
    }
}

class Bike extends Vehicle {
    public void printSound() {
        System.out.print("bike");
    }
}

public class Test {
    public static void main(String[] args) {
        Vehicle v = new Car();
        Bike b = (Bike) v;

        v.printSound();
        b.printSound();
    }   
} 
```

我的问题是：为什么这会导致运行时错误而不是编译错误？编译器不应该知道'v'已经是'Car'并且不能转换成'Bike'吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T17:53:30.200

理论上，编译器有可能对自己说： "`v`是局部变量，它被分配为成功转换为。因此，这是一个错误。”`Car``Bike``Car``Bike`

但是，我知道没有 Java 编译器可以为您进行分析。这真的只在最简单的情况下才值得。相反，行为是编译器看到了强制转换，并说明可以将 a 强制`Vehicle`转换为 a `Bike`，因此它允许它。

一般来说，这就是强制转换的意思：它告诉编译器即使这个赋值可能失败，你也很确定它不会。作为允许代码编译的交换，您承担了运行时异常的风险。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T17:50:34.617

从超类进行强制转换可能有效，因此是允许的（在编译期间）。不允许从完全不同的类进行强制转换，例如：

```
Integer a = 1;
String b = (String)a; // compile error
String b = (String)(Object)a; // runtime error 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T17:54:07.870

为了

```
R r = /* some code to initialize "r" */
T t = (T) r; 
```

*Java 语言规范*说：

> 如果 R 是普通类（不是数组类）：
> 
> *   如果 T 是类类型，则 R 必须是与 T 相同的类或 T 的子类，否则将引发运行时异常。
> *   如果 T 是接口类型，则 R 必须实现接口 T，否则将引发运行时异常。
> *   如果 T 是数组类型，则抛出运行时异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T17:50:07.153

对象的类型转换发生在运行时，因此编译器无法识别它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T17:48:37.993

No.`v`是 a`Vehicle`并且有可能将其转换为`Bike`. 找出每个对象的实际运行时类型不是编译器的工作（尤其是因为有时这是不可能的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T17:52:04.817

Java 的语义表明这必然会导致运行时错误。在这种情况下，可以查看代码并发现它肯定会在运行时抛出错误，但是编译器如何知道 a`ClassCastException`不是您想要的？

像 IntelliJ 和 Eclipse 这样的编辑器可以（并且确实）注意到这些类型的错误并警告您，但是 Java 的规则说这是必须编译的合法代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T17:54:37.267

这是一个运行时错误，因为您已经将变量定义`v`为`Car`. 您无法转换`Car`为`Bike`.

编译器不会检查这种赋值，因为编译器通常不检查语义。

# database - 在 Tomcat 中为 Oracle 11g 安装 JNDI 数据源

> ID：10388137
> 
> 赞同：4
> 
> 时间：2012-04-30T17:47:07.620
> 
> 标签：database, tomcat, jndi

我在 Windows XP 上，使用 Tomcat 6（我要到月底才能升级到 7）。

我一直在尝试在 Oracle 11g 中实现 JNDI 数据库资源，但没有成功。

我计算机上的许多其他应用程序使用相同的数据库凭据连接得很好。我使用直接的 JDBC 制作了一个测试 JSP，并将其放入 Tomcat。它也连接得很好。

**我修改了我的 conf/server.xml 的一部分，如下所示：**

```
 <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
     <Resource name="jdbc/mydb"
               auth="Container"
               type="javax.sql.DataSource" driverClassName="oracle.jdbc.OracleDriver"
               factory="oracle.jdbc.pool.OracleDataSourceFactory"
               url="jdbc:oracle:thin:@apollo.abc.acme.com:2222:mydatabase"
               user="joe"
               password="blow"
               maxActive="20"
               maxIdle="30"
               maxWait="-1"/>   

    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml"/>
  </GlobalNamingResources> 
```

**我的 conf/context.xml：**

```
<Context>

    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
    <ResourceLink global="jdbc/mydb" name="jdbc/mydb" type="javax.sql.DataSource"/>

    <!-- Uncomment this to disable session persistence across Tomcat restarts -->
    <!--
    <Manager pathname="" />
    -->

    <!-- Uncomment this to enable Comet connection tacking (provides events
         on session expiration as well as webapp lifecycle) -->
    <!--
    <Valve className="org.apache.catalina.valves.CometConnectionManagerValve" />
    -->

</Context> 
```

**我的 conf/web.xml：**

```
 <resource-ref>
    <res-ref-name>jdbc/mydb</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
```

这是测试 JSP 的摘录，它在获取 JNDI 资源的地方出现了一个空指针异常：

```
Connection conn         = null;
ResultSet result        = null;
Statement stmt          = null;
String nsdtestcount     = null;
InitialContext ctx      = null;
Context envContext      = null;
javax.sql.DataSource ds = null;

try
{

    ctx        = new InitialContext();
    envContext = (Context)ctx.lookup("java:/comp/env");
    ds         = (DataSource)envContext.lookup("jdbc/mydb");
    conn       = ds.getConnection();      

}
catch (Exception e)
{
    System.out.println(nameJSP + "Failed to connect to the database: " +
    "\n ctx        =  " + ctx         +
    "\n envContext =  " + envContext  +
    "\n ds         =  " + ds          +
    "\n conn       =  " + conn          );

    e.printStackTrace();
} 
```

**我的日志摘录**：：

```
INFO: Server startup in 675 ms
testJNDI2.jsp: Failed to connect to the database:
 ctx        =  javax.naming.InitialContext@15356d5
 envContext =  org.apache.naming.NamingContext@69d02b
 ds         =  null
 conn       =  null
java.lang.NullPointerException
        at org.apache.jsp.testJNDI_jsp._jspService(testJNDI_jsp.java:114)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
        at java.lang.Thread.run(Thread.java:595) 
```

**堆栈跟踪中的代码行：**

```
 at org.apache.jsp.testJNDI_jsp._jspService(testJNDI_jsp.java:114)
   ctx        = new InitialContext();
    envContext = (Context)ctx.lookup("java:/comp/env");
    ds         = (DataSource)envContext.lookup("jdbc/mydb");
    conn       = ds.getConnection(); 
```

conn = ds.getConnection(); 是第 114 行

**从我的 catalina 日志中：**

```
May 1, 2012 4:17:48 PM org.apache.tomcat.util.modeler.Registry registerComponent
SEVERE: Null component Catalina:type=DataSource,class=javax.sql.DataSource,name="jdbc/mydb" 
```

**我的 CATALINA_HOME/lib 的内容：**

```
C:\tomcat\lib>ls -l

 annotations-api.jar
 catalina-ant.jar
 catalina-ha.jar
 catalina-tribes.jar
 catalina.jar
 ecj-3.3.1.jar
 el-api.jar
 jasper-el.jar
 jasper.jar
 jsp-api.jar
 log4j-1.2.16.jar
 ojdbc14.jar
 servlet-api.jar
 tomcat-coyote.jar
 tomcat-dbcp.jar
 tomcat-i18n-es.jar
 tomcat-i18n-fr.jar
 tomcat-i18n-ja.jar
 tomcat-juli-adapters.jar
 tomcat-juli.jar

C:\tomcat\lib> 
```

**我的 JAVA/JDK jre/lib/ext 的内容：**

```
 C:\Program Files\Java\jdk1.5.0_22\jre\lib\ext>ls -l

 activation.jar
 dnsns.jar
 localedata.jar
 log4j-1.2.16.jar
 mail.jar
 nls_charset12.jar
 sunjce_provider.jar
 sunmscapi.jar
 sunpkcs11.jar

C:\Program Files\Java\jdk1.5.0_22\jre\lib\ext> 
```

关于我可以尝试什么的任何想法？我想让数据库资源可用于 Tomcat 中运行的所有内容（这是我的开发环境）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:04:38.080

可能存在多个问题，但第一个问题是您在 $CATALINA_HOME/lib 和 $JAVA_HOME/jre/lib/ext 中有多个版本的 Oracle JDBC 驱动程序的多个副本。

第 1 步是删除以下 JAR 的所有实例，除了 $CATALINA_HOME/lib/ojdbc14.jar

*   ojdbc14.jar
*   ojdbc14_g.jar
*   ojdbc14dms.jar
*   ojdbc14dms_g.jar
*   classes12.jar
*   类12.zip
*   classes12dms.jar

当您使用它时，也请删除 $JAVA_HOME/jre/lib/ext/servlet-api.jar。

第 2 步是 maxIdle > maxActive 没有任何意义。你想要 maxActive >= maxIdle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T23:59:50.457

[如tomcat 站点](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#Oracle_8i,_9i_&_10g)上的示例所示，我相信“用户”应该是您的资源定义中的“用户名”。

# c++ - 类定义 - 两个文件

> ID：10388138
> 
> 赞同：1
> 
> 时间：2012-04-30T17:47:14.090
> 
> 标签：c++, class, char

我尝试在课堂上创建新的学生对象。我对类主体（student.cpp）和类（student.h）的定义有一些问题。

```
Error:

In file included from student.cpp:1:
student.h:21:7: warning: no newline at end of file
student.cpp:6: error: prototype for `Student::Student()' does not match any in class `Student'
student.h:6: error: candidates are: Student::Student(const Student&)
student.h:8: error:                 Student::Student(char*, char*, char*, char*, int, int, bool) 
```

**学生.cpp**

```
 //body definition  
    #include "student.h"
    #include <iostream>

    Student::Student()
    {
    m_imie = "0";
    m_nazwisko = "0";
    m_pesel = "0";
    m_indeks = "0";
    m_wiek = 0;
    m_semestr = 0;
    m_plec = false;

} 
```

**学生.h**

```
//class definition without body

#include <string.h>

class Student {
    //konstruktor domyslny
    Student (char* imie, char* nazwisko, char* pesel, char* indeks, int wiek, int semestr, bool plec): 
    m_imie(imie), m_nazwisko(nazwisko), m_pesel(pesel), m_indeks(indeks), m_wiek(wiek), m_semestr(semestr), m_plec(plec)
    {}  
        private:
        char* m_imie;
        char* m_nazwisko;
        char* m_pesel;
        char* m_indeks;
        int m_wiek;
        int m_semestr;
        bool m_plec;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:54:09.357

您在 cpp 文件中的构造函数与标头中的构造函数不匹配。cpp 中的每个构造函数/析构函数/方法实现都应该首先在头文件中的类中定义。

如果你想有 2 个构造函数 - 1 个没有参数，一个有很多参数。您需要在标题中添加构造函数的定义。

```
//class definition without body

#include <string.h>

class Student {
    //konstruktor domyslny
    Student (char* imie, char* nazwisko, char* pesel, char* indeks, int wiek, int semestr, bool plec): 
    m_imie(imie), m_nazwisko(nazwisko), m_pesel(pesel), m_indeks(indeks), m_wiek(wiek), m_semestr(semestr), m_plec(plec)
    {}  //here really implementation made

    Student();  //one more constructor without impementation

        private:
        char* m_imie;
        char* m_nazwisko;
        char* m_pesel;
        char* m_indeks;
        int m_wiek;
        int m_semestr;
        bool m_plec;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:49:53.260

在您的头文件中，您声明`Student`只有一个带有所有写入参数但没有默认`Student()`构造函数的构造函数，您应该将其添加到头文件中：

```
class Student {
  Student();
  Student(char* imie, char* nazwisko ... ) {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:49:15.087

您为不带任何参数的 Student 构造函数编写了一个主体：

```
Student::Student( /* NO PARAMETERS */ ) 
```

但是这个函数 ,`Student()`不在类定义中。
这会产生错误：

```
 prototype for `Student::Student()' does not match any in class `Student' 
```

你需要写：

```
class Student {
    public:
        Student();  /* NOW it is declared as well as defined */
    [... all the other stuff ...]
}; 
```

现在，既有原型`Student()`，也有`Student(/* 7 parameters */)`

* * *

另一个错误的修复很简单：

```
student.h:21:7: warning: no newline at end of file 
```

解决方法是在文件末尾添加换行符！:-)

# c++ - 我可以通过 C 或 C++ 中的另一个 UDS 连接传递 UDS 文件描述符吗

> ID：10388140
> 
> 赞同：1
> 
> 时间：2012-04-30T17:47:21.483
> 
> 标签：c++, c, linux, network-programming

我试图通过另一个 Unix 域套接字连接将已建立的连接 Unix 域套接字文件描述符从进程 A 传递到进程 B，但没有运气，尽管传递了一个 tcp 套接字没有问题。这是有原因的还是我做错了什么？两者都通过辅助消息传递

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:29:40.190

套接字文件描述符（就像常规文件描述符一样）在正确创建它们的进程之外绝对没有意义。当您将 a 发送`fd`到其他进程时，您只是发送了一堆字节 - 不多也不少。

*将工作* `fd`从一个进程移动到另一个进程的唯一方法是移动到`fork()`包含`fd`要传递的进程的进程。

如果您希望某个进程连接到特定的 Unix 套接字，您应该将一个 unix 套接字文件系统条目名称传递给该进程。接收进程可以正确创建套接字并在之后建立连接。

我不知道为什么您在传递 tcp socket 时没有问题`fd`。也许如果您发布代码的相关部分，原因就会被揭示。

# jquery - 使用 jquery 从标签元素中重置 id

> ID：10388144
> 
> 赞同：0
> 
> 时间：2012-04-30T17:47:49.270
> 
> 标签：jquery, html, reset

给定以下html：

```
<div>
    <div id="element-0"></div>
    <div id="element-1"></div>
    <div id="element-2"></div>
    <input id="element-3"></input>
    <div id="element-4"></div>
    <div id="element-5"></div>
    <div id="element-6"></div>
</div> 
```

如果要删除 id 为 2 和 4 的元素，我如何重置（如果更容易，使用 jquery 或 javascript）所有这些元素的 id，最终结果为：

```
 <div>
    <div id="element-0"></div>
    <div id="element-1"></div>
    <input id="element-2"></div>
    <div id="element-3"></div>
    <div id="element-4"></div>
</div> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:51:12.673

```
function resetIndexes() {
    var els = $('div *'), i;

    for(i = 0; i < els.length; i++){
        els.eq(i).attr('id', 'element-' + i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:25:06.410

其他答案还可以，但可能不够稳健。例如，@Xander 的回答没有考虑到其中一个元素`input`不是 a `div`。@thecodeparadox 的答案依赖于封闭的每个孩子`div`都有一个“元素-”ID。

要彻底做到这一点，您必须遍历 DOM 中的所有元素并查看它们的 ID 是否以“element-”开头，然后相应地更改 ID。

我首先编写了一个函数来获取所有以“element-”开头的元素：

```
function getElements() {
  return $('html').find('*').filter( function() {
    var id = $(this).attr('id');
    return id && id.indexOf( "element-" ) == 0;
  } );
} 
```

然后是一个重新排序 ID 的函数：

```
function reorderIds() {
  var idx = 0;
  getElements().each( function() {
    $(this).attr( 'id', 'element-' + idx++ );
  } );
} 
```

你可以在这里看到我的 jsfiddle：http: [//jsfiddle.net/22CzQ/4/](http://jsfiddle.net/22CzQ/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:51:44.400

```
<div id="elements">
    <div id="element-0"></div>
    <div id="element-1"></div>
    <div id="element-2"></div>
    <input id="element-3"></div> // your markup has error here remove the </div>
    <div id="element-4"></div>
    <div id="element-5"></div>
    <div id="element-6"></div>
</div>

$('#elements').children().each(function(index, val) {
  $(this).attr('id', 'element-' + index);
}); 
```

# ruby-on-rails - 如何在 Rails 3 Controller 调用 API 设计之前创建对象

> ID：10388149
> 
> 赞同：0
> 
> 时间：2012-04-30T17:48:07.393
> 
> 标签：ruby-on-rails, api, controller, initialization

我正在构建一个分类器 API，以作为独立服务插入到我们不断发展的平台中。基本上我想发送一段文本并在其上运行一些专有的魔法并用 json 回复。

容易，对吧？

问题是我想在文本上运行一些方法，这些方法需要将大哈希加载到内存中以进行操作。现在，每次发送要操作的新文本时，我都必须初始化这些对象。

设置我可以在控制器中访问的对象的全局实例的最佳方法是什么，而不必为每次调用重新创建它？

这应该在初始化程序中还是有办法将其绑定到特定的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:35:26.373

您可以使用全局变量，但严重不推荐 - 请务必阅读Simone Carletti 的[这个答案](https://stackoverflow.com/questions/3104444/ruby-on-rails-global-variable/3104639#3104639)。我应该补充一下 - 他指的是使用更强大的缓存解决方案，这是我推荐的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:22:37.960

您在这里有几个选择。

答：您可以在 rails 启动时将哈希加载到一个常量中，使它们可用于整个应用程序，使其仅加载一次。您可以通过在初始化程序中添加常量来做到这一点。

B. 将哈希加载到 memcached 中并重新编写逻辑以查询 memcached 而不是哈希。这会稍微复杂一些，但如果我这样做，这将是我的首选方法。我会有一个 rake 任务，将文件加载到 memcached 中，然后在实例或 rails 之间共享 memcached 的实例。这将减少所需的内存开销。只要确保将过期时间设置为 nil。

# php - 从 MySQL 获取数值并制作倒计时到零 我怎样才能在 PHP 下拉菜单中创建从 0 到 mysqlquery 将检索的特定数字的选项？我试过while循环，但它只检索一个值为mysql的选项。即。在 mysql 表中有值六 (6)。所以我希望它像这样打印： <select name="count"><option value="">Count</option> <option value="1">1</option> < ID：10388151 赞同：-1 时间：2012-04-30T17:48:20.283 标签：php, mysql, loops, for-loop, while-loop 回答 #1 赞同：1 时间：2012-04-30T17:52:20.997 从您的数据库中检索数字 - 让我们说它存储在其中$maxnum- 然后使用循环遍历所有值1to ，在每次循环迭代中回显一个元素。$maxnumfor<option> 回答 #2 赞同：0 时间：2012-04-30T18:54:38.757 这是如何做到的。首先，您需要将 MySQL 查询的结果放入一个变量中（参见$result下面的行）。然后，您需要将第一行（因为您只返回一行）提取到一个数组中。将该数组的第一个元素作为您的计数值，然后对其执行 for 循环以创建其他option元素。 <select name="count"> <option value="">Count</option> <?php $result = mysql_query('SELECT count(*) FROM table') or die ('MySQL error! Error with query!'); $row = mysql_fetch_row($result); $count = $row[0]; for($i=0; $i < $count; $i++) { ?> <option value="<?php echo $i; ?>"><?php echo $i; ?></option> <?php } ?> </select> 回答 #3 赞同：-1 时间：2012-04-30T17:55:11.353 <select name="mynolist" id="mynolist" onchange="form.submit()"> <option value="">Select</option> <?php for($i = 0; $i <10; $i++) { ?> <option value="<?php echo $i; ?>"><?php echo $i; ?></option> <?php } ?> </select> 做。</select>

# mysql - 使用mysql存储过程创建存储过程

> ID：10388152
> 
> 赞同：1
> 
> 时间：2012-04-30T17:48:32.067
> 
> 标签：mysql, stored-procedures, database-migration

所以这个问题很有趣。我们的数据库是通过存储过程迁移的。发生的情况是将迁移代码放置在存储过程中，这样每次需要新迁移时，都会创建存储过程的新副本，其中包含新的迁移更新。然后运行存储过程以初始化迁移，然后该存储过程自行删除。

大多数情况下，以这种方式创建一个新的列或表，但是如何从这个存储过程中创建一个存储过程。当您尝试这样做时会导致错误，即在 MySQL 中似乎不可能在存储过程中创建存储过程。有没有办法解决这个问题，可能是通过再次更改内部存储过程的分隔符，或者可能明确不更改它。任何建议将不胜感激。谢谢你。

# visual-studio - 如何在 VS NuGet 包管理器控制台中永久设置新的默认项目？

> ID：10388157
> 
> 赞同：16
> 
> 时间：2012-04-30T17:48:43.407
> 
> 标签：visual-studio, nuget, visual-studio-2012, package-managers

我正在使用 VS2012，每次重新打开 VS 时，NuGet 包管理器控制台中的默认项目都已重置为看似任意项目，我必须使用下拉列表重置为适当的项目。

如何为包管理器控制台的默认项目设置（并保留此设置）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-10T14:45:17.853

正如[此处](https://docs.microsoft.com/en-us/nuget/tools/package-manager-console#opening-the-console-and-console-controls)的文档中所述，包管理器控制台的默认项目是在您的解决方案级别上设置为启动项目的任何项目。您可以在解决方案资源管理器中右键单击项目并选择`Set as StartUp Project`：

[![从上下文菜单中选择启动项目](../Images/0848b226dad906e5dc0ca8a455471439.png)](https://i.stack.imgur.com/JkHEa.png)

或从窗口顶部标准工具栏中的下拉菜单中。

[![从标准工具栏中选择启动项目](../Images/7803cbd7355d89e8c7c0f4f883e4f05d.png)](https://i.stack.imgur.com/nh0qz.png)

# java - onclick 取决于视图的位置

> ID：10388160
> 
> 赞同：0
> 
> 时间：2012-04-30T17:48:58.103
> 
> 标签：java, android

例如，我想根据平板电脑上的视图位置来显示某些内容：所以我知道我需要像这样使用 ontouch 侦听器：

```
.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            Toast.makeText(getContext(), "X :"+event.getX(), Toast.LENGTH_LONG).show();
            return true;
        }
    }); 
```

例如，从左到右有 2 张图像，如果我点击左边的一张，右边会出现一些东西，如果我点击右边的一张，就会出现一些东西。我想把它扩展到一个水平滚动视图的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:03:02.550

是的，您可以使用 onClick() 执行此操作。

```
onClick(View v)
{
  int idView= v.getId();
    if(left) // for ex id =2 here
    {
        idView++;
        R.id.idView.setImageBitmap(...); // or whatever u want...
    }
    else
    {  // means right part clicked
        idView--;
        R.id.idView.setImageBitmap(...); // or whatever u want...
    } 
} 
```

您需要设置一些**标志**来检查天气**Right** side is clicked or **Left**。给你。

# ruby-on-rails - RoR 在删除时更新子项的属性

> ID：10388163
> 
> 赞同：0
> 
> 时间：2012-04-30T17:49:09.563
> 
> 标签：ruby-on-rails, ruby

在我的 RoR 应用程序中，我有以下关系：一个团队有很多玩家，玩家属于一个团队。

我想要做的是`team_id`在该球员的球队被删除时将球员列的值更改为“10”（自由球员）。这是我的`teams`模型的样子，它不起作用

```
class Team < ActiveRecord::Base
  has_many :players, :after_remove => :make_free_agents  

  def make_free_agents(player)
    player.update_attribute(:team_id, "0")
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:28:17.080

我的团队模型中的以下代码起到了作用：

```
class Team < ActiveRecord::Base
  before_destroy { |record| Player.update_all("team_id = '0'", "team_id = #{record.id}")   }
  has_many :players

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:02:18.823

[关联回调](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Association+callbacks)仅在“向关联集合中添加对象或从关联集合中删除对象时”触发。如果您希望在删除团队后更新玩家的属性，我建议您使用 Team 类上的[`after_destroy`钩子](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)。

```
class Team < ActiveRecord::Base
  after_destroy :make_free_agents
  has_many :players

  def make_free_agents
    players.update_all(team_id: 0)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:05:47.037

“删除”和“销毁”是有区别的。如果您实际使用“删除”，则不会运行回调。

因此，如果您希望代码以任何一种方式运行，最好的选择可能是用 SQL 编写的触发器。如果您的数据存储支持它。

否则，您自己的解决方案看起来不错。

# ssh - 更改将执行的 ssh 远程命令

> ID：10388166
> 
> 赞同：1
> 
> 时间：2012-04-30T17:49:15.943
> 
> 标签：ssh, openssh

命令：

```
 ssh user@server 'command1; command2' 
```

在帐户用户下创建与服务器的 ssh 连接，然后解释*command1；command2*在命令*bash -c*下，但命令：

```
 ssh user@server 'command1' 
```

直接执行*command1*。我通过实验知道这一点，因为我找不到这方面的信息。

我的问题是，我可以指定使用的解释器或解释器上使用的任何附加参数吗？

谢谢，

一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-27T15:57:26.290

使用最广泛的 SSH 服务器是[OpenSSH ssh 服务器](https://man.openbsd.org/sshd)。它总是使用用户的 shell 执行客户端请求的命令。它调用此`sh`语法的等效项：

```
$SHELL -c 'the command with its arguments' 
```

如果要调用备用解释器，则必须构造一个执行所需操作的 shell 命令：

```
$ ssh localhost 'exec perl -le "print scalar localtime"'
Mon Nov 27 11:10:33 2017
$ 
```

你说运行这个`command1`直接调用：

```
ssh user@server 'command1' 
```

你可能误解了正在发生的事情。如果远程用户的 shell 是，那么 bash 会优化这种情况并在不创建子进程的`bash`情况下调用。`command1`这是`bash`shell（可能还有其他 shell）的特殊行为，而不是 OpenSSH。因此，如果您检查远程服务器上运行的进程，可能看起来 OpenSSH 是在`command1`没有使用 shell 的情况下调用的。但事实并非如此。

# stored-procedures - 将 Java 库与 DB2 Java 存储过程捆绑在一起

> ID：10388171
> 
> 赞同：4
> 
> 时间：2012-04-30T17:49:41.440
> 
> 标签：stored-procedures, db2, java-stored-procedures, db2-luw, ibm-data-studio

使用 IBM Data Studio 创建一个 DB2 Java 存储过程，我有一些类路径中需要的库。我在 VM 中运行 Data Studio，并在云实例中远程部署到我的 DB2 服务器。

如何将罐子与我的存储过程捆绑在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:32:53.800

将存储过程部署到服务器时：

![使用 Data Studio 部署存储过程：部署选项](../Images/052f5475509d1d397d0144ea2c7a5647.png "使用 Data Studio 部署存储过程：部署选项")

确保单击**“下一步”**而不是“完成”以进入第二个屏幕：

![使用 Data Studio 部署存储过程：例程选项](../Images/5d6f8969237f2cf484707bf659372add.png "使用 Data Studio 部署存储过程：例程选项")

在那里，在**Compile options:****`-classpath`**字段中，使用命令行选项附加您的依赖项。

**注意：**速记[`-cp`](https://stackoverflow.com/q/5172507/341929)选项不起作用！

# java - 将数组中的字符串复制到字符串变量时遇到问题

> ID：10388172
> 
> 赞同：1
> 
> 时间：2012-04-30T17:49:47.537
> 
> 标签：java, arrays, string

我正在执行一个相对简单的文件读取，并且我在验证输入值和从平面文件读取并存储在数组中的数据值之间遇到异常。我已经将错误追溯到该`firstName`领域。我将此字段定义为等于`array[0]`。`While array[0]`在我的输出中完美显示，`fieldName`不......它是空白或空。

这是我的代码，带有输出示例。

我不确定`Stringbuilder`这里是否最适合使用？还是深层字符串方法之一？我尝试过的所有方法似乎都不起作用。我错过了什么......我知道这是显而易见的，我只是看不到。

```
public class DisplaySelectedNumbers
{
    public static void main(String[] args)
    {
        final String FN = "            ";
        final String LN = "            ";
        final String PHONE = "0000000000";
        String delimiter = ",";
        String s = FN + delimiter + LN + delimiter + PHONE + System.getProperty("line.separator");
        final int RECSIZE = s.length();
        String[] array = new String[3];
        Scanner kb = new Scanner(System.in);
        Path file = Paths.get("PhoneList.txt");
        String fName = JOptionPane.showInputDialog(null,"Enter first name to search");
        try
        {
            InputStream iStream=new BufferedInputStream(Files.newInputStream(file));
            BufferedReader reader=new BufferedReader(new InputStreamReader(iStream));
            while ((s = reader.readLine()) != null)
            {
                array = s.split(delimiter);
                String dispString = array[0]+" "+array[1]+" "+array[2]+"\n";
                System.out.println("array[0]="+array[0]);
                System.out.println("array[1]="+array[1]);
                System.out.println("array[2]="+array[2]);
                String firstName = array[0];
                System.out.println("firstName=");
                    s=reader.readLine();
            }
        }
        catch(Exception e)
        {
            System.out.println("Message: " + e);
        }
    }
}

array[0]=D
array[1]=JJ
array[2]=0123450000
firstName=
array[0]=B
array[1]=EE
array[2]=1111111111
firstName=
array[0]=D
array[1]=GG
array[2]=0033333333
firstName= 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:54:15.640

您忘记实际打印`firstName`变量：

```
System.out.println("firstName="); 
```

你需要：

```
System.out.println("firstName=" + firstName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:06:46.030

不是您问题的完整答案，但是是的，如果您需要提高字符串连接速度，特别是在循环中，在代码中使用 StringBuilder 会更好。

[StringBuilder 与字符串连接](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)

# windows-phone-7 - Windows Phone 7 的现有“列表+过滤器”？

> ID：10388174
> 
> 赞同：0
> 
> 时间：2012-04-30T17:49:52.720
> 
> 标签：windows-phone-7, user-interface

我正在为 Windows Phone 7 设计一个应用程序，并且我想创建一个 UI 元素，用户可以在其中通过使用文本搜索从大列表中选择一个项目。是否有任何现有的控件可以提供这样的功能？

我找到了一个做我想做的事[的例子，减去文本搜索。](http://www.telerik.com/products/windows-phone/overview/all-controls.aspx#listpicker)

或者，是否有某种其他控件提供类似的可用性——允许用户从列表中选择一个项目，但提供某种方法来缩小范围？

编辑：

是否有带有文档的内置 WP7 控件列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:06:17.387

我认为您正在寻找 AutoCompleteBox - [http://www.windowsphonegeek.com/articles/Data-Binding-the-Windows-Phone-Toolkit-AutoCompleteBox](http://www.windowsphonegeek.com/articles/Data-Binding-the-Windows-Phone-Toolkit-AutoCompleteBox)

# c# - 验证是否执行了mysql命令

> ID：10388179
> 
> 赞同：2
> 
> 时间：2012-04-30T17:50:01.247
> 
> 标签：c#, mysql

我在用

```
public static bool command(string input, MySqlConnection con)
{
    MySqlCommand command = new MySqlCommand(input, con);
    var resultSet = command.ExecuteNonQuery();

    if (!resultSet.Equals(0))
        return true;
    return false;
} 
```

举个例子：

```
bool comm = mysql_command.command("INSERT INTO sometable (field1,field2) VALUES ('val1','val2')", connection);
if (!comm) textBox1.Text += "Command failed";
else textBox1.Text += "Command successful"; 
```

哪个正确添加`Command successful`到 textbox1。

但是当我更改`sometable`为时`sometablee`， textbox1 保持为空。我期待它通知我命令失败（`sometablee`不存在），但它没有。

谁能告诉我为什么？

**完整代码：**

mysql_命令：

```
class mysql_command
{
    public static bool command(string input, MySqlConnection con)
    {
        MySqlCommand command = new MySqlCommand(input, con);
        var resultSet = command.ExecuteNonQuery();

        if (!resultSet.Equals(0))
            return true;
        return false;
    }
} 
```

mysql_connect：

```
class mysql_connect
{
    private MySqlConnection connection = null;

    public MySqlConnection connect(string server, string database, string UID, string password)
    {
        try
        {
            string MyConString = "SERVER=" + server + ";" +
                "DATABASE=" + database + ";" +
                "UID=" + UID + ";" +
                "PASSWORD=" + password + ";";
            connection = new MySqlConnection(MyConString);
            connection.Open();
        }
        catch (Exception ex) { Console.WriteLine("MySQL connect error : "+ex.Message); }
        return connection;
    }

    public void disconnect()
    {
        connection.Close();
    }
} 
```

用法：

```
private void Form1_Load(object sender, EventArgs e)
{
    mysql_connect con = new mysql_connect();
    MySqlConnection connection = con.connect("server1.x.x", "somedb", "user", "pass");

    bool comm = mysql_command.command("INSERT INTO sometable (field1,field2) VALUES ('val1','val1')", connection);
    if (!comm) textBox1.Text += "Command failed";
    else textBox1.Text += "Command successful";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:41:27.983

原因如我所料，你的命令方法中会出现异常，

```
public static bool command(string input, MySqlConnection con) 
```

因为请求的表不存在，....编辑您的命令方法以处理异常：

```
public static bool command(string input, MySqlConnection con)
{
    try
    {
    MySqlCommand command = new MySqlCommand(input, con);
    var resultSet = command.ExecuteNonQuery();

    if (!resultSet.Equals(0))
        return true;
    return false;
    }
    catch
    {}
    return false;
} 
```

# bash - 递归检查目录名称的长度

> ID：10388180
> 
> 赞同：1
> 
> 时间：2012-04-30T17:50:03.077
> 
> 标签：bash

我需要确定给定目录中是否有任何目录名称> 31 个字符（即在该根目录下查看）。

我知道我可以使用类似的东西`find /path/to/root/dir -type d >> dirnames.txt`

这会给我一个完整路径的文本文件。

我需要的是获取每个目录名称中的实际字符数。不确定使用 sed 或 awk 解析上述结果是否有意义。寻找有关如何完成此任务的想法/想法/建议/提示。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:59:50.657

这个简短的脚本一次性完成，即找到所有目录名称，然后输出长度大于 31 个字符的任何目录名称（以及它们的字符长度）：

```
for d in `find  /path/to/root/dir -type d -exec basename {} \;` ; do
  len=$(echo $d | wc -c)
  if [ $len -gt 31 ] ; then
    echo "$d = $len characters"
  fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:20:40.623

尝试这个

```
 find . -type d -exec bash -c '[ $(wc -c <<<"${1##*/}") -gt 32 ] && echo "${1}"' -- {} \; 2>/dev/null 
```

我认为是次要的一个错误是，它每次都会将目录名称长度多计 1。

如果你想要的是整个路径而不是最后一个路径组件，那么使用这个：

```
find . -type d | sed -e '/.\{32,\}/!d' 
```

此版本也有一个错误，但仅限于文件名嵌入换行符时。

两个命令的输出都是符合条件的文件名列表。从那里计算每个人的长度是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:53:08.043

使用您的`find`cmd 创建的 dirnames.txt 文件，您可以按路径名的长度对数据进行排序，即

```
 awk '{print length($0) "\t" $0}' dirnames.txt | sort +0nr -1 > dirNamesWithSize.txt 
```

这将在文件顶部显示最长的路径名（基于长度的值）。

我希望这有帮助。

# java - GroovyClassLoader - 将解析的类添加到类路径

> ID：10388184
> 
> 赞同：2
> 
> 时间：2012-04-30T17:50:25.990
> 
> 标签：java, groovy, classpath, classloader

我有一个库，允许客户端提供一个文本文件列表，每个文件都包含扩展 java 类 Z 的类的 groovy 代码。例如文件“A.groovy”包含

```
package com.mypkg;

public class A extends Z {

    @Override
    public void someMethod() {

        // do something A-ish

    }
} 
```

等等

该库编译其中的每一个，并且（在这种情况下）将向客户端返回一个类型为 Z 的实例。

当客户需要这样的东西时，我的问题就出现了：

```
package com.mypkg;

public class B extends A {        // extends A!

    @Override
    public void someMethod() {

        // do something B-ish instead of A-ish

    }
} 
```

其中 B 扩展了 A，并且 A 类在 B 类之前被解析。

问题是 GroovyClassLoader 似乎无法找到类 A，即使它只是解析了 A。下面是编译脚本和创建实例的代码：

```
 for (String fileName : listOfScriptFiles) {

        InputStream in = getInputStreamFromFile(fileName);

        CompilerConfiguration compConfig = new CompilerConfiguration();
        GroovyClassLoader classLoader = new GroovyClassLoader(Thread.currentThread()
            .getContextClassLoader(), compConfig);

        Z service = null;

        Class clazz = classLoader.parseClass(in);
        service = (Z) clazz.newInstance();

        return service;
    } 
```

有没有办法在运行时“注册”类 A，这样当 Groovy 尝试编译类 B 时，它就不会抱怨类 A 不存在？

**更新**

实际上，我可以通过在循环外实例化 GroovyClassLoader 来解决这个问题，该循环遍历客户端的代码列表，因此解析 A 的类加载器与解析 B 的类加载器相同。

不过，这个问题仍然存在，因为我可以设想这样一种情况，在某人的代码的一部分中他们解析 A，然后在完全不同的部分中，相同的类加载器不可用，他们解析 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:01:21.087

根据我对 Groovy 类加载器（在这方面与 Ant 和 beanshell 的类加载器的行为相似）的经验，您必须预先决定是否要使用默认的系统类加载器，在这种情况下，您需要将类路径构建到启动 Groovy 脚本的命令，或者另一方面，您仅在命令行类路径中指定 groovy jar，然后在自定义类加载器上的 Groovy 脚本的开头动态添加类。

您在问题中没有提供太多信息，但我的猜测是您在启动脚本之前将类“A”放在类路径上，然后尝试动态加载类“B”。据我所知，那是行不通的。

注意：我自己一直在试图弄清楚如何做这种事情。这似乎是可能的，但我还没有想通。

# javascript - Backbone.js 集合集合

> ID：10388199
> 
> 赞同：50
> 
> 时间：2012-04-30T17:51:13.950
> 
> 标签：javascript, backbone.js

我试图弄清楚如何使用backbone.js 制作集合集合。我对骨干很陌生。我有类似以下情况：

```
 +---------------+               +------------------+
 | Playlists     |               | Playlist         |
 |---------------|          0..* |------------------|
 |               +-------------->| Name             |
 |               |               |                  |
 |               |               |                  |
 +---------------+               +-------+----------+
                                         |
                                         |
                                         |0..*
                                         v
                                 +------------------+
                                 |  Track           |
                                 |------------------|
                                 | Name             |
                                 | Artist           |
                                 |                  |
                                 +------------------+ 
```

在代码中，这看起来类似于：

```
var trackModel = Backbone.Model.extend({
    //trackdata
});

var playlistModel = Backbone.Collection.extend({
    model : trackModel,
    url   : "playlist"
});

var playlistsModel = Backbone.Collection.extend({
    url   : "playlists",
    model : playlistModel   //This pretty sure doesn't work like I want, because there is no model attribute for collections :S
}); 
```

但是我总是在 js 控制台中收到错误消息：

```
 Uncaught TypeError: Object [object Object] has no method '_validate' 
```

当我尝试执行触发验证的函数时（如添加、获取、...）

如果我将`validate`or`_validate`函数添加到任何集合或模型中，这没有区别。

我相信这是因为backbone.js 不支持集合中的集合。还有另一种可行的方法吗？

**更新：**

这就是它现在的样子

```
var Track = Backbone.Model.extend({ 
    //trackdata 
}); 

var Tracks = Backbone.Collection.extend({ 
    model:Track; 
}); 

var Playlist = Backbone.Model.extend({ 
    //name  : ...
    tracks: new Tracks ()
}); 

var Playlists = Backbone.Collection.extend({ 
    url : "playlists", 
    model : Playlist 
}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-30T18:16:27.760

你可以通过将你`Playlist`的收藏变成模型来解决你的问题。如果您考虑一下，`Playlist`无论如何 a 可能还有其他无法在集合上设置的属性（例如名称）。

`Playlists`然后将是`Playlist`模型的集合（而不是集合），它应该可以正常工作。

```
var Track = Backbone.Model.extend({
    //trackdata
});

var Playlist = Backbone.Model.extend({
    model : Track
});

var Playlists = Backbone.Collection.extend({
    url   : "playlists",
    model : Playlist
}); 
```

# android - 适用于 Android 的自定义 3D 视图

> ID：10388204
> 
> 赞同：0
> 
> 时间：2012-04-30T17:51:37.580
> 
> 标签：android, view, gallery, custom-view

我即将开始开发一个新的 android 应用程序。该应用程序关注在大多数情况下显示图像。我想知道是否有任何很酷的自定义视图可用于更精美地呈现图像。GridView 和 Gallery 视图太简单了。一些 3D 视图会很棒。实际上，我受到 Gallery3D 应用程序的启发。. 有没有可用的免费图书馆。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:02:17.297

你知道ios封面流程吗？有一个实现相同的 Android 项目。看看[这个](https://github.com/HelgePlaschke/Android-Cover-Flow-Widget)。

# asp.net - 如何使用 XmlDocument 将 XML 数据绑定到 RadioButtonList？

> ID：10388209
> 
> 赞同：0
> 
> 时间：2012-04-30T17:51:48.063
> 
> 标签：asp.net, xml, c#-4.0

我被难住了。在使用来自数据库的数据之前，我已经动态创建了 RadioButtonLists，但不是来自 XML。我不确定我是否应该使用相同的方法，但到目前为止我没有工作。这是我所拥有的（stAddress 是我从用户那里获得的价值）：

```
XmlDocument xAddress = new XmlDocument();
xAddress.Load("http://myxmlservice/geocode?address=" + stAddress);
XmlNodeList xNodeList = xAddress.DocumentElement.SelectNodes("response");
XmlNode address = xNodeList.Item(0).SelectSingleNode("address");
XmlNode latlong = xNodeList.Item(0).SelectSingleNode("latlng");

rbMultiAdd.DataSource = xNodeList;
rbMultiAdd.DataTextField = address.InnerText;
rbMultiAdd.DataValueField = latlong.InnerText;
rbMultiAdd.DataBind(); 
```

我在 DataBind() = "DataBinding: 'System.Xml.XmlElement' 不包含名为 '330 S Valley View Blvd' 的属性上不断收到错误消息。"

330 S Valley View Blvd 是我的 XML 数据的结果之一。

由于数据是 XML，我应该这样做吗？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:50:49.740

我使用@Josh 发布的内容作为参考来解决这个问题。

```
XmlNodeList xNodeList = xAddress.DocumentElement.SelectNodes("response");

var addrs = new List<KeyValuePair<string, string>>();

foreach (XmlNode xNode in xNodeList)
{
   var xAddr = xNode["address"].InnerText;
   var xLatLng = xNode["latlng"].InnerText;
   addrs.Add(new KeyValuePair<string, string>(xAddr, xLatLng));   
}
rbMultiAdd.DataSource = addrs;
rbMultiAdd.DataTextField = "Key";
rbMultiAdd.DataValueField = "Value";
rbMultiAdd.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:10:27.307

```
 //Thanks Psykopup
    // Above code works fine for me when I Put "attributes" 

     string strSP = "USP_XML_StoredProcedure";
            cmd = new SqlCommand();
            cmd.Connection = cnn;
            cmd.CommandText = strSP;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@Id", DbType.Int32).Value = 28;

            XmlReader reader = cmd.ExecuteXmlReader();

            if (reader.Read())
            {
                xdoc.Load(reader);
            }

            XmlNodeList xNodeList = xdoc.SelectNodes("/Parent/REC");

            var source = new List<KeyValuePair<string, string>>();
            foreach (XmlNode xNode in xNodeList)
            {
                var xCode = ***xNode.Attributes***["ID"].InnerText;
                var xText = ***xNode.Attributes***["Name"].InnerText;
                source.Add(new KeyValuePair<string, string>(xCode, xText));
            }

            rbListDistrict.DataSource = source;
            rbListDistrict.DataTextField = "Value";
            rbListDistrict.DataValueField = "Key";
            rbListDistrict.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:56:18.937

`DataTextField`并且`DataValueField`两者都引用对象上的属性名称。数据绑定使用反射来查找被绑定的项目。

在这种情况下，它是一种`XmlNode`类型。其中，由于错误状态没有“330 S Valley View Blvd”类型的属性，即`InnerText`.

在这种情况下，您可能必须将列表投影到中间类型上并使用它进行绑定。有很多不同的方法可以做到这一点，这里是一种：

```
XmlNodeList xNodeList = xAddress.DocumentElement.SelectNodes("response");

var addresses = xNodeList.Select(n => new KeyValuePair<String, String>(
    n.SelectSingleNode("address"), n.SelectSingleNode("latlng")))
    .ToList();

rbMultiAdd.DataSource = addresses;
rbMultiAdd.DataTextField = "Key";
rbMultiAdd.DataValueField = "Value";
rbMultiAdd.DataBind(); 
```

# c# - 字符串和文本，以及愤怒

> ID：10388212
> 
> 赞同：-1
> 
> 时间：2012-04-30T17:51:53.963
> 
> 标签：c#, string, file-io

我正在尝试在文本文件中找到某个字符串，然后根据该字符串所说的内容创建一个文件夹，在某个地方，我刚刚停止的内容，它没有异常，它不会吐出错误，它只是停止。

我试图找到的字符串是这样设置的：

```
50.1 : Oxygas ------> = 1
50.2 : laser -------> = 0 
etc. 

foreach (string file in files)
        {
            string thepathoflife = Path.GetFullPath(file);
            //CreatetheFolder(file)
            string filetocopy = file;
            object bob = file.Clone();
            string bobby = bob.ToString();
            string location = file;
            bool b = false;
            string extension = Path.GetExtension(file);
            string thenameofdoom = Path.GetFileNameWithoutExtension(file);
            string filename = Path.GetFileName(file);
            ////bobby.Move(@"\\TEST12CVG\Public\Posts\Temporaryjunk" + filename);
            // string oldlocation = filename+extension;

            if (extension == ".pst" ||
              extension == ".tec" ||
              extension == ".pas" ||
              extension == ".snc" ||
              extension == ".cst" ||
              extension == ".xml")
            {
                b = true;
            }

            if (thenameofdoom == "Plasma" ||
              thenameofdoom == "Oxygas" ||
              thenameofdoom == "plasma" ||
              thenameofdoom == "oxygas" ||
              thenameofdoom == "Oxyfuel" ||
              thenameofdoom == "oxyfuel")
            {
                b = false;
            }

            if (b == true)
            // System.IO.File.WriteAllText(newlocation, bobby);
            {
                bool plasma = false;
                bool oxygas = false;
                bool punch = false;
                bool laser = false;
                var findLevel = 6;
                var path = @thepathoflife;
                var levels = path.Split(Path.DirectorySeparatorChar);
                var second = levels.Length > findLevel ? levels[findLevel] : null; 

     //this is where the problem starts.
 StreamReader s = new StreamReader(@thepathoflife);

                StreamReader st = new StreamReader(@thepathoflife);
                string currentLine;
                string searchString = "50.2 :";
                bool foundText = false;
                string searchStringab = "= 1";
                bool foundTextab = false;

                do
                {
                    currentLine = st.ReadLine();
                    if (currentLine != null)
                    {
                        foundText = currentLine.Contains(searchString);
                        foundTextab = currentLine.Contains(searchStringab);
                    }
                }
                while (currentLine != null && !foundText || currentLine != null && !foundTextab);

                if (foundText||foundTextab)
                {
                    plasma = true; //do something
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:00:28.093

我认为您可以通过以下方式简化事情：

```
foreach (var currentLine in File.ReadLines(thepathoflife))
{
    foundText = currentLine.Contains(searchString);
    foundTextab = currentLine.Contains(searchStringab);
    if (foundText || foundTextab)
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:00:49.703

您在同一个文件上打开了两个 StreamReader 而没有关闭第一个：

```
StreamReader s = new StreamReader(@thepathoflife);
StreamReader st = new StreamReader(@thepathoflife); 
```

最后你没有处理任何一个，[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)用来防止这样的错误：

```
using(StreamReader st = new StreamReader(@thepathoflife))
{
 do stuff;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T18:01:56.907

用 try catch 块包围你的所有代码，然后向控制台吐出异常（我假设你正在使用控制台项目）

```
try{, your code...
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        } 
```

# c++ - 组合位图 - GDI/GDI+？

> ID：10388214
> 
> 赞同：1
> 
> 时间：2012-04-30T17:51:59.707
> 
> 标签：c++, windows, bitmap, gdi+, gdi

我想知道是否有可能例如枚举所有桌面可见窗口以创建它们的位图并将所有位图合并为一个以便获得桌面的完整屏幕截图？

最有可能使用 GDI/GD+，但也欢迎使用任何外部库。首选语言 C\C++。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:52:24.527

要在 GDI 中的位图之间进行复制，请查看[BitBlt](http://msdn.microsoft.com/en-us/library/dd183370%28v=vs.85%29.aspx)。

# javascript - 在 Metro Style 应用程序中保存本地数据

> ID：10388215
> 
> 赞同：0
> 
> 时间：2012-04-30T17:52:00.420
> 
> 标签：javascript, windows, windows-runtime, visual-studio-express, winjs

我想在 Windows 8 Metro 风格应用程序中创建一个评分机制，并希望使用 Windows.Storage.ApplicationData 在本地保存该分数，因为我是 Visual Studio 和应用程序构建的新手，所以我遇到了相当困难的时间。

```
var applicationData = Windows.Storage.ApplicationData.current;

var localSettings = applicationData.localSettings;

// Create a simple setting

localSettings.values["totalPike"] = '0';

// Read data from a simple setting

var totalPike = localSettings.values["totalPike"];

if (!totalPike) {
    // No data
}
else {
    // Access data in value
}

// Delete a simple setting

localSettings.values("totalPike"); 
```

这就是 windows 处理来自 msdn 的应用程序数据的方式

```
$(document).ready(function () {

        var clicks = 99;

        $("#totalScoreTestButton").click(function () {
            totalPike = totalPike + clicks
            $("#totalScoreTest").text(totalPike);
        });
}); 
```

这是我当时用来将分数添加到总分数的功能，但是每当我关闭应用程序并重新启动它时，都不会保存分数。有人可以帮助我吗，如果可能的话，请解释一下 Metro 应用程序如何处理本地数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T16:34:34.270

例如：

```
(function () {
"use strict";

WinJS.Namespace.define("PersistenceManager", {
    stateFile: "game_state",

    saveState: function () {
        var state = {
            game_state: game_state,
            level: levelIndex,
            score: SCORE,
            playerLives: player_lives,
            compLives: comp_lives
        };

        WinJS.Application.local.writeText(PersistenceManager.stateFile, JSON.stringify(state));
    },

    loadStateAsync: function () {
        var app = WinJS.Application;

        return app.local.exists(PersistenceManager.stateFile).then(function (exists) {
            if (exists)
                return app.local.readText(PersistenceManager.stateFile).then(function (data) {
                    return JSON.parse(data);
                });
            else return null;
        });
    },

});
})(); 
```

# jquery - 使用 ajax jQuery 同源策略问题检查链接 statusCode

> ID：10388219
> 
> 赞同：0
> 
> 时间：2012-04-30T17:52:36.013
> 
> 标签：jquery, ajax

我想要对我的 ajax 代码做的就是检查请求返回的 HTML 状态代码（搜索带有链接的 404）。我编写了以下代码：

```
$.ajax({
    url: link,
    statusCode: {
        404: function() {
            alert("Not found");
        },
        200: function() {
            alert("Found!");
        }
    }
}); 
```

其中“链接”是指向另一个站点上的图像 url 的链接。我知道由于相同的来源政策，我不能真正向其他网站发出请求，但是如果我只想检查返回状态，是否有一些例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:05:31.040

听起来您正在尝试动态确定是否加载了图像资源。

你应该能够做这样的事情：

[http://jsfiddle.net/GL9eU/](http://jsfiddle.net/GL9eU/)

基本上，使用 jQuery 加载和错误处理程序来确定是否加载了某样东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:07:30.870

当你试图做你不应该做的事情时，我喜欢使用的一种策略是找到它已经适用于浏览器的地方，然后欺骗它为我工作。在跨域下载图片方面，浏览器已经在`<img>`标签中实现了这个功能。

图像标签支持加载的 DOM 事件，如果图像加载成功，您可以使用该事件进行捕获。

缺点是您并不总是知道返回的图像是实际图像还是重定向图像，因为服务器现在配置为允许图像的热链接。您也没有迹象表明请求是否失败。

后一个缺点可以通过一个计时器来克服，虽然它不像你想要的那么强大，但可能仍然可以根据你的应用程序工作。

这是我编写的一些示例（即未经测试的）代码，以给您一个想法...

```
function isImagePathValid(src, callback) {
   // Setup a timer to catch if it never loads
   var fallback = setTimeout(function() {
       callback(false);
   }, 5000);  // Wait 5 seconds

   // Create a temp <img> tag and wait for it to load
   $('<img style="position:absolute; top:-9999; left:-9999;" src="' + src + '" />')
      .appendTo('body')
      .load(function() {
          clearTimeout(fallback);
          callback(true);
      });
} 
```

# magento - 我的实体的预加载属性

> ID：10388223
> 
> 赞同：0
> 
> 时间：2012-04-30T17:53:00.487
> 
> 标签：magento

伙计们。

我如何预加载某些实体的 eav 属性？喜欢：

想要以编程方式预加载客户的属性？或者以编程方式我的产品目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:04:40.463

“预加载”是什么意思？您只需调用 loadByCode 即可轻松加载任何属性：

```
$attribute = Mage::getModel('eav/entity_attribute')->loadByCode('catalog_product', '%attribute_code%') 
```

或者，您可以使用集合加载*所有*属性：

```
$entityType          = Mage::getModel('eav/entity_type')->loadByCode('catalog_product');
$attributeCollection = Mage::getModel('eav/entity_attribute')->getCollection()->setEntityTypeFilter($entityType); 
```

magento 中有 8 种实体类型：

1.  顾客
2.  客户地址
3.  目录类别
4.  目录产品
5.  命令
6.  发票
7.  信用备忘录
8.  运输

# jquery - 您如何访问选项卡内的锚点

> ID：10388232
> 
> 赞同：0
> 
> 时间：2012-04-30T17:53:52.183
> 
> 标签：jquery

我们有一个无序列表，在点击事件中，我们需要访问选项卡内的特定锚点。选项卡内有 7-8 个锚点。

```
var $tabs = $('#tabbed-content').tabs(); // first tab selected

$('.a-credit').click(function() { // bind click event to link
$tabs.tabs('select', 1); // switch to 2nd tab
return false;
});

  <div id="tabbed-content">
            <ul>
              <li><a href="#deadlines">Payment Deadlines</a></li>
              <li><a href="#methods">Payment Methods</a></li>
              <li><a href="#installments">Pay In Installments</a></li>
            </ul>

<div id="methods">
  <p><a name="1"></a>Content 1</p>
   <p><a name="2"></a>Content 2</p>
   <p><a name="3"></a>Content 3</p>
  </div> 
```

如果您单击无序列表链接，它应该激活选项卡 #2 并滚动到名称。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:00:53.507

```
$(a).click(function(){
    var anchor = $(this).attr("href");
}) 
```

您可以使用 $(this)`<li>`在您的`$(a-credit)`click 函数中引用当前单击的内容。您可以使用类似的东西`$(this).attr("href");`来获取当前的参考目标。

编辑（更新问题后）：使用它滚动到您的元素，在您的点击事件内部

```
$('html, body').animate({
    scrollTop: $($(this).attr('href')).offset().top
}, 2000); 
```

# python - 使用 Boost.Python 包装和传递 HWND

> ID：10388233
> 
> 赞同：2
> 
> 时间：2012-04-30T17:53:52.643
> 
> 标签：python, boost, hwnd, win32gui, py++

我为 C++ 遗留类创建了一个 Boost.Python 包装器（使用 Py++），该类在其构造函数中采用 HWND 窗口句柄。但是，当我尝试使用它时将模块导出到 python 后，我收到类型不匹配错误。

这是我要包装的 C++ 类：

```
// File Foo.hpp
//
#include "Windows.h"
class Foo
{
public:
    Foo( const HWND window ){}

    virtual ~Foo(){}

    virtual int Bar( int num ) { return num; }
}; 
```

Py++ 输出：

```
INFO Parsing source file "foo.hpp" ...
INFO gccxml cmd: ""c:\Program Files (x86)\gccxml 0.9\bin\gccxml.exe"  -I"." "foo.hpp" -fxml="d:\temp\tmpdng3ts.xml""
INFO GCCXML version - 0.9( 1.127 )

INFO: file "generated_wrapper.cpp" - updated( 0.001607 seconds ) 
```

生成的包装器：

```
#include "boost/python.hpp"

#include "foo.hpp"

namespace bp = boost::python;

struct Foo_wrapper : Foo, bp::wrapper< Foo > {

    Foo_wrapper(::HWND const window )
    : Foo( window )
      , bp::wrapper< Foo >(){
        // constructor

    }

    virtual int Bar( int num ) {
        if( bp::override func_Bar = this->get_override( "Bar" ) )
            return func_Bar( num );
        else{
            return this->Foo::Bar( num );
        }
    }

    int default_Bar( int num ) {
        return Foo::Bar( num );
    }

};

BOOST_PYTHON_MODULE(MyWrapper){
    { //::Foo
        typedef bp::class_< Foo_wrapper > Foo_exposer_t;
        Foo_exposer_t Foo_exposer = Foo_exposer_t( "Foo", bp::init< HWND__ *>(( bp::arg("window") )) );
        bp::scope Foo_scope( Foo_exposer );
        bp::implicitly_convertible< const HWND, Foo >();
        { //::Foo::Bar

            typedef int ( ::Foo::*Bar_function_type )( int ) ;
            typedef int ( Foo_wrapper::*default_Bar_function_type )( int ) ;

            Foo_exposer.def( 
                "Bar"
                , Bar_function_type(&::Foo::Bar)
                , default_Bar_function_type(&Foo_wrapper::default_Bar)
                , ( bp::arg("num") ) );

        }
    }
} 
```

在 python 中，我得到不匹配错误：

```
>>> import MyWrapper
>>> import win32gui
>>> hwnd = win32gui.GetDesktopWindow()
>>> foo = MyWrapper.Foo(hwnd)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
Boost.Python.ArgumentError: Python argument types in
    Foo.__init__(Foo, int)
did not match C++ signature:
    __init__(struct _object *, struct HWND__ * window)
>>> 
```

如何纠正这个问题，以便能够将 Python 中的窗口句柄（来自 win32gui）传递给 C++ 类，并与之交互？

环境：Visual Studio 2008、Boost 1.44、gcc-xml 0.9.0、py++ 1.0.0、pygccxml 1.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:45:18.313

您不能假设 boost python 生成的包装类型将与另一个工具使用的包装过程兼容。在这种情况下，win32 gui 是使用 SWIG 构建的，它可以引入额外的 C、C++ 和 python 代码层（取决于要包装的类型）以生成正确的代码。

[您可以在 pywin32 mercurial 存储库](http://pywin32.hg.sourceforge.net/hgweb/pywin32/pywin32/file/bb81eda78987/win32/src/win32gui.i)中查看`GetDesktopWindow`（以及许多其他功能）的 SWIG 接口文件

# c# - RESTful WCF 服务认证

> ID：10388235
> 
> 赞同：2
> 
> 时间：2012-04-30T17:54:02.780
> 
> 标签：c#, wcf, rest, authentication, pki

我有一个应用程序公开服务，该服务由 Web 应用程序通过 Jquery POST 和其他应用程序（iPad、Android 等）使用。我必须创建一个高度安全但仍然足够快的身份验证系统。

我想制作一个令牌，该令牌将在登录时传递给应用程序，并将在特定时间（比如 30 分钟）发布后使用，它应该刷新自身并且不会使会话过期。所以我想制作一个令牌发送到服务并生成令牌。它会接受

1.  用户身份

2.  密码（均使用公钥加密）

3.  应用 ID

服务器将通过私钥解密请求并生成一个在特定时间有效的令牌。现在因为这将高度依赖于私钥（这将是相同的，因此系统内的某个人可以泄漏它并滥用它）所以我希望在特定时间（比如 2 小时）后刷新私钥。

问题 -

1.  如何刷新私钥并确保当前发行的令牌不会被拒绝。

2.  有没有更好的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T00:24:25.713

**有更好的方法吗？**

是的，它被称为 SSL/HTTPS。如果您已经在使用 HTTPS，则不需要任何这种加密魔法。如果您不使用 HTTPS，那么您在设计上就已经不安全，您想出的任何办法都无法解决重新发明 SSL 的问题。

**那么如果传输是安全的（HTTPS）你应该怎么做**

1.  客户端以纯文本形式发送用户名+密码进行身份验证请求。
2.  服务器根据与帐户一起存储的（希望）散列密码验证用户名 + 密码对。
3.  服务器使用静态 AES 密钥以令牌（加密的帐户 ID、到期时间等）进行响应。
4.  客户端将令牌用于所有经过身份验证的请求。

简单的。

**你可以做的一件事...**

为了防止在非安全设备上使用的凭据丢失，您应该从 Google 和其他人那里获取一个页面。与其让用户输入他们的网站密码，不如让他们访问并登录到您的网络服务器。从那里他们单击“为设备生成访问令牌”。生成一个唯一的数据字符串（20 个或更多字符）并记录在他们的帐户中。然后，用户可以从您的网站撤销此“备用密码”。

**我怎样才能使它更安全？**

你真的不能做得更好，这就是为什么......

假设攻击者可以访问您的私钥。然后，攻击者可以替换您的服务器或扮演中间人，同时窃取用户名和密码。

为了防止这种情况发生，您设计了一些 PKI 交换来发送由服务器给您的公钥加密的密码。作为中间人，我可以简单地给你我自己的公钥并访问用户名和密码，然后如果我选择，将其转发到真实服务器。

*- 或者 -*

为了防止这种情况发生，您可以使用一些盐 + 密码散列，这些散列将被发送到服务器以代替明文密码。我作为一个中间人可以简单地给你一个盐的固定值，然后为这个盐值预先计算一个完整的彩虹表。现在我再次以明文形式获得了每个人的密码（大多数情况下）。

*- 或者 -*

为了防止这种情况发生，您使用 PKI 建立一些秘密会话密钥，然后对每个通信进行签名和加密。好吧，哎呀...听起来很熟悉...请参阅[Wikipedia 上的 SSL](http://en.wikipedia.org/wiki/Transport_Layer_Security)。意识到使 SSL 安全的*唯一*因素是保护它的私钥。一旦私钥丢失，所有安全和信任都将丢失。

**最后注意事项：**

如果无法保护某些加密密钥，您就无法建立安全的通信。

您还应该知道，在 SSL 的软件实现（如 OpenSSL）上花费了数千个工时，并且他们不断地在其实现中发现漏洞。您自己实现它并像 IIS 或 OpenSSL 一样安全的希望几乎是零。那不是你的Digg，那只是现实，我也做不到，我只知道甚至不尝试。

最后，我的最后建议是关于您的陈述：“系统内部的某个人可以泄漏它并滥用它”。这是你真正的问题。解决这个问题，其他一切都会容易得多。保护服务器环境应该是您的首要任务。您的第二个优先事项应该是在您未能做到第一个时尽量减少对您的客户的影响。

**一些有用的链接：**

*   [如何使用一组特定的字符生成密码。](http://csharptest.net/1074/how-to-generate-password-using-a-specific-set-of-characters/)
*   [如何存储加盐密码哈希的另一个示例。](http://csharptest.net/470/another-example-of-how-to-store-a-salted-password-hash/)

# c# - 使用 VirtualAlloc 从字节数组运行程序？

> ID：10388244
> 
> 赞同：4
> 
> 时间：2012-04-30T17:54:13.200
> 
> 标签：c#, runtime, .net, virtualalloc

我正在使用 C# 开发应用程序 SFX / Protector，我希望从字节数组执行受保护的程序集，而不是将其写入硬盘，以便逆向工程更加困难。

我在字节数组中有一个程序（它有一个有效的入口点），我想执行它。我在这个网站上发现了一个类似的问题，我该怎么做，我知道这可以使用下面的代码片段来完成，但是有人可以指导我如何使用这个从字节数组运行程序吗？

从技术上讲，他下面的代码让我这样做：

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;

namespace DynamicX86
{
    class Program
    {
        const uint PAGE_EXECUTE_READWRITE = 0x40;
        const uint MEM_COMMIT = 0x1000;

        [DllImport("kernel32.dll", SetLastError = true)]
        static extern IntPtr VirtualAlloc(IntPtr lpAddress, uint dwSize, uint flAllocationType, uint flProtect);

        private delegate int IntReturner();

        static void Main(string[] args)
        {
            List<byte> bodyBuilder = new List<byte>();
            bodyBuilder.Add(0xb8);
            bodyBuilder.AddRange(BitConverter.GetBytes(42));
            bodyBuilder.Add(0xc3);
            byte[] body = bodyBuilder.ToArray();
            IntPtr buf = VirtualAlloc(IntPtr.Zero, (uint)body.Length, MEM_COMMIT, PAGE_EXECUTE_READWRITE);
            Marshal.Copy(body, 0, buf, body.Length);

            IntReturner ptr = (IntReturner)Marshal.GetDelegateForFunctionPointer(buf, typeof(IntReturner));
            Console.WriteLine(ptr());
        }
    }
} 
```

我如何实现这个答案以从字节数组运行程序。我无法完全理解我可以用这段代码做什么。请帮忙

这是我找到这个答案的链接： [Is it possible to perform an x​​86 assembly sequence from within C#?](https://stackoverflow.com/questions/959087/is-it-possible-to-execute-an-x86-assembly-sequence-from-within-c/959144#959144)

Anyhelp将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T21:44:48.873

什么是有效的入口点，它的签名是什么？你如何得到这些字节？你会生成 IL 吗？如果你这样做，也许简单地这样做可能会更[容易](http://www.codeproject.com/Articles/18677/Dynamic-Assemblies-using-Reflection-Emit-Part-II-o)。

上面的代码试图做的是分配非托管内存，用 x86 指令填充它，然后让 .NET 从这个“函数指针”创建一个委托并执行它——这与你想要的不同。

# android - 如何通过wifi将字符串从Android发送到PC

> ID：10388250
> 
> 赞同：11
> 
> 时间：2012-04-30T17:54:43.883
> 
> 标签：android, android-wifi, onkeypress

您好，我正在开发一个 android 应用程序，该应用程序需要通过 wifi 向 PC 发送一个字符串，从而模拟键盘按键。有什么想法可以完成这项任务吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-30T18:54:31.670

您必须在 PC 上编写服务器程序并使用 ServerSocket 接受来自 Android 手机的连接并为使用常规套接字（与 PC 端具有相同端口）编写线程，然后使用 DataInputStream 和数据输出流。您还需要打开 AndroidManifest.xml 的权限。

对于权限使用这个：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

对于代码，这里有一个小例子：

服务器：

```
String msg_received;

ServerSocket socket = new ServerSocket(1755);
Socket clientSocket = socket.accept();       //This is blocking. It will wait.
DataInputStream DIS = new DataInputStream(clientSocket.getInputStream());
msg_received = DIS.readUTF();
clientSocket.close();
socket.close(); 
```

客户：

```
Socket socket = new Socket("192.168.0.1",1755);
DataOutputStream DOS = new DataOutputStream(socket.getOutputStream());
DOS.writeUTF("HELLO_WORLD");
socket.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:59:32.913

1.  沟通部分相当容易。在 PC 上打开 TCP 服务器，并让 Android 设备上的 TCP 客户端向其发送字符串/命令。可以在[此处](https://www.google.co.il/search?sourceid=chrome&ie=UTF-8&q=java%20tcp%20client%20server)找到一个不错的教程，但您需要根据需要对其进行修改。

    请注意，使用 TCP 时，不应从主线程完成，而应从后台线程完成。一个很好的方法是[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)（当你到达那里时）。

2.  另一部分是键盘模拟。为此，您需要使用[java.awt.Robot](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-28T06:50:31.423

根据您的 Web 服务器设计，您可以使用 restful 通信或soap，然后通过 HTTP 协议将数据发送到您的 Web 服务并从中获得所需的答案。我已经为soap方法编写了一个asp web服务，我将在下面解释。

以下是肥皂标准的 java 示例代码：

```
 private static String NameSpace = "http://tempuri.org/";
    //below url must be your service url, mine is a local one
    private static String URL = "http://192.168.2.213/hintsservice/service.asmx";
    private static String SOAP_ACTION = "http://tempuri.org/";

    public static String Invoke(String s) {
    //respond string from server
    String resTxt = "";
    //the name of your web service method
    final String webMethName = "Hint";
     // Create request
    SoapObject request = new SoapObject(NameSpace, webMethName);
    // Property which holds input parameters
    PropertyInfo PI = new PropertyInfo();
    // Set Name
    PI.setName("s");
    // Set Value
    PI.setValue(s);
    // Set dataType
    PI.setType(String.class);
    // Add the property to request object
    request.addProperty(PI);
    // Create envelope
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    //Set envelope as dotNet
    envelope.dotNet = true;
    // Set output SOAP object
    envelope.setOutputSoapObject(request);
    // Create HTTP call object
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
        // Invoke web servi.ce
        androidHttpTransport.call(SOAP_ACTION + webMethName, envelope);
        // Get the response
        SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
        // Assign it to resTxt variable static variable
        resTxt = response.toString();
    }catch (Exception e) {
        //Print error
        e.printStackTrace();
        //Assign error message to resTxt
        resTxt = "Error occured";
    }
     //Return resTxt to calling object
    return resTxt;
} 
```

现在您只需要从适当的活动中调用此方法，然后让您的 Web 服务完成其余的工作。以下是 C# 语言的示例 Web 服务：

```
 [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]

    public class Service : System.Web.Services.WebService
    {
        public Service () {
            //Uncomment the following line if using designed components 
            //InitializeComponent(); 
            [WebMethod]
            public string Hint(string s) {
                string response = string.Empty;
                //todo: produce response
                return response;
            }
       }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T17:57:29.963

我无法为您提供完整的代码，但至少可以引导您朝着正确的方向前进。为此，您需要使用[Sockets](http://developer.android.com/reference/java/net/Socket.html)。现在，如果您在 Internet 上搜索，您会发现很多与此主题相关的文章和示例，都指定了 Android。例如[this](http://android-er.blogspot.se/2011/01/simple-communication-using.html)和[this](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T17:58:34.723

您可能必须为 PC 编写某种程序，作为 Android 应用程序通过 Socket 或 Stream 发送到的“服务器”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-22T14:43:53.557

一个很好的实用且简单的方法，有很多社区，是使用 RabbitMQ。我将它用于我的项目并发送字符串 [https://www.rabbitmq.com/getstarted.html](https://www.rabbitmq.com/getstarted.html)

一旦你学习了基础知识，你将能够将项目扩展到更多的东西。原则上，教程 1 足以发送和接收字符串。

按照服务器安装说明打开请求的端口或使用 docker。

如果你想在 android-server 中获得更多 RabbitMQ 的东西，可以问我。

# perl - 从散列数组的 Perl 散列中删除值

> ID：10388252
> 
> 赞同：0
> 
> 时间：2012-04-30T17:54:49.683
> 
> 标签：perl, perl-data-structures

我正在尝试从使用以下代码创建的哈希数组中删除值：

```
while ((my $Genotype1, my $Fitness1) = each (%Normalisedfithash)) {
  while ((my $Parent1A, my $TallyP1) = each(%P1Tallyhash)) {
    my $ParentTally = 0;
    my $SecondParent = {
      Parent2 => $Parent1A,
      Tally => $ParentTally,
    };
    push @{ $StoredParentshash{$Genotype1}}, $SecondParent; 
```

我一直在尝试从零`%StoredParentshash`处删除值。`Tally`（我有进一步的更新代码`Tally`，但有些没有更新，我希望将它们从哈希中删除）。

我写了以下内容：

```
for my $Parent (keys %StoredParentshash) {
  my $aref1 = $StoredParentshash{$Parent};
  for my $hashref1 (@$aref1) {
    my $Tally =  $hashref1->{'Tally'};
    if ($Tally == 0){
      delete $hashref1->{'Tally'};
      delete $hashref1->{'Parent2'};
    }
  }
} 
```

这段代码有点删除数据，但是当我使用`Data::Dumper`结构时，我得到的结果如下所示：

```
 '7412' => [
        {},
        {
          'Tally' => 1,
          'Parent2' => '2136'
        },
        {},
        {},
        {}, 
```

如何完全删除`Tally`零而不是留下的键`{}`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:14:14.597

您的数据如下所示：

```
my %StoredParentshash = (
   key1 => [
      {
         Tally => ...,
         ...
      },
      ...
   ],
   ...
); 
```

并且你想删除一些数组元素。一般来说，我使用`grep`它。

```
@array = grep keep_condition(), @array; 
```

这里也不例外。

```
for my $array (values(%StoredParentshash)) {
   @$array = grep $_->{Tally}, @$array;
} 
```

并删除任何现在为空的数组：

```
for my $key (keys(%StoredParentshash)) {
   delete $StoredParentshash{$key} if !@{ $StoredParentshash{$key} };
} 
```

或组合：

```
for my $key (keys(%StoredParentshash)) {
   my $array = $StoredParentshash{$key};
   @$array = grep $_->{Tally}, @$array;
   delete $StoredParentshash{$key} if !@$array;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:18:44.407

您所说的生成数据结构的代码有问题，因为它缺少两个右括号。

您必须使用平衡的`{`..`}`或转储显示您的实际代码，`%StoredParentshash`然后我们才能为您提供适当的帮助。

如果`Tally`和`Parent2`是`SecondParent`散列中唯一的键，那么你应该写类似

```
for my $children (values %StoredParentshash) {
  @$children = grep $_->{Tally} != 0, @$children;
} 
```

# java - 客户端 - 服务器 ObjectInputStream 错误

> ID：10388253
> 
> 赞同：1
> 
> 时间：2012-04-30T17:54:51.060
> 
> 标签：java, client-server, objectinputstream

我的代码是这个

```
try
    {
        //Connect to the login server
        socket = new Socket(hostName , 15000);
        out = new ObjectOutputStream(socket.getOutputStream());
        input = new ObjectInputStream(socket.getInputStream());

                    .. //perform the login , if the login succeed make answ=1;
    }
    catch (UnknownHostException e) {
        System.err.println("Unknown host: " + hostName);
        StatusLabel.setText("Unknown host");
    }
    catch (ConnectException e) {
        System.err.println("Connection refused by host: " + hostName);
        StatusLabel.setText("Connection refused by host, server is down.");
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    finally {
        try 
        {
            //Finaly closing the connection
            socket.close();
            System.out.flush();
            System.out.println("Socket Closed");
                            //closing the output and input stream
            out.close();
            input.close();
            setVisible(false); //closing the window
        }
        catch (IOException e ) {
            System.out.println("Couldn't close socket");
        }
    }
    if(answ==1) //if the login suceed start the class for the game
    {
        Gumoku_Graphics g = new Gumoku_Graphics();
        g.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        g.Play();
    } 
```

在 Gumoku_Graphics() 我调用这个类来执行与游戏服务器的连接

```
Game n = new Game();
status=n.Connection(); 
```

这是

```
 public int Connection()  
{
    try {
        socket = new Socket(hostName, 15432);
        System.out.println("socket ok\n");

        out = new ObjectOutputStream(socket.getOutputStream());
        System.out.println("out ok\n");

        input = new ObjectInputStream(socket.getInputStream());
        System.out.println("socket,out,input ok\n");
        return 1;
    }

    catch (UnknownHostException e) {
        System.err.println("Unknown host: " + hostName);
        return 0;
    }
    catch (ConnectException e) {
        System.err.println("Connection refused by host: " + hostName);
        return 0;
    }
    catch (IOException e) {
        e.printStackTrace();
        return 0;
    }
} 
```

并且每次它停止在“input = new ObjectInputStream(socket.getInputStream());” 它不能做到这一点，它卡在那里。它打印“socket ok”，“out ok”，然后卡在那里。有什么问题？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:05:05.613

从[ObjectInputStream 文档](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html#ObjectInputStream%28java.io.InputStream%29)：

> 创建一个从指定 InputStream 读取的 ObjectInputStream。从流中读取序列化流标头并进行验证。此构造函数将阻塞，直到相应的 ObjectOutputStream 已写入并刷新标头。

正如引用的那样，调用将阻塞，直到可以读取标题。在此调用可以继续之前，您需要有一些数据从套接字到达。

# jquery - 将所有子类应用于父元素

> ID：10388254
> 
> 赞同：0
> 
> 时间：2012-04-30T17:54:59.933
> 
> 标签：jquery, html, dom, jquery-selectors

我目前有以下标记：

```
<div class="foo">
  <ul class="bar">
    <li class="a"></li>
    <li class="b"></li>
  </ul>
</div>

<div class="foo">
  <ul class="bar">
    <li class="c"></li>
    <li class="d"></li>
  </ul>
</div> 
```

而且我需要完成以下工作，方法是从子 li 获取所有类并将它们仅应用于特定的 .foo：

```
<div class="foo a b">
  <ul class="bar">
    <li class="a"></li>
    <li class="b"></li>
  </ul>
</div>

<div class="foo c d">
  <ul class="bar">
    <li class="c"></li>
    <li class="d"></li>
  </ul>
</div> 
```

到目前为止，我有以下内容，但它只是在获得第一个 li 类的阶段，它将它应用于所有 .foo div，而不是每个特定的 div。

```
$(".foo").addClass($('.bar li').attr('class')); 
```

任何指向正确方向的指针都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:59:29.577

您需要*遍历*`.foo`元素，然后获取它们各自后代的类：

```
$('.foo').each(function() {
    $(this).addClass($(this).find('.bar li').map(function() {
        return this.className;
    }).get().join(' '));
}); 
```

**参考**：[`each`](http://api.jquery.com/each/)，，，[`map`](http://api.jquery.com/map/)_[`get`](http://api.jquery.com/get/)

`.foo`由于查找原因，另一种虽然较慢的方法是：

```
$('.bar li').each(function() {
    $(this).closest('.foo').addClass(this.className);
}); 
```

**参考**：[`closest`](http://api.jquery.com/closest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:09:55.860

这里有一些代码可以完成您需要做的事情：

```
$('.foo').each(function(i, elem) {
    get_child_classes(this,elem);
});

//the function you need
function get_child_classes (parent,current){
    $(current).each(function(i, elem) {
        $(elem).children().each(function(j, elem1){
            $(parent).addClass($(elem1).attr('class'));
            get_child_classes (parent, elem1);
        });
    });
} 
```

在这里查看小提琴：http: [//jsfiddle.net/Zpx8R/](http://jsfiddle.net/Zpx8R/) 此代码应该适用于所有元素，无论它是什么类型的 HTML 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:10:37.883

```
 $('.foo').addClass(function() {
    var cls = '';
    $('li', this).each(function() {
        cls += this.className.concat(' ');
    });
    return cls;
  }); 
```

[演示](http://jsfiddle.net/QStkd/14/)

# java - 我如何在 tictactoe 游戏中执行 check_game_state 方法？

> ID：10388255
> 
> 赞同：2
> 
> 时间：2012-04-30T17:55:05.440
> 
> 标签：java, tic-tac-toe

我想了解游戏是否已完成或绘制或仍然可以玩。但我想用动态代码来做。

例如，我对 3*3 tictactoe 游戏进行静态处理，如下所示：

```
private static boolean check_game_state(char[] board)
{
    if (    (board[0]==cSymbol && board[1]==cSymbol && board[2]==cSymbol) 
         || (board[3]==cSymbol && board[4]==cSymbol && board[5]==cSymbol) 
         || (board[6]==cSymbol && board[7]==cSymbol && board[8]==cSymbol)
         || (board[0]==cSymbol && board[3]==cSymbol && board[6]==(cSymbol))
         || (board[1]==(cSymbol) && board[4]==(cSymbol) && board[7]==(cSymbol))
         || (board[2]==(cSymbol) && board[5]==(cSymbol) && board[8]==(cSymbol))
         || (board[0]==(cSymbol) && board[4]==(cSymbol) && board[8]==(cSymbol))
         || (board[2]==(cSymbol) && board[4]==(cSymbol) && board[6]==(cSymbol)))
    {
        if (cSymbol == 'X')
        {
            state = 5;  //player 1 win
        }
        else if (cSymbol == 'O')
        {
            state = 4; player 2 win
        } 
    }
} 
```

我想为 4*4 或 5*5 或更高的板动态设置它。但是我该怎么做呢？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:58:52.413

您需要循环访问元素，而不是对索引进行硬编码。例如，而不是

```
boolean test = (board[0]==cSymbol && board[1]==cSymbol && board[2]==cSymbol); 
```

你会做类似的事情

```
boolean test = true;
for (int i = 0; i < length; ++i) {
  test = test && board[i] == cSymbol ;
} 
```

棋盘的大小在哪里`length`（例如 5、6），`board.length` 与

`test`只有当所有元素都等于 时，它才会设置为 true `cSymbol`，`false`否则。

更新：我给你行的计算；您需要将其应用于*列*（提示：计算索引`i+j*length`）、*主对角线*（索引：）`i*length+i`和*子对角线*（索引：） `i*length+(length-1-i)`。索引`i*length + j`转换为第`i`th 行`j`第 th 列：

```
private static boolean check_game_state(char[] board, int length) 
{ 
  bool row = false;
  for (int i = 0; i < length; ++i) {
    bool innerRow = true;
    for (int j = 0; j < length; ++j) { // calculate the ith row
      innerRow = innerRow && board[i*length+j] == cSymbol;
    }
    row = row || innerRow;
  }
  if (row) 
  { 
    // somebody won...
  } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:59:13.473

你不能硬编码你的检查条件。您将必须有`3`单独的案例：

1.  检查行
2.  检查列
3.  检查对角线

`0`在从到`N`（游戏大小）的所有情况下，您都可以使用简单的循环。我会说，跟踪正在填充的当前单元格。说是`x,y`。现在使用这个坐标并检查那个特定的`row`和`column`。如果`x == y`然后它在前对角线上，那么你检查它。同样检查反向对角线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:13:27.290

如果你不想硬编码，你应该实现一些搜索获胜位置等的算法。看看[http://www.codeproject.com/Articles/43622/Solve-Tic-Tac-Toe-with-以-MiniMax-算法](http://www.codeproject.com/Articles/43622/Solve-Tic-Tac-Toe-with-the-MiniMax-algorithm)为例。

# windows - findstr 在 Windows 批处理脚本中不返回任何内容

> ID：10388256
> 
> 赞同：1
> 
> 时间：2012-04-30T17:55:08.720
> 
> 标签：windows, batch-file, findstr

在 windows cmd 中，临时目录设置为

```
 C:\spec>echo %temp%
 C:\Users\mahmood\AppData\Local\Temp 
```

还有一个文件 %temp%\specdev.txt 包含

```
 C:\spec>type %temp%\specdev.txt
 c:\cpu 
```

现在当我执行这个命令

```
findstr -r "^[a-zA-Z]:$" %temp%\specdev.txt >nul 2>&1 
```

它不返回任何东西！

```
C:\spec>findstr -r "^[a-zA-Z]:$" %temp%\specdev.txt >nul 2>&1

C:\spec> 
```

问题是什么？？你能解释一下这个命令是做什么的吗？它是批处理脚本的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:18:42.997

您看不到任何结果，因为所有控制台输出都重定向到 NUL：命令的最后一部分`>nul`将标准输出重定向到 NUL，`2>&1`并将错误输出重定向到标准输出（因此是 NUL）。

因为此命令是脚本的一部分，所以并不意味着它没有用：FINDSTR 在找到匹配项时将全局环境变量设置`%ERRORLEVEL%`为 0，在未找到匹配项时将其设置为 1。因此，脚本可以将所有输出发送到 NUL（而不是阻塞用户屏幕）并检查`%ERRORLEVEL%`以验证结果。

About the pattern this command is searching for, `"^[a-zA-Z]:$"` means that it searches for a line that only contains a single letter from "a" to "z" (uppercase and lowercase) and ends with a colon ":". Thus, the file `%temp%\specdev.txt` you described will not match the expression.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:04:00.277

试试这个代码：

```
findstr -r "^[a-zA-Z]*$" %temp%\specdev.txt >nul 2>&1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:06:55.223

问题是字符串与正则表达式不匹配，正则表达式匹配只包含一个字母后跟`':'`字符的行。

所以现在的问题是，你真正想要匹配什么模式？也许你想要：

```
"^[a-zA-Z]:" 
```

这将匹配以字母开头后跟 a 的行`':'`（但随后可以在该行后面有其他字符）。但我怀疑你想要更复杂的东西。

# java - 使用 JAXB 和 Spring-MVC 进行 XML 绑定

> ID：10388261
> 
> 赞同：3
> 
> 时间：2012-04-30T17:55:28.270
> 
> 标签：java, spring-mvc, annotations, jaxb, xsd

以下 xml 在服务器上的存储库中：

```
 <author xmlns="http://www..." xmlns:atom="http://www.w3.org/2005/atom">
     <name>S. Crocker</name>
     <address>None</address>
     <affiliation></affiliation>
     <email>None</email>
   </author> 
```

我的模型课：

```
 @XmlRootElement(name = "author", namespace="http://www...")
  @XmlAccessorType(XmlAccessType.FIELD)
  public class Author {

    @XmlAttribute(name="author")
    private String author;
    @XmlElement(name="name")
private String name;
    @XmlElement(name="address")
private String address;
    @XmlElement(name="affiliation")
private String affiliation;
    @XmlElement(name="email")
    private String email;

    public String getAuthor() {
    return author;
}
public void setAuthor(String author) {
    this.author = author;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getAffiliation() {
    return affiliation;
}
public void setAffiliation(String affiliation) {
    this.affiliation = affiliation;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}

 } 
```

根据我看到的教程，我应该将@XmlSchema 用于 package-info.java 我创建了一个类 package-info.java 但我不知道如何处理它。

实际上我的问题是我不知道如何使用 corect 注释将 xml 与模型类绑定。整个故事是我试图从存储库中检索 XML 文档，但我采用空值。我在这里看到的问题是：[JAXB：如何将元素与命名空间绑定](https://stackoverflow.com/questions/8038821/jaxb-how-to-bind-element-with-namespace) 是我没有使用正确的注释。有谁知道哪些是正确的注释以及我应该如何使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T19:02:08.390

以下是如何映射此用例的示例：

**包信息**

我将使用包级别`@XmlSchema`注释来指定命名空间限定。将 指定`namespace`为您的目标命名空间 ( `"http://www.../ckp"`)。您希望将此命名空间应用于所有 XML 元素，因此请指定`elementFormDefault=XmlNsForm.QUALIFIED`. 用于`xmlns`将前缀与命名空间 URI 相关联。

```
@XmlSchema(
    namespace="http://www.../ckp",
    elementFormDefault=XmlNsForm.QUALIFIED,
    xmlns={
        @XmlNs(prefix="", namespaceURI="http://www.../ckp"),
        @XmlNs(prefix="atom", namespaceURI="http://www.w3.org/2005/atom"),
    }
)
package forum10388261;

import javax.xml.bind.annotation.*; 
```

**作者**

下面是您的`Author`班级的样子。我删除了不必要的注释（相当于默认映射的注释）。

```
package forum10388261;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Author {

    @XmlAttribute
    private String author;
    private String name;
    private String address;
    private String affiliation;
    private String email;

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String author) {
        this.author = author;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getAffiliation() {
        return affiliation;
    }

    public void setAffiliation(String affiliation) {
        this.affiliation = affiliation;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

} 
```

**演示**

```
package forum10388261;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Author.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10388261/input.xml");
        Author author = (Author) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(author, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<author xmlns:atom="http://www.w3.org/2005/atom" xmlns="http://www.../ckp">
    <name>S. Crocker</name>
    <address>None</address>
    <affiliation></affiliation>
    <email>None</email>
</author> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)
*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:15:08.110

我从来不需要使用`namespace`参数 on `@XmlRootElement`，试着把它关掉；此外，您已`@XmlAttribute`指定 for `author`，但`author`除了标签名称之外，您的示例中没有其他内容。

至于：

> 实际上我的问题是我不知道如何使用 corect 注释将 xml 与模型类绑定。

在您的弹簧配置中，您可以执行以下操作：

```
<oxm:jaxb2-marshaller id="jaxb2Marshaller">
    <oxm:class-to-be-bound name="com.mycompany.Author"/>
    <!-- ... -->
</oxm:jaxb2-marshaller> 
```

然后直接注入`jaxb2Marshaller`或使用`MessageConverter`这样的：

```
<bean id="xmlConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
    <constructor-arg>
        <ref bean="jaxb2Marshaller"/>
    </constructor-arg>
    <property name="supportedMediaTypes">
        <list>
            <bean class="org.springframework.http.MediaType">
                <constructor-arg index="0" value="application"/>
                <constructor-arg index="1" value="xml"/>
                <constructor-arg index="2" value="UTF-8"/>
            </bean>
        </list>
    </property>
</bean> 
```

如果你想使用 spring 的内容协商，你可以使用`AnnotationMethodHandlerAdapter`消息转换器：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <ref bean="xmlConverter"/>
            <!-- other converters if you have them, e.g. for JSON -->
        </list>
    </property>
</bean> 
```

# mysql - MySQL存储函数 - 追加字符串

> ID：10388262
> 
> 赞同：0
> 
> 时间：2012-04-30T17:55:47.017
> 
> 标签：mysql, variables, append, stored-functions

我已经搜索过，但找不到任何我需要的东西。我想创建一个存储函数，该函数将从辅助字段收集数据并返回逗号分隔的项目列表作为返回字符串。我似乎找不到任何方法来获取我在函数中创建的变量并遍历记录集并将每个结果附加到变量中，以便我可以返回它..见下文：

```
BEGIN
    DECLARE searchCat INT;
    DECLARE searchProd INT;
    DECLARE metas CHAR;
    SET searchCat = cat;
    SET searchProd = prod;
    SELECT * FROM offer_metas WHERE category = searchCat AND offer_id = searchProd
        gatherMeta: LOOP
                metas = metas + "," + meta_option;
                ITERATE gatherMeta;
        END LOOP gatherMeta;
    RETURN metas;
END 
```

该函数不会保存，因为我在“metas = metas + meta_option;”上的语法。我正在寻找的是将“meta_option”的当前字段值附加到当前变量“metas”的命令，这样我就可以在最后返回一个完整的列表。

任何的想法？

**更新 - 解决方案**

```
BEGIN
    DECLARE metas VARCHAR (300);

    SELECT GROUP_CONCAT(CONCAT(mn.title,'=',offer_metas.meta_option) ORDER BY mo.cat_seq ASC) INTO metas
    FROM offer_metas
    LEFT JOIN meta_options as mo ON mo.id = offer_metas.meta_option
    LEFT JOIN meta_names AS mn ON mn.category = mo.category AND mn.seq = mo.cat_seq 
    WHERE offer_metas.category = searchCat
    AND offer_metas.offer_id = searchProd
    ORDER BY cat_seq ASC;

    RETURN metas;
END 
```

然后我刚刚将我的 SQL 查询更新为如下（1 是我的 PHP 中的报价类别并填充到查询中）：

```
SELECT offers.*, s.short_name AS sponsorName, s.logo AS sponsorLogo, getMetas(1,offers.id) AS metas 
FROM offers 
LEFT JOIN sponsors AS s ON s.id=offers.carrier 
GROUP BY offers.id 
ORDER BY end_date ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:00:27.170

为什么不只是

```
SELECT GROUP_CONCAT(meta_option SEPARATOR ',')
FROM offer_metas
WHERE category = searchCat AND offer_id = searchProd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:00:58.713

选项 1) 使用[Group_Concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

选项 2)[使用 || 而不是 +](http://lists.mysql.com/mysql/162163)

选项 3) 使用 Concat()

# ruby-on-rails - rails helper - 我怎样才能让助手给我一个` `（或其他标记）

> ID：10388268
> 
> 赞同：19
> 
> 时间：2012-04-30T17:56:16.377
> 
> 标签：ruby-on-rails, ruby

我的助手是这样工作的：

```
def some_help(in_string)
  in_string + " and more"
end 
```

但是我希望它
在输出之前执行，并且我不断地从字面上获取 <br> 字符本身，即不是中断，但我想要的是一个 <br> 这就是问题所在。

所以

```
def some_help(in_string)
  "<br/>" + in_string + " and more"
end 
```

不能正常工作。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-05-10T01:14:05.510

使用`tag(:br)`而不是`"<br/>"`.

`content_tag(:br)`创建开始和结束`br`标签并使用`raw`or`html_safe`只是丑陋的（更不用说危险了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:07:04.333

您还可以使用“content_tag”视图助手。

[http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)

```
def some_help
   content_tag(:br) + "some help"
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:59:18.653

我不确定我是否理解你。你添加`<br />`你的字符串，它保持简单，而你希望它具有换行符的效果？如果是这样，您必须将您的字符串标记为 html 安全。你用`"somestring".html_safe`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:00:04.253

Rails 自动转义 HTML 字符。用`.html_safe`在弦上。

# python - UnboundLocalError：分配前引用的局部变量“x”

> ID：10388271
> 
> 赞同：4
> 
> 时间：2012-04-30T17:56:22.290
> 
> 标签：python, gdal

我正在尝试执行此代码，

```
import osgeo.ogr

def findPoints(geometry, results):
    for i in range(geometry.GetPointCount()):
        x,y,z = geometry.GetPoint(i)
    if results['north'] == None or results['north'][1] < y:
        results['north'] = (x,y)
    if results['south'] == None or results['south'][1] > y:
        results['south'] = (x,y)
    for i in range(geometry.GetGeometryCount()):
        findPoints(geometry.GetGeometryRef(i), results)

shapefile = osgeo.ogr.Open("../../Data/tl_2009_us_state/tl_2009_us_state.shp")
layer = shapefile.GetLayer(0)
feature = layer.GetFeature(53)
geometry = feature.GetGeometryRef()

results = {'north' : None,
           'south' : None}

findPoints(geometry, results) 
```

我不断收到这个错误，

```
Traceback (most recent call last):
  File "identify_northsouth_point.py", line 22, in <module>
    findPoints(geometry, results)
  File "identify_northsouth_point.py", line 8, in findPoints
    results['north'] = (x,y)
UnboundLocalError: local variable 'x' referenced before assignment 
```

我尝试过全局和非本地，但它不起作用。由于我没有从函数外部获得任何输入，所以无论如何我都不需要全局或非本地的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:01:06.533

错误消息指出该变量`x`没有值。由于它在您的`for`循环中被分配（重复），这意味着您的`for`循环甚至没有执行一次。发生这种情况的唯一方法是如果`geometry.GetPointCount()`返回`0`。因此，这是必须发生的事情。添加一个`print geometry.GetPointCount()`以确认。

您是否打算将`if`语句*放在*循环内，以便对几何中的每个点执行它们，并且在几何有 0 点时*根本不执行？*如果是这样，请正确缩进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:01:50.260

我认为您可能意味着将这些 if 语句缩进 for 循环下。正如您的代码所代表的那样，它将始终仅在最后一点上运行，或者（我想是什么导致您当前的错误）在您没有点的情况下，永远不会设置`x, y, z`，因为`for`循环将没有任何东西可以迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-07T08:39:33.170

我有同样的问题。我正在定义函数（使用 def）并在 def 之前声明变量并解决这个问题，我只是将声明移到函数中并解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:00:51.930

作为一个快速的“诊断”测试，您可以尝试在 for 循环之前进行初始化`x, y`，`z`看看是否可以解决您的特定错误？

现在的情况是，如果您的 for 循环由于某种原因没有执行，`x, y`并且`z`没有被创建和分配，因此将导致您稍后在尝试使用它们时遇到错误。

另外，您的两个`if`语句是否应该折叠在 for 循环下？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T18:01:15.627

问题出在函数的前两行——事实上，那里有几个问题。

x、y 和 z 在`for`循环中定义。如果`geometry.GetPointCount()`为 0，则永远不会进入该循环，因此不会分配这些变量。这大概就是这里发生的事情，因此出现错误消息。

另一方面，如果该表达式大于 0，则每次通过该循环时都会**重新定义**x、y 和 z ，这似乎有点毫无意义——它们最终将只有上次的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T18:02:17.607

```
x,y,z = geometry.GetPoint(i) 
```

永远不会被执行`findPoints()`

这是因为`geometry.GetPointCount()`返回 0，因此`for`永远不会执行循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-30T08:42:58.793

我遇到了同样的问题，因为示例来自电子书，在某些地方似乎没有正确缩进。该函数应如下所示：

```
def findPoints(geometry, results):
    for i in range(geometry.GetPointCount()):
        x,y,z = geometry.GetPoint(i)
        if results['north'] == None or results['north'][1] < y:
            results['north'] = (x,y)
        if results['south'] == None or results['south'][1] > y:
            results['south'] = (x,y)
    for i in range(geometry.GetGeometryCount()):
        findPoints(geometry.GetGeometryRef(i), results) 
```

# c# - 如何在处理使用 Facebook API 调用的服务方法时透明地更新 Facebook 访问令牌？

> ID：10388272
> 
> 赞同：14
> 
> 时间：2012-04-30T17:56:25.290
> 
> 标签：c#, facebook, security, facebook-c#-sdk, token

我有一个在 IIS 7.5 和 VS 2010 中运行的 WCF 服务。该服务有一些在内部使用[Facebook C# SDK](http://facebooksdk.codeplex.com/)（版本 4.1，不是最新版本）的方法，以便从/向 Facebook 执行一些 GET 和 POST。由于 Facebook将很快[删除](http://developers.facebook.com/roadmap/offline-access-removal/)`offline_access`我必须处理访问令牌过期的情况。

我已经了解了执行身份验证的方式（为了获取代码并在获得访问令牌的代码之后），以便使用 Graph API 获取 Facebook 信息（如此[处](http://developers.facebook.com/attachment/serversideflow.png)所示）。

我有两个问题：

*   当我的服务方法被调用并且我从我的数据库中检索适当用户的令牌时，有没有办法知道访问令牌是否过期？
    我已经[读过](http://developers.facebook.com/docs/authentication/access-token-expiration/)，当执行 Facebook API 调用并且访问令牌过期时，会引发以下异常：`OAuthException`. 但是有没有更好的方法来检测到期？我不想

    1.  调用 Facebook API
    2.  处理异常
    3.  更新访问令牌，最后
    4.  使用新的访问令牌重复初始调用。

*   是否可以透明地更新用户的访问令牌（也将其存储在数据库中）并*继续*处理服务方法？在[此](http://csharpsdk.org/docs/web/handling-expired-access-tokens)资源中，缺少重要的（“更新访问令牌”）部分（声明为 [todo]）

我想实现以下方案，在服务方法的实现中：

```
sc = SocialNetworkAccountDao.GetByUser(user)

isExpired = call method to check if the sc.token is expired.

if (isExpired)

{

  newToken = call method for getting new access token

  sc.token = newToken;

  SocialNetworkAccount.Update(sc);

}

Facebook = new Facebook (sc.token)

Facebook.Post( ..... )

-- 
```

与`QAuth`对话框通信的过程是异步的（执行重定向），与访问令牌 url 的通信以获取访问令牌是同步执行的。

最后一个问题：

*   有没有办法让服务方法等待我们从 Facebook 的请求/回调中检索到的新访问令牌，以便稍后继续使用新的访问令牌？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T15:57:05.273

我不了解 C# SDK，但所有 facebook SDK 基本上只是对图形不同 url 的 http 请求的包装器。

如果您使用服务器端身份验证流程，那么您应该获得一个长期存在的令牌（大约 60 天），并且您会获得它的到期时间，当它到期时您需要重新验证用户，没有办法扩展令牌.

客户端身份验证返回一个短暂的令牌（大约 2 小时），但您可以使用facebook 提供的[新端点来替换“offline_token”。](http://developers.facebook.com/roadmap/offline-access-removal/)您只能将其与仍然有效的访问令牌一起使用。

此外，无论如何，当您获得访问令牌时，您总是会得到“过期”时间，除非它是没有过期日期的应用程序令牌。

在任何一种情况下，如果您获得了一个长期存在的令牌，您可以将其存储在数据库中并在服务器端使用它，但请注意，由于多种原因，令牌仍然可能会失效。

您还可以使用[处理无效和过期访问令牌](http://developers.facebook.com/docs/authentication/access-token-expiration/)的官方文档。如果 C# SDK 不适合您，那么您可能只想自己实现它，以满足您自己的需要，应该很容易。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-08T16:37:49.573

您真的应该将 c#sdk 更新到最新版本 - 随着时间的推移，它们修复了很多问题..

**更新令牌**
这是我们自己处理更新调用的代码（c#sdk 版本 6.0.16，但这也应该适用于早期版本）：

```
 /// <summary>
    /// Renews the token.. (offline deprecation)
    /// </summary>
    /// <param name="existingToken">The token to renew</param>
    /// <returns>A new token (or the same as existing)</returns>
    public static string RenewToken(string existingToken)
    {
        var fb = new FacebookClient();
        dynamic result = fb.Get("oauth/access_token", 
                                new {
                                    client_id         = FACEBOOK_APP_ID,
                                    client_secret     = FACEBOOK_APP_SECRET,
                                    grant_type        = "fb_exchange_token",
                                    fb_exchange_token = existingToken
                                });

        return result.access_token;            
    } 
```

Facebook 表示，新令牌可能是相同的（但过期时间延长）或全新的令牌，因此如果需要，您应该在逻辑中处理它。

根据 Facebook 的说法，您应该每天最多调用一次更新。（[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)）

~~我们保留了最后一次“Facebook 更新”完成的时间戳，如果该时间超过 24 小时并且用户正在访问我们的应用程序，我们将进入后台并更新令牌。（我们还会更新其他数据、姓名、电子邮件和其他我们需要的东西）~~

显然，它不是每天调用一次，而是每个令牌调用一次。

Facebook 不会让你更新一个长期存在的令牌。[请参阅脱机访问删除页面](https://developers.facebook.com/roadmap/offline-access-removal/)上的“场景 4：”

澄清一下：短期令牌来自客户端，长期令牌来自服务器端。

简而言之，当用户访问您的应用程序时，使用客户端的 SDK 获取新的短期令牌将其发送到服务器，并与您的服务器一起扩展它以使其成为长期并存储它，这样您就得到了从那时起60天。

**处理过期时间**
在我们当前的使用中，我们不需要跟踪过期时间，因为所有访问都从检查过期时间的客户端开始，但同样`result.access_token`它可以访问的代码访问`result.expires`返回剩余的秒数新获得的代币（应该接近 500 万 => 60 天））。

无论如何，我不确定是否有办法从令牌中获取过期时间，而无需再次调用身份验证进程。我知道[Facebook 调试器](https://developers.facebook.com/tools/debug/access_token)会返回这个，但这并没有真正帮助..

**更新无效令牌**
*这将不起作用*，在尝试更新过期/无效令牌时，您将收到[此处所述的任何错误。](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)
请记住在过期之前调用更新，并记住当您在过期（或任何其他类型的无效）上调用更新时，您将收到错误并需要处理它（我们在我粘贴的代码之外处理它）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T20:31:17.680

### 到期时间

简短的回答：你得到几秒钟，直到它过期，但 c# api 似乎没有公开它。

根据[this](http://developers.facebook.com/docs/authentication/server-side/) facebook documentation，当您获得令牌时，您将获得令牌到期前的秒数作为参数。该文档将响应格式列为：

```
access_token=USER_ACESS_TOKEN&expires=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES 
```

这得到了Ouath 2 的[RFC](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-4.2.2)草案的支持，该草案说响应应该包含过期时间。

不幸的是，它与[此处](http://csharpsdk.org/docs/web/handling-expired-access-tokens)声明的 C# SDK 文档直接矛盾

> 如果不向 Facebook 发出请求，就无法确定访问令牌是否过期。因此，您必须始终假设访问令牌在向 Facebook 发出请求时可能已过期。

这不是真的。如果您查看 c# SDK 源代码，sdk 为 OAuth 响应创建的对象明确包含（不幸的是作为私有变量）以下[代码](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/blob/master/Source/Facebook/FacebookOAuthResult.cs#L40)

```
 /// <summary>
    /// Date and Time when the access token expires.
    /// </summary>
    private readonly DateTime _expires; 
```

所以它有数据，但由于某种原因没有公开它（至少在那里，我没有进一步研究）。我会说要么在图书馆周围挖掘更多，看看它是否暴露在某个地方，在github上分叉并修补它（我相信这是一个单行更改），或者使用反射来读取你自己代码中的私有变量。

### 继续处理服务方法和更新令牌

简短的回答：也许。如果您知道令牌已过期，您显然可以在请求之前获得一个新令牌。

如果你不这样做，那么你可以，但你需要处理你的请求失败。理论上，这并不意味着您需要处理异常，只需查看 http 状态代码（这将是 400 中的一个，可能 403 禁止）但是 C# 的[webrequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)方法将非 200 状态 c 解释为引发异常的事件。由于 API 使用这种机制进行调用，因此只有在调用失败时才会出现异常。

### 有没有办法让服务方法等待我们从

当然，在你处理异常之后。

一旦发生这种情况，您将异步获得一个新的身份验证令牌。因此，您可以在捕获异常后等待一段时间，检查您是否为该用户获得了新令牌，如果有，请重试。如果继续等待和检查。确保您有最大的重试次数和最长的等待时间。拉取数据库来检查更改的效率有点低，因此您可能需要仔细选择检查更改的时间间隔，并可能使其[呈指数级回退](http://en.wikipedia.org/wiki/Exponential_backoff)。

另一种更有效（对于单个服务器）但复杂的方法是让系统获取带有身份验证令牌引发事件的回调，并让重试逻辑监听这些事件。

当您的代码因为令牌过期而出现异常时，请在 catch 块中创建一个将重做请求的函数，然后将其作为事件侦听器添加到 auth 事件中。让函数检查事件是否为请求事件的用户提供新的身份验证令牌，如果是，则发出请求。同样，请记住设置最大重试次数。

不可能实际使用 async/await 或类似的东西来等待您对新令牌的请求完成。问题，刷新 API 令牌不是您可以等待响应的请求，它实际上触发了一些事情，最终导致发出单独的 get 请求
![Facebook API 请求](../Images/c28a059e145727768efd881770f7f453.png) 注意，虽然上图是用户首次登录时的情况，但相同序列大致发生在失败的调用上，但它从重定向开始。

# java - 监控 Java Web 应用程序中的流量

> ID：10388273
> 
> 赞同：2
> 
> 时间：2012-04-30T17:56:27.190
> 
> 标签：java, web-applications, web, monitoring

我正在寻找可以监控 java web 应用程序的流量以估计云计算价格的东西。

如果它可以将流量分类为不同的类别，例如数据库、静态资源、页面等，那就太好了。

理想情况下，它应该以与 New Relic 相同的方式工作。不幸的是，New Relic 只监控时间而不监控流量......

这样的事情存在吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:01:42.677

您不需要任何特定于 java 的软件来执行此操作。您可以使用任何网络监控工具并在本地运行您的应用程序！为了监控不同类型的流量，我也会使用不同的工具。那里有很多 DB-monitor 工具......抱歉没有更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T09:42:00.017

有很多监控 Java Web 应用程序的解决方案。我尝试了其中的一些，但最后停在了两个：Zabbix 和 JavaMelody。两者都适用于监控和分类应用程序的流量，尽管它们的工作方式完全不同。Zabbix 允许通过 JMX 长期观看应用程序。JavaMelody 可以内置到应用程序中，并提供对业务应用程序流程的完整洞察。

您对 Java 应用程序监控平台的最终决定取决于您希望监控的优先应用程序功能。我建议您阅读有助于您详细了解这两种解决方案的评论：http: [//cases.azoft.com/enterprise-system-monitoring-solutions-business-apps/](http://cases.azoft.com/enterprise-system-monitoring-solutions-business-apps/)

# objective-c - Objective-C 警告 - 无法获取对象 ID - 这是什么意思？

> ID：10388281
> 
> 赞同：1
> 
> 时间：2012-04-30T17:57:20.793
> 
> 标签：objective-c, cgimage

我在日志中收到此警告：“警告 - 无法获取对象 ID”。我已经搜索了网络，但我找不到任何提及它。当我拍摄屏幕图像并将其添加到模拟器照片库时，就会发生这种情况。

图像保存正常，所以没有伤害，但我不喜欢我不为自己创建的消息..

有谁知道是什么意思？

这是捕获屏幕图像的代码：

```
-(void)captureToPhotoAlbum {
    //NSLog(@"%s", __FUNCTION__);

    // Get image to save
    CGImageRef screen = UIGetScreenImage();
    UIImage *img = [UIImage imageWithCGImage:screen];

    //Test for Retina display:  
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0) {
        // Retina
        // Image cropping This is the size of the saved image.
        CGImageRef imageRef = CGImageCreateWithImageInRect([img CGImage], CGRectMake(0.0f, 230.0f, 1536.0f, 1640.0f));
        UIImage *img2Save = [UIImage imageWithCGImage:imageRef];
        CGImageRelease(imageRef);
        // Request to save the image to camera roll
        UIImageWriteToSavedPhotosAlbum(img2Save, self, nil, nil);

    } else {
        //Non Retina
        // Image cropping This is the size of the saved image.
        CGImageRef imageRef = CGImageCreateWithImageInRect([img CGImage], CGRectMake(0.0f, 115.0f, 768.0f, 820.0f));
        UIImage *img2Save = [UIImage imageWithCGImage:imageRef];
        CGImageRelease(imageRef);
        // Request to save the image to camera roll
        UIImageWriteToSavedPhotosAlbum(img2Save, self, nil, nil);
    }

} 
```

控制台输出：

```
Apr 30 20:29:52 Davids-MacPro.local AppName[25159] <Warning>: Unable to get object ID.
Apr 30 20:29:52 Davids-MacPro.local AppName[25159] <Warning>: Unable to get object ID.
Apr 30 20:29:52 Davids-MacPro.local AppName[25159] <Warning>: Unable to get object ID.
Apr 30 20:29:52 Davids-MacPro.local AppName[25159] <Warning>: Unable to get object ID. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:06:28.523

我要把这个写下来。似乎只有在模拟器上运行时才会出现警告。在设备上运行时没有警告。

# php - PHP在包含html文件之前添加空文本节点

> ID：10388294
> 
> 赞同：3
> 
> 时间：2012-04-30T17:58:32.787
> 
> 标签：php

我使用 php 作为模板引擎，我注意到当我包含视图文件时，在该视图的内容之前添加了空文本节点。

例如，我有要包含的 html 文件，该文件具有以下内容：

```
<p>Some text</p> 
```

比我包含这样的文件：

```
<div><?php require_once('file/path.htm'); ?></div> 
```

（请注意，我已经删除了 div 和 php 之间的任何空格）并且在 php 包含文件之后，他添加了空文本节点（我将标记为“”），在 p 标记之前添加了空格，所以我得到了这样的东西：

```
Some previous content...
<div>    
"" //empty text node
<p>Some text</p>
</div> 
```

这是非常有问题的，因为它破坏了内容组合。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T21:46:08.640

FSou1 说得对，就是字符集，也可以通过不带 BOM 保存为 UTF-8 来解决：

1.  在 Notepad++ 中打开您的 PHP inlcude 文件（在此处下载：http: [//notepad-plus-plus.org/](http://notepad-plus-plus.org/)）
2.  选择编码 --> 在没有 BOM 的 UTF-8 中编码

空节点消失。希望对某人有所帮助。这让我发疯了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:20:06.620

我现在遇到了同样的问题，找到答案时我很幸运。答案在字符集中。这可能很奇怪，但是当您将文件保存为 UTF-8 时，您的标记中会出现空白。当你的文件在 cp1251 中时，你没有这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T13:20:25.667

这是我的第二个由 BOM 引起的问题（都花费了一个多小时的调试、谷歌搜索和拉扯）。我刚刚发现了这个（仅限 Windows）小型拖放程序，可以检查它可以删除的 BOM：

> ****Brynt Younce的****文件 BOM 检测**器**
> 
>  *****   [Softpedia.com/get/System/File-Management/File-BOM-Detector.shtml](http://www.softpedia.com/get/System/File-Management/File-BOM-Detector.shtml)****

 ****小，容易和简单。似乎有一个适用于所有平台的 PHP 解决方案，但我尚未对其进行测试。有兴趣可以看看：

> *   [Github.com/emrahgunduz/BomCleaner](https://github.com/emrahgunduz/BomCleaner)****

# objective-c - 如何在 iOS 开发中切换新的视图控制器？

> ID：10388301
> 
> 赞同：4
> 
> 时间：2012-04-30T17:58:54.540
> 
> 标签：objective-c, ios

我正在尝试编写一个 IBAction 来为我的 iPhone 应用程序切换视图控制器：

```
-(IBAction)changeToView2:(id)sender 
{
    if (self.view2 == nil)
    {
        view2 = [[UIViewController alloc] initWithNibName:@"View2Controller" bundle:[NSBundle mainBundle]];
    }
    self.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentedViewController: view2 animated:YES];
} 
```

但是，我收到一个构建错误，指出没有接口声明“presentedViewController:animated:”。为什么？

将其更改为“presentViewController:animated:”会产生相同的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T18:00:28.640

方法是`presentViewController:animated:completion:`，不是`present`**ed**`ViewController:animated:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:01:18.390

代替

```
[self presentedViewController: view2 animated:YES]; 
```

尝试

```
[self presentViewController: view2 animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:01:27.970

```
[self presentViewController:view2 animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T05:20:11.513

试试这个你编辑的代码。我认为这对你有帮助。

```
-(IBAction)changeToView2:(id)sender 
{
if (self.view2 == nil)
{
    view2 = [[UIViewController alloc] initWithNibName:@"View2Controller" bundle:nil];
}
self.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentedViewController: view2 animated:YES];
} 
```

# filter - 在计算成员中使用过滤器

> ID：10388311
> 
> 赞同：0
> 
> 时间：2012-04-30T17:59:19.703
> 
> 标签：filter, mdx

我遇到了一些 MDX 问题，我想计算每个版本的每种类型有多少产品，这将是我的输出。

产品编号 | 数量ProductAVersionA | 数量ProductAVersionB | 数量ProductBVersionA | 数量ProductBVersionB |

到目前为止我有这个 MDX

```
WITH MEMBER [Measures].[ProductAVersionA]
AS  SUM([DimProduct].[ProductName].&[ProductA],[Measures].[ProductQty])
SELECT NON EMPTY (
        [Measures].[ProductAVersionA]) ON COLUMNS,
NON EMPTY [DimOrg].[ProductID].[ProductID].MEMBERS ON ROWS
FROM [Sales]
WHERE([DimCustomers].[Customer Area].&[United States]) 
```

但这会返回产品 A 的总数，我只想要按版本 A 过滤的产品 A。我不能在**WHERE**子句中使用它，因为并非所有产品都具有相同的版本。有什么方法可以通过计算成员中的过滤器表达式来实现吗？我尝试使用，但我一直收到错误消息。

FYI 产品版本在另一个维度**[DimVersion]**

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:45:28.427

您可以尝试按 DimVersion 'A' 成员过滤 ProductAVersionA 计算成员，如下所示：

```
member [Measures].[ProductAVersionA] as
    sum(([DimProduct].[ProductName].&[ProductA], [DimVersion].[VersionName].&[VersionA]), [Measures].[ProductQty]) 
```

# session - Weblogic 会话复制

> ID：10388313
> 
> 赞同：1
> 
> 时间：2012-04-30T17:59:29.480
> 
> 标签：session, weblogic, replication

我似乎无法让 Weblogic 的会话复制工作。我在 web.xml 中进行了设置，以便所有请求都需要管理员凭据：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>redirect</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>Admin</role-name>
    </auth-constraint>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>myrealm</realm-name>
    <form-login-config>
        <form-login-page>
            /login.jsp
        </form-login-page>
        <form-error-page>
            /login.jsp
        </form-error-page>
    </form-login-config>
</login-config> 
```

在我的 weblogic.xml 中，我设置了：

```
<session-descriptor>
    <persistent-store-type>replicated_if_clustered</persistent-store-type>
</session-descriptor> 
```

我的测试用例是两台托管服务器。

1.  导航到我的网页。
2.  关闭一台托管服务器。（我当前连接的那个）
3.  发生故障转移，我被要求提供我的凭据。

我希望故障转移能够顺利进行，而无需我重新登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T03:45:44.680

尝试在 Weblogic 管理控制台中启用会话复制选项...

登录到管理员

```
console -> goto cluster -> goto advanced -> tick Session replication. 
```

注意：触摸 .xml 文件来更改任何属性不是一个好习惯......

# javascript - 您如何获取两个单选按钮的输入并将它们作为图像输出？

> ID：10388319
> 
> 赞同：0
> 
> 时间：2012-04-30T17:59:34.323
> 
> 标签：javascript, forms, radio-button

到目前为止，这是我的代码：

[http://jsfiddle.net/pRXxT/](http://jsfiddle.net/pRXxT/)

我正在努力做到这一点，以便如果我选择一个单选框，图像将使用该颜色更新，但使用两个单选框而不是一个。

每个单选框都有一个单独的文件名部分，因此最终结果是：

http://blahblah/images/[radiobox1][radiobox2].jpg

我整天都在玩这个，可以使用一些帮助。由于尝试不同的东西，我的代码有点混乱，我留下了只能更新 CSS 部分中的第一个图像的代码，所以我不会丢失它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:33:44.393

你的代码有点乱，我花了一点时间来理解你想要什么，你在 jquery 选择器中有一些大错误，所以这里有一些更正，我认为这会起作用：

HTML：

```
<input type="radio" class="radio1" name="BodyColor" value="blk"/> Black<br/>
<input type="radio" class="radio1" name="BodyColor" value="green"/> Green<br/>
<input type="radio" class="radio1" name="BodyColor" value="yellow"/> Yellow<br/>

<input type="radio" class="radio2" name="InsertColor" value="red"/> Red<br/>
<input type="radio" class="radio2" name="InsertColor" value="green"/> Green<br/>
<input type="radio" class="radio2" name="InsertColor" value="yellow"/> Yellow<br/>

<img src="blkblk.jpg" id="FinalImage" height="100px" width="100px"> 
```

JavaScript：

```
$(document).ready(function() {
    var BodyColor = 'blk';
    var InsertColor = 'blk';

    $(".radio1").click(function() {
        BodyColor = $(this).attr('value');
        updateImage();
    });
    $(".radio2").click(function() {
        InsertColor = $(this).attr('value');
        updateImage();
    });

    function updateImage() 
    { 
        //i don't know the uri you actually want so i'm gonna leave it like it is
        $("#FinalImage").attr('src', BodyColor + InsertColor + ".jpg");
    }

}); 
```

**编辑**刚刚测试并且工作正常

# android - Android 软键盘遮盖了 ScrollView 中的 EditTexts

> ID：10388326
> 
> 赞同：3
> 
> 时间：2012-04-30T18:00:12.850
> 
> 标签：android, xamarin.android

我有一个在 ScrollView 内填充_parent 的 TableLayout。除了显示软键盘时，一切都完美无缺，它掩盖了最后几个 EditTexts。从技术上讲，屏幕不能再向下滚动，因为没有键盘显示，屏幕适合所有内容。只是当键盘显示时，我无法向下滚动以查看剩余的 EditTexts，而无需隐藏键盘并允许用户仅选择并将值输入到较低的 EditTexts 之一。使用[这个](http://developer.android.com/resources/articles/on-screen-inputs.html)，我试过：

```
Window.SetSoftInputMode((int)SoftInput.AdjustPan); 
```

和

```
Window.SetSoftInputMode((int)SoftInput.AdjustResize); 
```

和

```
[Activity(WindowSoftInputMode = SoftInput.AdjustPan)] 
```

和

```
[Activity(WindowSoftInputMode = SoftInput.AdjustResize)] 
```

和

```
Window.SetFlags(WindowManagerFlags.AltFocusableIm, WindowManagerFlags.AltFocusableIm); 
```

那只是完全阻止了键盘出现。这不是我需要的。我需要调整我的内容以在可见时显示在键盘上方，以便我可以继续滚动到显示键盘的最底部 EditText。非常长的 xml 的摘录。该表在代码中动态填充。

```
<ScrollView
 android:id="@+id/peScroll"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:layout_below="@id/security">
   <TableLayout
    android:id="@+id/poweredEquip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:stretchColumns="*"
    android:gravity="center"
    android:padding="10dip">        
    <TableRow
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="@drawable/tab_bg_unselected"
      android:gravity="center">
      <TextView
        android:text="Serial"
        android:textSize="15sp"
        android:textColor="@android:color/black"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="middle"
        android:gravity="center"
        android:layout_column="1"/>
     </TableRow>
  </TableLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:15:52.190

可能不是最优雅的解决方案，但决定只在最后一行添加一个大的 marginBottom。

# assembly - 传输率究竟是什么？

> ID：10388330
> 
> 赞同：1
> 
> 时间：2012-04-30T18:00:16.560
> 
> 标签：assembly, x86, hardware

网站上的文字指出，

```
Each BUS CYCLE on the 8086 equals four system clocking periods (T states).
The clock rate is 5MHz , therefore one Bus Cycle is 800ns .
The transfer rate is 1.25MHz. 
```

现在我得到了前两点，但我无法理解术语传输率。我了解它是如何计算的，但我无法理解为什么它被称为传输率。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:03:37.847

如果您可以每秒执行一次传输，那么每秒`T`最多可以传输一次。`1/T`为此`t = 800 ns = 0.0000008 s`给`1,250,000 transfers per second = 1.25 MHz`.

另一种看待它的方式是时钟速率是，`5 MHz`但是如果执行传输需要 4 个时钟，那么您将只能获得时钟速率的四分之一的传输速率，即`5 MHz / 4 = 1.25 MHz`.

# matlab - Matlab中的单轴仿真

> ID：10388336
> 
> 赞同：0
> 
> 时间：2012-04-30T18:00:29.823
> 
> 标签：matlab, graph, simulation

嗨我想在matlab中生成一个单轴图（不知道这是否准确地称为图）像这样

![在此处输入图像描述](../Images/0ecb7e6ea2c361ddd598400d3535ff9f.png)

在上图中，数值代表时间（1 到 23）分钟，垂直细黑线代表事件 A。一些垂直的黑线顶部有一个红色圆圈，表示事件 B 和事件 A 的发生。是否可以在 matlab 中生成这样的模拟图像？如果是这样，我应该寻找什么关键字。任何让我快速开始生成此类图形/模拟的建议。（注意：我实际上并没有经常使用matlab ..当然从来没有在其中生成图表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:03:28.747

您可能想要一个[stem graph](http://www.mathworks.co.uk/help/techdoc/ref/stem.html)，然后执行以下操作：

```
stem(event_times, ones(size(event_times)); 
```

您可以叠加多个图表以获取红色圆圈等。

# c# - 如何获取客户端机器的窗口原理ID（asp.net）

> ID：10388342
> 
> 赞同：0
> 
> 时间：2012-04-30T18:00:51.103
> 
> 标签：c#, javascript, asp.net, active-directory, httpwebrequest

我想获取用户在他们的机器上登录的客户端窗口用户名，

我试过这些：

```
Request.servervariable["LOGON_USER"],
Request.servervariable["AUTH_USER"],
Request.servervariable["REMOTE_USER"] 
```

但是当我在 IIS 上部署我的应用程序时，所有这些值都是空白的，我的应用程序 senario 应用了一些约束：我正在使用身份验证模式 =“form”，因为我将 Windows 帐户用户名传递给 db，然后我验证此 Windows 用户 ID 是否存在于 db 中。

同样，我想在 IIS 中进行匿名访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:06:34.217

假设您已启用 Windows 身份验证，Page.User.Identity.Name 应该会给您！

# javascript - 显示文本框值

> ID：10388346
> 
> 赞同：2
> 
> 时间：2012-04-30T18:00:54.377
> 
> 标签：javascript, html

我怎样才能只显示文本字段的值，而不是实际的白框。所以我有一个数字类型的简单文本字段。

```
<input type="number" id="text" value="0"/> 
```

我想做的只是显示价值，而不是实际的盒子本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:03:34.690

你应该可以用 CSS 做到这一点。只需将框设置为类似于网页背景的样式，然后将输入框的属性设置为禁用，以便用户无法更改值。最后，您可以设置光标的 CSS，以便在鼠标悬停时它看起来不像是一个文本字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:05:27.370

您可以使用 CSS 移除边框并将背景颜色设置为透明：

```
input
{
    border: none;
    background-color:transparent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:08:11.697

只需像这样更改您的代码：

```
<input type="number" id="text" value="0" style="border:0px;"/> 
```

这应该会产生您预期的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:12:16.063

正如heavysixer 提到的，您可以使用CSS：

```
#text{
    border: none;
    background: none;
    cursor: default;
    padding:0;
    margin:0;
    font-size:1em;
} 
```

您需要使字体与文档的其余部分相匹配。这是一个要演示的小提琴：http: [//jsfiddle.net/mestekweb/URkca/](http://jsfiddle.net/mestekweb/URkca/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T18:13:28.043

```
<div style="background:#FFFFCC">
<input type="number" id="text" value="0" style="border:0px; background:none;"/>
</div> 
```

# sql - 如何仅更改日期数据类型的年份

> ID：10388351
> 
> 赞同：28
> 
> 时间：2012-04-30T18:01:01.853
> 
> 标签：sql, sql-server

我有一个生日列表，年份是唯一不正确的部分。我有这些人的 ID #s 列表。有没有办法只改变所有这些人的年份？我正在考虑制作一个查询结果表然后使用`UPDATE` `SET`查询，但我不知道如何只更改年份。

![在此处输入图像描述](../Images/d61c66f8b5a1922901fce1b2f2728c41.png)

样本包含在编辑中。每年需要减少2。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-30T18:03:38.953

如果所有行都需要减少两年，那么：

```
UPDATE dbo.TableToUpdate
  SET [Date Column] = DATEADD(YEAR, -2, [Date Column]); 
```

如果所有行都需要设置为特定年份（例如 2019 年），则列是`date`：

```
UPDATE dbo.TableToUpdate
  SET [Date Column] = DATEFROMPARTS(2019, MONTH([Date Column]), DAY([Date Column]); 
```

如果所有行都需要设置为特定年份（例如 2019 年）并且列不是`date`，则可以使用`DATETIMEFROMPARTS`or `SMALLDATETIMEFROMPARTS`，但此时以下内容会变短：

```
UPDATE dbo.TableToUpdate
  SET [Date Column] = DATEADD
  (
    YEAR, 
    -DATEDIFF(YEAR, '20190101', [Date Column]), 
    [Date Column]
  ); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-30T18:15:24.767

这是我能想到的最短时间，将年份更改为 2050：

```
select 
    dateadd(year, (2050 - year(d)), d)            
from x 
```

样本数据：

```
create table x(d date);

insert into x values
('2001-11-19'),
('2020-07-05'),
('2012-05-01'); 
```

输出：

```
COLUMN_0
2050-11-19
2050-07-05
2050-05-01 
```

现场测试：[http ://www.sqlfiddle.com/#!3/9a8b4/2](http://www.sqlfiddle.com/#!3/9a8b4/2)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-01T05:20:21.060

万一其他人需要它用于 MySQL，语法如下：

```
UPDATE dbo.TableToUpdate 
SET    [Date Column] = DATE_ADD([Date Column], INTERVAL -2 year); 
```

# windows - 来自命令提示符的 sqlite - 无法识别的命令

> ID：10388354
> 
> 赞同：7
> 
> 时间：2012-04-30T18:01:08.887
> 
> 标签：windows, sqlite

我正在尝试从命令提示符运行 sqlite。所以我从这个网站[http://www.sqlite.org/download.html下载了这个 sqlite-shell-win32-x86-3071100.zip](http://www.sqlite.org/download.html)

现在有一个 setup.exe，v 可以从中运行 sqlite 命令。当我说

```
C:\Users\..>'sqlite3' is not recognized as an internal or external com

''sqlite3'' is not recognized as an internal or external command,
operable program or batch file. 
```

任何提示。

谢谢孙

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T18:17:15.507

在 Windows 命令提示符下，您可以使用以下命令启动 sqlite3：

```
cd c:\Stuff
sqlite3.exe 
```

或与：

```
c:\Stuff\sqlite3.exe 
```

无论哪种方式，我从您的评论中假设`sqlite3.exe`在`c:\Stuff`.

正如迈克尔所提到的，您还可以将包含目录的路径添加`sqlite3.exe`到您的`PATH`. 通过快速搜索，我找到了本指南： http: [//geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-29T22:39:23.497

我假设您的系统路径中已经有 sqlite，因为有关如何执行此操作的说明很清楚。

可能的问题是您创建了一个名为 sql3 的文件夹并将三个可执行文件放在该文件夹内的一个文件夹中。

检查所有三个可执行文件是否都在文件本身内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-11T10:43:42.747

转到环境变量并添加新的环境变量 C:\sqlite，因为我已将 sqlite3 文件保存在 C 驱动器的 sqlite 文件夹下。它对我有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-08T17:20:05.003

当您从下载的 zip 文件夹中提取文件时，可能会在另一个文件夹中创建两个同名文件夹。因此，在 cmd 提示符下，您必须使用 . 两次进入该文件夹。例如-C:....\sqlite-tools-win32-x86-3330000\sqlite-tools-win32-x86-3330000 然后使用 sqlite3

# android - 在深度睡眠模式下运行应用程序/服务？

> ID：10388356
> 
> 赞同：5
> 
> 时间：2012-04-30T18:01:13.003
> 
> 标签：android

我计划编写一个应用程序，它每 5 分钟在后台执行一项任务。如果手机进入休眠状态会发生什么？

听说deep sleep时cpu关掉了，app就停止执行了，还有人说cpu不关，而是跑到100mhz以下？哪一个是真的？

另外，如果应用程序不运行在深度睡眠中，我们如何实时接收电话和短信？

我对 Android 完全陌生，刚刚安装了 sdk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:48:29.177

我真的不知道什么是深度睡眠，但是您可以通过提供服务并拥有一个每 5 分钟（300000 毫秒）触发一次的计时器来实现这一点。

# c++ - c++ parasoft错误

> ID：10388357
> 
> 赞同：0
> 
> 时间：2012-04-30T18:01:14.117
> 
> 标签：c++, parasoft

我有 parasoft 我的解决方案，我得到 3 个相同的错误，“应该使用管理资源的对象”这些错误来自我创建的结构。如何在不更改结构的情况下删除它？“指针名称”指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:03:04.547

这可能是说您应该使用某种智能指针来管理动态创建的对象，而不是`new`and `delete`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T21:14:34.300

您可以转到质量任务视图来查看正在生成的违规。从那里您可以右键单击违规并选择“查看规则文档”，这将使您了解违规标记的内容，并为您提供一些有关如何修复违规的示例代码。

如果您只想忽略违规，您可以在测试配置中禁用规则或禁止违规。这可以通过右键单击违规并选择“抑制任务”来完成

# php - Zend Studio Svn 软件

> ID：10388361
> 
> 赞同：0
> 
> 时间：2012-04-30T18:01:18.573
> 
> 标签：php, svn, zend-studio

Zend Studio 使用哪个 svn 包 - Subversive 或 Subclipse？或者，它是私人软件吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:10:56.900

这是颠覆性的：

*   [http://files.zend.com/help/Zend-Studio/svn.htm](http://files.zend.com/help/Zend-Studio/svn.htm)

这是 Zend Studio 9 的屏幕截图，显示了可用的插件：

![可用的 SVN Zend Studio 9 插件](../Images/0930a151d878d501cbbf28915494bccd.png)

# android - 如何访问列表视图的单个项目的控件

> ID：10388365
> 
> 赞同：0
> 
> 时间：2012-04-30T18:01:29.323
> 
> 标签：android

如何在列表视图中访问项目单击侦听器上的列表视图控件？因为我已经为单个列表视图项设置了自定义布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:14:12.970

## 附加一个项目点击监听器

在创建列表视图的活动中，尝试类似于这些的操作

```
private void setupListView() {

    //find by view id
    customListView = ((ListView) findViewById(R.id.lv_listview);

    //set custom adapter
    customListView.setAdapter(
    new CustomListAdapter(this, R.id.lv_listview, variableList));

    //attach listener
    customListView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            /* whatever happens when you click the list item goes here */

        }
    });
} 
```

# jquery-ui - 如何获取id打开对话框

> ID：10388366
> 
> 赞同：6
> 
> 时间：2012-04-30T18:01:31.663
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

我有以下代码

```
<td><a href="#" id="dialog_link-19" class="ui-state-default ui-corner-all">Click here</a></td>
<td><a href="#" id="dialog_link-25" class="ui-state-default ui-corner-all">Click here</a></td>
<td><a href="#" id="dialog_link-33" class="ui-state-default ui-corner-all">Click here</a></td>
<td><a href="#" id="dialog_link-556" class="ui-state-default ui-corner-all">Click here</a></td> 
```

`#dialog_link`是动态生成的。

在我的 js 中，我需要知道哪个被点击了。

这是我的js

```
 $('#dialog').dialog({
            autoOpen: false,
            width: 600,
            buttons: {
                "Ok": function() {
                    $(this).dialog("close");
                },
                "Cancel": function() {
                    $(this).dialog("close");
                }
            }
        });

        // Dialog Link
        $('#dialog_link').click(function(){
            $('#dialog').dialog('open');
            $.ajax({
                  url: "teams/pp",
                  type: "POST",
                  data: 
                  success: function( data ){

                     console.log(data);

                    }

                });

            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T18:07:11.143

使用`id^`代替`id*`,`id^`用于指示`id`以给定文本开头，`id*`如果给定文本在 , 任何地方可用，则匹配`id`，即使最后像`id1-dialog_link`：

```
$("td a[id^='dialog_link']").click(function(){ 
    var id = $(this).prop('id');
    console.log(id);
}); 
```

这里`a[id^='dialog_link']`会匹配`dialog_link-19`但不匹配`id1-dialog_link`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T18:06:35.457

您可以通过以下方式获取被点击的那个的 id：

```
$('a[id*=dialog_link]').click(function(){
    var id = $(this).attr('id');

    console.log(id);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T18:07:45.980

这应该返回单击的链接的编号：

```
$('a[id*=dialog_link]').click(function() {
    var id = $(this).attr('id').replace('dialog_link-','');
    alert(id);
}); 
```

[演示](http://jsfiddle.net/jackdent/8DXSh/1/)

我已使用该`.replace()`功能删除文本

# android - 从不同的线程调用相同的对话框

> ID：10388371
> 
> 赞同：0
> 
> 时间：2012-04-30T18:01:51.460
> 
> 标签：android, multithreading, dialog

我有一个具有不同活动的 android 应用程序，它们都从网络源中提取数据。这是通过实现 Runnable 并创建一个将活动作为对象的线程来完成的。基本类如下所示：

```
public ActivityX extends Activity implements Runnable {

    @Override
    public onResume() {
        super.onResume();
        Thread someThread = new Thread(this);
        someThread.start();
    }

    @Override
    public run() {
        try {
            // pull web content
        }
        catch(TimeOutException e) {
            // >>> create dialog here <<<
            // go back to another activity
        }
    }
} 
```

我尝试使用返回超时对话框的静态方法创建一个对话框助手类，然后像这样调用 show()：

```
HelperClass.getTimeOutDialog().show(); 
```

但问题是，我不能从 run() 方法内部调用它，因为它在不同的线程中。如果我尝试这样做，我会得到一个运行时异常，说明：

**无法在未调用 Looper.prepare() 的线程内创建处理程序**

我需要为近十几个活动执行此对话框，并且我真的很想使用 Handler 对象并每次发送消息来调用对话框。没有更简单的方法可以做到这一点吗？不幸的是，我现在想不出任何东西。

我的代码看起来像这样：

```
handler.handleEmptyMessage(1); 
```

这是调用处理程序。以下将处理该消息：

```
private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if(msg.what == 1) {
            // show dialog here
        }
    }
}; 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:24:27.477

```
@Override
    public run() {
        try {
            // pull web content
        }
        catch(TimeOutException e) {
             runOnUiThread(new Runnable(){
                 @Override
                 public void run() {
                    // >>> create dialog here <<<
                    // go back to another activity
                 }  
             }

        }
    } 
```

如果您不想使用 Handler，请尝试上述方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:10:05.513

```
private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if(msg.what == 1) {
            // show dialog here
        }
    }
}; 
```

此代码是您活动的一部分而不是线程吗？如果它是您的非 Ui 线程的一部分，它会给您错误消息。确保处理程序实例是在您的 UI 线程中创建的，因为处理程序包含对创建它们的线程的隐式引用。

# android - android：如何为整个应用程序设置自定义字体

> ID：10388372
> 
> 赞同：4
> 
> 时间：2012-04-30T18:01:51.617
> 
> 标签：android, custom-font

我开发了一个非常庞大的应用程序，现在我需要为应用程序中的所有控件使用自定义字体。所以我想知道一次性更改字体的更好方法。该应用程序有一百多个 XML 布局。而且我无法将所有控件更改为具有自定义字体的自定义组件。请提供在不更改 XML 中所有控件的情况下更改字体的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T18:29:10.777

做这样的事情

```
pacage com.prac;
class MyFontedTextView extends TextView {
    public FontedTextView(Context context) {
        super(context);
        init();
    }

    public FontedTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public FontedTextView(Context context, AttributeSet attrs, int defStyle) {
         super(context, attrs, defStyle);
         init();
    }

    private void init() {
     String otfName = "MyCustomOtfFileWhichIPutInAssetsFolder.otf";
     Typeface font = Typeface.createFromAsset(context.getAssets(), otfName);
     this.setTypeface(font);
    }
} 
```

现在从您的 TextViews 将其全部替换为 xml 文件

```
<com.prac.MyFontedTextView ....        instead of <TextView 
```

您必须重新进行此更改才能应用

也适用于按钮文本的情况。按钮也是 TextView 的子类所以同样适用于按钮

希望这有助于或可以引导您找到您正在寻找的解决方案

# asp.net-mvc-3 - 如何将对象列表而不是一个对象传递给 POST 操作方法

> ID：10388383
> 
> 赞同：0
> 
> 时间：2012-04-30T18:02:39.227
> 
> 标签：asp.net-mvc-3, actionmethod

我有以下 GET 和 POST 操作方法：-

```
public ActionResult Create(int visitid)
{
    VisitLabResult vlr = new VisitLabResult();
    vlr.DateTaken = DateTime.Now;
    ViewBag.LabTestID = new SelectList(repository.FindAllLabTest(), "LabTestID", "Description");

    return View();
} 

//
// POST: /VisitLabResult/Create

[HttpPost]
public ActionResult Create(VisitLabResult visitlabresult, int visitid)
{
    try
    {
        if (ModelState.IsValid)
        {
            visitlabresult.VisitID = visitid;
            repository.AddVisitLabResult(visitlabresult);
            repository.Save();
            return RedirectToAction("Edit", "Visit", new { id = visitid });
        }
    }
    catch (DbUpdateException) {

        ModelState.AddModelError(string.Empty, "The Same test Type might have been already created,, go back to the Visit page to see the avilalbe Lab Tests");

    }
    ViewBag.LabTestID = new SelectList(repository.FindAllLabTest(), "LabTestID", "Description", visitlabresult.LabTestID);

    return View(visitlabresult);
} 
```

目前，视图显示关联字段以仅创建一个对象，**但我如何定义对象列表而不是一个对象，以便能够在同一个“创建”请求中快速添加例如 10 个对象。** 我的创建视图如下所示：-

```
@model Medical.Models.VisitLabResult

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@section scripts{
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
}
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>VisitLabResult</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.LabTestID, "LabTest")
        </div>
        <div class="editor-field">
            @Html.DropDownList("LabTestID", String.Empty) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T03:17:24.340

你的视图模型

```
public class LabResult
{
    public int ResultId { get; set; }
    public string Name { get; set; }
    //rest of the properties
} 
```

你的控制器

```
public class LabController : Controller
{
    //
    // GET: /Lab/ns

    public ActionResult Index()
    {
        var lst = new List<LabResult>();
        lst.Add(new LabResult() { Name = "Pravin", ResultId = 1 });
        lst.Add(new LabResult() { Name = "Pradeep", ResultId = 2 });

        return View(lst);
    }

    [HttpPost]
    public ActionResult EditAll(ICollection<LabResult> results)
    {
        //savr results here
        return RedirectToAction("Index");
    }

} 
```

你的看法

```
@model IList<MvcApplication2.Models.LabResult>
@using (Html.BeginForm("EditAll", "Lab", FormMethod.Post))
{
    <table>
        <tr>
            <th>
                ResultId
            </th>
            <th>
                Name
            </th>
        </tr>
        @for (int item = 0; item < Model.Count(); item++)
        {
            <tr>
                <td>
                    @Html.TextBoxFor(modelItem => Model[item].ResultId)
                </td>
                <td>
                    @Html.TextBoxFor(modelItem => Model[item].Name)
                </td>
            </tr>
        }
    </table>
    <input type="submit" value="Edit All" />
} 
```

您的视图将呈现如下，这个基于数组的命名约定使得 Defaultbinder 可以将其转换为 ICollection 作为动作 EditAll 的第一个参数

```
<tr>
<td>
        <input name="[0].ResultId" type="text" value="1" />
    </td>
    <td>
        <input name="[0].Name" type="text" value="Pravin" />
    </td>
    </tr>
    <tr>
    <td>
        <input name="[1].ResultId" type="text" value="2" />
    </td>
    <td>
        <input name="[1].Name" type="text" value="Pradeep" />
    </td>
    </tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:51:34.610

如果我正确理解你的问题，

您想将视图更改为模型对象@model List 的列表，然后使用循环或您希望执行的操作，为每个对象创建所需的任意数量的编辑器

然后在您的控制器中，您的 create 接收参数也将是您的模型列表。

# c# - SQL查询堆叠导致数据库崩溃

> ID：10388386
> 
> 赞同：0
> 
> 时间：2012-04-30T18:02:49.563
> 
> 标签：c#, sql, sql-server, visual-studio, debugging

所以我有一个网站正在运行，根据共享主机管理员的说法，有一些 SQL 查询正在堆积并导致数据库崩溃。它是共享主机，因此由于安全问题等原因，他们无法告诉我太多信息。

有没有办法在我自己的机器上调试它并追踪这些错误？

我不确定查询来自哪里。我怀疑它可能是数据实体框架，或者可能是 POCO 对象。

关于如何调试或您怀疑这些错误源自何处的任何想法都会很棒。我搜索了一下，找不到太多关于从哪里开始的信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:18:43.593

你有本地 SQL Server 环境来测试吗？在 SQL Profiler 中运行跟踪是您所需要的，但您可能无法模拟卷。至少您可以看到应用程序的不同部分正在创建的 SQL 代码。

# comments - NetBeans 自动生成的注释，每行一个字：真的吗？

> ID：10388387
> 
> 赞同：4
> 
> 时间：2012-04-30T18:02:53.863
> 
> 标签：comments, netbeans-7, auto-generate

当我在 NetBeans (7.1.2) 中添加组件或自动生成注释的任何内容时，注释会每行一个单词。像这样：

```
 /*
   * If
   * Nimbus
   * (introduced
   * in
   * Java
   * SE
   * 6)
   * is
   * not
   * available,
   * stay
   * with
   * the
   * default
   * look
   * and
   * feel.
   * For
   * details
   * see
   * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
   */ 
```

真的？？？这很愚蠢。无论自动生成的评论的来源是什么，都会发生这种情况。我查看了选项和设置，但我还没有找到解决这个问题的方法（除非我像蝙蝠一样失明，在这种情况下我提前道歉）。如果所有自动生成的评论都像这样，我将拥有非常长的源代码，或者必须手动修复它，或者必须不断浪费时间删除这些长时间浪费的空间。有人知道解决这个问题的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:31:14.747

有同样的问题，终于弄明白了。工具 -> 选项 -> 编辑器 -> 格式下有一个选项可以解决此问题。将“语言”设置为 Java，将“类别”设置为注释。在“常规”部分下，取消选中“在右边距处换行”。

这解决了它。我认为这是某种错误，但在它得到修复之前，这似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:35:58.110

有与此类似的错误报告，例如： http://netbeans.org/bugzilla/show_bug.cgi?format=multiple&id= [203719](http://netbeans.org/bugzilla/show_bug.cgi?format=multiple&id=203719)

让我们等待修复。耐心。

# salesforce - Salesforce - Apex 的新手

> ID：10388390
> 
> 赞同：1
> 
> 时间：2012-04-30T18:03:04.283
> 
> 标签：salesforce, apex-code

我可以使用一些简单的 Apex 代码来获得一般帮助。你知道我是 Salesforce.com 的新手，但不是 Web 应用程序编程的新手（12 年，但使用 Coldfusion 和一些 Perl，并且习惯了 MVC 架构），虽然我没有深入接触过 Java 或 C#。

所以我正在开发一个简单的控制器，我将在一个简单的 VF 页面中使用它。我只想返回该值并将其显示在页面上，但我在编译期间遇到了一些语法问题。到目前为止，这是我的代码：

控制器 - mytest.cls

```
 public with sharing class myTest {

    public class addNewFolder {

        String tmpFolderName = 'MyTestFolder';
        String tmpObjectID = '22K22'; 

        String tmpResult = 'Whoo-hoo!';
        System.debug('XIX|' + tmpResult);
        return tmpResult;

    }

} 
```

错误

说明资源路径位置类型保存错误：需要右括号，发现“XIX|” mytest.cls /PREPROD/src/classes 第 15 行 Force.com 保存问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:16:49.563

我认为

> 添加新文件夹

是一种方法。所以不要写

> 公共类 addNewFolder

你必须写 `public string addNewFolder() {... return tmpResult;}`

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:09:35.430

看起来是`|`角色导致了错误。您可以尝试像这样逃避`|`角色：

```
System.debug('XIX\\|' + tmpResult); 
```

或者，您可以使用不同的字符：

```
System.debug('XIX-' + tmpResult); 
```

**更新**：在更仔细地查看您的代码后，我意识到[superfell](https://stackoverflow.com/users/41455/superfell)是正确的（请参阅他对您上面问题的评论）。

# java - 对子对象的引用数组未能初始化

> ID：10388392
> 
> 赞同：3
> 
> 时间：2012-04-30T18:03:05.080
> 
> 标签：java, oop

我需要创建对子对象的引用数组。在这种情况下， Room 必须具有对对象的引用数组：`DarkRoom`和`LightRoom`. 在初始化类型数组的位置出现错误`Room`。少了什么东西？

```
public abstract class Room {

    public Room[][] space = new Room[4][4]; // <<Syntax error on token ";",

    space[0][0] = new DarkRoom();
    space[0][1] = new LightRoom();
    space[1][0] = new DarkRoom();
    space[1][1] = new LightRoom();              
}

public class LightRoom extends Room  { ... }

public class DarkRoom extends Room  { ... } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:07:20.533

你的设计太离谱了。一个类不应该包含一组子对象，实际上不应该知道或依赖于它的子类。这既是递归的，也是逻辑上的噩梦。

我建议您将数组从 Room 类中删除到更合适的位置，例如 Hotel 类或 House 类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T18:05:33.893

初始化不应在初始化块或方法之外完成，而是：

```
public Room[][] space = new Room[4][4];
{
    space[0][0] = new DarkRoom();
    space[0][1] = new LightRoom();
    space[1][0] = new DarkRoom();
    space[1][1] = new LightRoom();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T18:07:20.930

它在抱怨 space[][] 块。您不能只在类定义中编写代码。

```
public abstract class Room {

  public Room[][] space = new Room[4][4]; // << error Syntax error on token ";",

  public Room()
  {
    space[0][0] = new DarkRoom();
    space[0][1] = new LightRoom();
    space[1][0] = new DarkRoom();
    space[1][1] = new LightRoom();
  }
  } 
```

# function - 子程序和函数有什么区别？

> ID：10388393
> 
> 赞同：14
> 
> 时间：2012-04-30T18:03:24.550
> 
> 标签：function, terminology, theory, subroutine

> **可能重复：**
> [“功能”和“程序”有什么区别？](https://stackoverflow.com/questions/721090/what-is-the-difference-between-a-function-and-a-procedure)

我在网上搜索了这个问题的答案，得到的答案是函数可以返回值、修改值等，而子程序不能。但我对这种解释并不满意，在我看来，差异应该不仅仅是术语问题。

所以我正在为这个问题寻找一个更具概念性的答案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-30T18:06:36.903

函数反映了函数的数学定义，它是从一个或多个输入到一个值的映射。¹

子例程是具有明确入口点和出口点的任何代码块的通用术语。

但是，这些术语的确切含义会因上下文而异。

* * *

[1\. 显然，这不是函数的正式数学定义。]

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T18:52:50.297

编程语言中函数的一般定义是*一段代码，它接受零个或多个输入值并返回零个或一个输出值*。

最常见的子程序定义是*一个不返回任何内容且通常不接受任何内容的函数*。它只是一段有名字的代码。

实际上，在大多数语言中，函数的声明方式并没有什么不同。所以子程序可以称为函数，但函数不一定可以称为子程序。

还有一些人认为函数和子程序是同一个东西，但名称不同。

[子程序 - 维基百科](http://en.wikipedia.org/wiki/Subroutine)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T19:16:08.717

作为@Oli 答案的补充，值得注意的是，在数学意义上，一个函数必须是“定义明确的”，也就是说，它的输出是由它的输入**唯一**确定的，而编程语言通常不是这种情况。

那些*确实*做出这种保证（以及它们的函数不会引起副作用）的语言被称为[*纯函数式语言*](https://en.wikipedia.org/wiki/Pure_function)，其中一个例子是 Haskell。它们的优点（除其他外）其功能可证明其行为正确，如果功能依赖于外部状态和/或具有副作用，这通常是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:19:38.893

函数必须返回某个值，并且不得更改全局变量或在函数体之外声明的变量。在这种情况下，一个函数只能模仿它的数学对应部分（将一个数学对象映射到另一个数学对象的东西）

子例程不返回任何内容，并且通常是不纯的，因为它必须更改某些全局状态或变量，否则调用它毫无意义。子程序没有数学上的平行。

# r - 在 Windows 上编译 R 包“gsl”

> ID：10388402
> 
> 赞同：1
> 
> 时间：2012-04-30T18:03:51.850
> 
> 标签：r, package, gsl, rcpp

我正在尝试在 Windows 上编译“ **gsl ”（R 包）。**可以通过“32bits-R CMD INSTALL --build”编译。但它不能被“ **64bits R** CMD INSTALL --build”编译。它有来自“ld.exe：**找不到-lgslcblas** ”的错误

我该如何解决？

```
C:\test>C:\R2150\bin\x64\R CMD INSTALL --build gsl_1.9-9.tar.gz
* installing to library 'C:/R2150/library'
* installing *source* package 'gsl' ...
** package 'gsl' successfully unpacked and MD5 sums checked

   **********************************************
   WARNING: this package has a configure script
         It probably needs manual configuration
   **********************************************

** libs
cygwin warning:
  MS-DOS style path detected: C:/R2150/etc/x64/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/R2150/etc/x64/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c air
y.c -o airy.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c bes
sel.c -o bessel.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c cla
usen.c -o clausen.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c cou
lomb.c -o coulomb.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c cou
pling.c -o coupling.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c daw
son.c -o dawson.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c deb
ye.c -o debye.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c dil
og.c -o dilog.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c ell
int.c -o ellint.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c ell
jac.c -o elljac.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c err
or.c -o error.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c exp
int.c -o expint.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c fer
mi_dirac.c -o fermi_dirac.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c gam
ma.c -o gamma.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c geg
enbauer.c -o gegenbauer.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c hyp
erg.c -o hyperg.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c lag
uerre.c -o laguerre.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c lam
bert.c -o lambert.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c leg
endre.c -o legendre.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c log
.c -o log.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c mul
timin.c -o multimin.o
multimin.c: In function 'free_fmin_ptr':
multimin.c:95:27: warning: unused variable 'gsl_state' [-Wunused-variable]
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c pol
y.c -o poly.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c pow
_int.c -o pow_int.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c psi
.c -o psi.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c qrn
g.c -o qrng.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c rng
.c -o rng.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c syn
chrotron.c -o synchrotron.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c tra
nsport.c -o transport.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c tri
g.c -o trig.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c vec
tor.c -o vector.o
gcc -m64 -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include    -I"d:/RCompile/
CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c zet
a.c -o zeta.o
gcc -m64 -shared -s -static-libgcc -o gsl.dll tmp.def airy.o bessel.o clausen.o
coulomb.o coupling.o dawson.o debye.o dilog.o ellint.o elljac.o error.o expint.o
 fermi_dirac.o gamma.o gegenbauer.o hyperg.o laguerre.o lambert.o legendre.o log
.o multimin.o poly.o pow_int.o psi.o qrng.o rng.o synchrotron.o transport.o trig
.o vector.o zeta.o -LC:/GSL_test2/lib -lgsl -lgslcblas -Ld:/RCompile/CRANpkg/ext
ralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/R2150/bi
n/x64 -lR
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgsl.dll.a when sear
ching for -lgsl
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgsl.a when searchin
g for -lgsl
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib\libgsl.a when searchin
g for -lgsl
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgsl.dll.a when sear
ching for -lgsl
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgsl.a when searchin
g for -lgsl
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: cannot find -lgsl
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgslcblas.dll.a when
 searching for -lgslcblas
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgslcblas.a when sea
rching for -lgslcblas
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib\libgslcblas.a when sea
rching for -lgslcblas
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgslcblas.dll.a when
 searching for -lgslcblas
c    :/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: skipping incompatible C:/GSL_test2/lib/libgslcblas.a when sea
rching for -lgslcblas
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-m
ingw32/bin/ld.exe: cannot find -lgslcblas
collect2: ld returned 1 exit status
ERROR: compilation failed for package 'gsl'
* removing 'C:/R2150/library/gsl'

C:\test>C:\R2150\bin\i386\R CMD INSTALL --build SNP.tar.gz
* installing to library 'C:/R2150/library'
* installing *source* package 'SNP' ...
** libs
cygwin warning:
  MS-DOS style path detected: C:/R2150/etc/i386/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/R2150/etc/i386/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
g++  -I"C:/R2150/include" -DNDEBUG -IC:/GSL_test2/include   -I"C:/R2150/library/
Rcpp/include"      -O2 -Wall  -mtune=core2 -c asypow.cpp -o asypow.o
asypow.cpp: In constructor 'Asypow::Asypow(double, double, double, double, doubl
e, double, Rcpp::NumericVector, double, Rcpp::NumericVector, bool)':
asypow.cpp:35:25: warning: 'Asypow::p' will be initialized after [-Wreorder]
asypow.cpp:34:35: warning:   'double Asypow::alpha' [-Wreorder]
asypow.cpp:43:5: warning:   when initialized here [-Wreorder]
g++ -shared -s -static-libgcc -o SNP.dll tmp.def asypow.o C:/R2150/library/R
cpp/lib/i386/libRcpp.a -lgsl -lgslcblas -LC:/GSL_test2/lib -LC:/R2150/bin/i386 -
lR
installing to C:/R2150/library/SNP/libs/i386
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
   'SNP.Rnw'
** testing if installed package can be loaded
* MD5 sums
packaged installation of 'SNP' as SNP_0.21-2.zip

* DONE (SNP) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:08:25.983

是的，您可以通过提供兼容的*64 位*版本来修复它`libgslcblas`。

# c# - 如何制作从 C#“线程安全”调用的 C (P/invoke) 代码

> ID：10388405
> 
> 赞同：11
> 
> 时间：2012-04-30T18:04:11.323
> 
> 标签：c#, c, multithreading, pinvoke

我有一些使用单个全局变量的简单 C 代码。显然这不是线程安全的，所以当我使用 P/invoke 从 C# 中的多个线程调用它时，事情就搞砸了。

**如何为每个线程单独导入此函数，或使其成为线程安全的？**

我尝试声明变量`__declspec(thread)`，但这导致程序崩溃。我还尝试制作一个 C++/CLI 类，但它不允许成员函数是`__declspec(naked)`我需要*的（我正在使用内联汇编）*。我在编写多线程 C++ 代码方面不是很有经验，所以我可能缺少一些东西。

* * *

这是一些示例代码：

C＃

```
[DllImport("MyDll.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int SomeFunction(int parameter1, int parameter2); 
```

C++

```
extern "C"
{
    int someGlobalVariable;
    int __declspec(naked) _someFunction(int parameter1, int parameter2)
    {
        __asm
        {
            //someGlobalVariable read/written here
        }
    }
    int __declspec(dllexport) SomeFunction(int parameter1, int parameter2)
    {
        return _someFunction(parameter1, parameter2);
    }
} 
```

* * *

**[编辑]** : 的结果`SomeFunction()`必须基于某种规定的顺序`someGlobalVariable` *（例如一个 PRNG，以`someGlobalVariable`作为内部状态）*。因此，不能使用互斥锁或其他类型的锁 - 每个线程都*必须*有自己的`someGlobalVariable`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T19:06:43.960

一个常见的模式是有

*   为状态分配内存的函数，
*   一个没有副作用但会改变传入状态的函数，以及
*   释放状态内存的函数。

C# 端看起来像这样：

*用法：*

```
var state = new ThreadLocal<SomeSafeHandle>(NativeMethods.CreateSomeState);

Parallel.For(0, 100, i =>
{
    var result = NativeMethods.SomeFunction(state.Value, i, 42);

    Console.WriteLine(result);
}); 
```

*声明：*

```
internal static class NativeMethods
{
    [DllImport("MyDll.dll", CallingConvention = CallingConvention.Cdecl)]
    public static extern SomeSafeHandle CreateSomeState();

    [DllImport("MyDll.dll", CallingConvention = CallingConvention.Cdecl)]
    public static extern int SomeFunction(SomeSafeHandle handle,
                                          int parameter1,
                                          int parameter2);

    [DllImport("MyDll.dll", CallingConvention = CallingConvention.Cdecl)]
    internal static extern int FreeSomeState(IntPtr handle);
} 
```

*SafeHandle 魔法：*

```
[SecurityPermission(SecurityAction.InheritanceDemand, UnmanagedCode = true)]
[SecurityPermission(SecurityAction.Demand, UnmanagedCode = true)]
internal class SomeSafeHandle : SafeHandle
{
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
    public SomeSafeHandle()
        : base(IntPtr.Zero, true)
    {
    }

    public override bool IsInvalid
    {
        get { return this.handle == IntPtr.Zero; }
    }

    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
    protected override bool ReleaseHandle()
    {
        return NativeMethods.FreeSomeState(this.handle) == 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:09:04.583

就个人而言，如果要在其他地方调用 C 代码，我会在那里使用互斥锁。如果这不能让你的船浮起来，你可以很容易地锁定.Net：

```
static object SomeFunctionLock = new Object();

public static int SomeFunction(int parameter1, int parameter2){
  lock ( SomeFunctionLock ){
    return _SomeFunction( parameter1, parameter2 );
  }
}

[DllImport("MyDll", CallingConvention = CallingConvention.Cdecl)]
internal static extern int _SomeFunction(int parameter1, int parameter2); 
```

**[编辑..]**

正如所指出的，这会序列化对在这种情况下您无法自己执行的功能的访问。您有一些 C/C++ 代码（错误地 IMO）在调用公开函数期间使用全局状态。

正如您所观察到的那样，该`__declspec(thread)`技巧在这里不起作用，那么我将尝试将您的状态/上下文作为不透明的指针来回传递，如下所示：-

```
extern "C" 
{
    int _SomeOtherFunction( void* pctx, int p1, int p2 )
    { 
        return stuff;
    }

    // publically exposed library function
    int __declspec(dllexport) SomeFunction(int parameter1, int parameter2)
    {
        StateContext ctx;
        return _SomeOtherFunction( &ctx, parameter1, parameter2 );
    }

    // another publically exposed library function that takes state
    int __declspec(dllexport) SomeFunctionWithState(StateContext * ctx, int parameter1, int parameter2)
    {
        return _SomeOtherFunction( ctx, parameter1, parameter2 );
    }

    // if you wanted to create/preserve/use the state directly
    StateContext * __declspec(dllexport) GetState(void) {
        ctx = (StateContext*) calloc( 1 , sizeof(StateContext) );
        return ctx;
    }

    // tidy up
    void __declspec(dllexport) FreeState(StateContext * ctx) {
        free (ctx);
    }
} 
```

和之前对应的 C# 包装器：

```
[DllImport("MyDll", CallingConvention = CallingConvention.Cdecl)]
internal static extern int SomeFunction(int parameter1, int parameter2);

[DllImport("MyDll", CallingConvention = CallingConvention.Cdecl)]
internal static extern int SomeFunctionWithState(IntPtr ctx, int parameter1, int parameter2);

[DllImport("MyDll", CallingConvention = CallingConvention.Cdecl)]
internal static extern IntPtr GetState();

[DllImport("MyDll", CallingConvention = CallingConvention.Cdecl)]
internal static extern void FreeState(IntPtr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T18:10:52.127

您可以确保在 C# 代码中一次只调用一次 _someFunction，或者更改 C 代码以将对全局变量的访问包装在同步原语中，如临界区。

我建议更改 C# 代码而不是 C 代码，因为 C# 代码是多线程的，而不是 C 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T19:29:01.737

好消息是，您*可以*将函数创建`__declspec(naked)`为 C++（非 CLI）类的成员：

```
class A {
    int n;
public:
    A() { n = 0; }
    void f(int n1, int n2);
};

__declspec(naked) void A::f(int n1, int n2)
{
    n++;
} 
```

坏消息是，你需要 COM 才能使用这样的类。没错：asm 用 C++ 包装，用 COM 包装，用 RCW 包装，用 CLR 包装……

# google-app-engine - 在谷歌应用引擎上出现大量 http 请求时出现“已达到最大连接数”错误

> ID：10388406
> 
> 赞同：5
> 
> 时间：2012-04-30T18:04:20.540
> 
> 标签：google-app-engine

我正在尝试对我的 GAE 应用程序进行一些压力测试，以了解它的性能如何支持大量同时使用的用户。我尝试让 100 个线程每个在 1 秒内发送一个 https 请求，但其中一半失败，并显示 503 状态代码，显示以下消息：“错误：不允许连接：达到最大连接数。”

这是一个付费应用程序，所以我尝试升级实例类并设置一些空闲实例，但似乎没有任何区别。

同时连接的数量有限制吗？或者这是因为所有请求都是从同一主机生成的？

谢谢

编辑：对凯尔的回应：我正在使用 jmeter 并向 google.com 发送 100 个同时请求并没有任何问题。对尼克的回应：我不希望单个客户同时发送大量请求，我试图模拟 100 个用户每个发送 1 个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:42:31.180

我不知道，一位同事向我们的应用程序添加了一个自定义限制过滤器：) 我从 web.xml 中删除了它，它解决了问题。

# jquery - jQuery UI 滑块上的创建事件中的值不可用？

> ID：10388407
> 
> 赞同：5
> 
> 时间：2012-04-30T18:04:22.397
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

```
$('#foo').slider({
  range: 'min',
  min: 0,
  max: 1000,
  step: 100,
  value: 500,
  create: function( event, ui) {
          var bar = ui.value;
  },
  //etc...
}); 
```

为什么是`bar`undefined 而不是`500`？是否可以将变量分配给`value`事件`create`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T18:34:01.287

你也可以使用

```
create: function( e, ui ) {
    var bar=$(this).slider('value');
} 
```

[**演示。**](http://jsfiddle.net/heera/yBMZv/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:20:42.590

我不确定为什么在实例化滑块时需要获取该值，因为无论如何您都在设置它，但是您可以这样做：

```
$('#foo').slider({
  range: 'min',
  min: 0,
  max: 1000,
  step: 100,
  value: 500,
  create: function( event, ui) {
          var bar = $('#foo').slider("value");
  },
  //etc...
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/t2SUn/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T18:19:47.883

根据他们的 API 文档，create 方法的 ui 参数是空的，因此 var bar = ui.value 是未定义的，以防万一有人想知道它为什么不起作用。

请看[参考](http://api.jqueryui.com/slider/#event-create)

# python - 可以在 Python 中用上下文管理器全局替换函数吗？

> ID：10388411
> 
> 赞同：1
> 
> 时间：2012-04-30T18:04:52.117
> 
> 标签：python, contextmanager

我想在 python 中编写一个上下文管理器，临时禁用全局功能。这样的事情可以通用吗？以下是所需行为的示例：

```
#in module x
def disable_me(): print "do stuff"

#in module y
import x
def run_me():
    print "run_me"
    x.disable_me()

#in module z
import x
import y
with disable_function(x.disable_me):
    y.run_me()

#desired output: run_me 
```

我知道，原则上，我可以暂时分配给`lambda *args, **kwargs: None`，`x.disable_me`但我不清楚上下文管理器是否有足够的信息来实际执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:15:46.337

这实际上很容易做到，只要您不介意传递包含对象和变量的名称，而不是变量本身（这应该不是问题）。

```
from contextlib import contextmanager

class X:
    def disable_me():
        print("do stuff")

def run_me(x):
    print("run_me")
    x.disable_me()

@contextmanager
def disable_function(obj, name):
    temp = getattr(obj, name)
    setattr(obj, name, lambda: None)
    yield
    setattr(obj, name, temp)

x = X()
with disable_function(x, "disable_me"):
    run_me(x) 
```

这将适用于模块和对象，但更容易在这样的一个文件中显示。

# java - 使用 java.bean API 检查非公共类的实例

> ID：10388413
> 
> 赞同：1
> 
> 时间：2012-04-30T18:04:58.150
> 
> 标签：java, clojure, javabeans, introspection

我正在尝试使用 Clojure`(bean obj)`检索与对象相关的不可变映射。

在 Clojure 1.4.0 标准库中，这大致是这样实现的（翻译成不熟悉 Clojure 的人可以访问的伪代码）：

```
import java.beans.PropertyDescriptor;
import java.beans.Introspector;

function introspect(Object obj) {
  Class clazz = obj.getClass();
  PropertyDescriptor descriptors[] =
    Introspector
    .getBeanInfo(clazz)
    .getPropertyDescriptors();
  Map retval = new HashMap();

  for(pd in descriptors) {
    name = pd.getName();
    method = pd.getReadMethod();
    if(method.getParameterTypes().length != 0)
      continue;
    retval.set(name, method.invoke(obj, nil));
  }
  /* the real implementation does more magic below here,
     but the above is sufficient for this question */
  return retval;
} 
```

在大多数情况下，这很好用—— [java.bean.Introspector在其默认的](http://docs.oracle.com/javase/6/docs/api/java/beans/Introspector.html)[BeanInfo](http://docs.oracle.com/javase/6/docs/api/java/beans/BeanInfo.html)实现中不返回非公共方法。但是，当被检查的对象是非公共类的实例时，它会返回该类的公共方法——即使这些方法实际上不能在不引发`IllegalArgumentException`("Can't call public method of non-public班级”）。

如何解决这个问题？我正在查看[java.lang.Class](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)的文档，但我没有看到一种明显的方法来确定不涉及[java.lang.SecurityException](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityException.html)的 try/catch 块的类的权限......我认为这可能是最佳实践。此外，在非公共类上的方法实现公共接口的情况下，应该有某种机制来确定可以安全地调用该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:52:16.477

您可以在类上发现修饰符，因此这样的事情应该允许您检查对象是否是私有类的实例（未经过大量测试）

```
public boolean isInstanceOfPrivateClass(Object o) {
    return Modifier.isPrivate(o.getClass().getModifiers());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:37:28.120

可以通过在继承树中搜索包含相同方法的公共类或接口来解决此问题。在 Clojure 中，这可以按如下方式实现（尽管性能很差）：

```
(defn- public-version-of-method [^Method method]
   "returns a Method built against a public interface or superclass
   declaring this method, or nil if none exists"
   (let [sig (method-sig method)]
     (loop [current-class (. method (getDeclaringClass))
            pending-supers (seq (supers current-class))]
       (if (and current-class
                (Modifier/isPublic (.getModifiers current-class))
                (some (fn [x] (= sig (method-sig x)))
                      (. current-class (getDeclaredMethods))))
         (. current-class (getDeclaredMethod
                           (.getName method)
                           (.getParameterTypes method)))
         (if pending-supers
           (recur (first pending-supers)
                  (next pending-supers))
           nil))))) 
```

...然后调用`.invoke`而`(public-version-of-method m)`不是`m`（如果它返回非 nil 值），或者如果此方法返回 nil 值，则接受该方法不可公开访问。

（上述代码已作为提议的补丁的一部分提交给上游[CLJ-978](http://dev.clojure.org/jira/browse/CLJ-978)提议补丁的一部分提交到上游）。

# asp.net - 使用错误代码自动将用户重定向到登录页面

> ID：10388418
> 
> 赞同：0
> 
> 时间：2012-04-30T18:05:14.983
> 
> 标签：asp.net, ajax, http-status-codes

我有几个使用来自 Asp.Net 页面的 AJAX 请求调用的 Web 服务。如果用户授权失败，我想将他重定向到登录页面。

我面临的问题是我必须在 AJAX 请求的 errorHandler 函数中手动重定向用户。

我想知道是否有一种方法可以从我的网络服务中抛出带有正确错误代码的 HttpException（我不知道是哪个），以便浏览器理解响应并将用户重定向到登录页面？

我尝试`throw new HttpException(401,"Unauthorized access request);`了我的服务调用，但我的 errorHandler 处理了这个异常并且浏览器不会将用户重定向回登录页面。

另外我在想如果我可以使用 HttpModule 来实现这一点，那会是一个更好的解决方案，而不是在服务构造函数中进行授权检查吗？

- 更新 -

添加`HttpContext.Current.Response.RedirectLocation = "login.aspx";`and 后`HttpContext.Current.Response.StatusCode = 307;`，它现在给我一个错误提示`"Resource cannot be found"`。这就是它在 RequestedURL: 中显示的内容`/Web/Services/svcSomething.asmx/login.aspx`。

我如何告诉浏览器重定向位置是一个新页面而不是 web 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:17:05.697

IMO - 您需要在服务器端处理错误（401）并将用户重定向到登录页面。由于您在服务器端没有任何处理程序，因此错误将作为响应传递给客户端，因此您在客户端看到代码以重定向用户...

# css - 如果有背景渐变，gmail 会删除所有样式

> ID：10388424
> 
> 赞同：1
> 
> 时间：2012-04-30T18:05:42.440
> 
> 标签：css, gmail, html-email, email-client

我发现了 gmail 的一个奇怪问题，如果我的 HTML 电子邮件有任何形式的 CSS3 渐变，例如：

```
<th style="text-align:right; font-size:14px; background:#ededed; background-image:-webkit-gradient(linear, left top, left bottom, from(#ededed), to(#ebebeb)); background-image:-moz-linear-gradient(top, #ededed, #ebebeb); font-weight:bold;"> 
```

它将从此删除所有样式`<th>`。一旦我删除了背景渐变的东西，它就可以正常工作并保留其余样式。我尝试将其更改为背景：-moz-linear... 都具有相同的效果。如果 gmail 不喜欢它，它会从该元素中删除所有样式。

有没有其他人经历过这个？有解决这个问题的方法吗？

我已经用 Thunderbird 和 Mac Mail 测试了相同的电子邮件，没有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:10:33.033

一般来说，Gmail 只是在电子邮件中使用 CSS 做一些奇怪的事情。由于 CSS 支持如此成功或失败，我并不感到惊讶，像 CSS3 渐变这样“高级”的东西会完全错误。

您必须考虑的另一件事是*大多数*电子邮件客户端无法识别 CSS 渐变，因此我不会费心尝试。

如果您希望某些内容带有渐变，并且希望它显示给大多数电子邮件客户端，则必须将其创建为作为内容放置的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:09:56.797

CSS 电子邮件不支持它。可用的选项有限。

检查这个[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:40:22.460

如果 Gmail 不喜欢任何给定元素的样式声明的任何部分，它会删除该元素的整个声明。一种解决方法是将声明的部分指定为`!important`. 这样，Gmail 只会忽略它不喜欢的部分。

# c++ - 是否有任何不使用 vtables 和 vptrs 的 C++ 实现？

> ID：10388433
> 
> 赞同：4
> 
> 时间：2012-04-30T18:06:49.153
> 
> 标签：c++, compiler-construction, virtual

> **可能重复：**
> [关于 C++ 中虚拟机制的问题](https://stackoverflow.com/questions/4352032/a-question-about-virtual-mechanism-in-c)

每次出现有关 C++ 和虚函数实现的问题时，有必要添加一个免责声明，即 C++ 标准不要求使用类范围的静态 vtable 和指向 vtable 的指针来实现它们。这是一种如此自然而快速的方法，我从未听说过它以任何其他方式完成，这使得免责声明有些迂腐。

是否有使用另一种方法执行虚函数的 C++ 编译器的示例？

# jquery - 使用 gmap 获取 G_NORMAL_MAP 未定义错误

> ID：10388436
> 
> 赞同：1
> 
> 时间：2012-04-30T18:06:57.340
> 
> 标签：jquery, jquery-gmap3

我正在尝试使用 gmap，它使用 jquery 轻松地将 Google 地图集成到网站上。问题是每次我尝试使用它时，无论我使用什么设置，我都看不到地图，而且我总是在 firebug 中收到此错误：

G_NORMAL_MAP 未定义

该网站本身似乎仍在使用 google map api 的 v2，它在包含它时需要一个密钥，如下所示：

```
<script type="text/javascript" src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=API_KEY"></script> 
```

但当然 v2 已被弃用，我什至无法注册获取 api 密钥。我认为这是问题的一部分？如果是这样，有人知道 gmap 是否仍然可以使用最新版本的 google map api 吗？如果是这样，我如何包含正确的 api 脚本以消除此错误？我试过这个：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

但我仍然得到同样的错误。我将脚本包含在我的页面的标题中，我假设这是正确的位置？我确实找到了另一个关于堆栈溢出的帖子，但有类似的问题，但这是关于 v2 和 api 密钥的。我相信这是一个不同的问题。我想要做的就是找到一个与最新的谷歌地图 api 一起使用的 jquery 解决方案，它允许我向它提供多个纬度/经度位置以显示地图上的点。任何建议/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:15:34.513

好的，没有做足够的研究，他们更新了最新版本的谷歌地图：

[http://labs.mario.ec/jquery-gmap/#docs](http://labs.mario.ec/jquery-gmap/#docs)

# asp.net - 绑定到 ListView fieldName 来自资源

> ID：10388446
> 
> 赞同：3
> 
> 时间：2012-04-30T18:07:26.633
> 
> 标签：asp.net, listview, data-binding, localization, resources

我有一个 ListView，在它的 ItemTemplate 中我绑定了一个字段，例如：
`<%#Eval("FiledName") %>`
但是 FeildName 本身来自资源，例如：
`<asp:Localize Text="<%$ Resources: Resources, productnamefield %>" runat="server" />`
现在我需要类似的东西：
`<%#Eval(<asp:Localize Text="<%$ Resources: Resources, productnamefield %>" runat="server" />) %>`
但它不正确（有编译错误）
我如何将这两者结合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:44:30.320

不会像这项工作那样做：

```
protected void yourListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        DataRowView drv = e.Item.DataItem as DataRowView;

        Label filedName = e.Item.FindControl("FiledNameLabel") as Label;      

        //Get resource value
        string resourceValue = GetGlobalResourceObject("ResourceFile","productnamefield").ToString();  
        filedName.Text = drv[resourceValue].ToString();
    }
} 
```

然后，您将在 ListView 中使用标签来显示该值。

# javascript - 在鼠标悬停时更改背景颜色不透明度

> ID：10388454
> 
> 赞同：5
> 
> 时间：2012-04-30T18:08:23.747
> 
> 标签：javascript, html, css

我有一个 DIV，我想更改背景颜色的不透明度，具体取决于鼠标是否在它上面。

我知道你可以使用`background: rgba(54, 25, 25, .5)`etc，但我想单独设置颜色。有什么办法可以只修改不透明度，而不是颜色。

我可以`opacity: 0.3`，等等，但这会影响整个 DIV，我只想影响背景颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:16:24.787

您可以使背景部分不同`div`并设置 THAT 的不透明度`div`，即

```
<div id="container">
    <div id="background"></div>
    <div id="content">
        <p>Lorum ipsum...</p>
    </div>
</div> 
```

和

```
#container { overflow:hidden; position:relative; }
#background { 
    position:absolute; 
    top:0; 
    left:0; 
    width:100%; 
    height:100%; 
    background:#FF0000;
}
#background:hover { opacity:0.3; }
#content { position:relative; z-index:10; } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T18:25:46.680

没有 html/css 没有内置该选项，但是由于您正在访问/设置 javascript 中的颜色，您不妨添加自己的函数来为您处理。

这是给你的一个例子：

```
<script type="text/javascript">
function RGBA(red,green,blue,alpha) {
    this.red = red;
    this.green = green;
    this.blue = blue;
    this.alpha = alpha;
    this.getCSS = function() {
        return "rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")";
    }
}

// store a copy of the color
var bgColor = new RGBA(255,0,0,0.5);

function setBgOpacity(elem, opac) {
    bgColor.alpha = opac;
    elem.style.backgroundColor = bgColor.getCSS();
}
</script> 
```

然后在 HTML 中使用`onmouseover`事件来改变 bgColor 的不透明度：

```
<div onmouseover="setBgOpacity(this, '0.3');"
     onmousout="setBgOpacity(this, '0.5');">Put your mouse over me</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T18:12:04.387

RGBa 中的 Alpha 值和不透明度之间存在差异。不透明度影响所有子元素，Alpha 不会。

您必须读取当前颜色值，然后使用新的 Alpha 值将其重述为 RGBa。您可能需要将当前的十六进制颜色值转换为十进制三元组来执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T18:12:06.823

如果您依靠 RGBA 来修改背景颜色的不透明度，不，没有办法将其与颜色本身分开设置。您必须为正常和悬停状态声明显式 RGBA 值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T18:12:42.897

不，您不能只编辑 rgba 的 alpha。所以你应该使用`RGB`.`RGBa`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-22T14:25:08.053

如果您想要与容器分开的背景颜色，您可能需要使用`:before`或`:after`。

```
.container { 
    position: relative;

    &:before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: #000;
        opacity: 1;
        z-index: -1;
    }

    &:hover {
        &:before {
            opacity: 0.5;
        }
    }

    .content {
        z-index: 1;
    }
} 
```

当您将鼠标悬停在 上时`.container`，只会影响 的不透明度，`:before`而不影响内容。

# java - 很难理解引用类型是如何工作的

> ID：10388455
> 
> 赞同：2
> 
> 时间：2012-04-30T18:08:24.827
> 
> 标签：java, oop, object

很抱歉问了这样一个基本问题，但我无法理解这个输出是如何产生的。如果有人有时间回答我的愚蠢问题，将不胜感激。提前致谢。

这是代码

```
public class EchoTestDrive {
    public static void main(String[] args) {  
        Echo e1= new Echo();  
        Echo e2= new Echo(); 

        int x=0;  
        while(x < 4) {  
            e1.hello();  
            e1.count=e1.count +1;  

           if(x==3) {  
               e2.count=e2.count+1;  
           }  
           if(x>0) {  
               e2.count=e2.count+e1.count;  
           }
           x=x+1;  
        }

        System.outprintln(e2.count);  
    }
}  

class Echo {  
    int count =0;  
    void hello() {   
        System.outprintln("helloo...");   
    }  
} 
```

这给出了输出：

```
helloo...

helloo...

helloo...

helloo...

10 
```

现在要获得 24 而不是 10，我们声明 Echo e2=e1; 而不是 Echo e2=new Echo; 我想知道这是如何产生这个特定的输出的。对于 10，我可以从字面上将值放入每个值并得到答案，但是当我使它们相等时会发生什么（我无法理解）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T18:13:52.753

当你 make`e2 = e1`时，它​​使 e1 也指向同一个对象。

因此 count 增加了两次，`e1`并且`e2`正在增加它。

当您这样做`Echo e2 = new Echo()`并且`Echo e1 = new Echo()`e1 和 e2 都指向两个不同的对象时，因此`count`e1 的递增不会对`e2.count`.

编辑：

我将添加一张图片来解释相同的内容。

![在此处输入图像描述](../Images/2ebbfe99c988d4dc6e1f2517ee0455c3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:21:21.357

当您使用关键字“new”时，您会创建一个新对象。

例如，以下创建不同的对象

```
Echo e1= new Echo();
Echo e2 new Echo(); 
```

并且两个对象是相互独立的，

但是，如果你这样做

```
Echo e1= new Echo();
Echo e2= e1; 
```

e1 和 e2 都引用同一个对象，您对 e2 所做的每个操作也会影响 e1，反之亦然，因为它们指向同一个 new Echo()。

但是，请考虑以下事项：

```
Echo e1= new Echo();
Echo e2= e1;
e2 = new Echo(); 
```

这会破坏 e1 吗？答案是不。e2 停止引用 e1 而是引用一个新对象（因此是关键字）。

也许这不能直接回答您的问题，但应该澄清几点。

# java - 拖动光标时如何绘制没有间隙的细线？

> ID：10388456
> 
> 赞同：5
> 
> 时间：2012-04-30T18:08:25.123
> 
> 标签：java, image, swing, graphics2d

我有下面这个类，它刷新第 0 层中的 jpeg 文件，第 1 层用于绘制/绘画/素描与粉碎事物相关的任何内容。但是在我的绘图中，当我想做一条细线时，它会断裂。因为鼠标光标移动需要更慢。

如何解决快速鼠标移动，线保持连接？

![用鼠标拖动虚线的图像](../Images/58002f20b59bcc24f0e1836b6c7233d7.png)

## 注释.java

```
package test;

import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Annotation {

  // Image
  private static Image backgroundImage;
  private static BufferedImage _bufImage = null;

  // Enum 
  public  static enum Shape { RECTANGLE, OVAL, LINE }
  private static enum State { IDLE, DRAGGING }       

  private static final Shape INIIIAL_SHAPE = Shape.RECTANGLE;
  private static final Color INITIAL_COLOR = Color.RED;  
  private static Shape _shape = INIIIAL_SHAPE;
  private static Color _color = INITIAL_COLOR;

  private static State _state = State.IDLE;
  private static Point _start = null; 
  private static Point _end   = null;

  // JPanel
  private static JPanel p;
  private static JPanel mp;

  /* Run: */
  public static void main(String args[]) {   
    c();
  }

  /* GUI */
  public static void c() {      
    try {
      backgroundImage = ImageIO.read(new File("/var/tmp/test.jpeg"));
    } catch (IOException e) {
      e.printStackTrace();
    }

    myTimer();
    loadAnnotation();
    loadBackground();

    JFrame f; 
    f = new JFrame();    
    f.setLayout(new BorderLayout());
    f.add(mp);
    f.pack();
    f.setVisible(true);    
  }

  /* 5 seconds to load picture */
  public static void myTimer() {   
    javax.swing.Timer t = new javax.swing.Timer(5000, new ActionListener() {
      public void actionPerformed(ActionEvent ae) {
        try {
          backgroundImage = ImageIO.read(new File("/var/tmp/test.jpeg"));    
          mp.repaint();
        } catch (IOException e) {
          e.printStackTrace();
        }
      }
    });
    t.start();
  }

  /* Layer 0: 
   * Load background picture */
  public static void loadBackground() {    
    mp = new JPanel() {
      public void paintComponent(Graphics g) {       
        super.paintComponent(g);
        g.drawImage(backgroundImage, 0, 0, 1024, 600, null);            
      }
      public Dimension getPreferredSize() {
        return new Dimension(1024, 600);
      }
    };    
    mp.add(p);        
  }

  /* Layer 1: 
   * Annotation: Draw on top of background picture anything! */
  public static void loadAnnotation() {

    p = new JPanel() {
      public void paintComponent(Graphics g) {       
        Graphics2D g2 = (Graphics2D)g;
        g2.setColor(Color.RED);
        if (_bufImage == null) {        
            int w = this.getWidth();
            int h = this.getHeight();
            _bufImage  = new BufferedImage(1024,600, BufferedImage.TRANSLUCENT);
            Graphics2D gc = _bufImage.createGraphics();
        }

        g2.drawImage(_bufImage, null, 0, 0);        
        if (_state == State.DRAGGING) {
          g2.drawLine(_start.x, _start.y, _end.x  , _end.y);
        }        
      }

      public Dimension getPreferredSize() {
        return new Dimension(1024, 600);
      }      
    };

    p.setLayout(new FlowLayout());
    p.addMouseListener(new MouseListener() {
      @Override
      public void mouseClicked(MouseEvent me) {
      }

      @Override
      public void mousePressed(MouseEvent me) {
      }

      @Override
      public void mouseReleased(MouseEvent me) {
        //_state = State.IDLE;
        _state = State.IDLE;
      }

      @Override
      public void mouseEntered(MouseEvent me) {
      }

      @Override
      public void mouseExited(MouseEvent me) {
      }
    });

    p.addMouseMotionListener(new MouseMotionListener() {

      @Override
      public void mouseDragged(MouseEvent me) {
        System.out.println("drag");        
        _state = State.DRAGGING; 
        _start = me.getPoint();
        _end   = _start;
        if (_state == State.DRAGGING) {
            Graphics2D g2 = _bufImage.createGraphics();
            g2.setColor(Color.red);
            g2.setStroke(new BasicStroke(90));   
            g2.fillOval(_start.x, _start.y, 10, 10);            
            p.repaint();                        
        }         
      }

      @Override
      public void mouseMoved(MouseEvent me) {
        System.out.println("move");
      }
    });

    JButton pm = new JButton("+");
    pm.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent ae) {
      }
    });    
    p.add(pm);       
    p.setOpaque(true);    
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:53:35.783

![在此处输入图像描述](../Images/3ff95a8af1a385a7ec4142c1bd81de84.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Annotation {

  // Image
  private static Image backgroundImage;
  private static BufferedImage _bufImage = null;

  // Enum
  public  static enum Shape { RECTANGLE, OVAL, LINE }
  private static enum State { IDLE, DRAGGING }

  private static final Shape INIIIAL_SHAPE = Shape.RECTANGLE;
  private static final Color INITIAL_COLOR = Color.RED;
  private static Shape _shape = INIIIAL_SHAPE;
  private static Color _color = INITIAL_COLOR;

  private static State _state = State.IDLE;
  private static Point _start = null;
  private static Point _end   = null;

  // JPanel
  private static JPanel p;
  private static JPanel mp;

  /* Run: */
  public static void main(String args[]) {
    c();
  }

  /* GUI */
  public static void c() {
    try {
        URL url = new URL("http://pscode.org/media/stromlo2.jpg");
      backgroundImage = ImageIO.read(url);
    } catch (Exception e) {
      e.printStackTrace();
    }

    loadAnnotation();
    loadBackground();

    JFrame f;
    f = new JFrame();
    f.setLayout(new BorderLayout());
    f.add(mp);
    f.pack();
    f.setVisible(true);
  }

  /* Layer 0:
   * Load background picture */
  public static void loadBackground() {
    mp = new JPanel() {
      public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(backgroundImage, 0, 0, getWidth(), getHeight(), null);
      }
      public Dimension getPreferredSize() {
        return new Dimension(backgroundImage.getWidth(this), backgroundImage.getHeight(this));
      }
    };
    mp.add(p);
  }

  /* Layer 1:
   * Annotation: Draw on top of background picture anything! */
  public static void loadAnnotation() {

    p = new JPanel() {
      public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D)g;
        g2.setColor(Color.RED);
        if (_bufImage == null) {
            int w = this.getWidth();
            int h = this.getHeight();
            _bufImage  = new BufferedImage(1024,600, BufferedImage.TRANSLUCENT);
            Graphics2D gc = _bufImage.createGraphics();
        }

        g2.drawImage(_bufImage, null, 0, 0);
        if (_state == State.DRAGGING) {
          g2.drawLine(_start.x, _start.y, _end.x  , _end.y);
        }
      }

      public Dimension getPreferredSize() {
        return new Dimension(1024, 600);
      }
    };

    p.setLayout(new FlowLayout());
    p.addMouseListener(new MouseListener() {
      @Override
      public void mouseClicked(MouseEvent me) {
      }

      @Override
      public void mousePressed(MouseEvent me) {
      }

      @Override
      public void mouseReleased(MouseEvent me) {
        //_state = State.IDLE;
        _state = State.IDLE;
      }

      @Override
      public void mouseEntered(MouseEvent me) {
      }

      @Override
      public void mouseExited(MouseEvent me) {
      }
    });

    p.addMouseMotionListener(new MouseMotionListener() {

      @Override
      public void mouseDragged(MouseEvent me) {
        _state = State.DRAGGING;
        _end   = me.getPoint();
        if (_state == State.DRAGGING) {
            Graphics2D g2 = _bufImage.createGraphics();
            g2.setColor(Color.red);
            g2.setStroke(new BasicStroke(2));
            g2.drawLine(_start.x, _start.y, _end.x, _end.y);
            p.repaint();
        }
        _start = _end;
      }

      @Override
      public void mouseMoved(MouseEvent me) {
        //System.out.println("move");
        _start = me.getPoint();
      }
    });

    JButton pm = new JButton("+");
    pm.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent ae) {
      }
    });
    p.add(pm);
    p.setOpaque(true);
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:12:20.363

我通过在点之间绘制矩形解决了这个问题，使用描边大小（基本描边）作为高度。这听起来像是一个令人讨厌的解决方案，但实际上它做得很好

# actionscript - 如何使用 Agal 在 Stage3D 中的位图上绘制一条线？

> ID：10388458
> 
> 赞同：1
> 
> 时间：2012-04-30T18:08:28.640
> 
> 标签：actionscript, stage3d, agal

如何使用 Agal 在 Stage3D 中的位图上绘制一条线？有人可以提供代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:30:10.853

如果你使用 Starling，你可以试试这个：

```
/**
 * Class Line
 * @author Leandro Barreto 2012
 * @version 1.0
 **/

package starling.utils
{
    import starling.display.Quad;
    import starling.display.Sprite;

    public class Line extends Sprite
    {
        private var baseQuad:Quad;
        private var _thickness:Number = 1;
        private var _color:uint = 0x000000;

        public function Line()
        {
            baseQuad = new Quad(1, _thickness, _color);
            addChild(baseQuad);
        }

        public function lineTo(toX:int, toY:int):void
        {
            baseQuad.width = Math.round(Math.sqrt((toX*toX)+(toY*toY)));
            baseQuad.rotation = Math.atan2(toY, toX);
        }

        public function set thickness(t:Number):void
        {
            var currentRotation:Number = baseQuad.rotation;
            baseQuad.rotation = 0;
            baseQuad.height = _thickness = t;
            baseQuad.rotation = currentRotation;
        }

        public function get thickness():Number
        {
            return _thickness;
        }

        public function set color(c:uint):void
        {
            baseQuad.color = _color = c;
        }

        public function get color():uint
        {
            return _color;
        }
    }
} 
```

有人在 Starling 论坛上建议我们创建一个 Line 类，它绘制几个连接两点的四边形。本教程展示了如何使用 AGAL 为着色器创建多边形：

[http://wiki.starling-framework.org/manual/custom_display_objects](http://wiki.starling-framework.org/manual/custom_display_objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:15:08.610

我最近写了一个简单的库来在 Stage3D 上画线。
它被称为 Zebroid，[https://github.com/luwes/Zebroid](https://github.com/luwes/Zebroid)

Zebroid 还不支持线帽或接头。

# facebook - 注销 facebook 连接会话

> ID：10388460
> 
> 赞同：0
> 
> 时间：2012-04-30T18:08:50.850
> 
> 标签：facebook, codeigniter, session, connect, logout

我正在尝试将我的网站与 facebook 连接集成以处理 facebook 注册和 facebook 登录。我正在使用 codeigniter 框架。但我现在遇到了这个问题：

1.  当前的 facebook 登录用户是“test1”。我去我的网站注册 facebook，一切正常，“test1”的信息存储在我的数据库中。但是，在我从 facebook 注销 test1 并在 facebook 上登录“test2”后，我回到我的网站并再次使用 facebook 进行注册，它仍然存储了“test1”的信息。

2.  我使用 ion auth 库来处理用户从我的站点注销。但是，在我切换 facebook 测试用户帐户并再次执行“使用 facebook 登录”后，它仍然会获得以前的 facebook 用户。

基于上述 2 个案例，似乎 facebook 会话没有被清除？这个问题困扰了很久，求大神帮忙！

我使用它来获取用户数据： $fb_usr = $this->fb_connect->user; （似乎无论 facebook 用户如何变化，fb_connect 总是返回相同的用户）

fb_connect 是这样的：

```
 <?php
        include(APPPATH.'libraries/facebook/facebook.php');

        class Fb_connect extends Facebook{

            //declare public variables
            public  $user           = NULL;
            public  $user_id        = FALSE;

            public $fbLoginURL  = "";
            public $fbLogoutURL = "";

            public $fb          = FALSE;
            public $fbSession   = FALSE;
            public $appkey      = 0;

            //constructor method.
            public function __construct() 
            {
                        $CI = & get_instance();
                        $CI->config->load("facebook",TRUE);
                        $config = $CI->config->item('facebook');
                        parent::__construct($config);
                        $this->user_id = $this->getUser(); // New code
                        $me = null;
                        if ($this->user_id) {
                            try {
                                $me = $this->api('/me');
                                $this->user = $me;
                                } catch (FacebookApiException $e) {
                                    error_log($e);
                                }
                }   

                if ($me) {
                    $this->fbLogoutURL = $this->getLogoutUrl();
                } else {
                    $this->fbLoginURL = $this->getLoginUrl();
                }           
            } //end Fb_connect() function
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:33:43.210

我认为您需要做的是为您的 getLogoutUrl() 调用设置“下一个”参数。像这样的东西：

```
$args['next'] = site_url('logout'); // replace "logout" with your controller which will clear the session
$fbLogoutURL = $facebook->getLogoutUrl($args); 
```

然后，在设置为“下一步”的控制器中，您需要清除会话数据。

```
class Logout extends CI_Controller {
    public function index() {
        $facebook->destroySession();       
        $this->session->sess_destroy();  // Assuming you have session helper loaded
        $this->load->view('logout');
    }
} 
```

让我知道这是否有帮助。

# python - Matplotlib 不同大小的子图

> ID：10388462
> 
> 赞同：329
> 
> 时间：2012-04-30T18:09:02.477
> 
> 标签：python, plot, matplotlib, figure

我需要在一个图中添加两个子图。一个子图需要大约是第二个子图的三倍（相同高度）。我使用`GridSpec`和`colspan`参数完成了这个，但我想这样做，`figure`这样我就可以保存到 PDF。我可以使用构造函数中的参数调整第一个图`figsize`，但是如何更改第二个图的大小？

* * *

## 回答 #1

> 赞同：518
> 
> 时间：2016-03-09T01:37:23.633

*   另一种方法是使用该`subplots`函数并通过`gridspec_kw`
    *   [matplotlib 教程：使用 GridSpec 和其他函数自定义图形布局](https://matplotlib.org/stable/tutorials/intermediate/gridspec.html)
    *   [`matplotlib.gridspec.GridSpec`](https://matplotlib.org/stable/api/_as_gen/matplotlib.gridspec.GridSpec.html#matplotlib.gridspec.GridSpec)有可用的`gridspect_kw`选项

```
import numpy as np
import matplotlib.pyplot as plt 

# generate some data
x = np.arange(0, 10, 0.2)
y = np.sin(x)

# plot it
f, (a0, a1) = plt.subplots(1, 2, gridspec_kw={'width_ratios': [3, 1]})
a0.plot(x, y)
a1.plot(y, x)

f.tight_layout()
f.savefig('grid_figure.pdf') 
```

[![在此处输入图像描述](../Images/0f470be29f7052af2dd19431fcce576f.png)](https://i.stack.imgur.com/aBJVa.png)

*   因为这个问题是规范的，所以这里是一个带有垂直子图的例子。

```
# plot it
f, (a0, a1, a2) = plt.subplots(3, 1, gridspec_kw={'height_ratios': [1, 1, 3]})

a0.plot(x, y)
a1.plot(x, y)
a2.plot(x, y)

f.tight_layout() 
```

[![在此处输入图像描述](../Images/ef5e05f12414a38e8b7b7d1340703165.png)](https://i.stack.imgur.com/a2djk.png)

* * *

## 回答 #2

> 赞同：253
> 
> 时间：2012-05-02T09:53:35.537

您可以使用[`gridspec`](http://matplotlib.org/users/gridspec.html)和`figure`：

```
import numpy as np
import matplotlib.pyplot as plt 
from matplotlib import gridspec

# generate some data
x = np.arange(0, 10, 0.2)
y = np.sin(x)

# plot it
fig = plt.figure(figsize=(8, 6)) 
gs = gridspec.GridSpec(1, 2, width_ratios=[3, 1]) 
ax0 = plt.subplot(gs[0])
ax0.plot(x, y)
ax1 = plt.subplot(gs[1])
ax1.plot(y, x)

plt.tight_layout()
plt.savefig('grid_figure.pdf') 
```

[![在此处输入图像描述](../Images/272d2122a8cd798ee313139a5a644a85.png)](https://i.stack.imgur.com/hKVwB.png)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-05-01T12:17:00.953

我使用`pyplot`'s `axes`object 手动调整大小而不使用`GridSpec`：

```
import matplotlib.pyplot as plt
import numpy as np
x = np.arange(0, 10, 0.2)
y = np.sin(x)

# definitions for the axes
left, width = 0.07, 0.65
bottom, height = 0.1, .8
bottom_h = left_h = left+width+0.02

rect_cones = [left, bottom, width, height]
rect_box = [left_h, bottom, 0.17, height]

fig = plt.figure()

cones = plt.axes(rect_cones)
box = plt.axes(rect_box)

cones.plot(x, y)

box.plot(y, x)

plt.show() 
```

[![在此处输入图像描述](../Images/10b728c7d1c1097e64d4537ced92cd8e.png)](https://i.stack.imgur.com/0xoSF.png)

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-04-08T16:31:59.370

可能最简单的方法是使用`subplot2grid`，在[使用 GridSpec 自定义子图位置中](http://matplotlib.org/users/gridspec.html)描述。

```
ax = plt.subplot2grid((2, 2), (0, 0)) 
```

等于

```
import matplotlib.gridspec as gridspec
gs = gridspec.GridSpec(2, 2)
ax = plt.subplot(gs[0, 0]) 
```

所以bmu的例子变成了：

```
import numpy as np
import matplotlib.pyplot as plt

# generate some data
x = np.arange(0, 10, 0.2)
y = np.sin(x)

# plot it
fig = plt.figure(figsize=(8, 6))
ax0 = plt.subplot2grid((1, 3), (0, 0), colspan=2)
ax0.plot(x, y)
ax1 = plt.subplot2grid((1, 3), (0, 2))
ax1.plot(y, x)

plt.tight_layout()
plt.savefig('grid_figure.pdf') 
```

[![在此处输入图像描述](../Images/b2c0dac53fdbf077d4baf9eefea81be7.png)](https://i.stack.imgur.com/Wqbsr.png)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2021-04-10T05:08:37.800

以一种简单的方式，也可以在没有以下情况下完成不同大小的子绘图`gridspec`：

```
plt.figure(figsize=(12, 6))
ax1 = plt.subplot(2,3,1)
ax2 = plt.subplot(2,3,2)
ax3 = plt.subplot(2,3,3)
ax4 = plt.subplot(2,1,2)
axes = [ax1, ax2, ax3, ax4] 
```

![输出](../Images/2dc9e9f9ac74231cc7a8c37d5e931020.png)

# excel - 计算电子表格中的小计行

> ID：10388463
> 
> 赞同：0
> 
> 时间：2012-04-30T18:09:03.210
> 
> 标签：excel, spreadsheet, google-sheets, openoffice-calc, libreoffice

我有一个如下所示的电子表格：

```
 A         B               C
1  Section   Task            Dev Hours
2  4         PROJECT TOTAL   =c3+....
3  4.1       Public site     =c4+c5+...
4  4.1.1     User Accounts   2
5  4.1.2     Daily Deal      =sum(c6:c7)
6  4.1.2.1   Model           4
7  4.1.2.2   View            2 
```

我想要的是一种更好的方法来计算 C 列中非叶行的小计。当我添加/删除行时，使用 =sum 很容易出错。另外我只能在所有孩子都离开时使用它，否则它会重复计算。使用加法更容易出错并且更烦人。有没有办法告诉 {Excel,OpenOffice,LibreOffice,Google Documents} 根据 A 列中的大纲数字汇总所有后续子行的 C 列中的值？我会喜欢这样的功能：

```
=sum_children(A2) 
```

其中 A2 是具有当前行大纲编号的单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:30:49.563

您可以使用数组公式来执行此操作。对于下面的公式，我假设您的`Section`值已按上面所示进行排序。在`C2`中，粘贴以下内容并按`Ctrl`+ `Shift`+输入公式`Enter`：

```
=SUM(IF(LEFT($A3:$A$7,LEN(A2))=A2,IF(ISERROR(FIND(".",$A3:$A$7,LEN(A2)+2)),$C3:$C$7,0),0)) 
```

然后，您应该能够复制单元格 C2 并粘贴到下面代表父节的任何单元格上。

基本上，此公式检查当前行下方的 A 列以查找以当前部分开头的字符串，并且仅对那些在当前部分 +“”之后没有额外时间段的字符串求和开发时间。

为避免在向表格中添加其他部分时必须更新这些公式，您可以使数组的端点（`A7`在`C7`示例公式中）超出表格底部的一行（例如`A50`和`C50`）。这可能会稍微影响性能，但实际上只有当您过度使用并给自己一个 50,000 行垫时。

# c# - WPF DataGrid CellEditEnded 事件

> ID：10388466
> 
> 赞同：5
> 
> 时间：2012-04-30T18:09:20.627
> 
> 标签：c#, wpf, wcf, data-binding, datagrid

每次用户编辑我的 DataGrid 单元格的内容时，我都想知道。有 CellEditEnding 事件，但在对集合进行任何更改之前调用它，DataGrid 绑定到该事件。

我的数据网格绑定到`ObservableCollection<Item>`，其中`Item`是一个类，从 WCF mex 端点自动生成。

每次用户提交对集合的更改时，最好的方法是什么。

*更新*

`Item`我已经尝试过 CollectionChanged 事件，结束它在被修改时不会被触发。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-01T23:23:51.233

您可以`UpdateSourceTrigger=PropertyChanged`在数据网格的属性成员的绑定上使用。这将确保当 CellEditEnding 被触发时，更新已经反映在 observable 集合中。

见下文

```
<DataGrid SelectionMode="Single"
          AutoGenerateColumns="False"
          CanUserAddRows="False"
          ItemsSource="{Binding Path=Items}" // This is your ObservableCollection
          SelectedIndex="{Binding SelectedIndexStory}">
          <e:Interaction.Triggers>
              <e:EventTrigger EventName="CellEditEnding">
                 <cmd:EventToCommand PassEventArgsToCommand="True" Command="{Binding EditStoryCommand}"/> // Mvvm light relay command
               </e:EventTrigger>
          </e:Interaction.Triggers>
          <DataGrid.Columns>
                    <DataGridTextColumn Header="Description"
                        Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}" /> // Name is property on the object i.e Items.Name
          </DataGrid.Columns>

</DataGrid> 
```

UpdateSourceTrigger = PropertyChanged 将在目标属性更改时立即更改属性源。

这将允许您捕获对项目的编辑，因为将事件处理程序添加到可观察的集合更改事件不会触发集合中对象的编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:10:01.427

如果您需要知道已编辑的 DataGrid 项目是否属于特定集合，您可以在 DataGrid 的 RowEditEnding 事件中执行以下操作：

```
 private void dg_RowEditEnding(object sender, DataGridRowEditEndingEventArgs e)
    {
        // dg is the DataGrid in the view
        object o = dg.ItemContainerGenerator.ItemFromContainer(e.Row);

        // myColl is the observable collection
        if (myColl.Contains(o)) { /* item in the collection was updated! */  }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-03T09:55:55.597

我用“ `CurrentCellChanged`”代替。

```
 <DataGrid
        Grid.Row="1"
        HorizontalAlignment="Center"
        AutoGenerateColumns="True"
        AutoGeneratingColumn="OnAutoGeneratingColumn"
        ColumnWidth="auto"
        IsReadOnly="{Binding IsReadOnly}"
        ItemsSource="{Binding ItemsSource, UpdateSourceTrigger=PropertyChanged}">
        <b:Interaction.Triggers>
            <!--  CellEditEnding  -->
            <b:EventTrigger EventName="CurrentCellChanged">
                <b:InvokeCommandAction Command="{Binding CellEditEndingCmd}" />
            </b:EventTrigger>
        </b:Interaction.Triggers>
    </DataGrid> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T18:16:04.957

您应该在您`ObservableCollection`的事件上添加一个事件处理程序`CollectionChanged`。

代码片段：

```
_listObsComponents.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(ListCollectionChanged);

// ...

    void ListCollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        /// Work on e.Action here (can be Add, Move, Replace...)
    } 
```

when `e.Action`is `Replace`，这意味着您的列表中的一个对象已被替换。此事件当然是在应用更改后触发的

玩得开心！

# c - 结合XML配置功能的读写。

> ID：10388468
> 
> 赞同：0
> 
> 时间：2012-04-30T18:09:41.930
> 
> 标签：c, xml, configuration, libxml2

我正在使用 libxml2 在 c 中创建和读取包含我正在编写的程序的配置信息的 XML 文件。该程序制作自己的配置文件（或另一个程序向其发送配置文件并要求程序根据配置文件运行），因此 XML 配置文件不需要非常容易让人阅读。

这些配置文件包含很多值并且非常长。所以现在我有一个生成 XML 文件的函数和另一个读取 XML 文件的函数。但是，任何时候我更改写入 XML 函数都比我需要更改读取 xml 函数。**所以没有实际的代码重复，而是非常接近的东西（即BAD）**，并且由于配置文件太长，尝试确保所有内容都在读取和写入相同的东西是相当乏味的。

这是当前的设置。

```
struct config_data
{
    // category one
    int X
    int Y

    // category two
    int Z
    int A
}

int makeXMLsheet(char* fileout)
{
    xmlDocPtr doc = NULL;       /* document pointer */
    xmlNodePtr root_node = NULL; /* node pointers */   

    LIBXML_TEST_VERSION;

    doc = xmlNewDoc((xmlChar*) "1.0");
    root_node = xmlNewNode(NULL, BAD_CAST "configuration_file");
    xmlDocSetRootElement(doc, root_node);    

    // catogory one
    xmlNodePtr category_one =  xmlNewChild(root_node, NULL, BAD_CAST "category_one", NULL);    

    xmlNewChild(category_one, NULL, BAD_CAST "x", BAD_CAST "12345");
    xmlNewChild(category_one, NULL, BAD_CAST "y", BAD_CAST "1");

     // catogory two
    xmlNodePtr category_two =  xmlNewChild(root_node, NULL, BAD_CAST "category_two", NULL);    

    xmlNewChild(category_two, NULL, BAD_CAST "Z", BAD_CAST "12345");
    xmlNewChild(category_two, NULL, BAD_CAST "A", BAD_CAST "1");

    xmlSaveFormatFileEnc(fileout, doc, "UTF-8", 1);
    xmlFreeDoc(doc);
    xmlCleanupParser();

    return 0;
}

int readXMLsheet(char* filename,struct *config_data)
 {
     xmlDocPtr doc = getdoc(filename);

     config_data->X = getIntegerFromXML(0,doc,(xmlChar*)"//configuration_file/category_one/X"); 
     config_data->Y = getIntegerFromXML(0,doc,(xmlChar*)"//configuration_file/category_one/Y");
     config_data->Z = getIntegerFromXML(0,doc,(xmlChar*)"//configuration_file/category_two/Z");
     config_data->A = getIntegerFromXML(0,doc,(xmlChar*)"//configuration_file/category_two/a");

    xmlFreeDoc(doc);
     return 0;
 } 
```

在哪里

```
 int getIntegerFromXML(int defaultValue, xmlDocPtr doc, xmlChar *xpath) 
```

就像它的名字所说的那样，从打开的具有 xpath 位置的 XML 文档中获取一个整数，如果它失败了，它会用默认值填充它，这样程序就不会崩溃和烧毁。

**所以我想尝试一些如何将读取和写入功能合二为一。**与我在配置结构中实际拥有的值的数量相比，我的示例结构 config-data 很小，因此将它们组合起来将使跟踪一切变得更加容易。

所以我在想这样的事情。

```
int openXMLvalue(X, Y, Z, readOrWrite, defaultValue, value); 
```

父节点在哪里`X, Y, Z`，但可能多于或少于 3 个。

关于如何做到这一点的任何想法？也许制作某种类型的数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:12:40.887

由于配置文件较大，我们切换到使用 sqlite。然后我们制作了一个读取数据库并制作 xml 表单的函数，我们制作了一个读取 xml 表单并填充数据库的函数，并处理了打印数据库以填充 C 结构的函数。认为这将使生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:28:31.617

我会制作填充（或序列化）通用配置结构的通用读写函数。

一个简化的案例是使用 get/set 方法在内存中创建一个键/值结构。通用的 writeToXml 函数将简单地创建具有包含值的键名的元素。

如果有必要，可以使用分层树结构代替，并且可能在读取配置文件时添加一些验证规则（一个简单的方法是使用 XML 模式进行验证）来验证所需的配置值是否存在并且有效。

添加、更改或删除配置值只需要以下步骤（请注意，读取或写入功能都不需要更新）：

*   决定配置文件的新格式
*   更新现有配置文件
*   使用配置值更新应用程序中的任何位置
*   可选择更新验证规则

# ruby-on-rails - rails 从数据库数组中创建一个集合选择

> ID：10388470
> 
> 赞同：0
> 
> 时间：2012-04-30T18:09:56.160
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我如何从整数 db 字段或任何其他类型的数字数组中创建一个集合选择？

例子：

**来自数据库的项目**

```
<Item id: 167, name: "x", quantity: 6, 
created_at: "2012-04-27 18:49:07", updated_at: "2012-04-27 18:49:07" > 
```

**项目展示**

```
<%= select("item", "quantity", 1..10) %> 
```

我只想显示数据库的数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:16:30.617

尝试这个：

```
select("item", "quantity", Item.all.collect {|p| [ p.name, p.id ]}) 
```

**编辑**

那这个呢：

```
 select("item", "quantity", Item.all.collect.(&:id)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:18:54.377

[在rails api](http://api.rubyonrails.org/)中有很多处理选择标签和选项的方法：`collection_select`，`grouped_collection_select`...在搜索字段中键入“collection_sel”应该会显示很多。在我看来，你想要的是`collection_select`。

# wmi - 如何通过 WMI 在 NLB 中设置其他集群 IP

> ID：10388477
> 
> 赞同：0
> 
> 时间：2012-04-30T18:10:56.010
> 
> 标签：wmi, nlb

Microsoft NLB 支持其他群集 IP，有人知道我是否可以通过 WMI 获取/设置它们吗？我已经看过“root\MicrosoftNLB”“MicrosoftNLB_ClusterSetting”类，“ClusterIPAddress”只返回主IP。

感谢任何帮助！谢谢，

吉兰特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:12:33.803

我想通了。您可以在 PowerShell 中执行此操作！

即使您可以拥有多个专用 IP (DIP)，您也无法真正使用额外的 clusterIP 或 VIP 做任何事情。不知道为什么他们增强了 DIP 而不是 VIP。

# c# - 将 base64string 转换回 byte[]

> ID：10388479
> 
> 赞同：0
> 
> 时间：2012-04-30T18:10:59.947
> 
> 标签：c#, string, bytearray

我想使用 C#通过 using将 a 转换`byteArray`为，然后我想通过将发布数据发送到 PHP 页面来发送此字符串以使用 MySQL 保存。我的问题是我无法使用此方法将这个字符串转换回一个，因为在从 PHP 页面检索到这个字符串之后（在它从 MySQL 获取数据之后），它告诉我方法上的参数是错误的。`base64string``Convert.ToBase64String()``byteArray``Convert.FromBase64String()`

我不知道问题出在哪里，我该如何解决？

我的代码：

```
public static string BitmapToString(BitmapImage img)
{
    try
    {
        WriteableBitmap bmp = new WriteableBitmap(img);
        byte[] byteArray = null;
        string str = null;
        MemoryStream stream = new MemoryStream();
        bmp.SaveJpeg(stream, bmp.PixelWidth, bmp.PixelHeight, 0, 100);
        byteArray = stream.ToArray();
        str = Convert.ToBase64String(byteArray);
        return str;
    }
    catch (System.Exception ex)
    {
        Console.WriteLine(ex.StackTrace);
    }
    return null;
}

public static BitmapImage StringToBitmap(string str)
{
    try
    {
        byte[] byteArray = Convert.FromBase64String(str);
        Stream memStream = new MemoryStream(byteArray);
        BitmapImage img = null;
        MemoryStream stream = new MemoryStream(byteArray);
        stream.Seek(0, SeekOrigin.Begin);
        img = new BitmapImage();
        img.SetSource(stream);
        return img;
    }
    catch (System.Exception ex)
    {
        Console.WriteLine(ex.StackTrace);
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:17:47.280

`Convert.FromBase64String()`将为`Convert.ToBase64String()`结果，但您的应用程序中可能有未转换为的输入`Base64String`，这些情况可能会失败。

这不是这两种方法的问题。检查`Convert.ToBase64String()`结果以及从数据库中读取结果时得到的结果。

# ios - 如何将 json post 值发送到远程服务器并使用 iOS 5 获取结果？

> ID：10388482
> 
> 赞同：0
> 
> 时间：2012-04-30T18:11:48.837
> 
> 标签：ios, json, http, post

我是 IOS 5 的新手，我正在尝试将 json 值发送到远程 php 服务器，这会将结果发回给我。到目前为止，这是我的调度电话：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData* data = [NSData dataWithContentsOfURL: http://www.someurl/example.php];
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
}); 
```

我知道这主要是一个 GET 请求。如何发送帖子值？任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:34:58.433

您将不得不求助于 NSURLRequest（或另一个请求对象）来执行 POST。试试这个问题，[Append data to a POST NSUrlRequest](https://stackoverflow.com/questions/6148900/append-data-to-a-post-nsurlrequest)，作为如何发送数据和处理结果的示例。

# jquery - jquery更改按钮id

> ID：10388492
> 
> 赞同：1
> 
> 时间：2012-04-30T18:12:30.747
> 
> 标签：jquery, button

如何在函数运行期间更改按钮的 ID？

我试过了：

```
$('#follow').attr('id','unfollow'); 
```

但是当我尝试运行一个`$("#unfollow").click(function(){`函数时没有运气。

我怎样才能做到这一点？

## 更新

```
$(function() { 

  $("#follow").click(function(){ 
    $('#follow').attr('id','unfollow'); 
    alert("follow");
    });

  $(document).on('click', '#unfollow', function() {
    $('#unfollow').attr('id','follow'); 
    alert("unfollow"); 
    });

}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T18:14:50.130

您编写的代码应该可以工作，但是您是否在更改 id 属性后绑定了 click 事件？

如果没有，则[`on`](http://api.jquery.com/on/)改为使用绑定点击事件。

```
$(document).on('click', '#unfollow', function() { ... }); 
```

顺便一提：

我不认为更改元素的 ID 是一个好习惯。ID 在页面上应该是唯一的。

为什么不通过更改元素类（使用[addClass](http://api.jquery.com/addClass/)和[removeClass](http://api.jquery.com/removeClass/)方法）或向元素添加数据（通过[data](http://api.jquery.com/data/)方法）来做到这一点？

**更新**

尝试这样的事情：

```
$(document).on('click', '.follow', function() {
    alert('follow');
    $(this).removeClass('follow').addClass('unfollow');
});
$(document).on('click', '.unfollow', function() {
    alert('unfollow');
    $(this).removeClass('unfollow').addClass('follow');
}); 
```

**注意我如何使用使用类而不是 id 的选择器，因此您必须为元素提供正确的类（初始状态的关注/取消关注）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:15:40.283

```
$('#follow').attr('id','unfollow'); 
```

更改`id`then 后：

首先试试这个：

```
$("#unfollow").click(function(){

}); 
```

否则现场活动：

```
$('body').on('click', '#unfollow', function(){

}); 
```

**注意：** `live()`已弃用。因此，如果您真的需要现场活动，请尝试第二个，并且用户 jQuery 1.7.x

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:16:30.010

问题是只有在元素当时存在`$("#unfollow").click(function(){`时才绑定到元素。`$("#unfollow")`我的猜测是您在更改 ID 之前将 click 事件绑定到其他地方。

您可以将其设为现场活动，如下所示：

```
$(document).on('click', '#unfollow', function(){ 
```

注意：`document`您应该使用更接近的父元素而不是`#unfollow`. 只要确保该元素保留在 DOM 中，如果它被删除，事件也是如此。

`$("#unfollow").click(function(){`或者，您可以在更改 ID 后重新绑定事件（使用）：

```
$('#follow').attr('id','unfollow');
$("#unfollow").click(function(){ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T18:15:34.153

为了将事件附加到尚不存在的元素，您必须使用[$.live](http://api.jquery.com/live/)

```
$("#unfollow").live('click', function(){ 
```

# java - Java：使用扫描仪读取布尔值失败。

> ID：10388497
> 
> 赞同：0
> 
> 时间：2012-04-30T18:12:55.803
> 
> 标签：java

```
import java.util.Scanner;

public class Cardhelp2{

private static String[] pairArray={"A,A","K,K","Q,Q","J,J","10,10","9,9","8,8","7,7","6,6","5,5","4,4","3,3","2,2"};

public static void generateRandom(int k){
 int minimum = 0;
 int maximum = 13;
 for(int i = 1; i <= k; i++)
   {
     int randomNum = minimum + (int)(Math.random()* maximum);
     System.out.print("Player " + i +" , You have been dealt a pair of: ");
     System.out.println(pairArray[randomNum]);
   }
} //reads array and randomizes cards

 public static void main(String[] args) {
 Scanner scan = new Scanner(System.in);
 System.out.print("How many players would you like to play with? ");
 int m = scan.nextInt();
 generateRandom(m);

//displays the cards

___________________________________________________
System.out.println("Would you like to play?");
 Scanner scanner = new Scanner(System.in);

 if(scanner.next().equalsIgnoreCase("y")||scanner.next().equalsIgnoreCase("yes")) {
System.out.println("This will be fun");
} else if(scanner.next().equalsIgnoreCase("n")||scanner.next().equalsIgnoreCase("no")) {
System.out.println("Maybe next time");
} else { 
System.out.println("Invalid character");

 }
 }
} 
```

我无法理解为什么最后部分不起作用，我被告知我需要更改scanner.next(); 到一个变量，但我不知道如何去做并使代码工作。是否有一种简单的方法来阅读用户的答案然后向用户显示响应？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:16:59.000

你的条件表达式

```
if(scanner.next().equalsIgnoreCase("y")||scanner.next().equalsIgnoreCase("yes")) 
```

调用`scanner.next()`两次，这意味着第二次调用将读取/等待更多输入。相反，您只需要调用一次，存储结果并在比较中使用它：

```
String tmp = scanner.next();
if(tmp.equalsIgnoreCase("y")||tmp.equalsIgnoreCase("yes")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:21:21.067

让我们假设用户输入“是”。

在

```
if(scanner.next().equalsIgnoreCase("y")||scanner.next().equalsIgnoreCase("yes")) { 
```

`Scanner.next()`在第一次测试中产生“是”。所以代码是有效的

```
"yes".equalsIgnoreCase("y") 
```

这是错误的，所以它移动到下一个测试：

```
scanner.next().equalsIgnoreCase("yes") 
```

这就是您的问题所在。

输入的“是”已经被第一次测试消耗掉了。现在扫描仪缓冲区中没有任何内容。

如果你想再次测试相同的输入，你必须捕获它，并在你的测试中使用它。

所以

```
String userReply= Scanner.next();
if(userReply.equalsIgnoreCase("y")||userReply.equalsIgnoreCase("yes")) {... 
```

这是因为，每次调用 时`scanner.next()`，`Scanner`都会返回流中的下一个值，然后*MOVES PAST IT*

如果用户输入“yes”然后输入“no”，测试将按如下方式执行：

```
if("yes".equalsIgnoreCase("y")||"no".equalsIgnoreCase("yes")) {... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T21:26:14.703

你需要改变`Scanner`调用的方式。

用户输入似乎没有跟随下一个令牌`\n`。`Scanner`然后你需要逐行阅读。：

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    System.out.print("How many players would you like to play with? ");
    int m = Integer.parseInt(sc.nextLine()); // May thrown NumberFormatException
    generateRandom(m);

    //displays the cards

    System.out.print("Would you like to play? ");
    String input = sc.nextLine();

    if (input.equalsIgnoreCase("y") || input.equalsIgnoreCase("yes")) {
        System.out.println("This will be fun");
    } else if (input.equalsIgnoreCase("n") || input.equalsIgnoreCase("no")) {
        System.out.println("Maybe next time");
    } else {
        System.out.println("Invalid character");
    }
 } 
```

# c++ - 将 Multimap 值从 int 转换为字符串？

> ID：10388498
> 
> 赞同：1
> 
> 时间：2012-04-30T18:12:59.913
> 
> 标签：c++

我有一个 multimap 声明为：

```
typedef multimap <int, std::string> MM; 
```

我在做这件事时遇到了麻烦，我通常没有运气，所以使用了我在网上找到的这个方法：

```
std::string IntToStr( int n )
  {
  std::stringstream  result;
  result << n;
  return result.str();
  } 
```

然后我称它为传递我的多重映射的 int 值：

```
std::string stringNumber = IntToStr((*i).first); 
```

我得到的是我认为的一些内存位置，并且转换后的 int 被标记到了它的末尾，例如：

```
64D20D6017 
```

其中 17 是分数。我究竟做错了什么？我想做的就是将结果转换成一个字符串以供以后使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:24:03.230

以防万一有人得到类似的输出，这是由于不小心将 2 添加`cout`到该行：

```
cout << variable1 << cout << variable2; 
```

# persistence - 使用 openJPA 持久化更新查询

> ID：10388500
> 
> 赞同：0
> 
> 时间：2012-04-30T18:13:08.110
> 
> 标签：persistence, jpa-2.0

我正在尝试使用 JPA 更新现有记录。以下链接似乎表明更新记录的唯一方法是为其编写更新查询在 [此处输入链接描述](http://docs.oracle.com/cd/B31017_01/web.1013/b28221/usclient005.htm#CIHCJFIB)

这很好。但是再次，我想知道为什么我要把它从存储过程中取出来使用开放 JPA 的所有魔力？我想如果我有一个 JPA 对象的实例，如果我尝试使用类似于此的调用持久保存到数据库

`emf.persist(launchRet)`

JPA 框架将检查记录是否已经存在，如果存在，它将继续对该记录进行更改，如果不存在，它将添加一条新记录。这真的很酷。相反，我将不得不自己在更新查询中编写所有这些逻辑。这很好，但是为什么我不能只使用存储过程并传递所有必要的值呢？

更新：代码解释了我最后的评论是关于什么的

```
 try{
        launchRet = emf.find(QuickLaunch.class, launch.getQuickLaunchId());
        if(launchRet==null){                
            emf.getTransaction().begin();
            emf.persist(launchRet);
            emf.getTransaction().commit();
        }
        else{
            emf.refresh(launchRet);
        }
    } 
```

变量launch被传递到方法中......

```
public QuickLaunch UpdateQuickLaunchComponent(QuickLaunch launch) 
```

我会简单地将找到的启动 launchRet 设置为等于传入的启动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:21:57.107

阅读您发布的链接：

> 您可以通过以下方式之一修改实体实例：
> 
> *   使用更新查询
> *   使用实体的公共 API [...]

99%的情况下使用的方式是第二种方式：

```
Foo someExistingFoo = em.find(Foo.class, someExistingFooId);
someExistingFoo.setSomeValue(theNewValue);
// no need to call any persist method: the EM will flush the new state 
// of the entity to the database when needed 
```

当然，实体也可以通过查询或通过实体图导航来加载。

如果您有一个分离的实体，并且您希望将其状态持久保存到数据库中，请使用该`EntityManager.merge()`方法。它找到与作为参数传递的分离实体具有相同 ID 的实体，将状态从分离实体复制到附加实体，并返回附加实体：

```
Foo attachedModifiedFoo = em.merge(detachedFoo); 
```

如果分离的实体不是持久的（即没有任何 ID），那么它会被创建并持久化。

# html - ASP.NET MVC：将视图呈现为图像

> ID：10388502
> 
> 赞同：2
> 
> 时间：2012-04-30T18:13:21.823
> 
> 标签：html, asp.net-mvc, render

我的 Web 应用程序中有一个局部视图，它呈现一个包含多个字段的“小部件”。除了在站点中显示小部件外，我还通过电子邮件发送它，这适用于某些电子邮件客户端，但有些人无法正确理解内联 CSS。

我正在考虑在服务器上渲染部分视图并从中创建单个图像，然后将图像嵌入到电子邮件中，这样每个人都会以相同的方式看到小部件。

有没有办法在服务器端渲染部分视图并从中创建图像？如果是这样，我在哪里可以获得有关它的更多信息？我用谷歌搜索了它，但似乎没有找到任何相关信息。

谢谢

# linux - How to include the asm header directory for Linux kernel development in Eclipse?

> ID：10388508
> 
> 赞同：1
> 
> 时间：2012-04-30T18:13:37.080
> 
> 标签：linux, eclipse, kernel, driver, header-files

I am developing a Linux kernel module (driver) for an embedded system in the Eclipse IDE for C/C++ Linux Developers (Indigo SR2). I have added the kernel's include directory to my project's paths to index (Project > Properties > C/C++ General > Paths and Sybmols -> Includes (tab) -> Add ... (button).) However, several of the kernel's header files refer to the asm dir, which is really an overlay of the linux/asm-powerpc directory (in my case) over the top of the linux/asm-generic directory, where the specific version overrides the generic.

How can I tell Eclipse's indexer to interpret "asm" as "asm-powerpc" first, and if that fails, then look in "asm-generic" second, instead of just looking for "asm"? Symlinking asm-powerpc to asm helps some, but too many header files exist only in the generic location to make this usable.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:27:23.933

As I have discovered, there are many pieces required to direct Eclipse to index similarly to the kernel build process. However, the answer to this specific question was fairly simple:

Assuming your Linux kernel build directory is defined as `${KDIR}`, and your kernel architecture is `${ARCH}`, then you need to add the following include paths to your project:

*   `${KDIR}/include`
*   `${KDIR}/arch/${ARCH}/include`

You can do this in the `Project Explorer`, by right clicking the project, then `Properties > C/C++ General > Paths and Symbols > Includes (tab) > Add ... (button)`.

I was missing the second entry. Adding it resolved this question. With these 2 entries, checking for unresolved includes (Right click `Project > Index > Search for Unresolved Includes`) produced 0 errors.

Now I have hit another stumbling block. Some of the types (like, u32 and bool) are still undefined in Eclipse. (My Makefile does not produce any errors.) I believe this is related to some kernel specific variables being undefined in the Eclipse header parsing, causing the include's IFDEF's to not be evaluated the same as during the kernel module compilation. But, I have not resolved this yet, and that pertains to another question. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T09:48:00.847

Instead of adding the paths per project, one can also add global environment variables to Eclipse CDT. For Eclipse Kepler, in `Window > Preferences > C/C++ > Build > Environment`, add variables:

*   `C_INCLUDE_PATH` = `/usr/include/c++/${gcc-version}`
*   `CPLUS_INCLUDE_PATH` = `/usr/include:${KDIR}/include:${KDIR}/include/linux:${KDIR}/arch/${ARCH}/include`

Replace `${var}` above with real entries, e.g. replace `${gcc-version}` with `4.6.3`. Then restart Eclipse and variables should be properly resolved. For Kernel module development these are probably enough.

If one needs to read the whole Kernel source, read this link: [http://wiki.eclipse.org/HowTo_use_the_CDT_to_navigate_Linux_kernel_source](http://wiki.eclipse.org/HowTo_use_the_CDT_to_navigate_Linux_kernel_source)

# java - 用 Pig Latin 为每组编写一个文件

> ID：10388510
> 
> 赞同：2
> 
> 时间：2012-04-30T18:14:07.690
> 
> 标签：java, hadoop, apache-pig

**问题：** 我有许多包含 Apache Web 服务器日志条目的文件。这些条目不是按日期时间顺序排列的，而是分散在文件中的。我正在尝试使用 Pig 读取一天的文件，按日期时间对日志条目进行分组和排序，然后将它们写入以它包含的条目的日期和小时命名的文件。

**设置：** 导入文件后，我使用正则表达式获取日期字段，然后将其截断为小时。这会产生一个集合，该集合在一个字段中具有记录，而在另一个字段中将日期截断为小时。从这里我在日期-小时字段上进行分组。

**第一次尝试：** 我的第一个想法是在使用 FOREACH 遍历我的组时使用 STORE 命令，并很快发现使用 Pig 并不酷。

**第二次尝试：** 我的第二次尝试是在存钱罐中使用 MultiStorage() 方法，在我查看文件之前效果很好。问题是 MulitStorage 想要将所有字段写入文件，包括我用来分组的字段。我真正想要的只是写入文件的原始记录。

**问题：** 那么......我是否将 Pig 用于它不打算用于的东西，或者有没有更好的方法让我使用 Pig 来解决这个问题？既然我有这个问题，我将处理一个简单的代码示例来进一步解释我的问题。一旦我有了它，我会在这里发布。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T01:15:24.647

开箱即用，Pig 没有很多*功能*。它完成了基本的工作，但更多时候我发现自己必须编写自定义 UDF 或加载/存储函数才能从 95% 的路径到 100% 的路径。我通常觉得这是值得的，因为仅仅编写一个小型存储函数比整个 MapReduce 程序要少很多 Java。

你的第二次尝试真的很接近我会做的事情。您应该复制/粘贴源代码`MultiStorage`或使用继承作为起点。然后，修改`putNext`方法以去除组值，但仍写入该文件。不幸的是，[`Tuple`](http://pig.apache.org/docs/r0.10.0/api/org/apache/pig/data/Tuple.html)没有`remove`or`delete`方法，因此您必须重写整个元组。或者，如果您只有原始字符串，只需将其拉出并输出包裹在`Tuple`.

一些关于编写加载/存储函数的一般文档，以防您需要更多帮助： http: [//pig.apache.org/docs/r0.10.0/udf.html#load-store-functions](http://pig.apache.org/docs/r0.10.0/udf.html#load-store-functions)

# javascript - javascript 不能在各种浏览器中工作

> ID：10388519
> 
> 赞同：0
> 
> 时间：2012-04-30T18:14:47.653
> 
> 标签：javascript, let

`let`在某些浏览器中不起作用。也不在他们的解释器/网络控制台中。为什么？

（最初我认为浏览器解释器和 jsFiddle 存在不一致，但事实证明并非如此，只是我的测试不好。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:25:41.857

为了使用 JavaScript 1.7 的一些新特性，您需要[指定](https://developer.mozilla.org/en/New_in_JavaScript_1.7#Block%5Fscope%5Fwith%5Flet)您希望使用 JavaScript 1.7。在 HTML 或 XUL 代码中，使用

```
<script type="application/javascript;version=1.7"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:19:27.100

它是 JS 1.7 中引入的非标准关键字，不一定在不同的浏览器中实现。

[https://developer.mozilla.org/en/JavaScript/Reference/Statements/let](https://developer.mozilla.org/en/JavaScript/Reference/Statements/let)

# asp.net - 3 个带有 Sql 表的嵌套中继器

> ID：10388520
> 
> 赞同：0
> 
> 时间：2012-04-30T18:14:48.333
> 
> 标签：asp.net, sql-server-2008

我有如下三个表：表 1 称为 Cat1，表 2 称为 subcat1，表 3 称为 itemsTb。我已经创建了这样的关系：

cat1 到 subcat1（一对多） cat1 到 itemstb（一对多） subcat1 到 itemstb（一对多）

我想像这样在 asp.net 中继器中显示项目：

```
cat 1....
   ....item 1
   ....item 2
   ....item 3
cat 2
   subcat 1 .....
      .....item 1
      .....item 2
      .....item 3
cat 3.....
   ....item 1
   ....item 2

etc.

The schema of my tables is like this:

Table: cat
columns:
id      int
title   varchar

table  subcat
columns:
id     int
catid  int
title  varchar

table: items
columns
id         int
catid      int
subcatid   int
title      varchar 
```

任何人都知道如何使用 asp.net 中继器显示它们？还是我必须以不同的方式构建表格才能使其正常工作？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:42:39.523

所有 ASP.NET 数据绑定控件（Repeater、ListView、GridView 等）都可以对其数据源使用声明性数据绑定。这不是很好的 IMO 记录，但您可以执行以下操作：

```
<asp:Repeater ID="rptCategory">
    <ItemTemplate>
        <asp:Repeater ID="rptSubcategory" DataSource='<%#Eval("Subcategories")%>'>
             <ItemTemplate>
                <asp:Repeater ID="rptItems" DataSource='<%#Eval("Items")%>'>
                    <ItemTemplate>
                        <%#Eval("Name")%>
                    </ItemTemplate>
                </asp:Repeater>
             </ItemTemplate>
        </asp:Repeater>
    </ItemTemplate>
</asp:Repeater> 
```

您需要绑定到`DataSource`属性的具体细节取决于您的初始数据（rptCategory 绑定到的数据）。

如果它是`DataSet`，那么您需要构建`DataRelations`并使用适当的名称`DataRelation`。

如果它是 C# 对象，那么您需要使用集合属性的名称。

编辑：关于这个特定模式的细节如下......

对于您的架构，您需要 2 个嵌套中继器 - 1 个用于处理项目，1 个用于处理子类别（其项目将具有另一个嵌套中继器）。

使用 DataSets，您可以执行以下操作（注意这是粗略的代码，您需要填写一些缺失的步骤）：

```
var ds = ExecuteDataSet(
   @"SELECT Id, Title FROM Cat;
   SELECT Id, CatId, Title FROM SubCat;
   SELECT Id, CatId, SubCatId, Title FROM Items;"
);
ds.DataRelations.Add("Cat_SubCat", ds.Tables["Cat"].Columns["Id"], ds.Tables["SubCat"].Columns["CatId"]);
ds.DataRelations.Add("Cat_Items", ds.Tables["Cat"].Columns["Id"], ds.Tables["Items"].Columns["CatId"]);
ds.DataRelations.Add("SubCat_Items", ds.Tables["SubCat"].Columns["Id"], ds.Tables["Items"].Columns["SubCatId"]);

this.rptCategory.DataSource = ds;
this.rptCategory.DataBind();

<asp:Repeater ID="rptCategory">
    <ItemTemplate>
        <h2>Category <%#Eval("Title")%></h2>
        <asp:Repeater ID="rptCatItems" DataSource='<%#Eval("Cat_Items")%>'>
            <ItemTemplate>
                <h4>Item (Category) <%#Eval("Title")%></h4>
            </ItemTemplate>
        </asp:Repeater>
        <asp:Repeater ID="rptCatSubCat" DataSource='<%#Eval("Cat_SubCat")%>'>
            <ItemTemplate>
                <h3>SubCategory <%#Eval("Title")%></h3>
                <asp:Repeater ID="rptSubCatItems" DataSource='<%#Eval("SubCat_Items")%>'>
                    <ItemTemplate>
                        <h4>Item (SubCategory) <%#Eval("Title")%></h4>
                    </ItemTemplate>
                </asp:Repeater>
            </ItemTemplate>
        </asp:Repeater>
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:18:57.817

Microsoft 对此提供了指导。 [http://support.microsoft.com/kb/306154](http://support.microsoft.com/kb/306154)

（对不起，这不是更长的时间，但这是相当直截了当的，并且在 hte 文章中得到了很好的介绍。）

# java - environment.xml 中的 Java 自定义属性

> ID：10388524
> 
> 赞同：0
> 
> 时间：2012-04-30T18:15:25.757
> 
> 标签：java, jakarta-ee, configuration

我有一个连接到 FTP 站点的应用程序，用于从第三方发布的文件中抓取数据。我们还有一个用于测试的内部沙箱 ftp 站点。

我希望使 FTP 信息可配置，以便应用程序可以针对开发和登台环境中的沙箱，而生产环境可以针对第三方供应商的 FTP 站点。我想通过配置文件来做到这一点。我将如何根据我所处的环境来定位指定的配置文件或配置。

我假设我需要在 environment.xml 中做一些事情，但我对 Java 比较陌生，所以我正在寻找一些关于最佳实践的见解。

该文件的内容将是 ftp 服务器、用户名和密码，并且可能因环境而异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:17:06.903

您可以为每个区域设置不同的属性文件。请参阅此[链接](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)以获取教程。

# java - 从 `pom.xml` 设置 `defaultCharset`

> ID：10388527
> 
> 赞同：0
> 
> 时间：2012-04-30T18:15:38.903
> 
> 标签：java, maven, character-encoding

这是[从`file.encoding`. `pom.xml`](https://stackoverflow.com/q/10386509/850781)我需要确保**Charset.defaultCharset()**返回**UTF-8**。当我跑

```
JAVA_TOOL_OPTIONS='-Dfile.encoding=UTF-8' mvn clean compile test package 
```

我明白了。但是，我无法控制如何`mvn`调用，所以我需要放入一些东西`pom.xml`来将默认字符集设置为`utf-8`. 我设置哪个`systemPropertyVariables`？

编辑：我有

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

和

```
<configuration>
  <systemPropertyVariables>
    <file.encoding>${project.build.sourceEncoding}</file.encoding>
    <charset>${project.build.sourceEncoding}</charset>
  </systemPropertyVariables>
</configuration> 
```

他们没有帮助。 `defaultCharset`还在`US-ASCII`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:20:50.500

您可以在 pom 中设置以下属性：

```
<properties>
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

maven-compiler-plugin 使用此属性来设置 Java 编译器`-encoding`选项。

请参阅：[http ://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#encoding](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#encoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:54:42.083

您可以尝试在 MAVEN_OPTS 环境变量、[Maven Docs](http://maven.apache.org/guides/mini/guide-configuring-maven.html)和[stackoverflow](https://stackoverflow.com/questions/2819853/java-heap-space)中的示例中包含该设置。

或者，如果您不想配置全局环境变量，Codehaus [properties-maven-plugin](http://mojo.codehaus.org/properties-maven-plugin/set-system-properties-mojo.html)也可以工作，具体取决于您的用例。

# php - 用 Zend_Db_Table_Abstract::insert() 延迟插入

> ID：10388528
> 
> 赞同：0
> 
> 时间：2012-04-30T18:15:40.283
> 
> 标签：php, mysql, zend-framework, zend-db

我的应用程序中有一些案例我想执行`INSERT DELAYED`而不是标准`INSERT`来加快脚本性能。我有一个插入数百行的脚本，可能会从该功能中受益。

我读过`INSERT DELAYED`尚未在 zend 框架 1 ( [http://framework.zend.com/issues/browse/ZF-9484](http://framework.zend.com/issues/browse/ZF-9484) ) 中实现。

有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:23:36.240

您应该能够通过 Zend 访问 PDO 对象。类似（未经测试）：

```
Zend_Db_Table_Abstract::getAdapter()->getConnection()->query('INSERT DELAYED...'); 
```

`Zend_Db_Table_Abstract::getAdapter()->getConnection()`应该是一个 PDO 对象。一旦你有了它，你就可以执行任何你想要的查询。

# android - Google TV VideoView 播放 YouTube rtsp 视频

> ID：10388535
> 
> 赞同：1
> 
> 时间：2012-04-30T18:16:10.420
> 
> 标签：android, youtube, google-tv

因此，我正在通过 YouTube API 访问视频链接：

```
JSONObject(videoString).getJSONObject("entry")
                .getJSONObject("media$group").getJSONArray("media$content")
                .getJSONObject(0).getString("url"); 
```

这给了我一个视频链接，例如：

```
rtsp://v7.cache5.c.youtube.com/CiILENy73wIaGQlXg0iXvlQ9SBMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp 
```

然后我尝试播放视频：

```
 mVideoView.setVideoURI(result);
        final MediaController mediaController = new MediaController(mActivity);
        mVideoView.setMediaController(mediaController);
        mVideoView.requestFocus();
        mVideoView.start(); 
```

这在我运行 ICS 的平板电脑上运行良好，但在 GoogleTV 上似乎不起作用，在这种情况下我需要专门为 GTV 做些什么吗？

日志输出：

```
04-30 14:03:41.212: D/MediaPlayer(1132): Couldn't open file on client side, trying server side
04-30 14:03:41.308: D/dalvikvm(1132): GC_CONCURRENT freed 862K, 13% free 8303K/9479K, paused 0ms+2ms
04-30 14:03:51.920: E/MediaPlayer(1132): error (1, -2147483648)
04-30 14:03:51.920: E/MediaPlayer(1132): Error (1,-2147483648)
04-30 14:03:51.920: D/VideoView(1132): Error: 1,-2147483648 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:04:17.027

我验证了 VideoView 播放 YouTube RTSP 视频可以在 Google TV 上运行：

```
 String vURL = "rtsp://v5.cache1.c.youtube.com/CjYLENy73wIaLQnhycnrJQ8qmRMYESARFEIJbXYtZ29vZ2xlSARSBXdhdGNoYPj_hYjnq6uUTQw=/0/0/0/video.3gp";

    mVideoView = (VideoView)this.findViewById(R.id.myvideoview);
    mVideoView.setVideoURI(Uri.parse(vURL));
    final MediaController mediaController = new MediaController(this);
    mVideoView.setMediaController(mediaController);
    mVideoView.requestFocus();
    mVideoView.start(); 
```

我唯一改变的是解析不同的 URL。然后在您的代码中尝试此工作 URL。

# mongodb - 在 mongoDB 中插入或忽略多个文档

> ID：10388540
> 
> 赞同：11
> 
> 时间：2012-04-30T18:16:31.460
> 
> 标签：mongodb, pymongo, mongodb-query

我有一个集合，其中我的所有文档都至少有这两个字段，比如说`name`和`url`（哪里`url`是唯一的，所以我在上面设置了一个唯一索引）。现在，如果我尝试插入带有副本的文档`url`，它将给出错误并停止程序。我不想要这种行为，但我需要类似`mysql`'s 的东西`insert or ignore`，这样 mongoDB 不应该插入重复的文档`url`并继续下一个文档。

是否有一些参数可以传递给`insert`命令来实现这种行为？`pymongo`我通常使用as进行一批插入：

```
collection.insert(document_array) 
```

这`collection`是一个集合，`document_array`是一个文档数组。

那么有什么方法可以实现`insert or ignore`多文档插入的功能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T17:07:52.523

Set the `continue_on_error` flag when calling [insert()](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.insert). Note PyMongo driver 2.1 and server version 1.9.1 are required:

> continue_on_error (optional): If True, the database will not stop processing a bulk insert if one fails (e.g. due to duplicate IDs). This makes bulk insert behave similarly to a series of single inserts, except lastError will be set if any insert fails, not just the last one. If multiple errors occur, only the most recent will be reported by error().

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-08-04T04:24:57.900

使用 insert_many()，并设置ordered=False。

这将确保尝试所有写入操作，即使有错误： [http ://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.insert_many](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.insert_many)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-04T16:18:13.677

尝试这个：

```
try:
    coll.insert(
        doc_or_docs=doc_array,
        continue_on_error=True)
except pymongo.errors.DuplicateKeyError:
    pass 
```

如果插入发生错误（例如尝试为唯一索引插入重复值），插入操作仍然会抛出异常，但不会影响数组中的其他项。然后，您可以吞下如上所示的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:58:38.443

如果插入失败，为什么不把你的调用`.insert()`放在一个块内并继续呢？`try: ... except:`

此外，您还可以使用带有标志的常规`update()`调用。`upsert`详细信息：[http ://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T19:00:22.743

如果您的 python 脚本中的文档数组已经在内存中，为什么不通过迭代它们来插入它们，并简单地捕获由于唯一索引而导致插入失败的那些？

```
for doc in docs:
  try:
    collection.insert(doc)
  except pymongo.errors.DuplicateKeyError:
    print 'Duplicate url %s' % doc 
```

其中 collection 是从您的连接/数据库实例创建的集合的实例，而 docs 是您当前将传递给 insert 的字典（文档）数组。

您还可以决定如何处理违反`except`块内唯一索引的重复键。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-30T19:10:32.987

强烈建议使用`upsert`

```
 stat.update({'location': d['user']['location']}, \
       {'$inc': {'count': 1}},upsert = True, safe = True) 
```

这里`stat`是集合，如果访客位置已经存在于集合中，`count`则增加一，否则`count`设置为`1`。

这是文档链接[http://www.mongodb.org/display/DOCS/Updating#Updating-UpsertswithModifiers](http://www.mongodb.org/display/DOCS/Updating#Updating-UpsertswithModifiers)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-29T14:47:34.327

我在做什么 ：

1.  生成我要插入的 MongoDB id 数组（在我的例子中是一些值的哈希）
2.  删除现有的ID（我使用的是Redis队列bcoz性能，但你可以查询mongo）
3.  插入您清理的数据！

Redis 非常适合，您可以根据需要使用 Memcached 或 Mysql 内存

# javascript - 复选框切换页面视图

> ID：10388541
> 
> 赞同：0
> 
> 时间：2012-04-30T18:16:46.247
> 
> 标签：javascript, html

我想为用户提供一个“高级搜索”页面，该页面可以通过复选框打开或关闭。我制作了一个覆盖页面其余部分的 div，并像这样使用了复选框：

```
style.display = "none"
style.display = "block" 
```

这工作得很好，因为我想要的基本上是一个模态对话框，这对我来说很有意义。

我添加了一个“重置”按钮，它应该清除所有字段，然后再次显示“高级搜索”页面。我不知道如何完成这一切。我有两个想法，但都不起作用：

1.  重置搜索词的会话变量，然后以某种方式告诉刷新的页面启用复选框。
2.  不要显示或隐藏 div，而是使用专用的“高级搜索”页面。此页面是带有参数 ?search=true 的根 URL。该复选框在带有和不带有参数的 URL 之间切换。似乎更容易控制。

我尝试将这种代码用于解决方案 #2 没有奏效：

```
function ModalPage() {
    if( self.location == location ) 
         { self.location = "?search=true"; }
    else { self.location = location; }
    // (some attempts looked less silly than this...)of #2
} 
```

你的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:18:58.087

在会话中存储该选项然后再次加载页面怎么样。在页面加载时，您可以检查该会话变量，如果已设置，则检查复选标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:37:50.053

你的意思是你有一个简单的“搜索页面”和一个“高级搜索”页面吗？或者您只有一页，在单击复选框后显示和隐藏高级搜索功能？

在第二种情况下，您可以添加一个名为“reset”的新 javascript 函数并将该函数与重置按钮相关联：

```
<input type="button" id="resetButton" onclick="reset();" value="Reset"/> 
```

在新的javascript“重置”功能中，您可以进行两个操作：重置所有字段，并显示高级搜索组件

```
function reset() {
    //reset all the fields
    ....

    document.getElementById(YOUR_ADVANCED_SEARCH_ID).style.display = "block";
} 
```

在第一种情况下，重置功能可以简单地重定向到高级搜索页面，例如

```
location.href = "advancedSearchPage.XXX"; 
```

# c - 访问冲突写入静态全局变量？

> ID：10388548
> 
> 赞同：1
> 
> 时间：2012-04-30T18:17:43.477
> 
> 标签：c, string

给定以下代码：

```
#include "stdafx.h"
#include "string.h"
static char *myStaticArray[] = {"HelloOne", "Two", "Three"};

int _tmain(int argc, _TCHAR* argv[])
{
    char * p = strstr(myStaticArray[0],"One");
    char hello[10];
    memset(hello,0,sizeof(hello));
    strncpy(hello,"Hello",6);
    strncpy(p,"Hello",3); // Access Violation
    return 0;
} 
```

当它尝试写入 myStaticArray[0] 的地址时，我遇到了访问冲突。为什么这是个问题？

背景：我主要作为 C# 开发人员将旧的 C++ 移植到 C#，所以请原谅我的无知！这段代码显然不是旧版本中的问题，所以我很困惑......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:20:06.100

```
char * p = strstr(myStaticArray[0],"One"); 
```

`p`指向字符串文字“HelloOne”的一部分。您不能尝试修改字符串文字，这是未定义的行为。

通常，字符串文字存储在内存的只读部分中，因此尝试写入它们会导致分段错误/访问冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:20:31.123

```
 static char *myStaticArray[] = {"HelloOne", "Two", "Three"}; 
```

数组中的字符串是字符串文字，在 C 和 C++ 中是不可修改的。

```
strncpy(p,"Hello",3); 
```

此函数调用尝试修改字符串文字。

另一个问题是您使用的`strncpy`函数并不总是空终止字符串。这是这种情况，因为`strlen("Hello")`大于`3`（您的最后一个`strncpy`参数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:28:57.563

如果您希望能够修改字符串，那么您需要像这样分配字符数组

```
static char myStaticArray[][25] = {"HelloOne", "two", "three"}; 
```

正如其他人所说，问题在于您的方法导致编译器创建一个包含 3 个指向常量字符串的指针的数组。上面的声明创建了一个二元字符数组，然后将常量字符串数据复制到该内存中。

# sql - 通过 ODBC 从网络连接 SQL SEVER DB

> ID：10388552
> 
> 赞同：1
> 
> 时间：2012-04-30T18:18:21.637
> 
> 标签：sql, sql-server, connection, odbc

我需要通过 ODBC 或其他方式连接到网络上的 SQL 服务器数据库，从服务器我可以通过 ODBC 访问数据库，但从网络中的 PC 我不能。

这样做的目的是查看最终用户的报告，请给我解决方案或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:29:07.060

关于您的设置，我们需要提供很多帮助。除了测试本地连接之外，您是否尝试过以下链接中的任何步骤？

[http://social.technet.microsoft.com/wiki/contents/articles/2102.how-to-troubleshoot-connecting-to-the-sql-server-database-engine.aspx](http://social.technet.microsoft.com/wiki/contents/articles/2102.how-to-troubleshoot-connecting-to-the-sql-server-database-engine.aspx)

# silverlight - 在powershell中，如何转换目录类型？属性：类型文件文件夹-> XAP（文件）

> ID：10388554
> 
> 赞同：0
> 
> 时间：2012-04-30T18:18:34.150
> 
> 标签：silverlight, powershell, filesystems, xap

我正在编写一些自动化代码，并将 dll 文件添加到 xap 文件中。我提取 xap（我将其视为 zip），添加 dll 并更改 appmanifest.xml。

但是我似乎无法将文件夹更改回 silverlight xap 文件。这是唯一的选择，因为开发人员不会将测试挂钩添加到他们的程序中。

**在powershell中，如何转换目录类型？**属性：类型文件文件夹-> XAP（文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:20:43.247

正如您所说，该`.xap`文件实际上只是一个伪装成不同扩展名的 zip 文件。更新文件夹的内容后，只需将文件夹压缩成一个文件，然后使用`.xap`扩展名重命名该文件。

下面的压缩代码在网上很多地方都可以通过简单的google找到。我使用了[这里](https://stackoverflow.com/questions/5641162/compress-files-in-folder-to-zip-file-by-using-ps)和[这里的代码](https://stackoverflow.com/questions/5641162/compress-files-in-folder-to-zip-file-by-using-ps)

```
$folder = "C:\FolderToZip"
$zipFileName = "C:\Temp.zip"
set-content $zipFileName ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
(dir $zipFileName).IsReadOnly = $false

$zipFile = (new-object -com shell.application).NameSpace($zipFileName)
gci $folder | foreach-object {$zipFile.CopyHere($_.FullName); sleep -milliseconds 100}

rename-item $zipfileName "RepackagedXapFile.xap" 
```

当我对此进行测试时，我注意到 powershell 偶尔会弹出错误，`File not found or no read permission`. 这可能是某种竞争条件，因为我能够通过在每个副本之间发出睡眠来解决它。我知道睡眠通常不受欢迎，原因不仅限于人们可能永远不知道有多长足够长，但由于这似乎真的是为了测试文件的内部打包，我认为这并不过分关心。

# c++ - Clistctrl 选择检测

> ID：10388560
> 
> 赞同：1
> 
> 时间：2012-04-30T18:18:44.943
> 
> 标签：c++, visual-c++, mfc, wtl, clistctrl

我一直在玩列表视图并遇到了这篇文章：[如何检测 CListCtrl 选择更改？](https://stackoverflow.com/questions/1462895/how-to-detect-a-clistctrl-selection-change#comment12034791_1466086)

但是，那里使用的代码有一个主要流程，它不适用于多项选择（如该线程中所指出的那样）。所以我的问题是如何使代码与多选一起工作（例如，使用 shift 或 ctrl 进行选择）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:59:44.967

我编写了一个方便的函数来查看您的 OnItemChanged 通知是否是由于选择更改：

```
BOOL IsItemSelChanged(NMLISTVIEW* pNMListView)
{
    // call this from your OnItemchangedMyListCtrl function in your dialog class

    if(!(pNMListView->uChanged & LVIF_STATE))
    {
        return(FALSE);
    }

    if((pNMListView->uOldState & LVIS_SELECTED) == (pNMListView->uNewState & LVIS_SELECTED))
    {
        return(FALSE);
    }

    return(TRUE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T01:43:40.750

处理`LVN_ITEMCHANGED`和`LVN_ODSTATECHANGED`，所有你需要的......

> 如果列表视图控件具有 LVS_OWNERDATA 样式，并且用户通过按住 SHIFT 键并单击鼠标来选择一系列项目，则不会为每个选定或取消选择的项目发送 LVN_ITEMCHANGED 通知。相反，您将收到一个 LVN_ODSTATECHANGED 通知，指示一系列项目已更改状态。

# html - 删除网站中的图像背景？

> ID：10388564
> 
> 赞同：2
> 
> 时间：2012-04-30T18:19:05.650
> 
> 标签：html, css, image

如何使图像中的背景透明？我的大多数图像都有白色背景。当我在我的网站中使用它们时，我的身体背景颜色为黑色，看起来很尴尬。

我曾尝试使用[Fireworks](http://en.wikipedia.org/wiki/Adobe_Fireworks)魔棒工具去除白色背景，但未成功。我也应用了 CSS 透明属性，但它也不适用于我。

使图像的背景颜色透明的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:23:48.893

### 你应该使用什么图像格式

您应该使用带有 alpha 通道的 PNG 图片，即所谓的 RGBA 图像。

将您的作品保存为 PNG，并确保使用 RGBA 颜色保存。

[Wikipedia.org，便携式网络图形](http://en.wikipedia.org/wiki/Portable_Network_Graphics)

### 如何，使用 GIMP（应该与 Photoshop 类似）

*   [使用GIMP](http://www.gimp.org/)打开您的图片文件。
*   如果您的图片图层不包含 Alpha 通道，请通过右键单击图层并选择*“添加 Alpha 通道”*来添加它。
*   使用*“模糊选择”*、*“按颜色选择”*或*“剪刀选择”*工具选择背景区域。
*   点击删除。
*   将结果保存为具有 RGBA 颜色的[PNG格式。](http://en.wikipedia.org/wiki/Portable_Network_Graphics)

完成后它应该看起来像这样：

![背景已清除](../Images/d32802c6e9986b05ee67778e9aa4f9e7.png)

### 几条笔记

*   使用提到的选择工具来了解在哪种情况下使用哪个工具。
*   还要注意工具设置，尤其是模糊和颜色选择工具。
*   如果您的图片包含主题和背景之间的模糊过渡，您也应该尝试使它们与最终图片一样。你可以使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T18:22:44.933

您需要更改实际图像以使其透明 - 听起来可能不是？通常图像本身具有白色背景，因此将它们放在任何东西之上可能看起来很奇怪。您可以拍摄图像并去除其中的白色并将其保存为透明图像，然后重试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T18:25:42.763

使用 Photoshop 删除背景并将其保存为 .png

像这样删除它：http: [//www.addictivetips.com/windows-tips/how-to-remove-image-background-in-photoshop-tutorial/](http://www.addictivetips.com/windows-tips/how-to-remove-image-background-in-photoshop-tutorial/)

或使用魔术橡皮擦。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T18:25:03.370

您可以在 Photoshop 中使用背景橡皮擦工具进行操作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T18:34:19.230

如果您没有 Photoshop - 最简单的方法是使用 MS Word (2010)。

1.  将页面背景更改为黑色（页面布局 --> 页面颜色 --> 设置为您网站的颜色）
2.  插入 --> 图片
3.  插入图片后，转到**图片工具并在****图片工具**下找到**背景去除**工具。
***   选择要删除的区域，然后单击“删除”，然后单击“完成”**

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T18:44:45.797

使用 photoshop ，选择图像中不需要的部分，然后将其保存为 png，但它可能无法在 IE 中使用，使用 PNG 修复更多详细信息[http://jquery.andreaseberhard.de/pngFix/](http://jquery.andreaseberhard.de/pngFix/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-11T06:29:28.027

要删除图像的背景，您可以使用[本网站](https://www.remove.bg/)。这很容易。

脚步：

1.  转到链接
2.  选择照片或输入网址 [![在此处输入图像描述](../Images/52ebbe7fbfdc730367a1b06898a3ce1b.png)](https://i.stack.imgur.com/1OmfR.png)
3.  下载图像。 [![在此处输入图像描述](../Images/95c227175c78b723e3da2fb0811a99e7.png)](https://i.stack.imgur.com/kkQiG.png)**

# scala - Scala中的逆变二元运算

> ID：10388570
> 
> 赞同：1
> 
> 时间：2012-04-30T18:19:32.733
> 
> 标签：scala, category-theory

对于一个非常基本的类别通用模型，我试图以逆变方式获得与一对对象相关联的态射。

```
class Obj[DerivedObj <: Obj[DerivedObj]] { /* ... */ }

class Morphism[DerivedMorphism <: Morphism[DerivedMorphism]] { /* ... */ } 
```

我想以某种方式能够定义：

```
def mor( from : SomeConcreteObj, to : SomeConcreteObj ) : SomeConcreteMorphism; 
```

但是使 mor 成为 Obj 的方法的“明显”解决方案需要 Obj 额外由 Morphism 进行类型参数化。

实现这种事情的Scala方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:33:56.027

好的，我的实体关系不好。据推测，这意味着 mor 实际上是某个 Category 类的方法：

```
trait Cat[O,M] {
   def mor( from : O, to : O ) : M;

} 
```

这似乎可以解决问题。

# iphone - 计划的 UILocalNotification 数量

> ID：10388573
> 
> 赞同：4
> 
> 时间：2012-04-30T18:19:44.043
> 
> 标签：iphone, ios, uilocalnotification

我正在使用 UILocalNotification，并且我已在此链接上阅读了有关它的苹果文档：

[http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

但我的问题是我可以安排多少通知？...因为这里写了这个：

> 系统保持最快触发的 64 个通知（自动重新安排的通知计为单个通知）并丢弃其余通知。

那么这条线是什么意思？...我可以安排超过 64 个通知吗？我不想同时触发 64 个，我只想安排超过 64 个通知……然后在触发时间触发它……

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T18:27:15.303

您可以安排 n 个通知，如果 n 大于 64，则只安排最快的通知，其余的将丢失。

这 64 条通知将被触发，具体取决于`fireDate`属性。通知是否相同并不重要`fireDate`。

令人困惑的部分可能是：

> （自动重新安排的通知计为单个通知）

如果您使用该`repeatingInterval`属性，您可以使用`NSCalendarUnit`.

可以通过创建自己的通知队列来管理处理超过 64 个预定通知。我在这里解释如何做到这[一点。](https://stackoverflow.com/questions/10341476/fire-local-notification-every-day-on-different-times/10343323#10343323)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T11:40:17.473

似乎在 iOS 8.1 中，可以为每个应用程序安排超过 64 个通知并且全部被触发。在我的应用程序中，我使用 500 多个本地通知对其进行了测试，所有通知都在 iPhone Simulator 和真正的 iPhone 5s 上进行了调度和触发。也许这是 iOS 8.1 中的一个错误，或者 Apple 忘记更新文档。

# java - Java：按名称实例化一个具体的 impl

> ID：10388574
> 
> 赞同：1
> 
> 时间：2012-04-30T18:19:47.147
> 
> 标签：java, generics, reflection, dependency-injection

如果我有一个名为的类`Widget`，那么我可以使用以下代码（或多或少）创建一个新类：

```
Class<?> widgetClass = Class.forName("Widget");
Widget widget = (Widget)widgetClass.newInstance(); 
```

但是如果我有一个接口 ,`Fruit`和几个具体的实现（例如`Apple`,`Orange`和`Kiwi`）呢？如果我尝试：

```
Class<?> fruitClass = Class.forName("Apple");
Fruit fruit = (Fruit)fruitClass.newInstance(); 
```

我收到一个错误：

> Fruit 无法解析为类型。

如果我像这样删除显式转换：

```
Fruit fruit = fruitClass.newInstance(); 
```

我得到一个不同的错误：

> 类型不匹配：无法从 capture#2-of 转换？到水果。

**那么如何使用 String 来实例`Fruit`化我想要的正确混凝土**呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:24:00.707

你可能只是忘了导入 Fruit 接口：

```
import com.foo.bar.Fruit; 
```

注意：**切勿**使用默认包。始终将您的课程放在一个包中。

其他注意事项：如果类的名称不是从某些外部资源（文件、数据库等）动态读取的，而是如您的问题所示的硬编码，您应该简单地调用它的构造函数：

```
Fruit f = new Apple(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:24:19.937

错误消息“水果无法解析为类型”意味着您的导入/构建路径设置不正确。

否则，看起来您的代码是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:24:11.623

您的代码没有任何问题。但是，您的 Fruit 类不在编译类路径中，因此会出现编译器错误。

# iis - 使用 PowerShell 设置虚拟目录

> ID：10388577
> 
> 赞同：0
> 
> 时间：2012-04-30T18:20:02.963
> 
> 标签：iis, powershell, virtual-directory

我想用 PowerShell 脚本设置一个虚拟目录，当然还有必要的参数。过去，我使用 .NET 控制台应用程序完成了此操作，但我想将其与其他 shell 脚本集成，而无需从 .net 控制台应用程序分发 .exe。

但是，我从来没有真正用 PowerShell 做到这一点......为了使事情复杂化，我需要为 IIS 5.1 和 5.1+ 执行此操作。

所以，除了“这是可能的还是可取的？” 我也想知道是否有任何人们会推荐的例子。

# jquery - 删除后重新添加

> ID：10388588
> 
> 赞同：4
> 
> 时间：2012-04-30T18:20:55.903
> 
> 标签：jquery, dom

`remove()`如前所述，我删除了一个元素：[删除更高层](https://stackoverflow.com/questions/10381250/removing-higher-layer)

现在，当我再次单击我的链接打开弹出窗口时，该链接无法工作，因为该层之前已删除。

如何从我的元素中删除 remove 属性？

**更新：**

`requireJS`单击链接时，我使用插件加载 JS 文件：

```
$('a#addUser').click(function () {
    require (['controllers/users/add'],function() {
         $('#loading').fadeOut('fast');
    });
}); 
```

在 controllers/users/add.js 我有那个弹出窗口，用户可以关闭弹出窗口，到目前为止我没有任何问题，问题是当用户再次单击链接并且应该再次显示弹出窗口时，但在我的代码中弹出窗口不再打开。

**回答：** 问题是requreJS，因为这个插件允许我加载我的javascript一次，

我应该使用`$.getScript()`而不是 requreJS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:24:23.820

移除不是属性，元素实际上已经消失了。要暂时隐藏它，请使用[hide()](http://api.jquery.com/hide/)和[show() ，将其分离并稍后使用](http://api.jquery.com/show/)[detach()](http://api.jquery.com/detach/)重新附加。

```
var elm = $("#elementID").detach();

$(button).on('click', function() {
    elm.appendTo('#popupID');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:23:40.427

在删除它之前（无法恢复！）克隆它。

```
var cloned = $('.foo').clone();
$('.clone').remove(); 
```

[**更新了你的小提琴**](http://jsfiddle.net/3JaGg/4/)

我不确定您是否在删除时做正确的事情，但我回答了您的问题。
您可能想要隐藏和显示内部的元素，以便将其从 DOM 中完全删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:25:19.390

```
var copyofpopup = $('.popup').clone(true);
$('.popup').remove();

$('OPEN_POPUP_LINK').on('click', function() {
  copyofpopup.appendTo('SOMETARGET');
}); 
```

**注意**最好只显示/隐藏（切换）而不是删除

# java - 创建自定义键盘

> ID：10388597
> 
> 赞同：0
> 
> 时间：2012-04-30T18:21:49.523
> 
> 标签：java, android, button, keyboard

我正在设计一个带有自定义键盘（按钮行）的游戏，我希望按钮将文本输入到 Edittext 中。是否可以？例如：我希望按钮 1 将字符“a”输入到 EditText1。提前致谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:34:30.010

获取按钮的单击事件，在 onClick() 处理程序中，在 edittext 上设置您想要的任何文本。例如：

如果你点击按钮 A，

```
public void  onClick(View v){
e1.setText("a");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:11:24.327

```
Button a = (Button) findViewById(R.id.button_a);
EdiText et = (EditText) findViewById(R.id.edit_text);

OnClickListener aClickListener = new OnClickListener() {
  public void onClick(View v) {
    String current = et.getText().toString();
    et.setText(current + "a");
  }
};    

a.setOnClickListener(aClickListener); 
```

如果您想以这种方式实现整个键盘，我会建议不同的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T17:21:31.633

实际上，您可以这样做。

```
et.dispatchKeyEvent( new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_A ) ); 
```

每个可能的键都有一个常量 keyEvent.KEYCODE。在某些情况下，与将文本设置/附加到编辑框相比，这在某些情况下确实更有效，因为它可以更轻松地处理光标位置

# bash - Bash 变量格式

> ID：10388599
> 
> 赞同：3
> 
> 时间：2012-04-30T18:21:57.337
> 
> 标签：bash, shell, scripting

在使用 BASH 编写脚本方面，以下变量之间有什么区别：

```
$var 
```

```
"$var" 
```

```
${var} 
```

```
"${var}" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T18:37:12.610

和 之间没有区别`$var`和`${var}`之间没有区别`"$var"`，`"${var}"`只是在某些情况下，当您使用以前的版本时，解析器可能无法识别您的意图。考虑：

```
foo=hello
echo "$fooworld"
echo "${foo}world" 
```

第一个不打印任何内容，因为未定义`echo`变量。`fooworld`第二个打印`helloworld`是因为 shell 能够确定您正在引用该`foo`变量。

`$var`和之间的区别在于`"$var"`未引用的变量扩展在扩展后由 shell 评估。像这样：

```
var='ls /'
$var 
```

Lists `/`，因为在扩展之后，shell 将空间评估为标记分隔符，而

```
var='ls /'
"$var" 
```

结果是因为在用户环境中没有可用的`ls /: No such file or directory`命令 named 。`ls /`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:28:14.443

引号中的那些扩展为单个参数，而不是分割成单独的单词。

如果下一个字符可能是变量名的一部分，则该`${var}`符号很有用，例如：`"${var}name"`.

```
function args() {
  while [ $# -gt 0 ]; do echo "arg: '$1'"; shift; done
}

# var=" a b  c"

# args $var
arg: 'a'
arg: 'b'
arg: 'c'

# args "$var"
arg: ' a b  c' 
```

# heroku - Heroku 尝试推送到不同的目录

> ID：10388602
> 
> 赞同：1
> 
> 时间：2012-04-30T18:22:17.833
> 
> 标签：heroku

当我尝试推送到 Heroku 时，谁能告诉我为什么会出现此错误

```
fatal: http://mbartonsampleapp.heroku.com//info/refs not found: did you run git update-server-info on the server? 
```

为什么已将其添加到我`//info/refs` 想访问[http://mbartonsampleapp.heroku.com](http://mbartonsampleapp.heroku.com)的目录中。有没有办法可以将我的目录更改回来，以便 Heroku 知道在哪里可以找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:11:59.133

我不认为你可以通过 HTTP 推送到 Heroku。您应该有一个`git:`要推送到的 URL（当您使用 Heroku 命令行工具运行创建应用程序时应该已经设置了该 URL）。

# java - Java 上的 HTML 身份验证不起作用

> ID：10388603
> 
> 赞同：3
> 
> 时间：2012-04-30T18:22:21.207
> 
> 标签：java, http, authentication

我正在尝试使用 Apache 的一些 jar 文件向网站发送我的用户名或密码，并尝试借助我的方法“loadpage”从网站读取所有内容。

它不起作用。在我执行我的方法“loadpage”之后。我仍然从不需要登录的主页获得 Streams。我想在登录后拥有 Streams。

```
 public static void main(String[] args) throws Exception {
        DefaultHttpClient httpclient = new DefaultHttpClient();
        try {
            httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope("https://justawebsite", 8080),
                    new UsernamePasswordCredentials("username","password"));

            HttpGet httpget = new HttpGet("https://justawebsite");

            System.out.println("executing request" + httpget.getRequestLine());
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();

            System.out.println("----------------------------------------");
            System.out.println(response.getStatusLine());
            if (entity != null) {
                System.out.println("Response content length: " + entity.getContentLength());
            }
            EntityUtils.consume(entity);
        } finally {
            httpclient.getConnectionManager().shutdown();
        }
    } 
```

在没有来自 Apache 的一些 jarfile 的帮助下，我也尝试了它。

```
public  void LogIn(String url1) throws Exception{
        URL url = new URL(url1);

        String userPassword = "username"+":"+"password";
        String encoding = new sun.misc.BASE64Encoder().encode (userPassword.getBytes());
        //con.setRequestProperty("Cookie", "JSESSIONID="+getSid());

        URLConnection con = url.openConnection();
        //con.connect();
        con.setRequestProperty("Cookie", "JSESSIONID=" + encoding);

        con.connect();

    } 
```

我的方法加载页面：它之所以有效，是因为我在其他一些不需要身份验证的网站上进行了尝试。

公共字符串加载页面（字符串 url）抛出异常 {

```
 URLConnection con = new URL(url).openConnection();
    StringBuilder buffer = new StringBuilder();

    BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
    String line;
    while((line=in.readLine())!= null){
        buffer.append(line);
    }
    in.close();
    return buffer.toString();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:30:29.437

您应该首先检查 Behe 指出的网站使用哪种身份验证类型，因为有不同的[Web Authentication Types](http://www.ehow.com/list_6659435_authentication-types.html)。

您的第一个示例是使用基本身份验证，但该网站可能期望某种基于表单的身份验证。

如果最新情况是您的情况，您应该查看此[Client HTTP Programming Primer](http://hc.apache.org/httpcomponents-client-ga/primer.html)其中包括

> *   在网络表单中输入用户名和密码，然后点击“登录”按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:58:43.327

实际上我所做的是正确的。我很幸运地找到了解决方案。我不知道为什么，但我不得不`in.readLine();`在

```
in.readLine();

while((line=in.readLine()) != null){
buffer.append(line);
}
in.close() 
```

在我登录后获取 Streams。如果我在 While 之前不执行此行。我在登录之前获取 Streams，尽管我已经登录。

# java - 新的扩展类，每个类没有单独的文件

> ID：10388604
> 
> 赞同：1
> 
> 时间：2012-04-30T18:22:27.293
> 
> 标签：java, inheritance

我有一个名为 Building 的类，并且有几个类对其进行了扩展，例如 Office 和 Hospital。扩展类最多只添加十几行代码，因此我不想将它们放在不同的文件中。我不相信内部类会起作用，因为它首先需要外部类的实例-> Building。

因此，我想做的是 do `Building b = new Office(var);`，但在 Office.java 中没有 Office 代码，因为它最多包含几行代码，但 Building 将包含大部分代码。但是在我的情况下，将 Office 作为类型很有价值。有什么帮助吗？感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:29:09.480

您可以使用静态嵌套类，然后就不需要 Building 的实例，但我认为在这种情况下，最好的办法是使用单独的 Java 文件。它们是否只包含几行也没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:29:21.313

> . 我不相信内部类会起作用，因为它首先需要外部类的实例-> Building。

您可以`static`改为将它们设为嵌套类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:29:34.707

您可以使用静态嵌套类：

```
public class Building {

    public static class Office extemds Building {
    }
} 
```

然后，您可以像这样创建办公室：

```
Office o = new Building.Office(); 
```

但是您可能应该将它们放在单独的文件中以使其更清洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:29:54.493

您可以将其定义为静态内部类，但我看不到重点，因为它使该类使用起来更加麻烦。仅仅因为一个类很小并不意味着它不应该在它自己的文件中。

```
public class Building {
    ...
    public static class Office extends Building {
        ...
    }
}

Building.Office office = new Building.Office(); 
```

# php - 将 codeigniter 变量传递给 wordpress 主题文件

> ID：10388607
> 
> 赞同：1
> 
> 时间：2012-04-30T18:22:52.077
> 
> 标签：php, wordpress, codeigniter

我已经在我的根目录中安装了 wordpress，在子目录中安装了 codeigniter，一切正常。我可以调用 CI 控制器等等。但是，我也想使用相同的 wordpress 主题。例如`get_header()`：`get_sidebar()`和`get_footer()`。

`Page not found`一个示例用途是传入我的 codeigniter 页面标题，以便 wordpress在访问我的 codeigniter 端时不显示标题。我有以下代码：

CI 控制器：

```
public function index(){ 
    $data['ci_title'] = 'some title'; 
    $this->load->view('header', $data);
} 
```

CI 视图（header.php）：

`<?php get_header(); ?>`;

Wordpress 主题文件（header.php）：

```
<title>
    <?php
        if($ci_title) echo $ci_title else wp_title('');
    ?>
</title> 
```

现在的问题是我`$ci_title`没有在 wordpress 主题文件中被读取。我什至尝试`globlal $ci_title`输入该`get_header()`函数，但它又调用了一些`load_template()`函数。

有没有一种简单的方法可以将 CI 变量传递给 wordpress 主题文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:21:00.280

您实际上不必去修改核心文件。您只需在 header.php 中添加以下代码行

```
$CI = &get_instance(); 
echo $CI->load->get_var('ci_title'); 
```

您将获得在 CI 的 loader 对象中传递的所有变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T20:47:24.673

好吧，经过很多，最后阅读[http://www.php.net/manual/en/language.variables.scope.php#98811](http://www.php.net/manual/en/language.variables.scope.php#98811)，发现我需要`$ci_title`像`global`调用之前一样声明我的`get_header()`。现在我的代码如下所示：

CI 查看文件（header.php）：

```
global $ci_title;
get_header(); 
```

WP功能`wp_title()`在`general-template.php`

```
function wp_title($sep = '&raquo;', $display = true, $seplocation = '', $ci_title = '') {
global $wpdb, $wp_locale, $ci_title;
//existing code.. and at the end
if($ci_title != ''){
$title = $ci_title; 
```

不知道这是否是正确的方法，因为我只是 PHP 的初学者，但现在它符合我的目的。如果有更好的方法会很好，这让我避免修改 wordpress 功能。

# c# - 需要简单的 linq

> ID：10388609
> 
> 赞同：4
> 
> 时间：2012-04-30T18:23:06.380
> 
> 标签：c#, linq

**我有一个Link**类型的 Linq 对象数组，其中包含以下值：

```
new Link {SourceId = 1, TargetId=22223}
new Link {SourceId = 1, TargetId=2221223}
new Link {SourceId = 1, TargetId=222}
new Link {SourceId = 2, TargetId=26556}
new Link {SourceId = 2, TargetId=264}
new Link {SourceId = 2, TargetId=262}
new Link {SourceId = 2, TargetId=29}

class Link
{
    public int SourceId { get; set; }
    public int TargetId { get; set; }
} 
```

我需要一个 LINQ 语句来输出`Dictionary<int, List<int>>`包含以下内容的字典：

不同的`SourceId`作为键和`TargetId`与该键关联的列表作为值。

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T18:26:07.507

```
var dic = links.GroupBy(x=>x.SourceID)
               .ToDictionary(x=> x.Key, x => x.Select(y=>y.TargetId).ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:29:10.107

```
Dictionary<int, int> dict = links.ToDictionary(item => 
                                               item.SourceId ,
                                               item => item.TargetId) 
```

# ruby-on-rails - Rails 条件验证不起作用

> ID：10388614
> 
> 赞同：1
> 
> 时间：2012-04-30T18:23:42.403
> 
> 标签：ruby-on-rails, validation

我正在尝试执行以下操作：

```
 validates :price, :presence => true, :if => Proc.new {|p| p.available == true}
  validates :price, :presence => false, :if => Proc.new {|p| p.available == false} 
```

因此，如果布尔值 :available 为真，则 :price 必须存在，如果为假，则 :price 必须为 nil。

但是当我在控制台中测试它时它不起作用。关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:32:06.650

是的，我不确定你现在可以堆叠验证。但是，您可以通过 before_validation 做您想做的事情。

```
class Foo
  before_validation :price_matches_available

  def price_matches_available
    available ? price.present? : price.nil?
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:26:20.267

根据您的评论和我的理解，您有一个产品模型，并且您想设置价格，前提是产品可用标志为真。

根据其他评论，我认为您不能堆叠验证......即使以某种方式可能，我不认为有一个验证错误是好的用户体验，比如“如果产品是，则不能设置价格”不可用”。

我的建议是只进行第一次验证，如果标志设置为 false，则默默拒绝价格。首先通过 javascript 获得良好的 UX（在检查布尔值时禁用输入），其次在回调中确保没有人篡改 HTML。

红宝石部分可以是这样的：

```
class Product < ActiveRecord::Base

  validates   :price, presence: true, if: "available?"

  before_save :reject_price, if: "available? == false"

  private

  def reject_price
    self.price = nil
  end
end 
```

# svn - svn: 解析 svn:externals 属性时出错。

> ID：10388615
> 
> 赞同：1
> 
> 时间：2012-04-30T18:23:45.040
> 
> 标签：svn, svn-externals

如果我做

svn propset svn:externals 'https://url.to.remote.branch' 。

svn: 解析 svn:externals 属性时出错。：'https://url.to.remote.branch'

如果我做

svn propedit svn:externals 'https://url.to.remote.branch' 。

::vi - 输入消息::

svn：在“https://url.to.remote.branch”上解析 svn:externals 属性时出错：“消息”

有任何想法吗？我无法谷歌/找到发生在“。”上的这个问题的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:01:26.990

svn propset svn:externals 'branch-dir url.to.remote.branch';

# google-maps-api-3 - 使用自己的照片时是否适用 Google 地图的使用限制？

> ID：10388626
> 
> 赞同：0
> 
> 时间：2012-04-30T18:24:33.000
> 
> 标签：google-maps-api-3

我是一个希望实现开源包的团队的一员，这样任何人都可以拍摄一系列全景照片并通过街景 API 创建虚拟之旅。

但是，在开始之前，我想澄清一下使用限制的适用范围。我们将在我们自己的服务器上托管照片，但使用 Google 的 API。请求限制是否适用于这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:56:36.243

> 使用 Google Street View Image API 的查询限制为每位查看者每天 1000 个唯一（不同）图像请求。

当您处理需要处理自定义请求的自定义图像时，使用 V3

检查[https://developers.google.com/maps/documentation/javascript/streetview#CustomPanoramaMethod](https://developers.google.com/maps/documentation/javascript/streetview#CustomPanoramaMethod)

[https://developers.google.com/maps/documentation/streetview/#usage_limits](https://developers.google.com/maps/documentation/streetview/#usage_limits)

您可能想要进行概念验证并对其进行测试以查看。

您的问题的最佳答案是给谷歌发电子邮件并询问他们。

# debian-packaging - Debian 如何管理包名冲突？

> ID：10388631
> 
> 赞同：3
> 
> 时间：2012-04-30T18:25:09.873
> 
> 标签：debian-packaging

Debian 如何管理包名冲突？例如，当在不同的存储库中有许多同名的包时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:44:13.050

当有许多同名的包时，APT 怎么知道它们是不同的呢？**它不能**。所以它会安装版本号最高的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:47:56.930

请参阅[Debian 政策手册](http://www.debian.org/doc/debian-policy/ch-binary.html)。

第 3.1 节说每个包都需要一个唯一的名称。第 3.2 节描述了如何确定版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:04:55.077

您可以使用 apt 的**首选项**文件为您的存储库提供更高的优先级。

```
man apt_preferences 
```

# jquery - 在一个页面上提交多个表单

> ID：10388632
> 
> 赞同：0
> 
> 时间：2012-04-30T18:25:16.397
> 
> 标签：jquery, html, forms, submit

我有一页上有一个搜索栏和一个评论表单。搜索栏有一些不错的小功能，例如实时搜索和建议，并通过 [ENTER] 提交。评论表单由 jquery-validate 插件验证并通过单击提交按钮提交。

搜索栏在它是唯一表单的页面上运行完美，但在启用评论表单的页面上，使用 [ENTER] 提交将不起作用。

我能做些什么来使这成为可能？

代码如下所示：

搜索：

```
<form  action="/goto/doSearch.php">
    <label>Search</label>
    <input id="searchBox" type="text" name="search" value="type and hit enter">
</form> 
```

评论：

```
<form id="rating" action="/goto/doComment.php" method="post">
   <input type="hidden" name="id" value="1"></input>
      <label for="cname">Name</label>
      <input class="required" id="cname" type="text" value="Your name" name="author">
      <input type="submit" name="submit" class="btn" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:44:06.607

我可以为您的问题看到的一种解决方案是为您的搜索字段制作一个按钮。因此，单击它会转到所需的页面。如果有的话，这将帮助您进一步诊断问题。只需确保将其命名为“提交”之外的其他名称。

例如...

```
<input type="submit" name="search" class="btn" value="Search"> 
```

否则，我注意到在你的代码中你有一个`id`for the`comment form`但不是 for the `search form`...这可能是一个问题，但没有更多细节我不确定。

# ctypes - Python Ctypes 和 FFTW 链接

> ID：10388637
> 
> 赞同：1
> 
> 时间：2012-04-30T18:25:27.393
> 
> 标签：ctypes, dynamic-linking, fftw

我正在尝试在 python 中使用 ac 数值库，该库依赖于使用 Ctypes 的 fftw3。假设我有一个如下所示的程序：

```
 foo.cc:
    #include <fftw3.h>

    extern "C"{

    void foo(){
    fftw_complex *result;
    result = fftw_alloc_complex(1024*1024*1024);
    } 
```

然后我使用以下方法编译它：

```
 icpc -O3 -fpic -c foo.cc -o foo.o
   icpc -shared -o libfoo.so  foo.o -lfftw3 
```

当我尝试使用 ctypes 将它加载到 python 中时，它似乎没有正确链接：

```
 import ctypes 
   lib = ctypes.cdll.LoadLibrary('libfoo.so') 
```

Python 打印：

```
 OSError: libfoo.so:
   undefined symbol: fftw_alloc_complex 
```

我最初使用的是全新安装的 fftw 3.1，使用 ./configure make make install 设置，但随后我尝试使用各种不同的选项（如此处概述的“-fPIC”）重新编译[fftw](https://stackoverflow.com/questions/2606450/python-ctypes-and-synamic-linking)。这给出了相同的错误消息，我现在没有想法了。同样的过程也适用于将其他库导入到以前使用 GSL 等外部库的 python 中，所以我不知道 FFTW3 出了什么问题。任何帮助将不胜感激。

〜道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T02:35:40.047

在同事的建议下，我搜索并手动删除了所有与 fftw 相关的 dll，然后使用正确的标志再次制作和安装`-fpic`。似乎 fftw 卸载脚本并没有完全删除以前版本的 fftw。

# jquery - 如何在模糊上显示 Jquery 对话框？

> ID：10388641
> 
> 赞同：0
> 
> 时间：2012-04-30T18:25:46.770
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我想显示一些信息（在 jquery 对话框中），所以当用户在文本框中输入一个值并模糊它应该使用该值进行 ajax 调用并在对话框中显示信息。

这是我到目前为止所尝试的：

```
 $(function () {
   $('#MyTextbox').blur(function () {
    var id = $(this).val();
    if (id >= "1") {
        alert(id);
        ShowData();
      }
    });
 });

function ShowData() {
   $("#dialog").dialog();
} 
```

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:43:11.773

```
$(function () {

   $("#dialog").dialog({ isOpen : false});//Create Dialog

   $('#MyTextbox').blur(function () {
       var id = parseInt($(this).val()); //See correction here

       if(id >= 1) {
         //Get content and append to dialog
         $("#dialog").dialog("open");//Open dialog
       } 
   });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:43:11.190

如果你在 php 中有一个 ajax 脚本，你可以直接从 blur 事件函数调用它并将 html 结果传递给对话框。

```
$('#MyTextbox').blur(function () {
    // the ajax call
    $.get('ajaxScript.php',{id: $("this").val()}, 
    function(data){
       //the result in html to the dialog 
       $("#dialog").empty().append(data).dialog();
    },'html');
}); 
```

希望这可以帮助

# java - 对 LinkedList 进行排序会导致丢失 LinkedList 中间值并仅返回 first 和 Last 作为 java 中的排序值

> ID：10388643
> 
> 赞同：0
> 
> 时间：2012-04-30T18:25:55.987
> 
> 标签：java, data-structures, linked-list

我的链表 -

```
class MyList{
        int N;
        MyList next = null;
        MyList(int N){
            this.N = N;
        }

        @Override
        public String toString() {
            MyList curr = this;
            String output = "";
            while(curr != null){
                output = output+curr.N+"-->";
                curr = curr.next;
            }
            return output+"TAIL";
        }
    } 
```

排序方法算法-

```
private static MyList sortLL(MyList L){
        int temp;
        if(L == null || L.next == null)
            return L;

        MyList current = L;
        MyList previous = null;

        while(current.next != null){
            if(current.N > current.next.N){
                temp = current.N;
                current.N = current.next.N;
                current.next.N = temp;
            }
            previous = current;
            current = current.next;
        }

        return previous;
    } 
```

输入 -

```
MyList list_Sort = new MyList(9);
        list_Sort.next = new MyList(8);
        list_Sort.next.next = new MyList(8);
        list_Sort.next.next.next = new MyList(7);
        list_Sort.next.next.next.next = new MyList(5);
        list_Sort.next.next.next.next.next = new MyList(4);
        list_Sort.next.next.next.next.next.next = new MyList(6);
        list_Sort.next.next.next.next.next.next.next = new MyList(3);
        list_Sort.next.next.next.next.next.next.next.next = new MyList(1);
        list_Sort.next.next.next.next.next.next.next.next.next = new MyList(2); 
```

> 输入 - 9-->8-->8-->7-->5-->4-->6-->3-->1-->2-->TAIL
> 
> 输出 - 2-->9-->TAIL
> 
> 预期输出 - 输入应按排序顺序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:36:37.250

首先，您无法使用显示的算法对其进行排序。假设您使用的是冒泡排序，排序是 O(n^2) 操作。下一个问题是你的“以前的”被覆盖了。

实际上，您的逻辑中不需要先前的。您不是在交换列表的节点，而是在交换列表的值。您可以使用 L 导航列表，而不是返回以前的（完全删除它）。

附带说明一下，假设您正在尝试学习新事物；我建议您学习如何使用调试器。

# regex - 如何使用 Windows 通配符查找目录中的所有文件名

> ID：10388644
> 
> 赞同：0
> 
> 时间：2012-04-30T18:25:59.733
> 
> 标签：regex, windows, cmd, wildcard, regex-negation

我有两个文件：

```
asdf.txt.txt
asdf.txt 
```

是否可以使用 cmd 仅查找以 .txt 结尾的文件而不是其上方的文件：.txt.txt？

我有 ：

```
 dir *.txt 
```

但它仍然产生两个文件

是否有可能做到这一点

ps这是一个家庭作业，但我在网上查看，无法从cmd行找到任何方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:05:04.300

由于这是作业，我不会提供完整的答案。但是有一个使用管道 ( `|`) 和 FINDSTR 的简单解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:06:31.887

```
dir *.txt | findstr/v/i "txt.txt" 
```

`findstr/v`将禁止包含“txt.txt”的行。 `/i`告诉它引号中的字符串不区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:30:39.050

是的。

这取决于你想要做什么。这两个文件在技术上都是 *.txt。您可以执行类似 dir *f.txt 的操作，或者您可以使用一些带有 findstr 的虚假正则表达式： [http ://technet.microsoft.com/en-us/library/bb490907.aspx](http://technet.microsoft.com/en-us/library/bb490907.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:39:17.243

正如 dweiss 指出的那样，给您的结果在技术上是正确的。

另一个（尽管可能更复杂）的解决方案是使用[Powershell 来执行类似 GREP 的命令](http://dereknewton.com/2010/12/powershell-grep-equivalent)。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-04-30T19:13:16.030

从...开始：

事情.txt 事情.txt.txt

任*.txt.txt *.xyz

事情.txt 事情.txt.xyz

目录 *.txt

仅列出 thing.txt

目录 *.xyz

仅列出 thing.txt.xyz

任*.xyz *.txt

给你原来的文件名。

# sql - 这个 UPDATE 语句会起作用吗？

> ID：10388651
> 
> 赞同：0
> 
> 时间：2012-04-30T18:27:07.470
> 
> 标签：sql, sql-update

```
UPDATE table1
 SET variable1 = (SELECT variable1 FROM table2),
     variable2 = (SELECT variable2 FROM table2)
WHERE table1.variable3 = table3.variable3; 
```

基本上我正在编写一个查询来使用 table2 中的数据更新 table1。但是 where 语句使用的是 table1 和 table3。我想知道这是否可行，或者我是否必须在 SELECT 之后使用 WHERE 语句来创建一些约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:29:52.450

不，因为您无法明确保证嵌套子查询仅返回一行。
**编辑：**而且，根据@wildplasser 对该问题的评论，它也会失败，因为 table3 没有`JOIN`正确编辑（根本）

考虑一下这种变化......可能不适合您的目标，但**可以正常工作**，因为它只从每个子查询返回一行：

```
UPDATE 
    table1
SET 
    variable1 = (SELECT TOP 1 variable1 FROM table2)
    ,variable2 = (SELECT TOP 1 variable2 FROM table2)
FROM
    table1
JOIN 
    table3
        ON table3.variable3 = table1.variable3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:30:13.777

不，但它可以。

```
UPDATE table1
    SET variable1 = (SELECT TOP 1 variable1 FROM table2),
        variable2 = (SELECT TOP 1 variable2 FROM table2)
FROM table1
    INNER JOIN table3 on table1.variable3 = table3.variable3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:34:33.810

不，这行不通。（大多数？）不过，RDBMS 将允许您执行 JOINed UPDATE。这通常是解决这些问题 IMO 的更好方法：

```
UPDATE table1
SET variable1 = table2.variable1,
    variable2 = table2.variable2
FROM table1
JOIN table3 ON
    table1.variable3 = table3.variable3
--Presumably there's only 1 row in table2, with no JOIN criteria
CROSS JOIN table2; 
```

这将使其中的`UPDATE`所有行`table1`也包含在`table3`中的值中`table2`

# visual-studio-2010 - 无法使用转换删除 Web.Config 节点

> ID：10388652
> 
> 赞同：12
> 
> 时间：2012-04-30T18:27:09.233
> 
> 标签：visual-studio-2010, web-deployment, slowcheetah

我有一个 web.config 包含这样的重写规则：

```
<system.webServer>
    <rewrite>
      <rules><!-- Some rules here --></rules>
    </rewrite>
</system.webServer> 
```

对于特定的部署配置，我想`<rewrite>`完全删除节点。

我试过这样做：

```
<system.web>
    <rewrite xdt:Transform="RemoveAll" />
</system.web> 
```

基于此文档：

[http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

但`<rewrite>`节点仍然存在。

我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-01T06:05:52.563

嗯我刚试过这是我的转换文件。

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

  <system.webServer>
    <rewrite xdt:Transform="RemoveAll" />
  </system.webServer>

</configuration> 
```

结果如下： [SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)[![说明转换后 web.config 的差异](../Images/a7f7f699c11a718afcf1fbcb7107896a.png)](https://i.stack.imgur.com/kNgUX.png) 提供的仅供参考的预览。

我还打包了web项目，验证了web.config确实没有rewrite节点。在这里尝试的一件事是删除您的 obj\ 文件夹并重试。你能告诉我结果吗？

# haml - guard-haml 输出到多个位置

> ID：10388657
> 
> 赞同：1
> 
> 时间：2012-04-30T18:27:21.183
> 
> 标签：haml, guard

我希望 Guard 将 haml 编译的输出发送到两个不同的地方。我尝试在我的 Guardfile 中调用 haml 两次，如下所示：

```
guard 'haml', :output => 'first_dir/', :input => 'src/haml' do
  watch %r{^src/haml/.+(\.html\.haml)(?!(\.swp))}
end
guard 'haml', :output => 'second_dir/', :input => 'src/haml' do
  watch %r{^src/haml/.+(\.html\.haml)(?!(\.swp))}
end 
```

但这只会陷入无限循环。我的 Guardfile 需要什么样的外观才能输出到两个不同的目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T22:16:55.960

我看不出您的 Guardfile 有任何问题。作为解决方法，您可以使用组并启动两个 Guard 进程：

```
group :first do
  guard 'haml', :output => 'first_dir/', :input => 'src/haml' do
    watch %r{^src/haml/.+(\.html\.haml)(?!(\.swp))}
  end
end

group :second do
  guard 'haml', :output => 'second_dir/', :input => 'src/haml' do
    watch %r{^src/haml/.+(\.html\.haml)(?!(\.swp))}
  end
end 
```

现在您在自己的终端中启动每个：

```
guard -g first
guard -g second 
```

不是很优雅，但它会工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:28:09.317

对于任何遇到上述答案并试图让小组工作的人，Netzpirat 的语法错误。正确的语法如下：

```
group :iPhone do
    guard 'haml', :input => 'src/haml', :output => '../iPhone/www/' do
        watch %r{^src/haml/.+(\.html\.haml)}
    end
end 
```

仍然感谢 Netzpirat，因为直到这个 SO 问题我才真正了解此功能。

# c# - C# 将 sql 日期时间与 null 进行比较

> ID：10388658
> 
> 赞同：1
> 
> 时间：2012-04-30T18:27:26.977
> 
> 标签：c#, linq, sql-server-2008, asp.net-mvc-4

我在 ASP.NET MVC 4 中创建了一些东西，在我的一个表中有一个 type 字段`datetime`。在更新之前，该字段默认为空。我正在尝试从此表中选择具有此字段为空的行，但我的 LINQ 查询始终不返回任何内容。这是我的查询。

```
from m in this._db.MessageReadStates
where m.UserName == name
      && m.ReadDate == null
select m 
```

我是 C# 新手，所以有没有正确的方法来检查 null？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:29:48.657

您要检查类型的`HasValue`属性`Nullable<DateTime>`：

```
&& !m.ReadDate.HasValue 
```

# spring - 是否可以使用 Spring 的 @ExceptionHandler 来获取实际引发异常的处理程序？

> ID：10388660
> 
> 赞同：1
> 
> 时间：2012-04-30T18:27:28.740
> 
> 标签：spring, exception, spring-mvc, exception-handling

看起来 HandlerExceptionResolver 提供了这个功能：

```
resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) 
```

我假设“处理程序”是引发异常的处理程序。我可以在@ExceptionHandler 中得到这个，包括与该处理程序的请求映射关联的所有详细信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:59:43.097

根据[javadoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)，不，你不能。允许的参数类型列表不包括有关处理程序本身的信息。

# php - 无法使用 PHP 更改 xml 值

> ID：10388661
> 
> 赞同：4
> 
> 时间：2012-04-30T18:27:43.123
> 
> 标签：php, xml, dom

这是我的 XML 文件：

```
<todos>
  <todo>
    <titel>sasd</titel>
    <erstellt>2012-04-30 17:19:21</erstellt>
    <erledigen_bis>2012-05-03</erledigen_bis>
    <erledigt>Nein</erledigt>
    <thingstodo>sffsdfdf</thingstodo>
  </todo>
</todos> 
```

现在我想将`<erledigt>`标签内的值更改为“Ja”。

我用以下代码尝试了这个：

```
<?php
$filename = 'xml/todos.xml';

$xmlDoc = new DOMDocument();
$xmlDoc->load('xml/todos.xml');

$todos = $xmlDoc->getElementsByTagName('todo');         

foreach ($todos as $todo) {

    $titel = $todo->getElementsByTagName('titel');
    $actualTitel = $titel->item(0)->nodeValue;
    $paramTitel = $_GET["titel"];

    $erstellt = $todo->getElementsByTagName('erstellt');    
    $actualTimestamp = $erstellt->item(0)->nodeValue;
    $paramTimestamp = $_GET["timestamp"];

    if ($paramTitel == $actualTitel && $paramTimestamp == $actualTimestamp) {

        $todo->erledigt= 'Ja';

    }
}

$xmlDoc->save($filename);

header('Location: todo.php');
?> 
```

请帮助我，我在网上搜索了大约 5 个小时，但找不到任何解决我问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:39:36.217

`$todo->erledigt`在 DOMDocument 中不起作用，只有 SimpleXML 可以做到。您需要`getElementsByTagName`再次使用。

您还需要使用`nodeValue`来获取/设置元素的值。

```
if ($paramTitel == $actualTitel && $paramTimestamp == $actualTimestamp) {
    $todo->getElementsByTagName('erledigt')->item(0)->nodeValue = 'Ja';
} 
```

演示：[http ://codepad.org/xJbQmO2u](http://codepad.org/xJbQmO2u)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:44:16.183

您需要`<erledigt>`使用 DOM 方法和属性来编辑元素以访问它。看起来您将它与 SimpleXML 混淆了。

```
$todo->getElementsByTagName('erledigt')->item(0)->nodeValue = 'Ja'; 
```

* * *

如果您确实想看看使用 SimpleXML，那么您的整个代码可能看起来像这样。

```
<?php

$paramTitel = $_GET["titel"];
$paramTimestamp = $_GET["timestamp"];

$todos = simplexml_load_file('xml/todos.xml');
foreach ($todos->todo as $todo) {
    if ($paramTitel == (string) $todo->titel 
     && $paramTimestamp == (string) $todo->erstellt
    ) {
        $todo->erledigt = 'Ja';
    }
}

$todos->asXML($filename); // Where does $filename come from?

header('Location: todo.php');

?> 
```

* * *

阅读：

*   [SimpleXML 用法和示例](http://php.net/simplexml.examples-basic)
*   [DOMDocument::getElementsByTagName()](http://php.net/domdocument.getelementsbytagname)
*   [DOMNodeList::item()](http://php.net/domnodelist.item)
*   [DOMNode::nodeValue](http://php.net/class.domnode#domnode.props.nodevalue)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T18:47:18.100

当您在文档中查找特定元素时，我强烈建议您使用 xpath 找到它们：

```
$xp = new DOMXPath($doc);
$expression = sprintf('//todo[titel = "%s" and erstellt = "%s"]/erledigt', $_GET["titel"], $_GET["timestamp"]);
$result = $xp->query($expression);
foreach ($result as $node) {
    $node->nodeValue = 'Ja';
} 
```

这导致以下（示例性）xpath 表达式：

```
//todo[titel = "sasd" and erstellt = "2012-04-30 17:19:21"]/erledigt 
```

这将选择作为节点`erledigt`一部分的所有节点，这些`todo`节点具有指定的`titel`和`erstellt`节点值。

然后，您可以轻松更改它。此外，您正在寻找`erledigt`还不是“erledigt”的节点，但当前的变体已经没有伤害。

[演示/完整代码示例](http://codepad.org/Dsby1NR4)：

```
<?php
/**
 * @link http://stackoverflow.com/q/10388661/367456
 */

$_GET["titel"] = 'sasd';
$_GET["timestamp"] = '2012-04-30 17:19:21';

$xml = '<todos>
  <todo>
    <titel>sasd</titel>
    <erstellt>2012-04-30 17:19:21</erstellt>
    <erledigen_bis>2012-05-03</erledigen_bis>
    <erledigt>Nein</erledigt>
    <thingstodo>sffsdfdf</thingstodo>
  </todo>
</todos>';

$doc = new DOMDocument();
$doc->loadXML($xml);
$xp = new DOMXPath($doc);
$expression = sprintf('//todo[titel = "%s" and erstellt = "%s"]/erledigt', $_GET["titel"], $_GET["timestamp"]);
$result = $xp->query($expression);
foreach ($result as $node) {
    $node->nodeValue = 'Ja';
}

echo $doc->saveXML(); 
```

# android - 如何从 url 保存图像？

> ID：10388666
> 
> 赞同：4
> 
> 时间：2012-04-30T18:28:15.150
> 
> 标签：android, android-imageview

我正在使用`setImageBitmap`外部图像 url 设置 ImageView。我想保存图像，以便以后即使没有互联网连接也可以使用。我可以在哪里以及如何保存它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T18:46:45.423

```
URL imageurl = new URL("http://mysite.com/me.jpg"); 
Bitmap bitmap = BitmapFactory.decodeStream(imageurl.openConnection().getInputStream()); 
```

此代码将帮助您从图像 url 生成位图。

这个[问题](https://stackoverflow.com/questions/4263375/android-saving-created-bitmap-to-directory-on-sd-card)回答了第二部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T18:37:34.143

您必须将其保存在 SD 卡或包数据中，因为在运行时您只能访问这些。要做到这一点，这是一个很好的例子

```
URL url = new URL ("file://some/path/anImage.png");
InputStream input = url.openStream();
try {
//The sdcard directory e.g. '/sdcard' can be used directly, or 
//more safely abstracted with getExternalStorageDirectory()
File storagePath = Environment.getExternalStorageDirectory();
OutputStream output = new FileOutputStream (storagePath + "/myImage.png");
try {
    byte[] buffer = new byte[aReasonableSize];
    int bytesRead = 0;
    while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
        output.write(buffer, 0, bytesRead);
    }
} finally {
    output.close();
}
} finally {
input.close();
} 
```

来源：[如何将图像从其 URL 传输到 SD 卡？](https://stackoverflow.com/questions/3296850/android-how-to-store-images-from-url-save-it-in-sd-card)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-09T09:27:02.417

如果您在应用程序中使用**Kotlin**和**Glide ，那么这适合您：**

```
Glide.with(this)
                .asBitmap()
                .load(imageURL)
                .into(object : SimpleTarget<Bitmap>(1920, 1080) {
                    override fun onResourceReady(bitmap: Bitmap, transition: Transition<in Bitmap>?) {
                        saveImage(bitmap)
                    }
                }) 
```

这就是那个功能

```
internal fun saveImage(image: Bitmap) {
    val savedImagePath: String

    val imageFileName = System.currentTimeMillis().toString() + ".jpg"
    val storageDir = File(Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES).toString() + "/Folder Name")
    var success = true
    if (!storageDir.exists()) {
        success = storageDir.mkdirs()
    }
    if (success) {
        val imageFile = File(storageDir, imageFileName)
        savedImagePath = imageFile.absolutePath
        try {
            val fOut = FileOutputStream(imageFile)
            image.compress(Bitmap.CompressFormat.JPEG, 100, fOut)
            fOut.close()
        } catch (e: Exception) {
            e.printStackTrace()
        }

        galleryAddPic(savedImagePath)
    }
}

private fun galleryAddPic(imagePath: String) {
    val mediaScanIntent = Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE)
    val f = File(imagePath)
    val contentUri = FileProvider.getUriForFile(applicationContext, packageName, f)
    mediaScanIntent.data = contentUri
    sendBroadcast(mediaScanIntent)
} 
```

`galleryAddPic()`用于查看手机图库中的图像。

**注意：**现在如果您遇到文件 uri 异常，那么[这](https://stackoverflow.com/q/38200282/8874958)可以帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:33:38.463

您可以将图像保存在 sdcard 中，以后无需互联网即可使用该图像。

[请参阅本教程](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)将展示如何存储图像并再次阅读它。

希望对你有帮助.....！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-18T15:55:56.377

也许有一天它会帮助像我这样的人

```
 new SaveImage().execute(mViewPager.getCurrentItem());//calling function

private void saveImage(int currentItem) {
    String stringUrl = Site.BASE_URL + "socialengine/" + allImages.get(currentItem).getMaster();
    Utils.debugger(TAG, stringUrl);

    HttpURLConnection urlConnection = null;
    try {
        URL url = new URL(stringUrl);
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.connect();
        File sdCardRoot = Environment.getExternalStorageDirectory().getAbsoluteFile();

        String fileName = stringUrl.substring(stringUrl.lastIndexOf('/') + 1, stringUrl.length());
        String fileNameWithoutExtn = fileName.substring(0, fileName.lastIndexOf('.'));

        File imgFile = new File(sdCardRoot, "IMG" + System.currentTimeMillis() / 100 + fileName);
        if (!sdCardRoot.exists()) {
            imgFile.createNewFile();
        }

        InputStream inputStream = urlConnection.getInputStream();
        int totalSize = urlConnection.getContentLength();
        FileOutputStream outPut = new FileOutputStream(imgFile);

        int downloadedSize = 0;
        byte[] buffer = new byte[2024];
        int bufferLength = 0;
        while ((bufferLength = inputStream.read(buffer)) > 0) {
            outPut.write(buffer, 0, bufferLength);
            downloadedSize += bufferLength;
            Utils.debugger("Progress:", "downloadedSize:" + Math.abs(downloadedSize*100/totalSize));
        }
        outPut.close();
        //if (downloadedSize == totalSize);
            //Toast.makeText(context, "Downloaded" + imgFile.getPath(), Toast.LENGTH_LONG).show();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

 private class SaveImage extends AsyncTask<Integer, Void, String> {

    @Override
    protected String doInBackground(Integer... strings) {
        saveImage(strings[0]);
        return "saved";
    }

    @Override
    protected void onPostExecute(String s) {
        Toast.makeText(context, "" + s, Toast.LENGTH_SHORT).show();
    }
} 
```

# java - 帆布与面板

> ID：10388668
> 
> 赞同：3
> 
> 时间：2012-04-30T18:28:18.860
> 
> 标签：java, canvas, jpanel

如果我想在屏幕上显示椭圆和矩形，我应该使用画布还是 JPanel？

有什么不同？我什么时候使用每个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:34:05.127

`Canvas`是一个 AWT 对象；`JPanel`是一个轻量级的 Java Swing 对象。如果您有 Java Swing GUI，我强烈建议您使用`JPanel`.

[这是JPanel](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JPanel.html)上的一个很好的链接：

> 在最简单的情况下，您使用 a的方式与使用 a`JPanel`的方式完全相同`Panel`。分配它，将组件放入其中，然后将其添加`JPanel` 到一些`Container`. 但是，`JPanel`也可以替代 `Canvas`（没有`JCanvas`）...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:33:00.403

一般来说，如果你使用 Swing，你应该只使用 Swing 组件。在同一个 GUI 中混合 Swing 和 AWT 组件会导致奇怪的结果。所以我会使用 JPanel 或原始 JComponent。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:35:57.477

`JLabel`或者如果你想显示像*图标*这样的静态图像，你可以使用。

```
BufferedImage image=
  new BufferedImage(100, 50, BufferedImage.TYPE_INT_ARGB);
Graphics2D g2 = image.createGraphics();

// draw
g2.draw(new Ellipse2D.Double(x, y, rectwidth,rectheight));
g2.fill (new Ellipse2D.Double(0, 0, 100, 50));

JLabel label = new JLabel(new ImageIcon( image )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-20T02:49:38.790

这取决于你喜欢什么，但是，我会使用 JFrame，它直接创建一个窗口，你可以在上面绘图。Canvas 有它的优点，它可以让你少写一个 import，它还可以将 window 的东西与 canvas 的图形的东西分开，但它也有它的缺点，那就是无法访问 window。这取决于你喜欢什么和需要什么。

# c# - TransactionInterop.GetDtcTransaction() 有时会抛出 ArgumentNullException ...

> ID：10388671
> 
> 赞同：3
> 
> 时间：2012-04-30T18:28:30.970
> 
> 标签：c#, oracle, transactions, transactionscope, distributed-transactions

我偶尔会遇到此异常，并且似乎无法在 SO 或 google 上找到任何可以了解如何调试此异常的信息。

```
System.ArgumentNullException: Value cannot be null.
Parameter name: transaction
   at System.Transactions.TransactionInterop.
                        GetDtcTransaction(Transaction transaction)
   at Oracle.DataAccess.Client.OracleConnection.Open()
   at RetrieveMessage() ... 
```

我的代码相当简单。`RetrieveMessage()`是从队列中弹出消息的调用，但这无关紧要，因为这只是尝试打开连接而失败。

```
using (var scope = new TransactionScope(TransactionScopeOption.Required,
                                            TimeSpan.FromMinutes(10)))
{
    message = RetrieveMessage();
    // ...
    scope.Complete();
}

//...

public Message RetrieveMessage()
{
    using (var cnn = new OracleConnection(ConnString))
    {
        cnn.Open(); //sometimes fails???
        //... execute a stored procedure that calls dbms_aq.dequeue()
    }
    //... return dequeued message or null if queue is empty
} 
```

我的连接字符串如下所示：`Data Source=abc;User ID=test1;Password=test1;Pooling=true;Validate Connection=True`

ODP.NET：版本 2.112.1.0，.NET Framework 3.5 SP0

当我已经明确创建了一个事务时，为什么没有可用的事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T14:49:45.723

我相信当客户端尝试使用的 TCP 端口被数据库服务器或客户端以外的代理关闭时，就会发生这种情况。我们已经能够通过使用 TCPView 关闭客户端和服务器之间端口 1521 上的所有连接，然后尝试在同一进程中打开连接来模拟这一点。在现实世界中，我们认为内部防火墙由于不活动而关闭了连接。但是，除了防止关闭连接之外，我还没有找到解决此问题的实际解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T23:32:12.190

如果它只是有时会失败，请尝试以下操作：

```
while (true){
    if (ConnString == null)
        continue;
    var cnn = new OracleConnection(ConnString);
    if (cnn == null)
        continue;
    cnn.Open()
    //... execute a stored procedure that calls dbms_aq.dequeue() 
    break;
}
//... return dequeued message or null if queue is empty 
```

抱歉，我对“交易”了解不多，所以只能提供帮助

# ruby - Ruby - 确定对象是否包含在列表中的替代样式？

> ID：10388683
> 
> 赞同：3
> 
> 时间：2012-04-30T18:29:32.887
> 
> 标签：ruby

假设您有一个包含多个 OR 的条件，例如

```
if action == 'new' || action == 'edit' || action == 'update' 
```

另一种写法是：

```
if ['new', 'edit', 'action'].include?(action) 
```

但这感觉像是编写逻辑的“倒退”方式。

是否有任何内置方法可以执行以下操作：

```
if action.equals_any_of?('new', 'edit', 'action') 
```

?

更新 - 我非常热衷于这个小片段：

```
class Object
  def is_included_in?(a)
    a.include?(self)
  end
end 
```

更新 2 - 基于以下评论的改进：

```
class Object
  def in?(*obj)
    obj.flatten.include?(self)
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:31:01.767

使用正则表达式？

```
action =~ /new|edit|action/ 
```

或者：

```
action.match /new|edit|action/ 
```

或者只是编写一个在您的应用程序上下文中具有语义意义的简单实用程序方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T18:34:12.940

另一种方法是

```
case action
when 'new', 'edit', 'action'
  #whatever
end 
```

您还可以对这样的情况使用正则表达式

```
if action =~ /new|edit|action/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:32:32.323

您可以将`%w`符号用于字符串数组：

```
%w(new edit action).include? action 
```

# javascript - Jquery XML 在 Firefox 中工作而不是在 IE 中

> ID：10388685
> 
> 赞同：0
> 
> 时间：2012-04-30T18:29:38.873
> 
> 标签：javascript, jquery, xml, function, loops

```
var xml = 'XML text';

$('Collection > SubCollection', xml).each(function(){ 
alert("in);
} 
```

这个 jquery 函数在 Firefox 中运行良好，但在 IE 中不行，我怎样才能让它在 IE 中运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:34:49.230

我认为任何低于 9 的 IE 版本（也可能是 9！）不支持此选择器。
您将需要使用类选择器来解决此问题，以使其成为跨浏览器。

例如：
`$('.Collection .SubCollectionItem')`
这将为您提供所有具有“SubCollectionItem”类并且是具有“Collection”类的元素的子项的项目

# jquery - 向导航添加选项“子菜单”

> ID：10388687
> 
> 赞同：0
> 
> 时间：2012-04-30T18:29:42.357
> 
> 标签：jquery, navigation

我从[http://css-tricks.com/convert-menu-to-dropdown](http://css-tricks.com/convert-menu-to-dropdown)获得了以下代码，它非常适合将标准导航转换为选择菜单。我想知道如何添加使用子菜单的条件。例如，这是 WordPress 导航创建的默认 html...

```
<ul id='menu-collections'>
  <li><a href='http://...'>blah</a>
    <ul class='sub-menu'>
      <li><a href='http://...'>blah</a></li>
    </ul>
  </li>
</ul> 
```

还有一个 JS Fiddle 让事情变得更容易 - [http://jsfiddle.net/eaDLX/](http://jsfiddle.net/eaDLX/)

我想做的是在每个具有子菜单类的 ul 前面加上“-”，以便我的列表看起来像这样......

选择一个选项...

社论（这将是父母）

-- 1920 年代收藏（这将是孩子）

广告

——鲍尔默收藏

ETC...

我敢肯定这会很简单，但我无法实现逻辑上的飞跃。有人可以帮忙吗？谢谢

```
 // Create the dropdown base

        $("<select />").appendTo("nav#menu-collections");

        // Create default option "Go to..."
        $("<option />", {
           "selected": "selected",
           "value"   : "",
           "text"    : "Choose a Collection..."
        }).appendTo("nav#menu-collections select");

        // Populate dropdown with menu items
        $("nav#menu-collections a").each(function() {
         var el = $(this);
         $("<option />", {
             "value"   : el.attr("href"),
             "text"    : el.text()
         }).appendTo("nav#menu-collections select");
        });

        $("nav#menu-collections select").change(function() {
         window.location = $(this).find("option:selected").val();
        });

        /* Hide existing menu */
        $('nav#menu-collections ul').hide(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:44:27.560

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            // Create the dropdown base
            $('<select />').appendTo('nav#menu-collections');

            // Create default option "Go to..."
            $('<option />', {
                'selected': 'selected',
                'value': '',
                'text': 'Choose a Collection...',
                'class': 'select'
            }).appendTo('nav#menu-collections select');

            // Populate dropdown with menu items
            $('ul.menu > li').each(function () {
                var obj = $(this);
                if (obj.children('ul.sub-menu').length !== 0) {
                    var subMenuListItems = $('<optgroup />', { 'label': obj.children('a').text() });

                    if (obj.children('a').attr('href') !== undefined) {
                        subMenuListItems.append($('<option />', {
                            'value': obj.children('a').attr('href'),
                            //'text': obj.children('a').text()   //Or 
                            'text': 'Home'
                        }));
                    }

                    obj.children('ul.sub-menu').find('a').each(function () {
                        subMenuListItems.append($('<option />', {
                            'value': $(this).attr('href'),
                            'text': $(this).text()
                        }));
                    });

                    $('nav#menu-collections select').append(subMenuListItems);
                }
                else {
                    $('<option />', {
                        'value': obj.children('a').attr('href'),
                        'text': obj.children('a').text()
                    }).appendTo('nav#menu-collections select');
                }
            });

            $('nav#menu-collections select').change(function () {
                if ($(this).find('option:selected').hasClass('select') == false) {
                    window.location = $(this).find('option:selected').val();
                }
            });

            $('nav#menu-collections ul').remove();
        });
    </script>
</head>
<body>
    <nav id="menu-collections" role="navigation">
    <div class="menu-collections-container">
        <ul id="menu-collections-ul" class="menu">
            <li id="menu-item-53" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#HeaderTest">Header Test</a>
            </li>
            <li id="menu-item-52" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#1920">1920</a>
                <ul class="sub-menu">
                    <li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-91">
                        <a href="#1920Test1">Test1</a> <a href="#1920Test5">Test5</a> <a href="#1920test4">
                            Test4</a> </li>
                </ul>
            </li>
            <li id="menu-item-54" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#HeaderTest2">Header Test 2</a>
            </li>
            <li id="menu-item-55" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#1921">1921</a>
                <ul class="sub-menu">
                    <li id="Li2" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-91">
                        <a href="#1921test">Test1</a> <a href="#1921test3">Test3</a> </li>
                </ul>
            </li>
        </ul>
    </div>
    </nav>
    <h1>
        1920
    </h1>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:55:19.533

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            // Create the dropdown base
            $('<select />').appendTo('nav#menu-collections');

            // Create default option "Go to..."
            $('<option />', {
                'selected': 'selected',
                'value': '',
                'text': 'Choose a Collection...',
                'class': 'select'
            }).appendTo('nav#menu-collections select');

            // Populate dropdown with menu items
            $('ul.menu > li').each(function () {
                var obj = $(this);

                $('<option />', {
                    'value': obj.children('a').attr('href'),
                    'text': obj.children('a').text()
                }).appendTo('nav#menu-collections select');

                if (obj.children('ul.sub-menu').length !== 0) {
                    obj.children('ul.sub-menu').find('a').each(function () {
                        $('<option />', {
                            'value': $(this).attr('href'),
                            'text': '--' + $.trim($(this).text())
                        }).appendTo('nav#menu-collections select');
                    });
                }
            });

            $('nav#menu-collections select').change(function () {
                if ($(this).find('option:selected').hasClass('select') == false) {
                    window.location = $(this).find('option:selected').val();
                }
            });

            $('nav#menu-collections ul').remove();
        });
    </script>
</head>
<body>
    <nav id="menu-collections" role="navigation">
    <div class="menu-collections-container">
        <ul id="menu-collections-ul" class="menu">
            <li id="menu-item-53" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#HeaderTest">Header Test</a>
            </li>
            <li id="menu-item-52" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#1920">1920</a>
                <ul class="sub-menu">
                    <li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-91">
                        <a href="#1920Test1">Test1</a> <a href="#1920Test5">Test5</a> <a href="#1920test4">
                            Test4</a> </li>
                </ul>
            </li>
            <li id="menu-item-54" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#HeaderTest2">Header Test 2</a>
            </li>
            <li id="menu-item-55" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-49 current_page_item menu-item-52">
                <a href="#1921">1921</a>
                <ul class="sub-menu">
                    <li id="Li2" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-91">
                        <a href="#1921test">Test1</a> <a href="#1921test3">Test3</a> </li>
                </ul>
            </li>
        </ul>
    </div>
    </nav>
    <h1>
        1920
    </h1>
</body>
</html> 
```

# html - 为什么一些浮动元素决定清除两者？

> ID：10388697
> 
> 赞同：6
> 
> 时间：2012-04-30T18:30:14.880
> 
> 标签：html, css

首先，此示例仅适用于支持 的浏览器`:nth-child`，例如 Chrome 或 FireFox。我有一个无序列表，其中奇数列表项向左浮动并向左清除，偶数列表项向右浮动并向右清除。像这样：

**HTML：**

```
<ul class="waterfall">
    <li style="height: 100px;">1</li>
    <li style="height: 200px;">2</li>
    <li style="height: 50px;">3</li>
    <li style="height: 100px;">4</li>
    <li style="height: 200px;">5</li>
    <li style="height: 50px;">6</li>
    <li style="height: 50px;">7</li>
    <li style="height: 50px;">8</li>
</ul>​ 
```

**CSS：**

```
.waterfall {width:302px;}

.waterfall LI {
    min-width: 150px;
    background-color: #CCC;
    margin-top: 2px;
}
.waterfall LI:nth-child(odd) {
    float: left;
    clear: left;
    text-align: right;
}
.waterfall LI:nth-child(even) {
    float: right;
    clear: right;
    text-align: left;
}​ 
```

**[这是小提琴。](http://jsfiddle.net/bryandowning/HNY9r/)**

**目标：**

所有奇数列表项都应该向左浮动并堆叠在一起，除了 2px 边距外，两者之间没有间隙。偶数列表项也是如此，除了它们应该向右浮动。

**问题简述：**

我很困惑，为什么在这个例子中，LI #5 不能出现在 LI #4 之上，而 LI #8 不能出现在 LI #7 之上。换句话说，为什么 LI #5 清除 LI #2，而 LI #8 清除 LI #5？还有，为什么 LI #3 不清除 LI #2（我不想这样，但是如果 LI #5 清除 LI #2，为什么 LI #3 不加入派对）？

**TL;博士**

到目前为止，我的想法有些不确定。如果第一个元素稍后在标记中定义，则浏览器似乎不希望元素的顶部出现在另一个元素的顶部之上。真的吗？

我知道浮动元素被放置在一条线上，并且任何不适合该线的浮动元素都会跳到一条新线并从那里流动（与绝对定位元素的自由流动概念相反）。换句话说，浮动元素从文档流中移除，但不像绝对定位元素那样从字面上删除，因为浮动元素仍然相对于它开始的任何行定位，并且它仍然占用文档流中的空间。那么，浮动元素悬挂的下一条“线”是如何确定的呢？在这个例子中，为什么 LI #3 不清除 LI #2，而 LI #5 是？

**我不是在寻找什么：**

通过更改标记、放弃浮动或使用 JavaScript 来使此布局工作的巧妙解决方案。我知道该怎么做。我只是希望以花车的神秘方式接受教育。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:50:36.537

它并没有你想象的那么神秘，你在 jsFiddle 中的图表实际上很好地说明了它。用语言解释可能很困难，但我会试一试：

本质上，1 向左浮动，2 向右浮动，然后 3 向左浮动并在 2 下向上移动，因为没有规则必须清除右侧。

当谈到 4，它浮动正确，有*一个*规则，因此你会看到一个硬中断是 2 下的 4 步。这开始了循环，因为 5 现在位于 4 旁边的位置，再次没有什么能阻止 6 从加入 4，因为它不必清除左侧。

7 必须低于 5 的原因与 4 必须低于 3 并再次离开的原因相同。正如评论中提到的，浮动元素不会将它们从流程中删除，这就是为什么您可以将`img`a浮动`p`而不是最终将照片放在页面顶部的部分原因，这个概念也可能真的对您有所帮助确切地了解发生了什么。

这有帮助还是只是让事情变得更加混乱？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:58:54.577

从[CSS 2.1 规范](http://www.w3.org/TR/CSS2/visuren.html#float-rules)：

> 以下是控制浮动行为的精确规则：
> 
> 1 左浮动框的左外边缘可能不在其包含块的左边缘的左侧。类似的规则适用于右浮动元素。
> 
> 2 如果当前框是左浮动的，并且源文档中存在由更早的元素生成的左浮动框，那么对于每个这样的更早的框，当前框的左外边缘必须在前一个盒子的右外边缘，或者它的顶部必须低于前一个盒子的底部。类似的规则适用于右浮动框。
> 
> 3 左浮动框的右外边缘不得位于其旁边的任何右浮动框的左外边缘的右侧。类似的规则适用于右浮动元素。
> 
> 4 浮动框的外顶部不得高于其容纳块的顶部。当浮动出现在两个折叠边距之间时，浮动的位置就好像它有一个其他空的匿名块父级参与流一样。这种父级的位置由边距折叠部分中的规则定义。
> 
> 5 浮动框的外部顶部不得高于源文档中较早元素生成的任何块或浮动框的外部顶部。
> 
> 6 元素浮动框的外部顶部不得高于包含源文档中先前元素生成的框的任何行框的顶部。
> 
> 7 一个左浮动框在其左侧有另一个左浮动框，其右外边缘可能不在其包含块的右边缘的右侧。（松散地说：左浮动可能不会突出在右边缘，除非它已经尽可能地向左。）类似的规则适用于右浮动元素。
> 
> 8 浮箱必须放置在尽可能高的位置。
> 
> 9 左浮箱尽量放在左边，右浮箱尽量放在右边。较高的位置优于更左/右的位置。

所以

> 如果第一个元素稍后在标记中定义，则浏览器似乎不希望元素的顶部出现在另一个元素的顶部之上。真的吗？

是的。上面的规则 5 和 6 涵盖了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:43:37.070

安装 masonry JS 并将列设置为 1px，然后将边距设置为 2px 或 3px 或每个元素之间所需的空间。祝你好运！

[http://masonry.desandro.com](http://masonry.desandro.com)

# sql-server - 估计全文索引大小

> ID：10388710
> 
> 赞同：6
> 
> 时间：2012-04-30T18:31:17.053
> 
> 标签：sql-server, sql-server-2008

有没有办法估计 SQL Server 2008 中全文索引的大小？显然，这取决于被索引的数据量。例如，如果我在全文索引中有一列（类型为 varchar(50)），并且我有 10,000 行，那么全文索引的大小是多少？

我想知道的原因是，由于共享网络主机上的数据库大小有限，我想确保全文索引不会占用我所有的空间。

我花了很多时间寻找答案，但还没有找到，所以我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:35:03.130

创建一个索引，看看它相对于基础数据有多大。

如果您真的想避免只创建索引，请将数据的子集放入测试表并在其上创建索引：

```
select top 10 percent *
into dbo.testtable
from T
order by newid() 
```

这个查询很昂贵。

# java - 如何使用 SNMP4j 开发用于搜索 OID 值的类

> ID：10388713
> 
> 赞同：3
> 
> 时间：2012-04-30T18:31:43.133
> 
> 标签：java, snmp4j

我正准备开发一个应用程序来监控网络流量，特别是 SNMP 协议。在我的研究中，我发现了 Java API SNMP4j，但我对如何开始感到困惑。有没有人有教程可以帮助我，特别是搜索 OID 值？

# html - 如何在 Dreamweaver 中禁用 shift+enter

> ID：10388718
> 
> 赞同：4
> 
> 时间：2012-04-30T18:31:53.790
> 
> 标签：html, keyboard-shortcuts, dreamweaver, line-breaks

所以我很好奇如何在 Dreamweaver 中禁用“code-view”“shift+enter”“line break”快捷方式。我在互联网上只能找到“你为什么要这样做？” - 所以我可以提前告诉你这对我没有任何帮助。

然而，要回答这个问题，因为我知道每个人脑海中的第一件事就是“他为什么要这样做”是一个简单的问题；所以我可以用括号+换行+开括号。如果您按照击键进行操作，您会注意到，如果我在整个过程中按住 shift （这是第一个和最后一个所必需的） - 我最终会得到
' 到处都是。这变得相当烦人，互联网上的每个人都有无用的反应。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T18:56:00.057

正如@Carson Myers 在我的问题后面的评论中指出的那样：

要在 Dreamweaver 中删除插入 HTML 换行符的 Shift+Enter 键盘快捷键，请执行以下步骤：

在 Dreamweaver 中；
编辑 > 键盘快捷键...

从编辑屏幕；
单击“复制集”按钮，并根据您进行更改的原因为您的新集命名，我选择了“Dreamweaver PHP Development”，因为在这种环境中我遇到了进行此更改的必要性。

在新生成的键盘快捷键集中，在以下子“文件夹”中找到换行符的快捷方式：
插入 > HTML > 特殊字符 > 换行符

找到此“键”后，从其快捷方式列表中删除“Shift+Enter”快捷方式，如果您觉得有必要，再添加一个。

在使用 Shift+Enter 时，执行这些步骤将删除 HTML 换行符的自动插入。在我的场景中，这允许我输入以下序列；'()\n{\n}' 无需松开 shift 按钮。

感谢@Carson Myers 提供的信息。

# certificate - 使用 SAML 2.0 的自签名证书

> ID：10388719
> 
> 赞同：6
> 
> 时间：2012-04-30T18:31:54.287
> 
> 标签：certificate, self-signed, saml-2.0

是否可以使用自签名证书签署 SAML 2.0 帖子？我负责与使用 SAML 2.0 的供应商实施新的 SSO 程序，我们试图确定是否可以使用自签名证书签署 SAML 帖子，或者是否需要购买。

如果我们可以使用自签名证书，服务提供者是否需要做任何额外的步骤来验证签名？我们正在创建作为身份提供者的 SAML 2.0 帖子。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T03:05:55.197

是的，我假设您的意思是对通过 POST 绑定返回的断言进行签名（请参阅[SAML 2.0 Profiles](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf)，第 4.1.4.5 节）。SAML 2.0 规范要求为 SSO 签名，但没有涉及 CA 签名与自签名的细节。

检查您的软件（IdP 和 SP 端）以查看支持的内容 - 有些在这方面存在限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:35:26.070

SAML 规范实际上建议您使用长期自签名证书。有关更多信息，请参阅[此文档](https://spaces.internet2.edu/display/InCCollaborate/X.509+Certificates+in+Metadata)

# java - 如何让 Spring 为类上的同一个验证器显示不同的基于验证包的消息？

> ID：10388723
> 
> 赞同：8
> 
> 时间：2012-04-30T18:32:22.197
> 
> 标签：java, spring-mvc, bean-validation, hibernate-validator

首先，让我解释一下我使用的是 Spring MVC 3.1.1 和 Hibernate 验证 4.2.0。我在我的 Spring 应用程序中对各种表单使用验证注释。由于我的应用程序需要本地化，我一直在为我的验证消息使用资源包，看起来有点像这样：

```
# ValidationMessages.bundle
FieldMatch=Password and confirmation must match. 
```

此消息的相应类定义如下所示：

```
@FieldMatch.List({
    @FieldMatch(first = "password", second = "passwordConfirmation")
})
public class RegistrationForm {
    // ...
} 
```

我在 appContext.xml 中设置了这个自定义资源包，并且我的消息在表单上显示，没有任何问题。

然而，这是我的困境。有一个新要求，我必须确认更多字段匹配。现在我只是确认两个密码字段匹配。现在我的要求是我也必须确认电子邮件地址。我知道这是一个愚蠢的要求，但我无法改变它。所以现在类定义将如下所示：

```
@FieldMatch.List({
    @FieldMatch(first = "password", second = "passwordConfirmation")
    @FieldMatch(first = "email", second = "emailConfirmation")
})
public class RegistrationForm {
    // ...
} 
```

显然，我当前的资源包将不起作用，因为我需要两条单独的消息（每个匹配一条消息）。我尝试`message="{emails.must.match}"`在资源包中使用然后定义该消息，但它从未真正显示该消息，它只是显示实际的 text `{email.must.match}`。

因此，在所有这些解释之后，我的问题很简单：如何使`FieldMatch`类级别的每个验证器都具有在资源包中定义的不同消息，以便可以本地化？

提前感谢您的帮助！

[编辑] 对于那些好奇的人，[这](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303#2155576)是`FieldMatch`我正在使用的验证器。

**更新 5/23/2012** 这是其他人要求的 bean 定义：

```
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>ErrorBundle</value>
            <value>ForgotPasswordBundle</value>
            <!-- etc etc -->
        </list>
    </property>
</bean>

<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationMessageSource" ref="messageSource"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:06:19.493

FieldMatch 使用的是 JSR-303 验证器 ( `javax.validation.Validator`)，而不是 Spring 验证器 ( `org.springframework.validation.Validator`)。您是否将消息源配置为：

```
<!-- JSR-303 -->
<bean id="validator"
    class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationMessageSource" ref="messageSource"/>
</bean> 
```

当然还有相应的`messageSource`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:51:13.487

像这样的情况通常会打开 OP 未包含在问题中的内容。我想这是因为如果解决方案很简单，或者是由 OP 认为的原因引起的，他们就不会有问题。没有判断；我已经做到了。

因此，我提出了故障排除步骤而不是完整的解决方案，因为根据您所说的，它应该可以工作。

首先，让我们仔细检查一下这不是一个奇怪的插值问题，然后尝试`message="{emails-must-match}"`.

如果这不起作用，那么您似乎曾经让 ValidationMessages.properties 工作。我会回到那个（`<property name="validationMessageSource" ref="messageSource"/>`从验证器配置中删除），看看你是否可以开始`message="{emails.must.match}"`使用`emails.must.match`ValidationMessages.properties 中定义的内容。如果这仍然不起作用，请返回到您使用该密钥的默认消息，`FieldMatch`并查看您是否在两种错误情况下都收到该消息。

这将有助于解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T21:26:57.187

资源包中消息的关键是什么？`message`它应该是“emails.must.match”（即，没有约束属性所需的花括号）。

# objective-c - 带有 persistentStoreCoordinator 的随机 EXC_BAD_ACCESS

> ID：10388724
> 
> 赞同：7
> 
> 时间：2012-04-30T18:32:26.580
> 
> 标签：objective-c, ios, core-data, exc-bad-access

我的应用程序有时会在以下行完全加载之前崩溃：

```
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) 
```

这个 if 状态所在的完整方法如下所示（我认为这是非常标准的）：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"CoreData.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
} 
```

**更新**

崩溃发生在第二次`-(NSPersistentStoreCoordinator *)persistentStoreCoordinator`调用该方法时。**编辑** 从第一个可见的 viewController 调用它的第一次时间：

```
- (void)updateStats {
    NSLog(@"Updating stats");
    dispatch_queue_t request_queue = dispatch_queue_create("updateNumberOfSchedules", NULL);
    dispatch_async(request_queue, ^{
         AppDelegate *theDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
    [context setPersistentStoreCoordinator:[theDelegate persistentStoreCoordinator]];
    ...
    });
} 
```

第二次（当我的 DeviceLinker 类将在我的 checkInactiveLinks 方法中检查数据库中的非活动链接时，有时会发生崩溃。此方法在启动时调用`applicationDidBecomeActive`：

```
-(void) checkInactiveLinks {
    AppDelegate *theDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *newMoc = [[NSManagedObjectContext alloc] init];
    [newMoc setPersistentStoreCoordinator:[theDelegate persistentStoreCoordinator]];
    ...
} 
```

如果我错了，请纠正我，但阅读我的代码我会认为第二次调用 persistentStoreCoordinator getter 时它应该返回 __persistentStoreCoordinator 而不是分配和初始化一个新的......

**更新 2** 在 if 语句的同一行，我也时不时得到这个：

```
-[__NSCFDictionary _hasPrecomputedKeyOrder]: unrecognized selector sent to instance 0x7dd3770 
```

**更新 3**

我编辑了我的构建方案并在诊断选项卡下打开了僵尸和日志异常。现在我明白了`-[NSPersistentStoreCoordinator unlock]: message sent to deallocated instance 0x8916090`。请注意，我的代码中没有任何显式锁定。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T19:39:41.037

看起来您正在同时从多个线程进入那段代码。当您进行延迟实例化时，您必须确保仅通过一个执行线程的“第一次”将同时通过。您可以使用以下策略在主线程上同步访问它。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    // Add this block of code.  Basically, it forces all threads that reach this
    // code to be processed in an ordered manner on the main thread.  The first
    // one will initialize the data, and the rest will just return with that
    // data.  However, it ensures the creation is not attempted multiple times.
    if (![NSThread currentThread].isMainThread) {
        dispatch_sync(dispatch_get_main_queue(), ^{
            (void)[self persistentStoreCoordinator];
        });
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"CoreData.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:30:48.427

> 我正在使用 GCD 来使用线程。

和：

> 我的应用程序有时会在以下行完全加载之前崩溃：

听起来像是并发相关错误的典型症状；断断续续，似乎在错误的位置。

CoreData 有非常[具体的并发要求](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)。你会见他们吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-16T21:48:43.020

我更喜欢自旋锁，它比在主线程中递归调用 getter 方法更清晰。这是我的解决方案：

```
#import <libkern/OSAtomic.h>

@implementation MyClass {
    OSSpinLock _lock;
}

- (instancetype)init {
    self = [super init];
    if (self){
        _lock = OS_SPINLOCK_INIT;
    }
}

 - (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    // Lock the current thread
    OSSpinLockLock(&_lock);

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"CoreData.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    } 

    // Unlock
    OSSpinLockUnlock(&_lock);

    return __persistentStoreCoordinator;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T19:38:20.043

我认为当你添加一个新的持久存储时，你应该首先锁定持久存储协调器，这样它就不会干扰其他持久存储。

在下面的代码中`psc`是对新创建的持久存储协调器的单独引用。如果我正确理解您的目的，则可能应该`dispatch_async`编辑该方法的这一部分。

```
[psc lock];
if (![__persistentStoreCoordinator 
   addPersistentStoreWithType:NSSQLiteStoreType 
                configuration:nil 
                          URL:storeURL 
                       options:nil error:&error]) {
   // deal with the error
}
[psc unlock]; 
```

# c# - ReSharper：查找 Page.aspx 的用法

> ID：10388725
> 
> 赞同：0
> 
> 时间：2012-04-30T18:32:30.357
> 
> 标签：c#, asp.net, resharper

通常我们在创建表单或导航菜单时使用 URL（例如 login.aspx）引用页面......当 Re-sharper 尝试查找类的用法（例如 login）时，它找不到位置我把那个 URL 放在哪里（例如 unregister.aspx 或 index.aspx）。我想知道我们是否可以以某种方式明确引用它。我不知道我们是否不能通过 ReSharper 评论（类似这样）来做到这一点，以及它是否值得推荐：

```
// ReSharper THIS IS A USAGE OF "Login Class"
<a href="~/Login.aspx" ... 
```

我能想到的唯一选择是在页面中创建一个静态公共属性（例如 PageUrl）来存储页面名称。喜欢：

```
public static string PageUrl = "Login.aspx"; 
```

用法如下：

```
<a href="~/<%=Login.PageUrl %>" ... 
```

那可行！但还是有点乱。

*   原因：

我正在一个需要维护的大型旧项目中工作，当您更改页面时，您可能必须更改使用它的页面，因为您可能也想维护相关页面。

2012 年 8 月 8 日更新

*   结论：

根据评论，尤其是来自 Peter Ritchie 的评论，由于工具没有实现这样的功能，由于许多原因（耦合、复杂性、时间等），不推荐使用它，所以这是毫无价值的。也许 Resharper 或 Visual Studio 的未来版本可以包含此功能。

最好的选择：它是创建一个站点地图（为开发人员）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:47:16.120

这个开源项目可能是一个很好的起点。它旨在过滤掉未使用的图像，但它应该很容易更改，因此它会查找未使用的文件。

[在 VS Web 项目中查找未使用的图像](https://bitbucket.org/jitbit/vsunusedimg/src/1079313d671d/VSUnusedImg)

# mysql - 关联表SQL语句

> ID：10388727
> 
> 赞同：1
> 
> 时间：2012-04-30T18:32:35.207
> 
> 标签：mysql

我有 3 张桌子

```
Racer( racerID, racerName)
Race (raceID, raceName)
RaceJoinRacer(raceID, racersID) 
```

我无法弄清楚将检索哪个“赛车手”参加了哪个“比赛”的 sql 语句。

这是我到目前为止所拥有的：

```
SELECT racerName, raceName 
FROM Racer, Race 
JOIN RaceJoinRacer 
    ON RaceJoinRacer.raceID= Race.raceID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:35:23.020

您正在混合隐式和显式连接语法。不要在`FROM`子句中使用逗号。相反，使用两个`JOIN`语句，这`INNER JOIN`在 MySQL 中是隐含的。

```
SELECT
  racerName, 
  raceName 
FROM
  Race 
  JOIN RaceJoinRacer ON RaceJoinRacer.raceID = Race.raceID
  JOIN Racer ON RaceJoinRacer.racersID = Racer.racerID 
```

如果您想包括`Racer`未参加任何比赛的表中的赛车手，请使用`LEFT JOIN`between`Racer`和`RaceJoinRacer`代替：

```
SELECT
  racerName, 
  raceName 
FROM
  Racer
  LEFT JOIN Racer ON RaceJoinRacer.racersID = Racer.racerID
  JOIN RaceJoinRacer ON RaceJoinRacer.raceID = Race.raceID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:35:42.337

```
SELECT 
   racerName, 
   Race.raceName 
FROM Racer 
   JOIN RaceJoinRacer ON Racer.racerID = RaceJoinRacer.racersID 
   JOIN Race ON Race.RaceID = RaceJoinRacer.RaceID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:35:59.933

```
SELECT r.racerName, c.raceName 
FROM Racer r
inner join RaceJoinRacer rj ON r.racerID = rj.racerID 
inner join race on c on rj.raceid = c.raceid 
```

# email - HTML 电子邮件在 Yahoo 中显示为空白

> ID：10388730
> 
> 赞同：5
> 
> 时间：2012-04-30T18:33:01.013
> 
> 标签：email

我试图为一些基本的电子邮件营销安装一个好的通讯脚本。问题是我的雅虎只是不想显示 HTML 电子邮件。我通过几个脚本和我的雅虎帐户向自己发送了一些 html 测试电子邮件，但都显示为空白。

这很奇怪，因为我的 magento 的 html 电子邮件被正确接收，但其他 [甚至 YAHOO 电子邮件！] 不是。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T15:33:27.250

我自己也遇到了这个问题。这是我发现的：较旧的[文章](https://www.campaignmonitor.com/blog/post/3317/correct-doctype-to-use-in-html-email/)，但仍然有用：他们推荐：

```
<!DOCTYPE html PUBLIC -//W3C//DTD XHTML 1.0 Transitional//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'> 
```

这似乎适用于除雅虎之外的所有人。相反，对 Yahoo 使用以下内容：

```
<!doctype html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-09T15:31:14.353

*   将每个速度模板设置中的内容类型和编码更改为 HTML / UTF-8
*   使用标准 charset="UTF-8" 声明向每封电子邮件添加一个。也许雅虎不像大多数其他电子邮件客户端那样剥离头部。
*   在电子邮件顶部添加了 HTML 4.01 严格声明：

    > <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "[http://www.w3.org/TR/html4/strict.dtd](http://www.w3.org/TR/html4/strict.dtd) ">

# java - 在java中一起使用BufferedWriter和DataOutputStream

> ID：10388734
> 
> 赞同：0
> 
> 时间：2012-04-30T18:33:43.037
> 
> 标签：java, android

我怎样才能简单地将 big-endian 类型的数据写入 OutputStream 并仍然使用缓冲？（如果有什么不同，我正在为 android 开发）

我试过

```
out = new BufferedWriter(new DataOutputStream(new OutputStreamWriter(sock.getOutputStream()))); 
```

但看起来我运气不好，因为这无法完成。我是 Java 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:42:46.260

书写器用于书写字符（文本）。流用于写入字节（二进制）。

您可以使用 Writer 包装 Stream，但不能反过来。

如果您需要二进制数据和缓冲，请使用 BufferedOutputStream。

# ios - iOS CoreData - 使用现有索引预填充数据库

> ID：10388736
> 
> 赞同：1
> 
> 时间：2012-04-30T18:33:53.353
> 
> 标签：ios, core-data, indexing

我正在构建一个项目，我需要使用现有数据预填充 coredata 数据库。

我构建了一个解析器来在 iOS 模拟器中创建 sqlite 文件，一切正常。我正在使用单个实体，并且其中一个属性已编入索引。将我的数据文件解析为核心数据后的性能非常好，一切都很好。

现在我在具有相同数据模型、相同索引等的项目中使用生成的 sqlite 文件（~200Mb）......并且在第一次启动时，我复制了 db 文件以预填充数据

```
 NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"myproject" ofType:@"sqlite"];
    NSString *storePath = [[[self applicationDocumentsDirectory] path] stringByAppendingPathComponent: @"myproject.sqlite"];

    NSError *error;
    if (![[NSFileManager defaultManager] fileExistsAtPath:storePath]) 
    {
        if ([[NSFileManager defaultManager] copyItemAtPath:defaultStorePath toPath:storePath error:&error])
            NSLog(@"Copied starting data to %@", storePath);
        else 
            NSLog(@"Error copying default DB to %@ (%@)", storePath, error);
    } 
```

复制工作正常，可以正常访问数据。但是性能很糟糕，并且索引显然没有被使用。
看看复制操作后 sqlite 文件的大小，它从 200Mb 变成了 120Mb。
模型中的一切看起来都很好，需要索引的内容被检查为已索引。

1）有没有办法在复制sqlite时不删除索引数据？
2）是否可以以编程方式重建索引？
3）还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:12:47.007

查看[有关此问题的 Apple 文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles/cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW2)：

> 尽管 Core Data 支持 SQLite 作为其持久存储类型之一，但数据库格式是私有的。您不能使用原生 SQLite API 创建 SQLite 数据库并将其直接与 Core Data 一起使用（也不应该使用原生 SQLite API 操作现有的 Core Data SQLite 存储）。如果您有现有的 SQLite 数据库，则需要将其导入核心数据存储（请参阅“<a href="http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles /cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1" rel="nofollow">高效导入数据")。

总而言之，**不**要这样做。数据库架构是私有的，可能会更改。

当应用程序第一次启动时，我使用 CSV 文件在后台将所有初始数据预加载到 CoreData。顺便提一下，当心多线程 CoreData 访问。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:34:43.247

看起来问题在于该项目在两次测试之间没有得到很好的清理，这可能是我当时使用的 Xcode 4.3 中的一个错误。

同样的方法现在运行良好。

# android - Google Play 结算包在哪里？

> ID：10388739
> 
> 赞同：7
> 
> 时间：2012-04-30T18:34:01.720
> 
> 标签：android, in-app-billing, google-play

按照[计费集成](http://developer.android.com/guide/market/billing/billing_integrate.html)教程，我现在应该从 SDK 管理器安装 Google Play 计费包（参见图 1）。但是，在我的 SDK 管理器中，我没有在 Extras 下或其他任何地方列出这个包。

我在哪里可以获得此计费示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:43:14.970

我今天早上也遇到了这个问题，但我终于解决了。

要解决这个问题，请将您的 ADT 插件更新到最新版本，然后您应该可以看到这些包。

更新 ADT 插件后，您可能还需要将已安装的工具更新到最新版本，以确保您现有的项目可以正常运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:26:46.550

通过 SDK Manager，我更新了 Android SDK Tools 和 Android SDK Platform Tools，重新运行了 SDK Manager，然后计费包按预期出现在 Extras 下。 ![在此处输入图像描述](../Images/e2ee151d32409e9e0b346f3fe09564f9.png)

# ruby-on-rails - rails：如何仅在测试中禁用protect_from_forgery？

> ID：10388742
> 
> 赞同：2
> 
> 时间：2012-04-30T18:34:15.867
> 
> 标签：ruby-on-rails, xss, integration-testing, capybara

我正在对我的 rails 应用程序进行集成测试，并且我想通过被忽略或显示错误消息来测试具有无效数据（即角色 =>'admin'）的自定义 POST 是否被正确处理。

麻烦的是，authentity_token 设置起来很麻烦。

有没有一种简单的方法可以在进行测试时停用protect_from_forgery - 或至少进行一次测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:38:53.143

在您的应用程序控制器中

```
protect_from_forgery unless Rails.env.test? 
```

# sencha-touch-2 - Sencha Touch 2如何选择多组元素？

> ID：10388743
> 
> 赞同：3
> 
> 时间：2012-04-30T18:34:16.280
> 
> 标签：sencha-touch-2

我在 Sencha Touch 2 中选择了一个名为“detelleItemDescription”的元素，如下所示：

```
this.getDetalleItem().down('#detalleItemDescription').setData(record.data); 
```

如何选择多个？

```
this.getDetalleItem().down('#detalleItemDescription','#second','#third').setData(record.data); 
```

那可能吗？怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:39:18.510

您可以使用`Ext.ComponentQuery.query`它接受逗号分隔的列表，并将返回您可以枚举的复合集合。

或者您可以直接在您的对象上使用查询方法。

```
this.getDetalleItem().query('#detalleItemDescription','#second','#third').each(function(item) { item.setData(record.data) }) ; 
```

# html - 检测图像方向（横向、纵向）以正确打印 XHTML 报告

> ID：10388744
> 
> 赞同：0
> 
> 时间：2012-04-30T18:34:18.480
> 
> 标签：html, css, image, xslt, orientation

我正在编写一个将 XML 转换为 XHTML 报告的 XSL 文件。此 XML 包含的图像 ID 是纸质扫描件（美国信函），可以是各种尺寸，也可以是横向或纵向。我正在寻找一种将它们最大化打印到一页纸（带有自定义标题）的方法。所以我可以旋转图像以使其适合纵向页面，或者告诉打印机在横向模式下考虑该页面。看起来像：

```
<img id="portrait" src="http://1.2.3.4/img/getImage.cgi?ID=1" />
<img id="landscape" src="http://1.2.3.4/img/getImage.cgi?ID=2" /> 
```

或者

```
<img src="http://1.2.3.4/img/getImage.cgi?ID=1" />
<div id="landscape">
    <img src="http://1.2.3.4/img/getImage.cgi?ID=2" />
</div> 
```

我考虑了什么，为什么它不起作用：

*   我知道 XSL 不能这样做，因为它只链接图像而不加载它们，因此它不知道它们的属性。
*   HTML 也无法做到这一点，因为它是由 XSLT 转换呈现的，并且代码无法自行更新；）
*   我也不认为这是 CSS 的目的。尽管我愿意尝试但尚未找到明确的方法，但 JavaScript 可能无法很好地与 Flying Saucer（PDF 生成）一起使用。
*   我无权访问在数据库中检索图像的 CGI 脚本。所以我不能修改它们。

我没有考虑过： - 反过来评估问题，使用另一个工具（例如 perl 脚本）来读取 XML 文件并生成正确的 HTML 报告。然而，如果可能的话，这将是一种不同的技术，我想避免。

您对此有何看法，你们中的一些人对此是否有经验以及如何解决此问题的任何提示或建议？

一如既往，非常感谢您抽出宝贵的时间。

此致，

曼尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:59:18.800

如果您能够按照您在评论中所说的那样通过服务器端脚本制作某种形式，我会考虑做一些事情

1.  创建一个附加脚本（即 /img/GetInfoData.cgi?ID=2 ，它返回类似于以下内容的 XML：`<ImageInfo height="23" width="100" orientation="landscape" alt="Alt Text" src="/img/GetImage.cgi?ID=2"/>`

2.  然后在你的 XSLT 中你可以使用`<xsl:variable name="ImageInfo" select="document("/img/GetImageData.cgi?ID=2")/>`

3.  然后，您可以使用`<xsl:if test="$ImageInfo/ImageInfo/@orientation='landscape'>`

希望有帮助。我确信这不是最快的解决方案，但它可以防止你不得不使用太多额外的技术。

# c# - WebChannelFactory 和标头？

> ID：10388746
> 
> 赞同：7
> 
> 时间：2012-04-30T18:34:30.060
> 
> 标签：c#, wcf, webclient, webchannelfactory

是否可以在 上设置标题`WebChannelFactory`？如果我使用一个`WebClient`对象，我可以这样做：

```
WebClient client = new WebClient();
client.Headers.Add("referer", "http://stackoverflow.com");
client.Headers.Add("user-agent", "Mozilla/5.0"); 
```

但是我还没有找到一种方法来修改`WebChannelFactory`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T19:26:37.380

该类`WebChannelFactory`本身不采用任何 HTTP 标头，但您可以将它们添加到当前`WebOperationContext`，因为您创建了一个新的范围以使其工作 - 见下文。

```
WebChannelFactory<ICalculator> factory = new WebChannelFactory<ICalculator>(new Uri(baseAddress));
ICalculator proxy = factory.CreateChannel();
using (new OperationContextScope((IContextChannel)proxy))
{
    WebOperationContext.Current.OutgoingRequest.Headers.Add("referer", "http://stackoverflow.com");
    WebOperationContext.Current.OutgoingRequest.Headers.Add("user-agent", "Mozilla/5.0");
    Console.WriteLine("Add: {0}", proxy.Add(33, 55));
    Console.WriteLine();
}

using (new OperationContextScope((IContextChannel)proxy))
{
    WebOperationContext.Current.OutgoingRequest.Headers.Add("referer", "http://stackoverflow.com");
    WebOperationContext.Current.OutgoingRequest.Headers.Add("user-agent", "Mozilla/5.0");
    Console.WriteLine("Subtract: {0}", proxy.Subtract(44, 33));
    Console.WriteLine();
} 
```

这可行，但它相当冗长 - 如果您想向其中添加传出标头，您基本上需要为每个调用创建一个新范围。

另一种选择是将客户端包装在客户端类中，以便为您添加范围和标头。使用派生自的类`ClientBase<T>`是一种简单的方法。下面的代码是这个问题的完整示例，具有两个选项（直接使用范围，使用客户端基派生类）用于在来自`WebChannelFactory`.

```
public class StackOverflow_10388746
{
    [ServiceContract]
    public interface ICalculator
    {
        [WebGet]
        int Add(int x, int y);
        [WebInvoke(BodyStyle = WebMessageBodyStyle.WrappedRequest)]
        int Subtract(int x, int y);
    }
    public class Service : ICalculator
    {
        public int Add(int x, int y)
        {
            PrintHeaders("Add");
            return x + y;
        }
        public int Subtract(int x, int y)
        {
            PrintHeaders("Subtract");
            return x - y;
        }
        void PrintHeaders(string operation)
        {
            Console.WriteLine("Incoming HTTP headers for operation '{0}'", operation);
            foreach (var header in WebOperationContext.Current.IncomingRequest.Headers.AllKeys)
            {
                Console.WriteLine("  {0}: {1}", header, WebOperationContext.Current.IncomingRequest.Headers[header]);
            }
        }
    }
    public class MyWebClient : ClientBase<ICalculator>, ICalculator
    {
        Dictionary<string, string> outgoingHeaders = new Dictionary<string, string>();

        public MyWebClient(Uri baseAddress)
            : base(new WebHttpBinding(), new EndpointAddress(baseAddress))
        {
            this.Endpoint.Behaviors.Add(new WebHttpBehavior());
        }

        #region ICalculator Members

        public int Add(int x, int y)
        {
            using (new OperationContextScope(this.InnerChannel))
            {
                foreach (var headerName in this.outgoingHeaders.Keys)
                {
                    WebOperationContext.Current.OutgoingRequest.Headers.Add(headerName, this.outgoingHeaders[headerName]);
                }

                this.outgoingHeaders.Clear();
                return this.Channel.Add(x, y);
            }
        }

        public int Subtract(int x, int y)
        {
            using (new OperationContextScope(this.InnerChannel))
            {
                foreach (var headerName in this.outgoingHeaders.Keys)
                {
                    WebOperationContext.Current.OutgoingRequest.Headers.Add(headerName, this.outgoingHeaders[headerName]);
                }

                this.outgoingHeaders.Clear();
                return this.Channel.Subtract(x, y);
            }
        }

        #endregion

        public void AddOutgoingHeader(string name, string value)
        {
            this.outgoingHeaders.Add(name, value);
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebChannelFactory<ICalculator> factory = new WebChannelFactory<ICalculator>(new Uri(baseAddress));
        ICalculator proxy = factory.CreateChannel();
        using (new OperationContextScope((IContextChannel)proxy))
        {
            WebOperationContext.Current.OutgoingRequest.Headers.Add("referer", "http://stackoverflow.com");
            WebOperationContext.Current.OutgoingRequest.Headers.Add("user-agent", "Mozilla/5.0");
            Console.WriteLine("Add: {0}", proxy.Add(33, 55));
            Console.WriteLine();
        }

        using (new OperationContextScope((IContextChannel)proxy))
        {
            WebOperationContext.Current.OutgoingRequest.Headers.Add("referer", "http://stackoverflow.com");
            WebOperationContext.Current.OutgoingRequest.Headers.Add("user-agent", "Mozilla/5.0");
            Console.WriteLine("Subtract: {0}", proxy.Subtract(44, 33));
            Console.WriteLine();
        }

        MyWebClient client = new MyWebClient(new Uri(baseAddress));
        client.AddOutgoingHeader("referer", "http://stackoverflow.com");
        client.AddOutgoingHeader("user-agent", "Mozilla/5.0");
        Console.WriteLine("Add (via client): {0}", client.Add(44, 77));
        Console.WriteLine();

        client.AddOutgoingHeader("referer", "http://stackoverflow.com/another");
        client.AddOutgoingHeader("user-agent", "Mozilla/5.0-b");
        Console.WriteLine("Add (via client): {0}", client.Subtract(44, 77));
        Console.WriteLine();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# operating-system - 轮询与中断

> ID：10388757
> 
> 赞同：7
> 
> 时间：2012-04-30T18:34:50.917
> 
> 标签：operating-system, interrupt, polling

我对中断有一个基本的疑问。想象一台没有任何中断的计算机，因此为了执行 I/O，CPU 必须定期轮询*键盘以获取按键、鼠标以进行点击等。现在，如果它有中断，CPU 将定期检查中断线是否变高（或变低）。那么如何通过使用中断来节省 CPU 周期。根据我的理解，现在我们正在检查中断线，而不是检查设备。有人可以解释我弄错了什么基本逻辑。

*这里通过轮询我并不是说 CPU 处于忙碌等待状态。引用维基百科“轮询也指反复检查设备是否准备就绪，如果不是，则计算机返回不同任务的情况”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-21T15:44:58.323

@David Schwartz 和 @RKT 是对的，检查中断线不需要任何 CPU 周期。

基本上，处理器有一组连接到一堆设备的中断线。当其中一个设备有话要说时，它会打开其中断线，这会触发处理器（*无需任何软件的帮助*）暂停当前指令的执行并开始运行处理程序函数。

这是它的工作原理。当操作系统启动时，它使用一个特殊指令向处理器注册一组回调（实际上是一个函数指针表），该指令获取表中第一个条目的地址。当中断`N`被触发时，处理器拉`N`表中的第一个条目，并在它所指的内存位置运行代码。函数内部的代码是由 OS 作者以汇编形式编写的，但通常它所做的只是保存堆栈和寄存器的状态，以便在调用中断处理程序后可以恢复当前任务，然后调用更高级别的用 C 编写的通用中断处理程序，它处理“如果这是一个页面错误，执行 X”，“如果这是一个键盘中断，执行 Y”，“如果这是一个系统调用，执行 Z”等逻辑. 当然，不同的架构和语言会有不同的变化，但它的主旨是一样的。

软件中断（“信号”，在 Unix 用语中）的想法是相同的，只是操作系统会为信号处理程序运行设置堆栈。基本过程是用户态进程通过系统调用一次向操作系统注册一个信号处理程序，该系统调用将处理程序函数的地址作为参数，然后在将来的某个时间操作系统认识到它应该向该进程发送一个信号。下次运行该进程时，操作系统会将其指令指针设置为处理函数的开头，并将其所有寄存器保存到进程可以恢复它们的位置，然后再恢复执行该进程。通常，处理程序将具有某种路由逻辑来提醒相关代码位它收到了信号。当进程完成执行信号处理程序时，它恢复信号处理程序运行之前存在的寄存器状态，并从中断处恢复执行。因此，软件中断也比轮询更有效地了解从内核到该进程的事件（但这并不是真正的通用机制，因为大多数信号都有特定用途）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:37:24.640

检查中断线不需要任何 CPU 周期。它是由专用硬件完成的，而不是 CPU 指令。之所以称为中断，是因为如果中断线被断言，CPU 就会被中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T20:01:38.430

“CPU被中断”：它会离开（暂停）正常的程序执行，然后执行ISR（中断子程序）并再次回到暂停程序的执行。

CPU通过IRQ（中断请求）和IF（中断标志）来了解中断

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-18T18:59:07.053

中断：计算机中的设备为引起 CPU 的注意而产生的事件。提供以提高处理器利用率。为了处理中断，有一个与之关联的中断服务程序 (ISR)。要中断处理器，设备会在其 IRQ 线上发送一个信号并继续这样做，直到处理器确认中断。CPU 然后通过将程序状态字 (PSW) 和 PC 压入控制堆栈来执行上下文切换。CPU 执行 ISR。而池化是计算机等待外部设备检查其准备情况的过程。计算机除了检查设备的状态外不做任何事情 轮询通常用于低级硬件 示例：当打印机通过 Parrnell 端口连接时，计算机等待直到打印机接收到下一个字符。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-03T01:26:13.937

有两种不同的方法（轮询和中断）来服务计算机系统的 I/O。在轮询中，CPU 一直保持忙碌状态，或者将输入数据提供给 I/O 设备，如果是，则检查相应设备的源端口和该输入的优先级以服务它。

在中断驱动方法中，当向 I/O 设备提供数据时，会产生中断，CPU 检查该输入的优先级以提供服务。

# c# - 如何添加行中的每个元素而不覆盖最后一个元素

> ID：10388758
> 
> 赞同：1
> 
> 时间：2012-04-30T18:34:53.943
> 
> 标签：c#, tsql, xmlwriter

大家好，感谢您的帮助，我小时候需要将我的一个 t-sql 表列中的每一行写入一个 xml 文件。我当前的代码 OVER 在循环时写入最后一个条目。结果应该看起来像

```
(desired result)
<array> 
<element>data1</element>
<element>data2</element>
<element>data3</element>
<element>data4</element>
<element>data5</element>
</array> 
```

不是现在）

```
<array>
<element>data5</element> (the last entry in table column)
</array> 
```

我错过了什么？再次感谢您的时间非常感谢。

```
public void Download_Click(object sender, EventArgs e)
{

       string AddressVal;
       string invoiceVal;

       SqlConnection conn = null;
       SqlConnection connTwo = null;
       try
       {

           //**************************************
           string connStr2 = ConfigurationManager.ConnectionStrings["MYConString"].ConnectionString;
           string cmdStr2 = "select * from t_BannerUser";

           connTwo = new SqlConnection(connStr2);
           SqlCommand oleComm2 = new SqlCommand(cmdStr2, connTwo);
           connTwo.Open();
           SqlDataReader oleReader2 = oleComm2.ExecuteReader();
           //************************************** DATATABLE TEST *************
           //SqlDataAdapter da = new SqlDataAdapter(cmdStr2, connStr2);
           //DataTable dt = new DataTable();
           //da.Fill(dt);

           //for (int i = 0; i < dt.Rows.Count; i++)
           //{
           //****************************
           while (oleReader2.Read())
           {

             //  AddressVal = oleReader["c_user"].ToString();
               invoiceVal = oleReader2["c_user_id"].ToString();

        //create XMLTextWriter object and set its save location
        //…the second value is for an Encoding declaration I found to be unnecessary, hence, null
        XmlTextWriter plist = new XmlTextWriter("C:/Temp/plistName.plist", null);
        //assign basic formatting to the XMLTextWriter so that the XML is easily legible
        plist.Formatting = Formatting.Indented;
        //default indentation is 2 spaces; 4 spaces is essentially one “tab”
        plist.Indentation = 4;

        //create the initial xml element to start the document
        plist.WriteProcessingInstruction("xml", "version=\"1.0\" encoding=\"UTF-8\"");
//create a custom DTD
plist.WriteDocType("plist", "-//Apple//DTD PLIST 1.0//EN", "http://www.apple.com/DTDs/PropertyList-1.0.dtd", null);

        //create root element
plist.WriteStartElement("plist");
//assign version attribute
plist.WriteAttributeString("version", "1.0");
//creating a dict element before anything else is required
plist.WriteStartElement("dict");
//create the array key (shows up as the array name when viewing the .plist)
plist.WriteElementString("key", "ArrayName");
//you have to then create the array!
plist.WriteStartElement("array");

//create a dict element to arrange succeeding object attributes
plist.WriteStartElement("dict");
//create key element (shows as item name when viewing the plist)
plist.WriteElementString("key", "KeyName");
//create string element (shows as item value when viewing the plist)
//plist.WriteElementString("string", dt.Rows[i]["c_user_id"].ToString());
plist.WriteElementString("string", invoiceVal.ToString());
//create the array key (shows up as the array name when viewing the plist)
plist.WriteElementString("key", "ArrayName");
//you have to then create the array!
plist.WriteStartElement("array");

        //create a dict element to arrange succeeding object attributes
plist.WriteStartElement("dict");
//create key element (shows as item name when viewing the plist)
plist.WriteElementString("key", "KeyName");
//create string element (shows as item value when viewing the plist)
//plist.WriteElementString("string", DataTable.Rows[int]["ColumnName"].ToString());
plist.WriteElementString("string", invoiceVal.ToString());

plist.Flush();
plist.Close();

              // }
           }

       }

           catch (Exception ex)
       {
           Debug.WriteLine(ex.Message);
       }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:44:33.063

您的代码在 while 循环的每次迭代开始时创建文件（以及在 while 循环结束时关闭刷新它）。将该代码移到 while 循环之外，您将获得更好的结果。

# perl - 将 Perl 数组扩展为 shell 命令参数

> ID：10388759
> 
> 赞同：3
> 
> 时间：2012-04-30T18:34:57.080
> 
> 标签：perl

我想从 Perl 脚本调用 shell 命令。该命令的参数存在于 Perl 数组中。

最简单的方法是什么？

感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:42:33.333

您可能需要调用[`system`](http://perldoc.perl.org/functions/system.html)，并且将参数作为列表传递是最有效的，这样可以避免使用 shell 来解析命令行。像这样的电话

```
my $status = system 'command', @arguments; 
```

应该做你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:48:58.917

大多数功能通常接受两种形式来启动程序：

*   接受路径和参数列表
*   接受 shell 命令。

第一个更安全，并且需要更少的资源。

```
system($prog, @args);             # @args > 0
system({ $prog } $prog, @args);   # @args >= 0 
```

但是如果你必须使用 shell 或者你必须提供一个 shell 命令，那么[String::ShellQuote](http://search.cpan.org/perldoc?String%3a%3aShellQuote)（如果你在 unix 系统上）或[Win32::ShellQuote](http://search.cpan.org/perldoc?Win32%3a%3aShellQuote)（如果你在 Win32 系统上）可以帮助你。

```
use String::ShellQuote qw( shell_quote );
my $shell_cmd = shell_quote($prog, @args);
system($shell_cmd); 
```

# ios - 对象动画 - c4framework

> ID：10388765
> 
> 赞同：3
> 
> 时间：2012-04-30T18:35:14.907
> 
> 标签：ios, c4

我目前正在开发一个使用 alpha C4 框架构建的项目。

我正在尝试在应用程序启动后立即启动动画，而不必使用某种交互来让它运行（即 touchesBegan）......

但不幸的是我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:58:46.427

在 C4 中，这样做的方法是利用以下方法：

```
-(void)performSelector:withObject:afterDelay: 
```

而且，对于当前版本的 C4，最好的使用方法是：

```
#import "C4WorkSpace.h"

@interface C4WorkSpace ()
-(void)methodToRunImmediately;
@end

@implementation C4WorkSpace {
    C4Shape *circle;
}

-(void)setup {
    circle = [C4Shape ellipse:CGRectMake(100, 100, 100, 100)];
    [self.canvas addShape:circle];
    [self performSelector:@selector(methodToRunImmediately) withObject:nil afterDelay:0.1];
}

-(void)methodToRunImmediately {
    circle.animationDuration = 1.0f;
    circle.animationOptions = AUTOREVERSE | REPEAT;
    circle.center = CGPointMake(384, 512);
}
@end 
```

此代码将在延迟 1/10 秒后开始您的动画......这看起来会立即生效。

* * *

上面的答案是很久以前发布的，我们能够为此实现一个更简单的方法，不需要知道选择器是什么。现在可以使用以下代码运行上面的代码：

```
-(void)runMethod:afterDelay: 
```

这样，在 C4 中，原始行：

```
[self performSelector:@selector(methodToRunImmediately) 
           withObject:nil 
           afterDelay:0.1]; 
```

...可以重写为：

```
[self runMethod:@"methodToRunImmediately" afterDelay:0.1]; 
```

# syntax - 如何对VHDL中的整数进行按位与？

> ID：10388767
> 
> 赞同：3
> 
> 时间：2012-04-30T18:35:24.037
> 
> 标签：syntax, vhdl

我正在学习 VHDL，我在尝试编写一些代码来满足边界检查异常时遇到了问题。

这是我的基本总结代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use ieee.std_logic_arith.all;
use IEEE.NUMERIC_STD.ALL;
use ieee.std_logic_unsigned.all; 
...
port(
Address: in std_logic_vector(15 downto 0);
...
constant SIZE : integer := 4096;
variable addr: integer range 0 to SIZE-1 := 0;
...
process ... 
addr := conv_integer(Address) and (SIZE-1); --error here 
```

我得到的错误信息是

> src/memory.vhd:37:35: 没有操作符“and”的函数声明

基本上，我的目标是制作一个 16 位地址总线，参考内存只有 4096 字节。为什么我会收到这个奇怪的错误？我是否缺少库包含或其他内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:47:02.270

第一：不要使用`std_logic_arith` *and* `numeric_std`。而且[你不需要`std_logic_arith`](http://parallelpoints.com/node/3)

您不能对整数进行按位与运算，因此您需要执行以下操作：

```
addr := Address and to_unsigned(SIZE-1, Address'length); 
```

但是您可能需要保证 SIZE 是 2 的幂

我倾向于做的是*在位*中创建一个常量并从那里开始工作：

```
constant mem_bits : integer := 16;
constant SIZE     : integer := 2**16; 
```

然后

```
addr := Address(mem_bits-1 downto 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:51:09.930

我不认为`and`是为整数定义的，尽管可能有一个包含该功能的标准库。

为什么不保留你的地址`std_logic_vector`呢？在地址方面，您通常希望能够通过直接查看某些位来轻松解码，所以我认为这很有意义。

只需创建`addr`一个`std_logic_vector(11 downto 0)`, 并为其分配最低 12 位`address`- 这将忽略高 4 字节，并为您提供 4096 字节的空间（对于 8 位数据总线）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:22:02.710

并且对于整数没有意义。整数是一个范围内的数字，但它没有标准的实现方式，即它没有预先定义的二进制表示。

你可以使用类似下面的语法；

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.std_logic_arith.all;

entity testand is
    generic (nBITS:integer:=32);
    port (
        i:in integer;
        a:in std_logic_vector(nBITS-1 downto 0);
        o:out std_logic_vector(nBITS-1 downto 0));
end entity;

architecture beh of testand is

signal v:std_logic_vector(a'length-1 downto 0);

begin

    v<=std_logic_vector(conv_unsigned(i,o'length));

    o<=v and a;

end architecture; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-21T16:31:57.640

在您的特定情况下，您还可以使用“mod SIZE”而不是“and (SIZE-1)”。

# php - PHP：HTTP_X_REQUESTED_WITH 与 HTTP_X_REQUEST_WITH

> ID：10388770
> 
> 赞同：4
> 
> 时间：2012-04-30T18:35:31.637
> 
> 标签：php

> **可能重复：**
> [PHP：$_SERVER['HTTP_X_REQUESTED_WITH'] 是否存在？](https://stackoverflow.com/questions/2579254/php-does-serverhttp-x-requested-with-exist-or-not)

最近遇到了一个 ajax-detection 不起作用的问题。

这是一个 PHP 问题。

事实证明，它`$_SERVER['X_HTTP_REQUESTED_WITH']`没有包含任何东西，但`$_SERVER['X_HTTP_REQUEST_WITH']`确实包含（注意缺少的“ED”）。

我已经搜索过，但在我的搜索中我还没有发现任何关于这是否最近发生变化的结论（目前这个特定站点在 5.3.10 上），或者是否一直都是这样（这将使其他关于有关主题，因为它们似乎大多参考“ED”版本）。

仅供参考，这个网站在 apache 2.2.19 上，如果它也有什么不同的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:43:35.800

很可能这只是一个错字，客户端 ajax 代码错误地设置了 XmlHttpRequest 的标头。

# eclipse - 未找到请求的资源（servlet 名称） Tomcat Eclipse IDE

> ID：10388779
> 
> 赞同：1
> 
> 时间：2012-04-30T18:36:41.397
> 
> 标签：eclipse, servlets, tomcat6, eclipse-wtp

我正在尝试使用 WTP 插件从 Eclipse 在 Tomcat 上部署一个 servlet。Eclipse 工作正常，Tomcat 也启动了。当我打开[http://localhost:8080](http://localhost:8080)时，我得到了 Tomcat 的主页。我正在关注这个确切的教程[http://www.vogella.com/articles/EclipseWTP/article.html](http://www.vogella.com/articles/EclipseWTP/article.html)但是当我尝试通过右键单击 servlet 类并将其部署在 tomcat 上并在服务器上运行时出现以下错误。请求的资源 (/test/FileCounter) 不可用。我搜索但找不到任何可以帮助我的东西。我正在使用 Eclipse Java EE IDE 和 Tomcat 6。以下是我的 web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>test</display-name>
  <servlet>
    <description></description>
    <display-name>FileCounter</display-name>
    <servlet-name>FileCounter</servlet-name>
    <servlet-class>com.servlets.FileCounter</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>FileCounter</servlet-name>
    <url-pattern>/FileCounter</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T20:30:00.943

我遇到了同样的问题，刚刚解决了！

在 Project Explorer 中，展开 Deployment 描述符（就在 Java 资源上方）。然后在该部署描述符中展开“servlet”，它们应该是您创建的 Servlet。右键单击它并 Run as --> Run on server 。

但是在 Eclipse 中我不清楚 web.xml 没有正确定义但 servlet 在没有它的情况下运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T18:24:56.190

我刚遇到同样的问题。由于某种原因，当我通过 servlet 向导创建 servlet 时，eclipse 没有在 WebContent WEB-INF 文件夹中创建 web.xml 文件。我不知道为什么它没有创建它。

我将 web.xml 文件添加到 WebContent/WEB-INF 文件夹中，当我这样做时，我在部署描述符下有一个 servlet，我可以右键单击并运行为 -> 在服务器上运行

这是您需要的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>test</display-name>
  <servlet>
    <description></description>
    <display-name>FileCounter</display-name>
    <servlet-name>FileCounter</servlet-name>
    <servlet-class>your.servlet.path.filecounter.servlets.FileCounter</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>FileCounter</servlet-name>
    <url-pattern>/FileCounter</url-pattern>
  </servlet-mapping>
</web-app> 
```

当然，您需要将您的 servlet 类更新为您创建的包名称

# visual-studio-2010 - 在 Visual Studio 2010 IDE 中更改深蓝色背景

> ID：10388782
> 
> 赞同：5
> 
> 时间：2012-04-30T18:37:05.800
> 
> 标签：visual-studio-2010, ide, colors, background, themes

Visual Studio 2010 IDE 中的深蓝色背景让我抓狂。如何将背景更改为石板银色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:49:01.507

您可以在工具/选项中执行此操作，然后在环境/字体和颜色中执行此操作，并且有一个背景颜色设置。

或者更好的是，您可以从[http://studiostyl.es/](http://studiostyl.es/)上的预定义样式中进行选择，这些样式设置适用于 Visual Studio 2008 和 Visual Studio 2010 的所有版本，包括 express ： [http ://weblogs.asp.net/scottgu /archive/2010/04/29/download-and-share-visual-studio-color-schemes.aspx](http://weblogs.asp.net/scottgu/archive/2010/04/29/download-and-share-visual-studio-color-schemes.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T18:41:07.637

我用这个：

[http://visualstudiogallery.msdn.microsoft.com/20cd93a2-c435-4d00-a797-499f16402378?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/20cd93a2-c435-4d00-a797-499f16402378?SRC=VSIDE)

它将在工具栏中添加一个“主题”菜单，您可以在其中将配色方案更改为预设的配色方案，或定义您自己的配色方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-18T17:55:17.253

有一个名为[https://studiostyl.es](https://studiostyl.es)的网站，它包含一些不错的主题 ![现场图片](../Images/cfe73f911054bcc85cb843b7d5e3d1b6.png)

下载你喜欢的主题

然后转到工具>选项>环境>导入和导出设置

然后你会看到一个团队设置文件的文本框

最后，把你下载的设置文件的路径，然后按确定

![主题形象](../Images/a3d2afc80e835409c6822c135a036ec6.png)

# javascript - 如何从对话框中重新加载 jQuery 对话框？

> ID：10388786
> 
> 赞同：4
> 
> 时间：2012-04-30T18:37:15.673
> 
> 标签：javascript, jquery, jquery-ui, jquery-dialog

我在 jQuery 中加载页面`Dialog`。ajax 命令完成后，我希望能够在 jQuery 中重新加载同一页面`Dialog`。如何`Dialog`从加载的页面中重新加载 jQuery `Dialog`？

父页面（Blah.aspx）：

```
<script type="text/javascript">
    function view_dialog() {
        $('#dialog').load('blah2.aspx').dialog({
            title: 'test' ,
            modal: 'true',
            width: '80%',
            height: '740',
            position: 'center',
            show: 'scale',
            hide: 'scale',
            cache: false });
    }
</script>

<asp:Content
    ID="Content2"
    ContentPlaceHolderID="ContentPlaceHolder1"
    runat="server">

    <input id="Button1" onclick="view_dialog()" type="button" value="button" />
    <div id="dialog" style="display: none"></div>

</asp:Content> 
```

对话框内容页面（blah2.aspx）：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
<script type="text/javascript">
    $(document).ready(function() {
        function doit() {
            var request = $.ajax({
                url: "someurl",
                dataType: "JSON",
                data: {
                    a: 'somevalue'
                }
            });

            request.done(function () {
            //refresh the current dialog by calling blah2.aspx again
        });
    }       
</script>

<asp:Content
    ID="Content2"
    ContentPlaceHolderID="ContentPlaceHolder1"
    runat="server">

    <input id="Button1" onclick="doit()" type="button" value="button" />

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T20:35:45.180

您正在将另一个页面的内容加载到当前页面的对话框容器中，因此这里实际上只有一个页面在播放。我建议只从您的对话框源页面加载部分 html（无`<head>`或`<body>`标签）。

因此，您可以销毁对话框并重新创建它以重新加载对话框内容：

```
function reload_dialog()
{
    $('#dialog').dialog('destroy');
    view_dialog();
}

function view_dialog() {
    $('#dialog').load('blah2.aspx').dialog({
        title: 'test' ,
        modal: 'true',
        width: '80%',
        height: '740',
        position: 'center',
        show: 'scale',
        hide: 'scale',
        cache: false });
} 
```

或者，您可以重新加载整个页面。

```
window.location.reload(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T13:21:19.180

您可以像这样在 jQuery 中扩展 ui.dialog：

`$.ui.dialog.prototype.options.url; // Define a new option 'url'`

现在，您可以替换整个对话框“创建”，以便它自动加载 url 并定义新的“刷新”选项：

```
 // Replace the _create event
    var orig_create = $.ui.dialog.prototype._create;
    $.ui.dialog.prototype._create = function(){
        orig_create.apply(this,arguments);
        var self = this;
        if(this.options.url!=''){
            self.element.load(self.options.url); // auto load the url selected
        };
    };

    $.widget( "ui.dialog", $.ui.dialog, {
        refresh: function() {
            if(this.options.url!=''){
                this.element.load(this.options.url);
            }
        }
    }); 
```

您的最终功能将如下所示：

```
// Note the "url" option.
function view_dialog() {
    $('#dialog').dialog({
        url:'blah2.aspx',
        title: 'test' ,
        modal: 'true',
        width: '80%',
        height: '740',
        position: 'center',
        show: 'scale',
        hide: 'scale',
        cache: false });
}

// refresh:
$('#dialog').dialog("refresh"); 
```

您可以在这个小提琴中看到最终代码：http: [//jsfiddle.net/WLg53/1/](http://jsfiddle.net/WLg53/1/)

# log4net - 如何使用 log4net 生成名称为 yyyyMMdd.2.log 的文件

> ID：10388788
> 
> 赞同：4
> 
> 时间：2012-04-30T18:37:20.403
> 
> 标签：log4net, log4net-configuration

这是我使用的附加程序`app.config`，它会生成类似的文件`20120501.log.1`，而我期望的是`20120501.1.log`。

```
<appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
  <file value="logs\" />
  <appendToFile value="true" />
  <rollingStyle value="Composite" />
  <datePattern value="yyyyMMddt'.log.'" />
  <countDirection value="1" />
  <maxSizeRollBackups value="100" />
  <maximumFileSize value="1000kb" />
  <staticLogFileName value="false" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
  </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:43:06.560

此功能是版本 1.2.11 的一部分。滚动文件附加程序有一个新设置：

```
<preserveLogFileNameExtension value="true"/> 
```

这是 JIRA 问题的链接： [https ://issues.apache.org/jira/browse/LOG4NET-64](https://issues.apache.org/jira/browse/LOG4NET-64)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T19:06:21.087

为了首先执行此操作，您需要设置配置文件：

```
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender,log4net"> 
     <File type="log4net.Util.PatternString" value="App_Data/%property{LogName}" /> 
     ...
</appender> 
```

然后在 Global.asax 文件中设置 LogName 详细信息：

```
 private static readonly log4net.ILog log = log4net.LogManager.GetLogger("Global.asax"); 
void Application_Start(object sender, EventArgs e)  
{ 
    // Set logfile name and application name variables 
    log4net.GlobalContext.Properties["LogName"] = String.Format("{0}.2.log",DateTime.Now.ToString("yyyyMMdd"))
    ...
} 
```

# android - 如何防止android反转前置摄像头的图像？

> ID：10388789
> 
> 赞同：16
> 
> 时间：2012-04-30T18:37:23.987
> 
> 标签：android, video, camera, recording

我的摄像机应用程序确实在横向模式下录制，但前置摄像头预览常规图像，但实际录制在轴上镜像（翻转或倒置）。

在普通后置摄像头上一切正常。

任何人都可以建议我避免它的方法吗？任何建议或源代码都会有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T20:51:04.547

**坏消息**：这个镜像被硬编码到相机服务中，并且不能被禁用。

**好消息**：如果您使用的是最近的 API（API 级别 >= 14），您可以轻松使用 TextureView 将预览图像镜像回原始图像。查看 Android 文档中的[TextureView 示例](http://developer.android.com/reference/android/view/TextureView.html)，然后使用[setTransform](http://developer.android.com/reference/android/view/TextureView.html#setTransform%28android.graphics.Matrix%29)设置镜像变换。这会将预览图像恢复为未镜像的原始图像。

请注意，镜像变换与在 X 轴上具有 -1 比例的缩放变换相同。

如果您使用的是较旧的 API 版本，则可以对 SurfaceView 执行相同操作（使用[setScaleX](http://developer.android.com/reference/android/view/View.html#setScaleX%28float%29)，API 级别 >= 11）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-10T11:56:52.937

尝试将转换矩阵应用于 TextureView。根据[防止前置摄像头翻转](https://stackoverflow.com/questions/9754346/prevent-flipping-of-the-android-front-facing-camera/17569915#17569915)

这适用于 API 级别 >= 14

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-31T09:34:24.510

如果您使用此代码，您可以将相机图片镜像更改为精确预览

```
ImageCapture.Metadata metadata = new ImageCapture.Metadata();
                metadata.setReversedHorizontal(true); // This method will fix mirror issue
                options = new ImageCapture.OutputFileOptions.Builder(imageOutFile).setMetadata(metadata).build(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-18T11:31:08.363

在 OpenCV JavaCameraView 中；

```
public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) {
    imageMat = inputFrame.rgba().t();
    if (//horizontal reverse)
        Core.flip(imageMat, imageMat, 1);
    else //for vertical reverse
        Core.flip(imageMat, imageMat, -1); 
```

# javascript - 如何在 for 循环（javascript）内部的 ajax 调用中传递变量？

> ID：10388791
> 
> 赞同：1
> 
> 时间：2012-04-30T18:37:29.997
> 
> 标签：javascript, ajax, api, scope

使用 api，我需要第一个响应和第二个响应，以便提供一个新页面。我面临的问题是我的变量 $x 总是设置为循环中最后一个 # 的值，即在这种特定情况下为 103。这是我的代码：

```
$.ajax({
dataType: 'text',
type: 'post',
url: 'getAllMessages.php',
success: function(responseData) {
    var newString = responseData;
    var newerString = newString.substring(0, newString.length - 1);
    $newObject = jQuery.parseJSON(newerString);
    //console.log($newObject);
    for($x = 0; $x < $newObject.messages.length; $x++){
        $.ajax({
            data: {clientFolderId: $newObject.messages[$x].clientFolderId, messageId: $newObject.messages[$x].messageId},
            dataType: 'text',
            type: 'post',
            url: 'testapi.php',
            success: function(responseData2){
                //alert($x);
                var newString2 = responseData2;
                var newerString2 = newString2.substring(0, newString2.length - 1);
                $newObject2 = jQuery.parseJSON(newerString2);
                if($newObject2.statistics.delivered > 1000){
                    console.log($newObject.messages[$x]);
                    console.log($newObject2);
                }
            },
            error: function(responseData2){
                alert('failure in testapi.php');
            }
        });
    }
},
error: function(responseData) {
    alert('failure in getAllMessages.php');
} 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:47:38.237

我的直觉说，将 Ajax 调用嵌套在另一个功能范围内（感谢 Matt 进行了更正）将解决意外行为。我被这个已经[在循环中创建的对象烧毁了；展开的作品](https://stackoverflow.com/questions/10095371/object-creation-in-loop-broken-unrolled-works)

同样在这里，示例#5：[http ://www.javascriptkit.com/javatutors/closures2.shtml](http://www.javascriptkit.com/javatutors/closures2.shtml)

按照工程师给出的模式，

```
for($x = 0; $x < $newObject.messages.length; $x++){

   (function($x) {

    $.ajax({
        data: {clientFolderId: $newObject.messages[$x].clientFolderId, messageId: $newObject.messages[$x].messageId},
        dataType: 'text',
        type: 'post',
        url: 'testapi.php',
        success: function(responseData2){
            alert($x);
            var newString2 = responseData2;
            var newerString2 = newString2.substring(0, newString2.length - 1);
            $newObject2 = jQuery.parseJSON(newerString2);
            if($newObject2.statistics.delivered > 1000){
                console.log($newObject.messages[1]);
                console.log($newObject2);
            }
        },
        error: function(responseData2){
            alert('failure in testapi.php');
        }
    });

   })($x);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:56:46.987

你正在经历的是关闭。当循环旋转时，`$x`更新 for 的值。但是，当 ajax 函数来获取它时 - 它正在使用引用。因此，正如您发现的那样，您最终得到了最后一个值。

尝试并思考更多功能？你想做什么？假设您正在尝试将其`postMessage`包装在一个函数中并传递消息。

您的代码将变得更易于阅读，并且您的变量不会被破坏。

我正要抛出一些代码，但注意到我想澄清的一些事情 - 你在两个循环中都使用索引从消息数组中获取单个消息，但 POST`testapi.php`似乎正在处理单个消息？预计会得到什么样的回应？

##  更新：为演示问题创建了 jsFiddle

在这里，您可以使用[一些代码](http://jsfiddle.net/robcthegeek/cjpF7/)来帮助您。

```
 function correctOutputPlox(id) {
     setTimeout(function() {
       $("#output").append("<li>" + id + "</li>");
     }, 500);   
    }

    function runNicely() {
        // same loop...
        for (var x = 0; x < 10; x++) {
            // but rather than use 'x' (which is going to change, we pass it's value into a function which doesn't have access to the original 'x' since it's in a different lexical scope.
            correctOutputPlox(x);
        }
    }

    function showProblem() {
        for (var x = 0; x < 10; x++) {
            setTimeout(function() {
                $("#output").append("<li>" + x + "</li>");
            }, 500);
        }
    }

    showProblem();
    runNicely(); 
```

# php - ExtJS 4 基于更改选择制作更多动态过滤器

> ID：10388792
> 
> 赞同：1
> 
> 时间：2012-04-30T18:37:30.783
> 
> 标签：php, extjs

我真的很难理解不同类型的过滤器以及何时以及如何使用它们，所以我决定从一开始就开始慢慢增加难度。我尝试了从 ExtJS 4 文档中获得的最简单的过滤器，我有一个控制器、一个 stroe、一个模型和一个视图，并且我使用 CodeIgnaiter 作为我的后端。因为我想自下而上，我所做的是：

```
Ext.define('ABC.store.FilterRecordsByForm', {

    extend: 'Ext.data.Store',
    model: 'ABC.model.FormRecord',

    autoLoad: true,
//  autoSync: true,
//  remoteFilter: true,
//  remoteSort: false,

    proxy: {
        type: 'ajax',
        actionMethods: 'POST',
        api: {
         read:  g_settings.baseUrl + 'index.php/record/getRecordsListByForms'

        },
        reader :{
            type: 'json',
            root: 'data',
            idProperty: 'id',
            successProperty: 'success'
        }
    },

        filters: [
        {
            property: 'procedure_id',
            value   : 3
        }
    ]

}); 
```

所以这里我只是使用 ExtJS 4 文档中的示例，并在 stroe 中硬编码我的过滤器。到目前为止，一切都很好。它按预期工作。但是现在我想让我的`value`字段获取一个变量作为值，并在每次`vlue`更改字段的值时重新加载过滤器。我有点困惑 Ext 过滤器的确切实现在这里和哪里使用。我想我应该把它放在控制器中，但不知道如何更改我的过滤器以响应它获得的新值，我是否必须对我的服务器端代码进行更改，或者我只能在客户端进行更改?

谢谢

勒隆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:23:21.050

如果您的商店将 remoteFiler 设置为 true，您可以执行以下操作：

```
store.clearFilter();
store.filter('procedure_id', new_value); 
```

这将导致商店根据新过滤器重新加载它的内容。

# c# - 墓碑问题

> ID：10388796
> 
> 赞同：1
> 
> 时间：2012-04-30T18:37:56.653
> 
> 标签：c#, windows-phone-7, tombstoning

当我尝试为我的应用程序墓碑时，我一直在手机上遇到这种情况。

**不应使用数据合同名称“UTF8Encoding:http://schemas.datacontract.org/2004/07/System.Text”键入“System.Text.UTF8Encoding”。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。**

我没有在我的应用程序的任何地方使用 WCF 或数据协定，也没有在墓碑上执行任何代码，所以我不确定这是从哪里来的。我的代码中也没有任何文本或模式。

在堆栈跟踪中，我没有看到我的任何代码正在执行。

```
System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType（DataContract dataContract，XmlWriterDelegator xmlWriter，Object obj，Boolean verifyKnownType，RuntimeTypeHandle 声明的TypeHandle）
...

在 System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions（XmlWriterDelegator writer，对象图）

在 System.Runtime.Serialization.XmlObjectSerializer.WriteObject（XmlDictionaryWriter 编写器，对象图）

在 System.Runtime.Serialization.XmlObjectSerializer.WriteObject（流流，对象图）

在 Microsoft.Phone.Shell.StreamPersister.Serialize（IDictionary`2 字典，IEnumerable`1 knownTypes）

在 Microsoft.Phone.Shell.StreamPersister.Save（ShellPageManager shellPageManager，字符串键，IDictionary`2 字典，IEnumerable`1 knownTypes）

在 Microsoft.Phone.Shell.PhoneApplicationService.FireDeactivated()

在 Microsoft.Phone.Execution.NativeEmInterop.FireOnPause()

```

我该如何调试这样的东西？

解决方案：不容易，但在调试菜单中启用异常是一个开始，然后使用 shift+f9 尝试一些值以查看可能导致它的原因。最后的答案是在应用程序关闭之前清除状态，就像这样。

```
Application_Deactivated or Closing(){
            SerializeToPhone(); //save state to phone manually
            var appService = PhoneApplicationService.Current;
            appService.State.Clear();
} 
```

这样，您就可以清除对象，这样手机就不会尝试为您管理状态。我添加了自己的代码以使用自定义序列化程序将状态保存到手机，并在重新激活时从手机中读取。我认为如果你的应用程序足够简单，只有一些没有网络安全或 Facebook 登录等的字符串和数字，你可以把它留给手机来处理墓碑。就我而言，我需要一个更强大的系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:54:01.427

听起来您的一种类型中有一个`Encoding`（或`UTF8Encoding`）变量，该变量正在自动序列化，以便您的应用程序可以恢复。查看您的代码，看看是否有任何类似的变量。如果有，下一步是确定您是否真的需要这些变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:18:40.120

ApplicationState`DataContractSerializer`在墓碑化时被序列化。听起来您正在添加无法正确反序列化的内容。
有两种选择：

1.  确保您保存的任何内容都可以`DataContractSerializer`正确反序列化。
    或者
2.  自己处理序列化和反序列化（使用比 DataContractSerializer 更快的东西，例如 json.net），并且只将序列化的字符串添加到状态对象。

# objective-c - RestKit 对象建模动态数据

> ID：10388806
> 
> 赞同：0
> 
> 时间：2012-04-30T18:38:55.473
> 
> 标签：objective-c, ios, json, rest, restkit

是否可以使用具有以下 JSON 结构的键映射，或者我们是否必须手动执行值循环？例子会很棒。他们的 rest api 并没有真正将现实世界的对象映射到标准的对象结构中，而只是在 XML 属性之后建模。:(

```
THINGS{
"lastModifiedDate": "2012-02-23-08.43.16.916000",
"myList": [{
  "attributeList": [
                    {"id": "","name": "Content Level","val": "Introductory"},
                    {"id": "","name": "Session Type","val": "Business Overview"},
                    {"id": "20110616053537016","name": "Speaker","val": "Jim Kim, Company1"},
                    {"id": "20110616053526559","name": "Speaker","val": "Bob Ironman, Company2"},
                    {"id": "20110803145027914","name": "Speaker","val": "Kristine Thomas, Company3"},
                    {"id": "","name": "Room","val": "Banyan"},
                    {"id": "","name": "Industry","val": "Cross Industry"},
                    {"id": "","name": "Loc","val": "Stadium I"},
                    {"id": "","name": "Topic Tag","val": "CMS Systems"},
                    {"id": "","name": "Status","val": "Accepted"},
                    {"id": "","name": "Sub-Event","val": "Leadership"},
                    {"id": "","name": "Session","val": "LVI"},
                    {"id": "","name": "SubTrack","val": "None"},
                    {"id": "","name": "Track","val": "Business Value Outsourcing"}
  ],

"active": true,
"desc": "This is a really cool thing",
"end": "16:00",
"id": "2011080146112",
"num": "1002A",
"start": "15:00",
"title": "The thing title"
  }
 ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:45:22.833

是的，使用 RestKit 是可能的。

[您可以从官方wiki](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md)获取阅读本文所需的所有文档，在这里您可以了解如何做您需要做的事情。希望这对你有帮助！

首先，每个实体需要三个对象，一个用于 ThingsList，另一个用于表示一个事物，另一个用于表示一个 ThingAttribute。让我们从最基本的元素 ThingAttribute 开始：

**SOAttribute.h**

```
#import <Foundation/Foundation.h>

@interface SOAttribute : NSObject{
    NSNumber *attributeId; //I use this nomenclature because the word 'id' is reserved, same for other objects.
    NSString *name;
    NSString *val;
}

@end 
```

**SO属性.m**

```
@implementation SOAttribute
@end 
```

这将让您表示 JSON 的这一部分：

```
{"id": "","name": "Content Level","val": "Introductory"} 
```

现在我们将 Thing 定义如下：

**SOThing.h**

```
#import <Foundation/Foundation.h>

@interface SOThing : NSObject{

    NSArray *attributeList; //This represent the list of attributes defined before
    BOOL active;
    NSString *desc;
    NSString *title;
    NSString *end;
    NSString *start;
    NSString *num;
    NSNumber *thingId;

}

@end 
```

**SOThing.m**

```
#import "SOThing.h"
@implementation SOThing
@end 
```

如您所见，您必须将attributeList 定义为NSArray。RestKit 会自动知道您需要在那里接收属性列表。所以我们定义了以下结构：

```
{
    "attributeList": [...],
    "active": true,
    "desc": "This is a really cool thing",
    "end": "16:00",
    "id": "2011080146112",
    "num": "1002A",
    "start": "15:00",
    "title": "The thing title"
} 
```

最后，您按如下方式定义事物列表：

**SOThingList.h**

```
#import <Foundation/Foundation.h>

@interface SOThingList : NSObject{
    NSDate *lastModifiedDate;
    NSArray *myList;
}
@end 
```

**SoThingList.m**

```
#import "SOThingList.h"
@implementation SOThingList
@end 
```

和以前一样，我们需要一个事物列表，所以我们将 myList 定义为一个 NSArray。

现在，这很容易，这里有你向 RestKit 指示如何映射每个实体的魔法。在您的 App Delegate 上放置以下代码：

```
#import "SOThingList.h"
#import "SOThing.h"
#import "SOAttribute.h"

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

    RKObjectMappingProvider *mappingProvider = [RKObjectManager sharedManager].mappingProvider;

    RKObjectMapping *mappingForAttribute = [RKObjectMapping mappingForClass:[SOAttribute class]];
    //This can be mapped directly
    [mappingForAttribute mapAttributes:@"name",@"val", nil];
    //here you indicate the special case, id->attributeId on our object
    [mappingForAttribute mapKeyPath:@"id" toAttribute:@"attributeId"];
    //Set the new mapping into the mapping provider.
    [mappingProvider addObjectMapping:mappingForAttribute];

    RKObjectMapping *mappingForThing = [RKObjectMapping mappingForClass:[SOThing class]];
    //Same as before, these attributes can be mapped directly
    [mappingForThing mapAttributes:@"active",@"title",@"end",@"start",@"desc",@"num", nil];
    [mappingForThing mapKeyPath:@"id" toAttribute:@"thingId"];
    //Here I indicate that any object on NSArray on attributeList should be mapped using SOAttribute mapping defined above.
    [mappingForThing mapKeyPath:@"attributeList" toRelationship:@"attributeList" withMapping:mappingForAttribute];
    [mappingProvider addObjectMapping:mappingForThing];

    RKObjectMapping *mappingForThingsList = [RKObjectMapping mappingForClass:[SOThingList class]];
    [mappingForThingsList mapAttributes:@"lastModifiedDate", nil];
    [mappingForThingsList mapKeyPath:@"myList" toRelationship:@"myList" withMapping:mappingForThing];
    [mappingProvider addObjectMapping:mappingForThingsList];

} 
```

综上所述，您可以通过以下方法使用块获取您的事物列表：

**一些对象.m**

```
- (void) get: (NSString *) resourcePath onLoad:(RKObjectLoaderDidLoadObjectBlock) loadBlock onError:(RKRequestDidFailLoadWithErrorBlock)failBlock{

    RKObjectMapping *mapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[SOThingList class]];
    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader* loader) {
        loader.objectMapping = mapping;
        loader.delegate = self;
        loader.onDidLoadObject = loadBlock;

        loader.onDidFailWithError = ^(NSError * error){
            NSLog(@"%@",error);
        };
        loader.onDidFailLoadWithError = failBlock;
        loader.onDidLoadResponse = ^(RKResponse *response) {
            //Do something
        };

    }];

} 
```

而你这样使用它......

```
[someObjectInstance get:@"http://mydomain.com/mywebservice/" onLoad:^(id object){
    SOThingList *thingList = (SOThingList *) object;
    //Do something with your shiny thingList
} onError:^(NSError *error) {
    //Display an error message :)
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:46:13.497

您始终可以使用 Mac App Store 中的 Objectify（15 美元）或 JSON Accelerator（0.99 美元）等工具来帮助生成此 JSON 的模型。然后，当您拥有数组时，您可以使用类似 NSArray 的东西

`- (void)makeObjectsPerformSelector:(SEL)aSelector`

让所有对象寻找一个对象。

我个人更喜欢使用块和

`- (void)enumerateObjectsUsingBlock:(void (^)(id obj, NSUInteger idx, BOOL *stop))block`循环遍历事物

它与 RestKit 没有直接关系，但这可能是一种帮助你的方法。

# jquery - Jquery Cycle Plugin - 隐藏特定的缩略图

> ID：10388807
> 
> 赞同：0
> 
> 时间：2012-04-30T18:38:57.607
> 
> 标签：jquery, jquery-cycle

我有一个幻灯片，其中 Cycle 使用 pagerAnchorBuilder 选项自动生成缩略图：

```
pagerAnchorBuilder: function(idx, slide) {
 return '<li><a href="#"><img src="' + slide.src + '" width="38" height="45" /></a></li>';
}, 
```

我想隐藏最后一个缩略图（实际上是最后 2 个缩略图）。我知道我可以使用类似的东西：

```
$('li').eq(-1).hide(); 
```

只是不知道把它放在哪里，所以它会在所有缩略图都加载后发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:12:43.007

你可以这样做：

```
#pager a:last-child{
   display:none;
} 
```

或者你可以做这样的事情[http://jsfiddle.net/sxcGR/](http://jsfiddle.net/sxcGR/)

```
 pagerAnchorBuilder: function(idx, slide) {
  var cssClass="";

  if (idx==$('.image-slides img').length-1)  // assumes you are cycling img
    cssClass="hidemeclass"; // css .hidemeclass {display:none}

  return '<li class="' + cssClass + '"><a href="#"><img src="' + slide.src + '" width="38" height="45" /></a></li>';
} 
```

# c++ - 无法转换参数

> ID：10388811
> 
> 赞同：0
> 
> 时间：2012-04-30T18:39:36.090
> 
> 标签：c++

我有这个在 VC++ 6.0 中编译得很好

```
typedef std::vector<ILBCOM_FieldStruct*> FieldsVector;
FieldsVector m_coll;
FieldsVector::iterator it(&m_coll[Index-1]);
m_coll.erase(it); 
```

我需要在 Visual Studio C++ 2010 中编译

错误信息在第 3 行：

> 错误 C2664：'std::_Vector_iterator<_Myvec>::_Vector_iterator(const std::_Vector_iterator<_Myvec> &)'：无法将参数 1 从 'ILBCOM_FieldStruct **' 转换为 'const std::_Vector_iterator<_Myvec> &'

你看出什么不对了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:44:01.547

`std::vector<T>::iterator`没有从 转换的构造函数`T*`。它*确实*有一个复制构造函数：

```
FieldsVector::iterator it(m_coll.begin()+Index-1); 
```

# python - 什么是获取 list1[i] < list2[i] 次数的 Pythonic 方法，反之亦然

> ID：10388813
> 
> 赞同：3
> 
> 时间：2012-04-30T18:39:40.037
> 
> 标签：python

我有两个带有值的列表，预期结果是一个元组`(a,b)`，其中`a`i 值的数量是`list1[i] < list2[i]`，并且`b`是 i 值的数量 where `list1[i] > list2[i]`（根本不计算等式）。

我有这个解决方案，而且效果很好：

```
x = (0,0)
for i in range(len(J48)):
    if J48[i] < useAllAttributes7NN[i]:
      x = (x[0]+1,x[1])
    elif J48[i] > useAllAttributes7NN[i]:
        x = (x[0], x[1]+1) 
```

但是，我正在努力提高我的 Python 技能，而且实现它的方式似乎非常非 Python。

**什么是实现相同结果的pythonic方法？**

**仅供参考**，这样做是为了实现所需的输入，[`binom_test()`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.binom_test.html)以试图证明两种算法在统计上并不相同。
不过，我不相信这些信息对特定问题有任何附加价值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:49:31.360

一种方法是建立一组分数，然后将它们相加。

```
scores = [ (a < b, a > b) for (a, b) in zip(J48, useAllAttributes7nn) ]
x = (sum( a for (a, _) in scores ), sum( b for (_, b) in scores ))

// Or, as per @agf's suggestion (though I prefer comprehensions to map)...
x = [ sum(s) for s in zip(*scores) ] 
```

另一种是将它们压缩一次，然后分别计算分数：

```
zipped = zip(J48, useAllAttributes7nn)
x = (sum( a < b for (a, b) in zipped ), sum( a > b for (a, b) in zipped )) 
```

请注意，这在 Python 3 中不起作用（感谢@Darthfett）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T19:40:31.920

Just for the sake of fun, solving this problem using complex numbers. Though not Pythonic but quite mathematical :-)

Just think this problem as plotting the result on a two dimensional complex space

```
result=sum((x < y) + (x > y)*1j for x,y  in zip(list1,list2))
(result.real,result.imag) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T18:48:31.030

```
import itertools

x = [0, 0, 0]
for a, b in itertools.izip(J48, useAllAttributes7NN):
    x[cmp(a, b)] += 1 
```

然后取`x[0]`和`x[2]`，因为`x[1]`计算等式。

另一种方式（必须解析列表两次）：

```
first = sum(1 for a, b in itertools.izip(J48, useAllAttributes7NN) if a > b)
second = sum(1 for a, b in itertools.izip(J48, useAllAttributes7NN) if a < b) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T18:49:32.670

一个简单的解决方案是：

```
list1 = range(10)
list2 = reversed(range(10))
x = [0, 0]
for a, b in zip(list1, list2):
    x[0] += 1 if a < b else 0
    x[1] += 1 if a > b else 0
x = tuple(x) 
```

给我们：

```
(5, 5) 
```

[`zip()`](http://docs.python.org/py3k/library/functions.html#zip)是一次迭代两个列表的最佳方式。如果您使用的是 Python 2.x，您可能出于性能原因想要使用[`itertools.izip`](http://docs.python.org/library/itertools.html#itertools.izip)（它像 Python 3.x 的`zip()`.

在您停止更改列表之前，在列表上工作也更容易，因为列表是可变的。

# 编辑：

使用以下版本的 Python 3 兼容版本`cmp`：

```
def add_tuples(*args):
   return tuple(sum(z) for z in zip(*args))

add_tuples(*[(1, 0) if a < b else ((0, 1) if a > b else (0, 0)) for a, b in zip(list1, list2)]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T19:07:11.180

```
list1 = [1, 3, 7, 15, 22, 27]
list2 = [2, 5, 10, 12, 20, 30]

x = 0
y = 0 
for index, value in enumerate(list1):
    if value < list2[index]:
        x += 1
    elif value > list2[index]:
        y += 1

print (x, y) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T18:51:16.063

那么，怎么样：

```
import itertools
def func(list1, list2):
    x,y = 0,0
    for (a,b) in itertools.izip(list1, list2):
      if a > b:
        x += 1
      elif a < b:
        y += 1
    print x,y 
```

# mysql - 使用facebook注册插件将用户的facebook显示图片存储到mysql表中

> ID：10388817
> 
> 赞同：0
> 
> 时间：2012-04-30T18:40:27.790
> 
> 标签：mysql, facebook, plugins, registration

facebook注册插件也可以将注册用户的显示图片与其他详细信息一起存储到mysql数据库中吗？

如果是，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:15:10.260

*   **甜蜜而短暂**

您*真正*需要的只是用户 ID。有了它，您可以简单地放置一个`<img>`标签，其`src`属性指向 -

```
`http://graph.facebook.com/USER_ID/picture` 
```

应该显示用户的公共头像。
现场演示 - ![](../Images/7b8e885789bda84bd43a236df816e801.png) （[检查来源以获取证据！](http://facebook.stackoverflow.com/posts/10389267/edit)）

* * *

*   **更长更坚固**

您无需使用该插件即可检索用户个人资料图片。

您可以使用任何其他您觉得合适的方式来获取该数据。有多种语言的多种选择。任何可以执行 HTTP 请求的语言都可以获得相同的结果。

为简单起见，我将使用[JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)进行演示- 如果您跟随，您应该知道 SDK 需要存在`<div>`id 为的元素`fb-root`

```
<div id="fb-root"></div> 
```

关于 JavaScript -

```
FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

FB.api('/USER_ID/picture', function(response) {
  alert(response);
}); 
```

浏览器应通过用户个人资料图片的 URL 提醒您。

# ruby - next_ 的猴子补丁日期类 方法

> ID：10388818
> 
> 赞同：0
> 
> 时间：2012-04-30T18:40:30.787
> 
> 标签：ruby, ruby-on-rails-3, monkeypatching

在我的 Rails 应用程序中，我需要从其他日期开始获取特定工作日的下一次出现的日期。所以基本上我需要`date.next_monday`，`date.next_wednesday`输入函数。我认为标准 Ruby 库中不存在这些，所以我决定像这样修改 Date 类：

```
class Date
  weekdays = [:sunday, :monday, :tuesday, :wednesday, :thursday, :friday, :saturday]
  weekdays.each do |weekday|
    method_name = "next_" + weekday.to_s
    send :define_method, method_name do
      tmp_date = self + 1
      until tmp_date.send((weekday.to_s + "?").to_sym)
        tmp_date = tmp_date + 1
      end
      tmp_date
    end
  end
end 
```

这似乎工作正常。我的问题是：

1.  我不需要做所有这些吗？（有什么方法可以让我没有想到 next_ 吗？
2.  如果我所做的是必要的，有没有更好的方法来获取工作日数组？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:47:08.270

该类`Date`定义了一个`DAYNAMES`常量（[以及许多其他有用的常量](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#constants-list)），您可以使用它来替换您的数组。

# php - 如何在 PHP 中复制父目录文件

> ID：10388819
> 
> 赞同：1
> 
> 时间：2012-04-30T18:40:36.327
> 
> 标签：php, copy

提前致谢。我正在尝试将文件复制到脚本文件的父目录中。

前任。www.xyz.com/empty_page.php www.xyz.com/empty_popup.php

现在我的脚本在管理员权限下。前任。www.xyz.com/admin/copy.php

在 copy.php 我放了跟随代码，但它没有功能

```
copy('../empty_page.php', '../new_page1.php');
copy('../empty_popup.php', '../new_popup1.php'); 
```

但它不起作用。如果 copy.php 在 www.xyz.com/ 下，它将使用以下代码

前任。www.xyz.com/copy.php（工作正常）

```
copy('empty_page.php', 'new_page1.php');
copy('empty_popup.php', 'new_popup1.php'); 
```

请帮我解决这个问题。再次提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T21:11:18.707

如果你尝试这样的事情呢？

```
$path = dirname(__FILE__);
copy("$path/file1.php", "$path/file2.php"); 
```

伟大的。

# asp.net - 将列添加到数据网格

> ID：10388820
> 
> 赞同：0
> 
> 时间：2012-04-30T18:40:59.573
> 
> 标签：asp.net

我正在尝试将带有下拉列表的列添加到 DataGrid

这是 DataGrid 绑定数据源的代码

```
 List<CPDEmployee> employeelist = (List<CPDEmployee>)Cache["EmployeeList"];

        unverifiedlist.DataSource = employeelist;
        unverifiedlist.DataBind();
        unverifiedlist.AllowPaging = true;
        unverifiedlist.PageSize = 10; 
```

page.aspx中的代码是这样的

```
 <asp:DataGrid ID="unverifiedlist" runat="server" AllowPaging="true" PageSize="10" OnPageIndexChanged="unverifiedlist_PageIndexChanged">
            <Columns>
                <asp:BoundColumn HeaderText="Surname" DataField="Surname" ReadOnly="true">   
                </asp:BoundColumn>
            </Columns>
            <Columns>
                <asp:TemplateColumn HeaderText="Options" >
                    <ItemTemplate>
                        <asp:DropDownList ID="options" runat="server">
                            <asp:ListItem Value="1">Verified</asp:ListItem>
                            <asp:ListItem Value="0">Rejected</asp:ListItem>
                        </asp:DropDownList>
                    </ItemTemplate>
                </asp:TemplateColumn>
                <asp:TemplateColumn HeaderText ="Reason">
                    <ItemTemplate>
                        <asp:TextBox ID="reason" runat="server"></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateColumn>
            </Columns>
        </asp:DataGrid> 
```

![在此处输入图像描述](../Images/34da0a7bce8bf1c2a897db5f0790f1d9.png)

结果是数据网格中有两个“姓氏”字段。我从页面侧添加“姓氏”的原因是我无法设置列的顺序（下拉列表应该是最后的）。

有谁知道如何解决这个问题？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:43:44.080

您必须关闭 AutoGenerateColumns 并指定*所有*绑定字段。

# sql - 在 where 条件下使用 CASE WHEN

> ID：10388821
> 
> 赞同：1
> 
> 时间：2012-04-30T18:40:59.727
> 
> 标签：sql, sql-server

我想知道是否有人可以帮助我为以下逻辑编写一些代码。

我们有一张桌子

```
----------------
id, lang, letter
----------------
1    1      E
1    1      E
1    1      E
1    1      E
2    2      F 
```

**问题：**

我需要选择以下条件失败的所有行：

*   id = lang（即它的 1 或 2）
*   lang = 1 当 letter = 'e' 或 lang=2 当 letter=2

我知道我可以硬编码。我也想只在一个查询中执行此操作。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:49:01.793

```
WHERE NOT
(
    id = lang
    AND
    (
        (lang = 1 AND letter = 'e')
        OR (lang = 2 AND letter = '2')
    )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:44:41.250

```
select * from table
where id <> lang and
(lang<>1 and letter <> 'e' or
lang<>2 and letter <> '2') 
```

假设您的意思是您想要所有这两个条件都为假的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:50:54.133

我认为这是您要排除符合该条件的记录的内容：

```
create table #t
(
    id int,
    lang int,
    letter varchar(1)
)

insert into #t values (1, 1, 'E')
insert into #t values (1, 1, 'E')
insert into #t values (1, 1, 'E')
insert into #t values (1, 1, 'E')
insert into #t values (2, 2, 'F')
insert into #t values (1, 1, 'G')
insert into #t values (1, 1, 'H')
insert into #t values (1, 1, 'I')
insert into #t values (1, 1, 'J')
insert into #t values (2, 2, '2')

SELECT *
FROM #t
WHERE NOT
(
    id = lang
    AND
    (
        (
            lang = 1
            AND letter = 'E'
        )
        OR
        (
            lang = 2
            AND letter = '2'
        )
    )
)

drop table #t 
```

要获取记录，只需删除`NOT`它：

```
SELECT *
FROM #t
WHERE 
(
    id = lang
    AND
    (
        (
            lang = 1
            AND letter = 'E'
        )
        OR
        (
            lang = 2
            AND letter = '2'
        )
    )
) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T23:39:22.470

这里的想法是，可以将三个业务规则实现为三个不同的元组约束（即表中的每一行都不是 false）：

1.  `id`并且`lang`必须相等（问一个问题，为什么不将其设为计算列？）。

2.  如果`letter`是，`'E'`那么`lang`必须是`1`（我假设您说的问题中有错字`'e'`而不是`'E'`）。

3.  如果`letter`是，`'F'`那么`lang`必须是`2`（我假设您说的问题中有错字`2`而不是`'F'`）。

约束对任何其他数据（例如 when `letter`is `'X'`）“无话可说”，并将允许它通过。

所有三个元组约束都可以写成合取范式作为约束验证查询：

```
SELECT * FROM T
 WHERE id = lang
       AND ( letter <> 'E' OR lang = 1 ) 
       AND ( letter <> 'F' OR lang = 2 ) 
```

违反约束的数据可以简单地显示（在伪关系代数中）为：

```
T MINUS (constraint validation query) 
```

在 SQL 中：

```
SELECT * FROM T
EXCEPT
SELECT * FROM T
 WHERE id = lang
       AND ( letter <> 'E' OR lang = 1 ) 
       AND ( letter <> 'F' OR lang = 2 ) 
```

最好能够重写谓词，以防一个人选择的查询像胶水一样运行在一个人选择的 DBMS 上！以上可以重写为例如

```
SELECT * FROM T
 WHERE NOT ( id = lang
            AND ( letter <> 'E' OR lang = 1 ) 
            AND ( letter <> 'F' OR lang = 2 ) ) 
```

应用重写定律（德摩根和双重否定），例如

```
SELECT * FROM T
 WHERE id <> lang
       OR ( letter = 'E' AND lang <> 1 ) 
       OR ( letter = 'F' AND lang <> 2 ) 
```

从逻辑上讲，这对优化器来说应该更好，因为要使上述矛盾成为矛盾，每个分离成员都必须为假（换句话说，只需一个 OR'ed 子句为真，数据就被认为是“坏的”） . 在实践中（理论上？），优化器无论如何*都应该*能够执行这样的重写！

ps null 不利于逻辑——避免使用它们！

* * *

这是我的带有示例数据的测试代码：

```
WITH Nums AS ( SELECT * 
                 FROM ( VALUES (0), (1), (2) ) AS T (c) ), 
     Chars AS ( SELECT * 
                  FROM ( VALUES ('E'), ('F'), ('X') ) AS T (c) ), 
     T AS ( SELECT N1.c AS id, N2.c AS lang, 
                   C1.c AS letter
              FROM Nums AS N1, Nums AS N2, Chars AS C1 )

SELECT * FROM T
EXCEPT
SELECT * FROM T
 WHERE id = lang
       AND ( letter <> 'E' OR lang = 1 ) 
       AND ( letter <> 'F' OR lang = 2 ); 
```

# sql - Rails 和 named_scope 查询

> ID：10388822
> 
> 赞同：1
> 
> 时间：2012-04-30T18:41:01.447
> 
> 标签：sql, ruby-on-rails, scope

我正在尝试理解 rails 中 named_scoped 查询的概念。我正在尝试过滤表格以仅获取非特色项目（：featured => false）。

在我的模型中，我添加了

范围 :allgames, where(:featured => false) 和范围 :featured, where(featured => true)

我试图在我的游戏索引页面上分别列出所有特色和非特色项目。

是否可以通过命名范围来实现它。

到目前为止，我有：

```
<% @games.each do |item| %>
  <% if item.featured %> 
    <%= render 'application/item_synopsis_builder', item: item %>
  <% end -%>
<% end %> 
```

我想知道是否有可能做类似的事情：

```
<% @games.featured.each do |item| %>
    <%= render 'application/item_synopsis_builder', item: item %>
<% end %> 
```

或者

```
<%= render partial: 'application/item_synopsis_builder', collection: @games.featured %> 
```

当我尝试时，我收到一条消息，说没有特色方法。但是当我`Game.featured`在控制台中运行命令时，我会得到所有特色游戏的结果列表。

是否可以在视图中访问此列表/方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:46:46.043

命名范围作为类方法添加到模型中，因此尝试访问对象集合上的方法是行不通的。类似的功能可以通过以下方式实现：

```
 @games.where(:featured => true).each do 
       ...
    end 
```

但我建议您的控制器中有两个变量：

```
 @featured_games = Games.featured
    @all_games      = Games.allgames 
```

然后在您的视图中使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T18:49:49.477

您的视图由渲染视图的控制器创建的 @games 实例变量驱动。命名范围为 ActiveRecord::Base 的子类创建一个类方法。所以“Game.featured”返回一些东西，因为定义命名范围为 Game 类创建了一个方法。它没有**创建**Game 类的对象（例如 @games）可以调用的实例方法。这就是为什么“@games.featured”会给你一个错误。

做你想做的事，在控制器中创建两个实例变量并将它们传递给视图，例如

```
@all_games = Game.allgames
@featured_games = Game.featured 
```

这两个变量都将在您的视图中可用，并且您可以构建循环来呈现您喜欢的每个集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:44:14.277

范围是一个类方法（或可同化，我不知道具体细节），所以是的，Game.featured 可以工作，但是当您执行 @games.featured 时，您正在调用一个实例`featured`数组。`Game`

# image - 照相亭风格效果库

> ID：10388825
> 
> 赞同：0
> 
> 时间：2012-04-30T18:41:12.393
> 
> 标签：image, image-processing, photos

有没有什么好的工具或库可以在 OS X 上进行类似于 Photo Booth 的图像效果？它不必是实时的，只需将效果应用于图像就足够了。作为奖励：首选 python 绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:51:32.147

[图像魔法呢？](http://www.imagemagick.org/script/index.php)

它有很多效果，符合 Python 标准，并且可以做的比你的目标要多。您可以在控制台或通过 api 使用它。

[效果示例（包括棕褐色）](http://www.imagemagick.org/script/convert.php)

有了它，你可以扭曲，模糊，水印，. . . 无论你想要什么 ：）

它支持[很多语言](http://www.imagemagick.org/script/api.php)，甚至在[github上也有一个到 android 的端口](https://github.com/lilac/Android-ImageMagick)

# sql - SQL Server 2008 XML Query

> ID：10388831
> 
> 赞同：0
> 
> 时间：2012-04-30T18:41:59.740
> 
> 标签：sql, xml, xpath

I need some more help with another XML query. Below is an example of a record of my XML column:

```
<Fields>
  <MappedFields>
    <Field name="FormNumber" value="21" />
    <Field name="ProcedureCode" value="T2023" />
    <Field name="CurrentDate" value="4/23/2012" />
  </MappedFields>
</Fields> 
```

The field elements may appear in any order, so it can appear like this as well:

```
<Fields>
  <MappedFields>
    <Field name="ProcedureCode" value="G5532" />
    <Field name="FormNumber" value="12" />
    <Field name="CurrentDate" value="3/29/2011" />
  </MappedFields>
</Fields> 
```

What I am looking for, is a query that will get the value of the Field with the name "FormNumber" for all the records in the table. The query I have below works if the Field with the name of "FormNumber" is the first Field element in the XML. What I need is a query that will find the Field element even if it is not the first element. Can someone help me out with this?

```
SELECT
     X.Node.value(N'(Field/@value)[1]', 'nvarchar(max)') AS FormNumber
FROM 
    dbo.MHTCM_LetterSent A
CROSS APPLY A.LetterXML.nodes(N'/Fields/MappedFields') AS X(Node)
WHERE
    X.Node.value(N'(Field/@name)[1]', 'nvarchar(max)') = 'FormNumber' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:54:23.187

You can have a test in the xml path like `[@name="FormNumber"]`.

```
SELECT
     X.Node.value(N'(Field[@name="FormNumber"]/@value)[1]', 'nvarchar(max)') AS FormNumber
FROM 
    dbo.MHTCM_LetterSent A
CROSS APPLY A.LetterXML.nodes(N'//Fields/MappedFields') AS X(Node) 
```

Note the `WHERE` isn't needed now.

It might make more sense to move the test to the `CROSS APPLY`:

```
SELECT
     X.Node.value(N'(./@value)[1]', 'nvarchar(max)') AS FormNumber
FROM 
    dbo.MHTCM_LetterSent A
CROSS APPLY A.LetterXML.nodes(N'//Fields/MappedFields/Field[@name="FormNumber"]') AS X(Node) 
```

Edit- I made the paths absolute (//) and both examples are working for me.

# php - 如何判断 PDO 模块是否安装/禁用？

> ID：10388833
> 
> 赞同：6
> 
> 时间：2012-04-30T18:42:26.387
> 
> 标签：php, pdo

我正在开发一个 PHP 应用程序。我刚刚将一堆文件移到生产服务器上，发现显然没有安装 PDO ( `Fatal error: Class 'PDO' not found in [file] on line [line]`)。产品服务器使用 PHP 5.3.6；根据[我找到的文档](http://php.net/manual/en/pdo.installation.php)，“从 PHP 5.1.0 开始，默认启用 PDO 和 PDO_SQLITE 驱动程序”。

我很少有管理 PHP 的经验。如何判断此模块是否已安装但已禁用或完全不存在？我需要做什么才能让它运行？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-30T18:44:02.733

通常，您只需`phpinfo();`找出安装了哪些模块即可。

或从命令行：

```
php -m 
```

此外，您可以使用：[`class_exists('PDO')`](http://php.net/manual/en/function.class-exists.php)来确定 PDO 类是否确实可以访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-05T13:50:13.283

在终端类型中：

`php -i |grep PDO`

`-i`用于显示 phpinfo() 的输出。

`|grep`会将列表过滤为包含 PDO 的列表。

# codeigniter-2 - 无法让 CSRF 与 ajax (CI 2.1) 一起使用

> ID：10388838
> 
> 赞同：2
> 
> 时间：2012-04-30T18:42:38.273
> 
> 标签：codeigniter-2

我试图让 CSRF 在我的 CI 2.1 应用程序中与 ajax 一起工作。

我对此进行了搜索，发现很少有指导方针，但无法解决问题 [http://ericlbarnes.com/post/10728867961/codeigniter-csrf-protection-with-ajax](http://ericlbarnes.com/post/10728867961/codeigniter-csrf-protection-with-ajax) http://www.beheist.com/index。 php/en/blog/csrf-protection-in-codeigniter-2-0-a-closer-look [http://aymsystems.com/ajax-csrf-protection-codeigniter-20](http://aymsystems.com/ajax-csrf-protection-codeigniter-20)

我在配置中为两个标记值设置了两个不同的标记

```
$config['csrf_protection'] = TRUE;
$config['csrf_token_name'] = 'token01';
$config['csrf_cookie_name'] = 'token02';
$config['csrf_expire'] = 7200; 
```

这是我的观点，我正在使用 form_open

```
<?php echo form_open("http://localhost/pis/user"); ?>
<div id="inputs">

<?php echo form_input($username);?>
<?php echo form_password($password);?>
</div>

<div id="actions">

<div style="float:left"><?php echo form_submit($submit);?>

<!-- <input type="button" value="Login" id="submit" name="submit" onclick="clicksubmit()" /> -->

</div>

</div>

<?php echo form_close();?> 
```

我正在使用这个 javascript 进行异步调用

```
<script type="text/javascript">
$(document).ready(function(){

      $("#submit").click( 

        function(){
            var form_data = {
                username: $("#username").val(),
                password: $("#password").val(),
                csrf_token_name: $("input[name=token01]").val()
            };

            $.ajax({
            type: "POST",
            url: "http://localhost/pis/user",
            data: form_data,
            success: 
              function(data){
                $("#debug").html(data.message).css({'background-color' : data.bg_color}).fadeIn('slow'); 
              }

            });

          return false;

        });

    });

</script> 
```

当我运行它时，我收到“500 内部服务器错误”以及“遇到错误，不允许您请求的操作”作为响应。Firebug 正确显示 POST 数据参数。

例如：用户名=root&password=root&csrf_token_name=31961f17de5fa2df657ab1aba880f718

**但是，如果我删除了 csrf，ajax 请求运行正常，我得到 200 作为响应**

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:23:49.470

更好的是，你可以让 jQuery 为你序列化表单数据：

```
var form_data = $(this).serialize(); 
```

这样您就不必担心输入被重命名或添加更多字段。

# dojo - 如何将分层 Json 映射到 ItemFileWriteStore？

> ID：10388846
> 
> 赞同：1
> 
> 时间：2012-04-30T18:42:58.263
> 
> 标签：dojo, dojox.grid, dojox.grid.datagrid

我有包含子元素的 Json 数据。我需要将商店绑定到可编辑的网格并将编辑内容填充到商店中。数据树确实会填充到 ItemFileWriteStore。数据网格仅显示父数据，不显示子数据。

样品.TXT

```
 {
    "items": [
        {
            "profileId": "1",
            "profileName": "ABC",
            "profileType": "EmailProfile",
            "profilePreferences": [
                {
                    "profilePreferenceId": "1",
                    "displayText": "Bob",
                    "address": "primary@some.com"
                },
                {
                    "profilePreferenceId": "2",
                    "displayText": "Sally",
                    "address": "secondary@some.com"
                },
                {
                    "profilePreferenceId": "3",
                    "displayText": "Joe",
                    "address": "alternate@some.com"
                }
            ]
        }
    ]
} 
```

javascript

```
var sampleLayout = [
  [
  { field: 'profileName', name: 'profileName', width: '100px' },
  { field: 'profilePreferences.displayText', name: 'displayText', width: '100px' },
  { field: 'profilePreferences.address', name: 'address', width: '100px' }      
  ]];

function populateGrid() {
    var url = "sample.txt"; //Will be replaced with endpoint URL

    dojo.xhrGet({
        handleAs: 'json',
        url: url,
        error: function (e) {
            alert("Error: " + e.message);
        },
        load: showJsonData
    });
}

function showJsonData(response, ioArgs) {
    var profileStore = new dojo.data.ItemFileWriteStore({
        data: {
            items: response.items
        }
    });

    var sampleGrid = dijit.byId("sampleGrid");
    sampleGrid.store = profileStore;
    sampleGrid.startup();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:15:24.960

您需要使用**dojox.grid.TreeGrid**或“伪造”JSON 来为每个偶数行显示一个空白的 profileName。下面是两个示例，一个用于 TreeGrid，另一个用于 DataGrid - 但未在工作环境中测试。

给定**分层 JSON**：

```
{
  identifier: 'id' // a good custom to make an id pr item, note spaces and odd chars are invalid

      items: [{
         id: '1',
         profileName: 'Admin',
         profilePreferences: [
           { id: '1_1', displayText: 'John Doe', address: 'Big Apple' }
           { id: '1_2', displayText: 'Jane Doe', address: 'Hollywood' }
         ]

      }, {
         id: '2',
         profileName: 'Visitor',
         profilePreferences: [
           { id: '2_1', displayText: 'Foo', address: 'Texas' }
           { id: '2_2', displayText: 'Bar', address: 'Indiana' }
         ]

      }]
    } 
```

**树网格结构**：

```
{
    cells: [
      [
        { field: "profileName", name: "profileName", width: "100px" },
        { field: "profilePreferences",
          children: [
            { field: "displayText" name: "displayText", width: "100px" },
            { field: "address" name: "address", width: "100px" }
          ]
      ]
    ]
  } 
```

参考：[dojo 文档](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/TreeGrid.html)

给定**扁平的“假孩子”JSON**：

```
{
  identifier: 'id' // a good custom to make an id pr item, note spaces and odd chars are invalid

      items: [{
         id: '1',
         profileName: 'Admin', preferenceText: '', preferenceAddr: ''
     }, {
        id: '2', 
        profileName: '',      preferenceText: 'John', preferenceAddr: 'NY'
     }, {
         id: '3',
         profileName: 'Visitor', preferenceText: '', preferenceAddr: ''
     }, {

         id: '4',         // Not with '.' dot seperator like so
         profileName: '',    preference.Text: 'Jane Doe', preference.Addr: 'Hollywood'
     } ] 
```

**数据网格结构**：

```
[[
  {'name': 'Profilename', 'field': 'profileName', 'width': '100px'},
  {'name': 'User name', 'field': 'preferenceText', 'width': '100px'},
  {'name': 'Address', 'field': 'preferenceAddr', 'width': '200px'}
]] 
```

参考[道场文档](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html)

# java - 使用 JOptionPane 猜谜游戏 - Java

> ID：10388847
> 
> 赞同：1
> 
> 时间：2012-04-30T18:43:05.923
> 
> 标签：java, while-loop, joptionpane

所以我已经学习 Java 大约 8 周了，在课堂上我不得不设计一个形状猜谜游戏。是的，这是家庭作业。所以我用下面的一个例子构建了我的四个形状类。

```
public class square extends shape {

    //square member variables
    boolean equalSides = true;

    // check if sides are equal
    public boolean isEqual() {
        return equalSides;
    }

    //constructor
    public square(int numsides, String shapeName, boolean b, String shapehint) {
        super(numsides, shapeName, shapehint);
    }
} 
```

然后我创建了一个 shape.java 类

```
public class shape {

    int numSides;
    String shapeName;
    String shapeHint;

    public shape(int numsides, String shapename, String shapehint) {
        numSides = numsides;
        shapename = shapeName;
        shapehint = shapeHint;
    }

    //getter methods
    public int getSides() { 
        return numSides;
    }
    public String getName(){    
        return shapeName;
    }
    public String getHint(){
        return shapeHint;
    }
} 
```

现在我已经达到了我开始有点挣扎的 shapeGuesser 类。我不确定如何为我的游戏和它的 JOptionPane 端加入一个守卫。我需要 shapeGuesser 运行，直到用户猜出正确的形状。

我已被指示在开始时向用户展示此选项。

我要问什么问题？

输入数字： 1\. 几面？2.你的边长一样吗？3.提示

根据您输入的数字 1、2 或 3。系统将针对该形状询问该问题。因此，您的 Shape 必须准备好适当的响应。

```
import javax.swing.JOptionPane;
import java.util.Random;

public class shapeGuesser {
    public static void main(String[] args, Object Do) {
        // TODO Auto-generated method stub
        // the shape the program uses

        int random;         
        shape shapeChoice;      
        // create shapes
        square s = new 
                square(4, "Square", true, "Geeks were called this in the 80s");
        Rectangle r = new Rectangle(4, "Rectangle", false, "Not Pentangle");
        Triangle t = new Triangle(3, "Triangle",false, "Toblerone");
        Circle c = new Circle(0, "Circle",true, "Circle Circle Circle");

        //declare shape array
        shape[] Shapes;

        //create shape array
        Shapes = new shape[4];

        //put shape objects in shape array
        Shapes[0] = s;
        Shapes[1] = r;
        Shapes[2] = t;
        Shapes[3] = c;

        // generate random number
        random = (int) (1 + (Math.random() * 3));

        //pick shape from shape array based on random number
        shapeChoice = Shapes[random];               

    }

} 
```

任何读到这里的人，无论如何都可能有时间启发我。将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:12:51.117

isEqual() 需要在基类 shape 中实现，就像您要在所有形状上调用的**所有方法一样。**让基本形状返回 false。（理想的形状应该是抽象的，所以你不能有一个基本的形状对象，只有正方形，矩形等。但没关系，你是新手，没有其他人会使用它。所以你自己永远不能创建一个基本形状. 但是对于未来，这就是抽象的 ^^) 然后，让你所有的其他形状覆盖基础 isEqual() 就像你的正方形已经做的那样。

你做得很好！您选择了一个随机形状，并创建了许多形状。

现在创建一个打印选项的循环，

```
system.out.println("Enter Number: 1.How many sides? 2.Are your sides the same length? 3\. Hint"); 
```

然后获取用户输入，并将其解析为整数。有一个使用该整数的 if/else/else 或 switch/case。（或者，将 if/else/else 与字符串原样使用，但请确保使用 .equals() 而不是 ==）

所以现在你问了一个问题，并选择了一个。现在你打印出来

```
if(userInput.equals("1")){
system.outprintln("How many sides? " + shapeChoice.getSides());
} 
```

对 2 和 3 执行相同的操作。您将处理 shapeChoice，因此您必须调用 shape 的基本方法。但是，在运行时，如果对象是正方形或矩形，当您调用 shapeChoice.getSides() 时，它将调用正方形或矩形实现，给您想要的答案！:)

然后你所要做的就是循环回来，一遍又一遍地问这个问题，如果用户想，让他猜，然后检查他的答案！（比较 .equals（shapeChoice.getName())）

所以有一个很大的 while(true) 永远循环，在里面你可以问一个问题，然后检查他们是否想回答。如果他们回答正确，你就会爆发。否则，你会循环回来，不断询问他们想要哪个提示。

编辑：实际上，现在我看它，因为您正在练习多态性，您可能应该多用一点。现在，您有单独的类，但是在构造它们时您传递了所有信息。代替：

```
square s = new square(4, "Square", true, "Geeks were called this in the 80s");
Rectangle r = new Rectangle(4, "Rectangle", false, "Not Pentangle"); 
```

是否更像

```
square s = new square(); 
```

并且有部分 square 的定义固有地定义

```
public class square extends shape {
//square member variables
boolean equalSides = true;
int numSides = 4;
//and so on

//OR even better, don't define them, since the base class already does!
//merely set the values in the constructor
public square(){
       numSides = 4;
       equalSides = true;
       shapeHint = "Geeks were called this in the 80s";
    }
} 
```

每个方形对象都会这样，所以没有理由它应该是一个参数。这是正方形定义的一部分。

# java - 在 Java 代码中使用 Weka CSVLoader 时出现 Java IO 异常

> ID：10388848
> 
> 赞同：2
> 
> 时间：2012-04-30T18:43:09.520
> 
> 标签：java, csv, io, weka

我正在尝试使用 Java 代码自动化一些 Weka 分类。尝试读取 csv 文件时出现以下错误：

> java.io.IOException：值的数量错误。在 weka.core.converters.CSVLoader.getInstance(CSVLoader.java:747) 的 weka.core.converters.CSVLoader.getInstance(CSVLoader.java:747) 读取 98，预期 97，读取 Token[EOL]，第 3 行 weka.core.converters.ConverterUtils.errms(ConverterUtils.java:912) .core.converters.CSVLoader.getDataSet(CSVLoader.java:570) 在 Classifier_Search.readFile(Classifier_Search.java:18) 在 Classifier_Search.main(Classifier_Search.java:178) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at edu.rice.cs.drjava.model.compiler。 JavacCompiler.runCommand(JavacCompiler.java:271)

当我尝试通过 Weka GUI 输入 csv 文件时，我得到了同样的错误。据我所知，该 csv 文件与我在 Weka 中成功使用的其他 csv 文件没有什么不同。关于可能导致此错误的任何想法？

为此，我无法在 OldNabble 上找到令人满意的答案——我尝试了我设法找到的一个建议，但没有奏效。一个建议是将条目封装在双引号中 - 这并没有改变任何东西。

只是为了清楚起见（而且因为我不知道如何上传东西），csv 文件看起来像这样：

C1V1，C2V1，C3V1，...类，

4000.5, 3890.6, 2900.7, ... N,

...

...

每行有 97 个条目。在另一个版本中，我在字符串和字符（在第一行和最后一列）周围有双引号，正如我之前所说，这没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-30T09:06:30.490

我在使用 weka 工具时也遇到了同样的问题。我能够像这样解决它。

![在此处输入图像描述](../Images/13cd0c8a765c607d8944f1d9c6c333d0.png)

当你得到这种类型的异常。找到提示行上方的行。例如：在我的情况下，我被提示异常是由于 80542 行中的一些故障，所以我需要检查 80541 行。然后您可以看到该行中有一个额外的逗号或额外的双引号。删除多余的逗号或双引号并保存文件。再次运行它。然后它可以正常工作，没有任何异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T02:52:58.813

我发现了不同之处：如果 .csv 文件的行尾有逗号，则会导致 csvloader 抛出此错误。因此，如果您尝试使用它，请消除 .csv 文件中行尾的逗号。我不知道为什么只有第 3 行而不是第 1 行和第 2 行抛出错误（所有行都相同），但这修复了它。

# objective-c - 解析带有特殊字符的 XML 文件

> ID：10388850
> 
> 赞同：2
> 
> 时间：2012-04-30T18:43:11.223
> 
> 标签：objective-c, xml, ios5, xcode4.3

我尝试解析人员列表并用名称污染 UITableView。但是我要解析的人有特殊字符（ä、ö、ü）。现在，如果我开始解析名称“Gött”，那么它就是“ött”。真的很奇怪，有什么想法吗？非常感谢！

```
-(id) loadXMLByURL:(NSString *)urlString
{
    tweets          = [[NSMutableArray alloc] init];
    NSURL *url      = [NSURL URLWithString:urlString];
    NSData  *data   = [[NSData alloc] initWithContentsOfURL:url];
    parser          = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"lehrer"]) 
    {
        currentTweet = [Tweet alloc];
    }
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementname isEqualToString:@"name"]) 
    {
        currentTweet.content = currentNodeContent;
    }
    if ([elementname isEqualToString:@"vorname"]) 
    {
        currentTweet.vorname = currentNodeContent;
    }
    if ([elementname isEqualToString:@"created_at"]) 
    {
        currentTweet.dateCreated = currentNodeContent;
    }
    if ([elementname isEqualToString:@"lehrer"]) 
    {
        [tweets addObject:currentTweet];
        [currentTweet release];
        currentTweet = nil;
        [currentNodeContent release];
        currentNodeContent = nil;
    }
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) dealloc
{
    [parser release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-02T16:11:59.150

根据伍迪的回答，这是完全可以预料的。您将需要连接来自多个`- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string`调用的字符串。

正确的方法如下：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (currentElementContent== nil)
        currentElementContent = [[NSMutableString alloc] initWithString:string];
    else
        currentElementContent = [currentElementContent stringByAppendingString:string];
} 
```

无论如何，您应该始终在方法的最后设置`currentElementContent`to 。下面是一个示例：`nil``didEndElement`

```
- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    // Do what you want with the parser here

    // Set element content variable to nil
    currentElementContent = nil;
} 
```

您可能需要用`currentElementContent`您在解析器中使用的任何变量替换变量：以容纳在开始和结束标记之间找到的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T20:13:09.610

这是正常行为 - parser:foundCharacters 可以为一个字符串多次调用（并且往往是重音字符）。您的字符串直到元素末尾才完成，因此请存储它们并在到达块末尾时使用完整的字符串。它在 foundCharacters 的文档中

[NSXMLParser 上的 Apple 开发人员文档](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)

> 解析器对象可以向委托发送几个 parser:foundCharacters: 消息来报告元素的字符。因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

根据问题编辑：

一般的代码很好，但在字符函数中，做

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(nil == currentNodeContent)
        currentNodeContent = [[NSMutableString alloc] initWithString:string];
    else
        [currentNodeContent appendString:string];
} 
```

然后在 didStart 和 didEnd 中调用一个方法来检查字符串是否为 nil，首先执行您要对其执行的操作，然后释放字符串（并将其设为空）。

字符串在新元素的开头（即开头 < 之前的文本）和结尾（在

# html - 浮动的 CSS 2 列页面不起作用

> ID：10388852
> 
> 赞同：1
> 
> 时间：2012-04-30T18:43:20.130
> 
> 标签：html, css

我已经阅读了许多关于 CSS Float 的文章，但仍然无法让我的简单示例正常工作。我正在尝试使用此 html 在我的页面上获取 2 列：

```
<div id="mainContent" style="clear: both;">
  <div id="categoryColumn" >
    <h1 >
      Recipe Categories
      </h1>
      <ul>
        <li>cat1</li>
        <li>cat2</li>
        <li>cat3</li>
      </ul>
  </div>

  <div id="menuColumn">
    <h1>
      Weekly Menus
    </h1>
      <ul>
        <li>menu1</li>
        <li>menu2</li>
        <li>menu3</li>
        <li>menu4</li>
        <li>menu5</li>
      </ul>
  </div>
</div> 
```

这个CSS

```
#categoryColumn
{
    background-color: yellow;
  width: 500px;
  float: left;
}

#menuColumn
{
    background-color: red;
  width: 500px;

} 
```

我知道 div 被识别是因为颜色是正确的，但是这两个列表出现在彼此之上，而不是并排出现。我想在左边的顶部列（categoryColumn），在右边的底部。我用错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:47:44.670

float 也需要放在 menuColumn 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:49:28.823

将 float:left 添加到 #menuColumn - 请参阅[http://jsfiddle.net/UjLeK/](http://jsfiddle.net/UjLeK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:52:32.987

嘿 Brad Irby 需要将两个 div 相互浮动，只需检查一下... [http://jsfiddle.net/mnuVB/](http://jsfiddle.net/mnuVB/)

# c++ - 从 Matlab 调用 c++ .exe - 程序停止工作？

> ID：10388855
> 
> 赞同：0
> 
> 时间：2012-04-30T18:43:37.057
> 
> 标签：c++, build, exe, linker-errors

我用 C++ 编写了一个名为 FaceTracker.cpp 的代码，并在 Matlab 中编写了其他代码来进行一些分析和静态分析。

我需要做的是在 matlab 中添加一个按钮，在按下时调用 FaceTracker。我尝试使用以下命令：

```
 system (['FaceTracker.exe <' nameOfVideo]); 
```

但它不起作用。它打开 FaceTracker.exe GUI，然后停止！（就像 Internet Explorer 或任何其他程序有时会\挂起）带有消息“FaceTracker.exe 停止工作。

当我尝试从命令提示符运行 .exe 时，它​​向我显示以下错误：

```
 Assertion Faile: Type == IO::TRACKER ... Debug error! R6010 - abort() has been called. 
```

* * *

从我从答案\其他网站中了解到的是，我需要静态链接库。我在一个网站上读到我需要进行以下更改：

```
 The CRT:
 • Configuration Properties -> C/C++ -> Code Generation: Where it reads Runtime   Library, change to Multi-Threaded (/MT).

 The manifest must go:
 • Configuration Properties -> Manifest Tool -> Input and Output: Where it reads Embed Manifest, change to No. 
```

但是当我这样做（更改为/ MT）时，我开始收到以下错误：

```
1>  Generating Code... 1>LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library 1>libcpmtd.lib(xmbtowc.obj) : error LNK2001: unresolved external symbol __CrtDbgReportW 1>Tracker.obj : error LNK2019: unresolved external symbol __CrtDbgReportW referenced in function "public: void
__thiscall FACETRACKER::Tracker::Load(char const *)" (?Load@Tracker@FACETRACKER@@QAEXPBD@Z) 1>libcpmtd.lib(stdthrow.obj) : error LNK2001: unresolved external symbol __CrtDbgReportW 1>libcpmtd.lib(cout.obj) : error LNK2001: unresolved external symbol
__CrtDbgReportW 1>libcpmtd.lib(cin.obj) : error LNK2001: unresolved external symbol __CrtDbgReportW 1>IO.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>Patch.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>PAW.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>PDM.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>CLM.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>FaceTracker.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>FCheck.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>FDet.obj : error LNK2001: unresolved external symbol __CrtDbgReportW 1>libcpmtd.lib(cin.obj) : error LNK2001: unresolved external symbol
__free_dbg 1>libcpmtd.lib(xmbtowc.obj) : error LNK2001: unresolved external symbol __free_dbg 1>Tracker.obj : error LNK2001: unresolved external symbol __free_dbg 1>libcpmtd.lib(xdebug.obj) : error LNK2001: unresolved external symbol __free_dbg 1>libcpmtd.lib(locale0.obj) : error LNK2001: unresolved external symbol __free_dbg 1>libcpmtd.lib(cout.obj) : error LNK2001: unresolved external symbol
__free_dbg 1>IO.obj : error LNK2001: unresolved external symbol __free_dbg 1>Patch.obj : error LNK2001: unresolved external symbol __free_dbg 1>PAW.obj : error LNK2001: unresolved external symbol __free_dbg 1>PDM.obj : error LNK2001: unresolved external symbol __free_dbg 1>CLM.obj : error LNK2019: unresolved external symbol __free_dbg referenced in function "private: void __thiscall std::_Yarn<char>::_Tidy(void)" (?_Tidy@?$_Yarn@D@std@@AAEXXZ) 1>FaceTracker.obj : error LNK2001: unresolved external symbol
__free_dbg 1>FCheck.obj : error LNK2001: unresolved external symbol __free_dbg 1>FDet.obj : error LNK2001: unresolved external symbol __free_dbg 1>libcpmtd.lib(xdebug.obj) : error LNK2019: unresolved external symbol __malloc_dbg referenced in function "void * __cdecl operator new(unsigned int,struct std::_DebugHeapTag_t const &,char
*,int)" (??2@YAPAXIABU_DebugHeapTag_t@std@@PADH@Z) 1>libcpmtd.lib(locale0.obj) : error LNK2001: unresolved external symbol __malloc_dbg 1>libcpmtd.lib(xmbtowc.obj) : error LNK2001: unresolved external symbol __malloc_dbg 1>libcpmtd.lib(_tolower.obj) : error LNK2019: unresolved external symbol __calloc_dbg referenced in function __Getctype 1>C:\Users\wew\Documents\Jam3a\PROJECT-2012!!\FindSymetryInFaces\FaceTracker\Debug\FaceTracker.exe : fatal error LNK1120: 4 unresolved externals 
```

有什么建议么？为了能够在每台计算机上使用 FaceTracker.exe，我必须做什么，以及那些没有 c++\vs 编译器的计算机？

此外，为什么当我从 matlab 调用它时我的程序会打开，然后挂起\停止工作？预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:15:43.673

您的应用程序不需要安装整个 Visual C++ 编译器，只需要安装运行时库。Microsoft 有一个免费的可再发行组件，可以将此运行时库添加到任何计算机。您可以在 Visual C++ 安装路径中找到 vcredist_x86.exe，或从[http://www.microsoft.com/en-us/download/details.aspx?id=8328下载](http://www.microsoft.com/en-us/download/details.aspx?id=8328)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:16:23.110

这几乎可以肯定与调试与发布或是否启用 mt 无关。您不是在制作 matlab 扩展，只是使用命令行中的二进制文件。如果程序在您从命令行输入内容时可以工作，那么在从 Matlab 调用时它应该可以工作，除非您的内存不足（也极不可能）。

我会检查 . .

```
['FaceTracker.exe < ' InputVid] 
```

...并将字符串直接复制并粘贴到命令行（系统，而不是 Matlab）中，看看是否可以复制错误。该错误很可能发生，因为您的 exe 没有很好地处理文件字符串。

尝试将 inputvid、调用 m 文件和 FaceTracker.exe 放在工作目录中，以制作最简单的场景。如果可行，请将输入 vid 放入另一个目录并从那里寻找错误，从而使事情变得更复杂。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:53:43.950

我认为这个 exe 文件依赖于其他一些库。您应该将它们复制到系统参数 PATH 中的目录之一。或者您可以在构建项目时使用静态链接选项。

# classpath - 无法初始化类 com.tridion.storage.StorageManagerFactory

> ID：10388863
> 
> 赞同：1
> 
> 时间：2012-04-30T18:44:10.117
> 
> 标签：classpath, tridion, dd4t

我正在使用 Tridion 2011 实现 DD4T MVC3。我已经实现了它，并且它工作正常，直到上周五。我能够获取页面模型并使用 Razor 视图呈现它。

但是今天周末之后，当我尝试运行同一个应用程序时，我收到了以下错误（从两行开始）。

Tridion 许可证将于今天（2012 年 4 月 30 日）到期。这会是个问题吗？但是 Tridion Content Manager 工作正常。

```
Could not initialize class com.tridion.storage.StorageManagerFactory
================================================

Some configured classpath roots cannot be found

================================================

   ClassPath           : C:\MyProjects\DD4TMVC\FirstDD4TMVCApplication\FirstDD4TMVCApplication\bin\bin

============================================================
Some Java classes or interfaces could not be found or loaded

The most typical reasons for this problem are:

- you forgot to configure a classpath
- a jarfile, zipfile, or directory is missing from your
  classpath
- you have a typo in one of your classpath entries
- a jarfile required by one of your classes is missing from
  your classpath
- a jarfile on your classpath is out-of-date and does not
  contain some new classes

============================================================

 com.tridion.web.asp.ASPAdmin
 com.tridion.web.jsp.tag.DynamicComponentLinkHandler
 com.tridion.web.jsp.tag.IncrementKeyHandler
 com.tridion.webservices.odata.ODataPublicationMappingFilter
 com.tridion.web.jsp.tag.ConditionHandler
 com.tridion.web.jsp.ResponseWrapper
 com.tridion.web.jsp.tag.ConditionsHandler
 com.tridion.linking.Linking
 com.tridion.storage.StorageManagerFactory
 com.tridion.web.jsp.tag.ComponentLinkHandler
 com.tridion.web.jsp.tag.ComponentPresentationHandler
 com.tridion.web.Admin
 com.tridion.webservices.odata.ODataContextListener
 com.tridion.web.jsp.JSPProcessor
 com.tridion.web.jsp.tag.TargetGroupHandler
 com.tridion.linking.ASPLinking
 com.tridion.web.jsp.tag.BinaryLinkHandler
 com.tridion.ambientdata.web.AmbientDataServletFilter
 com.tridion.webservices.security.authentication.OAuth2AccessTokenHandler
 com.tridion.web.jsp.JSPXSLTProcessor
 com.tridion.web.jsp.tag.PageLinkHandler
 com.tridion.web.jsp.tag.TaxonomyHandler
 com.tridion.web.jsp.tag.LinkBaseHandler 
```

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:59:06.767

我建议您先获得一个新的 SDL Tridion Content Delivery 许可证，如果您仍有问题，请联系我们。这似乎是一个可能的罪魁祸首。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T07:40:45.187

我们仅通过替换许可证文件解决了类似问题。

谢谢，维卡斯库马尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:04:41.273

**如果**更改许可证没有帮助，请检查日志是否有`ClassDefNotFound`错误或`ClassNotFoundException`异常。Core 日志或 Tridion 事件日志非常适合包含这些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T13:18:10.800

如果不是上面提到的license，请确保存储配置文件cd_storage_conf.xml中的所有设置都有效。当缺少数据库信息时，我看到了同样的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-19T10:03:13.020

实际上，过期的 cd_licenses 会导致此问题。

我今天看到的是这样的：

```
ERROR - <JavaException  <Type>java/lang/NoClassDefFoundError</Type<Message>     <![CDATA[Could not initialize class com.tridion.storage.StorageManagerFactory
================================================ 
Some configured classpath roots cannot be found
================================================ 
```

所以完美的解决方案是更改具有良好有效性的 cd_licenses 文件。

# php - 打开和读取 2GB 的 csv

> ID：10388868
> 
> 赞同：1
> 
> 时间：2012-04-30T18:44:26.307
> 
> 标签：php, csv

我在打开和读取 2gb csv 文件的内容时遇到问题。每次我运行脚本时，它都会耗尽服务器内存（10GB VPS 云服务器），然后被杀死。我制作了一个测试脚本，想知道是否有人可以查看并确认我在这里没有做任何愚蠢的事情（php 明智），这会导致看起来和异常高的内存使用量。我已经和我的托管公司谈过了，但他们似乎认为这是一个代码问题。所以只是想知道是否有人可以查看这个并确认代码中没有任何内容会导致这种问题。

另外，如果您处理 2GB 的 csv，您以前遇到过这样的事情吗？

谢谢

蒂姆

```
<?php

ini_set("memory_limit", "10240M");

$start = time();
echo date("Y-m-d H:i:s", $start)."\n";

$file = 'myfile.csv';

$lines = $keys = array();
$line_count = 0;
$csv = fopen($file, "r");

if(!empty($csv))
{
    echo "file open \n";

    while(($csv_line = fgetcsv($csv, null, ',', '"')) !== false)
    {
        if($line_count==0) {
            foreach($csv_line as $item) {
                $keys[] = preg_replace("/[^a-zA-Z0-9]/", "", $item);    
            }
        } else {
            $array = array();
            for ($i = 0; $i <count($csv_line); $i++) {
                $array[$keys[$i]] =  $csv_line[$i]; 
            }
            $lines[] = (object) $array;

            //print_r($array);
            //echo "<br/><br/>";
        }
        $line_count++;
    }

    if ($line_count == 0) {
        echo "invalid csv or wrong delimiter / enclosure ".$file;
    }

} else {
    echo "cannot open ".$file;
}
fclose ($csv);

echo $line_count . " rows \n";

$end = time();
echo date("Y-m-d H:i:s", $end)."\n";

$time = number_format((($end - $start)/60), 2);

echo $time."\n";

echo "peak memory usages ".memory_get_peak_usage(true)."\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:52:52.403

它实际上不是一个“开放”问题，而是处理问题

我相信您不需要像现在那样将所有已解析的行保留在内存中。

为什么不把解析后的行放在它所属的任何地方——数据库或另一个文件或任何东西？

它将使您的代码一次只保留在内存中的一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:12:24.190

正如其他人已经指出的那样，您正在将整个 2 GB 文件加载到内存中。您在创建每行包含多个字符串的数组时执行此操作，因此实际上所需的结果内存大于普通文件大小。

您可能希望单独处理 CSV 文件的每一行，最好使用迭代器，例如将每一行作为键控数组返回的迭代器：

```
$csv = new CSVFile('../data/test.csv');

foreach ($csv as $line) {
    var_dump($line);
} 
```

这里的示例输出：

```
array(3) {
  ["Make"]=> string(5) "Chevy"
  ["Model"]=> string(4) "1500"
  ["Note"]=> string(6) "loaded"
}
array(3) {
  ["Make"]=> string(5) "Chevy"
  ["Model"]=> string(4) "2500"
  ["Note"]=> string(0) ""
}
array(3) {
  ["Make"]=> string(5) "Chevy"
  ["Model"]=> string(0) ""
  ["Note"]=> string(6) "loaded"
} 
```

这个迭代器的灵感来自于 PHP 中内置的一个叫做`SPLFileObject`. 由于这是一个迭代器，您可以决定如何处理每一行/行的数据。请参阅相关问题：[Process CSV Into Array With Column Headings For Key](https://stackoverflow.com/q/10181054/367456)

```
class CSVFile extends SplFileObject
{
    private $keys;

    public function __construct($file)
    {
        parent::__construct($file);
        $this->setFlags(SplFileObject::READ_CSV);
    }

    public function rewind()
    {
        parent::rewind();
        $this->keys = parent::current();
        parent::next();
    }

    public function current()
    {
        return array_combine($this->keys, parent::current());
    }

    public function getKeys()
    {
        return $this->keys;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:07:23.820

PHP 确实是错误的语言。字符串操作通常会导致在内存中分配字符串的副本，并且垃圾收集只会在脚本结束时发生，当它真的不再需要时。如果你知道怎么做，并且它适合执行环境，那么你最好使用 perl 或 sed/awk。

话虽如此，脚本上有两个内存猪。第一个是 foreach，它复制数组。对 array_keys 执行一次 foreach，然后返回数组中的字符串条目以获取行。第二个是@YourCommonSense 提到的：你应该设计你的算法，使它在流模式下工作（即不需要将完整的数据集存储在内存中）。粗略一看，似乎可行。

# java - 从一组条件中查找选定匹配症状的算法

> ID：10388869
> 
> 赞同：2
> 
> 时间：2012-04-30T18:44:27.073
> 
> 标签：java, algorithm

我有一个数据库，其中有一个存储医疗状况的表和另一个存储症状的表。每种情况都有许多症状。用户将从数据库中选择一些症状，算法将找出每个条件有多少症状匹配。我想返回每个匹配条件和匹配症状的数量，例如 Cold 4/8

这是一个非常简单的想法，尽管我很难计算出伪代码/算法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:57:22.550

如果您必须从头开始编写代码（例如，在家庭作业中），那么您可能需要查看 Rete 算法。它将尝试帮助您进行最少数量的测试以得出给定的结论。如果您只是采用蛮力解决方案，即查看一堆不同的医疗状况和每种症状的一组症状，然后滚动测试每种症状的每种症状并为其分配分数，那么您最终会测试许多相同的症状不同条件下的时间。流鼻涕、咳嗽等可能会出现在数百种症状列表中。Rete 攻击只测试每个症状一次，然后得出结论。

但是，如果您不必从头开始构建它，那么您可能希望查看像 Drools 或 Jess 这样的现成解决方案，它为您提供了一个规则引擎，可以轻松构建您想要的那种数据库。他们还内置了 Rete 算法（或类似的算法），以在面对潜在的大量规则时优化其性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:05:32.960

Java中的伪代码

```
enum Condition {
    CONDITON_1, CONDITION_2, CONDITION_N;
}

enum Symptom {
    SYMPTOM_1, SYMPTOM_2, SYMPTOM_N;
}

public static final int SYMPTOM_COUNT = Symptom.values().length;

static final Map<Condition, Set<Symptom>> MAP = new EnumMap<Condition, Set<Symptom>>(Condition.class);

static {
    MAP.put(Condition.CONDITON_1, EnumSet.of(Symptom.SYMPTOM_1));
    MAP.put(Condition.CONDITION_2, EnumSet.of(Symptom.SYMPTOM_1, Symptom.SYMPTOM_2));
    MAP.put(Condition.CONDITION_N, EnumSet.of(Symptom.SYMPTOM_2, Symptom.SYMPTOM_N));
}

public static void findMatches(Set<Symptom> symptoms) {
    for (Map.Entry<Condition, Set<Symptom>> entry : MAP.entrySet()) {
        Set<Symptom> matches = EnumSet.copyOf(entry.getValue());
        matches.retainAll(symptoms);
        System.out.println(entry.getKey() + ": " + matches.size() + " / " + SYMPTOM_COUNT);
    }
}

public static void main(String... _) {
    findMatches(EnumSet.of(Symptom.SYMPTOM_2, Symptom.SYMPTOM_N));
} 
```

印刷

```
CONDITON_1: 0 / 3
CONDITION_2: 1 / 3
CONDITION_N: 2 / 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:53:57.390

对于每个症状存储一个条件列表。当您看到一个症状时，增加所有相应条件的计数。

Python 示例：让“A”、“B”和“C”为条件，“X”、“Y”和“Z”为症状。

```
symptom = {'X':['A','B'], 'Y':['A','B','C'], 'Z':['A','C'] }

def condCount(userSymptoms):
    condCnt= {}

    for sym in userSymptoms:
        for i in symptoms['sym]:
            condCnt[i]=condCnt.get(i,0)+1
    return condCnt

condCount(['X','Y'])
Answer: {'A':2,'B':2,'C':1} 
```

# scala - 在 servlet 环境中使用惰性 val 缓存 Scala 语句

> ID：10388876
> 
> 赞同：1
> 
> 时间：2012-04-30T18:45:05.870
> 
> 标签：scala, caching, lazy-evaluation

**编辑**
RTFM 是 JVM 的新手，错误地假设 servlet 容器（在本例中为 Jetty）为每个请求创建一个新的 servlet 实例：完全错误。

所以，下面的问题是没有实际意义的，上面肯定了惰性 val 确实是“永远”的事实（或者只要定义惰性 val 的实例继续存在）

**ORIGINAL** 正如我[现在所了解](https://stackoverflow.com/questions/10025567/scala-web-lazy-val-scope-lifetime)的，在基本的 servlet 环境中，我们从每个 HttpRequest 的全新状态开始。

这意味着*每个请求都会重新产生惰性验证开销*。

我关心的一个特殊问题是数据库查询语句缓存（通过惰性验证）以及这是否会导致不必要的性能损失；即，在应用服务器上缓存查询语句的意义何在？

是的，使用连接池可以缓存独立于请求范围的查询语句，大加；但是，这并不能解决问题，即在每个请求上，一个 ORM/JDBC-Wrapper 都将经历相对昂贵的生成查询语句的操作，无论是否缓存。

所以问题是：在 servlet 环境中，查询缓存的障碍多于帮助？（我正在使用 ScalaQuery，它通过惰性 val 缓存查询）

唯一看起来有好处的情况是，当您在同一个请求中多次调用给定查询时，但这是我很少做的事情（主要是*每次只运行一次 Foo 或 List[Foo] 的查询）请求*）

# android - ArrayAdapter 中各个视图的 OnClickListener 混淆了

> ID：10388880
> 
> 赞同：0
> 
> 时间：2012-04-30T18:45:58.417
> 
> 标签：android, android-listview, android-arrayadapter, onclicklistener

每当我单击`ImageView`具有 的`OnClickListener`时，我都会在屏幕底部获得`URL`那个用于下一个的对象，该对象`View`尚未出现在屏幕上。

```
 public View getView(int position, View convertView, ViewGroup parent){
    View rowView = convertView;

    if(rowView == null){
        rowView = inflater.inflate(R.layout.listitem, null);

        //Creëer een Viewholder om alles statisch op te slaan in het geheugen
        holder = new ViewHolder();
        holder.title = (TextView) rowView.findViewById(R.id.title);
        holder.subreddit = (TextView)rowView.findViewById(R.id.subreddit);
        holder.source = (TextView)rowView.findViewById(R.id.source);
        holder.score = (TextView)rowView.findViewById(R.id.score);
        holder.image = (ImageView)rowView.findViewById(R.id.imageView1);
        holder.image.setTag(position);
        rowView.setTag(holder);
    }
    else{
        holder = (ViewHolder) rowView.getTag();
    }

    holder.image.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            Intent i = new Intent();
            i.setAction("com.tolgap.json.TEST");
            i.putExtra("page", holder.thing.url);
            context.startActivity(i);
        }

    });

    holder.thing = gegevens.get(position).data;
    holder.title.setText(holder.thing.title);
    holder.subreddit.setText(holder.thing.subreddit);
    holder.source.setText(holder.thing.domain);
    holder.score.setText(holder.thing.score);
    holder.image.setImageBitmap(plaatjes.get(position));        

    return rowView;
} 
```

这是代码`ViewHolder`：

```
static class ViewHolder{
    Result thing;
    TextView title;
    TextView subreddit;
    TextView source;
    TextView score;
    ImageView image;
} 
```

我已经阅读了一些关于使用该`setTag()`方法的内容，并且我已经尝试过这个，但我并没有完全理解我必须作为标签放置的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:00:34.373

`Result`将数据对象存储在 中是没有意义的`ViewHolder`：

```
static class ViewHolder{
    TextView title;
    TextView subreddit;
    TextView source;
    TextView score;
    ImageView image;
} 
```

`getView()`方法：

```
//...
else{
    holder = (ViewHolder) rowView.getTag();
}
Result obj = gegevens.get(position).data;
holder.image.setTag(obj.url); // It's a String I guess?!?
holder.image.setOnClickListener(new OnClickListener(){

    @Override
    public void onClick(View v) {
        String toPass = (String) v.getTag();
        Intent i = new Intent();
        i.setAction("com.tolgap.json.TEST");
        i.putExtra("page", toPass);
        context.startActivity(i);
    }

});
holder.title.setText(obj.title);
holder.subreddit.setText(obj.subreddit);
holder.source.setText(obj.domain);
holder.score.setText(obj.score);
holder.image.setImageBitmap(plaatjes.get(position)); 
return rowView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:53:49.190

你在哪里声明持有者变量？将其设为局部最终变量，看看是否能解决您的问题。

# c++ - 将值返回给 C++ 中的类对象

> ID：10388882
> 
> 赞同：0
> 
> 时间：2012-04-30T18:46:25.497
> 
> 标签：c++, class, object

我有一个头文件：

```
using namespace std;

class IntList{
private:
    int *Intl;
    int Capacity;
    int Count;
public:
    IntList(int capacity){
        Capacity = capacity;
        Count = 0;
        Intl = new int[capacity];
    }

    ~IntList(){
        delete Intl;
    }

    //adds the integers of the specified collection to the end of the List; return false if the new Count will be greater than Capacity
    bool AddRange(const IntList &items){
        //int *Temp = items.;
        if(items.Count > Capacity - Count){
            return false;
        }else{
            for(int i = 0; i <items.Count; i++){
                Intl[Count] = items.Intl[i];
                Count++;
            }
            return true;
        }
    }
}; 
```

但我不知道为什么我不能在那里将值返回给 IntList 对象：

```
//creates a copy of a range of elements in the source List
        IntList GetRange(int index, int count){
            IntList A(count);
            for(int i = 0; i < count; i++){
                A.Intl[i] = Intl[index -1 +i];
            }   
            return A;
        } 
```

我想返回`A`其类型的值，`IntList`但我在 Visual Studio 2010 中遇到错误`"_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)`。我该如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:47:38.597

因为`int *Intl;`是您手动管理的对象，所以您需要为您的类实现复制构造函数。

该函数`GetRange`按值返回。本地对象`A`被销毁，它的成员`Intl`在析构函数中被删除，所以你的副本（由默认的复制构造函数复制）只是一个浅的，并且将包含一个无效的成员。

编辑：正如 Rob 正确指出的那样，您还需要实现赋值运算符（您已经有一个析构函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:21:24.310

对于由值返回的对象，调用`copy-constructor .`您必须创建一个复制构造函数并定义它，以便获得适当的结果。通过引用返回实际上不需要调用复制构造函数，但不应该用于临时对象。另外，由于您在 class 中有一个指针类型作为成员变量。让运算符重载是合适的`=`。应该正确定义以避免`memory leak`. 做这样的事情`Intlist a=GetRange(index,count)`。您还应该为此创建一个复制构造函数。您的代码还有一个错误，即它不会`=`为类 Intlist 重载运算符。

您可以编写一个类似这样的复制构造函数：-

```
 Intlist::Intlist(const Intlist& cSource)
   {         
     capacity = cSource.capacity; 
     count=  cSource.count;
    // Intl is a pointer, so we need to deep copy it if it is non-null
    if (cSource.Intl)
     {
       // allocate memory for our copy
      Intl = new int[capacity];

    // Copy the Intl into our newly allocated memory in for loop
     for(i=0;i<capacity;i++)
     {
       // copy part
      }
    }
    else
    intl = NULL;
  } 
```

只是一个例如你应该如何写它。

# gwt - selenium 是否支持安装了 google frame add 的 IE？

> ID：10388884
> 
> 赞同：1
> 
> 时间：2012-04-30T18:46:34.760
> 
> 标签：gwt, google-chrome, selenium-rc, selenium-webdriver, selenium-chromedriver

Selenium 能够加载 Chrome Frame 页面。问题是，一旦您使用 Chrome Frame 插件在 IE 中加载页面，标签就会显示为空。Selenium 尝试使用 DOM 结构来识别元素，但 IE 和 Chrome Frame 插件的工作方式、渲染和 DOM 树被 Chromium 代码接管，IE 得到一个空的 DOM。

所以我猜，selenium 不支持安装了谷歌框架插件的 IE？

有没有人解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:10:43.847

这个问题已在 Selenium 用户的邮件列表中[提出并回答。](https://groups.google.com/forum/?fromgroups#!topic/selenium-users/Yh5DlaPdlhA)IE 驱动程序不适用于 Google Chrome Frame 插件，并且没有计划实施支持它以与 Chrome Frame 插件一起使用。要么你想在 Chrome 下测试你的网站的运行（在这种情况下你应该使用 ChromeDriver），或者你想在 IE 下测试它（在这种情况下你应该使用 IE 驱动程序）。如果您可以指出使用带有 Chrome Frame 插件的网站的行为与使用 Chrome 独立浏览器的行为方式不同的特定情况，您也许可以提出一个案例来重新审视这个问题。此外，请记住 Selenium 是一个开源项目，欢迎您随时对代码进行更改和提交补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:38:54.167

Watir WebDriver 也有同样的问题。

Selenium 核心，在目标浏览器中加载并执行测试的部分确实可以工作并且可以独立运行。因此，如果您有一个 HTML 形式的 Selenium 测试套件，它可以使用以下步骤在 GCF 中运行：

1.  配置 Web 服务器以使用 HTTP 标头将所有 URL 选择到 chrome 框架中，如下所述：http: [//www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Making-Your-Pages-与谷歌合作-](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Making-Your-Pages-Work-With-Google-)
2.  在此 Web 服务器上的“/tests”文件夹下托管您的测试套件。假设套件是 my_test_suite.html。
3.  将 selenium 核心文件夹作为服务器上的“/core”托管
4.  现在重新启动服务器。
5.  使用以下 URL 运行套件：http:///core/TestRunner.html?test=tests/my_test_suite.html&auto=true

# html - HTML5 Flexbox 可以在两个轴上拉伸吗？

> ID：10388886
> 
> 赞同：2
> 
> 时间：2012-04-30T18:46:44.403
> 
> 标签：html, flexbox

我有一个允许单个子元素的 flexbox div。到目前为止，我已经能够很好地对齐孩子（上、左、右、下等），包括垂直拉伸。我还希望能够在垂直拉伸的同时支持水平拉伸（“同时”似乎是关键）。

我已经能够通过在子元素上将“flex”属性设置为“1 100%”来完成水平拉伸，但这似乎忽略了应用于父元素的任何填充（以及应用于子节点的任何边距）事情）。

查看 flexbox 规范，我无法找到任何其他方法来沿着 flexbox 的主轴执行此操作。横轴拉伸没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:56:55.333

有可能的。这是一个小样本，向您展示如何：

```
.centerbox {
  /* basic styling */
  width: 350px;
  height: 95px;
  font-size: 14px;
  border: 1px solid #555;
  background: #CFC;
  /* flexbox, por favor */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-pack: center;
  -webkit-box-align: center;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-pack: center;
  -moz-box-align: center;
  display: box;
  box-orient: horizontal;
  box-pack: center;
  box-align: center;
}
```

```
<!DOCTYPE html>
<html>

<head>
  <style>
    .centerbox {
      /* basic styling */
      width: 350px;
      height: 95px;
      font-size: 14px;
      border: 1px solid #555;
      background: #CFC;
      /* flexbox, por favor */
      display: -webkit-box;
      -webkit-box-orient: horizontal;
      -webkit-box-pack: center;
      -webkit-box-align: center;
      display: -moz-box;
      -moz-box-orient: horizontal;
      -moz-box-pack: center;
      -moz-box-align: center;
      display: box;
      box-orient: horizontal;
      box-pack: center;
      box-align: center;
    }
  </style>
</head>

<body>
  <div class="centerbox">
    <textarea>resize me, please</textarea>
  </div>
</body>

</html>
```

仅供参考：Axel Russell 在编写多浏览器支持类方面做了一些出色的工作：http: [//infrequently.org/2009/08/css-3-progress/](http://infrequently.org/2009/08/css-3-progress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:47:12.257

尽管您找到了解决方案，但我认为下一个片段对于所有搜索通用解决方案的开发人员（例如我自己）来说可能很方便。 [http://jsfiddle.net/EL2KL/1/](http://jsfiddle.net/EL2KL/1/) 如果您发布解决方案的小提琴，我会很高兴。

ps 感谢 Jiri（flex 大师）

# macos - Mac - 虚拟串口

> ID：10388889
> 
> 赞同：4
> 
> 时间：2012-04-30T18:46:49.333
> 
> 标签：macos, serial-port, iokit

我需要创建一个 Cocoa 应用程序，它将创建一个可用于其他应用程序的虚拟串行端口，这意味着在 IO Kit Registry 中注册。

该应用程序的要点：

*   创建一个虚拟串口（在 /dev 中列出并在 IOKit Registry 中注册）
*   启动到另一台计算机的 tcp 连接
*   将虚拟串行端口上收到的所有内容代理到网络，反之亦然。

此应用程序将由与计算机上的串行端口通信的第三方应用程序使用，从而允许在网络上定位特定的串行设备。Cocoa 和网络部分没有问题，我已经编写了几个通过网络通信的应用程序。我的挂断是串口。

我已经使用 socat/netcat/minicom 进行了测试，以验证它是否可以通过网络代理 pty/tty 流量，但我使用的 tty 并没有显示为可供随机应用程序使用，因为它没有在 IO Kit 中注册注册表。

虽然我可以使用 pty/tty 主/从进行通信，但我需要这个从 tty 才能显示给 Mac 应用程序。非常方便的是在 IO Kit Registry 中注册 tty 的方法。

我真的需要创建一个在 Cocoa 应用程序运行时注册的自定义 IOKit kext 驱动程序吗？如果是这样，我前面有一个很大的学习曲线。我应该从哪里开始阅读？或者，我可以使用 IOKit 创建一个虚拟串行端口并将其注册为应用程序的可用串行端口，而无需加载任何内核扩展？

感谢您提供的任何帮助，
有状态的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:39:05.117

首先，您是否检查过是否可以从[该应用中借用解决方案？](https://github.com/clokey/PublicCode/tree/master/MacOSXVirtualSerialPort)从网站上看，他们是否设法将虚拟串行端口完全集成到系统中并不明显。

如果有办法从用户空间做到这一点，我不知道。用户空间 IOKit API 通常不允许您创建类实例，更不用说新的设备驱动程序类了。也许您可以以其他方式说服 Cocoa 库找到它，尽管它没有在内核中注册。

我不知道您是否可以在内核中创建一个“虚拟”串行端口，然后将您的 tty 从您的用户空间守护进程移到 /dev 中的位置。也许这是一个选择。

**如果您必须在内核中完成所有操作：**

至少，虚拟驱动程序本身不应该做*太多*的工作，尽管它需要一些时间来跟上内核开发的速度。不幸的是，串行端口驱动程序的文档非常薄——关键是`IOSerialDriverSync`抽象类的子类化。我看到的唯一描述是在 Ole Henry Halvorsen 的*OSX 和 iOS 内核编程*一书中。它还有一个用于读写操作的示例片段。（**披露：**我是这本书的技术审阅者之一；我没有收到任何推荐它的动机 - 在这种情况下，它实际上是我所知道的唯一文档）你可以在[Apple 的USBCDC 驱动程序](http://opensource.apple.com/source/AppleUSBCDCDriver/AppleUSBCDCDriver-4115.4.1/AppleUSBCDCDMM/)，`AppleUSBCDCDMM`是实际代表串口节点的类。

在内核中打开一个所谓的[“内核控制”](http://developer.apple.com/documentation/Darwin/Conceptual/NKEConceptual/control/control.html)套接字相对简单，各个 API 都[在此处记录](http://developer.apple.com/documentation/Darwin/Reference/KernelIOKitFramework/kern_control_h/index.html)；在用户空间中，您使用普通的 BSD 套接字`send`/ `recv`API。（这在前面的书中也有描述）然后你的守护进程可以连接到那个，你需要做的就是在套接字和虚拟串行端口设备之间推送数据。当然，您需要正确处理断开连接事件等。

尽管如此，我认为对于有经验的 C 程序员（使用一些 C++）来说，这是可以实现的第一个内核项目。

我希望这会有所帮助！

# tomcat - Tomcat 记录 http 请求并调用 java 代码

> ID：10388893
> 
> 赞同：1
> 
> 时间：2012-04-30T18:47:17.450
> 
> 标签：tomcat, groovy, groovlet

我有一个用 Groovy 编写并在 Tomcat 6.0 上部署为 groovlet 的小项目。我现在的问题是我需要监视所有传入的请求并在每个请求上执行自定义日志记录。

首先，我想在每个类中包含一个输出我需要的短代码，但后来我想可能是 Tomcat 可以将每个传入的 http 请求发送/复制到我的自定义日志记录类，它会根据我的喜好对其进行解析并执行更多操作。

有可能这样做吗？如果有怎么办？

PS：Tomcat 必须是原始的 - 没有修改/自定义编译。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:53:37.007

您可以添加一个自定义[过滤器](http://docs.oracle.com/cd/E17802_01/products/products/servlet/2.5/docs/servlet-2_5-mr2/javax/servlet/Filter.html)来进行日志记录。

这是一个示例过滤器实现：

```
public class YourFilter implements Filter {

    public void init(FilterConfig filterConfig) throws ServletException {
        // do your initialization here
    }

    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)
        throws IOException, ServletException {
        // do your custom logging here
    }

    public void destroy() {
        // do whats necessary on end of life
    }
} 
```

在 web.xml 中配置/激活过滤器。

```
...
<filter>
    <filter-name>yourFilter</filter-name>
    <filter-class>org.example.YourFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>yourFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>  
... 
```

# jquery - 使用 JQuery 查找 td 标记的内容

> ID：10388901
> 
> 赞同：0
> 
> 时间：2012-04-30T18:47:54.470
> 
> 标签：jquery

我正在学习 JQuery 并尝试获取特定 td 标记的内容。这是我的表格，这是我尝试获取内容的代码。如果您能指出我做错了什么，将不胜感激。当我单击按钮时，警报消息给我一个空白。

```
<table>
  <tr>
     <td>&nbsp;</td>
     <td class="hamburger">Hamburger</td>
     <td>&nbsp;</td>
     <td>&nbsp;</td>
  </tr>
</table> 
```

**查询：**

```
alert($("#hamburger").text); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:49:08.380

选择器中的`'#'`字符是通过 id 选择一个元素。
你应该这样写你的选择器：`'.hamburger'`

此外，您正在使用的“文本”方法需要像这样调用：`$('.hamburger').text()`

在选择器的开头使用 ' `.`' (**点**) 字符，表示您正在通过其类名查找元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:49:12.233

`text`是一个函数，所以你需要把它作为一个函数来调用：

```
alert( $('.hamburger').text(); 
```

此外，您尝试将其引用`hamburger`为 ID，而不是类；请参阅上面我如何使用点而不是哈希来选择它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:49:20.733

用。。。来代替 。在您的选择器中。# 用于标识

```
$(".hamburger").text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:49:43.983

`hamburger`是一个类名，所以使用 . 供选择。文字是一种方法。不是财产。

```
 alert($(".hamburger").text()); 
```

示例：http: [//jsfiddle.net/yAqLU/1/](http://jsfiddle.net/yAqLU/1/)

使用**dot**选择 CSS 类名

使用**#**选择元素 ID

# javascript - getCurrentPosition phonegap (cordova 1.6) onSuccess 永远不会触发（但 iphone 设备和 sim 工作完美）

> ID：10388902
> 
> 赞同：0
> 
> 时间：2012-04-30T18:47:57.777
> 
> 标签：javascript, jquery-mobile, cordova

我使用cordova 1.6.1 并尝试访问gps。但是 onSuccess 函数永远不会触发或 onError 。GPS已打开并且信号在那里（同时使用地图测试）。代码必须是正确的，因为我为相机使用了相同的 eventListener。相机与 onSuccess/onError 功能完美配合。

我使用 Android 4.0.4 运行 Nexus S。顺便说一句，我在 iPhone 设备和模拟器上测试了相同的代码，它可以完美运行，但不能在 Nexus S 上运行。Android 实现电话差距有什么问题吗？这是 index.html 的一部分：

```
 <body>
  <script type="text/javascript">
    document.addEventListener("deviceready", onDeviceReady, false);
function onSuccess(position) {
   alert("onSuccess");  
   $("#lat").html(position.coords.latitude);
   $("#lon").html(position.coords.longitude);   
    }

    function onError(error) {
        alert("ERROR= " + error.message + "ERROR code= " +error.code );
    }
    function onDeviceReady() {
        //navigator.camera.getPicture(onSuccess, onError, { quality: 20, destinationType: Camera.DestinationType.FILE_URI, encodingType: Camera.PictureSourceType.PHOTOLIBRARY });
      navigator.geolocation.getCurrentPosition(onSuccess, onError);

    }   
</script> 

     <p id="lat"></p>
     <p id="lon"></p>   

</body> 
```

我还测试了 watchPosition 功能，但它在 Nexus S 上也不起作用（也使用 enableHighAccuracy: true 选项和其他选项，但没有成功）。

谢谢！

Edit1： GPS 符号也开始闪烁，然后在 1 分钟左右后出现，但仍然没有 onSussess！

Edit2：这是来自设备的日志。它在 sql 数据库中具有权限，但我已将所有位置权限添加到 AndroidManifest.xml 中。-----REAAAAAAAAAADYYYYYYYYYY 字符串来自 onDeviceREady() 函数。

```
--------- beginning of /dev/log/system
W/InputManagerService(  135): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4167b828
I/ActivityManager(  135): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/com.android.launcher2.Launcher} from pid 135
--------- beginning of /dev/log/main
D/dalvikvm(  135): GC_FOR_ALLOC freed 512K, 10% free 14081K/15495K, paused 48ms
I/dalvikvm-heap(  135): Grow heap (frag case) to 13.950MB for 129616-byte allocation
D/dalvikvm(  135): GC_FOR_ALLOC freed 51K, 10% free 14156K/15623K, paused 47ms
W/InputManagerService(  135): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@417236b0 (uid=10014 pid=1302)
I/CheckinService(  297): Preparing to send checkin request
I/EventLogService(  297): Accumulating logs since 1335819200143
I/CheckinTask(  297): Sending checkin request (1952 bytes)
D/dalvikvm(  297): GC_CONCURRENT freed 418K, 6% free 10133K/10759K, paused 2ms+32ms
I/CheckinTask(  297): From server: 193 gservices
I/GservicesProvider(  297): main update completed
I/PersonalizationPrefManagerImpl( 1283): Google account found
I/PersonalizationPrefManagerImpl( 1283): Personalization disabled for SIM country code 262
I/SystemUpdateService(  297): cancelUpdate (empty URL)
D/dalvikvm(  297): GC_CONCURRENT freed 295K, 5% free 10240K/10759K, paused 2ms+3ms
I/ActivityManager(  135): START {flg=0x10040000 cmp=com.google.android.gsf/.update.SystemUpdateInstallDialog} from pid 297
W/ActivityManager(  135): Activity start request from 10019 stopped
D/dalvikvm( 1283): GC_CONCURRENT freed 308K, 5% free 9167K/9607K, paused 1ms+3ms
I/ActivityManager(  135): START {flg=0x10040000 cmp=com.google.android.gsf/.update.SystemUpdateDownloadDialog} from pid 297
W/ActivityManager(  135): Activity start request from 10019 stopped
V/SystemUpdateService(  297): onPostExecute: false
I/VoiceImeLanguageUpdater( 1283): #internalUpdateLanguages #56
I/ActivityManager(  135): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.company.mobileApp/.DefaultActivity bnds=[0,556][120,706]} from pid 351
D/dalvikvm(  135): GC_FOR_ALLOC freed 367K, 11% free 14049K/15623K, paused 56ms
D/dalvikvm( 1335): Late-enabling CheckJNI
I/ActivityManager(  135): Start proc com.company.mobileApp for activity com.company.mobileApp/.DefaultActivity: pid=1335 uid=10015 gids={1006, 3003, 1015}
D/dalvikvm(   79): GC_EXPLICIT freed 37K, 4% free 9030K/9347K, paused 4ms+2ms
D/dalvikvm(   79): GC_EXPLICIT freed <1K, 4% free 9030K/9347K, paused 2ms+2ms
D/dalvikvm(   79): GC_EXPLICIT freed <1K, 4% free 9030K/9347K, paused 1ms+2ms
I/dalvikvm( 1335): Turning on JNI app bug workarounds for target SDK version 2...
D/OpenGLRenderer(  351): Flushing caches (mode 1)
D/OpenGLRenderer(  351): Flushing caches (mode 0)
D/dalvikvm(  351): GC_CONCURRENT freed 1344K, 30% free 11721K/16711K, paused 2ms+7ms
I/System.out( 1335): loadUrl(file:///android_asset/www/index.html,1000)
I/CheckinTask(  297): Checkin success: https://android.clients.google.com/checkin (1 requests sent)
D/dalvikvm( 1335): GC_FOR_ALLOC freed 85K, 3% free 9123K/9347K, paused 24ms
I/dalvikvm-heap( 1335): Grow heap (frag case) to 9.564MB for 614416-byte allocation
D/dalvikvm( 1335): GC_CONCURRENT freed 1K, 3% free 9722K/9991K, paused 5ms+2ms
V/PhoneStatusBar(  201): setLightsOn(true)
W/webcore ( 1335): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
W/webcore ( 1335): at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1683)
W/webcore ( 1335): at android.webkit.WebViewCore$EventHub.access$7900(WebViewCore.java:926)
W/webcore ( 1335): at android.webkit.WebViewCore.removeMessages(WebViewCore.java:1795)
W/webcore ( 1335): at android.webkit.WebView.sendOurVisibleRect(WebView.java:2917)
W/webcore ( 1335): at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:593)
W/webcore ( 1335): at android.webkit.ZoomManager.access$1700(ZoomManager.java:49)
W/webcore ( 1335): at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:984)
W/webcore ( 1335): at android.os.Handler.handleCallback(Handler.java:605)
W/webcore ( 1335): at android.os.Handler.dispatchMessage(Handler.java:92)
W/webcore ( 1335): at android.os.Looper.loop(Looper.java:137)
W/webcore ( 1335): at android.app.ActivityThread.main(ActivityThread.java:4424)
W/webcore ( 1335): at java.lang.reflect.Method.invokeNative(Native Method)
W/webcore ( 1335): at java.lang.reflect.Method.invoke(Method.java:511)
W/webcore ( 1335): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
W/webcore ( 1335): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
W/webcore ( 1335): at dalvik.system.NativeStart.main(Native Method)
I/ActivityManager(  135): Displayed com.company.mobileApp/.DefaultActivity: +1s484ms
I/System.out( 1335): loadUrl(file:///android_asset/www/index.html)
I/System.out( 1335): url=file:///android_asset/www/index.html baseUrl=file:///android_asset/www
D/dalvikvm( 1335): GC_CONCURRENT freed 120K, 3% free 10099K/10311K, paused 2ms+7ms
D/chromium( 1335): Unknown chromium error: -6
I/SqliteDatabaseCpp( 1335): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/com.company.mobileApp/databases/webview.db
I/SqliteDatabaseCpp( 1335): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/CachedGeoposition.db, db=/data/data/com.company.mobileApp/databases/webview.db
D/androidNetworkLocationListeners(  297): Still have listener com.google.android.location.internal.client.NetworkLocationClient$1@4137a068
D/androidNetworkLocationListeners(  297): Still have listener com.google.android.location.internal.client.NetworkLocationClient$1@4137a068
I/Web Console( 1335): -------------------------------REAAAAAAAAAADYYYYYYYYYY----------- at file:///android_asset/www/index.html:42
W/InputManagerService(  135): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@417419e8
D/dalvikvm( 1335): GC_CONCURRENT freed 640K, 8% free 9869K/10631K, paused 1ms+5ms
D/dalvikvm(  201): GC_FOR_ALLOC freed 143K, 28% free 10116K/13895K, paused 16ms
D/dalvikvm(  201): GC_FOR_ALLOC freed 364K, 28% free 10108K/13895K, paused 17ms
D/dalvikvm(  201): GC_CONCURRENT freed 318K, 27% free 10249K/13895K, paused 2ms+3ms
D/dalvikvm(  201): GC_CONCURRENT freed 501K, 27% free 10159K/13895K, paused 1ms+2ms
I/WifiLocationEstimator(  297): Not returning location for the following outliers: [127755693135544]
I/SqliteDatabaseCpp( 1335): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/com.company.mobileApp/databases/webview.db
I/SqliteDatabaseCpp( 1335): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/GeolocationPermissions.db, db=/data/data/com.company.mobileApp/databases/webview.db
D/dalvikvm(  297): GC_CONCURRENT freed 552K, 7% free 10143K/10823K, paused 2ms+4ms
I/ActivityManager(  135): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/com.android.launcher2.Launcher} from pid 135
D/dalvikvm(  135): GC_FOR_ALLOC freed 397K, 9% free 14239K/15623K, paused 50ms
I/dalvikvm-heap(  135): Grow heap (frag case) to 14.104MB for 129616-byte allocation
D/dalvikvm(  135): GC_FOR_ALLOC freed 70K, 10% free 14295K/15751K, paused 48ms
W/InputManagerService(  135): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4177e9d0 (uid=10015 pid=1335)
I/ActivityManager(  135): No longer want com.android.voicedialer (pid 1138): hidden #16
I/ActivityManager(  135): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 pkg=org.jtb.alogcat cmp=org.jtb.alogcat/.LogActivity bnds=[120,556][240,706]} from pid 351
D/dalvikvm(  135): GC_FOR_ALLOC freed 185K, 10% free 14181K/15751K, paused 52ms
D/OpenGLRenderer(  351): Flushing caches (mode 1)
D/OpenGLRenderer(  351): Flushing caches (mode 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:02:56.030

好的。我用 phonegap 构建服务打包了这个应用程序，现在它可以工作了。包装有问题。

# ios - 从 db 加载实体，而不是直接从 db 中提取数据

> ID：10388904
> 
> 赞同：0
> 
> 时间：2012-04-30T18:48:11.657
> 
> 标签：ios, database, core-data, entity, relationships

我创建了一个 iOS 应用程序，允许我将数据输入数据库，然后在 tableview 中显示（使用 NSFetchedResultsController 和 tableView cellForRowAtIndexPath）。这行得通。现在，我添加了 3 个一对多关系和另一个实体，我需要从数据库加载实体（在一对多的一侧），而不是直接从数据库中拉取它，以便数据可以在关系中使用。我还使用 NSFetchedResultsController 吗？

relationshipEntity2 是 Entity1 和 Entity2 之间的一对多关系。许多指向Entity2

我知道我应该使用：

```
Entity2 *entity2 = [[self.entity1.relationshipEntity2 allObjects] 
   objectAtIndex:indexPath.row]; 
```

我是 iOS 开发的新手，甚至对 Core Data 也很陌生，但我必须学习它。任何帮助或指向我尚未遇到的书籍或教程将不胜感激。我没有太多运气找到任何可以做我应该做的事情。

谢谢，祝您度过愉快的一周！

--------添加了有关项目的更多描述-----
我的任务是拥有一个带有 3 部分分段按钮的视图控制器。还有一个添加 UIButton 弹出一个视图（将子视图带到前面，而不是弹出框），其中包含一个 UITextField 用于输入以添加到视图控制器上的表视图中。有 2 个实体和三个一对多关系。分段按钮上的每个按钮都有 1 个关系。如果用户选择了分段按钮的第一部分，将值添加到弹出文本框，则应仅将其添加到选择第一个分段按钮时看到的表格视图中。我创建了 CoreDataGeneratedAccessors。我让这个项目将数据保存到数据库并获取数据以显示在表视图中，但那是在添加分段部分之前。现在我必须弄清楚将数据分成“集合” 然后在选择分段按钮的第一段时显示所有说的第一个集合。我只是在学习，只是在没有分段部分的情况下弄清楚了，现在它在我身上发生了变化。我使用过关系数据库，但在 iOS 中它似乎又是新的了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:27:16.820

你的问题一点都不清楚。你没有描述任何问题，也没有清楚地解释你想要完成的事情。

试图推断你的意思：是的，你会继续使用你的 fetchedResultsController。此控制器为您提供每个 indexPath 的正确对象。在构建单元格内容时，您可以轻松地使用`entity.relationship`.

上面的代码将不起作用，因为`entity.relationship`返回`NSSet`一个无序的对象组。（附加的`allObjects`没有任何作用并且是多余的。）因此，`objectAtIndex`将不起作用（这只适用于`NSArray`对象）。

希望这可以帮助。

# c# - 在 ASP.Net 4.0 C# 中从 Web 服务器下载文件

> ID：10388908
> 
> 赞同：0
> 
> 时间：2012-04-30T18:48:54.033
> 
> 标签：c#, asp.net-mvc-3, download

我在我的 Web 服务器上托管文件，我希望最终用户能够在他们的机器上下载此文件的副本以打开和查看。我目前有一个通过 foreach 循环填充的列表，并且通过循环的每次迭代都是一个 @Html.ActionLink("blahblahblah")。有没有办法在操作链接点击下载文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:50:17.880

单击链接**确实会**下载文件...如果文件是 HTML，则浏览器会下载它并在浏览器中显示它；如果它是其他东西（如 EXE），则浏览器会将其下载到文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:53:00.910

而不是使用`Html.ActionLink`，`Url.Content`与您希望他们下载的文件的（应用程序相对）路径一起使用。 `ActionLink`用于生成指向控制器上操作的href，而不是应用程序中的原始文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:53:37.770

这些文件是否向公众开放？有限制之类的吗？为什么不只是简单的静态链接到这些文件。

动作链接只创建将被路由到特定控制器和动作的链接。

如果您需要保护这些文件，则可以在控制器的相应操作中添加代码。此操作将从文件中读取字节并将其转储到响应中。您必须向浏览器添加标头才能识别 mime 类型并显示下载对话框或相应地呈现内容。

选中此项 [在 ASP.NET MVC 中返回文件以查看/下载](https://stackoverflow.com/questions/5826649/returning-a-file-to-view-download-in-mvc)

# memory-leaks - 滚动 UIImageViews 得到“低内存警告”

> ID：10388909
> 
> 赞同：1
> 
> 时间：2012-04-30T18:48:56.367
> 
> 标签：memory-leaks, uiscrollview, uiimageview, uiimage

我的应用程序相对简单 - 基本上是`UIScrollView`查看几百个（大）JPEG。然而，它始终因“内存不足警告”而崩溃

滚动视图由三个`UIImageView`s（`previousPage`、`currentPage`和`nextPage`）组成。开始时，每次滚动当前页面时，我都会`UIImageView`用 new “重置”三个 s `UIImages`。

```
NSString *previousPath = [[NSBundle mainBundle] pathForResource:previousName ofType:@"jpg"];
previousPage.image = [UIImage imageWithContentsOfFile:previousPath];
currentPage.image = [UIImage imageWithContentsOfFile:currentPath];
nextPage.image = [UIImage imageWithContentsOfFile:nextPath]; 
```

在 Allocations 中运行，#living 对象`UIImage`的数量在应用程序运行期间保持不变，但 #transitory`UIImage`对象的数量可能会增长得相当高。

这是一个问题吗？有什么方法可以“释放”这些`UIImage`对象吗？我是否认为这是内存泄漏的根源？

# video - 在 OpenCV 中设置视频文件的捕获大小

> ID：10388910
> 
> 赞同：0
> 
> 时间：2012-04-30T18:48:57.037
> 
> 标签：video, opencv, resize, frame

我正在处理一个视频文件以对其帧进行一些处理。视频大小为 1280*720，因此很难获得良好的性能（每帧约 100 万像素）。所以我想通过 Opencv 的 SetCaptureProperty 方法减小它的大小（640*360 对我来说就足够了），但它不起作用（Opencv2.2 说它只适用于相机捕捉，不适用于视频文件）

我可以使用 Opencv 的 resize 方法，但我认为它不是调整每一帧大小的有效方法。

你能建议一个更好的方法来处理这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:09:19.063

您可以使用[ffpmeg 工具](http://ffmpeg.org/download.html)将视频转换为较低的分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:52:54.983

如果您需要在捕获后更改帧的大小，我知道的唯一方法就是您试图逃避的方法。

# ruby-on-rails - Flot 不会绘图 (Ruby)

> ID：10388926
> 
> 赞同：1
> 
> 时间：2012-04-30T18:49:47.630
> 
> 标签：ruby-on-rails, ruby, flot

我正在用 Ruby 玩 FLOT，我很难将代码传递给 javascript；我知道我的 javascript 没有从 Ruby 正确读取数据。我需要一些语法帮助。

```
o={};
o= {'label' => "A", 'data' => @example.collect{|x| [Time.utc(x.date).to_i, x.num]}}
render :text => o.to_json 
```

我已经成功地呈现了这样的输出：

{"标签":"A","数据":[[1281225600,1.31],[1281225600,1.31],[1281225600,1.25]]}

HTML 仅输出此数据。

我的javascript如下：

```
 var obj = jQuery.parseJSON(text);
    var options = {
    lines: { show: true },
    points: { show: true },
    xaxis: { mode: "time",  timeformat: "%m/%d/%y",   minTickSize: [1, "day"]}
    };  

       var data = obj;            
      $.plot(placeholder,[data],options); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:23:58.883

您缺少的是 Ruby 以 Unix 格式输出时间戳（即自 epoch 以来的**秒数**`1281225600`）。Flot 需要 javascript 时间戳，它计算自纪元以来的**毫秒**数，即`1281225600*1000`.

因此，在您的 Ruby 代码中，最好的办法是执行以下操作：

```
o={};
o= {'label' => "A", 'data' => @example.collect{|x| [Time.utc(x.date).to_i*1000, x.num]}}
render :text => o.to_json 
```

或者，如果您愿意，您可以遍历 obj.data 并在 Javascript 端进行乘法运算：

```
for (i=0;i<obj.data.length;i++){
    obj.data[i] = obj.data[i]*1000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:01:08.723

好，我知道了....

红宝石代码：

```
 @o={};
    @o= {'label' => "A", 'data' => @example.collect{|x| [Time.utc(x.date).to_i, x.num]}} 
```

Java代码：

```
$(function () {

var obj = <%= @o.to_json %>;
var options = {
   lines: { show: true },
   points: { show: true },
   xaxis: { mode: "time",  timeformat: "%m/%d/%y",   minTickSize: [1, "day"]}
};  

var data = obj;            
$.plot(placeholder,[data],options);
}); 
```

# javascript - 在 Rails 应用程序中没有方法“nivoSlider”

> ID：10388931
> 
> 赞同：0
> 
> 时间：2012-04-30T18:50:12.493
> 
> 标签：javascript, ruby-on-rails, nivo-slider

我想在我的 Rails 应用程序中使用 nivoSlider，但我有一个问题：

```
Uncaught TypeError: Object [object Object] has no method 'nivoSlider'

f.Callbacks.o                      jquery.min.js:2
f.Callbacks.p.fireWith             jquery.min.js:2
e.extend.ready                     jquery.min.js:2
c.addEventListener.B               jquery.min.js:2 
```

我使用 jquery 1.7.2 和 nivoSlider 2.7.1。

我的 JavaScript 代码：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.nivo.slider.pack.js"></script>
<script type="text/javascript" >
    $(document).ready(function()
    {
        $("#slider").nivoSlider();
    });
</script> 
```

**$(document).ready(function() {});**之前的所有其他代码 并使用 jQuery 工作，但在**$("#slider").nivoSlider(); 之后** - 不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:30:30.290

您确定这是 js 文件的正确路径吗？

```
<script type="text/javascript" src="jquery.nivo.slider.pack.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:24:37.397

`);`在最后

```
$(document).ready(function()
{
    $("#slider").nivoSlider();
}); 
```

而且您不需要包含 jQuery，它默认包含在内。

# django - 匹配的查询不存在

> ID：10388932
> 
> 赞同：1
> 
> 时间：2012-04-30T18:50:17.257
> 
> 标签：django, django-queryset

我正在尝试捕获异常但不起作用。这是我认为的代码：

```
@login_required 
def activities_edit(request, edit):

    ActivityFormSet = modelformset_factory(Activity, can_delete=True)
    act_edit= Activity.objects.filter(campaing=1).get(pk=edit)
    try:
        if act_edit:
            if request.method == 'POST':
                formset = ActivityFormSet(request.POST, request.FILES, queryset=Activity.objects.filter(pk=edit))       
                if formset.is_valid():
                    formset.save()
                    return HttpResponseRedirect('/activities/')
            else:
                formset = ActivityFormSet(queryset=Activity.objects.filter(pk=edit))
    except act_edit.DoesNotExist:
        return HttpResponseRedirect('/activities/') 
```

我也在尝试：“除了act_edit.DoesNotExist：”但错误仍然存​​在“活动匹配查询不存在。” 任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:55:16.860

您需要在子句主体中移动可能导致异常的`try:`语句。

语法是“try: *something* catch *stuff* :” 你的*东西*在上面`try:`

```
act_edit= Activity.objects.filter(campaing=1).get(pk=edit)
try: 
```

应该

```
try:
   act_edit = Activity.objects.filter(campaing=1).get(pk=edit) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:19:19.427

你有一点冗余来捕捉异常意味着你不必检查act_edit是否为空，因为如果它为空，它将引发DoesNotExist。模型也`DoesNotExist`没有实例。

```
@login_required 
def activities_edit(request, edit):

    ActivityFormSet = modelformset_factory(Activity, can_delete=True)       
    try:
        act_edit= Activity.objects.filter(campaing=1).get(pk=edit)

        if request.method == 'POST':
            formset = ActivityFormSet(request.POST, request.FILES, queryset=Activity.objects.filter(pk=edit))       
            if formset.is_valid():
                formset.save()
                return HttpResponseRedirect('/activities/')
        else:
            formset = ActivityFormSet(queryset=Activity.objects.filter(pk=edit))
            #HttpResponse not returned error here.
    except Activity.DoesNotExist:
        return HttpResponseRedirect('/activities/') 
```

# c++ - QTimer 没有在建议的时间间隔发出信号

> ID：10388934
> 
> 赞同：1
> 
> 时间：2012-04-30T18:50:23.143
> 
> 标签：c++, qt

出于测试目的，我有一个简单的设置来更改定时间隔的标签。似乎从未发出信号。我正在使用带有 Qt 插件的 Visual Studio 2010。这是我的设置...

```
Window::Window(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
    ui.setupUi(this);
    my_label = new QLabel();

    timer = new QTimer(this);
    timer->setInterval(1000);
    connect(timer, SIGNAL(timeout()), this, SLOT(nextFrame()));
}

void Window::nextFrame()
{
    static int i = 0;
    std::stringstream ss;

    ss << "C:/files/" << i << ".txt";
    QString qstr = QString::fromStdString(ss.str());
    ui.label->setText(qstr);

    ss.str("");
    i++;
    repaint();
} 
```

在头文件中，

```
public:
    Window(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~Window();

public slots:
    void nextFrame();

private:
    Ui::TrackerClass ui;
    QTimer *timer;
}; 
```

为什么插槽`nextFrame()`永远不会被触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T19:01:32.180

此代码中没有任何内容可以调用[`start()`](http://qt-project.org/doc/qt-4.8/qtimer.html#start-2)，因此基于此代码`nextFrame()`将永远不会被[`timeout()`](http://qt-project.org/doc/qt-4.8/qtimer.html#timeout).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:17:35.133

我认为我可以提供帮助的几件事：

1.  nextFrame() 是一个 SLOT。SLOT 不发射。他们收到。信号发射。不要试图粗鲁，只是想清楚这一点，因为这是一个重要的区别。（在这种情况下，信号是 timeout() ）
2.  你需要有一个 start() 来开始计时器。类似下面这行的东西似乎可以解决问题：

希望这有助于消除一些困惑。

```
timer->start(1000); 
```

# algorithm - 动态规划

> ID：10388938
> 
> 赞同：0
> 
> 时间：2012-04-30T18:50:39.987
> 
> 标签：algorithm, visual-c++, dynamic-programming

我的任务是通过蛮力算法制作二维数组的所有可能组合，然后通过其成本从所有组合中找到最佳组合。

例如，如果数组的大小为 4 X 3，并且它有内容让我们说：

```
1  2  3
4  5  6
7  8  9
10 11 12 
```

那么可能的组合之一可以是

```
1
4
7
10 
```

相似地

```
1
4
7
11 
```

...

```
1
4
7
12 
```

...

```
1
4
8
10 
```

...

```
1
4
8
11 
```

...

依此类推，因此所有这些组合。请记住，上述组合存储在二维数组中，并且在没有数字的地方插入了“-”。例如：

```
1 - -
4 - -
7 - -
10 - - 
```

但由于它是一个二维数组，你不能在其中存储' - '，所以它只会像它一样显示。现在，每个组合都会有一个随机生成的成本。与蛮力一样，首先我找到所有组合，然后选择它的最佳组合。这花了很多时间，例如，如果我的阵列是 10 X 5。

然后我必须做出 5^10 个组合，这是一个巨大的数量，而且很耗时。我实际上希望有人帮助我通过动态编程来替代它。数组的大小可以是 nxm，其中 m 最大可以是 2 或 3，n 最大可以是 1000。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:54:24.200

1 - - / - - 6 / - - 9 / - - 12 有效吗？我认为您可能会问的问题是通过这个矩阵最便宜的路径是什么，这是一个标准的动态编程问题，请参阅[http://en.wikipedia.org/wiki/Dynamic_programming#Checkerboard](http://en.wikipedia.org/wiki/Dynamic_programming#Checkerboard)。

否则，如果问题仅仅意味着最大总和，那么只需在每一行中做最大值，这应该很清楚，因为每行只能有一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T11:01:15.837

这个问题的递归（蛮力解决方案）可以如下：

```
private static void combinations(int[][] matrix, int output[],int row, int col,int index,int n) {

    // base case
    if(row==n)
    {
        printArray(output,row);
        return;
    }

    for(int j=0;j<col;j++)
    {
        output[index] = matrix[row][j];
        combinations(matrix,output, row+1, col,index+1,n);
    }
    return;
}

private static void printArray(int[] output, int row) {
    for(int i=0;i<row;i++)
    {
        System.out.print(output[i]+ ", ");
    }
    System.out.println();
} 
```

在此，函数组合被调用列数次。对于每个列组合，将打印输出数组。我不太确定这个问题的优化。如果有人知道更优化的算法，请分享。

# java - 使用 jnlp 让 java 小程序在浏览器中运行

> ID：10388939
> 
> 赞同：1
> 
> 时间：2012-04-30T18:50:41.937
> 
> 标签：java, applet, jnlp, next-generation-plugin, unsupported-class-version

我从这里获取了一个非常简单的 Java 小程序：http: [//docs.oracle.com/javase/tutorial/deployment/applet/subclass.html](http://docs.oracle.com/javase/tutorial/deployment/applet/subclass.html)

```
import javax.swing.JApplet;
import javax.swing.SwingUtilities;
import javax.swing.JLabel;

public class HelloWorld extends JApplet {
    //Called when this applet is loaded into the browser.
    public void init() {
        //Execute a job on the event-dispatching thread; creating this applet's GUI.
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    JLabel lbl = new JLabel("Hello World");
                    add(lbl);
                }
            });
        } catch (Exception e) {
            System.err.println("createGUI didn't complete successfully");
        }
    }
} 
```

当我右键单击并执行时，我可以让小程序在 Eclipse 中运行，`Run As > Java Applet`但现在我试图将它放入一个 jar 文件并通过浏览器使用 jnlp 运行它。这些是我尝试这样做的步骤：

1.  `javac -d build HelloClass.java`
2.  `cd build`
3.  `jar cvf Hello.jar *.class`
4.  创建 Hello.jnlp 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <jnlp spec="1.0+" codebase="" href="">
        <information>
            <title>Hello Applet</title>
            <vendor>Self</vendor>
        </information>
        <resources>
            <!-- Application Resources -->
            <j2se version="1.6+"
                href="http://java.sun.com/products/autodl/j2se" />
            <jar href="Hello.jar" main="true" />

        </resources>
        <applet-desc 
             name="Hello Applet"
             main-class="HelloClass"
             width="300"
             height="300">
        </applet-desc>
        <update check="background"/>
    </jnlp> 
```

1.  创建html页面：

```
 <html>
    <head>
    <title>Hello Applet</title>
    </head>
    <body>
        <!-- ... -->
        <script src="http://www.java.com/js/deployJava.js"></script>
        <script> 
            var attributes = {
                code:'HelloClass',  width:300, height:300} ; 
            var parameters = {jnlp_href: 'Hello.jnlp'} ; 
            deployJava.runApplet(attributes, parameters, '1.6'); 
        </script>
        <!-- ... -->
    </body>
    </html> 
```

当我在浏览器中打开此页面时，系统会提示我允许小程序运行，但随后出现错误，并显示以下详细信息：

```
Exception: java.lang.UnsupportedClassVersionError: HelloClass : Unsupported major.minor version 51.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:36:09.150

该代码显然是由 1.7 SDK 编译的，没有使用任何[交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)，而试图加载它的 JRE 是 6 版或更低版本。

要为特定 Java 版本编译代码，请使用交叉编译选项。要正确执行此操作，需要一个`rt.jar`目标版本（使用`bootclasspath`选项`javac`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:54:05.460

编译器版本和 JRE 版本不匹配，请确保它们是相同（主要）版本。

# matlab - 在 Matlab 中创建相关图

> ID：10388940
> 
> 赞同：10
> 
> 时间：2012-04-30T18:50:43.647
> 
> 标签：matlab, graphics, plot, correlation

我正在尝试模拟此图： ![在此处输入图像描述](../Images/d97b47995796649c906a2fccd713dcf5.png)

如果我有一个相关矩阵，我该如何创建这样的输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T20:16:35.630

如果您有一个`n x n`相关矩阵`M`和一个包含每个 bin 的标签`L`的长度向量`n`，则可以使用如下内容：

```
imagesc(M); % plot the matrix
set(gca, 'XTick', 1:n); % center x-axis ticks on bins
set(gca, 'YTick', 1:n); % center y-axis ticks on bins
set(gca, 'XTickLabel', L); % set x-axis labels
set(gca, 'YTickLabel', L); % set y-axis labels
title('Your Title Here', 'FontSize', 14); % set title
colormap('jet'); % set the colorscheme
colorbar on; % enable colorbar 
```

旋转 x 轴标签并非易事，但 MATLAB Central File Exchange 包含[一些解决方案](http://www.mathworks.com/matlabcentral/fileexchange/8722)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T20:04:26.597

Adding to @Thomas C. G.'s answer, I'd use:

```
imagesc(myMatrix);
colormap(jet);
colorbar;

% then to set the axis titles you'll have to use
% Please note the curly braces for the cell array
labelNames = {'USA','NASDAQ','Dow Jones'};
set(gca,'XTickLabel',labelNames);   % gca gets the current axis
set(gca,'YTickLabel'labelNames);   % gca gets the current axis 
```

Unfortunately, AFAIK, making the text labels vertical as they are in your figure [is a bit harder](http://www.mathworks.com/support/solutions/en/data/1-15TK6/index.html?solution=1-15TK6). Maybe somebody else has knowledge to the contrary.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T19:14:32.737

要将矩阵绘制为图像，您只需调用两个函数：

```
image(myMatrix)
colormap(jet) 
```

[colormap](http://www.mathworks.com/help/techdoc/ref/colormap.html)函数定义用于渲染图像的颜色模式。您发布的图像使用“jet”颜色图。

[并使用颜色栏](http://www.mathworks.com/help/techdoc/ref/colorbar.html)功能在图像旁边显示色阶。

# php - 函数调用中的 PHP 重定向

> ID：10388948
> 
> 赞同：0
> 
> 时间：2012-04-30T18:51:55.653
> 
> 标签：php, function, redirect, kiss-mvc

我查看了其他一些关于类似主题的帖子，但我无法按照他们的指示进行操作。

基本上我的问题是这样的，我想在成功重置密码后重定向到我网站的主登录页面。

这是我到目前为止所拥有的：

```
if (isset($_POST['Resetpw'])) {
    if ($query == $_GET['token'] & $_POST['password'] == $_POST['confirmed_password']) {
        $passwordTest = $_POST['password'];

        $result = mysql_query("SELECT `tempTicket` FROM users WHERE `username` = '" . $_POST['username'] . "'limit 1;");
        $query = mysql_fetch_array($result);
        mysql_query("UPDATE users SET `tempPass` = '$passwordTest' WHERE `username` = '" . $_POST['username'] . "'  ");
        echo '<div class="success">Password successfully changed!</div> ';
        //header("Location: www.google.com");
        //exit; 
```

这都在一个函数中，注释掉的部分是我想要重定向到我的网页的地方。

所以总结一下，我可以在函数完成后强制函数重定向到起始页吗？如果这很重要，我正在为这个项目使用 KISSMVC 框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:54:49.683

您应该在重定向之前删除[回声](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)。

如果您使用完整路径，您注释掉的内容应该可以工作，例如：`http://google.com`.

另一件事：您应该真正放弃使用函数（[将来](http://us.php.net/manual/en/mysqlinfo.api.choosing.php)`mysql_*`会弃用）并使用or 。`mysqli_*``PDO`

还有一件事：您的应用程序容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:02:35.757

首先，我希望在使用它们访问数据库之前，我不需要深入了解您的输入内容。

我不知道 KISSMVC。但我知道 PHP 和浏览器-服务器交互是如何发生的。因此，我将从该格式处理您的问题。

我在这里看到两件事。一个是您希望在交易成功发生时向用户发出警报。这可以通过重定向动态完成，但这取决于您将它们发送到哪里。如果您将用户发送到您无法控制的位置（您的示例引用了 google.com），那么您将必须使用 javascript 和 ajax 传递您的警报（和您的输入）。这样做的原因是，如果您已经将一些输出发送到用户的浏览器，则标头重定向将不起作用。因此，您需要`.js`在代码中实现一些对执行代码并返回成功/失败标志的脚本进行 AJAX 调用，然后触发消息（成功/失败）。

如果您确实可以控制要重定向到的内容，并且不想触摸任何内容`.js`，则可以重定向到使用您创建的变量来保存成功/失败消息的中间页面，将其输出到浏览器并一个按钮，在此之后链接到您的下一页，并将数据附加到查询字符串中。所有这些都可以在 php/MySQL 中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:54:30.463

是的，只是摆脱`echo`它之前的声明。通话前您无法在屏幕上回显任何内容`header`。

您可能还想添加一些错误处理，以便您确定它是成功的并切换到准备好的语句以避免 sql 注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:40:17.290

**输出缓冲**

这里的其他人都说你不能在标题调用之前回显任何东西（包括空格）。但这是不正确的。例如，如果您在 php.ini 文件中使用输出缓冲来输出缓冲整个页面 - 那么您可以在脚本中的任何地方使用 header() （只要代码不手动刷新它）。[http://php.net/manual/en/outcontrol.configuration.php](http://php.net/manual/en/outcontrol.configuration.php)

你想在 php.ini 中设置它

输出缓冲=开；

然后您可以在代码中的任何位置使用 header() 。请记住，在重定向后，使用 die() 或 exit() 来防止 PHP 页面在重定向后继续执行。

**没有输出缓冲**

您不得向浏览器打印任何内容，包括空格，否则标头已经发送，PHP 无法再对其进行修改。输出缓冲阻止了这种情况，因为整个生成的页面在脚本末尾一次性发送，这意味着标题可以在脚本中的任何位置自由更改。

**附言**

正如其他人所提到的，您的 SQL 容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，您不应该再使用 mysql_* 而是切换到 pdo 或 mysqli_* 因为 mysql_* 已被弃用。

# javascript - Backbone Collection.fetch() 奇怪的行为

> ID：10388949
> 
> 赞同：0
> 
> 时间：2012-04-30T18:51:59.317
> 
> 标签：javascript, jquery, backbone.js

使用主干 JS 库构建页面。我有一个集合、视图和路由器。目标是列出页面中集合的所有条目。

该系列

```
window.Artifact = Backbone.Model.extend({
    urlRoot:"/rest/artifacts",

    initialize:function(){
      this.artifacts = new ArtifactCollection();
    }
});

window.ArtifactCollection = Backbone.Collection.extend({

     model:Artifact,
     url:"/rest/artifacts"

});

var artifacts = new ArtifactCollection; 
```

风景

```
window.findView = Backbone.View.extend({

    initialize:function () {
       console.log('Initializing Find View');
       this.template = _.template(tpl.get('find'));
    },

    render:function (eventName) {

    var data = { 'data' : artifacts.models };
            $(this.el).html(this.template( data ));
            return this;
    }
}); 
```

路由器程序

```
var AppRouter = Backbone.Router.extend({

routes:{
    "":"home",
    "contact":"contact",
    "get":"get",
    "find":"find",
    "requests/:id":"requests"
},

find:function(){

    artifacts.fetch( {
        success:function(){
            this.findView = new findView( );
            this.findView.render();
            $('#content' ).html( this.findView.el );
        }
    });
}, 
```

问题是，它大部分时间都有效，但有时不起作用。它抛出以下异常

```
Uncaught TypeError: object is not a function
artifacts.fetch.successmain.js:53
_.extend.fetch.options.successbackbone-0.9.2.js:760
jQuery.Callbacks.firejquery.js:1032
jQuery.Callbacks.self.fireWithjquery.js:1150
donejquery.js:7385
jQuery.ajaxTransport.send.callback 
```

以前有人见过这种类型的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:47:07.457

> 我在路由器的这段代码中将重命名`this.findView`为。现在一切正常。有人可以解释这种变化的意义是什么吗？`this.find``artifacts.fetch( { success:function(){ this.find = new findView( ); this.find.render(); $('#content' ).html( this.find.el ); } });`

我不是肯定的，但我猜在你的`success`函数中，`this`是对 的引用`window`，当你有时`this.findView = new findView();`，你正在覆盖，导致函数再次运行并尝试`window.findView`时出现“未捕获的 TypeError：对象不是函数”`success`打电话`new findView()`。

# python - 如何打印在Python中实现为子树列表的树的叶子？

> ID：10388950
> 
> 赞同：0
> 
> 时间：2012-04-30T18:51:59.603
> 
> 标签：python, list, tree

基本上我希望能够让树类型的每个节点都有一个数据字段和一个分支列表。此列表应包含许多 Tree 类型的对象。我想我已经完成了列表的实际实现，但是当我尝试使用 getLeaves 方法时会出现奇怪的行为。基本上它递归地调用自己并且永远不会返回，并且发生的方式是树的第二个节点以某种方式将它的第一个分支设置为自身（我认为）。

```
class Tree:
    """Basic tree graph datatype"""
    branches = []

    def __init__(self, root):
        self.root = root

    def addBranch (self, addition):
    """Adds another object of type Tree as a branch"""
        self.branches += [addition]

    def getLeaves (self):
        """returns the leaves of a given branch. For leaves of the tree, specify root"""
        print (len(self.branches))
        if (len(self.branches) == 0):
            return self.root
        else:
            branchSum = []
            for b in self.branches:
                branchSum += b.getLeaves()
            return (branchSum) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:38:41.867

可能的解决方案（您的源代码稍作改动）：

```
class Tree:
    def __init__(self, data):
        """Basic tree graph datatype"""
        self.data = data
        self.branches = []

    def addBranch (self, addition):
        """Adds another object of type Tree as a branch"""
        self.branches.append(addition)

    def getLeaves (self):
        """returns the leaves of a given branch. For 
           leaves of the tree, specify data"""
        if len(self.branches) == 0:
            return self.data
        else:
            branchSum = []
            for b in self.branches:
                branchSum.append(b.getLeaves())
            return branchSum

## Use it

t0 = Tree("t0")
t1 = Tree("t1")
t2 = Tree("t2")
t3 = Tree("t3")
t4 = Tree("t4")

t0.addBranch(t1)
t0.addBranch(t4)
t1.addBranch(t2)
t1.addBranch(t3)

print(t0.getLeaves()) 
```

输出：

```
[['t2', 't3'], 't4'] 
```

评论：

1.  看起来您的代码中的某些格式被破坏了。
2.  不确定这是否是您想要的。您想要列表的一层中的所有叶子吗？（如果是这样，必须修改源代码。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:06:49.187

您的“分支”变量是类成员，而不是实例成员。您需要在构造函数中初始化“分支”实例变量：

```
class Tree:
    """Basic tree graph datatype"""

    def __init__(self, root):
       self.branches = []
       self.root = root 
```

您的其余代码看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:59:06.963

是这`self.root`棵树的父母吗？在这种情况下，如果它没有分支 ( ) 则`getLeaves()`应该返回，而不是像你在那里一样。此外，如果您确实有子分支，则应包含在.`self``len(self.branches)==0``self.root``self``branchSum`

# android - 在 Eclipse 中打开 - 代码

> ID：10388951
> 
> 赞同：1
> 
> 时间：2012-04-30T18:52:00.657
> 
> 标签：android

如何在 Eclipse 中打开此页面 FragmentBasics.zip ( [developer.android.com ) 的示例代码？](http://developer.android.com/training/basics/fragments/index.html)

如果我尝试我成为错误 [2012-04-30 12:59:11 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] C:\dev\FragmentBasics\AndroidManifest.xml 的解析器异常：处理指令目标匹配“[xX][mM][lL]”是不允许的。

Eclipse 版本：3.7.1

谢谢博伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:01:50.073

你能检查你的 Manifest.xml。此异常通常与空白/尾随空格或不正确的 xml 格式有关。尝试使用 Altova/XML 编辑器查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:10:59.480

我遇到了同样的问题，并通过编辑文件 AndroidManifest.xml 并将行移动`<?xml version="1.0" encoding="utf-8"?>`到 copywrite 注释上方来解决它：

```
<!--
Copyright (C) 2012 The Android Open Source Project 
```

似乎解析器需要读取`<?xml`文件开头的标签。我在这里提交了错误报告：[http ://code.google.com/p/android/issues/detail?id=30505&thanks=30505&ts=1336503159](http://code.google.com/p/android/issues/detail?id=30505&thanks=30505&ts=1336503159)

总之，您的 AndroidManifest.xml 文件应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
Copyright (C) 2012 The Android Open Source Project

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.fragments"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

导入项目后，您必须在项目中的其他 xml 文件（res/layout/article_view.xml、res/layout/news_articles.xml、res/layout-large/news_articles.xml、和 res/values/strings.xml）。

我发现eclipse在src/目录下创建的包叫com.example.fragments而不是com.examples.android.fragments。我不知道为什么会发生这种情况，但我通过单击每个文件的包声明处的错误消息并选择：将“FILENAME.java”移动到包“com.example.android.fragments”来修复它。

最后，我必须在 HeadlinesFragment.java 中导入 android.os.Build 才能编译和运行项目。

# c++ - 如何从 Windows 中的 CRT 内存管理器获取详细诊断信息？

> ID：10388952
> 
> 赞同：0
> 
> 时间：2012-04-30T18:52:01.927
> 
> 标签：c++, windows, memory, diagnostics, msvcrt

出于调试和诊断内存碎片的目的，我希望能够查询内存管理器（为 C++ 应用程序提供的默认管理器）以获取某些信息，例如非连续空闲块的数量和每个块的大小那些。

我设想了一种从头到尾扫描或迭代整个堆并查看所有细节的方法。如果我在这里看到一块非空闲内存，那么它有多大（以字节为单位）？接下来，我可能会遇到一个空闲块，那个有多大？

我试过用第三方的东西换掉我们的内存管理器，但到目前为止，我们的代码库太复杂了，我一直在崩溃，即使我尝试了各种技巧。所以我必须要么依赖一些 CRT 堆诊断功能来做到这一点，要么依赖一些工具来为我做这件事。

感谢帮助（和 C++ 中的代码示例）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:54:33.947

从事物的声音，你在寻找[`_heapwalk`](http://msdn.microsoft.com/en-us/library/h0c183dk.aspx)。链接页面包含一个小演示。

# ruby-on-rails - 如何从同一来源生成 html 和文本电子邮件？

> ID：10388961
> 
> 赞同：3
> 
> 时间：2012-04-30T18:52:54.193
> 
> 标签：ruby-on-rails, ruby, email, premailer

我正在使用[premailer](https://github.com/fphilipe/premailer-rails3)发送 html 电子邮件。默认情况下，它将根据非 html 内容生成电子邮件的简单文本渲染。这是一个不错的开始，但有一些烦恼，例如所有中断的文字渲染。

有没有办法让我更好地控制电子邮件的文本呈现，无论是使用 premailer 还是其他工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:08:21.810

你可能想看看[MarkerB](https://github.com/plataformatec/markerb)

它允许您在 Markdown 中编写邮件模板，并自动制作电子邮件的 html 和文本版本，以作为多部分 mime 发送。

# xml - 如何通过匹配属性使用 XSLT 合并两个 xml 文件？

> ID：10388965
> 
> 赞同：0
> 
> 时间：2012-04-30T18:53:17.613
> 
> 标签：xml, xslt, merge

第一个输入文件：

```
<root> 
    <node id="N1">
        <fruit id="1" action="aaa">
            <orange id="x">
                <attribute>
                    <color>Orange</color>
                    <year>2000</year>
                </attribute>
            </orange>            
        </fruit>             
    </node>
</root> 
```

第二个输入文件：

```
<root> 
    <node id="N1">
        <fruit id="1">
            <orange id="y">
                <attribute>
                    <color>Orange</color>
                    <year>2000</year>
                </attribute>
            </orange> 
            <orange id="z">
                <attribute>
                    <color>Orange</color>
                    <year>2000</year>
                </attribute>
            </orange>                       
        </fruit>
        <fruit id="2" action="bbb">
            <orange id="x">
                <attribute>
                    <color>Pink</color>
                    <year>2000</year>
                </attribute>
            </orange>            
        </fruit> 
    </node>
</root> 
```

合并后的输出：

```
<root> 
    <node id="N1">
        <fruit id="1" action="aaa">
            <orange id="x">
                <attribute>
                    <color>Orange</color>
                    <year>2000</year>
                </attribute>
            </orange>     
            <orange id="y">
                <attribute>
                    <color>Orange</color>
                    <year>2000</year>
                </attribute>
            </orange>  
            <orange id="z">
                <attribute>
                    <color>Orange</color>
                    <year>2000</year>
                </attribute>
            </orange>              
        </fruit> 

        <fruit id="2" action="bbb">
            <orange id="x">
                <attribute>
                    <color>Pink</color>
                    <year>2000</year>
                </attribute>
            </orange>            
        </fruit> 
    </node>
</root> 
```

仅使用 XSLT 就可以做到这一点吗？请就该问题的通用解决方案告诉我。

合并算法：

*   首先找到节点fruit id=1，然后我们在第二个文件中找到相同的fruit id=1，fruit id=1 的每个孩子都将被放入第一个文件中fruit id=1 的节点内。

*   如果水果 id 不同，我们只需将其添加为新节点（不在
    水果 id=1 下）

*   我们可以假设合并将基于 'fruit' 节点，因此我们可以使用 xslt 文件中的变量 'fruit' 使其更容易。

*   它必须在相同的节点 ID 下（上例中的 N1）。

谢谢你。

约翰

# c# - GoToWebinar - 请求不是预期的格式 - RestSharp

> ID：10388970
> 
> 赞同：2
> 
> 时间：2012-04-30T18:54:00.400
> 
> 标签：c#, asp.net, json, api, restsharp

类似于此论坛帖子： [https ://developer.citrixonline.com/forum/request-not-expected-format](https://developer.citrixonline.com/forum/request-not-expected-format)

然而，他并没有真正解释他发现他的代码有什么问题。

我正在使用 RestSharp 进行 API 调用。我已经能够很好地提取即将举行的网络研讨会列表，但是当我尝试注册参与者时，我不断收到 400/Request not in expected format 错误。

按照此文档[https://developer.citrixonline.com/api/gotowebinar-rest-api/apimethod/create-registrant](https://developer.citrixonline.com/api/gotowebinar-rest-api/apimethod/create-registrant)，这是我的代码：

```
var client = new RestClient(string.Format("https://api.citrixonline.com/G2W/rest/organizers/{0}/webinars/{1}/registrants", "300000000000xxxxxx", btn.CommandArgument));
var request = new RestRequest(Method.POST);
request.RequestFormat = DataFormat.Json;

request.AddHeader("Accept", "application/json");
request.AddHeader("Accept", "application/vnd.citrix.g2wapi-v1.1+json");
request.AddHeader("Authorization", "OAuth oauth_token=" + System.Configuration.ConfigurationManager.AppSettings["GoToWebinar"]);

request.AddParameter("firstName", LoggedInUser.FirstName);
request.AddParameter("lastName", LoggedInUser.LastName);
request.AddParameter("email", LoggedInUser.Email);

var response = client.Execute(request);
var statusCode = response.StatusCode; 
```

关于如何弄清楚为什么我不断收到该错误的任何见解？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:17:55.473

您需要编写 JSON，而不是使用 AddParamter（将键/值参数添加到请求正文）：

```
request.DataFormat = DataFormat.Json;
request.AddBody(new {
    firstName = LoggedInUser.FirstName,
    lastName = LoggedInUser.LastName,
    email = LoggedInUser.Email
}); 
```

如果您想直接指定它们，您还需要清除处理程序（自动设置 Accept 标头）：

```
client.ClearHandlers(); 
```

# cruisecontrol - CruiseControlException：未知插件：

> ID：10388975
> 
> 赞同：0
> 
> 时间：2012-04-30T18:54:25.970
> 
> 标签：cruisecontrol

我正在尝试在 Cruise Control 中设置一些群组电子邮件通知，并且我一直在遵循我发现的许多示例的模式：

```
<htmlemail mailhost="${mail.host}" subjectprefix="${mail.subject.prefix}" returnaddress="${mail.address.return}"
                    buildresultsurl="${build.url}/${project.name}" css="${css.location}" xsldir="${xsl.dir}"
                    xslfilelist="header.xsl,buildresults.xsl" returnname="${return.name}" skipusers="false" spamwhilebroken="false"
                    username="${cc.mail.username}" password="${cc.mail.password}" usessl="true" mailport="465" >
    <users>
        <user name="svnUser" group="buildmaster" address="${mail.address.buildmanager}"/>
    </users>
    <groups>
        <group name="buildmaster" >
            <notifications>
                <notificationType>Always</notificationType>
            </notifications>
        </group>                
    </groups>       
</htmlemail> 
```

当我启动 CC 时，出现以下异常：

```
....
Caused by: net.sourceforge.cruisecontrol.CruiseControlException: Unknown plugin for: <users>
    at net.sourceforge.cruisecontrol.ProjectXMLHelper.configurePlugin(ProjectXMLHelper.java:106)
.... 
```

我认为去年有人遇到了同样的问题，但没有解决该错误：

[在巡航控制上设置电子邮件通知](https://stackoverflow.com/questions/5869468/setting-up-email-notifications-on-cruise-control)

这似乎是一件如此简单的事情，有人知道为什么会发生这种异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:31:00.973

您必须使用的地图子元素[`<email />`](http://cruisecontrol.sourceforge.net/main/configxml.html#email)

喜欢：

```
<map alias="mag82" adress="mail@test.com"/> 
```

其中 alias 是 svn 用户名。

# mobile - 您在移动优先响应式设计方面走多远？

> ID：10388981
> 
> 赞同：1
> 
> 时间：2012-04-30T18:54:44.083
> 
> 标签：mobile, user-interface, responsive-design

我正在为 Mobile First Responsive Design (MFRD) 改造网站。我的问题是 - 你在“移动优先”部分走多远？

例如 - 在主页上，我计划列出即将发生的事件，比如 4 或 5。在移动版本上，我认为 2 足以节省屏幕空间。我应该为更大的视图动态加载其他事件，还是应该隐藏它们，因为无论如何它只会是几个元素？

为更大的尺寸动态加载它们意味着我必须将一个事件附加到窗口调整大小，通常每个像素都会触发该事件。尽管我可以用 Timeout 来抵消它，但仍然需要大量的客户端检查，不是吗（即使它不像用户不断调整浏览器的大小）。

我的意思是，即使您首先为移动设备设计，您也必须考虑更大的尺寸，对吗？显然，更大的 JavaScript 库和其他资产需要更大的只是你想稍后拉入而不是加载到移动设备 - 但是你想通过节省带宽来获得多疯狂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:15:13.750

网站的目标市场是什么？您是否正在制作一个将智能手机封装到桌面的完全响应式网站？或者你只是专注于智能手机到平板电脑？

移动优先实际上只是意味着以最小的外形开始您的样式和内容视图，并随着设备尺寸的增大而工作。随着浏览器变大，HTML、CSS（媒体查询）和 jQuery 都在扩展 UI 和操作（显示/隐藏）内容元素方面发挥了作用。

看看[Smashing Magazine](http://www.smashingmagazine.com/)，他们的响应式布局是我迄今为止见过的最广泛的布局之一，它会让您了解 MFRD 或 DARL（与设备无关的响应式布局）方法学能走多远。

# sql-server - 旋转员工列

> ID：10388982
> 
> 赞同：1
> 
> 时间：2012-04-30T18:54:47.167
> 
> 标签：sql-server, sql-server-2008

我有一张这样的桌子。

![在此处输入图像描述](../Images/6d1479ba2aeb78e6ab3d96cfc8807bd7.png)

我需要最终结果只显示每个订单的一条记录（基本上合并子订单）。仅对不同子订单的收入求和（对于订单 0935744，求和 575.04 + 31.68）。一个订单最多可以有 2 名员工

最终结果应该是这样的：

```
order      totalrevenue  employee1 employee2 
0813700     258.57        CREW      NULL      
0935744     606.72        95liv     95nat 
```

我尝试过使用 row_number 并进行一些连接，但我没有运气。

示例代码

```
SELECT N'0813700' AS [OrderNum], N'1077980' AS [SubOrder], N'CREW' AS [employeeid], N'258.57' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1257060' AS [SubOrder], N'95LIV' AS [employeeid], N'575.04' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1342944' AS [SubOrder], N'95LIV' AS [employeeid], N'31.68' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1257060' AS [SubOrder], N'95NAT' AS [employeeid], N'575.04' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1342944' AS [SubOrder], N'95NAT' AS [employeeid], N'31.68' AS [revenue] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:07:25.570

这个怎么样？（在 OP 评论后修改）

假设：

1.  每个订单不超过两名员工。
2.  每个子订单一名员工（如示例中所示）
3.  子订单的收入在子订单的行上始终重复（每个示例）

代码示例

```
select order, sum(revenue) as totalrevenue, max(employee1) as employee1,
case
    when max(employee1) = max(employee2) then null
    else max(employee2)
end as employee2
from (
    select order, suborder, max(revenue) as revenue, max(employeeid)
    from orders
    group by order, suborder
) SubOrderTotal
group by order 
```

一般来说，我不建议对两名员工进行刚性转换或重复子订单收入。在处理现实世界的数据时，做出如此严格的假设通常会导致错误。但是，我不知道你的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:50:29.420

```
DECLARE @SubOrder TABLE
(
    OrderNum    INT NOT NULL,
    SubOrder    INT NOT NULL,
    EmployeeID  NVARCHAR(50) NOT NULL,
    Revenue     NUMERIC(10, 2) NOT NULL
);

INSERT  @SubOrder (OrderNum, SubOrder, EmployeeID, Revenue)
SELECT N'0813700' AS [OrderNum], N'1077980' AS [SubOrder], N'CREW' AS [employeeid], N'258.57' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1257060' AS [SubOrder], N'95LIV' AS [employeeid], N'575.04' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1342944' AS [SubOrder], N'95LIV' AS [employeeid], N'31.68' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1257060' AS [SubOrder], N'95NAT' AS [employeeid], N'575.04' AS [revenue] UNION ALL
SELECT N'0935744' AS [OrderNum], N'1342944' AS [SubOrder], N'95NAT' AS [employeeid], N'31.68' AS [revenue];

SELECT  pvt.OrderNum,
        pvt.TotalRevenue,
        pvt.[1] AS Emp1,
        pvt.[2] AS Emp2
FROM
(
        SELECT  dt.OrderNum,
                dt.EmployeeID,
                DENSE_RANK()    OVER(PARTITION BY dt.OrderNum ORDER BY dt.EmployeeID) AS Rnk,
                SUM(dt.Revenue) OVER(PARTITION BY dt.OrderNum) AS TotalRevenue
        FROM
        (
                SELECT  so.OrderNum,
                        so.EmployeeID,
                        ROW_NUMBER() OVER(PARTITION BY so.OrderNum, so.SubOrder ORDER BY @@SPID) AS RowNum,
                        so.Revenue
                FROM    @SubOrder so
        ) dt
        WHERE   dt.RowNum = 1
) src
PIVOT   ( MAX(src.EmployeeID) FOR src.Rnk IN ([1], [2]) ) pvt 
```

结果：

```
OrderNum TotalRevenue Emp1   Emp2
-------- ------------ ------ -----
813700   258.57       CREW   NULL
935744   606.72       95LIV  95NAT 
```

中间结果`(...) src`：

```
OrderNum EmployeeID Rnk TotalRevenue
-------- ---------- --- ------------
813700   CREW       1   258.57
935744   95LIV      1   606.72
935744   95NAT      2   606.72 
```

中间结果`(...) dt`：

```
OrderNum EmployeeID RowNum Revenue
-------- ---------- ------ -------
813700   CREW       1      258.57
935744   95LIV      1      575.04
935744   95NAT      2      575.04
935744   95NAT      1      31.68
935744   95LIV      2      31.68 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:00:03.033

这应该给出您正在寻找的结果：

```
create table #temp
(
    ordernum int,
    suborder int,
    employeeid varchar(50),
    revenue money
)

insert into #temp values(0813700, 1077980, 'CREW', 258.57)
insert into #temp values(0935744, 1257060, '95LIV', 575.04)
insert into #temp values(0935744, 1342944, '95LIV', 31.68)
insert into #temp values(0935744, 1257060, '95NAT', 575.04)
insert into #temp values(0935744, 1342944, '95NAT', 31.68)

select ordernum
    , sum(revenueperorder) as total
    , employee1
    , case when employee1 = employee2 then null else employee2 end as employee2
from 
(
    select ordernum
        , revenue as revenueperorder
        , min(employeeid) as employee1
        , max(employeeid) as employee2
    from #temp
    group by ordernum, revenue
) x
group by ordernum, employee1, employee2

drop table #temp

Results:

813700  258.57  CREW    NULL
935744  606.72  95LIV   95NAT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T21:59:49.647

到目前为止的答案需要一个硬编码的枢轴，其中employee1和2定义为枢轴实体，当然，如果您的数据是动态的，我想您将拥有不同数量的员工（因此需要不同数量的列） ? 如果是这样，我建议您采用混合动态 SQL / Pivot 示例，例如：

[数据透视表和连接列](https://stackoverflow.com/questions/159456/pivot-table-and-concatenate-columns#159803)

或这个：

[sql 2005 中的 PIVOT](https://stackoverflow.com/questions/198716/pivot-in-sql-2005#199763)

# android - Android, AsyncTask 与 kSoap2

> ID：10388983
> 
> 赞同：4
> 
> 时间：2012-04-30T18:54:48.640
> 
> 标签：android, android-asynctask, ksoap2

我正在编写一个主要使用从 Web 服务获取的数据的应用程序，并且我想使用 AsyncTask 在后台运行 SOAP 调用......我对 Android 相当陌生（作为一名 iOS 程序员），所以我我对此有点新...

现在，我有一个登录屏幕，我在其中获取用户提供的登录信息并根据服务器上的信息检查它......

所以在我的登录活动中：

```
 loginBtn.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            //Run the connection to authenticate the user
            AuthenticateConnection mAuth = new AuthenticateConnection();

            mAuth.mNumber = number;
            mAuth.mPassword = pass;

            mAuth.connection();
        }
    } 
```

我的肥皂课是这样的：

```
public class AuthenticateConnection
{
    private static final String SOAP_ACTION = "http://tempuri.org/Authenticate";
    private static final String METHOD_NAME = "Authenticate";
    private static final String NAMESPACE = "http://tempuri.org/";
    private String URL;

    public Boolean userOK;

    public String mNumber;
    public String mPassword;

    public AuthenticateConnection()
    {

    }

    public void connection()
    {
        Singleton service = Singleton.getInstance();
        String firstURL = service.getURL();
        URL = firstURL + "Parent.svc";

        System.out.println("Connection to: " + URL);

        //Initialize soap request
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        //Add parameters
        request.addProperty("login", mNumber);
        request.addProperty("password", mPassword);

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet=true;
        envelope.implicitTypes=true;
        envelope.setAddAdornments(false);

        //Prepare request
        envelope.setOutputSoapObject(request);

        //Needed to make the internet call
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        //Allow for debugging - needed to output the request
        androidHttpTransport.debug = true;

        try 
        {
            //this is the actual part that will call the web service
            androidHttpTransport.call(SOAP_ACTION, envelope);

            //Get the SoapResult from the envelope body.
            //Object result = envelope.getResponse();
            //Object result = envelope.bodyIn;
            SoapObject sResult = (SoapObject)envelope.bodyIn;

            String tempID = sResult.getProperty("AuthenticateResult").toString();

            //Check if the user exists and has the correct password
            if(tempID != "-1")
            {
                userOK = true;

                //Store the values in the singleton class
                service.parentID = sResult.getProperty("AuthenticateResult").toString();
                service.parentToken = sResult.getProperty("token").toString();
            }

            //If -1 is returned, then either the number or the password is incorrect
            else
            {
                userOK = false;
            }           
        } catch(org.xmlpull.v1.XmlPullParserException ex2)
        {               
            //System.out.println(androidHttpTransport.requestDump.toString());

        }  catch (Exception e)
        {
            e.printStackTrace();
            System.out.println(androidHttpTransport.requestDump.toString());
        }
    }
} 
```

所以我的问题是，我将如何使用 AsyncTask 执行此操作？我一直在看一些关于 AsyncTask 的教程，但到目前为止还没有真正“得到它”......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T09:39:06.437

你可以做：

```
private class ConnectionTask extends AsyncTask<String, Void, Void> {
    private ProgressDialog dialog = new ProgressDialog(ACTIVITY_NAME.this);

    protected void onPreExecute() {
        dialog.setMessage("Connecting...");
        dialog.show();
    }

    protected void doInBackground(String... args) {
        AuthenticateConnection mAuth = new AuthenticateConnection();
        mAuth.mNumber = args[0];
        mAuth.mPassword = args[1];
        mAuth.connection();
    }

    protected void onPostExecute(Void v) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
    }
} 
```

然后调用它：

```
loginBtn.setOnClickListener(new OnClickListener()
{
    public void onClick(View v)
    {
        //Run the connection to authenticate the user
        new ConnectionTask().execute(number, pass);
    }
} 
```

您的`connection`方法`AuthenticateConnection`应该返回一些内容以确保用户已通过身份验证。然后您可以在 中使用该值`onPostExecute`，如下所示：

```
 protected void onPostExecute(Integer res) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
        if (res.intValue() == OK) {
            /* Maybe start a new Activity ...*/
        } else {
            /* Maybe show a Toast with an error message ...*/
        }
    } 
```

在这种情况下，异步任务的签名会改变： `private class ConnectionTask extends AsyncTask<String, Void, Integer>` 并且 doInBackground 应该返回一个`Integer`.

希望能帮助到你。

# javascript - 骨干模型属性在被调用时引发 TypeError

> ID：10388985
> 
> 赞同：1
> 
> 时间：2012-04-30T18:54:59.440
> 
> 标签：javascript, backbone.js, coffeescript

我正在尝试访问模型中的数组项目并且它引发错误但似乎正在找到正确的属性并将其写入控制台仍然

```
class GD.Views.Place extends Backbone.View
  template: JST['mobile/templates/place']
  initialize: ->
    @model.on('change', @render, this)
  render: ->
    $(@el).html(@template(place:@model, open:@openNow() ))
    console.log @model.get("coordinates")
    console.log @model.get("coordinates")[0]
    console.log @model.get("coordinates")[1]
    console.log("done")
    this
  openNow: ->
    ... 
```

视图未在屏幕上呈现，我在控制台中看到此消息

```
Uncaught TypeError: Cannot read property '0' of undefined
  GD.Views.Place.Place.render
  GD.Routers.Main.Main.place
  _.extend.route
  (anonymous function)
  _.some._.any
  _.extend.loadUrl
  _.extend.start
  window.GD.init
  (anonymous function)
  jQuery.Callbacks.fire
  jQuery.Callbacks.self.fireWith
  jQuery.extend.ready
  DOMContentLoaded
[51.4528837, -0.9739059999999428]
51.4528837
-0.9739059999999428
done 
```

错误消息是指上面的第 2 行和第 3 行 console.log。在访问嵌入式哈希中的更多属性时，它似乎也引发了错误。

我不明白为什么会发生这种情况或如何解决它。提前感谢您的帮助/耐心！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:18:37.540

Backbone 视图的通常模式是这样的：

```
v = new V
$(something).append(v.render().el) 
```

如果将其与用于初始化模型的通用模式相结合：

```
m = new M
m.fetch() # asynchronous! 
```

那么你可以得到这个：

```
m = new M
m.fetch()
v = new V(model: m)
$(something).append(v.render().el) 
```

这将允许在从服务器获取模型*之前*`v.render()`进行内部`append`调用。在您的情况下，这意味着将在上面的调用中，您将获得：*`@model.get('coordinates')``undefined``v.render()`*

 *```
Uncaught TypeError: Cannot read property '0' of undefined
... 
```

然后，`m.fetch()`从服务器获取其数据并[触发一个`"change"`事件](http://documentcloud.github.com/backbone/#Model-fetch)，然后该事件将调用`render`您的视图，您将得到以下信息：

```
[51.4528837, -0.9739059999999428]
51.4528837
-0.9739059999999428
done 
```

该消息序列正是您在控制台中看到的。

我猜你正在做这样的事情（如上）：

```
m = new M
m.fetch()
v = new V(model: m)
$(something).append(v.render().el) 
```

尝试检查`@model`内部是否实际加载，如果不是`render`，则抛出某种“正在加载...”消息；然后让`"change"`事件触发“真实”渲染。

* * *

PS：您可以在 CoffeeScript中使用`@`，而不是：`this`

```
initialize: ->
  @model.on('change', @render, @)
render: ->
  #...
  @ 
```

您还可以使用[粗箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)来定义您的`render`方法，而不必担心提供上下文`@model.on`：

```
initialize: ->
  @model.on('change', @render)
render: =>
  #...
  @ 
```

此外，如果您使用的是最新版本的 Backbone，您[`$el`](http://documentcloud.github.com/backbone/#View-%24el)的视图实例中有一个，因此您可以：

```
render: =>
  @$el.html(...)
  #...
  @ 
```*

# jquery-ui - 单击时通过 jQuery UI 模式打开任何视频？

> ID：10388989
> 
> 赞同：1
> 
> 时间：2012-04-30T18:55:26.723
> 
> 标签：jquery-ui

我有一个使用标准 Youtube iframe 代码嵌入多个 Youtube 视频的网站。

我希望通过文本链接触发这些，例如：

```
<p><a href="#" class="youtubevideo">Click Here</a> to watch a puppy do something.</p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/1AH9VEM_qC0?rel=0" frameborder="0" allowfullscreen></iframe> 
```

默认情况下隐藏 iframe，但单击链接时，视频会显示在 jQuery UI 模态窗口中。

一个页面上会有多个视频。

任何方向表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:17:23.250

jsfiddle：http: [//jsfiddle.net/2Ur9M/38/](http://jsfiddle.net/2Ur9M/38/)

```
<div id="vid1" class="play">vid1</div>
<div id="vid2" class="play">vid2</div>
<div id="vid3" class="play">vid3</div>

<div id="ifvid1" style="display:none">1<iframe width="420" height="315" src="" frameborder="0" allowfullscreen></iframe></div>
<div id="ifvid2" style="display:none">2<iframe width="420" height="315" src="" frameborder="0" allowfullscreen></iframe></div>
<div id="ifvid3" style="display:none">3<iframe width="420" height="315" src="" frameborder="0" allowfullscreen></iframe></div>

<script>
    $(function()
    {
        $(".play").each( function( index )
        {
            $(this).click( function()
            {
                $("#if"+$(this).attr("id")).dialog(
                {
                    modal: true
                });
            });
        });
    });
</script> 
```

# java-me - J2ME蓝牙OBEX如何实现ACTION（移动/重命名，设置权限）操作？

> ID：10388994
> 
> 赞同：5
> 
> 时间：2012-04-30T18:56:10.367
> 
> 标签：java-me, bluetooth, obex, jsr82

蓝牙 FTP 规范说我需要使用 ACTION 操作，这里有一个页面 [![](../Images/d58960f0fbe3c003bb02d86f6e108d8f.png)](https://i.stack.imgur.com/5OADQ.png)

但是[ClentSession](http://library.developer.nokia.com/index.jsp?topic=/Java_Developers_Library/GUID-9F75713D-5642-4C39-9A33-C20928F37BF7/javax/obex/ClientSession.html)只提供 GET 和 PUT 操作，javadocs 中没有提到任何内容。

这是创建文件操作的样子，非常简单

```
 public void create() throws IOException {
        HeaderSet hs = cs.createHeaderSet();
        hs.setHeader(HeaderSet.NAME, file);
        op = cs.put(hs);
        OutputStream os = op.openOutputStream();
        os.close();
        op.close();
    } 
```

问题 1：如何使用自定义标头实现 ACTION 操作以执行移动/重命名和设置权限？没有 JSR82 OBEX API 应该是可能的。请帮助我做到这一点。

问题2：我了解如何设置权限吗？根据 OBEX_Errata Compiled For 1.3.pdf （感谢 alanjmcf！）

[![1](../Images/70af10a3a6750663000d998577be279f.png)](https://i.stack.imgur.com/6RjVm.png)

[![2](../Images/dc82c1bf5e01ebce8cfa836cb37322d9.png)](https://i.stack.imgur.com/362M1.png)

因此，要设置为只读，我应该执行以下操作：

```
 int a = 0;

    //byte 0 //zero
    //byte 1 //user
    //byte 2 //group
    //byte 3 //other

    //set read for user
    a |= (1 << 7); //8th bit - byte 1, bit 0 -> set to 1
    // a = 10000000

    //for group
    a |= (1 << 15); //16th bit - byte 2, bit 0 -> set to 1
    // a = 1000000010000000

    //for other
    a |= (1 << 23); //24th bit - byte 3, bit 0 -> set to 1
    // a = 100000001000000010000000

    //or simply
    private static final int READ = 8421504 //1000,0000,1000,0000,1000,0000
    int value = 0 | READ;

    //========== calculate write constant =========
    a = 0;
    a |= (1 << 8); //write user
    a |= (1 << 16); //write group
    a |= (1 << 24); //write other
    // a = 1000000010000000100000000
    private static final int WRITE = 16843008 // 1,0000,0001,0000,0001,0000,0000

    //========= calculate delete constant ==========
    a = 0;
    a |= (1 << 9); //delete user
    a |= (1 << 17); //delete group
    a |= (1 << 25); //delete other
    //a = 10000000100000001000000000
    private static final DELETE = 33686016; //10,0000,0010,0000,0010,0000,0000

    //========= calculate modify constant ==========
    a = 0;
    a |= (1 << (7 + 7)); //modify user
    a |= (1 << (15 + 7)); //modify group
    a |= (1 << (23 + 7)); //modify other
    //a = 1000000010000000100000000000000
    private static final MODIFY = 1077952512; // 100,0000,0100,0000,0100,0000,0000,0000

    // now, if i want to set read-write-delete-modify, I will do the following:
    int rwdm = 0 | READ | WRITE | DELETE | MODIFY;
    // and put the value to the header... am I right? 
```

如果正确，唯一的问题仍然是问题 1：我如何进行 ACTION 操作以及如何设置标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:36:34.317

请注意，您从蓝牙 FTP 规范中引用的文本提到了三个标头：ActionId、Name、DestName。因此，您需要添加一个 NAME 标头和一个 DestName 标头。Jsr-82 显然没有为该（新）标头定义 const，因此引用了 OBEX 规范：

修改
2.1 OBEX 标头

```
HI identifier | Header name | Description  
0x94            Action Id     Specifies the action to be performed (used in ACTION operation)  
0x15            DestName      The destination object name (used in certain ACTION operations)  
0xD6            Permissions   4 byte bit mask for setting permissions  
0x17 to 0x2F    Reserved for future use.  This range includes all combinations of the upper 2 bits 
```

所以创建以下等。（我的 Java 有点生疏）

```
static final int DEST_NAME = 0x15; 
```

并在您的代码中使用它。

**[添加]**所有作为动作的操作（动作）都使用ACTION操作！:-,) 那就是使用 OBEX 操作码 ACTION 而不是 PUT 或 GET 等。操作码 ACTION 的值为**0x86**。

我正在从“OBEX_Errata Compiled For 1.3.pdf”中阅读此内容。IrDA 确实对规范收费，但现在似乎根据要求提供（[http://www.irda.org](http://www.irda.org)）。索取最新的 OBEX 规范 (1.5 IIRC) 的副本。我自己也这样做了，但还没有得到回应。或者您可以尝试使用谷歌搜索“移动/重命名对象操作”以获取“1.3 Errata”PDF。

无论如何，如果 Java 阻止您使用新的操作码（仅允许 GET 和 PUT）并且还阻止您使用新的 HeaderId 值，那么您无论如何都无法继续。:-( *（他们没有理由这样做，因为 HeaderId 编码了它包含的数据类型）。

在再次查看 Java API 之后，我看不到任何通过 ClientSession 发送任意命令的方式。您必须手动构建数据包，连接到 OBEX 服务，然后通过该连接发送和接收数据包。构建数据包并不*太难......*

# mysql - 查询连接

> ID：10388996
> 
> 赞同：2
> 
> 时间：2012-04-30T18:56:29.093
> 
> 标签：mysql, join

这周我正在准备考试，我看到过去的试卷问题是这样的：

***讲师***

```
lec_id
lec_name
phone
dept 
```

***要求***

```
lec_id
book_id 
qty 
date 
```

***书***

```
book_id
title
author
cost
supplier 
```

我需要编写一个 MySQL 命令，该命令将找到每个请求 id#123 书籍的讲师的姓名和电话号码。

我尝试创建查询，如下所示：

```
SELECT lec_name, phone FROm lecturer 
  LEFT JOIN requests ON requests.lec_id = lecturer.lec_id 
  LEFT JOIN requests ON requests.book_id = book.book_id
WHERE book.book_id = 123 
```

但是我不断收到错误 Not unique table/alias: 'requests'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:15:30.083

```
SELECT lec_name, phone FROm lecturer 
  LEFT JOIN requests ON requests.lec_id = lecturer.lec_id 
  AND requests.book_id = book.book_id
WHERE book.book_id = 123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:56:17.477

最好从**书**开始，这样 WHERE 子句更清晰，也许更直观地适应搜索另一本特定书和/或所有书：

```
select book.book_id, book.title, lecturer.lec_name, lecturer.phone 
from book
left join requests on book.book_id = requests.book_id
left join Lecturer on requests.lec_id = Lecturer.lec_id 
where book.book_id = 123 
```

# php - 我应该如何命名关系数据库中的字段？

> ID：10388998
> 
> 赞同：0
> 
> 时间：2012-04-30T18:56:41.050
> 
> 标签：php, mysql

我即将创建一个数据库，其中的字段将出现在几个不同的表中（作为键）。例如，在我的列表中，我将有 MLS_ID。该字段也将出现在 listing_photos 表中。我应该在字段名称前面加上前缀以使其唯一：以 Listings_MLS_ID 为例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:59:25.067

这样做绝对没有意义。你总是可以在你的字段名前加上数据库和表名，得到你的唯一标识符，保持名称本身简洁明了。

```
listings.mls.id 
```

将处理表中属于数据库 的`id`字段。`mls``listings`

这将非常灵活：任何时候你需要长的唯一标识符 - 你有它。
在所有其他情况下，您可以使用短名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:05:12.103

将两个表中的键命名为相同 (MLS_ID)。`USING`数据库服务器通过让您使用更简洁的子句来奖励您这样做：

```
SELECT * FROM listings
JOIN listing_photos
  USING (MLS_ID) 
```

而不是这样：

```
SELECT * FROM listings
JOIN listing_photos
  ON listing_photos.listings_MLS_ID = listings.MLS_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:59:54.977

这是个人喜好。

为了我：

除了主键之外，我不使用本地表名作为前缀。例如，PERSON 表将获得 PERSON_ID 列，ADDRESS 表将获得 ADDRESS_ID 等。

PERSON_ADDRESS 表获取 PERSON_ID 和 ADDRESS_ID，而不是其他东西。

在您的查询中，列名在它们应该与键等效时是相等的，并且表别名告诉您哪个是哪个。