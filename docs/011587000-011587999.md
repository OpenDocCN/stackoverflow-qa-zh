# StackOverflow 问答 11587000-11587999

# java - 使用 JSONObject 和 JSONArray 创建 json 字符串

> ID：11587001
> 
> 赞同：8
> 
> 时间：2012-07-20T21:12:35.597
> 
> 标签：java, jquery, json

我有这样的数据：

新闻项目：

*   ID
*   标题
*   日期
*   文本

可能有很多 NewsItems 说 10。我必须将它们发送到 jquery。

我正在这样做：

```
JSONObject obj = new JSONObject();
JSONArray arr = new JSONArray();

for(int i = 0 ; i< list.size() ; i++){
    p = list.get(i);
    arr.put(p.getId());
    arr.put(p.getTitle());
    arr.put(new MyDateFormatter().getStringFromDateDifference(p.getCreationDate()));
    arr.put(getTrimmedText(p.getText()));
    obj.put(""+i,arr);
    arr = new JSONArray();
} 
```

这将创建一个像这样的 JSON 字符串：`{"1":["id","title","date","txt"],"2":[......and so on...`

这是正确的做法吗？

如何解析这个字符串，以便我可以在 jQuery 中获取每个新闻项目对象，以便我可以访问 attr。

像这样：

```
obj.id,
obj.title 
```

或者，如果这是创建 JSON 字符串的错误方法，请通过 jQuery 解析示例提出一些更好的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T21:25:04.957

我相信您正在向后组织数据。似乎您想使用 的数组`NewsItems`，如果是这样，那么您的 java JSON 生成代码应如下所示：

```
JSONObject obj = new JSONObject();
JSONArray arr = new JSONArray();

for(int i = 0 ; i< list.size() ; i++)
{
    p = list.get(i);

    obj.put("id", p.getId());
    obj.put("title", p.getTitle());
    obj.put("date". new MyDateFormatter().getStringFromDateDifference(p.getCreationDate()));
    obj.put("txt", getTrimmedText(p.getText()));

    arr.put(obj);

    obj = new JSONObject();
} 
```

现在您的 JSON 字符串将如下所示：

```
[{"id": "someId", "title": "someTitle", "date": "dateString", "txt": "someTxt"},
 {"id": "someOtherId", "title": "someOtherTitle", "date": "anotherDateString", "txt": "someOtherTxt"},
 ...] 
```

假设您的 NewsItem 获取器返回`Strings`. JSONObject 方法`put`也被重载以采用原始类型，因此，例如，如果您`getId`返回一个`int`，那么它将被添加为裸 JSON `int`。我会假设`JSONObject.put(String, Object)`调用`toString`值，但我无法验证这一点。

现在在 javascript 中，您可以直接使用这样的字符串：

```
var arr =
    [{"id": "someId", "title": "someTitle", "date": "dateString", "txt": "someTxt"},
     {"id": "someOtherId", "title": "someOtherTitle", "date": "anotherDateString", "txt": "someOtherTxt"}];

for (i = 0; i < arr.length; i++)
    alert(arr[i].title); // should show you an alert box with each first title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:22:32.370

json 对象的想法与字典/映射相同，其中您将键和值分配给这些键，因此您要构造的内容如下所示：

```
{"1": {"title": "my title", "date": "17-12-2011", "text": "HELLO!"}, "2": ....} 
```

其中“1”是 id，内容是另一个包含信息的字典/地图。

假设您将对象分配给名为**my_map**的变量，现在您可以将其处理为：

```
 my_map.1.title
 my_map.3.text
 ... 
```

迭代它只需使用：

```
for (info in my_map){
    data = my_map[info];
    //do what you need
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:21:07.117

用于将 JSON 对象转换为 JSON 字符串使用

```
JSON.stringify(json_object) 
```

反向使用：

```
JSON.parse(json_string) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:21:52.980

这是正确的方法——

```
final JSONArray arr = new JSONArray();

for(int i = 0 ; i< list.size() ; i++) {
    final JSONObject obj = new JSONObject();
    p = list.get(i);
    obj.add("id", p.getId());
    obj.add("title", p.getTitle());
    obj.add("date", new MyDateFormatter().getStringFromDateDifference(p.getCreationDate()));
    obj.add("txt", getTrimmedText(p.getText()));
    arr.add(obj);
} 
```

这将产生

`[{"id": 1, "date": 222, "title": "abc", "txt": "some text"}, {...}]`

现在，当您在客户端解析 json 时，您可以遍历数组，并且对于您可以访问的每个 json 对象 -

`obj.id`或者`obj["id"]`

# javascript - iOS jquery scrollview 插件不会在 iframe 上滚动 y

> ID：11587007
> 
> 赞同：0
> 
> 时间：2012-07-20T21:13:06.527
> 
> 标签：javascript, jquery, ios, jquery-mobile, scrollview

我在 jquery 移动文件上使用滚动视图插件，并且在 iOS 上运行良好。但是，当我使用 iframe 时，不应用滚动 y 并且其内容保持固定。如何在 iframe 上应用滚动 y？谢谢

```
<div data-role="page" id="init" data-theme="a">

    <div data-role="header" id="head" data-position="fixed" data-tap-toggle="false">
    </div>
    <div data-role="content" data-scroll="y" id="cont" data-theme="a" style="border:none;">
        <iframe data-scroll="y" src="http://www.abcd.com" style="border: 0px none;" height="100%" width="100%">
        </iframe>
    </div>
    <div id="id3">
    </div>
</div> 
```

附加了所有必要的 jquery mobile 和 scrollview 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:07:49.210

Please @Jaume try this,

```
$(function() {
   $('#cont').scrollview({
      direction:'y'
   })
}) 
```

Else, you need to include the `jquery.mobile.scrollview.js` file.

# python - Python I/O 索引超出范围，而不是一个错误（我认为）

> ID：11587012
> 
> 赞同：0
> 
> 时间：2012-07-20T21:13:18.150
> 
> 标签：python, io

我有这个简单的代码，它实际上只是为了帮助我理解 Python I/O 的工作原理：

```
inFile = open("inFile.txt",'r')
outFile = open("outFile.txt",'w')
lines = inFile.readlines()

first = True
for line in lines:
    if first == True:
        outFile.write(line)  #always print the header
        first = False
        continue
    nums = line.split()
    outFile.write(nums[3] + "\n") #print the 4th column of each row
outFile.close() 
```

我的输入文件是这样的：

```
#header
34.2 3.42 64.56 54.43 3.45
4.53 65.6 5.743 34.52 56.4
4.53 90.8 53.45 134.5 4.58
5.76 53.9 89.43 54.33 3.45 
```

输出按原样打印到文件中，但我也收到错误：

```
 outFile.write(nums[3] + "\n")
IndexError: list index out of range 
```

我假设这是因为它继续读取下一行，尽管不再有任何数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:14:56.387

该错误表明在您的源代码中，您有以下行：

```
outFile.write(nums[6] + "\n") 
```

请注意，这与您在问题中显示的`6`不同。`3`您可能有两个不同版本的文件。

它失败了，因为`nums`是分割线的结果，在你的情况下它只包含 5 个元素：

```
for line in lines:
    # ...
    # line is for example "34.2 3.42 64.56 54.43 3.45"
    nums = line.split() 
    print len(nums) 
```

您不能索引超出列表的末尾。

您的代码中也可能有错误。您编写标题，然后将其拆分并从中写入一个元素。你可能想要一个 if/else。

```
for line in lines:
    if first == 1: 
        # do something with the header
    else:
        # do something with the other lines 
```

或者您可以在进入循环之前单独处理标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:30:16.467

其他人已经回答了你的问题。这是“始终打印出文件头”的更好方法，避免`first`在每次迭代时进行测试：

```
with open('inFile.txt', 'r') as inFile, open('outFile.txt', 'w') as outFile:
    outFile.write(inFile.readline()) #always print the header
    for line in inFile:
        nums = line.split()
        if len(nums) >= 4: #Checks to make sure a fourth column exists.
            outFile.write(nums[3] + "\n") #print the 4th column of each row 
```

这里发生了几件事：

```
with open('inFile.txt', 'r') as inFile, open('outFile.txt', 'w') as outFile: 
```

该`with`表达式是一种打开文件的便捷方式，因为即使发生异常并且 with 块提前退出，它也会自动关闭文件。

*注意：在 Python 2.6 中，您将需要使用两个`with`语句，因为直到 2.7 才添加对多上下文的支持。例如：*

```
with open(somefile, 'r') as f:
    with open(someotherfile, 'w') as g:
        #code here. 
```

* * *

```
outFile.write(inFile.readline()) #always print the header 
```

该`file`对象是一个被*消耗*的迭代器。调用时`readline()`，缓冲区位置向前推进并返回第一行。

* * *

```
for line in inFile: 
```

如前所述，该`file`对象是一个迭代器，因此您可以直接在`for`循环中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:15:19.170

问题是您正在处理“标题行”，就像其他数据一样。即，即使您确定了标题行，您*也不会*跳过它的处理。即，您不会避免`split()`在导致运行时错误的循环中进一步降低它。

要解决您的问题，只需插入`continue`如下所示的：

```
first = True
for line in lines:
    if first == True:
       outFile.write(line)  #always print the header
       first = False
       continue   ## skip the rest of the loop and start from the top 
    nums = line.split()
    ... 
```

这将绕过循环的其余部分，一切都将按应有的方式工作。

输出文件`outFile.txt`将包含：

```
#header
54.43
34.52
134.5
54.33 
```

第二个问题原来在输入文件的末尾有空行（请参阅下面的评论中的讨论）

*注意*：您可以重组您的代码，但如果您对此不感兴趣，上面的简单修复可以让您保留所有现有代码，并且只需要添加一行。正如其他帖子中提到的，值得研究使用它`with`来管理您打开的文件，因为它也会在您完成或遇到异常时为您关闭它们。

# windows - 如何防止批处理文件（.bat）在运行命令时关闭终端？

> ID：11587020
> 
> 赞同：5
> 
> 时间：2012-07-20T21:14:14.783
> 
> 标签：windows, batch-file, phpunit

在 Windows 7 机器上，如果我在终端中手动运行这样的 PHPUnit Selenium 命令：

```
phpunit --verbose --log-junit _selenium_tests\results\home.xml _selenium_tests\frontend\home.php 
```

它会生成一个浏览器并很好地运行测试。然后它在屏幕上输出以下内容：

```
Time: 10 seconds, Memory: 3.50Mb
OK (1 test, 3 assertions) 
```

并且终端保持打开状态。

现在，如果我将确切的命令复制并粘贴到一个空文件中并将其另存为`test.bat`并单击它，它也会运行测试。我可以看到浏览器打开并运行所有测试。唯一的问题是它会立即关闭终端提示符。所以我看不到上面的输出。

一个更大的问题是，因为如果我在最初的测试之后添加更多命令用于其他测试，它们不会运行，它会关闭终端。

我尝试添加：

```
pause 
```

在 bat 文件的末尾，但没有运气，它仍然关闭。知道如何防止这种情况并能够在不关闭终端的情况下一个接一个地运行命令吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T08:22:16.280

您的问题与[此](https://stackoverflow.com/questions/1985030/pause-being-ignored "这个")类似。尝试`call`在你的命令前面使用。如果您`.bat`从另一个`.bat`文件运行一个文件并且不使用`call`，则控制不会返回到第一个批处理文件，因此`pause`不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:30:30.847

*   尝试`cmd /K phpunit --verbose --log-junit _selenium_tests\results\home.xml _selenium_tests\frontend\home.php`

    *执行 string 指定的命令但保留*中的`/K`选项，请参阅[http://www.computerhope.com/cmd.htm](http://www.computerhope.com/cmd.htm)`cmd /K string`

**   另外，我不知道`phpunit`您执行的命令的文件类型 - 我不熟悉 selenium。如果它是批处理文件（即以 结尾`.bat`），您就不能从另一个批处理文件中调用它们：调用第二个批处理文件下面的所有内容将永远不会被执行。

    然后，您需要使用该`CALL`命令。`CALL` *使用户能够从另一个批处理文件中执行批处理文件*，
    请参阅[http://www.computerhope.com/call.htm](http://www.computerhope.com/call.htm)*

# google-apps-script - 谷歌脚本配额

> ID：11587022
> 
> 赞同：0
> 
> 时间：2012-07-20T21:14:23.937
> 
> 标签：google-apps-script, quota

我正在运行一个在线免费计算机科学教育课程网站。我使用 Google 脚本来评估学生测验（我使用 MCQ 脚本）。昨天，我网站的访问者激增。我注意到测验评分脚本不再向学生发送结果。我检查了失败通知，它说“一天服务调用次数过多：”

是因为配额吗？如果有配额，那么有什么办法可以增加吗？

我的班级有 800 多名学生，所以他们很可能会在我将作业发布到网上的当天提交。所以，我急需增加电子邮件配额。如果有任何解决方法，知道这也将非常有用。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T22:56:10.253

如果您将应用程序部署为以用户执行而不是您的身份运行，那么它将使用*他们的*配额运行。但是，他们必须单击以授权发送邮件，并且邮件似乎来自他们自己的帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:56:43.607

配额显示在[仪表板上](https://script.google.com/dashboard)，也可以通过[文档页面](https://developers.google.com/apps-script/)侧面板中的链接访问。恐怕你达到了电子邮件服务的配额。

...

编辑：啊，没有看到科里的回答......当然是聪明的建议;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-06T00:12:34.987

尝试使用外部 API（即[Mandrill](//mandrill.com)）。Mandrill（由 Mailchimp 开发，因此非常强大）具有简单的外部 API，但限制更大（大约数千）。

您甚至可以设置发件人地址，使其看起来不像垃圾邮件（或者，实际上，与普通的 Google Apps 脚本发送电子邮件有任何不同）。

查看[在 Google Apps 脚本中使用 Mandrill API](https://stackoverflow.com/questions/19354200/use-mandrill-api-in-google-apps-script)。

# jquery - rails3 在生产中断言管道问题

> ID：11587025
> 
> 赞同：0
> 
> 时间：2012-07-20T21:14:46.340
> 
> 标签：jquery, ruby-on-rails-3, asset-pipeline

当我尝试在共享主机上部署 Rails 3.2.6 应用程序（在 ruby​​ 1.9.2 中）时遇到问题。

只是为了缩小似乎无法识别 Jquery 的问题，我在 application.js 文件中进行了以下测试

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree .

$(document).ready(function() {
    alert("inside jquery")
})
alert("outside jquery") 
```

因此，当页面加载`"outside jquery"`警报时，**而不是**“ **内部 jquery”**

这在我的本地机器上以生产模式工作（但没有乘客）

下面是我的production.rb（env文件）

```
Sees::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5
end 
```

我相信这与 rails3 中的断言管道有关，如果有人可以帮助我解决这个问题，那就太好了，在此先感谢

更新 - 我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
gem 'capistrano'

# To use debugger
# gem 'ruby-debug'
# gem 'debugger'

#authentication
gem 'devise'

#file upload
gem 'paperclip' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:19:46.893

将`jquery-rails`宝石移出资产组并`bundle`

# delphi - Delphi：EmbeddedWB 奇怪的代理错误？

> ID：11587026
> 
> 赞同：3
> 
> 时间：2012-07-20T21:14:48.233
> 
> 标签：delphi, proxy, browser

这是我的 Form1.FormCreate 代码：

```
 GoodWB:=TEmbeddedWB.Create(Form1);
    TWinControl(GoodWB).Name :='NetPartBmb';
    TWinControl(GoodWB).Parent := Form1;
    GoodWB.SetBounds(0,50,300,300);
    //GoodWB.ProxySettings.SetProxy('','83.137.53.190:8080','<local>');
    //GoodWB.ProxySettings.AutoLoadProxy:=true;
    GoodWB.Navigate('www.google.com'); 
```

EmbeddedWB 的表现很奇怪。当我尝试加载页面时，它会抛出一个错误，就像我不在线一样。
但是，如果我取消注释这些代理设置（代理 83.137.53.190:8080 是一个功能齐全的代理顺便说一句），那么它可以工作，但使用该代理。似乎它使用了一些未知的代理。

如何禁用代理并使用自己的 IP？

顺便说一句：这以前没有发生过，我之前也一直在用它设置代理，但后来我删除了所有代理代码部分，所以我不知道当没有代理设置代码时是什么原因造成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:23:44.360

我不知道如何`TEmbeddedWB`工作，但`TWebBrowser`你必须将完整的 URL 传递给`Navigate()`，而不仅仅是主机名本身：

```
GoodWB.Navigate('http://www.google.com'); 
```

如果您想连接到 IP 地址而不是主机名，您仍然需要指定协议方案：

```
GoodWB.Navigate('http://TheIPHere'); 
```

# c++ - 错误：从 'void*' 到 'char' C++ 数组的无效转换

> ID：11587028
> 
> 赞同：0
> 
> 时间：2012-07-20T21:14:49.663
> 
> 标签：c++

对 C++ 来说非常新，当我编译时出现此错误：

```
error: invalid conversion from ‘void*’ to ‘char’ 
```

这到底是什么意思？我认为它与内存有关，我还没有启动阵列或类似的东西？

这是我的代码：

```
char students[150][150];
int main()
{
    readFile();
}

void readFile()
{
    string line;
    ifstream file("scores.txt");

    for(int i = 0; i  <  150; i++) {
        for (int x = 0; x < 150; x++) {
            students[i][x] = getline(file, line, ' ');
        }
    }
    for(int i = 0; i  <  150; i++) {
        cout << students[i][i];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:26:13.083

getline 返回一个 basic_istream，你不能将它设置为 char 类型

# android - Eclipse 找不到 com.google.android.maps.MapActivity 的文件

> ID：11587030
> 
> 赞同：3
> 
> 时间：2012-07-20T21:15:02.113
> 
> 标签：android, mapactivity

经过数小时的代码配置和搜索，我已经消除了几百个错误，只剩下以下两个：

> “该项目未构建，因为其构建路径不完整。找不到 com.google.android.maps.MapActivity 的类文件。修复构建路径，然后尝试构建此项目”
> 
> “com.google.android.maps.MapActivity 类型无法解析。它是从所需的 .class 文件中间接引用的”

我到处寻找有关如何解决此问题的任何提示。我的构建路径似乎很好。我包括了所有可能适用的 JAR。我很确定我使用的是正确的 ADT，所以任何关于需要改变的帮助都会很棒。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T21:18:42.663

您需要将构建目标（例如，Eclipse 中的 Project > Properties > Android）设置为具有“Google API”的目标。现在，我的猜测是你没有。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T21:18:41.380

您需要在项目属性中设置正确的 Android 构建目标（在 Package Explorer - 属性 - Android 中右键单击您的项目），将目标名称设置为“Google APIs”和相应的 API 级别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T23:49:39.453

您需要确保您的项目在应用程序的构建路径中包含*maps.jar 。*

为此，您必须将您的应用程序定位到“Google API”之一（在 Eclipse 中，Project Properties > Android）。`project.properties`如果您的文件或`defaulf.properties`文件有类似 的行 ，您可以验证您的应用程序是否会编译到该目标版本`target=Google Inc.:Google APIs:8`，即，您已将应用程序定位到 Android 版本 2.2 (Froyo)。

另外，请确保您在清单文件**中** `application`的标记内定义了以下行：

```
<uses-library android:name="com.google.android.maps" /> 
```

在此之后，我建议您在部署之前清理您的项目。

# xml - In Magento, how do you add the catalog to a page link?

> ID：11587041
> 
> 赞同：0
> 
> 时间：2012-07-20T21:16:22.023
> 
> 标签：xml, magento, layout, content-management-system, catalog

I've made a custom page.xml layout and it is working. Now, how do I add the catalog to the link entitled "products" in the header? Right now it is a CMS page.

You can see site so far [here](http://prodetailcarcare.evermight.com/home):

I've been searching all afternoon, and couldn't find anything. The closest was this, but it wouldn't work either after trying a few variations. [Magento: catalog in /catalog url path](https://stackoverflow.com/questions/9992365/magento-catalog-in-catalog-url-path)

In the custom theme, I have copied and created the folders for layout/catalog.xml, catalog/navigation/left.phtml, catalog/category/view/phtml and catalog/product/gallery.phtml.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:12:20.093

Essentially, instead of making the link a CMS page, I simply pointed it to a catalog's category.

I created a sub-category called "products" inside the default top-level category, which I found out is good practice to keep the breadcrumbs in tact. Created the URL slug "products". Then pointed the link to www.magentostore/products. Initially that didn't work, but after investigating further, I needed to add .html to the end so it should be www.magentostore/products.html. Products showed up after that.

Also, as John says in the comments, make sure that the settings for displaying products and inventory levels are set in the sites's admin (System, Config, Catalog/Inventory).

# php - 使用 PHP 将 SVG 转换为 PNG 的粗糙边缘

> ID：11587042
> 
> 赞同：0
> 
> 时间：2012-07-20T21:17:06.077
> 
> 标签：php, svg, imagemagick, png, edges

我正在使用以下脚本生成 SVG 的放大 PNG 版本。

```
<img src="barrington.svg" width="418" height="188"/> //comparison
<?php
    $im = new Imagick();
    $im->setBackgroundColor(new ImagickPixel('transparent'));
    $svg = file_get_contents("barrington.svg");
    $im->setresolution(144,144);
    $im->readImageBlob($svg);
    $im->setImageFormat("png32");
    echo '<img src="data:image/png32;base64,' . base64_encode($im) . '"  />'
?> 
```

当以相同大小显示/与 SVG 版本比较时，PNG 在某些图像周围有锯齿状边缘。

（参见此处的图片：http: [//i.stack.imgur.com/WGKIH.png](http://i.stack.imgur.com/WGKIH.png)）

我正在使用 ImageMagick（如果还不是很明显）并且想解决这个问题。

**编辑：** 澄清一下，为了我的目的，我需要一个 PNG 而不是 SVG。这不是修复浏览器或其他东西的兼容性问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:55:15.697

Generally there is confusion on setImageResolution and setResolution. So you may want to try setImageResolution along with setResolution and see if your edge issue is corrected. From my understanding setResolution is correct for density, but you want to still set your image size. Plus 144 may not be enough high enough density.

If not, then resizing an image is always a possibility. Make the image 2x larger then it needs to be and then resize it.

# css - CSS表格单元格填充在FF和IE8中无效

> ID：11587043
> 
> 赞同：0
> 
> 时间：2012-07-20T21:17:09.007
> 
> 标签：css

我可能遗漏了一些非常明显的东西，但我无法破解我的桌子的正确布局。我有一些嵌套表。最里面的表都是 class=cell ，我想控制这些表中 td 元素的填充。这是CSS：

```
.cell
{
    border-collapse: collapse;
    border: 2px solid black;
    margin: 5px;
}
.cell td
{
    border-collapse: collapse;
    border: 2px solid black;
    text-align: center;
    vertical-align: middle;
    height: 24px;
} 
```

当我将此添加到上面的任一选择时，它对表格没有影响：

```
padding-left: 30px;
padding-right: 30px;
padding-top: 0px;
padding-bottom: 0px; 
```

我没有其他影响 td 元素的 CSS。我究竟做错了什么？

谢谢。

编辑：这是完整的 CSS。它应用于一组嵌套表。外部的包含表是 class=outer。它包含左右两列的两个表格，并且在列中，带有 class=cell 的表格彼此堆叠：

```
.outer
{
    border: none;
    margin-left: auto;
    margin-right: auto;
}
    .outer td
{
    vertical-align: top;
}
    .column
{
    border: none;
}
#rightColumn table, #leftColumn table
{
    width: 100%;
}
    .cell
{
    border-collapse: collapse;
    border: 2px solid black;
    margin: 5px;
}
    .cell td
{
    border-collapse: collapse;
    border: 2px solid black;
    text-align: center;
    vertical-align: middle;
    height: 24px;
    padding-left: 3px;
    padding-right: 3px;
}
.image
{
    padding: 0;
    margin: 0;
    width: 75px;
}
.messages td
{
    border-collapse: collapse;
    border: 2px solid #FF0000;
    text-align: left;
}
h1
{
    text-align: center;
    font-size: 350%;
}
h2
{
    text-align: center;
}
th
{
    background-color: #2B60DE;
    color: #FFFFFF;
}
.gray
{
    background-color: #AAAAAA;
}
.blue
{
    background-color: #2B60DE;
}
.orange
{
    background-color: #FFA500;
}
.green
{
    background-color: #00FF00;
}
.red
{
    background-color: #FF0000;
}
.yellow
{
    background-color: #FFFF00;
}
.white
{
    background-color: #FFFFFF;
}
.cell .span2
{
    vertical-align: bottom;
}
.centered
{
    text-align: center;
    padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T21:49:44.430

尝试添加`position: relative;`到您拥有的 css 规则中。+ 很高兴看到您的 html。

# python - 如何为 Huffman 编码和解码创建树？

> ID：11587044
> 
> 赞同：11
> 
> 时间：2012-07-20T21:17:10.597
> 
> 标签：python, tree, encode, huffman-code

对于我的任务，我将对霍夫曼树进行编码和解码。我在创建树时遇到问题，我被卡住了。

不要介意打印语句 - 它们只是供我测试并查看我的函数运行时的输出。

对于第一个 for 循环，我从我在主块中用于测试的文本文件中获取了所有值和索引。

在第二个 for 循环中，我将所有内容插入到优先级队列中。

我对下一步要去哪里感到很困惑——我正在尝试制作节点，但我对如何取得进展感到困惑。有人可以告诉我我这样做是否正确吗？

```
def _create_code(self, frequencies):
    '''(HuffmanCoder, sequence(int)) -> NoneType
    iterate over index into the sequence keeping it 256 elements long, '''
    #fix docstring
    p = PriorityQueue()
    print frequencies

    index = 0 
    for value in frequencies:
        if value != 0:
            print value #priority
            print index #elm
            print '-----------'       
        index = index + 1

    for i in range(len(frequencies)):
        if frequencies[i] != 0:
            p.insert(i, frequencies[i])  
            print i,frequencies[i]
            if p.is_empty():
                a = p.get_min()
                b = p.get_min()
                n1 = self.HuffmanNode(None, None, a)
                n2 = self.HuffmanNode(None, None, b)
                print a, b, n1, n2
    while not p.is_empty():
        p.get_min() 
```

我手动插入了前两个来启动我的树，对吗？

我如何继续前进？我知道它的想法，只是在代码方面我非常卡住。

顺便说一句，这是使用python。我尝试查看维基百科，我知道步骤，我只需要代码方面的帮助以及我应该如何继续，谢谢！

HuffmanNode 来自这个嵌套类：

```
class HuffmanNode(object):

    def __init__(self, left=None, right=None, root=None):
        self.left = left
        self.right = right
        self.root = root 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T21:37:26.003

Wikipedia 中的 Huffman 算法准确地告诉您如何创建节点树，因此您的程序可以基于该算法或其他类似算法。这是一个带有注释的 Python 程序，其中显示了相应的维基百科算法步骤。测试数据是英文文本中字母的频率。

创建节点树后，您需要将其向下移动以将 Huffman 代码分配给数据集中的每个符号。由于这是家庭作业，这一步取决于你，但递归算法是处理它的最简单、最自然的方法。只剩下六行代码了。

```
import queue

class HuffmanNode(object):
    def __init__(self, left=None, right=None, root=None):
        self.left = left
        self.right = right
        self.root = root     # Why?  Not needed for anything.
    def children(self):
        return((self.left, self.right))

freq = [
    (8.167, 'a'), (1.492, 'b'), (2.782, 'c'), (4.253, 'd'),
    (12.702, 'e'),(2.228, 'f'), (2.015, 'g'), (6.094, 'h'),
    (6.966, 'i'), (0.153, 'j'), (0.747, 'k'), (4.025, 'l'),
    (2.406, 'm'), (6.749, 'n'), (7.507, 'o'), (1.929, 'p'), 
    (0.095, 'q'), (5.987, 'r'), (6.327, 's'), (9.056, 't'), 
    (2.758, 'u'), (1.037, 'v'), (2.365, 'w'), (0.150, 'x'),
    (1.974, 'y'), (0.074, 'z') ]

def create_tree(frequencies):
    p = queue.PriorityQueue()
    for value in frequencies:    # 1\. Create a leaf node for each symbol
        p.put(value)             #    and add it to the priority queue
    while p.qsize() > 1:         # 2\. While there is more than one node
        l, r = p.get(), p.get()  # 2a. remove two highest nodes
        node = HuffmanNode(l, r) # 2b. create internal node with children
        p.put((l[0]+r[0], node)) # 2c. add new node to queue      
    return p.get()               # 3\. tree is complete - return root node

node = create_tree(freq)
print(node)

# Recursively walk the tree down to the leaves,
#   assigning a code value to each symbol
def walk_tree(node, prefix="", code={}):
    return(code)

code = walk_tree(node)
for i in sorted(freq, reverse=True):
    print(i[1], '{:6.2f}'.format(i[0]), code[i[1]]) 
```

在字母表数据上运行时，生成的霍夫曼代码为：

```
e  12.70 100
t   9.06 000
a   8.17 1110
o   7.51 1101
i   6.97 1011
n   6.75 1010
s   6.33 0111
h   6.09 0110
r   5.99 0101
d   4.25 11111
l   4.03 11110
c   2.78 01001
u   2.76 01000
m   2.41 00111
w   2.37 00110
f   2.23 00100
g   2.02 110011
y   1.97 110010
p   1.93 110001
b   1.49 110000
v   1.04 001010
k   0.75 0010111
j   0.15 001011011
x   0.15 001011010
q   0.10 001011001
z   0.07 001011000 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-02-20T12:21:28.527

另一种解决方案返回字典和包含结果图`{label:code}`的递归字典。`tree`输入`vals`是字典的形式`{label:freq}`：

```
def assign_code(nodes, label, result, prefix = ''):    
    childs = nodes[label]     
    tree = {}
    if len(childs) == 2:
        tree['0'] = assign_code(nodes, childs[0], result, prefix+'0')
        tree['1'] = assign_code(nodes, childs[1], result, prefix+'1')     
        return tree
    else:
        result[label] = prefix
        return label

def Huffman_code(_vals):    
    vals = _vals.copy()
    nodes = {}
    for n in vals.keys(): # leafs initialization
        nodes[n] = []

    while len(vals) > 1: # binary tree creation
        s_vals = sorted(vals.items(), key=lambda x:x[1]) 
        a1 = s_vals[0][0]
        a2 = s_vals[1][0]
        vals[a1+a2] = vals.pop(a1) + vals.pop(a2)
        nodes[a1+a2] = [a1, a2]        
    code = {}
    root = a1+a2
    tree = {}
    tree = assign_code(nodes, root, code)   # assignment of the code for the given binary tree      
    return code, tree 
```

这可以用作：

```
freq = [
(8.167, 'a'), (1.492, 'b'), (2.782, 'c'), (4.253, 'd'),
(12.702, 'e'),(2.228, 'f'), (2.015, 'g'), (6.094, 'h'),
(6.966, 'i'), (0.153, 'j'), (0.747, 'k'), (4.025, 'l'),
(2.406, 'm'), (6.749, 'n'), (7.507, 'o'), (1.929, 'p'), 
(0.095, 'q'), (5.987, 'r'), (6.327, 's'), (9.056, 't'), 
(2.758, 'u'), (1.037, 'v'), (2.365, 'w'), (0.150, 'x'),
(1.974, 'y'), (0.074, 'z') ]    
vals = {l:v for (v,l) in freq}
code, tree = Huffman_code(vals)

text = 'hello' # text to encode
encoded = ''.join([code[t] for t in text])
print('Encoded text:',encoded)

decoded = []
i = 0
while i < len(encoded): # decoding using the binary graph
    ch = encoded[i]  
    act = tree[ch]
    while not isinstance(act, str):
        i += 1
        ch = encoded[i]  
        act = act[ch]        
    decoded.append(act)          
    i += 1

print('Decoded text:',''.join(decoded)) 
```

可以使用 Graphviz 将树可视化为： [![表示霍夫曼码的图表](../Images/a1f55bad8408e4eea4a9140088544e2b.png)](https://i.stack.imgur.com/vSBQj.png)

该图由以下脚本生成（需要 Graphviz）：

```
def draw_tree(tree, prefix = ''):    
    if isinstance(tree, str):            
        descr = 'N%s [label="%s:%s", fontcolor=blue, fontsize=16, width=2, shape=box];\n'%(prefix, tree, prefix)
    else: # Node description
        descr = 'N%s [label="%s"];\n'%(prefix, prefix)
        for child in tree.keys():
            descr += draw_tree(tree[child], prefix = prefix+child)
            descr += 'N%s -> N%s;\n'%(prefix,prefix+child)
    return descr

import subprocess
with open('graph.dot','w') as f:
    f.write('digraph G {\n')
    f.write(draw_tree(tree))
    f.write('}') 
subprocess.call('dot -Tpng graph.dot -o graph.png', shell=True) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-28T11:57:35.267

@Dave walk_tree 缺少树处理代码

```
# Recursively walk the tree down to the leaves,
# assigning a code value to each symbol
def walk_tree(node, prefix="", code={}):
    if isinstance(node[1].left[1], HuffmanNode):
        walk_tree(node[1].left,prefix+"0", code)
    else:
        code[node[1].left[1]]=prefix+"0"
    if isinstance(node[1].right[1],HuffmanNode):
        walk_tree(node[1].right,prefix+"1", code)
    else:
        code[node[1].right[1]]=prefix+"1"
    return(code) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-03T03:01:49.267

@Dave class HuffmanNode(object) 有一个微妙的错误。当两个频率相等时抛出异常：例如让

```
 freq = [ (200/3101, 'd'), (100/3101, 'e'), (100/3101, 'f') ] 
```

然后你得到 TypeError: unorderable types: HuffmanNode() < str()。问题与 PriorityQueue 实现有关。我怀疑当元组的第一个元素比较相等时，PriorityQueue 想要比较第二个元素，其中一个是 python 对象。您将**lt**方法添加到您的类中，问题就解决了。

```
 def __lt__(self,other):
        return 0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-13T16:56:41.377

我今天正在解决这个问题，以尝试匹配上述响应中的结果。在大多数情况下，这个解决方案效果很好，但我发现唯一不直观的是在打印非节点（叶子）时添加 [0] 和 [1]。但这回答了奇迹问题 - 您基本上可以使用任何遍历机制打印它

```
import queue

class HuffmanNode(object):
    def __init__(self,left=None,right=None,root=None):
        self.left = left
        self.right = right
        self.root = root
    def children(self):
        return (self.left,self.right)
    def preorder(self,path=None):
        if path is None:
            path = []
        if self.left is not None:
            if isinstance(self.left[1], HuffmanNode):
                self.left[1].preorder(path+[0])
            else:
                print(self.left,path+[0])
        if self.right is not None:
            if isinstance(self.right[1], HuffmanNode):
                self.right[1].preorder(path+[1])
            else:
                print(self.right,path+[1])

freq = [
    (8.167, 'a'), (1.492, 'b'), (2.782, 'c'), (4.253, 'd'),
    (12.702, 'e'),(2.228, 'f'), (2.015, 'g'), (6.094, 'h'),
    (6.966, 'i'), (0.153, 'j'), (0.747, 'k'), (4.025, 'l'),
    (2.406, 'm'), (6.749, 'n'), (7.507, 'o'), (1.929, 'p'), 
    (0.095, 'q'), (5.987, 'r'), (6.327, 's'), (9.056, 't'), 
    (2.758, 'u'), (1.037, 'v'), (2.365, 'w'), (0.150, 'x'),
    (1.974, 'y'), (0.074, 'z') ]

def encode(frequencies):
    p = queue.PriorityQueue()
    for item in frequencies:
        p.put(item)

    #invariant that order is ascending in the priority queue
    #p.size() gives list of elements
    while p.qsize() > 1:
        left,right = p.get(),p.get()
        node = HuffmanNode(left,right)
        p.put((left[0]+right[0],node))
    return p.get()

node = encode(freq)
print(node[1].preorder()) 
```

# ruby - 在没有评估的情况下更改块绑定？

> ID：11587050
> 
> 赞同：2
> 
> 时间：2012-07-20T21:17:38.990
> 
> 标签：ruby, binding, proc

我意识到您可以使用更改块的绑定`instance_eval`

```
class Foo
  def bar &block
    instance_eval &block
  end
end

Foo.new.bar { self } # returns the instance 
```

但是一些内置方法接受块，在这种情况下，似乎不可能在不弄乱内置方法内部的情况下更改块的绑定。

```
class Foo
  def enum &block
    Enumerator.new &block
  end
end

Foo.new.enum { self }.each {} # returns main!!! 
```

有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:37:40.947

您可以通过以下方式解决它：

```
class Foo
  def enum &block
    Enumerator.new do |*args|
      instance_exec *args, &block
    end
  end
end 
```

但我相信您无法更改现有`Proc`短`instance_eval`/ `instance_exec`-ing 的绑定。

# ios - iOS App中管理facebook好友图片的最佳实践

> ID：11587061
> 
> 赞同：0
> 
> 时间：2012-07-20T21:18:47.353
> 
> 标签：ios, facebook-graph-api, uiimage

我正在开发一个 iOS 应用程序，它有一个包含 facebook 朋友列表的 tableview，我想管理这个列表以提高滚动性能。

我不想在每次用户打开该朋友列表视图时加载图像，并且可以将图像保存在本地，但同时这不是一个好习惯，因为用户可以在我们已经保存较旧的图片后更改他们的个人资料图片那些到文件系统。

所以我只是想知道管理这个的最好方法是什么？

另外，我怎样才能以最佳的优化尺寸获得这些图像？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:38:21.527

您可能可以在 AFNetworking 的 UIImageView 类中使用 setImageWithURL:placeholderImage: 来加载占位符（或现有图像），然后请求获取时将更新的最新图像。

文档在这里：

[http://afnetworking.org/Documentation/Categories/UIImageView+AFNetworking.html](http://afnetworking.org/Documentation/Categories/UIImageView+AFNetworking.html)

项目在这里：

[https://github.com/AFNetworking/AFNetworking/](https://github.com/AFNetworking/AFNetworking/)

UIImageView 应该负责调整图像的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T11:43:42.193

那么如果你想设置占位符图像是可能的。FBProfilePictureView 是一个 UIView 但如果查看代码，您会看到他们将 UIImageView 添加到其中。这就是为什么您可以使用：

```
for (UIView *view in cell.faceImageView.subviews) {
    if ([view isKindOfClass:[UIImageView class]]) {
        [(UIImageView*)view setImage:[UIImage imageNamed:@"placeholder"]];
        break;
    }
} 
```

Ofc，这是一种解决方法。但是，除非他们提供更好的东西，否则您不必在这里与 AFNetworking（这是一个很棒的库 btw）和查找 facebook 图像 url 混淆；）。

# python - 为什么 var = [0].extend(range(1,10)) 在 python 中不起作用？

> ID：11587069
> 
> 赞同：7
> 
> 时间：2012-07-20T21:19:56.123
> 
> 标签：python, list

我认为如果我在 python 中执行以下代码

```
var = [0].extend(range(1,10)) 
```

然后`var`将是一个包含值 0 - 9 的列表。

是什么赋予了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T21:21:37.810

[**`list.extend`**](http://docs.python.org/library/stdtypes.html#mutable-sequence-types)是一种就地方法。它对对象本身执行操作并返回`None`。

这会起作用：

```
var = [0]
var.extend(range(1, 10)) 
```

更好的是：

```
var = list(range(10)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T21:22:00.933

[extend()](http://docs.python.org/tutorial/datastructures.html)不返回任何东西（实际上`None`），它“就地”进行更改，即列表本身被修改。

我想你是这样的：

```
>>> var = [0]
>>> var.extend(range(1, 10))
>>> var
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T21:23:11.597

要使问题中的代码正常工作，您需要执行以下操作：

```
>>> var = [0]
>>> var.extend(range(1,10))
>>> var
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

它以前不起作用，因为[extend()](http://docs.python.org/tutorial/datastructures.html)返回`None`，这是设计使然：Python 遵守[Command/Query Separation](http://en.wikipedia.org/wiki/Command-query_separation)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T22:12:28.780

正如 Oscar López 和其他人已经解释的那样，extend 是一个返回 None 的命令，以遵守命令/查询分离。

他们都建议按预期使用扩展作为命令来解决此问题。但是还有另一种选择：改用查询：

```
>>> var = [0] + range(1, 10) 
```

了解这里的区别很重要。`extend`修改你的`[0]`，把它变成`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`. 但是`+`操作员让你`[0]`一个人呆着，并返回一个新列表`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`。

如果您有其他对列表的引用并且想要全部更改它们，显然您需要`extend`.

但是，在您仅使用 [0] 作为值的情况下，使用`+`不仅可以让您编写紧凑、流畅的代码（正如您所尝试的那样），它还可以避免改变值。这意味着如果您使用不可变值（如元组）而不是列表，则相同的代码可以工作，但更重要的是，它对于避免副作用的函数式编程风格至关重要。（这种风格有用的原因有很多，但一个明显的原因是不可变对象和无副作用的函数本质上是线程安全的。）

# c# - C# 中远程桌面的 Listview 焦点问题

> ID：11587073
> 
> 赞同：4
> 
> 时间：2012-07-20T21:20:25.950
> 
> 标签：c#, drag-and-drop, remote-desktop

我正在处理我公司用 C# 编写的调度应用程序中报告的问题。我们在调度网格右侧的 Listview 中有一个事件列表，您可以滚动浏览该列表并将事件拖放到网格上。这在 XP、Vista、7 等中非常有效——但在您使用远程桌面时则不然。使用远程桌面时，您必须双击事件以便将其拖到网格上，即使 RD 和应用程序以及 Listview 具有焦点。

我的老板告诉我，远程桌面不能很好地用于拖放操作，但我真的找不到任何证据。我尝试了多种方法来解决这个问题，包括重置焦点和/或选择，添加额外的点击事件调用，但没有任何效果。我有 DragLeave、MouseMove、MouseDown 和 MouseUp 事件可以玩。该代码确实很好地注册了 MouseMoves ......它似乎只是吞下了第一次点击。有没有人经历过这样的事情？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:58:09.283

Have you checked that the control loses focus when using it remotely ?

Did you try something like the code below ?

```
public override void OnMouseEnter(MouseEventArgs e)
{
    this.Focus();
} 
```

# css - 如何在 CSS 中将导航和内容区域的高度拉伸到 100%？

> ID：11587076
> 
> 赞同：0
> 
> 时间：2012-07-20T21:20:32.823
> 
> 标签：css, html, height

如果您访问[http://ffmages.com/final-fantasy-tactics](http://ffmages.com/final-fantasy-tactics)（例如），您会注意到页脚部分显示在导航和内容区域的后面。我想让导航和内容以 100% 的高度拉伸，并且页脚保持在屏幕底部。

以下是我用于页眉、菜单、内容和页脚部分的 CSS：

```
#container {
    width: 1000px;
    height: 100%;
    background-image: url(/images/background.gif); 
    margin: 0 auto;
}

#header {
    width: 1000px; 
    height: 98px;
    background-image: url(/images/header.jpg);
    background-repeat: no-repeat;
}

#primary {
    float: left; 
    width: 167px;
    height: 798px;
    text-align: left;
    padding-bottom: 14px;
    background-image: url(/images/nav-bg.jpg); 
    background-repeat: no-repeat;
    background-color: #FFFFFF;
    margin: 0px;
    border-top: 1px #000000 solid;
    border-left: 1px #000000 solid;
    border-right: 1px #000000 solid;
}

#content {
    float: right;
    width: 810px; 
    height: 100%;
    text-align: left;
    background-color: #FFFFFF; 
    border-top: 1px #000000 solid; 
    border-right: 1px #000000 solid; 
    padding: 10px;
    line-height: 1.5em; 
    margin: 0px;
}

#footer {
    clear: both;
    width: 998px;
    height: 18px;
    font-size: 7pt;
    color: #FFFFFF;
    text-align: center;
    background-color: #07162A;
    background-image: url(/images/footer-bg.jpg);
    border-top: 1px #000000 solid;
    border-left: 1px #000000 solid;
    border-right: 1px #000000 solid;
    border-bottom: 1px #000000 solid;
    padding-top: 6px;
    padding-bottom: 1px;
} 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:26:31.643

很难说没有看到 div 层次结构。

只是在这里吐口水，但您可以这样设置 div 结构。

```
---------------------------------------------
|                  HEADER                   |
---------------------------------------------
|      |                                    |
|      |                                    |
|      |                                    |
| NAV  |           BODY                     |
|      |                                    |
|      |                                    |
|      |                                    |
---------------------------------------------
|                  FOOTER                   |
--------------------------------------------- 
```

NAV实际上包含在BODY中。当 BODY 或 NAV 垂直扩展时， FOOTER 会相应地被推动。您必须使用边距和填充以使页脚与浏览器窗口的底部齐平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:29:11.167

您应该做的所有事情（基于给出的示例是将两个属性应用于您的 CSS

```
position: fixed;
bottom: 0; 
```

一旦应用了这两者，您的页脚应该始终位于页面底部，并且您设置它的宽度是多少......在您的情况下`998px`

# javascript - Javascript 表编辑器 -> MySQL CREATE 语句

> ID：11587078
> 
> 赞同：1
> 
> 时间：2012-07-20T21:20:46.237
> 
> 标签：javascript, mysql

我正在寻找一个 javascript 插件，它可以让用户使用非常基本的 HTML 界面创建 MySQL 表。理想情况下，CREATE 语句将来自 HTML 表。有人知道这样的脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:12:57.233

据我所知，没有一个 jquery 插件可以让你“创建”数据库表，不管你仍然需要使用一些服务器端代码来处理实际的 SQL 等。自己创建东西并不太难，我敲了我认为[这](http://jsfiddle.net/Sb4zW/)就是你要找的东西。*注意：这不是一个完整的实现：P只是一个想法*，基本上使用html创建表，将其解析为json，然后将其发送到服务器进行处理。

初始 html '模板'：

```
<table id="table_designer">
    <tr class="table_name">
        <td><input type="text" placeholder="table name" /></td>
    </tr>
    <tr class="field_name">
        <td>name</td>
        <td><input type="text" /></td>
    </tr>
    <tr class="type">
        <td>type</td>
        <td><select>
            <option>int</option>
            <option>varchar</option>
            <option>date</option>
        </select></td>
    </tr>
    <tr class="primary_key">
        <td>primary key</td>
        <td><input type="checkbox" /></td>
    </tr>
    <tr class="relationship">
        <td>related type</td>
        <td><select>
            <option>none</option>
            <option>one to many</option>
            <option>many to one</option>
            <option>many to many</option>
        </select></td>
    </tr>
    <tr class="related_table">
        <td>related table</td>
        <td><input type="text" /></td>
    </tr>
    <tr class="related_field">
        <td>related field</td>
        <td><input type="text" /></td>
    </tr>
    <tr class="controls">
        <td><button id="save">save</button></td>
        <td>
            <button id="delete">delete</button>
            <button id="add">add</button>
        </td>
    </tr>
</table> 
```

一些 jquery 来处理“动作”

```
/* parses table as json and sends to server */
$('#save').click(function() {
    var json= {};

    $('#table_designer tr').each(function(){
        var $t = $(this),
            prop = $t.attr('class');

        json[prop] = [];

        $t.children('td').each(function() {
            json[prop].push($(this).children().first().val());
        });
    });

    alert(JSON.stringify(json, null, " "));

    /* send the data to the server
    $.post('www.mysite.com', json, function(d, t, j) 
           { alert('success'); });
    */
});

/* deletes parent column */
$('#delete').click(function() {
    var $t = $(this),
        pos = $t.parents('td').index() + 1;

    $('#table_designer tr').each(function(){
        $(this).children('td:nth-child(' + pos +')').remove();
    });
});

/* adds a new field */
$('#add').click(function() {
    var $t = $(this),
        pos = $t.parents('td').index() + 1;

    $('#table_designer tr').each(function(){
        var clone = $(this).children('td').last().clone(true);
        clone.children('input').val('');
        $(this).children('td:nth-child(' + pos +')').after(clone);
    });
}); 
```

​</p>

# php - PHP中的数学错误 - 数字被截断？

> ID：11587080
> 
> 赞同：2
> 
> 时间：2012-07-20T21:20:47.043
> 
> 标签：php, string, math, double, type-conversion

我将数字`2.50`存储在一个名为的变量`$price`中，我可以将其传递给一个函数，它可以识别该值，`2.50`但是当我尝试将它与它相乘时，`2`我得到了答案`4`。我假设 PHP 正在截断原始值，然后我认为它可能会将其解释为字符串，因为我正在从 XML 文档中获取值，但[手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.conversion)说它将正确识别它，就`2.50`好像它是一个字符串一样。如果有人能对此有所了解，我将不胜感激。

**编辑：**这是我正在使用的代码-

```
$Price = new Prices();

// Traverse XML document
foreach ($simpleXML->product as $product) {

    // Gather info from the product array
    $price = $product->price;
    $type = $product->type;
    $price = $Price->getRealPrice($price, $type);
}

function getRealPrice($price, $type) {
    // echo $price returns 2.50

    // Switch statement on type
    case 'Keychain':
        return 1.7 * $price; // This returns 3.4
        break;
} 
```

返回 3.4 的事实是真正的问题，就好像它正在做`2 * 1.7`，即使它应该是`2.5`；我选择`2.5 * 2`了我原来的例子，因为它更明显地看到了问题。

**更新：**如果 我与演员表`1.8 * $price`呼应，我会得到这个：这两个点有点吓到我了......`$price``double``2.503.6`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:19:21.710

在函数的开头使用[floatval this 将字符串解析为浮点数](http://php.net/manual/en/function.floatval.php)

```
function getRealPrice($price, $type) {
   $price = floatval($price); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:31:03.600

这是一种疯狂的猜测，但您应该确保该值是“2.50”而不是“2,50”。

# c - 为什么我的 int 变量值会突然跳跃？

> ID：11587086
> 
> 赞同：0
> 
> 时间：2012-07-20T21:21:24.397
> 
> 标签：c, int

```
// a cursor variable, for positioning purposes
int cursor = 0;

// declare a counter
int counter = 0;

// start a loop
while (counter <= 0)
{
    // get the cursor positioned correctly
    fseek(fp, cursor, SEEK_SET);

    // read the file and search for the jpeg key
    JPG_KEY key;
    fread(&key, sizeof(JPG_KEY), 4, fp);

    // check the key to see if you are at the start of a jpeg
    if( check_jpg_key(key) )
        counter++;

    cursor++;
} 
```

出于某种原因，我的“光标”和“计数器”变量在该程序中间跳转到高得离谱的整数，而不是在每个循环中递增 1。使用gdb，我发现在这一行光标的值从0跳转到2099202，计数器的值从0跳转到3419700： fread(&key, sizeof(JPG_KEY), 4, fp);

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T21:24:08.080

```
fread(&key, sizeof(JPG_KEY), 4, fp); 
```

您正在读取`sizeof(JPG_KEY) * 4`字节，从地址`&key`开始存储它们。由于`key`只有一个足够的空间`sizeof(JPG_KEY)`，因此您正在覆盖堆栈中的其他变量。

[`fread`](http://www.lehman.cuny.edu/cgi-bin/man-cgi?fread+3)的签名是：

```
size_t fread(void *ptr, size_t  size,  size_t  nitems,  FILE *stream); 
```

也就是说，如果你只想阅读 1 `JPG_KEY`，你应该写：

```
fread(&key, sizeof(JPG_KEY), 1, fp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:24:11.060

`fread(&key, sizeof(JPG_KEY), 4, fp)`读取`4 * sizeof(JPG_KEY)`的字节数当然超过了您可以存储的字节数`key`。`4`用 a替换`1`，一切都应该工作。

从[`fread(3)`手册页](http://linux.die.net/man/3/fread)：

> ```
> size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream); 
> ```
> 
> 函数 fread() 从 stream 指向的流中读取数据的 nmemb 元素，每个 size 字节长，并将它们存储在 ptr 给定的位置。

如果您想阅读四个“jpeg 密钥”，您的代码将是正确的，即如果您有`JPG_KEY key[4];`

你的变量跳来跳去的原因是溢出导致你的`fread`调用覆盖那些其他变量，因为它们很可能位于`key`堆栈的后面。

# asp.net-mvc-3 - 相关元素的相关元素

> ID：11587093
> 
> 赞同：1
> 
> 时间：2012-07-20T21:21:56.973
> 
> 标签：asp.net-mvc-3, entity-framework, ef-code-first

我有以下问题。在调试一个我正在使用 Code First 进行一些操作的项目时，项目不会以某种方式添加到购买中。购买被添加到客户端。

这就是我播种数据的方式。

```
public class PublicDatabaseInitializer : DropCreateDatabaseIfModelChanges<PublicDataContext>
{
    protected override void Seed(PublicDataContext context)
    {
        context.Clients.Add(new Client()
        {
            // ...
            Purchases = new[]
                       {
                           new Purchase()
                           {
                               // ...
                               Items = new[]
                                        {
                                            new Item()
                                            {
                                                // ...
                                            },
                                            new Item()
                                            {
                                                // ...
                                            }
                                        }
                           },
                           new Purchase()
                           {
                               // ...
                           }
                       }
        });
        base.Seed(context);
    }
} 
```

这就是我声明两个 ICollection 属性的方式：

```
public virtual ICollection<Purchase> Purchases { get; set; }
public virtual ICollection<Item> Items{ get; set; } 
```

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:22:42.380

您需要显式调用`DbContext.SaveChanges()`

```
// add client stuff
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:30:31.853

感谢Slauma，我找到了解决方案。如本文所述：[stackoverflow.com/a/11548688/270591](https://stackoverflow.com/a/11548688/270591)。虽然我仍然不完全清楚原因，但解决方案的方法如下：

`user instance = true`从连接字符串中删除。

我想这与访问权限和/或权限有关。

# biztalk - 如何设置 BizTalk 主动/主动群集

> ID：11587099
> 
> 赞同：2
> 
> 时间：2012-07-20T21:22:18.287
> 
> 标签：biztalk, biztalk-2010, biztalk-deployment

我正在使用以下架构设置一个虚拟环境作为概念证明：

*   2 节点网络农场
*   2 节点 SQL 主动/被动故障转移集群
*   2 节点 BizTalk 主动/主动集群

前两个是直截了当的，现在我想知道 BizTalk 集群。

如果我遵循与设置 SQL 相同的模型（通过使用 Windows 中的故障转移集群管理器来创建集群），我想我最终会得到一个主动/被动集群。

是什么使 BizTalk 群集处于活动/活动状态？

我需要先创建一个 Windows 集群，还是只在两台机器上安装 BizTalk 并适当配置 BizTalk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:10:47.583

是的，我的理解是您确实需要先对操作系统进行集群。

也就是说，您通常可以避免集群的需要，除非您需要集群一个“拉”[接收处理程序，如 FTP、MSMQ、SAP](http://msdn.microsoft.com/en-us/library/gg634567)等。对于其他所有 IMO，通常只需在组中添加多个 BizTalk 服务器，然后将 NLB 用于例如 WCF 接收适配器。

基本原理是，通过运行每种“类型”的多个主机实例（例如 2+ 接收、2+ 进程、2+ 发送等），您还可以在不停机的情况下停止和启动主机实例，例如维护（补丁）、应用程序部署等。

Group 方法的一个警告是 SSO 主服务器不会自动进行故障转移，尽管这通常不是问题，因为其他服务器仍然能够从缓存中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:41:11.083

您可以在多计算机环境中配置 BizTalk 组。您可以参考[MSDN 下载中心](http://download.microsoft.com/download/0/F/F/0FFEF5D0-BE04-4D03-9125-75B8AD243E57/Installing%20BizTalk%20Server%202010%20and%20BAM%20in%20a%20Multi-Computer%20Environment.docx)提供的文档以获取更多详细信息。该文档专门有一节标题为“在多服务器环境中群集 BizTalk Server 的注意事项”

您还可以另外将 BizTalk 主机配置为群集资源。您可以参考[MSDN 上提供的文档以](http://msdn.microsoft.com/en-us/library/aa578376.aspx)获取更多详细信息。

# shell - ZSH which/whence 类型的别名 -p 不识别节点

> ID：11587101
> 
> 赞同：1
> 
> 时间：2012-07-20T21:22:32.023
> 
> 标签：shell, zsh

我们有代码来检查节点安装：

```
which="type -p"
if [ $SHELL = "/bin/zsh" ]; then
    which="whence"
fi
# make sure that node exists
node=`$which node 2>&1`
ret=$?
if [ $ret -ne 0 ] || ! [ -x "$node" ]; then
<"This error code is returned"> 
```

但是当我用 ZSH (OhMyZsh) 运行它时，它返回一个 127 （不存在）。注释掉`which="whence"`它可以正常运行。

在不删除整个混叠位的情况下，有什么办法可以让 ZSH 一起玩吗？理想情况下，我想在我的最终进行更改以完成这项工作，而不是完全修改此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T08:49:37.173

你的意思是，你运行`$node`并且似乎你试图运行名称为`node --alias-args`which 不存在的命令？

如果是这样，请将第三行更改为 use `whence -p`：它的输出与`type -p`bash 中的相同。如果不是，请说明何时返回此代码。

**更新**：我不知道在 ohmyzsh 中做了什么（尽管我不知道如何使内置函数找不到）所以只需尝试以这种方式重写代码：

```
# At the very top
if [ -n $ZSH_VERSION ] ; then
    emulate -L zsh
endif
<...>
which="type -p"
if [ -n $ZSH_VERSION ] ; then
    which=( whence -p ) # Changes variable type as well
endif
node=`$which node 2>&1`
if (( ? )) || ! test -x $node ; then
<...> 
```

# mysql - 列名中的mysql括号

> ID：11587106
> 
> 赞同：1
> 
> 时间：2012-07-20T21:22:48.957
> 
> 标签：mysql

> **可能重复：**
> [如何转义用作列名的保留字？MySQL/创建表](https://stackoverflow.com/questions/2889871/how-do-i-escape-reserved-words-used-as-column-names-mysql-create-table)

我希望这应该是一个容易回答的问题。我在各种表中有一系列列名，例如 T(x,y,t)、T(x,y,t-1)、T(x+1,y,t) 等。我知道有列名中的括号不受欢迎，但是如何在 SELECT 子句中引用这样的名称（带有表名）？

例如，我尝试过类似的事情

```
SELECT A.JDAY, 'B.T(x,y,t)'
FROM A, B 
```

和

```
SELECT A.JDAY, B.'T(x,y,t)'
FROM A, B 
```

...但这些似乎都不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T21:24:21.970

你可以使用反勾号：

```
SELECT A.JDAY, B.`T(x,y,t)`
FROM A, B 
```

未经测试，但它应该可以解决问题。

# r - Setting levels when creating a factor vs. `levels()<-`

> ID：11587111
> 
> 赞同：8
> 
> 时间：2012-07-20T21:23:03.173
> 
> 标签：r, factors

Let's create some factors first:

```
F1 <- factor(c(1,2,20,10,25,3))
F2 <- factor(paste0(F1, " years"))
F3 <- F2
levels(F3) <- paste0(sort(F1), " years")
F4 <- factor(paste0(F1, " years"), levels=paste0(sort(F1), " years")) 
```

then take a look at them:

```
> F1
[1] 1  2  20 10 25 3 
Levels: 1 2 3 10 20 25

> F2
[1] 1 years  2 years  20 years 10 years 25 years 3 years 
Levels: 1 years 10 years 2 years 20 years 25 years 3 years

> F3
[1] 1 years  3 years  10 years 2 years  20 years 25 years
Levels: 1 years 2 years 3 years 10 years 20 years 25 years

> F4
[1] 1 years  2 years  20 years 10 years 25 years 3 years 
Levels: 1 years 2 years 3 years 10 years 20 years 25 years 
```

First I note that the "expected" order of the levels in F2 is not similar to F1\. Taking a look at `factor` documentation reveals why: the levels are created by first sorting the input. In the case of F2, these are the strings, where sorting takes length into account (?).

What is harder for me to understand is the difference in setting the levels between F3 and F4\. In F3 I set the levels after the factor is created while in F4 I set them explicitly when creating the factor. In F3, the use of levels()<- isn't purely a relabel of the levels, but neither does it reorder them the way I expected.

Can someone explain the difference?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T22:14:40.143

`F1` uses numeric sorting, as you figured out yourself.

`F2` uses lexicographic sorting, first comparing the first character, breaking ties using the second, and so on, which is why `"10 years"` is between `"1 years"` and `"2 years"`.

`F4` is created from a character vector, but with an explicit list of possible factors. So that list is taken (without sorting) and identified with the numbers 1 through 6\. Then every item of your input is compared against the set of possible levels, and the associated number is stored. After all, a factor is simply a bunch of numbers (`as.numeric` will show them to you) associated with a list of levels used for printing. So `F4` gets printed just like `F2`, but its levels are sorted differently.

`F3` was created from F2, so its levels were unsorted initially. The assignment only replaces the set of level names, not the numbers in the vector. So you can think of this as *renaming* existing levels. If you look at the numbers, they will match those from `F2`, whereas the names associated, and the order of names in particular, matches that from `F4`.

As your question claims that this was not purely a relabel: yes, it is a pure relabel, you obtain `F3` from `F2` using the following changes (in both rows of the printout):

*   10 → 2
*   2 → 3
*   20 → 10
*   25 → 20
*   3 → 25

The `str` function is also a good tool to look at the internal representation of a factor.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T22:16:19.633

You created `F2` from the following data:

```
> paste0(F1, " years")
[1] "1 years"  "2 years"  "20 years" "10 years" "25 years"
[6] "3 years" 
```

Sorting the unique values to generate the levels results in the alphanumeric sorting that you mention

```
> levels(F2)
[1] "1 years"  "10 years" "2 years"  "20 years" "25 years"
[6] "3 years" 
```

Hence, `"2 years"` is actually stored as a `3` - it is in the third category or level. Note that the this gives rise to a subtle difference in the way the data is stored in the factor:

```
> as.numeric(F1)
[1] 1 2 5 4 6 3
> as.numeric(F2)
[1] 1 3 4 2 5 6 
```

When you now set the levels of `F3` explicitly, you are passing in these values:

```
> paste0(sort(F1), " years")
[1] "1 years"  "2 years"  "3 years"  "10 years" "20 years"
[6] "25 years" 
```

From above, the data were stored in `F3` as:

```
> as.numeric(F3)
[1] 1 3 4 2 5 6 
```

hence the 2nd element of `F3` gets the *third* level that you specified; `"3 years"`.

What `levels<-` does therefore is change the mapping between the numeric representation and the labels that are displayed. It most certainly is **not** a way to rearrange or relevel a factor which is what you appear to have expected. `levels<-` doesn't reorder the data either, it just changes the levels of the factor; the underlying numeric representation still holds and is thus mapped to the new levels.

In `F4` you set the levels explicitly at create time, hence the data are stored numerically in the same way as with `F1`:

```
> F4 <- factor(paste0(F1, " years"), levels=paste0(sort(F1), " years"))
> as.numeric(F4)
[1] 1 2 5 4 6 3 
```

It is the different underlying numeric representations of the data (or mapping to the original levels) of the individual data points that is causing the difference you see between `F3` and `F4`.

I was bitten by this before and now know to watch for it but it does catch me out from time to time.

# wcf - 如何从 WCF 服务访问 Active Directory

> ID：11587113
> 
> 赞同：1
> 
> 时间：2012-07-20T21:23:20.407
> 
> 标签：wcf, c#-4.0, active-directory

我被要求在 WCF 中创建一个服务，其中输入是用户 EMAIL-ID。我的服务器中有很多可用的域。我的 WCF 服务托管在 xxx 域中。

```
I need to get all yyy groups (Domain groups) for the user whose email matches. 
```

问题： 1\. 我们可以从 C# 连接到活动目录 2\. 如何从 C# 获取用户组。3\. 仅用于用户验证，与 Active Directory 无关。（AD组简单搜索）

由于我是新手，即使我也不知道它是否可以从 C# 中获得。对此的早期答复是非常可观的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:56:07.913

[`System.DirectoryServices.AccountManagement`](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间正是您所需要的。

这是一些可以帮助您入门的代码。

```
using System;
using System.DirectoryServices.AccountManagement;

namespace TestADCSharp
{
    class Program
    {
        static void Main(string[] args)
        {
            PrincipalContext p = new PrincipalContext(
                ContextType.Domain,
                "your.domain"
            );

            UserPrincipal u = new UserPrincipal(p);
            u.EmailAddress = "your@search.email";

            PrincipalSearcher ps = new PrincipalSearcher(u);
            PrincipalSearchResult<Principal> results = ps.FindAll();

            foreach (Principal r in results)  {
                PrincipalSearchResult<Principal> groups = r.GetGroups();

                Console.WriteLine("Groups:");
                foreach (Principal g in groups) {
                    Console.WriteLine("\t" + g.Name);
                }
            }
        }
    }
} 
```

# html - 这是网页还是图片？

> ID：11587119
> 
> 赞同：46
> 
> 时间：2012-07-20T21:23:50.353
> 
> 标签：html, image, encoding

[http://lcamt​​uf.coredump.cx/squirrel/](http://lcamtuf.coredump.cx/squirrel/)

据作者介绍，

> 这是图像的嵌入式登录页面。您可以链接到此 URL 并获取您现在正在查看的 HTML 文档（很快就会包含基本的松鼠事实）；或在您自己的以松鼠为主题的页面上嵌入与图像完全相同的 URL：`<a href="http://lcamtuf.coredump.cx/squirrel/">Click here!</a> <img src="http://lcamtuf.coredump.cx/squirrel/">`不涉及服务器端黑客 - 魔法发生在您的浏览器中。

换句话说，如果您将该 URL 弹出到浏览器中，它会呈现为网页，但您也可以使用相同的 URL 作为图像源。

什么样的巫术在这里起作用？

[（编辑：如果该站点离线，则来自上述链接的[源代码。）](http://pastebin.com/jMqbie7C)]

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-20T21:30:16.033

您链接的文件是多语言 - 多种语言的组合。**它既**可以作为图像也可以作为 HTML 文件来阅读和理解。这是一个简单的技巧。如果您查看 HTML 源代码，您可以在顶部看到：

```
ÿØÿà 
```

一个快速的谷歌显示这看起来像一个 JPEG 标题。创建者所做的是将 HTML 存储在 JPEG 元数据中，并将 JPEG 图像数据存储在 html 注释中。相当漂亮但不神奇。

为了隐藏 JPEG 标头，他使用 CSS 规则来隐藏正文并仅显示一些元素：

```
body { visibility: hidden; }
.n { visibility: visible; position: absolute; ...... } 
```

另请注意，它不是有效的 HTML，例如因为隐藏图像数据的注释未关闭，但浏览器仍然乐于接受并呈现它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T21:29:27.437

它是一个带有 html 内容和图像数据的 html 页面。

查看标题，它包含 jpg 标题。在源代码中，第一行包含`ÿØÿà`一个 jpeg 标题。网址http:// [lcamt​​uf.coredump.cx/squirrel/index.html](http://lcamtuf.coredump.cx/squirrel/index.html)（附加 index.html）清楚地显示了它的一个 html 文件。**所以显然这**可以称为网页或图像！

您可以轻松地将 jpg 文件（或任何图像文件）重命名为 .html 并且当您在浏览器中打开时，它只会显示图像，就像任何其他图像一样。

我记得最近的一个类似技巧是将 gif 重命名为 jpg [，](https://stackoverflow.com/questions/11529941/file-with-jpg-extension-acts-like-a-gif-with-a-cat-shooting-a-gun-with-heavy-kic)但数据仍然是 gif 并且标题包含 gif。

# jquery - 我可以使用 jQuery 的 load() 函数将数据加载到标签的属性中吗？

> ID：11587120
> 
> 赞同：0
> 
> 时间：2012-07-20T21:23:51.013
> 
> 标签：jquery, ajax

我可以做这样的事情：

```
$('#myTag').attr('value').load('my_php_file.php'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:25:44.140

不，因为`.attr('value')`返回一个字符串（表示`value`DOM 元素上的属性值），并且在字符串上调用该`.load()`方法毫无意义。您通常在 DOM 元素上调用此方法。为了说明您的问题，您的代码相当于：

```
var value = 'some value';
value.load('my_php_file.php'); 
```

废话。

你的意思是：

```
$.ajax({ 
    url: 'my_php_file.php', 
    success: function(result) { 
        $('#myTag').val(result); 
    } 
}); 
```

# android - 谷歌地图工作，但绘制地理点时显示gey瓷砖

> ID：11587121
> 
> 赞同：0
> 
> 时间：2012-07-20T21:23:52.133
> 
> 标签：android, google-maps, google-api

我正在尝试创建一个应用程序来在 Google 地图上绘制我们的山地自行车道。我已经让谷歌地图部分工作了。但是，一旦我尝试绘制几个地理点并将它们连接起来，它会显示地理点并连接它们，但谷歌地图会停止显示。仅显示灰色瓷砖。这是我绘制有效点之前的代码。

```
public class DPHTmaps extends MapActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapController mMapController;
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mMapController = mapView.getController();
        mMapController.setZoom(18);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

然后我把我的代码改成这个来绘制和连接几个地理点，它把地图图块变成灰色。

```
public class DPHTmaps extends MapActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapController mMapController;
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mMapController = mapView.getController();
        mMapController.setZoom(18);
        // Two points in Backside trail
        GeoPoint point1 = new GeoPoint(-91777756,43311836);
        GeoPoint point2 = new GeoPoint(-91777627,43311718);
        mMapController.setCenter(point2);
        // Pass the geopoints to the overlay class
        MapOverlay mapOvlay = new MapOverlay(point1, point2);
        mapView.getOverlays().add(mapOvlay);
    }

    public class MapOverlay extends com.google.android.maps.Overlay {
        private GeoPoint mGpt1;
        private GeoPoint mGpt2;
        protected MapOverlay(GeoPoint gp1, GeoPoint gp2 ) {
            mGpt1 = gp1;
            mGpt2 = gp2;
        }
        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
            super.draw(canvas, mapView, shadow);
            Paint paint;
            paint = new Paint();
            paint.setColor(Color.RED);
            paint.setAntiAlias(true);
            paint.setStyle(Style.STROKE);
            paint.setStrokeWidth(2);
            Point pt1 = new Point();
            Point pt2 = new Point();
            Projection projection = mapView.getProjection();
            projection.toPixels(mGpt1, pt1);
            projection.toPixels(mGpt2, pt2);
            canvas.drawLine(pt1.x, pt1.y, pt2.x, pt2.y, paint);
            return true;
        }
    }
    @Override
    protected boolean isRouteDisplayed() {
        return false;
    } 
```

这一直让我发疯。我已经寻找了 2 周的解决方案，但一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:22:03.397

是否可以像您以错误的顺序将纬度/经度传递给 GeoPoint 构造函数一样简单？您需要先传递纬度，并且基于 -91 不是有效纬度的事实，我猜您的参数已颠倒。

[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint)

# vim - Vim: 为什么 ":normal!i" 不进入插入模式？

> ID：11587124
> 
> 赞同：30
> 
> 时间：2012-07-20T21:24:02.167
> 
> 标签：vim, insert, mode

在`vim`，如果我从命令行执行以下

```
:normal! i 
```

vim 不进入插入模式。同样的命令

```
:normal! A 
```

将光标移动到行尾，但光标仍处于插入模式。

任何想法为什么这不起作用？失败了，我想知道从vimscript函数的主体进入插入模式的另一种方法（当然，在函数返回后插入模式仍然存在）。

编辑：看起来`:startinsert`将完成问题的第二部分，但我仍然想知道我怎么能做类似的事情，`:normal! A`或者`:normal! a`为什么那些不能按预期工作。用箭头移动模拟“附加”是一个不好的解决方案，因为空行之类的东西。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-20T21:30:32.353

正常命令认为以插入模式结束是一个不完整的命令并中止。来自`help normal`：

> {commands} 应该是一个完整的命令。如果 {commands} 没有完成一个命令，最后一个命令将被中止，就像`<Esc>`或被`<C-C>` 键入一样。":normal" 忙时显示不更新。这意味着必须完成插入命令（要启动插入模式，请参阅：startinsert）

`:startinsert`可能是您正在寻找的命令。

`:normal A`*正如Ingo Karkat*所建议的那样，可以通过向 附加 bang( `!`) 来实现。来自：`startinsert`*`help startinsert`*

 *> 当。。。的时候 ！包括它像“A”一样工作，附加到该行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-21T08:35:37.250

除了已经提到的`startinsert`，您还可以使用`feedkeys()`：

```
call feedkeys('A', 'n') 
```

会做你想做的事，但你以这种方式添加的密钥只有在当前脚本/函数/映射/等执行完成后才会被处理。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-21T11:54:12.927

代替`:normal A`，使用`:startinsert!`(with `!`)。帮助中有提到。

对于`:normal a`，将光标向右移动，然后执行`:startinsert`。*

# node.js - 从 node.js 应用程序增加持久计数器的快速方法？

> ID：11587131
> 
> 赞同：2
> 
> 时间：2012-07-20T21:24:13.353
> 
> 标签：node.js, persistence, redis

我有一个用 node.js/express 编写的搜索引擎，目前没有记录任何统计数据，我想开始跟踪每天的查询数。所以我只需要一个持久计数器，每次提交查询时我都可以增加它。（我将编写一个 cron 作业来存储它并在一天结束时将其清除，这与这个问题无关）。

显然有很多方法可以做到这一点，所以我的一个要求是它非常快。redis对此是否过分？是否有更简单的解决方案仍然会非常快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:05:36.203

从字面上看，最快的解决方案是使用 Memcache。

创建一个计数器对象，其中包含每个查询的计数器，例如

```
counter = {
  '_q:whatever': 1,
  '_q:something else': 123
} 
```

然后在页面加载时在 Counter 中添加或递增键。然后使用 cron pull Counter 并解析所有键，在您的数据库中更新。

# asp.net - VB.NET ASPX - Listview 不显示？在 Visual Studio 中显示

> ID：11587133
> 
> 赞同：1
> 
> 时间：2012-07-20T21:24:16.943
> 
> 标签：asp.net, vb.net, visual-studio-2010, listview

我试图弄清楚为什么我的列表视图在我构建解决方案时没有显示，但它显示在 Visual Studio 中。我错过了 HTML 中的一些语法吗？当我使用 Firebug 检查代码时，没有任何代码显示它试图呈现列表视图。

ASPX 页面：

```
 <%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm4.aspx.vb" Inherits="WebApplication2.WebForm4"
MasterPageFile="obj/Site1.Master" ViewStateMode="Enabled" %>

    <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="ContentArea">
        <fieldset>
    <fieldset>
        <legend style="text-align: center">Vendor Results Screen</legend>
        <table width="100%">
            <tr>
                <td align="center">
                    <asp:Label ID="FilterBy" runat="server" Text="Filter By: " Font-Bold="true" Font-Size="Large"></asp:Label>
                    <asp:DropDownList ID="dropDownFieldName" runat="server">
                        <asp:ListItem Text="FieldName" Value="DocumentProviderID">        </asp:ListItem>
                        <asp:ListItem Text="Status" Value="Status"></asp:ListItem>
                        <asp:ListItem Text="FieldName" Value="PDFNumber">        </asp:ListItem>
                    </asp:DropDownList>
                    <br />
                </td>
            </tr>
            <tr>
                <td align="center" style="height: 34px">
                    <asp:Label ID="SearchBy" runat="server" Text="Search By: " Font-Bold="true" Font-Size="Large"></asp:Label>
                    <asp:TextBox ID="searchBox" runat="server"></asp:TextBox>
                    <asp:Button ID="SearchButton" runat="server" Text="Search" />
                </td>
            </tr>
            <tr>
                <td>
                    <table width="100%">
                        <tr>
                            <td>
                                <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true">
                                    <asp:ListItem Value="10">10</asp:ListItem>
                                    <asp:ListItem Value="25">25</asp:ListItem>
                                    <asp:ListItem Value="50" Selected="True">50</asp:ListItem>
                                    <asp:ListItem Value="75">75</asp:ListItem>
                                    <asp:ListItem Value="100">100</asp:ListItem>
                                </asp:DropDownList>
                            </td>
                            <td align="right">
                                <asp:Button ID="ExportToExcel" runat="server" Text="Export To Excel" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <asp:ListView ID="ListView1" runat="server" EnableViewState = "true" Visible="true">
                <LayoutTemplate>
                    <table cellpadding="2" width="100%" border="1" runat="server" id="tblProducts">
                        <tr id="Tr1" runat="server">
                            <th id="Th1" runat="server">
                                Field Name
                            </th>
                            <th id="Th2" runat="server">
                                Type
                            </th>
                            <th id="Th3" runat="server">
                                XML Path
                            </th>
                            <th id="Th4" runat="server">
                                Vendor Path
                            </th>
                            <th id="Th5" runat="server">
                                Status
                            </th>
                            <th id="Th6" runat="server">
                                Comments
                            </th>
                            <th id="Th7" runat="server">
                                Edit
                            </th>
                            <th id="Th8" runat="server">
                                Forms
                            </th>
                            <th id="Th9" runat="server">
                                CU Specific
                            </th>
                        </tr>
                        <tr runat="server" id="itemPlaceholder" />
                    </table>
                    <asp:DataPager runat="server" ID="DataPager1" PageSize="50">
                        <Fields>
                            <asp:NumericPagerField ButtonCount="10" CurrentPageLabelCssClass="CurrentPage" NumericButtonCssClass="PageNumbers"
                                NextPreviousButtonCssClass="PageNumbers" NextPageText=" Next " PreviousPageText=" Previous " />
                        </Fields>
                    </asp:DataPager>
                </LayoutTemplate>
                <ItemTemplate>
                    <tr id="Tr2" runat="server">
                        <td>
                            <asp:Label ID="FieldName" runat="Server" Text='<%#Eval("FLD_NM") %>' />
                        </td>
                        <td>
                            <asp:Label ID="Type" runat="Server" Text='<%#Eval("DATA_TYPE_CD") %>' />
                        </td>
                        <td>
                            <asp:Label ID="XMLPath" runat="Server" Text='<%#Eval("WS_XML_PATH_TX") %>' />
                        </td>
                        <td>
                            <asp:Label ID="VendorPath" runat="Server" Text='<%#Eval("FLD_NM") %>' />
                        </td>
                        <td>
                            <asp:DropDownList ID="Status" runat="Server" />
                        </td>
                        <td>
                            <asp:TextBox ID="Comments" runat="Server" MaxLength="100" />
                        </td>
                        <td>
                            <asp:LinkButton ID="EditButton" runat="Server" Text="Edit" CommandName="Edit" />
                        </td>
                        <td>
                            <asp:Label ID="Forms" runat="Server" Text='<%#Eval("FLD_NM") %>' />
                        </td>
                        <td>
                            <asp:Label ID="CUSpecific" runat="Server" Text='<%#Eval("FLD_NM") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <EditItemTemplate>
                    <tr style="background-color: #ADD8E6">
                        <td>
                            <asp:LinkButton ID="UpdateButton" runat="server" CommandName="Update" Text="Update" />&nbsp;
                            <asp:LinkButton ID="CancelButton" runat="server" CommandName="Cancel" Text="Cancel" />
                        </td>
                        <td>
                            <asp:TextBox ID="FieldName" runat="server" Text='<%# Bind("FLD_NM") %>' MaxLength="50" /><br />
                        </td>
                        <td>
                            <asp:TextBox ID="DataType" runat="server" Text='<%# Bind("DATA_TYPE_CD") %>' MaxLength="50" /><br />
                        </td>
                    </tr>
                </EditItemTemplate>
                   </asp:ListView>
                </table>
            </fieldset>
        </fieldset>
    </asp:Content> 
```

VB：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
If (Not IsPostBack) Then
    dataTable()
    Dim dataT As DataTable = dsData
    dsData = ViewState("Table")
    ListView1.DataSource = dataT.AsDataView
    ListView1.DataBind()
    'ListView1.Sort("FLD_NM", SortDirection.Descending)
    dropDownFieldName.DataSource = dsData.Columns
    dropDownFieldName.DataBind()
End If
End Sub 
```

那是我运行的 VB，我不相信 VB 是问题，因为我可以在其中设置断点并查看表格。此外，我的 dropdownFieldName（我用于搜索）显示了我想要的所有列标题。如果我遗漏了一些明显的东西，请告诉我！

谢谢你，格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:54:44.280

您的列表视图数据源为空。如果 LisView 数据源为空，则服务器将不会呈现列表视图。我通过将以下代码服务器端添加到 Page_Load 中来确认这一点：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If (Not IsPostBack) Then

        Dim dt As New System.Data.DataTable
        dt.Columns.Add(New System.Data.DataColumn("FLD_NM", GetType(System.Int32)))
        dt.Columns.Add(New System.Data.DataColumn("DATA_TYPE_CD", GetType(System.String)))
        dt.Columns.Add(New System.Data.DataColumn("WS_XML_PATH_TX", GetType(System.String)))

        Dim row As System.Data.DataRow
        row = dt.NewRow()
        row.Item("FLD_NM") = 1
        row.Item("DATA_TYPE_CD") = "A"
        row.Item("WS_XML_PATH_TX") = "C:\TEMP\TEMP.XML"
        dt.Rows.Add(row)

        ListView1.DataSource = dt
        ListView1.DataBind()

    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T14:28:31.627

我不确定您连接到什么数据源，或者您是否使用 SQL 查询/SP。我遇到了同样的问题，我发现从 VS 到 IIS 时，我的查询参数在绑定之前将不同的值传递给存储的过程（这与页面渲染无关）。当我传递用户名时，问题就来了。

如果您认为您的数据源可能是罪魁祸首（这是我的情况），请尝试在页面加载时插入以下代码并查看结果：

```
 Response.Write("Application code executed using: ");    
        Response.Write(System.Security.Principal.WindowsIdentity.GetCurrent().Name + "<br/>");

        Response.Write("Is User Authenticated: ");
        Response.Write(User.Identity.IsAuthenticated.ToString() + "<br/>");

        Response.Write("Authentication Type, if Authenticated: ");
        Response.Write(User.Identity.AuthenticationType + "<br/>");

        Response.Write("Application code executed using: ");
        Response.Write(User.Identity.Name + "<br/>");

        Response.Write("Environment UserName: ");
        Response.Write(Environment.UserName + "<br/>"); 
```

然后根据需要调整参数。

希望这可以帮助。

# image-processing - Web 应用程序中大型图像处理/服务的参考架构是什么？

> ID：11587135
> 
> 赞同：1
> 
> 时间：2012-07-20T21:24:45.770
> 
> 标签：image-processing, hadoop, parallel-processing, storage, openmpi

我们构建了一个服务的第一个版本，它需要接收图像和 pdf 文件，然后对每个文件进行大量处理，并为我们构建的 Web 和移动客户端提供几个调整大小的变体。

在处理方面，我们执行：

*   适用于网络和移动设备的 9 种图像尺寸变体
*   300dpi 图像的平铺（a-la 地图平铺）
*   5 图像处理和机器学习/标记过程

在对整个管道进行串行测试时，大约需要 18 分钟来处理大约 120 张图像。

我们正试图大幅缩短这一时间。当然，一件事是并行进行各种处理，只有少数依赖项，例如，在生成几个关键变量之前，我们无法处理图像处理/机器学习步骤。

从架构的角度来看，我们希望从 Web 层卸载所有处理，但还需要将图像提供给 Web/移动客户端。我们一直在研究诸如 openmpi、hadoop、zeromq 之类的东西来并行化事物，以及 hdfs、gluster、luster 来解决存储/规模问题。

寻找可以拼接在一起的任何参考架构或工具，以便我们可以逐步改进我们的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:59:17.643

那么对于这 120 张图像，您使用了**哪些**图像和 PDF 处理工具？！？（您可以围绕 [storage]、[hadoop] 和 [openmpi] 思考和计划所有您想要的东西——除非您的图像和 PDF 处理工具足够快，否则您会在*那里*找到瓶颈。）

# javascript - 最初隐藏一个 div 以供以后显示

> ID：11587141
> 
> 赞同：23
> 
> 时间：2012-07-20T21:25:06.780
> 
> 标签：javascript, jquery, css, html, visibility

我的网页如下所示：

```
<div id="id1" class="stuff">
TEXT, FORMS, and STUFF
</div>

<div id="id2" class="stuff" style="display:none">
TEXT, FORMS, and STUFF
</div>

<div id="id3" class="stuff" style="display:none">
TEXT, FORMS, and STUFF
</div>

<a id="btn1">DD</a>
<a id="btn2">DD</a>
<a id="btn3">DD</a> 
```

在此之下，我有 jQuery 单击事件，将单击项目的显示设置为继承，其他设置为无。

```
$("#btn2").click(function (e) {
    $("#id1").css('display','none');
    $("#id3").css('display','none');
    $("#id2").css('display','inherit');
}); 
```

显示和隐藏工作正常，但是我注意到最初隐藏的 div 中的某些内容没有正确呈现，尤其是由 CSS 操作的元素。本质上，当页面加载时，隐藏的 div 没有正确呈现，并且当它们显示时看起来很丑。正确执行此操作的方法是什么？

编辑：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：

我最终做的是将所有最初隐藏的 div 设置为“可见性：无”，然后在页面 onLoad() 事件中设置显示：无。当我切换时，我会同时更改可见性和显示。一切都正确渲染，并且由于事物被静态设置为不可见，因此所有 div 都不会显示丑陋的 2 秒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T21:29:18.763

尝试`visibility`改用。例子：

```
$("#id2").click(function (e) {
    $("#id1").css('visibility','hidden');
    $("#id3").css('visibility','hidden');
    $("#id2").css('visibility','visible');
}); 
```

两者`display`和`visibility`都会对浏览器行为产生影响。

另一种解决方法是将`opacity`要隐藏的 div 设置为`0`. 这在我的经验中总是有效的，但不那么优雅。

* * *

**更新回复评论：**在这种情况下，您可以设置其他属性，例如`width`and `height`to`0px`和`over-flow`to ，`hidden`以便 div 不占用屏幕上的任何空间。丑陋，但基本，并且有效。

```
<style>
.hidden {
    visibility: hidden;
    overflow: hidden;
    width: 0px;
    height: 0px;
}
</style>

<div class="hidden"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Aster_Tataricus.JPG/245px-Aster_Tataricus.JPG"/></div>
<div class="hidden"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Chamomile%40original_size.jpg/280px-Chamomile%40original_size.jpg"/></div>
<div><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Jonquil_flowers06.jpg/320px-Jonquil_flowers06.jpg"/></div> 
```

您可以使用 jQuery`addClass`和`removeClass`方法使 div 可见和不可见，例如：`$("#id1").removeClass("hidden");`和`$("#id3").addClass("hidden");`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T21:35:15.380

为什么不使用 jQuery`show`和`hide`?

使用 CSS 隐藏页面加载时要隐藏的元素（duh）：

```
#id1, #id2, .. {
    display: none;
} 
```

或者你可以用 Javacript 隐藏它：

```
$('#id1, #id2, ..').hide(); 
```

使用以下命令显示或隐藏它们：

```
$('#btn2').click(function() {
    $('#id1, #id3').hide();
    $('#id2').show();
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T21:32:16.720

最好不要将显示逻辑添加到您的标记中，这样做的更好方法是

```
.hidden{ display:none;} 
```

.

```
<div id="id1" class="stuff">
TEXT, FORMS, and STUFF
</div>

<div id="id2" class="stuff hidden" >
TEXT, FORMS, and STUFF
</div>

<div id="id3" class="stuff hidden">
TEXT, FORMS, and STUFF
</div> 
```

.

```
$(".stuff").click(function () {
    $(".stuff").addClass('hidden');
    $(this).removeClass('hidden');

}); 
```

如果您仍然遇到渲染问题，希望对您有所帮助，然后可以尝试

```
.hidden{ visibility:hidden; }
.stuff{display:block;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T21:35:40.977

我喜欢这样做：
javascript：

```
$('#btn2').click(function(){
    $('#id1').addClass('hidden');
    $('#id3').addClass('hidden');
    $('#id2').removeClass('hidden');
}); 
```

CSS：

```
.hidden {
    display: none;
} 
```

html:

```
<div id="id1" class="stuff">
TEXT, FORMS, and STUFF
</div>

<div id="id2" class="stuff hidden">
TEXT, FORMS, and STUFF
</div>

<div id="id3" class="stuff hidden">
TEXT, FORMS, and STUFF
</div>

<a id="btn1">DD</a>
<a id="btn2">DD</a>
<a id="btn3">DD</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T21:39:01.633

也许 .toggle 可以帮助您实现这一目标？

```
$("#btn2").click(function (e) { 
    $("#id1").toggle(); 
    $("#id2").toggle();
    $("#id3").toggle();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-24T10:06:35.953

```
window.onload = pre_loader;

function pre_loader() {

    javascript:document.getElementById('loader').style.visibility='hidden';

    javascript:document.getElementById('loader').style.opacity=0;

} 
```

# symfony - 如何更改会话数据并保持在同一页面上？

> ID：11587146
> 
> 赞同：0
> 
> 时间：2012-07-20T21:25:43.363
> 
> 标签：symfony

我想用四个标签（'a'、'b'、'c'、'd'）过滤我网页上的数据。假设用户在此页面上：

```
/data/1/slug-for-one 
```

并且用户想要现在为“c”过滤的数据，他点击“c”，他的会话对象中的一个 var 被更改，并且在“重新加载”同一页面时正确过滤了数据。

如何构建过滤器按钮的链接？创建一个特殊的控制器，它解析过滤器并重定向？控制器在哪里获取要重定向的 url？我不想通过每个 GET 的路由/url，因为用户可能会做坏事。

编辑：

正如评论中所指出的，在会话中使用过滤器是一个坏主意。那么通过过滤器的最佳方法是什么？是否可以设置一些可以在实际控制器之前解析的路由前缀？

例子：

```
/filter/c/data/1/slug-for-one 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:49:38.700

您可以使用 POST 请求发送变量，然后使用自定义操作对其进行处理。像这样的东西：

```
<?php
// src/Acme/DemoBundle/Controller/DataController.php
namespace Acme\DemoBundle\Controller;

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
// ...

class DataController extends Controller
{
    /**
     * @Route("/data/{id}/{slug}")
     * @Method("POST")
     */
    public function filterAction($id, $slug)
    {
        $tag = $this->getRequest()->get('tag');

        // ... filter it by tag and 
    }
}
?> 
```

或者只是`if`在当前操作中检查请求是否为 POST 请求，然后对其进行过滤。

```
<?php
if ('POST' == $this->getRequest()->getMethod()) {
    // ... filter
}
?> 
```

# c# - 将数据从另一个类输出到 Form 的正确方法是什么

> ID：11587147
> 
> 赞同：0
> 
> 时间：2012-07-20T21:25:53.363
> 
> 标签：c#, winforms, multithreading

我有一个 Form1，我在另一个类中进行了一些处理。将信息输出到 Form1 的正确方法是`textBox9`什么？

我就是这样做的，但它仅在表单处于活动状态时才部分起作用。

这是我在课堂上的内容：

```
var form = Form.ActiveForm as Form1;
if (form != null)
{
 form.updateLabel("DBadd[" + counter + "]" + NAME2);
} 
```

这是我在我的 Form1 中的：

```
 delegate void updateStatus(String value);
    public void updateLabel(String value)
    {
        if (textBox9.InvokeRequired)
        {
            updateStatus del = new updateStatus(updateCodemicroLabel);
            textBox9.Invoke(del, new object[] { value });
        }
        else
        {
            {
                textBox9.Text = value;
            }
        }
    } 
```

我的班级是这样称呼的：

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        new className().runTask();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:30:32.883

而不是使用`Form.ActiveForm`您需要将实例传递给类，以便它可以作为实例调用`whatever.updateLabel()`。`whatever`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:25:42.857

返回数据的正确方法是在worker类中实现一个方法，并在Form的成员变量或配置参数中获取返回值。根据类执行的任务，任务可能需要在后台工作线程中执行，然后更新 Form 的成员变量。有关如何在后台线程中运行任务的更多信息，请查看 MSDN。

参考资料和有用的页面：

*   [“BackgroundWorker 类 (System.ComponentModel)” [msdn.microsoft.com]](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# c# - 从实际数据返回中对客户端心跳进行排序？

> ID：11587152
> 
> 赞同：1
> 
> 时间：2012-07-20T21:26:23.647
> 
> 标签：c#, tcp, heartbeat

所以简而言之，我使用 tcplistener / tcpclient 设置了服务器，它有几十台客户端机器。一切都运行良好，除了我还没有设置系统来检测客户端是否断开连接。我想使用心跳（定期发送的数据包）来显示客​​户端仍然存在。不幸的是，服务器有一个等待接收块被调用，以便它可以从客户端获取实际数据，但它正在接收心跳。有什么方法可以在专门寻找心跳的同一端口上设置另一个接收？-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:50:32.193

一种常见的方法是将数据包定义为具有特定类型，因此服务器数据包接收代码可以检查类型并适当地处理它。IE

```
if ( packet.type == PacketTypes.HeartBeat )
    //keep alive the client
else
    //it's data (or another packet) 
```

当您添加代码时，我可以举一个更好的例子。

更新：

根据我们在评论中的讨论，您可以简单地创建一个单独的线程来处理您的心跳数据包。在这个线程中，您的套接字接收代码将通过首先检查类型来忽略除心跳数据包之外的任何内容。

您还可以在同一端口上创建另一个容纳套接字接收的线程来处理您的数据。在这种情况下，它会忽略收到的任何心跳包。

# php - Magento 批量订单、产品和客户创建

> ID：11587156
> 
> 赞同：0
> 
> 时间：2012-07-20T21:26:34.357
> 
> 标签：php, magento, memory-management, memory-leaks

我在 Magento 中创建了一个模块，通过创建随机产品、订单和客户来复制大型商店。上面描述的数据创建发生在我的模型中，它是直接的 PHP 代码。尽管使用了 PHP 的 unset() 和 Magento 的 clearInstance()，但我遇到了严重的内存管理问题。我在下面注释了大约 10 行代码，显示了我释放内存的尝试是如何失败的。

```
/**
 * Creates random customers.
 *
 * @param  int $offset, used to make sure the ids created are unique
 */
protected function _createCustomer($offset)
{
    // Create some random customer information
    $firstName = strtolower($_firstNames[array_rand($_firstNames, 1)]);
    $lastName  = strtolower($_lastNames[array_rand($_lastNames, 1)]);
    $customerEmail = $firstName[0] . $lastName.time().$offset."@weliketopumpit.com";

    // Retrieve customer model
    $customer = Mage::getModel('customer/customer')
        ->setWebsiteId(Mage::app()->getWebsite()->getId())
        ->loadByEmail($customerEmail);

    // Populate model and save it
    if(!$customer->getId()){
        $customer
            ->setEmail    ($customerEmail)
            ->setFirstname($firstName)
            ->setLastname ($lastName)
            ->setPassword ('password1')
            ->setCreatedAt(rand($this->_startDate, time()));
    }
    $customer->save();
    $customer->setConfirmation(null);
    $customer->save();

    $this->log(memory_get_usage() . "\n"); // Returns 17306840
    $customer->clearInstance();            // Called to clean up the object
    $this->log(memory_get_usage());        // Returns 17307304, memory wasn't unallocated

    debug_zval_dump($customer);            //Returns a refcount(2)
} 
```

调用 unset 代替 clearInstance() 会产生相同的结果。使用 Magento 模型后如何清理的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T13:49:46.247

我会使用资源而不是模型，它会更快，内存成本更低。如果这还不够好，请将其转换为原始 sql，EAV 在插入记录时并没有那么复杂。

我也会尝试的另一种方法是：[http](http://ringsdorff.net/2009/07/23/guest-post-fix-for-memory-leaks-in-magento/) ://ringsdorff.net/2009/07/23/guest-post-fix-for-memory-leaks-in-magento/ 但这不建议用于生产，所以我会构建一个包含这些析构函数的自定义 Customer 模型，并在我的脚本中使用新模型，让其他所有东西（生产）在普通模型上运行。

# terminal - 在 Automator 中通过终端复制文件

> ID：11587159
> 
> 赞同：0
> 
> 时间：2012-07-20T21:26:46.880
> 
> 标签：terminal, automator, cp

所以以下问题似乎是在 Automator 中引起的，但我不能确定（我会发布一张图片，但我没有足够的分数）：

我有一个 Automator 服务，它的第一个操作是“获取指定的查找器项目”工具，该工具转到`~/Desktop/D53_C71J_C`. 下一个动作是“运行 Shell 脚本”，其中包含

```
PATH="$@"
echo "Path: $PATH"
cd "$PATH"
for f in *;
do
    echo "f: $f"
    CAT="$PATH/$f"
    echo "CAT: $CAT"
    cp "$f" ~/Desktop
done 
```

结果是

```
Path: /Users/ajharn/Desktop/D53_C71J_C
f: D53_C71J_C1.psd
CAT: /Users/ajharn/Desktop/D53_C71J_C/D53_C71J_C1.psd

f: D53_C71J_C1_MERGE.psd
CAT: /Users/ajharn/Desktop/D53_C71J_C/D53_C71J_C1_MERGE.psd
f: D53_C71J_C2.psd 
```

等等。这一切都有效，直到它到达`cp`。我已经用回声和这样的路径进行了测试。令人困惑的部分是 `cp D53_C71J_C2.psd ~/Desktop`在终端中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:46:18.303

您非常不明智地选择了变量名：`PATH`shell 使用它来存储可执行文件所在目录的路径（请参阅[BashGuide](http://mywiki.wooledge.org/BashGuide/Parameters#Special_Parameters_and_Variables)和[bash 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/sh.1.html)中有关特殊 shell 参数的部分）。由于`cp`是外部程序，而不是 shell 命令（它位于`/bin/cp`），当您用当前工作路径覆盖时，shell 不会找到它`PATH`——因此永远不会运行。

做更多的事情

```
[[ -d "$@" ]] && cd "$@"                # cd into folder if is one
for f in ./*; do                        # always prefix relative globs
    [[ -f "$f" ]] && cp "$f" ~/Desktop  # only copy files
done 
```

一切都会好起来的。当然，添加“获取文件夹内容”操作和“移动查找器对象”操作也可以，无需任何 shell 干预。

# cuda - 是否有一种可以在 CUDA 内核中运行的 FFT 方法？

> ID：11587160
> 
> 赞同：2
> 
> 时间：2012-07-20T21:26:55.067
> 
> 标签：cuda, fft

我目前正在将 C++ 程序转换为 CUDA 代码，并且我的程序的一部分运行快速傅立叶变换。最初我运行 FFTW，但我发现我无法在内核中调用它，所以我使用 cufft 重写了该部分，但它告诉我同样的事情！

是否有任何可以在 CUDA 内核中运行的 FFT？

我可以添加`__device__`到 fftw 库吗？

我想避免在主机中初始化或调用 FFT。我想要一个完全关于 gpu 类型的函数，如果存在的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:09:27.363

如果您希望将其合并到内核中，您似乎正在尝试一次执行多个 FFT。我会研究 cuFFT 中的批处理功能。你的应用是什么？cufftPlanMany() 适用于许多不同内存配置中的批处理 FFT。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T00:53:59.833

您确定需要避免从主机启动吗？ [Nvidia 的](http://www.nvidia.com/content/cuda/cuda-downloads.html)cufft 库现在非常好。移植 FFTW 似乎是一项艰巨的任务。[移植Kissfft](http://sourceforge.net/projects/kissfft/)可能会更容易，但这仍然不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T17:11:21.547

无法从 GPU 内核调用 API。您必须从主机呼叫他们。如果您想在不从 DEVICE -> HOST -> DEVICE 传递的情况下运行 FFT 以继续您的阐述，我认为唯一的解决方案是编写一个在**设备**函数中执行 FFT 的内核。实际上我这样做是因为我需要并行运行更多的 FFT，而无需再次将数据传递给主机。如果您找到/有其他解决方案，请告诉我。

# sql - SQL Server更新设置量=（正数）+（负数）增加量？为什么？

> ID：11587161
> 
> 赞同：-1
> 
> 时间：2012-07-20T21:26:58.583
> 
> 标签：sql, sql-server-2008-r2, set, numeric

我正在从全局临时表执行更新，如下所示：

```
update some_table
set Amount = (##GlobalTable.InitialAmount) + (##GlobalTable.[Difference])
from ##GlobalTable
where Amount = ##GlobalTable.InitialAmount 
```

Amount、InitialAmount 和 Difference 列都是数字 (21,2)

Amount 和 InitialAmount 始终为正数。问题是，当差异为负时，产生的金额实际上会因负差异而增加。它应该执行减法，但事实并非如此。当差异为正时，它工作正常。任何想法为什么会发生这种情况？

我在使用 SQL Server 2008 R2 的 Windows 7 Enterprise SP1 64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:58:35.647

One way this can happen...(but may not be what you are seeing)

See if you have two rows in ##GlobalTable with the same value for InitialAmount but different values for Difference.

If so, then a row in some_table may match both (or more) rows in ##GlobalTable, and SQLServer makes no guarantee what answer you will get.

In my experience SQLServer will choose a row to use in the update and it is usually the last qualifying row retrieved from ##GlobalTable based on the execution plan. Since the execution plan is subject to change as table contents change the result is not so predicable, and not something to count on when writing code.

Unless you know that each row in ##GlobalTable has a unique value for InitialAmount, you should choose a more reliable way to join some_table with ##GlobalTable.

# cocoa - NSTextField 的 LineFragmentPadding

> ID：11587162
> 
> 赞同：1
> 
> 时间：2012-07-20T21:27:54.503
> 
> 标签：cocoa, nstextfield

我如何知道填充 NSTextField 正在使用的行片段？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-21T11:26:01.160

您可以`-lineFragmentPadding`使用`NSTextField's textContainer`. 像这样：

```
float lineFragmentPadding = [textContainer lineFragmentPadding]; 
```

例如：

```
NSSize textFieldSize = [textFieldOutlet frame].size;
NSTextStorage *textStorage = [[[NSTextStorage alloc] initWithAttributedString:[textFieldOutlet attributedStringValue]] autorelease];
NSTextContainer *textContainer = [[[NSTextContainer alloc] initWithContainerSize:NSMakeSize(textFieldSize.width, textFieldSize.height)] autorelease];
NSLayoutManager *layoutManager = [[[NSLayoutManager alloc] init] autorelease];

[layoutManager addTextContainer:textContainer];
[textStorage addLayoutManager:layoutManager];

[layoutManager glyphRangeForTextContainer:textContainer];

float lineFragmentPadding = [textContainer lineFragmentPadding];
NSLog(@"Padding: %f", lineFragmentPadding); 
```

# python - python-gevent 和 python-daemon 的问题

> ID：11587164
> 
> 赞同：3
> 
> 时间：2012-07-20T21:27:58.623
> 
> 标签：python, daemon, gevent

所以我一直在尝试创建一个在后台运行服务器的进程，并使用守护进程启动它。所以我的代码是：

```
class App():
  def __init__(self):
    self.stdin_path = '/dev/null'
    self.stdout_path = '/dev/tty'
    self.stderr_path = '/dev/tty'
    self.pidfile_path = '/tmp/foo.pid'
    self.pidfile_timeout = 5
  def run(self):
    server = WSGIServer(('localhost',28080),handle_request)
    server.serve_forever()

if __name__ == '__main__':
  app = App()
  daemon_runner = runner.DaemonRunner(app)
  daemon_runner.do_action() 
```

但是，这给了我错误：

```
[warn] Epoll ADD(1) on fd 5 failed.  Old events were 0; read change was 1 (add); write change was 0 (none): Invalid argument
Traceback (most recent call last):
  File "enrollmentrunner2.py", line 110, in <module>
    daemon_runner.do_action()
  File "/usr/lib/python2.7/dist-packages/daemon/runner.py", line 186, in do_action
    func(self)
  File "/usr/lib/python2.7/dist-packages/daemon/runner.py", line 131, in _start
    self.app.run()
  File "enrollmentrunner2.py", line 105, in run
    server.serve_forever()
  File "/usr/lib/python2.7/dist-packages/gevent/baseserver.py", line 188, in serve_forever
    self.start()
  File "/usr/lib/python2.7/dist-packages/gevent/baseserver.py", line 149, in start
    self.start_accepting()
  File "/usr/lib/python2.7/dist-packages/gevent/server.py", line 99, in start_accepting
    self._accept_event = core.read_event(self.socket.fileno(), self._do_accept, persist=True)
  File "core.pyx", line 308, in gevent.core.read_event.__init__ (gevent/core.c:3960)
  File "core.pyx", line 252, in gevent.core.event.add (gevent/core.c:2952)
IOError: [Errno 22] Invalid argument 
```

我在网上查找了警告，但在任何地方都找不到，而且该错误并没有真正给我太多有用的信息。我已经运行了这里描述的程序[https://stackoverflow.com/a/9047339](https://stackoverflow.com/a/9047339)，我已经单独运行了程序，只需将其放入 main 等。但是，当我将它们组合起来时，它似乎把事情搞砸了向上。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T11:59:47.053

您遇到了 fork 和 epoll（或 kqueue）之间交互不良的问题。一般情况下，基于 epoll 的事件循环在 fork 之后很难可靠地工作，最好重新创建一个新的事件循环。

有几种方法可以解决您的问题：

*   [升级到 gevent 1.0。](https://github.com/SiteSupport/gevent/downloads)与 gevent 0.x 不同，它在第一次使用时创建事件循环，而不是在第一次导入时创建，从而避免了这个问题。它还使用 libev，它对 fork 的处理比 libevent 稍好一些，尽管不是 100% 可靠。升级 gevent 后，您的问题很可能会消失。

*   将 gevent 包的导入延迟到 fork 之后。

# sql-server - 无效的列名异常

> ID：11587166
> 
> 赞同：2
> 
> 时间：2012-07-20T21:28:17.343
> 
> 标签：sql-server, ado.net

我试图在我的代码中得到一个简单的 SQL 语句，并得到一个`DataTable`，由于某种原因，我得到了这个奇怪的异常：

> 列名无效

这是我的代码：

```
public DataTable GetAllVideoID(string stringId)
    {
        dt = new DataTable();
        dataObj = new DataObj();
        sql = "SELECT * FROM TBL_VIDEOS WHERE TBL_VIDEOS.ID=" + stringId;

        return dt = dataObj.SelectDataTable(sql);
    }

public DataTable SelectDataTable(string sql)
    {
        try
        {
            conn = new SqlConnection(conString);
            conn.Open();
            adapter = new SqlDataAdapter(sql, conn);

            dt = new DataTable();

            adapter.Fill(dt);

            return dt;
        }
        catch (Exception e)
        {

            throw e;
        }
        finally { conn.Close(); }

    } 
```

当我在我的管理工具上运行它时，只是 statemnet - 它运行良好。所以我不知道..

我的数据库结构：ID,TITLE,V_DESCIPTION,UPLOAD_DATE,V_VIEW,USERNAME,RATING,V_SOURCE,FLAG

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T21:55:49.400

将您的 sql 更改为

```
sql = "SELECT * FROM TBL_VIDEOS WHERE TBL_VIDEOS.ID='" + stringId+"'"; 
```

可以解决这个问题。这会在 stringId 的值周围加上一个单引号，例如`.ID = '10'`

如果 stringId = 'user' 你的查询变成

```
 sql = "SELECT * FROM TBL_VIDEOS WHERE TBL_VIDEOS.ID=user
 instead of
 sql = "SELECT * FROM TBL_VIDEOS WHERE TBL_VIDEOS.ID = 'user' 
```

但用户不是 sql 中的有效变量，因此您得到无效的列名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:20:52.193

你的`SelectDataTable`方法绝对没问题。我想到的唯一一件事就是替换它：

```
sql = "SELECT * FROM TBL_VIDEOS WHERE TBL_VIDEOS.ID=" + stringId; 
```

经过

```
sql = string.Format("SELECT * FROM TBL_VIDEOS WHERE TBL_VIDEOS.ID 
        = '{0}'", stringId); 
```

# android - 用于在 2D OpenGL (Android) 中制作动画的纹理

> ID：11587174
> 
> 赞同：0
> 
> 时间：2012-07-20T21:29:15.160
> 
> 标签：android, opengl-es, textures

我一直在寻找答案，但没有找到任何具体的答案。

我想知道这两个示例中哪一个与速度和性能更相关。提前致谢！

我正在制作一个 2D 的 openGL ES 1.0 Android 游戏。对于动画角色，我使用不同的纹理。我对纹理有两种可能性：

第一个是将每个纹理放在一个 int 数组中，并根据框架更改选择哪个纹理：

```
gl.glBindTexture(GL10.GL_TEXTURE_2D, texture[actual_id]); 
```

另一方面，我们可以有一个包含所有图像的“大”纹理，并且只需修改纹理坐标。在这种情况下，而不是：

```
private float textures[] = {
    // Mapping coordinates for the vertices
    0.0f, 1.0f,     // top left     (V2)
    0.0f, 0.0f,     // bottom left  (V1)
    1.0f, 1.0f,     // top right    (V4)
    1.0f, 0.0f      // bottom right (V3)
}; 
```

（这将是第一种情况）它将是：

```
private float textures[] = {
    // Mapping coordinates for the vertices
    0.0f, 0.5f,     // top left     (V2)
    0.0f, 0.0f,     // bottom left  (V1)
    0.5f, 0.5f,     // top right    (V4)
    0.5f, 0.0f      // bottom right (V3)
}; 
```

（使用 2x2 框）并且这些坐标应该在纹理周围移动。

我想知道哪个可能是最快的。另外，如果有第三个最好的方法，我很想知道它。

谢谢你的时间。如果我必须详细说明问题，请问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:20:42.600

我认为这个问题没有一般的答案，因为它取决于其他一些事情。

我假设除了要绘制的字符之外，您还有很多其他对象。让我们假设你有一个看起来像这样的游戏循环：

```
while (gameNotFinished) {
  changeToTerrainTexture()
  drawTerrain()
  changeToCharacterTexture()
  drawCharacter() // the character you want to draw
  changeToHouseTexture()
  drawHouse()
  ...
} 
```

在这种情况下，无论如何您都必须更改为角色纹理。第一种方法是更好的解决方案，因为较小的纹理需要较少的纹理内存。

但是如果你的循环看起来像这样：

```
while (gameNotFinished) {
  changeToTerrainTexture()
  drawTerrain()
  changeToCharacterTexture()
  for (int i = 0; i < characters.size(); i++) {
    characters.get(i).draw()
  }
  ...
} 
```

在这种情况下，您可以从第二种方式中获益，因为您可以在不更改纹理的情况下以不同的动画状态显示多个角色。

我不知道 OpenGL ES 1.0 是否有任何真正的替代方案。使用 ES 2.0，您可以选择将一个纹理用于​​多个动画状态（如您的第二种方法）并计算着色器内的纹理坐标偏移量（因此您不需要多个纹理坐标数组）。

# jsf - 如何仅处理 commandButton 操作中的 primefaces 对话框？

> ID：11587178
> 
> 赞同：4
> 
> 时间：2012-07-20T21:29:50.557
> 
> 标签：jsf, process, dialog, primefaces, partial

我的问题是。我有一个 primefaces 对话框（模态窗口）。它里面有一个命令按钮。当我打开对话框并单击命令按钮时，对话框外部和后面的输入也会被验证。我只想处理对话框内的输入。

重要的是我在我的页面中添加对话框。该对话框位于其他文件（包括）中。

我尝试使用 process="dialog id" 属性但不起作用。

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T17:42:31.607

commandButton 生成一个 POST 请求，将包含此按钮的表单的表单数据提交给服务器。如果您只想在对话框中提交表单输入，请用 a 将对话框括起来`<h:form>`并解决在对话框上嵌套表单使用`appendToBody`属性的问题，如下所示：

```
<p:dialog appendToBody="true">
  <h:form>
  </h:form>
</p:dialog> 
```

这种方式对话框表单将在父表单之外。

# git - Windows 上的 Monodevelop Git 扩展在哪里寻找 SSH 密钥？

> ID：11587182
> 
> 赞同：2
> 
> 时间：2012-07-20T21:30:10.557
> 
> 标签：git, monodevelop

我在 Windows 上运行 Monodevelop。我已经安装了 Git Extensions（包括 msysGit）。我使用 mysysGit 生成了一个 RSA 密钥对（ssh-keygen -t rsa），并将该密钥添加到我们的 Git 服务器（使用 Gitlab）。该设置是正确的：我可以使用命令行以及 Git Extensions GUI（它本身使用命令行）进行推送和拉取。然而，在 Monodevelop 中，推拉失败。

Version Control > Update 导致 Monodevelop 提示我输入 git 用户密码。如果我没有将我的公钥放在 Gitlab 中，这也是我在命令行中看到的行为。所以看起来 Monodevelop 正在其他位置寻找我的 SSH 密钥；我将它存储在 C:/Users/myusername/.ssh/id_rsa.pub 中。

那么，Monodevelop Git 期望在哪里找到密钥呢？这适用于我的一位同事，但我无法弄清楚为什么我们会看到不同的行为。

这个 Monodevelop 3.0.3.4，和 Git 支持 3.0.3。据我所知，两者都是可用的最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:30:22.430

从 git-scm.com 安装 Git 时，安装过程中的一个对话框会要求您选择一个关于您想要修改环境的程度的选项。它提供了三个选项，其中选项 1 是默认选项，并且被描述为安全的。**我必须选择不安全的选项 3 才能使其工作。**但是，在 Windows 中设置一些环境变量可能就足够了，但我不知道是哪一个。

# jquery - jquery流沙回调

> ID：11587187
> 
> 赞同：1
> 
> 时间：2012-07-20T21:30:31.133
> 
> 标签：jquery, jquery-callback, quicksand

我试图在流沙安排它们之后返回元素的数量

[http://razorjack.net/quicksand/](http://razorjack.net/quicksand/)

这应该有点工作

```
function adjust_height (){
                 var getall = $('#wrapper .li').length;
                 console.log(getall);
}
        $(".portfolio-content").quicksand($filteredData, {
            duration: 800,
            easing: 'easeInOutQuad',
            adjustHeight:false

        },function (){
                  adjust_height ();

               }); 
```

但我得到了之前设置的长度，例如，如果有 4，点击时我有 2，计数为 4，下一次点击计数为 2。好像我的计数迟到了

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:45:42.443

在您的**流沙回调函数**中，`adjust_height();`添加以下内容：

```
var filteredSize = $filteredData.size();

alert(filteredSize);

// If the above var doesn't work, try this variant.
// var filteredSize = $($filteredData).size(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:55:09.183

Look at this example: [http://jsfiddle.net/EVagr/1/](http://jsfiddle.net/EVagr/1/)

Everything working as expected.

Try to update quicksand and jquery js files.

# ios - UIControl 上的重定向拖动事件

> ID：11587190
> 
> 赞同：0
> 
> 时间：2012-07-20T21:30:42.447
> 
> 标签：ios, ipad, ipod, uitouch, uicontrol

对于我正在开发的 iOS 应用程序，用户设备上的所有图像都显示在屏幕的一部分上。用户应该能够将这些图像拖到屏幕的另一部分，以将它们添加到将在记忆游戏中使用的图像集中。

这是一个屏幕截图，以防我的解释难以想象 ![截图让事情更清楚](../Images/2325ac36d98ba200e351db8177bfce73.png)

当用户拖动图像时，我希望发生的是创建该图像的稍小的半透明版本，他们将其拖到底部，但原始图像仍保留在那里。我可以很好地生成新图像，甚至可以指定一个移动新图像的目标。我遇到的问题是为了拖动新图像，用户必须将手指从屏幕上抬起并再次开始拖动。我希望新图像能够取代旧图像拖动事件。这是我现在拥有的代码。

```
UIControl *mask =  [[UIControl alloc]initWithFrame:frame];
[mask addSubview:img];
[mask addTarget:self action:@selector(dragExited:withEvent:) forControlEvents:UIControlEventTouchDragExit];
[scrImages addSubview:mask];

-(IBAction)dragExited:(id)sender withEvent:(UIEvent*)event
{
    UIControl *control = sender;
    [control resignFirstResponder];
    UIImageView *img = [control.subviews objectAtIndex:0];
    CGPoint point = [[[event allTouches]anyObject]locationInView:self.view];
    UIControl *mask = [[UIControl alloc]initWithFrame:CGRectMake(0, 0, img.image.size.width, img.image.size.height)];
    mask.center = point;
    [mask addSubview:[[UIImageView alloc]initWithImage:img.image]];
    [mask addTarget:mask action:@selector(removeFromSuperview) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:mask];
    [mask addTarget:self action:@selector(thumbnailMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside];
    [mask touchesMoved:nil withEvent:nil];
}

-(IBAction)thumbnailMoved:(id)sender withEvent:(UIEvent*)event
{
    UIControl *control = sender;
    CGPoint point = [[[event allTouches]anyObject]locationInView:self.view];
    control.center = point;
} 
```

我试图通过调用来开始拖动过程​​，`[mask touchesMoved:nil withEvent:nil];`但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:05:13.803

我将用一种不同的技术来回答这个问题，[平移手势](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)。我不使用你的技术，所以我不能和它说话，但我一直使用以下内容：

```
UIPanGestureRecognizer *pan;

pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanImage:)];
image01.userInteractionEnabled = YES;
[self.image01 addGestureRecognizer:pan];

pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanImage:)];
image02.userInteractionEnabled = YES;
[self.image02 addGestureRecognizer:pan]; 
```

然后我有处理程序：

```
- (void)handlePanImage:(UIPanGestureRecognizer *)sender
{
    static CGPoint originalCenter;
    static UIImageView *imageview;

    if (sender.state == UIGestureRecognizerStateBegan)
    {
        UIImageView *selectedImageView = (UIImageView *) sender.view;
        imageview = [[UIImageView alloc] initWithFrame:selectedImageView.frame];
        imageview.image = selectedImageView.image;
        imageview.alpha = 0.8;
        [sender.view.superview addSubview:imageview];

        originalCenter = imageview.center;
    }
    else if (sender.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translation = [sender translationInView:sender.view.superview];

        imageview.center = CGPointMake(originalCenter.x + translation.x, originalCenter.y + translation.y);
    }
    else if (sender.state == UIGestureRecognizerStateEnded)
    {
        [imageview removeFromSuperview];
        imageview = nil;

        CGPoint translation = [sender translationInView:sender.view.superview];

        // do whatever you want to at the end, in this case, animating the moving
        // of the old image to the new location. perhaps you don't want to move your
        // old image, but leave it there, maybe you just want to change the alpha of
        // what you dragged back to 1.0 and snap it into place. Just do whatever you
        // want here. Note, in this latter scenario, if you want to be able to drag
        // the new image back out, you'll have to create a new pan gesture recognizer
        // for it.

        [UIView animateWithDuration:0.2 
                         animations:^{
                             sender.view.center = CGPointMake(originalCenter.x + translation.x, originalCenter.y + translation.y);;
                         }];
    }
    else if (sender.state == UIGestureRecognizerStateCancelled || sender.state == UIGestureRecognizerStateFailed)
    {
        [imageview removeFromSuperview];
        imageview = nil;
    }
} 
```

您也可以，而不是为每个图像创建一个新的手势识别器，只需在父视图上创建一个，检测您结束的图像，然后继续。这可能看起来像：

```
UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanSuperView:)];
[self.view addGestureRecognizer:pan]; 
```

接着：

```
- (void)handlePanSuperView:(UIPanGestureRecognizer *)sender
{
    static CGPoint originalCenter;
    static UIImageView *selectedImageView = nil;
    static UIImageView *draggedImageView = nil;

    if (sender.state == UIGestureRecognizerStateBegan)
    {
        selectedImageView = nil;
        CGPoint location = [sender locationInView:sender.view];
        for (UIImageView *imageview in _imageviews)
        {
            if (CGRectContainsPoint(imageview.frame, location))
                selectedImageView = imageview;
        }
        if (selectedImageView)
        {
            draggedImageView = [[UIImageView alloc] initWithFrame:selectedImageView.frame];
            draggedImageView.image = selectedImageView.image;
            draggedImageView.alpha = 0.8;
            [sender.view addSubview:draggedImageView];

            originalCenter = selectedImageView.center;
        }
    }
    else if (sender.state == UIGestureRecognizerStateChanged && selectedImageView)
    {
        CGPoint translation = [sender translationInView:sender.view];

        draggedImageView.center = CGPointMake(originalCenter.x + translation.x, originalCenter.y + translation.y);
    }
    else if (sender.state == UIGestureRecognizerStateEnded && selectedImageView)
    {
        [draggedImageView removeFromSuperview];
        draggedImageView = nil;

        CGPoint translation = [sender translationInView:sender.view];

        // do whatever you want to at the end, in this case, animating the moving of the old image

        [UIView animateWithDuration:0.2 
                         animations:^{
                             selectedImageView.center = CGPointMake(originalCenter.x + translation.x, originalCenter.y + translation.y);;
                         }];
    }
    else if ((sender.state == UIGestureRecognizerStateCancelled || sender.state == UIGestureRecognizerStateFailed) && selectedImageView)
    {
        [draggedImageView removeFromSuperview];
        draggedImageView = nil;
    }
} 
```

# java - 如何验证“@”符号的字符串并传递给 if 语句

> ID：11587195
> 
> 赞同：0
> 
> 时间：2012-07-20T21:31:05.173
> 
> 标签：java, regex

我想知道以下代码有什么问题。

```
public void onClickSave (View cs)
{
    Pattern pattern = Pattern.compile("@");
    Matcher matcher = pattern.matcher(userid);
    boolean found = matcher.find();

      if(found){
         //do stuff 
```

所以目标是检查字符串中的@符号。不知道我错过了什么新的Java。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:35:22.617

为什么你不尝试使用 contains 方法？

```
String userID = "@Test";
boolean found = userID.contains("@"); 
```

但这也对我有用：

```
String userID = "@Test";
Pattern pattern = Pattern.compile(".*@.*");
Matcher matcher = pattern.matcher(userID);
boolean found = matcher.find(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:34:04.707

正则表达式在这里是多余的，你可以用这个`contains`方法完成同样的事情，

```
if(userid.contains("@")){
   //Do something. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:33:30.730

试试这个：

```
if(userid.contains("@") {
   //do stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T21:33:35.290

要么使用`String#contains`，要么

1.  将字符串转换为字符数组
2.  遍历每个字符，直到`@`找到该字符（如果有的话）

使用正则表达式来完成这样一个微不足道的任务是不必要的，而且过于复杂。

# scala - 如何使用提升框架从片段中设置元素的 ID？

> ID：11587196
> 
> 赞同：0
> 
> 时间：2012-07-20T21:31:11.860
> 
> 标签：scala, lift

我必须根据片段中确定的一些规则来渲染大量元素。之后，我需要对任何渲染元素中的用户交互做出反应。为了确定触发事件的元素是什么，我决定读取元素的 id。

例如。片段

```
def render = list.view.zipwithindex.map( case (value,index) => "*" #> <button id="{index}">{value}<button>) 
```

要得到这样的东西：

```
<button id="1">One</button>
<button id="2">Two</button>
<button id="3">Three</button> 
```

问题是我得到的是这样的：

```
<button id="{index}">One</button>
<button id="{index}">Two</button>
<button id="{index}">Three</button> 
```

怎么了？我已经使用单引号、双引号、使用 """{index}""" 进行了测试，但没有任何效果。

作为一个额外的，移动 id 是一种很好的处理方式，还是有一种更好的方式来使用提升来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:00:37.877

完全避免引号。

# multithreading - 并行/多处理器音频处理资源

> ID：11587197
> 
> 赞同：1
> 
> 时间：2012-07-20T21:31:48.733
> 
> 标签：multithreading, audio, multiprocessing

我最近花了很长时间学习实时音频处理的细节，我发现的大多数库/工具都是 c/c++ 代码或脚本/图形语言的形式，编译后的 c/c++ 代码如下引擎盖。

使用基于回调的 API，除了 GUI 或应用程序中的其他进程之外，运行音频进程非常简单。但是，我无法找到的是如何将多个进程/线程用于应用程序的音频处理部分。

您能否提供链接、书名，以及任何相关的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:23:17.453

听起来你想为音频做多线程 DSP。这并没有真正做太多，因为高性能音频需要低延迟和实时调度。要进行多线程 DSP，您需要在线程之间传递数据，这通常涉及互斥锁。使用互斥锁时，很难让实时编程工作。

当然，还有互斥体的替代品，并且存在大量非阻塞数据结构，但归根结底，与其他形式的并行性相比，并行化音频 DSP 算法带来的性能提升更少。

相反，如果您对从回调中获取音频数据感兴趣，则需要了解一些关于非阻塞数据结构的知识。您可能想查看 PortAudio 的源代码。特别是 PortAudio 中的 RingBuffer 是一种可移植的、非阻塞的数据传递结构，它对于许多应用程序在线程之间获取数据而不会阻塞非常有用。

# amazon-ec2 - Amazon RDS 副本

> ID：11587199
> 
> 赞同：0
> 
> 时间：2012-07-20T21:31:57.863
> 
> 标签：amazon-ec2, amazon-rds

我目前正在将我的服务器迁移到 Amazon EC2 和 RDS 上，但我不知道如何将我的生产数据库实例的副本创建到开发数据库实例。

基本上我想做的是每天或每周进行一次复制，以便能够在我的开发环境中处理几乎实际的数据。

当然，多可用区选项在这种情况下不起作用，因为这不是故障转移，并且复制应该只在一个方向（prod -> dev）进行，以防止任何测试数据的插入或生产中的任何损失服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:04:20.387

如果您的数据库相当小，您可以从 cron 作业运行以下命令：

`mysqldump --host=<RDS endpoint> --user=<username> --password=<password> mydatabase > | mysql --host=<dev server or dev RDS instance> --user=<username> --password=<password> mydatabase`

这将从 RDS 转储“mydatabase”数据库并将其通过管道传输到另一台主机上的“mydatabase”数据库。您不能在 RDS 上运行 cron 作业，因此必须在独立服务器或 EC2 实例上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:37:47.763

我会查看[http://www.skeddly.com/](http://www.skeddly.com/)

我知道它可以自动生成 RDS 快照，也许您可​​以设置自定义操作类型以以某种方式在您的 Dev RDS 实例上加载快照。

# java - 如何使用锁定和一种条件暂停/恢复？

> ID：11587200
> 
> 赞同：0
> 
> 时间：2012-07-20T21:31:59.917
> 
> 标签：java, multithreading, concurrency, locking, conditional-statements

我正在尝试实现一个图像缓存系统，该系统在将 5 个图像插入缓存后会暂停。

```
public void run() {
    int index = 0;
    lock.lock();
    try {
        while (index < list.getJpegCount() && !bCancel) {
            String file = list.getJpeg(index);
            images.put(file,
                    ImageUtils.getThumbNail(list.getJpeg(index), size));
            index++;
            batchCount++;
            Console.writeLine("Object cached: " + file);
            if (batchCount > 5) {
                try {
                    batchCount = 0;
                    Console.writeLine("Waiting for next batch...");
                    bufferEmpty.await();
                    Console.writeLine("We are back...");
                } catch (InterruptedException ex) {
                    Logger.getLogger(JpegCache.class.getName()).log(
                            Level.SEVERE, null, ex);
                }
            }
        }
    } finally {
        lock.unlock();
    }
} 
```

现在的问题是我想使用以下方法唤醒线程，但它没有唤醒：

```
public Image getNext()
{        
    lock.lock();
    currentIndex++;
    String filename=list.getJpeg(currentIndex);

    if (!images.containsKey(filename))
    {
        bufferEmpty.signalAll();            
        Console.writeLine("Start next batch...");
        return ImageUtils.getThumbNail(filename, size);           

    }else
        return images.get(filename);

} 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:21:13.350

解决方案：

我忘了开锁：

```
public Image getNext()
{        
    lock.lock();
    currentIndex++; 
    String filename=list.getJpeg(currentIndex);
    if (!images.containsKey(filename))
    {
        bufferEmpty.signalAll();
        lock.unlock();
        Console.writeLine("Start next batch...");
        return ImageUtils.getThumbNail(filename, size);           

    }else
    {
        lock.unlock();
        return images.get(filename);
    }
} 
```

# windows - Windows 窗体 - 将对象传递给模态窗体以填充然后传回

> ID：11587203
> 
> 赞同：0
> 
> 时间：2012-07-20T21:32:11.043
> 
> 标签：windows, forms, modal-dialog, pass-by-reference

我有一个使用 Dictionary 作为其数据源的 UltraGrid。我想将字典传递给另一个（模态）表单以进行操作，并将更改反映在父表单上的字典中。

我能够在字典中传递给子窗体，在它上面放屁让我心悦诚服，但是没有任何变化反映在父窗体上的字典中。我相信这是因为子表单上的字典参数没有引用同一个对象。

我真的不想通过 ref 传入字典。模态表单有一个私有构造函数和一个公共静态方法 ShowForm()。我没有在上面使用实例。有人可以给我扔一根骨头吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:48:24.747

好的，我可以通过做两件事来让它工作：

1）确保在将字典传递给子表单之前对其进行初始化，而不是在子表单中初始化空字典。

2）当子窗体关闭时，将字典分配回网格上的数据源。

这是显示它的父表单的代码：

```
private void addColorCodeLabel_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        var assignedColorCodes = 
            (Dictionary<string, string>)this.subtypeColorCodesUltraGrid.DataSource;

        //Initialize a null dictionary so that SubtypeColorCodeForm will reference the same dictionary.
        if (assignedColorCodes == null)
            assignedColorCodes = new Dictionary<string, string>();

        SubtypeColorCodeForm.ShowForm(this, new ImageServerProxy(this.tbImagingUri.Text), 
            assignedColorCodes);

        //Assign the updated dictionary back to the data source.
        this.subtypeColorCodesUltraGrid.DataSource = assignedColorCodes;
    } 
```

# python - Pyparsing：如何将令牌存储到以下列表/组中？

> ID：11587211
> 
> 赞同：3
> 
> 时间：2012-07-20T21:32:59.990
> 
> 标签：python, pyparsing

我正在尝试使用 pyparsing 编写解析器。这是我的语法定义中的一个片段：

```
import pyparsing as pp

Modifier = pp.Word(pp.alphas)
Name = pp.Literal("foobar")
Sentence = pp.Optional(Modifier) + Name + pp.Group(pp.OneOrMore(Modifier)) 
```

这是我解析示例字符串时发生的情况：

```
>>> print Sentence.parseString("testA FOOBAR testB testC")
['testA', 'FOOBAR', ['testB', 'testC']] 
```

有什么方法可以修改我上面的语法规则，以便将第一个可选修饰符推入以下组？

例子：

```
>>> print MagicSentence.parseString("test A FOOBAR testB testC")
['FOOBAR', ['testA', 'testB', 'testC']] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:50:17.567

最直接的方法是解析它，就像你所做的那样，但是向 Sentence 添加一个解析操作来重新排列元素。像这样的东西：

```
>>> def moveLeadingItem(tokens):
...     first = tokens[0]
...     del tokens[0]
...     tokens[-1].insert(0,first)
... 
>>> Sentence.setParseAction(moveLeadingItem)
>>> print Sentence.parseString("testA foobar testB testC")
['foobar', ['testA', 'testB', 'testC']] 
```

# magento-1.7 - Magento 1.7 - 管理员创建新订单，缺少“自定义价格”复选框

> ID：11587214
> 
> 赞同：0
> 
> 时间：2012-07-20T21:33:17.367
> 
> 标签：magento-1.7

我希望有人可以帮助我，因为我现在很困惑。直到昨天，当我想在管理后端手动创建订单时，我会添加产品，他们会为每个项目设置“自定义价格”复选框，因此您可以根据需要手动更改价格。我有时突然需要这个功能，因为今天那个复选框刚刚消失了。我无法再更改手动添加到订单中的任何产品的价格。即使我之后编辑它，我仍然无法更改商品价格。

那么昨天和今天之间发生了什么......我上传了一个我最终不喜欢的扩展程序并删除了所有上传的文件。我小心翼翼地不删除不属于扩展的任何其他内容。但由于某种奇怪的原因，整个网站崩溃了。无法进入前端或后端。不得不联系托管服务提供商以恢复到今天早上幸运的备份。现在一切都很好，网站又回来了。我今天还通过 MAGMI 进口商更新了我所有的产品价格，并且进展顺利。然后我去手动清除数据库中所有已取消的订单/发票/贷项通知单/发货，这样它们就不会在客户登录时出现在管理后端或前端。仅在数据库中保留已完成/处理/待处理的订单。

所以，我不知道是什么导致“自定义价格”复选框消失了。任何有关如何取回它的帮助将不胜感激。

一些信息：Magento v1.7.0.0。所有产品 = 简单

请帮忙。

谢谢科恩拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:15:43.310

最终找到了导致错误的罪魁祸首。好吧，一个导致它的区域。要查明确切的问题有点困难。

我似乎是 MAGMI 导入器和一些列值之间的组合导致自定义价格框消失。有问题的值对网站上产品的显示没有实际影响。它似乎对后端更具管理导向的价值。作为一项附加措施，我禁用了 MAGMI 的重新索引插件，并在导入后在 magento 中手动执行。

现在一切正常:)

# backbone.js - Backbone model.save() 导致 POST not PUT

> ID：11587217
> 
> 赞同：7
> 
> 时间：2012-07-20T21:33:40.687
> 
> 标签：backbone.js

我有一个主干模型：

```
var User = Backbone.Model.extend({
  idAttribute: '_id',

  url: '/api/user',

  defaults:
    { username: ''
    }
}); 
```

我拿它：

```
var user = new User();

user.fetch(); 
```

现在，作为`click`我的观点之一，我有这个：

```
toggleSubscription: function () {
  user.set('subscriptions', true);
  user.save();
} 
```

这会导致 POST 请求。但是，该记录已经存在于服务器上，并且由于我获取了它（并且模型实例具有一个`id`属性），我认为 Backbone 应该执行 PUT 而不是 POST。为什么它可能会做一个 POST 呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T21:37:44.667

尝试检查`user.isNew()`。

看起来您创建了一个没有 ID 的新模型，这就是它试图在`Backbone.sync`.

**更新：**

以上是完全正确的。之所以这样做，是`POST`因为它是一个新模型（这意味着它没有 id）。在获取模型之前，您需要给它一个 id。在您的示例中：

```
var user = new User();
user.fetch();
user.save(); // in XHR console you see POST

var user = new User({ id: 123 });
user.fetch();
user.save(); // in XHR console you see PUT 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-23T16:30:18.610

> 如果模型还没有 id，则认为它是新的。-- [http://backbonejs.org/#Model-isNew](http://backbonejs.org/#Model-isNew)

如果模型还没有 id，它被认为是新的......因此主干将发出`PUT`请求而不是`POST`.

`type: 'POST'`只需添加到您的保存块即可覆盖此行为：

```
var fooModel = new Backbone.Model({ id: 1});

fooModel.save(null, {
  type: 'POST'
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-07T12:33:24.260

使用 urlRoot 属性设置基本 URL `/api/user`。然后

1.  `/api/user`当您保存没有`_id`设置属性的模型时，它将发布到
2.  `/api/user/{_id}`当您保存具有`_id`属性集的模型时，它将 PUT 。请注意，它会自动将值附加`_id`到基本 URL。

它将查找`_id`属性的值，因为您已将该值设置为`idAttribute`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T22:39:47.687

服务器响应必须是这样的：

```
{
  _id : 111
} 
```

因为您将 _id 设置为主键。获取模型时，验证 _id 的值，它必须有一个值：console.log(model.get('_id'));

我的想法是您在主干模型中设置了“_id”作为主键，但服务正在返回您的“id”

**更新**：添加正常行为的示例代码：

```
var UserModel = Backbone.Model.extend({
  idAttribute: '_id',

  url: '/api/user',

  defaults:
    { username: ''
    }
});
user = new UserModel({_id : 20});
user.save();
user = new UserModel();
user.save(); 
```

输出： PUT /api/user 405（方法不允许） POST /api/user 404（未找到）

检查模型的第一个实例如何具有 id 并尝试执行 PUT 但另一个 POST。我无法重现您的问题，所以我认为问题出在您的服务器响应上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T10:13:18.670

如果可能[`emulateHTTP`](http://backbonejs.org/#Sync-emulateHTTP)是真的，可能值得检查。这会将您的所有 PUT 更改为 POST 并添加一个`_method`标题（您可能还想检查它是否存在以确认这个想法）。

# c# - 如何使用 iTextSharp 设置 HTML 表格的背景颜色以输出到 PDF

> ID：11587218
> 
> 赞同：2
> 
> 时间：2012-07-20T21:33:43.690
> 
> 标签：c#, asp.net, html, itextsharp

我有一些 HTML 正在使用 iTextSharp 呈现为 PDF 文件。但是，我在设置表格单元格的背景颜色时遇到了一些问题。这是我正在使用的一些示例 HTML：

```
<tr align="center">
<th width="16%" colspan="2" style="height: 16px; font-weight:bold;" color="#FF0000">Test Colored Text</th>
<td width="28%" colspan="2" style="height: 16px;"><asp:Literal runat="server" ID="litData" /></td>
</tr> 
```

在这种情况下，**<th>**元素具有通过**style**属性设置的一些属性。在这种情况下，高度和字体粗细。此外，我还为此设置了一个**颜色属性。**

**这会向我的 PDF 文件输出一个表格，其中“测试彩色文本”文本根据颜色**属性设置为红色。我的目标是设置此单元格的背景颜色，并尝试将 css 属性**背景颜色**添加到**样式**标记中，但没有成功。

由于正在读取**颜色**属性，因此我尝试了其他一些属性以查看是否需要： **background-color**， **backgroundcolor**， **basecolor**

但是，这些都不能有效地改变 PDF 文件中单元格的背景颜色。

我的问题是，它正在寻找设置背景颜色的属性名称是什么？我环顾四周，只找到了人们这样做的方法，购买在代码中构建单元格，这对我来说不是一个选择，因为我被这个需要样式的 HTML 卡住了。

**编辑：**使用**bgcolor**属性设置单元格的背景。谢谢路易斯！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T21:42:19.283

尝试使用该`bgcolor`属性。

```
<th  bgcolor="#FFFF00" color="#FF0000">Test Colored Text</th> 
```

# python - 如何在 Python 中处理 AssertionError 并找出它发生在哪一行或哪条语句上？

> ID：11587223
> 
> 赞同：75
> 
> 时间：2012-07-20T21:34:41.450
> 
> 标签：python, assert

我想处理`AssertionError`s 以向用户隐藏堆栈跟踪的不必要部分，并打印一条消息，说明错误发生的原因以及用户应该如何处理。

**有什么方法可以找出块`assert`内失败的行或语句`except`？**

```
try:
    assert True
    assert 7 == 7
    assert 1 == 2
    # many more statements like this
except AssertionError:
    print 'Houston, we have a problem.'
    print
    print 'An error occurred on line ???? in statement ???'
    exit(1) 
```

我不想将其添加到每个断言语句中：

```
assert 7 == 7, "7 == 7" 
```

因为它重复信息。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-20T21:37:03.310

使用[回溯](http://docs.python.org/library/traceback.html)模块：

```
import sys
import traceback

try:
    assert True
    assert 7 == 7
    assert 1 == 2
    # many more statements like this
except AssertionError:
    _, _, tb = sys.exc_info()
    traceback.print_tb(tb) # Fixed format
    tb_info = traceback.extract_tb(tb)
    filename, line, func, text = tb_info[-1]

    print('An error occurred on line {} in statement {}'.format(line, text))
    exit(1) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-08-17T09:10:13.850

traceback 模块和 sys.exc_info 对于追踪异常的来源来说太过分了。这就是默认回溯中的全部内容。因此，不要调用 exit(1) 而是重新加注：

```
try:
    assert "birthday cake" == "ice cream cake", "Should've asked for pie"
except AssertionError:
    print 'Houston, we have a problem.'
    raise 
```

它给出了以下输出，其中包括有问题的语句和行号：

```
Houston, we have a problem.
Traceback (most recent call last):
  File "/tmp/poop.py", line 2, in <module>
    assert "birthday cake" == "ice cream cake", "Should've asked for pie"
AssertionError: Should've asked for pie 
```

同样，日志模块可以轻松记录任何异常的回溯（包括那些被捕获且从未重新引发的异常）：

```
import logging

try:
    assert False == True 
except AssertionError:
    logging.error("Nothing is real but I can't quit...", exc_info=True) 
```

# javascript - 在 Javascript 中，如何继承和扩展被继承的方法？

> ID：11587224
> 
> 赞同：1
> 
> 时间：2012-07-20T21:34:50.387
> 
> 标签：javascript, oop, backbone.js, prototype

不幸的是，我四处搜索，但没有找到这个问题的副本。

文件1：

```
var Graph = Backbone.View.extend({
  move: function() {
    //some stuff
  }, //more stuff
}) 
```

文件 2：

```
define ([ './graph.js' ]), function( graph ) {
  var SubGraph = Backbone.View.extend({
// this file needs to inherit what is within the move method but extend it to include other stuff
   }) 
```

如何在不破坏现有属性的情况下扩展继承的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:49:27.577

看起来你正在使用 Require.js

做：

图表模块：

```
define(function() {
  return Backbone.View.extend({
    move: function() {
    //some stuff
  }
}); 
```

子图模块：

```
define(['require', './graph'], function(require) {
  var Graph = require('./graph');

  return Graph.extend({
    // this file needs to inherit what....
  }
}); 
```

或者，如果您没有定义很多依赖项，请不要包括`require`：

```
define(['./graph'], function(Graph) {
  return Graph.extend({
    // this file needs to inherit what....
  }
}); 
```

# 3d - 在 3d 形状上创建样本点

> ID：11587225
> 
> 赞同：1
> 
> 时间：2012-07-20T21:34:51.950
> 
> 标签：3d, computational-geometry

有人可以推荐一种从三角形表示的 3D 实体创建点样本的算法吗？点样本应该几乎均匀地分布在表面上，并且应该保证没有给定半径的球适合通过点样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:21:28.047

如果您不需要最佳性能（或者您可以预先计算点）并且不想编写太多代码，您可以使用一些蒙特卡罗变体。

您可以从模型边界框内的许多随机点开始，或者按照球半径的密度组织成网格。

然后对于每一点：

*   找到最近的三角形和距离
*   如果它太远 - 丢弃它
*   如果不是 - 将其投影在三角形上

我知道它很重，但代码应该相对简单。

* * *

在第二个想法有另一种简单的方法：

*   对于每个三角形，计算其边的长度。
*   如果边缘太长 - 将三角形分割（分成 2 或 4 - 这取决于您的需要）。
*   将生成的分割顶点（顶点）添加到点列表中。
*   对生成的三角形执行相同的操作。
*   最后将您的网格顶点添加到列表中。

它不会为您提供理想的分布，但编写起来非常简单并且应该可以工作:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:13:51.687

我所知道的最简单的方法是一个两阶段的过程。1) 将网格展开回二维表示，以及 2) 使用采样技术在表面上产生近似均匀分布的点。

如果您需要自己实现所有内容，那么展开过程很可能是最具挑战性的一步。[blender](http://www.blender.org/)和[meshlab](http://meshlab.sourceforge.net/)等工具包括执行此操作的工具，因为该问题与 3D 图形中 UV 纹理坐标的生成有关。我相信有许多算法和技术可以解决此类问题，但选择*最好*的可能需要反复试验，具体取决于三角形的退化程度。

生成的展开网格上点的均匀分布很容易 - 您可以使用[低差异采样序列](http://planning.cs.uiuc.edu/node210.html)（例如 Halton 或 Hammersly 序列）在您的空间上产生几乎均匀的点分布，并使用拒绝采样来删除任何点不属于展开的网格。

您需要做一些额外的检查，以确保展开时网格的接缝保持适当的采样水平，以确保在重新折叠时满足您对最小球的要求。

根据过去的经验，这种方法的警告是，如果您的网格不是多方面的（即/它有裂缝、自相交或 t 形接头），您几乎肯定必须在开始之前清理这些。对于非常大的数据集，这可能非常耗时。

# php - 在sql中选择特定单元格

> ID：11587226
> 
> 赞同：0
> 
> 时间：2012-07-20T21:34:55.393
> 
> 标签：php, sql

这是一个登录系统。当我希望用户登录时，我希望它获取给定的密码并将其与给定行的“密码”列进行比较......在这种情况下`$usernameinput`，但我使用的方法不起作用。有什么建议么？

```
<?php

$usernameinput = $_POST["uname"];
$passwordinput = $_POST["pass"];

if (empty($usernameinput))
{
echo "";
}

else
{

$con = mysql_connect("localhost","STUFFFFF","STUFFFFFF");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  } 
```

这里是它选择的地方

```
mysql_select_db("STUFFFFF", $con);

$login = mysql_query("SELECT * FROM Users
WHERE Username='$usernameinput'");

while($row = mysql_fetch_array($result))
  {
    $matchpassword = $row['Password'];
  }
} 
```

* * *

```
if (empty($passwordinput))
{
echo "";
}
else
{

if ("$passwordinput"=="$matchpassword")
{
$sqlusername = $usernameinput;
echo "You were logged in successfully, now you can visit the site as $sqlusername. <br />"; 
}
else
{
echo "You have entered an incorrect password.";
}

}
?>

<form action="login.php" method="post">
Username: <input type="text" name="uname" /> <br />
Password: <input type="password" name="pass" /> <br />
<input value="Login" type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:37:21.217

您应该使用`mysql_fetch_assoc`按名称查询结果集中的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:57:13.777

为什么不将密码参数添加到 SQL 语句中。

WHERE 用户名 = '" . $usernameinput . "' 和密码 = '" . $passwordinput . "'

然后测试是否有任何结果。

另请注意，出于安全和隐私原因，您应该始终加密数据库中的密码。调查一下。此外，您应该使用 mysqli 函数，而不是 mysql 函数，因为它们具有增强的保护功能。

抱歉格式化，我用的是手机=/

在我的脑海中，它会是这样的：

$rows = mysqli_num_rows($result);

if($rows <1){ //没有找到用户名，密码错误 } else{ //用户名和密码匹配 }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:01:12.120

```
$sql = mysql_query('SELECT password FROM users WHERE username="'.mysql_real_escape_string($_POST['username']).'"';
$user = mysql_fetch_assoc($sql);
if ($user['password'] == sha1($_POST['password'])) {
    //Logged in
} else {
    //Wrong password
} 
```

这样可以防止 MySQL 注入，并且用户的密码是安全的。

# cuda - 基本 CUDA - 使用 C++ 让内核在设备上运行

> ID：11587227
> 
> 赞同：0
> 
> 时间：2012-07-20T21:35:02.573
> 
> 标签：cuda

我是 CUDA 的新手，试图让一个基本的内核在设备上运行。我已经编译了示例然后运行，所以我知道设备驱动程序工作/CUDA 可以成功运行。我的目标是让我的 C++ 代码调用 CADU 以大大加快任务速度。我一直在网上阅读一堆关于如何做到这一点的不同帖子。具体来说，[这里]：[我可以从未由 nvcc 编译的 C++ 代码调用 CUDA 运行时函数吗？](https://stackoverflow.com/questions/3811539/can-i-call-cuda-function-calls-in-c).

当我编译和运行我的代码（发布在下面）时，我的问题非常简单（非常简单），我没有收到任何错误，但内核似乎没有运行。这应该很容易解决，但 6 小时后我不知所措。我会在 NVIDIA 论坛上发布此内容，但它们仍然处于关闭状态：/。我敢肯定答案是非常基本的 - 有什么帮助吗？下面是：我的代码，我如何编译它，以及我看到的终端输出：

主文件

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
extern void kernel_wrapper(int *a, int *b);

int main(int argc, char *argv[]){
int a = 2;
int b = 3;

printf("Input: a = %d, b = %d\n",a,b);
kernel_wrapper(&a, &b);
printf("Ran: a = %d, b = %d\n",a,b);
return 0;
} 
```

内核.cu

```
#include "cuPrintf.cu"
#include <stdio.h>
__global__ void kernel(int *a, int *b){
int tx = threadIdx.x;
cuPrintf("tx = %d\n", tx);
switch( tx ){
  case 0:
    *a = *a + 10;
    break;
  case 1:
    *b = *b + 3;
    break;
  default:
    break;
  }
}

void kernel_wrapper(int *a, int *b){
  cudaPrintfInit();
  //cuPrintf("Anything...?");
  printf("Anything...?\n");
  int *d_1, *d_2;
  dim3 threads( 2, 1 );
  dim3 blocks( 1, 1 );

  cudaMalloc( (void **)&d_1, sizeof(int) );
  cudaMalloc( (void **)&d_2, sizeof(int) );

  cudaMemcpy( d_1, a, sizeof(int), cudaMemcpyHostToDevice );
  cudaMemcpy( d_2, b, sizeof(int), cudaMemcpyHostToDevice );

  kernel<<< blocks, threads >>>( a, b );
  cudaMemcpy( a, d_1, sizeof(int), cudaMemcpyDeviceToHost );
  cudaMemcpy( b, d_2, sizeof(int), cudaMemcpyDeviceToHost );
  printf("Output: a = %d\n", a[0]);
  cudaFree(d_1);
  cudaFree(d_2);

  cudaPrintfDisplay(stdout, true);
  cudaPrintfEnd();
} 
```

我使用以下命令从终端编译上述代码：

```
g++ -c main.cpp
nvcc -c kernel.cu -I/home/clj/NVIDIA_GPU_Computing_SDK/C/src/simplePrintf
nvcc -o main main.o kernel.o 
```

当我运行代码时，我得到以下终端输出：

```
$./main
Input: a = 2, b = 3
Anything...?
Output: a = 2
Ran: a = 2, b = 3 
```

很明显，main.cpp 正在正确编译并调用 kernel.cu 代码。明显的问题是内核似乎没有运行。我确信这个问题的答案是基本的——非常非常基本。但我不知道发生了什么 - 请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:47:59.340

在 kernel_wrapper 中，您有以下调用：

```
kernel<<< blocks, threads >>>( a, b ); 
```

您正在做的是向它传递对存在于主机上的变量的引用。GPU 无法对它们进行操作。传递的值必须存在于 GPU 上。基本上通过 d_1 和 d_2 将解决问题，结果将是 a = 12 和 b = 6。

```
kernel<<< blocks, threads >>>( d_1, d_2 ); 
```

# ruby-on-rails - 如何测试使用捕获的辅助方法？

> ID：11587229
> 
> 赞同：2
> 
> 时间：2012-07-20T21:35:04.903
> 
> 标签：ruby-on-rails, testing, rspec, helpers

我有一个助手执行：

```
def send_to_block(value, &block)
   capture(value, &block)
end 
```

编写测试时：

```
value_received = nil
send_to_block('test') do |value|
   value_received = value
end
value_received.should == 'test' 
```

我收到以下异常：

```
NameError: uninitialized constant Kernel::DISABLED 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:35:22.297

您需要使用如下所述的辅助对象：[https ://www.relishapp.com/rspec/rspec-rails/v/2-11/docs/helper-specs/helper-spec](https://www.relishapp.com/rspec/rspec-rails/v/2-11/docs/helper-specs/helper-spec)

这些方面的东西应该是你所追求的：

```
require "spec_helper"

describe MyHelper do
  describe "#send_to_block" do
    it "should do something" do
      helper.send_to_block('test').should == 'I have no idea what this should be'
    end
  end
end 
```

# javascript - CoffeeScript：对象初始化器中的 Getter/Setter

> ID：11587231
> 
> 赞同：43
> 
> 时间：2012-07-20T21:35:14.433
> 
> 标签：javascript, oop, coffeescript, getter-setter, ecmascript-5

ECMAScript 允许我们定义 getter 或 setter 如下：

*[文本/javascript]*

```
var object = {
  property: 7,
  get getable() { return this.property + 1; },
  set setable(x) { this.property = x / 2; }
}; 
```

如果我使用*类*，我可以解决：

*[文本/咖啡脚本]*

```
"use strict"

Function::trigger = (prop, getter, setter) ->
      Object.defineProperty @::,
              get: getter
              set: setter               

class Class
      property: ''

      @trigger 'getable', ->
               'x'

      member: 0 
```

但是，如果我想*直接在对象*上定义触发器怎么办-**不**使用**`defineProperty`/ -`ies`**。我想做类似的事情（它*不是那样工作*的）：

[文本/x-伪咖啡脚本]

```
object =
  property: 'xhr'
  get getable: 'x' 
```

它在 JavaScript 中运行没有任何问题，我不希望我的脚本在使用 CoffeeScript 时倒退。难道没有一种方法可以像在 JavaScript /ECMAScript**中那样舒服吗？**谢谢。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-21T14:09:10.960

不，暂时没有:(

来自[CoffeeScript 常见问题解答](https://github.com/jashkenas/coffee-script/wiki/FAQ)：

> 问：您会在功能 X 依赖于平台的情况下添加功能 X 吗？
> 
> 答：不可以，不允许将特定于实现的功能作为策略。您在 CoffeeScript 中编写的所有内容都应该在任何当前的 JavaScript 实现上得到支持和运行（实际上，这意味着最低的公分母是 IE6）。因此，将不会实现以下功能：getter & setter、yield。

一些关于 getter 和 setter 语法的 GitHub 问题：[#64](https://github.com/jashkenas/coffee-script/issues/64)、[#451](https://github.com/jashkenas/coffee-script/issues/451)、[#1165](https://github.com/jashkenas/coffee-script/issues/1165/)（最后一个有一些很好的讨论）。

我个人认为拥有 getter 和 setter 文字语法对于 CoffeeScript 来说是一个不错的选择加入功能，因为它`defineProperty`是[ECMAScript 标准的一部分](http://ecma-international.org/ecma-262/5.1/)。JavaScript 中对 getter 和 setter 的需求可能值得怀疑，但您不会因为它们存在而被迫使用它们。

* * *

无论如何，正如您所注意到的，实现一个调用`Object.defineProperty`类声明的便捷包装函数并不难。我个人会使用[这里](https://github.com/jashkenas/coffee-script/issues/451#issuecomment-2404226)建议的方法：

```
Function::property = (prop, desc) ->
  Object.defineProperty @prototype, prop, desc

class Person
  constructor: (@firstName, @lastName) ->
  @property 'fullName',
    get: -> "#{@firstName} #{@lastName}"
    set: (name) -> [@firstName, @lastName] = name.split ' '

p = new Person 'Robert', 'Paulson'
console.log p.fullName # Robert Paulson
p.fullName = 'Space Monkey'
console.log p.lastName # Monkey 
```

或者，也许创建两种不同的方法：

```
Function::getter = (prop, get) ->
  Object.defineProperty @prototype, prop, {get, configurable: yes}

Function::setter = (prop, set) ->
  Object.defineProperty @prototype, prop, {set, configurable: yes}

class Person
  constructor: (@firstName, @lastName) ->
  @getter 'fullName', -> "#{@firstName} #{@lastName}"
  @setter 'fullName', (name) -> [@firstName, @lastName] = name.split ' ' 
```

对于普通对象，您可以按照[Jason 的建议](https://stackoverflow.com/a/11587298/581845)`Object.defineProperty`在对象本身上使用（或[`Object.defineProperties`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperties)；））。也许将其包装在一个小函数中：

```
objectWithProperties = (obj) ->
  if obj.properties
    Object.defineProperties obj, obj.properties
    delete obj.properties
  obj

rectangle = objectWithProperties
  width: 4
  height: 3
  properties:
    area:
      get: -> @width * @height

console.log rectangle.area # 12
rectangle.width = 5
console.log rectangle.area # 15 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-19T19:48:57.847

这是另一种在 CoffeeScript 中使用 getter 和 setter 定义属性的方法，它保持了相对简洁的语法，而无需向全局 Function 原型添加任何内容（我不想这样做）：

```
class Person
  constructor: (@firstName, @lastName) ->
  Object.defineProperties @prototype,
    fullName:
      get: -> "#{@firstName} #{@lastName}"
      set: (name) -> [@firstName, @lastName] = name.split ' '

p = new Person 'Robert', 'Paulson'
console.log p.fullName # Robert Paulson
p.fullName = 'Space Monkey'
console.log p.lastName # Monkey 
```

它适用于许多属性。例如，这里有一个 Rectangle 类，它是根据 (x, y, width, height) 定义的，但为替代表示 (x1, y1, x2, y2) 提供了访问器：

```
class Rectangle                                     
  constructor: (@x, @y, @w, @h) ->
  Object.defineProperties @prototype,
    x1:
      get: -> @x
      set: (@x) ->
    x2:
      get: -> @x + @w
      set: (x2) -> @w = x2 - @x
    y1:
      get: -> @y
      set: (@y) ->
    y2:
      get: -> @y + @h
      set: (y2) -> @w = y2 - @y

r = new Rectangle 5, 6, 10, 11
console.log r.x2 # 15 
```

这是[相应的 JavaScript 代码](http://coffeescript.org/#try:class%20Rectangle%0A%20%20constructor%3A%20(%40x%2C%20%40y%2C%20%40w%2C%20%40h)%20-%3E%0A%20%20Object.defineProperties%20%40prototype%2C%0A%20%20%20%20x1%3A%0A%20%20%20%20%20%20get%3A%20-%3E%20%40x%0A%20%20%20%20%20%20set%3A%20(%40x)%20-%3E%0A%20%20%20%20x2%3A%0A%20%20%20%20%20%20get%3A%20-%3E%20%40x%20%2B%20%40w%0A%20%20%20%20%20%20set%3A%20(x2)%20-%3E%20%40w%20%3D%20x2%20-%20%40x%0A%20%20%20%20y1%3A%0A%20%20%20%20%20%20get%3A%20-%3E%20%40y%0A%20%20%20%20%20%20set%3A%20(%40y)%20-%3E%0A%20%20%20%20y2%3A%0A%20%20%20%20%20%20get%3A%20-%3E%20%40y%20%2B%20%40h%0A%20%20%20%20%20%20set%3A%20(y2)%20-%3E%20%40w%20%3D%20y2%20-%20%40y%0A%0Ar%20%3D%20new%20Rectangle%205%2C%206%2C%2010%2C%2011%0Aconsole.log%20r.x2%20%23%2015)。享受！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-20T21:42:08.983

您也可以在直接 JSON 对象上使用 Object.defineProperty。

```
obj = {}
Object.defineProperty obj, 'foo',
    get: ->
        return 'bar' 
```

由于各种原因，CoffeeScript 中的 get/set 表示法不起作用。最大的问题是编译器没有被构建来解释 get/set 表示法。

请注意，并非所有浏览器（特别是 IE）都支持 get/set。另请注意，新的 ECMA 标准 (ECMAScript5) 提到 Object.defineProperty 作为使用 getter/setter 定义属性的方式。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-10T20:24:35.730

像@curran 一样，我不喜欢修改`Function`原型。这是我在我的一个项目中所做的：

在某处定义一个实用函数，该函数对于给定的类返回 2 个函数，使您可以轻松地在类的原型上添加 getter 和 setter：

```
gs = (obj) ->
  getter: (propName, getterFunction) ->
    Object.defineProperty obj.prototype, propName, 
      get: getterFunction
      configurable: true
      enumerable: true
  setter: (propName, setterFunction) ->
    Object.defineProperty obj.prototype, propName, 
      set: setterFunction
      configurable: true
      enumerable: true 
```

**gs**代表**g** etter 和**s** etter。

然后，您构建并导入为您的类配置的两个函数：

```
class Dog
  { getter, setter } = gs @

  constructor: (name, age) -> 
    @_name = name
    @_age = age

  getter 'name', -> @_name
  setter 'name', (name) -> 
    @_name = name
    return

  getter 'age', -> @_age
  setter 'age', (age) -> 
    @_age = age
    return 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-21T09:01:29.063

另一种方法：

```
get = (self, name, getter) ->
  Object.defineProperty self, name, {get: getter}

set = (self, name, setter) ->
  Object.defineProperty self, name, {set: setter}

prop = (self, name, {get, set}) ->
  Object.defineProperty self, name, {get: get, set: set}

class Demo 
  constructor: (val1, val2, val3) ->
    # getter only
    get @, 'val1', -> val1
    # setter only
    set @, 'val2', (val) -> val2 = val
    # getter and setter
    prop @, 'val3', 
      get: -> val3
      set: (val) -> val3 = val 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-16T21:57:08.120

感谢之前去过的其他人。非常普遍和简单：

```
attribute = (self, name, getterSetterHash) ->
  Object.defineProperty self, name, getterSetterHash

class MyClass
  constructor: () ->
    attribute @, 'foo',
      get: -> @_foo ||= 'Foo' # Set the default value
      set: (who) -> @_foo = "Foo #{who}"

    attribute @, 'bar',
      get: -> @_bar ||= 'Bar'

    attribute @, 'baz',
      set: (who) -> @_baz = who

myClass = new MyClass()
alert(myClass.foo) # alerts "Foo"
myClass.foo = 'me' # uses the foo setter
alert(myClass.foo) # alerts "Foo me" 
```

# ruby - :symbol => 与符号之间的区别：

> ID：11587243
> 
> 赞同：0
> 
> 时间：2012-07-20T21:36:51.607
> 
> 标签：ruby

> **可能重复：**[和](https://stackoverflow.com/questions/8675206/is-there-any-difference-between-key-value-and-key-value-assignments)[分配](https://stackoverflow.com/questions/8675206/is-there-any-difference-between-key-value-and-key-value-assignments)
> [之间有什么区别吗？`:key => "value"``key: "value"`](https://stackoverflow.com/questions/8675206/is-there-any-difference-between-key-value-and-key-value-assignments)
> [键入红宝石新哈希](https://stackoverflow.com/questions/10293936/key-in-ruby-new-hash)

我正在阅读一些 Rails 代码，我看到可以调用一个方法

```
foo(:var1 => 'hello', :var2 => 'world') 
```

或者

```
foo(var1: 'hello', var2: 'world') 
```

两者的工作方式似乎完全相同。有什么区别吗？哪个是更好的做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:38:31.810

他们的意思是一样的。后者是受 JavaScript 启发的新 Ruby 1.9 语法。如果您需要与 Ruby 1.8 保持兼容，请使用前者。否则就是口味问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:29:10.947

在方法调用中，两者的工作方式完全相同，但是当您进行哈希时，它们会有所不同

```
# in a method call
foo( :param => 'p' )
# mean the same thing
foo( param: 'p' )

# but in a Hash construction, they will have diferences

# here the key will always be a Symbol
hash = { symb: value }
# but here the key can be anything
hash = { 1 => "1" }
hash = { "1" => 1 } 
```

# bash - 使用 grep bash 打印出现文本的行

> ID：11587246
> 
> 赞同：1
> 
> 时间：2012-07-20T21:37:00.823
> 
> 标签：bash, grep

我想为某些文本 grep 一个文件，并只输出它出现的行号。例子：

文件.文本：

```
firstsentance
secondsentance
thirdsentance 
```

如果我 grep for secondsentance 我应该收到 2 的输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T21:44:12.930

这将做你想要的：

```
sed -n '/secondsentence/=' File.text 
```

珀尔：

```
perl -lne 'print $. if /secondsentence/' File.text 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T21:42:10.180

我不相信它`grep`本身有这样的功能，但你可以写：

```
grep -n secondsentance File.text | sed 's/:.*//' 
```

从头开始剥去一切`:`。

请注意，这与`grep`单独的退出代码不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T21:48:34.830

尝试学习 AWK：

```
awk '/secondsentance/ { print NR }' file.text 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T21:47:29.433

和一个 awk 解决方案。

```
awk '/secondsentance/ { print NR }' file 
```

# ios - iOS - 如何从控制器重定向到新屏幕？

> ID：11587250
> 
> 赞同：1
> 
> 时间：2012-07-20T21:37:15.690
> 
> 标签：ios, ios5

我一直在使用 storbyboard 将用户流从一个屏幕映射到另一个屏幕，但现在我需要以编程方式将用户从一个控制器重定向到另一个控制器。

我试图查找如何做到这一点，但我没有找到太多，部分原因是我不确定如何正确表达这个:)

我知道在 Android 中它就像创建一个新的 Intent 对象并告诉它要转到哪个其他屏幕一样简单..但是我如何在 iOS 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:46:45.907

查看 UIStoryboard 类。

尝试使用主 Storyboard 中的 - (id)instantiateViewControllerWithIdentifier:(NSString *)identifier 创建新控制器。

然后，您可以像往常一样使用新的视图控制器。

[编辑]

```
LoginController *loginController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"LoginController"];

[self presentModalViewController:loginController animated:YES]; 
```

您需要为您的 LoginController 提供“LoginController”的标识符。

“MainStoryboard”是主故事板的默认名称。

[编辑] 主故事板的名称在您的 plist 文件中列为“主故事板文件基本名称”（UIMainStoryboardFile）。

要设置 LoginController 的标识符：如果您正在查看 xcode 中的情节提要，请选择“登录控制器”视图控制器（显示在登录控制器场景下）显示在实用程序窗格（右侧窗格）和下方找到的属性检查器在 View Controller 部分，您将看到 Identifier 字段。将此设置为“LoginController” - 对于上面的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:40:22.773

你可以使用这样的东西，我不久前遇到了同样的问题，这就是我使用的。

```
[self presentModalViewController:yourviewController animated:YES] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:43:41.527

如果目标控制器在您的故事板中，请在两个控制器之间创建一个命名的 segue。当您需要从一个移动到另一个时，请使用`performSegueWithIdentifier:sender:`. （有关详细信息，请参阅有关该方法的 UIViewController 文档。）

# bootloader - BIOS 加载更多扇区...使用虚拟磁盘映像作为 qemu 的硬盘不工作

> ID：11587253
> 
> 赞同：1
> 
> 时间：2012-07-20T21:37:26.570
> 
> 标签：bootloader, bios

我一直在编写一个 2 阶段引导加载程序，第一阶段只是加载第二阶段并设置 gdt 并打开保护模式和所有 . 我浏览了几本手册和以前的问题，但我仍然面临这个问题。使用 BIOS int 0x13 调用加载扇区会全部为零，我无法找出原因。这是我阅读该部门的代码。我什至试图读取第一个扇区，但这也给了内存中的所有零。

```
 read:
    xorw    %ax,%ax
    movw    %ax,%es
    movw    $0x1000,%bx
    movb    $0x2, %ah   #command to read the sector
    movb    $0x80, %dl  #read from the hard disk
    movb    $0x1, %al  # read one sector
    movb    $0x1, %ch  #track no
    movb    $0x1, %cl  # read the first sector
    movb    $0x1 , %dh  # head number
    int     $0x13    
    jc      read
    movw    $0x11fe, %di
    movw    (%di),%ax
    cmpw     $0xaa55,%ax  # testing the signature
    jne     error
    ljmp    $0x0,$0x1000 
```

因此，如您所见，我正在尝试再次读取第一个扇区（只是为了测试），但内存包含所有零我正在使用我使用以下内容创建的虚拟磁盘映像：

```
 dd if=/dev/zero of=obj/kern/kernel.img~ bs=512 count=20000 2>/dev/null
dd if=obj/boot/boot of=obj/kern/kernel.img~ conv=notrunc 2>/dev/null
dd if=obj/boot1/boot of=obj/kern/kernel.img~ seek=1 conv=notrunc 2>/dev/null
dd if=obj/kern/kernel of=obj/kern/kernel.img~ seek=3 conv=notrunc 2>/dev/null
mv obj/kern/kernel.img~ obj/kern/kernel.img 
```

请帮我提出你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:54:49.310

The simple answer is that the first sector is sector 1, track 0, head 0\.

The happy answer is that although writing a bootloader is the easy part, getting it to work is most satisfying.

# performance - Scala 缓慢构建：避免的开发方法

> ID：11587255
> 
> 赞同：14
> 
> 时间：2012-07-20T21:37:30.523
> 
> 标签：performance, scala, compile-time

首先，通过 SBT 的增量构建非常棒，通常在 < 1 秒的范围内。但是，有时您必须进行完整的清理/编译，或者在增量构建的情况下，您*对一个文件进行更改*，然后触发数十个其他文件的编译。

这是 Scala 开发变得不那么有趣的时候，因为由此导致的工作流程放缓会鼓励上下文切换（检查电子邮件、最新的 Stackoverflow 线程等），这会巧妙地降低工作效率

那么，为了改进完整的清理/编译构建以及（理想情况下）更改一个文件而不重新编译一半应用程序增量构建，应避免哪些开发方法？

我能想到的例子：
1）拥有一千多行的全能scala文件，还是拆分几个文件更好？
2）我可以有我的蛋糕（模式）还是会增加构建时间？
3) 我可以使用 pimp'd x,y,z 库模式，还是更好地找到另一种方法？
4) 包对象（带有隐式）是构建时间杀手吗？
5）嵌套对象和特征？
6）隐式方法/参数或停止聪明而明确？

具体来说，我正在考虑放弃我提出的蛋糕模式 DAO，并将其整合到 ScalaQuery 案例类 + 伴随对象 + 最小数据库提供程序特征中。仅此一项就会减少 20 个 scala 文件。

该应用程序足够小（120 个 scala + 10 个 java 文件），现在可以轻松重构。显然，随着 Scala 应用程序的增长，构建时间也会增长，仅基于 LOC。我只是想看看在哪里修剪脂肪以及在哪里不打扰（即保持原样），以便当前和未来的应用程序受益于 scala 提供的表现力，而不会不必要地增加构建时间。

感谢您提供一些关于 scala 开发相对于构建时间的好、坏和丑的体验示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:59:35.820

我注意到类型成员可以在您意想不到的地方强制重建。例如：

*foo.scala*：

```
object foo {
    class A {
        type F = Float
    }
    def z: Int = 8
} 
```

*bar.scala*：

```
object bar {
    def run { println(foo.z) }
} 
```

更改 的值`z`不会强制`bar`重新编译。改变 dos 的类型`F`，即使`bar`从不指代`F`甚至指代`A`. 为什么，我不知道（Scala 2.9.1）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:54:44.327

看看[增量重新编译在 SBT](https://github.com/harrah/xsbt/wiki/Understanding-incremental-recompilation)中是如何工作的。

大致是这样的：

1.  查找所有公开可见 API 已更改的类
2.  使其所有家属、其家属的家属等无效。

对于 SBT，“从属”既是类的用户，又是*在同一文件中定义*的类。

Owen 的 foo.scala 示例甚至可能是这样的，您会看到问题：

```
object foo {
  def z: Int = 8
}

object foo2 {
  class A { ... }
} 
```

良好做法：

*   单独类的单独文件
*   细粒度的接口
*   在伴生对象中使用与其伴生类相同的抽象级别；如果伴随对象通过抽象层达到，则将其拉入单独的类和文件中。

# android - 与 PC 的 Android 套接字连接适用于模拟器，但不适用于设备

> ID：11587260
> 
> 赞同：0
> 
> 时间：2012-07-20T21:37:57.970
> 
> 标签：android, sockets

我有一个小示例正在运行，它通过套接字从 Android 设备向 PC 发送消息。[使用此](http://www.adp-gmbh.ch/win/misc/sockets.html)链接中的示例，服务器使用 C++ ，客户端是一个简单的 Android 应用程序。

我遇到的问题是，当我在我的 PC（Eclipse 模拟器上的 android 应用程序）上运行两者时，它可以正常工作，但是当我使用 android 设备时，由于连接超时，我不断收到 java.net.ConnectException。

起初我认为这可能是防火墙问题，但我创建了一个规则，允许通过我正在使用的端口进行通信，并且事情一直以相同的方式工作。我试图关闭防火墙以防万一，但什么也没发生。

我已经从Android ping PC，反之亦然，一切都很好。

关于我可能缺少什么的任何想法？当然，这两个设备都在同一个网络上！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:56:02.670

首先，我认为通过套接字在 Java 和 C++ 数据之间混合不是一个好主意（我不确定 int、float 和那种类型在双方是否相等）。

不过，您是否在 Android XML Manifest 中授予了 Internet 权限？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

您能否向我们提供有关服务器和 Android 代码的更多详细信息？

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:27:29.743

似乎有某种防火墙阻止了 Windows 以外的传入请求。我尝试了相反的方法，从 Windows 端开始通信，一切都像魅力一样！

# javascript - Web开发（Spring MVC），浏览器更新慢

> ID：11587262
> 
> 赞同：1
> 
> 时间：2012-07-20T21:38:01.163
> 
> 标签：javascript, spring, tomcat, webserver, web-deployment

我正在开发一个 Spring MVC 应用程序。春季版本 3.1。我使用的 IDE 是 Eclipse (SpringSource)，浏览器是 Chrome。我认为它是一个tomcat服务器。

当我保存它们加载到服务器的 Java 文件时，加载需要一些时间，但没关系，我清楚地看到它何时完成。

但是让我非常恼火的是，我看不到 JavaScript、JSP 和 CSS 文件何时更新。有时它更新得很快，有时感觉就像年龄一样。

我可以以某种方式查看这些文件何时更新，或者我可以强制浏览器更新它们吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:59:41.870

刚刚修好这个！

在 Eclipse 中，我在 Servers 窗口中双击了我的服务器。

然后在弹出的概览窗口中，我选择了“启用基于 JMX 的重新加载”复选框。

它定义了应该复制到已部署应用程序而不触发重新加载的文件的模式。所以我只是确保列表中有所有需要的文件。（*.css、*.js、*.jsp）

现在它更新得很快。

# jsp - 如何为具有不同参数的同一个 Java Web Start 应用程序创建不同的快捷方式？

> ID：11587263
> 
> 赞同：1
> 
> 时间：2012-07-20T21:38:01.243
> 
> 标签：jsp, parameters, shortcut, jnlp, java-web-start

我创建了一个 Java Web Start 应用程序，它在从 Web 应用程序启动时运行良好。我制作了一个 JSP 来从某些参数构建我的 JNLP 文件。参数“college”将定义用户正在处理的位置（只是为了方便在数据库中缩小范围）。快捷方式创建得很好，无处不在。但是当用户选择不同的“学院”时，快捷方式会被替换（如果第一个快捷方式是“Palo Alto”​​，它会更改为“St. Philip's”）。

我想让用户能够安装不同的“版本”（根据“college”参数）。我希望用户对每个“学院”都有一个快捷方式。我的问题是，是什么让应用程序与众不同？jar 名称，主文件？我正在考虑对 jnlp 中的参数进行参数化，以使其每次下载都不同。

我会尝试我的想法并发布结果，以防万一有人有同样的需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:08:23.083

好的，我首先尝试为每个 jar 标签添加参数，但 Web Start 比这更聪明。使用 questin 标记之前的所有内容，其余内容将被忽略。

这不起作用，它只是替换（当你想替换时很好 ;-D ）：

```
<jnlp codebase="http://example.com/web-app" href="http://example.com/web-app/Launch.jnlp?college=${params.college}" spec="1.0+"> 
```

我通过更改每个版本的 jnlp 标记的 href 属性来解决它，这可以创建一个新的快捷方式：

```
<jnlp codebase="http://example.com/web-app" href="http://example.com/web-app/Launch${params.college}.jnlp" spec="1.0+"> 
```

玩得开心/做个好人。

# mysql - 使用 count 和 if 的左连接和聚合函数

> ID：11587267
> 
> 赞同：0
> 
> 时间：2012-07-20T21:38:32.740
> 
> 标签：mysql, aggregate-functions

我编写了一个查询，它将三个表连接到一个客户表，计算各个字段的值，并返回按销售代表细分的销售和收入概览：

```
SELECT 
    u.id AS `userId`, 
    u.`username`, 
    (SELECT COUNT(*) FROM `SaleSet` s WHERE s.`pitchedBy_id` = `userId` AND s.setCompleteAt BETWEEN '2012-07-02 00:00:00' AND '2012-07-02 23:59:59') AS `transfers`,
    COUNT(c.id) AS `closes`, 
    COUNT(IF(c.saleType_id = 1, 1, NULL)) AS `regS_sales`,
    COUNT(IF(c.saleType_id = 2, 1, NULL)) AS `pd_sales`,
    COUNT(IF(c.saleType_id = 4, 1, NULL)) AS `attempted_sales`,
    COUNT(IF(c.CustomerStatus_id IN (5,6,9,16), 1,NULL)) AS `complete`,
    COUNT(IF(c.CustomerStatus_id IN (8,18), 1,NULL)) AS `canceled`,
    COUNT(IF(c.CustomerStatus_id IN (1,12,13), 1,NULL)) AS `pending`,
    COUNT(IF(c.CustomerStatus_id = 20, 1,NULL)) AS `post_dated`,
    SUM(IF(p.saleType_id = 2, p.`authOnlyAmount`,0)) AS `pdPotRev`,
    #SUM(IF(c.saleType_id = 2 AND t.`captured` = 0, p.`authOnlyAmount`,0)) AS `pdCapRev`,
    SUM(t.amount) AS `fwRevAuthed`,
    SUM(IF(p.saleType_id = 2 AND t.`captured` = 0, t.amount,0)) AS `fwCaptured`
FROM customer c
LEFT JOIN `User` u ON u.id = c.`salesRep_id`
LEFT JOIN `Transaction` t 
    ON t.`customer_id` = c.`id`
    AND t.transactionType = 'Auth'
LEFT JOIN `Purchase` p ON p.`customer_id` = c.`id`
#WHERE c.`salesRep_id` = 10
WHERE c.`activationDate` BETWEEN '2012-07-02 00:00:00' AND '2012-07-02 23:59:59'
GROUP BY u.`id` 
```

为什么此列返回 0 而不是 t.amount: 的总和`SUM(IF(p.saleType_id = 2 AND t.captured = 0, t.amount,0)) AS fwCaptured`？如您所见，我在上面的两行中做了完全相同的事情，并且效果很好。

以下是结果示例：

```
userId  username          transfers  closes  regS_sales  pd_sales  attempted_sales  complete  canceled  pending  post_dated  pdPotRev  fwRevAuthed  fwCaptured  
10  doughaase                17       4           3         1                0         4         0        0           0     50.00       298.00          0.00
65  davidgarber              13       5           5         0                0         4         0        0           0      0.00       595.00          0.00
70  morgantaylor              5       2           2         0                0         0         2        0           0      0.00       198.00          0.00
76  shayans                   8       1           0         1                0         1         0        0           0     99.00        99.00          0.00
96  regananson                5       3           3         0                0         3         0        0           0      0.00       248.00          0.00 
```

pdPotRev 以完全相同的方式使用完全相同的功能并且运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:45:03.267

对于每个捕获的类型 2 的销售，可能 t.amount 为 0，或者甚至可能是正值和负值相等。在上面的字段中，您正在对不同的字段求和，因此它返回不同的值是有意义的。您甚至可以从完全不同的表中进行选择。

如果有疑问，请删除总和和分组，然后选择值。您应该能够立即发现问题。

[编辑] 甚至不正确。pdPotRev 根本不使用 p.captured 字段。包含相同条件的行是`pdCapRev`，已被注释掉。所以很可能`IF(p.saleType_id = 2 AND t.captured`永远不会评估为真。

# r - R中的逻辑回归

> ID：11587270
> 
> 赞同：1
> 
> 时间：2012-07-20T21:38:50.040
> 
> 标签：r, regression

我有两个矩阵一个 X，所有特征值都有 300000 行和 14 列，其中列代表特征 ID。对于每个我都有另一个变量，它定义标签 Y，其尺寸为 300000 x 1，0 或 1。

如何从这个矩阵计算逻辑回归？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T21:44:36.297

这非常容易。

```
m <- glm(Y ~ X, family = 'binomial')
summary(m) 
```

将来只需尝试首先输入看起来很明显的内容。如果你不怕犯错，你会学得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T13:56:19.470

glmnet 也可以解决您的问题

```
glm1=cv.glmnet(x,y,family="binomial",alpha=0)

prglm=predict(glm1,newx,type="response") 
```

# java - 无论 IP 地址是什么，isReachable 始终返回 true

> ID：11587271
> 
> 赞同：3
> 
> 时间：2012-07-20T21:38:55.710
> 
> 标签：java, ping

所以我一直在使用 isReachable 在我的 java 代码中“ping”一个地址。这段代码似乎每个人都在使用：

```
 try
    {
    InetAddress address = InetAddress.getByName("172.16.2.0");
    // Try to reach the specified address within the timeout
    // periode. If during this periode the address cannot be
    // reach then the method returns false.
    boolean reachable = address.isReachable(10000);
    System.out.println("Is host reachable? " + reachable);
    } catch (Exception e)
    {
    e.printStackTrace();
    } 
```

我的问题是，无论我为我的 IP 地址使用什么，它总是返回 true。即使我将其更改为空字符串。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:49:04.737

一种通过 java.net.InetAddress.isReachable() 方法检查某个地址是否可达的方法。这些方法的实现是原生的，并尝试尽最大努力“ping”由 InetAddress 表示的地址。

令人惊讶的是，Windows 和 Linux/Unix 的`java.net.InetAddress.isReachable()`.

尽管看起来很奇怪，Windows 并不正式支持 ICMP“ping”系统调用。因此，Java SE 5 实现尝试在端口 7（回显服务）上打开一个 TCP 套接字，并希望得到某种回复。

相反，Linux/Unix 支持 ICMP“ping”系统调用。所以 java.net.InetAddress.isReachable() 的实现首先尝试执行“ping”系统调用；如果失败，它会尝试在端口 7 上打开 TCP 套接字，就像在 Windows 中一样。

事实证明，在 Linux/Unix 中，ping 系统调用需要 root 权限，所以大多数时候 java.net.InetAddress.isReachable() 会失败，因为许多 Java 程序不是以 root 身份运行的。

正确的方法是 ICMP 协议。这是**ping**在内部使用的。建议查看[**THIS**](http://web.archive.org/web/20130820071442/http://0x13.de/index.php/code-snippets/74-icmp-ping-in-java.html)以收集知识并继续。

**来自：** [Simone Bordet 的博客](http://bordet.blogspot.com.br/2006/07/icmp-and-inetaddressisreachable.html)

# perl - Perl 单行来增加一个值

> ID：11587276
> 
> 赞同：5
> 
> 时间：2012-07-20T21:39:44.550
> 
> 标签：perl

我想增加文件中引号中的每个数字，每行一个：

```
perl -pe 's/\"(\d+)\"/ 1 + $1 /ge' file 
```

这会去除引号，但是如何将引号重新添加到输出中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T21:42:53.273

```
perl -pe 's/\"(\d+)\"/ q{"} . (1 + $1) . q{"} /ge' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T21:51:27.367

您可以使用环视断言 - [http://perldoc.perl.org/perlre.html#Extended-Patterns](http://perldoc.perl.org/perlre.html#Extended-Patterns)。

所以正则表达式变为：`s/(?<=")(\d+)(?=")/ $1 + 1 /ge`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T07:08:50.733

高尔夫冠军是：

```
perl -pe's/"(\d+)"/"@{[1+$1]}"/g' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T21:45:14.260

多种解决方案：

```
perl -lpe 's/"(\d+)"/$1+1/e;s/(.*)/"$1"/' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T21:45:19.967

```
perl -pe 's/(\d)/{"\"".(1+$1)."\""}/ge' file 
```

解释：`e`修饰符告诉 Perl 评估替换值（在大括号中）。并`1+$1`返回递增的数字。

# web-scraping - 使用 Web-Harvest 进行 Web 抓取

> ID：11587284
> 
> 赞同：0
> 
> 时间：2012-07-20T21:40:35.460
> 
> 标签：web-scraping, webharvest

我正在尝试使用 web-harvest 库编写一个网络爬虫，以从 realtor.com 获取参数。有没有很好的教程来说明如何做到这一点？我正在使用 Eclipse IDE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:59:50.953

Look at this: [http://masochismtango.com/2010/02/15/webharvest-web-scraping-from-java/](http://masochismtango.com/2010/02/15/webharvest-web-scraping-from-java/)

# java - 对接口进行编程 - 避免后来的演员表

> ID：11587290
> 
> 赞同：6
> 
> 时间：2012-07-20T21:41:49.297
> 
> 标签：java, interface

因此，据我了解，应该始终对接口进行编程，例如：

```
List<Integer> list = new LinkedList<Integer>(); 
```

所以，稍后在我的程序中，我有：

```
public List<Integer> getIntegers() {
    return list;
}

public void processIntegers() {
    // I need an arraylist here
    ArrayList<Integer> list = (ArrayList<Integer>) getIntegers(); // can I do this better, without a cast?
} 
```

我可以在这里遵循更好的模式或以某种方式做一些事情来避免演员表吗？在这种情况下，铸造看起来很丑陋。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T21:46:40.063

首先问自己一个问题：*为什么需要一个`ArrayList`*？此外，您的 API 的客户是否应该关心它？你有几个选择：

*   `getIntegers()`退货`ArrayList<Integer>`。_ 这不是犯罪

*   考虑不太强的接口要求，例如`AbstractList`作为共识

*   创建一个防御副本，以便您可以使用任何`List`：

    ```
    ArrayList<Integer> list = new ArrayList<Integer>(getIntegers()); 
    ```

    如果已经是. ，请考虑使用`instanceof`运算符以避免不必要的复制。`getIntegers()``ArrayList`

换句话说 - 没有办法根据您的要求和优雅的方式避免这种铸造。

# android - Android（phonegap）“错误（1，-2147483648）”

> ID：11587291
> 
> 赞同：3
> 
> 时间：2012-07-20T21:41:52.353
> 
> 标签：android

我正在开发一个 Android 应用程序（收音机、流媒体音乐），对于某些流，我在控制台中收到以下错误：

> 错误（1，-2147483648）

这是否意味着Android仅支持几种媒体格式而我对此无能为力？

我无法重新编码流，因为我使用外部资源。

源代码：

```
if (radio && typeof radio.stop != 'undefined') {
  radio.stop();
  radio.release();
}
radio = new Media(data.link);
radio.play(); 
```

有所有使用媒体类（phonegap）的源代码。

**日志猫：**

> 07-21 00:19:29.313: D/DroidGap(280): onMessage(onNativeReady,null)
> 07-21 00:19:29.313: D/DroidGap(280): onMessage(onPageFinished,file:///android_asset/www /index.html)
> 07-21 00:19:29.932: I/Database(280): sqlite 返回：错误代码 = 14，msg = 无法在源代码行 25467
> 07-21 00:19:30.183 打开文件：D/DroidGap （280）：onMessage（网络连接，3g）
> 07-21 00：19：31.331：D / DroidGap（280）：onMessage（微调器，停止）
> 07-21 00：19：36.343：D / Cordova（280）：onPageFinished（ file:///android_asset/www/index.html#radio)
> 07-21 00:19:36.343: D/CordovaWebView(280): >>> loadUrlNow()
> 07-21 00:19:36.343: D/DroidGap( 280）：onMessage（onNativeReady，空）
> 07-21 00:19:36.343: D/DroidGap(280): onMessage(onPageFinished,file:///android_asset/www/index.html#radio)
> 07-21 00:19:37.492: D/dalvikvm(280) : GC_FOR_MALLOC 在 67 毫秒内释放了 3015 个对象/521248 个字节
> 07-21 00:19:46.012: D/Cordova(280): onPageFinished(file:///android_asset/www/index.html)
> 07-21 00:19:46.012: D/CordovaWebView(280): >>> loadUrlNow()
> 07-21 00:19:46.012: D/DroidGap(280): onMessage(onNativeReady,null)
> 07-21 00:19:46.012: D/DroidGap(280) : onMessage(onPageFinished,file:///android_asset/www/index.html)
> 07-21 00:19:49.472: D/Cordova(280): onPageFinished(file:///android_asset/www/index.html#radio )
> 07-21 00:19:49.472: D/CordovaWebView(280): >>> loadUrlNow()
> 07-21 00:19:49.472: D/DroidGap(280): onMessage(onNativeReady,null)
> 07-21 00:19:49.472: D/DroidGap(280): onMessage(onPageFinished,file:///android_asset/www /index.html#radio)
> 07-21 00:20:11.273: D/dalvikvm(280): GC_FOR_MALLOC 在 76 毫秒内释放了 3595 个对象 / 570336 个字节
> 07-21 00:20:19.254: E/MediaPlayer(280): 错误 ( 1, -2147483648)
> 07-21 00:20:19.254: E/MediaPlayer(280): 错误 (1,-2147483648)

**流：** webcast.emg.fm:55655/ europaplus64.mp3, 92.53.112.250:8100/rr_aac?type=.flv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T19:09:03.240

请参阅文档：[http ://docs.phonegap.com/en/2.7.0/cordova_media_media.md.html#Media](http://docs.phonegap.com/en/2.7.0/cordova_media_media.md.html#Media)

我有同样的错误，但在更新我的代码后，就像在文档中一样，一切正常。

# java - 出现垂直滚动条时 JScrollPane 不够宽

> ID：11587292
> 
> 赞同：11
> 
> 时间：2012-07-20T21:41:52.930
> 
> 标签：java, swing, jscrollpane

我在同一个窗口中有两个 JScrollPanes。左边的那个足够大，可以显示包含面板的内容。右边的不够大，无法显示其内容，因此需要创建一个垂直滚动条。

![JScrollPane 问题](../Images/afac5f27fd5416b14a95d29a4b209b62.png)

但是如你所见，问题是当垂直滚动条出现时，滚动条出现在JScrollPane的*内部*。它覆盖了里面包含的内容，因此需要一个水平滚动条来显示所有内容。我想要那个固定的。

我意识到我可以一直打开垂直滚动条，但出于美学原因，我只希望它在必要时出现，而不需要出现水平滚动窗格。

编辑：我开始这个的代码非常简单：

```
JScrollPane groupPanelScroller = new JScrollPane(groupPanel);
this.add(groupPanelScroller, "align center"); 
```

我正在使用 MigLayout (MigLayout.com)，但无论我使用什么布局管理器，这个问题似乎都会出现。此外，如果我缩小窗口以使左侧面板不再大到足以显示所有内容，则会发生与右侧面板相同的行为。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T16:23:02.883

第一：[*永远不要*在组件级别调整大小提示](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi/7229519#7229519)。尤其是当您确实拥有强大的 LayoutManager（例如 MigLayout）时，它支持在管理器级别进行调整。

在代码中，调整任何首选项的大小：

```
// calculate some width to add to pref, f.i. to take the scrollbar width into account
final JScrollPane pane = new JScrollPane(comp);
int prefBarWidth = pane.getVerticalScrollBar().getPreferredSize().width;
// **do not**  
comp.setPreferredSize(new Dimension(comp.getPreferredSize().width + prefBarWidth, ...);
// **do**
String pref = "(pref+" + prefBarWidth + "px)"; 
content.add(pane, "width " + pref); 
```

也就是说：基本上，您在 ScrollPaneLayout 中遇到了一个（有争议的）错误。虽然看起来考虑了滚动条的宽度，但实际上并非在所有情况下都如此。来自 preferredLayoutSize 的相关片段

```
// filling the sizes used for calculating the pref
Dimension extentSize = null;
Dimension viewSize = null;
Component view = null;

if (viewport != null) {
    extentSize = viewport.getPreferredSize();
    view = viewport.getView();
    if (view != null) {
        viewSize = view.getPreferredSize();
    } else {
        viewSize = new Dimension(0, 0);
    }
}

....

// the part trying to take the scrollbar width into account

if ((vsb != null) && (vsbPolicy != VERTICAL_SCROLLBAR_NEVER)) {
    if (vsbPolicy == VERTICAL_SCROLLBAR_ALWAYS) {
        prefWidth += vsb.getPreferredSize().width;
    }
    else if ((viewSize != null) && (extentSize != null)) {
        boolean canScroll = true;
        if (view instanceof Scrollable) {
            canScroll = !((Scrollable)view).getScrollableTracksViewportHeight();
        }
        if (canScroll && 
            // following condition is the **culprit** 
            (viewSize.height > extentSize.height)) {
            prefWidth += vsb.getPreferredSize().width;
        }
    }
} 
```

这是罪魁祸首，因为

*   它将视图首选项与视口首选项进行比较
*   他们大部分时间都是一样的

结果就是您所看到的：滚动条与视图重叠（在切断一些宽度的意义上）。

一个hack是一个自定义的ScrollPaneLayout，如果视图的高度小于*实际*的视口高度，它会添加滚动条宽度，这是一个粗略的例子（注意：*不是*生产质量）

```
public static class MyScrollPaneLayout extends ScrollPaneLayout {

    @Override
    public Dimension preferredLayoutSize(Container parent) {
        Dimension dim =  super.preferredLayoutSize(parent);
        JScrollPane pane = (JScrollPane) parent;
        Component comp = pane.getViewport().getView();
        Dimension viewPref = comp.getPreferredSize();
        Dimension port = pane.getViewport().getExtentSize();
        // **Edit 2** changed condition to <= to prevent jumping
        if (port.height < viewPref.height) {
            dim.width += pane.getVerticalScrollBar().getPreferredSize().width;
        }
        return dim;
    }

} 
```

**编辑**

嗯...看到跳跃（在显示与不显示垂直滚动条之间，如评论中所述）：当我用另一个滚动窗格替换示例中的文本字段时，然后调整“接近”其首选项宽度的大小会出现问题。所以hack不够好，可能是询问视口范围的时间不正确（在布局过程的中间）。目前不知道如何做得更好。

**编辑 2**

试探性跟踪：当逐像素改变宽度时，感觉就像一次性错误。将条件从 更改`<`为`<=`似乎可以解决跳跃问题 - 以始终添加滚动条宽度为代价。所以总的来说，这导致第一步有更广泛的尾随插图;-) 同时相信 scollLlayout 的整个逻辑需要改进......

总结您的选择：

*   调整 (MigLayout) 组件约束中的首选项宽度。这是最简单的，缺点是一个额外的尾随空格，以防滚动条不显示
*   修复 scrollPaneLayout。需要一些努力和测试（参见核心 ScrollPaneLayout 的代码需要做什么），优点是一致的填充 w/out 滚动条
*   **不是**手动设置组件上的首选项宽度的选项

以下是可以使用的代码示例：

```
// adjust the pref width in the component constraint
MigLayout layout = new MigLayout("wrap 2", "[][]");
final JComponent comp = new JPanel(layout);
for (int i = 0; i < 10; i++) {
    comp.add(new JLabel("some item: "));
    comp.add(new JTextField(i + 5));
}

MigLayout outer = new MigLayout("wrap 2", 
        "[][grow, fill]");
JComponent content = new JPanel(outer);
final JScrollPane pane = new JScrollPane(comp);
int prefBarWidth = pane.getVerticalScrollBar().getPreferredSize().width;
String pref = "(pref+" + prefBarWidth + "px)";
content.add(pane, "width " + pref);
content.add(new JTextField("some dummy") );
Action action = new AbstractAction("add row") {

    @Override
    public void actionPerformed(ActionEvent e) {
        int count = (comp.getComponentCount() +1)/ 2;
        comp.add(new JLabel("some Item: "));
        comp.add(new JTextField(count + 5));
        pane.getParent().revalidate();
    }
};
frame.add(new JButton(action), BorderLayout.SOUTH);
frame.add(content);
frame.pack();
frame.setSize(frame.getWidth()*2, frame.getHeight());
frame.setVisible(true);

// use a custom ScrollPaneLayout
MigLayout layout = new MigLayout("wrap 2", "[][]");
final JComponent comp = new JPanel(layout);
for (int i = 0; i < 10; i++) {
    comp.add(new JLabel("some item: "));
    comp.add(new JTextField(i + 5));
}

MigLayout outer = new MigLayout("wrap 2", 
        "[][grow, fill]");
JComponent content = new JPanel(outer);
final JScrollPane pane = new JScrollPane(comp);
pane.setLayout(new MyScrollPaneLayout());
content.add(pane);
content.add(new JTextField("some dummy") );
Action action = new AbstractAction("add row") {

    @Override
    public void actionPerformed(ActionEvent e) {
        int count = (comp.getComponentCount() +1)/ 2;
        comp.add(new JLabel("some Item: "));
        comp.add(new JTextField(count + 5));
        pane.getParent().revalidate();
    }
};
frame.add(new JButton(action), BorderLayout.SOUTH);
frame.add(content);
frame.pack();
frame.setSize(frame.getWidth()*2, frame.getHeight());
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T02:09:20.163

我想到了。问题是 JScrollPane 符合内容的大小，并在滚动条变得可见时与其重叠。所以我决定让内容更宽，以便在滚动条变得可见时使其适应滚动条。这也可以通过将 insets 设置为 Scrollbar 的宽度来完成，这可能是更正统的方法。

```
int scrollBarWidth = new JScrollPane().getVerticalScrollBar().getPreferredSize();
groupPanel.setLayout(new MigLayout("insets 1 " + scrollBarWidth + " 1 " + scrollBarWidth*1.5); //Adjust multipliers and widths to suit
//...
//Add everything in
//...
JScrollPane groupPanelScroller = new JScrollPane(groupPanel);
groupPanelScroller.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
this.add(groupPanelScroller, "align center"); 
```

编辑：上面的答案可能是更好的答案，但这是我对好奇的原始答案，它实际上调整了面板的大小。

```
JScrollPane groupPanelScroller = new JScrollPane(groupPanel);
groupPanel.setPreferredSize(new Dimension(groupPanel.getPreferredSize().width + groupPanelScroller.getVerticalScrollBar().getVisibleAmount()*2, 
        groupPanel.getPreferredSize().height));
groupPanelScroller.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
this.add(groupPanelScroller, "align center"); 
```

那么这是做什么的，它使内容的大小相同，加上滚动条宽度的两倍。由于所有内容都居中，因此看起来都一样，然后滚动条会填充一侧的一些额外空间（如果出现）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:34:33.590

我也遇到了同样的问题，经过数小时的努力寻找原因后到达这里。我最终实现了自己的 ViewportLayout 并且也想分享该解决方案。

根本问题是， ScrollPaneLayout 不知道一维（在您的情况下是视图的高度）将被限制为最大值，因此它无法预先确定是否需要滚动条。因此它不能调整另一个灵活的尺寸（在你的情况下是宽度）。

自定义 ViewportLayout 可以考虑到这一点，向其父级询问允许的高度，从而允许 ScrollPaneLayout 相应地调整首选宽度：

```
public class ConstrainedViewPortLayout extends ViewportLayout {

    @Override
    public Dimension preferredLayoutSize(Container parent) {

        Dimension preferredViewSize = super.preferredLayoutSize(parent);

        Container viewportContainer = parent.getParent();
        if (viewportContainer != null) {
            Dimension parentSize = viewportContainer.getSize();
            preferredViewSize.height = parentSize.height;
        }

        return preferredViewSize;
    }
} 
```

ViewportLayout 设置如下：

```
scrollPane.getViewport().setLayout(new ConstrainedViewPortLayout()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-19T17:18:30.380

这个错误现在已经有好几年了，但仍未修复，所以我将添加我的贡献。

您还可以通过在 JScrollPane 的视图组件上实现*javax.swing.Scrollable*来解决该错误。*ScrollPaneLayout*检查此接口的方法以确定是否首先显示水平滚动条，然后再返回其错误计算。

您可以实现 Scrollable 接口，以便将视图组件与实现 Scrollable 之前完全相同，*除了*确定是否显示水平滚动条的方法。

一个具体的例子来证明这一点，我没有单独测试过，而是从我们的代码库中提取的。改变：

```
JPanel panel = new JPanel();
JScrollPane pane = new JScrollPane(panel); 
```

到

```
class ScrollableJPanel extends JPanel implements Scrollable {
    @Override public Dimension getPreferredScrollableViewportSize() {
        return getPreferredSize();
    }

    @Override public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
        JScrollPane scrollPane = (JScrollPane)getParent();
        return orientation == SwingConstants.VERTICAL ? scrollPane.getVerticalScrollBar().getUnitIncrement() : scrollPane.getHorizontalScrollBar().getUnitIncrement();
    }

    @Override public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
        JScrollPane scrollPane = (JScrollPane)getParent();
        return orientation == SwingConstants.VERTICAL ? scrollPane.getVerticalScrollBar().getBlockIncrement() : scrollPane.getHorizontalScrollBar().getBlockIncrement();
    }

    @Override public boolean getScrollableTracksViewportHeight() {
        return false;
    }

    @Override public boolean getScrollableTracksViewportWidth() {
        Dimension sz = getSize();
        Dimension vsz = getViewportSize();
        return sz.width - 1 <= vsz.width; // This is the bodge
    }
}

JPanel panel = new ScrollableJPanel();
JScrollPane pane = new JScrollPane(); 
```

在针对修改为打印大量调试输出的 Java 1.8 rt.jar 测试我们的应用程序时，我们发现该值仅超出了一个像素 - 所以这就是我们在上面的 bodge 中使用的常量。

顺便说一句，这已提交给 Oracle [https://bugs.openjdk.java.net/browse/JDK-8042020](https://bugs.openjdk.java.net/browse/JDK-8042020)，但它被标记为“不会修复”很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T22:00:49.640

*   这张图片在谈论`GridLayout`，两个部分的尺寸相同

*   使用正确`LayoutManager`的接受不同的 PreferredSize，`BoxLayout`或`GridBagLayout`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-23T22:17:27.243

好的，我遇到了完全相同的问题：

*   将（子）面板动态添加到（主）面板中，该面板被放入 jscrollpane（我想创建面板的垂直列表）
*   jscrollpane 的垂直滚动条与我的内容（即我的子面板）重叠。

我试图遵循在互联网（和 stackoverflow）上找到的许多解决方法，但没有真正的解决方案！

这是我的理解，以及**我的工作解决方案**：

*   scrollpanelayout（jscrollpane 使用的布局管理器）中似乎存在一个错误，它无法正确计算其中的组件大小。

*   如果你放mainpanel.setPreferedSize(new Dimension(1, 1))，就没有重叠的bug了，但是垂直滚动条（如果放为VERTICAL_SCROLLBAR_​​ALWAYS的事件）不会滚动！这是因为滚动窗格认为您的内容是 1 像素高度。

*   因此，只需遍历您的子面板并计算适当的高度：

> ```
> //into your constructor or somewhere else
> JPanel mainpanel = new JPanel();
> mainpanel.setLayout(new BoxLayout(mainpanel, BoxLayout.Y_AXIS));
> JScrollPane scrollPane = new JScrollPane(mainpanel, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
> 
> //into another function to create dynamic content
> int height = 0;
> for (int i = 0; i < nb_subpanel_to_create; ++i) {
>     JPanel subpanel = create_your_sub_panel();
>     height += subpanel.getPreferedSize().height;
>     mainpanel.add(subpanel);
> }
> mainpanel.setPreferedSize(new Dimension(1, height); 
> ```

**奖金：**

如果您希望“列表”中的内容堆栈到顶部：

> ```
> List<JComponent> cmps = new LinkedList<JComponent>();
> int height = 0;
> for (int i = 0; i < nb_subpanel_to_create; ++i) {
>     JPanel subpanel = create_your_sub_panel();
>     height += subpanel.getPreferedSize().height;
>     cmps.add(subpanel);
> }
> mainpanel.add(stackNorth(subpanel));
> mainpanel.setPreferedSize(new Dimension(1, height); 
> ```

和 stackNorth 函数：

> ```
> public static JPanel stackNorth(List<JComponent> components) {
>      JPanel last = new JPanel(new BorderLayout());
>      JPanel first = last;
>      for (JComponent jComponent : components) {
>           last.add(jComponent, BorderLayout.NORTH);
>           JPanel tmp = new JPanel(new BorderLayout());
>           last.add(tmp, BorderLayout.CENTER);
>           last = tmp;
>      }
>      return first;
> } 
> ```

# gcc - 无法在亚马逊 ec2 上安装 PIL

> ID：11587294
> 
> 赞同：1
> 
> 时间：2012-07-20T21:41:54.213
> 
> 标签：gcc, amazon-ec2, python-imaging-library

我正在尝试在我的亚马逊实例上“pip install PIL”，但我不断收到此错误，有什么建议吗？

下载/解压 PIL 运行包 PIL 的 setup.py egg_info

警告：'' 不是有效的包名；请在 setup.py 中仅使用.-分隔的包名安装收集的包：PIL

为 PIL 运行 setup.py install

```
WARNING: '' not a valid package name; please use only.-separated package names in setup.py
building '_imaging' extension
gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DHAVE_LIBZ -IlibImaging -I/home/ec2-user/food-chute/foodchute/venv/include -I/usr/local/include -I/usr/include -I/usr/include/python2.6 -c _imaging.c -o build/temp.linux-x86_64-2.6/_imaging.o
_imaging.c:75:20: error: Python.h: No such file or directory
In file included from libImaging/Imaging.h:14,
                 from _imaging.c:77:
libImaging/ImPlatform.h:14:2: error: #error Sorry, this library requires support for ANSI prototypes.
libImaging/ImPlatform.h:17:2: error: #error Sorry, this library requires ANSI header files.
libImaging/ImPlatform.h:55:2: error: #error Cannot find required 32-bit integer type
In file included from _imaging.c:77:
libImaging/Imaging.h:90: error: expected specifier-qualifier-list before ‘INT32’
libImaging/Imaging.h:264: error: expected specifier-qualifier-list before ‘INT32’
libImaging/Imaging.h:395: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘ImagingCRC32’
_imaging.c:124: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
_imaging.c:129: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘PyTypeObject’
_imaging.c:143: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
_imaging.c:151: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘PyTypeObject’
_imaging.c:154: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
_imaging.c:160: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘PyTypeObject’
_imaging.c:165: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
_imaging.c:170: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘PyTypeObject’
_imaging.c:172: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_imaging.c: In function ‘_dealloc’:
_imaging.c:204: error: ‘ImagingObject’ has no member named ‘access’ 
```

错误：命令“gcc”失败，退出状态为 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:40:10.440

发生这种情况的原因是因为 ec2 默认具有 gcc 版本 4.4.6，它无法编译 Python 映像库。但是，如果您访问 ec2 网站，则可以通过执行以下操作来解决此问题

`While GCC 4.4.6 remains the default, we have included GCC 4.6.2, specifically for use on EC2 instances that support AVX. Run yum install gcc46 in order to get the packages. GCC 4.6 enables the Amazon Linux AMI to take advantage of the AVX support available on cc2.8xlarge instance types.`

资料来源：[http ://aws.amazon.com/amazon-linux-ami/2012.03-release-notes/](http://aws.amazon.com/amazon-linux-ami/2012.03-release-notes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T18:31:23.073

对我来说，这个问题的解决方案实际上只是安装**python-devel**。

# c# - C# 线程问题

> ID：11587296
> 
> 赞同：0
> 
> 时间：2012-07-20T21:42:05.570
> 
> 标签：c#, multithreading, picturebox

我想做一件简单的事。

我有一个辅助线程正在监听 USB 阅读器，当阅读器“读取”某些内容时，该线程会触发一个事件。该事件启动了一个计时器，但计时器不起作用，我确定这是因为线程。

此外，计时器必须更改表单中的一些图像，因此必须在主线程中完成。

我希望我很清楚。

```
private void listenReader()
    {
        while (whileState)
        {

                if (readsSomething)
                {
                    evt.OnSomeEvent();
                    break;
                }

        }
    }

    private void eventStartsThisMethot(){
        //do a lot of things and start the timer
        }

    private void counter(){
        pictureBox.Image = Resources._5;
    //the timer ticks this methot
    } 
```

因此，出于显而易见的原因，listen reader 需要在单独的线程上，但第二种方法必须从主线程完成，所以我使用一个事件，但如果您有其他想法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:57:18.347

Since you added the [picturebox] tag, we can assume this is Windows Forms (Winforms). The event handler for your reader thread will execute on the reader thread and you need to execute code (in response to the event) on the UI thread.

You can use your Form's `BeginInvoke` method to execute arbitrary code on the UI thread

```
private void ProcessMessageOnUIThread(YourMessageType msg)
{
    // Process here
}

private void ReaderThreadEventHandler(YourMessageType msg)
{
    // Invoke the UI thread to process the message
    BeginInvoke(new Action(ProcessMessageOnUIThread), msg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:47:25.277

counter 方法可以检查当前线程是否可以更新图片框，如果没有，则可以将执行传递给可以这样的线程：

```
private void Counter()
{
    if (pictureBox.InvokeRequired)
    {
        Action action = Counter;
        pictureBox.Invoke(action);
        return;
    }

    pictureBox.Image = Resources._5;
} 
```

我还建议您为方法名称使用 Pascal 大小写 - 这是非常标准的。[大写约定](http://msdn.microsoft.com/en-us/library/ms229043.aspx)

# javascript - 在不同 getJSON 调用的回调中，回调未针对 getJSON 调用触发

> ID：11587297
> 
> 赞同：0
> 
> 时间：2012-07-20T21:42:07.080
> 
> 标签：javascript, jquery, ajax, rest

我试图在单独的 $.getJSON 调用的回调中调用 $.getJSON，但由于某种原因，第二个 getJSON 调用实际上并没有触发，或者其他错误。当我单步执行它时，第二个 getJSON 被击中，但它的回调没有触发。这是我的代码：

```
 var success = '';
  $.getJSON('http://myRestAPI&callback=?', null, function (data) {
    success = data;    
    if(success){
       $.getJSON('http://myRestAPI&callback=?', null, function (data2) {
          success = data2;    
          if(success){
            alert('success');
          }
          else {
            alert('fail');
          }
        });
    }
    else {

    }
  }); 
```

这种事情是不允许的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:07:44.953

如果您的 ajax 调用工作正常，这应该可以工作。我在这个 JSFiddle [http://jsfiddle.net/V3mJp/上为你创建了一个例子](http://jsfiddle.net/V3mJp/)

就像 jfriend00 说的，为 Ajax 调用设置错误处理可能会给你更多的洞察力。

抱歉，这是作为答案发布的，我还不能发表评论。

# asp.net - 使用 LogonUser 后出现 UnauthorizedAccessException

> ID：11587305
> 
> 赞同：7
> 
> 时间：2012-07-20T21:42:26.613
> 
> 标签：asp.net, .net, asp.net-mvc, windows, authorization

我正在重写`Application_AuthenticateRequest`以将 Windows 身份验证用户替换为我通过调用以编程方式检索的另一个用户`LogonUser`。当我**将生成的 WindowsPrinciple 分配给 Context.User 时**，我得到以下异常。我的开发机器上没有这个异常（一切正常），只有在我的 QA 机器上。两台机器都是 Windows Server 2008 R2。QA 机器上有些不同，但我不知道它是什么。

这是我要完成的工作的[完整描述。](https://stackoverflow.com/q/11550406/265877)

```
 [UnauthorizedAccessException: Attempted to perform an unauthorized operation.]
   System.Security.Principal.WindowsIdentity.get_AuthenticationType() +317
   System.Web.Hosting.IIS7WorkerRequest.SetPrincipal(IPrincipal user, IntPtr pManagedPrincipal) +106
   System.Web.HttpContext.SetPrincipalNoDemand(IPrincipal principal, Boolean needToSetNativePrincipal) +9022044
   System.Web.HttpContext.SetPrincipalNoDemand(IPrincipal principal) +6
   System.Web.HttpContext.set_User(IPrincipal value) +36
   MyProj.MvcApplication.OverrideLoginUser() in C:\Data\Project\MyProj\Global.asax.cs:317
   MyProj.MvcApplication.Application_AuthenticateRequest(Object sender, EventArgs e) in C:\Data\Project\MyProj\Global.asax.cs:305
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

## 更新

我通过将应用程序池的身份从“ApplicationPoolIdentity”更改为“LocalSystem”解决了 QA 机器上的错误。在我的开发框中，设置是 ApplicationPoolIdentity，那么为什么权限不同？失败的功能需要什么权限？

## 更新 2

我已经用尽了所有的选择。即使使用本地管理员组中的用户帐户也无济于事。唯一可行的是将应用程序池作为 LocalSystem 运行。其他一些人也有这个问题（[记录在这里](http://forums.asp.net/p/1682115/5075894.aspx/1?Re%20UnauthorizedAccessException%20setting%20HttpContex%20User)）任何想法表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T01:19:08.667

行。我只花了 5 个小时，但我找到了解决方案。`Identity.AuthenticationType`在将主体对象分配给`Context.User`. 这次我的 Dev box 也出现了未经授权的错误。我想这意味着由于某种原因，该属性在`Context.User`分配期间没有在我的开发盒上执行，而是在我的 QA 盒上执行。无论如何，在谷歌搜索了一下之后，我发现[了这个文档](http://msdn.microsoft.com/en-us/library/w5whws2k.aspx)，它展示了如何在 WindowsIdentity 构建期间指定 AuthenticationType。在我这样做之后，我的问题就解决了！这是代码：

```
// Construct a WindowsIdentity object using the input account token 
// and the specified authentication type.
var foo = new WindowsIdentity(logonToken, "WindowsAuthentication"); 
```

就是这样！我的两台服务器上都没有更多的身份验证错误！

# android - FragmentActivity 中的 Fragment 中的 RestartLoader

> ID：11587310
> 
> 赞同：2
> 
> 时间：2012-07-20T21:42:41.497
> 
> 标签：android, android-fragments, android-viewpager, android-loadermanager

我在从 ListFragment 外部调用 restartLoader() 时遇到了一些问题。该序列按照点击“添加”按钮打开一个活动 -> 输入数据 -> 点击保存，这将启动一个 AsyncTask 以将数据存储在服务器上。数据传输成功后，返回上一个 Activity -> 让 Activity 调用 ListFragment 中运行 getLoaderManager().restartLoader() 的方法。

这毫无疑问总是会创建一个“java.lang.IllegalStateException: Fragment ListsFragment{42481238} not attach to Activity”-错误。如果我将restartLoader() 移到onResume，它的效果会稍微好一些，但是我还有其他按钮可以直接修改连接到ListFragments 的数据，无论如何它仍然会触发IllegalStateException。

来自 logcat 的摘录错误消息

```
E/AndroidRuntime(29594): java.lang.IllegalStateException: Fragment ListsFragment{42450b18} not attached to Activity
E/AndroidRuntime(29594):        at android.support.v4.app.Fragment.getLoaderManager(Fragment.java:768)
E/AndroidRuntime(29594):        at testpager.ListsFragment.resetList(ListsFragment.java:122) 
```

我错过了什么？如何在不触发此异常的情况下从 FragmentActivity 刷新 ListFragment？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:25:57.820

您不应该从...刷新您`ListFragment`的`FragmentActivity`...这违反了两个`Fragment`s 的基本设计准则（应该是为重用而设计的，并且不与任何特定活动相关联）和`LoaderManager`（应该属于一个单一的`Activity`或`Fragment`）。您应该改为`ListFragment`实现`LoaderManager.LoaderCallbacks<D>`接口。

在单独的说明中，`Loader`s 应该在其基础数据源更改时接收通知，通知它们执行新的异步加载并将结果返回给回调的`onLoadFinished`方法。如果您必须依靠`restartLoader`获取最新数据，那么您就做错了（即您`ContentObserver`没有被通知可能会发出`Loader`重新查询其数据的更改的通知）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:03:11.343

如果我理解正确，您的活动 A 创建了一个加载程序，该加载程序具有通过 Activity B 保存数据的菜单选项。一旦 Activity B 保存了数据，您希望重新启动 Activity A 中的加载程序......我说得对吗？

如果是这样，请尝试在活动 B 中执行此操作：

```
public interface onSavedDataListener { 
     void DoneSavingData(); //add parameters if needed
}
... //Whatever other code you have
 //This method should be called from your AsyncTask onFinished() method
 public void dataSaved() { //add parameters if needed
    onSavedDataListener activity = (onSavedDataListener) getActivity();
    activity.DoneSavingData(); //make sure you add the same parameters as you did above
} 
```

然后在活动 A 中，您将实现监听器

```
public class ActivityA extends ListFragment implements onSavedDataListener {

    ... //your other code here

    //Add the listener function
    public void DoneSavingData() { //make sure any parameters you have get added here
        getLoaderManager().restartLoader(id, args, loadercallback);
    }

    ... 
```

本质上，您在 Activity B 中创建了一个在 Activity A 中实现的侦听器对象。我希望我是对的，它会帮助您...

# cordova - PhoneGap 和 UrbanAirship 使用别名注册（400 错误请求错误）

> ID：11587311
> 
> 赞同：0
> 
> 时间：2012-07-20T21:42:43.677
> 
> 标签：cordova, urbanairship.com

我在 iOS 的 phonegap 1.9 上成功使用了 PhoneGap 插件（Urban Airship 不再正式支持）。

当我在没有别名的情况下注册到 UA 时，一切都很好，我可以收到测试推送通知。我尝试将 JSON 有效负载与注册（用于别名/标签等）一起发送，但我收到 400 Bad Request 错误。

发送至：`api/device_tokens/DEVICETOKEN`

使用 JSON：`{"alias":1}`

我也将请求标头设置为“ `application/json`”。

任何想法将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:38:05.347

已解决：别名值的格式不正确，因此在我的情况下，当我发送以下内容时它可以工作（注意数字 1 周围添加的引号）：

```
{"alias":"1"} 
```

所以总结一下......这是我添加到PhoneGap UA插件中的注册功能以发送别名（这对于标签等来说是相同的）：

```
var JSON_payload = {};
JSON_payload.alias = "1";   //add tags etc the same way

request.setRequestHeader("Content-Type", "application/json;");
request.send(JSON.stringify(JSON_payload)); 
```

# c# - FindByName 或 FindByValue set .selected on dropdownlist 返回错误 Object reference not set to an instance of an object

> ID：11587312
> 
> 赞同：2
> 
> 时间：2012-07-20T21:42:47.863
> 
> 标签：c#, asp.net, combobox, webforms, selected

我已经建立了一些绑定到 linq 数据源的下拉列表。当我在 gridview 上选择一行时，会执行一个查询，然后应根据查询中的数据设置下拉列表选择。执行此操作时 RegionListBox 工作正常，但是当我尝试使用 .FindByName 设置其他三个列表框的 .Selected 属性时，它们似乎尚未按操作顺序填充。当我在下面的代码中注释掉三个“.FindByName”行时，代码运行没有问题，但当然没有选择下拉值。当我使用我的 3 个 findbyname 行执行代码时，它在第一个错误上出错，对象引用未设置为对象的实例。- 在列表的项目集合上设置监视，显示为空

问题是：当 regionlistbox 项目选择已经填充时，为什么下拉列表项目集合是空的？我应该何时/在哪里设置 selected 以便填充下拉列表项集合？

```
 protected void ItemGridView_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Page")
            return;

        if (e.CommandName == "EditItem")
        {
            string[] commandArgs = e.CommandArgument.ToString().Split(new char[] { ',' });

            ItemGridView.SelectedIndex = -1;
            ItemGridView.SelectedIndex = int.Parse(commandArgs[1]);
            ServiceListBox.ClearSelection();
            RegionListBox.ClearSelection();

            editPanel.Visible = true;
            //query your database and store the result set in a DataTable 
            DasLinqClassesDataContext db = new DasLinqClassesDataContext();
            var ItemRowSelected = db.GetItemForUserById(Session["CSPAttuid"].ToString(), int.Parse(commandArgs[0])).FirstOrDefault();
            if (ItemRowSelected != null)
            {
                if (ItemRowSelected.region != null)
                {
                    string[] RegionIds;
                    RegionIds = ItemRowSelected.region.Split(',');
                    foreach (string element in RegionIds)
                    {
                        RegionListBox.Items.FindByValue(element.ToString()).Selected = true;
                    }
                }

                fieldTitle.Text = ItemRowSelected.title;
                fieldNewOverview.Text = ItemRowSelected.overview;
                lblPreviewTitle.Text = ItemRowSelected.title;
                lblPreviewAudience.Text = ItemRowSelected.audience;
                lblPreviewRegion.Text = ItemRowSelected.region_name;
                lblPreviewService.Text = ItemRowSelected.service;
                lblPreviewOverview.Text = ItemRowSelected.overview;
                lblPreviewDocument.Text = ItemRowSelected.doc;
                lblPreviewAuthor.Text = ItemRowSelected.author_name;
                //urgent checkbox / image
                if (ItemRowSelected.urgent == true)
                {
                    urgentEditImage.Visible = true;
                    checkUrgent.Checked = true;
                    urgentViewImage.Visible = true;
                }
                else
                {
                    urgentEditImage.Visible = false;
                    checkUrgent.Checked = false;
                    urgentViewImage.Visible = false;
                }
                //audio hyperlink/image
                if (ItemRowSelected.audio != null)
                {
                    audioEditImage.Visible = true;
                    audioViewImage.Visible = true;
                    fieldAudio.Text = ItemRowSelected.audio.ToString();
                }
                else
                {
                    audioEditImage.Visible = false;
                    audioViewImage.Visible = false;
                    fieldAudio.Text = "";
                }
                //document
                if (ItemRowSelected.doc != null)
                {
                    fieldDocument.Text = ItemRowSelected.doc;
                    fieldDocLink.Text = ItemRowSelected.link;
                }
                //service
                if(ItemRowSelected.service != null)
                {
                    ServiceListBox.Items.FindByText(ItemRowSelected.service.ToString()).Selected = true;
                }
                //audience
                if (ItemRowSelected.audience != null)
                {
                    ServiceListBox.Items.FindByText(ItemRowSelected.audience.ToString()).Selected = true;
                }
                //author
                if (ItemRowSelected.author != null)
                {
                    ServiceListBox.Items.FindByText(ItemRowSelected.author.ToString()).Selected = true;
                }
            }
            hiddenId.Value = ItemRowSelected.id.ToString();

        }
    } 
```

以下是下拉列表的一些页面代码：

```
.....d>
                <td width=707 colspan=2 valign=top style='width:530.25pt;border:none;border-right:solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal>
                <b>
                    <asp:DropDownList ID="ServiceListBox" runat="server" 
                        DataSourceID="LinqDsService" DataTextField="name" DataValueField="id">
                    </asp:DropDownList><asp:ImageButton ID="AddNewServiceToDropdown" runat="server" 
                        CausesValidation="False" ImageUrl="~/images/addButton.png" />
                    <asp:ModalPopupExtender ID="ModalPopAddNewServiceToDropdown" runat="server" 
                        BackgroundCssClass="modalBackground" CancelControlID="btnCancelService" 
                        DynamicServicePath="" Enabled="True" PopupControlID="panAddService" 
                        TargetControlID="AddNewServiceToDropdown">
                    </asp:ModalPopupExtender>
                </span>
                </b>
                </p>
                </td>
                </tr>
                <tr>
                <td valign=top 
                        style='border-left:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;background:#FF6600;padding:0in 5.4pt 0in 5.4pt; border-top-style: none; border-top-color: inherit; border-top-width: medium; border-bottom-style: none; border-bottom-color: inherit; border-bottom-width: medium;' 
                        class="style2">
                <p class=MsoNormal>
                <span style='font-family:"ClearviewATT","sans-serif"'>
                <o:p>&nbsp;</o:p>
                </span>
                </p>
                </td>
                <td width=193 colspan=2 valign=top style='width:144.55pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal>
                <span style='font-size:11.0pt;font-family:"ClearviewATT LT","sans-serif"'>Overview:<o:p>
                </o:p>
                </span>
                </p>
                </td>
                <td width=707 colspan=2 valign=top style='width:530.25pt;border:none;border-right:solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal 
                        style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto; height: 52px; width: 602px;'>
                    <asp:TextBox ID="fieldNewOverview" TextMode="MultiLine" runat="server" 
                        Width="600px"></asp:TextBox>
                </p>
                </td>
                </tr>
                <tr>
                <td valign=top 
                        style='border-left:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;background:#FF6600;padding:0in 5.4pt 0in 5.4pt; border-top-style: none; border-top-color: inherit; border-top-width: medium; border-bottom-style: none; border-bottom-color: inherit; border-bottom-width: medium;' 
                        class="style2">
                <p class=MsoNormal>
                <span style='font-family:"ClearviewATT","sans-serif"'>
                <o:p>&nbsp;</o:p>
                </span>
                </p>
                </td>
                <td width=193 colspan=2 valign=top style='width:144.55pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal>
                <span style='font-size:11.0pt;font-family:"ClearviewATT LT","sans-serif"'>WIIFM (What&#8217;s In It For Me):<o:p>
                </o:p>
                </span>
                </p>
                </td>
                <td width=707 colspan=2 valign=top style='width:530.25pt;border:none;border-right:solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal>
                    <asp:TextBox ID="TextBox1" runat="server" Width="600px"></asp:TextBox>
                </p>
                </td>
                </tr>
                <!--- document number --->
                <tr>
                <td valign=top 
                        style='border-left:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;background:#FF6600;padding:0in 5.4pt 0in 5.4pt; border-top-style: none; border-top-color: inherit; border-top-width: medium; border-bottom-style: none; border-bottom-color: inherit; border-bottom-width: medium;' 
                        class="style2">
                <p class=MsoNormal>
                <span style='font-family:"ClearviewATT","sans-serif"'>
                <o:p>&nbsp;</o:p>
                </span>
                </p>
                </td>
                <td width=193 colspan=2 valign=top style='width:144.55pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal>
                <span style='font-size:11.0pt;font-family:"ClearviewATT LT","sans-serif"'>Document Number:<o:p>
                </o:p>
                </span>
                </p>
                </td>
                <td width=707 colspan=2 valign=top style='width:530.25pt;border:none;border-right:solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>

                <p class=MsoNormal>
                  <table>
                    <tr>
                        <td><span  style='font-size:11.0pt;font-family:"ClearviewATT LT","sans-serif"'><asp:Label ID="Label3" runat="server" Text="Document Name"></asp:Label></span></td>

                            <td>
                                <asp:TextBox ID="fieldDocument" runat="server" Width="212px"></asp:TextBox>
                            </td>

                </tr>
                <tr>
                    <td><span  style='font-size:11.0pt;font-family:"ClearviewATT LT","sans-serif"'><asp:Label ID="Label4" runat="server" Text="Hyperlink"></asp:Label></span></td>
                    <td><asp:TextBox ID="fieldDocLink" runat="server" Width="485px"></asp:TextBox></td></tr></table>
                </p>
                </td>
                </tr>
                <!--- author --->
                <tr>
                <td valign=top 
                        style='border-left:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;background:#FF6600;padding:0in 5.4pt 0in 5.4pt; border-top-style: none; border-top-color: inherit; border-top-width: medium; border-bottom-style: none; border-bottom-color: inherit; border-bottom-width: medium;' 
                        class="style2">
                <p class=MsoNormal>
                </p>
                </td>
                <td width=193 colspan=2 valign=top style='width:144.55pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal>
                <span style='font-size:11.0pt;font-family:"ClearviewATT LT","sans-serif"'>Author:<o:p>
                </o:p>
                </span>
                </p>
                </td>
                <td width=707 colspan=2 valign=top style='width:530.25pt;border:none;border-right:solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
                <p class=MsoNormal>
                <asp:DropDownList ID="AuthorListBox" runat="server" DataSourceID="LinqDsAuthor" 
                        DataTextField="name" DataValueField="id">
                    </asp:DropDownList>   etc..... 
```

这是 linq 数据源的一些页面代码：

```
 <!---begin linqdatasources--->
<asp:LinqDataSource ID="Region" runat="server" 
    ContextTypeName="das.DasLinqClassesDataContext" EntityTypeName="" 
    Select="new (id, name)" TableName="ref_regions" Where="active == @active">
    <WhereParameters>
        <asp:Parameter DefaultValue="true" Name="active" Type="Boolean" />
    </WhereParameters>
</asp:LinqDataSource>
<asp:LinqDataSource ID="LinqDsService" runat="server" 
    ContextTypeName="das.DasLinqClassesDataContext" EntityTypeName="" 
    Select="new (id, name, active)" TableName="ref_services" 
    Where="active == @active">
    <WhereParameters>
        <asp:Parameter DefaultValue="true" Name="active" Type="Boolean" />
    </WhereParameters>
</asp:LinqDataSource>
<asp:LinqDataSource ID="LinqDsAudience" runat="server" 
    ContextTypeName="das.DasLinqClassesDataContext" EntityTypeName="" 
    Select="new (id, name, type)" TableName="ref_audiences" 
    Where="active == @active">
    <WhereParameters>
        <asp:Parameter DefaultValue="true" Name="active" Type="Boolean" />
    </WhereParameters>
</asp:LinqDataSource>
<br />
<asp:LinqDataSource ID="LinqDsAuthor" runat="server" 
    ContextTypeName="das.DasLinqClassesDataContext" EntityTypeName="" 
    Select="new (id, name)" TableName="ref_authors" Where="active == @active">
    <WhereParameters>
        <asp:Parameter DefaultValue="true" Name="active" Type="Boolean" />
    </WhereParameters>
</asp:LinqDataSource>
<!---end linqdatasources---> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:56:22.530

利用：

```
ServiceListBox.SelectedIndex = ServiceListBox.Items.IndexOf(ServiceListBox.Items.FindByText(ItemRowSelected.service.ToString())); 
```

代替

```
ServiceListBox.Items.FindByText(ItemRowSelected.service.ToString()).Selected = true; 
```

不知道为什么，但是现在使用上面的新代码可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T13:29:29.070

这对我有用：

```
For Each item As ListEditItem In cbCurr.Items
    If String.Compare(item.Text.Trim, .Item("Curr").ToString.Trim, True) = 0 Then
        cbCur.SelectedIndex = item.Index
        Exit For
    End If
Next 
```

# objective-c - 我可以在 UIView 子类上设置标签属性吗？

> ID：11587315
> 
> 赞同：0
> 
> 时间：2012-07-20T21:43:00.983
> 
> 标签：objective-c, ios, uiview

我有一个名为 CardView 的 UIView 子类，并创建了一个像这样的实例：

```
CardView *newCard = [[CardView alloc] initWithFrame:CGRectMake(x,y,w,h)]; 
```

然后我尝试像这样设置视图的标签：

```
newCard.tag = 1; 
```

但这似乎并没有真正为该视图设置标签。如果我在那里设置一个断点，然后做

```
po newCard.tag 
```

在调试器中，它说

```
error: property 'tag' not found on object of type 'CardView *' 
```

我不应该将标签属性作为 UIView 子类的一部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:46:44.217

调试器控制台不理解 Objective C 属性语法。相反，在源文件中执行此操作：

```
NSLog(@"%d", newCard.tag); 
```

你会在控制台中看到它。

调试器虽然理解方法，但它对数据类型感到困惑。此调试器命令将起作用：

```
p (int)[newCard tag] 
```

这与 GDB 一样客观。

# c# - 放置数据访问层代码

> ID：11587318
> 
> 赞同：0
> 
> 时间：2012-07-20T21:43:25.300
> 
> 标签：c#, asp.net, stored-procedures

我想知道如何将这个数据访问层代码放在一个类文件中，并在这个 default.aspx 中为受保护的 void submit 调用函数。我有一个存储过程，我正在检索值并将其传递到这里，现在我想将 DAL 放在单独的文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:56:19.220

make a new `Class` file, for instance

```
public class ServiceClass
{
    //paste your method inside this class, for example:
    public static string returnSomething(string parameter1, string parameter2  /*more parameters here*/)
    {
        return parameter1 + " " + parameter2; 
    }
} 
```

You basically have to paste the code you have in your `button_click` event right now, just make sure that you pass all the parameters that you need for the code to work.

when you have this class, you can call the class' method in your button click event:

```
protected void submit(object sender, EventArgs e)       
{ 
    string result = ServiceClass.returnSomething();
} 
```

i made it a static method, so you dont need to instantiate the `ServiceClass` in order to access the `returnSomething()` method.

# javascript - html5 音频。如何获得比特率

> ID：11587319
> 
> 赞同：5
> 
> 时间：2012-07-20T21:43:36.937
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, html5-audio

我正在为 google chrome 编写扩展程序。我有一个情况：我有一个 mp3 文件的链接，我可以播放它。我可以提取它的持续时间..

但是我怎么能计算比特率呢？是否可以通过某些属性？或者通过使用文件大小的一些计算？如果是第二个 - 如何获取文件大小？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T22:14:39.313

**更新：**

执行 HEAD 请求并从[Content-Length 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)获取文件大小。由于您知道持续时间，因此您可以计算比特率。

**研究：**

在这里，我想分享一些我的研究。

您可能已经知道这一点 - 比特率根据[MP3 格式规范](http://mpgedit.org/mpgedit/mpeg_format/MP3Format.html)存储在里面。但我敢肯定，您宁愿不阅读文件并自己处理所有这些！希望您能找到工具或 API 来提供帮助。考虑到这一点...

*   我四处寻找可以为 MP3 提取信息的公共 Web API，但没有发现任何让我大吃一惊的东西。

*   如果你能找到可以从 Chrome 访问的[ExifTool](http://en.wikipedia.org/wiki/ExifTool)版本，它有一个 API 来计算比特率。

*   有一个名为[SoundManager](http://www.schillmania.com/projects/soundmanager2/doc/)的 Javascript 库看起来很有希望，但它不能准确计算比特率。

*   我查看了[Web Audio API](http://chromium.googlecode.com/svn/trunk/samples/audio/index.html)，但没有看到任何关于读取 MP3 文件的内容，因此无法提取比特率。

# java - Android XML 布局主屏幕小部件

> ID：11587323
> 
> 赞同：0
> 
> 时间：2012-07-20T21:44:15.530
> 
> 标签：java, android

我正在使用主屏幕小部件。我希望最右侧的按钮（第二个按钮）保持固定在父线性布局的右侧。

这是代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout01"
android:layout_width="200dp"
android:layout_height="75dp"
android:background="@drawable/shape"
android:orientation="horizontal" >

<Button
    android:id="@+id/update"
    android:layout_width="30dp"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Update"
    android:textSize="3pt" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="@drawable/shape"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/ssid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="SSID"
        android:textColor="#333333"
        android:textSize="5pt"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/wifiip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="IP address"
        android:textColor="#333333"
        android:textSize="5pt"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/extip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/ssid"
        android:text="WAN IP"
        android:textColor="#333333"
        android:textSize="5pt"
        android:layout_weight="1" />
</LinearLayout>

<Button
    android:id="@+id/config"
    android:layout_width="30dp"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:text="Config"
    android:textSize="3pt" /> 
```

中间的垂直线性布局根据文本视图的宽度向右或向左推或拉按钮。我哪里错了？

这是小部件提供程序的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider
xmlns:android="http://schemas.android.com/apk/res/android" 
android:minWidth="200dp"
android:minHeight="75dp"
android:initialLayout="@layout/widget"
android:updatePeriodMillis="180000"

 /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:46:32.407

将此添加到您的 LinearLayout：

```
android:layout_width="0dip"
android:layout_weight="1" 
```

那应该这样做。让我知道这是否有效。

**编辑：**

试试这个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout01"
android:layout_width="200dp"
android:layout_height="75dp"
android:background="@drawable/shape"
android:orientation="horizontal" >

<Button
    android:id="@+id/update"
    android:layout_width="30dp"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Update"
    android:textSize="3pt" />

<LinearLayout
    android:id="@+id/LinearLayout01"
    android:layout_width="0dip"
    android:layout_weight="1"
    android:layout_height="fill_parent"
    android:background="@drawable/shape"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/ssid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="SSID"
        android:textColor="#333333"
        android:textSize="5pt"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/wifiip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="IP address"
        android:textColor="#333333"
        android:textSize="5pt"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/extip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/ssid"
        android:text="WAN IP"
        android:textColor="#333333"
        android:textSize="5pt"
        android:layout_weight="1" />
</LinearLayout>

<Button
    android:id="@+id/config"
    android:layout_width="30dp"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:text="Config"
    android:textSize="3pt" />
</LinearLayout> 
```

# jquery - 如何访问嵌套的 json 对象

> ID：11587324
> 
> 赞同：0
> 
> 时间：2012-07-20T21:44:25.560
> 
> 标签：jquery, jquery-plugins, jsrender

> **可能重复：**
> [如何从 handlebarsjs 访问这个 json 对象](https://stackoverflow.com/questions/11586459/how-to-access-this-json-object-from-handlebarsjs)

我有这个 json 文件：

```
[{         
     "id" : 9,
     "name" : "Name1",
     "address" : "address1",
     "city" : "city1",
     "state" : "KS",
     "zip" : "11111",
     "country" : "USA",
     "fax" : "111111",
     "phone" : "1111111",
     "website" : "",
     "account" : "11111",
     "contacts" : []
 }, 
 {
     "id" : 12,
     "name" : "Name2",
     "address" : "address2",
     "city" : "city2",
     "state" : "NJ",
     "zip" : "11111",
     "country" : "USA",
     "fax" : "",
     "phone" : "1111",
     "website" : "",
     "account" : "11111",
     "contacts" : [ {
         "firstName" : "name",
         "lastName" : "lastname",
         "title" : "rep",
         "phone" : "3333",
         "email" : "33333"
     } ]
} ] 
```

我可以访问这些属性

```
<td>{{:name}}</td>
<td>{{:phone}}</td>
<td>{{:city}}</td> 
```

但是如何`contacts.firstName`从模板访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:06:18.590

您的联系人是一个数组。因此，如果您想要第一个，请执行以下操作：

```
{{:contacts[0].firstName}} 
```

否则，您需要使用 for 标记进行循环。

# ios - 在整个视图上使用 UIPanGestureRecognizer 移动子视图

> ID：11587327
> 
> 赞同：0
> 
> 时间：2012-07-20T21:44:36.970
> 
> 标签：ios, uigesturerecognizer, gesture-recognition, uipangesturerecognizer

下面创建一个移动整个视图的手势识别器：

```
UIPanGestureRecognizer * recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
recognizer.delegate = self;
[self.view addGestureRecognizer:recognizer];

- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {

    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                     recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

} 
```

但我只想移动其中一个子视图。我不能这样做：

```
[self.theSubview addGestureRecognizer:recognizer]; 
```

因为我想识别整个屏幕上的手势。应该移动的对象可能很小，我不想强​​迫用户“抓住”它。如何修改处理程序方法以仅移动 Subview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:07:47.450

不会：

```
self.theSubview.center = CGPointMake(self.theSubview.center.x + translation.x, 
                                     self.theSubview.center.y + translation.y); 
```

做伎俩？

# c++ - 如果在施工中使用，则自动创建成员

> ID：11587328
> 
> 赞同：0
> 
> 时间：2012-07-20T21:44:39.527
> 
> 标签：c++, templates, generics, boost, metaprogramming

假设我有一个用`doubles`s 填充的结构（或我仅用于存储的类）。我创建了一个构造函数来分配给那些`doubles`s：

```
struct Point {
  double time;
  double x;
  double y;
  Point(double a_time, double a_x, double a_y)
    : time(a_time), x(a_x), y(a_y) {}
} 
```

如果已经在构造函数中声明了成员，那么在类中声明成员似乎是多余的。有没有办法减少这些冗余，以便构造函数中使用的成员自动成为类的公共成员？也可能对其他成员函数有用。

此示例类似于[编程：使用 C++ 的原理和实践](https://rads.stackoverflow.com/amzn/click/com/0321543726)第 348 页上的示例。所以这是当代既定的编码风格。此外，我正在寻找一种现代 C++ 风格的解决方案，这意味着没有预处理器。

**更新（1）** 这个结构体需要按以下方式使用：

```
vector<Point> points
points.push_back(t0,x0,y0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:56:38.097

你拥有它的方式非常好。但是，如果您只想提供默认值，在 C++11 中，您可以直接初始化您的成员，并且不需要构造函数：

```
struct Point {
  double time = 0.0;
  double x = 0.0;
  double y = 0.0;
}; 
```

此外，看起来这个结构只是一袋数据，如果是这种情况，您还可以使用聚合初始化，它在没有 C++11 的情况下也可以工作：

**示例 1**

```
struct Point {
  double time;
  double x;
  double y;
} p = {0.0, 0.0, 0.0}; 
```

**示例 2**

```
struct Point {
  double time;
  double x;
  double y;
};

Point p1 = {0.0, 0.0, 0.0}; 
```

**更新后**

您可以`push_back`像这样使用平面数据类型：

```
v.push_back({t0, x0, y0}); 
```

# django - Celery 任务在本地注册并运行良好——切换到 EC2 并且 Celery 不注册它们

> ID：11587329
> 
> 赞同：1
> 
> 时间：2012-07-20T21:44:43.313
> 
> 标签：django, amazon-ec2, celery

我正在运行一个 Django 项目，其中 Celery 和 MongoDB 作为我的代理，在本地运行良好。我没有使用`django-celery`. 该项目位于`../myapp/`其中，如下所示：

```
myapp/
    <other folders>
    aws/
        tasks.py
    celeryconfig.py
    settings.py 
```

在这种情况下，我只是在 中运行原型`add()`Celery 示例`aws/tasks.py`，其中包含：

```
@task
def add(x, y):
    return x+y 
```

当我`celeryd --loglevel=INFO`在命令行上运行时，它会很好地注册任务列表，并显示

```
[Tasks]    
. aws.tasks.add
. (all other tasks in tasks.py) 
```

所以现在问题来了。在 Python 解释器中执行以下行在我的本地机器上运行良好

```
>>> from aws.tasks import add
>>> result = add.delay(7,7)
>>> result.get() 
14 
```

但是当我尝试在 EC2 上启动 celery 时，没有任务被列为已注册，并且上述行失败并导致错误

```
Received unregistered task of type 'aws.tasks.add'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you are using relative imports?
Please see http://bit.ly/gLye1c for more information. 
```

这是我的`celeryconfig.py`：

```
BROKER_URL = "mongodb://localhost:27017/rawDatabase"

CELERY_RESULT_BACKEND = "mongodb"
CELERY_MONGODB_BACKEND_SETTINGS = {
    "host": "localhost",
    "port": 27017,
    "database": "rawDatabase"
}

CELERY_IMPORTS = ("aws.tasks") 
```

我的`settings.py`包含：

```
INSTALLED_APPS = (
     ...
     'aws',
     ...
) 
```

是的，我的`PYTHONPATH`包含`../myapp/`所以 celeryconfig.py 应该被拿起。

知道是什么原因造成的吗？为什么 EC2 上的 celery 没有注册任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:36:13.807

事实证明这是我`PYTHONPATH`在 EC2 上的错误。我正在从事的项目中包含的任务位于`/www/sites/siteA`. 我有另一个项目住在`/www/sites/siteB`. 这两个文件夹都有一个名为`aws/`.

但是，我`PYTHONPATH`看起来像这样：`/www/sites/siteB:/www/sites/siteA`。

当我交换订单时，celeryd 能够获取并注册任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T22:50:31.913

您在本地实例和 EC2 实例上粘贴的 celeryconfig.py 是否完全相同？我问是因为你的芹菜进口线上有一个语法错误。对于具有一个元素的元组，尾随逗号是必需的，否则事情将不会如您所愿。应该：

`CELERY_IMPORTS = ("aws.tasks",)`

代替

`CELERY_IMPORTS = ("aws.tasks")`

# c# - 如何在 Windows Phone 中制作带下划线的输入文本字段？

> ID：11587340
> 
> 赞同：0
> 
> 时间：2012-07-20T21:45:28.307
> 
> 标签：c#, silverlight, windows-phone-7, xaml, textbox

制作一个看起来像带下划线的输入文本字段的 TextBox 的最简单和正确的方法是什么？您可以在 Messaging Hub 和 Nokia Transport 的屏幕顶部看到我的意思的示例。

我应该使用什么技术来实现它？

![消息中心](../Images/f36cf854671bb1048e8a45ce88d70f21.png) ![诺基亚运输](../Images/5335afe3968f1bf5a0b57ebeff953d56.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:48:47.147

覆盖文本框`Template`没有背景或边框，然后在标签和文本框周围放置一个边框`BorderThickness="0 0 0 1"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:03:13.280

为了模仿这些页面，您需要将文本块和文本框包装在边框中。这应该让你开始。

```
 <Border BorderBrush="White" BorderThickness="0,0,0,2">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="To:" Style="{StaticResource PhoneTextTitle2Style}" Margin="12,5" VerticalAlignment="Bottom"/>
            <TextBox Grid.Column="1" Background="Transparent" BorderThickness="0" Foreground="{StaticResource PhoneSubtleBrush}" Text="This is a test"
                     VerticalAlignment="Bottom" />
        </Grid>
    </Border> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T08:32:37.767

可能这是一个简单的方法：

*   首先，将文本框和边框的默认背景设置为透明。

*   然后您可以使用 Shawn Kendrot 的答案来获得下划线（因为您需要在文本框中添加标签）

*   最后，要使焦点文本框背景透明，您必须[在 WP7 中遵循此更改焦点文本框背景/前景](https://stackoverflow.com/questions/8096805/change-focused-textbox-background-foreground-in-wp7)

或者您可以创建一个自定义文本框模板到透明背景并插入下划线的样式。

在我看来，最好的方法是尝试创建一个 UserControl 具有 Label 属性，您可以在需要时动态设置文本框标签。

我只是创建了这个：

```
namespace Test
{
    public partial class CustomTextbox : UserControl
    {
        public readonly DependencyProperty LabelProperty = DependencyProperty.Register("Label", typeof(string), typeof(CustomTextbox), null);
        public readonly DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(CustomTextbox), null);

        /// <summary>
        /// Get/set label
        /// </summary>
        public string Label
        {
            get
            {
                return (string)GetValue(LabelProperty);
            }
            set
            {
                SetValue(LabelProperty, value);
            }
        }

        /// <summary>
        /// Get/set text property
        /// </summary>
        public string Text
        {
            get
            {
                return (string)GetValue(TextProperty);
            }
            set
            {
                SetValue(TextProperty, value);
            }
        }

        public CustomTextbox()
        {
            InitializeComponent();

            DataContext = this;
        }
    }
} 
```

XAML：

```
 <Border BorderBrush="White" BorderThickness="0,0,0,1">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock Text="{Binding Path=Label}" VerticalAlignment="Bottom" Margin="0,0,0,2" />
            <TextBox Text="{Binding Path=Text}" FontSize="22" Grid.Column="1" Background="Transparent" BorderThickness="1" Foreground="White" Margin="0" Padding="10,0" VerticalAlignment="Bottom">
                <TextBox.Template>
                    <ControlTemplate TargetType="TextBox">
                        <Grid Background="Transparent">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />
                                    <VisualState x:Name="MouseOver" />
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="EnabledBorder" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Collapsed</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DisabledOrReadonlyBorder" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="ReadOnly">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="EnabledBorder" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Collapsed</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DisabledOrReadonlyBorder" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DisabledOrReadonlyBorder" Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DisabledOrReadonlyBorder" Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DisabledOrReadonlyContent" Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxReadOnlyBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused">
                                        <Storyboard>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Unfocused" />
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>

                            <ContentControl x:Name="ContentElement"
                                                Margin="{StaticResource PhoneTextBoxInnerMargin}"
                                                HorizontalContentAlignment="Stretch"
                                                VerticalContentAlignment="Stretch"
                                                BorderThickness="0"
                                                Padding="{TemplateBinding Padding}" />

                            <Border x:Name="DisabledOrReadonlyBorder"
                                    Margin="{StaticResource PhoneTouchTargetOverhang}"
                                    Background="Transparent"
                                    BorderBrush="{StaticResource PhoneDisabledBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    Visibility="Collapsed">
                                <TextBox x:Name="DisabledOrReadonlyContent"
                                         Background="Transparent"
                                         FontFamily="{TemplateBinding FontFamily}"
                                         FontSize="{TemplateBinding FontSize}"
                                         FontStyle="{TemplateBinding FontStyle}"
                                         FontWeight="{TemplateBinding FontWeight}"
                                         Foreground="{StaticResource PhoneDisabledBrush}"
                                         IsReadOnly="True"
                                         SelectionBackground="{TemplateBinding SelectionBackground}"
                                         SelectionForeground="{TemplateBinding SelectionForeground}"
                                         Text="{TemplateBinding Text}"
                                         TextAlignment="{TemplateBinding TextAlignment}"
                                         TextWrapping="{TemplateBinding TextWrapping}" 
                                 BorderThickness="0"/>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </TextBox.Template>
            </TextBox>
        </Grid>
    </Border>
</UserControl> 
```

使用：

```
<local:CustomTextbox Label="label:" Text="text"></local:CustomTextbox> 
```

# linux - $HOME 和'~'（波浪号）之间的区别？

> ID：11587343
> 
> 赞同：81
> 
> 时间：2012-07-20T21:45:49.777
> 
> 标签：linux, bash, centos

我一直认为`$HOME`并且`~`完全相同，因此可以互换使用。今天，当我尝试在我的共享服务器上安装*pylibmc*`~` （一个绑定到 memcached 的 python 绑定）时，使用给了我错误但没有 `$HOME`。我想说明原因。

*libmemcached*是*pylibmc*的要求。我在我的主目录下安装了*libmemcached*，因为我在服务器上没有 root。因此，要安装*pylibmc*，我需要确保安装脚本知道在哪里可以找到*libmemcached*。

执行时`python setup.py install --with-libmemcached=~`，安装脚本运行

```
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall \
  -Wstrict-prototypes -fPIC -DUSE_ZLIB -I~/include \
  -I/usr/local/include/python2.7 -c _pylibmcmodule.c \
  -o build/temp.linux-i686-2.7/_pylibmcmodule.o -fno-strict-aliasing

```

这给出了找不到*libmemcached的错误。*

如果我更改为`--with-libmemcached=$HOME`，则脚本运行

```
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall \
  -Wstrict-prototypes -fPIC -DUSE_ZLIB -I/home/waterbotte/include \
  -I/usr/local/include/python2.7 -c _pylibmcmodule.c \
  -o build/temp.linux-i686-2.7/_pylibmcmodule.o -fno-strict-aliasing

```

没有任何问题。看起来问题是波浪号没有得到解决。但为什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-20T21:49:34.003

波浪号是[shell 扩展](http://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html)的一部分（如 bash、csh、zsh 等）。该`$HOME`变量是可导出的，并且可以独立于特定的 shell 使用。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-20T21:52:27.247

shell 替换`~`为用户的主目录（**update** : 或者可能是其他用户的主目录，如果`~`后面跟着 a 以外的内容`/`），但前提是它是单词的第一个字符。

`--with-libmemcached=~`一开始还`~`没有，所以壳不管它。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-06-04T16:17:57.333

`~`仅当它是单词的第一个字符并且未引用时才被扩展

```
$ echo "~"
~
$ echo foo~
foo~
$ echo ~
/home/guest
$ echo ~/foo
/home/guest/foo 
```

`~username`扩展到`HOME`的`username`。

```
$ echo ~root
/root
$ echo ~invaliduser
~invaliduser 
```

要引用文件名，您应该使用`$HOME`或引用后缀

```
$ echo "$HOME/foo bar"
/home/guest/foo bar
$ echo ~/"foo bar"
/home/guest/foo bar
$ echo ~root/"foo bar"
/root/foo bar 
```

请注意[“POSIX 波浪号扩展”中的以下内容](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_01)

> 由波浪号扩展产生的路径名应被视为引用，以防止它被字段拆分和路径名扩展更改。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-20T22:12:03.753

主要区别在于：

```
cd /tmp
ls "$HOME" #works
ls "~" #nope 
```

因此，shell 仅在少数情况下扩展 ~。在您的情况下，python 脚本简单地得到了 ~ 在脚本中 - 而不是扩展值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-15T02:37:08.723

运行以下脚本：

```
#!/bin/bash

sudo -H -u root bash<<EOF
echo $HOME
echo ~
EOF 
```

输出：

```
/home/my_current_user
/root 
```

您可以看到它`~`在稍后被目标 shell (run by )[**扩展**](https://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html)，而被源 shell (run by )[**替换**](http://www.tldp.org/LDP/abs/html/varsubn.html)`root``$HOME`[](http://www.tldp.org/LDP/abs/html/varsubn.html)**`my_current_user`**

# c - 从字符串 C 挑战中删除我

> ID：11587344
> 
> 赞同：0
> 
> 时间：2012-07-20T21:45:54.923
> 
> 标签：c, string

需要从该字符串中删除填充字符，即`"REMOVEMEHOW"`需要通过截断而不匹配大小写来删除它，我正在尝试截断缓冲区的标题部分。

```
#include <stdio.h> 
#include <string.h> 
#include <windows.h> 

int main () 
{     
    char buffer[200]="REMOVEMEHOW**THIS IS THE REST OF THE STRING THAT IS FINE***REMOVEMEHOW";    

    system("pause");
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:50:57.673

```
#include <stdio.h>
#include <string.h>

char* strrmv(char *text, char *removeword){
    char *p=text;
    int rlen;
    rlen = strlen(removeword);
    while(NULL!=(p=strstr(p, removeword))){
        memmove(p, p+rlen, strlen(p+rlen)+1);
    }
    return text;
}

int main(){
    char buffer[200]="REMOVEMEHOW**THIS IS THE REST OF THE STRING THAT IS FINE***REMOVEMEHOW";

    printf("\"%s\"", strrmv(buffer, "REMOVEMEHOW"));
    return 0; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:50:09.930

看看string.h 库中的[strstr()](http://www.cplusplus.com/reference/clibrary/cstring/strstr/)。（我在这里给出的链接是针对 C++ 的，但 C 具有相同的功能。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:50:57.913

如果您知道要删除多少个 ( `N_front`, ) 字符：`N_back`

将`N_front`th 字符后的所有内容向前移动`N_front`并设置终止的空字节。

```
memmove (buffer, buffer + N_front, 200 - N_front);
buffer[strlen(buffer) - N_back] = '\0'; 
```

# iphone - 使用 NSNumberFormatter 以两位小数显示 plist 中的数字

> ID：11587345
> 
> 赞同：1
> 
> 时间：2012-07-20T21:45:58.637
> 
> 标签：iphone, xcode, nsstring, nsnumber, nsnumberformatter

我正在我的一个标签中显示来自 plist 的数字（如果存在密钥）。如果我在 plist 中输入 98,90，它有时会将数字更改为 98,9000000000001。所以我想显示两位小数的数字，我正在尝试添加一个`NSNumberFormatter`来完成这项工作。但我不能让它工作，我需要一些帮助才能把它做好。这是我的尝试：

```
 NSString *theString = @"";
 if ([selectedObject valueForKey:@"75 cl"] != nil) {

     NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
     [formatter setPositiveFormat:@"###.##"];

     theString = [NSString stringWithFormat:@"75 cl € %@", [formatter stringFromNumber:[selectedObject valueForKey:@"75 cl"]]];
 }
 sevenfiveLabel.text = theString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:51:55.263

格式字符串中的A`#`表示一个可选数字：格式化程序只会在需要时将一个数字放在那里。如果要强制它填充字符串，则需要`0`在格式字符串中使用 a 。

```
Format   Result
###.##   98.9
##0.00   98.90
000.00   098.90 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:56:44.903

您不需要使用`NSNumberFormatter`：

```
NSString *theString = @"";
NSNumber *theNumber = [selectedObject valueForKey:@"75 cl"];

if (theNumber) {
    theString = [NSString stringWithFormat:@"75 cl € %.2f", [theNumber floatValue]];
}

sevenfiveLabel.text = theString; 
```

# continuous-integration - 用于运行 Cucumber 和查看结果的 Web 界面

> ID：11587347
> 
> 赞同：2
> 
> 时间：2012-07-20T21:46:10.323
> 
> 标签：continuous-integration, cucumber

我想创建一个简单的网页，我们团队中的任何人（即非技术用户）都可以访问，单击“运行所有测试”按钮，然后查看格式良好的黄瓜运行结果版本。

本质上，我想要的只是一个漂亮的 Web 包装器，它可以覆盖`cucumber features`从我的项目根目录键入的命令行结果。

是否有任何提供此功能的开源项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:00:50.717

是的。[这是持续集成](http://en.wikipedia.org/wiki/Continuous_integration)系统的任务之一。尽管只是在按下按钮后[运行测试，他们可以：](https://github.com/cucumber/cucumber/wiki/Continuous-Integration)

*   按照计划在提交、安装构建后运行它们
*   通过电子邮件向您发送测试结果
*   以方便的方式存储以前运行的结果

我建议你使用 Jenkins 作为一个持续集成系统，因为它有[插件](https://github.com/masterthought/jenkins-cucumber-jvm-reports-plugin-java)可以让你很好地呈现测试结果。尽管它的名称插件可以与所有版本的 Cucumber 一起使用，而不仅仅是 Cucumber-JVM，它可以将其输出格式化为 JSON。

# magento - Magento - 需要绕过内置的自定义选项系统并从外部 PHTML 文件填充自定义选项

> ID：11587354
> 
> 赞同：0
> 
> 时间：2012-07-20T21:47:20.537
> 
> 标签：magento, options

我工作的公司目前正在将我们的网站从没有 CMS 的完整 HTML 网站转移到 Magento。我们的产品非常可定制，并且许多可用的选项相互依赖。我的菜单系统（以及它的显示方式）也取决于当前选择的产品选项。话虽如此，Magento 的自定义选项系统（开箱即用）不允许我进行自定义以使产品的选项菜单按我需要的方式工作。我没有尝试重新发明 Magento 轮子，而是认为最简单的方法是让项目从 PHTML 文件中提取自定义选项。通过这种方式，我可以根据产品类型（属性）指定要提取的选项。我能够让那部分工作正常。我遇到的问题如下：

1.  选择选项时价格不会更新
2.  当我添加到购物车时，选项不会发送到购物车

当您添加并更改价格时，如何绕过 Magento 的内置自定义选项系统并且仍然让我的自定义选项（来自 phtml 文件）发送到购物车？希望我很清楚。如果我需要澄清任何事情，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:45:33.937

您需要从`app/design/frontend/base/default/template/catalog/product/view/options.phtml`文件中复制数据，以便 Magento 动态提取将出现在产品页面上的定价和自定义选项数据。

您将包括所有脚本（在`script`标签之间），并确保自定义选项在`dl`标签之间，除非您使用完全自定义的 CSS 工作。

如果要将选项直接转储到 phtml 文件中，请从 options.phtml 文件中排除所有 PHP 语言。

这允许定价随着所做的选择而动态更新，并允许将自定义选项添加到购物车中。

# php - 传递给视图的数据，在布局中不可访问 - Laravel 控制器

> ID：11587357
> 
> 赞同：8
> 
> 时间：2012-07-20T21:47:25.313
> 
> 标签：php, laravel, view, controller

如果我的控制器中有这个

`$this->layout->nest('content', 'home.index', $array);`

我只能访问`$array`home.index.blade.php 模板文件中的数据，而不是`layouts.main`我正在使用的数据。

布局和视图加载正确，我只是无法从布局文件访问控制器中传递的任何数据。

有谁可以帮忙吗？

澄清 - 假设我想将一个`title`变量传递给我的 layout.main，我该怎么做？我上面发布的方法只允许我`$array`从 index.blade.php 的“内容”中访问

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T12:12:26.950

要将数据传递给布局，请使用第一个参数作为变量的名称。

当你这样做时会发生什么：

```
$this->layout->nest('content', 'home.index', $array); 
```

正在嵌套带有 $array 参数的视图 home.index。您没有创建可在布局中使用的变量。

您为布局创建的变量是 $content，它将显示传递给它的视图的内容，这是特定于 'nest' 方法的。

如果您查看 API，您会注意到控制器中声明的“布局”是以下实例：`Laravel\View`

这有一个方法称为`with`向视图提供变量。

要使用它，请尝试以下操作：

```
$this->layout->with( 'myVariable' , $variable_to_pass_to_layout )
             ->nest('content', 'home.index', $array) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T20:02:31.060

另一种解决方案是使数据在您的所有视图中都可用

`View::share('myVariable', $variable_to_pass_to_layout);`

让任何人访问它可能很有用。

# html - 强制 html 表在一行上有八列

> ID：11587360
> 
> 赞同：2
> 
> 时间：2012-07-20T21:47:31.033
> 
> 标签：html, css

我有一个 PHP 数组，它在表格的每行中生成四列。无论如何强制HTML表格每行显示8列？

例如，如果我的输出是：

```
<tr>
<td>COL 1</td>
<td>COL 2</td>
<td>COL 3</td>
<td>COL 4</td>
</tr>
<tr>
<td>COL 5</td>
<td>COL 6</td>
<td>COL 7</td>
<td>COL 8</td>
</tr>
<tr>
<td>COL 9</td>
<td>COL 10</td>
<td>COL 11</td>
<td>COL 12</td>
</tr>
<tr>
<td>COL 13</td>
<td>COL 14</td>
<td>COL 15</td>
<td>COL 16</td>
</tr> 
```

显示如下：

```
COL 1 COL 2 COL 3 COL 4
COL 5 COL 6 COL 7 COL 8
COL 9 COL 10 COL 11 COL 12
COL 13 COL 14 COL 15 COL 16 
```

无论如何 CSS 或 HTMl 可以强制表格在中断之前在一行上显示八列吗？所以创造这样的东西？

```
COL 1 COL 2 COL 3 COL 4      COL 5 COL 6 COL 7 COL 8
COL 9 COL 10 COL 11 COL 12   COL 13 COL 14 COL 15 COL 16 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:50:32.377

只需更改您的 PHP 以正确格式化它或使用 div 并相应地设置样式，但是如果其真正的表格数据 id 使用表格并修复您的 PHP 以表示您想要的内容。

在 PHP 中这真的不是那么困难，例如，您可以只有一个计数器，当该计数器 % 2 == 0 时，完成该行并开始一个新的。相应地增加计数器。

**伪代码**

*目前你有这样的东西。*

```
for($i = 0; $i < numRows; $i++) {
    output a <tr> tag

    output <td> tags and data

    output a closing </tr> tag
} 
```

*你需要做的是这样的事情。*

```
for($i = 0; $i < numRows; $i++)  {
    if($i % 2 == 0)
        output startting <tr> tag

    output some <td> tags with data

    if(($i +1) % 2 == 0)
        output closing <tr> tag
} 
```

Alternatley 你可以只使用一个布尔标志

```
is_even_row = ture;
for each row {
    if(is_even_row)
        output start tag

    output data for row

    if(not is_even_row)
        output end tag

    is_even_row = not is_even_row
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:55:28.440

解决此问题的正确方法是修复为您的目的生成错误 HTML 布局的 PHP，也就是说，使用 CSS，至少有一个选项：

```
table {
    disply: block;
    width: 90%;
    margin: 1em auto;
    border: 1px solid #000;
}

tr {
    display: block;
    width: 50%;
    float: left;
    margin: 0;
    padding: 0;
}

td {
    display: inline-block;
    width: 20%;
    border: 1px solid #000;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fwM8M/1/)。

还有一个 JavaScript 解决方案（如果有的话）：

```
var table = document.getElementsByTagName('table')[0],
    rows = table.getElementsByTagName('tr');

for (var i=rows.length - 1; i>=0; i--){
    if (i%2 == 1 && i !== 0){
        var prev = rows[i].previousElementSibling;
        while (rows[i].firstChild){
            prev.appendChild(rows[i].firstChild);
        }
        rows[i].parentNode.removeChild(rows[i]);
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fwM8M/2/)。

# xcode - 可以生成随机数，它们之间有一定的间隔吗？

> ID：11587364
> 
> 赞同：1
> 
> 时间：2012-07-20T21:48:05.017
> 
> 标签：xcode, random, nsmutablearray, draw

我有下面的代码

```
NSMutableSet * numberSet = [NSMutableSet setWithCapacity:10];
while ([numberSet count] < 10 ) {
    NSNumber * randomNumber = [NSNumber numberWithInt:( (arc4random() % (190-10+1)) + 10 )];
    [numberSet addObject:randomNumber];
} 
```

这会生成一组 10 个随机数，用于在视图中绘制 5 个点。然后在这些点周围绘制圆圈。

```
[[UIBezierPath bezierPathWithArcCenter:CGPointMake(a, b) radius:6 startAngle:1 endAngle:10 clockwise:YES] fill]; 
```

有没有一种简单的方法可以确保这些数字彼此之间没有一定的差距。例如，我不希望两个圆圈相互交叉。我正在考虑使用相当多的 if 语句，但想知道是否有更简单的方法来实现相同的目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:52:45.253

此代码生成 10 个半径为 10 且彼此不相交的圆。我同意 bames53 的观点，即最好的方法是检查生成的圆是否与先前生成的圆相交。

```
// Seed random generator
srand(time(NULL));  

const float radius = 10;
const int numberOfCircles = 10;

// Defines the area where the center of the circles are allowed 
const float min_x = 0 + radius; 
const float max_x = 320 - radius;
const float min_y = 0 + radius;
const float max_y = 367 - radius;

NSMutableSet * nonInterSectingCircles = [NSMutableSet setWithCapacity:numberOfCircles];

while ([nonInterSectingCircles count] < numberOfCircles ) {

    float x_new = randomNumber(min_x, max_x);
    float y_new = randomNumber(min_y, max_y);

    BOOL intersectsExistingCircle = NO;

    for (NSValue *center in nonInterSectingCircles) {
        CGPoint centerPoint = [center CGPointValue];
        if (distance(x_new, centerPoint.x, y_new, centerPoint.y) < radius * 2) 
            intersectsExistingCircle = YES; 
    }

    if (!intersectsExistingCircle) [nonInterSectingCircles addObject:[NSValue valueWithCGPoint:CGPointMake(x_new, y_new)]];

} 
```

使用以下函数：

```
float distance(float x1,float x2, float y1, float y2) {

    float dx = (x2 - x1);
    float dy = (y2 - y1);

    return  sqrt(dx * dx + dy * dy);
}

float randomNumber(float min, float max) {

    float random = ((float) rand()) / (float) RAND_MAX;
    random = random * (max - min);
    return min + random;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:58:11.300

您可能必须跟踪到目前为止生成的数字，并使用它们来帮助生成每个下一个随机数。例如，如果您想要 5 的间隙，则生成 MIN 和 MAX 之间的第一个数字，将 5 添加到它，然后生成该数字和 MAX 之间的下一个数字。如果您通过 MAX，则需要一些额外的代码来环绕到范围的开头，您就可以开始了。

另一种选择是将可能的数字范围分解为 N 个子集，并在每个子范围内生成一个数字。因此，对于从 1 到 100 的范围，您可以在 1 到 10 中生成一个数字，在 15 到 25 中生成下一个数字，在 30 到 40 中生成下一个数字，等等，确保大致均匀分布但保留一些随机性。

您要使用的确切方法将取决于您实际想要实现的分布类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:01:09.417

我认为您最好的选择是生成随机数并丢弃那些落在这些间隙中的随机数。如果您保持数字的排序序列，并且在插入新数字之前检查下一个最高和最低数字是否足够远，这可能会相当有效地完成。

此外，您可能会考虑使用 C++`<random>`库，因为它为您提供的发行版可能比您制作自己的发行版做得更好（假设示例代码是`(arc4random() % (190-10+1)) + 10`）。

# php - 有时索引的字符串数组仅按整数返回第一个字符

> ID：11587369
> 
> 赞同：0
> 
> 时间：2012-07-20T21:48:30.530
> 
> 标签：php, oracle

这个错误让我发疯 ，`$sql_build`包含一个`SELECT`我有以下循环：

```
$a = 0;
OCIExecute($sql_build);
while(OCIFetch($sql_build))
{
    $ticket_nbr[$a]  = OCIResult($sql_build,"TICKET");
    $date_time[$a]   = OCIResult($sql_build,"DATE_TIME");
    $uid      = OCIResult($sql_build,"ATTUID");
            echo "$uid<BR />";
            echo "$a<BR />";
    $attuid[$a]      = OCIResult($sql_build,"ATTUID");
            echo "$attuid[$a]<BR />";
            $description[$a] = OCIResult($sql_build, "CHANGE_DESC");
            echo "$a|$ticket_nbr[$a]|$date_time[$a]|$attuid[$a]|<br />";;
    $a++;
} 
```

我得到以下输出：

```
jt898u
0
j
0|00000000 |07/13/2012 00:00:00|j|
mt2755
1
m
1|00000000 |07/19/2012 00:00:00|m|
mt2755
2
m
2|00000000 |07/19/2012 16:39:26|m|
jt898u
3
j
3|00000000 |07/19/2012 16:45:53|j| 
```

- 所以`$ticket_nbr[$a]`做我期望但`$attuid[$a]`没有做的事情。

注意 $uid 未使用 - 只是一个现实检查，我从列中得到了正确的值。

注意：请不要教我使用不推荐使用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:00:30.317

原来 $attuid 在包含文件中并且没有用作数组。改了名字，果然奏效了。

# php - 如何在 PHP 中不提交表单的情况下检索 DropDownBox 的值？

> ID：11587371
> 
> 赞同：0
> 
> 时间：2012-07-20T21:48:40.537
> 
> 标签：php, javascript, forms, drop-down-menu, session-state

作为 PHP 页面的一部分，我有一个表单。在表单中使用了 DropDownBox。我需要在提交表单之前检索用户选择的值，最好是在会话变量中。我需要这个，因为根据用户选择的值，我需要为他们提供额外的文本框和单选按钮来输入更多数据，这些数据连同其他详细信息必须存储在数据库中。问题是，为了使用 POST/GET/REQUEST，我需要将数据发送到另一个链接。我不要那个。

我也尝试使用 javascript，onChange 事件。如何将 javascript 变量转换为 PHP 变量？还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:50:47.927

你可以使用jquery。这是一个类似的线程，可以解决您的问题。

[使用 jQuery 从下拉列表（选择框）中获取选定的文本](https://stackoverflow.com/questions/1643227/jquery-get-selected-text-from-dropdownlist)

[jquery从下拉列表中获取选定的值？不是文字](https://stackoverflow.com/questions/10512651/jquery-get-selected-value-from-dropdownlist-not-text)

[http://forum.jquery.com/topic/jquery-get-selected-value-in-dropdown](http://forum.jquery.com/topic/jquery-get-selected-value-in-dropdown)

获取值后，向 php 发送一个 ajax 请求，然后返回一个值。使用返回值，可以做更多的处理。您可以在[http://api.jquery.com/jQuery.ajax/上查看 jquery ajax](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:00:22.703

我在 Javascript 和服务器脚本之间切换的方式是使用隐藏的输入字段。这样，您可以在提交表单时发送该值，并且您也可以在客户端操作该值。但是使用 AJAX 也是一个不错的方法。

# ruby-on-rails - 图像预编译，heroku 不断抱怨一些

> ID：11587372
> 
> 赞同：2
> 
> 时间：2012-07-20T21:48:46.420
> 
> 标签：ruby-on-rails, heroku, production-environment, precompiled

我将图像添加到 /app/assets/images 文件夹 logo-small.jpg

然后我将此行添加到我的视图中

```
= link_to image_tag('logo-small.jpg'), root_path, :class => 'brand' 
```

然后我预编译，

```
rake assets:precompile RAILS_ENV=production 
```

git add、git commit 和 git push heroku master。推动工作。

我仍然收到错误

```
ActionView::Template::Error (logo-small.jpg isn't precompiled): 
```

为什么？

编辑：我尝试了其他图像，它们很好。Heroku 的 logo 和 logo-small 有问题，但其他图像没有。wtf??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:24:04.370

如果你在 heroku 的 Cedar 堆栈上，你的资产应该在你推送到 heroku 时自动预编译。如果您在该堆栈上并且仍然遇到错误，那会很高兴知道。

如果您使用的是 Bamboo 堆栈（有点旧，但曾经是默认堆栈），您可以尝试在服务器上运行[rake 任务](https://devcenter.heroku.com/articles/rake)，让它编译您已经推送的资产。

```
heroku run rake assets:precompile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:20:44.893

从来没有发现它是什么。将格式从jpg切换到png，它工作。

# android - 滚动视图不起作用

> ID：11587374
> 
> 赞同：-1
> 
> 时间：2012-07-20T21:48:50.010
> 
> 标签：android

我添加了 ScrollView，但它不会显示在应用程序中，尤其是当屏幕尺寸较小时，Spinner 不会显示。如何添加滚动视图？

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/timeclock_bg"
        android:orientation="vertical" >

        <AnalogClock
            android:id="@+id/AnalogClock1"
            android:hand_hour="@drawable/customhour"
            android:hand_minute="@drawable/customminute" />

        <TextView
            android:id="@+id/txtcompanyidentifier"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/txtuserdisplay"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/txtLastpounch"
            android:textSize="15sp" />

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_alignParentRight="true"
            android:orientation="vertical" >

            <Button
                android:id="@+id/btnchkin"
                android:background="@drawable/new_chkin" />

            <Button
                android:id="@+id/btnchkout"
                android:background="@drawable/new_checkout" />
        </RelativeLayout>

        <DigitalClock
            android:id="@+id/digitalClock2"
            android:textSize="15sp" />

        <Spinner
            android:id="@+id/spinner1"
            d:paddingBottom="2dp" />

        <Spinner android:id="@+id/spinner2" />

        <Spinner
            android:id="@+id/spinner3"
            android:paddingBottom="2dp" />

        <Spinner
            android:id="@+id/spinner4"
            android:layout_width="wrap_content"
            android:paddingBottom="2dp" />

        <Spinner
            android:id="@+id/spinner5"
            android:layout_width="wrap_content" >

            <EditText
                android:id="@+id/notes"
                android:hint="Notes:"
                android:inputType="textPostalAddress" >

                <requestFocus />
            </EditText>
        </Spinner>
    </RelativeLayout>

    <Spinner>
    </Spinner>

    <RelativeLayout>
    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:58:29.690

It doesn't display anything because a scrollview only supports one ViewGroup as a child and you have 2 RelativeLayout and 1 spinner. You have to put all you view into one RelativeLayout for example.

In your case If you delete these:

```
<Spinner>
</Spinner>

<RelativeLayout>
</RelativeLayout> 
```

On the end it has to work.

Hope to help :)

# java - 如何更改 Maven 构建目录？

> ID：11587375
> 
> 赞同：24
> 
> 时间：2012-07-20T21:48:58.180
> 
> 标签：java, maven, compilation

我有一个用 Netbeans 编译的 Maven 项目。我有办法指定一个不同的构建目录，编译后在其中复制编译的二进制代码吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-20T21:54:13.407

当然。使用以下内容更新您的 POM：

```
<build>
  <directory>my_new_build_path</directory>
</build> 
```

第 2 部分：指定 WAR 的输出路径：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.0</version>
    <configuration>
        <warName>test-web-app</warName>
        <outputDirectory>my_output_path</outputDirectory>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-20T21:53:58.787

```
<project>
  <build>
    <outputDirectory>target/classes</outputDirectory>
  </build>
</project> 
```

# javascript - 动态页面上的骨干路由器配置

> ID：11587380
> 
> 赞同：0
> 
> 时间：2012-07-20T21:49:30.087
> 
> 标签：javascript, backbone.js, backbone-routing

我有一个通过 get 请求加载的 php 页面，其中包含多个参数，例如：index.php?page=6&name=Virginia。加载页面后，我将初始化主干并使用它在页面的一部分上呈现视图。问题是路由器似乎正在获取我的整个 url 并注册它，因此为了触发路由，我必须将以下内容附加到我的链接：. 这有效，但很丑陋。我尝试将 root 参数更改为 Backbone.history.start 但似乎无法使其正常工作。我敢肯定，大多数人不会从带有查询参数的动态页面开始主干，但感谢您提供任何帮助。我尝试了从插件到不同正则表达式的各种解决方案，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:36:25.303

如果没有 pushState，您根本无法做到这一点。我会做类似的事情：

```
var router = Backbone.Router.extend({
  routes: {
    '*url': 'defaultRoute'
  },

  defaultRoute: function(url) {
    // just url argument and parse params out
  }
}); 
```

实际上，在您的情况下，这将是最简单的。对于参数，您需要一个带有 、 和 方法的类`get`，`set`这`delete`非常简单，您可以找到大量示例。

# javascript - 页面加载后的 JQuery(window).load？

> ID：11587381
> 
> 赞同：2
> 
> 时间：2012-07-20T21:49:30.240
> 
> 标签：javascript, jquery, javascript-events

是否会`JQuery`运行传入的函数`$(window).load(callback)`，当这个监听器添加到`window.load`事件之后？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T21:52:12.470

不，`$(window).load(function(){})`仅在事件之前绑定时才调用。

另一方面，如果它们在事件之后被绑定， `$(document).ready(function(){})`（及其简写`$(function(){})`）*将（立即）被触发。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T21:53:19.667

不，它不会：http: [//jsfiddle.net/WouterJ/zMEZA/](http://jsfiddle.net/WouterJ/zMEZA/)

但是一个`$(window).ready`事件会：http: [//jsfiddle.net/WouterJ/zMEZA/1/](http://jsfiddle.net/WouterJ/zMEZA/1/)

# ruby-on-rails - ruby on rails 如何调用语言环境消息来查看

> ID：11587392
> 
> 赞同：1
> 
> 时间：2012-07-20T21:50:33.870
> 
> 标签：ruby-on-rails, ruby, locale

这是我的 config/locales/en.yml 文件：

```
# Sample localization file for English. Add more files in this directory for other locales.
# See https://github.com/svenfuchs/rails-i18n/tree/master/rails%2Flocale for starting points.

en:
  hello: "Hello world"
  signup_title: "Sign Up for Test" 
```

我使用什么来调用这个文件中的消息（可能使用不正确）

```
<h1><%= en.signup_title %></h1> 
```

当然我会遇到一些错误

```
undefined local variable or method `en' for #<#<Class:0x007fd14d4f4338>:0x007fd14d501fb0> 
```

那么我怎样才能在没有任何错误的情况下获得消息值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:57:41.347

```
<h1><%= t 'signup_title' %></h1> 
```

`t`是方法的别名`translate`方法

```
<h1><%= translate 'signup_title' %></h1> 
```

[http://guides.rubyonrails.org/i18n.html#the-public-i18n-api](http://guides.rubyonrails.org/i18n.html#the-public-i18n-api)

对于不同的位置，请参阅[http://guides.rubyonrails.org/i18n.html#setting-and-passing-the-locale](http://guides.rubyonrails.org/i18n.html#setting-and-passing-the-locale)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:58:57.410

使用这个：
`<h1><%= t(:signup_title) %></h1>`
阅读更多： http: [//guides.rubyonrails.org/i18n.html#the-public-i18n-api](http://guides.rubyonrails.org/i18n.html#the-public-i18n-api)

# visual-studio-2010 - 如何在VS2010后期构建步骤中添加双引号

> ID：11587394
> 
> 赞同：17
> 
> 时间：2012-07-20T21:50:39.150
> 
> 标签：visual-studio-2010, build, msbuild, macros, quoting

我正在尝试在 VS2010 中创建一个构建后文件复制步骤，该步骤在路径宏嵌入空格时进行处理。我尝试将复制命令用双引号括起来，但是如果`$(SolutionDir)`包含空格，则在调用复制时会出错。错误消息中的回显命令行不显示双引号。

`copy "$(SolutionDir)$(Configuration)\*" "$(TargetDir)"`

我也单独尝试过`\"`，`""`但这两者都会导致 2 个字符的转义序列出现在回显的命令行中？如何在构建步骤中正确地转义双引号？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-23T17:46:46.353

我在 Visual Studio 中使用带有预构建事件命令的双引号时遇到了问题。我已经看到了这个问题的批处理文件解决方案，但似乎批处理文件并不能解决所有问题并且并不优雅。 *我发现解决方案是在结束双引号之前放置一个空格。* 详细情况如下。

以下命令有效，但不支持路径中的空格：

`subwcrev $(SolutionDir) $(SolutionDir)subwcrev_template.txt $(SolutionDir)version.h`

我几乎无法控制其他开发人员将解决方案放在哪里，所以我必须支持路径中的空格。尝试在路径周围使用引号来支持空格，我想出了以下命令。它总是失败。

`subwcrev "$(SolutionDir)" "$(SolutionDir)subwcrev_template.txt" "$(SolutionDir)version.h"`

几乎是偶然的，我找到了解决方案，在路径的最后一个字符和双引号之间放一个空格。

`subwcrev "$(SolutionDir) " "$(SolutionDir)subwcrev_template.txt " "$(SolutionDir)version.h "`

这行得通。我在使用 Visual Studio Shell 的 AVR Studio 6.1 中对此进行了测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-15T18:48:33.590

Visual Studio 项目文件是 XML 文件。某些特殊字符，例如双引号，必须使用命名实体进行转义。我认为它们类似于用于将字符串编码为 html 的内容。

MSDN 有关于[如何在项目文件中使用保留的 XML 字符](http://msdn.microsoft.com/en-us/library/ms171485%28v=vs.100%29.aspx)的参考。在您的示例中，完成副本所需要做的就是在 .csproj/.vbproj 文件中：

```
copy &quot;$(SolutionDir)$(Configuration)\*&quot; &quot;$(TargetDir)&quot; 
```

这会将两条路径都用双引号引起来。引用带空格的路径时会出错，这就是需要双引号的原因。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-17T15:03:39.210

您需要在两个双引号内加上一个双引号。

后期构建步骤中的复制文件示例： `copy /Y """C:\source path with spaces\somefile.txt""" """C:\destination path with spaces\"""`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-11T12:09:55.020

我无法得到其他答案。

我终于逃脱了最后一个“\”：

```
"$(TargetDir)\" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-23T21:20:26.427

请，哦，请***不要***使用后期构建事件。
相反，请使用 MSBuild**[`AfterBuild`](http://msdn.microsoft.com/en-us/library/ms171462.aspx)**目标的强大功能：

右键单击您的项目并选择`Edit Project File`. 添加 AfterBuild 事件：

```
 <Target Name="AfterBuild">
    <ItemGroup>
      <FilesToCopy Include="$(SolutionDir)$(Configuration)\*" />
    </ItemGroup>
    <Copy SourceFiles="@(FilesToCopy)"
          DestinationFolder="$(TargetDir)"
          OverwriteReadOnlyFiles="true" SkipUnchangedFiles="false" Condition="'@(FilesToCopy)' != ''" />
  </Target> 
```

与由原始 cmd.exe 执行的 PostBuildEvent 不同，BeforeBuild/AfterBuild 目标由托管代码运行，这确保了更健壮的执行、更好的可维护性和可追溯性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-25T12:50:58.117

可以像这样将尾部与`\`尾部分开：`"``.`

```
"$(TargetDir)." 
```

just 表示“`.`当前目录”（而不是`..`表示“当前目录上一级的目录”）；在这个问题也袭击我之前，我从来没有真正使用过它！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-23T08:26:39.420

我有另一种情况。在解决方案目录中运行一个工具，其中两个参数包含带空格的路径。这是我的解决方案：

`"$(SolutionDir)Tool.exe" --solution-dir "$(SolutionDir)\" --project-dir "$(ProjectDir)\"`

在初始命令上加上双引号，在所有路径上使用双引号并在每个路径的最后一个双引号之前使用反斜杠。

# c# - 在 soap 中读取 XML 配置文件

> ID：11587400
> 
> 赞同：2
> 
> 时间：2012-07-20T21:51:37.807
> 
> 标签：c#, soap, file-io

您好目前正在从事 ac#/soap/php 项目。soap 服务有一个 config.xml，其中包含在soap 服务中使用的某些选项和使用soap 服务的c# 程序。

如果我将它放在某个位置而不是从配置文件所在的位置读取它，它正在读取配置。仅供参考，我的项目是在单声道和 windows 下的 Linux 上运行。

我的肥皂服务在 linux 上运行，`/srv/www/htdocs/mywebsite/mysoapservice/Service.asmx`config.xml 位于此目录中。

在 Windows 中`c:\inetpub\wwwroot\mysoapservice\Service.asmx`，config.xml 位于此目录中。

当我在配置中阅读时，我没有提供文件的路径，我只是给它一个文件名，`config.xml`期望检索 asmx 文件所在的文件。但是在 linux 上它试图从 root 获取它，即配置文件位于 /config.xml 并从那里读取，我不记得配置文件认为它应该是的确切路径，忘记记下它，但它在 PC 深处的某个地方，而不是我运行服务的地方。

我试过使用`Directory.getCurrentDirectory() + "config.xml"`，但这不起作用，在 Linux 上似乎认为它是一个 unc 路径，我应该以 \server\share 的形式使用它，我不知道为什么它认为它是一个 unc 路径，不记得Windows上的错误。这将教会我不要在东西上做笔记。

我怎样才能让它从 asmx 文件所在的同一目录中读取配置文件。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:22:45.180

我相信你想做这样的事情：

```
 string applicationPath = HttpContext.Current.Server.MapPath(null);
  string configPath = Path.Combine(applicationPath, "config.xml"); 
```

# video - 无法加载图像。确保路径正确且图片存在

> ID：11587401
> 
> 赞同：0
> 
> 时间：2012-07-20T21:51:42.017
> 
> 标签：video, youtube, xhtml-1.0-strict, prettyphoto

在我的页面上，我有一个 YouTube 视频的缩略图作为图像，我想在用户单击图像后使用**prettyPhoto播放视频。**我怎样才能做到这一点？

这是我的图像代码：

```
<div class="video" id="videoPlaceHolder" style="position:relative;">
  <a rel="prettyPhotos" href="https://www.youtube.com/embed/<?php getFirstFeatureVideoURL(); ?>">
    <img style="background:url(<?php getFirstFeatureVideoThumbnail() ?>); background-repeat:no-repeat; background-size:cover;  -moz-background-size: cover;" src="/images/ytIndex_overlay.png" onClick="addPlayer();" />
  </a>
</div> 
```

php 函数`getFirstFeatureVideoURL`抓取并返回第一个视频的“正确”URL（我已经单独检查过，视频播放没有任何问题）。另一个调用的函数`getFirstFeatureVideoThumbnail`返回视频的缩略图。我已经准备好所有插件`prettyPhoto`，到目前为止，它可以完美地处理所有图像。但是，当我尝试通过单击图像播放此视频时，它给了我错误：

`Image cannot be loaded. Make sure the path is correct and the image exists`

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:02:17.583

它期望`href`是一个 URL。您不能在这样的 URL 中嵌入 PHP 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T07:31:19.950

您要获取的缩略图版本是什么。我猜您尝试检索标准清晰度缩略图或最大分辨率缩略图。这两个视频 ID 都不存在：Id_kGL3M5Cg

使用此工具检查它是否存在：[YouTube 视频信息生成器](http://www.techtweaker.com/tool/youtube-video-information-generator/?v=Id_kGL3M5Cg)

我得到了结果，标准清晰度缩略图不适用于此视频。最大分辨率缩略图不适用于此视频。

您可以使用 . 检查图像是否存在`get_headers`。查看本教程中代码的缩略图部分：[如何使用 PHP 获取 YouTube 视频信息](http://www.techtweaker.com/how-to-get-youtube-video-info-with-php/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T19:53:38.857

好的，所以我最终在我的 PHP 函数中生成了 < a > 和 < img > 标签，如下所示，这解决了我的问题....

```
function getFeatureVideo()
{
$xml = simplexml_load_file('https://gdata.youtube.com/feeds/api/playlists/A4F160EDF82713A2?v=2');
.
.
.
.
$media = $entry->children('http://search.yahoo.com/mrss/');

  $attrs = $media->group->player->attributes();
  $watch = $attrs['url'];

  $attrs = $media->group->thumbnail[1]->attributes();
  $thumbnail = $attrs['url'];

  $result .='<a rel="prettyVideos"  href="'.$watch.'">
                <img style="background:url('.$thumbnail.'); background-repeat:no-repeat; background-size:cover;  -moz-background-size: cover;" src="/images/ytIndex_overlay.png" onClick="addPlayer();" />
       </a> ';      

echo $result;                    
} 
```

# c# - MVC3 和 SSRS 报表查看器交互性

> ID：11587403
> 
> 赞同：1
> 
> 时间：2012-07-20T21:51:52.550
> 
> 标签：c#, asp.net-mvc-3, razor, reporting-services

我一直在尝试将 SSRS reportviewer 集成到我的 MVC 应用程序中。我遵循了几个关于如何设置数据源和设计报告的教程。但是，我正在尝试以`LocalReport`模式运行它，但我遇到了交互性问题。如果我尝试对列进行排序，则会出现错误。

如果我这样尝试：

```
<form id="RosterControl" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <rsweb:ReportViewer ID="reportViewer" runat="server" AsyncRendering="true" 
        Font-Names="Verdana" Font-Size="8pt" InteractivityPostBackMode="AlwaysAsynchronous" 
        WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt" Width="980px">
        <LocalReport ReportPath="Reports\Roster.rdlc" >
            <DataSources>
                <rsweb:ReportDataSource  DataSourceId="RosterDataSource" Name="Roster" />
            </DataSources>
        </LocalReport>
    </rsweb:ReportViewer>
</form>
<asp:ObjectDataSource ID="RosterDataSource" runat="server" 
    OldValuesParameterFormatString="original_{0}" SelectMethod="GetData" 
    TypeName="VirtualCare.Web.CbsDataSetTableAdapters.PatientTableAdapter">
</asp:ObjectDataSource> 
```

然后我得到这个错误：

```
Sys.WebForms.PageRequestManagerParserErrorException: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed 
```

如果我尝试通过改变`AsyncRendering="true"`和`InteractivityPostBackMode="AlwaysSynchronous"`

然后整个页面重新加载，数据不变。

在我看来，我使用 Razor 调用 ascx

```
@Html.Partial("RosterControl") 
```

我不确定我做错了什么。

任何帮助，将不胜感激。

# php - 为什么数组在php中为NULL？

> ID：11587405
> 
> 赞同：-1
> 
> 时间：2012-07-20T21:52:04.777
> 
> 标签：php, arrays

```
<?php    

class ffooo
{
    public $arr;

    function __construct()
    {
        $arr=array();
    }

    function add($val)
    {
        $arr[]=$val;
    }

    function get($ind)
    {
        return $arr[$ind];
    }
}

$cont=new ffooo();
$cont->add("derek",'chmo');
echo $cont->get(0);
var_dump($cont); 
```

任何人都可以解释为什么我的数组 $arr 在方法 add($val) 之后为 NULL 吗？我尝试在方法“add”中回显数组 $arr，并且在这个方法中 $arr 包含来值；但在另一种方法中它变成了NULL？什么是魔法？我不明白逻辑（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:54:29.440

因为它仅在本地定义。要使用类成员，您必须使用 $this;

```
$this->arr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:54:48.303

That's because you declare a variable `$arr` every time. And in every method it's just new, as functions have their own scope.

You need to set a property, like that: `$this->arr = array(...);`. Properties exist in object scope, so they are accessible from every method.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:54:50.380

You declared the function with one argument:

```
function add($val) {} 
```

But pass to it two ones. And why do you use local copies of the class property in every function? Correct your code before talking about magic :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:55:21.903

Use `$this->arr` instead of `$arr` in all methods' bodies.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T21:55:52.517

You forgot to use `$this`, please see the code below.

```
<?php    

class ffooo
{
    public $arr;

    function __construct()
    {
        $this->arr = array();
    }

    function add($val)
    {
        $this->arr[] = $val;
    }

    function get($ind)
    {
        return $this->arr[$ind];
    }
}

$cont=new ffooo();
$cont->add('derek');
echo $cont->get(0);
var_dump($cont); 
```

# javascript - 将鼠标悬停在列表中的项目上时显示菜单

> ID：11587407
> 
> 赞同：0
> 
> 时间：2012-07-20T21:52:13.953
> 
> 标签：javascript, html, css

`ul`我的网页导航栏上有一个列表，内容如下：

```
<ul id="nav">
<li><a href="index.htm" title="Home">Home</a></li>
<li><a href="project.htm" title="Project">Project</a></li>
<li><a href="sample.htm" title="Sample">Sample</a></li>
</ul> 
```

将鼠标悬停在`ul`列表上时，项目的颜色会发生变化。

```
ul#nav li a:link,ul#nav li a:visited {color:#333333;text-decoration:none;}
ul#nav li a:hover,ul#nav li a:active {color:#a61607;text-decoration:none;} 
```

但是，当用户将鼠标悬停在`sample`元素上时，我会显示一个图形菜单。菜单类似于以下内容（一个箭头图像和三个超链接）：

```
 hyperlink 1
Arrow image /_ hyperlink 2
            \  hyperlink 3 
```

将鼠标悬停在列表中的`sample`项目上时，如何以菜单形式显示此箭头图像和超链接`ul`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T09:07:52.077

这是一个小提琴，我认为它可以按您的需要工作。

[http://jsfiddle.net/Ne227/1/](http://jsfiddle.net/Ne227/1/)

# c# - DataGridView 数据绑定到列表 >>

> ID：11587408
> 
> 赞同：0
> 
> 时间：2012-07-20T21:52:25.977
> 
> 标签：c#, wpf, data-binding, wpfdatagrid

我正在尝试将我的 datagridview 的 itemssource 属性绑定到一个对象列表，这些对象的属性名称在运行时才知道。

代码当前编译但没有显示在列中（数据网格为我的列表中的每个项目显示一行，但每列中没有任何内容）

设置列绑定

```
foreach (KeyValuePair<string, string> pair in _columns)
{
    Microsoft.Windows.Controls.DataGridTextColumn textCol = new Microsoft.Windows.Controls.DataGridTextColumn();
    textCol.Header = pair.Key;
    textCol.Binding = new Binding(pair.Value);
    ItemListDataGrid.Columns.Add(textCol);
} 
```

硬编码列表示例：

```
List<List<KeyValuePair<string,string>>> itemSet = new List<List<KeyValuePair<string,string>>>();
List<KeyValuePair<string,string>> item1 = new List<KeyValuePair<string,string>>();
item1.Add(new KeyValuePair<string,string>("ACTION","ACTION"));
itemSet.Add(item1);
ItemListDataGrid.ItemsSource = itemSet; 
```

任何想法如何让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:09:20.480

我认为您要做的是实现一个 expando 对象：

[http://www.west-wind.com/weblog/posts/2012/Feb/08/Creating-a-dynamic-extensible-C-Expando-Object](http://www.west-wind.com/weblog/posts/2012/Feb/08/Creating-a-dynamic-extensible-C-Expando-Object)

也就是说，有关您正在寻找的更多信息将有助于回答您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:59:51.487

使用动态填充的 DataTable，我能够相对快速地解决这个问题。expando 对象也可以工作，但我只需要将对象加载到 datagridview 中进行选择，之后就不需要它们了。因此，我决定在这种情况下不使用 expando 对象。

# java - 无法验证用户是否是谷歌应用程序中的管理员

> ID：11587411
> 
> 赞同：0
> 
> 时间：2012-07-20T21:52:56.993
> 
> 标签：java, google-app-engine, gwt

我正在开发一个只有当你是管理员时才会加载的谷歌应用程序。这是我尝试做的一个例子。

```
public class MyAppEntryPoint implements EntryPoint {
    @Override
    public void onModuleLoad() {
         appUserServ = GWT.create(AppUserService.class);
         appUserServ.IsAdministrator(new AsyncCallback<Boolean>() {
        @Override
        public void onSuccess(Boolean isAdmin) {
            if(isAdmin) {
                LoadUI(); //Loads the site.
            }
        }
        @Override
        public void onFailure(Throwable caught) {
            //handle error
        }
    };
    }
} 
```

`AppUserService.IsAdministrator`呼叫`AppUser.IsAdministrator()`哪个呼叫`UserService.isUserAdmin()`。

当我尝试运行应用程序并以管理员身份登录时，我收到此错误：

```
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract boolean com.myapp.client.AsyncServices.AppUserService.IsAdministrator()' threw an unexpected exception: java.lang.VerifyError: Expecting a stackmap frame at branch target 38 in method com.myapp.UserService.AppUser.ValidUser()Z at offset 33
    ...
Caused by: java.lang.VerifyError: Expecting a stackmap frame at branch target 38 in method com.myapp.UserService.AppUser.ValidUser()Z at offset 33
    at com.myapp.server.AppUserServiceImpl.IsAdministrator(AppUserServiceImpl.java:26)
    ... 
```

有谁知道这个错误是什么意思或如何解决？

我也在谷歌 SDK 的 v1.7 上开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:25:10.450

当您说管理员时，您是指 Google App Engine 的管理员概念吗？如果是这样，您可以[在 app.yaml 中配置它](https://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml#Required_Login_or_Administrator_Status)并显着降低复杂性。例如：

```
handlers:

- url: /admin/*
  servlet: com.example.AdminServlet
  login: admin 
```

此示例将所有请求路由`/admin/*`到`AdminServlet`并要求用户在显示页面之前是管理员。

# google-chrome-extension - 打包的应用程序可以在 Chrome 网上应用店中使用吗？

> ID：11587412
> 
> 赞同：2
> 
> 时间：2012-07-20T21:53:03.200
> 
> 标签：google-chrome-extension, google-chrome-app

我刚刚偶然发现了新的 Chrome 打包应用程序页面 (http://code.google.com/chrome/extensions/trunk/apps/about_apps.html)

我真的非常想将它用于应用程序，例如 NOW。但是，要测试应用程序，您必须在 chrome 中手动启用实验性扩展。

我能否提交使用这些实验性扩展的应用程序，用户现在可以使用它们吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T01:46:14.823

一般来说，您可以打包您制作的任何应用程序并自行托管它；只需确保告诉您的用户设置适当的命令行标志以允许实验性 API ( `--enable-experimental-extension-apis`)。但是，网上应用店不接受任何使用实验性 API 的东西。从[`chrome.experimental`文档](http://code.google.com/chrome/extensions/experimental.html)：

> ...Chrome 网上应用店不允许您上传使用实验性 API 的扩展程序。

不过，请随时开始开发您的应用程序。运气好的话，当您完成开发时，您需要的 API 将是稳定的（希望它们不会发生*太大*变化）。有时实验性 API 可能会彻底消失，但我敢打赌，Google 在其打包应用程序页面上明确提及的 API 将继续存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T17:59:55.080

不，没有计划让 Chrome 网上应用店接受使用实验性 API 的应用程序。

目前，即使您没有在（新）Chrome 打包应用中使用实验性 API，您也无法发布它，因为新的 Chrome 打包应用处于开发者预览版中。

因此，计划是在我们确信它们足够稳定时将实验性 API 移出实验状态。希望当 CWS 开始接受新的 Chrome 打包应用程序时，今天的大多数实验性 API 将不再是实验性的。为了加快 API 稳定的过程，您对这些 API 的反馈非常有价值。如果您发现错误，请使用[http://crbug.com 。](http://crbug.com)

# php - AWS SDK for PHP 可以在不禁用 osx 上的 SSL 验证的情况下工作吗？

> ID：11587420
> 
> 赞同：3
> 
> 时间：2012-07-20T21:54:00.133
> 
> 标签：php, macos, curl, amazon-web-services, openssl

问题：尝试通过 aws sdk for php 与 s3 通信，您会得到：“cURL 错误：SSL 对等证书或 SSH 远程密钥不正常（cURL 错误代码 51）。”

通常建议在开发中禁用 ssl 验证。但是，同样令人讨厌的是，现在 sdk 会发出警告，指出禁用 ssl 验证是不安全的。我无法在我的开发环境中禁用 PHP 中的警告。

我有哪些选择？

[http://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)解决方案（除了第一个建议？！）需要修改sdk。

我已经通过 sdk_compatibility_test.php 确认我有“7.26.0 (OpenSSL/1.0.1c)”，而 isi 需要的是“7.15.0 或更高版本，带有 SSL”。此外，我已经安装了 php 的 openssl 模块，由 php info 确认。

我什至尝试将“certificate_authority”指向各种crt文件无济于事。通常会导致新的错误：“cURL 错误：SSL 证书问题：证书链中的自签名证书（cURL 错误代码 60）”

今年[的答案](https://stackoverflow.com/a/6400746/501061)似乎也没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:41:29.323

问题主要源于使用带有多个点的 s3 存储桶名称。

```
$s3instance->path_style = true; 
```

请参阅：[aws 论坛上的冗长讨论](https://forums.aws.amazon.com/thread.jspa?threadID=69108)

# c++ - 在 Windows 上使用 C++ 获取当前用户名

> ID：11587426
> 
> 赞同：21
> 
> 时间：2012-07-20T21:54:36.713
> 
> 标签：c++, windows, dev-c++

我正在尝试创建一个程序，该程序使用 C++ 在 Windows 上检索当前用户的用户名。

我试过这个：

```
char *userName = getenv("LOGNAME");
stringstream ss;
string userNameString;
ss << userName;
ss >> userNameString;
cout << "Username: " << userNameString << endl; 
```

除了“用户名：”外，没有输出任何内容。

获取当前用户名的最简单、最好的方法是什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-20T21:57:45.590

使用 Win32API[**`GetUserName`**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724432%28v=vs.85%29.aspx)函数。例子：

```
#include <windows.h>
#include <Lmcons.h>

char username[UNLEN+1];
DWORD username_len = UNLEN+1;
GetUserName(username, &username_len); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-31T14:02:32.643

更正了对我有用的代码：

```
TCHAR username[UNLEN + 1];
DWORD size = UNLEN + 1;
GetUserName((TCHAR*)username, &size); 
```

我正在使用 Visual Studio Express 2012（在 Windows 7 上），也许它与 Dev-Cpp 的工作方式相同

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T21:58:01.797

在 Windows 上使用**USERNAME**环境变量或[GetUserName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724432%28v=vs.85%29.aspx)函数

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-23T12:22:20.490

有用：

```
#include <iostream>
using namespace std; 

#include <windows.h>
#include <Lmcons.h>

int main()
{
TCHAR name [ UNLEN + 1 ];
DWORD size = UNLEN + 1;

if (GetUserName( (TCHAR*)name, &size ))
wcout << L"Hello, " << name << L"!\n";
else
cout << "Hello, unnamed person!\n";
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-09T08:58:13.350

万一`GetUserName(username, &username_len);`在使用 as 存储时不起作用`char[]`，您应该知道`GetUserName`可以将宏解析为`GetUserNameW`. 如果您使用 Windows API，您可能知道 和 之间的`W`区别`A`。`GetUserNameA`如果您使用`char[]`as buf ，使用将解决问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-13T19:01:14.003

通过使用`getenv()`功能：

```
char * user = getenv("username");
cout << string(user) << endl; 
```

如果要转换为字符串，请使用：

```
string userStr = string(user); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-07-20T22:08:17.637

您应该使用环境变量 USERNAME。

# php - 给用户一定的限制

> ID：11587427
> 
> 赞同：0
> 
> 时间：2012-07-20T21:54:36.883
> 
> 标签：php, symfony, acl

我试图弄清楚如何实现一个系统，当达到限制时限制用户执行某些操作。例如，假设我们有一个免费和高级帐户，假设免费用户只能在系统中创建 10 个帖子（或 db 中的 10 个记录），而高级用户没有这个限制。

在 symfony 2 中实现这一点的好策略是什么，我知道 ACL，但据我了解，它们只是控制对资源的访问。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:59:31.880

再次考虑使用 ACL + 分组用户。只需在`premium`和`regular`组之间移动用户。

您不仅可以使用 ACL 来控制资源，还可以控制动作内部的流程等。

看看这里有 12 票的答案示例：[Symfony2 ACL 与另一个标准相结合](https://stackoverflow.com/questions/7879173/symfony2-acl-combined-with-another-criteria)

# jquery - jQuery - 向标签添加/删除类的单选按钮

> ID：11587437
> 
> 赞同：2
> 
> 时间：2012-07-20T21:55:32.240
> 
> 标签：jquery

我知道这对许多人来说可能听起来太容易了，但我无法自己解决这个问题，我不明白我所缺少的。

我有一组成对组合的单选按钮。每对对应一个选择加入/退出部分。

我需要的是`.active`在`<label>`.

**这是我的基本 HTML：**

```
<td class="btn opt-in">
  <label>
    <input type="radio" name="radio1" value="radio1">
  </label>
</td>
<td class="btn opt-out">
   <label>
     <input type="radio" name="radio1" value="radio2">
   </label>
</td> 
```

**这是我的 JavaScript**（它部分工作）：

```
$('input:radio').click(function() {
    if ($(this).is(':checked')) {
        $(this).parent().addClass('active');
    } else {
        $(this).parent().removeClass('active');
    };
}); 
```

使用上面的脚本，我可以将类添加到标签中，但不能删除/切换它。

这是一个**[小提琴](http://jsfiddle.net/rzea/NNkeQ/2/)**供参考。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T21:58:23.690

如果你点击具体`input:radio`总是`checked`。

改用这个：

```
$('input:radio').click(function() {
  $('input:radio[name='+$(this).attr('name')+']').parent().removeClass('active');
        $(this).parent().addClass('active');
});​ 
```

`$('input:radio[name='+$(this).attr('name')+']')`选择与单击的名称相同的所有单选元素。阅读有关[jquery 选择器](http://api.jquery.com/category/selectors/)的信息。

小提琴：http: [//jsfiddle.net/NNkeQ/7/](http://jsfiddle.net/NNkeQ/7/)

要不就：

```
$('input:radio').click(function() {
    $('label:has(input:radio:checked)').addClass('active');
    $('label:has(input:radio:not(:checked))').removeClass('active');
});​ 
```

[http://jsfiddle.net/NNkeQ/18/](http://jsfiddle.net/NNkeQ/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:58:52.177

当您单击一个单选按钮时，不会将任何`click`事件发送到刚刚变为*未选中*的那个。

您需要从同一组中找到其他单选按钮并从中删除`active`类。

如果每个组中的所有单选按钮共享一个父级（即表格行），这将是最简单的，例如：

```
$(this).closest('td').siblings().find('.active').removeClass('active'); 
```

# heroku - I'm getting an error getting the heroku cli properly installed

> ID：11587442
> 
> 赞同：0
> 
> 时间：2012-07-20T21:55:59.783
> 
> 标签：heroku, installation

I installed heroku using the instructions on the heroku website. When I run heroku login (or any other heroku command, I get the output below). The directory `/home/jsltaic/.rvm/rubies/ruby-1.9.3-p194/lib` does not exist which I suspect is part of the problem.

```
jsltaic@Ubuntu1204:~$ heroku login
/home/jsltaic/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- readline (LoadError)
    from /home/jsltaic/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/gems/heroku-2.29.0/lib/heroku/command/run.rb:1:in `<top (required)>'
    from /home/jsltaic/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/jsltaic/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/gems/heroku-2.29.0/lib/heroku/command.rb:15:in `block in load'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/gems/heroku-2.29.0/lib/heroku/command.rb:14:in `each'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/gems/heroku-2.29.0/lib/heroku/command.rb:14:in `load'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/gems/heroku-2.29.0/lib/heroku/cli.rb:24:in `start'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/gems/heroku-2.29.0/bin/heroku:16:in `<top (required)>'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/bin/heroku:19:in `load'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/bin/heroku:19:in `<main>'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/jsltaic/.rvm/gems/ruby-1.9.3-p194@global/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:09:53.210

First try to uninstall heroku gem which causes conflicts with CLI

```
gem uninstall heroku 
```

Than try if the heroku CLI works, if it doesnt install it again following instructions on this page [https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)

# ios - iTunes Connect 支持 URL 可以是一个简单的 Tumblr 博客吗？

> ID：11587445
> 
> 赞同：3
> 
> 时间：2012-07-20T21:56:13.403
> 
> 标签：ios, app-store-connect

如果这个问题的答案是一个谷歌搜索，我很抱歉——我找不到它。

我没有意愿或时间为我将要提交的 iOS 应用程序建立一个网站。有谁知道 Apple 是否会接受`<myappname>.tumblr.com`专门用于我的应用程序的简单 Tumblr 博客（）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T22:02:42.003

这是关键点：

> 您的支持 URL 必须指向实际的支持联系信息，以便您的客户可以就应用问题、一般反馈或功能增强请求与您联系。

因此，请确保您的链接包含此信息。

# django - "Add New" to foreign key field in django modelform

> ID：11587450
> 
> 赞同：7
> 
> 时间：2012-07-20T21:56:34.977
> 
> 标签：django, django-forms

I'm pretty new to this, apologies if i'm unclear....

running django, with bootstrap, and i've been fiddling with django-bootstrap. BootstrapModelForm is pretty cool, i didn't include the django-bootstrap stuff in my example, but i though i should note.

I have models:

```
class spam(models.Model):
   name = models.CharField()

class Eggs(models.Model):
   spam = models.ForiegnKey('spam') 
```

I use a modelform,something like:

```
class EggsForm(forms.ModelForm):
   meta:
      model=Eggs 
```

EggsForm allows selection of which spam will be referenced by eggs. I noticed the admin interface has a cool way to either select or add another egg.

How can i get similar functionality into my create form?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:27:45.700

为什么不为此使用标准表格（而不是 ModelForm）？添加“添加新”作为额外选项，并在表单的 clean() 方法中捕获它，然后您应该在其中创建新对象、重定向到另一个表单等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T20:06:02.003

有点晚了，但我在寻找解决方案并进行更多互联网冒险时遇到了这个 SO 问题，我发现此链接上的说明非常好，而且确实有人问： http: [//www.hoboes.com /Mimsy/hacks/replicating-djangos-admin/](http://www.hoboes.com/Mimsy/hacks/replicating-djangos-admin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:23:51.773

在您的模板中，您可以添加一个新（或“+”）按钮，该按钮可以重定向或显示弹出窗口或类似的显示另一个表单以添加新的`Egg`.

# css - 以下 CSS 类定义有什么区别？

> ID：11587451
> 
> 赞同：4
> 
> 时间：2012-07-20T21:56:36.510
> 
> 标签：css, css-float, anchor

我正在阅读制作基于 CSS 的水平下拉菜单的教程，我注意到锚元素 ( `<a>`) 设置为 float:left 和`display:block`

我想知道这是做什么的？因为，当您添加`display:block`到内联元素时，您会注意到差异，但是当您`float:left`再次添加时，几乎就像不添加任何其他内容一样。只有两个连续的内联元素之间的小空格会消失`float:left`。

所以基本上我想知道的是，当几个锚元素一个接一个地放置时，以下类之间有什么区别：

```
a.one {
    display:block;
    float:left; 
}​

a.two {
    float:left; 
}​

a.default { 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:03:45.983

浮动的元素在盒子模型（即宽度、高度、边距）方面自动表现得像`block`元素（参见[W3C 定义](http://www.w3.org/TR/CSS2/visuren.html#float-position)）。因此，规则 1 和 2 是等价的。`display`在大多数情况下，浮动和指定是多余的（或者在这种情况下会产生误导）。

规则 3 不同，因为该`a`元素是`inline`默认的。

# ruby-on-rails-3.2 - 对于带有 RSpec 2.10 的 Rails 3.2 引擎，所有路由示例都失败

> ID：11587463
> 
> 赞同：8
> 
> 时间：2012-07-20T21:57:34.760
> 
> 标签：ruby-on-rails-3.2, rspec2, rspec-rails, rails-engines

我已经以[正常方式](http://edgeguides.rubyonrails.org/engines.html#generating-an-engine)创建了一个 Rails 引擎，安装了 RSpec，并为模型生成了一个脚手架，但我无法让任何路由规范通过。

这是一个例子：

```
describe Licensing::LicensesController do
  it 'routes to #index' do
    get('/licensing/licenses').should route_to('licensing/licenses#index')
  end
end 
```

我在这样的虚拟应用程序中运行示例：

```
$ cd spec/dummy
$ rake spec
/Users/brandan/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -S rspec ../routing/licensing/licenses_routing_spec.rb
F

Failures:

  1) Licensing::LicensesController routes to #index
     Failure/Error: get('/licensing/licenses').should route_to('licensing/licenses#index')
       No route matches "/licensing/licenses"
     # /Users/brandan/repos/licensing/spec/routing/licensing/licenses_routing_spec.rb:5:in `block (2 levels) in <top (required)>'

Finished in 0.04345 seconds
1 example, 1 failure 
```

引擎已正确安装在虚拟应用程序中：

```
# spec/dummy/config/routes.rb
Rails.application.routes.draw do
  mount Licensing::Engine => "/licensing"
end 
```

我可以进入虚拟应用程序并启动控制台并获得该路线就好了：

```
1.9.3p194 :001 > app.get('/licensing/licenses')
  Licensing::License Load (0.3ms)  SELECT "licensing_licenses".* FROM "licensing_licenses" 
200
1.9.3p194 :002 > app.response.body
"<!DOCTYPE html>..." 
```

虚拟应用程序和 RSpec 之间存在一些差异，我无法弄清楚它是什么。我发现了几篇声称可以解决这个问题的文章，但没有一篇有帮助，其中一些是特定于 Rails 3.1 的：

*   [Ryan Bigg 关于生成和测试引擎的文章](http://reinteractive.net/posts/2-start-your-engines)
*   [Matthew Ratzloff 关于在 Rails 3.1 中测试引擎路由的文章](http://www.matthewratzloff.com/blog/2011/09/21/testing-routes-with-rails-3-1-engines/)
*   [Stefan Wienert 关于可安装发动机的文章](http://stefanwienert.net/blog/2012/02/15/rails-mountable-engine-useful-starting-point-with-rspec-factory-girl-and-friends/)
*   [关于在 Rails 3.2 中测试路由助手的邮件列表消息](http://www.mail-archive.com/rubyonrails-talk@googlegroups.com/msg106156.html)

有人在 Rails 3.2/RSpec 2.10 中解决了这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T15:03:39.190

**更新 (2013-10-31)**

RSpec 2.14 现在[完全支持引擎路由](https://www.relishapp.com/rspec/rspec-rails/v/2-14/docs/routing-specs/engine-routes)：

```
module MyEngine
  describe ExampleController do
    routes { MyEngine::Engine.routes }
  end
end 
```

将其添加到所有路由规范中：

```
# spec/spec_helper.rb
config.include Module.new {
  def self.included(base)
    base.routes { Reportr::Engine.routes }
  end 
}, type: :routing 
```

* * *

到目前为止，我能找到的最佳解决方案是明确设置将在测试期间使用的路由集：

```
RSpec.configure do |config|
  config.before(:each, type: :controller) { @routes = Licensing::Engine.routes }
  config.before(:each, type: :routing)    { @routes = Licensing::Engine.routes }
end 
```

然后我不得不重写我的路由示例以省略命名空间：

```
it 'routes to #index' do
  get('/licenses').should route_to('licensing/licenses#index')
end 
```

这看起来有点像黑客，但它确实有道理。我没有测试 Rails 是否能够在特定路径上安装引擎。我只是在测试我的引擎是否正确设置了自己的路线。不过，我宁愿不必覆盖实例变量来实现它。

以下是关于这个主题的另外几个很好的主题：

*   [如何在 Rails 3.1 可安装引擎中测试路线](https://stackoverflow.com/questions/7691594/how-to-test-routes-in-a-rails-3-1-mountable-engine)
*   [如何在 rspec 中编写 Rails 3.1 引擎控制器测试？](https://stackoverflow.com/questions/5200654/how-do-i-write-a-rails-3-1-engine-controller-test-in-rspec)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-11T03:10:57.627

我认为您需要明确告知 RSpec 您正在使用命名空间 Rails 路由。例如，

```
# :use_route => ENGINE_NAMESPACE
:use_route => 'licensing' 
```

此外，为什么不像这样简化 RSpec 控制器测试的编写，

```
describe Licensing::LicensesController do
  it 'GET index' do
    get :index, use_route: 'licensing'
  end
end 
```

这是我做的 RSpec 控制器的链接， [https://github.com/westonplatter/questionnaire_engine/tree/engine/spec/controllers](https://github.com/westonplatter/questionnaire_engine/tree/engine/spec/controllers)

# ipad - UIViewController Containment Basics - 如何在两个并排的 ViewController 上显示全屏 ViewController

> ID：11587471
> 
> 赞同：3
> 
> 时间：2012-07-20T21:58:01.467
> 
> 标签：ipad, ios5, uiviewcontroller

我有一个关于 VC 遏制的类似问题，它解决了我想要的最终结果，但我提出这个假设性问题是为了确定遏制的基本概念。

我有一个包含 viewController B 和 viewController C 的主控制器容器 (A)。ViewController B 占据屏幕的一半，而 C 占据另一半。

当我按下 VC B 上的按钮时，我希望另一个视图控制器 (D) 占据整个屏幕。

我有显示“拆分”控制器 B 和 C 的代码，但需要知道如何让 viewController D 显示。

我的问题：什么代码会让 viewController D 显示，从哪里调用它？

我花了几个小时寻找涉及这种模式的问题，但无济于事。我假设 VC A 将负责显示它（否则它无法填满整个屏幕），并且 VC B 上的按钮将涉及使用 parentViewController 的 VC A - 但我无法让它工作.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:07:59.497

出于可重用性的原因，视图控制器 B 和 C（和 D）应该独立于容器视图控制器运行。这样，它们可以在容器视图控制器的内部和外部使用。

使用委托可以实现您想要的。在视图控制器 B 上创建一个委托属性，并将您的容器视图控制器（视图控制器 A）设置为视图控制器 B 的委托。按下按钮时，向代表 ( `[self.delegate buttonPressed]`) 发送一条消息，然后 B 将收到该消息。现在 B 可以添加另一个子视图控制器 (D)，它可以以您想要的任何方式呈现。

使用 parentViewController 可能有效，但如果您决定单独使用该视图控制器，则此属性可能为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:54:36.587

控制器 B 应该继续呼叫`-presentViewController:animated:completion:`。`self`此方法将从层次结构中返回的第一个视图控制器模态地呈现一个视图控制器，`YES`从`-definesPresentationContext`接收消息的控制器开始。如果您希望控制器的视图相对于控制器 A 是全屏的，请覆盖该方法并返回`YES`。

从[`UIViewController`文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/definesPresentationContext)中：

> `@property(nonatomic, assign) BOOL definesPresentationContext`
> 
> 当一个视图控制器被呈现时，iOS 从呈现视图控制器开始并询问它是否想要提供呈现上下文。如果呈现视图控制器不提供上下文，则 iOS 会询问呈现视图控制器的父视图控制器。iOS 向上搜索视图控制器层次结构，直到视图控制器提供表示上下文。如果没有视图控制器提供上下文，则窗口的根视图控制器提供表示上下文。
> 
> 如果视图控制器返回 YES，那么它会提供一个表示上下文。由视图控制器的视图覆盖的窗口部分决定了呈现的视图控制器视图的大小。此属性的默认值为 NO。

# android - 我在 google play 上看不到我的应用程序

> ID：11587475
> 
> 赞同：8
> 
> 时间：2012-07-20T21:58:12.440
> 
> 标签：android, google-play

我刚刚发布了我的申请（1 小时前）。[而且我在尝试手动链接https://play.google.com/store/apps/details?id=com.combucalc](https://play.google.com/store/apps/details?id=com.combucalc)的任何地方都找不到它，但我什么也没得到。

有什么想法吗？我在哪里可以邮寄它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T21:59:47.267

通常，应用程序可用需要几个小时。对于我的上一个应用程序，它花了 9 个小时才上线。确实很长……您的应用程序很快就会上线。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-20T22:18:55.750

您很可能需要再等几个小时。这个过程过去更快。大约一年前，我记得发布了一个应用程序，它在不到一个小时内就显示出来了。几个月前，我发布了另一个应用程序，花了大约 5 个小时才出现。

还值得注意的是，如果您的应用标题中有任何标点符号（很可能是逗号），您可能需要尝试在引号中搜索应用标题。例如，一位朋友最近发布了 Run, Tweet, Run。使用查询 Run、Tweet、Run 进行搜索花了一个多星期才成功返回。但是，如果您在标题周围使用引号明确搜索，例如“Run, Tweet, Run”，您会获得成功。

祝你好运。一会儿就起来了 请记住，谷歌拥有所有主要应用商店中最快的发布流程：苹果大约需要一周，亚马逊需要 2-4 天，微软需要 3 天以上。所以几个小时真的没那么糟糕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T22:00:30.107

这需要一点时间。它曾经快得多（即时），但最近大约需要 2-3 小时。稍等片刻，它就会出现。

# sql - Cannot update multiple records in table which has a trigger configured

> ID：11587477
> 
> 赞同：0
> 
> 时间：2012-07-20T21:58:25.633
> 
> 标签：sql, triggers

I run the following query:

```
update XFolder
set isdeleted = 1
where XFolder.XFolderID in (select FundRaiseXFolder.XFolderID from FundRaiseXFolder where FundRaiseID = 6233) 
```

I am getting following error:

```
Msg 512, Level 16, State 1, Procedure Fippex_UpdateXFolderCacheTableForPrivatePublic, Line 20
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. 
```

This used to work fine until I added trigger on table xfolder.

# android - addView 订单不起作用

> ID：11587483
> 
> 赞同：0
> 
> 时间：2012-07-20T21:59:03.747
> 
> 标签：android, android-layout, android-view

我按该顺序将 a `cameraView`、 a`glSurfaceView`和 an添加`ImageView`到 a `relativeLayout`，但结果是它们从上到下排序（`cameraView`, `imageView`, `glSurfaceView`）有什么具体原因吗？是因为`glSurfaceView`内部重绘了它的自我吗？

添加的代码片段：

rel.addView(glView);

```
 RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,1);
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        params.rightMargin = 20;
        // add Camera to view 
        rel.addView(camPreview, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        rel.addView(glView);
        rel.addView(imageView,params); 
```

问题真的是..我怎么能保证 imageView 总是在最前面

我认为该`GLSurfaceView's` `onDrawFrame`方法将`GlSurfaceView`置于视图列表的顶部，因此我从 onDrawFrame 方法中添加了对 mainActivity 上的公共方法的回调，如下所示：

```
public void ajustOverlay(){
        imageView.bringToFront();
        Log.v("parent: ", "ajust overlay");
    } 
```

这似乎仍然没有保持`imageView`领先地位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:34:29.813

您在没有足够规则的情况下为 RelativeLayout 添加视图，这可能是结果不是您期望的原因。例如`RelativeLayout.BELOW`，必须定义规则以确保一个视图低于另一个视图。

首先，您应该尝试在 XML 中构建您的布局，以便能够在 Eclipse 上查看结果。然后以编程方式应用文件中的所有规则或轻松构建 XML 层次结构，这要归功于`LayoutInflater`. 如果可以的话，我真的建议你[`LayoutInflater`](http://developer.android.com/reference/android/view/LayoutInflater.html)解决方案，原因有很多（维护、重新格式化、多屏处理……）。

您还应该阅读有关 RelativeLayout 的完整文档以正确格式化：[here](http://developer.android.com/guide/topics/ui/layout/relative.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T15:28:19.123

`LinearLayout`我在尝试将三个常规对象并排放置在 parent 时遇到了相同的排序问题`RelativeLayout`。要解决此问题，您只需在调用该`addView`方法时再添加一个参数即可。它是三的第二个参数，它表示您希望添加视图的顺序的索引。

所以这应该适合你：

```
rel.addView(camPreview, 0, camParams);
rel.addView(glView, 1, glParams);
rel.addView(imageView,2, imageParams); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T14:15:27.457

好吧，在尝试了上面的解决方案和其他各种解决方案之后，我的头撞到混凝土近一年了，我终于让它工作了..关键是在添加 glView 之前添加以下行

```
glView.setZOrderMediaOverlay(true);
rel.addView(camPreview, camParams);
rel.addView(glView, glParams);
rel.addView(imageView, imageParams); 
```

# scala - 使用 scala 2.10 反射 API 获取方法参数类型

> ID：11587484
> 
> 赞同：3
> 
> 时间：2012-07-20T21:59:06.690
> 
> 标签：scala, reflection

使用 Java 反射 API 来获取我们可以简单使用的方法的参数类型列表`getParameterTypes`。

这是一个例子：

```
scala> classOf[String].getMethods.head.getParameterTypes

res8: Array[Class[_]] = Array(class java.lang.Object) 
```

使用新的 Scala 2.10 反射 API 获得相同结果的最佳实践是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T23:01:33.213

这更困难，因为 Scala 反射做得更多，需要更多。例如：

*   类型不会被删除。类被删除，但类型不被删除。
*   Scala 支持命名参数，因此您需要参数的名称。
*   Scala 有没有参数列表的方法。

所以，考虑到这一切，这就是你如何做到的。首先，获取方法：

```
val stringMethods: Iterable[MethodSymbol] = typeOf[String].members.collect { 
  case m if m.isMethod => m.asMethod 
} 
```

Scala 反射还没有提供列出特定类型成员（方法、字段、内部类等）的方法，因此您需要使用通用`members`方法。

该方法适用于所有类型的成员，它`members`返回一个可迭代的 of `Symbol`，这是所有符号的最大公分母，因此您需要强制转换`MethodSymbol`为将生成的符号视为方法。

现在，假设我们有一个`MethodSymbol`，并且我们想要参数的类型。我们可以完成这个：

```
method.paramss 
```

# java - 如何创建一个 JSON 文件，使用 Java 从数据库中提取数据？

> ID：11587485
> 
> 赞同：0
> 
> 时间：2012-07-20T21:59:06.903
> 
> 标签：java, json

我正在开发平板电脑网络应用程序项目，但我不知道如何创建 JSON 文件来获取 Java 连接到数据库的信息。信息正在通过存储过程和数据返回 with`List<Object obj>`或 with `ResultSet`。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:03:38.530

您应该使用一个名为[json-simple的库](http://code.google.com/p/json-simple/wiki/EncodingExamples#Example_1-1_-_Encode_a_JSON_object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:17:46.917

使用[Jackson 库](http://wiki.fasterxml.com/JacksonHome)将任何 Java 模型对象转换为 JSON。

```
ObjectMapper mapper = new ObjectMapper();
mapper.writeValue(new File("c:\\modelObj.json"), modelObj); 
```

或者

```
String s = mapper.writeValueAsString(modelObj); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:19:27.633

一个 json 文件是文本 - 所以就像你检索任何字符串一样检索。如果您使用的是结果集，则可以使用[ResultSet.getString()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#getString%28int%29)。然后，您可能希望使用 json 解析库将其反序列化为域对象或某种形式的 json 对象。

有很多不同的库可以做到这一点，例如[Jackson](http://jackson.codehaus.org/)或[Gson](http://code.google.com/p/google-gson/)。我个人更喜欢 gson - 可能只是因为我更熟悉它并且我发现 API 非常简单。

# ios - iOS 设计此逻辑/工作流程涉及 CoreLocation、Web 服务调用、加载 UI

> ID：11587499
> 
> 赞同：1
> 
> 时间：2012-07-20T22:00:05.833
> 
> 标签：ios, xcode, model-view-controller, user-interface, core-location

我已经解决这个问题有一段时间了，我需要一些帮助来设计我的逻辑。

我想按此顺序做三件事 1) 获取用户的位置 2) 使用该用户的位置调用 Web 服务 3) 使用结果加载用户界面

我希望它的设计方式使我可以轻松地刷新结果，因此如果用户按下刷新按钮，我会再次执行步骤 1-3。

现在，我这样做如下。这是我在 ViewController 中的代码。

```
- (void) viewDidLoad {
    //initialize CLLocationManager
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    self.locationManager.delegate = self;
    [self.locationManager startUpdatingLocation];

- (void) locationManager: (CLLocationManager *)manager 
     didUpdateToLocation: (CLLocation *)newLocation
            fromLocation:(CLLocation *)oldLocation
{
    if (oldLocation!= nil) { // make sure to wait until second latlong value
        [self setLatitude:newLocation.coordinate.latitude];
        [self setLongitude: newLocation.coordinate.longitude];
        [self.locationManager stopUpdatingLocation];
        self.locationManager.delegate = nil;
        [self makeUseOfLocationWithLat:[self getLatitude] andLon:[self getLongitude]];
}

- (void) makeUseOfLocationWithLat: (double) lat andLon: (double) lon {
    // call web service
    [self loadUI];
}

- (void) loadUI {
     // loads the user interface
} 
```

**如果我错了，请纠正我，但我的设计真的很糟糕。它根本不是模块化的，每种方法都是相互关联的。此外，我在 ViewController 中进行密集的 Web 服务调用，而不是在任何模型类中。你如何正确设置它？**我遇到的主要问题之一是......我不知道我的纬度和经度变量何时获得它们的值。如果我不从我的委托方法中调用 makeUseOfLocation ，那么我最终会调用 makeUseOfLocation 并使用**latitude 和 longitude 的 nil 值**。

我已经为我的位置管理、NSKeyValueObserving 协议、dispatch_queues、NSOperations 研究了单例，但我是在 iOS 上开发的新手，无论我尝试什么，我都会陷入困境。请让我知道您对如何设置的想法。

谢谢你的时间，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:32:40.283

如果您真的想将其分开，作为简单的第一步，我将执行以下操作：

*   创建一个新类，例如 LocationTracker
*   使 LocationTracker 成为 CLLocationManager 的委托，可能在它的 init 方法中
*   让 LocationTracker 订阅 NSNotification “myapp.location.refresh”
*   让您的 ViewController 订阅“myapp.location.updated”
*   当 CLLocationManager 提供 didUpdate 时，发布“myapp.location.updated”
*   按下刷新按钮时，发布“myapp.location.refresh”
*   当通知“myapp.location.refresh”时，强制更新

这会在您的位置跟踪类和控制器之间创建一个小协议。NSNotification 文档非常好，它们会让你到达那里。

您可以让控制器拥有实例或应用程序委托。我不认为单身人士真的那么必要。

您还可以使用键值观察或协议/委托类型设置，它们中的任何一个都可以工作，因为它们基本上都是相同的模式（观察者）。

# hibernate - 泛型类中的@EmbebedId

> ID：11587500
> 
> 赞同：2
> 
> 时间：2012-07-20T22:00:14.460
> 
> 标签：hibernate, generics, composite-primary-key

我用泛型创建了一个 MyCompositeKey 类：

```
class MyCompositeKey<T> {
    T compositeId0;
    Integer compositeId1;
    Integer compositeId2;
} 
```

所以我可以在许多具有相同复合键的表中使用它，只改变类型：

```
class Table1<Integer> {
    @EmbebedId
    MyCompositeKey<Integer> compositeId;
    //other attributes
}
class Table2<String> {
    @EmbebedId
    MyCompositeKey<String> compositeId;
    //other attributes
}
//... 
```

问题是如果我使用我的课程：

```
class MyId {
    Integer id0;
    Integer id1;
}
class Table3<MyId> {
    @EmbebedId
    MyCompositeKey<MyId> compositeId;
    //other attributes
} 
```

Hibernate 尝试在 Table3 中找到不存在的列“compositeId0”（我的表 3 具有复合键：id0、id1、compositeId1、compositeId2）。我怎样才能做到这一点？

PS：如果我将@EmbeddedId 放在“MyCompositeKey.compositeId0”中适用于我的班级，但不适用于 Integer、Long、String... 因为 Hibernate 试图找到列“value”。

# websphere - 无法在 WebSphere Application Server 7 中启动侦听器端口 XXXXXXXX

> ID：11587503
> 
> 赞同：1
> 
> 时间：2012-07-20T22:00:34.823
> 
> 标签：websphere, listener, websphere-7

**错误：**

```
Listener port SonicLogQCF.CIILog could not be started. 
```

**缺少选项卡**（运行时）

当我注意到其他工作的应用程序服务器侦听器端口时，我可以看到两个选项卡，一个标题为**Configuration**，另一个标题为**Runtime**。（ 如下所示 ）

![在此处输入图像描述](../Images/740d0fc72191dad912b95e08fa3ceb5b.png)

但是，在侦听器端口不起作用时，我只能看到一个标题为“**配置”的选项卡**

![在此处输入图像描述](../Images/54cf716aba602d5c72af573bbeeeec1d.png)

## -

## -

## -

-

**添加更多细节**（根据 Manglu ）：

例如，我有一个奇怪的情况

1.  名为“ABC”的应用程序*具有*用于日志和跟踪的运行时选项卡，但*没有*用于侦听同一应用程序端口的运行时选项卡 -**不工作**

2.  名为“XYZ”的应用程序*没有*日志、跟踪和侦听端口的运行时选项卡 -**不工作**

3.  名为“QWE”的应用程序*具有*日志和跟踪和侦听端口的运行时选项卡 -**工作**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:26:00.683

缺少运行时选项卡通常意味着服务器**未运行**或**Dmgr 无法获取服务器**（通过 SOAP 或 RMI 内部通信调用）。

控制台的其他部分（例如跟踪部分）是否提供运行时选项卡？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:10:23.123

终于能够解决问题，但没有根本原因的答案。

```
Application servers > "Application" 
```

配置（这是选项卡）

![在此处输入图像描述](../Images/974380b20c6f04325c90d83a1635cf93.png)

**取消勾选**“根据需要启动组件”如下图

![在此处输入图像描述](../Images/5779082e6f5eb91abb95838802df8eb5.png)

```
Apply --> Ok ---> Save 
```

重新启动服务器，您应该会看到所有侦听器端口**正在运行**

# delphi - Delphi中的连接字符串？

> ID：11587506
> 
> 赞同：0
> 
> 时间：2012-07-20T22:00:37.980
> 
> 标签：delphi, delphi-7, adoconnection

我正在尝试在启动时为 ADOConnection 设置 ConnectionString。目前我正在使用这段代码：

```
ADOConnection1.ConnectionString := 'Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\x.mdb;Persist Security Info=False;'; 
```

唯一的问题是，当我编译（以及访问冲突）时，我得到一个带有消息'身份验证失败'的“EOLeException”。我相信它不会那么困难，因为连接字符串是直接从对象检查器中复制出来的（在对象检查器中正常输入时效果很好。）我的代码当前驻留在 FormCreate 上。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:16:15.533

如果它发生在您按下运行时，它发生在**运行时**，而不是编译时。您仍然提供很少的信息来尝试帮助您。

确保您已打开调试（项目|选项|编译器，检查调试选项）。在导致异常的行上设置断点。按`F9`运行您的应用程序。当断点发生时，将鼠标指针放在`ADOConnection1`变量上。它告诉你什么？最有可能的是，该变量是`nil`，这意味着它还没有被创建。

你应该避免在事件中做任何你不需要做的`FormCreate`事情。访问表单上的项目的任何事情都应该在其中完成`FormShow`，以便表单有时间首先完全创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T09:50:19.770

好吧，如果您的 ADOConnection 与您的其他数据集组件一起位于数据模块中，如果 MainForm在您的数据模块**之前**创建，您将在连接时看到访问冲突。

这可能不是问题，但很容易检查。

要解决，请转到菜单项目|选项并在列表中选择“表格”。“自动创建表单”列表框给出了在程序加载时创建的表单，以及它们的创建顺序。选择数据模块条目并将其拖到列表顶部。

祝你好运。

# jquery - .blur 和 .onblur 在 chrome 中

> ID：11587507
> 
> 赞同：2
> 
> 时间：2012-07-20T22:00:38.090
> 
> 标签：jquery

更新不工作--- [http://jsfiddle.net/xvepL/4/](http://jsfiddle.net/xvepL/4/)让我有点发疯！Chrome 不使用 .blur 仅适用于 .onblur 但其他浏览器使用 .blur 有没有办法解决这个问题？这两种方式也不适用于选择列表？

没有小提琴，因为它的浏览器特定

```
/* Big Search Box Leave */
    $(".searchbox").onblur(function() {
    var searchbox = this,
        searchbox_val = $.trim( this.value );
    if (searchbox_val.length > 0) {
        $(searchbox).addClass("blur");
        return true;
    } else {
        $(searchbox).removeClass("blur");
        return false;
    }
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:07:06.733

`$(".searchbox").onblur`是不正确的。 `.onblur()`不是 jQuery 函数。另一方面，[`.blur()`](http://api.jquery.com/blur/)是。

```
$(".searchbox").blur(function () {
    var searchbox = this,
        searchbox_val = $.trim(this.value);
    if (searchbox_val.length > 0) {
        $(searchbox).addClass("blur");
        return true;
    } else {
        $(searchbox).removeClass("blur");
        return false;
    }
}); 
```

演示： http: [//jsfiddle.net/xvepL/2/](http://jsfiddle.net/xvepL/2/)（在 Chrome 中运行良好）

注意：如果您处理的是 DOM 元素而*不是*jQuery 对象`.onblur`，则为属性名称。

 *```
document.getElementsByClassName('searchbox').onblur = function(){
}; 
```*

# iphone - 如何使 UIActivityIndi cator 居中？

> ID：11587513
> 
> 赞同：6
> 
> 时间：2012-07-20T22:00:59.063
> 
> 标签：iphone, ios, xcode, ios5

已解决：检查以下问题的解决方案。

![在此处输入图像描述](../Images/cdffbd497625241e6d4779440215e548.png)

嘿，所以，

我无法将 UIActivityIndi​​cator 置于视图中心。正如您在此处看到的，它垂直向下比应有的位置稍远。我拥有的是一个 UIScrollView，它后来添加了一个 UIImage 子视图。在 UIImage 加载之前，我有这个 UIActivityIndi​​cator 来显示图像正在加载。

```
- (void)viewDidLoad
{

    [super viewDidLoad];
    self.scrollView.backgroundColor = [UIColor blackColor];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]       initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.center = self.view.center;

    [spinner startAnimating];
    [self.view addSubview:spinner]; 
```

关于如何获得中心 CGPoint 并将 UIActivityIndi​​cator 设置在那里的任何想法？我不确定为什么`self.view.center`不起作用。

提前致谢。

编辑：我必须考虑导航栏和标签栏的高度。我必须添加的代码是：

```
float navigationBarHeight = [[self.navigationController navigationBar] frame].size.height;
float tabBarHeight = [[[super tabBarController] tabBar] frame].size.height;
spinner.center = CGPointMake(self.view.frame.size.width / 2.0, (self.view.frame.size.height  - navigationBarHeight - tabBarHeight) / 2.0); 
```

![在此处输入图像描述](../Images/6c760219d44426dab2ea905abc8ea0a7.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T22:35:57.313

两个问题：

1.  首先， self.view.center 是当前视图框架在其父框架上的中心。如果你想要当前视图的中心，你想要`CGPointMake(self.view.frame.size.width / 2.0, self.view.frame.size.height / 2.0);`

2.  其次，您当前的视图不包括导航栏，因此您将其置于导航栏下方的屏幕空间的中心。这也会使它看起来更低。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-03T20:34:11.040

**迅速**

由于导航栏和标签栏，我遇到了同样的问题。要解决此问题，请将以下代码放入您的 loadView() 或您调用活动指示器的任何位置以开始动画：

```
let navigationBarHeight = self.navigationController?.navigationBar.frame.height
let tabBarHeight = super.tabBarController!.tabBar.frame.height
YourActivityIndicator.center = CGPointMake(self.view.frame.size.width / 2.0, (self.view.frame.size.height - navigationBarHeight! - tabBarHeight) / 2.0) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T22:18:32.027

使用 spinner.center = self.scrollView.center; 反而

试试这个

spinner.center = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T22:05:22.683

我不确定到底发生了什么，但也许你的 UIScrollView 比屏幕高？您可以尝试打印 UIView 的大小以确定是否在屏幕范围内。也许 UIActivityIndi​​cator 位于 UIView 的中心（而不是屏幕的中心）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-21T06:06:32.807

在 viewDidLayoutSubviews 中设置中心。

```
 - (void) viewDidLayoutSubviews {

self.myActivityIndicator.center = self.view.center; 
```

}

# javascript - 滚动效果的 Javascript 代码适用于 Safari/chrome，而不是 firefox/opera

> ID：11587514
> 
> 赞同：0
> 
> 时间：2012-07-20T22:01:01.527
> 
> 标签：javascript, html, css, browser, scrolltop

我有一个带有导航栏的网页，最初位于页面顶部下方 75px 左右。我编写了一个脚本，当导航栏到达浏览器窗口的顶部时，它会将导航栏固定到浏览器窗口的顶部。这在 safari/chrome 中运行良好，但在其他浏览器中不会触发效果。该栏永远不会切换到其固定模式。我是 html/css/javascript 的新手，所以问题可能很简单。这是代码：

```
<head>
<link rel="stylesheet" href="foo_css.css" />
<script type="text/javascript">
function window_onload() {
    window.addEventListener("scroll",navbar_reset_top,false);
}

var navbar_top=75;

function navbar_reset_top() {
    var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;
    if(scrollTop>navbar_top&&nav.className==="navbar_absolute") {
        document.getElementById("nav").className="navbar_fixed";
    } 
    else if(scrollTop<navbar_top&&nav.className==="navbar_fixed") {
        document.getElementById("nav").className="navbar_absolute";
    }
 }
 </script>

 </head>
 <body onload="javascript:window_onload();">
 <div id="nav" class="navbar_absolute">
 <ul> 
```

这就是我认为的所有相关CSS：

```
#nav.navbar_fixed {
     position:fixed;
     top:0px;
}

#nav.navbar_absolute {
     position:absolute;
     top:74px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:35:19.547

这是一个稍微修改过的版本，应该可以在 Firefox 中运行。

```
 var nav, navbar_top = 75;
  function window_onload() {
      nav = document.getElementById("nav");
      window.addEventListener("scroll", navbar_reset_top, false);
  }

  function navbar_reset_top() {

      var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;

      // you won't need the && nav.className==="navbar_absolute" part
      if(scrollTop > navbar_top && nav.className==="navbar_absolute") {
          nav.className="navbar_fixed";
      }
      // you don't need the check for nav.className==="navbar_fixed" part either
      else if(scrollTop < navbar_top && nav.className==="navbar_fixed") {
          nav.className="navbar_absolute";
      }
   } 
```

# c# - 类修饰符

> ID：11587515
> 
> 赞同：2
> 
> 时间：2012-07-20T22:01:06.423
> 
> 标签：c#, vb.net, class

我从来没有主动学习正确的职业修饰语，因为它一直是“很高兴拥有”而不是“需要拥有”。

我能做的事让我很恼火`Dim F as New Person.FavoriteFoodsList`。

我应该使用哪个类修饰符，以便我的 Person 类可以使用 FavoriteFoodsList，但 Person 之外的任何内容都不能实例化 FavoriteFoodsList？

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim P As New Person
    P.FavoriteFoods.Add("Pizza")
    Dim F As New Person.FavoriteFoodsList 'How do I prevent this
End Sub
Public Class Person
    Public FavoriteFoods As New FavoriteFoodsList
    Public Class FavoriteFoodsList
        Inherits Collections.Generic.List(Of String)
    End Class
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:05:17.527

编辑 3：删除了试图将以下模式应用于私有/受保护成员的此答案的早期版本：

为了说明这将如何跨程序集边界工作，下面是一个示例：

```
public class Person
{
    public abstract class FavoriteFoodsList : List<string>
    {
        //internal constructor prevents types in other assemblies from inheriting
        internal FavoriteFoodsList(){}
    }
    private class FFL2 : FavoriteFoodsList
    {
    }
    public FavoriteFoodsList FavoriteFoods = new FFL2();
} 
```

免责声明，这只是说明可访问性问题的草图；该字段应该是一个属性等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T22:10:45.733

我建议您为您的类定义一个公共接口，然后将实现标记为私有。

```
Public Interface IFavoriteFoodsList
    Inherits Collections.Generic.IList(Of String)
    ' Define other public api methods'
End Interface

Public Class Person
    Public FavoriteFoods As IFavoriteFoodsList = New FavoriteFoodsList
    Private Class FavoriteFoodsList
        Inherits Collections.Generic.List(Of String)
        Implements IFavoriteFoodsList
    End Class
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T22:19:33.753

没有类修饰符或可访问性修饰符可以让您在一个程序集中完成此操作。正如其他回答者所说，具有私有实现类的接口可能是最好的解决方案。

但是，如果您正在编写类库，则可以将所有 FavoriteFoodsList 的构造函数声明为`internal`（`Friend`我认为在 VB 中），这将阻止其他程序集构造它们自己的 FavoriteFoodsList 对象。

# cocoa - 获取 NSTextField 的边框大小

> ID：11587518
> 
> 赞同：0
> 
> 时间：2012-07-20T22:01:17.507
> 
> 标签：cocoa, nstextfield

我正在根据具有固定宽度的文本的大小设置 NSTextField 高度。如果我将 NSTextField 设置为没有边框，它会给我一个正确的度量。但是如果我改变了边框样式，它会有所不同。有没有办法获得边框大小，或者更好的是 NSTextField 的内容大小？

# hibernate - 从 glassfish 上的 eclipselink 端口到休眠 EntityNotFoundException - 但存在于数据库中

> ID：11587519
> 
> 赞同：0
> 
> 时间：2012-07-20T22:01:20.143
> 
> 标签：hibernate, jpa

我有一个可以在 glassfish 上与 Eclipselink 一起正常工作的应用程序。因为这是就业市场的更多要求，所以我试图移植应用程序以在 glassfish 3.1.2 上使用 Hibernate 4.1.5.Final。我所有的实体类都使用注释，我没有映射文件。

我设置了 maven 依赖项并在 persistence.xml 中创建了一个新的基于休眠的持久性单元：

```
<persistence-unit name="testHibernate" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/myco</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.hbm2ddl.auto" value="validate"/>
      <property name="hibernate.archive.autodetection" value="class, hbm"/>
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.format_sql" value="true"/>
      <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.SunONETransactionManagerLookup"/>
      <property name="hibernate.dialect" value="uk.co.myco.general.Mysql5BitBooleanDialect"/>
      <property name="hibernate.generate_statistics" value="true"/>
    </properties>
  </persistence-unit> 
```

登录后执行以下查询：

```
@PersistenceContext(unitName = "testHibernate")
protected EntityManager em;
...
Query query = em.createQuery("SELECT u FROM User u WHERE u.userName = ?1");
query.setParameter(1, "testuser");
User user = (User) query.getSingleResult(); 
```

这会抛出 javax.persistence.EntityNotFoundException: Unable to find uk.co.myco.entities.Player with id 1\. Player 类是从 User 类中引用的，如下所示：

```
@OneToOne
@JoinColumn(name = "defaultPlayer", referencedColumnName = "id")
private Player defaultPlayer; 
```

“玩家”实体是持久继承层次结构的一部分，从基类继承的所有其他实体似乎都包含在查询中。

id 为 1 的 Player 肯定存在于数据库中，但这是似乎执行的极其复杂的查询，有没有人知道如何通过上面显示的简单 select u from User u 生成此查询？

```
select
        player0_.id as id0_13_,
        player0_1_.createUser as createUser0_13_,
        player0_1_.created as created0_13_,
        player0_1_.entityState as entitySt3_0_13_,
        player0_1_.updateUser as updateUser0_13_,
        player0_1_.updated as updated0_13_,
        player0_1_.version as version0_13_,
        player0_1_.ageGroup as ageGroup0_13_,
        player0_1_.ageGroupNickname as ageGroup7_0_13_,
        player0_1_.country as country0_13_,
        player0_1_.currentSeason as current16_0_13_,
        player0_1_.dtype as dtype0_13_,
        player0_1_.introNotes as introNotes0_13_,
        player0_1_.mainLocation as mainLoc17_0_13_,
        player0_1_.name as name0_13_,
        player0_1_.photoId as photoId0_13_,
        player0_1_.sport as sport0_13_,
        player0_.birthCertificate as birthCer1_1_13_,
        player0_.defaultPlayer as defaultP2_1_13_,
        player0_.dob as dob1_13_,
        player0_.email as email1_13_,
        player0_.firstName as firstName1_13_,
        player0_.lastName as lastName1_13_,
        player0_.middleInitial as middleIn7_1_13_,
        player0_.photo as photo1_13_,
        player0_.user as user1_13_,
        user1_.id as id6_0_,
        user1_.createUser as createUser6_0_,
        user1_.created as created6_0_,
        user1_.entityState as entitySt3_6_0_,
        user1_.updateUser as updateUser6_0_,
        user1_.updated as updated6_0_,
        user1_.version as version6_0_,
        user1_.agreedTerms as agreedTe6_6_0_,
        user1_.browserType as browserT7_6_0_,
        user1_.country as country6_0_,
        user1_.dateFormat as dateFormat6_0_,
        user1_.defaultPlayer as default45_6_0_,
        user1_.dob as dob6_0_,
        user1_.email as email6_0_,
        user1_.emailVerified as emailVe12_6_0_,
        user1_.firstName as firstName6_0_,
        user1_.gender as gender6_0_,
        user1_.groupName as groupName6_0_,
        user1_.addrCountry as addrCou16_6_0_,
        user1_.addrCounty as addrCounty6_0_,
        user1_.addrGeoStatus as addrGeo18_6_0_,
        user1_.addrLat as addrLat6_0_,
        user1_.addrLine1 as addrLine20_6_0_,
        user1_.addrLine2 as addrLine21_6_0_,
        user1_.addrLng as addrLng6_0_,
        user1_.addrPostCode as addrPos23_6_0_,
        user1_.addrTownCity as addrTow24_6_0_,
        user1_.lastLoginFailureIpAddress as lastLog25_6_0_,
        user1_.lastLoginIpAddress as lastLog26_6_0_,
        user1_.lastLoginTime as lastLog27_6_0_,
        user1_.lastName as lastName6_0_,
        user1_.loginCount as loginCount6_0_,
        user1_.loginFailures as loginFa30_6_0_,
        user1_.middleInitial as middleI31_6_0_,
        user1_.mobileSecurityCode as mobileS32_6_0_,
        user1_.mobileVerified as mobileV33_6_0_,
        user1_.passWord as passWord6_0_,
        user1_.phoneHome as phoneHome6_0_,
        user1_.phoneMobile as phoneMo36_6_0_,
        user1_.regRandomNumber as regRand37_6_0_,
        user1_.registrationIpAddress as registr38_6_0_,
        user1_.timeZone as timeZone6_0_,
        user1_.timeZoneGroup as timeZon40_6_0_,
        user1_.userAdmin as userAdmin6_0_,
        user1_.userName as userName6_0_,
        user2_.id as id6_1_,
        user2_.createUser as createUser6_1_,
        user2_.created as created6_1_,
        user2_.entityState as entitySt3_6_1_,
        user2_.updateUser as updateUser6_1_,
        user2_.updated as updated6_1_,
        user2_.version as version6_1_,
        user2_.agreedTerms as agreedTe6_6_1_,
        user2_.browserType as browserT7_6_1_,
        user2_.country as country6_1_,
        user2_.dateFormat as dateFormat6_1_,
        user2_.defaultPlayer as default45_6_1_,
        user2_.dob as dob6_1_,
        user2_.email as email6_1_,
        user2_.emailVerified as emailVe12_6_1_,
        user2_.firstName as firstName6_1_,
        user2_.gender as gender6_1_,
        user2_.groupName as groupName6_1_,
        user2_.addrCountry as addrCou16_6_1_,
        user2_.addrCounty as addrCounty6_1_,
        user2_.addrGeoStatus as addrGeo18_6_1_,
        user2_.addrLat as addrLat6_1_,
        user2_.addrLine1 as addrLine20_6_1_,
        user2_.addrLine2 as addrLine21_6_1_,
        user2_.addrLng as addrLng6_1_,
        user2_.addrPostCode as addrPos23_6_1_,
        user2_.addrTownCity as addrTow24_6_1_,
        user2_.lastLoginFailureIpAddress as lastLog25_6_1_,
        user2_.lastLoginIpAddress as lastLog26_6_1_,
        user2_.lastLoginTime as lastLog27_6_1_,
        user2_.lastName as lastName6_1_,
        user2_.loginCount as loginCount6_1_,
        user2_.loginFailures as loginFa30_6_1_,
        user2_.middleInitial as middleI31_6_1_,
        user2_.mobileSecurityCode as mobileS32_6_1_,
        user2_.mobileVerified as mobileV33_6_1_,
        user2_.passWord as passWord6_1_,
        user2_.phoneHome as phoneHome6_1_,
        user2_.phoneMobile as phoneMo36_6_1_,
        user2_.regRandomNumber as regRand37_6_1_,
        user2_.registrationIpAddress as registr38_6_1_,
        user2_.timeZone as timeZone6_1_,
        user2_.timeZoneGroup as timeZon40_6_1_,
        user2_.userAdmin as userAdmin6_1_,
        user2_.userName as userName6_1_,
        user3_.id as id6_2_,
        user3_.createUser as createUser6_2_,
        user3_.created as created6_2_,
        user3_.entityState as entitySt3_6_2_,
        user3_.updateUser as updateUser6_2_,
        user3_.updated as updated6_2_,
        user3_.version as version6_2_,
        user3_.agreedTerms as agreedTe6_6_2_,
        user3_.browserType as browserT7_6_2_,
        user3_.country as country6_2_,
        user3_.dateFormat as dateFormat6_2_,
        user3_.defaultPlayer as default45_6_2_,
        user3_.dob as dob6_2_,
        user3_.email as email6_2_,
        user3_.emailVerified as emailVe12_6_2_,
        user3_.firstName as firstName6_2_,
        user3_.gender as gender6_2_,
        user3_.groupName as groupName6_2_,
        user3_.addrCountry as addrCou16_6_2_,
        user3_.addrCounty as addrCounty6_2_,
        user3_.addrGeoStatus as addrGeo18_6_2_,
        user3_.addrLat as addrLat6_2_,
        user3_.addrLine1 as addrLine20_6_2_,
        user3_.addrLine2 as addrLine21_6_2_,
        user3_.addrLng as addrLng6_2_,
        user3_.addrPostCode as addrPos23_6_2_,
        user3_.addrTownCity as addrTow24_6_2_,
        user3_.lastLoginFailureIpAddress as lastLog25_6_2_,
        user3_.lastLoginIpAddress as lastLog26_6_2_,
        user3_.lastLoginTime as lastLog27_6_2_,
        user3_.lastName as lastName6_2_,
        user3_.loginCount as loginCount6_2_,
        user3_.loginFailures as loginFa30_6_2_,
        user3_.middleInitial as middleI31_6_2_,
        user3_.mobileSecurityCode as mobileS32_6_2_,
        user3_.mobileVerified as mobileV33_6_2_,
        user3_.passWord as passWord6_2_,
        user3_.phoneHome as phoneHome6_2_,
        user3_.phoneMobile as phoneMo36_6_2_,
        user3_.regRandomNumber as regRand37_6_2_,
        user3_.registrationIpAddress as registr38_6_2_,
        user3_.timeZone as timeZone6_2_,
        user3_.timeZoneGroup as timeZon40_6_2_,
        user3_.userAdmin as userAdmin6_2_,
        user3_.userName as userName6_2_,
        player4_.id as id0_3_,
        player4_1_.createUser as createUser0_3_,
        player4_1_.created as created0_3_,
        player4_1_.entityState as entitySt3_0_3_,
        player4_1_.updateUser as updateUser0_3_,
        player4_1_.updated as updated0_3_,
        player4_1_.version as version0_3_,
        player4_1_.ageGroup as ageGroup0_3_,
        player4_1_.ageGroupNickname as ageGroup7_0_3_,
        player4_1_.country as country0_3_,
        player4_1_.currentSeason as current16_0_3_,
        player4_1_.dtype as dtype0_3_,
        player4_1_.introNotes as introNotes0_3_,
        player4_1_.mainLocation as mainLoc17_0_3_,
        player4_1_.name as name0_3_,
        player4_1_.photoId as photoId0_3_,
        player4_1_.sport as sport0_3_,
        player4_.birthCertificate as birthCer1_1_3_,
        player4_.defaultPlayer as defaultP2_1_3_,
        player4_.dob as dob1_3_,
        player4_.email as email1_3_,
        player4_.firstName as firstName1_3_,
        player4_.lastName as lastName1_3_,
        player4_.middleInitial as middleIn7_1_3_,
        player4_.photo as photo1_3_,
        player4_.user as user1_3_,
        user5_.id as id6_4_,
        user5_.createUser as createUser6_4_,
        user5_.created as created6_4_,
        user5_.entityState as entitySt3_6_4_,
        user5_.updateUser as updateUser6_4_,
        user5_.updated as updated6_4_,
        user5_.version as version6_4_,
        user5_.agreedTerms as agreedTe6_6_4_,
        user5_.browserType as browserT7_6_4_,
        user5_.country as country6_4_,
        user5_.dateFormat as dateFormat6_4_,
        user5_.defaultPlayer as default45_6_4_,
        user5_.dob as dob6_4_,
        user5_.email as email6_4_,
        user5_.emailVerified as emailVe12_6_4_,
        user5_.firstName as firstName6_4_,
        user5_.gender as gender6_4_,
        user5_.groupName as groupName6_4_,
        user5_.addrCountry as addrCou16_6_4_,
        user5_.addrCounty as addrCounty6_4_,
        user5_.addrGeoStatus as addrGeo18_6_4_,
        user5_.addrLat as addrLat6_4_,
        user5_.addrLine1 as addrLine20_6_4_,
        user5_.addrLine2 as addrLine21_6_4_,
        user5_.addrLng as addrLng6_4_,
        user5_.addrPostCode as addrPos23_6_4_,
        user5_.addrTownCity as addrTow24_6_4_,
        user5_.lastLoginFailureIpAddress as lastLog25_6_4_,
        user5_.lastLoginIpAddress as lastLog26_6_4_,
        user5_.lastLoginTime as lastLog27_6_4_,
        user5_.lastName as lastName6_4_,
        user5_.loginCount as loginCount6_4_,
        user5_.loginFailures as loginFa30_6_4_,
        user5_.middleInitial as middleI31_6_4_,
        user5_.mobileSecurityCode as mobileS32_6_4_,
        user5_.mobileVerified as mobileV33_6_4_,
        user5_.passWord as passWord6_4_,
        user5_.phoneHome as phoneHome6_4_,
        user5_.phoneMobile as phoneMo36_6_4_,
        user5_.regRandomNumber as regRand37_6_4_,
        user5_.registrationIpAddress as registr38_6_4_,
        user5_.timeZone as timeZone6_4_,
        user5_.timeZoneGroup as timeZon40_6_4_,
        user5_.userAdmin as userAdmin6_4_,
        user5_.userName as userName6_4_,
        season6_.id as id2_5_,
        season6_.createUser as createUser2_5_,
        season6_.created as created2_5_,
        season6_.entityState as entitySt3_2_5_,
        season6_.updateUser as updateUser2_5_,
        season6_.updated as updated2_5_,
        season6_.version as version2_5_,
        season6_.arriveBeforeMins as arriveBe6_2_5_,
        season6_.earliestHours as earliest7_2_5_,
        season6_.earliestMins as earliest8_2_5_,
        season6_.encodedDaysOfWeek as encodedD9_2_5_,
        season6_.endDate as endDate2_5_,
        season6_.extraTime as extraTime2_5_,
        season6_.latestHours as latestH12_2_5_,
        season6_.latestMins as latestMins2_5_,
        season6_.league as league2_5_,
        season6_.matchDuration as matchDu14_2_5_,
        season6_.season as season2_5_,
        season6_.startDate as startDate2_5_,
        user7_.id as id6_6_,
        user7_.createUser as createUser6_6_,
        user7_.created as created6_6_,
        user7_.entityState as entitySt3_6_6_,
        user7_.updateUser as updateUser6_6_,
        user7_.updated as updated6_6_,
        user7_.version as version6_6_,
        user7_.agreedTerms as agreedTe6_6_6_,
        user7_.browserType as browserT7_6_6_,
        user7_.country as country6_6_,
        user7_.dateFormat as dateFormat6_6_,
        user7_.defaultPlayer as default45_6_6_,
        user7_.dob as dob6_6_,
        user7_.email as email6_6_,
        user7_.emailVerified as emailVe12_6_6_,
        user7_.firstName as firstName6_6_,
        user7_.gender as gender6_6_,
        user7_.groupName as groupName6_6_,
        user7_.addrCountry as addrCou16_6_6_,
        user7_.addrCounty as addrCounty6_6_,
        user7_.addrGeoStatus as addrGeo18_6_6_,
        user7_.addrLat as addrLat6_6_,
        user7_.addrLine1 as addrLine20_6_6_,
        user7_.addrLine2 as addrLine21_6_6_,
        user7_.addrLng as addrLng6_6_,
        user7_.addrPostCode as addrPos23_6_6_,
        user7_.addrTownCity as addrTow24_6_6_,
        user7_.lastLoginFailureIpAddress as lastLog25_6_6_,
        user7_.lastLoginIpAddress as lastLog26_6_6_,
        user7_.lastLoginTime as lastLog27_6_6_,
        user7_.lastName as lastName6_6_,
        user7_.loginCount as loginCount6_6_,
        user7_.loginFailures as loginFa30_6_6_,
        user7_.middleInitial as middleI31_6_6_,
        user7_.mobileSecurityCode as mobileS32_6_6_,
        user7_.mobileVerified as mobileV33_6_6_,
        user7_.passWord as passWord6_6_,
        user7_.phoneHome as phoneHome6_6_,
        user7_.phoneMobile as phoneMo36_6_6_,
        user7_.regRandomNumber as regRand37_6_6_,
        user7_.registrationIpAddress as registr38_6_6_,
        user7_.timeZone as timeZone6_6_,
        user7_.timeZoneGroup as timeZon40_6_6_,
        user7_.userAdmin as userAdmin6_6_,
        user7_.userName as userName6_6_,
        user8_.id as id6_7_,
        user8_.createUser as createUser6_7_,
        user8_.created as created6_7_,
        user8_.entityState as entitySt3_6_7_,
        user8_.updateUser as updateUser6_7_,
        user8_.updated as updated6_7_,
        user8_.version as version6_7_,
        user8_.agreedTerms as agreedTe6_6_7_,
        user8_.browserType as browserT7_6_7_,
        user8_.country as country6_7_,
        user8_.dateFormat as dateFormat6_7_,
        user8_.defaultPlayer as default45_6_7_,
        user8_.dob as dob6_7_,
        user8_.email as email6_7_,
        user8_.emailVerified as emailVe12_6_7_,
        user8_.firstName as firstName6_7_,
        user8_.gender as gender6_7_,
        user8_.groupName as groupName6_7_,
        user8_.addrCountry as addrCou16_6_7_,
        user8_.addrCounty as addrCounty6_7_,
        user8_.addrGeoStatus as addrGeo18_6_7_,
        user8_.addrLat as addrLat6_7_,
        user8_.addrLine1 as addrLine20_6_7_,
        user8_.addrLine2 as addrLine21_6_7_,
        user8_.addrLng as addrLng6_7_,
        user8_.addrPostCode as addrPos23_6_7_,
        user8_.addrTownCity as addrTow24_6_7_,
        user8_.lastLoginFailureIpAddress as lastLog25_6_7_,
        user8_.lastLoginIpAddress as lastLog26_6_7_,
        user8_.lastLoginTime as lastLog27_6_7_,
        user8_.lastName as lastName6_7_,
        user8_.loginCount as loginCount6_7_,
        user8_.loginFailures as loginFa30_6_7_,
        user8_.middleInitial as middleI31_6_7_,
        user8_.mobileSecurityCode as mobileS32_6_7_,
        user8_.mobileVerified as mobileV33_6_7_,
        user8_.passWord as passWord6_7_,
        user8_.phoneHome as phoneHome6_7_,
        user8_.phoneMobile as phoneMo36_6_7_,
        user8_.regRandomNumber as regRand37_6_7_,
        user8_.registrationIpAddress as registr38_6_7_,
        user8_.timeZone as timeZone6_7_,
        user8_.timeZoneGroup as timeZon40_6_7_,
        user8_.userAdmin as userAdmin6_7_,
        user8_.userName as userName6_7_,
        league9_.id as id0_8_,
        league9_1_.createUser as createUser0_8_,
        league9_1_.created as created0_8_,
        league9_1_.entityState as entitySt3_0_8_,
        league9_1_.updateUser as updateUser0_8_,
        league9_1_.updated as updated0_8_,
        league9_1_.version as version0_8_,
        league9_1_.ageGroup as ageGroup0_8_,
        league9_1_.ageGroupNickname as ageGroup7_0_8_,
        league9_1_.country as country0_8_,
        league9_1_.currentSeason as current16_0_8_,
        league9_1_.dtype as dtype0_8_,
        league9_1_.introNotes as introNotes0_8_,
        league9_1_.mainLocation as mainLoc17_0_8_,
        league9_1_.name as name0_8_,
        league9_1_.photoId as photoId0_8_,
        league9_1_.sport as sport0_8_,
        league9_.leagueGroup as leagueGr6_25_8_,
        league9_.leagueTable as leagueTa7_25_8_,
        league9_.pointsDraw as pointsDraw25_8_,
        league9_.pointsLoss as pointsLoss25_8_,
        league9_.pointsWin as pointsWin25_8_,
        league9_.splitter as splitter25_8_,
        location10_.id as id0_9_,
        location10_1_.createUser as createUser0_9_,
        location10_1_.created as created0_9_,
        location10_1_.entityState as entitySt3_0_9_,
        location10_1_.updateUser as updateUser0_9_,
        location10_1_.updated as updated0_9_,
        location10_1_.version as version0_9_,
        location10_1_.ageGroup as ageGroup0_9_,
        location10_1_.ageGroupNickname as ageGroup7_0_9_,
        location10_1_.country as country0_9_,
        location10_1_.currentSeason as current16_0_9_,
        location10_1_.dtype as dtype0_9_,
        location10_1_.introNotes as introNotes0_9_,
        location10_1_.mainLocation as mainLoc17_0_9_,
        location10_1_.name as name0_9_,
        location10_1_.photoId as photoId0_9_,
        location10_1_.sport as sport0_9_,
        location10_.addrCountry as addrCoun1_13_9_,
        location10_.addrCounty as addrCounty13_9_,
        location10_.addrGeoStatus as addrGeoS3_13_9_,
        location10_.addrLat as addrLat13_9_,
        location10_.addrLine1 as addrLine5_13_9_,
        location10_.addrLine2 as addrLine6_13_9_,
        location10_.addrLng as addrLng13_9_,
        location10_.addrPostCode as addrPost8_13_9_,
        location10_.addrTownCity as addrTown9_13_9_,
        location10_.comments as comments13_9_,
        location10_.entity as entity13_9_,
        location10_.globalx as globalx13_9_,
        location10_.locationType as locatio12_13_9_,
        location10_.user as user13_9_,
        superentit11_.id as id0_10_,
        superentit11_.createUser as createUser0_10_,
        superentit11_.created as created0_10_,
        superentit11_.entityState as entitySt3_0_10_,
        superentit11_.updateUser as updateUser0_10_,
        superentit11_.updated as updated0_10_,
        superentit11_.version as version0_10_,
        superentit11_.ageGroup as ageGroup0_10_,
        superentit11_.ageGroupNickname as ageGroup7_0_10_,
        ... deleted due to over stackoverflow post limit ...
        user12_.agreedTerms as agreedTe6_6_11_,
        user12_.browserType as browserT7_6_11_,
        user12_.country as country6_11_,
        user12_.dateFormat as dateFormat6_11_,
        user12_.defaultPlayer as default45_6_11_,
        user12_.dob as dob6_11_,
        user12_.email as email6_11_,
        user12_.emailVerified as emailVe12_6_11_,
        user12_.firstName as firstName6_11_,
        user12_.gender as gender6_11_,
        user12_.groupName as groupName6_11_,
        user12_.addrCountry as addrCou16_6_11_,
        user12_.addrCounty as addrCounty6_11_,
        user12_.addrGeoStatus as addrGeo18_6_11_,
        user12_.addrLat as addrLat6_11_,
        user12_.addrLine1 as addrLine20_6_11_,
        user12_.addrLine2 as addrLine21_6_11_,
        user12_.addrLng as addrLng6_11_,
        user12_.addrPostCode as addrPos23_6_11_,
        user12_.addrTownCity as addrTow24_6_11_,
        user12_.lastLoginFailureIpAddress as lastLog25_6_11_,
        user12_.lastLoginIpAddress as lastLog26_6_11_,
        user12_.lastLoginTime as lastLog27_6_11_,
        user12_.lastName as lastName6_11_,
        user12_.loginCount as loginCount6_11_,
        user12_.loginFailures as loginFa30_6_11_,
        user12_.middleInitial as middleI31_6_11_,
        user12_.mobileSecurityCode as mobileS32_6_11_,
        user12_.mobileVerified as mobileV33_6_11_,
        user12_.passWord as passWord6_11_,
        user12_.phoneHome as phoneHome6_11_,
        user12_.phoneMobile as phoneMo36_6_11_,
        user12_.regRandomNumber as regRand37_6_11_,
        user12_.registrationIpAddress as registr38_6_11_,
        user12_.timeZone as timeZone6_11_,
        user12_.timeZoneGroup as timeZon40_6_11_,
        user12_.userAdmin as userAdmin6_11_,
        user12_.userName as userName6_11_,
        user13_.id as id6_12_,
        user13_.createUser as createUser6_12_,
        user13_.created as created6_12_,
        user13_.entityState as entitySt3_6_12_,
        user13_.updateUser as updateUser6_12_,
        user13_.updated as updated6_12_,
        user13_.version as version6_12_,
        user13_.agreedTerms as agreedTe6_6_12_,
        user13_.browserType as browserT7_6_12_,
        user13_.country as country6_12_,
        user13_.dateFormat as dateFormat6_12_,
        user13_.defaultPlayer as default45_6_12_,
        user13_.dob as dob6_12_,
        user13_.email as email6_12_,
        user13_.emailVerified as emailVe12_6_12_,
        user13_.firstName as firstName6_12_,
        user13_.gender as gender6_12_,
        user13_.groupName as groupName6_12_,
        user13_.addrCountry as addrCou16_6_12_,
        user13_.addrCounty as addrCounty6_12_,
        user13_.addrGeoStatus as addrGeo18_6_12_,
        user13_.addrLat as addrLat6_12_,
        user13_.addrLine1 as addrLine20_6_12_,
        user13_.addrLine2 as addrLine21_6_12_,
        user13_.addrLng as addrLng6_12_,
        user13_.addrPostCode as addrPos23_6_12_,
        user13_.addrTownCity as addrTow24_6_12_,
        user13_.lastLoginFailureIpAddress as lastLog25_6_12_,
        user13_.lastLoginIpAddress as lastLog26_6_12_,
        user13_.lastLoginTime as lastLog27_6_12_,
        user13_.lastName as lastName6_12_,
        user13_.loginCount as loginCount6_12_,
        user13_.loginFailures as loginFa30_6_12_,
        user13_.middleInitial as middleI31_6_12_,
        user13_.mobileSecurityCode as mobileS32_6_12_,
        user13_.mobileVerified as mobileV33_6_12_,
        user13_.passWord as passWord6_12_,
        user13_.phoneHome as phoneHome6_12_,
        user13_.phoneMobile as phoneMo36_6_12_,
        user13_.regRandomNumber as regRand37_6_12_,
        user13_.registrationIpAddress as registr38_6_12_,
        user13_.timeZone as timeZone6_12_,
        user13_.timeZoneGroup as timeZon40_6_12_,
        user13_.userAdmin as userAdmin6_12_,
        user13_.userName as userName6_12_ 
    from
        players player0_ 
    inner join
        superentities player0_1_ 
            on player0_.id=player0_1_.id 
    inner join
        users user1_ 
            on player0_1_.createUser=user1_.id 
    left outer join
        users user2_ 
            on user1_.createUser=user2_.id 
    left outer join
        users user3_ 
            on user1_.updateUser=user3_.id 
    left outer join
        players player4_ 
            on user1_.defaultPlayer=player4_.id 
    left outer join
        superentities player4_1_ 
            on player4_.id=player4_1_.id 
    inner join
        users user5_ 
            on player0_1_.updateUser=user5_.id 
    left outer join
        seasons season6_ 
            on player0_1_.currentSeason=season6_.id 
    left outer join
        users user7_ 
            on season6_.createUser=user7_.id 
    left outer join
        users user8_ 
            on season6_.updateUser=user8_.id 
    left outer join
        leagues league9_ 
            on season6_.league=league9_.id 
    left outer join
        superentities league9_1_ 
            on league9_.id=league9_1_.id 
    left outer join
        locations location10_ 
            on player0_1_.mainLocation=location10_.id 
    left outer join
        superentities location10_1_ 
            on location10_.id=location10_1_.id 
    left outer join
        superentities superentit11_ 
            on location10_.entity=superentit11_.id 
    left outer join
        players superentit11_1_ 
            on superentit11_.id=superentit11_1_.id 
    left outer join
        clubs superentit11_2_ 
            on superentit11_.id=superentit11_2_.id 
    left outer join
        squads superentit11_3_ 
            on superentit11_.id=superentit11_3_.id 
    left outer join
        businesses superentit11_4_ 
            on superentit11_.id=superentit11_4_.id 
    left outer join
        locations superentit11_5_ 
            on superentit11_.id=superentit11_5_.id 
    left outer join
        resources superentit11_6_ 
            on superentit11_.id=superentit11_6_.id 
    left outer join
        sportscentres superentit11_7_ 
            on superentit11_.id=superentit11_7_.id 
    left outer join
        leagues superentit11_8_ 
            on superentit11_.id=superentit11_8_.id 
    left outer join
        leaguegroups superentit11_9_ 
            on superentit11_.id=superentit11_9_.id 
    left outer join
        teams superentit11_10_ 
            on superentit11_.id=superentit11_10_.id 
    left outer join
        users user12_ 
            on location10_.user=user12_.id 
    inner join
        users user13_ 
            on player0_.user=user13_.id 
    where
        player0_.id=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:51:00.993

该查询似乎表明您有很多 OnetoOne 或 ManyToOne 关联被映射为急切加载（不幸的是，这是默认值）。所以 Hibernate 急切地加载它们。

例如，似乎一个用户引用了另一个用户，而另一个用户又引用了另一个用户，等等，并且这个关联不是延迟加载的。

似乎您的所有实体都继承自一个共同的超级实体。这可能是错误的：企业和玩家不是同一种实体，不应该在同一个实体层次结构中。commen 实体可能应该替换为 MappedSuperclass。

# sed - sed 替换 .bashrc 中的 PATH

> ID：11587522
> 
> 赞同：0
> 
> 时间：2012-07-20T22:02:13.390
> 
> 标签：sed

我的条目中有以下条目`.bashrc`：

```
PATH=$PATH:/home/user/abc/bin;export PATH; # ADDED BY INSTALLER - DO NOT EDIT OR DELETE THIS COMMENT 
```

我想替换`/home/user/abc/bin`我选择的任何路径。我该怎么做`sed`？

我有以下内容：

```
sed 's,PATH=[^;]*,PATH=$PATH/home/user/app/2.1,' -i ~/.bashrc 
```

但是，这将替换以 开头的任何内容，`PATH`我如何指定仅选择以开头`PATH`但还包括字符串的内容`ADDED BY INSTALLER - DO NOT EDIT OR DELETE THIS COMMENT`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:56:25.060

你这样做：

```
NEWPATH="your_new_path" sed -i "/ADDED BY INSTALLER - DO NOT EDIT OR DELETE THIS COMMENT/ s:/home/user/abc/bin:$NEWPATH:" .bashrc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:10:41.847

锚点位于行首`^`( ) 和行尾 ( `$`)，如下所示：

```
sed -i.bak -e 's,^PATH=[^;]*\(.*ADDED BY INSTALLER - DO NOT EDIT OR DELETE THIS COMMENT\)$,PATH=$PATH/home/user/app/2.1\1,' ~/.bashrc 
```

为了安全起见，我已将`.bak`后缀添加到就地编辑中。

# c++ - 如何从向量指针中读取元素？

> ID：11587526
> 
> 赞同：2
> 
> 时间：2012-07-20T22:02:23.827
> 
> 标签：c++, visual-c++, vector, c++03

我需要访问一个矢量指针元素，我的动画结构有以下代码（这里简化，不必要的变量被切断）：

```
struct framestruct {
    int w,h;
};
struct animstruct {
    vector<framestruct> *frames;
};

vector<framestruct> some_animation; // this will be initialized with some frames data elsewhere.

animstruct test; // in this struct we save the pointer to those frames.

void init_anim(){
    test.frames = (vector<framestruct> *)&some_animation; // take pointer.
}

void test_anim(){
    test.frames[0].w; // error C2039: 'w' : is not a member of 'std::vector<_Ty>'
} 
```

该阵列有效，我通过以下方式对其进行了测试： `test.frames->size()`它是我计划的 7。

那么如何从向量中访问第 N 个索引处的向量元素（w 和 h）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:04:45.530

您需要在访问数组之前取消引用指针。就像您与`->`操作员一起获取尺寸一样。

```
(*test.frames)[0].w; 
```

您也可以使用`->`运算符来访问`[]`运算符方法，但语法不是很好：

```
test.frames->operator[](0).w; 
```

如果您希望能够在`[]`语法上像真正的向量一样直接使用，那么您可以允许`frames`成员获取 的副本`vector`，您可以引用`vector`. 或者，您可以重载自身以使用变量`[]`的语法。`animstruct``[]``test`

复制：

```
struct animstruct { vector<framestruct> frames; };
animstruct test;
void init_anim(){ test.frames = some_animation; }

test.frames[0].w; 
```

参考：

```
struct animstruct { vector<framestruct> &frames;
                    animstruct (vector<framestruct> &f) : frames(f) {} };
animstruct test(some_animation);
void init_anim(){}

test.frames[0].w; 
```

超载：

```
struct animstruct { vector<framestruct> *frames;
                    framestruct & operator[] (int i) { return (*frames)[i]; } };
animstruct test;
void init_anim(){ test.frames = &some_animation; }

test[0].w; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:05:48.363

`test.frames`指向一个向量，所以你需要在索引到向量之前取消引用它。

```
(*test.frames)[0].w 
```

# ruby-on-rails - 你如何限制红宝石中的台风响应大小？

> ID：11587531
> 
> 赞同：0
> 
> 时间：2012-07-20T22:02:58.750
> 
> 标签：ruby-on-rails, ruby, http, typhoeus, hydra

我有一些基本上可以做到这一点的代码，其中 var urls 是一个字符串数组。这是一个提炼的版本，但应该说明这一点。

```
require 'rubygems'
require 'typhoeus'
require 'json'
require 'socket'
def hit_http_urls(urls)
  hydra = Typhoeus::Hydra.new
  hydra.disable_memoization

  urls.each do |url|
    req = Typhoeus::Request.new(url,
          :disable_ssl_peer_verification => true,
          :disable_ssl_host_verification => true,
          :ssl_version => :sslv3,
          :headers=>{'User-Agent' => 'athingy', 'Content-Type' => 'text/xml; charset=utf-8'},
          :timeout => 10)
    req.on_complete { |res|
      puts res.body.length
    }
    hydra.queue(req)
  end
  hydra.run
end 
```

问题是一个（或多个）url 可以有以兆字节为单位的响应。由于这个函数将在一个循环中运行，其中大部分是相同的 url 组，我不想要这个。有没有办法以某种方式在硬限制后停止接收数据？像 :max_response_size 什么的？

我看过关于 hydra/typhoeus 的 ruby​​docs： [http: //rubydoc.info/github/dbalatero/typhoeus/master/Typhoeus/Hydra](http://rubydoc.info/github/dbalatero/typhoeus/master/Typhoeus/Hydra)

[http://rubydoc.info/github/dbalatero/typhoeus/master/Typhoeus/Request](http://rubydoc.info/github/dbalatero/typhoeus/master/Typhoeus/Request)

[http://rubydoc.info/gems/typhoeus/0.4.1/file/README.md](http://rubydoc.info/gems/typhoeus/0.4.1/file/README.md)

但他们似乎没有告诉我一种限制响应正文大小的方法。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:33:52.970

目前无法使用 Typhoeus，但使用[Ethon](https://github.com/typhoeus/ethon)是不可能的。在[这个要点](https://gist.github.com/3201879)中，我演示了如何为 response_body 提供另一个接收器——在这种情况下是一个文件句柄（第 12 行）。您可以提供一个类似 String 的对象，它不能接收超过 X 个字节。

使用 Ethon，您无法从 Typhoeus 获得舒适感，但在某些情况下值得一试。

# php - 维护下拉选择并且在选择之前不要提交 - PHP/MYSQL

> ID：11587532
> 
> 赞同：0
> 
> 时间：2012-07-20T22:03:07.220
> 
> 标签：php, mysql, drop-down-menu

我创建了一个下拉菜单来选择表格，然后是另一个下拉菜单，其中填充了来自所选表格一列的数据。目前，当我第一次加载页面时，我收到一条错误消息，因为我的下拉列表中没有选择任何内容，因此索引`freqtype`未定义。当我选择某些东西时，一切正常，除了我的选择没有被 Dropbox 保留。PHP中有没有一种方法可以在一个脚本中实现这一点。我想可能对初始表单使用 if 语句，因此在选择顶部之前不会填充底部下拉列表，但我无法使代码正常工作。任何帮助将不胜感激。

```
<html>
<head>
<title>Frequency Chart Update</title>
</head>

<body text="#FFFFFF" bgcolor="#000000">

<font size="4">Please Select the Frequency You Wish To Edit.
</font>
<br>
<br>
<?php

echo '<form ENCTYPE=multipart/form-data action=editfreq.php method=post>';
echo '<select name=freqtype onChange=this.form.submit()>';
echo '<option value="empty"> </option>';
echo '<option value="rptfreq">Repeater (Base) Frequencies</option>';
echo '<option value="pltfreq">Pilot Frequencies (VDV Leaky Feeder)</option>';
echo "</select>";

//define variables to be used
$table = $_POST['freqtype'];

//Connect to database
include 'connect.php';

$sql = "SELECT channel FROM $table";
$result = mysql_query($sql);

echo '<form ENCTYPE=multipart/form-data action=editrptfreq.php method=post>';
echo 'Channel  ';
echo '<select name=channel>';
while ($row = mysql_fetch_array($result)) {
echo "<option value='" . $row['channel'] . "'>" . $row['channel'] . "</option>";
}
echo "</select>";
echo "<button type=submit>Select</button>
";
echo "</form>";

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:09:08.700

```
<option value="rptfreq"<?php if(@$_POST['freqtype'] == 'rptfreq') echo ' selected="selected"'; ?>>Repeater (Base) Frequencies</option>
<option value="pltfreq"<?php if(@$_POST['freqtype'] == 'pltfreq') echo ' selected="selected"'; ?>>Pilot Frequencies (VDV Leaky Feeder)</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:12:45.250

`$_POST['freqtype']`您可以使用 PHP 的函数检查是否已设置`isset()`，然后不执行其余代码：

```
<?php
$table = isset($_POST['freqtype'])?$_POST['freqtype']:false;
echo '<form ENCTYPE=multipart/form-data action=editfreq.php method=post>';
echo '<select name=freqtype onChange=this.form.submit()>';
echo '<option value="empty"> </option>';
echo '<option value="rptfreq" '.($table=='rptfreq'?'selected="selected"':''.).'>Repeater (Base) Frequencies</option>';
echo '<option value="pltfreq" '.($table=='pltfreq'?'selected="selected"':''.).'>Pilot Frequencies (VDV Leaky Feeder)</option>';
echo "</select>";

if($table){
    //Connect to database
    include 'connect.php';

    $sql = "SELECT channel FROM $table";
    $result = mysql_query($sql);
    echo '<form ENCTYPE=multipart/form-data action=editrptfreq.php method=post>';
    echo 'Channel  ';
    echo '<select name=channel>';
    while ($row = mysql_fetch_array($result)) {
        echo "<option value='" . $row['channel'] . "'>" . $row['channel'] . "</option>";
    }
    echo "</select>";
}
echo "<button type=submit>Select</button>";
echo "</form>";
?> 
```

附带说明一下，仅仅因为您在下拉框中提供选项，可以提交与您决定的值不同的值。这意味着如果您不清理输入，您可能会遇到非常糟糕的 SQL 体验。

另请注意，您应该研究 PDO 而不是使用非常旧的`mysql`函数。

# sql - 陷入 t-SQL 中单个表的选择性 DELETE 语句中

> ID：11587533
> 
> 赞同：2
> 
> 时间：2012-07-20T22:03:14.390
> 
> 标签：sql, sql-server, tsql, sql-delete

说，我有一个这样的表（SQL Server 2008）：

```
CREATE TABLE tbl (ID INT, dtIn DATETIME2, dtOut DATETIME2, Type INT)

INSERT tbl VALUES
(1, '05:00', '6:00', 1),  -- will be removed
(2, '05:00', '7:00', 1),  -- will be removed
(3, '05:01', '8:00', 1),
(4, '05:00', '8:00', 1),
(5, '05:00', '6:00', 2),  -- will be removed
(6, '05:00', '7:00', 2),
(7, '05:00', '7:00', 3),
(8, '04:00', '7:00', 3) 
```

我需要删除具有相同“类型”的相同“类型”（如果找到 2 个或更多）的所有记录，但具有最大“dtOut”的记录除外。换句话说，上表应该是这样的：

```
(3, '05:01', '8:00', 1),   -- no matching 'dtIn' for 'type' = 1
(4, '05:00', '8:00', 1),   -- largest 'dtOut' for 'type' = 1
(6, '05:00', '7:00', 2),   -- largest 'dtOut' for 'type' = 2
(7, '05:00', '7:00', 3),   -- no matching 'dtIn' for 'type' = 3
(8, '04:00', '7:00', 3)    -- no matching 'dtIn' for 'type' = 4 
```

您甚至如何从同一个表中选择多个具有相同类型的行。你不能 select * from tbl where type=type.... 无论如何，我会很感激这方面的帮助...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T22:06:18.690

这是选择要删除的行的一种方法：

```
SELECT *
FROM tbl T1
WHERE EXISTS
(
    SELECT *
    FROM tbl T2
    WHERE T1.Type = T2.Type
    AND T1.dtIn = T2.dtIn
    AND (
            T1.dtOut < T2.dtOut
            OR (T1.dtOut = T2.dtOut AND T1.id < T2.id)
        )
) 
```

此查询也可以轻松更改为实际删除行。只需更改`SELECT *`为`DELETE T1`. 但请在实际运行删除语句之前测试它是否符合您的要求。

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!3/1ff87/38)

* * *

**更新**

这是使用 ROW_NUMBER 的方法：

```
;WITH T1 AS (
    SELECT id, ROW_NUMBER() OVER (PARTITION BY Type, dtIn
                                  ORDER BY dtOut DESC, ID DESC) AS rn
    FROM tbl
)
SELECT * FROM tbl
WHERE id IN
(
    SELECT id
    FROM T1
    WHERE rn > 1
) 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!3/1ff87/36)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:41:22.807

不是很优雅（+条件与马克的答案相同），但它是另一种选择。

[小提琴在这里](http://sqlfiddle.com/#!3/a19ac/1)

```
;with my_cte(ID)
as
(
  SELECT T1.ID
  FROM 
      tbl T1
      JOIN tbl T2 on
        T1.Type = T2.Type
        AND T1.dtIn = T2.dtIn
        AND T1.dtOut < T2.dtOut
  )
select *
from tbl t
where not exists 
              (
              select 1 
              from my_cte c 
              where t.ID = c.ID
              ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T23:37:19.120

**重复行的查询**

我刚刚看到你可以有重复的行。所以：

```
DELETE X
FROM
   (SELECT Row_Number() OVER (PARTITION BY Type, dtIn ORDER BY dtOut DESC) Item, *
   FROM #tbl) X
WHERE Item > 1 
```

请注意，上面的这个版本不需要连接，因此应该比页面上的所有其他查询执行得更好。

或者

```
DELETE T
FROM #tbl T
   CROSS APPLY (
      SELECT TOP 1 *
      FROM #tbl T2
      WHERE
         T.dtIn = T2.dtIn
         AND T.Type = T2.Type
      ORDER BY T2.dtOut DESC, T2.ID DESC
   ) X
WHERE T.ID < X.ID 
```

或者

```
DELETE T
FROM #tbl T
   INNER JOIN #tbl T2
      ON T.dtIn = T2.dtIn
      AND T.Type = T2.Type
      AND (
         T.dtOut < T2.dtOut
         OR (T.tdOut = T2.dtOut AND T.ID > T2.ID)
      ) 
```

**查询无重复行**

如果您不能有重复的行（ID 除外），那么它会更简单：

```
DELETE T
FROM #tbl T
WHERE EXISTS (
   SELECT * FROM #tbl T2
   WHERE
      T.dtIn = T2.dtIn
      AND T.Type = T2.Type
      AND T.dtOut < T2.dtOut
) 
```

甚至

```
DELETE T
FROM #tbl T
   INNER JOIN #tbl T2
      ON T.dtIn = T2.dtIn
      AND T.Type = T2.Type
      AND T.dtOut < T2.dtOut 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T00:00:17.463

```
DECLARE @Table TABLE     
(  
ID INT,  
newno int  
)   

insert @table  
SELECT T1.ID,   
ROW_NUMBER() OVER (PARTITION BY Type, dtIn
                              ORDER BY dtOut DESC, ID DESC) AS newno  
 FROM tbl T1      

 select *  
from tbl t
where t.ID IN
             (
              select ID from @Table where newno > 1
              ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T22:14:47.263

我的与@Mark 的有点不同，但我相信它应该会得到相同的结果（只是因为我认为这`id`是独一无二的）：

```
DELETE a
FROM dbo.tbl a
WHERE id <> (
    SELECT MAX(id)
    from dbo.tbl b
    WHERE a.type = b.type
      AND a.dtIn = b.dtIn
) 
```

# c# - C# 类型参数不能从具有多个返回的 Select 中的用法中推断出来

> ID：11587536
> 
> 赞同：14
> 
> 时间：2012-07-20T22:03:30.087
> 
> 标签：c#, linq, generics, inheritance

我不认为我在做任何太深奥的事情，但我没有看到任何其他关于此的问题。

以下代码（我已将其简化为基本代码）在 C# 4 中生成编译器错误。但是，类型参数是什么应该是显而易见的 - 有一个最大公分母（“A 类”）也明确定义在方法“Frob”的返回类型。编译器不应该列出 lambda 表达式中的所有返回类型，创建一个祖先树来查找它们的共同祖先，然后将其与包含方法的预期返回类型相协调吗？

> 无法从用法中推断方法“System.Linq.Enumerable.Select(System.Collections.Generic.IEnumerable, System.Func)”的类型参数。尝试明确指定类型参数。

```
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;

namespace Sample
{
    public abstract class A
    {
        private A(int index) { /* ... */ }

        public sealed class A1 : A
        {
            public A1(string text, int index)
                : base(index)
            { /* ... */ }
        }

        public sealed class A2 : A
        {
            public A2(int index)
                : base(index)
            { /* ... */ }
        }

        private static Regex _regex = new Regex(@"(to be)|(not to be)");
        public static IEnumerable<A> Frob(string frobbable)
        {
            return _regex.Matches(frobbable)
                .Cast<Match>()
                .Select((match, i) =>
                {
                    if (match.Groups[1].Success)
                    {
                        return new A1(match.Groups[1].Value, i);
                    }
                    else
                    {
                        return new A2(i);
                    }
                });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-20T22:14:41.127

这是 C# 4 规范的第 7.5.2.12 节：

> 在类型推断和重载决策期间使用匿名函数 F 的推断返回类型。推断的返回类型只能为所有参数类型已知的匿名函数确定，因为它们是显式给出的，通过匿名函数转换提供的，或者是在封闭泛型方法调用的类型推断期间推断的。推断的返回类型确定如下：
> 
> *   如果 F 的主体是一个表达式，那么推断的 F 的返回类型就是该表达式的类型。
> *   如果 F 的主体是一个块，并且块的返回语句中的表达式集具有最佳公共类型 T（第 7.5.2.14 节），则推断的 F 的返回类型是 T。
> *   否则，无法为 E 推断返回类型。

第 7.5.2.14 节是这样的：

> 在某些情况下，需要为一组表达式推断一个公共类型。特别是隐式类型数组的元素类型和带有块体的匿名函数的返回类型都是通过这种方式找到的。
> 
> 直观地说，给定一组表达式 E1…Em 这个推断应该等价于调用一个方法
> 
> ```
> Tr M<X>(X x1 … X xm) 
> ```
> 
> 以 Ei 作为论据。
> 
> 更准确地说，推理从一个不固定的类型变量 X 开始。然后从每个 Ei 到 X 进行输出类型推理。最后，X 是固定的，如果成功，则生成的类型 S 是表达式的最佳通用类型。如果不存在这样的 S，则表达式没有最佳公共类型。

所以，假设我们有：

```
void M<X>(X x1, X x2) {}

A1 a1 = new A1();
A2 a2 = new A2();
M(a1, a2); 
```

...这将无法确定 的类型参数`X`，因此返回值推断以同样的方式失败。

我怀疑如果您将*任何*一个返回值转换为`A`，它将起作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T22:07:55.693

我猜想某处有一个特定的 C# 规范条款规定了这一点。（编辑：Jon Skeet 找到它并将它们发布在他的答案中）

通常，此类 lambda（或三元运算等）需要在每个阶段具有相同的确切返回类型以避免歧义。例如，在您的情况下，您是要返回类型`A`还是`Object`？当您将接口或多级继承混合在一起时，会更加有趣。

在这种情况下，最好的办法是简单地将每个 return 语句转换为类型`A`或将其存储在临时变量中：

```
if (match.Groups[1].Success)
    return (A)(new A1(match.Groups[1].Value, i));
else
    return (A)(new A2(i)); 
```

或者

```
A returnValue;

if (match.Groups[1].Success)
    returnValue = new A1(match.Groups[1].Value, i);
else
    returnValue = new A2(i);

return returnValue; 
```

编辑：如果没有推断类型就可以了，您可以`Select`使用以下命令显式调用查询：

```
.Cast<Match>()
.Select<Match, A>((match, i) =>
{
    if (match.Groups[1].Success)
        return new A1(match.Groups[1].Value, i);
    else
        return new A2(i);
}); 
```

然后编译器将确保您的返回类型隐式兼容`A`（它们是）

# powershell - 我可以在 Powershell 数据部分进行转换吗？

> ID：11587540
> 
> 赞同：3
> 
> 时间：2012-07-20T22:03:53.343
> 
> 标签：powershell, powershell-2.0

根据http://technet.microsoft.com/en-us/library/hh848302`get-help about_data`和[http://technet.microsoft.com/en-us/library/hh848302](http://technet.microsoft.com/en-us/library/hh848302)，`[xml]`数据部分允许使用文字

但是，当我尝试使用文档中的 xml 块创建数据部分时

```
data{
[XML] @'
    <p> Hello, World </p>
'@
} 
```

Poweshell 抱怨错误消息

```
The '[XML]' operator is not allowed in restricted language mode or a Data section.
At C:\Users\Alex\AppData\Local\Temp\150a9138-ebc3-4af1-8aec-73bf724fdcf5.ps1:2 char:6
+ [XML] <<<<  @'
       + CategoryInfo          : ParserError: (XML:Token) [], ParseException
        + FullyQualifiedErrorId : OperatorNotSupportedInDataSection 
```

我是在做一些愚蠢的事情，误读了文档还是文档中有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:30:26.090

这不是文档错误，而是在语义上分裂头发。您不能使用数据语言进行转换，因为如果您可以进行转换，则可能会发生转换的所有副作用（如果我没记错的话，实际上导致无法转换的事情是看到将某些字符串转换为文件流允许访问磁盘）。

您可以将 XML 作为字符串保留在数据部分内（这就是“XML 文字”的含义 - xml 字符串 - 而不是 XML 数据类型），并在外部包含强制转换：

```
$info = @(data {
@'
        <p> Hello, World </p>
'@
}) -as [xml] 
```

顺便说一句，我倾向于相信数据语言（和整体语言模式）是 PowerShell 中最酷的东西之一（不仅仅是因为我测试过它）。数据语言/无语言模式允许您将 PowerShell 环境保护为有限的命令集，这使您可以向世界其他地方开放 PowerShell 的一小部分。语言模式在 Exchange（这是它们的主要功能驱动程序）和[PowerShell Pipeworks](http://powershellpipeworks.com/)（我的公司在 PowerShell 上构建的一种免费网络语言）中都大量使用。

了解数据语言的另一个特性 -SupportedCommand 为您提供了另一条完成这项工作的途径。

您可以创建一个小函数，我们称之为 New-XmlDocument，并在数据语言中“支持”使用它。

```
function New-XmlDocument([Parameter(Mandatory=$true,Position=0)][string]$xml) {
    $xml -as [xml]
}

data -SupportedCommand New-XmlDocument {
    New-XmlDocument @'
<p>Hello World</p>
'@

} 
```

数据语言是强大的 PowerShell。明智地使用。

希望这可以帮助

# jquery - 如何使用 jQuery 获取此属性？

> ID：11587544
> 
> 赞同：0
> 
> 时间：2012-07-20T22:04:29.057
> 
> 标签：jquery

我知道应该很简单，但我就是不明白。

我正在使用克隆来复制一个`<li>`元素：

```
var li = $('.selected_list .template').clone(); 
```

该列表包含以下项目：

```
<li>
  <input type="hidden" value="" class="item_id" name="item_id[]">
  <div class="col_rating">
    <input type="textbox" value="" maxlength="3" class="item_rating" name=""> 
  </div>  
</li> 
```

我可以使用以下内容来更改`item_id`输入的内容：

```
 $(li).find('.item_id').prop({
    'value': $(item).attr('id'),
    'name': 'item_id[]'
  });
  $(li).find('.col_rating').find('input.col_rating').prop('name','item_rating[]');

  $(li).find('.col_name').text($(item).find(('.assoc_name')).text());
  $(li).find('.col_cost > input.item_cost').val($('.info_container .unit_cost').val()); 
```

但是我怎样才能改变`input`包裹在里面的值`div`呢？

我尝试使用`>`访问儿童，但这没有用。

非常感谢您的帮助:)

**更新**
我能够更改`item_id`. 问题是，如何更新输入的`name`属性`col_rating`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:10:02.753

```
$('.item_rating', li).val('250'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:06:39.347

用于[`.val()`](http://api.jquery.com/val/)设置元素的值。不是`.prop()`，不是`.attr()`。

```
li.find('.item_id').val('250'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:06:56.557

用逗号替换冒号。另外，`li`已经是 jQuery 对象，无需再次包装。

```
li.find('.item_id').prop('value', '250'); 
```

实际上，不是使用 设置属性，而是`.prop()`使用[`.val()`](http://api.jquery.com/val/)：

```
li.find('.item_id').val('250'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T22:08:52.590

```
li.find('.item_rating').val('250') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T22:22:15.933

```
var li = $('.selected_list .template').clone();
li
  .find('.item_id').prop({ // find item_id and change properties
    'value': '250',
    'name': 'name1'
  })
  .end() // jump to list again
  .find('.item_rating').prop({ // find .item_rating and change properties
    'value': '150',
    'name': 'name2'
  })
  .appendTo('.selected_list'); // append to list (you may have something else) 
```

**[演示](http://jsfiddle.net/BGK83/1/)**

# c++ - 如何从 C++ 中的 PWSTR 中提取子字符串

> ID：11587546
> 
> 赞同：1
> 
> 时间：2012-07-20T22:04:45.523
> 
> 标签：c++, windows, string, credential-providers

我目前正在用 C++ 修改 Windows 7 的凭据提供程序。Windows SDK 需要使用 PWSTR。

我遇到了一个问题，用户名有时作为 DOMAIN\username 传递，有时作为 domain.tld\username 传递，有时只是用户名。我想做的是从中提取用户名，并且只在斜杠后面取子字符串。

我是 C++ 新手，似乎没有一个字符串函数可以与 PWSTR 一起使用。我已经尝试了几次到 wchar_t* 的转换，但它仍然没有让我到任何地方。

如何做到这一点？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T22:15:16.273

您可以执行以下操作：

```
PWSTR GetUserName(PWSTR pszUser)
{
   PWSTR pszLastSlash = wcsrchr(pszUser, L'\\');
   return pszLastSlash ? pszLastSlash + 1 : pszUser;
} 
```

请注意，这不会进行单独的内存分配 - 您返回的是指向最后一个斜杠之后开始的字符串部分的指针。如果您要执行正确的“子字符串”操作，就像您在更高级别的对象中看到的那样（而不是仅仅`len - i`从 offset 开始`i`），您必须进行复制（或者以某种方式跟踪您只考虑较小的长度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:08:17.057

不要`std::string`用于宽字符串。改为使用`std::wstring`。`PWSTR`是`wchar_t *`, 哪里`std::string`是`std::basic_string<char>`,`std::wstring`是`std::basic_string<wchar_t>`. 使用它，您应该能够完成可以将 a 转换`char *`为`std::string`和操作它的操作。[您可以在此页面上](http://en.cppreference.com/w/cpp/string/basic_string)看到两者相似并且具有相同的功能等。

从那里，所有需要做的事情如下：

```
wchar_t chars[] = L"abc";
std::wstring ws = chars;
std::wstring sub = ws.substr (0, 2); 
std::wcout << sub.c_str(); //should print 'ab' 
```

# python - 将变量传递给 Python

> ID：11587549
> 
> 赞同：1
> 
> 时间：2012-07-20T22:05:03.237
> 
> 标签：python, variables

我想用变量替换以下代码行中的字符串

```
myText = re.findall( b'\x03\x00\x00\x02''(.*?)''\xF7\x00\xF0', s) 
```

它应该是这样的

```
myText = re.findall( b'\x03\x00\x00\x02''(.*?)' & variable_XY &, s) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:48:43.460

这只是串联。

如果你想要最后的内容`variable_XY`：

```
myText = re.findall( b'\x03\x00\x00\x02(.*?)' + variable_XY, s) 
```

如果您想要`variable_XY`开头的内容：

```
myText = re.findall( variable_XY + b'\x03\x00\x00\x02(.*?)', s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:07:26.573

你的意思是这样吗？

```
variable_XY = b'\xF7\x00\xF0'
myText = re.findall(b'\x03\x00\x00\x02(.*?)' + variable_XY, s) 
```

显然`variable_XY`可以用任何方式设置，只要是字符串即可。

# android - 参数不能为空

> ID：11587556
> 
> 赞同：1
> 
> 时间：2012-07-20T22:05:33.867
> 
> 标签：android, google-cloud-messaging

我是 GCM 服务的新手。我基本上已经将示例代码复制到了我在appspot.com 上托管的服务器应用程序中。当我尝试为空参数发送消息时出现错误，但我不知道是哪一个。以下是来自appspot.com 的日志：

```
2012-07-20 14:57:11.042 /sendMessage 500 8ms 0kb AppEngine-Google; (+http://code.google.com/appengine)
 0.1.0.2 - - [20/Jul/2012:14:57:11 -0700] "POST /sendMessage HTTP/1.1" 500 0 "http://mouseworldgcm.appspot.com/sendAll" "AppEngine-Google; (+http://code.google.com/appengine)" "mouseworldgcm.appspot.com" ms=9 cpu_ms=23 api_cpu_ms=0 cpm_usd=0.000708 queue_name=gcm task_name=3983469213642671348 instance=00c61b117c1533caf348700f9435ffa04e7119 

C 2012-07-20 14:57:11.040 
Uncaught exception from servlet
javax.servlet.UnavailableException: java.lang.IllegalArgumentException: argument cannot be null
    at org.mortbay.jetty.servlet.ServletHolder.makeUnavailable(ServletHolder.java:415)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:458)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:202)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:123)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679 
```

这是 /sendAll servlet：

```
package com.joebutt.mouseworldgcm;

import static com.google.appengine.api.taskqueue.TaskOptions.Builder.withUrl;

import com.google.appengine.api.taskqueue.Queue;
import com.google.appengine.api.taskqueue.QueueFactory;

import java.io.IOException;
import java.util.List;

//import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet that adds a new message to all registered devices.
 * <p>
 * This servlet is used just by the browser (i.e., not device).
 */
@SuppressWarnings("serial")
public class SendAllMessagesServlet extends BaseServlet {

  /**
   * Processes the request to add a new message.
   */
  @Override
  protected void doPost(HttpServletRequest req, HttpServletResponse resp)
      throws IOException, ServletException {
    List<String> devices = Datastore.getDevices();
    String status;
    if (devices.isEmpty())
    {
      status = "Message ignored as there is no device registered!";
    } 
    else
    {
      Queue queue = QueueFactory.getQueue("gcm");
      // NOTE: check below is for demonstration purposes; a real application
      // could always send a multicast, even for just one recipient
      if (devices.size() == 1) {
        // send a single message using plain post
        String device = devices.get(0);
        queue.add(withUrl("/sendMessage").param(SendMessageServlet.PARAMETER_DEVICE,     device));
        status = "Single message queued for registration id " + device;
      } else {
  // send a multicast message using JSON
        String key = Datastore.createMulticast(devices);
        queue.add(withUrl("/sendMessage").param(SendMessageServlet.PARAMETER_MULTICAST, key));
        status = "Multicast message queued for " + devices.size() + " devices";
      }
    req.setAttribute(HomeServlet.ATTRIBUTE_STATUS, status.toString());
    getServletContext().getRequestDispatcher("/home").forward(req, resp);
  }
  }
} 
```

因此，在整个周末工作后，我确定空错误是由于发件人造成的。因此，我将其更改为其他文档中的标准类型。现在的问题是我得到一个 401 错误代码。我因此重置了我的 api 密钥并尝试了浏览器应用程序和服务器 api 密钥，两者仍然抛出 401 错误。

关于如何创建发件人的任何建议？？？？

```
 @Override
    public void init(ServletConfig config) throws ServletException {
    super.init(config);
    //sender = newSender(config); //this is the line I changed
    sender = new Sender(ApiKeyInitializer.ATTRIBUTE_ACCESS_KEY);
  }

   /**
   * Creates the {@link Sender} based on the servlet settings.
   */
  protected Sender newSender(ServletConfig config) {
    String key = (String) config.getServletContext()
        .getAttribute(ApiKeyInitializer.ATTRIBUTE_ACCESS_KEY);
    return new Sender(key);
  } 
```

# django - Django Celery - 缺少一些东西，但我不知道是什么？有结果但得不到

> ID：11587558
> 
> 赞同：0
> 
> 时间：2012-07-20T22:05:37.250
> 
> 标签：django, rabbitmq, celery, django-celery

我的任务进入芹菜并取得成果。我知道这一点，因为我可以做到这一点。

```
>>> ts = TaskState.objects.all()[0]
>>> ts
Out[31]: <TaskState: SUCCESS apps.checklist.tasks.bulk_checklist_process(ec01461b-3431-478d-adfc-6d6cf162e9ad) ts:2012-07-20 14:35:41>
>>> ts.state
Out[32]: u'SUCCESS'
>>> ts.result
Out[33]: u'{\'info\': ["Great",]}' 
```

但是，当我尝试使用[记录在案](http://docs.celeryproject.org/en/latest/faq.html#how-do-i-get-the-result-of-a-task-if-i-have-the-id-that-points-there)的方式来获得结果时 - 一切都乱套了..

```
>>> from celery.result import BaseAsyncResult
>>> result = BaseAsyncResult(ts.task_id)
>>> result.get()
../lib/python2.7/site-packages/djcelery/managers.py:178: TxIsolationWarning: Polling results with transaction isolation level repeatable-read within the same transaction may give outdated results. Be sure to commit the transaction for each poll iteration.
  "Polling results with transaction isolation level " 
```

所以我有两个问题。

1.  我在导致此错误的 celery 设置中缺少什么。我显然有结果，但 BaseAsyncResult 被抬高了。我什至不知道在哪里寻找这个？
2.  忽略 1 秒，看起来只要我有，`ts.state == SUCCESS`我就可以使用`ts.result`. 这样做的缺点是什么，结果是什么格式？

**更新**

所以第二部分很简单。 *可怕*但容易..

```
context['results'] = resulting_values = result.get(propagate=False)
if not isinstance(resulting_values, dict):
    context['results'] = resulting_values = eval(context['task'].result)
    log.error("We should not be here..") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:19:38.183

它在您粘贴的警告中说得很对：

```
TxIsolationWarning: Polling results with transaction isolation level repeatable-read 
within the same transaction may give outdated results. Be sure to commit the transaction   
for each poll iteration. 
```

要将数据库用于结果，并且如果您想在同一进程中轮询它们，那么您需要将数据库的隔离级别配置为`READ-COMMITTED` 或者在检查结果之前提交事务。

也`BaseAsyncResult`已弃用，请使用

```
from celery.result import AsyncResult 
```

# mysql - 从 FROM_UNIXTIME 转换负值

> ID：11587560
> 
> 赞同：6
> 
> 时间：2012-07-20T22:06:12.427
> 
> 标签：mysql

我一直在尝试将出生日期从我的 DB 转换为 DATE FORMat 但我面临的问题是 DOB 字段中有一些负值，当我从在线 FROM_UNIXTIME 计算器检查时，它会给出不同的结果，如果我检查它`FROM_UNIXTIME(-957632400)`然后对于负值，它总是返回 NULL。请让我知道如何从 -957632400 这样的 UNIX 格式中获取日期格式

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T22:22:02.150

我们可以这样做：

```
FROM_UNIXTIME(0) + INTERVAL -957632400 SECOND 
```

* * *

该`FROM_UNIXTIME`函数受限于`TIMESTAMP`数据类型的允许范围，即标准的 32 位无符号整数范围 1970-01-01 到 2038-01-something。其他软件已更新为支持 64 位有符号整数，但 MySQL 尚未提供该功能（至少在 5.1.x 中没有）。

MySQL 中的解决方法是避免使用数据类型`TIMESTAMP`，而是使用`DATETIME`数据类型，当我们需要更大的范围时（例如 1970 年 1 月 1 日之前的日期）。

我们可以使用该`DATE_ADD`函数从 1970 年 1 月 1 日减去秒，如下所示：

```
SELECT DATE_ADD('1970-01-01 00:00:00',INTERVAL -957632400 SECOND) 
```

**注意**在进行这些类型的计算时，您可能需要考虑 UTC 的时区“偏移量”。MySQL 会将 DATETIME 值解释为`time_zone`在当前 MySQL 会话的设置中指定，而不是 UTC ( `time_zone = '+00:00'`)

* * *

**跟进：**

**问：**好的，意味着如果我们选择低于 '1970-01-01 00:00:00' 的日期，那么负值将保存在数据库中，否则它将是正值。正确的？– 软基因

**答：**呃，没有。如果选择 1970 年 1 月 1 日之前的日期/日期时间值，MySQL 将返回 1970 年 1 月 1 日之前的 DATE 或 DATETIME 值。如果存储 1970 年 1 月 1 日之前的 DATE 或 DATETIME 值，则 MySQL 将存储 1 月 1 日之前的 DATE 或 DATETIME 值, 1970，在这些数据类型支持的允许范围内。（类似于 0001-01-01 到 9999 ？）

如果您需要在数据库中存储非常大的正整数和负整数，您可能会将它们存储在定义为`BIGINT`.

DATE 列的内部表示需要 3 个字节的存储空间，而 DATETIME 需要 8 个字节的存储空间（直到 MySQL 版本 5.6.4。DATE 和 DATETIME 值的内部表示和存储在 5.6.4 中发生了变化）

所以不，MySQL 不会将 1970 年之前的日期值存储为“负整数”。

如果你想一想，MySQL 可以自由地实现他们想要的任何存储机制。（并且每个存储引擎都可以随意将该表示序列化到磁盘上。）

为什么一个日期需要 3 个字节？

MySQL 的一个选项（我并不表示这是它的完成方式）可能是将日期分解为它的年月日组件。

范围内整数值的表示 - 需要 -

*   `0 - 9999 -`14 位

*   `0 - 12 -` 4 位

*   `0 - 31 -` 5 位

总共有 23 位，恰好适合 3 个字节。这只是表明 MySQL 没有必要将 1970 年 1 月 1 日之前的日期值表示为负整数，因此我们不应该假设它确实如此。（但如果我们正在为 MySQL 开发存储引擎，我们真的只关心这个级别的细节。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-26T16:26:59.750

### 从 DATETIME 到 unix 时间戳：

`SELECT TIMESTAMPDIFF(SECOND, FROM_UNIXTIME(0), '1956-12-24 01:06:49');`

### 从时间戳到 DATETIME：

`SELECT DATE_ADD(convert_tz(FROM_UNIXTIME(0), @@session.time_zone,'+00:00'), INTERVAL -410914391 SECOND);`

# drupal - 带有复选框的 Drupal 7 向下钻取菜单 - 类似于亚马逊的左侧菜单

> ID：11587565
> 
> 赞同：2
> 
> 时间：2012-07-20T22:06:34.127
> 
> 标签：drupal, checkbox, navigation, drupal-7

我是drupal的新手，所以我在这里学习时正在寻找任何建议。

我正在一个网站上进行分类设置，如下所示：

热门词汇：事件

具有复选框的子词汇：
[] 新事件
[] 过去事件

活动类别
[] 网络研讨会
[] 会议
[] 研讨会

事件主题 ()
[] 主题 1
[] 主题 2
[] 主题 3

当您选中其中一个复选框时，它只会缩小内容区域中显示的内容。

类似于这里的亚马逊菜单：

![亚马逊的菜单](../Images/0cab3ea6358f2aca880360a608846dc3.png)

设置分类后，如何创建这样的菜单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:54:08.410

我在这里找到了我正在寻找的术语......它被称为分面搜索。这里有一个 Drupal 7 模块：http: [//drupal.org/project/facetapi](http://drupal.org/project/facetapi)

这里还有一篇关于最佳实践的好文章：[http ://www.uxmatters.com/mt/archives/2009/09/best-practices-for-designing-faceted-search-filters.php](http://www.uxmatters.com/mt/archives/2009/09/best-practices-for-designing-faceted-search-filters.php)

StackOverflow 上还有另一篇文章：[有谁知道 Drupal 7 的多面搜索解决方案？](https://stackoverflow.com/questions/6161289/does-anyone-know-of-a-faceted-search-solution-for-drupal-7)

我为 Drupal 7 Faceted Search 找到了一些很好的资源：

*   [http://envisioninteractive.com/drupal/drupal-7-views-with-faceted-filters-without-apachesolr/](http://envisioninteractive.com/drupal/drupal-7-views-with-faceted-filters-without-apachesolr/)
*   [http://php.dzone.com/videos/video-walkthrough-faceted](http://php.dzone.com/videos/video-walkthrough-faceted)
*   [http://drupal.org/project/search_api/](http://drupal.org/project/search_api/)
*   [http://www.webbydude.com/posts/10-drupal-faceted-search-tutorial](http://www.webbydude.com/posts/10-drupal-faceted-search-tutorial)
*   [http://nickveenhof.be/blog/screencast-2-creating-facets-apache-solr-drupal-7](http://nickveenhof.be/blog/screencast-2-creating-facets-apache-solr-drupal-7)

我希望这可以帮助寻找诸如分面搜索之类的东西的人。

# facebook - 加载更多提要结果后，Flash 播放器在 Facebook 时间线上消失（从向下滚动）

> ID：11587573
> 
> 赞同：2
> 
> 时间：2012-07-20T22:07:18.337
> 
> 标签：facebook, flash, facebook-timeline

我正在开发一个在人们的 Facebook 个人资料上共享基于 Flash 的音乐播放器的应用程序。在正常配置文件（时间线前）上，它工作正常。在时间线配置文件上，播放器加载并播放，每个人都很高兴，直到您向下滚动并且时间线将更多结果加载到提要中。然后 Flash 播放器从页面上消失（并停止播放音乐）。请注意，这只发生在查看您自己的个人资料时……在其他人的个人资料上打开播放器（时间轴与否）时，滚动时它不会消失。

我已经通过控制台确认，在提要的 iframe 中加载播放器的内容正在*消失*。Flash 播放器并没有处于某种错误的边缘状态，它实际上已经消失了，它的标记也随之消失。

是的，wmode="不透明"。

关于如何在 Facebook 时间线中您自己的个人资料上加载提要结果时保留 Flash 播放器的任何想法？

# javascript - 回调调用本身

> ID：11587576
> 
> 赞同：1
> 
> 时间：2012-07-20T22:07:32.193
> 
> 标签：javascript, node.js, express

我有一个函数可以在数据库的主键列中插入一个随机数。

当号码已经在数据库中时我遇到问题我想再次调用该过程以更改号码并尝试再次插入但我是 Javascript 的新手所以这是我到目前为止提出的代码。

创建随机数的函数：

编辑2：

```
function crearNumero()
{ 
    var aNumeros = new Array
    (
        '1', '2', '3','4','5','6','7','8','9'
    ); 
    var cNumero = aNumeros[Math.floor(Math.random()*aNumeros.length)]; 

    return cNumero;
} 
```

插入数据库的函数：

```
function insertarNumero(Callback)
{
  var sql='INSERT INTO tabla_numero(numero) VALUES(?)';
  var params= [crearNumero()];

  client.query(sql,params,function(err,rows)
  {
    if(err){
      arguments.callee(Callback);
    } else {
      return Callback(params[0]);
    }
  });
} 
```

所以我尝试用这个插入数字：

```
insertarNumero(function(args)
     {
       console.log('el numero ingresado fue '+args);
       console.log('the number inserted was '+args);
        }); 
```

这段代码没问题，但是当号码已经存在时，我不知道如何重复这个过程。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:16:28.713

一种可能性是自动递增而不是随机数。这样会更舒服。

如果你真的想插入随机数，你应该创建一个`unique index`on `numero`。调用您的查询后，您可以检查查询是否成功，如果没有，请检查是否是因为该号码已经存在。（检查 mysql 服务器返回的错误号。）如果失败，则创建一个新的随机数并再次调用您的函数以插入新的数字。

PS：目前，您的数据库中只能存储九行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:21:08.443

您实际上希望将回调函数传递给`insertarNumero`函数，如下所示：

```
function anotherInsert() {
    insertarNumero(crearNumero(), anotherInsert);
} 
```

如果函数失败，这将导致`insertarNumero`函数重新调用此函数。请注意，您可能还应该检查错误代码，这样您就不会尝试多次插入，例如，如果出现连接错误。

**编辑**：鉴于您仍然难以解决您的问题，这里有两种可能对您有所帮助的选择：

```
function insertarNumero(callback) {
    var sql = 'INSERT INTO tabla_numero(numero) VALUES(?)';
    var params = [crearNumero()];

    client.query(sql, params, function(err, rows) {
        if (err) {
            callback(err);
        } else {
            callback();
        }
    });
}

function insert() {
    insertarNumero(function(err) {
        if (err) {
            console.log('failed to insert');
            insert();
        } else {
            console.log('inserted');
        }
    });
} 
```

如果你真的不想要这个`insert()`功能......

```
function insertarNumero(callback) {
    var sql = 'INSERT INTO tabla_numero(numero) VALUES(?)';
    var params = [crearNumero()];

    client.query(sql, params, function(err, rows) {
        if (!err) {
            if (callback) {
                callback(params[0]);
            }
        } else {
            //TODO: Check the error code
            insertarNumero(callback);
        }
    });
}

insertarNumero(function(args) {
    console.log('the number inserted was ' + args);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T22:16:35.790

只需再次调用自己并使用相同的回调传递`arguments.callee`：

```
function insertarNumero(Callback)
{
  var sql='INSERT INTO tabla_numero(numero) VALUES(?)';
  var params= [crearNumero()];

  client.query(sql,params,function(err,rows)
  {
    if(err){
      arguments.callee(Callback);
    } else {
      return Callback();
    }
  });
} 
```

`arguments.callee`与使用此函数的名称相同`insertarNumero`

# iphone - 使用 NEON 指令进行图像阈值处理

> ID：11587577
> 
> 赞同：0
> 
> 时间：2012-07-20T22:07:35.450
> 
> 标签：iphone, ios, c, assembly, neon

我正在为 iOS 开发一些图像处理应用程序，阈值确实是一个巨大的瓶颈。所以我正在尝试使用 NEON 对其进行优化。这是函数的C版本。有没有办法用 NEON 重写它（不幸的是我完全没有这方面的经验）？

```
static void thresh_8u( const Image& _src, Image& _dst, uchar thresh, uchar maxval, int type ) {
    int i, j;
    uchar tab[256];
    Size roi = _src.size();
    roi.width *= _src.channels();

    memset(&tab[0], 0, thresh);
    memset(&tab[thresh], maxval, 256-thresh);

    for( i = 0; i < roi.height; i++ ) {
        const uchar* src = (const uchar*)(_src.data + _src.step*i);
        uchar* dst = (uchar*)(_dst.data + _dst.step*i);
        j = 0;

        for(; j <= roi.width; ++j) {
            dst[j] = tab[src[j]];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T22:54:22.073

如果你能确保你的行总是 16 字节宽的倍数，这实际上很容易，因为编译器 (clang) 具有表示 NEON 向量寄存器的特殊类型，并且知道如何将普通的 C 运算符应用于它们。这是我的小测试功能：

```
#ifdef __ARM_NEON__

#include <arm_neon.h>

void computeThreshold(void *input, void *output, int count, uint8_t threshold, uint8_t highValue) {
    uint8x16_t thresholdVector = vdupq_n_u8(threshold);
    uint8x16_t highValueVector = vdupq_n_u8(highValue);
    uint8x16_t *__restrict inputVector = (uint8x16_t *)input;
    uint8x16_t *__restrict outputVector = (uint8x16_t *)output;
    for ( ; count > 0; count -= 16, ++inputVector, ++outputVector) {
        *outputVector = (*inputVector > thresholdVector) & highValueVector;
    }
}

#endif 
```

这一次对 16 个字节进行操作。A`uint8x16_t`是一个向量寄存器，包含 16 个 8 位无符号整数。返回一个填充了其参数的 16 个副本的向量`vdupq_n_u8`。`uint8x16_t`

该`>`运算符应用于两个`uint8x16_t`值，在 8 位无符号整数对之间进行 16 次比较。如果左输入大于右输入，则返回 0xff（与普通 C 不同`>`，后者仅返回 0x01）。当左输入小于或等于右输入时，返回 0。（编译成 VCGT.U8 指令。）

该`&`运算符应用于两个`uint8x16_t`值，计算 128 对位的布尔 AND。

循环在发布版本中编译为此：

```
0x6e668:  vldmia r2, {d4, d5}
0x6e66c:  subs   r0, #16
0x6e66e:  vcgt.u8 q10, q10, q8
0x6e672:  adds   r2, #16
0x6e674:  cmp    r0, #0
0x6e676:  vand   q10, q10, q9
0x6e67a:  vstmia r1, {d4, d5}
0x6e67e:  add.w  r1, r1, #16
0x6e682:  bgt    0x6e668 
```

# amazon-ec2 - 将 IBM RAD 与 Amazon EC2 上的 Websphere 集成

> ID：11587583
> 
> 赞同：1
> 
> 时间：2012-07-20T22:07:55.977
> 
> 标签：amazon-ec2, websphere-7, websphere-portal

我没有太多的硬件资源，所以我想直接在云中使用 RAD。是否可以使用 IBM RAD IDE 直接在 Amazon EC2 基础 Websphere 实例上开发门户应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:32:47.857

If you mean portlets as in JSR286 running on a WebSphere Portal Server - then I would say no.

The installation process of a WebSphere Portal is somewhat elaborate and I would not think, that you will manage to install the portal server on the Amazon Cloud. Even though the Portal is indeed a WebSphere Application.

Portal is kind of picky about its requirements - especially during the installation process.

# python - 为循环python中的变量分配临时值

> ID：11587588
> 
> 赞同：1
> 
> 时间：2012-07-20T22:08:15.920
> 
> 标签：python, list, if-statement, dictionary

我有一个需要冒泡排序的项目列表。冒泡排序标准是如果 item在大多数结果集中的`j`排名高于 item ，则将 item与 item in交换。除了一个小问题，我想出了一个非常简单的冒泡排序。当项目未出现在其中一个结果集中时，我收到一个关键错误。我需要输入一个值来弥补这一点，否则我的循环会因大量 if 语句而变得非常复杂。如果我可以为字典中不存在的任何值分配一个标记值，例如 20，那么我的循环将是完美的。谁能帮我吗？`i``j``i``FullList``FullList`

```
FullList = [B,C,A,D,H,E,F,G]

Results1 = {'A':1,'B':2,'C':3,'D':4,'E':5}
Results2 = {'B':1,'D':2,'G':3,'F':4,'E':5}
Results3 = {'C':1,'D':2,'B':3,'A':4,'H':5}

Pseudo Code:

switch = True
while(switch):
switch = False
    for i in range(len(FullList)-1):
        if FullList[i+1]<FullList[i] in Results1 & 2:
           FullList[i],FullList[i+1] = FullList[i+1],FullList[i]
           switch = True
        elif FullList[i+1]<FullList[i] in Results1 & 3:
             FullList[i],FullList[i+1] = FullList[i+1],FullList[i]
             switch = True
        elif FullList[i+1]<FullList[i] in Results2 & 3:
             FullList[i],FullList[i+1] = FullList[i+1],FullList[i]
             switch = True

Key-Error: 'A' not in 'Results2' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:32:26.713

如果您`get`在获取排名时使用 dict 的方法，则可以在 key 不存在时提供默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:33:27.020

不确切知道您要做什么，但似乎`get(key[, default])`是您需要的，您可以在[此处查看详细信息](http://docs.python.org/library/stdtypes.html#dict.get)

在你的情况下，`Results2.get('A', 20)`会给你20

# ios - iOS 应用内购买 - 使用超时是否明智？

> ID：11587593
> 
> 赞同：3
> 
> 时间：2012-07-20T22:08:26.360
> 
> 标签：ios, timeout, in-app-purchase, uiactivityindicatorview, mkstorekit

我正在努力实现应用内购买，我真的很担心使用超时方法。从商店加载产品时超时似乎没问题；但我担心的是在购买过程中使用超时。作为我超时的一部分，我认为我需要停止所有处理，我担心这可能很危险，特别是因为涉及付款。但是如果没有超时，恐怕用户可能会无限期地挂起；或者，在不停止处理的超时情况下，用户可以重试该过程，而不知道还有一个进程仍在挂起。我会感谢任何在 iOS 中成功实现此功能的人的最佳实践编码智慧的话。

添加一些注释：我正在使用 MKStoreKit；当我写上面的问题时，我已经把它变成了一个非单例（所以作为超时的一部分，我取消了商店，我认为这是一个坏主意）。现在 store 是一个单例，并且一旦实例化就一直存在。我在加载产品以及购买/恢复时显示活动指示器；从这些操作收到的通知会停止活动指示器。

到目前为止，一切对我来说都很好，但我想知道，从那些已经实施的人那里，你是否经常发现你没有收到通知，或者很长时间没有收到通知。基本上，我想弄清楚是否需要为我的 StoreKit 进程实现超时计时器，即使我收到了通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T06:22:37.040

切勿在应用内购买中实现超时功能。这是一种不好的方法，因为由于您的网络连接 (Wi-fi) 强度/速度和网络负载，应用内购买需要时间。

我遇到了同样的问题，即我的应用内购买需要很长时间才能完成。

我添加了一个`UIActivityIndicator`用于显示正在发生的过程。

显示 a`UIActivityIndicator`似乎很无聊，所以我使用[了 MBProgressHUD](https://github.com/jdg/MBProgressHUD)并在其上添加了一些有用的消息。

# css - CSS/div 的新手...卡住添加广告块

> ID：11587594
> 
> 赞同：1
> 
> 时间：2012-07-20T22:08:29.697
> 
> 标签：css, layout, html

在用非常基本的 HTML（没有 CSS）编辑我的网站多年后，我决定是时候加入现实世界并尝试一些适当的代码了。我只是设法了解 CSS，因为我意识到使用表格来布置我的网站，就像我过去所做的那样，并不是解决它的最佳方式。问题是我在试图绕过 div 标签时碰了壁。

我要复制的是与这个旧式页面一样的广告块：http: [//pageantupdate.info/missusa2012/statepageantcalendar.htm](http://pageantupdate.info/missusa2012/statepageantcalendar.htm)

目前我遇到了这种情况： http: [//pageantupdate.info/missusa2013/statepageantcalendar.htm](http://pageantupdate.info/missusa2013/statepageantcalendar.htm)

我需要弄清楚的是如何浮动/移动水平广告框，使其与右上角的主文本区域齐平。我试图将代码移到标题框等的上方，但是 float:right 将其一直移动到页面的右侧，而不仅仅是框。

我猜问题是我仍在使用表格来处理其他东西！

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:15:11.917

您提供的两个超链接是同一页面。我不建议用 css 替换标记的某些位，而不是其余的。

# android - Activity.showDialog(int)、Activity.removeDialog(int) 已弃用

> ID：11587600
> 
> 赞同：1
> 
> 时间：2012-07-20T22:09:24.947
> 
> 标签：android

在这个问题[Dialog.show() 与 Activity.showDialog()](https://stackoverflow.com/questions/3170308/dialog-show-vs-activity-showdialog?rq=1) 中，建议使用 2010 年的 showDialog()。我需要支持 Android 2.1-4.1，所以我应该保留这个已弃用的代码还是更改它？弃用的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:10:45.230

Android UI 现在基于片段，因此您应该使用 DialogFragment。

它包含在支持库 v4 中，因此您也可以在 Android v2.1 中使用它。

带有示例的博客文章：

[http://android-developers.blogspot.co.il/2012/05/using-dialogfragments.html](http://android-developers.blogspot.co.il/2012/05/using-dialogfragments.html)

文档：

[http://developer.android.com/reference/android/support/v4/app/DialogFragment.html](http://developer.android.com/reference/android/support/v4/app/DialogFragment.html)

# eclipse-plugin - 将 Eclipse RCP 产品插件放在不同的文件夹中

> ID：11587602
> 
> 赞同：1
> 
> 时间：2012-07-20T22:10:00.943
> 
> 标签：eclipse-plugin, eclipse-rcp

是否可以为 RCP 产品的 .exe 旁边通常存在的默认插件文件夹指定不同的文件夹？

## 正常设置：

```
Root
   |- product.exe
   |- product.ini
   |-- Plugins [Folder]
   | -- Configuration [Folder] 
```

## 所需设置：

```
Product
   |- product.exe
   |- product.ini
JarFiles [Folder]
   |- *.jar
Config
   |- config.ini 
```

[我已尝试根据此处列出](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)的设置更新我的 product.ini 中的一些条目以使其正常工作，例如：

--launcher.library=@user.dir/../JarFiles

或者

--launcher.library=../JarFiles

但是当我启动时出现错误消息：

```
The Product executable launcher was unable to locate its companion shared library. 
```

是否有任何运行时参数我可以指定正确地告诉 .exe 插件和配置文件夹在其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:19:08.173

您的`launcher.library`输入不完整。它必须[直接指向包含启动器 DLL 的插件](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/misc/launcher.html)，而不仅仅是指向您的插件文件夹，所以它应该看起来像

```
--launcher.library
../JarFiles/org.eclipse.equinox.launcher.[your.operating.system][architecture][version] 
```

查看您的安装以获取占位符的特定条目。如果您现在还使用该选项指向更改的配置文件夹`-configuration`，那么您就可以开始了。

# php - 为 cms 创建拖放类别构建器

> ID：11587604
> 
> 赞同：0
> 
> 时间：2012-07-20T22:10:06.940
> 
> 标签：php, jquery, mysql, jquery-ui, drag-and-drop

我正在尝试构建一个拖放类别构建器。我喜欢 wordpress 自定义菜单的工作方式，但我的问题是我创建它的网站有多达 6 个子类别和大约 60-70 个类别。我宁愿构建菜单，然后单击保存菜单按钮以放置到 mysql 数据库中，这样每次更改时它并不总是耗尽资源。我已经在网上搜索了 2 天，试图找到正确的答案。有人愿意为我指出正确的方向吗？我查看了nestedSortable jQuery 插件，但我必须能够编辑类别名称或完全删除类别。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:08:49.323

[ImpressPages CMS](http://www.impresspages.org)以拖放方式为您提供菜单管理。

# ruby-on-rails - 如何在非设计视图中显示所有设计用户

> ID：11587606
> 
> 赞同：1
> 
> 时间：2012-07-20T22:10:25.433
> 
> 标签：ruby-on-rails, devise

Rails 3.2.3 和 Devise 2.1

我只是想创建一个我认为会显示所有用户的简单页面。用户由 Devise 控制。用户有个人资料图片和电子邮件地址。所有设计视图都工作正常。

我已经尝试了其他地方看到的一些建议，例如在新的 user_controller 或 application_controller 中定义用户，但我的定义没有传递到其他页面。我不断收到相同的错误消息集。

我的路线运行良好。我已经让上传器和模型中的所有载波工作正常。我似乎无法在任何设计的东西之外找到“用户”。我知道我很愚蠢，希望显而易见的事情变得显而易见，但是。. .

我目前的错误是：

```
undefined method `image_url' for nil:NilClass 
```

我的页面显示用户：

```
<% provide(:title, 'Our Users') %>
<div class="center hero-unit">
  <div>
    <h2>Our Users</h2>
    <%= render 'shared/user' %>
  </div>
</div> 
```

帮手：

```
<div>
  <%= image_tag user.image_url(:thumb).to_s %>
  <h5><%= user.email %></h5>
</div> 
```

我在 users_controller 中尝试了各种方法，但似乎没有任何效果。我尝试将资源 :users 添加到我的路线中。没有帮助。

任何提示，指针等将不胜感激。我已经为此花费了 4 个小时，以免不必要地干扰 stackoverflow 部落，但我被难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T17:13:50.160

解决了！我试图在非设计控制器中定义我的用户。然后在我看来使用它：

```
<% @users.each do |user| %>
  <%= image_tag user.image_url(:thumb).to_s %>
  <%= user.email %><br/>
<% end %> 
```

我放弃了新的 user_controller，只是将我的观点改为：

```
<% @users = User.all %>
<% @users.each do |user| %>
  <%= image_tag user.image_url(:thumb).to_s %>
  <%= user.email %><br/>
<% end %> 
```

砰！直接出现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:14:14.490

Ỳou 应该像普通模型一样找到您的用户，如下所示：

```
user = User.find(1)
user.email 
```

对于当前用户，您可以执行`current_user.email`

在控制器中，您应该这样做：

```
@users = User.all 
```

在你看来

```
<% @users.each do |user| %>
  <%= user.email %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T22:14:21.753

要打印所有用户设置[rails 部分集合渲染](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections)，`User.all`提供：

```
<% provide(:title, 'Our Users') %>
    <div class="center hero-unit">
      <div>
        <h2>Our Users</h2>
        <%= render 'shared/user', :collection=>User.all %>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-03T03:45:55.487

作为这个问题的更新。截至今天，@Dougui 提供的答案目前正在为 Devise 工作。自 2012 年以来，设计 gem 中可能已经更新了某些内容，但现在您可以`@users = User.all`在控制器中定义以在视图中访问它。只需确保将其放置在`def`该页面的 a 中即可。例如，如果您有一个用于各种页面的 Pages 控制器，并且您想要站点上用户的 rolodex，请确保在 rolodex 页面下定义了变量，如下所示：（请注意，在此示例中，该变量仅可用到通讯录页面。）

*应用程序/控制器/pages_controller.rb*

```
class PagesController < ApplicationController
  def home
  end

  def contact
  end

  def rolodex
    @users = User.all
  end
end 
```

*应用程序/视图/页面/rolodex.html.erb*

```
<h1>Current User Rolodex</h1>
<% @users.each do |user| %>
  <%= image_tag user.image_url(:thumb).to_s %>
  <h5><%= user.email %></h5>
  <br>
<% end %> 
```

如果您希望该`@users`变量可用于多个页面，那么您可以在控制器顶部要求它，私下定义它，然后限制哪些页面可以访问该变量。这是一个例子：

*应用程序/控制器/pages_controller.rb*

```
class PagesController < ApplicationController
  before_action :get_users, only: [:rolodex, :friends]

  def home
  end

  def contact
  end

  def rolodex
  end

  def friends
  end

  private

  def get_users
     @users = User.all
  end
end 
```

# sql - Google App Engine 中的免费 SQL

> ID：11587612
> 
> 赞同：2
> 
> 时间：2012-07-20T22:11:02.927
> 
> 标签：sql, google-app-engine

我是 GAE 的新手，我正在尝试开发一个应用程序来学习。我需要使用 SQL，但是当我在 GAE 网站上搜索时，GAE 的 SQL（Cloud SQL）不再是免费的。有谁知道我可以在GAE App中免费使用SQL的一些方法？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:17:15.390

如果您有兴趣了解使用 SQL 进行 Google App Engine 开发，可以[使用 MySQL 的本地实例](https://developers.google.com/appengine/docs/python/cloud-sql/developers-guide#using_the_python_development_server)和 Python`dev_appserver`环境进行试验。虽然这与部署到生产环境并不完全相同，但您将能够学到很多关于 App Engine 开发的知识。

# android - Android ListView SectionIndexer

> ID：11587613
> 
> 赞同：1
> 
> 时间：2012-07-20T22:11:23.813
> 
> 标签：android, listview, android-listview, listadapter, fastscroll

我通常使用节索引器没有问题，但这是我想要做的：

我有一个使用标题和条目的按字母顺序排列的列表——它们都很完美。但是我想在 A 部分上方添加自定义列表项。我可以做到这一点没问题，但是当我在这些项目上时，我不希望部分索引器覆盖显示。我如何告诉部分索引器在这些部分上方时不显示其覆盖（仍然保持快速滚动条在侧面）。

请注意，这些区域必须使用sections 数组注册，否则快速滚动条将无法完美对齐。因此，我只需要一种方法来告诉覆盖显示或不显示。

提前致谢。

# javascript - MongoDB：如何查找嵌入文档中的项目数？

> ID：11587617
> 
> 赞同：2
> 
> 时间：2012-07-20T22:11:54.413
> 
> 标签：javascript, mongodb

我的架构看起来像

```
name:
value:
p_vars: {
    name1: {},
    name2: {},
} 
```

我想计算`p_vars`.

认为口译员是`JavaScript`，我试过 了

```
db.collection.findOne().p_vars.length 
```

但没有任何回报

**答案应该是**

考虑到上述情况，答案应该是 2（两个项目`name1`和`name2`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:52:40.037

这里最简单的解决方案是更改您的架构以使用 p_vars 数组，这听起来就像您想要的那样。相反，如果架构是：

```
name:
value:
p_vars: [
    name1: {},
    name2: {},
] 
```

然后该`db.collection.findOne().p_vars.length`命令将按您的预期返回 2 。

使用原始模式，我认为您唯一的选择是编写一个 JS 函数来手动迭代和计算元素。

# logging - 无法加载类“org.slf4j.impl.StaticLoggerBinder”错误

> ID：11587627
> 
> 赞同：11
> 
> 时间：2012-07-20T22:13:02.383
> 
> 标签：logging, log4j, maven-3, slf4j

尽管我遵循了规则，但我收到“**无法加载类”org.slf4j.impl.StaticLoggerBinder** “错误：

***放置一个（也是唯一一个）slf4j-nop.jar、slf4j-simple.jar、slf4j-log4j12.jar、slf4j-jdk14.jar 或 logback-classic.jar***

如果有人可以帮助我，我会很高兴，在此先感谢..

* * *

**这是我的依赖项：**

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${slf4j.version}</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

**这是maven依赖树的输出：**

```
[INFO] com.tk.sample:ext4:jar:1.0
[INFO] +- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.1:compile
[INFO] +- log4j:log4j:jar:1.2.15:compile
[INFO] |  \- javax.mail:mail:jar:1.4:compile
[INFO] |     \- javax.activation:activation:jar:1.1:compile
[INFO] +- commons-lang:commons-lang:jar:2.5:compile
[INFO] +- junit:junit:jar:4.8.2:test (scope not updated to compile)
[INFO] +- org.easymock:easymock:jar:3.0:test
[INFO] |  \- org.objenesis:objenesis:jar:1.2:test
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- taglibs:standard:jar:1.1.2:compile
[INFO] +- javax.servlet:jstl:jar:1.2:compile
[INFO] +- org.springframework:spring-core:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-expression:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-beans:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-context:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-asm:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-aop:jar:3.1.1.RELEASE:compile
[INFO] |  \- aopalliance:aopalliance:jar:1.0:compile
[INFO] +- org.springframework:spring-web:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-tx:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-jdbc:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-webmvc:jar:3.1.1.RELEASE:compile
[INFO] |  \- org.springframework:spring-context-support:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-orm:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-oxm:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-jms:jar:3.1.1.RELEASE:compile
[INFO] +- org.springframework:spring-test:jar:3.1.1.RELEASE:compile
[INFO] +- cglib:cglib-nodep:jar:2.2.2:runtime
[INFO] +- org.aspectj:aspectjrt:jar:1.6.11:compile
[INFO] +- org.aspectj:aspectjweaver:jar:1.6.11:compile
[INFO] +- org.hibernate:hibernate-core:jar:4.1.1.Final:compile
[INFO] |  +- antlr:antlr:jar:2.7.7:compile
[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile
[INFO] |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  +- org.javassist:javassist:jar:3.15.0-GA:compile
[INFO] |  \- org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:compile
[INFO] +- org.hibernate:hibernate-c3p0:jar:4.1.1.Final:compile
[INFO] |  \- c3p0:c3p0:jar:0.9.1:compile
[INFO] +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Final:compile
[INFO] +- org.hibernate:hibernate-entitymanager:jar:4.1.1.Final:compile
[INFO] +- net.sf.json-lib:json-lib:jar:jdk15:2.4:compile
[INFO] |  +- commons-beanutils:commons-beanutils:jar:1.8.0:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  \- net.sf.ezmorph:ezmorph:jar:1.0.6:compile
[INFO] +- mysql:mysql-connector-java:jar:5.1.20:compile
[INFO] +- commons-io:commons-io:jar:1.3.2:compile
[INFO] +- commons-fileupload:commons-fileupload:jar:1.2.1:compile
[INFO] +- commons-dbcp:commons-dbcp:jar:1.4:compile
[INFO] |  \- commons-pool:commons-pool:jar:1.5.4:compile
[INFO] +- javax.xml:jaxrpc-api:jar:1.1:compile
[INFO] +- commons-discovery:commons-discovery:jar:0.4:compile
[INFO] +- javax.transaction:jta:jar:1.1:compile
[INFO] +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- com.itextpdf:itextpdf:jar:5.3.0:compile
[INFO] +- net.sf.jasperreports:jasperreports:jar:4.6.0:compile
[INFO] |  +- commons-digester:commons-digester:jar:2.1:compile
[INFO] |  +- com.lowagie:itext:jar:2.1.7:compile
[INFO] |  |  +- bouncycastle:bcmail-jdk14:jar:138:compile
[INFO] |  |  +- bouncycastle:bcprov-jdk14:jar:138:compile
[INFO] |  |  \- org.bouncycastle:bctsp-jdk14:jar:1.38:compile
[INFO] |  |     +- org.bouncycastle:bcprov-jdk14:jar:1.38:compile
[INFO] |  |     \- org.bouncycastle:bcmail-jdk14:jar:1.38:compile
[INFO] |  +- jfree:jcommon:jar:1.0.15:compile
[INFO] |  +- jfree:jfreechart:jar:1.0.12:compile
[INFO] |  +- xml-apis:xml-apis:jar:1.3.02:compile
[INFO] |  +- eclipse:jdtcore:jar:3.1.0:compile
[INFO] |  +- org.codehaus.castor:castor:jar:1.2:compile
[INFO] |  +- org.apache.poi:poi-ooxml:jar:3.7:compile
[INFO] |  |  +- org.apache.poi:poi:jar:3.7:compile
[INFO] |  |  \- org.apache.poi:poi-ooxml-schemas:jar:3.7:compile
[INFO] |  |     +- org.apache.xmlbeans:xmlbeans:jar:2.3.0:compile
[INFO] |  |     |  \- stax:stax-api:jar:1.0.1:compile
[INFO] |  |     \- org.apache.geronimo.specs:geronimo-stax-api_1.0_spec:jar:1.0:compile
[INFO] |  +- org.codehaus.jackson:jackson-core-asl:jar:1.9.4:compile
[INFO] |  \- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.4:compile
[INFO] +- org.twitter4j:twitter4j-core:jar:2.2.5:compile
[INFO] \- org.codehaus.mojo:emma-maven-plugin:jar:1.0-alpha-3:compile
[INFO]    +- emma:emma:jar:2.1.5320:compile
[INFO]    +- org.apache.maven:maven-artifact:jar:2.0.8:compile
[INFO]    +- org.apache.maven:maven-plugin-api:jar:2.0:compile
[INFO]    +- org.apache.maven:maven-model:jar:2.0.8:compile
[INFO]    +- org.apache.maven:maven-project:jar:2.0.8:compile
[INFO]    |  +- org.apache.maven:maven-settings:jar:2.0.8:compile
[INFO]    |  +- org.apache.maven:maven-profile:jar:2.0.8:compile
[INFO]    |  +- org.apache.maven:maven-artifact-manager:jar:2.0.8:compile
[INFO]    |  |  +- org.apache.maven:maven-repository-metadata:jar:2.0.8:compile
[INFO]    |  |  \- org.apache.maven.wagon:wagon-provider-api:jar:1.0-beta-2:compile
[INFO]    |  +- org.apache.maven:maven-plugin-registry:jar:2.0.8:compile
[INFO]    |  \- org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1:compile
[INFO]    |     \- classworlds:classworlds:jar:1.1-alpha-2:compile
[INFO]    +- org.apache.maven.doxia:doxia-site-renderer:jar:1.0:compile
[INFO]    |  +- org.apache.maven.doxia:doxia-core:jar:1.0:compile
[INFO]    |  +- org.apache.maven.doxia:doxia-sink-api:jar:1.0:compile
[INFO]    |  +- org.codehaus.plexus:plexus-i18n:jar:1.0-beta-7:compile
[INFO]    |  +- org.codehaus.plexus:plexus-velocity:jar:1.1.7:compile
[INFO]    |  +- org.apache.velocity:velocity:jar:1.5:compile
[INFO]    |  |  \- oro:oro:jar:2.0.8:compile
[INFO]    |  +- org.apache.maven.doxia:doxia-decoration-model:jar:1.0:compile
[INFO]    |  +- org.apache.maven.doxia:doxia-module-apt:jar:1.0:compile
[INFO]    |  +- org.apache.maven.doxia:doxia-module-fml:jar:1.0:compile
[INFO]    |  +- org.apache.maven.doxia:doxia-module-xdoc:jar:1.0:compile
[INFO]    |  \- org.apache.maven.doxia:doxia-module-xhtml:jar:1.0:compile
[INFO]    +- org.apache.maven.reporting:maven-reporting-api:jar:2.0.8:compile
[INFO]    +- org.apache.maven.reporting:maven-reporting-impl:jar:2.0.4.2:compile
[INFO]    |  \- commons-validator:commons-validator:jar:1.2.0:compile
[INFO]    +- org.codehaus.plexus:plexus-utils:jar:1.4.5:compile
[INFO]    \- xom:xom:jar:1.1:compile
[INFO]       +- xerces:xmlParserAPIs:jar:2.6.2:compile
[INFO]       +- xerces:xercesImpl:jar:2.6.2:compile
[INFO]       \- jaxen:jaxen:jar:1.1-beta-8:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

**完整的错误堆栈跟踪：**

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T07:02:10.370

终于找到问题了；我正在使用的 IDE - **IntelliJ Idea** - 需要**显式显示 slf4j 依赖项以构建工件**。非常感谢您的关心**Ceki** ..

# javascript - JS函数尽可能简单，超链接语法

> ID：11587628
> 
> 赞同：0
> 
> 时间：2012-07-20T22:13:07.123
> 
> 标签：javascript, function, syntax, call

有人可以解释为什么[在这个例子](http://jsfiddle.net/smkqW/2/)中，函数没有触发吗？我已经将其简化为最简单的事情，而且我一定有错字或超链接的语法错误。

JS

```
function takePic(type){
    alert(type);
} 
```

HTML

```
<a href="javascript:void(0)" onclick="takePic('1');">Track Progress</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:15:38.623

在“选择框架”下拉菜单中更改`onLoad`为。`no wrap (head)`使用 onLoad，函数被包装在另一个函数中，并且没有全局范围。

[http://jsfiddle.net/smkqW/3/](http://jsfiddle.net/smkqW/3/)

# javascript - 更新骨干模型

> ID：11587629
> 
> 赞同：0
> 
> 时间：2012-07-20T22:13:16.520
> 
> 标签：javascript, backbone.js

我创建了一个这样的主干集合，在我的视图中实例化

```
define(['underscore','backbone','models/task'],function( _,Backbone,Task) {
    var TaskCollection = Backbone.Collection.extend({
        //Model
        model:Task,
        //api url
        url:'',

        methodToURL: {
        'read': './api/tasks/index',
        'create': './api/tasks/task',
        'update': './api/tasks/task',
        'delete': './api/tasks/task'
        },

        sync: function(method, model, options) {
            options = options || {};
            options.url = this.methodToURL[method.toLowerCase()];

            Backbone.sync(method, model, options);
        },
        //construct
        initialize: function() {
            this.sort_key = 'end';
            this._model = new Task();
            this.fetch();
        },

        comparator: function(a,b) {
            a = a.get(this.sort_key);
            b = b.get(this.sort_key);
            return a > b ?  1
                 : a < b ? -1
                 :          0;
        },

        mark_complete: function(task_id) {
            var task_status = 0;
            console.log(this._model);
            this._model.save({id:task_id,task_status:task_status});
        },

        mark_incomplete: function(task_id) {

        },

        sort_by_status: function() {
            this.sort_key = 'task_status';
            this.sort();
        },

        sort_by_task_tag: function() {
            this.sort_key = 'task_group';
            this.sort();
        }
    });
    return TaskCollection;
}); 
```

当单击 dom 元素时，将调用集合上的 mark_complete 方法。“this._model.save({id:task_id,task_status:task_status});” 发出 PUT 请求，但未发送参数。

# python - 在 Linux x86_64 for PowerPC 上交叉编译 Python 的 greenlet 和 gevent

> ID：11587635
> 
> 赞同：2
> 
> 时间：2012-07-20T22:13:51.210
> 
> 标签：python, linux, cross-compiling, gevent, greenlets

在我的 Linux x86_64 主机上，我正在尝试为我的 PowerPC 目标交叉编译一些额外的 Python 模块，特别是[greenlet](http://pypi.python.org/pypi/greenlet)、[gevent](http://pypi.python.org/pypi/gevent)和[gevent-websockets](http://pypi.python.org/pypi/gevent-websocket/)。目前，我只是试图交叉构建greenlet模块。

使用来自本网站的信息：

[http://randomsplat.com/id5-cross-compiling-python-for-embedded-linux.html](http://randomsplat.com/id5-cross-compiling-python-for-embedded-linux.html)

我能够使用此设置为我的构建环境交叉编译 Python 2.7.2

```
# Undo variables for cross-compile environment
unset ROOT
unset SDKDIR
unset KLIBDIR
unset NFSDIR
unset CONFIG
unset CONFIGURED
unset ARCH
unset OS
unset TOOLCHAIN_BASE
unset TOOLCHAIN_BIN
unset CROSS_COMPILE
unset c
unset KERNEL_DIR
unset AS
unset LD
unset CC
unset AR
unset STRIP
unset SSTRIP
unset OBJCOPY
unset OBJDUMP
unset MAKE
unset CFLAGS

# Set cross-compile variables:
export TOOLCHAIN=/opt/freescale/usr/local/gcc-4.3.74-eglibc-2.8.74-dp-2/powerpc-none-linux-gnuspe/bin/powerpc-none-linux-gnuspe-
export CC=${TOOLCHAIN}gcc
export CXX=${TOOLCHAIN}g++
export AR=${TOOLCHAIN}ar
export RANLIB=${TOOLCHAIN}ranlib
export BLDSHARED="${TOOLCHAIN}gcc -shared"
export LDSHARED="${TOOLCHAIN}gcc -shared"
export RFS="../../ltib/rootfs"
export CFLAGS="-save-temps -Wall -I${RFS}/usr/include -I${RFS}/include/python2.7 -L${RFS}/usr/lib -L${RFS}/lib"
export LDFLAGS="-I${RFS}/usr/include -I${RFS}/include/python2.7 -L${RFS}/usr/lib -L${RFS}/lib"
export CROSS_COMPILE=ppc-linux
export CROSS_COMPILE_TARGET=yes
export HOSTARCH=ppc-linux
export BUILDARCH=x86_64-linux-gnu 
```

使用上述脚本配置我的环境，然后尝试构建 greenlet 模块会产生：

```
$ python ./setup.py build
running build
running build_ext
building 'greenlet' extension
creating build
creating build/temp.linux-x86_64-2.7
/opt/freescale/usr/local/gcc-4.3.74-eglibc-2.8.74-dp-2/powerpc-none-linux-gnuspe/bin/powerpc-none-linux-gnuspe-gcc -I../../../ltib/rootfs/usr/include -L../../../ltib/rootfs/usr/lib -L../../../ltib/rootfs/lib -fPIC -I/usr/include/python2.7 -c greenlet.c -o build/temp.linux-x86_64-2.7/greenlet.o
In file included from /usr/include/python2.7/Python.h:58,
                 from greenlet.h:8,
                 from greenlet.c:5:
/usr/include/python2.7/pyport.h:849:2: error: #error "LONG_BIT definition appears wrong for platform (bad gcc/glibc config?)."
error: command '/opt/freescale/usr/local/gcc-4.3.74-eglibc-2.8.74-dp-2/powerpc-none-linux-gnuspe/bin/powerpc-none-linux-gnuspe-gcc' failed with exit status 1 
```

为什么 setup.py 从`/usr/include/python2.7`我的主机系统中提取？我在我的目标上找不到那个目录。如何为我的目标创建它？

有什么建议么？

谢谢！

特雷弗

# 更新＃1：

我对目标 rootfs 的主机副本的相对引用不正确。更正它并重新运行产量：

```
$ python ./setup.py build
running build
running build_ext
building 'greenlet' extension
creating build
creating build/temp.linux-x86_64-2.7
/opt/freescale/usr/local/gcc-4.3.74-eglibc-2.8.74-dp-2/powerpc-none-linux-gnuspe/bin/powerpc-none-linux-gnuspe-gcc -save-temps -Wall -I../../ltib/rootfs/usr/include -I../../ltib/rootfs/include/python2.7 -L../../ltib/rootfs/usr/lib -L../../ltib/rootfs/lib -fPIC -I/usr/include/python2.7 -c greenlet.c -o build/temp.linux-x86_64-2.7/greenlet.o
greenlet.s: Assembler messages:
greenlet.s:832: Error: syntax error; found `(' but expected `,'
greenlet.s:832: Error: junk at end of line: `(31),1'
error: command '/opt/freescale/usr/local/gcc-4.3.74-eglibc-2.8.74-dp-2/powerpc-none-linux-gnuspe/bin/powerpc-none-linux-gnuspe-gcc' failed with exit status 1 
```

至少它找到了更多我的目标包含库，但现在我真的很难过！:(

还有什么建议吗？

谢谢！

# 更新#2：

通过将`-save-temps`标志添加到编译器（上面更新了错误），我能够保存并检查上面错误消息中提到的中间汇编代码。虚线是：

```
#APP
 # 52 "platform/switch_ppc_linux.h" 1
    mr 8(31), 1
 # 0 "" 2 
```

MR（移动寄存器）操作相当简单，只接受 2 个 args ( `mr to-reg, from-reg`)。我不知道如何添加带有附加注册号的括号。FWIW，这是上述头文件中引用的宏：

```
#define STACK_REFPLUS 1

#ifdef SLP_EVAL

#define STACK_MAGIC 3

/* !!!!WARNING!!!! need to add "r31" in the next line if this header file
 * is meant to be compiled non-dynamically!
 */
#define REGS_TO_SAVE "r13", "r14", "r15", "r16", "r17", "r18", "r19", "r20", \
       "r21", "r22", "r23", "r24", "r25", "r26", "r27", "r28", "r29", \
       "cr2", "cr3", "cr4"
static int
slp_switch(void)
{
    register int *stackref, stsizediff;
    __asm__ volatile ("" : : : REGS_TO_SAVE);
    __asm__ ("mr %0, 1" : "=g" (stackref) : );
    {
        SLP_SAVE_STATE(stackref, stsizediff);
        __asm__ volatile (
            "mr 11, %0\n"
            "add 1, 1, 11\n"
            "add 30, 30, 11\n"
            : /* no outputs */
            : "g" (stsizediff)
            : "11"
            );
        SLP_RESTORE_STATE();
    }
    __asm__ volatile ("" : : : REGS_TO_SAVE);
    return 0;
}

#endif 
```

我开始怀疑这是否是编译器中的错误，因为宏看起来很简单！有什么建议么？... 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:15:30.660

也许你应该问一个新问题，因为这里确实（至少）有两个完全独立的问题。但是，看看你的第二个问题：

```
__asm__ ("mr %0, 1" : "=g" (stackref) : ); 
```

这是错误的。我将在下面解释原因，但首先，以下更改可能会解决它：

```
__asm__ ("mr %0, 1" : "=r" (stackref) : ); 
```

您可能还需要将`"g" (stsizediff)`以下内容更改为`"r" (stsizediff)`.

那么，现有版本有什么问题？首先，看看stackref是如何定义的：

```
register int *stackref, stsizediff; 
```

这`register`是对编译器的一个提示，说你认为如果它分配一个寄存器`stackref`而不是使用堆栈位置，它可能会使事情变得更快或更好，而不是要求。如果`stackref`最终出现在 R12 中，那就太好了；如果它在堆栈帧中结束了 8 个字节，那也没关系。任何一个都是完全合法的，只要它不违反任何限制。

那么，有什么限制`stackref`呢？唯一的一个在上面引用的那个 asm 块中。你有`"=g" (stackref)`一个输出操作数。这`=`意味着它是一个只写约束，并且`g`意味着它必须在寄存器、内存位置或立即值中。

所以编译器没有做错任何事情。它从堆栈中分配`stackref`8 个字节，这与约束匹配（这是一个内存位置），然后它将该值替换为`"%0"`，你得到：

```
mr 8(31), 1 
```

这并没有错——直到您尝试汇编它，并且汇编器注意到您正在尝试将 8(31) 与只接受寄存器的操作码一起使用。但问题不在于编译器或汇编器，而在于代码。你要求它`stackref`用作 的操作数`mr`，并且没有强制`stackref`成为一个寄存器，所以你得到了你所要求的。

无论如何，将更改`"=g"`为`"=r"`将约束从“任何寄存器、内存位置或立即值”更改为“任何通用寄存器”。这意味着编译器必须放入`stackref`一个通用寄存器。或者，如果由于某种原因它不能，它会失败并告诉你原因，而不是生成不会组装的程序集。

那么，为什么这对原作者有用呢？好吧，他可能很幸运，`stackref`被分配到 R12，而不是堆栈帧中的 8 个字节，所以他最终得到了`mr 12, 1`，它组装得很好。

或者，另一种可能性。查看 git 树，看起来代码是在 Mac OS X 上开发的，然后在十年前移植到 AIX（主要是 Mac 开发人员），然后从 AIX 逐字复制到 linux（甚至留下描述“Port for PowerPC 上的 AIX”），从那以后就没有明显地触及。那时 OS X 和 AIX 都只有 gcc 3。所以，也许这就是它当时对每个人都有效的原因，而不是对你有效的原因。也许只是获得一个较旧的交叉编译器就可以解决您的问题。但我会先尝试修复代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:24:35.857

> 为什么 setup.py 从我的主机系统上的 /usr/include/python2.7 中提取？

它不是。是`/usr/include/python2.7/pyport.h:849`指用于构建您的主机 Python 的源代码，它可能实际上在您的系统上，也可能不在您的系统上。

> 我在我的目标上找不到那个目录。如何为我的目标创建它？

我不确定你想不想。我认为你是在红鲱鱼。

这是您问题的关键：

```
$ python ./setup.py build 
```

您正在使用主机的本机 Python 来构建扩展，并且您没有做任何事情来告诉它您希望扩展交叉编译。因此，据它所知，您正在尝试为它构建greenlet，而不是为其他Python。因此，像这样的事情：

> 创建 build/temp.linux-x86_64-2.7

但是当然你给它的是 ARM 交叉编译器，它不能为你的 x86_64 主机 python 编译扩展，因此：

> /usr/include/python2.7/pyport.h:849:2：错误：#error“平台的 LONG_BIT 定义出现错误（错误的 gcc/glibc 配置？）。”

您的主机 Python 是使用为 64 位 LP 系统设置的 LONG_BIT 构建的，但它正在尝试使用编译器为 32 位系统构建代码。

博客文章[http://kynesim.blogspot.co.uk/2012/06/cross-compiling-python-for-arm-with.html](http://kynesim.blogspot.co.uk/2012/06/cross-compiling-python-for-arm-with.html)（链接自您引用的那个）展示了如何构建第三方 C 扩展模块. 正如您所看到的，它并非完全微不足道，可能需要进行一些实验才能使其正常工作，但看起来它是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-05T10:28:26.697

```
python ./setup.py build 
```

我们正在尝试交叉构建一个扩展，但系统使用`python-config`和错误`pyconfig.h`。查看 和之间的[区别](https://gist.github.com/andrew-aladev/6233396d86218f36a7ee439e505f4fb3) 。不要尝试使用容器来解决问题，这是错误的方式，您以后会收到更复杂的问题。`x86_64``arm` `pyconfig``i686``LONG_BIT`

有几个 python 扩展可以为`python-config`. 但是有一种 100% 可靠的方法，无需任何扩展。

1.  创建`amd64`容器并安装基础系统（buildah 或 docker）。
2.  将目标工具链安装到这个容器中（crossdev）。
3.  使用目标工具链在目标根文件夹中安装除 python 扩展之外的所有必需软件。
4.  为容器的 python 添加补丁，强制`python-config`返回目标[包含和库路径](https://github.com/python/cpython/blob/master/Lib/sysconfig.py#L27-L30)并重建容器的 python。
5.  使用目标工具链将所有必需的 python 扩展安装到目标根文件夹中。
6.  从容器中提取目标根文件夹并将其删除。

# html - 手机和平板电脑的居中图像

> ID：11587638
> 
> 赞同：1
> 
> 时间：2012-07-20T22:14:18.517
> 
> 标签：html, css

我正在为使用 html5 和 css3 构建的应用程序创建启动画面，但我无法让图像正好位于中间。我需要它位于手机和平板电脑的中间。感谢您的任何建议或帮助。

图像尺寸为 300 x 300 像素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:32:29.460

如您所知图像的大小，您可以使用负边距：

```
position: absolute;
left: 50%;
top: 50%;
margin-left: -150px;
margin-top: -150px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:22:33.313

图像/块元素可以使用边距居中：

```
img {
  margin-left: auto;
  margin-right: auto;
  display: block;
  } 
```

否则，您可以使用老式的`<center>`标签技术。它仍然在 HTML5 中。;)

# excel - 使用 TCOM 在 CSV 中创建选项卡

> ID：11587640
> 
> 赞同：0
> 
> 时间：2012-07-20T22:14:25.967
> 
> 标签：excel, csv, tcl

我想在我使用 TCL 中的 TCOM 包创建的 .csv 文件中添加选项卡。以下是我用来创建第二个选项卡的代码。但我没有看到第二个选项卡。我只看到创建的第一个选项卡。

```
set application [::tcom::ref createobject "Excel.Application"]
set XlFileFormat(xlCSV) [expr 6]
set workbooks [$application Workbooks]
set workbook [$workbooks Add]                         
$application DisplayAlerts False
set worksheets [$workbook Worksheets]

set worksheet1 [$worksheets Item [expr 1]] 
set cells_worksheet1 [$worksheet1 Cells]

set worksheet2 [$worksheets Item [expr 2] 
set cells_worksheet2 [$worksheet2 Cells] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:21:20.450

您在这里所说的“选项卡”实际上是一个工作表——一个仅存在于您正在使用的某些办公电子表格应用程序（例如 Excel）中的概念。*当以原生*文件格式保存/加载数据时，这些应用程序能够保留这种高级结构，但[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)更简单：它只是一个二维矩阵。由于这种简单性，CSV 格式只能用于存储在典型办公电子表格软件中维护的工作空间的单个工作表的内容。此外，CSV 不会存储高级内容，例如单元格引用或公式或单元格格式等 - 仅存储原始数据。

现在请仔细评估以下建议：

*   你应该明白，在你的情况下——通过 Tcl 的 COM 编写 Excel 脚本——Tcl 和 COM 在概念上只是薄薄的哑层，没有任何兴趣：所有繁重的工作都由 Excel 完成。这意味着，如果您在编写某些 Excel 操作的脚本时遇到问题，请*考虑 Excel，*而不是这些包装器。执行以下步骤通常会有所帮助：

    1.  启动 Excel 并尝试手动执行您的预期操作*。* 在您的特定情况下，这将使您免于提出这个问题，因为您会看到您无法将多页文档保存到 CSV 格式的文件中。
    2.  录制宏，然后打开宏编辑器并查看 Excel 为您编写的脚本（在 VBA 中）。将此代码转换为来自任何运行时的 COM 介导调用非常简单。这是使用 COM 编写此类软件脚本的常用方法。
*   阅读文档！没有理由不阅读关于 CSV 是什么的介绍性材料，因为文档非常丰富。 [您已经被告知](https://stackoverflow.com/q/10040289/720999)CSV 比您认为的要简单得多；这应该敲响了一些钟声。

*   考虑阅读[http://whathaveyoutried.com](http://whathaveyoutried.com) ——看起来你在询问之前没有进行太多研究。

# jax-ws - JAX WS 多请求管理

> ID：11587646
> 
> 赞同：3
> 
> 时间：2012-07-20T22:15:02.263
> 
> 标签：jax-ws

我开始使用 JAX WS 研究 Java Web 服务。我正在阅读的这本书的第一章展示了如何仅使用 java SE 构建和部署一个简单的 jax ws Web 服务。特别是，Web 服务是通过 Endpoint 类发布的。发布 Web 服务后，作者指定“开箱即用，端点发布者一次处理一个客户端请求......如果给定请求的处理应该挂起，那么所有其他客户端请求都被有效阻止。一个示例本章末尾展示了 Endpoint 如何同时处理请求，以便一个挂起的请求不会阻塞其他请求。”

为了看到这一点，我尝试向具有 2 个线程的 Web 服务发送两个请求。这是代码：

```
@WebService(endpointInterface = "ProveVelociJava.WS.MyWsWithJavaSE.SayHello")
public class SayHelloImpl implements SayHello {
    public String greetings(String param) {
        System.out.println("\nStarting " + param + "...\n");    
        if(param.equals("miao")) {      
            try {           
                Thread.sleep(9000);
            }
            catch(Exception e) {}
        }
        System.out.println("Ended " + param + "\n\n");
        return "Hi, " + param;
    }
}

public class SayHelloPublisher {
    public static void main(String[ ] args) {   
        // 1st argument is the publication URL
        // 2nd argument is an SIB instance
        Endpoint.publish("http://127.0.0.1:9899/say", new SayHelloImpl());
    }
}

class MyClient extends Thread {
    private static URL url;
    private static QName qname;
    private static Service service;
    private static SayHello eif;

    static {
        try {
            url = new URL("http://127.0.0.1:9899/say?wsdl");
            qname = new QName("http://MyWsWithJavaSE.WS.ProveVelociJava/", "SayHelloImplService");
            service = Service.create(MyClient.url, MyClient.qname);
            // Extract the endpoint interface, the service "port".
            eif = service.getPort(SayHello.class);
        }
        catch(Exception e) {}
    }
    private String name;
    public MyClient(String n) {
        name = n;
    }
    public void run() {
        System.out.println(MyClient.eif.greetings(this.name));
    }
    public static void main(String args[ ]) throws Exception {  
        MyClient t1 = new MyClient("miao");
        MyClient t2 = new MyClient("bau");
        t1.start();
        t2.start();
    }
} 
```

如果我启动 MyClient 类，名为“miao”的线程会发送它的请求，然后进入睡眠状态。但是，名为“bau”的线程不会等待前一个线程，它的请求会立即得到满足。

我错过了什么吗？java线程可以用来模拟多个请求吗？

非常感谢你的帮助，尼科。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:48:55.607

我下载了 JAX-WS 2.0 规范，它反驳了我正在阅读的书所说的内容：

> “一个端点由一个充当 Web 服务实现的对象（这里称为实现器）加上一些配置信息组成……端点通常会被调用来服务并发请求，因此应该编写它的实现器以支持多线程。可以像往常一样使用 synchronized 关键字来控制对代码关键部分的访问。为了更好地控制用于分派传入请求的线程，应用程序可以直接设置要使用的执行器"

（[http://jcp.org/aboutJava/communityprocess/final/jsr224/index.html](http://jcp.org/aboutJava/communityprocess/final/jsr224/index.html)，第 5.2.2 节“发布”，第 67 页）

这本书谈到了 JAX-WS 2.1，但我没有设法下载该版本的规范。无论如何，JAX-WS 2.2 规范（当前版本）确认了 Endpoint 类的并发性质（它包含与上述相同的语句）。

我不知道这本书的作者到底是什么意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-22T22:00:36.867

默认情况下，Endpoint 同时处理多个请求，并为每个新的并发请求创建单独的线程。您可以在 WebMethod 实现中插入以下行，以查看线程 ID：

System.out.println(Thread.currentThread().toString());

如果您逐个请求，这将打印相同的线程信息，因为终止的线程将在下一个 http 请求中重用。但是，如果您同时发出多个请求，那么您会看到不同的线程将调用您的 web 方法。

只要您的 webmethod 没有同步块、整个 webmethod 未同步或您使用某种信号量，一个请求就不会阻塞任何其他并发请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:35:34.697

为时已晚，但可能会有所帮助。

Endpoint.publish(Url, ServiceImplObj) 在给定的 url 发布 web 服务。没有。分配给请求处理的线程确实在 jvm 的控制之下，因为这是一个由 jvm 本身处理的轻量级部署。

为了更好地说明，您可以在服务端打印当前线程名称，您可以看到服务线程是从由 jvm 管理的线程池分配的。

```
[pool-1-thread-1]: Response[57]:
[pool-1-thread-5]: Response[58]:
[pool-1-thread-4]: Response[59]:
[pool-1-thread-3]: Response[60]:
[pool-1-thread-6]: Response[61]:
[pool-1-thread-6]: Response[62]: 
```

# android - 注释属性不接受我的变量

> ID：11587658
> 
> 赞同：5
> 
> 时间：2012-07-20T22:16:48.620
> 
> 标签：android, eclipse, google-api

我现在已经阅读了很多关于这方面的内容，并且我发现了如何使用较新的 ADT 的 switch 语句必须给出常量表达式的示例，但没有提到任何关于 @Inject 的内容。

这是我有问题的代码的示例。

```
 import roboguice.inject.InjectView;
 public abstract class YpListActivity extends GuiceListActivity 

     @InjectView(R.id.btnSearch)
     Button btnSearch;
     @InjectView(R.id.btnSpeech)
     View btnSpeech;
     @InjectView(R.id.etWhat)
     EditText etWhat;
     @InjectView(R.id.etWhere)
     EditText etWhere;
     @InjectView(R.id.tvIn)
     TextView tvIn;
     @InjectView(R.id.tvLocation)
     TextView tvLocation;
     @InjectView(R.id.tvCustom)
     private ToggleButton tvCustom;
     @InjectView(R.id.infoButton)
     private ImageView iconButton; 
```

每次我尝试使用 @injectView(R.id.*) 之类的东西时，eclipse 都会抛出错误：

“注解属性 InjectView.value 的值必须是常量表达式。”

我什至尝试将其更改为：

```
 private static final int btnsrch = new Integer(R.id.btnSearch);

     @InjectView(btnsrch )
     TableRow btnSearch ; 
```

“btnsrch”怎么不是一个常量表达式？

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T02:27:10.543

删除“私人”，它应该可以正常工作。

# javascript - nodeValue 和过滤字符？

> ID：11587659
> 
> 赞同：1
> 
> 时间：2012-07-20T22:17:12.247
> 
> 标签：javascript, html, dom, nodevalue

我正在尝试制作一个脚本来验证 nodeValue 是否在 html 文档中

```
var myVar= document.getElementsByTagName("b");
for (var i = 0; i < myVar.length; i++) {
  var pumpkin = myVar[i].firstChild;  
  if(pumpkin.nodeValue == "Some text")
  {
    alert("exists");
  }
} 
```

`&nbsp;`如果我要查找的文本包含过滤字符而不是空格，则它不起作用。当我查看 DOM Inspector 时，这些字符不存在（而是有普通空格），但是当我查看页面源时，它们是。

我试过

```
if(pumpkin.nodeValue == "Some text") 
```

和

```
if(pumpkin.nodeValue == "Some&nbsp;text") 
```

但都失败了......有人有想法吗？

（当我要查找的文本在源代码中不包含这些字符时，它可以正常工作）。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:49:28.457

你可以在的帮助下做到这一点，`regular expression`因为`&nbsp;`对应的字符代码是`160`

```
var myVar= document.getElementsByTagName("b");
for (var i = 0; i < myVar.length; i++) {
    var str = myVar[i].firstChild.nodeValue;  
    var re = new RegExp(String.fromCharCode(160), "g");
    if(str.match(re)) alert("exists");
} 
```

[**演示。**](http://jsfiddle.net/heera/pqPCT/)

# ruby-on-rails - CarrierWave 上传器找不到型号

> ID：11587662
> 
> 赞同：1
> 
> 时间：2012-07-20T22:17:22.897
> 
> 标签：ruby-on-rails, file-upload, carrierwave

我的结构如下：一个Fsvideo对象属于一个User，并且建立了外键关系。视频对象上传到 Amazon S3 存储桶。我的 Fsvideo 模型如下：

```
class Fsvideo < ActiveRecord::Base
  attr_accessible :user, :video
  belongs_to :user
  mount_uploader :video, MyVideoUploader 
```

上传者如下：

```
class MyVideoUploader < CarrierWave::Uploader::Base

  storage :fog
  def store_dir
    "videos/#{model.user.id.to_s.underscore}"
  end
end 
```

问题在于，每当调用 store_dir 方法时，都会抛出 NoMethodError(undefined method 'user for nil:NilClass)。奇怪的是，当我更改 store_dire 方法以返回以下字符串时：

```
"videos/#{model.class}" 
```

它工作正常，文件上传到S3存储空间没有错误。进入 rails 控制台并检查视频是否已成功安装，我看到了

```
Fsvideo.find(18).video.model.user.id 
```

将返回我正在寻找的确切属性。

我的问题本质上是，为什么我可以通过控制台访问这个属性，而不是通过我的上传器类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:38:01.633

试试 "videos/#{model.user_id.to_s.underscore}" 视频记录应该有 user_id 作为它的属性。

# sql - T-SQL 更新数据查询

> ID：11587663
> 
> 赞同：1
> 
> 时间：2012-07-20T22:17:23.423
> 
> 标签：sql, tsql

我需要更新一些记录这里是表结构

表 A 是我们需要更新一些记录的主要表 A(Id,DataYear0,DataYear1,DataYear3)

表 B 有一些我们需要 B(Id,Year,DataYear) 以外的数据

表 B 的示例数据： B(abc,1950,1.25) B(abc,1951,1.29) .. .. B(abc,2008,1.67) B(abc,2009,1.23) B(abc,2010,1.52) B(abc,2011,1.78) B(abc,2012,NULL)

以2012为当前年份，我需要更新表A中前三年（即2011、2010、2009）的数据值

因此，对于上述示例，表 A 需要更新为 A(abc,1.78,1.52,1.23)。同样，其他记录也需要更新。

Id 是两个表的主键。

到目前为止我的查询是

```
UPDATE A SET
    DataYear0 = CASE WHEN Year+1 = YEAR(GETDATE()) THEN DataYear END,
    DataYear1 = CASE WHEN Year+2 = YEAR(GETDATE()) THEN DataYear END,
    DataYear2 = CASE WHEN Year+3 = YEAR(GETDATE()) THEN DataYear END
FROM A
LEFT JOIN B
    ON A.Id=B.Id 
```

这没有用，因为我认为除了我们想要的年份之外，它还会返回额外的年份记录，即过去三年

```
UPDATE A SET
   DataYear0 = CASE WHEN Year+1 = YEAR(GETDATE()) THEN DataYear END,
   DataYear1 = CASE WHEN Year+2 = YEAR(GETDATE()) THEN DataYear END,
DataYear2 = CASE WHEN Year+3 = YEAR(GETDATE()) THEN DataYear END
FROM A
LEFT JOIN B
    ON A.Id=B.Id
GROUP BY Id,Year,DataYear
HAVING ((YEAR(GETDATE())-3) <= Year) AND (Year <> YEAR(GETDATE())) 
```

但仍然没有更新数据。

尝试使用 CTE

```
;WITH cte AS
(
 SELECT 
    A.Id
    ,B.Year
    ,B.DataYear 
    ,ROW_NUMBER() OVER (PARTITION BY Id ORDER BY Year DESC) as row
 FROM A
 LEFT JOIN B
    ON A.Id=B.Id
 GROUP BY Id,Year,DataYear
 HAVING ((YEAR(GETDATE())-3) <= Year) AND (Year <> YEAR(GETDATE()))
 )

UPDATE
    A.DataYear0 = CASE WHEN row=1 THEN DataYear END
    ,A.DataYear1 = CASE WHEN row=2 THEN DataYear END
    ,A.DataYear2 = CASE WHEN row=3 THEN DataYear END
FROM A
LEFT JOIN cte
    ON A.Id = cte.Id 
```

数据仍然没有更新。我将不胜感激任何人可能有的任何建议。提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:41:34.410

问题源于尝试从多行更新单行。要查看它，请将您的更新转换为选择。在这种情况下，最后一个更新者获胜，将其他两列保留为空。要解决此问题，请使用子查询或某种方式将行转换为列，例如枢轴。

现在，过度设计的乐趣：

```
update A
set DataYear0 = pvt.[0],
    DataYear1 = pvt.[1],
    DataYear2 = pvt.[2]
from A
inner join
(
  select u.ID, u.[0], u.[1], u.[2]
  from
  (
    select b.id,
           3 - (year(getdate()) - b.Year) YearOffset,
           b.DataYear
      from B
     where b.Year >= year(getdate()) - 3
       and b.Year < year(getdate())
  ) p
  pivot (min(DataYear) 
         for YearOffset in ([0], [1], [2])
  ) u
) pvt
 on A.id = pvt.id; 
```

[你可能会在@Sql Fiddle 看到这个查询](http://sqlfiddle.com/#!3/d0fc3/2)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T22:49:19.587

你可以这样做：

```
UPDATE a
    SET DataYear0 = COALESCE(d0.DataYear,DataYear0),
        DataYear1 = COALESCE(d1.DataYear,DataYear1),
        DataYear2 = COALESCE(d2.DataYear,DataYear2)
FROM A a
LEFT JOIN B d0 ON d0.Id = a.Id and d0.[Year] = YEAR(GETDATE())-1
LEFT JOIN B d1 ON d1.Id = a.Id and d1.[Year] = YEAR(GETDATE())-2
LEFT JOIN B d2 ON d2.Id = a.Id and d2.[Year] = YEAR(GETDATE())-3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T22:33:09.687

```
UPDATE A
SET
    DataYear0 = (SELECT DataYear FROM B WHERE A.id = B.id AND Year = YEAR(GETDATE()) - 1),
    DataYear1 = (SELECT DataYear FROM B WHERE A.id = B.id AND Year = YEAR(GETDATE()) - 2),
    DataYear2 = (SELECT DataYear FROM B WHERE A.id = B.id AND Year = YEAR(GETDATE()) - 3) 
```

an 中的`FROM`子句`UPDATE`不是标准 SQL。这种方法看起来有点冗长，但它是正确的方法，优化器仍然可以有效地处理它。

如果任何子查询不是标量结果，它也会导致错误，这是一件好事。其他答案将允许这一点溜走。

# iphone - 当应用程序关闭时，是否可以从推送通知中触发图像下载？

> ID：11587664
> 
> 赞同：0
> 
> 时间：2012-07-20T22:17:28.027
> 
> 标签：iphone, objective-c, ios, push-notification, background-image

我正在开发一个消息应用程序（类似于 WhatsApp），用户可以互相发送文本和图像消息。

目前，如果 user1 向 user2 发送图像消息，而 user2 离线（应用程序已关闭） -> 我的服务器将检测到 user2 离线 -> 并将向他发送有关新图像的推送通知。

然后当 user2 打开应用程序时，图像被下载并在聊天视图中呈现给他。

问题在于 user2 收到关于新图像的推送 -> 打开应用程序以查看该图像 -> 但需要等到图像下载完成......
所以这不是最好的用户体验，我希望当用户2打开应用程序，他会**立即**看到图像！

我唯一能想到的就是用推送通知唤醒应用程序并开始下载图像，即使user2还没有打开应用程序，但我不知道这是否可能？
还是有其他想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:21:10.410

不，不幸的是，当您的应用程序处于非活动状态时，您无法响应通知，直到用户选择重新启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T13:43:48.727

使用推送通知启动下载 如果您的服务器在您的应用程序有新内容可用时向用户的设备发送推送通知，您可以要求系统在后台运行您的应用程序，以便它可以立即开始下载新内容。

[点击此处查看 Apple 参考资料](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW57)

享受 ：）

# jquery - 使用 jQuery 的 HTML 唯一 ID - 解决此问题的更好方法

> ID：11587667
> 
> 赞同：0
> 
> 时间：2012-07-20T22:17:58.883
> 
> 标签：jquery, html

所以我使用这个漂亮的小部件来创建选项卡，但我的编辑器抱怨它无效并且根据规范是正确的。如您所见，我有两个名称相同的ID。我的问题是解决此问题的正确方法是什么？

这是html

```
<ul id="tabs">
    <li><a href="javascript:void(0)" name="tab1">Stuff</a></li>
    {% if not is_passing %}
        <li><a href="javascript:void(0)" name="tab2">More Stuff</a></li>
    {% endif %}
</ul>

<div id="panes">
    <div id="tab1">Tab 1</div>
    <div id="tab2">Tab 2</div>
</div>

<script style="text/javascript">
    $(document).ready(function() {
        $("#panes").children("div").hide();         // Initially hide all content
        $("#tabs li:first").attr("id","current");   // Activate first tab
        $("#panes div:first").fadeIn();             // Show first tab content

        $('#tabs a').click(function(e) {
            e.preventDefault();
            if ($(this).closest("li").attr("id") == "current"){ //detection for current tab
                return false;
            }
            else{
                $("#panes").children("div").hide();     //Hide all content
                $("#tabs li").attr("id","");            //Reset id's
                $(this).parent().attr("id","current");  // Activate this
                $('#' + $(this).attr('name')).fadeIn(); // Show content for current tab
            }
            return false;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:19:47.433

这里有两个问题：

1.  `#current`在标签和标签内容上使用
2.  具有选项卡名称属性和选项卡内容 id 相同

使用当前类而不是 id

使用`addClass`,`removeClass`和`hasClass`

当然，您必须将 CSS 从更改`#current`为`.current`

并使用 rel 代替名称。

```
<ul id="tabs">
    <li><a href="javascript:void(0)" rel="tab1">Stuff</a></li>
    {% if not is_passing %}
        <li><a href="javascript:void(0)" rel="tab2">More Stuff</a></li>
    {% endif %}
</ul>

<div id="panes">
    <div id="tab1">Tab 1</div>
    <div id="tab2">Tab 2</div>
</div>

<script style="text/javascript">
    $(document).ready(function() {
        $("#panes").children("div").hide();         // Initially hide all content
        $("#tabs li:first").addClass("current");   // Activate first tab
        $("#panes div:first").fadeIn();             // Show first tab content

        $('#tabs a').click(function(e) {
            e.preventDefault();
            if ($(this).closest("li").hasClass("current")){ //detection for current tab
                return false;
            }
            else{
                $("#panes").children("div").hide();     //Hide all content
                $("#tabs li").removeClass("current");            //Reset
                $(this).parent().addClass("current");  // Activate this
                $('#' + $(this).attr('rel')).fadeIn(); // Show content for current tab
            }
            return false;
        });
    });
</script> 
```

# python - 从 python 中的类 cron 调度程序中删除事件

> ID：11587670
> 
> 赞同：2
> 
> 时间：2012-07-20T22:18:44.287
> 
> 标签：python, cron

因此，我按照此处找到的问题的答案中的建议创建了一个类似 cron 的调度程序：

[如何在 Python 中获得类似 Cron 的调度程序？](https://stackoverflow.com/questions/373335/suggestions-for-a-cron-like-scheduler-in-python)

但有时，如果发生事件，我想删除另一个事件....

我将如何创建此功能？....基本上，一旦创建，我怎么能删除一个事件？

另外....我在从事件中制作事件时遇到了麻烦。基本上，我的目标是每小时使用一个事件来解析一个文件，其中包含我想做其他事件的时间......所以我想从这个每小时事件中创建新事件...... .但它们似乎在创建后消失了....

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:02:03.710

这一切都取决于您如何实际实现您的 cronjob 运行。但是，如果您希望事件能够修改其他事件，我可以想到 3 个选项：

## 1.将cron的引用传递给函数

您的 CronTab 类必须为事件提供一种能够“检查”它的方法。最好的选择是使用“cron”参数扩展关键字参数并将其传递给函数，如下所示：

```
class CronTab(object):
    def __init__(self, *events):
        self.events = events
        for event in self.events:
             event.kwargs['cron'] = self
# rest of the calss remains unmodified 
```

这样做，从运行的 Crontab 调用的所有函数都将传递一个“cron”参数，其中包含对运行它的 cron 的引用

## 2.添加“预运行”元帅

您扩展您的 CronTab 类不仅可以执行特定时间表上的事件，还可以在这些事件之前调用其他函数。获取事件实例并且必须返回`True`才能运行的函数。如果其中任何一个返回其他内容，则相关事件将不会运行。

一个基本的（未经测试的）实现将是：

```
class CronTab(object):
    def __init__(self, *events, marshalls=None):
        self.events = events
        if marshalls is not None:
            # marshalls must be a list of callables that return True or False
            self.marshalls = marshalls
        else
            self.marshalls = []

    def run(self):
        t=datetime(*datetime.now().timetuple()[:5])
        while 1:
            for e in self.events:
                if all([x(e) for x in self.marshalls]):
                    e.check(t)

            t += timedelta(minutes=1)
            while datetime.now() < t:
                time.sleep((t - datetime.now()).seconds) 
```

显然有更好的方法来实现这一点。例如，通过执行一项`reduce`操作，从而避免在其中一个事件已经返回 False 之后为所有事件运行所有编组。但这应该为您指明正确的方向。

如果 CronTab 类实际上做了比调用事件实例更多的工作，`check`或者至少将运行检查与实际运行事件分离，那么实现这一点也可能更容易——但我不想修改原始代码那么多。

## 3\. 提供事件挂钩

这与之前的解决方案基本相同，但更加“细粒度”。您将拥有多个列表，而不是只有一个预运行编组列表。您可以根据自己的需要定制确切的数量和详细信息，但我会根据您的要求来考虑。

除了一般的“运行前编组”之外，您还可以为每个事件名称创建一个这样的列表。在运行事件之前，您不仅要运行所有一般的“运行前编组”，还要运行特定于该事件的那些。

实现它的一种方法是将“预运行编组”列表制作成列表字典，并提供一些方法来管理此类列表。像这样的东西：

```
class CronTab(object):
    def __init__(self, *events, marshalls=None):
        self.events = events
        self.marshalls = dict()
        if marshalls is not None:
            # marshalls must be a list of callables that return True or False
            self.marshalls['__general'] = marshalls
        else
            self.marshalls['__general'] = []

    # event is a string with the name of the event you want to marshall
    # or None if you want to marshall all of them 
    def register(self, callback, event=None):
        if event = None:
            self.marshalls['__general'].append(callback)
        else:
            self.marshalls.setdefault(event, list()).append(callback)

    def run(self):
        t=datetime(*datetime.now().timetuple()[:5])
        while 1:
            for e in self.events:
                if all([x(e) for x in self.marshalls['__general']]) and
                   all([x(e) for x in self.marshalls[e.name]]):
                    # the above assumes e.name exists (not in reference implementation)
                    e.check(t)

        t += timedelta(minutes=1)
        while datetime.now() < t:
            time.sleep((t - datetime.now()).seconds) 
```

以同样的方式，您可以添加运行后挂钩和其他您认为合适的奇怪东西。

* * *

关于您关于事件消失的问题，请向我们展示一些代码以便能够进一步解决问题。

# android - 如何在android中创建类似下拉菜单（不是Spinner）的东西？

> ID：11587671
> 
> 赞同：1
> 
> 时间：2012-07-20T22:18:47.853
> 
> 标签：android, android-layout, android-widget

当我在 android 中单击按钮（不是 Spinner，更像是网站上的下拉菜单）时，如何创建类似下拉菜单的内容？是否已经有小部件或有人有类似的任务？我在顶部有三个按钮，我不能使用标签，我需要像网站上的水平菜单一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:29:03.340

PopupMenu 打开与视图相关的菜单，但它在 api 级别 11 中实现，根据可用空间处理位置。

API 参考：http: [//developer.android.com/reference/android/widget/PopupMenu.html](http://developer.android.com/reference/android/widget/PopupMenu.html)

另一种选择是使用 PopupWindow，但您必须实现面板的位置。

API参考：http: [//developer.android.com/reference/android/widget/PopupWindow.html](http://developer.android.com/reference/android/widget/PopupWindow.html)

如果您的 API > 11，则为您内置了一些不错的：

*   [列表弹出窗口](http://developer.android.com/reference/android/widget/ListPopupWindow.html)
*   [弹出菜单](http://developer.android.com/reference/android/widget/PopupMenu.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:39:42.013

我假设您在 ActionBar 上是这样[的](https://a248.e.akamai.net/camo.github.com/e1d9b5eeab84fc2b15a6e101afba2a0f3f317301/687474703a2f2f692e696d6775722e636f6d2f79733651452e706e67)意思？为此使用[ActionBar Sherlock](http://actionbarsherlock.com/)。在那里，您甚至可以轻松地在 Android 2.1 中实现这一点，直至 Jelly bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T22:21:22.427

在 Activity 中使用 Frament。见[http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

我认为片段是正确的方法，但我还没有看到它完成。

# php - 更新文件中的字符串

> ID：11587675
> 
> 赞同：0
> 
> 时间：2012-07-20T22:19:17.167
> 
> 标签：php, file

我有一个包含以下信息的文件：

```
 IP=121.0.0.1 Status=On Name=Name  
    IP=121.0.0.1 Status=On Name=Name 
    IP=121.0.0.1 Status=On Name=Name  
    IP=121.0.0.1 Status=On Name=Name  
    IP=127.0.0.1 Status=On Name=Name 
    IP=121.0.0.1 Status=On Name=Name  
    IP=121.0.0.1 Status=On Name=Name 
    IP=121.0.0.1 Status=On Name=Name 
```

我将如何更新此文件中的信息？例如，我将如何更新本地主机 IP 设置状态为关闭和名称以测试等的行。我尝试的是通过 IP 地址（在本例中为本地主机 - 127.0.0.1）找到我想要修改的行，然后替换值状态 = 关闭`str_replace()`等。但是当我尝试再次将其更改回打开时，它会覆盖另一行/创建一个空行/添加更多信息。

我试过的代码：

```
<?php
$file = fopen('user_info.wrd','r+');
while (!feof($file))
 {
  $str=fgets($file);
  if (strstr($str,$_SERVER['REMOTE_ADDR'])) 
    {
     $Status=substr($str,strpos($str,'Status=')+7);
     $Status=substr($Status,0,strpos($Status,' '));
     fseek($file,(ftell($file)-strlen($str)));
     $str=str_replace($Status,'Off',$str);
     echo $str;
     $str=trim($str);
     fwrite($file,$str);
     fclose($file);
     die;
    }
 }  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:50:15.487

这是我的 read_file 和 write_file 函数的版本（代码未经测试，但应该可以工作）。

```
function read_file($filename) {
  $contents = file_get_contents($filename);
  $lines = explode((strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') ? "\r\n" : "\n"), $contents);
  $data = array();
  foreach($lines as $line) {
    $fields = explode(" ", $line);
    $ip_address = null;
    foreach($fields as $field) {
      $keyvaluepair = explode('=', $field);
      if ($keyvaluepair[0] === 'IP') {
        $ip_address = $keyvaluepair[1];
        $data[$ip_address] = array();
      } else {
        $data[$ip_address][$keyvaluepair[0]] = $keyvaluepair[1];
      }
    }
  }
  return $data;
}

function write_file($filename, $array) {
  $data = '';

  foreach($array as $ip_address => $flags) {
    $data .= "IP={$ip_address} Status={$flags['Status']} Name={$flags['Name']}";
    $data .= (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') ? "\r\n" : "\n");
  }

  file_put_contents($filename, $data);
} 
```

用法：

```
$data = read_file('filename');
$data['127.0.0.1']['Status'] = 'Off';
$data['127.0.0.1']['Name'] = 'My_Fancy_Name'; // note that spaces in the name are not allowed!
write_file('filename', $data); 
```

# php - PHP/MySQL - 允许用户为 CMS 创建自定义表单字段

> ID：11587676
> 
> 赞同：5
> 
> 时间：2012-07-20T22:19:20.130
> 
> 标签：php, mysql, content-management-system

我正在使用 PHP 制作一个 CMS，并希望让用户能够创建可用于其网站注册/注册的自定义表单字段（类似于 SocialEngine 或 PHPFox）。但是，我真的不知道如何实现这一目标。我是否必须制作某种插件（“钩子”）系统？我最初有这个想法，但我不知道这是否真的是一个好方法：

CMS 的管理员将获得一个表单，其中包含他们想要创建的表单字段名称、字段类型（字符串、布尔值、日期等）、字段类别以及它是否是必填项目。

然后将这些值传递到名为“custom_form_fields”的数据库表中，其中包含以下列：`id, field_name, field_type, category, required`。还要存储这些字段的值；将在存储所有用户数据的“用户”表中添加一列。

```
ALTER TABLE users ADD the_custom_form_field_name datatype 
```

但是现在我对如何在 PHP 中显示不同的表单字段以及如何将表单字段中的数据插入用户表感到困惑。

如果您不理解我的问题，请查看：[http](http://www.phpfox.com/features/custom-fields/) ://www.phpfox.com/features/custom-fields/它显示了我想要实现的目标。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T22:35:11.417

你需要放慢一点；起初，您的问题似乎是关于动态生成 HTML 表单的 js/php 代码，但随后您开始谈论数据库字段。

您的问题对我来说仍然不是 100% 清楚，但是在您的情况下，我要做的是从数据库设计开始，而不是专注于其他任何事情。

我可以看到您正在考虑更改用户表。我认为这没有必要，也没有好的设计。

只要每个用户都有一个主键，即 users.id 字段，您就可以创建一个新表来存储表单字段数据，如下所示：

```
CREATE TABLE users_custom_form_data(
  id INT NOT NULL,
  FOREIGN KEY(id) REFERENCES (users.id) ON DELETE CASCADE,
  /* then store any data you need to store about a form field */
  field_type ENUM("text","number","phone","email","submit","etc"),
  field_default_value VARCHAR(100) /* or what you think is necessary */,
  field_name VARCHAR(100),
  field_id VARCHAR(50),
  field_class VARCHAR(50)
  /* and any others you need */
) ENGINE = InnoDB; 
```

由于我们将每条记录分配给一个 USER ID，我们稍后可以跟踪哪些用户拥有哪些自定义表单字段。

我希望这足以让你开始。

* * *

由于您澄清了您的问题，我认为我们现在正在查看的是一个表，其中包含一个用于拥有记录的用户 ID 的字段，一个用于自定义属性表 ID 的字段以引用其自定义字段。它看起来像这样：

```
CREATE TABLE tbl_user_attributes(
    user_id INT NOT NULL,
    FOREIGN KEY(user_id) REFERENCES(tbl_users.id) ON DELETE CASCADE,
    attribute_id INT NOT NULL,
    FOREIGN KEY(attribute_id) REFERENCES(tbl_attributes.id) ON DELETE CASCADE
) ENGINE=InnoDB; 
```

然后属性 ID 将告诉您用户添加到其 CMS 的字段类型。属性表将由您预先填充并由您定义（使用您的默认字段）。它可能看起来像这样：

```
CREATE TABLE tbl_attributes(
    id INT NOT NULL AUTO_INCREMENT,
    text_label VARCHAR(100),
    type ENUM("TextArea","CheckGroup","DropDown"),
    data BLOB
) ENGINE=InnoDB; 
```

因此，一旦您使用选项填充该表，用户应该能够添加任何类型的字段（在默认字段之上）并为其命名，即“电影”将存储在名为“text_label”的字段中它将属于“TextArea”类型。然后，该 tbl_attributes.id 将被插入到 tbl_user_attributes 中，其中包含创建它的用户的用户 ID。然后你的程序将通过读取数据库来完成剩下的工作。如果您想在其中存储用户数据，请将其存储在“数据”字段中（如果它始终是文本，您可以使用 TEXT 类型而不是 BLOB，但使用 BLOB 不是问题，因为您可以计算出您的需要处理由“类型”字段判断的数据，即TextArea 表示文本存储在BLOB 中。

希望这可以帮助。

# ruby-on-rails - ruby on rails自引用多对多通过，如何添加相关记录？

> ID：11587680
> 
> 赞同：0
> 
> 时间：2012-07-20T22:19:44.343
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在两个产品之间创建一个简单的商品关联。我遵循了一些教程并认为我做对了，但是每当我尝试直接添加关联项目时，它都会不断抛出错误。我是 ROR 的新手，有人可以帮我理解我在这里做错了什么吗？

```
class Product < ActiveRecord::Base
  attr_accessible :assoc_product,:product_id, :merch_associations, :aux_description,    :buyable, :long_description, :thumb_url, :full_url, :name, :on_special, :part_number,  :release_date, :short_description, :withdraw_date, :occasion
  has_and_belongs_to_many :categories
  has_many :merch_associations
  has_many :assoc_products, :through => :merch_associations

searchable do
text :aux_description, :long_description, :name, :on_special, :part_number, :short_description
text :categories do 
  categories.map { |category| category.name }
end

        text :occasion

        string :categories, :multiple => true do
        categories.map {|category| category.name }
    end
    string :occasion
    time :release_date

  end
end

class MerchAssociation < ActiveRecord::Base
  attr_accessible :assoc_product, :product_id  
  belongs_to :product
  belongs_to :assoc_product, :class_name => "Product"
end 
```

然后在rails控制台中：

```
Product.find(1).assoc_products.create(Product.last, :association_type => 'up_sell')
Product Load (0.3ms)  SELECT `products`.* FROM `products` WHERE `products`.`id` = 1 LIMIT 1
Product Load (0.3ms)  SELECT `products`.* FROM `products` ORDER BY `products`.`id` DESC LIMIT 1
(0.0ms)  BEGIN
(0.1ms)  ROLLBACK
NoMethodError: undefined method `stringify_keys' for #<Product:0x007fc20d1ffd70>.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:30:41.567

您不能通过创建将对象添加到关系中，`create`方法是使用提供的属性创建新对象。在这里阅读：[未定义的方法“stringify_keys！” 铁轨上的红宝石](https://stackoverflow.com/questions/1815697/undefined-method-stringify-keys-ruby-on-rails)

改为使用`Product.find(1).assoc_product << Product.last`。

`association_type`您的示例中的参数是什么？我猜您想添加具有属性的相关对象`MerchAssocation`？如果是这样写：

```
Product.find(1).merch_associations.create(:assoc_product=>Product.last,:association_type => 'up_sell') 
```

# c - 结构体指针赋值

> ID：11587683
> 
> 赞同：0
> 
> 时间：2012-07-20T22:20:01.660
> 
> 标签：c, memory, pointers, struct, pic

我正在尝试将一个结构传递给一个函数（通过引用）并在该函数中设置该结构的几个值。

这是结构：

```
struct Sensor
{
    BYTE accel_data[6];
    BYTE gyro_data[6];
    int ax;
    int ay;
    int az;
    int gx;
    int gy;
    int gz;
}; 
```

这是 main() 中的声明：

```
struct Sensor s; 
```

这是函数的传递：

```
readAccel(&s); 
```

读取加速功能：

```
void readAccel(struct Sensor* s)
{
int ax, ay, az;
// Read data from Accelerometer Chip

i2c_multiRead(ACCEL_READ_ADDR, ACCEL_DATA_ADDR, s->accel_data, 6);

ax = make16(s->accel_data[1],s->accel_data[0]);
ay = make16(s->accel_data[3],s->accel_data[2]);
az = make16(s->accel_data[5],s->accel_data[4]);

fprintf(COM_A,"x: %d\ty: %d\tz: %d\r\n", ax, ay, az);

s->ax = ax;
s->ay = ay;
s->az = az;

fprintf(COM_A,"x: %d\ty: %d\tz: %d\r\n", s->ax, s->ay, s->az);
} 
```

出于某种原因，readAccel() 底部的三个赋值行不起作用。第一个打印语句给出了正确的加速度计值。第二个 print 语句给出了正确的 x 值，但 y 是垃圾值，z 始终为 0。

这是在 pic 微芯片上运行的稍微不标准的 c（ccs c 编译器）。编译器有一些怪癖（整数是 16 位，所有变量都必须在函数的开头声明等），但我认为这不应该是它不起作用的原因（尽管我认为这是可能的）。

感谢您抽出宝贵时间提供帮助！

编辑：

这是 i2c_multiread 函数：

```
void i2c_multiRead(char deviceAddrR, char registerAddr, BYTE data[], int numBytes)
{
    int x;
    i2c_start();
    i2c_write(deviceAddrR-0b00000001);
    i2c_write(registerAddr);
    i2c_start();
    i2c_write(deviceAddrR);
    for(x=0; x<numBytes-1; x++)
    {
        data[x]=i2c_read();
    }
    data[numBytes-1] = i2c_read(0); //NACK on last read
    i2c_stop();
}

void main ()
{
    struct Sensor s;
    int raw_accel_data[6];
    int i, data;
    char data_ready;
    fprintf(COM_A,"keyspan working \n\r");
    initAccel(&s);
    //initGyro(&s);
    fprintf(COM_A,"ALL SYSTEMS GO (accel initialized successfully)\n\r");

while(true) {

     //data_ready = i2c_singleRead(ACCEL_READ_ADDR,ACCEL_INT_MAP);
     //data_ready = data_ready >> 7;
    readAccel(&s);
    //readGyro(&s);
    //displayGyroData(&s);
    //displayGyroRawData(&s);

    delay_ms(100);
}
// Address of ITG (Gyro Chip)
//  Read:  0xD1
//  Write: 0xD0
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:02:41.413

难道这只是您的 fprintf 实现的一个“功能”吗？

```
fprintf(COM_A,"x: %d\ty: %d\tz: %d\r\n", s->ax, s->ay, s->az); 
```

格式字符串表示您将提供 3 个整数，但您将提供 3 个字节。fprintf 实现可能会为第二个和第三个参数生成错误的地址。

# awk - 将二维数组名称作为参数传递给 awk 中的函数

> ID：11587684
> 
> 赞同：1
> 
> 时间：2012-07-20T22:20:07.587
> 
> 标签：awk

我想将二维数组作为参数传递给 awk 中的函数。我试过这个

```
add(element1,element2,array) -> this "array" could be bigArray,smallArray etc

function add(element1,element2,array)
{
      if(!(element1 SUBSEP element2 in array))
      {
            array[element1,element2]
      }

} 
```

add 函数中的数组不断变化。但是我收到一条错误消息，指出“尝试将标量参数数组用作数组”。但是当我传递一个一维数组时，同样的事情。你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:32:45.777

正如刚才评论的那样，使用以下脚本对其进行了测试：

内容`script.awk`：

```
BEGIN {
    a["one", "two"] = 1;

    el1 = "one";
    el2 = "two";
    add( el1, el2, a );

    el1 = "one";
    el2 = "three";
    add( el1, el2, a );

    print "length of array: " length( a );
}

function add(element1,element2,array)
{
      if(!(element1 SUBSEP element2 in array))
      {
            printf "Elem1 -> %s\t\tElem2 ->%s\n", element1, element2
            array[element1,element2] = 2;
      }
} 
```

像这样运行它：

```
awk -f script.awk 
```

具有以下输出：

```
Elem1 -> one            Elem2 ->three
length of array: 2 
```

# php - 任何网站可以上传 php 代码和具有结构的文件组？

> ID：11587686
> 
> 赞同：0
> 
> 时间：2012-07-20T22:20:50.833
> 
> 标签：php, web, pastebin

对于 Javascript /html 和 css，我知道其中的一些。

对于 PHP，我知道[http://pastebin.com/](http://pastebin.com/)，但它只允许上传一个文件，而不是一个完整的应用程序或一组类来向任何人展示它们。

Appart from GitHub，你知道任何其他类似的网站上传代码只是为了展示给任何人吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:27:30.177

这些网站有很多，但我想到了这些：

*   [源锻造](http://sourceforge.net/)
*   [谷歌代码](http://code.google.com/)
*   [比特桶](https://bitbucket.org/)
*   [代码复合体](http://www.codeplex.com/)
*   [发射台](https://code.launchpad.net/)

虽然这些应该足够了，但您正在寻找的是所谓的“项目托管”或“代码托管”。

* * *

编辑：

我应该注意，列表中的所有网站都允许您访问某种 VCS（版本控制系统）。

简而言之，它保留了您的代码的多个版本，您可以随时在需要时恢复。

[阅读维基百科上的修订控制](http://en.wikipedia.org/wiki/Revision_control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:23:21.147

如果您需要向某人展示一段代码，只需将代码提供给他们即可。如果您需要显示整个文件，请确保所有内容都经过审查（明显的名称、密码等）。然后将文件扩展名编辑为`.phps`. 这意味着 PHP 源代码。现在将显示文件的源代码。然后，您可以向人们提供该文件的链接。

# .net - 将基于堆栈的语言编译为 CIL

> ID：11587687
> 
> 赞同：4
> 
> 时间：2012-07-20T22:20:59.790
> 
> 标签：.net, compiler-construction, stack, cil

我有一种基于堆栈的自定义语言，我正在尝试将其编译为 CIL，因此可以对其进行 JIT 处理。该语言本身相当简单，因为它只有整数和布尔值。但是，每种数据类型都有一个专用堆栈。语言本身是一个命令流，其中每个命令都可以从任一堆栈中查看、推送和/或弹出值。命令推送/弹出的整数或布尔值的数量永远不会改变（因此命令具有固定的数量）。还有一个平面整数数组，该语言可以读取和写入值，表示外部存储器。堆栈本身可以任意深。

对于像“add”、“subtract”等简单的命令，将整数堆栈命令转换为 CIL 几乎是微不足道的：CIL 堆栈可以完全替换整数堆栈（尽管我有一个附带问题：是否有限制如何CIL 堆栈的深度可以在规范中还是在实践中？）但是也有像 StoreIfTrue 这样的命令，它只会将一个值（来自整数堆栈）存储到某个索引处的平面整数数组（索引也来自整数堆栈) 如果布尔堆栈的顶部值为真。因此，对于某些命令，我​​需要同时访问布尔堆栈和整数堆栈。

现在我必须维护一个 System.Collections.Generic.Stack 来表示布尔堆栈。但是我想知道是否有一种已知的算法或方法可以将我的自定义语言的两个堆栈模型“扁平化”为一个与 CIL 更直接兼容的单一堆栈模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T08:34:29.360

我认为在一个堆栈中存储两个独立的堆栈是不可能的（至少没有外部临时存储，但是你会得到糟糕的性能）。这是因为无论您使用什么表示，都无法让两个堆栈的顶部以某种方式始终接近实际堆栈的顶部。

但是 CIL 不仅有栈和堆，它还有局部变量。但是您只能通过常量索引访问局部变量。所以，如果你在编译时就一直知道栈顶的索引，而且你也知道栈的最大大小，你就可以用局部变量来表示它。但我认为这两个条件不适用于您的情况。

正因为如此，我认为使用`Stack<T>`你的一个或两个堆栈是你最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:31:22.903

我无法从您的问题中推断出您是否知道如何从例如 C# 生成 CIL 代码。为此，您可以使用[Reflection](http://geciauskas.com/dynamically-creating-net-assembly-with-system-reflections/)或[Cecil](https://github.com/jbevain/cecil)。

对于虚拟执行系统（VES，将执行 CIL 指令的虚拟系统模型）堆栈（和寄存器）上的值没有关联的复杂类型。VES 仅跟踪简单类型（int32、int64、托管对象引用、托管指针和浮点数）。因此，VES 无法看到堆栈上的布尔值和整数之间的区别（在内部，VES 将布尔值视为 32 位整数），因此无法使用执行堆栈来模拟布尔堆栈和整数堆栈。您也可以这样做：将布尔值视为整数，将非零整数视为布尔值 true。因此，对两个整数进行比较会产生另一个整数。但是，那么你只有一个堆栈而不是两个。

* * *

**编辑**：

啊，我明白了。您的语言旨在成为通用编程语言，因此必须高度健壮，并且对所有可能的输入（包括无效输入）具有一些预定义（或没有）行为。通过为每种可能的类型设置单独的堆栈，更有可能使用兼容的操作数而不是任何随机操作数。

由于不可能使用单个堆栈来模拟多个堆栈，因此我会`Stack<T>`为每种类型使用一个真实对象，而不是尝试使用 CIL 堆栈。这有几个优点：

*   将来更容易添加新类型
*   允许堆栈边界检查（例如，使操作成为无操作）
*   比在一个堆栈上混合类型的任何自定义方案更易于管理
*   随机访问，如果您需要它
*   无需了解 CIL 内部结构，因此可以在 Mono 和 .Net 上运行
*   CIL 堆栈仅用于临时操作数、堆栈帧和返回地址

# android - 扩展 javax.mail.Authenticator 导致 NoClassDefFoundError

> ID：11587695
> 
> 赞同：0
> 
> 时间：2012-07-20T22:21:34.437
> 
> 标签：android, class, email, noclassdeffounderror

我的应用可以在不使用电子邮件`Intent`或进行用户交互的情况下发送电子邮件。我按照这个[StackOverflow 问题](https://stackoverflow.com/a/2033124/394933)来实现这一点。直到最近，当应用程序在尝试发送电子邮件时开始崩溃时，一切都运行良好。我称之为的电子邮件发件人类`Mail`是这样定义的......

```
public class Mail extends javax.mail.Authenticator {
    public Mail() {
        // some initialization code
    }
    public void send() {
        // some more code
    }
} 
```

现在出于某种原因，每当我尝试创建扩展对象的实例时`javax.mail.Authenticator`，我都会得到`NoClassDefFoundError`. 如果我删除`javax.mail.Authenticator`扩展名，我在尝试创建`Mail`. 我还包含所有必要的 jar（mail.jar、activation.jar、additional.jar）。有谁知道是什么导致了这个问题以及我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:10:15.820

如果在 ADT 更新后出现此问题，您应该查看[这篇文章](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)。

实际上，您必须创建一个**libs**文件夹来放置所有库，并且构建路径将由 Eclipse 管理。

# javascript - 需要用于单页 Web 应用程序的免费 javascript 库

> ID：11587697
> 
> 赞同：0
> 
> 时间：2012-07-20T22:21:36.370
> 
> 标签：javascript

我们正在开发一个网页，其中表格将在每个定义的时间间隔内填充异步 ajax 调用。用户选择几行并将其发送回服务器。我试过淘汰赛。它是一个很棒的库，但现在我遇到内存泄漏问题并且无法检测到原因。该网页应该运行数小时，因此内存管理是必不可少的。

还有其他建议吗？

**更新** 这是我在淘汰赛论坛上发布的问题。 [https://groups.google.com/forum/?fromgroups#!topic/knockoutjs/Jis8AgHhPRc](https://groups.google.com/forum/?fromgroups#!topic/knockoutjs/Jis8AgHhPRc)

基本上每次我将“新”数据绑定到现有视图模型时都会遇到问题。我还没有显示复选框选择功能，因为我还不能解决新更新的内存问题。

# javascript - 如何用没有名称或 ID 的 javascript 替换标签中的文本？

> ID：11587699
> 
> 赞同：3
> 
> 时间：2012-07-20T22:21:48.763
> 
> 标签：javascript, jquery, html, datatables

我正在使用 datatables jquery 插件来美化我的表格。我正在尝试将搜索框风格化，使其看起来更像这样

![CSS3 搜索框](../Images/721d368394fd5e54035a46023a446ee1.png)

但是，为数据表中的当前搜索框**生成的 javascript**代码看起来像这样

```
<div class="dataTables_filter" id="countstable_filter">
    <label>Search: 
          <input type="text" aria-controls="countstable" placeholder="Search">
    </label>
 </div> 
```

我能够让 javascript 将占位符属性添加到搜索框。但我不知道如何删除 Search: 文本。我在谷歌上看到了一些解决方案，但他们要求标签有一个我在这里没有的 id。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T22:54:03.400

`Search:`由于您使用的是 DataTables，您还可以通过更改语言变量来关闭字符串，请参阅有关[oLanguage.sSearch](http://www.datatables.net/usage/i18n#oLanguage.sSearch)和[jsBin](http://live.datatables.net/abetip/edit#preview)`sSearch`的更多文档。

```
$("#someTable").dataTable({
  oLanguage: {
    sSearch: ""
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T22:27:46.383

您可以删除包含`Search:`使用的文本节点：

```
$("#countstable_filter label").contents().first().remove(); 
```

`.first()`是因为它是标签的第一个节点（文本节点）。`.contents()`和之类的功能`.first()`使您无需 ID 即可查找节点（遍历 DOM）。从本质上讲，您从一个元素开始，然后使用特定的函数遍历 DOM，直到找到想要的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:30:55.760

```
var x=document.getElementsByTagName("input");
for(var i=0;i<x.length;i++){
    var obj = x[i];
    if(obj.getAttribute("type")=='text' && obj.getAttribute("aria-controls")=='countstable' && obj.getAttribute("placeholder")=='Search'){
    // do stuff with the object
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T22:33:31.300

```
var label = $('label', '.dataTables_filter');
    label.html(label.children()); 
```

[小提琴](http://jsfiddle.net/dtJXZ/)

`children()`不会包含文本节点，所以只用元素重写内容，去掉文本节点。

# c - gpu上的动态多维数组分配

> ID：11587704
> 
> 赞同：0
> 
> 时间：2012-07-20T22:22:43.020
> 
> 标签：c, cuda

我可以在 GPU 上为静态多维数组分配内存（cudaMalloc），声明如下`int b[size1][size2][size3][size4][size5]...;`。例如，如何为 GPU 上的动态数组分配内存（cudaMalloc）`int ***a;`（我们也可以假设更高的维度），`a`所有大小在哪里不同？假设`a`已在 CPU 端分配了其维度的大小。简单的例子将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:27:06.387

使用[cudaMalloc](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_gc63ffd93e344b939d6399199d8b12fef.html)动态分配内存。对于高维数组，只需计算总的展平大小并大步访问数组：

```
void * p;
cudaError_t e = cudaMalloc(&p, dim1 * dim2 * dim3 /* ... */);
if (e != cudaSuccess) { /* error! */ }

// Access
int * arr = p;
arr[i1 * dim2 * dim3 + i2 * dim3 + i3] = 2; // etc., in strides 
```

（对于 2 维或 3 维数组，您可能还想使用[cudaMalloc3DArray](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_g4a8473bad5109b6cf1794b4154cc3e0d.html#g4a8473bad5109b6cf1794b4154cc3e0d)。）

还有一个相应的主机版本[cudaMallocHost](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_g9f93d9600f4504e0d637ceb43c91ebad.html#g9f93d9600f4504e0d637ceb43c91ebad)，它分配设备可直接访问的页面锁定主机内存。

# python - 在单个方法上启用 django 的 TEMPLATE_STRING_IF_INVALID

> ID：11587706
> 
> 赞同：5
> 
> 时间：2012-07-20T22:23:19.663
> 
> 标签：python, django

我创建了一个显示其他模板预览的视图。我想在模板中显示空标签，所以我已经包含了

```
TEMPLATE_STRING_IF_INVALID = '%s' 
```

...在我的`settings.py`档案上。但是，我只想为特定视图启用此设置，而不是在我的应用程序上全局启用此设置。

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:08:15.630

```
from django.conf import settings

def myview(request):
    settings.TEMPLATE_STRING_IF_INVALID = '%s' # '%s' will get expanded to the variable name that was not found
    ...
    template = render(request, 'myview.html', {})
    settings.TEMPLATE_STRING_IF_INVALID = ''
    return template 
```

请注意，这很丑陋。如果其他用户在您将 TEMPLATE_STRING_IF_INVALID 重置回 '' 之前的短时间内请求不同的页面，那么他们可能会看到显示的标签无效。[Django 文档明确说不要这样做](https://docs.djangoproject.com/en/dev/topics/settings/#s-altering-settings-at-runtime)，但也有一张公开的[票](https://code.djangoproject.com/ticket/14628)表明它可能适用于某些设置。

希望更聪明的人会过来并提供更好的解决方案。

# php - 从数据库中获取下一个最大值和下一个最小值

> ID：11587708
> 
> 赞同：0
> 
> 时间：2012-07-20T22:23:21.553
> 
> 标签：php, mysql

总而言之，我有一个 ID 编号，我想在我的数据库中获得下一个最低的 id，我还想获得下一个最大的编号。有没有一种简单的方法可以做到这一点？

所以说我有以下数列：

9 7 6 4 1

我目前的数字是 6，然后我想选择 7 作为下一个最高值，4 作为下一个最低值。

另外，如果没有更高的数字，那么我只想返回最高的数字，而对于较低的数字则返回相同的内容。如果没有较低的数字，那么我只想选择较低的数字。

是否有捷径可寻？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:26:50.657

这将获得您的两个值：

```
SELECT MIN(number) AS next_number FROM table_name WHERE number > 6

SELECT MAX(number) AS last_number FROM table_name WHERE number < 6 
```

如果您在一个查询中需要它们，您可以将它们用作子查询并选择 next_number 和 last_number

# ruby-on-rails - 这个 Ruby 类方法是如何被调用的？

> ID：11587711
> 
> 赞同：3
> 
> 时间：2012-07-20T22:24:03.450
> 
> 标签：ruby-on-rails

在[从 Rails 应用程序导出 CSV](http://railscasts.com/episodes/362-exporting-csv-and-excel)的屏幕截图中，Ryan Bates 展示了以下简单代码。

我试图弄清楚类方法 Product::to_csv 实际上是如何在 ProductController.rb 的第 5 行被调用的，因为它似乎不遵循正常的 Ruby 规则。

**产品.rb**

```
1 class Product < ActiveRecord::Base   
2   def self.to_csv(options = {})
3     ...
4   end
5 end 
```

**products_controller.rb**

```
1 class ProductsController < ApplicationController
2  def index
3    @products = Product.order(:name)
4    respond_to do |format|
5      format.csv { send_data @products.to_csv }
6      ...
7    end
8  end
9 end 
```

由于 to_csv 是一个类方法，我希望调用看起来像 Product::to_csv()。

根据文档，@products 是 ActiveRecord::Relation 的一个实例。为什么发送到 ActiveRecord::Relation 实例的消息会导致 Product 类对象上的方法被调用？更奇怪的是，在发送方和接收方中将 to_csv 重命名为任意名称会导致 NoMethodError，所以也许有一些基于以 to_ 开头的名称的魔法正在发生？

我错过了一些明显的东西吗？任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:06:16.720

这只是 Rails 所做的事情之一。任何类方法都会自动成为“集合”方法，这意味着它们可用于关系对象。范围和类方法可以这样互换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:59:11.940

我现在可以回答以下问题：

> 为什么发送到 ActiveRecord::Relation 实例的消息会导致 Product 类对象上的方法被调用？

`ActiveRecord::Relation`类用于链接多个方法，而不会实际触发多个 SQL 查询。这样你就可以编写类似的东西`Product.where('price <= ?', 100).order(:price).limit(30)`，Rails 只会执行一个查询。

魔术之所以有效，是因为在`ActiveRecord::Relation`您尝试访问数据之前（例如，因为一个`first`或`all`调用），您有一个实例，那时查询将运行并且您将拥有`ActiveRecord::Base`一个或他的后代之一。

长话短说，如果你检查类，`@products.class`你会看到是一个`ActiveRecord::Relation`但后来你有`Product`实例，然后你可以调用该`to_csv`方法。

# ruby-on-rails - gmaps4rails - 在表单中放置新标记时，现有标记不会被清除

> ID：11587716
> 
> 赞同：2
> 
> 时间：2012-07-20T22:24:42.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

我有一个 Rails 3.2 应用程序，允许用户创建商店，我希望用户将他们的商店放在地图上。我尝试了[gmaps4rails](https://github.com/apneadiving/Google-Maps-for-Rails/) gem 并通过使用默认配置让它工作——将用户输入的地址转换为坐标并在地图上显示标记。但是我发现转换过程的准确性不一致，我更喜欢让用户在地图上放置自己的标记。

这是我遵循 gem 的自述文件后的代码：

```
# migration
t.string  "address",  :null => false
t.float   "latitude"
t.float   "longitude"
t.boolean "gmaps"

# model Shop.rb
attr_accessible :name, :address, :latitude, :longitude

acts_as_gmappable

def gmaps4rails_address
  address
end

# shops_controller.rb
def show
  @shop = Shop.find(params[:id])
  @json = Shop.all.to_gmaps4rails
end

def edit
  @shop = Shop.find(params[:id])
  @json = Shop.all.to_gmaps4rails
end

def update
  @shop = Shop.find(params[:id])
  @json = Shop.all.to_gmaps4rails

  if @shop.update_attributes(params[:shop])
    flash[:success] = "Shop's updated."
    redirect_to shop_path(@shop)
  end
end

# view
<%= gmaps4rails(@json) %> 
```

部分形式（引用自 gem 的[wiki](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies)）：

```
# _form.html.erb
....
<%= gmaps4rails(@json) %>
<% content_for :scripts do %>
<script type="text/javascript" charset="utf-8">
  var markersArray = [];
  // On click, clear markers, place a new one, update coordinates in the form
  Gmaps.map.callback = function() {
    google.maps.event.addListener(Gmaps.map.serviceObject, 'click', function(event) {
      clearOverlays();
      placeMarker(event.latLng);
      updateFormLocation(event.latLng);
    });
  };
  // Update form attributes with given coordinates
  function updateFormLocation(latLng) {
    $('#shop_attributes_latitude').val(latLng.lat());
    $('#shop_attributes_longitude').val(latLng.lng());
    $('#shop_attributes_gmaps_zoom').val(Gmaps.map.serviceObject.getZoom());
  }
  // Add a marker with an open infowindow
  function placeMarker(latLng) {
    var marker = new google.maps.Marker({
        position: latLng, 
        map: Gmaps.map.serviceObject,
        draggable: true
    });
    markersArray.push(marker);
    // Set and open infowindow
    var infowindow = new google.maps.InfoWindow({
        content: '<div class="popup"><h2>Awesome!</h2><p>Drag me and adjust the zoom level.</p>'
    });
    infowindow.open(Gmaps.map.serviceObject,marker);
    // Listen to drag & drop
    google.maps.event.addListener(marker, 'dragend', function() {
        updateFormLocation(this.getPosition());
    });
  }
  // Removes the overlays from the map
  function clearOverlays() {
    if (markersArray) {
      for (var i = 0; i < markersArray.length; i++ ) {
        markersArray[i].setMap(null);
      }
    }
    markersArray.length = 0;
  }
</script> 
```

问题：

*   在地图上单击时，现有标记不会被清除。它确实提供了一个新的标记。
*   当我单击提交按钮时，纬度和经度不会更新以反映新标记的新位置。它只是使用旧的。

* * *

**更新**

我设法让“更新标记位置”部分工作，但在表单中单击地图时，现有标记仍未清除。显示页面上的结果只显示更新的标记，这很好。

这是更新的代码：

```
# Shop.rb
acts_as_gmappable :process_geocoding => false

# no more def gmaps4rails_address in the model

# controller
def show
  @json = Shop.find(params[:id]).to_gmaps4rails
end

def edit
  @json = Shop.find(params[:id]).to_gmaps4rails
end

def update
  @shop = Shop.find(params[:id])
  # @json = Shop.all.to_gmaps4rails # not needed here
  ...
end

# _form.html.erb
<%= gmaps4rails(@json) %>
<%= f.hidden_field :latitude %>
<%= f.hidden_field :longitude %>
<% content_for :scripts do %>
...
function updateFormLocation(latLng) {
  $('#shop_latitude').val(latLng.lat());
  $('#shop_longitude').val(latLng.lng());
  $('#shop_gmaps_zoom').val(Gmaps.map.serviceObject.getZoom());
}
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:34:27.990

我想你应该简单地替换：

```
markersArray[i].setMap(null); 
```

和：

```
markersArray[i].serviceObject.setMap(null); 
```

# jquery-mobile - 我应该把 data-url 属性放在哪里，目标 html 页面文件应该是什么样子？

> ID：11587718
> 
> 赞同：0
> 
> 时间：2012-07-20T22:25:01.473
> 
> 标签：jquery-mobile

[如果我掌握正确](http://jquerymobile.com/demos/1.0/docs/pages/page-navmodel.html)，这`data-url`使我能够更改页面并保持其他部分（页眉和页脚）不变，因此我可以将每个页面放在单独的`html`文件中。

那么我把这个放在哪里`data-url`呢？在将页面更改为下一个的按钮（例如）中，还是在页面`div`本身中？

如果它在`div`每个 html 文件的页面中，该 html 文件是否应该包括整个样板文件`<script ... jquery.ver.min.js></script>`，`<link ... .css ... />`页眉和页脚`div`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:06:21.410

JQM 框架会自动添加和使用 data-url 属性。这不是您实际使用的东西。这不是一种让页眉和页脚保持原样的方法。您将希望在每个页面中包含页眉和页脚。文档的那部分试图解释框架如何在内部使用该属性。`<a href="#page2">Page 2</a>`在 JQM 多页面环境中，您使用其 id 属性或任何其 id链接到另一个页面。然后，如果您有单独的页面，您将像往常一样链接到该页面。IE`<a href="page2.html">Page 2</a>`

`<head>...</head>`出于以下原因，我建议您包括样板文件部分。

1.  如果您的用户点击刷新。
2.  您的用户可以通过链接添加书签或访问您应用中的特定页面。

在任何一种情况下，他们都需要 css 和 javascript。但是，如果您打算使用 phonegap，您可以忽略这一点，因为用户无法点击刷新，也不会通过链接或书签到达页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:09:42.447

问题一：你把页面中的 div 中的 url 是 history 或者 back 函数重新访问页面所需要的。它是必需的，因为一个 html 文件可以有多个页面。

在按钮/链接中，您将 url 放入 href 属性中，就像在普通 html 中一样。

[请参阅http://jquerymobile.com/demos/1.1.1/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-navmodel.html)中的 Data-url 部分

问题2：视情况而定。如果你认为页面可以独立调用，你就放所有的样板。Mobile Jquery 将提取您的页面 div。

如果页面更像是一个应用程序的对话框，它本身没有任何意义，那么删除样板文件会更有效。需要传输的数据更少，浏览器不需要解析它只是为了找出它需要丢弃的部分。

如果无论如何在服务器上生成它，最好是找出它是正常调用还是ajax调用，然后发送样板文件。

# windows - 检索最大化最小化窗口的窗口位置

> ID：11587721
> 
> 赞同：1
> 
> 时间：2012-07-20T22:25:14.590
> 
> 标签：windows, winapi

考虑这种情况：

*   在多显示器系统上，
*   应用程序被最大化，然后最小化，
*   在我的应用程序中，我有上述应用程序主窗口的 HWND

现在，如何确定从最小化状态恢复时窗口将显示在哪个监视器上？GetWindowRect 和 GetWindowInfo 产生负值，并且显然对于所有监视器都是相同的。GetWindowPlacement 在 rcNormalPosition 中提供了很好的值，但这些是应用程序在未最大化时返回的坐标，可能部分或全部在另一个监视器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:42:13.653

尝试`MonitorFromRect`使用`rcNormalPosition`和`MONITOR_DEFAULTTONEAREST`标志的功能。之后 - 调用`GetMonitorInfo`以确定工作监控区域。

# jsf - 如何使用漂亮的面孔实现自定义导航处理 - 无法传入所需的参数

> ID：11587722
> 
> 赞同：0
> 
> 时间：2012-07-20T22:25:27.187
> 
> 标签：jsf, navigation, prettyfaces

使用 PF 3.3.1、PrettyFaces 3.3.3 和 JSF/Mojarra2.1。

我有一个自定义导航处理程序来处理我的应用程序页面上的“取消”按钮 - 取消按钮需要返回到上一个（引用）页面。我已经实现了一个基于堆栈的解决方案，它保存了用户导航的踪迹，并且几乎完成了 navigationHandler 的实现——但现在我遇到了一个障碍。我似乎无法获得取消操作以导航回我想要的页面。我尝试了以下方法：

`FacesContext.getCurrentInstance().redirect`在我的 NavigationHandler.handleNavigation 中。

所以接下来我尝试了类似的东西（同样，在 NavigationHandler.handleNavigation 中）：

```
BreadCrumbStack.NavDetail navDetail = breadCrumbStack.popLastCrumb(facesContext);
if (navDetail != null) {
    navDetail.getPrevViewId() + " ActionMethod: " + navDetail.getActionMethod() + " ActionName:    " + navDetail.getActionName());
    facesContext.getViewRoot().setViewId(navDetail.getPrevViewId());
    parentHandler.handleNavigation(fc, navDetail.getActionMethod(), navDetail.getActionName());
    return;                     
} 
```

现在的问题是 URLMapping（漂亮的面孔 3.3.2） - 抱怨没有 ID，这是必需的：

`PrettyException: Exception occurred while building URL for Mapping Id Required value was null`

我在它的末尾有带有 ID 的完整 URL - 我想在我的重定向中使用它 - 但是，在我的自定义 navigationHandler 的 handleNavigation 方法中，重定向似乎无法正常工作。

有人对我如何能够优雅地解决这个问题有任何想法吗？附加在 url 末尾的 ID/参数可能因每个屏幕而异，我并不特别想一起破解解决方案 - 如果我能以某种方式将 url 提供给 PrettyFaces 中的某个预定义类，那就太好了会工作或做一个完整的重定向（我无法上班）

在此先感谢您的帮助！

# wpf - 如何在 CostumControl 中使用图像

> ID：11587723
> 
> 赞同：0
> 
> 时间：2012-07-20T22:25:36.003
> 
> 标签：wpf, user-controls

我对写在名为“PControls”的单独库中的 CostumControl 中的图像有疑问。

在该库中，我有一个名为“Resources”的文件夹，其中包含图像“group.png”、“filter.png”和“sort.png”。当我尝试在另一个项目中使用我的控件时，图像没有出现......

我已经尝试过以下方法：

*   所有图像构建操作都设置为资源（不是嵌入式资源）

*   图像源属性设置为每个可能的 URI（例如“/PControl;/component/Resources/filter.png”）“../Resources/filter.png”是 VS 似乎找到图像的唯一值，因为没有显示错误

这是我的样式的一部分 - 它基本上是标准 WPF DataGrid 的样式，通过工具栏增强，其中包含应显示图像的按钮：

```
<Style TargetType="{x:Type local:PDataGrid}">
    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
    <Setter Property="BorderBrush" Value="#FF688CAF"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="RowDetailsVisibilityMode" Value="VisibleWhenSelected"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
    <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:PDataGrid}">
                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                    <ScrollViewer x:Name="DG_ScrollViewer" Focusable="false">
                        <ScrollViewer.Template>
                            <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="25"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Button Command="{x:Static local:PDataGrid.SelectAllCommand}" Focusable="false" Style="{DynamicResource {ComponentResourceKey ResourceId=DataGridSelectAllButtonStyle, TypeInTargetAssembly={x:Type local:PDataGrid}}}" Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.All}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type local:PDataGrid}}}" Width="{Binding CellsPanelHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type local:PDataGrid}}}"/>
                                    <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter" Grid.Column="1" Grid.ColumnSpan="2" Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type local:PDataGrid}}}"/>
                                    <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" Grid.ColumnSpan="2" Grid.Row="1"/>

                                    <ToolBarTray Orientation="Vertical" Grid.Row="1" Grid.Column="2" IsLocked="True">
                                        <ToolBar Band="1" BandIndex="1" >
                                            <Button Width="24" Height="24" ToolTip="Sort">
                                                <Image Source="../Resources/sort.png" />
                                            </Button>
                                            <Button Width="24" Height="24" ToolTip="Filter">
                                                <Image Source="../Resources/filter.png" />
                                            </Button>
                                            <Button Width="24" Height="24" ToolTip="Group">
                                                <Image Source="../Resources/group.png" />
                                            </Button>
                                        </ToolBar>
                                    </ToolBarTray>
                                    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:10:14.173

现在开始工作了！

我确定我昨天已经尝试过了，但现在以下工作：

```
<ToolBarTray Orientation="Vertical" Grid.Row="1" Grid.Column="2" IsLocked="True">
    <ToolBar Band="1" BandIndex="1" >
        <Button Width="24" Height="24" ToolTip="Sort">
            <Image Source="pack://application:,,,/PControls;component/Resources/sort.png" />
        </Button>
        <Button Width="24" Height="24" ToolTip="Filter">
            <Image Source="pack://application:,,,/PControls;component/Resources/filter.png" />
        </Button>
        <Button Width="24" Height="24" ToolTip="Group">
            <Image Source="pack://application:,,,/PControls;component/Resources/group.png" />
        </Button>
    </ToolBar>
</ToolBarTray> 
```

# php - 有什么方法可以从 Twitter API 请求中获取链接、主题标签和 @names？

> ID：11587730
> 
> 赞同：1
> 
> 时间：2012-07-20T22:26:58.307
> 
> 标签：php, regex, twitter

我正在构建一个网站，并且我正在使用 Twitter API 来显示来自用户推文的数据。它工作正常，但所有推文都以纯文本形式检索。这意味着，与 Twitter 网站不同，所有链接都是纯文本，没有@names 是链接，并且主题标签是完全静态的。

我会假设 Twitter 使用正则表达式提取这些元素，但我不仅不擅长正则表达式，而且我希望结果尽可能接近 Twitter 的实现。有没有办法从 Twitter API 本身中提取这些？如果没有，我怎么能尽可能接近 Twitter 的解析？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T05:06:29.223

看[`Tweet Entities`](https://dev.twitter.com/docs/tweet-entities)。您可以将参数添加`&tweet_entities=1`到某些 REST 调用的末尾。JSON 响应将包括您寻找的归因于推文的额外属性。

IE

> **urls 实体**
> 
> 从推文文本中提取的 URL 数组。每个 URL 实体都带有以下属性： url 、 display_url、expanded_url、indices

```
 "text": "Twitter for Mac is now easier and faster, and you can open multiple windows at once http://t.co/0JG5Mcq",
    "entities": {
      "media": [
      ],
      "urls": [
        {
          "url": "http://t.co/0JG5Mcq",
          "display_url": "blog.twitter.com/2011/05/twitte…",
          "expanded_url": "http://blog.twitter.com/2011/05/twitter-for-mac-update.html",
          "indices": [
            84,
            103
          ]
        }
      ],
      "user_mentions": [
      ],
      "hashtags": [
      ]
    } 
```

> **主题标签实体**
> 
> 从推文文本中提取的一系列标签。每个 Hashtag 实体都具有以下属性：
> 
> text
> Hashtag 文本索引
> Hashtag 从中提取的字符位置

```
 "text": "Loved #devnestSF"
>     "entities": {
>       "media": [
>       ],
>       "urls": [
>       ],
>       "user_mentions": [
>       ],
>       "hashtags": [
>         "text": "devnestSF"
>         "indices": [
>           6,
>           16
>         ]
>       ]
>     } 
```

> **user_mentions 实体**
> 
> 从推文文本中提取的一组 Twitter 屏幕名称。每个用户实体都带有以下属性：
> 
> id
> 用户 ID（int 格式） id_str 用户 ID（字符串格式） screen_name
> 用户屏幕名称 name
> 用户全名索引
> 提取用户提及的字符位置

```
"text": "@rno Et demi!"
    "entities": {
      "media": [
      ],
      "urls": [
      ],
      "user_mentions": [
        {
          "id": 22548447,
          "id_str": "22548447",
          "screen_name": "rno",
          "name": "Arnaud Meunier",
          "indices": [
            0,
            4
          ]
        }
      ],
      "hashtags": [
      ]
    } 
```

此链接上的更多推文实体：

[https://dev.twitter.com/docs/tweet-entities](https://dev.twitter.com/docs/tweet-entities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:38:43.260

我相信这就是您正在寻找的：

[https://dev.twitter.com/docs/api/1/get/statuses/oembed](https://dev.twitter.com/docs/api/1/get/statuses/oembed)

# c++ - 将 MacOSPath 转换为 POSIX 时如何设置卷名

> ID：11587735
> 
> 赞同：0
> 
> 时间：2012-07-20T22:27:29.863
> 
> 标签：c++, macos, posix, macos-carbon

在**Carbon**应用程序中，我需要将 HFS 样式的 MacOS 路径转换为可在 fopen() 调用中使用的 POSIX 路径。例如：

*我的卷：myFolder：myFile.jpg*

类似于：

*/我的卷/myFolder/myFile.jpg*

如果*我的 Vol*是我的系统磁盘， /myFolder/ *myFile.jpg*工作得很好，但如果它在不同的卷上，它就不起作用（即*我的 Vol/myFolder/myFile.jpg*失败。

如何在此处指定音量？

谢谢！

账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:27:57.707

一种避免硬编码的方法（考虑未安装的卷`/Volumes/`，例如手动安装的卷。）

```
CFStringRef myHFSPath = CFSTR("Macintosh HD:Some Folder:Some Subfolder:Some File");

CFURLRef url = CFURLCreateWithFileSystemPath(NULL, myHFSPath, kCFURLHFSPathStyle, FALSE);
if (url) {
    UInt8 posixPath[PATH_MAX * 2]; /* Extra-large because why not? */
    if (CFURLGetFileSystemRepresentation(url, TRUE, posixPath, sizeof(posixPath)) {
        /*
            posixPath now contains a C string suitable for passing to BSD and
            C functions like fopen().
        */
    }
    CFRelease(url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:38:45.410

对于 POSIX 样式路径，您需要在辅助卷前面加上“/Volumes”。所以你的例子是*/Volumes/myVol/myFolder/myFile.jpg*。请注意，即使*myVol*是您的系统磁盘，这也可以。所以以*/Volumes*开头总是安全的。

# unix - 如何获取符号链接列表，不包括损坏的链接？

> ID：11587737
> 
> 赞同：7
> 
> 时间：2012-07-20T22:27:43.063
> 
> 标签：unix, symlink

我已经能够找到一个命令来获取损坏链接的列表，而不是“工作”符号链接

```
find -H mydir -type l 
```

我该怎么做相反的事情？

如果我有这些文件`mydir`：

```
foo
bar
bob
carol 
```

如果它们都是符号链接，但`bob`指向一个不存在的文件，我想看看

```
foo
bar
carol 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:44:43.263

随着`find(1)`使用

```
$ find . -type l -not -xtype l 
```

此命令查找在跟随后不再是链接的链接 - 即完整的链接。（请注意，它们可能指向普通或特殊文件、目录或其他。使用`-xtype f`而不是`-not -xtype l`仅查找指向普通文件的链接。）

```
$ find . -type l -not -xtype l -ls 
```

报告他们指向的地方。

如果您在交互式 shell 使用中经常遇到类似的问题，[zsh](http://www.zsh.org/)是您的朋友：

```
% echo **/*(@^-@) 
```

遵循相同的想法：[Glob 限定符](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Glob-Qualifiers) `@`限制为链接，并且在启用以下功能时`^-@`表示“不是（`^`）链接（ ）（ ）。`@``-`

（另请参阅[这篇关于在 python 中查找断开链接的帖子](https://stackoverflow.com/questions/20794/)，实际上这演示了您可以在 Linux 下的所有语言中执行的操作。有关“如何查找*断开*的链接”相关问题的完整答案，请参[见此博客文章。）](http://noone.org/blog/English/Computer/Shell/How%20to%20find%20broken%20symlinks.futile)

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T22:35:20.470

这将仅显示（LINUX）符号链接，这些链接是指向实际存在的常规文件的链接：

```
find DIR1 -type l -xtype f -ls 
```

从 xtype 选项的“查找”（LINUX）文档中：“对于符号链接，-xtype 检查 -type 不检查的文件的类型”

此选项将显示指向实际存在的目录的符号链接：

```
find DIR1  -type l -xtype d -ls 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:39:20.343

一种 bash 解决方案：

```
find . -type l -print | while read src
do
    [[ -e "$src" ]] && echo $src
done 
```

所以，找到所有符号链接并检查是否存在，如果存在 -> 回显它*

# javascript - 为什么 URI 编码 ('#') 锚点会导致 404，以及如何在 JS 中处理它？

> ID：11587744
> 
> 赞同：8
> 
> 时间：2012-07-20T22:28:34.510
> 
> 标签：javascript, hash, webkit, hashtag

[prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)使用主题标签，但如果它们被编码（到 %23），大多数浏览器都会出现 404 错误。这[之前已经讨论过](https://stackoverflow.com/a/3784983)：

> 您会收到 404 错误，因为 #callback 部分不是 URL 的一部分。它是浏览器使用的书签，它永远不会在请求中发送到服务器。如果您对哈希进行编码，它会成为文件名的一部分。

1.  为什么哈希会因为它是 URI 编码而成为文件的一部分？这不是一个错误吗？

2.  我问是因为[prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)使用主题标签并遇到同样的问题。我想添加一个'？在哈希是最优雅的解决方案之前，我只是有点茫然如何在现有代码中做到这一点：

    ```
    函数getHashtag(){
    网址=位置.href；
    hashtag=url.indexOf('#gallery')!==-1)?decodeURI(url.substring(url.indexOf('#gallery')+1,url.length)):false;
    返回标签；
    }
    函数 setHashtag(){
    if(typeof theRel=='undefined')return; location.hash=theRel+'/'+rel_index+'/';
    }
    函数 clearHashtag(){
    if(location.href.indexOf('#gallery')!==-1)location.hash="";
    }
    ```

3.  还有其他建议吗？我会考虑调整我的 404 页面，但这似乎更像是处理问题而不是阻止它。

谢谢！

**编辑：** 由于漂亮照片处理这些哈希的方式显然没有任何问题，我最终将这些规则添加到我的 apache 服务器：

```
RewriteRule ^(.*).shtml(%23|#)$ /$1.shtml [R=301,NE,L]
RewriteRule ^(.*).shtml([^g]+)gallery(.+)$ /$1.shtml#gallery$3 [R=301,NE,L] 
```

他们成功处理了 %23 引起问题的情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T23:47:48.227

> 1.  为什么哈希会因为它是 URI 编码而成为文件的一部分？这不是一个错误吗？

如果您将浏览器指向，浏览器会将此解释为从服务器`http://example.com/index.html#title`请求文件。请求完成后，浏览器会在文档中查找名称为“title”（即）的锚元素。`index.html``example.com``<a name="title">My title</a>`

如果您改为指向，则浏览器向来自`http://example.com/index.html%23title`的文件发出请求，该文件可能在服务器上不存在，给您一个 404。看到区别了吗？`index.html%23title``example.com`

这不是一个错误。它是1998 年[最后一次更新](http://www.ietf.org/rfc/rfc2396.txt)的 Internet 标准的一部分。请参阅[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)。报价：

> 字符“#”被排除在外，因为它用于将 URI 与 URI 引用中的片段标识符分隔（第 4 节）。

至于 2 和 3，您的示例代码中没有足够的上下文来说明您要做什么。你如何调用你的代码？你想用不工作的漂亮照片做什么？您是否尝试从用户点击或其他 javascript 事件重定向到特定照片或画廊？当有人访问特定页面时，您是否尝试打开图库？

我用 twitter/oauth 检查了链接的问题，但我看不出它与您提供的代码有何联系。我也开始研究漂亮的照片，但我也看不出你的代码与它有什么关系。

而不是更改您的 404 页面，您可能需要的是一个代码内处理程序或服务器重写规则，该规则接受未找到的请求，`%23`并将用户重定向到解码的 url。这可能有一些缺点，但如果您从无法控制的其他来源接收传入请求，那将是相当优雅的。你的服务器环境是什么？（语言、服务器技术、机器所有者等）

我很乐意为您提供解决方案或解决方法来更新我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T00:04:54.730

回答＃1）

它将成为 URL 的一部分，因为它不再是浏览器/服务器/等知道如何解析的令牌。

我的意思是那个“？” 在 URL 中扮演着重要的角色——服务器知道区分之前和之后的内容。浏览器不需要关心 URI 中什么是动态的或不是动态的——这都很重要（尽管 JavaScript 将位置对象中的值分开）。

浏览器不会向服务器发送“#......”，因为标签对浏览器具有特殊的含义。

但是，如果您在 JavaScript 中转义该哈希，浏览器会毫不犹豫地将转义的字符串作为文字值发送到服务器。

为什么不呢？如果您的搜索查询合法地需要一个哈希字符（您向 facebook 墙发出 POST 请求，并且您正在提交一个电话号码），那么您就完蛋了。或者您正在 411.com 或其他任何地方对某个号码进行基于 GET 的搜索，但他们并没有真正考虑过他们的申请。

问题是服务器不会理解转义值将与 url 分开保存，如果它发生在实际路径中。

它必须接受转义字符，否则在文件名/路径/查询/值中有效的空格 (%20) 和其他日常字符会造成问题。

因此，如果您正在寻找：

```
//mysite.gov.on.ca/path/to/file.extension%23action%3Dfullscreen 
```

真的，你肯定会 404。

我敢肯定，你可以做一些事情。第一个将在 Apache 中，或者您所提供的任何服务，您可以编写一个正则表达式，它与第一个“%23”之前的任何 url 匹配，假设没有“？” 预先。

更少的灵魂撕裂实现可能涉及弄清楚是否有办法逃避插件友好的“#”。

例如，Google 使用“hash-bang”策略（“#！”）要求以这种方式提交 URL，以了解是否进行编码。

其他选项可能是检查“#”字符，使用`url.indexOf("#");`并在散列处拆分 URL，并提交有效部分。

这实际上都归结为您要完成的工作-我可以指出为什么这是一个问题，但是如何最好地使其成为非问题取决于您要做什么，如何尝试去做，以及在你工作的环境中允许做什么。

# java - Java EE 6 灰熊彗星引擎单用户通知

> ID：11587747
> 
> 赞同：0
> 
> 时间：2012-07-20T22:29:03.680
> 
> 标签：java, comet, enterprise, grizzly

我正在开发一个需要类似于 websockets 的服务器端推送的项目。当然，EE6 不支持 websockets，所以我集成了 grizzly Comet Long Polling 机制。该项目在 glassfish 3.1.2 上运行。

我的问题是，我要求将投放到彗星事件处理中的事件仅传递给一个特定用户。目前，每个登录的用户都会收到该事件。

Comet 引擎的所有教程、示例和用例都是聊天系统或流应用程序。有没有办法只将一个事件发送给一个特定的用户？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T23:57:54.417

您的项目需要 websockets 吗？

因为发布者-订阅者-机制的 EE 规范中已经存在机制，所以 JMS 最为突出。

# caching - 如何在开发环境中查看/调试缓存管理？

> ID：11587748
> 
> 赞同：2
> 
> 时间：2012-07-20T22:29:12.800
> 
> 标签：caching, symfony

我刚开始学习 Symfony2 反向代理是如何工作的，并且我阅读了所有关于它的文档。缓存旨在在 prod 环境中工作，但是在我开发我的应用程序（dev env）时，设置 exiration 或验证模型，或其他与 http 缓存槽相关的标头 awsome sf2 api。如何在开发环境中查看/调试缓存信息？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:33:36.930

目前，您可以拥有的唯一调试信息是名为“X-Symfony-Cache”的 HTTP 标头。它包含有关命中和未命中的信息。

请参阅文档以获取（很少）更多信息：[http ://symfony.com/doc/current/book/http_cache.html#symfony2-reverse-proxy](http://symfony.com/doc/current/book/http_cache.html#symfony2-reverse-proxy)

# css - iPhone 的 CSS3 菜单兼容性

> ID：11587756
> 
> 赞同：0
> 
> 时间：2012-07-20T22:30:09.787
> 
> 标签：css, ios

我一直在尝试常规的 CSS3 下拉菜单。

```
// CSS
.board {
width: 600px;
height: 50px;
cursor: pointer;
}

.button {
    width: 150px;
    height: 50px;
    float: left;
    display: inline;
    background-color: black;
    color: white;
    font: 20px Arial, Verdana, sans-serif;
}

.sboard {
    width: 150px;
    height: 100px;
    background-color: black;

}

//HTML
<ul class = "board"><li class = "button">
    <ul class = "sboard"></ul>
</li></ul> 
```

由于我的设备对触摸没有响应，我似乎无法让它在 iPhone 上工作。我的谷歌研究只是产生了毫无意义的结果。我应该将哪些属性添加到列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:07:44.027

IOS 需要一些指示菜单是触摸目标。在阅读了一些 Apple 文档（我现在找不到或者我会链接到它）之后，我们添加`onclick="void(0)"`到不是链接的菜单项。

我们的叶子菜单项已经是链接`<a href="...">`，但我们系统中的顶级和中间子菜单是`<li><span>...</span></li>`，并且 IOS 不会做出反应并打开子菜单，直到我们添加了那个*onclick*处理程序。

这些变成`<li><span onclick="void(0)" onfocus="void(0)">...</span></li>`了（添加了*onfocus*，因此键盘选项卡导航有效）

# vim - 如何在vim autocmd中编写从文件名中排除字符串的模式

> ID：11587758
> 
> 赞同：0
> 
> 时间：2012-07-20T22:30:22.330
> 
> 标签：vim, autocmd

我想为具有相同后缀的文件定义不同的映射。

例如，为所有 ruby​​ 文件定义一个通用映射，只为 rspec 文件定义一个不同的映射：

```
au BufNewFile,BufRead *_spec.rb map <Leader>t :w!<cr>:!rspec %<cr>
au BufNewFile,BufRead *.rb map <Leader>t :w!<cr>:!rspec %:r_spec.rb<cr> 
```

上述解决方案在我的机器上不起作用，因为第二个`au`“覆盖”了第一个。

这种写法可以`au`吗？

**更新**：如果我只打开一个缓冲区，只需将最具体的（规范）一个放在通用的一个（rb）下面就可以了。一旦我打开一个规范文件，常规 ruby​​ 文件的 *.rb 映射就会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:36:52.260

在这种情况下，反转`autocommands`和添加`<buffer>`应该会让您获得所需的行为，即：

```
au BufNewFile,BufRead *.rb      map <buffer> ,t action2
au BufNewFile,BufRead *_spec.rb map <buffer> ,t action1 
```

此排序将实现正确的每个文件名映射。

但是您应该注意，打开`*_spec.rb`文件时，**两个** `map`命令都会运行：`action1` **和** `action2`. 这对于某些命令可能是不希望的。

此外，如果您设置`<Leader>`为 comma: `,`，那么您的映射应如下所示：

```
au BufNewFile,BufRead *.rb      map <buffer> <Leader>t action2
au BufNewFile,BufRead *_spec.rb map <buffer> <Leader>t action1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:32:51.830

最后做一个更具体的。换句话说，颠倒这两个命令的顺序。

```
au BufNewFile,BufRead *.rb map <buffer> ,t action2
au BufNewFile,BufRead *_spec.rb map <buffer> ,t action1 
```

一个命令仍然覆盖另一个命令，但这样可以达到您想要的效果。请注意，您可能希望使用更具体的地图`nmap`，例如 或更好`nnoremap`，这样您就不会在其他模式下遇到此地图的问题。

# iphone - 显示表格视图部分标题

> ID：11587759
> 
> 赞同：0
> 
> 时间：2012-07-20T22:30:37.240
> 
> 标签：iphone, xcode, uitableview

我有三个字符串，每个字符串都表示 True 或 False。根据哪些字符串说 True 我会在表格视图中显示它们。这是我的代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
  if ([appDelegate.showFirstField isEqualToString:@"True"]) {
    if (indexPath.section==2) {
        cell.textLabel.text=@"First Field Title";
    }
  }

  if ([appDelegate.showSecondField isEqualToString:@"True"]) {
    if (indexPath.section==3) {
        cell.textLabel.text=@"Second Field Title";
    }
  }

  if ([appDelegate.showThirdField isEqualToString:@"True"]) {
    if (indexPath.section==4) {
        cell.textLabel.text=@"Third Field Title";
    }
  }
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
   //#warning Potentially incomplete method implementation.
   // Return the number of sections.
   int sectionNum = 2;
   if ([appDelegate.showFirstField isEqualToString:@"True"]) {
     sectionNum += 1;
   }
   if ([appDelegate.showSecondField isEqualToString:@"True"]) {
     sectionNum += 1;
   }
   if ([appDelegate.showThirdField isEqualToString:@"True"]) {
     sectionNum += 1;
   }
   return sectionNum;
} 
```

问题是如果`showFirstField`和`showThirdField`是 True 并且`showSecondField`是 False 则部分标题将无法正确设置。有没有办法可以将标题设置为下一个可用部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:56:06.270

在您的代码中，如果`showFirstField`and `showThirdField`are True and `showSecondField`is False 那么`sectionNum`将是**4**。`indexPath.section`因此，可能的值为**0,1,2 & 3**。在这段代码中

```
if ([appDelegate.showThirdField isEqualToString:@"True"]) {
    if (indexPath.section==4) {
        cell.textLabel.text=@"Third Field Title";
    }
  } 
```

即使这个条件`[appDelegate.showThirdField isEqualToString:@"True"]`为真，另一个条件`indexPath.section==4`也会为假。

所以改变你的

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
   //#warning Potentially incomplete method implementation.
   // Return the number of sections.
   int sectionNum = 2;
   if ([appDelegate.showFirstField isEqualToString:@"True"]) {
     sectionNum += 1;
   }
   if ([appDelegate.showSecondField isEqualToString:@"True"]) {
     sectionNum += 1;
   }
   if ([appDelegate.showThirdField isEqualToString:@"True"]) {
     sectionNum += 1;
   }
   return sectionNum;
} 
```

至

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{  
   return 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:45:51.177

经过几个小时的工作后，我采用了不同的方法，这段代码对我有用。**将`check`布尔值设置为 false 并设置为全局变量**

```
if ([appDelegate.showFirstField isEqualToString:@"True"] && checkFirst == FALSE){
    if (indexPath.section >1 && indexPath.section==indexPath.section) {
        checkFirst = TRUE;
        cell.textLabel.text=@"First Field Title";                
    }
}
else if ([appDelegate.showSecondField isEqualToString:@"True"] && checkSecond == FALSE){
    if (indexPath.section >1 && indexPath.section==indexPath.section) {
        checkSecond = TRUE;
        cell.textLabel.text=@"Second Field Title";
    }
}
else if ([appDelegate.showThirdField isEqualToString:@"True"] && checkThird == FALSE){
    if (indexPath.section >1 && indexPath.section==indexPath.section) {
        checkThirdField = TRUE;
        cell.textLabel.text=@"Third Field Title";
    }
} 
```

# rest - 通过 ActiveResource 在 Rails 中使用 HTTPS REST API

> ID：11587766
> 
> 赞同：2
> 
> 时间：2012-07-20T22:31:57.707
> 
> 标签：rest, ruby-on-rails-3.1, oauth, https, activeresource

我对 Rails 和 REST 很陌生。我想在 Rails 中使用 REST API。我找到了一种使用 ActiveResource 的简单而标准的方法。

我要使用的 API 是：[https ://api.pinterest.com/v2/popular](https://api.pinterest.com/v2/popular)

直接访问此 API 时，响应为：{“message”：“请升级您的应用！”，“错误”：“身份验证失败：请升级您的应用！”}

因此，当我从 RAILS 使用它时，我想要相同的结果。

为了做同样的事情，我生成了一个流行的模型并将其代码修改为：

```
class Popular < ActiveResource::Base
  self.site = "https://api.pinterest.com/v2/popular"
  self.format = :json
end 
```

然后，我生成了一个作为 Populars 的控制器并将其代码修改为：

```
class PopularsController < ApplicationController  
  def index
    @popular = Popular.all
    render :json => @popular
  end
end 
```

然后在 routes.rb 中，我添加了

```
resources :populars 
```

在运行“http://localhost:3000/populars”时，它在浏览器中显示“null”。虽然预期结果是 {"message": "Please upgrade your app!", "error": "Authentication failed: Please upgrade your app!"}

请指导，我哪里跑错了。

请提供在 Rails 中使用 HTTPS REST API 的特定指南。如何使用 OAuth 使用它们？

除了通过 ActiveResource 使用它之外，还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:54:41.073

如果你输入控制台

```
1.9.2p320 :041 > Popular.collection_path
 => "/v2/popular/populars.json" 
```

因此，按照惯例，您在服务器端有错误的路线。

您也可以在控制台中启用记录器

```
ActiveResource::Base.logger = Logger.new(STDERR) 
```

你可以看到下一个：

```
1.9.2p320 :042 > Popular.all
I, [2012-08-08T01:51:36.725766 #1371]  INFO -- : GET https://api.pinterest.com:443/v2/popular/populars.json
I, [2012-08-08T01:51:36.725878 #1371]  INFO -- : --> 404 NOT FOUND 17 (1936.9ms)
 => nil 
```

所以这就是结果为零的原因。

[https://github.com/albertopq/oauth-activeresource](https://github.com/albertopq/oauth-activeresource) - 试试这个 gem 来使用带有 oauth 的 activeresource。

# javascript - 渲染由数百万个元素组成的html元素时如何提高性能？

> ID：11587768
> 
> 赞同：0
> 
> 时间：2012-07-20T22:32:09.070
> 
> 标签：javascript, jquery

我在一个基本上是十六进制查看器的 webapp 中使用 jquery。我将每个字节放在它自己的元素（只是一个 <i> 标记）中，并带有一个唯一的 id（文件中的偏移量），所以我可以轻松地引用它。我基本上结束了：

```
var str = 
  "<i id=h0>00 </i>" +
  "<i id=h1>00 </i>" + 
  "<i id=h3>00 </i>" +
  "...";
$("#myid").html(str); 
```

设置该 html 行大约需要 3 秒，当该 str 具有 100K 个标签时（我构建 str var 的方式不同，所以不要对此发表评论，为了清楚起见，我只是在这里这样写，这不是问题）。

是否可以在保持引用显示的每个字节的简单方法的同时提高其性能？我想将每个字节保留在标签中，以便我可以轻松设置它的背景颜色等。我能想到的唯一选择就是一次加载文件的一部分（在那个 str 变量中只保留 10,000 个标签）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:48:43.123

干脆不要。

没有人需要同时查看 100k 字节，即使有人拥有足够大的屏幕来实际查看它们。

只需渲染您现在实际需要显示的标签，并在需要时渲染更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:33:54.527

您可以通过多次执行此操作来逐步加载它：

```
var str = "<i id=h0>00 </i>";
$("#myid").append(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T22:35:00.270

您可以消除标签并编写一个函数，该函数使用 string,slice(a,b) 返回您想要的字符串的文本部分。这将减少加载时间和整体字符数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T22:41:40.320

您可以消除`<i>`标签并仅在实际需要时（以控制背景颜色）在特定文本上以编程方式添加它们。然后，您将按需添加它们，而不是预先占用太多开销。

浏览器应该更有效地使用更少的标签来吞食大量文本。

另一种可能性是实现分页或选项卡，以便不会一次显示所有数据（谁可能想一次查看 100,000 个项目），然后根据需要动态构建后续选项卡/页面。您将一次构建较小的分页项目。这也将消耗更少的内存，因此对移动设备更加友好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T22:43:36.133

查看文档片段。我怀疑 jQuery 的 html 方法使用它。我的猜测是 .html() 只是改变了 innerHTML 属性。documentFragments 可能会提高您的速度，请阅读这篇文章，[http ://ejohn.org/blog/dom-documentfragments/](http://ejohn.org/blog/dom-documentfragments/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T23:13:48.877

你应该

```
$('<i />').attr('id', 'TAB0').html('hello world'); 
```

尝试

```
var $mytab = $('mytab');
$([ 
    { id: 'myid0', iHtml: 'hello world' },
    { id: 'myid1', iHtml: 'hello world' }
]).each(function (n) {
  var data = this;

  $mytab.append(
    $('<i />').attr('id', data.id).html(data.iHtml)
  );

}); 
```

# arrays - 将 CSV 转换为二维数组

> ID：11587769
> 
> 赞同：0
> 
> 时间：2012-07-20T22:32:12.807
> 
> 标签：arrays, applescript

我正在尝试获取一行 CSV 并从中提取一项，这里有一些代码：

```
tell application "Finder"
    set workingFile to (open for access outPath)
    set theContents to read workingFile using delimiter {ASCII character 13} as list
end tell

set rowTwo to item 2 of theContents as list
close access workingFile

set AppleScript's text item delimiters to {","}
set rowParts to (every text item in rowTwo) as list

display dialog rowParts

set secondItem to item 2 of rowParts

display dialog "The second item is:  " & secondItem 
```

当程序尝试执行时出现此错误`set secondItem to item 2 of rowParts`：

```
Result:
error "Can’t get item 2 of {\"Date,Day,Zimmer,Graves,Randolph,Dempsey,Hannah,DeVaughn,,GSA 0034G,GSA 0035G,48' Trailer1,48' Trailer2,53' Trailer\"}." number -1728 from item 2 of {"Date,Day,Zimmer,Graves,Randolph,Dempsey,Hannah,DeVaughn,,GSA 0034G,GSA 0035G,48' Trailer1,48' Trailer2,53' Trailer"} 
```

谁能告诉我为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:45:41.190

变量`rowTwo`必须是**字符串**，而不是**列表**，删除`as list`。

`as list`在其他行是没用的。

```
set theContents to read outPath using delimiter (ASCII character 13)
set rowTwo to item 2 of theContents
set AppleScript's text item delimiters to ","
set rowParts to text items of rowTwo
set secondItem to item 2 of rowParts
display dialog "The second item is:  " & secondItem 
```

# javascript - 使用 Firebase 的数据库式查询

> ID：11587775
> 
> 赞同：46
> 
> 时间：2012-07-20T22:32:44.250
> 
> 标签：javascript, firebase

有没有一种使用 Firebase 执行数据库样式查询的快速方法？

例如：

`users`给定带有字段`user_id`、`name`和的 firebase 引用`age`，执行类似于此的查询的最佳方法是什么：

```
SELECT name FROM users WHERE `user_id`=147; 
```

和

```
SELECT COUNT(*) FROM users WHERE age=21; 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-20T23:21:14.407

一般来说，没有。Firebase 本质上是一个“实时数据库”，随着数据的变化不断地向您流式传输更新，因此进行通用查询更加困难。目前，提供了几个（诚然有限的）查询原语。请参阅文档中的[查询/限制](http://www.firebase.com/docs/queries.html)页面。

您通常可以通过多种方法解决这些限制：

*   **智能地使用位置名称和优先级。**如果您将数据构造为 /users/[userid]/name，则只需检索 /users/147/name 即可完成您的第一个“查询”。如果您知道要按年龄查询，可以使用年龄作为用户节点的优先级，然后执行“usersRef.startAt(21).endAt(21).on('child_added', ...)”让所有用户年满 21 岁。您仍然需要手动计算他们。
*   **做客户端查询。** 如果整个数据集很小，您可以检索整个数据集，然后在客户端手动过滤/处理它。
*   **运行单独的服务器**。它可以连接到 Firebase，同步数据，然后为客户回答“查询”。它仍然可以通过 Firebase 与客户端通信，Firebase 仍然可以作为主要数据存储，但您的单独服务器可以完成工作以快速执行查询。

我们打算随着时间的推移对此进行改进，因为我们意识到与传统关系数据库系统提供的灵活查询相比，这是一个弱点。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-23T14:19:17.253

Lehenbauer 先生当然是 Firebase 一切的大师，所以听他的。;) 然而，这个特定的话题是我已经努力了几个星期了。

以下是我的一些想法，以增强“运行单独的服务器”和“客户端查询”响应：

**ElasticSearch（一个 node.js 脚本）**

通过服务器上的 node.js 脚本，您可以在一小时内集成 ElasticSearch 并提供一些可靠的内容搜索。这是一篇博客文章和一个使其变得更加容易的库：[https ://www.firebase.com/blog/2014-01-02-queries-part-two.html](https://www.firebase.com/blog/2014-01-02-queries-part-two.html)

**可缓存/常见查询**

这些可以由读取表并复制数据的服务器/cron进程来处理。例如，假设我想在注册期间为用户的登录名显示“不可用/可用”，但由于某些复杂的原因，用不同的唯一 ID 存储用户记录。

我的 cron/server 可以从 users 表中读取所有记录，然后将它们插入到另一个由电子邮件地址存储的表中，其中包含用户记录 ID 的值（或我可能想知道的任何其他数据）。

这种重复数据方法是一种手动缓存技术，是 No-SQL 环境中的常见做法；我们正在用存储空间（被认为便宜且可用）来换取速度和简化流程。

**自定义查询（使用队列）**

自定义查询可以通过 XHR (ajax) 直接发送到服务器，这可以完成繁重的工作并返回更好的结果。或者，您可以利用 Firebase 通过队列与服务器后端连接。

客户端将查询请求作为 JSON 放入一个名为的特殊 Firebase 表中`queue`并等待响应。

服务器`queue.on('child_added', ...)`使用 `queue_record.child('response', ...data here...) 侦听并返回数据

这有一些不错的优点。一方面，任何数量的服务器都可以监听并提供响应，使负载平衡变得轻而易举。在 SO中的另一个线程中设置和[覆盖此代码非常简单。](https://stackoverflow.com/questions/11248095/how-can-i-create-a-queue-with-multiple-workers)

希望这有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-12T19:35:25.000

我为firebase创建了自己的CMS，所以在创建firebase数据表时，我用它过滤了它

```
var child = ref.child();
var compare;
switch(filter){
          case "First_Name":
            compare = child.First_Name;
          break;
          case "Last_Name":
            compare = child.Last_Name;
          break;
          case "Phone_Number":
            compare = child.Phone_Number;
          break;
          case "Department_Number":
            compare = child.Department_Number;
          break;
          case "Position":
            compare = child.Position;
          break;
          case "Status":
            compare = child.Status;
          break;
          case "Tier":
            compare = child.Tier;
          break;
      }

      if(compare.match("^" + string)){
        //display items 
```

# ios - 地理围栏的重大位置变化

> ID：11587778
> 
> 赞同：10
> 
> 时间：2012-07-20T22:32:53.417
> 
> 标签：ios, geolocation, gps, geofencing

我需要根据用户与特定位置的接近程度和其他一些规则（例如该区域是否有任何特定消息）向用户传递特定消息。例如，用户上车并开始工作。当他到达工作地点的那一刻，如果有消息要传递，他就会收到某种消息。这就是我的想法（没有代码，只是在我在应用程序的其他部分工作时尝试设计流程）

1.  监听重大的位置变化，每次发生这种情况时将用户的地理位置发送到服务器，以查看该位置附近是否有任何消息要传递。不去。由于过度使用收音机，这会过多地消耗电池。

2.  每天保存消息区域，并在每次重大位置更改时对本地存储的数据进行测试。如果有任何匹配，则联系服务器。理论上听起来更好。

问题：

1.  2号能用吗？
2.  显着位置变化的保真度是多少？我不希望通过不收到位置更改通知而丢失特定区域的消息。
3.  重大的位置变化真的基于蜂窝塔的变化吗？（我多次读到不是）
4.  区域监控会更适合这项任务吗？有人用吗？它的电池消耗是多少？它对显着位置变化有更好的或同等的保真度吗？
5.  如果应用程序被终止，重大的位置变化真的会唤醒我的应用程序吗？有点取决于它。
6.  关于如何以我在这里没有谈到的方式处理这个问题的任何建议？

一百万感谢任何花时间清理这些东西的人。

编辑：额外问题 7\. 区域监控，添加大量区域对系统有什么影响？说有 2 个区域与 100 个区域？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-29T16:38:59.647

我已经尝试了一个类似的过程，并通过显着的位置变化和区域监控达到了我的最佳用途。经过多次迭代，我目前对电池寿命和相当可靠的处理几乎没有影响。

我使用显着的位置更改来触发过滤通知的方法，仅为当前位置有限半径内的那些设置区域。

根据我的经验，预计相距约 3-4 英里的位置会发生重大变化。这可能会有很大差异，但我不记得看到更多。这使得城镇周围的处理非常少见，当用户上高速公路时相当可预测。我尝试了多种区域大小、刷新半径和位置服务敏感度设置。

请记住，您可以注册的地区数量是有限的。我没有找到确切的限制，但一些用户表示任何单个应用程序都不应该期望注册超过 10 个区域。我自己没有找到任何可以证实该数字的参考资料，而且我有时会注册超过 10 个。

当看到设备以高速行驶很长时间时，我已经尝试增加刷新的半径和最小距离。在这种情况下，我觉得我可能会因为不必要的处理周期而浪费电池。在实际使用中，这似乎不是问题，但无论如何我都在努力最大限度地提高效率。

我的经验与您的具体问题有关；

1-对于您的情况，这取决于您打算考虑触发通知的位置有多近。如果您在用户到达几英里内或用户到达城镇时通知您，这实际上可能是可行的。如果您想在用户到达某个位置几米范围内时触发，那么这不适合您。根据我的经验，聆听重大的位置变化通常不会对电池寿命造成很大影响。当然，您在收到事件后进行了多少处理和网络活动是另一个因素。我检查设备移动了多远，自上次位置被接受以来的时间。就我而言，没有必要每次都刷新所有内容，我会相应地限制我的反应。

2- 我对重大位置变化的经验如上所述，但所有文件都清楚地表明，设定距离与所使用的各种信号的条件和可用性无关。我想在城市环境中它更容易预测，而在开阔的空间中则更少。我的大部分经验都属于前者。

3- 从大量的谷歌搜索、大量的文档和大量有根据的推测中，我得出结论，显着的位置变化是由单元可用的所有信号的神奇组合决定的。有 wifi 信号可以以不同程度的准确度广播它们的位置，并且手机信号塔通常知道它们在哪里。定位服务正在使用所有这些以及各自的信号强度来决定设备何时行进了“重要距离”。我认为很明显，计算会随着条件的变化而变化，并且随着它们继续改善准确性和功耗之间的平衡而发生变化，因此规格模糊。

4- 如问题 1 所示，有一些因素需要考虑，这些因素可能会决定您可以单独使用重大的位置更改，但我相信区域监控在任何情况下都最适合您的目的。可能两者的结合是有序的。我对自己的应用程序非常满意。

5- 重大的位置变化会唤醒您的应用。在您的方法中，您必须遵循一些旨在在后台运行的准则，并了解这些限制。在 beginBackgroundTaskWithExpirationHandler 和 UIBackgroundTaskInvalid 调用中包装你的后台方法。注意线程阻塞。完整阅读文档和位置处理指南。

6-我的建议如上。其他注意事项一般是在您使用定位服务时。您需要制作各种自定义处理程序。即使您使用该服务，您也不想对收到的每条消息做出反应。您必须根据需要检查变化、准确性、新近度和所有爵士乐响应。我发现这一系列文章对于了解基础知识非常宝贵：[来自 Long Weekend 网站的第 1 部分，共 3 部分](http://longweekendmobile.com/2010/06/30/location-region-data-in-background-on-ios4-iphone/)

7- 如上所述，我的理解是系统范围内可以注册的区域数量有限制。我认为，由于他们没有确切地告诉您该数字是多少，它可能或多或少地允许您的应用程序取决于其他应用程序设置了多少其他应用程序。根据我的经验，我经常在我设定的范围内注册和删除 10 到 15 个区域。我将它们按从最近到最远的顺序设置，因为我假设最后一个将首先被删除或拒绝。其他注意事项-区域标识符是全局的，因此如果您的标识符不是唯一的，它将用相同的名称替换先前的区域。- 区域大小和边距是您需要试验的设置，以针对您的特定需求进行最佳调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:11:12.720

1.  不要这么想。期望您从服务器获取数据，但随后添加了一个区域。应用程序不会检查该区域，因为不存在任何东西（在旧数据中）。如果您收集所有可能的区域，即使该区域不存在消息，它也可以工作。这显然只适用于预定义的区域。
2.  有关更多信息，请参阅[WWDC 2011 视频](https://developer.apple.com/videos/wwdc/2011/)[Session 500](https://developer.apple.com/videos/wwdc/2011/?id=500)从 17 分钟开始。
3.  不，自 iOS5 以来它也在使用 WiFi（参见视频）。
4.  绝对如果你已经知道这些地区然后使用它们。你可以例如。为应用程序提供一系列区域（每 5 分钟左右下载一次），并且仅在用户点击该区域时才下载数据。请记住，您当前所在的区域不会收到通知。确保定期更新当前区域的数据（如果是消息相关区域）
5.  是的，它会在后台或完全关闭时启动您的应用程序。
6.  即使它们不在该区域，您也可以下载所有消息。并且仅在用户点击该区域时才显示/弹出。但这只有在消息数据不多的情况下才有可能。例如，如果您计划对所有人使用相同的消息（例如，“看看这座美丽的建筑”），那么从全世界下载所有数据就太过分了。
7.  抱歉不知道。我想它就像创建日历事件一样，但我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T19:37:20.670

对于#3：

我已经在 WiFi 关闭的情况下测试了 Android 4.3 地理围栏，发现它工作正常！

有新增的硬件地理围栏和 Wi-Fi 仅扫描模式可以提供帮助。

参考：http: [//developer.android.com/about/versions/jelly-bean.html#43-optimized-location](http://developer.android.com/about/versions/jelly-bean.html#43-optimized-location)

# mysql - 选择 * 和查询优化器

> ID：11587780
> 
> 赞同：5
> 
> 时间：2012-07-20T22:33:13.123
> 
> 标签：mysql, database, select, optimization

我有一个非常简单的 MySQL 表，有一些非常奇怪的行为。顺便说一句，奇怪的行为正是我想要它做的，但我不想把它投入生产，不知道它为什么要这样做。

无论如何，我有一个像这样创建的表：

```
Create table `raceTimes` (
    `userID` mediumint(8) unsigned,
    `time` time,
    primary key (`userID`),
    key `idx_time` (`time`)
) engine=InnoDB default charset=utf8; 
```

现在，当我从 raceTimes 查询中执行 Select * 时，我得到如下结果集：

```
mysql> Select * from raceTimes;
+--------+----------+
| userID | time     |
+--------+----------+
|     14 | 12:37:46 |
|      6 | 12:41:11 |
|      5 | 12:48:45 |
|     13 | 12:55:46 |
|     10 | 13:13:37 |
|      9 | 13:40:37 |
|     17 | 15:30:44 |
|     18 | 15:46:58 |
|      3 | 16:16:45 |
|      8 | 16:40:11 |
|      7 | 16:41:11 |
|      4 | 16:48:45 |
|     16 | 20:30:44 |
|     15 | 20:37:44 |
|      1 | 21:00:00 |
|      2 | 21:16:00 |
|     11 | 23:13:37 |
|     20 | 23:14:58 |
|     19 | 23:46:58 |
|     12 | 23:55:46 |
+--------+----------+ 
```

请注意，结果集是基于时间的顺序，从最低到最高。好的，这正是我想要表格做的，因为我试图将它用于游戏中的排行榜。当我对我的查询运行解释时，我得到了这个：

```
mysql> explain select * from raceTimes;
+----+-------------+------------+-------+---------------+----------+---------+------+------+-------------+
| id | select_type | table      | type  | possible_keys | key      | key_len | ref  | rows | Extra       |
+----+-------------+------------+-------+---------------+----------+---------+------+------+-------------+
|  1 | SIMPLE      | raceTimes  | index | NULL          | idx_time | 4       | NULL |   20 | Using index |
+----+-------------+------------+-------+---------------+----------+---------+------+------+-------------+ 
```

到目前为止一切都很好。由于 idx_time 索引被排序（因为索引是），我得到了一个排序的结果集，为此我正在访问一个索引。现在是奇怪的行为。

根据我的阅读，主键默认是索引的，并且应该是查询表时最快的索引。然而它没有被使用。我对此的猜测是 idx_time 索引小于主键索引，因为它是时间类型而不是 mediumint(8) 类型。但这只是一个猜测。

现在，如果我创建一个与上面创建的表相同的表，但省略主键，如下所示：

```
Create table `raceTimes2` (
    `userID` mediumint(8) unsigned,
    `time` time,
    key `idx_time` (`time`)
) engine=InnoDB default charset=utf8; 
```

那么结果集不会在这个时间列上排序。即使我告诉它在我的查询中专门使用 idx_time 索引，这种行为仍然存在。另外，如果我对查询进行解释，我会得到：

```
mysql> explain select * from testTable6 use index(`idx_time`);
+----+-------------+------------+------+---------------+------+---------+------+------+-------+
| id | select_type | table      | type | possible_keys | key  | key_len | ref  | rows | Extra |
+----+-------------+------------+------+---------------+------+---------+------+------+-------+
|  1 | SIMPLE      | raceTimes2 | ALL  | NULL          | NULL | NULL    | NULL |   20 |       |
+----+-------------+------------+------+---------------+------+---------+------+------+-------+ 
```

所以我试图找出幕后发生的事情。为什么看起来如果我有一个主键和另一个索引，我可以得到一个在索引上排序的结果集，甚至不需要尝试，为什么查询优化器使用另一个索引而不是主键索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:55:37.243

正如 Gordon 所说，您不应该依赖结果集的自然顺序。您获得结果的原因如下：

在第一种情况下，MySQL 只使用`idx_time`索引执行查询，而不打开实际的表。当您使用的所有列都在索引中时，这是可能的（InnoDB 表的主键始终附加到每个索引的末尾，因此您的索引实际上是（`time`, `userID`）在幕后）。结果按时间排序，因为这是`time`索引中的实际顺序。

在第二种情况下，该列`userID`不是任何索引的一部分，MySQL 必须进行常规表扫描才能获取结果。在这种情况下， “使用索引（`idx_time`）”什么也不做，因为没有使用该`time`列的 WHERE 子句。

编辑：
它仅在有选择时适用，但如果无法使用 `USE INDEX`MySQL中指定的索引，**则不会使用**该表上的任何索引进行搜索（WHERE/ON 子句），并将读取整个表。所以在使用索引提示时应该非常小心。
type='index' 的行`explain`也意味着将读取表中的所有行，并且几乎与 type='ALL' 一样糟糕。

您应该查看有关[索引提示](http://dev.mysql.com/doc/refman/5.0/en/index-hints.html)的 MySQL 手册并[解释输出](http://dev.mysql.com/doc/refman/5.0/en/explain-output.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T22:40:07.363

除非在查询中包含“order by”语句，否则不应依赖结果集的顺序！SQL 明确不保证顺序。不要从一个小例子概括到一张大桌子上会发生什么。

如果要对结果集进行排序，则包括：

```
order by time desc 
```

这是您可以依赖排序的唯一方法。

例如，您可能正在执行全表扫描并且页面缓存中已经有一些页面。这些 - 以随机顺序 - 可以首先阅读。或者，您可以让多个“主轴”（这是 SQL Server 术语）读取表，以任意顺序返回结果。

# python - 在 pandas for python 中创建虚拟变量

> ID：11587782
> 
> 赞同：45
> 
> 时间：2012-07-20T22:33:29.350
> 
> 标签：python, pandas

我正在尝试使用 python 中的 pandas 从分类变量创建一系列虚拟变量。我遇到过这个`get_dummies`函数，但是每当我尝试调用它时，我都会收到一个错误，即名称未定义。

任何创建虚拟变量的想法或其他方法将不胜感激。

**编辑**：由于其他人似乎遇到了这个问题，`get_dummies`熊猫中的功能现在可以正常工作了。这意味着以下应该有效：

```
import pandas as pd

dummies = pd.get_dummies(df['Category']) 
```

有关详细信息，请参阅[http://blog.yhathq.com/posts/logistic-regression-and-python.html](http://blog.yhathq.com/posts/logistic-regression-and-python.html)。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-05-29T03:26:56.530

当我想到虚拟变量时，我想到在 OLS 回归的上下文中使用它们，我会做这样的事情：

```
import numpy as np
import pandas as pd
import statsmodels.api as sm

my_data = np.array([[5, 'a', 1],
                    [3, 'b', 3],
                    [1, 'b', 2],
                    [3, 'a', 1],
                    [4, 'b', 2],
                    [7, 'c', 1],
                    [7, 'c', 1]])                

df = pd.DataFrame(data=my_data, columns=['y', 'dummy', 'x'])
just_dummies = pd.get_dummies(df['dummy'])

step_1 = pd.concat([df, just_dummies], axis=1)      
step_1.drop(['dummy', 'c'], inplace=True, axis=1)
# to run the regression we want to get rid of the strings 'a', 'b', 'c' (obviously)
# and we want to get rid of one dummy variable to avoid the dummy variable trap
# arbitrarily chose "c", coefficients on "a" an "b" would show effect of "a" and "b"
# relative to "c"
step_1 = step_1.applymap(np.int) 

result = sm.OLS(step_1['y'], sm.add_constant(step_1[['x', 'a', 'b']])).fit()
print result.summary() 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-21T02:29:57.203

很难从这个问题中推断出你在寻找什么，但我最好的猜测如下。

如果我们假设您有一个 DataFrame，其中某些列是“类别”并且包含类别的整数（或其他唯一标识符），那么我们可以执行以下操作。

调用 DataFrame `dfrm`，并假设对于每一行，`dfrm['Category']`是从 1 到 N 的整数集中的某个值。然后，

```
for elem in dfrm['Category'].unique():
    dfrm[str(elem)] = dfrm['Category'] == elem 
```

现在，每个类别都会有一个新的指标列，根据该行中的数据是否属于该类别，该列是真/假。

如果要控制类别名称，可以制作字典，例如

```
cat_names = {1:'Some_Treatment', 2:'Full_Treatment', 3:'Control'}
for elem in dfrm['Category'].unique():
    dfrm[cat_names[elem]] = dfrm['Category'] == elem 
```

导致具有指定名称的列，而不仅仅是类别值的字符串转换。事实上，对于某些类型，`str()`可能不会产生任何对你有用的东西。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-12-24T21:07:15.503

根据[官方文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html)：

```
dummies = pd.get_dummies(df['Category']).rename(columns=lambda x: 'Category_' + str(x))
df = pd.concat([df, dummies], axis=1)
df = df.drop(['Category'], inplace=True, axis=1) 
```

FastML 博客中也有一篇不错[的文章](http://fastml.com/converting-categorical-data-into-numbers-with-pandas-and-scikit-learn/)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-14T18:17:59.953

以下代码返回将“类别”列替换为分类列的数据框：

```
df_with_dummies = pd.get_dummies(df, prefix='Category_', columns=['Category']) 
```

[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-23T18:06:15.163

就我而言，`dmatrices`解决`patsy`了我的问题。实际上，此函数旨在使用 R 样式的公式字符串从给定的 DataFrame 生成因变量和自变量。但它可以用于从分类特征生成虚拟特征。您需要做的就是删除`dmatrices`自动生成的“拦截”列，而不管您的原始数据帧如何。

```
import pandas as pd
from patsy import dmatrices

df_original = pd.DataFrame({
   'A': ['red', 'green', 'red', 'green'],
   'B': ['car', 'car', 'truck', 'truck'],
   'C': [10,11,12,13],
   'D': ['alice', 'bob', 'charlie', 'alice']},
   index=[0, 1, 2, 3])

_, df_dummyfied = dmatrices('A ~ A + B + C + D', data=df_original, return_type='dataframe')
df_dummyfied = df_dummyfied.drop('Intercept', axis=1)

df_dummyfied.columns    
Index([u'A[T.red]', u'B[T.truck]', u'D[T.bob]', u'D[T.charlie]', u'C'], dtype='object')

df_dummyfied
   A[T.red]  B[T.truck]  D[T.bob]  D[T.charlie]     C
0       1.0         0.0       0.0           0.0  10.0
1       0.0         0.0       1.0           0.0  11.0
2       1.0         1.0       0.0           1.0  12.0
3       0.0         1.0       0.0           0.0  13.0 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-21T23:28:03.220

您可以创建虚拟变量来处理分类数据

```
# Creating dummy variables for categorical datatypes
trainDfDummies = pd.get_dummies(trainDf, columns=['Col1', 'Col2', 'Col3', 'Col4']) 
```

这将删除 trainDf 中的原始列，并在**trainDfDummies**数据帧的末尾附加带有虚拟变量的**列**。

**它通过在原始列名的末尾附加值来自动创建列名。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-23T06:56:25.367

如果您使用 NumPy 和 Pandas*的分类变量非常少*，这是一种非常简单的方法**，无需使用 get_dummies 。**

 *> 让，我有一个名为 <"State"> 的列，它有 3 个分类变量 <'New York'>、<'California'> 和 <'Florida'>，我们想分别分配 0 和 1。

我们可以用下面的简单代码来做到这一点。

```
import numpy as np
import pandas as pd

dataset['NewYork_State'] = np.where(dataset['State']=='New York', 1, 0)
dataset['California_State'] = np.where(dataset['State']=='California', 1, 0)
dataset['Florida_State'] = np.where(dataset['State']=='Florida', 1, 0) 
```

> 上面我们创建了三个新列来存储值“NewYork_State”、“California_State”、“Florida_State”。

`Drop the original column`

```
dataset.drop(columns=['State'],axis=1,inplace=True) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-25T00:12:39.350

所以我今天（2013 年 7 月 25 日）实际上需要这个问题的答案，所以我早些时候写了这个。我已经用一些玩具示例对其进行了测试，希望你能从中获得一些好处

```
def categorize_dict(x, y=0):
    # x Requires string or numerical input
    # y is a boolean that specifices whether to return category names along with the dict.
    # default is no
    cats = list(set(x))
    n = len(cats)
    m = len(x)
    outs = {}
    for i in cats:
        outs[i] = [0]*m
    for i in range(len(x)):
        outs[x[i]][i] = 1
    if y:
        return outs,cats
    return outs 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-20T05:51:26.903

我使用此代码为每个状态创建了一个虚拟变量。

```
def create_dummy_column(series, f):
    return series.apply(f)

for el in df.area_title.unique():
    col_name = el.split()[0] + "_dummy"
    f = lambda x: int(x==el)
    df[col_name] = create_dummy_column(df.area_title, f)
df.head() 
```

更一般地说，我只会使用 .apply 并将其传递给一个匿名函数，该函数具有定义您的类别的不等式。

（感谢@prpl.mnky.dshwshr 的 .unique() 见解）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-05T07:38:17.503

处理分类特征 scikit-learn 期望所有特征都是数字的。那么我们如何在模型中包含分类特征呢？

有序类别：将它们转换为合理的数值（例如：small=1，medium=2，large=3） 无序类别：使用虚拟编码（0/1） 我们数据集中的分类特征是什么？

有序类别：天气（已经用合理的数值编码） 无序类别：季节（需要虚拟编码）、假期（已经虚拟编码）、工作日（已经虚拟编码） 对于季节，我们不能简单地将编码保留为 1 = spring , 2 = 夏季，3 = 秋季，4 = 冬季，因为这意味着一个有序的关系。相反，我们创建了多个虚拟变量：

```
# An utility function to create dummy variable
`def create_dummies( df, colname ):
col_dummies = pd.get_dummies(df[colname], prefix=colname)
col_dummies.drop(col_dummies.columns[0], axis=1, inplace=True)
df = pd.concat([df, col_dummies], axis=1)
df.drop( colname, axis = 1, inplace = True )
return df` 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-06T12:55:11.880

一种基于具有类别值的列创建虚拟对象的简单而可靠的方法：

```
for category in list(df['category_column'].unique()):
    df[category] = lis(map(lambda x: 1 if x==category else 0, df['category_column'])) 
```

但是在进行一些 OLS 回归时要小心，因为您需要排除其中一个类别，这样您就不会陷入虚拟陷阱变量*

# cakephp - CakePHP：验证用户是否超过 13 年

> ID：11587784
> 
> 赞同：2
> 
> 时间：2012-07-20T22:33:44.437
> 
> 标签：cakephp

我的模型中有以下验证规则：

```
'dob' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Date of Birth is required'
            ),
            'age' => array(
                'rule' => array('comparison', '>=', 13),
                'message' => 'You must be over 13 years old'
            )
        ) 
```

我想要实现的是验证用户是否超过 13 岁......

日期是这样创建的：

```
<?php echo $this->Form->input('Profile.dob', array('label' => 'Date of Birth'
                                        , 'dateFormat' => 'DMY'
                                        , 'minYear' => date('Y') - 110
                                        , 'maxYear' => date('Y') - 13)); ?> 
```

我该怎么做呢？由于保存的数据是日期而不是整数，所以我的比较不起作用......在这里寻找最简单的解决方案而不回复插件或其他外部资产，如果可能的话，只需一些简单的代码。

谢谢。

编辑：所以根据下面的评论，我添加了：

```
public function checkDOB($check) {
        return strtotime($check['dob']) < strtotime();
    } 
```

但是我应该在 strtotime 中输入什么来检查年龄是否高于或等于 13？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:58:10.067

在您的模型中创建自定义验证规则：

```
public function checkOver13($check) {
  $bday = strtotime($check['dob']);
  if (time() < strtotime('+13 years', $bday)) return false;
  return true;
} 
```

这使用了[strtotime](http://php.net/manual/function.strtotime.php)的一个简洁功能，可以让您轻松地在特定日期进行日期计算。

要使用规则：

```
'dob' => array(
  'age' => array(
    'rule' => 'checkOver13',
    'message' => 'You must be over 13 years old'
  )
) 
```

# java - Android - 在全班使用和更改数组

> ID：11587786
> 
> 赞同：0
> 
> 时间：2012-07-20T22:33:49.267
> 
> 标签：java, android, arrays

我试图解决这个问题大约 2 个小时。所以我很高兴每一个可能的答案。我有一个自定义的 ListViewAdapter，它从一个数组中获取他的内容。但是我有 19 个数组，我想根据用户单击的日期更改内容（因此数组）（顶部有一个日历，上面有 19 个日期）。这是一张图片：

![在此处输入图像描述](../Images/a7f273e5cdb9ce897b67c05667a86810.png)

因此，默认情况下，您打开应用程序时，将显示“date_1”数组中的内容（对于日历中的 25.）。当您单击其他日期时，将显示数组中属于该日期的内容（例如 26\. -> date_2、27\. date_3 等）。每个数组都必须从资源中获取负载并保存在单个数组变量中。

**所以我的问题是：** 我无法更改数组。这是我的代码：

```
// this is the Array Variable:

   String[] day_chosen;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.calender);
          [...]
            prepareArrayLits();
            lview3 = (ListView) findViewById(R.id.listView1);

            adapter = new ListViewCustomAdapter(this, itemList);
            lview3.setAdapter(adapter);

            lview3.setOnItemClickListener(this);

        }

        public void onItemClick1(AdapterView<?> arg0, View arg1, int position, long id) {
            // TODO Auto-generated method stub

        }

        /* Method used to prepare the ArrayList,
         */

        public void prepareArrayLits()
        {
            // this is where the Arrays get loaded from the resource:
             day_chosen = getResources().getStringArray(R.array.date_1);

//this Array is not relvant:
            String[] sports = getResources().getStringArray(R.array.sports_array);

            itemList = new ArrayList<Object>();
             for (int counter = 0; counter < day_chosen.length; counter+=4){

                 int Intparser = Integer.parseInt(day_chosen[counter+1]);

                 AddObjectToList(imgid(Intparser),  sports[Intparser],day_chosen[counter],day_chosen[counter+3], backgroundbox(Intparser)) ;
             }

        }

        // Add one item into the Array List
        public void AddObjectToList(int image, String title, String desc, String time, int backbox)
        {

            bean = new ItemBean();
            bean.setBackBox(backbox);
            bean.setTime(time);
            bean.setDescription(desc);
            bean.setImage(image);
            bean.setTitle(title);
            itemList.add(bean);
        }

       [...]
        }

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // TODO Auto-generated method stub

        }

// the onClick Events for every date:
        public void onClick(View v) {
            // TODO Auto-generated method stub

              switch(v.getId()){

              case R.id.d_1 :
// I tried to change the Array from here(But it didn't work):
                  day_chosen = getResources().getStringArray(R.array.date_1);

                  break;

              case R.id.d_2 :
                  day_chosen = getResources().getStringArray(R.array.date_2);

                  break;
              [...]

        }

    } 
```

**我尝试了什么：**

*   我设置了一个全局类，但它不起作用

*   我试图设置 getter 和 setter。但也没有工作

我不知道如何解决这个问题。感谢所有可能的解决方案，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:44:59.503

所以我猜当你点击顶部的日期时，下面的内容会发生变化。有多种方法可以做到这一点。为了解决当前代码中的当前问题，您需要执行以下操作：根据您显示的代码，我假设您在某处有一行代码，如下所示：`new MyHappyAdapter(... itemList, ...)`您正在传递的位置itemList 参考，可能是某种`ArrayAdapter`. 如果是这样，您将要在您的 switch 语句之后添加它：

```
 public void onClick(View v) {
     switch(v.getId()){

          case R.id.d_1 :
              // I tried to change the Array from here(But it didn't work):
              day_chosen = getResources().getStringArray(R.array.date_1);
              break;

          case R.id.d_2 :
              day_chosen = getResources().getStringArray(R.array.date_2);
              break;
     }
 //Remove the old items from the list
 itemList.clear();
 //Force it setup the list again
 prepareArrayLits();
 //Tell the adapter to update the view
 adapter.notifyDatasetChanged();
 } 
```

该`adapter.notifyDatasetChanged()`调用告诉适配器刷新`ListView`.

作为旁注，我实际上不建议您继续沿着这条路走下去。我建议你把它变成 a `ViewPager`，其中每个日期都是 a `Tab`，下面的内容是 a `ListFragment`。[您可以在此处](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)阅读有关`ViewPager`和支持 jar 的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:44:19.587

我不知道您究竟是如何实现您的适配器的，但是`yourAdapter.notifyDataSetChanged()`当您的列表内容发生更改时您是否调用过？

# variables - Makefile变量赋值：'include'不允许作为变量？

> ID：11587792
> 
> 赞同：0
> 
> 时间：2012-07-20T22:34:29.703
> 
> 标签：variables, include, makefile

在我的 Fedora15 机器上，我可以这样编写 Makefile：

```
app  = MyApplication
deps = `pkg-config ...` 
```

效果很好。然而，每当我尝试在 Debian 机器上执行这样的 Makefile 时，我显然会因为 '=' 周围的空格而出现错误。所以像这样重写它们：

```
app=MyApplication
deps=`pkg-config ...` 
```

修复它。现在我的问题是，这种不兼容是如何引起的？我的 Fedora 版本是 3.82，而我的 Debian 版本是 3.81。搜索 make 的变更日志也没有发现任何使这成为可能的更改..

**编辑：**

我似乎找到了这种奇怪行为的原因：在我的大多数 makefile 中，我通常使用变量“include”来保存所有 pkg​​-config 输出。现在显然 'include' 是某种关键字，当在 Debian 上**不这样使用时**

```
include="stuff" 
```

触发宏，寻找路径什么的。如果我如上所示使用它，我可以将它用作普通变量。但现在有趣的是：我**总是**可以在 Fedora 上使用 'include' 作为变量名！因此像这样的行：

```
include = `pkg-config --blah` 
```

在 Fedora 下完美运行，但在 Debian 下总是失败，吐出“Makefile：2：=：没有这样的文件或目录”的行（它显然将 '=' 和其他所有内容都视为路径）

现在我的问题仍然存在，但是为什么我可以在 Fedora 上做这样的事情（为什么 'include 宏似乎没有在那里定义）而不是在 Debian 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:34:16.847

> 现在我的问题仍然存在，但是为什么我可以在 Fedora 上做这样的事情（为什么 'include 宏似乎没有在那里定义）而不是在 Debian 上？

不同的行为不是由 Linux 发行版的差异引起的，而是由`make`这些发行版中的版本差异引起的。如果在`include`、 before `=`（或任何其他赋值风格）之后有空格，`3.81`则会错误地将其解析为`include`指令。

其他指令也是如此，例如`vpath`. 在中，如果在 之前有空格，则无法`3.81`为名为的变量赋值，则不会定义该变量。在，这是固定的——如果你想这样称呼它:-)无论如何我宁愿抱怨这些变量名。`vpath``=``vpath``3.82``make`

# azure-table-storage - 可以从网站访问 Azure 表吗

> ID：11587795
> 
> 赞同：1
> 
> 时间：2012-07-20T22:34:45.010
> 
> 标签：azure-table-storage, azure-web-app-service

我从部署到 Azure 的 web-api MVC 网站遇到错误 500。WebApi 控制器访问 Azure 表存储，它在本地工作（本地网站与我的 Azure 表一起工作）。

解决问题 我使用“链接资源”页面将网站链接到存储，但注意到以下内容：“Windows Azure 管理门户的客户预览版不支持将存储帐户链接到网站或云服务”尽管此消息显示状态为“已链接”。

是否可以在 Azure 的这个阶段从网站访问表？

注意：是VS2010和.net4

要求的代码：

```
 public static TableServiceContext GetContext()
    {
        CloudStorageAccount storageAccount = CloudStorageAccount.Parse("DefaultEndpointsProtocol=https;AccountName=AccountName;AccountKey=@cc0untKey==");

        CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

        var context = tableClient.GetDataServiceContext();
        сontext.IgnoreResourceNotFoundException = true;
        return context;
    }

    public IEnumerable<Destination> GetAllDestinations()
    {
        try
        {
            return TableProvider.GetContext()
                       .CreateQuery<Destination>(Model.Consts.DestinationTableName);
        }
        catch (Exception e)
        {
            return new Destination[1]
            {
                new Destination()
                {
                    CountryName = e.Message
                }
            };
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:50:31.137

项目以错误的方式创建。当您想使用 web api 创建网站时，您应该选择**Web -> MVC 4**而不是 Cloud -> MVC 4 Web 角色。错误地我做了第二个然后发布了网站而不是网络角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:42:39.367

是的。存储服务不知道也不关心您的代码在哪里运行。

我不知道“链接”在新门户中做了什么，但我认为它只是一个管理 UI 抽象。我认为它对正在运行的代码没有任何影响。（*也许*它设置了亲和力组？）

# c# - 为什么这两个简单语句的反汇编略有不同？

> ID：11587800
> 
> 赞同：1
> 
> 时间：2012-07-20T22:35:27.847
> 
> 标签：c#, assembly

我写了两个简单的程序，它们将相同的整数值存储到两个不同的变量中，我想知道为什么两个程序之间的反汇编略有不同。

第一个程序：

```
int y;
int x = (y = 2); 
```

拆卸：

```
0000003a  mov         dword ptr [ebp-40h],2 
00000041  mov         eax,dword ptr [ebp-40h] 
00000044  mov         dword ptr [ebp-44h],eax 
```

第二个程序：

```
int x = 2, y = 2; 
```

拆卸：

```
0000003a  mov         dword ptr [ebp-40h],2 
00000041  mov         dword ptr [ebp-44h],2 
```

第一个程序中的第二行，显然是唯一的变化，只是将指向的值复制`[ebp-40h]`到`eax`注册表中，对吗？也许这是一个愚蠢的问题，但为什么这些略有不同？至少可以说，我对汇编不是很熟悉，所以我认为您必须在指向它之前将值移动到注册表中？（或第三行做什么。我认为它指向......）

为了可读性，我打算永远不要像在第一个程序中那样在严肃的代码中实例化变量。

### 编辑

根据评论中的讨论，我编译了这两个片段的发布版本，而不是我之前使用的调试版本。结果几乎相同：

第一个程序：

```
00000000  push        ebp 
00000001  mov         ebp,esp 
00000003  push        eax 
00000004  mov         dword ptr [ebp-4],ecx 
00000007  cmp         dword ptr ds:[005E14B4h],0 
0000000e  je          00000015 
00000010  call        6C37403F 
00000015  nop 
00000016  mov         esp,ebp 
00000018  pop         ebp 
00000019  ret 
```

第二个程序：

```
00000000  push        ebp 
00000001  mov         ebp,esp 
00000003  push        eax 
00000004  mov         dword ptr [ebp-4],ecx 
00000007  cmp         dword ptr ds:[005514B4h],0 
0000000e  je          00000015 
00000010  call        6C42403F 
00000015  nop 
00000016  mov         esp,ebp 
00000018  pop         ebp 
00000019  ret 
```

看起来差异仅在于内存地址（即不是真正的差异）。无论如何，我认为这是正确的解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:39:47.800

您的第一个示例被重写为：

```
y = 2;
x = y; 
```

因为

```
(y = 2) 
```

“评估”到

```
y 
```

分配后`y`。

这与反汇编 1:1 匹配。

旁注：您可以使用属性看到相同的效果：

```
Button b;
b.Width = b.Height = 100; //inefficient! 
```

# android - android：Kill 和 Activity onClick

> ID：11587801
> 
> 赞同：0
> 
> 时间：2012-07-20T22:35:43.340
> 
> 标签：android, onclick, android-activity, destroy

在我的 android 应用程序中，我正在使用 Intent 启动一个活动。此活动使用具有关闭 ImageButton 的不同布局。我想设置 onClick 事件以关闭此活动并返回上一个活动。我正在使用 finish() 方法来实现这一点，但是当我单击关闭图像按钮时没有任何反应。

以下是我正在使用的代码：

启动活动：

```
public void stOn(){
    Button sb = (Button)findViewById(R.id.sb);
    sb.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v){
            Intent scIntent = new Intent(MainActivity.this, St.class);
            MainActivity.this.startActivity(scIntent);
        }
    });
} 
```

并销毁活动：

```
public void stOff(){
    ImageButton pw = (ImageButton)findViewById(R.id.pw);
    pw.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v){
            finish(); // Finish Current Activity
        }
    });
} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:03:50.413

正如黑泽浩之在评论中所说，您的函数`stOff()`可能没有被调用。

这可能是您已经做过的事情，但更一般地说，在 Android 中，我们使用将所有界面元素（`Button`、`ImageButton`、`EditText`、 ...）声明为 Activity 的字段以及函数内的应用`findViewById()`和函数。`setOnClickListener(...)``onCreate(Bundle savedInstanceState)`

# svn - 有没有办法让 TortoiseSVN 保持原样离开 EOL（行尾）？

> ID：11587806
> 
> 赞同：22
> 
> 时间：2012-07-20T22:36:08.750
> 
> 标签：svn, tortoisesvn, newline, eol, lf

我正在检查具有 Linux 风格行结尾的文件（只是 LF 字符）。当我在 Windows 中使用 TortoiseSVN 签出文件时，它会将行尾转换为 Windows 样式 (CR+LF)。我尝试将这些行添加到 subversion 配置文件以强制它使用 LF，是的，我确实设置了 enable-auto-props = yes。这不起作用，即使它起作用，也不是我想要的，因为我宁愿让 TSVN 根本不接触文件。照原样复制它们。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-22T14:19:50.807

正如其他人指出的那样，您需要设置`svn:eol-style`属性。此属性可以具有三个值：

*   `LF`：结帐和提交时自动将行尾设置为 Unix 行尾。
*   `CRLF`：在结帐和提交时自动将行尾设置为 Windows 行尾。
*   `native`：这将在提交到 Unix 行尾 ( `LF`) 时存储行尾，但将使用`LF`或`CRLF`基于客户端检查行尾。

您可以`auto-props`在 $HOME/.subversion/config 文件中设置设置以自动将此属性附加到所有新文件。但是，这是每个用户必须在其 Subversion 客户端中设置的内容。要强制设置此属性，您可以使用我的[预提交挂钩](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)，如果您指定的文件没有您指定的属性设置为正确的值，它将拒绝提交。

这是一个粗鲁的大棒，因为它不会纠正问题，但在一两次提交失败后，开发人员会迅速设置他们的自动道具以自动添加所需的属性。

* * *

对于 Windows 上的 TortoiseSVN，在您的用户名/AppData（隐藏文件夹）下找到配置文件。例如

> %appdata%\roaming\subversion\config

添加这些行（可能已经存在，但已注释掉），然后注销/登录：

```
enable-auto-props = yes
# Add these for each text file type that you use:
*.txt = svn:eol-style=native
*.cs = svn:eol-style=native
*.xml = svn:eol-style=native 
```

（示例是带有 XML 的 C#；替换为您使用的任何文本文件。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T09:36:12.250

您应该设置*svn:eol-style*属性。

[http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html)

[http://svnbook.red-bean.com/en/1.7/svn.advanced.props.file-portability.html#svn.advanced.props.special.eol-style](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.file-portability.html#svn.advanced.props.special.eol-style)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T11:03:25.640

auto-props 配置设置仅适用于*新*文件，不适用于现有文件。对于那些你必须`svn:eol-style`为每个文件设置属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-02T14:55:41.727

从 Tortoise SVN 版本 1.12.0、Build 28568、2019/04/16 开始，您可以将 AS-IS EOL 属性分配给整个文件夹。

选择工作区：右键单击：TortoiseSVN ->：属性

选择新：EOL

按原样选择（无特定 EOL）

# function - Matlab中带有参数的ButtonDownFcn

> ID：11587811
> 
> 赞同：0
> 
> 时间：2012-07-20T22:36:32.713
> 
> 标签：function, matlab, user-interface, event-handling, callback

我有一个包含在下面的补丁，我想在补丁中添加一个额外的 ButtonDownFcn。当我执行第二个选项时，代码不起作用，我得到了许多输出参数。

原始补丁

```
for i = 1:10
    counter = counter+1;
    hpatch(counter) = patch([x(17) x(18) x(1) x(1)],[y(17) y(18) y(1) y(1)],[0 0 0 0],...
    'Parent',hAx,'ButtonDownFcn', ['winopen(''' file(counter) ''');']));
end 
```

新的所需补丁

```
for i = 1:10
    counter = counter+1;
    hpatch(counter) = patch([x(17) x(18) x(1) x(1)],[y(17) y(18) y(1) y(1)],[0 0 0 0],...
    'Parent',hAx,'ButtonDownFcn', ['winopen(''' file(counter) ''');'],...
    'ButtonDownFcn', @saveClickData(counter));
end 
```

这是功能

```
saveClickData(counter) 
```

应该是这样吗？：

```
saveClickData(source,event) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:21:32.923

尝试：

```
patch(X,Y,Z, 'ButtonDownFcn',{@saveClickData, counter}) 
```

然后定义回调函数为：

```
function saveClickData(src,evt,counter)
    winopen( file(counter) );

    %# do additional stuff..
end 
```

确保将此函数定义为**嵌套函数**，以便它可以访问其父函数工作区，包括`file`变量。

# iphone - ARC 与非 ARC removeLastObject 方法

> ID：11587813
> 
> 赞同：0
> 
> 时间：2012-07-20T22:36:54.103
> 
> 标签：iphone, objective-c, automatic-ref-counting

我正在尝试从 iTunes U iPhone 编程讲座中学习。

关于以下方法代码，我有一个问题：

```
+(double) popOperandOffStack:(NSMutableArray *) stack{
    double result = 0;

    id topOfStack = [stack lastObject];
    if (topOfStack) [stack removeLastObject];

    if ([topOfStack isKindOfClass:[NSNumber class]]){
        result = [topOfStack doubleValue];
    }
    else if ([topOfStack isKindOfClass:[NSString class]]){

        if ([topOfStack isEqualToString:@"+"]){
            result = [self popOperandOffStack:stack] + [self popOperandOffStack:stack];
        }

        if ([topOfStack isEqualToString:@"-"]){
            result = [self popOperandOffStack:stack] - [self popOperandOffStack:stack];
        }

        if ([topOfStack isEqualToString:@"*"]){
            result = [self popOperandOffStack:stack] * [self popOperandOffStack:stack];
        }

        if ([topOfStack isEqualToString:@"/"]){
            result = [self popOperandOffStack:stack] / [self popOperandOffStack:stack];
        }

    }

    return result;
} 
```

即使已经调用了 removeLastObject，topOfStack 如何仍然可以访问。过去，removeLastObject 会向被移除的对象发送一个释放，那么 topOfStack 怎么仍然有效呢？我猜这与ARC有关，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:42:31.070

默认情况下，所有变量在 ARC 下都具有强引用。虽然堆栈可能会丢失对最后一个对象的引用，但变量 topOfStack 仍然引用它，因此 topOfStack 的值不会从内存中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:43:44.017

在 ARC 中，所有没有限定符的局部变量都被假定为`__strong`引用。这意味着`topOfStack`强烈引用`stack`. 因此，即使对象在被删除时被数组释放，它也会保留它。所以`topOfStack`将继续有效，直到它超出范围时 ARC 将自动释放它。

# php - 如何使用 GD Star Rathing 插件获取自定义字段图像

> ID：11587814
> 
> 赞同：0
> 
> 时间：2012-07-20T22:36:57.867
> 
> 标签：php, wordpress, plugins

我怎样才能从自定义字段中获取图像.. 以显示到 GD Star Rathing。

链接：[http](http://www.cinema.trancelevel.com) ://www.cinema.trancelevel.com - 来自 Actor 右侧的图像不显示 -1,2,3

例如：在侧边栏中我有这个代码，这个代码是通过 GD 明星 rathing Builder 构建的，以显示 3 个投票最多的帖子（演员）。

```
<?php wp_gdsr_render_rating_results(array(
'template_id' => 48, 
'rows' => 3, 
'select' => 'persoane', 
'hide_empty' => true, 
'min_votes' => 0, 
'min_count' => 5, 
'image_from' => 'custom', 
'image_custom' => 'img_actor', 
'image_resize_x' => 55, 
'image_resize_y' => 70, 
'rating_size' => '16', 
'rating_thumb_size' => '16'
));?> 
```

我怎样才能检索图片，我只检索图像 ID...我想要图片的附件链接...

# php - 上传时尝试重命名文件，但它不起作用

> ID：11587815
> 
> 赞同：0
> 
> 时间：2012-07-20T22:37:09.257
> 
> 标签：php, file, upload, renaming

嘿，我正在尝试在上传时更改文件名（如果存在），但似乎我有问题。这是代码..

```
$tempfilename = $filename["name"]; 
while(file_exists($location . $tempfilename))
{
    $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"; 
    $shuffled = str_shuffle($chars);
    $stringa = substr($shuffled,0,7);
    move_uploaded_file($filename["tmp_name"], $location . $filename["name"]);
    $tempfilename = $stringA.$filename["name"];
}
move_uploaded_file($filename["tmp_name"], $location.$stringa.$filename["name"]);
clearstatcache(); 
```

这似乎不起作用

不知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:44:37.163

PHP 变量名区分大小写。

```
$stringA !== $stringa 
```

但是，您是否考虑过只使用一个计数器，而不是所有的混乱字符串等？

```
$tempfilename = $filename["name"];
for ($i = 0; file_exists($location . $tempfilename); $i++) {
    $tempfilename = $i . $filename["name"];
}
move_uploaded_file($filename["tmp_name"], $location . $tempfilename); 
```

# c++ - 在字符串向量中查找部分字符串

> ID：11587817
> 
> 赞同：0
> 
> 时间：2012-07-20T22:37:45.460
> 
> 标签：c++

我有一个学生向量，每个元素都包含 ID 和测试答案。

ABCTFTFTF（ABC = ID，TFTFTF = 答案）

我正在尝试仅检索 TFTFTF 块并将它们与包含正确答案字符串的字符串进行比较。

我理解它必须是：

*   学生[我]

*   创建子字符串（答案开始 = 位置 10，结束于位置 30）

*   比较子串

*   比较行动

但是我在语法上真的很挣扎，有人能指出我正确的方向吗？

*   **编辑**

试过：

```
void getResults()
{

    string found;

 for(int i = 0; i < 150; i++)
    {
        found = students[i].find(answers);
        if(found == answers)
        {
            cout << "Student: " << i << "Passed" << endl;
        }
        else
        {
            cout << "Student: " << i << "Failed" << endl;
        }
    }
} 
```

个人项目——不是家庭作业

我正在关注这个每日 C++ 项目线程：

[http://www.cplusplus.com/forum/beginner/75558/](http://www.cplusplus.com/forum/beginner/75558/)

模拟数据：

```
OMXIZGWA TTFTFTFFTFTTFFFTTFTF
XKVNYUVZ F FTFFFFFT TFFTTTFFF
GGVDSSTQ TFFFTF FTTF TF  TFFT
XPYDXVIQ FFTTFT FTFT TFFTTTFT
XVFUMFZL TTFFTFFTFFTFF FFTFFT 
```

（白色字符 = 没有给出答案）

*** 编辑答案**

```
void getResults()
{

    string found;
    string foundSubString;

    for(int i = 0; i < 150; i++)
    {
        found = students[i];

        foundSubString = found.substr (9,20);

        if(foundSubString == answers)
        {
            cout << "Student: " << i << "Passed" << endl;
        }
        else
        {
            cout << "Student: " << i << "Failed" << endl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:51:50.160

假设：

*   所有 ID 都是唯一的
*   每个 ID 都与一串答案相关联。

这听起来像是字典的工作。C++ STL 提供了一个方便的`std::map`.

```
std::string answerKey = "TTFFTF"
std::map<std::string, std::string> studentAnswers;

studentAnswers["student1"] = "TFTTTF"; 
studentAnswers["student2"] = "FFTFTF"; 

// more students.... 
```

现在您已经定义了数据，您可以定义一个比较函数。假设你想找出错误的数量，你可以这样定义一个原型：

```
int compareAnswer(const std::string& correctAnswer, const std::string& valiantAttempt); 
```

（*注意*：方便，这实际上正是 string.h 中的老式 C 函数`strcmp`所做的）

然后使用函数：

```
cout << "Student1 has " 
     << compareAnswer(answerKey, studentAnswers["student1"])
     << " errors" << endl; 
```

当然，您将使用`for`循环并可能从文件等中读取数据，但我希望这能让您朝着正确的方向前进。

# qt - 重置 QNetworkAccessManager 后端的方法

> ID：11587827
> 
> 赞同：4
> 
> 时间：2012-07-20T22:39:08.600
> 
> 标签：qt, ftp, qnetworkaccessmanager

如果 ftp 服务器需要身份验证，QNetworkAccessManager 似乎不会处理 ftp 检索到的丢失文件。

情况是这样的：我正在从需要用户名和密码的同一个 ftp 服务器下载多个文件。我成功下载了一些文件，然后为不存在的文件发送了 GET。该请求报告失败。然后，我为应该有效的文件发送 GET 请求。该请求永远不会发出完成的信号或错误。

Qt 4.7.4

请帮忙！这让我发疯了。我认为如果我能以某种方式重置 ftp 后端，这个问题可能是可以解决的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:26:25.247

您正在像这样连接`QNetworkReply`信号`finished()`：

```
QObject::connect(reply, SIGNAL(finished()), netty, SLOT(finished())); 
```

而是尝试这样的完成信号`QNetworkAccessManager`：

```
connect(&network, SIGNAL(finished(QNetworkReply *)), netty, SLOT(finished(QNetworkReply *))); 
```

请注意，您必须更改finished() 插槽的原型。

最后一种方法是设置一个调用如下函数的计时器：

```
void check(QNetworkReply *reply){
 if(reply != NULL){
   if(reply->isFinished())
     finished(reply);
   else
     reply->abort();
 }
} 
```

并注意这个错误：

[https://bugreports.qt-project.org/browse/QTBUG-3443](https://bugreports.qt-project.org/browse/QTBUG-3443)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T14:31:41.937

我在使用 Qt 5.3.0 时遇到了同样的情况（好吧，它仍然是测试版，但我坚信 Qt5.2.x 上会重现相同的错误）。

QNetworkAccessManager 正确报告 ftp 的 fileNotFound 错误，但永远不会从中恢复。任何后续 ftp 请求都会失败并显示相同的错误消息。

假设尝试获取 badFile.txt（不存在）。我们得到正确的消息，即未找到 badFile.txt。如果我们然后尝试访问 goodFile.txt （存在），我们会得到

```
Error while downloading ftp://ftp.url.com/goodFile.txt: 
Downloading file failed:
Can't open /badFile.txt: No such file or directory" 
```

以前的错误似乎永远停留在 QNetworkAccessManager 中。

对我有用的唯一解决方案是每次发生 ftp not found 错误时删除并创建一个新的 QNetworkAccessManager。这是通过简单地连接到 QNetworkReply 错误(QNetworkReply::NetworkError) 信号来完成的。正如 elmigranto 所说，完成的信号将为每个活动请求发出。这显然只有在 QNetworkAccessManager 处理单个请求时才有效，否则必须特别注意不要中止由同一管理器处理的任何并行请求。

QNetworkAccessManager finished(QNetworkReply*) 和 QNetworkReply finished() 信号做同样的事情。如 Qt 文档中所述，这两个信号是串联发出的。正如 buster 所说，这不是解决此问题的方法。

设置计时器可用于其他目的（例如连接超时），但也无法解决此特定问题。

# eclipse - 为什么我得到 java.security.AccessControlException？

> ID：11587829
> 
> 赞同：0
> 
> 时间：2012-07-20T22:39:22.693
> 
> 标签：eclipse, google-app-engine, permissions, runtimeexception, accesscontrolexception

我正在使用谷歌应用引擎。当我从我的网站发送 ajax 请求时。我得到以下异常：

```
 Uncaught exception from servlet
 java.security.AccessControlException: access denied (java.lang.RuntimePermission accessDeclaredMembers)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:355)
at java.security.AccessController.checkPermission(AccessController.java:567)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
at com.google.apphosting.runtime.security.CustomSecurityManager.checkPermission(CustomSecurityManager.java:56)
at java.lang.SecurityManager.checkMemberAccess(SecurityManager.java:1679)
at java.lang.Class.checkMemberAccess(Class.java:2174)
at java.lang.Class.getDeclaredMethods(Class.java:1807)
at javax.servlet.http.HttpServlet.getAllDeclaredMethods(HttpServlet.java:426)
at javax.servlet.http.HttpServlet.doOptions(HttpServlet.java:477)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:679) 
```

我正在使用 Eclipse 和 JDK 1.6.6 的谷歌应用引擎插件。对于持久性，我使用以下类： public class PMF {

```
private static final PersistenceManagerFactory pmfInstance = JDOHelper.getPersistenceManagerFactory("transactions-optional");

private PMF(){}

public static PersistenceManagerFactory get(){
    return pmfInstance;
}
 } 
```

在代码中我坚持一个对象，如下所示：

```
 user.setEmail(userEmail);
 user.setAddress(address);
 user.setFirstName(fName);
 user.setLastName(lName);
 user.setPassword(pwd);
 pm.makePersistent(user); 
```

我的用户类的代码如下：

```
 @PersistenceCapable
 public class User{

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private String userEmail;

@Persistent
private String fName;

    @Persistent
private String lName;

    @Persistent
private String address;

    @Persistent
private String pwd;

    public User(){}

    // getters and setters for all

 } 
```

我正在使用简单的 java Servlet。

本地一切正常，但是当我在 google appengine 上上传我的网络应用程序时，就会出现这个异常。谁能知道它为什么会发生，我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:41:37.333

You're running into an issue due to App Engine's sandboxed environment. This is discussed in other [similar posts](https://stackoverflow.com/questions/10674142/java-security-accesscontrolexception-access-denied-java-lang-runtimepermission), and in the [Runtime documentation](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox).

Errors like these often only manifest in production because the local environment is similar, but not identical to, the production environment.

**Edit**

With that said, the following code works just fine locally and in production. It's based on the code you shared, so I'm not entirely sure what the error is.

My User class:

```
import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable
public class User{

  @PrimaryKey
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  private String userEmail;

  @Persistent
  private String fName;

  @Persistent
  private String lName;

  @Persistent
  private String address;

  @Persistent
  private String pwd;

  public User(){}

  public String getUserEmail() {
    return userEmail;
  }

  public void setUserEmail(String userEmail) {
    this.userEmail = userEmail;
  }

  public String getfName() {
    return fName;
  }

  public void setfName(String fName) {
    this.fName = fName;
  }

  public String getlName() {
    return lName;
  }

  public void setlName(String lName) {
    this.lName = lName;
  }

  public String getAddress() {
    return address;
  }

  public void setAddress(String address) {
    this.address = address;
  }

  public String getPwd() {
    return pwd;
  }

  public void setPwd(String pwd) {
    this.pwd = pwd;
  }
} 
```

My servlet:

```
public class MyTestServlet extends HttpServlet {
  public void doGet(HttpServletRequest req, HttpServletResponse resp)
      throws IOException {
    resp.setContentType("text/plain");
    resp.getWriter().println("Hello, world");

    User user = new User();
    user.setUserEmail("email");
    user.setAddress("address");
    user.setfName("first");
    user.setlName("last");
    user.setPwd("password");
    PersistenceManager pm = PMF.get().getPersistenceManager();
    pm.makePersistent(user);
  }
} 
```

The only thing I can think of is that you're possibly using the incorrect annotations. Can you confirm your annotations match mine?

# java - GWT AsyncCallback - 内部类共享

> ID：11587840
> 
> 赞同：0
> 
> 时间：2012-07-20T22:40:22.263
> 
> 标签：java, gwt, inner-classes, asynccallback

我有一个数组 premisasObtenidas，我想用从 GWT AsyncCallback 获得的内容来更新它。该调用工作正常，并且 onSuccess 的代码执行，但是当我尝试将它返回的内容添加到 premisasObtenidas 以在我的 getPremisasFromServer 方法中返回它时，我得到一个空列表。

如何从 getPremisasFromServer 返回，我从 AsyncCallback 中的成功中获得的列表？

```
private List<PremisaDTO> getPremisasFromServer() {

        final List<PremisaDTO> premisasObtenidas = new ArrayList<PremisaDTO>();
            //premisasObtenidas is declared on the outside class        

        myService.mostrarPremisas( 

                new AsyncCallback<List<PremisaDTO>>() {

                        public void onFailure(Throwable caught){

                            Window.alert("Falla al cargar premisas" + caught.getMessage());

                        }
                        public void onSuccess(List<PremisaDTO> premisasEnBD){

                            Window.alert("Exito al obtener premisas " + premisasEnBD.get(0).getTextoPremisa());
                            for (int i=0; i<premisasEnBD.size();i++){
                                PremisaDTO aux = new PremisaDTO();
                                aux.setId(premisasEnBD.get(i).getId());
                                aux.setTextoPremisa(premisasEnBD.get(i).getTextoPremisa());
                                premisasObtenidas.add(aux);

                            }
                        }
                } );

        return premisasObtenidas; //here premisasObtenidas has size 0 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:03:28.137

这是一个子例程 - 异步回调不会内联发生 - 即`onSuccess`在您点击 return 语句时尚未执行。

回调将在将来的某个时间发生（当服务器完成它的事情时）。

你可能需要的是

```
final List<PremisaDTO> premisasObtenidas = new ArrayList<PremisaDTO>(); 
```

成为类级别（不是函数的本地）。您`onSuccess()`填充列表，然后调用其他一些类方法来处理列表。

这只是 acync 编程的本质。由于涉及服务器并且您不希望客户端变得无反应。您要求服务器做某事，完成后您（客户端）会被告知（您的程序可以自由地在中间继续做其他事情）。

# android - Android：片段堆栈与 ActionBar 和 Tabs 混淆

> ID：11587841
> 
> 赞同：1
> 
> 时间：2012-07-20T22:40:25.317
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我正在开发一个使用带有导航选项卡和多个片段的 ActionBarSherlock 的应用程序。

我有三个导航选项卡，每个选项卡都有一个或多个子视图。我还有三个带有一个或多个子视图的选项菜单项。当我在每个选项卡或选项菜单中深入查看视图时，一切正常。每个初始子视图都是一个调用详细视图或视图的 ListFragment。

当我在子视图或选项菜单片段中开始切换选项卡时遇到问题。我的视图开始与新视图下的前一个视图重叠。

这是我的 TabListener：

```
class MyTabsListener implements ActionBar.TabListener {
public SherlockListFragment fragment;

public MyTabsListener(SherlockListFragment fragment) {
    this.fragment = fragment;
}

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
    ft.replace(android.R.id.content, fragment);
}

public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {      
    ft.remove(fragment);
}

public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
    // Don't care if a tab is reselected, no special handling required
} 
```

这是我的选项菜单：

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {

    // initialize variables
    FragmentManager fm = null;
    FragmentTransaction ft = null;
    ActionBar actionBar = getSupportActionBar();

    // check to see which action item was selected
    switch (item.getItemId()) {
    case android.R.id.home:
        // initialize variables
        fm = this.getSupportFragmentManager();
        ft = fm.beginTransaction();

        if (fm.getBackStackEntryCount() > 0) {

            fm.popBackStack();
            ft.commit();    
        }else {
            actionBar = getSupportActionBar();
            actionBar.setDisplayHomeAsUpEnabled(false);
        }   
        return true;
    case R.id.menuitem_search:
        onSearchRequested();
        return true;
    case R.id.menuitem_contacts:
        ContactListFragment contactListFragment = new ContactListFragment();    
        ft = getSupportFragmentManager().beginTransaction();
        ft.replace(android.R.id.content, contactListFragment);      
        ft.addToBackStack(null);
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE); 
        ft.commit();
        return true;
    case R.id.menuitem_isolation:
        ISOListFragment isoListFragment = new ISOListFragment();    
        ft = getSupportFragmentManager().beginTransaction();
        ft.replace(android.R.id.content, isoListFragment);      
        ft.addToBackStack(null);           
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE); 
        ft.commit();
        return true;
    case R.id.menuitem_water:
        H2OListFragment h2oListFragment = new H2OListFragment();    
        ft = getSupportFragmentManager().beginTransaction();
        ft.replace(android.R.id.content, h2oListFragment);      
        ft.addToBackStack(null);          
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE); 
        ft.commit();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

我对所有片段都有一个 MainActivity。在处理向下钻取子视图和 ActionBar 导航选项卡时如何处理 backstack？任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:59:19.870

这是对我有用的解决方案：

```
@Override
public void onBackPressed() {

    // initialize variables
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();

    // check to see if stack is empty
    if (fm.getBackStackEntryCount() > 0) {          
        fm.popBackStack();
        ft.commit();    
    }
    else {

        super.onBackPressed();
    }
    return;
} 
```

# c# - Codedom 添加资源

> ID：11587844
> 
> 赞同：0
> 
> 时间：2012-07-20T22:40:32.817
> 
> 标签：c#, wpf, resources, codedom

我正在用 codedom 编译一些源代码（它是一个 wpf 窗口）。现在我想在不先删除文件的情况下添加一些资源（图像）。那可能吗？

如果是，如何？以及如何访问新应用程序中的图像？

根据要求提供一些更详细的信息：

用户可以输入/选择一些数据。之后，用户可以单击编译创建自定义应用程序 (wpf)。

现在我想在编译时添加一些图像资源，以便为动态创建的应用程序创建更好的 GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:30:35.883

好的，我终于解决了这个问题。

我将图像转换为字节数组，然后编写了一个新的资源（使用 ResourceWriter），最后是 (CompilerParameters)EmbeddedResources.Add。

在创建的 WPF 窗口中，我抓取数组，将其转换回 BitmapImage 并将其分配给图像控件。

# python - 为远程 linux 服务器存储加密密码存储

> ID：11587845
> 
> 赞同：1
> 
> 时间：2012-07-20T22:40:34.123
> 
> 标签：python, mysql, ssh, password-protection

我正在写我的论文，其中实现了通过 SSH 连接到其他 linux 服务器的 Python 应用程序。问题是关于将密码存储在数据库中（无论哪种类型，我们现在都说 MySQL）。确保不加密它们是一个坏主意。但是我能做些什么来让存储这种机密数据并在以后使用它们连接到其他服务器时感到舒服呢？当我加密密码时，我将无法使用它来登录另一台机器。

在这种情况下，公钥/私钥是否设置为唯一选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:40:29.280

在我看来，对于 SSH 部分来说，使用密钥身份验证是最好和最安全的，并且易于实现。

现在谈谈你的问题。您希望将这些密钥或密码存储到数据库中并且仍然能够使用它们。这要求您拥有一个可以从所述数据库中解密它们的主密码。这会将故障点指向一个不理想的密码。您可以想出许多奇特的方案来加密和存储这些主密码，但它们仍然在用于登录其他服务器的机器上，因此仍然是一个弱点。

与其从密码存储的角度来看，不如从服务器安全的角度来看。如果有人可以访问运行有 python 守护程序的服务器，那么他们可以登录到任何其他服务器，因此这更多的是环境安全问题而不是密码问题。

如果您能想出一种方法来摆脱这个单一的故障点，那么只要用于加密它们的密钥是安全的并且外部的任何其他人都无法使用，加密并将密码存储在远程数据库中就可以了python/数据库关系的领域。

# c++ - 我如何为 std::string 专门化这个类模板？

> ID：11587847
> 
> 赞同：1
> 
> 时间：2012-07-20T22:41:06.903
> 
> 标签：c++, templates, variadic-templates, template-meta-programming

我正在编写一个 TMP 来计算`struct`使用可变参数模板作为模板参数传递给 a 的元素数量。这是我的代码：

```
template<class T, T... t>
struct count;

template<class T, T h, T... t> 
struct count<T, h, t...>{
 static const int value = 1 + count<T, t...>::value;
};

template<class T>
struct count<T>{
 static const int value = 0;
};

template<>
struct count<std::string, std::string h, std::string... l>{
 static const int value = 1 + count<std::string, l...>::value;
};

template<>
struct count<std::string>{
 static const int value = 0;
};

int main(){
 std::cout << count<int, 10,22,33,44,56>::value << '\n';
 std::cout << count<bool, true, false>::value << '\n';
 std::cout << count<std::string, "some">::value << '\n';
 return 0; 
```

}

`count`我在with的第三次实例化时收到错误，`std::string`因为`g++ 4.7`告诉我`error: ‘class std::basic_string<char>’ is not a valid type for a template non-type parameter`。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:07:23.413

问题不在于类型，而在于您调用中`std::string`的文字`"some"`

```
std::cout << count<std::string, "some">::value << '\n'; 
```

不幸的是，不可能将字符串或浮点文字传递给模板，正如[在这个答案](https://stackoverflow.com/a/2033112/1450656)或[那个](https://stackoverflow.com/a/3800947/1450656)答案中所写的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:05:24.577

很抱歉让你失望了，但是没有办法解决这个问题。非类型模板参数只能是原始类型，例如：

*   积分或枚举
*   指向对象的指针或指向函数的指针
*   引用对象或引用函数
*   指向成员的指针

`std::string`或其他类型根本不在那里工作。

# javascript - 移动 div 而不是 Remove()

> ID：11587848
> 
> 赞同：1
> 
> 时间：2012-07-20T22:41:17.067
> 
> 标签：javascript, jquery

```
 $(settings.widgetSelector, $(settings.columns)).each(function () {
        var thisWidgetSettings = iNettuts.getWidgetSettings(this.id);
        if (thisWidgetSettings.removable) {
            $('<a href="#" class="remove">CLOSE</a>').mousedown(function (e) {
                /* STOP event bubbling */
                e.stopPropagation();    
            }).click(function () {
                if(confirm('This widget will be removed, ok?')) {
                    $(this).parents(settings.widgetSelector).animate({
                        opacity: 0    
                    },function () {
                        $(this).wrap('<div/>').parent().slideUp(function () {
                            $(this).remove();
                            iNettuts.savePreferences();
                        });
                    });
                }
                return false;
            }).appendTo($(settings.handleSelector, this));
        } 
```

基本上现在，当单击“关闭”时，此代码会完全删除内容。我宁愿做的是将它移动到不同的div。我正在阅读有关 prependTo 的信息。我认为这就像改变一样简单：

```
$(this).remove(); 
```

至：

```
$(this).prependTo('.dock'); 
```

但似乎没有那么简单。这只是将其删除。[完整代码](http://pastebin.com/u64XXAQ5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:58:55.633

这将保留原始元素：

```
$('yourElement').clone().appendTo('whereverYouWant'); 
```

**[jsBin 演示](http://jsbin.com/uyunop/4/edit)**

* * *

如果您想将其从原来的位置移除：

```
$('yourElement').appendTo('whereverYouWant'); 
```

**[jsBin 演示](http://jsbin.com/uyunop/2/edit)**

如同：

```
$('yourElement').remove().clone().appendTo('whereverYouWant'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:49:46.337

试试[jQuery detach](http://api.jquery.com/detach/)，因为 remove 也会删除所有元素的引用。

```
 $(settings.widgetSelector, $(settings.columns)).each(function () {
    var thisWidgetSettings = iNettuts.getWidgetSettings(this.id);
    if (thisWidgetSettings.removable) {
        $('<a href="#" class="remove">CLOSE</a>').mousedown(function (e) {
            /* STOP event bubbling */
            e.stopPropagation();    
        }).click(function () {
            if(confirm('This widget will be removed, ok?')) {
                $(this).parents(settings.widgetSelector).animate({
                    opacity: 0    
                },function () {
                    $(this).wrap('<div/>').parent().slideUp(function () {
                        $(this).detach().prependTo('.dock');
                        iNettuts.savePreferences();
                    });
                });
            }
            return false;
        }).appendTo($(settings.handleSelector, this));
    } 
```

# php - 向我的 HTML 选择标签添加“全部”选项

> ID：11587853
> 
> 赞同：0
> 
> 时间：2012-07-20T22:41:57.753
> 
> 标签：php, html, sql

所以我正在完成我的网站。但是我想知道，如何构造我的 SQL 语句，以便当我单击带有“全部”选项的提交按钮时，我会在该字段中获得所有结果，并添加其他条件。如果您知道任何好的教程，请您推荐一个。

```
<select name="make" id ="make" size="0">
    <option selected ="all">All</option>
    <option value="bmw">BMW</option>
    <option value="honda">Honda</option>
    <option value ="nissan">Nissan</option>
    <option value="toyota">Toyota</option>
</select>

$sql = sprintf("SELECT * FROM  `chjadb_vehicles` WHERE  `v_make` LIKE '$make'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:43:48.377

这是一种只需要更改 SQL 的方法：

```
SELECT *
FROM chjadb_vehicles
WHERE (v_make = '$make' OR '$make' = 'all') 
```

括号在这里不是绝对必要的，但我还是添加了它们，以防您以后决定添加另一个`AND ...`条件。

# python - Websockify 错误 - 地址已在使用中

> ID：11587857
> 
> 赞同：1
> 
> 时间：2012-07-20T22:42:58.830
> 
> 标签：python, html, sockets, tcp, websocket

我正在运行一个名为[quarqd](http://opensource.quarq.us/quarqd/)的脚本，它将其 XML 数据转储到端口 8168。我在 OSX Lion 的终端中运行它。我可以使用 netcat 连接到端口并观看其中的数据流。

我需要获取这些数据并将其转储到 websocket，以便在本地网页中进行操作和显示。所以我尝试用 Websockify 来做这件事。

```
$ websockify 8168 localhost:8169 
```

我运行该命令，我得到了一些确认代码，就像它正在设置一样，但随后它会出现此错误消息。

```
[Errno 48] Address already in use 
```

令人沮丧的是，我打算使用该套接字。这是我想转储到 websocket 的数据。我已经为第二个参数尝试了多个端口号，以确保它没有被绑定，但仍然没有运气。Websockify 不就是为此而生的吗？TCP套接字到Websocket？如果是这样，我如何让它正确运行？仅供参考，我对 Python 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:42:07.910

第二个地址是目标。第一个地址/端口是您使用 websocket 连接的地方，它需要是一个自由/开放端口。换句话说，您希望您的地址颠倒：

```
websockify 8169 localhost:8168 
```

然后告诉您的浏览器连接到主机：8169。这将导致 websockify 连接到 localhost:8168 并将流量桥接到浏览器所连接的 8169。

换句话说：

```
browser -> (websockets) -> websockify port 8169 -> (tcp) -> server port localhost:8168 
```

免责声明：我制作了 websockify。

# java - 滚动第一个滚轮时，Android滚轮滚动第二个滚轮

> ID：11587864
> 
> 赞同：0
> 
> 时间：2012-07-20T22:43:37.567
> 
> 标签：java, android

我正在开发一个转换器，为此我有两个 android wheel 实例。当用户滚动一个轮子时，第二个轮子应该自动计算并将第二个轮子的数据更改为该结果。反之亦然。

这样做的问题是逻辑是循环的，因为当滚轮被滚动和更改时，每次都会调用滚动的侦听器和更改的侦听器，这会导致 StackOverFlowError。

当用户滚动第一个轮子时，如何让第二个轮子转换并设置日期？反之亦然。

代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {

   ......

   changedlistener = new OnWheelChangedListener() {
       public void onChanged(WheelView wheel, int oldValue, int newValue) {

         if (wheel.getId() == R.id.month || wheel.getId() == R.id.day || wheel.getId() == R.id.year) {
                 updateDays(year, month, day);
         } else if (wheel.getId() == R.id.hijrimonth || wheel.getId() == R.id.hijriday || wheel.getId() == R.id.hijriyear) {
                 hijriDays(hijriyear, hijrimonth, hijriday);
         }

       }
   };

   .....scrolledlistener event......

   // month

   month.addChangingListener(changedlistener);
   month.addScrollingListener(scrolledlistener);

   // year
   year.addChangingListener(changedlistener);
   year.addScrollingListener(scrolledlistener);

   //day
   day.addChangingListener(changedlistener);
   day.addScrollingListener(scrolledlistener);

   hijrimonth.addChangingListener(changedlistener);
   hijrimonth.addScrollingListener(scrolledlistener);

   hijriyear.addChangingListener(changedlistener);
   hijriyear.addScrollingListener(scrolledlistener);

   hijriday.addChangingListener(changedlistener);
   hijriday.addScrollingListener(scrolledlistener);

}

/**
* Updates day wheel. Sets max days according to selected month and year
*/
void updateDays(WheelView year, WheelView month, WheelView day) {
   Calendar calendar = Calendar.getInstance();
   calendar.set(Calendar.YEAR, calendar.get(Calendar.YEAR) + year.getCurrentItem());
   calendar.set(Calendar.MONTH, month.getCurrentItem());

   int maxDays = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
   day.setViewAdapter(new DateNumericAdapter(this, 1, maxDays, calendar.get(Calendar.DAY_OF_MONTH) - 1));
   int curDay = Math.min(maxDays, day.getCurrentItem() + 1);
   day.setCurrentItem(curDay - 1, true);
   int curYear = calendar.get(Calendar.YEAR);
   year.setCurrentItem(curYear);
   text.setText( (day.getCurrentItem()+1) + " " + getMonthAsString(month.getCurrentItem()) + " "  +year.getCurrentItem() );
   //setHijri(year.getCurrentItem(), month.getCurrentItem(), day.getCurrentItem());
} 

void hijriDays(WheelView year, WheelView month, WheelView day) {

   hijritext.setText((day.getCurrentItem()+1) + " " + hijri.getHijriMonthName(month.getCurrentItem()+1) + " "  + year.getCurrentItem());
   setGreg(year.getCurrentItem(), month.getCurrentItem(), day.getCurrentItem());
} 

public void setGreg(int y, int m, int d) {
    hdate = hijri.islToGreg(y, m, d, 0);
    hmonth = hdate[1];
    hyear = hdate[2];
    hday = hdate[0];

    month.setCurrentItem(hmonth);
    day.setCurrentItem(hday);
    year.setCurrentItem(hyear);

}

public void setHijri(int y, int m, int d) {
    hdate = hijri.GregToIsl(y, m, d, 0);
    hmonth = hdate[1];
    hyear = hdate[2];
    hday = hdate[0];

    hijrimonth.setCurrentItem(hmonth);
    hijriday.setCurrentItem(hday);
    hijriyear.setCurrentItem(hyear);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:25:34.327

我认为最好的解决方案是使用标志来跳过轮子上的重复事件；类似下一个：

```
changedlistener = new OnWheelChangedListener() {
   boolean inProgress = false;

   public void onChanged(WheelView wheel, int oldValue, int newValue) {

     if (!inProgress) {
         return;
     }
     inProgress = true;

     try {
         if (wheel.getId() == R.id.month || wheel.getId() == R.id.day || wheel.getId() == R.id.year) {
             updateDays(year, month, day);
         } else if (wheel.getId() == R.id.hijrimonth || wheel.getId() == R.id.hijriday || wheel.getId() == R.id.hijriyear) {
             hijriDays(hijriyear, hijrimonth, hijriday);
         }
      }
      finally {
          inProgress = false;
      }
   }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:57:11.537

当用户开始滚动启动一个倒数计时器。定期进行每次增量所需的计算和调整。换句话说，您不需要捕获每个滚动更改事件。如果倒数计时器尚未开始，只需抓住它即可启动倒数计时器。然后检查滚动位置并进行相应调整。

# debugging - Firebug Net 等待时间

> ID：11587867
> 
> 赞同：2
> 
> 时间：2012-07-20T22:43:46.937
> 
> 标签：debugging, firebug

这是否包括请求返回的总时间？如果不是，请在 firebug net 选项卡的上下文中准确定义 Waiting 的含义。

我正在使用 asp.net mvc 并想追踪我在服务器和客户端之间的延迟真正发生的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:49:42.063

“等待”（紫色）表示您的服务器花费在处理上的时间量，即从请求完全发送到响应开始之间的时间量。响应返回所需的时间由“接收”（绿色）显示。

我的规则是这样的：当“等待”时间很长时，分析您的服务器端代码是否存在可能的瓶颈。当“接收”时间较长时，请参阅 gzip 压缩响应或以其他方式减少响应负载。

# ruby-on-rails - 根据 Rails 中的用户类型定义对不同选项卡的访问

> ID：11587869
> 
> 赞同：0
> 
> 时间：2012-07-20T22:43:54.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试创建一个 Rails 应用程序，根据您的用户类型为不同的表格提供服务，假设您负责库存，因此该应用程序会向您显示与库存相关的表格，问题是我没有事先不知道会有哪些类型的用户，所以我需要一个**通用** 的方法来解决这个问题。

我的实际用户模型如下所示：

```
# == Schema Information
#
# Table name: users
#
#  id              :integer         not null, primary key
#  created_at      :datetime        not null
#  updated_at      :datetime        not null
#  password_digest :string(255)
#  remember_token  :string(255)
#  username        :string(255)
#  id_compania     :string(255)
#  type            :integer
#  name            :string(255)
#  admin           :boolean         default(FALSE)
#  empresa_id      :integer         default(1), not null
#

class User < ActiveRecord::Base
  attr_accessible :id_compania, :username, :type, :password, :password_confirmation, :name, :empresa_id
  has_secure_password
  belongs_to :empresa

  before_save { |user| user.username = username.downcase }
  before_save :create_remember_token
  USERNAME_REGEX = /(^([a-z]{3})-([a-z\d]){5,}$)/

  validates :username, `enter code here`presence: true, length: { maximum: 15 }, format: { with: USERNAME_REGEX }
  validates :password, presence: true, length: { minimum: 8 }
  validates :password_confirmation, presence: true
  validates :type, presence: true, length: { maximum: 4 }
  validates :id_compania, presence: true, length: { maximum: 3 }

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:58:04.947

所以看起来你有一个为用户定义的 :type 。如果是这种情况，那么您可以定义一个根据您感兴趣的用户类型返回某些表的方法。例如，

```
def return_tables(usertype)
  if (usertype=="Admin")
    @tables =.....(some way to retrieve the columns you want)
  else
  :
  end
end 
```

你可以通过以下方式调用它：

```
return_tables(user.type) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:58:18.377

我会为此使用单表继承。您需要对架构进行的唯一更改是对类型字段使用字符串而不是整数。有人为 Rails 指南编写了[STI](https://github.com/ivanacostarubio/docrails/blob/f3801a1b2e685d04dfbe01decb3a0a9609e33da9/guides/source/single_table_inheritance.textile)指南，但由于某种原因从未完成。不过，您应该能够从中获得足够的收益，并且 stackoverflow 对此主题有一些很好的问题和答案。

随着列的变化，您将需要创建 User 模型的不同子类：

```
User < ActiveRecord::Base
end

InventoryUser < User
  def tables
    # your logic
  end
end

AdminUser < User
  def tables
    # your logic
  end
end 
```

# regex - 复杂的正则表达式基于预定义的文本字符串阻止色情

> ID：11587871
> 
> 赞同：2
> 
> 时间：2012-07-20T22:44:20.390
> 
> 标签：regex

我正在寻找完美的 1 行正则表达式模式，以使用我的内容阻止软件阻止大量色情明星姓名。

该软件完全符合正则表达式，并且将接受任何编写良好的正则表达式。

例如，这是我目前使用的一行 - 这些行以某种方式相同，其中第一行阻止所有以我的预定义单词列表结尾的内容，第二行阻止所有以我的预定义单词列表结尾的内容。

```
(\b(cohf|cock(s)?|cum(s)?|cutie(s)?|creamy(-)?pie(s)?))(-)?\w+\b
\w+(-)?((cam(s)?|cohf|cock(s)?|cum(s)?|cutie(s)?|creamy(-)?pie(s)?)\b) 
```

现在，我有一个看起来像这样的列表：

```
**pornstar1 name**
pornstar2 name
pornstar3 name
some-other name-here 
```

我希望提供的正则表达式阻止任何/所有 URL，其中出现名称的两个部分 - 示例：

*   www.alink-to- pornstar1 **.com** <-- 没有被屏蔽（这里只有名字的一部分）
*   www.alink-to- pornstar1 **-name** .com <-- 被阻止（有两个部分）

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:28:31.247

1.  获取 url 并删除所有`[^a-zA-Z]` *- 用空字符串替换它们*
2.  列出所有不允许的单词或短语，并与 (1) 相同
3.  有了这样的列表，现在将所有带有`|`字符的关键字加入一个正则表达式字符串
4.  检查此正则表达式是否匹配您在 (1) 处修改的 url

拥有变量`url`和`list`，单行 jQuery 解决方案将是：

```
url.replace(/[^a-z]/gi,'').match(new RegExp("("+$.map(list,function(e){return e.replace(/[^a-z]/gi,'');}).join('|')+")"))!=null 
```

结果是`true`if`url`包含来自`list`.

# javascript - JavaScript 字符串

> ID：11587879
> 
> 赞同：-3
> 
> 时间：2012-07-20T22:45:14.343
> 
> 标签：javascript, string

我正在尝试构建一个字符串参数以作为参数发送到 AJAX 调用，但是我尝试构建字符串的各种方法都没有奏效，包括简单的连接。有什么建议吗？

```
var partRelationType = checkBox.name;
var partNumber = checkBox.value;
var isChecked = checkBox.checked;

$.ajax({
    url: '@Url.Action("SetSelectedPart", "Select", new { customerEstimateKey = ViewBag.CustomerEstimateKey, type = partRelationType, partNumber =  partNumber, isSelected = isChecked })',
    type: "POST",
    async: true
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:10:36.007

URL 是使用服务器端代码创建的，因此您不能使用客户端变量，因为它们还不存在。

请改用数据的 data 属性。我不确定您的服务器代码是如何将数据放入 URL 中的，但是这样的事情应该可以工作：

```
$.ajax({
  url: '@Url.Action("SetSelectedPart", "Select", new { customerEstimateKey = ViewBag.CustomerEstimateKey })',
  data: { type: partRelationType, partNumber: partNumber, isSelected: isChecked },
  type: "POST",
  async: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:49:56.150

URL 必须是类似的 URL`http://www.blah.com.au/foo.aspx?type=bar&id=22`或`just foo.aspx?type=bar&id=22`

您是否缺少 URL.action 周围的服务器端标签？

或者某些模板解析会自动转换为上面需要的格式的 URL？

# c++ - 在 C++ 中初始化引用

> ID：11587880
> 
> 赞同：3
> 
> 时间：2012-07-20T22:45:30.033
> 
> 标签：c++

如果我想要一个指向另一个变量的指针，我可以通过使用 & 为变量提供地址来实现它。

```
int foo = 10;
int *bar = &foo; 
```

现在，如果我遵循与上述相同的逻辑，而是创建一个引用类型。

```
int foo = 10;
int &bar = &foo; 
```

我认为这应该有效，但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T22:46:59.273

语法是

```
int &bar = foo; 
```

参见[维基百科](http://en.wikipedia.org/wiki/Reference_%28C%2B%2B%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T22:58:49.223

因为指针和引用不是一回事。您可以将引用视为仅意味着“另一个名称”或“别名”。

换句话说，`bar`只是`foo`您示例中的另一个名称。当你这样做时`int &bar = foo;`，你想`bar`成为另一个名字`foo`，你不想分配给 to 的`foo`地址`bar`。但是，指针存储它指向的对象的地址，因此对于指针，您需要 address-of 运算符来获取地址`foo`并将其分配给`bar`指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T22:49:59.363

它不起作用，因为引用需要使用与引用相同的类型进行初始化。在这种情况下：

```
int foo = 10;
int &bar = foo; 
```

当您尝试以这种方式初始化它时：

```
int &bar = &foo; 
```

您正在尝试使用指向 int 的指针初始化 int 引用。类型不匹配。

引用与指针不同，尽管编译器可能会将其实现为引擎盖下的指针。参考文献基本上说“当我提到 bar 时，我真的在谈论 foo”。

# r - ROAuth R 和 FitBit API 错误：未提供授权标头

> ID：11587881
> 
> 赞同：3
> 
> 时间：2012-07-20T22:45:39.003
> 
> 标签：r, oauth, fitbit

使用 R 和 Jeff Gentry 的 ROAuth 包尝试从 fitbit 中提取数据，但身份验证似乎不起作用。代码如下：

```
apiURL = 'api.fitbit.com/'

credentials = OAuthFactory$new(consumerKey=key, 
                           consumerSecret=secret, 
                           requestURL=tokenURL,
                           accessURL=accessTokenURL,
                           authURL=authorizeURL
                           ) 
```

然后我进行握手：

```
> credentials$handshake()
To enable the connection, please direct your web browser to: 
http://www.fitbit.com/oauth/authorize?oauth_token=036afa88a832bfffc72af485e38c1572
When complete, record the PIN given to you and provide it here: 
```

完成授权并粘贴 oauth_verifier 令牌，从而生成一组外观正确的凭据。

最后，我尝试获取我所追求的个人资料数据：

```
rawToChar(credentials$OAuthRequest(paste(apiURL,"1/user/userID/profile.json", sep="", collapse=''), "GET")) 
```

我得到这个回应：

```
[1] "{\"errors\":[{\"errorType\":\"oauth\",\"fieldName\":\"n/a\",\"message\":\"No 
Authorization header provided in the request. Each call to Fitbit API should be OAuth 
signed\"}]}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:18:34.783

好的，在与 DTL 和 Geoff Jentry 进行了一些挖掘和发送电子邮件之后，终于解决了这个问题（非常感谢大家）。

在原始 ROAuth 包中，oauthGet 函数没有使用 Authorization .opt 进行 curl 调用，并且还具有如下所示的参数：

```
params <- c(params, as.list(auth))
getForm(url, .params = params, curl = curl, .opts = c(list(httpget = TRUE),  opts,  list(...)))) 
```

Fitbit.com Api 有点特别[https://wiki.fitbit.com/display/API/OAuth+Authentication+in+the+Fitbit+API](https://wiki.fitbit.com/display/API/OAuth+Authentication+in+the+Fitbit+API)需要 " 来包装 oauth_params 的值，我做了以下 mods：

```
params <-as.list(auth) #dropping the first item in the list which was an extra "GET"
opts=list(httpheader=c(Authorization=paste("OAuth ", paste(names(auth), '="', auth, '"', sep = "", collapse = ",\n   "), sep="", collapse='')))
getForm(url, curl = curl, .opts = c( opts)) 
```

似乎指定参数并列出选项会导致问题。

终于得到了数据正确的表格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:31:41.087

如果您还没有，请确保您拥有 CRAN 上不可用的最新版本 (0.9.2)：

[http://geoffjentry.hexdump.org/ROAuth_0.9.2.tar.gz](http://geoffjentry.hexdump.org/ROAuth_0.9.2.tar.gz)

如果您使用的是 Windows，则需要使用这个：

[http://geoffjentry.hexdump.org/ROAuth_0.9.2.zip](http://geoffjentry.hexdump.org/ROAuth_0.9.2.zip)

还有其他人致力于该软件包的未来开发，我曾认为他们已经有一个新版本，但显然没有，我可能应该向 CRAN 提交 0.9.2，以防它继续需要一段时间。

如果这不起作用，那可能是 Fitbit 特有的东西。我见过一些网站在使用 ROAuth 时表现不佳。如果 0.9.2 仍然失败，请告诉我，我会尝试看看它。

# php - PHP：在作为 foreach() 主题的数组上使用 array_splice 会导致问题吗？

> ID：11587894
> 
> 赞同：3
> 
> 时间：2012-07-20T22:48:06.587
> 
> 标签：php, foreach, array-splice

我正在编写一些类似于这样的 PHP 代码：

```
foreach($filter[1] as $reject){
        $reject_processed = preg_replace('~\s~','',strtolower($filter[1][$reject]));
        if(array_key_exists($reject_processed,$list_of_common_replacements)){
            $filter[0][] = $list_of_common_replacements[$reject_processed];
            $filter[1] = array_splice($filter[1],$reject,1)
        }

    } 
```

它应该搜索拒绝值列表（过滤器 [1]），查找是否存在替换，然后（如果存在）将替换添加到好值列表（过滤器 [0]），同时从拒绝名单。

在 foreach() 内部从作为 foreach() 的主要主题的数组中删除值会导致问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T22:56:13.827

否。`foreach`创建数组的副本。考虑以下代码：

```
$arr = array(1,2,3,4,5);
foreach($arr as $k=>$v) {
    if($v==1) {
        unset($arr);
    }
    echo $v;
} 
```

即使我们在第一次迭代中取消设置整个原始数组，它仍然会打印`12345`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:53:17.977

简洁地回答这个问题：没有。

这样做的原因是它`foreach`适用于数组的副本，具有写入时复制的行为 - 只要您修改主题数组，就会生成一个副本，因此它不会影响循环。因为`array_splice()`不依赖数组内部指针的当前位置，所以使用起来是安全的。`current()`，另一方面，不是。

我已经深入研究了这个主题，非常困惑，并在 SO 上提出了一个问题，它很好地回答了我的困惑，并完整地解释了它是如何在下面工作的——可以在[这里](https://stackoverflow.com/questions/10057671/how-foreach-actually-works)找到。

# guava - 将具有空值的键添加到 Guava Multimap

> ID：11587895
> 
> 赞同：18
> 
> 时间：2012-07-20T22:48:14.340
> 
> 标签：guava, multimap

我需要向 Guava Multimap 添加一个键，并将一个空集合作为值。我该如何做到这一点？

我试过这个：

```
map.put( "my key", null ); 
```

但是调用 get() 会返回一个包含一个元素的列表，该元素为空。我通过执行以下操作解决了这个问题：

```
map.putAll("my key2", new ArrayList()) 
```

但我想知道这是否是一件坏事？我知道 Guava 在删除最后一个值以保持 containsKey() 一致时会自动删除一个键。我在这里最好的选择是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-20T23:24:46.807

`Multimap` *故意*禁止这种方法，并且您提出的解决方法是无操作的——它实际上不会做任何事情。

工作方式`Multimap`是`multimap.get(key)`永远不会返回 null，但总是返回一些集合——可能是空的。（但是支持的`Multimap`实现可能实际上并没有为那个键存储任何东西，如果一个键没有映射到一个*非空集合*，它就不会出现在`keySet()`. [`Multimap`is *not* a`Map<K, Collection<V>>`](https://github.com/google/guava/wiki/NewCollectionTypesExplained#multimap-is-not-a-map)中。）

如果要映射到空集合，则必须使用`Map<K, List<V>>`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-21T00:35:15.543

正如[javadoc](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Multimap.html)所涵盖的，multimap 在概念上是一堆键值对，其中键不一定是唯一的，例如 a=1、a=2、b=3。如果没有与 a 关联的值，则 a 不存在键值对，因此多重映射中不存在 a。

您可以做的一件事是`Set<K>`为您关心的整个键域单独保留一个，或者只是保留不对应任何值的其他键。另一种方法是使用 a`Map<K, Collection<V>>`或 a `Map<K, Something>`where`Something`包含可能为空或不为空的集合。

# javascript - 在 jQuery 中访问 Html 编码的字段值

> ID：11587899
> 
> 赞同：0
> 
> 时间：2012-07-20T22:48:56.403
> 
> 标签：javascript, jquery, asp.net-mvc, html-helper

如何在 JavaScript 函数（jQuery）中访问“StudentID”值。

HTML：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Student.Models.vwStudent>>" %>

    <div class="divClass" id="divID">
      <table class="tableClass" id="tableID">
      <% foreach (var item in Model) { %>
        <tr class="trClass" id="trID">
          <td class="tdClass">
            <%= Html.TextBox("StudentID") %>
          </td>
          <td class="tdClass">
            <%= Html.Encode(item.StudentName) %>
          </td>
        </tr>
      <% } %>
      </table>
    </div> 
```

查询：

```
 $('#ShowStudentID').click(function () {        
      $(".tdClass").each(function () {
          alert($('.tdClass').children().val());
       // How do I access StudentID and StudentName here?
      });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:51:37.090

可以直接访问中编码的html，`td with id=tdID`不需要每个

```
 $('#ShowStudentID').click(function () {                
       alert($('#tdID').text());                   
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:00:00.703

如果您想获取每个 td 的值，这似乎是您想要做的，您可以`this`在每个循环中使用关键字。像这样的东西：

```
$('#ShowStudentID').click(function () { 
    $(".tdClass").each(function () { 
        alert($(this).text()); 
    }); 
 }); 
```

**编辑：**

要获取 td 元素中输入的值，您可以在每个循环中执行此操作：

```
alert($(this).find("input").val()); 
```

为了使它更具体一点，您也可以输入[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)：

```
alert($(this).find("input[name='StudentID']").val()); 
```

**编辑2：**

要从这两个`td`元素中获取信息，您可以改为执行以下操作：

```
$('#ShowStudentID').click(function () {
    $(".trClass").each(function () { 
          var tds = $(".tdClass", this);
          alert(tds.eq(0).find("input").val());
          alert(tds.eq(1).text());         
    });
}); 
```

相反，您循环遍历`tr`元素，选择其中的每个元素`td`并单独处理它们。

这也是一个工作示例：http: [//jsfiddle.net/Hzfz2/](http://jsfiddle.net/Hzfz2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T23:00:07.700

要访问该`StudentID`值：

```
$('#ShowStudentID').click(function () {
    $(".tdClass").each(function () {
        alert($(this).text());
    });
}); 
```

顺便说一句，我不会使用相同的 ID (`trID`和`tdID`)，因为`id`属性必须是唯一的。

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Student.Models.vwStudent>>" %>

    <div class="divClass" id="divID">
      <table class="tableClass" id="tableID">
      <% foreach (var item in Model) { %>
        <tr class="trClass">
          <td class="tdClass">
            <%= Html.Encode(item.StudentID) %>
          </td>
        </tr>
      <% } %>
      </table>
    </div> 
```

# c# - 词干后计算词频

> ID：11587902
> 
> 赞同：0
> 
> 时间：2012-07-20T22:49:24.863
> 
> 标签：c#, c#-4.0

假设我有以下字符串：

```
"present present present presenting presentation do  do doing " 
```

我正在根据它们的频率按降序计算字符串中的单词：

```
I'm using GroupBy count 
present    3
do         2
doing      1
presenting 1
presentation 1 
```

然后，我正在阻止这些词：

```
using array [ , ] or any other structure

present  3
do       2
do       1
present  1
present  1 
```

最后，我想将单词重新数入字典。所以输出应该是：

```
present 5
do      3 
```

任何人都可以帮忙吗？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:01:11.070

//使用 List 而不是 Dictionary 来允许键的多重性： List> words = new List< KeyValuePair>();

```
 string text = "present present present presenting presentation do  do doing";
        var ws = text.Split(' ');

        //Passing the words into the list:
        words = (from w in ws
                 group w by w into wsGroups
                 select new KeyValuePair<string, int>(
                     wsGroups.Key, ws.Count()
                     )
                 ).ToList<KeyValuePair<string, int>>();

        //Ordering:
        words.OrderBy(w => w.Value);

        //Stemming the words:
        words = (from w in words
                 select new KeyValuePair<string, int>
                     (
                         stemword(w.Key),
                         w.Value
                     )).ToList<KeyValuePair<string, int>>();

        //Sorting and put into Dictionary:
        var wordsRef = (from w in words
                        group w by w.Key into groups
                        select new
                        {
                            count = groups.Count(),
                            word = groups.Key
                        }).ToDictionary(w => w.word, w => w.count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:38:28.143

LINQ GroupBy 或 Aggregate 是计算此类计数的好方法。

如果你想手工做......看起来你想要两组结果：一组非词干词，另一组词干：

```
void incrementCount(Dictionary<string, int> counts, string word)
{
  if (counts.Contains(word))
  {
    counts[word]++;
  }
  else
  {
    counts.Add(word, 0);
  }
}

var stemmedCount = new Dictionary<string, int>();
var nonStemmedCount = new Dictionary<string, int>();

foreach(word in words)
{
  incrementCount(stemmedCount, Stem(word));
  incrementCount(nonStemmedCount, word);
} 
```

# php - 什么是 appvars.php？

> ID：11587909
> 
> 赞同：-3
> 
> 时间：2012-07-20T22:49:59.823
> 
> 标签：php

不久前，我正在和几个朋友一起编写一些 php 代码。我决定查看我们编写的一些代码，并注意到几乎所有的 php 文档都有一行：`require_once('appvars.php');`在顶部。我知道这不是内置的 php 文件，而是他们创建的。我认为这可能是他们从教程或初学者书中复制的东西，所以我认为这是一种常见的做法。

简而言之：**appvars.php 的内容是**什么**，它的目的是什么？**

注意：服务器已经离线几个月了，所以我无权访问它，因此无法查看源代码

非常感谢stackoverflow

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:54:53.820

不仅仅是一个包含应用程序中使用的公共变量的文件。

但是，如果不看代码就无法判断，据我们所知，它可以在每一页的顶部打印一个粉红色大象的 ascii 表示。

# c# - 在ac#winform中的所有控件顶部绘制黑色矩形

> ID：11587910
> 
> 赞同：3
> 
> 时间：2012-07-20T22:50:17.867
> 
> 标签：c#, winforms, system.drawing

我目前正在开发用于游戏制作的 TileEditor 软件。几乎一切都进行得很顺利。这就是问题所在。

我非常努力地实现了这一目标，但没有任何成功。让我们从 WinForm 的屏幕截图开始。

![没有黑色方块的应用程序截图](../Images/5e8647d1786d589d61a6ed49e4bfc0b9.png) 您可能已经了解了该应用程序的工作方式。

所以，我想在整个表单上绘制一个半透明的黑色矩形，除了 Tile 选择面板（右侧面板）。我已经有了找到矩形正确点和位置的功能，这样它就不会出现在右侧面板上。

虽然当我尝试绘制它时，它是在控件下方绘制的。有没有办法在这种形式的所有内容之上绘制矩形？

（Photoshoped） ![表格上方的黑色矩形](../Images/cdaebc122447a2bba5a5418b717faf79.png) 非常感谢您的宝贵时间，真的很感激。抱歉英语不好，这不是我的第一语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:57:30.980

做到这一点的最简单方法可能是拥有一个独立的、无边框、半透明的表格，并在您的设计表格上漂浮着烟熏玻璃效果。禁用它，以便鼠标点击等进入底层表单。

（你的英语很好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:18:54.500

您可以在下面创建控件，该控件创建底层控件的图像，然后在其上使用半透明的黑色矩形对其进行绘制。您可以将其放置在表单上要变暗的控件上方以及要保持亮起的控件下方。然后，您可以根据需要设置它的可见性。

```
 class OverlayShadow : Control
    {
        protected override void OnPaint(PaintEventArgs e)
        {
            if (Parent != null) {
                Bitmap behind = new Bitmap(Parent.Width, Parent.Height);
                foreach (Control c in Parent.Controls)
                    if (c.Bounds.IntersectsWith(this.Bounds) & c != this)
                        c.DrawToBitmap(behind, c.Bounds);
                e.Graphics.DrawImage(behind, -Left, -Top);
                behind.Dispose();
            }
            e.Graphics.FillRectangle(new SolidBrush(Color.FromArgb(128, 0, 0, 0)), Bounds);
        }
    } 
```

# ios - 读取 iOS Webkit 崩溃堆栈跟踪

> ID：11587911
> 
> 赞同：7
> 
> 时间：2012-07-20T22:50:23.617
> 
> 标签：ios, uiwebview, webkit

我遇到了一个非常棘手的技术问题，我希望周围可能有一些 Webkit 专家。我正在为客户开发 iOS 应用程序。大多数应用程序是在 UIWebView 控制器中提供的 HTML5 内容。

大约一周前，QA 团队开始报告应用程序崩溃。上周我们每天收到大约 1 份崩溃报告。不幸的是，它们是那种无法确定一致地重现崩溃的明确步骤的崩溃。奇怪的是，其中一些崩溃报告一直在使用旧版本的 iOS 代码库——这些代码已经成功运行了几个月，而没有人注意到这种崩溃行为。

但所有崩溃情况的共同点是，它们都是针对提供最新版本 HTML Web 应用程序页面的更新后端运行的。所以看起来我们在服务器端做了一些新的事情，触发了 iOS 代码中的某些东西崩溃。

崩溃日志非常一致。这是符号化的日志：

```
0   WebCore    0x33147ab0 WebCore::FrameLoader::cancelledError(WebCore::ResourceRequest const&) const + 4
1   WebCore    0x33070fbe WebCore::ResourceLoader::init(WebCore::ResourceRequest const&) + 166
2   WebCore    0x33070e66 WebCore::SubresourceLoader::startLoading() + 14
3   WebCore    0x33070c4e WebCore::ResourceLoadScheduler::servePendingRequests(WebCore::ResourceLoadScheduler::HostInformation*, WebCore::ResourceLoadPriority) + 46
4   WebCore    0x33076508 WebCore::ResourceLoadScheduler::servePendingRequests(WebCore::ResourceLoadPriority) + 36
5   WebCore    0x32fd38c8 WebCore::ThreadTimers::sharedTimerFiredInternal() + 92 
```

（大多数讨论 WebCore 中的崩溃的问题都建议您在 dealloc 方法中将 webview.delegate 设置为 nil。这似乎不是我们的问题）。

现在我有一个理论（我稍后会谈到），但我没有明确的证据。因此，我从 webkit.org 获取了源代码，并试图阅读足够多的内容以了解 WebKit 在崩溃时正在做什么。我认为我使用的 WebKit 源版本与 iOS 设备中的版本不同（我们在 5.0.1 和 5.1.1 设备中看到了这一点），关键方法似乎引用了下载资源（比如CSS 和图像），但似乎涉及到一个空 URL，所以我们最终调用了 cancelledError 方法。

然后 FrameLoader 执行此操作：

```
ResourceError FrameLoader::cancelledError(const ResourceRequest& request) const
{
    ResourceError error = m_client->cancelledError(request);
    error.setIsCancellation(true);
    return error;
} 
```

正是在这种方法中，应用程序崩溃了：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000008 
```

这向我表明 m_client 没有指向有效的东西。

现在，我确实有一个关于正在发生的事情的理论，只是基于直觉和间接证据。

我们的 UIWebView 有一个委托，它评估正在加载到 Web 视图中的 URL。在某些情况下，我们决定在单独的 ViewController 中启动新的 URL，如下所示：

```
- (BOOL)webView:(UIWebView *)source shouldStartLoadWithRequest:(NSURLRequest *)request  navigationType:(UIWebViewNavigationType)navigationType 
{
    ...

    if ([self.popupStrategy shouldPopupURL:[request URL] fromCurrent:[source.request URL]]) {

        PopupTransitionViewController *popController = [self createPopupController:request];
        ... push it onto the navigation controller ...

    }
    ...
} 
```

导致此弹出策略返回 true 的关键条件之一发生在跨域链接期间。也就是说，如果用户点击链接/图标并且该链接的目标由第三方站点托管，则应用程序会在不同的 ViewController 中启动新内容（出于各种原因，包括能够获得跨域链接上的良好原生转换）。

几周前发生的服务器端更改之一是链接 href 已更新——该链接现在调用我们的主服务器，该服务器发回 HTTP 重定向，将客户端发送到第三方站点。

我在这种情况下看到的是我们的 popupStrategy 被调用了两次。第一次，它评估我们主服务器的 URL，第二次，它评估第三方 URL。在第二种情况下，该策略告诉 UIWebView 在新的 ViewController 中加载请求。我的想法是，Webkit 代码中的某些内容并不总是这样，并且通过一些奇怪的时间或诸如此类的东西，这在某种程度上导致了崩溃。

我之所以坚持这个理论，是因为它基于以前在我们的服务器代码库中不存在的新 Web 加载行为，这很容易符合症状。我对 Webkit 代码的阅读是，在引用的一些方法中，Webkit 在看到跨域请求时似乎正在做一些特殊的处理。但是崩溃不可能在提示时重现，所以我们没有更多的事情要做。但如果这个理论是正确的，我知道一个合理的解决办法。

我希望有人对 Webkit 的内部有一定的了解并可以建议：

a) Webkit 堆栈跟踪对这一理论的支持程度如何？

b）我得到的堆栈跟踪是否有任何其他人可以看到的见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:22:38.110

我最终根据我上面描述的理论进行了代码更改。进行这些更改后，我没有看到崩溃再次发生。所以原来的理论看起来是正确的。

# session - 在 DynamoDB 会话中写入随机值

> ID：11587913
> 
> 赞同：0
> 
> 时间：2012-07-20T22:50:33.313
> 
> 标签：session, amazon-dynamodb

我正在尝试使用 DynamoDB 存储会话，但每次我尝试将整数写入会话变量时，都会写入一些其他随机值。

阅读正在正确进行。我不知道是什么问题？

有没有其他人遇到过类似的问题？？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:38:56.643

有什么代码可以分享吗？我怀疑它要么是 1) 数据类型，要么是 2) 与 DynamoDB 无关的代码的其他部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:06:08.577

就我而言，DynamoDB 没有问题。Zend Framework 在将其写入 dynamoDB 之前对我的会话做了一些有趣的事情。

# delphi - https 提交时出现 Indy 9 403 错误

> ID：11587914
> 
> 赞同：0
> 
> 时间：2012-07-20T22:50:49.053
> 
> 标签：delphi, delphi-7

在阅读了 403 错误的所有问题并尝试修复后，我仍然收到带有以下 URL 和代码的 403 错误。目录中存在两个 SSL DLL 文件，并且正在使用的文件 uploaddata.txt 位于工作目录中。它是 Delphi 7 和 Indy 9。

网址：

[https://mws.amazonservices.com/?AWSAccessKeyId=A](https://mws.amazonservices.com/?AWSAccessKeyId=A) ***&Action=SubmitFeed&FeedType=_POST_FLAT_FILE_INVLOADER_DATA_&Merchant=A*** &PurgeAndReplace=false&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-07-20T21%3A39%3A28Z&Version=2009-01-01&Signature=MRJFSuBsqdUE7SaoUFdXO5zY2YFOc4QjVxg0lOISSis%3D

`unit MWSDemo;`

 ````
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, HTTPApp, IdBaseComponent, IdComponent,
  IdTCPConnection, IdTCPClient, IdHTTP, IdIOHandler, IdIOHandlerSocket,
  IdSSLOpenSSL, IdServerIOHandler, IdAntiFreezeBase, IdAntiFreeze,
  IdMultipartFormData;

type
  TForm1 = class(TForm)
  Button1: TButton;
  HTTPS: TIdHTTP;
  IdAntiFreeze1: TIdAntiFreeze;
  IdServerIOHandlerSSL1: TIdServerIOHandlerSSL;
  IdSSLIOHandlerSocket1: TIdSSLIOHandlerSocket;
  Memo1: TMemo;
  procedure Button1Click(Sender: TObject);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}
uses hash, hmac, sha256, mem_util;

function GetMWSRequest : string;
var
  ctx: THMAC_Context;
   < more code here>
var
  UTC: TSystemTime;
begin
  GetSystemTime(UTC);
  AmazonTimestamp:=HTTPDecode(Format('%.2d', [UTC.wYear]) + '-' 
    + Format('%.2d',         [UTC.wMonth]) + '-' +  Format('%.2d', [UTC.wDay]) + 'T'
    + Format('%.2d', [UTC.wHour]) + ':' + Format('%.2d',  [UTC.wMinute]) + ':' + 
    Format('%.2d', [UTC.wSecond]) + 'Z');
  AmazonURL:='https://mws.amazonservices.com/?';
      < more code here>
  Result:=AmazonURL;
end;

procedure TForm1.Button1Click(Sender: TObject);
var URL, Response: string;
    Stream : TStringStream;
    Params: TIdMultipartFormDataStream;
begin
  URL := GetMWSRequest;
  HTTPS.Request.BasicAuthentication := true;
  HTTPS.Request.ContentType := 'text/html';
  IdSSLIOHandlerSocket1.SSLOptions.Method := TIdSSLVersion(sslvSSLv23);
  HTTPS.IOHandler := IdSSLIOHandlerSocket1;
  try
      Stream := TStringStream.Create('');
      Params := TIdMultipartFormDataStream.Create;
      Params.AddFile('File1', 'UploadData.txt','application/octet-stream');
    try
      HTTPS.Post(URL, Params, Stream);
      Memo2.Text := HTTPS.ResponseText;
    finally
      Stream.Free;
      Params.Free;
    end;
  except
       on E: Exception do
         ShowMessage('** Error: ' + e.Message);
  end;
end;

end. 
````  `谢谢你的帮助。我们两个人有这个问题，一个在美国，一个在英国

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:48:37.327

403 表示您正在尝试访问您无权访问的 URL。因此，要么您缺少必需的身份验证步骤，要么您提供的身份验证错误。`

# deployment - Capistrano - 如何部署到多个云服务器

> ID：11587915
> 
> 赞同：4
> 
> 时间：2012-07-20T22:51:25.393
> 
> 标签：deployment, amazon-web-services, capistrano, cloud-hosting, rackspace-cloud

我听说 Capistrano 支持部署到多个服务器，但我还没有找到一种实用的设置方法。当我说多台服务器时，我的意思是在生产环境中运行相同应用程序的服务器。如果这是我目前使用的，我随时都想部署到 5 或 10 台服务器。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T18:38:12.747

使用多台服务器是使用 capistrano 而不是手工操作的主要原因之一。

您的 deploy.rb 只需要定义应该在哪些服务器上执行哪些操作，这是通过设置哪些服务器属于哪些角色来完成的。您可以创建自己的角色，但内置 capistrano 配方要求您定义 3 个角色：

*   app：你的应用程序代码运行的地方
*   web：网络前端
*   db：运行迁移的位置

这 3 个同义词并不少见：如果您有一堆相同的服务器都运行 apache + 乘客，那么它们都是应用程序和 Web 服务器。其中之一需要被赋予 db 角色。

您在 deploy.rb 文件中定义角色。在最简单的情况下，这只是一个 IP 地址或主机名列表：

```
role :app, [192.168.1.1,192.168.1.2] 
```

它也可以是一个块。例如，在部署到 ec2 时，您可能会插入一个 api 调用来检索要部署到的服务器列表。我通常通过为服务器分配标签来做到这一点，在这种情况下你可能有

```
role :app do
  ec2.instances.tagged('app').map(&:ip_address)
end 
```

将该角色映射到带有 app 标签的 ec2 实例（capistrano 缓存此信息并且只会执行一次您的块）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T17:05:07.473

我不得不对 Rails 4 使用不同的语法。

```
role :app, %w{s01.app.com s02.app.com}
role :web, %w{s01.web.com s02.web.com} 
```

# xml - sed one-liner - 查找关键字周围的分隔符对

> ID：11587919
> 
> 赞同：2
> 
> 时间：2012-07-20T22:51:48.770
> 
> 标签：xml, bash, sed, grep

我通常使用大型 XML 文件，并且通常通过字数`grep`来确认某些统计数据。

例如，我想通过以下方式确保`widget`在一个 xml 文件中至少有五个实例：

```
cat test.xml | grep -ic widget 
```

此外，我只是希望能够记录`widget`出现的行，即：

```
cat test.xml | grep -i widget > ~/log.txt 
```

但是，我真正需要的关键信息是出现在其中的 XML 代码块`widget`。示例文件可能如下所示：

```
<test> blah blah
  blah blah blah
  widget
  blah blah blah
</test>

<formula>
  blah
  <details> 
    widget
  </details>
</formula> 
```

我试图从上面的示例文本中获取以下输出，即：

```
<test>widget</test>

<formula>widget</formula> 
```

实际上，我试图获得具有最高级别标记标签的单行，这些标记标签适用于围绕任意字符串的 XML 文本/代码块，`widget`.

有没有人有任何建议通过命令行一个班轮实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T23:56:51.427

`sed`一种同时使用and的非优雅方式`awk`：

```
sed -ne '/[Ww][Ii][Dd][Gg][Ee][Tt]/,/^<\// {//p}' file.txt | awk 'NR%2==1 { sub(/^[ \t]+/, ""); search = $0 } NR%2==0 { end = $0; sub(/^<\//, "<"); printf "%s%s%s\n", $0, search, end }' 
```

结果：

```
<test>widget</test>
<formula>widget</formula> 
```

解释：

```
## The sed pipe:

sed -ne '/[Ww][Ii][Dd][Gg][Ee][Tt]/,/^<\// {//p}'
## This finds the widget pattern, ignoring case, then finds the last, 
## highest level markup tag (these must match the start of the line)
## Ultimately, this prints two lines for each pattern match

## Now the awk pipe:

NR%2==1 { sub(/^[ \t]+/, ""); search = $0 }
## This takes the first line (the widget pattern) and removes leading
## whitespace, saving the pattern in 'search'

NR%2==0 { end = $0; sub(/^<\//, "<"); printf "%s%s%s\n", $0, search, end }
## This finds the next line (which is even), and stores the markup tag in 'end'
## We then remove the slash from this tag and print it, the widget pattern, and
## the saved markup tag 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T05:17:57.933

```
 sed -nr '/^(<[^>]*>).*/{s//\1/;h};/widget/{g;p}' test.xml 
```

印刷

```
<test>
<formula> 
```

如果打印您想要的确切格式，则 Sed only one-liner 会更复杂。

**编辑：**
您可以在 gnu sed 中使用`/widget/I`而不是`/widget/`不区分大小写的匹配，否则就像在其他答案中一样使用每个字母。`widget``[Ww]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T08:40:43.023

这可能对你有用（GUN sed）：

```
sed '/^<[^/]/!d;:a;/^<\([^>]*>\).*<\/\1/!{$!N;ba};/^<\([^>]*>\).*\(widget\).*<\/\1/s//<\1\2<\/\1/p;d' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T18:41:35.713

需要`gawk`有正则表达式`RS`

```
BEGIN {
    # make a stream of words
    RS="(\n| )"
}

# match </tag>
/<\// {
    s--
    next
}

# match <tag>
/</ {
    if (!s) {
    tag=substr($0, 2)
    }
    s++
}

$0=="widget" {
    print "<" tag $0 "</" tag
} 
```

# c - 从循环复制到变量 c

> ID：11587921
> 
> 赞同：0
> 
> 时间：2012-07-20T22:51:59.360
> 
> 标签：c, loops

我正在使用此代码来读取结果缓冲区。我的问题只是如何将显示十六进制字符的 C 值复制到一个新字符串中，我可以在 for 循环结束时将其打印出来。

```
for (long i=1; i<sizeof(buffer); i++)  //for all chars in string
{
     unsigned char c = buffer[i];

     switch (Format)
     {
          case 2:         //hex
          printf("%02x",c);
          break;
          case 1:         //asc
          printf("%c",c); // want to copy c to a varriable  byte by byte 
          break;
     }  //end of switch format
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:09:05.573

如果我理解正确，这就是您需要的：

```
#include <stdio.h>
#include <string.h>

int main() {
  long i;
  int Format = 2;
  char buffer[20] = "Test string";
  char result[60] = "";
  for (i=0; i<sizeof(buffer); i++)  //for all chars in string
  {
    unsigned char c = buffer[i];
    char* printf_format;
    switch (Format) {
      case 2:         //hex
        printf_format = "%02x";
      break;
      case 1:         //asc
        printf_format = "%c";
      break;
    }  //end of switch format
    sprintf(result + strlen(result), printf_format, c);
  } 
  printf("result: %s\n", result); 

} 
```

这`result + strlen(result)`是一个指向字符串末尾的指针。所以`sprintf`会写到最后。请注意，您必须弄清楚输出字符串可以有多长并分配足够的内存来保存它。另请注意，`i`循环中的第一个值应该是 0 而不是 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:08:56.307

```
char *printit(char *buffer, long buflen)
{
   char out[512];
   int offset=0;

   for (long i=1; i<buflen; i++)
   {
     int l = snprintf(out+offset, sizeof(out)-offset, Format==1?"%c":"%02x", buffer[i]);
     if (l > sizeof(out)-offset)
     {
       fprintf(stderr, "Output buffer insufficiently large\n");
       return(NULL);
     }
     offset += l-1;
   }
   return(strdup(out));
 } 
```

请注意，在您的问题代码中，您正在跳过缓冲区的第一个字符。isprint() 可能是一个比你神秘的 Format 变量更好的函数。

# matlab - 姿态估计

> ID：11587925
> 
> 赞同：2
> 
> 时间：2012-07-20T22:52:38.173
> 
> 标签：matlab, 3d, camera-calibration, perspectivecamera

在您的帮助下，我已经能够使用 CvPosit 来估计相机姿势（使用此链接[http://www.aforgenet.com/articles/posit/](http://www.aforgenet.com/articles/posit/)）。我正在使用 MATLAB 代码。

现在我希望通过在图像坐标上投影 3D 点来验证该姿势。详细情况如下：

1.  假设立方体的图像点和世界点是：

    ```
    World Points=[28 28 -28;-28 28 -28;28 -28 -28, 28 28 28]
    Image_Points=[-4 29;-180 86;-5 -102;76 137]; 
    ```

2.  得到的Pose为：

    ```
    Pose =[0.896 0.0101 0.4439 -13.9708;-0.3031 0.7127 0.6326 13.7039;-0.3100 -0.701 0.6416 164.5663;0 0 0 1]; 
    ```

    在我的示例中，我使用 640 作为焦距。现在从这个姿势开始，我想使用一个 3D 点并将其投影回来以获得 2D 图像点。理想情况下，我应该得到同样的观点。但我无法得到它。我在 MATLAB 中使用以下方式：

3.  比方说`P = [28;28;28;28;1] % 4 X 1 matrix for a 3D point`

    ```
    P_Camera= Pose *  P;  

    Calibration Matrix (K)=[640 0 0 0;0 640 0 0;0 0 1 0;0 0 0 1];

    Image Points= P_Camera*K; 
    ```

    我得到`x = 15251`和`y = 27447`。我不知道我在这里做错了什么。请帮帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:03:57.473

相机位姿或相机外在参数由旋转 R 和平移 t 组成。我相信您的 Pose 矩阵实际上是`[R t; [0 0 0 1]]`. 要将 3D 均匀点 (4x1) 转换为相机坐标，您需要：

```
Xcam = K*[R t]*Xworld 
```

其中 K 是 3x3[相机矩阵](http://en.wikipedia.org/wiki/Camera_matrix)，包含相机内在（内部）参数。如果您将 K 设置为：

```
K =

3.3202         0   -0.0229
     0    3.3202    0.0153
     0         0    1.0000 
```

你会得到一个接近的答案（这个 K 不适合你的 F=640 的数据，但它是具有输入点和姿势的 LS 解决方案）。不过还是有一些错误。尝试校准您的相机并考虑光学失真（这里有一个很好的 Matlab 相机校准 [工具箱](http://www.vision.caltech.edu/bouguetj/calib_doc/)。

# java - Android ActionBarSherlock 选项卡：片段视图

> ID：11587931
> 
> 赞同：0
> 
> 时间：2012-07-20T22:53:38.823
> 
> 标签：java, android, actionbarsherlock

我对 ActionBarSherlock 的片段和视图有疑问：

我已经成功实现了 2 个选项卡，这些选项卡打开了我的片段视图。

```
public class AFragment extends SherlockFragment {

private ImageButton imageButton1;
private ImageButton imageButton2;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    return inflater.inflate(R.layout.activity_afragment, container, false);

}
} 
```

这是我的代码，布局显示一个 TextView 和 2 个 ImageButtons。我想像 imagebutton = (ImageButton) findViewById(R.id.imagebutton1); 这样声明图像按钮 但这给了我一个 findViewById 错误。我尝试了 AFragment Activity 中的每个位置，但仍然存在相同的错误。我还尝试添加一个 OnCreate 函数，但这也不起作用......那么我需要将我的代码放在哪里才能使该视图工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:06:04.110

你应该声明一个包含你的视图的变量，做你想要的声明和修改，然后返回视图

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    View v = inflater.inflate(R.layout.activity_afragment, container, false);
    ImageButton imageButton = (ImageButton) v.findViewById(R.id.imagebutton1); 
    return v;

} 
```

# c++ - [ 毫 | 微 | nano ] 秒粒度使用 tv_usec 或 tv_nsec

> ID：11587940
> 
> 赞同：2
> 
> 时间：2012-07-20T22:55:08.937
> 
> 标签：c++

我正在做一个项目，我需要比整秒更精细的粒度（即 time()）。我正在浏览 opengroup.org，我注意到有成员 tv_usec 和 tv_nsec 的数据结构。

```
#include <stdio.h>
#include <time.h>

int main (void) {
      struct timespec ts;
      clock_gettime(CLOCK_REALTIME, &ts);
      printf("%lis %lins\n", ts.tv_sec, ts.tv_nsec);

      return 0;
}

test.cpp(5) : error C2079: 'ts' uses undefined struct 'main::timespec'
test.cpp(6) : error C2065: 'CLOCK_REALTIME' : undeclared identifier
test.cpp(6) : error C3861: 'clock_gettime': identifier not found 
```

有没有一种简单的方法可以通过使用标准库来获得高精度的时间值？我实际上并不需要高精度，但我确实需要相对时间的增量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:58:23.893

在 C++11 中，`#include <chrono>`并使用[`std::chrono::high_resolution_clock`](http://en.cppreference.com/w/cpp/chrono/high_resolution_clock)（也可从[Boost](http://www.boost.org/libs/chrono/)获得）。

在 Posix 中，您可以使用[`gettimeofday`](http://pubs.opengroup.org/onlinepubs/009604599/functions/gettimeofday.html)获取微秒时间戳或[`clock_gettime`](http://linux.die.net/man/3/clock_gettime)纳秒分辨率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:14:53.037

看看我为分析编写的以下代码。在那里你会发现在 linux 环境中调用 ns 时间戳。对于另一个环境，您可能需要替换 CLOCK_MONOTONIC

```
#ifndef PROFILER_H
#define PROFILER_H

#include <sys/time.h>
#include <QString>

class Profiler
{
  public:
    Profiler(QString const& name);
    long measure() const;

    long measureNs() const;
    double measureMs() const;
    double measureS() const;
    void printNs() const;
    void printMs() const;
    void printS() const;
  private:
    QString mName;
    timespec mTime;
};

#endif // PROFILER_H

#include "profiler.h"
#include <QDebug>
#include <assert.h>
#include <iostream>

Profiler::Profiler(QString const& name):mName(name){
  clock_gettime(CLOCK_MONOTONIC, &mTime); // Works on Linux
}

long int Profiler::measureNs() const{
  timespec end;
  clock_gettime(CLOCK_MONOTONIC, &end); // Works on Linux 
  long int diff = (end.tv_sec-mTime.tv_sec) * 1000000000 + (end.tv_nsec - mTime.tv_nsec);
  assert(diff>0);
  return diff;
}

double Profiler::measureMs() const{
  return measureNs()/1000000.0;
}

double Profiler::measureS() const{
  return measureMs()/1000.0;
}

void Profiler::printNs() const{
  qDebug() << mName << "Time elapsed:" << measureNs() << "ns";
}

void Profiler::printMs() const{
  qDebug() << mName << "Time elapsed:" << measureMs() << "ms";
}

void Profiler::printS() const{
  qDebug() << mName << "Time elapsed:" << measureS() << "S";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T01:59:35.423

感谢所有给出答案的人，这里是 LINUX/UNIX 答案的 Windows 等价物......

```
#include <stdio.h>
#include <windows.h>

int main (void) {
SYSTEMTIME st;
GetSystemTime(&st);
printf("%lis %lins\n", st.wSecond, st.wMilliseconds);

return 0;
} 
```

编辑：您可能还想检查 GetTickCount()，但我认为它需要 CPU 成本。

# list - 根据规则将元素添加到列表中？

> ID：11587948
> 
> 赞同：0
> 
> 时间：2012-07-20T22:55:36.550
> 
> 标签：list

我知道它允许编写许多事实并创建一个可能性树 - 是否可以这样做：

我想根据规则返回真还是假来为列表添加值？

有人可以给我看一些可以解释这一点的小代码吗？

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:30:28.243

假设您要生成一个包含所有凡人的列表。可以使用以下代码完成：

```
% facts  
human(victor).
human(peroni).
human(hugo).

% rule
mortal(X) :-
        human(X).

% add X to a list only if rule mortal(X) is true.
add(X,L,[X|L]) :-
        mortal(X). 
```

**例子**

```
? add( victor, [hugo], Result).
Result = [victor, hugo].

? add( peroni, [], Result).
Result = [peroni]. 
```

# jquery - jQuery - 防止动画在没有验证的情况下重复（simplecart js）

> ID：11587951
> 
> 赞同：0
> 
> 时间：2012-07-20T22:56:05.293
> 
> 标签：jquery, animation, jquery-animate

我是 jQuery 的新手，如果答案是基本的，我深表歉意。

我正在尝试为我自己的网站开发一个 simplecart js 架子。在将商品添加到购物车之前，必须选择（产品的）尺寸。添加到购物车后，商品会飞入。之后即使没有选择商品尺寸，商品也会执行飞行动画。

我想让它只在选择尺寸选项时才会出现动画（并且最好只在单击“添加到购物车”链接时出现）。

[这是我到目前为止所拥有的](http://peaknature.co.uk/cart)

使用 jQuery：

```
// Items flys to cart
    $(".tooltip .item_add").click(function(){
        $(".simpleCart_shelfItem").click(function(){
            var clone = $(this).clone(),
            position = $(this).position(),
            bezier_params = {
            start: {
              x: position.left,
              y: 0, 
              angle: -90
            },  
            end: { 
              x:470,
              y:-100, 
              angle: 180,
              length: .2
            }
          };

        clone.appendTo('.shelf');
        clone.find('.tooltip').hide();
        clone.addClass('addDemoAnimation');
        clone.animate({path : new $.path.bezier(bezier_params)}, 600);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:24:38.680

[看看这个小提琴](http://jsfiddle.net/GLVNp/4/)。你想要沿着这条线的东西吗

```
$(".tooltip .item_add").click(function() {
        var tooltip = $('.item_add').closest('.tooltip');
        if($('select',tooltip ).val()!='Select Size'){
            var clone = $('.simpleCart_shelfItem').clone(),
                position = $(this).position(),
                bezier_params = {
                    start: {
                        x: position.left,
                        y: 0,
                        angle: -90
                    },
                    end: {
                        x: 470,
                        y: -100,
                        angle: 180,
                        length: .2
                    }
                };

            clone.appendTo('.shelf');
            clone.find('.tooltip').hide();
            clone.addClass('addDemoAnimation');
            clone.animate({
                path: new $.path.bezier(bezier_params)
            }, 600);
        }
    }); 
```

# nosql - 获取在指定时间之前开始和在指定时间之后结束的 CouchDB 文档

> ID：11587954
> 
> 赞同：2
> 
> 时间：2012-07-20T22:56:17.803
> 
> 标签：nosql, couchdb

我有一大堆文档，其中包含*"startDate"*和*"endDate"*。

我的问题是我正在尝试创建一个可以获取日期并返回在指定时间之前具有*startDate*以及在指定时间之后具有*endDate*的所有文档的视图。如果两个时间戳都在指定时间之前或之后，我不希望它们被返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:23:32.410

这听起来需要 2 次查找，因此您不妨制作 2 个视图（start_date_view、end_date_view），使用有意义的 startKey= 和 endKey= 查询两个视图，然后过滤结果。据我所知，couchDB 无法制作可以按照您想要的方式查询的视图。couchDB 中的视图相当简单。

# drupal - Drupal 7\. 动态节点分类

> ID：11587960
> 
> 赞同：0
> 
> 时间：2012-07-20T22:56:54.543
> 
> 标签：drupal, drupal-7, taxonomy

假设我使用分类法。

词汇表 1 包含涉及产品类别（categories）的术语。

词汇 2 包含有关产品输出功率（输出功率）的术语。

所有产品都属于一个类别，但并非所有产品都属于一个尺寸。

尺寸除了是一个完整的词汇表之外，还是一个产品属性，如果选择了某个类别，则应该激活该属性。（例如：选择“汽车音响”将给出“输出功率”选项。选择“上网本”不会触发该属性，而是会触发其他一些“屏幕分辨率”。）

如何实现？（使用或不使用分类法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:21:09.623

您可以尝试[条件字段模块](http://drupal.org/project/conditional_fields)。

> 条件字段允许您管理字段之间的依赖项集。当一个字段是“依赖”时，只有当“依赖”字段的状态匹配正确的条件时，它才可用于编辑和显示。

# html - Dojox 图表标签中的 Javascript 字符串、HTML 和字符实体

> ID：11587961
> 
> 赞同：1
> 
> 时间：2012-07-20T22:57:00.727
> 
> 标签：html, string, charts, label, dojo

我正在尝试在 dojox 图表饼图标签字符串中使用 HTML

```
text: 'hello<span class="custom">^_^</span>world' 
```

在饼图标签字符串上使用 chrome 检查器，输出为

```
<div>
  "hello"
  <span&nbsp;class="custom">^_^world</span&nbsp;class="custom">
</div> 
```

所以很明显 span 标签不起作用，因为出于某种原因，它决定取消空间实体的转义并将标签也包裹在“世界”周围。

这是非常奇怪和意想不到的行为，我想听听任何可能知道这里发生了什么的人。

谢谢，

aylz5073

# javascript - 用 (function() { ... }).call(this) 包装文件与用简单的 () 调用

> ID：11587963
> 
> 赞同：7
> 
> 时间：2012-07-20T22:57:07.727
> 
> 标签：javascript

主干.js 源代码使用这样的函数包装器：

```
(function(){
    ...
}).call(this); 
```

如[http://backbonejs.org/docs/backbone.html#section-185](http://backbonejs.org/docs/backbone.html#section-185)所示。

更常见的是，我看到使用以下内容：

```
(function(){
    ...
})(); 
```

这两者的行为何时不同？我的印象是它们是等价的，但我认为肯定存在差异，因为 Backbone 使用`.call(this)`的是较短的替代方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T22:59:13.247

在第一个示例中，`this`函数内部将`this`来自调用范围。

在第二个例子中，`this`将是`window`。

（正如 Šime Vidas 所指出的，它`undefined`处于严格模式，而不是`window`.）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T22:59:22.957

第`this`一个在函数中与调用时在作用域中相同，第二个 this 将引用窗口对象。

# java - Java Apache Commons FileUTIL CopyDirectory 异常

> ID：11587976
> 
> 赞同：0
> 
> 时间：2012-07-20T22:59:05.233
> 
> 标签：java, io, apache-commons, fileutils

我正在尝试使用 Apache Common 的 FileUtil 来使用 CopyDirectory 将文件传输到其他磁盘上。但是，在传输“我的文档”时出现错误。另外，我不知道为什么，但是当我选择像 C:\Users[UserName]\Documents 这样的特定路径时，它不会只给我 Documents 中的内容，而是给我用户文件夹中的其他一些文件夹。 .我不知道这是为什么。当我在 MyDocuments 上运行 CopyDirectory 时，我也会出现 IOException ......当它试图复制 MyMusic 时（我不知道它为什么首先这样做。

在我的代码中，它体面地复制了收藏夹和桌面......尽管它似乎已将收藏夹“收藏夹工具栏”中的文件夹更改为“链接”文件夹。

任何帮助都会很棒。谢谢！

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import org.apache.commons.io.*;

public class TransferJet {
public static BufferedReader in = new BufferedReader(new InputStreamReader(System.in)); 
public static void main(String[] args) throws IOException {

        System.out.print("Please enter the username:");
        String user = in.readLine();

        System.out.print("Please enter the drive letter of the old primary partition:");
        String oldPrimaryLetter = in.readLine();
        System.out.print("Please enter the drive letter of the old secondary partition:");
        String oldSecondaryLetter = in.readLine();

        System.out.print("Please enter the drive letter of the new primary partition:");
        String newPrimaryLetter = in.readLine();
        System.out.print("Please enter the driver letter of the new secondary partition:");
        String newSecondaryLetter = in.readLine();

        if(user.equals("") || oldSecondaryLetter.equals("") || oldPrimaryLetter.equals("") || newPrimaryLetter.equals("") || newSecondaryLetter.equals(""))
        {
            System.out.println("Invalid directory or file name.");
            System.exit(0);
        }

        String newFiles = "";
        String oldFiles = "";
        File source = null;
        File destination = null;

        System.out.println("Moving Favorites...");
        oldFiles = oldPrimaryLetter + ":\\Users\\" + user + "\\Favorites";
        //String oldFilesA = "C:\\Users\\ashih\\Favorites";
        //String newFilesA = "G:\\Users\\ashih\\Favorites";
        newFiles = newPrimaryLetter + ":\\Users\\" + user + "\\Favorites";
        source = new File(oldFiles);
        destination = new File(newFiles);
        FileUtils.copyDirectory(source, destination);

        System.out.println("Moving Desktop...");
        oldFiles = oldPrimaryLetter + ":\\Users\\" + user + "\\Desktop";
        newFiles = newPrimaryLetter + ":\\Users\\" + user + "\\Desktop";
        source = new File(oldFiles);
        destination = new File(newFiles);
        FileUtils.copyDirectory(source, destination);

        System.out.println("Moving My Documents...");
        oldFiles = oldPrimaryLetter + ":\\Users\\" + user + "\\";
        newFiles = newPrimaryLetter + ":\\Users\\" + user + "\\Documents";
        source = new File(oldFiles);
        destination = new File(newFiles);
        FileUtils.copyDirectory(source, destination);

        System.out.println("Moving Old Secondary to New Secondary...");
        oldFiles = oldSecondaryLetter + ":\\";
        newFiles = newSecondaryLetter + ":\\";
        source = new File(oldFiles);
        destination = new File(newFiles);
        FileUtils.copyDirectory(source, destination);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:39:37.240

该行：

```
oldFiles = oldPrimaryLetter + ":\\Users\\" + user + "\\";
newFiles = newPrimaryLetter + ":\\Users\\" + user + "\\Documents"; 
```

看起来不对，应该是

```
oldFiles = oldPrimaryLetter + ":\\Users\\" + user + "\\Documents";
newFiles = newPrimaryLetter + ":\\Users\\" + user + "\\Documents"; 
```

这至少可以解释你为什么要复制音乐：P

我做了一个快速测试，可以复制这个问题。当我查看目录列表时，我发现

```
20/12/2010  06:56 PM    <JUNCTION>     My Music [C:\Users\swhitehead\Music]
20/12/2010  06:56 PM    <JUNCTION>     My Pictures [C:\Users\swhitehead\Pictures]
20/12/2010  06:56 PM    <JUNCTION>     My Videos [C:\Users\swhitehead\Videos] 
```

是“隐藏”的 JUNCTION 文件夹。当我要求 Apache commons-io 列出文档文件夹的内容时，这些文件夹在哪里丢失。

我需要对源进行检查以了解更多信息

**更新** 我做了更多的测试。Java 似乎无法处理 JUNCTIONS（或就此而言的捷径）。Commons-IO 抛出异常，因为当它试图列出“我的音乐”目录中的内容时，它返回一个空值。

我做了这个快速测试来尝试一下：

```
 File myMusic = new File(oldFiles + File.separator + "My Music");
    System.out.println(myMusic);
    System.out.println(myMusic.isDirectory());
    System.out.println(myMusic.isAbsolute());
    System.out.println(myMusic.isHidden());
    System.out.println(myMusic.getCanonicalFile());
    System.out.println(myMusic.getAbsoluteFile());

    File[] lstFiles = myMusic.listFiles();
    if (lstFiles == null) {

        System.out.println("Can not list...");

    } else {

        for (File file : lstFiles) {

            System.out.println(file);

        }

    } 
```

它每次都会打印“无法列出...”。

至于解决方案...您可以要求提供文件列表（我们已经看到这至少有效），然后使用该`FileUtils.copyFile`方法单独复制每个文件，但这会留下一些文件（也意味着破坏否则将可用的链接）。

我能想到的让你（以某种方式）保持这种功能的唯一方法是执行一个操作系统进程来完成工作（重新创建连接和/或列出它们）

# ruby-on-rails - 在所有载波上传的图像上未找到生产中的载波 404

> ID：11587982
> 
> 赞同：3
> 
> 时间：2012-07-20T23:00:28.543
> 
> 标签：ruby-on-rails, upload, http-status-code-404, carrierwave

我使用载波将资产上传到我的应用程序，它们存储在 /public/uploads/photos/file/user_id/user_id.jpg 以保持简单。

只有在生产中，所有这些图像我都会得到 404。我尝试了 chmod 777 uploads -R * 作为最后的手段，但这没有帮助。

我是否必须设置一些我在这里缺少的东西才能使它工作，因为这些资产在资产管道之外？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T11:37:06.027

解决方案：

必须在 /environments/production.rb 中设置

```
 config.serve_static_assets = true 
```

# php - php如何在分配给变量时捕获异常

> ID：11587983
> 
> 赞同：0
> 
> 时间：2012-07-20T23:00:30.237
> 
> 标签：php, exception-handling

我的代码中有一些类。从这些类中，我启动对象，比如说

```
$c = new category ($myGoodObject->categoryId); 
```

这应该给出 myGoodObject 的类别对象。但是，例如，如果在数据库中没有定义 1000 的 categoryId，则该类将引发异常。

我怎么抓住这个？从有时可能不存在的数据库中启动/加载对象的最佳实践是什么？如何避免失败？

谢谢！

编辑：

我试过这个：

```
try {
$c = new category (1000);
} catch (Exception $e) {return false;} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:03:06.497

```
try
{
    $c = new category ($myGoodObject->categoryId); 
} 
catch (Exception $e) 
{
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

至于最佳实践，您应该首先尝试读取数据库以查看该值是否存在，如果不存在，则不要尝试创建对象，从而避免需要异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T23:03:39.863

如果它引发异常，请使用 try..catch 块

```
try {
   //try assigning 
catch (Exception $e) {
   //do something
} 
```

[在此处](http://php.net/manual/en/language.exceptions.php)查看有关异常的更多详细信息

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T23:04:46.590

不要抓住它，在使用它之前确保它在那里......

```
if(isset($myGoodObject->categoryId)){
    $c = new category ($myGoodObject->categoryId); 
    //...
} 
```

# iphone - UIwindow 向我返回一个高度和宽度不正确的框架

> ID：11587985
> 
> 赞同：0
> 
> 时间：2012-07-20T23:00:36.133
> 
> 标签：iphone, ipad, uiview, uiviewcontroller

我正在运行一个带有示例视图控制器的测试程序。在我的应用委托中，我有以下内容

```
- (BOOL)应用程序:(UIApplication *)应用程序 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
NSLog(@"窗口框架 %@",NSStringFromCGRect(self.window.frame));
}

```

输出为窗口框架 {{0, 0}, {768, 1024}}。我的设备处于横向模式，但窗口框架返回一个交换的 width 和 height 值。

因此，我无法使用硬编码值放置我的视图组件。任何线索出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:06:59.073

您正在尝试在调用此函数之前获取视图的大小...

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

这只会在之后被调用

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

退出。您是否有理由需要在此函数内部执行此操作？我会尝试在您的 UIViewControllers viewDidLoad 函数中执行此操作。

希望这可以帮助 ：）

# jfreechart - JFreechart - 想要自定义 Y 轴值

> ID：11587987
> 
> 赞同：0
> 
> 时间：2012-07-20T23:01:30.203
> 
> 标签：jfreechart

例如，折线图上的 Y 轴值范围从 645,000 到 667,500。我希望能够为该值添加单位，例如 645K，以缩短图例的长度。

我看过一个类似的问题，但给出的答案没有提供完整的代码，也不是很有帮助。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:59:52.317

您可以使用[`setNumberFormatOverride()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/NumberAxis.html#setNumberFormatOverride-java.text.NumberFormat-)并传入一个合适的`NumberFormat`，例如[这里](https://stackoverflow.com/a/529476/230513)显示的一个`MILLIONS`。

```
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
rangeAxis.setNumberFormatOverride(new NumberFormat(){…}); 
```

# c++ - 使用广义霍夫变换比较任意形状

> ID：11587992
> 
> 赞同：2
> 
> 时间：2012-07-20T23:02:25.153
> 
> 标签：c++, image-processing, opencv, hough-transform

我正在使用广义霍夫变换来区分各种任意形状。我将要处理的几个形状如下所示：http: [//i50.tinypic.com/2u550t5.png](http://i50.tinypic.com/2u550t5.png)

我已成功实施以下步骤：

**A) 转换/训练阶段**

**i)**获取二值图像的阈值 **ii)**使用 cvFindContour 获取轮廓 **iii)**计算每个边缘像素的距离“r”和梯度方向 (phi) **iv)**创建 R 表

为每个形状创建一个 R 表数据库

**B) 认可**

**i)**获取任意形状的轮廓 **ii)**计算每个边缘像素的梯度方向 **iii)**使用 R-table，构建累加器

我的问题是如何进一步进行？

如何使用此累加器数据检测形状？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:48:26.577

基本上，一旦你有了累加器图像，你就必须找到其中的峰值，即“投票”数量最多的像素（或单元格），大致来说，峰值应该代表你的形状的位置。

关于广义霍夫教程有很多教程，我喜欢 M. Ulrich 的论文[“图像中复合对象的分层实时识别”](http://tumb1.biblio.tu-muenchen.de/publ/diss/bv/2003/ulrich.pdf)中包含的教程，其中图 4.3、4.4 和 4.5 清楚地说明了主题。

# ios - 使用 ASIHTTPRequest 和 MKNetworkKit 对服务器进行身份验证的间歇性 SSL 失败

> ID：11587993
> 
> 赞同：2
> 
> 时间：2012-07-20T23:02:30.927
> 
> 标签：ios, ssl, asihttprequest, mknetworkkit

我正在开发一个 iOS 应用程序，当我尝试访问我们 API 服务器上的一些 API 时，我遇到了间歇性 SSL 故障。故障不会一直发生，但它们发生的次数足以成为一个重大问题。发生 SSL 故障时，报告的错误代码是 errSSLCrypto，或“基础加密错误”(-9809)。当应用程序尝试登录时，我大多会看到这些问题，但有时在访问其他 API 时会看到。

该应用程序是使用 ASIHTTPRequest 编写的，这里是构造登录请求的代码：

```
ASIFormDataRequest *loginFormDataRequest = [[ASIFormDataRequest alloc] initWithURL:...];
loginFormDataRequest.timeOutSeconds = 30.0f; // Included in an attempt to fix timeout problems
loginFormDataRequest.shouldAttemptPersistentConnection = NO; // Included in an attempt to fix timeout problems
[loginFormDataRequest addPostValue:self.username forKey:@"username"];
[loginFormDataRequest addPostValue:self.password forKey:@"password"];
[loginFormDataRequest addPostValue:@"1" forKey:@"applogin"];
loginFormDataRequest.delegate = self;
[loginFormDataRequest setDidFinishSelector:@selector(didFinishLoginFormDataRequest:)];
[loginFormDataRequest setDidFailSelector:@selector(didFailLoginFormDataRequest:)];
[loginFormDataRequest startAsynchronous]; 
```

很简单。

我已经更新了 ASIHTTPRequest 以响应 Apple 的[技术说明 TN2287](http://developer.apple.com/library/ios/#technotes/tn2287/_index.html "技术说明 TN2287")，但这并没有帮助。也没有将`validatesSecureCertificate`属性设置为`NO`.

与服务器的加密连接似乎检查正常。铬 说：

*   您与 [服务器] 的连接使用 256 位加密进行加密。
*   该连接使用 TLS 1.0。
*   连接使用 CAMELLIA_256_CBC 加密，使用 SHA1 进行消息认证，使用 DHE_RSA 作为密钥交换机制。
*   连接使用 DEFLATE 压缩。

正在使用 https 在端口 442 上联系服务器。我还尝试使用 MKNetworkKit 实现此登录代码，但我仍然间歇性地看到 SSL 错误，所以我认为问题不在于 ASIHTTPRequest。

我没有想法，所以我会感谢任何人可能有的任何见解。在此先感谢您的帮助！