# StackOverflow 问答 000821000-000821999

# ruby-on-rails - 我应该为所有控制器逻辑都存在于视图中的 Rails 应用程序使用 .erb 或 .rhtml 文件吗？

> ID：821010
> 
> 赞同：3
> 
> 时间：2009-05-04T17:18:51.633
> 
> 标签：ruby-on-rails, ruby, controller, views

我刚开始学习Rails。我创建了一个空的 Rails 应用程序。而不是写一个控制器，我想把我所有的控制器逻辑放在我的视图中，而不是放在单独的控制器类中。

为此，我应该使用 .erb 文件还是 .rhtml 文件，有什么区别？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-04T17:21:39.070

首先，它们实际上是相同的，但您应该使用新的标准命名格式 .html.erb

其次，**停止你正在做的事情并重新考虑一切！！！！！！！**

MVC 的重点是将逻辑与显示分开，反之亦然。您的大部分逻辑都应该在您的模型中，控制器应该只是方便抓取该逻辑并将其传递给您的视图。

除了显示数据之外，您不应在视图中执行任何操作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-05T03:21:49.780

“一位客户要求我建造和安装一个定制的搁架系统。我正处于需要钉钉子的地步，但我不确定用什么来钉钉子。

我应该使用旧鞋还是玻璃瓶？

在你的情况下，我会选择[玻璃瓶](http://weblogs.asp.net/alex_papadimoulis/archive/2005/05/25/408925.aspx)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-04T17:35:54.370

在新的 rails 3.0 .rhtml 文件将不受支持。.html.erb 是新标准。

我知道你有一个小应用程序，标准并不真正适用于你，但这就是 MVC 的全部意义所在。逻辑应该进入控制器/模型，并且视图严格用于呈现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-05T02:41:17.960

您的问题的简单答案是否定的。不，您不应该将控制器逻辑放在视图中。如果您不需要控制器，那么您可能不需要导轨。我知道这不是你想要的答案，但坦率地说，你错了，纯粹而简单。如果你想学习 Rails 框架，那么这里告诉你的是正确的，按照你的方式去做就意味着要么忘记你刚刚做过的事情，要么就意味着成为一个糟糕的开发人员。

事情就是这样，剩下的就看你自己了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T18:51:39.913

是的，您是正确的，rails 的创建者从未说过您不应该将 rails 用于较小的应用程序，但他们一遍又一遍地说明了控制器的重要性。

*我创建了一个空的 Rails 应用程序。而不是写一个控制器，我想把我所有的控制器逻辑放在我的视图中，而不是放在单独的控制器类中。*

只是出于好奇，您正在考虑将哪种逻辑纳入您的观点？如果是表示逻辑，那是一回事，但如果是业务规则，从数据库、xml 文件、基于 web 服务/rest 加载数据，那么你就违反了 rails 的核心原则。听说过 ASP（经典活动服务器页面）吗？框架已经超越了这一点，以克服像 ASP 这样的缺点和陷阱，让您不要混合表示和代码。如果你把它们都塞在一起，你将如何对你的代码进行单元测试？Rails 的另一个关键原则就是为什么它与其他 Web 框架不同，它内置于框架本身中。

*我想学习如何使用“标准”Ruby 框架*

在您的回复中，您一直提到您想学习标准的 Ruby 框架？如果是这种情况，为什么不使用 irb 呢？Rails 不是标准 Ruby 框架的一部分。事实上，你可能会使用 irb 了解更多关于 Ruby 的知识，然后再使用 Rails。一旦你熟悉了 Ruby，就开始学习吧。

我同意其他人的观点，如果您打算花时间学习一个框架，那么请按照创建者的意图正确地学习它，否则您会错过重点，并且您不会明白为什么 Rails 是一个如此好的 Web 框架开始和。您希望完成的工作可以通过多种 Web 技术完成：ASP、ASP.Net、PHP、JSP、Perl，但您选择学习 Ruby 和 rails，因此不会像在任何其他网络技术。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-08-25T13:03:05.790

坚持 MVC 是继续构建应用程序的方式。如果您不确定为什么需要控制器，请进行研究。我面临着维护代码，其中脚本嵌入在表示层中。如果没有彻底了解正确的、经过时间考验的方法，就开始任何工程工作是可笑的。这就像试图在没有地基或蓝图的情况下建造房屋。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-20T19:07:03.120

真的没什么。这只是 Rails 1 和 Rails 2 之间理念的改变。在 Rails 2 之前，你有 file.rhtml、file.rxml 和 file.rjs。在 Rails 中，它更改为 file.content_type.template_engine。所以对于file.html.erb，内容类型是html，模板引擎是ERb。rxml 现在是 xml.builder 并且 rjs 现在应该（大部分）是 js.rjs

**在新的 rails 3.0 .rhtml 文件将不受支持。.html.erb 是新标准。**

# javascript - 防止网页使用 JavaScript 离开

> ID：821011
> 
> 赞同：151
> 
> 时间：2009-05-04T17:19:03.210
> 
> 标签：javascript, onbeforeunload

如何防止网页使用 JavaScript 离开？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2009-05-04T18:06:41.147

使用`onunload`允许您显示消息，但不会中断导航（因为为时已晚）。但是，使用`onbeforeunload`会中断导航：

```
window.onbeforeunload = function() {
  return "";
} 
```

注意：返回一个空字符串是因为较新的浏览器提供了一条无法覆盖的消息，例如“任何未保存的更改都将丢失”。

在较旧的浏览器中，您可以指定要在提示中显示的消息：

```
window.onbeforeunload = function() {
  return "Are you sure you want to navigate away?";
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-08T00:19:00.600

与这里介绍的其他方法不同，这段代码*不会*导致浏览器显示警告，询问用户是否想离开；相反，它利用 DOM 的事件特性在浏览器有机会从内存中卸载它之前重定向回当前页面（从而取消导航）。

由于它是通过直接短路导航来工作的，所以不能用来防止页面被关闭；但是，它可以用来禁用帧破坏。

```
(function () {
    var location = window.document.location;

    var preventNavigation = function () {
        var originalHashValue = location.hash;

        window.setTimeout(function () {
            location.hash = 'preventNavigation' + ~~ (9999 * Math.random());
            location.hash = originalHashValue;
        }, 0);
    };

    window.addEventListener('beforeunload', preventNavigation, false);
    window.addEventListener('unload', preventNavigation, false);
})(); 
```

**免责声明：**你不应该这样做。如果页面上有破坏框架的代码，请尊重作者的意愿。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-10-20T15:14:32.447

使用现代 addEventListener API 以更现代和浏览器兼容的方式等效。

```
window.addEventListener('beforeunload', (event) => {
  // Cancel the event as stated by the standard.
  event.preventDefault();
  // Chrome requires returnValue to be set.
  event.returnValue = '';
}); 
```

来源：[https ://developer.mozilla.org/en-US/docs/Web/Events/beforeunload](https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-03-19T04:03:23.603

我最终得到了这个略有不同的版本：

```
var dirty = false;
window.onbeforeunload = function() {
    return dirty ? "If you leave this page you will lose your unsaved changes." : null;
} 
```

在其他地方，当表单变脏时，我将脏标志设置为 true（或者我想阻止导航离开）。这使我可以轻松控制用户是否获得确认导航提示。

使用所选答案中的文本，您会看到多余的提示：

![在此处输入图像描述](https://i.stack.imgur.com/vQRUN.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-04T17:27:41.770

在 Ayman 的示例中，通过返回 false 可以防止浏览器窗口/选项卡关闭。

```
window.onunload = function () {
  alert('You are trying to leave.');
  return false;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-07-14T12:25:21.753

相当于 jQuery 1.11 中接受的答案：

```
$(window).on("beforeunload", function () {
    return "Please don't leave me!";
}); 
```

[JSFiddle 示例](http://jsfiddle.net/485xsaao/)

altCognito 的回答使用了该`unload`事件，该事件发生得太晚，JavaScript 无法中止导航。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-04T17:21:46.150

使用[onunload](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onunload)。

对于 jQuery，我认为它是这样工作的：

```
$(window).unload(function() { 
  alert("Unloading"); 
  return falseIfYouWantToButBeCareful();
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-11T17:55:29.173

该建议的错误消息可能与浏览器已经显示的错误消息重复。在chrome中，2条类似的错误信息在同一个窗口中依次显示。

在 chrome 中，自定义消息后显示的文本是：“您确定要离开此页面吗？”。在 Firefox 中，它根本不显示我们的自定义错误消息（但仍显示对话框）。

更合适的错误消息可能是：

```
window.onbeforeunload = function() {
    return "If you leave this page, you will lose any unsaved changes.";
} 
```

或者stackoverflow风格：“你已经开始写或编辑一篇文章了。”

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-04-24T18:29:22.260

如果您正在捕捉**浏览器的后退/前进按钮**并且不想离开，您可以使用：

```
window.addEventListener('popstate', function() {
    if (window.location.origin !== 'http://example.com') {
        // Do something if not your domain
    } else if (window.location.href === 'http://example.com/sign-in/step-1') {
        window.history.go(2); // Skip the already-signed-in pages if the forward button was clicked
    } else if (window.location.href === 'http://example.com/sign-in/step-2') {
        window.history.go(-2); // Skip the already-signed-in pages if the back button was clicked
    } else {
        // Let it do its thing
    }
}); 
```

否则，您可以使用[beforeunload](https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload)事件，但消息可能会或可能不会跨浏览器工作，并且需要返回强制内置提示的内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-01T13:38:09.173

如果您需要在退出时将状态切换回**无**通知，请使用以下行：

```
window.onbeforeunload = null; 
```

# math - 高阶线性回归

> ID：821014
> 
> 赞同：3
> 
> 时间：2009-05-04T17:19:29.340
> 
> 标签：math, linear-algebra

我有矩阵系统：

A x B = C

`A`由和由. `a`_ _ 两者和都是未知的，但我有部分信息（我有一些值，但不是全部）并且被挑选得足够小，以至于系统预计会受到过度约束。不需要过度约束 in 中的*所有*行或列。`n``B``n``b``A``B``C``n`*`A``B`*

 *我正在寻找[最小二乘](http://en.wikipedia.org/wiki/Least_squares) [线性回归](http://en.wikipedia.org/wiki/Linear_regression)之类的东西来找到最适合这个系统的东西（注意：我知道不会有一个唯一的解决方案，但我想要的只是最好的解决方案之一）

* * *

举个具体的例子；所有 a 和 b 都是未知的，所有 c 都是已知的，而 ? 被忽略。我想找到 *一个*仅考虑已知 c 的最小二乘解决方案。

```
[ a11, a12 ]                                     [ c11, c12, c13, c14, ?   ]
[ a21, a22 ]   [ b11, b12, b13, b14, b15]        [ c21, c22, c23, c24, c25 ]
[ a31, a32 ] x [ b21, b22, b23, b24, b25] = C ~= [ c31, c32, c33, ?,   c35 ]
[ a41, a42 ]                                     [ ?,   ?,   c43, c44, c45 ]
[ a51, a52 ]                                     [ c51, c52, c53, c54, c55 ] 
```

* * *

请注意，如果 B 仅被修剪为 b11 和 b21 并且未知的第 4 行被剔除，那么这几乎是一个标准的最小二乘线性回归问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T00:58:07.170

如前所述，这个问题是不适定的。

令 A、B 和 C=5 为标量。您要求解决具有无限数量的解决方案的 a*b=5。

根据上面提供的信息，一种方法是最小化定义为的函数 g

g(A,B) = ||AB-C||^2 = 迹线((AB-C)*(AB-C))^2

使用牛顿法或准割线法 (BFGS)。
（您可以在此处轻松计算梯度）。M* 是 M 的转置，乘法是隐式的。（规范是 frobenius 规范......我删除了下划线 F，因为它没有正确显示）

由于这是一个固有的非线性问题，标准线性代数方法不适用。

如果您提供更多信息，我可能会提供更多帮助。

* * *

还有一些问题：我认为问题在于没有更多信息，就没有“最佳解决方案”。我们需要确定我们正在寻找的更具体的想法。一个想法，可能是一个“最稀疏”的解决方案。这个领域是一个热门的研究领域，世界上一些最优秀的人才在这里工作（参见 Terry Tao 等人关于核规范的工作）这个问题虽然容易处理，但仍然很难。

* * *

不幸的是，我还不能发表评论，所以我会在这里添加我的评论。如下所述，LM 是解决这个问题的好方法，而且只是一种方法。沿着牛顿型方法解决优化问题或非线性求解问题。

这是一个想法，使用上面给出的示例：让我们定义两个新向量，V 和 U，每个向量都有 21 个元素（与 C 中定义的元素数量完全相同）。

V 恰好是 C 的已知元素，列有序，所以（在 ​​matlab 表示法中）

V = [C11; C21; C31; C51; C12; .... ; [C55]

U 是一个向量，它是乘积 AB 的列排序，省略了*与“？”相对应的元素 在矩阵 C*中。将所有变量收集到 x 我们有
x = [a11, a21, .. a52, b11, b21 ..., b25]。

f(x) = U（如上定义）。

我们现在可以尝试使用您最喜欢的非线性最小二乘法求解 f(x)=V。

顺便说一句，虽然下面的海报推荐了模拟退火，但我建议不要这样做。它存在一些问题，但它是一种启发式方法。当您拥有强大的分析方法（例如 Gauss-Newton 或 LM）时，我会说使用它们。（根据我自己的经验）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T17:28:13.610

一个疯狂的猜测：[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)可以解决问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T19:02:51.243

你有几个选择。[Levenberg-Marquadt 算法](http://en.wikipedia.org/wiki/Levenberg-Marquardt_algorithm)通常被认为是最好的 LS 方法。可在[此处](http://www.ics.forth.gr/~lourakis/levmar/)获得免费实施。但是，如果计算速度很快并且您有相当数量的参数，我强烈建议使用 Monte Carlo 方法，例如[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)。

您从答案中的一组参数开始，然后将其中一个随机百分比增加到最大值。然后，您计算系统的适应度函数。现在，这是诀窍。你不会扔掉不好的答案。你用玻尔兹曼概率分布接受它们。

```
P = exp(-(x-x0)/T) 
```

其中 T 是温度参数，x-x0 是当前适应值减去前一个。在 x 次迭代后，您将 T 减少一个固定量（这称为冷却计划）。然后，您对另一个随机参数重复此过程。随着 T 的减小，选择的不良解决方案越来越少，最终该过程变成了“贪婪搜索”，只接受提高拟合度的解决方案。如果您的系统有许多自由参数（> 10 左右），这确实是您有机会达到全局最小值的唯一方法。这种拟合方法需要大约 20 分钟来编写代码，并且需要几个小时来调整。希望这可以帮助。

仅供参考，Wolfram 在旅行商问题的背景下对此进行了很好的讨论，我一直在非常成功地使用它来解决一些非常困难的全局最小化问题。它比 LM 方法慢，但在最困难/相对较大的情况下要好得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-16T03:15:32.843

我不知道如何处理你的缺失值，所以我将忽略这个问题。

没有唯一的解决方案。要找到最佳解决方案，您需要某种指标来判断它们。我将假设您想使用最小二乘度量，即 A 和 B 的最佳猜测值是最小化数字总和的那些 [C_ij-(AB)_ij]^2。

您没有提到的一件事是如何确定要用于 n 的值。简而言之，如果 1 <= n <= b，我们可以提出“好的”解决方案。这是因为 1 <= rank(span(C)) <= b。其中 rank(span(C)) = C 的列空间的维度。注意这是假设 a >= b。为了更正确，我们会写成 1 <= rank(span(C)) <= min(a,b)。

现在，假设您选择了 n，使得 1 <= n <= b。如果您选择 A 的列使得 span(A) = span(C 的前 n 个特征向量)，您将最小化残差平方和。如果没有其他好的理由，只需选择 A 的列作为 C 的前 n 个特征向量。一旦选择了 A，就可以通过通常的线性回归方式得到 B 的值。即 B = (A'A)^(-1)A' C

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-09T00:27:40.423

基于将 B 切割为单列并删除带有未知数的行将其转换为非常接近已知问题的认识，一种方法是：

1.  具有随机值的种子 A。
2.  独立求解 B 的每一列。
3.  在给定步骤 2 中的 B 值的情况下，重新处理问题以允许求解 A 的每一行。
4.  在第 2 步重复，直到事情解决。

我不知道这是否稳定。

# sql-server - SQL Native Client，链接服务器错误仅在删除时

> ID：821016
> 
> 赞同：1
> 
> 时间：2009-05-04T17:20:07.123
> 
> 标签：sql-server, sql-server-2005, linked-server, sql-server-native-client

我们正在使用 SQL Native Client 从 Borland 应用程序连接到本地 SQL Server 2005。它适用于选择、插入和更新。当我们删除时，我们得到错误：

> `SERVERNAME\SQLEXPRESS`在 sys.servers 中找不到服务器 。验证是否指定了正确的服务器名称。如有必要，执行存储过程 sp_addlinkedserver 将服务器添加到 sys.servers

默认实例，唯一的实例，是`SERVERNAME\SQLEXPRESS`，我们没有使用链接服务器。有任何想法吗？我相信我们将 MDF 和 LDF 文件移动到了该数据库的新服务器，然后重新附加了它。

**更新 1**

没有 SQL。这一切都是通过与游标进行编程交互来实现的。它是一个使用 ADO 的 ODBC 驱动程序。您运行 TableObj->Delete 以删除记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T18:32:10.710

知道了。我跑了

```
SELECT @@servername 
```

这返回了盒子的旧主机名。我比跑了

```
sp_dropserver 'OLDHOSTNAME\SQLEXPRESS'
go
sp_addserver 'NEWHOSTNAME\SQLEXPRESS', local 
```

然后我得到了

> 未为数据访问配置服务器“NEWHOSTNAME\SQLEXPRESS”

我跑了

```
sp_serveroption 'ICS-POS3-NEW\SQLEXPRESS', 'data access' , 'true' 
```

这让我犯了错误

> 另一个会话正在使用的事务上下文

这是因为链接服务器。我发现添加服务器上的本地选项直到我重新启动服务器才生效。我重新启动，然后它就可以工作了。

# c# - 模拟锁定/挂起的应用程序

> ID：821017
> 
> 赞同：2
> 
> 时间：2009-05-04T17:20:18.060
> 
> 标签：c#, .net

我有一个使用 SendMessage 与另一个应用程序交互的应用程序（除其他外）。一切正常，直到另一个应用程序挂起（因为它实际上已冻结，或者它正在进行长时间的阻塞调用）。我想模拟一个使用 C# WinForms 应用程序挂起的应用程序。有什么方法可以开始长时间运行的阻塞呼叫？或者可能是一种导致应用程序实际冻结的方法？也许像 WebClient.DownloadString() 这样的东西，但永远不会返回的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T17:23:15.850

```
while(true) { } // busy waiting
Thread.Sleep(time); // blocking 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:24:06.380

如果要模拟长时间运行的任务，请使用

```
Thread.Sleep(timeout); 
```

`Timeout.Infinite`如果你想永远阻止。

如果您也想模拟大量处理器使用情况，请使用无限循环。

```
while (true) { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:34:06.573

你把消息泵关掉怎么样？然后不仅您的应用程序似乎被冻结了..系统实际上会将其报告为已冻结（la IsHungAppWindow(hWnd)）。

# java - 设计具有普通名称的 Java 接口，与其他包“很好地配合”

> ID：821021
> 
> 赞同：2
> 
> 时间：2009-05-04T17:21:09.163
> 
> 标签：java, package

我想定义一个`Tag`在我正在处理的 Java 包中调用的接口，但由于冲突问题，我不愿使用这样一个听起来很普通的名称。（例如，您只能导入一个具有特定名称的类或接口；如果有多个具有相同名称的类或接口，您可以对其中一个使用 import，但其余的您必须使用整个包名显式引用例如 com.yoyodyne.games.outdoors.Tag）

我也没有更详细的名称（它应该代表一个标签，如 StackOverflow 帖子或其他在线网站中的标签）；我能想到的最接近的可能是 TaxonomyTag。

有没有应对这种情况的策略？我能想到的唯一一个是定义一个`Collections`包含公共接口的静态类（如）`Tag`，例如，如果我调用它，`Taxonomy`那么我可以导入`Taxonomy`并将 Tag 引用为 Taxonomy.Tag ——但这听起来没有多大帮助.

**编辑：**这种冲突的一个广为人知的例子是[ca.odell.glazedlists.matchers.Matcher](http://publicobject.com/glazedlists/glazedlists-1.8.0/api/ca/odell/glazedlists/matchers/Matcher.html)和[java.util.regex.Matcher](http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Matcher.html)如果您尝试将正则表达式与 GlazedLists 库一起使用，这会很痛苦。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T17:26:13.020

我认为命名类标签没有问题。您的包名称使其具有普遍的唯一性，这是包的目的之一——解决命名冲突。

即使在 Java API 中，也有多个具有相同名称的类：例如 java.util.Date、java.sql.Date。如果您的代码中同时需要这两者，请使用完全限定名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:28:08.430

有多少人会使用这个类？如果它是一个通用库，我会使用一个不太通用的名称以避免冲突。如果只有你，而且你现在真的不硬着头皮去使用完全合格的名字。

如果在您发布包之前它成为问题，只需将其重构为一个新名称。

在类似的情况下，我为短类名找到了一些替代名称，因为我讨厌使用 FQN。甚至像 JasonSTag 这样的东西也可以作为临时修复。只是不要那样释放它。通常在实现的中途，我会找到一种更好的方式来描述类，比“标签”更具描述性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T20:02:59.057

你是懒惰吗？如果您的类正在使用导入，这样“标签”可能会被阅读您的代码的人误解，即使是暂时的，那么尽管有包命名约定，还是值得考虑一个更好的名称。不要低估命名的力量——或者随着班级的变化而重命名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T18:10:12.807

最近使用形容词/副词作为界面名称已经过时了，但是，在您的情况下，如果您使用“Tagable”或“TaxonomyTagable”，听起来不会那么糟糕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T19:04:29.040

如果您需要在一个类中使用多个具有相同名称的类，这只会成为一个问题。示例：java.awt.List 和 java.util.List、java.util.Date 和 java.sql.Date。

如果您远离标准 Java 运行时中已经使用的那些，您很可能不会遇到问题。

无论你做什么——让你选择一个好的和描述性的名字——这尤其适用于公共 API 中的那些。你将永远和他们一起生活。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T17:26:37.560

我真的不会关心这个。

您应该关心的是您的类/接口名称与代码实际执行的匹配程度。如果`Tag`简洁地描述类/接口的作用和/或要建模的内容，那么我认为这是一个很棒的名字。

我真的看不出你会`Tag`在同一个类中使用这种类型以及`Tag`在不同包中声明的其他类型。`Tag`但是，如果您必须这样做，那么通过它们的完全限定名称来引用其他类型并不是那么痛苦。

我相信你给某物命名的程度比让事情变得方便更重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T17:27:48.960

最好的策略是编写能做好一件事的类。这些类确实需要最少的导入，因此您可以减少导入语句。

我寻找标准的标签接口；在 java.swing..html 中找到了一个，在 servlet API 中找到了另一个，在 Tapestry 库中找到了另一个。我确信你的类不应该直接使用这些（或类似的 API）之一，所以你可能不会害怕命名空间污染。

其他解决方案是在标签前面加上将要使用的对象。例如文章标签。但是您必须仔细选择对象名称。或者，无论如何，您以后总是可以重构它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-04T17:28:37.320

通常，即使名称听起来“普通”，冲突的数量也很少。我在包的上下文中选择了一个有意义的名称。

不要做一些“愚蠢”的事情，比如在公司名称前面加上前缀，例如：YoYoDyneTag。

# hibernate - 帐户电子邮件激活的设计（考虑到 Hibernate）

> ID：821029
> 
> 赞同：0
> 
> 时间：2009-05-04T17:22:21.783
> 
> 标签：hibernate

我有一个设计问题，我想了解一下。以下是约束：

1.  每个用户在注册他们的帐户时都必须有一个有效的电子邮件地址。注册用户帐户时，应发送一封激活电子邮件，其中包含一个带有激活码的链接，必须遵循该链接才能激活帐户。
2.  每个用户帐户都存在于恰好存在于一家公司中的一个办公室中。
3.  公司的第一个注册用户创建公司和一个办公室。然后，公司的其余用户由第一个用户邀请。
4.  公司可以相互交互，但前提是公司的第一个用户被激活（即他们在注册后点击了各自的激活链接）。

这是一个关于如何解决它的小型 UML 图：

[![替代文字](https://i.stack.imgur.com/57X9f.png)](https://i.stack.imgur.com/57X9f.png)

在上图中，省略了一些细节。该图仅显示类和字段。当涉及到字段时，它们只是在概念上用于显示应该存储哪些信息，请忽略它们的范围。

一些想法和问题：

*   User 和 NotActivatedUser 基本相同。他们应该是一个单一的班级还是分开的？如果将它们分开，您会使用哪种形式的 Hibernate 继承持久性？
*   如果帐户在一定时间后未激活，则应将其删除。如果它是第一个用户，也创建了用户 Company 和 Office，那么这两个用户也应该被删除。我们还需要 NotActivatedOffice 和 NotActivatedCompany 吗？（用于数据库中的干净分离。）

您将如何设计这种解决方案？你觉得在数据库中保持非活动实体和活动实体分开很重要吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T17:59:58.633

我不会使用继承来表示您的用户对象的状态（激活/停用）。组合（聚合）在这里是一个更好的选择。

通过使用聚合，AbstractUser 简单地变成了用户。您可能希望使用类对激活进行建模，而不是使用与激活相关的属性污染用户类。这样你就得到了一个漂亮而干净的对象模型。

在数据库级别，您仍然可以决定将两个对象存储在同一个表/记录中，称为[组件映射](http://docs.jboss.org/hibernate/stable/core/reference/en/html/components.html)。或者您可以决定将 User 和 Activation 存储在单独的表中（也称为[实体映射](http://docs.jboss.org/hibernate/stable/annotations/reference/fr/html/entity.html)）。

Hibernate 支持这两种类型的映射，这主要是配置问题。

User 类将包含以下属性：

*   给定的名称
*   姓
*   电子邮件
*   激活（对激活对象的引用）

Activation 类将包含以下属性：

*   激活码（字符串）
*   sentOn（电子邮件何时发送）
*   激活（默认为null，当用户点击激活链接时设置为当前日期/时间，当用户不为null时告诉系统用户是否激活了他的帐户）

您可以使用 HQL 查询来了解哪个公司至少有一个激活的用户：

```
from Office o 
   left join fetch o.company 
where 
   o.administrator.activatedOn != null 
```

此查询假定您已在 Office 类中定义了“管理员”属性。“管理员”将是对创建办公室的用户的引用。在数据库中，“offices”表有一个用户记录的外键。

通过以这种方式建模关系，您可以更改办公室的管理员（例如，他离开或被办公室/公司解雇）。这完全取决于您的用例...

我还在 Activation 类中添加了一个 sentOn 属性，用于在一定时间后清理未激活的帐户（在您的 UML 图中缺少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:30:11.373

我不会将 NotActivatedUser 与 ActivatedUser 分开；只是有一个用户表，并有一个“激活”列，默认为 0（未激活）。

一件事; 我将激活码拆分到一个单独的表中，可能是“ActivationMethod”。如果您希望用户能够通过电子邮件以外的方式激活他们的帐户，这将允许将来进行扩展，并且还可以用于从 User 表中删除“activationCode”列。

我不会担心未激活的办公室和公司；根据您如上所述的使用计划，在该用户激活自己（以及因此办公室和公司）之前，其他任何人都不能使用它们。一个问题; 为什么允许非激活用户创建办公室和公司？为什么不将该活动限制为仅激活的用户？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:31:13.930

就个人而言，我不会为激活和非激活用户编写两个类，因为它只是一个状态。如果激活前的这个状态变得复杂，可以参考激活状态等。

如果您在用户上有一个“OfficeOwner”标志，您就知道何时删除办公室而无需任何复杂的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T17:52:54.157

为激活和未激活用户使用同一张表需要您检查用户的状态，以及应用程序中各处的办公室和公司的状态。

出于这个原因，我可能会使用一个activationrequest 表，其中包含创建用户所需的所有信息，执行激活时办公室和公司。

# php - 使用 CodeIgniter 图像操作类合并两个图像

> ID：821040
> 
> 赞同：0
> 
> 时间：2009-05-04T17:25:31.603
> 
> 标签：php, codeigniter, image-manipulation

我正在 CodeIgniter (CI) 中开发一个新项目，并希望找到针对当前问题的 CI 解决方案。我有一个图像，类似于相框。我想修改上传的图像，使其背景中有这个框架。

示例：
[替代文本 http://www.sampsonresume.com/projects/visit-creation/vc-process.jpg](http://www.sampsonresume.com/projects/visit-creation/vc-process.jpg)

第一张照片是框架。第二个是上传的图像（调整大小/裁剪后），第三个是两者的组合，我想完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:57:57.650

如果图像要显示在您自己的网站上，那么简单地使用 CSS 可能会更容易（特别是如果您的底部图像只是提供了一个边框......）。当然，如果您希望人们使用框架下载这些文件，那就另当别论了。

我认为 CI 在 Image Manipulation 类中没有内置方法。但是，该类只是从三个主要 PHP 图像库（GD、ImageMagick 和 NetPBM）之一中抽象出常用功能。如果你知道你正在使用什么库（我通常使用 GD 来处理这样的基本事情......），那么你只需要使用他们专有的方式来做这些事情。

您甚至可以制作自己的库或扩展 Image Manipulation 类以添加您自己的特殊功能。

此外，在 Zend 中可能有一些方法可以做到这一点（不确定，我也不打算查找）。但是，如果您确实发现了一些东西，有一些简单的方法可以[将 Zend 组件包含到 CI中。](http://www.beyondcoding.com/2008/02/21/using-zend-framework-with-codeigniter/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T21:46:50.930

同意凯尔的观点——最好的办法是扩展已经存在的库。看看 ImageMagick 的“复合”命令。

```
composite -gravity center smile.gif rose: rose-over.png 
```

[http://www.imagemagick.org/script/composite.php](http://www.imagemagick.org/script/composite.php)

# c# - 复制流

> ID：821046
> 
> 赞同：3
> 
> 时间：2009-05-04T17:27:27.980
> 
> 标签：c#, .net, stream

我有一个提供 System.IO.Stream 实例的生产者。我也有几个使用这个流的客户端。

是否可以为每个客户端提供流的“私人视图”？例如，如果 clientA 从流中读取，它不会影响 clientB 看到的位置（即，如果 clientB 从流中开始读取，它会从流的开头获取，而不是从 clientA 离开位置的位置）。如果有任何区别，则客户端仅从流中读取。

希望这是有道理的。

在此先感谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T17:31:46.720

我认为您需要创建自己的自定义“TssStream”来处理从源流到多个流的缓冲。

您需要从 Stream 覆盖的方法数量仅限于处理只读，但协调每个客户端（可能通过帮助程序）的位置需要一点思考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:30:03.590

您可以从中继承一个类，该类`Stream`在构造函数中采用底层流并跟踪该私有视图实例的位置。这仅在基本流可搜索时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:30:52.200

您可以通过读取流、缓存数据并为每个客户端打开新流到缓存来完成此操作。

# c# - Listview not fully updating on databind() after postback

> ID：821053
> 
> 赞同：5
> 
> 时间：2009-05-04T17:28:37.400
> 
> 标签：c#, asp.net, data-binding, listview, postback

I have a ListView control which is exhibiting an odd behaviour - rows are only partially updating after a postback. I'm hoping someone here can shed some light on why this might be occuring.

My listview DataSource is bound to a List of items which is stored in the page session state. This is intentional, partially to timeout out-of-date views since multiple users view the data. On a plain resort operation, the sorting is handled on page via javascript, and the list/session data order is kept in sync via callbacks. Callback also checks for permissions levels. On a particular resort operation that is more complicated, the javascript on the page makes a postback to the page to handle the sorting logic. The List/Session is updated as in the callback, then the listview control is rebound to the data. The page loads again, and the rows show the new order. No problem, right?

The problem is that ***some*** of the elements in the listview do not change value in accordance with the new order. While the hyperlinks and text that is processed on page (ie like <%# Eval("ProjectAbbrev") %>) are updated appropriately, checkboxes, literals, and dropdowns that have their values set via the OnItemDataBound event method are not - they stay "frozen" in place, even though stepping through the code reveals that the method is run during the postback, and that the controls SHOULD be set to their new values. If I go and manually truncate the list to say, half the original size, sure enough only those items are repopulated, but the checkboxes and such still retain their original values.

So my question is: Why aren't these elements updating along with the rest of the listview control elements on the postback? I have the feeling that I'm either misunderstanding the page lifecycle in ASP.NET or that I've encountered a bug of some kind.

At this point I'm thinking I will have to move the more complicated sorting operation to the page in javascript, but that will be rather tricky and I'd like to avoid doing so if possible.

* * *

UPDATE: I have tried setting EnableViewState to false and it does not fix this. I couldn't use that tactic in any case because other parts of the page (save) rely on reading the viewstate in the end.

* * *

UPDATE: I'm providing some code snippets in the hope that they might shed some light on this issue:

Page: The HyperLink element will update properly after postback, but the CheckBox which has its value assigned in the OnQueueRepeater_ItemDataBound method, will stay the same.

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TextProcessorProjects.ascx.cs" Inherits="ETD.UI.Controls.TextProcessorProjects" %>

<asp:ListView ID="QueueListView" runat="server" OnItemDataBound="OnQueueRepeater_ItemDataBound">
 <ItemTemplate>
  <tr>
   <td><asp:HyperLink runat="server" ID="ProjectIDLink"><%# Eval("ProjectAbbrev") %></asp:HyperLink></td>
   <td><asp:CheckBox runat="server" ID="ScannedCheckBox" BorderStyle="None" /></td>
  </tr>
 </ItemTemplate>
</asp:ListView> 
```

Code behind: On postback, the following code executes:

```
protected List<Book> QueueDataItems
{
 get { return (List<Book>)Session["Queue"]; }
 set { Session["Queue"] = value; }
}

else if (IsPostBack && !Page.IsCallback)
{
 // resort QueueDataItems List appropriately
 ResortQueue(Request.Params) 
 // rebind
 QueueListView.DataSource = QueueDataItems;
 QueueListView.DataBind();
}

protected void OnQueueRepeater_ItemDataBound(object sender, ListViewItemEventArgs e)
{
 // ...
 // ... other controls set
 CheckBox scannedCheckBox = e.Item.FindControl("ScannedCheckBox") as CheckBox;
 scannedCheckBox.Checked = book.Scanned;
} 
```

UPDATE: I've given up on getting this to work and moved my sorting logic to the client side with javascript. If anyone has any ideas as to why this odd behaviour was happening though, I'd still be very interested in hearing them!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-07-14T15:35:20.193

out of interest, what point on the page are you databinding on? Page_Load?

Try it on OnPreRender - might help out.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T17:41:43.513

Sounds like the ViewState is kicking in and repopulating the data. In any case, if you are Databinding in every postback anyways, you should probably set the EnableViewState of your ListView to false to reduce page size.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-21T13:21:16.347

I think this is related to the order of when the different events are triggered during the page lifecycle. See [ASP.NET Page Life Cycle Overview](http://msdn.microsoft.com/en-us/library/ms178472.aspx). You should do databinding in Page_OnPreRender to make sure the replopulating is done after control events (that will cause data updating) on the page.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T23:56:56.933

Maybe your QueueListView is getting re-bound for some reason.

Try resetting the DataSource value after the DataBind() to see what happens

```
QueueListView.DataBind();
QueueListView.DataSource = null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T17:35:29.417

Any chance this could be a caching issue? I ran into a similar issue using a listview with an XMLDatasource. I tried turning off all the viewstate. I would bind the listview in the code behind and use XPath to write it all out to the screen on my aspx page. This was used in a search....the next time I did a search, none of the new information showed up. The reason is because an XMLDatasource has caching enabled by default. In my case I was hitting the DB every time and had no need to cache it. I turned off the caching on the datasource and all my problems were fixed.

I only mention this because the error I was having sounds identical to yours. I can't see how you're retrieving book in the itemdatabound - and you're not using an XML Datasource by the looks of things.....but I thought the comment might trigger something for you. Good luck....though it sounds like you've already moved on :-).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-22T20:49:05.233

Is the checkbox control ReadOnly=true or Enabled=false?

I have had trouble with controls with one of these properties set as above not updating no matter how I try to manhandle the control in the code behind. I would think disabling the viewstate would also bypass that little "feature" of ASP.NET, but it's worth a shot.

Also, if the items are sorted via clientside code, is that ordering preserved on the postback? I don't think that you can alter the CLR object you have in session via javascript.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-16T15:14:33.047

Not sure if this helps, replace <%# Eval("ProjectAbbrev") %> with the Hyperlink.Text assigned in the OnQueueRepeater_ItemDataBound method and see if all rows get populated correctly.

This probably won't solve your problem, but will be interesting to know the result.

# sql - 将 SQL DB 与 MySQL DB 链接/同步

> ID：821055
> 
> 赞同：0
> 
> 时间：2009-05-04T17:29:15.853
> 
> 标签：sql, mysql, database, wordpress

我需要从 MySQL 内部访问 MS SQL 数据库中的数据，并且想知道我的选择。数据保存在各种连接表中

理想情况下，我想在 MySQL 中镜像数据库模式和数据，以便可以从 Wordpress 中查询它。

数据是这里看到的酒店信息[http://www.vrxstudios.com/advanced_search.aspx](http://www.vrxstudios.com/advanced_search.aspx)

该计划是将每家酒店表示为一个 wordpress 帖子。

在 SQL 中创建一个平面表并在 MySQL 中以某种方式链接它是否有意义？

感激地收到任何帮助。

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T19:22:22.057

如果要将数据从 MS SQL Server 移动到 MySQL，可以使用 SSIS 例程来移动数据。您可以根据需要安排数据导入的频率。

最简单的形式是从 MS SQL Server 直接复制模式结构。

# html-table - 显示/格式化表格数据（网络）

> ID：821058
> 
> 赞同：0
> 
> 时间：2009-05-04T17:30:06.490
> 
> 标签：html-table

在我的示例中，我有一个表格，其中每一行都是一个用户。列可以包括他们的姓名、地址、电子邮件地址等。我现在需要为（假设的例子）他们的猫的名字添加一列。虽然大多数人没有猫，有些人会有 1-2 只猫，但偶尔会有 20 只猫的人在桌子上形成一排很长的行。这给了我一个演示和过滤/搜索猫名的问题。有没有很好的解决方案来显示这种类型的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T17:35:58.207

让字段的前 50 个（或其他）字符正常显示，然后将其余字符放在一个块中，通过 CSS 将其可见性设置为隐藏。包括一个链接/按钮/图标，允许用户切换可见性，以便他们可以看到整个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:34:59.350

几个选项：

1.  设置单元格的最大宽度并允许数据换行
2.  将内容放在包装标签（例如 div）内，并将 div 设置为固定宽度/高度和溢出样式：隐藏，以确保特别长的单词不会强制超出单元格的宽度。
3.  截断服务器端的输出文本

对于案例 #2 和 #3，将 TD 标记的 Title 属性设置为包含完整的非截断文本。将鼠标悬停在单元格上时，这将显示为工具提示。

我会提到其他基于 CSS 的解决方案，但它们现在很少得到支持，所以不值得一提。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:36:57.160

您可能想尝试做类似 SO 所做的事情。也就是说，一旦有人在他们的 Rep 中达到某个点，它就会为数字加上后缀并对其进行近似。前任。10k 而不是 10,236。

这样数字就不会失控。

# javascript - jQuery UI 对话框确认

> ID：821067
> 
> 赞同：2
> 
> 时间：2009-05-04T17:32:25.800
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery UI 对话框在执行操作之前显示确认...在这种情况下导航到选定的链接....但在另一种情况下，我可能想使用 AJAX 删除。

我想我可以将动作作为 custom_confirm 函数的参数传递：

```
 $("a.edit").click(function(e){
       e.preventDefault();
       custom_confirm('Please Note:',
           function(){
               location.href = $(this).attr('href');
           }
       );
   });

   function custom_confirm(prompt, action, title){
    if (title === undefined) title = "Are you sure?";
    if ($("#confirm").length == 0){
        $("#main div.inner").append('<div id="confirm" title="' + title + '">' + prompt + '</div>');
        $("#confirm").dialog({buttons: {'Proceed': function(){ $(this).dialog('close'); action; }, Cancel: function(){ $(this).dialog('close'); }}});
    }
    else {
        $("#confirm").html(prompt);
        $("#confirm").dialog('open');
    }
} 
```

它不工作。还有另一种方法可以做到这一点吗？

* * *

感谢你们的快速回复。我试过你的建议，但它仍然没有执行作为参数传递的函数。

```
 $("a.edit").click(function(e){
       e.preventDefault();
       var href = $(this).attr('href');
       custom_confirm('Please Note:',
           function(){
console.log(href);
               location.href = href;
           }
       );
   }); 
```

* * *

清理了 custom_confirm 函数，添加了关闭选项：

```
function custom_confirm(prompt, action, title){
    if (title === undefined) title = "Are you sure?";
    $("#main div.inner").append('<div id="confirm" title="' + title + '">' + prompt + '</div>');
    $("#confirm").dialog({position: 'top', width: 700, modal: true, resizable: false, show: "fold", hide: "blind", buttons: {'Proceed': function(){ $(this).dialog('close'); action(); }, Cancel: function(){ $(this).dialog('close'); }}, close: function(ev, ui) { $(this).remove();}});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T18:14:00.643

弄清楚了。如果要将函数作为参数传递给另一个函数，则需要将参数作为函数调用

```
action() 
```

而不是作为变量

```
action 
```

希望有帮助

```
$("a.edit").click(function(e){
    e.preventDefault();
    var href = $(this).attr('href');
    custom_confirm('Please Note:',
        function(){
            location.href = href;
        }
    );
});

function custom_confirm(prompt, action, title){
    if (title === undefined) title = "Are you sure?";
        if ($("#confirm").length == 0){
            $("#main div.inner").append('<div id="confirm" title="' + title + '">' + prompt + '</div>');
            $("#confirm").dialog({buttons: {'Proceed': function(){ $(this).dialog('close'); action(); }, Cancel: function(){ $(this).dialog('close'); }}});
        }
        else {
            $("#confirm").html(prompt);
            $("#confirm").dialog('open');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:35:51.017

您需要`this`使用闭包传入变量。

[请参阅此示例。](http://jsbin.com/ikeha)（改进）

```
 $("a.edit").click(function(e){
       e.preventDefault();
       custom_confirm('Please Note:',
           (function (element) {
             return function(element){
               location.href = $(element).attr('href');
           })(this)
       );
   }); 
```

但是您尝试做的事情可能同样容易通过以下方式完成：

```
$("a.edit").each(function() {
  $(this).click(function() {
    if (!confirm("Are you sure about that?"))
       e.preventDefault();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:45:16.563

是的，或者简单地说：

```
$("a.edit").click(function(e){
       e.preventDefault();
       var href = $(this).attr('href');
       custom_confirm('Please Note:',
           function(){
               location.href = href;
           }
       );
   }); 
```

# openid - Google 混合协议（OpenID + OAuth）演示的问题

> ID：821069
> 
> 赞同：0
> 
> 时间：2009-05-04T17:32:39.840
> 
> 标签：openid, oauth

我正在尝试将 googlesample 用于[混合协议（OpenID+OAuth）](http://googlecodesamples.com/hybrid/)，但由于某种原因它对我不起作用

```
You are not authenticated 
```

我尝试使用谷歌帐户按钮，没有任何反应！我尝试输入我的 google openID 并再次没有任何反应！

会不会是浏览器的问题？？不见得！

如果您得到相同的结果，或者如果有人知道发生了什么，请您报告它，请分享，thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T23:31:36.200

我又试了一次，这次成功了。问题是我同时使用 2 个不同的 Google 帐户登录，由于某种原因，我没有重定向到 Google 帐户的登录管理器页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T22:19:45.140

我刚试过，它对我有用。

这个[OpenID+OAuth 演示](http://samples.dotnetopenauth.net/master/OpenIdRelyingPartyWebForms/loginPlusOAuth.aspx)刚刚也适用于谷歌（[源代码](https://github.com/AArnott/dotnetopenid/blob/master/samples/OpenIdRelyingPartyWebForms/loginPlusOAuth.aspx.cs)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:52:33.377

我刚刚检查了 Yahoo openID + OAuth 实现并收到此警告消息

```
 WARNING - PLEASE READ

Yahoo is strongly encouraging Yahoo! end-users not to authorize any new applications using OAuth until the recently discovered security issue with the OAuth protocol is resolved. Yahoo! is not aware of any exploits of this issue prior to April 23, 2009.

If you click the "continue at your own risk" button below, your private data may be exposed to unintended third parties.

Note: Unless you click "Continue at your own risk," your data has not been shared.

Note to Developers: Developers who are authorizing their own apps, for the purposes of testing, may proceed at their own risk. Yahoo! recommends that developers create test accounts with test data for testing their application. 
```

显然，OAuth 发生了一些可疑的事情，但是我看不出谷歌是否在这方面发布了任何公告，也看不到 Plaxo！

# mysql - 第一个mysql触发器失败

> ID：821070
> 
> 赞同：0
> 
> 时间：2009-05-04T17:32:46.390
> 
> 标签：mysql, triggers

好的，我已经开始在 mysql 中编写我的第一个触发器，它没有给出错误，但它也不起作用......

```
DELIMITER $$

DROP TRIGGER `cc`.`update_expires_date_trig`$$
CREATE TRIGGER `update_expires_date_trig` BEFORE INSERT ON `credit_test_acc` 
 FOR EACH ROW BEGIN
    UPDATE credit_test_acc SET date_expires_acc = DATE_ADD(CURDATE(), INTERVAL 6 MONTH) WHERE type_acc = 'init'
END;
$$
DELIMITER ; 
```

我有两个问题：

1.  无法更新存储函数/触发器中的表“credit_test_acc”，因为它已被调用此存储函数/触发器的语句使用。

2.  定义的触发器是要更新刚刚插入的行还是数据库中的每一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T17:44:02.417

据我所知，它必须像这样重写才能按您期望的那样工作：

```
DELIMITER $$

DROP TRIGGER `cc`.`update_expires_date_trig`$$
CREATE TRIGGER `update_expires_date_trig` BEFORE INSERT ON `credit_test_acc` 
FOR EACH ROW BEGIN
   SET NEW.date_expires_acc = DATE_ADD(CURDATE(), INTERVAL 6 MONTH)
END;
$$
DELIMITER ; 
```

其中 NEW 指的是即将插入到表中的行。您没有对“type_acc”在这里可能扮演什么角色给出任何解释（我可以想到不止一种可以解释的方式），所以我把它省略了。如果是我认为的那样，您可以像这样应用它：

```
IF NEW.type_acc = 'init' THEN # do whatever you want here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-14T22:19:32.010

触发器不能更改触发它的表。
无论是直接的还是间接的。

您只能通过 更改`BEFORE`触发器中的值`SET new.field = newvalue`。
这只会影响扣动扳机的“当前”行（可以这么说）。

# .net - 免费/开源 .NET Diff 生成器？

> ID：821075
> 
> 赞同：0
> 
> 时间：2009-05-04T17:33:19.323
> 
> 标签：.net, diff, filecompare

我正在寻找一个免费的库，它可以采用两个字符串并产生一个差异，就像您在 SO 上的编辑修订中看到的差异一样。

我希望存在一个，因为这是我正在开发的应用程序的一个微不足道的部分，我不想浪费时间重新发明轮子。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-05T01:07:30.913

我刚刚发布了我的[DiffPlex](http://diffplex.codeplex.com)项目，它完全符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:58:38.620

令人惊讶的是，我发现了一种可以为您提供与 SO 编辑相同的功能的实现。[codeproject](http://www.codeproject.com/KB/recipes/GenericDifferential.aspx)我也将使用它，并希望这对其他人也有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T17:44:22.883

您可以对两个文件进行 MD5 哈希以确定它们是否相同。SO 风格的修订历史会更加密集。

查看此 diff 工具的源代码，这可能会让您朝着正确的方向前进。

[http://dotnet.jku.at/applications/Diff/Src.aspx](http://dotnet.jku.at/applications/Diff/Src.aspx)

# sql - 查询未拉入选择框值，oracle

> ID：821078
> 
> 赞同：0
> 
> 时间：2009-05-04T17:34:28.757
> 
> 标签：sql, oracle

我正在使用应用程序构建器并设置选择框来填充一个查询，该查询会输出到下面的报告中，但我在填充时遇到了问题，我无法立即看到原因；

这是我引用的方式；

和 CINEMA.LOCATION = :pticketstown

这工作正常，并从电影院表上的查询中填充的选择框中拉入选择，但是当我尝试对另一个表做同样的事情时，尝试从选择框选项中拉入电影标题 - 它似乎不起作用，rport 说没有输出。

我以相同的方式设置选择框，并将其拉入电影，但是当我在 sql 报告中引用它时，输出为空。

FILM.FILM_TITLE = :pfilm

有没有人想过为什么它会在使用相同方法的东西上失败？是否存在价值没有传递的情况？如果是这种情况，我会有点难过，因为我的设置方式与工作方式相同。

感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T19:19:53.793

这两个看似相似的查询表现不同，这似乎很奇怪。您可以访问实际生成的 sql 吗？如果是这样，我会尝试直接通过命令行或 sql developer 对你的数据库运行它，如果你有的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T23:56:57.137

我从它的声音假设您正在使用应用程序快递？您是否打开了调试以查看正在传递的确切内容？它可能正在编码空格或其他东西。

# java - 何时使用 Set vs. Collection？

> ID：821079
> 
> 赞同：47
> 
> 时间：2009-05-04T17:34:52.407
> 
> 标签：java, collections

除了 a可以包含两次相同的元素之外，a`Set`和`Collection`Java之间是否有任何实际区别？`Collection`他们有相同的方法。

（例如，是否`Set`给了我更多使用接受`Set`s 但不接受 s 的库的选项`Collection`？）

**编辑：**我可以想到至少 5 种不同的情况来判断这个问题。其他人能想出更多吗？我想确保我理解这里的微妙之处。

1.  设计一个接受`Set`or参数的方法`Collection`。`Collection`更通用，接受更多的输入可能性。（如果我正在设计一个特定的类或接口，我会更好地对待我的消费者，并且如果我使用`Collection`.）
2.  设计一个返回`Set`or的方法`Collection`。`Set`提供更多的保证`Collection`（即使只是保证不包含一个元素两次）。（如果我正在设计一个特定的类或接口，我会更好地对待我的消费者，并且如果我使用`Set`.）
3.  设计一个实现接口的类`Set`或`Collection`. 与#2类似的问题。我的类/接口的用户得到更多的保证，子类/实现者有更多的责任。
4.  设计一个扩展接口的接口`Set`或`Collection`. 与#3 非常相似。
5.  编写使用`Set`or的代码`Collection`。在这里我不妨使用`Set`; 我使用的唯一原因是如果我从别人的代码中`Collection`取回 a ，或者我必须处理包含重复项的集合。`Collection`

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-05-04T17:37:42.260

[`Collection`](http://java.sun.com/javase/6/docs/api/java/util/Collection.html)也是 , , 和其他的超类型`List`，`Queue`因此`Deque`它为您提供了更多选择。例如，我尝试将`Collection`不应显式依赖于某种集合类型的库方法用作参数。

通常，您应该为工作使用正确的工具。如果您不想重复，请使用`Set`（或者`SortedSet`如果您想要订购，或者`LinkedHashSet`如果您想要维护广告订单）。如果您想允许重复，请使用`List`，等等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-04T17:39:55.843

我想你已经想通了`Set`——当你想明确排除重复项时使用 a 。 `Collection`通常是最小的公分母，指定接受/返回它的 API 很有用，这为您留出了稍后在需要时更改细节的空间。但是，如果您的应用程序的详细信息需要**唯一的条目**，请使用`Set`来强制执行此操作。

同样值得考虑的是顺序对您是否重要；如果是，请使用`List`，或者`LinkedHashSet`如果您关心顺序*和*唯一性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T17:39:20.697

请参阅 Java 的[Collection 教程](http://java.sun.com/docs/books/tutorial/collections/interfaces/index.html)，了解 Collection 的使用。特别是，检查类层次结构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T17:41:07.993

正如@mmyers 所说，Collection 包括 Set 和 List。

当您将某物声明为 Set 而不是 Collection 时，您是在说该变量不能是 List 或 Map。不过，它将永远是一个集合。因此，任何接受 Collection 的函数都将接受 Set，但接受 Set 的函数不能接受 Collection（除非您将其强制转换为 Set）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-04T19:12:30.707

要考虑的另一件事...集合在时间、内存和编码方面有额外的开销，以确保没有重复。（时间和内存，因为集合通常由 HashMap 或 Tree 支持，这会增加列表或数组的开销。编码是因为您必须实现 hashCode() 和 equals() 方法。）

当我需要快速实现 contains() 时，我通常使用集合，否则使用 Collection 或 List，即使集合不应该有重复项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T17:40:34.047

当你想要的时候，你应该使用 Set 。

例如，没有任何顺序或重复的列表。像 contains 这样的方法非常有用。

集合更通用。我相信 mmyers 写的关于他们的用法说明了一切。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-04T17:41:10.037

实际的区别在于 Set 强制执行**集合**逻辑，即没有重复和无序，而 Collection 没有。因此，如果您需要一个集合，并且您对避免重复没有特别的要求，那么请使用一个集合。如果您对 Set 有要求，请使用 Set。一般使用可能的最高接口。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-04T19:12:36.103

由于 Collection 是 Set 和 SortedSet 的超类型，因此可以将它们传递给需要 Collection 的方法。集合只是意味着它可能会或可能不会被排序、排序或允许重复。

# iphone - 同时编写 iPhone、BlackBerry 和 Android 手机的技术？

> ID：821085
> 
> 赞同：32
> 
> 时间：2009-05-04T17:36:15.540
> 
> 标签：iphone, android, blackberry

是否有策略或至少是最佳实践来编写在 iPhone、BlackBerry 和 Android 上运行的应用程序？

我对 BB 和 Android 的开发环境一无所知，但我认为它们都支持 Java 应用程序。

我知道 iPhone 需要一个 ObjectiveC 部分（以及一个全新的 UI）。

有人做过吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-04T17:38:34.880

您可能想查看[http://phonegap.com/](http://phonegap.com/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-04-10T04:59:16.867

一种适用于某些类型的应用程序（例如参考应用程序）的技术： **使用 HTML/CSS/JavaScript**并编写使用**平台的 HTML 查看器对象的**紧凑客户端来读取本地嵌入的 Web 内容。

编写在 BlackBerry 和 Windows Mobile 上运行的跨平台应用程序的一种技术是全部用 HTML 编写。我必须使用在 BlackBerry Browser 和 Pocket Internet Explorer 上都可以使用的 HTML 和 CSS 子集。我也使用了少量的 JavaScript。

我编写了非常小的查看器，它们使用 jar:// (BlackBerry) 和 res:// (Windows Mobile) URL 运行内部存储的 HTML 和图像。通过使用自定义版本的浏览器字段和 . Windows Mobile 也一样，我可以在我的 Windows Mobile 应用程序中使用 Pocket Internet Explorer 作为嵌入式 ActiveX。

注意——对于 BlackBerry，我必须支持运行 OS 4.2 的旧设备。为此，我回收了很多 RIM 代码示例，例如 SecondaryResourceFetchThread.java 以提取嵌入在应用程序中的图像，并通过实现 HttpConnection 的自定义连接对象传递给它，该对象我设计用于在内部处理 jar:// URL在我的 BlackBerry 应用程序中嵌入 HTML/图像。这有点棘手。对于 Windows Mobile，它更直观。

还有其他方法可以满足我的需要，但它非常适合医疗参考应用程序，而且我能够为 BlackBerry 和 Windows Mobile 设计单独的 CSS 文件，以便为两种移动设备重新格式化内容略有不同。（这有点像在过去测试 Netscape 与 Internet Explorer 的兼容性。）

这可能不适用于您的情况，但如果您的应用程序是 web 样式的“参考”应用程序，并且您知道如何做好 HTML，那么这种方法可能会奏效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-04-27T18:42:39.640

我们目前也在调查这个问题，我们发现：

[钛](http://www.appcelerator.com/products/titanium-mobile-application-development/)

[科尼解决方案](http://www.konysolutions.com/wore.php)

这些产品有很好的评价。Titanium 对于社区版是免费的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-04T21:30:01.110

另一个值得关注的选项是[Rhodes](http://github.com/rhomobile/rhodes/tree/master)，它是一个 Ruby 框架。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T18:57:14.440

在编写多平台应用程序时，您需要决定要共享多少代码。2个选项是

*   一切。您使用（编写）跨平台 gui 库和系统例程
*   逻辑是跨平台的，但表示层是特定于平台的

第二种方法往往会提供更好的应用程序，但它的工作量更大（假设您不需要编写跨平台库）。

移动世界的棘手之处在于选择一种语言。现在你有

*   *Java*：Android、Blackberry、Java ME 手机
*   *目标 C/C* : iPhone, windows Mobile
*   *Javascript* : 掌上电脑

您可以将 java 交叉编译为 javascript，反之亦然。您还可以将 java 编译为 C 或使用可以从 C 调用的 javascript 引擎。我认为您不能在 java/javascript 手机上运行 C。这导致我建议用 Java/Javascript 编写代码。交叉编译（和一般的混合语言）的缺点是使调试更加困难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T19:05:49.803

[http://j2mepolish.org](http://j2mepolish.org)可能是不错的选择，但是，iphone 仅在路线图中。但是已经支持 android 和 BB 以及所有其他 j2me 手机。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-03-08T02:03:24.623

另外，如果您正在编写游戏，请查看我的名为 Cuttlefish Engine 的跨平台（iPhone、Android 等）解决方案，网址为[http://www.cuttlefishengine.com](http://www.cuttlefishengine.com)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-06-27T12:36:21.103

此外，您可以尝试移动社区框架 (MCF)。这是一个在 iPhone、Android、WinMobile、Symbian 和 BlackBerry 上本地运行的跨平台框架。如果无法直接连接，MCF 会在 Wi-Fi Ad-Hoc 网络中或通过专用代理服务器为您处理网络、位置和邻近操作。它具有简单的 API，并且可以免费使用。通过这种方式，您可以在每个平台上分别开发您的应用程序接口和逻辑，并使用 MCF 以您喜欢的方式连接您的应用程序实例。

更多信息请访问[http://uvamobiltec.com](http://uvamobiltec.com)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-09-10T16:37:36.957

你总是可以在网络上编写一个 javascript 应用程序，它应该适用于所有这三个。当然，这不会安装在手机上。

Android 有一个运行 Javascript 的 webview。我相信其他平台也一样。如果您使用 javascript 编写大部分逻辑，则可以跨平台重用该 javascript。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-10-11T23:31:57.420

另一个框架是[http://www.mosync.com/](http://www.mosync.com/)

它似乎支持所有主要平台。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-04-17T01:06:26.693

如果你想写跨平台的 web 应用，[SenchaTouch](http://www.sencha.com/products/touch/)或[Phonegap](http://www.phonegap.com/)是一个不错的选择。

如果你更喜欢原生应用，最好的跨平台解决方案是[Titanium](http://www.appcelerator.com/)。使用 Titanium，您可以用 Javascript 编写应用程序，并将 JS 编译为本机代码（Objective-C、Java...）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-06-10T14:55:27.373

Adobe Flex 和 Flash Builder 看起来也很有前途。你仍然应该考虑它的专有性，但他们的开发者中心网站上的[视频](http://tv.adobe.com/watch/adobe-technology-sneaks-2011/sneak-peek-of-mobile-application-development-with-flex-and-flash-builder/)似乎值得。顺便说一句，最新版本目前支持Android。对 iOS 的支持应该会在 2011 年 6 月通过更新推出。

# c# - 控件中的嵌入式表单或作为用户控件的表单

> ID：821094
> 
> 赞同：5
> 
> 时间：2009-05-04T17:37:48.873
> 
> 标签：c#, .net, winforms, user-controls

好的，我有一个大型 CRUD 应用程序，它使用嵌入了表单的选项卡，就像这样 -->

```
public static void ShowFormInContainerControl(Control ctl, Form frm)
    {
        frm.TopLevel = false;
        frm.FormBorderStyle = FormBorderStyle.None;
        frm.Dock = DockStyle.Fill;
        frm.Visible = true;
        ctl.Controls.Add(frm);
    } 
```

然后我在父表单的表单加载事件中调用以下内容-->

```
 // Embedd the child form in the this Parent
        WinFormCustomHandling.ShowFormInContainerControl(pnlModuleHost, _frmWWCModuleHost); 
```

这是在回答我之前的问题时给我的[。](https://stackoverflow.com/questions/543087/custom-class-for-dealing-with-embedding-in-forms/545864#545864)

当我在这方面取得进展时，我一直有一种令人讨厌的感觉，即多层嵌入式表单是一场等待发生的灾难，并且用户控件不断弹出。谁能给我一些关于使用用户控件和嵌入表单的具体建议？

有关此问题的灵感，请参阅我的上一个问题。[这里](https://stackoverflow.com/questions/820461/ui-design-of-winform-crud-app-what-works)

[还可以在这里](http://picasaweb.google.com/lh/photo/MoJ9OhnRGsJSvIydBPjWiw?feat=embedwebsite)找到我当前的嵌入式表单布局的屏幕截图。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T18:33:58.927

我的观点是，你选择哪个方向可能并不重要。我会选择使用用户控件只是因为它是更标准的方法，并且可以让您在前进中获得更大的灵活性。例如，如果您的客户来找您并说他们希望将两个选项卡合并到一个选项卡中怎么办？用户控件将允许您将这两个控件放在一个选项卡上，而无需将控件组合成一个表单，然后在下个月需求再次更改时将其更改回来。

您有一个大型、复杂的应用程序，其中有很多部分，据我所知，需要相互通信。我认为您应该问自己的问题不是“表单还是用户控件？”。您应该问自己的问题是，“这是适合此应用程序的架构吗？”。

我认为包含插件类型架构的设计可能更适合您拥有的许多移动部件......或者您可以看看微软的模式和实践复合应用程序块（[CAB](http://msdn.microsoft.com/en-us/library/cc707819.aspx)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T14:07:38.717

我会使用 UserControl，它认为那里更简单，你可以看到设计器中发生了什么（如果你愿意的话），Form 有一堆你永远不需要的东西，如果你只是将它用作容器中的视图.

将此与您的方法进行比较：

```
public static void DockControl(this Control control, UserControl userControl)
            {
                userControl.Dock = DockStyle.Fill;
                control.Controls.Clear();
                control.Controls.Add(userControl);
            } 
```

# scala - 函数式语言（Erlang、F#、Haskell、Scala）

> ID：821105
> 
> 赞同：28
> 
> 时间：2009-05-04T17:40:16.980
> 
> 标签：scala, haskell, f#, functional-programming, erlang

1.  函数式语言适合 Web 应用程序开发吗？
2.  功能语言是否适合业务/ [ERP](http://en.wikipedia.org/wiki/Enterprise_resource_planning) / [CRM](http://en.wikipedia.org/wiki/Customer_relationship_management)类型的应用程序？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-04T17:54:18.820

您描述的那种功能语言是通用编程语言，它们用于各种事物，包括网络应用程序和商业应用程序。（我使用 Haskell）。

*   [Haskell 适合 Web 应用程序吗？](http://jekor.com/article/is-haskell-a-good-choice-for-web-applications)
*   [在 Haskell 中构建商业网络应用程序](http://blog.tupil.com/building-commercial-haskell-applications/)

正如 gabor 所暗示的，最终归结为图书馆。Scala 有一个 Web 框架：lift。Haskell 拥有[happstack](http://happstack.com/)以及~~2100~~ 4400（~~2010 年~~2012 年）关于[Hackage](http://hackage.haskell.org)的各种库。

在考虑特定的专业领域时，与其说是语言问题，不如说是工具链问题。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-04T17:48:36.820

函数式语言适用于你想用它们做的任何事情。

然而，如今开发应用程序并不像使用编程语言那么简单。Java、C# 等的优势在于它们带有大型库和其他在构建业务软件时绝对需要的环境细节。大多数函数式语言都没有那么大的支持（到目前为止？）。

F# 可能很有前途，因为它在 .NET 环境中并且可以利用那里可用的工具（如果我错了，请纠正我）。

本文[描述](http://www.paulgraham.com/avg.html)了 Lisp，一种早期的函数式语言，是如何成功地用于创建基于 Web 的应用程序的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-04T17:48:20.520

函数式语言非常适合 Web 应用程序开发，尤其是 Scala。

查看[Lift](http://liftweb.net/)框架以获取更多信息。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2011-09-04T01:59:24.413

> 2) 功能语言是否适合业务/ERP/CRM 类型的应用程序？

为了解决关于业务/ERP/CRM 应用程序的第二点：我个人不会用像 Haskell 这样的“纯”函数式语言或像 Clojure 这样的动态函数式语言来实现这些。另一方面，我*目前*正在 Scala 中实现一个 ERP，它当然是混合 OOP/FP 和静态编译的。

我这么说的原因是，像 ERP 这样的业务应用程序基本上是面向记录的：有一个数据模式表示不同的记录类型，然后应用程序逻辑几乎完全围绕对这些记录进行 CRUD 设计，并将自定义业务工作流应用于它们。从根本上说，我不认为这些以数据为中心的业务应用程序非常适合功能模型。

人们可以随心所欲地谈论 OOP 关系不匹配，但最终 OOP 和数据库都是面向记录的：具有良好 ORM 的 OOP 语言允许您将这些不同的数据模型映射到您的代码中，然后附加代码来处理每个楷模。并且具有这种静态类型（理想情况下使用像 Scala 的 squeryl 之类的强类型 ORM）会大大减少运行时错误的可能性，或者例如对未通过代码正确应用的数据模型之一的更改。

不要误会我的意思——我是 FP 的忠实粉丝（我越来越多地在 Haskell 中进行系统编程），但对我来说，面向记录的 OOP 方法比面向函数的方法更有意义FP 用于处理业务 ERP 或类似的数据对象。（Scala 是该规则的一个很好的例外，因为您可以使用带有质量 ORM 的 OOP 范式来进行记录操作，而且还可以使用 FP 来进行一般的应用程序编程。）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-04T18:42:18.203

1.  是的，Nitrogen 是功能性 Web 框架的一个很好的例子。它也可以缩放。

[http://nitrogenproject.com/](http://nitrogenproject.com/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-04T20:09:52.003

[Yaws](http://en.wikipedia.org/wiki/Yaws_%28web_server%29)是一个出色的 Erlang Web 服务器。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-04T17:53:14.687

虽然我不会说任何特定的函数式语言都是为进行 Web 开发而量身定制的，但我也不会说你不能使用函数式语言进行 Web 开发。我认为这完全取决于您选择的语言可以使用哪些 Web 框架，以及是否有任何 Web 服务器支持该语言。

例如，我确信您可以在 IIS 上使用 F# 和 ASP.Net 来进行 Web 开发。我怀疑模板引擎是否支持 F#，但您绝对可以在 F# 中编写业务逻辑。

同样，`mod_haskell`对于 Apache，它应该可以相对容易地使用 haskell 进行动态输出。虽然，我从来没有亲自使用过它。同时，如果有`mod_(erlang or scala)`Apache 的，对于那些语言来说同样容易。

最终，我认为函数式语言的无状态特性应该使其非常适合无状态、MVC 风格的 Web 框架。然而，我认为这真的归结为在使用这些语言时可以使用哪些工具和框架来让你的生活更轻松。例如，在 Rails 流行之前，Ruby 在 Web 开发中并没有真正流行，而在我发现 django 之前，我并不真正喜欢用 Python 做任何 webby。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-04T19:20:16.943

函数式语言提供了可用于 Web 开发的新型抽象。例如，基于延续的 Web 服务器在函数式语言中很流行。[PLT Scheme Web 服务器](http://docs.plt-scheme.org/web-server/index.html)支持这种 Web 应用程序开发。[您可以在wikipedia](http://en.wikipedia.org/wiki/Continuation#Continuations_in_Web_development)上阅读更多关于 continuation 及其在 Web 开发中的用途的信息

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-06T14:49:03.240

大多数功能语言，即您包含的那些，都被认为是通用语言。对于 Web 开发，我会深入考虑使用 Clojure 或 Scala。它们都有非常好的 Web 框架，并且都运行在 JVM 上。我完全可以推荐 Clojure 和 Scala，但对其他的就不那么推荐了。

Haskell 有一个 web 框架，但我从未使用过它。

商业应用？当然，为什么不呢。函数式语言几乎适用于任何事情。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2009-05-04T19:04:32.817

函数式语言的支持者声称的最大优势之一是它们使编写可以并行执行的程序变得更加容易。但是 Web 应用程序通常不存在并行性问题。通常，Web 服务器/应用程序服务器维护一个线程池，每个用户请求被分配到一个不同的线程，该线程可以在不同的物理处理器上运行。因此，您可以毫不费力地利用多个处理器。诀窍在于，Web 应用程序的特点是大量的小请求，并且线程和命令式语言在那里运行良好。当您有少量计算量大的请求时，命令式语言开始崩溃的地方。

函数式语言的另一大优势是，由于函数没有副作用，因此测试更容易。您在几个输入中单独测试每个功能，并且您知道系统将工作。但是，有一个问题。如果您的操作涉及输入或输出，那么您将使用 monad 而不是函数，并且您将失去该部分代码的可测试性优势。

但是，通常 Web 应用程序涉及从请求中读取信息、向数据库发出请求、从数据库中读取响应以及格式化响应。那是很多很多的 IO 或 monad，而函数的机会很少。

鉴于 Web 应用程序的这些特性，函数式语言为 Web 应用程序编程带来了哪些好处？

# sql-server - SQL Server 中唯一标识符列上的聚集/非聚集索引

> ID：821108
> 
> 赞同：4
> 
> 时间：2009-05-04T17:41:03.033
> 
> 标签：sql-server, indexing, uniqueidentifier

我在这里阅读了各种问题/答案，这些问题/答案基本上表明，出于性能原因，在 uniqueidentifier 列上使用聚集索引是一个糟糕的选择。无论如何，我需要使用 uniqueidentifier 作为我的主键，并且我不想使用 newsequentialid() 因为生成的值彼此太相似（我需要更多随机 ID，所以用户不能 [合理地] '猜测'另一个ID）。

那么，索引这个 PK 的最佳方法是什么？即使此列上的聚集索引并不理想，它是否比“唯一、非聚集”索引更好？

我正在使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T17:45:53.660

首先，如果你试图用它`NEWID()`来实现随机性（不仅仅是看起来随机），你就有麻烦了。

这通常不是理想的选择，因为其他索引将引用聚集索引键，而长聚集索引键会降低所有索引的性能。您可以创建一个整数列并将其设为聚集索引，然后在该列`IDENTITY`上创建一个非聚集唯一索引。`uniqueidentifier`

# wpf - 如何在用户输入文本框时启用按钮

> ID：821121
> 
> 赞同：20
> 
> 时间：2009-05-04T17:44:04.553
> 
> 标签：wpf, button

`Button`当用户在 a 中键入内容时，WPF 中启用 a 的最简单方法是什么`TextBox`？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2010-01-18T12:31:58.147

为什么大家都把事情搞得这么复杂！

```
 <TextBox x:Name="TB"/>
    <Button IsEnabled="{Binding ElementName=TB,Path=Text.Length}">Test</Button> 
```

其他什么都不需要......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-12-03T10:11:13.483

使用触发器！

```
<TextBox x:Name="txt_Titel />
<Button Content="Transfer" d:IsLocked="True">
  <Button.Style>
    <Style>
      <Style.Triggers>
        <DataTrigger Binding="{Binding ElementName=txt_Titel, Path=Text}" Value="">
         <Setter Property="Button.IsEnabled" Value="false"/>
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </Button.Style>
</Button> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T01:51:48.750

如果您没有使用命令，另一种选择是使用转换器。

例如，使用通用 Int 到 Bool 转换器：

```
 [ValueConversion(typeof(int), typeof(bool))]
  public class IntToBoolConverter : IValueConverter
  {
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
      try
      {
        return (System.Convert.ToInt32(value) > 0);
      }
      catch (InvalidCastException)
      {
        return DependencyProperty.UnsetValue;
      }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
      return System.Convert.ToBoolean(value) ? 1 : 0;
    }

    #endregion
  } 
```

然后在按钮 IsEnabled 属性上：

```
<Button IsEnabled={Binding ElementName=TextBoxName, Path=Text.Length, Converter={StaticResource IntToBoolConverter}}/> 
```

高温下，

丹尼斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T19:01:40.997

使用简单命令

```
<TextBox Text={Binding Path=TitleText}/>

<Button Command="{Binding Path=ClearTextCommand}" Content="Clear Text"/> 
```

这是视图模型中的示例代码

```
public class MyViewModel : INotifyPropertyChanged
{
    public ICommand ClearTextCommand { get; private set; }

    private string _titleText; 
    public string TitleText
    {
        get { return _titleText; }
        set
        {
            if (value == _titleText)
                return;

            _titleText = value;
            this.OnPropertyChanged("TitleText");
        }
    }   

    public MyViewModel()
    {
        ClearTextCommand = new SimpleCommand
            {
                ExecuteDelegate = x => TitleText="",
                CanExecuteDelegate = x => TitleText.Length > 0
            };  
    }            

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }     
} 
```

有关更多信息，请参阅 Marlon Grechs [SimpleCommand](http://marlongrech.wordpress.com/2008/11/26/avoiding-commandbinding-in-the-xaml-code-behind-files/)

[还可以从http://blogs.msdn.com/llobo/archive/2009/05/01/download-mv-vm-project-template-toolkit.aspx](http://blogs.msdn.com/llobo/archive/2009/05/01/download-m-v-vm-project-template-toolkit.aspx)查看 MVVM 项目模板/工具包。它使用 DelegateCommand 进行命令，它应该是任何项目的一个很好的起始模板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-13T13:38:09.733

关键在于绑定本身..

添加 UpdateSourceTrigger = PropertyChanged

这是最简单的解决方案

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-04T18:02:32.433

将回调添加到在每次笔划时触发的 TextBox。在此类回调中测试是否为空并启用/禁用按钮。

# .net - WindowsIdentity.GetAnonymous()

> ID：821129
> 
> 赞同：1
> 
> 时间：2009-05-04T17:45:09.293
> 
> 标签：.net, windows-identity

你能解释一下匿名身份的用途吗？据我所知，Windows 没有匿名帐户类型？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T17:49:17.630

匿名用户通常映射到来宾帐户，或者可以在 IIS 中与您选择的任何帐户相关联，以控制未经身份验证的用户的权限。

# weblogic - 如何整合 Facebook

> ID：821132
> 
> 赞同：0
> 
> 时间：2009-05-04T17:45:24.737
> 
> 标签：weblogic, portal

如何将 facebook 集成到我的门户（weblogic）应用程序。

谢谢 rj

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-29T12:07:04.950

Facebook为想要从头开始自己做所有事情的[开发人员提供了一个 Wiki 。](http://wiki.developers.facebook.com/index.php/Main_Page)

不过老实说，Facebook 的所有 API:s 都很糟糕，所以不要指望这会变得轻而易举，即使将 Facebook API:s 与崎岖不平的道路进行比较也是最高级别的赞美。

# macos - Mac上如何获取显示驱动版本？

> ID：821133
> 
> 赞同：3
> 
> 时间：2009-05-04T17:45:31.243
> 
> 标签：macos, driver

如何在 Mac 上以编程方式获取显示驱动程序版本？

* * *

有关的：

*   [以编程方式从 Mac OS X 获取处理器详细信息](https://stackoverflow.com/questions/853798/programmatically-get-processor-details-from-mac-os-x)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T23:52:44.160

查看 IOKit 和 IORegistryExplorer 应用程序。

具体来说，您需要在 IOKit 中搜索名称为“display”的设备，然后您将获得可以从中提取数据的设备节点。使用 IORegistryExplorer 应用程序查看该对象有哪些类型的属性可用，以及它们是哪些类型的数据等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T17:48:35.230

**Apple** ->**关于本机**->**更多信息**

展开**硬件**下拉菜单并单击**图形/显示**选项

这将显示有关当前视频卡和驱动程序信息的所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:03:16.067

从命令行运行`system_profiler`。[获得与基于 GUI 的答案](https://stackoverflow.com/questions/821133/how-can-display-driver-version-be-obtained-on-the-mac/821145#821145)相同的数据。

# c# - 如何在 C# 的线程中使按钮成为焦点

> ID：821137
> 
> 赞同：2
> 
> 时间：2009-05-04T17:46:45.453
> 
> 标签：c#, focus, button

我需要在线程末尾设置一个按钮焦点。Button.Focus() 方法似乎不起作用。

例如：

```
Button1_Click(object sender, EventArgs e)
{
   Thread myThread = new Thread(theThread);
   myThread.Start();
}

theThread()
{
  ... 
  Button2.Focus(); // does not seem to focus the button
} 
```

但是，如果我将 Button2.Focus() 放在 Button1_Click 中，它将聚焦，但对于我的项目，我不能这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T17:50:17.860

有关此类问题的通用解决方案，请查看[`SyncronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)class。但是，对于 Windows 窗体，您可以使用该[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)方法，在 WPF 中，您可以使用[`Dispatcher.Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)：

```
//WinForms:
Invoke(delegate{ Button2.Focus(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:50:12.247

任何 UI 更改都必须从表单的主线程进行。考虑从您自己的线程中调用表单的“Invoke”方法。您需要将“Invoke”委托传递给在您的按钮上调用“Focus”方法的方法。

# iphone - 如何为 iPhone / iPod 转换网站？

> ID：821142
> 
> 赞同：0
> 
> 时间：2009-05-04T17:48:03.733
> 
> 标签：iphone

如果客户给您一些网站，然后告诉您将此设计转换为与 iPhone 兼容且用户友好的网站，那么在转换或优化 iPhone 时要注意哪些点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T17:53:54.937

你基本上有两个选择：

1.  不要优化。iPhone 版 Safari 非常有能力显示完整的网站。（只是不要使用 Flash）
2.  充分重新设计并创建一个固定宽度为 320 像素的迷你网站。

我会选择选项 1。作为 iPhone 所有者，当某些网站自动引用“iPhone”版本时，我会感到困扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-11T13:23:57.120

如前所述，iPhone Safari 会很好地呈现网站。但是，经过优化的网站，或者至少为 800x600 和更大尺寸设计的网站在 iphone 视口的 320x356 上显示效果不佳。很多细节都丢失了，点击链接可能是一件喜忧参半的事情。

最好的方法是在考虑 iPhone 视口的情况下重写基本页面，并且只放入基本元素。

可以通过以下方式检测到 iPhone：

```
$browser = strpos($_SERVER['HTTP_USER_AGENT'],"iPhone");
if ($browser == true)  { echo 'Code You Want To Execute'; }
else{echo 'just carry on';} 
```

然后需要通过分析用户在较小尺寸设备上浏览时可能想要的网站基本元素来构建页面。当然还有返回完整站点的链接。

苹果可能会为此制定指导方针，当然 eBay 已经完成了一些可以通过浏览那里看到的工作。在这短短的篇幅中，我无法更详细地介绍您是如何进行重新设计的，而是通过讨论、分析网站使用情况以及与网站的用户或所有者交谈来进行。

# c# - 开源 .NET 桌面 UI 框架

> ID：821143
> 
> 赞同：7
> 
> 时间：2009-05-04T17:48:09.880
> 
> 标签：c#, open-source

是否有任何开源框架可以帮助构建 .NET GUI？

我也可以使用免费框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T17:52:40.087

其中有不少。

大多数较大的都[列在这里](http://mono-project.com/Gui_Toolkits)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T17:53:43.923

[OpenWinforms](http://feeds.feedburner.com/Openwinforms)有各种开源控件和一些各种各样的文章。

如果您只是在寻找一些免费控件，[Krypton Toolkit](https://github.com/ComponentFactory/Krypton)是一个非常不错的库，它有一个包含许多常用控件的免费库，但没有可用的源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:55:11.890

是的，当然——如果你打算使用 WPF/Silverlight，请看看[Caliburn——](http://www.codeplex.com/caliburn)它是一个用于 WPF 和 Silverlight GUI 开发的精益框架。

它为 IoC 容器集成提供了一些不错的功能，并且它支持各种模式，这些模式在编写视图代码时是很好的实践 - 例如，命令模式非常漂亮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T17:59:35.610

查看[模式和实践 - 智能客户端指南](http://smartclient.codeplex.com/)或 Microsoft 的任何其他[模式和实践项目](http://www.codeplex.com/site/search?TagName=patterns%20%26%20practices)。如果您要编写企业应用程序，它们很好，对于一个小型爱好项目，它们可能有点过大。

# c# - 我可以重置静态/共享类吗？

> ID：821151
> 
> 赞同：7
> 
> 时间：2009-05-04T17:49:49.407
> 
> 标签：c#, .net, vb.net, static, shared

我有一个`shared`类（`static`在 C# 中），它主要携带一些设置数据，应用程序中的任何类都可以读取和有时写入。还有一些静态属性包含一些内部状态。

现在我想将这个类恢复到它的初始阶段。使用所有默认变量等。*假设用户想要重置当前状态并重新开始而不重新启动应用程序。*

在单例模型中，我只需使用以下内容对其进行更新：

```
Public Sub Reset() 
    _Instance = New MyClass()
End Sub 
```

然而，这在课堂上是不可能的`Shared`。有什么想法可以做到这一点吗？还是我应该切换**回**单例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-04T17:54:15.137

没有办法以与您刚刚指出的单例模型相同的方式做到这一点。原因是没有“重置”的后备数据存储。但是，您可以做的是通过使用显式方法来初始化我们所有的数据来模拟这一点。

```
Public Module MyClass

  Public Sub Reset()
    Field1 = 42
    Field2 = "foo"
  End Sub

  Public Shared Field1 As Integer
  Public Shared Field2 As String
End Module 
```

带有类与模块的版本

```
Public Class MyClass
  Shared Sub New()
    Reset
  End Sub
  Private Sub New()
    ' Prevent instantiation of the class
  End Sub

  Public Sub Reset()
    Field1 = 42
    Field2 = "foo"
  End Sub

  Public Shared Field1 As Integer
  Public Shared Field2 As String
End Class 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T17:53:44.187

您不能在静态类中执行此操作，因为没有静态类的实例。

这两个选项是切换（返回）到单例。

或者，您可以有一个方法来重置类的每个静态成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-18T10:49:51.787

您可以在静态类中创建一个方法来重置所有属性的值。考虑你有一个静态类

```
public static class ClassA
{
     public static int id=0;
     public static string name="";

     public static void ResetValues()
     {
         // Here you want to reset to the old initialized value
         id=0;
         name="";
     }
} 
```

现在您可以使用任何其他类的以下任何方法来重置静态类的值

**方法 1 - 直接调用**

```
ClassA.ResetValues(); 
```

**方法 2 - 从已知命名空间和已知类动态调用方法**

```
Type t1 = Type.GetType("Namespace1.ClassA");
MethodInfo methodInfo1 = t1.GetMethod("ResetValues");
if (methodInfo1 != null)
{
     object result = null;
     result = methodInfo1.Invoke(null, null);                
} 
```

**方法 3 - 从程序集/程序集动态调用方法**

```
foreach (var Ass in AppDomain.CurrentDomain.GetAssemblies())
{
     // Use the above "If" condition if you want to filter from only one Dll
     if (Ass.ManifestModule.FullyQualifiedName.EndsWith("YourDll.dll"))
     {
            List<Type> lstClasses = Ass.GetTypes().Where(t => t.IsClass && t.IsSealed && t.IsAbstract).ToList();
            foreach (Type type in lstClasses)
            {
                  MethodInfo methodInfo = type.GetMethod("ResetValues");
                  if (methodInfo != null)
                  {
                       object result = null;
                       result = methodInfo.Invoke(null, null);                                
                  }
             }
             break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T17:54:09.257

也许是一个静态方法，在调用时会将所有变量重置为默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-13T11:00:10.213

*   执行时间方面的快速方法是使用重置每个值的方法来重置值。

*   如果您想节省编码时间并编写无错误代码，请使用反射。如果您的静态类有许多静态字段，则使用反射可减少丢失属性或字段的机会。

如果您的静态类具有特殊的初始化属性/字段，请使用一种方法来初始化这些字段，即第一种方法。

如果您的静态类具有空值/默认初始化属性/字段，请使用反射遍历所有数据成员并将它们重置为默认值。

混合使用这两种编码方法可以节省时间并减少引入错误的可能性。

此代码重置`MyStaticClass`. 然后调用 Init 方法来初始化较少的其余字段。

```
var fields = typeof(MyStaticClass).GetFields(BindingFlags.Static | BindingFlags.SetField | BindingFlags.NonPublic | BindingFlags.Public);

foreach (var field in fields)
{
    var type = field.GetType();
    field.SetValue(null, null);
}

Init(); // if there are values to be initialized 
```

如果您的静态类具有属性，请同时调用`GetProperties`并执行相同的循环来重置它们。

# asp.net - 如何通过 DOM 从托管代码中设置 .aspx 页面中的下拉列表

> ID：821159
> 
> 赞同：0
> 
> 时间：2009-05-04T17:50:41.683
> 
> 标签：asp.net, silverlight, drop-down-menu

我有一个位于*.aspx*页面中的控件，但动态代码位于*Page.xaml.cs*的单独项目中。

在与控件相同的页面上，我有：

```
<asp:DropDownList ID="DropDownAppServer" runat="server" > 
```

在*Page.xaml.cs*我试过这样做：

```
HtmlElement element = doc.GetElementById( "DropDownAppServer" );
element.SetAttribute( "option", "blah" ); 
```

没用。虽然它适用于：

```
<input type="text" id="Text1" disabled="disabled" value="My Initial Value" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T18:06:09.023

你能详细说明你为什么不做吗

```
DropDownAppServer.Option = blah? 
```

如果您没有对控件的显式访问权限，则可以使用**FindControl(ctrlName)函数来获取对子对象的引用。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-24T17:15:04.907

我对 Silverlight 一无所知，但是通过名称将您的控件耦合在一起是非常脆弱的。

您是否有理由无法将对下拉列表的引用传递给您的控件？甚至是对您的控件所在页面的引用，这将允许您使用 Page.FindControl(...)。

# drupal - 我将如何建立继承节点状态的节点到节点关系

> ID：821163
> 
> 赞同：1
> 
> 时间：2009-05-04T17:51:30.480
> 
> 标签：drupal

我曾尝试使用 Drupal 5 和 6，但找不到解决方案...

几个月来，我一直在尝试获得这个看似简单的功能。一个简单的例子是这样的：

您创建一本书（父），有 10 页（子）。如果您删除或取消出版这本书，孩子们仍然存在。对我来说，这根本没有意义。

所以我的问题是如何通过不一定是书籍，而是一般的内容类型来实现这一点。需要考虑的几件事：

我试过节点相对论。我试过节点层次结构

我希望也许我可以使用评论，因为它们提供了完美的功能（删除节点并且它的所有评论也被删除）。我知道有一个注释作为节点作为节点（有一个模块，我已经尝试过了）。但问题是我需要多种内容类型和多种评论类型，因为我也使用发布配额并且需要内容类型 a 仅发布 10 条评论，但内容类型 b 发布 20 条评论。虽然没有评论类型，所以这不是一个选项。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T18:06:42.860

把它放在一个模块中会非常简单，只需实现[hook_nodeapi()](http://api.drupal.org/api/function/hook_nodeapi/6)将您的删除和状态更改传播给书的孩子。我真的不知道 Book 模块，但我认为找到 Book 节点的子节点相对容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-04T17:21:27.247

我没有使用过这些模块，但它们看起来似乎可以为级联删除另一个引用的节点提供解决方案：

节点关系 [http://drupal.org/project/noderelationships](http://drupal.org/project/noderelationships)

还有 CCK 的参照完整性（抱歉，由于评论中的 1 个链接限制，因此无法包含此链接）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-16T02:23:57.870

这是一篇旧帖子，但我想我应该留下一些我一直在研究的信息……尽管我仍然没有答案。

[http://drupal.org/project/nodehierarchy](http://drupal.org/project/nodehierarchy)

[http://drupal.org/project/relativity](http://drupal.org/project/relativity)

[http://drupal.org/project/noderelationships](http://drupal.org/project/noderelationships)

[http://drupal.org/project/flexifield](http://drupal.org/project/flexifield)

* * *

[http://drupal.org/project/popups_reference](http://drupal.org/project/popups_reference)

[http://drupal.org/project/nodereference_explorer](http://drupal.org/project/nodereference_explorer)

在尝试找到解决方案时需要考虑很多。

PS：我刚刚更新了这篇文章，提供了有关该主题的更多信息：[http ://groups.drupal.org/node/23899](http://groups.drupal.org/node/23899)

# asp.net-mvc - 使用 IIS 进行 ASP.NET MVC 调试时设置虚拟目录

> ID：821164
> 
> 赞同：11
> 
> 时间：2009-05-04T17:51:55.097
> 
> 标签：asp.net-mvc

我正在尝试使用 IIS 在 Visual Studio 中调试 ASP.NET MVC。问题是如果我在 Visual Studio 中选择“使用本地 IIS Web 服务器”，我必须选择一个虚拟目录，例如[http://localhost/myapp/](http://localhost/myapp/)

这是一个问题，因为假设 ASP.NET MVC 应用程序从根目录运行，并且 MVC 会将“myapp”解析为控制器，并且当我从 Visual Studio/IIS 运行应用程序时，后续请求将被定向到无论如何根。

如何解决这个问题呢？有没有办法使用 IIS 网站根目录而不是虚拟目录进行 Visual Studio 调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T19:09:06.853

你这么说

> 假定 ASP.NET MVC 应用程序从根目录运行，并且 MVC 会将“myapp”解析为控制器

但是，可以通过添加通配符映射从虚拟目录运行 ASP.NET MVC，如本文所述：

[IIS 6 上的 ASP.NET MVC 演练](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

另请参阅stackoverflow上的[这个问题](https://stackoverflow.com/questions/802253)，以及描述解决类似问题所遵循的步骤的[公认答案：](https://stackoverflow.com/questions/802253#804062)

[ASP.NET MVC 如何在应用程序作为域的子项目发布时使用路由？](https://stackoverflow.com/questions/802253)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T20:09:32.690

是的，您可以将 ASP.NET MVC 作为根应用程序运行。

只需使用 IIS 管理器将网站的主目录设置为应用程序的路径。

然后在 Visual Studio 中 MVC 的项目设置的“Web”选项卡中进行适当的更改。

这是假设您已经为 IIS 正确设置了 Windows 文件权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T07:03:00.343

转到您网站的属性（在项目菜单下）。选择底部的 web 选项卡，然后在虚拟路径字段中输入您在 IIS 中使用的相同虚拟目录名称。这可能会解决您的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-11T20:32:39.603

您还可以使用 Visual Studio 中的 Debug->Attach to Process 而不是 Start Debugging。

附加到 aspnet_wp.exe，无论它是否在虚拟目录中，您都可以调试 MVC 应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-24T06:20:21.077

网址重写可以帮助您解决问题。我已经实现了允许在任何 IIS 版本上部署 MVC 应用程序的解决方案，即使使用虚拟主机也是如此。 [http://www.codeproject.com/KB/aspnet/iis-aspnet-url-rewriting.aspx](http://www.codeproject.com/KB/aspnet/iis-aspnet-url-rewriting.aspx)

# javascript - Vista 侧边栏小工具未显示浮出控件 - System.Gadget.Flyout.show 未设置为 true

> ID：821168
> 
> 赞同：0
> 
> 时间：2009-05-04T17:53:05.703
> 
> 标签：javascript, dom, windows-desktop-gadgets

我有一个非常奇怪的错误。我无法在我的小工具上显示浮出控件，尽管我已经从具有正常工作的浮出控件的小工具中复制了字符的浮出控件代码字符。

这是代码：

```
function doFly(i){

var div = 'div_' + i;
flyHTML = $(div).html();

if (System.Gadget.Flyout.show == false){

System.Gadget.Flyout.file = "flyout.html";
System.Gadget.Flyout.show = true;
msgJS(System.Gadget.Flyout.show);
}

else{
System.Gadget.Flyout.show = false;
}

} 
```

msgJS 函数提供了一个用于调试目的的 ActiveX 弹出窗口。即使我在上一行中将 .show 设置为 true，但当我调用弹出窗口时，该值仍然为 false。我无法显示弹出窗口，期间。起初我以为我丢失了点击事件，但如果我留在主小工具 DOM 中，则点击正在注册，其余代码将正确执行。

.show 根本不会设置是怎么回事？我已经检查了已知的错误，但似乎没有一个适用于此。真让人抓狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T19:44:18.890

更新：这是我现在使用的代码：

函数 doFly(i){

```
var div = 'div_' + i;
flyHTML = $(div).html();

if (System.Gadget.Flyout.show == false){

    try {
        System.Gadget.Flyout.file = "flyout.html";
        System.Gadget.Flyout.show = true;
        $('a#teamr').text(System.Gadget.Flyout.show);
    }
    catch(e){
        $('a#teamr').text(e);
    }
}

else{
    System.Gadget.Flyout.show = false;
} 
```

这表明代码没有抛出异常，并且 .show 的值为 false。有一个与侧边栏相关的错误，小工具将失去焦点，并关闭弹出窗口。我只能想象我将不得不解决它。我的问题是：是什么导致注意力不集中？奇怪。

# .net - 为什么 Console.In Console.Out & Console.Error 属性是只读的？

> ID：821170
> 
> 赞同：2
> 
> 时间：2009-05-04T17:53:27.963
> 
> 标签：.net

有人知道为什么 Console.In、Console.Out 和 Console.Error 属性是只读的吗？有人可能会假设，因为 Microsoft 不打算让任何人更改它们，但该框架包括相关的 Console.SetIn()、Console.SetOut() 和 Console.SetError() 方法。

这是有正当理由还是只是一个愚蠢的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T17:59:08.667

完全猜测，但这可能是因为`Set*`方法已`HostProtectionAttribute`应用于它们。我不知道您是否可以将属性仅应用于属性的设置器部分。这当然是我从来没有做过的事情，事实上`HostProtectionAttribute`，从外观上看，它本身并不能应用于属性。

# python - 我在哪里可以找到一些“hello world”——简单的 Beautiful Soup 示例？

> ID：821173
> 
> 赞同：7
> 
> 时间：2009-05-04T17:53:51.690
> 
> 标签：python, beautifulsoup

我想用 Beautiful Soup 做一个非常简单的替换。假设我想访问页面中的所有 A 标签并将“？foo”附加到它们的href。有人可以发布或链接到如何做这样简单的事情的例子吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-04T18:09:56.083

```
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup('''
<html>
   <head><title>Testing</title></head>
   <body>
     <a href="http://foo.com/">foo</a>
     <a href="http://bar.com/bar">Bar</a>
   </body>
</html>''')

for link in soup.findAll('a'): # find all links
    link['href'] = link['href'] + '?foo'

print soup 
```

打印：

```
<html>
<head><title>Testing</title></head>
<body>
<a href="http://foo.com/?foo">foo</a>
<a href="http://bar.com/bar?foo">Bar</a>
</body>
</html> 
```

该[文档](http://www.crummy.com/software/BeautifulSoup/documentation.html)还包含一些[更改属性](http://www.crummy.com/software/BeautifulSoup/documentation.html#Changing%20attribute%20values)的示例。这是一个广泛的教程，涵盖了 BeautifulSoup 的所有常见方面。我不知道文档中缺少什么，也许您应该澄清一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-15T09:35:59.790

我的例子：

```
HEADERS = {"User-Agent" : "Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5",
       "Accept" : "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
       "Accept-Language" : "ru,en-us;q=0.7,en;q=0.3",
       "Accept-Charset" : "windows-1251,utf-8;q=0.7,*;q=0.7",
       "Accept-Encoding" : "identity, *;q=0",
       "Connection" : "Keep-Alive"}
PROXY=None
timeout=60

def parse_manuf_page_about(page_str_about):
slovar={}
global timeout
socket.setdefaulttimeout(timeout)
if PROXY is not None:
        proxy_handler = urllib2.ProxyHandler( { "http": "http://"+PROXY+"/" } )
        opener = urllib2.build_opener(proxy_handler)
        urllib2.install_opener(opener)
page_request = urllib2.Request(url=page_str_about, headers=HEADERS)
try:
    #print "Page reading ... %s" %page_str
    page_zapr = urllib2.urlopen(url=page_request)
    page=page_zapr.read()
except Exception ,error:
    print str(error)
    res=False
    return res,slovar
soup = BeautifulSoup(page)
select_pod=soup.findAll('div', {"class":"win aboutUs"})

promeg= select_pod[0].findAll("p")[0]
zerro_br= promeg.findAll(text=True)
Company_Info=" ".join(zerro_br).strip(" \t\n")
select =soup.findAll('div', {"class":"win"})
cells_tabl= select[0].findAll("tr")

for yach in cells_tabl:
    text_zag=yach.findAll("th")
    for zn_yach in text_zag:
        if len(zn_yach)>0:
            txt_zn_yach="".join(zn_yach.findAll(text=True)).strip(" \t\n")
        else:
            txt_zn_yach= zn_yach.contents[0].strip(" \t\n")
            #print txt_zn_yach
    text_znach_td=yach.findAll("td")
    for zn_yach_td in text_znach_td:
        if len(zn_yach_td)>0:
            txt_zn_yach_td="".join(zn_yach_td.findAll(text=True)).strip(" \t\n")
        else:
            txt_zn_yach_td= zn_yach.contents[0].strip(" \t\n")
            #print txt_zn_yach_td
    # Делаем замены неугодных символов / Replase browsers char
    if "&nbsp" in txt_zn_yach_td:
        while txt_zn_yach_td.find("nbsp;")>0:
            pos_gavna=txt_zn_yach_td.find("&nbsp;")
            txt_zn_yach_td=txt_zn_yach_td[:pos_gavna]+txt_zn_yach_td[pos_gavna+6:]
    if "&quot" in txt_zn_yach_td:
        while txt_zn_yach_td.find("quot;")>0:
            pos_gavna=txt_zn_yach_td.find("&quot;")
            txt_zn_yach_td=txt_zn_yach_td[:pos_gavna]+'"'+txt_zn_yach_td[pos_gavna+6:]
    if "&amp;" in txt_zn_yach_td:
        while txt_zn_yach_td.find("&amp;")>0:
            pos_gavna=txt_zn_yach_td.find("&amp;")
            txt_zn_yach_td=txt_zn_yach_td[:pos_gavna]+'&'+txt_zn_yach_td[pos_gavna+6:]
    slovar[str(txt_zn_yach)]=txt_zn_yach_td
    slovar["Company_Info"]=Company_Info
# разбираем нижнюю таблицу с контактом и вытаскиваем оттуда имя контакта | get name contacts
select_contact=soup.findAll('a', {"class":"member-name"})
for contact_person in select_contact:
    slovar["Contact_Person"]= contact_person.contents[0]
# получаем статус голд партнера по наличию таблички в левом верхнем углу | get Gold status
select_gold_part=soup.findAll('a', {"class":"memberLogo"})
if len(select_gold_part)==0:
    slovar["Gold member"]="N"
else:
    slovar["Gold member"]="Y"
res=True
return res,slovar 
```

这段代码解析了阿里巴巴网站上的一页制造。你可以看到它的页面 - [http://xmxinhuafeng.en.alibaba.com/aboutus.html](http://xmxinhuafeng.en.alibaba.com/aboutus.html)

# asp.net - ASP.net 下拉列表按需加载

> ID：821177
> 
> 赞同：1
> 
> 时间：2009-05-04T17:54:18.023
> 
> 标签：asp.net

我想知道是否有人知道或遇到任何关于按需将数据加载到下拉列表的教程或操作方法，例如 Telerik 的 rad 控件，您最初可以将 10 个项目加载到下拉列表控件，然后在下拉列表的最底部有一个继续或加载接下来的 10 个项目，单击它然后控件将加载接下来的 10 个项目......等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T18:01:29.630

您应该能够使用 AJAX 控件工具包——尤其是[CascadingDropDown 示例](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/CascadingDropDown/CascadingDropDown.aspx)。我相信您可以自定义处理程序以限制返回集并按需扩展。

# c# - 多行插入 -> 语句超过了 1000 行值的最大允许数量

> ID：821185
> 
> 赞同：5
> 
> 时间：2009-05-04T17:55:40.250
> 
> 标签：c#, sql-server

我正在使用 sql 2008 express edition，并且正在尝试通过我的 C# 应用程序进行多行插入。

我有大约 100000 条记录需要插入。

好的，前 1000 条记录一切顺利，然后我收到错误消息：

“INSERT 语句中的行值表达式的数量超过了 1000 个行值的最大允许数量。”

我查看了我的列数据类型-> int，所以这不应该是问题。我检查了我的代码，我正在插入 500 条记录。

所以我用谷歌搜索但找不到任何有用的东西。有人可以解释为什么我会收到这个错误，如果可能的话如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T18:20:51.143

您可以使用[SQLBulkCopy](http://msdn.microsoft.com/en-us/library/7ek5da1a.aspx)类。它支持批处理、事务并且比标准插入语句更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:29:44.163

这就是我的代码处理多插入的方式

```
var count = "SELECT COUNT(*) as rowcount FROM table_mysql GROUP BY id";

var countReader = Retrieve(count);
var countRows = 0;
try
{
    while (countReader.Read())
    {
        countRows += int.Parse(countReader.GetValue(0).ToString());
    }
}
catch (Exception ex)
{
    Log.LogMessageToFile("Import.cs -> table_mssql: " + ex.StackTrace + " /n" + ex.Message);
}
finally
{
    if (countReader != null) { countReader.Close(); _crud.close_conn(); }
}

for (var a = 0; a < countRows; )
{
    var sql = "SELECT id, traffic_id, dow, uu, imps, impsuu, otsw, otsm FROM table_mysql LIMIT " + a + ", " + (a + 500) + "";

    var reader = Retrieve(sql);
    try
    {
        var builder = new StringBuilder();
        builder.Append(
            "SET IDENTITY_INSERT table_mssql ON;INSERT INTO table_mssql(id, traffic_id, dow, uu, imps, impsuu, otsw, otsm) VALUES ");
        while (reader.Read())
        {
            Application.DoEvents();
            try
            {
                builder.Append("(" + reader.GetValue(0) + ", " + reader.GetValue(1) + ", " +
                               reader.GetValue(2) +
                               ", " + reader.GetValue(3) + ", " + reader.GetValue(4) +
                               ", " + reader.GetValue(5) + ", " + reader.GetValue(6) + ", " +
                               reader.GetValue(7) +
                               "), ");

            }
            catch (Exception ex)
            {
                Log.LogMessageToFile("Import.cs -> table_mssql: " + ex.StackTrace + " /n" + ex.Message);
            }
        }

        var sqlDB = builder.ToString(0, builder.Length - 2);

        sqlDB += ";SET IDENTITY_INSERT table_mssql OFF;";
        if (!InsertDB(sqlDB))
        {
            Log.LogMessageToFile("Import.cs -> table_mssql: No insert happend!");
        }
    }
    catch (Exception ex)
    {
        Log.LogMessageToFile("Import.cs -> table_mssql: " + ex.StackTrace + " /n" + ex.Message);
        return false;
    }
    finally
    {
        if (reader != null)
        {
            reader.Close();
            _crud.close_conn();
        }
    }
    a = a + 500;
} 
```

我要检查 sqlbulkcopy。也许这是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:35:49.907

你可以把整个事情归结为：

```
var sql = "SET IDENTITY_INSERT table_mssql ON;" 
        + "INSERT INTO table_mssql"
        +      "(id, traffic_id, dow, uu, imps, impsuu, otsw, otsm)"
        + " SELECT id, traffic_id, dow, uu, imps, impsuu, otsw, otsm "
        + " FROM table_mysql;"
        + "SET IDENTITY_INSERT table_mssql OFF;";

if (!InsertDB(sqlDB))
{
    Log.LogMessageToFile("Import.cs -> table_mssql: No insert happend!");
} 
```

另外：你应该知道 Sql Server 不支持 MySql 的`LIMIT`关键字。它使用`TOP`or`ROW_NUMBER`代替。

# c# - Datagrid 在 Windows s Mobile 中滚动的方式摆脱滚动条？

> ID：821187
> 
> 赞同：0
> 
> 时间：2009-05-04T17:56:23.027
> 
> 标签：c#, .net, windows-mobile, compact-framework

我有一个使用紧凑框架的非常简单的表单。我有两个搜索字段一个搜索按钮和一个数据网格。该按钮为窗体上的 DataGrid 设置 DataSource。我知道我可以在 DataGrid 上设置高度和宽度，但我不希望用户必须使用 DataGrid 上的滚动条，因为它有几百条记录。我只希望用户使用表单上的滚动条进行滚动。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T20:48:02.630

我假设您想要的行为是垂直滚动条跨越表单的总高度以浏览`DataGrid`. 这`DataGrid`不会占用表单上的所有空间。

您可以`VScrollBar`在表单的一侧添加一个并将其最大值设置为您的总行数`DataGrid`。然后附加到`ValueChanged`滚动条的事件并操作`DataGrid`. 这实际上是在模仿`DataGrid`.

棘手的部分是隐藏 的滚动条`DataGrid`，因为没有隐藏它的属性。您可以扩展其宽度，以便滚动条在屏幕外呈现，但请记住将 Form 的`AutoScroll`属性设置为，`false`以便它不会呈现会显示`DataGrid`混乱的水平滚动条。

根据您的应用程序，您可能需要考虑使用`ListView`属性`View`设置为的 a `Details`。在紧凑的`ListView`框架中更容易操作，并且可能更适合您的应用程序。如果您愿意，您仍然可以使用上述相同的`VScrollBar`技术并将其应用于。`ListView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-24T15:59:28.333

您必须从 DataSource 获取行数。将其转换为随附的示例以生成行数：（rsMissingItems 是一个 SqlCEResultSet 对象）

```
 Dim intRecCnt As Int32 = DirectCast(rsMissingItems.ResultSetView, ICollection).Count 
```

# .net - XmlReader 从架构中获取元素默认值

> ID：821188
> 
> 赞同：2
> 
> 时间：2009-05-04T17:56:46.350
> 
> 标签：.net, xsd, xmlreader

这可能是一个关于 的幼稚问题`XmlReader`，但我还没有在 MSDN 文档中找到答案。

假设我有 XSD`SchemaTest.xsd`

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="pageSettings">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="width" type="xs:decimal" default="8.5" minOccurs="0"/>
        <xs:element name="height" type="xs:decimal" default="11" minOccurs="0"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

符合此模式的格式良好的`XML`文档`SchemaTest.xml`

```
<?xml version="1.0" encoding="utf-8" ?>
<pageSettings xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="SchemaTest.xsd">
  <width/>
  <height>11</height>
</pageSettings> 
```

并且我尝试使用`XmlReader`如下方式阅读此文档。

```
static void Main(string[] args) {
    decimal width;
    decimal height;

    XmlReaderSettings settings = new XmlReaderSettings();
    settings.IgnoreWhitespace = true;
    settings.Schemas.Add(null, "C:\\Projects\\SchemaTest\\SchemaTest\\SchemaTest.xsd");
    using (XmlReader reader = XmlReader.Create("C:\\Projects\\SchemaTest\\SchemaTest\\SchemaTest.xml", settings)) {
        reader.ReadStartElement();
        if (reader.Name == "width") {
            width = reader.ReadElementContentAsDecimal("width", "");
            // if fail, width = default from schema
        }
        if (reader.Name == "height") {
            height = reader.ReadElementContentAsDecimal("height", "");
            // if fail, height = default from schema
        }
        reader.ReadEndElement();
    }
} 
```

目前我收到一条`System.FormatException`指示元素上的内容`width`格式不正确的信息。似乎`reader`正在尝试读取元素中的内容，并且没有默认为架构中指定的默认值。处理这个问题的正确方法是什么？

此外，我的理解是，对于元素，模式仅在元素以空内容出现时提供默认值，但如果元素缺失，则不提供默认值。这是否意味着无法为缺少的可选元素获取默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:09:40.807

至于使用空元素，设置`settings.ValidationType = ValidationType.Schema`并且您应该根据需要获得默认值。

关于缺失的元素，那些被认为是缺失的;-)，因此没有默认值。理论上，您可以解析模式（例如，使用模式对象模型）以获得默认值。但这将违反规范。

您是否考虑过使用属性，例如`<pageSettings height="55"/>`？在这种情况下，您应该获得缺失属性的默认值。

# perl - 为什么 Perl/Tk 不会擦除我的电子表格？

> ID：821193
> 
> 赞同：0
> 
> 时间：2009-05-04T17:58:34.207
> 
> 标签：perl, spreadsheet, tk

[再次发布到 Mahalo 的答案]

我的[Perl/Tk 脚本](http://pastebin.com/m6861e5a1)有一个初始电子表格，如使用`Tk::TableMatrix::Spreadsheet`模块显示的网格。我的电子表格以编程方式称为`$ss`. 这个初始网格在第一个电子表格显示之前被擦除，使用

```
$ss->pack('forget'); 
```

现在的脚本也添加了`$mw-> pack('forget');`，但这不是必需的。

我的问题是如何从“*文件”->“打开*”对话框打开第二个文件并清除显示的第一个文件，就像第一个文件清除初始网格一样？现在，第二个文件在仍然显示的第一个电子表格下方显示为一个全新的框架。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-08T11:10:02.190

"pack('forget')" 只是从视图中删除一个小部件。它不会删除它，也不会对其中显示的数据做任何事情。如果您未能销毁小部件，那么实际上，当您创建越来越多的电子表格小部件时，您将有很大的内存泄漏。

解决问题的最快方法是销毁旧的小部件（使用 destroy 方法）并使用新数据重新创建它。另一种解决方案是保留小部件，但在为新文件插入数据之前使用 deleteRows() 删除所有现有数据。

# iphone - 获取 RGB 颜色并在 iPhone 上使用 UIColor 对其进行标准化

> ID：821199
> 
> 赞同：9
> 
> 时间：2009-05-04T17:59:36.217
> 
> 标签：iphone, objective-c, cocoa-touch, colors, rgb

我正在寻找一种直接的方法来从 RGB 转换颜色，从 Photoshop 等工具中获取它，然后将其转换为 UIColor。由于 UIColor 对每个颜色空间使用 0.0 到 1.0 的标准化色域，我不确定这是如何完成的。

感谢您的解决方案。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-04T18:04:20.840

您的值介于 0 和 255 之间。使用它们创建 UIColor：

```
float r; float g; float b; float a;

[UIColor colorWithRed:r/255.f
                green:g/255.f
                 blue:b/255.f    
                alpha:a/255.f]; 
```

# iphone - 回调样式

> ID：821200
> 
> 赞同：1
> 
> 时间：2009-05-04T17:59:38.680
> 
> 标签：iphone, objective-c, coding-style

我正在编写一个 iPhone 应用程序，它在许多地方都需要执行非常简单的请求响应类型的非 HTTP 或 FTP 网络。

我已经将所有这些封装到一个与运行循环集成的 SimpleQuery 类中。

```
SimpleQuery *lookup = [[SimpleQuery alloc] init];
[lookup setDelegate:self];
[lookup doQueryToHost:queryServer port:queryPort query:queryString ]; 
```

如您所见，调用对象将自己设置为委托。结果完成后，它会使用结果调用委托上的方法。

```
[delegate simpleQueryResult:resultString simpleQuery:self]; 
```

我现在的位置是，我有一个 SimpleQuery 用户，它有两种类型的查询，所以我需要扩展 SimpleQuery 来支持它。

我可以想到两种明智的做法。

首先将一个选择器传递给doQueryString，或者一个单独的doQueryStringWithSelector。

```
[lookup doQueryToHost:queryServer port:queryPort query:queryString selector:@SEL ]; 
```

其次，将标签传递给 doQueryString 以便在调用委托时它可以查询标签，因为传递了 simpleQuery，以找出结果的用途。

```
[lookup doQueryToHost:queryServer port:queryPort query:queryString withTag:tag ]; 
```

我只是想知道从编码风格的角度来看哪个最好，第一个似乎更简单，但标记似乎更符合 iPhone SDK 和 Interface Builder

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T20:27:32.493

Apple 代码（例如，在 UIControl 中）中常用的一个选项是提供目标对象和选择器。这仅在存在单个回调时才有效，并且在这种情况下比委托更合适。（如果有多个回调，那么您可能必须使用委托和标记方法。）

如果你走这条路，那么你完全取消了委托，而是有一个带有这样签名的方法：

```
doQueryToHost:(id)queryServer port:(int)queryPort query:(NSString*)queryString target:(id)target action:(SEL)action 
```

请注意，在这种情况下，方法参数中的“动作”通常优于“选择器”。完成后，查询将简单地调用目标上的选择器。这将允许您的客户拥有多个选择器，以及多个目标对象；这可以帮助清理代码，因为您不需要将所有内容都放入单个委托对象中。

If you want to go with your tag route, you should call it "context", which is what Apple uses (for example, in addObserver:forKeyPath:options:context).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:12:01.453

第三个选项是套件中的常见模式，即使用`@protocol`s。

例如：

```
@protocol QueryCompleteHandlerProtocol
- (void)queryType1Complete:(int)intStuff;
- (void)queryType2Complete:(float)floatStuff;
@end 
```

它的作用是声明采用该协议的对象必须遵守的一组方法调用（编译器实际上会强制执行此操作）。

因此，您的 SimpleQuery 对象将保留委托指针之类的东西，您可以在 ivars 中这样声明：

```
NSObject<QueryCompleteHandlerProtocol> *callback; 
```

这告诉编译器是`callback`一个继承`NSObject`并采用`QueryCompleteHandlerProtocol`协议的对象。有时你会看到这样写：

```
id<QueryCompleteHandlerProtocol> callback; 
```

当您想调用回调时，它们没有什么特别之处，`SimpleQuery`'s 方法只会调用：

```
[callback queryType1Complete:1];
[callback queryType2Complete:2.0]; 
```

最后，您的协议类客户端将声明自己采用该协议：

```
@interface MyClass : NSObject<QueryCompleteHandlerProtocol>
...
@end 
```

并将使用以下代码将自己设置为回调：

```
[lookup setCallback:self]; 
```

这是编译器检查`MyClass`符合的地方`QueryCompleteHandlerProtocol`，这意味着它已经实现了`queryType1Complete:`和`queryType2Complete:`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T21:31:09.127

I'm not sure I understand the problem here. Can't SimpleQuery's user just set another delegate object for the second query, or branch on the simpleQuery: parameter? That's a basic part of the delegate pattern, just like having two UIActionSheets for one view controller.

# sql - 有没有更好的方法来调试 SQL？

> ID：821201
> 
> 赞同：8
> 
> 时间：2009-05-04T17:59:40.507
> 
> 标签：sql, debugging

我已经使用 SQL 多年了，主要是 MySQL/PhpMyAdmin，但最近也使用了 Oracle/iSqlPlus 和 PL/SQL。我用 PHP、Java、ActionScript 等编程过。我意识到 SQL 不像其他语言那样是一种命令式编程语言——但为什么错误消息在 SQL 中似乎没有那么具体？在其他环境中，我直接指出了问题的根源。更常见的是，MySQL 给了我诸如“error AROUND where u.id = ...”之类的错误并打印整个查询。这对于存储过程来说更加困难，因为调试可能是一场彻头彻尾的噩梦。

我是否缺少提供更好的错误报告的魔术工具/语言/插件/设置，或者我们是否坚持这一点？我想要一个调试器或语言，它可以让我在设置断点和单步执行代码时提供与 Eclipse 相同的控制量。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T18:54:32.840

我认为答案在于 SQL 是一种基于集合的语言，并附有一些程序性的东西。由于设计者是从基于集合的角度考虑的，他们认为其他语言所具有的普通调试类型并不重要。但是，我认为其中一些正在发生变化。您可以在 SQL Server 2008 中设置断点。我没有真正使用过它，因为您必须拥有 SQL Server 2008 数据库才能工作，而我们的大多数数据库仍然是 SQL Server 2000。但它是可用的，它确实允许您逐步完成事物。当您的 select 语句有 150 行长并且它知道语法不正确但由于它是一个命令而无法准确指出位置时，您仍然会遇到问题。

就我个人而言，当我编写一个长的程序 SP 时，我构建了一个测试模式，其中包括向我展示我所做的事情的结果、我感兴趣的特定点的关键变量的值，以及让我知道哪些步骤的打印语句已经完成，然后在完成后将整个事情回滚。这样我就可以看到如果它真正运行会发生什么，但如果我弄错了，它不会损害数据库中的任何数据。我觉得这非常有用。不过，它可以大大增加你的 proc 的大小。我有一个我使用的模板，其中包含我需要设置的大部分结构，所以我真的不需要太长时间来做。特别是因为我从不添加插入。更新或删除到 proc 而不首先测试关联的选择以确保我有我想要的记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T18:24:14.473

我认为解释是“常规”语言的单个语句比 SQL 小得多，因此单语句粒度指向的代码部分比 SQL 小得多。单个 SQL 语句的长度可以是一页或更多；在其他语言中，它通常是一行。

我认为这不会使调试器/IDE 无法更准确地识别错误，但我怀疑这会使它变得更难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T18:17:31.993

我同意你的投诉。

构建一个好的日志框架并在你的存储过程中过度使用它是最适合我的。

在每个事务或重要逻辑之前和之后，我将存储过程名称、步骤时间戳和行数（如果相关）写到我的日志表中。我发现当我这样做后，我通常可以在几分钟内缩小问题点。

向 sproc 添加一个调试参数（默认为“N”）并将其传递给它调用的任何其他 sproc，以便您可以轻松地打开或关闭日志记录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T19:21:29.047

至于断点和单步执行代码，您可以使用 MS SQL Server 执行此操作（在我看来，2005+ 比 2000 更容易）。

对于简单的情况，早期开发调试，有时神秘的消息通常足以解决错误——语法错误，不能用 Y 做 X。如果我在一个艰难的存储过程中，我会回复到“ sproc 文本上的 printf 调试”，因为它既快速又简单。使用您选择的数据库一段时间后，简单的问题就变成了老生常谈，您只需从容应对。

但是，一旦发布代码，问题的复杂性就太高了。如果我能复制它们，我认为自己很幸运。此外，我的开发人员想要一个调试器的地方，我的 DBA 说“你不可能在那里放一个调试器”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-09T12:34:27.380

我确实使用以下策略。

在存储过程的编写过程中，每次执行新的逻辑步骤时都有一个@procStep var set @procStep = "What the ... is going here" ;

其余的都[在这里](http://ysgitdiary.blogspot.com/2009/06/debugging-procedure-with-table-for-sql.html)

# .net - 按用户名过滤复制设置

> ID：821203
> 
> 赞同：0
> 
> 时间：2009-05-04T18:00:21.677
> 
> 标签：.net, winforms, replication, filtering

我在中央服务器和 200 个客户端之间设置了合并复制。绝大多数客户不需要全部 5000 条客户记录。只有 50 个左右被分配给他们。我将如何根据谁登录来应用过滤器？

我应该创建一个将用户名映射到客户记录的新数据库并沿着这条路走下去吗？

有更好的想法或陷阱吗？每个人是如何处理这种***按用户***过滤的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T18:05:24.143

我知道 MS Dynamics CRM 使用服务器上的视图来查看谁有权查看什么。当有人查询该视图时，它只返回他可以看到的内容。

也许你可以做这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-11T16:17:47.677

为此，请分别使用`HOST_NAME()`或`SUSER_SNAME()`按*主机名*或*当前用户*进行过滤。

**在Publication Properties**中构建过滤器语句时使用以下内容。

`i.e. salesrep = SUSER_SNAME()`

有关详细信息，请参阅**SQL 文档**。

# asp.net-membership - 为站点中的多个子文件夹启用 FormsAuthentication

> ID：821206
> 
> 赞同：0
> 
> 时间：2009-05-04T18:01:04.280
> 
> 标签：asp.net-membership

我们正在尝试在我们的网站上实现 formsAuthentication，但是在我们还没有找到解决方案的情况下 - 除了创建我们自己的 HttpModule 并自己执行自定义逻辑 - 所以我想我会折腾在那里提出问题，看看这是否确实是唯一的解决方案。

我们希望在自定义成员资格提供程序之上使用 formsAuthentication，但希望对不同的文件夹使用不同的提供程序。我们的站点使用子文件夹（例如：~/Admin、~/GoldCustomer、~/SilverCustomer、~/BronzeCustomer）对这些部分进行分区，因此我们希望为每个部分/子文件夹使用不同的成员资格提供程序。使用框架来支持这一点，我们将实现我们的 web.config，如下所示：

```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">
<location path="Admin">
<system.web>
  <authentication mode="Forms">
    <forms name="AdminAuth" loginUrl="~/AdminLogin.aspx" />
  </authentication>
  <membership defaultProvider="AdminProvider" >
    <providers >
      <add connectionStringName="ConnString" name="AdminProvider" type="Assembly.AdminMembershipProvider" ... />
    </providers>
  </membership>
</system.web>
</location>
<location path="GoldCustomer">
  <system.web>
  <authentication mode="Forms">
    <forms name="GoldCustomerAuth" loginUrl="~/GoldCustomerLogin.aspx" />
  </authentication>
  <membership defaultProvider="GoldCustomerProvider" >
    <providers >
      <add connectionStringName="ConnString" name="GoldCustomerProvider" type="Assembly.GoldCustomerMembershipProvider" ...="" />
    </providers>
  </membership>
</system.web>
</location>
<system.web>
  <compilation debug="true" />
  <authentication mode="Forms" />
</system.web>
</configuration> 
```

这样做会导致运行时错误：

在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

```
Line 11:   <location path="Admin">
Line 12:     <system.web>
Line 13:       <authentication mode="Forms">
Line 14:         <forms name="FormsAdmin" loginUrl="~/login.aspx" />
Line 15:       </authentication> 
```

似乎完成我们正在尝试的唯一方法是使用自定义 HttpModule - 或更改我们的方法（例如将文件夹分解为 IIS 中的不同 Web 应用程序）。这是正确的，还是我错过了什么？或者还有其他我不知道的选择吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T18:11:51.290

首先，如果您可以控制数据库，我认为基于角色的安全性对您的应用程序非常有意义。但如果你不能改变它，那就不行了。

替代解决方案可以是网关登录表单，它根据`ReturnUrl`查询字符串变量将用户重定向到特定于文件夹的登录表单，并且该表单将使用它想要验证用户的提供程序。然后它使用`FormsAuthentication.RedirectFromLoginPage`设置身份验证 cookie 并重定向到上一页。您可以设置角色并使用基于角色的安全性来控制对每个带有`<authorization>`.in 标签的文件夹的访问`web.config`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:15:57.487

我不确定您要做什么，但是这些客户类型的角色如何？限制每个子文件夹的角色访问，但您仍然有 1 个成员资格提供者和 1 个角色提供者。

# c# - 网络浏览器不加载文档

> ID：821207
> 
> 赞同：4
> 
> 时间：2009-05-04T18:01:08.053
> 
> 标签：c#, webbrowser-control

我正在尝试将 html 文档加载到 WebBrowser 控件中，但我束手无策。这是一个示例：

```
public void Button_Click(object sender, EventArgs e)
{
    webBrowser1.DocumentCompleted += new  WebBrowserDocumentCompletedEventHandler(wb_c);
    webBrowser1.DocumentText = "<html>foo</html>";

    // The documenttext property is NOT what was set above.  
    // No exception is thrown.  It's always "<html></html>\0", however.
    // This line setting the title throws a HRESULT COM error.
    webBrowser1.Document.Title = "foobar!";
} 
```

wb_c 事件处理程序也永远不会被调用。webbrowser 控件被定义为窗体上的控件。表单本身仅由浏览器和按钮组成。

有没有人有任何想法？我以前用过这个类没有任何问题，但是这次.Net大神否认我！我的最终目标是打印呈现的文档，但现在我什至无法让它接受我的 HTML。也许我需要一些圣水什么的。

编辑：如果上面的标题行被删除，wb_c 事件处理程序永远不会被触发。就好像 COM 组件本身有问题，或者其他什么。

编辑 2：根据大众的需求，这是我的代码的完整 blob。

```
public partial class Form2 : Form
{
    [STAThread]
    public static void Main(string[] args)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form2());
    }

    public Form2()
    {
        InitializeComponent();
        webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_c);
    }

    void wb_c(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        throw new Exception("The method or operation is not implemented.");
    }

    private void button1_Click(object sender, EventArgs e)
    {
        webBrowser1.DocumentText = "<html>foo</html>";
    }
}

partial class Form2
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.webBrowser1 = new System.Windows.Forms.WebBrowser();
        this.button1 = new System.Windows.Forms.Button();
        this.SuspendLayout();
        // 
        // webBrowser1
        // 
        this.webBrowser1.Location = new System.Drawing.Point(12, 12);
        this.webBrowser1.MinimumSize = new System.Drawing.Size(20, 20);
        this.webBrowser1.Name = "webBrowser1";
        this.webBrowser1.Size = new System.Drawing.Size(117, 99);
        this.webBrowser1.TabIndex = 0;
        // 
        // button1
        // 
        this.button1.Location = new System.Drawing.Point(90, 165);
        this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(75, 23);
        this.button1.TabIndex = 1;
        this.button1.Text = "button1";
        this.button1.UseVisualStyleBackColor = true;
        this.button1.Click += new System.EventHandler(this.button1_Click);
        // 
        // Form2
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(292, 266);
        this.Controls.Add(this.button1);
        this.Controls.Add(this.webBrowser1);
        this.Name = "Form2";
        this.Text = "Form2";
        this.Load += new System.EventHandler(this.Form2_Load);
        this.ResumeLayout(false);

    }

    #endregion

    private System.Windows.Forms.WebBrowser webBrowser1;
    private System.Windows.Forms.Button button1;
} 
```

这是一个在 VS 2005 中运行的 .Net 2.0 项目。System.Windows.Forms.dll 是 v2.0.50727。

编辑 3：将此行添加到 Form2 构造函数的末尾：

```
webBrowser1.Navigate("about:blank"); 
```

*触发*事件处理程序，但在设置文档文本时不会影响代码的行为。在 webBrowser1.Document.Text 行之后设置断点仍然会给出相同的“\0”字符串，并且尝试设置标题仍然会给出 COM HERROR。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T14:15:09.523

在您可以操作文档之前，您需要执行导航命令。要使用 WebBrowser 从头开始​​构建 HTML 页面，只需导航到*“about:blank”*，如下所示：

```
WebBrowser browser = new WebBrowser();
browser.Navigate("about:blank");
browser.Document.Write(html); 
```

然后在根元素上使用 InnerHtml 而不是 DocumentText 属性来应用 Html。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T18:10:43.210

尝试移动线路：

```
webBrowser1.Document.Title = "foobar!"; 
```

进入你的 wb_c 方法。我认为问题在于，当您调用它时， Document 属性尚未完全设置，并且您得到一个空引用异常。如果你等到页面加载，你应该没问题。

**更新：**尝试了您的示例，并且您的事件处理程序被调用，但是我怀疑它是从另一个线程调用的。因此，它到达抛出异常的行，但您实际上从未看到它，因为它在另一个线程中。取出引发异常的行，并将其替换为：

```
webBrowser1.Document.Title = "foobar!"; 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:18:33.113

文档加载是异步的，因此当您设置标题时，无法保证文档已实际加载。在尝试更改文档之前，您需要处理适当的浏览器事件以检测导航何时完成。

### 更新

在我使用浏览器的所有情况下，我都必须先导航到`about:blank`页面，然后才能修改文档。也许您应该在设置`DocumentText`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-26T19:17:26.777

我使用上面使用 about:blank 的方法，它工作正常！我昨天发表了一篇关于这种方法的文章，今天我在这里找到了这个主题:) 我的文章在这里：[http ://starikovs.com/2009/11/25/set-html-webbrowser-csharp/](http://starikovs.com/2009/11/25/set-html-webbrowser-csharp/)

# c# - 使用关键字从 flickr 下载随机图像

> ID：821217
> 
> 赞同：0
> 
> 时间：2009-05-04T18:04:26.253
> 
> 标签：c#, api, download, flickr

当我在玩 smallbasic 时，我注意到了这段代码，向朋友展示它有一个内置选项，可以根据关键字从 fliker 下载图像

我想知道是否有人在 C# 中有这样做的示例，以便我可以了解如何使用 api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T18:39:48.023

我从来没有弄乱过 Flickr 的 API，但这里有一个链接，我发现它似乎很有帮助：

[http://blogs.msdn.com/coding4fun/archive/2006/11/22/1126978.aspx](http://blogs.msdn.com/coding4fun/archive/2006/11/22/1126978.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T05:49:12.673

```
private void button1_Click(object sender, EventArgs e)
{
    string apikey = "3f8554b23a5we2fe2c7asdg80agnkdm9cedag415f34d9fb";
    Flickr F = new Flickr(apikey);

    // Example 2
    PhotoSearchOptions searchOptions = new PhotoSearchOptions();
    searchOptions.Tags = textBox1.Text;
    searchOptions.PerPage = 100;
    Photos microsoftPhotos = F.PhotosSearch(searchOptions);

    // Example 3
    searchOptions.Page = 2;
    Photos microsoftPhotos2 = F.PhotosSearch(searchOptions);
    searchOptions.Page = 3;
    Photos microsoftPhotos3 = F.PhotosSearch(searchOptions);

    // Eample 4
    PhotoCollection allPhotos = microsoftPhotos.PhotoCollection;
    allPhotos.AddRange(microsoftPhotos2.PhotoCollection);
    allPhotos.AddRange(microsoftPhotos3.PhotoCollection);

    progressBar1.Maximum = allPhotos.Count;
    progressBar1.Value = 0;

    foreach (Photo p in allPhotos)
    {
        pictureBox1.Image = Image.FromStream(F.DownloadPicture(p.MediumUrl));

        this.Refresh();

        progressBar1.Value++;
    }
} 
```

# javascript - 在富文本编辑器中嵌入 Flash

> ID：821219
> 
> 赞同：0
> 
> 时间：2009-05-04T18:05:36.750
> 
> 标签：javascript, flash, rte

我一直在尝试通过使用 mozilla 的 .insertHTML 函数 ( [http](http://code.google.com/p/lwrte/) [:// www.mozilla.org/editor/midas-spec.html](http://www.mozilla.org/editor/midas-spec.html)），但由于某种原因它从未出现 - 使用萤火虫我可以看到嵌入标签在那里，但它已经剥离了结束标签。

有什么建议么？其他 RTE 如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-28T21:01:08.753

IE 和 Firefox 不支持可编辑标签内的 Flash 或任何其他插件。

其他编辑器（如[TinyMCE](http://tinymce.moxiecode.com/examples/full.php)或[CKEditor](http://ckeditor.com/demo)）所做的是插入一个占位符图像，在提交表单时被相应的对象/嵌入标签替换。

例如，CKEditor 的占位符图像如下所示：

```
<img class="cke_flash"
    src="http://ckeditor.com/apps/ckeditor/3.0.1/images/spacer.gif?t=99GE"
    _cke_realelement="%3Ccke%3Aobject%20codebase%3D%22http%3A%2F(...)"
    alt="Flash Animation" _cke_real_element_type="flash"
    _cke_resizable="true"/> 
```

如您所见，它们对 _cke_realelement 属性中的整个对象标记进行了 urlencode。

# objective-c - 如何让文本标签显示表格中有多少行

> ID：821220
> 
> 赞同：1
> 
> 时间：2009-05-04T18:05:45.390
> 
> 标签：objective-c, cocoa, core-data

我正在使用 Core Data 并想要一个文本标签来显示表中有多少行，我需要在类文件中输入什么代码来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T22:15:14.807

像往常一样在托管对象上下文上设置获取请求，然后调用`countForFetchRequest:`. 不要忘记订阅，`NSManagedObjectContextObjectsDidChangeNotification`以便在添加或删除对象时更新它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T22:30:39.827

假设您的 NSTableView 的列绑定到 NSArrayController，您可以使用控制器键“arrangedObjects”和键路径将 NSTextField 标签的值绑定到数组控制器的值`@count`。如果要将文本字段绑定到“x 行”之类的内容，其中 x 是行数，则可以将“显示模式值 1”绑定到相同的 (arrangedObjects.@count) 并使用“%{value1}@ 行"作为显示模式。

# sql - sqlite中多个JOIN语句的优先级是什么？

> ID：821222
> 
> 赞同：5
> 
> 时间：2009-05-04T18:06:07.683
> 
> 标签：sql, sqlite, join, left-join, outer-join

令我惊讶的是，以下两个查询返回了不同的结果：

```
SELECT *
  FROM foo
       JOIN bar
         ON bar.id=foo.bar_id

       JOIN baz
         ON baz.id=foo.baz_id

       LEFT JOIN zig
         ON zig.foo_id=foo.id; 
```

和：

```
SELECT *
  FROM foo
       LEFT JOIN zig
         ON zig.foo_id=foo.id

       JOIN bar
         ON bar.id=foo.bar_id

       JOIN baz
         ON baz.id=foo.baz_id; 
```

我想你什么时候打开并不重要`LEFT JOIN`，因为在加入and时`zig`我没有使用`zig`' 列。但是，似乎在后者中，-ing和吞噬了具有值的行......为什么会这样？`bar``baz``JOIN``bar``baz``zig``null`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-30T10:01:18.360

这工作正常。我错了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T22:15:46.803

这些是不同的，因为您的左连接在语句中的位置。请记住，连接不仅在您正在比较字段的两个表上，而且还包括您在该点和下一个表上连接的所有内容。

因此，在第一个语句中，您将在第一个连接中从 foo 中过滤掉行（那些没有 bar_id = bar.id 的行）

但是在第二个语句中，您将所有 foo 包含在左连接中。

当我开始写这篇文章时，这比我预期的更难表达，让我知道它是否对你有意义。

# asp.net - 有什么好的参考资料或工具可用于将 ASP 转换为 ASP.NET？

> ID：821230
> 
> 赞同：6
> 
> 时间：2009-05-04T18:07:20.737
> 
> 标签：asp.net, asp-classic

您在转换过程中使用了哪些工具、实践或文档来推荐给其他人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-04T18:18:15.517

你可以试试微软的

[ASP 到 ASP.NET 1.x 迁移助手](http://www.asp.net/downloads/archived/migration-assistants/asp-to-aspnet/)

> ASP 到 ASP.NET v1.x 迁移助手旨在帮助您将 ASP 页面和应用程序转换为 ASP.NET。它不会使转换过程完全自动化，但它会通过自动化迁移所需的一些步骤来加速您的项目。

我想有总比没有好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T19:27:32.120

我们已经将一些 ASP 经典应用程序转换为 .net，并且正在转换另一个。

我们所做的是首先将它们分成两组——我们将完全转换的一组，然后用新的替换旧的，然后我们可以增量转换的一组。

对于第二组，为应用程序构建一些标题和侧边栏控件很有用，这些控件还包含一些更程序化的部分——安全性、导航等，然后使用 iframe 来保存 ASP 经典的东西，在我们的领域还没开始转换。

这非常轻松，因为我们可以按照自己的时间表取出旧的并插入新的，而不必在继续之前重写整个庞大的应用程序。它还帮助我们根据客户的需求调整更改和新功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T18:13:50.707

由于 ASP.Net 支持在 ASP Classic 中使用的内联编码，因此有一种从 ASP 转换为 ASP.Net 的快速而肮脏的方法。但是，您不会通过这种方法充分利用 ASP.Net。

坏消息是没有简单的方法以“正确”的方式从 ASP Classic 转换为 ASP.Net。它们是如此不同的技术，没有简化的转换过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T18:16:20.950

一种是脚本语言，另一种是编译的，因此整体范式本身是完全不同的，如果您打算以这种方式使用 asp.net，我真的怀疑无论如何将您的应用程序从经典 asp 转换/迁移到 asp.net它的意思是。

# c# - 单元测试表达式树

> ID：821235
> 
> 赞同：11
> 
> 时间：2009-05-04T18:09:06.600
> 
> 标签：c#, linq, unit-testing, testing, lambda

我最近需要构建一个表达式树，所以我写了一个这样的测试方法......

```
 /// <summary>
    /// 
    /// </summary>
    [TestMethod()]
    [DeploymentItem("WATrust.Shared.Infrastructure.dll")]
    public void BuildForeignKeysContainsPredicate_shoud_build_contains_predicate()
    {
        RemoteEntityRefLoader_Accessor<ReferencedEntity> target = CreateRemoteEntityRefLoader_Accessor();

        List<object> foreignKeys = new List<object>() { 1, 2, 3, 4 };
        Expression<Func<ReferencedEntity, bool>> expected = (ReferencedEntity referencedEntity) => foreignKeys.Contains(referencedEntity.Id);
        Expression<Func<ReferencedEntity, bool>> actual;

        actual = target.BuildForeignKeysContainsPredicate(foreignKeys, "Id");

        Assert.AreEqual(expected.ToString(), actual.ToString());
    } 
```

当我终于让“BuildForeignKeysContainsPredicate”方法工作时，我永远无法通过测试......这是方法：

```
 /// <summary>
    /// 
    /// </summary>
    /// <param name="foreignKeys"></param>
    /// <returns></returns>
    private Expression<Func<TReferencedEntity, bool>> BuildForeignKeysContainsPredicate(List<object> foreignKeys, string primaryKey)
    {
        Expression<Func<TReferencedEntity, bool>> result = default(Expression<Func<TReferencedEntity, bool>>);

        try
        {
            ParameterExpression entityParameter = Expression.Parameter(typeof(TReferencedEntity), "referencedEntity");
            ConstantExpression foreignKeysParameter = Expression.Constant(foreignKeys, typeof(List<object>));
            MemberExpression memberExpression = Expression.Property(entityParameter, primaryKey);
            Expression convertExpression = Expression.Convert(memberExpression, typeof(object));
            MethodCallExpression containsExpression = Expression.Call(foreignKeysParameter
                , "Contains", new Type[] { }, convertExpression);

            result = Expression.Lambda<Func<TReferencedEntity, bool>>(containsExpression, entityParameter);

        }
        catch (Exception ex)
        {
            throw ex;
        }

        return result;
    } 
```

但是每次测试都失败了，我把这行换成了`Assert.AreEqual(expected, actual);` ：`Assert.AreEqual(expected.ToString(), actual.ToString());`我明白为什么它失败了，因为当你查看 ToString 方法的结果时，它们是不同的。

```
Assert.AreEqual failed.
Expected:<referencedEntity => value(Shared.Infrastructure.Test.RemoteEntityRefLoaderTest+<>c__DisplayClass13).foreignKeys.Contains(Convert(referencedEntity.Id))>.
Actual  :<referencedEntity => value(System.Collections.Generic.List`1[System.Object]                        )            .Contains(Convert(referencedEntity.Id))>. 
```

我只是不明白为什么......有没有人有关于单元测试表达式的一般提示和建议如何让我的特定测试通过？

谢谢...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-04T18:29:12.637

根据您发布的代码，

*   期望值是匿名委托/方法。CLR 在幕后做了一些魔术来动态添加一个方法。以防万一。方法使用某些局部变量，CLR 创建一个新类，其字段设置为这些值，其中包含新的 anon 方法（以便该方法可以访问局部 var 值）。这就是你的 ..c_DisplayClass13，编译器的名字很奇怪，这样它就不会与用户定义的方法发生冲突。
*   您的方法返回的实际值是一个`Expression<T>`.

因此..这两者之间的平等检查失败了。您需要比较它们返回的集合的元素。所以我建议.. 将预期值和实际值都转换为列表（或更好的数据结构），然后调用 NUnit 的采用集合参数的断言之一。

**Update**: You got me to read up on Expression Trees. +1 for that.
I'm going to change my answer - Comparing the Expression trees via hack-and-assert would lead to a fragile test (e.g. if MS changes the internal structure of an expression tree in the future)
Expression trees are just code blocks (as I found out now) that evaluate to a result similar to a `Func<TInput,TResult)` - so my test would be to give the expected and actual code blocks the same input and see if they deliver the same output. So my assert for your test would be

```
Assert.AreEqual(expected.Compile().Invoke(inputEntity), 
                actual.Compile().Invoke(inputEntity)); 
```

# c++ - SDL_surface 到 OpenGL 纹理

> ID：821244
> 
> 赞同：1
> 
> 时间：2009-05-04T18:11:05.207
> 
> 标签：c++, opengl, sdl, textures

嘿，我有这个脚本来加载 SDL_Surface 并将其保存为 OpenGL 纹理：

```
typedef GLuint texture;

texture load_texture(std::string fname){
    SDL_Surface *tex_surf = IMG_Load(fname.c_str());
    if(!tex_surf){
        return 0;
    }
    texture ret;
    glGenTextures(1, &ret);
    glBindTexture(GL_TEXTURE_2D, ret);
    glTexImage2D(GL_TEXTURE_2D, 0, 3, tex_surf->w, tex_surf->h, 0, GL_RGB, GL_UNSIGNED_BYTE, tex_surf->pixels);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    SDL_FreeSurface(tex_surf);
    return ret;
} 
```

问题是它不起作用。当我从主函数调用该函数时，它只是不加载任何图像（当显示它只是改变绘图颜色时），当从主函数之外的任何函数调用时，程序崩溃。正是这一行使程序崩溃：

```
2D(GL_TEXTURE_2D, 0, 3, tex_surf->w, tex_surf->h, 0, GL_RGB, GL_UNSIGNED_BYTE, tex_surf->pixels); 
```

有人能看出这有什么错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T18:33:32.920

我敢打赌，您需要先将 SDL_Surface 转换为 OpenGL 纹理。这里有一些东西应该给你一个大致的想法：

```
SDL_Surface* originalSurface; // Load like an other SDL_Surface

int w = pow(2, ceil( log(originalSurface->w)/log(2) ) ); // Round up to the nearest power of two

SDL_Surface* newSurface = 
  SDL_CreateRGBSurface(0, w, w, 24, 0xff000000, 0x00ff0000, 0x0000ff00, 0);
SDL_BlitSurface(originalSurface, 0, newSurface, 0); // Blit onto a purely RGB Surface

texture ret;

glGenTextures( 1, &ret );
glBindTexture( GL_TEXTURE_2D, ret );
glTexImage2D( GL_TEXTURE_2D, 0, 3, w, w, 0, GL_RGB,
          GL_UNSIGNED_BYTE, newSurface->pixels ); 
```

[我在这里找到了原始代码](http://www.gamedev.net/community/forums/viewreply.asp?ID=1442518)。GameDev 上可能还有一些[其他有用的帖子](http://www.gamedev.net/community/forums/viewreply.asp?ID=1437342)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-20T19:27:08.593

问题可能`internalformat`出在调用的第三个参数 () 中`glTexImage2D`。

```
glTexImage2D(GL_TEXTURE_2D, 0, 3, tex_surf->w, tex_surf->h, 0, GL_RGB, GL_UNSIGNED_BYTE, tex_surf->pixels); 
```

您必须使用像`GL_RGB`or这样的常量，`GL_RGBA`因为宏的实际值与颜色分量的数量无关。

允许值列表在参考手册中：[https](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml) ://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml 。

这似乎是一个常见的错误。也许有些司机只是聪明并纠正了这一点，所以错误的线路可能对某些人仍然有效。

```
/usr/include/GL/gl.h:473:#define GL_RGB             0x1907
/usr/include/GL/gl.h:474:#define GL_RGBA            0x1908 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T03:57:36.467

我不确定您是否在代码片段之外的某个地方执行此操作，但是您是否致电

```
glEnable(GL_TEXTURE_2D);
```

在某一点？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T20:48:54.947

一些较旧的硬件（令人惊讶的是，emscripten 的 opengl ES 2.0 仿真，在我今年买的新机器上运行）似乎不支持尺寸不是 2 次方的纹理。原来是我被困了一段时间的问题（我得到了一个黑色矩形而不是我想要的精灵）。因此，在将图像大小调整为具有 2 次幂的尺寸后，海报的问题可能会消失。

见：[https ://www.khronos.org/opengl/wiki/NPOT_Texture](https://www.khronos.org/opengl/wiki/NPOT_Texture)

# iphone - iPhone UIButton 不工作

> ID：821245
> 
> 赞同：0
> 
> 时间：2009-05-04T18:11:11.837
> 
> 标签：iphone, objective-c, cocoa-touch, button

我敢肯定，这该死的简单！我错过了一些东西，并且因为试图修复它而筋疲力尽。希望有人可以提供帮助。

CharacterView.m 中的 Button 有效，但 CharacterMale.m 中嵌套的按钮无效。我没有使用 IB，一切都是以编程方式完成的。

**CharacterView.m 被用作容器**

```
/////////////////////////////////////////////////////////////////////////////////
 CharacterController.m
/////////////////////////////////////////////////////////////////////////////////
#import "CharacterController.h"
#import "CharacterView.h"

@implementation CharacterController

- (id)init {
    NSLog(@"CharacterController init");
    self = [ super init ];
    if (self != nil) {
    }
    return self;
}

- (void)loadView {
    [ super loadView ];
    characterView = [ [ CharacterView alloc ] init];
    self.view = characterView;
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)dealloc {
    [characterView release];
    [super dealloc];
}

@end

/////////////////////////////////////////////////////////////////////////////////
 CharacterView.m
/////////////////////////////////////////////////////////////////////////////////

#import "CharacterView.h"
#import "CharacterMale.h"

@implementation CharacterView

- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        characterMale = [ [ CharacterMale alloc ] init];
        [self addSubview: characterMale];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(0, 200, 200, 100);
        [button setImage:[UIImage imageNamed:@"btnCharSelect.png"] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(ApplyImage:) forControlEvents:UIControlEventTouchUpInside];
        [ self addSubview: button ];
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
}

-(void)ApplyImage:(id)sender
{
    NSLog(@"CharacterView button works");
}

- (void)dealloc {
    [characterMale release];
    [super dealloc];
}

@end

/////////////////////////////////////////////////////////////////////////////////
 CharacterMale.m
/////////////////////////////////////////////////////////////////////////////////

#import "CharacterMale.h"
#import "CharacterController.h"

@implementation CharacterMale

- (id)init {
    self = [ super init];
    if (self != nil) {
        UIImage *image = [UIImage imageNamed:@"charMale.png"];
        imageView = [[ UIImageView alloc] initWithImage:image];
        [image release];
        [ self addSubview: imageView ];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(0, 0, 200, 100);
        [button setImage:[UIImage imageNamed:@"btnCharSelect.png"] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(ApplyImage:) forControlEvents:UIControlEventTouchUpInside];
        [ self addSubview: button ];

    }
    return self;
}

-(void)ApplyImage:(id)sender
{
    NSLog(@"CharacterMal button works");
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T19:32:41.360

最后！！！！！！

我必须使用 initWithFrame 初始化所有视图并传入有效的框架矩形。Init 应该与控制器一起使用，并且 initWithFrame 为 UIViews 传递 rects！！！！

```
characterView = [ [ CharacterView alloc ] initWithFrame:CGRectMake(0, 0, 480, 320)]; 
then 
characterMale = [ [ CharacterMale alloc ] initWithFrame:frame]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:25:31.770

我对此也很陌生，但是您是否尝试过： UIControlEventValueChanged 而不是 UIControlEventTouchUpInside ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T19:09:48.450

charMale.png 图像有多大？CharacterMale 中图像和按钮的 z-Order 是什么？图像可能位于您正在创建的按钮的顶部，以防止它被触摸。

希望这是问题所在...我还没有看到其他任何东西...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-03-19T17:21:19.347

请检查您的按钮框架。您已设置（0,0,200,100）；

# hibernate - 如何使用具有默认值的集合 ID 创建休眠 idbag？

> ID：821248
> 
> 赞同：1
> 
> 时间：2009-05-04T18:12:25.860
> 
> 标签：hibernate

我需要在休眠 3 中创建一个 idbag，其中 collection-id 列默认为序列中的下一个值。根据 hibernate 3 DTD，collection-id 元素如下所示：

```
<!ELEMENT collection-id (meta*, column*, generator)>
    <!ATTLIST 集合 ID 列 CDATA #REQUIRED>
    <!ATTLIST 集合 ID 类型 CDATA #REQUIRED>
    <!ATTLIST 集合 ID 长度 CDATA #IMPLIED>

```

在我未经训练的眼睛看来，我可以拥有一个列属性和一个列元素。该元素允许使用默认值，但该属性是必需的。如果我有属性和元素，休眠会呕吐，所以基本上元素可用性是无用的。

我需要这个工作的原因是因为我将使用 SQL 插入连接表并且想要自动生成的 id。

是否有另一种方法我应该为 idbag 中的 id 列指定默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T18:14:53.823

一种解决方案是修改我的 SQL 插入语句以包含 id 列的“nextval('hibernate_sequence')”，但如果可能的话，我更愿意使用休眠映射。

# ruby-on-rails - 如何在没有数据库的情况下配置 Ruby on Rails？

> ID：821251
> 
> 赞同：109
> 
> 时间：2009-05-04T18:12:47.090
> 
> 标签：ruby-on-rails

将 Ruby on Rails 用于当前不需要数据库的小型网站项目会很方便。我知道我可以在 MySQL 中创建一个空数据库并从那里开始，但是有人知道在没有数据库的情况下运行 Rails 的更好方法吗？

谢谢

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2011-07-05T07:10:37.547

对于**Rails 3**和**Rails 4**：

> 使用`-O`(Capital 'O') 或`--skip-activerecord`选项来生成没有数据库的应用程序。

`rails new myApp -O`

或者

`rails new myApp --skip-activerecord`

这个答案是从[这里转发的](https://stackoverflow.com/questions/2212709/remove-activerecord-in-rails-3-beta/2212867#2212867)

* * *

对于**Rails 5**：

> 使用`--skip-active-record`选项生成没有数据库的应用程序

**请注意额外的连字符“-”，而不是以前的 Rails 版本**。

`rails new myApp --skip-active-record`

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-09-26T18:22:10.157

对于现有的 Rails 4/5/6 项目，在您的`config/application.rb`文件中，您有以下行：

```
require 'rails/all' # or `require "rails"' in newer versions 
```

（作为参考该行正在加载[此文件](https://github.com/rails/rails/blob/master/railties/lib/rails/all.rb)）
因此，您必须分别加载每个库，而不是加载所有库，如下所示：

```
# active_record is what we're not going to use it, so comment it "just in case"
# require "active_record/railtie" 

# This is not loaded in rails/all but inside active_record so add it if
# you want your models work as expected
require "active_model/railtie" 
# And now the rest
require "action_controller/railtie"
require "action_mailer/railtie"
require "action_view/railtie"
require "active_job/railtie" # Only for Rails >= 4.2
require "action_cable/engine" # Only for Rails >= 5.0
require "sprockets/railtie"
require "rails/test_unit/railtie"

# All these depend on active_record, so they should be excluded also
# require "action_text/engine" # Only for Rails >= 6.0
# require "action_mailbox/engine" # Only for Rails >= 6.0
# require "active_storage/engine" # Only for Rails >= 5.2 
```

请留意评论以了解要加载有关您的 Rails 版本的内容。
还要检查以下文件（如果有的话）并注释以下行：

```
# package.json
"@rails/activestorage": "^6.0.0",

# app/javascript/packs/application.js
require("@rails/activestorage").start()

# bin/setup
system! 'bin/rails db:prepare'

# config/environments/development.rb
config.active_storage.service = :local # For Rails >= 5.2
config.active_record.migration_error = :page_load
config.active_record.verbose_query_logs = true

# config/environments/test.rb
config.active_storage.service = :test # For Rails >= 5.2

# config/environments/production.rb
config.active_storage.service = :local # For Rails >= 5.2
config.active_record.dump_schema_after_migration = false

# spec/rails_helper.rb
ActiveRecord::Migration.maintain_test_schema!

# test/test_helper.rb
fixtures :all # In case you're using fixtures

# Only for Rails >= 5.0
#config/initializers/new_framework_defaults.rb
Rails.application.config.active_record.belongs_to_required_by_default = true 
```

还要删除`ActiveRecord::Base`模型文件中对的任何引用（或者如果适用，只需删除文件）。例如，自动生成的`app/models/application_record.rb`文件。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2009-05-04T18:17:21.480

在文件中取消注释此行`environment.rb`：

```
config.frameworks -= [ :active_record, :active_resource, :action_mailer] 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-09-18T04:15:38.223

在 Rails 4 中，当开始一个新项目时，您可以使用 -O 或 --skip-active-record

```
rails new my_project -O
rails new my_project --skip-active-record 
```

如果您已经创建了一个项目，则需要发表评论

```
 require "active_record/railtie" 
```

从 config/application.rb 和

```
 config.active_record.migration_error = :page_load 
```

来自 config/environments/development.rb

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-05-04T18:18:15.830

如果您不需要数据库，那么您可能不需要大量的 Rails。您可能需要一个更小、更可定制的框架来使用。

[Sinatra](http://www.sinatrarb.com/)是一个小型框架，非常适合提供基本的静态页面。

但是，如果您坚持使用 Rails [，这里](http://media.pragprog.com/titles/fr_rr/NoDatabase.pdf)有一篇文章将向您展示如何做到这一点或[这里](http://log4p.com/2007/12/04/using-rails-without-a-database/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-28T14:59:30.060

为了支持 Rails 6 rc1 和`activerecord-nulldb-adapter`gem，我们需要一个猴子补丁

在**config/initializers/null_db_adapter_monkey_patches.rb**

```
module ActiveRecord
  module ConnectionAdapters
    class NullDBAdapter < ActiveRecord::ConnectionAdapters::AbstractAdapter
      def new_table_definition(table_name = nil, is_temporary = nil)
        TableDefinition.new(table_name, is_temporary)
      end
    end
  end
end 
```

# oop - 表示参数/配置/设置

> ID：821265
> 
> 赞同：1
> 
> 时间：2009-05-04T18:16:26.597
> 
> 标签：oop

好吧，假设我正在使用面向对象的语言编写应用程序，并且我有一组键值对代表程序参数/配置/选项/设置/等。这些可能是某些变量的初始值，或者只是除了会话之间不会改变的值。我应该如何在我的数据模型中表示这些值？

我最初的想法是将所有值简单地存储在全局可访问的单个类中（可能是单个类），因为这些值将在代码中的不同位置使用。然而，这将使所有其他类都依赖于这个单例。

在这种情况下有问题吗？还有其他我没有想到的理想解决方案吗？你们通常如何表示这种类型的数据？关于这个问题，我还有什么需要注意的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T18:19:02.020

您可能想要使用依赖注入。创建一个界面`IConfigurationProvider`。创建一个`DefaultConfigurationProvider`实现该接口并执行实际任务的类。使依赖配置数据的其他对象期望一个`IConfigurationProvider`实例，并为它们提供一个`DefaultConfigurationProvider`. 大多数依赖注入框架都会为您处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T18:41:39.767

**“这是[单例配置]的问题吗？**

并不真地。

**“所有其他类都依赖于这个单例”**

并不真地。您可以轻松地设计一些东西，以便某些类获得配置，并将其提供给其他类。

这是一个责任问题——什么类/包/方法对这个配置问题负责。答案应该是非常非常少的类需要知道配置。

例如，您的模型可能应该专注于独立于实现细微差别的问题域。它可能不需要任何配置。

**“还有其他我没有想到的理想解决方案吗？”**

并不真地。配置问题很难。您可能有一个默认配置，覆盖默认配置，命令行选项。这很复杂。

**“你们通常如何表示这类数据？”**

大多数情况下是单身人士。通常，给定应用程序中的几个关键“顶级”类必须知道配置并使用该信息来配置所有其他类。

对于命令行程序，由“主”程序调用以解析参数的类也将了解配置。就是这样。

对于 Web 应用程序，Web 应用程序的顶级部分使用配置来构建、配置、自定义或实例化其他事物。在许多情况下，密钥**工厂**将使用配置来决定创建什么。关键**Builder**可能需要配置来自定义其构建的复合对象。

配置不是“全局的”。并非所有班级都能看到。它就像数据库一样是一种宝贵的资源，并且由负责处理配置的类仔细包装。

**“关于这个问题，我还有什么需要注意的吗？”**

是的。配置单例不是全局的。它是一种稀缺的珍贵资源，在一些关键地方使用。越少越好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:23:14.320

这取决于你的具体情况。

例如，您可以为类 Context 提供方法 getParameter（字符串名称）和 setParameter（字符串名称，对象值）以及许多其他您需要保留配置参数的方法。

您可以将 Context 作为参数传递给应该使用 config 的类的构造函数。参数：

```
public class ConfigUser {
   private Context c;
   public ConfigUser (Context c) {
      this.c = c;
   }
   ...
} 
```

# apache - 支持扩展服务器端包含 (XSSI) 的 IIS 模块/扩展？

> ID：821271
> 
> 赞同：0
> 
> 时间：2009-05-04T18:17:51.320
> 
> 标签：apache, iis, asp-classic, server-side-includes

我一直在与一位希望将在 Apache 上开发的内容带到 IIS 的设计师合作。然而，该内容使用 XSSI。我无法确定 IIS 是否可以支持这些东西。也许它在 Windows/IIS 上命名为其他名称？一个示例如下所示：

```
<!--#config timefmt="%Y%m%d" --> 

<!--#if expr="$DATE_LOCAL < 20090311" --> 

<P>This will be shown before my birthday in 2009 
<!--#endif --> 
<!--#if expr="$DATE_LOCAL >= 20090311" --> 

<P>This will be shown during and after my birthday in 2009 
<!--#endif --> 
```

看来我可以用经典的 .ASP 复制这种行为，但我不知道这是否是这种处理的常见做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-02-15T22:34:51.870

任何版本的 IIS 都不支持 XSSI，您必须编写诸如 .asp 或 asp.net 代码之类的代码来完成这类事情。

# design-patterns - 为什么我应该将我的域实体与我的表示层隔离？

> ID：821276
> 
> 赞同：88
> 
> 时间：2009-05-04T18:19:02.973
> 
> 标签：design-patterns, architecture, domain-driven-design, presentation-layer, data-transfer-objects

似乎没有太多细节的领域驱动设计的一部分是，您应该如何以及为什么应该将您的领域模型与您的界面隔离开来。我试图说服我的同事这是一个很好的做法，但我似乎没有取得太大进展......

他们在表示层和界面层中随心所欲地使用领域实体。当我向他们争辩说他们应该使用显示模型或 DTO 将域层与界面层隔离时，他们反驳说他们没有看到这样做的商业价值，因为现在你有一个 UI 对象要维护以及原始域对象。

所以我正在寻找一些具体的理由来支持这一点。具体来说：

1.  为什么我们不应该在表示层中使用域对象？
    （如果答案很明显，“脱钩”，那么请解释为什么这在这种情况下很重要）
2.  我们应该使用额外的对象或构造来将我们的领域对象与接口隔离吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-05-04T18:28:00.190

很简单，原因是实施和漂移之一。是的，您的表示层需要了解您的业务对象才能正确表示它们。是的，最初看起来这两种对象的实现之间有很多重叠。问题是，随着时间的推移，双方的事情都会增加。表示发生变化，表示层的需求演变为包括完全独立于业务层的事物（例如颜色）。同时，你的领域对象会随着时间而改变，如果你没有与你的接口进行适当的解耦，你就会冒着通过对你的业务对象进行看似良性的改变来搞砸你的接口层的风险。

就个人而言，我认为处理事情的最佳方式是通过严格执行的接口范式。也就是说，您的业务对象层公开了一个接口，这是可以与之通信的唯一方式；没有公开有关接口的实现细节（即域对象）。是的，这意味着您必须在两个位置实现域对象；你的接口层和你的BO层。但是，这种重新实现，虽然最初看起来像是额外的工作，但有助于执行解耦，这将在未来的某个时候节省大量的工作。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-04T18:53:04.357

我自己也为此苦苦挣扎。在某些情况下，在演示文稿中使用 DTO 是有意义的。假设我想在我的系统中显示公司的下拉列表，我需要他们的 id 来绑定值。

好吧，而不是加载可能引用订阅或知道其他内容的 CompanyObject，我可以发回带有名称和 ID 的 DTO。恕我直言，这是一个很好的用途。

现在再举一个例子。我有一个代表估计的对象，这个估计可能由劳动力、设备等组成，它可能有很多由用户定义的计算，这些计算将所有这些项目汇总起来（每个估计可能因不同类型而异的计算）。为什么我必须对这个对象建模两次？为什么我不能简单地让我的 UI 枚举计算并显示它们？

我通常不使用 DTO 将我的域层与我的 UI 隔离。我确实使用它们将我的域层与我无法控制的边界隔离开来。有人将导航信息放在他们的业务对象中的想法是荒谬的，不要污染您的业务对象。

有人将验证放在他们的业务对象中的想法？好吧，我说这是一件好事。您的 UI 不应单独负责验证您的业务对象。您的业​​务层**必须**进行自己的验证。

为什么要将 UI 生成代码放在业务对象中？在我的情况下，我有单独的对象，它们从 UI 生成 UI 代码 seperatley。我有将我的业务对象呈现为 Xml 的分离对象，您必须分离图层以防止这种类型的污染的想法对我来说是如此陌生，因为您为什么还要将 HTML 生成代码放在业务对象中......

**编辑** 我想多了，在某些情况下，UI 信息可能属于域层。这可能会使你所谓的域层变得模糊，但我在一个多租户应用程序上工作，它在 UI 外观和功能工作流方面具有非常不同的行为。取决于各种因素。在这种情况下，我们有一个代表租户及其配置的域模型。他们的配置恰好包含 UI 信息（例如通用字段的标签）。

如果我必须设计我的对象以使其具有持久性，我是否还必须复制这些对象？请记住，如果您想添加一个新字段，现在您有两个地方可以添加它。如果您使用 DDD，这可能会引发另一个问题，这些都是持久实体域对象吗？我知道在我的例子中他们是。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-05-04T18:28:27.707

这样做的原因与将 SQL 排除在 ASP/JSP 页面之外的原因相同。

如果您只保留一个域对象，用于表示层和域层，那么该对象很快就会变得单一。它开始包含 UI 验证代码、UI 导航代码和 UI 生成代码。然后，您很快就会在其上添加所有业务层方法。现在你的业务层和 UI 都混在一起了，都在领域实体层搞混了。

您想在另一个应用程序中重用那个漂亮的 UI 小部件吗？好吧，您必须使用这个名称、这两个模式和这 18 个表创建一个数据库。您还必须配置 Hibernate 和 Spring（或您选择的框架）来进行业务验证。哦，你还必须包括这85个其他不相关的类，因为它们在业务层中被引用，恰好在同一个文件中。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-14T06:58:49.033

我不同意。

我认为最好的方法是从表示层中的域对象开始，直到这样做有意义。

与流行的看法相反，“域对象”和“值对象”可以愉快地共存于表示层。这是做到这一点的最佳方式 - 您可以从两个世界中受益，减少域对象的重复（和样板代码）；以及跨请求使用值对象的剪裁和概念简化。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-06-12T08:00:54.923

答案取决于您的应用程序的规模。

* * *

## 简单的 CRUD（创建、读取、更新、删除）应用程序

对于基本的 crud 应用程序，您没有任何功能。在实体之上添加 DTO 会浪费时间。它会增加复杂性而不增加可扩展性。

[![在此处输入图像描述](https://i.stack.imgur.com/va5Nw.png)](https://i.stack.imgur.com/va5Nw.png)

* * *

## 中等复杂的非 CRUD 应用程序

在这种规模的应用程序中，您将很少有实体具有真正的生命周期和一些与之相关的业务逻辑。

在这种情况下添加 DTO 是一个好主意，原因如下：

*   表示层只能看到实体具有的字段的子集。你封装实体
*   后端和前端之间没有耦合
*   如果您在实体内部有业务方法，但在 DTO 中没有，那么添加 DTO 意味着外部代码不能破坏实体的状态。

[![在此处输入图像描述](https://i.stack.imgur.com/ZYvuc.png)](https://i.stack.imgur.com/ZYvuc.png)

* * *

## 复杂的企业应用

单个实体可能需要多种呈现方式。他们每个人都需要不同的字段集。在这种情况下，您会遇到与上一个示例相同的问题，并且需要控制每个客户端可见的字段数量。为每个客户端设置单独的 DTO 将帮助您选择应该可见的内容。

[![在此处输入图像描述](https://i.stack.imgur.com/wVV0F.png)](https://i.stack.imgur.com/wVV0F.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-04T18:28:58.750

我们在服务器和 ui 上使用相同的模型。这是一种痛苦。我们总有一天要重构它。

问题主要是因为需要将域模型切割成更小的部分，以便能够在不引用整个数据库的情况下对其进行序列化。这使得在服务器上使用起来更加困难。缺少重要链接。有些类型也不是可序列化的，不能发送到客户端。例如“类型”或任何通用类。它们需要是非泛型的，并且类型需要作为字符串传输。这会为序列化生成额外的属性，它们是多余的和令人困惑的。

另一个问题是 UI 上的实体并不适合。我们正在使用数据绑定，并且许多实体具有许多仅用于 ui 目的的冗余属性。此外，实体模型中有许多“BrowsableAttribute”和其他。这真的很糟糕。

最后，我认为这只是哪种方式更容易的问题。可能有项目可以正常工作并且不需要编写另一个 DTO 模型。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-04T18:30:26.907

大部分是关于依赖关系的。组织的核心功能结构有自己的功能需求，UI应该让人们可以修改和查看核心；但不应要求内核本身适应 UI。（如果它需要发生，这通常表明核心不是属性设计的。）

我的会计系统有一个结构和内容（和数据），应该模拟我公司的运营。无论我使用什么会计软件，这种结构都是真实存在的。（不可避免地，一个给定的软件包本身就包含结构和内容，但部分挑战是尽量减少这种开销。）

基本上一个人有工作要做。DDD 应该与工作的流程和内容相匹配。DDD 是关于尽可能完整和独立地明确所有需要完成的工作。然后，UI 希望有助于尽可能透明、尽可能高效地完成工作。

接口是关于为正确建模和不变的功能核心提供的输入和视图。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-04T18:45:25.297

该死的，我*发誓*这就是坚持。

无论如何，这是同一件事的另一个例子：帕纳斯定律说模块应该保密，而这个秘密是可以改变的要求。（Bob Martin 有一个规则，它是另一个版本。）在这样的系统中，*表示*可以独立于*domain*改变。例如，一家公司维持欧元价格并在公司办公室使用法语，但希望以普通话文本显示美元价格。*域*是一样的；演示文稿可以更改。因此，为了最大限度地减少系统的脆弱性——也就是说，为了实现需求的改变而必须改变的事物的数量——你将关注点分开。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-06-02T01:47:14.593

您的演示文稿可能会*引用*您的域层，但不应直接从您的 ui 绑定到您的域对象。域对象不适合 UI 使用，因为如果设计得当，它们通常基于行为而不是数据表示。UI 和 Domain 之间应该有一个映射层。MVVM 或 MVP 是一个很好的模式。如果您尝试直接将您的 UI 绑定到域，您可能会给自己带来很多麻烦。他们有两个不同的目的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-04T18:35:39.593

也许您没有在足够宽泛的术语中概念化 UI 层。考虑多种形式的响应（网页、语音响应、印刷信件等）和多种语言（英语、法语等）。

现在假设电话呼入系统的语音引擎运行在与运行网站的计算机（可能是 Windows）完全不同类型的计算机（例如 Mac）上。

当然很容易陷入“在我公司我们只关心英语，在 LAMP（Linux、Apache、MySQL 和 PHP）上运行我们的网站，每个人都使用相同版本的 Firefox”的陷阱。但是 5 年或 10 年后呢？

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-04T21:48:07.417

另请参阅下面的“层之间的数据传播”部分，我认为这提出了令人信服的论点：

[http://galaxy.andromda.org/docs/andromda-documentation/andromda-getting-started-java/java/index.html](http://galaxy.andromda.org/docs/andromda-documentation/andromda-getting-started-java/java/index.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-07-02T12:49:02.233

[在使用视图时，借助“ Value Injecter](http://valueinjecter.codeplex.com/) ”等工具和表示层中的“Mappers”概念，可以更容易地理解每段代码。如果您有一点代码，您不会立即看到优势，但是当您的项目越来越大时，您会很高兴在使用视图时不必进入服务的逻辑，存储库以了解视图模型。View Model 是浩瀚反腐层的另一位卫士，在长期项目中价值连城。

我认为使用视图模型没有优势的唯一原因是，如果您的项目足够小且足够简单，可以将视图直接绑定到模型的每个属性。但是如果在未来，需求变化和视图中的一些控件将不会绑定到模型并且您没有视图模型概念，您将开始在许多地方添加补丁，并且您将开始拥有遗留代码你不会欣赏的。当然，您可以进行一些重构以在 view-viewmodel 中转换您的视图模型并遵循 YAGNI 原则，如果您不需要它，则不要添加代码，但对于我自己来说，这是我必须遵循的最佳实践来添加表示层仅公开视图模型对象。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-03-14T09:18:47.687

这是一个真实的示例，说明为什么我认为将域实体与视图分开是一种很好的做法。

几个月前，我创建了一个简单的 UI，通过一系列 3 个仪表显示土壤样本中氮、磷和钾的值。每个仪表都有红色、绿色和红色部分，即每个组件的含量可能太少或太多，但中间有一个安全的绿色水平。

没有多想，我为我的业务逻辑建模以提供这 3 种化学成分的数据和一个单独的数据表，其中包含有关 3 种情况中每种情况的可接受水平的数据（包括正在使用的测量单位，即摩尔或百分比）。然后我对我的 UI 进行建模以使用一个非常不同的模型，这个模型关注量规标签、值、边界值和颜色。

这意味着当我后来不得不展示 12 个组件时，我只是将额外的数据映射到 12 个新的仪表视图模型中，它们就会出现在屏幕上。这也意味着我可以轻松地重用仪表控件并让它们显示其他数据集。

如果我将这些仪表直接耦合到我的域实体中，我将没有上述任何灵活性，并且将来的任何修改都会令人头疼。在 UI 中对日历进行建模时，我遇到了非常相似的问题。如果有 10 人以上的参加者要求日历约会变为红色，则处理此问题的业务逻辑应保留在业务层中，并且 UI 中的所有日历都需要知道，是否已指示它变红，应该不需要知道为什么。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-05-04T18:38:15.330

在通用语义和特定领域语义之间添加额外映射的唯一合理原因是，您拥有（访问）现有的代码（和工具）主体，这些代码（和工具）基于不同于您的领域语义的通用（但可映射）语义。

当与一组正交的功能域框架（如 ORM、GUI、工作流等）结合使用时，域驱动设计效果最佳。永远记住，只有在外层邻接关系中才需要暴露域语义。通常这是前端 (GUI) 和持久后端 (RDBM,ORM)。任何有效设计的中间层都可以而且应该是域不变的。

# xml - XPath 和

> ID：821286
> 
> 赞同：0
> 
> 时间：2009-05-04T18:23:43.227
> 
> 标签：xml, xpath, wix

我有一个需要使用 MSBuild 修改的 WIX 文件。它是这样开始的：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension">

  <?--... Removed Params ...-->

  <?define ProductVersion = "1.0.1"?>

  <?--... Removed Params ...-->

  <Product Id='$(var.ProductCode)'
    UpgradeCode='$(var.UpgradeCode)'
    Name='$(var.AppName)' Language="1033" Version='$(var.ProductVersion)'
    Manufacturer='$(var.Manufacturer)'>
    <Package Id='$(var.PackageCode)' InstallerVersion="200" 
    Compressed="yes" />

  <?--... Rest of the WIX XML file ...--> 
```

我的问题是我不知道 XPath 会是什么`<?define ProductVersion = "1.0.1"?>`。有没有办法通过 XPath 引用它，以便我可以使用 SDC SetValue MSBuild Task 来更改它？它不是一个节点（我认为），所以我不确定如何引用它。

瓦卡诺

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T19:05:13.970

另一种方法是通过命令行定义参数来蜡烛：

```
candle -dProductVersion=1.0.1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T18:35:39.983

看起来`/Wix/processing-instruction('define')`可能适用于 XPath（我不知道 MSBuild 是否承认这一点）。

通过将其插入[SketchPath](http://pgfearo.googlepages.com/)，我可以在其中单击并测试各种 XPath 以查看会选择该元素的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:36:18.953

//处理指令('define')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T18:38:11.070

`<?define>`是一个处理指令节点，因此您应该能够使用 XPath 表达式来解决它，例如

```
//processing-instruction('define') 
```

# vb.net - 全屏 Windows Mobile 6 应用程序上闪烁的任务栏

> ID：821307
> 
> 赞同：0
> 
> 时间：2009-05-04T18:30:44.910
> 
> 标签：vb.net, windows-mobile, compact-framework

刚刚完成对用 VB.NET 编写的应用程序的更新，该应用程序曾经在 CE.NET 4.2 下运行良好。部署平台现在是 Windows Mobile 6.1。

应用程序全屏运行，但是每当打开新表单时，任务栏，即带有开始按钮的栏就会出现，然后新表单接管。这特别烦人，因为我有一个包含许多子表单的表单，它们是 128,128，但任务栏仍然闪烁并遮住了用户输入屏幕的一部分。

有没有人遇到过这个？任何已知的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-10T21:20:19.337

我假设您的应用程序流程类似于：

1.  表格 1 打开。
2.  表格 1 关闭。
3.  表格 2 打开。

问题是在 Form 1 关闭和 Form 2 打开背景窗口之间可能会被部分绘制（例如任务栏将绘制）。

为了解决这个问题，我们通常会创建一个位于表单窗口后面的父窗口（您的情况是全屏窗口）。这样，当一个正在关闭而下一个正在打开时，它会回退到显示父窗口，该窗口可以显示您喜欢的任何内容（空白？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T13:31:58.240

您可以使用我在[此处](https://stackoverflow.com/questions/747615/how-to-make-a-mobile-application-stay-on-top/747626#747626)发布的技术来禁用任务栏。

# javascript - 是否可以在没有插件的浏览器中实现语音聊天？

> ID：821311
> 
> 赞同：1
> 
> 时间：2009-05-04T18:32:05.810
> 
> 标签：javascript, chat

[CampFireNow](http://campfirenow.com/tour)通过浏览器进行语音聊天。似乎您不需要安装任何插件即可使其正常工作。这与我需要安装应用程序的 Gmail 形成鲜明对比。

我想为我的应用程序实现类似的功能。有没有办法在不需要插件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T18:37:30.947

我从未使用过 CampFireNow，但它可能使用 Flash

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T18:40:26.463

我没用过，所以没办法看源码。不过，我不相信有一种方法可以在没有任何插件的情况下做到这一点。我的猜测是他们要么使用 Flash 要么使用 Java（可能是 Flash）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:03:18.013

Flash 或 Java 将是唯一与浏览器无关的东西。否则，你肯定需要一个插件，除非特定的浏览器为你提供了记录的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-14T06:59:45.193

如果有人来寻找可能的解决方案，WebRTC 可以让您做到这一点。欲了解更多信息，请访问[https://webrtc.org/](https://webrtc.org/)

从网站上看，*“WebRTC 是一个免费的开放项目，它通过简单的 API 为浏览器和移动应用程序提供实时通信 (RTC) 功能。WebRTC 组件已经过优化，以最好地服务于这一目的。”*

# ruby-on-rails - 在使用 Rails 时是否可以避免遵循 MVC 模式？

> ID：821315
> 
> 赞同：1
> 
> 时间：2009-05-04T18:33:31.987
> 
> 标签：ruby-on-rails, model-view-controller

[对我今天早些时候提出的一个问题](https://stackoverflow.com/questions/821010/should-i-use-erb-or-rhtml-files-for-a-rails-app-in-which-all-controller-logic-e)的一些回答让我质疑我的假设，即应该可以以非 MVC 方式使用 Rails，而不是简单地将 Sinatra 之类的微框架用于准系统非 MVC 类型的应用程序.

有没有人以非 MVC 的方式使用 Rails 而不会造成重大问题，或者你能想象一个合适的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T18:50:22.990

你想建造什么？如果你想使用所有的 Rails，MVC 是最好的选择。即使是像 camping 这样的小框架也是 MVC。

如果你只需要它的一部分，最常见的是activerecord，你可以很高兴地以任何你想要的方式使用它。

但是 Rails 本身就是 MVC，你会反对它试图强迫它进入另一个范式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T18:50:46.140

是的，这是可能的，但是 Rails 框架架构师让我们很难偏离 MVC 路径是有原因的。他们希望鼓励“好”行为并阻止“坏”行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T18:37:23.163

您不仅应该将 MVC 与 Rails 一起使用，而且 MVC 通常是一个好主意。

如果您只是在编写一些一次性应用程序，那么您可能会查看[Rails Metal](http://weblog.rubyonrails.org/2008/12/17/introducing-rails-metal)，或者，正如您已经提到的，Sinatra。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T18:54:51.340

同样，为什么要避免使用 MVC？MVC是个好东西

# http - utmscr 或 utmcct 值在引用 Http cookie 服务器变量时意味着什么？

> ID：821321
> 
> 赞同：9
> 
> 时间：2009-05-04T18:35:07.613
> 
> 标签：http, http-headers, elmah, server-variables

utmscr和/或**utmcct**值在引用 Http cookie 服务器变量时意味着什么**？**它们是首字母缩略词还是缩写？

我们收到标题为“System.Web.HttpException：无法验证数据”的 Elmah 错误。在每个 Elmah 错误消息中，Http Cookie 服务器变量值包含一个名为**utmscr**的属性，该属性设置为同一网站，**utmcct**设置为该网站的页面。这是 Elmah 服务器变量转储中 Http Cookie 值的一部分。

utmccn=（推荐）| **utmcsr=someWebSite.com|utmcct=/someWebPage.htm |utmcmd=** referral; CP=空*；

someWebpage.htm 页面确实存在于 someWebsite.com，但目前没有对我们页面的引用。我们认为错误与视图状态有关。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-09-09T20:09:56.620

我的猜测，就像[博士一样。邪恶](https://stackoverflow.com/questions/821321/what-does-the-utmscr-or-utmcct-values-mean-in-reference-to-the-http-cookie-server/821330#821330)，是它与 Google Analytics 或[gaforflash 有关](http://code.google.com/p/gaforflash/)。

在本页面

[http://gaforflash.googlecode.com/svn-history/r330/trunk/src/com/google/analytics/campaign/CampaignTracker.as](http://gaforflash.googlecode.com/svn-history/r330/trunk/src/com/google/analytics/campaign/CampaignTracker.as)

我发现了这个评论块：

```
 /**
         * Format for tracker have the following fields (seperated by "|"):
         *         <table>
         *           <tr><td>utmcid - lookup table id</td></tr>
         *           <tr><td>utmcsr - campaign source</td></tr>
         *       <tr><td>utmgclid - google ad click id</td></tr>
         *           <tr><td>utmccn - campaign name</td></tr>
         *           <tr><td>utmcmd - campaign medium</td></tr>
         *           <tr><td>utmctr - keywords</td></tr>
         *           <tr><td>utmcct - ad content description</td></tr>       
         *         </table>
         * should be in this order : utmcid=one|utmcsr=two|utmgclid=three|utmccn=four|utmcmd=five|utmctr=six|utmcct=seven
         * 
         */ 
```

那或相关的东西可能是您的价值观的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:37:46.420

这应该是 Google Analytics cookie 或其他一些第 3 方跟踪 cookie。我不知道这是否有帮助:)

# com - 我应该如何检查 COM 中的 [out] 参数是否可以使用？

> ID：821322
> 
> 赞同：1
> 
> 时间：2009-05-04T18:35:13.417
> 
> 标签：com, out-parameters, hresult

除非函数成功，否则官方不应使用`[out]`COM 函数中的参数，这意味着（至少）有三种方法可以查看是否`[out]`可以使用参数。

考虑以下接口

```
interface IFoo : IUnknown {
    HRESULT GetOtherFoo([out] IFoo** ppFoo);
    HRESULT Bar();
}; 
```

您会推荐以下哪种方式来使用它？

**1.检查返回值**

```
CComPtr<IFoo> other;
HRESULT hr = foo->GetOtherFoo(&other);
if (SUCCEEDED(hr)) 
    other->Bar(); 
```

这让我有点紧张，因为一个错误`IFoo`可能会导致`NULL`指针取消引用。

**2.检查输出参数**

这取决于一个事实，如果一个方法失败，它不能改变任何`[out]`参数（如果参数改变了 <==> 使用它是安全的）。

```
CComPtr<IFoo> other;
foo->GetOtherFoo(&other);
if (other) 
    other->Bar(); 
```

请注意，无论如何都会发生这种情况，如果指针不存在，则`CComPtr`析构函数将调用，因此它不会是垃圾。`Release``NULL`

**3.偏执的方式，检查两者**

```
CComPtr<IFoo> other;
HRESULT hr = foo->GetOtherFoo(&other);
if (SUCCEEDED(hr) && other) 
    other->Bar(); 
```

在我看来，这有点冗长。

* * *

PS 见[相关问题](https://stackoverflow.com/questions/705093)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T19:47:16.817

返回成功 HRESULT，但将它们的一些输出参数设置为 NULL 的 COM 服务器方法并不常见。在少数情况下（想到 IClientSecurity::QueryBlanket）会用到它，但如果方法成功返回，通常客户端可能期望所有输出参数都为非 NULL。

毕竟，这是如何记录方法的问题。但是，在默认情况下，我认为 1\. 是一种安全的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T04:03:00.337

如果您愿意编写更多检查并使代码变慢一些以使其更可靠，那么选项 3 适合您。由于您预计 COM 服务器中存在错误，因此检查它们是非常合理的。

# groovy - 您如何配置 GroovyConsole 以便我不必在启动时导入库？

> ID：821327
> 
> 赞同：8
> 
> 时间：2009-05-04T18:37:22.787
> 
> 标签：groovy, import, classpath, groovy-console

我有一个使用第三方库的 groovy 脚本。每次我打开应用程序并尝试运行我的脚本时，我都必须导入正确的库。

我希望能够打开 GroovyConsole 并运行我的应用程序，而无需导入库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-09-08T15:02:34.630

在 Linux 中，你也有

```
/usr/share/groovy/conf/groovy-starter.conf 
```

在这里您可以添加您的特定库：

```
# load user specific libraries
load !{user.home}/.groovy/lib/*.jar
load /home/squelsh/src/neo4j-community-1.4.M03/lib/*.jar
load /home/squelsh/src/neo4j-community-1.4.M03/system/lib/*.jar 
```

希望它有帮助，不得不搜索很长时间才能找到这个（：

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-10-17T12:23:40.527

如果您只想将 JAR 添加到类路径中，请将它们复制（或符号链接）到`~/.groovy/lib`（或`%USER_HOME%/.groovy/lib`在 Windows 上）。

如果您希望`import`每次 Groovy 控制台启动时都运行实际语句，请按照 Squelsh 的建议编辑 groovy-starter.conf 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T08:21:38.937

至少在 Linux groovy GroovyConsole 上是一个具有以下命令的脚本：

```
startGroovy groovy.ui.Console "$@" 
```

startGroovy 本身是一个启动 Java 的脚本。在 startGroovy 脚本中，您应该能够修改您的类路径并添加缺少的库。

从 startGroovy 开始：

```
startGroovy ( ) {
    CLASS=$1
    shift
    # Start the Profiler or the JVM
    if $useprofiler ; then
        runProfiler
    else
        exec "$JAVACMD" $JAVA_OPTS \
            -classpath "$STARTER_CLASSPATH" \
            -Dscript.name="$SCRIPT_PATH" \
            -Dprogram.name="$PROGNAME" \
            -Dgroovy.starter.conf="$GROOVY_CONF" \
            -Dgroovy.home="$GROOVY_HOME" \
            -Dtools.jar="$TOOLS_JAR" \
            $STARTER_MAIN_CLASS \
            --main $CLASS \
            --conf "$GROOVY_CONF" \
            --classpath "$CP" \
            "$@"
    fi 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-15T05:46:56.913

您可以编写一个外部 Groovy 脚本来执行所有导入，创建一个 GroovyConsole 对象，并调用该对象的 run() 方法。

另请参阅[http://groovy.codehaus.org/Groovy+Console#GroovyConsole-EmbeddingtheConsole](http://groovy.codehaus.org/Groovy+Console#GroovyConsole-EmbeddingtheConsole)

例如：start.groovy

```
import groovy.ui.Console;

import com.botkop.service.*
import com.botkop.service.groovy.*

def env = System.getenv()
def service = new ServiceWrapper(
  userName:env.userName, 
  password:env.password, 
  host:env.host, 
  port:new Integer(env.port))

service.connect()

Console console = new Console()
console.setVariable("service", service)
console.run() 
```

从 shell 脚本调用 groovy 可执行文件，为它提供 groovy 脚本：

```
#!/bin/bash

if [ $# -ne 4 ]
then 
  echo "usage: $0 userName password host port"
  exit 10
fi

export userName=$1
export password=$2
export host=$3
export port=$4

export PATH=~/apps/groovy/bin:/usr/bin:$PATH
export CLASSPATH=$(find lib -name '*.jar' | tr '\n' ':')

groovy start.groovy 
```

GroovyConsole 中的代码现在可以使用在 start.groovy 中完成的导入，以及使用 setVariable 方法（示例中的“服务”）创建和传递的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-30T05:50:25.853

如果您使用的是 Mac，我强烈建议您使用 SDKMAN 来管理 Groovy 安装。

通过 SDKMAN 安装后，您可以修改`~/.sdkman/candidates/groovy/current/bin/groovy/conf/groovy-starter.conf`. 每当您启动 Groovy 控制台会话时，您在此处添加的包将在运行时自动导入。您可能希望将它们添加到下面示例中标记的部分下：

```
 # load user specific libraries
    load !{user.home}/.groovy/lib/*.jar
    load !{user.home}/.groovy/lib/additional_package.jar 
```

# asp.net - 将“onclick”属性添加到 asp.net 下拉列表项

> ID：821341
> 
> 赞同：7
> 
> 时间：2009-05-04T18:40:41.033
> 
> 标签：asp.net, javascript

我可以向 RadioButtonList 项目中的项目添加一个属性，如下所示：

```
PaymentMethodDropDownList.Items[0].Attributes.Add("onclick", "javascript:showNoMethods();");
PaymentMethodDropDownList.Items[1].Attributes.Add("onclick", "javascript:showCreditCardMethod();");
PaymentMethodDropDownList.Items[2].Attributes.Add("onclick", "javascript:showSendPaymentMethod();"); 
```

但是，当我尝试将属性添加到 DropDownList 控件时，它似乎不起作用。我希望它是相似的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-04T18:42:17.987

这不能以与 radioButtonList 相同的方式完成，对于下拉列表，正确的属性事件名称是“onchange”而不是“onclick”。该事件应附加到 DropDownList 本身，而不是以下项目：

```
PaymentMethodDropDownList.Attributes.Add("onchange",
                                            "showCreditCardMethod();"); 
```

此外，这有点复杂，需要自定义 javascript 函数来根据所选选项执行不同的操作。这是一个例子：

```
PaymentMethodDropDownList.Attributes.Add("onchange",
                                             "handleDropDownEvents(this);"); 
```

**自定义 Javascript 函数：**假定下拉项的值为“CreditCard”和“SendPayment”。

```
<script type="text/javascript">
    function handleDropDownEvents(e){
      if(e.value == "CreditCard"){
         showCreditCardMethod();
      }
      else if(e.value == "SendPayment"){
        showSendPaymentMethod();
      }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T18:49:47.983

实际上，对于 ASP .Net 中的 DropDownList，您要查找的属性是*OnSelectedIndexChanged*或*OnTextChanged*。两者的工作完全相同。

希望这有帮助；）

# c# - 如何有选择地在 RichTextBox 中为字符串加下划线？

> ID：821347
> 
> 赞同：3
> 
> 时间：2009-05-04T18:41:44.243
> 
> 标签：c#, richtextbox, rtf

在我的程序中单击按钮后 - 应将选定的 ListView 条目复制到 RichTextBox。ListView 包含联系人信息，我想要完成的效果类似于 Oulook 中的效果（从通讯录中选择联系人时）。用于此目的的部分代码如下所示：

```
 private void toButton_Click(object sender, EventArgs e)
    {
        int start = 0;
        for (int i = 0; i < contactsListView.SelectedItems.Count; i++)
        {
            if (contactsTextBox.TextLength != 0) contactsTextBox.Text += "; ";
            start = contactsTextBox.TextLength;
            contactsTextBox.Text += contactsListView.SelectedItems[i].Text + " " + contactsListView.SelectedItems[i].SubItems[1].Text + " [" + contactsListView.SelectedItems[i].SubItems[2].Text + "]";
            contactsTextBox.Select(start, contactsTextBox.TextLength);       
            contactsTextBox.SelectionFont = new Font(contactsTextBox.SelectionFont, FontStyle.Underline);
            contactsTextBox.DeselectAll();
            contactsTextBox.SelectionFont = new Font(contactsTextBox.SelectionFont, FontStyle.Regular);
        }
    } 
```

不幸的是，FontStyle 以某种方式被整个文本继承，我从 ListView 输入后输入的所有内容也都带有下划线。

所以我的问题是 - 如何仅在某些文本下划线（我犯了错误）？

[不幸的是，在我的](https://stackoverflow.com/questions/136132/better-way-of-manipulating-richtext-in-c)案例解决方案中，stackoverflow 上有类似的主题，说明会浪费资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T19:02:55.847

试试这个：

```
 int start = 0;
        for (int i = 0; i < contactsListView.SelectedItems.Count; i++)
        {
            if (contactsTextBox.TextLength != 0) contactsTextBox.Text += "; ";
            start = contactsTextBox.TextLength;
            contactsTextBox.Text += contactsListView.SelectedItems[i].Text +" " + contactsListView.SelectedItems[i].SubItems[1].Text + " [" + contactsListView.SelectedItems[i].SubItems[2].Text + "]";
        }

        this.contactsTextBox.Text += " ";
        this.contactsTextBox.SelectionStart = 0;
        this.contactsTextBox.SelectionLength = this.contactsTextBox.Text.Length-1;
        contactsTextBox.SelectionFont = new Font(contactsTextBox.SelectionFont, FontStyle.Underline);
        this.contactsTextBox.SelectionLength = 0; 
```

完全破解，但基本上，如果您在文本全部存在之后选择文本，但不要选择全部（这就是我添加额外的“”）然后设置选择文本，它具有预期的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:52:05.920

在将更多文本添加到文本框的末尾之前，请将光标放在末尾，并将字体设置为所需的样式。然后调用 rtb.AppendLine() 应该会产生所需的结果。

重要的是要记住 RTB 控件的执行方式与任何其他文字处理器相同。您设置样式并开始输入。然后，您在设置该样式后键入的任何内容都将采用这些属性下的属性。

更新：这似乎工作得很好。

```
Dim tTexts() As String = {"Dont underline me", "Underline me", "Dont underline me", "Underline me", "Dont underline me", "Underline me", "Dont underline me", "Underline me", "Dont underline me", "Underline me", "Dont underline me", "Underline me"}
    Dim tUnderline As Boolean = False
    Dim tIndex As Integer = 0

    With oRTB
        For tIndex = tTexts.GetLowerBound(0) To tTexts.GetUpperBound(0)
            If tUnderline Then
                .SelectionStart = .Text.Length
                .SelectionFont = New Font("Arial", 12, FontStyle.Underline)
            Else
                .SelectionStart = .Text.Length
                .SelectionFont = New Font("Arial", 12, FontStyle.Regular)
            End If
            .AppendText(tTexts(tIndex))
            tUnderline = Not tUnderline
        Next
    End With 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T19:42:48.200

您的代码的问题在于 SelectionFont 就是这样 - 选择的字体。如果没有选择，字体更改将不会做任何事情。BFree 提供的解决方案似乎可行。这与我在 WORD 中键入文档时所做的相同——我会在下划线部分之后添加一些字符，然后再添加下划线，这样额外的字符就会“保存”原始格式，以便在我继续文档时使用。

BFree +1，但我还没有声誉:( ...

# django - 在 Django 中显示准确的当前时间和日期的最佳方法是什么？

> ID：821351
> 
> 赞同：3
> 
> 时间：2009-05-04T18:43:34.660
> 
> 标签：django

目前我的方法涉及创建一个上下文处理器，然后将其包含在站点范围内。但是，我注意到我在考虑夏令时更改时遇到了问题。我住在美国以外的地方，我的服务器在美国，但它的时区设置为我的。然而，由于我们不考虑夏令时，它总是比我当地时间早一小时。

知道如何解释吗？我过去曾使用过 timedelta -1，但不知何故我觉得这不是正确的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T19:32:55.010

您在服务器上设置的时区在您的 Django 应用程序中应该无关紧要。Django 将根据您在 settings.py 中设置的 TIME_ZONE 变量返回时间，而不是您在服务器上设置的时间。例如，一台服务器可以为多个 Django 驱动的站点提供服务，每个站点都有一个单独的时区设置。

请参阅：[http](http://docs.djangoproject.com/en/dev/ref/settings/#time-zone) ://docs.djangoproject.com/en/dev/ref/settings/#time-zone 。

只需确保将 TIME_ZONE 变量设置为 Zoneinfo 名称（即 America/Belize），而不仅仅是 GMT-6，因为这不会考虑夏令时。使用 Zoneinfo 名称，Django 将返回时间的夏令时感知版本。所以设置正确，你应该能够在你的 Django 应用程序中获得你想要的时区。

```
{% now h:ia %} 
```

这将以上午 9:30 的格式返回时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T18:52:00.083

如果服务器设置为您的时区，并且您想在您的时区显示时间，您应该能够使用以下内容：

```
{% now M d, Y h-ia %} 
```

给出如下内容：2009 年 1 月 23 日上午 9:21。

请参阅[http://docs.djangoproject.com/en/dev/ref/templates/builtins/](http://docs.djangoproject.com/en/dev/ref/templates/builtins/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-31T19:32:41.240

使用 Django 1.4，您现在可以使用 django.utils.timezone 为给定用户设置当前时区

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T18:58:44.547

听起来，虽然时间设置为您的时间，但时区不是。

如果这是 Linux 服务器，则时区由文件控制`/etc/localtime`

这实际上是一个符号链接到`/usr/share/zoneinfo`. 默认值可能类似于`/usr/share/zoneinfo/America/New_York`，但您可以`/usr/share/zoneinfo/America/Belize`通过执行以下操作将其更改为 *：

```
ln -sf /usr/share/zoneinfo/America/Belize /etc/localtime 
```

如果您使用不同的 *nix 操作系统，位置会略有不同。例如，Solaris 在`/usr/share/lib/zoneinfo`

这是假设您在机器上具有 root 访问权限，因为您有权更改系统时钟。

*您的位置在您的个人资料中列为伯利兹，以防您想知道我从哪里得到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T19:22:22.743

如果您只关心在客户端显示日期和时间，您可以只使用 Javascript，它将使用客户端计算机的日期和时间。

可能有你不想这样做的原因，但我想我还是会把它扔在那里。

# windows - IIS 日志文件和负载平衡器？

> ID：821352
> 
> 赞同：9
> 
> 时间：2009-05-04T18:43:45.907
> 
> 标签：windows, logging, iis-6, windows-server-2003

我们将 ASP.NET 应用程序托管在两个 Web 服务器（Server 2003、IIS 6）上，这些服务器位于硬件负载平衡器后面。当我查看 IIS 日志时，IIS (v6) 日志中的 c-ip 值始终是负载平衡器的 IP 地址。我注意到在 http 标头中，有一个 X-Forwarded-For 标头似乎具有请求的 IP 地址。我可以做些什么来让 IIS 在日志中记录这个标头值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-10T12:36:55.203

我不知道它已经存在了多久，但是**IIS 7 及更高**版本（在 Windows Server 2008 及更高版本上）的[高级日志记录扩展](http://www.iis.net/downloads/microsoft/advanced-logging)提供了[自定义日志记录功能](http://www.iis.net/learn/extensions/advanced-logging-module/advanced-logging-for-iis-custom-logging)，可用于收集（几乎）IIS 日志文件中的任意信息，包括自定义 HTTP 请求（和响应）标头，例如**X-Forwarded-For**。

 ****我今天刚刚在我们的服务器上进行了设置，它运行良好。

需要注意的一件事：不要通过*%COMPUTERNAME%-Server*的名称编辑默认日志定义，只需在您的站点上或在您的服务器上全局创建一个新定义，以避免出现“不支持请求”异常。尝试保存更改时。当您尝试在站点级别编辑该默认定义时会发生这种情况（感谢[此线程](http://forums.iis.net/t/1164430.aspx)的回答）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T18:57:36.310

当通过代理时，x-forwarded-for 是负载均衡器最[常用的。](http://en.wikipedia.org/wiki/X-Forwarded-For)您可能可以编写一个[httpfilter](http://devcentral.f5.com/weblogs/Joe/archive/2005/09/23/1492.aspx)来交换它自己；或者[IIS Tracer](http://iismonitor.motobit.com/)可以处理标准文件；包括交换 c-ip 和 x-forwarded 字段。

如果这样做不是为了使用第三方报告工具；您可能希望将日志转储到 SQL Server 中，您可以在其中随时操作列。

我个人选择后者，以便我可以获得所有服务器的汇总数据；我转储到同一个数据库中的不同表中，然后从场中的所有 Web 服务器报告。我还发现它比到处管理 500mb 左右的日志文件更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T18:57:39.680

F5 网络在 devcentral.f5.com 上提供了一个 ISAPI 过滤器，它将采用 x-forwarded-for 并在日志中使用它。

但是，除此之外，您无能为力——这就是 TCP 的工作原理。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-16T10:44:21.640

这是一个很老的问题，但我想我会补充一点，IIS 8.5 能够将自定义 HTTP 标头写入 IIS 日志。这比安装 ISAPI 过滤器或 HTTP 模块要好得多。

本演练展示了如何通过 IIS 管理器进行设置： [http ://www.iis.net/learn/get-started/whats-new-in-iis-85/enhanced-logging-for-iis85](http://www.iis.net/learn/get-started/whats-new-in-iis-85/enhanced-logging-for-iis85)

这个另一个 SO 问题显示了如何使用 PowerShell： [Add IIS 8.5 Custom Logging Fields with Powershell](https://stackoverflow.com/questions/18992990/add-iis-8-5-custom-logging-fields-with-powershell)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-27T09:31:16.563

IIS 8.5 高级日志记录将让您轻松记录 X-FORWAREDED-FOR 标头。

[IIS 8.5 高级日志记录](http://www.iis.net/learn/get-started/whats-new-in-iis-85/enhanced-logging-for-iis85)

# c# - LINQtoSQL 根据另一个表的值检索一个表，该表与该表具有多对多关系

> ID：821353
> 
> 赞同：1
> 
> 时间：2009-05-04T18:43:47.670
> 
> 标签：c#, linq, linq-to-sql

我有以下三个表：

[替代文字 http://img16.imageshack.us/img16/5499/linqtosqlquery.jpg](http://img16.imageshack.us/img16/5499/linqtosqlquery.jpg)

使用 LinqToSql，我想检索 InventoryItems 列表，其中 (pointsName="Level" AND pointsValue <= maxStoreLevel) AND pointsName="Buy Price" 和

请注意，这`maxStoreLevel`是一个整数，它是 pointsName = "Level" 的点行的值。

由于您不能在 Linq 的另一个 where 中使用 where，我不知道如何检索上述列表。

更新：这是所要求的UML图

[替代文字 http://img17.imageshack.us/img17/3403/umldiagram.jpg](http://img17.imageshack.us/img17/3403/umldiagram.jpg)

为了进一步解释我的场景，这里是我表中的数据：

[替代文字 http://img4.imageshack.us/img4/7847/linqexample.jpg](http://img4.imageshack.us/img4/7847/linqexample.jpg)

假设 maxStoreLevel 为 1，“Hanzo's Helmet”的 pointsValue = 1 其中 pointsName="Level" 并且还有一个名为“Buy Price”的点，因此应该返回它的行（与具有相同标准的任何其他 Inventoryitems 相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:51:28.070

好的，所以这不如 lambda 表达式漂亮，而且我仍然有点模糊 where 子句到底需要什么，因为 PointsName 不能同时是 Level 和 Buy Price，但我需要开始某处的谈话。我猜您需要在积分表上进行 2 次连接，但由于您比我更了解您的设置，我猜您将能够接受并根据需要进行修改。让我知道我错过了什么...

```
var items = (From items in context.InventoryItems
             join itemPoints in context.InventoryItemPoints on items.InventoryItemID equals itemPoints.InventoryItemID
             join points in context.Points on itemPoints.pointsID equals points.pointsID
             where (points.pointsName == "Level" && itemPoints.pointsValue == maxStoreLevel) && points.pointsName == "Buy Price"
             select items).Distinct(); 
```

我知道原始文件不会返回行，因为点名称无法同时具有两个值，但根据您随后的更新，我认为您需要的是：

```
var items = (From items in context.InventoryItems
             join levelItemPoints in context.InventoryItemPoints on items.InventoryItemID equals levelItemPoints.InventoryItemID
             join levelPoints in context.Points on levelItemPoints.pointsID equals levelPoints.pointsID
             join priceItemPoints in context.InventoryItemPoints on items.InventoryItemID equals priceItemPoints.InventoryItemID
             join pricePoints in context.Points on priceItemPoints.pointsID equals pricePoints.pointsID
             where (levelPoints.pointsName == "Level" && levelItemPoints.pointsValue == maxStoreLevel) && pricePoints.pointsName == "Buy Price"
             select items).Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:58:41.067

就像是：

```
var items = inventoryItems.Where(
  invItem => invItem.InventoryItemPoints.Contains(
    iip => (iip.pointsName == "Buy Price" || iip.PointsName == "Level") &&
    iip.pointsValue == maxStoreLevel); 
```

但根据您发布的内容，这有点猜测，如果不是这样，dbml 的屏幕截图会很有用;)

更新：好的——这显然是垃圾（对不起，几杯酒太多了：）

试试这个：

```
var items = dataContext.inventoryItems.Where(
    invItem => ivnItem.InventoryItemPoints.Select(
        iip => iip.Point.PointName).Contains(
        "Buy Price")
        && invItem.InventoryItemPoints.Select(
            iip => iip.pointsValue).Contains(maxStoreLevel)); 
```

添加其他点名应该很容易......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:35:35.093

虽然不能将 where 子句加倍，但可以使用子选择并使用 Count 来查看它们是否包含值。尝试：

```
var items = from item in context.InventoryItems
    where (from iip in context.InventoryItemPoints
        join p in context.Points on p.pointsId equals iip.pointsId
        where iip.InventoryItemId == item.InventoryItemId 
                    && p.pointsName == "Level" && iip.pointsValue == maxStoreLevel
        select iip).Count() > 0
    && (from iip in context.InventoryItemPoints
        join p in context.Points on p.pointsId equals iip.pointsId
        where iip.InventoryItemId == item.InventoryItemId 
                    && p.pointsName == "Buy Price"
        select iip).Count() > 0
    select item; 
```

# php - 用 PHP/GD 在 JPEG 上叠加颜色？

> ID：821354
> 
> 赞同：0
> 
> 时间：2009-05-04T18:43:51.260
> 
> 标签：php, gd

我的服务器上存储了一组黑白 JPEG。这些图像是基于符号的，其中符号是白色背景上的黑色线条的集合。

我正在尝试使用 GD 根据传递的变量动态地将黑色替换为另一种颜色。目前，我是：

获取 JPEG 为：$image = imagecreatefromjpeg($imgURL)，通过 PHP 将 HEX 代码（例如#FF0000）转换为 RGB，

然后将这些变量输入：

```
private function colourize_image($image, $colour, $contrast = 0) {
    if (!$image) { return false; }

    imagealphablending($image, true);
    imagesavealpha($image, true);

    # Convert hex colour into RGB values
    $r = hexdec('0x' . $colour{0} . $colour{1});
    $g = hexdec('0x' . $colour{2} . $colour{3});
    $b = hexdec('0x' . $colour{4} . $colour{5});

    imagefilter($image, IMG_FILTER_COLORIZE, $r, $g, $b);
    imagefilter($image, IMG_FILTER_CONTRAST, $contrast);

    # Return the GD image object
    return $image;
} 
```

由于某种原因，该功能根本不起作用（它不会覆盖新颜色）。

谁能告诉我哪里出错了？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T21:59:00.137

您可以使用该`imageistruecolor`功能来确定您刚刚加载的 JPEG 是真彩色还是基于调色板的。如果它不是真彩色，您可以创建一个相同宽度和高度的新真彩色图像，并将旧图像复制过来：

```
$width = imagesx($jpeg);
$height = imagesy($jpeg);
$image = imagecreatetruecolor($width, $height);
imagecopy($jpeg, $image, 0, 0, 0, 0, $width, $height); 
```

然后，您应该能够应用新颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T19:15:59.310

如果颜色是唯一的问题，那么你可以试试这个：

```
      <php>
      //剪辑
      $color = preg_replace('/^#/','',$color); //如果有“#”就去掉
      $r = hexdec("0x{$color[0]}{$color[1]}");
      $g = hexdec("0x{$color[2]}{$color[3]}");

      $b = hexdec("0x{$color[4]}{$color[5]}");
      //剪辑
      </php>

```

# javascript - 重新加载 IFRAME 而不添加到历史记录

> ID：821359
> 
> 赞同：73
> 
> 时间：2009-05-04T18:45:38.617
> 
> 标签：javascript, html, iframe

我正在更改 IFRAME`src`以重新加载它，它工作正常并`onload`在其 HTML 加载时触发事件。

但它在历史记录中添加了一个条目，这是我不想要的。有没有办法重新加载 IFRAME 而不会影响历史记录？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2011-12-30T16:27:51.527

使用 replace() 只是您自己的域 iframe 的一个选项。它无法在远程站点上工作（例如：twitter 按钮），并且需要一些特定于浏览器的知识才能可靠地访问子窗口。

相反，只需删除 iframe 元素并在同一位置构建一个新元素。仅当您在 DOM 中修改属性时才会创建历史记录项`src`，因此请确保在追加之前设置它。

编辑：JDandChips 正确地提到您可以从 DOM 中删除、修改和重新附加。不需要构建新鲜的。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-05-04T18:50:54.533

您可以使用 javascript [`location.replace`](https://developer.mozilla.org/en/window.location)：

```
window.location.replace('...html'); 
```

> 将当前文档替换为提供的 URL 中的文档。与 assign() 方法的不同之处在于，在使用 replace() 之后，当前页面将不会保存在会话历史记录中，这意味着用户将无法使用后退按钮导航到该页面。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2011-01-19T15:05:00.337

就像 Greg 上面所说的， .replace() 函数是如何做到这一点的。我似乎不知道如何回复他的答案*，但诀窍是引用 iFrames contentWindow 属性。

```
var ifr = document.getElementById("iframeId");
ifr.contentWindow.location.replace("newLocation.html"); 
```

*刚刚得知我需要更多的声誉来评论答案。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-08-18T14:39:18.333

重新创建 iframe 的另一种方法是从 DOM 中删除 iframe，更改 src 然后重新添加它。

在许多方面，这与`replace()`建议相似，但是当我尝试使用 History.js 使用这种方法并手动管理状态时遇到了一些问题。

```
var container = iframe.parent();

iframe.remove();
iframe.attr('src', 'about:blank');

container.append(iframe); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-09-29T22:06:44.363

一种解决方案是使用`object`标签而不是`iframe`标签。

替换这个：

```
<iframe src="http://yourpage"/> 
```

这样：

```
<object type="text/html" data="http://yourpage"/> 
```

将允许您在`data`不影响历史记录的情况下更新属性。如果您使用声明性框架，例如`React.js`您不应该执行任何命令式命令来更新 DOM，这将非常有用。

`iframe`有关和之间差异的更多详细信息`object`：[使用 iframe 或 Object 标签将网页嵌入另一个](https://stackoverflow.com/questions/924946/use-of-iframe-or-object-tag-to-embed-web-pages-in-another/32854398#32854398)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-25T17:25:11.107

尝试使用此功能将旧 iframe 替换为从旧 iframe 复制的新 iframe：

```
function setIFrameSrc(idFrame, url) {
    var originalFrame = document.getElementById(idFrame);
    var newFrame = document.createElement("iframe");
    newFrame.id = originalFrame.getAttribute("id");
    newFrame.width = originalFrame.getAttribute("width");
    newFrame.height = originalFrame.getAttribute("height");
    newFrame.src = url;    
    var parent = originalFrame.parentNode;
    parent.replaceChild(newFrame, originalFrame);
} 
```

像这样使用它：

```
setIFrameSrc("idframe", "test.html"); 
```

这种方式不会将 iframe 的 URL 添加到浏览器历史记录中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-08T13:35:39.537

使用该`replace`方法绕过将 iframe 的 URL 添加到历史记录：

HTML：

```
<iframe id="myIframe" width="100%" height="400" src="#"></iframe> 
```

JavaScript：

```
var ifr = document.getElementById('mIframe')
if (ifr) {
  ifr.contentWindow.location.replace('http://www.blabla.com')
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-23T11:27:29.633

JDandChips 答案在跨源 iframe（youtube）上为我工作，这里是 vanilla JS（没有 JQuery）：

```
const container = iframe.parentElement;

container.removeChild(iframe);

iframe.setAttribute('src', 'about:blank');

container.appendChild(iframe); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-04T19:57:53.843

**最简单快速的加载解决方案**
用于`window.location.replace`在加载页面或框架时不更新历史记录。

对于链接，它看起来像这样：

```
<a href="#" onclick="YourTarget.location.replace ('http://www.YourPage.com');">
The targeted Link</a> 
```

或者

```
<a href="javascript:YourTarget.location.replace ('http://www.YourPage.com');">
The targeted Link</a> 
```

**但是**，如果您希望它不从链接执行操作，而是在加载框架时自动执行操作，那么您应该从 iframe 将其放入 iframe 文件正文部分：

```
onload="window.location.replace ('http://www.YourPage.com');" 
```

如果由于某种原因 onload 未在 iframe 中加载，则将目标框架名称而不是 window 放在如下语法中：

```
onload="YourTarget.location.replace ('http://www.YourPage.com');" 
```

**注意：**对于此脚本，所有、 、`onclick`和`onmouseover`都可以使用。`onmouseout``onload``href="javascript:"`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-29T16:10:03.303

@JDandChips 上面有一个很好的答案，但是语法应该从**parent()**更新为**parentElement**：

```
var container = iframe.parentElement;

iframe.remove();
iframe.attr('src', 'about:blank');

container.append(iframe); 
```

# cocoa - 如何将 NSFormatter 子类与 NSPopUpButton 一起使用

> ID：821363
> 
> 赞同：0
> 
> 时间：2009-05-04T18:46:29.693
> 
> 标签：cocoa, interface-builder, nsformatter

我想使用 NSFormatter 子类来格式化我用来显示选项列表的 NSPopUpButton 的内容。

基本上我有一个 MyObjects 的 NSArray，它通过 Content Values 绑定绑定到 NSPopUpButton，我想在弹出菜单中显示除 -description 返回的内容之外的内容。我真的不想使用转换器，因为我必须创建一个全新的数组并将每个对象转换为字符串，然后再将其添加到新数组中。

使用 setFormatter: 在 NSPopUpButton 本身上通过 IB 或代码不起作用，我怀疑是因为只有单个单元格的格式化程序应用于列表中的项目。

有没有一种简单的方法可以为 NSPopUpButton 的所有单元格设置格式化程序？基本上我希望能够设置一次并忘记它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T22:09:33.823

通常，您会将弹出按钮绑定到包含自定义模型对象的数组控制器（通过内容绑定），并使用内容值绑定在这些对象上指定一个键路径，并使用您要用作标题的字符串。

据我了解，您有一个要用作数据源的纯字符串数组，只是您想为标题显示不同的字符串，对吗？

我不确定如果像上面这样设置，为什么制作数据转换器不起作用 - 或者我可能误解了什么？您将有一个绑定到实际字符串，另一个绑定到使用转换器的字符串，但它们都将使用相同的数组控制器。您的其他选择是创建一个模型类来包装字符串并提供一个标题属性，或者在 NSString 上创建一个类别，该类别返回您的标题以用作显示值绑定。在所有这些情况下，您都可以在代码中创建自己的 NSFormatter 并使用它来返回正确的字符串标题。

# vba - 使用 VBA 在 Excel 中选择非空白单元格

> ID：821364
> 
> 赞同：12
> 
> 时间：2009-05-04T18:47:16.210
> 
> 标签：vba, excel, spreadsheet

我刚刚开始深入研究 VBA，但遇到了一些障碍。

我有一张包含 50 多列、900 多行数据的工作表。我需要重新格式化其中大约 10 个列并将它们粘贴到新的工作簿中。

如何以编程方式选择 book1 列中的每个非空白单元格，通过一些函数运行它，然后将结果放入 book2？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-09-26T11:14:07.800

我知道我已经很晚了，但这里有一些有用的示例：

```
'select the used cells in column 3 of worksheet wks
wks.columns(3).SpecialCells(xlCellTypeConstants).Select 
```

或者

```
'change all formulas in col 3 to values
with sheet1.columns(3).SpecialCells(xlCellTypeFormulas)
    .value = .value
end with 
```

要查找列中最后使用的行，永远不要依赖 LastCell，这是不可靠的（删除数据后不会重置）。相反，我使用类似的东西

```
 lngLast = cells(rows.count,3).end(xlUp).row 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T19:43:11.133

以下 VBA 代码应该可以帮助您入门。它将原始工作簿中的所有数据复制到一个新工作簿，但它会为每个值添加 1，并且所有空白单元格都将被忽略。

```
Option Explicit

Public Sub exportDataToNewBook()
    Dim rowIndex As Integer
    Dim colIndex As Integer
    Dim dataRange As Range
    Dim thisBook As Workbook
    Dim newBook As Workbook
    Dim newRow As Integer
    Dim temp

    '// set your data range here
    Set dataRange = Sheet1.Range("A1:B100")

    '// create a new workbook
    Set newBook = Excel.Workbooks.Add

    '// loop through the data in book1, one column at a time
    For colIndex = 1 To dataRange.Columns.Count
        newRow = 0
        For rowIndex = 1 To dataRange.Rows.Count
            With dataRange.Cells(rowIndex, colIndex)

            '// ignore empty cells
            If .value <> "" Then
                newRow = newRow + 1
                temp = doSomethingWith(.value)
                newBook.ActiveSheet.Cells(newRow, colIndex).value = temp
                End If

            End With
        Next rowIndex
    Next colIndex
End Sub 
```

```
Private Function doSomethingWith(aValue)

    '// This is where you would compute a different value
    '// for use in the new workbook
    '// In this example, I simply add one to it.
    aValue = aValue + 1

    doSomethingWith = aValue
End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T19:18:53.373

如果您正在查找列的最后一行，请使用：

```
Sub SelectFirstColumn()
   SelectEntireColumn (1)
End Sub

Sub SelectSecondColumn()
    SelectEntireColumn (2)
End Sub

Sub SelectEntireColumn(columnNumber)
    Dim LastRow
    Sheets("sheet1").Select
    LastRow = ActiveSheet.Columns(columnNumber).SpecialCells(xlLastCell).Row

    ActiveSheet.Range(Cells(1, columnNumber), Cells(LastRow, columnNumber)).Select
End Sub 
```

您需要熟悉的其他命令是复制和粘贴命令：

```
Sub CopyOneToTwo()
    SelectEntireColumn (1)
    Selection.Copy

    Sheets("sheet1").Select
    ActiveSheet.Range("B1").PasteSpecial Paste:=xlPasteValues
End Sub 
```

最后，您可以使用以下语法引用其他工作簿中的工作表：

```
Dim book2
Set book2 = Workbooks.Open("C:\book2.xls")
book2.Worksheets("sheet1") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-12T02:19:23.703

这可能完全不符合实际，但您不能将整列复制到新的电子表格中然后对列进行排序吗？我假设您不需要维护订单的完整性。

# c# - 如何将字符串转换为其等效的 LINQ 表达式树？

> ID：821365
> 
> 赞同：189
> 
> 时间：2009-05-04T18:48:00.093
> 
> 标签：c#, lambda, antlr, dsl, predicate

这是原始问题的简化版本。

我有一个名为 Person 的类：

```
public class Person {
  public string Name { get; set; }
  public int Age { get; set; }
  public int Weight { get; set; }
  public DateTime FavouriteDay { get; set; }
} 
```

...让我们说一个例子：

```
var bob = new Person {
  Name = "Bob",
  Age = 30,
  Weight = 213,
  FavouriteDay = '1/1/2000'
} 
```

我想在我最喜欢的文本编辑器中将以下内容写成*字符串......*

```
(Person.Age > 3 AND Person.Weight > 50) OR Person.Age < 3 
```

我想获取这个字符串和我的对象实例并评估 TRUE 或 FALSE - 即在对象实例上评估 Func<Person, bool>。

以下是我目前的想法：

1.  在 ANTLR 中实现基本语法以支持基本的比较和逻辑运算符。我正在考虑在此处复制 Visual Basic 优先级和一些功能集：http: [//msdn.microsoft.com/en-us/library/fw84t893 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/fw84t893(VS.80).aspx)
2.  让 ANTLR 从提供的字符串创建合适的 AST。
3.  走 AST 并使用[Predicate Builder](http://www.albahari.com/nutshell/predicatebuilder.aspx)框架动态创建 Func<Person, bool>
4.  根据需要根据 Person 的实例评估谓词

**我的问题是我完全烤过头了吗？有什么选择吗？**

* * *

## 编辑：选择的解决方案

我决定使用动态 Linq 库，特别是 LINQSamples 中提供的动态查询类。

下面的代码：

```
using System;
using System.Linq.Expressions;
using System.Linq.Dynamic;

namespace ExpressionParser
{
  class Program
  {
    public class Person
    {
      public string Name { get; set; }
      public int Age { get; set; }
      public int Weight { get; set; }
      public DateTime FavouriteDay { get; set; }
    }

    static void Main()
    {
      const string exp = @"(Person.Age > 3 AND Person.Weight > 50) OR Person.Age < 3";
      var p = Expression.Parameter(typeof(Person), "Person");
      var e = System.Linq.Dynamic.DynamicExpression.ParseLambda(new[] { p }, null, exp);
      var bob = new Person
      {
        Name = "Bob",
        Age = 30,
        Weight = 213,
        FavouriteDay = new DateTime(2000,1,1)
      };

      var result = e.Compile().DynamicInvoke(bob);
      Console.WriteLine(result);
      Console.ReadKey();
    }
  }
} 
```

结果是 System.Boolean 类型，在本例中为 TRUE。

非常感谢 Marc Gravell。

包括[System.Linq.Dynamic](https://www.nuget.org/packages/System.Linq.Dynamic/) nuget 包，[此处的文档](https://github.com/kahanu/System.Linq.Dynamic/wiki/Dynamic-Expressions)

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2009-05-04T19:34:37.127

[动态 linq 库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)在这里有帮助吗？特别是，我认为是一个`Where`从句。如有必要，将其放入列表/数组中以调用`.Where(string)`它！IE

```
var people = new List<Person> { person };
int match = people.Where(filter).Any(); 
```

如果没有，写一个解析器（`Expression`在引擎盖下使用）并不是很费力 - 我在圣诞节前的火车通勤中写了一个类似的（虽然我不认为我有源代码）......

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2010-02-08T11:04:25.800

另一个这样的图书馆是[Flee](http://flee.codeplex.com/)

我对[Dynamic Linq Library](http://msdn2.microsoft.com/en-us/vcsharp/bb894665.aspx)和[Flee](http://flee.codeplex.com/)做了一个快速比较，Flee的表达速度快了 10 倍`"(Name == \"Johan\" AND Salary > 500) OR (Name != \"Johan\" AND Salary > 300)"`

这就是您可以使用 Flee 编写代码的方式。

```
static void Main(string[] args)
{
  var context = new ExpressionContext();
  const string exp = @"(Person.Age > 3 AND Person.Weight > 50) OR Person.Age < 3";
  context.Variables.DefineVariable("Person", typeof(Person));
  var e = context.CompileDynamic(exp);

  var bob = new Person
  {
    Name = "Bob",
    Age = 30,
    Weight = 213,
    FavouriteDay = new DateTime(2000, 1, 1)
  };

  context.Variables["Person"] = bob;
  var result = e.Evaluate();
  Console.WriteLine(result);
  Console.ReadKey();
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-01T11:08:14.520

```
void Main()
{
    var testdata = new List<Ownr> {
        //new Ownr{Name = "abc", Qty = 20}, // uncomment this to see it getting filtered out
        new Ownr{Name = "abc", Qty = 2},
        new Ownr{Name = "abcd", Qty = 11},
        new Ownr{Name = "xyz", Qty = 40},
        new Ownr{Name = "ok", Qty = 5},
    };

    Expression<Func<Ownr, bool>> func = Extentions.strToFunc<Ownr>("Qty", "<=", "10");
    func = Extentions.strToFunc<Ownr>("Name", "==", "abc", func);

    var result = testdata.Where(func.ExpressionToFunc()).ToList();

    result.Dump();
}

public class Ownr
{
    public string Name { get; set; }
    public int Qty { get; set; }
}

public static class Extentions
{
    public static Expression<Func<T, bool>> strToFunc<T>(string propName, string opr, string value, Expression<Func<T, bool>> expr = null)
    {
        Expression<Func<T, bool>> func = null;
        try
        {
            var type = typeof(T);
            var prop = type.GetProperty(propName);
            ParameterExpression tpe = Expression.Parameter(typeof(T));
            Expression left = Expression.Property(tpe, prop);
            Expression right = Expression.Convert(ToExprConstant(prop, value), prop.PropertyType);
            Expression<Func<T, bool>> innerExpr = Expression.Lambda<Func<T, bool>>(ApplyFilter(opr, left, right), tpe);
            if (expr != null)
                innerExpr = innerExpr.And(expr);
            func = innerExpr;
        }
        catch (Exception ex)
        {
            ex.Dump();
        }

        return func;
    }
    private static Expression ToExprConstant(PropertyInfo prop, string value)
    {
        object val = null;

        try
        {
            switch (prop.Name)
            {
                case "System.Guid":
                    val = Guid.NewGuid();
                    break;
                default:
                    {
                        val = Convert.ChangeType(value, prop.PropertyType);
                        break;
                    }
            }
        }
        catch (Exception ex)
        {
            ex.Dump();
        }

        return Expression.Constant(val);
    }
    private static BinaryExpression ApplyFilter(string opr, Expression left, Expression right)
    {
        BinaryExpression InnerLambda = null;
        switch (opr)
        {
            case "==":
            case "=":
                InnerLambda = Expression.Equal(left, right);
                break;
            case "<":
                InnerLambda = Expression.LessThan(left, right);
                break;
            case ">":
                InnerLambda = Expression.GreaterThan(left, right);
                break;
            case ">=":
                InnerLambda = Expression.GreaterThanOrEqual(left, right);
                break;
            case "<=":
                InnerLambda = Expression.LessThanOrEqual(left, right);
                break;
            case "!=":
                InnerLambda = Expression.NotEqual(left, right);
                break;
            case "&&":
                InnerLambda = Expression.And(left, right);
                break;
            case "||":
                InnerLambda = Expression.Or(left, right);
                break;
        }
        return InnerLambda;
    }

    public static Expression<Func<T, TResult>> And<T, TResult>(this Expression<Func<T, TResult>> expr1, Expression<Func<T, TResult>> expr2)
    {
        var invokedExpr = Expression.Invoke(expr2, expr1.Parameters.Cast<Expression>());
        return Expression.Lambda<Func<T, TResult>>(Expression.AndAlso(expr1.Body, invokedExpr), expr1.Parameters);
    }

    public static Func<T, TResult> ExpressionToFunc<T, TResult>(this Expression<Func<T, TResult>> expr)
    {
        var res = expr.Compile();
        return res;
    }
} 
```

[LinqPad](https://www.linqpad.net/)有`Dump()`方法

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-04T18:56:18.233

你可以看看[DLR](http://winterdom.com/2007/11/hostingironrubywiththedlr)。它允许您在 .NET 2.0 应用程序中评估和执行脚本。[这是IronRuby](http://ironruby.codeplex.com/)的示例：

```
using System;
using IronRuby;
using IronRuby.Runtime;
using Microsoft.Scripting.Hosting;

class App
{
    static void Main()
    {
        var setup = new ScriptRuntimeSetup();
        setup.LanguageSetups.Add(
            new LanguageSetup(
                typeof(RubyContext).AssemblyQualifiedName,
                "IronRuby",
                new[] { "IronRuby" },
                new[] { ".rb" }
            )
        );
        var runtime = new ScriptRuntime(setup);
        var engine = runtime.GetEngine("IronRuby");
        var ec = Ruby.GetExecutionContext(runtime);
        ec.DefineGlobalVariable("bob", new Person
        {
            Name = "Bob",
            Age = 30,
            Weight = 213,
            FavouriteDay = "1/1/2000"
        });
        var eval = engine.Execute<bool>(
            "return ($bob.Age > 3 && $bob.Weight > 50) || $bob.Age < 3"
        );
        Console.WriteLine(eval);

    }
}

public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public int Weight { get; set; }
    public string FavouriteDay { get; set; }
} 
```

当然，这种技术基于运行时评估，并且无法在编译时验证代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-01T12:08:15.170

这是一个基于 Scala DSL 的解析器组合器的示例，用于解析和评估算术表达式。

```
import scala.util.parsing.combinator._
/** 
* @author Nicolae Caralicea
* @version 1.0, 04/01/2013
*/
class Arithm extends JavaTokenParsers {
  def expr: Parser[List[String]] = term ~ rep(addTerm | minusTerm) ^^
    { case termValue ~ repValue => termValue ::: repValue.flatten }

  def addTerm: Parser[List[String]] = "+" ~ term ^^
    { case "+" ~ termValue => termValue ::: List("+") }

  def minusTerm: Parser[List[String]] = "-" ~ term ^^
    { case "-" ~ termValue => termValue ::: List("-") }

  def term: Parser[List[String]] = factor ~ rep(multiplyFactor | divideFactor) ^^
    {
      case factorValue1 ~ repfactor => factorValue1 ::: repfactor.flatten
    }

  def multiplyFactor: Parser[List[String]] = "*" ~ factor ^^
    { case "*" ~ factorValue => factorValue ::: List("*") }

  def divideFactor: Parser[List[String]] = "/" ~ factor ^^
    { case "/" ~ factorValue => factorValue ::: List("/") }

  def factor: Parser[List[String]] = floatingPointConstant | parantExpr

  def floatingPointConstant: Parser[List[String]] = floatingPointNumber ^^
    {
      case value => List[String](value)
    }

  def parantExpr: Parser[List[String]] = "(" ~ expr ~ ")" ^^
    {
      case "(" ~ exprValue ~ ")" => exprValue
    }

  def evaluateExpr(expression: String): Double = {
    val parseRes = parseAll(expr, expression)
    if (parseRes.successful) evaluatePostfix(parseRes.get)
    else throw new RuntimeException(parseRes.toString())
  }
  private def evaluatePostfix(postfixExpressionList: List[String]): Double = {
    import scala.collection.immutable.Stack

    def multiply(a: Double, b: Double) = a * b
    def divide(a: Double, b: Double) = a / b
    def add(a: Double, b: Double) = a + b
    def subtract(a: Double, b: Double) = a - b

    def executeOpOnStack(stack: Stack[Any], operation: (Double, Double) => Double): (Stack[Any], Double) = {
      val el1 = stack.top
      val updatedStack1 = stack.pop
      val el2 = updatedStack1.top
      val updatedStack2 = updatedStack1.pop
      val value = operation(el2.toString.toDouble, el1.toString.toDouble)
      (updatedStack2.push(operation(el2.toString.toDouble, el1.toString.toDouble)), value)
    }
    val initial: (Stack[Any], Double) = (Stack(), null.asInstanceOf[Double])
    val res = postfixExpressionList.foldLeft(initial)((computed, item) =>
      item match {
        case "*" => executeOpOnStack(computed._1, multiply)
        case "/" => executeOpOnStack(computed._1, divide)
        case "+" => executeOpOnStack(computed._1, add)
        case "-" => executeOpOnStack(computed._1, subtract)
        case other => (computed._1.push(other), computed._2)
      })
    res._2
  }
}

object TestArithmDSL {
  def main(args: Array[String]): Unit = {
    val arithm = new Arithm
    val actual = arithm.evaluateExpr("(12 + 4 * 6) * ((2 + 3 * ( 4 + 2 ) ) * ( 5 + 12 ))")
    val expected: Double = (12 + 4 * 6) * ((2 + 3 * ( 4 + 2 ) ) * ( 5 + 12 ))
    assert(actual == expected)
  }
} 
```

提供的算术表达式的等效表达式树或解析树将是 Parser[List[String]] 类型。

更多详情在以下链接：

[http://nicolaecaralicea.blogspot.ca/2013/04/scala-dsl-for-parsing-and-evaluating-of.html](http://nicolaecaralicea.blogspot.ca/2013/04/scala-dsl-for-parsing-and-evaluating-of.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-03T06:44:50.180

除了动态 Linq 库（它构建强类型表达式并需要强类型变量）之外，我推荐更好的替代方案：linq 解析器，它是[NReco Commons 库](http://www.nrecosite.com/nrecolib_net.aspx)（开源）的一部分。它在运行时对齐所有类型并执行所有调用，其行为类似于动态语言：

```
var lambdaParser = new NReco.LambdaParser();
var varContext = new Dictionary<string,object>();
varContext["one"] = 1M;
varContext["two"] = "2";

Console.WriteLine( lambdaParser.Eval("two>one && 0<one ? (1+8)/3+1*two : 0", varContext) ); // --> 5 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-30T12:50:27.983

虽然这是相对较旧的帖子 - 这是表达式构建器的代码：[AnyService - ExpressionTreeBuilder](https://github.com/saturn72/AnyService/blob/dev/paginate_query/src/AnyService.Core/ExpressionTreeBuilder.cs) 这些是单元测试：[AnyService - ExpressionTreeBuilder 单元测试](https://github.com/saturn72/AnyService/blob/dev/paginate_query/src/AnyService.Core.Tests/ExpressionTreeBuilderTests.cs)

# mysql - 按“其他”分组，其中贡献较小的组包含在“其他”字段中 - MySQL

> ID：821370
> 
> 赞同：1
> 
> 时间：2009-05-04T18:49:49.403
> 
> 标签：mysql, group-by, having

我想 GROUP BY 我表中的一个项目，它具有相关的货币价值。我可以将其计算为百分比，但是列表中的项目通常太多（太多而无用，例如在图表中）。因此，我想将那些对总数的贡献小于 5% 的项目放入“其他”组。有什么想法吗？

谢谢（使用 MySQL > v5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:59:42.497

看起来 UNION 可以提供帮助，例如（当然，取决于您的表格的组织方式）：

```
SELECT itemname, SUM(percent) AS pc FROM items
GROUP BY itemtype
HAVING SUM(percent) >= 0.05
UNION
SELECT 'Other', SUM(*) FROM
  (SELECT SUM(percent) FROM items
   GROUP BY itemtype
   HAVING SUM(percent) < 0.05) 
```

如果您没有百分比字段，而只有（例如）一个值字段（因此 % 需要动态计算为项目值占总计的分数的 100 倍），您可以从另一个嵌套中获取总计SELECT，但在某些时候可能值得像其他受访者暗示的那样切换到程序方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:52:41.237

你征求意见。我可以为您编写 SQL，但我想知道（基于您的整体设计）您可能不会发现在 BL 或 UI 中做更多的工作（例如使用数组）来完成同样的事情并不容易。一方面，SQL 必然比您想的更复杂且效率更低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:59:58.833

创建一个临时表并有两个插入语句，一个是您的主要内容，另一个是另一个组，然后从临时表中选择所有内容。

# javascript - 你如何使用你的 JavaScript 框架来防止点击劫持？

> ID：821375
> 
> 赞同：4
> 
> 时间：2009-05-04T18:51:20.773
> 
> 标签：javascript, security

一段时间以来，我一直在使用自定义功能来防止某些网站上的点击劫持。然而，我惊讶地发现，关于如何使用各种流行的 JavaScript 框架“惯用地”执行此操作的内容并不多。

是否有 jQuery、Dojo、YUI 和/或 ExtJS 的用户使用他们的框架来实现点击劫持保护？我很想看看例子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-10T19:46:26.420

这不是那么简单。顶部框架可能会阻止页面被卸载。我将使用以下代码来解决它：

```
if (window.top !== window.self) {
    window.top.location.replace(window.self.location.href);
    alert('For security reasons, frames are not allowed.');
    setInterval(function(){document.body.innerHTML='';},1);
} 
```

它使用 alert() 让浏览器有时间加载新页面。如果一切都失败了，它不会留下可点击的元素。

查看完整的问题描述：[frame-buster-buster-buster-code-needed](https://stackoverflow.com/questions/958997/frame-buster-buster-buster-code-needed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T18:57:15.830

为什么要使用图书馆？你可以这样做：

```
var all = document.getElementsByTagName('iframe'), l = all.length;
while (l--) all[l].parentNode.removeChild(all[l]); 
```

但如果你真的觉得你需要一个图书馆。在 jquery 中这很容易，只需找到所有 iframe 并将它们删除即可。

```
$(document).ready( function() { $('iframe').remove(); }); 
```

# apache - apache localhost 站点在 Firefox 中打开，但不是 IE 或 Safari？

> ID：821385
> 
> 赞同：0
> 
> 时间：2009-05-04T18:52:48.617
> 
> 标签：apache, internet-explorer, firefox, localhost

我在 Vista 上运行 WAMP，并设置了 Apache 虚拟主机和我的主机文件，以允许我使用如下地址在本地测试站点：

[http://testsitex.localhost:8080](http://testsitex.localhost:8080)

唯一的问题是，它只适用于 Firefox。IE 和 Safari（目前我尝试过的唯一其他浏览器，也是我最关心的两个）显示错误。

我目前不在我的机器前，但错误类似于：

502 DNS 主机查找出现错误网关问题

谁能告诉我发生了什么事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T21:12:07.783

我会尝试将它从 testsitex.localhost 更改为 testsite.loc ，看看你是否有同样的问题。或者，尝试从命令提示符 ping 它，看看您是否遇到同样的问题。

另一件事可能是 Firefox 忽略了 windows 代理，而 IE 和 Safari 可能使用默认的 windows 代理（设置 -> 控制面板 -> 互联网 -> 连接 -> 局域网设置）。如果您的代理没有主机文件，这将解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T21:06:31.883

您是否已将 testsitex.localhost 放入您的 HOSTS 文件中？

# visual-c++ - 修改 C++ DLL 以支持 unicode - 要避免的常见陷阱？

> ID：821387
> 
> 赞同：1
> 
> 时间：2009-05-04T18:53:40.563
> 
> 标签：visual-c++, dll, unicode

我有一个当前仅支持 ASCII 的 Windows DLL，我需要对其进行更新以使用 Unicode 字符串。此 DLL 当前在许多地方使用 char* 字符串，并进行了许多 ASCII Windows API 调用（如 GetWindowTextA、RegQueryValueExA、CreateFileA 等）。

我想切换到使用 VC++ 中定义的 unicode/ascii 宏。所以我会使用 TCHAR 而不是 char 或 CHAR。对于 char*，我会使用 LPTSTR。而且我认为像 sprintf_s 这样的东西会被改为 _stprintf_s。

我以前从未真正处理过 unicode，所以我想知道在执行此操作时是否应该注意任何常见的陷阱。是否应该像用适当的宏替换类型和方法名称一样简单，还是需要注意其他并发症？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T19:00:57.490

首先阅读 Joel Spolsky 的这篇文章：[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/unicode.html)

然后在 Stack Overflow 上浏览这些链接：[关于 Unicode，我需要了解什么？](https://stackoverflow.com/questions/222386/what-do-i-need-to-know-about-unicode)

通常，您正在寻找假定**一个字符 = 一个字节**（内存/缓冲区分配等）的*任何代码。*但是上面的链接会给你一个很好的细节概述。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:02:01.887

最大的危险可能是缓冲区大小。如果您的内存分配是根据 sizeof(TCHAR) 进行的，那么您可能会没事，但是如果有代码中原始程序员假设字符每个为 1 个字节并且他们在 malloc 语句中使用整数，那就很难做到全球搜索。

# xml - 为什么 curl 在 HTTP PUT 中的消息正文之前发送命令行？

> ID：821389
> 
> 赞同：1
> 
> 时间：2009-05-04T18:54:19.847
> 
> 标签：xml, http, curl

我正在发出命令（为便于阅读而换行）：

```
curl -H"X-RequestIsAbsolutePath: F" \
-T /tmp/out \
-H'Content-Type: application/xml' \
"http://localhost:8182/metadata/036-Rotated.JPG" 
```

我正在发送 XML 的消息正文。我从服务器上的 XML 解析器收到关于 prolog 中不允许内容的投诉。我在命令行中添加了一个 --trace-acii 选项并查看：

```
=> 发送标头，270 字节 (0x10e)
0000：PUT /元数据/036-Rotated.JPG HTTP/1.1
0028：用户代理：curl/7.19.4 (i386-apple-darwin9.6.0) libcurl/7.19.4
0068：OpenSSL/0.9.8i zlib/1.2.3
0083：主机：本地主机：8182
0099：接受：*/*
00a6：X-RequestIsAbsolutePath：F
00c2：内容类型：应用程序/xml
00e1：内容长度：235
00f6：期望：100-继续
010c:
== 信息：完成等待 100 次继续
=> 发送数据，235 字节 (0xeb)
0000: curl -v -H"X-RequestIsAbsolutePath: F" "http://localhost:8182/me
0040: tadata/036-Original.JPG".<元数据>.<核心>.<ImageOrientati
0080：在可编辑=“1”类型=“无符号短”>。<值原始=“3”/>。
00c0：</ImageOrientation>。</核心>.</元数据>。
```

为什么 curl 将命令行本身作为消息正文的一部分发送？XML 解析器当然会抱怨。如何让 curl 停止这样做并仅将作为参数传递给 -T 选项的文件内容发送？

仅供参考：我已经捕获了在服务器上发送的原始文本，是的，命令行确实正在发送。FYI#2：我在 Mac OS X 上使用最新的 curl (7.19.4)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T19:25:02.440

> 为什么 curl 将命令行本身作为消息正文的一部分发送？

它没有。您确定您没有以某种方式输入命令`/tmp/out`吗？

curl 甚至无法访问您在 ascii 跟踪中看到的命令行，因为像引号之类的东西在传递给程序之前由 shell 解释。

# c# - 如何模拟或存根 .netTiers 生成的 DataRepository 对象

> ID：821391
> 
> 赞同：1
> 
> 时间：2009-05-04T18:54:44.837
> 
> 标签：c#, unit-testing, mocking, rhino-mocks, .nettiers

我正在使用 Rhino 模拟对对象进行单元测试模拟。我们的 DAL 使用 codesmith 从 .netTiers 模板生成代码，该模板创建这些 DataRepository 类，其中包含 CRUD 类型事务到数据源的所有方法。在单元测试中，我试图模拟这个没有接口类用作存根的数据存储库对象。

**简而言之，有没有人成功地使用 Rhino 模拟来模拟 .netTiers 生成的 DataRepository，避免需要测试数据库和针对最终需要拆除的数据源的真实事务？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-13T02:34:31.140

我一直在思考这个问题，因为还没有人站出来为 netTiers 编写模拟 DataRepository 实现（据我所知）。

因为我不太关心 TypeMock 和 RhinoMocks 的记录重放步骤，所以我选择了更新的 Moq，它可以轻松地模拟 DataRepository 类或服务层调用自己。

假设您使用的是 .NET 3.5，我会推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T08:48:25.883

简而言之，Rhino 只能模拟接口或非密封类的类型。然后，您只能存根虚拟或抽象的方法。

如果您的目标是用模拟实现替换 DataRepository，我认为您将不得不研究更高级的模拟框架，例如[TypeMock](http://www.typemock.com)。

如果您可以控制 CS 模板，另一种选择是使用模板来生成模拟 DataRepository 实现。

# asp.net - 处理 Login.Authenticate 事件

> ID：821395
> 
> 赞同：1
> 
> 时间：2009-05-04T18:55:33.570
> 
> 标签：asp.net, authentication, asp.net-membership, forms-authentication

A）我从中学习的书说，如果我们处理*Login.Authenticate*事件，那么我们必须自己对用户进行身份验证。因此控制不会自动验证用户名和密码。我认为这本书建议只有在我们覆盖*Login.OnAuthenticate()*方法时才会发生这种情况，但似乎即使只为*Authenticate*事件添加事件处理程序，自动身份验证也不会发生。

但这是为什么呢？为什么事件处理不像 *Init*或*Load*事件那样工作，您必须重写*Page.OnInit()*和*Page.OnLoad()*才能控制事件处理？

B）我检查了 MSDN 站点，它基本上建议如果我们覆盖*Login.OnAuthenticate()*，我们也应该调用*base.OnAuthenticate()*。*但是，如果我们通过简单地为Login.Authenticate*声明事件处理程序获得相同的效果，为什么我们需要覆盖*Login.OnAuthenticate()*呢？

 *谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T19:19:20.567

你不应该覆盖[`OnAuthenticate`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.onauthenticate.aspx). 此方法仅在内部用于将[`Authenticate`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.authenticate.aspx)事件引发到已注册的处理程序（如果有）或通过当前的身份验证（`MembershipProvider`如果没有注册的处理程序）。因此，要为控件实现自定义身份验证`Login`，您只需为`Authenticate`事件注册一个处理程序并设置[`AuthenticateEventArgs.Authenticated`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.authenticateeventargs.authenticated.aspx)属性。

事件的事件处理与`Authenticate`其他事件完全相同。唯一的区别是该`OnAuthenticate`方法有一些逻辑来确定是使用一个`MembershipProvider`还是注册的事件处理程序进行身份验证。

如果您确实创建了`Login`和 override的子类`Login.OnAuthenticate`，那么调用它是明智的，`base.OnAuthenticate(...)`因为它包含调用已注册事件处理程序的逻辑。如果不调用`base.Authenticate(...)`，则应自己调用已注册的事件处理程序。`Login`但是在您的情况下可能不需要创建一个子类。

# linux - 如果任何命令返回非零值，则中止 shell 脚本

> ID：821396
> 
> 赞同：529
> 
> 时间：2009-05-04T18:55:50.217
> 
> 标签：linux, bash, unix, shell

我有一个调用许多命令的 Bash shell 脚本。

如果任何命令返回非零值，我希望 shell 脚本自动退出并返回值 1。

如果不明确检查每个命令的结果，这可能吗？

例如，

```
dosomething1
if [[ $? -ne 0 ]]; then
    exit 1
fi

dosomething2
if [[ $? -ne 0 ]]; then
    exit 1
fi 
```

* * *

## 回答 #1

> 赞同：862
> 
> 时间：2009-05-04T19:00:16.553

将此添加到脚本的开头：

```
set -e 
```

如果一个简单的命令以非零退出值退出，这将导致 shell 立即退出。简单命令是任何不属于 if、while 或 until 测试的命令，或者不属于 && 或 || 的任何命令。列表。

有关更多详细信息，请参见“set”内部命令的[bash(1) 手册页。](https://ss64.com/bash/set.html)

我个人几乎所有的 shell 脚本都是用“set -e”开始的。当中间出现问题并打破脚本其余部分的假设时，让脚本顽固地继续下去真的很烦人。

* * *

## 回答 #2

> 赞同：250
> 
> 时间：2010-12-03T14:21:14.773

要添加到已接受的答案：

请记住，`set -e`有时是不够的，特别是如果您有管道。

例如，假设你有这个脚本

```
#!/bin/bash
set -e 
./configure  > configure.log
make 
```

...按预期工作：错误`configure`中止执行。

明天你做一个看似微不足道的改变：

```
#!/bin/bash
set -e 
./configure  | tee configure.log
make 
```

...现在它不起作用。[此处](http://petereisentraut.blogspot.com/2010/11/pipefail.html)对此进行了解释，并提供了一种解决方法（仅限 Bash）：

```
#!/bin/bash
设置-e
设置-o pipefail

./配置 | 三通配置日志
制作

```

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2009-05-04T19:03:39.073

您示例中的 if 语句是不必要的。这样做：

```
dosomething1 || exit 1 
```

如果您接受 Ville Laurikari 的建议并使用`set -e`then 对于某些命令，您可能需要使用它：

```
dosomething || true 
```

即使命令失败，该选项也会使命令管道具有返回值，因此该选项`|| true`不会终止脚本。`true``-e`

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2009-05-07T20:52:31.703

如果您需要在退出时进行清理，您还可以将“陷阱”与伪信号 ERR 一起使用。这与捕获 INT 或任何其他信号的方式相同；如果任何命令以非零值退出，bash 会抛出 ERR：

```
# Create the trap with   
#    trap COMMAND SIGNAME [SIGNAME2 SIGNAME3...]
trap "rm -f /tmp/$MYTMPFILE; exit 1" ERR INT TERM
command1
command2
command3
# Partially turn off the trap.
trap - ERR
# Now a control-C will still cause cleanup, but
# a nonzero exit code won't:
ps aux | grep blahblahblah 
```

或者，特别是如果您使用“set -e”，您可以捕获 EXIT；当脚本因任何原因（包括正常结束、中断、由 -e 选项导致的退出等）退出时，您的陷阱将被执行。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2009-12-16T10:18:54.430

`$?`很少需要该变量。伪成语`command; if [ $? -eq 0 ]; then X; fi`应始终写为`if command; then X; fi`.

需要的情况`$?`是需要针对多个值进行检查：

```
command
case $? in
  (0) X;;
  (1) Y;;
  (2) Z;;
esac 
```

或何时`$?`需要重用或以其他方式操作：

```
if command; then
  echo "command successful" >&2
else
  ret=$?
  echo "command failed with exit code $ret" >&2
  exit $ret
fi 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2009-05-04T19:02:01.043

`-e`使用或`set -e`在顶部运行它。

还看`set -u`。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-09-12T11:40:53.633

出错时，以下脚本将打印 RED 错误消息并退出。
将其放在 bash 脚本的顶部：

```
# BASH error handling:
#   exit on command failure
set -e
#   keep track of the last executed command
trap 'LAST_COMMAND=$CURRENT_COMMAND; CURRENT_COMMAND=$BASH_COMMAND' DEBUG
#   on error: print the failed command
trap 'ERROR_CODE=$?; FAILED_COMMAND=$LAST_COMMAND; tput setaf 1; echo "ERROR: command \"$FAILED_COMMAND\" failed with exit code $ERROR_CODE"; put sgr0;' ERR INT TERM 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-07-24T13:12:30.253

```
#!/bin/bash -e 
```

应该足够了。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-04T19:01:33.743

像这样的表达

```
dosomething1 && dosomething2 && dosomething3 
```

当其中一个命令返回非零值时，将停止处理。例如，以下命令永远不会打印“完成”：

```
cat nosuchfile && echo "done"
echo $?
1 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-09-15T21:33:10.613

我只是提供另一个供参考，因为对 Mark Edgars 的输入还有一个额外的问题，这里有一个额外的示例，涉及整个主题：

```
[[ `cmd` ]] && echo success_else_silence 
```

这`cmd || exit errcode`和有人展示的一样。

例如，如果已安装，我想确保已卸载分区：

```
[[ `mount | grep /dev/sda1` ]] && umount /dev/sda1 
```

# vb.net - 获取修饰键紧凑框架的状态

> ID：821397
> 
> 赞同：1
> 
> 时间：2009-05-04T18:56:15.287
> 
> 标签：vb.net, windows-mobile, compact-framework

如何在 Compact Framework（在本例中为 Windows Mobile 6.1）上使用 VB.NET 获取修饰键的状态。我希望能够确定是否按下或锁定了以下键：

`Shift` `CTRL` `ALT`

对于 Psion Teklogix 机器橙色蓝色虽然我可以解决这个问题，但如果我能确定其他人的话。

我想创建自己的屏幕指示器面板并想轮询键，而不是使用事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-08T10:13:52.870

So there is the AllKeys function. Probably the best way to go today.

[just say no to GAPI – What you need to know about AllKeys and input management.](http://blogs.msdn.com/windowsmobile/archive/2009/05/06/just-say-no-to-gapi-what-you-need-to-know-about-allkeys-and-input-management.aspx)

And this link should give you the P/Invoke to use in managed code.

[Capture all Windows Mobile device keys using the AllKeys API](http://blogs.msdn.com/mikefrancis/archive/2009/03/28/porting-gapi-keys-to-wm-6-1-and-6-5.aspx)

# css - 使用 CSS 使图像放大和缩小

> ID：821399
> 
> 赞同：5
> 
> 时间：2009-05-04T18:56:41.977
> 
> 标签：css

我的网站标题中有一张图片。我想使用一个 CSS 属性使它横跨浏览器的宽度，以便它对用户调整浏览器窗口大小做出反应，并相应地缩放图像的垂直轴。这实际上是可以做到的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-04T19:05:58.600

百分比将保持图像的整个宽度，并会在浏览器调整大小时更新图像。

如果您希望图像**始终**被拉伸，您可以使用：

```
img {
    width:100%;
} 
```

但是，这很容易使图像看起来像一团糟。更安全的方法可能是：

```
img {
    max-width:100%;
} 
```

无论哪种方式都会随着浏览器调整大小而改变图像大小。但是，第二个不会将图像拉伸超过其自然尺寸，因此它看起来不会变形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T19:00:23.480

您可以将宽度和高度属性设置为百分比（例如，100% 的宽度会导致图像在您的页面上拉伸）。这可以使用 CSS 来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T19:01:50.687

CSS 当然可以拉伸图像（或者，至少，我在 Firefox 中使用它来拉伸图像，网址如下：[http://www.davidrhysthomas.co.uk/mindez/borked.html](http://www.davidrhysthomas.co.uk/mindez/borked.html)）：

```
img {height: 100%;
    width: 100%;
    min-height: 600px;
    min-width: 800px;
    } 
```

例如。

但是......我认为它对调整视口大小的反应，JS 可能是你更好的朋友。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T17:28:20.753

在这里，试一试，只需将此 CSS 样式应用于包含图像的元素。在此示例中，图像位于页面主体的背景上：

```
body
{
margin: 0;
padding: 0;
width: 100%;
background: url(images/YOUR-IMAGE.JPG) no-repeat left top;
background-size: 100%;
} 
```

这将在整个元素中最大化您的图像。调整窗口大小将缩放图像以适应浏览器的新窗口大小

# visual-studio - 调试时停止 IE8 消息“网页停止响应”

> ID：821402
> 
> 赞同：2
> 
> 时间：2009-05-04T18:57:34.517
> 
> 标签：visual-studio, debugging, internet-explorer-8

IE8 有一个功能，当网页停止响应时会弹出一个对话框通知我，这在调试时有点烦人，因为它会从 Visual Studio 中窃取焦点。有没有办法禁用该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T22:17:23.990

[这只是在此处](http://blogs.msdn.com/ie/archive/2009/05/04/ie8-in-windows-7-rc-reliability-and-telemetry.aspx)的 IEBlog 上进行了介绍。

来自博客：

> 在我们继续跟踪遥测数据的同时，如果您正在使用 IE 开发人员工具或调试器调试 IE，并且您尝试与 IE 窗口进行交互，您可能会看到此对话框。虽然这不会影响您的调试，但关闭此对话框可能更方便。或者，如果您正在运行 Win7 RC 并且看到此提示的次数超出您的预期，您可以通过更改以下注册表项将其关闭：

```
HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main!HangResistance, DWORD, 0 
```

# vb.net - VB.NET/VSTO2008 失败；找不到运行时

> ID：821405
> 
> 赞同：1
> 
> 时间：2009-05-04T18:57:40.883
> 
> 标签：vb.net, deployment, vsto

我正在尝试部署一个 VB.NET 应用程序，它是使用 VSTO 对 Excel 的扩展。它在开发环境中运行良好，但是当其他人（没有安装开发环境，只有 .NET 框架）安装它时，他们会得到：

> 无法加载公共语言运行库`<application>`。请联系您的管理员以获得进一步的帮助。

谷歌为此弹出微软帮助页面：

[http://msdn.microsoft.com/en-us/library/6s0wczt9.aspx](http://msdn.microsoft.com/en-us/library/6s0wczt9.aspx)

但是我已经验证了两台机器上的 .NET 版本是相同的。对于 2k5 中的 VSTO 应用程序，用户需要安装一个特定的 vsto 运行时库——我还没有找到与 VS2008 类似的东西吗？除此之外还有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-14T21:30:40.903

对于使用 Visual Studio 2008 构建的 VSTO 应用，需要 VSTO 3.0 版运行时。

这是下载页面：[http ://www.microsoft.com/downloads/details.aspx?FamilyID=54eb3a5a-0e52-40f9-a2d1-eecd7a092dcb&DisplayLang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=54eb3a5a-0e52-40f9-a2d1-eecd7a092dcb&DisplayLang=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:57:06.370

确保他们拥有正确版本的 .NET 框架。如果他们安装了 .NET 1.1（甚至 2.0），并且您的目标是 3.5 框架，您可能会收到此错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T16:00:30.660

我们遇到了同样的问题。这完全与安全策略有关。

运行 VSTO 项目时，您的 DLL 的安全策略存在问题。

也就是说，您需要对您的程序集授予“完全信任”。这意味着您必须**A)**使用密钥签署您的项目，并且**B)**将您的程序集注册为在部署期间具有完全信任（这可以使用 CASPOL.exe 轻松完成：http: [//msdn.microsoft.com/en-我们/图书馆/cb6t8dtz.aspx](http://msdn.microsoft.com/en-us/library/cb6t8dtz.aspx)）

它很容易做到。或者，您可以滚动您自己的安全设置程序集，将其集成到您的 msi 中（这就是我们所做的）

查看此 MSDN 文章以获取完整详细信息：http: [//msdn.microsoft.com/en-us/library/zdc263t0.aspx](http://msdn.microsoft.com/en-us/library/zdc263t0.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-09T05:36:42.073

安装 VSTO 运行时 3.0 然后将其更新到 VSTO 3.0 SP1 如果您在项目中引用这些，还安装 VSTO_PTExtLibs.exe（运行时的 PIA 扩展库）。

# vb.net - VB.Net 中的 SMTP 标头没有赎回

> ID：821406
> 
> 赞同：0
> 
> 时间：2009-05-04T18:58:14.580
> 
> 标签：vb.net, email, outlook, smtp

我正在为 VB.Net 应用程序编写邮件组件，并且需要以不同的方式处理“代表某人发送”的邮件。尽管 Outlook 对象模型公开了“SentOnBehalfOfName”，但它不会公开该方的电子邮件地址。假设它位于 SMTP 标头的“OtherHeaders”字段中，但我看不到通过 Mailitem 对象获取这些信息的简单方法。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T10:35:59.340

您可以在 AD 或 GAL 中查找名称？或者您可以通过您使用 2007 的 MailItem.PropertyAccessor id 查找 PR_SENT_REPRESENTING_EMAIL_ADDRESS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-05T12:01:46.270

我们现在的 hacky 解决方法是构建一个虚拟回复。回复字段是根据 sentonbehalfof 名称填充的，因此我们可以抓住它并销毁虚拟对象。当然不优雅，但它有效

# c# - 数据库删除后 Sql Server 2008 关闭连接

> ID：821407
> 
> 赞同：3
> 
> 时间：2009-05-04T18:58:16.810
> 
> 标签：c#, .net, sql, sql-server, sql-server-2008

在删除并重新创建给定数据库后，SQL Server 删除连接时遇到问题，下次我尝试针对同一数据库上的新连接执行命令时，我得到：

> 向服务器发送请求时发生传输级错误。（提供者：共享内存提供者，错误：0 - 管道的另一端没有进程。）

这是 TCP 版本（如果我尝试连接到另一台服务器）

> 向服务器发送请求时发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）

以下是重现问题的步骤：

1.  打开与数据库的连接并执行 sql 命令
2.  删除数据库
3.  重新创建数据库
4.  打开与同一数据库的新连接并尝试对其运行命令

结果：我收到异常

这是代码：

```
using (var conn = new System.Data.SqlClient.SqlConnection("Data Source=.;Initial Catalog=DBNAME;Integrated Security=True"))
{
    conn.Open();
    var cmd = conn.CreateCommand();
    cmd.CommandText = "UPDATE ...";
    cmd.ExecuteNonQuery();
}

string sql = "Alter Database DBNAME set single_user with rollback immediate drop database DBNAME";
var server = new Microsoft.SqlServer.Management.Smo.Server(".");
server.ConnectionContext.ExecuteNonQuery(sql);
server.ConnectionContext.Disconnect();

sql = File.ReadAllText("PathToDotSqlFile..."));
server = new Microsoft.SqlServer.Management.Smo.Server(".");
server.ConnectionContext.ExecuteNonQuery(sql);
server.ConnectionContext.Disconnect();

using (var conn = new System.Data.SqlClient.SqlConnection("Data Source=.;Initial Catalog=WER_CONFIG;Integrated Security=True"))
{
    conn.Open();
    var cmd = conn.CreateCommand();
    cmd.CommandText = "UPDATE ...";
    cmd.ExecuteNonQuery();
} 
```

错误发生在最后的“cmd.ExecuteNonQuery()”行。看来，即使我每次连接时都创建一个新连接，sql server 仍在跟踪某些东西（或者可能是 ADO.net 代码），在我下次请求连接时，它会为我提供一个已经使用过的连接或已在服务器端关闭。在您尝试对它执行另一个命令之前，它不会意识到它已被服务器关闭（可能是因为它连接到的数据库被删除）。

请注意，如果我不执行执行初始查询的第一步，而只是删除数据库，重新创建它并执行命令，则不会收到此错误。我认为在删除数据库之前建立初始连接是此错误的重要部分。

我也尝试过使用外部进程来删除和重新创建数据库，如下所示：

```
ProcessStartInfo info = new ProcessStartInfo("sqlcmd.exe", " -e -E -S . -Q \"Alter Database DBNAME set single_user with rollback immediate drop database DBNAME\"");
var p = Process.Start(info);
p.WaitForExit();

info = new ProcessStartInfo("sqlcmd.exe", " -i " + PathToDotSqlFile);
p = Process.Start(info);
p.WaitForExit(); 
```

这并没有帮助。

有没有办法创建一个新的 SqlConnection 并确保它是干净的而不是来自池？关于如何解决这个问题的任何其他建议？

**更新：使用 SqlConnection.ClearPool() 确实解决了问题，但我选择只使用 pooling=false 编辑我的连接字符串，这也有效。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T19:32:31.780

ADO.NET 自动管理一个连接池。当您“关闭”应用程序中的连接时，它会返回到池中并保持活动状态，以防您请求具有相同连接字符串的连接。这可能是您的“新”连接过时的原因。

`pooling=false`您可以尝试通过将作为参数添加到连接字符串来关闭此行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T19:32:10.987

不了解SQL2008，但这听起来像是应用程序端的连接池问题。在过去，我们在连接字符串中添加了“OLEDB Services=-1”以关闭连接池。现在可能有一种更优雅的方式来做到这一点。

编辑：ADO.Net 2.0 似乎向 SQLConnection 对象添加了 ClearPool 函数。（[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearpool(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearpool(VS.80).aspx)）我很想知道这是否有效。

# c# - 检查函数参数的最短方法可能是什么，在 C# 中可能有值 0 、 1 、 2 、 3

> ID：821415
> 
> 赞同：2
> 
> 时间：2009-05-04T18:59:42.313
> 
> 标签：c#

我在 C# 中有一个函数，它看起来像：

```
public static void OnlyValidInput ( int parameterName ) 
{
    if ( parameterName == 0 || parameterName ==1 ||
         parameterName == 2 ...)
{
     ... do Ok stuff
}
else 
{ throw new CustomException ( "invalid param should be 0 , 1 , 2" );
}
} 
```

怎么让它变短...

谢谢大家，答案显示了我的想法，但无法描述它......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-04T19:00:50.470

```
if (parameterName >= 0 && parameterName <= 3) 
```

如果您希望它是连续的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T19:04:31.583

也许是 OT，但在您的代码示例中，我宁愿抛出[ArgumentOutOfRangeException](http://msdn.microsoft.com/en-us/library/system.argumentoutofrangeexception.aspx)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-04T19:02:53.570

我会将您的担忧分为两种方法。一个用于验证输入，另一个用于实际操作。看起来您对 parameterName 值有一个高值和低值。如果是这样，将其更改为小于、大于检查与显式检查每个值

```
public static bool IsValid(int parameterName) {
  return (parameterName >= 0) && (parameterName <= 2);
}

public static void OnlyValidInput(int parameterName) {
  if ( !IsValid(parameterName) ) {
    throw new CustomExceptoin("...");
  }
  .. Do stuff
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T19:02:49.450

只是为了傻...

```
if((parameterName & 0xFFFFFFFC) == 0) // Check if value is 0, 1, 2, 3 
```

基本上它只是检查低两位是否只有一个（这仅适用于 0、1、2、3）

我永远不会那样做。`&&`方法更清晰...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T19:06:09.083

要获得编译时检查，请为每个有效参数创建一个包含值的枚举，并将其作为参数而不是 int 传递。

当然，如果你有一个非常大的范围，这不会那么好，但如果它真的只是 0 到 2，那听起来更像是那些数字意味着应该..枚举..无论如何。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T19:17:48.977

```
public static void OnlyValidInput ( int parameterName ) 
{
     if( new int[]{0,1,2}.Contains(parameterName))
     {
        //... do Ok stuff
     }
     else throw new CustomException ( "invalid param should be 0 , 1 , 2" );
} 
```

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2009-05-04T19:19:12.920

```
public enum Parameter
{
    Zero = 0,
    One = 1,
    Two = 2,
    Three = 3
}

public void SomeMethod(Parameter p)
{
    Int32 pAsInteger = (Int32)p; // Here I am casting the parameter to an Integer
}

SomeMethod((Parameter)2); // Here I am casting an integer to enum of type Parameter 
```

该方法仅接受 Parameter 类型的枚举器。

您当然不应该将您的枚举器和它的值重命名为具有描述性且易于理解的东西。

# python - Python 中列表的 SQL TOP 1 模拟

> ID：821416
> 
> 赞同：1
> 
> 时间：2009-05-04T18:59:51.347
> 
> 标签：python, tsql

这是我的输入 csv 文件的示例：

```
...
0.7,0.5,0.35,14.4,0.521838919218

0.7,0.5,0.35,14.4,0.521893472678

0.7,0.5,0.35,14.4,0.521948026139

0.7,0.5,0.35,14.4,0.522002579599
... 
```

我需要选择最后一个浮点数>随机数的第一行。我当前的实现非常慢（脚本有很多迭代和外部循环）：

```
for line in foo:
   if float(line[-1]) > random.random():
      res = line
      break
... 
```

我怎样才能更好更快地做到这一点？

### 编辑：

有人建议我使用 bisect 来完成这项任务，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:07:34.073

最快的方法是使用 bisect （假设浮动列表是有序的）。你可以这样做：

```
import bisect

float_list = [line[-1] for line in foo]
index = bisect.bisect(float_list, random.random())
if index < len(float_list)
    result = foo[index]
else:
    result = None # None exists 
```

必须订购浮动列表才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:19:46.837

[如果将 CSV 文件导入 SQLite](http://www.sqlite.org/cvstrac/wiki?p=ImportingFiles)，您实际上可能能够使用适当的 SQL 命令。Python 有一个[内置的 sqlite 库](http://docs.python.org/library/sqlite3.html)，您可以使用它来查询数据库。

# javascript - 这种类型的flash拖放和动画可以在javascript库中完成吗？

> ID：821420
> 
> 赞同：2
> 
> 时间：2009-05-04T19:00:22.890
> 
> 标签：javascript, animation

对不起。我不知道这个的好标题，但请看这里：

[http://joshblog.net/projects/logic-gate-simulator/Logicly.html](http://joshblog.net/projects/logic-gate-simulator/Logicly.html)

我从周末的美味中看到了这个。它在 Flash 中，我想知道这样的事情，就图形和交互而言，是否可以在 javascript 中完成（jquery 或其他库，*而不是*我自己的。）

同样，我并不是专门指逻辑门，而是指对象之间的拖放和画线，移动它们等。

有谁知道在javascript中有类似内容的网站？它有点让我想起谷歌地图上的拖放点，但更好。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T19:05:24.063

看起来有人最近制作了一个你可能感兴趣的[逻辑门](http://knolleary.net/code/logic/)，虽然它没有 Flash 版本的动画水平。（[这里](http://knolleary.net/2009/03/24/logic-gate-thing/)是作者的解释。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T19:17:44.627

[http://javascript.neyric.com/wireit/](http://javascript.neyric.com/wireit/)和 jQuery 可拖动是你想要的。

太糟糕了，wire-it 库是 YUI。如果是 jQuery 就好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:05:49.037

jQuery UI 有一些效果，例如拖动和动画。[http://jqueryui.com/demos/](http://jqueryui.com/demos/)有一些演示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T19:05:15.920

我相信你可以用 jQuery 做类似的事情。查看 jQuery UI，他们有其功能的[演示](http://jqueryui.com/demos/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T19:10:39.430

[Mootools](http://mootools.net/)也可以做到这一点——他们的网站上有一些非常漂亮的演示。

# asp.net - 登录控件模板和控件 ID = 登录

> ID：821422
> 
> 赞同：1
> 
> 时间：2009-05-04T19:00:27.007
> 
> 标签：asp.net, authentication, asp.net-membership, forms-authentication

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:10:29.540

是的，看起来它可以是导致事件冒泡的任何控件。请参阅以下页面：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.layouttemplate(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.layouttemplate(VS.80).aspx)

# perl - 如何计算 Perl 中两个日期之间的天数？

> ID：821423
> 
> 赞同：21
> 
> 时间：2009-05-04T19:00:27.570
> 
> 标签：perl, datetime, date, time, days

我想计算（仅使用默认的 Perl 安装）两个日期之间的天数。两个日期的格式都是 04-MAY-09。(DD-MMM-YY)

我找不到任何讨论该日期格式的教程。我应该为此格式构建自定义日期检查器吗？进一步阅读 CPAN 上的[Date::Calc](http://search.cpan.org/dist/Date-Calc)似乎不太可能支持这种格式。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-04T20:57:23.683

如果您关心准确性，请记住并非所有日子都有 86400 秒。在某些情况下，基于该假设的任何解决方案都不正确。

[这是我保留的一个片段，用于使用DateTime](http://search.cpan.org/dist/DateTime/)库以几种不同的方式计算和显示日期/时间差异。我认为最后打印的答案是您想要的答案。

```
#!/usr/bin/perl -w

use strict;

use DateTime;
use DateTime::Format::Duration;

# XXX: Create your two dates here
my $d1 = DateTime->new(...);
my $d2 = DateTime->new(...);

my $dur = ($d1 > $d2 ? ($d1->subtract_datetime_absolute($d2)) : 
                       ($d2->subtract_datetime_absolute($d1)));

my $f = DateTime::Format::Duration->new(pattern => 
  '%Y years, %m months, %e days, %H hours, %M minutes, %S seconds');

print $f->format_duration($dur), "\n";

$dur = $d1->delta_md($d2);

my $dy = int($dur->delta_months / 12);
my $dm = $dur->delta_months % 12;
print "$dy years $dm months ", $dur->delta_days, " days\n";
print $dur->delta_months, " months ", $dur->delta_days, " days\n";
print $d1->delta_days($d2)->delta_days, " days\n"; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2011-08-18T17:40:59.680

似乎有些混乱，因为根据您要完成的任务，“两个日期之间的天数”可能意味着至少两个不同的东西：

1.  两个日期之间的***日历距离***。
2.  两个日期之间的绝对***距离。***

作为示例并注意区别，假设您有两个 DateTime 对象，如下所示：

```
use DateTime;

sub iso8601_date {
  die unless $_[0] =~ m/^(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)Z$/;
  return DateTime->new(year => $1, month => $2, day => $3,
    hour => $4, minute => $5, second => $6, time_zone  => 'UTC');
}

my $dt1 = iso8601_date('2014-11-04T23:35:42Z');
my $dt2 = iso8601_date('2014-11-07T01:15:18Z'); 
```

请注意，`$dt1`星期二很晚，而下一个`$dt2`星期五*很早*。

如果您想要***日历距离***，请使用：

```
my $days = $dt2->delta_days($dt1)->delta_days();
print "$days\n" # -> 3 
```

事实上，周二和周五之间有 3 天。日历距离 1 表示“明天”，距离 -1 表示“昨天”。DateTime 对象的“时间”部分几乎是不相关的（除非这两个日期位于不同的时区，那么您必须决定这两个日期之间的“日历距离”应该是什么意思）。

如果您想要***绝对距离***，请改用：

```
my $days = $dt2->subtract_datetime_absolute($dt1)->delta_seconds / (24*60*60);
print "$days\n"; # -> 2.06916666666667 
```

事实上，如果你想将两个日期之间的时间分成 24 小时的时间段，那么它们之间只有大约 2.07 天。根据您的应用程序，您可能希望截断或舍入此数字。DateTime 对象的“时间”部分*非常*相关，即使对于不同时区的日期，预期结果也得到了很好的定义。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-04T19:54:50.900

Date::Calc 有 Decode_Date_EU （和美国等）

```
#!/usr/bin/perl
use Date::Calc qw(Delta_Days Decode_Date_EU);

($year1,$month1,$day1) = Decode_Date_EU('02-MAY-09');
($year2,$month2,$day2) = Decode_Date_EU('04-MAY-09');

print "Diff = " . Delta_Days($year1,$month1,$day1, $year2,$month2,$day2); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-04T19:25:11.567

Time::ParseDate 将很好地处理该格式：

```
use Time::ParseDate qw(parsedate);

$d1="04-MAR-09";
$d2="06-MAR-09";

printf "%d days difference\n", (parsedate($d2) - parsedate($d1)) / (60 * 60 * 24); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-04T10:23:03.997

这个问题已经有一个很好的[答案](https://stackoverflow.com/a/822039/664132)，但我想提供一个答案，**说明为什么计算以秒为单位的差异是错误的**（当我们使用格式化/本地日期而不是浮动日期时）。

我发现有多少建议告诉人们要减去秒数，这让我很痛苦。（这个问题是我搜索的第一个 Google 热门问题，所以我不在乎它的年龄。）

我自己也犯了这个错误，想知道为什么应用程序会突然（在周末）显示不正确的时间。所以我希望这段代码能帮助人们（他们可能面临这样的问题）理解为什么这种方法是错误的，并帮助他们避免这个错误。

这是一个**完整的示例**，在某个关键点不包含“...”（因为如果您在同一时区插入两个日期，您可能不会看到错误）。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Data::Dumper;
use DateTime;

# Friday, Oct 31
my $dt1 = DateTime->new(
    time_zone => "America/Chicago",
    year => 2014,
    month => 10,
    day => 31,
);
my $date1 = $dt1->strftime("%Y-%m-%d (%Z %z)");

# Monday, Nov 01
my $dt2 = $dt1->clone->set(month => 11, day => 3);
my $date2 = $dt2->strftime("%Y-%m-%d (%Z %z)");

# Friday, Mar 06
my $dt3 = DateTime->new(
    time_zone => "America/Chicago",
    year => 2015,
    month => 3,
    day => 6,
);
my $date3 = $dt3->strftime("%Y-%m-%d (%Z %z)");

# Monday, Mar 09
my $dt4 = $dt3->clone->set(day => 9);
my $date4 = $dt4->strftime("%Y-%m-%d (%Z %z)");

# CDT -> CST
print "dt1:\t$dt1 ($date1):\t".$dt1->epoch."\n";
print "dt2:\t$dt2 ($date2):\t".$dt2->epoch."\n";
my $diff1_duration = $dt2->subtract_datetime_absolute($dt1);
my $diff1_seconds = $diff1_duration->seconds;
my $diff1_seconds_days = $diff1_seconds / 86400;
print "diff:\t$diff1_seconds seconds = $diff1_seconds_days days (WRONG)\n";
my $diff1_seconds_days_int = int($diff1_seconds_days);
print "int:\t$diff1_seconds_days_int days (RIGHT in this case)\n";
print "days\t".$dt2->delta_days($dt1)->days." days (RIGHT)\n";
print "\n";

# CST -> CDT
print "dt3:\t$dt3 ($date3):\t".$dt3->epoch."\n";
print "dt4:\t$dt4 ($date4):\t".$dt4->epoch."\n";
my $diff3_duration = $dt4->subtract_datetime_absolute($dt3);
my $diff3_seconds = $diff3_duration->seconds;
my $diff3_seconds_days = $diff3_seconds / 86400;
print "diff:\t$diff3_seconds seconds = $diff3_seconds_days days (WRONG)\n";
my $diff3_seconds_days_int = int($diff3_seconds_days);
print "int:\t$diff3_seconds_days_int days (WRONG!!)\n";
print "days\t".$dt4->delta_days($dt3)->days." days (RIGHT)\n";
print "\n"; 
```

输出：

```
dt1:    2014-10-31T00:00:00 (2014-10-31 (CDT -0500)):   1414731600
dt2:    2014-11-03T00:00:00 (2014-11-03 (CST -0600)):   1414994400
diff:   262800 seconds = 3.04166666666667 days (WRONG)
int:    3 days (RIGHT in this case)
days    3 days (RIGHT)

dt3:    2015-03-06T00:00:00 (2015-03-06 (CST -0600)):   1425621600
dt4:    2015-03-09T00:00:00 (2015-03-09 (CDT -0500)):   1425877200
diff:   255600 seconds = 2.95833333333333 days (WRONG)
int:    2 days (WRONG!!)
days    3 days (RIGHT) 
```

笔记：

*   同样，我使用的是本地日期。如果您使用浮动日期，则不会有这个问题 - 仅仅是因为您的日期保持在同一时区。
*   我的示例中的两个时间范围都是从星期五到星期一，所以天数的差异是 3，而不是 3.04……当然也不是 2.95……
*   [使用int()](http://perldoc.perl.org/functions/int.html)将浮点数转换为整数（如[答案](https://stackoverflow.com/a/7111718/664132)中所建议）是错误的，如示例所示。
*   我确实意识到在我的示例中以秒为单位的差异也会返回​​正确的结果，但我觉得它仍然是错误的。您将计算 2 的天差（对于 2 的大值），并且因为它是 2 的大值，所以将其转换为 3。所以只要 DateTime 提供功能，就使用 DateTime。

引用[文档](https://metacpan.org/pod/DateTime#Making-Things-Simple)（delta_days() 与 subtract_datetime()）：

> 日期与日期时间数学
> 
> 如果您只关心日期时间的日期（日历）部分，则应使用 delta_md() 或 delta_days()，而不是 subtract_datetime()。这将产生可预测的、不出所料的结果，不会出现与 DST 相关的并发症。

底线：如果您使用的是 DateTime，请不要区分秒数。如果您不确定要使用什么日期框架，请使用 DateTime，它很棒。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T20:26:31.263

将两个日期转换为秒，然后进行数学运算：

```
#!/usr/bin/perl

use strict;
use warnings;
use POSIX qw/mktime/;

{

    my %mon = (
        JAN => 0,
        FEB => 1,
        MAR => 2,
        APR => 3,
        MAY => 4,
        JUN => 5,
        JUL => 6,
        AUG => 7,
        SEP => 8,
        OCT => 9,
        NOV => 10,
        DEC => 11,
    );

    sub date_to_seconds {
        my $date = shift;
        my ($day, $month, $year) = split /-/, $date;

        $month = $mon{$month};
        if ($year < 50) { #or whatever your cutoff is
            $year += 100; #make it 20??
        }

        #return midnight on the day in question in 
        #seconds since the epoch
        return mktime 0, 0, 0, $day, $month, $year;
    }
}

my $d1 = "04-MAY-99";
my $d2 = "04-MAY-00";

my $s1 = date_to_seconds $d1;
my $s2 = date_to_seconds $d2;

my $days = int(($s2 - $s1)/(24*60*60));

print "there are $days days between $d1 and $d2\n"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-04T19:06:19.583

您可以将日期转换为长整数格式，即自纪元以来的秒数（我认为是 1970 年的某个日期）。然后，您有两个变量，它们是以秒为单位的日期；从较大的减去较小的。现在你有一个以秒为单位的时间跨度；除以 24 小时内的秒数。

# .net - 在客户端/服务器应用程序中加密/解密 SMTP 密码

> ID：821443
> 
> 赞同：0
> 
> 时间：2009-05-04T19:03:38.513
> 
> 标签：.net, smtp, encryption, system.net.mail

我有一个需要为 SMTP 服务器保存用户名/密码的客户端应用程序。此数据将进入 SQL Server 2005，并由我的服务器应用程序使用。服务器应用程序将使用 System.Net.Mail 命名空间，使用提供的凭据（以及来自该用户的电子邮件地址）发送电子邮件消息。如何轻松/安全地加密/解密密码，以免纯文本密码飞过网络？请注意，不保证客户端和服务器应用程序位于同一台计算机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:22:08.610

.NET 中有整个加密命名空间 - System.Security.Cryptography（[示例](http://www.codeproject.com/KB/security/SimpleEncryption.aspx)），因此您可以加密/解密客户端上的数据。

现在如何将密钥存储到密码中。这可以存储在 app.config 中，如此[处](http://geekswithblogs.net/afeng/archive/2006/12/10/100821.aspx)所述加密。但请注意，如果用户对机器具有管理员访问权限，他们可以解密存储在 app.config 中的密钥。

# .net - 如何使用 DateTime 指定一天中的最晚时间

> ID：821445
> 
> 赞同：88
> 
> 时间：2009-05-04T19:04:07.403
> 
> 标签：.net, datetime

我正在使用一个`System.DateTime`对象来允许用户选择一个日期范围。用户只能使用第三方日历选择日期（而不是时间），因此我需要在日期之后自动指定它应该使用的时间（即：00:00:00 或 23:59:59）被选中。

如何在日历选择器将日期存储为 DateTime 对象之后指定时间？我可以使用这些`AddHours, AddMinutes, AddSeconds`方法，但这些方法与当前时间相关，可能不是 00:00:00。

`startDate`遗嘱需要有 00:00:00的`endDate`时间和 23:59:59 的时间来计算整个天数。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2009-05-04T19:07:42.497

如果您已经`DateTime`创建了一个对象，并且想用给定日期的晚上 11:59:59 替换时间，那么您可以使用该`.Date`属性获取时间设置为 00:00:00 的日期，然后添加小时，分和秒。例如：

```
var dt = yourDateInstance.Date.AddHours(23).AddMinutes(59).AddSeconds(59); 
```

如果到最晚时间，您的意思是晚上 11:59:59，那么这也应该有效：

```
var dt = new DateTime(Now.Year, Now.Month, Now.Day, 23, 59, 59); 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2009-05-04T19:09:43.660

要获得今天的最后一刻：

```
DateTime d = new DateTime(Now.Year, Now.Month, Now.Day);
d = d.AddDays(1);
d = d.AddTicks(-1); 
```

* * *

作为对您的编辑的回应，我会这样做：

```
DateTime start = new DateTime(Now.Year, Now.Month, Now.Day);
DateTime end = start.AddDays(1).AddTicks(-1);

// Or - just use end = start.AddDays(1), and use a < for comparison 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-05-04T19:12:32.843

```
DateTime d = DateTime.Today.AddDays(1).AddTicks(-1); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-05-04T19:47:10.343

您的问题已经得到解答，但恕我直言，更好的方法是不要费心尝试从范围末尾减去一个刻度、一秒或其他任何值，并严格使用小于进行比较。

因此，如果您想要从 startDate 到 endDate 的**包含**范围内的所有日期，而忽略时间，您可以在 C# 中使用以下内容：

```
if ((myDate >= startDate.Date) && (myDate < endDate.Date.AddDays(1)))
{
    // ... it's in the range
} 
```

或者在 T-SQL 中，假设您的 @StartDate 和 @EndDate 正好是午夜，例如：

```
WHERE SomeDate >= @StartDate AND SomeDate < DATEADD(d,1,@EndDate) 
```

**更新**

更新示例以显示包含范围以响应评论。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-06-12T13:21:11.737

基于其他答案，我创建了这个方便的扩展方法：

```
public static class DateTimeExtensions
{
    public static DateTime EndOfDay(this DateTime dateTime)
    {
        return dateTime.Date.AddDays(1).AddTicks(-1);
    }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-04T19:28:47.047

```
DateTime startDate = DateTime.Today;
DateTime stopDate = startDate.AddDays(1).AddTicks(-1); 
```

请注意，`DateTime.Today`返回（来自 MSDN）

> System.DateTime 设置为今天的日期，时间组件设置为 00:00:00。

因此，正如其他人所指出的那样，添加一天，然后减去最小的时间量（滴答声），您将获得当天的最后可能时间。

当然，您可能必须考虑 TimeZones 等，具体取决于代码运行的位置与用户的位置。UTC 时间可能很好，但这可能会让您耽误一天（无论哪种方式），具体取决于您的代码运行的位置。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-07-02T15:02:17.570

**使用扩展方法**

```
public static DateTime EndOfTheDay(this DateTime date)
{
    return new DateTime(date.Year, date.Month, date.Day).AddDays(1).AddTicks(-1);
} 
```

此处的结果将通过获取一天的开始来为您提供可能的最晚时间 - 增加一天，然后减去一个刻度。其他方法添加小时、分钟和秒，但是这些取决于代码功能的解决方案将在 23:59:59.000000 和 23:59:59.999999 之间的任何时间导致问题

例如，如果我想知道某个值是否在某个结束日期/时间之前，其他解决方案的可能性是它们会错过毫秒范围内的值。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-23T12:07:22.027

例如

```
DateTime.Now.Date.AddDays(1).AddSeconds(-1) 
```

或者`AddTicks/AddMilliseconds/AddMinutes`...根据您需要的精度。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-04-15T15:30:33.753

为什么不用 **ToDayEnd** () 扩展

```
/// <summary>
    /// Gets the value of the End of the day (23:59)
    /// </summary>
    /// <param name="target"></param>
    /// <returns></returns>
    public static DateTime ToDayEnd(this DateTime target)
    {
        return target.Date.AddDays(1).AddMilliseconds(-1);
    } 
```

但是，如果您真的意味着一天的绝对结束，那么 AddTicks(-1) 就是答案。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-14T09:21:21.933

yourDateInstance.CloseDate = yourDateInstance.CloseDate.Date.AddDays(1).AddMilliseconds(-1);

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-13T11:00:48.157

用这个

DateTime YourNewDate = new DateTime(YourDate .Year, YourDate .Month, YourDate .Day, 23, 59, 59, 99);

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-28T02:12:31.843

这会给你预期的结果：

```
DateTime startDate= DateTime.Now.Date;
DateTime endDate= startDate.AddDays(2).Add(new TimeSpan(23, 59, 59));
//startDate: 28/9/2017 0:0:0 endDate: 29/9/2017 23:59:59 
```

# java - 如何获取通过 Hibernate 连接的数据库名称？

> ID：821466
> 
> 赞同：2
> 
> 时间：2009-05-04T19:07:54.320
> 
> 标签：java, sql-server, hibernate

我正在尝试获取我在 SQL Server 中连接的数据库的名称。我试着做：

```
Query query = session.createQuery("SELECT db_name()");
List<String> dbNames = query.list(); 
```

但是，我收到以下错误：

```
[ERROR PARSER:35] *** ERROR: <AST>:0:0: unexpected end of subtree
Exception in thread "main" java.lang.IllegalStateException: No data type for node: org.hibernate.hql.ast.MethodNode 
 \-[METHOD_CALL] MethodNode: '('
    +-[METHOD_NAME] IdentNode: 'db_name' {originalText=db_name}
    \-[EXPR_LIST] SqlNode: 'exprList' 
```

如何获取我连接的数据库的名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T19:28:19.170

您可以：

1.  创建原生 SQL 查询，使用`session.createSQLQuery(...)`. 您可以使用 提取单行结果`uniqueResult()`。

2.  `Connection`从 中获取 JDBC `Session`，并从数据库元数据中提取连接字符串。对于 SQL Server，我相信您需要解析`connection.getMetaData().getURL()`才能提取实际的数据库名称。

请注意，这`Session.connection()`被认为已弃用，您应该使用`Session.doWork()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:28:07.220

AFAIK 你不能那样调用原生数据库函数。尝试使用本机查询而不是简单查询：[http ://www.roseindia.net/hibernate/hibernate-native-sql.shtml](http://www.roseindia.net/hibernate/hibernate-native-sql.shtml)

# c# - 是否可以在 WinForms 中以编程方式触发“假”滚动？

> ID：821467
> 
> 赞同：3
> 
> 时间：2009-05-04T19:07:56.020
> 
> 标签：c#, .net, winforms, scroll

是否可以在 WinForms 中以编程方式触发“假”滚动？

场景：
使用 System.Drawing 完成的带有各种绘图的表单（并且没有滚动条）。

我想要什么：

1.  以编程方式告诉表单用户已向左滚动 10 个像素。
2.  表单将现有绘图向左移动 10 个像素。
3.  窗体生成一个带有 ClipRectangle 的绘制事件，其中仅包含右侧的 10 个现在为空的像素。

这是可能的还是我需要自己处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:43:50.647

您可以将面板添加到比窗体大的窗体中。保持滚动条关闭，通过设置 Panel 的 VerticalScroll 和 Horizo​​ntalScroll 属性的 value 属性手动滚动面板。

然后将您的绘图添加到面板而不是表单。

```
 this.panel1.VerticalScroll.Value = 50;
this.panel1.HorizontalScroll.Value = 100; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:43:48.557

由于您使用的是 System.Drawing，因此您需要告诉绘图方法（OnPaint() 或您正在绘制的位置）以 -10 像素的 x 偏移量开始绘制。然后，您绘制的所有内容都将被该金额抵消。

将整个绘图向左移动 10 个像素会导致整个屏幕区域无效，而不仅仅是屏幕右侧的 10 个像素。有几种方法可以做到这一点：

1）将您的偏移量设置为 -= 10 像素。通过调用 Invalidate() 使整个屏幕无效。这将强制重绘整个屏幕，并且只要您正确编码了偏移量，就会重绘 10 像素以上的所有内容。2）对屏幕上的内容进行内存转储并从中制作图像。然后将该图像重绘到屏幕左侧 10 像素处。之后，只需使最右边的 10 个像素无效。

事实上，方法#2 比方法#1 慢很多。如果您没有数以百万计的东西需要绘制，那么重绘屏幕会非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:24:37.963

老实说，我不知道这是否可行，但我的猜测是，如果表单上没有滚动条，它就不会。

但是，我希望如果您的 PictureBox 控件的大小大于窗体的客户区域，并且您移动了它，它将仅使用特定的剪辑区域进行更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T19:29:31.040

您可以尝试将绘图放在单独的容器中，然后将容器的位置移动到主窗体之外的位置。.location = -10,0 例如。这将产生一种错觉，即它从屏幕上移动了一定数量的像素。如果位置更改未成功执行此操作，您也可以始终触发自己的重绘事件。除此之外，您始终可以所有者绘制所有内容。

# sql-server - 在返回字符串或 null 的查询中使用函数

> ID：821469
> 
> 赞同：0
> 
> 时间：2009-05-04T19:09:02.773
> 
> 标签：sql-server, join, function

我想加入 2 个表和`'addresses'`（这 是一个数字，或者它是空的），就像这两个例子：`'user_info'``user_id``app_id`

```
select * from user_info 
left outer join addresses on addresses.user_id = user_info.user_id 
and addresses.app_id is null

select * from user_info 
left outer join addresses on addresses.user_id = user_info.user_id 
and addresses.app_id = 1234 
```

app_id 应该是复杂的，我写了一个函数来返回它。它返回一个字符串，例如“is null”或“= 1234”。我试图用这种语法来调用它：

```
select * from user_info 
left outer join addresses on addresses.user_id = user_info.user_id 
and addresses.app_id dbo.fnGetAppId(addresses.user_id) 
```

我收到此错误：

> 消息 4145，级别 15，状态 1，第 3 行 在预期条件的上下文中指定的非布尔类型表达式，靠近“dbo”。

我想保持查询非常简单，而不必确定函数是否返回空值。

你能建议保持调用查询非常简单的最佳方法吗？

（我在 sql server 2005 中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T19:15:02.120

看起来您只是缺少一个 = 符号

addresses.app_id dbo.fnGetAppId(addresses.user_id)

而不是

地址.app_id = dbo.fnGetAppId(addresses.user_id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T19:17:15.377

因此，如果 fnGetAppId 为空，那么此查询如下所示？

```
select * from user_info left outer join addresses on addresses.user_id = user_info.user_id and null 
```

我怀疑那是你想要的。:)

您可能希望在调用查询之前对您的逻辑进行简单检查，以正确处理 fnGetAppId 的空值，正如 Clyde 所提到的，您还需要一个 = 符号来表示非空值

.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T19:27:31.107

空！=空。如果 address.app_id = NULL 或 fnGetAppID = NULL，比较将失败。我会将比较写为：

`coalesce(address.app_id, 'NULLSTRING') = coalesce(dbo.fnGetAppID(addresses.user_id), 'NULLSTRING')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T19:45:56.693

正如詹姆斯布莱克指出的那样，你有 AND 可能想要的 WHERE。除此之外，我建议您将函数设为布尔函数（将 address.app_id 作为另一个参数传递给它），因此它可以适当地执行 IS NULL 或 = 1234 （Bill 的 COALESCE 解决方案确实很聪明，但要进行适当的比较函数内部更简单，IMO）。

# visual-studio-2008 - 我在哪里可以获得有关 C# 中异常处理的出色文档

> ID：821470
> 
> 赞同：1
> 
> 时间：2009-05-04T19:09:19.670
> 
> 标签：visual-studio-2008, exception, c#-3.0

我正在寻找一个很好的网站或书籍，它们提供了 C# 2008 中异常处理的很好示例，例如 SQL 异常管理等。我在 3 层编程。

我已经在 VB .Net 2008 中做得很好，现在我正在转向 C#。过渡并不难，但我需要更多关于 C# 中异常处理的信息，这与 VB 行为完全不同。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:13:16.103

您是否尝试查看[MSDN 异常处理应用程序块](http://msdn.microsoft.com/en-us/library/cc309505.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:14:04.290

我发现 MSDN 上的官方文档是关于核心语言特性的最佳资源。具体来说，请参阅此页面及其链接到的页面：[异常和异常处理](http://msdn.microsoft.com/en-us/library/ms173160(loband).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:25:46.477

我使用下面的书教了一门 C# 课程。从功能的角度处理异常的信息是可以的。在“最佳实践”级别上并不是最好的。

[http://www.amazon.com/Sams-Teach-Yourself-21-Days/dp/0672320711](https://rads.stackoverflow.com/amzn/click/com/0672320711)

# outlook - Outlook 2007 加载项 - 使用 BeforeItemMove 事件时出现问题

> ID：821471
> 
> 赞同：0
> 
> 时间：2009-05-04T19:09:33.990
> 
> 标签：outlook, vsto, add-in, outlook-2007, outlook-addin

我正在编写 Outlook 2007 插件。我正在做的就是：

```
 private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        Outlook.Folder root;

        //creates Spam folder if it dosen't exist
        if (!SpamFolderExist())
        {
            CreateSpamFolder();
        }

        root = (Outlook.Folder)this.Application.Session.DefaultStore.GetRootFolder();

        //set BeforeItemMove event for spam and inbox folders
        spamFolder = (Outlook.Folder)root.Folders["Spam"];
        inboxFolder = (Outlook.Folder)this.Application.ActiveExplorer().Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox);

        spamFolder.BeforeItemMove += new Microsoft.Office.Interop.Outlook.MAPIFolderEvents_12_BeforeItemMoveEventHandler(BeforeItemMoveFromSpam);
        inboxFolder.BeforeItemMove += new Microsoft.Office.Interop.Outlook.MAPIFolderEvents_12_BeforeItemMoveEventHandler(BeforeItemMoveFromInbox);

        //set new mail event
        this.Application.NewMail += new Microsoft.Office.Interop.Outlook.ApplicationEvents_11_NewMailEventHandler(OnNewMail);
    } 
```

问题是，即使我在 BeforeItemMoveFromInbox 和 BeforeItemMoveFromSpam 方法中没有写任何东西，应用程序也会出现奇怪的行为。在我移动一些邮件后，它不再对特定邮件执行任何移动操作。似乎邮件被阻止了，我就是无法移动它。执行其他移动操作后，其他邮件将被阻止，并且可以移动先前被阻止的邮件。这个想法是，在一封邮件被阻止后，它总是至少有一封无法移动的邮件。换句话说，一些移动动作随机失败。我不得不说，除了将邮件从一个文件夹移动到另一个文件夹之外，我没有做任何其他事情，而且我没有收到任何错误消息。我还尝试在方法结束时将 BeforeItemMove 事件处理程序的取消参数设置为 false，但我得到了相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-01T04:47:35.087

你得到它 76 梅尔。我遇到了同样的问题（只是将文件夹连接到 BeforeItemMove 事件，这样当我将消息移出该文件夹时，我无法在短时间内将其从新文件夹移动到另一个文件夹） .

将 Marshal.ReleaseComObject() 添加到事件处理程序的末尾完美地修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:28:13.267

如果我理解您上面的问题描述，

如果您将项目从收件箱移动到垃圾邮件文件夹，则会触发该事件，但如果您将相同的项目移回，则该事件不起作用。?? 因为您必须为要从中移动的 alls 文件夹挂钩事件。

可能发生的情况是您可能必须在事件处理程序 Marshal.ReleaseComObject() 中释放对象

# wpf - WPF - TextBlock 中超链接的 DataTemplate/Value 转换器

> ID：821476
> 
> 赞同：1
> 
> 时间：2009-05-04T19:10:22.567
> 
> 标签：wpf, datatemplate, hyperlink, ivalueconverter

我有一个 ListBox 显示人员姓名、电子邮件、部门等的列表。有一个 DataTemplate 有几个 TextBlocks 来显示每个属性。其中一个 TextBlocks 包装了一个超链接以显示电子邮件地址，如下所示：

```
<TextBlock>
   <Hyperlink NavigateUri="{Binding Email}">
      <TextBlock Text="{Binding Email}" />
   </Hyperlink>   
</TextBlock> 
```

这很好用，但如果此人没有电子邮件地址，则 TextBlock 不会自动折叠。所以我写了一个值转换器并以这样的风格使用（简化）：

```
string s = (String) value;
if (s == ""){
   return Visibility.Collapsed;
}
return Visibility.Visible; 
```

这是使用 ValueConverter 的样式：

```
<Style x:Key="ResultItemTextBoxStyle">
    <Setter Property="TextBlock.Visibility" Value="{Binding Path=Text, RelativeSource={RelativeSource Self}, 
                                                    Converter={StaticResource StringToVisibilityConverter}}"/>
</Style> 
```

我将调用转换器的样式添加到 TextBlock：

```
<TextBlock Style="{StaticResource ResultItemTextBoxStyle}">
   <Hyperlink NavigateUri="{Binding Email}">
      <TextBlock Text="{Binding Email}" />
   </Hyperlink>   
</TextBlock> 
```

在此更改之后，电子邮件地址不再显示 - 在值转换器中，TextBlock 的文本始终为空并返回 Visibility.Collapsed。这就像它在加载超链接之前评估 TextBlock 的文本或其他东西......

请帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:38:50.813

我会做这样的事情：

```
<TextBlock>
   <TextBlock.Style>
      <Style>
         <Setter Property="Visibility" Value="Visible"/>
         <Style.Triggers>
            <DataTrigger Binding="{Binding Email}" Value="">
               <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
         </Style.Triggers>
      </Style>
   </TextBlock.Style>
   <Hyperlink NavigateUri="{Binding Email}">
      <TextBlock Text="{Binding Email}" />
   </Hyperlink>   
</TextBlock> 
```

我认为编写一个价值转换器是矫枉过正的（无意冒犯）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:22:29.590

您编写的转换器是将 的`Text`与`TextBlock`空的，而不是内部的文本进行比较`Hyperlink`。我认为您确实想将其设置`RelativeSource`为 child `Hyperlink`，但我认为这是不可能的。

你确定是`TextBlock`'s 的大小不会被折叠吗？如果您将样式放在`Hyperlink`相反（甚至它的内部`TextBlock`）上，也许这仍然有效？

编辑：`Hyperlink`没有`Visibility`属性，所以不幸的是，将样式移到它不会有帮助。我能想到的唯一其他选择是创建一个从 派生的自定义控件`TextBlock`，它包含一个`Hyperlink`和`TextBlock`。如果您向其中添加一个`Email` `DependencyProperty`，那么您可以使用它来确定控件是否应该可见，以及该控件的值`Hyperlink`及其内部`TextBlock`。

似乎应该有更好的方法来处理这个问题，但我目前想不出任何东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-04T19:22:09.920

我知道这不完全是你的问题，但你为什么要使用文本块呢？

只需使用

```
 <Hyperlink NavigateUri="{Binding Email}" Content="{Binding Email}" 
Visibility="{Binding Email, Converter={StaticResource StringToVisibilityConverter}}" /> 
```

应该做你想做的事，除非我弄错了。

更新：好的，我弄错了，WPF Hyperlink 不是 Silverlight 的 HyperlinkBut​​ton，也没有 Content 属性。真丢人。

# java - EJB3 查询 + in 子句

> ID：821479
> 
> 赞同：1
> 
> 时间：2009-05-04T19:10:48.497
> 
> 标签：java, oracle, hibernate, ejb-3.0, ora-01722

我需要使用如下 SQL 的 IN 子句

```
SELECT * FROM tableA WHERE colA in (1, 2,3) 
```

我如何在 EJBQL 中做到这一点？

我尝试了以下方法，显然失败了：

```
SELECT tab FROM tableA tab WHERE tab.colA in (:colValues) 
```

然后在java中我做了

```
query.setParameter("colValues","1,2,3") 
```

这给了我以下例外

```
org.apache.openjpa.lib.jdbc.ReportingSQLException: ORA-01722: invalid number 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T19:26:03.653

问题是当您`:parameter_name`在 sql 片段中使用然后调用`query. setParamter("parameter_name", values)`它时，预计`values`应该是某种`collection`. 试试这个。

```
List<Integer> values = new ArrayList<Integer>();
values.add(1);
values.add(2);
values.add(3);

query.setParameter("colValues", values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:24:01.553

自从我完成 EJBQL 以来已经有很长时间了，但这应该可以工作：

```
 SELECT OBJECT(t)
       FROM Tab AS t
       WHERE t.colA IN (:colValues) 
```

此外，您可能需要将 colValues 设置为数字数组而不是字符串

# javascript - 提示onBeforeUnload后检测用户是否停留

> ID：821481
> 
> 赞同：9
> 
> 时间：2009-05-04T19:11:21.927
> 
> 标签：javascript, onbeforeunload

在我正在开发的网络应用程序中，我正在捕获 onBeforeUnload 以询问用户他是否*真的*想退出。

现在，如果他决定留下来，我想做很多事情。我想弄清楚的是，他实际上选择了留下。

我当然可以为“x”秒声明一个 SetTimeout，如果触发，则意味着用户仍然在那里（因为我们没有被卸载）。问题是用户可以花任何时间来决定是否留下......

我最初希望在显示对话框时不会触发 SetTimeout 调用，因此我可以设置一个短时间的超时，并且只有在用户选择留下时才会触发。**但是，在显示对话框时会**触发超时，因此这不起作用。

我尝试的另一个想法是在窗口/文档上捕获 mouseMoves。显示对话框时，mouseMoves 确实不会触发，除了一个真正适用于我的情况的奇怪异常，因此它也不起作用。

谁能想到其他方法来做到这一点？

谢谢！

* * *

（如果您好奇，捕获 mouseMove 不起作用的原因是我的页面中有一个 IFrame，其中包含来自另一个域的站点。如果在卸载页面时，焦点在 IFrame 内，而对话框显示，然后当鼠标从 IFrame 内部移动到外部（至少在 Firefox 中）时，我会触发一次 MouseMove 事件。这可能是一个错误，但在我们的案例中很可能会发生这种情况，所以我不能使用这种方法）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T15:13:29.733

我最终做的是挂钩到我的文档的点击事件，一旦我收到点击，我认为用户已经留下来。

这不是一个好的解决方案，在大多数情况下（如果你是 DiggBar），你会有很多假阴性（人们会留下来，你永远不会知道），但在我们的例子中，这是完全合理的，因为人们互动大量使用我们的网站，而不仅仅是框架网站。

基本上，我的代码是这样做的......

```
function OnBeforeUnload() {
    Event.observe(document, "click", UserStayed);
    if (IConsiderTheIFrameMightBeTryingToPopOut) {
        return "The site is trying to escape. Do you want to stay?";
    }
}

function UserStayed() {
Event.stopObserving(document, "click", UserStayed);
    // New we know the user is still with us for sure.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T06:17:35.003

过去几天我一直在网上研究这个问题，答案总是“不”，你不能肯定地说，用户是留下还是离开（除了如果用户离开，你的应用程序就会退出工作的事实）。我讨厌“不”的答案。我想出了以下实用程序。

```
var OnBeforeUnload = (function(){
    var
    FDUM = new Function,
    AFFIRM = function(){ return true; };

    var _reg = function(msg,opts){
        opts = opts || {};
        var
            pid = null,
            pre = typeof opts.prefire == 'function' ? opts.prefire : FDUM,
            callback = typeof opts.callback == 'function' ? opts.callback : FDUM,
            condition = typeof opts.condition == 'function' ? opts.condition : AFFIRM;

        window.onbeforeunload = function(){
            return condition() ? (pre(),setTimeout(function(){ pid = setTimeout(callback,20); },1),msg) : void 0; 
        }

        window.onunload = function(){ clearTimeout(pid); };

    }

    var _unreg = function(){ window.onbeforeunload = null;  }

    return {
        register : _reg,
        unregister : _unreg
    };

})(); 
```

所以，一个电话如

```
OnBeforeUnload.register('Hello!',{ 
    condition:function_that_returns_true_to_fire_event_false_to_ignore,
    prefire:function_to_call_on_page_exit_attempt, 
    callback:function_to_call_if_user_stays
}); 
```

将在处理程序中调用条件以查看它是否应该激活。如果是这样，则在向用户显示弹出窗口之前执行预触发（您可能想要暂停视频），并且只有在用户留下时才会发生回调。

我的逻辑是在事件处理程序的主体中启动一个 setTimeout。在用户按下其中一个按钮之前，setTimeout 不会执行。在他们这样做之后，它会立即开火。本例中的 setTimeout 并没有调用回调，而是一个代理函数，为回调执行另一个超时，延迟为 20ms。如果用户停留在页面上，则执行回调。如果不是，则将另一个处理程序附加到 onunload 以清除将调用回调的超时，确保永远不会调用回调。我只有机会在 Firefox、IE 和 Chrome 中检查它，但到目前为止它在所有三个中都有效，没有出现任何问题。

我希望这可以帮助像我一样对这个问题普遍给出的专利“否”感到沮丧的人们。这段代码可能并不完美，但我认为它在正确的轨道上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T17:59:49.487

*这是此类问题的热门话题，我知道特定案例（从 8 年前开始）无法使用此解决方案，因为它位于 iFrame 中，但任何未来的人可能会比以下答案更有帮助以上：*

您可以轻松判断他们是否一直使用 body 事件侦听器，我认为 mousemove 和 keydown 结合起来就足够了。

要判断他们是否离开，您将需要一些服务器端的东西。

总而言之，它看起来像这样（您必须自己填写对服务器的 ajax 调用）：

```
window.addEventListener("beforeunload", function(event){
    //tell your server they are attempting to leave
    var tryLeaveID = serverLogAttempToLeave();

    //an element with giant letters and warning text, because you can no longer set text on the alert box
    var unsavedWarning = document.getElementById("unsavedChangesWarning");
    unsavedWarning.style.display = "block";

    var onStay = function() {
        //if they stay, tell your server so
        serverRevokeAttemptToLeave(tryLeaveID);
        unsavedWarning.style.display = "none";
        document.body.removeEventListener("mousemove", onStay);
        document.body.removeEventListener("keydown", onStay);
    }

    document.body.addEventListener("mousemove", onStay);
    document.body.addEventListener("keydown", onStay);

    var dialogText =  "undisplayed text";
    event.returnValue = dialogText;
    return dialogText;
}); 
```

在服务器端，你将不得不使用一些丑陋的东西，一个计时器。做一堆离开的尝试，并根据逗留时的要求或一分钟左右的确认离开后将其删除。我无法想象知道用户是否离开比几分钟更敏感的任何情况，但如果你有，请发表评论，因为我想考虑一下。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2009-05-05T17:55:01.070

为什么不直接使用 StackOverflow 所做的方法，您会得到一个弹出框，让您做出选择：

> 您确定要离开此页面吗？
> 
> 您已开始撰写或编辑帖子。
> 
> 按 OK 继续，或按 Cancel 留在当前页面

然后，他们需要多长时间并不重要。如果他们点击一个按钮，他们就会离开。如果他们点击另一个，他们会留下来。

# model-view-controller - 模型-视图-控制器：何时应该由控制器确定视图的更改？

> ID：821487
> 
> 赞同：3
> 
> 时间：2009-05-04T19:13:11.970
> 
> 标签：model-view-controller, design-patterns

Model-View-Controller 似乎允许对视图进行两种类型的更改：

1.  每当模型更改时，视图都会收到更改通知，因此它可以相应地更新其视觉表示。
2.  出于“视图选择”的目的，控制器可以直接访问视图的 API。

究竟什么是“视图选择”，在什么情况下控制器应该对视图进行更改，而不是让视图仅根据模型进行自己的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:20:56.270

在 MVC 中的 Web 应用程序中使用没有事件通知机制，与 MVVM 不同，您的视图不会在视图更改时通知视图。但它是创建和传递模型作为重新渲染视图的一部分的控制器操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:27:13.683

这是一篇您可能会觉得有用的文章。

[修改后的 MVC 模式](http://www.oracle.com/technetwork/articles/javase/mvc-136693.html)

作者提出了一个 MVC 流程，其中模型向控制器发送通知（而不是视图，如传统方式）。因此，控制器在两个方向上调解模型和视图对象之间的数据流。正如他们所说

> 这种设计有助于更彻底地将模型与视图解耦。在这种情况下，控制器可以指定它希望在向控制器注册的一个或多个模型中找到的模型属性。此外，它还可以为注册的一个或多个视图提供影响模型属性更改的方法

...这是您关于什么是视图选择的问题的答案。基本上只是应用程序有一系列视图，这些视图根据模型中的单个更改而相关或更新。控制器将决定需要更新和/协作哪一组视图来完成工作（来自一个视图的信息是不够的）

# c++ - C++ 中的错误时间

> ID：821490
> 
> 赞同：5
> 
> 时间：2009-05-04T19:13:56.210
> 
> 标签：c++, windows, timezone

```
// Simple program to get the date and time on Windows
//  It compiles and works fine but displays the wrong hour!

// Using Visual C++ 2008 Express on XP SP2
#include <Windows.h>
#include <iostream>
using namespace std;

void main()
{
     SYSTEMTIME st;
     GetSystemTime(&st);

     cout << "Year : " << st.wYear << "\n";
     cout << "Month : " << st.wMonth << "\n";
     cout << "Day : " << st.wDay << "\n";

     // The following line displays the wrong hour, off by 4 hours. 
         // What gives?
     cout << "Hour : " << st.wHour << "\n";
     cout << "Minute : " << st.wMinute << "\n";
     cout << "Second : " << st.wSecond << "\n";
}

// TIA guys!
// -- Bert 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-04T19:16:13.537

根据文档，时间是 UTC。链接**[在这里](http://msdn.microsoft.com/en-us/library/ms724390(VS.85).aspx)**

对于本地时间，您需要**[GetLocalTime()](http://msdn.microsoft.com/en-us/library/ms724338(VS.85).aspx)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T19:16:24.770

`GetSystemTime()`以 UTC 格式返回当前时间（请参阅[文档](http://msdn.microsoft.com/en-us/library/ms724390(VS.85).aspx)）。如果您在 EST（当 DST 生效时为 UTC-4），那么它将返回当前时间 + 4 小时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:15:06.970

您是否检查过您获得的时间是否在正确的时区？

Windows 也有一个[getlocaltime](http://msdn.microsoft.com/en-us/library/ms724338(VS.85).aspx)函数，它应该返回您所在时区的正确时间。

# jquery - 排查身份验证错误

> ID：821494
> 
> 赞同：0
> 
> 时间：2009-05-04T19:14:37.770
> 
> 标签：jquery, asp.net-mvc, authentication

现象：
部分用户不能成功POST，大部分用户可以成功POST。
发生错误时，用户将被重定向到站点的共享/错误页面。

使用的技术：
IIS v6
Windows Server 2003
asp.net v3.5
asp.net mvc framework v1.0
jQuery
linq
sql server 2005

身份验证：带有 AspNetActiveDirectoryMembershipProvider 的 Windows
下面是 web.config 的片段：

```
<authentication mode="Windows"/>
    <membership defaultProvider="AspNetActiveDirectoryMembershipProvider">
    <providers>
            <add name="AspNetActiveDirectoryMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider,&#xA;                 System.Web, Version=2.0.3600.0, Culture=neutral,&#xA;                 PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="ADConnString" connectionUsername="" connectionPassword=""/>
        </providers>
    </membership> 
```

这是启动保存的视图中的链接
`<a href="javascript:void(document.frmCurrentLineItems.submit())" title="Saves this month only">Save This Month</a>`

下面是一些基于 jQuery 的 javascript：

```
$("form#frmCurrentLineItems").submit(function() {
    submitView(this);
    return false;
});

function submitView(form) {        
    $.ajax(
            {
                type: form.method,
                url: form.action,
                data: $(form).serialize(),
                dataType: "html",
                error: function(error) {
                    alert(error);
                }
            }
        );
} 
```

这是控制器方法的一部分：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult CurrentLineItems(FormCollection thisForm)
    // Get the forecast from the session
    BusinessLogic.ForecastBL thisForecast = (BusinessLogic.ForecastBL)HttpContext.Session["ForecastMetaData"];

        if (thisForecast != null)
        {
            // Run the save to db stuff here
            return View("CurrentLineItems", ViewData["LineItemSummary"]);
        }
        else
        {
            return Redirect("../Shared/Error");
        } 
```

上面代码的注释...我很确定将预测对象拉出会话不会导致错误，至少我假设这不是因为会话已过期，因为无法保存的用户，当他们打开页面时无法保存，然后立即尝试保存。

该类还具有以下属性：

```
[HandleError]
[Authorize]
public class ForecastController : Controller
{ 
```

该站点在 IIS 属性中具有身份验证方法：
未选中启用匿名访问并选中集成 Windows 身份验证。

以下是遇到此问题的用户的 IIS 日志：

466 2009-04-28 16:41:15 W3SVC1100645706 192.168.10.22 POST /Forecast/CurrentLineItems - 443 - XX.XX.XX.XX Mozilla/4.0+（兼容；+MSIE+7.0；+Windows+NT+5.1；+ GTB5;+.NET+CLR+1.1.4322) 401 1 0
467 2009-04-28 16:41:15 W3SVC1100645706 192.168.10.22 POST /Forecast/CurrentLineItems - 443 DOMAIN\username XX.XX.XX.XX Mozilla/4.0 +(兼容;+MSIE+7.0;+Windows+NT+5.1;+GTB5;+.NET+CLR+1.1.4322) 302 0 0
468 2009-04-28 16:41:15 W3SVC1100645706 192.168.10.22 GET /Shared /错误 - 443 - XX.XX.XX.XX Mozilla/4.0+（兼容；+MSIE+7.0；+Windows+NT+5.1；+GTB5；+.NET+CLR+1.1.4322）401 1 0
469 2009- 04-28 16:41:16 W3SVC1100645706 192.168.10.22 GET /Shared/Error - 443 DOMAIN\username XX.XX.XX.XX Mozilla/4.0+(兼容;+MSIE+7.0;+Windows+NT+5.1;+GTB5 ;+.NET+CLR+1.1.4322) 404 0 0

以下是为了提高可读性而删除的相同行：
2009-04-28 16:41:15 POST /Forecast/CurrentLineItems - 443 - XX.XX.XX.XX 401 1 0
2009-04-28 16:41:15 POST /Forecast/CurrentLineItems - 443 域\用户名 XX.XX.XX.XX 302 2009-04-28 16:41:15 GET /Shared/Error - 443 - XX.XX.XX.XX 401 1 0
2009-04-28 16:41:16 GET /Shared/Error - 443 DOMAIN\username XX.XX.XX.XX 404 0 0

刚刚注意到所有的 POST 请求都像上面那样......除了成功的请求在第二个 POST 上返回 200......

那么我如何确定是什么导致了上面的第一个 POST ......那个在没有 DOMAIN\username 信息的情况下进入 Web 服务器并得到 401 错误的那个？

还有为什么会出现 302 错误？

好像我要两个 POST... 但我不太明白为什么浏览器要发送两个 POST 请求？（当然......我怀疑我的代码，但不能完全弄清楚为什么。）

任何有助于追踪上述错误的故障排除方法将不胜感激。

现在正在查看[IIS](http://support.microsoft.com/kb/907273/)编辑中的 HTTP 401 错误疑难解答……这对我的问题并没有真正的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-10T13:58:02.673

您返回的第一个 401 是 NTLM 身份验证方案的一部分，它是 IIS 处理 Windows 身份验证的方式。发出请求，它返回 401，因此它再次尝试传递 NTLM 身份验证信息。

所以你的第一个帖子进来，得到一个 401，然后重试身份验证并得到一个 302。这是你重定向到你的错误页面。然后你的错误页面得到一个 401，再试一次，得到一个 404。

所以你有两个问题，第一个是控制器中的某种类型的错误。可能是空检查重定向，也可能是另一个错误，您是否记录了错误？另外，我会抛出一个异常而不是重定向......然后你的 handleError 逻辑应该启动并为你处理它。

第二个是看起来你的错误页面不存在或者你的路由搞砸了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T13:34:37.320

将链接更改为输入按钮/元素似乎已经解决了这个问题......
`<input type="submit" value="Save This Month" title="Saves this month only" class="submitBtn"/>`

由于输入按钮位于我要提交的表单内...它会触发 Post 控制器操作并保存数据然后显示视图...

# java - 从 Castor 过渡到 JPA

> ID：821497
> 
> 赞同：3
> 
> 时间：2009-05-04T19:14:43.197
> 
> 标签：java, hibernate, jpa, datanucleus, castor-jdo

我试图让我的 java 应用程序更符合标准，我面临的最大问题之一是将我们的 ORM 框架从 Castor JDO 转换为 JPA 实现（考虑 Hibernate 或 DataNucleus）。我们有自己的持久数据抽象层，因此可以通过向我们的 API 添加 JPA 实现并创建映射来轻松完成基本重构。然后就变得更复杂了，我们使用 Castor OQL，不重不轻，也不是抽象的。我们还直接对数据库进行原始 JDBC 查询，但通过 Castor 获取连接。我们正在使用 ehcache 在多个服务器之间缓存我们的对象。

问题：

1) 一般来说，Castor 和 JPA 如何处理我应该注意的持久对象有什么显着差异吗？

2) JPA 查询语言是否提供与 Castors OQL 类似的功能？还是我需要研究 JDO？

3) 我可以将 ecache 与任何 JPA 实现一起使用吗？

4) 有人知道可以从 Castor 映射转换为 JPA 映射的工具吗？

最后，我想，对不同 JPA 实现的优势有什么想法吗？Hibernate 很有吸引力，因为它被广泛使用，但我最关心的是简单性，所以也许 DataNucleas、EclipseLink（或其他东西）可能会更好地为我服务？

谢谢，

彼得考恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-07-08T13:16:06.437

[从 Castor 过渡时， EclipseLink](http://www.eclipse.org/eclipselink)是一个不错的选择，因为 EclipseLink 是一个 JPA 提供者，并且像 Castor 一样支持对象到 XML 的映射（使用[MOXy](http://www.eclipse.org/eclipselink/moxy.php)组件）。

# java - 解析器，Java 生成器，具有以下要求

> ID：821501
> 
> 赞同：4
> 
> 时间：2009-05-04T19:15:31.853
> 
> 标签：java, parsing, parser-generator, javacc

我正在寻找一个用于 Java 的解析器生成器，它执行以下操作：我的语言项目非常简单，只包含一小组标记。

以纯 READABLE Java 代码输出，以便我可以修改它（这就是我不使用 ANTLR 的原因）成熟的库，至少可以在 Java 1.4 上运行和工作

我查看了以下内容，它们可能会起作用：JavaCC、jlex、Ragel？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T19:24:04.190

也许您正在寻找解析器*组合*器而不是解析器*生成器*？请参阅[本文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.29.1452)和[JParsec](http://jparsec.codehaus.org/)。

编辑生成的解析器代码是一个非常糟糕的主意——编辑语法文件然后重新编译它要容易得多。除非您是出于教育目的而这样做，在这种情况下，ANTLR 以为如此强大的解析器生成器生成非常易读的代码而自豪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T19:27:32.497

您应该使用[Rats](http://www.cs.nyu.edu/rgrimm/xtc/rats.html) ... 这样，您不必分离词法分析器和解析器，然后如果您想扩展您的项目，这将是微不足道的。它在 java 中，然后你可以在 Java 中处理你的 AST ......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:33:58.220

我有很好的经验[SableCC](http://sablecc.org/)。

它的工作方式与大多数生成器不同，因为您获得了一个扩展的 AST/Visitor 模型（通过继承）。

我无法从可读性方面评论其代码的“质量”（我已经有一段时间没有使用它了），但它确实具有您根本不必阅读代码的质量。只是您的子类中的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T22:27:47.850

也许[ANTLR](http://www.antlr.org)会为你做这件事。这是一个很好的解析器生成器，带有一本可用于文档的[好书。](https://rads.stackoverflow.com/amzn/click/com/0978739256)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-02-05T06:47:37.427

看看[SableCC](http://sablecc.org/)。Sablecc 是一个易于使用的解析器生成器，它接受您的语言语法作为 EBNF，无需混合操作代码，并生成一个 Java 解析器，该解析器生成可以使用树节点访问者遍历的语法树。SableCC 功能强大，但比 ANTLR、JavaCC、yacc 等更易于使用。它也不需要单独的词法分析器。构建您的语言处理器相当于扩展从您的语法生成的访问者类，并覆盖其在解析器遇到句法构造时调用的方法。对于每个语法规则 XYZ，访问者将有一个方法 inAXYZ(Node xyz)....outAXYZ(Node xyz) 在解析器匹配规则时调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T19:20:23.277

对于这么简单的语言，[JFlex](http://jflex.de/)可能就足够了。它类似于 JLex，但[速度更快](http://jflex.de/manual.html#SECTION00071000000000000000)（这也可能意味着可读性较差，但我还没有看到 JLex 的输出）。

它是一个词法分析器，而不是解析器，但它可以轻松地与[CUP](http://www2.cs.tum.edu/projects/cup)或[BYAcc](http://jflex.de/manual.html#WorkingTog) [/J](http://byaccj.sourceforge.net/)接口。同样，对于一种简单的语言，编写自己的解析器可能更容易（我以前做过）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T19:27:22.590

我们将 JavaCC 用于我们的（以及相当小的语言）并且对它感到满意。

# c# - c#（wcf）架构文件和目录结构（和实例化）

> ID：821503
> 
> 赞同：0
> 
> 时间：2009-05-04T19:15:42.867
> 
> 标签：c#, wcf, architecture

您好，感谢您的帮助。

我有一个正在尝试正确模块化的 wcf 服务。

我有兴趣找出是否有更好的方法或实现文件和目录结构以及实例化，是否有更合适的抽象方法我可能会丢失？

这是最好的方法吗？特别是如果性能和处理数千个同时请求的能力？

目前我有以下结构：

-根\服务.cs

```
公共类服务：IService
{
    公共无效 CreateCustomer（客户客户）
    {
        客户服务 customerService = new CustomerService();
        客户服务.创建（客户）；
    }

```
public void UpdateCustomer(Customer customer)
{
     CustomerService customerService = new CustomerService(); 
     customerService.Update(customer); 
} 
```

}
```

-根\客户\客户服务.cs

```
公共课 CustomerService
{
    公共无效创建（客户客户）
    {
        //做一点事
     }

```
public void Update(Customer customer)
{
    //DO SOMETHING
}

public void Delete(int customerId)
{
    //DO SOMETHING
}

public Customer Retrieve(int customerId)
{
    //DO SOMETHING
} 
```

}
```

注意：在这个例子中我没有包括客户对象或数据访问库，因为我只关心服务。

如果您可以让我知道您的想法，如果您知道更好的方法或可以提供帮助的资源。

谢谢。史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T17:45:09.893

我不知道这是*最好*的（甚至是推荐的）目录结构，但这是我目前确定的。

```
.\MyProject
|----\bin
|----\MyProject                                 (main application)
|----\MyProject.Core                            (shared libraries)
|----\MyProject.Server                          (WCF-hosting Windows service)
|----\MyProject.Services                        (the WCF services)
|---------\MyProject.Services.Service1          (WCF Service1)
|---------\MyProject.Services.Service1.Support  (WCF Service1-specific libraries)
|---------\MyProject.Services.Service2          (WCF Service2)
|---------\MyProject.Services.Service2.Support  (WCF Service2-specific libraries) 
```

根据这个目录结构和到目前为止您所展示的内容，Service 类将位于 MyProject.Services 目录下的 MyProject.Services.Service 文件夹中。CustomerService 类将位于 MyProject.Services 目录下的 MyProject.Services.Service.Support 文件夹中。

我使用数据库的工作不足以理解打开多个同时连接或只是一遍又一遍地重用相同连接之间的权衡。我的猜测是你这样做的方式是首选的解决方案。

并且假设每次调用 WCF 服务时（通过创建新的 CustomerService 对象）都将处理推迟到数据库，您可能会从使 WCF 服务成为单例中受益。通常，出于可伸缩性原因，不赞成 WCF 单例，因为假设它们在各种服务调用之间共享状态，因此必须同步。但是，如图所示，您的 WCF 服务不直接维护任何状态。它只是访问数据库以创建、更新、删除或获取客户。只要使用适当的锁定方案访问数据库，就可以避免与 WCF 服务的每次调用实例化相关的开销。要使您的服务成为单例，请在您的服务上使用以下属性：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
public class Service : IService
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T19:38:12.487

出于多种原因，这可能无法回答，但我猜这个问题的广泛性与它有很大关系。此外，在几乎没有上下文的情况下分析设计也有点挑战。这里也有很多问题，使答案变得复杂。

首先，您提到了几个不在您的示例代码中的类。我会假设 Customer 指的是 CustomerService 以及其他提到的类和示例？

你问是否有更好的方法来实现。您可能需要查找“FlyWeight”模式和“Factory”模式等设计模式来帮助您。我提到“FlyWeight”是因为您谈到了性能。

《设计模式》一书将为您提供帮助。此外，Martin Fowler 的 Refactoring（虽然是用 Java 编写的）也有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T19:23:10.180

我使用了 Web 服务软件工厂并且喜欢它的结构。

他们的示例代码中的结构是这样的：

```
BYA.Mfg.SCM.Svc.WCF
  Source
    Business Logic
      BYA.Mfg.SCM.Svc.WCF.BusinessEntities
      BYA.Mfg.SCM.Svc.WCF.BusinessLogic
    Resource Access
      BYA.Mfg.SCM.Svc.WCF.DataAccess
    Service Interface
      BYA.Mfg.SCM.Svc.WCF.DataContracts
      BYA.Mfg.SCM.Svc.WCF.FaultContracts
      BYA.Mfg.SCM.Svc.WCF.MessageContracts
      BYA.Mfg.SCM.Svc.WCF.ServiceContracts
      BYA.Mfg.SCM.Svc.WCF.ServiceImplementation
  Tests 
```

# sql - 显示大型结果集

> ID：821506
> 
> 赞同：2
> 
> 时间：2009-05-04T19:16:15.767
> 
> 标签：sql, sqlite, dataset, wxwidgets

这是我的问题：我需要存储*大量*日志消息，并且认为将其保存在 SQLite3 数据库中以便能够轻松搜索和过滤它会很聪明。

我将在标准列表小部件中显示日志消息（使用 wxWidgets）。该列表将有几列，并且可以由用户进行排序和过滤。

现在，我不确定处理这个问题的最佳方法是什么。我正在考虑一些可能的解决方案：

1.  将所有消息读入内存。当有新的或更改的日志消息（在列表中的随机位置）时，必须刷新整个列表。当用户想要过滤列表或在不同的列上排序时也是如此。
2.  将所有 ID 读入一个数组并按需检索完整的日志消息（当用户滚动列表以使其可见时）。
3.  使用 SQL 接口按需获取结果，使用 SQL 选择所需的确切子结果。

但实际上，我只是不习惯处理这种问题，所以任何提示都值得赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T19:25:54.793

如何使用分页？

```
SELECT *
FROM logs
WHERE ...
ORDER BY ...
LIMIT offset, count 
```

其中 offset 和 count 是您可以选择的值。您可以使用它来获取任意数量的日志条目。然后添加一个下一步按钮以允许用户查看下一页条目。结合过滤和排序的能力，日志搜索再简单不过了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:48:13.680

开始写这篇文章作为对 Nadia 答案的评论，但我开始漫无目的，它太长了:)

请记住，随着日志条目的数量变得非常大，滚动条变得毫无用处。滚动中最微小的移动最终会在列表中剧烈移动。这使得用户用于搜索列表变得不切实际。

想想为什么用户实际上会浏览这些条目并围绕它进行设计。非常大的列表不仅难以在代码中使用，而且用户也难以使用。我可能会给他们一些过滤条件和分页结果。

# .net - 每次添加新行时都应该调用 AcceptChanges() 吗？

> ID：821507
> 
> 赞同：3
> 
> 时间：2009-05-04T19:16:16.033
> 
> 标签：.net, optimization, datatable, dataset

推荐哪个

```
while (reader.Read())  
{
    table.Rows.Add(
            new object[] { reader[0], reader[1], reader[2], reader[3] }
    );  
    table.AcceptChanges();
} 
```

或者

```
while (reader.Read())  
{
    table.Rows.Add(
            new object[] { reader[0], reader[1], reader[2], reader[3] }
    );  
}  
table.AcceptChanges(); 
```

注意 table.AcceptChanges 的放置位置。

* * *

**编辑 1**

这是代码块：

```
protected void Page_Load(object sender, EventArgs e)
{
    IDataReader reader = cust.GetCustomerOrderSummary("99999");
    using (DataSet ds = new DataSet())
    {
        using (DataTable table =
                new DataTable { TableName = "OrderSummary" })
        {
            DataColumn idColumn = table.Columns.Add("number", typeof(int));
            table.Columns.Add("name", typeof(string));
            table.Columns.Add("quantity", typeof(int));
            table.Columns.Add("prev_quantity", typeof(int));
            table.PrimaryKey = new DataColumn[] { idColumn };
            while (reader.Read())
            {
                table.Rows.Add(
                  new object[]{ reader[0], reader[1], reader[2], reader[3] }
                );
                table.AcceptChanges();
            }
            ds.Tables.Add(table);
            rptCustomerOrder report =
                    new rptCustomerOrder { DataSource = ds };
            ReportViewer1.Report = report;
        }
    }
} 
```

* * *

**编辑 2在**[这里](http://msdn.microsoft.com/en-us/library/system.data.dataset.acceptchanges.aspx)
阅读 MSDN 文章后，我决定根据以下语句（来自文章）将 AcceptChanges() 放在循环之外：

> 在 DataTable 级别调用 AcceptChanges 会导致调用每个 DataRow 的 AcceptChanges 方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T12:13:02.400

添加新行后调用`AcceptChanges`实际上会将`DataRowState`新添加`DataRow`的从`Added`变为`Unchanged`。如果你继续使用它，你可能会*失去对*新添加的行的跟踪以及在持久性时的跟踪。*ADO.NET*将无法识别需要插入数据库的行。所以明智地选择这个选项，你甚至可能不需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T19:47:33.337

你确定你需要调用 AcceptChanges 方法吗？我做过类似的，我从来没有使用过它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:20:55.630

这实际上取决于您的表对象是什么以及 AcceptChanges 正在做什么。一般来说，如果您只能调用一次 AcceptChanges 并让它完成工作，我会说第二种方法更有效。

同样，这通常是因为我不知道您实际处理的是什么对象。但是在循环内做事通常更昂贵，因为你这样做的频率更高，但你的表对象可能需要你接受每一行之间的变化，在这种情况下你别无选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T19:22:00.230

我假设 AcceptChanges 是您实际提交数据的时间？

在这种情况下，第一种方法比第二种方法效率低，但更安全，因为如果您的读取在某些时候被中断，您丢失数据的可能性较小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-14T14:00:51.303

您正在表上调用接受更改，但请注意，您可以在每一行上调用 acceptchanges，因此只会影响该行。

dsDataset.Tables["OrderSummary"].Rows[currentrow].acceptchanges();

这真的取决于你想要做什么。您可以在表格的最后更新所有内容，也可以在每一行上单独更新。

另请记住，调用 table acceptchanges 会将数据行状态更改为未更改。因此，如果您尝试更新数据库（SQL、Access 等），那么这可能会干扰数据库更新。

从您的示例中可以看出，您仅将此表用于报告，因此完全不确定为什么需要更新数据行状态。不确定报告是否关心。据我所知，acceptchanges/datarowstate 只涉及更新后端。

# c# - 在.net 中编译成.exe 的评论？

> ID：821510
> 
> 赞同：17
> 
> 时间：2009-05-04T19:17:19.027
> 
> 标签：c#, .net, compiler-construction, comments

我知道您可以使用 .net 反射器来查看使用 .net 创建的代码，但如果我在评论中添加一些内容以供我个人提醒，那也是在 exe 中编译的。

我不打算发布我的应用程序的源代码，我知道 100% 安全的赌注是删除我不想删除的所有内容，但我只是想知道是否有人可以对我的评论进行逆向工程。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-04T19:20:38.910

编译器会忽略注释。它们不会被放入输出可执行文件中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-04T19:19:35.883

不，注释不在编译的可执行文件中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-04T19:29:28.420

不，您的代码中不包含注释；但是，类、方法和成员是。因此，如果您使用自记录代码，一些逻辑将是可辨别的。如果您担心任何人反映您交付的代码中的信息，我建议使用混淆。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-04T20:04:00.740

正如另一个人所说：评论没有被编译。但是您可以在 C# 项目设置中启用 xml 文档创建。如果您随后使用 MS 文档语法（/// <summary>...</summary> 等），将生成一个额外的 .xml 文件。

如果 Reflector 加载程序集，它还会查找 .xml 文档文件并使用 XML 文件中的文档装饰声明！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-04T19:24:24.593

如果您想自己检查其中的内容，请使用“字符串”实用程序（Cygwin 版本很好）并在您的代码上运行它。它会打印出二进制文件中所有清晰的字符串。不，正如其他人所说，没有评论通过。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T19:24:31.690

不用担心，编译器会忽略注释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-01T02:51:25.417

请注意，PDB 文件可能包含此信息。

查看：[pdb 文件包含多少信息？（C#/.NET）](https://stackoverflow.com/questions/596512/how-much-information-does-pdb-files-contain-c-net)

# javascript - 使用 JavaScript 操作会话历史

> ID：821511
> 
> 赞同：1
> 
> 时间：2009-05-04T19:17:25.687
> 
> 标签：javascript, url, browser, browser-history

[出于这个原因](https://stackoverflow.com/questions/821359/reload-an-iframe-without-adding-to-the-history)，我需要删除最新的浏览器历史记录条目，但也欢迎 JS 公开的任何其他操作（添加/删除）当前页面/选项卡的历史记录条目的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:26:36.833

我非常怀疑有没有办法。出于安全原因，该`window.history`对象提供对浏览历史记录的只读访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:27:51.590

你可以在 IFrame 上使用 location.replace 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:29:33.130

使用 javascript 无法做到这一点（在正常参数范围内，您可以尝试利用浏览器错误等，但我怀疑这是这里的想法）

# javascript - 检测图像何时加载的独立于浏览器的方法

> ID：821516
> 
> 赞同：56
> 
> 时间：2009-05-04T19:17:54.530
> 
> 标签：javascript, dom

在IE中，可以onreadystatechange。有onload，但我读到了[可怕的东西](https://stackoverflow.com/questions/198892/img-onload-doesnt-work-well-in-ie7)。jQuery 用“ready”很好地包装了 DOM 的加载事件。似乎我只是不知道另一个不错的库的图像加载实现。

上下文是我正在动态生成图像（通过服务器回调），这可能需要一些时间下载。在我的 IE-only 代码中，我设置了 img 元素的 src，然后当 onreadystatechange 事件以“完成”状态触发时，我将它添加到 DOM 以便用户看到它。

我会对“本机”JavaScript 解决方案或指向可以完成工作的库的指针感到满意。那里有很多图书馆，我敢肯定这是我不知道正确的图书馆的情况。也就是说，我们已经是 jQuery 用户，所以我不急于添加一个非常大的库来获得这个功能。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2010-06-10T15:52:17.670

**注意：**我在 2010 年写了这篇文章，当时流行的浏览器是 IE 8/9 beta、Firefox 3.x 和 Chrome 4.x。请将此仅用于研究目的，我怀疑您可以将其复制/粘贴到现代浏览器中并使其正常工作。

**警告：**现在是 2017 年，我仍然会时不时地获得积分，请仅将其用于研究目的。我目前不知道如何检测图像加载状态，但可能有比这更优雅的方法......至少我真的希望有。我强烈建议不要在没有更多研究的情况下在生产环境中使用我的代码。

**警告第二部分 Electric Boogaloo：**现在是 2019 年，大多数 jQuery 功能现在都内置在 vanilla JS 中。如果您仍在使用它，可能是时候停下来考虑前往[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript)并阅读 vanilla JS 必须提供的一些新的和有趣的东西。

* * *

我参加这个聚会有点晚了，也许这个答案会帮助别人......

如果您使用的是 jQuery，请不要使用股票事件处理程序（onclick/onmouseover/etc），实际上完全停止使用它们。使用他们在[API](http://api.jquery.com/category/events/)中提供的事件方法。

* * *

这将在图像附加到正文之前发出警报，因为当图像加载到内存时会触发加载事件。它正在做你告诉它的事情：使用 test.jpg 的 src 创建一个图像，当 test.jpg 加载时会发出警报，然后将其附加到正文。

```
var img = $('<img src="test.jpg" />');
img.load(function() {
    alert('Image Loaded');
});
$('body').append(img); 
```

* * *

这将提醒，在图像插入正文后，再次执行您告诉它的操作：创建图像，设置事件（未设置 src，因此尚未加载），将图像附加到正文（仍然没有 src），现在设置 src... 现在图像已加载，因此事件被触发。

```
var img = $('<img />');
img.load(function() {
    alert('Image Loaded');
});
$('body').append(img);
$img.attr('src','test.jpg'); 
```

* * *

当然，您也可以添加错误处理程序并使用 bind() 合并一堆事件。

```
var img = $('<img />');
img.bind({
    load: function() {
        alert('Image loaded.');
    },
    error: function() {
        alert('Error thrown, image didn\'t load, probably a 404.');
    }
});
$('body').append(img);
img.attr('src','test.jpg'); 
```

* * *

根据@ChrisKempen 的要求...

这是确定加载 DOM 后图像是否损坏的非事件驱动方式。此代码是 StereoChrome 的一篇文章代码的衍生代码，该文章使用[naturalWidth](http://stereochro.me/ideas/detecting-broken-images-js)、naturalHeight 和 complete 属性来确定图像是否存在。

```
$('img').each(function() {
    if (this.naturalWidth === 0 || this.naturalHeight === 0 || this.complete === false) {
        alert('broken image');
    }
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-04T19:52:54.883

[**根据 W3C 规范**](http://www.w3.org/TR/REC-html40/interact/scripts.html)，*只有*BODY 和 FRAMESET 元素提供要附加的“onload”事件。一些浏览器无论如何都支持它，但请注意它不是实现 W3C 规范所必需的。

可能与此讨论相关的内容，虽然不一定是您需要的答案，但此讨论是：

> [**当图像在缓存中时，Internet Explorer 上的 Image.onload 事件不会触发**](http://code.google.com/p/google-web-toolkit/issues/detail?id=863)

* * *

其他*可能与*您的需求相关的信息（尽管可能不是）是有关支持*任何动态加载的*DOM 元素的合成“onload”事件的信息：

[**如何确定是否已将动态创建的 DOM 元素添加到 DOM？**](https://stackoverflow.com/questions/220188/how-can-i-determine-if-a-dynamically-created-dom-element-has-been-added-to-the-do)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-04T19:43:38.137

我发现唯一可靠的方法是像这样在客户端完成这一切......

```
var img = new Image();
img.onload = function() {
  alert('Done!');
}
img.src = '/images/myImage.jpg'; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T19:47:25.473

我认为`onload`应该可以正常工作。您必须为图像生成标记，还是可以静态添加它们？如果是后者，我建议如下：

```
<img src="foo.png" class="classNeededToHideImage" onload="makeVisible(this)"> 
```

或者，您可以使用`window.onload`使所有图像一次可见 -`window.onload`在所有外部资源完成加载后触发。

如果您想动态添加图像，您首先必须等待 DOM 准备好进行修改，即使用 jQuery 或为本身不支持它的浏览器实现您自己的 DOMContentLoaded hack。

然后，您创建图像对象，分配`onload`侦听器以使它们可见和/或将它们添加到文档中。

更好（但稍微复杂一点）是在脚本执行时立即创建并开始加载图像。在 DOMContentLoaded 上，您必须检查每个图像`complete`以确定是立即将它们添加到文档中还是等待图像的`onload`侦听器触发。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-12T19:43:06.837

好的，我将尝试在这里总结各种部分答案（包括我的）。

答案似乎是使用 onload，尽管根据标准没有正式要求，但它“得到了广泛支持”。请注意，特别是对于 IE，您必须在设置 src 属性之前设置 onLoad，否则从缓存加载图像时它可能不会触发 onload。在任何情况下，这似乎都是最佳实践：在开始触发事件之前设置事件处理程序。在不支持 onload 的情况下，应该假设该功能根本不可用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T19:42:18.483

如果我在 javascript 中没有记错，则图像标签具有事件 onload 和 onerror

这是我为隐藏损坏的图像所做的一段有趣的代码

在样式标签中

```
img.failed{
   display:none;
} 
```

使用 img onerror 我有一段 javascript 执行 this.className=failed 并且如果出错它会隐藏图像

但是我可能误解了你的目标

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-06T12:40:34.080

看起来答案是在 IE 中使用 onreadystatechange，在其他浏览器中使用 onLoad。如果两者都不可用，请执行其他操作。onLoad 会更好，但 IE 在从缓存加载图像时不会触发它，如下面的答案之一所述。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-04T03:49:42.257

**HTML**

```
<img id="myimage" src="http://farm4.static.flickr.com/3106/2819995451_23db3f25fe_t.jpg"/>​ 
```

**脚本**

```
setTimeout(function(){
    $('#myimage').attr('src','http://cdn.redmondpie.com/wp-content/uploads/2011/05/canarylogo.png').load(function(){
        alert('Main Image Loaded');

        $('#myimage').attr('src','image.jpg').bind({
            load: function(){
                alert('Image loaded.');
            },
            error: function(){
                alert('Image not loaded.');
            }
        });
    });
},1000); 
```

**JS小提琴**

[http://jsfiddle.net/gerst20051/sLge3/](http://jsfiddle.net/gerst20051/sLge3/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-02T03:38:47.373

使用数据 URI 是可行的方法。然而，使用 SVG 而不是 GIF 提供了更大的灵活性。您可以快速更改大小。只需在 JavaScript 控制台中运行它：

```
var width = 1;
var height = 1;
'data:image/svg+xml;base64,' +
btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="${width}" height="${height}"/>`); 
```

示例输出：

```
data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxIiBoZWlnaHQ9IjEiLz4= 
```

我拼凑[了一个快速的 CodePen 实用程序来创建具有任意尺寸的透明 SVG](https://codepen.io/Paul-NamePros/pen/mMEXPZ)。它非常基本，因此如果您想为图像添加颜色或其他功能，则需要对其进行修改。

与单像素图像相比，最大的优势在于它允许保留纵横比。这对于动态大小的图像很重要，因为布局通常在`src`更改真实图像之前执行（如果这是预期目的）。在 src 更改之前，图像将是方形的，这可能是不可取的。

# asp.net-mvc - 如何将具有 FK 关系（EF）的查询结果传递给视图

> ID：821522
> 
> 赞同：1
> 
> 时间：2009-05-04T19:18:58.383
> 
> 标签：asp.net-mvc, entity-framework

我无法在 ASP.NET MVC 中弄清楚这个简单的事情：

我有两张桌子：

```
 Customer:
    CustomerID
    FirstName
    LastName
    AddressID
    AddressTemporaryID

  Address:
    AddressID
    Street
    City 
```

我在数据库中设置了我的关系（FK）并尝试使用实体框架。我的导航属性（FK）被命名为 Addresses 和 Addresses1。我创建了存储库：

```
 public interface ICustomertRepository {
    IQueryable<Customer> FindAllCustomers();
  }

  public class CustomerRepository : MvcApplication2.Models.ICustomerRepository {
    public IQueryable<Customer> FindAllCustomers() {
      return db.Customers;
    }
  } 
```

我的 HomeController 有这个：

```
 public ActionResult Index()
  {
    var query = customerRepository.FindAllCustomers();
    return View(query);
  } 
```

但是如何访问视图中的值？我可以在模型中看到带有 Intellisense 的 item.Adresses.Street/item.Adresses1.Street 但是当我尝试它时，我得到 NullReferenceException：

```
<% foreach (var item in Model)
   { %>
<tr>
    <td>
        <%= Html.Encode(item.FirstName) %>
    </td>
    <td>
        <%= Html.Encode(item.Surname) %>
    </td>
    <td>
        <%= Html.Encode(item.Adresses.Street) %>
    </td>
    <td>
        <%= Html.Encode(item.Adresses1.Street) %>
    </td>
</tr>
<% } %> 
```

我完全迷路了。我试图到处搜索，但没有任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T19:29:33.693

你确定吗

```
 var query = customerRepository.FindAllCustomers(); 
```

工作正常吗？您是否在控制器端检查过查询实际上已填充？您应该编写一些单元测试，但至少在该行上设置一个断点，并查看查询是否正确填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T19:35:08.950

EF 不执行自动延迟加载。

您需要手动加载相关对象（对于像您的查询这样的多个结果集不可行），或者指示 EF 包含整个查询所需的属性：

```
public IQueryable<Customer> FindAllCustomers() {
    return db.Customers.Include("Adresses").Include("Adresses1");
  } 
```

[您可以在这篇文章](http://blogs.msdn.com/adonet/archive/2008/10/07/migrating-from-linq-to-sql-to-entity-framework-eager-loading.aspx)中找到 EF 和 LinqtoSQL（如果您习惯的话）之间的比较。无论如何，它至少会向您展示 EF 语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T17:29:13.567

实际上，在您的情况下，`AddressId`和`Address1Id`是表中的 FK：

虽然实际引用（地址和地址 1）不会加载，除非您执行`Include()`或显式`AddressReference.Load().`

实际的 FK 值被加载到 EntityReference 的 EntityKey 中，即

```
addressID = item.AddressReference.EntityKey.EntityKeyValues[0].Value; 
```

希望这有助于亚历克斯

# installation - Adobe AIR 安装程序本身如何需要 AIR？

> ID：821531
> 
> 赞同：4
> 
> 时间：2009-05-04T19:19:57.083
> 
> 标签：installation, adobe, air

我下载了 AIR_Win_installer_files.zip 文件以进行边车 AIR 安装。我创建了一个目录（AIR_bundle）并将下载的文件解压缩到该目录中。在那个目录中，我最终得到：

```
Adobe AIR Installer.exe
Adobe AIR/ 
```

其中后者是包含许多其他文件的子文件夹。在命令行上，我执行仅传递 -silent 选项的 exe 文件，我得到一个错误对话框，上面写着：

> 此应用程序需要一个无法找到的 Adob​​e AIR 版本。[请从http://www.adobe.com/getair](http://www.adobe.com/getair)下载最新版本的运行时 ，或联系应用程序作者获取更新版本。

AIR 安装程序本身如何需要 AIR？我首先尝试安装的是 AIR。

注意：这**不是**标准的 AIR 安装程序。如果您从 Adob​​e 获得特殊许可，可以将 AIR 与您的应用程序一起分发，那么这是您可以使用的特殊安装程序。

仅供参考：我一直在参考“ADOBE AIR 1.5 Runtime Redistribution Instructions”文档，其中部分内容是：

# 静默安装

...
要静默运行 Adob​​e AIR 安装程序，请使用以下命令行选项启动 Adob​​e AIR 安装程序：

`-silent {-eulaAccepted ( -location ) -desktopShortcut -programMenu} path`

...

要仅安装或更新运行时，请使用该`-silent`选项而不指定路径或任何其他选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-10-16T10:51:56.577

有关原因/修复，请参阅 Adob​​e 的此支持 KB：

[http://forums.adobe.com/thread/764383?tstart=60](http://forums.adobe.com/thread/764383?tstart=60)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-28T09:50:13.027

如果您需要安装一个空中应用程序，命令字符串应该是这样的。

```
AdobeAIRInstaller.exe -silent -eulaAccepted -desktopShortcut "desktop_mv_1.1.1.air" 
```

这是使用桌面快捷方式静默安装 Chatter。

AdobeAIRInstaller.exe 会安装空中应用程序以及 AIR 运行时（如果尚未安装）。据我所知，它不只是安装 AIR。

[我从 adobe Adob​​e Runtime Distribution](http://www.adobe.com/products/air/runtime_distribution1.html)下载了 AIR 安装程序文件，这让我得到了所需的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-09T15:25:29.390

它需要您安装 Air Framework。安装程序清楚地使用 Air Framework 编写。所以你应该先下载并安装 Air Framework 才能运行它。安装程序文件只是一个安装程序，不包含 Air Framework。

在运行 Air Application Installer 之前，您还需要为您希望分发应用程序的客户端安装 Air Framework。

# vb6 - 确定 vb6 dll 的结球如何捆绑在一起

> ID：821533
> 
> 赞同：0
> 
> 时间：2009-05-04T19:20:15.243
> 
> 标签：vb6, visual-sourcesafe

我有点吓坏了，因为我收到了这个 vb6 dll 的结球。

似乎以前的开发人员将连接字符串硬编码到 dll 中。开发人员大约在两年前退出了，我没有任何文档，而且我在 VSS 数据库中有几个不同的分支。服务器已移动，密码已更改。

我的第一个目标是尝试让这个装置启动并运行。我相信我必须首先重新编译所有 dll 才能使新的 dll 更改生效。我发现了一个问题，其中 dll 名称似乎与“项目引用”对话框中的引用匹配，但项目引用对话框仍然显示引用丢失。有谁知道如何解决这个问题？

这段代码也在一个旧的 VSS 数据库中，我想将它迁移到我们的 TFS 源代码控制服务器中。是否有一种简单的方法可以查询 VSS 服务器以查找开发人员所做的最新更改，以便我确信我拥有最新版本？分支似乎没有任何合乎逻辑的名称。

看来我已经发现有人早期尝试进行 n 层开发，但是该架构伤害了我的大脑。一层看起来有大约 20 种不同的方式将记录集转换为集合、数组或仅返回记录集，并且大多数“业务逻辑”看起来都在存储过程中。

我想我明白为什么在我之前和之后的开发人员从未尝试重新编译这个项目......我不敢相信他有幸在近两年内侥幸逃脱，也许这就是他退出的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:53:31.030

所以我需要对 dll 进行 regsvr32 ... oy 我刚刚了解了 dll 地狱是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T22:55:02.247

> 我发现了一个问题，其中 dll 名称似乎与“项目引用”对话框中的引用匹配，但项目引用对话框仍然显示引用丢失。

我想我至少可以回答这个问题。很可能，该 dll 没有以二进制兼容性编译，或者没有保留原始 dll 以确保兼容性。无需过多介绍，您将需要获取（当前工作的）dll，在项目中设置二进制兼容性，并指向（当前工作的）dll 以获得二进制兼容性。您重新编译的 dll 应该会正确显示。

# java - 参数化类型的空集合上的 Java 迭代器

> ID：821536
> 
> 赞同：32
> 
> 时间：2009-05-04T19:20:35.460
> 
> 标签：java, collections, iterator

在 Java 中，我需要从我的方法中返回一个迭代器。我的数据来自另一个对象，它通常可以给我一个迭代器，所以我可以返回它，但在某些情况下，基础数据为空。为了保持一致性，我想在这种情况下返回一个“空”迭代器，这样我的调用者就不必测试 null。

我想写一些类似的东西：

```
public Iterator<Foo> iterator() {
   if (underlyingData != null) {
      return underlyingData.iterator();  // works
   } else {
      return Collections.emptyList().iterator();  // compiler error
   }
} 
```

但是 Java 编译器抱怨返回`Iterator<Object>`而不是`Iterator<Foo>`. 投射到`(Iterator<Foo>)`也不起作用。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-05-04T19:24:38.663

您可以通过以下语法获取 Foo 类型的空列表：

```
return Collections.<Foo>emptyList().iterator(); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-05-17T16:07:49.977

Java 7 已经推出很长时间了。除非您正在为以前的 Java 版本进行开发，否则您将返回一个空迭代器，如下所示：

```
return Collections.emptyIterator(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-04T19:30:54.983

我会更多地沿着

```
public Iterator<Foo> iterator() {
    if (underlyingData == null)
        return Collections.<Foo> emptyList().iterator();
    return underlyingData.iterator();
} 
```

只是，处理特殊情况并返回，然后处理正常情况。但我的主要观点是，你可以避免分配

```
Collections.<Foo> emptyList().iterator(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-11-21T17:49:22.673

的烦恼是我们在[google-collections](http://google-collections.googlecode.com)`Collections.<Foo>emptyList().iterator()`中提供的主要原因。在像您这样的情况下，不需要类型参数。`Iterators.emptyIterator()`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-04T20:04:31.347

我想这表明 Java 类型推断并非在所有情况下都有效，并且三元运算符并不总是等价于明显等价的 if-else 构造。

我也想声明**避免`null`**。还要避免传递`Iterator`s ，因为它们有奇怪的状态行为（prefer `Iterable`）。但是，假设你有一个合法的、非过早的理由这样做，我首选的写作方式是

```
public Iterator<Foo> iterator() {
    return getUnderlyingData().iterator();
}
private List<Foo> getUnderlyingData() {
    if (underlyingData == null) {
        return Collections.emptyList();
    } else {
        return underlyingData;
    }
} 
```

IMO，如果可以推断出可推断的类型信息，最好不要插入（即使它使您的代码更长）。

你几乎肯定会不止一次地这样做，所以插入一个`getUnderlyingData`方法而不是仅仅声明一个局部变量。

您正在调用`iterator`这两个结果，所以不要重复自己。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T19:25:44.280

对不起，我想通了。您需要使用赋值，以便编译器可以确定参数化类型。

```
public Iterator<Foo> iterator() {
   if (underlyingData != null) {
      return underlyingData.iterator();
   } else {
      List<Foo> empty = Collections.emptyList();  // param type inference
      return empty.iterator();
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T15:09:56.780

```
public  final class EmptyIterator{

    public static Iterator iterator(){
        return new Empty();
    }

    private static class Empty implements Iterator {
        public boolean hasNext(){
            return false;
        }
        public Object next(){
            throw new NoSuchElementException();
        }
        public void remove(){
        }
    }
} 
```

# iphone - 如何不让用户选择某个 TabBarItem

> ID：821551
> 
> 赞同：0
> 
> 时间：2009-05-04T19:23:09.027
> 
> 标签：iphone, cocoa-touch

当用户想要选择某个 UITabBar 项目时，我想首先检查他是否可以选择它。如果他不能，则显示警报。

当用户选择某个项目时，会引发一个委托方法，但当项目被禁用时它不起作用。

实现这一目标的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-12T12:39:14.810

这不是好的 UI 设计实践。如果一个按钮被禁用，它根本不应该响应用户交互。如果它没有被禁用，它应该做一些事情。唯一有理由使用显示错误/警告而不是执行所需操作的非禁用按钮的情况是，如果只能在最后一刻确定该操作无法执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T14:17:08.660

为什么按钮被禁用？您能否不只是检查他们是否每次都可以访问该按钮而不禁用该按钮？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-15T01:13:08.990

您需要使用来自 UITabBarControllerDelegate 的委托方法：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

在该方法中，通过查看 UITabBarController 的 selectedIndex 来检查用户尝试选择的内容。或者，您可以获取对 UITabBar 本身的引用并检查其属性：

```
UITabBar* tabBar = [tabBarController.view viewWithKindOfClass:[UITabBar class]]; 
```

如果您不希望选项卡可选择，则触发警报并分配一个整数 tabBarController.selectedIndex 以将其更改为远离此选项卡。

警告：正如上面的海报所示，这不是与其他 iPhone 应用程序一致的 UI 设计实践。

# wpf - 双击 ListBox 项以打开浏览器

> ID：821564
> 
> 赞同：42
> 
> 时间：2009-05-04T19:25:26.730
> 
> 标签：wpf, binding, listbox, listboxitem

我的`ListBox`wpf 窗口中有一个绑定到`ObervableCollection`. `ListBox`如果有人单击（就像链接）的元素，我想打开浏览器。有人可以告诉我该怎么做吗？我发现了一些带有 listboxviews 的东西，它只能以这种方式工作还是仅使用`ListBox`?

你的

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-05-04T19:33:29.737

您可以向[ListBox.ItemContainerStyle](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)添加样式，并在那里添加[EventSetter](http://msdn.microsoft.com/en-us/library/system.windows.eventsetter.aspx)：

```
<ListBox>
    ....
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
            <EventSetter Event="MouseDoubleClick" Handler="ListBoxItem_MouseDoubleClick"/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

ListBoxItem_MouseDoubleClick 是您代码中的一个方法，具有正确的[MouseDoubleClick](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.mousedoubleclick.aspx)签名。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-19T14:45:09.617

我想解决这个问题，而不需要在代码隐藏中处理 listBoxItem 双击事件，并且我不想重写 listBoxItem 样式（或首先定义要重写的样式）。我想在双击 listBox 时触发一个命令。

我像这样创建了一个附加属性（代码非常具体，但您可以根据需要对其进行概括）：

```
public class ControlItemDoubleClick : DependencyObject {
public ControlItemDoubleClick()
{

}

public static readonly DependencyProperty ItemsDoubleClickProperty =
    DependencyProperty.RegisterAttached("ItemsDoubleClick",
    typeof(bool), typeof(Binding));

public static void SetItemsDoubleClick(ItemsControl element, bool value)
{
    element.SetValue(ItemsDoubleClickProperty, value);

    if (value)
    {
        element.PreviewMouseDoubleClick += new MouseButtonEventHandler(element_PreviewMouseDoubleClick);
    }
}

static void element_PreviewMouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    ItemsControl control = sender as ItemsControl;

    foreach (InputBinding b in control.InputBindings)
    {
        if (!(b is MouseBinding))
        {
            continue;
        }

        if (b.Gesture != null
            && b.Gesture is MouseGesture
            && ((MouseGesture)b.Gesture).MouseAction == MouseAction.LeftDoubleClick
            && b.Command.CanExecute(null))
        {
            b.Command.Execute(null);
            e.Handled = true;
        }
    }
}

public static bool GetItemsDoubleClick(ItemsControl element)
{
    return (bool)element.GetValue(ItemsDoubleClickProperty);
} 
```

}

然后我用附加的属性和我的目标命令声明我的 ListBox：

```
<ListBox ItemsSource="{Binding SomeItems}"
     myStuff:ControlItemDoubleClick.ItemsDoubleClick="true">
<ListBox.InputBindings>
    <MouseBinding MouseAction="LeftDoubleClick" Command="MyCommand"/>
</ListBox.InputBindings>
</ListBox> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-10T14:07:02.907

我已经更新了 AndrewS 解决方案，以解决双击列表框中任意位置时触发执行命令的问题：

```
public class ControlDoubleClick : DependencyObject
{
    public static readonly DependencyProperty CommandProperty =
        DependencyProperty.RegisterAttached("Command", typeof(ICommand), typeof(ControlDoubleClick), new PropertyMetadata(OnChangedCommand));

    public static ICommand GetCommand(Control target)
    {
        return (ICommand)target.GetValue(CommandProperty);
    }

    public static void SetCommand(Control target, ICommand value)
    {
        target.SetValue(CommandProperty, value);
    }

    private static void OnChangedCommand(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        Control control = d as Control;
        control.PreviewMouseDoubleClick += new MouseButtonEventHandler(Element_PreviewMouseDoubleClick);
    }

    private static void Element_PreviewMouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        Control control = sender as Control;
        ICommand command = GetCommand(control);

        if (command.CanExecute(null))
        {
            command.Execute(null);
            e.Handled = true;
        }
    }
} 
```

在 XAML 中，ListBox 的声明是：

```
<ListBox ItemsSource="{Binding MyItemsSource, Mode=OneWay}">                    
      <ListBox.ItemContainerStyle>
                    <Style>                            
                        <Setter Property="behaviours:ControlDoubleClick.Command" Value="{Binding DataContext.MyCommand,
                                    RelativeSource={RelativeSource FindAncestor, 
                                    AncestorType={x:Type UserControl}}}"/>
                     </Style>  
     </ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-05T15:04:39.297

我使用了表达式 SDK 4.0

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"

<i:Interaction.Triggers>
  <i:EventTrigger EventName="MouseDoubleClick" SourceName="CaravanasListBox">
     <i:InvokeCommandAction Command="{Binding AccionesToolbarCommand}" CommandParameter="{x:Static local:OpcionesBarra.MostrarDetalle}" />
   </i:EventTrigger>
</i:Interaction.Triggers> 
```

贾米尔·G。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-18T10:49:49.977

`ListBox`这是一种在和上都完成的行为`ListView`。这是基于 Andrew S. 和 Vadim Tofan 的回答，他们做得很好！

```
public class ItemDoubleClickBehavior : Behavior<ListBox>
{
    #region Properties
    MouseButtonEventHandler Handler;
    #endregion

    #region Methods

    protected override void OnAttached()
    {
        base.OnAttached();

        AssociatedObject.PreviewMouseDoubleClick += Handler = (s, e) =>
        {
            e.Handled = true;
            if (!(e.OriginalSource is DependencyObject source)) return;

            ListBoxItem sourceItem = source is ListBoxItem ? (ListBoxItem)source : 
                source.FindParent<ListBoxItem>();

            if (sourceItem == null) return;

            foreach (var binding in AssociatedObject.InputBindings.OfType<MouseBinding>())
            {
                if (binding.MouseAction != MouseAction.LeftDoubleClick) continue;

                ICommand command = binding.Command;
                object parameter = binding.CommandParameter;

                if (command.CanExecute(parameter))
                    command.Execute(parameter);
            }
        };
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.PreviewMouseDoubleClick -= Handler;
    }

    #endregion
} 
```

这是用于查找父级的扩展类。

```
public static class UIHelper
{
    public static T FindParent<T>(this DependencyObject child, bool debug = false) where T : DependencyObject
    {
        DependencyObject parentObject = VisualTreeHelper.GetParent(child);

        //we've reached the end of the tree
        if (parentObject == null) return null;

        //check if the parent matches the type we're looking for
        if (parentObject is T parent)
            return parent;
        else
            return FindParent<T>(parentObject);
    }
} 
```

用法：

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
xmlns:coreBehaviors="{{Your Behavior Namespace}}"

<ListView AllowDrop="True" ItemsSource="{Binding Data}">
    <i:Interaction.Behaviors>
       <coreBehaviors:ItemDoubleClickBehavior/>
    </i:Interaction.Behaviors>

    <ListBox.InputBindings>
       <MouseBinding MouseAction="LeftDoubleClick" Command="{Binding YourCommand}"/>
    </ListBox.InputBindings>
</ListView> 
```

# linq-to-sql - C# Linq-to-Sql - 是否应使用 IDisposable 处理 DataContext

> ID：821574
> 
> 赞同：28
> 
> 时间：2009-05-04T19:27:26.100
> 
> 标签：linq-to-sql, datacontext, idisposable

我有几种处理 DB 的方法，它们都从调用开始

```
FaierDbDataContext db = new FaierDbDataContext(); 
```

既然 Linq2Sql DataContext 对象实现了 IDisposable，这应该和“using”一起使用吗？

```
using (FaierDbDataContext db = new FaierDbDataContext()) {
    // use db here
} 
```

以一种或另一种方式使用它有什么影响？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-04T19:30:52.223

> 与大多数实现 IDisposable 的类型不同，DataContext 并不真正需要处理 - 至少在大多数情况下不需要。我向马特沃伦询问了这个设计决定，这是他的回答：
> 
> 我们实施 IDisposable 有几个原因：
> 
> *   如果应用程序逻辑需要在预期使用或有效 DataContext 之后保留实体，则可以通过调用 Dispose 来强制执行该合同。该实体中的延迟加载程序仍将引用 DataContext，并且如果任何代码尝试导航延迟属性，则将尝试使用它。这些尝试都会失败。Dispose 还强制 DataContext 转储其物化实体的缓存，以便单个缓存实体不会意外地使通过该 DataContext 物化的所有实体保持活动状态，否则会导致看似内存泄漏的情况。
> *   自动关闭 DataContext 连接的逻辑可能会被欺骗，使连接保持打开状态。DataContext 依赖于枚举查询的所有结果的应用程序代码，因为到达结果集的末尾会触发连接关闭。如果应用程序使用 IEnumerable 的 MoveNext 方法而不是 C# 或 VB 中的 foreach 语句，则可以提前退出枚举。如果您的应用程序遇到连接未关闭的问题并且您怀疑自动关闭行为不起作用，您可以使用 Dispose 模式作为解决方法。

从[源头](http://csharpindepth.com/ViewNote.aspx?NoteID=89)

# .net - .NET 代码访问安全性 - 为什么它几乎从未使用过？

> ID：821579
> 
> 赞同：7
> 
> 时间：2009-05-04T19:27:46.630
> 
> 标签：.net, security

.NET[代码访问安全性](https://stackoverflow.com/questions/737995/what-is-code-access-security-in-net)已经存在了很长时间，但它似乎几乎从未在现实世界中使用过。

在我看来，这似乎是一个极好的概念，而且在 .NET 之前我从未见过。（它是否存在于其他语言中？）

我想知道是否有人在他们的项目中主动使用它，为什么？

对于那些不使用它的人，除了“我们没有安全预算”或“我没有时间学习安全”之外，还有其他正当理由吗？

最后，它在实现目标方面的效果如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-04T19:36:14.520

它使用得不多，因为对于最终开发人员（即不是为其他开发人员构建组件的开发人员），大多数时候，我们的目标是完全信任的环境，或者以这样的环境为目标是一个选项。代码将在我们的网络服务器上运行，或者在我们公司拥有的客户端机器上运行。在任何一种情况下，以完全信任的方式运行代码都不是问题——代码运行的实体信任开发人员。我知道在哪里使用 CAS 的唯一情况是在像 Sharepoint 这样的环境中，而且有一半的时间，我们只是 GAC 那些程序集以实现完全信任。

那么，为什么我们不花精力学习如何为部分信任的场景编写代码呢？好吧，老实说，完全信任是有效的，如果你不是处于执行者不能信任作者的情况，那就没有必要了，而且我的客户不会付钱给我买象牙塔建筑——他们付钱给我运行满足他们业务需求的代码。在最常见的情况下，不需要 CAS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T19:32:50.860

真正的原因是微软没有给出关于如何使用代码访问安全性的指导和最佳实践。所以它从未真正起飞。他们从来没有解释过你为什么要保护你的代码。发生异常时会发生什么，如何从中恢复。我认为这些是主要问题。

不要将此与一直提供指导和最佳实践的数据访问安全性相混淆。

# java - 在 Java 中将文本文件表示为单个单元，并匹配文本中的字符串

> ID：821583
> 
> 赞同：1
> 
> 时间：2009-05-04T19:28:23.790
> 
> 标签：java, string-matching, textmatching

如何将文本文件（或 XML 文件）表示为整个字符串，并在其中搜索（或匹配）特定字符串？

我创建了一个 BufferedReader 对象：

```
BufferedReader input =  new BufferedReader(new FileReader(aFile)); 
```

然后我尝试使用 Scanner 类及其选项来指定不同的分隔符，如下所示：

```
//Scanner scantext = new Scanner(input);
//Scanner scantext = new Scanner(input).useDelimiter("");
Scanner scantext = new Scanner(input).useDelimiter("\n");
while (scantext.hasNext()) {  ... } 
```

使用这样的 Scanner 类，我可以逐行或逐字阅读文本，但这对我没有帮助，因为有时在我想要处理的文本中，我有

```
</review><review> 
```

我想说：如果您`<review>`在文本中的任何地方找到“”，请对以下下一行（或一段文本）执行某些操作，直到找到“ `</review>`”。问题是`<review>`和`</review>`位于文本中的不同位置，有时会粘在其他文本上（因此作为分隔符的空白对我没有帮助）。

我曾想过我可能会在 Java 中使用正则表达式 API（Pattern 和 Matcher 类），但它们似乎匹配特定的字符串或行，并且我希望将文本作为一个连续的字符串（至少这是我的印象从我所读到的关于它们的信息中）。你能告诉我在这种情况下我应该使用什么结构/方法/类吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:36:49.540

不要尝试用正则表达式解析 XML；它只会导致痛苦。Java 中已经有很多~~非常好的~~ [现有](http://java.sun.com/javase/6/docs/api/javax/xml/parsers/package-summary.html) [XML](http://java.sun.com/javase/6/docs/api/org/xml/sax/package-summary.html) [API](http://java.sun.com/javase/6/docs/api/org/w3c/dom/package-summary.html)；为什么要重新发明它们？

无论如何，要在文本文件中搜索字符串，您应该：

1.  将文件加载为字符串（[示例](http://www.coderanch.com/t/403914/Java-General-beginner/java/do-read-entire-file-all)）
2.  创建一个[`Pattern`](http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html)搜索
3.  使用 a[`Matcher`](http://java.sun.com/javase/6/docs/api/java/util/regex/Matcher.html)遍历任何匹配项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:39:06.213

在我看来，好像您正在尝试使用结构化的 xml 文件，并建议您查看[javax.xml.parsers.DocumentBuilder](http://java.sun.com/j2se/1.4.2/docs/api/javax/xml/parsers/DocumentBuilder.html)或其他内置[API](http://java.sun.com/j2se/1.4.2/docs/api/org/w3c/dom/package-summary.html)来解析文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:40:40.793

使用 XML 解析器。

或者使用 xpath，就像在这个[例子](http://www.ibm.com/developerworks/library/x-javaxpathapi.html)中一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T19:40:51.497

> I have thought that I might use the regular expression API in Java (the Pattern and Matcher classes), but they seem to match a particular string or line, and I want to have the text as one continuous string

Um, does something prevent you from reading the XML file into a String, and then operating on that, using the regular expression API?

You can easily read a file into a String using e.g. [FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html) from Apache [Commons IO](http://commons.apache.org/io/): see [`readFileToString(File file, String encoding)`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString(java.io.File,%20java.lang.String%29).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-10T12:02:36.340

I also would recommend using a XML parsing API...But as you only want to do something in case of "review" tag, maybe you could use SAX better than DOM...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T05:57:42.757

I think here, we can copy individual line in the text file into a string and then try to match a substring(search string) with the string(line)

But error produces while excuting metacharacters like / or # etc..

# c# - 对于每天可能向订阅者发送 10k+ 封电子邮件的 .Net 程序，您可以分享什么样的陷阱/提示/提示？

> ID：821598
> 
> 赞同：7
> 
> 时间：2009-05-04T19:31:21.177
> 
> 标签：c#, .net, email

我知道如何编写基本的 C# 代码来发送电子邮件，但我想知道所涉及的任何更大的问题。有什么我应该避免的吗？最佳实践？ETC

谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T19:35:55.143

*   确保您使用的托管服务不会因为您发送的电子邮件数量而禁用您的帐户。
*   添加某种审核或日志记录，以便您知道您发送了哪些邮件
*   使用密件抄送将同一封邮件发送给多个收件人
*   对邮件进行排队以避免电子邮件的爆发
*   考虑分批发送邮件。例如，您通知用户有新的论坛帖子，然后不要在每次有人发帖时都向每个人发送邮件，提供每日摘要的可能性。
*   正如其他人指出的那样，使用线程发送大量邮件

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T19:35:33.210

您可能应该限制您的电子邮件，以免每单位时间发送超过 x 的邮件。您不希望客户的电子邮件服务器将您的电子邮件误认为是拒绝服务攻击。

我假设您已经处理了更大的问题，例如客户如何选择加入或取消订阅？

还要为许多无法传递的消息做好准备，并做好处理它们的准备。人们一直在更改他们的电子邮件地址，离开公司等等。不要因为日复一日地继续向相同的无法投递的地址发送电子邮件而成为客户（或大型 ISP）的敌人。

作为对您的评论的回应，快速连接的强大电子邮件服务器每秒可以轻松发送 100 封电子邮件，甚至 1,000 封电子邮件。

考虑一下您希望收件人在一天中的什么时间实际收到电子邮件。早上、下午等。根据他（不是你的）时区来思考。在下午 4 点比凌晨 4 点发送一封宣传“理想的晚餐葡萄酒”的电子邮件会更好。

使用“共享”电子邮件服务器时要格外小心。您是否与将 IP 地址列入黑名单的垃圾邮件发送者共享它？你怎么能确定明天不会改变？

您熟悉[可信电子邮件开放标准](http://www.ftc.gov/bcp/workshops/spam/Supplements/eprivacygp.pdf)吗？您越能将自己与垃圾邮件发送者区分开来，您的电子邮件营销活动就会收到越好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-04T19:37:20.600

您可能希望分批生成这些东西，因此所有内容都不会从一个连续循环中的进程发送。如果您将批次按 25 封电子邮件分组并生成 50 个线程来发送这 25 个队列，您可以更快地完成此操作。给定您的 10,000 封电子邮件，只需 8 次循环即可完成整批电子邮件。

您显然可以更改这些数字，但您需要将其拆分为发送一组电子邮件的多个线程。这将取决于您找到此过程的最佳数量。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-04T19:38:18.507

如果您还没有，我强烈建议您使用多线程！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-04T20:09:48.603

如果您要发送数千封电子邮件，我假设您将成为某些公司实体的一部分。这不是关于如何的回应，但您确实需要了解[2003 年的 CAN SPAM 法案](http://en.wikipedia.org/wiki/Can_Spam)。我的公司做群发邮件，这是我上班第一天收到的第一件事。鉴于它可以提供一些相当严厉的处罚，确保您遵守该法案的规定可以帮助避免一些问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-04T20:34:39.573

在 GameSpy，我们使用 MSMQ 对我们的电子邮件进行排队，有时有十万甚至更多。如果服务崩溃或出现问题，很容易重新启动并从中断的地方恢复。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-04T21:48:18.833

将此行添加到您的电子邮件中...

“请将 yoursendingaddress@yourdmain.com 添加到您的安全发件人列表中”

：） 哈哈

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-05T03:31:28.730

我为一家营销公司开发了一个批量电子邮件系统。我们在几个客户之间每月发送大约 1000 万笔。几点建议：

*   确保您有一个机制表单来响应选择退出和退订，包括 AOL 的“服务条款”电子邮件，其中用户将您的电子邮件分类为垃圾邮件
*   使用[Return-Path 的](http://www.returnpath.net/)垃圾邮件评分和电子邮件呈现服务，确保您的电子邮件在过滤器中看起来不像垃圾邮件
*   考虑使用第三方设备或服务（例如 StrongMail）作为卷和 ISP 的白名单

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-04T19:56:28.387

这实际上与.net没有任何关系，但是：

创建一个简单的退订方法。

确保您的主机的 IP 地址尚未[列在黑名单](http://www.mxtoolbox.com/blacklists.aspx)中。此外，请确保正确配置了反向 DNS。

确保将配置存储在配置文件中。它会让你的生活更轻松。

网络配置：

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections >
  </configSections >
  <system.net>
    <mailSettings>
      <smtp from="example@gmail.com" deliveryMethod="Network">
        <network host="smtp.gmail.com" port="587" userName="example@gmail.com" password="password" />
      </smtp>
    </mailSettings>
  </system.net>
</configuration> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-04T20:23:24.547

我会认真考虑在其他地方托管您的邮件服务器。

Spamhous、Outblaze 等已将大部分 EC2 地址空间列入黑名单。你会很难过。

请参阅[http://voices.washingtonpost.com/securityfix/2008/07/amazon_hey_spammers_get_off_my.html](http://voices.washingtonpost.com/securityfix/2008/07/amazon_hey_spammers_get_off_my.html) 和 [http://www.webhostingtalk.com/showthread.php?t=856428](http://www.webhostingtalk.com/showthread.php?t=856428)

**更新建议**

如果我要走这条路，我会做两件事之一。要么我会建立自己的邮件服务器并留在黑名单上；要么 [或者，我会与Constant Contact](http://www.constantcontact.com)等电子邮件营销公司整合。他们有一个相当不错的网络服务 API。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-05T03:25:23.360

要非常小心你是如何穿线的。我见过一些糟糕的代码会启动多个线程但无法锁定数据，导致一些人收到多达十封或更多相同的电子邮件。这显然不好。

此外，如果它必须与您的网站在同一个机器上运行，您肯定希望使用某种 Timer 对象，而不是一次发送所有内容。根据您的实现，您可以使 CPU 或磁盘瘫痪。

# archive - 随着时间的推移快照网站

> ID：821600
> 
> 赞同：1
> 
> 时间：2009-05-04T19:32:07.897
> 
> 标签：archive, snapshot

我是一个营销团队的开发人员，经常被要求的功能之一是：我们可以回去看看我们的网站（或 X 页面）在 X 中的样子。

有什么好的解决方案可以解决这个请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:59:08.440

源代码控制应该能够在内部解决您的请求。适当地标记事物并有一个内部服务器来部署该标签，你应该没有问题。如果您有一个自动部署工具并明智地选择您的标签，那么编写一个应用程序应该相对简单，该应用程序将在标签 X 处检查您的源并部署它，只需让用户输入标签即可。现在，如果您的标签与日期类似，他们只需以正确的格式输入日期并等待 5 分钟即可部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:15:05.907

与其他人的建议类似，（假设是一个动态网站）我会使用输出缓存来生成网页的代码，然后使用 Subversion 来跟踪更改。

使用 WayBack 机器可能只是最后的手段，例如，如果有人要求查看您设置此系统之前的网页。不能依靠 WayBack Machine 来容纳所需的一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T20:16:32.190

我的建议是每天晚上简单地在网站上运行[wget](http://en.wikipedia.org/wiki/Wget)并将其存储在`archive.yourdomain.com`. 为具有将当前页面的 URL 传递到日期选择器的适当权限的用户添加一个控件到每个页面。一旦选择了日期， load `archive.yourdomain.com/YYYYMMDD/original_url`。

让用户浏览整个站点而没有损坏的链接`archive.yourdomain.com`可能需要重新编写一些 URL 或将站点的存档副本从某个存储库复制到`archive.yourdomain.com`. 为了节省磁盘空间，这可能是最好的选择。存储`wget`压缩后的副本，然后提取用户请求的日期。这有一些问题，例如您如何处理希望同时查看不同日期的多个存档页面的多个用户等。

我建议`wget`每晚在您的网站上运行优于从源代码管理中检索它，因为您将获得显示给 WWW 访问者的页面，包括任何动态提供的内容、错误、遗漏、随机旋转广告等。

编辑：您可以将`wget`输出存储在源代码控制中，我不确定将它压缩到源代码控制之外的某个文件系统上会为您带来什么。另请注意，假设网站大小不限，该计划会随着时间的推移消耗大量磁盘空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-17T22:03:13.920

正如格兰特所说，您可以将 wget 与版本控制结合起来以节省空间。实际上，我正在尝试编写一个脚本来为我通常的浏览执行此操作，因为我不相信 Internet 存档或 WebCite 会无限期地存在（而且它们不是很容易搜索）。

脚本会是这样的： cd to directory; 调用正确的`wget --mirror`命令或其他；运行`darcs add $(find .)`以将任何新文件检入存储库；然后`darcs record --all`。

Wget 应该用更新的版本覆盖任何更改的文件；darcs add 将记录任何新文件/目录；darcs 记录将保存更改。

要获得日期 X 的视图，您只需从您的存储库中提取最新 X 的所有补丁。

您不会无限期地存储许多重复副本，因为 DVCS 不会保存历史记录，除非文件内容发生实际更改。在页面更改为不再需要 CSS 或 JS 或您之前下载的图像的意义上，您将获得“垃圾”，但您可以定期删除所有内容并将其记录为补丁，下一次 wget 调用只会拉入需要最新版本的网页。（而且您仍然可以进行全文搜索，只是现在您搜索的是历史记录而不是磁盘上的文件。）

（如果正在下载大型媒体文件，您可以`rm $(find . -size +2M)`在它们被`darcs add`编辑之前将其删除。）

编辑：我最终没有为显式版本控制而烦恼，而是让 wget 创建重复项并偶尔使用`fdupes`. 请参阅[http://www.gwern.net/Archiving%20URLs](http://www.gwern.net/Archiving%20URLs)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T19:37:41.643

看看[返回机器的方式](http://www.archive.org/web/web.php) ，它并不完美，但我还在那里工作过一些令人尴尬的旧网站:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T19:37:57.650

你看过archive.org上的回程机器吗？

[http://www.archive.org/web/web.php](http://www.archive.org/web/web.php)

如果这不能满足您的需求，也许您可​​以使用您的源代码控制存储库自动执行某些操作，以提取特定日期的版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T19:37:09.743

WayBackMachine可能会有所帮助[。](http://www.archive.org/web/web.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-04T20:01:04.927

根据您的页面以及您的要求，您可能会考虑将页面的副本放在源代码管理中。

如果您的内容在数据库中，这可能不起作用，但如果它们只是您随时间更改的 HTML 页面，那么 SCM 将是执行此操作的正常方法。每个人都提到的 WayBackMachine 很棒，但这个解决方案更针对公司，让您可以捕捉到随着时间的推移而变化的细微差别。您无法控制 WayBackMachine（据我所知）。

在 Subversion 中，您可以设置挂钩并自动执行此操作。事实上，如果您使用数据库中的内容，这甚至可能会起作用......

# c - C：将文件读入数组

> ID：821602
> 
> 赞同：1
> 
> 时间：2009-05-04T19:32:15.230
> 
> 标签：c

我有一个文本文件，我想逐行读取它并将这些行放入一个数组中。

后面的代码段在编译时出错：

```
FILE *f;
char line[LINE_SIZE];
char *lines;
int num_righe;

f = fopen("spese.dat", "r");

if(f == NULL) {
    f = fopen("spese.dat", "w");
}

while(fgets(line, LINE_SIZE, f)) {      
    num_righe++;
    lines = realloc(lines, (sizeof(char)*LINE_SIZE)*num_righe);
    strcpy(lines[num_righe-1], line);
}

fclose(f); 
```

错误是：

```
spese.c:29: warning: assignment makes integer from pointer without a cast
spese.c:30: warning: incompatible implicit declaration of built-in function ‘strcpy’
spese.c:30: warning: passing argument 1 of ‘strcpy’ makes pointer from integer without a cast 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T19:41:03.557

尝试：

```
FILE *f;
char line[LINE_SIZE];
char **lines = NULL;
int num_righe = 0;

f = fopen("spese.dat", "r");

if(f == NULL) {
        f = fopen("spese.dat", "w");
}

while(fgets(line, LINE_SIZE, f)) {              
        num_righe++;
        lines = (char**)realloc(lines, sizeof(char*)*num_righe);
        lines[num_righe-1] = strdup(line);
}

fclose(f); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T19:34:19.390

我认为这是一个代码片段，因此，我猜你已经包括 string.h

strcpy 定义为：

```
 char * strcpy ( char * destination, const char * source ); 
```

在

```
 strcpy(lines[num_righe-1], line); 
```

行 [num_righe-1] 是 char，而不是 char*

所以应该是

```
strcpy(lines + (num_righe-1), line); 
```

正如 munificent 所写，看起来您正试图将行设为字符串数组。如果是这样，您对行的定义是错误的。

另外，不要忘记，您应该检查 realloc 不返回 NULL。

```
lines = realloc(lines, (sizeof(char)*LINE_SIZE)*num_righe);

if (!lines) //MUST HANDLE NULL POINTER!!

/* string copy code here*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T19:34:56.300

`lines`是指向字符的指针，即单个字符串。你希望它是一个字符串数组。为此，应该是`char **lines;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T19:35:15.457

您可以使用 fscanf 来做您想做的事情。

```
fscanf(f, "%s\n", line[index]);
index++; 
```

# licensing - 重新授权 BSD 库

> ID：821608
> 
> 赞同：3
> 
> 时间：2009-05-04T19:32:55.807
> 
> 标签：licensing, lgpl

我喜欢在[BSD 许可](http://www.opensource.org/licenses/bsd-license.php)下发布的库。自 2007 年底以来，该库没有得到积极维护。

*   我可以在知识共享许可下分叉库并重新授权吗？
*   必须通知原作者吗？
*   除了这些还有问题吗？

**编辑**

根据几个答案提供的反馈，我将提供有关我的具体案例的更多详细信息。

我正在使用 LGPL 库 ( [JNA ) 重写 BSD 许可库 (](http://jna.dev.java.net/) [JLine](http://jline.sourceforge.net/) )的一些低级代码。我可以使用不同的许可证发布此作品吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T19:51:27.960

您不能删除 BSD 许可证。你可以做的就是把它放在另一个许可证下。例如，微软曾一度采用 BSD 网络代码。如果您查看适当的显示，您会发现许可证要求的通知。另一方面，Microsoft 的副本也属于 Microsoft 使用的任何许可证，而且 Microsoft 的修改既不是免费软件也不是开源软件。

除非它是 BSD 许可证的一些奇怪的变体，否则没有义务通知原作者。但是，出于对使您的生活更轻松的人的共同礼貌，您应该尝试这样做。例如，作者可能想找一个新的维护者，并且可能会帮助你。

但是，您为什么要重新授权呢？我不知道您对哪个 CC 许可证感兴趣，而且种类繁多，但这里有什么好处？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T19:52:57.863

您可以使用 BSD 许可代码做很多事情，但不能完全“重新许可”它。您在代码中看到的几段*是实际的许可证*，它准确地告诉您必须做什么和不做什么。与大多数其他许可证不同，它非常简短易懂：保留许可证和版权声明。

您添加的代码可以根据需要获得许可。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-04T19:38:52.703

除非您拥有作品的版权，否则您**不能更改许可**。您可以分叉代码，但许可证不是您可以更改的。无论原始许可证是什么，这都是正确的（除非许可证特别赋予您重新许可的权利）。

只有**版权所有者可以颁发不同的许可证**，因此您应该尝试与他们联系。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-04T21:57:34.880

由于您不拥有该代码，因此您无法再许可它。但是，BSD 许可证非常不受限制，您也可以根据另一个限制性更强的许可证（例如 GPL）对其进行许可。但是，您可能不想使用 CC，它是为媒体而不是软件制作的。真正的软件许可证会给您带来更少的问题。如果您希望它不受限制，请将其保留为 BSD。如果您希望它比这更严格，请考虑 GPL 或 LGPL。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-04T21:49:54.900

根据许可，您可以对作品进行分许可（一些类似 BSD 的许可允许这样做，特别是对于衍生作品），但您不能删除许可要求（例如归属或版权声明）。您不拥有版权，您只是有权使用它。您可以将哪个许可证用于子许可证将取决于许可证。有些可能有效，有些则无效，具体取决于许可证。

当然，当你 fork 代码时，你必须删除所有使用的商标，并重命名项目。

话虽如此，如果作者拥有所有代码的版权，您可以要求他们根据您的首选许可将其许可给您。由于他们使用类似 BSD 的许可证，因此他们可能会对它持开放态度。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-04T21:55:22.063

Creative Commons 通常用于创意作品：音乐、文学等。我不确定它是否适用于一大段代码。

对于重新许可代码，您可能希望使用特定于软件的许可，例如 GPL、Apache 或 Mozilla 许可。有很多可供选择，具体取决于您的要求。

# matlab - 为连续测量创建缓冲矩阵

> ID：821637
> 
> 赞同：3
> 
> 时间：2009-05-04T19:38:29.443
> 
> 标签：matlab, matrix, buffer

我开始在 MATLAB 中编程，但在创建缓冲矩阵时遇到了一些问题。我正在尝试执行以下操作：

我不断地从网络摄像头获取图像，分割后我获得了移动目标的质心。我需要存储质心数据进行处理，但我不希望它占用太多内存。例如，如果我是一个 time `t=inf`，我正在考虑将 10 个时间点的数据存储在一个矩阵中，就像一个循环缓冲区，然后写入和擦除旧数据，因为我需要同时处理这两个时间点的实际数据（t ) 和时间上的先前数据 (t-1)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T15:57:26.767

```
buffSize = 10;
circBuff = nan(1,buffSize);
for newest = 1:1000;
    circBuff = [newest circBuff(1:end-1)]
end 
```

我已经对此进行了测试，在 MATLAB 中运行不需要太多时间。探查器没有发现代码存在任何瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T20:00:45.240

**更新：**

由于我现在了解您需要一个*循环*缓冲区来存储数据，因此您可以使用以下解决方案。既然您说要在图像中存储对象的质心数据，我将为您提供一个存储任意数量测量值的一般情况（每个质心 1 个像素索引值，或者 x 和 y 坐标的 2 个值等） ...

首先，初始化缓冲区：

```
nBuffer = 10;  % You can set this to whatever number of time points
               %   you want to store data for
nSamples = 2;  % You can set this to the number of data values you
               %   need for each point in time
centroidBuffer = zeros(nSamples,nBuffer);  % Initialize the buffer to zeroes 
```

接下来，您将拥有连续循环。您可以使用[while 循环和最初值为](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/while.html)[TRUE](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/true.html)的标志变量（您可以将其设置为[FALSE](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/false.html)以停止循环）：

```
keepLooping = true;
while keepLooping,
  % Capture your image
  % Compute the centroid data and place it in the vector "centroidData"
  centroidBuffer = [centroidBuffer(:,2:end) centroidData(:)];
  % Do whatever processing you want to do on centroidBuffer
  % Choose to set keepLooping to false, if you want
end 
```

这通过以下方式工作：在每个时间点，**centroidBuffer**中的第一列（即最旧的数据）被删除，并在末尾附加一个新列（即新数据）。这样，缓冲矩阵的大小总是相同的。

如果您不想在每个时间步执行处理，而是仅在每个**nBuffer**时间点之后执行，以便每次都对一组新数据进行操作，则将上述代码替换为以下代码：

```
keepLooping = true;
processTime = 0;
while keepLooping,
  % Capture your image
  % Compute the centroid data and place it in the vector "centroidData"
  centroidBuffer = [centroidBuffer(:,2:end) centroidData(:)];
  processTime = processTime+1;
  if (processTime == nBuffer),
    % Do whatever processing you want to do on centroidBuffer
    processTime = 0;
  end
  % Choose to set keepLooping to false, if you want
end 
```

* * *

**编辑：**

您可以使用上述代码进行多种变体。例如，如果要存储两组数据，每组 10 个时间点，可以将**nBuffer**更改为 20，以将旧集存储在前 10 列中，将新集存储在后 10 列中。然后，将 if 语句更改为：

```
 ...
  if (processTime == nBuffer/2),
  ... 
```

现在，您可以使用较旧的 10 个数据点集（在**centroidBuffer(:,1:10)**中）和较新的 10 个数据点集（在**centroidBuffer(:,11:20)**中）执行您的处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T16:31:30.570

当您谈论每次迭代的大型数据集时，数据洗牌可能会开始占用一些时间。我处理大型数据集的方法是使用类似的东西：

circBuff(:,:,mod(counter,numFrames)) = newData; 这样您只覆盖一次数据，而不是在每个周期移动整个缓冲区中的每个数据点。您只需要更加了解如何访问您的数据。

HTH，丹

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-21T15:23:48.800

```
centroidBuffer = [centroidBuffer(:,2:end) centroidData(:)]; 
```

这是一个不错且简单的解决方案，但速度很慢。每次添加新向量时，matlab 都必须复制除第一个条目之外的整个旧数据。如果您考虑实时，这不是一个好主意。

```
circBuff(:,:,mod(counter,numFrames)) = newData 
```

这个想法没有复制问题，但是现在您不再有一个好的子数组，它按时间顺序表示从第一个索引到最后一个索引的数据。

我刚刚上传了一个快速循环缓冲区的解决方案，它避免了两个问题

[http://www.mathworks.com/matlabcentral/fileexchange/47025-circvbuf-m](http://www.mathworks.com/matlabcentral/fileexchange/47025-circvbuf-m)

这个循环缓冲区的主要思想是在程序中使用缓冲区时，性能恒定且快速，并且避免了复制操作：

```
% create a circular vector buffer
    bufferSz = 1000;
    vectorLen= 7;
    cvbuf = circVBuf(int64(bufferSz),int64(vectorLen));

% fill buffer with 99 vectors
    vecs = zeros(99,vectorLen,'double');
    cvbuf.append(vecs);

% loop over lastly appended vectors of the circVBuf:
    new = cvbuf.new;
    lst = cvbuf.lst;
    for ix=new:lst
       vec(:) = cvbuf.raw(:,ix);
    end

% or direct array operation on lastly appended vectors in the buffer (no copy => fast)
    new = cvbuf.new;
    lst = cvbuf.lst;
    mean = mean(cvbuf.raw(3:7,new:lst)); 
```

检查屏幕截图，如果缓冲区很大，这个循环缓冲区有优势，但每次追加的数据大小很小，因为与简单的复制缓冲区相比，circVBuf 的性能不依赖于缓冲区大小。

双缓冲根据在任何情况下要追加的数据来保证追加的预测时间。将来，本课程将为您提供双缓冲是或否的选择 - 如果您不需要保证时间，事情会加速。 ![在此处输入图像描述](https://i.stack.imgur.com/OWlYa.jpg)

# .net - 企业库如何实现一个IExceptionHandler？

> ID：821643
> 
> 赞同：0
> 
> 时间：2009-05-04T19:40:41.917
> 
> 标签：.net, exception-handling, fogbugz, enterprise-library

我必须为 Enteprise Library 4.1 实现一个 IExceptionHandler。在我的特殊情况下，我想用它来记录 Fogbugz 的异常，但内部细节不是我要问的。我需要的是如何 - 最佳实践 - 实现它，如何获取 app.config 或 web.config 的配置。等等

到目前为止，我有代码：

```
 public class LcpFogbugzExceptionHandler : IExceptionHandler {
   /// <summary>
   /// Initializes a new instance of the <see cref="LcpFogbugzExceptionHandler"/> class.
   /// </summary>
   public LcpFogbugzExceptionHandler() {
        // <param name="ignore">The ignore.</param>
        //NameValueCollection ignore
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="T:LcpFogbugzExceptionHandler"/> class.
    /// </summary>
    /// <param name="ignore">The ignore.</param>
   public LcpFogbugzExceptionHandler(NameValueCollection ignore) {
   }

    /// <summary>
    /// Handles the exception.
    /// </summary>
    /// <param name="exception">The exception.</param>
    /// <param name="handlingInstanceId">The handling instance id.</param>
    /// <returns></returns>
   [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Globalization", "CA1300:SpecifyMessageBoxOptions"), System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Globalization", "CA1305:SpecifyIFormatProvider", MessageId = "System.Convert.ToBoolean(System.String)")]
    public Exception HandleException(Exception exception, Guid handlingInstanceId) {
        // Perform processing here. The exception returned will be passed to the next
        // exception handler in the chain. 

        return exception;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-26T12:00:58.743

我不确定你所说的最佳实践是什么意思——你的代码框架是正确的，所以只需用你的实现来填充它。可能有用的随机点：

您可以以正常方式（`ConfigurationManager`等）读取配置设置。`ExceptionPolicy.HandleException`您的处理程序在最初调用的同一进程和线程中运行。

使处理程序代码线程安全是一个好主意，以防您必须在多个线程中处理异常（如果您不在这个项目中，您可能需要在下一个项目中）。

如果您想将任何非静态实例数据从调用代码传递到处理程序，您可以填充`Data`正在处理的异常的字典，该字典将通过整个处理程序链原封不动地保存并再次输出到调用代码。我已经使用这种技术将数据发送到处理程序，从处理程序中取回数据，并允许一个处理程序控制链中下一个处理程序的操作。如果这样做，请确保所有`Data`值都是可序列化的。

# .net - 以编程方式从 VSTO Excel 工作簿中读取 _AssemblyLocation

> ID：821647
> 
> 赞同：1
> 
> 时间：2009-05-04T19:42:14.380
> 
> 标签：.net, excel, vsto, openxml

我有一个 Visual Studio Excel 工作簿项目。当我发布工作簿并检查工作簿的来源时（我打开 WinZip 并检查 custom.xml），我看到标签 _AssemblyLocation，它对应于发布路径。

有没有办法从我的 .NET 代码中读取 _AssemblyLocation？

我希望能够读取发布路径并根据服务器名称确定我所处的环境（开发/质量保证/生产）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:04:31.267

我想您可以使用 ZipPackage 类打开 xlsx，然后使用 Xquery 或 xlinq 等读取 XML。

[http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-13T22:23:26.927

博客文章“[如何使用 VSTO 获取 Word 文档的自定义属性](http://dotnetdud.blogspot.com/2008/12/how-to-get-custom-properties-of-word.html)”提供了一个解决方案

# sql - 借助 CreatedDate 字段获取插入的最新行

> ID：821650
> 
> 赞同：1
> 
> 时间：2009-05-04T19:43:05.140
> 
> 标签：sql, sql-server-2005

我正在尝试根据其 CreatedDate 获取插入到 SQL 表中的最新记录。例如，在下表中，我想获得第三行。

```
A   B   C   2009-05-04 19:30:52.847
A   B   D   2009-05-04 19:30:55.050
A   B   E   2009-05-04 19:30:57.003 
```

我有一个有效的查询，但我想知道是否有更好的方法来实现相同的结果。下面是我现在用于测试的表格、数据和查询。有没有更好的方法来做到这一点？

```
CREATE TABLE TestTable (
  ColumnA     NVARCHAR(10),
  ColumnB     NVARCHAR(10),
  ColumnC     NVARCHAR(10),
  CreatedDate DATETIME    DEFAULT Getutcdate())

INSERT INTO TestTable(ColumnA, ColumnB, ColumnC) VALUES ('A', 'B', 'C');
INSERT INTO TestTable(ColumnA, ColumnB, ColumnC) VALUES ('A', 'B', 'D');
INSERT INTO TestTable(ColumnA, ColumnB, ColumnC) VALUES ('A', 'B', 'E');

SELECT *
FROM   TestTable
WHERE  CreatedDate = (SELECT   Max(CreatedDate)
                      FROM     TestTable
                      WHERE    ColumnA = 'A'
                               AND ColumnB = 'B'
                      GROUP BY ColumnA,
                               ColumnB) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T19:45:20.020

你也可以写

```
SELECT top 1 *
FROM   TestTable
order by CreatedDate desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-10T19:36:25.823

我喜欢那个外部连接解决方​​案——我没有想到。但是*Display Estimated Execution Plan*发现它比我通常解决这个问题的方法更昂贵。（可能与我表上的索引有关 - 您的里程可能会有所不同）试试这个：

```
SELECT
    T1.ColumnA,
    T1.ColumnB,
    T1.ColumnC,
    T1.CreatedDate
FROM
    dbo.TestTable T1
    JOIN (SELECT ColumnA,
                 ColumnB,
                 max(CreatedDate) MaxDate
          FROM
                 dbo.TestTable
          GROUP BY ColumnA,
                   ColumnB) T2
    ON  T1.ColumnA     = T2.ColumnA
    AND T1.ColumnB     = T2.ColumnB
    AND T1.CreatedDate = T2.MaxDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T19:56:37.230

有多种方法可以给这只猫剥皮。一些尚未发布的：

```
SELECT
     T1.column_a,
     T1.column_b,
     T1.column_c,
     T1.created_date
FROM
     dbo.Test_Table T1
WHERE
     T1.column_a = 'A' AND
     T1.column_b = 'B' AND
     NOT EXISTS
     (
          SELECT
               *
          FROM
               dbo.Test_Table T2
          WHERE
               T2.column_a = T1.column_a AND
               T2.column_b = T1.column_b AND
               T2.created_date > T1.created_date
     ) 
```

或者

```
SELECT
     T1.column_a,
     T1.column_b,
     T1.column_c,
     T1.created_date
FROM
     dbo.Test_Table T1
LEFT OUTER JOIN dbo.Test_Table T2 ON
     T2.column_a = T1.column_a AND
     T2.column_b = T1.column_b AND
     T2.created_date > T1.created_date
WHERE
     T1.column_a = 'A' AND
     T1.column_b = 'B' AND
     T2.column_a IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-10T21:41:09.943

```
SELECT TOP 1 WITH TIES *
FROM TestTable
WHERE ColumnA = 'A'
  AND ColumnB = 'B'
ORDER BY CreatedDate DESC 
```

这是以防万一有重复的`CreatedDate`，你需要所有的。

否则就放弃`WITH TIES`。

# vb.net - 读取对象的内存地址

> ID：821659
> 
> 赞同：0
> 
> 时间：2009-05-04T19:43:51.770
> 
> 标签：vb.net, memory

我正在尝试将业务对象从一个 WinForm 传递到另一个 WinForm 进行修改，然后使用更新的值重新填充第一个表单上的文本框等。

但是，当代码控制返回第一种形式时，第二种形式中设置的对象值似乎没有“粘住”。

有没有办法在 VB.NET 中查看对象的内存位置？我想首先确保第二个表单上的对象变量指向与第一个表单上的对象相同的内存地址。然后我可以从那里拿走它。

在一个单独的 VB 项目中，我将一个简单对象传递给第二个窗体，修改了值，并在第一个窗体上重新显示了对象的值。它工作得很好。在我的真实应用程序中，我传递的对象是另一个对象的属性，这可能是它不起作用的原因。

解决方案：问题是我使用了一个 DeepCopy() 函数，我发现它可以简化将一个对象的属性复制到另一个对象的过程。删除该函数并手动将值设置为第二种形式的传递对象（例如 obj.property1 = searchResult.property1）会使一切都按预期运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:50:01.007

在 VB.NET 中看不到对象的内存地址。

你能给我们看一些代码吗？也许我们可以发现错误。

你在传递什么样的物体？如果对象是值类型，这将不起作用（用结构而不是类声明）。

# sql - 噪音词 SQL SERVER 2005 反斜杠

> ID：821660
> 
> 赞同：0
> 
> 时间：2009-05-04T19:43:57.340
> 
> 标签：sql, sql-server-2005

如何使 SQL SERVER 2005 在以下搜索中忽略反斜杠：

```
select [description] from MyTable where contains([description], '3/4 and bear') 
```

它在“/”上吹响！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T16:11:35.357

尝试使用 '"3/4 and bear'"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T19:50:11.350

试试这个

**select [description] from MyTable
where [description] LIKE '%3/4 and bear%'**

# sql - 将 Excel 中的数据与数据库相结合

> ID：821664
> 
> 赞同：2
> 
> 时间：2009-05-04T19:45:38.270
> 
> 标签：sql, excel, excel-2007

这可能是一个简单的问题，但我真的不知道我在 Excel 中做什么，所以希望有人可以帮助我。

我得到了一个 Excel 电子表格，其中有两个与我的任务相关的列。第一列是“外部 ID”，第二列是“内部 ID”。我需要使用内部 ID 作为键从我们的数据库（具有各种连接）中选择一堆数据，但是所有这些数据都需要链接回外部 ID，内部/外部之间的唯一链接是这个电子表格。

例如，假设电子表格的一行如下所示：

```
ExtID    IntID
AB1234   2 
```

我需要在我们的数据库中选择与 ID #2 的项目相关的所有数据，但我无法从数据库中获取“AB1234”，因此我需要使用电子表格将这些数据关联回“AB1234”。

实现这一目标的最简单方法是什么？Excel 的版本是 Excel 2007，数据库是 Oracle，如果相关的话。

请注意，我只有生产数据库的读取权限，因此不能创建表和导入电子表格数据进行连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T20:13:09.920

**根据评论编辑**

**1 -**使用 MS Access 将 Excel 工作表作为表格导入。

**2 -**链接到您的数据库表，同样来自 MS Access

*外部数据选项卡->其他数据源->ODBC连接->选择你的->选择你想要的表*

**3 -**编写一个 Access 查询来比较你想要的值

*Create->Query Design->Drop你想要的表，在它们之间拖线建立关系，点击运行*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T19:51:16.433

通常我使用复制粘贴和带有宏的良好列模式编辑器来完成这些任务。如果您只有几个 Excel 文件，它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T19:59:49.050

很大程度上取决于您对可用工具的熟悉程度。

您是否有熟悉的工具可以方便地使用 IntID 查找这些记录？如果是这样，您是否可以进行查询并将结果粘贴回具有 IntID 的列右侧列中的原始电子表格中？

如果是这样，您将得到您想要的，一个包含以下列的电子表格： ExtID（原始）IntID（原始）IntID（来自 Oracle）Col1（来自 Oracle）Col2（来自 Oracle）等....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:27:12.400

我不熟悉 Oracle，但我知道很多数据库允许您在表名前加上 # 或类似的东西并创建一个临时表。其他人有一个临时数据库，您可以在其中创建东西。有时您可以创建一个临时表，即使您只能选择选择。

如果您有权这样做，我会按照 JosephStyons 的建议 (#2) 执行该功能，将您的记录插入到临时表中，并基于此进行查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T01:42:54.730

使用 Excel 和 VBA，您可以使用 ActiveX 数据对象 (ADO) 作为对特定数据库使用 OLE DB 提供程序的高级方法。这使您可以从数据库中读取数据，然后可以查询该数据并将结果存储在电子表格中。

[Oracle OLE DB 提供程序](http://www.oracle.com/technology/tech/windows/ole_db/index.html)
[ADO 指南](http://msdn.microsoft.com/en-us/library/ms680928(VS.85).aspx)

# operating-system - 为什么系统调用需要切换到内核模式？

> ID：821665
> 
> 赞同：1
> 
> 时间：2009-05-04T19:45:51.187
> 
> 标签：operating-system, system-calls

我正在为我的操作系统期末考试而学习，想知道是否有人可以告诉我为什么操作系统需要切换到系统调用的内核模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T19:57:43.657

系统调用专门用于在内核模式下运行操作，因为出于安全原因，不允许通常的用户代码执行此操作。

例如，如果您想分配内存，操作系统有权执行此操作（因为它知道页表并允许访问其他进程的内存），但您作为用户程序不应该被允许偷看或破坏其他进程的内存。这是一种沙盒方式。所以你发送一个系统调用请求操作系统分配内存，这发生在内核级别。

编辑：我现在看到[维基百科的文章](http://en.wikipedia.org/wiki/System_call)在这方面非常有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:57:56.183

由于这被标记为“家庭作业”，我不仅会给出答案，还会提供一个提示：

内核负责访问计算机的硬件并确保应用程序不会相互踩踏。如果任何应用程序可以在没有内核合作的情况下访问硬件设备（例如硬盘驱动器）会发生什么？

# c++ - C++ 两次初始化对象的问题

> ID：821667
> 
> 赞同：2
> 
> 时间：2009-05-04T19:46:15.977
> 
> 标签：c++, arrays, pointers, object

我对 C++ 比较陌生，并且很难理解对象的实例化和指向对象的指针。

这两个声明在内存和使用方面有什么区别？：

```
MyClass obj1;
MyClass *obj2; 
```

而且我遇到的具体问题是我有一个类，它有一个无符号短数组，如果我这样做，数组的最后一个空间会发生变化：

```
MyClass obj;
obj = MyClass("123"); 
```

MyClass 有两个构造函数，一个将采用 int 值，默认情况下将其分配为零并将其拼接为 3 位或更少的部分。另一个将采用数字的字符串表示并做同样的事情......希望这是有道理的！

如果我声明它会很好用

```
MyClass obj = MyClass("123123123"); 
```

但如果我以另一种方式做，则不会。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-04T19:55:12.617

区别：

```
MyClass  obj1;
MyClass *obj2; 
```

这里 obj1 是 MyClass 的一个实例。
而 obj2 可以潜在地保存 MyClass 实例的地址。

同样 obj1 将由构造函数自动初始化，而 obj2 默认情况下不会初始化（因此指向随机内存）。一旦初始化 obj2 可能会采用特殊值 NULL 表示它没有指向一个对象。

```
obj2 = &obj1; 
```

这里我们初始化 obj2 指向 obj1 在内存中的地址。如果您更改 obj1 的任何成员，那么您可以通过 obj2 查看它们来查看更改（但因为 obj2 是您需要取消引用的指针）。

```
obj1.plop = 5;

std::cout << obj1.plop << "\n";
std::cout << obj2->plop << "\n";  Should print the same values. 
```

以下实际上是两个不同的东西：

```
MyClass obj;
obj = MyClass("123"); 
```

*   第一行使用默认构造函数初始化 'obj'。
*   第二行：创建一个用字符串“123”构造的临时对象。一旦创建了这个临时对象，它就会使用赋值运算符复制到“obj”上。如果您没有定义赋值运算符，编译器将为您生成一个。如果您的类包含指针，则默认版本可能无法正常工作（在大多数其他情况下，默认赋值运算符应该可以正常工作）。

这条线可能有效：

```
MyClass obj = MyClass("123123123"); 
```

因为编译器已将其优化为：

```
MyClass obj("123123123"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T19:48:48.357

当您说`MyClass obj1;`您创建对象时。 *只是为对象的地址*`MyClass * obj2;`节省空间。

 *以下内容也是如此`MyClass obj1;`：

*   它在编译器符号表中设置名称
*   它分配`sizeof(MyClass)`空间字节 - 可以像你想要的一样大
*   它运行 MyClass 的默认 ctor，MyClass::MyClass() 9 或具有所有默认参数的 ctor）将初始化的对象放在它分配的空间中
*   它会记住该对象的位置，并将其与符号表中的名称“obj1”相关联。

而`MyClass * obj2;`相反

*   `obj2`在符号表中设置名称
*   只为MyClass 对象的*地址*分配空间`sizeof(MyClass*)`——可能是 4 或 8 个字节
*   不运行任何构造函数。

当你说`MyClass obj; obj = MyClass("123123123")`你

*   `MyClass`使用默认 ctor 为 obj创建和分配对象
*   创建和分配*另一个* `MyClass`对象
*   分配该新`MyClass`对象以替换旧对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T19:51:24.730

你打电话时

```
MyClass obj = MyClass("123123123"); 
```

您实际上是在创建两个对象！正确的方法是调用

```
MyClass obj("123123123"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T19:54:51.103

在第一个代码中，实际上创建了 MyClass 类型的对象，因此它会根据需要消耗尽可能多的空间。另一个只是定义了一个指针，因此您可以为系统上的地址保留尽可能多的空间（通常为 4 个字节，有时为 8 个）

当您将初始化分成两行时，首先使用默认构造函数创建 MyClass，然后使用参数化构造函数创建 MyClass，然后使用赋值运算符用第二个的内容覆盖第一行的内容。这是浪费。因为构造函数可能有副作用，编译器可能不会为您优化它。

在您提供的第三段代码中，您实际上使用了一个带有参数的构造函数。没有分配发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T19:55:32.210

和...之间的不同

```
MyClass obj1;
MyClass *obj2; 
```

第一个是创建一个对象（大小 = 对象的大小），而第二个只创建一个指向对象的指针（在 32 位系统上为 4 个字节），而不是实际的对象。为了做到这一点，你需要做

```
MyClass* obj2 = new MyClass("123"); 
```

这将为指针和 x 字节分配 4 个字节，其中 x 是对象的大小。如果您手动“新建”这样的东西，那么您有责任稍后使用“删除”手动销毁它。

MyClass obj1 超出范围时将被“销毁”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T20:02:06.423

这些声明会影响两件事：变量的*生命周期*和分配内存的位置。

指针版本 MyClass* 声明了一个指向 MyClass 实例的变量。它本身并不分配它；当您明确地“新建”它时，会从“免费存储”（始终与“堆”相同）进行分配，并在您“删除”它时释放它。

以下代码有效：

```
MyClass* test_works() {
  MyClass* obj = new MyClass;
  return obj;
} 
```

非指针版本在指定的上下文中分配内存——声明可能在全局级别，或者在函数的堆栈上，或者作为另一个对象的成员（“组合”）——它是自动的在进入和超出范围时分配和释放。

例如，以下代码将失败：

```
MyClass* test_crashes() {
  MyClass obj;
  return &obj;
} 
```

# c++ - 我如何决定是否为新的 C++ 项目使用 ATL、MFC、Win32 或 CLR？

> ID：821676
> 
> 赞同：75
> 
> 时间：2009-05-04T19:47:29.297
> 
> 标签：c++, winapi, mfc, clr, atl

我刚刚开始我的第一个 C++ 项目。我正在使用[Visual Studio 2008](https://stackoverflow.com/questions/820213/new-to-c-should-i-use-visual-studio)。它是一个单一形式的 Windows 应用程序，它访问几个数据库并启动一个 WebSphere MQ 事务。我基本上了解 ATL、MFC、Win32（我实际上对那个有点模糊）和 CLR 之间的区别，但我不知道应该如何选择。

其中一个或多个只是为了向后兼容吗？

CLR[是个坏主意](https://stackoverflow.com/questions/819191/is-c-net-dying)吗？

任何建议表示赞赏。

**编辑：** 我为这个项目选择了 C++，因为我没有在帖子中提到，这并不完全是技术性的。那么，*假设*C++ 是唯一/最好的选择，我应该选择哪个？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2009-05-04T19:53:41.823

这取决于您的需求。

使用 CLR 将为您提供最具表现力的库集（整个 .NET 框架），但代价是将您的可执行文件限制为要求在运行时安装 .NET 框架，以及将您限制在 Windows 平台上（但是，所有列出的 4 种技术都只是 windows，因此平台限制可能是最不麻烦的）。

但是，CLR 要求您使用 C++ 语言的 C++/CLI 扩展，因此本质上，您需要学习一些额外的语言特性才能使用它。这样做可以为您提供许多“附加功能”，例如访问 .net 库、完整的垃圾回收等。

ATL 和 MFC 之间的选择有些棘手。我建议您参考[MSDN 的页面进行选择](http://msdn.microsoft.com/en-us/library/bk8ytxz5(VS.80).aspx)，以便在它们之间做出决定。ATL/MFC 的好处是您不需要 .NET 框架，只需安装 VC/MFC 运行时即可进行部署。

直接使用 Win32 提供了最小的可执行文件，具有最少的依赖项，但需要编写更多的工作。您拥有最少数量的帮助程序库，因此您编写的代码更多。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-04T19:58:00.737

Win32 是原始的裸机方式。它乏味，难以使用，并且有很多小细节需要记住，否则事情将以相对神秘的方式失败。

MFC 建立在 Win32 之上，为您提供一种面向对象的方式来构建您的应用程序。它不是 Win32 的替代品，而是一种增强功能 - 它为您完成了很多艰苦的工作。

System.Windows.Forms（我假设您是 CLR 的意思）完全不同，但与 MFC 的基本结构有很大的相似之处。到目前为止，它是最容易使用的，但需要 .NET 框架，这在您的情况下可能会或可能不会成为障碍。

我的建议：如果您需要避免使用 .NET，则使用 MFC，否则使用 .NET（事实上，在这种情况下，我会使用 C#，因为它更容易使用）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-04T19:58:29.037

就 C++ 而言，我会使用 WTL。它是轻量级的，您将几乎没有（如果有的话）依赖项，使其易于运输和安装。当我的应用程序包含一个可以在大多数版本的 Windows 上运行的 EXE 时，我发现它非常令人满意，但这可能不是您关心的问题。

如果您选择改用 .NET，那么 C# 几乎可以肯定是要走的路。

WTL 中的更多内容：

[http://www.codeproject.com/KB/wtl/wtl4mfc1.aspx](http://www.codeproject.com/KB/wtl/wtl4mfc1.aspx)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-04T19:51:56.807

我会很好奇为什么你会在 C++ 中这样做。根据您的简短描述，C# 听起来像是一个更合适的选择。

只是为了详细说明一下，请查看您提供的描述 C++ CLR 的链接。评分最高的答案指出（准确地说，在我看来）C++ 适用于“内核、游戏、高性能和服务器应用程序”——这些似乎都没有描述你在做什么。

从某种意义上说，MFC、ATL 等将得到支持，是的，您将能够在未来版本的 Visual Studio 上编译您的应用程序并在未来版本的 Windows 上运行它们。但从某种意义上说，它们不受支持，因为 API 或语言中没有像 CLR 和 C# 中那样进行很多新的开发。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-04T20:28:59.540

CLR 没有任何问题。像这里的其他人一样，我建议使用 C#，但是由于您有理由坚持使用 C++，因此如果您还不熟悉它们 (IMO)，那么使用 .NET 框架比使用 ATL/MFC 容易数千倍。

值得一提的是，如果您使用的是 C++/CLR，那么您根本就没有真正使用 C++。C++/CLR 像 C# 一样编译成 CIL。我自己从未使用过它，但我相信它的目的是允许您编译遗留代码并使其易于用于新的 .NET 代码，而不是允许新代码与旧的 C++ 可执行文件一起使用。还有其他从 .NET 调用本机代码的方法，也许您应该探索一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-17T20:41:20.320

这个问题的现代（2021 年）答案似乎是使用 C++/WinRT 而不是 C++/CLR（或 C++/CLI 或 C++/CX ... jeez Microsoft）：

[https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/intro-to-using-cpp-with-winrt](https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/intro-to-using-cpp-with-winrt)

> C++/WinRT 是用于 Windows 运行时 (WinRT) API 的完全标准的现代 C++17 语言投影，实现为基于头文件的库，旨在为你提供对现代 Windows API 的一流访问。借助 C++/WinRT，您可以使用任何符合标准的 C++17 编译器来创作和使用 Windows 运行时 API。
> 
> ...
> 
> C++/WinRT 是微软推荐的 C++/CX 语言投影的替代品

它基本上是标准的 C++，但 UI 是用 XAML 定义的。

尽管如此，与其他答案一样，使用 C# 似乎确实是微软最喜欢的方法。无论如何，C++/WinRT 看起来真的几乎是 C#。

# c# - 如何在 WPF 中选择性地验证表单？

> ID：821687
> 
> 赞同：2
> 
> 时间：2009-05-04T19:51:26.680
> 
> 标签：c#, .net, wpf, validation

我目前正在应用程序中使用[此处](https://stackoverflow.com/questions/127477/detecting-wpf-validation-errors)列出的验证代码。我想有选择地验证一个页面。我的意思是：我有一个带有验证规则的数据绑定表单。我还有一个复选框，选中后会禁用和清除几个绑定文本框的值。我可以在这些文本框上设置一个属性来告诉验证引擎在验证时不要包含这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T23:14:12.030

也许如果您为您的 Validator 类编写了一个附加属性，并在您的 IsValid 方法中首先检查它。

```
static class Validator
{
    public static readonly DependencyProperty SkipValidationProperty =
        DependencyProperty.RegisterAttached("SkipValidation", typeof(bool), typeof(Validator),
        new UIPropertyMetadata(false));
    public static bool GetSkipValidation(DependencyObject obj)
    {
        return (bool)obj.GetValue(SkipValidationProperty);
    }
    public static void SetSkipValidation(DependencyObject obj, bool value)
    {
        obj.SetValue(SkipValidationProperty, value);
    }

    public static bool IsValid(DependencyObject parent)
    {
        if (Validator.GetSkipValidation(parent)) return true;
       //Rest of the validation code
    }

} 
```

然后你可以做一些简单的事情：

```
<StackPanel>
 <TextBox x:Name="txt" local:Validator.SkipValidation="{Binding IsChecked, ElementName=cbx}" />
 <CheckBox x:Name="cbx" >Skip Validate?</CheckBox>        
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T21:04:40.490

可能，您可以使用触发器来切换绑定。这意味着 Setter-s 将使用具有不同验证规则的另一个绑定重新绑定该属性。

但只有（？）所有这些验证规则都在 ControlTemplate 或 DataTemplate 中时才有效。

# jquery - 仅当表的第一行超过 1 列时才需要 JQuery 来选择表

> ID：821691
> 
> 赞同：0
> 
> 时间：2009-05-04T19:52:11.220
> 
> 标签：jquery, selector, tablesorter

我需要使用 JQuery 选择表元素并对其进行操作，但前提是它至少包含一行多于一列。以下选择器有效，但只能让我部分了解：

```
$('#my_table_is:has(tbody tr)').doSomething(); 
```

我尝试过但没有成功的变体是：

```
$('#my_table_id:has(tbody > tr > td:eq(1))').doSomething();
$('#my_table_id:has(tbody tr:nth-child(1))').doSomething();
$('#my_table_id:has(td:eq(1))').doSomething(); 
```

选择器和过滤器的哪种组合将使这项工作有效？

顺便说一句，我需要这个的原因是具有多列 sortList 的表排序器，当表输出中只有 1 列时显然会爆炸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T19:56:16.450

一个好的 ole 支票怎么样？

```
if (1 < $('#tbl thead th').size()) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:01:10.043

**实际修复**tablesorter而不是*hacking*会不会更容易？（我假设您的意思是[http://tablesorter.com/](http://tablesorter.com/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T17:52:01.843

我设法使用以下选择器（也适用于旧版本的 TableSorter）来做到这一点：

`#tableID:has( tbody > tr > td + td )`

这个想法是，只有当它有一个`tbody`带有`tr`至少两个兄弟的表时，它才会找到表`td`。

# ios - 属性“非原子”是什么意思？

> ID：821692
> 
> 赞同：149
> 
> 时间：2009-05-04T19:52:40.593
> 
> 标签：ios, objective-c, iphone, cocoa, properties

这段代码中的“非原子”是什么意思？

```
@property(nonatomic, retain) UITextField *theUsersName; 
```

原子和非原子有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2009-05-04T20:18:04.730

查看[Apple 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)。

基本上，如果您说`nonatomic`，并且使用 生成访问器`@synthesize`，那么如果多个线程尝试一次更改/读取该属性，则可能会发生错误。您可以获得部分写入的值或过度释放/保留的对象，这很容易导致崩溃。（不过，这可能比原子访问器快得多。）

如果您使用默认值（`atomic`过去没有关键字，但[现在](http://lists.apple.com/archives/objc-language/2012/Mar/msg00022.html)有），则`@synthesize`d 方法使用对象级锁来确保对单个属性的多次读/写被序列化。正如 Apple 文档指出的那样，**这并不意味着整个对象是线程安全的**，但单个属性 reads/writes 是。

当然，如果您实现自己的访问器而不是 using `@synthesize`，我认为这些声明除了表达您对属性是否以线程安全方式实现的意图之外没有任何作用。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-03-21T07:12:54.187

在阅读了这么多文章和 StackOverflow 帖子之后，并制作了演示应用程序来检查变量属性属性后，我决定将所有属性信息放在一起

1.  原子的 //默认
2.  非原子的
3.  强=保留//默认
4.  弱= unsafe_unretained
5.  保持
6.  赋值 //默认
7.  unsafe_unretained
8.  复制
9.  只读
10.  读写//默认

所以下面是详细的文章链接，您可以在其中找到上述所有属性，这肯定会对您有所帮助。非常感谢所有在这里给出最佳答案的人！！

> [**iOS 中的可变属性属性或修饰符**](http://rdcworld-iphone.blogspot.in/2012/12/variable-property-attributes-or.html)

1.  **原子**
    *   原子意味着只有一个线程访问变量（静态类型）。
    *   原子是线程安全的。
    *   但是它的性能很慢。
    *   原子是默认行为。
    *   非垃圾收集环境中的原子访问器（即使用保留/释放/自动释放时）将使用锁来确保另一个线程不会干扰正确设置/获取值。
    *   它实际上不是关键字。

例子 ：

```
@property (retain) NSString *name;

@synthesize name; 
```

2.  **非原子的**
    *   非原子意味着多线程访问变量（动态类型）。
    *   非原子是线程不安全的。
    *   但它的性能很快。
    *   非原子不是默认行为；我们需要在属性属性中添加非原子关键字。
    *   当两个不同的进程（线程）同时访问同一个变量时，它可能会导致意外的行为。

例子：

```
@property (nonatomic, retain) NSString *name;

@synthesize name; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-04T21:39:44.317

除了已经说过的线程安全之外，非原子属性比原子访问器更快。这不是您通常需要担心的事情，但请记住这一点。由于这个原因，Core Data 生成的属性部分是非原子的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-04T19:55:59.150

在多线程程序中，原子操作不能被部分中断，而非原子操作可以。

因此，如果您有一个不希望中断的非原子关键操作，您应该使用互斥锁（或类似的东西）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-04T19:54:32.307

如果您指定“原子”，则生成的访问函数有一些额外的代码来防止同时更新。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-04T19:55:01.463

通常原子意味着对属性的写入/读取作为单个操作发生。 [原子操作](http://en.wikipedia.org/wiki/Atomic_operation)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-13T07:34:07.550

通过阅读下面的文章，您可以掌握这些东西。

[线程解释与非原子的目的](http://blog.ablepear.com/2010/05/objective-c-tuesdays-atomic-and.html)

nonatomic - 不是线程安全的

atomic - 线程安全 - 这是默认的属性属性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-14T18:30:53.577

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-06-04T12:41:03.243

一种是用于多线程。一个不是

# c# - 单元测试是否使 Debug.Assert() 变得不必要？

> ID：821702
> 
> 赞同：10
> 
> 时间：2009-05-04T19:54:36.067
> 
> 标签：c#, unit-testing

我已经准备好麦康奈尔的“[代码完成](http://cc2e.com/)”已经有一段时间了。[现在我在 Hunt & Thomas 的“实用程序员](http://www.pragprog.com/titles/tpp/the-pragmatic-programmer)”中再次阅读：使用断言！*注意：不是单元测试断言，我的意思是`Debug.Assert()`.*

遵循 SO 问题[我应该何时使用 Debug.Assert()？](https://stackoverflow.com/questions/129120/when-should-i-use-debug-assert)[何时在域类中对异常使用断言](https://stackoverflow.com/questions/414182/when-to-use-assertion-over-exceptions-in-domain-classes)断言对开发很有用，因为可以很快找到“不可能”的情况。而且它们似乎很常用。据我了解断言，在 C# 中，它们通常用于检查输入变量的“不可能”值。

为了使单元测试尽可能简洁和隔离，我使用`null`s 和“不可能的”虚拟输入（如空字符串）来提供类和方法。

此类测试明确记录，它们不依赖于某些特定输入。*注意：我正在练习 Meszaros 的“xUnit 测试模式”所描述的[Minimal Fixture](http://xunitpatterns.com/Minimal%20Fixture.html)。*

这就是重点：如果我有一个断言来保护这些输入，它们会破坏我的单元测试。

我喜欢断言式编程的想法，但另一方面我不需要强迫它。目前我想不出任何用于`Debug.Assert()`. 也许我想念什么？你有什么建议，它们在哪里*真正*有用？也许我只是高估了断言的有用性？或者也许我的测试方式需要重新审视？

编辑：[单元测试期间调试断言的最佳实践](https://stackoverflow.com/questions/409955/best-practice-for-debug-asserts-during-unit-testing)非常相似，但它没有回答困扰我的问题：如果我`Debug.Assert()`按照我描述的方式进行测试，我应该在 C# 中关心吗？如果是，它们在什么情况下*真正*有用？在我目前的观点中，这样的单元测试是`Debug.Assert()`不必要的。

另一点：如果你真的这么认为，这是一个重复的问题，只需发表一些评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T20:33:58.747

从理论上讲，您是对的-详尽的测试使断言变得多余。理论上。实际上，它们对于调试您的测试以及捕捉未来开发人员可能会尝试使用不符合其预期语义的接口的尝试仍然很有用。

简而言之，它们只是用于与单元测试不同的目的。他们的存在是为了捕捉那些在编写单元测试时本质上不会发生的错误。

我建议保留它们，因为它们提供了另一个级别的程序员错误保护。

它们也是一种本地错误保护机制，而单元测试在被测试的代码之外。在压力下“不经意间”禁用单元测试比禁用一段代码中的所有断言和运行时检查要容易得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T21:29:03.500

我通常看到断言用于内部状态的完整性检查，而不是参数检查之类的东西。

IMO 对可靠 API 的输入应由检查保护，无论构建类型如何。例如，如果公共方法需要一个介于 5 和 500 之间的数字的参数，则应该使用 ArgumentOutOfRangeException 对其进行保护。就我而言，快速失败并且经常使用异常失败，特别是当一个参数被推送到某个地方并且稍后使用时。

但是，在对内部瞬态状态进行完整性检查的地方（例如，在循环期间检查某些中间状态是否在合理范围内），似乎 Debug.Assert 更适用。尽管传递了有效参数，但当您的算法出错时，您还打算做什么？抛出 EpicFailException？:) 我认为这是 Debug.Assert 仍然有用的地方。

我仍然不确定两者之间的最佳平衡。自从我开始单元测试以来，我已经停止在 C# 中大量使用 Debug.Asserts，但是 IMO 仍然有它们的位置。我当然不会用它们来检查 API 使用的正确性，但是在很难到达的地方进行健全性检查？当然。

唯一的缺点是它们可以弹出并停止 NUnit，但您可以编写一个 NUnit 插件来检测它们，并使任何触发断言的测试失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T21:21:11.443

我出于不同的目的同时使用单元测试和断言。

单元测试是一种自动化实验，表明您的程序（及其部分）按规定运行。就像在数学中一样，只要你不能尝试所有可能的输入组合，实验就不是证明。没有什么比即使使用单元测试，您的代码也会有错误这一事实更好地证明这一点。数量不多，但会有。

断言用于在运行时捕获通常不应该发生的狡猾情况。也许你听说过前置条件、后置条件、循环不变量和类似的东西。在现实世界中，我们通常不会通过正式过程来实际证明（通过形式逻辑）如果满足先决条件，则一段代码会产生指定的后置条件。这将是一个真正的数学证明，但我们通常没有时间对每种方法都这样做。但是，通过检查前置条件和后置条件是否满足，我们可以在更早的阶段发现问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T20:04:26.977

如果您正在进行详尽的单元测试，涵盖您可能遇到的所有奇怪的边缘情况，那么我认为您不会发现断言非常有用。大多数不进行单元测试的人会在您进行测试时使用断言来建立类似的约束。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T21:25:23.960

我认为在这种情况下，单元测试背后的想法是将这些断言转移到测试用例中，以确保您的被测代码不是让 Debug.Assert(...) 处理它而不会抛出（或确保它正在抛出）正确向上）。

# pdf - VB6中的透明pdf打印/预览

> ID：821714
> 
> 赞同：1
> 
> 时间：2009-05-04T19:56:23.957
> 
> 标签：pdf, vb6, printing

我正在使用 VB6 开发旧版应用程序，并且想知道实现此请求功能的最简单方法是什么 - 客户希望能够预览作为 PDF 发送到打印机的文档。没问题 - 有很多 PDF 打印机驱动程序可供使用。但是，此功能的必要条件是绝对透明 - 换句话说，它应该在安装应用程序后开箱即用，而不必说“要使用此功能，请访问某某网站并下载此 pdf打印机驱动程序。” 此外，客户不希望看到“另存为...”对话框。该功能的理想功能是单击按钮，

当然，那里有大量的 PDF 包，但它们似乎都遵循“这是一个 API，您可以通过直接在 PDF 文件中直接以指定字体写入线条、圆圈、图形、文本来生成 PDF” . 我不想要这个 - 我想要一些可以直接将数据*发送到打印机*并将其作为 PDF 弹出的东西，而不需要另存为

现在，CutePDF*似乎*有类似我正在寻找的自定义 PDF 编写器 ( [http://www.cutepdf.com/Solutions/pdfwriter.asp](http://www.cutepdf.com/Solutions/pdfwriter.asp) ) 的东西，但是 a) 他们似乎没有评估版；b）他们似乎没有太多我能看到的关于它的文档，而且 c）它太贵了

有谁知道是否存在像 CutePDF Custom PDF Writer 这样的东西，或者它是唯一的一种类型？我对任何软件持开放态度，只要它完成这项工作，无论是商业软件、共享软件、开源软件还是其他任何软件，只要它满足以下要求：

*   必须是 PDF 打印机（即把数据送到打印机并转换成 PDF）
*   必须对最终用户完全透明（即用户不必更改他们的打印机设置然后再将其更改回来，或者处理“另存为”对话框然后打开他们保存的文件 - 它只需要弹出）
*   必须使用 VB6
*   必须能够与应用程序一起打包和安装，而最终用户无需运行另一个安装程序

有任何想法吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T18:43:48.817

我们已经开始使用 Bio PDF Writer，可在此处获取：www.biopdf.com。

它确实提供了静默安装的能力（我们这样做）。它还提供了以静默方式写入 pdf 文件的功能，需要先创建一个 ini 文件才能执行此操作。

但是，站点许可证的价格比 CutePDF 贵（1,499 对 299/499）。您可以以 29.99 (USD) 的价格购买单个许可证。这可能满足他们的需求（如果只是一个客户）。他们的文档相当不错，而且他们确实有一个试用版（据我所知，它没有任何限制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:54:29.357

您应该能够使用任何提供静默安装选项的 PDF 打印机软件，并在需要通过 PDF 打印时设置当前打印机：

```
Dim oldPrinter as VB.Printer
Set oldPrinter = Printer
Dim p as VB.Printer
For Each p In VB.Printers
    If p.DeviceName = "PDF Printer Name" Then
        Set Printer = p
    End If
Next
' Print Document Here '
Set Printer = oldPrinter 
```

**注意：**您需要确保分发和安装不违反许可协议

# windows - 如何获取和设置另一个应用程序的输入语言？

> ID：821719
> 
> 赞同：2
> 
> 时间：2009-05-04T19:57:09.350
> 
> 标签：windows, input, keyboard

问题是：我有一个残疾用户并使用专门的虚拟键盘。他在虚拟键盘中切换语言没有任何问题，但它并不总是改变当前活动应用程序的输入语言（输入键盘？）——这正是他所需要的。

那么我可以做任何 API 调用来查询窗口的当前输入键盘吗？更重要的是，有没有办法可以在外部设置另一个窗口的输入语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-04T16:39:31.823

System.Windows.Forms (.NET) 中有“InputLanguage”类。它允许您设置所需的输入语言。MSDN InputLanguage 类描述中提供了更多信息。

至于为特定窗口设置语言 - 有一个解决方案：

1.  您应该创建一个程序来捕获当前选定的窗口并在后台运行它；
2.  当程序运行时，它会捕获用户当前正在处理的程序的名称并设置所需的语言；

我建议您查看一个示例 - [http://www.java2s.com/Tutorial/CSharp/0520__Windows/GetcurrentActiveWindow.htm](http://www.java2s.com/Tutorial/CSharp/0520__Windows/GetcurrentActiveWindow.htm) - 这是您获取当前活动程序信息所需的基础知识。MSDN 文章中提供了设置输入语言的示例。

# database - 增加 Windows Mobile 5 模拟器存储

> ID：821720
> 
> 赞同：2
> 
> 时间：2009-05-04T19:57:30.223
> 
> 标签：database, windows-mobile, sql-server-ce, compact-framework

我正在使用 Microsoft Sync Framework 将 SQL Server 数据库与 Windows Mobile 5 模拟器上的 SQL Compact SDF 文件同步。我们正在部署的实际设备中有一个 2 gig SD 卡，因此我们希望将我们的数据库文件存储在那里。但是，当我在 Windows Mobile 5 模拟器中将共享文件夹映射为存储卡时，SQL Compact 引擎由于错误而无法在映射的存储卡上创建或修改数据库文件。因此，为了在模拟器上的开发过程中解决这个问题，我只是将数据库存储在内部设备存储中，但是，它被限制为 32 MB，我找不到增加它的方法。有谁知道如何增加模拟器上的存储空间。我说的是存储空间而不是 RAM :)。

否则，有谁知道如何克服模拟器中的存储卡上不能有 SQL Compact 数据库文件的错误？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-11-18T10:21:30.690

在[http://forum.xda-developers.com/showthread.php?t=549675](http://forum.xda-developers.com/showthread.php?t=549675)下，您会找到一个用于设置 RAM Disk 的模拟器驱动程序，该驱动程序被视为外部存储卡，但不是遇到映射文件夹的问题。我检查了存储在 RAMDisk 中的 SQL Compact sdf 文件，它就像一个魅力。我将它用作 64MB 驱动器，但据说它最多可以处理 256MB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-24T09:10:07.227

实际上你可以做到这一点。

首先打开设备模拟​​器并运行您选择的模拟器。在我的情况下，我打开 Windows Mobile 5.0

然后，当它运行时，从设备模拟器中，右键单击您刚刚运行的模拟器并选择另存为，将其保存在某处，然后使用文本编辑器打开此文件。

在那里，您会找到一个显示 memsize 的选项，将其设置如下：

```
<MemSize Reconfigurable="true">256</MemSize> 
```

不幸的是，如果您尝试将其设置得更高，则最大值为 256。

现在，从 Device Emulator 中，选择您之前刚刚保存的模拟器条目（不是原始条目，而是位于 Device Emulator 中 My Device Emulators 下的自定义条目），并将使用您刚刚修改的 cfg 文件运行。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T17:45:17.053

如果您有实际设备，我建议您通过主动同步连接设备进行测试。我不知道如何更改模拟器的内存，但我知道 HP 有模拟器，您可以下载这些模拟器进行测试，我敢打赌其中一个会与您尝试的目标相匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-20T23:30:40.880

在 Microsoft Device Emulator V3 中（请注意，它安装在并覆盖了之前的“\Microsoft Device Emulator\1.0”文件夹），使用 Windows Mobile 5，您在输入不带参数的“deviceemulator”时获得的帮助粘贴在下面。它声明的第一件事是关于 memsize 的消息。我尝试使用 > 256 MB 的值，然后弹出帮助对话框。当我试图让它将我的 /sharedfolder 识别为存储卡时，我搞砸了。也许这在较新的设备模拟器中是可能的。如果我能让它工作，我可以测试在卡上放置一个 SDF 文件。

```
设备模拟器

内存大小必须是 64 到 256 之间的值。

命令行选项帮助

binfile - 模拟器要加载的 binfile 的文件名。
@responsefile - XML 响应文件的文件名。
/a - 使模拟器窗口始终位于顶部。
/battery - 模拟使用电池而不是交流电运行
/batterycharge percent - 模拟电池充电百分比
/c - 创建并显示一个控制台窗口以显示串行端口 1 的输出。
/cpucore - ARMv4 或 ARMv5。默认为 ARMv4。
/cpuoptions - (T)humb、D(ebug)、I(nternetworking)、M (Long Multiply)、E (DSP) 的组合。其中，T,D,I 将永远被设置。
/defaultsave - 使用 VMID 作为保存的状态名称，并将保存的状态文件放在每个用户的目录中。
/flash filename - 启用闪存仿真并指定闪存存储文件名。
/h - 为网络数据包设置仅主机路由。
/hostkey keyname - 指定主机密钥，其中 keyname 可以是“None”、“Left-Alt”或“Right-Alt”。
/language LangID - 指定 UI 语言，其中 LangID 是十进制。
/memsize size - 设置模拟 RAM 大小，其中 size 以兆字节为单位。
/nosecurityprompt - 在从保存状态恢复时启用可能不安全的外围设备时不提示。
/n [macaddress] - 启用 CS8900 网络适配器，其中可选的 macaddress 指定卡将绑定到哪个主机适配器。
/p [macaddress] - 启用 NE2000 PCMCIA 网络适配器，其中可选的 macaddress 指定卡将绑定到哪个主机适配器。
/r address - 指定 ROM 文件基地址（十六进制）。
/rotate angle - 以度数旋转显示，其中角度可以是 0、90、180 或 270。
/s 文件名 - 指定保存状态文件名。
/sharedfolder directoryname - 将 directoryname 挂载为存储卡。
/skin 文件名 - 加载指定的皮肤文件。
/tooltips state - 启用或禁用工具提示，其中状态为“ON”或“OFF”。
/u0 serialport /u1 serialport /u2 serialport - 将客户机串行端口 0-2 映射到 Windows 串行端口。
/vfp - 矢量浮点协处理器：真或假。默认为假。
/video xx - 指定屏幕大小和位深。
/vmid {GUID} - 指定 VMID GUID。
/vmname name - 指定窗口标题。
/z - 将显示缩放到正常大小的 2 倍。
/speakerphone - {[SpeakerPhone][Headset][Carkit]} - 0-7 之间的位图数字，指定免提电话、耳机、Carkit 模式。

好的   

```

# file - Web 服务器文件结构的最佳实践

> ID：821721
> 
> 赞同：2
> 
> 时间：2009-05-04T19:57:34.530
> 
> 标签：file, filesystems

有没有关于如何在服务器上布局 webroot 的最佳实践？

例如，我目前有一个具有这种结构的网站：

```
/var/www/current/html (public dir for most recent revision)
/var/www/dev/html (public dir for dev version)
/home/user/www/html (for users public sandbox) 
```

其他人如何布局他们的 www 文件结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T20:09:32.490

我不知道任何最佳做法。将它保存在 /var 中是个好主意。布局看起来不错，可以随时更改。下面通过 URL 解析的结构要困难得多，因为它是公开的，之后很难更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-08T22:06:10.507

我用这个：

```
/srv/#{protocol}/#{host.split('.').reverse.join('/')}/%/ 
```

所以例如[http://www.example.net/index.html](http://www.example.net/index.html)变成

```
/srv/http/net/example/www/%/index.html 
```

它紧跟 DNS 的树形结构，遵循[文件系统层次标准](http://www.pathname.com/fhs/pub/fhs-2.3.html#SRVDATAFORSERVICESPROVIDEDBYSYSTEM)，并以类似的方式轻松委派控制，例如通过符号链接 DNS 中的用户指向他们的`~/web`或类似的。然后用户可以通过以下方式轻松创建子域`mkdir -p web/sub1/%`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:09:10.477

我认为这是最典型的做法。我使用很多子域和东西，所以我倾向于做类似的事情：

```
/home/user/www/sub1.domain.com/
/home/user/www/sub2.domain.com/ 
```

# asp.net - 将设置移动到另一个配置文件

> ID：821735
> 
> 赞同：11
> 
> 时间：2009-05-04T19:59:28.223
> 
> 标签：asp.net, configuration, web-config, settings

是否可以将 applicationSettings 移动到另一个配置文件，就像使用 connectionStrings 或 appSettings 一样？

当我使用设计器为我的 Web 应用程序创建设置时，我在 web.config 中获得了 applicationSettings 部分，例如：

```
 <applicationSettings>
    <TestWebApplication.Properties.Settings>
      <setting name="AnotherSetting" serializeAs="String">
        <value>Another setting value</value>
      </setting>
    </TestWebApplication.Properties.Settings>
  </applicationSettings> 
```

我希望能够将它们移动到另一个文件，例如 appSettings：

```
<appSettings configSource="config\appsettings.config"/> 
```

我正在处理一个项目，该项目具有通过设计器生成的类访问的大量设置，并且 web.config 很难在多个环境之间维护。如果我可以强制设置类使用 appSettings 而不是 applicationSettings，那就更好了。

是否可以？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-12-07T01:50:32.703

Waaaay这个问题迟到了，但我只是在这个问题上撞到墙上。事实证明您可以这样做，只是不能针对整个 applicationSettings 节点，您必须分别执行 applicationSettings 的每个子节点。[我从MSDN SectionInformation.ConfigSource](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource(VS.85).aspx)文章的底部得到了神奇的信息。

### app.config/web.config 内容

```
<applicationSettings>
    <TestWebApplication.Properties.Settings configSource="externalfile.config" />
</applicationSettings> 
```

### externalfile.config 内容：

```
<TestWebApplication.Properties.Settings>
    <setting name="AnotherSetting" serializeAs="String">
        <value>Another setting value</value>
    </setting>
</TestWebApplication.Properties.Settings> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T21:06:46.440

是的，当然有可能！任何配置文件中的任何 ConfigurationSection 都可以通过 configSource="otherConfigFile.config" 属性“外部化”。

> 如果我可以强制设置类使用 appSettings 而不是 applicationSettings，那就更好了。

为此，您需要摆脱在 .NET 中使用漂亮的可视化“设置”类并直接使用 ConfigurationManager。这样，您可以将设置放入 <appSettings> 并使用 ConfigurationManager.AppSettings["keyname"] 读取它们。

马克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T20:46:11.637

如果这是我的项目，我会摆脱 applicationSettings 并将所有内容移至 appSettings 部分。applicationSettings 的值是这些值可以是强类型的并且可供 Intellisense 使用。这些都不是对您的情况特别有利。当然，如果您仍在通过设计器创建设置，那么移动所有内容的巨大成功是不值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:07:51.883

嗯...我知道这是可能的，因为我知道我们在以前的工作中这样做过。不过，我不记得到底是怎么回事。我相信我们有一个父项目用来继承设置，并且有一个手动步骤，如果我们对子项目中的 applicationSettings 进行更改，我们需要手动将更改复制到父项目（但是然后它们被所有子项目继承）。

抱歉，缺乏特异性；我不是实施该解决方案的人，随着时间的推移，它对我来说有点模糊。不过，我确实记得我们能够做到这一点，而且我认为我的回忆对于我们是如何做到的是准确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-10T23:08:34.833

这个问题很长一段时间都没有被标记为答案。好吧，在 marc_s 的回答下，有评论解释说这是不可能的。我不想将 marc_s 答案标记为已接受的答案，因为评论说的与答案完全相反。所以答案是，不幸的是，这是不可能的。

# asp.net - ASP.NET RadioButtonList 为包含图像的 ListItem 生成额外的 HTML

> ID：821739
> 
> 赞同：1
> 
> 时间：2009-05-04T20:00:17.643
> 
> 标签：asp.net, radiobuttonlist

在我的应用程序中，我有一个 RadioButtonList：

```
<asp:RadioButtonList runat="server" ID="CardTypeRadioButtonList" RepeatDirection="Horizontal">
    <asp:ListItem Value="Visa">
        <img src="../images/icon_visa.gif" alt="Visa" align="absmiddle">&nbsp;Visa
    </asp:ListItem>
    <asp:ListItem Value="MasterCard">
        <img src="../images/icon_mc.gif" alt="MasterCard" align="absmiddle">&nbsp;Mastercard
    </asp:ListItem>
</asp:RadioButtonList> 
```

但是，有时 Visual Studio 会自动生成以下代码并将其插入到我的 ListItems 中：

```
&lt;img src=&quot;../images/icon_visa.gif&quot; alt=&quot;Visa&quot; align=&quot;absmiddle&quot;&gt;&#160;Visa 
```

知道如何让它消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T14:15:45.527

我尝试在每个 ListItem 上放置一个空白文本属性。希望这能让这个问题消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:11:44.573

您在第二个“img”标签处缺少“<”

```
<asp:RadioButtonList runat="server" ID="CardTypeRadioButtonList" RepeatDirection="Horizontal">
<asp:ListItem Value="Visa">
    <img src="../images/icon_visa.gif" alt="Visa" align="absmiddle"> Visa
</asp:ListItem>
<asp:ListItem Value="MasterCard">
   <img src="../images/icon_mc.gif" alt="MasterCard" align="absmiddle"> Mastercard
</asp:ListItem> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T06:32:09.390

大约一年前，我在 Telerik 控件上遇到了类似的问题，最后写了一个宏来根据需要修复它，因为我无法弄清楚。这不是最好的解决方案，但如果您不知道该怎么做，可以很容易地创建一个宏来根据需要在 Visual Studio 中修复代码。

# php - 这个面试问题对于 php 开发人员来说是否太难了。工作？

> ID：821740
> 
> 赞同：12
> 
> 时间：2009-05-04T20:00:19.717
> 
> 标签：php

我们正在寻找可以帮助我们增强和维护我们的高质量、基于 php 的事务性 Web 应用程序原型的人。理想情况下，谁能很好地沟通，并同时进行前端和后端 Web 开发（以及智能/完成工作等）。在其他更一般的事情中，我一直在使用这个问题：

> 鉴于这种：
> 
> ```
>     $foo = 数组(1, 3, 7);
> 
> ```
> 
> 编写一个函数（在此白板上）对数组的值求和。

这对我来说似乎很容易，但却造成了一些头灯下的情况，这总是让我觉得自己像个恶棍。

我在这里和那里读过很多帖子（包括 Joel 和 Jeff 的），说候选人的思维方式、设计技能、热情等比任何特定的技术技能都更重要，我同意这一点。另外，我可以看到在白板上编程有点不切实际。OTOH，这对我来说似乎很基础，以至于我倾向于将其视为前端开发人员之间的一个很好的首过过滤器（他们了解 html、css 以及如何复制和粘贴 js 函数或二），以及真正会编码的人。想法？

更多信息：我对各种答案持开放态度：array_sum、for 循环、foreach 循环。哎呀，如果他们想编写一个 ArraySum 类，那将是矫枉过正，但很好。使用 javascript 或其他语言会很好，如果他们对此更满意的话。即使尝试有小错误也可以，但我已经完全冻结了几次，所以我只是想自我检查一下。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-05-04T20:11:26.663

我个人认为这个问题太简单了。如果有人在采访中问我这个问题，我可能会忙着弄清楚“诀窍”是什么，因为它太简单了。

我认为淘汰绝对最差的程序员是很好的，但请确保您没有一个特定的“正确”答案并拒绝接受其他任何事情。例如，不要只接受“使用 array_sum() 函数”作为正确答案，这实际上只是一个测试，看看他们是否知道该函数存在。

我提到这一点是因为我的未婚妻曾经在一次编程面试中被问到如何反转字符串。她给出了几种不同的算法来完成它，面试官在每个算法之后都告诉她她错了。她最终放弃了，他（不赞成）告诉她，她应该只使用 String.Reverse() 函数。

不要那样做。请。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-05T09:44:08.833

在我看来，这个问题是完全有效的，并且根据你投入了多少时间来告诉候选人（不是很多，但很重要）。只是事先告诉她这不是一个技巧问题，它真的，真的像看起来那么简单，所以她不会花太多时间去思考陷阱并尽量减少鹿的情况。投入你这样做只是为了过滤掉那些申请编程的人而不实际了解它但希望他们无论如何都能被纯粹运气雇用的人（如果他们知道如何编码但只是紧张，那应该需要一个有点压力）。让他们编码，但不要关注是否缺少 $ 或`<?php`标签是否存在。

如果她提供`array_sum`或`sum_array`作为答案几乎无关紧要，特别是如果所讨论的语言是 php （但如果两个候选人是平等的，否则......*我什至不记得我最后一次不得不使用这个功能*）。事后看来，使用自动完成和语法着色（使用预定义的关键字）IDE 与愚蠢的文本编辑器非常重要。在这种情况下，请寻求替代的手工解决方案。

如果我处于提出这个问题的位置，我不会要求*正确的解决方案*，我会询问她想到如何解决这个问题的方法，在特殊情况下会出现哪些陷阱。试着找出她对*编程*的了解，而不是她对 php 的了解。尝试了解智力、解决问题的能力和创造力。即使在快速编写代码时，经验也很重要，但这不是一个常数。

我将提供的解决方案，优点/缺点以及它告诉我的...

*   **内置的`array_sum`**（非常快且明确没有错误，但不灵活）：*我对传统的 php 项目有一些经验*

*   **for/loop 构造**（足够好，重新发明轮子。但如果对象与数字不同，则可以使用。优点：每个人都会理解）：*如果没有预定义的复制和粘贴解决方案，我可以解决简单的问题*

*   **`array_reduce`**`array_reduce`（如果面试官想看的话，可以提供 implementationat ）：*对于 php 程序员来说是不寻常的，所以我似乎在 php 沙箱之外有知识和经验*

*   一个**ArraySum-Object**（使用一种`ArraySum::add($value)`方法可以存储所有值但缓存总和）：*我至少习惯了一些 oop 原则*

*   **函数 () { 返回 11;** （声明这是一个玩笑的解决方案，但有效）：**我***有（尽管很粗糙）程序员特有的幽默——这是我个人对工作之外的编程感兴趣的标志*......一些是程序员的面试官（但不是如果时间限制太紧，黑客）可能会将此解释为愿意使用肮脏的黑客作为占位符*（aehm）*

*   **递归解决方案**会很好。**我可能也可以解决更复杂的算法问题，而且大多数人都知道我在简单树和数据结构方面的方法**

*   **递归分而治之**：奖金！**我更了解算法。**

尽量从这个问题中解脱出来（如果时间允许的话）。最后，您将了解一点编程能力和很多经验（尽管不一定特定于 PHP）。

我会选择这个问题，而不是让候选人写出快速排序——一个关于网络开发世界几乎不需要的知识的非常具体的问题——任何时候。

### 免责声明

当......时，这个问题是无用的

*   面试官不是程序员。如果一个 hr-guy 正在做就忘了它
*   面试的时候时间很紧。那么结果几乎是随机的。

另外，你在找谁？如果你需要一个廉价的 grunt 编码器，即使是这样一个简单的问题也应该可以。如果您需要质量和经验，请不要在上面浪费太多时间（但无论如何都要这样做）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-04T20:03:25.560

不，这不是太难。如果有人不理解循环的概念或如何遍历数组，那么他们就没有资格成为程序员。我还希望他们知道有一个内置函数（array_sum()），或者至少在哪里可以找到它。

您可能想查看[五个基本的电话筛查问题](http://steve.yegge.googlepages.com/five-essential-phone-screen-questions)，尽管您可能需要对它们进行一些修改以满足您的需要。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-04T20:06:05.820

我自己的观点是，你可以在白板上提出的玩具问题是有限度的。充其量，这些只是经常在在线论坛上传播的玩具，你的候选人会记住的。

大多数 PHP 开发人员创建了可见的网站——您可以看到他们的工作。

对我来说，一个更好的问题是给他一段复杂的你自己的生产代码，让他解释它的作用或如何改进等等。大部分时间无论如何都会花在维护上，最好得到一个关于他的代码阅读技巧的想法，而不仅仅是代码编写。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-04T20:26:54.927

**简短的回答：**没有

*编辑：只是为了澄清我认为这根本不是一个难题。不管是什么语言。正如其他人所发布的那样，即使他们无法获得正确的语法，至少应该能够用合理的伪代码将其写出来。*

**长答案：** 我经常问我希望候选人错过的面试问题。人们也可以将它们归类为（硬|模糊|开放式），但我并不是真的在寻找答案。我希望看到以下内容：

*   他们是否试图回答这个问题？有些人直接放弃
*   他们如何解决问题？即使他们走错了路，他们通常会做出好的假设并提出好的问题吗？
*   他们在压力下保持镇静的能力如何？这个问题被设计成很难，因此会有压力。他们是否恐慌、保持冷静、退缩、说出来等等……？
*   如果我给他们提示和指示，他们是否能够找到解决方案？或者他们听得有多好，他们是否能迅速吸收新信息？

有时我会对一个聪明的候选人感到惊讶，并且只是编写一个快速而优雅的解决方案。那些是绝对的守护者。但我也会从那些错过最终解决方案的人那里找到好的候选人，但他们显然是周到的、合乎逻辑的，并且给了足够的时间最终会解决问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-04T20:12:38.567

不，这不是太难，但是如果人们不完全记住语法，可能会引起恐慌（尽管如果您专门要求 php 开发人员，那么他们至少应该记住一些语法）。而是要求伪代码，如果他们仍然不能做这个问题，那么就有问题了:)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-04T20:04:55.947

如果你的申请者不能在白板上写一个简单的 for 循环和一些补充，你绝对不希望他们接触你的代码。即使作为前端开发人员，他们也会一直使用 for 循环来输出列表、表格行、图像库等。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-04T20:07:12.480

这是您在费心将候选人带入公司之前通过电话询问的基本问题。

我向每个程序员询问了一些标准的事情：在两个表上进行选择以给出第二个表中的列的总和，在一秒钟内根据值从一个表中删除记录，对象和字符串之间的差异作为方法参数，以及一些与 html/css 相关的问题。

在 5 个问题之内，我甚至可以在我还没看到他们之前就淘汰 90% 的候选人。其余的将归结为意识形态。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-08T17:53:07.673

我最喜欢的是：

```
while ($foo && $sum += array_shift($foo)) continue; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-04T20:03:36.497

这不是太难。如果他们不能回答这个问题，他们显然无法从湿纸袋中编码出来。我绝对不会雇用这样的人来从事任何类型的开发工作。

问题是，您如何改进招聘流程以避免一开始就面试这些候选人？在我看来，您在邀请他们聊天之前没有对您的申请人进行足够的筛选。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-04T20:15:39.353

通过提供 array() 函数的文档可以更好地改进这个问题，因为如果他们不知道它是什么，他们可以很容易地在工作中自己查找它。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-05-04T20:18:37.507

如果你不能编写代码来对数组求和（用你喜欢的任何语言），我不知道你能写什么。如果他们不能编写代码来解决这个问题，您认为有人可以为您的项目做出什么贡献？

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-04T20:03:18.727

实际上，这个问题似乎有点……简单。

不过，我想把它写在白板上会更困难。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-04T20:04:51.080

（我认为该`array_sum($array)`方法作为 PHP 的一部分可以完成这项工作。）

这个问题真的*很*琐碎。尽管在压力大的情况下有足够的空间容错，但是对于任何具有任何语言基本编程技能的人来说，总结一个数组应该很容易。

用这样的问题来搞砸面试是很愚蠢的。这个问题并不难，实际上很宽大。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-04T20:09:00.273

对于有编程经验的人来说，这个问题应该很容易，但我猜你可能会得到很多通过复制/粘贴代码片段来选择 PHP 的设计师。

也许您需要更新您的工作列表，以使其更加以编程为中心并避免使用网页设计术语。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-05-04T20:18:31.250

不，这并不难。你发现有很多“程序员”不会编程——他们可以记忆，可以复制和粘贴，但他们实际上并不*了解*自己在创造什么（在大多数情况下，他们似乎完全不知道他们缺乏理解）。

当他们被要求从头*开始编写一些**简单*的东西时，这种缺乏理解变得非常明显——*只*编写胶水代码，没有他们通常只是作为代码片段抓取的所有复杂内容，然后四处移动，直到编译器停止抱怨。

 **一般来说，您希望避免像瘟疫一样的这些人，因为他们会不断产生错误的代码，并且不会理解为什么您或您的客户认为它不起作用。

杰夫几年前写过这篇文章：[为什么程序员不能……编程？](http://www.codinghorror.com/blog/archives/000781.html)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-05-04T20:33:56.923

老实说，我想如果一个人申请编程职位，他或她的简历上可能会有相关技能。如果该职位不需要相关语言的某种特殊技能，为什么不问简单的问题解决问题呢？曾经有人问我，我的国家有多少家比萨店。他们有兴趣检查我是如何解决问题的，而对我在相关编程语言中的表现并不真正感兴趣。我认为这是一个很好的方法。我这样想是不是大错特错了？

编辑：或者人们伪造他们的简历是很常见的？

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-05-04T20:09:14.533

这取决于你想问什么。你在筛选他们回忆语法的能力吗？或者您是否正在寻找处理数组函数的最佳实践方法？如果是第一种情况，你的问题很好。

另一方面，如果您想了解一个人对代码的实际理解程度，并根据事物的结构了解其含义，那么这个问题很好，但不要要求他们逐行编写函数，而是邀请一个讨论他们将如何做到这一点，以及他们的回答会考虑哪些因素。为什么不通过方法B呢？

输入法，要求死记硬背的记忆响应（语法回忆，端口号等）告诉你个人能力的某些方面，有时需要被问到。但更重要的是挖掘他们解决问题的能力。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-05-04T20:10:09.600

我不明白为什么有人会对此有任何问题。（假设他们是开发人员）是的，在白板上编程是不现实的，但这是任何开发人员都应该能够解决的微不足道的问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-05-04T20:24:27.553

我有一个鹿在车头灯的时刻想知道诀窍是什么！

任何申请编程工作的人都知道如何将整数相加（一种或另一种，即使它在一个循环中），所以我会跳过它并找到更具挑战性的东西......但不是那么混乱！:)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-05-05T09:25:10.890

我最近完成了 PHP 职位的面试。我被要求在纸上写简单的函数（当然不像你的例子那么简单）。

无论如何，当我完成那个功能（大约 6 行 Python 代码）时，面试官很高兴。他们告诉我，有很多人没有 IDE 就无法编写任何代码，这个小测试可以过滤掉他们。

至于你的例子——这很简单。特别是如果您接受`array_sum()`作为答案。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2011-07-15T09:41:30.247

如果您几年前问我，我不会相信那里有这样的“程序员”。但是已经看到的东西不能不被看到。我亲眼目睹了以编程网站为生但对编程一无所知的人。他们只是复制并粘贴其他人的代码，直到他们运行为止。而且你不可能相信他们的收入水平与他们的“技能”相比如何（是的，收入水平与技能没有直接关系，但它仍然让我感到害怕）。

是的，你是理智的，那些人确实存在。您正在做的是从真正的编码人员中过滤“实用主义脚本复制粘贴”（或其他）的有用过滤器之一。当然，除非您想要复制粘贴（他们可以完成一些简单的任务！-或者更复杂的任务，但代码令人难以置信），在这种情况下，这样的面试问题对他们来说真的很难。

# powershell - 如何在 PowerShell 中调用带有输出参数的方法？

> ID：821744
> 
> 赞同：39
> 
> 时间：2009-05-04T20:00:54.227
> 
> 标签：powershell, wmi, remote-registry

我正在编写一个开始使用[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)的脚本。我正在尝试转换一个[有效的 VBScript 脚本](http://www.visualbasicscript.com/m_28529/tm.htm)，该脚本枚举远程 Windows 计算机上的映射网络驱动器。

其中一项任务是使用远程[WMI](https://en.wikipedia.org/wiki/Windows_Management_Instrumentation)读取注册表并找到 explorer.exe 的进程所有者，以确定谁已登录。按照[本指南](http://myitforum.com/cs2/blogs/scassells/archive/2008/10/01/powershell-wmi-wql-queries-made-easy-for-remote-wmi-especially-for-sms-2003-or-configmgr-2007.aspx)，这似乎很容易。

但是，我需要调用的 WMI 方法是[来自 Win32_Process 的 GetOwner()](http://msdn.microsoft.com/en-us/library/aa390460(VS.85).aspx)，它需要两个输出参数来存储其返回值。

如何调用带有输出参数的方法？当我尝试给它两个字符串时，我收到错误：`Cannot find an overload for "GetOwner" and the argument count: "2".`. MSDN页面说有两个参数，所以我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-05-04T20:02:39.290

使用`[ref]`修饰符：

```
SomeMethod( [ref] $a ); 
```

值得注意的博客条目

*   [http://geekswithblogs.net/Lance/archive/2009/01/14/pass-by-reference-parameters-in-powershell.aspx](https://web.archive.org/web/20200923105310/http://geekswithblogs.net/Lance/archive/2009/01/14/pass-by-reference-parameters-in-powershell.aspx)
*   [http://weblogs.asp.net/soever/archive/2009/03/26/powershell-return-values-from-a-function-through-reference-parameters.aspx](http://weblogs.asp.net/soever/archive/2009/03/26/powershell-return-values-from-a-function-through-reference-parameters.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-05T13:00:41.950

```
$explorer = gwmi Win32_Process -computerName computerName -filter "Name='explorer.exe' and SessionID=0"   
$explorer.GetOwner() | select user,domain 
```

# sql - SQL选择多个总和？

> ID：821751
> 
> 赞同：9
> 
> 时间：2009-05-04T20:01:59.667
> 
> 标签：sql, sql-server, tsql

假设我有一张桌子：

```
SELECT  SUM(quantity) AS items_sold_since_date,
        product_ID
FROM    Sales
WHERE order_date >= '01/01/09'
GROUP BY product_ID 
```

这将返回自特定日期以来销售数量的产品列表。有没有办法不仅选择这个总和，还选择没有 where 条件的总和？我想查看每个产品自特定日期以来的销售情况以及所有（不受日期限制）的销售情况。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-04T20:08:16.610

```
SELECT  SUM(CASE WHEN order_date >= '01/01/09' THEN quantity ELSE 0 END) AS items_sold_since_date,
        SUM(quantity) AS items_sold_total,
        product_ID
FROM    Sales
GROUP BY product_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:04:33.623

你可以写

```
SELECT  SUM(quantity) AS items_sold_since_date,(SELECT  SUM(quantity) AS items_sold_since_date FROM    Sales
GROUP BY product_ID) as items_sold,
        product_ID
FROM    Sales
WHERE order_date >= '01/01/09'
GROUP BY product_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:04:43.997

像这样的东西？：

```
SELECT  SUM(quantity) AS items_sold_since_date,
        total_items_sold = (SELECT SUM(quantity) from Sales GROUP BY product_ID),
        product_ID
FROM    Sales
WHERE order_date >= '01/01/09'
GROUP BY product_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:17:04.357

如果您想在旁边查看总销售额，则可以使用 sum(sale_amt)，并在组中添加 sale_amt。我希望它有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T20:17:05.217

您可以使用 GROUP BY 根据日期拆分销售额。在 Oracle 中，您可以说：

```
select count(*)
      ,case when order_date >= '01/01/09' then 'after' else 'before' end
from   log 
group by case when order_date >= '01/01/09' then 'after' else 'before' end; 
```

# spring-security - 为什么我的（Spring Security）servlet 过滤器被调用两次？

> ID：821778
> 
> 赞同：2
> 
> 时间：2009-05-04T20:07:09.903
> 
> 标签：spring-security, servlet-filters

关于为什么我的 SpringSecurityFilter 子类中的 doFilterHttp 在每个请求中被调用两次的任何想法？我真的不知道从哪里开始寻找。感觉有点难受。

我正在对休假同事的代码进行逆向工程。尽我所能，这是相关的配置：

在 web.xml 中：

```
<filter>
    <filter-name>userSecurityFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>userSecurityFilter</filter-name>
    <url-pattern>*.do</url-pattern>
</filter-mapping>
<filter-mapping>
<filter-name>userSecurityFilter</filter-name>
<url-pattern>/json/*</url-pattern> 
```

在 spring-security.xml 中：

```
 <!-- Create the filter chains for developers, users and services -->
 <bean id="userSecurityFilter" class="org.springframework.security.util.FilterChainProxy">
  <security:filter-chain-map path-type="ant">
     <security:filter-chain pattern="/**/json/*"     filters="AuthFilter,anonymousProcessingFilter,exceptionTranslationFilter,filterInvocationInterceptor"/>
     <security:filter-chain pattern="/**/*.do"       filters="AuthFilter,anonymousProcessingFilter,exceptionTranslationFilter,filterInvocationInterceptor"/>
     <security:filter-chain pattern="/**"            filters="anonymousProcessingFilter,logoutFilter,exceptionTranslationFilter,filterInvocationInterceptor"/>
  </security:filter-chain-map>
</bean> 
```

看起来 /**/json/* url 将过滤器链应用了两次，而其他人只应用了一次。我要回去检查以确保我刚才所说的是真的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T20:02:35.147

好的，我想修好了。

```
<filter-mapping>
        <filter-name>userSecurityFilter</filter-name>
        <url-pattern>*.do</url-pattern>
</filter-mapping>
<filter-mapping>
<filter-name>userSecurityFilter</filter-name>
<url-pattern>/json/*</url-pattern> 
```

/json/ 下有以“.do”结尾的 url，因此这些 url 将所有 Spring Security 内容应用了两次。感谢您的回复！尽管这是一个愚蠢的问题并且我自己回答了，但通过响应让我找到了答案。非常感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:20:02.103

这里没什么好说的，但可能是 servlet 容器正在处理多个调度程序，请在 web.xml 中查找：

```
<filter-mapping>
    <filter-name>securityFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <!-- the following is optional, but some containers give the wrong default -->
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

您可以从您的 web.xml 发布过滤器映射吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T22:16:27.200

没有像经典的 Servlet 过滤器那样在 web.xml 中配置 Spring Security 过滤器。相反，它们被配置在 application-context.xml（或您在 web.xml 中导入的任何 .xml 配置文件）中的某个位置。

寻找带有这样标签的bean：

```
<custom-filter position="LAST" /> 
```

将该标签添加到 bean 会将其添加到 Spring Security 过滤器链中。我的猜测是它已正确添加到链中，并且还添加为 Servlet 过滤器，如上所示。因此，它实际上配置了两次。

# c# - 如何序列化具有接口作为属性的对象？

> ID：821780
> 
> 赞同：8
> 
> 时间：2009-05-04T20:07:46.267
> 
> 标签：c#, serialization, interface

我有 2 个接口 IA 和 IB。

```
public interface IA
{
    IB InterfaceB { get; set;  }
}

public interface IB
{
    IA InterfaceA { get; set;  }

    void SetIA(IA value);
} 
```

每个接口引用另一个。

我正在尝试按如下定义序列化 ClassA。

```
[Serializable]
public class ClassA : IA
{
    public IB InterfaceB { get; set; }

    public ClassA()
    {
        // Call outside function to get Interface B
        IB interfaceB = Program.GetInsanceForIB();

        // Set IB to have A
        interfaceB.SetIA(this);
    }
}

[Serializable]
public class ClassB : IB
{
    public IA InterfaceA { get; set; }

    public void SetIA(IA value)
    {
        this.InterfaceA = value as ClassA;
    }
} 
```

当我尝试过于序列化时出现错误，因为 2 个属性是接口。我想序列化属性。

我将如何解决这个问题？

我需要在每个接口中都有对另一个的引用。而且我需要能够来回序列化课程。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T20:23:57.837

您的代码中有各种错误，否则这将正常工作。

1.  在构造函数中`ClassA`，您正在设置一个局部变量 IB，而不是对象的 IB 对象。
2.  在`ClassB`中，您将转换回对象具体类，而不是将其单独保留为接口类型。

这是您的代码应如下所示：

```
public interface IA 
{ 
    IB InterfaceB { get; set; } 
}

public interface IB 
{ 
    IA InterfaceA { get; set; } 
    void SetIA(IA value);
}

[Serializable]
public class ClassA : IA
{    
    public IB InterfaceB { get; set; }    

    public ClassA()    
    {        
        // Call outside function to get Interface B        
        this.InterfaceB = new ClassB();

        // Set IB to have A        
        InterfaceB.SetIA(this);    
    }
}

[Serializable]
public class ClassB : IB
{    
    public IA InterfaceA { get; set; }    

    public void SetIA(IA value)    
    {       
        this.InterfaceA = value;    
    }
}

[STAThread]
static void Main()
{
    MemoryStream ms = new MemoryStream();
    BinaryFormatter bin = new BinaryFormatter();

    ClassA myA = new ClassA();

    bin.Serialize(ms, myA);

    ms.Position = 0;

    ClassA myOtherA = bin.Deserialize(ms) as ClassA;

    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T20:24:40.267

在您的对象上实现 ISerializable 以控制序列化。

```
[Serializable]
public class ClassB : IB, ISerializable
{
  public IA InterfaceA { get; set; }

  public void SetIA(IA value)
  {
     this.InterfaceA = value as ClassA;
  }

  private MyStringData(SerializationInfo si, StreamingContext ctx) {
    Type interfaceAType = System.Type.GetType(si.GetString("InterfaceAType"));
    this.InterfaceA = si.GetValue("InterfaceA", interfaceAType);
  }

  void GetObjectData(SerializationInfo info, StreamingContext ctx) {
    info.AddValue("InterfaceAType", this.InterfaceA.GetType().FullName);
    info.AddValue("InterfaceA", this.InterfaceA);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:10:18.650

假设您不想序列化接口属性，请放置以下属性

```
[NonSerialized] 
```

在接口属性上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:21:56.687

作为对您的问题的回报：另外两个问题。你序列化什么？数据库引用感知吗？

您不序列化接口；你序列化对象。您序列化的对象是 IA 或 IB 的实现。

由序列化对象决定是否应该序列化它的属性之一。如果属性*确实*需要序列化，它应该实现 Serializable 接口。

如果数据库可以识别序列化对象，则只能序列化由循环引用 A <-> B 形成的所谓“孤岛”：它应该首先为 A“分配”空间，开始序列化 A 的属性。当它到达 B 时，它会找到一个引用 A 的属性。然后序列化应该包括对 A 的序列化版本的引用。

这很像两个熟人同时搬家：首先他们会交换他们未来的地址，然后他们才会实际搬家。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-04T20:24:58.113

接口属性不可序列化。但是，引用这些属性（在子类中）的字段是。

你需要做这样的事情：

```
[Serializable]
public class ClassA : IA
{
    private IB _interfaceB;
    public IB InterfaceB { get { return _interfaceB; } set { _interfaceB = value; } }

    public ClassA()
    {
        // Call outside function to get Interface B
        IB interfaceB = Program.GetInsanceForIB();

        // Set IB to have A
        interfaceB.SetIA(this);
    }
}

[Serializable]
public class ClassB : IB
{
    private IA _interfaceA;
    public IA InterfaceA { get { return _interfaceA; } set { _interfaceA = value; } }

    public void SetIA(IA value)
    {
        this.InterfaceA = value as ClassA;
    }
} 
```

# sql-server - ORDER BY DATE 首先显示 NULLS，然后是最近的日期

> ID：821798
> 
> 赞同：64
> 
> 时间：2009-05-04T20:10:33.110
> 
> 标签：sql-server, sql-server-2000

我有一个执行选择语句的存储过程。我希望我的结果按日期字段排序，并首先显示所有日期为 NULL 的记录，然后显示最近的日期。

该声明如下所示：

```
SELECT a,b,c,[Submission Date]
FROM someView
ORDER BY [Submission Date] ASC 
```

现在这将首先显示所有提交日期为 NULL 的记录，但是当我到达其中包含日期值的行时，它们不是视图中的最新日期。

如果我用 DESC 替换 ASC，那么我会按照我想要的顺序获得日期，但 NULL 值位于我的结果集的底部。

有什么方法可以构造我的查询，以便我可以在顶部显示空值，然后在有日期值时按从最新到最旧的顺序排列它们？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2009-05-04T20:21:29.183

@Chris，你几乎拥有它。

```
ORDER BY (CASE WHEN [Submission Date] IS NULL THEN 1 ELSE 0 END) DESC, 
         [Submission Date] DESC 
```

*[编辑：#Eppz 要求我调整上面的代码，如当前所示]*

我个人更喜欢这比创建“幻数”要好得多。幻数几乎总是一个等待发生的问题。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-05-04T20:17:33.700

你可以做这样的事情，把 NULL 放在底部：

```
ORDER BY [Submission Date] IS NULL DESC, [Submission Date] ASC 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-05-04T20:27:43.007

标准 SQL（ISO/IEC 9075-2:2003 或更高版本 - 2008）提供：

```
ORDER BY SomeColumn NULLS FIRST 
```

大多数 DBMS 实际上还不支持这一点，AFAIK。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T20:14:34.847

尝试

```
SELECT a,b,c,[Submission Date]
FROM someView
ORDER BY isnull([Submission Date],cast('2079/01/01' as datetime)) ASC 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-28T15:23:16.993

```
OrderBy="ColumnName = NULL desc, ColumnName desc" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-06T16:20:52.617

我有另一个建议可能比其他所有建议都简单：

对于 SQL Server，大多数选项都不起作用，除了 case 选项。

我发现这实际上对我很有用： ORDER BY ISNULL(Submission_Date, GETDATE()) DESC

在查询的顺序位中，我将 GETDATE() 值分配给为空的 Submittion_Date 值，并且顺序正确显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T20:19:31.497

试试这个

> SELECT a,b,c,[Submission Date] FROM someView ORDER BY isnull([Submission Date] ,cast('1770/01/01' as datetime)) ASC

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-18T11:30:34.023

我知道这很旧，但是当我发现它时，我注意到接受的解决方案[https://stackoverflow.com/a/821856/7177892](https://stackoverflow.com/a/821856/7177892)可以通过将 CASE 语句的结果设为今天（GETDATE（））来简化或实际日期。

原来的：

```
ORDER BY (CASE WHEN [Submission Date] IS NULL THEN 1 ELSE 0 END) DESC, 
         [Submission Date] DESC 
```

简化：

```
ORDER BY (CASE WHEN [Submission Date] IS NULL 
               THEN GETDATE() 
               ELSE [Submission Date] 
          END) DESC 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-24T15:43:06.800

假设提交日期小于当前日期时间

```
SELECT a,b,c,[Submission Date]
FROM someView
ORDER BY ISNULL([Submission Date], GETDATE()) DESC 
```

# opengl - OpenGL屏幕过渡效果？

> ID：821802
> 
> 赞同：0
> 
> 时间：2009-05-04T20:11:22.640
> 
> 标签：opengl, screen, effects, transitions

任何熟悉使用普通 OpenGL 演示屏幕/页面转换效果的资源或示例源代码的人？（最好是 C/C++，而不是使用 QT）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T21:05:05.973

如果我正确地解释了您的问题，那么您在 OpenGL 中有两个场景渲染，并且您希望从一个场景移动到另一个场景。

几年前我正在编写一个游戏，我想在其中拥有一个世界和一个战斗画面——就像最终幻想一样。在那，我决定编写一个“粉碎”效果。为此，我将当前场景渲染为纹理，将其映射到一组三角形上，然后将三角形移开，同时在背景中渲染新场景。

为了将您当前的场景作为纹理，假设您已经有一个纹理对象，您可以使用 glCopyTexSubImage2D，如下所示：

glBindTexture(GL_TEXTURE_2D, textureID); glCopyTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, 0, 0, screenWidth, screenHeight);

# java - 如何使用正则表达式选择文件路径

> ID：821806
> 
> 赞同：0
> 
> 时间：2009-05-04T20:11:58.630
> 
> 标签：java, xml, regex

我想创建一个 java 正则表达式，它选择从**file:**到文件路径中最后一个正斜杠 (/) 的所有内容。这样我就可以用不同的路径替换它。

```
<!DOCTYPE "file:C:/Documentum/XML%20Applications/joesdev/goodnews/book.dtd"/>
<myBook>cool book</myBook> 
```

有没有人有任何想法？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T20:18:57.113

您只想转到结束引号之前的最后一个斜杠，对吗？如果是这样的话：

> `file:[^"]+/`

（字符串“file:”，然后是除“之外的任何内容，以 / 结尾）
正确转义：

```
String regex = "file:[^\"]+/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:16:28.290

试试这个：

`"file:.*/[^/]*"/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:20:06.457

您可以尝试自己处理它，但更好的方案是只选择引号之间的部分并使用 java.util.File 将目录名与文件名分开。这样您就不必担心 / vs \ 或各种转义字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:23:27.277

```
String newPath = "C:/Documentum/badnews";
String originalPath = "<!DOCTYPE \"file:C:/Documentum/XML%20Applications/joesdev/goodnews/book.dtd\"/>";
System.out.println(originalPath.replaceFirst("file:C:((/[/\\w%]+))", newPath)); 
```

# sql - 对相关记录进行分组，但仅从第一条记录中选择某些字段

> ID：821811
> 
> 赞同：3
> 
> 时间：2009-05-04T20:13:00.373
> 
> 标签：sql, postgresql, group-by, aggregate-functions

我正在对多个记录执行聚合函数，这些记录按公共 ID 分组。问题是，我还想导出一些其他字段，这些字段在分组记录中可能不同，但我想从其中一个记录中获取这些特定字段（第一个，根据查询的 ORDER BY）。

起点示例：

```
SELECT
  customer_id,
  sum(order_total),
  referral_code
FROM order
GROUP BY customer_id
ORDER BY date_created 
```

我需要查询推荐代码，但在聚合函数之外执行此操作意味着我也必须按该字段进行分组，这不是我想要的 - 在此示例中，我需要每个客户恰好一行。我真的只关心第一个订单的推荐代码，我很乐意丢弃任何以后的推荐代码。

这是在 PostgreSQL 中，但可能来自其他数据库的语法可能足够相似以工作。

被拒绝的解决方案：

*   不能使用 max() 或 min() 因为顺序很重要。
*   子查询一开始可能会起作用，但不能扩展；这是一个极其简化的例子。我的实际查询有几十个字段，比如我只想要第一个实例的参考代码，以及几十个 WHERE 子句，如果在子查询中重复，将成为维护的噩梦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T21:55:46.850

嗯，其实很简单。

首先，让我们编写一个将进行聚合的查询：

```
select customer_id, sum(order_total)
from order
group by customer_id 
```

现在，让我们编写一个查询，该查询将返回给定 customer_id 的 1strefer_code 和 date_created：

```
select distinct on (customer_id) customer_id, date_created, referral_code
from order
order by customer_id, date_created 
```

现在，您可以简单地加入 2 个选择：

```
select
    x1.customer_id,
    x1.sum,
    x2.date_created,
    x2.referral_code
from
    (
        select customer_id, sum(order_total)
        from order
        group by customer_id
    ) as x1
    join
    (
        select distinct on (customer_id) customer_id, date_Created, referral_code
        from order
        order by customer_id, date_created
    ) as x2 using ( customer_id )
order by x2.date_created 
```

我没有测试它，所以它可能有错别字，但通常它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:21:43.567

您将需要[窗口函数](http://www.postgresql.org/docs/8.4/static/tutorial-window.html)。这是一种 GROUP BY，但您仍然可以访问各个行。虽然只使用了 Oracle 等价物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:34:40.667

也许是这样的：

```
SELECT
     O1.customer_id,
     O1.referral_code,
     SQ.total
FROM
     Orders O1
LEFT OUTER JOIN Orders O2 ON
     O2.customer_id = O1.customer_id AND
     O2.date_created < O1.date_created
INNER JOIN (
     SELECT
          customer_id,
          SUM(order_total) AS total
     FROM
          Orders
     GROUP BY
          customer_id
     ) SQ ON SQ.customer_id = O1.customer_id
WHERE
     O2.customer_id IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:40:20.777

如果 date_created 保证每个 customer_id 都是唯一的，那么您可以这样做：

[简单表]

```
create table ordertable (customer_id int, order_total int, referral_code char, date_created datetime)
insert ordertable values (1,10, 'a', '2009-01-01')
insert ordertable values (2,15, 'b', '2009-01-02')
insert ordertable values (1,35, 'c', '2009-01-03') 
```

[用更好的东西替换我蹩脚的表名:)]

```
SELECT
  orderAgg.customer_id,
  orderAgg.order_sum,
  referral.referral_code as first_referral_code
FROM (
        SELECT
          customer_id,
          sum(order_total) as order_sum
        FROM ordertable
        GROUP BY customer_id
    ) as orderAgg join (
        SELECT
          customer_id,
          min(date_created) as first_date
        FROM ordertable
        GROUP BY customer_id
    ) as dateAgg on orderAgg.customer_id = dateAgg.customer_id
    join ordertable as referral 
        on dateAgg.customer_id = referral.customer_id
            and dateAgg.first_date = referral.date_created 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T23:00:00.877

这样的事情会奏效吗？

```
SELECT
  customer_id,
  sum(order_total),
  (SELECT referral_code 
   FROM order o 
   WHERE o.customer_id = order.customer_id 
   ORDER BY date_created 
   LIMIT 1) AS customers_referral_code
FROM order
GROUP BY customer_id, customers_referral_code
ORDER BY date_created 
```

这不需要您在两个地方维护 WHERE 子句并保持顺序重要性，但如果您需要“数十个字段”，例如referral_code，就会变得非常麻烦。它也相当慢（至少在 MySQL 上）。

在我看来`referral_code`，这几十个字段应该在客户表中，而不是订单表中，因为它们在逻辑上与客户 1:1 相关联，而不是订单。将它们移到那里将使查询更简单。

这也可以解决问题：

```
SELECT
  o.customer_id,
  sum(o.order_total),
  c.referral_code, c.x, c.y, c.z
FROM order o LEFT JOIN (
    SELECT referral_code, x, y, z
    FROM orders c 
    WHERE c.customer_id = o.customer_id 
    ORDER BY c.date_created
    LIMIT 1
) AS c
GROUP BY o.customer_id, c.referral_code
ORDER BY o.date_created 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T15:16:05.273

```
SELECT  customer_id, order_sum,
        (first_record).referral, (first_record).other_column
FROM    (
        SELECT  customer_id,
                SUM(order_total) AS order_sum,
                (
                SELECT  oi
                FROM    order oi
                WHERE   oi.customer_id = o.customer_id
                LIMIT 1
                ) AS first_record
        FROM    order o
        GROUP BY
                customer_id
        ) q 
```

# linux - POSIX ACL 和应用于目录的“粘性”位

> ID：821815
> 
> 赞同：2
> 
> 时间：2009-05-04T20:13:29.420
> 
> 标签：linux, security, unix, posix, acl

[POSIX.1e](http://wt.tuxomania.net/publications/posix.1e/)打算为 POSIX 定义 ACL（[访问控制列表](http://en.wikipedia.org/wiki/Access_control_list)）机制（以及其他与安全相关的问题），但这些提案从未转换为正式标准。[尽管如此，至少在所有主要的 Unix 变体（ Linux](http://www.cs.unc.edu/cgi-bin/howto?howto=linux-posix-acls)、[BSD](http://www.freebsd.org/doc/en/books/handbook/fs-acl.html)、[MacOS X](http://developer.apple.com/documentation/Darwin/Reference/Manpages/man1/chmod.1.html#//apple_ref/doc/man/1/chmod) [(ACL)](http://developer.apple.com/documentation/Darwin/Reference/Manpages/man3/acl.3.html)、[HP-UX](http://www.docs.hp.com/en/5992-3387/ch06s03.html)、[AIX](http://publib.boulder.ibm.com/infocenter/systems/topic/com.ibm.aix.security/doc/security/security.pdf) (p107ff)、[Solaris](http://www.softpanorama.org/Solaris/ACL/index.shtml) ）中都支持 ACL（不一定是 POSIX.1e ACL ）。我还没有发现讨论的一个细节是文件上的 ACL 如何与目录上的粘性位交互。

对于普通目录（没有 ACL 来混淆问题），可以将权限设置为例如 1777（例如，在 /tmp 上找到）。

```
drwxrwxrwt  16 root     sys         4819 May  4 12:09 /tmp 
```

粘性位由权限最后位置的“t”表示。这意味着如果用户可以写入文件，则用户只能从目录中删除文件。这是有道理的；如果用户可以写入文件，则文件的内容可以被破坏。

我的问题是：

*   假设 /tmp 目录的一般（非 ACL）权限如上所示。
*   进一步假设偏执的用户“trembler”将文件的非 ACL 权限设置`/tmp/secret`为 600（用户“trembler”，组“worried”）。
*   假设 'trembler' 通过专门引用 'blase' 的 ACL 将 /tmp/secret 上的 'rw' 访问权限授予另一个用户，'blase'。
*   **可以'blase'删除文件`/tmp/secret`**

如果考虑 ACL，答案应该是“是”；如果忽略 ACL，答案将是“否”。假设在相关文件系统上启用了 ACL，所有 Unix 变体的行为是否一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T22:20:55.667

> 假设在相关文件系统上启用了 ACL，所有 Unix 变体的行为是否一致？

由于 ACL 没有在 Unix 变体中统一实现，我希望行为可能在 Unix 变体之间有所不同，但并非必须如此。除非所有 Unix 都实现相同（标准）的 ACL 方式，否则恕我直言，无法保证所有 Unix 变体的统一行为。

# javascript - IE 中的 jQuery $.get 问题

> ID：821816
> 
> 赞同：4
> 
> 时间：2009-05-04T20:14:07.440
> 
> 标签：javascript, jquery, internet-explorer

我有一个登录表单，当用户注销时，它会出现在我所有页面的顶部。我当前的 jQuery/javascript 代码适用于 Firefox 3，但不适用于 IE 7。该代码查询一个页面，该页面仅根据登录是否成功返回字符串“true”或“false”。在我的 $.ready() 函数调用中，我有以下内容......

```
$('#login_form').submit(function() {

        var email = $('input#login_email').val();
        var pw = $('input#login_password').val()

        $.get('/user/login.php', { login_email: email, login_password: pw }, function(data) {
            alert('get succeeded');
            if(data == 'true') {
                $('#login_error').hide();
                window.location = '/user/home.php';
                alert('true');
            }
            else {
                $('#login_error').show();
                alert('false');
            }

        });

        alert('called');

        return false;
    }); 
```

在FF中，我成功转移到了预期的页面。然而，在 IE 中，以下警报“被调用”，仅此而已。当我刷新页面时，我可以看到我已登录，因此 $.get 调用显然正在通过，但回调函数似乎没有被调用（即“获取成功”没有弹出）。我似乎也没有收到任何 javascript 错误消息。

为什么这在 IE 中不起作用？

谢谢

**编辑：**由于有几个人问过，每当我输入正确的电子邮件/密码或不正确的电子邮件/密码时，回调函数中都不会发生任何事情。如果我在输入正确的页面后手动刷新页面，则我已登录。否则，我没有。

**编辑 2：**如果我`data`在回调函数中发出警报，则 IE 中没有任何反应（我没有收到警报弹出窗口）。在 FF 中，它会`true`针对有效的电子邮件/密码组合和`false`无效的组合发出警报。我正在使用 jQuery 1.3.2。

**编辑 3：**好的，伙计们，我在那里尝试了 R. Bemrose 的东西，我在返回的数据上得到了一个“parseerror”。我只是从其他 PHP 脚本中呼应“真”或“假”。我也尝试了“是”和“否”，但这仍然给了我一个解析错误。此外，除了 FF 之外，这也适用于 Chrome。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T22:54:01.580

在您的响应类型中使用：

标头（“内容类型：应用程序/xml；字符集=utf-8”）；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T21:31:09.920

听起来很愚蠢……也许 IE7 对丢失的分号保持警惕`var pw`？

可能不会，但我能想到的获取更多信息的唯一方法是将其转换为 $.ajax 调用，以便添加错误挂钩并查看它认为正在发生的错误类型。哦，检查异常对象。

```
$.ajax({
        type: 'GET',
        url: '/user/login.php',
        data: { login_email: email, login_password: pw },
        success: function(data) {
                alert('get succeeded');
                if(data == 'true') {
                        $('#login_error').hide();
                        window.location = '/user/home.php';
                        alert('true');
                }
                else {
                        $('#login_error').show();
                        alert('false');
                }
        },
        error: function(xhr, type, exception) {
                alert("Error: " + type);
        }
}); 
```

如果错误类型是解析，IE 可能会抱怨，因为返回的数据在逗号分隔的数组/列表的末尾有额外的逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T20:47:52.413

IE 使用缓存数据来获取请求。也许那是你的问题？如果你尝试不同的用户名、密码会发生什么？

无论如何，在 POST 中发送密码不是更好的主意吗？:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-09T19:40:27.057

我对以下代码有类似的问题：

```
var listOrder = $(this).sortable('toArray').toString();
var otherVariable = whatever
$.get('process_todo.cfm?method=sortToDos', {listOrder:listOrder,otherVariable :otherVariable }); 
```

该变量通过警报显示为“test_123,test_456”。我可以硬编码相同的值并且它不会失败。它一定与'toArray'有关吗？几个小时以来，我一直在尝试调试这件事。在 Firefox、Safari 和 Chrome 中完美运行……当然！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T22:14:17.540

代替：

如果（数据 == '真'）

尝试：

如果（数据）

然后在您的服务器中只返回一个 1（或 true）和一个空值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T22:38:32.553

您发布的内容（至少在编辑 2 之后）看起来不错。我认为问题在于您*尚未*发布的内容。

首先，您是否检查过您的服务器日志以确保它发送回您认为的内容？

如果是这样，我建议放弃提交机制并使用带有“onclick”处理程序的“按钮”类型，而不是带有“onsubmit”处理程序的“提交”按钮......

```
 <input type="button" id="login_submit" value="Login" /> 
```

然后切换提交处理程序：

```
 $('#login_form').submit(function() { ... }); 
```

从表单到按钮：

```
 $('#login_button').click(function() { ... }); 
```

如果这没有帮助，您也可以发布表单的 HTML 吗？

**[编辑 3]** - 尝试将“text”的第 4 个“type”参数添加到 $.post() 调用中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T22:43:34.193

您是否使用 Fiddler 仔细查看实际传输的内容？( [http://www.fiddler2.com](http://www.fiddler2.com) )

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-12-22T04:12:48.140

如果您在本地机器上测试/检查您的脚本，那么您在任何版本的 Internet Explorer 中都看不到任何东西，因为本地机器上的 IE 将数据类型作为文本而不是 xml 发送，并且在您的情况下，它的数据类型问题再次与您的文档数据类型不兼容所以值得检查您的数据类型是否匹配

就 xml 而言，解决方案在这里 [http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

你可以检查一下并找到一些灵感:)

萨尔曼

# c# - php md5 算法给出与 c# 相同的结果

> ID：821817
> 
> 赞同：8
> 
> 时间：2009-05-04T20:14:15.737
> 
> 标签：c#, php, md5

我在 C# 中有一个哈希算法，简而言之，它是：

```
string input = "asd";

System.Security.Cryptography.MD5 alg = System.Security.Cryptography.MD5.Create();
System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();

byte[] hash = alg.ComputeHash(enc.GetBytes(input));
string output = Convert.ToBase64String(hash);

// outputs:   eBVpbsvxyW5olLd5RW0zDg==
Console.WriteLine(output); 
```

现在我需要在 php 中复制这种行为，

```
$input = "asd";
$output = HashSomething($input);
echo $output; 
```

我怎样才能实现它？

我检查了

*   md5
*   utf8_decode
*   utf8_encode
*   base64_encode
*   base64_decode
*   url_decode

但我注意到 php md5 最后没有得到 == ......我错过了什么？

*注意*：我无法更改 C# 行为，因为它已经实现并且使用此算法将密码保存在我的数据库中。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-04T20:19:24.837

问题是 PHP 的`md5()`函数默认返回哈希的十六进制变体，其中 C# 返回原始字节输出，然后必须使用 base64 编码使其成为文本安全的。如果您正在运行 PHP5，则可以使用`base64_encode(md5('asd', true))`. 请注意，第二个参数`md5()`为 true，它`md5()`返回原始字节而不是十六进制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T20:16:37.790

您还记得在 php 中对 md5 哈希进行 base64 编码吗？

`$result = base64_encode(md5($password, true));`

第二个参数使 md5 返回原始输出，这与您在 C# 中使用的函数相同

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-04T20:18:36.413

您的 C# 代码从字符串中获取 UTF8 字节；计算 md5 并存储为 base64 编码。所以你应该在php中做同样的事情，应该是：

```
$hashValue = base64_encode(md5(utf8_decode($inputString))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-22T15:25:40.030

对于php，它应该如下所示

```
 php -r "echo base64_encode(md5(utf8_encode('asd'),true));" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-09T10:04:43.837

我遇到了同样的问题……只使用 md5($myvar) 就可以了。我得到相同的结果 C# 和 PHP。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-02-09T17:06:38.687

Gavin Kendall 张贴帮助了我。我希望这对其他人有帮助。

[http://jachman.wordpress.com/2006/06/06/md5-hash-keys-with-c/](http://jachman.wordpress.com/2006/06/06/md5-hash-keys-with-c/)

```
public static string MD5Hash(string text)
{
    System.Security.Cryptography.MD5 md5 = new System.Security.Cryptography.MD5CryptoServiceProvider();
    return System.Text.RegularExpressions.Regex.Replace(BitConverter.ToString(md5.ComputeHash(ASCIIEncoding.Default.GetBytes(text))), “-”, “”);
} 
```

# ios - 有没有办法隐藏 UIScrollView 中的滚动指示器？

> ID：821818
> 
> 赞同：137
> 
> 时间：2009-05-04T20:14:24.800
> 
> 标签：ios, uiscrollview

我有一个用例，这些指标会干扰用户交互。我可以子类化并覆盖一个方法或做类似的事情来从滚动视图中删除滚动指示器吗？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2009-05-04T21:20:19.387

将 的`showsHorizontalScrollIndicator`和`showsVerticalScrollIndicator`属性设置`UIScrollView`为`NO`。

```
[tableView setShowsHorizontalScrollIndicator:NO];
[tableView setShowsVerticalScrollIndicator:NO]; 
```

[文档 - UIScrollView](https://developer.apple.com/documentation/uikit/uiscrollview?language=objc)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-04-05T07:18:08.593

**//对于 UITableView - Objective-C**

```
tbl.showsHorizontalScrollIndicator = NO;
tbl.showsVerticalScrollIndicator = NO; 
```

**//对于 UITableView - SWIFT 3.0**

```
tbl.showsHorizontalScrollIndicator = false
tbl.showsVerticalScrollIndicator = false 
```

**//对于 UIScrollView - Objective-C**

```
scrl.showsHorizontalScrollIndicator = NO;
scrl.showsVerticalScrollIndicator = NO; 
```

**//对于 UIScrollView - SWIFT**

```
scrl.showsHorizontalScrollIndicator = false
scrl.showsVerticalScrollIndicator = false 
```

**从 XIB 或故事板更改**

[![在此处输入图像描述](https://i.stack.imgur.com/ZnA2b.png)](https://i.stack.imgur.com/ZnA2b.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-09-01T06:15:00.377

对于那些希望在 Swift 中执行此操作的人。

```
self.tableView.showsHorizontalScrollIndicator = false
self.tableView.showsVerticalScrollIndicator = false 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-06-02T16:45:17.277

对于 Swift 中的 UIScrollView

```
scrollView?.showsHorizontalScrollIndicator = false
scrollView?.showsVerticalScrollIndicator = false 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-24T07:23:15.600

`Swift 3.0``UIScrollView`和的扩展名`UITableView`：

```
import Foundation

extension UIScrollView {
    func hideIndicators() {
        showsHorizontalScrollIndicator = false
        showsVerticalScrollIndicator = false
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-20T06:04:33.100

这些是您的`UITableView`滚动属性：

```
[YourTableView setShowsHorizontalScrollIndicator:NO];
[YourTableView setShowsVerticalScrollIndicator:NO]; 
```

这些是您的`UIScrollView`滚动属性：

```
[YourScroll setShowsHorizontalScrollIndicator:NO];
[YourScroll setShowsVerticalScrollIndicator:NO]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-25T13:26:44.910

没有答案对我有用，因为每次都会显示指标的焦点环，但我通过`NSStoryboard`.

NSCollectionView 有图；

`Scroll View - Collection View then Clip View then Scroller (vertical) & Scroller (Horizontal)`

[![在此处输入图像描述](https://i.stack.imgur.com/L7aqa.png)](https://i.stack.imgur.com/L7aqa.png)

单击任何 Scroller 对象，然后`Attributes Inspector`将`Focus Ring`属性设置为`None`。如果您没有设置它，当用户更改 和 之间时，您可能会遇到`Appearance`问题。`Dark``Light`

# ruby-on-rails - Phusion Passenger 如何重用线程和进程？

> ID：821820
> 
> 赞同：10
> 
> 时间：2009-05-04T20:14:54.050
> 
> 标签：ruby-on-rails, ruby, apache, apache2, passenger

我正在使用 Phusion Passenger 设置一个运行多个 Ruby on Rails Web 应用程序的 Apache2 网络服务器。我知道Passenger 会产生Ruby 进程来处理请求。我有以下问题：

*   如果必须同时处理多个请求，Passenger 会产生多个进程还是多个（Ruby）线程？如何配置它以使其始终生成单线程进程？
*   如果我有两个 Rails 应用程序，假设对应用程序 A 的请求转到进程 1，然后对应用程序 B 的请求到达。进程 1 是否也有可能处理此请求？这何时以及如何可能？换句话说，是否允许一个进程处理多个 Rails 应用程序的请求？
*   我在多个 URL 和多个虚拟主机（例如 http:// 和 https://）中导出了相同的 Rails 应用程序。同一个进程能否为不同的虚拟主机提供服务？（答案似乎是肯定的，我在响应虚拟主机 A 的请求时设置了一个全局变量，并且我能够检索虚拟主机 B 中的值。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-05T05:49:10.660

一般来说，Passenger 通过派生一个 ApplicationSpawner 来生成新进程，ApplicationSpawner 将框架和应用程序代码预加载到内存中，或者 FrameworkSpawner 仅具有框架代码。

据我所知，Passenger 不处理线程。相反，随着应用程序负载的增加，它将派生该应用程序的 ApplicationSpawner 并初始化另一个实例。当负载减少时，一个或多个应用程序实例被终止。

如果以某种方式配置Passenger（我相信通过选择“智能”spawn方法），它将创建一个FrameworkSpawner，它加载rails代码，但没有应用程序代码，然后可以分叉以加载和使用该版本的应用程序轨道。

所以回答你的问题：

*   它将按顺序为它们提供服务，然后在确定负载足够高时生成其他进程。

*   不能。一个进程只能属于一个 Rails 应用程序。

*   我对这个有点粗略，但你的实验是有道理的。乘客应该足够聪明，可以弄清楚即使它在服务器配置中的不同位置运行，您正在谈论的是同一个应用程序。它可能基于应用程序的文件系统路径。

编辑：我去读了一点。事实证明我基本上是对的，但技术细节有点不对劲。请参阅[乘客文件](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#spawning_methods_explained)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-21T20:49:40.197

是的，伯克是对的。对于第三个问题，Phusion Passenger 通过应用程序根路径识别应用程序。因此，即使您有两个虚拟主机，如果它们都指向同一个 DocumentRoot，那么 Phusion Passenger 也会认为它们是同一个应用程序。

# linux - 如何将命令行参数传递给 unix/linux 系统上正在运行的进程？

> ID：821837
> 
> 赞同：217
> 
> 时间：2009-05-04T20:18:13.187
> 
> 标签：linux, unix, aix, hp-ux, sunos

在 SunOS 上，有一个`pargs`命令可以打印传递给正在运行的进程的命令行参数。

在其他 Unix 环境中是否有类似的命令？

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2009-05-04T20:26:54.397

有几种选择：

```
ps -fp <pid>
cat /proc/<pid>/cmdline | sed -e "s/\x00/ /g"; echo 
```

有更多`/proc/<pid>`关于 Linux 的信息，请看一下。

在其他 Unix 上，情况可能会有所不同。该`ps`命令将在任何地方工作，这些`/proc`东西是特定于操作系统的。例如在 AIX 上没有`cmdline`.`/proc`

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-11-15T14:12:12.257

这可以解决问题：

```
xargs -0 < /proc/<pid>/cmdline 
```

如果没有 xargs，参数之间将没有空格，因为它们已被转换为 NUL。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-11-06T05:40:09.713

## 完整的命令行

对于 Linux 和 Unix 系统，您可以使用它`ps -ef | grep process_name`来获取完整的命令行。

在 SunOS 系统上，如果你想获得完整的命令行，你可以使用

```
/usr/ucb/ps -auxww | grep -i process_name 
```

要获得完整的命令行，您需要成为超级用户。

## 参数列表

```
pargs -a PROCESS_ID 
```

将给出传递给进程的参数的详细列表。它将像这样输出参数数组：

```
argv[o]: first argument
argv[1]: second..
argv[*]: and so on.. 
```

我没有为 Linux 找到任何类似的命令，但我会使用以下命令来获得类似的输出：

```
tr '\0' '\n' < /proc/<pid>/environ 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-04-02T02:16:24.707

您可以使用`pgrep`（`-f`完整命令行）和`-l`（详细描述）：

```
pgrep -l -f PatternOfProcess 
```

此方法与任何其他响应都有一个至关重要的区别：它适用于*[CygWin](http://cygwin.com/)*，因此您可以使用它来获取在 Windows 下运行的任何进程的完整命令行（如果您想要有关任何提升/管理进程的数据，请以[提升](https://superuser.com/questions/728810/how-do-you-open-the-command-prompt-in-windows-7-with-a-shortcut-key/728824#728824)的方式执行） . 在 Windows 上执行此操作的任何其他方法都比较尴尬（[例如](https://stackoverflow.com/questions/17563411/how-to-get-command-line-info-for-a-process-in-powershell-or-c-sharp/17582576#17582576)）。
此外：在我的测试中， pgrep 方式是**唯一**能够获得*在 CygWin 的 python 中运行的脚本*的完整路径的系统。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2009-05-04T20:24:56.977

在**Linux 上**

```
cat /proc/<pid>/cmdline 
```

获取进程的命令行（包括 args），但所有空格都更改为 NUL 字符。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-12T10:29:24.837

`/proc/PID/cmdline`在 Linux 中使用空格打印的另一种变体是：

```
cat -v /proc/PID/cmdline | sed 's/\^@/\ /g' && echo 
```

以这种方式`cat`打印[NULL 字符](http://en.wikipedia.org/wiki/Null_character)，然后使用;`^@`将它们替换为空格。打印换行符。`sed``echo`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-14T11:30:32.257

而不是使用多个命令来编辑流，只需使用一个 - tr 将一个字符转换为另一个：

```
tr '\0' ' ' </proc/<pid>/cmdline 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-02T17:28:17.220

您可以简单地使用：

```
ps -o args= -f -p ProcessPid 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-30T17:07:56.927

除了上述所有转换文本的方法外，如果您只是使用'strings'，默认情况下会在不同的行上输出。额外的好处是，它还可以防止出现任何可能扰乱您的终端的字符。

两个输出都在一个命令中：

字符串 /proc//cmdline /proc//环境

真正的问题是......有没有办法查看 Linux 中已更改的进程的真实命令行，以便 cmdline 包含更改后的文本，而不是运行的实际命令。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-11-24T02:43:43.417

`ps -n`在 linux 终端中尝试 。这将显示：

1.所有进程*RUNNING*，它们的命令行和它们的*PID*

2.  程序启动进程。

之后你就会知道要杀死哪个进程

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-19T06:28:37.013

在 Solaris 上

```
 ps -eo pid,comm 
```

类似的可以在类 Unix 系统上使用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-09T22:11:29.300

在 Linux 上，使用 bash 输出为带引号的 args，以便您可以编辑命令并重新运行它

```
</proc/"${pid}"/cmdline xargs --no-run-if-empty -0 -n1 \
    bash -c 'printf "%q " "${1}"' /dev/null; echo 
```

在 Solaris 上，使用 bash（使用 3.2.51(1)-release 测试）并且没有 gnu 用户空间：

```
IFS=$'\002' tmpargs=( $( pargs "${pid}" \
    | /usr/bin/sed -n 's/^argv\[[0-9]\{1,\}\]: //gp' \
    | tr '\n' '\002' ) )
for tmparg in "${tmpargs[@]}"; do
    printf "%q " "$( echo -e "${tmparg}" )"
done; echo 
```

Linux bash 示例（粘贴到终端）：

```
{
## setup intial args
argv=( /bin/bash -c '{ /usr/bin/sleep 10; echo; }' /dev/null 'BEGIN {system("sleep 2")}' "this is" \
    "some" "args "$'\n'" that" $'\000' $'\002' "need" "quot"$'\t'"ing" )

## run in background
"${argv[@]}" &

## recover into eval string that assigns it to argv_recovered
eval_me=$(
    printf "argv_recovered=( "
    </proc/"${!}"/cmdline xargs --no-run-if-empty -0 -n1 \
        bash -c 'printf "%q " "${1}"' /dev/null
    printf " )\n"
)

## do eval
eval "${eval_me}"

## verify match
if [ "$( declare -p argv )" == "$( declare -p argv_recovered | sed 's/argv_recovered/argv/' )" ];
then
    echo MATCH
else
    echo NO MATCH
fi
} 
```

输出：

```
MATCH 
```

Solaris Bash 示例：

```
{
## setup intial args
argv=( /bin/bash -c '{ /usr/bin/sleep 10; echo; }' /dev/null 'BEGIN {system("sleep 2")}' "this is" \
    "some" "args "$'\n'" that" $'\000' $'\002' "need" "quot"$'\t'"ing" )

## run in background
"${argv[@]}" &
pargs "${!}"
ps -fp "${!}"

declare -p tmpargs
eval_me=$(
    printf "argv_recovered=( "
    IFS=$'\002' tmpargs=( $( pargs "${!}" \
        | /usr/bin/sed -n 's/^argv\[[0-9]\{1,\}\]: //gp' \
        | tr '\n' '\002' ) )
    for tmparg in "${tmpargs[@]}"; do
        printf "%q " "$( echo -e "${tmparg}" )"
    done; echo
    printf " )\n"
)

## do eval
eval "${eval_me}"

## verify match
if [ "$( declare -p argv )" == "$( declare -p argv_recovered | sed 's/argv_recovered/argv/' )" ];
then
    echo MATCH
else
    echo NO MATCH
fi
} 
```

输出：

```
MATCH 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-02T19:20:55.563

如果您想获得尽可能长的时间（不确定有什么限制），类似于 Solaris 的[pargs](https://docs.oracle.com/cd/E19683-01/806-5202/6je7shk59/index.html)，您可以在 Linux 和 OSX 上使用它：

```
ps -ww -o pid,command [-p <pid> ... ] 
```

# visual-studio-2005 - MFC：为什么我的旋转控制向后工作

> ID：821839
> 
> 赞同：14
> 
> 时间：2009-05-04T20:18:34.697
> 
> 标签：visual-studio-2005, mfc, spinner

使用 MS Visual Studio，我使用“auto buddy”属性将旋转控件附加到编辑控件。

旋转控件改变编辑框，但向上按钮减小值，向下按钮增加值。

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-04T20:24:00.533

因为就是这样。8-) 您可以使用[`SetRange`](http://msdn.microsoft.com/en-us/library/fy9kyatf(VS.80).aspx).

文档说“旋转按钮的默认范围将最大值设置为零 (0)，最小值设置为 100。由于最大值小于最小值，单击向上箭头将减小位置并单击向下箭头会增加它。使用 CSpinButtonCtrl::SetRange 来调整这些值。...没有任何体面的解释。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-04T20:25:34.230

它以这种方式工作的原因是因为旋转控件只是一个薄薄的滚动条，并且窗口使用一个坐标系，当您向下移动时行会增加（因此向下箭头会增加值）。

要修复它，只需在调用 SetRange 时交换当前使用的最小值和最大值。

# asp.net-mvc - Asp.Net MVC 从视图中调用另一个控制器

> ID：821844
> 
> 赞同：3
> 
> 时间：2009-05-04T20:18:54.493
> 
> 标签：asp.net-mvc

假设我在“主页/索引”页面上，我想转到页面 MyOtherController/Index/1

我怎样才能做到这一点 ？

我尝试：

`<%= Html.ActionLink("Test", "Index", "MyOtherController", new { id=item.Id }) %>`

我是否还必须在 Global.aspx 文件中添加路由？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-04T20:26:09.530

一种选择是在路由值列表中指定控制器的名称：

```
<%= Html.ActionLink("Test", "Index"
    , new { controller = "MyOtherController", id = item.Id }) %>
```

另一种方法是使用`ActionLink`with的重载`htmlAttributes = null`：

```
<%= Html.ActionLink("Test", "Index"
    , "MyOtherController", new { id = item.Id }, null) %>
```

在这种情况下，ASP.NET MVC 模板中的默认路由负责路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:42:48.477

我不相信 ActionLink 具有与该特定签名匹配的重载。您需要在路由值之后添加“null”以找到匹配的值（对于 htmlAttributes）。Ole 的解决方案会更干净，所以这确实是一个偏好问题。它还有助于提高可读性，因此您不必猜测每个参数是否是链接文本、动作/控制器等。

# emacs - Emacs Lisp 函数中的拆分窗口

> ID：821853
> 
> 赞同：1
> 
> 时间：2009-05-04T20:20:20.903
> 
> 标签：emacs, elisp

我希望能够在我正在编辑的当前文件上运行 shell 命令，并将输出显示在*Shell 命令输出*窗口中。我已经能够定义如下所示的函数。

```
(defun cpp-check ()
  "Run cpp-check on current file the buffer is visiting."
  (shell-command
   (concat "/home/sburke/downloads/cppcheck-1.31/cppcheck "
       (buffer-file-name)))) 
```

唯一的问题是输出窗口没有以任何方式被带到前台。我想要发生的是拆分窗口并在那里显示输出窗口。另外，我在这里定义要放入我的 .emacs 文件中的函数是否在正确的轨道上，还是有更好的方法？

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T21:28:40.817

看看文档`'shell-command`，这对我很有效：

```
(defun cpp-check ()
  "Run cpp-check on current file the buffer is visiting."
  (shell-command
   (concat "/home/sburke/downloads/cppcheck-1.31/cppcheck "
       (buffer-file-name))
   "cpp-check")) 
```

它创建一个名为“cpp-check”的新缓冲区并将结果放在那里。当前帧被分割成，“cpp-check”缓冲区被放在另一个窗口中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T02:56:51.433

参见函数“pop-to-buffer”。我认为。

您应该能够给它一个缓冲区名称以弹出 - 只需在 Shell 命令输出缓冲区中提供。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T18:42:23.330

这就是我想出的。感谢您的回复。我定义了一个函数，它将继续运行 cpp-check。我希望它绑定到 c 模式中的一个键，所以我将它添加为一个钩子。我遇到了普通函数和可以绑定到键盘映射的函数之间的区别，所以我必须让函数交互。这篇[文章](http://www.squidoo.com/emacs-command)有助于解释这一点。所以现在当按下快捷方式时，结果会出现在另一个窗口中，但光标仍保留在原始缓冲区中，这就是我想要的。唯一的问题是输出也显示在迷你缓冲区中，这不是我想要的。对修复那个小细节有什么想法吗？

```
(defun cpp-check ()
  (interactive)
  "Run cpp-check on current file the buffer is visiting."
  (shell-command
   (concat "/home/sburke/downloads/cppcheck-1.31/cppcheck "
       (buffer-file-name)))
  (display-buffer "*Shell Command Output*"))

(add-hook 'c-mode-common-hook
           (lambda ()
         (define-key c-mode-base-map
               "\C-x\p" 'cpp-check))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T20:26:37.470

拆分窗口是 (split-window-vertically) 它有一个可选的 arg 窗口的（如果为正，则为底部）部分的大小。

然后，您需要做的是使用 switch-to-buffer 或 switch-to-buffer-other-window 将 shell 结果缓冲区放在前面。

请记住，当您在 emacs 中吐出窗口（框架）时，您最终会得到两个“窗口”，因为当时命名混乱，现在处理已经太晚了......

# python - 此代码中说明了哪些 python 功能？

> ID：821855
> 
> 赞同：5
> 
> 时间：2009-05-04T20:21:03.193
> 
> 标签：python, language-features

[我在https://storm.canonical.com/Tutorial](https://storm.canonical.com/Tutorial)阅读了 Storm ORM 的教程，我偶然发现了以下代码：

```
 store.find(Person, Person.name == u"Mary Margaret").set(name=u"Mary Maggie") 
```

我不确定**find**方法的第二个参数是否会被评估为 True/False。我认为它将被解释为 lambda。如果这是真的，我怎样才能在我的功能中达到同样的效果？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-04T20:33:48.077

`Person.name`有一个重载`__eq__`方法，它返回的不是布尔值，而是一个存储表达式两边的对象；可以通过该`find()`方法检查该对象以获得它将用于过滤的属性和值。我将其描述为一种惰性评估模式。

在 Storm 中，它是通过[`Comparable`object](http://bazaar.launchpad.net/%7Estorm/storm/trunk/annotate/head%3A/storm/expr.py#L380)实现的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-04T21:19:20.700

`Person.name`是具有自定义`__eq__`方法的某种类型的实例。虽然`__eq__`通常返回一个布尔值（ish），但它实际上可以返回任何你想要的，包括一个 lambda。有关此方法和相关方法的更多信息，请参阅[Python 特殊方法名称](http://docs.python.org/reference/datamodel.html#special-method-names)。

可能最令人困惑/误导的部分（尤其是如果您习惯于其他 OO 语言，如 Java）是`Person.name`并且`person.name`（在哪里`person`是 的实例`Person`）彼此之间不必有任何关系。例如：

```
class Person(object):
  name = "name of class"
  def __init__(self):
    self.name = "name of instance"

person = Person()
print Person.name
print person.name 
```

这将打印：

> ```
> name of class
> name of instance 
> ```

请注意，类属性只是在类主体中设置，而实例属性是在`__init__`方法中设置。

在您的情况下，您将使用返回 lambda 的自定义方法设置`Person.name`对象，如下所示：`__eq__`

```
class LambdaThingy(object):
  def __init__(self, attrname):
    self.__attrname = attrname

  def __eq__(self, other):
    return lambda x: getattr(x, self.__attrname) == other

class Person(object):
  name = LambdaThingy('name')

  def __init__(self, name):
    self.name = name

equals_fred = Person.name == "Fred"
equals_barney = Person.name == "Barney"

fred = Person("Fred")

print equals_fred(fred)
print equals_barney(fred) 
```

这打印：

```
True
False 
```

这肯定是在“太聪明”的边缘，所以我会非常谨慎地在生产代码中使用它。对于未来的维护者来说，显式的 lambda 可能会更清晰，即使它有点冗长。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-04T20:36:00.210

神奇之处在于 Person.name 属性，它会产生一个重载`__eq__`(&c) 以返回非布尔值的类型。Storm 的资源在[http://bazaar.launchpad.net/~storm/storm/trunk/files/head%3A/storm/](http://bazaar.launchpad.net/~storm/storm/trunk/files/head%3A/storm/)上在线供您浏览（并谨慎模仿； -）——如您所见，他们不要轻视“黑魔法”；-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T20:31:02.827

对我来说，它看起来不像一个 python lambda。我没有阅读 Storm 的代码，但 Miles 可能是对的，因为它使用了惰性评估模式。

要了解有关 python lambda 函数的更多信息，请阅读[Dive Into Python](http://www.diveintopython.org/index.html)的精彩[章节](http://www.diveintopython.org/power_of_introspection/lambda_functions.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T20:28:12.367

因为我是一名Java程序员......我猜......它是运算符重载？Person.name == 是一个重载的运算符，而是进行比较...它产生一个 SQL 查询

我的 0.02 美元

# c# - 如何在 Linq 中处理“并行”序列？

> ID：821867
> 
> 赞同：4
> 
> 时间：2009-05-04T20:23:28.650
> 
> 标签：c#, linq

假设我有 2 个枚举，我知道它们具有相同数量的元素，并且每个元素与另一个枚举中放置相同的元素“对应”。有没有办法同时处理这两个枚举，以便我可以同时访问每个枚举的相应元素？

使用理论上的 LINQ 语法，我想到的是：

```
from x in seq1, y in seq2
select new {x.foo, y.bar} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T20:33:21.387

您正在寻找的功能称为“Zip”。它像拉链一样工作。它将在 .NET 4.0 iirc 中。与此同时，您可能想查看[BclExtras](http://code.msdn.microsoft.com/BclExtras)库。（伙计，我是这个库的真正拥护者，哈哈）。

```
IEnumerable<Tuple<TSeq1, TSeq2>> tuples = from t in seq1.Zip(seq2)
                                          select t; 
```

如果您只想完成任务，则必须获取两个序列枚举器并使用传统循环“并行”运行它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T20:46:40.887

由于 Neil Williams 删除了他的答案，我将继续发布[Jon Skeet 的实现](https://stackoverflow.com/questions/496704/how-to-iterate-over-two-arrays-at-once/496752#496752)链接。

解释相关部分：

```
public static IEnumerable<KeyValuePair<TFirst,TSecond>> Zip<TFirst,TSecond>
    (this IEnumerable<TFirst> source, IEnumerable<TSecond> secondSequence)
{
    using (IEnumerator<TSecond> secondIter = secondSequence.GetEnumerator())
    {
        foreach (TFirst first in source)
        {
            if (!secondIter.MoveNext())
            {
                throw new ArgumentException
                    ("First sequence longer than second");
            }
            yield return new KeyValuePair<TFirst, TSecond>(first, secondIter.Current);
        }
        if (secondIter.MoveNext())
        {
            throw new ArgumentException
                ("Second sequence longer than first");
        }
    }        
} 
```

请注意，这`KeyValuePair<>`是我的补充，我通常不喜欢以这种方式使用它。相反，我会定义一个泛型`Pair`或`Tuple`类型。但是，它们不包含在当前版本的框架中，我不想在这个示例中添加额外的类定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:34:16.453

在 4.0 中添加了一个“Zip”方法来解决这个问题（就像一个拉链，拉上相邻的元素。）在那之前，最可读（尽管不是最高性能）的方法可能是这样的，除非惰性评估真的很重要：

```
var indexedA = seqA.ToArray();
var indexedB = seqB.ToArray();

for(int i = 0; i < indexedA.Length && i < indexedB.Length; i++)
{
    var thisA = indexedA[i];
    var thisB = indexedB[i];
    // whatever
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-04T20:27:38.263

**更新：**

Eric Lippert 最近在此发布：http: [//blogs.msdn.com/ericlippert/archive/2009/05/07/zip-me-up.aspx](http://blogs.msdn.com/ericlippert/archive/2009/05/07/zip-me-up.aspx)

这特别有趣，因为他在 C#4 中发布了新扩展的源代码：

```
public static IEnumerable<TResult> Zip<TFirst, TSecond, TResult>
    (this IEnumerable<TFirst> first, 
    IEnumerable<TSecond> second, 
    Func<TFirst, TSecond, TResult> resultSelector) 
{
    if (first == null) throw new ArgumentNullException("first");
    if (second == null) throw new ArgumentNullException("second");
    if (resultSelector == null) throw new ArgumentNullException("resultSelector");
    return ZipIterator(first, second, resultSelector);
}

private static IEnumerable<TResult> ZipIterator<TFirst, TSecond, TResult>
    (IEnumerable<TFirst> first, 
    IEnumerable<TSecond> second, 
    Func<TFirst, TSecond, TResult> resultSelector) 
{
    using (IEnumerator<TFirst> e1 = first.GetEnumerator())
        using (IEnumerator<TSecond> e2 = second.GetEnumerator())
            while (e1.MoveNext() && e2.MoveNext())
                yield return resultSelector(e1.Current, e2.Current);
} 
```

* * *

**原答案：**

你指的是加入吗？

```
from x in seq1
join y in seq2
on x.foo equals y.foo
select new {x, y} 
```

还有 pLinq - 并行执行 linq 语句（跨多个线程）。

* * *

**编辑：**

啊-感谢您澄清问题，尽管我真的认为我的回答不值得一票否决。

听起来你想要的是这样的：

```
from x in seq1
join y in seq2
on x.Index equals y.Index
select new {x.Foo, y.Bar} 
```

不幸的是，你不能用 Linq 做到这一点 - 它 extends `IEnumerable`，它只有真正的`current`and`next`属性，所以没有 index 属性。

显然，您可以在 C# 中使用嵌套的 for 循环和 if 块轻松完成此操作，但恐怕不能使用 Linq。

在 linq 语法中模仿这一点的唯一方法是人为地添加索引：

```
int counter = 0;
var indexed1 = (
    from x in seq1
    select { item = x, index = counter++ } ).ToList();
//note the .ToList forces execution, this won't work if lazy

counter = 0;
var indexed2 = (
    from x in seq2
    select { item = x, index = counter++ } ).ToList();

var result = 
    from x in indexed1 
    join y in indexed2
    on x.index = y.index
    select new {x.item.Foo, y.item.Bar} 
```

# django - 如何从不同位置检测到 Django Web 应用程序的多个登录？

> ID：821870
> 
> 赞同：28
> 
> 时间：2009-05-04T20:24:26.977
> 
> 标签：django, django-authentication

我想一次只允许一个经过身份验证的会话用于我的 Django 应用程序中的个人登录。因此，如果用户使用给定的 IP 地址登录网页，并且这些相同的用户凭据用于从不同的 IP 地址登录，我想做一些事情（注销第一个用户或拒绝访问第二个用户。）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-06-26T13:05:50.250

不确定这是否仍然需要，但我想我会分享我的解决方案：

1) 安装 django-tracking（感谢 Van Gale 的提示 Google Maps + GeoIP 太棒了！）

2）添加这个中间件：

```
from django.contrib.sessions.models import Session
from tracking.models import Visitor
from datetime import datetime

class UserRestrictMiddleware(object):
    """
    Prevents more than one user logging in at once from two different IPs
    """
    def process_request(self, request):
        ip_address = request.META.get('REMOTE_ADDR','')
        try:
            last_login = request.user.last_login
        except:
            last_login = 0
        if unicode(last_login)==unicode(datetime.now())[:19]:
            previous_visitors = Visitor.objects.filter(user=request.user).exclude(ip_address=ip_address)
            for visitor in previous_visitors:
                Session.objects.filter(session_key=visitor.session_key).delete()
                visitor.user = None
                visitor.save() 
```

3）确保它在 VisitorTrackingMiddleware 之后，当有人新登录时，您应该会发现以前的登录会自动碰撞:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-03-01T16:32:49.180

如果您已经按照此处的建议使用 django-tracking，则有一种更简单的方法可以实现：

定义一个信号处理程序：

```
# myapp/signals.py
def kick_my_other_sessions(sender, request=None, user=None, **kwargs):
    from tracking.models import Visitor
    from django.contrib.sessions.models import Session
    keys = [v.session_key for v in Visitor.objects.filter(user=request.user).exclude(session_key=request.session.session_key)]
    Session.objects.filter(session_key__in=keys).delete() 
```

为 user_logged_in 信号创建一个监听器：

```
# myapp/__init__.py
from myapp.signals import kick_my_other_sessions
from django.contrib.auth.signals import user_logged_in
user_logged_in.connect(kick_my_other_sessions, sender=User) 
```

这将建立一种“最后登录用户获胜”的系统。如果您想允许同一用户从同一 ip 进行多次登录，您可以`.exclude()`在`Visitors`查找中添加一个。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-04T23:52:15.247

Django 的[中间件](http://docs.djangoproject.com/en/dev/topics/http/middleware/#topics-http-middleware)可能会帮助您实现这一目标。问题是您可能希望允许来自同一 IP 地址的多个匿名会话，甚至是不同用户的经过身份验证的会话，但不允许同一用户的经过身份验证的会话。

你会想要：

1.  创建一个用户配置文件模型来存储用户上次登录的 IP 地址。请参阅 Django[存储有关用户](http://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)文档的附加信息。

2.  实施[自定义身份验证后端](http://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend)。此后端在触发并成功验证用户身份时（只需调用 super）将清除用户在配置文件模型中的最后登录 IP。

3.  实现 Django 类的子`django.contrib.sessions.SessionMiddleware`类。实施`process_request`。如果`request.user`对象的配置文件模型没有 IP 地址，则设置它并允许请求。如果它有一个 IP，并且该 IP 与当前请求的 IP ( `request.META.REMOTE_ADDR`) 不同，则执行您喜欢的任何操作以注销其他用户，或向请求者返回错误。

4.  更新您的`settings.py`文件，以便首先处理您的自定义身份验证后端，并首先处理您的自定义会话中间件。这涉及更新`settings.AUTHENTICATION_BACKENDS`和`settings.MIDDLEWARE_CLASSES`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-04T23:39:09.973

您需要使用自定义中间件来执行此操作。

在您的中间件`process_request()`方法中，您将可以访问请求对象，因此您可以执行以下操作：

```
session_key = request.session.session_key
ip_address = request.META.get('REMOTE_ADDR', '') 
```

现在您知道了 IP 地址，因此请检查您创建的模型（大致）如下所示：

```
class SessionIPS(models.Model):
    session = models.ForeignKey(Session)
    IP = models.CharField(max_length=20) 
```

因此，当创建或删除会话时，您将相应地修改会话 ip 的表，并且当请求进入时，请确保 IP 地址没有被用于另一个会话。如果是，则从中间件返回一个 Http404（或类似的东西）。

[django-tracking](http://code.google.com/p/django-tracking/)是一个可以向您展示更多细节（甚至在其自己的模型中包含 IP 地址）的可插拔应用程序。

# c++ - 如何使用 unicode 文件名打开 std::fstream（ofstream 或 ifstream）？

> ID：821873
> 
> 赞同：67
> 
> 时间：2009-05-04T20:24:53.217
> 
> 标签：c++, windows, unicode

您不会想象使用 C++ 标准库为 Windows 应用程序打开文件这样基本的事情是很棘手的……但它似乎是。这里的 Unicode 是指 UTF-8，但我可以转换为 UTF-16 或其他格式，重点是从 Unicode 文件名中获取一个 ofstream 实例。在我破解自己的解决方案之前，这里有首选路线吗？尤其是跨平台的？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-05-04T20:55:58.990

C++ 标准库不支持 Unicode。`char`并且`wchar_t` 不需要是 Unicode 编码。

在 Windows 上`wchar_t`是 UTF-16，但标准库中不直接支持 UTF-8 文件名（`char`Windows 上的数据类型不是 Unicode）

使用 MSVC（以及 Microsoft STL），提供了文件流的构造函数，它采用`const wchar_t*`文件名，允许您将流创建为：

```
wchar_t const name[] = L"filename.txt";
std::fstream file(name); 
```

但是，C++11 标准并未指定此重载（它仅保证存在`char`基础版本）。从 g++ 4.8.x 版本开始，它也不存在于替代 STL 实现中，例如用于 MinGW(-w64) 的 GCC 的 libstdc++。

请注意，就像`char`在 Windows 上不是 UTF8 一样，在其他操作系统上`wchar_t`可能不是 UTF16。所以总的来说，这不太可能是便携的。打开给定`wchar_t`文件名的流不是根据标准定义的，并且在`char`s 中指定文件名可能很困难，因为 char 使用的编码因操作系统而异。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2019-02-23T13:46:34.730

[从 C++17 开始，有一种跨平台方法可以使用std::filesystem::path](https://en.cppreference.com/w/cpp/filesystem/path/path)重载打开具有 Unicode 文件名的 std::fstream 。例子：

```
std::ofstream out(std::filesystem::path(u8"こんにちは&quot;));
out << "hello"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T20:45:35.913

Visual C++ 的当前版本 std::basic_fstream 有一个`open()`根据[http://msdn.microsoft.com/en-us/library/4dx08bh4.aspx](http://msdn.microsoft.com/en-us/library/4dx08bh4.aspx)采用 wchar_t* 的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-14T12:40:16.733

使用和。`std::wofstream`_ 他们接受 unicode 文件名。文件名必须是s 的数组，或者必须在文本前有宏或前缀。`std::wifstream``std::wfstream``wstring``wchar_t``_T()``L`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-30T10:18:03.510

看看[Boost.Nowide](http://cppcms.com/files/nowide/html/)：

```
#include <boost/nowide/fstream.hpp>
#include <boost/nowide/cout.hpp>
using boost::nowide::ifstream;
using boost::nowide::cout;

// #include <fstream>
// #include <iostream>
// using std::ifstream;
// using std::cout;

#include <string>

int main() {
    ifstream f("UTF-8 (e.g. ß).txt");
    std::string line;
    std::getline(f, line);
    cout << "UTF-8 content: " << line;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-15T12:56:25.693

如果您将 Qt 与以下内容混合使用`std::ifstream`：

```
return std::wstring(reinterpret_cast<const wchar_t*>(qString.utf16())); 
```

请注意，`std::basic_ifstream`构造函数通常不接受 a `const w_char*`，但[在 STL 的 MS 实现中它](https://docs.microsoft.com/en-us/cpp/standard-library/basic-ifstream-class?view=msvc-160#requirements)接受。对于其他实现，您可能会调用`qString.utf8()`, 并使用`const char*`ctor.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-05T17:13:23.450

采用

```
wfstream 
```

代替

```
fstream 
```

和

```
wofstream 
```

代替

```
ofstream 
```

等等...您可以在[iosfwd](https://en.cppreference.com/w/cpp/header/iosfwd)头文件中找到这些信息。

# php - 在电子邮件和我的网络应用程序之间创建链接？

> ID：821877
> 
> 赞同：1
> 
> 时间：2009-05-04T20:25:17.083
> 
> 标签：php, web-applications

我在 flickr 或 brightkite 之类的网站上看到，会向用户提供个人电子邮件。如果用户向该地址发送邮件，则该内容将发布在他的公开个人资料中。我怎样才能在 Web 应用程序上做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T20:36:47.913

如我所见，有两种方法可以做到这一点：

首先，您可以使用现有的 SMTP 服务器/邮箱系统，并在一段时间内使用 POP3 或 IMAP 从该邮箱中提取消息，将内容插入到您的数据库/系统中。

或者，您可以编写一个 SMTP 实现，它将接受传入的电子邮件消息并执行您的自定义逻辑以将数据放入您的数据库/系统而不是邮箱。归根结底，这是一种更简洁的设计，开销会少得多。事实上，在某个地方可能已经有一个 SMTP 服务器实现，它允许您注入这种自定义逻辑（如果我能找到一个，我会编辑）。

就个人而言，我会选择第二种选择。这将使您对系统中正在发生的事情有更多的控制，并且它将具有整体更清洁的设计。

祝你好运！

**编辑：**它不是 PHP，但来自 Apache 的[JAMES](http://james.apache.org/mailet/)是一个 Java 邮件服务器，它允许您注入自定义邮件处理单元（称为 mailets）来处理邮件处理。您可以编写这样一个 mailet 来处理电子邮件并将更新放入您的数据库而不是邮箱中。可能还有其他项目实现了这种设计，所以值得一看。

**再次编辑：**噢……这是 SourceForge 上的一个开源[php SMTP 服务器](http://sourceforge.net/projects/phpsmtpd/)。我不知道你可以注入自定义逻辑，但你总是可以编辑源代码并让它做你想做的事！（如果您仍然坚持使用 PHP）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:29:30.367

[您在应用程序和 php imagp/pop3 函数之间编写了大量代码。](http://us3.php.net/manual/en/book.imap.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T20:44:19.130

有几个免费的邮件服务器支持使用 MySQL 或任何其他数据库作为存储后端，并且只需要配置即可。如果您不习惯自定义现有的邮件服务器或编写自己的邮件服务器，我会采用该解决方案。它比使用 POP3 或 IMAP 与邮件服务器通信要快几个数量级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T22:11:23.180

Flickr 在 Building Scalable Websites 一书中发布了他们的方法来做到这一点。[第 6 章](http://books.google.com/books?id=gXmatd2suh4C&pg=PA117&lpg=PP1&dq=building+scalable+websites&output=html)的全部内容都是针对该主题的。如上所述，您不需要非标准 MTA。默认的 MTA 可以正常工作（sendmail、qmail、postfix、exim 等）。您所要做的就是编辑/etc/aliases。/etc/aliases 可用于设置邮箱以将所有电子邮件传递给脚本。

I strongly recommend [reading through this chapter](http://books.google.com/books?id=gXmatd2suh4C&pg=PA117&lpg=PP1&dq=building+scalable+websites&output=html), as it goes on to outline a lot of the common issues you'll run into doing exactly this -- parsing attachments, coping with email from mobile devices (which frequently includes bad/quirky headers), doing authorization correctly, etc.

# c# - 如何测量实际 HttpWebResponse 与 HttpWebRequest 传输的经过时间？

> ID：821886
> 
> 赞同：0
> 
> 时间：2009-05-04T20:26:38.453
> 
> 标签：c#, .net

我有一个应用程序将一个大文件发布到供应商的 API 并获得响应。它是这样做的：

```
HttpWebRequest webRequest = BuildWebRequest(..., requestParams.Data, ...);
HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse(); 
```

我想仅测量响应本身的经过时间（不包括传输/发布大型多部分/表单数据所需的时间）。

我没有看到任何 HttpWebRequest 方法或事件的组合，我可以利用这些方法或事件将请求上传与响应下载分开。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T20:37:10.690

除非您要发送文件，否则请求时间将是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:40:08.903

您的调用代码无法判断何时从服务器发送响应。你能得到的最好的结果是当响应流中的第一个数据可用时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:44:50.283

如果这只是为了测试，我会使用 Fiddler 来监控流量。它可以显示您想要的信息类型。

以下是使用 fiddler 捕获的快速 Web 服务调用的示例输出：

```
== TIMING INFO ============
ClientConnected:        15:41:07:2804
ClientDoneRequest:      15:41:07:6398
Gateway Determination:  0ms
DNS Lookup:         0ms
TCP/IP Connect:         0ms
ServerGotRequest:       15:41:07:6398
ServerBeginResponse:    15:41:07:7804
ServerDoneResponse: 15:41:07:7804
ClientBeginResponse:    15:41:07:7804
ClientDoneResponse: 15:41:07:7804 
```

如果您从未使用 fiddler 进行 Web 服务调用，请确保将以下内容添加到您的 web.config：

```
 <system.net>
    <defaultProxy>
      <proxy  proxyaddress="http://127.0.0.1:8888" />
    </defaultProxy>
  </system.net> 
```

# c# - 如何获取 Lambda MemberExpression 的值

> ID：821887
> 
> 赞同：4
> 
> 时间：2009-05-04T20:26:43.400
> 
> 标签：c#, lambda

给定一个 Lambda 表达式：

```
Define(Expression<Func<T, int>> property) 
```

并使用如下：

```
Define(x => x.Collection.Count) 
```

获取 Count 值的最佳方法是什么？表达式树是否有一种简单的方法，或者我应该使用反射来解析树以获取 PropertyInfo 和 GetValue()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T20:35:52.800

您可以使用以下内容获取与您的 lambda 对应的委托：

```
var propDelegate = property.Compile();
var count = propDelegate(...); 
```

propDelegate 将是 a `Func<T, int>`，您可以通过传入所需的 T 类型对象来调用它。

# apache-flex - 严重的弹性问题

> ID：821888
> 
> 赞同：1
> 
> 时间：2009-05-04T20:26:46.893
> 
> 标签：apache-flex, flex3, flex-builder-3

我似乎很难让跟踪功能在带有 Flex 插件、Flex Builder 甚至 FlexBeans（Flex 的 Netbeans 插件）的 Eclipse 中向控制台输出任何内容。我已经删除并重新安装了适用于 Firefox 和 IE 的 Flash player 10 调试器版本，卸载它们后重新启动，然后重新安装它们。我已删除所有旧版本的 Java 并更新到最新版本。

mm.cfg 已正确配置以允许跟踪操作出现在 flashlog.txt 中

我尝试删除用于 Eclipse 的 Flex 插件以重新安装，现在我重新安装了，我无法创建新的 Flex 项目。我宁愿不卸载 Flex Builder，因为担心它也会出现奇怪的行为。

任何想法都会很有用。理想情况下，我需要插件才能工作，但是我可以跟踪输出到控制台（在任何 IDE 中）的任何方式都会比我现在拥有的更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T22:23:26.800

我不确定您所说的“Firefox 和 IE 的 Flash 调试器”是什么意思；您指的是此处提供的 Flash Player 的调试器版本吗？

[http://www.adobe.com/support/flashplayer/downloads.html](http://www.adobe.com/support/flashplayer/downloads.html)

如果没有，您肯定需要安装这些，以便能够将 trace() 输出写入 IDE 控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T02:49:11.217

我几乎可以肯定这不是问题所在，但有几次让我感到困惑。

Mac 和 PC 上的调试应用程序（相对于运行应用程序）键盘命令是不同的。我同时使用了两者，并且把它们弄混了，这导致当我认为我正在调试时我正在运行，这当然会导致知道控制台中的跟踪输出。

很可能不是，但提及它并没有什么坏处（我希望）:)

——埃文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T02:51:17.170

你如何测试调试器？你有没有试过去一个地方，比如有很多广告通常仍然有他们的踪迹？或者你只是用你自己的 swfs 测试它？安装投影仪调试版了吗？eclipse / flex 是如何配置来启动测试 swfs 的？是在浏览器中，还是在独立播放器中？你有什么奇怪的 mxmlc 设置吗？

我假设您已遵循所有这些说明？ [http://kb2.adobe.com/cps/193/tn_19323.html](http://kb2.adobe.com/cps/193/tn_19323.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T18:37:39.940

这实际上是一个问题的组合。次要问题是一个应用程序干扰了 Flex Builder 插件。主要问题与在 Flash 调试器上已更改的设置有关。

如果您右键单击正在运行的 SWF，然后单击调试器，您可以（本质上）告诉 VM 在哪里侦听跟踪操作。这已设置为网络上的另一台机器，而不是我的本地机器。一旦切换，一切都恢复了自己。

# ms-access - VBA 表单在代码中设置值而不是 AfterUpdate() 后更新

> ID：821892
> 
> 赞同：2
> 
> 时间：2009-05-04T20:27:21.527
> 
> 标签：ms-access, forms, vba

我有多个组合和选项框，其可见性设置为真或假，具体取决于用户对其他父选项框的选择。

我正在使用`AfterUpdate()`父选项框的功能。这种方法一直运作良好。

但是，当我在 VBA 代码 ( ) 中设置选项框的值时`Me.MyOptionBox = 1`，没有“更新”来使子选项和组合框出现。当我手动单击该选项时它可以工作，但是如果我在代码中设置它，除了选项框选择之外没有任何变化。看到选项框设置正确没有意义，但是负责检查选择了哪个选项的代码不起作用。

有没有人对如何解决这个问题有任何想法？我只想在设置选项框的值后更新表单。`AfterUpdate()`无论如何，所指 的“更新”是什么？

我已经尝试过`MyForm.Repaint`，`MyForm.Requery`但这些也不起作用。
有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T20:46:02.807

您可以在设置值之后直接调用 OptionBox_AfterUpdate() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:46:27.347

我很确定这是故意的。当您考虑到控件可以由用户和两种形式的代码（显式和绑定数据）更改时，问题是避免循环递归更新。

对于绑定控件，数据中的更改会更改控件。

对于用户输入，控件中的更改会更改数据，以及您在事件中明确指定的任何依赖关系。

对于由您的代码引起的更改，假设您需要手动应用您正在编码的状态更改的所有后果。

如果您使用绑定控件，您可以更改数据源并自动应用结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T21:05:15.757

在 VBA 中，大多数控件事件不会在以编程方式而不是手动方式更新控件时触发。您必须指定在程序化更新之后要运行的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:53:23.677

“我正在使用 AfterUpdate() 函数”，您的意思是您为 AfterUpdate 事件添加了一个事件处理程序，对吗？

如果该处理程序没有在您期望的时候触发，您总是可以在必要时直接调用您的处理程序（而不是让事件触发它）。但这可能不是最好的方法。更有可能有另一个事件应该调用您的处理程序，而不是 AfterUpdate 或除了 AfterUpdate。我不记得组合框事件的名称，但没有像 ItemChanged 或 SelectionChanged 之类的东西吗？

# lua - 在 Lua 中使用 IUP 获取输入

> ID：821893
> 
> 赞同：1
> 
> 时间：2009-05-04T20:27:30.200
> 
> 标签：lua, iup

我一直在尝试通过 IUP 获得输入来制作一个小型乒乓球游戏。我想尝试一些输入，并尝试了 IUPGL 示例附带的一些代码，但输入似乎根本不起作用。这是到目前为止的代码：

```
require "iuplua"
require "iupluagl"
require "luagl"

paddle = {x = -0.9, y = 0.2}

function drawPaddle(x, y)
    gl.Begin(gl.QUADS)
    gl.Color(0.0, 0.5, 0.0)

    gl.Vertex(x, y)
    gl.Vertex(x + 0.1, y)
    gl.Vertex(x + 0.1, y - 0.4)
    gl.Vertex(x, y - 0.4)
end

canvas = iup.glcanvas{buffer = "DOUBLE", rastersize = "300x300"}

function canvas:action(x, y)
    iup.GLMakeCurrent(self)
    gl.ClearColor(0.0, 0.0, 0.0, 0.0)
    gl.Clear(gl.COLOR_BUFFER_BIT)
    gl.Clear(gl.DEPTH_BUFFER_BIT)

    gl.MatrixMode(gl.PROJECTION)
    gl.Viewport(0, 0, 300, 300)
    gl.LoadIdentity()

    drawPaddle(paddle.x, paddle.y)

    gl.End()
    iup.GLSwapBuffers(self)
end

window = iup.dialog{canvas, title = "Soon to be Pong"}

function canvas:k_any(c)
    if c == iup.K_q then
        return iup.CLOSE
    elseif c == iup.K_w then
        paddle.y = paddle.y + 0.02
        return iup.CONTINUE
    else
        return iup.DEFAULT
    end
end

window:show()

iup.MainLoop() 
```

我的理解是`canvas:k_any()`当一个键被按下时会被调用，但它没有响应，即使是退出命令。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T00:12:09.153

对于您引用的示例，这至少是部分问题。在您的表中实际定义 IUP 键名常量之前`iup`，您需要调用一个函数。这个想法是，如果您不需要所有的键名，那么内存占用会更低，许多应用程序完全不需要这些键名。

`require "iuplua"`尝试在任何代码中使用名称之后不久添加以下行：

```
iup.key_open() -- 加载键名

```

这记录在主题**键盘代码**的顶部附近以及与键盘相关的各种位置。

如果不调用`iup.key_open()`,`iup.K_q`计算结果为`nil`（与任何其他键名一样），因此永远不会匹配传递给 的任何键码`canvas:k_any()`。

**编辑：**我刚刚运行了您的示例，并且确实调用`iup.key_open()`会导致 q 和 w 键被识别。接下来您会注意到一个进一步的故障，即仅更新桨的位置并不要求重新绘制画布。当你继续前进时，我会把它作为练习。

**Edit2：**在修改桨的状态后将线添加`iup.Update(self)`到函数`canvas:k_any()`中似乎可以满足您的需求。这样做而不是手动调用该`action()`方法具有以预期方式与 IUP 的消息循环处理交互的优点。在一般情况下，调用`iup.UpdateChildren(window)`可能是首选。这将使对话框中显示的任何其他 IUP 控件以及画布保持更新，如果您的控件没有在内部进行所有自己的更新，这将很有用。

或者，您可以将绘图例程移动到它们自己的函数中，从画布的`k_any()`和方法调用。`action()`我不确定我是否会推荐它，因为当您想要支持多个视口或相关控件时，它的缩放效果也不好。

您可能希望重新排列处理程序中的逻辑，以便在为新键添加案例`k_any()`时不太可能意外忘记调用。`iup.Update()`

# svn - 在 git 中排除 .svn 文件夹

> ID：821895
> 
> 赞同：68
> 
> 时间：2009-05-04T20:27:36.190
> 
> 标签：svn, git

我正在尝试将颠覆的文件夹排除在 git 的跟踪之外。我为 .git/info/exclude 尝试了几种不同的设置，但它似乎不起作用。我会使用 git-svn，但是请求访问以使其工作很痛苦，所以我宁愿通过排除文件夹来解决这个问题。

我想排除“.svn/entries”

我尝试将以下行添加到 .git/info/exlude： .svn 条目 .svn/entries *条目* *svn*

无论我尝试什么，运行 git status 时都会显示 .svn 条目

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-05-04T20:31:56.070

我认为您想在顶级目录中使用 .gitignore 文件。如果您将“.svn/entries”放在该文件的一行上，这将起作用。你也可以只放“.svn”而不是“.svn/entries”。

编辑：见评论。如果它们的文件已经被 git 跟踪，它们将始终显示在`git status`.

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2011-06-07T13:31:30.460

这个线程有正确的答案：

[Git - 忽略特定文件夹中包含的某些文件](https://stackoverflow.com/questions/971465/git-ignore-certain-files-contained-in-specific-folders)

你真正需要的是：

```
.svn* 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-05-04T20:37:39.130

将“.svn”放入`~/.gitexcludes`文件中。然后告诉 git：

```
echo '.svn' > ~/.gitexcludes
git config --global core.excludesfile "/home/USER_NAME/.gitexcludes" 
```

（确保更改 USER_NAME 使其指向您的主目录）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-03-19T15:01:59.667

以下结构和 .gitignore 内容对我有用

*   \.git
*   \.svn
*   \.gitignore

### .gitignore 内容

```
.svn/
.gitignore 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-04T20:51:24.307

执行`Casey`建议的操作，除了命名文件`.gitignore`并将其放在 git repo 的根目录中。

我也喜欢这样做，`attrib +h .gitignore`这样它就不会出现在我的资源管理器窗口中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-16T14:01:14.430

如果你想保留 svn 目录。

您可以先运行以下命令：

```
for dir in $(find ./ -type d -name \*.svn); do git rm --cached  -r $dir; done; 
```

然后`echo ".svn" >>.gitignore` 在根目录下 运行

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-12-17T14:32:04.573

因为每个版本化的文件夹都有一个 .svn 目录，你必须放：

*/.svn/*

# flash - 使用 selenium 点击一个 swf

> ID：821899
> 
> 赞同：5
> 
> 时间：2009-05-04T20:28:05.220
> 
> 标签：flash, selenium

我正在尝试使用 Selenium IDE 单击 html 页面中的 swf。DIV id 和 Embed id 更改取决于时间戳，例如`id="FLASH_0_23458974594"`，我尝试使用`id=/^FLASH_([0-9]+_)[0-9]([0-9]+)/`or`id="FLASH_glob:*"`但 IDE 没有获取 swf。我在这里做错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T20:54:46.687

你试过包含吗？

```
click | //object[contains(@id,'FLASH_')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T03:16:37.977

单击 Flash 对象将不起作用。使用 Selenium 自动化 Flash 的唯一已知方法是通过 JavaScript 在 Flash 对象中公开 UI 函数。然后，您可以使用 Selenium RC 中的 getEval() 函数调用该 JavaScript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T09:27:32.843

这个话题很老了，但是因为我花了很多时间寻找解决方案，所以我回答了这个问题。正如@Zugwalt 所说，您可以使用Java [Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)类。但是，如果您使用 Selenium Grid 和 RemoteWebDriver，您可以使用[jsch](http://www.jcraft.com/jsch/examples/Exec.java.html)打开到远程机器的 ssh 连接并调用[xdotool](http://www.semicomplete.com/projects/xdotool/)来单击给定位置。

[你可以在这个Gist](https://gist.github.com/thibaut-sticky/fea9891358d592b2da62)上看到一个例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-04T19:13:28.740

我们为 selenium 使用 Java 客户端，有时我们的测试使用 Java Robot 在我们无法直接与 Web 浏览器交互时移动鼠标并单击。这有缺点（例如浏览器必须在前台并且准确性可能有点棘手），但是在虚拟机中运行测试时，这些缺点被最小化了。

# c# - 有点复杂的 Linq2SQl 插入操作（动态用户控制和页面插入）

> ID：821901
> 
> 赞同：0
> 
> 时间：2009-05-04T20:28:18.653
> 
> 标签：c#, asp.net

我真的很想这样做，但我找不到办法。

这是场景，我为我的客户制作了一个博客模块，因为它是一个重复的任务，所以我所要做的就是将它上传到新客户，他就可以开始写博客了，但是有些客户需要额外的自定义字段，假设他想为每个文章作者添加一个电话号码，或者额外的参考，但我不想为每个客户实现它，因为这是一个自定义要求。

现在要做到这一点，我想用这个额外的文件和用户控件中的这个代码创建一个动态用户控件，例如

```
Blog bl = new Blog();
bl.ExtraRefrence = " http://www.something.com"; 
```

将它加载到博客管理面板中，但我想做的是能够让用户控制使用主博客编辑页面中的数据上下文，我的意思是主页面会有插入命令，那么如何我让主页插入命令查看动态用户控件值，而无需创建 2 个博客对象，一个在页面中，一个在用户控件中。

对不起，如果我不清楚，但严重的是这要了我的命。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T21:51:24.210

**选项 1**
使字段可配置。

伪代码：

```
if client.HasExtraReference() then
   <asp:label text="<%= client.ExtrareferenceLabel %>" />
   <asp:textbox id="txtExtraReference" />
end if 
```

和代码隐藏

```
Blog bl = new Blog();
bl.Content = ...
....
if client.HasExtraReference() then
    bl.ExtraRefrence = txtExtraReference.text;
end if 
```

该`HasExtraReference`方法可以让您查看一些配置。

**选项 2**
如果有多个额外和可变数量的字段，您可以添加一个 ExtraBlogItem 表。

```
BlogExtraItem
-------------
BlogExtraItemID int
BlogID int
ItemName Varchar(50)
ItemValue Varchar(250) 
```

在页面中添加您希望的项目，然后将统一`List( Of BlogExtraItem )`参数传递给 Blog.Insert 函数

# vim - 在 vim 中禁用交换文件创建

> ID：821902
> 
> 赞同：239
> 
> 时间：2009-05-04T20:28:23.067
> 
> 标签：vim, editor

有没有办法`.swp`在 vim 中禁用文件创建？或者至少在一个地方创建它们，以便我可以轻松找到并删除它们。

当我在编辑的同时复制父目录时，我发现它们特别烦人。当然我知道我可以使用 find -exec 来查找和删除它们。但我想要一个更实际的解决方案。

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2009-05-04T20:35:13.910

要在 vim 中禁用交换文件，请键入

```
:set noswapfile 
```

要永久禁用交换文件，请将以下内容添加到您的`~/.vimrc`文件中

```
set noswapfile 
```

有关更多详细信息，请参阅[关于交换文件的 Vim 文档](http://vimdoc.sourceforge.net/htmldoc/options.html#%27swapfile%27)

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2013-03-09T23:31:00.843

在 .vimrc 或 /etc/vimrc 中设置以下变量，以使 vim 将交换、备份和撤消文件放在特殊位置，而不是正在编辑的文件的工作目录：

```
set backupdir=~/.vim/backup//
set directory=~/.vim/swap//
set undodir=~/.vim/undo// 
```

在路径中使用双斜杠告诉 vim 启用避免名称冲突的功能。例如，如果您在一个位置编辑一个文件，而在另一个位置编辑另一个文件，并且两个文件具有相同的名称，您不希望在 ~/.vim/swap/ 中发生名称冲突。如果你用两个斜杠指定 ~/.vim/swap//，vim 将使用正在编辑的文件的整个路径创建交换文件以避免冲突（文件路径中的斜杠将被百分比符号 % 替换）。

例如，如果您编辑 /path/one/foobar.txt 和 /path/two/foobar.txt，那么您将在 ~/.vim/swap/ 中看到两个名为 %path%one%foobar.txt 的交换文件和%path%two%foobar.txt，分别。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2009-05-04T20:37:54.900

[我在这里](http://www.vim.org/htmldoc/recover.html)找到了答案：

```
vim -n <file> 
```

打开没有交换文件的文件。

此外：

```
set dir=/tmp 
```

在中`.vimrc`创建交换文件`/tmp`。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-05-04T20:31:08.660

这是我个人的 ~/.vimrc 备份设置

```
" backup to ~/.tmp 
set backup 
set backupdir=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp 
set backupskip=/tmp/*,/private/tmp/* 
set directory=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp 
set writebackup 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-10-07T10:30:09.657

我同意那些质疑为什么 vim 需要所有这些“灾难恢复”的东西而没有其他文本编辑器打扰它的人。我不希望 vim 在编辑文件时在已编辑文件的目录中创建任何额外的文件，非常感谢。为此，我在我`_vimrc`的禁用交换文件，并将恼人的“备份”文件移动到临时目录：

```
" Uncomment below to prevent 'tilde backup files' (eg. myfile.txt~) from being created
"set nobackup

" Uncomment below to cause 'tilde backup files' to be created in a different dir so as not to clutter up the current file's directory (probably a better idea than disabling them altogether)
set backupdir=C:\Windows\Temp

" Uncomment below to disable 'swap files' (eg. .myfile.txt.swp) from being created
set noswapfile 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-09-26T22:16:10.130

您可以将 backupdir 和 directory 设置为 null 以完全禁用交换文件，但通常建议将它们简单地放在集中目录中。Vim 负责确保没有名称冲突或类似的事情；所以，这是一个完全安全的选择：

```
set backupdir=~/.vim/backup/
set directory=~/.vim/backup/ 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-25T08:27:43.070

如果你正在使用`git`，你可以添加`*.swp`到`.gitignore`.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-04T20:30:29.053

如果您放入`set directory=""`exrc 文件，您将关闭交换文件。但是，这样做会禁用恢复。

更多信息[在这里](http://www.vim.org/htmldoc/options.html#'directory')。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-01T10:42:12.560

不为特定文件创建 vim 交换文件

```
autocmd bufenter  c:/aaa/Dropbox/TapNote/Todo.txt :set noswapfile 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-06-21T18:28:30.500

对于任何试图为 Rails 项目设置这个的人，添加

```
set directory=tmp,/tmp 
```

进入你的

```
~/.vimrc 
```

因此 .swp 文件将位于其自然位置 - tmp 目录（每个项目）。

# iis-6 - 工作进程达到其允许的处理时间

> ID：821911
> 
> 赞同：9
> 
> 时间：2009-05-04T20:30:49.847
> 
> 标签：iis-6, worker-process, application-pool

我们大约每月遇到一次这个问题。很难查明原因，因此我们将不胜感激。这会导致应用程序池停止并关闭站点。我们浏览了所有的日志文件，没有任何结论。我们在 IIS 6 上使用 2.0.3 版本。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-09T18:09:46.627

我注意到 IIS 将 Web 应用程序默认为 29 小时回收计划，这可能会很麻烦，因为它可能会在您的用户不期望它的时候回收。

例如：web 应用程序从上午 12 点开始，这意味着它在第二天早上 5 点回收，第二天早上 10 点，第二天下午 3 点，等等（这是假设你的应用程序有足够的请求活动来保持它活着，所以它不会因为不活动而关闭）

如果您的 Web 应用程序严重依赖内存中的会话状态，这尤其糟糕，因为回收会终止会话并可能迫使用户重新进行身份验证并丢失任何未保存的工作。（如果您不设计您的应用程序与回收无缝工作）

检查回收计划并确保它在您期望的时间回收。请参阅此屏幕截图：[http ://remy.supertext.ch/2010/08/iis7-worker-process-reached-its-allowed-processing-time-limit/](http://remy.supertext.ch/2010/08/iis7-worker-process-reached-its-allowed-processing-time-limit/)

不确定无限循环建议......听起来你只是有一个回收配置问题要解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T20:36:23.140

这可能表明您的应用程序代码中存在无限循环。

基本上，每次请求进入 Web 服务器时，IIS 都会将请求交给工作进程。您可以在 IIS 中配置这些工作人员的数量，以及超时值是多少。超时是为了在应用程序代码挂起的情况下保持运行——它被终止，因此线程可以返回池中以继续为新请求提供服务。

因此，请查看您的代码以查找可能的无限循环。或者，它可能是一个运行时间极长的数据库查询，它可能最终完成但超过了超时值。也许您的 Web 应用程序为最终用户提供了一个机会来进行过于宽泛的查询，从而返回过多的数据或需要过多的数据库处理时间。

当然，很难给你一个具体的原因，但试着沿着这些思路思考。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T06:54:46.993

如果您因此遇到崩溃（听起来像您），那么您可能想要获取一份[Debugging Tools for Windows](http://www.microsoft.com/whdc/DevTools/Debugging/default.mspx)的副本并花一些时间阅读[Tess Ferrandez](http://blogs.msdn.com/tess/)的博客——她提供了关于执行死后崩溃分析的好建议并使 WinDbg 更加平易近人。

# c# - 简化配置对话框构建 .NET

> ID：821915
> 
> 赞同：2
> 
> 时间：2009-05-04T20:31:30.003
> 
> 标签：c#, winforms, configuration

我在 C# 中工作。我发现自己一直在创建对话框来编辑我的应用程序设置。对于`Control`对话框中的每一个，我都在读取配置文件并进行相应的设置。按 OK 后，我正在读取所有控件并将值存储在配置文件或类似文件中。

这似乎非常耗时、简单且重复。有谁知道如何简化这个过程？代码生成？辅助类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T20:49:07.510

您可以将 WinForms 控件直接绑定到应用程序设置，这将使您更轻松地创建对话框来管理它们。

只需选择一个控件并在属性窗格中的数据组下查找（应用程序设置）选项。[我在这里](http://www.colincochrane.com/image.axd?picture=2009%2f5%2fappbinding.JPG)放了一个截图来说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:36:47.710

这些应用程序设置对话框是否需要漂亮，或者它们只是用于个人配置？如果是后者，则将所有设置读入一个类并将该类分配给属性编辑器。

但不推荐用于美观的最终 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:40:19.793

最好的办法是使用默认模板中包含的“设置”，而不是“配置”，它更容易，并且设置可以绑定到控件的几乎任何属性或独立读取。一旦被发现，它们就会有据可查、易于定制和易于使用。

如果您需要使用配置，那么我会考虑使用自定义配置部分并将其绑定到属性网格或控件集以进行编辑。该配置使读取和写入对配置的更改变得容易。

# visual-studio - Qt 的 Visual Studio 集成工具有什么不同？

> ID：821920
> 
> 赞同：7
> 
> 时间：2009-05-04T20:32:20.810
> 
> 标签：visual-studio, qt

Trolltech为他们的 Qt 的 LGPL 和 GPL 版本发布了一个名为[“Visual Studio 插件”的工具。](http://www.qtsoftware.com/developer/faqs/what-is-the-visual-studio-add-in/view "Visual Studio 加载项")他们说商业版本带有完整的 Visual Studio 集成工具，但我没有看到任何关于它们之间差异的描述。

完整版中包含哪些未包含在加载项中的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T21:26:01.900

Visual Studio 加载项不适用于 Windows 开源 Qt 二进制安装程序。要使其正常工作，您必须下载源包并手动构建。开源 Windows 二进制文件[与 MinGW 编译器一起工作](http://arstechnica.com/open-source/news/2009/03/first-look-qt-45-rocks-for-rapid-cross-platform-development.ars)。

以下是[使用开源构建添加 Visual Studio 集成的方法](http://dcsoft.com/community_server/blogs/dcsoft/archive/2009/03/06/how-to-setup-qt-4-5-visual-studio-integration.aspx)。

商业版带有完整的 Visual Studio 集成，无需额外步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-19T15:31:41.733

Qt Visual Studio 集成允许您通过单击该小部件快速从表单上的按钮到相应的按钮单击处理程序（在您的 C++ 源代码中）。例如，如果您的表单上有一个名为“pushButton_42”的按钮，请在嵌入式 Qt 表单编辑器中单击此按钮以访问 YourForm.cpp 中的以下函数：

```
void YourForm::on_pushButton_42_clicked() 
```

如果该功能尚不存在，VS Integration 将为您创建它。此外，VS 集成允许通过右键单击小部件并从下拉列表中选择所需的信号，轻松地将 C++ 代码连接到表单上任何小部件的信号。“Visual Studio 加载项”不提供这些功能。

注意：我将 Visual Studio 集成版本 1.4.3 与插件版本 1.0.1 进行了比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T18:09:27.387

我注意到的一个区别（尝试了商业版的评估）是它有一个嵌入式表单设计器，而免费的附加组件会为 .ui 文件启动 QtDesigner。

# 3d - 3D 编程概念指南？

> ID：821924
> 
> 赞同：10
> 
> 时间：2009-05-04T20:33:39.217
> 
> 标签：3d

我正在尝试将我的游戏开发转移到第三个维度，但我在理解我实际要做的事情时遇到了一些麻烦。在使用 C 和 SDL 之前，我已经创建了一个 2D MMORPG，这并不难。但我似乎找不到任何有用的资源来解释 3D 编程的实际工作原理。我对所涉及的矢量数学有基本的了解，但我似乎无法找到任何清晰、深入的解释来说明其他一切（如照明和着色器）是如何工作的。我发现了很多代码示例等，但所有这些都只是抛出了一个评论，比如“//应用照明”，这并没有真正告诉我它实际上在做什么以及为什么。

我不是在寻找特定于 API 的教程；学习一个新的 API 很容易——我只是不确定如何使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-04T20:51:54.930

如果您正在寻找一本书，我强烈推荐[Real-Time Rendering](http://realtimerendering.com/)。我有这本书的第二版，发现它在处理 3D 图形时是一笔巨大的财富。这本书解释了 3D 编程构建块的内部工作原理，如变换、光照和纹理。它还探讨了各种高级主题，包括着色器、碰撞检测、加速和优化。

这本书对代码非常轻。它深入解释了算法，但不包含真实的代码片段。因此，如果您想了解事物是如何工作的，而不是仅仅知道要调用哪个函数，那就太好了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-04T21:10:26.913

如果您想了解 3D 计算机图形和渲染教程的概念，将不会有太大帮助。正如您发现的那样，他们教您 API，但对基本理解没有帮助。

你需要 grpahics 编程的圣经：

[http://www.amazon.com/Computer-Graphics-Principles-James-Foley/dp/0201121107](https://rads.stackoverflow.com/amzn/click/com/0201121107)

[替代文字 http://introtextbooks.com/wwwstatic/gfx/cover/foley-computer-graphics-principles-and-practice-in-c-2e.jpg](http://introtextbooks.com/wwwstatic/gfx/cover/foley-computer-graphics-principles-and-practice-in-c-2e.jpg)

它不涵盖任何 OpenGL、DirectX 或着色器，仅涵盖基础知识。但这就是你所需要的。例如：一旦你了解了光照的工作原理，在 OpenGL 上启用光照的三行代码就会突然变得非常有意义。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-04T20:44:15.917

我建议您查看[NeHe OpenGL 教程](http://nehe.gamedev.net/)，从最简单的开始，然后学习一点 OpenGL。一个好的 OpenGL 参考资料（例如[Red Book](https://rads.stackoverflow.com/amzn/click/com/0321481003)，虽然这可能有点高级）也会有很大的帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T21:22:25.120

[红皮书](http://www.opengl.org/documentation/red_book/)- 它几乎是教授您需要了解的有关 OpenGL 的所有内容（初级-中级）的一个资源。这些概念可以很容易地转移到任何其他 3D 库中。这也有一个免费的在线版本！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-04T21:13:30.697

“当时”的标准文本是[Foley 和 Van Dam](https://rads.stackoverflow.com/amzn/click/com/0201848406)，其中涵盖的一些主题有点长，但 3-D 转换和投影背后的基本数学并没有改变。

[Alan Watt 的](https://rads.stackoverflow.com/amzn/click/com/0201398559)文字也不错，但并不是一本真正的入门书。

您还可以查看[David Eberly 的](http://www.geometrictools.com/Books/Books.html)网站，他写了几本关于该主题的书籍，并且在那里也可以找到大量相关信息。期待大量的数学。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T20:44:01.860

如果您对使用 C# 为 XBOX 360 进行编程感兴趣，可以查看 XNA 框架。 [这个网站](http://riemers.net/)有大量关于 XNA 的教程，我强烈建议您尝试一下。只需导航到侧边栏（右侧）并单击 3D 部分。

# language-agnostic - 服务（应用程序/控制器）和 UI 层之间的数据类型

> ID：821933
> 
> 赞同：1
> 
> 时间：2009-05-04T20:34:46.360
> 
> 标签：language-agnostic, architecture

考虑以下常见的分层架构：

*   用户界面
*   服务/应用程序/控制器
*   领域
*   持久性

Service 和 UI 层之间的类型应该是什么？

服务层中方法的返回类型应该是**原语**吗？它们可以**是域层的对象**吗？

动机：我们正在建立一个论坛系统。在服务层的某个地方应该有一个像“getForums”这样的方法。我想知道它的返回类型应该是什么 -

*   如果它是一些 forumID（原语）的集合 - 我们需要向服务层发出更多调用，以便呈现论坛的主题和描述（使用其 ID）。
*   如果它是一些论坛对象的集合（来自域层） - 我们最终可能会得到一个可以直接访问域层的 UI（对我来说听起来真的很糟糕）
*   是否应该是一些特制对象的集合（仅代表论坛的主题、描述和 ID）？（听起来代码太多了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-12T22:14:51.603

您可以使用数据传输对象模式：

[http://www.martinfowler.com/eaaCatalog/dataTransferObject.html](http://www.martinfowler.com/eaaCatalog/dataTransferObject.html)

这将在 UI 和服务层之间实现，并且可以根据 UI 所需的数据视图进行定制。

# asp.net-mvc - 将 ASP.NET MVC NHibernate 应用程序部署到 IIS7 时出错

> ID：821934
> 
> 赞同：3
> 
> 时间：2009-05-04T20:34:47.590
> 
> 标签：asp.net-mvc, nhibernate, iis-7

我有一个在 vs.net 开发 Web 服务器中工作的 Asp.Net MVC 应用程序。当我发布到 IIS7 时，出现以下错误。我已经花了很多时间，但仍然没有解决方案！

```
 [NullReferenceException: Object reference not set to an instance of an object.]
   System.Web.PipelineStepManager.ResumeSteps(Exception error) +929
   System.Web.HttpApplication.BeginProcessRequestNotification(HttpContext context, AsyncCallback cb) +91
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +508 
```

这是 Application_Start

```
protected void Application_Start()
        {

                ConfigureLogging();

                ComponentRegistrar.RegisterComponents();

                NHibernateSession.InitSqlServer2005(new WebSessionStorage(this), Settings.Default.DefaultConnString);

                CacheManager.InitCaches();

            }
        } 
```

我来晚了这个应用程序，不知道 MVC 和 NHibernate 的最佳实践

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T08:28:49.037

您不能在应用程序启动时配置 nhibernate。我不完全知道为什么，但我也遇到了这个问题。

您可以在 Init() 中对其进行初始化。您还可以在这里看到它已完成 [http://code.google.com/p/sharp-architecture/source/checkout](http://code.google.com/p/sharp-architecture/source/checkout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-01T19:47:54.523

将我的休眠初始化代码从 Application_Start() 移动到 Init() 仍然没有运行足够晚来修复错误。所以我偶然发现了[这个](http://scottsdalewebstudio.com/blog/mvc/mvc-sharp-iis7-nhibernate/)。我使用的解决方案**不是来自原始帖子**，而是来自 jbland 的第一条评论。基本上，它将 nhibernate 的初始化移动到第一个请求时发生。

需要注意的一件事是，他的代码没有为您提供 webSessionStorage 来自何处的上下文。它是一个成员变量，必须在 Init() 中实例化。

# .net - 声明性安全需求 - SecurityAction.Demand 是否已缓存？

> ID：821938
> 
> 赞同：0
> 
> 时间：2009-05-04T20:35:24.173
> 
> 标签：.net, security, permissions, code-access-security

我在模拟用户时遇到问题。我有一个这样声明的方法：

```
[PrincipalPermission(SecurityAction.Demand, Name=@"DJPITER-PC\Test", Role="LocalTestGroup")]
static void LocalTestGroupOnly()
{
    Console.WriteLine("Inside LocalTestGroupOnly() - {0}", 
        WindowsIdentity.GetCurrent().Name);
} 
```

调用代码是：

```
WindowsImpersonationContext context = 
        WindowsIdentity.Impersonate(token);

    Console.WriteLine("Calling LocalTestGroupOnly() as {0}", 
        WindowsIdentity.GetCurrent().Name);
    LocalTestGroupOnly();

    context.Undo();

    try
    {
        // Reverted user is displayed properly 
        Console.WriteLine("Calling LocalTestGroupOnly() as {0}", 
            WindowsIdentity.GetCurrent().Name);

        // This method should fail but if succeeds
        LocalTestGroupOnly();
    }
    catch (SecurityException ex)
    {
        Console.WriteLine("Your account lacks permission to that function.");
    } 
```

默认用户不是 LocalTestGroup 的成员。令牌指示的用户是 LocalTestGroup 的成员。

问题：

第一次调用 LocalTestGroupOnly() 成功，因为令牌指示的用户是 LocalTestGroup 的成员。对 LocalTestGroupOnly() 的第二次调用（作为默认用户）应该会失败，因为默认用户不是“Test”并且它不属于 LocalTestGroup。问题是这种方法也成功了。

如果我单独运行程序 - 无论有没有模拟，我们的行为都是正确的：它在模拟为“测试”时成功，在作为默认用户调用时失败。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T06:02:30.427

你能检查`Thread.CurrentPrincipal.Identity`而不是`WindowsIdentity.GetCurrent()`吗？`PrincipalPermission.Demand()`使用第一个。

要更改`Thread.CurrentPrincipal`（或`HttpContext.User`），您似乎必须在模拟或撤消后明确设置它们。[在这里](https://stackoverflow.com/questions/247550/asp-net-aspx-page-code-runs-impersonated-though-impersonation-is-disabled)查看类似的问题。

# inversion-of-control - 如何让温莎城堡调用无参数构造函数？

> ID：821944
> 
> 赞同：0
> 
> 时间：2009-05-04T20:36:17.883
> 
> 标签：inversion-of-control, castle-windsor

目前我有一个看起来像这样的类：

```
public class MyClass : IMyClass
{
   public MyClass()
   {
      //...
   }
   public MyClass(IMyRepository repository)
   {
      //...
   }
} 
```

在我的配置文件中，我注册了 IMyClass，但没有注册 IMyRepository。我的意图是让 Windsor 使用不带任何参数的构造函数，但我收到以下消息：

> 无法创建组件“MyClass”，因为它具有要满足的依赖项。MyClass 正在等待以下依赖项：
> 
> 服务： - Namespace.IMyRepository 未注册。

我发现[另一篇文章](https://stackoverflow.com/questions/464299/who-calls-the-constructor-witth-parameter-castle-windsor)说容器将使用它可以满足的最多参数调用构造函数。那么为什么它试图用一个它不知道如何满足的参数来调用构造函数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T22:32:53.300

也许您使用的是旧版本的温莎……这对我来说很好：

```
[TestFixture]
public class WindsorTests {

    public interface ISomeInterface {}

    public class AService {
        public int Id { get; private set; }

        public AService() {
            Id = 1;
        }

        public AService(ISomeInterface s) {
            Id = 2;
        }
    }

    [Test]
    public void Parameters() {
        var container = new WindsorContainer();
        container.AddComponent<AService>();
        var service = container.Resolve<AService>();
        Assert.AreEqual(1, service.Id);
    }
} 
```

# javascript - 图像热点缩放

> ID：821954
> 
> 赞同：1
> 
> 时间：2009-05-04T20:37:49.863
> 
> 标签：javascript

我希望在此站点上复制图像缩放： [http ://www.endless.com/adidas-Originals-airacer-Trefoil-Sneaker/dp/B001I44OIG/183-5587133-4823042?ie=UTF8&cAsin=B001I44O2W&qid=1241466506612&asinTitle =阿迪达斯％20Originals％20adiracer％20Trefoil％20HG％20Sneaker＆ref_ = SW_1＆asins = B001I44O2W％2CB001I457WS％2CB001LDJ2MM％2CB001HBH5LS％2CB001O9BJ4C％2CB001VNCNI2％2CB001LDJ7M2％2CB001LNNY44％2CB001LDJ2UE％2CB001OONDCS％2CB001HBH4FA％2CB001OOMWUW＆refURL =％252Fb％252F241993011％253F＆contextTitle =搜寻％20Results＆fromPage = asinlist&suppressRedirect=1](http://www.endless.com/adidas-Originals-adiracer-Trefoil-Sneaker/dp/B001I44OIG/183-5587133-4823042?ie=UTF8&cAsin=B001I44O2W&qid=1241466506612&asinTitle=adidas%20Originals%20adiracer%20Trefoil%20HG%20Sneaker&ref_=sw_1&asins=B001I44O2W%2CB001I457WS%2CB001LDJ2MM%2CB001HBH5LS%2CB001O9BJ4C%2CB001VNCNI2%2CB001LDJ7M2%2CB001LNNY44%2CB001LDJ2UE%2CB001OONDCS%2CB001HBH4FA%2CB001OOMWUW&refURL=%252Fb%252F241993011%253F&contextTitle=Search%20Results&fromPage=asinlist&suppressRedirect=1) 当您将鼠标悬停在左侧的鞋子上时，它会在右侧显示一个具有更大图像的框，并显示您正在复制的确切位置。关于我将如何做到这一点的任何想法？我可以使用可以提供此功能的库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T20:44:29.923

这可能是您正在寻找的内容，请查看标准缩放示例：

[http://www.mind-projects.it/projects/jqzoom/](http://www.mind-projects.it/projects/jqzoom/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:44:04.900

我认为这很简单，您可以自己编写一些很酷的代码。在这里我只是指点一下，如果我不清楚，请随时提出问题。

当鼠标在鞋子的全图上时，获取它相对于它的位置（X，Y）并更改“缩放框”的背景位置。缩放框将以鞋子的全尺寸图像作为背景图像。

您需要进行一些计算，例如，如果鼠标位于 (10,10) 并且图像是预览的两倍大，您希望将其显示在 (20,20)，诸如此类。处理特定情况（角，边框......）以及如果您希望鼠标指针位于框的中心也是如此。这里的数学比编程更多^^

希望有帮助

编辑：当然，如果您不想手动操作，约翰的回答会更适合您！

# quickbooks - 使用 QuickBooks SDK 批量处理发票，包括求职信

> ID：821958
> 
> 赞同：0
> 
> 时间：2009-05-04T20:39:11.043
> 
> 标签：quickbooks, qbfc, qbxml

有没有办法通过 SDK（我使用 qbXML 和 QuickBooks Web 连接器连接到 Java 应用程序服务器，SDK 版本 7.0，QuickBooks 企业 9.0）打印带有求职信的发票？它可能需要第三方工具，因为 QuickBooks 似乎有一个不错的“待打印”小复选框，可让您从提醒窗口逐一打印它们（您可以批量打印发票，并以这种方式批量添加标签，但不是求职信）？

作为替代方案，在创建时标记通过 SDK 创建的发票的某种方式，以便以后可以使用适当的求职信打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T22:45:30.850

实现这一点的唯一方法是通过非常紧密的 Quickbooks UI 事件集成，即使这样也将具有挑战性。QuickBooks SDK 基本上支持 UI 功能（或者实际上是其中的一个子集，但是一个很大的子集）。UI没有办法在要打印的发票上指定cover letter，除非你一个一个手动做，所以没有办法通过SDK来做。

如果有第三方工具可以做到这一点，我找不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T12:42:29.050

您可以通过 SDK 从 QuickBooks 获取发票数据并编写您自己的 PDF 生成例程来批量打印发票……但是它不会使用 QuickBooks PDF 生成的东西，也不会使用实际的 QuickBooks 模板。

# java - 解析 WSDL 以提取服务/端口元素

> ID：821959
> 
> 赞同：1
> 
> 时间：2009-05-04T20:39:17.643
> 
> 标签：java, xml, regex, parsing, wsdl

我想自动处理 WSDL 文件以发现定义的服务/端口元素。这可能吗，使用 Java 或某种 Ant 实用程序？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T14:35:34.983

.NET 框架具有 System.Web.Services.Description.ServiceDescription 类型，这将有所帮助，但您可能想查看这个...

[http://mikehadlow.blogspot.com/2006/06/simple-wsdl-object.html](http://mikehadlow.blogspot.com/2006/06/simple-wsdl-object.html)

...它向您展示了一个“简单的 WSDL 对象”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T12:01:04.087

JAX-WS 确实包含 WSDL 解析代码并允许您检查 WSDL 端口和服务。

如果您正在寻找可能更健壮的东西，允许您操作或检查 WSDL 的其他部分，WSDL4J 可能对您有用。WSDL4J 还可能具有不被[认可的“独立技术”](http://java.sun.com/javase/6/docs/technotes/guides/standards/index.html)的额外好处，这意味着您可以轻松地将其包含在您的类路径中，而不必担心它与您的代码运行的 JVM 版本冲突。

如果您确实必须进行 Web 服务调用并且只需要检查 WSDL 的高级部分，那么 JAX-WS 就可以正常工作。如果您需要更便携的东西而没有可能的配置开销和/或您实际上不需要进行 Web 服务调用，那么 WSDL4J 可能是更好的选择。

# ruby-on-rails - 构建与新问题

> ID：821964
> 
> 赞同：0
> 
> 时间：2009-05-04T20:40:24.600
> 
> 标签：ruby-on-rails

有没有人遇到过这个问题？

我有一组评论，我在视图中正常循环：

```
<% for comment in @post.comments %>
  <%= comment.body %>
<% end %> 
```

但我也有一个表单来添加评论，但似乎如果我在控制器中使用 @post.comments.build 而不是 Comment.new ，它会在循环中创建一个“评论”的空白实例。

我更喜欢使用 .build 而不是 .new 有人遇到过这个吗？有黑客吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T20:43:35.027

有趣的是，我几天前遇到了这个。

我最终选择了，`Model.new`但您也可以在致电后尝试重新加载关联`build`。

`@post.comments(true)`将重新加载它。（您也可以`@post.comments(:force_reload)`为可读性而写作。）

重新加载的替代方法可能是调用`all`关联的命名范围，因此`@post.comments.all`.

我认为无论如何都会发出一个新的查询，但也许他们会命中查询缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T23:59:07.570

```
@comments = @post.comments
@comment  = @post.comments.build 
```

我想这样就可以了。

# iphone - 将 iPhone 与 REST 服务器同步的代码

> ID：821967
> 
> 赞同：4
> 
> 时间：2009-05-04T20:42:42.690
> 
> 标签：iphone, cocoa-touch, rest, synchronization

是否有任何用于将 iPhone 与服务器同步的开源代码（最好是 REST）？

在 github 和 google 代码上一无所获。

问候...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T20:55:17.463

我一直在处理一个名为[ObjectiveResource](http://iphoneonrails.com/getting-started)的项目（此处为 Github 项目：http: [//github.com/yfactorial/objectiveresource/tree/master](http://github.com/yfactorial/objectiveresource/tree/master)），该项目主要关注您的 iphone 模型和基于 REST 的 Web 服务之间的通信层。它针对 Rails 应用程序，但应与任何 REST api 一起使用。该项目的一部分是一个更加面向同步的解决方案，该解决方案仍处于早期开发阶段，但最近在[http://groups.google.com/group/objectiveresource?hl=en](http://groups.google.com/group/objectiveresource?hl=en)的目标资源 google 组中已经进行了相当多的讨论.

我强烈推荐客观资源，我一直在使用它和 sqlitepersistenobjects 来处理我的 iphone 项目的同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T03:46:09.630

我建议使用来自 All-Seeing Interactive 的优秀 ASIHTTPRequest 源：http: [//allseeing-i.com/ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest)。我正在这样做，还有几个已发布的 iPhone 应用程序也是如此，因此您可以确定代码非常可靠。

这是 CFNetwork API 的包装器，它使与 Web 服务器通信的一些更繁琐的方面变得更容易。它是用 Objective-C 编写的，适用于 Mac OS X 和 iPhone 应用程序。

它适用于执行基本的 HTTP 请求并与基于 REST 的服务（GET / POST / PUT / DELETE）进行交互。ASIFormDataRequest 子类使使用 multipart/form-data 提交 POST 数据和文件变得容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T20:52:15.333

我成功地使用了 Adrian Kosmaczewski 的[iPhone Rest Wrapper](http://github.com/akosma/iphonerestwrapper/tree/master)。另请参阅[此 SO 问题](https://stackoverflow.com/questions/630306/iphone-rest-client)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-01-10T20:25:42.103

我建议查看 RestKit：[http:](http://restkit.org/) //restkit.org/它提供了一个出色的 API，用于访问 RESTful Web 服务并将远程资源表示为本地对象，包括将它们持久化到 Core Data。

# java - 从 Java 查询 Mac OS X Spotlight

> ID：821969
> 
> 赞同：3
> 
> 时间：2009-05-04T20:43:25.323
> 
> 标签：java, macos, spotlight

相关：

[从 Java 查询 Windows 搜索](https://stackoverflow.com/questions/779793/query-windows-search-from-java/787971#787971)

但是这次要使用 OSX 的聚光灯

我想使用 Java 的 OSX 聚光灯服务。有可用的 API 吗？

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T21:00:00.340

我知道没有用于 Spotlight 的 Java API（我不认为它被添加到现在已弃用的 Cocoa-Java 桥接器上的桥接开发已停止）。但是，您可以使用[JNI](http://developer.apple.com/technotes/tn2005/tn2147.html)包装 Spotlight的过程 C [API](http://developer.apple.com/documentation/Carbon/Reference/MDQueryRef/Reference/reference.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-01-18T21:04:53.527

我[找到了一些](http://lists.apple.com/archives/Java-dev/2006/Oct/msg00224.html)包含 mdfind 命令行的代码，对我来说很好用：

```
import java.io.*;
import java.util.*;

/**
 * This class performs filesystem searches using the Spotlight facility in Mac OS X
 * versions 10.4 and higher.  The search query is specified using the syntax of the
 * mdfind command line tool.  This is a powerful syntax which supports wildcards,
 * boolean expressions, and specifications of particular metadata attributes to search.
 * For details, see the documentation for mdfind.
 *
 * @author Peter Eastman
 */

public class Spotlight
{
  /**
   * Perform a Spotlight search.
   *
   * @param query      the query string to search for
   * @return a list of all files and folders matching the search
   */

  public static List<File> find(String query) throws IOException
  {
    return doSearch(new String[] {"mdfind", query});
  }

  /**
   * Perform a Spotlight search.
   *
   * @param query      the query string to search for
   * @param folder     the search will be restricted to files inside this folder
   * @return a list of all files and folders matching the search
   */

  public static List<File> find(String query, File folder) throws IOException
  {
    return doSearch(new String[] {"mdfind", "-onlyin", folder.getAbsolutePath(), query});
  }

  private static List<File> doSearch(String command[]) throws IOException
  {
    Process process = Runtime.getRuntime().exec(command);
    BufferedReader out = new BufferedReader(new InputStreamReader(process.getInputStream()));
    ArrayList<File> results = new ArrayList<File>();
    String line;
    while ((line = out.readLine()) != null)
      results.add(new File(line));
    return results;
  }

  /**
   * Get a map containing all searchable metadata attributes for a particular
   * file or folder.
   *
   * @param file     the file to report on
   * @return a Map containing all metadata for the file
   */

  public static Map<String,String> getMetadata(File file) throws IOException
  {
    Process process = Runtime.getRuntime().exec(new String[] {"mdls", file.getAbsolutePath()});
    BufferedReader out = new BufferedReader(new InputStreamReader(process.getInputStream()));
    HashMap<String,String> results = new HashMap<String,String>();
    String line;
    while ((line = out.readLine()) != null)
    {
      int equals = line.indexOf('=');
      if (equals > -1)
      {
        String key = line.substring(0, equals).trim();
        String value = line.substring(equals+1).trim();
        results.put(key, value);
      }
    }
    return results;
  }
} 
```

# nhibernate - NHibernate - 更新带有触发器的表会导致错误 - 意外的行数：2；预期：1

> ID：821981
> 
> 赞同：23
> 
> 时间：2009-05-04T20:45:45.273
> 
> 标签：nhibernate, hibernate, nhibernate-mapping

所以我正在尝试使用 NHibernate 更新我的 MS SQL 2005 数据库中的对象。请记住，这是许多实时系统中使用的遗留数据库，我无法删除触发器。

当我的数据提供者尝试 .SaveOrUpdate() 一行时，我得到两个返回（一个用于实际更新，一个用于触发器执行）

原始回报如下所示：

（1 行受影响）

（1 行受影响）

NHibernate 然后抛出这样的异常：“意外的行数：2；预期：1”

我本质上是在会话中寻找与“SET NOCOUNT ON”等价的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-05T00:37:29.147

而且您无法更新触发器以在触发器代码之前/之后禁用/启用 SET NOCOUNT 吗？

SET NOCOUNT ON -- 你的触发器 SET NOCOUNT OFF

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T00:59:49.890

NHibernate JIRA [NH-1353](https://nhibernate.jira.com/browse/NH-1353)提供了一个补丁来禁用配置文件中的行计数检查。看来这个补丁还没有进入 2.x 主干。

# language-agnostic - 您将如何教授 Web 开发？

> ID：821988
> 
> 赞同：11
> 
> 时间：2009-05-04T20:47:26.343
> 
> 标签：language-agnostic

我是一所私立高中院校网络和互联网相关课程的首席讲师。我目前的课程包括 HTTP、TCP/IP、(X)HTML/CSS/JavaScript 和通用 SQL 的介绍。明年我们将主要处理 PHP / Java。在您看来，与传统开发相比，Web 开发最重要的方面是什么？我讲课的重点应该是什么？

当然，我会学习一门课程，但我真的很想用所有有时间的东西来增强它，从炒作和语义到老派的硬核脚本。

请记住，我很幸运能够与才华横溢且积极进取的人打交道。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-04T21:32:50.900

**Web开发最重要的方面：**

*   这段代码在哪里运行？（客户端与服务器编程 - 正如许多人所说）
*   谁会使用这个？（了解您的受众——他们为什么出现在您的网站/应用程序上）
*   如何玩得好（版权，标准，借用想法与偷东西）
*   如何足智多谋（代码库、谷歌搜索和 stackoverflow）

**讲座重点**

我坚信情境学习。让他们选择一个具有边界和指导方针的项目，这些项目将采用您想要跨越的概念。人们可以花一整天时间学习语法和概念，但真正的学习是在你试图解决问题时完成的。他们也会有更多的乐趣。

**概括**

**关于如何**（XHTML、CSS、JS 等）的讲座，但仅限于**Who**、**What**和**Why**的上下文中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-04T20:52:48.530

在我看来，最重要的是教导服务器和客户端编程之间的区别，以及何时使用其中一种。我对不了解差异的新毕业生数量感到非常惊讶。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-04T20:56:04.547

恕我直言，Web 开发中最困难的概念是状态以及如何维护它。

如果我正在设计一门 Web 编程课程，我想我会让学生设计一个尝试解决透明状态维护的简单应用程序框架。将它们分成组，您可以让它们采用不同的方法（服务器端、客户端、数据库支持等）。最后，我相信与您专注于开发实际应用程序相比，他们会学到更多关于 Web 架构的知识。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-04T20:54:35.080

对于前端 Web 开发 ((X)HTML/CSS/JavaScript)，请尝试[Opera Web 标准课程](http://www.opera.com/company/education/curriculum/)，其中：

> 将学生从完全的初学者带入基于标准的 Web 设计（包括 HTML、CSS 和 JavaScript 开发）的坚实基础。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-04T20:57:00.800

我非常相信灵感。作为一名新的 Web 开发人员，我发现让我的网站可用、吸引人且编码良好真的很困难。[我在Nettuts](http://nettuts.com/)和[Smashing Magazine](http://smashingmagazine.com)等外部资源中找到了灵感。这些网站真的让我对我真正可以在设计/编码中学习和使用的所有功能敞开心扉。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-04T20:58:02.717

好吧，如果您要征求意见....

请教他们：

1.  自记录代码。
2.  客户端和服务器的区别
3.  数据检查
4.  安全

如果他们对编程语言有很好的理解（听起来他们会在你的课程中得到），那么我列出的内容将是一个很大的改进。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-04T21:00:31.773

我也相信只有在第一次学习一点软件工程之后才能教授 Web 开发。我认为敏捷过程是教授学生软件工程的最佳途径。它是轻量级的，不像文档驱动的那样。

之后我会教他们客户端服务器编程的基础知识、http 协议和一些基本的 web 编程（PHP 和 javascript 就足够了）。如果有足够的时间，我会向他们展示 Java EE 编程的基础知识以及它与 PHP 之间的区别。

还涵盖了一些更高级的材料，例如 Web 的 MVC（使用 JSF）和 javascript 库 (JQuery)。我还会教他们数据访问对象和持久对象。

对于我今年的高级研究，我为需要网络编程、网页设计和软件工程背景的高级大学课程准备了一些材料。您可以查看[这里](http://students.juniata.edu/scheikp05/research)的基本资料，以大致了解我对高级 Web 应用程序开发课程的想法。我知道这可能超出了您的范围，但这可能是一个开始。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-04T21:01:08.713

请记住，Web 编程是一团糟，您的工作不仅是在隧道尽头提供光，而且是隧道本身。我会扩展 AaronS 的回答：

*   客户端和服务器的区别。
*   Web 应用程序在*网络*上运行，[这意味着](http://en.wikipedia.org/wiki/Fallacies_of_Distributed_Computing)。
*   有不止一种方法可以做到这一点。平方。

最后，您将不得不选择*不*教什么才能真正到达某个地方。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-04T22:33:19.537

如果您有一群积极进取的人，那么我建议您专注于从头开始创建一个完整的 Web 应用程序，我的意思是，从需求获取本身开始。

您可以从头脑风暴会议开始，让一些学生从不同的角度扮演客户的角色（您需要自己提出基本问题），然后另一组学生试图获得“客户” " 组来表达他们的需求，并通过 Web 应用程序为这些问题提出解决方案。这将帮助他们了解一般发展中最大的问题之一，即与客户的互动以及如何从他们那里获得最多的信息，以克服通常的沟通问题。实际上，如果您可以让其他非技术人员充当客户，那就更好了。

然后你可以介绍一种方法，比如极限编程或任何你喜欢的方法。我建议使用敏捷的，因为它会提供更快的结果并且不会那么快变得无聊，此外，市场似乎正在转向有利于它们。

现在，关于 Web 开发本身，让人们了解对 Web 标准的需求以及如果不遵循这些标准（IE6）会出现怎样的错误，这一点非常重要

毕竟这一切都清楚了，是时候让他们意识到，在 Web 开发中，大多数时候你只需要处理他们的应用程序将在其中显示的平台的差异，并教他们实际的技术来做到这一点，比如不显眼的 javascript并逐步增强。

关于等式的服务器端，我认为强制使用模式（MVC 是必须的）、代码重用和所有通常的开发实践是很重要的。并确保他们了解 HTTP 本身是一个无状态协议以及以负责任的方式处理 cookie 和会话的重要性，在这里确保他们了解服务器端和客户端之间的差异很重要。

此外，覆盖 OWASP 前 10 名（至少）是必须的，最新版本可在以下网址获得：[http ://www.owasp.org/index.php/Top_10_2007](http://www.owasp.org/index.php/Top_10_2007)

Some links: [http://www.quirksmode.org/blog/archives/2005/06/three_javascrip_1.html](http://www.quirksmode.org/blog/archives/2005/06/three_javascrip_1.html) [http://dowebsitesneedtolookexactlythesameineverybrowser.com/](http://dowebsitesneedtolookexactlythesameineverybrowser.com/) [http://forabeautifulweb.com/blog](http://forabeautifulweb.com/blog) [http://www.alistapart.com/](http://www.alistapart.com/) [http://www.owasp.org/index.php/Top_10_2007](http://www.owasp.org/index.php/Top_10_2007)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-04T20:53:53.350

教授 Web 开发（如旧时代的 GUI 构建器）有过度关注前端而没有足够关注后端的风险。太容易陷入让学生过多地思考肤浅的视觉问题（例如，如何对齐这两件事）而不是核心问题（我们如何有效地计算、计算、存储等）的陷阱。

此外，许多 Web 开发语言并不是良好编程实践的标志，因为它们往往处于更脏的脚本方面。

对我来说，这两个因素加在一起就是为什么像 PHP 这样的语言经常得到不好的评价。

如果你在教那些真正将要成为实践开发人员的人，我会分别关注模型和视图，并展示如何将它们联系起来。但是在高中环境中，父母可能只是希望他们的孩子为他们的大学申请展示一些公开可见的东西。

如果他们真的很有才华和积极性，就教他们一些 Web 表现形式的真正编程（例如，使用 Java servlet），并将所有脚本留给他们在业余时间学习。一位好老师对于培养良好的工程技能是无价的，所以把你的时间用在重要的地方。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-04T20:55:52.360

老实说，我不相信如果没有一般软件开发的良好背景，你就不能很好地进行 Web 开发。如果一个人不注意这一点，他/她将最终成为一个平凡的脚本或其他东西。

如果你告诉我们你有什么样的背景的人，那将是一个好主意。

如果你有一些金融学院的毕业生，不清楚他们对任何一种发展会有什么样的动力。如果这些是工程师或一些创意领域，如设计、装饰等。这将是一个不同的故事。

尝试从开发的各个方面收集一些最佳实践。一点来自测试和质量控制，一点来自项目管理，一些关于与客户打交道的事情，公开软件的安全性，法律方面。没有太多，只是为了画一个大图。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-04T20:56:56.977

我将从Opera[的 Web 标准教程](http://dev.opera.com/articles/view/1-introduction-to-the-web-standards-cur/)开始。我认为它可以很好地理解 Web 开发中的一些基本概念

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-04T21:00:58.230

对于编程部分，我建议你从你能想到的最低级别/最基本的概念开始。我首先想到的是 HTML。您可以确保学生理解 HTML（以及一般的标记）及其基本语法。我认为，从手工编码的 HTML 开始，他们也会更加欣赏一些可以帮助您生成 HTML 或其他代码的出色工具。

之后，您可以了解一些与 HTML 相关的工具和技术，例如 CSS、JavaScript 和 AJAX。

一旦涵盖了客户端并且这些概念在他们的脑海中具体化，您就可以转向服务器端脚本/编程。服务器端的大多数语言只是简单地将 HTML、CSS、JavaScript 等发送到浏览器，因此首先了解这些内容至关重要。

最后，开始谈论使用他们新发现的知识来创建与其他系统（数据库、Web 服务等）通信的应用程序。一旦所有这些基础知识都到位，您可能会完成课程，但是他们将为 200 级做好准备，对吗？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-04T21:01:10.103

我喜欢关于客户端和服务器端编程之间差异的答案。由于您教授有才华/积极进取的学生，我认为对 MVC（模型视图控制器）架构的一些理论讨论可能是有序的。它最初是如何为桌面应用程序设计的，在这种情况下，有必要实现一个监听事件的系统，以便能够在修改模型时保持视图的所有方面与模型的状态同步。但是那个，在web范式下，监听代码是以web服务器的形式免费给你的，请求就是事件。因此，Web 的 MVC，至少在客户端和服务器之间的交互方面，应该不那么复杂，控制器只是在客户端和服务器之间进行中介。

当然，那是在 Ajax 出现之前。现在适合在客户端使用 Javascript 实现侦听器代码，以便能够保持小部件同步。

我是 MVC 瘾君子，所以从中获取有用的信息。您的里程可能会有所不同，但我确实认为 MVC 上的材料肯定是有保证的。

祝你好运

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-04T21:35:58.880

这也非常注重前端......但我认为这是一篇很棒的帖子。

[http://veerle.duoh.com/blog/comments/teach_the_web_right/](http://veerle.duoh.com/blog/comments/teach_the_web_right/)

[编辑] 她提到了之前文章中提到的 Opera Web 标准课程，但她也提到了 WaSP InterAct 课程。这似乎仍在进行中，但已经有一些很棒的资源和链接。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-04T21:49:48.987

由于您正在研究服务器端的东西，我强烈建议您了解一些基本的应用程序安全性。从使应用程序（Wordpress、PHPBB 等）保持最新和修补，到 SQL 注入和跨站点脚本等实际攻击。

因为这听起来像是从头开始教他们，所以您有很好的机会向他们展示输入过滤和输出转义、合法用户身份验证和其他最佳实践的重要性。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2009-05-04T20:55:16.857

专注于“明年我们将主要处理 PHP / Java”。我将专注于 Java，因为我对 PHP 了解不多。

1.  让模型正确。设计一个模型，使用 ORM，让它合理地工作。这是高度可重用的东西。它是应用程序的支柱。如果这不正确，其余的将很快变得一团糟。

2.  正确展示模板。JSP 不应该做太多（他们可以，但不应该）。这应该有任何花哨的处理——要么是模型问题，要么是动作类问题。

3.  将这些与 Struts 动作类和 Java Bean 结合在一起，这些在您正在为其构建解决方案的领域中是有意义的。

4.  添加 CSS/JavaScript 和其他的东西 - 基本上 - 工作。再多的 JavaScript 也无法修复一个有根本缺陷的模型。

核心技术问题（XML、HTML、SQL 等）很重要，但不是中心问题。很难跳过，但你必须跳过。

首先是 SQL、ORM、Java。

HTML，JSP，接下来是更多的 Java。

Struts、Action Classes 等等，还有更多的 Java。

我认为许多核心技能问题都需要以即时的方式来解决。如果您在 HTML、CSS 和 SQL 基础上花费太多时间，那么没有人会构建任何有用的东西。

# jquery - DOCTYPE 问题，jQuery

> ID：821992
> 
> 赞同：0
> 
> 时间：2009-05-04T20:48:15.233
> 
> 标签：jquery, scroll

Scroll.js 用于#bird 块，它跟随页面滚动。

主要问题 - 它正在工作，如果我删除 Doctype 行，这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

如果打开了 doctype ，**它就不起作用。**

这是html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="scroll.js" type="text/javascript"></script>
</head>

<body>
<div style="position:relative; height:20000px">
    <div id="bird" style="position:absolute;left:0;top:20px;width:200px"></div>     
</div>
</body>
</html> 
```

和js：

> 移除

不要要求删除**文档类型，**它**需要。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T20:58:05.790

你需要替换这个：

```
document.body.scrollTop 
```

有了这个：

```
document.documentElement.scrollTop 
```

`scrollTop`属于`<html>`标准模式下的元素，而不是`<body>`元素。

（请注意，这`document.body.scrollTop`在您的代码中出现了 3 次。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:52:45.753

你的鸟 div 有一个问题，样式有 width:200"，应该是 width:200px"（添加单位）

# asp.net - 使用 ASP.NET AJAX 控制工具包时 Firefox 中的 Javascript 错误

> ID：821997
> 
> 赞同：4
> 
> 时间：2009-05-04T20:49:55.387
> 
> 标签：asp.net, javascript, firefox, ajaxcontroltoolkit, microsoft-ajax

我最近一直在构建一个使用 .NET Framework 3.5 SP1 和 AJAX 控件工具包的网站。UpdatePanel 等标准 AJAX 控件可以正常工作。一旦我从 AJAXControlToolkit 添加一个 CollapsiblePanelExtender 控件到页面，我就会收到一个 Javascript 错误。（注意：这个问题发生在 Firefox 上。IE 没有问题。）

```
this.dateTimeFormat is undefined 
```

在线上

```
this._upperAbbrMonths = this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthNames); 
```

在函数中

```
function Sys$CultureInfo$_getAbbrMonthIndex(value) {
    if (!this._upperAbbrMonths) {
        this._upperAbbrMonths = this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthNames);
    }
    return Array.indexOf(this._upperAbbrMonths, this._toUpper(value));
} 
```

我已经对该主题进行了一些深入的 Google 搜索，并且该功能曾经在 ASP.NET AJAX 的预发布版本中出现错误。此问题是由于变量 _upperAbbrMonths 在 return 语句中被错误地引用为 _upperMonths 引起的。尽管相同的功能对我造成了错误，但它似乎是具有更正代码的更新版本。

纠正问题的最佳方法是什么？

即使有一种简单的方法来修复 javascript，由于脚本似乎是由 ASP.NET AJAX 框架生成的，如何实现这种更改？***********