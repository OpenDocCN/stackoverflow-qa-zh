# StackOverflow 问答 11131000-11131999

# php - 序列化/反序列化 javascript 并由 PHP 读取

> ID：11131000
> 
> 赞同：4
> 
> 时间：2012-06-21T03:05:56.030
> 
> 标签：php, javascript, jquery, ajax

我知道可以在 PHP 中序列化和反序列化，然后让 javascript 读取响应，我的问题是我可以反过来做吗？我有一个可能被多次调用的函数，每次调用它时，我都需要将新数据添加到数组或某种形式的对象中。然后我想获取所有这些数据并将其发送到 PHP 进行解释和分析，就像它是一个数组一样。

我想我在这里画了一个空白，这应该很容易完成 xD 哦，是的，我将信息临时存储在隐藏字段中，直到准备好提交（我也将在 PHP 中进行安全检查）

感谢：D

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T03:27:38.550

要使 JavaScript 以 PHP 的序列化语法进行序列化，需要自定义 JavaScript 函数，但是您可以使用 JSON 做您想做的事情。

要在 JavaScript 中序列化为 JSON，您可以使用[JSON 对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON)的 stringify 方法：

```
JSON.stringify(myArray) 
```

并在 PHP 中反序列化 JSON 字符串，您将使用[json_decode](http://php.net/manual/en/function.json-decode.php%20%22json_decode)：

```
json_decode($myJsonArray) 
```

如果要支持旧版浏览器，则必须包含 JSON 对象的外部实现。请参阅[浏览器原生 JSON 支持](https://stackoverflow.com/questions/891299/browser-native-json-support-window-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:22:09.520

使用 JavaScript 将数据编码为 JSON，然后将其 urlencoded 发布到服务器。在服务器上使用 json_decode 来解析数组。

# android - 如何更改 onClick 突出显示的形状？

> ID：11131005
> 
> 赞同：2
> 
> 时间：2012-06-21T03:06:41.070
> 
> 标签：android, onclick, icons, highlight

我目前在我的应用程序的 GridView 中有图标。单击它们时，它们周围会短暂出现一个橙色方块作为突出显示。唯一的问题是，我认为这看起来很业余，并且想更改形状，以便在 GridView 中剪辑图标而不是大正方形。如果您不确定我的意思，可以在 Catch Notes 应用程序的仪表板/主屏幕上成功执行。我只是想知道是否有人知道解决这个问题的方法，或者它是否只是一个小的布局属性。

[https://play.google.com/store/apps/details?id=com.threebanana.notes&hl=en](https://play.google.com/store/apps/details?id=com.threebanana.notes&hl=en)

在此先感谢，所有帮助将不胜感激！

它看起来像下图中的这个 EditText。它以橙色与 EditText 接壤的方式正是单击时它与主屏幕中的图标接壤的方式。

![在此处输入图像描述](../Images/f21819811250563c9e281d74715164f5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T09:29:23.713

首先，在你的布局文件中，指定一个**可绘制的背景**：

```
android:background="@drawable/bg_your_view" 
```

然后编辑可绘制的**bg_your_view**文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/bg_your_view_pressed" android:state_pressed="true"></item>
    <item android:drawable="@drawable/bg_your_view_normal" android:state_focused="false"></item>
</selector> 
```

**最后，为按下**状态和**正常**状态创建相应的可绘制文件：

*   **bg_your_view_pressed.xml**包含形状，您想要突出显示的颜色。
*   **bg_your_view_normal.xml**类似，只是没有高亮效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:20:25.883

我决定解决此问题的最简单方法是在单击 GridView 上的图像时简单地引用另一个图像。这意味着第二张图像可以在 Photoshop 中进行编辑，以使其周围发光。

# ruby-on-rails - 在 Sass 中指定边界是否存在

> ID：11131006
> 
> 赞同：0
> 
> 时间：2012-06-21T03:06:42.820
> 
> 标签：ruby-on-rails, sass

我正在使用 Rails 3.1 并希望有一个可以设置的 Sass 变量（或其他技术）

```
$show_border: border: 1px solid black; 
```

并在布局件中

```
.info{
  $show_border
  width: 600px;
  display:inline-block;
  float:left;
} 
```

这样我就可以看到布局并集中打开和关闭它。我不能只将边框设置为 0，因为它不能跨浏览器工作。有没有一种简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:40:32.477

如果需要，您可以将其作为 mixin 执行：

```
@mixin show_border {
  border: 1px solid black;
}

.info {
  @include show_border;
} 
```

或者您可以在 JavaScript 中执行此操作（即来自小书签）：

```
$(".info").css({ border: "1px solid black" }); // with jQuery

// Without jQuery (in modern browsers)
Array.prototype.slice.call(document.getElementsByClassName("info"), 0).forEach(function (element) {
  element.style.border = "1px solid black";
}); 
```

# ruby - 在类和方法中定义类实例变量有什么区别。为什么？

> ID：11131007
> 
> 赞同：0
> 
> 时间：2012-06-21T03:06:50.727
> 
> 标签：ruby, variables, instance-variables, class-instance-variables

嗯，如题所示，下面这两个类实例变量有什么区别

```
class Document
  @default_font = :Arial
  ...
end 
```

和

```
class Document
  def foo
    @default_font = :Arial
  end
  ...
end 
```

有没有人可以给我解释一下。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:10:23.580

第二种情况不是类实例变量。这是一个普通的旧实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:48:38.900

在您的第一种情况下，该变量既不是类变量（应该以 开头`@@`，也不是实例变量。它只是一个局部变量，在当前范围之外不可用，甚至在实例方法中也不可用。

第二个是实例变量。

```
class Document
  attr_accessor :var1, :var2
  @var1 = 1
  puts @var1 + 2

  def initialize
    @var2 = 4
    puts @var2**2
    #puts @var1 + 6
  end

end

1.9.2p0 :208 > class Document
1.9.2p0 :209?>     attr_accessor :var1, :var2
1.9.2p0 :210?>     @var1 = 1
1.9.2p0 :211?>     puts @var1 + 2
1.9.2p0 :212?>   
1.9.2p0 :213 >       def initialize
1.9.2p0 :214?>         @var2 = 4
1.9.2p0 :215?>         puts @var2**2
1.9.2p0 :216?>         #puts @var1 + 6
1.9.2p0 :217 >         end
1.9.2p0 :218?>   
1.9.2p0 :219 >     end
3
 => nil 
1.9.2p0 :220 > d = Document.new
16
 => #<Document:0x1a2f0c @var2=4> 
```

实例方法的`@var1 + 6`内部给出了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T04:28:34.200

我没有看到原始帖子的最终答案。我最近读了 Russ Olsen 的《Eloquent Ruby》一书，所以决定在这里添加我的收获。

第一个例子定义 single-@ 变量的作用域是一个类作用域，也就是说，如果关键字*self*出现在方法 def 之外但仍在类定义中，它将引用对象 Document，这反过来又是Class 类的一个实例。

因此第一个例子定义了一个类实例变量，即变量@default_font 是对象Document 的一个实例变量，一个类对象。

**此类实例变量只能通过类级别访问器方法访问，**例如 Document.default_font，而不是 an_instance_of_Document.default_font

因此，如果您定义 attr_accessors：

```
class Document
  @default_font = :Arial # this is a class instance variable, 

#  def self.default_font
#    @default_font
#  end
#
#  def self.default_font=(font)
#    @default_font = font
#  end

  # or replace the above two class methods with the following

  class << self
    attr_accessor :default_font
  end
end 
```

这是一些irb输出：

```
1.9.3p429 :002 > require './document.rb'
 => true 
1.9.3p429 :004 > Document.default_font
 => :Arial 
1.9.3p429 :005 > Document.default_font = :Times
 => :Times 
1.9.3p429 :006 > Document.default_font 
 => :Times 
1.9.3p429 :007 > doc = Document.new
 => #<Document:0x007fe6730d8228> 
1.9.3p429 :008 > doc.default_font
NoMethodError: undefined method `default_font' for #<Document:0x007fe6730d8228> 
```

原帖中的第二个例子在def方法之外没有包含单@变量定义，说明这里的@default_font是一个实例变量，只能被类Document的实例化对象引用。

```
class Document
  def default_font=(font)
    @default_font = font # this defines and set an instance variable
  end

  def default_font
    @default_font        # this defines an instance variable
  end

  # or above two defs can be replaced by the following
  attr_accessor :default_font  # this defines the instance variable and access methods
end 
```

这是一些irb输出：

```
1.9.3p429 :001 > require './document.rb'
 => true 
1.9.3p429 :002 > Document.default_font
NoMethodError: undefined method `default_font' for Document:Class
1.9.3p429 :003 > doc = Document.new
 => #<Document:0x007ffbf1136f88> 
1.9.3p429 :004 > doc.default_font
 => nil 
1.9.3p429 :005 > doc.default_font = :Arial
 => :Arial 
1.9.3p429 :006 > doc.default_font
 => :Arial 
```

# php - Internet Explorer 中的脚本执行超时

> ID：11131008
> 
> 赞同：-2
> 
> 时间：2012-06-21T03:06:51.153
> 
> 标签：php, javascript, internet-explorer-7

我在我的 PHP 程序中加入了 javascript：尝试检查我的代码。

它循环取决于数据库中的记录数。例如：

```
$counter = 0;
foreach($row_value as $data):
   echo $this->javascript($counter, $data->exrate, $data->tab);
endforeach;

private function javascript($counter=NULL, $exrate=NULL, $tab=NULL){

$js = "
<script type='text/javascript'>
$(function () {
  var textBox0 = $('input:text[id$=quantity{$counter}]').keyup(foo);
  var textBox1 = $('input:text[id$=mc{$counter}]').keyup(foo);  
  var textBox2 = $('input:text[id$=lc{$counter}]').keyup(foo);

  function foo() {                      
   var value0 = textBox0.val();
   var value1 = textBox1.val(); 
   var value2 = textBox2.val();
   var sum = add(value1, value2) * (value0 * {$exrate});
   $('input:text[id$=result{$counter}]').val(parseFloat(sum).toFixed(2));

   // Compute Total Quantity
   var qtotal  = 0;
   $('.quantity{$tab}').each(function() {
    qtotal += Number($(this).val());
   });
   $('#tquantity{$tab}').text(qtotal);

   // Compute MC UNIT
   var mctotal  = 0;
   $('.mc{$tab}').each(function() {
    mctotal += Number($(this).val());
   });
   $('#tmc{$tab}').text(mctotal);

   // Compute LC UNIT
   var lctotal  = 0;
   $('.lc{$tab}').each(function() {
    lctotal += Number($(this).val());
   });
   $('#tlc{$tab}').text(lctotal);

    // Compute Result
    var result  = 0;
    $('.result{$tab}').each(function() {
     result += Number($(this).val());
    });
    $('#tresult{$tab}').text(result);
   }

   function add() { 
    var sum = 0;    
    for (var i = 0, j = arguments.length; i < j; i++) { 
      if (IsNumeric(arguments[i])) {    
       sum += parseFloat(arguments[i]); 
      } 
    }   
    return sum; 
   }

   function IsNumeric(input) {  
     return (input - 0) == input && input.length > 0;   
   }            

  });
 </script>
";
 return $js;

} 
```

当我在 IE7 上运行此消息时，此消息总是让我烦恼

> 停止运行此脚本？
> 
> 此页面上的脚本导致您的网络浏览器运行缓慢。如果它继续运行，您的计算机可能会变得无响应。

但在 Firefox 中它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:00:56.467

当 IE 确定脚本运行时间过长时，IE 会显示该消息（实际上其他浏览器也有类似的警告，但它们并非都以相同的方式计算“太长”，也并非都以相同的速度运行）。

您实际上并没有提出问题，但我假设您想知道如何使您的脚本更高效，以便（我们希望）在触发 IE 消息之前完成？

我非常喜欢 jQuery，但使用它确实涉及很多函数调用，包括带有回调的嵌套函数等，一旦你开始将这些函数放入循环中（在你的情况下是多个循环），它会变得非常低效。如果您只处理少量项目，这可能不会引起用户注意，但如果您正在处理很多，那么您可以更改的第一件事肯定会加快您的代码速度，那就是将`.each()`循环更改为标准`for`循环：

```
// CHANGE
   var qtotal  = 0;
   $('.quantity{$tab}').each(function() {
    qtotal += Number($(this).val());
   });
// TO
   var qtotal = 0,
       $q = $('#tquantity{$tab}');
   for (i = 0; i < $q.length; i++)
       qtotal += +$q[i].value; 
```

请注意，在`for`循环中，我`value`直接使用了 DOM 元素的属性，而不是使用 jQuery 来检索它`.val()`（即使在`.each()`你内部也可以使用`this.value`而不是`$(this).val()`）。我还使用了[一元加运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)而不是`Number()`. 这意味着在循环迭代中根本没有函数调用，而您的方式调用了`Number()`, `$()`and （甚至不计算 jQuery 在and`.val()`中在幕后所做的额外处理）。`$()``.val()`

`.each()`对所有循环进行类似的更改（`i`在函数开头声明并为每个循环重新使用它），您应该会看到一些改进。

# postgresql - POSTGRESQL：没有 TOAST 数据的转储表

> ID：11131010
> 
> 赞同：0
> 
> 时间：2012-06-21T03:07:08.553
> 
> 标签：postgresql

我正在尝试从表中隔离 toast 数据，以便可以在没有 toast 数据的情况下转储表。我知道必须有办法做到这一点，但我无法到达那里......建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:12:49.283

使用查询选项尝试[COPY](http://www.postgresql.org/docs/current/static/sql-copy.html)（或 psql 的 \copy） - 您可以选择要导出的列。您还可以选择 CSV 格式而不是制表符分隔、空值的表示等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:04:17.487

[TOAST](http://www.postgresql.org/docs/9.1/static/storage-toast.html)是 PostgreSQL*内部*存储数据的方式。作为用户，对于您来说，只有您委托给数据库的值才能为您保留。

TOAST 主要用于文本数据，当元组的任何属性使元组的大小超过 8k 时（如果 PostgreSQL 使用默认页面大小编译）。这发生在数据库引擎内部，对用户透明。比如说，如果您要插入一行包含大约 10k 个符号的文本，则相应的属性将是 TOASTed。

鉴于 TOAST 的工作原理，您的问题看起来像：*如何转储没有包含大块数据的属性的表？*我似乎不清楚这样做的目的是什么，因为您的转储将不完整。

* * *

**编辑：**我不知道如何查找任何元组的任何属性是否具有 TOASTed 值。相反，我将消除所有*可以具有*TOASTed 值的属性。

以下查询将为您提供始终处于`PLAIN`存储模式的表的所有列：

```
SELECT a.attname
  FROM pg_class t
  JOIN pg_attribute a ON t.oid = a.attrelid
  JOIN pg_type typ ON typ.oid = a.atttypid
 WHERE t.relkind='r' AND t.relname = 'element'
   AND a.attnum > 0 AND NOT a.attisdropped
   AND typ.typstorage='p'
 ORDER BY a.attnum; 
```

此查询将生成所需的`SQL`，您可以将其包装在脚本中或 PL/pgSQL 的`EXECUTE`语句中：

```
SELECT 'COPY '||quote_ident(t.relname)||
       '('||string_agg(a.attname, ',' ORDER BY a.attnum)||') TO stdout;'
  FROM pg_class t
  JOIN pg_attribute a ON t.oid = a.attrelid
  JOIN pg_type typ ON typ.oid = a.atttypid
 WHERE t.relkind='r' AND t.relname = '<YOUR_TABLE>'
   AND a.attnum > 0 AND NOT a.attisdropped
   AND typ.typstorage='p'
 GROUP BY t.relname; 
```

# backbone.js - Backbone.js 模型验证无法阻止模型保存

> ID：11131013
> 
> 赞同：0
> 
> 时间：2012-06-21T03:07:32.977
> 
> 标签：backbone.js

我为 Backbone.js 模型定义了一个验证方法。问题是即使验证失败（即 Model.validate 方法返回一个值），post/put 请求仍会发送到服务器。这与 Backbone.js 文档中的解释相矛盾。我无法理解我做错了什么。

以下是模型定义：

```
/**
 * Model - Contact
 */
var Contact = Backbone.Model.extend({
  urlRoot: '/contacts.json',
  idAttribute: '_id',
  defaults: function() {
    return {
      surname: '',
      given_name: '',
      org: '',
      phone: new Array(),
      email: new Array(),
      address: new Array({
        street: '',
        district: '',
        city: '',
        country: '',
        postcode: ''
      })
    };
  }
  validate: function(attributes) {
    if (typeof attributes.validationDisabled === 'undefined') {
      var errors = new Array();
      // Validate surname.
      if (_.isEmpty(attributes.surname) === true) {
        errors.push({
          type: 'form',
          attribute: 'surname',
          message: 'Please enter a surname.'
        });
      }
      // Validate emails.
      if (_.isEmpty(attributes.email) === false) {
        var emailRegex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i;
        // Stores indexes of email values which fail validation.
        var emailIndex = new Array();
        _.each(attributes.email, function(email, index) {
          if (emailRegex.test(email.value) === false) {
            emailIndex.push(index);
          }
        });
        // Create error message.
        if (emailIndex.length > 0) {
          errors.push({
            type: 'form',
            attribute: 'email',
            index: emailIndex,
            message: 'Please enter valid email address.'
          });
        }
      }

      if (errors.length > 0) {
        console.log('Form validation failed.');
        return errors;
      }
    }
  }
}); 
```

这是调用 Model.save() 方法的视图（请参阅下面的方法 saveContact()）。请注意，出于简洁的原因，属于此视图的其他方法未包括在下面。

```
/** 
 * View - Edit contact form 
 */
var EditContactFormView = Backbone.View.extend({
  initialize: function() {
    _.bindAll(this, 'createDialog', 'formError', 'render', 'saveContact', 'updateContact');
    // Add templates.
    this._editFormTemplate = _.template($('#edit-contact-form-tpl').html());
    this._emailFieldTemplate = _.template($('#email-field-tpl').html());
    this._phoneFieldTemplate = _.template($('#phone-field-tpl').html());
    // Get URI of current page.
    this.currentPageUri = this.options.currentPageUri;
    // Create array to hold references to all subviews. 
    this.subViews = new Array();
    // Set options for new or existing contact.
    this.model = this.options.model;
    // Bind with Model validation error event.
    this.model.on('error', this.formError);
    this.render();
  }
  /**
   * Deals with form validation errors
   */
  formError: function(model, error) {
    console.log(error);
  },
  saveContact: function(event) {
    var self = this;
    // Prevent submit event trigger from firing.
    event.preventDefault();
    // Trigger form submit event.
    eventAggregator.trigger('submit:contactEditForm');
    // Update model with form values.
    this.updateContact();
    // Enable validation for Model.  Done by unsetting validationDisabled
    // attribute. This setting was formerly applied to prevent validation 
    // on Model.fetch() events. See this.model.validate(). 
    this.model.unset('validationDisabled');
    // Save contact to database.
    this.model.save(this.model.attributes, {
      success: function(model, response) {
        if (typeof response.flash !== 'undefined') {
          Messenger.trigger('new:messages', response.flash);
        }
      },
      error: function(model, response) {
        console.log(response);
        throw error = new Error('Error occured while trying to save contact.');
      },
      wait: true 
    });
  },
  /**
   * Extract form values and update Contact.
   */
  updateContact: function() {
    this.model.set('surname', this.$('#surname-field').val());
    this.model.set('given_name', this.$('#given-name-field').val());
    this.model.set('org', this.$('#org-field').val());
    // Extract address form values.
    var address = new Array({
      street: this.$('input[name="street"]').val(),
      district: this.$('input[name="district"]').val(),
      city: this.$('input[name="city"]').val(),
      country: this.$('input[name="country"]').val(),
      postcode: this.$('input[name="postcode"]').val()
    });
    this.model.set('address', address);
  }
}); 
```

# windows - 可以通过WMI设置远程桌面端口吗？

> ID：11131015
> 
> 赞同：0
> 
> 时间：2012-06-21T03:07:51.477
> 
> 标签：windows, wmi, remote-desktop

我一直在尝试通过远程桌面的[WMI 管理类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383477%28v=vs.85%29.aspx)找到一种设置远程桌面侦听的端口的方法。我知道我可以通过[注册表](http://support.microsoft.com/kb/306759)更改端口，但是可以通过 WMI 设置侦听端口还是必须编辑注册表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:20:04.240

是的，它可以做到。这是代码，引用了这个 Microsoft[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393297%28v=vs.85%29.aspx)和[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390445%28v=vs.85%29.aspx)。将 3389 替换为您要使用的新值：

```
const HKEY_LOCAL_MACHINE = &H80000002
strComputer = "."
'Set StdOut = WScript.StdOut
Set oReg=GetObject( _
    "winmgmts:{impersonationLevel=impersonate}!\\" &_ 
    strComputer & "\root\default:StdRegProv")
strKeyPath = "SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp"
strValueName = "PortNumber"

' Display old value
oReg.GetDWORDValue HKEY_LOCAL_MACHINE,strKeyPath,strValueName,dwValue
WScript.Echo "Old RDP value=" & dwValue

' Set new value
dwValue= 3389
oReg.SetDWORDValue HKEY_LOCAL_MACHINE,strKeyPath,strValueName,dwValue
If Err = 0 Then
   oReg.GetDWORDValue _
       HKEY_LOCAL_MACHINE,strKeyPath,strValueName,dwValue
   WScript.Echo "New RDP Value =" & dwValue
Else 
   WScript.Echo "Error in creating key" & _
       " and DWORD value = " & Err.Number
End If 
```

# jquery - 如何使用 jQuery 延迟对象实现预加载器

> ID：11131016
> 
> 赞同：0
> 
> 时间：2012-06-21T03:08:02.353
> 
> 标签：jquery, jquery-deferred

我正在使用 jQuery 延迟对象，因此我可以从多个源中提取数据，但是不确定如何最好地在加载消息中进行编码，该消息在所有内容都被解决时显示，然后在所有内容被解决或被拒绝时隐藏

当前代码：

```
 jQuery.when(loadData('ws-get-shops.php', {shopId:123}),loadData('ws-get-customers.php')).then(updateResults,showError);

var loadData = function(url, data){

    var jqxhr = jQuery.ajax({
        url:url,
        data:data,
        dataType:'jsonp',
        timeout:60000
    });

    return jqxhr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:30:19.533

您可以在开始 ajax 调用之前添加（或显示）加载消息，例如：

```
$('#loadingMsg').show();
jQuery.when(...).then(updateResults,showError); 
```

然后在它们完成时在`updateResults`and`showError`函数中删除（或隐藏）它，例如：

```
function updateResults(...) {
    $('$#loadingMsg').hide();
    ...
}

function showError(...) {
    $('$#loadingMsg').hide();
    ...
} 
```

您还可以添加另一个函数作为函数的第三个参数，该`then`函数在函数进行时调用，`when`并更新您的加载消息以显示百分比或其他内容。

参考：[http ://api.jquery.com/deferred.then/](http://api.jquery.com/deferred.then/)

# android - Android 如何在不超出内存的情况下将许多图像加载到 ListView？

> ID：11131018
> 
> 赞同：0
> 
> 时间：2012-06-21T03:08:43.307
> 
> 标签：android, listview, out-of-memory

我有一个 ListView，每一行都有一个 ImageView 来加载一个小图标。当我向下滚动列表时，将动态加载新行。但是当我向上滚动时，旧行只显示出来，这意味着 ImageView 中的所有图像都缓存在内存中，对吗？现在，如果我向下滚动足够长的时间，存储位图图像的内存将已满，并且出现内存不足错误。那么在这种情况下将 Image 加载到 ListView 的最佳方法是什么？

编辑：当我的活动完成时，我有没有办法清除内存中的所有位图图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:42:15.143

使用以下两个链接，它可能会对您有所帮助。

[懒惰列表](https://github.com/thest1/LazyList)

[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:23:48.407

当您完成显示或设置位图后，使用`bitmap.recycle() and bitmap = null` 这将有助于垃圾收集器清理内存。

# bash - 如何获取文件夹中的文件数作为变量？

> ID：11131020
> 
> 赞同：31
> 
> 时间：2012-06-21T03:09:11.533
> 
> 标签：bash, shell

使用 bash，如何在没有解释器抱怨的情况下获取文件夹中的文件数量，不包括 shell 脚本中的目录？

在朋友的帮助下，我试过了

```
$files=$(find ../ -maxdepth 1 -type f | sort -n)
$num=$("ls -l" | "grep ^-" | "wc -l") 
```

从命令行返回：

```
../1-prefix_blended_fused.jpg: No such file or directory
ls -l :  command not found
grep ^-: command not found
wc -l:   command not found 
```

分别。这些命令适用于命令行，但不适用于 bash 脚本。

给定一个填充了格式为 的图像文件的文件`1-pano.jpg`，我想抓取目录中的所有图像以获取最大编号的文件以附加到正在处理的下一个图像上。

为什么会出现差异？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-21T04:21:12.633

引号导致错误消息。

要获取目录中的文件数：

```
shopt -s nullglob
numfiles=(*)
numfiles=${#numfiles[@]} 
```

它创建一个数组，然后用其元素的计数替换它。这将包括文件和目录，但不包括点文件或`.`或`..`或其他点目录。

使用`nullglob`这样一个空目录会给出 0 而不是 1 的计数。

您可以改为使用`find -type f`，也可以计算目录并减去：

```
# continuing from above
numdirs=(*/)
numdirs=${#numdirs[@]}
(( numfiles -= numdirs )) 
```

另请参阅“[如何在目录中找到最新（最新、最早、最旧）的文件？](http://mywiki.wooledge.org/BashFAQ/003) ”

您可以在执行块内拥有任意数量的空格。它们通常有助于提高可读性。唯一的缺点是它们使文件稍大一些，并且可能会（仅）稍微减慢初始解析。有一些地方必须有空格（例如 around `[`, `[[`, `]`, `]]`and `=`in comparisons）和一些必须没有空格的地方（例如 around`=`在一个 assignment.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-22T03:50:02.693

```
ls -l | grep -v ^d | wc -l 
```

一条线。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-21T05:37:37.427

怎么样：

```
count=$(find .. -maxdepth 1 -type f|wc -l)
echo $count
let count=count+1 # Increase by one, for the next file number
echo $count 
```

请注意，此解决方案效率不高：它为`find`and`wc`命令生成子 shell，但它应该可以工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-21T07:55:56.050

`file_num=$(ls -1 --file-type | grep -v '/$' | wc -l)`

这比 find 命令轻了一点，并且计算当前目录的所有文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-25T13:06:59.540

我能想到的最直接、最可靠的方法是使用该`find`命令来创建可靠的可数输出。

计算`find`with的字符输出`wc`：

```
find . -maxdepth 1 -type f -printf '.' | wc --char 
```

或输出的字符串长度`find`：

```
a=$(find . -maxdepth 1 -type f -printf '.')
echo ${#a} 
```

或使用`find`输出来填充算术表达式：

```
echo $(($(find . -maxdepth 1 -type f -printf '+1'))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-11T15:37:03.813

简单有效的方法：

```
#!/bin/bash
RES=$(find ${SOURCE} -type f | wc -l) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-21T03:13:54.227

摆脱引号。shell 将它们视为一个文件，因此它正在寻找“ls -l”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-21T03:17:14.730

删除qoutes，你会没事的

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-28T16:48:32.417

这是您可以将其作为函数执行的一种方法。注意：你可以传递这个例子，dirs 表示（目录计数），files 表示文件计数或“all”表示目录中所有内容的计数。不遍历树，因为我们不想这样做。

```
function get_counts_dir() {

    # -- handle inputs (e.g. get_counts_dir "files" /path/to/folder)
    [[ -z "${1,,}" ]] && type="files" || type="${1,,}"
    [[ -z "${2,,}" ]] && dir="$(pwd)" || dir="${2,,}"

    shopt -s nullglob
    PWD=$(pwd)
    cd ${dir}

    numfiles=(*)
    numfiles=${#numfiles[@]}
    numdirs=(*/)
    numdirs=${#numdirs[@]}

    # -- handle input types files/dirs/or both
    result=0
    case "${type,,}" in
        "files")
            result=$((( numfiles -= numdirs )))
        ;;
        "dirs")
            result=${numdirs}
        ;;
        *)  # -- returns all files/dirs
            result=${numfiles}
        ;;

    esac

    cd ${PWD}
    shopt -u nullglob

    # -- return result --
    [[ -z ${result} ]] && echo 0 || echo ${result}
} 
```

使用函数的例子：

```
folder="/home"
get_counts_dir "files" "${folder}"
get_counts_dir "dirs" "${folder}"
get_counts_dir "both" "${folder}" 
```

将打印如下内容：

```
2
4
6 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-25T15:50:16.707

扩展接受的答案（Dennis W）：当我尝试这种方法时，在 Bash 4.4.5 中没有子目录的目录计数不正确。

问题是，默认情况下，Bash 中没有设置 nullglob，而是`numdirs=(*/)`使用 glob 模式设置了一个 1 元素数组`*/`。同样，我怀疑`numfiles=(*)`空文件夹会有 1 个元素。

设置`shopt -s nullglob`禁用 nullglobbing 为我解决了这个问题。有关为什么在 Bash 上默认未设置 nullglob 的精彩讨论，请参见此处的答案：[为什么 nullglob 不是默认设置？](https://unix.stackexchange.com/questions/204803/why-is-nullglob-not-default/204944#204944)

注意：我会直接评论答案，但缺乏声誉点。

# javascript - 在 JavaScript 中绘制直线

> ID：11131022
> 
> 赞同：1
> 
> 时间：2012-06-21T03:09:45.260
> 
> 标签：javascript, jquery, draw

我只是想用 JavaScript 画一条线。

我希望它是这样的： http: [//deepliquid.com/projects/blog/arrows2.html](http://deepliquid.com/projects/blog/arrows2.html)

我的版本：http: [//jsfiddle.net/shawn31313/qsWML/5/show](http://jsfiddle.net/shawn31313/qsWML/5/show)

效果不太好，我不知道如何让它发挥作用。这一定是我的 JavaScript 中的一个问题。

这是我的代码：

```
$(document).ready(function() {
    var dragStatus = 2,
        getPos, giveRandomID;
    $(document).mousedown(function(event) {
        dragStatus = 0;
        getPos = {
            top: event.clientY,
            left: event.clientX
        };
        giveRandomID = Math.floor(Math.random() * 99999);
    });
    $(document).mousemove(function() {
        var line = $('#line' + giveRandomID);
        if (dragStatus == 0) {
            $('body').append("<div id='line" + giveRandomID + "' style='position:absolute;top:" + getPos.top + "px;left:" + getPos.left + "px;background:black;width:2px;height:5px'></div>");
            dragStatus = 1;
        }
        if (dragStatus == 1) {
            if (event.clientX > getPos.left) {
                line.css({
                    left: getPos.left,
                    width: event.clientX - getPos.left
                });
            } else {
                line.css({
                    left: event.clientX,
                    width: getPos.left - event.clientX
                });
            }
            if (event.clientY > getPos.top) {
                line.css({
                    top: getPos.top - Math.abs((event.clientY - getPos.top) * 2),
                    '-webkit-transform': 'rotate(' + (event.clientY - getPos.top) + 'deg)'
                });
            } else {
                line.css({
                    top: getPos.top + Math.abs((getPos.top - event.clientY) * 2),
                    '-webkit-transform': 'rotate(' + (getPos.top - event.clientY) + 'deg)'
                });
            }
            //for DEG  "-" Top-Math.abs(DEG*2) for Deg "+" Top+(DEG*2)
        }
    });
    $(document).mouseup(function() {
        dragStatus = 2;
    });
});​ 
```

感谢您提供解决此问题的任何帮助。主要是数学问题，只是不知道我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:25:49.813

使用 Canvas 标签，这里是来自 MDN [https://developer.mozilla.org/en/Canvas_tutorial/Drawing_shapes的示例](https://developer.mozilla.org/en/Canvas_tutorial/Drawing_shapes)

# python - 在 python 上使用 numpy/scipy len() cProfile 结果

> ID：11131031
> 
> 赞同：4
> 
> 时间：2012-06-21T03:10:59.333
> 
> 标签：python, numpy, scipy, cprofile

> **可能重复：**
> [如何分析 Python 脚本？](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)

我曾经`cProfile`用来找出我大部分时间都花在我的python代码上的方法，这是对“percall”进行排序后的输出：

我发现该方法`len()`花费了我大部分时间：

```
53515/533   330 930 0   940 00{len} 
```

但是，我知道`len()`调用会调用 python 对象`__len__()`方法，我怎么知道哪个 python 类/对象花费我最多？

我正在使用 python 2.6.5 并使用以下命令运行我的脚本：

```
python -m cProfile myscript.py 
```

事实上，我的代码将使用`python-numpy`,`scipy`并使用牛顿法进行数值优化。我相信目标函数的梯度计算花费了我大部分时间，并想找出它花费这么多的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:10:34.593

cProfile 为每个函数提供两次：在此函数内花费的总时间（包括子调用）和在此函数内花费的总时间（不包括子调用）。要检测瓶颈，您通常会根据这两个指标考虑最大的成本。

在您的情况下，我会寻找大量调用 len 的函数，看看我是否可以将值存储在某处以避免不必要的调用。

# ruby - Ruby proc vs lambda in initialize()

> ID：11131036
> 
> 赞同：4
> 
> 时间：2012-06-21T03:11:54.620
> 
> 标签：ruby, lambda, proc

我今天早上发现 proc.new 在类初始化方法中工作，但不是 lambda。具体来说，我的意思是：

```
class TestClass

  attr_reader :proc, :lambda

  def initialize
    @proc = Proc.new {puts "Hello from Proc"}
    @lambda = lambda {puts "Hello from lambda"}
  end

end

c = TestClass.new
c.proc.call
c.lambda.call 
```

在上述情况下，结果将是：

```
Hello from Proc
test.rb:14:in `<main>': undefined method `call' for nil:NilClass (NoMethodError) 
```

这是为什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T03:17:26.293

`attr_accessor`您定义了一个被调用的事实`lambda`隐藏了创建块的原始`lambda`方法（因此您的代码实际上隐藏了 Ruby 的`lambda`）。您需要将属性命名为其他名称才能使其工作：

```
class TestClass

  attr_reader :proc, :_lambda

  def initialize
    @proc = Proc.new {puts "Hello from Proc"}
    @_lambda = lambda {puts "Hello from lambda"}
  end

end

c = TestClass.new
c.proc.call
c._lambda.call 
```

# c# - 如何在 c# 中使用套接字打开端口 1450？

> ID：11131039
> 
> 赞同：1
> 
> 时间：2012-06-21T03:12:00.877
> 
> 标签：c#, sockets

代码服务器我有服务器监听端口 1450：

//使用UDP套接字

```
 clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            EndPoint ourEP = new IPEndPoint(IPAddress.Any, 1450);
            //Listen asynchronously on port 1450 for coming messages (Invite, Bye, etc).
            clientSocket.Bind(ourEP);
            //Receive data from any IP.
            EndPoint remoteEP = (EndPoint)(new IPEndPoint(IPAddress.Any, 0));

            byteData = new byte[1024];
            //Receive data asynchornously.
            clientSocket.BeginReceiveFrom(byteData,
                                       0, byteData.Length,
                                       SocketFlags.None,
                                       ref remoteEP,
                                       new AsyncCallback(OnReceive),
                                       null); 
```

但未打开端口 1450 和客户端连接的代码：

```
 otherPartyIP = new IPEndPoint(IPAddress.Parse(txtCallToIP.Text), 1450);
                otherPartyEP = (EndPoint)otherPartyIP; 
```

当我在局域网中运行代码客户端和服务器时，一切正常。但是通过网络运行我检查了局域网中的端口 1450 未打开。告诉我如何在代码服务器中打开端口 1450？谢谢

# java - IntelliJ：将资源添加到类路径，但仍然给我“java.util.MissingResourceException：找不到包.... locale en_US”

> ID：11131040
> 
> 赞同：1
> 
> 时间：2012-06-21T03:12:19.600
> 
> 标签：java, intellij-idea, classpath, resourcebundle

我对 intellij 很陌生，我已经加载了一个我希望编译的项目，一切似乎都很顺利，但是当我编译它时。我得到了找不到捆绑包。

```
java.util.MissingResourceException: Can't find bundle for base name openfire_i18n, locale en_US
    at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1499) 
```

经过一番调查，看来我必须在类路径中包含资源，这是正确的吗？

我已经完成了项目设置、模块、依赖项，并添加了一个“罐子或目录”

有一个显示导出的复选框，我尝试单击它并取消单击它:-)

我可以看到的资源在

> i8n\ResourceBundle

我尝试添加 i8n，它要求我为所选文件提供一个类别，我放了类

运行 - 但仍然是同样的错误..

所以我尝试添加 i8n/ResourceBundle 目录

运行 - 仍然是同样的错误。

我注意到在我的 ResourceBundle 目录下有

C:\Dev\Java\openfire_src_3_7_1\openfire_src\src\i18n\openfire_i18n_en.properties

但没有具体的 en_US 但我认为它应该回退到 EN ??

所以我认为一切都很好。

谁能帮忙

我真的被困住了

谢谢

**编辑**

我还注意到在属性和编译器下我有以下内容，所以它应该只包含这些文件吗？

```
?*.properties;?*.xml;?*.gif;?*.png;?*.jpeg;?*.jpg;?*.html;?*.dtd;?*.tld;?*.ftl 
```

**更多信息**

我刚刚添加了这个文件，所有其他文件都是相同的错误

```
C:\Dev\Java\openfire_src_3_7_1\openfire_src\src\i18n\openfire_i18n_en_US.properties 
```

**调试**

下面是“ResourceBundle bundle = ResourceBundle.getBundle(resourceBaseName, locale);”这一行 这就是它出错的地方。

语言环境 = en_US

和

resourceBaseName = openfire_i18n

```
Locale locale = JiveGlobals.getLocale();

ResourceBundle bundle = ResourceBundle.getBundle(resourceBaseName, locale);

return getLocalizedString(key, locale, null, bundle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:48:36.713

您应该在 Module Sources 选项卡设置中将`openfire_src\src\i18n`目录定义为**Sources**，以便`.properties`文件出现在输出根目录中（以及类路径的默认包中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T06:52:39.657

我在设置 openfire 3.9 期间解决了同样的问题

你需要执行以下任务..

打开“运行配置”单击“类路径”选项卡，然后在“高级”中选择“添加文件夹”，然后从 openfire/src/ 中选择“i18n”

遵循相同的过程并从 openfire/src/resources 添加“jar”文件夹，从 openfire/build/lib 添加“dist”文件夹

![在此处输入图像描述](../Images/75106fcc38fe5f704704d7ebf439dd58.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:31:36.470

作为 CrazyCoder 的附录：资源应该是源文件夹。它不能是测试源文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-12T21:25:43.160

在较新版本的 IntelliJ 中，您可以右键单击并选择“将目录标记为”>“资源根目录”。[这里](https://stackoverflow.com/questions/21722657/how-to-mark-package-as-a-resource-folder)有更详细的解释。

# .net - MEF Why is ComposePart an extension method?

> ID：11131041
> 
> 赞同：0
> 
> 时间：2012-06-21T03:12:28.113
> 
> 标签：.net, mef

CompositionContainer.ComposePart is an extension method. why is that? Looking into the System.Componentmodel.Composition assembly, it looks like it's because it is ONLY meant to work with the attributed programming model while the .Compose() method is able to take in exports as long as it is a composablepart. ComposePart is even hosted in the 'AttributedModelServices' class which makes me think I'm correct.

Am I correct on this? If not, why is it an extension method and not a method in the container class?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:59:37.307

> it looks like it's because it is ONLY meant to work with the attributed programming model

Yes. It would be possible to construct a `CompositionContainer` which doesn't use the attributed model at all. You can create your own export provider implementations or catalog implementations.

But `ComposeParts` relies on import attributes being present on the properties of the given objects.

# asp.net - 正则表达式 .net 风味

> ID：11131044
> 
> 赞同：3
> 
> 时间：2012-06-21T03:12:55.390
> 
> 标签：asp.net, regex, special-characters

不要问这是如何工作的，但目前它确实`("^\|*(.*?)\|*$")`......有点。这删除了所有额外的管道，第一部分，我已经搜索了所有的 anwser。我正在使用VB2011 beta，asp web form，vb编码！

我想捕获`(|)`用于分隔单词的特殊字符管道，即`car|truck|van|cycle`.

问题是用户经常在每个管道之前和之后使用空格、尾随、使用多个和使用空格，即`|||car||truck | van || cycle`.

另一个例子：`george bush|micheal jordon|bill gates|steve jobs`<-- 这是正确的，但是当我删除空间时，它会删除正确的空间。

所以我想去掉任何前导、尾随、前后的任何空格`|`，当然`|`只允许在字母数字字符之间使用一个管道`(|)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:20:50.910

## 要求：

*   移除任何前导或尾随管道
*   “修剪”内部术语周围的空白
*   删除“一次多个管道”

这些是一些示例输入->输出：

```
"|||car | boat|||" -> "car|boat"
"george bush|micheal jordon|bill gates|steve jobs"
        -> "george bush|micheal jordon|bill gates|steve jobs"
"     george bush|micheal jordon  |bill gates |steve jobs      " 
        -> "george bush|micheal jordon|bill gates|steve jobs"
"123|||123" -> "123|123" 
```

你的例子*几乎*对你有用：

```
("^\|*(.*?)\|*$") 
```

在我们继续之前，最好提一下这个 MSDN 参考页面：http: [//msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

而这个在线测试页面：[http ://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

我的 regex-fu 不够强大，因为我认为这个 regex 可能会起作用，但它看起来是一项艰巨的工作。我记录了内联，但它仍然很复杂（而且它完全不起作用）

```
^(?:\|*)((?:\s*)([a-zA-Z0-9]?[a-zA-Z0-9 ]*[a-zA-Z0-9]?)(?:\s*)\|?(?:\|*))(?:\|*)$

^                                     - start the line/input
(?:\|*)                               - capture any pipes at the beginning but ignore them
(                                     - begin matching so we can get the values out the other side
(?:\s*)                               - trim leading spaces
[a-zA-Z0-9]?[a-zA-Z0-9 ]*[a-zA-Z0-9]? - match any alphanumerics with spaces in between
(?:\s*)                               - trim trailing spaces
\|                                    - match any one pipe
(?:\|*)                               - ignore any remaining pipes in a row
)*                                    - end matching, we should be done
(?:\|*)                               - capture any pipes at the end but ignore them
$                                     - end of the line/input 
```

那么，让我们尝试解决问题，好吗？

您应该拆分管道，向前看，看看下一个是否为空长度字符串，如果不是，则将其添加到现有的单词长度中。让我们试试：

（这部分我将使用 DotNetPad）[http://dotnetpad.net/ViewPaste/4bpRXD-vZEOwqTLDQbEECg](http://dotnetpad.net/ViewPaste/4bpRXD-vZEOwqTLDQbEECg)

这是一个示例应用程序，可以满足您的需要，并且无需大惊小怪：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public class DotNetPad {
    public static void Main(string[] args) {
        string[] tests = new[] {
            "|||car | boat|||",
            "george bush|micheal jordon|bill gates|steve jobs",
            "     george bush|micheal jordon  |bill gates |steve jobs      ",
            "123|||123"
        };

        foreach(var s in tests)
        Console.WriteLine(CleanString(s));
    }
    public static string CleanString(string input) {
        string result = string.Empty;

        string[] split = input.Split(new[] {
            '|'
        });

        foreach(var s in split) {
            if (!string.IsNullOrEmpty(s)) {
                result += "|" + s.Trim();
            }
        }
        return result.Substring(1);
    }
} 
```

我在第二个代码上花了最多 10 分钟，以及自从我编辑帖子试图让正则表达式工作以来的所有内容。故事的寓意：只做你必须做的工作，你不必对所有事情都使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:24:30.883

我将从删除空间开始：

```
MyString = Regex.Replace(MyString, "[ ]*\|[ ]*", "|") 
```

然后是多个管道：

```
MyString = Regex.Replace(MyString, "\|{2,}", "|") 
```

例如

```
Dim MyString As String = "car  | truck ers  ||van|||cycle" 
```

给

```
 "car|truck ers|van|cycle" 
```

# html - 更改菜单名称

> ID：11131047
> 
> 赞同：2
> 
> 时间：2012-06-21T03:13:38.457
> 
> 标签：html, css

它的代码太多，无法粘贴在这里，我已经创建了演示，请看一下这个[演示](http://jsfiddle.net/fFRGg/1/)

我的问题是，我正在尝试将菜单的名称从更改为`"Home"`非常`"My Home"`简单，但我已经花了很多时间弄清楚但无济于事......

是的，我也用萤火虫调试过......

//html

```
 <div class="wrapper">
        <div class="wrap">
            <div class="header">                
                <ul class="menu">                        
                    <li class="home"><a href="" title="Downloads" class="title">My Home</a></li>
                    <li class="genres"><a href="#"  class="title">TEST 123</a></li>
                </ul>
            </div>
        </div>
    </div> 
```

//css: 请看demo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:16:15.217

这是一个图像：

[http://www.mp3mixx.com/i/menu.png](http://www.mp3mixx.com/i/menu.png)

CSS：

```
.menu li a.title 
{
    text-indent:-9999em; 
    display:block;
    height:11px;
    background:url('http://www.mp3mixx.com/i/menu.png') no-repeat;
    overflow:hidden;
} 
```

文本用于可访问性和/或搜索引擎优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:19:08.050

文本未显示；这是一张背景图片。您必须更改背景图像才能更改文本。

# iphone - 如何将图像保存到相机胶卷？

> ID：11131050
> 
> 赞同：133
> 
> 时间：2012-06-21T03:14:10.500
> 
> 标签：iphone, ios, objective-c, ipad, camera

我是 Xcode 的新手（使用 4.3），不确定如何将图像保存到设备的相机胶卷中。到目前为止，我所做的只是为按钮设置一个 IBAction 以保存图像。我可以使用什么库方法或函数将图像保存到用户的相机胶卷？

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2012-06-21T03:19:16.100

您使用该[`UIImageWriteToSavedPhotosAlbum()`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894-CH3-SW29)功能。

```
//Let's say the image you want to save is in a UIImage called "imageToBeSaved"
UIImageWriteToSavedPhotosAlbum(imageToBeSaved, nil, nil, nil); 
```

编辑：

```
//ViewController.m
- (IBAction)onClickSavePhoto:(id)sender{

    UIImageWriteToSavedPhotosAlbum(imageToBeSaved, nil, nil, nil);
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-11-03T14:50:28.123

这是使用 Photos 框架的 iOS8+ 的答案。

**目标-C：**

```
#import <Photos/Photos.h>

UIImage *snapshot = self.myImageView.image;

[[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
    PHAssetChangeRequest *changeRequest = [PHAssetChangeRequest creationRequestForAssetFromImage:snapshot];
    changeRequest.creationDate          = [NSDate date];
} completionHandler:^(BOOL success, NSError *error) {
    if (success) {
        NSLog(@"successfully saved");
    }
    else {
        NSLog(@"error saving to photos: %@", error);
    }
}]; 
```

**迅速：**

```
// Swift 4.0
import Photos

let snapshot: UIImage = someImage

PHPhotoLibrary.shared().performChanges({
    PHAssetChangeRequest.creationRequestForAsset(from: snapshot)
}, completionHandler: { success, error in
    if success {
        // Saved successfully!
    }
    else if let error = error {
        // Save photo failed with error
    }
    else {
        // Save photo failed with no error
    }
}) 
```

这是Apple 文档的[链接。](https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHAssetChangeRequest_Class/index.html#//apple_ref/occ/instp/PHAssetChangeRequest/creationDate "关联")

不要忘记将适当的键/值添加到您的 info.plist 以请求访问照片库的权限：

```
<key>NSCameraUsageDescription</key>
<string>Enable camera access to take photos.</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>Enable photo library access to select a photo from your library.</string>
<key>NSPhotoLibraryAddUsageDescription</key>
<string>Enable photo library access to save images to your photo library directly from the app.</string> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-19T21:32:58.077

作为参考，您可以以类似的方式保存视频：

```
UISaveVideoAtPathToSavedPhotosAlbum(videoPath, nil, nil, nil); 
```

您可能想要保存视频以上传到 Instagram，例如：

```
// Save video to camera roll; we can share to Instagram from there.
-(void)didTapShareToInstagram:(id)sender { 
    UISaveVideoAtPathToSavedPhotosAlbum(self.videoPath, self, @selector(video:didFinishSavingWithError:contextInfo:), (void*)CFBridgingRetain(@{@"caption" : caption}));
}

- (void)               video: (NSString *) videoPath
    didFinishSavingWithError: (NSError *) error
                 contextInfo: (void *) contextInfoPtr {

    NSDictionary *contextInfo = CFBridgingRelease(contextInfoPtr);
    NSString *caption         = contextInfo[@"caption"];

    NSString *escapedString   = [videoPath stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLHostAllowedCharacterSet]]; // urlencodedString
    NSString *escapedCaption  = [caption stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLHostAllowedCharacterSet]]; // urlencodedString

    NSURL *instagramURL       = [NSURL URLWithString:[NSString stringWithFormat:@"instagram://library?AssetPath=%@&InstagramCaption=%@", escapedString, escapedCaption]];

    [[UIApplication sharedApplication] openURL:instagramURL];
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-06-13T15:34:31.770

## 将图像保存在 Swift 4 的照片库中

在 info.plist 中添加“隐私 - 照片库添加使用说明”

然后使用以下代码保存图像

```
UIImageWriteToSavedPhotosAlbum(imageView.image!, nil, nil, nil) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-04T06:10:30.843

**使用 asImage() 获取要保存到相机胶卷的独特内容。**

如果您使用 asImage() ，您只需几行代码就可以将各种有趣的东西保存到相机胶卷中！如果对象已经包含一些透明度，这可能非常强大。

asImage() 与 UITextView、WKWebView、UIImageView、UIButton、UISlider、UITableView 一起使用来命名一些对象（但是当您获取图像时它们可能需要可见（具有非零 alpha））。我什至用它来捕获平铺，但在我的设计中已经加载到 UIImageView 中。我怀疑 asImage() 也可能适用于更多对象类型，但我只尝试了我提到的那些。

如果它是 UITextView，并且您将背景颜色设置为 .clear，则文本将保存为透明背景。如果您的文本包含表情符号或拟我表情，您现在可以将这些图像放入相机胶卷或应用程序内部的 UIImageViews。在您的相机胶卷中拥有具有透明背景的拟我表情/表情符号，它们可以在任何各种应用程序中使用，这是非常强大的。

如果您将照片图像裁剪为圆形，或设置角半径以剪掉角，则其他对象可能具有一定的透明度。

注意在我的代码中，pointerToTextObjectSelected 是一个 UITextView

```
 var pointerToTextObjectSelected = UITextView()
// above populated elsewhere

let thisObject = pointerToTextObjectSelected.asImage()

let imageData = thisObject.pngData()

let imageToSave = UIImage(data: imageData!)

UIImageWriteToSavedPhotosAlbum(imageToSave!, nil, nil, nil)

// You will need this extension :

extension UIView {

  // Using a function since `var image` might conflict with an existing variable
  // (like on `UIImageView`)
  func asImage() -> UIImage {
    if #available(iOS 10.0, *) {
      let renderer = UIGraphicsImageRenderer(bounds: bounds)
      return renderer.image { rendererContext in
        layer.render(in: rendererContext.cgContext)
      }
    } else {
      UIGraphicsBeginImageContext(self.frame.size)
      self.layer.render(in:UIGraphicsGetCurrentContext()!)
      let image = UIGraphicsGetImageFromCurrentImageContext()
      UIGraphicsEndImageContext()
      return UIImage(cgImage: image!.cgImage!)
    }
  }
} 
```

# c++ - 在 Windows 上的 C++ 中的 for 循环中创建多个目录

> ID：11131051
> 
> 赞同：1
> 
> 时间：2012-06-21T03:14:55.797
> 
> 标签：c++, windows, string, string-formatting

我正在尝试制作一个程序，该程序将创建用户想要创建的目录总和。

这是我的代码：

```
#include <cstdlib>
#include <iostream>
#include<windows.h>

using namespace std;

int main(int argc, char *argv[])    {

    int nrDirs = 0;
    cin>> nrDirs;

    for (int i = 0; i <= nrDirs; i++) {
             CreateDirectory ("C:\\Users\\myName\\Desktop\\new", NULL);
    }
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

现在我的问题是，我不知道如何重命名目录。我知道如何在 Objective-C 中做到这一点：

```
"C:\\Users\\myName\\Desktop\\new%i", i 
```

但这在 c++ 中不起作用。:(

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:28:49.560

使用可以使用`CString::Format`：

```
dirName.Format("C:\\Users\\myName\\Desktop\\new%i", i); 
```

使用可以使用`std::stringstream`：

```
dirName << "C:\\Users\\myName\\Desktop\\new" << i; 
```

使用可以使用`sprintf`：

```
sprintf(dirName, "C:\\Users\\myName\\Desktop\\new%i", i); 
```

对于上述所有情况，`dirName`您需要将其传递给`CreateDirectory`.

如果路径中的中间目录不存在，请使用`SHCreateDirectory`. 如果路径不存在，此 API 还会在路径中创建中间目录。

# web-deployment - 总注册用户与并发用户

> ID：11131052
> 
> 赞同：1
> 
> 时间：2012-06-21T03:15:42.167
> 
> 标签：web-deployment

一般来说，是否有适当的方法、方程式或技术可以说“我的 Web 应用程序需要支持`N`总用户数，通过这个方程式/技术/rockHardExperience 告诉我我需要支持`X`并发页面请求的数量”？

从我的研究和/或直觉来看，它似乎是这样的：

`totalLoadCapabilityRequired = (totalUsersN x .10 ) * .5`

`where .10 is for roughly 10% on at any given time`

`and the whole thing multiplied by 50% to suggest a 50% chance of those total users online executing a request at roughly the same time`

任何见解都将帮助我确保在我的应用程序中实现与需求相匹配的支持。我希望有很多用户，但不想过早地过度预期。首先，我知道我正在为其编程的组织将有 45,000 名用户想要使用我的系统，并期待更多的成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:31:54.163

这里有几件事需要考虑：

1.  您预计大部分访问的时间跨度是多少？如果它是同一实体公司内的办公应用程序，则您的容量规划应基于 8 小时周期。如果大多数访问将来自同一个大陆，则您可以计划 12 小时的时间段，等等。以此为基础您的访问者分布。

2.  您预计哪些页面会最受欢迎以及这些页面的重量有多大（即您在一秒钟内可以加载多少个页面）？了解可以从缓存中受益的部分，以提高性能。

3.  不要根据峰值负载进行规划；设计您的应用程序以扩展并从小处着手。

4.  以一种可以在每 500 个请求时拍摄运行快照的方式设计您的应用程序；您可以使用诸如`xhprof`创建可以通过 cachegrind 工具运行的文件之类的工具来分析运行时的性能。

简而言之，没有包罗万象的公式:) 对于一个大概的数字，您的公式可能已经足够好，但请考虑上述几点。

# eval - 如何在 JavaScript 命令中使用变量？

> ID：11131053
> 
> 赞同：0
> 
> 时间：2012-06-21T03:15:54.623
> 
> 标签：eval, javascript

考虑一个简单的 JS 函数

```
function test(property, color) {
    var element = document.getElementById("test");
    element.style.PROPERTY = color; // I want to use a variable for this command
} 
```

在一个典型的 JS 命令中`element.style.PROPERTY`，我想将属性作为变量引入。这是一个非常基本的例子；在 JS 命令行中使用变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:16:58.973

将其用作：

```
element.style[property] 
```

> 这是一个非常基本的例子；在 JS 命令行中使用变量的最佳方法是什么？

这取决于您想要达到的目标。在这种情况下 - 只需使用`[...]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:18:14.250

`element.style[property] = color;`应该管用。

# sql - Oracle中的临时表？

> ID：11131057
> 
> 赞同：-2
> 
> 时间：2012-06-21T03:16:29.520
> 
> 标签：sql, oracle

> **可能重复：**
> [如何在 Oracle 中创建临时表](https://stackoverflow.com/questions/2671518/how-to-create-a-temporary-table-in-oracle)

我有一个 SQL 查询，它生成一个我想多次重复使用的表。在 T-SQL 中我会创建一个临时表 (#temp)，Oracle SQL 中的等价物是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:17:33.643

临时表在 oracle 中的工作方式与在 sql server 中不同。我建议阅读 oracle 文档中的相应章节。要重用表的内容，请在提交时使用“保留行”子句。

# android - 如何通过 CursorLoader 使用 ContentProvider 的 insert() 方法将值正确插入 SQLite 数据库？

> ID：11131058
> 
> 赞同：12
> 
> 时间：2012-06-21T03:16:48.760
> 
> 标签：android, android-contentprovider, android-contentresolver, android-loadermanager, android-cursorloader

我正在阅读文档，但我仍然不太确定。它说要使用`getContentResolver()`，但实际上并没有使用 CursorLoader。那么有没有办法通过`CursorLoader`呢？我知道该怎么做`query()`。步骤是否非常相似？即使只是一个准确解释这一点的链接也会有所帮助。

请注意，不要将我链接到 Google 文档，因为他们没有使用`insert()`ContentProvider 使用`CursorLoader`.

提前致谢！！

编辑：我可能应该提到我对此感到困惑的原因是因为调用了一个新的`CursorLoader`自动调用`ContentProviders` `query()`方法。但是我怎样才能为插入做同样的事情呢？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-21T04:04:59.983

查看我关于该主题的[博客文章](http://www.androiddesignpatterns.com/2012/06/content-resolvers-and-content-providers.html)：

## [内容解析器和内容提供者](http://www.androiddesignpatterns.com/2012/06/content-resolvers-and-content-providers.html)

* * *

### 与`CursorLoader`它无关。

插入是一个完全不同的概念……*它*与`CursorLoader`. 与 结合使用时`LoaderManager`，它会在收到数据存储更改的通知`CursorLoader`时自动查询您的数据库并自行更新。`ContentObserver`它与将数据插入数据库的实际过程无关。

### 如何`ContentResolver`解决对 的请求

当您通过内容提供者向数据库中插入（或查询、更新或删除）数据时，您不会直接与提供者通信。相反，您使用该`ContentResolver`对象与提供者进行通信（请注意，`ContentResolver`在您的应用程序的 global 中 是一个私有实例变量`Context`）。更具体地说，执行的步骤顺序是：

1.  你打电话`getContentResolver().insert(Uri, ContentValues);`

2.  `ContentResolver`对象决定了 Uri 的权限。

3.  将`ContentResolver`请求中继到向授权注册的内容提供者（这就是您需要在 中指定授权的原因`AndroidManifest.xml`）。

4.  内容提供者接收请求并执行指定的操作（在本例中`insert`）。插入数据的方式和位置取决于您如何实现`insert`方法（`ContentProvider`是一个抽象类，需要用户实现`insert`、`query`、`delete`、`update`和`getType`）。

希望你至少能稍微了解一下。之所以涉及这么多步骤，是因为 Android (1) 允许应用程序拥有多个内容提供者，以及 (2) 需要确保应用程序可以安全地与其他第三方应用程序共享数据。（这不是因为它想混淆你，我保证）。

### 通过插入数据`ContentProvider`

`ContentResolver`既然您（希望）对如何将这些请求中继到内容提供者有了更好的了解，那么插入数据就相当简单了：

1.  首先，确定您希望内容提供商匹配的 uri。这取决于您如何决定将 uri 与`UriMatcher`. 您拥有的每个 uri 代表将数据插入内部数据库的不同方式（即，如果您的应用程序有两个表，您可能会有两个 uri，每个表一个）。

2.  创建一个新`ContentValues`对象并使用它来打包您希望发送给内容提供者的数据。该`ContentValues`对象将列名映射到数据值。在下面的示例中，列名是“column_1”，插入到该列下的值是“value_1”：

    ```
    ContentValues values = new ContentValues();
    values.put("column_1", "value_1"); 
    ```

3.  收到后，内容提供者将（在您的情况下）将`values`对象传递给您`SQLiteDatabase`（通过`SQLiteDatabase.insert(String table, String nullColumnHack, ContentValues values)`方法）。与 不同的是`ContentProvider`，此方法是为您实现的……`SQLiteDatabase`知道如何处理`values`对象并将行插入数据库，返回插入行的行 ID，或者`-1`如果插入失败。

...这就是您将数据插入数据库的方式。

* * *

# TL;博士

利用`getContentResolver().insert(Uri, ContentValues);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T04:20:13.923

**将 Cursor 转换为 ContentValues 以便于数据库插入。**

> 它说使用 getContentResolver()，但实际上并没有使用 CursorLoader

除了亚历克斯所说的之外，没有什么可以阻止您遍历`Cursor`返回的内容，将它们放入`ContentValue`s 中，然后将其插入（例如，插入不同的数据库）。

只是我脑海中的一个例子（简单`Cursor`的两`String`列）：

```
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    if (cursor.moveToFirst()) {
        ArrayList<ContentValues> values = new ArrayList<ContentValues>();
        do {
            ContentValues row = new ContentValues();
            DatabaseUtils.cursorStringToContentValues(cursor, fieldFirstName, row);
            DatabaseUtils.cursorStringToContentValues(cursor, fieldLastName, row);
            values.add(row);
        } while (cursor.moveToNext());
        ContentValues[] cv = new ContentValues[values.size()];
        values.toArray(cv);
        getContentResolver().bulkInsert(CONTENT_NAMES, cv);
    }
} 
```

可能有更有效的方法来做到这一点（当然还有一些完整性检查），但这是我的第一个想法......

# c# - 如何访问同一命名空间中的静态类但另一个程序集？

> ID：11131062
> 
> 赞同：5
> 
> 时间：2012-06-21T03:17:04.703
> 
> 标签：c#, wpf, namespaces

我正在使用 C# 中的 WPF 应用程序。我在静态类中定义了许多常量，如下所示：

项目1：

```
namespace MyCompany
{
   public static class Constants
   {
      public static int MY_CONSTANT = 123456;
   }
} 
```

然后我需要做的就是在项目 1 中的任何地方访问我的常量：

```
int x = Constants.MY_CONSTANT; 
```

现在我将另一个项目添加到同一个解决方案中，并使用相同的根命名空间：

项目 2

```
namespace MyCompany.MyControl
{
   class VideoControl
   {
      int x;
      x = Constants.MY_CONSTANT; //<-- doesn't work
      x = MyCompany.Constants.MY_CONSTANT; //<-- doesn't work either
   }
} 
```

我只是想不出一种从第二个程序集中访问我的静态常量类的方法。我也无法添加对第一个程序集的引用，因为它会导致循环依赖（第二个项目程序集是第一个项目程序集使用的 WPF 控件）。

我想要做的甚至可能吗？目前我的解决方法是在构造函数中传递所有必需的常量，但我宁愿直接访问它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:33:00.223

您可以将所有静态常量从项目 1 移动到项目 2，因此，所有常量对项目 1 和项目 2 都是可见的；我建议引入另一个项目（可能是常见的），它可以帮助管理所有其他项目共享的所有东西。这是一个常见的基础设施项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:31:13.277

另一个答案很接近，但实际上正好相反：项目 2 需要对项目 1 的引用。然后应该编译代码。

编辑：

对不起，我看到你已经考虑过了。是的，有人评论说通过引入第三个程序集来避免循环依赖问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T03:18:46.043

您必须将项目 1 中的引用添加到项目 2，然后它应该可以正常工作。你需要一个图形来说明如何？

这是一个 MSDN 链接[http://msdn.microsoft.com/en-us/library/wkze6zky.aspx](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)

这是一个带有图片的 SO 答案>[在 Visual Studio 2010 中将项目添加到项目中](https://stackoverflow.com/questions/6237580/adding-projects-to-a-project-in-visual-studio-2010)

# windows-phone-7 - 为什么我无法读取图像？

> ID：11131064
> 
> 赞同：0
> 
> 时间：2012-06-21T03:17:12.697
> 
> 标签：windows-phone-7

我将一张 png 照片放入我的项目中，并将照片的构建操作设置为内容。然后我想看这张照片，所以我写

```
System.Uri a = new System.Uri("/Images/photo.png");
BitmapImage b = new BitmapImage();
b.UriSource = a; 
```

但是 b 是空的！为什么？非常感谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:49:54.990

它的工作！我编辑我的代码

```
StreamResourceInfo resourceInfo = Application.GetResourceStream(new System.Uri("Images/photo.png", UriKind.Relative));
BitmapImage noPhoto = new BitmapImage();
noPhoto.SetSource(resourceInfo.Stream); 
```

# c# - 从动态单选按钮列表中检索值

> ID：11131066
> 
> 赞同：0
> 
> 时间：2012-06-21T03:17:15.353
> 
> 标签：c#, asp.net, radiobuttonlist

我有一个有 3 列的表。在第 3 列中有一个单选按钮列表，用户使用它来评估第 1 列和第 2 列的相似性。该表有 60 多行并且是动态创建的。所有这些都像一个魅力。但是：提交后如何读取单选按钮列表（或者更确切地说是用户选择的值）？我尝试了以下方法，但这不起作用（当然，所有这些都是一种形式）：

```
eval1 = new RadioButtonList();
eval1.Items.Add(new ListItem("Agree","1"));
eval1.Items.Add(new ListItem("Somewhat Agree","2"));
eval1.Items.Add(new ListItem("Disagree","3"));
eval1.Attributes.Add("runat", "server");
this.Session["eval1"] = eval1; 
```

当我提交这个时，会话变量包含单选按钮列表，但没有选择任何值。

我尝试将 AutoPostBack 设置为 true，这将行为更改为我需要的行为。但是我不想每次用户选择一个选项时都重新加载页面。这将意味着 60 多次重新加载...

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:07:44.773

这段代码放在哪里？也许你应该把它放在 if (!IsPostBack ) {} 中试试。例如

```
if(!IsPostBack)
{
      eval1 = new RadioButtonList();
      eval1.Items.Add(new ListItem("Agree","1"));
      eval1.Items.Add(new ListItem("Somewhat Agree","2"));
      eval1.Items.Add(new ListItem("Disagree","3"));
      eval1.Attributes.Add("runat", "server");
      this.Session["eval1"] = eval1;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:20:41.747

代替：

this.Session["eval1"] = eval1;

使用字符串数组来存储会话中的值。

# python - 使用 urllib2 和 cookielib 在两个开启者之间共享 cookie

> ID：11131067
> 
> 赞同：1
> 
> 时间：2012-06-21T03:17:25.233
> 
> 标签：python, cookies, proxy, urllib2

我正在创建一个脚本，它需要我使用代理并需要使用 cookie。

该脚本将访问 HTTP 和 HTTPS 页面，这意味着我需要两个 URL 打开器。

但是，我希望两个开启者的 cookie 彼此共享，我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:10:12.380

你真的需要2个开瓶器吗？制作一个并包含 http 和 https 的处理程序和代理以及 1 个 cookie jar。我使用 1 个开瓶器来满足我的所有需求都没有问题。

```
cj = cookielib.CookieJar()
opener = build_opener(
             HTTPHandler(), HTTPSHandler(), HTTPCookieProcessor(cj), 
             ProxyHandler({'http': 'http://user:passwd@proxy.example.com:80'}),
             ProxyHandler({'https': 'http://user:passwd@proxy.example.com:80'})) 
```

对于 2 个开瓶器，制作 1 个饼干罐并在他们之间分享。

```
cj = cookielib.CookieJar()
HTTPOpener = build_opener(
             HTTPHandler(), HTTPCookieProcessor(cj), 
             ProxyHandler({'http': 'http://user:passwd@proxy.example.com:80'}))
HTTPSOpener = build_opener(
             HTTPSHandler(), HTTPCookieProcessor(cj), 
             ProxyHandler({'https': 'http://user:passrd@proxy.example.com:80'})) 
```

# javascript - 如何在 IOS 中更新 App 文件（html）？

> ID：11131072
> 
> 赞同：3
> 
> 时间：2012-06-21T03:18:33.267
> 
> 标签：javascript, objective-c, ios, html

我的应用程序非常简单。我有一些带有 html 文件名的 plist。当用户选择一行时，webview 会加载该 html 文件及其内容。我很好奇如何处理应用程序更新？例如：我有一个新的更新的 html 文件，其中包含更正，我希望用户通过单击应用程序中的按钮来下载该文件。我希望将旧文件（html）替换为新文件。有没有办法做到这一点？不太确定从哪里开始，希望有人能指出我正确的方向。我假设，没有办法更新 plist，我必须从 plist 切换到数据库，但问题仍然存在，如何让应用程序下载新文件并替换旧文件？

谢谢

只是为了详细说明一下。

我想我试图找出在我的应用程序中完成更新的正确方法。我的 html 文件在应用程序中，我假设我可能让应用程序最初连接到互联网并下载最新的内容文件（html、plist），将它们放入文档文件夹，然后更新我的主屏幕 plist 文件？这是正确的思路吗？

我不希望该应用程序仅适用于互联网，需要这些 html 文件可以离线使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:28:11.937

The answer is exactly what you described.

My most common train is to check for the existence in documents, add them from the bundle if they are not there.

use them, and download new ones in the background. (if the internet is available). replace the old ones with the new ones in the event a successful download happens.

And set a timeout of some type so you dont download a new one every second.

I like a day for my timeout.

and implement a way to check the version with the server. (MD5 Hash and filesize is a good not to mention small comparison)

Good luck

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:13:54.253

正如许多人建议的那样，我想我的计划是从网上下载内容，将其保存在库文件夹中，然后从那里加载内容。在应用程序中，我将有一个更新按钮，只要用户选择，它就会连接到服务器并更新内容。在 apple.com 找到示例代码（[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)）

会稍微调整一下，它应该可以正常工作，如果尝试下载多个文件，这也可能会有所帮助。[在 iphone 应用程序中下载多个文件（目标 c）](https://stackoverflow.com/questions/1016040/downloading-multiple-files-in-iphone-appobjective-c)

```
- (IBAction)down
{
    // Create the request.
    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://abc.com/missing.html"]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];
    // create the connection with the request
    // and start loading the data
    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    NSString *msg;
    if (theConnection) {
        // Create the NSMutableData to hold the received data.
        // receivedData is an instance variable declared elsewhere.
        receivedData = [[NSMutableData data] retain];

    } else {
        // Inform the user that the connection failed.

    }

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // This method is called when the server has determined that it
    // has enough information to create the NSURLResponse.

    // It can be called multiple times, for example in the case of a
    // redirect, so each time we reset the data.

    // receivedData is an instance variable declared elsewhere.
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    //You can also use the connection:didReceiveData: method to provide an indication of the connection’s progress to the user.
    // receivedData is an instance variable declared elsewhere.

    NSString *msg = [NSString stringWithFormat:@"data %@",data,nil ];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"-download-" 
                                                    message:msg
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
   //NSLog ([[NSString alloc] initWithFormat:@"The value: %d  object: %@\n", alphArray.count, [alphArray objectAtIndex:1.1],nil]);

    NSString *string = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    NSLog(@"the data %@",string);

    NSString *libraryPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [libraryPath stringByAppendingPathComponent:@"Missing.html"];

    NSLog(@"Full path: %@", filePath);

    //NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    //write data to files
    [data writeToFile:filePath atomically:YES];

    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
    // release the connection, and the data object
    [connection release];
    // receivedData is declared as a method instance elsewhere
    [receivedData release];

    // inform the user
    NSLog(@"Connection failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // do something with the data
    // receivedData is declared as a method instance elsewhere
    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

    // release the connection, and the data object
    [connection release];
    [receivedData release];
}

-(NSCachedURLResponse *)connection:(NSURLConnection *)connection
                 willCacheResponse:(NSCachedURLResponse *)cachedResponse
{
    NSCachedURLResponse *newCachedResponse = cachedResponse;

    if ([[[[cachedResponse response] URL] scheme] isEqual:@"https"]) {
        newCachedResponse = nil;
    } else {
        NSDictionary *newUserInfo;
        newUserInfo = [NSDictionary dictionaryWithObject:[NSDate date]
                                                  forKey:@"Cached Date"];
        newCachedResponse = [[[NSCachedURLResponse alloc]
                              initWithResponse:[cachedResponse response]
                              data:[cachedResponse data]
                              userInfo:newUserInfo
                              storagePolicy:[cachedResponse storagePolicy]]
                             autorelease];
         NSLog(@"Succeeded! Receive use:%@",newUserInfo);
    }
    NSLog(@"Succeeded! Received %@ - use:%@",newCachedResponse);
    return newCachedResponse;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T03:36:57.063

如果你能得到新的html文件名，你可以直接写到你的plist文件中。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
    NSUserDomainMask, YES);
NSString *docPath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"settings.plist"];
NSMutableDictionary* newValueDict=[[NSMutableDictionary alloc]initWithContentsOfFile:docPath];
[newValueDict setObject:newHtmlPageValue forKey:@"myHtmlPage"];
[newValueDict writeToFile:docPath atomically:NO];
[newValueDict release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T03:27:43.213

您可以将 HTML 文件存储在外部服务器上。并更改您的应用程序以从您的外部服务器而不是从您的应用程序包加载 HTML 文件。因此，如果您需要更新任何 HTML 文件的内容，您可以在您的服务器上进行。

# php - 我怎样才能内爆多维数组

> ID：11131075
> 
> 赞同：0
> 
> 时间：2012-06-21T03:18:49.630
> 
> 标签：php

我正在从数据库中检索保存多维数组的数组值..我想添加

***|***

在数组的两个成员值之间..我尝试了基本的内爆函数，最后提到了我尝试了什么..

我在下面提到了循环

```
$sql = "SELECT `categories` FROM `jos_js_res_record` WHERE `categories` LIKE '%Autumn Market Session%' OR `categories` LIKE '%Farmer Market Profiles%' OR `categories` LIKE '%Spring Market Session%' OR `categories` LIKE '%Summer Market Session%' OR `categories` LIKE '%Winter Market Session%' ORDER BY `user_id`";

$db->setQuery( $sql );

$unserial = $db->loadObjectList();

foreach ($unserial as $dataElement) {
  $categories = unserialize($dataElement->categories);

if (is_array($categories)) {

foreach ($categories as $unserKey => $unserailData) { 

print $unserailData;
    }

}

echo '<br />';

} 
```

**我已经在每个循环的第二行尝试了下面的代码行，但显示错误**

```
$comma_separated = implode(",", $unserailData); 
```

请指导我如何将第二个数组**$unserailData**中的值内爆？

**$unserailData 中的数据如下所示**

> 夏季市场会议
> 
> 夏季市场会议
> 
> 夏季市场会议秋季市场会议
> 
> 夏季市场会议秋季市场会议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:57:43.103

如果我正确阅读了您的请求，则以下内容应该有效：

```
$sql = "SELECT `categories` FROM `jos_js_res_record` WHERE `categories` LIKE '%Autumn Market Session%' OR `categories` LIKE '%Farmer Market Profiles%' OR `categories` LIKE '%Spring Market Session%' OR `categories` LIKE '%Summer Market Session%' OR `categories` LIKE '%Winter Market Session%' ORDER BY `user_id`"; 

$db->setQuery( $sql ); 

$unserial = $db->loadObjectList(); 

foreach ($unserial as $dataElement) { 
    $categories = unserialize($dataElement->categories); 
    if (is_array($categories)) {
         echo implode('|', $categories);
    } elseif (is_string($categories)) {
         echo $categories;
    }  
    echo '<br />'; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:39:02.773

我做了下面的技巧，但@Robbie 提到的代码更干净，所以我用他的代码替换了我的代码。

**我做了这个把戏**

```
foreach ($unserial as $dataElement) {
  $categories = unserialize($dataElement->categories);
if (is_array($categories))
{ 
foreach ($categories as $unserKey => $unserailData) {
$arr2[] = $unserailData;
}
$imploded = implode(" | ", $arr2);
print_r($imploded);
$arr2 = array();
}

else{
echo "Category not stored correctly";
}
echo '<br />';
} 
```

# ruby-on-rails - 如何使用 has_many 避免批量分配错误：通过关系

> ID：11131080
> 
> 赞同：0
> 
> 时间：2012-06-21T03:19:42.703
> 
> 标签：ruby-on-rails, activerecord, nested-attributes, mass-assignment

我正在尝试对嵌套模型进行 update_attributes 并不断遇到质量分配错误。这是我的模型：

```
class Lineup < ActiveRecord::Base

  belongs_to :user
  has_many :piece_lineups
  has_many :pieces, through: :piece_lineups

  accepts_nested_attributes_for :piece_lineups

end

class Piece < ActiveRecord::Base
  attr_accessible :cost, :description, :name, :category

  has_many :piece_lineups
  has_many :lineups, through: :piece_lineups

end

class PieceLineup < ActiveRecord::Base
  attr_accessible :piece

  belongs_to :piece
  belongs_to :lineup

end 
```

顺便说一句，用户 has_one 阵容。所以我认为通过将 Accepts_nested_attributes_for 添加到阵容模型中它会起作用，但事实并非如此。这是我的表格：

```
 - @lineup.piece_lineups.build(:piece => piece)
  = form_for(@lineup) do |f|
    = f.fields_for :piece_lineups do |piece_lineup|
      = piece_lineup.hidden_field(:piece_id, :value => piece.id)
    = f.submit 
```

和我的阵容控制器动作：

```
 def update
    @lineup = current_user.lineup
    @lineup.update_attributes(params[:lineup]) 
```

最后，错误：

无法批量分配受保护的属性：piece_lineups_attributes

我在这里想念什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T04:09:43.470

`accepts_nested_attributes_for`创建一个属性编写器——在你的情况下`piece_lineups_attributes=`——用于将属性传递给另一个模型。因此，您需要添加`attr_accessible :piece_lineups_attributes`到您的阵容模型以使其可批量分配。

**更新**

有更好的方法来解决这个问题。

如果您添加`attr_accessible :piece_ids`到您的阵容模型，然后将您的视图更改为

```
= form_for(@lineup) do |f|
  = f.hidden_field(:piece_ids, :value => piece.id)
  = f.submit 
```

您根本不需要嵌套属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T03:34:49.343

批量分配通常意味着将属性传递到创建对象的调用中，作为属性散列的一部分。因此，将`piece_lineup`'s 字段添加到`attr_accessors`该模型的列表中，或者试试这个：

```
@lineup = current_user.lineup
@lineup.piece_id = params[:piece_id]
@lineup.save 
```

另见：

> [http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

# java - 为什么说 Java 的 String 内存使用率很高？

> ID：11131081
> 
> 赞同：14
> 
> 时间：2012-06-21T03:20:03.997
> 
> 标签：java, string, memory

在这篇[博](http://www.javamex.com/tutorials/memory/string_memory_usage.shtml)文中，据说 String 的最小内存使用量是：

`8 * (int) ((((no chars) * 2) + 45) / 8)`字节。

因此，对于字符串“Apple Computers”，最小内存使用量为 72 字节。
即使我有 10,000 个两倍长度的 String 对象，内存使用量也将小于 2Mb，这根本不算多。那么这是否意味着我低估了企业应用程序中存在的字符串数量，或者那个公式是错误的？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T03:22:40.733

Java 中的字符串存储取决于字符串的获取方式。支持`char`数组可以在多个实例之间共享。如果不是这种情况，您将拥有通常的对象开销以及一个指针和三个`int`s 的存储空间，这通常会产生 16 个字节的开销。然后后备数组每个需要 2 个字节，`char`因为`char`s 是 UTF-16 代码单元。

对于`"Apple Computers"`不共享后备阵列的情况，最小成本将是

1.  16 个字符的后备数组——32B，在字边界上很好地对齐。
2.  指向数组的指针 - 4 或 8B，具体取决于平台
3.  `int`偏移量、长度和记忆哈希码的三个s - 12B
4.  2 x 对象开销 - 取决于 VM，但[8B](https://stackoverflow.com/a/258150/20394)是一个很好的经验法则。
5.  一个`int`用于数组长度。

所以大约 72B，其中实际有效载荷占 44.4%。对于更长的字符串，有效负载构成更多。

* * *

在 Java7 中，一些 JDK 实现[取消了支持数组共享](http://java-performance.info/changes-to-string-java-1-7-0_06/)，以避免将大`char`的 [] 固定在内存中。这使他们可以取消三个`int`s 中的两个。

这会将长度为 16 的字符串的计算更改为 64B，其中实际有效负载占 50%。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T03:25:10.173

是否可以使用比 Java 字符串更少的内存来保存字符数据？是的。

这对“企业”应用程序（甚至是 Android 或 J2ME 应用程序，它们必须使用更少的内存）有影响吗？几乎从不。

过早的优化是根本...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T03:22:28.687

与您拥有的其他数据类型相比，它肯定很高。其他原语使用 32 位、64 位等。

鉴于它`String`是不可变的，每次对它执行任何操作时，最终都会创建一个新`String`对象，从而消耗更多内存。

# objective-c - 将 NSString 转换为 NSDate 时遇到问题

> ID：11131085
> 
> 赞同：0
> 
> 时间：2012-06-21T03:20:47.943
> 
> 标签：objective-c, nsdate, nsdateformatter

我查看了其他示例，但仍然无法将此字符串转换为日期。运行此代码后，我从 NSLogs 获得以下输出：

预测转换：2012-07-01 00:00:00 +0000

时间戳转换：2012-06-24 00:00:00 +0000

预测：604800.000000

这不是我使用的硬编码日期。有谁知道为什么？代码如下：

```
NSString *timeStamp = @"20120620 19:23";//[[predictionData objectAtIndex:0 ] valueForKey:@"tmstmp"];
    NSString *predictionTime = @"20120620 19:30";// [[predictionData objectAtIndex:0 ] valueForKey:@"prdtm"];

    NSDateFormatter *ts = [[NSDateFormatter alloc] init];
    [ts setDateFormat:@"yyyyMMdd HH:dd"];
    NSDate *convertedTS = [ts dateFromString:timeStamp];

    NSDateFormatter *pt = [[NSDateFormatter alloc] init];
    [pt setDateFormat:@"yyyyMMdd HH:dd"];
    NSDate *convertedPT = [pt dateFromString:predictionTime];

    NSTimeInterval timeDifference = [convertedPT timeIntervalSinceDate:convertedTS];

    NSLog(@"Prediction Conversion: %@", [convertedPT description]);
    NSLog(@"Timestamp Conversion: %@", [convertedTS description]);

    NSLog(@"Prediction: %f", timeDifference); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:25:00.877

您的格式化程序字符串不正确。

```
HH:dd 
```

应该

```
HH:mm 
```

此外，您需要考虑时区。如果没有`+XXXX`指定，默认使用 UTC。设置时区：

```
[ts setTimeZone:[NSTimeZone /*timezone*/]]; 
```

其中`/*timezone*/`由[`NSTimeZone`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimeZone_Class/Reference/Reference.html)类指定。使用时区（以及许多不同的时区）的方式有很多种，因此请选择最适合您的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:24:34.963

您正在使用 dd 而不是 mm。这个：

```
[ts setDateFormat:@"yyyyMMdd HH:dd"]; 
```

应该是这样的：

```
[ts setDateFormat:@"yyyyMMdd HH:mm"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T03:25:14.353

您需要设置语言环境，将其设置为`en_us_POSIX`.

```
ts.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_us_POSIX"]; 
```

还有，应该是`HH:mm`，不是`dd`

# c# - 如何使 jquery Autocomplete 为类库和 SharePoint 工作

> ID：11131090
> 
> 赞同：0
> 
> 时间：2012-06-21T03:21:57.787
> 
> 标签：c#, ajax, jquery-ui, sharepoint, dll

对于我们的一个 SharePoint 2007 网站上的某些页面，我们在代码后面有自定义代码（在 GAC 中部署为 DLL）。

让 jquery UI 自动完成插件在 ASP.NET 应用程序上工作是一件轻而易举的事，但我很难为 SharePoint 页面重新创建类似的功能。数据驻留在 SQL Server 表中。

我是否需要为 ASP.NET 2.0 AJAX Extensions 1.0 配置 web.config，即使代码没有使用其中任何一个？

欢迎任何帮助/指针。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:49:19.803

你只需要在你的应用程序中打印出自动完成所需的数据。

不知道你是怎么把你的代码准确集成到SP里面的，有没有能力使用

```
Response.Write("whatever"); 
Response.End(); 
```

在您页面的某个阶段（例如 PageLoad）并且只获得“任何”作为输出，没有围绕它的主模板？

然后您可以检查传入的请求变量并打印自动完成所需的数据：

```
if(Request["printautocomplete"]=="true"){
    Response.Write("my autocomplete data as string"); 
    Response.End(); 
} 
```

# javascript - 使用 JSP 跟踪 Javascript 中的重复元素

> ID：11131095
> 
> 赞同：1
> 
> 时间：2012-06-21T03:23:23.790
> 
> 标签：javascript, html, jsp, dom

这个问题与我的另一个[问题](https://stackoverflow.com/questions/11117519/inserting-a-clone-after-the-original)有关。多亏了一些帮助，我现在可以在单击 addButton 时显示重复的元素。

我想跟踪复制了多少元素。这也将有助于为重复元素分配不同的 id。

这是我的代码示例：

```
<html>

<head>
<%! int n = 1; %>
<script type="text/javascript">

function onClickAdd() {

    var tableRow = document.getElementById("tableRow");
    var tableRowClone = tableRow.cloneNode(true);
    tableRowClone.id = 'tableRow'+<%=n%>;
    tableRow.parentNode.insertBefore(tableRowClone, tableRow.nextSibling);
}

</script>
</head>
<body>    
    <table>
        <tr id="tableRow">
            <td>
                  <fieldset>
                    <legend> This is box number <%=n++%> </legend>
                    <table>
                      <tr> 
                      </tr>
                    </table>
                  </fieldset>
            </td>
        </tr>

        <tr>
            <td>
                <input type="button" name="addButton" value="Add" onClick="Javascript:onClickAdd()">
            </td>
        </tr>
    </table>

</body>

</html> 
```

如果您阅读我的其他问题，您会发现代码示例类似。现在，我想通过增加一个 JSP 整数来打印不同的图例，`n`.

到目前为止，所有重复项都在图例中显示“这是 1 号框”。似乎`n`不会增加到3。

我想表明`n`增加将 id 分配给重复项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:35:22.140

*JSP 在服务器端*生成 HTML，而 Javascript 在*客户端*运行。意思是，当 Javascript 运行时，页面已经使用`n`（`1`在创建时）的值呈现。由于 JSP 不再运行，因此值`n`保持不变`1`。

解决方案：在客户端（JS）上运行所有东西，包括计数器。

# java - 请向我解释“这个”

> ID：11131096
> 
> 赞同：4
> 
> 时间：2012-06-21T03:23:26.020
> 
> 标签：java, android, this

我已经阅读了数百个关于 java 中“this”的解释，但我真的很难理解它。我正在同时学习 android 和 java，我知道这样会更难，但我很享受。我被杀死的一件事是“这个”......我正在粘贴下面的教程中的代码，该教程曾经使用过“这个”。我打算只放一段代码，但希望尽可能提供帮助。

我正在寻找可以添加到我的笔记中的“这个”的一个很好的解释。任何和所有的帮助表示赞赏。提前致谢。

示例代码从下面开始：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;
import android.view.View;
import android.content.DialogInterface;
import android.app.Dialog;
import android.app.AlertDialog;

public class DialogActivity extends Activity {
    CharSequence[] items = { "Google", "Apple", "Microsoft" };
    boolean[] itemsChecked = new boolean [items.length];

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onClick(View v) {
        showDialog(0);
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case 0:
            return new AlertDialog.Builder(this)
            .setIcon(R.drawable.ic_launcher)
            .setTitle("This is a dialog with some simple text...")

            .setPositiveButton("OK",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton)
                    {
                        Toast.makeText(getBaseContext(),
                                "OK Clicked!", Toast.LENGTH_SHORT).show();
                    }
                }
            )
            .setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton)
                    {
                        Toast.makeText(getBaseContext(),
                                "Cancel clicked!", Toast.LENGTH_SHORT).show();
                    }
                }
            )
            .setMultiChoiceItems(items, itemsChecked,
                    new DialogInterface.OnMultiChoiceClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which, boolean isChecked) {
                                    Toast.makeText(getBaseContext(),
                                        items[which] + (isChecked ? " checked!":" unchecked!"),
                                        Toast.LENGTH_SHORT).show();
                    }
                }
            ).create();
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T03:25:15.413

`this`指当前`Object`的参考。

[阅读此内容以获得更多理解](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)。

从链接中举一个例子：

```
public class Point {
    public int x = 0;
    public int y = 0;

    //constructor
    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }
} 
```

在这里，为了区分参数`x`的`Point`和`x`，您需要告诉编译器区别。您可以使用`this`. 意思是，当我写的时候，`this.x`它的意思是，特定的`x`属于当前`Object`的，在这种情况下是`Point`。

以您提供的代码为例：

```
AlertDialog.Builder(this) 
```

[AlertDialog.Builder()](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#AlertDialog.Builder%28android.content.Context%29)将 a`Context`作为其构造函数中的参数。但是在这里，您不这样做`Context someContext = new Context();`并将其作为参数传递，因为您只需要传递您的 current `Activity`'s `Context`。所以你只需使用`this`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T03:29:42.387

把它想象`this`成“它自己”。如果您传递`this`给一个方法，那么您只是将对象的一个​​实例传递给该方法。

ie:`Student`是一个对象，就像`Classroom`. 如果我想在 中添加一个`Student`，`Classroom`我可能会告诉`Student`将***自己***添加到教室（教室找不到学生，可以吗？）。所以，我会说`student.addToClassroom(new Classroom(), this);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T03:48:55.230

就像其他人所说的那样，关键字`this`只是对当前对象的引用。这通常是隐含的，例如，如果您有这样的类：

```
class ThisExample{
    int x;
    public ThisExample(int x){
        this.x = x;
        someMethod();
        this.someMethod();
    }

    void someMethod()
    {
    ...
    }
} 
```

使用`this.x = x`有助于区分类拥有的成员变量和传递给构造函数的变量。此外，调用`this.someMethod()`and`someMethod()`做同样的事情，因为`this`隐含了。

在 Android 中，有时您会看到一个带有 this 的方法，例如`someMethod(this)`. 这里发生的`this`是指的是当前的 Activity `Context`，这只是一堆解释有关 Activity 的一切的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T03:49:50.743

好的，我会看看我怎么走：P

将 Java 对象（类）视为一个单独的实体，它具有定义它是什么的`properties`某些事物（）和它可以做的某些事物（`methods`）

例如，取一个（非常抽象的）类，名为`Machine`

```
class Machine {
    Piston piston1;
    ArrayList<Gear> gears;

    public void addSomeNewGears(ArrayList<Gear> gears)
    {
        for(int i = 0; i < gears.size(); i++)
        {
            this.gears.Add(gears[i]);
        }    
    }
} 
```

在方法`addSomeNewGears`中，我们实际上可以访问两个名为 gears 的列表：

*   机器对象的当前齿轮，
*   我们要添加的新的。

因为它们都被调用`gears`，所以对于我们想要访问哪一个可能是模棱两可的，但是新的 List 将具有优先权，因为它是在方法中本地声明的。

要访问机器的齿轮，我们需要使用`this`关键字，它告诉编译器我们正在寻找`class`' 齿轮，而不是`method`'s

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T03:28:44.600

类的实例方法（那些未声明`static`的）只能通过引用该类的某个实例来执行。例如：

```
class Foo {
    public void doSomething() {
        // "this" refers to the current object
        . . .
    }
    . . .
}

// then later:
Foo aFoo = new Foo();
aFoo.doSomething(); // "this" will be equal to "aFoo" for this call

// The following is illegal:
doSomething();

// so is this:
Foo.doSomething(); 
```

在 method 内部`doSomething()`，变量`this`指的`Foo`是用于调用该方法的特定实例（在此示例中，由 引用的当前对象`aFoo`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T03:40:28.140

这就是当前对象的引用。这对于识别成员属于当前类非常有用。例如，类样本{ int a; 样本（int a）{ this.a=a; } } "this" 将区分当前类变量和其他变量

# php - 新的 Mongo 连接导致服务器错误

> ID：11131098
> 
> 赞同：0
> 
> 时间：2012-06-21T03:23:44.600
> 
> 标签：php, mongodb, nginx

在我的 CodeIgniter 应用程序（全新安装）中，以下代码行导致页面显示“服务器错误”

**控制器：**

```
public function index()
{
  $m = new Mongo();
  echo 'Success';
} 
```

如果我注释掉该`new Mongo()`行，一切正常。我已确保 Mongo 进程正在服务器上运行。

我什至尝试将它包装在 中`try/catch`，但我仍然收到服务器错误。

我究竟做错了什么？

# content-management-system - 小型网站的最佳替代 Drupal

> ID：11131099
> 
> 赞同：1
> 
> 时间：2012-06-21T03:24:05.290
> 
> 标签：content-management-system, wysiwyg

我最近开始学习 drupal 集成，因为我想学习如何创建网站，我将这些网站提供给没有 html 经验的人，他们希望能够更新他们的网站。通过我的研究，我了解到 Drupal 是最受支持的 CMS。它确实有很多不错的功能并完成了这项工作，但它几乎有太多我想要的功能。

我假设有某种开源软件

我是一个有抱负的网络开发人员，试图建立我的投资组合/获得经验。我一直在尝试做的是为我可能会失去完全联系的客户建立网站——所以当他们的营业时间发生变化并且他们没有 HTML 经验时，我会收到有关更新他们网站的电子邮件。

我认为有三种方法：（告诉我是否还有更多）

1.  我编写了一个允许他们编辑网站的 php 应用程序
2.  我使用 CMS (Drupal) 让他们编辑他们的网站
3.  我编写了嵌入格式为 {white-space: pre;} 的文本文件的脚本

到目前为止，我已经在 3 个不同的站点上实现了每种方法，它们都有缺点。我更喜欢开源替代方案，而不是编写自己的应用程序以提高稳定性/安全性。Drupal 似乎更倾向于允许多个用户*添加*内容，而我只希望一个用户*更新现有*内容。第三个选项适用于计算机知识的客户端，但是任何可以导航到他们的服务器以更改文件的人都可能知道如何在没有任何这些方法的情况下更新站点。

总结一下我的问题，谁能告诉我我正在寻找的术语？内容管理系统是指内容帖子数量不断增加的站点的站点框架（如果我错了，请纠正我）。用于编辑具有预定义但可编辑页面的站点的站点框架的术语是什么？如果你能告诉我，那么我至少可以自己研究这个问题。否则，如果您有任何建议或解决方案，我们将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:37:28.937

我会推荐你​​试试[MODX](http://www.modx.com/)。它为您运行 php 或 html 代码提供了很大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:02:21.140

user1470887，你问了一个很好的问题。不幸的是，答案是太多现有的 CMS 产品忽略了这个用例。据我所知，它没有确切的名称。

术语“就地编辑”描述了这种情况的一个版本（用户单击网页上的文本，文本块变成表单，用户编辑内容并按下提交按钮，新文本被发送到网络服务器并保存，表单变得正常再次发短信）。但我猜你会对任何让他们编辑现有但不能创建新的东西感到满意。

我也猜想你不想构建自己的 Drupal 模块或委托一个。

我不太了解 Drupal，不知道是否有满足您需求的 Drupal 模块。不过，我建议您仔细搜索，特别是如果您已经对 Drupal 有点熟悉的话。（是的，Drupal 有时看起来像是太多的 CMS。）

但是......如果您找不到 Drupal 解决方案或想要替代 Drupal，MODX Revolution 确实有一个答案：设置它，然后安装 Bob Ray 的 NewsPublisher 附加组件。它将在用户有权编辑的页面上放置一个“编辑”按钮，但不会在他们没有编辑权限的页面上放置一个“编辑”按钮。（当然，用户只能编辑标题、正文内容等——而不是整个页面。）

Bob Ray 写了一本关于 MODX 的书（MODX：官方指南）。去年，我成功地使 NewsPublisher 适应了一个类似于您所描述的项目，预定义的页面用户只需要随着时间的推移进行编辑。最新的 NewsPublisher 版本，未经我测试，据说进一步改进，现在可以更容易地使用 CSS 设置样式。这应该允许您为您的用户提供定制且一致的界面。

正如 andmag 还指出的，MODX 是一个非常灵活的系统，适用于专注于表示层的 Web 开发人员。它有最好的模板系统。

# mysql - 是否有任何服务可以监控我的网站，如果网站关闭，重启我的 ec2 实例？

> ID：11131100
> 
> 赞同：0
> 
> 时间：2012-06-21T03:24:18.860
> 
> 标签：mysql, wordpress, apache, amazon-ec2, monitoring

我在 EC2 上有一个微型实例，我在上面部署了一个 wordpress 网站。但是该站点大约每两天就会关闭一次，因为 mysql 被杀死，因此访问者会收到“500 Internal Server Error”。我需要登录 AWS，然后重新启动实例。我知道我应该优化 apache 配置，但重启实例将是一个简单的解决方案。我正在使用可以监控我的网站的服务，当网站关闭时，他们会向我发送一封电子邮件，但他们无法重新启动 EC2 实例。

我像下面这样配置apache，它现在可以工作了：

```
StartServers       1
MinSpareServers    1
MaxSpareServers    5
MaxClients        10
MaxRequestsPerChild  4000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:28:29.027

如果您正在寻找任何开源工具的解决方案，您可以随时尝试 Nagios。哪个会监视和重新启动失败的服务，但需要进行一些配置工作。可以参考[Nagios 站点](http://www.nagios.org/) [Nagios 配置](http://bobcares.com/blog/?p=67)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:44:49.130

也许您可以创建一个 bash，并将其放在 /etc/cron.hourly 中以每小时运行一次。

这是bash的内容。

```
#!/bin/bash
#Replace MYSQL_PORT with the real port number.
netstat -na | grep LISTEN | grep MYSQL_PORT
if [ $? != 0 ]; then
  reboot
fi 
```

不要忘记让它像下面一样可执行。

```
chmod 0755 /etc/cron.hourly/monitor_mysql.sh 
```

此外，您可以通过在 /etc/cron.d/ 中创建一个文件来使其更频繁地检查，如下所示每 5 分钟检查一次。

```
# vi /etc/cron.d/monitor_mysql
*/5 * * * *     root /path/to/monitor_mysql.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:58:21.810

如果您需要每隔几天重新启动一次，就会出现问题。我不认为这是您的 Apache 配置，但许多其他事情可能是错误的。

您可以使用重新启动脚本，但您还应该监控您的正常运行时间（使用类似[www.downnotifier.com](http://www.downnotifier.com)的服务），如果您没有达到 99.7% 的正常运行时间，您可能会考虑重新安装。

# opengl - 使用 glReadPixels 检索位图时，抗锯齿功能丢失

> ID：11131104
> 
> 赞同：4
> 
> 时间：2012-06-21T03:24:58.610
> 
> 标签：opengl, graphics

我使用 OpenGL 编写了一个程序。它实现了一个简单的功能：画一个茶壶。为了让它在屏幕上看起来不错，我启用了多重采样抗锯齿。它确实如此。看下面的位图：

![在此处输入图像描述](../Images/ade848b9d86e468fabdf6a145a17af2e.png)

但是当我将它保存为bmp图片时，它看起来很糟糕。我使用 FBO 和 PBO 来做到这一点。现在我在这里发布我的部分代码：

```
glGenFramebuffers(1,&m_frameBuffer);
glBindFramebuffer(GL_FRAMEBUFFER,m_frameBuffer);

glGenRenderbuffers(1,&m_renderBufferColor);
glBindRenderbuffer(GL_RENDERBUFFER,m_renderBufferColor);
glRenderbufferStorage(GL_RENDERBUFFER,GL_RGB,
    m_subImageWidth,m_subImageHeight);
glFramebufferRenderbuffer(GL_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,
    GL_RENDERBUFFER,m_renderBufferColor);

glGenRenderbuffers(1,&m_renderBufferDepth);
glBindRenderbuffer(GL_RENDERBUFFER,m_renderBufferDepth);
glRenderbufferStorage(GL_RENDERBUFFER,GL_DEPTH_COMPONENT,
    m_subImageWidth,m_subImageHeight);
glFramebufferRenderbuffer(GL_FRAMEBUFFER,GL_DEPTH_ATTACHMENT,
    GL_RENDERBUFFER,m_renderBufferDepth);

glBindFramebuffer(GL_FRAMEBUFFER,0);

glBindFramebuffer(GL_FRAMEBUFFER,m_frameBuffer);

glGenBuffers(1,m_subImageBuffer);
glBindBuffer(GL_PIXEL_PACK_BUFFER,m_subImageBuffer);
        glBufferData(GL_PIXEL_PACK_BUFFER,m_bufferSize,
            NULL,GL_STREAM_READ);

glBindFramebuffer(GL_FRAMEBUFFER,m_frameBuffer);

glBindBuffer(GL_PIXEL_PACK_BUFFER,m_subImageBuffer);
glPixelStorei(GL_PACK_ALIGNMENT,1);
//注意：以BGR的顺序读取
glReadPixels(0,0,m_subImageWidth,m_subImageHeight,
        GL_BGR,GL_UNSIGNED_BYTE,bufferOffset(0));
GLUtils::checkForOpenGLError(__FILE__,__LINE__);
m_subPixels[i] = static_cast<GLubyte*>(glMapBuffer(GL_PIXEL_PACK_BUFFER,GL_READ_ONLY));
gltGenBMP(subImageFile,GLT_BGR,m_subImageWidth,m_subImageHeight,m_subPixels[i]);
glBindBuffer(GL_PIXEL_PACK_BUFFER,0);
glUnmapBuffer(GL_PIXEL_PACK_BUFFER);
glBindBuffer(GL_PIXEL_PACK_BUFFER,0); 
```

![在此处输入图像描述](../Images/10ef3a66916ee8f09b9ab468dd972ffd.png)

我很好奇。**为什么它们不同：渲染到默认的名声缓冲区并保存到 bmp 图片？**

**实际上，我想做的是在 9 个不同的相邻角度获得 9 个小位图，然后合成一个位图以显示在立体 3D 屏幕上。但是合成的位图看起来很糟糕。**

有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:21:08.953

仅仅因为您在帧缓冲区上启用了多重采样并不意味着您的 FBO 也会拥有它。创建 FBO 时需要使用 glRenderbufferStorageMultisample。

请参阅：[FBO Blitting 不起作用](https://stackoverflow.com/questions/9248223/fbo-blitting-is-not-working)

并且：[http ://www.opengl.org/wiki/GL_EXT_framebuffer_multisample](http://www.opengl.org/wiki/GL_EXT_framebuffer_multisample)

这也是相关的：[来自 FBO 的 glReadPixels 因多重采样而失败](https://stackoverflow.com/questions/765434/glreadpixels-from-fbo-fails-with-multisampling)

# c# - 在 AIR 本机扩展中包含外部 DLL

> ID：11131113
> 
> 赞同：2
> 
> 时间：2012-06-21T03:26:03.633
> 
> 标签：c#, c++, apache-flex, air, flash-builder

我一直在尝试让 Flex 4.6 中的工作 (AIR 3) Native Extension 工作一段时间。我的基本项目是让 Flash (Flex) UI 与在后台运行的 C++/CLI DLL Native Extension 一起运行。该 C++ 本机扩展在后台进一步使用另一个 C# DLL。

基本上，这个链的原因是让 C# DLL 运行 Kinect 相机，它将数据传递给运行 OpenCV 的 C++ DLL，后者将数据传递给 Flash UI。

现在，我基本上已经完成了所有设置，Flash 可以通过与 C++ 的本机扩展进行通信，而 C++ 可以通过“#using”它的 DLL 与 C# 进行通信。

但是，当我尝试让 Flash 调用本机扩展 C++ 来调用 C# 时，Flex 桌面应用程序崩溃并出现错误：

```
Process terminated unexpectedly

Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'kinect, Version=1.0.0.0, Culture=nutral, PublicKeyToken=null' or one of its dependencies.
The System cannot find the file specified.
    at startCamera(Void* ctx, Void* funcData, Uint32 argc, Void** argv)

Launch command details: "C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\bin\adl.exe" -runtime "C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\runtimes\air\win" -profile extendedDesktop -extdir "C:\Users\owner\Adobe Flash Builder 4.6\.metadata\.plugins\com.adobe.flexbuilder.project.ui\ANEFiles\WorkingExtension\win32\" C:\Users\owner\Deskto\FinalWorkingExtension\Flex\bin-debug\WorkingExtension-app.xml C:\Users\owner\Desktop\FinalWOrkingExtension\Flex\bin-debug 
```

据我了解，它找不到 kinect.dll （C# DLL）。我已经尝试将它放在本机扩展的 ANE 文件中，包括它在系统 PATH 中，并使用 C++ 项目中的项目属性链接器链接到它。在这一点上，我有点没有想法。

哦，我已经将错误追溯到 C++ 语句：

```
kinectClass^ deligate = gcnew kinectClass(); 
```

其中 kinectClass 是我在 C# DLL 中创建的 C# 类。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T15:14:38.133

你可以看看这个答案：[https ://stackoverflow.com/a/15264535/88231](https://stackoverflow.com/a/15264535/88231)

为了调试，我复制了 ADL.exe 所在的 DLL，它可以工作。

# qt - 类型不完整，无法定义

> ID：11131114
> 
> 赞同：0
> 
> 时间：2012-06-21T03:26:21.593
> 
> 标签：qt, user-interface

我已经为这个错误苦苦挣扎了两个多小时：

```
error: aggregate 'Ui::UpdaterProgress updaterProgress' has incomplete type and cannot be defined 
```

我在 Qt 上有一个简单的 UI 屏幕。设置对话框：

```
 #include <ui_UpdaterProgress.h>

  namespace Ui {
  class UpdaterProgress;
  }
  ....
  Ui::UpdaterProgress updaterProgress;
  QDialog updateProgressDialog;
  updaterProgress.setupUi(&updateProgressDialog); 
```

这是一个简单的用户界面，带有一个图标、两个标签、进度条和一个取消按钮。我在这里做错什么了吗？

如果我不进行前向声明，我会收到此错误：

```
error: 'UpdaterProgress' is not a member of 'Ui'
error: expected `;' before 'updaterProgress'
error: 'updaterProgress' was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:40:20.387

您是否在`....`???中定义了类 UpdaterProgress 在使用它之前定义你的`UpdaterProgress`类`Ui::UpdaterProgress updaterProgress;`。原型设计本身无法说明类的任何信息，这就是不完整类型错误的原因。

# objective-c - iOS UI 外观错误

> ID：11131123
> 
> 赞同：6
> 
> 时间：2012-06-21T03:28:40.157
> 
> 标签：objective-c, xcode, ios5, uiappearance

我正在构建一个文件管理应用程序，在调用 a`UIImagePickerController`或 a时偶尔会收到以下错误`MPMediaPickerController`：

```
*** -[_UIImageViewPretiledImageCacheKey hash]: message sent to deallocated instance 0x140dc0 
```

我最近使用 iOS 5 的 UIAppearance API 为我的应用程序提供了一个自定义主题，这就是我开始收到此错误的时候。通过猜测和检查，我发现了导致此错误的代码有问题的行：

```
UIImage *backButtonImage = [[UIImage imageNamed:@"backButton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(12, 16, 12, 8)];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
UIImage *barButtonImage = [[UIImage imageNamed:@"barButton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(14, 12, 14, 12)];
[[UIBarButtonItem appearance] setBackgroundImage:barButtonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

我不知道这段代码是如何触发上述错误的。您能否向我解释此错误的根源并提供解决方案来解决它。

提前感谢您的帮助，古维

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:46:47.853

经过一些更彻底的测试，我得出结论，这个问题仅限于视网膜设备。问题出在@2x 图像中。它们的分辨率为奇数（例如 59 像素 x 60 像素）。我所做的只是重新创建图像并将分辨率更改为 60 x 60 像素，我再也没有遇到过这个问题。

我对这个解决方案感到有点惊讶，因为我发现错误消息和代码行之间没有相关性，但最终，是图像导致了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T04:51:55.873

我有一个[类似的问题](http://openradar.appspot.com/12994960)，但我的崩溃是由`UIImageView`.

我的可调整大小的图像具有顶部 = 30 像素、左侧 = 20 像素、底部 = 1 像素、右侧 = 10 像素的边缘插图。图像为 43x45，因此其可调整大小的区域为 13x14。我正在使用 iOS6，因此我能够通过指定`UIImageResizingModeStretch`为`resizingMode`for来解决该问题`-[UIImage resizableImageWithCapInsets:resizingMode:]`。

作品：

```
UIImage *image = [UIImage imageNamed:name];
UIImage *resizableImage = [image resizableImageWithCapInsets:edgeInsets resizingMode:UIImageResizingModeStretch]; 
```

`EXC_BAD_ACCESS`与或`[_UIImageViewPretiledImageCacheKey hash]: message sent to deallocated instance 0xb14deb0`一起崩溃`NSZombieEnabled`：

```
UIImage *image = [UIImage imageNamed:name];
UIImage *resizableImage = [image resizableImageWithCapInsets:edgeInsets]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:39:45.163

对于以下代码，我得到了相同的结果

```
UIImage* image = [UIImage stretchableImageNamed:@"imageName"];
self.backgroundView = [[UIImageView alloc] initWithImage:image];
self.selectedBackgroundView = [[UIImageView alloc] initWithImage:image]; 
```

在哪里和`self`只是`UITableViewCell``stretchableImageNamed:`

```
+(UIImage*)stretchableImageNamed:(NSString*)name
{
    UIImage *img = [UIImage imageNamed:name];
    CGSize sz = img.size;
    int left = (sz.width - 1.) / 2.;
    int top = (sz.height - 1.) / 2.;
    return [img resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, top, left)];
} 
```

这有助于：

```
self.backgroundView = [[UIImageView alloc] initWithImage:[UIImage stretchableImageNamed:@"imageName"]];
self.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage stretchableImageNamed:@"imageName"]]; 
```

# javascript - Jqgrid：使用列冻结和分组

> ID：11131125
> 
> 赞同：1
> 
> 时间：2012-06-21T03:28:47.710
> 
> 标签：javascript, jqgrid, grouping, freeze

我正在一个使用 Jqgrid 来显示一些类似 excel 的表格的项目中工作。它包含几列。现在我们设法按名为“交易”的一列进行分组。在该组标题下方是名为“客户”的最左侧列。

剩余列是出售给这些客户的项目。现在用户希望冻结整个客户列（连同事务组标题文本）。这样当他们滚动时，第一列始终保持在视线范围内。

这非常困难，因为 jqgrid 不支持使用分组列冻结列。我搜索了很多地方，但没有找到任何线索。

请帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:09:14.700

从 4.3.0 版开始，该[`setFrozenColumns`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afrozencolumns)方法在 jqGrid 中可用。通过使用它，你可以实现这一点

# lua - Lua gfind问题

> ID：11131129
> 
> 赞同：-1
> 
> 时间：2012-06-21T03:29:12.243
> 
> 标签：lua

> ```
>  testA = "test.test test.test"
>     local t1 = {}
>     for X in string.gfind (testA, "[^ ]+") do
>     table.insert (t1 ,X)
>     end
>     local first = table.concat(t1, "", 1, 1);
> 
>     --output/first test.test
> 
>     testA = "11.11.11.11 test.test"
>     local t2 = {}
>     for X in string.gfind (testA, "[^ ]+") do
>     table.insert (t2 ,X)
>     end
>     local first = table.concat(t2, "", 1, 1);
> 
>     --output/first 11.11.11.11
> 
>     testA = "100.100.100.100  test.test"
>     local t3 = {}
>     for X in string.gfind (testA, "[^ ]+") do
>     table.insert (t3 ,X)
>     end
>     local first = table.concat(t3, "", 1, 1);
> 
>     --output/first 100.100.100.100    test.test 
> ```

有谁知道为什么第三个项目不会与 gfind 分开？，无法弄清楚为什么
它适用于两个字符串而不是第三个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:39:24.657

您的问题是制表符与空格不同。如果要跳过所有空白字符，则实际上需要跳过空白字符，而不仅仅是常规空格：

```
string.gfind (testA, "[%S]+") 
```

# eclipse - 如何停止映射器或减速器的调用

> ID：11131130
> 
> 赞同：0
> 
> 时间：2012-06-21T03:29:14.400
> 
> 标签：eclipse, hadoop

我正在尝试在 Eclipse（不是节点和/或集群）中运行我的 hadoop map/reduce 作业来调试我的 map/reduce 逻辑。我希望能够在映射器和减速器上放置一个断点，并使 eclipse 在这些断点上停止，但是这并没有发生，并且映射器卡住了。我注意到，如果我点击暂停并运行几次，它最终会在映射器和减速器上中断。我对日食很陌生。做错了什么？

我实际上是在[http://wiki.apache.org/hadoop/WordCount](http://wiki.apache.org/hadoop/WordCount)运行字数统计代码，并在第 22、35 行有断点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:53:54.903

也许您禁用了断点？如果是这种情况，断点将显示带有删除线图标。

当不在本地运行时，您的断点可能不会被命中，因为任务是在新的隔离 JVM 中运行的。但是，这里似乎并非如此，因为`suspend`在这种情况下也行不通。

# linux - 在文件中存储当前的 firefox/chrome URL

> ID：11131140
> 
> 赞同：-2
> 
> 时间：2012-06-21T03:30:38.953
> 
> 标签：linux, bash, url, firefox, google-chrome

我想将当前的 firefox/chrome URL 存储到一个临时文件中。有没有办法使用 bash 控制台或 C 编程语言来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:18:02.807

当前 Firefox 会话存储在 中`sessionstore.js`，可以在 Firefox 配置文件文件夹中找到。

# sql - 如何将此查询放入 Linq (C#)？

> ID：11131142
> 
> 赞同：1
> 
> 时间：2012-06-21T03:30:50.947
> 
> 标签：sql, asp.net-mvc, entity-framework, tsql, razor

我能够做到：

```
 var codeStation = from Code in ent.Role 
                   where Code.Code.StartsWith("S_") 
                   select Code; 
```

（ent：成为我的数据库的实体）

这给了我：

```
S_ANC
S_ATL
S_BNA
S_BOS
S_BRU
S_CLT
..... 
S_YXE
S_YXY
S_YYC
S_YYG
S_YYT
S_YYZ 
```

**如何完成以下 SQL 查询的等效操作？**

```
SELECT Substring(Codes,3,6)   
FROM Role
WHERE Codes LIKE 'S%' 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:36:30.940

```
var codeStation = from Code in ent.Role 
                  where Code.Code.StartsWith("S_") 
                  select RoleName.Substring(3,6); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:36:49.010

您的 LINQ 查询可以是`select`您想要的任何合法 C# 表达式，包括对字段名称的方法调用。因此，您可以执行以下操作：

```
var codeStation = from Code in ent.Role 
                  where Code.Code.StartsWith("S_") 
                  select Code.RoleName.SubString(3,6); 
```

# jquery - 仅从子列表中选择 children()

> ID：11131143
> 
> 赞同：0
> 
> 时间：2012-06-21T03:31:09.450
> 
> 标签：jquery

的HTML：

```
<ul class="main_list">
    <li class="list_folder">One</li>
    <li class="list_folder">Two</li>
    <li class="list_folder">New list <ul class="hide_list">
            <li class="list_folder">New one</li>
            <li class="list_folder">New Two</li>
            <li class="list_folder">Third list<ul class="hide_list">
                    <li class="list_folder">Third one</li>
                    <li class="list_folder">Third two</li>
                </ul></li>
        </ul></li>
</ul> 
```

我想要做什么：所有具有“hide_list”类的子列表都被CSS隐藏。当我单击包含隐藏列表的 li 时，我希望该隐藏列表切换打开/关闭。我的jQuery代码：

```
$('.list_folder').on('click',function(){
    $(this).children('.hide_list').slideToggle();
} 
```

问题：它适用于第一个子列表，但是当我单击下一个子列表更深时，它将选择下一个更深的列表以及外部列表，结果整个列表将折叠。

我究竟做错了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:32:46.327

```
$('.list_folder').on('click',function(e){
    e.stopImmediatePropagation();
    $(this).find('.hide_list:first').slideToggle();
}); 
```

**[演示](http://jsfiddle.net/2GLA5/8/)**

### 笔记

你不需要使用`.children()`，`.find()`就会完成你的工作。

> .stopImmediatePropagation() 阻止其余的处理程序被执行，并防止事件在 DOM 树中冒泡。

阅读更多关于**[.stopImmediatePropagation()](http://api.jquery.com/event.stopImmediatePropagation/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T17:34:32.763

你的功能是正确的。您必须再添加一行`event.stopImmediatePropagation()`。

```
$('.list_folder').on('click',function(event){
  /* add one more line */
  event.stopImmediatePropagation();
  $(this).children('.hide_list').slideToggle();
} 
```

# data-structures - 这是关于数据结构

> ID：11131146
> 
> 赞同：0
> 
> 时间：2012-06-21T03:31:45.817
> 
> 标签：data-structures

有两个包含整数的未排序列表，需要在列表中找到共同的最大整数吗？

我对这个问题有一个想法，我首先教导我们需要在第一个列表中找到最大的元素，然后我们需要使用第一个列表的最大元素对第二个列表应用线性搜索方法。这个逻辑对吗……？如果不是，可以帮助我解决这个问题的逻辑。

任何人都可以帮我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:40:44.850

您首先想到的问题是，如果第一项中的最大元素没有出现在第二项中，您将永远不会尝试另一个。

我能在短时间内想到的最有效的方法是：

1.  按降序排列两个数组
2.  抓取第一个数组中的第一个元素
3.  与第二个数组中的第一个元素进行比较
4.  如果相同，你就完成了
5.  如果第一项大于第二项，则将其从数组 1 中弹出并从步骤 2 开始重复
6.  如果第一项小于第二项，则从数组 2 中弹出第二项并从步骤 2 重复

# c - L Peter Deutsch 在 C 中实现的 MD5 哈希的奇怪行为

> ID：11131148
> 
> 赞同：0
> 
> 时间：2012-06-21T03:32:01.840
> 
> 标签：c, md5, hash

我正在使用[L Peter Deutsch](http://en.wikipedia.org/wiki/L_Peter_Deutsch)从[页面和](http://userpages.umbc.edu/~mabzug1/cs/md5/md5.html)[sourceforge.net](http://sourceforge.net/projects/libmd5-rfc/files/libmd5-rfc/2002-04-13/)的源代码中找到的 C 语言中的 MD5 实现。

该文件的`main`函数中的代码`md5main.c`已修改为我使用如下：

```
md5_byte_t *result = malloc ( 16 );  // Allocating 128 bits.
char data[] = "my name is aman";
md5_state_t state;  // This is a state object used by the MD5 library to do "stuff".
                    // Just treat it as a black box.
md5_init(&state);
md5_append(&state, (const md5_byte_t *)data, strlen(data));
md5_finish(&state, result);
print_bits(result, 128);

md5_append(&state, (const md5_byte_t *)data, strlen(data));
md5_finish(&state, result);
print_bits(result, 128);
//puts(usage);
return 0; 
```

打印位函数如下：

```
void print_bits ( void * data, int length )
{
    uint8_t *temp_data = (uint8_t *)data;
    int bytes = length>>3;
    printf ("[");
    int i;
    //printf("\nprinting bloom filter\n\n");
    for ( i=0; i<bytes; ++i )
    {
        int j;
        for ( j=sizeof(uint8_t)*8-1; j>=0; --j)
        {
            int l = temp_data[i]>>j & 1;
            printf( "%d", l);
        }
    }
    //printf("\n end printing bloom filter\n\n");
    printf ("]\n");
} 
```

您将需要包含`stdlib.h`和代码。

现在对于字符串 the `my name is aman`，它在调用两次时产生了两个不同的哈希值。它在我的系统上产生了以下内容：

```
[01110000100000100110101111101101000011000100011100110111010100110010011100110011111100100111100100100011101011000111110011010101]
[11101001101110101111000010101100000000011011010110110011111001111010110111001011000001010000010111000010101111101101000010011000] 
```

这种奇怪行为的原因是什么？它不应该为特定键产生相同的哈希值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:24:58.887

您需要`md5_init`在第一次调用 后再次调用`md5_finish`。

# apache - 并发页面请求比较

> ID：11131151
> 
> 赞同：0
> 
> 时间：2012-06-21T03:32:23.960
> 
> 标签：apache, amazon-web-services, memcached, web-deployment, mysql-management

我一直希望找出不同的服务器设置在理论上等同于并发页面请求，而答案似乎总是沉浸在巫术和巫术中。以下设置的最大并发页面请求数的近似值是多少？

**apache+php+mysql**（1台服务器）

**apache+php+mysql+caching**（如 memcached 或类似（仍然是一台服务器））

**apache+php+mysql+caching+专用数据库服务器**（2台服务器）

**apache+php+mysql+caching+dedicatedDB+loadbalancing**（多webserver/单dbserver）

**apache+php+mysql+caching+dedicatedDB+loadbalancing**（多webserver/多dbserver）

**+分布式**（亚马逊云弹性）——我知道这个是“你能负担得起的”，但很高兴知道什么时候移到它。

我感谢任何建设性的批评，我只是想弄清楚什么时候从一个实现转移到下一个实现，因为它们每个都有自己的实现壮举，无论是编程还是设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:29:05.557

在您的问题中，您谈到了缓存，这可能是 Web 架构重新性能和容量中最重要的因素之一。

Memcache 很有用，但实际上，在此之前，您应该确保服务器响应上有正确的 HTTP 缓存指令。这做了两件事；它减少了请求数量并加快了服务器响应时间（如果您正确配置了 Apache）。这也可以通过使用像 Varnish 和 CDN 这样的 HTTP 加速器来改进。

另一个需要考虑的因素是您的系统是否是无状态的。无状态通常意味着它不在服务器上存储会话并在每个请求中引用它们。一个好的系统架构尽可能少地依赖状态。状态越少，系统的水平可扩展性就越高。大多数人在遇到个性化问题时会引入状态——即为不同的用户提供不同的内容。在这种情况下，您应该首先使用 HTML5 会话存储进行调查（即，将完整的用户数据存储在客户端的 javascript 中，显然是通过 https），或者如果数据集较小，则使用安全的 javascript cookie。这样，您仍然可以提供缓存资源，然后在客户端使用 javascript 进行个性化设置。

最后，您的堆栈包括一个数据库层，这是性能和容量的另一个潜在瓶颈。如果您只是从系统中读取数据，那么水平扩展应该很容易。如果有读写操作，通常最好将读写数据集分离到一个单独的数据库中，并将只读数据集放在另一个数据库中。然后，您可以使用更相关的方法进行扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:49:13.560

这些设置不会吐出一个答案，然后您可以相互比较。答案会因您列出的因素更多而有所不同。

即使他们确实吐出了一个答案，那也只是几十个指标中的一个。是什么使它成为最重要的指标？

更糟糕的是，这些替代方案中的每一个都不是免费的。其中每一项都存在工程工作和维护开销。如果不了解您的组织、您的应用程序和您的成本/收入结构，就无法对其进行分析。

像 AWS 这样的选项不仅涉及开发工作，而且可能会将您“锁定”在解决方案中，因此您还需要注意这一点。

我知道这个回答并不完整，但我指出这个问题涉及一个无法简化为单一指标的大而复杂的领域。

我怀疑你是从完全错误的角度来处理这个问题的。不要去寻找技术，然后弄清楚如何使用它们。而是分析您的应用程序（测量、测量、测量），找出您遇到的实际问题，然后只解决那个问题和那个问题。

如果您了解问题并了解技术选项，那么您应该有答案。

如果您已经这样做并且问题是并发页面请求，那么我提前道歉，但我怀疑不是。

# function - 决定提交数据的控制器动作：-CakePHP

> ID：11131156
> 
> 赞同：0
> 
> 时间：2012-06-21T03:33:19.090
> 
> 标签：function, button, controller, cakephp-1.3

我正在使用 Cake 创建一个表单。表单中有一个 $this->Form->button("$i"); 元素。如何指定将数据发布到控制器的哪个功能。如果我在控制器中访问此数据没有错，则此表单元素需要有一个名称。我们如何指定按钮的名称。我已经浏览了很长时间的文档，似乎没有找到任何答案。请给我提意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:02:16.460

该按钮仅提交当前表单，这不是您设置控制器操作的位置。您可以在`create`FormHelper 的方法中执行此操作。

默认情况下，表单会提交给属于当前提供的视图的操作，但您可以`action`在创建表单时使用该选项否决它。像这样：

```
echo $this->Form->create('User', array('action' => 'edit')); 
```

这会将您的表单提交给用户控制器和该控制器中的`edit`函数。

# cloud-foundry - 无法用微云代工调试

> ID：11131158
> 
> 赞同：0
> 
> 时间：2012-06-21T03:33:30.227
> 
> 标签：cloud-foundry

我有一个应用程序部署到我本地机器上的 Micro Cloud Foundry 实例。我可以在 STS 中启动、停止和更新应用程序。出于某种原因，当我从 STS 中右键单击应用程序或服务器时，调试选项被禁用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:33:13.957

MCF 1.2.0 中引入了调试功能。确保您拥有正确版本的 MCF。当您将 MCF 添加为服务器时，您可以双击它并将其作为选项卡在窗口中打开。然后，您需要单击“应用程序”选项卡（位于 MCF 窗口的左下角）。您应该会看到您推送的应用程序列表。单击任何一个，您应该会看到“开始”按钮旁边的“调试”按钮出现。

无需设置任何标志以显示或不显示调试。它在 MCF 1.2.0 中

# sql - SQL Server Select 填充行，长度为零

> ID：11131165
> 
> 赞同：-2
> 
> 时间：2012-06-21T03:35:04.227
> 
> 标签：sql

让以下选择为我提供我想要的数据，但我想扩展它，以便对于每个不同的缺陷，返回一行，列表中的 Product 具有正确的长度，如果该行不存在，则返回零。

这是选择

```
SELECT Product, Defect, sum(Length) AS Length FROM RejectTransaction  
WHERE  RejectTransaction.TranDate >= '20120620 00:00:00.000' 
AND RejectTransaction.TranDate <= '20120620 23:59:59.000' 
GROUP BY Product, Defect 
ORDER BY Product, Defect; 
```

这是当前的输出

* * *

产品A 尺寸 560.00

产品A 胶片 40.00

ProductA 处理 10.00

产品 B 尺寸 220.00

产品B 胶片 640.00

ProductB 胶衣 200.00

ProductC 尺寸 60.00

ProductC 薄膜 1160.00

ProductC 垫子缺陷 810.00

* * *

我想要返回的内容：

* * *

产品A 尺寸 560.00

产品A 胶片 40.00

ProductA 处理 10.00

ProductA 胶衣 0.00

ProductA 垫子缺陷 0.00

产品 B 尺寸 220.00

产品B 胶片 640.00

ProductB 胶衣 200.00

ProductB 处理 0.00

产品B垫缺陷 0.00

ProductC 尺寸 60.00

ProductC 薄膜 1160.00

ProductC 垫子缺陷 810.00

产品C处理 0.00

ProductC 胶衣 0.00

* * *

如果需要，有 RejectTransaction（上面的数据来自）、Product 和 Defect 表。

对不起，没有时间把这个做得很漂亮。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:48:43.037

如果您说您有产品和缺陷表，那么 LEFT OUTER JOIN 应该可以解决问题。

**编辑** 仅包括产品和缺陷的附加要求，它拒绝了报告期间引用的交易（我还假设产品和缺陷是独立的轴）使事情复杂化，这里 CTE 的重构为我们节省了时间：

```
WITH frt AS
(
  SELECT rt.Product, rt.Defect, rt.[Length]
  FROM RejectTransaction rt
  WHERE
   rt.TranDate >= '20120620 00:00:00.000'
   AND rt.TranDate <= '20120620 23:59:59.000'
)
SELECT fp.Product, fd.Defect, SUM(ISNULL(frt.[Length], 0)) AS [Length]
FROM
    (SELECT DISTINCT frt.Product
     FROM frt
     ) AS fp -- Filtered Products
     CROSS JOIN
    (SELECT DISTINCT Defect
      FROM frt
     ) AS fd -- Filtered Defects
     LEFT OUTER JOIN frt  -- Filtered Reject Transaction
     ON frt.Product = fp.Product
     AND frt.Defect = fd.Defect
GROUP BY fp.Product, fd.Defect 
ORDER BY fp.Product, fd.Defect; 
```

完整的 SQL 小提琴在这里： [http ://www.sqlfiddle.com/#!3/e8b76/2](http://www.sqlfiddle.com/#!3/e8b76/2)

# .net - 使用 SQL Server Express 部署桌面应用程序

> ID：11131168
> 
> 赞同：4
> 
> 时间：2012-06-21T03:35:21.223
> 
> 标签：.net, sql-server-express, setup-project

我开发了一个使用 SQL Server Express 2005 数据库的 C# 4.0 桌面应用程序。我已经构建了一个安装和部署 (msi) 包，它将应用程序及其所有依赖项（包括 mdb 数据库文件）安装到 Program Files 目录下的工作文件夹中。

连接字符串是这样的：

```
Server=.\SQLExpress;AttachDbFilename=|DataDirectory|MyDB.mdf;Database=MyDB;integrated security=true;user instance=true; 
```

第一次进行数据库调用时，数据库将连接到本地 SQL Server Express 实例。

安装程序在 XP 计算机上按预期工作，但是，在 Windows 7 计算机上进行测试时，第一次进行数据库调用时会引发异常，这表明对包含 mdb 文件的文件夹没有足够的权限。

在 Windows XP 和 Windows 7 之间，Windows 似乎已经锁定了 Program Files 子文件夹的权限。我可以通过设置安装目录的完全权限来解决这个问题，但这似乎是作弊。

所以我的问题是：我应该如何为这个应用程序配置设置和部署包？我做对了吗？我是否只需要向应用程序目录上的所有用户授予完全权限？如果是这样，我如何使用 VS2010 设置和部署包来实现这一点？或者我应该把 mdb 文件放在别的地方吗？还是我完全以错误的方式做事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:37:25.523

这是我最终实施的完整解决方案。

*   在 Setup and Deployment 项目的 File System 部分，我将 SQL Server 数据库文件 (MDF) 添加到 Common Application Data 文件夹。这不是[右键单击]目标机器上的文件系统\添加特殊文件夹菜单中的可选选项之一（出于某种原因），因此我必须从该菜单中选择自定义文件夹，然后在默认位置属性中，输入“[ CommonAppDataFolder][制造商][产品名称]”。这在 Common Application Data 文件夹中创建了一个文件夹，无论它在我的产品的目标计算机上的任何位置（C:\Program Data\ for Win 7）。
*   我需要所有用户都能够完全访问此文件夹，以便 SQL Server 数据库文件成功附加并正常工作，因此下一步是更改此文件夹的权限。
*   我能找到的唯一方法是为安装和部署项目编写自定义操作。此链接很好地说明了如何创建和添加自定义操作：[http ://thedotnetway.blogspot.com.au/2008/10/creating-setup-project-in-vs-2008-w.html](http://thedotnetway.blogspot.com.au/2008/10/creating-setup-project-in-vs-2008-w.html)
*   此链接提供了需要放入自定义操作覆盖的安装方法的代码： [C# - 在 Windows 7 中为所有用户设置目录权限](https://stackoverflow.com/questions/8944765/c-sharp-set-directory-permissions-for-all-users-in-windows-7)
*   我在自定义操作代码中使用 System.Environment.GetFolderPath(System.Environment.SpecialFolder.CommonApplicationData) 来指定 Common Application Data 文件夹。

希望这能让未来有类似要求的任何开发人员的生活更轻松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T04:24:21.843

有几种方法可以补救这种情况。

1.  如果您的应用程序仅执行从程序文件中读取文件。您只需要在管理员权限下运行安装程序包（右键单击它，然后选择以管理员身份运行）。您的数据库将被写入预期的位置。

2.  如果您需要对文件执行 IO 操作（读/写），则需要将所有文件放到 Program Data 文件夹中

    **Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData)**

或当前用户的数据文件夹

```
**Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)** 
```

干杯。

# java - 没有 Eclipse 的 Java Web 开发

> ID：11131169
> 
> 赞同：6
> 
> 时间：2012-06-21T03:35:46.687
> 
> 标签：java

我对做一些 Java Web 开发很感兴趣，但我对使用 Eclipse 并不感兴趣。我过去使用过 Eclipse，对我来说，它似乎添加了一个我并不真正感兴趣的抽象层。但是，我遇到了一些新贵的问题。

有没有人在不使用 Eclipse（或任何其他 IDE）的情况下启动和运行 Java Web 开发的任何好的参考/教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T03:38:13.593

创建一个 maven 项目并使用其中一个嵌入式 Web 服务器，例如 jetty 或 Glassfish。

此外，这种方法允许您直接使用命令行或使用 Netbeans、Eclipse 或 IntelliJ 作为您的 IDE，因为它们支持 Maven 项目。我认为 JDeveloper 还不能。

（Eclipse 可能需要市场上的 m2e 插件，它透明且直接地处理所有 Eclipse 配置。强烈推荐）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:48:41.177

您可以仅使用记事本轻松进行 Java Web 开发。额外的工作是，您必须编写一些额外的代码（例如在 servlet 中您必须编写 web.xml [http://www.tutorialspoint.com/servlets/servlets-first-example.htm](http://www.tutorialspoint.com/servlets/servlets-first-example.htm)）。在 Struts、Hibernate 和 Spring 框架中也是如此，您必须在记事本中编写配置文件。

# javascript - Javascript/HTML - “此页面未在正确的框架集中加载”

> ID：11131173
> 
> 赞同：1
> 
> 时间：2012-06-21T03:36:33.133
> 
> 标签：javascript, html, frameset

浏览一本希望我制作一个简单的阶乘计算器的 javascript 书籍，当我单击下面代码中的计算按钮时，我不断收到错误“此页面未在正确的框架集中加载”。现在，如果代码不在正确的框架集中，代码被编程为抛出此错误，但我的问题是为什么不是？

编辑：澄清一下，我肯定是从`calcfactorialtopframe.htm`.

**calcfactorialtopframe.htm**

```
<html>
<head>
<title>Example</title>

<script type="text/javascript">
function calcFactorial(factorialNumber)
{
    var factorialResult = 1;
    for (; factorialNumber > 0; factorialNumber--)
    {
        factorialResult = factorialResult * factorialNumber;
    }
    return factorialResult;
}
</script>
</head>
<frameset cols="100%,*">
    <frame name="fraCalcFactorial" src="calcfactorial.htm" />
</frameset>
</html> 
```

* * *

**calcfactorial.htm**

```
<html>
<head>
<title>Example</title>

<script type="text/javascript">
function butCalculate_onclick()
{
    try
    {
        if (window.top.calcFactorial == null)
            throw "This page is not loaded within the correct frameset";
        if (document.form1.txtNum1.value == "")
            throw "!Please enter a value before you calculate its factorial";
        if (isNaN(document.form1.txtNum1.value))
            throw "!Please enter a valid number";
        if (document.form1.txtNum1.value < 0)
            throw "!Please enter a positive number";

        document.form1.txtResult.value =
            window.parent.calcFactorial(document.form1.txtNum1.value);
    }
    catch(exception)
    {
        if (typeof(exception) == "string")
        {
            if (exception.charAt(0) == "!")
            {
                alert(exception.substr(1));
                document.form1.txtNum1.focus();
                document.form1.txtNum1.select();
            }
            else
            {
                alert(exception);
            }
        }
        else
        {
            alert("The following error occursed " + exception.message);
        }
    }
}
</script>
</head>
<body>
<form action="" name="form1">
    <input type="text" name="txtNum1" size="3" /> factorial is
    <input type="text" name="txtResult" size="25" /><br />
    <input type="button" value="Calculate Factorial" name="butCalculate" onclick="butCalculate_onclick()" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:42:33.097

是的，这是 Chrome 错误，在最新版本的 Firefox、IE 和 Opera 中运行良好 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:51:48.523

我的猜测是您已加载`calcfactorial.htm`到地址栏中，而不是`calcfactorialtopframe.htm`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T03:59:18.207

这是 Chrome 特有的错误。

我之前确实在 IE 中尝试了相同的代码，但出现了相同的错误，尽管再次尝试它似乎在 IE 中工作，但在 Chrome 中仍然无法工作。

# asp.net - Asp.net、C#、Linq 和数组的使用，

> ID：11131177
> 
> 赞同：-1
> 
> 时间：2012-06-21T03:37:03.903
> 
> 标签：asp.net, asp.net-mvc-3, linq, itextsharp

```
var result = (from p in productInQuery
      join o in orderInfoQuery on p.refNo equals o.refNo
      join x in productQuery on p.productNo equals x.no
      join t in productOutQuery on p.no equals t.productInNo into productIn
      from t in productIn.DefaultIfEmpty()
      //let dateOut = (from m in orderInfoQuery where m.refNo == t.refNo select m.delivered).FirstOrDefault()
      orderby o.processDate descending
      select new
      {     
          modelNo = x.modelNo,
          mfgNo = p.mfgNo,
          serialNo = p.serialNo,
          poNo = p.poNo,
          lbs = p.lbs,
          width = p.width,
          height = p.height,
          depth = p.depth,
          qty = p.qty,
          dateIn = o.processDate,
          dateOut = (DateTime?)(from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault()
      }).ToArray(); 
```

我想将此结果添加到 iTextSharp 表格单元格中。

但我不知道该怎么做

我试过，

```
int resultSize = result.Length;

/*
for (int j = 0; j < resultSize; j++)
{
    table.AddCell(result[j]);
}
*/

foreach (string[] test in result) //Error : Unable to cast object of type 
{
    int testSize = test.Length;
    for (int j = 0; j < testSize; j++)
    {
        table.AddCell(test[j]);
    }
} 
```

但我迷路了:(

有知道的请指教~

[编辑]

```
int resultSize = result.Length; //192 
```

![在此处输入图像描述](../Images/640e49d9642481fd25784780de4bf571.png)

测试确实有一个字段...

[编辑 2]

实际上结果是从模型返回的。

**PJ.WebUI.Models 报告类**

```
public class Reports 
{
  public Array GetTransaction(){
    OrdersRepository ordersRepository = new OrdersRepository();
    var productInQuery = ordersRepository.ProductIn;
    var productOutQuery = ordersRepository.ProductOut;
    var productQuery = ordersRepository.Product;
    var orderInfoQuery = ordersRepository.OrderInfo;
    var result = (from p in productInQuery
      join o in orderInfoQuery on p.refNo equals o.refNo
      join x in productQuery on p.productNo equals x.no
      join t in productOutQuery on p.no equals t.productInNo into productIn
      from t in productIn.DefaultIfEmpty()
      //let dateOut = (from m in orderInfoQuery where m.refNo == t.refNo select m.delivered).FirstOrDefault()
      orderby o.processDate descending
      select new
      {     
          modelNo = x.modelNo,
          mfgNo = p.mfgNo,
          serialNo = p.serialNo,
          poNo = p.poNo,
          lbs = p.lbs,
          width = p.width,
          height = p.height,
          depth = p.depth,
          qty = p.qty,
          dateIn = o.processDate,
          dateOut = (DateTime?)(from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault()
      }).ToArray();
    return result;
  }
} 
```

并在控制器中调用方法来获取结果。

```
Reports reposrts = new Reports();
var result = reposrts.GetTransaction();

..

foreach (var test in result)
{
     table.AddCell(test.modelNo);
} 
```

然后

```
Error   1   'object' does not contain a definition for 'modelNo' and no extension method 'modelNo' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?) 
```

所以，

我将模型方法移动到控制器方法中（将所有方法放在同一方法中）并运行。然后它的工作原理！

但结果也可以在另一个控制器中使用。所以我想将结果保留在 Model 类中以供重用。

我想知道如果结果查询不在同一方法中，为什么它不起作用。

你能帮我多一点吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:47:45.920

'result' 将是您选择的匿名类型的数组，而不是字符串数组的数组，这就是您在 foreach 循环中遇到错误的原因。

您的循环可能看起来更像以下内容：

```
foreach (var test in result)  
{ 
    table.AddCell(test.modelNo);
    table.AddCell(test.mfgNo);
    table.AddCell(test.serialNo);
    // etc
} 
```

@编辑2：

因为 GetTransaction() 的结果是 'Array'，调用方法不知道类型是什么，它只是将其视为一个对象数组，而且，因为它是一个匿名类型，所以不能（合理地）强制转换它回到预期的类型。

我认为在这种情况下你最好的选择是创建一个具有你想要返回的属性的新类，例如：

```
public class Transaction
{
    public string ModelNo { get; set; }
    public string MfgNo { get; set; }
    public string SerialNo { get; set; }
   // etc. - but with the correct types for the properties
} 
```

然后更改 linq 查询以选择这种类型，而不是匿名类型，例如：

```
...
orderby o.processDate descending       
select new Transaction
{            
    ModelNo = x.modelNo,       
    MfgNo = p.mfgNo,       
    SerialNo = p.serialNo,
    // etc.
... 
```

并将 GetTransaction() 的返回类型从 Array 更改为 Transaction[]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:42:51.637

目前尚不清楚您要做什么，但我相信您将结果的每个元素都错误地转换为字符串。

试试这个：

```
foreach (var test in result) 
```

您可能需要调整您的内部代码，因为 test 不是数组，但这应该可以让您摆脱当前的错误。

# flash - 在移动 Flex 应用程序中使用 Internet

> ID：11131182
> 
> 赞同：0
> 
> 时间：2012-06-21T03:38:22.477
> 
> 标签：flash, apache-flex, adobe

我正在构建一个移动 Flex 应用程序，我需要在我的程序期间访问互联网，以便在 pdf 文件中返回一些数据。

首先，我希望应用程序在后台使用互联网。所以，我不希望应用程序转移到网络浏览器。

此外，我的应用程序允许用户输入访问网站所需的某些信息，即用户名和密码。我希望自动输入此信息，而无需用户访问网站并输入信息。

最后，有没有办法可以从 pdf 文件中获取信息，还是必须将整个文件返回给用户？

正如您可能看到的那样，我对如何根据我的特定要求访问互联网感到非常困惑。我听说过 HTTPService 和 navigateToUrl... 但我不知道哪个更适合我的情况。

感谢您的所有帮助（这是我的第一个 Flex 程序）:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:40:23.497

如果您不想使用从您的应用程序或其他东西切换，请使用简单的 URLLoaders 并在后台加载页面。

# python - 是否有用于确定可迭代对象是否包含某个序列的 Python 内置函数？

> ID：11131185
> 
> 赞同：5
> 
> 时间：2012-06-21T03:38:55.823
> 
> 标签：python

例如，类似：

```
>>> [1, 2, 3].contains_sequence([1, 2])
True
>>> [1, 2, 3].contains_sequence([4])
False 
```

我知道`in`操作员可以对字符串执行此操作：

```
>>> "12" in "123"
True 
```

但我正在寻找对迭代进行操作的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T03:52:10.617

引用自[https://stackoverflow.com/a/6822773/24718](https://stackoverflow.com/a/6822773/24718) 修改为使用列表。

```
from itertools import islice

def window(seq, n=2):
    """
    Returns a sliding window (of width n) over data from the iterable
    s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   
    """
    it = iter(seq)
    result = list(islice(it, n))
    if len(result) == n:
        yield result    
    for elem in it:
        result = result[1:] + [elem]
        yield result

def contains_sequence(all_values, seq):
    return any(seq == current_seq for current_seq in window(all_values, len(seq)))            

test_iterable = [1,2,3]
search_sequence = [1,2]

result = contains_sequence(test_iterable, search_sequence) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T03:49:06.123

有内置的 Python 吗？不，您可以通过多种方式完成此任务。 [这是一个食谱](http://code.activestate.com/recipes/577850-search-sequences-for-sub-sequence/)，它还为您提供子序列在包含序列中的位置：

```
def _search(forward, source, target, start=0, end=None):
    """Naive search for target in source."""
    m = len(source)
    n = len(target)
    if end is None:
        end = m
    else:
        end = min(end, m)
    if n == 0 or (end-start) < n:
        # target is empty, or longer than source, so obviously can't be found.
        return None
    if forward:
        x = range(start, end-n+1)
    else:
        x = range(end-n, start-1, -1)
    for i in x:
        if source[i:i+n] == target:
            return i
    return None 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T03:48:23.097

据我所知，没有办法做到这一点。你可以很容易地滚动你自己的函数，但我怀疑这会非常有效。

```
>>> def contains_seq(seq,subseq):
...     #try: junk=seq[:]
...     #except: seq=tuple(seq)
...     #try: junk=subseq[:]
...     #except: subseq=tuple(subseq)
...     ll=len(subseq)
...     for i in range(len(seq)-ll):  #on python2, use xrange.
...         if(seq[i:i+ll] == subseq):
...             return True
...     return False
...
>>> contains_seq(range(10),range(3)) #True
>>> contains_seq(range(10),[2,3,6]) #False 
```

请注意，此解决方案不适用于生成器类型的对象（它仅适用于您可以切片的对象）。您可以`seq`在继续之前检查它是否可切片，`tuple`如果它不可切片，则将其转换为 a - 但是您摆脱了切片的好处。您可以重新编写它以一次检查一个元素而不是使用切片，但我感觉性能会受到更大的影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T04:00:54.223

正如其他人所说，没有内置的。这是一个可能比我见过的其他答案更有效的实现——特别是，它扫描可迭代对象，只跟踪它所看到的目标序列的前缀大小。但是，与已经提出的其他一些方法相比，这种效率的提高是以增加冗长为代价的。

```
def contains_seq(iterable, seq):
    """
    Returns true if the iterable contains the given sequence.
    """
    # The following clause is optional -- leave it if you want to allow `seq` to
    # be an arbitrary iterable; or remove it if `seq` will always be list-like.
    if not isinstance(seq, collections.Sequence):
        seq = tuple(seq)

    if len(seq)==0: return True # corner case

    partial_matches = []
    for elt in iterable:
        # Try extending each of the partial matches by adding the
        # next element, if it matches.
        partial_matches = [m+1 for m in partial_matches if elt == seq[m]]
        # Check if we should start a new partial match
        if elt==seq[0]:
            partial_matches.append(1)
        # Check if we have a complete match (partial_matches will always
        # be sorted from highest to lowest, since older partial matches 
        # come before newer ones).
        if partial_matches and partial_matches[0]==len(seq):
            return True
    # No match found.
    return False 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T04:25:32.987

如果不需要保留顺序，您可以使用集合（内置）：

```
>>> set([1,2]).issubset([1,2,3])
True
>>> set([4]).issubset([1,2,3])
False 
```

除此以外：

```
def is_subsequence(sub, iterable):
    sub_pos, sub_len = 0, len(sub)
    for i in iterable:
        if i == sub[sub_pos]:
            sub_pos += 1
            if sub_pos >= sub_len:
                return True
        else:
            sub_pos = 0
    return False

>>> is_subsequence([1,2], [0,1,2,3,4])
True
>>> is_subsequence([2,1], [0,1,2,3,4]) # order preserved
False
>>> is_subsequence([1,2,4], [0,1,2,3,4])
False 
```

这个适用于任何迭代器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T07:11:59.337

[deque](http://docs.python.org/library/collections.html#deque-objects)在这里似乎很有用：

```
from collections import deque

def contains(it, seq):
    seq = deque(seq)
    deq = deque(maxlen=len(seq))
    for p in it:
        deq.append(p)
        if deq == seq:
            return True
    return False 
```

请注意，这接受两个参数的任意迭代（不需要切片）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T04:57:46.973

由于没有内置，我做了一个不错的版本：

```
import itertools as it

def contains(seq, sub):
    seq = iter(seq)
    o = object()
    return any(all(i==j for i,j in zip(sub, it.chain((n,),seq, 
                                      (o for i in it.count())))) for n in seq) 
```

这*不需要任何额外的列表*（如果您使用`it.izip`或 Py3k）。

```
>>> contains([1,2,3], [1,2])
True
>>> contains([1,2,3], [1,2,3])
True
>>> contains([1,2,3], [2,3])
True
>>> contains([1,2,3], [2,3,4])
False 
```

如果您阅读没有问题，可以加分。（它可以完成这项工作，但不要太认真地对待实施）。;)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-21T03:48:04.737

您可以将其转换为字符串，然后对其进行匹配

```
full_list = " ".join([str(x) for x in [1, 2, 3]])
seq = " ".join([str(x) for x in [1, 2]])
seq in full_list 
```

# php - 电子邮件传递流程

> ID：11131187
> 
> 赞同：1
> 
> 时间：2012-06-21T03:39:39.720
> 
> 标签：php, linux, email, mail-server

现在我们有网络服务器和电子邮件服务器

我们使用电子邮件服务器通过 EXIM 广播我们的电子邮件爆炸

我们的网络服务器使用 PHP 电子邮件爆炸软件

每天估计有几十万封电子邮件从电子邮件服务器发出。

退回的电子邮件将被退回到我们的电子邮件服务器，但会在网络服务器中进行跟踪……这会影响我们的电子邮件传递吗？

我们的问题是，电子邮件总是在电子邮件服务器中排队。但是，有时我们立即发送到少数电子邮件，我们可以立即收到。

有什么解决办法吗？

# java - HeapSort 算法索引 1 到 n，实际代码必须从 0 到 n-1

> ID：11131193
> 
> 赞同：0
> 
> 时间：2012-06-21T03:40:30.310
> 
> 标签：java, algorithm, heap, heapsort

我对算法有点陌生，想实现堆排序算法。算法如下：

Parent(i) 返回 Math.floor(i/2)

左（i）返回 2i

右(i) 返回 2i+1

然后是恢复 heep 属性的 HEAPIFY 方法。算法如下：

```
HEAPIFY(A, i)
 l = Left(i)
 r = Right(i)
 if (l <= heap-size[A] and A[l] > A[i]
  then largest = l
 else largest = i
 if r <= heap-size[A] and A[r] > A[largest]
  then largest = r
 if largest != i
  then exchange A[i] <-> A[largest]
       HEAPIFY(A, largest) 
```

我实现此方法的代码是：

```
public static void HEAPIFY(int[] A, int i) {
    int l = LEFT(i);
    int r = RIGHT(i);
    int largest = 0;
    if (l < A.length && A[l] > A[i]) {
        largest = l;
    } else {
        largest = i;
    }

    if (r < A.length && A[r] > A[largest]) {
        largest = r;
    }

    if (largest != i) {
        int temp = A[i];
        A[i] = A[largest];
        A[largest] = temp;
        HEAPIFY(A, largest);
    }
} 
```

现在我的问题是在书中算法通过绘制堆和数组的树来显示，例如数组是：[16,14,10,8,7,9,3,2,4,1] 并且对于树和同样对于数组，它的索引从 1 到 n，因此 Array[1] = 16 和编码 Array[0] = 16。现在我无法调整 heapify 方法以从索引 1 开始并上升到 1 或以某种方式让它从 0 开始，让堆从 0 索引到 n-1。

抱歉，如果它有点令人困惑，我仍然很困惑，但我真的很感激一些帮助。

谢谢你们

现在 HEAPIFY 工作了，下面的代码是构建堆的代码：

```
public static void BUILD_HEAP(int[] A) {
    heapSize = A.length;
    for (int i = (int) Math.floor(A.length / 2.0); i >= 0; i--) {
        HEAPIFY(A, i);
    }
} 
```

构建堆也有效，唯一不起作用的方法是堆排序。

```
 public static void HEAPSORT(int[] A) {
    BUILD_HEAP(A);
    for (int i = A.length-1; i >= 1; i--) {
        int temp = A[0];
        A[0] = A[i];
        A[i] = temp;
        heapSize = heapSize-1;
        HEAPIFY(A,0);
    }
} 
```

这必须排序，但是当我在调用 heapsort 后尝试遍历数组时，它不会给出排序后的数组。任何想法如何修复堆排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:53:39.987

Parent(i) 返回 Math.floor(i/2)

=> Parent(i) 返回 Math.floor((i - 1) / 2)

左（i）返回 2i

=> 左（i）返回 2i + 1

右(i) 返回 2i+1

=> Right(i) 返回 2i + 2

您可以通过摆弄（这就是我实际上所做的）或考虑 j = i - 1 来解决这个问题。

如果 i' = 2 i 和 j = i - 1 所以 i = j + 1

j' = i' - 1 = (2i) - 1 = (2(j + 1)) - 1 = 2j + 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:12:37.983

if you want to start form index 1,then you can initialize the array like this: [-x,16,14,10,8,7,9,3,2,4,1] -x is the array[0],in other words,you can ignore the element which is in array[0].

if you want to start form index 0,then you have to modify the function LEFT(i) and RIGHT(i).

> LEFT(i) return 2*i+1;
> 
> RIGHT(i) return 2*i+2;

# c++ - 在大型 C++ 项目中使用 vim 进行编码

> ID：11131195
> 
> 赞同：14
> 
> 时间：2012-06-21T03:40:42.153
> 
> 标签：c++, vim

是否有任何 VIM 插件可用于索引 C++ 项目代码库？

我会欣赏功能，例如能够指定一个类，并且可能是一个方法，并查看该方法/类定义的文件/行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-21T12:21:20.010

**关于代码导航（和完成）**，

我会看一下[clang_indexer](http://blog.wuwon.id.au/2011/10/vim-plugin-for-navigating-c-with.html)（和[clang_complete](https://github.com/Rip-Rip/clang_complete)）——ctag 对 C++ 代码的理解相当糟糕，但是universal-ctags 大大改善了这种情况；cscope 对 C++ 的理解是不存在的。

**关于 C++ 编码的插件**，

我有一套[C 和 C++ 编程](https://github.com/LucHermitte/lh-cpp)套件。它主要面向 C++ 编程，但也有一些独特的功能也可以在 C 中使用：

*   [上下文相关的片段](https://github.com/LucHermitte/lh-cpp/blob/master/doc/snippets.md)（它们需要我正在维护的其他插件）；
*   一种从其声明中跳转到函数定义的方法（或者如果它还不存在则动态创建它）（它曾经需要插件替代，这是必须的，但是我已经[为](https://github.com/LucHermitte/alternate-lite)我的自己的需要) -> `:GOTOIMPL`;
*   一个小工具，列出了有声明但没有定义的函数，或有定义但没有声明的函数（注意：我还没有将它用于 C 静态函数）（它需要 ctags）。
*   `:Override`搜索可覆盖函数
*   [`:DOX`](https://github.com/LucHermitte/lh-cpp/blob/master/doc/Doxygen.md)分析 C++ 函数签名以生成适当的（可定制的）doxygen 注释（使用 \param、\throw、...）
*   包含定义光标下符号的头文件的映射*（需要最新的 ctags 库）
*   和其他几件事

否则，我也使用：

*   像 project/ [local_vimrc](https://github.com/LucHermitte/local_vimrc)这样的插件，以便有[项目特定的设置](https://stackoverflow.com/questions/623605/c-vim-ide-things-youd-need-from-it/626698#626698)；
*   [searchInRuntime](https://github.com/LucHermitte/SearchInRuntime)无需浏览当前项目的目录即可打开/跳转到文件；
*   一个[重构插件](https://github.com/LucHermitte/vim-refactor)（仍然缺少一些东西......）；
*   :make 的包装器，用于进行后台编译，并过滤 &makeprg 结果（例如 cygwin posix 形式和 dos 形式之间的路径名转换；STLfilt 的应用程序等）（-> [BuildToolWrapper](https://github.com/LucHermitte/vim-build-tools-wrapper)，它是稳定的，但仍处于 alpha 阶段) ;
*   以及已经提到的其他一些内容（alternate，ctags，...）。

**其他插件。**

其他人使用 c.vim、其他模板系统（snipmate & co）、pyclewn（我强烈建议从 vim 中调试（使用 gdb））、其他括号环绕和扩展系统，...

PS：我在[quora](https://www.quora.com/How-to-build-vim-editor-in-Linux-into-an-effective-C++-programming-IDE/answer/Luc-Hermitte)上回答了一个关于同一主题的问题，但略有不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T04:50:06.277

`cscope`是一个不错的浏览工具。[这里](http://cscope.sourceforge.net/cscope_vim_tutorial.html)有很好的教程。

`ctags`是另一个不错的工具，我在我的项目中使用它。教程[在这里](http://ctags.sourceforge.net/)。如果您在 Ubuntu 中，则可以`ctags`通过以下方式安装：

`apt-get install exuberant-ctags`

[gtags](http://www.gnu.org/software/global/)是另一个工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T08:12:43.813

我广泛使用[taglist](http://vim-taglist.sourceforge.net/)。

> > > “标签列表”插件是 Vim 编辑器的源代码浏览器。它概述了源代码文件的结构，并允许您有效地浏览不同编程语言的源代码文件。它是 Vim 编辑器中评价最高和下载次数最多的插件。

# git - 撤消 git update-index --skip-worktree

> ID：11131197
> 
> 赞同：180
> 
> 时间：2012-06-21T03:40:58.523
> 
> 标签：git, undo

不久前，我这样做是为了忽略对 git 跟踪的文件的更改：

```
git update-index --skip-worktree <file> 
```

现在我实际上想将该文件的更改提交到源。如何撤消 的影响`skip-worktree`？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-06-21T03:43:17.760

啊哈！我只是想要：

```
git update-index --no-skip-worktree <file> 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-26T15:59:50.353

根据[http://www.kernel.org/pub/software/scm/git/docs/git-update-index.html](http://www.kernel.org/pub/software/scm/git/docs/git-update-index.html)，使用

`git ls-files -v`

查看标有特殊字母的“假设不变”和“跳过工作树”文件。“skip-worktree”文件标有`S`.

**编辑**：正如[@a​​macleod](https://stackoverflow.com/users/447862/amacleod)提到的，创建一个别名来列出所有隐藏文件是一个很好的技巧，这样你就不需要记住它了。我`alias hidden="git ls-files -v | grep '^S'"`在我的 .bash_profile 中使用。效果很好！

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-12-31T22:02:52.170

如果要撤消所有应用跳过工作树的文件，可以使用以下命令：

```
git ls-files -v | grep -i ^S | cut -c 3- | tr '\012' '\000' | xargs -0 git update-index --no-skip-worktree 
```

1.  `git ls-files -v`将打印所有文件及其状态
2.  `grep -i ^S`将过滤文件并仅选择跳过工作树 (S) 或跳过工作树并假设未更改 (s)，-i 表示忽略大小写敏感
3.  `cut -c 3-`将删除状态并只留下路径，从第 3 个字符切到末尾
4.  `tr '\012' '\000'`将行尾字符 (\012) 替换为零字符 (\000)
5.  `xargs -0 git update-index --no-skip-worktree`将所有由零字符分隔的路径传递`git update-index --no-skip-worktree`给撤消

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-03-26T21:02:39.873

对于所有喜欢 Bash 别名的人，这是我的一套来统治它们（基于 C0DEF52）

```
alias gitskip='git update-index --skip-worktree ' #path to file(s)
alias gitlistskiped='git ls-files -v | grep ^S'
alias gitunskip='git update-index --no-skip-worktree ' #path to file(s)
alias gitunskipall='git ls-files -v | grep -i ^S | cut -c 3- | tr ''\\012'' ''\\000'' | xargs -0 git update-index --no-skip-worktree' 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-07-10T09:19:25.767

基于@GuidC0DE 的回答，这是 Powershell 的一个版本（我使用[posh-git](http://dahlbyk.github.io/posh-git/ "时髦的混帐")）

```
git update-index --no-skip-worktree $(git ls-files -v | sls -pattern "^S"| %{$_.Line.Substring(2)}) 
```

并且作为参考还有隐藏文件的相反命令：

```
git update-index --skip-worktree $(git ls-files --modified) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-01-25T00:50:44.823

对于那些使用 Tortoise Git 的人：

1.  右键单击文件夹或特定文件，然后选择`TortoiseGit > Check for modifications`
2.  只检查`Show ignore local changes flagged files`. 您应该会看到您忽略的文件（或您忽略的所有文件，如果您右键单击该文件夹）
3.  右键单击文件并选择`Unflag as skip-worktree and assume-unchanged`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-24T08:31:51.713

此答案针对使用 Windows 的技术含量较低的人。

如果您不记得/不知道您在哪些文件上单击了“skip-worktree”，请使用：

```
git ls-files -v             //This will list all files, you are looking for the ones with an S at the beginning of the line. 

git ls-files -v | grep "S " //Use this to show only the lines of interest. Those are the files that have "skip-worktree". 
```

**要解决您的问题：**

您可以转到文件->右键单击->恢复到以前的版本->单击顶部的“git”选项卡->取消选中“skip-worktree”复选框->单击底部的“应用”。

如果文件太多而无法手动修复，那么您需要参考其他答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-06T19:19:51.057

如果您是 PowerShell 用户，这里有一些受 @yossico 的 bash 别名启发的函数（别名）

```
<#
Command: gitskipped
Description: List skipped files in git
Usage: gitskipped
#>
function gitskipped {
  (git ls-files -v $args) -split "\r\n" | Select-String -Pattern '^S ' | ForEach-Object {
    Write-Output $_.Line.Substring(2)
  }
}

<#
Command: gitskip
Description: Mark file(s) as "skip-worktree" in git
Usage: gitskip .env
#>
function gitskip {
  git update-index --skip-worktree $args
}

<#
Command: gitunskip
Description: Unmark file(s) as "skip-worktree" in git
Usage: gitunskip .env
#>
function gitunskip {
  git update-index --no-skip-worktree $args
}

<#
Command: gitunskipall
Description: Unmark all skipped files in git
Usage: gitunskipall
#>
function gitunskipall {
  $files = @((git ls-files -v $args) -split "\r\n" | Select-String -Pattern '^S ' | ForEach-Object { $_.Line.Substring(2) })
  git update-index --no-skip-worktree $files
} 
```

# ruby-on-rails - 设计中未定义的方法“名称” - 添加自定义字段

> ID：11131201
> 
> 赞同：0
> 
> 时间：2012-06-21T03:41:35.730
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在尝试将该字段添加`"name"`到设计中，但是当我注册一个新用户时，它会在我推送提交时中断。

我已确保运行`rake db:migrate`并重新启动服务器，但出现此**错误**：

> **设计中的 ActiveRecord::StatementInvalid::RegistrationsController#create**
> 
> NoMethodError：nil 的未定义方法“名称”：NilClass：插入“用户”（“created_at”、“current_sign_in_at”、“current_sign_in_ip”、“email”、“encrypted_pa​​ssword”、“last_sign_in_at”、“last_sign_in_ip”、“name”、 “pic_file_name”、“remember_created_at”、“reset_password_sent_at”、“reset_password_token”、“sign_in_count”、“title”、“updated_at”） 值（1 美元、2 美元、3 美元、4 美元、5 美元、6 美元、7 美元、8 美元、9 美元、10 美元， 11 美元、12 美元、13 美元、14 美元、15 美元）返回“id”

**用户类**

```
 class User < ActiveRecord::Base
  has_and_belongs_to_many :roles

    devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

    attr_accessible :email, :password, :password_confirmation, :remember_me, :role_ids, :name, :title, :pic_file_name
    has_one :picture, :dependent => :destroy
    accepts_nested_attributes_for :picture, :allow_destroy => true
    has_many :comments, :dependent => :destroy
    has_many :discussions, :dependent => :destroy

    def role?(role)
      roles.map(&:name).include? role.to_s
    end

  end 
```

**图式**

```
 create_table "users", :force => true do |t|
t.string   "email",                  :default => "", :null => false
t.string   "encrypted_password",     :default => "", :null => false
t.string   "reset_password_token"
t.datetime "reset_password_sent_at"
t.datetime "remember_created_at"
t.integer  "sign_in_count",          :default => 0
t.datetime "current_sign_in_at"
t.datetime "last_sign_in_at"
t.string   "current_sign_in_ip"
t.string   "last_sign_in_ip"
t.datetime "created_at",                             :null => false
t.datetime "updated_at",                             :null => false
t.string   "name"
t.string   "title"
t.string   "pic_file_name"
  end 
```

**新注册视图**

```
<%= simple_form_for(resource, :as => resource_name, :html => { :multipart => true }, :html => { :class => 'form-horizontal' }, :url => registration_path(resource_name)) do |f| %>
  <%= f.error_notification %>
  <div class="row">
    <div class="span12 rounded-corners shadow inputs registration">
      <div class="row">
        <div class="span6">
          <h1>Join the Club</h1>
            <%= f.input :email, :required => true, :autofocus => true, :input_html => { :class => "span4" } %>
            <%= f.input :password, :required => true, :input_html => { :class => "span4" } %>
            <%= f.input :password_confirmation, :required => true, :input_html => { :class => "span4" } %>
            <%= f.input :name, :required => true, :input_html => { :class => "span4" } %>

            <%= f.input :title, :required => true, :input_html => { :class => "span4" } %>
            <%= f.input :pic_file_name, :as => :file, :label => "Upload Profile Picture", :required => true %>
        </div>
        <div class="span6 .hidden-phone ">
          <%= image_tag "signup.png", :class => "rounded-corners shadow signup_pic" %>
        </div>
      </div>

      <div class="row">
        <div class="signup_actions span3">
          <%= f.button :submit, "Sign up", :class => 'btn-warning btn-large' %></br >
          <%= render "links" %>
        </div>
      </div>

    <% end %>

  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:15:19.767

`attr_accessible:`在用户类中添加名称。

# php - 使用 PHP 进入文件的可用元信息有哪些？

> ID：11131202
> 
> 赞同：0
> 
> 时间：2012-06-21T03:42:02.033
> 
> 标签：php, html, meta-tags

我正在为一个检索文件**元信息**的 PHP 项目工作。我只知道文件名、文件大小、修改日期。

有人知道我可以使用 PHP 进入文件的其他元信息吗？如果有，你会写下 PHP 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:46:02.767

如果您要求元标记信息，请使用`get_meta_tags()`检索所有元信息。

```
<?php
// Assuming the above tags are at www.example.com
$tags = get_meta_tags('http://www.example.com/');

// Notice how the keys are all lowercase now, and
// how . was replaced by _ in the key.
echo $tags['author'];       // name
echo $tags['keywords'];     // php documentation
echo $tags['description'];  // a php manual
echo $tags['geo_position']; // 49.33;-86.59
?> 
```

**新编辑**——

对于文件信息，您可以使用`fstat()`方法--

> fstat — 使用打开的文件指针获取有关文件的信息

```
<?php
// open a file
$fp = fopen("/etc/passwd", "r");

// gather statistics
$fstat = fstat($fp);

// close the file
fclose($fp);

// print only the associative part
print_r(array_slice($fstat, 13));
?> 
```

`OUTPUT`-

```
Array
(
    [dev] => 771
    [ino] => 488704
    [mode] => 33188
    [nlink] => 1
    [uid] => 0
    [gid] => 0
    [rdev] => 0
    [size] => 1114
    [atime] => 1061067181
    [mtime] => 1056136526
    [ctime] => 1056136526
    [blksize] => 4096
    [blocks] => 8
) 
```

# javascript - KineticJS - 有什么方法可以重复图像？

> ID：11131203
> 
> 赞同：0
> 
> 时间：2012-06-21T03:42:07.443
> 
> 标签：javascript, html, canvas, kineticjs

我已经切换到 kineticJS，我正在尝试让背景图像重复。这是我正在使用的代码：

```
var background_image = new Image();
background_image.onload = function() {
    var image = new Kinetic.Image({
        image: background_image,
        width: this.width,
        height: this.height
    });
    mainLayer.add(image);
    stage.add(mainLayer); // now mainLayer is available
}; 
```

现在我想做的基本上就是本教程所做的： [http](http://www.html5canvastutorials.com/tutorials/html5-canvas-patterns-tutorial/) ://www.html5canvastutorials.com/tutorials/html5-canvas-patterns-tutorial/ ：

![在此处输入图像描述](../Images/5601f1a8d6b1f0ffc4105511d1604fd1.png)

该教程使用画布/上下文对象来重复图像。我在文档中找不到图像重复，所以我想知道是否可以访问我的舞台（或图层？）的主要上下文元素，然后使用类似于教程的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T03:03:49.977

尝试使用带有图像填充的 Rect。默认情况下重复图像填充。这是一个例子：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/)

您还可以更改图案重复类型、使用偏移和缩放图案图像

干杯!

# javascript - 使用 unicode 运算符符号作为名称的 Javascript 函数？

> ID：11131206
> 
> 赞同：0
> 
> 时间：2012-06-21T03:42:55.850
> 
> 标签：javascript

我在看这个：[哪些字符对 JavaScript 变量名有效？](https://stackoverflow.com/questions/1661197/valid-characters-for-javascript-variable-names)

我有一个想法，我无法决定这是否是个好主意......

假设您有一些对象，例如**Vector** (x, y, z)：

```
Vector = (function() {
  function Vector(x, y, z) {
    this.x = x != null ? x : 0;
    this.y = y != null ? y : 0;
    this.z = z != null ? z : 0;
    if (isNaN(this.x) || isNaN(this.y) || isNaN(this.z)) {
      throw new Error("Vector contains a NaN");
    }
  }

  return Vector;
})(); 
```

并且您想添加一些**Vector**，可能具有如下功能：

```
this.add = function(v) {
  return new Vector(this.x + v.x, this.y + v.y, this.z + v.z);
}; 
```

将加法函数声明为`this["\u002b"] = function...`（或什至只是`this["+"] = function...`）并像这样使用它会很糟糕还是很棒：

```
var v1 = new Vector(1, 2, 3)
var v2 = new Vector(2, 3, 4) 
var v3 = v1["+"](v2) 
```

显然，对于*"add"*，在代码大小方面没有实际收益（我认为它可能比 v1.add(v2) 更具可读性，但诸如*"multiply"*之类的东西会是，

```
var v1 = new Vector(1, 2, 3);
v1["×"](2); 
```

或对于其他对象，例如*“集成”*可能是：

```
integrand["∫"](0, 1000) 
```

想法？它是非常精彩，还是非常骇人听闻？跨浏览器的 unicode 字符有多可靠？在 node.js 中使用是否安全？

# c++ - qslider 滑块释放值

> ID：11131208
> 
> 赞同：3
> 
> 时间：2012-06-21T03:43:04.580
> 
> 标签：c++, qt, qslider

我正在尝试制作媒体播放器。使用 QSlider 显示轨道的时间状态。当用户在 QSlider 上的某处释放滑块时，应该会发生寻道。我查看了 QSlider 信号列表。似乎适合的是sliderReleased()，它在用户释放滑块时发生，但它没有得到滑块所在位置的最新值。因此，为了获得滑块的最新值，我使用了 sliderMoved() 并存储了参考。

信号和插槽连接

```
connect(this->ui->songProgress, SIGNAL(sliderMoved(int)), this,
SLOT(searchSliderMoved(int)));
connect(this->ui->songProgress, SIGNAL(sliderReleased()), this,
SLOT(searchSliderReleased())); 
```

功能

```
 void MainWindow::searchSliderMoved(int search_percent)
    {
        value=this->ui->songProgress->value();
        std::cout<<"Moved: Slider value"<<value<<std::endl;
    } 
```

现在我正在使用 searchSliderReleased 中的“值”变量进行搜索

```
void MainWindow::searchSliderReleased()
{
    std::cout<<"Released: Slider value"<<value<<std::endl;

    emit search(value);//seek the track to location value
} 
```

但上述技术的问题在于，sliderMoved 信号没有给出滑块下降的值，但它给出了滑块移动的位置。如何获得滑块掉落的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-03T15:01:34.067

您可以使用`valueChanged(int)`滑块的信号，但设置标志

```
ui->horizontalSlider->setTracking(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T00:01:52.460

刚刚在工作中用 QSlider 构建了一个 DiectShow 媒体播放器。这里有一些关于我是如何做到的插槽片段。

```
Widget::sliderPressed()
{
    if( isPlaying() )
    {
        m_wasPlaying = true;
        pause();
    }
    else
    {
        m_wasPlaying = false;
    }

    // Set a flag to denote slider drag is starting.
    m_isSliderPressed = true;
}

Widget::sliderReleased()
{
    if( m_wasPlaying )
    {
        play();
    }

    m_wasPlaying = false;
    m_isSliderPressed = false;
}

Widget::valueChanged( int value )
{
    if( m_isSliderPressed )
    {
         // Do seeking code here
    }     
    else
    {
         // Sometime Qt when the user clicks the slider 
         // (no drag, just a click) Qt will signals
         // pressed, released, valueChanged. 
         // So lets handle that here.
    }   
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-15T15:45:20.000

有同样的问题并且在处理对我有用时直接打电话`sliderPosition()`而不是直接打电话。`value()``sliderReleased()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-30T20:09:58.063

我更喜欢保存我们的应用程序设置的最后一个值，比如这个伪代码：

```
// Save our last value
lastSoftwareVal = 0;

// Set value from program
slider_set_value(value){
    lastSoftwareVal = value;
    slider.setValue(value)
}

// Slider on change callback
slider_on_change(value){
    if(value == lastSoftwareVal){
        // Value was changed by our app
        return false;
    }
    // User has changed the value, do something
} 
```

# php - 如何将数组传递给 Drupal 菜单回调

> ID：11131209
> 
> 赞同：3
> 
> 时间：2012-06-21T03:43:08.987
> 
> 标签：php, javascript, ajax, drupal, callback

我在 JavaScript 中有两个数组： `var xcoord = [];`经过`var ycoord = [];` 一些处理，每个数组包含 15 个数值。我想将此数据发送到 Drupal 中的菜单回调。

我的 AJAX 代码：

```
$.post('http://mysite.com/?q=menu_example/my_page', 
    {'ycoord[]': ycoord, 'xcoord[]': xcoord }
); 
```

Drupal PHP：

```
$items['menu_example/my_page/%/%'] = array(
    'title' => 'My Page', 
    'description' => 'i hope this works', 
    'page callback' => '_graphael', 
    'page arguments' => array(2, 3), // fill this, 
    'access callback' => true,
    'type' => MENU_CALLBACK,
); 
```

在我的控制台中，我看到 和 的值`xcoord`正在`ycoord`正确传输，但回调并不能正常工作。我的问题：如何将数组传递给菜单回调？我还应该在密钥中使用`%`占位符吗？`$items`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:48:31.713

您传递给的第二个参数`$.post()`未附加到您作为第一个参数传递的 URL；它是传递给 PHP 的数据`$_POST`。

菜单回调的正确定义应该如下。

```
$items['menu_example/my_page'] = array(
  'title' => 'My Page', 
  'description' => 'I hope this works', 
  'page callback' => '_graphael', 
  'access callback' => TRUE,
  'type' => MENU_CALLBACK,
); 
```

然后，您的页面回调应该会在`$_POST`.

# asp.net-mvc-3 - 在 ASP.NET-MVC-3 中手动解析 url

> ID：11131215
> 
> 赞同：0
> 
> 时间：2012-06-21T03:44:11.950
> 
> 标签：asp.net-mvc-3, url

我有一个语法如下的控制器：

`public class CrudController<TEntity> : Controller`

现在如果我需要一个`CrudController`for Entity `User`，我只需要`CrudController`像这样扩展

`UserCrudController : CrudController<User>`

它工作得很好。但是，问题是，`UserCrudController`它只是空的。此外，还有一些其他`CrudControllers`的也是空的。

现在，我正在寻找一种方法来避免编写空的 crud 控制器。我只是想`CrudController`用适当的通用参数创建实例。也许通过如下所述的严格命名约定。

*   URL 将类似于：`@Html.ActionLink("Create", "UserCrud")`
*   当接收到 URL 时，它会尝试定位名为的控制器`UserCrud`（默认的东西）
*   如果找不到`UserCrud`，`Crud<User>`将被创建。

现在，我可以做我想做的事情了。但究竟我在哪里做这些？mvc中解析的url在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:56:49.217

在 Craig Stuntz 对这个问题的评论和[这个](https://stackoverflow.com/questions/568137/adding-a-controller-factory-to-asp-mvc)问题及其接受的答案的帮助下，我解决了我的问题。

我已经实现了一个自定义`CotrollerFactory`

```
public class CrudControllerFactory : DefaultControllerFactory {
    protected override Type GetControllerType(System.Web.Routing.RequestContext requestContext, string controllerName) {
        Type controllerType = base.GetControllerType(requestContext, controllerName);

        if(controllerType == null) {
            int indexOfEntityEnd = controllerName.LastIndexOf("Crud");
            if(indexOfEntityEnd >= 0) {
                string entityName = controllerName.Substring(0, controllerName.Length - indexOfEntityEnd - 1);
                // Get type of the CrudController and set to controller tye
            }
        }

        return controllerType;
    }
} 
```

然后在 中`Application_Start()`，我添加了这一行：

`ControllerBuilder.Current.SetControllerFactory(typeof(CrudControllerFactory));`

# jquery - 选择具有图像的父元素中的所有元素

> ID：11131221
> 
> 赞同：0
> 
> 时间：2012-06-21T03:45:32.927
> 
> 标签：jquery, image, plugins, jquery-selectors

所以我正在编写一个 jQuery 插件来应用视网膜图形。我需要选择一个元素（如果它有背景图像或源图像），然后选择其中的每个元素（如果它有背景图像或源图像）。

这是我的插件：

```
//RetinizeJS
(function($){
    $.fn.retinize = function(){
    $(this).filter(function(){
        if (this.currentStyle) 
            return this.currentStyle['backgroundImage'] !== 'none';
        else if (window.getComputedStyle)
            return document.defaultView.getComputedStyle(this,null)
                .getPropertyValue('background-image') !== 'none';
    }).addClass('bg_found');
    };
})(jQuery);

$('body').retinize(); 
```

如果它具有背景图像，则需要返回 body 元素，如果它们是`<img src="" />`或如果它们具有 CSS`background-image`属性，则需要返回其中的所有元素。

我怎样才能做到这一点？

更新晚上 9 点 13 分：

这不会将类 HAS_IMAGE 添加到任何东西，`<img>`如果我删除它仍然不会选择元素`|| ($this.css('backgroundImage') !== 'none');`。

```
//RetinizeJS
    (function($){
        $.fn.retinize = function(){
            $this = $(this);
            $this.find('*').andSelf().filter(function(){
                return $this.is('img') || ($this.css('backgroundImage') !== 'none');
        }).addClass('HAS_IMAGE');
    };
    })(jQuery);

    $('body').retinize() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:56:15.973

您可以使用 . 检查元素是否具有特定的 CSS 规则值`.css()`。我在想（即未经测试），通过检查`.css('backgroundImage')`，您应该能够检查元素是否具有背景图像，无论它是使用 CSS`background`还是 CSS设置的`background-image`。

您可以使用该知识来设置过滤器功能，如下所示：

```
$(selector).filter(function () {
    var _this = $(this);
    return _this.is('img') || (_this.css('backgroundImage') !== 'none');
}); 
```

您只需要研究如何使用您的插件将其级联到后代中。

但是，如果您必须严格检查*from`<body>`*，那么扩展`$.fn`听起来像是错误的方法。`$.fn`扩展适用于作用于 jQuery 对象的函数，例如`$('body').retinize()`或`$('div img').retinize()`.

您可能希望通过直接扩展来使其成为实用函数，因此您可以通过或其他`$`方式调用它。`$.retinize()`

# android - 无法通过 Android 的 webview 看到 Counchdb

> ID：11131222
> 
> 赞同：0
> 
> 时间：2012-06-21T03:45:33.440
> 
> 标签：android, jquery, webview, couchdb, couchbase

是否可以让 Android WebView 打开如下端口：5984？我需要通过 webview 从“assets-folder”获取[一些 jquery](http://paste.ubuntu.com/1052006/)到 $.get() 我的[counchdb](https://github.com/couchbase/Android-EmptyApp) json-data。

**但首先**我只是做了一个小测试，看看 android 的 webview 是否可以得到 counchdb 的响应：

```
webview.loadUrl("http://127.0.0.1:5984"); 
```

如果我使用 android 的内置浏览器，我会得到：

```
{"couchdb":"Welcome","version":"1.2.0a-7b47329-git"} 
```

但**不是**通过Android的WebView，我只是得到一个空白屏幕（[见代码](http://paste.ubuntu.com/1052009/)）:(

**一点更新：** 我看起来如果我从垂直切换到水平，然后我从 couchdb 获取数据（[见日志](http://pastebin.ubuntu.com/1054079/)）。

*所以也许couchdb需要在它自己的线程中..*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:09:31.333

看起来couchdb必须有一些时间来启动......所以如果你只是把你所有的couchdb请求放在里面，像jquerys onclick（）或keyup（）这样的函数......那么一切都是上帝。

# c# - 使用 ValidationProperty 属性防止 UserControl 的完整回发

> ID：11131223
> 
> 赞同：5
> 
> 时间：2012-06-21T03:45:35.473
> 
> 标签：c#, asp.net, user-controls, validation

`ValidationProperty`我有一个实现该属性的 ASP.NET 用户控件。此属性成功地使我可以将 a`RequiredFieldValidator`用于我的自定义控件，但是在验证时它会导致完整的回发，而不是使用基于客户端 javascript 的验证。

***有没有办法在不使用自定义验证器的情况下防止这种情况并启用客户端验证？***

这就是我的 UserControl 的样子。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ucBooleanRadio.ascx.cs" Inherits="MyCompany.Web.UserControls.ucBooleanRadio" %>

<div class="BooleanRadio">
    <input runat="server" id="radTrue" type="radio" name="BooleanRadio" value="True" /> Yes
    <input runat="server" id="radFalse" type="radio" name="BooleanRadio" value="False" /> No
</div>

[ValidationProperty("Checked")]
public partial class ucBooleanRadio : System.Web.UI.UserControl
{
    public Nullable<bool> Checked
    {
        get
        {
            if (radTrue.Checked || radFalse.Checked)
                return radTrue.Checked;
            else
                return null;
        }
        set
        {
            radTrue.Checked = value != null ? value.Value : false;
            radFalse.Checked = value != null ? !value.Value : false;                    
        }
    }
} 
```

这就是它的使用方式

```
<uc1:ucBooleanRadio ID="ucAgree" runat="server" />
<asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" CssClass="Validator" Display="Dynamic" ControlToValidate="ucAgree" InitialValue="" ErrorMessage="You must agree to continue."></asp:RequiredFieldValidator>

Page.Validate();
if (Page.IsValid)
{
    //Do stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:23:39.740

好的，所以在深入研究了 ASP.NET 字段验证器的体系结构和上面海报的一些指导之后，我终于找到了解决方案。

基本上上面的答案是正确的，除非有一些变化。

首先，为隐藏文本设置的 id 不应在`Name`字段中，而应在`ID`字段中。`Page.UniqueID`此外，在 Hidden 字段中填充的 ID不应该是`Page.ClientID`相关 UserControl 的 ID。

这样做的原因是，当加载包含验证器的页面时，ASP.NET 框架会调用以下函数。

```
function ValidatorHookupControlID(controlID, val) {
    if (typeof (controlID) != "string") {
        return;
    }
    var ctrl = document.getElementById(controlID); //NOTE THIS LINE
    if ((typeof (ctrl) != "undefined") && (ctrl != null)) {
        ValidatorHookupControl(ctrl, val);
    }
    else {
        val.isvalid = true;
        val.enabled = false;
    }
} 
```

框架试图做的是检索一个与所需字段验证器（实际上是 ）中设置`ID`的属性相同的控件。然后，它在其验证功能（无论是RequiredField、Compare、Regex 等）中使用此控件。如果它找到这样的控件，它会启用验证器并针对其值执行验证，如果没有，它只是将验证器设置为禁用。`ControlToValidate``Page.ClientID`

最后我的代码看起来像这样。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ucBooleanRadio.ascx.cs" Inherits="MyCompany.Web.UserControls.ucBooleanRadio" %>

<input id="<% =this.ClientID %>" type="hidden" value="" />
<asp:RadioButton runat="server" ID="radTrue" Text="Yes" GroupName="radio" />
<asp:RadioButton runat="server" ID="radFalse" Text="No" GroupName="radio" />    

<script language="javascript" type="text/javascript">
    $(function (e) {
        $("#<% =radTrue.ClientID %>").click(function (e) {
            $("#<% =this.ClientID %>").val("true");
        });
        $("#<% =radFalse.ClientID %>").click(function (e) {
            $("#<% =this.ClientID %>").val("false");
        });
    });
</script> 
```

并且后面的代码保持不变。希望这可以解释遇到相同问题的任何人所发生的事情的一些奥秘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:56:15.850

对于简单的客户端验证，应该有一个具有相应名称的输入元素，该元素的值将被验证。在您的情况下如何完成的示例：

```
<div class="BooleanRadio">
    <% radTrue.Attributes["onclick"] = "document.getElementsByName('" + UniqueID + "')[0].value='+'"; %>
    <input runat="server" id="radTrue" type="radio" name="BooleanRadio" value="True" /> Yes
    <% radFalse.Attributes["onclick"] = "document.getElementsByName('" + UniqueID + "')[0].value='-'"; %>
    <input runat="server" id="radFalse" type="radio" name="BooleanRadio" value="False" /> No
    <input name="<%= UniqueID %>" type="hidden" value="<%= radTrue.Checked? "+" : radFalse.Checked? "-" : "" %>" />
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T08:25:13.257

事实证明，ASP.NET 并不关心元素标记。
我刚刚查看了验证代码并发现了这个

```
function ValidatorGetValue(id) {
    var control;
    control = document.getElementById(id);
    if (typeof(control.value) == "string") {
        return control.value;
    }
    return ValidatorGetValueRecursive(control);
} 
```

所以

```
<div class="BooleanRadio" id="<%= ClientID %>" value="<%= radTrue.Checked? "true" : radFalse.Checked? "false" : "" %>">
    <% radTrue.Attributes["onclick"] = "document.getElementById('" + ClientID + "').value='true'"; %>
    <% radFalse.Attributes["onclick"] = "document.getElementById('" + ClientID + "').value='false'"; %>
    <input runat="server" id="radTrue" type="radio" name="BooleanRadio" value="True" /> Yes
    <input runat="server" id="radFalse" type="radio" name="BooleanRadio" value="False" /> No
</div> 
```

确实`:\`有效

```
<div class="BooleanRadio" id="<%= ClientID %>">
    <input runat="server" id="radTrue" type="radio" name="BooleanRadio" value="True" /> Yes
    <input runat="server" id="radFalse" type="radio" name="BooleanRadio" value="False" /> No
</div> 
```

并且有事件自动挂钩 - 已验证元素（带有 ClientID 的元素）及其子元素被连接以自动进行验证（查看 ValidatorHookupControl）。
这可能会导致：
1\. 用户做了某事
2\. 执行
了验证 3\. 验证的值被更新（在验证之后！）
div 上有值的第一个例子就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T10:05:38.260

马克西姆，我一直在研究类似的问题。

我发现您不需要 JavaScript，验证器将自动遍历控件以查找已设置的“值”。

您必须使用服务器端 RadioButtons 而不是 HTML

如果您使用的是 CompositeControls，那么它将自动工作

如果您使用的是 Web 用户控件（ascx 文件），它不会使用 ID 包装控件，因此您需要将以下代码添加到您的控件中。

```
<div id='<%=ClientID %>'>

   Your radio button controls here...

</div> 
```

编辑：我刚刚上传了一些快速示例代码。希望这可以帮助！ [示例代码](http://www.centrel-solutions.com/software/samplecode/BooleanSample.zip)

# php - PHP：临时上传的文件什么时候被删除？

> ID：11131226
> 
> 赞同：49
> 
> 时间：2012-06-21T03:46:27.540
> 
> 标签：php, file-upload

我正在运行 WAMP 服务器。在使用 PHP 上传文件时，我看到了

`$_FILES[tmp_name] => string 'C:\wamp\tmp\phpD382.tmp' (length=23)`

我去那个文件夹，它是空的。我确保从我的“文件夹选项”中打开了“显示隐藏文件”，但我没有看到它。它究竟在哪里？

另外什么时候删除？如果我不移动那个文件？例如，如果我正在上传文件并且文件上传到一半，我决定关闭该浏览器，文件会发生什么情况？服务器何时知道删除该临时文件？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-21T03:48:53.717

一旦您的 PHP 脚本完成执行并重新保存到定义的位置

## 使用直接 PHP 的示例，没有框架

[http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)

```
$uploaddir = '/var/www/uploads/';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

echo '<pre>';
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo "File is valid, and was successfully uploaded.\n";
} else {
    echo "Possible file upload attack!\n";
}

echo 'Here is some more debugging info:';
print_r($_FILES);

print "</pre>";

?> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-04T19:51:13.700

如果您不对它们做任何事情，它们将在脚本完成后立即被删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-01T10:48:08.077

如果不需要删除文件，我发现如果您将其“移动”到同一位置，PHP 不会在执行后删除文件。

```
move_uploaded_file($temporaryFile, $temporaryFile); 
```

# wcf-security - 如何在wcf中获取当前windows用户

> ID：11131228
> 
> 赞同：0
> 
> 时间：2012-06-21T03:46:45.547
> 
> 标签：wcf-security

我已经尝试过[来自 stackoverflow 的链接](https://stackoverflow.com/questions/1267071/how-to-get-windows-user-name-when-identity-impersonate-true-in-asp-net)

我有一个 silverlight 客户端和 wcf 服务。该应用程序具有3种身份验证模式

1.  活动目录
2.  Windows 直通
3.  专有的-显然我对这个没有问题。（我真的不知道活动目录和窗口传递之间有什么区别。我只是对两者使用相同的代码，除了窗口传递我得到当前用户和 AD 应用程序提示输入用户名密码）

.

```
private string GetCurrentUser()
{
    try
    {
        string result = WindowsIdentity.GetCurrent().Name;
        WindowsPrincipal wp = new WindowsPrincipal(WindowsIdentity.GetCurrent());
        result = wp.Identity.Name;
        if (result.Contains(@"\"))
        {
            int position = result.LastIndexOf(@"\") + 1;
            result = result.Substring(position);
        }
        return result;
    }
    catch (Exception ex)
    {
        return "";
    }
} 
```

WindowsIdentity 和 WindowsPrincipal 都返回“DefaultAppPool”或当前线程运行的任何 AppPool。甚至 Environment.UserName 返回相同。

当我打开`<identity impersonate ="true"/>`web.config 时，silverlight 客户端无法连接到 wcf。它收到“未找到”错误。所以，我需要保持`<identity impersonate ="false"/>`

我只需要当前登录的用户，我不知道这有这么难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:15:41.810

我将应用程序池上的身份更改为我自己的用户帐户并且它有效。

1.  打开 IIS 控制台
2.  选择应用程序池。
3.  选择 AppPool（在我的例子中是 DefaultAppPool）。
4.  在右侧窗格中单击高级设置。
5.  有不同类别的设置，例如常规、CPU、进程模型。
6.  在Process Model -> Identity下点击右侧输入框，出现一个按钮，点击。
7.  它会打开一个带有 2 个单选按钮（内置帐户和自定义帐户）的对话框。
8.  选择自定义帐户并点击设置。
9.  设置凭据对话框打开。
10.  输入您的凭据并点击确定。您可能需要输入 [域][用户名]
11.  对所有对话框点击确定以关闭所有内容。
12.  现在测试您的应用程序，WindowsIdentity.GetCurrent().Name 应该返回与应用程序池关联的用户名。

# html - 使用 role="list" 和 role="listitem" 的原因？

> ID：11131234
> 
> 赞同：11
> 
> 时间：2012-06-21T03:47:38.063
> 
> 标签：html, list, wai-aria

使用以下代码有什么好处吗？

```
<ul role="list">
    <li role="listitem"></li>
    <li role="listitem"></li>
    <li role="listitem"></li>
</ul> 
```

以下代码对辅助技术是否具有相同的含义？

```
<ul>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-21T04:48:01.973

答案是肯定的，当使用正确的语义标记来构建文档时，辅助技术会很好地工作。如果它是一个简单的静态列表，则不需要用角色标记它们。

例如：考虑将baseConcept 定义为 HTML li的[role="listitem" 。](http://www.w3.org/TR/wai-aria/roles#listitem)baseConcept HTML li 几乎与 role="listitem" 定义相同，只是它不继承任何属性。更多[信息](http://www.w3.org/TR/2010/WD-wai-aria-20100916/roles#baseConcept)

因此，请考虑以下示例：

```
<h3 id="header">Vegetables</h3>
   <ul role="list" aria-labelledby="header" aria-owns="external_listitem">
     <li role="listitem" aria-level="3">Carrot</li>
     <li role="listitem" aria-level="3">Tomato</li>
     <li role="listitem" aria-level="3">Lettuce</li>
   </ul>
…
<div role="listitem" id="external_listitem">Asparagus</div> 
```

在这里，页面作者想为 li 使用 aria-level 属性。尽管 aria-labelledby 和 aria-owns 可以应用于基本标记的所有元素，但[aria-level](http://www.w3.org/TR/wai-aria/states_and_properties#aria-level)属性要求元素具有某种作用。由于 ARIA 规范使用 Web 本体语言 (OWL) 来表示类层次结构中的角色。OWL 将这些角色描述为类以及它们的状态和属性。因此，为了使用 aria 级别的元素，必须定义一些角色，因为纯 HTML li 不会继承任何属性或限制。将角色标记为 listitem 后，它要求 listitem 由具有 role="list" 的元素拥有。所以你最终使用了这两个角色。

另一方面，如果不使用语义标记，角色也很有用。例如：

```
<div role="list">
  <div role="listitem">dog</div>
  <div role="listitem">cat</div>
  <div role="listitem">sparrow</div>
  <div role="listitem">wolf!</div>
</div> 
```

在这里，屏幕阅读器软件会将 ARIA 列表（由 div 组成）指示为任何其他普通 HTML 列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T04:23:51.227

你的问题有点模棱两可，但如果你问添加项目是否有好处，`role="listitem"`已经*将其作为默认角色，那么该特定问题的答案是*“否”。`li`

 *（是的，`li`首选使用 a 而不是 a `div`。`role="listitem"`如果您使用 a ，则需要使用 a `div`。但我认为这并不是您要问的。）

查看[Steve Faulkner 的《使用 ARIA》](https://www.w3.org/TR/aria-in-html/)；他整理了一份关于何时何地在 HTML5 中使用各种 ARIA 角色的最佳实践文档草案。

一般来说，如果该角色与元素的默认角色相同，则不需要（也不应该）为元素指定角色。因此，由于`li`元素的默认`role`值为`listitem`，因此没有理由重申这一点。

这条规则有一些例外，它们主要关注浏览器尚未正确实现默认角色的新 HTML5 元素。因此，例如，由于 HTML5 的`article`元素还没有被所有浏览器公开为具有`role`of `article`，那么`<article role='article'>`实际上在这种情况和类似情况下推荐使用。*

# mysql - MySQL：我可以进行左连接并从连接表中仅拉出一行吗？

> ID：11131237
> 
> 赞同：4
> 
> 时间：2012-06-21T03:47:52.763
> 
> 标签：mysql, query-optimization

我为工作编写了一个自定义帮助台，它一直运行良好……直到最近。一个查询*确实*变慢了。现在大约需要14秒！以下是相关表格：

```
CREATE TABLE `tickets` (
  `id` int(11) unsigned NOT NULL DEFAULT '0',
  `date_submitted` datetime DEFAULT NULL,
  `date_closed` datetime DEFAULT NULL,
  `first_name` varchar(50) DEFAULT NULL,
  `last_name` varchar(50) DEFAULT NULL,
  `email` varchar(50) DEFAULT NULL,
  `description` text,
  `agent_id` smallint(5) unsigned NOT NULL DEFAULT '1',
  `status` smallint(5) unsigned NOT NULL DEFAULT '1',
  `priority` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `date_closed` (`date_closed`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `solutions` (
  `id` int(10) unsigned NOT NULL,
  `ticket_id` mediumint(8) unsigned DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  `hours_spent` float DEFAULT NULL,
  `agent_id` smallint(5) unsigned DEFAULT NULL,
  `body` text,
  PRIMARY KEY (`id`),
  KEY `ticket_id` (`ticket_id`),
  KEY `date` (`date`),
  KEY `hours_spent` (`hours_spent`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

当用户提交票时，它会进入“票”表。然后，当代理解决问题时，他们会记录他们采取的行动。每个条目都进入“解决方案”表。换句话说，门票有很多解决方案。

变慢的查询的目标是从“tickets”表中提取所有字段，以及从“solutions”表中提取最新条目。这是我一直在使用的查询：

```
SELECT tickets.*,
    (SELECT CONCAT_WS(" * ", DATE_FORMAT(solutions.date, "%c/%e/%y"), solutions.hours_spent, CONCAT_WS(": ", solutions.agent_id, solutions.body))
    FROM solutions
    WHERE solutions.ticket_id = tickets.id
    ORDER BY solutions.date DESC, solutions.id DESC
    LIMIT 1
) AS latest_solution_entry
FROM tickets
WHERE tickets.date_closed IS NULL
OR tickets.date_closed >= '2012-06-20 00:00:00'
ORDER BY tickets.id DESC 
```

以下是“latest_solution_entry”字段的示例：

```
6/20/12 * 1337 * 1: I restarted the computer and that fixed the problem. Yes, I took an hour to do this. 
```

在 PHP 中，我拆分了“latest_solution_entry”字段并正确格式化。

当我注意到运行查询的页面速度变慢时，我在没有子查询的*情况*下运行了查询，而且速度非常快。然后我`EXPLAIN`在原始查询上运行并得到了这个：

```
+----+--------------------+-----------+-------+---------------+-----------+---------+---------------------+-------+-----------------------------+
| id | select_type        | table     | type  | possible_keys | key       | key_len | ref                 | rows  | Extra                       |
+----+--------------------+-----------+-------+---------------+-----------+---------+---------------------+-------+-----------------------------+
|  1 | PRIMARY            | tickets   | index | date_closed   | PRIMARY   | 4       | NULL                | 35804 | Using where                 |
|  2 | DEPENDENT SUBQUERY | solutions | ref   | ticket_id     | ticket_id | 4       | helpdesk.tickets.id |     1 | Using where; Using filesort |
+----+--------------------+-----------+-------+---------------+-----------+---------+---------------------+-------+-----------------------------+ 
```

所以我正在寻找一种方法来提高我的查询效率，但仍能实现相同的目标。有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T08:18:48.570

让我总结一下我的理解：您想选择每张票及其最后的解决方案。

我喜欢对这类问题使用以下模式，因为它避免了子查询模式，因此在需要性能的地方相当不错。缺点是理解起来有点棘手：

```
SELECT
  t.*,
  s1.*
FROM tickets t
INNER JOIN solutions s1 ON t.id = s1.ticket_id
LEFT JOIN solutions s2 ON s1.ticket_id = s2.ticket_id AND s2.id > s1.id
WHERE s2.id IS NULL; 
```

为了更好地理解，我只写了模式的核心。

关键是：

*   表的 LEFT JOIN`solutions`与自身的`s1.ticket_id = s2.ticket_id`条件：它模拟`GROUP BY ticket_id`.

*   条件`s2.id > s1.id`：它是“我只想要最后一个解决方案”的 SQL，它模拟`MAX()`. 我假设在您的模型中，`the last`意味着`with the greatest id`但您可以在此处使用日期条件。请注意，这`s2.id < s1.id`将为您提供第一个解决方案。

*   WHERE 子句`s2.id IS NULL`：最奇怪但绝对必要的子句……只保留您想要的记录。

试一试，让我知道:)

**编辑1：**我刚刚意识到第二点假设过于简单化了问题。这使它变得更加有趣：p 我正在尝试了解这种模式如何与您的`date, id`订单一起使用。

**编辑2：**好的，稍微扭曲一下效果很好。LEFT JOIN 的条件变为：

```
LEFT JOIN solutions s2 ON s1.ticket_id = s2.ticket_id
  AND (s2.date > s1.date OR (s2.date = s1.date AND s2.id > s1.id)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:55:47.697

当您在 SELECT 子句中有一个内联视图时，它必须为每一行执行该选择。我发现在这种情况下最好在 FROM 子句中放置一个内联视图，而不是执行一次选择。

```
SELECT t.*, 
       Concat_ws(" * ", Date_format(s.date, "%c/%e/%y"), s.hours_spent, 
       Concat_ws(":", s.agent_id, s.body)) 
FROM   tickets t 
       INNER JOIN (SELECT solutions.ticket_id,
                          Max(solutions.date) maxdate 
                   FROM   solutions 
                   GROUP  BY solutions.ticket_id) last_solutions 
               ON t.id = last_solutions.ticket_id
       INNER JOIN (SELECT solutions.ticket_id,
                          solutions.date,
                          Max(solutions.id) maxid 
                   FROM   solutions 
                   GROUP  BY solutions.ticket_id,
                            solutions.date) last_solution
              ON last_solutions.ticket_id = last_solution.ticket_id 
                 and last_solutions.maxDate = last_solution.Date
       INNER JOIN solutions s 
               ON last_solution.maxid = s.id
WHERE  t.date_closed IS NULL 
        OR t.date_closed >= '2012-06-20 00:00:00' 
ORDER  BY t.id DESC 
```

注意：根据您的需要，您可能需要将其设为 LEFT join

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T04:06:18.107

尝试这个：

```
SELECT *
FROM (
  -- for each ticket get the most recent solution date
  SELECT ticket_id, MAX(solutions.date) as date
  FROM solutions
  GROUP BY ticket_id
) t
JOIN tickets ON t.ticket_id = tickets.id
WHERE tickets.date_closed IS NULL OR tickets.date_closed >= '2012-06-20 00:00:00'
ORDER BY tickets.id DESC 
```

请注意，如果有一张包含 2 个同一日期的解决方案的票证，您的结果集中将有重复的记录。您将需要另一个连接来删除这些重复项或使用绝对序列，如序列（递增主键）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-30T09:41:43.017

根据目的，我给出一个想法：

```
SELECT DISTINCT s1.ticket_id, t.*,  s1.*
FROM tickets t
LEFT JOIN solutions s1 ON t.id = s1.ticket_id 
```

# php - 如何使用 spl_autoload_register？

> ID：11131238
> 
> 赞同：20
> 
> 时间：2012-06-21T03:47:55.403
> 
> 标签：php, spl-autoload-register

```
class Manage
{

spl_autoload_register(function($class) {
    include $class . '.class.php';
});
} 
```

假设我有一些类似上面的代码。我选择使用加载类的匿名函数方法，但是这个是怎么用的呢？它究竟如何确定`'$class'`要加载哪个？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-21T03:51:37.417

你不能把代码放在那里。您应该在课后添加 SPL 寄存器。如果你想在`Manage`类中注册一个函数，你可以这样做：

```
class Manage {
    public static function autoload($class) {
        include $class . '.class.php';
    }
}

spl_autoload_register(array('Manage', 'autoload')); 
```

但是，正如您所演示的，您可以使用匿名函数。你甚至不需要上课，所以你可以这样做：

```
spl_autoload_register(function($class) {
    include $class . '.class.php';
}); 
```

无论哪种方式，您指定的函数都会添加到负责自动加载的函数池中。您的函数已附加到此列表中（因此，如果列表中已经有任何函数，则您的函数将是最后一个）。有了这个，当你做这样的事情时：

```
UnloadedClass::someFunc('stuff'); 
```

PHP 将意识到 UnloadedClass 还没有被声明。然后它将遍历 SPL 自动加载函数列表。它将使用一个参数调用每个函数：`'UnloadedClass'`. 然后在调用每个函数后，它会检查该类是否存在。如果没有，它会继续直到到达列表的末尾。如果该类从未加载，您将收到一个致命错误，告诉您该类不存在。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-21T03:51:33.910

> 它究竟是如何确定要加载哪个“$class”的？

由`$class`php 自动传递。它是尚未声明的类的名称，但在运行时某处使用

# ios - 如何在多个 Corona SDK 应用程序之间共享通用代码？

> ID：11131244
> 
> 赞同：1
> 
> 时间：2012-06-21T03:48:40.867
> 
> 标签：ios, mobile, version-control, lua, coronasdk

我正在开发一组用 Corona SDK 编写的应用程序，它们应该共享其代码的某些部分。将有共同的类/方法以及共同的场景。

我不想只**复制**这些文件（因为[DRY](http://pl.wikipedia.org/wiki/DRY)），所以一个自然的问题是 - 如何组织我的源代码结构，以便我仍然可以在单个项目中引用公共代码。

我能想到的一种方法是拥有一个包含公共代码的单独目录并将其*符号链接*到每个项目，如下所示：

```
DEV
|
+ -- commons
| 
- -- project1
|  |
|  - (link)commons
|  - class1.lua
|  - main.lua
|
 - -- project2
   |
   - (link)commons
   - main.lua 
```

但这是一个好方法吗？在构建这样有组织的项目时，我不会遇到一些奇怪的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:12:48.173

也许您应该考虑使用版本控制系统，并根据需要将文件拉到您的每个项目中。Git 这些天似乎很流行。[GitHub](https://github.com/)可能是一个不错的起点。

**编辑**

[Corona Project Manager](http://coronaprojectmanager.com/)可以为所欲为，一目了然，它可以跨项目共享资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:52:27.087

每个 Corona 应用程序都是一个单独的沙盒应用程序。

因此，AFAIK 无法在应用程序之间共享代码。

# wordpress - 在循环中组合 2 个 Wordpress While 语句

> ID：11131257
> 
> 赞同：0
> 
> 时间：2012-06-21T03:50:28.723
> 
> 标签：wordpress, post, loops

我只想在属于已登录用户的 wordpress 页面上显示帖子并包含自定义元键“颜色”。我有每个选项的代码，即我可以显示属于已登录用户的帖子或带有元键 = 颜色的帖子，但我无法弄清楚如何将两者结合起来，因此这两个条件都必须为真。以下是我正在使用的两段代码：

```
<!-- If Logged In -->
<?php       
if ( is_user_logged_in() ):
global $current_user;
get_currentuserinfo();
$author_query = array('posts_per_page' => '-1','author' => $current_user->ID);
$author_posts = new WP_Query($author_query);
while($author_posts->have_posts() : $author_posts->the_post(); 
get_template_part( 'content', 'page', 'the_meta()' );
?>

<!-- If Posts Contains Color Meta -->
<?php
$the_query = new WP_Query('meta_key=color');
while ($the_query->have_posts() ) : $the_query->the_post();
endwhile;
?> 
```

有谁知道如何组合它们以便显示符合这两个条件的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:04:23.990

像这样的东西应该工作：

```
<?php
    if ( is_user_logged_in() ) :   
        global $current_user;
        get_currentuserinfo();

       $query = array('posts_per_page' => '-1','author' => $current_user->ID, 'meta_key' => 'color');
       $result = new WP_Query($query);

       while ($result->have_posts()) : $result->the_post(); 
           get_template_part( 'content', 'page', 'the_meta()' );
       endwhile;
    endif;
?> 
```

# android - PhoneGap SplashScreen - 飞溅无法解析或不是字段

> ID：11131258
> 
> 赞同：2
> 
> 时间：2012-06-21T03:50:32.337
> 
> 标签：android, cordova, splash-screen

我想在我的 android 应用程序上制作一个闪屏，我使用 phonegap。

这是我的 main.java 代码：

公共类 App 扩展 DroidGap {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/index.html",5000);
} 
```

}

但我收到一个错误：“飞溅无法解决或不是字段”

我已将 splash.png 放在每个可绘制目录上，但错误仍然存​​在..

有人可以帮助我吗？提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:24:37.903

我认为在您的情况下超时参数存在问题，`5000`并且已在 phonegap 1.6.0 版本中修复，这就是您无法正常工作的原因：

这些链接证实

[如何使用 OpenStreetMap/OpenLayers？](https://stackoverflow.com/questions/8100219/how-to-use-openstreetmap-openlayers/8101460#8101460)

[phonegap - Android 应用程序的启动画面](https://stackoverflow.com/questions/8156841/phonegap-splash-screen-for-android-app)

尝试使用最后一个电话间隙版本（1.8.1），你会得到它的工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T16:12:25.353

只需按屏幕更改单词飞溅：

```
super.setIntegerProperty("splashscreen", R.drawable.screen); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:57:44.777

我遇到了类似的问题。我重命名了扩展核心 DroidGap 类的包。我的解决方案是由这个解决方案修复的：[http](http://www.youtube.com/watch?v=3CHRujojc2o) ://www.youtube.com/watch?v=3CHRujojc2o 。简而言之，确保更新您在 AndroidManifest.xml 文件中的引用以指向新的包名称。

# regex - 正则表达式逗号分隔或空字符串

> ID：11131259
> 
> 赞同：0
> 
> 时间：2012-06-21T03:50:38.800
> 
> 标签：regex, comma

我正在尝试使用逗号分隔的字符串列表（特定形式）或空来验证字段。我不能使用拆分。

我设法为单个字符串设置了常规 exp。

我只想实现逗号分隔（之前和之后有空格，可能是）或有空字符串。如果它不为空，则它必须具有特定的字符串格式。此处如果输入了多个字符串，则应使用逗号。

字符串格式为

```
 ^([a-z_\.\-])+\@(([a-z\-])+\.)+([a-z]{2,4})+$ 
```

请帮助我添加逗号分隔和整个空字符串。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:15:13.597

试试这个表达

```
/^$|^([a-z_\.\-])+\@(([a-z\-])+\.)+([a-z]{2,4})+(\s*,\s*([a-z_\.\-])+\@(([a-z\-])+\.)+([a-z]{2,4})+)*$/ 
```

模式是`^$|^string(,string)*$`

# php - selecting mysql data inside an array with PDO fetchAll

> ID：11131260
> 
> 赞同：-1
> 
> 时间：2012-06-21T03:50:58.293
> 
> 标签：php, mysql, arrays, json, pdo

I'm trying to get a certain data from mysql with fetchAll.

I currently have this:

```
$sql1= $dbh->query("SELECT * FROM information");
$comments= $dbh->prepare("SELECT * FROM comments WHERE idinformation= ?");
if($retail){
while($row = $retail -> fetch(PDO::FETCH_ASSOC)){
  $comments->execute(array($row['idproducts']));
  $json['data'][] = array(
     'id'=>$row['idproducts'],
     "headline"=>$row['headline'],
     'price'=> array ("full_price" => $row['full_price']),
     'description'=>$row['description'],
     "comments" => $comments->fetchAll(PDO::FETCH_ASSOC)
);
}
$json_encode = json_encode($json);
$obj = json_decode($json_encode,true);  
} 
```

My comments is output all the columns in my database. What if I only want comments,time,id,etc... how would I distinguish this in this syntax?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:12:55.703

When querying a SQL database, `SELECT` statements should also include a list of columns you want returned. This not only saves time because the SQL database doesn't have to retrieve a list of columns on each query, but it requires you to think about what you need. In your case, if you only want: `comments`, `time`, `id` then you should specify it:

```
$comments= $dbh->prepare("SELECT id, time FROM comments WHERE idinformation= ?"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:13:15.250

Change the line

```
$comments= $dbh->prepare("SELECT * FROM comments WHERE idinformation= ?"); 
```

to

```
$comments= $dbh->prepare("SELECT comments,time,id FROM comments WHERE idinformation= ?"); 
```

* * *

Edit:

Alternatively use group_concat(comments time id, ', ') in a single SQL query. You could do this as a single "JOIN"ed query, and group_concat the comments if you can get the separator you need. Everything is then done SQL-side = faster.

Documentation: [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# java - Java 层次结构和访问级别

> ID：11131268
> 
> 赞同：-1
> 
> 时间：2012-06-21T03:51:39.707
> 
> 标签：java

在我的 java 应用程序中，我想解决以下场景

```
class C {

}

Class A extends C {
    public A() {
        B objB=new B(this);
        objB.methodA();
    }

    public void methodX() {

    }
}

Class B {
    private A objA;
    public B(A a) {
        objA=a; 
    }
    public void methodA() {
        objA.methodX()
    }
} 
```

是否可以从 B 类调用 A 的 methodX()。当我编译代码时，objA(在 B 类中) 只能访问 C 类方法？是否存在解决上述情况的替代方法？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:02:21.903

除了您尝试做的事情毫无意义并且代码很奇怪之外，它在语义上没有任何问题。我只是像下面这样尝试过。

```
package com.test;

public class So {

    /**
     * @param args
     */
    public static void main(String[] args) {
        A a = new A();
        B b = new B(a);
        b.methodA();

    }

}

class A extends C {

    public A() {

        B objB = new B(this);
        objB.methodA();
    }

    public void methodX() {

    }

}

class B {

    private A objA;

    public B(A a) {

        objA = a;

    }

    public void methodA() {

        objA.methodX();

    }
}

class C {

} 
```

* * *

这是`main(String[] args)`方法的另一个变体：

```
public static void main(String[] args) {        
        C ca = new A();
        B b2 = new B((A)ca); // This is typcasting
        b2.methodA();

    } 
```

# dojo - Rendering dynamically added dijit elements in dojo

> ID：11131269
> 
> 赞同：0
> 
> 时间：2012-06-21T03:51:48.040
> 
> 标签：dojo, dijit.form

I have dynamically added a select box of dijit.form.filteringSelect type into my page. I have called an ajax request on some button click and the content returned from the ajax request contains select box of dijit.form.filteringSelect. The select box shows up but does not appear as a dijit element.It shows up as a normal html select box without dijit style of select box. My page is something like this:

```
<head>
<style type="text/css">
    @import "dojo-1.7/dijit/themes/claro/claro.css";
    @import "dojo-1.7/dojo/resources/dojo.css";
    @import "dojo-1.7/dojox/grid/resources/claroGrid.css";
</style>
<script type="text/javascript" src="dojo-1.7/dojo/dojo.js" data-dojo-config="parseOnLoad: true"></script>
<script type="text/javascript">
    dojo.require("dijit.form.FilteringSelect");
</script>
</head>
<body class="claro">
//ajax output appended to body after some button click
 <select id="testSelect" data-dojo-type="dijit.form.filteringSelect">
     <option value="">...</option>
 </select>
</body> 
```

I think the problem is rendering. How can I render dijit element when they are added dynamically using server side script like php in my case. Have I done the parsing correctly?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:06:52.503

If you know the id of the new node, you can call the dojo parser for just that node.

```
dojo.parser.parse("testSelect"); 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/parser.html#examples](http://dojotoolkit.org/reference-guide/1.7/dojo/parser.html#examples)

# jquery - 正则表达式在 jquery 中无法用于表单验证

> ID：11131271
> 
> 赞同：0
> 
> 时间：2012-06-21T03:51:51.677
> 
> 标签：jquery, regex, validation

我正在运行以下 jquery 脚本：

```
<html>
<head>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("#textThing").blur(function(){
    var isNumber = $("#textThing").val().match(/^\d+/);

    $("#p2").html(isNumber);
  });
});

</script>

</head>

<body>
<input type="text" id="textThing" />
<p id="p2">Paragraph 2</p>
</body>
</html> 
```

问题是当我取消选择输入时 p2 从来没有给我任何东西。我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:59:38.810

你需要说：

```
$("#p2").html(isNumber == null ? "" : isNumber[0]); 
```

代替：

```
$("#p2").html(isNumber); 
```

...因为`.match()`如果匹配则返回一个数组。见这里：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)

这是一个工作版本：http: [//jsfiddle.net/k45Ka/5/](http://jsfiddle.net/k45Ka/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:02:56.783

**工作演示** [http://jsfiddle.net/r4VPZ/3/](http://jsfiddle.net/r4VPZ/3/) **或** [http://jsfiddle.net/r4VPZ/4/](http://jsfiddle.net/r4VPZ/4/)

你可以看到`.match`上面的解释。

您也可以使用`.toString`with`.html`或`.text`api。您可以进行`null`处理或查看`isNaN` [http://www.w3schools.com/jsref/jsref_isnan.asp](http://www.w3schools.com/jsref/jsref_isnan.asp)

希望对您有所帮助，如果我错过了什么，请告诉我，干杯`:)`

好读：[http ://api.jquery.com/html/](http://api.jquery.com/html/) **&** [http://api.jquery.com/text/](http://api.jquery.com/text/)

`Match`：返回什么`.match`：[学习正则表达式和jquery - .match 返回什么？](https://stackoverflow.com/questions/5435007/learning-regex-and-jquery-what-does-match-return)

**代码**

```
$(document).ready(function(){
  $("#textThing").on("blur",function(){
    var isNumber = $("#textThing").val().match(/^\d+/);

     $("#p2").html(isNumber.toString());
    // $("#p2").text(isNumber);
  });
});

//var folioIsNumResult = $("#Folio").val().match(/^\d+/i);​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T04:03:12.800

演示：http: [//jsfiddle.net/epinapala/TbCfc/](http://jsfiddle.net/epinapala/TbCfc/)

当正则表达式不匹配时，match 返回 null！

```
$(document).ready(function(){
  $("#textThing").blur(function(){
    var isNumber = $(this).val().match(/^\d+/);
      if(isNumber == null){
          var res = "not a number"
              }else{
              var res = "valid number";
              }
    $("#p2").html(res);
  });
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T03:57:54.887

如果测试通过或失败，您不会创建任何要输入的文本值

演示[http://jsfiddle.net/9MJNj/](http://jsfiddle.net/9MJNj/)

```
 $("#p2").html(isNumber ? 'Is number':'Is not'); 
```

# html - 如果行低于某个高度，则固定位置

> ID：11131272
> 
> 赞同：0
> 
> 时间：2012-06-21T03:51:56.577
> 
> 标签：html, css

是否可以固定表格的位置，使其随页面“滚动”，但仅在某个值之后？

我要实现的目标类似于此站点上的标题：http: [//tf2trends.com/](http://tf2trends.com/)（单击全部显示，然后向下滚动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:14:07.563

这可以使用带有任何类型元素的 JavaScript 和 CSS 来完成：

[如果向下滚动，让 div 紧贴屏幕顶部](https://stackoverflow.com/questions/2907367/have-a-div-cling-to-top-of-screen-if-scrolled-down-past-it)

[http://css-tricks.com/snippets/jquery/persistant-headers-on-tables/](http://css-tricks.com/persistent-headers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:15:01.820

是的，您可以通过使用一些 CSS 类和 jQuery 或 JavaScript 编程轻松实现此功能。

您必须在某个滚动值中调用一个函数，您可以通过 jQuery 轻松获得该函数，然后更改被调用的表或 div 的 CSS`position:fixed;top:0;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T04:17:24.423

试试这个：

```
//keep element in view
(function($)
{
    $(document).ready( function()
    {
        var elementPosTop = $('#floatguy').position().top;
        $(window).scroll(function()
        {
            var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();
            //if top of element is in view
            if (wintop > elementPosTop)
            {
                //always in view
                $('#floatguy').css({ "position":"fixed", "top":"10px" });
            }
            else
            {
                //reset back to normal viewing
                $('#floatguy').css({ "position":"inherit" });
            }
        });
    });
})(jQuery);​ 
```

html:

```
<div>
    Content before floating text<br/>
    Content before floating text<br/>
    Content before floating text<br/>
</div>
<div id="floatguy">
    <span>Floating Header</span>
</div>

<div id="longguy">
        Other text <br/>
        Other text <br/>
        Other text <br/>
</div> 
```

[jsFiddle 示例](http://jsfiddle.net/sasT6/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T05:30:50.050

这是问题中引用的网站使用的方法，在没有使用框架的情况下实现（并且有过多的评论试图解释发生了什么）。这不是获得效果的最佳/最简单/最简单的方法，但我希望从学习的角度来看该网站在纯 js 中的方法是有用的。（仅在 Mac 上的 Chrome 19.0 和 Firefox 13.0 中测试。）

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
    <title>Table With Scrolling Head</title>
    <style type='text/css'>
      #scrollTable{
      margin-top:100px; /* not necessary for scrolling, just to give a little padding */
      }

      #scroller {
      z-index: 100; /* this number needs to be larger than any other z-index on the page */
      }
    </style>
  </head>
  <body>
    <table id='scrollTable'>
      <thead id='scroller'>
    <tr>
      <th>I don't leave the screen</th>
    </tr>
      </thead>
      <tbody>
    <tr><td>I do!</td></tr>
    <tr><td>I do!</td></tr>
    <!-- ... add more <tr><td>I do!</td></tr> lines to make the page long enough to scroll -->
    <tr><td>I do!</td></tr> 
      </tbody>
  </body>
<script type='text/javascript'>
function getDistFromTop(e){
    /* get the offset of element e from the top (including the offset of any elements it is nested in)*/
    y = e.offsetTop;
    e = e.offsetParent;
    while (e != null){
        y = y + e.offsetTop;
        e = e.offsetParent;            
    }
    return y;
}

function scroll() {
    var scroller = document.getElementById('scroller');
    var tab = document.getElementById('scrollTable');

    if (window.pageYOffset > getDistFromTop(tab)){ /* if the page has been scrolled farther than the distance the table is from the top... */
        scroller.style.position = 'fixed'; /* fix the position of scroller so it doesn't move with the page */
        scroller.style.top = '0px'; /* put scroller on the top of the page */
        tab.style.paddingTop = '20px'; /* add padding to the top of the table; this is done to make the table body stay where it is expected (otherwise it would move because scroller, the table header, has become fixed) */
    } else { /* if the page scrolls back so that the whole table is on the page, reset everything to their original values so the page behaves "normally" */
        scroller.style.position = 'relative'; 
        scroller.style.top = '';
        tab.style.paddingTop = '0px';
    }
}

window.onscroll = scroll;
</script>
</html> 
```

# javascript - Safari 移动浏览器没有 selectedOptions 我正在开发一个网络应用程序，并在我的 ipad 上对其进行测试时，我意识到某些东西不起作用。我决定进一步研究它，发现这在 ipad 上不起作用，但在桌面浏览器上起作用： $(function() { $('select').change(function(e) { console.log(e. srcElement.selectedOptions); }); }); Ipad 控制台显示未定义 这是一个用于测试它的 jsfid

> ID：11131275
> 
> 赞同：1
> 
> 时间：2012-06-21T03:52:26.593
> 
> 标签：javascript, ios, mobile-safari

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:04:29.407

您的意思是使用 e.srcElement.selectedIndex 还是 e.srcElement.value？

```
e.srcElement.options[e.srcElement.selectedIndex].getAttribute("data-sort"); 
```

# wordpress - Wordpress 标签错误/问题

> ID：11131276
> 
> 赞同：2
> 
> 时间：2012-06-21T03:52:35.957
> 
> 标签：wordpress

我正在使用 wordpress - 并且有一种方法可以发布页面和帖子。

我正在创建帖子，为此您可以添加标签（这只是为您提供更多关键字排名，因为它显示在帖子的底部 - wordpress 创建带有这些标签的页面，并为搜索引擎中的标签排名）

我在帖子中创建了所有这些链接 - 现在检查链接后，它们在主帖子页面上很好，但对于那些帖子附带的所有标签 - 实际链接被 wordpress bc 搞砸了，他们在之前添加了 /tag/链接。

这是随帖子一起创建的 URL。

示例：-http://www.sitename.com/**标签**/tagname/

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:45:00.580

1.  验证您在使用的主题中是否有 tag.php 文件，如果没有，则使用一个，以供参考，请查看“Twentyeleven”WordPress 模板中的一个。（http://codex.wordpress.org/Tag_Templates）
2.  在您的仪表板中，设置 > 永久链接，设置为“默认”，然后保存，然后检查“帖子名称”并再次保存。

祝你好运！:)

# windows-phone-7 - 删除方法的可访问性修饰符的目的是什么？

> ID：11131277
> 
> 赞同：0
> 
> 时间：2012-06-21T03:52:50.323
> 
> 标签：windows-phone-7, visibility, access-modifiers, eventargs

我正在阅读 Petzold 的免费 (.PDF) WP7 书，他说他总是在事件处理程序中将“EventArgs e”更改为“EventArgs args”（这对我来说很有意义，因为“e”有时与我想要的冲突命名异常对象）；但他也说他删除了有时会自动添加的可访问性修饰符。

我想知道他为什么这样做，并且：

```
1) Should I adopt the same practice
2) If that's a better way (Petzold is no wet-behind-the-ears greenhorn), why doesn't MS create these methods that way by default? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:27:41.297

（我假设这是`private`从方法中删除访问修饰符的问题。如果它正在删除（比如说）`public`，那么这是一个*语义*变化，并且是另一回事。）

这绝对是个人喜好问题。当访问修饰符是默认值时，我*曾经*倾向于删除它，但现在我更喜欢明确。

隐含的好处：

*   减少杂乱（在写书时很重要，这很可能与此处相关）
*   由于默认值始终是“您可以明确表达的最私密的”，因此更明显的是哪些成员已被“提升”以获得更广泛的访问权限

明确的好处：

*   毫无疑问，不完全了解该语言的读者
*   它引入了另一个心理提醒，您需要积极考虑这一点。（我敢肯定，人们经常以默认方式保留事物，而没有进一步考虑 - 与 Java 相比，我看到 C# 中的虚拟方法相对较少，只是因为默认值。）
*   假设您遵循心理提醒，它向读者表明这是一个深思熟虑的决定。

如果您想要“诉诸权威”，您可能有兴趣知道 Miguel de Icaza（强烈）赞成前一种方法，而 Eric Lippert 赞成后者。

# c# - Linq to Sql：如何获取数据 - 一对多

> ID：11131278
> 
> 赞同：1
> 
> 时间：2012-06-21T03:53:01.820
> 
> 标签：c#, sql, linq

我在 ASP.NET C# 中的应用程序。我使用 Linq to Sql，看图片

![在此处输入图像描述](../Images/fa91d856d67ddcfee78ba48b8ca42691.png)

// 5 个数据表：

```
// Unit table

     id |   name    | unit_type_id          Unit_type   
       -------------------------                    
        1 | Unit 1  |     1                     id   |  name
        2 | Unit 2  |     1                     -------------   
        3 | Unit 3  |     1                     1    |  Type 1
        4 | Unit 4  |     2                     2    |  Type 2
        5 | Unit 5  |     1                     3    |  Type 3
        6 | Unit 6  |     3     

 //Tool table                                // tool_type   table

    id  |   name    | tool_type_id              id   |  name
    ----------------------------            ------------------- 
    1   |   Tool 1  |     1                     1    |  Tool_type 1
    2   |   Tool 2  |     2                     2    |  Tool_type 2
    3   |   Tool 3  |     1                     3    |  Tool_type 3
    4   |   Tool 4  |     2         
    5   |   Tool 5  |     3 
```

//unit_tool 表

```
unit_id | tool_id
    ---------------
    1   |    1
    2   |    1
    1   |    2
    1   |    3
    2   |    2
    2   |    3
    3   |    3
    3   |    2 
```

我想在 C# 中使用 linq to sql 来获取类似的数据

// 我要获取的表格数据

```
Unit name  |  Unit type name  | Tool name
-------------------------------------------------
Unit 1     | Type 1           | tool 1, tool 2, tool 3
Unit 2     | Type 1           | tool 1, tool 2, tool 3
Unit 3     | Type 1           | tool 2, tool 3
Unit 4     | Type 2           | 
Unit 5     | Type 1           | 
Unit 6     | Type 3           | 
```

我的代码很低

// 创建新类

```
public class unit_list
    {
        //Unit name
        public string unit_name { get; set; }
        // Unit type name
        public string unit_type_name { get; set; }
        // Tool name
        public string tool_name { get; set; }
    } 
```

//函数获取数据

```
protected void show_unit()
{
    // Create datacontext
    for_testDataContext db = new for_testDataContext();
    //Query data
    IQueryable<unit_list> CourseList = from cl in db.units
                                        select new unit_list()
                                        {
                                            unit_name = cl.name,
                                            unit_type_name = cl.unit_type.name,
                                            tool_name = // how to get data like "tool1, tool 2, tool 3"
                                        };

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:00:41.587

你应该能够写出这样的东西（假设所有的关系都在 Linq 中正确设置）：

```
select new unit_list()
{
    unit_name = cl.name,
    unit_type_name = cl.unit_type.name,
    tool_name = string.Join(", ", 
        cl.unit_tools.Select(ut => ut.tool.name).ToArray()
    )
}; 
```

换句话说..

1.  **获取与unit_tools**的一对多关系
***   **在工具**中选择相应的行并选择*名称*列*   加入以获取单个逗号分隔的字符串**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T04:04:16.673

您没有设置任何外键，这意味着您不会获得映射实体的自动“导航属性”。您必须更新数据库然后重新生成映射，或者使用工具箱自己添加它们。

**编辑：**

好的，让我们列出一个非常简短的清单。

1.  *主键和外键是否在模式（您的数据库）中正确设置和关联？*这很重要，因为这是 sqlmetal 可执行文件用来生成对象上下文的内容。
2.  *模型中的关联是否指向父实体和子实体中的正确属性？*您可以通过在模型查看器中单击两个对象之间的关联然后展开`Properties` 窗格来检查这一点。展开`Child`和`Parent`属性并验证它们不为空。

如果到目前为止你做的一切都正确，点击 和 之间的关联`Unit_Tool`应该`Unit`会显示一个`Child`名为`Units`.

如果您缺少关联，可以通过以下方式添加：

1.  单击 中的`Association`工具`Toolbox`。
2.  单击定义**主**键的对象。
3.  单击包含**外**键的对象。

这将弹出一个对话框，该对话框应该是不言自明的。

HTH。

**编辑：**

通过使用现有代码解决了这个问题（感谢上传）。问题非常简单，但并不十分明显：**您需要在每个表中都有一个标识符列，或者 Linq-to-SQL 不会在数据上下文中创建子集合引用。**因此，由于您`unit_tool`仅将其用作数据透视表（完全可以接受），每行没有唯一 ID，因此您不会获得“导航属性”。要解决此问题，只需向表中添加一个主键字段（您不必实际使用它 - 它仅用于 ORM）`unit_tool`，重新创建实体映射，然后*中提琴！*，您的查询将按原样工作。

我不得不说，这乍一看并不明显。我从来没有遇到过这个问题，因为我总是出于习惯创建一个唯一标识符......**

# ruby-on-rails-3 - 如何测试质量分配错误

> ID：11131279
> 
> 赞同：0
> 
> 时间：2012-06-21T03:53:31.563
> 
> 标签：ruby-on-rails-3, rspec, mass-assignment

似乎我想做与大多数人在测试 Rails 时要求的相反...

如何测试 FOR ActiveModel::MassAssignmentSecurity::Error。我已经明白了，只是想知道如何使它使我的测试用例变成绿色而不是红色。

当前测试：

```
describe Tag do
  let(:tag) { FactoryGirl.create(:tag) }
  subject { tag }

  describe "when tag name is sent directly" do
    before { tag = Tag.new(name: "New") } # <- what I want to raise the error
    it { should_not be_valid } # <- doesn't make it to this line
  end
end 
```

我应该如何将其构建为适当的测试？我试过了：

```
 lambda do
      tag = Tag.new(name: "NEW")
    end.should raise_error 
```

但这对我也不起作用，我明白了

```
Exception encountered: #<NoMethodError: undefined method `raise_error' for #<Class:0x00000102525c08>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:15:46.653

啊，必须把它放在一个它{}中：

```
it do
  lambda { tag = Tag.new(name: "NEW") }.should raise_error
end 
```

这为我解决了问题

# background - Firefox 和 ie 设置错误的背景图像

> ID：11131281
> 
> 赞同：0
> 
> 时间：2012-06-21T03:53:45.540
> 
> 标签：background, background-image, quotes

我一直在研究页面构建器并遇到了这个双引号问题。

`div id="set" style="color:black;font-size:12px"`

`document.getElementById('set').style.backgroundImage="url('editor.png')"`

或者

`document.getElementById('set').style.backgroundImage="url(editor.png)"`

这在 Firefox 和 IE 中设置

`div id="set" style="url("editor.png");color:black;font-size:12px"`

当页面被保存并重新加载时，双引号会破坏样式。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:50:44.753

我认为问题就在这里 - **url("editor.png")**

```
<div id="set" style="url("editor.png");color:black;font-size:12px"> 
```

尝试这个

```
<div id="set" style="background-image :url('editor.png');color:black;font-size:12px"> 
```

# facebook - 应用脸书专页

> ID：11131291
> 
> 赞同：0
> 
> 时间：2012-06-21T03:56:12.203
> 
> 标签：facebook

我的应用程序有一个 Facebook 页面，但它仍然在我的 Facebook 应用程序设置底部显示“创建 Facebook 页面”。如果我点击它，我可以将我的当前页面连接到我的应用页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:23:08.393

不，它不会将您当前的粉丝/产品页面与您的应用程序连接起来，
它会为您的应用程序创建一个新的专用页面。

# c++ - AVL 树哨兵

> ID：11131293
> 
> 赞同：0
> 
> 时间：2012-06-21T03:56:16.927
> 
> 标签：c++, binary-tree, null, avl-tree, sentinel

我正在尝试用 AVL 树完成一个学校项目。发生的情况是，一旦我插入根节点和其他两个节点，一切正常，如果我尝试添加的节点超过这三个节点，程序就会失败。我认为问题在于 newnode 的指针在创建后并未指向哨兵 NIL；我尝试将 newnode 的指针设置为 NIL，但没有运气。
我怎样才能解决这个问题？

```
#include <cstdlib>
#include <iostream>
#include <fstream>
#include <cmath>
#include <stdio.h>
#include "graphvisualize.h"

using namespace std;
typedef struct node Tnode;

Tnode *root;
Tnode *NIL;
Tnode *newnode;

void InitializeTree(int k) {
    //initialize the list with the root node
    NIL=(Tnode *)malloc(sizeof(Tnode));  
    root=(Tnode *)malloc(sizeof(Tnode));
    //change to null later
    root->value = k;
    root->parent = NIL;
    root->right = NIL;
    root->left = NIL;  
    root->height = 1;
    NIL->right = NULL;
    NIL->left = NULL;
    NIL->parent = NULL;
}

void insert(int v) {
    Tnode *newnode=(Tnode *)malloc(sizeof(Tnode));
    newnode->value = v;
    Tnode *y = NIL;
    Tnode *x = root;
    while(x != NIL) {
        y = x;
        if(newnode->value < x->value) {
            x = x->left;  
        } else {
            x = x->right;   
        }
        newnode->parent = y;
        if(y == NIL) {
            root = newnode;
        } else if(newnode->value < y->value) {
            y->left = newnode;          
        } else {
            y->right = newnode;
        }
        cout << "insert  ";
        //Heres my problem
        //trying to set right and left pointer to NIL
        newnode->left = NIL;
        newnode->right = NIL;         
    }

    //height manager
    int h = 1;
    newnode->height = h;
    while((newnode->parent != NIL)  &&  (newnode->height >= newnode->parent->height)) {
        newnode = newnode->parent;
        newnode->height++;
    }
    cout << "height-fix  ";
}

//Display AVL Tree
void ViewTree() {
    ofstream AVLfile;
    AVLfile.open("AVLgraphfile.dot");
    AVLfile << visualize_tree(root);
    AVLfile.close();
}

int main() {
    InitializeTree(7);
    cout << "root  ";
    insert(5);
    insert(8);
    //insert(6); 
    ViewTree();
    return 0;
} 
```

# .net - 使用条件编译将 Silver Light 类库交叉编译为 .net 类库

> ID：11131302
> 
> 赞同：1
> 
> 时间：2012-06-21T03:58:06.633
> 
> 标签：.net, visual-studio, silverlight, silverlight-5.0

我有一个包含业务实体的 silverlight 类库，我希望在我的 .net 类库之一中重用这些实体。我无法使用可移植类库，因为我的 silverlight 类库引用了可移植库工具不支持的一些 silverlight 核心组件 dll。我引入了条件编译，因此只有当编译器以 silverlight 为目标时，才会构建特定于 silverlight 的代码。我的问题是使用 Visual Studio，如何为同一个 silverlight 类库生成 .net 4.0 运行时程序集？任何帮助，将不胜感激..

阿尔卑斯山

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:26:51.750

当您需要从相同的代码库构建例如 Silverlight 和 .NET Framework 库时，Microsoft 提供了[Project Linker工具。](http://msdn.microsoft.com/en-us/library/ff921108%28v=pandp.20%29.aspx)[您可以从这里](http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044)下载该工具。

最初，您需要创建一个单独的 .NET 项目并将Silverlight 库中的文件添加*为链接。*

安装 Project Linker 后，您可以将 Silverlight 项目链接为.NET 项目*目标的**源*。当您现在对 Silverlight 项目进行更改（包括文件和文件夹的添加和删除）时，这些更改将自动反映在 .NET 项目中。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:15:40.030

您确定不会在某个阶段通过服务传递这些业务实体吗？如果是这样，请在服务器端创建业务实体，服务引用将在 Silverlight 中重新创建它们。然后，您可以使用分部类来拆分数据定义和类逻辑，并将类逻辑文件添加回 Silverlight（使用命名空间的编译器指令）。我们一直这样做，效果很好。*

# c# - 无法使用 AutoMapper 解析具有 nhibernate 的子实体

> ID：11131304
> 
> 赞同：0
> 
> 时间：2012-06-21T03:58:50.563
> 
> 标签：c#, nhibernate, castle-windsor, automapper

我在尝试解决模型中的子实体时遇到了一系列问题，我使用 nhibernate 进行持久性，使用 Windsor 进行 ioc 和 automapper 进行映射。

我已经以多种方式对此进行了攻击，并且几乎总是在此过程中被阻止，任何帮助将不胜感激。

我对下面代码的问题是，当我尝试通过以下方式更新页面布局时。（假设只有 layout-id 正在改变）

```
 var page = _pageRepository.Get(model.Id);
        Mapper.Map(model, page);

        using (ITransaction tran = _sessionFactory.BeginTransaction())
        {
            _pageRepository.Update(page);
            tran.Commit();
        } 
```

我得到一个很好的错误说，

> 具有相同标识符值的不同对象已与会话相关联：对于布局模型。

现在我尝试了： - 将设施更改为 perwebrequest（然后说会话已关闭） - 尝试在获取缓存后从缓存中删除布局（错误如上） - 我尝试在解析器中获取现有会话（上下文错误）

我应该如何进一步解决这个问题？肯定不能这么难！我哪里错了？非常感谢。

这是所有重要的部分。

我有一个这样的模型：

```
public class ContentPage : Page
{ 
    public virtual Layout Layout { get; set; } 
} 
```

我使用持久化工具来管理我的休眠会话，如下所示：

```
 Kernel.Register(
            Component.For<ISessionFactory>()
                .UsingFactoryMethod(_ => config.BuildSessionFactory()),

            Component.For<ISession>()
                .UsingFactoryMethod(k => k.Resolve<ISessionFactory>().OpenSession())
                .LifestylePerThread() <-- IMPORTANT FOR LATER.
            ); 
```

我的映射是这样的：

```
 CreateMap<BlaViewModel, ContentPage>()
            .ForMember(dest => dest.DateModified, src => src.MapFrom(x => DateTime.UtcNow)) 
            .ForMember(x => x.Layout, x => x.ResolveUsing<EntityResolver<Layout>>().FromMember(y => y.Layout_Id)); 
```

最后我的解析器是这样的：

```
public class EntityResolver<T> : ValueResolver<Guid, T> where T : EntityBase
{
    private readonly ISession _session;

    public EntityResolver(ISession session)
    {
        _session = session;
    }

    protected override T ResolveCore(Guid id)
    {
        var entity = _session.Get<T>(id); 
        return entity;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:19:18.190

异常主要来自您在 Session 中创建了一个具有现有 Id 的新对象。在您的情况下，AutoMapper 很可能会这样做。

如何在 ContentPage 地图中配置 Layout 属性？如果你默认使用它，那么 AutoMapper 会创建一个新的 Layout 对象并将其设置为 Id，它不是从 Session 加载的。然后保存这个对象会导致异常。

所以你需要自定义 Layout 属性映射规则，如果是已经存在的模型，从 Session(Repository) 中检索，并设置它的值（通过 AutoMapper 或手动），那么会话的状态是正确的。

ContentPage 的 AutoMapper 配置可能类似于：

```
Mapper.CreateMap<VPage, ContentPage>()
    ....
    .ForMember(des=>des.Layout, opt=>opt.MapFrom(src=>GetLayout(src))) //customize Layout
    ....; 
```

在您的 GetLayout 函数中，它就像：

```
private Layout GetLayout(VPage page)
{
    var layout = page.LayoutId == 0? new Layout() : _layoutRepository.Get(page.LayoutId); //avoid new Layout object with existed Id
    .......

    return layout;
} 
```

更重要的是，您最好不要使用 AutoMapper 从 DTO 转换域模型，请参阅[此说明](https://stackoverflow.com/a/678256/343725)。

**更新：**很抱歉没有看到您的 EntityResolver，请尝试使用您的 LayoutRepository 来检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:42:51.390

My guess is that the resolver is using another session to get the layout.

```
// sample code
var layout1 = Resolve(1);

session.Attach(layout1);  // now contains layout 1

var layout2 = Resolve(1);

session.Attach(layout2);  // error: already contains layout with id 1

public Layout Resolve(int id)
{
    using (var session = OpenSession())
    {
        return GetNewSession.Get<Layout>(1);
    }
} 
```

use the same session to resolve connected entities

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:23:28.950

几个小时后以典型的方式解决了这个问题，并在国际奥委会上学到了一些艰难的教训。

在上面的代码中，你可以看到我注册了我的 ISession 来解析如下

```
 Kernel.Register(
        Component.For<ISessionFactory>()
            .UsingFactoryMethod(_ => config.BuildSessionFactory()),

        Component.For<ISession>()
            .UsingFactoryMethod(k => k.Resolve<ISessionFactory>().OpenSession())
            .LifestylePerThread() <-- IMPORTANT FOR LATER.
        ); 
```

这是我的问题的开始，主要是因为这是每个线程，几乎所有不同的点都会解决一个新的会话。以会话的多个实例结束。（因此错误）

一旦我将其更改为情况有所`.LifestylePerWebRequest()`好转，但我仍然遇到了一些会话问题。

最终弄清楚这个 Session 正在通过所有层（通过构造器的 IOC），所以我的管理器层、存储库层以及它正在使用的任何地方，都需要更改为作为 PerWebRequest 安装。

喜欢：

```
container.Register(Classes.FromAssemblyContaining<Repository>()
                               .Where(Component.IsInSameNamespaceAs<Repository>())
                               .WithService
                               .DefaultInterfaces()
                               .LifestylePerWebRequest()); 
```

和：

```
 container.Register(Component.For<EntityResolver<Layout>>().ImplementedBy<EntityResolver<Layout>>().LifestylePerWebRequest()); 
```

通过正确使用我的 IOC，最终达到了只有一个会话被假脱机（PerWebRequest）并且问题消失的地步。

好的。希望对其他关注相同问题的人有所帮助。

# cocos2d-iphone - 如何使用 CCSpriteBatchNode 仍然使用局部坐标？

> ID：11131311
> 
> 赞同：1
> 
> 时间：2012-06-21T04:00:05.500
> 
> 标签：cocos2d-iphone, textures

让我简要介绍一下我们的设置。

有一个世界。
世界上，有很多地方。
在这些地方，有很多字符。
现在许多角色共享相同的纹理。

我们目前有
world(layer)-batchNode-character sprite。world(layer)-batchNode-place sprite

因此角色的位置是相对于世界的，而不是它所在的位置（概念上）。

我们如何设置类层次结构，以便
我们仍然利用 batchNode 的力量
并能够使用角色的局部坐标（相对于放置它的位置）

简单的结构比如
world(layer)-place(layer)-batchNode-character(sprite) 是行不通的，因为在一个世界中会有很多常见的字符但不共享 batchNode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:48:44.670

首先，您不需要（多个）层。您可以让批处理节点代替层。您可能希望有一个用于用户输入的主层，或者通过向触摸调度程序注册一个触摸委托类来自己管理用户输入。

从概念上讲，我推荐的节点层次结构是：

```
scene (touch delegate)
  batchNode (places)
  batchNode (characters) 
```

或者

```
scene
  layer (input)
    batchNode (places)
    batchNode (characters) 
```

现在假设您的位置（平铺图像？）以某种方式分布在世界各地，它们每个都有一个位置。要让每个地方的角色都有相对于他们所在位置的坐标，您可以执行以下两项操作之一：

1.  将字符batchnode的位置设置为对应位置的位置。如果您只在该位置批处理字符，则此方法有效。
2.  如果您想对所有相同的字符进行批处理而不考虑位置，您可以将“虚拟”CCSprites（使用一个微小的、完全透明的图像）添加到批处理节点并将每个字符定位到特定位置的位置。然后将这个地方的角色添加为这个精灵的孩子。如果角色从一个地方移动到另一个地方，请将它们从一个虚拟精灵中移除，并将它们添加到相应的另一个虚拟精灵中。

Finally, you can always create helper methods that transform the position of a sprite to local coordinates based on the place they're in. That way you don't need any specially setup node hierarchy and you can still work with local coordinates where necessary. If you do that, you may find that whether you use local or world coordinates doesn't really make much of a difference. World coordinates are simply character position plus place position, a simple addition/subtraction gets you from world to local coordinates and vice versa.

# bash - 如何在 Expect 条件语句中使用 Bash 脚本变量

> ID：11131318
> 
> 赞同：6
> 
> 时间：2012-06-21T04:01:15.617
> 
> 标签：bash, expect

我正在编写一个 Bash 脚本并使用 Expect 来执行 sftp。现在在 Expect 块中，我想在条件语句中访问 Bash 变量。但是，我无法这样做。怎么能做到这一点？

此外，此脚本的执行由 C 程序控制，我想将输出重定向到日志文件（这也是动态的）。我可以这样做并抑制标准输出上的所有输出。

这是代码：

```
!/usr/bin/bash
host=$1
user=$2
pass=$3
action=$4
path=$5
echo "Starting...."

function doAction {

strAction="\""$action"\""
echo $strAction

/usr/bin/expect <<EOF > logfile.txt
**set bashaction $strAction**
spawn sftp $user@$host

expect "password:"
send "$pass\r"
expect"sftp>"
send "cd $path\r"
**if {$bashaction == "TEST"} {**
  expect "sftp>"
  send "prompt\r"
}

expect "sftp>"
send <sftp command>
expect "sftp>"
send_user "quit\n"

exit
  EOF
}

doAction
echo "DONE....." 
```

1\. 改为使用 Expect 脚本。对于日志记录问题，使用`log_user 0`和`log_file -a <file>`帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T05:17:06.960

你不需要使用 Bash。Expect 可以处理所有这些：

```
#!/usr/bin/expect

set host [lindex $argv 0]
set user [lindex $argv 1]
set pass [lindex $argv 2]
set action [lindex $argv 3]
set path [lindex $argv 4]
puts "Starting...."

puts "\"$action\""
spawn sftp $user@$host

expect "password:"
send "$pass\r"

expect"sftp>"
send "cd $path\r"

if {$action == "TEST"} {
    # Do something
} else {
    # Do something else
}

expect "sftp>"
send_user "quit\r"

puts "DONE....." 
```

来自 Bash，Tcl/Expect 语法有点奇怪，但是扩展上面的框架应该没有任何问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T16:25:02.573

### 从 TCL 和 Expect 访问环境变量

由于您是从另一个进程调用此 Expect 脚本，因此您可以使用环境变量。例如，如果您的父进程已将*操作*导出到环境，那么您可以在期望脚本中访问其值：

```
$::env(action) 
```

在 Bash 中，您可以使用内置的*export*[标记要导出的变量。](http://www.gnu.org/software/bash/manual/bashref.html#Environment)例如：

 *```
export action 
```

由于我不确定您是如何从 C 中调用 Expect 脚本的，因此您需要确保正确导出变量。

### 禁用记录到标准输出

为了禁用从衍生进程到标准输出的日志记录，Expect 提供了 log_user 命令。您可以使用`log_user 0`.

expect(1) 手册说：

> 默认情况下，发送/预期对话记录到标准输出（如果打开，还有一个日志文件）。命令“log_user 0”禁用记录到标准输出，并由“log_user 1”重新启用。记录到日志文件没有改变。

这实际上并没有*关闭*标准输出，这通常不是您想要的。这样做会导致写入 stdout 的任何内容抛出如下错误：

```
can not find channel named "stdout"
    while executing
"puts hello"
    (file "/tmp/foo" line 8) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:09:25.603

要抑制输出到标准输出，您可以使用

```
command here >/dev/null 2>/dev/null 
```

要写入日志文件，可以使用类似的管道 (`>`或`>>`)，或者`tee`如果要将输出写入长管道的中间，则可以使用命令。*

# java - jsonobject IllegalAccessException 无法访问带有修饰符“private”的类 java.util.HashMap 的成员

> ID：11131319
> 
> 赞同：4
> 
> 时间：2012-06-21T04:01:17.600
> 
> 标签：java, json, hashmap

创建 JSONObject 时出现以下错误：

```
Caused by: java.lang.IllegalAccessException: Class org.json.JSONObject can not access a member of class java.util.HashMap with modifiers "private" 
```

DTO 有 3 个属性：

```
private list aList = new ArrayList();
private Map<String, Map<String, BigDecimal>> aMapOfMaps = new HashMap<String, Map<String, BigDecimal>>();
private Map<String, BigDecimal> aMap = new HashMapMap<String, BigDecimal>(); 
```

在创建 JSON 对象时抛出错误， `obj = new JSONObject(object);`

其中 object 是 DTO 对象。不知道我在这里做错了什么或遗漏了什么。我真的很感激任何指向soln的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T06:50:29.010

首先，您的代码根本无法编译，请将其更改为：

```
private List aList = new ArrayList();
private Map<String, Map<String, BigDecimal>> aMapOfMaps = new HashMap<String, 
  Map<String,BigDecimal>>();
private Map<String, BigDecimal> aMap = new HashMap<String, BigDecimal>(); 
```

`org.json`其次，如果可能的话，我遇到了这些奇怪的问题[Jackson](http://jackson.codehaus.org/)。

# android - listview listitem 大小随着 android 手机和平板电脑的增加而增加

> ID：11131321
> 
> 赞同：0
> 
> 时间：2012-06-21T04:02:10.657
> 
> 标签：android, listview

我正在使用自定义 arrayadapter 创建一个列表视图..但问题出在平板电脑中，它显示列表项非常小..any1 可以帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:06:54.283

尝试使列表视图的宽度固定。您可以在相应的布局 xml 文件中执行此操作。在那里你添加属性`android:layout_width="200dp"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:09:53.737

要解决此问题，请删除静态变量，即固定值。使用 fill_parent、match_parent 创建动态 xml。

谢谢...

# mysql - 是否有必要在 MySQL 中删除临时表？

> ID：11131325
> 
> 赞同：14
> 
> 时间：2012-06-21T04:02:40.073
> 
> 标签：mysql

我在删除*临时*表时遇到问题。用户帐户没有“删除”权限。由于安全原因，我不想授予该特权。

我试图找到像“暂时放弃”这样的特权，但没有。似乎唯一的选择是删除所有“删除表”语句。我知道临时表将在数据库会话结束后自动删除。

但是，我不确定将这项工作留给 MySQL 是否有任何副作用。请指教。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-21T04:03:59.290

一旦与数据库断开连接，临时表就会自动删除

> TEMPORARY 表仅对当前连接可见，并在连接关闭时自动删除

[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

所以-创建它们，使用它们，不要打扰它们的删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:50:06.363

它将使用当前机器的 RAM 空间。所以更好的主意是在下一步删除临时表，一旦它的使用结束

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-08T01:52:12.370

如果用户有 CREATE TEMPORARY TABLES 权限，他可以执行 DROP TABLE、INSERT、UPDATE 和 SELECT。

请参阅：[https ://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_create-temporary-tables](https://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_create-temporary-tables)

# iphone - 使用 NSFileManager 读取文件导致错误

> ID：11131327
> 
> 赞同：1
> 
> 时间：2012-06-21T04:02:53.393
> 
> 标签：iphone, objective-c, ios, ipad

我收到以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'
*** First throw call stack: 
```

导致错误的代码是：

```
NSDictionary *dict = nil;
    @synchronized(self) {
        dict = [pendingDictionarySaves objectForKey:file];
    }
    if (dict) return dict;

    @synchronized(self) {
        dict = [savedDictionaries objectForKey:file];
    }
    if (dict) return dict;

    NSData *plistData = [[NSFileManager defaultManager] contentsAtPath:file];

    NSError *error = nil;
    if ([[NSPropertyListSerialization class]
         respondsToSelector:@selector(propertyListWithData:options:format:error:)]) {
        return [NSPropertyListSerialization propertyListWithData:plistData
                                                         options:NSPropertyListImmutable
                                                          format:NULL
                                                           error:&error];
    } 
```

基本上原因是因为 plistData 为空。文件路径是：

```
/Users/aditya15417/Library/Application Support/iPhone Simulator/5.1/Applications/A355D003-668C-4B81-80DC-66C968FE57D3/Library/Caches/NewsfeedCache/?type=news 
```

这是我初始化路径的方式：

```
 NSString *path = [basePath stringByAppendingPathComponent:[streamURL uniqueFileName]];

    // Create the directories if needed
    if (![[NSFileManager defaultManager] fileExistsAtPath:path]) {
        [[NSFileManager defaultManager] createDirectoryAtPath:path withIntermediateDirectories:NO attributes:nil error:nil];
    }

    return path; 
```

问题是如何在不必检查 pListData 是否为空的情况下让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:24:52.247

也许你最好使用 +[NSData dataWithContentsOfFile:options:error:]。如果读取失败，该方法至少会给您一个错误。就像是：

```
NSError *error = nil;
NSData *plistData = [NSData dataWithContentsOfFile:file options:0 error:&error];
if(!plistData) {
    NSLog(@"failed to read data: %@",error);
    return nil;
}

if ([[NSPropertyListSerialization class]
     respondsToSelector:@selector(propertyListWithData:options:format:error:)]) {
    return [NSPropertyListSerialization propertyListWithData:plistData
                                                     options:NSPropertyListImmutable
                                                      format:NULL
                                                       error:&error];
} 
```

# linq - 选择不在另一个表中或不在给定日期范围内的项目

> ID：11131330
> 
> 赞同：0
> 
> 时间：2012-06-21T04:03:05.907
> 
> 标签：linq, visual-studio-lightswitch

我正在开发一个程序，该程序保留物理广告点列表及其预订（日期范围）。该程序需要能够为广告类别中的广告找到“开放点”。

我有三个表：AdTypes、AdPlaces 和 Reservations。目前，我正在实现一个查询，用于搜索日期与用户选择的日期范围不冲突的预订，并将 AdType 项目作为列表返回。如果每个 AdType 在某个时间点都有预订，则此方法有效，但它不会列出在 Reservations 表中找不到的 AdType。

过滤是在 AdTypes 查询的 PreProcessQuery 中完成的，如下所示：

```
query = query.Where(r => r.Reservations.Any(res => (res.Begindate > Begindate && Enddate < res.Enddate) || (res.Enddate < Begindate && Enddate > res.Begindate))); 
```

如何“扩展”查询，以便将所有没有预留的 AdType 列在“过期”的 AdType 预留旁边？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:57:33.670

也许我在发信息，或者不太了解您想要什么，但是您怎么能期望看到不存在的 AdType？

您是否希望在测试期间查看没有任何保留的 AdType？

如果是这样，我想您必须使用 adType 实体作为屏幕的基础，而不是 Reservation 实体（使用基于 AdType 的查询，而不是 Reservation）。这样您就可以生成一个没有任何重叠保留的 AdType 列表。

这有任何意义吗？

# ios - iOS 消息视图控件，如 iMessage

> ID：11131333
> 
> 赞同：3
> 
> 时间：2012-06-21T04:03:59.980
> 
> 标签：ios, iphone, xcode

是否有任何具有 iMessage 类似功能的 UI 控件库，例如可以显示消息、图像等

或者事实上它是 iOS 标准的一部分，所以我可以重复使用它们？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T06:08:56.987

看看[acaniChat](https://github.com/acani/acaniChat)。这就是你要找的东西——或者至少你可以从中得到你需要的一切。

# c - 为什么我在这个列表中得到垃圾值

> ID：11131334
> 
> 赞同：0
> 
> 时间：2012-06-21T04:04:09.043
> 
> 标签：c, list

我有一个单链表，其中节点和列表结构定义为：

```
typedef struct _node
{
   int data;
   node* next;
} node;

typedef struct _list
{
   node* start;
} list; 
```

我编写了一个函数来从列表中删除特定值的前导条目，但它似乎没有按预期工作。在运行我的函数并重新打印我的列表后，该元素不再存在，而是在其位置上有一个很大的值（大约 134520848）。我删除定义值的前导值的功能是：

```
void removeLead(list* l, int n)
{
   node* current = l->start;
   node* temp = NULL;

   while (current->data == n)
   {
      temp = current;
      l->start = current->next;
      free(temp);
   }
} 
```

如果我有 4 个前导值 == n，那么在运行之后`removeLead()`，我有 3 个前导条目 ~134520848。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T04:09:34.987

代码中有错误。您没有重新分配当前变量。

```
void removeLead(list* l, int n)
{
   node* current = l->start;
   node* temp = NULL;

   while (current->data == n)
   {
      temp = current;
      current = current->next;
      if(l->start == temp)
          l->start = current;
      free(temp);
   }
} 
```

# c++ - C++二十一点函数

> ID：11131340
> 
> 赞同：2
> 
> 时间：2012-06-21T04:04:29.580
> 
> 标签：c++, blackjack

我已经开始自学 C++ 并且一直在尝试编写一个二十一点程序。我正在尝试使用类来表示卡片、甲板和手。我相信到目前为止，除了`dealCardToHand()`方法之外，程序中的一切都在工作。

```
void dealCardToHand(deck& d, hand& h){
    h.setCard(h.getCardsInHand(), d.dealCard());
    h.setCardsInHand(h.getCardsInHand() + 1);
} 
```

它似乎正确地增加了手牌的数量，但没有`setCard()`使用正确的数据调用该方法。任何帮助，将不胜感激。我包括相关的类和方法：

```
class deck{
    int topCard;
    card * cards[52];
 public:
     deck();
     void shuffle();
     void printDeck();
     card dealCard();
};

card deck::dealCard(){//returns top card of deck and increments top card one
    return *cards[topCard++];
}

class hand{
    card * handCards[12];
    int cardsInHand;
public:
    hand();
    card getCard(int i){ return *handCards[i]; }
    void setCard(int i, card c) { handCards[i] = &c; }
    int getCardsInHand() { return cardsInHand; }
    void setCardsInHand(int i) { cardsInHand = i; }
    void printHand();
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:38:06.410

这是危险的（可能至少是您问题的一部分）：

```
void setCard(int i, card c) {handCards[i]=&c;} 
```

在这里，按值`setCard(...)`传递一个`card`对象。这意味着`card`在临时位置创建调用者的新副本。正是这个副本 ( `c`)`setCard()`起作用。通过设置`handCards[i]=&c;`，您可以保存此临时对象的位置。但是当`setCard()`返回时，该临时对象不再有效。

但是然后你继续取消引用`handCards[i]`. `getCard()`这会产生未定义的行为。理论上，你应该期待恶魔开始从你的鼻子里飞出来。在实践中，您会看到从`getCard()`. 或者崩溃。或者，如果你够倒霉，最后一个值传入`setCard()`.

总的来说，看起来你在用指针玩得又快又松。我建议解决问题的两种方法之一：

1.  到处使用指针，永远不要按值传递或返回。这可能会导致其他问题，但它们可能并不那么神秘。
2.  无处使用指针。按值传递和返回所有内容。

当然，这些不是唯一的选择，但它们可能暂时让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:34:48.837

正如其他人所指出的那样，问题在于您将临时变量的地址存储在指针变量中，并在临时变量超出范围（并已被删除）后取消引用该指针变量。

让我的回答更深入一点：

在 C++ 中，我们区分了值类和多态类。你会发现它们有不同的名字，你还会发现两者之间的区别并不像人们想象的那么明显，但大致是这样的：

1.  值类实例的状态彼此不同。如果两个实例的状态相等，则实例的行为也将相等。

    值类的示例是`std::string`、所有 STL 容器`std::complex<>`等。

    您可以像使用`int`s 一样使用它们：在堆栈上创建它们：

    ```
    std::string s = "Hello, World"; // NOT std::string * s = new std::string; 
    ```

    按值聚合它们：

    ```
    class Widget {
        std::complex<double> m_value; // NOT std::complex<double> * m_value;
    public:
        // ...
    }; 
    ```

    您通常可以比较它们是否相等，复制它们，将它们存储在容器中：

    ```
    std::vector<std::string> vec;
    std::string s = "Hello, World";
    assert( s == "Hello, World" );
    vec.push_back( s ); 
    ```

    并且，与您的问题最相关的是，您通过 (const-)reference （或按值，特别是如果它们非常小）传递它们，并且您也按值返回它们：

    ```
    void func(const std::vector<double> & vec); // ok, just reading 'vec'
    void func(std::vector<double> & vec); // ok, possibly writing to 'vec'
    void func(std::vector<double> vec); // not so good, expensive in C++03; ok in C++11 in some situations
    std::vector<double> func(); // ok, return value optimisation (look it up!) will make this fast 
    ```

2.  多态类的行为不同，而不是状态。多态类的两个实例可能具有相同的状态，但行为仍然完全不同。多态类的状态也*可能*不同，但重点在于它们的行为。这就是 OOP（面向对象编程）的全部内容。

    从著名的 C++ 库“Qt”中借用示例类，a`QLineEdit`和 a`QPushButton`都是`QWidget`s。它们可能具有相同的状态（大小、位置……），但是当您用鼠标单击每个状态时，它们之间会发生完全不同的情况。

    在 C++ 中，要使用多态行为，您必须调用*虚*函数，并且必须通过指向公共基类的指针或引用来实现（`QWidget`如上）。因此，多态类通常分配在堆上：

    ```
    QLineEdit * le = new QLineEdit();
    QPushButton * pb = new QPushButton();

    QWidget * leAsWidget = le; // works
    QWidget * pbAsWidget = pb; // works 
    ```

    并在（智能）指针变量中存储和传递：

    ```
    class MyWidget : public QWidget {
        QLineEdit * m_lineEdit;
        QPointer<QPushButton> m_pushButton; // QPointer is a smart pointer
    public:
        // ...
    }; 
    ```

对于您的程序，您必须决定是否需要`deck`以及是否`hand`是多态的。

如果是，请在堆上创建它们（使用`new`），通过指针存储和传递它们，并且不要忘记在完成它们后再次删除它们（或查看智能指针）。

如果不是，则给它们关系运算符（`bool operator==(const deck &lhs, const deck &rhs)`, ...），复制语义（`deck(const deck&)`, `deck &operator=(const deck&)`），在堆栈上创建它们并按值存储它们。通过 (const) 引用传递它们。您不需要删除它们，编译器会为您执行此操作。

# r - 循环下载数据，多久保存一次该信息

> ID：11131341
> 
> 赞同：1
> 
> 时间：2012-06-21T04:04:36.280
> 
> 标签：r, loops, download, save

我正在使用 R，但这个问题并不特定于它。假设您编写了一些循环，在每次迭代时下载一个 url。您想保存此数据，因此您可以在每次迭代时保存该信息并在每第 n 次迭代时保存它。这样做有什么一般的经验法则吗？一直打开和关闭要写入的文件有多慢？我的想法是

```
for (i in 1:1000) {
   data <- url("http://...i")
   write.table(data, file="file")
} 
```

与这样的东西相比

```
data <- list()
length(data) <- 20
j <- 1
for (i in 1:1000) {
   data[j] <-url("http://...i")
   j <- j+1
   if (j = 20) {j <-1}
   if (i %% 20 == 0) {
      write.table(data, file="file")
      }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:22:07.160

如果您下载的所有数据都具有相同的形式，您可能希望将`append`它们保存到一个唯一的文件中，在这种情况下，您可以在每次迭代时执行此操作。这是一个简短的例子：

```
sites<-c("714A","715A","716A")
for(i in 1:length(sites)){
    data<-read.table(file=paste("http://www.ngdc.noaa.gov/mgg/geology/odp/data/115/",sites[i],"paleomag.txt",sep="/"),sep="\t",header=TRUE)
    #In this example i downloaded paleomagnetic data from deep sea drilling sites.
    ifelse(i==1,h<-TRUE,h<-FALSE)  #Here the idea is that we want to output the column names only the first time.
    write.table(data,file="paleomag_leg115.txt",sep="\t",append=!h,col.names=h,row.names=FALSE)
    } 
```

# android - 制作搜索框所需的建议

> ID：11131345
> 
> 赞同：1
> 
> 时间：2012-06-21T04:05:01.383
> 
> 标签：android, database

我正在开发一个安卓应用程序。我的应用程序包含一个具有两个编辑文本字段的活动。第一个编辑文本字段存储用户输入的标题，下一个编辑文本字段存储用户输入的关于用户刚刚输入的标题的故事或数据。这些条目被保存在数据库表中。

我试图制作一个搜索框，可以找到输入的条目。我为搜索框阅读了以下页面 [http://android-helper.blogspot.in/2011/03/android-search-in-listview-example.html](http://android-helper.blogspot.in/2011/03/android-search-in-listview-example.html) ，但在这里他们最初将所有列表项存储起来在一个字符串数组中。

我想从数据库中获取标题字段，当用户在搜索框中输入特定单词时，只应显示输入了该特定单词的那些标题。

这是我主要活动的部分代码，即日记活动。

```
 public class DiaryActivity extends Activity implements OnClickListener,
        OnItemClickListener {

    public static final String ROW_ID = "row_id";
    static long row_passed;
    ImageButton add;
    ListView list;
    public static int position_item;
    static long id_item_clicked;
    SimpleCursorAdapter myAdapter;
    DataHolder myDataHolder; // <-- database class
    EditText Text;
    static String title = "";
    static String story = "";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initialiseVariables();
        registerForContextMenu(list);

        add.setOnClickListener(this);
    }

    @SuppressWarnings("deprecation")
    private void initialiseVariables() {
        // TODO Auto-generated method stub
        add = (ImageButton) findViewById(R.id.addButton);
        list = (ListView) findViewById(R.id.mylist);
        try {
            myDataHolder = new DataHolder(DiaryActivity.this);
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        try {
            myDataHolder.open();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            String error = e.toString();
            Dialog d = new Dialog(this);
            d.setTitle("Error");
            TextView tv = new TextView(this);
            tv.setText(error);
            d.setContentView(tv);
            d.show();

        } finally {
            Cursor c = myDataHolder.getAll();
            c.moveToFirst();
            // Log.d("Message", c.getString(1));
            myAdapter = new SimpleCursorAdapter(DiaryActivity.this,
                    R.layout.mystoryholder, c, new String[] {
 // get the date from the system
                    DataHolder.KEY_TITLE, DataHolder.KEY_DAY,
                            DataHolder.KEY_MONTH, DataHolder.KEY_YEAR },
                    new int[] { R.id.titleTag, R.id.tvDate, R.id.tvMonth,
                            R.id.tvYear });
            list.setAdapter(myAdapter);

            list.setOnItemClickListener(this);
            myDataHolder.close();
        }

    } 
```

如何从数据库中获取 title_fields 中的所有条目，并将它们转换为单独的字符串并将它们放入字符串数组中，因为一旦 title_fields 中的条目可以覆盖到字符串数组中，那么上面的页面示例才能用于进一步编码。

# html - 在文本字段中输入值错误

> ID：11131347
> 
> 赞同：1
> 
> 时间：2012-06-21T04:06:07.300
> 
> 标签：html

当我在我的 html 的文本字段（除第一个文本字段）中输入数据时，它将自动到达我的 html 表单中的第一个文本字段

```
<form name="f" action="product.php" method="post">
                <td><h4><u>User Login:</u></h4></td>
                <tr><td >Username:</td><td><input type="text" name="user" class="style" placeholder="Enter UserName" /></td></tr>
                <tr><td>password:</td><td><input type="password" name="pass" class="style" placeholder="Enter Password" /></td></tr>
                <tr><td></td>
                <td><input type="submit" name="submit" value="submit"  /><input type="button" name="newuser" value="Newuser"onclick="self.location="Newuser.jsp"" />`enter code here`</td></tr>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:44:55.903

这可能是因为您在页面完全加载之前在密码中输入数据，并且当它这样做时光标跳转到用户名文本框，它在 HTML 中是第一个。经常发生在我身上！

# windows - RegOpenKeyEx/RegGetValue 在存在的键上返回 ERROR_FILE_NOT_FOUND

> ID：11131353
> 
> 赞同：9
> 
> 时间：2012-06-21T04:07:18.607
> 
> 标签：windows, registry

注册表函数在确实存在的键上返回“未找到”。我有正确的字符集并使用双反斜杠，所以这不是问题。

这是导出密钥的输出：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Netmon3]
"NetmonVersion"="3.4.2350.0"
"NPLVersion"="03.02"
"InstallDir"="C:\\prog\\netmon3\\"
"NetmonEdition"="Capture and Parser Engine" 
```

这是函数调用：

```
x = RegOpenKeyExA(
           HKEY_LOCAL_MACHINE, 
           "SOFTWARE\\Microsoft\\Netmon3", 
           0, 
           KEY_READ, &hKey); 
```

返回值 x 为 2，表示`ERROR_FILE_NOT_FOUND`。不过，简单地使用“ `SOFTWARE\\Microsoft`”作为字符串可以正常工作。

调用 RegGetValue() 有同样的问题：

```
x = RegGetValueA(
        HKEY_LOCAL_MACHINE,
        "SOFTWARE\\Microsoft\\Netmon3",
        "InstallDir",
        RRF_RT_ANY,
        NULL,
        (PVOID)install_directory,
        &BufferSize
        ); 
```

同样，我得到 2 作为结果，这意味着找不到。

我检查了它的权限，所有“用户”都有“读取”权限。

无论我错过了什么，都必须看到一些明显的东西，但是绞尽脑汁，我看不到它。

--

Marsh Ray 的答案如下：我在 64 位系统上编译 32 位，而 Netmon3 安装是 64 位的。将构建设置更改为 64 位解决了该问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T04:19:29.157

也许您在 64 位 Windows 操作系统上作为 32 位进程运行？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-13T08:29:44.347

您也可以使用 32 位代码，但是您必须指定一个附加标志：

```
REGSAM flag = KEY_QUERY_VALUE|KEY_ENUMERATE_SUB_KEYS;

if(isWin64Bit()) flag |= KEY_WOW64_64KEY;
else flag |= KEY_WOW64_32KEY;

LONG err = ::RegOpenKeyEx(HKEY_LOCAL_MACHINE, SOME_REGKEY, 0, flag, &hKey); 
```

isWin64Bit 方法的实现可以在[这里](https://stackoverflow.com/questions/7011071/detect-32-bit-or-64-bit-of-windows)找到。

# c++ - 跨 dll 转换 void 指针

> ID：11131354
> 
> 赞同：2
> 
> 时间：2012-06-21T04:07:33.570
> 
> 标签：c++, dll, casting

在一个 dll 中，我正在做

```
std::vector<foo*>* v = new std::vector<foo*>();
foo* f = new foo();
v->push_back(f);
// size of v is 1
process->Result = static_cast<void*>(v);  // Result is of type void* 
```

在使用 dll 的 exe 中，我做

```
if (process->Result != NULL)
{
   std::vector<foo*>* v = static_cast<std::vector<foo*>*>(process->Result);
   int size = v->size(); // <-- size is garbage (221232 or something like that)   

} 
```

结果必须是`void*`. 有谁知道为什么我无法正确传回向量？我在选角方面做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:40:20.293

因为标准库数据结构如`std::vector`在头文件中实现，实际数据表示在编译器版本之间可能不同。如果你有一些用 VS2005 编译的代码和用 VS2010 编译的其他代码，你不能`std::vector`以这种方式可靠地返回 a。

假设`foo`组件之间的数据布局完全相同，您可以返回一个`foo*`已分配的原始指针数组[`HeapAlloc`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366597%28v=vs.85%29.aspx)。不要`malloc()`再次使用，因为您的组件正在使用不同的运行时库，并且您不能`free()`使用不同的分配器分配的东西。通过使用`HeapAlloc`and `HeapFree`，您正在使用在整个进程中共享的 Win32 标准分配器。

例如，您可以执行以下操作：

```
v->push_back(f);
HANDLE heap = GetProcessHeap();
foo **r = (foo **)HeapAlloc(heap, 0, (v->size() + 1) * sizeof(foo *));
std::copy(v.begin(), v.end(), r);
r[v->size()] = NULL; // add a sentinel so you know where the end of the array is
process->Result = r; 
```

然后在您的调用模块中：

```
foo **v = static_cast<foo**>(process->Result);
for (int i = 0; v[i] != NULL; i++) {
    printf("index %d value %p\n", i, v[i]);
}
HANDLE heap = GetProcessHeap();
HeapFree(heap, 0, v); 
```

# regex - 序列（？在正则表达式中不完整 - 负环视

> ID：11131356
> 
> 赞同：2
> 
> 时间：2012-06-21T04:07:45.220
> 
> 标签：regex, perl

使用 Jeffrey Friedl 的 Mastering Regular Expressions 3rd Ed 中的“负面环视”代码运行我的 perl 脚本时出现以下错误。（第 167 页）。有人可以帮我吗？

**错误信息：**

序列 (? 在正则表达式中不完整；由 <-- HERE in m/ ( (? <-- HERE / at /home/wubin28/mastering_regex_cn/p167.pl 第 13 行。

**我的 perl 脚本**

```
#!/usr/bin/perl

use 5.006;
use strict;
use warnings;

my $str = "<B>Billions and <B>Zillions</B> of suns";

if ($str =~ m!
    (
        <B>
        (
            (?!<B>) ## line 13
            .
        )*?
        </B>
    )
    !x
    ) {
    print "\$1: $1\n"; #output: <B>Billions and <B>Zillions</B>
} else {
    print "not matched.\n";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T04:28:36.433

你使用符号的错误！用于打开和关闭正则表达式，同时使用负前瞻 (?!.)。如果您将打开和关闭符号更改为 { 和 }，或 //。您的正则表达式评估良好。

```
use strict;

my $str = "<B>Billions and <B>Zillions</B> of suns";

if ($str =~ m/(<B>((?!<B>).)*?<\/B>)/x) {
    print "\$1: $1\n"; #output: <B>Billions and <B>Zillions</B>
} else {
    print "not matched.\n";
} 
```

# c# - 如何在 WebMethod 中访问函数背后的代码？

> ID：11131358
> 
> 赞同：0
> 
> 时间：2012-06-21T04:08:06.233
> 
> 标签：c#, asp.net, web-services, webmethod

> **可能重复：**
> [从 WebMethod 访问函数背后的代码](https://stackoverflow.com/questions/4951248/accessing-code-behind-functions-from-webmethod)

我有以下 WebMethod，我通过 Json 调用它。它工作正常。

```
 [System.Web.Services.WebMethod]
public static string CheckUserName(string userName)
{
    string returnValue = string.Empty;
    try
    {
        string consString = ConfigurationManager.AppSettings["cn"].ToString();
        SqlConnection conn = new SqlConnection(consString);
        SqlCommand cmd = new SqlCommand("UsernameCheck", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@username", userName.Trim());
        conn.Open();
        returnValue = cmd.ExecuteScalar().ToString();
        conn.Close();
    }
    catch
    {
        returnValue = "error";
    }
    return returnValue;
} 
```

但正如我们所知，我们无法在静态函数中访问页面控件和函数背后的代码。

但是在这里我必须访问 WebMethod 中函数背后的代码。IE

```
public void test()
  {
   } 
```

请帮助我如何访问 webmethod 中的“测试”功能。在测试功能中，我使用了两个中继器控件和数据表。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:42:12.193

I understood you. But what you trying to do is not possible that way.

The webmethod is returned to a script inside the page, I guess, so you are not able to call another instance method from page.

What you may try is to do a postback to the same page after the result, and call the `test()` method again. Then you will be able to refresh your repeaters and datatable.

Another solution is to return the repeater as html by the webmethod.

# c++ - 如何检查安装的 OpenCV 是 64 位还是 32 位？

> ID：11131359
> 
> 赞同：2
> 
> 时间：2012-06-21T04:08:08.840
> 
> 标签：c++, opencv

如何检查是否安装了 64 位或 32 位 OpenCV？

我正在使用 VC++ 2010，32 位版本。

# netbeans - 在哪里可以找到我的 netbeans glassfish 安装？

> ID：11131361
> 
> 赞同：6
> 
> 时间：2012-06-21T04:08:30.290
> 
> 标签：netbeans, glassfish

我手动安装了一台 glassfish 服务器，一台安装了 netbeans IDE。我怎么知道哪一个安装了netbeans？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T04:14:41.940

NetBeans 安装的那个应该会自动注册到 NetBeans，所以转到 Tools -> Servers 菜单并选择 Glassfish 服务器。它会大致告诉您服务器的安装位置（它会为您提供 Domains 文件夹的位置，该文​​件夹位于根安装目录下）。

# php - 需要调用jquery函数，反之亦然

> ID：11131366
> 
> 赞同：0
> 
> 时间：2012-06-21T04:09:17.877
> 
> 标签：php, javascript, jquery, css

我有一个 jquery 函数，它控制一些将状态设置为活动或不活动的 css。它在点击事件上运行。当 php 函数运行时（当用户使用表单搜索时），我需要运行类似的函数。搜索词通过一个 php 函数，该函数将匹配具有 id 的词。如何使用 php 函数将状态设置为活动状态？这是测试区的链接

[http://vtour.dev4.webenabled.net/tester/index.html](http://vtour.dev4.webenabled.net/tester/index.html)

如果单击某个区域，则选择保持活动状态。如果您在 lavender 搜索框中键入名称，然后单击搜索图标，则不会选择相应的区域。

（附上搜索功能文件。我知道那里有一堆垃圾，但与此示例对应的部分从第 149 行开始

输入行旁边的小薰衣草框是点击/搜索图标

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:53:54.120

您可以通过输出 html 脚本标签来执行 javascript 函数。

IE。

```
<?php
echo "<script  type=\"text/javascript\">runJavascriptFunction()</script>";
?> 
```

因此，从技术上讲，您可以将其放入 FetchData.php 的响应中 - 但如果是我，我会使用 jQuery 完成所有操作：

```
$('#woodward-title-search-button').click(function() { //on button click
    var term = $('#searchTerm').val(); //the search term
    $('#room-'+term).css('background','red'); //or more nicely: .addClass('highlighted');
    //load the response of fetchdata into #myDiv
    $('#myDiv').load('FetchData.php?searchTerm='+term); 
}); 
```

我建议在 json 中与您的 PHP 进行通信，并提供某种 ID 以更好地定位您的 div .. 但这应该是一个低效且肮脏的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:43:56.170

你不能从 PHP 中做到这一点，你可以通过 Javascript 来做所有事情（请参阅 Ohgodwhy 的评论，尤其是关于使用 jQuery 或不使用 jQuery 的注释——你应该使用 .ajax() 或 .post() 例如）。

为此，AJAX 将返回一些标志来告诉 Javascript 打开/关闭哪些块，以及文本响应。您可以将所有这些包装在一个 JSON 对象中。

```
<?php

$returnArray = array('html' => 'HTML TO DISPLAY', 'blocks'=>array(1,3,4));
echo json_encode($returnArray);

?> 
```

并且在 javascript 中使用 JSON 对象元素来显示文本，然后还打开/关闭正确的块。这个位在 jQuesry 中会更容易，因为它会为您处理 JSON 对象，因此您只需要 response.html 用于 html 位，而 response.blocks 用于块。

# java - 需要一种在服务层实例化 ZipOutputStream 对象的方法

> ID：11131372
> 
> 赞同：1
> 
> 时间：2012-06-21T04:10:23.773
> 
> 标签：java, zipoutputstream

我的 bean 类中有以下代码块 -

```
HttpServletResponse response = (HttpServletResponse) getFacesContext().getExternalContext().getResponse();
ZipOutputStream zos = new ZipOutputStream(response.getOutputStream()); 
```

我从我的 bean 调用我的服务层，后者又调用数据库层，检索数据并将生成的文件写入服务层的 ZIP 文件中。我有一个问题，如果没有生成文件，我不知道该怎么做。

当我在我的 bean 中实例化 ZipOutputStream 对象时，它会创建一个 ZIP 文件并打开一个“Opening Extracts.zip”窗口，当我单击“确定”时，我收到一个错误，因为 ZIP 文件夹中没有文件。

somoone 可以告诉我是否有任何方法可以将 zos 实例化移动到服务层而无需传递响应对象？

谢谢，拉兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:02:52.750

我发现我可以执行以下操作来解决我的问题 -

在我的 bean 类中，我编写了以下代码 -

```
HttpServletResponse response = (HttpServletResponse) getFacesContext().getExternalContext().getResponse();
ByteArrayOutputStream outputStream = null;

try {
    outputStream = //Call service to generate the extract, return outputStream ; 
    if(outputStream != null){
    response.setContentType(T3Constants.MIME_ZIP);
    response.setHeader(T3Constants.CONTENT_DISPOSITION, ATTACH_FILE_NAME);
    response.getOutputStream().write(outputStream.toByteArray());
    response.flushBuffer();
    FacesContext.getCurrentInstance().responseComplete();
    outputStream.close();
    } else {
    formatFacesMessage(FacesMessage.SEVERITY_WARN, "No data for selected filter", "No data for selected filter");
    }
} 
```

在我的服务中，我编写了以下代码 -

```
ByteArrayOutputStream outputStream = null;
if(CollectionUtils.isNotEmpty(list returned from DB)) {
    outputStream = new ByteArrayOutputStream();
    ZipOutputStream zos = new ZipOutputStream(outputStream);
    //Add files to ZIP
    outputStream = new ByteArrayOutputStream();
    workbook.write(outputStream);
    zos.putNextEntry(new ZipEntry(xlsName.toString()));
    zos.write(outputStream.toByteArray());
    zos.flush();
    zos.close();
return outputStream;
} 
```

谢谢，拉兹

# iphone - 从第二个数组更新自定义类对象数组

> ID：11131376
> 
> 赞同：0
> 
> 时间：2012-06-21T04:10:59.870
> 
> 标签：iphone, objective-c, nsmutablearray

我有一个自定义类对象（catalogItem）的数组（项目）每个catalogItem都有各种属性，其中一个是称为标题的母带

我正在尝试从第二个数组（tempCaption）中的nsstrings更新items数组中每个catalogItem中的这个catalogItem.caption

我知道要遍历数组，但我似乎无法正确使用语法，因为我似乎在做的是每个 catalogItem.caption 循环遍历 tempCaption 数组中的每个 nsstring。所以它迭代了 49 次而不是它应该的 7 次。catalogItem.caption 最终都是 tempCaption 数组中的最后一项。

视图控制器.m

```
-(void)parseUpdateCaptions
{
NSMutableArray *tempCaptions = [NSMutableArray array];
//get server objects
PFQuery *query = [PFQuery queryWithClassName:@"UserPhoto"];
NSArray* parseArray = [query findObjects];
    //fast enum and grab strings and put into tempCaption array
       for (PFObject *parseObject in parseArray) {
        [tempCaptions addObject:[parseObject objectForKey:@"caption"]];
    }

//fast enum through each array and put the capString into the catalogItem.caption slot
//this iterates too much, putting each string into each class object 7 times instead of just putting the nsstring at index 0 in the temCaption array into the catalogItem.caption at index 0, etc. (7 catalogItem objects in total in items array, and 7 nsstrings in tempCaption array)
for (catalogItem in items) {
    for (NSString *capString in tempCaptions) {
            catalogItem.caption = capString;
            DLog(@"catalog: %@",catalogItem.caption);
        }
}

} 
```

如果需要 - 类对象 header.h

```
#import <Foundation/Foundation.h>

@interface BBCatalogClass : NSObject

@property (nonatomic, strong) NSData *image;
@property (nonatomic, strong) NSData *carouselImage;
@property (nonatomic, strong) NSString *objectID;
@property (nonatomic, strong) NSString *caption;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:18:43.440

我会尝试传统的 for 循环而不是快速枚举。*如果*我理解正确，这将起作用，两个数组的索引是对齐的。

```
for(int i = 0; i<items.count; i++) {
  catalogItem = [items objectAtIndex:i]; 
  catalogItem.caption = [tempCaptions objectAtIndex:i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:37:09.873

您正在使用嵌套的 for 循环进行迭代。这意味着总迭代计数将是 (items.count * tempCaptions.count)。

所以，要么你应该在一个循环中快速迭代，要么你应该使用上面建议的传统方法。

# javascript - 如何通过 javaScript 访问类名

> ID：11131382
> 
> 赞同：1
> 
> 时间：2012-06-21T04:11:38.560
> 
> 标签：javascript

我想通过 javaScript 访问类“pdocCover”以设置正文的宽度和高度。我应该怎么做？。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generated by PubliForge, $Date: 2012/02/03 12:17:54 $ -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="Content-Language" content="en"/>
<title>Couverture</title>
<link rel="StyleSheet" href="Css/reset.css" type="text/css"/>
<link rel="StyleSheet" href="Css/publidoc.css" type="text/css"/>
<link rel="StyleSheet" href="Css/main.css" type="text/css"/>
</head>
<body class="pdocCover">
<div>
  <img src="Images/9782919504060.png" alt="Couverture"/>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:21:27.587

通过使用 jQuery

```
$(".pdocCover").css("height","500px");
$(".pdocCover").css("width","500px"); 
```

通过使用 JavaScript

```
document.getElementsByClassName('pdocCover').style.height="500px;"
document.getElementsByClassName('pdocCover').style.width="500px;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:22:52.970

为了实现您具体描述的内容：

```
document.getElementsByClassName('pdocCover')[0].width = '100px' 
```

...但这可能不是你想要的。一方面，您可以通过以下方式`body`更快速、更清晰地访问：

```
document.getElementsByTagName('body')[0] 
```

如果这是您尝试做的，这不会改变窗口本身的宽度或高度。除非您创建一个新窗口，否则您`window.open`无法控制窗口大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T04:40:03.057

`document.getElementByClassName("Classname")`应该返回具有类“classname”的对象数组。通过选择索引来选择你的一个：[0] 第一个元素，[1] 第二个等。

# javascript - jquery中element.each和.each(element)的区别

> ID：11131384
> 
> 赞同：3
> 
> 时间：2012-06-21T04:12:01.410
> 
> 标签：javascript, jquery

和有什么区别

```
$(element).each(function(){
}); 
```

和

```
$.each("element",function(){
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:15:01.257

有*区别*。根据[文档](http://api.jquery.com/jQuery.each/)：

> $.each() 函数与 $(selector).each() 不同，后者用于以独占方式遍历 jQuery 对象。$.each() 函数可用于迭代任何集合，无论是映射（JavaScript 对象）还是数组。在数组的情况下，回调每次都会传递一个数组索引和一个对应的数组值。（该值也可以通过 this 关键字访问，但 Javascript 将始终将 this 值包装为一个对象，即使它是一个简单的字符串或数字值。）该方法返回其第一个参数，即被迭代的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T04:23:13.523

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

[http://api.jquery.com/each/](http://api.jquery.com/each/)

# hibernate - Hibernate：执行“按位与”运算的最佳方法是什么？

> ID：11131385
> 
> 赞同：0
> 
> 时间：2012-06-21T04:12:15.233
> 
> 标签：hibernate, jakarta-ee, bitwise-operators, bitwise-and

我的项目我使用hibernate（3.5.6）与db交互。我使用DetachedCriteria和projections API来形成我的一般查询。

```
DetachedCriteria detachedCriteria = DetachedCriteria.forClass(<ClassName>.class,"rp");
detachedCriteria.setProjection(Projections.count("<field>"));
detachedCriteria.add(Restrictions.eq("<field>", field));
count = (Long) getHibernateTemplate().findByCriteria(detachedCriteria).get(0); 
```

现在我想对值执行“**按位与**”运算。我可以使用相同的方法来执行“按位与”运算。如果不是，最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:30:06.560

自己想出了解决方案..

关键是将默认的“方言”扩展到您的自定义方言，并为按位和操作注册您的自定义方法

```
public class MySQLDialect extends org.hibernate.dialect.MySQLDialect {
    public MySQLDialect() {
       super();
       registerFunction("bitwise_and", new MySQLBitwiseAndSQLFunction("bitwise_and", Hibernate.INTEGER));
   }
} 
```

这是完整解释的链接：[https ://forum.hibernate.org/viewtopic.php?t=940978](https://forum.hibernate.org/viewtopic.php?t=940978)

干杯:)..

# powershell - 有一个可选参数，需要另一个参数存在

> ID：11131389
> 
> 赞同：10
> 
> 时间：2012-06-21T04:13:17.890
> 
> 标签：powershell, powershell-2.0

很简单，我如何初始化`params`我的 Powershell 脚本的一部分，这样我就可以有一个命令行参数，比如

```
Get-Foo [-foo1] <foo1Arg> [-foo2 <foo2Arg> [-bar <barArg>]] 
```

所以我唯一可以使用的时间`-bar`是`foo2`定义的时间。

如果`-bar`不依赖`-foo2`我可以做

```
[CmdletBinding()]
param (
    [Parameter(Mandatory=$true)]
    [string]$foo1,

    [string]$foo2,

    [string]$bar
) 
```

但是我不知道如何制作该依赖参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T11:04:11.930

我对原始问题的阅读与 CB 略有不同。从

```
Get-Foo [-foo1] <foo1Arg> [-foo2 <foo2Arg> [-bar <barArg>]] 
```

第一个参数 $foo1 始终是强制性的，而如果指定了 $bar，则也必须指定 $foo2。

所以我的编码是把 $foo1 放在两个参数集中。

```
function Get-Foo
{
[CmdletBinding(DefaultParameterSetName="set1")]
param (
    [Parameter(ParameterSetName="set1", Mandatory=$true, Position=0)]
    [Parameter(ParameterSetName="set2", Mandatory=$true, Position=0) ]
    [string]$foo1,
    [Parameter(ParameterSetName="set2",  Mandatory=$true)]
    [string]$foo2,
    [Parameter(ParameterSetName="set2", Mandatory=$false)]
    [string]$bar
)
    switch ($PSCmdlet.ParameterSetName)
    {
        "set1"
        {
            $Output= "Foo is $foo1"
        }
        "set2"
        {
            if ($bar) { $Output= "Foo is $foo1, Foo2 is $foo2\. Bar is $Bar" }
            else      { $Output= "Foo is $foo1, Foo2 is $foo2"}
        }
    }
    Write-Host $Output
}

Get-Foo -foo1 "Hello"
Get-Foo "Hello with no argument switch"
Get-Foo "Hello" -foo2 "There is no bar here"
Get-Foo "Hello" -foo2 "There" -bar "Three"
Write-Host "This Stops for input as foo2 is not specified"
Get-Foo -foo1 "Hello" -bar "No foo2" 
```

然后，当您运行上述内容时，您将获得以下输出。

```
Foo is Hello
Foo is Hello with no argument switch
Foo is Hello, Foo2 is There is no bar here
Foo is Hello, Foo2 is There. Bar is Three
This Stops for input as foo2 is not specified

cmdlet Get-Foo at command pipeline position 1
Supply values for the following parameters:
foo2: Typedfoo2
Foo is Hello, Foo2 is Typedfoo2\. Bar is No foo2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T05:01:50.190

您需要 ParameterSet，阅读此处了解更多信息：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd878348(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878348(v=vs.85).aspx)

[http://blogs.technet.com/b/heyscriptingguy/archive/2011/06/30/use-parameter-sets-to-simplify-powershell-commands.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2011/06/30/use-parameter-sets-to-simplify-powershell-commands.aspx)

您的代码示例：

```
[CmdletBinding(DefaultParameterSetName="set1")]
param (
    [Parameter(ParameterSetName="set1", Mandatory=$true)]
    [string]$foo1,
    [Parameter(ParameterSetName="set2",  Mandatory=$true)]
    [string]$foo2,
    [Parameter(ParameterSetName="set2")]
    [string]$bar
) 
```

# java - 这段代码如何在 JAVA 中用于 JUnit？

> ID：11131392
> 
> 赞同：0
> 
> 时间：2012-06-21T04:13:29.167
> 
> 标签：java

我有以下用于 JUnit 测试的代码：

```
import static org.junit.Assert.assertEquals;
import org.junit.Before;
import org.junit.Test;
public class JUnitHelloWorld {
    protected String s;
    @Before
    public void setup() {
        s = "HELLO WORLD";
    }
    @Test
    public void testHelloWorldSuccess() {
        s = s.toLowerCase();
        assertEquals("hello world", s);
    }
    // will fail even if testHelloWorldSuccess is called first
    @Test
    public void testHelloWorldFail() {
        assertEquals("hello world", s);
    }
} 
```

现在，根据评论，为什么即使先调用第一种方法，第二种方法也会失败？第一种方法不是将 s 的值更改为小写吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:15:19.353

`@Before`发生在每次测试之前。这意味着您运行它们的顺序无关紧要，因为它将始终执行设置然后进行测试。

该标签`@BeforeClass`将为您提供您所期望的行为。这会在您的任何测试开始之前运行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:18:28.387

JUnit 不会按照您的代码顺序运行每个测试用例（使用 @Test 的方法）。这就是为什么每个测试用例必须相互独立的原因。

此外，带有@Before 标签的设置方法将始终在您的每个测试方法之前运行。

因此，您的代码执行顺序可能（但不一定）是：

1.  设置（）
2.  测试HelloWorldSuccess()
3.  设置（）
4.  测试HelloWorldFail()

但它也可能运行：

1.  设置（）
2.  测试HelloWorldFail()
3.  设置（）
4.  测试HelloWorldSuccess()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T04:23:34.983

对于 JUnit ，测试用例的执行顺序是不固定的。您可能会在方法 m1 之后编写方法 m2 并且在执行时 m2 首先执行。最好的方法是你的测试用例不应该基于测试用例的执行顺序。如果您只想为整个班级执行一次，请尝试@BeforeClass。

对于上述情况，试试这个：

```
 protected String s;
    private int flag ;
       @BeforeClass
       public beforeClass(){
           flag = 0;
       }
        @Before
        public void setup() {
            s = "HELLO WORLD";

        }
        @Test
        public void testHelloWorldSuccess() {
        flag = 1;
            s = s.toLowerCase();
            assertEquals("hello world", s);
        }
        // won't fail even if testHelloWorldSuccess is called first
        @Test
        public void testHelloWorldFail() {
        if(flag == 1)
            assertEquals("hello world", s);
        else
        assertEquals("HELLO WORLD", s);
        } 
```

# jquery - 浏览器兼容性问题（使用 jQuery、css 时）

> ID：11131393
> 
> 赞同：0
> 
> 时间：2012-06-21T04:13:34.657
> 
> 标签：jquery, html, css, cross-browser

以下是该网站的网址： http: [//bit.ly/mykwikweb](http://bit.ly/mykwikweb)

网站在 IE 中加载了一些组件，而另一些在 Mozilla、Opera、Chrome 或 safari 中无法运行，甚至对齐方式也会随着浏览器的变化而变化。
我使用过 CSS、Jquery 和一些 AJAX 调用。
我想知道使用哪种模式？严格模式还是怪癖模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:48:10.977

有效的文档类型将修复怪癖模式问题。删除您拥有的注释并从那里开始，将脚本拉到外部文件，或包装在 CDATA 注释中以使验证更容易，并确保您在 w3c 验证器中没有损坏的标签。这是一个网站开发网站，假设他们需要 100% 的验证

jQUery 不支持怪癖模式。在页面中包含脚本是完全可以接受的，我建议使用外部文件的唯一原因是简化验证，因为您似乎遇到了麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:39:24.877

一些 CSS 属性将依赖于浏览器。因此请检查您的 CSS 属性是否只支持 IE。

# android - 开发 Java 跨平台库（移动和 Web）

> ID：11131394
> 
> 赞同：0
> 
> 时间：2012-06-21T04:13:42.537
> 
> 标签：android, sockets, java

有这么多跨平台库，我有点迷失了，无法回答一个非常基本的 java 问题。

我有一个在 Android 上运行良好的 java 库。它不使用任何特定于 android 的功能，并且基于标准 java sdk 构建。这个库使用套接字（简单的 Socket，ServerSocket 有点架构）在库和托管的服务器（可能在 ec2 或一些虚拟公共服务器上）之间进行通信。

现在我的问题是，其他开发人员是否可以将我的 java 库（使用 java sdk 构建）导入使用 html/css 作为用户界面的应用程序，将所有这些打包到 iPhone 的移动应用程序中（使用原生 iPhone 打包和 WebView发射） ？我也可以发布这个库，以便其他软件开发人员可以构建一个在桌面和跨浏览器上工作的 Web 应用程序吗？

关于 stackoverflow 的一些问题与我正在寻找的问题很接近，但并不完全存在。 [为多个平台开发移动应用程序（没有跨平台框架！）](https://stackoverflow.com/questions/3691745/developing-mobile-apps-for-multiple-platforms-without-a-cross-platform-framewor)

*   网络服务器是否能够使用通过套接字连接到服务器的库？
*   连接到该网络服务器的每个客户端都会创建我的库的新实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:30:24.390

如果您的库不使用任何对 Android 或任何其他库的依赖项，那么其他开发人员几乎可以在他们想要的任何地方使用它。尽管请记住，像 EC2 这样的平台可能具有使用通信的首选方式。（我不是 EC2 方面的专家，所以你必须看看他们使用什么。）

所以我想最好将套接字功能抽象出来。

我认为您不能在 iPhone 中使用 Java 库。iOS 使用条款明确规定您不能在设备上使用除 SDK 和 Safari 中的 webkit javaScript 引擎之外的编译器或解释器。所以你的 Java 代码不可能在 iPhone 上运行（没有越狱。）

我不明白关于 webView 的问题。您的意思是导航到由您的图书馆提供支持的网站吗？如果是，那么只要您将其保留在 Safari 的边界内即可。（没有 Flash，没有 Java Applet 等）

> 网络服务器是否能够使用通过套接字连接到服务器的库？

多半是对的。但正如我所说，该平台可能不允许原始连接，因此最好将其抽象出来。

> 连接到该网络服务器的每个客户端都会创建我的库的新实例吗？

这取决于您的库及其公共 API 的设计。

希望这可以帮助。

# rdlc - 如何使用 RDLC 报告更新动态 NAV 中的报告？

> ID：11131395
> 
> 赞同：0
> 
> 时间：2012-06-21T04:13:53.050
> 
> 标签：rdlc, dynamics-nav

如何使用 Role Tailored Client Report 编写函数来更新 Microsoft Dynamic NAV 中的记录？

提前谢谢，马卡拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:41:50.610

您可以在报告触发器中放置代码。

下面是一个简单的代码示例，可以放入引用 Customer 表的 Customer 数据项的 OnAfterGetRecord 触发器。

```
IF Customer.Name[1] = 'A' THEN BEGIN
  Customer.Name[1] := 'B';
  Customer.MODIFY;
END 
```

上面的代码将报告中包含的以大写“A”开头的任何客户姓名的第一个字符更改为大写“B”。

可以从 pastebin 中找到仅具有此功能且没有打印输出的完整报告： [Simple Dynamics Nav Report Sample](http://pastebin.com/HXADziCn)。

您可以将粘贴的全部内容复制到文本文件中，然后将其作为文本导入 Nav。

**但请注意**，这样做**会用此示例替换**任何以前的 id 为 50000 的报告，**而不会产生任何额外的警告或提示**。导入为文本的报告需要以编译的形式保存在 Nav 中，然后您才能运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:25:20.570

您不能将 C/AL 代码直接放在 RTC 报告上 - 相反，您应该在“经典”客户端/开发环境中使用 DataItems 后面的触发器，因为此代码对经典和 RTC 报告都是通用的，并在报告运行时执行在任一环境中。

用一个类似的例子；

```
Vendor - OnAfterGetRecord()
----------------------------

...

IF Vendor."Phone No." = '' THEN BEGIN
  Vendor."Phone No." := NewPhoneNo;
  Vendor.MODIFY;
END;

... 
```

您可能希望在报告本身上设置以下属性以隐藏打印对话框以及请求表单（假设您不希望应用过滤器）：

```
UseReqForm := FALSE;
ProcessingOnly := TRUE; 
```

另一个需要注意的重要事项是，位于部分后面的代码仅用于经典报告，如果在 RTC 中运行，则不会执行（这可能会导致意外结果）。

# ruby-on-rails - 通过 id 枚举用户的 Ruby on Rails 安全漏洞

> ID：11131403
> 
> 赞同：0
> 
> 时间：2012-06-21T04:15:04.003
> 
> 标签：ruby-on-rails, security

使用 Ruby on Rails，我的模型创建的唯一 ID 越来越多。例如，第一个用户的用户 id 为 1，第二个为 2，第三个为 3。

从安全角度来看，这并不好，因为如果有人可以窥探最后创建用户的用户 ID（可能通过创建新用户），他们可以推断出您的增长率。他们还可以轻松猜测用户 ID。

有没有使用随机 ID 的好方法？

人们对此做了什么？谷歌搜索并没有透露太多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:13:36.743

我不认为将用户 ID 公开为安全漏洞，应该有其他安全机制。当访问者发现您没有他们承诺的那百万用户时，也许这是一个“营销安全漏洞”；-)

反正：

为了完全避免 url 中的 ID，您可以在所有地方使用用户的登录名。确保登录名不包含一些特殊字符（`./\#?`等），这些字符会导致路由出现问题（使用白名单正则表达式）。此外，登录名以后可能不会更改，如果您的页面有硬链接/搜索引擎条目，这可能会导致麻烦。

示例调用是`/users/Jeff`and`/users/Jeff/edit`而不是`/users/522047`and `/users/522047/edit`。

在您的用户类中，您需要覆盖`to_param`以使用登录名而不是用户的 id。这样就不需要替换路由文件中的任何内容，也不需要替换`link_to @user`.

```
class User < ActiveRecord::Base
  def to_param
    self.login
  end
end 
```

然后在每个控制器中替换`User.find`为`User.find_by_login`：

```
class UsersController < ApplicationController

  def show 
     @user = User.find_by_login(params[:id])
  end

end 
```

或者使用 a`before_filter`替换之前的参数。对于具有嵌套资源的其他控制器，请使用`params[:user_id]`：

```
class UsersController < ApplicationController

  before_filter :get_id_from_login

  def show 
     @user = User.find(params[:id])
  end

  private 
  # As users are not called by +id+ but by +login+ here is a function
  # that converts a params[:id] containing an alphanumeric login to a 
  # params[:id] with a numeric id
  def get_id_from_login
    user = User.find_by_login(params[:id])
    params[:id] = user.id unless user.nil?
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:19:24.617

即使您会生成随机 INTEGER id，它也可以很容易地被破坏。您应该为每个用户生成一个随机令牌，例如 MD5 或 SHA1（“asd342gdfg4534dfgdf”），然后它会对您有所帮助。您应该使用此随机哈希链接到用户配置文件。

请注意，这实际上不是**哈希**概念，它只是一个随机字符串。

例如，另一种方法是用他们的昵称链接到用户。

但是，我的猜测是知道用户 ID 或用户数或用户增长率本身并不是漏洞！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:30:22.207

将一个名为`random_id`或任何您想要的字段添加到您的用户模型。然后在创建用户时，将此代码放在您的 UsersController 中：

```
def create
  ...
  user.random_id = User.generate_random_id
  user.save
end 
```

并将此代码放在您的 User 类中：

```
# random_id will contain capital letters and numbers only
def self.generate_random_id(size = 8)
  alphanumerics = ('0'..'9').to_a + ('A'..'Z').to_a
  key = (0..size).map {alphanumerics[Kernel.rand(36)]}.join

  # if random_id exists in database, regenerate key
  key = generate_random_id(size) if User.find_by_random_id(key)

  # output the key
  return key
end 
```

如果您也需要小写字母，请将它们添加到字母数字中，并确保您从内核中获得正确的随机数，即`Kernel.rand(62)`.

还要确保修改你的路由和其他控制器以使用`random_id`而不是默认的`id`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:08:06.557

您需要添加适当的授权层以防止未经授权的访问。

假设您`show`在控制器的操作中显示用户信息，`Users`代码如下所示：

```
class UsersController < ActionController::Base

  before_filter :require_user

  def show
    @user = User.find(params[:id])
  end

end 
```

此实现容易受到 id 猜测的影响。您可以通过确保显示操作始终显示登录用户的信息来轻松修复它：

```
def show
  @user = current_user
end 
```

现在，无论 URL 中给出什么 id，您都将显示当前用户配置文件。

假设我们要允许帐户管理员和帐户所有者访问显示操作：

```
def show
  @user = current_user.has_role?(:admin) ? User.find(params[:id]) : current_user
end 
```

使用像[CanCan](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGEQFjAA&url=https://github.com/ryanb/cancan&ei=HLriT9qYI6PY2gXz9vi9Cw&usg=AFQjCNHOGf1FuQRmMgIqArmb2ALmGmt6cQ&sig2=WzPx78NxOzJAHHn7Np_1tw)这样的 gem 可以更好地实现 OTH 授权逻辑。

# batch-file - 如何在我的批处理文件中引用目录中的所有 jar 文件

> ID：11131406
> 
> 赞同：5
> 
> 时间：2012-06-21T04:15:13.520
> 
> 标签：batch-file, jar, classpath

我创建了一个批处理文件“run.bat”：

```
set CLASSPATH=%CLASSPATH%.;.\Jars\app.jar;.\Jars\a.jar;.\Jars\b.jar;.\Jars\c.jar;.\Jars\d.jar;
java mypackage.mysubpackage.Start
pause 
```

我将所有与我的应用程序相关的类文件保存在“app.jar”中，并且 `Start`是应用程序开始执行的类。我有这个“run.bat”文件和我的“app.jar”想要在同一个目录中引用的所有 jar。
我将所有这些 jar 保存在“Jars”文件夹中，并在我的“run.bat”文件中引用它，如上所示。但是，要通过我的“run.bat”引用每个 jar 文件，我需要将路径指定为“.\Jars\jarname.jar”。当我使用“.\Jars\*.jar”时，“run.bat”不会引用这些罐子。任何人都可以提供替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:22:58.593

实际上，您使用 *.jar 只完成了一半的工作。您还需要将它们作为类路径传递给 java: `java -cp $CLASSPATH mypackage.mysubpackage.Start`。（在 Windows 上，我认为脚本中变量的使用是 %CLASSPATH%）

稍后编辑：查看 BigMike 对您的问题的评论。如果您使用的是 < 1.6 的 java 版本，则可能需要使用循环来构建完整的 %CLASSPATH% ，包括每个 jar 的全名，因为我猜 Windows 的 shell 不会像 *nix 那样进行[扩展](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:03:14.940

您可以尝试使用 for 循环批量创建类路径，如下所示。

```
@echo off
for %%jar in (.\Jars\*.jar) do call :add_jar %%jar

java -cp %CLASSPATH%;%JARS% mypackage.mysubpackage.Start
pause

exit /b

:add_jar
set JARS=%JARS%;%1
exit /b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-05T06:56:17.220

您可以尝试以下链接[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html中给出的内容](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)

了解类路径通配符部分：

> “包含 * 的类路径条目将不匹配类文件。要匹配单个目录 foo 中的类和 JAR 文件，请使用 foo;foo/* 或 foo/ *;foo。选择的顺序决定了类和资源是否在foo 在 foo 中的 JAR 文件之前加载，反之亦然。不递归搜索子目录。例如，foo/*仅在 foo 中查找 JAR 文件，而不在 foo/bar、foo/baz 等中查找。

所以在你的情况下你应该这样做：

```
set CLASSPATH=%CLASSPATH%.;.\Jars;.\Jars\* 
```

而**不是**

```
set CLASSPATH=%CLASSPATH%.;.\Jars;.\Jars\*.jar 
```

前提是您需要的所有罐子都存在于 .\Jars 文件夹中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-05T07:15:30.030

设置 CLASSPATH=%CLASSPATH%.;C:\data\Ideas\tool\Deliverables\webservice\batchjar;C:\data\Ideas\tool\Deliverables\webservice\batchjar*

这对我有帮助

# c# - 传递动态生成链接的文件位置

> ID：11131409
> 
> 赞同：1
> 
> 时间：2012-06-21T04:16:10.663
> 
> 标签：c#, asp.net, datagridview

使用 ASP.net 和 c# 使用 Visual Studio 2010

大家好，我希望有人可以帮助我。基本上我有一个页面，它有一个网格视图，其中一列中有一个链接按钮。我想做的是；用户单击该链接，它所引用的 PDF 文件将使用 site.master 加载到新页面中。以下是我目前拥有的代码。

起始页

```
SelectCommand="SELECT * FROM [Guides] WHERE (([Display] = ?) AND ([Media_Document] = ?))">

<SelectParameters>
    <asp:QueryStringParameter DefaultValue="true" Name="Display" 
    QueryStringField="checkbox" Type="Boolean" />
    <asp:QueryStringParameter DefaultValue="Document" Name="Media_Document" 
    QueryStringField="Media_Document" Type="String" />
</SelectParameters>

</asp:AccessDataSource>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server">
</asp:ObjectDataSource>

<asp:GridView ID="GridView1" runat="server" AllowPaging="True" AutoGenerateColumns="False" 
DataKeyNames="ID"  CssClass="mGrid"  RowStyle-CssClass="pgr"  AlternatingRowStyle-CssClass="alt"
DataSourceID="AccessDataSource1" Width="225px" style="text-align:left" 
GridLines="None" >

<AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>

<Columns>
    <asp:BoundField DataField="Guide" HeaderText="Guide" SortExpression="Guide" />
    <asp:HyperLinkField DataNavigateUrlFields="File_location" 
    DataNavigateUrlFormatString="Guides.aspx?File_location={0}" 
    Target="content" Text="Link" />
</Columns>

<RowStyle CssClass="pgr"></RowStyle>

</asp:GridView> 
</div> 
```

此代码正确生成链接，即 `Guides.aspx?File_location=blahblahblah.pdf`

**目标页面**

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <object width="800" height="800" data="File_Location"></object>
</asp:Content> 
```

这不起作用，因为`File_location`没有识别出有意义的变量。我可以在后面的代码中使用 c# 获取位置，但是如何在页面中显示它？

有任何想法吗？

**代码背后**

```
public partial class Guides : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        string Location = Request.QueryString.ToString();

        File_location(Location);

    }

    public void File_location(string location)
    {

        string File_Location = location.Substring(location.IndexOf('=') + 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:25:58.463

一种方法是在名为 File_Location 的页面后面的代码上有一个公共属性，然后您可以像这样引用它：

```
<object width="800" height="800" data="<%=File_Location%>"></object> 
```

在 Page_load 中设置值。

在代码隐藏中创建一个属性，如下所示：

```
public string File_location()
{
    get
    {
        string location = Request.QueryString;
        return = location.Substring(location.IndexOf('=') + 1);
    }
} 
```

# c - 对于较大的 switch case 语句，将它们分开会更好吗？

> ID：11131410
> 
> 赞同：2
> 
> 时间：2012-06-21T04:16:18.040
> 
> 标签：c, performance

快速提问。例如，使用大约 1000 个选项的更大情况：哪种方法是“最佳”方法？我并不是特别想要更快的结果。

```
switch (foo) {
    case 0: 
        // code ...
        break; 

    // One, two, skip a few...

    case 1000:
        // code ...
} 
```

或拆分可能结果的东西，以便它可以快速找到正确的案例陈述。也类似：

```
if (foo < 101) {
    if (foo < 51)
        switch (foo) {}
    else
        switch (foo) {}
} else if (foo > 100 && foo < 201) {

// skipped for convenience 

} else if (foo > 900) {
    if (foo < 951)
        switch (foo) {}
    else
        switch (foo) {}
} 
```

我想第二种方法对于较大的数字要快得多，但第一种方法似乎也可以轻而易举地通过它，因为它不是不断检查语句。是这些方法中的一种不受欢迎还是有更好的方法？这是针对 C 的，但我有兴趣了解它与其他语言的一致性。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T04:22:30.817

`switch`如果编译器使用跳转表来实现语句，它们的速度可能会非常快，但这仅在 的特殊序列上才有可能`cases`，并且可能不实用，它实际上取决于可能的`cases`. 编译器可能使用也可能不使用跳转表，我确实发现了这个[http://blog.jauu.net/2010/06/15/GCC-generated-Switch-Jump-Tables/](http://blog.jauu.net/2010/06/15/GCC-generated-Switch-Jump-Tables/)这很有趣。

JUMP 表可以非常快，因为它只计算偏移量并跳转到适当的地址。

GCC 确实有`-fno-jump-tables`完全禁用它。

有时您可以使用函数指针数组和特殊索引构建自己的跳转表，这可以使您的代码非常快，但并非在所有情况下都实用，假设您有一个开关，并且在每种情况下您都会调用一个函数，您可以构建一个函数指针数组，设置一个默认函数只是为了安全，然后你只需要做一个开关而不是一个开关，`fun_table[indice]();`我为我自己的虚拟机做了一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:20:01.177

我认为 switch 语句通常在底层汇编语言中被解释为 goto，这将使第一种方法明显更快。

这似乎支持这一点，尽管它并不完全证明：[http ://en.wikibooks.org/wiki/Optimizing_C%2B%2B/Writing_efficient_code/Performance_improving_features#Case_values_of_switch_statements](http://en.wikibooks.org/wiki/Optimizing_C%2B%2B/Writing_efficient_code/Performance_improving_features#Case_values_of_switch_statements)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T04:22:11.167

我相信 switch 语句更好，至少从代码可读性的角度来看（也许从速度的角度来看，因为它只选择一个块来运行，而必须评估多个条件，如第二个示例所示。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T04:27:00.477

是不是不建议任何功能应该适合大约 1.5 个屏幕，所以这么大的 switch 语句不适合这个账单。为了克服这个问题，有一个[调度](http://en.wikipedia.org/wiki/Dispatch_table)表。您所要做的就是对数组进行索引以找到要调用的适当函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T11:40:19.773

我发布这个只是为了提供信息，因为 samy.vilar 已经使用函数数组提供了最优雅的解决方案。如果您使用 GCC，它会理解大小写范围。此代码最终会以与您的第二个解决方案非常相似的方式运行，从而产生一些二叉树代码路径（假设没有编译器优化）。

```
int             nested_switch(int i)
{
  switch (i) {
    /* i is in the 1..10 range */
  case 1 .. 10:
    switch (i) {
      /* i is in the 0..5 range */
    case 1 .. 5:
      switch (i) {
      case 1:
        break;
      case 2:
        break;
      ...
      case 5:
        break;
      }
    case 5 .. 10:
      switch (i) {
      case 6:
        break;
      case 7:
        break;
      ...
      case 10:
        break;
      }
    }
    /* i is in the 11..20 range */
  case 11 .. 20:
    switch (i) {
      ...
    }
  }

  return 0;
} 
```

# c# - Linq 查询中的异常 (MVC2)

> ID：11131411
> 
> 赞同：1
> 
> 时间：2012-06-21T04:16:21.390
> 
> 标签：c#, linq, exception, asp.net-mvc-2

我的 Linq 查询出现以下错误：

> ExecuteReader 需要一个打开且可用的连接。连接的当前状态是打开的。

如果它需要一个打开的连接，并且连接是打开的......为什么这是一个错误？

这是有关此错误的 stackoverflow [帖子，解决方案是：](https://stackoverflow.com/questions/7878095/executereader-requires-an-open-and-available-connection-the-connections-curre)

> “基本上，我们的应用程序中有一些‘流氓查询’影响了整个事情的正常工作，所以我们只需要检查每一节课（全部 88 节课！）并检查它们是否正确编写。”

我试图找到我的查询的问题，但找不到。我测试了它，它得到了正确的结果。
这是我的查询：

```
int? result = Helper.GetResult(b).FirstOrDefault();
if (result.HasValue)
     //something
-----------------------------------------------------------
Inside Helper: 

private static PingDbDataContext pingDataContext = new PingDbDataContext(); 
public static IQueryable<int?> GetResult(string b)
{
    pingDataContext.CommandTimeout = 5000;
    pingDataContext.Log = new DebugTextWriter();
    var q = from a in pingDataContext.SomeTable
            where a.SomeColumn == b
            select a.id;
    return q;
} 
```

这是堆栈跟踪：

```
Exception information: 
    Exception type: InvalidOperationException 
    Exception message: ExecuteReader requires an open and available Connection. The connection's current state is open.
   at System.Data.SqlClient.SqlConnection.GetOpenConnection(String method)
   at System.Data.SqlClient.SqlConnection.ValidateConnectionForExecute(String method, SqlCommand command)
   at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.DataQuery`1.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at MyProject.Controllers.MyController.Index() in (path...)\MyProject\Controllers\MyController.cs:line 53
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClassd.<InvokeActionMethodWithFilters>b__a()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__4()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:47:57.153

由于这是一个 MVC 项目，并且您的数据上下文位于静态变量中，因此很可能是并发问题，就像 BrokenGlass 建议的那样。可以肯定的是，尝试在您的方法中创建数据上下文，如下所示：

```
public static IEnumerable<int?> GetResult(string b)
{
    using (PingDbDataContext pingDataContext = new PingDbDataContext())
    {
        pingDataContext.CommandTimeout = 5000;
        pingDataContext.Log = new DebugTextWriter();
        var q = from a in pingDataContext.SomeTable
                where a.SomeColumn == b
                select a.id;
        return q.ToList();
    }
} 
```

问题是否仍然存在？

编辑：我已经稍微改写了上面的方法。您不应该在数据上下文范围之外返回 IQueryable。在处理数据之前，您需要从数据库中检索数据。但无论如何，在您的数据访问代码之外公开 IQueryable 并不是一个好主意。仅当您想修改在您的方法之外运行的查询时才需要它。

# c# - Remove 方法不会从数据库中删除任何项目。

> ID：11131412
> 
> 赞同：1
> 
> 时间：2012-06-21T04:16:25.233
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

让我们看看我是否可以逐步明确：

```
namespace InventoryManager.Controllers
{
    public class InventoryController : ApiController
    {
        private readonly IInventoryRepository repository;

        //...

        public HttpResponseMessage DeleteItem(int id)
        {
            // Executes fine
            repository.Remove(id);
            return new HttpResponseMessage(HttpStatusCode.NoContent);
        }
    }
} 
```

正在执行中`Remove`定义的方法`InventoryRepository`：

```
namespace InventoryManager.Models
{
    public class InventoryRepository : IInventoryRepository
    {
        private InventoryContext context;

        //...

        public void Remove(int id)
        {
            InventoryItem item = context.Items.Find(id);

            // Executes fine
            context.Items.Remove(item);
        }
    }
} 
```

**但是，我检查了我的数据库并没有删除任何项目。为什么是这样？**可能缺少一些信息，所以请告诉我您还需要什么。

我在调试时遇到问题，因为我不在我的元素中。如果您有调试方法，或者我可以查找某些东西/关键字来帮助解决我的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T04:21:08.150

确保您提交对您所做的`Items`更改`DataContext`：

[**LINQ转SQL：**](http://msdn.microsoft.com/en-us/library/bb399378.aspx)

```
context.SubmitChanges(); 
```

[**实体框架：**](http://msdn.microsoft.com/en-us/library/bb336792.aspx)

```
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:26:13.567

尝试这个

```
public void Remove(int id)
        {
            InventoryItem item = context.Items.Find(id);
            context.Items.Remove(item);
            context.SaveChanges();
        } 
```

# mysql - 读取数据时遇到致命错误

> ID：11131429
> 
> 赞同：0
> 
> 时间：2012-06-21T04:19:49.320
> 
> 标签：mysql, vb.net, mysqlconnection

我正在进行定期更新表扫描

```
Using connect1 As New MySqlConnection(ConnectLocalhost.serverString)
    connect1.Open()
    Dim cmd = New MySqlCommand("set net_write_timeout=99999; set net_read_timeout=99999", connect1) ' // Setting tiimeout on mysqlServer
    cmd.ExecuteNonQuery()

    Dim BusinessReader = selectSomeQuery("Select * from tablebusiness limit 800,10000000", connect1)

    Do While BusinessReader.Read 'random exception here 
```

有时我得到这个错误

```
MySql.Data.MySqlClient.MySqlException was unhandled
  ErrorCode=-2147467259
  Message=Fatal error encountered during data read.
  Number=0
  Source=MySql.Data
  StackTrace:
       at MySql.Data.MySqlClient.MySqlDataReader.Read()
       at dreamhost.Business.InsertLocalhost() in \\work\c\business\fromwork\currentprojects\program\library\vb.net\badger.vb:line 1849
       at dreamhost.Business.surFoursquare() in \\work\c\business\fromwork\currentprojects\program\library\vb.net\badger.vb:line 1939
       at dreamhost.traverseweb._Lambda$__92() in \\work\c\business\fromwork\currentprojects\program\library\vb.net\traverseweb.vb:line 77
       at dreamhost.buttonClicking.startAndStopClickingButton(Object sender, Action SomeSub) in \\work\c\business\fromwork\currentprojects\program\library\vb.net\buttonclicking.vb:line 45
       at dreamhost.traverseweb.foursquare_Click(Object sender, EventArgs e) in \\work\c\business\fromwork\currentprojects\program\library\vb.net\traverseweb.vb:line 77
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(ApplicationContext context)
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine)
       at dreamhost.My.MyApplication.Main(String[] Args) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: MySql.Data.MySqlClient.MySqlException
       ErrorCode=-2147467259
       Message=Reading from the stream has failed.
       Number=0
       Source=MySql.Data
       StackTrace:
            at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
            at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
            at MySql.Data.MySqlClient.NativeDriver.FetchDataRow(Int32 statementId, Int32 columns)
            at MySql.Data.MySqlClient.Driver.FetchDataRow(Int32 statementId, Int32 columns)
            at MySql.Data.MySqlClient.ResultSet.GetNextRow()
            at MySql.Data.MySqlClient.ResultSet.NextRow(CommandBehavior behavior)
            at MySql.Data.MySqlClient.MySqlDataReader.Read()
       InnerException: System.IO.IOException
            Message=Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
            Source=MySql.Data
            StackTrace:
                 at MyNetworkStream.HandleOrRethrowException(Exception e)
                 at MyNetworkStream.Read(Byte[] buffer, Int32 offset, Int32 count)
                 at MySql.Data.MySqlClient.TimedStream.Read(Byte[] buffer, Int32 offset, Int32 count)
                 at System.IO.BufferedStream.Read(Byte[] array, Int32 offset, Int32 count)
                 at MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset, Int32 count)
                 at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
            InnerException: System.Net.Sockets.SocketException
                 ErrorCode=10054
                 Message=An existing connection was forcibly closed by the remote host
                 NativeErrorCode=10054
                 Source=System
                 StackTrace:
                      at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
                      at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
                 InnerException: 
```

我想要的只是让程序在这件事发生时“继续”。但这似乎是不可能的。所以我想我需要一种方法来确保这个错误不会发生。它随机发生在大约 800 个条目左右。

在我看来，连接被远程主机强行关闭。在那种情况下，我只想去事情离开的地方重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:17:27.017

连接断开的原因可能有很多（服务器负载、网络问题等）。您的程序正在崩溃表明您的数据库代码不受`try`语句保护。如果你做这样的事情：

```
try
    Using connect1 As New MySqlConnection(ConnectLocalhost.serverString)
        connect1.Open()
        Dim cmd = New MySqlCommand("set net_write_timeout=99999;  _
          set net_read_timeout=99999", connect1) 
        cmd.ExecuteNonQuery()

        Dim BusinessReader = selectSomeQuery("Select *...", connect1)

        Do While BusinessReader.Read 
            'random exception here'
            '...more code'
        Loop
    End Using
Catch ex As Exception
    ' code breaks here on exception - recover from this point '
End Try 
```

我不会就异常处理进行冗长的论文，但是如果您看一下，那里有很多资源。您如何处理它取决于您的具体情况 - 是否记录异常，记录最后一次成功的操作是什么，是否尝试从您所在的位置恢复或是否尝试重新执行整个操作，通知用户， ETC。

[MSDN - 尝试/抓住/最后](http://msdn.microsoft.com/en-us/library/fk6t46tz%28v=vs.100%29.aspx)

# java - 任何用于匹配名称的消歧工具/API？

> ID：11131431
> 
> 赞同：1
> 
> 时间：2012-06-21T04:20:00.040
> 
> 标签：java, algorithm, machine-learning

给定两个名称的表示方式有所不同，是否有任何 API/工具/算法可以对名称的相似/不同程度进行评分？

Tim O' Reilly 是一个输入，T Reilly 是另一个输入。这两者之间返回的分数应该小于 Tim O' Reilly 和 Tim Reilly 之间的分数。

我正在寻找这样的分数计算机制。该算法应该能够处理的几个挑战是：
1）当输入名字作为输入时，名字和姓氏可以交换
2）可能有首字母代替名字
3）其中一个名字可能没有姓氏，而另一个可能同时有名字和姓氏。

...等等，这些都是名称表示中的常见错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:58:51.917

包括一些名称相似性距离分数的两个库是：

*   [模拟包](https://files.ifi.uzh.ch/ddis/oldweb/ddis/research/simpack/index.html)：
*   [第二串](http://secondstring.sourceforge.net/)

除了 1) 和 3) 特征和集合相似性度量（例如 jaccard、tfidf）工作之外，没有一种方法可以涵盖您提到的情况——对于 2）除了 soundex（如 @houman001 所述），您可以考虑使用 levensthein 或 jaro。尝试一些您的用例示例并结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:40:37.767

对于“可以给出名称相似/不同程度的评分的API/工具/算法”部分，我可以给你一个提示：

搜索引擎使用了一些启发式库，但也有一种称为[soundex](http://en.wikipedia.org/wiki/Soundex)的编码，可以从单词中计算出一个数字。具有相同 soundex 代码的单词是那些略有不同的单词。周围也有[一些](http://www.java-forums.org/java-lang/7438-soundex-algorithm-implementation-java.html)Java 实现。

关于您稍后提到的有关名称的要点，请查找联系人管理库/实用程序并进行一些编码，因为这些要求非常具体。

# android - 适用于 Android 和 iOS 的地图

> ID：11131445
> 
> 赞同：-1
> 
> 时间：2012-06-21T04:21:25.010
> 
> 标签：android, ios, maps

除了 Google Maps 和 Bing Maps 之外，任何人都知道可以为 Android 和 iOS 实现的 maps API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:03:18.203

您可以使用 OpenStreetMap 的 API 来呈现您自己的 API，这比谷歌地图更复杂，但两者都适用。

[http://www.openstreetmap.org/](http://www.openstreetmap.org/)

[http://wiki.openstreetmap.org/wiki/API](http://wiki.openstreetmap.org/wiki/API)

# python - python在django视图中登录导致TypeError

> ID：11131447
> 
> 赞同：2
> 
> 时间：2012-06-21T04:21:39.437
> 
> 标签：python, django, logging

我将日志记录设置如下

```
import logging

logging.basicConfig(
    level = logging.DEBUG,
    format = '%(asctime)s %(levelname)s %(message)s',
)

logger = logging.getLogger('myapp.views')

def my_view(request):
    ...
    try:
        parse_file_using_regex(file):
        ...
    except IndexError as ie:
        logger.debug('content of file not proper:',ie)
    except ValueError as ve:
        logger.debug('caused value error') 
```

当发生 valuError 时，我得到以下输出

```
...Traceback (most recent call last):
  File "/usr/lib/python2.6/logging/__init__.py", line 768, in emit
    msg = self.format(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 648, in format
    return fmt.format(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 436, in format
    record.message = record.getMessage()
  File "/usr/lib/python2.6/logging/__init__.py", line 306, in getMessage
    msg = msg % self.args
TypeError: not all arguments converted during string formatting
....Traceback (most recent call last):
  File "/usr/lib/python2.6/logging/__init__.py", line 768, in emit
    msg = self.format(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 648, in format
    return fmt.format(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 436, in format
    record.message = record.getMessage()
  File "/usr/lib/python2.6/logging/__init__.py", line 306, in getMessage
    msg = msg % self.args
TypeError: not all arguments converted during string formatting
2012-06-21 09:13:47,909 DEBUG caused value error 
```

有人可以帮我解决这个问题吗？为什么我会收到 TypeError？

使用 pdb，并在`getMessage(self)`python2.6/logging/ **init** .py中包含以下内容

```
import pdb
pdb.set_trace()
print msg,sef.args

...> /usr/lib/python2.6/logging/__init__.py(307)getMessage()
-> print msg,sef.args
(Pdb) msg
'parsing subtitle file:'
(Pdb) self.args
('/home/me/dev/python/django/myapp/media/testpath/testfile.srt',)
(Pdb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:27:41.800

你应该在你的日志消息中添加一个 %s 值，所以它会是这样的：

```
logger.debug('content of file not propper: %s', ie) 
```

我也以不同的方式使用了记录器，只需像这样直接添加消息：

```
logger.debug('content of file not propper: %s' % ie) 
```

在我看来，这更直接。

关于 pdb，这是调试程序的一种非常好的方法，我 100% 推荐它 :)

# c - 重复从 Fortran 调用 C 函数时出现分段错误

> ID：11131453
> 
> 赞同：1
> 
> 时间：2012-06-21T04:22:47.920
> 
> 标签：c, segmentation-fault, gfortran

我有一个重复调用 C 函数的 Fortran 90 程序。第一次使用该函数一切正常，但第二次代码尝试访问该函数时出现以下错误：

> 程序收到信号 SIGSEGV：分段错误 - 无效的内存引用。

我在 Windows 上使用 gfortran v.4.6，链接到我没有源代码的库。该库以 DLL 的形式出现在我面前，我使用 gendef 和 dlltool 创建了一个要链接的 .a 库。

代码如下所示：

```
PROGRAM cmod
  USE, INTRINSIC :: ISO_C_BINDING
  INTERFACE
    LOGICAL (C_BOOL) FUNCTION clover(scen,reg,soil,top,rain,depth,numd,nums,numb, numd,addn,srate,stype,nloss,ploss,ErrStr) BIND (C, name = "ClOvr")

    USE, INTRINSIC :: ISO_C_BINDING
    INTEGER (C_INT), INTENT(IN), VALUE :: scen,reg,soil,topo,depth

    REAL (C_DOUBLE), INTENT(IN), VALUE :: rain,numd,nums,numb,numd

    REAL (C_DOUBLE), INTENT(IN), VALUE :: addn,srate
    INTEGER (C_INT), INTENT(IN), VALUE :: stype
    REAL (C_DOUBLE), INTENT(OUT) :: nloss,ploss
    CHARACTER(C_CHAR), INTENT(OUT) :: ErrStr(*)
    END FUNCTION clover
  END INTERFACE
  .....

  do
  .....
    result = clover(a,b,c, d, e, f, g, h, sb, sd, an, sr, st,lossx,lossy,err)
  ......
    result = clover(a,b,c, d, e, f, g, h, sb, sd, an, sr, st,lossx,lossy,err)
  end do
END PROGRAM cmod 
```

我没有 C 代码，但我从 IBM Fortran 移植。

接口声明包含这两行

```
!DEC$ ATTRIBUTES  VALUE :: scen,reg,soil,top,rain,depth,numd,nums,numb,numd,addn,srate,stype

!DEC$ ATTRIBUTES  REFERENCE :: lossx,lossy,ErrStr 
```

IBM fortran 使用以下代码加载库并访问函数：

```
pointer (q,clover)
p = loadlibrary("clover.dll")
q = getprocaddress(p, "ClOvr") 
```

所以我可能在翻译到 GNU fortran 时遗漏了一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:33:56.310

我发现了我的问题：当我编译时，我必须使用`-mrtd (sdtcall)`

# javascript - 在javascript中将选择框更改为文本框

> ID：11131455
> 
> 赞同：0
> 
> 时间：2012-06-21T04:22:56.843
> 
> 标签：javascript, html

```
<select style="height:25px;"class="textbox">
    <option selected>Select item</option>
    <option value="1" >Gold cad.</option>
    <option value="2">Gold rawa</option>
    <option value="3">Silver 9999</option>
    <option value="4">Silver chorsa</option>
</select> 
```

我想通过在单击时用文本框替换选择框来在文本框中显示选择框元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:54:12.753

参考这个**[LIVE DEMO](http://jsfiddle.net/SivaCharan/CT8TT/1/)**

## Javascript：

```
var dropDown = document.getElementById("dropdown")
dropDown.onchange = function() {
    var dropDownValue = this.options[this.selectedIndex];
    dropDown.style.display = 'none';

    var textBox = document.getElementById("textbox");
    textBox.style.display = 'block';
    textBox.value = dropDownValue.text;
}; 
```

## HTML：

```
<select style="height:25px;" id="dropdown">     
    <option selected>Select item</option>     
    <option value="1" >Gold cad.</option>     
    <option value="2">Gold rawa</option>     
    <option value="3">Silver 9999</option>     
    <option value="4">Silver chorsa</option> 
</select>
<input type="text" id="textbox" class="inactive" /> 
```

## CSS：

```
.inactive {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:47:56.780

例如

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档&lt;/title>
<script type="text/javascript">
  function  toggle()
  {
      var div=document.getElementById("Show");
      if(div.style.display=="none")
      {
          div.style.display="block";
      }
      else

      {
          div.style.display="none";
      }
  }
  function changeText (value)
  {
      document.getElementById("text").value=value;
      toggle();
  }

</script>
</head>

<body>
<input id="text" type="text"  width="150px" height="20px" onfocus="toggle()" />
<div id="Show"   style="width:150px; display:none; border:1px solid red"    >
<div style="border-bottom:1px solid #03F" onclick="changeText('1')">Gold cad</div>
<div  style="border-bottom:1px solid #03F" onclick="changeText('2')">Gold rawa</div>
<div  style="border-bottom:1px solid #03F" onclick="changeText('3')">Silver 9999</div>
</div>

</body>
</html> 
```

这是一个例子，即使它很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T04:28:01.740

这样的事情可以帮助你：

```
$('select.textbox').change(function(){
  $('<input>')
     .attr('name', $(this).attr('name'))
     .val($(this)
     .find('option:selected'))
     .insertAfter($(this).hide());
}); 
```

# ios - NSNumberformatter 添加额外的零

> ID：11131457
> 
> 赞同：11
> 
> 时间：2012-06-21T04:23:19.070
> 
> 标签：ios, nsnumberformatter

我正在寻找一种将“1”显示为“01”的方法，所以基本上10以下的所有内容都应该有一个前导0。

最好的方法是什么？我知道我可以使用一个简单的 if 结构来进行此检查，但这应该可以使用 NSNumberformatter 来实现，对吧？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-21T04:28:56.490

如果你只想要一个 NSString，你可以简单地这样做：

```
NSString *myNumber = [NSString stringWithFormat:@"%02d", number]; 
```

来自`%02d`C。 %nd 表示字符串中必须至少有 n 个字符，如果更少，则用 0 填充。这是一个例子：

```
NSString *example = [NSString stringWithFormat:@"%010d", number]; 
```

如果`number`变量只有两位数，那么它会以八个零作为前缀。如果它是 9 位长，它将以一个零作为前缀。

如果你想使用 NSNumberFormatter，你可以这样做：

```
NSNumberFormatter * numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setPaddingPosition:NSNumberFormatterPadBeforePrefix];
[numberFormatter setPaddingCharacter:@"0"];
[numberFormatter setMinimumIntegerDigits:10];
NSNumber *number = [NSNumber numberWithInt:numberVariableHere]; 
```

----更新-----我认为这可以解决您的问题：

```
[_minutes addObject:[NSNumber numberWithInt:i]];
return [NSString stringWithFormat:@"%02d", [[_minutes objectAtIndex:row] intValue]]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-28T08:27:47.530

# **为 Swift 3 修复**

```
let x = 999.1243
let formatter = NumberFormatter()
formatter.minimumFractionDigits = 1 // for float
formatter.maximumFractionDigits = 1 // for float
formatter.minimumIntegerDigits = 10 // digits do want before decimal
formatter.paddingPosition = .beforePrefix
formatter.paddingCharacter = "0"

let s = formatter.string(from: NSNumber(floatLiteral: x))! 
```

**输出**

“0000000999.1”

# apache-flex - 使用 flash builder 4.6 在 Flex 中的 HelloWorld

> ID：11131459
> 
> 赞同：2
> 
> 时间：2012-06-21T04:23:49.553
> 
> 标签：apache-flex, flex4, flex4.5, flexbuilder, flashbuilder4

我的代码如下；

1, ) 标签和按钮都是重叠的。我该如何解决？（我知道布局`absolute`默认设置为，但是当我删除`minWidth="955" minHeight="600"`并包含时`layout="horizontal"`，出现以下错误）

```
Description Resource    Path    Location    Type
Initializer for 'layout': values of type spark.layouts.supportClasses.LayoutBase cannot be represented in text. HelloFlex.mxml  /HelloFlex/src  line 4  Flex Problem 
```

2.) 我可以知道标签的含义`xmlns:fx` `xmlns:s` `xmlns:mx`以及我应该在哪些情况下使用它们吗？

3.) 在 Flex Builder 4.6 中，在设计模式下我可以用`Drag-and-drop`组件来设计用户界面吗？

```
 <?xml version="1.0" encoding="utf-8"?>
    <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" >
        <fx:Declarations>
            <!-- Place non-visual elements (e.g., services, value objects) here -->

        </fx:Declarations>
        <mx:Label text="Hello World"/>
        <mx:Button label="Click"/>

    </s:Application> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T06:10:41.340

下面的代码可以帮助你： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:layout>
        <s:HorizontalLayout paddingTop="5" paddingLeft="5" paddingRight="5" paddingBottom="5"/>
    </s:layout>
    <mx:Label text="Hello World"/>
    <mx:Button label="Click"/>
</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T19:07:05.833

从这个页面...... [https://cwiki.apache.org/confluence/display/FLEX/Adobe+Flash+Builder+'New+Project'+Bug](https://cwiki.apache.org/confluence/display/FLEX/Adobe+Flash+Builder+'New+Project'+Bug)

> 可能值得注意的是此 wiki 页面上的其他解决方法……如果您关闭 flash builder 并将 flex-sdk-description.xml 文件中的行更改为 4.10.0 到 4.9.0 此错误停止显现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T19:11:42.473

另一种解决方法是在 Flash Builder 中打开文件模板并删除 ${wizard_attributes} 标记，它还会停止嵌入 layout="absolute"。

您可以通过 Flash Builder 首选项 -> Flash Builder -> 文件模板 -> MXML -> MXML Web 应用程序到达那里，然后单击编辑以删除该属性。

# windows-phone-7 - WinPhone7 在页面之间传递带有特殊字符的值

> ID：11131461
> 
> 赞同：0
> 
> 时间：2012-06-21T04:24:05.617
> 
> 标签：windows-phone-7, parameters, navigation

我将在页面之间传递字符串值。该值包含“&”字符。由于使用“&”拆分值，因此该值被切分。我怎样才能逃脱这个特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:42:46.640

使用 URL 编码...例如：如果你想要 '&' .. 使用 '& amp;' （没有空间）

推荐的方法是使用

```
Uri.EscapeUriString(stringToEscape) 
```

为您执行此操作的方法。

[http://msdn.microsoft.com/en-us/library/system.uri.escapeuristring%28v=VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.uri.escapeuristring%28v=VS.95%29.aspx)上的文档

# java - Java 包编译问题

> ID：11131464
> 
> 赞同：3
> 
> 时间：2012-06-21T04:24:24.123
> 
> 标签：java

好的，就像那里的许多软件包编译问题一样，在我花了 12 个小时搜索的时间里，我还没有找到这样的问题..

基本上我有正常的设置：

我的目录如下：JavaCSVReader/FRC_API

我的源文件设置如下：

```
JavaCSVReader/CSVFile.java
JavaCSVReader/FRC_API/RobotConfig.java 
```

（即`CSVFile.java`位于`JavaCSVReader`和相同的`RobotConfig.java`）

`CSVFile.java`包含以下行：

```
 package JavaCSVReader;
    import JavaCSVReader.FRC_API.*;
       ... 
```

`RobotConfig.java`包含以下行：

```
 package JavaCSVReader.FRC_API;
    import JavaCSVReader.CSVFile;
        ... 
```

如果没有上面的行，这两个文件都可以正常编译。

因此错误是：我收到

```
"cannot find symbol... class: CSVFile location: JavaCSVReader" 
```

当我尝试编译 RobotConfig.java 时。

我也收到

```
"package does not exist: JavaCSVReader.FRC_API" error when compiling CSVSFile.java 
```

我的

```
CLASSPATH=/home/src/JavaCSVReader/:.:.. 
```

（我使用的是linux）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:30:44.090

您的类路径设置错误。您应该将其设置为

```
/home/src/ 
```

编译器会将类路径作为“基本”目录，以便查找源代码中定义的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:22:02.100

这是一个类路径问题。你如何配置java环境变量？你最好检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:25:24.530

是你的包 JavaCSVReader.FRC_API；或 JavaCSVReader ？

# objective-c - 范围超出范围的子字符串？

> ID：11131472
> 
> 赞同：7
> 
> 时间：2012-06-21T04:25:42.100
> 
> 标签：objective-c, ios, nsstring

好的，所以这有点令人困惑（对我来说很好）。我有一个字符串，其中包含一个我想要的数字。我用“/”包围了这个数字，以便以后可以从中取出这个数字。

这是我从中获取数字的方法：

```
if ([MYSTRING hasSuffix:@"mp"]) {
        int start = 0;
        int end = 0;
        char looking = '/';
        for(int i=0; i < MYSTRING.length; i++){
            if (looking == [MYSTRING characterAtIndex:i]) {
                if (start == 0) {
                    start = i;
                }
                else{
                    end = i + 1;
                }
            }
        }
        NSLog(@"%@", MYSTRING); //When i NSLOG here i get '2012-06-21 03:58:00 +0000/1/mp', 1 is the number i want out of the string, but this number could also change to 55 or whatever the user has
        NSLog(@"start: %i, end: %i", start, end); //When i NSLOG here i get 'start: 25, end: 28'
        NSString *number = [MYSTRING substringWithRange:NSMakeRange(start, end)];
        number = [number stringByReplacingOccurrencesOfString:@"/" withString:@""];
        if ([number intValue] > numberInt) {
            numberInt = [number intValue];
        } 
```

它不断崩溃，控制台说：

> ***终止应用程序由于未捕获的异常'NSRangeException'，原因是： ' - [__ NSCFString substringWithRange：]：范围或索引越界' ***第一掷调用堆栈：（0x1875d72 0x106ce51 0x1875b4b 0x184ea64 0x3a6c 0x1080713 0x1bf59 0x1bef1 0xd532e 0xd588c 0xd49f5 0x49a2f 0x49c42 0x290fe 0x1b3fd 0x17d2f39 0x17d2c10 0x17ebda5 0x17ebb12 0x181cb46 0x181bed4 0x181bdab 0x17d1923 0x17d17a​​8 0x18e71 0x200d 0x1f35）libc++abi.dylib：终止调用抛出异常

从我的计数范围内，我不明白为什么我会收到这个错误？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-21T04:45:10.863

你的 NSMakeRange(start, end) 应该是 NSMakeRange(start, end- start);

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T04:46:38.383

我认为您对 NSMakeRange 的语法感到困惑。是这样的

```
NSMakeRange(<#NSUInteger loc#>, <#NSUInteger len#>) 
```

`<#NSUInteger loc#>:`它是您要开始挑选或子串的位置。

`<#NSUInteger len#>:`这是您的输出或子字符串的长度。

例子：

mytest12test

现在我想选择'12'

所以：

```
NSString *t=@"Mytest12test";
NSString *x=[t substringWithRange:NSMakeRange(6, 2)] ; 
```

**在您的代码而不是长度中，您传递的是错误的结束字符索引。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T04:35:35.627

我不知道您为什么使用这种方法，但 iOS 提供了一个字符串函数，该函数将一个字符串与另一个字符串分开并返回一个组件数组。请参见以下示例：

```
NSString * str = @"dadsada/2/dsadsa";
NSArray *listItems = [str componentsSeparatedByString:@"/"];
NSString *component = [listItems objectAtIndex:1]; 
```

现在你的组件字符串应该有 2 个存储。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T04:41:31.087

当编译器遇到此代码时...

```
else{   
    end = i + 1;
} 
```

...在循环的最后一次迭代中，它将 end 变量**设置**为`MYSTRING`. 这就是您收到该错误的原因。要修复它，只需执行以下操作：

```
else{   
    end = i;
} 
```

希望这可以帮助！

PS Saleh 的方法是实现您想要的更简单的方法

- - - 更新 - - -

你实际上应该这样做：

```
NSMutableArray *occurencesOfSlashes = [[NSMutableArray alloc] init];
char looking = '/';
for(int i=0; i < MYSTRING.length; i++){
if ([MYSTRING characterAtIndex:i] == looking) {
    [occurencesOfSlashes addObject:[NSNumber numberWithInt:i]];  
}
NSString *finalString = [MYSTRING substringWithRange:NSMakeRange([occurencesOfSlashes objectAtIndex:0],[occurencesOfSlashes objectAtIndex:1])]; 
```

# java - 如果我们不处理 Java 中的非内存资源，我们可能会面临哪些问题？

> ID：11131476
> 
> 赞同：1
> 
> 时间：2012-06-21T04:25:46.743
> 
> 标签：java, oop, garbage-collection

在java中，它通过GC自动释放内存资源。但是我们不仅有内存资源，还有数据库连接，网络连接，文件句柄等非内存资源。所以，这也是需要释放的（不仅仅是垃圾收集) 当你完成它时。

所以，我的问题是，如果我们不在 java 中处理（释放）非内存资源，我们可能会面临什么问题？

请指导我摆脱对此的清晰想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:38:36.473

一个例子就是这样。当你使用 FileInputStream 之类的 API 时。这是你调用的非备忘录资源之一。当你从一个文件中读取完一些东西，而你忘记关闭它时，系统将占用这个文件，直到程序结束。在占领期间，您可能无法打开此文件。这就是问题所在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T05:02:47.930

你让事情变得复杂了。当你用 Java 设计程序时，你应该尽可能把这种非内存资源的管理留给 OS 或其他应用程序。这意味着您可以直接关闭 JVM，而无需考虑文件处理程序、数据库连接。OS 会回收文件处理程序，DB 会回收非活动连接，appserver 会回收网络连接……相信我，操作系统、数据库和流行的网络应用程序比你想象的要聪明。

# unix - 如何更改 rsync 的所有者

> ID：11131477
> 
> 赞同：34
> 
> 时间：2012-06-21T04:25:50.993
> 
> 标签：unix, rsync

我了解保留 rsync 的权限。但是，在我的情况下，我的本地计算机没有网络服务器所需的文件的用户。因此，当我 rsync 时，我需要所有者和组是网络服务器上的 apache，但在我的本地计算机上是我的用户名。有什么建议么？

我想澄清一下我需要做什么。

我的个人电脑：名为“home”，用户帐户为“michael” 我的网络服务器：名为“server”，用户帐户为“remote”，用户帐户为“apache”

当前情况：我的网站在所有者“michael”的“家”上和所有者“apache”的“服务器”上。“home”需要使用用户“michael”，“server”需要使用用户“apache”

任务：将我在“家”上的网站同步到“服务器”，但所有文件的所有者都归“apache”和“apache”组

问题：rsync 将保留权限、所有者和组；但是，我需要所有文件都是 apache 的所有者。我知道不保留所有者会将用户的所有者放在“服务器”上，但由于该用户是“远程”，所以它使用它而不是“apache”。我无法与用户 'apache' 进行 rsync（这很好），但我不愿意公开存在安全风险。

我对如何解决的唯一想法：每次`rsync`手动`chown -R`和之后`chgrp -R`，但这是一个巨大的系统，这需要很长时间，特别是因为这将投入生产。

有谁知道如何做到这一点？

我使用的当前命令`rsync`：

```
rsync --progress -rltpDzC --force --delete -e "ssh -p22" ./ remote@server.com:/website 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2015-01-05T23:42:51.507

如果您有权访问 rsync v.3.1.0 或更高版本，请使用**--chown**选项：

```
rsync -og --chown=apache:apache [src] [dst] 
```

此处类似问题的答案中的更多信息：[ServerFault：Rsync 命令问题，所有者和组权限不会改变](https://serverfault.com/a/656494/262495)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-25T20:58:16.787

您可以在接收机器上组合一些技巧来获得所有权 - 从 cron 运行 'chmod -R apache /website' 将是一个有效但相当笨拙的选择 - 但相反，我建议**安全地**允许 rsync -over-ssh-as-apache。

您将为此创建一个专用的 ssh 密钥对：

```
ssh-keygen -f ~/.ssh/apache-rsync 
```

然后将 ~/.ssh/apache-rsync.pub 带到网络服务器，将其放入 ~apache/.ssh/authorized_keys**并仔细指定允许的命令**，就像这样，全部在一行上：

```
command="rsync --server -vlogDtprCz --delete . /website",from="IP.ADDR.OF.SENDER",no-port-forwarding,no-X11-forwarding,no-pty ssh-rsa AAABKEYPUBTEXTsVX9NjIK59wJ+fjDgTQtGwhATsfidQbO6u77dbAjTUmWCZjKAQ/fEFWZGSlqcO2yXXXXXXXXXXVd9DSS1tjE6vAQaRdnMXBggtn4M9rnePD2qlR5QOAUUwhyFPhm6U4VFhRoa3wLvoqCVtCV0cuirB6I45On96OPijOwvAuz3KIE3+W9offomzHsljUMXXXXXXXXXXMoYLywMG/GPrZ8supIDYk57waTQWymUyRohoQqFGMzuDNbq+U0JSRlvLFoVUZ5Piz+gKJwwiFwwAW2iNag/c4Mrb/BVDQAyEQ== comment@email.address 
```

然后你的“家庭”机器上的 rsync 命令就像

```
rsync -av --delete -e 'ssh -i ~/.ssh/apache-rsync apache@server' ./ /website 
```

还有其他方法可以给这只猫剥皮，但在我看来，这是最清晰的，涉及的解决方法也最少。它可以防止将 shell 作为 apache，这是最大的安全问题，natch。如果您真的反对允许 ssh 作为 apache，还有其他方法……但这就是我所做的。

此处参考：[http](http://ramblings.narrabilis.com/using-rsync-with-ssh) ://ramblings.narrabilis.com/using-rsync-with-ssh，http : [//www.sakana.fr/blog/2008/05/07/securing-automated-rsync-over-ssh/](http://www.sakana.fr/blog/2008/05/07/securing-automated-rsync-over-ssh/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-03T10:16:50.767

rsync 的最新版本（至少 3.1.1）允许您指定“远程所有权”：

```
--usermap=tom:www-data 
```

将 tom 所有权更改为 www-data（又名 PHP/Nginx）。如果您使用 Mac 作为客户端，请使用 brew 升级到最新版本。在您的服务器上，下载档案源，然后“制作”它！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-10-11T10:18:31.060

仅当远程用户对目标目录具有写访问权限时，使用的解决方案`rsync --chown USER:GROUP [src] [dst]`才有效，而在大多数情况下并非如此。

这是另一个解决方案：

# 概述

```
(srcmachine)  (rsync)   (destmachine)
  srcuser    -- SSH -->   destuser
                             |
                             | sudo su jenkins
                             |
                             v
                          jenkins 
```

假设您要进行 rsync：

*   从：
    *   机器：`srcmachine`
    *   用户：`srcuser`
    *   目录：`/var/lib/jenkins`
*   到：
    *   机器：`destmachine`
    *   用户：`destuser`建立**SSH连接**。
    *   目录：`/tmp`
    *   最终文件所有者：`jenkins`.

# 解决方案

```
rsync --rsync-path 'sudo -u jenkins rsync' -avP --delete /var/lib/jenkins destuser@destmachine:/tmp 
```

* * *

在这里阅读更多：

[https://unix.stackexchange.com/a/546296/116861](https://unix.stackexchange.com/a/546296/116861)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-17T15:08:00.950

# rsync 版本 3.1.2

我主要在本地使用**windows**，所以这是我用来与服务器（**debian**）同步文件的命令行：

```
user@user-PC /cygdrive/c/wamp64/www/projects

$ rsync -rptgoDvhnP --chown=www-data:www-data --exclude=.env --exclude=vendor --exclude=node_modules --exclude=.git --exclude=tests --exclude=.phpintel --exclude=storage ./website/ username@hostname:/var/www/html/website 
```

> -n ：在不做任何更改的情况下执行试运行，以真正执行命令删除 -n 选项

# regex - 正则表达式查找开头的单词并以数字结尾

> ID：11131480
> 
> 赞同：-1
> 
> 时间：2012-06-21T04:26:19.807
> 
> 标签：regex

列表

-医学生 - 一年级

-医学专业的学生

-医学生 - 第 2 年

我正在寻找仅搜索单词“医学生”的正则表达式

应返回：仅来自上述列表的医学生

我正在寻找搜索单词“医学生”并且单词以数字结尾的正则表达式

应该返回：医学生 - 1 年级和医学生 - 2 年

寻找将单词“医学生”搜索到字符串中的正则表达式

应该返回所有以上列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:39:51.947

在 C# Only MEDICAL STUDENT 中，一行不以数字结尾，在后面使用负号

```
^.*?MEDICAL STUDENT.*?(?<!\d)$ 
```

MEDICAL STUDENT 以数字结尾

```
^.*?MEDICAL STUDENT.*?\d$ 
```

包含医学生

```
.*?MEDICAL STUDENT.*? 
```

确保 Multiline and IgnoreCase 选项已打开

```
RegexOptions options = RegexOptions.IgnoreCase | RegexOptions.Multiline; 
```

# apache-flex - 在子组件上禁用鼠标滚轮滚动

> ID：11131484
> 
> 赞同：0
> 
> 时间：2012-06-21T04:26:36.477
> 
> 标签：apache-flex, air

这是布局：

```
<s:Scroller>
    <s:VGroup>
        <s:List id="list1"/>
        <s:List id="list2"/>
        <component:ThirdPartyComponent/>
    </s:VGroup>
</s:Scroller> 
```

所以，我的应用程序应该只向右显示 1 个滚动条，即 scoller、list1、list2 等不应该显示滚动条。

它工作了一会儿，直到我们发现鼠标滚轮滚动不起作用。似乎是`mouseWheel`子组件（列表和第三方）捕获的事件。

通过网络搜索找到解决方案，有`stopImmediatePropagation()`子`mouseWheel`事件的解决方案，但似乎不是一个好的解决方案。`mouseWheel`除了 ThirdPartyCompoent 的部分，做滚动是一个私人成员，所以没有办法从 ThirdPartyCompoent听

任何想法？

## 结案

到目前为止，通过监听`mouseWheel`事件并在那里禁用 root解决了这个问题`VGroup mouseChildren`，然后在 root `VGroup`click 处理程序上我启用了`mouseChildren`. **但如果有更多 elegan 解决方案，请发表评论。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:55:24.607

也许这些选项可以帮助你

**选项1**

```
<component:ThirdPartyComponent 
           creationComplete = "afterCreation()" 
           id               = "TPComponent">
  <fx:Script>

     // You could use initialize or creationComplete to handle MouseWheel Listener
     private function afterCreation():void{
       this.addEventListener(MouseEvent.MOUSE_WHEEL, hoverHandler);
     }
     private function hoverHandler(e:MouseEvent):void{
       if(!e.isDefaultPrevented()){
         e.preventDefault();
         e.cancelBubble = true;
         e.cancel = true;
         e.returnValue = false;
       }
       return false;
     }
  </fx:Script>
</component:ThirdPartyComponent> 
```

但我建议您使用 MouseEvent.ROLL_OVER 在子组件中禁用 MouseWheel，因为它覆盖了显示对象容器的任何子对象的所有区域。buble 事件应该返回 false，这样孩子就没有机会调度任何鼠标事件，包括 MOUSE_WHEEL。

**选项#：2**

```
<component:ThirdPartyComponent 
           creationComplete = "afterCreation()" 
           id               = "TPComponent">
  <fx:Script>

     private function afterCreation():void{
       this.mouseChildren = false;
     }

  </fx:Script>
</component:ThirdPartyComponent> 
```

通过将 mouseChildren 设置为 false，任何 mouseChildren 上的事件都会神奇地传递给父级。mouseChildren 不等于 mouseEnabled，因此任何给定的返回都会产生不同的影响:)

您可以组合选项# 1 和选项# 2 或选择其中一个，这是最适合您的 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:48:36.883

您可以通过递归访问第三方组件子组件

[如何递归访问children的children？](https://stackoverflow.com/questions/2416553/how-to-access-children-of-children-recursively)

并将鼠标滚轮块处理程序添加到您需要的孩子

# linux - 在类 Unix 系统中上次运行的 cron 作业的详细信息？

> ID：11131490
> 
> 赞同：51
> 
> 时间：2012-06-21T04:27:39.507
> 
> 标签：linux, logging, cron

我想获取上次运行 cron 作业的详细信息。如果作业由于某些内部问题而中断，我想重新运行 cron 作业。

注意：我没有超级用户权限。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-21T04:34:19.080

您可以使用以下命令查看之前执行的 cron 作业的日期、时间、用户和命令：

```
grep CRON /var/log/syslog 
```

这将显示*所有*cron 作业。如果您只想查看某个用户运行的作业，您可以使用以下内容：

```
grep CRON.*\(root\) /var/log/syslog 
```

**请注意，作业开始时的 cron 日志，**因此您可能希望冗长的作业保留自己的完成日志；如果系统在作业中途停机，它仍然会在日志中！

*编辑：*如果您没有 root 访问权限，则必须保留自己的工作日志。这可以简单地通过将以下内容添加到作业命令的末尾来完成：

```
&& date > /home/user/last_completed 
```

该文件`/home/user/last_completed`将始终包含作业完成的最后日期和时间。如果您想将完成日期附加到文件中，您可以使用`>>`而不是。`>`

您也可以通过将您的命令放在一个小的 bash 或 sh 脚本中并让 cron 执行该文件来实现相同的目的。

```
#!/bin/bash
[command]
date > /home/user/last_completed 
```

用于此的 crontab 将是：

```
* * * * * bash /path/to/script.bash 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-21T04:39:50.070

`/var/log/cron`包含 cron 作业日志。但是你需要root权限才能看到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-10T01:24:23.517

CentO， `sudo grep CRON /var/log/cron`

# c# - “数据库表定义错误”错误的原因是什么

> ID：11131491
> 
> 赞同：-1
> 
> 时间：2012-06-21T04:27:48.740
> 
> 标签：c#, asp.net, c#-4.0

这是我编程的第一步。伙计们需要你的帮助。我观看了 youtube 视频并编写了小程序，他写的确切方式..他没有错误。但我得到了错误。我刚刚通过了文本框值数据库.（错误是数据库表定义错误）。在我的表中，我用于此字段的是 BBMgrID nvarchar(50) NOT NULL

```
SqlConnection con = new SqlConnection("Data Source=spilap;Initial Catalog=spiDB;User ID=sa;Password=sa123");

    protected void btn_submit_Click(object sender, EventArgs e)
    {
        con.Open();
        SqlCommand cmd = new SqlCommand("Insert into tbl_BBmgr values('" + TextBox1.Text+"')",con);
        cmd.ExecuteNonQuery();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:24:54.627

试试这个 ：

```
SqlCommand cmd = new SqlCommand("Insert [TableName] ([ColumnName]) Values(@A)", con);
            cmd.Parameters.AddWithValue("@A", TextBox1.text);
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close(); 
```

更新 ：

```
SqlCommand cmd = new SqlCommand("Insert [TableName] ([Column1],[Column2],[Column3]) Values(@A,@B,@C)", con);
        cmd.Parameters.AddWithValue("@A", TextBox1.text);
        cmd.Parameters.AddWithValue("@B", TextBox2.text);
        cmd.Parameters.AddWithValue("@C", TextBox3.text);
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:51:52.703

你应该这样写： Insert into tbl_BBmgr (BBMgrID) values('" + TextBox1.Text+"')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:00:14.153

如果像您所说的那样，您在 DB 表中有 5 个字段，您需要明确指定您希望值去的列：

```
SqlCommand cmd = new SqlCommand("Insert into tbl_BBmgr (BBMgrID) values('" + TextBox1.Text+"')",con); 
```

**编辑**：现在和将来，为了确保您将正确的值发送到相应的字段，始终建议您在 INSERT 语句中以以下形式指定列：

```
INSERT INTO Name_Of_Table ([Column1], [Column2], [Column3], ...) VALUES ([Value_For_Column1], [Value_For_Column2], [Value_For_Column3], ...) 
```

# c# - 哪种方法更有效，在 XAML 中使用 ListBox 的 DataTemplate 还是在运行时填充 ListBox？

> ID：11131493
> 
> 赞同：0
> 
> 时间：2012-06-21T04:28:21.117
> 
> 标签：c#, windows-phone-7, xaml

我之前在 ListBox 中使用 DataTemplate 作为 XAML 代码，我最近修改了我的代码，现在在运行时我正在使用 foreach 和其他循环填充 ListBox。（通过这种方式，我可以更好地控制格式和其他操作。）

问题是代码的效率降低了。现在，与之前 XAML 中的项目/数据模板相比，循环所花费的时间要多 1 到 2 秒。（对代码的控制较少，大量的绑定和转换器，增加了不易操作的代码复杂性。）

请给我建议

*   哪种方式更有效？为什么？
*   我怎样才能使循环解决方案更有效？穿线？
*   任何学习异步线程的友好教程？对于非英语母语人士？

非常感谢和问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:20:07.727

XAML 解析器经过优化，可以在给定 WPF 布局系统的情况下以最佳方式创建控件，此外它们还允许项目的*虚拟化*，这意味着表示项目的实际控件仅在项目可见时创建。

除此之外，我*总是*更喜欢 DataTemplate，因为它是声明性的，更易于阅读且代码更少。

# php - 上传半个文件？

> ID：11131494
> 
> 赞同：0
> 
> 时间：2012-06-21T04:28:22.063
> 
> 标签：php, javascript

是否可以上传文件的特定部分而不是整个文件？说，我只想上传文件的前 100 个字节，或者文件的其余部分给定偏移 100 个字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:33:22.027

在更现代的浏览器中，具有正确的权限，是的。您需要浏览器支持文件流读取。教程在这里：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

打开文件，找到你想要的块和通过 AJAX 的 POST（例如使用 jQuery）。

您可能会发现以块的形式同步上传并将服务器端拼凑在一起（例如使用会话）更容易 - 这样您就可以就上传进度提供反馈。

不确定旧浏览器的方法，或者那些被用户阻止的方法 - 所以你可能最好上传整个文件（使用 FILE 帖子）并删除你需要的服务器端的位。更多上传，但更好地支持每个人。

* * *

编辑 - 其他人刚刚发布了一个关于此的问题：[https](https://github.com/blueimp/jQuery-File-Upload) ://github.com/blueimp/jQuery-File-Upload - 它似乎本身并不支持它，但它也可以通过一些摆弄来做你想要的？不过，您仍然需要处理回退。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:30:19.100

对的，这是可能的。您可以将 javascript **FileApi**与**BlobApi**一起使用来上传文件的任何部分。请注意，这是 HTML5 功能。

如果您想研究此功能，可以查看[jQuery File Upload Plugin](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:01:17.100

您可以使用文件api的切片方法来获取半文件。

```
var midpt=Math.round(file.size/2);
var halfFile=file.slice(0,midpt); //specify start and end positions 
```

# sql - How to create a dynamic INNER JOIN

> ID：11131501
> 
> 赞同：1
> 
> 时间：2012-06-21T04:29:59.343
> 
> 标签：sql, sql-server-2008, sql-server-2005, sql-server-2012

I need to create dynamic INNER JOIN (I believe I need to anyway). I have 4 tables pears, apples, oranges, bananas. I used all the same column names in those 4 tables.

Another 2 tables 'fruit' and 'fruitcomments'

```
pears    apples    oranges   bananas
-------------------------------------
id
user
photo
comment
date 
```

For the Fruits table typeid relates to other tables 1=pear, 2=apples, 3=oranges, 4=banana. Itemid correlates to the id of either pears, apples, oranges or bananas.

```
Fruit 
-----------------------------------------------------------------------------
fruitsid
typeid
itemid 
```

How would I go about selecting the top 10 from the fruit table and dynamically get the matching row from the corresponding table

Working Code

```
SELECT TOP (10) fruitId, id, user, photo, comment FROM 
(
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN PEARS T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=1
UNION ALL
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN APPLES T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=2
UNION ALL
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN ORANGES T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=3
UNION ALL 
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN BANANAS T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=4
)a
ORDER BY fruitId DESC 
```

OLD NON-Working Code:

```
SELECT TOP (10) id, user, photo, comment FROM
(

SELECT f.typeid, f.itemid, a.id, a.user, a.photo, a.comment FROM Fruit f INNER JOIN a on f.item=a.id

--excuse the gibberish. I never used CASE before
case when f.typeid=1 then
(SELECT id, user, photo, comment FROM Pears WHERE id=f.itemid)a
case when f.typeid=2 then
(SELECT id, user, photo, comment FROM Apples WHERE id=f.itemid)a
case when f.typeid=3 then
(SELECT id, user, photo, comment FROM Oranges WHERE id=f.itemid)a
case when f.typeid=4 then
(SELECT id, user, photo, comment FROM Bananas WHERE id=f.itemid)a
) 
```

Something like that, but I dont know how to express it correctly. Expected results below by selecting top (3) from following 'fruit' table order by fruitsid DESC.

```
fruits
-----------
fruitsid   typeid     itemid
22         1          19
23         3          73
24         2          46

pears
--------------
id     user     photo    comment    date
19     tom      1.jpg    hi         2012-06-01 12:00:00.000
22     bill     5.jpg    hello      2012-06-01 13:00:00.000

apples
--------------
id     user     photo    comment
46     sam      78.jpg   howdy
22     bill     5.jpg    hello

bananas
--------------
id     user     photo    comment
32     tom      1.jpg    hi
73     bill     5.jpg    hello

oranges
--------------
id     user     photo    comment
73     jane     55.jpg   wave
22     bill     5.jpg    hello

results
-------------
19     tom      1.jpg    hi 
73     bill     5.jpg    hello
46     sam      78.jpg   howdy 
```

IO Stats on 4 rows using UNION ALL with newer code

```
(4 row(s) affected)
Table 'pears'. Scan count 1, logical reads 1, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'fruit'. Scan count 3, logical reads 3, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'apples'. Scan count 1, logical reads 16, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'oranges'. Scan count 1, logical reads 115, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0. 
```

At least there wasn't one physical read which is awesome

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:52:52.110

One way of doing it is by using UNION to join each -

```
SELECT TOP (10) fruitId, id, user, photo, comment FROM 
(
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN PEARS T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=1
UNION ALL
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN APPLES T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=2
UNION ALL
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN ORANGES T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=3
UNION ALL
    SELECT T1.fruitsId, T2.id, T2.user, T2.photo, T2.comment 
    FROM FRUITS T1 LEFT JOIN BANANAS T2 ON (T1.itemId=T2.id)
    WHERE T1.typeId=4
)
ORDER BY fruitId DESC 
```

If you dont want to include records which exists only in `Fruits` but not in `PEAR|APPLES|ORACNGES|BANANAS` then use `INNER JOIN` instead

# usb - NFC读卡器ACR1222L开发库

> ID：11131504
> 
> 赞同：2
> 
> 时间：2012-06-21T04:30:12.190
> 
> 标签：usb, nfc

有谁知道是否存在 ACR1222L USB NFC/LCD 读写器的开发库？（我不确定它是否与 ACR122U 兼容，libnfc 有点支持它。）

[ACR1222L产品页面](http://www.acs.com.hk/index.php?pid=product&prod_sections=0&id=ACR1222L)

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T10:08:37.640

我相信您知道 ACR122L（串行）有一个可用的 SDK，但 ACR1222L（USB）没有。这些设备看起来相同，但智能卡连接方法/操作完全不同。

您关心的 ACR1222L 的运行方式与串行对应的 ACR122U (ACR122L) 更接近。

我拿了一堆在 ACR122U 上工作的代码，它也在 ACR1222L 上工作，几乎没有修改。

你在什么平台上开发？

ACR122U SDK 是一个很好的起点，然后购买 ACR1222L。

我已经为上述所有三种设备进行了开发。

# java - 如何在 PrimeFaces 数据表列中显示带有换行符（漂亮打印）的 XML 内容？

> ID：11131505
> 
> 赞同：5
> 
> 时间：2012-06-21T04:30:18.820
> 
> 标签：java, jsf

如何在 PrimeFaces 数据表列中显示带有换行符（漂亮打印）的 XML 内容？

我的 XML 内容已经是漂亮的打印格式，当从 FacesConverter 执行 System.out.println 时，我可以通过换行看到它，该 FacesConverter 将字节转换为字符串，然后再呈现在表格列上。

这是 FacesConverter 的代码：

```
@FacesConverter(value="xmlStream")
public class ByteConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        byte[] buffer = null;
        try{
            buffer = value.getBytes("UTF-8");
        }catch(UnsupportedEncodingException e){
            buffer = value.getBytes();
        }
        return buffer;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        String text = null;
        if (value instanceof byte[]){
            try{
                text = new String((byte[])value, "UTF-8");
            }catch(UnsupportedEncodingException e){
                text = new String((byte[])value);
            }
        }
        System.out.println("text=<" + text + ">");
        return text;
    }

} 
```

这是我在上面执行 System.out.println 时在控制台中看到的内容：

```
<linkUp>
  <ifName>eth1</ifName>
  <linkProperty>
    <name>1</name>
    <flags>42</flags>
    <extensions>
      <name>foo</name>
      <value>bar2</value>
    </extensions>
  </linkProperty>
  <linkProperty>
    <name>2</name>
    <flags>4668</flags>
    <extensions>
      <name>foo</name>
      <value>bar2</value>
    </extensions>
  </linkProperty>
</linkUp> 
```

但是当数据显示在 PF dataTable 列上时，它显示为没有换行符的单行字符串 - 有没有办法在控制台上显示它？其他人如何在 PF 表中显示 XML 内容？

嗯，看起来这样可以解决问题：

```
.whiteSpaceClass{
    white-space: pre-wrap;
} 
```

但是现在我不得不处理跨越一半页面的行，因为 XML 太大了。我想这句老话“提防你的要求”在这里适用...... :)

尽管如此，最好只显示前几行并能够根据单击事件展开/折叠其余部分，甚至在双击单元格时将其显示在一个框中 - 问题是，我不知道如何这样做或者如果 PF 支持...:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:58:41.630

您可以使用*可扩展行*来显示整个 XML。请参阅在展示中使用[p:rowExpansion](http://www.primefaces.org/showcase/ui/datatableExpandableRows.jsf)的示例。

# asp.net - Datediff 未返回预期值

> ID：11131513
> 
> 赞同：0
> 
> 时间：2012-06-21T04:30:57.903
> 
> 标签：asp.net, vb.net

此代码总是返回 '0' 我不知道为什么

```
Dim cur_month = DatePart(DateInterval.Month, Now).ToString()
Dim cur_date As String = "01/" + cur_month + "/" + (DatePart(DateInterval.Year, Now).ToString)
Dim sel_date As String = "01/" + (cmb_mnth.SelectedIndex + 1).ToString + "/" + txt_year.Text.ToString
Dim date_dif As String = DateDiff(DateInterval.Month, CDate(sel_date), CDate(cur_date))
MsgBox(date_dif) 
```

cnb_mnth 是月份的组合框

txt_year 是输入年份的文本框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:47:45.323

我猜您计算机上的区域日期设置有前一个月（即 MM/dd/yyyy），因此它将 01 解释为 cur_date 和 sel_date 的月份。

# visualtreehelper - 使用 VisualTreeHelper 在 WPF 中获取子属性不返回值

> ID：11131514
> 
> 赞同：1
> 
> 时间：2012-06-21T04:31:01.780
> 
> 标签：visualtreehelper

一旦我使用 visualTreeHelper.getchild 查找子对象，我将如何获取该对象的名称，甚至对象的其他属性（如宽度或高度）？

IE

这不起作用：

```
For i As Integer = 0 To VisualTreeHelper.GetChildrenCount(Can1) - 1
Dim ChildVisual As Visual = CType(VisualTreeHelper.GetChild(Can1, i), Visual)
Dim ChildName As DependencyProperty = childVisual.GetValue(Name) 
```

它说“名称”类型的值不能转换为 system.windows.dependencyProperty

这也不起作用（但至少它可以编译）：

```
For i As Integer = 0 To VisualTreeHelper.GetChildrenCount(Can1) - 1
Dim childVisual As Visual = CType(VisualTreeHelper.GetChild(Can1, i), Visual)

Dim GT1 As GeneralTransform = childVisual.TransformToAncestor(Can1)

Dim currentpoint As Point = GT1.Transform(New Point(0, 0))

x = currentpoint.X
y = currentpoint.Y 
```

如果我将鼠标悬停在 childvisual 上，我可以查看它的属性并看到该名称已设置为我在画布 (Can1) 上拥有的图像的名称。但是，X 和 Y 始终为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:53:28.110

我终于在网上找到了这个，它似乎工作得很好。

```
Dim childVisual As Visual = CType(VisualTreeHelper.GetChild(Can1, i), Visual) 
Dim ChildName As String = ChildVisual.GetValue(Control.NameProperty) 
```

# ruby-on-rails - 键入 rails s 或 rails g 时，不会运行 rails 脚本

> ID：11131515
> 
> 赞同：0
> 
> 时间：2012-06-21T04:31:07.367
> 
> 标签：ruby-on-rails, ubuntu

首先是我在 Ubuntu 12.04 LTS 上。

当我键入 rails s 或 rails g 时，会在文件夹 /s 和 /g 中创建一个新的 rails 应用程序，而不是运行相应的脚本。

当我输入 rails new 时，会创建一个带有 /new 文件夹的新 rails 应用程序。

我不确定为什么会这样。当我第一次安装 Rails 时，它只工作了一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:36:16.340

那是因为您使用的是 Rails 2.x。检查您的 Rails 版本，

```
 rails --version 
```

查看您的 Rails 版本。

`new`Rails 3.x 中使用了关键字。在 Rails 2.x 中，当您运行命令时`rails project`，它会为您创建一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:34:09.427

您需要通过 调用本地版本的 Rails `./script/rails`，而不是在系统范围内安装任何版本的 Rails（显然是 2.x 版）。

# java - 如何使用 Java 正则表达式从字符串中解析此 CSV 列表？

> ID：11131519
> 
> 赞同：2
> 
> 时间：2012-06-21T04:31:46.697
> 
> 标签：java, regex

**编辑：**为了解释我的动机，我正在编写一个命令行实用程序，它接受一个日志文件和一个模式（一个非正则表达式字符串，指示每个日志条目的样子），将模式转换为正则表达式，并匹配文件的每一行都带有正则表达式，生成一组日志事件，然后以另一种格式（例如 JSON）输出。我不能假设输入模式是什么或文件包含什么。

* * *

我想解析一个 CSV 键值对列表。我需要从列表中捕获各个键和值。示例输入字符串：

> 07/04/2012 <DEBUG> **a=1, b=foo, c=bar** : hello world!\n

我[验证](http://fiddle.re/apcc)了下面的正则表达式正确地从输入中提取键和值：

```
// regex
(([^,\s=]+)=([^,\s=]+)(?:,\s*(?:[^,\s=]+)=(?:[^,\s=]+))*?)

// input string
a=1, b=foo, c=bar 
```

结果是：

```
// 1st call
group(1) == "a"
group(2) == "1"

// 2nd call
group(1) == "b"
group(2) == "foo"

// 3rd call
group(1) == "c"
group(2) == "bar" 
```

但是这个正则表达式（与上面带有额外“东西”的正则表达式相同）[不能](http://fiddle.re/azcc)按预期工作：

```
// regex
\d{2}/\d{2}/\d{4} <DEBUG> (([^,\s=]+)=([^,\s=]+)(?:,\s*(?:[^,\s=]+)=(?:[^,\s=]+))*?) : .*

// input string
07/04/2012 <DEBUG> a=1, b=foo, c=bar : hello world! 
```

由于某种原因，结果是：

```
group(1) == "a=1, b=foo, c=bar"
group(2) == "a"
group(3) == "1"
// no more matches 
```

提取键和值的正确 Java 正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:50:52.257

*正确*的正则表达式取决于您要实现的目标。在后一种情况下，结果对于正则表达式是正确的。这是因为短语`<DEBUG>`是正则表达式的一部分，而结尾`: .*`也是正则表达式的一部分，因此两者都将被匹配，因此字符串中只有一个合适的片段。

我个人会寻求另一种解决方案 - 而不是直接使用正则表达式，我会使用`split`. 例如，如果您感兴趣的部分*总是*介于`>`和之间，`:` *并且*`substring`该部分中没有这样的字符，您可以简单地与,`indexOf`和相处`split`。您可以进行两次拆分（一次`,`获得所有`key=value`对，然后`=`在每对上进行）。但这只是我的解决方案，它可能不是最佳解决方案 - 我很乐意看到一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:44:42.337

使用`"\\w+=\\w+"`获取结果： ("a=1" "b=foo" "c=bar")，用 . 分割`=`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:42:36.303

正则表达式：

```
\d{2}/\d{2}/\d{4}\s<DEBUG>\s([^=]+)=([^,\s]+)[,\s]([^=]+)=([^,\s]+)[,\s]([^=]+)=([^\s]+)\s:.* 
```

**编辑**：如果计数可以是任意数字，请尝试以下一个。

```
 Scanner s = new Scanner("07/04/2012 <DEBUG> a=1, b=foo, c=bar : d=erere  m=abcd hello world!");
    Pattern p = Pattern.compile("(?<=\\s|,)[^\\s=]+=[^,\\s]+");
    String out;
    while((out = s.findInLine(p))!=null) {
        System.out.println(Arrays.toString(out.split("=")));
    } 
```

输出：

```
[a, 1]
[b, foo]
[c, bar]
[d, erere]
[m, abcd] 
```

# sql-server - 将标识列值插入另一个表

> ID：11131520
> 
> 赞同：1
> 
> 时间：2012-06-21T04:31:54.007
> 
> 标签：sql-server, sql-server-2005, insert, identity-column

早上好。我有两张表，一张引用另一张。当我插入主表时，主键是自动生成的，即身份字段。我需要将此值插入到第二个表中。

我发现使用 OUTPUT 子句会给我刚刚插入的标识值，所以我尝试了这个。

```
insert into owners (pId) 
   insert into personal (firstName) 
   output inserted.pId 
   values ('fn') 
```

但它不起作用。我收到一个错误：

> 关键字“插入”附近的语法不正确

个人表是主表，所有者表包含外键。如何在 SQL Server 中执行所需的操作？

这两天我一直卡在这里...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T05:36:16.630

我认为您只是稍微偏离了语法-您绝对可以将值插入主表并使用该`OUTPUT`子句将它们插入到辅助表中。

```
INSERT INTO dbo.personal(firstName) 
OUTPUT INSERTED.pId INTO dbo.owners(pId) 
VALUES('fn') 
```

这将插入一个新行`personal`并将列设置`firstName`为`fn`. 从该插入中，插入行的标识列`pId`然后插入到另一个表中`owners`，作为该表的`pId`列。

有关更多详细信息，请参阅有关[OUTPUT 子句的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms177564.aspx)- 您可以将任何插入的值输出到控制台（例如 SQL Server Mgmt Studio），也可以将这些值输出到临时表或永久表中。

**更新：**正如“dradu”所指出的 - 这种方法在你的情况下不起作用，因为表中的列`owners`是 FK 约束的一部分（我从你的问题中错过了这一点）。因此，您需要使用其他方式来执行此操作 - 可能会将必要的信息输出到代码中的临时表/表变量中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T04:59:04.307

由于由于`OUTPUT`外键而不能直接使用子句，您可以将生成的 ID 添加到临时表中，然后将这些值插入到`owners`表中：

```
BEGIN TRANSACTION 

CREATE TABLE #ids(ID INT)
INSERT INTO personal(firstName)
    OUTPUT inserted.pid INTO #ids
    SELECT 'A'
    UNION SELECT 'B'

INSERT INTO owners(pid)
    SELECT ID FROM #ids

COMMIT TRANSACTION 
```

`SCOPE_IDENTITY`也可以，但仅限于一个值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T05:01:15.073

尝试以下步骤

1) 在插入时应用事务级别

2) 使用 Scope_Identity() 函数获取最后插入的 id。

当您应用事务级别时，它将锁定您的表，并且其他/同一用户此时无法插入该值。

试试这个它会为你工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T04:45:25.427

我认为您的选择是使用`SCOPE_IDENTITY()`，但另一个最接近您的选择是`IDENT_CURRENT(‘tablename’)`我想，我也会发布其他身份选项的详细信息，这可能会帮助您理解您的选择，并可能在其他时候有所帮助

> @@IDENTITY 它返回在连接上生成的最后一个 IDENTITY 值，而与生成该值的表无关，也与生成该值的语句的范围无关。

* * *

> SCOPE_IDENTITY() 它返回连接上和同一范围内的语句产生的最后一个 IDENTITY 值，而不考虑产生该值的表。

* * *

> IDENT_CURRENT('tablename') 它返回表中生成的最后一个 IDENTITY 值，与创建该值的连接无关，也与生成该值的语句的范围无关。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T04:35:09.810

您可以使用 SCOPE_IDENTITY() 函数返回插入的标识值。

```
DECLARE @id INT
INSERT INTO [Personal] (Colums ....) VALUES (this, that, stuff)
SET @id = SCOPE_IDENTITY()

INSERT INTO [Owners] (Colums ....) VALUES (@id ....) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T00:03:50.640

这是使用 SCOPE_IDENTITY() 获取最近身份值的一个简单示例 [http://msdn.microsoft.com/en-us/library/ms190315.aspx](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

# mysql - MAMP mysql问题

> ID：11131523
> 
> 赞同：0
> 
> 时间：2012-06-21T04:33:21.673
> 
> 标签：mysql, mamp

我目前正在使用 MAMP，但在尝试访问时遇到了问题`localhost:8888/MAMP/?language=English`

我明白了`Error: Could not connect to MySQL server!`

我所有的网站都可以访问，只是 MAMP 管理区域不能访问。我读过我可能需要更改密码，但是当我运行时

```
/Applications/MAMP/Library/bin/mysqladmin -u root -p password NEWPASSWORD 
```

我得到：

```
/Applications/MAMP/Library/bin/mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'root'@'localhost' (using password: YES)' 
```

为什么会发生这种情况，我怎样才能让它恢复工作状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:37:59.867

看起来 root 密码不是您所期望的。不知道这是怎么发生的，或者它是否是简单的拼写错误，但以防万一它被你改掉，这里有一个方便的小指南来重置 root 密码，它可以让你管理其他用户的密码等。

[mysql.com 在 Unix 上重置 root 密码](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html#resetting-permissions-unix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T16:02:58.297

请务必同时修改 /Applications/MAMP/bin/mamp/index.php。mysql root 密码在那里是硬编码的。你想改变这一行：

```
$link = @mysql_connect(':/Applications/MAMP/tmp/mysql/mysql.sock', 'root', 'root'); 
```

所以第二个“root”是您更改 mysql root 用户密码的内容。希望当您启动 index.php 时，您将不再收到该错误。

# android - 如何获得“AnimationDrawable”事件

> ID：11131526
> 
> 赞同：0
> 
> 时间：2012-06-21T04:33:44.423
> 
> 标签：android, animation, drawable

我正在开发游戏应用程序，我使用**AnimationDrawable**进行图像更改。但问题是我希望动画完成时图像视图不可见。所以我该怎么做。

```
My code is like this...

 mAnimation = new AnimationDrawable();
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d5),50);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d4),50);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d3),50);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d2),50);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d1),150);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d2),50);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d3),50);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d4),50);
         mAnimation.addFrame(getResources().getDrawable(R.drawable.d5),50);
       mAnimation.addFrame(getResources().getDrawable(R.drawable.new_transparent),50);

         mAnimation.setOneShot(true);
         mDogImage.setImageDrawable(mAnimation); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:43:56.247

没有事件或侦听器会通知您。您只需要应用技巧

用于`mAnimation.getNumberOfFrames();`获取总帧数，因为每帧将持续 50 毫秒。所以你的动画应该以`mAnimation.getNumberOfFrames() * 50`毫秒结束。

例如，如果您有 9 帧并且每帧的持续时间为 50 毫秒，那么您的动画将在 450 毫秒内结束。

所以结论是，一旦动画开始，您将`ImageView`在 450 毫秒后使您的隐形。

# sql-server-2008 - SQL Server 2008 未指定错误（MS 可视化数据库工具）

> ID：11131528
> 
> 赞同：0
> 
> 时间：2012-06-21T04:33:56.653
> 
> 标签：sql-server-2008, database-diagram

我是使用 SQL Server 2008 的新手，当我尝试通过右键单击 SQL Server Management Studio 中的数据库来制作数据库图时遇到错误消息：

> 未指定的错误（MS 可视化数据库工具）
> 
> 节目地点：
> 
> 在 System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)
> 在 Microsoft.SqlServer.Management.UI.VSIntegration.Editors.VirtualProject.CreateDesigner(Urn origUrn, DocumentType editorType, DocumentOptions aeOptions, IManagedConnection con, String fileName)
> 在Microsoft.SqlServer 上的 Microsoft.SqlServer.Management.UI.VSIntegration.Editors.VirtualProject.Microsoft.SqlServer.Management.UI.VSIntegration.Editors.ISqlVirtualProject.CreateDesigner(Urn origUrn, DocumentType editorType, DocumentOptions aeOptions, IManagedConnection con, String fileName)
> 。 Management.UI.VSIntegration.Editors.ISqlVirtualProject.CreateDesigner(Urn origUrn, DocumentType editorType, DocumentOptions aeOptions, IManagedConnection con, String fileName)
> 在 Microsoft.SqlServer.Management.UI.VSIntegration.Editors.ScriptFactory.CreateDesigner(DocumentType editorType, DocumentOptions aeOptions, Urn parentUrn, IManagedConnection mc, String fileName)
> 在 Microsoft.SqlServer.Management.UI.VSIntegration.Editors.VsDocumentMenuItem.CreateDesignerWindow(IManagedConnection mc，DocumentOptions 选项）

我已经搜索过这个错误，大多数回复都是关于“从 2005 升级到 2008 时的常见错误”，这不是我的情况，因为我 4 天前刚刚新安装了 SQL Server 2008。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:40:57.797

我今天有这个错误。就我而言，这与从 SQL Server 2005 迁移到 2008 无关。为了解决这个问题，我重新启动了我的 SQL Server 2008，并且在身份验证窗口中，我将“身份验证”字段从“Windows 身份验证”更改为“SQL Server 身份验证”。我不知道我最初是如何使用“Windows 身份验证”的，但更改它为我解决了这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-08-18T03:34:11.677

增加连接数是解决方案。

默认为 4

右键单击 SQL Server 实例并转到属性

从那里单击连接选项卡

[sql](https://i.stack.imgur.com/1ZNxX.png)

并增加连接到更高数量实例的用户连接

# windows-7 - sql server 2008 windows 身份验证从另一台电脑添加用户

> ID：11131530
> 
> 赞同：0
> 
> 时间：2012-06-21T04:34:10.070
> 
> 标签：windows-7, sql-server-2008-r2, windows-authentication

我想使用 Windows 7 连接到另一台计算机（在同一网络上）上的数据库服务器。我在 win 7 上运行 SQL Server 2008 r2 作为服务器，客户端是运行 Win 7 或 XP 的 PC。

当我想将用户添加到服务器计算机时，服务器无法更改位置来搜索用户，因为服务器旁边没有其他可用位置。我需要配置什么才能完成这项工作？

PS SQL 身份验证不是一个选项，因为我使用的是文件流。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:41:45.973

仅供参考：确保您的数据库服务器身份验证是 SQL Server 和 WindowsAuthentication 模式，并且您是 SQL Server Management Studio。

设置 SQL Server 和 Widows 身份验证模式。

1.  连接到您的 SQL Server 实例
2.  右键单击转到属性
3.  在选择页面容器上选择安全性
4.  然后在服务器身份验证上选择 SQL Server 和寡妇身份验证模式。
5.  点击确定

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:37:33.443

如果您未连接到域，则必须使用混合模式身份验证（也称为 SQL Server 身份验证）。您可以在 TechNet 上找到更多详细信息：[http ://technet.microsoft.com/en-us/library/ms144284.aspx](http://technet.microsoft.com/en-us/library/ms144284.aspx)

# python - 使用 Python 在 3D 中查找周围数据点的距离和角度。寻找直线

> ID：11131536
> 
> 赞同：1
> 
> 时间：2012-06-21T04:35:24.103
> 
> 标签：python, scipy, ipython

我正在使用 Ipython 笔记本。我正在做一个项目，我需要查看 3D 空间中的大约 100 个数据点，并计算出每个数据点之间的距离以及彼此之间的角度。我想查看数据点的相关性，并最终查看数据是否有任何结构（隐藏在某处的直线）。我研究了聚类技术和霍夫变换，但它们似乎没有给我我需要的结果。任何想法都非常感谢..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:11:07.270

对于确定三维点之间的成对距离的第一个问题，您可以使用`scipy.spatial.distance.pdist()`. 这将为 n 个点生成 n(n-1)/2 距离。对于寻找点之间角度的第二个问题，这更棘手。这似乎很棘手，我什至不想考虑它；但是，为此，您可以使用`scipy.spatial.distance.cosine()`，这将确定两个向量之间的余弦距离。

你看过scikits吗？我发现它们对我的工作很有帮助。[http://scikit-learn.org/stable/](http://scikit-learn.org/stable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:31:28.720

最好使用`scipy.spatial.distance.pdist()`cjohnson318 的回答中提到的方法找到距离。对于一个小数组点'a'定义为：

```
import numpy as np
a=np.array([[0,0,0],[1,1,1],[4,2,-2],[3,-1,2]]) 
```

点之间的距离欧几里得距离'D'可以找到：

```
from scipy.spatial.distance import pdist, squareform
D = squareform(pdist(a)) 
```

在 3d 极坐标表示法中，您需要 2 个角度来定义从一个点到另一个点的方向。给出方向的笛卡尔单位向量似乎也可以满足您的目的。这些可以找到：

```
(a-a[:,np.newaxis,:]) / D[...,np.newaxis] 
```

这将包括对角元素中的 NaN，因为从点到自身没有向量。如有必要，可以使用将这些更改为零`np.nan_to_num`

如果您确实需要角度，则可以通过应用于`np.arctan`单位向量的分量来获得它们。

# jquery - 无法在我的 Joomla 网站上正确实现 jquery/isotope

> ID：11131537
> 
> 赞同：0
> 
> 时间：2012-06-21T04:35:24.443
> 
> 标签：jquery, joomla, jquery-isotope

我试图让同位素在我网站的一个页面上工作，这样我就可以以一种奇特的方式分享网络视频。我将同位素文件上传到我的网站，然后将以下代码放入我在单个页面上发布的文章中。当我查看页面时，我可以看到我想观看的视频的图像，当我单击它们时，我可以观看它们但没有动画或移动，图像是静态的并且在页面的一侧垂直.

我犯了某种错误或没有理解某些东西，有人可以指出我正确的方向。我使用的代码如下：

```
<!doctype html>
<html lang="en">
<head>

  <meta charset="utf-8" />
  <title>&middot; Videos</title>

  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="/public_html/templates/rt_mediamogul/Iso/style.css" />

  <!-- scripts at bottom of page -->

</head>
<body class="demos ">

  <section id="content">

  <h1>Images</h1>

 <section id="copy">
    <p>Isotope is triggered after all images are loaded with the <a href="public_html/templates/rt_mediamogul/Iso/help.html#imagesloaded_plugin">    <code>imagesLoaded</code> plugin</a>. </p>
  </section>

  <div id="container" class="photos clearfix">

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=u_IHMPVFyq8" title="Tiger Surgery on Youtube"><img src="http://i4.ytimg.com/vi/u_IHMPVFyq8/mqdefault.jpg" alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=vj-H_Mbfvu4" title="Is engineering right for me, on Youtube"><img src="http://i4.ytimg.com/vi/vj-H_Mbfvu4/mqdefault.jpg" alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=I9t-gYnPNaw" title="A fast math trick, on Youtube"><img src="http://i4.ytimg.com/vi/I9t-gYnPNaw/mqdefault.jpg" alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=3-tXkRb2GFY" title="Biology by Khan Academy, on Youtube"><img src="http://i4.ytimg.com/vi/3-tXkRb2GFY/mqdefault.jpg" alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=4FROxZ5i67k" title="Space Shuttle Launch, on Youtube"><img src="http://i4.ytimg.com/vi/4FROxZ5i67k/mqdefault.jpg" alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=6aK2CKrdjbE" title="Mr Bean does Chemistry"><img src="http://i4.ytimg.com/vi/6aK2CKrdjbE/mqdefault.jpg" alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=k6U-i4gXkLM" title="Introduction to computer programing, on Youtube"><img src="http://i4.ytimg.com/vi/k6U-i4gXkLM/mqdefault.jpg" alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=3vgNvXdkQaU" title="Identifying rocks for dinner."><img src="http://i4.ytimg.com/vi/3vgNvXdkQaU/mqdefault.jpg"   alt="Science" /></a>
  </div>

  <div class="photo">
    <a href="http://www.youtube.com/watch?v=NHjLO_cw5iE" title="Punk economics in Ireland"><img src="http://i4.ytimg.com/vi/NHjLO_cw5iE/mqdefault.jpg" alt="Science" /></a>
  </div>

 </div> <!-- #container -->

  <script src="public_html/templates/rt_mediamogul/Iso/jquery-1.7.1.min.js"></script>
  <script src="public_html/templates/rt_mediamogul/Iso/jquery.isotope.min.js"></script>
  <script>
$(function(){

  var $container = $('#container');

  $container.imagesLoaded( function(){
    $container.isotope({
      itemSelector : '.photo'
    });
  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:27:58.247

我很确定您不能将 html 标签等添加到文章中，因为这基本上将其视为一个全新的页面。因此，以下内容将不起作用：

```
<!doctype html>
<html lang="en">
<head>

  <meta charset="utf-8" />
  <title>&middot; Videos</title>

  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="/public_html/templates/rt_mediamogul/Iso/style.css" />

  <!-- scripts at bottom of page -->

</head> 
```

标签也不会`body`因为页面已经有这个所以你让页面有2个`body`标签。您可以创建一个简单的模块，将其嵌入到您的文章中并使用每个脚本，只需将以下代码添加到顶部的 php 部分：

```
$document->addScript(JURI::root() . "modules/mod_yourmodule/script.js"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:58:20.537

加载 javascripts 时在 public_html 之前添加一个斜杠：

```
<script src="/public_html/..."> 
```

# sql-server - SQL Server 在 INSERT 和 Update 上创建触发器

> ID：11131540
> 
> 赞同：8
> 
> 时间：2012-06-21T04:36:12.033
> 
> 标签：sql-server, sql-server-2008-r2

我在 SQL Server 2008 R2 中创建了一个包含以下列的表：ObservationId、FirstCreatedDate、description、... 和 LastUpdatedDate。**ObservationId**是一个以 1 为增量的标识。

我需要创建两个触发器，一个用于 INSERT，另一个用于 UPDATE。在插入新记录时，INSERT 触发器将通过获取当前日期时间来更新 FirstCreatedDate 列；在更新现有记录时，UPDATE 触发器将通过获取当前日期时间来更新 LastUpdatedDate 列。

我没有这样做，因为我猜测身份可能是问题所在。

谁能帮我一把？谢谢！

干杯，亚历克斯

```
ALTER TRIGGER [dbo].[T_InsertNewObservation] ON [dbo].[GCUR_OBSERVATION] 
  AFTER INSERT
AS 
BEGIN
  -- SET NOCOUNT ON added to prevent extra result sets from
  -- interfering with SELECT statements.
  SET NOCOUNT ON;

  -- Insert statements for trigger here
  UPDATE GCUR_OBSERVATION SET GCUR_OBSERVATION.FirstCreatedDate = getdate()
  FROM GCUR_OBSERVATION a INNER JOIN INSERTED ins ON a.ObservationId = ins.ObservationId

END 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T04:42:27.950

我认为您大多是正确的，但没有正确访问 INSERTED 或 DELETED 表。

```
ALTER TRIGGER [dbo].[T_InsertNewObservation] ON [dbo].[GCUR_OBSERVATION] 
  AFTER INSERT
AS 
BEGIN
  -- SET NOCOUNT ON added to prevent extra result sets from
  -- interfering with SELECT statements.
  SET NOCOUNT ON;

  -- get the last id value of the record inserted or updated
  DECLARE @id INT
  SELECT @id = [ObservationId]
  FROM INSERTED

  -- Insert statements for trigger here
  UPDATE GCUR_OBSERVATION 
  SET GCUR_OBSERVATION.FirstCreatedDate = GETDATE()
  WHERE [ObservationId] = @id 

END 
```

PS。希望这能像我在记事本中写的那样有效，并且还没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:15:36.663

下面的代码用于 AFTER UPDATE 以修改最后更改的日期列。

如果您发现任何问题，请提出建议。谢谢！

```
ALTER TRIGGER [dbo].[T_UpdateObservation] ON [dbo].[GCUR_OBSERVATION] 
AFTER UPDATE
AS 
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- get the last id value of the record inserted or updated
DECLARE @id INT
SELECT @id = [ObservationId]
FROM DELETED

-- Insert statements for trigger here
UPDATE GCUR_OBSERVATION
SET GCUR_OBSERVATION.LastUpdatedDate = getdate()
WHERE [ObservationId] = @id

END 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-07-18T08:51:39.087

```
Create TRIGGER [dbo].[TrigerName] ON [dbo].[TableCreateTriger] FOR INSERT AS
INSERT INTO TableInsertDate SELECT * FROM TableCreateTriger 
```

# asp.net - 如何使用 WebConfiguratonManager？

> ID：11131543
> 
> 赞同：1
> 
> 时间：2012-06-21T04:36:35.747
> 
> 标签：asp.net, vb.net

我是 ASP.net 和 VB.net 的新手。我正在从《Beginning ASP.Net 3.5 in VB 2008》一书中学习

这本书正在使用`Web.config`，当我打电话给它时

```
Private Conn As String = WebConfigurationManager.ConnectionStrings("MyConnectionString").ConnectionString 
```

有错误说：

> 名称`WebConfigurationManager`未声明。

是`WebConfigurationManager`函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:57:19.317

你可能忘记了：

```
System.Web.Configuration; 
```

在图书馆。

# css - 为 Web 背景上的图像叠加创建磨砂玻璃效果

> ID：11131544
> 
> 赞同：3
> 
> 时间：2012-06-21T04:36:48.027
> 
> 标签：css, background, gimp

我正在把我的线框放在一起，并且作为新的设计也很难得到一个好的设计。

我有一个我想使用的背景图像，但想通过在图像顶部分层来柔化整个效果，类似于非常轻的磨砂玻璃效果。

谁能建议如何最好地创建一个磨砂玻璃层或达到类似效果的方法？我在考虑分层，以防我决定在背景上放置几个其他元素，然后再用磨砂玻璃分层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:25:37.297

首先，我会在该图像之上放置一个 div。这可以通过做这样的事情来实现

```
<div class="box">
<img src="yourimage.jpg" />
<div class="top-layer"></div>
</div> 

.box{
  position: relative;
}
.top-layer{
  position: absolute;
  top: 0; left: 0;
} 
```

最简单和最有效的方法可能是使用 gimp 或 photoshop 创建模仿磨砂玻璃的半透明 png，并将其设置为 .top-layer 的背景。

如果您不想使用其他图像并想要纯 css 解决方案，那么您应该尝试使用 .top-layer 样式属性。尝试使用线性和径向渐变（白色、浅蓝色和透明度的混合）、不透明度和多个框阴影的多个背景。这些设计应该会有所帮助：

[http://dev.opera.com/articles/view/beautiful-ui-styling-with-css3-text-shadow-box-shadow-and-border-radius/](http://dev.opera.com/articles/view/beautiful-ui-styling-with-css3-text-shadow-box-shadow-and-border-radius/)

尤其是《某部手机主屏》和《盒子3：他们叫我格拉斯先生》。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:48:36.000

所有的磨砂玻璃本质上都是失真的，通常还会添加一点光。

对于失真，您可以使用 jQuery（如果您每次都可以在客户端运行它），就像在[这个 jQuery 示例](http://www.htmldrive.net/items/show/1238/Beautiful-images-animation-Waves-effect)中一样（如果您遵循该代码，您将希望拥有`speed=0`并且没有缩放）。

# c# - 调用方法 DrawString 时字符显示为白框

> ID：11131546
> 
> 赞同：2
> 
> 时间：2012-06-21T04:37:10.863
> 
> 标签：c#, .net, gdi

我有一个很好的问题要问你。我搜索了所有的谷歌和 MSDN 并没有找到任何东西。

我正在尝试做一个程序，将字体导出到每个字符的单个 PNG 图像。我目前正在使用新的 Windows 字体**Segoe UI Symbol**对其进行测试。请注意我知道字体许可条款，我不会在互联网上分发该字体。

好吧，当我调用方法时，真正的问题发生了`DrawString`，成员`Graphics`。我将 unicode 整数值转换为 char，然后转换为字符串。我已经尝试将整数转换为 char with`char.ConvertFromUtf32()`和 with `Convert.ToChar()`。

该程序在 26 个字符期间运行良好（从**57344** = **0xE000**开始），当我使用数值直到**57370**时才出现问题。在此之后，没有一个数字不是用白框字符写的。

经过一番搜索，我发现`Font`构造函数的重载，带有属性`gdiCharset`并尝试将其值用作 2，但什么也没发生。

我在下面为您显示源代码。拜托，如果有人可以帮助我，我会很高兴。

**更新** 当我使用转义序列时（比如`"\uE1FF"`代替 char 转换它可以工作！但我不知道如何在 for 循环中制作转义序列。

```
 Font segoe = new Font("Segoe UI Symbol", 800, FontStyle.Regular, GraphicsUnit.Pixel, 2);

        Bitmap bmedidor = new Bitmap(1000, 1000, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
        Graphics gmedidor = Graphics.FromImage(bmedidor);
        // This line below doesn't matter, see the method DrawString
        Size tamanho = gmedidor.MeasureString(char.ConvertFromUtf32(57344).ToString(), segoe).ToSize();

        int[] reducoes = new int[6] {512, 256, 128, 64, 32, 16};
        string caminho = "C:\\InoMetro";

        for (int u = 57344; u < 57896; u++)
        {
            Bitmap caractere = new Bitmap(tamanho.Width, tamanho.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
            Graphics criador = Graphics.FromImage(caractere);

            criador.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
            criador.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
            criador.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
            criador.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

            // Here we have the problem
            criador.DrawString(Convert.ToChar(u).ToString(), segoe, new SolidBrush(Color.Black), new PointF(0, 0));

            for (int r = 0; r < reducoes.Length; r++)
            {
                int taR = reducoes[r];

                Bitmap reducao = new Bitmap(taR, taR, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
                Graphics redutor = Graphics.FromImage(reducao);

                redutor.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                redutor.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
                redutor.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
                redutor.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

                redutor.DrawImage(caractere, 0, 0, taR, taR);
                reducao.Save(caminho + "\\" + taR.ToString() + "\\" + u.ToString() + ".png", System.Drawing.Imaging.ImageFormat.Png);

            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:53:49.930

U+E000-U+F8FF（十进制57344-63743）是[私人使用区字符](http://www.unicode.org/charts/PDF/UE000.pdf)。

大多数字体（包括 Segoe UI Symbol）不为该范围内的任何代码点提供字形，因此典型的后备行为是字体渲染器显示白框 () 或黑色菱形中的问号 (�)当被要求绘制这些代码点之一时。

Windows 8 上的 Segoe UI Symbol 只定义了 U+E000-U+E019 的字形，然后不提供 U+E01A-U+E051 的字形；这就是从 57370 (0xE01A) 到 57425 (0xE051) 显示白框的原因。

# r - 如何列出 R 中所有唯一的数据点对？

> ID：11131550
> 
> 赞同：6
> 
> 时间：2012-06-21T02:03:38.447
> 
> 标签：r, unique, frequency

所以我有两个数据点向量，我想列出每个唯一对以及该对的频率。我知道我可以使用 table 来处理其中一个向量，但我似乎无法弄清楚如何让它成对地完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T05:35:02.043

只是...

```
dat <- data.frame(x = sample(letters[1:3], size = 100, replace = TRUE),
    y = sample(letters[1:3], size = 100, replace = TRUE) )

unique(dat)
table(dat) 
```

或者，假设您的向量只是 x 和 y，而您只想要表格...

```
table(x,y) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T02:48:27.237

```
# A sample dataset:
dat <- data.frame(x = sample(letters, size = 1000, replace = TRUE),
                  y = sample(letters, size = 1000, replace = TRUE)
)

# Aggregating using just base R:
as.data.frame(table(dat$x, dat$y))

# With plyr
library(plyr)
count(dat, vars = c(x, y))
count(dat) # Or, less generalizably 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T02:22:53.093

如果`vec1`和`vec2`是有问题的向量：

```
points <- mapply(c, vec1, vec2, SIMPLIFY=FALSE)
uniq.points <- unique(points)
freqs <- sapply(uniq.points, FUN=function(point) length(which(points %in% list(point))))
cbind(do.call(rbind, uniq.points), freqs)  # matrix of points and freqs 
```

# python - 为什么我的 Google App Engine 应用程序中会出现一个空白文件？

> ID：11131564
> 
> 赞同：0
> 
> 时间：2012-06-21T04:39:03.493
> 
> 标签：python, google-app-engine

我正在尝试制作一个基本的 python 应用程序来自学 Google App Engine。我有以下2个文件。

你好世界.py：

```
import cgi
import webapp2

from google.appengine.api import users

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("""
            <html>
            <body>
            <form action="/sign" method="post">
            <div><textarea name="content" rows="3" cols="60"></textarea></div>
            <div><input type="submit" value="Sign Guestbook"></div>
            </form>
            </body>
            </html>""")

class Guestbook(webapp2.RequestHandler):
    def post(self):
        self.response.out.write('<html><body>You wrote:<pre>')
        self.response.out.write(cgi.escape(self.request.get('content')))
        self.response.out.write('</pre></body></html>')

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/sign', Guestbook)],
                              debug=True) 
```

应用程序.yaml

```
application: helloworld
version: 1
runtime: python
api_version: 1

handlers:
- url: /.*
  script: helloworld.py 
```

但是，当我运行此应用程序并在 Google Chrome 中访问 localhost:8080 时，会显示一个空白页面，而不是我期望的表单。为什么？我的日志中显示了 200 条回复。

```
*** Running dev_appserver with the following flags:
    --admin_console_server= --port=8080
Python command: /usr/bin/python2.7
/Users/davidfaux/Desktop/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/search/search.py:232: UserWarning: DocumentOperationResult._code is deprecated. Use OperationResult._code instead.
  'Use OperationResult.%s instead.' % (name, name))
/Users/davidfaux/Desktop/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/search/search.py:232: UserWarning: DocumentOperationResult._CODES is deprecated. Use OperationResult._CODES instead.
  'Use OperationResult.%s instead.' % (name, name))
WARNING  2012-06-21 04:30:38,064 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
Warning: You are using a Python runtime (2.7) that is more recent than the production runtime environment (2.5). Your application may use features that are not available in the production environment and may not work correctly when deployed to production.
WARNING  2012-06-21 04:30:38,204 dev_appserver.py:3423] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: No module named _imaging
INFO     2012-06-21 04:30:38,220 dev_appserver_multiprocess.py:647] Running application dev~helloworld on port 8080: http://localhost:8080
INFO     2012-06-21 04:30:38,221 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8080/_ah/admin
INFO     2012-06-21 04:31:00,561 dev_appserver.py:2904] "GET / HTTP/1.1" 200 -
INFO     2012-06-21 04:31:00,758 dev_appserver.py:2904] "GET /favicon.ico HTTP/1.1" 200 -
INFO     2012-06-21 04:31:02,091 dev_appserver.py:2904] "GET / HTTP/1.1" 200 -
INFO     2012-06-21 04:31:02,180 dev_appserver.py:2904] "GET /favicon.ico HTTP/1.1" 200 -
INFO     2012-06-21 04:31:04,580 dev_appserver.py:2904] "GET /favicon.ico HTTP/1.1" 200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:36:02.437

由于您使用的是 python 2.5。您缺少以下内容：

```
from google.appengine.ext.webapp.util import run_wsgi_app
...
def main():
    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

有关详细信息，请参阅[入门指南](https://developers.google.com/appengine/docs/python/gettingstarted/usingwebapp)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T20:24:03.900

可能是您缺少 HTTP 标头。在您的请求处理程序中添加：

```
self.response.headers['Content-Type'] = 'text/plain' 
```

# javascript - Chrome 浏览器中的 TTS

> ID：11131566
> 
> 赞同：0
> 
> 时间：2012-06-21T04:39:13.517
> 
> 标签：javascript, google-chrome

如何在不使用任何扩展程序或插件的情况下使用 JavaScript 在 Chrome 上进行文本转语音？对于 Firefox 和 IE，它运行良好。我不知道如何为 Chrome 做这件事。困难的部分是在没有 JavaScript 中的任何插件和扩展的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:49:21.580

你可以使用这个 jQuery 函数来做语音到文本（但不是文本到语音）。

```
$(document).find(':input[type=text]').attr('x-webkit-speech', "x-webkit-speech"); 
```

顺便说一句：这只适用于 Chrome 而不是任何其他浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:33:15.583

据我了解，目前您不能简单地将 Javascript 嵌入到页面中来提供此功能。您需要开发一个扩展，因为 chrome 提供 API，但它们需要扩展级权限：http: [//googlecode.blogspot.com/2011/10/new-text-to-speech-api-for-chrome.html](http://googlecode.blogspot.com/2011/10/new-text-to-speech-api-for-chrome.html)

我看到的唯一另一种选择是使用 Google 音频 API（铬的一部分）完全编写您自己的库，该库使用 FFT 合成将文本转换为语音，这可能需要数年时间。该 API 的文档在这里：[http ://chromium.googlecode.com/svn/trunk/samples/audio/index.html](http://chromium.googlecode.com/svn/trunk/samples/audio/index.html)

# java - Maven多模块项目的构建顺序？

> ID：11131575
> 
> 赞同：65
> 
> 时间：2012-06-21T04:40:11.330
> 
> 标签：java, maven, build, multi-module

情况是，我有两个结构相同的 Maven 多模块项目：

```
家长
    - 模块 1
    - 模块 2

```

当我构建项目 1 时，我看到先构建父级（顺序是**parent->module1->module2**）。但是对于项目 2，最后构建了父级（顺序为**module1->module2->parent**）。为什么这两个项目有不同的构建顺序？此外，如何手动控制构建顺序？

**更新1：**
两个父项目都是没有源代码的简单POM项目，所以我无法根据依赖图解释构建顺序。

**更新 2：**
除了 GAV 和子模块名称之外，父 POM 是相同的：

```
<?xml 版本="1.0" 编码="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http:// /maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>父组ID</groupId>
    <artifactId>parent-artifact-id</artifactId>
    <version>父版本</version>
    <包装>pom</包装>
    <name>父名</name>
    <模块>
        <module>module-1</module>
        <module>module-2</module>
    </模块>
</项目>

```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-21T04:57:02.767

构建顺序由 Maven 反应器确定，这是一种通过对项目进行排序来自动确保多模块构建的正确构建顺序的机制。

请参阅[官方文档](http://maven.apache.org/guides/mini/guide-multiple-modules.html)了解其工作原理。

它说：

> 排序项目时遵循以下关系：
> 
> *   项目依赖于构建中的另一个模块
> *   插件声明，其中插件是构建中的另一个模块
> *   插件依赖于构建中的另一个模块
> *   构建中另一个模块的构建扩展声明
> *   元素中声明的顺序（如果没有其他规则适用）

您无法手动控制构建顺序。如果要更改顺序，则必须对影响反应器排序顺序的项目进行更改。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-21T05:00:48.003

在高层次上，构建顺序基于模块依赖图的[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)。

**编辑：**问你问题。我知道项目 1 包含两个模块，项目 2 也是如此。但是项目 2 中的模块是否明确将“父”pom 声明为父节点？我在想也许你的项目 1 模块明确声明了父 pom，而项目 2 模块没有。这意味着项目 2“父级”根本不是真正的父级，因此不必在模块之前构建。无论如何，这是我的猜测。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-30T10:55:48.817

我最近在使用 CentOS 7 时遇到了这个问题。我将 Maven 从 3.0.5 更新到 3.5.3，问题已经解决。如果有人也有这个问题，您可以先尝试这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-24T13:27:03.613

**概括**

*为什么？*

Maven 使用`<module>`声明来确定**要包含在当前运行中的模块列表**。Maven 使用`<parent>`声明为**每个包含的模块**生成有效的 POM ，然后用于执行该模块的构建。

在**Project 1**中，每个`module1`和`module2`指定`parent`模块中的`<parent>`部分。在**Project 2**中，既不`module1`也不`module2`指定`parent`模块中的`<parent>`部分。

*如何手动控制构建顺序？*

通过更改模块之间的依赖关系，包括`<parent>`、、`<dependencies>`插件依赖等，如[官方文档中所述](https://maven.apache.org/guides/mini/guide-multiple-modules.html)。

另请查看[POM 简介以](https://maven.apache.org/guides/introduction/introduction-to-the-pom.html)了解有关聚合和继承的讨论。

* * *

**细节**

Maven中模块关系的可能场景有聚合（`<module>`声明）和继承（`<parent>`声明）四种情况。

让我们假设一个`A`带有包装`pom`的模块和一个模块`B`（包装无关紧要）。该模块`A`可以是父模块或聚合器。该模块`B`可以引用`A`为父级，也可以不引用。

**情况1：**

既不相互引用，`A`也不`B`相互引用 - 模块是独立的。Maven 无法控制构建顺序，每个模块都是独立构建的，具有手动构建顺序控制。

**案例二：**

该模块`A` **包括**. `B`_ `<modules>`该模块`B` **未声明** `A`为父模块。在这种情况下，模块`A`是模块的聚合器。`B`

*   Maven 调用`mvn -f A/pom.xml`将首先构建`B`，然后`A`.
*   Maven 调用`mvn -f B/pom.xml`只会构建`B`。

**案例3：**

该模块`A` **包括**. `B`_ `<modules>`该模块`B` **声明** `A`为父模块。在这种情况下，模块`A`既是模块的父模块，**又**是模块的聚合器（反应器） 。`B`

*   Maven 调用`mvn -f A/pom.xml`将首先构建`A`，然后`B`.
*   Maven 调用`mvn -f B/pom.xml`将`B`仅构建，但将使用 POM`A`生成有效的 POM，`B`方法是从本地存储库或通过以下方式解析它`/project/parent/relativePath`。

**案例4：**

该模块`A` **不**`B`包括`<modules>`. 该模块`B` **声明** `A`为父模块。在这种情况下，模块`A`是模块的父级。`B`

*   Maven 调用`mvn -f A/pom.xml`只会构建`A`。
*   Maven 调用`mvn -f B/pom.xml`将`B`仅构建，但将使用 POM`A`生成有效的 POM，`B`方法是从本地存储库或通过以下方式解析它`/project/parent/relativePath`。

# android - imageview上的android动画发光效果

> ID：11131576
> 
> 赞同：8
> 
> 时间：2012-06-21T04:40:11.887
> 
> 标签：android

我正在开发一个应用程序，在我的主页中，我需要为徽标（imageview）提供发光和褪色效果动画我尝试了很多，但找不到如何提供发光效果动画，我知道 onclick 事件的发光效果请帮我解决这个问题 在此先感谢

```
public class CustomView extends ImageView{
public CustomView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}
public CustomView(Context context, AttributeSet attrs) {
    super(context, attrs);
}
public CustomView(Context context) {
    super(context);
}
boolean drawGlow = false;
//this is the pixel coordinates of the screen
float glowX = 0;
float glowY = 0;
//this is the radius of the circle we are drawing
float radius = 20;
//this is the paint object which specifies the color and alpha level 
//of the circle we draw
Paint paint = new Paint();
{
    paint.setAntiAlias(true);
    paint.setColor(Color.WHITE);
    paint.setAlpha(50);
};

@Override
public void draw(Canvas canvas){
    super.draw(canvas);
    if(drawGlow)
        canvas.drawCircle(glowX, glowY, radius, paint);
}
@Override
public boolean onTouchEvent(MotionEvent event){
    if(event.getAction() == MotionEvent.ACTION_DOWN){
        drawGlow = true;
    }else if(event.getAction() == MotionEvent.ACTION_UP)
        drawGlow = false;

    glowX = event.getX();
    glowY = event.getY();
    this.invalidate();
    return true;
}
} 
```

此代码用于触摸事件我想要动画

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-21T05:02:57.087

对于 Glow effect 检查[Glow effect](https://stackoverflow.com/questions/10580052/how-to-make-glow-effect-in-my-images)和 for

对于闪烁类型的动画，使用此方法您必须根据您的要求更改 Reapeatcount 和 Duration

```
AlphaAnimation  blinkanimation= new AlphaAnimation(1, 0); // Change alpha from fully visible to invisible
blinkanimation.setDuration(300); // duration - half a second
blinkanimation.setInterpolator(new LinearInterpolator()); // do not alter animation rate
blinkanimation.setRepeatCount(3); // Repeat animation infinitely
blinkanimation.setRepeatMode(Animation.REVERSE); 
```

使用后如下

```
imageview.startAnimation(blinkanimation);  or imageview.setAnimation(blinkanimation); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T04:47:50.460

这很简单

制作 2 组图像，一组是亮的，另一组是晴天的（亮）

然后，您可以使用 AlphaAnimation 为图像设置动画。

# java - 什么是 Facelets，它与 JSF 有什么关系？

> ID：11131578
> 
> 赞同：2
> 
> 时间：2012-06-21T04:40:28.047
> 
> 标签：java, jsf, facelets

我对 JSF 非常陌生，当我阅读教程时，我很容易混淆 JSF 和 Facelets...

什么是 Facelets？..JSF 和 Facelets 是一样的吗？...

Facelets 与 JSTL 有何不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T05:23:04.220

Facelets 是一种功能强大但轻量级的页面声明语言，用于使用 HTML 样式模板构建 JavaServer Faces 视图并构建组件树。Facelets 功能包括：

·使用 XHTML 创建网页
·除了 JavaServer Faces 和 JSTL 标记库之外，还支持 Facelets 标记库
·支持表达式语言 (EL)
·组件和页面的模板

基本上，如果您使用 JSF，Facelets 允许您添加对在 html 页面中添加 UI 控件很有用的模板标记库（XML 文档）。这个声明是 Facelets 的一个例子：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html">
<!-- look at the xml library 'import' -->
    <body>
        <h:form>
            <h:outputText value="Welcome, #{loggedInUser.name}" disabled="#{empty loggedInUser}" />
            <h:inputText value="#{bean.property}" />
            <!-- look at this tags, the special mark 'h:outputText'... -->
            <h:commandButton value="OK" action="#{bean.doSomething}" /> 
        </h:form>
    </body>
</html> 
```

总之，Facelets 为 UI 控件提供了工具（模板标记库），而 JSF 允许此控件与后台 bean 进行通信。

[http://en.wikipedia.org/wiki/Facelets](http://en.wikipedia.org/wiki/Facelets)
[http://docs.oracle.com/javaee/6/tutorial/doc/gijtu.html](http://docs.oracle.com/javaee/6/tutorial/doc/gijtu.html)

# java - 从java中的十六进制代码获取颜色名称

> ID：11131579
> 
> 赞同：0
> 
> 时间：2012-06-21T04:40:33.913
> 
> 标签：java, colors

我正在使用 java 来找出图像中对象的颜色。我从 imgae 获得了一个像素，然后能够获得该像素的 r、g、b 值。

现在，我想知道这个像素属于哪个颜色。所以我创建了一个映射十六进制代码到颜色名称的映射。现在，我遍历地图并找出地图中所有条目的最短距离，以及与像素距离最小的一个条目，我将该颜色分配给像素。

这是我的一些代码：-

```
private static String getColorName(int[] rgb) {
    Map<String, String> data = new HashMap<String, String>();
    data.put("00ff00", "GREEN");
    data.put("ff0000", "RED");
    data.put("0000ff", "BLUE");

    data.put("00ffff", "CYAN");
    data.put("ffff00", "YELLOW");
    data.put("ff00ff", "PINK");

    data.put("c8c8c8", "LIGHT GREY");
    //data.put("808080", "GREY");
    data.put("ffc800", "ORANGE");
    data.put("4F3E86", "PURPLE");

    data.put("000000", "BLACK");
    data.put("ffffff", "WHITE");

    String hex = "0123456789abcdef";

    int minD = 256*256*256;
    String res = "";

    for (String key : data.keySet()) {
        int r = hex.indexOf(key.charAt(0))*16 + hex.indexOf(key.charAt(1));
        int g = hex.indexOf(key.charAt(2))*16 + hex.indexOf(key.charAt(3));
        int b = hex.indexOf(key.charAt(4))*16 + hex.indexOf(key.charAt(5));

        int distance = (Math.abs(rgb[0] - r)) + 
                (Math.abs(rgb[1] - g)) + 
                (Math.abs(rgb[2] - b));

        if (distance < minD) {
            res = data.get(key);
            minD = distance;
        }
    }
    return res;
} 
```

现在的问题是，

如您所见，距离函数为：- D = |r1-r2| + |g1-g2| + |b1-b2| 其中 |x| 表示 abs(x) 函数 我的黄色被映射到灰色。经过一番调试，我发现了这个。我应该选择什么距离函数或如何改进我的映射？

在 java 中是否有任何内置的东西可以做到这一点？感谢广告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:48:20.193

Color 有一个接受 rgb 值的构造函数，所以：

```
g.setColor( new Color(0x00, 0x00, 0xff) ); 
```

来源是：[类颜色](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html)

# iphone - 这段代码有什么问题..（动画视图）？

> ID：11131584
> 
> 赞同：0
> 
> 时间：2012-06-21T04:41:02.197
> 
> 标签：iphone, objective-c, ios, animation, uikeyboard

我不知道为什么会这样。。

当用户开始在文本字段中输入时，我正在尝试为我的视图设置动画。但该代码仅适用于横向左方向，但不适用于横向右...

这些方法在两个方向都被调用......

这是代码..

```
- (void)keyboardWasShown:(NSNotification *)aNotification {
    if ( keyboardShown )
        return;

        NSTimeInterval animationDuration = 0.3;
        CGRect frame = self.view.frame;
        frame.size.width += 150;
        [UIView beginAnimations:@"ResizeForKeyboard" context:nil];
        [UIView setAnimationDuration:animationDuration];
        self.view.frame = frame;
        [UIView commitAnimations];

    keyboardShown = YES;
}

- (void)keyboardWasHidden:(NSNotification *)aNotification {

        NSTimeInterval animationDuration = 0.3;
        CGRect frame = self.view.frame;
        frame.size.width -= 150;
        [UIView beginAnimations:@"ResizeForKeyboard" context:nil];
        [UIView setAnimationDuration:animationDuration];
        self.view.frame = frame;
        [UIView commitAnimations];

    keyboardShown = NO;
} 
```

到目前为止，我刚刚对值进行了硬编码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:10:20.883

为什么不对视图的原点而不是大小设置动画？

```
frame.origin.y -= 150; 
```

和

```
frame.origin.y = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:33:18.260

好的..在一些帮助下想通了...

当您设置视图的框架并将其控制器添加到窗口的根视图控制器时，您应该使用边界...。

因为窗口框架保持不变......

所以这是新代码的外观..

```
- (void)keyboardShown:(NSNotification *) aNotification {
    if ( keyboardShown )
        return;
    CGRect frame = self.view.bounds;
    frame.origin.y += 150;
    [UIView beginAnimations:@"ResizeForKeyboard" context:nil];
    [UIView setAnimationDuration:0.3];
    self.view.bounds = frame;
    [UIView commitAnimations];
    keyboardShown = NO;
}

- (void)keyboardHidden:(NSNotification *) aNotification {
    CGRect frame = self.view.bounds;
    frame.origin.y -= 150;
    [UIView beginAnimations:@"ResizeForKeyboard" context:nil];
    [UIView setAnimationDuration:0.3];
    self.view.bounds = frame;
    [UIView commitAnimations];
    keyboardShown = NO;
} 
```

# objective-c - iOS 应用中的文本阅读体验

> ID：11131585
> 
> 赞同：0
> 
> 时间：2012-06-21T04:41:11.817
> 
> 标签：objective-c, ios, xcode, text, uiwebview

我想在我的应用程序中实现出色的文本阅读体验，类似于“Pocket”，看起来很像这样：

![在此处输入图像描述](../Images/beea9038180cbd8d8da40d09c4f907b2.png)

基本上，我想在 UIWebView 中加载本地 HTML 文件时控制文本字体大小和字体系列。

谁能指出我正确的方向？是否有任何框架或库可以为这种体验提供基础？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:00:40.783

一个简单的答案是：不要。而是将其加载到 UITextView 中。您可以使用它轻松更改字体大小，因为在 HTML 上您必须修改文件而不是调用 1 行代码。

# java - 面试编码 Java 排序

> ID：11131589
> 
> 赞同：10
> 
> 时间：2012-06-21T04:41:40.133
> 
> 标签：java

编写一个 java 程序从文件中读取输入，然后对每个单词中的字符进行排序。完成此操作后，按升序对所有结果单词进行排序，最后是文件中数值的总和。

*   处理数据时删除特殊字符和停用词
*   测量执行代码所花费的时间

假设文件的内容是：Sachin Tendulkar 获得了 18111 次 ODI 运行和 14692 次测试运行。

输出：achins adeklnrtu adn cdeors dio estt nrsu nrsu 32803

耗时：3毫秒

我的代码需要 15 毫秒才能执行.....

请建议我任何快速的方法来解决这个问题............

代码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.*;

public class Sorting {

    public static void main(String[] ags)throws Exception
    {
        long st=System.currentTimeMillis();
        int v=0;
        List ls=new ArrayList();
        //To read data from file
        BufferedReader in=new BufferedReader(
                 new FileReader("D:\\Bhive\\File.txt"));
        String read=in.readLine().toLowerCase();
        //Spliting the string based on spaces
        String[] sp=read.replaceAll("\\.","").split(" ");
        for(int i=0;i<sp.length;i++)
        {
            //Check for the array if it matches number
            if(sp[i].matches("(\\d+)"))
                //Adding the numbers
                v+=Integer.parseInt(sp[i]);
            else
            {
                //sorting the characters
                char[] c=sp[i].toCharArray();
                Arrays.sort(c);
                String r=new String(c);
                //Adding the resulting word into list
                ls.add(r);
            }
        }
        //Sorting the resulting words in ascending order
        Collections.sort(ls);
        //Appending the number in the end of the list
        ls.add(v);
        //Displaying the string using Iteartor
        Iterator it=ls.iterator();
        while(it.hasNext())
            System.out.print(it.next()+" ");
        long time=System.currentTimeMillis()-st;
        System.out.println("\n Time Taken:"+time);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T06:40:29.623

Use `indexOf()` to extract words from your string instead of `split(" ")`. It improves performance.

See this thread: [Performance of StringTokenizer class vs. split method in Java](https://stackoverflow.com/questions/5965767/performance-of-stringtokenizer-class-vs-split-method-in-java)

Also, try to increase the size of the output, copy-paste the line *Sachin Tendulkar scored 18111 ODI runs and 14692 Test runs.* 50,000 times in the text file and measure the performance. That way, you will be able to see considerable time difference when you try different optimizations.

**EDIT**

Tested this code (used `.indexOf()`)

```
 long st = System.currentTimeMillis();
        int v = 0;
        List ls = new ArrayList();
        // To read data from file
        BufferedReader in = new BufferedReader(new FileReader("D:\\File.txt"));
        String read = in.readLine().toLowerCase();
        read.replaceAll("\\.", "");
        int pos = 0, end;
        while ((end = read.indexOf(' ', pos)) >= 0) {
            String curString = read.substring(pos,end);
            pos = end + 1;
        // Check for the array if it matches number
            try {
                // Adding the numbers
                v += Integer.parseInt(curString);
            }
            catch (NumberFormatException e) {
                // sorting the characters
                char[] c = curString.toCharArray();
                Arrays.sort(c);
                String r = new String(c);
                // Adding the resulting word into TreeSet
                ls.add(r);
            }
        }
        //sorting the list
        Collections.sort(ls);
        //adding the number
        list.add(v);
        // Displaying the string using Iteartor 
        Iterator<String> it = ls.iterator();
        while (it.hasNext()) {
            System.out.print(it.next() + " ");
        }
        long time = System.currentTimeMillis() - st;
        System.out.println("\n Time Taken: " + time + " ms"); 
```

**Performance using 1 line in file**
*Your code: 3 ms
My code: 2 ms*

**Performance using 50K lines in file**
*Your code: 45 ms
My code: 32 ms*

As you see, the difference is significant when the input size increases. Please test it on your machine and share results.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T05:23:07.600

我唯一看到的是：以下行是不必要的昂贵：

```
 System.out.print(it.next()+" "); 
```

那是因为[打印效率低下，因为所有的冲洗都在进行。](http://www.certpal.com/blogs/2010/11/system-out-println-performance/)相反，使用字符串构建器构造整个字符串，然后减少到一次 print 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:44:11.513

我使用 PriorityQueue 而不是 List 运行相同的代码。此外，正如 nes1983 建议的那样，首先构建输出字符串，而不是单独打印每个单词有助于减少运行时间。

这些修改后我的运行时间肯定减少了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T05:34:21.250

我删除了列表并仅使用数组读取它，在我的机器中，使用您的代码将代码变为 6 毫秒，仅使用数组需要 4 到 5 毫秒。在你的机器上运行这段代码，让我知道时间。

```
import java.io.BufferedReader;

import java.io.FileReader;

import java.util.*;

public class Sorting {
public static void main(String[] ags)throws Exception
{
    long st=System.currentTimeMillis();
    int v=0;
    //To read data from file
    BufferedReader in=new BufferedReader(new FileReader("File.txt"));
    String read=in.readLine().toLowerCase();
    //Spliting the string based on spaces
    String[] sp=read.replaceAll("\\.","").split(" ");
    int j=0;
    for(int i=0;i<sp.length;i++)
    {
        //Check for the array if it matches number
        if(sp[i].matches("(\\d+)"))
            //Adding the numbers
            v+=Integer.parseInt(sp[i]);
        else
        {
            //sorting the characters
            char[] c=sp[i].toCharArray();
            Arrays.sort(c);
            read=new String(c);
            sp[j]= read;
            j++;
        }
    }
    //Sorting the resulting words in ascending order
    Arrays.sort(sp);
    //Appending the number in the end of the list
    //Displaying the string using Iteartor
    for(int i=0;i<j; i++)
        System.out.print(sp[i]+" ");
        System.out.print(v);
    st=System.currentTimeMillis()-st;
    System.out.println("\n Time Taken:"+st);
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T07:06:32.487

我还通过包含@Teja 逻辑进一步修改了这样的代码，并从 2 毫秒产生了 1 毫秒：

```
long st=System.currentTimeMillis();
     BufferedReader in=new BufferedReader(new InputStreamReader(new FileInputStream("D:\\Bhive\\File.txt")));
     String read= in.readLine().toLowerCase();
     String[] sp=read.replaceAll("\\.","").split(" ");
     int v=0;
     int len = sp.length;
     int j=0;
     for(int i=0;i<len;i++)
     {
            if(isNum(sp[i]))
             v+=Integer.parseInt(sp[i]);
             else
            {
              char[] c=sp[i].toCharArray();
              Arrays.sort(c);
              String r=new String(c);
              sp[j] = r;
              j++;
             }
      }
        Arrays.sort(sp, 0, len);
        long time=System.currentTimeMillis()-st;
        System.out.println("\n Time Taken:"+time);
        for(int i=0;i<j; i++)
        System.out.print(sp[i]+" ");
        System.out.print(v); 
```

编写了一个小实用程序来执行检查字符串是否包含数字而不是正则表达式：

```
private static boolean isNum(String cs){
     char [] s = cs.toCharArray();
     for(char c : s)
     {
      if(Character.isDigit(c))
       {
         return true;
       }
     }
     return false;
 } 
```

在调用 System.out 操作之前计算时间，因为这是阻塞操作。

# javascript - 如果使用 Javascript 输入，Google Adsense 是否不承认他们的代码？

> ID：11131596
> 
> 赞同：1
> 
> 时间：2012-06-21T04:42:16.777
> 
> 标签：javascript, adsense

我有一个 Google Adsense 广告，它会根据用户是否登录来显示或不显示，并且写出它的代码是用 Javascript 编写的。我已经（我相信）按照他们的说明在 Adsense 界面中启用了爬虫访问。

不幸的是，广告似乎没有显示。这是代码：

```
document.getElementById("google-ad").innerHTML = '<script type="text/javascript"><!--\n\
google_ad_client = "ca-pub-0000000000000000";\n\
/* MySite */\n\
google_ad_slot = "0000000000";\n\
google_ad_width = 320;\n\
google_ad_height = 50;\n\
//-->\n\
</script>\n\
<script type="text/javascript"\n\
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">\n\
</script>'; 
```

我一直在查看 Google 的所有帮助部分和故障排除指南，以确保我遵守了他们的所有技术和政策指南。最终，我联系了 Google 支持，得到了回复：

> 我查看了您的网站，但无法在您网页的 HTML 源代码中找到我们的广告代码。

知道客户支持的目标是尽快解雇员工，我想确保当我回信给他们时，我会以具体和明智的回应来澄清问题，这样他们就不会只是挥手致意它通过剪切和粘贴解雇而消失。

从他们的回复看来，谷歌客户支持在Javascript 写入代码*之前正在查看 HTML 代码。*我知道如果我在 Firefox 中查看页面的源代码，那么它将不可见，但如果我使用 Firebug 查看页面，则 Javascript 生成的内容是显而易见的。

但是，如果我写他们说“AdSense 广告是使用 Javascript 包含的”，那么他们的回答几乎肯定是“检查你的 Javascript”（好像我还没有一千次）或者只是“不要那样做。”

在我打那场战斗之前，有什么理由相信我正在做的事情不应该奏效吗？人们不是一直在使用 Javascript 包含 Google 代码吗？

有没有一种方法可以让我使用更可能满足他们要求的 Javascript 来包含广告？

* * *

**附加说明：**当我在 Firebug 中查看我的代码时，我看到一些附加代码附加了来自 Google 的代码，这让我觉得 Google 广告联系了 Google 服务器并得到了某种响应，即使广告是不显示。所以当他们说他们“看不到广告代码”时，我感到特别惊讶。这是它在 Firebug 中的样子：

![在此处输入图像描述](../Images/7af737a7572603f25576b20ffaa753a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:41:26.807

我不是 100%，但我相当确定您应该能够使用 JS 附加到 google 广告脚本中。但是，如果此广告仅在用户登录时显示，则可能是 Google 支持人员尚未登录，因此不会触发脚本。此外，Adsense 爬虫将无法访问您的网页（也不会显示广告）。如果您访问[http://support.google.com/adsense/bin/answer.py?hl=en-GB&answer=10532](http://support.google.com/adsense/bin/answer.py?hl=en-GB&answer=10532)，它会提供有关如何明确允许爬虫访问的详细信息。

这取决于登录时显示的广告，而不是相反。抱歉，如果没有帮助！

# oracle - 运行 Oracle 简单过程

> ID：11131601
> 
> 赞同：0
> 
> 时间：2012-06-21T04:42:50.693
> 
> 标签：oracle, stored-procedures, plsql, toad

我是 Oracle 的新手，我在 Oracle toad 中有一个以下存储过程，它编译成功。

我想运行这个程序并查看结果。

```
CREATE OR REPLACE procedure SCOTT.sp_testing (v_date1 in date ,vno out varchar2)
As
BEGIN
select voucher_no  into vno from v_jv_ms  where v_date = v_date1;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:53:42.947

或者，您可以将结果记录到数据库中的表中。这两种方法（控制台与数据库）可以互补，并且在不同的场景中都有用。

实现这一目标的步骤：

1.  创建日志表以接收日志记录。
2.  创建一个写入日志输出的过程。
3.  使用所需参数调用日志记录过程。
4.  从记录表中选择以查看结果。

**1.创建表接收日志输出：**

```
CREATE TABLE tlog (
    seq         NUMBER(8),
    ltime       DATE,
    llevel      VARCHAR2(5),
    module      VARCHAR2(64),
    message     VARCHAR2(512)
);

CREATE SEQUENCE slog; 
```

**2\. 写日志输出的过程：**

```
CREATE OR REPLACE PROCEDURE plog_debug(module IN VARCHAR2, message IN VARCHAR2) IS
    PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
    INSERT INTO tlog
        (seq, ltime, llevel, module, message)
    VALUES
        (slog.NEXTVAL, SYSDATE, 'DEBUG', module, message);
    COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
END plog_debug; 
```

**3\. 使用所需参数调用日志记录过程。**

```
plog_debug('SCOTT.sp_testing', 'Voucher no is:' || vno); 
```

**4\. 从日志表中选择查看结果：**

```
SELECT * FROM TLOG;
| SEQ | LTIME               | LLEVEL | MODULE           | MESSAGE           | 
| 1   | 21/06/2012 09:49:00 | DEBUG  | SCOTT.sp_testing | Voucher no is:999 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:21:52.633

启动 SQL*Plus（或 TOAD 中的脚本窗口），然后键入或粘贴以下行：

```
set serverout on size 1000000
declare
  v_date1 date := sysdate;
  vno varchar2(100);
begin
  scott.Sp_testing(v_date1, vno);
  dbms_output.put_line(vno);
end;
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:21:29.527

添加`dbms_output.put_line`对您的过程的调用&您可以在 DBMS 输出选项卡中看到输出。

```
CREATE OR replace PROCEDURE scott.Sp_testing (v_date1 IN DATE,
                                              vno     OUT VARCHAR2)
AS
BEGIN
    SELECT voucher_no
    INTO   vno
    FROM   v_jv_ms
    WHERE  v_date = v_date1;

    dbms_output.Put_line('Voucher no is:'
                         || vno);
END; 
```

# objective-c - 为什么 super 不需要分配？

> ID：11131602
> 
> 赞同：0
> 
> 时间：2012-06-21T04:42:51.417
> 
> 标签：objective-c, cocoa-touch, allocation, init, super

我们`alloc`之前总是`init`在Objective C中，然后在写方法的时候`init`，为什么我们不先启动它呢？`alloc``super`

```
- (id) init {
   if(self = [super init]){
      //init iVars
   }
   return self;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T04:52:28.473

因为“alloc”已经为你正在实例化的对象分配了空间。

您的子类不需要为基类分配（单独的）空间。

[您还可以在这个相关问题](https://stackoverflow.com/questions/4002919/why-does-initializing-subclasses-require-calling-the-super-classs-same-init-fun)中找到一些有用的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T04:54:57.620

分配子接口时，其大小包括父接口的大小。它们不是单独的对象，而是组合在一起的。'super' 必须被初始化，以便它可以准备它的数据成员。然后你的对象初始化它的成员。例如，假设您有一个自定义引用计数接口，需要将“refCnt”初始化为 1。然后您的接口基于该接口。这意味着您的接口的分配大小是引用计数接口的大小+您的特定贡献的大小。（例如，引用计数接口中的 'int refCnt' 和接口中的 'int x' 表示 sizeof(your interface)==8~。）因此，分配只需要发生一次。然后，初始化“super”（在这种情况下为引用计数接口），因此“refCnt”将为 1。

# php - 使用 PHP 自动提交表单

> ID：11131603
> 
> 赞同：-1
> 
> 时间：2012-06-21T04:43:00.387
> 
> 标签：php, forms, submit

我目前有这个：

```
function submit()
{
    document.getElementById("lostpasswordform").click(); // Simulates button click
    document.lostpasswordform.submit(); // Submits the form without the button
}

<body onload="submit()">

    <form name="lostpasswordform" id="lostpasswordform" action="/" method="post">
        <input type="hidden" name="user_login" id="user_login" class="input" value="<?php echo ($user_login); ?>" />
    </form>

</body> 
```

它可以在 PC 上运行，但由于某种原因，javascript 不是从 iPhone 执行的，所以我想知道是否有一种方法可以使用 PHP 而不是 JS 自动提交表单？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:48:59.370

无法在服务器端触发表单提交。您必须使用一种在 DOM 中工作的语言，例如 JavaScript。从您给我们的内容来看，我不明白为什么它*不能*与您现在设置的方式一起使用。

检查您的代码，如果它仍然不起作用，我建议在不同的上下文中提出这个问题；类似于让你的 JavaScript 在 iPhone 上运行而不是完全抛弃它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:51:10.367

正如 esqew 指出的那样，您无法从服务器执行客户端操作。您的选择是重新设计您的函数，使其不需要自动提交（也许您可以使用 GET 变量而不是发布）或为 iPhone 寻找解决方法。

解决方法 - 该`.click()`功能不适用于 iPhone。您可以尝试以前从这个问题中提出的解决方案之一，例如使用[`tap`](https://stackoverflow.com/a/7147069/628267)或这个更大的[触摸处理函数](https://stackoverflow.com/questions/3705937/document-click-not-working-correctly-on-iphone-jquery)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T04:52:10.190

不，PHP 不能这样做，但您的问题是由于 iPhone 处理点击事件的方式。这是[背景信息和解决方法](http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html)。似乎您只需要一个空的 onclick 函数来触发它，所以：

```
// untested
var f = document.getElementById('lostpasswordform');
f.onclick = function () { };
document.lostpasswordform.submit(); 
```

不过，您可能想考虑一下用户的体验——为什么在表单内部单击会自动提交表单？提交按钮有什么问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T05:08:18.160

这是像我这样的 PHP 程序员提供的最小 javascript 答案：

```
/** This is the script that will redraw current screen and submit to bank. */
echo '<script>'."\n" ;
echo 'function serverNotifySelected()'."\n" ;
echo '{'."\n" ;
echo '    window.open(\'\', \'BankPaymentScreen\');'."\n" ;
echo '    document.forms[\'bank_form\'].submit();'."\n" ;
echo '    document.forms[\'server_responder\'].submit();'."\n" ;
echo '}'."\n" ;
echo '</script>'."\n" ;

/** This form will be opened in a new window called BankPaymentScreen. */
echo '<form action="https://www.sandbox.bank.com/cgi-bin/webscr" name="bank_form" method="post" target="BankPaymentScreen">'."\n" ;
echo '<input type="hidden" name="cmd" value="_s-xclick">'."\n" ;
echo '<input type="hidden" name="custom" value="'.$transaction_start.'">'."\n" ;
echo '<input type="hidden" name="hosted_button_id" value="'.$single_product->hosted_button_id.'">'."\n" ;
echo '<table>'."\n" ;
echo '    <tr>'."\n";
echo '        <td><input type="hidden" name="'.$single_product->hide_name_a.'" value="'.$single_product->hide_value_a.'">Local</td>'."\n" ;
echo '    </tr>'."\n" ;
echo '    <tr>'."\n" ;
echo '        <td>'."\n" ;
echo '        <input type="hidden" name="'.$single_product->hide_name_b.'" value="'.$single_product->hide_value_b.'" />'.$single_product->short_desc.' $'.$adj_price.' USD'."\n" ;
echo '        </td>'."\n" ;
echo '    </tr>'."\n" ;
echo '</table>'."\n" ;
echo '<input type="hidden" name="currency_code" value="USD">'."\n" ;
echo '</form>'."\n" ;

/** This form will redraw the current page for approval. */
echo '<form action="ProductApprove.php" name="server_responder" method="post" target="_top">'."\n" ;
echo '<input type="hidden" name="trans" value="'.$transaction_start.'">'."\n" ;
echo '<input type="hidden" name="prod_id" value="'.$this->product_id.'">'."\n" ;
echo '</form>'."\n" ;

/** No form here just an input and a button.  onClick will handle all the forms */
echo '<input type="image" src="https://www.sandbox.bank.com/en_US/i/btn/btn_purchaseimmediateCC_LG.gif" border="0" alt="This Bank - The safer, easier way to pay!" onclick="serverNotifySelected()">'."\n" ;
echo '<img alt="" border="0" src="https://www.sandbox.bank.com/en_US/i/scr/pixel.gif" width="1" height="1">'."\n" ; 
```

这是一个按钮的代码。该按钮将重绘当前页面以从购买到预先批准并打开一个新窗口，为新窗口提供焦点并将新的焦点窗口传递给支付提供商。

这也可以防止 Chrome 阻止新页面获得焦点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T21:43:20.963

你可以做到这一点。

有一个示例如何，甚至您可以使用 cURL 来完成

```
<?php

//create array of data to be posted
$post_data['firstName'] = 'Name';
$post_data['action'] = 'Register';

//traverse array and prepare data for posting (key1=value1)
foreach ( $post_data as $key => $value) {
    $post_items[] = $key . '=' . $value;
}

//create the final string to be posted using implode()
$post_string = implode ('&', $post_items);

//we also need to add a question mark at the beginning of the string
$post_string = '?' . $post_string;

//we are going to need the length of the data string
$data_length = strlen($post_string);

//let's open the connection
$connection = fsockopen('www.domainname.com', 80);

//sending the data
fputs($connection, "POST  /target_url.php  HTTP/1.1\r\n");
fputs($connection, "Host:  www.domainname.com \r\n");
fputs($connection,
    "Content-Type: application/x-www-form-urlencoded\r\n");
fputs($connection, "Content-Length: $data_length\r\n");
fputs($connection, "Connection: close\r\n\r\n");
fputs($connection, $post_string);

//closing the connection
fclose($connection);

?> 
```

# iphone - 无法连接到 iPhone 应用程序的网站

> ID：11131605
> 
> 赞同：6
> 
> 时间：2012-06-21T04:43:29.560
> 
> 标签：iphone, ad-hoc-distribution

我有一个 iOS 企业帐户。我使用 itms-services 协议附加了我的配置文件作为链接以及我的 plist。我在带有 Apache2 服务器的 Ubuntu 10.04 LTS 上运行。我已经将 Mime 类型添加到 /etc/mimes.types。当我关注日志时，我可以看到条款被拉下，没有问题，而 plist 本身可以，但是当我使用我的 iPad 拉下应用程序点击项目服务协议链接时，它似乎没有让我下载它。它一直告诉我它无法连接到 iOS 弹出框内的 URL。

我正在使用此链接（已删除域名）：

```
<a href="itms-services://?action=download-manifest&url=https://server.com/apps/StockCountApp.plist">
            Install Stock Count Application</a> 
```

这是我的清单：

```
?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>items</key>
    <array>
            <dict>
                    <key>assets</key>
                    <array>
                            <dict>
                                    <key>kind</key>
                                    <string>software-package</string>
                                    <key>url</key>
                                    <string>https://server.com/apps/StockCountApp.ipa</string>
                            </dict>
                    </array>
                    <key>metadata</key>
                    <dict>
                            <key>bundle-identifier</key>
                            <string>com.server.StockCountApp</string>
                            <key>bundle-version</key>
                            <string>0.0.1</string>
                            <key>kind</key>
                            <string>software</string>
                            <key>title</key>
                            <string>StockCount</string>
                    </dict>
            </dict>
    </array>
</dict>
</plist> 
```

我可以使用 https 访问 plist，并且我可以使用 plist 中 IPA 的链接也可以毫无问题地获取 IPA，但由于某些奇怪的原因，我似乎无法使用 itms 协议获取 IPA设备。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:11:05.150

您的 plist 和链接是正确的

在此页面上检查您的服务器上的身份验证和 plist 文件请求。因为您浏览器的 cookie 不会将它们发送到设备上的 iTunes。您的 plist 文件必须在没有身份验证的情况下可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T12:39:33.187

正如[@Antaresm](https://stackoverflow.com/questions/11131605/cannot-connect-to-website-for-iphone-app/23219862#comment21826992_15432133)所说，`Content-Type`必须是`application/xml`，而不是`text/xml`像其他人所说的那样！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:16:40.913

这显然为时已晚，无法解决您的问题，但此说明可能会解决其他人的问题。

当我忘记将`<appname>.plist`文件上传到 Web 服务器时，我看到了同样的消息。一旦我上传了`*.plist`文件，“ `Cannot connect to <domain>`”弹出框就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T12:53:36.357

另一个因素（最后一次机会，把我的头发拉出来）是网络服务器只提供标准文件（html、xml、asp、js 等）。我让 Fasthosts 仔细检查，他们修改了配置以允许 .ipa 和 .plist 作为有效的文件扩展名，最后，它可以工作了。

# actionscript-3 - 如何实现像 http://www.bcaa.it/ 这样的字符串效果

> ID：11131610
> 
> 赞同：0
> 
> 时间：2012-06-21T04:43:59.103
> 
> 标签：actionscript-3, flash

我想做一个像这个网站[http://www.bcaa.it/](http://www.bcaa.it/)这样的字符串效果 我可以学习什么样的脚本或教程？

基本上我想实现与网站相同的目标。具有弹跳字符串效果，拖动该项目并移开它附近的其他项目，拖动并且子对象跟随缓动...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:21:38.003

嘿刚刚开始编写代码，需要类似的东西来显示我正在处理的图形。这是我的开始，只有两个按钮，但可以推断/优化这个想法：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       creationComplete="windowedapplication1_creationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            private var optimalDistanceUpdateTimer:Timer;

            private var optimalDistance:Number = 100;

            private var objectUserGrabbed:Button;

            private var delayDenominator:Number = 6;

            protected function button1_mouseDownHandler(event:MouseEvent):void
            {
                objectUserGrabbed = event.target as Button;
                objectUserGrabbed.startDrag();
            }

            protected function button1_mouseUpHandler(event:MouseEvent):void
            {
                objectUserGrabbed.stopDrag();
            }

            protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
            {
                optimalDistanceUpdateTimer = new Timer(33);
                optimalDistanceUpdateTimer.addEventListener(TimerEvent.TIMER, optimalDistanceTickedHandler);
                optimalDistanceUpdateTimer.start();
            }
            private function optimalDistanceTickedHandler(event:TimerEvent):void
            {
                var targetPoint:Point;
                var deltaX:Number;
                var deltaY:Number;

                if(!objectUserGrabbed)
                    return;

                if(objectUserGrabbed == button1)
                {
                    //Basically here I'm playing of Pythagorean theorem for a 45 degree triangle the x component and the y component are the distance of the hypotenuse over Sqrt(2) for different offsets, radially you'd need to adjust this to compute the target point for each object... would do something like var angleForEach:Number = 360/numObjects; then figure out the target point for each of the objects in a loop var angleForThis = angleForEach*index; (in this example only two objects, no loop needed)
                    targetPoint = new Point(objectUserGrabbed.x-optimalDistance/Math.SQRT2, objectUserGrabbed.y-optimalDistance/Math.SQRT2);

                    deltaX = (targetPoint.x-button2.x);
                    deltaY = (targetPoint.y-button2.y);

                    button2.move(button2.x+deltaX/delayDenominator, button2.y+deltaY/delayDenominator);
                }
                else
                {
                    targetPoint = new Point(objectUserGrabbed.x+optimalDistance/Math.SQRT2, objectUserGrabbed.y + optimalDistance/Math.SQRT2);

                    deltaX = (targetPoint.x-button1.x);
                    deltaY = (targetPoint.y-button1.y);

                    button1.move(button1.x+deltaX/delayDenominator, button1.y+deltaY/delayDenominator);
                }
                lineDrawingArea.graphics.clear();
                lineDrawingArea.graphics.lineStyle(1);
                lineDrawingArea.graphics.moveTo(button1.x + button1.width/2,button1.y + button1.height/2);
                lineDrawingArea.graphics.lineTo(button2.x + button2.width/2,button2.y + button2.height/2);
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:Group id="lineDrawingArea"/>
    <s:Button id="button1" label="Item 1" mouseDown="button1_mouseDownHandler(event)" mouseUp="button1_mouseUpHandler(event)" x="0" y="0"/>
    <s:Button id="button2" label="Item 2" mouseDown="button1_mouseDownHandler(event)" mouseUp="button1_mouseUpHandler(event)" x="0" y="0"/>
</s:WindowedApplication> 
```

# php - 如何上传图像然后将其存储在数据库中？

> ID：11131611
> 
> 赞同：1
> 
> 时间：2012-06-21T04:44:10.227
> 
> 标签：php, file-upload

我正在尝试上传图像并将其存储在数据库中。我已经提到了代码，但它对我不起作用。我无法找到错误。看看有没有人能找到bug。代码是：

```
<?php

$name=$_REQUEST['name'];
$email=$_REQUEST['email'];

if($_REQUEST['submit'])
{
    if(($_FILES['file']['type']=="image/jpeg" or $_FILES['file']['type']=="image/pjpeg" or $_FILES['file']['type']=="image/gif") and ($_FILES['file']['size']<300000))
    {
        if($_FILES['file']['error']>0)
        {
            $err=" ERROR :: ".$_FILES['file']['error'];
        }
        else
        {
            echo "Upload :".$_FILES['file']['name']."<br/>";
            echo "Type: ".$_FILES['file']['type']."<br/>";
            echo "Size: ".($_FILES['file']['size']/1024)."Kb<br/>";
            echo "Stored in: ".$_FILES['file']['tmp_name']."<br/>";

            move_uploaded_file($_FILES['file']['tmp_name'],"upload/".$_FILES['file']['name']);
            echo $_FILES['file']['name'];
            echo $_FILES['file']['tmp_name']."qwerty";

            $n=3000;
            $fo=fopen("upload/".$_FILES['file']['name'],"r");
            $fr=fread($fo,$n);

            mysql_query("update user set pic='$fr' where id='$id'");

        }
    }
    else
    {
        $err=" ERROR :: Invalid Image";
    }

    mysql_query("update user set name='$name' where id='$id'");
    mysql_query("update user set email='$email' where id='$id'");

}

$sql="select * from user where id='$id'";
$con=mysql_query($sql);
list($idR,$nameR,$emailR,$pwdR,$dateR,$picR)=mysql_fetch_array($con);

?>

<body>
<form action="" method="post" enctype="multipart/form-data">

    <table>
        <tr>
            <td colspan="2"><?php echo $err; ?></td>
        </tr>
        <tr>
            <td>Name:</td>
            <td><input type="text" name="name" value="<?php echo $nameR ?>" /></td>
        </tr>
        <tr>
            <td>Email:</td>
            <td><input type="text" name="email" value="<?php echo $emailR ?>" /></td>
        </tr>
        <tr>
            <td><label for="file">Upload or Change Pic:</label></td>
            <td><input type="file" name="file" id="file" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" name="submit" value="Save"/></td>
        </tr>

    </table>    
</form>
</body> 
```

我的代码甚至无法上传文件。当我尝试`echo`以下操作时，我发现它们是空的：

```
 echo "Name:".$_FILES['file']['name']."<br/>";
   echo "Type: ".$_FILES['file']['type']."<br/>";
   echo "Size: ".($_FILES['file']['size']/1024)."Kb<br/>";
   echo "Stored in: ".$_FILES['file']['tmp_name']; 
```

以上所有字段均为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:15:37.417

我不知道这是如何工作的，但它没有奏效。我想问题出在我的`HTML`代码中，因为这些`$_FILES`值是无/空的。它不是从表单标签中检索值，请检查我的答案是否不正确以解决问题或纠正如何从科学或计算机中的其他学科解决这个难题，它形成错误或成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:20:53.420

试试这个！

```
<?php

if(isset($_POST['submit']) && $_FILES['file']['size'] > 0)
{
    // Data
    $file_name = $_FILES['file']['name'];
    $tmp_name  = $_FILES['file']['tmp_name'];
    $file_size = $_FILES['file']['size'];
    $file_type = $_FILES['file']['type'];

    // Check
    $type   = array(
        'image/jpeg',
        'image/gif',
        'image/png',
    );
    $size   = 300000;

    if(in_array($file_type, $type) AND $file_size > $size)
    {
        echo 'Ooops! File type must be JPG, GIF or PNG. Or file size too big';
        exit();
    }

    // Is error?
    if ($_FILES["file"]["error"] > 0)
    {
        echo 'Upload Error';
        exit();
    }
    else
    {
        echo 'File Name : '.$file_name.'<br />';
        echo 'File Size : '.($file_size / 1024).' Kb<br />';
        echo 'File Type : '.$file_type;
    }
} 
?>

<form action="" method="post" enctype="multipart/form-data">
<input type="file" name="file" id="file" />
<input type="submit" name="submit" value="Save"/>  
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:53:05.607

如果 $_POST 和 $_FILES 都是空的，那么你已经超过了最大帖子大小 ini ('post_max_size')

php.ini 中有几个设置，包括单个文件的最大值（'upload_max_filesize'）和所有上传的最大值（'post_max_size'）。确保这些 ini 设置设置正确

如果您已经编辑过，请注意语法，在处理 M、K 或 G（不是 KB、MB 或 GB）时会很挑剔，并且不要超过服务器的位大小，即不要超过 40 亿字节32 位服务器。

* * *

$_FILES 为空的其他原因，但不是 $_POST。您没有足够的可用空间来上传文件，或者您没有写入临时目录的权限。检查 /tmp 是否有足够的空间，并且您可以以 apache/php 用户的身份对其进行写入。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-09T15:15:29.230

当我将我的代码移到一个独立的 .php 文件上时，它起作用了。当我需要上传时，我提供了指向编写独立​​上传代码的页面的链接。我不知道这背后的原因，但这就是我解决它的方法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-21T05:05:08.983

嗯....尝试更改此行

```
if($_REQUEST['submit']) 
```

成为

```
if(isset($_REQUEST['submit'])) 
```

我认为，这段代码

```
if(($_FILES['file']['type']=="image/jpeg" or $_FILES['file']['type']=="image/pjpeg" or $_FILES['file']['type']=="image/gif") and ($_FILES['file']['size']<300000)) 
```

可以简化为

```
if(ereg("jpeg|pjpeg|jpg|gif|png", $_FILES['file']['type']) AND $_FILES['file']['size']<300000) 
```

祝你好运...

# javascript - Javascript 数组使用的内存量是多少？

> ID：11131612
> 
> 赞同：1
> 
> 时间：2012-06-21T04:44:34.627
> 
> 标签：javascript, function

JavaScript 数组使用的内存量是多少？例如，我如何计算所需的内存？

```
var arr = [];
for (var y=0; y<10000; ++y){
    arr[y] = [];
    for (var x=0; x<10000; ++x)
        arr[y][x] = []; 
} 
```

# salesforce - 在标签中添加月份

> ID：11131613
> 
> 赞同：0
> 
> 时间：2012-06-21T04:44:37.870
> 
> 标签：salesforce, apex-code

我有一个对象，其中有 2 个字段，例如：A 和 B。我想添加月份。例如：A = 2 月，B = 5 月。所以我想要标签中的 2 月、3 月、4 月、5 月。A 和 B 的值每次都在变化。

谁能帮我解决这个问题。谢谢阿努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:21:29.647

假设您在 VisualForce 页面上使用它，并且您的对象是`SomeObject__c`使用两个 Date 字段调用的`A`，`B`您可以在控制器中使用以下代码。

```
public with sharing class MyController {

    private SomeObject__c obj;

    public string getMonthsLabel(){

        string label = '';
        List<string> months = new List<string>{ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'};

        for(Integer idx = obj.A.month(); idx <= obj.B.month(); idx++)
            label += months[idx-1] + ', ';

        if(label.endsWith(', '))
            label = label.substring(0, label.length()-2);

        return label;

    }

} 
```

然后你需要做的就是在你的页面中有一个 outputLabel`value="{!MonthsLabel}"`

那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:55:37.480

很难说你在追求什么，而且你本身并没有真正问过问题，但我认为你正在寻找选项列表。您可以在每一个中指定可用的值（从 1 月到 12 月）。

# entity-framework - 在实体框架中使用哈希集

> ID：11131617
> 
> 赞同：42
> 
> 时间：2012-06-21T04:45:04.423
> 
> 标签：entity-framework

我想知道在构造函数中使用或不使用“hashset”创建类有什么区别。

使用代码优先方法（4.3）可以创建如下模型：

```
public class Blog
 {
     public int Id { get; set; }
     public string Title { get; set; }
     public string BloggerName { get; set;}
     public virtual ICollection<Post> Posts { get; set; }
  }

public class Post
 {
    public int Id { get; set; }
    public string Title { get; set; }
    public DateTime DateCreated { get; set; }
    public string Content { get; set; }
    public int BlogId { get; set; }
    public ICollection<Comment> Comments { get; set; }
 } 
```

或者可以创建这样的模型：

```
public class Customer
{
    public Customer()
    {
        BrokerageAccounts = new HashSet<BrokerageAccount>();
    }
    public int Id { get; set; }
    public string FirstName { get; set; }
    public ICollection<BrokerageAccount> BrokerageAccounts { get; set; }
}

public class BrokerageAccount
{

    public int Id { get; set; }
    public string AccountNumber { get; set; }
    public int CustomerId { get; set; }

} 
```

哈希集在这里做什么？

我也应该在前两个模型中使用 hashset 吗？

有没有文章显示hashset的应用？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-08-10T05:22:51.100

一般来说，最好使用最能表达您意图的集合。如果你不特别打算使用 HashSet 的独特特性，我不会使用它。

它是无序的，不支持按索引查找。此外，它不像其他集合那样适合顺序读取，而且它允许您多次添加相同的项目而不创建重复项这一事实只有在您有理由使用它时才有用。如果这不是您的意图，它可能会隐藏行为不端的代码并使问题难以隔离。

HashSet 在插入和删除时间非常重要的情况下非常有用，例如在处理数据时。它对于使用相交、除外和联合等操作比较数据集（再次在处理时）也非常有用。在任何其他情况下，缺点通常大于优点。

考虑到在处理博客文章时，与读取相比，插入和删除非常少见，而且您通常希望以特定顺序读取数据，无论如何。这或多或少与 HashSet 擅长的完全相反。非常怀疑您是否打算出于任何原因两次添加相同的帖子，而且我认为您没有理由对这样的课程中的帖子使用基于集合的操作。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-07-30T12:18:07.443

HashSet 没有定义实际获取数据时将生成的集合类型。这将始终是声明的 ICollection 类型。

在构造函数中创建的 HashSet 是为了帮助您在没有获取记录或在关系的多方中不存在记录时避免 NullReferenceExceptions。这绝不是必需的。

例如，根据您的问题，当您尝试使用类似...的关系时

```
var myCollection = Blog.Posts(); 
```

如果没有 Posts 存在，那么`myCollection`将是`null`. 没关系，直到您流利地链接事物并执行类似的操作

```
var myCollectionCount = Blog.Posts.Count(); 
```

这将与`NullReferenceException`.

然而

```
var myCollection = Customer.BrokerageAccounts();
var myCollectionCount = Customer.BrokerageAccounts.Count(); 
```

将导致清空 ICollection 和零计数。没有例外 ：-）

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-15T13:11:37.547

我对实体框架相当陌生，但这是我的理解。集合类型可以是实现的任何类型`ICollection<T>`。在我看来，HashSet 通常是语义正确的集合类型。大多数集合应该只有一个成员的一个实例（没有重复），而 HashSet 最好地表达了这一点。我一直在编写如下所示的课程，到目前为止效果很好。请注意，集合的类型为 as`ISet<T>`而 setter 是私有的。

```
public class Customer
{
    public Customer()
    {
        BrokerageAccounts = new HashSet<BrokerageAccount>();
    }
    public int Id { get; set; }
    public string FirstName { get; set; }
    public ISet<BrokerageAccount> BrokerageAccounts { get; private set; }
} 
```

# python - 谷歌应用引擎文本区域（从表单）到数据存储

> ID：11131623
> 
> 赞同：2
> 
> 时间：2012-06-21T04:45:45.377
> 
> 标签：python, forms, google-app-engine, get, textarea

所以我有一个简单的表单，它需要一些输入（两个文本和两个文本区域）并通过一个将所有四个输入放入数据存储区（谷歌应用引擎）的函数来运行它。问题是当我在其中一个 s 中有相当数量的文本时（意思是 5 个段落，每个约 4/5 个句子，..2,000 个字符）。

我在数据存储中使用 TextProperty() s，（对于较小的输入也是 StringProperty ）。当我只为每个单词输入几个单词时，它会起作用，但当我输入大量文本时，它会发生什么情况：出现一个空白网页而不是我的基本确认页面。没有数据传输到数据存储中。

我的处理程序使用 get()（而不是 POST）

为什么会发生这种情况，我该如何解决？我敢肯定这是一个简单的解决方法，但我对此有些不满。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:25:41.173

虽然理论上没有限制，但实际上所有浏览器都[对查询字符串应用了一些限制，](https://stackoverflow.com/a/3091523/8418)并且由于您使用`GET`的不是`POST`所有输入，而是作为 URL 中的查询参数传递的。

当您从输入表单中获取值时，您应该在处理程序中使用正确`method="POST"`的并使用. 如果您通过[入门](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)，您将找到[处理表格](https://developers.google.com/appengine/docs/python/gettingstartedpython27/handlingforms)部分。`<form>``post()`

# javascript - 了解 Jquery 中的跨域请求

> ID：11131627
> 
> 赞同：0
> 
> 时间：2012-06-21T04:46:17.743
> 
> 标签：javascript, jquery

谁能解释一下jquery如何处理跨域请求？我理解它通过脚本使用 src 属性作为 url 的理论。但我试图用普通的 javascript 测试同样的东西。我需要知道要为发布请求完成的活动顺序。在什么阶段发送数据并构建脚本元素？我厌倦了在不同的论坛上问同样的问题，在那里我看到了解释 CORS 的链接。我需要一个待办事项解决方案。谢谢

PS：对不起，如果我要求太多:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:59:27.727

ajax 请求 URL 设置为动态生成的脚本标记上的 .src 属性，并且`&callback=someFunc`在 someFunc 是本地 javascript 函数的 URL 中添加了一个参数。当服务器接收到 URL 时，它的工作是解析包含返回数据的生成 javascript，然后以数据作为参数调用传入的函数名称。这通常称为[JSONP](http://en.wikipedia.org/wiki/JSONP)。

# ios - AVAudioPlayer 速率

> ID：11131631
> 
> 赞同：6
> 
> 时间：2012-06-21T04:46:31.880
> 
> 标签：ios, avfoundation, avaudioplayer, avplayer, audio-processing

所以我试图在 iOS 5.1.1 中以不同的速率播放声音文件，但我绝对没有运气。到目前为止，我已经尝试设置 AVAudioPlayer 的速率：

```
player = [[AVAudioPlayer alloc] initWithContentsOfURL:referenceURL error:&error];
player.enableRate = YES;
player.rate = 1.5;
player.numberOfLoops = 0;
player.delegate = self;
[player prepareToPlay];
[player play]; 
```

完全没有运气，声音播放，但只是忽略了我给它的速率。我也试过 AVPlayer：

```
avPlayer = [[AVPlayer alloc] initWithURL:referenceURL];
avPlayer.rate = 0.5;
[avPlayer play]; 
```

同样，它会播放，但只是忽略了我设置的速率。我尝试了许多不同的音频文件，但为了这个线程，我从这个目录中选择了 Rooster-mono.wav：http: [//sig.sapp.org/sounds/wave/](http://sig.sapp.org/sounds/wave/)

有人在更改 iOS 5.1.1 上的播放速率方面取得了成功吗？或者有人知道我在这里缺少什么吗？

我这样做是为了稍微改变我的一些样本的音高，我意识到我可以通过使用 RemoteIO 或类似的东西来做到这一点，但这对于我想要实现的目标来说似乎完全是矫枉过正（一个简单的播放速率调整）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T09:59:28.663

这是一些我知道有效的代码，刚刚在我一直在开发的应用程序中重新测试。正如您所提到的，使用`setEnableRate:`并且`setRate:`仅适用于 iOS 5.0 及更高版本。所以我用`respondsToSelector:`在设备上测试设备是否会接受请求：

```
_noticeAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Rooster-mono" ofType:@"wav"]]
                                                      error:nil];;
if ([_noticeAudio respondsToSelector:@selector(setEnableRate:)])
    _noticeAudio.enableRate = YES;
if ([_noticeAudio respondsToSelector:@selector(setRate:)])
    _noticeAudio.rate = 2.0; 
```

在 iOS 5 设备上运行，它成功执行双倍速率。在 iOS 4.3 上运行，它以正常速度播放。

因此，获得正确费率的唯一方法是您的设备上装有 iOS 5。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T10:13:24.383

将代码修改为：

```
avPlayer = [[AVPlayer alloc] initWithURL:referenceURL];

[avPlayer play]; //call play first

avPlayer.rate = 0.5; //then set rate 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-07T15:04:32.227

这就是你的做法。

速率值在 0.1f - 2.0f 之间

```
player = [[AVAudioPlayer alloc]
          initWithContentsOfURL:[NSURL fileURLWithPath:path]
          error:&err];
player.volume = 0.4f;
player.enableRate=YES;
[player prepareToPlay];
[player setNumberOfLoops:0];
player.rate=2.0f;
[player play]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-08T15:21:59.803

**斯威夫特 2.0**

```
let player = AVPlayer(URL: url)
player.play()
player.rate = 0.9 
```

# php - 贝宝 GetVerifiedStatus PHP

> ID：11131632
> 
> 赞同：1
> 
> 时间：2012-06-21T04:46:37.837
> 
> 标签：php

我想知道是否有人可以为我指出一些关于如何使用 PHP 集成 PayPal GetVerifiedStatus 的示例的正确方向？我是 PayPal API 的新手，在任何地方都找不到任何代码示例。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:24:31.327

我不知道这是否是一个好图书馆，但你可以看这里 - [http://www.binpress.com/app/php-paypal-pro-adaptive-api-class/612#description](http://www.binpress.com/app/php-paypal-pro-adaptive-api-class/612#description)。

有视频演示 - [http://www.binpress.com/app/demo/app/612](http://www.binpress.com/app/demo/app/612)

# deployment - 部署播放时不需要哪些文件夹！应用程序？

> ID：11131639
> 
> 赞同：0
> 
> 时间：2012-06-21T04:47:27.077
> 
> 标签：deployment, playframework

我终于做出了一个有生产价值的游戏应用，并使用`play war -o foo`命令来制造一场爆炸战争。但是，它的大小达到 30 MB，并且包含很多文件夹。我在eclipse中开发，所以也有一些eclipse文件夹。下面是我拥有的文件夹列表。谁能帮我处理不必要的文件夹？我已经关注了 app、conf、public 和 lib 文件夹。我的假设正确吗？

```
├── app
│   ├── controllers
│   ├── jobs
│   │   ├── daily
│   │   └── monthly
│   ├── models
│   │   ├── encrypt
│   │   ├── file
│   │   ├── login
│   │   └── mail
│   ├── playground
│   └── views
│       ├── Application
│       └── errors
├── conf
├── eclipse
│   └── classes
│       ├── controllers
│       ├── jobs
│       │   ├── daily
│       │   └── monthly
│       ├── models
│       │   ├── encrypt
│       │   ├── file
│       │   ├── login
│       │   └── mail
│       └── playground
├── lib
├── logs
├── public
│   ├── bootstrap
│   │   ├── css
│   │   ├── img
│   │   ├── js
│   │   │   └── tests
│   │   │       ├── unit
│   │   │       └── vendor
│   │   └── less
│   ├── images
│   ├── javascripts
│   └── stylesheets
├── test
└── tmp
    ├── bytecode
    │   └── DEV
    └── classes
        ├── controllers
        ├── helpers
        ├── jobs
        │   ├── daily
        │   └── monthly
        ├── models
        │   ├── encrypt
        │   ├── file
        │   ├── login
        │   └── mail
        └── playground 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:08:30.100

您还需要删除 tmp 文件夹，尝试在您的项目中使用 play clean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:05:10.410

`app`、和`conf`中的所有文件夹都应保存在您的战争中。也许应该添加`lib``public``precompiled`

# android - 在性能方面哪个更好动态布局或 XML 布局

> ID：11131641
> 
> 赞同：0
> 
> 时间：2012-06-21T04:47:43.407
> 
> 标签：android, android-layout

我正在动态创建视图，如下所示

```
 public class DynamicLayoutActivity extends Activity 
{
        private LinearLayout linear_layout,linear_main;
    private Button b1,b2,b3;
    private LinearLayout.LayoutParams linear_layout_params,button_parameters; 

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        linear_main = new LinearLayout(this);

        linear_layout = new LinearLayout(this);
        linear_layout_params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT);
        linear_layout.setOrientation(LinearLayout.VERTICAL);
        linear_layout.setGravity(android.view.Gravity.CENTER);
        linear_layout.setLayoutParams(linear_layout_params);
        linear_layout.setId(3);

  //      button_parameters = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);

        b1=new Button(this);
        b1.setText("Button1");
        b1.setId(31);
        b1.setGravity(android.view.Gravity.CENTER);
//        b1.setLayoutParams(button_parameters);

        b2=new Button(this);
        b2.setText("Button1");
        b2.setId(32);
        b2.setGravity(android.view.Gravity.CENTER);
//        b2.setLayoutParams(button_parameters);

        b3=new Button(this);
        b3.setText("Button1");
        b3.setId(33);
        b3.setGravity(android.view.Gravity.CENTER);
//        b3.setLayoutParams(button_parameters);

        linear_layout.addView(b1);
        linear_layout.addView(b2);
        linear_layout.addView(b3);

        linear_main.addView(linear_layout);

        setContentView(linear_main);
    }
} 
```

同样，我通过在 xml 文件中声明所有内容来做同样的事情，如下所示

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout> 
```

**假设我在上面提到的线性布局中有 100 个按钮，那么这是最好的方法，并且与内存占用和执行时间相关的性能最好**

如果您支持某个场景，请向我解释您的观点，为什么该场景是最好的。这样我就可以理解**Infalting xml**和**动态创建视图的使用**

提前致谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:00:43.057

我会尽力回答你的问题

如果您在 xml 中定义布局和控件，那么您将它们膨胀成代码，我认为这比手动实例化视图要慢一些。但我认为我们无法区分。

*   如果您使用基于 xml 的布局，您还有以下优势。

**1**它们允许我们支持各种屏幕分辨率和方向（您需要将每个配置文件的 main.xml 文件放在相应的文件夹中，如 ldpi、mdpi、hdpi、xhdpi）

**2**您可以轻松更改布局，而无需接触 Java 代码。

# python - Pandas - 在满足特定标准的情况下聚合分组数据

> ID：11131647
> 
> 赞同：2
> 
> 时间：2012-06-21T04:48:00.880
> 
> 标签：python, pandas

我想通过汇总该投资组合中单个股票持有量的时间序列估值数据来创建股票投资组合估值的时间序列。我遇到的问题是，在某些日期可能没有对给定股票持有量的估值，因此在该日期汇总会产生错误的结果。

我想出的解决方案是排除给定持股不存在估值（实际价格）数据的日期，然后在我拥有完整数据的这些日期汇总。我使用的程序如下：

```
# Get the individual holding valuation data
valuation = get_valuation(portfolio = portfolio, df = True)

# Then next few lines retrieve the dates for which I have complete price data for the
# assets that comprise this portflio
# First get a list of the assets that this portfolio contains (or has contained).
unique_assets = valuation['asset'].unique().tolist()

# Then I get the price data for these assets
ats = get_ats(assets = unique_assets, df = True )[['data_date','close_price']]

# I mark those dates for which I have a 'close_price' for each asset:
ats = ats.groupby('data_date')['close_price'].agg({'data_complete':lambda x: len(x) == len(unique_assets)} ).reset_index()

# And extract the corresponding valid dates.
valid_dates = ats['data_date'][ats['data_complete']]

# Filter the valuation data for those dates for which I have complete data:
valuation = valuation[valuation['data_date'].apply(lambda x: x in valid_dates.values)]

# Group by date, and sum the individual hodling valuations by date, to get the Portfolio valuation
portfolio_valuation = valuation[['data_date','valuation']].groupby('data_date').agg(lambda df: sum(df['valuation'])).reset_index() 
```

我的问题有两个：

1) 上面的方法感觉很复杂，我相信 Pandas 有更好的方法来实现我的解决方案。有什么建议么？

2）我使用的方法并不理想。最好的方法是，对于我们没有估值数据的那些日期（对于给定的持股），我们应该使用该持股的最新估值。因此，假设我正在计算 2012 年 6 月 21 日的投资组合估值，并且在该日期有 GOOG 的估值数据，但只有 2012 年 6 月 20 日的 APPL 估值数据。那么 2012 年 6 月 21 日投资组合的估值应该仍然是总和这两个估值。在 Pandas 中是否有有效的方法来做到这一点？我想避免遍历数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:39:03.110

似乎 resample 和/或 fillna 的某种组合将为您提供您正在寻找的东西（意识到这有点晚了！）。

就像你正在做的那样去获取你的数据。您可以通过一些空白来取回这些东西。看看这个：

```
import pandas as pd
import numpy as np

dates = pd.DatetimeIndex(start='2012-01-01', periods=10, freq='2D')
df = pd.DataFrame(np.random.randn(20).reshape(10,2),index=dates) 
```

所以现在你有这个数据有很多空白——但是你想要这个每日分辨率数据。

做就是了：

```
df.resample('1D') 
```

这将在您的数据框中填充您缺少数据的一堆 NaN。然后，当您对它们进行聚合时，只需使用忽略 NaN 的函数（例如，np.nansum、np.mean）！

关于您所获得数据的确切格式仍然有点不清楚。希望能帮助到你。

# yii - yii 中 ActiveRecord 和 model() 的区别？

> ID：11131649
> 
> 赞同：7
> 
> 时间：2012-06-21T04:48:06.450
> 
> 标签：yii, yii-cmodel, yii-cactiverecord

YII 中的 ActiveRecord 和模型之间有什么关系或区别？

我试图登录`is_object(CActiveRecord::model('Project'));`并期待`false`但它返回了`true`；

由于日志记录表明它是一个对象，我认为它代表表中的一行，但我找不到任何代表列的属性。

另外[http://www.yiiframework.com/doc/api/1.1/CActiveRecord#model-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#model-detail)声明它正在返回`CActiveRecord`class 的实例，但我在该对象中找不到表行的任何值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T05:05:46.960

答案在您的文档链接中，`model()`是一个类级别的方法，它：

> 返回指定 AR 类的**静态模型**。返回的模型是 AR 类的静态实例。它用于调用**类级别的方法**（类似于**静态类方法**。）

假设您这样做：`$model=CActiveRecord::model('Project');`，然后使用它`$model`可以调用 CActiveRecord 的所有类级别方法，例如：

```
$allModels = $model->findAll(); // will give you all the models of Project
$someModel = $model->findByPk('pkValue'); // will give you the row with primary key value = pkValue 
$model->deleteAll(); // will delete all the records of Project
// and so on 
```

编辑：

[论坛中的这篇文章](http://www.yiiframework.com/forum/index.php/topic/14456-class-level-methods-vs-static-methods/page__view__findpost__p__71722)还说：（类级别和静态方法之间的区别）

> 类级方法实际上是静态方法，但具有能够使用**继承**的好处。也就是说，您可以在子类中覆盖类级别方法的操作，而如果您使用静态方法，您将无法覆盖它。.... 所以，一般来说，你应该使用类级别的方法，而不是静态方法，因为它给你带来了继承的好处，尽管它可能感觉有点奇怪。然后使用 $class::model()->method() 调用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:05:13.733

ActiveRecord 是一种模式。一种在关系数据库中存储数据的模式。在 MVC 模式中，模型是数据的一部分。所以，Yii 是一个为模型实现 ActiveRecord 的 MVC 框架。

模型方法是这个

```
public static function model($className=__CLASS__)
{
    if(isset(self::$_models[$className]))
        return self::$_models[$className];
    else
    {
        $model=self::$_models[$className]=new $className(null);
        $model->_md=new CActiveRecordMetaData($model);
        $model->attachBehaviors($model->behaviors());
        return $model;
    }
} 
```

如您所见，返回一个对象

# java - 覆盖图形内容的窗框

> ID：11131654
> 
> 赞同：3
> 
> 时间：2012-06-21T04:48:28.163
> 
> 标签：java, swing, user-interface, jpanel

这是我在这里的第一篇文章，我有一个问题似乎真的很无聊，但这在过去一个小时左右一直困扰着我。

我正在制作一个带有 JPanel 的简单 JFrame，但 Windows 7 边框似乎挡住了我对面板部分的看法。例如，如果我在坐标 0,0 处画一个小正方形，它不会出现，我怀疑它在窗框后面。

我尝试过使用 pack、setsize、setpreferred size、setresizable 和不同的布局，但我无法让它显示前 20 个像素左右！

这就是我所拥有的：

```
public RedSunGame() {
super("Red Sun");

rs = new JPanel(new BorderLayout(), true);
rs.setPreferredSize(new Dimension(WIDTH, HEIGHT));
add(rs, "Center");

setPreferredSize(new Dimension(WIDTH, HEIGHT));
pack();
setResizable(false);
setDefaultCloseOperation(EXIT_ON_CLOSE);
setVisible(true);
} 
```

**编辑：**

感谢您的所有回复，抱歉缺少信息:)

我正在使用我在书中看到的双缓冲策略。gameRender 和paintScreen 处于标准游戏循环中。我的 RedSunGame 类扩展了 JFrame。除了上述之外，您可以要求的所有相关代码：

```
private static final int WIDTH = 500;
private static final int HEIGHT = 500;
private JPanel rs;
private Graphics2D g2d;
private Image dbImage;

private void gameRender() {
//create buffer
if (dbImage == null){
  dbImage = createImage(WIDTH, HEIGHT);
  g2d = (Graphics2D)dbImage.getGraphics();
}
//clear screen
g2d.setColor(Color.white);
g2d.fillRect(0, 0, WIDTH, HEIGHT);

g2d.setColor(Color.blue);
g2d.setFont(font);
g2d.drawString("FPS: " + FPS, 0, HEIGHT);
g2d.fillRect(30, 30, 10, 10);
}

private void paintScreen() {
Graphics g;
try {
  g = getGraphics();
  if ((g != null) && (dbImage != null))
    g.drawImage(dbImage, 0, 0, null);
  Toolkit.getDefaultToolkit().sync();
  g.dispose();
}
catch (Exception e)
{ System.out.println("Graphics context error: " + e);  }
} 
```

使用我当前的设置，它看起来像这样。 [http://i.imgur.com/qaabC.png](http://i.imgur.com/qaabC.png)

如果我有 g2d.fillRect(30, 30, 10, 10)，就会发生这种情况，唯一的变化是坐标 30,30 而不是 0,0。它肯定隐藏在顶部的边界后面。 [http://i.imgur.com/uzfFe.png](http://i.imgur.com/uzfFe.png)

此外，将其设置为 BorderLayout.CENTER 在任何这些情况下似乎都没有区别。

（对不起，它不会让新用户发布图片）

**编辑：** 我想通了。我是直接画到 JFrame 上的。@Guillaume Polet 我明白了为什么你不应该覆盖 JFrames 的paint 方法，因为它绘制到框架而不是应该实际显示内容的面板！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:36:03.953

这是一个示例代码，显示了如何实现您的目标。尝试找出与您的代码的差异以找出问题所在：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class RedSunGame {

    private static final int SQUARE_SIZE = 20;
    private JPanel rs;
    private JFrame frame;

    private void initUI() {
        frame = new JFrame("Red Sun");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        rs = new JPanel(new BorderLayout()) {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.YELLOW);
                g.fillRect(0, 0, SQUARE_SIZE, SQUARE_SIZE);
            }

            @Override
            public Dimension getPreferredSize() {
                Dimension preferredSize = super.getPreferredSize();
                // Let's make sure that we have at least our little square size.
                preferredSize.width = Math.max(preferredSize.width, SQUARE_SIZE);
                preferredSize.height = Math.max(preferredSize.height, SQUARE_SIZE);
                return preferredSize;
            }
        };
        frame.add(rs);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                RedSunGame redSunGame = new RedSunGame();
                redSunGame.initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:30:33.933

验证 WIDTH 和 HEIGHT 是否 > 0。

试试这个：

```
//add(rs, "center");
add(rs, BorderLayout.CENTER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:27:34.863

您可能会得到答案，但对于 java swing 的新手，我建议您应该使用 Net-beans IDE。它以图形方式添加和布置 GUI，您无需编写任何手写代码。这是一个很好的起点，如此处所述：

[http://docs.oracle.com/javase/tutorial/uiswing/learn/index.html](http://docs.oracle.com/javase/tutorial/uiswing/learn/index.html)

# android - 如何在 Android 地图上顺利填充图钉？

> ID：11131655
> 
> 赞同：0
> 
> 时间：2012-06-21T04:48:29.210
> 
> 标签：android, google-maps

我`android`通过调用[This Url在谷歌地图上使用 pin 图像显示地点](http://www.XYZ.com/api/search?access_token=0%7CV1CALGARY%7Ce98984a4c954fa1d78e3be626ad81a1d&area=50.985558,-113.863003,50.631496,-113.423551&max=100)

放大或缩小地图时，此网址会一直刷新。
我正在使用此代码在 As- 的加载中填充地图调用 url上的`doInbackground`pin`onPostExcution``AsyncTask`

```
if(!valueoftotal.equalsIgnoreCase("") && !valueoftotal.equalsIgnoreCase(null))
{
    if(Integer.parseInt(valueoftotal) > 0 && Integer.parseInt(valueoftotal) <= 100)
    {
        OverlayItem oi;
        if(myHandler.getParsedData()!=null)
        {
            arrayList = myHandler.getParsedData();      
        }

        linearbottom2.setClickable(true);
        mapOverlays.clear();
        //OverlayItem overlayItem,overlayItem1;
        overlay.removeAll();

        lineartabbar.setBackgroundResource(R.drawable.mapbar);

        if( arrayList.size()!=0 && arrayList.size()>1 )
        {
            for(int i = 0; i < arrayList.size(); i++)
            {
                String latvalue = arrayList.get(i).getLatitude().toString();
                String lonvalue = arrayList.get(i).getLongitude().toString();
                GeoPoint point = null;

                try
                {
                    point = new GeoPoint((int)(Double.parseDouble(latvalue)*1E6),(int)(Double.parseDouble(lonvalue)*1E6));
                }
                catch (NumberFormatException e) 
                {
                    // TODO: handle exception
                }

                if(point != null)
                {

                    if(arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                    {  
                        oi = overlay.createItem(i);
                        System.out.println("overlayyyyyyyyyyyyy" + overlay + "\toiiiiiiiiii"+oi);
                        if(overlay!=null)
                        {
                            overlay.addItem(oi);
                        }
                     }
                     else if(!arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                     {
                         oi = overlay.createItem(i);
                         if(overlay!=null)
                         {
                             System.out.println("2overlayyyyyyyyyyyyy" + overlay + "\toiiiiiiiiii" + oi);
                             overlay.addItem(oi);
                         }
                     }
                 }
             }
             mapOverlays.add(overlay);
             mapView.invalidate();
         }
         else if( arrayList.size()!=0 && arrayList.size()==1 )
         {
             for(int i = 0; i < arrayList.size(); i++)
             {
                 String latvalue = arrayList.get(i).getLatitude().toString();
                 String lonvalue = arrayList.get(i).getLongitude().toString();
                 GeoPoint point = null;
                 try
                 {
                     point = new GeoPoint((int)(Double.parseDouble(latvalue)*1E6),(int)(Double.parseDouble(lonvalue)*1E6));
                 }
                 catch (NumberFormatException e)
                 {
                     // TODO: handle exception
                 }

                 if(point != null)
                 {
                     if(arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                     {
                         oi = overlay.createItem(i);
                         System.out.println("listing when 1 value is  "+arrayList.get(i).getUnitstotal());
                         overlay.addItem(oi);
                         mc.animateTo(point);
                     }
                     else if(!arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                     {
                         oi = overlay.createItem(i);
                         System.out.println("listing when more value is  "+ arrayList.get(i).getUnitstotal());
                         overlay.addItem(oi);
                         mc.animateTo(point);
                         mc.setCenter(point);
                         mc.setZoom(18);
                     }
                 }
             }

             mapOverlays.add(overlay);
             mapView.invalidate();
             MapController mcontrller =mapView.getController(); 
```

但问题是当我立即触摸地图时，它会移除所有引脚并开始加载新位置。我想顺利加载先获取所有位置然后删除。

请任何人帮助我`ASAP`，对不起我的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:52:01.050

```
public class HelloAndroidGpsActivity extends Activity implements OnClickListener, android.content.DialogInterface.OnClickListener 
{
     private EditText editTextShowLocation;
     private Button buttonGetLocation;
     private ProgressBar progress;

     private LocationManager locManager;
     private LocationListener locListener = new MyLocationListener();

     private boolean gps_enabled = false;
     private boolean network_enabled = false;

     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);
          editTextShowLocation = (EditText) findViewById(R.id.editTextShowLocation);
          progress = (ProgressBar) findViewById(R.id.progressBar1);
          progress.setVisibility(View.GONE);
          buttonGetLocation = (Button) findViewById(R.id.buttonGetLocation);
          buttonGetLocation.setOnClickListener(this);
          locManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
     }

     @Override
     public void onClick(View v) {
          progress.setVisibility(View.VISIBLE);
          // exceptions will be thrown if provider is not permitted.
          try {
               gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
          } catch (Exception ex) {

          }
          try {
               network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
          } catch (Exception ex) {

          }

          // don't start listeners if no provider is enabled
          if (!gps_enabled && !network_enabled) {
                AlertDialog.Builder builder = new Builder(this);
                builder.setTitle("Attention!");
                builder.setMessage("Sorry, location is not determined. Please enable location providers");
                builder.setPositiveButton("OK", this);
                builder.setNeutralButton("Cancel", this);
                builder.create().show();
                progress.setVisibility(View.GONE);
          }

          if (gps_enabled) {
                locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
          }
          if (network_enabled) {
                locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
          }
      }

class MyLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            // This needs to stop getting the location data and save the battery power.
            locManager.removeUpdates(locListener); 

            String londitude = "Londitude: " + location.getLongitude();
            String latitude = "Latitude: " + location.getLatitude();
            String altitiude = "Altitiude: " + location.getAltitude();
            String accuracy = "Accuracy: " + location.getAccuracy();
            String time = "Time: " + location.getTime();

            editTextShowLocation.setText(londitude + "\n" + latitude + "\n" + altitiude + "\n" + accuracy + "\n" + time);
            progress.setVisibility(View.GONE);
        } 
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
}

@Override
public void onClick(DialogInterface dialog, int which) {
    if(which == DialogInterface.BUTTON_NEUTRAL){
        editTextShowLocation.setText("Sorry, location is not determined. To fix this please enable location providers");
    }else if (which == DialogInterface.BUTTON_POSITIVE) {
        startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));
    }
}

} 
```

# c# - 如何将 console.OutputGenerated 转换为字符串并打印

> ID：11131659
> 
> 赞同：1
> 
> 时间：2012-06-21T04:48:53.503
> 
> 标签：c#, nunit, stylecop

我正在尝试将console.OutputGenerated 转换为字符串并想要console.writeline("print error")，寻求我如何做到这一点的建议。下面是我的代码

```
public void TestMain()
    {
        string projectPath = @"C:\Documents and Settings\NickyPhun\My Documents\Visual Studio 2010\Projects\MyCustomRules3\MyCustomRules3";
        string filePath = @"C:\Documents and Settings\NickyPhun\My Documents\Visual Studio 2010\Projects\MyCustomRules3\MyCustomRules3\MyCustomRules3.cs";

        StyleCopConsole console = new StyleCopConsole(null, false, null, null, true);

        CodeProject project = new CodeProject(0, projectPath, new Configuration(null));

        console.Core.Environment.AddSourceCode(project, filePath, null);
        console.OutputGenerated += OnOutputGenerated;
        console.ViolationEncountered += OnViolationEncountered;
        console.Start(new[] { project }, true);
        console.OutputGenerated -= OnOutputGenerated;
        console.ViolationEncountered -= OnViolationEncountered;

    }

    public void OnOutputGenerated(object sender, OutputEventArgs e)
    {
        Console.WriteLine(e.Output);

    } 
```

# java - 如何针对 xsd 验证 xml 并获取 *ALL* 错误？

> ID：11131662
> 
> 赞同：38
> 
> 时间：2012-06-21T04:49:05.060
> 
> 标签：java, xml, validation, xsd

我有一个像下面这样的标准代码来针对 xsd 验证 xml，但它在第一个错误时抛出异常并停止。如何验证 xml，但继续处理第一个和下一个错误并在最后得到它们？甚至可能吗？

```
public static void validate(File xml, InputStream xsd) {
    try {
        SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = factory.newSchema(new StreamSource(xsd));
        Validator validator = schema.newValidator();
        StreamSource xmlFile = new StreamSource(xml);
        validator.validate(xmlFile);

    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-21T05:03:38.973

之间`Validator validator = schema.newValidator();`并`StreamSource xmlFile = new StreamSource(xml);`添加此片段：

```
 final List<SAXParseException> exceptions = new LinkedList<SAXParseException>();
  validator.setErrorHandler(new ErrorHandler()
  {
    @Override
    public void warning(SAXParseException exception) throws SAXException
    {
      exceptions.add(exception);
    }

    @Override
    public void fatalError(SAXParseException exception) throws SAXException
    {
      exceptions.add(exception);
    }

    @Override
    public void error(SAXParseException exception) throws SAXException
    {
      exceptions.add(exception);
    }
  }); 
```

这样，在`validate()`您获得完整的异常列表之后，但如果发生一个致命错误，解析就会停止......

编辑：JavaDoc 说：*应用程序必须假定在解析器调用此方法后文档不可用，并且应该继续（如果有的话）只是为了收集额外的错误消息：事实上，**SAX 解析器可以自由停止**调用此方法后**报告任何其他事件。***所以`fatalError()`可能会也可能不会导致解析停止。

# codeigniter - 订阅开始日期为必填项（重复）

> ID：11131663
> 
> 赞同：1
> 
> 时间：2012-06-21T04:49:18.543
> 
> 标签：codeigniter, paypal

我正在尝试在我的网站上进行定期付款。但我在这里遇到了问题。

它正在给出 ack=Fail

```
[TIMESTAMP] => 2012-06-21T04:36:01Z
[CORRELATIONID] => fe0a920b9dee5
[ACK] => Failure
[VERSION] => 65.1
[BUILD] => 3067390
[L_ERRORCODE0] => 11549
[L_SHORTMESSAGE0] => Start Date is required
[L_LONGMESSAGE0] => Subscription start date is required
[L_SEVERITYCODE0] => Error 
```

而我正在传递的重新发生的代码是

```
function DoRecuringPayment($paymentInfo=array()){ 
    /** 
     * Get required parameters from the web form for the request 
     */ 

    $paymentType =urlencode('Sale'); 
     $firstName =urlencode($paymentInfo['Member']['first_name']); 
    $lastName =urlencode($paymentInfo['Member']['last_name']); 
     $creditCardType =urlencode($paymentInfo['CreditCard']['credit_type']); 
     $creditCardNumber = urlencode($paymentInfo['CreditCard']['card_number']); 
     $expDateMonth =urlencode($paymentInfo['CreditCard']['expiration_month']); 
    $padDateMonth = str_pad($expDateMonth, 2, '0', STR_PAD_LEFT); 
     $expDateYear =urlencode($paymentInfo['CreditCard']['expiration_year']); 
     $cvv2Number = urlencode($paymentInfo['CreditCard']['cv_code']); 
    $address1 = urlencode($paymentInfo['Member']['billing_address']); 
     $address2 = urlencode($paymentInfo['Member']['billing_address2']); 
    $country = urlencode($paymentInfo['Member']['billing_country']); 
     $city = urlencode($paymentInfo['Member']['billing_city']); 
     $state =urlencode($paymentInfo['Member']['billing_state']); 
     $zip = urlencode($paymentInfo['Member']['billing_zip']); 

     $bperiod=urlencode( $paymentInfo['Bill']['month']); ;
     $bfrequency=urlencode($paymentInfo['bill']['frequency']);
    $amount = urlencode($paymentInfo['Order']['theTotal']); 
     $currencyCode="USD"; 
     $time22= date('Y-m-d',time());
     $startdate=urlencode(date('Y-m-d',time()));
     $paymentType=urlencode('Sale'); 

    $ip=$_SERVER['REMOTE_ADDR']; 

    /* Construct the request string that will be sent to PayPal. 
       The variable $nvpstr contains all the variables and is a 
       name value pair string with & as a delimiter */ 

      $nvpstr="&AMT=$amount&CREDITCARDTYPE=$creditCardType&ACCT=$creditCardNumber&EXPDATE=".$padDateMonth.$expDateYear."&CVV2=$cvv2Number&FIRSTNAME=$firstName&LASTNAME=$lastName&STREET=$address1&CITY=$city&STATE=$state".
"&ZIP=$zip&COUNTRYCODE=US&CURRENCYCODE=$currencyCode&PROFILESTARTDATE=$startdate&BILLINGPERIOD=$bperiod&BILLINGFREQUENCY=$bfrequency";

    /* Make the API call to PayPal, using API signature. 
       The API response is stored in an associative array called $resArray */ 
    $resArray=$this->hash_call("CreateRecurringPaymentsProfile",$nvpstr); 

    /* Display the API response back to the browser. 
       If the response from PayPal was a success, display the response parameters' 
       If the response was an error, display the errors received using APIError.php. 
       */ 

    return $resArray; 
    //Contains 'TRANSACTIONID,AMT,AVSCODE,CVV2MATCH, Or Error Codes' 
} 
```

我收到错误`Subscription start date is required.`

# android - 如何将android应用程序中的数据库文件发送到服务器

> ID：11131670
> 
> 赞同：0
> 
> 时间：2012-06-21T04:50:12.750
> 
> 标签：android, android-emulator

我使用sqlite在我的eclipse中开发了一个数据库应用程序...我需要将该代码发送到给定IP地址的服务器...可以帮助我将代码添加到我的当前代码中...给定下面的代码

```
public class DatabaseHelper extends SQLiteOpenHelper{
public static final String DATA_BASE="Mydatabase.db";
public static final String TABLE_NAME="Student";
public static final int DATABASE_VERSION=1;
public DatabaseHelper(Context context) {
    super(context, DATA_BASE, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE "+TABLE_NAME+"(NAME TEXT,AGE NUMERIC,ADDRESS TEXT)");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 
```

}

以上是数据库助手代码

以下是主要活动代码

```
public class DbExampleActivity extends Activity implements OnClickListener{
Button submit,select;
AlertDialog di;
private SQLiteDatabase sqLiteDatabase;
private SQLiteStatement sqLiteStatement;
private String name,age,address;
private static final String TABLE_NAME="Student";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    submit=(Button)findViewById(R.id.savebutton);
    select=(Button)findViewById(R.id.detailsbutton);

    DatabaseHelper db=new DatabaseHelper(this);
    sqLiteDatabase=db.getWritableDatabase();
    sqLiteStatement=sqLiteDatabase.compileStatement("insert into "+TABLE_NAME+"(name,age,address)values(?,?,?)");
   submit.setOnClickListener(this);
   select.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.detailsbutton:
        Intent in=new Intent(getApplicationContext(),DisplayActivity.class);
        startActivity(in);

        break;
    case R.id.savebutton:
        name=((EditText)findViewById(R.id.editText1)).getText().toString().trim();
        age=((EditText)findViewById(R.id.editText2)).getText().toString().trim();
        address=((EditText)findViewById(R.id.editText3)).getText().toString().trim();

        sqLiteStatement.bindString(1, name);
        sqLiteStatement.bindString(2, age);
        sqLiteStatement.bindString(3, address);
        sqLiteStatement.executeInsert();

        Toast.makeText(getApplicationContext(), "Data Saved", Toast.LENGTH_LONG).show();
        break;
    default:
        break;
    }

} 
```

}

下面是显示活动代码

```
 public class DisplayActivity extends Activity {

private ArrayList<String> arraylist=new ArrayList<String>();
private SQLiteDatabase MYdatabase;
ListView listView;
Button back;
EditText ed;
String s;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);
    listView=(ListView)findViewById(R.id.listView1);
    ed=(EditText)findViewById(R.id.searcheditText1);

    ed=(EditText)findViewById(R.id.searcheditText1);

        ed.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
                populateListView(s.toString());
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        });

}

protected void populateListView(String s) {
    DatabaseHelper db=new DatabaseHelper(this);
    MYdatabase=db.getWritableDatabase();
    try {   

        Cursor c=MYdatabase.rawQuery("SELECT* FROM Student WHERE NAME='"+s+"'", null);
        if(c!=null)
        {
            if(c.moveToFirst())
            {
                do {
                    String name=c.getString(c.getColumnIndex("NAME"));
                    String age=c.getString(c.getColumnIndex("AGE"));
                    String address=c.getString(c.getColumnIndex("ADDRESS"));
                    arraylist.add("Name :"+name+"\n"+"Age :"+age+"\n"+"Address :"+address+"\n");

                } while (c.moveToNext());
            }
        }

        c.close();
        c.deactivate();

} catch (SQLiteException e) {

    Log.d(getClass().getSimpleName(), "could not create"+"or open the database");

}
finally
{
    if(MYdatabase!=null)
    {
      MYdatabase.close();
    }
}

listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,arraylist));

}

public void Back(View v)
{
    Intent back=new Intent(DisplayActivity.this,DbExampleActivity.class);
    startActivity(back);
}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:30:18.167

我假设你想通过 HTTP 发送它。您可以在 Emmanuel 的帖子中找到一个示例：

[通过 HTTP 发送文件](https://stackoverflow.com/questions/4126625/how-to-send-a-file-in-android-from-mobile-to-server-using-http)

在我看来，这正是您所需要的。

# python - 使用python读取excel表时出错

> ID：11131673
> 
> 赞同：1
> 
> 时间：2012-06-21T04:50:51.197
> 
> 标签：python

```
from xlrd import *

book = open_workbook("File_1.xls")

#sheet = book.sheets()[0]           
#book.sheets() returns a list of sheet objects...     alternatively...
#sheet = book.sheet_by_name("qqqq") #we can pull by name
 sheet = book.sheet_by_index(0)     #or by the index it has in excel's sheet collection

r = sheet.row(0)                    #returns all the CELLS of row 0,
c = sheet.col_values(0)             #returns all the VALUES of row 0,

for i in xrange(sheet.nrows):
print sheet.row_values(5) 
```

我正在读取桌面中的文件，但是当我运行用 python 编写的脚本时，它会出错

```
 Traceback (most recent call last):
  File "C:\Python26\ReadXLS.py", line 6, in <module>
  book = open_workbook("File_1.xls")
  File "C:\Python26\Lib\site-packages\xlrd\__init__.py", line 449, in open_workbook
  ragged_rows=ragged_rows,
 File "C:\Python26\Lib\site-packages\xlrd\__init__.py", line 941, in biff2_8_load
 f = open(filename, open_mode)
  IOError: [Errno 2] No such file or directory: 'File_1.xls' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:53:59.880

您需要`cd Desktop`在运行 Python 之前，因为您的错误消息表明该文件不存在：

```
No such file or directory: 'File_1.xls' 
```

另一个解决方法是将 Python 文件移动到与 Excel 文件相同的文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:00:16.027

验证脚本和文件是否在目录中，或指定 Excel 文件的绝对路径。

另请注意，如果您尝试相对打开一个文件，它将使用初始化 python 解释器的当前工作目录来完成。

如果您需要使用较新的 xlsx 格式，我还推荐`openpyxl` [http://packages.python.org/openpyxl/ 。](http://packages.python.org/openpyxl/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:44:39.613

**如果您遇到路径问题，请尝试在程序中查找当前路径**

```
>>> import os.path
>>> import os
>>> os.curdir
'.'
>>> os.path.abspath(os.curdir)
'/Users/xxxx/temp'
>>> 
```

这就是它在 Unix 上的显示方式。它会在 Windows 上以不同的方式显示。

通过这种方式，您将知道，这是否是您当前文件所在的位置。

代码：

```
from xlrd import *
import os.path
import os
print os.path.abspath(os.curdir)

book = open_workbook("File_1.xls")
#sheet = book.sheets()[0]           
#book.sheets() returns a list of sheet objects...     alternatively...
#sheet = book.sheet_by_name("qqqq") #we can pull by name
 sheet = book.sheet_by_index(0)     #or by the index it has in excel's sheet collection

r = sheet.row(0)                    #returns all the CELLS of row 0,
c = sheet.col_values(0)             #returns all the VALUES of row 0,

for i in xrange(sheet.nrows):
print sheet.row_values(5) 
```

# java - 从在 jetty 中运行的 Web 应用程序访问本地目录图像

> ID：11131675
> 
> 赞同：0
> 
> 时间：2012-06-21T04:51:06.313
> 
> 标签：java, jsp, servlets, jetty

我的 Web 应用程序是使用 jsp/javascripts 编写的。后端Java。已设法实现将图像保存在 web 应用程序外部的代码，因为我不想将图像保存在 webapp/images 文件夹中（因为当服务器关闭和重建应用程序时，我会丢失那些保存的图像）。我想要的是从我的网络应用程序再次访问我保存在本地目录中的那些图像，但我不知道如何访问。如何从码头服务器访问我的本地文件夹，码头服务器在同一台本地机器上运行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:54:15.960

获取`/image`存储和读取文件的路径

```
getServletContext().getRealPath("/images"); 
```

即使您可以从 servlet 的外部位置读取文件

```
 File image = new File("d:\\image\1.jpg");
    response.setBufferSize(DEFAULT_BUFFER_SIZE);
    response.setContentType(contentType);
    response.setHeader("Content-Length", String.valueOf(image.length()));
    response.setHeader("Content-Disposition", "inline; filename=\"" + image.getName() + "\"");

    BufferedInputStream input = null;
    BufferedOutputStream output = null;

    try {
        // Open streams.
        input = new BufferedInputStream(new FileInputStream(image), DEFAULT_BUFFER_SIZE);
        output = new BufferedOutputStream(response.getOutputStream(), DEFAULT_BUFFER_SIZE);

        // Write file contents to response.
        byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
    } finally {
        // Gently close streams.
        close(output);
        close(input);
    } 
```

**另见**

*   [图像小服务程序](http://balusc.blogspot.in/2007/04/imageservlet.html)

# c# - 如何编组指向结构数组指针的指针？

> ID：11131676
> 
> 赞同：10
> 
> 时间：2012-06-21T04:51:06.963
> 
> 标签：c#, .net, interop, pinvoke, marshalling

我的 C 声明如下：

```
int myData(uint myHandle, tchar *dataName, long *Time, uint *maxData, DATASTRUCT **data);

typedef struct {
  byte Rel;
  __int64 Time;
  char Validated;
  unsigned char Data[1];
} DATASTRUCT ; 
```

我的 C# 声明如下：

```
[DllImport("myData.dll", EntryPoint = "myData")]
public static extern int myData(uint myHandle, [MarshalAs(UnmanagedType.LPTStr)] string dataName, out long Time, out uint maxData, ref DATASTRUCT[] data);

[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct DATASTRUCT
{
    public sbyte Rel;
    public long Time;
    public byte Validated;
    public double Data;
} 
```

然后我按如下方式调用托管函数：

```
string dataToShow = "description";
long Time;
uint maxData; // How many structs will be returned, i.e. how much data is available
uint myHandle = 1;

DATASTRUCT[] dataInformation = new DATASTRUCT[3]; // doesn't matter what I specify as the array size?

myData(myHandle, dataToShow, out Time, out maxData, ref dataInformation); 
```

执行后，即使有 3 个结构要返回，上述函数也将成功返回只有一个结构。为什么会这样？

附加信息; 我尝试通过以下方式将指针传递给结构数组的指针：

```
- ref DATASTRUCT[] data; // Works but only returns one struct
- [Out, MarshalAs(UnmanagedType.LPArray)] DATASTRUCT[] data; // returns the number of defined structs with garbage 
```

据我了解，我可能需要使用 进行一些手动编组`IntPtr`，但是我不知道如何实现这一点，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T04:35:38.713

好的，看起来好像您的本机库进行了分配，所以您真正需要做的就是提供一个指针，您可以通过该指针访问分配的数据。

将您的 API 定义更改为（注意，我将 maxData 参数更改为 uint，long 在 .NET 中为 64 位，在本机中为 32 位。

```
[DllImportAttribute("myData.dll", EntryPoint = "myData")]
public static extern int myData(uint myHandle, [MarshalAs(UnmanagedType.LPTStr)] string dataName, out uint Time, out uint maxData, out IntPtr pData); 
```

在我的脑海中，我不太记得你是否需要 out 关键字作为最终参数，但我认为是的。

然后，调用 myData：

```
uint nAllocs = 0, time = 0;
IntPtr pAllocs = IntPtr.Zero;
myData(1, "description", out time, out nAllocs, out pAllocs); 
```

现在，pAllocs 应该指向非托管内存，将它们编组到托管内存中并不太难：

```
[StructLayoutAttribute(LayoutKind.Sequential, Pack = 1)]
public struct DATASTRUCT
{
    public byte Rel;
    public long Time;
    public byte Validated;
    public IntPtr Data; //pointer to unmanaged string.
}

int szStruct = Marshal.SizeOf(typeof(DATASTRUCT));
DATASTRUCT[] localStructs = new DATASTRUCT[nAllocs];
for(uint i = 0; i < nallocs; i++)
    localStructs[i] = (DATASTRUCT)Marshal.PtrToStructure(new IntPtr(pAllocs.ToInt32() + (szStruct * i)), typeof(DATASTRUCT)); 
```

现在你应该有一个本地结构数组。

**需要注意的一点** 您可能需要将项目设置为编译为 x86，以将 IntPtr 的大小标准化为 4 字节 (DWORD) 而不是 AnyCPU 的默认 8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:52:40.263

指向指针的指针可以在您的 dllimport 声明中表示为 ref IntPtr 数据，因此您的声明将变为：

```
[DllImportAttribute("myData.dll", EntryPoint = "myData")]
public static extern int myData(uint myHandle, [MarshalAs(UnmanagedType.LPTStr)] string dataName, out long Time, out uint maxData, ref IntPtr data); 
```

（顺便说一句，我认为 C 中的 long 仅相当于 C# 中的 int。C# 中的 Long 是 Int64，在 C 中将是 long long）

可以使用 GCHandle 类将您的 DATASTRUCT[] 编组到 IntPtr

```
DATASTRUCT [] dataInformation = new DATASTRUCT[3];
GCHandle gch = GCHandle.Alloc(dataInformation , GCHandleType.Pinned);
IntPtr ptr = gch.AddrOfPinnedObject();
myData(myHandle, dataToShow, out Time, out maxData, ref ptr);
//It's absolutely essential you do this next bit so the object can be garbage collected again, 
//but it should only be done once the unmanaged code is definitely done with the reference.    
gch.Free(); 
```

使用 Marshal 类和它的 StructureToPtr 或 Copy 方法也是一种选择，但为了证明这个概念，至少 GCHandle 应该可以解决问题，它对于非托管代码执行长时间运行操作的场景并不理想，因为你'已经将这个对象固定在适当的位置，GC 不能移动它，直到你释放它。

# mysql - sql查询给出奇怪的结果

> ID：11131683
> 
> 赞同：2
> 
> 时间：2012-06-21T04:52:17.013
> 
> 标签：mysql, database

为什么这个查询会给出奇怪的结果..

```
SELECT max(greatest(home_team_total,away_team_total)) AS max_team_score, id 
FROM `match`
WHERE id IN (1,2,3,4,5) 
```

尽管

```
SELECT greatest(home_team_total,away_team_total) AS max_team_score, id 
FROM `match`
WHERE id IN (1,2,3,4,5)
ORDER BY max_team_score DESC
LIMIT 1 
```

给出正确的结果..

**最大值仅在两种情况下都是正确的，但匹配的 id 在第一种情况下是错误的..**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:02:43.000

这是因为您`id`在 SELECT 子句中包含该字段。你要哪个id？我知道您可能想要与最大行关联的一个，但可能有多个，如果您也返回`min(greatest(home_team_total,away_team_total))`怎么办？

第二个查询是您想要解决此问题的查询。

*编辑使其更清晰：*

您的查询相当于：

```
SELECT max(greatest(home_team_total,away_team_total)) AS max_team_score, ANY(id)
FROM `match`
WHERE id IN (1,2,3,4,5) 
```

看看[http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)

它说：*“服务器可以自由地从每个组中选择任何值，因此除非它们相同，否则选择的值是不确定的。”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:12:20.963

如果您确实希望第一个查询起作用，则必须将其更改为如下所示：

选择最好的（home_team_total,away_team_total）作为 max_team_score，id FROM `match` WHERE best(home_team_total,away_team_total) = ( SELECT max(greatest(home_team_total,away_team_total)) FROM `match` )

请注意，结果中可以有不止一行，所以我更喜欢这个解决方案而不是“LIMIT 1”替代方案。

# iphone - 关于@property 和@synthesize

> ID：11131687
> 
> 赞同：-1
> 
> 时间：2012-06-21T04:53:23.140
> 
> 标签：iphone, ios

> **可能重复：**
> [@property @synthesize](https://stackoverflow.com/questions/2032826/property-synthesize)

嗨，我在创建后发现了很多应用程序，`@property`我们也必须声明`@synthsize`，但我想知道两者之间的区别

```
NSArray *_failedBankInfos;

@property (nonatomic, retain) NSArray *failedBankInfos;
@synthesize failedBankInfos = _failedBankInfos; 
```

和

```
@property (nonatomic, retain) NSArray *_failedBankInfos;
@synthesize _failedBankInfos; 
```

谁能解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:11:37.343

`@synthesize`将使用 iVar 的声明映射属性，即创建 getter 和 setter 方法，而无需开发人员显式地实现访问器方法和其中的内存管理（根据`@property`例如：`retain, copy`.）中的参数。因此，当我们使用`*_iVar`（根据命名约定应该是私有 iVar）并且我们希望访问器方法看起来像没有“ `_`”的访问器方法时，例如：`[aClass getIVar]`而不是`[aClass get_iVar]`将`_iVar`带有 the`@synthesize iVar=_iVar`的`@property(retain/copy/assign,atomic/nonatomic) NSObject *iVar;`

[PS：另请参阅Ray's的](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)iOS> = 5.0中的自动引用计数

# php - 用于特定文件名的 php 随机图像脚本

> ID：11131695
> 
> 赞同：0
> 
> 时间：2012-06-21T04:54:32.923
> 
> 标签：php, image, random

我正在使用以下 php 脚本在我的网站上显示随机图像，它工作得很好，除了它会抓取我不希望它抓取的图像，所以我想在脚本中添加一个检查，以便它只会抓取如果图像以字母“TN-”开头，但我不是 php 编码器，所以我想我会在这里向专家寻求帮助。

```
<?php

    // files to search for
    $extList = array();
        $extList['gif'] = 'image/gif';
        $extList['jpg'] = 'image/jpeg';
        $extList['jpeg'] = 'image/jpeg';
        $extList['png'] = 'image/png';

    // set to specific image if needed
    // null will result in a random image
    $img = null;

    // path to the directory you want to scan
    $directory = './';
    if (substr($directory,-1) != '/') {
        $directory = $directory.'/';
    }

    // if img is set, show it
    if (isset($_GET['img'])) {
        $imageInfo = pathinfo($_GET['img']);
        if (
            isset( $extList[ strtolower( $imageInfo['extension'] ) ] ) &&
            file_exists( $directory.$imageInfo['basename'] )
        ) {
            $img = $directory.$imageInfo['basename'];
        }
    } 
    // if img isnt set, grab a random
    else {
        //cycle through directory and subfolders
        $it = new RecursiveDirectoryIterator("$directory");
        foreach(new RecursiveIteratorIterator($it) as $file)
        {
            $file_info = pathinfo($file);
            if (
                isset( $extList[ strtolower( $file_info['extension'] ) ] )
            ) {
                $items[] = $file;
            }
        }
        sort($items);
        // get the random image
        if (count($items) > 0) {
            $imageNumber = time() % count($items);
            $img = $directory.$items[$imageNumber];
        }
    }

    // if img isnt null, display it
    if ($img!=null) {
        $imageInfo = pathinfo($img);
        $contentType = 'Content-type: '.$extList[ $imageInfo['extension'] ];
        header ($contentType);
        readfile($img);
    } 
    // else, try to create one or give error
    else {
        if ( function_exists('imagecreate') ) {
            header ("Content-type: image/png");
            $im = @imagecreate (100, 100)
                or die ("Cannot initialize new GD image stream");
            $background_color = imagecolorallocate ($im, 255, 255, 255);
            $text_color = imagecolorallocate ($im, 0,0,0);
            imagestring ($im, 2, 5, 5,  "IMAGE ERROR", $text_color);
            imagepng ($im);
            imagedestroy($im);
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:20:12.833

您可以从脚本的第 32 行开始在块中添加检查：

```
 //cycle through directory and subfolders
    $it = new RecursiveDirectoryIterator("$directory");
    foreach(new RecursiveIteratorIterator($it) as $file)
    {
        $file_info = pathinfo($file);
        if (
            isset( $extList[ strtolower( $file_info['extension'] ) ] ) &&
            strpos( $file_info['basename'], 'TN-') === 0
        ) {
            $items[] = $file;
        }
    } 
```

# snmp - 如何使用 mib2c 命令？

> ID：11131696
> 
> 赞同：2
> 
> 时间：2012-06-21T04:54:38.003
> 
> 标签：snmp, net-snmp, mib

实际上，我正在尝试通过给定 sysSwYear 作为 MIBNODE 生成 .h 和 .c 文件，并且我正在使用以下命令：

```
mib2c -c mib2c.scalar.conf sysSwYear 
```

但它会产生以下错误：

> 您一开始没有给 mib2c 一个有效的 OID。IE，我找不到有关 mib 节点“sysSwYear.0”的任何信息。这可能是因为您提供了不正确的节点，或者您尝试从中生成代码的 MIB 未加载。要确保您的 mib 已加载，请使用以下示例运行 mib2c：
> 
> ```
>  env MIBS="+MY-PERSONAL-MIB" mib2c -c mib2c.scalar.conf sysSwYear.0 
> ```
> 
> 您可能希望从阅读 MIB 加载教程开始：
> 
> [http://www.net-snmp.org/tutorial-5/commands/mib-options.html](http://www.net-snmp.org/tutorial-5/commands/mib-options.html)
> 
> 并确保您可以获得 snmptranslate 以显示有关您的 MIB 节点的信息。一旦 snmptranslate 工作，然后回来并再次尝试 mib2c。

我已经完成了所需的一切，例如为 MIB 设置环境变量并在 /usr/share/snmp/mibs 中定义一个私有 MIB 文件……但仍然没有成功。该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:37:41.897

您需要完全按照它所说的去做：首先将 MIB 加载到解析器中。从使用开始，`snmptranslate`以确保您可以加载和解析 MIB：

```
# export MIBS="+NAME-OF-YOUR-MIB"
# snmptranslate -IR sysSwYear 
```

如果这不起作用，那么您的 MIB 没有被找到或加载，因为它有错误（或两者都有）。如果是这样，请使用该选项运行 snmptranslate，`-Dparse`它会为您提供太多关于它正在做什么的信息，但如果您阅读全部内容，它会让您知道问题出在哪里。

一旦 snmptranslate 像上面那样工作，那么 mib2c 应该可以正常工作（假设您保留 MIBS 环境变量集）。

[注意：我`export`假设您使用的是基于 sh 的 shell；如果您使用的是基于 csh 的 shell，请改为使用`setenv`并且没有符号]`=`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-11T20:36:19.417

如果您在 Linux 上，/var/lib/net-snmp/mib_indexes 的默认权限是 0700，这会导致普通用户出现有趣的错误。

解决方法是

```
linux ~ $ mkdir -p ~/.snmp/persist
linux ~ $ echo "persistentDir ~/.snmp/persist" >> ~/.snmp/snmp.conf 
```

如果命令适用于超级用户但不适用于普通用户，请尝试此操作。请注意，接受的答案是正确的，但没有解决作为普通用户使用这些命令的问题，如“#”所示。

我发现按如下方式发出命令更直观：

```
mib2c -c mib2c.scalar.conf MY-PERSONAL-MIB::sysSwYear.0 
```

mib 必须位于以下命令输出中列出的目录之一中：

```
linux ~ $ net-snmp-config --default-mibdirs 
```

# c - GCC 不按预期在 Ubuntu 中编译 C 代码

> ID：11131698
> 
> 赞同：1
> 
> 时间：2012-06-21T04:55:04.703
> 
> 标签：c, gcc, ubuntu

今天早上在我的 CS 实验室，我正在编译和执行一些 C 代码。代码如下：

```
#include <stdio.h>
#define SIZE 3

int main()
{
float x[SIZE];
float *fp;
int i;

for(i=0; i<SIZE; i++)
//{
    x[i] = 0.5*(float)i;
//}

for(i-0; i<SIZE; i++)
//{ 
    printf(" %d %f \n", i, x[i]);

//}

fp=x;

for(i=0; i<SIZE; i++)
//{
    printf(" %d %f \n", i, *(fp+i));
//}  
} 
```

这是我在 Ubuntu 终端中用来编译的命令：

> gcc -o 程序 program.c

这是我用来执行的命令

> 。/程序

这是我遇到的结果：

> 0 0.50000
> 
> 1 1.50000
> 
> 2 2.50000

这是我在同一个实验室的其他计算机上预期和发现的结果。

> 0 0.50000
> 
> 1 1.50000
> 
> 2 2.50000
> 
> 0 0.50000
> 
> 1 1.50000
> 
> 2 2.50000

**免责声明：**我仔细检查并三重检查了我的代码与其他计算机中的代码完全一致。

显然，这里的编译器有问题。谁能告诉我有什么问题？以及如何解决？

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T05:02:21.147

你的问题是：

```
for(i-0; i<SIZE; i++)
   ^^^^^ 
```

这使得 for 语句没有效果，因此`printf`下面的语句没有输出
如果你**[用严格的警告编译它，](http://ideone.com/TzWVN)**编译器会告诉你。

**输出：**

> cc1：警告被视为错误
> prog.c：在函数'main'中：
> prog.c:15：错误：声明无效

一旦你修正了明显的错字，所有**[的编译器都会生成输出两次](http://ideone.com/RjtJ2)**。

# sql - 在具有条件的特定列处触发

> ID：11131701
> 
> 赞同：0
> 
> 时间：2012-06-21T04:55:27.877
> 
> 标签：sql, sql-server, sql-server-2005

我想在更新时检查一个列值。如果它的匹配插入另一个表。我的表：![第一表](../Images/3575a1f7bb70fcb8621bfaf72eed1348.png)

![第二表](../Images/16da69e63a1eec3ef385794e1e79e067.png)

我的触发器：

```
CREATE TRIGGER tr_test
ON test1
FOR UPDATE
AS
    SET nocount ON

    IF ( Update(sname) )
      DECLARE @Name NVARCHAR

    DECLARE @id INT

    SET @id=@@IDENTITY 
    SET @Name=(SELECT sname
               FROM   test1
               WHERE  id = @id)

    IF( @Name = 'Paras' )
      BEGIN
          INSERT INTO test2
                      (loginfo)
          VALUES     ('success')
      END 
```

我的更新查询是：

```
update Test1 set Sname='Paras' where ID=1 
```

当我运行此更新查询时，什么都没有发生。`Test2`表是空的。我认为问题是 `@@IDENTITY`但不确定。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:03:29.943

试试这个：

```
CREATE TRIGGER tr_test
ON test1
FOR UPDATE
AS
    SET nocount ON

    IF ( Update(sname) )
      DECLARE @Name NVARCHAR

    DECLARE @id INT

    SET @id=(select id from inserted) 
    SET @Name=(SELECT sname
               FROM   inserted
               WHERE  id = @id)

    IF( @Name = 'Paras' )
      BEGIN
          INSERT INTO test2
                      (loginfo)
          VALUES     ('success')
      END 
```

但最好这样做，一次更新可以更新很多行，如果 UPDATE 匹配很多行，上面会失败，使用 EXISTS：

```
CREATE TRIGGER tr_test
ON test1
FOR UPDATE
AS
    SET nocount ON

    IF( EXISTS(select * From inserted where sname = 'Paras' ) )
      BEGIN
          INSERT INTO test2
                      (loginfo)
          VALUES     ('success')
      END 
```

`inserted`table 是 UPDATE 的新值所在的`deleted`表的名称，table 是 UPDATE 的旧值所在的表的名称

# javascript - 我可以用 CSS 画出命运之轮之类的东西吗？

> ID：11131706
> 
> 赞同：15
> 
> 时间：2012-06-21T04:55:45.453
> 
> 标签：javascript, jquery, animation, css, css-transitions

我希望只使用 CSS 和 jQuery 来绘制命运之轮。我不想使用任何图像。

另外，我希望圆圈中至少有**8 个段**，并在每个段中正确地垂直对齐每个文本单词。这是一张照片来说明：

![在此处输入图像描述](../Images/6862cf79d2a297edabefa3ac1398baef.png)

一旦我有了这个工作，我就可以使用`CSS3 rotate`财产。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T08:51:23.773

这是一个使用 Canvas 在 HTML5 中完成的**纺车演示：**[**链接**](https://web.archive.org/web/20130216051045/http://www.dougtesting.net/winwheel/index.html) ![在此处输入图像描述](../Images/20b7d573a06e8dd8d85450659aa0553e.png)

直接下载到项目演示文件：[**ZIP**](https://web.archive.org/web/20130216051045/http://www.dougtesting.net/winwheel/winwheel_source.zip)

* * *

**编辑：**这是一个不同的教程演示：
[**使用 html5 画布创建轮盘赌**](https://web.archive.org/web/20120208142814/http://www.switchonthecode.com/tutorials/creating-a-roulette-wheel-using-html5-canvas)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T00:39:43.380

这是使用 Canvas的[纺车](https://blog.bramp.net/post/2011/07/27/html5-canvas-lunch-wheel/)的另一个​​示例

![旋转 JavaScript 轮子](../Images/a395f4155ebf69d6f41f13536fd1db3e.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T05:02:16.113

检查此链接-> [http://joelb.me/blog/2011/css-mask-tutorial-rotating-image-gallery/](http://joelb.me/blog/2011/css-mask-tutorial-rotating-image-gallery/)

它包含一个您需要的介绍性教程。也检查`JS 2d Transformation`github 上的库代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T17:15:45.357

我使用 Raphael 创建了一个轮盘赌：http: [//www.guesttime.com/members/ledlogic/roulette/index.html](http://www.guesttime.com/members/ledlogic/roulette/index.html)

它像您一样旋转文本，但您必须处理每个字母的居中。

# html - 在引导程序中将徽标与菜单药丸对齐

> ID：11131708
> 
> 赞同：2
> 
> 时间：2012-06-21T04:55:54.387
> 
> 标签：html, css, layout, twitter-bootstrap

试图让这一切顺利进行，但到目前为止还没有运气，但我的 css 技能仍处于起步阶段。

我正在使用引导程序，并试图在我的页面顶部有一个简单的徽标，导航药丸在同一水平线上，但与徽标的底部对齐。

我已经尝试了所有我能找到的关于将内容对齐到 div 底部的解决方案，但到目前为止还没有运气。

我目前拥有的是这个 jsfiddle：http: [//jsfiddle.net/UaujG/9/](http://jsfiddle.net/UaujG/9/)。非常感谢任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:04:26.617

简单的解决方法是添加：

```
.span6 {
margin-top: 24px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:33:25.000

它与一些 jQuery 完美配合

```
function sizing() {
    var logoheight=$('#logo').height();
    var navpadding=32;
    $('#nav_buttons').css('padding-top', (logoheight-navpadding)+'px');
    if(logoheight<navpadding){
    $('#logo').css('padding-top', (navpadding-logoheight)+'px');    
    }
}
$(document).ready(sizing);
$(window).resize(sizing); 
```

[http://jsfiddle.net/baptme/UaujG/25/](http://jsfiddle.net/baptme/UaujG/25/)

# python - 在 Unison Merge 脚本的最后一行代码中获取 SyntaxError

> ID：11131709
> 
> 赞同：0
> 
> 时间：2012-06-21T04:56:00.953
> 
> 标签：python, syntax-error, unison

嘿，聪明的头脑，

我正在尝试获取这个我发现工作的 Python 脚本，但不知道是我自己还是原始发帖人没有正确获取代码。该脚本应该通过使用 prefs 文件中的命令来启用 Unison 中的自动冲突解决，方法是`merge`获取两个冲突的文件并使用文件名中的日期戳复制其中一个。原来的[姿势在这里](http://tech.groups.yahoo.com/group/unison-users/message/10204)，但没有任何缩进，所以我不得不通过观察弹出的错误来手动完成。我现在似乎无法解决的错误是

```
 File "/bin/unison_merge.py", line 5, in <module>
        PATH, CURRENT1, CURRENT2, NEW = sys.argv[1:]
ValueError: need more than 0 values to unpack 
```

我希望那里的人能够帮助我。

我在下面包含了整个脚本，希望它会有所帮助，并且会注意到任何其他错误:)。

```
#!/usr/bin/env python2.7

import sys, os, datetime, os, filecmp

PATH, CURRENT1, CURRENT2, NEW = sys.argv[1:]

# see http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#merge

promote_remote = False
backup_file_color = "red"

def is_suffix(a, b): return b[-len(a):] == a

def merge(PATH, CURRENT1, CURRENT2, NEW, promote_remote):
# CURRENT1 is copy of local, CURRENT2 is copy of remote

    if filecmp.cmp(CURRENT1, CURRENT2, shallow = False):
# special case -- files have same contents
# not a real conflict. just use local copy, no backup
        print "merge of identical files"
    os.link(CURRENT1, NEW)
    return

# PATH is relative to unison root.
# We need to know absolute path.
# We get it, assuming CURRENT1 is an absolute path
# referring to a file in the same subdirectory as PATH.

assert CURRENT1[0] == '/', "CURRENT1 (%s) is not absolute path" % CURRENT1

PATH_dir, PATH_tail = os.path.split(PATH)
ABS_dir = os.path.dirname(CURRENT1)

assert is_suffix(PATH_dir, ABS_dir), "%s not suffix of %s!" % (PATH_dir, ABS_dir)

ABS_PATH = os.path.join(ABS_dir, PATH_tail)

timestamp = datetime.datetime.now().strftime("%y%m%d_%H%M")
(root, ext) = os.path.splitext(PATH_tail)
for counter in range(100):
    counter = " %d" % counter if counter else ""
    filename = "%s @%s%s%s" % (root, timestamp, counter, ext)
    BACKUP = os.path.join(ABS_dir, filename)
    if not os.path.exists(BACKUP): break
else:
    assert False, "too many existing backups %s" % BACKUP

# promote_remote = False
# seems to retain file props, saving update in next sync?

    print "CONFLICT:", ABS_PATH

if promote_remote:
# resolve conflict by using remote copy, while backing up local to
    BACKUP
    CURRENT1, CURRENT2 = CURRENT2, CURRENT1
    print "CONFLICT remote saved as", filename
else:
    print "CONFLICT local saved as", filename

assert os.path.isfile(CURRENT1)
assert not os.path.exists(NEW)
assert not os.path.exists(BACKUP)

os.link(CURRENT1, BACKUP)
os.link(CURRENT2, NEW)

if backup_file_color and backup_file_color != 'none':
    mac_color_file(BACKUP, backup_file_color)

# note: coloring the tmp file NEW is useless - not propagated
# coloring the current file ABS_PATH causes UNISON to complain

# chmod -w BACKUP
# os.chmod(BACKUP, stat.S_IRUSR)

# just for coloring file in mac Finder
def mac_color_file(file, color):
    if not os.path.exists("/usr/bin/osascript"): return
color_map = {
"none":0,
"orange":1,
"red":2,
"yellow":3,
"blue":4,
"purple":5,
"green":6,
"gray":7,
}
assert color in color_map
assert file[0] == '/', 'absolute path required'
assert os.path.exists(file)
#see http://stackoverflow.com/questions/2435580/tagging-files-with-colors-in-os-x-finder-from-shell-scripts
#osascript -e "tell application \"Finder\" to set label index of alias POSIX
file ("$filename\" to $label")
cmd = '''/usr/bin/osascript -e 'tell application "Finder" to set label index of alias POSIX file "%s" to %d' > /dev/null ''' % (file, color_map[color])
try:
    retcode = subprocess.call(cmd, shell=True)
    if retcode < 0:
        print >>sys.stderr, "mac_color_file child was terminated by signal", retcode
    elif retcode > 0:
        print >>sys.stderr, "mac_color_file child returned", retcode
except OSError, e:
    print >>sys.stderr, "mac_color_file child failed:", e

### main ###

merge(PATH, CURRENT1, CURRENT2, NEW, promote_remote) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:08:00.843

该`try`块没有随附的`except`.

本教程页面阐明了`try..except`结构的使用：http: [//docs.python.org/tutorial/errors.html#handling-exceptions](http://docs.python.org/tutorial/errors.html#handling-exceptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:11:51.607

这只是半心半意的尝试。

缩进真的关闭了，我不确定程序要做什么。

我希望有一个单一的大功能要启动。

要从命令行运行程序，您必须提供命令行参数。

```
python test.py x y c v 
```

在这种情况下：

```
PATH, CURRENT1, CURRENT2, NEW  = 'x', 'y', 'c', 'z' 
```

程序

```
#!/usr/bin/env python2.7

import sys, os, datetime, os, filecmp

print sys.argv
PATH, CURRENT1, CURRENT2, NEW = sys.argv[1:]

# see http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#merge

promote_remote = False
backup_file_color = "red"

def is_suffix(a, b): 
    return b[-len(a):] == a

def merge(PATH, CURRENT1, CURRENT2, NEW, promote_remote):
    # CURRENT1 is copy of local, CURRENT2 is copy of remote

    if filecmp.cmp(CURRENT1, CURRENT2, shallow = False):
    # special case -- files have same contents
    # not a real conflict. just use local copy, no backup
        print "merge of identical files"
        os.link(CURRENT1, NEW)
        return

    # PATH is relative to unison root.
    # We need to know absolute path.
    # We get it, assuming CURRENT1 is an absolute path
    # referring to a file in the same subdirectory as PATH.

    assert CURRENT1[0] == '/', "CURRENT1 (%s) is not absolute path" % CURRENT1

    PATH_dir, PATH_tail = os.path.split(PATH)
    ABS_dir = os.path.dirname(CURRENT1)

    assert is_suffix(PATH_dir, ABS_dir), "%s not suffix of %s!" % (PATH_dir, ABS_dir)

    ABS_PATH = os.path.join(ABS_dir, PATH_tail)

    timestamp = datetime.datetime.now().strftime("%y%m%d_%H%M")
    (root, ext) = os.path.splitext(PATH_tail)
    for counter in range(100):
        counter = " %d" % counter if counter else ""
        filename = "%s @%s%s%s" % (root, timestamp, counter, ext)
        BACKUP = os.path.join(ABS_dir, filename)
        if not os.path.exists(BACKUP): 
            break
        else:
            assert False, "too many existing backups %s" % BACKUP

    # promote_remote = False
    # seems to retain file props, saving update in next sync?

    print "CONFLICT:", ABS_PATH

    if promote_remote:
        # resolve conflict by using remote copy, while backing up local to BACKUP
        CURRENT1, CURRENT2 = CURRENT2, CURRENT1
        print "CONFLICT remote saved as", filename
    else:
        print "CONFLICT local saved as", filename

    assert os.path.isfile(CURRENT1)
    assert not os.path.exists(NEW)
    assert not os.path.exists(BACKUP)

    os.link(CURRENT1, BACKUP)
    os.link(CURRENT2, NEW)

    if backup_file_color and backup_file_color != 'none':
        mac_color_file(BACKUP, backup_file_color)

    # note: coloring the tmp file NEW is useless - not propagated
    # coloring the current file ABS_PATH causes UNISON to complain

    # chmod -w BACKUP
    # os.chmod(BACKUP, stat.S_IRUSR)

    # just for coloring file in mac Finder
    def mac_color_file(file, color):
        if not os.path.exists("/usr/bin/osascript"): 
        return

    color_map = {
    "none":0,
    "orange":1,
    "red":2,
    "yellow":3,
    "blue":4,
    "purple":5,
    "green":6,
    "gray":7,
    }

    assert color in color_map
    assert file[0] == '/', 'absolute path required'
    assert os.path.exists(file)
    #see http://stackoverflow.com/questions/2435580/tagging-files-with-colors-in-os-x-finder-from-shell-scripts
    #osascript -e "tell application \"Finder\" to set label index of alias POSIX
    file ("$filename\" to $label")
    cmd = '''/usr/bin/osascript -e 'tell application "Finder" to set label index of alias POSIX file "%s" to %d' > /dev/null ''' % (file, color_map[color])

    try:
        retcode = subprocess.call(cmd, shell=True)
        if retcode < 0:
            print >>sys.stderr, "mac_color_file child was terminated by signal", retcode
        elif retcode > 0:
            print >>sys.stderr, "mac_color_file child returned", retcode
    except:
        pass

if __file__ == '__main__':
    merge(PATH, CURRENT1, CURRENT2, NEW, promote_remote) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T21:02:37.070

这是当前脚本。请注意，它期望使用一致文档中描述的四个参数来调用。要触发它，请在您的 unison .prf 文件中添加如下所示的行：

```
merge = Name * -> /Users/neal/Bin/daemons/unison_merge.py 'PATH' CURRENT1 CURRENT2 NEW 
```

单引号是（是？）一致地解决错误所必需的。

这是脚本：

```
#!/usr/bin/env python2.7

# see http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#merge

import sys, os, datetime, os, stat, subprocess, filecmp

# log = open("/Users/neal/unison_merge.log", "a")
# sys.stdout = log
# sys.stderr = log

# work around bug in unison adds quotes incorrectly
# something to do with blanks in filenames

def clean(x):
    if len(x) < 3: return x
    if x[0] == "'": x = x[1:]
    if x[-1] == "'": x = x[:-1]
    return x

sys.argv = [clean(x) for x in sys.argv]

try:
    PATH, CURRENT1, CURRENT2, NEW = sys.argv[1:]
except:
    print "usage: ", " ".join("[%s]" % x for x in sys.argv)
    raise

backup_file_color = 'red'  # for mac
promote_remote = False

def is_suffix(a, b): return b[-len(a):] == a

def mac_color_file(file, color):
    if not os.path.exists("/usr/bin/osascript"): return
    color_map = {
        "none":0,
        "orange":1,
        "red":2,
        "yellow":3,
        "blue":4,
        "purple":5,
        "green":6,
        "gray":7,
        }
    assert color in color_map
    assert file[0] == '/', 'absolute path required'
    assert os.path.exists(file)
    #see http://stackoverflow.com/questions/2435580/tagging-files-with-colors-in-os-x-finder-from-shell-scripts
    #osascript -e "tell application \"Finder\" to set label index of alias POSIX file \"$filename\" to $label"
    cmd = '''/usr/bin/osascript -e 'tell application "Finder" to set label index of alias POSIX file "%s" to %d' > /dev/null ''' % (file, color_map[color])
    try:
        retcode = subprocess.call(cmd, shell=True)
        if retcode < 0:
            print >>sys.stderr, "mac_color_file child was terminated by signal", -retcode
        elif retcode > 0:
            print >>sys.stderr, "mac_color_file child returned", retcode
    except OSError, e:
        print >>sys.stderr, "mac_color_file child failed:", e

def merge(PATH, CURRENT1, CURRENT2, NEW, promote_remote):
    # CURRENT1 is copy of local, CURRENT2 is copy of remote

    # PATH is relative to unison root.
    # We need to know absolute path.
    # We get it, assuming CURRENT1 is an absolute path
    # referring to a file in the same subdirectory as PATH.

    if filecmp.cmp(CURRENT1, CURRENT2, shallow = False):
        # special case -- files have same contents
        # not a real conflict.  just use local copy, no backup
        print "merge of identical files"
        os.link(CURRENT1, NEW)
        return

    assert CURRENT1[0] == '/', "CURRENT1 (%s) is not absolute path" % CURRENT1

    PATH_dir, PATH_tail = os.path.split(PATH)
    ABS_dir = os.path.dirname(CURRENT1)

    assert is_suffix(PATH_dir, ABS_dir), "%s not suffix of %s!" % (PATH_dir, ABS_dir)

    ABS_PATH = os.path.join(ABS_dir, PATH_tail)

    timestamp = datetime.datetime.now().strftime("%y%m%d_%H%M")
    (root, ext) = os.path.splitext(PATH_tail)
    for counter in range(100):
        counter = " %d" % counter if counter else ""
        filename = "%s @%s%s%s" % (root, timestamp, counter, ext)
        BACKUP = os.path.join(ABS_dir, filename)
        if not os.path.exists(BACKUP): break
    else:
        assert False, "too many existing backups %s" % BACKUP

    # promote_remote = False
    # seems to retain file props, saving update in next sync?

    print "CONFLICT:", ABS_PATH

    if promote_remote:
        # resolve conflict by using remote copy, while backing up local to BACKUP
        CURRENT1, CURRENT2 = CURRENT2, CURRENT1
        print "CONFLICT remote saved as", filename
    else:
        print "CONFLICT local saved as", filename

    assert os.path.isfile(CURRENT1)
    assert not os.path.exists(NEW)
    assert not os.path.exists(BACKUP)

    os.link(CURRENT1, BACKUP)
    os.link(CURRENT2, NEW)

    if backup_file_color and backup_file_color != 'none':
        mac_color_file(BACKUP, backup_file_color)

    # note: coloring the tmp file NEW is useless - not propagated
    # coloring the current file ABS_PATH causes UNISON to complain

    # chmod -w BACKUP
    # os.chmod(BACKUP, stat.S_IRUSR)

### main ###

try:
    merge(PATH, CURRENT1, CURRENT2, NEW, promote_remote)
except Exception as e:
    print >>sys.stderr, "ERROR in unison_merge.py"
    print >>sys.stderr, "ERROR:", str(e) 
```

# facebook - facebook喜欢/发送按钮主页域没有获取元数据

> ID：11131714
> 
> 赞同：1
> 
> 时间：2012-06-21T04:56:10.317
> 
> 标签：facebook, indexing, facebook-like, facebook-opengraph, facebook-social-plugins

例如，我在主页[http://www.website.com](http://www.website.com)上添加了点赞/发送按钮。但是，当人们喜欢它或发送它时，它不会得到元数据，只有当我用索引页面发布时，就像这样：[http ://www.website.com/index.html](http://www.website.com/index.html)

我该如何解决这个问题？我希望人们共享的链接是 .com 的链接，但要使用索引中的元数据！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:29:13.843

您可以通过在 Linter 中运行 url 来强制 facebook 更新元信息

见[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

linter 将抓取页面的元标记，更新 facebook 并显示与页面上的标记相关的任何错误。

# solr - Solr WildCard EdgeNGramFilterFactory 搜索前后搜索

> ID：11131715
> 
> 赞同：1
> 
> 时间：2012-06-21T04:56:13.500
> 
> 标签：solr

我正在使用 EdgeNGramFilterFactory 实现 solr 通配符搜索。我正在尝试实现前/后搜索。例如搜索“格式系统”和“系统格式”以返回相同的结果。我已经为正面和背面配置了 EdgeNGramFilterFactory，但只有前面的“”格式系统“搜索不起作用，而不是“系统格式”。你能建议我在这里错过了什么或其他什么问题吗？

这是我的配置

```
<fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
            <analyzer>
                <tokenizer class="solr.StandardTokenizerFactory" />
                <filter class="solr.LowerCaseFilterFactory" />
                <filter class="solr.StopFilterFactory" words="stopwords_en.txt" ignoreCase="true" />
                <!-- <filter class="solr.SnowballPorterFilterFactory" language="English" /> -->
                <filter class="EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front" />
                <filter class="EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="back" />
            </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:00:16.607

您提到的示例不太适合，因为它包含术语，并且当您搜索术语时，您不需要任何通配符。如果您想搜索术语部分，例如 sys，则制作 NGrams 看起来是个好主意。我建议你看看你的 solr 分析页面，看看你的分析器链的结果。

`EdgeNGramFilterFactory`配置为`side="front"`，将单词系统作为输入将产生以下术语：

```
sy sys syst syste system 
```

通过这种方式，您可以搜索 sys 或 syste 并获得结果，即使您最初索引的术语是 system。

`EdgeNGramFilterFactory`配置为`side="back"`，将单词系统作为输入将产生以下术语：

```
em tem stem ystem system 
```

这样您就可以搜索 tem 或 ystem 并获得结果。

如果将它们放在同一个链中，则第二个分析器会处理第一个分析器生成的每个术语。您基本上是从每个前面的 NGram 中制作回 NGram，我猜这不是您想要的。

最好先澄清您的要求。如果您仍想前后生成 NGram，您应该在两个不同的字段中执行此操作，然后您可以使用`edismax`解析器搜索这两个字段。

# sql-server - 在sql server中选择最大日期和comprate总和

> ID：11131717
> 
> 赞同：1
> 
> 时间：2012-06-21T04:56:38.283
> 
> 标签：sql-server

我试图从以下查询中获取仅具有 max(id) 的 max(effdt) 的 sum(comprate)，

```
SELECT  id, employee_code, effdt, comprate
FROM         dbo.employees_compensation
WHERE     (employee_code = '000321514')
ORDER BY effdt desc, id desc 
```

上述查询结果如下，

```
id      employee_code   effdt                   comprate
1473433 000321514       2010-09-02 00:00:00.000 46000
1473432 000321514       2010-09-02 00:00:00.000 138000
1453627 000321514       2010-09-02 00:00:00.000 46000
1453626 000321514       2010-09-02 00:00:00.000 138000
1447165 000321514       2010-09-02 00:00:00.000 46000
1447164 000321514       2010-09-02 00:00:00.000 138000
1424948 000321514       2010-09-02 00:00:00.000 46000
1424947 000321514       2010-09-02 00:00:00.000 138000
1405789 000321514       2010-09-02 00:00:00.000 46000
1405788 000321514       2010-09-02 00:00:00.000 138000 
```

我尝试了很多查询，但没有得到预期的结果。我想要的是上面结果中的前两个值，即

```
id    employee_code effdt                   comprate
1473433 000321514   2010-09-02 00:00:00.000 46000
1473432 000321514   2010-09-02 00:00:00.000 138000 
```

然后从上面的结果中得到 sum(comprate) 即，

```
sum(comprate)
184000 
```

你能帮我得到预期的结果吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:09:53.263

[我建议在LIMIT 10..20 in SQL Server 中](https://stackoverflow.com/questions/971964/limit-10-20-in-sqlserver)查找如何限制结果集的大小。然后如何在这里对子查询进行计算[http://www.sqlteam.com/article/aggregating-correlated-sub-queries](http://www.sqlteam.com/article/aggregating-correlated-sub-queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:24:27.490

如果您使用的是 SQL Server **2005**或更高版本（您没有在问题中指定），则可以将 CTE（公用表表达式）与`ROW_NUMBER`函数一起使用：

```
;WITH OrderedData AS
(
   SELECT 
       id, employee_code, effdt, comprate,
       RowNum = ROW_NUMBER() OVER(ORDER BY effdt DESC, id DESC) 
   FROM         
       dbo.employees_compensation
   WHERE     
      employee_code = '000321514'
   FROM dbo.YourTable
)
SELECT 
   SUM(comprate)
FROM  
   OrderedData
WHERE 
   RowNum <= 2 
```

此 CTE 为您的数据排序，`ROW_NUMBER`函数分发从 1 开始并按顺序排列的序号`effdt DESC, id DESC`- 因此最新的行（最新的`effdt`和最高`id`的）得到`RowNum = 1`. 那么我基本上选择前两行并总结它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:37:25.877

下面的呢？

```
SELECT     SUM(comprate) AS ComprateSum
FROM         (SELECT     TOP (2) id, employee_code, effdt, comprate
                       FROM          _Test
                       WHERE      (employee_code = '000321514')
                       ORDER BY effdt DESC, id DESC) AS derivedtbl_1 
```

# html - 在一个版本的 chrome 上，图片垂直拉伸

> ID：11131720
> 
> 赞同：0
> 
> 时间：2012-06-21T04:56:59.630
> 
> 标签：html, css, google-chrome, chromium

在[http://phoenixprints.org/viewpicture.php?pid=258](http://phoenixprints.org/viewpicture.php?pid=258)上，主图片垂直拉伸，看起来很糟糕。我不知道它为什么会发生，而且似乎只在某个时候发生。这不会发生在所有图片上，这让我感到困惑。

我正在运行 18.0.1025.151 (Developer Build 130497 Linux) 建立在 Ubuntu 12.04 上，但它没有发生。

19.0.1084.56 m google chrome 在 windows xp 上呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:21:42.777

您使用以下样式将图像高度设置为 100%：

```
.viewimg img {
  width:  100%;
  height: 100%;
} 
```

似乎没有一个父元素有明确的`height`给定，所以 WebKit（在我的例子中是 Mac/Safari）可能选择了窗口的高度作为计算百分比的参考。

在 Firefox 中，它仅起作用，因为它似乎完全忽略了该`height: 100%`部分。尝试使用其他一些值，您会看到。

我的解决方案是简单地`height: 100%`从 css 中删除，浏览器应该（理论上）通过保持其正常的纵横比来调整图像的大小。

# php - jQuery-file-upload/PHP - 传递附加的文件名

> ID：11131722
> 
> 赞同：1
> 
> 时间：2012-06-21T04:57:15.880
> 
> 标签：php, jquery

我正在使用 BlueImp jQuery-file-upload 将文件上传到服务器。可能具有相同名称的文件的上传帐户附加 (1)、(2)...等。我遇到的问题肯定来自以下代码

```
$('#albumCover.fileupload').bind('fileuploaddone', function(e,data) {

        //Loop through each uploaded file and return object
        $.each(data.files, function (index, file) {
            var filename = file.name;
            $.ajax({ 
                type: "POST",
                url: "../albumUploader/queries/albumCover.php",
                data: {file: filename}
            });
        });
} 
```

无论我选择什么文件名，我都会将其发布到albumCover.php，因此，如果它恰好是现有文件的副本，则数据库将具有重复的“image.jpg”，而上传者正在正确上传附加的文件（1）， (2) 等。

有谁熟悉我如何传递上传者正确标记上传文件的文件名。我应该发送到 albumCover.php，并且 POST 类型是在这种情况下使用的正确类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:23:39.020

希望这对其他人有帮助。这是我找到资源的地方： [https ://github.com/blueimp/jQuery-File-Upload/issues/641](https://github.com/blueimp/jQuery-File-Upload/issues/641)

```
 $('#albumCover.fileupload').bind('fileuploaddone', function(e,data) {
    var filename = data.result[0].name;
            $.ajax({ 
                type: "POST",
                url: "../albumUploader/queries/albumCover.php",
                data: {file: filename}
            });
    } 
```

data.result[0].name 返回修改后的文件名

# c++ - OpenGL 临时缓冲区

> ID：11131723
> 
> 赞同：1
> 
> 时间：2012-06-21T04:57:18.257
> 
> 标签：c++, opengl, freeglut

我需要一个 OpenGL 缓冲区来绘制和检索像素值。我还想将此缓冲区绘制到显示缓冲区上。

我想要一个如何做到这一点的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:57:39.170

[帧缓冲对象 (FBO)](http://www.songho.ca/opengl/gl_fbo.html)可以工作。

# java - 如何在java中使用telnet通过HTTP请求发送xml

> ID：11131727
> 
> 赞同：0
> 
> 时间：2012-06-21T04:58:02.220
> 
> 标签：java, httprequest, telnet, serversocket

我正在尝试通过 Java 中的 telnet 发送 HTML POST 请求，我有一些必须发送的 XML 内容。但是当我尝试在 java 中实现时，我收到“连接重置”错误。但是当我通过 putty(unix) 执行此操作时，我得到了正确的响应 xml。

我使用的 Java 程序：（导致连接重置错误）

```
public class Telnet {public static void main(String[] args) throws Exception {

       Socket socket = new Socket("hostname", 10020);
       String xmled = "<?xml version=1.0?><methodCall><methodName>GetVoucherDetails</methodName><params><param><value><struct><member><name>serialNumber</name><value><string>1038291567</string></value></member><member><name>networkOperatorId</name><value><string>vno2</string></value></member></struct></value></param></params></methodCall>"; 
       System.out.println("Params: " + xmled);

        try {
            Writer out = new OutputStreamWriter(socket.getOutputStream(), "UTF-8");
            out.write("POST /someContext HTTP/1.1\r\n");
            out.write("Accept: text/xml\r\n"); 
            out.write("Connection: close\r\n"); 
            out.write("Content-Length: 489\r\n"); 
            out.write("Content-Type: text/xml\r\n"); 
            out.write("Host: ws2258:10010\r\n"); 
            out.write("User-Agent: ADM/2.4/6.2\r\n"); 
            out.write("Authorization: Basic cHBtc3VzZXI6dnNfJF9wcG11NWVy\r\n");
            out.write(xmled);  
            out.write("\r\n");  
            out.flush();

            InputStream inputstream = socket.getInputStream();
            InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
            BufferedReader bufferedreader = new BufferedReader(inputstreamreader);

            String string = null;
            string = bufferedreader.readLine();
            System.out.println(string);
            while ((string = bufferedreader.readLine()) != null) {
               System.out.println("Received " + string);
            }

       } catch(Exception e) {
           e.printStackTrace();
       } finally {
         socket.close(); 
       }
 } 
```

}

请给我一些建议，我是套接字编程的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:12:35.583

我终于找到了解决这个问题的方法。最后修复很简单。我们必须在一行中发送整个 XML 内容，而不是放入多行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:03:04.513

在您的 Socket 构造函数中，您的意思是放置端口 10020 吗？HTTP 暗示端口 80，除非您的 Web 服务器正在侦听端口 10020。

# python - 使用 boto 处理 SQS 队列

> ID：11131728
> 
> 赞同：9
> 
> 时间：2012-06-21T04:58:09.750
> 
> 标签：python, amazon-web-services, boto, amazon-sqs

我有一个使用 ec2 实例上的 boto 库的 python 脚本，它是自动缩放组的一部分。该脚本处理来自 SQS 队列的消息：

```
import boto
from boto.sqs.message import Message

conn = boto.connect_sqs()
q = conn.create_queue('queue-name')

while (qin.count() > 0):
    m = q.get_messages()
    #do something with the message 
```

使用 while 语句有意义吗？count() 是否实时更新为：

1.  其他实例将消息从队列中取出（或者我要加倍）
2.  新消息被添加到队列中（或者我会错过它们吗？）

**即使队列为空，如何使此脚本不断侦听队列中的新增内容？**

在这个问题[Processing items in SQS queue with a php script](https://stackoverflow.com/questions/8203531/processing-items-in-sqs-queue-with-a-php-script)中提到'sqs ruby​​客户端库有一个方法“poll”，它不断地轮询队列，并在队列中接收到消息时将其传递给一个块'。Python中是否有等价物？

也有人建议可以使用 SNS 来通知脚本消息队列状态，但我看不出如何使用 SNS 配置响应式系统，因为指标警报不够精细。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T13:06:57.350

您不应该依赖队列的计数，因为它仅用于提供近似计数并且不能保证准确。

如果您想永远保持轮询，只需执行以下操作：

```
while 1:
    messages = q.get_messages()
    # do something with messages
    time.sleep(N) 
```

我添加了对 time.sleep 的调用以在循环中引入延迟。N 的值应该至少为一秒，并且可能更多，这取决于您期望新消息出现在队列中的速度。如果您不在循环中放置某种延迟，您可能会开始受到服务的限制。

为避免消息被多次读取，您应该尝试将队列的可见性超时调整为大于处理消息所需的时间，然后确保在处理完成后删除消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-08T19:01:14.657

例子：

```
# wait_time_seconds count only 1 request in x seconds (0 - 20)
# num_messages get x messages in same request (1 - 10)
while 1:
    logger.info("... waiting messages ...")
    messages = queue_in.get_messages(wait_time_seconds=20, num_messages=10)
    for message in messages:
        logger.info('message: %s' % (message,))
        queue_in.delete_message(message) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T18:38:35.203

1.  当您从 SQS 拉出一条消息时，该消息将变得不可见且无法被其他队列查询访问（编辑 - 不可见性可以设置在 0 到 12 小时之间）。
2.  每次添加新消息时，您都必须再次获取队列，但这应该不是问题——这就是队列服务首先存在的原因。

如果您想不断地轮询队列，请尝试所谓的[长轮询](http://aws.amazon.com/about-aws/whats-new/2012/11/08/amazon-sqs-announces-long-polling-and-enhanced-client-support/)- 您可以进行长达 20 秒的连续轮询，当队列被填充时返回。

希望这会有所帮助，否则请查看 boto sqs[文档](http://boto.cloudhackers.com/en/latest/ref/sqs.html)。

# c++ - 使用 RegExp 检测像“#smth”这样的文本（还有更多术语）

> ID：11131729
> 
> 赞同：1
> 
> 时间：2012-06-21T04:58:23.577
> 
> 标签：c++, regex, qt, qregexp

我在正则表达式方面真的很糟糕，所以请帮助我。

我需要在字符串中找到任何像`#text`.

`text`不得包含任何空格字符 ( `\\s`)。它的长度必须至少为 2 个字符 ( `{2,}`)，并且必须包含至少 1 个字母 ( `QChar::isLetter()`)。

**例子：**

*   `#c`, `#1`, `#123456`, `#123 456`,`#123_456`不正确
*   `#cc`, `#text`, `#text123`,`#123text`是正确的

我使用 QRegExp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:45:59.813

```
QRegExp rx("#(\\S+[A-Za-z]\\S*|\\S*[A-Za-z]\\S+)$");
bool result = (rx.indexIn(str) == 0); 
```

rx 要么找到一个非空白后跟一个字母和未指定数量的非空白字符，要么找到一个字母后跟至少一个非空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:27:52.020

我能想到的最短的（*应该可以*工作，但我没有进行广泛的测试）是：

```
QRegExp("^#(?=[0-9]*[A-Za-z])[A-Za-z0-9]{2,}$"); 
```

哪个匹配：

*   `^`字符串的开头
*   `#`文字哈希字符
*   `(?=`然后向前看（但不匹配）
    *   `[0-9]*`零个或多个拉丁数字
    *   `[A-Za-z]`单个大写或小写拉丁字母
*   `)`
*   `[A-Za-z0-9]{2,}`然后匹配至少两个可能是大写或小写拉丁字母或拉丁数字的字符
*   `$`然后找到并消费行尾

从技术上讲，尽管这仍然是错误的。它只匹配拉丁字母和数字。替换一些位会给你：

```
QRegExp("^#(?=\\d*[^\\d\\s])\\w{2,}$"); 
```

这应该适用于非拉丁字母和数字，但这完全未经测试。快速阅读[QRegExp 类参考](http://qt-project.org/doc/qt-4.8/QRegExp.html)，了解每个转义组的说明。

然后在更大的文本字符串中匹配（同样，未经测试）：

```
QRegExp("\b#(?=\\d*[^\\d\\s])\\w{2,}\b"); 
```

一个有用的工具是SDK 附带的[正则表达式示例。](http://doc-snapshot.qt-project.org/4.8/tools-regexp.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:15:54.673

Styne666 给出了正确的正则表达式。

这是一个小 Perl 脚本，它试图将它的第一个参数与这个正则表达式匹配：

```
 #!/usr/bin/env perl
    use strict;
    use warnings;
    my $arg = shift;
    if ($arg =~ m/(#(?=\d*[a-zA-Z])[a-zA-Z\d]{2,})/) {
        print "$1 MATCHES THE PATTERN!\n";
    } else {
        print "NO MATCH\n";
    } 
```

Perl 总是很适合快速测试你的正则表达式。

现在，你的问题有点不同。您想查找文本字符串中的所有子字符串，并且希望在 C++/Qt 中进行。这是我在几分钟内能想到的：

```
 #include <QtCore/QCoreApplication>
    #include <QRegExp>
    #include <iostream>

    using namespace std;

    int main(int argc, char *argv[])
    {
        QString str = argv[1];
        QRegExp rx("[\\s]?(\\#(?=\\d*[a-zA-Z])[a-zA-Z\\d]{2,})\\b");

        int pos = 0;
        while ((pos = rx.indexIn(str, pos)) != -1)
        {
            QString token = rx.cap(1);
            cout << token.toStdString().c_str() << endl;
            pos += rx.matchedLength();
        }

        return 0;
    } 
```

为了进行测试，我向它提供了这样的输入（使长字符串只有一个命令行参数）：

```
 peter@ubuntu01$ qt-regexp "#hjhj  4324   fdsafdsa  #33e #22" 
```

它只匹配两个词：**#hjhj**和**#33e**。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T05:20:22.437

使用这个正则表达式。完全希望您的问题将通过给定的 RE 解决。

```
^([#(a-zA-Z)]+[(a-zA-Z0-9)]+)*(#[0-9]+[(a-zA-Z)]+[(a-zA-Z0-9)]*)*$ 
```

# java - android 监听器中的 Java 层次结构

> ID：11131730
> 
> 赞同：0
> 
> 时间：2012-06-21T04:58:26.413
> 
> 标签：java, android

在我的 android 应用程序中，我想解决以下场景。

```
class Login extends Activity {
   @Override
     public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
         LayoutBuilder  objLB=new LayoutBuilder(this);
         objLB.createSpinner();
    } 

    public void spinnerItemSelectedEvent(AdapterView<?> parent, View view,
        int pos, long id)
    {
    }
}

class LayoutBuilder {
    private Activity objActivity;

    public LayoutBuilder(Activity a) {
        objActivity = a; 
    }

    public void createSpinner() {
        final Spinner objSPItem = new Spinner(objActivity);
        objSPItem.setOnItemSelectedListener(
            new Spinner.OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id)
                {
                    // Do some common activity 
                    objActivity.spinnerItemSelectedEvent(parent,view,pos,id);
                    // calling this for do some additional task
                }
                public void onNothingSelected(AdapterView<?> arg0) {}
        });
        objActivity.spinnerItemSelectedEvent()
    }
} 
```

问题是当我尝试从 createSpinner 方法中的“onItemSelected”列表器访问 spinnerItemSelectedEvent(parent,view,pos,id) 时，出现以下错误。

**Activity 类型的方法 spinnerItemSelectedListener(AdapterView, View, int, long) 未定义**

但是在侦听器之外，对该方法的访问可以正常工作（忽略参数列表）。这背后的原因是什么？是否存在解决此问题的替代方法？请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:07:56.190

android中的Activity代表一个屏幕。您正在创建一个`objActivity`类型的变量，`Activity`而它应该是声明`Login`函数的类型。`spinnerItemSelectedEvent()`更改以下行：

```
private Activity  objActivity; 
```

至

```
private Login  objActivity; 
```

你的代码应该运行。

**编辑**

拥有一个`BaseActivity`并让您的所有其他活动扩展它`BaseActivity`。要使函数`spinnerItemSelectedEvent()`可重用，请在 中声明它，`BaseActivity`您可以按照您现在尝试的方式使用它。

例子：

```
class BaseActivity extends Activity{
    public void spinnerItemSelectedEvent(AdapterView<?> parent, View view,
    int pos, long id){ }
} 

  class Login extends BaseActivity{
   public void spinnerItemSelectedEvent(AdapterView<?> parent, View view,
    int pos, long id){ //Local implementation of the function}
}

class LayoutBuilder {
private BaseActivity objActivity;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:08:28.087

问题是在里面`LayoutBuilder`，你已经声明`objActivity`为`Activity`. 声明它是 a`Login`并且一切都应该没问题：

```
class LayoutBuilder {
    private Login objActivity;

    public LayoutBuilder(Login a) {
        objActivity = a; 
    }
    . . . 
```

编辑

如果您希望您的`LayoutBuilder`类可以被其他活动重用，那么一种方法是通过接口声明。例如：

```
public interface SpinnerSelectionHandler {
    void spinnerItemSelectedEvent(AdapterView<?> parent, View view,
        int pos, long id);
} 
```

然后声明`Login`为：

```
public class Login extends Activity implements SpinnerSelectionHandler {
    . . . 
```

最后，重新定义`LayoutBuilder`以`SpinnerSelectionHandler`在其构造函数中采用 a：

```
class LayoutBuilder {
    private Activity objActivity;
    private SpinnerSelectionHandler selectHandler;

    public LayoutBuilder(Activity a, SpinnerSelectionHandler handler) {
        objActivity = a;
        selectHandler = handler;
    } 
```

然后替换

```
objActivity.spinnerItemSelectedEvent(parent,view,pos,id); 
```

和

```
spinnerHandler.spinnerItemSelectedEvent(parent,view,pos,id); 
```

另外，如果您不需要其他任何参考，您可以从课堂`Activity`上摆脱它。`LayoutBuilder`

# python - Python 全局日志记录

> ID：11131734
> 
> 赞同：9
> 
> 时间：2012-06-21T04:59:40.277
> 
> 标签：python, logging

如何使 Logger 全局化，以便我可以在我制作的每个模块中使用它？

在 moduleA 中是这样的：

```
import logging
import moduleB

log = logging.getLogger('')

result = moduleB.goFigure(5)
log.info('Answer was', result) 
```

在模块B中使用这个：

```
def goFigure(integer):
    if not isinstance(integer, int):
        log.critical('not an integer')
    else:
        return integer + 1 
```

目前，我会收到一个错误，因为 moduleB 不知道是什么`log`。我该如何解决？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-21T05:14:18.593

您可以创建自己的日志记录“模块”来实例化记录器，而不是让所有代码导入它。思考：

记录器.py：

```
import logging
log = logging.getLogger('') 
```

代码A.py：

```
from logger import log
log.info('whatever') 
```

代码B.py：

```
from logger import log
log.warn('some other thing') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-23T13:20:26.890

创建一个全局记录器，可用于

1.  创建一个新的日志文件或
2.  返回全局日志文件的记录器。

**创建一个名为 myLogger.py 的模块：这将具有日志创建代码**

myLogger.py：

```
import logging

def myLog(name, fname = 'myGlobalLog.log'):
'''Debug Log'''                                                                                                 
    logger = logging.getLogger(name);                                                                               
    logger.setLevel(logging.DEBUG)                                                                                  
    fhan = logging.FileHandler(fname)                                                                               
    fhan.setLevel(logging.DEBUG)                                                                                    
    logger.addHandler(fhan)                                                                                         
    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')                           
    fhan.setFormatter(formatter)
    '''comment this to enable requests logger'''                                                                    
    #logger.disabled = True
    return logger 
```

现在在你的模块中创建一个新日志，比如 A.py

```
from myLogger import myLog
log = myLog(__name__, 'newLog.log')
log.debug("In new log file") 
```

因此，您必须在获取记录器时传递文件名。

要在 A.py 中使用全局记录器：

```
from myLogger import myLog
log = myLog(__name__)
log.debug("In myGlobalLog file") 
```

在这种情况下不需要传递文件名，因为我们将使用全局日志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T05:13:40.220

默认情况下，模块只能访问[内置函数](http://docs.python.org/py3k/library/functions.html)和[内置常量](http://docs.python.org/py3k/library/constants.html)。对于所有其他变量、函数……您必须使用关键字`import`.

现在对于您的具体示例，您可以像这样导入`log`- 变量：`moduleA``modulesB`

```
from moduleA import log 
```

以下将是等效的，因为[logging](http://docs.python.org/py3k/library/logging.html?highlight=logging#logging) -module 返回与返回到的 logger 相同的实例`moduleA`：

```
import logging
log = logging.getLogger('') 
```

另一个解决方案是使用[日志](http://docs.python.org/py3k/library/logging.html?highlight=logging#logging)模块的默认记录器，如下所示：

```
logging.info("Hello") 
```

# tortoisesvn - 未能提交 [乌龟大会]

> ID：11131736
> 
> 赞同：1
> 
> 时间：2012-06-21T04:59:54.123
> 
> 标签：tortoisesvn, assembla

尝试将新文件夹提交到 SVN 时收到此消息。

```
Commit failed (details follow):
Server sent unexpected return value (405 Method Not Allowed) in response to MKCOL request for 
```

我该如何克服这个错误。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:26:45.037

当目录已存在于 SVN 存储库中时，通常会发生此错误。

尝试以下操作：

*   将文件夹保存在 SVN 工作副本之外
*   撤消添加
*   对父文件夹进行 SVN 更新；我应该添加的文件夹
*   用在 SVN 外部制作的副本覆盖这个新添加的文件夹

# php - 输入类型=图像的回发是什么

> ID：11131740
> 
> 赞同：0
> 
> 时间：2012-06-21T05:00:14.760
> 
> 标签：php, forms

嗨我有一个类型等于图像的输入，我正在尝试检查回发。如果类型是提交，那么我只检查名称我要检查什么图像？

```
<input type="image" src="somehting.jpg" alt="Buy Now" title=" Buy Now " id="addPartBtn">

else if($_POST['?']{ 
```

我在代码中放了一个问号，我不确定要检查什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:02:54.727

您还可以为输入类型图像命名。

```
<input type="image" name="iamge" src="somehting.jpg" alt="Buy Now" title=" Buy Now " id="addPartBtn"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:44:27.537

试试这个，它有效

```
<input type="image" name="iamge" src="somehting.jpg" alt="Buy Now" title=" Buy Now "          id="addPartBtn">

if(isset($_POST["iamge_x"]) && isset($_POST["iamge_y"]))
{
// then write your code
} 
```

# emacs - 如何同步运行magit

> ID：11131749
> 
> 赞同：2
> 
> 时间：2012-06-21T05:00:57.167
> 
> 标签：emacs, elisp, magit

```
(let ((default-directory "/home/vision/"))
  (magit-pull)
  (magit-fetch "upstream")
  (magit-merge "upstream/master")
  (magit-push)) 
```

我越来越：

```
Running git fetch upstream
Git is already running 
```

如何等待获取完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T05:39:35.180

Magit旨在作为 git 的交互式前端，因此`magit-fetch`并非真正打算从您的代码中运行...`magit-process`运行时，完成后清除。因此，您可以将它与等待直到发生这种情况的循环一起使用：

```
(progn
  (magit-fetch "upstream")
  (while magit-process (sleep-for 0.25))
  (magit-fetch "upstream")) 
```

但这确实在推动它——例如，当获取失败时会发生什么？

顺便说一句，您可以做的另一件事是查看源代码，在这种情况下它是一个单行函数`magit-fetch`：

```
(apply 'magit-run-git-async "fetch" remote magit-custom-options) 
```

并编写使用非异步版本的代码：

```
(progn
  (apply 'magit-run-git "fetch" "upstream" magit-custom-options)
  (apply 'magit-run-git "fetch" "upstream" magit-custom-options)) 
```

（并且您可以建议一个补丁来添加一个可选的标志参数，但这对于交互式工具来说似乎是一个不确定的功能......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:35:06.993

这个问题似乎与您[之前的问题有关](https://stackoverflow.com/questions/11117016/emacs-lisp-scripting-optimization-help-request)。您正在尝试通过两种方法解决在 emacs 中使用 git 的问题：

*   将 bash 脚本逐行转换为 emacs lisp
*   使用现有库与 git 交互

您的第一种方法显然不起作用，而您的第二种方法似乎更好。但是，magit 并不意味着在您的代码中使用。由于 magit 只对前端感兴趣，因此功能可能随时更改。任何不破坏功能的更改都将被视为安全的。

如果您解释了您的最终目标是什么，这将很有用，这样您就可以获得更好的答案。您需要的可能是一个可以从 emacs 调用的简单 git 别名。

# python - Python 列表不可使用代理调用

> ID：11131751
> 
> 赞同：1
> 
> 时间：2012-06-21T05:01:17.660
> 
> 标签：python, list, proxies

我正在创建一个需要连接到代理的脚本。然而，在连接时，我让它使用一个列表，因此它很容易适应，我不需要不断更新代理，只需上传一个新文件......当我运行它时出现这个错误.. `TypeError: 'list' object is not callable`

```
import urllib2
from random import choice

lines = []

for line in open('proxies.txt', 'r'):
    lines.append(line.strip())

proxynew = lines(1)
proxy  = urllib2.ProxyHandler({'http': proxynew})
opener = urllib2.build_opener(proxy)
your_ip = opener.open('http://ip.42.pl/i').read()
print 'IP: ' + your_ip 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T05:03:42.340

直接的问题是这一行：

```
proxynew = lines(1) 
```

要访问列表的元素，请使用括号：

```
proxynew = lines[1] 
```

* * *

如果您想要列表的第一个元素，请注意 Python 使用从零开始的索引。
因此，第一个元素的访问方式如下：

```
proxynew = lines[0] 
```

# jsf - Mojarra JSF 与 IBM JSF 相比有哪些优势（默认情况下在 Websphere7 服务器上）

> ID：11131752
> 
> 赞同：0
> 
> 时间：2012-06-21T05:01:19.247
> 
> 标签：jsf, jsf-2, websphere, websphere-7, mojarra

我正在使用 Websphere7 服务器，它附带了默认的 IBM 版本的 JSF。用 Mojarra JSF 覆盖默认的 IBM JSF 有什么好处吗？

如果我将 Mojarra 与 Webspehere7 一起使用，我会有所收获吗？我应该使用默认的 IBM JSF 实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:25:22.803

这取决于你做什么和需要什么。

WebSphere Application Server 7 已经带有两种不同的 JSF 风格。一个是 Mojorra，另一个是 MyFaces。您甚至可以在[WebSphere 管理控制台](http://pic.dhe.ibm.com/infocenter/wasinfo/fep/index.jsp?topic=%2Fcom.ibm.websphere.nd.multiplatform.doc%2Finfo%2Fae%2Fae%2Ftweb_jsf.html&resultof=%22myfaces%22%20%22myfac%22)中切换实现。他们添加了一些特定于 WebSphere 的补丁。

我不确定他们是否使用他们的修订包更新了 JSF 实现。如果您需要特定的补丁，您可以选择原始实现，但我通常会使用默认实现。

WAS7 的内置库是 JSF 1.2，因为它是一个 Java EE 5 服务器。交换库时，您可以使用 JSF 2.0。确保正确设置类加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:06:56.020

用 Mojarra JSF 覆盖默认的 IBM JSF 有什么好处吗？

不，没有额外的好处。规格相同，只是实现方式不同。

Mojarra 由 Oracle 实现。它是更稳定的 JSF 实现。

是的，您可以使用默认的 IBM JSF 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:06:08.940

我认为只有细微的差别。基本上，一些原始 JSF 库已被其他一些库替换，以便与 IBM Websphere 顺利工作。所以不推荐使用 Mojarra（你没有任何理由这样做），因为它会给你带来不必要的问题。另请参阅 IBM 的这篇[文章](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/cweb_javaserver_faces.html)。

# android - 开发移动聊天室，后端使用XMPP还是WebSocket？

> ID：11131760
> 
> 赞同：0
> 
> 时间：2012-06-21T05:02:36.677
> 
> 标签：android, ios, xmpp, websocket, socket.io

移动聊天室的一些要求：

1.  由于移动网络，应该能够与客户端频繁的连接/断开无缝工作

2.  节省带宽（减少开销）

我没有 XMPP 方面的经验，我只使用过 Node.JS 服务器，并且使用 JavaScript 很容易设置和破解服务器。

但似乎 XMPP 是聊天室的事实标准，例如 WhatsApp 使用它们。任何人都可以分享您在这两种技术方面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:13:07.870

你有点问我怎么才能到达我的目的地，我应该开车还是走铁轨。如果您使用铁轨，您仍然必须建造火车。

XMPP 主要用于聊天并在该领域表现出色。Websockets 与 XMPP 中的 BOSH 更相似，这是一个允许通过 HTTP 进行双向通信的扩展。Websockets 只是一个连接协议，而不是真正支持聊天概念的实时消息传递协议。我推测将来，XMPP 中会添加一个扩展来支持 Websockets，因为它很自然。

并不是说你不能使用 Websockets，只是你仍然需要在它之上构建“聊天”协议，而不是使用现有的具有许多服务器的现成协议。

# opencv - 在 Ubuntu 上使用 OpenCV 2.4.1 从图像创建视频

> ID：11131770
> 
> 赞同：1
> 
> 时间：2012-06-21T05:03:16.993
> 
> 标签：opencv

这是我使用 OpenCV 从图像创建视频的示例程序。但是我的输出视频无法正常工作，并且发生错误并指出“无法解复用流”请帮助。

```
 #include<cv.h>
  #include<highgui.h>
  #include<cvaux.h>
  #include<cxcore.h>

  int main()
{
    //CvVideoWriter *writer = 0;
    int isColor = 1;
    int fps     = 25;  // or 30
    int frameW  = 320; // 744 for firewire cameras
    int frameH  = 240; // 480 for firewire cameras
    CvSize size;

    size.width = frameW;
    size.height = frameH;
    CvVideoWriter *writer = cvCreateVideoWriter(
            "data3.avi",
            CV_FOURCC('M','J','P','G'),
            fps,
            size);
    IplImage* img = 0; 
    img=cvLoadImage("IMG_0157.JPG");
    for(int counter=0;counter < 3000;counter++)
    {
    cvWriteFrame(writer,img);      // add the frame to the file
    }
    cvReleaseVideoWriter(&writer);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T06:14:25.130

您可以尝试不同的 FOURCC 代码。OpenCV 不正确支持其中一些，多媒体应用程序不正确支持其中一些。拥有一个同时适用于 OpenCV 和您最喜欢的视频播放器的软件是一个反复试验的问题。

您可以尝试什么：使用 VLC（以防您不使用它）。它是最强大的玩家之一。

如果您只想在 OpenCV 中将图像序列显示/处理为视频，则可以使用 VideoCapture 的未记录功能：加载图像序列。

该示例使用 C++，但您可以轻松地将其转换为 C。

```
// pics are a sequence of Pictures001.jpg, PicturesS002.jpg, etc
cv::VideoCapture cap("path/to/my/Pictures%03d.jpg");

cv::Mat frame;

for(;;)
{
    cap >> frame;
    if(frame.empty())
       break;

    // do some processing
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T11:04:57.690

通常这不是 FOURCC 问题。这里的问题是img的大小和打开VideoWriter的大小不同。

这样你应该确保IPLImages或Mat图像，和VideoWriter具有相同的大小，否则视频输出会出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T17:44:33.693

我也在尝试从多个图像创建视频。我不明白，但您是要加载单个图像吗？

> IplImage* img = 0; img=cvLoadImage("IMG_0157.JPG");

我在处理视频时遇到了一些问题，因为我没有获得我试图加载以创建视频的图像的宽度和高度。所以我首先得到了这些属性：

```
IplImage *img = cvLoadImage("<folder>\\<image_name>.jpg");

size.width = img->width;
size.height = img->height; 
```

然后创建视频编写器并检查它是否存在：

```
CvVideoWriter *writer = cvCreateVideoWriter(
    "<video_name>.avi",
    -1,//CV_FOURCC('I','Y','U','V'), // VIDEO CODEC
    fps,
    size);

if(writer == NULL)
    std::cout << "No videowrite here!" << '\nl'; 
```

并将找到的每个图像写入视频的框架，然后将其发布。

```
while(img!=NULL)
{
    sprintf( filename, "<folder>\\<image_name>_%d.jpg", i );

    img = cvLoadImage(filename); //imagem b&w
    cvWriteFrame(writer,img);

    i++;
}

cvReleaseVideoWriter(&writer);
cvReleaseImage(&img); 
```

它奏效了！

不要忘记初始化变量`filename`和`int i`.

希望它有所帮助！

# android - 用于自定义布局的 listview onitemclicklistener

> ID：11131772
> 
> 赞同：1
> 
> 时间：2012-06-21T05:03:25.993
> 
> 标签：android, android-listview, onitemclicklistener

我有一个`listview`：

```
 <ListView
        android:clickable="true"
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView> 
```

里面的元素是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textview_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.76"
        android:text="Choose"
        android:clickable="true" />

    <EditText
        android:id="@+id/edittext_share"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.12"
        android:ems="10"
        android:hint="share"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/edittext_spent"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.11"
        android:ems="10"
        android:hint="spent"
        android:inputType="number" />

</LinearLayout> 
```

我希望当我单击 时`TextView`，应该会发生一些事情。我已经设置了`setOnItemClickListener`通过`getListView()`但它不起作用。

```
 public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
    Toast.makeText(this,"clicked id="+arg2, Toast.LENGTH_SHORT).show();
} 
```

和

```
 ListView lv = getListView();
    lv.setOnItemClickListener(this); 
```

我该怎么做才能使 textview clicable？

***编辑***：我的适配器代码：

```
 private class PeopleListAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    public Cursor cursor;
    public ArrayList<PersonInfo> peopleList;
    public ArrayList<PersonInfo> unsavedPeopleList;

    public PeopleListAdapter(Context context, Cursor cursor) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);
        this.cursor = cursor;
        peopleList = new ArrayList<PersonInfo>(cursor.getCount());
    }

    public PeopleListAdapter(Context context, Cursor cursor,
            ArrayList<PersonInfo> unsavedList) {
        this(context, cursor);
        this.unsavedPeopleList = unsavedList;
    }

    /**
     * The number of items in the list is determined by the number of
     * speeches in our array.
     * 
     * @see android.widget.ListAdapter#getCount()
     */
    public int getCount() {
        return peopleList.size() + unsavedPeopleList.size();
    }

    /**
     * Since the data comes from an array, just returning the index is
     * sufficent to get at the data. If we were using a more complex data
     * structure, we would return whatever object represents one row in the
     * list.
     * 
     * @see android.widget.ListAdapter#getItem(int)
     */
    public Object getItem(int position) {

        return position;
    }

    /**
     * Use the array index as a unique id.
     * 
     * @see android.widget.ListAdapter#getItemId(int)
     */
    public long getItemId(int position) {
        return position;
    }

    /**
     * Make a view to hold each row.
     * 
     * @see android.widget.ListAdapter#getView(int, android.view.View,
     *      android.view.ViewGroup)
     */
    public View getView(int position, View convertView, ViewGroup parent) {
        // A ViewHolder keeps references to children views to avoid
        // unneccessary calls
        // to findViewById() on each row.
        ViewHolder holder;

        // When convertView is not null, we can reuse it directly, there is
        // no need
        // to reinflate it. We only inflate a new View when the convertView
        // supplied
        // by ListView is null.
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list_item_person_info,
                    null);

            // Creates a ViewHolder and store references to the two children
            // views
            // we want to bind data to.
            holder = new ViewHolder();
            holder.name = (TextView) convertView
                    .findViewById(R.id.textview_name);
            holder.share = (EditText) convertView
                    .findViewById(R.id.edittext_share);
            holder.spent = (EditText) convertView
                    .findViewById(R.id.edittext_spent);
            convertView.setTag(holder);

        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag();
        }

        // Bind the data efficiently with the holder.
        PersonInfo p = getPersonInfo(position);
        holder.name.setText(p.name);
        holder.name.setTag(p.lookupUri);
        holder.share.setText(p.share + "");
        holder.spent.setText(p.spent + "");

        return convertView;
    }

    PersonInfo getPersonInfo(int position) {
        if (position < peopleList.size()) {
            PersonInfo pInfo = peopleList.get(position);
            if (pInfo == null) {
                pInfo = new PersonInfo();
                cursor.moveToPosition(position);
                pInfo.lookupUri = Uri.parse(cursor.getString(0));
                Cursor c = NewEventActivity.this.getContentResolver()
                        .query(pInfo.lookupUri,
                                new String[] { Contacts._ID,
                                        Contacts.DISPLAY_NAME }, null,
                                null, null);
                pInfo.share = cursor.getInt(1);
                pInfo.spent = cursor.getInt(2);
                try {
                    if (c.moveToFirst()) {
                        pInfo.name = c.getString(1);
                    }
                } finally {
                    cursor.close();
                }
                peopleList.set(position, pInfo);

            }

            return pInfo;
        } else {
            return unsavedPeopleList.get(position - peopleList.size());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:06:56.940

需要在 getView() 函数中的 Adapter 中将 Click listener Listener 设置为 TextView ......

看到这个[链接](http://www.rochdev.com/2011/05/clickable-textview-in-listview.html)

```
 private class PeopleListAdapter extends BaseAdapter implements
OnClickListener {

     ..............................
      ............................

public View getView(int position, View convertView, ViewGroup parent) {

             ......................
           .....................
        holder.name.setText(p.name);
        //holder.name.setTag(p.lookupUri);
        holder.share.setText(p.share + "");
        holder.spent.setText(p.spent + "");

        holder.name.setOnClickListener(this);
       holder.name.setTag(position);

        return convertView;
    }

     @Override
    public void onClick(View v) {
        Log.d("Sample", "Clicked on tag: " + v.getTag());
        ////get PersonInfo using getPersonInfo(position) 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:15:16.557

如果您使用 ListActicvity，则有一个默认方法可用，称为`onListItemClick()`. 您必须在 ListActivity 中重写此方法，

```
protected void onListItemClick(android.widget.ListView l, android.view.View v, int position, long id) {

        //find which item is clicked using the view object
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:07:33.093

在您的 getListView() 方法 TextView 中设置 ClickListener。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:40:44.887

据我了解，这就是您想要的：您希望 ListView 中的 TextView 可以单击，基于此执行一些操作，并且您在 ListView 中有具有自定义布局的项目

所以： setOnItemClickListener**将不起作用**，因为它为 ListVIew 内的整个项目而不是其中的元素添加了一个侦听器。

要实现这一点，您可以这样做：在 ListView 和 getView 方法内的元素中添加一个标签，默认情况下为您提供位置，使用该标签并使用 getTag() 方法使用标签，您可以区分点击了什么在 xml 中，您可以简单地声明 onClick() 并提供其定义

# django - 从 django.po 文件中删除模糊条目？

> ID：11131776
> 
> 赞同：0
> 
> 时间：2012-06-21T05:03:39.567
> 
> 标签：django, internationalization, locale, fuzzy-logic

如何从 django.po 文件中删除所有模糊条目？当我运行 makemessage 命令时，它创建了很多模糊文件。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:30:58.967

Gettext [msgattrib](http://www.gnu.org/software/gettext/manual/html_node/msgattrib-Invocation.html)是您的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:06:52.243

让您的翻译人员验证这些条目的翻译是否仍然正确并删除模糊标记。

# ruby-on-rails - ruby中的排序哈希返回一个数组，但是当我转换为哈希时，它的排序与第一个完全相反

> ID：11131778
> 
> 赞同：0
> 
> 时间：2012-06-21T05:03:46.577
> 
> 标签：ruby-on-rails, ruby, sorting, hash, type-conversion

> **1）我有一个哈希，在 ruby​​ 控制台中编码**

```
influencerHash

influencerHash.class => Hash

{"inf3"=>{"followingCount"=>256, "followersCount"=>80, "name"=>"Branislav Seslija", "score"=>10.4099998474121}, "inf2"=>{"followingCount"=>6, "followersCount"=>4, "name"=>"Greg Seslija", "score"=>29.8400001525879}, "inf1"=>{"followingCount"=>13, "followersCount"=>10, "name"=>"Amit Kumar", "score"=>30.6499996185303}} 
```

> **2）我对其进行了排序，但哈希被转换为数组**

```
sortHash = influencerHash.sort

sortHash.class => Array

[["inf1", {"followingCount"=>13, "followersCount"=>10, "name"=>"Amit Kumar", "score"=>30.6499996185303}], ["inf2", {"followingCount"=>6, "followersCount"=>4, "name"=>"Greg Seslija", "score"=>29.8400001525879}], ["inf3", {"followingCount"=>256, "followersCount"=>80, "name"=>"Branislav Seslija", "score"=>10.4099998474121}]] 
```

> **3）我将它转换回哈希，但排序的结果是相反的（见上面的数组和下面的哈希结果）**

```
sortHash = Hash[influencerHash.sort]

sortHash.class => Hash

{"inf3"=>{"followingCount"=>256, "followersCount"=>80, "name"=>"Branislav Seslija", "score"=>10.4099998474121}, "inf2"=>{"followingCount"=>6, "followersCount"=>4, "name"=>"Greg Seslija", "score"=>29.8400001525879}, "inf1"=>{"followingCount"=>13, "followersCount"=>10, "name"=>"Amit Kumar", "score"=>30.6499996185303}} 
```

**

为什么会发生这种情况，我将如何获得与 Array 中相同但作为 Hash 的排序？

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:56:22.400

看来您使用的是 Ruby 1.9 之前的版本，其中不存在具有顺序的 Hash 元素的概念。

如果你真的需要有序哈希，并且如果你真的不能升级到 Ruby 1.9，那么有一些库可以为旧版本的 Ruby 实现有序哈希。（例如[Hashery](http://rubyworks.github.com/hashery/)等。）

如果可能的话，我建议升级到 Ruby 1.9。

# clojure - let 的这种用法有代码味道吗

> ID：11131780
> 
> 赞同：4
> 
> 时间：2012-06-21T05:03:49.083
> 
> 标签：clojure

我经常在这样的代码中结束，我在其中创建临时变量只是为了保持状态。有什么更好的方法呢？

画眉运算符无济于事，因为尽管 e 是临时的，但我仍然需要 c 和 d 在连续的 let 形式中。

```
(let [[c d] (sum [a b])
      e     (if (even? c) c 0)
      f     (+ s e)]
   .....
  ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:37:42.333

这对我来说看起来不错。“状态”并不是真正的状态——没有任何副作用。如果其中有很多绑定`let`并且它们的依赖关系变得难以追踪，那可能会变得很糟糕，但这是复杂代码的一般属性（duh），而不是特定于这种模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:49:02.913

我认为这种模式没有任何问题。在这种情况下，您需要创建临时变量，因为各种操作不能直接组合，因此您使用临时变量来使它们工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:42:10.003

我看到了几种可以重组它的方法。我不认为客观上比你写的更好，但我会发布它作为思考的食物。

```
(let [c (first (sum [a b]))
      f (+ s (if (even? c) c 0))]
  ...) 
```

或这个

```
(defn evenz [n]
  (if (even? n) n 0))

(let [f (+ s (evenz (first (sum [a b]))))]
  ...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T21:50:20.303

从我的角度来看，这看起来像是相当清晰的“功能风格”代码。我认为它没有任何问题，只是名称有点短;-)

*   用 let 给所有东西命名可能会使代码更大，虽然更容易学习
*   即使在 clojure 源代码中，在 let 中使用条件也很常见
*   let 语句的格式是正常的。

也许更多的背景会导致建设性的建议？

# c++ - 我可以使用非阻塞套接字使用“sendmsg/recvmsg”将 FD 从一个进程发送到另一个进程吗？

> ID：11131782
> 
> 赞同：1
> 
> 时间：2012-06-21T05:04:09.610
> 
> 标签：c++, linux, sockets, ipc, file-descriptor

我需要创建一个通过 Unix 套接字连接的客户端-服务器模型。我的客户端将请求服务器打开一个只有服务器具有权限的文件。服务器将打开文件并使用“sendmsg”API 发送 FD，客户端将使用“recvmsg”接收 FD。现在我的问题是我可以使用非阻塞套接字来实现这一点吗？另外，如果可能的话，我怎么知道客户端消息的长度？

请指出一些相同的非阻塞实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:43:31.600

您应该使用[sendfile](http://linux.die.net/man/2/sendfile)在 FD 和套接字之间传输文件。

如果套接字是非阻塞的，则 sendfile（或 send 或 sendmsg）调用可能会返回一个值，指示已完成的部分数量。使用 select() 或 poll() 来获取何时可以再次发送的通知（从文件描述符中的前一个点开始，当前一个发送停止时）。

至于文件长度，您必须自己将其添加到您的请求/响应协议中。（例如在服务器上调用 stat()，发送文件长度，然后发送文件本身）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:29:14.410

相关： http: [//lists.canonical.org/pipermail/kragen-hacks/2002-January/000292.html](http://lists.canonical.org/pipermail/kragen-hacks/2002-January/000292.html)所以我的回答不完整。

# jquery - jQuery双动画焦点？

> ID：11131786
> 
> 赞同：2
> 
> 时间：2012-06-21T05:04:39.580
> 
> 标签：jquery, focus, jquery-animate

嗨，我已经设置了以下 jsFiddle

[http://jsfiddle.net/a9ugu/2/](http://jsfiddle.net/a9ugu/2/)

我想知道为什么我在使用`.focus()`.

点击“点击我”，出现两次动画的框？我怎样才能阻止这个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:12:59.343

**工作演示**如果我错过了什么，请告诉我：http: [//jsfiddle.net/k2Xg2/](http://jsfiddle.net/k2Xg2/) **和**来自@Andy： http: [//jsfiddle.net/k2Xg2/1/](http://jsfiddle.net/k2Xg2/1/)满足需要。

所以问题是在新输入框上调用`.focus`+50：

希望能帮助到你，

**代码**

```
var box = $('#box');
$('#me').toggle(function() {
    box.show();
   // box.focus();
}, function() {
    box.hide();
});

//#region Search Box
$('#box').focus(function () {
    $(this).select();
    $(this).animate({ width: '+=50' }, 200);
});
box.blur(function () {
    $(this).width(150);
    $(this).animate({ width: '-=50' }, 200);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:17:05.830

某些东西触发了 focus() 两次 - 也许在创建它时浏览器会关注它？

看起来你只希望它有 150px 宽.. 所以只需硬编码它：

[http://jsfiddle.net/a9ugu/4/](http://jsfiddle.net/a9ugu/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:17:38.403

而不是`+50`只指定目标宽度，如

```
$box.focus(function () {
    $(this).select();
    $(this).animate({ width: '150' }, 200);
});
$box.blur(function () {
    $(this).animate({ width: '100' }, 200);
});​ 
```

**演示：http:** [//jsfiddle.net/joycse06/a9ugu/7/](http://jsfiddle.net/joycse06/a9ugu/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T05:18:07.530

这是我的尝试：

```
var box = $('#box');
$('#me').toggle(function() {
    box.show();
    box.focus();
}, function() {
    box.hide();
});

$('#box').focus(function () {
    //$(this).select(); this line was not needed and was somehow causing your double animation
    $(this).animate({ width: '+=50' }, 200);
});
box.blur(function () {
    $(this).width(150);
    $(this).animate({ width: '-=50' }, 200);
});​ 
```

我注释掉的唯一一行似乎是第二次调用焦点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T06:40:22.110

请用

```
$(this).attr(width,yourvalue); 
```

这样初始值就是您指定的值您还可以在焦点时使用[淡入淡出效果](http://api.jquery.com/category/effects/fading/)，这样框似乎不会立即出现，而是以平滑的方式出现

# mysql - 如何找点，根据接近度排序，得到1-20、21-40等。高效使用Myisam和mysql以及空间索引

> ID：11131788
> 
> 赞同：2
> 
> 时间：2012-06-21T05:04:51.810
> 
> 标签：mysql, sql, geospatial, myisam, spatial-index

假设我想找到离我最近的 20 家企业。稍后我想查看下一个最接近的 20 个，等等。是的，我有 myisam。我有空间索引。我正在寻找我应该发送的实际 SQL 命令。

说清楚：

**笔记：**

1.  我正在使用**mysql myisam**空间索引。我来回浏览谷歌，并没有发现我的确切需求。
2.  我不想计算整个表的距离（这太低效了）。空间索引的重点是至少你可以有效地去除很多点。如果您左侧和上方的某些点不符合条件，那么该点左侧和上方的所有点也不符合条件。
3.  我不想计算任何仍然低效的区域的距离。我感兴趣的区域是 10 公里，那里有 65,000 家企业。
4.  我不介意计算合理数量的点的距离，因为我想按距离对点进行排序并能够显示点 1-20、21-40、41-60 等。
5.  我为postgis找到了一种方法[http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/](http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/)我想要类似的东西，但对于mysql myisam。
6.  我想要一个以实际 sql 代码作为示例或实际示例 sql 命令的网站。所以请不要只说“使用空间”。呃。我知道。我想要实际的 sql 命令。
7.  我不想先搜索一个小区域的复杂循环。必须有一个 sql 命令可以通过 mysql 引擎有效地一次性完成此操作。
8.  笛卡尔距离很好。除非您在北极或南极，否则无需知道我们生活在一个地球上，这不是我们大多数客户所在的地方。

有 160 万家企业。当然，计算所有它们的距离然后对其进行排序是愚蠢的。

这就是地理空间索引发挥作用的地方吗？

那么我需要发送什么 SQL 命令呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:53:13.360

由于我无法对您的问题发表评论，我想我将不得不将此作为答案。

看这个问题：

[https://gis.stackexchange.com/questions/22082/how-can-i-use-r-tree-to-find-points-within-a-distance-in-spatialite](https://gis.stackexchange.com/questions/22082/how-can-i-use-r-tree-to-find-points-within-a-distance-in-spatialite)

稍微查看一下文档，MyIsam 提供的功能似乎没有很好的方法来做到这一点。

# javascript - 如何将字符串形式的十六进制字节流转换为javascript中的实际字节流？

> ID：11131789
> 
> 赞同：0
> 
> 时间：2012-06-21T05:04:58.363
> 
> 标签：javascript, pdf-generation

我有一个 pdf 文件，它以 Hexa 字符串字节流的形式提供，例如：

```
"255044462D312E330D0A25E2E3CFD30D0A322030206F626A......" 
```

（它是一个很长的字符串，所以我刚刚给出了格式）它是浏览器中可用的字符串格式。

我需要将其转换为十六进制格式，以便我可以通过将此输出流写入 pdf 文件来在 Web 浏览器中呈现 pdf。我需要知道是否有任何内置函数或任何方式可以在 Javascript 中实现。

我知道用 Java 实现这个功能很简单，但是我有一个`ABAP`后端只能获取这个字符串，而`SAPUI5`前端是一个基于 Javascript 的框架。

我通过编写一个简单的 java 程序来检查这个字节流的有效性，该程序生成 PDF 仅用于测试目的，如果数据正确的话：

```
public static void main(String[] args) {
  FileOutputStream fop = null;
  File file;
  file = new File("C:/Users/I074098/Desktop/Project Temps/test.pdf");
  fop = new FileOutputStream(file);
  // if file doesnt exists, then create it
  if (!file.exists()) {
    file.createNewFile();
  }
  //I manually added "(byte) 0x" in the above string and 
  //converted it to the following format, I skipped that conversion in this code
  byte[] contentInBytes = new byte[]{
    (byte) 0x25,(byte) 0x50,(byte) 0x44,(byte) 0x46, .....
  } 
  fop.write(contentInBytes);
    fop.flush();
    fop.close();
  } 
```

这会生成pdf。但我知道这是非常低效的，我不确定这一切都可以在 javascript 中完成。我做了很多搜索，但没有结果。我将不胜感激任何帮助。

问候， 里斯万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:29:58.707

```
 //  To IE Boat method is here,

        if (!window.btoa) {
    var tableStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    var table = tableStr.split("");

    window.btoa = function (bin) {
    for (var i = 0, j = 0, len = bin.length / 3, base64 = []; i < len; ++i) {
    var a = bin.charCodeAt(j++), b = bin.charCodeAt(j++), c = bin.charCodeAt(j++);
    if ((a | b | c) > 255) throw new Error("String contains an invalid character");
    base64[base64.length] = table[a >> 2] + table[((a << 4) & 63) | (b >> 4)] +
    (isNaN(b) ? "=" : table[((b << 2) & 63) | (c >> 6)]) +
    (isNaN(b + c) ? "=" : table[c & 63]);
    }
    return base64.join("");
    };
    } 

      //script block
      // try this way  to open you pdf file like this in javascript hope it will help you.
        function hexToBase64(str)
          {
         return btoa(String.fromCharCode.apply(null,str.replace(/\r|\n/g, "").replace(/([\da-fA-F]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ")));
          }

          var data=   hexToBase64("255044462D312E330D0A25E2E3CFD30D0A322030206F626A");// here pass the big hex string

            // it will be open in the web browser like this
            document.location.href = 'data:application/pdf;base64,' +data;

     **//to open up in the new window**
    window.open('data:application/pdf;base64,' +data, "_blank", "directories=no, status=no, menubar=no, scrollbars=yes, resizable=no,width=600, height=280,top=200,left=200"); 
```

# java - FieldDeclaration 到 IField - 从 FieldDeclaration 获取 IBinding

> ID：11131793
> 
> 赞同：4
> 
> 时间：2012-06-21T05:05:11.643
> 
> 标签：java, abstract-syntax-tree, eclipse-jdt

如何将`FieldDeclaration`（类型：ASTNode）转换为`IField`（类型：JavaElement）。是否可以从 FieldDeclaration ASTNode 获取绑定，就像对于 MethodDeclaration 节点的 node.resolveBinding() 一样。

**需要**：我正在访问具有公共常量的类中的 FieldDeclaration 节点，并希望在项目中搜索该字段的引用。我正在使用 JDT 的 SearchEngine。为此，我想创建一个搜索模式，如下所示：

```
SearchPattern.createPattern(iField, IJavaSearchConstants.REFERENCES); 
```

我已将此作为对我的一个[问题](https://stackoverflow.com/questions/10309824/check-if-methoddeclaration-similar-to-an-imethod)的评论，但没有得到相同的答案。将其作为单独的问题发布。

提前感谢您的回答。

* * *

回复迪帕克的回答。

使用您的方法，我可以按如下方式检索 JavaElement

```
List<VariableDeclarationFragment> fragments = node.fragments();
VariableDeclarationFragment fragment = fragments.get(0);
IJavaElement fieldElement = fragment.resolveBinding().getJavaElement(); 
```

如果我传递这个 IJavaElement 来创建搜索模式而不是 IField，它将返回与 IField 相同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:41:25.973

像往常一样 ASTView 插件是你的朋友！:-) 在 ASTView 中，您可以看到绑定可用于 VariableDeclarationFragment，但不适用于 FieldDeclaration。

从 FieldDeclaration 获取绑定

*   获取 FieldDeclaration 的“片段” => 你现在有一堆 VariableDeclarationFragment 节点
*   调用VariableDeclarationFragment#resolveBinding()（该方法继承自VariableDeclaration）

# android - 如果更改相机方向，屏幕会变黑一段时间

> ID：11131798
> 
> 赞同：2
> 
> 时间：2012-06-21T05:06:12.230
> 
> 标签：android, android-orientation

在将设备`orientation`从*纵向更改为横向* 并将*横向更改为纵向*时，它正在发生。我面临的问题是从一种模式更改为另一种屏幕时会变黑一段时间。似乎重新创建了活动。

我使用过`android:configChanges`，但在以编程方式进行表面视图方向之后，我无法更改。

**更改相机模式时如何避免黑屏？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:20:26.450

重新创建活动时，它会执行您在`onCreate()`.

如果您使用的是 Activity，那么您应该考虑`onRetainNonConfigurationInstance()`在您的 Activity 中使用重物。

但是记住`onRetainNonConfigurationInstance()`现在已被弃用。

如果您对 Fragments 感到满意，那么您应该改用 setRetainInstance(boolean)。

以下链接将为您提供帮助。

[http://developer.android.com/resources/articles/faster-screen-orientation-change.html](http://developer.android.com/resources/articles/faster-screen-orientation-change.html) [http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app /片段](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.html) [http://android.codeandmagic.org/2011/07/android-fragments-saving-state-and-screen-rotation/](http://android.codeandmagic.org/2011/07/android-fragments-saving-state-and-screen-rotation/)

# css - 在刷新之前，页面在 chrome 中呈现错误？

> ID：11131800
> 
> 赞同：0
> 
> 时间：2012-06-21T05:06:48.647
> 
> 标签：css, google-chrome

使用当前版本的谷歌浏览器，某些网站会出现错误，直到您刷新它们。虽然它不会发生太多，但它似乎主要发生在 phpbb 论坛和嵌套列表（即列表中的列表......用于创建导航栏和菜单）

我在运行 ACID3 测试时遇到了类似的问题。我几乎每次都可以复制这个错误/错误。当我第一次运行它时，数字一直到 100，但我看到的不是彩色矩形，而是一条水平黑线，其厚度增加了。当我刷新并重新运行测试时，它工作正常。当我关闭浏览器（有时会删除缓存）时，同样的事情会发生，直到我刷新。

这是正常的镀铬行为吗？

# php - 使用 PHP 嵌入视频代码

> ID：11131802
> 
> 赞同：0
> 
> 时间：2012-06-21T05:07:12.123
> 
> 标签：php, video

我正在开发一个带有后端管理面板的 Web 应用程序，允许用户插入视频嵌入代码。当我在该位置回显该代码时，此代码将在相应页面上呈现视频。

问题是，当我回显代码时，会显示代码本身而不是显示视频。我哪里错了？

这是用户在管理面板的文本区域中输入的代码：

```
<pre>
<object id="vp110mFH" width="432" height="240" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"><param name="movie" value="http://static.animoto.com/swf/w.swf?w=swf/vp1&e=1340255540&f=10mFH15tm8Wyv1UT85DhEA&d=72&m=p&r=360p&volume=100&start_res=360p&i=m&ct=Click...To%20request%20more%20Info..&cu=http://schoolanduniversity.com/study_programs/more-information.php&options="></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed id="vp110mFH" src="http://static.animoto.com/swf/w.swf?w=swf/vp1&e=1340255540&f=10mFH15tm8Wyv1UT85DhEA&d=72&m=p&r=360p&volume=100&start_res=360p&i=m&ct=Click...To%20request%20more%20Info..&cu=http://schoolanduniversity.com/study_programs/more-information.php&options=" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="432" height="240"></embed></object>
</pre> 
```

请指导。

问候， Mrinal Purohit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:15:43.193

似乎您正在为嵌入代码显示 html 实体，您可以尝试使用[html_entity_decode()](http://php.net/manual/function.html-entity-decode.php)来解决这个问题。当然，更好的解决方案是以正确的格式存储嵌入代码，即不编码为实体。

# python - 在url中传递变量？

> ID：11131810
> 
> 赞同：10
> 
> 时间：2012-06-21T05:07:56.430
> 
> 标签：python, json, url, urllib, urlopen

所以我是 python 新手，我迫切需要帮助。

我有一个文件，其中有一堆用它们写的 id（整数值）。它是一个文本文件。

现在我需要将文件中的每个 id 传递到一个 url 中。

例如“https://example.com/[id]”

会以这种方式完成

```
A = json.load(urllib.urlopen("https://example.com/(the first id present in the text file)"))
print A 
```

这基本上会做的是，它将读取有关上述 url 中存在的 id 的某些信息并显示它。我希望它以循环格式工作，其中它将读取文本文件中的所有 id 并将其传递给“A”中提到的 url 并连续显示值..有没有办法做到这一点？

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-21T05:17:18.187

可以使用旧式字符串连接

```
>>> id = "3333333"
>>> url = "https://example.com/%s" % id
>>> print url
https://example.com/3333333
>>> 
```

新样式字符串格式：

```
>>> url = "https://example.com/{0}".format(id)
>>> print url
https://example.com/3333333
>>> 
```

如前所述，文件的读取`avasal`有一个小的变化：

```
f = open('file.txt', 'r')
for line in f.readlines():
    id = line.strip('\n')
    url = "https://example.com/{0}".format(id)
    urlobj = urllib.urlopen(url)
    try:
        json_data = json.loads(urlobj)
        print json_data
    except:
        print urlobj.readlines() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T05:19:39.707

**懒惰的风格：**

```
url = "https://example.com/" + first_id

A = json.load(urllib.urlopen(url))
print A 
```

**老款式：**

```
url = "https://example.com/%s" % first_id

A = json.load(urllib.urlopen(url))
print A 
```

**新风格2.6+：**

```
url = "https://example.com/{0}".format( first_id )

A = json.load(urllib.urlopen(url))
print A 
```

**新风格2.7+：**

```
url = "https://example.com/{}".format( first_id )

A = json.load(urllib.urlopen(url))
print A 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T05:21:31.147

您需要做的第一件事是知道如何从文件中读取每一行。首先，您必须打开文件；你可以用一个`with`语句来做到这一点：

```
with open('my-file-name.txt') as intfile: 
```

这将打开一个文件并将对该文件的引用存储在 中`intfile`，它会在块的末尾自动关闭该文件`with`。然后，您需要从文件中读取每一行；您可以使用常规的旧 for 循环来做到这一点：

```
 for line in intfile: 
```

这将遍历文件中的每一行，一次读取一个。在您的循环中，您可以将每一行作为`line`. 剩下的就是使用您提供的代码向您的网站发出请求。您缺少的一点是所谓的“字符串插值”，它允许您使用其他字符串、数字或其他任何内容来格式化字符串。在您的情况下，您想将一个字符串（文件中的行）放在另一个字符串（URL）中。为此，您可以将`%s`标志与字符串插值运算符一起使用`%`：

```
url = 'http://example.com/?id=%s' % line
A = json.load(urllib.urlopen(url))
print A 
```

把它们放在一起，你会得到：

```
with open('my-file-name.txt') as intfile:
  for line in intfile:
    url = 'http://example.com/?id=%s' % line
    A = json.load(urllib.urlopen(url))
    print A 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-17T18:10:43.117

**蟒蛇 3+**

Python 3 支持新的字符串格式化，这是一种更易读、更好的格式化字符串的方法。这是一篇关于相同内容的好文章：[Python 3's f-Strings](https://realpython.com/python-f-strings/)

在这种情况下，它可以被格式化为

`url = f"https://example.com/{id}"`

**详细示例**

当您想将多个参数传递给 URL 时，可以按如下方式完成。

```
name = "test_api_4"
owner = "jainik@test.com"

url = f"http://localhost:5001/files/create" \
f"?name={name}" \
f"&owner={owner}" \ 
```

我们在这里使用了多个 f 字符串，它们可以用 '' 附加。这将使它们保持在同一行中，而不会在它们之间插入任何换行符。

**对于有空格的值**

对于这样的值，您应该在 python 文件中导入`from urllib.parse import quote`，然后引用字符串，如：`quote("firstname lastname")`

这将用 . 替换空格字符`%20`。

# php - PHP 从另一个网页中挑选信息

> ID：11131812
> 
> 赞同：-1
> 
> 时间：2012-06-21T05:08:14.950
> 
> 标签：php, webpage

有什么方法可以让我们从另一个网页中获取一些信息并使用 PHP 将其显示在我们的浏览器上（进行一些修改后）？假设我要从中选择信息的页面具有 URL [http://sk.com](http://sk.com)。（基本上，我想从网页上的表格中获取信息并根据特定列对其进行排序，然后显示详细信息。）

* * *

## 如果我们想从本地服务器而不是外部 URL 获取信息怎么办？

* * *

*** *还有其他好的资源来了解更多关于 php curl 的信息吗？也可以用domdoc完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:10:18.200

你可以使用 php curl 来做这些事情你可以在这里参考 php curl

[http://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php)

[从特定服务器到另一台特定服务器的PHP CURL不起作用](https://stackoverflow.com/questions/10991668/php-curl-from-a-specific-server-to-another-specific-server-not-working)

# sencha-touch - Sencha Touch 2 按钮控制器

> ID：11131813
> 
> 赞同：1
> 
> 时间：2012-06-21T05:08:21.517
> 
> 标签：sencha-touch

我有这个问题，我可以引用一个按钮来控制它。我不明白控制器的逻辑，请参阅我的示例代码：

```
Ext.define('myMoney.controller.Inicio', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            loginForm: '#loginForm',
            logButton: '#logButton',
        },
        control: {
            logButton: {
                tab: "autenthic"
            }
        }
    },

    autenthic: function(){
        console.log("Wazzup!?");
    }
}); 
```

我有我的看法：

```
Ext.define('myMoney.view.Inicio', {
    extend: 'Ext.form.Panel',
    xtype: 'inicio',

    requires: [
    'Ext.form.FieldSet',
    'Ext.field.Password'
    ],

    config: {
        title: 'Inicio',
        iconCls: 'home',
        styleHtmlContent: true,
        scrollable: true,

        items: [
            {
                xtype: 'toolbar',
                title: 'Money Tracker',
                docked: 'top'
            },
            {
                xtype: 'fieldset',
                title: 'Inicio de Sesion',
                id: 'loginForm',
                instructions: '(Por favor coloca tu usuario y clave)',

                items: [
                    {
                        xtype: 'textfield',
                        name: 'us',
                        label: 'Usuario'
                    },
                    {
                        xtype: 'passwordfield',
                        name: 'pw',
                        label: 'Clave'
                    }
                ]
            },
            {
                xtype: 'button',
                width: '50%',
                centered: true,
                text: 'Aceptar',
                ui: 'confirm',
                id: 'logButton'

            }
        ]

    }

}); 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:51:14.300

代替

```
tab: "autenthic" 
```

写

```
tap: "autenthic" 
```

# objective-c - 适用于 Mac 而非 iOS 的良好语音识别引擎？

> ID：11131815
> 
> 赞同：6
> 
> 时间：2012-06-21T05:08:29.327
> 
> 标签：objective-c, macos, speech-recognition

对不起，如果这是一个重复的问题，但我没有在任何地方看到它。

我正在开发一个可以接收语音命令的 Mac 程序，但并`NSSpeechRecognizer`没有完全为我做这件事。

我想要一些更动态的东西，这样我就可以设置*警报*、设置*日期*、*发出更自然的命令*等。

我发现的每个开源语音引擎都是针对 iOS 量身定制的。openears/vocalkit 等对于 Mac 程序是否仍能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:59:45.967

语音识别非常重要。免费的引擎是免费的。如果您期望听写任何数量（例如警报标签），那么您就不走运了。Siri 需要一个完整的数据中心是有原因的。可用的开源软件包不会让您比简单的电话自动助理更进一步。

除非您有广泛的统计背景和空闲时间，否则我建议您寻求商业图书馆或服务器实施的许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:03:42.127

Carnegie Melon 的袖珍狮身人面像是唯一的选择

[http://cmusphinx.sourceforge.net/](http://cmusphinx.sourceforge.net/)

# c# - 使用自定义格式序列化 JSON 字符串

> ID：11131818
> 
> 赞同：1
> 
> 时间：2012-06-21T05:09:06.330
> 
> 标签：c#, json, serialization

我有一个`Generic List`对象，它把下表作为它自己的值。

```
CountryID | StateID | StateName
--------------------------------
    1     |  1      |  Alabama    
    1     |  2      |  California
    1     |  3      |  Florida
    1     |  4      |  Hawaii   
    2     |  5      |  London
    2     |  6      |  Oxford 
```

我想根据该 List 对象创建 JSON 字符串。我想得到的 JSON 格式如下所示。

```
{           
    1: { '1': 'Alabama', '2': 'California', '3': 'Florida', '4': 'Hawaii' },
    2: { '5': 'London', '6': 'Oxford' }
}; 
```

我使用下面的类来生成 JSON 对象。

```
public static class JSONHelper
{
    public static string ToJSON(this object obj)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        return serializer.Serialize(obj);
    }

    public static string ToJSON(this object obj, int recursionDepth)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        serializer.RecursionLimit = recursionDepth;            
        return serializer.Serialize(obj);
    }
} 
```

但是，我完成调用`ToJSON`方法后得到的实际输出如下所示。

```
{
[

{"CountryID":1,"StateID":1,"StateName":"Alabama"},
{"CountryID":1,"StateID":2,"StateName":"California"},
{"CountryID":1,"StateID":3,"StateName":"Florida"},
{"CountryID":1,"StateID":4,"StateName":"Hawaii"},
{"CountryID":2,"StateID":5,"StateName":"London"},
{"CountryID":2,"StateID":6,"StateName":"Oxford"}

]
} 
```

那么，任何人都可以给我建议如何制作我想要的 JSON 字符串格式吗？
每一个建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:43:44.343

似乎一种简单的方法是使用 LINQ 选择字典，然后将字典对象发送到 JavascriptSerializer ...

假定我们有：

```
var list = new[]
               {
                   new {CountryID = 1, StateID = 1, StateName = "Alabama"},
                   new {CountryID = 1, StateID = 2, StateName = "California"},
                   new {CountryID = 1, StateID = 3, StateName = "Florida"},
                   new {CountryID = 1, StateID = 4, StateName = "Hawaii"},
                   new {CountryID = 2, StateID = 5, StateName = "London"},
                   new {CountryID = 2, StateID = 6, StateName = "Oxford"}
               }; 
```

然后我们可以在其上递归调用 .ToDictionary 以获得以下信息：

```
var d = list
    .GroupBy(x=>x.CountryID)
    .ToDictionary(g=> g.Key.ToString(), 
        g => g.ToDictionary(x => x.StateID.ToString(),x => x.StateName));

var serializer = new JavaScriptSerializer();
return serializer.Serialize(d); 
```

它返回您请求的 JSON

注意：您必须在字典键上调用 .ToString() ，因为 JavaScriptSerializer 似乎在带有非字符串键的字典上失败...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T05:47:06.383

您需要序列化字典而不是列表来获取 JSON。鉴于这些类型定义：

```
public class Country
{
    public Country()
    {
        States = new List<State>();
    }
    public int         CountryID  { get; set; }
    public List<State> States     { get; set; }
}

public class State
{
    public int    StateID    { get; set; }
    public string StateName  { get; set; }
} 
```

而这个变量：

```
 var clist = new List<Country>(); 
```

我可以使用以下代码序列化为您想要的格式：

```
 var d = clist.ToDictionary
        (k => k.CountryID.ToString(),
         e => e.States.ToDictionary(k2 => k2.StateID.ToString(),
                                    e2 => e2.StateName));

    Console.WriteLine("{0}",JSONHelper.ToJSON(d)); 
```

这使用作为`ToDictionary()`LINQ 一部分的扩展方法。

输出：

```
{"1":{"1":"Lzwuoge","2":"0lzpas"},"2":{"1":"Mqn3ul5k","2":"Kefzu"}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:15:54.490

将其转换为您指定的格式的最简单方法是将您的自定义类转换为嵌套字典：

```
Dictionary<Int32,Dictionary<String, String>> 
```

然后序列化该输出。

```
Dictionary<Int32,Dictionary<String, String>> countryDict= new Dictionary<Int32,Dictionary<String, String>>()
foreach(var item in myGenericList){
    Dictionary<Int32,Dictionary<String, String> stateDict = 
    countryDict[item.CountryID] ?? new Dictionary<Int32,Dictionary<String, String>>();
    stateDict.Add(item.StateID.ToString(),item.StateName) 
} 
```

# android - 是否可以使用 x86 VM 测试 Android InApp 计费

> ID：11131820
> 
> 赞同：1
> 
> 时间：2012-06-21T05:09:15.223
> 
> 标签：android, in-app-billing, android-x86

[从文档](http://developer.android.com/guide/market/billing/billing_testing.html)中，它说

```
To test in-app billing in an application you must install the 
application on an Android-powered device. You cannot use the 
Android emulator to test in-app billing. 
```

但是任何人都成功地测试了 Android x86 VM (http://www.android-x86.org)？

我想虚拟机应该像一个真实的设备一样运行并且应该可以测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:40:22.753

The actual platform doesn't really matter. IAB uses the Android Market/Play store application to provide its services, so if you have that installed and properly working, you will be able to test. If not, you won't. Since the IAB code is platform-independent, you don't really need to test it on all platforms you need to support.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:41:18.137

我找到[了这个](http://code.google.com/p/android-test-billing/)项目

允许您通过简单地添加库并将请求重定向到存根直接从模拟器中测试应用计费应用程序。

但是我无法将此库与 extras/google/play_billing/ 中的示例代码集成

在示例代码中逐步编写如何集成该项目将非常有用。

# python - 使用 SocketServer 中的子进程调用停止主 Python 进程

> ID：11131825
> 
> 赞同：0
> 
> 时间：2012-06-21T05:10:03.863
> 
> 标签：python, sockets

我正在尝试实现一种反向终端：在某些计算机 foo 上启动 server.py。

在其他一些计算机上运行 nc foo 2000 并且您连接到 foo 上的 bash shell。

我正在使用以下服务器代码：

```
import socket,os,threading,select,subprocess                                                                                             

class mysocket(socket.socket):

    def __init__(self,*arg, **kw):
        super(mysocket,self).__init__(*arg, **kw)
        self.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        self.setblocking(0)

    def read(self):
        return self.recv(2048)

    def write(self,data):
        self.send(data)

    def accept(self):
        conn,addr = super(mysocket,self).accept()
        return mysocket(_sock=conn),addr

socket.socket = mysocket

import SocketServer

class RequestHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        subprocess.call(['bash','-i'],env=os.environ,stdin=self.request,stdout=self.request,stderr=self.request)

class ForkedTCPServer(SocketServer.ForkingMixIn, SocketServer.TCPServer):
    pass

if __name__ == '__main__':

    address = ('0.0.0.0', 2000) # let the kernel give us a port
    server = ForkedTCPServer(address, RequestHandler)

    server.serve_forever() 
```

如果您一次只进行一个连接，这将非常有效。

但是，当我打开第二个连接时，nc 程序正在等待，我的 python 进程有以下消息：

```
[1]+  Stopped                 python server.py 
```

如果我键入 %1 将进程置于前台，则第二个 nc 屏幕开始工作，并且我有两个远程 bash shell。

我的问题是为什么 python 进程会停止，我怎样才能阻止它发生？

据我所知，没有什么是阻塞的，因为一旦我恢复了这个过程，一切都会完美运行！

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:46:27.200

我想到了。问题在于调用 bash，因为其他事情会起作用。

最终，我一时兴起尝试使用脚本命令调用 bash，它按预期工作。

这是任何想要它的人的一些最终代码：

```
import socket,os,threading,subprocess                                                                                                    

class mysocket(socket.socket):

    def __init__(self,*arg, **kw):
        super(mysocket,self).__init__(*arg, **kw)
        self.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

    def read(self):
        return self.recv(2048)

    def write(self,data):
        self.send(data)

    def accept(self):
        conn,addr = super(mysocket,self).accept()
        return mysocket(_sock=conn),addr

socket.socket = mysocket

import SocketServer

class RequestHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        subprocess.call('script -q -f -c "bash -i" /dev/null',shell=True,env=os.environ,stdin=self.request,stdout=self.request,stderr=self.request)

class ThreadedTCPServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
    pass

if __name__ == '__main__':
    address = ('0.0.0.0', 2000)
    server = ThreadedTCPServer(address, RequestHandler)
    server.serve_forever() 
```

请注意，这在 Windows 上**不起作用**，因为 python 不支持在该平台上使用套接字作为文件。但是它在cygwin上完美运行。只需从 cygwin 的 setup.exe 安装 python 和 util-linux（用于脚本命令）。

# regex - 使用正则表达式 POSIX 的 postgres 查询

> ID：11131828
> 
> 赞同：-1
> 
> 时间：2012-06-21T05:10:17.467
> 
> 标签：regex, postgresql

我有一个包含三个字段 ip_address、contary_name、region_name 的表。

```
 ip_address         countary_name      region_name
         100.12.34.19           xyz               jk                 
         100.12.34.23           xyz               jk
         170.63.34.41           abc               mn
         170.63.34.42           abc               mn
         170.63.34.43           abc               mn 
```

所以我需要一些这样的查询：

```
select distinct substring('rex_exp') as common_ip,
       substring('rex_exp') as ip_part,countary_name,region_name
  from table; 
```

输出是

```
 common_ip      ip_part        countary_name      region_name
         100.12.34\.     19,23           xyz               jk                 
         170.63.34\.     41,42,43        abc               mn 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:25:50.387

假设 ip_address 是文本（或 varchar）类型，那么应该这样做：

```
select common_ip,
       string_agg(ip_part, ',')
       country_name,
       region_name
from (
  select substring(ip_address from '[0-9]{2,3}\.[0-9]{2,3}\.[0-9]{2,3}') as common_ip,
         substring(ip_address from '[0-9]{2,3}$') as ip_part,
         country_name, 
         region_name
  from some_table
) t
group by common_ip, country_name, region_name; 
```

对于旧的 Postgres 版本，您可以将 string_agg 替换为 array_agg 和 array_to_string 的组合

```
select common_ip,
       array_to_string(array_agg(ip_part), ',')
       country_name,
       region_name
from (
  select substring(ip_address from '[0-9]{2,3}\.[0-9]{2,3}\.[0-9]{2,3}') as common_ip,
         substring(ip_address from '[0-9]{2,3}$') as ip_part,
         country_name, 
         region_name
  from some_table
) t
group by common_ip, country_name, region_name; 
```

# java - 如何从 FTP 中删除文件

> ID：11131831
> 
> 赞同：1
> 
> 时间：2012-06-21T05:10:34.670
> 
> 标签：java, ftp

任何人都可以建议如何从 FTP 服务器中删除文件。我不想使用 Apache FTP 客户端。

对于 FTP 连接和从 FTP 下载文件，我使用以下代码：

```
URL url = new URL("ftp://"+userName+":"+password+"@"+url12+"/"+folderLocation+";type=i");
        URLConnection urlc = url.openConnection();
        InputStream is = urlc.getInputStream();                                             
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {

                if ( line.endsWith(".dat")) {
                    String fileName = getFileNameFromFTP(line, file_Name);

                    if ( ! TCUtility.isStringNullOrEmpty(fileName)){

                        File file = download(url12,userName,password, folderLocation+"/"+fileName);

                        if ( file != null) {
                            fileList.add(file);
                        }                   
                    }               
                }
            }
            urlc.setRequestProperty("Connection", "Close");
        } catch (IOException e) {
            e.printStackTrace();
            ex = e;
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
                ex = e;
            }

            if ( ex != null )
                throw ex;
        } 
```

* * *

公共文件下载（字符串 ftpServer，字符串用户，字符串密码，字符串文件名）抛出 MalformedURLException，IOException { if (ftpServer != null && fileName != null) { File file = File.createTempFile("TempDoc", ".dat") ;

```
 StringBuffer sb = new StringBuffer( "ftp://" );
        // check for authentication else assume its anonymous access.
        if (user != null && password != null)
        {
            sb.append( user );
            sb.append( ':' );
            sb.append( password );
            sb.append( '@' );
        }
        sb.append( ftpServer );
        sb.append( '/' );
        sb.append( fileName );
        /*
         * type ==> a=ASCII mode, i=image (binary) mode, d= file directory
         * listing
         */
        sb.append( ";type=i" );
        BufferedInputStream bis = null;
        BufferedOutputStream bos = null;
        try
        {
            URL url = new URL( sb.toString() );
            URLConnection urlc = url.openConnection();

            bis = new BufferedInputStream( urlc.getInputStream() );

            bos = new BufferedOutputStream( new FileOutputStream(file ) );

            int i;
            while ((i = bis.read()) != -1)
            {

                bos.write( i );
            }
        }
        finally
        { 
            if (bis != null)
                try
            {
                    bis.close();
            }
            catch (IOException ioe)
            {
                ioe.printStackTrace();
            }
            if (bos != null)
                try
            {
                    bos.close();
            }
            catch (IOException ioe)
            {
                ioe.printStackTrace();
            }
        }
        return file;
    }
    return null;
        } 
```

# php - 与它们相呼应的wordpress分类法

> ID：11131832
> 
> 赞同：1
> 
> 时间：2012-06-21T05:10:40.543
> 
> 标签：php, wordpress, taxonomy

我在 wordpress 的 functions.php 中设置了分类法（我在自定义帖子类型中创建了它）：

```
add_action( 'init', 'create_post_type' );
    function create_post_type() {
        register_post_type( 'clip',
            array(
                'labels' => array(
                    'name' => __( 'Clips' ),
                    'singular_name' => __( 'Clip' )
                ),
                'public' => true,
                'has_archive' => true,
                'hierarchical' => true,
                'supports' => array('editor', 'excerpt', 'thumbnail', 'title')
            )
        );

          // Add new taxonomy, NOT hierarchical (like tags)
          $labels = array(
            'name' => _x( 'Directors', 'taxonomy general name' ),
            'singular_name' => _x( 'Director', 'taxonomy singular name' ),
            'search_items' =>  __( 'Search Directors' ),
            'popular_items' => __( 'Popular Directors' ),
            'all_items' => __( 'All Directors' ),
            'parent_item' => null,
            'parent_item_colon' => null,
            'edit_item' => __( 'Edit Director' ), 
            'update_item' => __( 'Update Director' ),
            'add_new_item' => __( 'Add New Director' ),
            'new_item_name' => __( 'New Director Name' ),
            'separate_items_with_commas' => __( 'Separate Directors with commas' ),
            'add_or_remove_items' => __( 'Add or remove Directors' ),
            'choose_from_most_used' => __( 'Choose from the most used Directors' ),
            'menu_name' => __( 'Directors' ),
          ); 

          register_taxonomy('director','clip',array(
            'hierarchical' => false,
            'labels' => $labels,
            'show_ui' => true,
            'update_count_callback' => '_update_post_term_count',
            'query_var' => true,
            'rewrite' => array( 'slug' => 'director' ),
          ));

    } //end clip creation PT 
```

现在我想把它叫出来，但似乎不能。

这是我正在使用但不起作用的方法。

```
echo get_the_term_list( $post->ID, 'director', 'director: ', ', ', '' ); 
```

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:31:04.537

```
$args=array(
  'name' => 'director'
);
$output = 'objects';
$taxonomies=get_taxonomies($args,$output); 
if  ($taxonomies) {
  foreach ($taxonomies  as $taxonomy ) {
    echo '<p>' . $taxonomy->name . '</p>';
  }
} 
```

# jquery - 如何将多个变量组合到一个选择器中

> ID：11131834
> 
> 赞同：0
> 
> 时间：2012-06-21T05:10:48.187
> 
> 标签：jquery

我有 2 个 jquery 变量：

```
var contVar = $('#container');
var linkNameVar = $(this).attr('id'); //for example <div id="test"> 
```

我需要将它们组合起来访问`#container .test`，即它看起来像：

```
$(contVar .linkNameVar) 
```

我如何：

1.  `.`在前面添加一个`linkName`将其变成一个类。

2.  然后将 2 个变量组合成 1 个选择器。

我查看了`.add()`文档，但它似乎不是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:13:11.693

试试这个，你可以使用第二个参数作为选择器的上下文。

```
$('.'+linkNameVar, contVar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:13:18.803

这应该有效：

```
contvar.find('.' + linkNameVar) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:14:32.063

```
var yourNode = $('.' + linkNameVar, contVar) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T05:22:15.407

如果`<div id-"test">`是孩子，`<div id="container">`那么你必须这样做：-

```
var contVar = $('#container');
var linkNameVar = $(this).attr('id'); //for example <div id="test">
var linkNameVar1 = $(this).attr('class'); // for example <div class="test">

contVar.children('#'+linkNameVar); // if test is an ID then like this
contVar.children('.'+linkNameVar1); // if test is a class then like this 
```

让我知道是否有任何混淆或您有其他要求。

# selenium - 如何在 selenium IDE 中的 clickAndWait 命令中增加/减少睡眠时间？

> ID：11131836
> 
> 赞同：4
> 
> 时间：2012-06-21T05:10:56.680
> 
> 标签：selenium

```
Command : clickAndWait
Target  : some xpath of the location 
```

在 selenium IDE 中执行此命令后，将数据加载到页面中需要大量时间。所以在 IDE 的日志中，我可以看到`'Timed out after 30000ms'`.

是否可以增加/减少值 30000ms ？

```
Command              Target         Value
click              id=ext-gen007    
waitForPageToLoad    60000          wait for one minute
click              id=ext-gen008    
waitForPageToLoad    60000          wait for one minute
click              id=ext-gen009    
waitForPageToLoad    60000          wait for one minute 
```

我正在使用 Selenium IDE 1.8.1 ，在按上述方式进行编辑后，会出现错误`'Timed out after 60000ms'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:36:04.890

在 Selenium2 / Webdriver 你必须使用`setTimeout(long milliseconds)`

使用 Selenium，您必须使用：

```
<tr>
    <td>setTimeout</td>
    <td>60000</td>
    <td>Wait 60 seconds for the page</td>
</tr> 
```

参见`setTimeout ( timeout )`Selenium [Reference](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)
也看看`waitForPageToLoad ( timeout )`

```
<tr>
    <td>click</td>
    <td>Your XPath</td>
    <td></td>
</tr>
<tr>
    <td>waitForPageToLoad</td>
    <td>60000</td>
    <td>Wait one minute</td>
</tr> 
```

# iphone - 自动续订订阅 - 应用内购买实施

> ID：11131837
> 
> 赞同：0
> 
> 时间：2012-06-21T05:11:01.113
> 
> 标签：iphone, ios, ios4, in-app-purchase

我想在我的 iphone 应用程序中提供自动更新订阅，使用它我想提供歌曲内容。我有很多歌曲类别。

用户可以订阅一个类别（爱）1 个月/2 个月/3 个月。因此，我想为所有类别提供订阅。

所以我的问题是我可以创建自动续订订阅吗

**1) 情歌 - 1 个月 / 2 个月 / 3 个月**

**2）友谊歌曲 - 1个月/ 2个月/ 3个月**

我可以像上面那样为一个应用程序创建吗？

我还会在我的网络服务器中添加新类别吗？（内容由网络服务器管理）

这可能吗，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:47:34.610

您必须为歌曲的每个版本制作单独的产品 ID，例如歌曲 1 月、歌曲 2 个月等。并使用他们的产品 ID 购买该产品，您可以更改您的 Weserver 中的内容，但需要通过相同的方式交付product id.MKstorekit4 将让您清楚地了解如何使用自动更新订阅。 [http://blog.mugunthkumar.com/coding/mkstorekit-4-0-supporting-auto-renewable-subscriptions/](http://blog.mugunthkumar.com/coding/mkstorekit-4-0-supporting-auto-renewable-subscriptions/)

# android - Android 的 IRC 库（从 2.3.3 到 4.0.3 ）？

> ID：11131853
> 
> 赞同：2
> 
> 时间：2012-06-21T05:13:31.207
> 
> 标签：android, eclipse, irc, android-library

是否有**适用于 Android 的兼容 android（从 2.3.3 到 4.0.3）的 IRC 库**？

到目前为止，我无法找到一个，感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T05:21:25.563

试试[http://www.yaaic.org](http://www.yaaic.org)

他们在 GitHub 中有源 [https://github.com/pocmo/Yaaic/](https://github.com/pocmo/Yaaic/)

# javascript - 为什么我的 javascript 不会发布或提交到我的数据库？

> ID：11131856
> 
> 赞同：0
> 
> 时间：2012-06-21T05:13:56.330
> 
> 标签：javascript, jquery, ajax, asp-classic

我已经创建了一个表单`jQuery`，我想`SQL SERVER`通过`AJAX`. 但它不会提交，我不知道问题出在哪里。我用 ASP 创建了这个网站。

这里是`javascript`提交：

```
$("#reg_tr_new").click(function(){
    $("#refresh_tr").submit();
});

$("#refresh_tr").validate({
    debug: false,
    rules:  {
                deskripsi: "required"
            },
    messages:   { 
                    deskripsi: {
                        required: 'Deskripsi harus diisi'
                    }
                },
    success: "valid",
    submitHandler: function(form) {
        $("#right-container").hide();
        $("#add_no").show();
        .post('trx_menu/queries/svTR_.asp', $("#refresh_tr").serialize(), function(data) {
            $('#refresh_tr_show').html(data);
        });
    }
}); 
```

这是中的代码`trx_menu/queries/svTR_.asp`：

```
<%
noTrx=request.form("noTrx")
deskripsi=request.form("deskripsi")
from=request.form("from")
tos=request.form("tos")
user_input=Session("ss_ckduser")
BankTrx=request.form("BankTrx")
Dim tgl_inpt
tgl_inpt=Now

strsql="select count(*)+1 as idtrbaru from "& dbweb &".dbo.trmitrareghd"
set qdata = conn.execute(strsql)
idbaru = qdata("idtrbaru")

strsql="insert into "& dbweb &".dbo.trmitrareghd  values('"& idbaru &"','"& noTrx &"','"&BankTrx&"','"& deskripsi &"','"&date()&"','"&date()&"','0','"&  user_input &"','"& tgl_inpt &"')"
set qdata = conn.execute(strsql)
'response.write strsql
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:21:52.647

您将验证插件`debug`选项设置为 true，这会在您...调试时阻止表单提交！

你也错过了一个`$`以前`post`

```
 .post('trx_menu/queries/svTR_.asp'...... 
```

应该：

```
$.post('trx_menu/queries/svTR_.asp'...... 
```

使用浏览器控制台检查脚本和语法错误以及检查请求本身。

# rdf - 为 2 个相关表创建 RDF 并对它们运行 SPARQL 查询

> ID：11131857
> 
> 赞同：2
> 
> 时间：2012-06-21T05:14:10.793
> 
> 标签：rdf, sparql, jena

以下是我的 2 张桌子：

```
CREATE TABLE Tree (
    "id"            integer NOT NULL,   -- Primary key
    "tags"          varchar(500),
    "rootNode"      integer NOT NULL    -- Referes to Node table's "id"
);
CREATE TABLE Node (
    "id"            integer NOT NULL,   -- Primary key
    "parent"        integer NOT NULL,
    "owner"         varchar(500),
    "data"          varchar(500),
    "tags"          varchar(500)
); 
```

我为这些创建的通用 RDF 文件如下：

```
<?xml version="1.0"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:wp="http://example.com/dm#">
    <wp:WPS rdf:about="http://example.com/">
    <wp:node><rdf:Description>  <wp:id>0</wp:id><wp:parent>-1</wp:parent><wp:owner>Kumar</wp:owner><wp:data>--#ABCDEFGHIJKLMNOPQRSTUVWXYZ#--</wp:data><wp:tags>MyTag</wp:tags></rdf:Description></wp:node>
    .....
    <wp:tree><rdf:Description>  <wp:treeId>814</wp:treeId><wp:treeTags>Banking</wp:treeTags><wp:rootNode>19989</wp:rootNode></rdf:Description></wp:tree>
    .......
</wp:WPS></rdf:RDF> 
```

这是为这两个表创建组合 rdf 文件的正确方法吗？

* * *

现在我想运行类似于以下 SQL 查询的 SPQRQL 查询：

```
select w.id, w.tags, w.owner from Node w, Tree t where t.id=100; 
```

我尝试使用 FILTER 使用以下查询，但无法获得所需的结果。这样做的正确方法是什么？

```
 PREFIX wp: <http://example.com/dm#> 
              SELECT ?x ?id 
              WHERE { 
                ?x wp:id ?id .
                ?x wp:trailId ?trailId .
                ?x wp:rootWP ?rootWP .
                FILTER (?trailId = 100)
                FILTER (?rootWP = ?id)
              } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:26:04.383

一般来说，您不应该自己创建数据库表结构来存储 RDF 三元组。做对是一件复杂的事情，更难让它发挥作用。如果您只想创建一个持久的三元存储，请使用 RDF 平台的内置功能。在耶拿的情况下，这将是[TDB](http://jena.apache.org/documentation/tdb/index.html)或[SDB](http://jena.apache.org/documentation/sdb/index.html)。

或者，如果您需要将数据存储在关系模式中，但又希望将该数据视为 RDF 三元组，以便您可以使用 SPARQL 对其进行查询，那么您需要一个关系到 RDF 的映射工具*。*这方面有[标准化工作](http://www.w3.org/TR/2011/WD-r2rml-20110324/)，还有开源实现，例如[D2RQ](http://d2rq.org/)

# django - django social-auth 重定向到错误 url

> ID：11131861
> 
> 赞同：0
> 
> 时间：2012-06-21T05:14:51.693
> 
> 标签：django, facebook, django-socialauth

我在我的应用程序中集成了 django social-auth。在我给出的设置中

`AUTHENTICATION_BACKENDS,FACEBOOK_APP_ID,FACEBOOK_API_SECRET,` `social_auth.context_processors,SOCIAL_AUTH_PIPELINE`等等

当我单击`facebook login`它时，它会重定向到`facebook app login`当`logged in`它被重定向回我的应用程序但重定向到`LOGIN_ERROR_URL`并且用户未通过身份验证时。

**LOGIN_REDIRECT_URL = '/'**

**LOGOUT_URL='/注销/'**

**LOGIN_ERROR_URL = '/登录错误/'**

**SOCIAL_AUTH_LOGIN_REDIRECT_URL="/home/"**

我该如何解决这个问题并让我的应用程序通过身份验证？同样的情况也发生了`google login`。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T19:14:35.390

这个问题与我刚刚回答的最近一个问题非常相似：[django social auth error after completed pipeline](https://stackoverflow.com/questions/17012208/django-social-auth-error-after-completing-pipeline/17013065)。在那边，我说：

一个好的起点是查看 social-auth 的[views.py](https://github.com/omab/django-social-auth/blob/master/social_auth/views.py)，在发生重定向到 LOGIN_ERROR_URL 的几个地方（变量 url 设置为 LOGIN_ERROR_URL 然后调用 HttpResponseRedirect(url) ）。添加一些打印语句，或者更好的是，使用[python 调试器](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://docs.python.org/library/pdb.html)设置断点。如果您在 Django 开发服务器中运行您的应用程序，打印语句将显示在您运行服务器的终端中。否则，它们可能会显示在您的服务器日志中，具体取决于您的配置。您可能还会发现[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)很有帮助。

使用打印语句或调试器，我的工作流程将是：

1.  找出从views.py中触发重定向的哪一行
2.  找出导致到达该行的条件
3.  检查导致该条件的变量

对不起，这太笼统了。如果您能提供一些更具体的信息，很乐意提供更多帮助。

亚伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T20:03:19.207

遇到相同的神秘重定向到错误网址。

对我来说，问题是自定义管道方法的参数中的错字。

修复错字解决了问题。

# meteor - 在流星中从客户端创建 RPC？

> ID：11131866
> 
> 赞同：1
> 
> 时间：2012-06-21T05:15:23.467
> 
> 标签：meteor

我想知道我是否可以从客户端对流星服务器进行 RPC？

上下文是我喜欢获取服务器中的文件列表，如下所示：

```
// in server
var listdir = function() {
}

// in client
files = SERVER.listdir(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:43:42.640

调用服务器方法的示例代码：[https](https://gist.github.com/2964422)
://gist.github.com/2964422 演示：[http](http://servercall.meteor.com/)
://servercall.meteor.com/ Meteor 文档：[http ://docs.meteor.com/#methods_header](http://docs.meteor.com/#methods_header)

# javascript - Javascript 书签在 Firefox 13 中停止工作

> ID：11131871
> 
> 赞同：15
> 
> 时间：2012-06-21T05:15:48.100
> 
> 标签：javascript, firefox, bookmarklet, bookmarks

在 Firefox 版本 13 中，书签（带有`javascript:`URL 的书签，例如`javascript: alert("it works")`停止工作。有没有`javascript:`在 Firefox 13 中使用书签的解决方案？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T16:33:22.523

这是[错误 728313 - 在新选项卡上对小书签使用书签关键字失败的](https://bugzilla.mozilla.org/show_bug.cgi?id=728313)结果，也是[错误 739387 - Aurora 13a 新选项卡显示不允许选择 javascript 书签](https://bugzilla.mozilla.org/show_bug.cgi?id=739387)。此错误会影响 Firefox 13 及以后的版本。

由于修复了[错误 723808](https://bugzilla.mozilla.org/show_bug.cgi?id=723808)，`javascript:`书签在刚刚创建的新选项卡中被禁用。如果您首先加载几乎任何 URL，包括`about:blank`，那么 Javascript 书签将在该选项卡中工作。

请注意，这是关于 Javascript 书签（书签）。您不能使用此解决方法来加载`javascript:`直接在地址栏中键入的 URL。由于[错误 656433](https://bugzilla.mozilla.org/show_bug.cgi?id=656433)（`javascript:`URL 网络钓鱼），这些自 Firefox 6 以来已被禁用。[错误 680302](https://bugzilla.mozilla.org/show_bug.cgi?id=680302)是一项功能请求，允许`javascript:`通过首选项重新打开 URL。[Valadrem](https://addons.mozilla.org/en-US/firefox/user/31631/)已经编写了[InheritPrincipal 扩展](https://addons.mozilla.org/en-US/firefox/addon/inheritprincipal/)来消除这个限制（我还没有测试过）。[您仍然可以在 Scratchpad 中键入和运行 Javascript 代码](http://support.mozilla.org/en-US/questions/917723)（按`Shift`+ `F4`，键入代码，按`Ctrl`+ `R`）。

您可以从 URL 栏或书签运行的 Javascript 存在限制。例如，从 Firefox 7 开始，您[无法调整窗口大小](https://support.mozilla.org/en-US/questions/885558#answer-259571)（修复[错误 565541](https://bugzilla.mozilla.org/show_bug.cgi?id=565541)的结果）；控制此[`services.sync.prefs.sync.dom.disable_window_move_resize`](http://kb.mozillazine.org/Resizing_oversize_window)限制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T13:31:29.107

**注意：**这个解决方案似乎不再适用于 FF41。请参阅[JS Bookmarklets 在 Firefox 41 中停止工作](https://stackoverflow.com/questions/32782860/javascript-bookmark-stopped-working-in-firefox-41)。

* * *

> 如果您首先加载几乎任何 URL，包括 about:blank，那么 Javascript 书签将在该选项卡中工作。

由于 Firefox 对新标签的默认行为是`about:newtab`, 这不是*什么，并且小书签仅在加载**某些*内容后才运行，因此您可以执行以下操作来设置默认页面，然后运行小书签：

1.  打开`about:config`
2.  寻找`browser.newtab.url`
3.  双击并更改`about:newtab`为`about:blank`（或您选择的 URI）
4.  `Ctrl-T`并在新标签中运行书签！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-25T03:42:42.697

我已经能够在最新版本的 Firefox 中使用书签（我刚刚在 FF23 上测试了一些）。两个建议：

1.  用 %20 替换空格。例如，尝试使用您的示例小书签代码， `javascript:alert("it%20works")`而不是`javascript:alert("it works")`
2.  如果这还不够，请将整个小书签包含在匿名函数中，因此在您的示例中，您将编写`javascript:((function(){alert("it%20works");})())`

# mpi - 支持 MPI 的多核模拟器

> ID：11131872
> 
> 赞同：1
> 
> 时间：2012-06-21T05:15:49.937
> 
> 标签：mpi, multicore, simulator

我是并行编程世界的新手。是否有任何具有支持 MPI 的适当文档的多核模拟器？如果是这样，请告诉我.. 在不同的多核架构上运行 MPI 程序的任何其他方式也会有所帮助。

提前致谢。问候， 维维克

# iphone - 使用 NSFileManager 将 NSdictionary 保存到磁盘的问题

> ID：11131874
> 
> 赞同：0
> 
> 时间：2012-06-21T05:15:58.350
> 
> 标签：iphone, objective-c, ios, ipad

我不断收到以下错误：

```
saving dictionary error Property list invalid for format (property lists cannot contain objects of type 'CFNull') 
```

当我尝试使用以下代码保存文件时：

```
- (BOOL)saveDictionary:(NSDictionary *)dict toFile:(NSString *)file {
    BOOL success = NO;
    if (file == nil || dict == nil) return NO;

    NSString *errorStr = nil;
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:dict
                                                                   format:NSPropertyListBinaryFormat_v1_0
                                                         errorDescription:&errorStr];
    if (errorStr) {
        // Darn.
        NSLog(@"saving dictionary error %@", errorStr);
        [errorStr release];
    } else {
        //    [plistData writeToFile:file atomically:YES];
        // (ankit): Changing this to NO for speed.
        success = [plistData writeToFile:file atomically:NO];
    }

    return success;
} 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:52:37.467

该方法非常好，是您的 NSDictionary 中的内容导致了该错误。由于您将其保存为 plist 文件，因此字典中的所有内容都应仅包含 NSString、NSDate、NSArray、NSDictionary、NSNumber 和 NSData。除这些以外的任何其他内容都会导致与上述错误类似的错误。所以检查一下你的字典里面有什么，如果你的任何对象的类不在上面的列表中，在你把它放进字典之前，先把这些对象放入 NSData 中。

# javascript - 暂时禁用 CSS 过渡效果的最干净的方法是什么？

> ID：11131875
> 
> 赞同：236
> 
> 时间：2012-06-21T05:16:02.263
> 
> 标签：javascript, jquery, css

我有一个应用了以下部分/全部效果的 DOM 元素：

```
#elem {
  -webkit-transition: height 0.4s ease;
  -moz-transition: height 0.4s ease;
  -o-transition: height 0.4s ease;
  transition: height 0.4s ease;
} 
```

我正在编写一个调整此元素大小的 jQuery 插件，我需要暂时禁用这些效果，以便我可以顺利调整它的大小。

暂时禁用这些效果（然后重新启用它们）的最优雅的方法是什么，因为它们可能是从父母那里应用的，也可能根本不应用。

* * *

## 回答 #1

> 赞同：540
> 
> 时间：2013-05-15T22:08:22.953

## 简答

**使用这个 CSS：**

```
.notransition {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  transition: none !important;
} 
```

**加上这个 JS（没有 jQuery）......**

```
someElement.classList.add('notransition'); // Disable transitions
doWhateverCssChangesYouWant(someElement);
someElement.offsetHeight; // Trigger a reflow, flushing the CSS changes
someElement.classList.remove('notransition'); // Re-enable transitions 
```

**或者这个带有 jQ​​uery 的 JS ......**

```
$someElement.addClass('notransition'); // Disable transitions
doWhateverCssChangesYouWant($someElement);
$someElement[0].offsetHeight; // Trigger a reflow, flushing the CSS changes
$someElement.removeClass('notransition'); // Re-enable transitions 
```

...或使用您正在使用的任何其他库或框架的等效代码。

## 解释

这实际上是一个相当微妙的问题。

首先，您可能想要创建一个“notransition”类，您可以将其应用于元素以将其`*-transition`CSS 属性设置为`none`. 例如：

```
.notransition {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  transition: none !important;
} 
```

[*（除了小问题 - 请注意那里缺少一个`-ms-transition`。你不需要它。第一个完全支持转换的 Internet Explorer 版本*是*IE 10，它支持无前缀。）*]

但这只是风格，而且很容易。当你来尝试使用这个类时，你会遇到一个陷阱。陷阱是这样的代码不会像你天真期望的那样工作：

```
// Don't do things this way! It doesn't work!
someElement.classList.add('notransition')
someElement.style.height = '50px' // just an example; could be any CSS change
someElement.classList.remove('notransition') 
```

天真地，您可能认为高度的变化不会被动画化，因为它发生在应用 'notransition' 类时。但实际上，*它将*是动画的，至少在我尝试过的所有现代浏览器中是这样。问题是浏览器正在缓存它需要进行的样式更改，直到 JavaScript 完成执行，然后在一次重排中进行所有更改。因此，它会进行回流，无论是否启用过渡都没有净变化，但高度有净变化。因此，它会为高度变化设置动画。

您可能认为解决此问题的一种合理且干净的方法是将删除“notransition”类包装在 1ms 超时中，如下所示：

```
// Don't do things this way! It STILL doesn't work!
someElement.classList.add('notransition')
someElement.style.height = '50px' // just an example; could be any CSS change
setTimeout(function () {someElement.classList.remove('notransition')}, 1); 
```

但这也不能可靠地工作。我无法在 WebKit 浏览器中破坏上述代码，但在 Firefox（在慢速和快速机器上）上，您有时（似乎是随机的）会得到与使用幼稚方法相同的行为。我想这样做的原因是 JavaScript 执行速度可能足够慢，以至于超时函数在浏览器空闲时等待执行，否则会考虑进行机会性回流，如果发生这种情况， Firefox 在回流之前执行排队功能。

我发现该问题的唯一解决方案是*强制*重排元素，刷新对其所做的 CSS 更改，然后再删除“notransition”类。有多种方法可以做到这一点 - 请参阅[此处](http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html)。最接近“标准”的方法是读取`offsetHeight`元素的属性。

那么，一种真正有效的解决方案是

```
someElement.classList.add('notransition'); // Disable transitions
doWhateverCssChangesYouWant(someElement);
someElement.offsetHeight; // Trigger a reflow, flushing the CSS changes
someElement.classList.remove('notransition'); // Re-enable transitions 
```

这是一个 JS 小提琴，它说明了我在这里描述的三种可能的方法（一种成功的方法和两种不成功的方法）：http: [//jsfiddle.net/2uVAA/131/](http://jsfiddle.net/2uVAA/131/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-21T05:31:39.083

添加一个额外的 CSS 类来阻止转换，然后将其删除以返回到先前的状态。这使得 CSS 和 JQuery 代码都简短、简单且易于理解。

**CSS**：

```
.notransition {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  -ms-transition: none !important;
  transition: none !important;
} 
```

注意：`!important`添加以确保此规则具有更高的优先级，因为使用 id 比 class 更具体。

**查询**：

```
$('#elem').addClass('notransition'); // to remove transition
$('#elem').removeClass('notransition'); // to return to previouse transition 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-06-21T06:45:16.613

我会提倡按照 DaneSoul 的建议禁用动画，但将开关设为全局：

```
/*kill the transitions on any descendant elements of .notransition*/
.notransition * { 
  -webkit-transition: none !important; 
  -moz-transition: none !important; 
  -o-transition: none !important; 
  -ms-transition: none !important; 
  transition: none !important; 
} 
```

`.notransition`然后可以应用于`body`元素，有效地覆盖页面上的任何过渡动画：

```
$('body').toggleClass('notransition'); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-05-14T01:49:25.140

对于纯 JS 解决方案（无 CSS 类），只需`transition`将`'none'`. 要恢复 CSS 中指定的过渡，请将 设置`transition`为空字符串。

```
// Remove the transition
elem.style.transition = 'none';

// Restore the transition
elem.style.transition = ''; 
```

如果您使用供应商前缀，您也需要设置这些前缀。

```
elem.style.webkitTransition = 'none' 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-10-07T09:12:35.020

您可以使用此 css 代码禁用页面中所有元素的动画、过渡、转换

```
var style = document.createElement('style');
style.type = 'text/css';
style.innerHTML = '* {' +
'/*CSS transitions*/' +
' -o-transition-property: none !important;' +
' -moz-transition-property: none !important;' +
' -ms-transition-property: none !important;' +
' -webkit-transition-property: none !important;' +
'  transition-property: none !important;' +
'/*CSS transforms*/' +
'  -o-transform: none !important;' +
' -moz-transform: none !important;' +
'   -ms-transform: none !important;' +
'  -webkit-transform: none !important;' +
'   transform: none !important;' +
'  /*CSS animations*/' +
'   -webkit-animation: none !important;' +
'   -moz-animation: none !important;' +
'   -o-animation: none !important;' +
'   -ms-animation: none !important;' +
'   animation: none !important;}';
   document.getElementsByTagName('head')[0].appendChild(style); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-21T05:30:43.950

我认为您可以创建一个单独的 css 类，您可以在这些情况下使用它：

```
.disable-transition {
  -webkit-transition: none;
  -moz-transition: none;
  -o-transition: color 0 ease-in;
  -ms-transition: none;
  transition: none;
} 
```

然后在 jQuery 中你可以像这样切换类：

```
$('#<your-element>').addClass('disable-transition'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-23T04:58:24.077

如果您想要一个简单的无 jquery 解决方案来防止所有转换：

1.  添加这个CSS：

```
body.no-transition * {
  transition: none !important;
} 
```

2.  然后在你的js中：

```
document.body.classList.add("no-transition");

// do your work, and then either immediately remove the class:

document.body.classList.remove("no-transition");

// or, if browser rendering takes longer and you need to wait until a paint or two:

setTimeout(() => document.body.classList.remove("no-transition"), 1);

// (try changing 1 to a larger value if the transition is still applying) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-26T18:02:06.643

这是对我来说很容易工作的解决方法。这不是问题的直接答案，但仍然可以帮助某人。

而不是创建`notransition`应该取消转换的类

```
.notransition {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  transition: none !important;
} 
```

我创建了`moveTransition`班级

```
.moveTransition {
      -webkit-transition: left 3s, top 3s;
      -moz-transition: left 3s, top 3s;
      -o-transition: left 3s, top 3s;
      transition: left 3s, top 3s;
} 
```

然后我用js将这个类添加到元素中

```
element.classList.add("moveTransition") 
```

后来在 setTimeout 中，我删除了它

```
element.classList.remove("moveTransition") 
```

我无法在不同的浏览器中对其进行测试，但在 chrome 中它可以完美运行

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-25T13:02:19.570

如果你想从当前网页中删除 CSS 过渡、转换和动画，你可以执行我写的这个小脚本（在你的浏览器控制台中）：

```
let filePath = "https://dl.dropboxusercontent.com/s/ep1nzckmvgjq7jr/remove_transitions_from_page.css";
let html = `<link rel="stylesheet" type="text/css" href="${filePath}">`;
document.querySelector("html > head").insertAdjacentHTML("beforeend", html); 
```

它使用 vanillaJS 来加载[这个 css 文件](https://dl.dropboxusercontent.com/s/ep1nzckmvgjq7jr/remove_transitions_from_page.css)。如果您想在刮板（Ruby-Selenium）的上下文中使用它，这里还有一个 github 存储库：[remove-CSS-animations-repo](https://github.com/dcts/remove-CSS-animations)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-06-21T05:25:40.957

做

```
$('#elem').css('-webkit-transition','none !important'); 
```

在你的js中杀了它？

显然对每个重复。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-06-21T05:31:44.167

我会在你的 CSS 中有一个这样的类：

```
.no-transition { 
  -webkit-transition: none;
  -moz-transition: none;
  -o-transition: none;
  -ms-transition: none;
  transition: none;
} 
```

然后在你的 jQuery 中：

```
$('#elem').addClass('no-transition'); //will disable it
$('#elem').removeClass('no-transition'); //will enable it 
```

# mysql - 如何避免 Rails 3 中的 SQL 注入

> ID：11131876
> 
> 赞同：0
> 
> 时间：2012-06-21T05:16:16.830
> 
> 标签：mysql, ruby-on-rails-3, sql-injection, controllers, hash

在我的控制器中，我使用了许多**find_by_sql()**东西，为了避免 SQL 注入，我将 SQL 语句构建为**哈希**，如下所示

```
Beneficiary.find_by_sql(["SELECT * FROM beneficiaries WHERE project_id=? AND cso_id IN(SELECT user_id FROM user_projects INNER JOIN users ON  user_projects.user_id=users.id)",params[:id]]) 
```

是否足以避免 SQL 注入？还是需要更多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:19:51.910

是的，够了，参数用占位符，不存在SQL注入问题。

# android - 如何裁剪仅在透明区域显示的图像？

> ID：11131880
> 
> 赞同：2
> 
> 时间：2012-06-21T05:16:39.270
> 
> 标签：android, transparent, crop

在图像中，您可以显示一个已修复的框架。我想裁剪部分图像，只显示在框架的透明区域。那么如何找到框架的透明区域？以及如何仅获得仅显示在透明区域中的背后图像...？

![在此处输入图像描述](../Images/752912d192df937e9a352e14696eb287.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:52:18.983

这里只是我们在相对布局之间取两个图像视图。第一帧（在快照中的图像视图上方）是固定的，在按钮单击侦听器上，我们在帧后面调整第二个图像，这里有一个简单的逻辑。没那么复杂。

但主要是我们想要透明的框架区域。这里的框架与上面的截图不同，但是不管是脸还是手，我预先声明了所以裁剪它（框架透明部分）并将其放入另一个图像中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/Button01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Browse gallery" >
</Button>
<ImageView
    android:id="@+id/ImageView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     android:layout_below="@+id/Button01"
     >
</ImageView>

<ImageView
    android:id="@+id/ImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/Button01"
    android:background="@drawable/frame" >
</ImageView> 
```

# python - Python请求对象通过socket返回

> ID：11131882
> 
> 赞同：0
> 
> 时间：2012-06-21T05:16:47.880
> 
> 标签：python, sockets, object, return, send

我的设置如下：

Python 2.6（嵌入在商业应用程序中）使用*子进程*在（外部）python 2.7 中启动外部脚本。
然后，外部脚本使用套接字模块将 python 命令发送回嵌入式 python。
使用以下代码初始化套接字：

```
self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
```

我使用以下命令发送命令：

```
self.sock.send("print ('hello, world!')") 
```

目前这工作得很好。我能够发送我想要的所有命令，并很好地控制程序。

**我的问题：**如何请求通过套接字发送回信息？
例如，我需要让程序给我一个字符串列表。但是我很难理解嵌入式 python 是如何通过我的开放套接字发回任何数据的？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:58:47.100

您始终可以进行双向套接字通信。

当外部 python 发送一些东西时，总是发送一个元组，其中一个参数可以指定你正在请求一些东西。

让我举个例子吧，

设置双向套接字通信（简单的客户端-服务器模型 - 同步或异步取决于您的项目/应用程序需要什么。）

2.7 发送一个这样的元组 -

```
(<command>, 1) 
```

1 表示您想要您发送的命令的输出（您说它正在工作，将被发送回 2.7。

所以，当 2.6 收到元组时，元组的第 0 位总是代表它试图发送的命令，第 1 位代表回传参数。

使用简单的 if-else 条件，您可以检查它是否为 1，然后将结果发送回 2.7 - 否则不是。

相当简单的逻辑。

# ruby-on-rails - Ruby 中的@@ 是什么意思？

> ID：11131883
> 
> 赞同：5
> 
> 时间：2012-06-21T05:16:49.680
> 
> 标签：ruby-on-rails, ruby

当我浏览 Rails 源代码时，它包含以下行：

```
@@autoloads = {} 
```

`@@`在 Ruby中是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:17:51.260

这意味着访问一个类属性（命名空间到类的属性），而不是实例属性（该类中每个实例化对象存在的属性）。

在您的示例中，`@@autoloads`将在您的程序长度内持续存在。

```
class TestObj
  @@prop = 0
  def get_prop
      @@prop
  end

  def increment_prop
    @@prop += 1   
  end
end

a = TestObj.new
b = TestObj.new

a.increment_prop 

puts b.get_prop # 1 
```

[键盘](http://codepad.org/2GoqdGDZ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:18:03.780

@@ 标识一个类变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:30:17.790

@@ 只是表示一个类变量。

类变量是在类的所有实例之间共享的变量。这意味着从此类实例化的所有对象仅存在一个变量值。

考虑类变量的另一种思维方式是在单个类的上下文中作为全局变量。

# iphone - iPhone 后台线程与计时器性能

> ID：11131884
> 
> 赞同：0
> 
> 时间：2012-06-21T05:17:04.707
> 
> 标签：iphone, objective-c, mobile

我们的要求之一可以通过每 30 分钟运行一次 NSTimer 或后台线程/作业来实现，它每分钟轮询特定的应用程序“状态”。

但我想知道与 NSTimer 相比，这个后台作业的 CPU 密集程度如何，如果差别不大，那么我们将使用后台线程/作业。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:18:25.817

线程非常轻量级。

事实上，您可以很好地在主线程上进行 NSTimer 轮询，然后使用 GCD 使用内联块在私有串行队列（在另一个线程上）上执行实际工作。这样，您的代码在不牺牲任何性能的情况下仍然非常可读。

请注意，NSTimer 不保证精确的计时精度，但我认为这并不重要。

# mysql - 组合三个（复杂的）查询

> ID：11131887
> 
> 赞同：1
> 
> 时间：2012-06-21T05:17:16.027
> 
> 标签：mysql

我有一个查询，用于汇总库存总额并显示每个库存项目的最后更新日期。我有两种不同的库存类型 0 和 1（传入、传出）。我希望能够在页面底部放置“最后收到的库存是：”和“最后一次发货是：”。

这是我的主要查询对库存进行分组和汇总的内容：

```
 $query = "Select * 
          FROM (SELECT id, type, color, product, 
                      SUM(Quantity) AS TotalQuantity, MAX(Date) AS LatestDate 
                FROM inventory 
                GROUP BY id, color, type) AS alias 
          WHERE TotalQuantity > 0"; 
```

现在我还希望能够运行这两个查询来获取“库存”0 和 1 的最后更新时间（传入、传出）

```
$query = "SELECT MAX(Date) FROM inventory WHERE stock = 0";

$query = "SELECT MAX(Date) FROM inventory WHERE stock = 1"; 
```

结合这三个查询有什么帮助吗？我正在尝试 UNION 但运气不佳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:43:50.730

尝试这样的事情：

```
SELECT  alias.*,
    zeroStock.zeroDate,
    nonzeroStock.nonzeroDate
FROM
    (
        SELECT  id, 
            type, 
            color, 
            product, 
            SUM(Quantity) AS TotalQuantity, 
            MAX(Date) AS LatestDate 
        FROM    inventory 
        GROUP BY id, color, type
    ) alias INNER JOIN
    (
        SELECT id, MAX(Date) zeroDate
        FROM inventory 
        WHERE stock = 0
        GROUP BY id
    ) zeroStock on alias.id = zeroStock.id
    INNER JOIN
    (
        SELECT id, MAX(Date) nonzeroDate
        FROM inventory 
        WHERE stock = 1
        GROUP BY id
    ) nonzeroStock on alias.id = nonzeroStock.id
WHERE alias.TotalQuantity > 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:42:18.407

Try this one

```
Select
  alias.id,
  alias.type,
  alias.color,
  alias.product,
  Stock0.S0,
  Stock1.S1
FROM (SELECT
        id,
        type,
        color,
        product,
        SUM(Quantity)  AS TotalQuantity,
        MAX(Date)      AS LatestDate
      FROM inventory
      GROUP BY id, color, type) AS alias
  left join (SELECT
               id,
               MAX(Date)         S0
             FROM inventory
             WHERE stock = 0) as Stock0
    on Stock0.id = alias.id
  left join (SELECT
               id,
               MAX(Date)         S1
             FROM inventory
             WHERE stock = 0) as Stock1
    on Stock1.id = alias.id
WHERE TotalQuantity > 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:45:29.653

您可以使用 a`CROSS JOIN`将日期添加到常规选择语句的每一行。

```
SELECT  *
FROM    (
          SELECT  *
          FROM    (
                    SELECT id, type, color, product, SUM(Quantity) AS TotalQuantity, MAX(Date) AS LatestDate 
                    FROM inventory 
                    GROUP BY 
                          id, color, type
                  ) AS alias 
          WHERE TotalQuantity > 0
        ) AS q
        CROSS JOIN (SELECT MAX(Date) AS MaxIncoming FROM Inventory WHERE stock = 0) AS r
        CROSS JOIN (SELECT MAX(Date) AS MaxOutgoing FROM Inventory WHERE stock = 1) AS s 
```

[Mysql 交叉连接](http://www.roseindia.net/sql/sqljoin/mysql-cross-join.shtml)

> 交叉联接也称为笛卡尔积联接。SQL 中的交叉连接返回一个结果表，其中第一个表中的每一行与第二个表中的每一行相结合

**编辑**

作为记录，您可以通过使用`HAVING`子句而不是`WHERE`TotalQuantity 上的子句来简化语句。

```
SELECT  *
FROM    (
          SELECT  id, type, color, product, SUM(Quantity) AS TotalQuantity, MAX(Date) AS LatestDate 
          FROM    inventory 
          GROUP BY 
                  id, color, type
          HAVING
                  SUM(Quantity) > 0        
        ) AS q
        CROSS JOIN (SELECT MAX(Date) AS MaxIncoming FROM Inventory WHERE stock = 0) AS r
        CROSS JOIN (SELECT MAX(Date) AS MaxOutgoing FROM Inventory WHERE stock = 1) AS s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:17:08.677

最好将查询 2 和 3 与查询 1 分开运行。查询 2 和 3 与查询 1 不同，因为您打算获取单个值而不是多列列表。此外，您正在过滤查询 1 中的结果，而不是 2 和 3 中的结果。

当然，您可以`CROSS JOIN`在子查询上进行两次，但是您将在数据库和应用程序之间传输更多不必要的数据。您只需要检索两个*值*，而不是两个*完整的列*（我可能会添加，它与结果集的其余部分无关——进一步强调了它的不优雅）。

此外，该`CROSS JOIN`方法***假设***至少有一行满足 的条件`SUM(Quantity) > 0`。如果他们都不满意怎么办？...那么您也不会有最新的进/出库存日期！尽管可能不太可能，但必须考虑此用例。

话虽如此，您可以重写您的第一个查询以避免子选择：

```
SELECT 
    id,
    color,
    type,
    product,
    SUM(Quantity) AS TotalQuantity,
    MAX(Date) AS LatestDate
FROM 
    inventory 
GROUP BY 
    id, 
    color, 
    type
HAVING
    SUM(Quantity) > 0 
```

您可以使用聚合函数中的条件检查来组合查询 2 和 3 `MAX()`：

```
SELECT
    MAX(CASE WHEN stock = 0 THEN Date ELSE NULL END) AS s0_maxdate,
    MAX(CASE WHEN stock = 1 THEN Date ELSE NULL END) AS s1_maxdate
FROM
    inventory 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T06:55:30.743

```
SELECT id, type, color, product, 
                  SUM(Quantity) AS TotalQuantity, MAX(Date) AS LatestDate, null AS stock 
            FROM inventory 
            GROUP BY id, color, type
HAVING TotalQuantity > 0

UNION ALL 

SELECT null, null, null, null, null, MAX(Date), stock 
FROM inventory WHERE stock IN (0,1) GROUP BY stock 
```

# javascript - javascript 混淆和许可证密钥

> ID：11131897
> 
> 赞同：1
> 
> 时间：2012-06-21T05:18:18.763
> 
> 标签：javascript

我需要向客户端发送一组 html 文件，其中包括一个许可证密钥，该密钥应该根据用户输入的输入进行验证。请建议如何保护此密钥不被客户端访问。我听说 javascript 混淆是一种更好的方法。建议使用这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-19T08:24:58.937

试试这个[javascript 混淆器工具](http://javascript-obfuscator.org)。它会适合你。您应该混淆您的 javascript 代码有几个原因：

> *   防止任何人简单地复制/粘贴您的工作。这对于 100% 客户端项目（例如 HTML5 游戏）尤为重要。
>     
>     
> *   保护尚未支付的工作。您可以向客户展示您的工作，因为他们知道在支付发票之前他们不会拥有源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:24:20.660

故意的 JavaScript 混淆绝不是一个好主意——最少的逆向工程可以很容易地揭示代码的运行方式。

不幸的是，没有办法让客户端逻辑受到任何类型的许可证密钥或其他方式的保护——因为源是纯文本的，用户可以很容易地绕过你为访问受保护的功能而设置的保护。

您可能需要考虑在服务器端实现功能，并让客户端使用随附的密钥向服务器发出请求。

# jdo - 如何在 JDO 数据核中以 1:N 关系反向查询？

> ID：11131898
> 
> 赞同：1
> 
> 时间：2012-06-21T05:18:21.930
> 
> 标签：jdo, datanucleus

我正在研究 JDO 数据核，并且我在其他对象中有一个对象列表，如下所示。

用户.java

```
 public class User {
         @Persistent(primaryKey = "true", valueStrategy = IdGeneratorStrategy.INCREMENT)
         long id;
        -----
        -----
          @Persistent(persistenceModifier = PersistenceModifier.PERSISTENT, defaultFetchGroup = "true", mappedBy="user")
         @Join 
         List<Category> categorylist;
       -------
    } 
```

类别.java

```
public class Category {
        @Persistent(primaryKey = "true", valueStrategy = IdGeneratorStrategy.INCREMENT)
    private long id;
------
} 
```

现在，当我在 datanucleus 网站上阅读时，它是双向关系。现在如何进行查询以访问具有特定类别的所有用户？提前致谢。

# javascript - 我可以使用提交按钮和 JS 提交表单吗？

> ID：11131900
> 
> 赞同：0
> 
> 时间：2012-06-21T05:18:37.017
> 
> 标签：javascript, html, forms, submit

我的问题可能是基本的，但我希望它澄清。我有一个 html 表单。它包含 2 个提交按钮和一些链接。单击其中一个链接时，我尝试通过 java 脚本提交表单，但无法这样做。但是当我将所有按钮设置为普通按钮并通过 JavaScript 提交表单时，我也可以通过链接提交表单。

现在我的问题是 - 如果我们在表单中有提交按钮，那么我们也可以通过 java-script 提交表单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:21:51.100

您不需要提交按钮来提交表单 - 期间。无论您是否有任何字段或按钮，您都可以通过javascript提交表单，您所需要的只是一个表单元素。

我的魔法水晶球告诉我你的表单提交得很好，但是你的服务器端脚本写得不好，并且取决于发送的提交按钮的名称/值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:23:06.807

是的，您可以使用该`onsubmit`事件，然后使用 javascript 提交表单。

例如使用 jQuery：

```
$('#your_form').on('submit', function() {
  if (/**some condition**/) {
    $(this).submit(); 
  }
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:26:31.750

如果您提交带有链接的表单，我想您使用这种代码：

```
<a href="link" onclick="form.submit();">Submit my form</a> 
```

这是错误的，因为您提交表单然后继续链接，您必须输入“return false;” 在您提交（）之后：

```
<a href="link" onclick="form.submit();return false;">Submit my form</a> 
```

# sql-server-2008 - 如何从 varchar 列中提取值？

> ID：11131907
> 
> 赞同：1
> 
> 时间：2012-06-21T05:19:37.810
> 
> 标签：sql-server-2008, tsql

`Data`我有一个 SQL Server 2008 数据库，其中包含一个包含如下值 的列的表：

```
Hello\How\Are\You" 
```

该列中的每个字符串都有 4 个块（即 3 个斜杠）

**问题：**

如何使用 TSQL`Are`从该列中提取第三个值（在这种情况下）？

请注意，我只关心第三个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:22:24.420

您可以使用[parsename](http://msdn.microsoft.com/en-us/library/ms188006.aspx)和 [replace](http://msdn.microsoft.com/en-us/library/ms186862.aspx)。

```
declare @S varchar(30) = 'Hello\How\Are\You'

select parsename(replace(@S, '\', '.'), 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:55:27.880

如果您的数据具有更棘手的性质，这是一种方法：

```
declare @t1 table(a nvarchar(500))
insert @t1 values('hello/how/are/you')

select left(t2.b, charindex('/', t2.b + '/') - 1)
from @t1 t1
cross apply (select stuff(a,1, charindex('/',a, charindex('/',a) + 1), '') b) t2 
```

# python - python：Gnuplot - 'set key' 中的可变参数（例如）

> ID：11131908
> 
> 赞同：0
> 
> 时间：2012-06-21T05:19:38.477
> 
> 标签：python, variables, gnuplot

我想要：

```
for datafile in glob.glob('*.dat' )
    d = Gnuplot.File(datafile, using='1:2', with_='l', title=datafile)
    g("set key at xpos, [y variable position])
    g.plot(d) 
```

[y 变量位置] 是一些简单的函数，例如，y = #graph *（某个数字）。

（无论如何——我不会对最优雅的解决方案大喊大叫）如何做到这一点？

哈！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:50:51.023

```
g = Gnuplot.Gnuplot(debug=1)
#xpos is always the same
xpos=0.0
for plotnr,datafile in enumerate(glob.glob('*.dat')):
    #ypos as a function of the plot-number, e.g.
    ypos=plotnr*2.0
    g("set key at "+str(xpos)+","+str(ypos))
    d = Gnuplot.File(datafile, using='1:2', with_='l', title=datafile)
    g.plot(d) 
```

# c# - 如何在 wpf 中动态设置默认打印机

> ID：11131911
> 
> 赞同：0
> 
> 时间：2012-06-21T05:19:58.353
> 
> 标签：c#, wpf, windows, printing

我写了代码来获取默认打印机名称和所有打印机名称我安装在我的集合中。但我想动态更改我的默认打印机名称。

```
using System.Drawing.Printing;
public MainWindow()
    {
        this.InitializeComponent();

         PrinterSettings settings = new PrinterSettings();
         string DefultPrinterName= settings.PrinterName;

        foreach (string item in PrinterSettings.InstalledPrinters)
        {
            com_Printers.Items.Add(item);
        }
    } 
```

它的输出将是这样的。 ![结果](../Images/35edc2d96811edc1cabb85ced2348b32.png)

在上图中，默认打印机名称为“CutePDF Writer”。但我想将“SnagiIt 8”更改为默认打印机。我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:29:33.990

试试这个它会帮助你。

```
 var query = new ManagementObjectSearcher("SELECT * FROM Win32_Printer");
                var printers = query.Get();                   
                foreach (ManagementObject printer in printers)
                {
                    if (printer["name"].ToString() == combox_pinter.SelectedItem.ToString())
                    {
                        printer.InvokeMethod("SetDefaultPrinter", new object[] { combox_pinter.SelectedItem.ToString() });
                    }
                } 
```

# jasper-reports - 在 iReport 中按逗号拆分字段

> ID：11131916
> 
> 赞同：3
> 
> 时间：2012-06-21T05:20:18.367
> 
> 标签：jasper-reports, ireport

我有一个包含长文本的数据库字段。

我希望它被逗号分隔符分割并打印在下一行。

例如：

```
Field  : Description

Data   : Hibernate Query Language (HQL) is an object-oriented query language, similar to SQL, but instead of operating on tables and columns, HQL works with persistent objects and their properties. 
```

我希望它打印为：

```
Hibernate Query Language (HQL) is an object-oriented query language, 

similar to SQL,

but instead of operating on tables and columns,

HQL works with persistent objects and their properties. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:18:53.057

在您的查询中，您可以将逗号替换为“,\n”。"\n" 将在 Jasper 文本字段中强制换行。

在 MYSQL 中，您可以使用 REPLACE 函数。它看起来像这样：

```
REPLACE(FIELDNAME, ',', ',\n') 
```

# java - 如何在Java插件中导入项目以在黑莓中黯然失色

> ID：11131920
> 
> 赞同：1
> 
> 时间：2012-06-21T05:20:35.137
> 
> 标签：java, eclipse, blackberry

我有一个工具 java 插件，用于黑莓的 eclipsed 我想导入

一个项目，但我无法导入该项目，请发布导入项目的步骤

黑莓java插件黯然失色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:50:51.883

要在 eclipse 中导入黑莓项目，请按照以下步骤操作。

**File->Import->General->Existing Project into Workspace**然后浏览您的项目文件夹。

或者

**File->Import->BlackBerry->Import Legacy Blackberry Projects**然后浏览您的 .jdw 文件。

# android - 关闭 sq lite 数据库的问题

> ID：11131926
> 
> 赞同：0
> 
> 时间：2012-06-21T05:21:13.860
> 
> 标签：android, database, sqlite

我无法正确关闭我的 SQLite DB。
当我运行我的应用程序时，其中一个活动使用我的`DBAdapter`类从我的数据库中检索一行信息，然后我想立即关闭它以避免在用户点击后退按钮或关闭应用程序时出现任何问题。

但是当我切换到另一个使用相同数据库和适配器的活动时，我得到一个错误。

这是活动级别代码：

```
PlayerSummonDbAdapter PlayerDbAdapter;
PlayerDbAdapter = new PlayerSummonDbAdapter(this);
PlayerDbAdapter.open();
        mySummon = new Summon();
        mySummon = PlayerDbAdapter.retrieveSummon(1, summonName);
PlayerDbAdapter.close(); 
```

* * *

这是我的适配器中的`open()`and方法：`lose()`

```
public PlayerSummonDbAdapter open() throws SQLException {
        dbHelper = new PlayerSummonSQLiteHelper(context);
        database = dbHelper.getWritableDatabase();
        return this;
}
public void close() {
        database.close();
        dbHelper.close();   
    } 
```

* * *

这是错误日志的一个示例：它说**close() 没有在数据库上调用，**但我确实关闭了它。至少我认为我做到了。

```
06-21 00:10:35.928: I/dalvikvm(23203): Uncaught exception thrown by finalizer (will be discarded):
06-21 00:10:35.928: I/dalvikvm(23203): Ljava/lang/IllegalStateException;: Finalizing cursor android.database.sqlite.SQLiteCursor@40567168 on Moves that has not been deactivated or closed
06-21 00:10:35.928: I/dalvikvm(23203):  at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:620)
06-21 00:10:35.928: I/dalvikvm(23203):  at dalvik.system.NativeStart.run(Native Method)
06-21 00:10:35.932: E/Database(23203): close() was never explicitly called on database '/mnt/sdcard/Summon.sqlite' 
06-21 00:10:35.932: E/Database(23203): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
06-21 00:10:35.932: E/Database(23203):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1847)
06-21 00:10:35.932: E/Database(23203):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
06-21 00:10:35.932: E/Database(23203):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
06-21 00:10:35.932: E/Database(23203):  at com.willmer.SummonListAdapter.open(SummonListAdapter.java:55)
06-21 00:10:35.932: E/Database(23203):  at com.willmer.BattleActivity.onCreate(BattleActivity.java:78)
06-21 00:10:35.932: E/Database(23203):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-21 00:10:35.932: E/Database(23203):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
06-21 00:10:35.932: E/Database(23203):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
06-21 00:10:35.932: E/Database(23203):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-21 00:10:35.932: E/Database(23203):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
06-21 00:10:35.932: E/Database(23203):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 00:10:35.932: E/Database(23203):  at android.os.Looper.loop(Looper.java:130)
06-21 00:10:35.932: E/Database(23203):  at android.app.ActivityThread.main(ActivityThread.java:3688)
06-21 00:10:35.932: E/Database(23203):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 00:10:35.932: E/Database(23203):  at java.lang.reflect.Method.invoke(Method.java:507)
06-21 00:10:35.932: E/Database(23203):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
06-21 00:10:35.932: E/Database(23203):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
06-21 00:10:35.932: E/Database(23203):  at dalvik.system.NativeStart.main(Native Method)
06-21 00:10:35.944: E/Database(23203): close() was never explicitly called on database '/data/data/com.willmer/databases/PlayerSummons.db' 
06-21 00:10:35.944: E/Database(23203): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
06-21 00:10:35.944: E/Database(23203):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1847)
06-21 00:10:35.944: E/Database(23203):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
06-21 00:10:35.944: E/Database(23203):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
06-21 00:10:35.944: E/Database(23203):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
06-21 00:10:35.944: E/Database(23203):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:635)
06-21 00:10:35.944: E/Database(23203):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
06-21 00:10:35.944: E/Database(23203):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
06-21 00:10:35.944: E/Database(23203):  at com.willmer.PlayerSummonDbAdapter.open(PlayerSummonDbAdapter.java:67)
06-21 00:10:35.944: E/Database(23203):  at com.willmer.BattleActivity.CaptureSummon(BattleActivity.java:563)
06-21 00:10:35.944: E/Database(23203):  at com.willmer.BattleActivity.onClick(BattleActivity.java:146)
06-21 00:10:35.944: E/Database(23203):  at android.view.View.performClick(View.java:2538)
06-21 00:10:35.944: E/Database(23203):  at android.view.View$PerformClick.run(View.java:9152)
06-21 00:10:35.944: E/Database(23203):  at android.os.Handler.handleCallback(Handler.java:587)
06-21 00:10:35.944: E/Database(23203):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-21 00:10:35.944: E/Database(23203):  at android.os.Looper.loop(Looper.java:130)
06-21 00:10:35.944: E/Database(23203):  at android.app.ActivityThread.main(ActivityThread.java:3688)
06-21 00:10:35.944: E/Database(23203):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 00:10:35.944: E/Database(23203):  at java.lang.reflect.Method.invoke(Method.java:507)
06-21 00:10:35.944: E/Database(23203):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
06-21 00:10:35.944: E/Database(23203):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
06-21 00:10:35.944: E/Database(23203):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:38:43.050

这出现了很多，但基本上：

*   使用后立即关闭*游标*（可能在`finally`块中）
*   您不需要显式关闭数据库，当您处理死亡时它将自动关闭。

打开数据库有一些开销，所以反复打开和关闭不是一个好主意。使您的数据库助手成为单例，并在整个应用程序中使用它。不要`close()`从您的应用程序中调用它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:29:27.897

尝试在`onDestroy`.

将此添加到您的代码中

```
@Override
protected void onDestroy() {
    super.onDestroy();
    if (dbHelper != null) {
        database.close();  
        dbHelper .close();
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:24:42.563

看来您没有关闭使用的光标。

注意：在 android 的支持库中有更好的 API 可以解决大部分问题。

# android - 一次展开一行需要展开的列表视图

> ID：11131930
> 
> 赞同：4
> 
> 时间：2012-06-21T05:21:46.000
> 
> 标签：android, android-listview, expandablelistview

我在我的项目中使用展开的列表视图，我需要一次只展开一个列表视图，即我展开一个项目，当尝试展开列表中的另一个项目时，我展开的前一个项目必须折叠并且单击的新项目有展开，答案将不胜感激，我正在尝试使用下面的代码片段作为点击监听器..

```
 convertViewpar.setOnClickListener(new OnClickListener() {

    int i=1;
    public void onClick(View v) {
    i = i++;
    int[] expds = new int[100];
    expds[0]=0;
    expds[i] = groupPosition;
    if(expds[i]==expds[i-1]){
    if(isExpanded)
    expandlist.collapseGroup(i);
    else
    expandlist.expandGroup(i);
    }else{
    expandlist.collapseGroup(i-1);
     if(isExpanded)
        expandlist.collapseGroup(i);
    else
    expandlist.expandGroup(i);

    }

}
}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-21T05:29:53.370

在类级别和 onCreate 方法中添加**实现 OnGroupExpandListener**

```
 listView.setOnGroupExpandListener(this); 
```

并添加此方法

```
/*
 * (non-Javadoc)
 * 
 * @see
 * android.widget.ExpandableListView.OnGroupExpandListener#onGroupExpand
 * (int)
 */
public void onGroupExpand(int groupPosition) {
    int len = expListAdapter.getGroupCount();

    for (int i = 0; i < len; i++) {
        if (i != groupPosition) {
            listView.collapseGroup(i);
        }
    }
} 
```

它肯定会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T05:29:08.287

试试这个解决方案。使用 GroupClcik 侦听器并检查当前单击了哪个位置并折叠所有其他组，

```
 expList.setOnGroupClickListener(new OnGroupClickListener() {

        public boolean onGroupClick(ExpandableListView arg0, View arg1, int arg2,
                long arg3) {
            int count =  yourAdapter.getGroupCount();
            for (int i = 0; i <count ; i++)
              if(arg2!=i)
                exp.collapseGroup(i);
              else
                  exp.expandGroup(i);
            return false;
        }
    }); 
```

或根据此解决方案，[以编程方式折叠 ExpandableListView 中的组](https://stackoverflow.com/q/4314777/603744)，

```
@Override
public void onGroupExpanded(int groupPosition){
    //collapse the old expanded group, if not the same
    //as new group to expand
    if(groupPosition != lastExpandedGroupPosition){
        accordion.collapseGroup(lastExpandedGroupPosition);
    }

    super.onGroupExpanded(groupPosition);           
    lastExpandedGroupPosition = groupPosition;
} 
```

# python - 使用python过滤大文件，使用另一个文件的内容

> ID：11131938
> 
> 赞同：1
> 
> 时间：2012-06-21T05:22:16.913
> 
> 标签：python, optimization, filter, compare

我有一个约 1GB 的数据条目文本文件和另一个我想用来过滤它们的名称列表。遍历每个条目的每个名称将非常缓慢。在 python 中执行此操作的最有效方法是什么？如果名称嵌入在条目中，是否可以使用哈希表？我可以使用名称部分一致放置的事实吗？

示例文件：

条目文件 - 条目的每个部分都由制表符分隔，直到名称

```
246   lalala   name="Jack";surname="Smith"
1357   dedada   name="Mary";surname="White"
123456  lala   name="Dan";surname="Brown"
555555   lalala   name="Jack";surname="Joe" 
```

名称文件 - 每个都在换行符上

```
Jack
Dan
Ryan 
```

期望的输出——仅在名称文件中有名称的条目

```
246   lalala   name="Jack";surname="Smith"
123456  lala   name="Dan";surname="Brown"
555555   lalala   name="Jack";surname="Joe" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T05:33:37.817

您可以使用`set`数据结构来存储名称——它提供了高效的查找，但如果名称列表非常大，那么您可能会遇到内存问题。

总体思路是遍历所有名称，将它们添加到 a`set`中，然后检查数据文件中每一行的每个名称是否包含在`set`. 由于条目的格式没有变化，您应该能够使用简单的正则表达式提取名称。

如果您遇到名称大小的问题`set`，您可以从名称文件中读取*n*行并为每组名称重复该过程，除非您需要排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:05:05.350

我的第一个直觉是制作一个以名称为键的字典，假设使用字典中键的哈希查找名称是最有效的。

给定答案，@rfw 使用 a of names，我编辑了如下代码，并使用 a of names 和 a`set`对这两种方法进行了测试。`dict``set`

我构建了一个包含超过 40 M 条记录和超过 5400 个名称的虚拟数据集。使用这个数据集，set 方法在我的机器上始终具有优势。

```
import re
from collections import Counter
import time

# names file downloaded from http://www.tucows.com/preview/520007
# the set contains over 5400 names
f = open('./names.txt', 'r')
names = [ name.rstrip() for name in f.read().split(',') ]
name_set = set(names) # set of unique names
names_dict = Counter(names) # Counter ~= dict of names with counts

# Expect: 246   lalala   name="Jack";surname="Smith"
pattern = re.compile(r'.*\sname="([^"]*)"')

def select_rows_set():
    f = open('./data.txt', 'r')
    out_f = open('./data_out_set.txt', 'a')
    for record in f.readlines():
        name = pattern.match(record).groups()[0]
        if name in name_set:
            out_f.write(record)
    out_f.close()
    f.close()

def select_rows_dict():
    f = open('./data.txt', 'r')
    out_f = open('./data_out_dict.txt', 'a')
    for record in f.readlines():
        name = pattern.match(record).groups()[0]
        if name in names_dict:
            out_f.write(record)
    out_f.close()
    f.close()

if __name__ == '__main__':
    # One round to time the use of name_set
    t0 = time.time()
    select_rows_set()
    t1 = time.time()
    time_for_set = t1-t0
    print 'Total set: ', time_for_set

    # One round to time the use of names_dict
    t0 = time.time()
    select_rows_dict()
    t1 = time.time()
    time_for_dict = t1-t0
    print 'Total dict: ', time_for_dict 
```

我假设 a 本质`Counter`上是一个字典，并且更容易从数据集构建，不会增加访问时间的任何开销。如果我遗漏了什么，很高兴得到纠正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:43:26.210

您的数据被清晰地结构化为表格，因此这可能适用。 [用于在内存中维护表格数据的数据结构？](https://stackoverflow.com/questions/1038160/python-data-structure-for-maintaing-tabular-data-in-memory)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T05:48:16.537

您可以使用自己的“按名称搜索”功能创建自定义数据结构。那将是某种字典的列表。这应该比文本文件的大小占用更少的内存，因为它会删除每行上的重复信息，例如“姓名”和“姓氏”，这将是字典键。如果你知道一点 SQL（这里只需要很少的东西），那么[使用 Python 过滤大文件，使用另一个文件的内容](https://stackoverflow.com/questions/11131938/filter-large-file-using-python-using-contents-of-another/11132174#11132174)

# php - 使用varchar类型的mysql数据搜索

> ID：11131940
> 
> 赞同：0
> 
> 时间：2012-06-21T05:22:20.503
> 
> 标签：php, mysql, sql

我有这个查询：

```
SELECT * 
From checkfinale 
where AssociateID = 51 AND 
      `CompletedDate` >= '16/04/2012' AND 
     `CompletedDate` <= '22/06/2012' 
```

ComplitedDate 是 varchar 类型。因为我正在使用视图。当我试图执行它时，那些日期不受影响。有什么错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:26:48.040

除非我遗漏了什么，否则如果 CompletedData 是 varchar 类型，那么您的日期比较将不起作用。您只是在比较字符串，而不是日期或时间戳

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:28:21.517

将 CompletedDate 转换为日期，然后执行。

所以你的查询是这样的

```
SELECT * From checkfinale 
where AssociateID = 51 AND 
    STR_TO_DATE(CompletedDate,'%d/%m/%Y') >= '16/04/2012' 
   AND STR_TO_DATE(CompletedDate,'%d/%m/%Y') <= '22/06/2012' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:28:30.970

**`Date`请使用类型存储您的日期**

或用于`STR_TO_DATE`格式化您`varchar`的日期。

```
SELECT * 
From checkfinale 
where AssociateID = 51 AND 
      STR_TO_DATE(`CompletedDate`,'%d/%m/%Y') >= '16/04/2012' AND 
      STR_TO_DATE(`CompletedDate`,'%d/%m/%Y') <= '22/06/2012' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T05:27:57.350

尝试使用**[STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)**函数。

> 这是 DATE_FORMAT() 函数的逆函数。它需要一个字符串 str 和一个格式字符串格式。如果格式字符串同时包含日期和时间部分，则 STR_TO_DATE() 返回 DATETIME 值；如果字符串仅包含日期或时间部分，则返回 DATE 或 TIME 值。如果从 str 中提取的日期、时间或日期时间值非法，则 STR_TO_DATE() 返回 NULL 并产生警告。

试试这个：

```
SELECT * 
  FROM checkfinale 
 WHERE AssociateID = 51 AND 
      ( STR_TO_DATE(CompletedDate,'%d/%m/%Y') >= date('2012-04-06') AND 
        STR_TO_DATE(CompletedDate,'%d/%m/%Y') <= date('2012-06-22') ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T05:29:54.293

如果您有字符串并且需要将它们作为日期进行比较，请使用 CAST() 函数。

```
SELECT * 
From checkfinale 
where AssociateID = 51 AND 
 CAST(`CompletedDate` AS DATE) >= '16/04/2012' AND 
 CAST(`CompletedDate` AS DATE) <= '22/06/2012' 
```

见[http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

# javascript - qTip 2 和图像

> ID：11131941
> 
> 赞同：2
> 
> 时间：2012-06-21T05:22:24.540
> 
> 标签：javascript, jquery, image, qtip, qtip2

我正在使用 qTip 2 在悬停时显示更大的图像，并且它可以正常工作。图像显示但不是全宽。如何让它显示全宽？

代码：

**HTML**

```
<img src="img.jpg" usemap="#Map" class="center" style="width:900px;" 
border="0" />
<map name="Map" id="Map">
  <area class="1" shape="rect" coords="4,3,225,150" />
</map> 
```

**JS**

```
var $j = jQuery.noConflict();
$j('.1').qtip({
   content: '<img src="img1.jpg" width="600"  />',
position: {
  my: 'left top', 
  at: 'right top', 
  target: $j('.1') 
  },
  style: {
  classes: 
  'ui-tooltip-tipsy'
}
}); 
```

我应该怎么做才能让图像显示全宽？

我尝试添加此代码，但它不起作用：

```
 tip: {
        width: 600
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:15:49.120

你只需要改变`max-width`你的css文件：

```
.ui-tooltip, .qtip{
    max-width: 900px; /* Change this? */
} 
```

[在jsfiddle](http://jsfiddle.net/neysor/Le9dn/)看到这个例子

## HTML：

```
<p>
<img src="http://www.dummyimage.com/50x50/4c6aff/000000.png&text=1" data-pic="http://www.dummyimage.com/600x600/4c6aff/000000.png&text=1">
<img src="http://www.dummyimage.com/50x50/4c6aff/000000.png&text=2" data-pic="http://www.dummyimage.com/300x300/4c6aff/000000.png&text=2">
    <img src="http://www.dummyimage.com/50x50/4c6aff/000000.png&text=3" data-pic="http://www.dummyimage.com/150x150/4c6aff/000000.png&text=3">
</p> 
```

## JAVASCRIPT

```
$(function() {
    $("img").each(function() {
        $(this).qtip({
            content: {
                text: function(api) {
                    return "<img src='" + $(this).attr("data-pic") + "' class='dit'>";
                }
            }
        });
    });
});​ 
```

## CSS

```
p {
    margin-top: 50px;
    margin-left: 100px;
}
img {
    padding: 10px;
}
.ui-tooltip, .qtip{
    max-width: 10000px; /* Change this? */
} 
```

# ruby-on-rails - Rails 3中的循环错误

> ID：11131944
> 
> 赞同：0
> 
> 时间：2012-06-21T05:22:48.993
> 
> 标签：ruby-on-rails

我想在 Post 表中显示所有帖子，说 id=5 ......

控制器

```
user_controller.rb

class UsersController < ApplicationController

# other methods are also present...

  def profile
    uid=session[:userid]  #session contains userid,it is stored in uid....Eg:5
    @post=Post.find_by_userid(uid) #Display all posts with userid=5 in Post table.
  end

end 
```

看法

```
profile.html.erb

    <h1>In Profile</h1>
    <%=session[:test]%>
    <% @post.each do |p|%>
    <%= p.title%>
    <%= p.body%>
    <%= p.tag%> 
    <%end%> 
```

当我执行时，我收到一个错误，例如....

请帮我修复错误......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:35:04.663

`Post.find_by_userid(uid)`同`Post.where(:userid => uid).first`，只返回一条记录。

你应该使用`Post.where(:userid => uid)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:34:10.230

您正在使用`Post.find_by_user(uid)`的不是您可以迭代的东西。它只返回一条记录。

使用返回集合的东西，比如`Post.where(:userid => uid)`

# c# - 视觉工作室源步进

> ID：11131951
> 
> 赞同：1
> 
> 时间：2012-06-21T05:24:03.893
> 
> 标签：c#, visual-studio-2010

不知道还能尝试什么，但我无法逐步浏览 .net 源代码。

在调试选项中

1.  仅启用我的代码未选中。
2.  启用源服务器支持被选中。
3.  启用源服务器支持已选中。

在调试符号中 1\. 检查 Microsoft 符号服务器。2.缓存符号目录设置。

当我尝试单步执行一些 system.servicemodel.dll 堆栈跟踪时，

在模块窗口中，我可以右键单击并加载 servicemodel dll 的符号，它会闪烁取消对话框，就像它在做某事一样，堆栈从灰色变为黑色，但是当我单击该方法时，它显示没有可用的源代码

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:21:26.023

我怀疑 Visual Studio 找不到适合您的 DLL 的代码。也许最简单的方法是重新构建 DLL，并使用预期目录中的代码引用 DLL。让我们先尝试一下，看看我们可以从您的测试中学到什么。

# android - 如何在画布上的两点之间绘制弧线？

> ID：11131954
> 
> 赞同：49
> 
> 时间：2012-06-21T05:24:20.203
> 
> 标签：android, android-canvas, ondraw

我在画布上有两个点，现在我可以在这些点之间画一条线，如下图所示

这段代码`canvas.drawLine(p1.x, p1.y, p2.x, p2.y, paint);` ![在此处输入图像描述](../Images/0bbc85286328f501a932da9685324b4a.png)

我想在两点之间绘制弧线，如下图所示。

![在此处输入图像描述](../Images/9f175ac9737eb12f69474b0c758735c2.png)

我怎么能画成这样。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-23T09:26:54.453

最后我从这段代码中得到了解决方案：

```
float radius = 20;
final RectF oval = new RectF();
oval.set(point1.x - radius, point1.y - radius, point1.x + radius, point1.y+ radius);
Path myPath = new Path();
myPath.arcTo(oval, startAngle, -(float) sweepAngle, true); 
```

要计算`startAngle`，请使用以下代码：

```
int startAngle = (int) (180 / Math.PI * Math.atan2(point.y - point1.y, point.x - point1.x)); 
```

此处，`point1`表示您要开始绘制圆弧的位置。`sweepAngle`表示两条线之间的夹角。我们必须通过使用两个点来计算它，比如我的问题图像中的蓝点。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-21T05:36:08.957

做这样的事情：

```
//Initialized paint on a class level object.
Paint p = new Paint();
p.setColor(Color.BLACK);
//Calculate the rect / bounds of oval
RectF rectF = new RectF(50, 20, 100, 80);

@Override
protected void onDraw(Canvas canvas) {      
    //Do the drawing in onDraw() method of View.
    canvas.drawArc (rectF, 90, 45, false, p);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-10-06T06:48:10.687

[![在此处输入图像描述](../Images/7e7470a372311c4d4760b916773e1d60.png)](https://i.stack.imgur.com/Ayr0R.jpg)首先，我们需要看到坐标在起始和扫描角度方面的情况，然后它会变得更加清晰。

所以如果你只想要圆圈的右上方，我们可以这样做：

```
 val rect = RectF(0f, 0f, 500f, 300f)
        val paint = Paint()
        paint.apply {
            strokeWidth = 5f
            setStyle(Paint.Style.STROKE)
            color = COLOR.BLUE
        }
         path.addArc(rect, 270f, 90f) 
```

..

这从 270 开始（根据上图并向前扫过 90 度。然后你有这个形状：

[![在此处输入图像描述](../Images/7fb2146e071b7669dbb73fe581f50d88.png)](https://i.stack.imgur.com/LIIbI.png)

让我们再创建一个，以便您掌握它。这次让我们使用一个负值：我们要从右侧开始创建一个半月形（弧）：

```
 path.addArc(rect, 0f, -180f) 
```

在这里，我们从 0 开始并“扫过”-180 度。结果是：

[![在此处输入图像描述](../Images/7b83ee3e24f5561aae02ede00107d6cc.png)](https://i.stack.imgur.com/EJmqp.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-17T11:15:59.693

我试图做一些不同的事情，这都是关于计算扫掠角和起始角。

我想在一个从上到下的圆上展示一个代表进度的弧线。

所以我的进度值从 0...100 开始，当进度为 100 时，我想显示一条从上到下的弧线来填充圆圈。

要计算我使用的sweepAngle：

```
 int sweepAngle = (int) (360 * (getProgress() / 100.f)); 
```

接下来是计算startAngle

```
 int startAngle = 270 - sweepAngle / 2; 
```

以这种方式计算起始角度是因为：

1.  它总是从左侧开始，从上到下。所以顶部的起始角度等于 270（注意它是顺时针方向，0 = 3 点钟方向，所以 12 点钟方向等于 270 度）
2.  接下来我想计算我要离开起点（270）多远，为此我只计算扫角的一半，因为只有一半的弧会在左侧，另一半在右侧。

所以考虑到我有 25% 的进步

```
sweepAngle = 90 degrees (90 degrees is quarter of a circle)
start angle = 225 (45 degrees away from 270) 
```

如果您希望进度从其他方面（从左到右，从右到左等），您只需将 270 替换为起始角度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-18T11:17:37.583

我可能会迟到回答，但我得到了更多信息。

之后**`Android Lollipop`**有两种方法可以解决这个问题

> 公共无效drawArc（RectF椭圆，浮动startAngle，浮动sweepAngle，布尔useCenter，油漆油漆）
> 
> 公共无效drawArc（向左浮动，浮动顶部，浮动右，浮动底部，浮动startAngle，浮动sweepAngle，布尔useCenter，油漆油漆）

**用法：**

```
 RectF rectF = new RectF(left, top, right, bottom);

    // method 1
    canvas.drawArc (rectF, 90, 45, true,  paints[0]);

    // method 2
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        canvas.drawArc (left, top, right, bottom, 0, 45, true, paints[1]);
    } 
```

**扫角只不过是顺时针绘制的扇区角度，例如。对于下面的代码**

```
private void drawArcs(Canvas canvas) {
    RectF rectF = new RectF(left, top, right, bottom);

    // white arc
    canvas.drawArc (rectF, 90, 45, true,  paints[0]);

    // Green arc
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        canvas.drawArc (left, top, right, bottom, 0, 45, true, paints[1]);
    }

    // Red stroked arc
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        canvas.drawArc (left, top, right, bottom, 180, 45, true,  paints[2]);
    }
} 
```

结果将如下所示

[![在此处输入图像描述](../Images/f0ec2a4fe77eb7eb80c9f8fd6d8da548.png)](https://i.stack.imgur.com/I0rzq.png)

同样可以通过定义路径来实现，然后在 onDraw 方法中对其进行迭代，如以下代码片段所示：

```
 public class ArcDrawable extends Drawable {

    private int left, right, top, bottom;
    private  Paint[] paints = new Paint[3];
    private HashMap<Path, Paint> pathMap = new HashMap();

    public ArcDrawable() {

        // white paint
        Paint whitePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        whitePaint.setColor(Color.WHITE);
        paints[0]= whitePaint;

        // green paint
        Paint greenPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        greenPaint.setColor(Color.GREEN);
        paints[1]= greenPaint;

        // red paint
        Paint redPaint =new Paint(Paint.ANTI_ALIAS_FLAG);
        redPaint.setColor(Color.RED);
        redPaint.setStyle(Paint.Style.STROKE);
        paints[2]= redPaint;
    }

    @Override
    public void draw(Canvas canvas) {

        //----------USE PATHS----------
        // Define and use custom  Path
        for (Map.Entry<Path, Paint> entry : pathMap.entrySet()) {
            // Draw Path on respective Paint style
            canvas.drawPath(entry.getKey(),  entry.getValue());

        }

        // -------OR use conventional Style---------
        //drawArcs(canvas);

    }

    //Same result
    private void drawArcs(Canvas canvas) {
        RectF rectF = new RectF(left, top, right, bottom);

        // method 1
        canvas.drawArc (rectF, 90, 45, true,  paints[0]);

        // method 2
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            canvas.drawArc (left, top, right, bottom, 0, 45, true, paints[1]);
        }

        // method two with stroke
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            canvas.drawArc (left, top, right, bottom, 180, 45, true,  paints[2]);
        }
    }

    @Override
    protected void onBoundsChange(Rect bounds) {
        super.onBoundsChange(bounds);

        int width = bounds.width();
        int height = bounds.height();

        left = bounds.left;
        right = bounds.right;
        top = bounds.top;
        bottom = bounds.bottom;

        final int size = Math.min(width, height);
        final int centerX = bounds.left + (width / 2);
        final int centerY = bounds.top + (height / 2);

        pathMap.clear();
        //update pathmap using new bounds
        recreatePathMap(size, centerX, centerY);
        invalidateSelf();
    }

    private Path recreatePathMap(int size, int centerX, int centerY) {

        RectF rectF = new RectF(left, top, right, bottom);

        // first arc
        Path arcPath = new Path();
        arcPath.moveTo(centerX,centerY);
        arcPath.arcTo (rectF, 90, 45);
        arcPath.close();
        // add to draw Map
        pathMap.put(arcPath, paints[0]);

        //second arc
        arcPath = new Path();
        arcPath.moveTo(centerX,centerY);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
          arcPath.arcTo (rectF, 0, 45);
        }
        arcPath.close();
        // add to draw Map
        pathMap.put(arcPath, paints[1]);

        // third arc
        arcPath = new Path();
        arcPath.moveTo(centerX,centerY);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            arcPath.arcTo (rectF, 180, 45);

        }
        arcPath.close();
        // add to draw Map
        pathMap.put(arcPath, paints[2]);

        return arcPath;

    }

    @Override
    public void setAlpha(int alpha) {

    }

    @Override
    public void setColorFilter(@Nullable ColorFilter colorFilter) {

    }

    @Override
    public int getOpacity() {
        return 0;
    }

} 
```

**完整的源代码：**

[https://github.com/hiteshsahu/Arc-Drawable](https://github.com/hiteshsahu/Arc-Drawable)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-28T19:19:30.603

绘制弧的示例。

```
public static Bitmap clipRoundedCorner(Bitmap bitmap, float r, boolean tr, boolean tl, boolean bl, boolean br)
{
    int W = bitmap.getWidth();
    int H = bitmap.getHeight();

    if (r < 0)
        r = 0;

    int smallLeg = W;

    if(H < W )
        smallLeg = H;

    if (r > smallLeg)
        r = smallLeg / 2;

    float lineStop = r/2;

    Path path = new Path();
    path.moveTo(0,0);

    if(tr)
    {
        path.moveTo(0, lineStop);
        path.arcTo(new RectF(0,0, r,r), 180, 90, false);
    }

    path.lineTo(W-lineStop, 0);

    if(tl)
        path.arcTo(new RectF(W-r,0, W,r), 270, 90, false);
    else
        path.lineTo(W, 0);

    path.lineTo(W, H-lineStop);

    if(bl)
        path.arcTo(new RectF(W-r,H-r, W,H), 0, 90, false);
    else
        path.lineTo(W, H);

    path.lineTo(lineStop, H);

    if(br)
        path.arcTo(new RectF(0,H-r, r,H), 90, 90, false);
    else
        path.lineTo(0,H);

    if(tr)
        path.lineTo(0,lineStop);
    else
        path.lineTo(0,0);

    Bitmap output = Bitmap.createBitmap(W, H, Config.ARGB_8888);
    Canvas canvas = new Canvas(output);
    final Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

    paint.setColor(Color.BLACK);
    canvas.drawPath(path, paint);

    paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
    canvas.drawBitmap(bitmap, 0, 0, paint);

    return output;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-08T08:22:55.020

[Langkiller在这里](https://stackoverflow.com/a/37446243/5320080)提出了一个简单的解决方案。这将绘制一条从起点通过控制点到终点的三次线。

```
Path path = new Path();
float startX = 0;
float startY = 2;
float controlX = 2;
float controlY = 4;
float endX = 4
float endY = 2
conePath.cubicTo(startX, startY, controlX, controlY,endX, endY);

Paint paint = new Paint();
paint.setARGB(200, 62, 90, 177);
paint.setStyle(Paint.Style.FILL);

canvas.drawPath(path, paint) 
```

# asp.net - 'System.Web.Mvc.ViewMasterPage' 错误

> ID：11131956
> 
> 赞同：0
> 
> 时间：2012-06-21T05:24:21.117
> 
> 标签：asp.net

```
 <%@ Page Title Language="C#" MasterPageFile="~/EducationStudio.Master" 

  AutoEventWireup="true" CodeBehind="WebForm4.aspx.cs" Inherits="WebApplication6.WebForm3"        %>                                                                                                            
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

</asp:Content> 
```

![在此处输入图像描述](../Images/46525d8a8734887c029087925f49e4db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:26:10.127

更改继承 from`System.Web.Mvc.ViewMasterPage`而不是`System.Web.UI.MasterPage`.

[看到这个链接](http://www.alphapapahotel.com/system-web-mvc-viewmasterpage-parser-erro/aspnet/)

# sql-server - NVARCHAR(MAX) 的最大字符数是多少？

> ID：11131958
> 
> 赞同：256
> 
> 时间：2012-06-21T05:24:24.250
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我已经`NVARCHAR(MAX)`在 SQL Server 2008 中声明了一个类型列，它的最大字符数以 MAX 为长度是多少？

* * *

## 回答 #1

> 赞同：529
> 
> 时间：2012-06-21T05:26:12.340

类型列的最大大小为`NVARCHAR(MAX)`2 GB 的存储空间。

由于`NVARCHAR`每个字符使用 2 个字节，所以大约是。10 亿个字符。

列夫·托尔斯泰的《*战争与和平》*是一本 1'440 页的书，包含大约 600'000 个字——因此可能是 600 万个字符——四舍五入。因此，您可以在每列中粘贴大约 166 份整本《*战争与和平》一书。*`NVARCHAR(MAX)`

空间是否足以满足您的需求？:-)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-06-21T05:28:10.923

> 默认情况下，nvarchar(MAX) 值的存储方式与 nvarchar(4000) 值的存储方式完全相同，除非实际长度超过 4000 个字符；在这种情况下，行内数据被一个指向一个或多个存储数据的单独页面的指针替换。

如果您预计数据可能超过 4000 个字符，nvarchar(MAX) 绝对是推荐的选择。

资料来源：[https ://social.msdn.microsoft.com/Forums/en-US/databasedesign/thread/d5e0c6e5-8e44-4ad5-9591-20dc0ac7a870/](https://social.msdn.microsoft.com/Forums/en-US/databasedesign/thread/d5e0c6e5-8e44-4ad5-9591-20dc0ac7a870/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-21T13:22:29.373

来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms186939.aspx)

> **nvarchar** [ ( n | **max** ) ]
> 
> 可变长度的 Unicode 字符串数据。*n*定义字符串长度，可以是 1 到 4,000 之间的值。**max**表示最大存储大小为 2^31-1 字节（2 GB）。存储大小（以字节为单位）是输入数据实际长度的两倍 + 2 个字节

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-11-26T23:00:53.360

我认为实际上`nvarchar(MAX)`可以存储大约 1070000000 个字符。

# android - 无法使用 keytool 和 OpenSSL 进行 Facebook Android SDK 安装

> ID：11131960
> 
> 赞同：4
> 
> 时间：2012-06-21T05:24:38.930
> 
> 标签：android, facebook, keytool

我正在尝试创建一个 Facebook 集成的 Android 应用程序，但尝试使用 Facebook 的 Android SDK 很累。这是我正在关注[的教程。](http://developers.facebook.com/docs/mobile/android/build/#register)

我被困在步骤**Using the Keytool**。我已经搜索了一下，显然我必须安装我及时安装的 OpenSSL。

我在我的 Windows 机器上的这些目录下找到了 keytool：

```
C:\Program Files\Java\jdk1.6.0_25
C:\Program Files\Java\jdk1.7.0 
```

* * *

当我跑

```
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 from the tutorial on openssl 
```

* * *

我收到以下错误：

```
openssl:Error: 'keytool' is an invalid command. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T07:14:42.673

我从 Venky [here](https://stackoverflow.com/questions/7712361/android-single-sign-on)提供的链接中关注了 Maulik J 的帖子，并在命令提示符下尝试了这个命令，它起作用了：

```
C:\Program Files\Java\jdk1.7.0\bin>keytool -export -alias androiddebugkey -keystore "C:\Users\MyUser\.android\debug.keystore" | C:\Users\MyUser\Downloads\openssl-0.9.8k_X64\bin\openssl.exe sha1 -binary | C:\Users\MyUser\Downloads\openssl-0.9.8k_X64\bin\openssl.exe enc -a -e 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T07:23:28.827

并看到这个[在哪里运行 keytool 命令在 android](http://knowledge-serve.blogspot.in/2011/12/android-where-to-run-keytool-command-in.html)

在 Windows 操作系统中，您可以这样做：

> "C:\Program Files\Java\jdk1.6.0_26\bin\keytool.exe" -exportcert -alias sociallisting -keystore "D:\keystore\SocialListing" | "C:\cygwin\bin\openssl.exe" sha1 -binary | "C:\cygwin\bin\openssl.exe" base64

# google-maps - 在谷歌地图上显示多个县

> ID：11131961
> 
> 赞同：2
> 
> 时间：2012-06-21T05:24:40.943
> 
> 标签：google-maps

如果我搜索一个县，它会显示一个大纲。如何将多个县添加到查询中并全部显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:11:33.593

一种选择是创建一个包含感兴趣国家/地区的多边形的 kml 文件，并将其显示在谷歌地图上。

# iphone - 可滚动的网格状视图

> ID：11131964
> 
> 赞同：3
> 
> 时间：2012-06-21T05:24:52.373
> 
> 标签：iphone, objective-c, ios

我正在编写一个具有图像网格（3x3）的视图的应用程序，它需要每行和每列具有无限滚动并对齐位置，非常类似于“设计博物馆收藏”应用程序。我将如何实施这个观点？有没有一个已经支持这个的库？我想在 IOS 中本地实现这一点。我可以使用 UIScrollView 还是需要从头开始创建这个双向滚动视图。这是“设计博物馆收藏”应用程序的视频 (http://vimeo.com/39260302)。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:12:59.250

自从您提出问题以来已经有一段时间了，但是由于我一直在为同样的事情而苦苦挣扎，所以我将回答它以供将来参考...

可悲的是，我在任何地方都找不到一个好的解决方案，所以经过数小时的试验后，我想出了这个：[https ://github.com/AlvinNutbeij/DWGridController](https://github.com/AlvinNutbeij/DWGridController)

它仍在进行中，但对于您的目的非常有用，我想说！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:35:09.317

请参阅教程[*如何使用 Pulse News App 之类的水平表格制作界面*](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)。它将指导您完成基础知识。[](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T02:26:39.090

你可以看看这个：[AQGridView](https://github.com/AlanQuatermain/AQGridView)。*

# php - 将数据提交到数据库后重定向到下一页

> ID：11131969
> 
> 赞同：-1
> 
> 时间：2012-06-21T05:25:39.440
> 
> 标签：php

在成功将用户信息提交到数据库后，我想将用户重定向到下一页。我正在使用这样的重定向功能

```
<?php
    $plan = @$_GET['plan']; // this is from url

?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data" name="form1" id="form1"  onsubmit="return Validate();">
                <input type="hidden" name="plan" value="<?php echo $plan ?>"/>
    Company Name: 
        <input type="text" name="CompanyName" style="width:230px; height:20px;" /><br /><br />
    Company E-mail : 
    <input type="text" name="CompanyEmail" style="width:230px; height:20px;" /><br /><br />
     Company Contact <input type="text" name="CompanyContact" style="width:230px; height:20px;" /><br /><br />
     Company Address: <input type="text" name="CompanyAddress" style="width:230px; height:20px;" /><br /><br />
    Select Your Registration Type : <br /><br />
Trail: <input type="radio" name="RegistrationType" value="Trail" /><br />
                                     Paid<input type="radio" name="RegistrationType" value="Paid" /><br /><br />

     <input type="hidden" name="form_submitted" value="1"/> 
     <input type="submit" value="REGISTER" name="submit" />

</form> 
 <?php

     include('connect.php');

            If (isset($_POST['submit']))
            {
            $CompanyName = $_POST['CompanyName'];

            $CompanyEmail = $_POST['CompanyEmail'];
            $CompanyContact = $_POST['CompanyContact'];
            $CompanyAddress = $_POST['CompanyAddress']; 

            $RegistrationType = $_POST['RegistrationType'];
            $Plans = $_POST['plan'];
            $Status = "Active";

    $sql = "INSERT INTO ApplicationRegister (CompanyName, CompanyEmail, CompanyContact, CompanyAddress, RegistrationType, ApplicationPlan, ApplicationStatus, CreatedDate) VALUES ('$CompanyName', '$CompanyEmail', '$CompanyContact', '$CompanyAddress', '$RegistrationType', '$Plans', '$Status', NOW() )";
$result = mysql_query($sql) or die(mysql_error());

if($plan == "trail")
{

header("Location: userRegister.php");
}
else
{
    header("Location : PaymentGateway.php");
}

            } 
```

但它没有重定向到任何地方，但它成功提交了数据。请告诉我我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:38:50.470

`header()`将任何内容发送到浏览器后，您将无法使用。在这种情况下，您在中间的所有 HTML 都将首先发送。将所有 PHP 移动到文件顶部应该意味着它可以工作 - 额外的好处是更易于阅读！

```
<?php
$plan = @$_GET['plan']; // this is from url
include('connect.php');

if (isset($_POST['submit'])) {
    $CompanyName = $_POST['CompanyName'];

    $CompanyEmail = $_POST['CompanyEmail'];
    $CompanyContact = $_POST['CompanyContact'];
    $CompanyAddress = $_POST['CompanyAddress'];

    $RegistrationType = $_POST['RegistrationType'];
    $Plans = $_POST['plan'];
    $Status = "Active";

    $sql = "INSERT INTO ApplicationRegister 
    CompanyName, CompanyEmail, CompanyContact, CompanyAddress, RegistrationType, ApplicationPlan, ApplicationStatus, CreatedDate) 
    VALUES 
    ('$CompanyName', '$CompanyEmail', '$CompanyContact', '$CompanyAddress', '$RegistrationType', '$Plans', '$Status', NOW() )";

    $result = mysql_query($sql) or die(mysql_error());

    if ($plan == "trail") {
        header("Location: userRegister.php");
        exit();
    } else {
        header("Location : PaymentGateway.php");
        exit();
    }
}
?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data" name="form1" id="form1"  onsubmit="return Validate();">
    <input type="hidden" name="plan" value="<?php echo $plan ?>"/>
    Company Name: 
    <input type="text" name="CompanyName" style="width:230px; height:20px;" /><br /><br />
    Company E-mail : 
    <input type="text" name="CompanyEmail" style="width:230px; height:20px;" /><br /><br />
    Company Contact <input type="text" name="CompanyContact" style="width:230px; height:20px;" /><br /><br />
    Company Address: <input type="text" name="CompanyAddress" style="width:230px; height:20px;" /><br /><br />
    Select Your Registration Type : <br /><br />
    Trail: <input type="radio" name="RegistrationType" value="Trail" /><br />
    Paid<input type="radio" name="RegistrationType" value="Paid" /><br /><br />

    <input type="hidden" name="form_submitted" value="1"/> 
    <input type="submit" value="REGISTER" name="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:29:01.423

您可以通过在开头包含以下内容来执行此操作：

```
<?php
    if(mysql_query($query))
        header('Location: http://example.com/newurl/');
    else
        echo "Error!";
?> 
```

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:33:43.027

只是为了一个约定，养成`exit`在你的`header()`.

```
<?php
header("Location: http://www.example.com/"); /* Redirect browser */

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T10:27:10.997

只放置您要重定向的页面路径：

```
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
                                ADD CONTENT
                            </button>
                            <!-- Modal -->
                            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="myModalLabel">Please Add Content</h4>
                                        </div>
                                        <div class="modal-body">
                <form role="form" action="" method="POST">
      <!-- YOUR HTML FORM GOES HERE--->
<button type="submit" name="submit" class="btn btn-primary btn-lg"id="sub" onclick="SUBMISSION()" >Submit </button>
                            </fieldset>

             </form>
  <?php
if(isset($_POST['submit']))
{

    SUBMISSION();
    }
function SUBMISSION()
{
 // UR CONNECTION ESTABLISHMENT CODE GOES HERE
  // SQL QUERY FOR INSERTION IN FIELDS

 echo"<script type=\"text/javascript\">
document.location.href='http://localhost/your file path/YOURPAGE.php'; // ur desired redirect page path where u want to go with recent submit data u can also in same page
</script>";

$conn->CLOSE();

}

?>

                                        </div>

                                    </div>
                                    <!-- /.modal-content -->
                                </div>
                                <!-- /.modal-dialog -->

                            <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row --> 
```

# android - 如何在android的imageview中添加gif图像？

> ID：11131971
> 
> 赞同：3
> 
> 时间：2012-06-21T05:25:44.277
> 
> 标签：android, android-animation

我按照 android 开发者网站在我的应用程序中添加了 gif 图像。但是图像没有显示为动画，它显示为正常图像。

**可绘制动画**

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
android:oneshot="false">
<item android:drawable="@drawable/los01" android:duration="50" />
<item android:drawable="@drawable/los02" android:duration="50" />
</animation-list> 
```

**编码**

```
layout.setBackgroundResource(R.drawable.bg);
                img.setBackgroundResource(R.drawable.mylosanim);
                AnimationDrawable frameAnimation = (AnimationDrawable)  img.getBackground();
                frameAnimation.start();
                tv1.setText("Sorry!!!Play Again!!!");
                tv3.setText("Your Level-1 Score:"+Integer.toString(score));
                layout.setClickable(true);
                frameAnimation.stop(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:33:19.317

有几种方法，包括使用[`Movie`](http://developer.android.com/reference/android/graphics/Movie.html)类。

查看[教程：如何在 Android 中播放动画 GIF](http://droid-blog.net/2011/10/14/tutorial-how-to-use-animated-gifs-in-android-part-1/)以及相关帖子以获取替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:36:38.373

尝试作为

```
AnimationDrawable frameAnimation = (AnimationDrawable)img.getBackground();  
        if (frameAnimation.isRunning()){  
            frameAnimation.stop();  
        }else{  
            frameAnimation.stop();  
            frameAnimation.start();

                tv1.setText("Sorry!!!Play Again!!!");
                tv3.setText("Your Level-1 Score:"+Integer.toString(score));
                layout.setClickable(true);
        } 
```

# java - 没有完全遍历的两个列表中的共同元素

> ID：11131975
> 
> 赞同：0
> 
> 时间：2012-06-21T05:26:06.840
> 
> 标签：java

我怎样才能在两个列表中找到共同的元素，而无需实际遍历两个列表中的每个元素？我的意思是不使用通常的遍历方法，我们倾向于将一个元素与整个列表进行比较。

额外细节：

1.列表排序

2.想通过遍历第二个列表中的最少元素来找到共同元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:29:19.797

```
List<Integer> list1 = new ArrayList<Integer>();

List<Integer> list2= new ArrayList<Integer>();

List<Integer> list3 = new ArrayList<Integer>(list2);

list3.retainAll(list1); 
```

`list3`将只有`list1`和的共同元素`list2`。

这只是一种明显遍历列表的优化库方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:27:51.843

[`list.retainAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#retainAll%28java.util.Collection%29)

注意：会在cover下遍历，不遍历是不行的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:29:01.047

我假设您的意思是您不想为第一个列表中的每个元素完全遍历第二个列表。

一种方法是对两个列表进行排序，然后同时通读它们，前进或其他迭代器以查找不匹配并且两者都用于匹配。

另一种方法是对一个列表进行排序，然后对另一个列表中的每个元素进行二进制搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T05:54:23.533

您似乎在要求 O(n) 解决方案，而不是在外部和内部循环中遍历列表的天真 O(n^2) 解决方案。

一种方法是遍历其中一个列表并将其元素放入哈希表中。然后，遍历另一个列表，对于每个元素，检查该元素是否存在于哈希表中。这将是一个 O(n) 解决方案，但当然会占用空间。

# database - 如何在 liquibase 中标记变更集以进行回滚

> ID：11131978
> 
> 赞同：28
> 
> 时间：2012-06-21T05:26:20.580
> 
> 标签：database, maven-plugin, liquibase

[我已经按照maven configuration](http://www.liquibase.org/manual/maven)中的指定配置了 liquibase 的 maven 插件。
现在创建了一个变更集，例如：-

```
<changeSet id="changeRollback" author="nvoxland">
  <createTable tableName="changeRollback1">
     <column name="id" type="int"/>
  </createTable>
  <rollback>
     <dropTable tableName="changeRollback1"/>
  </rollback>
</changeSet> 
```

使用命令行创建 sql 以更新数据库：- **mvn liquibase:updateSQL**

但只想知道如何使用“rollbackTag”参数进行回滚。即如果运行命令“ **mvn liquibase:rollbackSQL** ”，“rollbackTag”参数的值应该是多少。

是否可以使用变更集 id 进行回滚？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-21T20:02:44.400

回滚标签旨在检查您的数据库配置。

以下命令将数据库配置回滚 3 个变更集并创建一个名为“检查点”的标记：

```
mvn liquibase:rollback -Dliquibase.rollbackCount=3
mvn liquibase:tag -Dliquibase.tag=checkpoint 
```

您现在可以更新数据库，并在任何阶段使用回滚标签回滚到该点：

```
mvn liquibase:rollback -Dliquibase.rollbackTag=checkpoint 
```

或者生成回滚 SQL：

```
mvn liquibase:rollbackSQL -Dliquibase.rollbackTag=checkpoint 
```

# 修改示例

我最初发现很难弄清楚如何配置 liquibase Maven 插件。以防万一，这是我使用的示例。

liquibase 更新配置为自动运行，然后将数据库标记为当前 Maven 修订号。

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb.db</groupId>
    <artifactId>liquibase-demo</artifactId>
    <version>1.0-SNAPSHOT</version>
    <properties>
        <!-- Liquibase settings -->
        <liquibase.url>jdbc:h2:target/db1/liquibaseTest;AUTO_SERVER=TRUE</liquibase.url>
        <liquibase.driver>org.h2.Driver</liquibase.driver>
        <liquibase.username>user</liquibase.username>
        <liquibase.password>pass</liquibase.password>
        <liquibase.changeLogFile>com/myspotontheweb/db/changelog/db-changelog-master.xml</liquibase.changeLogFile>
        <liquibase.promptOnNonLocalDatabase>false</liquibase.promptOnNonLocalDatabase>
    </properties>
    <dependencies>
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.3.162</version>
        </dependency>
    </dependencies>
    <profiles>
        <profile>
            <id>dbupdate</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.liquibase</groupId>
                        <artifactId>liquibase-maven-plugin</artifactId>
                        <version>2.0.2</version>
                        <executions>
                            <execution>
                                <phase>process-resources</phase>
                                <configuration>
                                    <tag>${project.version}</tag>
                                </configuration>
                                <goals>
                                    <goal>update</goal>
                                    <goal>tag</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project> 
```

Liquibase 现在配置为标准生命周期的一部分，因此可以按如下方式运行：

```
mvn clean compile 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-08T16:59:04.437

我个人更喜欢将标签作为变更集文件的一部分，因此如果您必须回滚或删除其中的所有记录，`DATABASECHANGELOG`您不会丢失您的标签记录。

```
<databaseChangeLog>
    <changeSet id="001_create_tables" .../>
    <changeSet id="002_alter_tables" .../>
    <changeSet id="003_load_user_data" .../>

    <!-- Also include the tagging itself as a changeSet... -->
    <changeSet author="userId" id="tag_version_0_1_0">
        <tagDatabase tag="version_0.1.0" />
    </changeSet>
    <!-- version 0.1.0 ends here -->

</databaseChangeLog> 
```

# ios - iOS：OAuth2Client 和 Google

> ID：11131980
> 
> 赞同：1
> 
> 时间：2012-06-21T05:26:40.397
> 
> 标签：ios, oauth-2.0, oauth2client

我正在尝试让 Google 的 OAuth2 在 iOS 应用程序中进行用户验证。

我正在使用 OAuth2Client api，但无法让它与谷歌一起使用。谷歌似乎只接受*http://localhost*或*urn:ietf:wg:oauth:2.0:oob*作为重定向 url。阻止我使用自定义架构触发切换回我的应用程序。

代码如下所示：

```
[[NXOAuth2AccountStore sharedStore] setClientID:@"<client-id>"
                                         secret:@"<secret>"
                               authorizationURL:[NSURL URLWithString:@"https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile"]
                                       tokenURL:[NSURL URLWithString:@""]
                                    redirectURL:[NSURL URLWithString:@"http://localhost"]
                                 forAccountType:@"Google"];
[[NXOAuth2AccountStore sharedStore] requestAccessToAccountWithType:@"Google"]; 
```

当我运行它时，Safari 出现并要求访问，但随后因为我无法重定向回应用程序而卡住。

任何人都知道如何使这项工作或我需要不同的 api？注意：我目前无法访问 Google 工具箱 OAuth2 套件 ATM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:18:59.393

终于得到了 GTM-OAuth2 代码，这似乎是有效的。

# android - Android 登录替代方案

> ID：11131985
> 
> 赞同：3
> 
> 时间：2012-06-21T05:27:12.750
> 
> 标签：android, login, oauth, registration

我目前正在实施各种事情，但让我感到困惑的一件事是**Android Login Mechanism**。我不太确定在不同的应用程序中选择哪种登录机制（它们都在访问互联网）。

假设我有两个应用程序：

*   A：这个应用程序基本上应该连接到服务器并让用户聊天 - 我们可以看到在线用户列表（没有花名册，每个人都是朋友），所以它是一个聊天应用程序。
*   B. 这个应用程序应该通过服务器验证并让用户将消息发布到他们的 WALL 或其他东西，所以当其他用户上线时，它会立即向他显示这些消息。

* * *

我故意使用“连接到服务器”来尝试通用，因为这是我想知道的。我应该使用什么类型的身份验证，以便我的服务器知道用户是合法的：

*   1）**自定义注册+登录：**我不想使用它，因为用户不想注册另一个用户名，并且有很多替代方法可用。

*   2) **OpenID：**当我只需要经过身份验证的用户而不需要在任何站点上访问他们的私人信息时，我应该使用它。我不太喜欢这个，因为需要打开浏览器才能工作。

*   3) **OAuth** : 与 OpenID 相同，但我也可以访问用户的私有资源。这是同样的问题，浏览器需要打开交换密钥和令牌，因此用户体验不太好。

*   4) **AccountManager**：这是一个很好的选择，但我不喜欢它，因为它不是应用程序的一部分。我什至不确定当用户点击登录按钮时会发生什么，AccountManager 会弹出。我是否应该选择 AccountManager 中列出的现有帐户，如果我想选择不同的帐户，如 Yahoo 等，AccountManager 可以注册、登录并返回应用程序 - 已通过身份验证。

* * *

我非常想听听我可以使用的所有 4 种替代方案的现有实现。我知道那里有很多，我不想在这里列出它们，我知道它们。唯一的问题是我不知道使用哪一个，它会按照我想要的方式完成工作。以下是我想要的东西的清单：

*   1) 在应用程序中，当用户单击登录按钮时，应该会打开一些内容，让用户在以下选项中进行选择：Google、Facebook、Yahoo、Twitter。用户应使用任何帐户登录，应注明已通过身份验证。

*   2）然后该帐户应该是用户作为访问令牌来验证我的服务器 - 所以我的服务器只接受令牌并检查它是否有效。

这样做的重点是我不必在我的服务器上实现登录机制，但用户仍然通过我的服务器进行身份验证，因此我们可以交换一些数据等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T12:32:47.747

```
 package com.myapplication;

    import android.os.Bundle;
    import android.os.Handler;
    import android.support.v7.app.AppCompatActivity;
    import android.text.Editable;
    import android.text.InputType;
    import android.text.TextUtils;
    import android.text.TextWatcher;
    import android.text.method.PasswordTransformationMethod;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.View;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Button;
    import android.widget.Toast;

    public class LoginActivity extends AppCompatActivity {

        EditText login_uname, login_pwd;
        TextView invalid_error;
        Button login_btn;
        private boolean canExit;
        TextView pword_showhide;

        // string login_un,login_pw;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.login_screen);

            login_uname = (EditText) findViewById(R.id.login_username);
            login_pwd = (EditText) findViewById(R.id.login_password);
            invalid_error = (TextView) findViewById(R.id.InvalidError);
            login_btn = (Button) findViewById(R.id.login_btn);
            // loginbutton.setEnabled(false);
            invalid_error.setVisibility(View.GONE);
            pword_showhide = (TextView) findViewById(R.id.pwd_showhide);
            // pword_showhide.setText("show");
            pword_showhide.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    if (login_pwd.getInputType() == InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD) {
                        login_pwd.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);
                        pword_showhide.setText("show");
                    } else {
                        login_pwd.setInputType(InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD);
                        pword_showhide.setText("hide");
                    }
                    login_pwd.setSelection(login_pwd.getText().length());
                }
            });
            checkValidation();
            login_uname.addTextChangedListener(mWatcher);
            login_pwd.addTextChangedListener(mWatcher);
        }
        private void checkValidation() {
            // TODO Auto-generated method stub
            if ((TextUtils.isEmpty(login_uname.getText())) || (TextUtils.isEmpty(login_pwd.getText())))
                login_btn.setEnabled(false);
            else {
                login_btn.setEnabled(true);
            }
        }
        public void login(View view) {
            if (login_uname.getText().toString().equals("a") && login_pwd.getText().toString().equals("a")) {
                invalid_error.setVisibility(View.GONE);
                Toast.makeText(getApplicationContext(), "Login Success", Toast.LENGTH_LONG).show();
                login_uname.setCompoundDrawablesWithIntrinsicBounds(R.drawable.icon_username, 0, 0, 0);
                login_pwd.setCompoundDrawablesWithIntrinsicBounds(R.drawable.icon_password, 0, 0, 0);
                //correcct password
            } else {
                //wrong password
                invalid_error.setVisibility(View.VISIBLE);
                Toast.makeText(getApplicationContext(), "Login fail", Toast.LENGTH_LONG).show();
                login_uname.setCompoundDrawablesWithIntrinsicBounds( R.drawable.error_username, 0, 0, 0);
                login_pwd.setCompoundDrawablesWithIntrinsicBounds( R.drawable.error_password,0, 0, 0);
            }
        }
        TextWatcher mWatcher = new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
                checkValidation();
            }
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                // TODO Auto-generated method stub
            }
            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
            }
        };
        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.menu_main, menu);
            return true;
        }
        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            // Handle action bar item clicks here. The action bar will
            // automatically handle clicks on the Home/Up button, so long
            // as you specify a parent activity in AndroidManifest.xml.
            int id = item.getItemId();
            //noinspection SimplifiableIfStatement
            if (id == R.id.action_settings) {
                return true;
            }
            return super.onOptionsItemSelected(item);
        }
        @Override
        public void onBackPressed() {
            if (canExit)
                super.onBackPressed();
            else {
                canExit = true;
                Toast.makeText(getApplicationContext(), "Press again to Exit", Toast.LENGTH_SHORT).show();
            }
            mHandler.sendEmptyMessageDelayed(1, 2000/*time interval to next press in milli second*/);// if not pressed within 2seconds then will be setted(canExit) as false
        }
        private Handler mHandler = new Handler() {

            public void handleMessage(android.os.Message msg) {

                switch (msg.what) {
                    case 1:
                        canExit = false;
                        break;
                    default:
                        break;
                }
            }
        };

    }

login_screen.xml
----------------
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".LoginActivity">
    <TextView
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Invalid Login Details"
        android:id="@+id/InvalidError"
        android:gravity="center"
        android:background="#ff3a0f"
        android:textColor="#FFF"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_margin="50dp"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"
        android:id="@+id/login_lyt">
        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/login_username"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentStart="true"
            android:hint="User Name"
            android:drawableLeft="@drawable/icon_username"
            android:layout_marginTop="141dp" />
        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:inputType="textPassword"
            android:hint="******"
            android:drawableLeft="@drawable/icon_password"
            android:ems="10"
            android:id="@+id/login_password"
            android:layout_centerVertical="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentStart="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentEnd="true" />
        <TextView
            android:id="@+id/pwd_showhide"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/login_password"
            android:layout_alignBottom="@+id/login_password"
            android:layout_alignParentRight="true"
            android:text="show" />
        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Login"
            android:onClick="login"
            android:background="#f0a422"
            android:id="@+id/login_btn"
            android:layout_below="@+id/login_password"
            android:layout_alignParentLeft="true"
            android:layout_alignParentStart="true"
            android:layout_marginTop="31dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentEnd="true" />
    </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-24T11:13:43.137

```
 package com.myapplication;

    import android.os.Bundle;
    import android.os.Handler;
    import android.support.v7.app.AppCompatActivity;
    import android.text.Editable;
    import android.text.InputType;
    import android.text.TextUtils;
    import android.text.TextWatcher;
    import android.text.method.PasswordTransformationMethod;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.View;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Button;
    import android.widget.Toast;

    public class LoginActivity extends AppCompatActivity {
        EditText login_uname, login_pwd;
        TextView invalid_error;
        Button login_btn;
        private boolean canExit;
        TextView pword_showhide;

        // string login_un,login_pw;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.login_screen);

            login_uname = (EditText) findViewById(R.id.login_username);
            login_pwd = (EditText) findViewById(R.id.login_password);
            invalid_error = (TextView) findViewById(R.id.InvalidError);
            login_btn = (Button) findViewById(R.id.login_btn);
            // loginbutton.setEnabled(false);
            invalid_error.setVisibility(View.GONE);
            pword_showhide = (TextView) findViewById(R.id.pwd_showhide);
            // pword_showhide.setText("show");
            pword_showhide.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    if (login_pwd.getInputType() == InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD) {
                        login_pwd.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);
                        pword_showhide.setText("show");
                    } else {
                        login_pwd.setInputType(InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD);
                        pword_showhide.setText("hide");
                    }
                    login_pwd.setSelection(login_pwd.getText().length());
                }
            });
            checkValidation();
            login_uname.addTextChangedListener(mWatcher);
            login_pwd.addTextChangedListener(mWatcher);
        }

        private void checkValidation() {
            // TODO Auto-generated method stub
            if ((TextUtils.isEmpty(login_uname.getText())) || (TextUtils.isEmpty(login_pwd.getText())))
                login_btn.setEnabled(false);
            else {
                login_btn.setEnabled(true);
            }
        }

        TextWatcher mWatcher = new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
                checkValidation();
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                // TODO Auto-generated method stub
            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
            }
        };

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.menu_main, menu);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            // Handle action bar item clicks here. The action bar will
            // automatically handle clicks on the Home/Up button, so long
            // as you specify a parent activity in AndroidManifest.xml.
            int id = item.getItemId();
            //noinspection SimplifiableIfStatement
            if (id == R.id.action_settings) {
                return true;
            }
            return super.onOptionsItemSelected(item);
        }

        @Override
        public void onBackPressed() {
            if (canExit)
                super.onBackPressed();
            else {
                canExit = true;
                Toast.makeText(getApplicationContext(), "Press again to Exit", Toast.LENGTH_SHORT).show();
            }
            mHandler.sendEmptyMessageDelayed(1, 2000/*time interval to next press in milli second*/);// if not pressed within 2seconds then will be setted(canExit) as false
        }

        private Handler mHandler = new Handler() {
            public void handleMessage(android.os.Message msg) {
                switch (msg.what) {
                    case 1:
                        canExit = false;
                        break;
                    default:
                        break;
                }
            }
        };
    }

 login_screen.xml:
    ------------------
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".LoginActivity">
        <TextView
            android:layout_width="match_parent"
            android:layout_height="40dp"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="Invalid Login Details"
            android:id="@+id/InvalidError"
            android:gravity="center"
            android:background="#ff3a0f"
            android:textColor="#FFF"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true" />
        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_margin="50dp"
            android:layout_centerVertical="true"
            android:layout_centerHorizontal="true"
            android:id="@+id/login_lyt">
            <EditText
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/login_username"
                android:layout_alignParentTop="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentStart="true"
                android:hint="User Name"
                android:drawableLeft="@drawable/icon_username"
                android:layout_marginTop="141dp" />
            <EditText
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:inputType="textPassword"
                android:hint="******"
                android:drawableLeft="@drawable/icon_password"
                android:ems="10"
                android:id="@+id/login_password"
                android:layout_centerVertical="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentStart="true"
                android:layout_alignParentRight="true"
                android:layout_alignParentEnd="true" />
            <TextView
                android:id="@+id/pwd_showhide"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/login_password"
                android:layout_alignBottom="@+id/login_password"
                android:layout_alignParentRight="true"
                android:text="show" />
            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Login"
                android:background="#f0a422"
                android:id="@+id/login_btn"
                android:layout_below="@+id/login_password"
                android:layout_alignParentLeft="true"
                android:layout_alignParentStart="true"
                android:layout_marginTop="31dp"
                android:layout_alignParentRight="true"
                android:layout_alignParentEnd="true" />
        </RelativeLayout>
    </RelativeLayout> 
```

# c# - 在 3 层架构中显示计算属性的最佳实践

> ID：11131988
> 
> 赞同：0
> 
> 时间：2012-06-21T05:27:35.360
> 
> 标签：c#, visual-studio-2010, design-patterns, mvvm

在 3 层架构中，我有一个带有网格的客户订单表格，它显示了要添加到另一个网格中的项目列表，这些网格代表订单项目。

项目网格中的一列显示客户最后一次订购此项目（如果他这样做了）。现在我有以下代码

```
public class Order {
   List<Items> items {get;set;}
   }

public class Item {
  int Id {get;set;}
  string Name {get;set;}
} 
```

据我所知，模型不应该改变，所以我不能向 Item 类添加一个名为 LastOrderedDate 的属性。

如果没有，我将如何在不破坏架构的情况下在网格中显示它（从最佳实践的角度来看）？是我需要的 MVVM 模式吗？

## ![原型来明确这个想法](../Images/649951c0f3a840e71aa9537708b755b4.png)

## 澄清：

当组合中选定的客户发生更改时，LastOrderedDate 列也应更改其数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:56:42.777

> 据我所知，模型不应该改变，所以我不能向 Item 类添加一个名为 LastOrderedDate 的属性

为什么？这正是我会做的。如果视图需要另一条信息，则应将其添加到模型中，以便将其传递给视图。

如果由于某些原因您无法修改`Item`类，则可以创建一个包装类：

```
class ItemModel
{
    public Item Item { get; set; }
    public DateTimeOffset LastOrderedDate { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:57:41.857

实际上 MVVM 不是您需要的，但您可以将 Order/Item 类包装在 MyOrderModel 中，其中包含 LastOrderDate 和上次添加的 Items。

MVVM 实际上最适合 WPF/Silverlight 应用程序，因为它们可以利用 DataBinding/Commanding 以及松散耦合的视图和视图模型。MVP 更有可能应用于 winforms。检查这个[http://sureshkumarveluswamy.wordpress.com/2010/07/31/mvvm-or-mvp-for-winforms/](http://sureshkumarveluswamy.wordpress.com/2010/07/31/mvvm-or-mvp-for-winforms/)

希望这会有所帮助。

# java - 在较小的应用程序中替代 Spring

> ID：11131993
> 
> 赞同：5
> 
> 时间：2012-06-21T05:27:52.987
> 
> 标签：java, spring, java-6

我喜欢使用[Spring](http://www.springsource.org/)等特性[`@Component`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/stereotype/Component.html)，[`@Autowired`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/Autowired.html)甚至[`ApplicationContext`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/context/ApplicationContext.html)在较小的应用程序（如批处理应用程序）中工作。

我读到[Java EE 6](http://www.oracle.com/technetwork/java/javaee/tech/index.html)现在是企业应用程序中 Spring 的可行替代方案。对于较小的人也是如此吗？我上面提到的功能的相应替代方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T05:33:12.243

Java EE 6 肯定不会变得更轻。在 Java EE 空间中查看[jBoss Weld](http://seamframework.org/Seam3/Solder)。但真正好的替代品和重量更轻的是 google [Guice](http://code.google.com/p/google-guice/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T08:52:00.060

Java EE 6 Web Profile 适用于非常小的应用程序。TomEE 就是一个很好的例子，它只有大约 25MB，运行在 64MB 的内存中。

主要是基于 POJO 和注解，并具有良好的约定优于配置，编程模型现在也非常轻巧且易于理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:38:45.917

[Play Framework](http://www.playframework.org/)对于较小的应用程序也是一个很好的推荐。它的主要特点是热部署。而且它的视图技术就像Grails。这是相当不错。

希望这对您有所帮助。干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T12:26:37.547

[在您的情况下， DataKernel](https://datakernel.io)可能是一个不错的选择。从网站：

> DataKernel 是一个功能齐全的**替代**Web 和大数据 Java 框架。
> 
> 一组用于典型用例的预定义启动器和类可让您以极快的​​速度开发应用程序。用不到 15 行代码创建一个**异步 HTTP 服务器，无需额外的配置文件。**

他们也有自己的依赖注入，具有相当令人印象深刻的基准：

> DataKernel DI 快如闪电：**比 Guice 快 5.5 倍，**比**Spring 快 100 倍**。

请注意，与 Spring 框架相比，DataKernel 具有完全不同的方法，它更像是受 Node.js 启发的

# gcc - -mcmodel=large 从哪个版本的 gcc 工作？

> ID：11131998
> 
> 赞同：2
> 
> 时间：2012-06-21T05:28:26.010
> 
> 标签：gcc

我有生成大于 2GB 的可执行文件的代码（它是生成的代码）。

在带有 gcc 4.3.2 的 x64 上，我收到如下错误：

```
crtstuff.c:(.text+0x20): relocation truncated to fit: 
  R_X86_64_32S against `.dtors' 
```

所以我知道我需要这个`-mcmodel=large`选项。然而，这并没有做任何事情或解决我系统上的问题。

我*确定*我在某处读到，它仅受特定版本的 gcc 支持，并且该选项**在之前的版本中被忽略**。如果我知道它是什么，我会告诉我的运营团队安装那个版本的 gcc。但是我现在找不到任何证据来告诉我这个假设是否正确，如果是，那么该功能是在哪个版本中引入的。

例如

(1)[这里](http://books.google.at/books?id=wQ6r3UTivJgC&pg=PA409&lpg=PA409&dq=mcmodel%20large%20gcc%20introduced%20in%20version&source=bl&ots=EKWjOlcAKx&sig=qc7-omZoAv9_sJAndoypJyU_P5I&hl=de&sa=X&ei=ahziT9HvOdHmtQaRkKlw&ved=0CGgQ6AEwBQ#v=onepage&q=mcmodel%20large%20gcc%20introduced%20in%20version&f=false)声明该选项不做任何事情。有问题的书声称涵盖“GCC 4.x”。该书于 2006 年出版。

(2)[这里](http://www.mentby.com/Group/gcc-help/mcmodellarge-problem.html)针对该选项报告了一个编译器错误，因此我得出结论，在该版本中它至少必须做一些事情。那似乎是 gcc 4.6.1。

因此，尽管我无法再找到该功能在哪个版本中实现的确切证据，但至少有证据表明这种情况随着时间的推移而发生了变化。

我尝试查看所有各种 GCC 4.x 版本的变更日志，但无济于事（通常它们都很好，所以那里缺少信息几乎意味着我错了，版本之间没有任何变化。）

**编辑：** [这](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46125#c1)似乎暗示它可能确实有效，但我需要“重新编译 crtstuff.c”，但我真的不知道我在哪里找到该文件或我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:38:24.980

我相信 4.4 是增加了对这个特性的支持的版本。我在下面演示了 4.1 在需要大数据块（而不是代码）的情况下无法工作，而 4.4 可以。我不确定 4.2 和 4.3，但是您的示例和我的记忆都表明 4.3 对此没有工作支持。我的示例应该让您验证特定安装是否有效，但在其他易于编译的代码上。

作为背景，我维护了一个程序，它是流基准测试的一个分支，经过专门修改以使用 64 位结构来测试更大的系统。在我开始使用“-mcmodel=large”之前，我一直被这些“重定位截断以适应”错误所困扰，并且我的 fork 不会编译/运行，除非它确实有效。我绝对发现我的程序兼容的最旧版本的 gcc 是 Debian Squeeze 附带的 4.4.5。

这是一个完整的测试用例，显示了我的流编译分支并在大型模型中使用 >4GB 的 RAM，在没有选项的情况下失败后：

```
$ gcc --version
gcc (Debian 4.4.5-8) 4.4.5
...
$ git clone https://github.com/gregs1104/stream-scaling.git
$ cd stream-scaling
$ gcc -O3 -DN=200000000 -fopenmp stream.c -o stream
/tmp/cca8rR1I.o: In function `checkSTREAMresults':
stream.c:(.text+0x34): relocation truncated to fit: R_X86_64_32S against `.bss'
...
stream.c:(.text+0x6ab): additional relocation overflows omitted from the output
collect2: ld returned 1 exit status
$ gcc -O3 -DN=200000000 -fopenmp stream.c -o stream -mcmodel=large
$ ./stream
-------------------------------------------------------------
STREAM version $Revision: 5.9 $
-------------------------------------------------------------
This system uses 8 bytes per DOUBLE PRECISION word.
-------------------------------------------------------------
Array size = 200000000, Offset = 0
Total memory required = 4577.6 MB.
... 
```

这是在没有大型模型的 gcc 版本上发生的情况，一个运行 RedHat 5 派生软件（CentOS 5.8）的版本：

```
$ gcc --version
gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52)
    ...
$ gcc -O3 -DN=200000000 -fopenmp stream.c -o stream -mcmodel=large
stream.c:1: sorry, unimplemented: code model ‘large’ not supported yet 
```

因此，在旧版本的 gcc 上，它应该抛出该错误，而不仅仅是忽略该选项。

crtstuff 是 gcc 附带的库。您在 gcc 邮件列表中链接到的错误报告来自试图为 RedHat 5 系统构建自己的 gcc 的人，正如您在最后一个示例中看到的 gcc 4.1 附带的那样。他们用大模型重建了 gcc 的一部分，但它仍然链接到原始的 4.1 构建的 crtstuff 库。如果您使用的是正确打包的 gcc，则不应该遇到这个问题，这就是为什么 gcc 开发人员不认为它是一个真正的错误。我认为您只需要 gcc 4.4 或更高版本。

# cron - Cron 表达式 (Quartz) 用于在每个午夜 12 点运行的程序

> ID：11131999
> 
> 赞同：40
> 
> 时间：2012-06-21T05:28:28.257
> 
> 标签：cron, quartz-scheduler

Quartz Scheduler 中每个格林威治标准时间午夜 12 点运行程序的 cron 表达式是什么。

我以前从未使用过石英，所以我还在学习。

是表达式`0 0 12 * * ?`还是 for `12 pm (noon)`。谁能告诉我？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-21T21:06:18.810

1 秒 2 分钟 3 小时 4 月份 5 个月 6 星期 7 年（可选字段）

所以在你的情况下：

0 0 0 * * ?

如果你想在中午开火，这将在午夜开火：

0 0 12 * * ?

或两者：

0 0 0,12 * * ?

如果您想变得更复杂，这是一个很好的页面：[http ://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-06](http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-06)

祝你有愉快的一天！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-07-05T10:40:37.237

```
<Minute> <Hour> <Day_of_the_Month> <Month_of_the_Year> <Day_of_the_Week> 
```

The following graph shows what it consists of:

```
* * * * * *
| | | | | | 
| | | | | +-- Year              (range: 1900-3000)
| | | | +---- Day of the Week   (range: 1-7, 1 standing for Monday)
| | | +------ Month of the Year (range: 1-12)
| | +-------- Day of the Month  (range: 1-31)
| +---------- Hour              (range: 0-23)
+------------ Minute            (range: 0-59) 
```

Cron Expression for a program to run every midnight at 12 am.

> 0 0 0 1/1 * ? *

A great website to create your own Cron Expression easily without much knowledge of Cron Expression : [Cron Maker](http://www.cronmaker.com/)

It will help you build your own cron expression and show you the next firing date times of your cron like this.

```
1\.  Wednesday, July 6, 2016 12:00 AM
2\.  Thursday, July 7, 2016 12:00 AM
3\.  Friday, July 8, 2016 12:00 AM
4\.  Saturday, July 9, 2016 12:00 AM
5\.  Sunday, July 10, 2016 12:00 AM ..... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-05T05:12:52.650

每个午夜 12 点运行的程序的 Cron 表达式应为 0 0 0 * * *