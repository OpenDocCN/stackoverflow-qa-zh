# StackOverflow 问答 11400000-11400999

# java - 异步输出不干扰当前输入提示

> ID：11400001
> 
> 赞同：-3
> 
> 时间：2012-07-09T17:23:35.240
> 
> 标签：java, command-line

我正在使用 TimerTask 来模拟在线程中运行的程序的一部分，在不可预测的时间产生输出。

```
package consoletest;
import java.util.Scanner;
import java.util.Timer;
import java.util.TimerTask;

public class ConsoleTest {
    public static void main(String[] args) {

        TimerTask tt = new TimerTask(){
            public void run() {
                System.out.print("\n***");
            }
        };

        new Timer(true).schedule(tt, 2000);

        Scanner scanner = new Scanner(System.in);
        System.out.print("enter a command: ");
        String line = scanner.nextLine();
    }
} 
```

我的问题是，如果您在输出发生时主动键入，则将输出插入到当前光标位置，然后将光标放在输出字符串的末尾。

例如，这是我慢慢输入 12345678 的屏幕截图，您可以看到输出被插入到我输入的中间。

![问题的命令行演示](../Images/f954922651c9d59dd70597cb7148bc8b.png)

我不希望这个异步输出如此严重地干扰当前输入光标。如果我可以在光标位置之后打印输出而不更改光标位置，那很好。甚至更好的是在当前提示之前完全打印输出（将提示向下移动），但我认为这可能涉及以某种方式结束提示，打印输出，然后在复制任何正在进行的输入时制作新提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:53:06.990

你必须使用这样的东西：

```
public static void main(String[] args) {

        String input = "";
        char c = (char) System.in.read();
        while(c!=-1){
              c = System.in.read();
              input += c;
              System.out.print("\r"+input+"***"); // \r returns the cursor to the line-beginning
        }

        //extra stuff
} 
```

这也许就是你想要的。抱歉可能有错误的 Java 代码，我是从脑海中写出来的......

# r - 中大型 R 项目的架构和设计工具

> ID：11400002
> 
> 赞同：3
> 
> 时间：2012-07-09T17:23:36.757
> 
> 标签：r, architecture

当我开始在 R 中构建相对较大的项目（>30 个函数）时，我觉得需要更系统的架构和设计思维。我正在寻找可以让我更轻松地对我的代码进行高级概述以及向其他人解释我的代码的作用的工具。

为了让您更具体地了解我的工作：我通常致力于成功的数据挖掘实验的自动化。这样的项目通常涉及：

1.  导入数据
2.  数据清洗与转换
3.  带有描述性统计的报告
4.  处理一系列算法和模型
5.  总结结果的报告。

我应该使用什么样的软件工具和什么样的方法？

# java - 如何在形状内绘制形状？

> ID：11400003
> 
> 赞同：2
> 
> 时间：2012-07-09T17:23:39.487
> 
> 标签：java

我正在尝试构建一个应用程序，我打算在其中创建一些基本动画。我的目标是在顶部有一个用于绘制图形的面板，在下方有一个带有常规按钮和标签的面板。

我已经完成了下面提供的代码，但我无法在先前绘制的矩形内绘制矩形。我相信我的问题是我正在调用一个类（矩形）来绘制扩展 JPanel 的矩形，这意味着每次我尝试绘制一个新矩形时，都会创建一个新面板，而不是与前一个面板重叠！

***编辑***

我查看了更多示例，最后可以想出一个代码来生成形状（本例为矩形），因为我需要它们在同一个面板上。我对代码做了一些更改，下面是新代码。

爪哇

```
import java.awt.Color;
import java.awt.Container;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

class L extends JFrame {

public static final int ww = 1000;
public static final int wh = 600;
public static final String wt = "Teste";
Container pane = getContentPane();
DrawRectangle rectangle = new DrawRectangle();

public L() {
    setSize(ww,wh);
    this.setTitle(wt);
    Sim();
    pane.add(rectangle);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
}

public void addRectangle(int px, int py, int pwh, Color pc) {
    this.rectangle.addRectangle( px, py, pwh, pc);
}

public void Sim() {
    addRectangle(100,100,250,Color.red);
    addRectangle(200,200,50,Color.green);
}

public static void main(String[] args) {

    L l = new L();

    try {
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
    } catch (UnsupportedLookAndFeelException ex) {
        ex.printStackTrace();
    } catch (IllegalAccessException ex) {
        ex.printStackTrace();
    } catch (InstantiationException ex) {
        ex.printStackTrace();
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
    }

    //} 

}

} 
```

绘制矩形.java

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import javax.swing.JPanel;

class DrawRectangle extends JPanel {
private java.util.List<Rectangle2D> squares;
private java.util.List<Color> colors;
//private int a, startX, startY;
public DrawRectangle(){
    squares = new ArrayList<Rectangle2D>();
    colors = new ArrayList<Color>();
}

public void addRectangle(int px, int py, int pwh, Color pc)  { // square
    squares.add( new Rectangle2D.Double(px, py, pwh, pwh) ) ;
    colors.add(pc);
    //this.a = a;
    //this.startX = startX;
    //this.startY = startY;
}
public void paintComponent(Graphics g) {
    Graphics2D g1 = (Graphics2D) g;
    for( Rectangle2D rect : squares ) {
        System.out.println(colors);
        g1.setColor(colors);
        g1.draw(rect);
    }
}
} 
```

现在又出现了一个新问题！我做错了什么，我不能使用我传递给方法的颜色来绘制不同颜色的形状？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:06:17.517

嗯，也许可以尝试创建一个 JPanel，它接受一个数组，`Rectangles`然后像这样在面板上绘制它们：

```
import java.awt.*;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class RectangleDrawingTest extends JFrame {

    public RectangleDrawingTest() {
        createAndShowUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                RectangleDrawingTest drawingTest = new RectangleDrawingTest();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("Rectangle Drawing Test");
        setSize(300, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        setLocationRelativeTo(null);
        addComponentsToContentPane(this.getContentPane());
        setVisible(true);
    }

    private void addComponentsToContentPane(Container contentPane) {

        Rectangle[] recs = new Rectangle[3];
        recs[0] = new Rectangle(100, 100, 150, 100);
        recs[1] = new Rectangle(100, 100, 125, 75);
        recs[2] = new Rectangle(100, 100, 100, 50);

        MyPanel mr = new MyPanel(recs);

        contentPane.add(mr);
    }
}

class MyPanel extends JPanel {

    private final Rectangle[] recs;

    public MyPanel(Rectangle[] recs) {
        this.recs = recs;
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        grphcs.setColor(Color.BLACK);
        for (int i = 0; i < recs.length; i++) {
            grphcs.drawRect(recs[i].x, recs[i].y, recs[i].width, recs[i].height);
        }
    }
} 
```

**附录：**

因为您同时拥有`squares`并`color` `ArrayList`使用像这样的带有递增变量的 for 循环来横穿它们（正方形大小和颜色大小当然是相同的）：

```
 for( int i=0;i<squares.size();i++) {
       // System.out.println(colors);
        g1.setColor(colors.get(i));
        g1.draw(squares.get(i));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:30:09.597

创建自己的面板，如

```
class MyPanel extends JPanel{
Rectangulo one;

Rectangulo two;
public MyPanel(){
     one = new Rect...etc.;
     two = new Rect...etc.;
}

public paint(Graphics g){
     one.paint(g);
     two.paint(g);
     //two is overlapping one
} 
```

并将其添加到您的 JFrame...

编辑：...或将paint(Graphics g) 和repaint() 添加到您的JFrame，在其中重新绘制panel1 ...

希望能帮助到你...

# networking - mac地址变化

> ID：11400004
> 
> 赞同：2
> 
> 时间：2012-07-09T17:23:45.727
> 
> 标签：networking, mac-address

当系统从一个网络移动到另一个网络时，MAC 地址是否可能会更改？我知道从一个网络切换到另一个网络时，IP 地址可能会发生变化。但是MAC地址也可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:29:51.313

设备的 MAC 地址不会改变，但连接另一端看到的 MAC 地址会改变。由于很多设备都经过一个路由器，所以MAC地址是路由器的，而不是原来的设备。

某些路由器可以将其 MAC 地址更改为与连接到它们的设备之一相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:25:46.583

不，mac是绑定物理接口的，不会因为改变网络而改变。你可能会得到一些其他的继电器或类似的东西吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T17:26:55.727

在你的情况下不太可能。

除非有一些鬼鬼祟祟的病毒会刷新设备的内部系统并替换它们的 mac 地址。那岂不是偷偷摸摸！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T17:43:51.687

您可以进入设置面板、网络连接、属性，然后进行配置，最后进入高级设置。现在您可以更改您的 NetworksAddress（MAC 地址）。

这是法语教程：[http ://www.siteduzero.com/tutoriel-3-363683-et-maintenant-la-pratique.html](http://www.siteduzero.com/tutoriel-3-363683-et-maintenant-la-pratique.html)

# eclipse - 标记代码的 Eclipse 插件

> ID：11400007
> 
> 赞同：5
> 
> 时间：2012-07-09T17:23:55.333
> 
> 标签：eclipse, plugins

是否有 Eclipse 插件来标记代码，就像使用荧光笔一样。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:22:50.093

您可以用书签标记要突出显示的行，然后设置背景颜色以突出显示书签。您必须进入：`preferences -> General -> Editors -> Text Editors -> Annotations`然后将 Text 设置为使用您喜欢的颜色突出显示：

![截屏](../Images/80fe97317bb7f90b11b5b6aca6732285.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:14:15.870

我不知道有任何这样的插件——我还搜索了 Eclipse 市场和谷歌。

但是，如果您有一些 Eclipse 插件开发经验，那么编写一个 Eclipse 命令来为当前编辑器中的选定文本创建注释应该不会太难（至少对于您自己的使用而言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T18:33:28.587

我通常使用`//TODO`. 它提供了一个漂亮的视觉书签类型的东西，您可以使用它轻松跳转。

# php - PHPUnit 代码覆盖率如何忽略我的自动加载器？

> ID：11400008
> 
> 赞同：4
> 
> 时间：2012-07-09T17:23:56.240
> 
> 标签：php, zend-framework, phpunit, code-coverage, zend-autoloader

我的 phpunit 配置中有一个引导程序，它运行`Zend\Loader\StandardAutoloader.php`. 当我添加时，我可以获得 PHPUnit 代码覆盖以忽略它

```
<filter>
   <blacklist>
       <directory suffix=".php">/absolute/path/to/zf</directory>
   </blacklist>
</filter> 
```

到 PHPUnit 配置 XML 文件。但我必须指定一个绝对路径。我希望它是一个相对路径，但 PHPUnit 不会忽略代码覆盖中的 Zend 文件夹。我不想为在家工作时添加不同的位置，也不希望其他开发人员添加自己的路径。Zend 框架位于 php.ini`include_path`设置中，但这不起作用：

```
<filter>
   <blacklist>
       <directory suffix=".php">./Zend</directory>
   </blacklist>
</filter> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T18:03:33.510

`<exclude>...</exclude>`您可以使用以下指令从代码覆盖范围中排除路径`<filter><whitelist>`：

```
<filter>
    <whitelist>
        <directory suffix=".php">../src/library/</directory>
        <!-- add more directories -->
        <exclude>
            <directory suffix=".phtml">./src/application/</directory>
            <directory suffix=".php">./Zend/</directory>
            <!-- add more directories with relative or absolute path -->
        </exclude>
    </whitelist>
</filter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T04:10:20.510

实际上，这也可以通过黑名单来完成。该路径需要相对于您的测试目录。

这在我的项目中起到了作用：

```
<filter>
    <blacklist>
        <directory suffix=".php">../../../cache</directory>
    </blacklist>
</filter> 
```

# azure-blob-storage - 后台智能传输服务 (BITS) - Azure Blob 兼容性

> ID：11400010
> 
> 赞同：1
> 
> 时间：2012-07-09T17:24:03.730
> 
> 标签：azure-blob-storage, microsoft-bits

是否有人熟悉或有使用 BITS 从 Azure blob 存储和/或 CDN 下载的经验？

我通过互联网搜索发现的关于 BITS 和 Azure 的信息非常少，而且一切似乎都与我们拥有 IIS 的 WebRoles 和自我管理的 VM 有关。我没有发现直接从 blob URL 下载的 BITS。具体来说，我需要弄清楚是否以支持 BITS 要求的方式通过 HTTP 提供 blob - [http://msdn.microsoft.com/en-us/library/windows/desktop/aa362846(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362846%28v=vs.85%29.aspx) .

我很快就会做一些我自己的测试，所以我会报告我的发现，但任何信息都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:50:37.963

我忘了回来发布我自己的发现。首先，感谢西蒙的链接......

我使用[http://sharpbits.codeplex.com/](http://sharpbits.codeplex.com/)进行了一些探索性测试，以从已经存在的 blob 启动一些 BITS 传输并尝试上传。我能够通过 http 和 https 下载公共\匿名 blob。这是很久以前的事了，今天我把它作为一个在开发环境中运行良好的现场场景。

另一方面，上传到 Blob 存储失败并返回 400 语法错误响应。我没有进一步调查上传问题，因为在我的特定情况下我不需要 BITS 上传，所以这仍然是问题的一个未解决部分，当我需要或敦促时我会返回。

# ios - 区域示例应用程序损坏或模拟器损坏

> ID：11400012
> 
> 赞同：0
> 
> 时间：2012-07-09T17:24:15.723
> 
> 标签：ios, ios-simulator, cllocationmanager

基本上，我无法获得越界事件 - locationManager:did[Enter|Exit]Region: - 来触发。

我[之前](https://stackoverflow.com/questions/11388003/testing-location-with-simulator)发布了关于使用模拟器测试位置的信息，但现在我认为我应该重新表述这个问题。

我查看了源代码并确保只使用了标准位置服务，而不是重大更改，尽管它们仅在应用程序进入后台或被暂停时使用，因此它不应该相关。我还使用了 regionMonitoringEnabled 和 regionMonitoringAvailable 来检查它们在模拟器中是否确实可用（它们是）。

但还是一无所获。updateWithEvent 未被调用，因此表格/图标徽章编号未被更新。

我会继续寻找，但我不知道它是否与 API 的工作方式有关（locationManager:did[Enter|Exit]Region:) 还是模拟器的东西（尽管模拟器很好地显示了位置更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:16:14.400

这实际上是 iOS 5.1 模拟器中的一个已知错误。我已经向 Apple 提交了雷达以修复它，但基本上被忽略了。他们回答说“它在 iOS 6 beta 模拟器中是否有效”。它确实如此。

我遇到了同样的问题，它只触发一个用于区域监控的位置事件。进出，但不超过一个。

您可以下载 5.0 模拟器，它应该仍然可以工作，或者下载新的 iOS 6 测试版（如果您有访问权限）来测试区域监控，然后返回 5.1 进行其他任何操作。抱歉，我没有更好的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:27:34.883

尝试转到“iOS 模拟器”>“重置内容和设置”。从模拟器故障排除问题开始，这始终是一个很好的起点。它执行相当于还原的设备。如果您在模拟器的文件系统中乱搞，这尤其相关。

# android - 记录，android活动的类

> ID：11400020
> 
> 赞同：1
> 
> 时间：2012-07-09T17:24:53.310
> 
> 标签：android, class

我有一个应用程序的想法，但我不知道如何开始编程。其实最难的是：

当（例如）单击消息图标或假设设置菜单已打开时，是否有一个类会收到通知？

我想制作一个记录某些电话活动的应用程序。比如：晚上10点打开设置，晚上9.59最后一次解锁手机等等。

你能把我推向正确的方向吗？不需要编码，我会很高兴只用类名或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:32:58.867

> 当（例如）单击消息图标或假设设置菜单已打开时，是否有一个类会收到通知？

不，对不起。

如果您浏览 StackOverflow 和博客，您会发现各种解决方法，通常涉及轮询。Dianne Hackborn 在 2012 年 Google I|O 大会上的一些评论表明，Android 将更积极地停止此类应用程序。

欢迎您实现自己的主屏幕，在这种情况下，您会发现用户何时点击主屏幕图标，因为它们是您的图标。

# c# - System.Net.WebException 未被捕获

> ID：11400024
> 
> 赞同：0
> 
> 时间：2012-07-09T17:25:09.330
> 
> 标签：c#, exception-handling, httpwebrequest, try-catch, system.net.webexception

我有一个奇怪的问题发生。我有一些代码必须对客户端的服务器进行 http 发布。他们的帖子将内容返回给我，我需要向我的用户展示这些内容。如果你有问题，我想捕获错误并注入我自己的内容，让用户知道有问题。

这是我用于执行 http 帖子的静态助手类。

```
public static class HttpPostHelper
{
    public static string Post(string url, NameValueCollection values)
    {
        StringBuilder dataBuilder = new StringBuilder();

        foreach (var key in values.AllKeys)
        {
            EncodeAndAddItem(ref dataBuilder, key, values[key]);
        }

        Uri uri = new Uri(url);
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = dataBuilder.Length;
        using (Stream writeStream = request.GetRequestStream())
        {
            UTF8Encoding encoding = new UTF8Encoding();
            byte[] bytes = encoding.GetBytes(dataBuilder.ToString());
            writeStream.Write(bytes, 0, bytes.Length);
        }

        string result = String.Empty;

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {
            using (Stream responseStream = response.GetResponseStream())
            {
                using (StreamReader readStream = new StreamReader(responseStream, Encoding.UTF8))
                {
                    result = readStream.ReadToEnd();
                }
            }
        }

        return result;
    }

    private static void EncodeAndAddItem(ref StringBuilder baseRequest, string key, string dataItem)
    {
        if (baseRequest == null)
        {
            baseRequest = new StringBuilder();
        }
        if (baseRequest.Length != 0)
        {
            baseRequest.Append("&");
        }

        baseRequest.Append(key);
        baseRequest.Append("=");
        baseRequest.Append(System.Web.HttpUtility.UrlEncode(dataItem));
    }
} 
```

这是我发布并返回内容的代码。

```
private string GetReturnContent(string callback, NameValueCollection data, LogRequest request)
{
    string content = String.Empty;

    try
    {

        content = HttpPostHelper.Post(callback, data);

        request.Message = String.Format("Content Retrieved from Callback: {0}", content);

        logService.Debug(request);
    }
    catch (System.Net.WebException ex)
    {
        var response = ex.Response as HttpWebResponse;

        if (response != null)
        {
            if ((int)response.StatusCode == 403)
            {
                content = String.Format("The url {0} returned access denied (403).", callback);
                request.Message = content;
                logService.Warn(request);
            }
            else if ((int)response.StatusCode == 404)
            {
                content = String.Format("The url {0} returned page not found (404).", callback);
                request.Message = content;
                logService.Warn(request);
            }
            else if ((int)response.StatusCode == 405)
            {
                content = String.Format("The url {0} returned 405 error.  Please ensure the url is configured to accept http POST requests", callback);
                request.Message = content;
                logService.Warn(request);
            }
            else if ((int)response.StatusCode == 500)
            {
                content = String.Format("The url {0} returned a server error (500).", callback);
                request.Message = content;
                logService.Warn(request);
            }
            else
            {
                exceptionHandler.HandleError(ex);

                content = String.Format("The url {0} returned an error: {1}", callback, ex.Message);
                request.Message = content;
                logService.Error(request);
            }
        }
        else
        {
            exceptionHandler.HandleError(ex);

            content = String.Format("The url {0} returned an error: {1}", callback, ex.Message);
            request.Message = content;
            logService.Error(request);
        }
    }

    return content;
} 
```

问题是无论如何，我总是收到一个服务器错误报告给我（通过电子邮件报告处理程序，但那是另一回事。我已经捕获了异常，我不会重新抛出它，但我仍然得到错误报告。

> **例外：**
> 
> System.Net.WebException：无法连接到远程服务器
> 
> **内部异常消息：**
> 
> System.Net.Sockets.SocketException ：连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应[编辑]

堆栈跟踪指向这一行作为我的 PostHelper 中的罪魁祸首

```
using (Stream writeStream = request.GetRequestStream()) 
```

> 在 System.Net.HttpWebRequest.GetRequestStream(TransportContext& context) 在 System.Net.HttpWebRequest.GetRequestStream()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:34:45.747

您收到套接字错误。此错误发生在发送 HTTP 流量之前（因此，没有状态代码）。

此块将被执行（因此您的错误电子邮件通知）：

```
exceptionHandler.HandleError(ex);

content = String.Format("The url {0} returned an error: {1}", callback, ex.Message);
request.Message = content;
logService.Error(request); 
```

# rest - 在 RESTful 响应中包含聚合信息时的 URI

> ID：11400026
> 
> 赞同：3
> 
> 时间：2012-07-09T17:25:12.170
> 
> 标签：rest, aggregate, restful-url

假设我有一个 RESTful API 方法来返回有关一系列位置的数据：

/地点

```
[{
  location_id: 1,
  location_name: 'Austin'
},{
  location_id: 2,
  location_name: 'San Francisco'
},{
  location_id: 3,
  location_name: 'Seattle'
}] 
```

现在假设我想为每个位置返回一个汇总的employee_count：

```
[{
  location_id: 1,
  location_name: 'Austin',
  employee_count: 96
},{
  location_id: 2,
  location_name: 'San Francisco',
  employee_count: 71
},{
  location_id: 3,
  location_name: 'Seattle',
  employee_count: 85
}] 
```

那么，什么对 uri 最有意义呢？还是/地点？或者也许 /employees/locations？

我担心的是，每次对 /locations 的请求计算employee_count 可能会导致额外的、浪费的开销，因为employee_count 可能仅在5-10% 的时间内使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:55:17.663

你可以把它放在任何一个地方，也可以放在两个地方。您的应用程序的需求应该决定该选择。

关于您提出的设计，更重要的是您的各个位置对象不包含 URI，以便客户端导航到每个位置以获取有关它们的更详细信息。

相反，您只包含了一个 ID，大概您希望客户端使用它来构造一个特定于位置的 URI？如果是这样，您应该强烈考虑将完整的 URI 添加到每个位置的有效负载（例如，“链接”或“href”）。如果没有这种方法，您将把您的客户端与您的 URI 结构耦合起来，并使您的系统的未来发展变得更加困难。仅供参考，这种方法通常称为[HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)（超媒体作为应用程序状态的引擎）。

# ruby - 带有 Ruby 和 Savon 的 SOAP 客户端：如何在 Nonce 元素中添加 EncodingType 属性

> ID：11400029
> 
> 赞同：5
> 
> 时间：2012-07-09T17:25:18.257
> 
> 标签：ruby, web-services, soap-client, savon

我需要创建一个 ruby​​ Web 服务客户端（使用 Savon）来对需要 Nonce 中的 EncodingType 的 Web 服务进行肥皂调用。所以正确的soap消息会有这样的Nonce元素：

```
......
<wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">SomeHashValue</wsse:Nonce>
...... 
```

但是在我的 Savon 客户端中，我不知道如何在 Nonce 元素中添加该属性。我的代码在这里：

```
......
client = Savon.client do
  wsdl.endpoint = "http://webservicehost/TestWebService"
  wsdl.namespace = "namespace"
  wsse.credentials "username", "password"
  wsse.digest = "true"
end
client.request :get_service do |soap|
  soap.input = [ 
    "GetService", 
    { "xmlns" => "namespace" } 
  ]
soap.body = {
    "locale" => "en_US",
    "serviceID" => '123'
  } 
end
...... 
```

生成的 SOAP 消息中的 Nonce 如下所示：

```
 ......
    <wsse:Nonce>SomeHashValue</wsse:Nonce>
 ...... 
```

所以我的问题是，如何将属性 EncodingType 添加到 Nonce 元素，而不更改/删除 Nonce 元素中的 SomeHashValue？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T16:07:22.903

我已经成功修改了`gems\akami-1.2.1\lib\akami\wsse.rb`文件的`def wsse_username_token`方法。

我不知道最好的方法，但这确实有效，只需添加到`:attributes!`.

前：

```
:attributes! => { "wsse:Password" => { "Type" => PASSWORD_DIGEST_URI } } 
```

后：

```
:attributes! => { "wsse:Password" => { "Type" => PASSWORD_DIGEST_URI }, "wsse:Nonce" => { "EncodingType" => 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary'} } 
```

# java - 聚合根、工厂和部分聚合

> ID：11400033
> 
> 赞同：2
> 
> 时间：2012-07-09T17:25:24.660
> 
> 标签：java, domain-driven-design

我有一个名为的聚合根`Configuration`，它表示为多租户应用程序上的特定配置客户配置的所有选项。由于要配置的选项很多，用户通常遵循一系列步骤（通过向导），然后有时希望部分保存数据以便稍后完成（可能是第二天）。

我熟悉这个`Factory`概念，其规则之一是如果部分聚合对象不符合不变规则，**则不启用它们的创建。**

我的问题是如何解决**部分对象**用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:17:31.720

If you want to prevent an entity being in a incomplete state, and if you are storing that partially-filled entity just for storing the intermediate request (instead of treating it as one entity), will it be a good idea to have a separate entity to represent the "creation request"? It do make sense that creation request (which you can treat that as a factory on another aspect) can be partially filled and persisted, and upon complete, be used to create the actual entity you want.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:08:48.313

阅读您的要求向我表明，仅允许部分数据集存在聚合，因此我没有看到问题？没有不变量说“只有在完成所有步骤后聚合才被认为是有效的”，实际上似乎恰恰相反。

# wpf - 如何使用大数据搜索 Telerik radgrid wpf

> ID：11400034
> 
> 赞同：0
> 
> 时间：2012-07-09T17:25:26.703
> 
> 标签：wpf, prism, telerik-grid, radgrid

我有一个telerik RadGRid wpf，它有studentID、Marks、Status 列，通常它包含大量数据。在 Telerik 网格旁边添加了一个下拉列表，它包含所有学生 ID，当用户选择特定的 studentId 并单击按钮 Go（添加在下拉列表下）时，网格应该只显示具有相同 studentId 的行。如何做到这一点，我们遵循 MVVM 棱镜模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:31:20.950

处理这个问题的方法是添加一个过滤器。请参阅[Telerik 关于过滤 DataGridView 的文档](http://www.telerik.com/help/wpf/raddatafilter-how-to-filter-radgridview.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:12:08.510

我认为过滤应该首先在数据库级别进行。当客户端选择过滤条件时，只会查询相关数据并将其下拉到客户端。如果您需要再次在客户端进行过滤。您可以使用 WPF 集合视图源来帮助您过滤数据。除此之外，telerik Radgrid 还为数据列提供了自己的过滤。

# mysql - mysql中select命令的奇怪问题

> ID：11400036
> 
> 赞同：2
> 
> 时间：2012-07-09T17:25:35.447
> 
> 标签：mysql, select

我在 mysql 控制台中运行以下查询：

```
SELECT * 
FROM has 
WHERE tweetId <= 32344308065509376 AND tweetId >= 31486746491363330 
```

但记录与`tweetId=32342160586047488`不在结果集中！！！！！！！但它存在于表“有”中！任何人都可以帮助我克服这个奇怪的问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:29:50.133

要么是解析错误，要么你的表需要修复。

# wordpress - 覆盖二十一主题选项链接颜色样式

> ID：11400043
> 
> 赞同：0
> 
> 时间：2012-07-09T17:26:25.367
> 
> 标签：wordpress

我正在尝试覆盖该功能（以升级安全的方式）

```
twentyeleven_print_link_color_style 
```

位于 wp-content/themes/twentyeleven/inc/theme-options.php 的第 378 行

我在我的子主题functions.php 中尝试了以下内容，但是twentyeleven_print_link_color_style 仍在触发（我可以看到它正在输出的css）。

```
add_action( 'after_setup_theme', 'goodbye_internal_style_sheet' );
function goodbye_internal_style_sheet() {
    remove_filter( 'wp_head', 'twentyeleven_print_link_color_style' );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:42:32.393

```
add_action( 'init', 'goodbye_internal_style_sheet' );
function goodbye_internal_style_sheet() {
    remove_action( 'wp_head', 'twentyeleven_print_link_color_style' );
} 
```

*   需要 remove_filter 而不是 action
*   正在使用 add_action 挂钩错误的操作

# c# - 如何获取 Windows Phone 上的处理器数量

> ID：11400045
> 
> 赞同：0
> 
> 时间：2012-07-09T17:26:28.333
> 
> 标签：c#, .net, xna, windows-phone-7.1

我想知道如何获取 Windows Phone 上的处理器数量...如 MSDN 中所述，以下语句总是抛出 MethodAccessException：

```
Environment.ProcessorCount 
```

任何帮助，将不胜感激。

谢谢，j3d

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:31:07.647

如 MSDN 中所述，此属性`SecurityCriticalAttribute`仅用于内部，您不能从应用程序中使用。来自 MSDN：

> 此成员在 Silverlight for Windows Phone 上具有 SecurityCriticalAttribute 属性，因为该属性存在于 Silverlight 3 中。此属性将此成员限制为内部使用。使用此成员的应用程序代码会引发 MethodAccessException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:31:34.400

根据[这个](http://forums.create.msdn.com/forums/p/76703/466036.aspx)链接到您提到的 MSDN[文档](http://msdn.microsoft.com/en-us/library/system.environment.processorcount%28v=vs.95%29.aspx)的论坛帖子，您无法在 Windows Phone 上以编程方式获取处理器计数。

# filtering - Wireshark：在 GUI 中按组播过滤

> ID：11400046
> 
> 赞同：20
> 
> 时间：2012-07-09T17:26:40.277
> 
> 标签：filtering, multicast, wireshark

使用 Wireshark GUI 中的 Wireshark“过滤器”字段，我想过滤捕获结果，以便只显示多播数据包。

我看过[这篇文章](https://stackoverflow.com/questions/9728285/sending-multicast-udp-by-gcdasyncudpsocket-fails-no-activity-in-wireshark)，但这不适用于 GUI 过滤器字段。[这个 Wireshark 页面](http://wiki.wireshark.org/CaptureFilters)展示了如何过滤多播，而不是如何过滤*除*多播之外的所有内容。

有谁知道一个简单的语句可以做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-09T17:37:10.143

就用这个`(eth.dst[0] & 1)`。多播流量由 MAC 地址的最高有效字节的最低有效位识别。如果为 1，多播，如果为 0，则不。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-23T10:04:40.907

```
(eth.dst[0]&1) 
```

将过滤多播和广播。所以，从此排除广播。它会像

```
(eth.dst[0]&1) && !eth.dst==ff:ff:ff:ff:ff:ff 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-31T16:17:22.250

使用 Wireshark（Linux 的 2.2.6 版本）可以选择过滤器“ **eth.ig == 1** ”

它指的是以太网帧中存在的“IG 位”。

IG 位区分 MAC 地址是个人地址还是组（因此是 IG）地址。也就是说，IG 位为 0 表示这是一个单播 MAC 地址，IG 位为 1 表示这是一个组播或广播地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-16T18:01:00.803

我通过反复试验的过程遇到了这个解决方案。

由于多播地址以“1110”开头（128+64+32+0 = 224），因此发送到以 1110 开头的 IP 地址的数据包的目的地是多播地址。因此，匹配掩码 224.0.0.0/4 的数据包的目的地是多播地址。

因此，此显示过滤器应仅将数据包过滤到多播地址：

```
ip.dst==224.0.0.0/4 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-09T17:29:04.460

您是否尝试过仅用`multicast`作过滤器？因为如果`not multicast`过滤掉所有多播数据包并让其他所有内容都像您链接的页面所显示的那样，那么这只是合乎逻辑的。

# extjs4 - 窗口内不显示面板

> ID：11400051
> 
> 赞同：1
> 
> 时间：2012-07-09T17:27:12.310
> 
> 标签：extjs4, extjs-mvc, extjs4.1

我有一个窗口，我想给它添加一个面板。我的代码如下；我看到了窗口，但没有看到面板。为什么我的代码没有显示面板？

然后我想为每个面板着色。它也不起作用。

```
Ext.define('Sports.view.WelcomeWindow', {
    extend: 'Ext.window.Window',
    alias : 'widget.welcomewin',
    layout:'fit',
    defaults: {
    bodyStyle: 'padding:10px'
    },
    items: [panel1]
    });
//column.show();
var panel1 = Ext.create('Ext.panel.Panel', {
    title: 'Panel 1',
    html: 'Body 1',
    id: 'panel1Id',
    columnWidth: .25, //means 25%
    height: 120
    });

var resultQuery = Ext.ComponentQuery.query('panel');
var colors = ['#ACFA8A','#F4FA8A','#FAB38A','#8AE9FA','#CA8AFA'];
for (var i = 0; i < resultQuery.length; i++) {
resultQuery[i].body.highlight(colors[i], {duration: 10000});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:05:09.623

`panel1`定义时将不在范围内`WelcomeWindow`。配置属性通常需要`Ext.create`引用或（更好）组件配置对象。所以你有两个选择：

```
Ext.define('Sports.view.WelcomeWindow', {
    extend: 'Ext.window.Window',
    alias : 'widget.welcomewin',
    layout:'fit',
    defaults: {
        bodyStyle: 'padding:10px'
    },
    items: [
        Ext.create('Ext.panel.Panel', {
            title: 'Panel 1',
            html: 'Body 1',
            id: 'panel1Id',
            columnWidth: .25, //means 25%
            height: 120
        }) 
    ]
}); 
```

或者更好的一个：

```
Ext.define('Sports.view.WelcomeWindow', {
    extend: 'Ext.window.Window',
    alias : 'widget.welcomewin',
    layout:'fit',
    defaults: {
        bodyStyle: 'padding:10px'
    },
    items: {
            xtype: 'panel',
            title: 'Panel 1',
            html: 'Body 1',
            id: 'panel1Id',
            columnWidth: .25, //means 25%
            height: 120
    }
}); 
```

此外，您在实际创建窗口时提供的代码也不清楚，因此颜色设置可能会失败，因为窗口尚未创建。

# http - Glassfish HTTP 和 HTTPS 结合

> ID：11400059
> 
> 赞同：0
> 
> 时间：2012-07-09T17:27:48.090
> 
> 标签：http, ssl, https, glassfish

我有一个网络应用程序（电子贸易）。普通页面使用 http 协议。我必须做一些 https 激活页面。我的问题是，我如何安排 Glassfish 服务器，此页面使用 http，这些页面使用 https，我如何在 Glassfish 服务器上或使用其他配置实现这个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:14:22.300

GlassFish 在不同的侦听器上支持这两种协议。所以你要找的地方就是服务器配置。这是一个很好的起点：http: [//javadude.wordpress.com/2010/04/06/getting-started-with-glassfish-v3-and-ssl/](http://javadude.wordpress.com/2010/04/06/getting-started-with-glassfish-v3-and-ssl/) 两者之间的“切换”实际上意味着重定向。这正是名字所说的。您必须重定向到安全页面并返回。没有任何“应用程序魔术”可以解决问题。希望有帮助。

# html - 创建一个标签框，如stackoverflow的

> ID：11400064
> 
> 赞同：5
> 
> 时间：2012-07-09T17:28:29.810
> 
> 标签：html, css, tags

我真的很想知道如何安排一个标签框，就像我们在这里的 Stackoverflow 一样。

我快到了，我只需要以这样一种方式排列标签，即当标签容器宽度超过时，标签会被推到左边而不是向右或向下。

到目前为止，我有这个 CSS 代码：

```
#tagsContainer{
    border: 1px solid black;
    width: 400px;
    height: 28px;
    overflow-x: scroll;
}
#tagsBox{
    float: left;
}
#tagsTxtBox{
    float: right;
} 
```

这个 HTML 代码：

```
<div id="tagsContainer">
    <div id="tagsBox"></div>
    <div id="tagTxtBox"><input type="text" id="autocompletes" /></div>
</div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T17:38:19.973

看看这个链接：[选择](http://harvesthq.github.com/chosen/)和[令牌输入](http://loopj.com/jquery-tokeninput/)。我在论坛上找到了两个：[jQuery plugin for a simple input box for comma-separated tags with autosuggest](https://stackoverflow.com/questions/8260359/jquery-plugin-for-a-simple-input-box-for-comma-separated-tags-with-autosuggest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:47:56.077

我通过将`direction`.tagsBox 设置为`rtl`（代表“从右到左”）解决了这个问题，并添加了`'text-align: left'`. 文本仍然与框的左边框对齐，但是当它太长并溢出框时，它会溢出框的左侧。

这确实会改变标签的顺序。但是，既然它们就是这样，我猜顺序并不重要。

# ios - Enterprise iOS App - 如何动态跟踪 UDID

> ID：11400067
> 
> 赞同：0
> 
> 时间：2012-07-09T17:28:55.900
> 
> 标签：ios, ipad, enterprise, udid

亲爱的 StackOverflow 社区，

我有一个企业应用程序，它必须跟踪我们组织/网络中所有 ipad 设备的 UDID。现在，我们共有 9 台 ipad 设备正在使用，它们具有 wifi 连接。跟踪 UDID 的目的是为了分析目的从我们每个单独的 ipad 中检索用户数据。

到目前为止，在 XCode 中构建 IPA 文件之前，我们必须在配置中手动输入每个 UDID，但我们发现这很麻烦，想知道是否有解决方案可以为未来的 ipad 设备输入新的 UDID 而无需创建每次一个新的 IPA。

例如，当我们的网络超过 9 个 ipad 设备时，我们必须再添加 5 个 ipad，我们如何动态输入新的 UDID？

有没有办法通过http调用（或其他方法）动态或以编程方式输入UDID，这样我们就不必每次都重建一个新的？

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:28:59.643

关于您的第二点 - “我真的必须将每个 UDID 添加到配置文件并重新构建 IPA 吗？” - 不，幸运的是你没有。

如果您发现使用九台设备已经够难了，想象一下拥有数百台设备的公司如果每次出现新设备时都必须重新构建应用程序会是什么感觉！

但是，您需要使用 Apple 的*企业部署*流程，而不是您可能习惯的标准部署流程。为此，您首先需要一个企业开发帐户，这与大多数人会获得的 99 美元的开发者帐户不同（对于初学者来说，它的成本更高，并且您还需要提供一些额外的法律文件）。

您可以在此处找到有关它的更多信息：[https ://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:18:15.730

看来你有两个问题：

*   我可以从我的应用程序访问 UDID 吗？
*   我真的必须将每个 UDID 添加到配置文件吗？

要从您的应用程序访问 UDID，（用于分析或其他）只需执行

```
NSString *udid = [[UIDevice currentDevice] uniqueIdentifier]; 
```

此方法已从 iOS 5 中弃用，但仍应有效。推荐的解决方案是自己生成一个唯一 ID，然后使用它。从您的问题描述中不清楚您是否真的需要 UDID，或者只是任何 ID。

我不知道是否可以在没有配置文件的情况下部署一个应用程序，其中包含每个 UDID，但我对此表示怀疑。有一些工具可以提供帮助，例如[UDID Sender](http://itunes.apple.com/us/app/udid-sender/id306603975?mt=8)。您还可以从 iTunes 复制粘贴 UDID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:21:27.070

我认为至少部分问题可以通过[Testflight](https://testflightapp.com)解决——它是免费的，并且允许您即时注册设备。用户添加新设备后，您会收到一封包含设备 UDID 的电子邮件。您仍然需要在 iTunes 配置门户上手动添加 UDID 并重新生成配置文件。

祝你好运！

# ipad - HTML5 视频无法在 iPad 上播放 - 黑屏

> ID：11400068
> 
> 赞同：1
> 
> 时间：2012-07-09T17:28:56.560
> 
> 标签：ipad, html, ios-simulator, html5-video

我看过与我的问题相关的各种帖子，但没有一个可以帮助我解决我的问题。我有一个适用于 iPad 的 HTML5 网络应用程序，我想在其中显示一些视频。我使用带有控件的视频标签，只看到一个黑屏，视频应该去的地方。我为 iPad 正确编码了视频，它在 Safari 中播放良好，但是当我尝试使用 iPad 模拟器时，我只看到黑色区域。我尝试制作一个只有视频的准系统网页，但仍然没有任何效果。可能是什么问题呢？

# save - 如何在 InstallShield 中存储安装信息？

> ID：11400072
> 
> 赞同：0
> 
> 时间：2012-07-09T17:29:07.597
> 
> 标签：save, settings, installshield, maintenance, installscript

所以我有一个 InstallShield 2009 Premier 项目和一个带有文本（可编辑）字段的自定义对话框。我需要在维护模式（特别是 REPAIR）期间在该字段中输入值（字符串）。我认为我应该将此信息存储在注册表中。问题是如何找到特定于这个（当前）安装实例的注册表项。我还需要支持多个安装。

是否有一个 InstallScript 函数来检索当前安装的注册表项，我可以在其中创建自己的子项？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:52:34.373

一次只能安装给定 MSI 的一个实例`ProductCode`，因此您可以在自定义操作或系统搜索中使用该属性（如果这是纯 InstallScript 项目，则可以使用`PRODUCT_GUID`and变量）。`INSTANCE_GUID`存储此类内容的一个常见位置是在“卸载”键中使用字符串数据。

# php - 如何按标题和所有者列出类别

> ID：11400074
> 
> 赞同：0
> 
> 时间：2012-07-09T17:29:14.410
> 
> 标签：php, mysql

我目前有以下代码。

```
<?php
$sectionsSide=mysql_query("SELECT * FROM categories ORDER by owner ASC");
while($sectionsSideRow=mysql_fetch_array($sectionsSide)) {
$url=strtolower(str_replace(' ', '-', $sectionsSideRow['title']));
echo '<li><a href="'.$cls->root().'/category/'.$url.'/">'.$sectionsSideRow['title'].'</a></li>';
}
?> 
```

我希望它由所有者显示，然后由所有者中的标题显示，如果这有意义的话。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:33:56.560

尝试

```
SELECT * FROM categories ORDER by owner ASC, title ASC 
```

# android - 使用 BluetoothChat 与 ELM327 通信

> ID：11400083
> 
> 赞同：6
> 
> 时间：2012-07-09T17:29:53.737
> 
> 标签：android, bluetooth, connection

我目前正在尝试通过 BluetoothChat 示例应用程序与 ELM327 OBDII 蓝牙加密狗进行通信。我可以连接，因为我更改了 UUID，但是我只能接收启动命令和提示“>”来发送命令，每当我尝试发送命令时，我都会得到以下信息

*   CAN OBDII:ELM327 v1.2a>
*   我：ATRV
*   CAN OBDII:ATRV
*   可以 OBDII:>
*   可以 OBDII：？

现在我在这里阅读以将“\r”附加到命令中，但是当我这样做时，我得到了完全相同的响应。我正在使用示例应用程序“BluetoothChat”

主班...

```
public class BluetoothChat extends Activity {
    // Debugging
    private static final String TAG = "BluetoothChat";
    private static final boolean D = true;

    // Message types sent from the BluetoothChatService Handler
    public static final int MESSAGE_STATE_CHANGE = 1;
    public static final int MESSAGE_READ = 2;
    public static final int MESSAGE_WRITE = 3;
    public static final int MESSAGE_DEVICE_NAME = 4;
    public static final int MESSAGE_TOAST = 5;

    // Key names received from the BluetoothChatService Handler
    public static final String DEVICE_NAME = "device_name";
    public static final String TOAST = "toast";

    // Intent request codes
    private static final int REQUEST_CONNECT_DEVICE_SECURE = 1;
    private static final int REQUEST_CONNECT_DEVICE_INSECURE = 2;
    private static final int REQUEST_ENABLE_BT = 3;

    // Layout Views
    private TextView mTitle;
    private ListView mConversationView;
    private EditText mOutEditText;
    private Button mSendButton;

    // Name of the connected device
    private String mConnectedDeviceName = null;
    // Array adapter for the conversation thread
    private ArrayAdapter<String> mConversationArrayAdapter;
    // String buffer for outgoing messages
    private StringBuffer mOutStringBuffer;
    // Local Bluetooth adapter
    private BluetoothAdapter mBluetoothAdapter = null;
    // Member object for the chat services
    private BluetoothChatService mChatService = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(D) Log.e(TAG, "+++ ON CREATE +++");

        // Set up the window layout
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.main);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

        // Set up the custom title
        mTitle = (TextView) findViewById(R.id.title_left_text);
        mTitle.setText(R.string.app_name);
        mTitle = (TextView) findViewById(R.id.title_right_text);

        // Get local Bluetooth adapter
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

        // If the adapter is null, then Bluetooth is not supported
        if (mBluetoothAdapter == null) {
            Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
            finish();
            return;
        }
    }

    @Override
    public void onStart() {
        super.onStart();
        if(D) Log.e(TAG, "++ ON START ++");

        // If BT is not on, request that it be enabled.
        // setupChat() will then be called during onActivityResult
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
        // Otherwise, setup the chat session
        } else {
            if (mChatService == null) setupChat();
        }
    }

    @Override
    public synchronized void onResume() {
        super.onResume();
        if(D) Log.e(TAG, "+ ON RESUME +");

        // Performing this check in onResume() covers the case in which BT was
        // not enabled during onStart(), so we were paused to enable it...
        // onResume() will be called when ACTION_REQUEST_ENABLE activity returns.
        if (mChatService != null) {
            // Only if the state is STATE_NONE, do we know that we haven't started already
            if (mChatService.getState() == BluetoothChatService.STATE_NONE) {
              // Start the Bluetooth chat services
              mChatService.start();
            }
        }
    }

    private void setupChat() {
        Log.d(TAG, "setupChat()");

        // Initialize the array adapter for the conversation thread
        mConversationArrayAdapter = new ArrayAdapter<String>(this, R.layout.message);
        mConversationView = (ListView) findViewById(R.id.in);
        mConversationView.setAdapter(mConversationArrayAdapter);

        // Initialize the compose field with a listener for the return key
        mOutEditText = (EditText) findViewById(R.id.edit_text_out);
        mOutEditText.setOnEditorActionListener(mWriteListener);

        // Initialize the send button with a listener that for click events
        mSendButton = (Button) findViewById(R.id.button_send);
        mSendButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // Send a message using content of the edit text widget
                TextView view = (TextView) findViewById(R.id.edit_text_out);
                String message = view.getText().toString();
                sendMessage(message);
            }
        });

        // Initialize the BluetoothChatService to perform bluetooth connections
        mChatService = new BluetoothChatService(this, mHandler);

        // Initialize the buffer for outgoing messages
        mOutStringBuffer = new StringBuffer("");
    }

    @Override
    public synchronized void onPause() {
        super.onPause();
        if(D) Log.e(TAG, "- ON PAUSE -");
    }

    @Override
    public void onStop() {
        super.onStop();
        if(D) Log.e(TAG, "-- ON STOP --");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        // Stop the Bluetooth chat services
        if (mChatService != null) mChatService.stop();
        if(D) Log.e(TAG, "--- ON DESTROY ---");
    }

    private void ensureDiscoverable() {
        if(D) Log.d(TAG, "ensure discoverable");
        if (mBluetoothAdapter.getScanMode() !=
            BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
            Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
            discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
            startActivity(discoverableIntent);
        }
    }

    /**
     * Sends a message.
     * @param message  A string of text to send.
     */
    private void sendMessage(String message) {
        // Check that we're actually connected before trying anything
        if (mChatService.getState() != BluetoothChatService.STATE_CONNECTED) {
            Toast.makeText(this, R.string.not_connected, Toast.LENGTH_SHORT).show();
            return;
        }

        // Check that there's actually something to send
        if (message.length() > 0) {
            // Get the message bytes and tell the BluetoothChatService to write
            byte[] send = message.getBytes();
            mChatService.write(send);

            // Reset out string buffer to zero and clear the edit text field
            mOutStringBuffer.setLength(0);
            mOutEditText.setText(mOutStringBuffer);
        }
    }

    // The action listener for the EditText widget, to listen for the return key
    private TextView.OnEditorActionListener mWriteListener =
        new TextView.OnEditorActionListener() {
        public boolean onEditorAction(TextView view, int actionId, KeyEvent event) {
            // If the action is a key-up event on the return key, send the message
            if (actionId == EditorInfo.IME_NULL && event.getAction() == KeyEvent.ACTION_UP) {
                String message = view.getText().toString();
                sendMessage(message);
            }
            if(D) Log.i(TAG, "END onEditorAction");
            return true;
        }
    };

    // The Handler that gets information back from the BluetoothChatService
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_STATE_CHANGE:
                if(D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
                switch (msg.arg1) {
                case BluetoothChatService.STATE_CONNECTED:
                    mTitle.setText(R.string.title_connected_to);
                    mTitle.append(mConnectedDeviceName);
                    mConversationArrayAdapter.clear();
                    break;
                case BluetoothChatService.STATE_CONNECTING:
                    mTitle.setText(R.string.title_connecting);
                    break;
                case BluetoothChatService.STATE_LISTEN:
                case BluetoothChatService.STATE_NONE:
                    mTitle.setText(R.string.title_not_connected);
                    break;
                }
                break;
            case MESSAGE_WRITE:
                Log.i(TAG, "WRITING!");
                byte[] writeBuf = (byte[]) msg.obj;
                // construct a string from the buffer
                String writeMessage = new String(writeBuf);
                mConversationArrayAdapter.add("Me:  " + writeMessage);
                break;
            case MESSAGE_READ:
                Log.i(TAG, "READING");
                String readMessage = (String) msg.obj;

                // construct a string from the valid bytes in the buffer

                mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
                break;
            case MESSAGE_DEVICE_NAME:
                // save the connected device's name
                mConnectedDeviceName = msg.getData().getString(DEVICE_NAME);
                Toast.makeText(getApplicationContext(), "Connected to "
                               + mConnectedDeviceName, Toast.LENGTH_SHORT).show();
                break;
            case MESSAGE_TOAST:
                Toast.makeText(getApplicationContext(), msg.getData().getString(TOAST),
                               Toast.LENGTH_SHORT).show();
                break;
            }
        }
    };

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(D) Log.d(TAG, "onActivityResult " + resultCode);
        switch (requestCode) {
        case REQUEST_CONNECT_DEVICE_SECURE:
            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {
                connectDevice(data, true);
            }
            break;
        case REQUEST_CONNECT_DEVICE_INSECURE:
            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {
                connectDevice(data, false);
            }
            break;
        case REQUEST_ENABLE_BT:
            // When the request to enable Bluetooth returns
            if (resultCode == Activity.RESULT_OK) {
                // Bluetooth is now enabled, so set up a chat session
                setupChat();
            } else {
                // User did not enable Bluetooth or an error occured
                Log.d(TAG, "BT not enabled");
                Toast.makeText(this, R.string.bt_not_enabled_leaving, Toast.LENGTH_SHORT).show();
                finish();
            }
        }
    }

    private void connectDevice(Intent data, boolean secure) {
        // Get the device MAC address
        String address = data.getExtras()
            .getString(DeviceListActivity.EXTRA_DEVICE_ADDRESS);
        // Get the BLuetoothDevice object
        BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
        // Attempt to connect to the device
        mChatService.connect(device, secure);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.option_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent serverIntent = null;
        switch (item.getItemId()) {
        case R.id.secure_connect_scan:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, DeviceListActivity.class);
            startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_SECURE);
            return true;
        case R.id.insecure_connect_scan:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, DeviceListActivity.class);
            startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_INSECURE);
            return true;
        case R.id.discoverable:
            // Ensure this device is discoverable by others
            ensureDiscoverable();
            return true;
        }
        return false;
    }

}

package com.example.android.BluetoothChat;

import java.io.IOException;

/**
 * This class does all the work for setting up and managing Bluetooth
 * connections with other devices. It has a thread that listens for
 * incoming connections, a thread for connecting with a device, and a
 * thread for performing data transmissions when connected.
 */
public class BluetoothChatService {
    // Debugging
    private static final String TAG = "BluetoothChatService";
    private static final boolean D = true;

    // Name for the SDP record when creating server socket
    private static final String NAME_SECURE = "BluetoothChatSecure";
    private static final String NAME_INSECURE = "BluetoothChatInsecure";

    // Unique UUID for this application
    private static final UUID MY_UUID_SECURE =
        UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    private static final UUID MY_UUID_INSECURE =
        UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

    // Member fields
    private final BluetoothAdapter mAdapter;
    private final Handler mHandler;
    private AcceptThread mSecureAcceptThread;
    private AcceptThread mInsecureAcceptThread;
    private ConnectThread mConnectThread;
    private ConnectedThread mConnectedThread;
    private int mState;

    // Constants that indicate the current connection state
    public static final int STATE_NONE = 0;       // we're doing nothing
    public static final int STATE_LISTEN = 1;     // now listening for incoming connections
    public static final int STATE_CONNECTING = 2; // now initiating an outgoing connection
    public static final int STATE_CONNECTED = 3;  // now connected to a remote device

    /**
     * Constructor. Prepares a new BluetoothChat session.
     * @param context  The UI Activity Context
     * @param handler  A Handler to send messages back to the UI Activity
     */
    public BluetoothChatService(Context context, Handler handler) {
        mAdapter = BluetoothAdapter.getDefaultAdapter();
        mState = STATE_NONE;
        mHandler = handler;
    }

    /**
     * Set the current state of the chat connection
     * @param state  An integer defining the current connection state
     */
    private synchronized void setState(int state) {
        if (D) Log.d(TAG, "setState() " + mState + " -> " + state);
        mState = state;

        // Give the new state to the Handler so the UI Activity can update
        mHandler.obtainMessage(BluetoothChat.MESSAGE_STATE_CHANGE, state, -1).sendToTarget();
    }

    /**
     * Return the current connection state. */
    public synchronized int getState() {
        return mState;
    }

    /**
     * Start the chat service. Specifically start AcceptThread to begin a
     * session in listening (server) mode. Called by the Activity onResume() */
    public synchronized void start() {
        if (D) Log.d(TAG, "start");

        // Cancel any thread attempting to make a connection
        if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

        setState(STATE_LISTEN);

        // Start the thread to listen on a BluetoothServerSocket
        if (mSecureAcceptThread == null) {
            mSecureAcceptThread = new AcceptThread(true);
            mSecureAcceptThread.start();
        }
        if (mInsecureAcceptThread == null) {
            mInsecureAcceptThread = new AcceptThread(false);
            mInsecureAcceptThread.start();
        }
    }

    /**
     * Start the ConnectThread to initiate a connection to a remote device.
     * @param device  The BluetoothDevice to connect
     * @param secure Socket Security type - Secure (true) , Insecure (false)
     */
    public synchronized void connect(BluetoothDevice device, boolean secure) {
        if (D) Log.d(TAG, "connect to: " + device);

        // Cancel any thread attempting to make a connection
        if (mState == STATE_CONNECTING) {
            if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

        // Start the thread to connect with the given device
        mConnectThread = new ConnectThread(device, secure);
        mConnectThread.start();
        setState(STATE_CONNECTING);
    }

    /**
     * Start the ConnectedThread to begin managing a Bluetooth connection
     * @param socket  The BluetoothSocket on which the connection was made
     * @param device  The BluetoothDevice that has been connected
     */
    public synchronized void connected(BluetoothSocket socket, BluetoothDevice
            device, final String socketType) {
        if (D) Log.d(TAG, "connected, Socket Type:" + socketType);

        // Cancel the thread that completed the connection
        if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

        // Cancel the accept thread because we only want to connect to one device
        if (mSecureAcceptThread != null) {
            mSecureAcceptThread.cancel();
            mSecureAcceptThread = null;
        }
        if (mInsecureAcceptThread != null) {
            mInsecureAcceptThread.cancel();
            mInsecureAcceptThread = null;
        }

        // Start the thread to manage the connection and perform transmissions
        mConnectedThread = new ConnectedThread(socket, socketType);
        mConnectedThread.start();

        // Send the name of the connected device back to the UI Activity
        Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_DEVICE_NAME);
        Bundle bundle = new Bundle();
        bundle.putString(BluetoothChat.DEVICE_NAME, device.getName());
        msg.setData(bundle);
        mHandler.sendMessage(msg);

        setState(STATE_CONNECTED);
    }

    /**
     * Stop all threads
     */
    public synchronized void stop() {
        if (D) Log.d(TAG, "stop");

        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }

        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        if (mSecureAcceptThread != null) {
            mSecureAcceptThread.cancel();
            mSecureAcceptThread = null;
        }

        if (mInsecureAcceptThread != null) {
            mInsecureAcceptThread.cancel();
            mInsecureAcceptThread = null;
        }
        setState(STATE_NONE);
    }

    /**
     * Write to the ConnectedThread in an unsynchronized manner
     * @param out The bytes to write
     * @see ConnectedThread#write(byte[])
     */
    public void write(byte[] out) {
        // Create temporary object
        ConnectedThread r;
        // Synchronize a copy of the ConnectedThread
        synchronized (this) {
            if (mState != STATE_CONNECTED) return;
            r = mConnectedThread;
        }
        // Perform the write unsynchronized
        r.write(out);
    }

    /**
     * Indicate that the connection attempt failed and notify the UI Activity.
     */
    private void connectionFailed() {
        // Send a failure message back to the Activity
        Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_TOAST);
        Bundle bundle = new Bundle();
        bundle.putString(BluetoothChat.TOAST, "Unable to connect device");
        msg.setData(bundle);
        mHandler.sendMessage(msg);

        // Start the service over to restart listening mode
        BluetoothChatService.this.start();
    }

    /**
     * Indicate that the connection was lost and notify the UI Activity.
     */
    private void connectionLost() {
        // Send a failure message back to the Activity
        Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_TOAST);
        Bundle bundle = new Bundle();
        bundle.putString(BluetoothChat.TOAST, "Device connection was lost");
        msg.setData(bundle);
        mHandler.sendMessage(msg);

        // Start the service over to restart listening mode
        BluetoothChatService.this.start();
    }

    /**
     * This thread runs while listening for incoming connections. It behaves
     * like a server-side client. It runs until a connection is accepted
     * (or until cancelled).
     */
    private class AcceptThread extends Thread {
        // The local server socket
        private final BluetoothServerSocket mmServerSocket;
        private String mSocketType;

        public AcceptThread(boolean secure) {
            BluetoothServerSocket tmp = null;
            mSocketType = secure ? "Secure":"Insecure";

            // Create a new listening server socket
            try {
                if (secure) {
                    tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE,
                        MY_UUID_SECURE);
                } else {
                    tmp = mAdapter.listenUsingInsecureRfcommWithServiceRecord(
                            NAME_INSECURE, MY_UUID_INSECURE);
                }
            } catch (IOException e) {
                Log.e(TAG, "Socket Type: " + mSocketType + "listen() failed", e);
            }
            mmServerSocket = tmp;
        }

        public void run() {
            if (D) Log.d(TAG, "Socket Type: " + mSocketType +
                    "BEGIN mAcceptThread" + this);
            setName("AcceptThread" + mSocketType);

            BluetoothSocket socket = null;

            // Listen to the server socket if we're not connected
            while (mState != STATE_CONNECTED) {
                try {
                    // This is a blocking call and will only return on a
                    // successful connection or an exception
                    socket = mmServerSocket.accept();
                } catch (IOException e) {
                    Log.e(TAG, "Socket Type: " + mSocketType + "accept() failed", e);
                    break;
                }

                // If a connection was accepted
                if (socket != null) {
                    synchronized (BluetoothChatService.this) {
                        switch (mState) {
                        case STATE_LISTEN:
                        case STATE_CONNECTING:
                            // Situation normal. Start the connected thread.
                            connected(socket, socket.getRemoteDevice(),
                                    mSocketType);
                            break;
                        case STATE_NONE:
                        case STATE_CONNECTED:
                            // Either not ready or already connected. Terminate new socket.
                            try {
                                socket.close();
                            } catch (IOException e) {
                                Log.e(TAG, "Could not close unwanted socket", e);
                            }
                            break;
                        }
                    }
                }
            }
            if (D) Log.i(TAG, "END mAcceptThread, socket Type: " + mSocketType);

        }

        public void cancel() {
            if (D) Log.d(TAG, "Socket Type" + mSocketType + "cancel " + this);
            try {
                mmServerSocket.close();
            } catch (IOException e) {
                Log.e(TAG, "Socket Type" + mSocketType + "close() of server failed", e);
            }
        }
    }

    /**
     * This thread runs while attempting to make an outgoing connection
     * with a device. It runs straight through; the connection either
     * succeeds or fails.
     */
    private class ConnectThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final BluetoothDevice mmDevice;
        private String mSocketType;

        public ConnectThread(BluetoothDevice device, boolean secure) {
            mmDevice = device;
            BluetoothSocket tmp = null;
            mSocketType = secure ? "Secure" : "Insecure";

            // Get a BluetoothSocket for a connection with the
            // given BluetoothDevice
            try {
                if (secure) {
                    tmp = device.createRfcommSocketToServiceRecord(
                            MY_UUID_SECURE);
                } else {
                    tmp = device.createInsecureRfcommSocketToServiceRecord(
                            MY_UUID_INSECURE);
                }
            } catch (IOException e) {
                Log.e(TAG, "Socket Type: " + mSocketType + "create() failed", e);
            }
            mmSocket = tmp;
        }

        public void run() {
            Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
            setName("ConnectThread" + mSocketType);

            // Always cancel discovery because it will slow down a connection
            mAdapter.cancelDiscovery();

            // Make a connection to the BluetoothSocket
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception
                mmSocket.connect();
            } catch (IOException e) {
                // Close the socket
                try {
                    mmSocket 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T17:52:09.203

The fact that the characters are being correctly echo'd back probably indicates that the baud rate is set correctly and the device is seeing the characters you want. It sounds, though, like the device is still not seeing a properly terminated request string (one that ends with a carriage return).

I mention this because you noted appending "/r", which is not the same thing as "\r" (the CR character). For example, in Java:

```
OutputStream out;

String correct = "ATRV\r";
//This line will correctly write 5 bytes (in hex): 41 54 52 56 0D
out.write(correct.getBytes());

String incorrect = "ATRV/r";
//This line will incorrectly write 6 bytes (in hex): 41 54 52 56 2F 72
out.write(incorrect.getBytes()); 
```

The 0x0D character is what the ELM327 is looking for to terminate the AT command and parse it.

**Edit:**

If you are manually typing the characters "atrv\r" using your keyboard into a sample application, the same problem exists. The text is being interpreted as 6 unique letters (i.e. 'A', 'T', 'R', 'V', '\', and 'r' or hex `41 54 52 56 5C 72`) and the '\r' is not interpreted as a single CR character.

You will likely not be able to do this from your sample code unless you add some special code to parse out combinations with '\' and replace them with their special character values. A better solution would be to modify the sample code to always append the '\r' character (remember...different from simply adding a '\' followed by an 'r') to anything you type when you hit the send button so you only have to type "ATRV" in the text box. Something like this in your `OnEditorActionListener` code (again, note the direction of the slash or you'll just add two characters):

```
public boolean onEditorAction(TextView view, int actionId, KeyEvent event) {
    // If the action is a key-up event on the return key, send the message
    if (actionId == EditorInfo.IME_NULL && event.getAction() == KeyEvent.ACTION_UP) {
        //This gets the raw text from the box
        String message = view.getText().toString();
        //Append a CR to every message sent.  The added string is defined as a literal,
        // so Java parses is as a single CR character.
        sendMessage(message + "\r");
    }
    if(D) Log.i(TAG, "END onEditorAction");
    return true;
} 
```

You could also modify your sample by hard-coding the string command as I have in the example above. Java interprets the String literal value "ATRV\r" correctly, placing that CR character at the end (making this a 5 character string).

# sphinx - 狮身人面像搜索索引

> ID：11400084
> 
> 赞同：1
> 
> 时间：2012-07-09T17:30:00.313
> 
> 标签：sphinx

我在使用 Sphinx 搜索索引时遇到问题。我不断从中得到空的结果集。

```
source mrc
{
    type     = mysql
    sql_host = localhost
    sql_user = root
    sql_pass = 
    sql_db   = test_db
    sql_port = 3306
    mysql_connect_flags = 32

    sql_query_pre = SET NAMES latin1
    sql_query_pre = SET SESSION query_cache_type=OFF
    sql_query_pre = REPLACE INTO sphinx.indexer (idx,server,version,lastrun_at) SELECT 'mrc','localhost','2.0.4',UNIX_TIMESTAMP(NOW()) FROM DUAL
    sql_query_post = UPDATE sphinx.indexer SET fetched_by = UNIX_TIMESTAMP(NOW()) WHERE idx = 'mrc' AND server = 'localhost' AND version = '2.0.4'
    sql_query_post_index = UPDATE sphinx.indexer SET indexed_by = UNIX_TIMESTAMP(NOW()) WHERE idx = 'mrc' AND server = 'localhost' AND version = '2.0.4'

    sql_attr_uint = mrc_id
    sql_attr_uint = mrc_parent
    sql_attr_float = mrc_latitude   
    sql_attr_float = mrc_longitude  

    sql_query = \
        SELECT mrc_id AS doc_id, \
        mrc_id, \
        mrc_parent, \
        RADIANS(mrc_latitude) as mrc_latitude, \
        RADIANS(mrc_longitude) as mrc_longitude \
        FROM mrc_table \
        WHERE mrc_parent > 0

    sql_query_info = SELECT * FROM mrc_table WHERE mrc_id = $id

}

index mrc
{
    charset_type = sbcs
    docinfo = extern
    mlock = 1
    morphology = none
    source = mrc
    path = /usr/local/var/data/mrc
} 
```

索引器给了我-

```
indexing index 'member_region_cities'...
collected 78312 docs, 0.0 MB
total 78312 docs, 0 bytes
total 0.656 sec, 0 bytes/sec, 119354.57 docs/sec 
```

如果我通过 mysql 连接到 searchd 并执行

```
SELECT * FROM mrc_table; 
```

它返回空。

本地主机表中肯定有数据，您可以在索引器显示“已收集 78312”的位置看到它

那么为什么 Sphinx 不将数据放入 searchd 中呢？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:34:58.087

我发现了我的问题，我没有选择任何字段。我将所有列都配置为属性。

我通过删除这一行来解决这个问题 - sql_attr_uint = mrc_id

为了将来参考，如果您需要一个没有字段的索引，您可以设置一个虚拟字段，例如添加 - 'a' as dummy - 到选择查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:41:33.633

请仔细检查您的问题。您为名为**mrc**的索引提供了配置，但索引器输出读取**member_region_cities**但我相信它只是名称的缩写。

1.  如果 searchd 已启动并正在运行，请确保使用***--rotate选项运行索引器。***

2.  您可以使用索引检查文档编号

    ./indextool --dumpheader /usr/local/var/data/mrc.sph | grep 总文件

3.  请确保您连接到 Sphinx 服务器，而不是 MySQL，通常它在端口 9306 上运行

    mysql -h 127.0.0.1 -P 9306

希望这可以帮助

# python - 读取和处理另一个控制台应用程序的标准输入输出

> ID：11400088
> 
> 赞同：2
> 
> 时间：2012-07-09T17:30:13.210
> 
> 标签：python

我想在 python 脚本中操作控制台跟踪工具的输出。因此，我想读取该工具写入标准输出的每一行，并可能对该行执行某些操作并将其打印到屏幕上。

我有这个脚本：

```
import sys

for l in sys.stdin:
    print l 
```

我像这样启动跟踪工具：

```
qspy -c COM7 | my_script.py 
```

问题是当我第一次输入时：什么都没有发生。当我再次按 Enter 键时，我看到了该工具创建的所有输出，但它也退出了（跟踪工具在任何字符上退出）。我究竟做错了什么？

我在窗户上。

* * *

编辑：

我已经尝试了所有建议，但收效甚微：

首先，我创建了这个小脚本来在标准输出上产生一些输出：

```
import time

while 1:
    time.sleep(1)
    print "test" 
```

这根本不起作用（没有输出）：

```
import sys

for line in sys.stdin:
    print line,
    sys.stdout.flush() 
```

这个也没有做任何事情：

```
import fileinput, sys

for line in fileinput.input():
    print line,
    sys.stdout.flush() 
```

这一个有效，但仅适用于测试脚本，不适用于 qspy：

```
import sys

for line in iter(sys.stdin.readline, ''):
    print line,
    sys.stdout.flush() 
```

我确实这样调用脚本：

```
test.py | python -u my_script.py 
```

并且还做了：

```
set PYTHONUNBUFFERED=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:54:28.217

尝试禁用缓冲：

```
$ qspy -c COM7 | python -u my_script.py 
```

您也可以尝试强制逐行阅读：

```
for line in iter(sys.stdin.readline, '')
    print line, 
```

检查 qspy 是否有管理缓冲的选项。

您还可以设置`PYTHONUNBUFFERED`环境变量。

# internet-explorer - 在shadowbox，IE中使用jquery加载div

> ID：11400089
> 
> 赞同：0
> 
> 时间：2012-07-09T17:30:19.500
> 
> 标签：internet-explorer, jquery, shadowbox

我正在一个影子框中打开一个页面。但是当用户单击一个按钮时，它会使用 jQuery.ajax 从不同页面加载同一页面中的第二个 div。它适用于 FF、chrome 和 safari，但不适用于 IE8。

```
`function open_shadowbox_div_view(){

Shadowbox.open({
         content:  
                   $("#div1").html(),  
                   player:     "html",                                                    
                   height:     420,    
                   width:      750 ,
                  options:{
                       onFinish: function(){  

                       } ,
                          onClose: function(){  }

                   }

    });

}

function newOccFunction(contract){

    var site_url = "page.php?var=";?>"+var;

    jQuery("#div1").load(site_url,function(){open_shadowbox_div_view();});

}' 
```

这将打开第一个 div。然后在该页面中有一个按钮，可以在同一页面中加载一个 div.php 按钮 onclick function 'function filter(){

```
 var site_url = "page2.php";

    jQuery.ajax({
        type: "POST",
        url : site_url,

        success: function(data){
            alert(data);
            jQuery("#sb-player #div2").html(data);
            alert(jQuery("#sb-player #div2").html());//This returns null

        },
        failure: function(){
            alert("fail");
        }

    });
}' 
```

任何帮助将不胜感激。比你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:45:58.643

由于我试图加载到 div 的内容位于 shadowbox 的第一页内，因此我们不必使用#sb-player，而是使用所有嵌套的 div 标签。它只影响IE，因此你可以这样做。

澄清一下，如果它像

```
 <div id="sb-player">
 <div id="main_box"><div id="second_box"></div></div> 
```

然后您可以通过执行以下操作在“second_box”中加载内容：

```
 jQuery("#main_box #second_box").load(url); 
```

希望它对那些浪费时间弄清楚这一点的人有所帮助。

# c++ - 为什么 std::vector 和 std::array 的 C++ initializer_list 行为不同？

> ID：11400090
> 
> 赞同：84
> 
> 时间：2012-07-09T17:30:24.200
> 
> 标签：c++, stl, c++11

代码：

```
std::vector<int> x{1,2,3,4};
std::array<int, 4> y{{1,2,3,4}}; 
```

为什么 std::array 需要双花括号？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-09T17:32:18.557

`std::array<T, N>`是一个聚合：它没有任何用户声明的构造函数，甚至没有一个使用`std::initializer_list`. 使用大括号进行初始化是使用*聚合初始化*来执行的，这是从 C 继承的 C++ 的一个特性。

聚合初始化的“旧式”使用`=`：

```
std::array<int, 4> y = { { 1, 2, 3, 4 } }; 
```

使用这种旧式的聚合初始化，多余的大括号可能会被省略，所以这相当于：

```
std::array<int, 4> y = { 1, 2, 3, 4 }; 
```

但是，这些额外的大括号只能在“形式的声明`T x = { a };`”（C++11 §8.5.1/11）中被省略，也就是说，当使用旧样式时`=`。此允许大括号省略的规则不适用于直接列表初始化。这里的脚注是：“在列表初始化的其他用途中不能省略大括号。”

有一个关于此限制的缺陷报告：[CWG 缺陷 #1270](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3367.html#1270)。如果提议的解决方案被采纳，其他形式的列表初始化将允许大括号省略，以下将是格式良好的：

```
std::array<int, 4> y{ 1, 2, 3, 4 }; 
```

（感谢 Ville Voutilainen 查找缺陷报告。）

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-09T17:33:09.883

因为`std::vector`提供了一个接受 a 的构造函数`std::initializer_list<T>`，while`std::array`没有构造函数，并且大`{1, 2, 3, 4}`括号 init-list 实际上不被解释为 a `std::initializer_list`，而是内部 C 样式数组的聚合初始化`std::array`(这就是第二组大括号的来源：一个for `std::array`，一个用于内部 C 样式成员数组）。

# jquery - 使用 jQuery 从 HTML 文本中查询脚本元素

> ID：11400091
> 
> 赞同：5
> 
> 时间：2012-07-09T17:30:29.347
> 
> 标签：jquery, ajax

我正在通过加载页面`$.ajax()`并将*部分*结果插入页面的相应部分：

```
$.ajax({
  url: '/whole_page.html',
  success: function (data, status, xhr) {
    $result = $(xhr.responseText);
    $('#menu').html($('#menu', $result).html());
    $('#content').html($('#content', $result).html());
  }
}); 
```

像魅力一样工作，但我遇到了问题。

现在我的页面包含一些特定于页面的 JS，这些 JS 必须在获取和插入结果时执行。据我所知，如果你从 HTML 文本构造一个 jQuery 对象并对其进行查询，jQuery 不会返回`script`元素（我做[了一个小提琴](http://jsfiddle.net/kaen/rEWYz/5/)来演示）。因此，我无法通过 jQuery 选择性地仅插入我想要的脚本。

所以看起来我必须`script`自己从响应文本中提取元素。本质上，我正在寻找正确的方法来做到这一点。到目前为止，这是我想出的：

```
function pullScripts(text) {
  var frag = document.createDocumentFragment()
    , div = document.createElement('div')
    , scriptElements
    ;

  // This is roughly how jQuery finds the scripts when cleaning text
  frag.appendChild(div);
  div.innerHTML = text;

  scriptElements = div.getElementsByClassName('class-for-scripts-that-we-want');

  $('head').append(scriptElements);
} 
```

这工作得很好，虽然我还没有在任何糟糕的浏览器上测试过它。无论如何，为了避免它的一个特性（特殊`script`处理）而复制 jQuery 的这种基本功能感觉不舒服。从小提琴中可以看出，jQuery 对象实际上确实包含`script`s，但它不会用类似`.html()`or的东西返回它们`.get()`。**我错过了一些明显的方法吗？**

*注意：一旦 jQuery 的内部`parseHTML`函数被暴露，这整个话题就没有实际意义了*

*注意 2：我还阅读[了 Trying to select script tags from a jQuery ajax get response](https://stackoverflow.com/questions/4430707/trying-to-select-script-tags-from-a-jquery-ajax-get-response)但是接受的答案是“你不能”，然后是“使用正则表达式”。这两个都不满意*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:09:25.300

在 jQuery 1.8.0b1 中，您现在可以使用该[`$.parseHTML()`](https://api.jquery.com/jquery.parsehtml/)方法来简化此操作。

`$.parseHTML(xhr.responseText,true)`将为您提供一个包含脚本元素的 jQuery 对象。然后，您可以提取脚本标签并在附加 html 后附加或执行它们。

```
$.ajax({
  url: '/whole_page.html',
  success: function (data, status, xhr) {
    var $result = $.parseHTML(xhr.responseText,true),
        $scripts = $result.find("script").add($result.filter("script")).detach();

    $('#menu').html($('#menu', $result).html());
    $('#content').html($('#content', $result).html());
    $('head').append($scripts);
  }
}); 
```

您可能必须过滤脚本以避免根据具体情况重复包含 jQuery。这取决于您正在加载的内容。

如果升级 jQuery 不是一个选项，您可以将`$.parseHTML`其作为插件包含到您当前的 jQuery 中

```
(function($) {
    if (!$.parseHTML) {
        var rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>)?$/;
        // data: string of html
        // context (optional): If specified, the fragment will be created in this context, defaults to document
        // scripts (optional): If true, will include scripts passed in the html string
        $.parseHTML = function( data, context, scripts ) {
            var parsed;
            if ( !data || typeof data !== "string" ) {
                return null;
            }
            if ( typeof context === "boolean" ) {
                scripts = context;
                context = 0;
            }
            context = context || document;

            // Single tag
            if ( (parsed = rsingleTag.exec( data )) ) {
                return [ context.createElement( parsed[1] ) ];
            }

            parsed = jQuery.buildFragment( [ data ], context, scripts ? null : [] );
            return jQuery.merge( [],
                (parsed.cacheable ? jQuery.clone( parsed.fragment ) : parsed.fragment).childNodes );
        }
    }
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:37:05.707

当我昨晚在 jsFiddle 上玩 jQuery (edge) 时，我无法`.find()`在`$.parseHTML()`. 问题是它`$.parseHTML`返回一个元素数组而不是一个 jQuery 对象，如果你用你做一个，`$()`你又回到了原来的问题。所以，你仍然不能真正使用选择器。不过也不是很麻烦：

```
$.ajax({
  url: '/some_page.html',
  success: function (data, text, xhr) {
    var result = $.parseHTML(data, true)
      , scripts = []
      , i;

    // filter the scripts somehow
    for (i = 0; i < result.length; i++) {
        if (result[i].getAttribute('class') === 'good') {
            scripts.push(result[i]);
        }
    }

    $('head').append(scripts);
  }
});​ 
```

我为此做了[一个工作小提琴](http://jsfiddle.net/kaen/ZSAeY/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-07T18:54:15.527

如前所述，您应该使用返回节点数组的 $.parseHTML。

我在应该附加在 ajax 请求上的脚本标记上添加了类 'append-on-ajax-script'。

我也遇到了 getAttribute('class') 函数的问题，所以我的示例有一些用于类检查的解决方法。

```
<script type="text/javascript" class="append-on-ajax-script">
$.post(
    $(this).prop('href'),
    {'some_data':'some_value'},
    function(data) {
        var script = $.parseHTML(data, true);
        for (var i = 0; i < script.length; i++) {
            //console.log(i, (' ' + script[i].className + ' ').indexOf(' append-on-ajax-script ') > -1 );
            if ((' ' + script[i].className + ' ').indexOf(' append-on-ajax-script ') > -1) {
                // console.log(i, script[i]);
                $('body').append(script[i]);
            }
        }

    }
);
</script>

<script type="text/javascript" class="append-on-ajax-script">
    alert('repeat me on ajax');
</script> 
```

# bash - 使用变量简化 bash 脚本

> ID：11400092
> 
> 赞同：1
> 
> 时间：2012-07-09T17:30:31.853
> 
> 标签：bash, variables

我目前正在尝试简化脚本。我希望能够使用变量，而不是手动输入每个命令的主机名？数组？某种意义上的。想知道您是否可以提供帮助。

例子：

```
hostname1=192.168.1.1
hostname2=192.168.1.2

echo "What would you like to do?"
echo "(1)Ping Hosts"
echo "(2)mkdir /tmp/test"
echo "(3)write to test.txt"
read num_variable

if num_variable = 1
then
ping hostname1
ping hostname2

if num_variable = 2 
ssh -n hostname1 "mkdir /tmp/test"
ssh -n hostname2 "mkdir /tmp/test"

if num_variable = 3
ssh -n hostname1 "echo 'hello' > /tmp/test/test.txt"
ssh -n hostname2 "echo 'hello' > /tmp/test/test.txt" 
```

**“有没有更简单的方法来写这个？”**

例子：

```
Hosts=hostname1,hostname2 
```

命令在这里？

我不想有 20,000 行，因为我所能做的就是在顶部列出主机名，并且为每个 num 变量执行以下针对该特定部分中列出的主机的所有命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T17:46:35.733

创建一个数组：

```
hosts=(hostname1 hostname2 hostname3) 
```

您可以将其拆分为多行：

```
hosts=(
        hostname1 
        hostname2 
        hostname3
      ) 
```

迭代元素：

```
for host in "${hosts[@]}"
do
    echo "$host"
done 
```

访问特定主机：

```
echo "${hosts[2]}" 
```

使用`select`命令创建菜单：

```
PS3='Please enter your choice: '
options=("Option 1" "Option 2" "Option3" "Quit")
select opt in "${options[@]}"
do
    echo "Opt: $opt, Reply: $REPLY"
    case $opt in
        "Option 1")
            echo "you chose choice 1"
            ;;
        "Option 2")
            echo "you chose choice 2"
            ;;
        "Option 2")
            echo "you chose choice 3"
            ;;
        "Quit")
            break
            ;;
        *) echo invalid option;;
    esac
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T17:46:12.327

Bash 确实有可以迭代的数组。

```
hosts=(hostname1
       hostname2
       hostname3)

for host in "${hosts[@]}"; do
   ssh -n "$host" "echo 'hello' > /tmp/test/test.txt" 
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T17:54:07.090

您可以使用`for`循环和`case`语句。

一个`for`循环的例子是：

```
nodes="192.168.1.1 192.168.1.2 192.168.1.3"
for node in $nodes
do
    echo $node
done 
```

一个`case`声明的例子是

```
case "$num_variable" in
    "1" ) echo "1";;
    "2" ) echo "2";;
    "3" ) echo "3";;
esac 
```

将两者结合起来对你来说是一个练习:-)

一个很好的参考`bash`是[Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/abs-guide.pdf)。

# django - 以编程方式保存 ImageField 会复制图像文件

> ID：11400094
> 
> 赞同：4
> 
> 时间：2012-07-09T17:30:40.053
> 
> 标签：django, imagefield

我正在`Item`从 csv 文件创建下面显示的模型的一些实例。在 csv 文件中，仅指定了 Item 的 the`name`和 the `filename`。通过查看图像是否存在来设置该`image`字段，如果存在，则将图像文件设置为`image`：

我愿意：

```
item = Item()
item.name = csv_fields[0]
item.filename = csv_fields[1]
item.save()

...

f = open(settings.MEDIA_ROOT+"images/"+item.filename, 'r')
item.image = File(f)
item.save() 
```

这样做，图像被复制`settings.MEDIA_ROOT+"images/"`为`<original filename>_1`. 怎么能避免呢？即，我怎样才能将现有文件设置为图像字段，而不复制它？

```
class Item(models.Model):   

    name = models.CharField(max_length=50)
    filename = models.CharField(max_length=100,)
    image = models.ImageField(upload_to='images', blank=True, null=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:40:35.773

这就是你所需要的

```
item = Item()
item.name = csv_fields[0]
item.filename = csv_fields[1]
item.image = csv_fields[1]
item.save() 
```

image 字段采用文件名和字段定义的upload_to，并将其转换为图像资源。如果你传入一个图像资源，它会认为它正在制作一个新的。

所以这：

```
f = open(settings.MEDIA_ROOT+"images/"+item.filename, 'r')
item.image = File(f) 
```

完全没有必要

charfield 和 image 字段之间的唯一区别是 imagefield 采用文件名并将其转换为 PIL Image 资源以进行进一步操作。它只是一个包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T22:40:49.603

Francis Yaconiello 的回答是正确的，但我有一个澄清细节。

```
item.image = csv_fields[1] 
```

请注意，这应该是相对于媒体根目录或其他存储根目录的路径。

例如，说`settings.MEDIA_ROOT = '/home/myuser/media'`和`ImageField(upload_to='images')`。

因此，如果您手动将图像保存在 `/home/myuser/media/images/purty.jpg'，那么 csv_fields[1] 应该是：

```
item.image = '/images/purty.jpg' 
```

否则，item.image.name、item.image.path 和 item.image.url 将被弄乱。

# jquery - jQuery中的多条件选择器

> ID：11400096
> 
> 赞同：4
> 
> 时间：2012-07-09T17:30:49.377
> 
> 标签：jquery

我有以下代码，我想选择 type = text 和 id 为“announcement_date”的元素。我将如何在 jQuery 中执行此操作？请注意，这两个元素具有相同的 id。这是在我正在使用的旧版经典 ASP 页面中。

```
<input type="hidden" name="announcement_date" id="announcement_date" value="1111"></input>
<input type="text" name="announcement_date" id="announcement_date" value="323"></input>
<input type="text" name="eff_date" id="eff_date" value="123"></input>
<input type="text" name="end_date" id="end_date" value="123"></input> 
```

我尝试了下面的选择器，但它未能选择正确的元素。

```
$("#announcement_date type=text").addClass("error"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T17:33:53.817

ID**必须**是唯一的。

（*如果由于某种原因您无法更改 html*）您可以按名称选择

```
$('input[name="announcement_date"][type="text"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:32:14.423

您应该只使用 id ，因为在 HTML 中两个元素具有相同的 id 是非法的。

（也就是说，将您的 html 修复为具有唯一 ID，然后使用 id 进行选择。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T17:33:23.040

对多个元素使用 1 个 id 是无效的，您应该`class`改用：

```
$('.announcement_date[type="text"]').addClass('error') 
```

[演示](http://jsfiddle.net/t9p2e/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T17:58:56.833

```
<input type="text" name="announcement_date"
class="announcement_date" value="1111" />

<input type="submit" name="announcement_date"
class="announcement_date" value="Submit" /> 
```

然后​</p>

```
$(':text.announcement_date').addClass("error"); 
```

[演示](http://jsfiddle.net/MBHCz/63/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T17:41:27.790

我相信你可以使用[这个](http://api.jquery.com/attribute-contains-prefix-selector/)想法。

所以你可以使用..

```
$('input[type="text"][name="announcement_date"]') 
```

这是[一个类似的相关SO问题。](https://stackoverflow.com/questions/5234462/jquery-selector-and)

# javascript - Javascript window.print() 默认为 PDF

> ID：11400097
> 
> 赞同：1
> 
> 时间：2012-07-09T17:30:53.173
> 
> 标签：javascript

我正在处理的网站上的打印按钮会打开一个新窗口并用一些 HTML 填充它。我称`window.print()`它工作正常，但我自己和测试过它的其他人的默认打印机始终是 PDF 编写器，如果系统上可用的话。有没有办法打开打印对话框并选择适当的默认打印机，这样用户就不必每次都选择他们的打印机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:31:53.680

这完全取决于您的浏览器。
与手头的代码无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T08:56:55.827

您只能像这样更改布局：

```
<style type="text/css" media="print">
@page { size: landscape;}
</style> 
```

但我猜没有任何其他东西。希望这可以帮助。

# ios - “PixelHeight”和“PixelWidth”是否总是出现在 ALAssetRepresentation 元数据中？

> ID：11400099
> 
> 赞同：0
> 
> 时间：2012-07-09T17:30:56.623
> 
> 标签：ios, ios5, alassetslibrary, alasset

我注意到，对于图像，字典 ALAssetRepresentation.metadata 包含一对名为“PixelHeight”和“PixelWidth”的键。我的问题是：是否可以保证所有图像都存在这些键？据我所见，我的图像的默认表示中的所有元数据都包含这些键，但是我在文档中没有找到说明它的位置，所以我有点担心让我的应用程序认为那些值将始终可用。

任何人都可以确认或否认这一点吗？

非常感谢和最好的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:00:52.827

它通常应该存在。但是，更安全的方法是使用iOS 5.1`dimensions`中`ALAssetRepresentation`引入的

# c++ - 算术指针和 fstream C++

> ID：11400101
> 
> 赞同：0
> 
> 时间：2012-07-09T17:31:03.523
> 
> 标签：c++, pointers, stream

我正在使用内存缓冲区写入文件。我将每条记录复制到内存缓冲区，然后将其刷新到磁盘。

代码：

```
 char * OutBuffer;
    char *pt;
    OutBuffer = new char(BufferSize);
    pt = OutBuffer;

    for (int i=0; i<(FileSize / RECORD_SIZE); i++){
        if (((i % recordsPerBlock)==0) && (i>0)){
           FileSortHandle->write(OutBuffer, BufferSize);
           pt = OutBuffer;
        }
        else{
           memcpy(pt, minRecord, RECORD_SIZE);
           pt = pt + RECORD_SIZE;
        }
           minRecord = nullptr;
    } 
```

当我调用“FileSortHandle->write(OutBuffer, BufferSize);” VS 显示：

“Windows 在 STL_Test2.exe 中触发了一个断点。

这可能是由于堆损坏，这表明 STL_Test2.exe 或其已加载的任何 DLL 中存在错误。

这也可能是由于用户在 STL_Test2.exe 具有焦点时按 F12。

输出窗口可能有更多诊断信息。”

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T17:32:08.523

```
OutBuffer = new char(BufferSize); 
```

这只会为 ONE char 分配内存，并且这个 char 被*初始化*，`BufferSize`如果`BufferSize`对于`char`.

你的意思可能是这样的：

```
OutBuffer = new char[BufferSize]; //use square brackets! 
```

`BufferSize`它为字符分配内存。缓冲区未初始化。

* * *

它与您的问题无关，但如果可能，最好在声明指针时分配内存：

```
char * OutBuffer = new char [BufferSize];
char *pt = OutBuffer; //prefer initialization over assignment 
```

也就是说，更喜欢初始化而不是赋值。

# html - 进度标签和仪表标签的区别

> ID：11400116
> 
> 赞同：21
> 
> 时间：2012-07-09T17:31:50.670
> 
> 标签：html

`<progress>`HTML5和`<meter>`标签之间有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-30T11:09:42.943

*   要通过进度条标记“进行中”任务的完成率⁄进度，请使用**进度**元素

*   表示仪表使用**仪表**元素

你可以这样想：进步=动态；仪表 = 静态

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:42:55.473

根据我的经验，**进度**标签和**仪表**标签之间的主要区别在于它们的行为。进度标签的查看取决于客户端的操作系统，但仪表标签的查看风格有点稳定。此外，meter 标签支持高值和低值。此外，meter 标签支持连接表单（目前主流浏览器尚不支持）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-22T16:25:15.710

根据[最新的 HTML5 工作草案](http://dev.w3.org/html5/spec/Overview.html#the-progress-element)，进度标签最好用于显示手头特定任务的进度。Meter 最适合用于与任务无关的指标，例如磁盘空间或内存使用情况。

> 进度元素表示任务的完成进度。

在哪里

> 仪表元素表示已知范围内的标量测量值，或分数值；例如磁盘使用情况、查询结果的相关性或投票人口中选择特定候选人的比例。

# matlab - MATLAB 搜索和压缩

> ID：11400117
> 
> 赞同：1
> 
> 时间：2012-07-09T17:31:52.593
> 
> 标签：matlab, zip

我想搜索所有`.doc`文件的目录和子目录，并使用 MatLab 将它们全部压缩到一个文件中。如果我使用`zip()`matlab 函数，它只允许一个根目录。 `ZIP(ZIPFILENAME, FILES, ROOTDIR)`.

1）如何递归搜索子目录？

2) 如何将所有 zip 文件添加到一个文件夹中？

最好搜索并将所有`.doc`文件移动到临时文件夹中，然后从该位置压缩它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:32:30.893

首先，`dos(...)`用于所有 .doc 文件的目录，包括所有子目录（选项`/S`），但仅显示文件名，不显示其他信息（选项`/B`）。第一个输出参数是返回的状态，第二个输出参数是命令行返回的字符串：

```
[~, filenamesFromDos] = dos('dir *.doc /B/S'); 
```

其次，从该命令中提取文件名作为元胞数组。文件名由换行符 ( `\n`) 字符分隔，路径可能包含空格，因此`'Whitespace',''`：

```
filenames = textscan(filenamesFromDos,'%s','Delimiter','\n','Whitespace',''); 
```

`filenames`然后是 a `<1x1 cell>`，包含一个`<Nx1 cell>`文件名字符串。有了这个`<Nx1 cell>`我们可以调用内置的matlab函数`zip(...)`：

```
zip('zip_file.zip',filenames{1}); 
```

完毕。

# php - PHP/MySQL 中的 Web 服务

> ID：11400122
> 
> 赞同：1
> 
> 时间：2012-07-09T17:32:12.213
> 
> 标签：php, mysql, web-services

我正在尝试学习编写涉及`PHP / MySQL`. 我想将一些数据从客户端发布到服务器，然后通过 Web 服务将其存储到 MySQL 数据库中。

我对这个领域很陌生。

我尝试谷歌搜索，但没有找到任何基本教程。他们都是花哨的和高保真涉及`SOAP`等。

有人可以通过提出代码片段/建议一个不错的 URL/建议一本好书来开始。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T17:36:52.300

~~有关几种网络相关语言的基本教程，请从[W3Schools.com开始](http://www.w3schools.com/)~~

有几个很好的网站可以学习 HTML。例如，[HTML 狗](http://htmldog.com/)。

基本而言，您需要做的是用 HTML 构建一个表单，将数据发送到 PHP 脚本，然后由 PHP 脚本处理信息并将其存储在数据库中。

# javascript - 使用 Opera 自定义 base64 图像光标 - 可能吗？

> ID：11400126
> 
> 赞同：2
> 
> 时间：2012-07-09T17:32:30.097
> 
> 标签：javascript, css, html, opera

我有以下Javascript：

```
document.getElementById("test").style.cursor =  
  "url('data:image/png;base64," +
    "iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAdUlEQVR42qW" +
    "TSw7AIAhEZ8XCA3AFlt7/dG3SxEatQ1FIjGDg8Yu4HAHwHNeHBfSB7X0FQ+" +
    "/EMjM9BXjvuYWI3kOOAAPMGx7bzFQNtta22Bpohkgl2AmigBNICjDMLdP/B" +
    "xCB1Fr5Z2qiqhRgZv8AEaGAUspg3wU3VkqQQyYrAAAAAElFTkSuQmCC'), default"; 
```

它适用于**Google Chrome**，但不适用于**Opera**。任何已知的原因或解决方法可能吗？

背景图像的相同样式在 Opera 中可以正常工作 >>

```
document.body.style.backgroundImage = 
  "url('data:image/png;base64," +
    "iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAdUlEQVR42qW" +
    "TSw7AIAhEZ8XCA3AFlt7/dG3SxEatQ1FIjGDg8Yu4HAHwHNeHBfSB7X0FQ+" +
    "/EMjM9BXjvuYWI3kOOAAPMGx7bzFQNtta22Bpohkgl2AmigBNICjDMLdP/B" +
    "xCB1Fr5Z2qiqhRgZv8AEaGAUspg3wU3VkqQQyYrAAAAAElFTkSuQmCC')"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T09:28:21.253

Opera 不支持`url`s 光标，请参阅[http://www.quirksmode.org/css/cursor.html](http://www.quirksmode.org/css/cursor.html)。

# iphone - 仅在 iPhone 的 HTML 中删除图像上的链接

> ID：11400130
> 
> 赞同：0
> 
> 时间：2012-07-09T17:32:48.740
> 
> 标签：iphone, regex, uiwebview, nsscanner

我解析 XML 并使用 xml 中的不同元素来构建一些 HTML 代码，然后我可以在 UIWebView 中显示这些代码。Parsed XML 的一部分包括带有链接的图片。我想保留图片，但丢失了链接。通常我可以只替换字符串中的所有 ahref 标签，但我想保留其他链接不在图片上。无论如何我可以在 XCode 中执行此操作以仅从图像中删除 ahref 标签吗？

`a href="http://treymorgan.net/wp-content/uploads/2012/06/divorce.jpg" img class="alignleft size-full wp-image-4539" title="divorce" src="http://treymorgan.net/wp-content/uploads/2012/06/divorce.jpg" alt="" width="190" height="150"/ /a`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:49:53.347

您应该能够使用 CSS 而不是更改链接本身来做到这一点。看看这篇文章关于如何实现这一点的建议： -

[http://css-tricks.com/pointer-events-current-nav/](http://css-tricks.com/pointer-events-current-nav/)

更新：这是一个完整的工作示例，它禁用在 iOS 和许多桌面浏览器上放置在图像周围的链接。在您的示例中，您应该将`<body>`内容替换为已解析的 HTML 片段。

```
<html>
<head>
    <style type='text/css'>
    a > img {
        pointer-events: none;
        cursor: default;
        }
    </style>
</head>
<body>
    <a href='http://www.google.com'>Link to Google</a><br>
    <a href='http://www.google.com'><img src='[image_url.png]'></a>
</body>
</html> 
```

# wpf - 托管在弹出窗口中的 WPF UserControl 未获得焦点

> ID：11400134
> 
> 赞同：1
> 
> 时间：2012-07-09T17:33:18.710
> 
> 标签：wpf, popup, notifyicon

我正在使用 Philipp Sumi 的[Notify Icon Control](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon)，但我遇到了一个小问题，我正在显示一个自定义 Balloon 方法调用

```
_TaskBarIcon.ShowCustomBalloon(_UserControlNotification, System.Windows.Controls.Primitives.PopupAnimation.Slide, null); 
```

这很好用，直到我的应用程序的主窗口最小化，弹出窗口仍然可见，这是我想要发生的，但你不能点击弹出窗口。我有一个列表框，其中嵌入了我需要向用户显示的通知列表，该列表绑定到我的视图模型上的 _userControlNotification 的 Observable 集合。这个想法是用户可以去吃午饭，然后当他们回来时会看到通知列表，此时单击其中一个通知将触发一个命令，该命令将应用程序导航到主窗口中的相关信息。

正如我所说，问题在于弹出窗口不可点击且无法聚焦。我知道当鼠标悬停事件触发时弹出窗口将采用鼠标事件，而且我有一个图像作为用户控件上的关闭图标，并且鼠标按下命令仍然可以很好地触发。

关于为什么列表框本身不会采取点击事件并获得焦点的任何想法或方向，即选择列表中的适当项目。

任何想法建议将不胜感激，因为我目前对此有点停滞不前。

埃姆林

# jquery - 在 jQuery 中格式化 HTML

> ID：11400136
> 
> 赞同：0
> 
> 时间：2012-07-09T17:33:23.843
> 
> 标签：jquery, html, string-formatting

所以伙计们，我只想用jQuery格式化一个字符串，该字符串可以带有封闭的html标签`<div><h2></h2><span></span></div>`或没有它，例如`<div><h2></h2><span>`，或者它可能包含图像`<img src=""/>`，但我需要将它格式化为结果只有纯文本，我假设这可以用正则表达式来完成，我用谷歌搜索了它，但找不到这样的例子。

因此，如果您能帮助我，我将非常感谢您的帮助。谢谢

字符串的一个例子：

```
<p> 
    <span style="color: rgb(35, 31, 32); font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; ">Преимущества стоматологической установок Anthos</span>
</p> 
<ul class="tech_list" style="margin: 0px; padding-right: 0px; padding-left: 0px; list-style-type: none; color: rgb(35, 31, 32); font-family: Arial, Helvetica, sans-serif; "> 
    <li style="margin: 0px; padding: 8px 0px; font-size: 13px; line-height: 18px; overflow: hidden; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); "> 
       <img alt="Anthos " class="photo" src="http 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T17:37:38.197

```
var body;

try {
    body = document.implementation.createHTMLDocument().body;
    //In chrome this avoids requesting images in the html
}
catch(e){
    body = document.createElement("body");
}
//this doesn't execute css or scripts
body.innerHTML = '<p> <span style="color: rgb(35, 31, 32); font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; ">Преимущества стоматологической установок Anthos</span></p> <ul class="tech_list" style="margin: 0px; padding-right: 0px; padding-left: 0px; list-style-type: none; color: rgb(35, 31, 32); font-family: Arial, Helvetica, sans-serif; "> <li style="margin: 0px; padding: 8px 0px; font-size: 13px; line-height: 18px; overflow: hidden; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); "> <img alt="Anthos " class="photo" src="http'

console.log( $(body).text() );
//Преимущества стоматологической установок Anthos 
```

演示[http://jsfiddle.net/FvBzX/](http://jsfiddle.net/FvBzX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T17:36:58.303

尝试

```
$(".example_1").html( $(".example_1").text() ); 
```

获取 div 的 HTML，获取 div 的文本并将其放回外部容器的 html 中。

从[谷歌网站窃取](http://frobert.com/en/2011/01/21/strip-html-jquery/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T17:37:19.303

我想这就是你要找的东西：

[https://stackoverflow.com/a/653699/1456376](https://stackoverflow.com/a/653699/1456376)

```
jQuery.fn.stripTags = function() { return this.replaceWith( this.html().replace(/<\/?[^>]+>/gi, '') ); }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T17:37:04.363

此 RegEx 应从字符串中删除所有 html 标记：

```
var StrippedString = OriginalString.replace(/(<([^>]+)>)/ig,""); 
```

# css - 在具有 ltr 和 rtl 支持时命名左右特定类

> ID：11400137
> 
> 赞同：0
> 
> 时间：2012-07-09T17:33:28.700
> 
> 标签：css, naming-conventions

我一直在开发一个需要从左到右以及从右到左支持的多语言网站。这是通过在 base.css 中放置通用样式，然后根据访问者的语言加载 base-left.css 或 base-right.css 来完成的。在项目期间，我反复面临一个命名问题：只在放置元素的方向上有所不同的类应该叫什么？

下面是一个示例：我在网站上有很多具有通用样式的按钮，因此我将这些样式放在 .button 类中。这包含字体大小、颜色等。默认情况下，大多数按钮不应浮动，但有些按钮应向左浮动并具有右侧边距。所以我称它们为 .button-left 并将所有此类按钮分配给 .button 和 .button-left 两类。并重复放置在右侧的按钮。像这样：

```
<div class="button button-left">Click me</div> 
```

的CSS：

```
.button {color:blue;font-family:Arial;border:1px solid gray;}
.button-left {float:left;margin-right:10px;}
.button-right {float:right;margin-left:10px;} 
```

这样，我不需要在 .button 上放置浮动和边距，然后需要覆盖所有其他按钮。到现在为止还挺好。但是，这是我的问题，诸如 button-left 之类的类在我的 base-left.css 文件中运行良好，其中 .button-left 是放置在元素左侧的按钮。但是放在我的 base-right.css 文件中的是一个名为 .button-left 的类，它将按钮定位在右侧，这确实令人困惑。所以我的问题是，有没有更好的方法来命名这些类？

**更新：**问题的一部分是我无法根据用户的语言更改将哪些类分配给哪些元素。因此，当我知道该语言时，我无法将课程从 .button-left 更改为 .button-right。当检测到用户语言时，所有应该发生的事情就是应该加载相应的 css 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:01:47.237

设置一个特定的类，指示主体的 ltr 或 rtl。然后，您可以使用子类，而不会遇到命名约定问题。

CSS

```
.button {color:blue;font-family:Arial;border:1px solid gray;}
.ltr .button-left {...}
.ltr .button-right {...}
.rtl .button-left {...}
.rtl .button-right {...} 
```

那么你不需要为每个元素使用不同的类名。主要元素只有两个类名。您还可以将类赋予包装 div 或层次结构中非常高的任何东西。

# h.264 - MP4 无法在 IE9/Chrome 中播放

> ID：11400138
> 
> 赞同：0
> 
> 时间：2012-07-09T17:33:37.107
> 
> 标签：h.264, mp4

我有一个 iOS 应用程序，它利用相机创建和保存视频，然后将其上传到网络服务器。但是，当我尝试使用 IE9 在服务器上观看这些视频时，我得到一个音频流，但我只看到海报。在 Chrome 中观看时，我*确实*看到了一个视频，但它与应有的位置旋转了 90 度。

MP4 文件已使用 H.264 编码。当我尝试将 MP4 转换为 FLV 并在 Flash 播放器中使用时，它仍然旋转了 90 度。我尝试过videojs，但无济于事。是什么原因造成的，我该如何解决？

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:06:49.777

我不知道为什么视频不能在 IE9 上播放。

视频旋转是因为 iOS 设备以固定方向录制，然后根据需要设置`rotate`元数据标签。一些玩家识别并采取行动，许多人没有。

有关使用 FFmpeg 旋转视频的说明，请参阅[此答案](https://stackoverflow.com/a/9409094/85950)，尽管大多数视频处理软件都应该能够做到这一点。

# ios - 如何将负数格式化为红色，黑色表示正数

> ID：11400144
> 
> 赞同：1
> 
> 时间：2012-07-09T17:34:02.053
> 
> 标签：ios

我正在使用以下代码片段在使用 UIKit.h 的 iPad 项目中格式化数字，但我不知道如何使负数显示为红色。根据文档，我尝试过的方法不起作用。希望对此提出一些建议。

```
 NSNumberFormatter *decimalStyle = [[[NSNumberFormatter alloc] init] autorelease];
[decimalStyle setFormatterBehavior:NSNumberFormatterBehavior10_4];
[decimalStyle setNumberStyle:NSNumberFormatterDecimalStyle];
[decimalStyle setPositiveFormat:@"###,###,##0"];
[decimalStyle setNegativeFormat:@"(###,##0)"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T17:37:55.987

目前你不能直接这样做，你可以做的是这样的：

```
UILabel *numberLabel = ...; // The label that will display your number
numberLabel.text = [decimalStyle stringFromNumber:myNumber];
numberLable.textColor = (myNumber.floatValue < 0.0f) ? [UIColor redColor] : [UIColor blackColor]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:36:12.777

不确定这是否适用于 iOS，但在 OS XI 上这样做：

```
//create new instance of NSNumberFormatter
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];

//create mutable dictionary for storing formatting attributes
NSMutableDictionary *negativeNumberColor = [NSMutableDictionary dictionary];

//set red colour
[negativeNumberColor setObject:[NSColor redColor] forKey:@"NSColor"];

//apply red colour to number formatter
[numberFormatter setTextAttributesForNegativeValues: negativeNumberColor];

//set formatter on NSTable column cell
[[tableColumn dataCell] setFormatter: numberFormatter]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T17:38:19.003

答案取决于您如何绘制文本，但想法是简单地以您想要的任何颜色绘制文本。例如，如果您在 UILabel 中绘制数字，则可以根据`textColor`需要将标签的 设置为红色或黑色。如果您使用 Core Text 绘制文本，您可以使用 NSAttributedString 并向相关文本添加颜色属性。如果您在 HTML 中呈现文本，您当然希望设置包含该文本的 HTML 标记的适当属性。

# mysql - MySQL CURRENT_TIMESTAMP 作为默认值

> ID：11400147
> 
> 赞同：33
> 
> 时间：2012-07-09T17:34:10.923
> 
> 标签：mysql

创建表时出现以下错误：

```
ERROR 1293 (HY000): Incorrect table definition; there can be only one TIMESTAMP column with CURRENT_TIMESTAMP in DEFAULT or ON UPDATE clause 
```

问题是我实际上没有默认的两列，我也没有使用`TIMESTAMP`子句。`CURRENT_TIMESTAMP``ON UPDATE`

我试图执行的 DDL 查询是

```
CREATE TABLE user(
    /* Basic Information */
    id INT NOT NULL AUTO_INCREMENT,
    firstname VARCHAR(255) NOT NULL,
    surname VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    username VARCHAR(255) NOT NULL UNIQUE,
    password CHAR(40) NOT NULL,

    /* System status information */
    active BOOL NOT NULL DEFAULT FALSE,
    validated BOOL NOT NULL DEFAULT FALSE,
    date_validated TIMESTAMP,
    date_registered TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    /* Index */
    PRIMARY KEY (id)
) Engine=InnoDB; 
```

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-09T17:56:41.447

您可以在一张表中使用两个时间戳。默认情况下，首先使用 DEFAULT 字段，然后使用其余时间戳字段。

下面的查询应该可以工作。

```
CREATE TABLE myTable 
(
 id INT,
 date_registered TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, 
 date_validated TIMESTAMP
); 
```

## [在 sqlfiddle 演示](http://sqlfiddle.com/#!2/359ac)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-30T09:38:30.673

我认为重要的是要注意这个限制从 MySQL 5.6.5 开始不再存在。该限制已被删除，并添加了一些附加功能。具体来说：多个 TIMESTAMP 和 DATETIME 字段可以具有自动默认值，该字段会将字段设置为当前时间戳/日期时间，如下面的博客文章中所述（显然是由进行修复的人编写的）：[http://optimize- this.blogspot.com/2012/04/datetime-default-now-finally-available.html](http://optimize-this.blogspot.com/2012/04/datetime-default-now-finally-available.html)

**更多细节**
此外，准确了解如何生成默认日期和时间值可能很有价值。
如以下链接中所述，您可以同时设置 DATETIME 和 TIMESTAMP 数据类型，因此该列将具有给定行的 INSERT 操作的当前日期和时间的 DEFAULT 值。或者，您可以将它们设置为 ON UPDATE 以在 UPDATE 操作的字段中设置当前日期和时间。
链接：
[http ://dev.mysql.com/doc/refman/5.7/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.7/en/timestamp-initialization.html)

以下是两者在 CREATE TABLE 语句中的样子：

```
CREATE TABLE t1 (
ts1 TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
,ts2 TIMESTAMP DEFAULT NOW()
); 
```

值得指出的是，CURRENT_TIMESTAMP 是 NOW() 的别名。
此外，将 TIMESTAMP 或 DATETIME 字段设置为 NULL 会将列 DEFAULT 更改为 null 而不是日期时间值（再次参见链接以获取详细信息和更多详细信息）。
另一个可能有价值的点是 DATETIME 可以包含的日期范围是：
1000-01-01 到 9999-12-31
，而 TIMESTAMP 的范围是：
1970-01-01 00:00:01 到 2038-01-19 03： 14:07
有关 DATETIME 和 TIMESTAMP 之间的其他比较，请阅读比较它们的[MySQL 手册页。](http://dev.mysql.com/doc/refman/5.7/en/datetime.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T17:38:34.883

请允许我引用[我自己的博客文章](http://jasonswett.net/blog/how-to-do-auto-updating-created-at-and-updated-at-timestamps-in-mysql/)：“无论出于何种原因，MySQL 只允许每个表有一个自动更新时间戳。有很多方法可以解决这个问题，但并非所有方法都不糟糕。”

我推荐的方法是为每个时间戳使用触发器：

```
CREATE TRIGGER customer_create BEFORE INSERT ON `customer`
FOR EACH ROW SET NEW.created_at = NOW(), NEW.updated_at = NOW(); 
```

有关更多详细信息，请参阅帖子本身。

# ruby - Ruby 中类单例方法的方法查找

> ID：11400148
> 
> 赞同：3
> 
> 时间：2012-07-09T17:34:12.933
> 
> 标签：ruby

我的印象是`obj.method`导致 ruby​​ 如此寻找`method`：

1.  查看`obj`的单例类。
2.  查看`obj`的单例类包含的模块。
3.  在`obj`的课上看。
4.  `obj`查看类中包含的模块
5.  *在类的超类上重复步骤 3 和 4，直到找到*
6.  如果从未找到，请调用`method_missing`原始对象，`obj`.

在此模型下，**唯一**搜索该方法的单例类是原始接收者的单例类`obj`。然而，这个模型无法解释子类可以访问其超类的单例方法这一事实。例如

```
class Foo
  def self.foo
    "foo"
  end
end

class Bar < Foo
end

Bar.foo  #=> "foo" 
```

我很困惑，因为我相信这意味着`Foo`在某些时候会搜索单例类的方法`foo`。但是，在上面的模型下，我希望只会`Bar`搜索 的单例类`foo`。如果做不到这一点，我希望 ruby​​ 会在`Bar`'s 类中查找`Class`，然后继续爬上超类链（`Foo`完全跳过及其单例类）。

所以我的问题是：我对 Ruby 方法查找的理解缺少什么来解释一个类可以访问其超类的单例方法的事实？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T17:50:53.753

子类化时，不仅`Bar.superclass`设置为`Foo`，而且对于单例类也是如此：

```
Bar.singleton_class.superclass == Foo.singleton_class  # => true 
```

所以你并没有真正感到困惑。实际查找是：

1.  从`obj`的单例类开始。
2.  在祖先列表中查找实例方法：
    *   前置模块（Ruby 2.0）
    *   班级本身
    *   包含的模块
3.  对超类重复 #2。
4.  重复#1，但这次寻找`method_missing`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T18:02:31.590

这很简单。或者不是真的，但无论如何：

```
The metaclass of the superclass is the superclass of the metaclass. 
```

“元类”实际上是“单例类”。您的模型中缺少的是`Bar.superclass`继承`Foo.superclass`。干净利落 ：）

# r - 在R中应用包moonsun的功能

> ID：11400149
> 
> 赞同：1
> 
> 时间：2012-07-09T17:34:17.583
> 
> 标签：r, apply

我正在尝试将一个函数应用于数据帧 M 的所有 334 行，其中包含时间和位置数据，并为每一行获取一个值。相反，我得到每行 334 个值的列表。我怎样才能简单地从同一行的变量值计算出每行一个值？

这些是数据帧 M 的头部和尾部：

```
d mo    y   lat  long
 5  6 2007    NA    NA
 6  6 2007    NA    NA
 7  6 2007    NA    NA
 8  6 2007 26.89 15.53
 9  6 2007 28.00 15.73
10  6 2007 22.41 14.93
...
26  4 2008 23.86 14.05
27  4 2008 24.12 14.34
28  4 2008 27.75 12.87
29  4 2008 27.28 10.91
30  4 2008 24.17 14.44
1  5 2008    NA    NA 
```

我的代码：

```
f1 = function(x){
         options(latitude= M$lat, longitude= M$long); 
         as.lt(moon.rst(jday = jd(M$y,M$mo,M$d)))
}
M$rs <- apply(M, 1, f1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:25:21.503

```
f1  <- function(d, mo, y, lat, long){
  options(latitude = lat, longitude = long)
  as.lt(moon.rst(jday = jd(y, mo, d)))
}
data$rs <- do.call(f1, data)
Warning message:
In if (year < 0) c = floor((365.25 * year) - 0.75) else c = floor(365.25 *  :
  the condition has length > 1 and only the first element will be used
data
   d mo    y   lat  long     rs.rise  rs.transit      rs.set
1  8  6 2007 26.89 15.53  0h 24m 30s  5h 42m  2s 11h 42m 13s
2  9  6 2007 28.00 15.73  1h  4m 42s  6h 34m  5s 12h 46m 30s
3 10  6 2007 22.41 14.93  1h 54m 38s  7h 31m  8s 13h 53m 59s 
```

`jd()`由于我们将向量（在本例中）作为参数传递，因此函数会发出警告`year`，但尽管如此，我希望这是您需要的结果。

编辑：另一个没有任何警告的版本，使用`apply`，但使用索引，对我来说似乎`do.call`更快。

```
f1 <- function(M){
  options(latitude= M[4], longitude= M[5]); 
  as.lt(moon.rst(jday = jd(M[3],M[2],M[1])))
}
apply(data[,c('d','mo','y','lat','long')], 1, f1)
[[1]]
                  rise     transit         set
2005-06-08  6h  2m 30s 13h  8m  3s 20h 12m 51s

[[2]]
                  rise     transit         set
2005-06-09  6h 55m 34s 14h  1m 26s 21h  4m 44s

[[3]]
                  rise     transit         set
2005-06-10  8h  7m 41s 14h 57m  7s 21h 43m 36s 
```

# c# - 使用 iText(Sharp) 提取 PDF 注释不一致的原因

> ID：11400151
> 
> 赞同：2
> 
> 时间：2012-07-09T17:34:21.197
> 
> 标签：c#, pdf, hyperlink, annotations, itextsharp

### 设想：

我有一个使用 iTextSharp 来搜索 PDF 文件以获取超链接的应用程序。

PDF 中的超链接是文件结构中“注释对象”的子类型，因此我的代码本质上是 (1) 读取文件，(2) 循环浏览页面，(3) 获取页面的注释集合，以及 ( 4) 提取页面的超链接注释。

### 问题

有时，表示给定页面的“pdf 字典”对象没有注释集合 (no `/ANNOTS`) 键。因此试图获得这样的集合返回`null`。这是一个问题，因为它不时发生在相关页面上有明显可见和*可点击*的链接时。

请注意，*可点击*在这里很重要，因为我知道纯文本中可能存在 URL 地址，但我不关心这些，只关心真实的超链接。

### 代码

我通过提供的答案发现了类似的 SO 问题（http://stackoverflow.com/questions/6959076/reading-hyperlinks-from-pdf-file）几乎正是我已经在使用的代码。关键区别在于：

```
// My code
var pdfAnnotations = (PdfArray)PdfReader.GetPdfObject(pageDict.Get(PdfName.ANNOTS));
foreach (var annotation in pdfAnnotations.ArrayList) {}
                    {

// Chris' code                        
var annotsArray = pageDict.GetAsArray(PdfName.ANNOTS); 
foreach(var annotation in annotsArray.ArrayList) { }

// My pageDict.Get() and Chris's pageDict.GetAsArray() methods both 
// return null because there is no ANNOTS key present in pageDict. 
```

### 问题

为什么是空值？带有清晰可见/可点击链接的 PDF 文档如何没有注释集合？文件结构中是否还有其他`PdfObject`代表超链接/URI 的子类型？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:51:20.000

让我猜猜。（没有要分析的样本，就没有办法做任何其他事情。）

顺便说一句，在 PDF 代码中它**永远不会** `/ANNOTS`- PDF 键是区分大小写的！——总是`/Annots`。

在 PDF 源代码中，像`/Annots`名称对象这样的 ASCII 字符串可以用以下任何一种替代方式来表示。根据 PDF 规范，这些都是“合法的”（参见[**PDF-1.7 规范**](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)的第 7.3.5 段，*名称对象*）：[](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)

 **```
 /Annots
 /#41nnots      # '#41' is the hex represenation of ASCII 'A' in PDF
 /A#6Enots      # '#6E' is the hex represenation of ASCII 'n' in PDF
 /An#6Eots      # '#6E' is the hex represenation of ASCII 'n' in PDF
 /A#6E#6Eots    # '#6E' is the hex represenation of ASCII 'n' in PDF
 ...
 /Annot#73      # '#73' is the hex represenation of ASCII 's' in PDF 
```

你明白了......（如果我的快速计算是正确的，你可以做出 32 种不同的变化......）

顺便说一句，这是黑帽黑客用来混淆`/#4Aava#53cript`其恶意软件 PDF 中的密钥的最简单方法之一！有关他们潜在方法的更完整列表，请参阅[**“Corkami 项目”**](http://code.google.com/p/corkami/wiki/PDFTricks)。）

也许您的 iTextSharp 版本（您没有说明）没有正确处理您对`/Annots`name 键的所有表示的搜索？

如果是这样，那么我对您的建议是，在*查找*您的`/Annots`. [**您可以在命令行工具（和 API） qpdf**](http://qpdf.sf.net/)的帮助下成功实现这一点：

```
 qpdf --qdf helloworld.pdf qdf---helloworld.pdf 
```

让我们来看看：

```
 kp@mbp:~$  grep nnots helloworld.pdf
      /#41nnots 57 0 R

 kp@mbp:~$  qpdf --qdf helloworld.pdf qdf---helloworld.pdf

 kp@mbp:~$  grep nnots qdf---helloworld.pdf
 qdf---helloworld.pdf:     /Annots 57 0 R 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:28:55.097

我很确定您不需要担心任何其他类似链接的 PDF 对象（除了大纲/书签元素和嵌入的 javascript 相关的东西）。但是有些读者会在文本中找到 URL 模式并继续使它们可点击，即使它们没有被编码为链接注释。如果没有 PDF 来查看它，最好的猜测是这就是您的情况。（您可以通过在文本中创建一个带有简单 URL（但没有链接注释）的 PDF 来测试这一点，并查看您的阅读器是否使其可点击。）**

# properties - 属性设置器和方法 DRY

> ID：11400152
> 
> 赞同：1
> 
> 时间：2012-07-09T17:34:22.343
> 
> 标签：properties, methods, dry

什么时候为属性设置器制作方法包装器是个好主意？

示例：Show 和 Hide 分别只是 Visible = True 和 Visible = False 的包装器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:16:46.107

如果方法名称能更好地传达正在执行的操作的意图，那么这样做是个好主意。

# c# - 在 C# 中向鼠标旋转无法正常工作

> ID：11400155
> 
> 赞同：2
> 
> 时间：2012-07-09T17:34:27.180
> 
> 标签：c#, rotation, mouse

我试图让一个对象向鼠标旋转。问题是物体总是向左旋转一点点，要精确地多旋转 45 度。

因此，例如，如果我的鼠标位于对象应该位于北方的位置，因此旋转值 = 0，则对象向左旋转 45 度，因此 270 度并因此指向左，而它应该指向北/向上。

这是我的代码：

```
 public override void Update()
    {
        base.Update();

        GetMousePos();
        SetRotation();
    }

    private void GetMousePos()
    {
        MouseState ms = Mouse.GetState();
        _mousePos.X = ms.X;
        _mousePos.Y = ms.Y;
    }

    private void SetRotation()
    {
        Vector2 distance = new Vector2();
        distance.X = _mousePos.X - (_position.X + (_texture.Width / 2));
        distance.Y = _mousePos.Y - (_position.Y + (_texture.Height / 2));
        _rotation = (float)Math.Atan2(distance.Y, distance.X);
    } 
```

**编辑：额外信息**

当我的鼠标位于屏幕右侧时，这些值就会出现。对象应该指向东/右，但他指向北/上。

鼠标位置 X：1012

鼠标位置 Y：265

对象位置 X：400275

对象位置 Y：24025

旋转：0

**编辑 2：如何使用 _rotation**

```
public virtual void Draw(SpriteBatch spriteBatch)
    {
        int width = _texture.Width / _columns;
        int height = _texture.Height / _rows;

        Rectangle destinationRectangle = new Rectangle((int)_position.X, (int)_position.Y, width, height);
        Rectangle sourceRectangle = new Rectangle((int)((_texture.Width / _columns) * _currentFrame), 0, width, height);

        spriteBatch.Begin();
        spriteBatch.Draw(_texture, destinationRectangle, sourceRectangle, Color.White, _rotation, new Vector2(width / 2, height / 2), SpriteEffects.None, 0);
        spriteBatch.End();
    } 
```

**编辑 3：工作修复的东西**

```
 protected void SetRotation()
    {
        MouseState mouse = Mouse.GetState();
        Vector2 mousePosition = new Vector2(mouse.X, mouse.Y);

        Vector2 direction = mousePosition - _position;
        direction.Normalize();

        _rotation = (float)Math.Atan2(
                      (double)direction.Y,
                      (double)direction.X) + 1.5f;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:07:07.580

查看文档`Math.Atan2`：

> 返回值是由 x 轴形成的笛卡尔平面中的角度，以及从原点 (0,0) 开始并在点 (x,y) 处终止的向量。

`Atan2(0,1)`pi/2 或直线上升（北）也是如此。

这意味着测量从 0 开始，即正东（右）并逆时针旋转。看起来你期待0度。笔直向上并顺时针旋转，因此您需要调整逻辑以反映这一点。

# haskell - 具有两个变量的 Haskell 列表理解

> ID：11400156
> 
> 赞同：4
> 
> 时间：2012-07-09T17:34:32.380
> 
> 标签：haskell, list-comprehension

我试图找到一些特殊的数字，这样当它除以 2 时得到 1，除以 3 时得到 2，依此类推，直到 6。

这非常有效。

```
[ x | x <- [1..1000],x `mod` 2 == 1 , x `mod` 3 == 2 , x `mod` 4 == 3 , x `mod` 5 == 4 , x `mod` 6 == 5] 
```

答：

```
[59,119,179,239,299,359,419,479,539,599,659,719,779,839,899,959] 
```

我正在努力使它变得更好，以免它太冗长，但以下内容不起作用。

```
[ x | x <- [1..1000], y <- [2..6], x `mod` y == (y-1) ] 
```

它需要所有*y*满足条件的 x，但我想要的是，我想要满足*所有*y 条件的 x。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:57:01.370

列表理解很短，但通常晦涩难懂。编写/读取一元代码通常更容易。让我们翻译第一个版本

```
do
x <- [1..1000] -- here a value is selected
guard $ x `mod` 2 == 1  -- it checked
guard $ x `mod` 3 == 2 -- and checked
guard $ x `mod` 4 == 3 
guard $ x `mod` 5 == 4 
guard $ x `mod` 6 == 5 -- you got the point
return x -- value returned 
```

第二个是

```
do
x <- [1..1000] -- value selected
y <- [2..6]  -- another value selected
guard $ x `mod` y == (y-1) -- the pair of previously selected values is checked 
return x -- and now the first value returned. 
```

===

第二个写对了：

```
do
x <- [1..1000]
guard $ and $ do
              y <- [2..6] 
              return $ x `mod` y == 1
return x 
```

它可以通过多种方式重写，包括

```
[x | x <- [1..1000], and [x `mod` y == 1 | y <- [2..6] ] ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:27:28.397

仅作记录，您仍然可以从第二次尝试中“恢复”解决方案：

```
import Data.List

map head $ filter ((==5).length) $ group [ x | x <- [1..1000], y <- [2..6], x `mod` y == (y-1) ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T17:37:41.960

您可以将条件写为

```
[ x | x <- [1..1000], all (\y -> x `mod` y == y-1) [2 .. 6]] 
```

但是在这种特定情况下你可以做得更好，

```
let modulus = foldl1 lcm [2 .. 6]
[x | x <- [1 .. 1000], x `mod` modulus == modulus - 1]
[modulus - 1, 2*modulus - 1 .. 1000]  -- even better 
```

# backup - 我可以使用 SQL Server 2008 R2 Express 备份 SQL Server 2005 数据库吗

> ID：11400157
> 
> 赞同：1
> 
> 时间：2012-07-09T17:34:39.537
> 
> 标签：backup, sql-server-express

我的目标是使用 SQL Server 2008 R2 Express 处理客户端的 2005 数据库。完成后，我想将数据库恢复为 2005 格式。

有人可以发布在 2008 R2 和/或链接中备份 2005 数据库的过程。

谢谢你，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:09:52.727

没有办法，没有过程，没有工具，没有“黑客”，没有解决方法来做到这一点。**它只是行不通**。如果您已将 SQL Server 数据库“升级”到 2008 R2 级别，则**无法回到**2005 年。没有。齐尔奇。纳达。时期。

如果您需要使用客户端的 SQL Server 2005 数据库并且需要能够将其返回给客户端，则需要在您的计算机上安装 SQL Server 2005 版本（Express 可以，只要您不这样做'不超过 4 GB 大小限制），或者您需要将所有更改/修改作为 SQL 脚本“运回”，这些脚本可以针对 SQL Server 2005 版本执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:30:34.520

是的，您可以通过以下步骤执行此操作：

转到注册表编辑器“regedit32”并在“HKEY_Local_...”下找到 Microsoft SQL Server 实例。在那里您需要将 90 重命名为“Old90”，同样的“90”您也可以在“哇...”中找到，也将其重命名为“old90”。现在安装 SQL Server 2008。安装 SQL Server 后，您需要在注册表中的同一位置将新创建的文件夹“90”重命名为“70”。现在将旧文件夹“Old90”重命名为“90”​​。现在您将在您的机器上同时拥有这两个版本。

# c# - 程序关闭后远程服务关闭

> ID：11400159
> 
> 赞同：4
> 
> 时间：2012-07-09T17:34:49.967
> 
> 标签：c#, windows-services

我们有一个我们创建的服务（并在我们的一个服务器上运行），我想通过另一个程序来控制它。我在服务方面遇到了一些困难，希望有人能提供帮助。

如果我尝试使用以下路由控制服务，它也仅适用于服务器上的用户：

```
ServiceController service = new ServiceController("MyService", "MyServer");

try
{
    if (service.Status == ServiceControllerStatus.Running)
    {
        teServiceStatus.BackColor = Color.LightGreen;
        teServiceStatus.Text = "Running";
        sbStartService.Enabled = false;
        sbStopService.Enabled = true;
    }
    else
    {
        teServiceStatus.BackColor = Color.Red;
        teServiceStatus.Text = "Stopped";
        sbStartService.Enabled = true;
        sbStopService.Enabled = false;
    }
}
catch (InvalidOperationException ioe)
{
    if (System.Diagnostics.Debugger.IsAttached)
        System.Diagnostics.Debugger.Break();
    else
    {
        teServiceStatus.Text = "Cannot Connect";
        teServiceStatus.BackColor = Color.Red;
    }
}
catch (Exception ex)
{
    if (System.Diagnostics.Debugger.IsAttached)
        System.Diagnostics.Debugger.Break();
    else
        ;
} 
```

因此，作为网络用户，我也以用户身份在服务器上，当我运行想要控制此服务的程序时，我可以看到状态并启动和停止它，但没有其他人可以（除非我将它们添加到服务器，我不想这样做）。

我还可以使用下面的路由并在服务器上模拟用户：

```
//Establish connection to the Publishing Server with application credentials.
ConnectionOptions connectionOptions = new ConnectionOptions();
connectionOptions.Impersonation = ImpersonationLevel.Impersonate;
connectionOptions.EnablePrivileges = true;
connectionOptions.Username = "UserOnServer";
connectionOptions.Password = "UserPassword";
ManagementScope managementScope = new ManagementScope(@"\\MyServer\root\cimv2", connectionOptions);
managementScope.Connect();

ManagementPath path = new ManagementPath("Win32_Service");
ManagementClass services = new ManagementClass(managementScope, path, null);

foreach (ManagementObject service in services.GetInstances())
{
    try
    {
        if (service.GetPropertyValue("Name").ToString() == "MyService")
            if (service.GetPropertyValue("State").ToString().ToLower().Equals("running"))
            {
                teServiceStatus.BackColor = Color.LightGreen;
                teServiceStatus.Text = "Running";
                sbStartService.Enabled = false;
                sbStopService.Enabled = true;
            }
            else
            {
                teServiceStatus.BackColor = Color.Red;
                teServiceStatus.Text = "Stopped";
                sbStartService.Enabled = true;
                sbStopService.Enabled = false;
            }
    }
    catch (InvalidOperationException ioe)
    {
        if (System.Diagnostics.Debugger.IsAttached)
            System.Diagnostics.Debugger.Break();
        else
        {
            teServiceStatus.Text = "Cannot Connect";
            teServiceStatus.BackColor = Color.Red;
        }
    }
    catch (Exception ex)
    {
        if (System.Diagnostics.Debugger.IsAttached)
            System.Diagnostics.Debugger.Break();
        else
        {
            teServiceStatus.Text = "Cannot Connect";
            teServiceStatus.BackColor = Color.Red;
        }
    }
} 
```

这样可以使任何使用该程序的用户都可以启动/停止服务并查看它的当前状态但是，当程序关闭时，服务停止（不知道这是否应该发生，但确实如此）。

那么，如何让我的程序启动、停止和读取任何使用它的人的服务状态呢？我觉得我很接近，但显然，错过了一些东西。

**更新** 使用 ConnectionOptions 路由时，似乎只要 ConnectionOptions（或 ManagementScope）所在的表单关闭，然后服务器将其记录为登录用户已“注销”，并在该处关闭服务时间。我不知道为什么，但仍然试图调查它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:20:41.100

让您正在运行的客户端代码模拟该`NT AUTHORITY\NetworkService`帐户，使其具有与您的服务相同的权限级别。[该帐户的密码为空](http://technet.microsoft.com/en-us/library/cc755249.aspx)（或者可能是空字符串，我猜都试试）。[WindowsIdentity.Impersonate](http://msdn.microsoft.com/en-us/library/chf6fbt4.aspx)中演示了有关如何在模拟该用户时运行代码的文档。[有关模拟/委托](http://msdn.microsoft.com/en-us/library/cc949004.aspx)的更多信息。

此外，您可能希望为服务中[的所有未处理异常实现处理程序](http://www.csharp-examples.net/catching-unhandled-exceptions/)。有可能在您的 try/catch 块之外引发异常，这就是为什么您的应用程序退出而您的附加调试器没有在您的 catch 块中设置的任何断点上中断。

# ruby-on-rails - Rails 3中友谊的验证条件？

> ID：11400160
> 
> 赞同：0
> 
> 时间：2012-07-09T17:34:50.600
> 
> 标签：ruby-on-rails, conditional, rails-activerecord

我正在写我的社交网络。我使用设计作为身份验证系统。我在 railscasts 中使用了自指关联。我想解决我的小问题，我让用户查看其他人的个人资料并使用链接添加朋友。但是，如果您是朋友，则添加到朋友会再次显示。我问了类似的问题，但现在我无法做到。

我的友谊模型：

```
class Friendship < ActiveRecord::Base
  attr_accessible :friend_id
  belongs_to :user
    belongs_to :friend, :class_name => "User"
    validates :friend, :presence => true, :unless => :friend_is_self

    validates_uniqueness_of :user_id, :scope => [:friend_id]

    def friend_is_self
        user_id == friend_id ? false : true
    end
end 
```

我的用户模型：

```
....  has_many :friendships
    has_many :friends, :through => :friendships
    has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
    has_many :inverse_friends, :through => :inverse_friendships, :source => :user
end 
```

这是我的 show.html.erb(user)

```
<section>
      <h1><%= @user.username %> </h1>
 <% unless current_user == @user %>
 <%= link_to "Arkadaşlarıma Ekle", friendships_path(:friend_id => @user), :method => :post,class: "btn btn-large btn-primary" %>
    <%end %>
      </section>. 
```

对于类似的问题，我很抱歉，但我找不到`if friend?`添加朋友链接的正确条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:05:00.590

模型中的类方法怎么样`Friendship`？

```
class Friendship < ActiveRecord::Base
  # ...

  def self.friendship_exists?(user1, user2)
    Friendship.where("(user_id = ? AND friend_id = ?) OR (user_id = ? AND friend_id = ?)", user1.id, user2.id, user2.id, user1.id).size > 0
  end
end 
```

现在你`link_to_if`可以

```
link_to_unless Friendship.friendship_exists?(current_user, @user) ... 
```

# ruby-on-rails - 我应该如何对这个模块进行单元测试？

> ID：11400161
> 
> 赞同：1
> 
> 时间：2012-07-09T17:34:54.697
> 
> 标签：ruby-on-rails, unit-testing, testing, bdd

我从事 Rails 开发已经有很短的时间了，但很快就完成了。我仍然迷失的一个领域是编写测试。

我了解如何编写测试，但我从不知道我应该测试什么，这让我很难真正开始编写自己的测试。

我最近为我正在处理的项目编写了一个与 API 一起使用的 gem，并认为这将是我编写一些测试的最佳时机。我仍然对我应该测试的内容感到迷茫。

我希望如果我发布了我的一个课程，其中包含一些方法，有人可能会给我一些关于我应该测试什么的想法。

我正在使用的 API 返回 JSON 对象，因此我的所有方法实际上只是发出 GET 请求并将 JSON 返回到我正在构建的应用程序的助手。我正在使用 HTTParty gem 来发出 get 请求。

第一种方法只是列出有关特定广告商的一些信息：

```
 module MyModule

    class User < MyObject

      # User
      # This will list information about a specific user
      # required parameter(s):
      #     user_id
      # example:
      #   MyModule.connect("Your API Key")
      #   MyModule::User.list(5)
      # returns:
      #   Returns a single result with the following properties:
      # {
      #    "user_name":"blah",
      #    "user_id":253,
      #    "last_login":"2011-03-01"
      # }   
         def list(user)
      MyModule.get("/users/#{user}")
         end
    end
   end 
```

我最初的猜测是我会测试以确保这个 JSON 对象返回正确的属性，但我不完全确定。

我是否还需要测试以确保传递给方法的参数是否存在，或者我不应该担心什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:46:36.573

单元测试应该检查某些对象或方法的*行为*，而不是对象组合。即便如此，您实际上只能在这里测试几件事：

1.  您的 GET 请求成功（或不成功）。
2.  你得到有效的 JSON（或没有）。
3.  你的记录没有被破坏。

您可能应该在稍高的水平上进行测试。例如，我会测试这个用户故事：

```
Given a record with some reasonable fixture data,
When the record is successfully retrieved
Then your application does something useful with it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:51:02.593

当我不将其视为测试时，我发现它会有所帮助，而是将其视为我的班级行为方式的示例。@CodeGnome 的回答非常准确。通过阅读代码和您的描述，您有一个明显有价值的行为方面：您的班级找到有关广告用户的登录信息。（请原谅我缺乏对 Ruby 和 Rails 特定语法的了解，我将与@CodeGnome 做同样的事情，但有一个更具体的例子）。

您的课程“应该检索广告用户的最后登录日期”。这看起来像是与其行为相匹配的描述，您可以在此之后命名您的测试方法。

现在想想一些具体的例子。它是否曾经根据用户检索不同的数据？如果用户之前没有登录怎么办？如果用户ID错误怎么办？MyModule 是否始终可用，或者如果您失去移动连接，它是否可能不可用？那你会怎么做？您的班级“应该升级连接错误”吗？

通过这种方式思考，你会发现行为的不同方面和不同的例子。像 RSpec 这样的东西会帮助你轻松地表达这些，或者你可以`just_use_underscored_test_names`。

如果你没有*不同*的行为方面，你可能有过早的重构/优化，以及太多的抽象层。

请记住，您正在查看有关该类的行为方式以及它为何有价值的示例，以便您可以记录它并使其易于理解。您正在使用它来帮助细化类的职责，以使其保持可维护性。这实际上与测试无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T17:41:26.993

关于测试的事情是，你想要做到多彻底完全取决于你。在理想情况下，您将对应用程序的每个方面进行测试。鉴于您可能正在从事一个副项目，并且您的时间最好花在编写应用程序上，我认为只有基本的流程测试才能满足您的需求。

是的，检查正确的 JSON 属性将是一个好的开始。

你没有提到你正在使用什么测试套件——如果你还没有任何想法，我会推荐 rspec。

希望有帮助，

里根

# c# - WmiMonitorBrightnessMethods - Windows 7 不支持

> ID：11400162
> 
> 赞同：1
> 
> 时间：2012-07-09T17:35:00.083
> 
> 标签：c#, wmi

Windows 7 不支持 WmiMonitorBrightnessMethods。可能的原因是什么。我正在尝试使用 WmiSetBrightness 在 c# 应用程序中获取和设置亮度级别和值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:36:27.400

可能很简单，PC不支持以官方方式通过软件调节亮度-例如，某些笔记本电脑通过Mobility Centre支持，其他仅通过专有软件支持，而其他仅通过硬件键支持。

如果您在一些相同的机器上看到问题，请确保图形驱动程序是最新的。

# python - Python 列表索引效率

> ID：11400163
> 
> 赞同：14
> 
> 时间：2012-07-09T17:35:00.800
> 
> 标签：python, list, performance

关于内置 python 列表对象的快速问题。假设您有一个编号为 0 - 99 的列表。您正在编写一个程序，该程序获取列表中的最后一项并将其用于其他目的。使用 list[-1] 是否比使用 list[99] 更有效？换句话说，无论哪种情况，python 都会遍历整个列表吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T17:37:10.527

Python 不会遍历列表来查找特定索引。列表是连续内存中的数组（指向元素的指针），因此定位所需元素始终是简单的乘法和加法。如果有的话，`list[-1]`会稍微慢一些，因为 Python 需要将负索引添加到长度才能获得*真正的*索引。（我怀疑它*明显*慢了一点，因为无论如何都是用 C 语言完成的。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T17:43:22.123

为什么不测试看看？

```
import timeit
t=timeit.timeit('mylist[99]',setup='mylist=list(range(100))',number=10000000)
print (t)
t=timeit.timeit('mylist[-1]',setup='mylist=list(range(100))',number=10000000)
print (t) 
```

当然，正如您通过运行几次可以看到的那样，由于其他答案中指出的原因，确实没有（明显的）差异。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T17:50:16.223

你可以定时：

```
>>> import timeit
>>> timeit.Timer('values[99]', 'values = range(100)').timeit(number = 10**7)
0.44513392448425293
>>> timeit.Timer('values[99]', 'values = range(100)').timeit(number = 10**7)
0.45273900032043457
>>> timeit.Timer('values[-1]', 'values = range(100)').timeit(number = 10**7)
0.44431495666503906
>>> timeit.Timer('values[-1]', 'values = range(100)').timeit(number = 10**7)
0.44684290885925293
>>> timeit.Timer('values[-1]', 'values = range(100)').timeit(number = 10**7)
0.44867610931396484
>>> timeit.Timer('values[-1]', 'values = range(100)').timeit(number = 10**8)
4.4455509185791016
>>> timeit.Timer('values[99]', 'values = range(100)').timeit(number = 10**8)
4.4184651374816895
>>> timeit.Timer('values[99]', 'values = range(100)').timeit(number = 10**8)
4.4276700019836426
>>> timeit.Timer('values[-1]', 'values = range(100)').timeit(number = 10**8)
4.4026989936828613
>>> timeit.Timer('values[-1]', 'values = range(100)').timeit(number = 10**8)
4.4386618137359619
>>> timeit.Timer('values[99]', 'values = range(100)').timeit(number = 10**8)
4.3991479873657227
>>> 
```

真的没有区别，但如果你真的想要最后一项`values[-1]`似乎是最简单/最安全的方法，因为它总是会抓住最后一项，无论列表的长度如何，只要它不是空列表，

这会引发异常：

```
>>> [][-1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
>>> 
```

> 换句话说，无论哪种情况，python 都会遍历整个列表吗？

在这两种情况下，python 都不会遍历列表。

其实我很好奇python是否做了什么不同的事情，所以我反汇编了代码：

```
>>> import dis
>>> def test_0():
...     values = range(100)
...     return values[99]
...
>>> def test_1():
...     values = range(100)
...     return values[-1]
...
>>> dis.dis(test_0)
2           
    0 LOAD_GLOBAL              0 (range)
    3 LOAD_CONST               1 (100)
    6 CALL_FUNCTION            1
    9 STORE_FAST               0 (values)

3          
    12 LOAD_FAST                0 (values)
    15 LOAD_CONST               2 (99)
    18 BINARY_SUBSCR
    19 RETURN_VALUE
>>> dis.dis(test_1)
2           
    0 LOAD_GLOBAL              0 (range)
    3 LOAD_CONST               1 (100)
    6 CALL_FUNCTION            1
    9 STORE_FAST               0 (values)

3          
    12 LOAD_FAST                0 (values)
    15 LOAD_CONST               2 (-1)
    18 BINARY_SUBSCR
    19 RETURN_VALUE
>>> 
```

好吧，它看起来在指令级别，几乎相同，您需要进入 CPython 实现，以确切了解在处理负索引时发生了什么，但我认为大多数其他答案已经暗示了它.

```
$ python --version
Python 2.6.1 
```

出于好奇，我挖得更深，发现了这个：

在 python 2.7.1 上，但在大多数 python 2 上应该是相同的。*

`./Python/ceval.c:`

```
case BINARY_SUBSCR:
    w = POP();
    v = TOP();
    if (PyList_CheckExact(v) && PyInt_CheckExact(w)) {
        /* INLINE: list[int] */
        Py_ssize_t i = PyInt_AsSsize_t(w);
        if (i < 0)
            i += PyList_GET_SIZE(v);
        if (i >= 0 && i < PyList_GET_SIZE(v)) {
            x = PyList_GET_ITEM(v, i);
            Py_INCREF(x);
        }
        else
            goto slow_get;
    }
    else
      slow_get:
        x = PyObject_GetItem(v, w);
    Py_DECREF(v);
    Py_DECREF(w);
    SET_TOP(x);
    if (x != NULL) continue;
    break; 
```

请注意，基本上是的 ，在处理负索引时`if (i < 0) i += PyList_GET_SIZE(v);`会有一点开销。`constant`

如果你好奇 `./Include/listobject.h:` `#define PyList_GET_ITEM(op, i) (((PyListObject *)(op))->ob_item[i])`，那么它基本上是一个查找；）

虽然差异很小，如果你的目标是声明你想要最后一个值，那么这`values[-1]`更pythonic/更清楚地做出这个意图，`values[99]`只是意味着如果程序员不知道它有 100 个值，则获取第 99 个值他不知道它的最后一个值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T17:36:51.283

在任何一种情况下它都不会迭代。`list[-1]`本质上与 相同`list[len(list) - 1]`。列表由数组支持，因此查找是恒定时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-04T11:19:38.253

python中的列表索引总是O(1)。

有关时间复杂度的更多详细信息，请点击此[链接](http://wiki.python.org/moin/TimeComplexity)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-09T18:03:38.813

一个简单的`timeit`测试结果几乎相等的时间，负指数稍慢

```
lis=list(xrange(10000000))
def f1():
    a,b,c,d,e=lis[-1],lis[-2],lis[-3],lis[-4],lis[-5]    

def f2():
    a,b,c,d,e=lis[0],lis[1],lis[2],lis[3],lis[4]

if __name__=="__main__":
    from timeit import Timer
    t = Timer("f1()", "from __main__ import f1")
    print t.timeit()
    t = Timer("f2()", "from __main__ import f2")
    print t.timeit() 
```

**输出：**

```
0.878027235305
0.845932094722 
```

# php - 奇怪的 php file_get_contents 行为

> ID：11400164
> 
> 赞同：0
> 
> 时间：2012-07-09T17:35:02.597
> 
> 标签：php, file-get-contents

我在 php 中编写了一个文件，它正在做一些幕后工作，并根据 location GET 参数返回一个简单的数字，在这种情况下输出为 49，你自己看看，剪切并粘贴到浏览器中：

[http://www.ericseven.com/distance.php?location=3133 W. Belle Ave San Tan Valley, AZ 85142](http://www.ericseven.com/distance.php?location=3133%20W.%20Belle%20Ave%20San%20Tan%20Valley,%20AZ%2085142)

当我将其拉入另一个 php 文件时，我想使用该数字进行一些计算，它会莫名其妙地返回一个不同的数字（在本例中为 7174，如果您点击以下 URL，则可以看到）：

[http://www.ericseven.com/test.php](http://www.ericseven.com/test.php)

这是 test.php 的来源 - 注意 $url 与上面的位置参数相同（它是剪切和粘贴）：

```
$url = "http://www.ericseven.com/distance.php?location=3133 W. Belle Ave San Tan Valley, AZ 85142";
$contents = file_get_contents($url);
echo $contents; 
```

我已经搜索和搜索，我不知道我是否搜索错误或交易是什么，但我找不到这两个数字（49 和 7174）之间的任何关系，也找不到任何处理类似问题的人. 仅供参考，我尝试了 fopen/fread - 结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:37:09.523

尝试

```
$url = "http://www.ericseven.com/distance.php?location=".urlencode("3133 W. Belle Ave San Tan Valley, AZ 85142"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T17:40:00.380

您需要对 URL 进行编码。

```
<?php
$location = "3133 W. Belle Ave San Tan Valley, AZ 85142";
$url = 'http://www.ericseven.com/distance.php?location='.urlencode($location);
$contents = file_get_contents($url);
echo $contents;
?> 
```

# javascript - 动态 Snap-On 小部件

> ID：11400167
> 
> 赞同：0
> 
> 时间：2012-07-09T17:35:28.340
> 
> 标签：javascript, jquery, css

我正在尝试创建一个基于 Javascript/Jquery 的应用程序，该应用程序最终将进入我的博客。这是[jsFiddle](http://jsfiddle.net/uzfwF/1/)

我正在使用 chrome 并且尚未在其他浏览器上进行测试，但到目前为止它在我的浏览器上所做的是允许白色的“可移动”div 在左右列中变为“可对齐”。我似乎已经弄清楚了那部分。还有两件事我想我不知道该怎么做。

1）我想这样做，如果同一列中有 2 个或多个“可移动”div，并且您尝试将它们相互移动，它们不会重叠。现在它们重叠，但我希望其他 div(s) 在它们相互接触时也能移动。我尝试使用 css 将定位更改为相对，但其余代码随后中断。

2）当您在 div 上按住鼠标并移动时，有时它会尝试用鼠标突出显示 div，这会导致 div 出现“故障”，迫使您重新单击。有没有解决的办法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:29:20.667

找到了一个使用碰撞检测的 jQuery 解决方案

# objective-c - 当应用程序进入后台时，如何在自定义应用程序中播放来自 ipod 的音乐

> ID：11400171
> 
> 赞同：4
> 
> 时间：2012-07-09T17:35:38.370
> 
> 标签：objective-c, ios, xcode, cocoa-touch, ios5

我正在开发一个音乐应用程序，即使应用程序进入后台并使用，音乐也会继续播放，`beginReceivingRemoteControlEvents`以便用户可以通过在他的 iPhone/iPad 上单击两次主页按钮来控制播放的状态。

我浏览了由 Apple 开发的“音乐应用程序”示例，它使用`MPMusicPlayerController`它从 iPod 库中获取歌曲的位置，但是一旦应用程序进入后台并且不支持`beginReceivingRemoteControlEvents`.

我查看了几篇说使用 AVPlayer 的文章，但它不支持从 iPod 库中获取音乐，所以我被困在如何在应用程序进入后台时播放音乐并且它是通过 remoteEvents 控制的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:06:29.247

iPodMusicPlayer 将在后台播放，但通过 iOS iPod Music Player。您的应用不会在后台收到通知。为此，您需要设置一个 AVAudioSession 并使用 AVPlayer 播放。

[在这里查看更多信息](https://stackoverflow.com/q/3175974/1149906)

[苹果在这里有很好的资源](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008765)

来自苹果文档：

> 使用 MPMusicPlayerController 对象或音乐播放器来播放设备 iPod 库中的媒体项目。有两种类型的音乐播放器：
> 
> *应用程序音乐播放器*在您的应用程序中本地播放音乐。它不知道 iPod 应用程序正在播放的项目，也不影响 iPod 状态。
> 
> *iPod 音乐播放器*代表您使用内置的 iPod 应用程序。在实例化时，它采用当前 iPod 应用程序状态，例如正在播放的项目的标识。如果用户在播放音乐时离开您的应用程序，该音乐将继续播放。然后，iPod 应用程序会显示您的音乐播放器最近设置的重复模式、随机播放模式、播放状态和正在播放的项目。

确保您正在使用

```
+ iPodMusicPlayer 
```

并不是

```
+ applicationMusicPlayer 
```

[这是一篇关于如何将库导入 AVAudioSession 的好文章](https://stackoverflow.com/q/3905240/1149906)

在 info.plist 文件中添加一行，名称为“UIBackgroundModes” 输入“audio”作为第一个键。

![UIBackgroundModes](../Images/e961ef8de50c2100482ac1ffc6da17b7.png)

# clojure - 具有多个参数的组合路由

> ID：11400173
> 
> 赞同：2
> 
> 时间：2012-07-09T17:35:46.693
> 
> 标签：clojure, compojure, clout

是否可以定义包含多个参数的复合路由？

IE：

```
(def my-routes
  (routes 
    (GET "/something/:param1/:param2" [] my-handler))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:41:31.397

这对我有用：

```
(GET "/something/:param1/:param2" [param1 param2]
    (str {:first param1 :second param2})) 
```

# core-data - Core Data NSInternalInconsistencyException（这次不同）

> ID：11400174
> 
> 赞同：0
> 
> 时间：2012-07-09T17:35:50.490
> 
> 标签：core-data, nsmanagedobject, nsmanagedobjectcontext

我知道 SO 中有一百万个这样的问题，但这是不同的，我很难过。

我有一个包含十几个实体的数据模型。代码运行得很好。然后我对模型进行版本化，添加实体和关系，然后更新 xdatamodeld 文件中当前版本化数据模型的设置，现在在尝试访问新实体时出现 NSInternalInconsistencyException。

在我的主 VC 中，我记录了上下文、持久存储协调器、托管对象模型和所有实体。一切看起来都如我所料，包括我试图访问的实体。

我已经将 SQLite DB 吹走，让 Core Data 重新创建它，并且可以看到具有正确列类型的表。

一切看起来都是正确的。

这是获取代码：

```
- (void)fetchMissions {
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Mission" inManagedObjectContext:self.managedObjectContext];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

    [request setEntity:entity];
    [request setSortDescriptors:sortDescriptors];

    NSError *error = nil;
    missionsArray = [[self.managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
} 
```

下面是输出：

```
NSLog(@"Entities : %@",[[self.managedObjectContext.persistentStoreCoordinator.managedObjectModel entities] valueForKey:@"name"]);

Entities : (
    Character,
    CharacterClass,
    CharacterCondition,
    CharacterObjective,
    CharacterPerception,
    Condition,
    Mission,
    Objective,
    Perception,
    PlayerCharacter,
    Scoreboard
) 
```

当我打印出整个托管对象模型时，我还看到了 Mission 实体的详细信息：

```
NSLog(@"MOM : %@", self.managedObjectContext.persistentStoreCoordinator.managedObjectModel); 
```

该实体非常简单...... 3 列，两列是文本/字符串，一列是整数。模型编辑器中的实体描述与 SQLite 中的表定义相匹配。

我错过了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:30:23.477

好吧，我是个白痴……

没有像在其他 VC 中那样在 viewDidLoad 中获取 MOC，因此当我从代表打印出正确的 MOC 时，我在 Mission VC 中没有处理它。

固定的。

谢谢收听。:)

# android - Eclipse ADT（android Pugin）拒绝在可绘制文件夹中查找图像

> ID：11400179
> 
> 赞同：0
> 
> 时间：2012-07-09T17:36:29.963
> 
> 标签：android, android-layout, drawable, adt

关闭蝙蝠，版本信息：

*   Eclipse：Juno 版本，内部版本 20120614-1722
*   安卓：4.4
*   ADT：20.0.0v201206242043-391819

关于各种`res/drawable`文件夹（标准、、、、、 `drawable-hdpi`）以及是否有必要创建标准可绘制文件夹（如果不存在），Android/ADT/Eclipse 将在其中查找`-mdpi`文件等方面有很多很多问题. 但是，我的问题似乎到目前为止还没有得到回答。`-ldpi``-xhdpi``@drawable/*`

这是一个非常简单的问题。简单地说，我在我的文件夹中放置了一个文件名“starbg.png” ，然后在布局文件中`drawable-hdpi`使用了限定符。但是，Eclipse 抛出错误：`@drawable/starbg.png``xml`

```
error: Error: No resource found that matches the given name (at 'background' 
with value '@drawable/starbg.png'). 
```

为什么？不确定。我根据 SO 问题尝试了以下解决方案，但均未成功：

*   清理项目（多次）
*   创建一个`res/drawable`文件夹（因为我的 ADT 版本没有自动生成一个文件夹）并在那里添加图像
*   将文件复制到每个相关的文件夹中
*   将文件重命名为`star_bg.png`
*   重启 Eclipse

项目并不复杂。这是一个非常简单的设置，有 2 个视图，其中一个`LinearLayout`只有一个`android:background`属性（当然还有布局和方向信息），另一个就像一个魅力。

所以我很难过。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:37:50.313

当您指定资源时，它不应包含文件扩展名。也就是一个资源文件，

```
drawable/starbg.png 
```

应该被称为，

```
@drawable/starbg 
```

例如，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:background="@drawable/starbg"
  ...>
...
</RelativeLayout> 
```

# wpf - wpf中的清除视口

> ID：11400180
> 
> 赞同：0
> 
> 时间：2012-07-09T17:36:30.173
> 
> 标签：wpf, viewport

我创建了一个模型（立方体）并将其添加到我的视口中，它可以正常工作而没有任何问题。

this.mainViewport.Children.Add(model);

每当我使用以下代码时，立方体变成黑色而不是原来的颜色。

this.mainViewport.Children.Clear(); this.mainViewport.Children.Add(model);

我需要在下一秒将立方体添加到另一个位置时清除视口。任何解决该问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T11:13:37.767

I know that it is an old question, but right answer might help somebody. The cube gets black because
`this.mainViewportChildren.Clear()`
removes also light source (any of), to make cube get original color you must add to your code something like:
`this.mainViewport.Children.Add(new ModelVisual3D() { Content = new AmbientLight(Colors.White) });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:09:45.973

我会做这样的事情：第一次在它的开始位置创建立方体：

```
ModelVisual3D model = new ModelVisual3D();
model.Content = cube; 
```

然后在计时器中，我将使用新位置更改变换：

```
model.Transform = new TranslateTransform3D(X, Y, Z); // model need to be a field in your class 
```

其他可用的变压器是：

> 1.  ScaleTransform3D
>     
>     
> 2.  旋转变换3D
>     
>     
> 3.  矩阵变换3D
>     
>     
> 4.  变换3D组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-15T11:56:13.120

```
//if you use ScreenSpaceLines3D
for (int i = _mainViewport.Children.Count - 1; i >= 0; i--)
{
    ModelVisual3D modelVisual3D = ModelVisual3D)_mainViewport.Children[i];
    if (modelVisual3D is ScreenSpaceLines3D)
    {
        ScreenSpaceLines3D line3D = ScreenSpaceLines3D)_mainViewport.Children[i];
        line3D.Points.Clear();                             
        continue;

    }
    if (modelVisual3D.Content is DirectionalLight == false)   
    {                
       mainViewport.Children.Remove(modelVisual3D); 
    }                   
} 
```

# python - 大熊猫旋转数据框，重复行

> ID：11400181
> 
> 赞同：4
> 
> 时间：2012-07-09T17:36:31.483
> 
> 标签：python, pivot, pivot-table, pandas

我在熊猫中旋转时遇到了一些麻烦。`dataframe`我正在处理的（日期、位置、数据）看起来像：

```
dates    location    data
date1       A         X
date2       A         Y
date3       A         Z
date1       B         XX
date2       B         YY 
```

基本上，我正在尝试以位置为中心，最终得到如下数据框：

```
dates   A    B    C
date1   X    XX   etc...
date2   Y    YY
date3   Z    ZZ 
```

不幸的是，当我旋转时，相当于原始日期列的索引没有改变，我得到：

```
dates  A   B   C
date1  X   NA  etc...
date2  Y   NA
date3  Z   NA
date1  NA  XX
date2  NA  YY 
```

有谁知道我如何解决这个问题以获得我正在寻找的数据帧格式？

我目前正在这样称呼 Pivot：

```
df.pivot(index="dates", columns="location") 
```

因为我有 # 个要旋转的数据列（不想将每个列都列为参数）。我相信默认情况下，pivot 会旋转数据框中的其余列。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:15:59.527

如果您有多个数据列，则在没有值列的情况下调用 pivot 应该为您提供一个以 MultiIndex 作为列的旋转框架：

```
In [3]: df
Out[3]: 
  columns     data1     data2 index
0       a -0.602398 -0.982524     x
1       a  0.880927  0.818551     y
2       b -0.238849  0.766986     z
3       b -1.304346  0.955031     x
4       c -0.094820  0.746046     y
5       c -0.835785  1.123243     z

In [4]: df.pivot('index', 'columns')
Out[4]: 
            data1                         data2                    
columns         a         b         c         a         b         c
index                                                              
x       -0.602398 -1.304346       NaN -0.982524  0.955031       NaN
y        0.880927       NaN -0.094820  0.818551       NaN  0.746046
z             NaN -0.238849 -0.835785       NaN  0.766986  1.123243 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T18:46:31.230

您如何调用 DataFrame.pivot 以及您的日期列是什么数据类型？

假设我有一个与您类似的 DataFrame，日期列包含日期时间对象：

```
In [52]: df
Out[52]: 
       data                dates loc
0  0.870900  2000-01-01 00:00:00   A
1  0.344999  2000-01-02 00:00:00   A
2  0.001729  2000-01-03 00:00:00   A
3  1.565684  2000-01-01 00:00:00   B
4 -0.851542  2000-01-02 00:00:00   B

In [53]: df.pivot('dates', 'loc', 'data')
Out[53]: 
loc                A         B
dates                         
2000-01-01  0.870900  1.565684
2000-01-02  0.344999 -0.851542
2000-01-03  0.001729       NaN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:28:46.550

刚刚回答了我自己的问题。我正在使用旧的 Sybase 模块导入数据，我认为它使用了来自 mxDatetime 的旧 DateTimeType 对象。在该模块中，2011 年 1 月 1 日的日期时间不一定等于 2011 年 1 月 1 日的另一个日期时间（例如，每个日期时间都是唯一的）。因此，数据框枢轴将每个列值视为索引中的唯一值。

谢谢您的帮助。

# delphi - 不兼容的类型：“TDownloadProgressEvent”和“Procedure”

> ID：11400182
> 
> 赞同：1
> 
> 时间：2012-07-09T17:36:32.767
> 
> 标签：delphi, download, progress-bar

我正在尝试在进度条中显示状态的同时下载文件。

我按照此处的说明进行操作：http: [//delphi.about.com/cs/adptips2003/a/bltip0903_2.htm](http://delphi.about.com/cs/adptips2003/a/bltip0903_2.htm)

这是我的代码：

```
unit unitUpdate;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, StdCtrls, ComCtrls, ExtActns;

type
  TForm5 = class(TForm)
    ProgressBar1: TProgressBar;
    SaveDialog1: TSaveDialog;
  private
    procedure URL_OnDownloadProgress
        (Sender: TDownLoadURL;
         Progress, ProgressMax: Cardinal;
         StatusCode: TURLDownloadStatus;
         StatusText: String; var Cancel: Boolean) ;
         function DoDownload: boolean;
  public
    { Public declarations }
  end;

var
  Form5: TForm5;

implementation

{$R *.dfm}

procedure TForm5.URL_OnDownloadProgress;
begin
   ProgressBar1.Max:= ProgressMax;
   ProgressBar1.Position:= Progress;
end;

function TForm5.DoDownload: Boolean;
begin
  ShowMessage('A new update is available!');
  savedialog1.Title := 'Save Update';
  savedialog1.Filter := 'Exe Files (*.exe)|*.exe';
  savedialog1.Execute;
  if savedialog1.filename = '' then
    Application.Terminate
  else begin
   with TDownloadURL.Create(self) do
   try
     URL:='linktofile';
     FileName := savedialog1.FileName + '.exe';
     OnDownloadProgress := TForm5.URL_OnDownloadProgress;

     ExecuteTarget(nil) ;
   finally
     Free;
   end;
  end;
end;

end. 
```

编译后出现以下错误：

```
[DCC Error] unitUpdate.pas(50): E2010 Incompatible types: 'TDownloadProgressEvent' and 'Procedure' 
```

它指的是这行代码：

```
OnDownloadProgress := TForm5.URL_OnDownloadProgress; 
```

我无法修复此错误。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T17:40:06.137

`TForm5.URL_OnDownloadProgress`不是一个有效的句子，你必须使用表单的实例（不是 tyoe），所以试着写这样的东西

```
 OnDownloadProgress := Self.URL_OnDownloadProgress; 
```

或者

```
 OnDownloadProgress := URL_OnDownloadProgress; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T17:39:51.623

删除 TForm5：

```
OnDownloadProgress := URL_OnDownloadProgress 
```

# php - 缓存 php 生成的图像，直到它改变

> ID：11400184
> 
> 赞同：2
> 
> 时间：2012-07-09T17:36:45.590
> 
> 标签：php, caching, cache-control

对于我缺乏这方面的知识，我提前道歉；我查看了很多其他帖子，但无法让他们的任何解决方案为我工作。

无论如何，我正在使用动态*displayimage.php*文件在我正在开发的网站上显示用户的个人资料图片。该页面采用 id 参数，并从 mysql 数据库中提取图像文件名。这是（缩写）代码：

```
$id = mysql_real_escape_string($_GET[id]);

$table = "images_user";
$idname = "userid";
$uploaddir = "/home/username/uploads/images/user/"; //outside web root

$select = mysql_query("SELECT * FROM $table WHERE $idname = '$id' LIMIT 1");

if(mysql_num_rows($select) > 0) {
  $file = mysql_fetch_assoc($select);

  header("Content-Type: $file[mimetype]");
  readfile($uploaddir.$file[name]);
} 
```

目前，因为它是从 php 文件生成的，所以图像没有被缓存，这确实降低了网站的速度。所以我添加了这个：

```
header("Cache-Control: private, max-age=10800, pre-check=10800");
header("Pragma: private");
header("Expires: " . date(DATE_RFC822,strtotime(" 2 day"))); 
```

这解决了问题，太好了！现在图像被缓存，并且加载速度非常快。

但是，用户可以更改他们的个人资料图片。发生这种情况时，我保存他们上传的图片，删除旧图片，并更新数据库条目以指向新图片。但是现在，由于旧图片仍在缓存中，除非他们手动 F5 页面，否则他们看不到更新。

如何让它缓存图片，但在图片更改后强制“重新缓存”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T17:41:04.683

在他们更新图片后，在您访问的 url 添加一个额外的参数来显示图片，这里是 `displayimage.php'。最常见的是时间戳。

像在正常情况下一样，您将访问`displayimage.php?id=123123`

更新个人资料图片后，要刷新图像，您需要访问 `displayimage.php?id=123123&time=1000121110`. 每次用户更新图像时，更改时间参数将强制从页面重新加载图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:42:51.707

目前，您的脚本网址如下所示：

```
displayimage.php?id=X 
```

您需要做的是为每个用户添加一个版本号，每次用户更新他的个人资料图片时，该版本号都会增加：

```
displayimage.php?id=X&v=Y 
```

版本号也可以存储在数据库中。

版本号也可以是上传的图像文件的最后修改时间，避免使用另一个表字段和递增代码：

```
displayimage.php?id=X&v=TIME 
```

# c++ - 赋值运算符重载 -- 错误 C2440: '==' : 无法从 'A 转换 *' 到 'A *常量'

> ID：11400185
> 
> 赞同：-2
> 
> 时间：2012-07-09T17:36:50.017
> 
> 标签：c++, templates, pointers

以下代码尝试显示如何重载赋值运算符：

```
#include <iostream>
using namespace std;

template <typename T>
class A
{
public:
    A()   {};
    A( T &obj) {value = obj;};
    ~A() {};
    T value;

    template <typename E>
    A<T>& operator = ( A<E> &obj)
    {

        if(this == &obj)
            return *this;

        value = obj.value;
        return *this;
    }

};

int main()
{
    int temp;
    temp = 3;
    A<int> myobjects(temp);
    cout<<myobjects.value<<endl;

     float f_value;
     f_value = 10.7;
     A<float> fobjects(f_value);
     myobjects = fobjects;
     cout<<myobjects.value<<endl;

    return 0;
} 
```

但是，当我用VC10编译它时，我发现了以下错误：

```
 error C2440: '==' : cannot convert from 'A<T> *' to 'A<T> *const ' 
```

如果我通过以下方式更改重载函数：

```
 template <typename E>
    A<T>& operator = ( A<E> &obj)
    {

     // if(this == &obj)
        //  return *this;

        value = obj.value;
        return *this;
    } 
```

它会起作用的。为什么这样调用时注释掉的代码会出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:49:10.197

您缺少部分错误消息。它应该说：

```
error C2440: '==' : cannot convert from 'A<T> *' [with T = float] to 'A<T> *const' [with T = int] 
```

您可能需要查看构建日志中附近的行才能看到额外的信息。并且编译器通过使用`T`两次但代表两种不同的类型没有任何好处。

# jquery - 使用 jQuery 选择控件 - 使用隐藏字段的值

> ID：11400195
> 
> 赞同：0
> 
> 时间：2012-07-09T17:37:10.037
> 
> 标签：jquery, asp.net

我有一个隐藏字段，其中包含以下标记：

```
<input type="hidden" name="ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl1$ctl01$ctl00$DescriptionOfLink$QuestionDivInfo" id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl1_ctl00_3_DescriptionOfLink_3_QuestionDivInfo_3" value="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl1_ctl00_3_questionMark_3" /> 
```

我的隐藏字段的值与我拥有的跨度的 ID 相同：

```
<span id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl1_ctl00_3_questionMark_3" class="questionMarkLayout">(?)</span> 
```

在呈现代码之前，我不知道我的 span 的 ID，但我可以访问隐藏字段的值。

使用 jQuery，我想：

*   抓住控件，带有我的隐藏字段值的ID

到目前为止，我已经尝试过：

```
<script type="text/javascript">
    $(document).ready(function () {
        alert('<%#QuestionDivInfo.ClientID %>');
        $('<%#QuestionDivInfo.ClientID %>').val().mouseover(function (e) {
            $('<%#HintDiv.ClientID %>').show();
        });

        $('<%#QuestionDivInfo.ClientID %>').val().mouseleave(function (e) {
            $('<%#HintDiv.ClientID %>').hide();
        });
    });
</script> 
```

但它不起作用。

有什么提示吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:42:39.253

使用此代码：

```
$(document).ready(function () {
        alert('<%#QuestionDivInfo.ClientID %>');
        var span=$("#"+$('<%#QuestionDivInfo.ClientID %>').val());
        $(span).mouseover(function (e) {
            $('<%#HintDiv.ClientID %>').show();
        });

        $(span).mouseleave(function (e) {
            $('<%#HintDiv.ClientID %>').hide();
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:40:29.160

事件应该绑定到控件而不是控件的值，

```
$('<%#QuestionDivInfo.ClientID %>').val().mouseover(......... 
```

应该

```
$('#'+$('#<%QuestionDivInfo.ClientID %>').val()).mouseover(......... 
```

你的代码是

```
 $(document).ready(function () {
        alert('<% QuestionDivInfo.ClientID %>');
        $('#'+ $('#<%QuestionDivInfo.ClientID %>').val()).mouseover(function (e) {
            $('#<%HintDiv.ClientID %>').show();
        });

        $('#'+$('<%#QuestionDivInfo.ClientID %>').val()).mouseleave(function (e) {
            $('#<%HintDiv.ClientID %>').hide();
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:10:34.950

```
 <script type="text/javascript">

        $(document).ready(function () {

            var hiddenFieldValue = $('input[id$=QuestionDivInfo_3]').attr('value');
            alert(hiddenFieldValue);
            var spanValue = $('span[id$=' + hiddenFieldValue + ']').html();
            alert(spanValue);
        });

    </script> 
```

试试这个....它对我有用

# java - 为什么 Eclipse 找不到 JavaDoc？

> ID：11400198
> 
> 赞同：2
> 
> 时间：2012-07-09T17:37:13.030
> 
> 标签：java, eclipse, javadoc

我已经安装了 Java3D API 和文档。这是我从中获取文档的地方：

[http://www.oracle.com/technetwork/java/javase/tech/index-jsp-138252.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-138252.html)

现在，我按照以下说明安装 JavaDoc for Eclipse：

[Eclipse Android 项目中的 JavaDoc](https://stackoverflow.com/questions/2268183/javadoc-in-an-eclipse-android-project/5134343#5134343)

我将 jar 的文档路径设置为我计算机上文档的位置。当我在 Eclipse 中单击对象名称时，弹出窗口会弹出，但它显示“注意：此元素既没有附加源代码也没有附加 Javadoc，因此找不到 Javadoc。” 我在这里有什么遗漏吗？如果信息可以只显示在弹出窗口中而不是我手动浏览文档，那将会方便得多。

* * *

编辑

这是我的日食现在的样子：

![在此处输入图像描述](../Images/46eec74d4a35f33c5499b2bacfe2f7b7.png)

这是我设置的路径：

[http://download.java.net/media/java3d/javadoc/1.5.2-latest/](http://download.java.net/media/java3d/javadoc/1.5.2-latest/)

仍然没有运气，我仍然得到相同的弹出窗口，说它找不到 javadoc。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:02:48.547

通常这应该可以解决问题，但我只是尝试改写您之前遵循的说明，也许您错过了一个步骤：

1.  右键单击您的项目-> 属性
2.  `Java build path`在左侧的树中选择
3.  选择`Libraries`选项卡
4.  **[跳过如果使用 maven]**将您的库添加到类路径
5.  **[仅当使用 maven 时]**通过单击它前面的小箭头来展开 maven 库
6.  通过单击前面的小箭头展开 3d jar 选项
7.  单击`Edit`按钮并选择您的 zip 位置`Archive path`
8.  如果您打开 zip，您会看到所有文档都在文件夹中`java3d-1_4_0-doc`。您应该将其添加到`Path within archive`输入框中
9.  点击确定，确定，确定……

这应该设置你。您还可以将存档提取到所需文件夹或使用在线 URL（[bitwave 建议](http://download.java.net/media/java3d/javadoc/1.5.2-latest/)的那个，但请注意，您需要持续的互联网连接才能访问它）并在`Javadoc URL`输入框中指定您想要的任何内容。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:49:11.107

这不是你的问题；）

该文档是 HTML 文件的集合。（[像这样](http://download.java.net/media/java3d/javadoc/1.5.2-latest/)）

您必须解压缩 zip，然后您可以在 Internet Explorer 或 Google Chrome 等浏览器中通过 File->Open File... 查看它。

要使用 Java-Doc，Oracle 必须提供一个特殊的 JAR 文件。在这个 JAR 文件中有 .java 文件

```
/**
 * This is JavaDoc 
 */

/*
 *This is a typical comment...
 */ 
```

Oracle 还没有提供这个 JAR，所以你只能使用浏览器...

希望我能帮到你...

# c# - HTMLAgilityPack XPath 表达式未获取所有节点

> ID：11400201
> 
> 赞同：2
> 
> 时间：2012-07-09T17:37:23.770
> 
> 标签：c#, html-agility-pack

**范围** 我试图解析[这个页面](https://uspdigital.usp.br/jupiterweb/listarGradeCurricular?codcg=12&codcur=12012&codhab=1&tipo=N)。对于不熟悉葡萄牙语的人，此页面包含某个课程（大学课程）的所有科目，按“学期”分组。

所以，每次你看到像“7º Período Ideal”这样的东西，你都可以理解为“第7学期的科目”。

**问题**我正在使用 XPath 表达式从包含这些表行的表中获取所有表行。

```
XPath Used : //table[@cellspacing=2]//tr

C# Statement : htmlMap.DocumentNode.SelectNodes("//table[@cellspacing=2]//tr"); 
```

此 C# 语句接收到的 HtmlNodeCollection 仅包含表行节点，直到带有此 text 的节点，紧随带有 的节点`EAD0648 Gerência de Produtos / Serviços e Mercados`之后`5º Período Ideal`。

这个 XPath “有效”，但我得到了所有`tr's`（如预期的那样），这不是我想要的。

```
//tr 
```

为什么 XPath 也不检索此节点之后的所有节点？

检索到的节点数量是否有上限？我错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:53:52.710

我过去遇到过这种情况，如果表格格式不正确，则会出现此类问题。我非常快速地查看了页面的 HTML，我看到了一个可能的问题，在第 2785 行有一个`</tr>`然后没有开始`<tr>`行 2796 有另一个`</tr>`.

我承认我没有进行深入的验证来检查，但仅仅通过查看它我无法匹配开头的`<tr>`. 我立即检查了这一点，因为正如我所提到的，我在使用格式错误的表格的页面时遇到了这个确切的问题。

# sql-server - 在表传输期间指定一个值并转换列？

> ID：11400212
> 
> 赞同：1
> 
> 时间：2012-07-09T17:37:50.750
> 
> 标签：sql-server, data-transfer

我目前正在将数据从一个数据库传输到另一个数据库。

我的问题出现在一张新设计的桌子上。旧表由以下列组成：

```
car1, car2, car3, id1, id2, id3, id4, idtxt, idtxt2  
(id types could be the same for multiple rows) 
```

这些行将具有特定的组合`car1, 2, 3`，每个组合具有特定的 id。`id1`总是填充，而 2,3,4,txt 和 txt2 可能会或可能不会被填充。

我的新专栏包括：

```
car1, car2, car3, idtype, id#,text 
```

在这个新表中`idtype`是 = 到 id1、id2、id3、id4、id5(idtxt) 和 id6(idtxt2) 而 id# 是 = 到表一中 id 的行值。这意味着会有比旧表中更多的行，因为每个 id# 都会有一行，即使它们是相同的组合。

您将如何通过存储过程传输此信息？

我目前只能考虑运行多个由 insert into 语句组成的存储过程，但除了传输数据之外，我似乎无法找到关于如何插入某个值的任何答案。即（idtype = id1 用于所有此传输）

我也相信这不是最有效的方法。

请告诉我是否需要澄清。谢谢！

编辑，我已经弄清楚如何在数据传输期间插入特定值。其他问题/建议仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:49:23.083

如果我正确理解您在做什么，您可以通过一个简单的查询来完成。

听起来您正在尝试规范化数据，方法是获取在第一个表中旋转的字段并在第二个表中取消旋转它们。

```
select car1, car2, car3, 'id1' as idtype, id1
from t union all
select car1, car2, car3, 'id2', id2
from t union all
select car1, car2, car3, 'id3', id3
from t union all
select car1, car2, car3, 'id4', id4
from t union all
select car1, car2, car3, 'id5', idtxt
from t union all
select car1, car2, car3, 'id2', idtxt2
from t 
```

您可以通过创建目标表并插入，或使用“create table as”或“select into”（取决于您使用的数据库）将其保存到另一个表中。

例如，如果您正在创建表，您的代码将类似于：

```
create table <new table in new database> (
    <tablename>id int primary key identity(1,1),
    car1 <some type>,
    ...,
    CreatedBy varchar(256) default system_user,
    CreatedAt datetime default getdate(),
); 

insert into <new table in new database>(car1, car2, car3, idtype, id1)
    <select query above> 
```

注意：我为此使用了 SQL Server 语法，并添加了三个附加列：id、CreatedBy 和 CreatedAt。（几乎）所有表都应该有这些列。

# twitter-bootstrap - 如何在不使用 mixin 的情况下重用 sass 中的类？

> ID：11400219
> 
> 赞同：35
> 
> 时间：2012-07-09T17:38:45.763
> 
> 标签：twitter-bootstrap, sass, twitter-bootstrap-rails

我希望我的应用程序中的所有锚看起来都像 .btn（Twitter Bootstrap 类），有没有办法做到这一点？

我做了

```
a{
  @include btn;
} 
```

但它不起作用，因为 btn 应该是一个 mixin，它是一个 Twitter Bootstrap 类。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-11T01:18:28.870

您想使用`@extend .btn;`- @extend 允许您继承选择器的所有属性，而无需将其定义为 mixin。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-25T10:09:46.473

这正是你想要的 => [https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)

1.  安装宝石`bootstrap-sass`
2.  在`config.rb`=>`require 'bootstrap-sass'`
3.  `@import "bootstrap";`在你的 scss 文件的顶部。

使用写入

```
a {
  @extend .btn;
} 
```

# node.js - 使用 count() 或 findOne() 以获得更好的性能？

> ID：11400222
> 
> 赞同：3
> 
> 时间：2012-07-09T17:39:18.570
> 
> 标签：node.js, mongodb

我正在使用 NodeJs 和本机 MongoDB 驱动程序来创建应用程序。我想确保是否存在具有特定条件的记录，并且我想知道哪种方法更好？

```
collection.find({...}).count(function(err, count){
    if(count > 0) {
       //blah blah
    }
}) 
```

或者

```
collection.findOne({...}, function(err, object){
    //blah blah
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:28:05.983

看到[这个问题](https://dba.stackexchange.com/questions/7573/difference-between-mongodbs-find-and-findone-calls)。我相信`find`在`limit(1)`你的情况下是可行的。（如果您想通过查询获取实际文档数据，请使用`findOne`）。

就 而言`mongodb-native`，代码看起来像这样

```
function recordExists(selector, callback) {
  collection.find(selector, {limit: 1}, function(err, cursor) {
    if (err) return callback(err);
    cursor.count(function(err, cnt) {
      return callback(err, !!cnt);
    });
  });
} 
```

* * *

我对此有点困惑：`collection.find({...}).count`。本机驱动程序允许这样做吗？是`cursor.count`吗？不管怎样，`limit`你的朋友在吗？

# php - 在 preg_replace 中加载数组

> ID：11400223
> 
> 赞同：0
> 
> 时间：2012-07-09T17:39:25.373
> 
> 标签：php

我正在尝试加载我的类数组，`preg_replace`但我无法让它循环遍历数组。我的第一个想法是，因为我的代码中有一个中断，它阻止了类循环，但是如果我的循环中没有中断，那么整个代码将一遍又一遍地循环，而不仅仅是类字符串循环。

这就是我的代码，有什么建议吗？

```
include('simple_html_dom.php'); 
$classes = array('red', 'blue', 'yellow', 'green', 'black');
$i=0;
$html = file_get_html('http://finance.yahoo.com/q/hp?s=^DJI&a=05&b=4&c=2012&d=06&e=6&f=2012&g=d'); 
$symbol_gainers = '';
foreach ($html->find('.yfnc_datamodoutline1 td') as $element){
    $symbol_gainers .= $element->outertext;
    $sym_gainers = preg_replace('~(class="yfnc_tabledata1")~', 'class="'.$classes[$i++].'"', $symbol_gainers);
    print_r($sym_gainers);
    break;
} 
```

编辑：[您可以在这里查看带有功能的代码](http://www.coderun.com/ide/?w=4DW972Uwjk6LvK_vX4ZqCQ)。使用 Firebug 检查`td`HTML 输出，您会看到它只是一遍又一遍地重复红色红色红色。

# eclipse - Apache Derby Eclipse 插件去哪儿了？

> ID：11400225
> 
> 赞同：6
> 
> 时间：2012-07-09T17:39:39.213
> 
> 标签：eclipse, eclipse-plugin, derby, eclipse-juno

*编辑*：根据[Derby 社区](https://issues.apache.org/jira/browse/DERBY-5272)的说法，Eclipse 插件不会随 Derby 项目自动维护或构建。

但是还有人在用这个插件吗？因为如果是这样，他/她是否有发布实际构建的地方-（希望）可以在 Eclipse Juno 下运行？

或者，如果这是一个真正的死胡同，还有哪些选择？

* * *

*原来的问题*

**使用**

*   jdk1.7.0_03
*   Eclipse IDE for Java EE Developers (Win32) 版本 Juno（从 2012/06/14 构建）
*   derby-core-plugin 10.8.2 和 -ui-plugin 1.1.3（因为最新版本 10.9.1.0 没有 eclipse 插件）

**问题**
尝试添加新的 derby 特性时（右键单击 java 项目 -> “Apache Derby” -> “添加 Apache Derby 特性”）我只收到以下消息：

```
Apache Derby Ui Plug-in
Error adding Derby jars to the project:
org.eclipse.ui.internal.WorkbenchWindow cannot be cast to
org.eclipse.jface.window.ApplicationWindow 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T00:41:18.657

Apache Derby db-derby-10.9.1.0-src / Eclipse 4.2.1 (Juno) / Java 7

某种修复。需要更多的研究，但这会奏效。

参考资料：
db-derby-10.9.1.0-src/BUILDING.html
db-derby-10.8.1.2-src/plugins/eclipse/Readme.txt

下载 Apache Derby 源 zip。
提取拉链。
切换到源目录。
db-derby-10.9.1.0-src

执行以下 ant 目标。
ant -quiet clobber
ant -quiet buildsource
ant -quiet buildjars

构建核心插件。
蚂蚁插件

您现在应该在 db-derby-10.9.1.0-src/jars/sane 目录中有一个 derby_core_plugin_10.9.1.zip 文件。

注意：您的 Eclipse IDE 不应运行。提取上面 ant 插件任务创建的 derby 核心插件，并将内容复制到您的 Eclipse 插件目录。

运行 Eclipse。

从源代码树中导入 org.apache.derby.ui。
（导入 > 常规 > 现有项目到工作区）

打开 plugin.xml 文件

在 Overview 选项卡上，将版本号提高到 1.1.4。

保存文件。

错误在...
1.)package org.apache.derby.ui.popup.actions.AddDerbyNature.java
2.)package org.apache.derby.ui.popup.actions.RemoveDerbyNature.java

在这两个单元中调用 .setStatus 方法的位置。

* * *

注意：（来自 ApplicationWindow 的 javadoc ）

> 无效 org.eclipse.jface.window.ApplicationWindow.setStatus（字符串消息）
> 
> 设置或清除此窗口状态行中显示的消息（如果它有 >one）。如果窗口没有状态行，则此方法无效。
> 
> 参数：
> message 状态信息，或 null 清除它

因此，假设 IDE 没有状态行，因此根据 Java 文档，此调用无效。

```
Commenting out these method calls from:  
AddDerbyNature.java  
//((ApplicationWindow) window).setStatus(Messages.ADDING_NATURE);  
//((ApplicationWindow) window).setStatus(Messages.DERBY_NATURE_ADDED);  

RemoveDerbyNature.java  
//((ApplicationWindow)window).setStatus(Messages.REMOVING_NATURE);  
//((ApplicationWindow)window).setStatus(Messages.DERBY_NATURE_REMOVED); 
```

测试：
作为 Eclipse 应用程序运行。

创建一个项目。也许称它为“org.apache.derby.ui.test”。

右键单击项目/选择添加 Apache Derby 自然
没有错误。

右键单击项目/选择删除 Apache Derby 自然
没有错误。

再次添加性质以测试其他菜单项。
右键单击项目/选择添加 Apache Derby 性质

右键单击项目/选择启动 Derby Network Server
没有错误，服务器已启动。

从控制台日志... Sun Jan 27 17:51:29 EST 2013：使用基本服务器安全策略安装的安全管理器。2013 年 1 月 27 日星期日 17:51:29 EST：Apache Derby 网络服务器 - 10.9.1.0 - （未版本化目录）已启动并准备好接受端口 1527 上的连接

注意：不确定 Unversioned 目录消息的含义

右键单击项目/选择 Stop Derby Network Server
没有错误，服务器已停止。
2013 年 1 月 27 日星期日 17:53:32 EST：Apache Derby 网络服务器 - 10.9.1.0 -（未版本化目录）关闭

启动服务器备份...<br> 右键单击​​项目/选择启动 Derby Network Server

创建一个 sql 文件夹。
创建一个 test.sql 文件

我的测试 sql 文件。

```
connect 'jdbc:derby://localhost:1527/TESTDB;create=true;user=test;password=test;';  
-- drop User Indexes - ignore error if first time creating   
drop index UserNameIdx1;  
-- drop the table if it exists - ignore error if first time creating  
drop table TEST_USER;  
-- create the table  
create table TEST_USER (  
    ID integer generated by default as identity,  
    USER_NAME varchar(255) not null,  
    FIRST_NAME varchar(255),  
    LAST_NAME varchar(255),  
    PASSWORD varchar(255),  
    ENABLED integer,  
    CREATED_STAMP timestamp,  
    CREATED_TX_STAMP timestamp,  
    LAST_UPDATED_STAMP timestamp,  
    LAST_UPDATED_TX_STAMP timestamp,  
    constraint TEST_USER_PK primary key (ID)  
);  
-- insert some data -- oops --- will mess with the ID generator, see the alter table restart line below.  
insert into TEST_USER values(0, 'admin','admin','admin','admin',1,'2013-01-18 12:00:00.000','2013-01-18 12:00:00.000','2013-01-18 12:00:00.000','2013-01-18 12:00:00.000');  
-- make the USER_NAME unique  
create unique index UserNameIdx1 on TEST_USER(USER_NAME);  
-- reset the generator  
alter table TEST_USER alter column ID restart with 1; 
```

右键单击文件 > Apache Derby > 使用“ij”运行 SQL 脚本

刷新项目工作区，现在应该有一个 TESTDB 文件夹。

数据库已创建。好的。

创建一个拉链。

右键单击项目>导出

单击插件开发 > 可部署插件和片段。
目标选项卡
存档文件
/derby_ui_plugin_1.1.4-fix.zip
选项选项卡
取消选择将包插件作为单独的 JAR 存档

点击完成。

关闭/退出测试实例。
退出 Eclipse。

从上面提取您刚刚创建的 zip。

将其内容复制到插件目录到您的 Eclipse (Juno) 插件目录。

重新启动 Eclipse。创建一个新项目。

您应该能够将 Apache Derby (10.9.1) 特性安装到您的项目中。

注意：如果您使用 Java 7 构建它，不要期望它适用于任何较小的 JVM 版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T03:45:29.307

我相信，Eclipse 的 Derby UI 插件已经好几年没有维护了，因为没有一个常规的 Derby 提交者使用该插件，并且社区中也没有任何志愿者来维护它。所以我认为它只适用于旧版本的 Eclipse。

我怀疑更新它以使其与当前的 Eclipse 一起工作并不是很多工作。如果您对该功能感兴趣，我相信 Derby 社区很乐意收到您的来信！

另请参阅：[既然他们停止为 Eclipse 开发 derby 插件，是否可以在 Eclipse 中使用来自 apache 的 derby？](https://stackoverflow.com/questions/12645223/is-it-possible-to-use-derby-from-apache-in-eclipse-now-that-they-stopped-develop?rq=1)

# javascript - 在谷歌浏览器扩展中维护数据

> ID：11400231
> 
> 赞同：0
> 
> 时间：2012-07-09T17:40:08.570
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

**例子**

1.  我点击我的扩展

2.  打开我的扩展的 html 页面 (popup.html)

    ![在此处输入图像描述](../Images/d505beb73027b8391fafdcbb71f0badc.png)

3.  我添加了一个包含文本的元素，即提示的文本

    ![在此处输入图像描述](../Images/98bbbd022baebc33a3f3a692276f7168.png)

4.  “放弃”扩展

5.  控制列表框且新插入的第一个元素不在列表框中

    ![在此处输入图像描述](../Images/d505beb73027b8391fafdcbb71f0badc.png)

有我的

[popup.html](http://pastebin.com/X65V9n5w)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:26:41.950

想象一下，您打开了一个文本文件，在其中写了一些文本但没有保存？你认为会发生什么？

您需要将内容的状态保存在某处，这可以使用 localStorage 来完成。

这是一篇解释所有相关内容的文章：

[http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:37:13.600

比 HTML5 localStorage 更好，考虑利用[chrome.storage API](http://code.google.com/chrome/extensions/storage.html)

# php - Facebook PHP SDK：$facebook->getUser() 有时返回 0

> ID：11400235
> 
> 赞同：3
> 
> 时间：2012-07-09T17:40:18.050
> 
> 标签：php, javascript, facebook, facebook-graph-api, facebook-authentication

这对我来说是一个非常令人沮丧的问题，因为我无法重现问题并且我没有什么可以测试的。出于某种原因，我的 Facebook 应用程序的随机用户将其 UID 返回为 0。据我所知，这似乎不是特定的浏览器问题。

这是我的应用程序的工作方式。我有一个主页，用户可以单击并立即输入链接。此按钮触发`oauth();`JS 功能并应弹出打开 OAuth 登录窗口。请参阅下面的我的 JS 代码..

```
window.fbAsyncInit = function() {
FB.init({
  appId      : 'xxxxxxxxxxxxx', // App ID
  channelUrl : '//channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

FB.Canvas.scrollTo(0,0); //makes window scroll to top when loading page within iframe
FB.Canvas.setAutoGrow(); //resize the height of the iframe automatically
};

// Load the SDK Asynchronously
(function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
}(document));

function oauth() {   
   FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');

     FB.api('/me', function(response) {
       console.log('Good to see you, ' + response.name + '.');
       //window.location.reload();
       //alert("bing bong bing");
       $.fancybox.open("#entry-form", {
           width: 645,
           minHeight: 920,
           padding: 0,
           scrolling: 'no',
           wrapCSS: 'enternow-form',
           type: 'iframe',
           href: 'upload',
           helpers : {
               overlay : {
                   opacity: 0.95,
                   css : {
                   'background-color' : '#fff'
                    }
    }
}              
       });
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 });
}//end oauth function 
```

如果 oauth 登录成功，我会弹出一个 FancyBox iframe，其中包含一个表单。这是 iframe 页面上用于获取 UID 的 Facebook PHP 代码...

```
<?php header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); ?>
<?php session_start(); ?>
<?php require_once("../src/facebook.php"); ?>
<?php
$config = array();
$config["appId"] = 'xxxxxxxxxxxxxx';
$config["secret"] = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$config["fileUpload"] = false; // optional

$facebook = new Facebook($config);

// get signed request to help determine if user is an admin
$signedRequest = $facebook->getSignedRequest();

// Get User ID
$user = $facebook->getUser();

// We may or may not have this data based on whether the user is logged in.
//
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
 try {
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
 } catch (FacebookApiException $e) {
error_log($e);
$user = null;
 }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
$logoutUrl = $facebook->getLogoutUrl();
} else {
$loginUrl = $facebook->getLoginUrl();
}
?>

<?php echo $user //this is the user's ID ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:14:00.060

很可能，您在某些情况下没有成功验证用户身份。在某些情况下，用户将使用 PHP SDK 完成初始身份验证过程，但无法接收访问令牌。在这种情况下，`FacebookApiException`被抛出。

```
if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
} 
```

**参考：** [如何使用 Facebook PHP SDK 3.0 正确处理会话和访问令牌？](https://stackoverflow.com/questions/6468103/how-to-properly-handle-session-and-access-token-with-facebook-php-sdk-3-0)

# json - 从动态 json 数据更新力有向图上的链接

> ID：11400241
> 
> 赞同：37
> 
> 时间：2012-07-09T17:40:39.007
> 
> 标签：json, d3.js, force-layout

我是 D3 的新手，正在研究 json 数据是动态的力导向图。我可以在收到新数据后更改力图，但这会产生弹跳效应。创建我的力图的代码是：

```
<div class="graph"></div>
<script>
var w = 660,
    h = 700,
    r = 10;
var vis = d3.select(".graph")
    .append("svg:svg")
    .attr("width", w)
    .attr("height", h)
    .attr("pointer-events", "all")
    .append('svg:g')
    .call(d3.behavior.zoom().on("zoom", redraw))
    .append('svg:g');
vis.append('svg:rect')
    .attr('width', w)
    .attr('height', h)
    .attr('fill', 'rgba(1,1,1,0)');
function redraw() {
    console.log("here", d3.event.translate, d3.event.scale);
    vis.attr("transform", "translate(" + d3.event.translate + ")" +
                          " scale(" + d3.event.scale + ")");
};  

var force = d3.layout.force()
    .gravity(.05)
    .charge(-200)
    .linkDistance( 260 )
    .size([w, h]);

var svg = d3.select(".text")
    .append("svg")
    .attr("width", w)
    .attr("height", h);

d3.json(graph, function(json) {

    var nodeList = json.nodes;
    var link = vis.selectAll("line")
        .data(json.links)
       .enter()
        .append("line")
        .attr("stroke-opacity", function(d) {
            if(d.label == 'is a') {
                return '0.8';
            } else {
                return '0.2';
            };
        })
        .attr("stroke-width", function(d) {
            if(d.value !== null) {
                return d.value;
            } else {
                return 2;
            };
        })
        .style("stroke", function(d) {
            if(d.color !== null) {
                return d.color;
            };
        })
        .on("mouseover", function() {
            d3.select(this)
                .style("stroke", "#999999")
                .attr("stroke-opacity", "1.0");
        })
        .on("mouseout", function() {
            d3.select(this)
                .style("stroke", function(d) {
                    if(d.color !== null) {
                        return d.color;
                    };
                })
                .attr("stroke-opacity", function(d) {
                    if(d.label == 'is a') {
                        return '0.8';
                    } else {
                        return '0.2';
                    };
                })
            });

    link.append("title")
        .text(function(d) { return d.label } );         

    var node = vis.selectAll("g.node")
        .data(json.nodes)
       .enter()
        .append("svg:g")
        .attr("class","node")
        .call(force.drag);

    node.append("svg:circle")
        .attr("r", function(d) {
            if (d.size > 0) {
                return 10+(d.size*2);
            } else {
                return 10;
            }
        })
        .attr("id", function(d) { return "Node;"+d.id; } )
        .style("fill", function(d) {
            if(d.style == 'filled') {
               return d.color;
            };
        })
        .style("stroke", function(d) {
            if(d.style !== 'filled') {
                return d.color;
            };
        })
        .style("stroke-width", "2")
        .on("mouseover", function() {
            d3.select(this).style("fill", "#999");
            fade(.1);
        })
        .on("mouseout", function(d) {
            if (d.style == 'filled') {
                d3.select(this).style("fill",d.color);fade(1);
            } else {
                d3.select(this).style("stroke",d.color);
                d3.select(this).style("fill","black");
            }
            fade(1);
        });

    node.append("title")
        .text(function(d) { return d.Location; } );         

    force.nodes(json.nodes)
        .links(json.links)
        .on("tick", tick)
        .alpha(1)
        .start();

    function tick() {
    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; })
        .attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")";
    });

    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });
    }

});
</script> 
```

当通过再次调用整个函数接收到新的 json 字符串时，我可以创建一个新图形。这将创建一个新图形来代替旧图形。收到值时，我无法使用新值集更新旧图；我图中的节点没有改变，只是它们之间的关系发生了变化。

我确实偶然发现了一个示例（[http://bl.ocks.org/1095795](http://bl.ocks.org/1095795)），其中删除并重新创建了一个新节点，但实现有点不同。

任何指示或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-05T09:13:36.067

好吧，我可以通过浏览找到解决方案，将其发布在此处以供在此主题上需要帮助的任何人使用。这个想法是创建图形的对象并使用节点和链接数组。JS代码如下：

```
var graph;
function myGraph(el) {

// Add and remove elements on the graph object
this.addNode = function (id) {
    nodes.push({"id":id});
    update();
};

this.removeNode = function (id) {
    var i = 0;
    var n = findNode(id);
    while (i < links.length) {
        if ((links[i]['source'] == n)||(links[i]['target'] == n))
        {
            links.splice(i,1);
        }
        else i++;
    }
    nodes.splice(findNodeIndex(id),1);
    update();
};

this.removeLink = function (source,target){
    for(var i=0;i<links.length;i++)
    {
        if(links[i].source.id == source && links[i].target.id == target)
        {
            links.splice(i,1);
            break;
        }
    }
    update();
};

this.removeallLinks = function(){
    links.splice(0,links.length);
    update();
};

this.removeAllNodes = function(){
    nodes.splice(0,links.length);
    update();
};

this.addLink = function (source, target, value) {
    links.push({"source":findNode(source),"target":findNode(target),"value":value});
    update();
};

var findNode = function(id) {
    for (var i in nodes) {
        if (nodes[i]["id"] === id) return nodes[i];};
};

var findNodeIndex = function(id) {
    for (var i=0;i<nodes.length;i++) {
        if (nodes[i].id==id){
            return i;
        }
        };
};

// set up the D3 visualisation in the specified element
var w = 500,
    h = 500;
var vis = d3.select("#svgdiv")
    .append("svg:svg")
    .attr("width", w)
    .attr("height", h)
    .attr("id","svg")
    .attr("pointer-events", "all")
    .attr("viewBox","0 0 "+w+" "+h)
    .attr("perserveAspectRatio","xMinYMid")
    .append('svg:g');

var force = d3.layout.force();

var nodes = force.nodes(),
    links = force.links();

var update = function () {
      var link = vis.selectAll("line")
        .data(links, function(d) {
            return d.source.id + "-" + d.target.id; 
            });

    link.enter().append("line")
        .attr("id",function(d){return d.source.id + "-" + d.target.id;})
        .attr("class","link");
    link.append("title")
    .text(function(d){
        return d.value;
    });
    link.exit().remove();

    var node = vis.selectAll("g.node")
        .data(nodes, function(d) { 
            return d.id;});

    var nodeEnter = node.enter().append("g")
        .attr("class", "node")
        .call(force.drag);

    nodeEnter.append("svg:circle")
    .attr("r", 16)
    .attr("id",function(d) { return "Node;"+d.id;})
    .attr("class","nodeStrokeClass");

    nodeEnter.append("svg:text")
    .attr("class","textClass")
    .text( function(d){return d.id;}) ;

    node.exit().remove();
    force.on("tick", function() {

        node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y         + ")"; });

        link.attr("x1", function(d) { return d.source.x; })
          .attr("y1", function(d) { return d.source.y; })
          .attr("x2", function(d) { return d.target.x; })
          .attr("y2", function(d) { return d.target.y; });
    });

    // Restart the force layout.
    force
    .gravity(.05)
    .distance(50)
    .linkDistance( 50 )
    .size([w, h])
    .start();
};

// Make it all go
update();
}

function drawGraph()
{
graph = new myGraph("#svgdiv");
graph.addNode('A');
graph.addNode('B');
graph.addNode('C');
graph.addLink('A','B','10');
graph.addLink('A','C','8');
graph.addLink('B','C','15');
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-15T11:44:49.553

如果有人对功能齐全的示例感兴趣，我以 Rahuls 为例进行了一些更改，并随着时间的推移发布了一个完整的动画块。添加/删除链接/节点确实应该比这更容易，但仍然很酷。

[http://bl.ocks.org/ericcoopey/6c602d7cb14b25c179a4](http://bl.ocks.org/ericcoopey/6c602d7cb14b25c179a4)

![在此处输入图像描述](../Images/6b456b3da47221334fa0c337a3dacbe1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T23:32:52.557

除了调用`drawGraph()`ready 函数之外，您还可以将发布的代码嵌入到内联`<script></script>`块中。

这就是 d3 站点上的大多数教程处理它的方式。

# algorithm - Programming Pearls，第 2 版中 set 的位向量实现

> ID：11400242
> 
> 赞同：13
> 
> 时间：2012-07-09T17:40:39.530
> 
> 标签：algorithm

## 在 Programming Pearls，第 2 版的第 140 页上，Jon 提出了使用位向量实现集合。

我们现在将转向利用我们的集合表示整数这一事实的两个最终结构。位向量是第 1 列的老朋友。以下是它们的私有数据和函数：

```
enum { BITSPERWORD = 32, SHIFT = 5, MASK = 0x1F };
int n, hi, *x;
void set(int i)  {        x[i>>SHIFT] |=  (1<<(i & MASK)); }
void clr(int i)  {        x[i>>SHIFT] &= ~(1<<(i & MASK)); }
int  test(int i) { return x[i>>SHIFT] &=  (1<<(i & MASK)); } 
```

正如我所收集的，如第 1 列所述，表示整数集的位向量的中心思想是，当且仅当整数 i 在集合中时，才打开第 i 位。

但是对于上面三个函数所涉及的算法，我实在是一头雾水。而且书上也没有解释。

我只能得到`i & MASK`是得到 i 的低 5 位，而`i>>SHIFT`将 i 向右移动 5 位。

有人会详细说明这些算法吗？位操作对我来说总是一个神话，:(

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-09T18:28:23.360

**位域和你**

我将使用一个简单的示例来解释基础知识。假设您有一个四位无符号整数：

```
[0][0][0][0] = 0 
```

您可以通过将其转换为基数 2 来表示 0 到 15 之间的任何数字。假设我们的右端是最小的：

```
[0][1][0][1] = 5 
```

所以第一位加 1，第二位加 2，第三位加 4，第四位加 8。例如，这里是 8：

```
[1][0][0][0] = 8 
```

**所以呢？** 假设您想在应用程序中表示二进制状态——如果启用了某个选项，是否应该绘制某个元素，等等。您可能不想对其中的每一个都使用一个完整的整数——它会使用一个 32 位整数来存储一位信息。或者，以四位继续我们的示例：

```
[0][0][0][1] = 1 = ON
[0][0][0][0] = 0 = OFF //what a huge waste of space! 
```

（当然，这个问题在现实生活中更为明显，因为 32 位整数看起来像这样：

```
[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0] = 0 
```

答案是使用位域。我们有一组属性（通常是相关的），我们将使用位操作打开和关闭这些属性。所以，比如说，你可能在一个硬件上有 4 个不同的灯，你想打开或关闭它们。

```
 3  2  1  0
[0][0][0][0] = 0 
```

（为什么我们从光 0 开始？我稍后会解释。）请注意，这是一个整数，并且存储为整数，但用于表示多个对象的多个状态。疯狂的！假设我们打开灯 2 和 1：

```
 3  2  1  0
[0][1][1][0] = 6 
```

您应该在这里注意的重要一点：灯 2 和 1 亮起应该等于 6 可能没有明显的原因，而且我们将如何使用这种信息存储方案做任何事情可能并不明显。如果添加更多位，它看起来并不明显：

```
 3  2  1  0
[1][1][1][0] = 0xE \\what? 
```

为什么我们关心这个？对于 0 到 15 之间的每个数字，我们是否只有一个状态？如果没有一些疯狂的 switch 语句系列，我们将如何管理它？啊...

**尽头的光**

因此，如果您之前使用过二进制算术，您可能会意识到左边的数字和右边的数字之间的关系当然是以 2 为底的。即：

1*(2 ³ ) + 1*(2 ² ) + 1*(2 ¹ ) +0 *(2 ⁰ ) = 0xE

所以每束光都存在于方程每一项的指数中。如果灯亮，则其术语旁边有一个 1 - 如果灯熄灭，则有一个 0。花点时间说服自己，在 0 到 15 之间恰好有一个整数对应于这个编号方案中的每个状态。

**位运算符**

现在我们已经完成了，让我们花点时间看看在这个设置中移位对整数有什么作用。

```
[0][0][0][1] = 1 
```

当您在整数中向左或向右移动位时，它实际上是向左和向右移动位。（注意：我 100% 否认这种对负数的解释！有龙！）

```
1<<2 = 4
[0][1][0][0] = 4
4>>1 = 2
[0][0][1][0] = 2 
```

当移动不止一位表示的数字时，您会遇到类似的行为。此外，让自己相信 x>>0 或 x<<0 只是 x 应该不难。不会在任何地方转移。

这可能向不熟悉 Shift 运算符的任何人解释了它们的命名方案。

**位运算**

这种以二进制表示的数字也可用于阐明按位运算符对整数的操作。第一个数字中的每个位与其同伴编号进行异或运算、与运算或或运算。花点时间浏览一下维基百科，熟悉一下这些布尔运算符的功能——我将解释它们如何在数字上起作用，但我不想详细地重复这个总体概念。

...

欢迎回来！让我们首先检查 OR (|) 运算符对存储在四位中的两个整数的影响。

```
 OR OPERATOR ON:
 [1][0][0][1] = 0x9
 [1][1][0][0] = 0xC
________________
 [1][1][0][1] = 0xD 
```

艰难的！这与布尔 OR 运算符的真值表非常相似。请注意，每一列都忽略了相邻的列，只是用第一位和第二位 OR'd 的结果填充结果列。**另**请注意，在该特定列中，任何或 1 的值都是 1。任何带零的或'd 都保持不变。

AND (&) 的表格很有趣，尽管有些倒置：

```
 AND OPERATOR ON:
 [1][0][0][1] = 0x9
 [1][1][0][0] = 0xC
________________
 [1][0][0][0] = 0x8 
```

在这种情况下，我们做同样的事情——我们对列中的每个位执行 AND 操作，并将结果放入该位。没有列关心任何其他列。

关于这一点的重要教训，我邀请您使用上图进行验证：任何与零相加的东西都是零。此外，同样重要的是 - 与 1 进行与运算的数字不会发生任何事情。他们保持不变。

最终表 XOR 具有我希望你们现在都可以预测的行为。

```
 XOR OPERATOR ON:
 [1][0][0][1] = 0x9
 [1][1][0][0] = 0xC
________________
 [0][1][0][1] = 0x5 
```

每个位都与其列 yadda yadda 等进行异或运算。但是仔细看第一排和第二排。哪些位改变了？（其中一半。）哪些位保持不变？（回答这个没有积分。）

当（且仅当）第二行中的位为 1 时，结果中的第一行中的位正在更改！

**一个灯泡的例子！**

所以现在我们有了一组有趣的工具，可以用来翻转单个位。让我们回到灯泡示例，只关注第一个灯泡。

```
 0
[?] \\We don't know if it's one or zero while coding 
```

我们知道我们有一个操作可以始终使该位等于一个 - OR 1 运算符。

```
0|1 = 1
1|1 = 1 
```

所以，忽略其余的灯泡，我们可以这样做

4_bit_lightbulb_integer |= 1;

并且确定我们除了将第一个灯泡设置为 ON 之外什么也没做。

```
 3  2  1  0
[0][0][0][?] = 0 or 1? \\4_bit_lightbulb_integer
[0][0][0][1] = 1
________________
[0][0][0][1] = 0x1 
```

同样，我们可以将数字与零相加。嗯 - 不完全为零 - 我们不想影响其他位的状态，所以我们将用 1 填充它们。

我将使用一元（一个参数）运算符进行位否定。~ (NOT) 位运算符翻转其参数中的所有位。〜（0X1）：

```
[0][0][0][1] = 0x1
________________
[1][1][1][0] = 0xE 
```

我们将把它与下面的 AND 位结合使用。

让我们做 4_bit_lightbulb_integer & 0xE

```
 3  2  1  0
[0][1][0][?] = 4 or 5? \\4_bit_lightbulb_integer
[1][1][1][0] = 0xE
________________
[0][1][0][0] = 0x4 
```

我们在右侧看到很多整数，它们没有任何直接相关性。如果您经常处理位字段，您应该习惯这一点。看左边。右边的位始终为零，其他位不变。我们可以关掉灯 0 并忽略其他一切！

最后，您可以使用 XOR 位选择性地翻转第一位！

```
 3  2  1  0
[0][1][0][?] = 4 or 5? \\4_bit_lightbulb_integer
[0][0][0][1] = 0x1
________________
[0][1][0][*] = 4 or 5? 
```

我们现在实际上不知道 * 的值是什么——只是从什么翻转过来的？曾是。

**结合位移和按位运算**

关于这两个操作的有趣事实是，当它们一起使用时，它们允许您操作选择性位。

```
[0][0][0][1] = 1 = 1<<0
[0][0][1][0] = 2 = 1<<1
[0][1][0][0] = 4 = 1<<2
[1][0][0][0] = 8 = 1<<3 
```

唔。有趣的。我将在这里提到否定运算符 (~)，因为它以类似的方式用于为位字段中的内容生成所需的位值。

```
[1][1][1][0] = 0xE = ~(1<<0)
[1][1][0][1] = 0xD = ~(1<<1)
[1][0][1][1] = 0xB = ~(1<<2)
[0][1][1][1] = 0X7 = ~(1<<3) 
```

您是否看到移位值与移位位的相应灯泡位置之间存在有趣的关系？

**规范的位移运算符**

正如上面提到的，我们有一个有趣的通用方法，可以使用上面的位移器打开和关闭特定的灯。

要打开灯泡，我们使用位移在正确位置生成 1，然后将其与当前灯泡位置进行或运算。假设我们要打开灯 3，而忽略其他所有内容。我们需要进行 OR 的位移操作

```
 3  2  1  0
[?][?][?][?]  \\all we know about these values at compile time is where they are! 
```

和 0x8

```
[1][0][0][0] = 0x8 
```

多亏了位移位，这很容易！我们将选择灯的编号并切换值：

```
1<<3 = 0x8 
```

接着：

```
4_bit_lightbulb_integer |= 0x8;

 3  2  1  0
[1][?][?][?]  \\the ? marks have not changed! 
```

我们可以保证第三个灯泡的位设置为 1，并且没有其他任何变化。

清除位的工作方式类似——我们将使用上面的否定位表来清除灯 2。

```
~(1<<2) = 0xB = [1][0][1][1] 
```

4_bit_lightbulb_integer & 0xB:

```
 3  2  1  0
[?][?][?][?] 
[1][0][1][1]
____________
[?][0][?][?] 
```

翻转位的 XOR 方法与 OR 方法相同。

所以位切换的规范方法是这样的：

打开灯 i：

```
4_bit_lightbulb_integer|=(1<<i) 
```

关灯 i：

```
4_bit_lightbulb_integer&=~(1<<i) 
```

翻转灯 i：

```
4_bit_lightbulb_integer^=(1<<i) 
```

**等等，我怎么读这些？**

为了检查位，我们可以简单地将所有位清零，除了我们关心的位。然后我们将检查结果值是否大于零——因为这是唯一可能为非零的值，所以当且仅当它非零时，它将使整个整数非零。例如，要检查位 2：

1<<2：

```
[0][1][0][0] 
```

4_bit_lightbulb_integer：

```
[?][?][?][?] 
```

1<<2 & 4_bit_lightbulb_integer:

```
[0][?][0][0] 
```

还记得前面的例子中 的值吗？没有改变。还要记住，任何 AND 0 都是 0。因此，我们可以肯定地说，如果该值大于零，则位置 2 处的开关为真，灯泡为零。同样，如果该值关闭，则整个事物的值将为零。

（您可以将 4_bit_lightbulb_integer 的整个值交替移动 i 位，然后将其与 1 相加。我不记得如果一个比另一个快，但我对此表示怀疑。）

所以规范检查功能：

检查位 i 是否打开：

```
if (4_bit_lightbulb_integer & 1<<i) {
\\do whatever 
```

}

**具体情况**

现在我们已经有了一套完整的按位运算的工具，我们可以看这里的具体例子。这基本上是相同的想法 - 除了执行它的更简洁和强大的方式。我们来看看这个函数：

```
void set(int i)  {        x[i>>SHIFT] |=  (1<<(i & MASK)); } 
```

从规范实现中，我将猜测这是试图将一些位设置为 1！让我们取一个整数，看看如果我将值 0x32（十进制的 50）输入**i**时会发生什么：

```
x[0x32>>5] |= (1<<(0x32 & 0x1f)) 
```

好吧，那是一团糟。让我们在右边剖析这个操作。为方便起见，假设还有 24 个不相关的零，因为它们都是 32 位整数。

```
...[0][0][0][1][1][1][1][1] = 0x1F
...[0][0][1][1][0][0][1][0] = 0x32
________________________
...[0][0][0][1][0][0][1][0] = 0x12 
```

看起来一切都在顶部的边界处被切断，1s 变成了零。这种技术称为**位掩码**。有趣的是，这里的边界将结果值限制在 0 到 31 之间……这正是 32 位整数的位数！

x[0x32>>5] |= (1<<(0x12)) 让我们看看另一半。

```
...[0][0][1][1][0][0][1][0] = 0x32 
```

右移五位：

```
...[0][0][0][0][0][0][0][1] = 0x01 
```

请注意，这种转换完全破坏了函数第一部分的所有信息——我们有 32-5 = 27 个剩余的位，这些位可能是非零的。这表明选择了整数数组中的 2 ^(27)个整数中的哪一个。所以现在简化的方程是：

```
x[1] |= (1<<0x12) 
```

这看起来就像规范的位设置操作！我们刚刚选择了

所以这个想法是使用前 27 位来选择一个要移位的整数，最后 5 位指示该整数中 32 位中的哪一位要移位。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-09T17:45:01.583

理解正在发生的事情的关键是认识到`BITSPERWORD`= 2 ^(`SHIFT`)。因此，`x[i>>SHIFT]`找出数组的哪个 32 位元素`x`具有对应的位`i`。（通过`i`向右移动 5 位，您只需除以 32。）一旦找到 的正确元素，就可以使用`x`的低 5 位来查找对应于的特定位。就是这样；通过将 1 移位该位数，您将对应于 1 的位移动到对应于 中的^(第 th)位的确切位置。`i``x[i>>SHIFT]``i``i & MASK``x[i>>SHIFT]``i`^(`x`)

这里有更多的解释：

想象一下，我们想要`N`位向量中的位容量。由于每个都`int`包含 32 位，因此我们需要`(N + 31) / 32` `int`存储值（即 N/32 向上舍入）。在每个`int`值中，我们将采用位从最低有效位到最高有效位排序的约定。我们还将采用向量的前 32 位在 中的约定，`x[0]`接下来的 32 位在 中`x[1]`，依此类推。这是我们正在使用的内存布局（显示位向量中对应于每个内存位的位索引）：

```
 +----+----+-------+----+----+----+
x[0]: | 31 | 30 | . . . | 02 | 01 | 00 |
      +----+----+-------+----+----+----+
x[1]: | 63 | 62 | . . . | 34 | 33 | 32 |
      +----+----+-------+----+----+----+
        etc. 
```

我们的第一步是分配必要的存储容量：

```
x = new int[(N + BITSPERWORD - 1) >> SHIFT] 
```

（我们可以为动态扩展这个存储做准备，但这只会增加解释的复杂性。）

现在假设我们想要访问位`i`（设置它，清除它，或者只是想知道它的当前值）。我们需要首先弄清楚`x`要使用哪个元素。由于每个值有 32 位`int`，这很容易：

```
subscript for x = i / 32 
```

利用枚举常量，`x`我们想要的元素是：

```
x[i >> SHIFT] 
```

（把它想象成一个 32 位宽的窗口进入我们的 N 位向量。）现在我们必须找到对应于 的特定位`i`。查看内存布局，不难发现窗口中的第一个（最右边）位对应于位索引`32 * (i >> SHIFT)`。（窗口在`i >> SHIFT`slot in之后开始`x`，每个 slot 有 32 位。）因为这是窗口中的第一位（位置 0），所以我们感兴趣的位是在 position

```
i - (32 * (i >> SHIFT)) 
```

在窗户里。通过一些实验，你可以说服自己这个表达式总是等于`i % 32`（实际上，这是 mod 运算符的一个定义），反过来，它总是等于`i & MASK`. 由于最后一个表达式是计算我们想要的最快的方法，这就是我们将使用的。

从这里开始，剩下的就很简单了。我们从窗口的最低有效位置（即常数`1`）中的单个位开始，并将其向左移动`i & MASK`位以使其到达与`i`位向量中的位对应的窗口中的位置。这是表达式

```
1 << (i & MASK) 
```

来自。随着位现在移动到我们想要的位置，我们可以使用它作为掩码来设置、清除或查询该位置的位的值，`x[i>>SHIFT]`并且我们知道我们实际上是在设置、清除或查询该值我们的位`i`向量中的位。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T18:18:37.303

如果您将位存储在一个`n` *字数*组中，您可以想象它们被布置为具有`n`行和 32 列 ( `BITSPERWORD`) 的矩阵：

```
 3                                         0
         1                                         0
      0  xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx
      1  xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx
      2  xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx     
      ....
      n  xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx xxxxxxxxxx 
```

要获得第 k 位，您将 k 除以 32。（整数）结果将为您提供该位所在的行（单词），提醒将为您提供单词中的哪一位。

除以`2^p`可以简单地通过`p`向右移动位置来完成。可以通过获取最右边的 p 位（即与 (2^p - 1) 的按位与）来获得提醒。

在 C 语言中：

```
#define div32(k) ((k) >> 5)
#define mod32(k) ((k) & 31)

#define word_the_bit_is_in(k) div32(k)
#define bit_within_word(k)    mod32(k) 
```

希望能帮助到你。

# haskell - 使用 nub、map 和 take 时因类型而无法编译

> ID：11400245
> 
> 赞同：1
> 
> 时间：2012-07-09T17:40:57.767
> 
> 标签：haskell

我有这个简单的功能：

```
bombplaces::Int->[(Int,Int)]->[(Int,Int)]
bombplaces bombCount listOfPossiblePoints = nub (map (take  bombCount) (perms listOfPossiblePoints)) 
```

炸弹是 (x,y) (carthesian 点)

我需要获得所有排列并且只取前几个（bombCount）点。

我收到以下错误：

```
Couldn't match expected type `(Int,Int)' with actual type `[a0]'
Expected type: [a0] -> (Int,Int)
  Actual type: [a0] -> [a0]
In the return type of a call of `take'
In the first argument of `map', namely `(take liczbaBomb)' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T17:53:01.383

如果您删除类型签名并向 GHCi 询问类型，您的问题将很明显：

```
> :t bombplaces
bombplaces :: Eq a => Int -> [a] -> [[a]] 
```

也就是说，`bombplaces`想要返回一个列表列表，而您希望它返回一个普通列表。您需要更改类型签名或更改函数的定义，具体取决于您想要的行为。

**注意**你没有告诉我们`perms`你使用的是什么定义，所以我假设是显而易见的。

# php - 将上传的图像调整为最大宽度，最大高度？

> ID：11400247
> 
> 赞同：0
> 
> 时间：2012-07-09T17:41:07.023
> 
> 标签：php, image-uploading

我有一个 php 图片上传上传表单，我想做的是在图片保存在我的服务器上之前，需要调整它的大小以确保高度不超过我设置的最大高度，并且宽度不超过最大宽度我设置。我在想这样做的方法首先是a）检查宽度是否大于最大宽度。如果是这样，请按比例调整图像大小，使宽度等于最大宽度。然后，检查高度。如果高度超过最大高度，则按比例调整图像大小，使高度等于最大高度。

有什么建议么？GD 安装在我的服务器上..

假设图像是`echo $_FILES["file"]["name"];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:42:32.993

使用`gd`尽可能轻量级。在不使用库的情况下调整图像大小的想法基本上很幽默。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:44:46.803

我已经回答了与您所问的类似的问题：

[使用 PHP 调整图像大小](https://stackoverflow.com/questions/7393319/resize-images-with-php/7393391#7393391)

它使用 GD b/c 就像 Chaos 说的那样，它没有变得更轻量级。

此脚本根据需要调整图像大小，但会缓存曾经调用过的每个图像的每个大小，以便不必再次调整大小。

# ffmpeg - 使用 ffmpeg 获取视频信息 - 为什么我需要指定输出文件？

> ID：11400248
> 
> 赞同：68
> 
> 时间：2012-07-09T17:41:21.730
> 
> 标签：ffmpeg

我正在使用 ffmpeg 获取有关视频文件的信息，并且我不想将信息保存到文件中。ffmpeg 正在返回所有视频信息，但它作为错误返回，因为我没有指定输出文件。我正在使用的命令是：

```
 ffmpeg -i C:\Test\3FA8D0E6-BD61-D160-98BB41304D63FAE3.mp4 
```

我得到的错误是“必须指定至少一个输出文件”

我在 ColdFusion 中使用 调用它`<cfexecute>`，并且输出存储在一个局部变量中，这就是我不想指定文件的原因......我只是不需要将它存储在文件中。

如果有什么不同，我在 Windows 上运行它。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-07-09T18:17:32.233

它给出了一个错误，因为 FFmpeg 要求指定一个输出文件。仅使用它来获取有关文件的信息不是其预期用途。

选项 1：**忽略错误。** FFmpeg首先打印文件信息，所以你可以简单的获取你需要的信息而忽略错误。

选项 2：**改用[ffprobe](http://ffmpeg.org/ffprobe.html)。** FFprobe 是另一种通常与 FFmpeg 一起打包的工具，旨在获取有关媒体文件的信息。它甚至可以以各种易于解析的格式输出信息，因此您不必在解析 FFmpeg 的输出时搞砸。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T18:29:51.517

我最终改用 ffprobe 。这是我的 ColdFusion 测试代码......请记住，这可以写得更好。在这一点上，我只对宽度/高度/持续时间感兴趣。

```
<cfset fsVideoFile = "C:\videos\test.mp4">
<cfset width = 270>
<cfset height = 480>
<cfset duration = 0>

<cfexecute
   name="ffmpeg\bin\ffprobe.exe"
   arguments="#fsVideoFile# -v quiet -print_format json -show_format -show_streams"
   timeout="60"
   variable="jsonInfo"
   errorVariable="errorOut" />

<cfif IsJSON (jsonInfo)>
   <cfset videoInfo = DeserializeJSON (jsonInfo)>
   <cfdump var="#videoInfo#">
   <cfset duration = videoInfo.format.duration>
   <cfloop array="#videoInfo.streams#" index="stream">
      <cfif stream.codec_type EQ "video">
         <cfset width = stream.width>
         <cfset height = stream.height>
         <cfbreak />
      </cfif>
   </cfloop>
</cfif> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-09-19T21:13:32.127

很晚了，但希望如果他不想使用它可以帮助某人`ffprobe`（请参阅[@blahdiblah answer](https://stackoverflow.com/a/11400767/2114786)）。

您可以[按照文档中的](https://trac.ffmpeg.org/wiki/Null)说明使用`Null`with ：`ffmpeg`

```
ffmpeg -i C:\Test\3FA8D0E6-BD61-D160-98BB41304D63FAE3.mp4 -f null - 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-21T23:40:20.867

可以使用 ffmpeg 来完成，如果您不想将信息保存到文件中，您可以将其发送到`/dev/null`*nix 系统中。

```
ffmpeg -i file.mp4 -hide_banner -f null /dev/null 
```

# javascript - 更改 javascript 代码段背景和文本颜色

> ID：11400249
> 
> 赞同：0
> 
> 时间：2012-07-09T17:41:21.747
> 
> 标签：javascript

我可以更改从 100 小部件获得的此代码段的颜色吗？我希望（喜欢）图像颜色为 2a5500（绿色），文本为白色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:03:03.773

我不明白，你到底是什么意思，但无论如何你可以使用`elem.style.background`and `elem.style.color`。

**例子：**

**HTML：**

```
<div id="elem" style="width:400px; height:250px; border:1px solid"> Welcome </div> 
```

**Javascript：**

```
var elem = document.getElementById('elem');
elem.onmouseover = function(){
  elem.style.background = "#2a5500";
  elem.style.color = "#ff0080";
}
elem.onmouseout = function(){
  elem.style.background = "";
  elem.style.color = "";
} 
```

# mobile - 将 SSL 证书添加到 Adob e Air 移动应用程序

> ID：11400252
> 
> 赞同：1
> 
> 时间：2012-07-09T17:41:26.560
> 
> 标签：mobile, ssl, https, air, certificate

如果您使用 HTTPS 连接到您的服务器，您是否需要在您的应用程序中嵌入您的站点 SSL 证书。

我的 SSL 证书配置为接受来自 GoDaddy 的 *.Domain.name。

目前我启用了忽略 SSL 以测试我的应用程序。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:15:59.837

您可以将 SSL 证书导入 Android 设备 - 只需查看设置 -> 安全选项卡。（但这只是在您需要的情况下）您的设备可能会让您之后启用某种形式的访问安全性（例如强制输入 PIN 码或图案）。

如果您只访问安装了该证书的网络服务器，则不需要将其安装在本地硬件上。

# c# - 在 C# 的禁用文本框中选择文本

> ID：11400257
> 
> 赞同：6
> 
> 时间：2012-07-09T17:41:57.427
> 
> 标签：c#, textbox

如何在禁用的文本框中选择文本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T17:43:24.110

如果您希望能够选择文本，请使用`ReadOnly`属性而不是禁用控件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T17:43:06.860

使用`readonly`而不是禁用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T17:42:58.460

删除该`enabled=false`属性，并将其添加到您的代码隐藏中：

```
 YourTextBox.Attributes.Add("readonly", "readonly"); 
```

# maven - testng 指定不同的用户

> ID：11400258
> 
> 赞同：0
> 
> 时间：2012-07-09T17:41:58.003
> 
> 标签：maven, junit, testng

我正在使用 TestNG 运行我们的自动化测试。我们选择 TestNG 的原因是因为我们可以将变量输入发送到测试方法示例**public void testXX(String userId)**并且 userId 可以针对每个测试进行更改。

下面的代码显示了我可以用来执行测试的三个不同的用户 ID。所以我完全相同的测试将为三个不同的用户中的每一个运行三次。这个功能很棒，真的让我能够在不同的场景下进行多次测试，因为我们的每个用户都有不同的配置文件。

```
// All valid Pricing Leads
@DataProvider(name = "userIds")
public Object[][] createPricingLeadUsersParameters() {
   return new Object[][] {
      { "TestUser001" },
      { "TestUser002" },
      { "TestUser003" }
   };
}

@Test( dataProvider = "userIds" )
public void createGroup( String userIds) {
    ............
 } 
```

我现在遇到的问题是在某些情况下我只能使用一个用户 ID，否则我的所有测试都会失败。我想保持我完全相同的测试，但只传递 userId 而不是上面显示的三个。有一种方法可以配置 TestNG 以在命令行上创建此变量，因此有时我会使用定义的三个，但在另一种情况下，它只会是三个中的一个还是新的 userId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:52:57.327

当然，有很多方法可以做到这一点。在运行 TestNG 时传递系统属性怎么样？

```
java -Dfoo=bar org.testng.TestNG... 
```

然后您的数据提供者可以测试`foo`with的值`System.getProperty()`并相应地调整它返回的内容。

# php - 使用 PHP 删除 MS Word “HTML”

> ID：11400260
> 
> 赞同：5
> 
> 时间：2012-07-09T17:42:15.507
> 
> 标签：php, html, ms-word, htmlcleaner

> **可能重复：**
> [清理 Word HTML 的最佳免费方法是什么？](https://stackoverflow.com/questions/67964/what-is-the-best-free-way-to-clean-up-word-html)
> [PHP 清理粘贴的 Microsoft 输入](https://stackoverflow.com/questions/379342/php-to-clean-up-pasted-microsoft-input)

我允许客户在富文本编辑器中输入注释，并且最近才升级到 ckEditor 3x，它默认去除 MS 单词类、样式和注释（当用户粘贴到编辑器对象时）。所以继续前进，我已经准备好了。

我最近需要清理 5 年的笔记，其中一些笔记嵌入了 MS Word 生成的 HTML。我需要遍历这段文本并清理它。

我不需要删除所有 span 标签，只需要删除那些标识为 Microsoft 编写的标签。

我试过使用 HTMLCleaner，但它没有删除 MS 生成的 HTML。 [http://word2cleanhtml.com](http://word2cleanhtml.com)完全符合我的要求，但是开发人员目前不提供 API 供公众使用（截至 2012 年 7 月 9 日）。

在过去的几周里，我断断续续地寻找这样的课程，但运气不佳。你们中有人找到了想要分享的有用课程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T17:49:42.657

[http://htmlpurifier.org/](http://htmlpurifier.org/)

这将做你想要的。

# iphone - 多张图片的 NSURLConnection

> ID：11400264
> 
> 赞同：-2
> 
> 时间：2012-07-09T17:42:21.473
> 
> 标签：iphone, ios, nsurlconnection

我必须为以下代码开发代码：

1.  在你的 mac 上设置一个 apache 服务器。
2.  在那里托管大约 200 多张照片。（每个应该是大约 1 mb 到 2 mb）
3.  右键一个带有 4 个选项卡的选项卡栏应用程序。
4.  选项卡 1：实现一个 UITableView，它应该显示你托管的所有照片。同步加载照片
5.  选项卡 2：实现一个 UITableView，它应该显示你托管的所有照片。异步加载照片。

我已经在共享下的系统偏好设置中设置了 apache 服务器，现在创建了一个标签栏，如何实现第 4 步和第 5 步。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:54:20.553

在这里查看我的答案，了解如何执行第 5 步（Apple 文档提供了将图像延迟加载到 tableview 中的绝佳示例）： [https ://stackoverflow.com/a/11268636/1033662](https://stackoverflow.com/a/11268636/1033662)

# javascript - 选择列表元素（捕获向下/向上箭头）

> ID：11400269
> 
> 赞同：9
> 
> 时间：2012-07-09T17:42:49.877
> 
> 标签：javascript, jquery, drop-down-menu, dom-events, keypress

我有以下 HTML 结构（'ul li' 呈现为下拉/选择）

```
<input id="input_city" type="text" />

<div class="suggestions">
 <ul>
  <li value="0" name="New York">New York</li>
  <li value="1" name="London">London</li>
  <li value="2" name="Paris">Paris</li>
  <li value="3" name="Sydney">Sydney</li>
 </ul>
</div> 
```

需要 JavaScript/jQuery 代码来捕获将选择第一个“li”元素的向下箭头键按下事件（输入时）

连续向下键选择下一个'li'元素；和向上键选择以前的'li'元素。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-09T17:53:31.330

由于您的问题有点过于模糊，因此尚不清楚您要完成什么。

如果您要突出显示`li`元素，请使用以下命令：

```
var $listItems = $('li');

$('input').keydown(function(e) {
    var key = e.keyCode;
    var $selected = $listItems.filter('.selected');
    var $current;

    if (![38, 40].includes(key)) return;

    $listItems.removeClass('selected');

    if (key == 40) { // Down key
        if (!$selected.length || $selected.is(':last-child')) {
            $current = $listItems.eq(0);
        } else {
            $current = $selected.next();
        }
    } else if (key == 38) { // Up key
        if (!$selected.length || $selected.is(':first-child')) {
            $current = $listItems.last();
        } else {
            $current = $selected.prev();
        }
    }

    $current.addClass('selected');
});​ 
```

这是小提琴：http: [//jsfiddle.net/GSKpT/](http://jsfiddle.net/GSKpT/)

* * *

如果您只是想设置`input`字段的值，请将最后一行更改为：

```
$(this).val($current.addClass('selected').text()); 
```

这是小提琴：http: [//jsfiddle.net/GSKpT/1/](http://jsfiddle.net/GSKpT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:49:57.213

您可以为此使用[MousetrapJS 。](http://craig.is/killing/mice)这是一个如何实现向下键的示例。首先将选择的类添加到第一个列表项。

```
Mousetrap.bind('down', function() {
    var next = $(".suggestions  li.selected").removeClass("selected").next();
    if (next.length) {
       next.addClass("selected");
    } else {
       $(".suggestions li").first().addClass("selected");
    }
}); 
```

# c# - 12条sql批量存储记录

> ID：11400279
> 
> 赞同：0
> 
> 时间：2012-07-09T17:43:26.293
> 
> 标签：c#

是否可以在 sql 中以 12 组或批量存储数据？我有一个查询，在插入新行之前应该检查现有记录是否等于或小于十二。如果它们是 12 则它应该创建一个新批次，该批次也最多存储 12 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:42:57.673

There's no built-in concept of data batching in SQL Server, or any other SQL-like database out there. What you're describing is data grouping/relations, which is the responsibility of the database designer to figure out. What you should do is create a related table, called Batches. Give it a primary key. Then place that primary key column into your actual table with data as a foreign key. The logic about when batches are created should probably be defined in a trigger, or define the logic in a UDF and set the Default Value of that BatchId column to the result of that UDF.

# mysql - 如何将 mysql 表映射到 Grails 域类？

> ID：11400281
> 
> 赞同：1
> 
> 时间：2012-07-09T17:43:35.153
> 
> 标签：mysql, grails

我有 mysql 表名为`anto2`. 其中只有一`name`列`varchar 100`. 我试图在 grails 域类中映射这个表：

```
class Anto {

    String grailsName

    static constraints = {
    }

    static mapping = {
        table 'anto2'
        grailsName column: 'name'
    }
} 
```

完成后，`run-app`我可以看到我的表格又添加了两列：

```
+---------+--------------+------+-----+---------+-------+
| Field   | Type         | Null | Key | Default | Extra |
+---------+--------------+------+-----+---------+-------+
| name    | varchar(100) | YES  |     | NULL    |       |
| id      | bigint(20)   | NO   |     | NULL    |       |
| version | bigint(20)   | NO   |     | NULL    |       |
+---------+--------------+------+-----+---------+-------+ 
```

我为这个域类生成了静态视图和控制器，当我尝试保存它时，我的`save()`方法（使用`generate-all`命令生成）出现错误。错误如下：

```
2012-07-09 23:05:26,391 [http-bio-8080-exec-2] ERROR errors.GrailsExceptionResolver  - SQLException occurred when processing request: [POST] /mysql/anto/save - parameters:
create: Create
Field 'id' doesn't have a default value. Stacktrace follows:
Message: Field 'id' doesn't have a default value
    Line | Method
->> 1073 | createSQLException in com.mysql.jdbc.SQLError
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   3597 | checkErrorPacket   in com.mysql.jdbc.MysqlIO
|   3529 | checkErrorPacket . in     ''
|   1990 | sendCommand        in     ''
|   2151 | sqlQueryDirect . . in     ''
|   2625 | execSQL            in com.mysql.jdbc.ConnectionImpl
|   2119 | executeInternal .  in com.mysql.jdbc.PreparedStatement
|   2415 | executeUpdate      in     ''
|   2333 | executeUpdate . .  in     ''
|   2318 | executeUpdate      in     ''
|    105 | executeUpdate . .  in org.apache.commons.dbcp.DelegatingPreparedStatement
|     25 | save               in mnm.AntoController
|   1110 | runWorker . . . .  in java.util.concurrent.ThreadPoolExecutor
|    603 | run                in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . . . . .  in java.lang.Thread 
```

为什么会这样？我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:09:34.330

如果您没有指定您的 id 生成器类型，GORM 将使用您数据库的本机策略。如果您使用 mysql 作为 db，它将使用 IDENTITY 策略创建您的 id 来生成它们。此策略需要在您的 id 列上自动递增。

虽然我认为定义策略更好。您可以使用 SEQUENCE 策略：

```
id column:'id_anto2', generator:'sequence', params:[sequence:'tab_anto2_seq'] 
```

然后在您的数据库中创建一个具有相同名称的序列（因此您不必使用 Hibernate 自动为您创建的序列）。这很容易，而且效果很好。

此外，要丢弃**版本**字段，请在映射块中插入版本 false。所以，它会像：

```
static mapping = {
        table 'anto2'
        id column: 'id_anto2', generator: 'sequence', params: [sequence:'tab_anto2_seq']
        grailsName column: 'name'
        version false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:56:21.233

看起来您缺少 id 映射。尝试向静态映射闭包添加 id 引用。此外，如果这是一个现有数据库，您可能希望将版本设置为 false，或者 grails 可能会尝试使用版本列更改表，具体取决于您如何设置 datasource.groovy。

```
 table 'anto2'
    version false
    id column:'anto2_ID'
    grailsName column: 'name' 
```

# rest - MVC4 WebApi 中的 REST 帮助页面和 REST 测试客户端

> ID：11400285
> 
> 赞同：0
> 
> 时间：2012-07-09T17:44:02.453
> 
> 标签：rest, asp.net-web-api

我使用早期版本的 webapi (0.6.0) 开发了几个 REST 服务，对于我的服务，我在 RegisterRoutes 中启用了帮助页面和测试客户端，如下所示（从 application_start 调用：

```
routes.Add(new ServiceRoute("auth", 
            new HttpServiceHostFactory() 
                { 
                    Configuration = new HttpConfiguration() 
                    { 
                        EnableTestClient = true, 
                        EnableHelpPage = true
                    } 
                }, 
typeof(Auth_Api))); 
```

所以我能够访问服务

```
http://<myserver>/auth 
```

并访问帮助页面和测试客户端

```
http://<myserver>/auth/help
http://<myserver>/auth/test 
```

现在我需要将它们迁移到 MVC4 webapi，并且我想完成相同的行为，关于测试和帮助页面，但我找不到如何去做。

在 RegisterRoutes 我有这段代码，它为 API（REST）功能设置路由

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

我可以将 System.ServiceModel.Activation 和 Microsoft.ApplicationServer.Http.Activation 程序集添加到 MVC4 webapi 应用程序并像以前一样设置路由吗？

如果我这样做有什么缺点（以防万一）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:09:31.553

查看 API Explorer 以了解生成帮助页面的能力。我相信测试客户端目前已被删除。我认为有计划将其带回。具体我记不太清了。

# xcode - 升级 Xcode 后找不到 Scripting Bridge 头文件：mail.h iCal.h

> ID：11400286
> 
> 赞同：0
> 
> 时间：2012-07-09T17:44:11.203
> 
> 标签：xcode, scripting-bridge

这应该很容易..

我相信我最近从 Xcode 3.6 升级到了 10.7 上的最新版本的 Xcode。

我一直在为 Apple Mail 和 iCal 编写脚本桥。

以前，我可以使用 FILE > Open Quickly... 查看 mail.h 或 iCal.h 头文件，因为输入文件名只会显示一个文件...正确的文件。

现在，当我使用 Open Quickly 输入 mail.h 或 iCal.h 时，列表中会出现几十个文件，但没有一个是正确的 Scripting Bridge 头文件。

谁能告诉我在哪里和/或如何再次查看这些头文件？这让我有点发疯了..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:53:59.500

好的...找到解决方案。

显然，该文件在“快速打开”列表中不再显示为“mail.h”或“iCal.h”。

它现在显示为“邮件”或“iCal”，但图标与以前不同。新图标在棕色方块中显示为带下划线的“C”。

如果您键入“.h”扩展名，那么它根本不会出现在列表中。

啊。

# facebook-javascript-sdk - 如何通过javascript接收返回扩展访问令牌

> ID：11400287
> 
> 赞同：2
> 
> 时间：2012-07-09T17:44:11.310
> 
> 标签：facebook-javascript-sdk, facebook-access-token

扩展后，我可以：

1.  请参阅浏览器上的扩展访问令牌：access_token=TOKEN&expires=EXPIRES
2.  错误消息“左侧分配无效”

如何从响应中获取令牌。

我的代码：

* * *

```
<script>
      window.onload = function() {

            FB.init({appId:422642254433770, cookie:true, status:true, xfbml:true });

            FB.getLoginStatus(function(response) {
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                var accessTokenOld = response.authResponse.accessToken;

                //Extend access token                    
                var OauthParams = {};
                OauthParams['client_id'] = 'CLIEN ID';
                OauthParams['client_secret'] = 'CLIENT SECRET';
                OauthParams['grant_type'] = 'fb_exchange_token';
                OauthParams['fb_exchange_token'] = accessToken;
                OauthParams['response_type'] = 'token';

                FB.api('/oauth/access_token', 'post', OauthParams, function(extendResponse) {
                    console.log("Extend token: " + extendResponse.accessToken);
                });  
            });
        };

</script> 
```

# ruby-on-rails - Heroku 的这个错误是什么意思，我该如何解决？

> ID：11400289
> 
> 赞同：1
> 
> 时间：2012-07-09T17:44:15.410
> 
> 标签：ruby-on-rails, heroku

当我尝试通过 heroku 打开正在处理的应用程序时，出现应用程序错误。我进入了我的heroku日志，发现了以下错误：

“错误 H10（应用程序崩溃）-> 获取gentle-samurai-8665.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 2012-07-09T17:39:09+00:00 heroku[router] : 错误 H10（应用程序崩溃）-> GETgentle-samurai-8665.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes="

我不确定错误指的是什么或如何解决导致错误的问题。您能提供的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:48:37.243

Heroku 有其所有错误代码的[完整列表](https://devcenter.heroku.com/articles/error-codes)。“Web 进程崩溃或 Web 进程启动超时将出现” [H10 错误](https://devcenter.heroku.com/articles/error-codes#h10__app_crashed)。您的应用程序的日志中应该有额外的行来提供更多详细信息。

# geolocation - 在谷歌地图地理定位中放置随机纬度和经度？

> ID：11400290
> 
> 赞同：-1
> 
> 时间：2012-07-09T17:44:31.630
> 
> 标签：geolocation

我有一些城市的纬度和经度，我想随机输入地理编码器。谁能告诉我我该怎么做。这些值都是负数和浮点数。例如墨西哥 lat/long 23.634501,-102.552784

myLatlng = 新 google.maps.LatLng(1.352083,103.819836);

我想从 Latlng 函数中的一组值中随机放置值。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:50:39.210

你没有指定你的编程语言，所以我会回答语言不可知论。

我假设您有一个 Point 类型，它可以采用两个双精度值，例如

```
class Point
{
    double Latitude;
    double Longitude;
} 
```

并且您有一个 Point 的列表或一组实例，表示您要从中选择的一组纬度/经度对。

```
List<Point> points; 
```

只需生成一个介于 0 和 (set size -1) 之间的随机整数。使用该随机整数作为列表的索引。

```
int index = Random(0, points.Length-1);
Point myRandomPoint = points[index]; 
```

现在在您致电 Google 时使用该点

```
myLatlng = new google.maps.LatLng(myRandomPoint.Latitude, myRandomPoint.Longitude); 
```

# php - 布局和视图，有什么区别？作为 Zend_Layout 和 Zend_View 的示例

> ID：11400291
> 
> 赞同：2
> 
> 时间：2012-07-09T17:44:33.503
> 
> 标签：php, model-view-controller, zend-framework

`Zend_Layout`我不明白和之间有什么区别`Zend_View`。

这是`Zend_Layout`教程中的图片。 ![在此处输入图像描述](../Images/daeb67b98421d28e0369b2620da711b9.png)

一切似乎都很容易理解。我们有元素`<head>`，我们有`Header`，`Navigation`段，`Content`段，`Sidebar`和`Footer`。并且很容易理解它们是如何被调用的。`View`但我看不出和之间的区别`Layout`。为什么`Navigation`段被称为`Layout`'属性和`Footer`和`Header`被称为`View`属性？

我测试`Zend_Layout`并交换了它们。我将`Navigation`段称为`Layout`' 属性而不是`View`' 属性：

```
echo $this->layout()->nav;  // as in tutorial
echo $this->nav;    // used to call like this 
```

一切正常。不仅适用于`$nav`，而且适用于任何变量。那么有什么区别呢？

我在这里附上我的实验代码。我的实验布局页面由三个主要块组成：

*   标头（标头的html代码），
*   内容（内容块的 html 代码）
*   页脚（html-код 页脚）

这是模板的脚本：

```
<!DOCTYPE html>
  <html>
   <head>
   </head>
      <body>
         <div header>
           <?php echo $this->header ?>     // it works
           <?php echo $this->layout()->header ?>  // and this variant also works
         </div>

         <div content>
            <?php echo $this->content ?>      // same thing, it is a View's property
            <?php echo $this->layout()->content ?>    // And it is a Layout's property
         </div>

         <div footer>
             <?php echo $this->footer ?>        // same thing
             <?php echo $this->layout->footer() ?>  // both work (one or another I mean)
         </div>
     </body>
  </html> 
```

我现在的代码：

```
$layout = Zend_Layout::startMvc();         // instantiate Layout
$layout->setLayoutPath('\TestPage\views');  // set the path where my layouts live

// And here's the most interesting
// Set Header layout first
$layout->setLayout('header');    // 'header.php' - is my file with html-code of the Header 
                                 // I pass only name 'header', and it makes 'header.php' from it. 
                                 // Predefined suffix is 'phtml' but I changed it to 'php'
$layout->getView()->button = "Button";   // assign some variable in the Header. Please pay attention, it is View's property
$layout->button_2 = "Button_2";   // and also I can assign this way. It's Layout's property now. And they both work
$headerBlock = $layout->render();   // render my Header and store it in variable

// the same procedures for the Content block
$layout->setLayout('content');
$layout->getView()->one = "One";   
$layout->two = "Two";
$contentBlock = $layout->render();   // render and store in the variable

//  and the same for the Footer
$layout->setLayout('footer');
$layout->getView()->foot = "Foot";   
$layout->foot_2 = "Foot_2";
$footerBlock = $layout->render();   // render and store in the variable

// and finally last stage - render whole layout and echo it
$lout->setLayout('main_template');
$layout->getView()->header = $headerBlock;   // again, I can do also $layout->header
$lout->content = $contentBlock;
$lout->getView()->footer = $footerBlock;
echo $lout->render();     // render and echo now. 
```

一切正常，页面显示没有错误。但我不知道我使用`Zend_Layout`的是`Zend_View`正确的方式还是错误的方式。`Zend_Layout`像我一样使用它来构建页面是正确的方法吗？有什么区别

```
echo $this->layout()->header // this
echo $this->header  // and this 
```

哪个变体是正确的？

此外，我似乎有双重渲染：起初我渲染每个片段。然后在渲染最终模板时再次渲染它们。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:13:00.197

有关一些背景，请参阅我发布到您的其他（类似）问题的答案。`Zend_View`用于渲染模板。`Zend_Layout`是一种特殊类型的模板，包含一个或多个其他模板。*您应该只在一个页面上有一个布局*。这个想法是布局包含在页面之间不会真正改变的 HTML 部分。

您的代码可以简化为：

主布局文件：

```
<!DOCTYPE html>
  <html>
   <head>
   </head>
      <body>
         <?php echo $this->render('_header.phtml')?>

         <div content>
            <?php echo $this->layout()->content ?>
         </div>

         <?php echo $this->render('_footer.phtml)?>
     </body>
  </html> 
```

用法：

```
$layout = new Zend_Layout();
$layout->setLayoutPath('\TestPage\views');
$layout->setLayout('layout'); // this should be whatever you named your layout file

$view = new Zend_View();
$layout->content = $view->render('main_template.php'); // this is the part that changes between pages

echo $layout->render(); 
```

如果您不使用 Zend Framework 控制器类（您似乎没有使用），请不要调用 startMvc()。

# apache - 使用某些浏览器通过 SSL/Https 连接时突然超时

> ID：11400293
> 
> 赞同：0
> 
> 时间：2012-07-09T17:44:36.567
> 
> 标签：apache, firefox, ssl, https

我的网站的 https 版本突然无法从 Firefox 或 Chrome 访问（chrome 显示 ERR_TIMED_OUT）。两种浏览器的行为都好像站点已关闭。使用 Internet Explorer 可以正常工作。

从昨天开始，这发生在多台计算机上。我使用 startcom.org 签名证书。

Wireshark 显示：

```
TLSV1 Client Hello
TLSV1 Server Hello
Certificate
Server Key Exchange, Server Hello Done
Client Key Exchange, Change cipher spec, Encrypted Handshake Message
Encrypted Handshake Message, Change cipher spec, Encrypted Handshake Message
Encrypted Alert
TCP RST, ACK 
```

稍后有来自用户代理的请求：Microsoft-CryptoAPI/6.1 到 crl.startssl.com/crt1-crl.crl

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:17:16.083

这可能是由于检查证书吊销（通过 CRL）不起作用时的不同行为引起的。貌似StartSSL最近出现了一些问题，`http://crl.startssl.com/crt1-crl.crl`响应比较慢。

您可以检查它是否在您的浏览器中启用。

在 IE 中：Internet 选项 -> 高级 -> 安全 -> 检查服务器证书吊销

在 Firefox 中，在`about:config`-> 中查看包含文本`crl`（和`ocsp`）的选项。

# matlab - 在matlab中空闲时调用函数运行

> ID：11400294
> 
> 赞同：4
> 
> 时间：2012-07-09T17:44:46.677
> 
> 标签：matlab, interrupt, idle-processing

当我正在运行的程序空闲时，是否可以在 matlab 中调用函数？我不希望这是一个并行过程。另外，我更喜欢一个解决方案，当主程序必须再次运行时，我可以暂停和恢复该功能。有点像嵌入式系统中的中断，在我的例子中，主程序是中断。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:10:48.340

您可以使用计时器对象来启动/停止第二个功能。请参阅[matlab 文档](http://www.mathworks.com/help/techdoc/matlab_prog/f9-38272.html)。另请参阅[此 mathworks 博客条目。](http://blogs.mathworks.com/pick/2008/05/05/advanced-matlab-timer-objects/)

# wpf - 将文本调整为最大可能大小以适合带有环绕的绘图矩形

> ID：11400296
> 
> 赞同：0
> 
> 时间：2012-07-09T17:44:52.653
> 
> 标签：wpf, .net-4.0, fonts, resize, viewbox

这是很多类似的问题，但没有好的答案？我使用上下文绘图在某个矩形大小“720,576”上绘制输入文本，现在我需要将整个文本调整为最大字体大小，同时保持行数？

我试图创建一个方程来计算，但没有用。我什至尝试循环大小直到文本被剪切，但我无法测试那个条件，我搜索了一周看到类似的东西但无济于事！

最后我尝试使用一个接近我想要的视图框，但它不会让里面的文本块变成多行，因为它总是重新调整宽度的大小，在一行中包含所有文本。

这是我得到的：

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="720" Width="576">
<Viewbox >
    <TextBlock TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Center Text="how are you doining how are you doining how are you doining how are you doining how are you doining how are you doining how are you doining how are you doining how are you doining" " />
</Viewbox> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:49:49.343

我有同样的问题。这是一个修复：

```
<Viewbox StretchDirection="DownOnly">
    <Grid MaxWidth="1000" MaxHeight="100">
         <TextBlock TextWrapping="Wrap" FontSize="42" VerticalAlignment="Center" Text="very very very very very very very very very very very very very very very very long line"/>
    </Grid>
</Viewbox> 
```

因此，随着文本行的扩展，它将被调整大小直到它不是那么小，然后它将被换行到下一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:24:19.957

我无法通过仅将示例复制/粘贴到新项目中来重现您描述的行为。它确实将文本写在几行上；也许你在一个对象上有一个默认设置器，也许是文本框......

OK 很简单：在你的 TextBox 上设置宽度，这样你的 TextBox 就会自动换行。也许你想拥有 ViewBox 的宽度（祖先绑定）。

# sql-server-2008 - SELECT 语句需要以 NULL 数据为条件输出值

> ID：11400298
> 
> 赞同：1
> 
> 时间：2012-07-09T17:45:16.977
> 
> 标签：sql-server-2008

很难在标题中浓缩我需要的东西……就是这样。这适用于 SQL Server 2008。

由于此处无法解释的原因，我需要一个 SELECT 语句，如果 4 列的值为 null，则该语句将在其他列中显示值为 1。像这样的东西。

```
SELECT name, lastname, p1, p2, p3, p4, "1 if p1,p2,p3 and p4 are all NULL, 0 otherwise" city, st, zip
FROM mytable 
```

问题是我如何翻译成这样的代码：**“如果 p1、p2、p3 和 p4 都是 NULL，则为 1，否则为 0”**？

我试过了

```
CASE len(p1+p2+p3+p4) WHEN NULL 1 ELSE 0 END 
```

但它没有用。即使当我这样做

```
SELECT len(p1+p2+p3+p4) FROM mytable 
```

结果为 NULL。

我尝试了 IF ELSE，但在 SELECT 语句中似乎不受欢迎。

想法？

谢谢。

* * *

多谢你们。我选择了不使用 COALESCE 的答案，因为这是我理解的答案。我尝试在这里阅读 MS 的解释：http: [//msdn.microsoft.com/en-us/library/ms190349.aspx](http://msdn.microsoft.com/en-us/library/ms190349.aspx)，但我仍然没有完全理解，加上注释说“必须至少有一个空值键入的 NULL”让我有点害怕。谢谢大家。

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:49:49.943

```
SELECT name, lastname, p1, p2, p3, p4, CASE WHEN COALESCE(p1, p2, p3, p4) IS NULL THEN 1 ELSE 0 END AS nulltest, city, state, zip
FROM mytable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:48:45.780

尝试

```
select case
   coalesce(null,null,null,null,'X') 
   when 'X' then 1
   else 0
   end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T17:49:24.993

尝试这个：

```
 SELECT name, lastname, 
CASE WHEN  (p1 is null and p2 is null and p3 is null and p4 is null) then 1 
else 0 end , city, st, zip
    FROM mytable 
```

# ruby-on-rails - 多表继承与多态

> ID：11400301
> 
> 赞同：1
> 
> 时间：2012-07-09T17:45:22.473
> 
> 标签：ruby-on-rails, multiple-inheritance, polymorphic-associations

我正在创建一个应用程序，允许用户创建课程并在课程中包含不同类型的资源（文档、视频、测验）。我很难找出在课程与其资源之间建立关联的最佳方式。

现在，我有：

```
 class Course < AR::Base
      has_many :documents
      has_many :videos
      has_many :quizzes
    end

    class Document <AR::Base
      belongs_to :course
    end

    class Video <AR::Base
      belongs_to :course
    end

    class Quiz <AR::Base
      belongs_to :course
    end 
```

文档、视频和测验都有一些共同的属性（例如，名称、描述），但也有许多不同的属性。我考虑过使用 STI 并让它们继承自一个名为“Lessons”的类。我决定反对这种方法，因为每个类都需要多个控制器。

最终，我希望能够对属于课程的所有资源执行操作，例如将所有文档、视频和测验一起列出，并将它们显示为可排序的列表。

有关如何最好地设置此模型的任何建议。似乎我可以通过两种方式做到这一点：

*   反向多态 has_one 关联（参见[示例](https://gist.github.com/1242485)）
*   多表继承（参见[示例](http://mediumexposure.com/multiple-table-inheritance-active-record/)）

我是一个 Rails 菜鸟，所以我很难评估哪种方法最适合这种情况。任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:52:06.313

> 最终，我希望能够对属于课程的所有资源执行操作，例如将所有文档、视频和测验一起列出，并将它们显示为可排序的列表。

任何一种方法都是可行的，但是当我阅读此要求时，似乎最好使用 STI。STI 是 rails 中本机支持的功能，允许您在同一集合中查询和操作不同类型的资源。

# python - SQLAlchemy 中的右外连接

> ID：11400307
> 
> 赞同：11
> 
> 时间：2012-07-09T17:46:14.193
> 
> 标签：python, sql, sqlalchemy

我有两个表`beard`，`moustache`定义如下：

```
+--------+---------+------------+-------------+
| person | beardID | beardStyle | beardLength |
+--------+---------+------------+-------------+

+--------+-------------+----------------+
| person | moustacheID | moustacheStyle |
+--------+-------------+----------------+ 
```

我在 PostgreSQL 中创建了一个 SQL 查询，它将结合这两个表并生成以下结果：

```
+--------+---------+------------+-------------+-------------+----------------+
| person | beardID | beardStyle | beardLength | moustacheID | moustacheStyle |
+--------+---------+------------+-------------+-------------+----------------+
| bob    | 1       | rasputin   | 1           |             |                |
+--------+---------+------------+-------------+-------------+----------------+
| bob    | 2       | samson     | 12          |             |                |
+--------+---------+------------+-------------+-------------+----------------+
| bob    |         |            |             | 1           | fu manchu      |
+--------+---------+------------+-------------+-------------+----------------+ 
```

**询问：**

```
SELECT * FROM beards LEFT OUTER JOIN mustaches ON (false) WHERE  person = "bob"
UNION ALL
SELECT * FROM beards b RIGHT OUTER JOIN mustaches ON (false) WHERE  person = "bob" 
```

但是我不能创建它的 SQLAlchemy 表示。我尝试了几种从实施`from_statement`到的方法，`outerjoin`但没有一个真正奏效。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-01-24T15:27:50.023

在 SQL 中，`A RIGHT OUTER JOIN B`等价于`B LEFT OUTER JOIN A`. 因此，从技术上讲，API 中不需要`RIGHT OUTER JOIN`- 可以通过切换目标“可选择”的位置并加入“可选择”来做同样的事情。SQL Alchemy 为此提供了一个 API：

```
# this **fictional** API:
query(A).join(B, right_outer_join=True)  # right_outer_join doesn't exist in SQLA!

# can be implemented in SQLA like this:
query(A).select_entity_from(B).join(A, isouter=True) 
```

请参阅 SQLA [Query.join() 文档](https://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.join)，*“控制要加入的内容”*部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T16:50:41.837

根据[@Francis P](https://stackoverflow.com/users/1286013/francis-p)的[建议](https://stackoverflow.com/a/11400460/757449)，我想出了这个片段：

```
q1 = session.\
     query(beard.person.label('person'),
           beard.beardID.label('beardID'),
           beard.beardStyle.label('beardStyle'),
           sqlalchemy.sql.null().label('moustachID'),
           sqlalchemy.sql.null().label('moustachStyle'),
     ).\
     filter(beard.person == 'bob')

q2 = session.\
     query(moustache.person.label('person'),
           sqlalchemy.sql.null().label('beardID'), 
           sqlalchemy.sql.null().label('beardStyle'),
           moustache.moustachID,
           moustache.moustachStyle,
     ).\
     filter(moustache.person == 'bob')

result = q1.union(q2).all() 
```

但是，这可行，但您不能将其称为答案，因为它显示为 hack。这是 sqlalchemy 中应该存在的另一个原因`RIGHT OUTER JOIN`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-18T04:30:34.923

如果 A,B 是表，您可以
`SELECT * FROM A RIGHT JOIN B ON A.id = B.a_id WHERE B.id = my_id`
通过：
`SELECT A.* FROM B JOIN ON A.id = B.a_id WHERE B.id = my_id`
在 sqlalchemy 中实现：

```
from sqlalchemy import select

result = session.query(A).select_entity_from(select([B]))\
    .join(A, A.id == B.a_id)\
    .filter(B.id == my_id).first() 
```

例如：

```
# import ...

class User(Base):
    __tablenane = "user"

    id = Column(Integer, primary_key=True)
    group_id = Column(Integer, ForeignKey("group.id"))

class Group(Base):
    __tablename = "group"

    id = Column(Integer, primary_key=True)
    name = Column(String(100)) 
```

您可以使用以下代码通过用户 id 获取用户组名称：

```
# import ...
from sqlalchemy import select

user_group_name, = session.query(Group.name)\
    .select_entity_from(select([User]))\
    .join(Group, User.group_id == Group.id)\
    .filter(User.id == 1).first() 
```

如果您想要外部连接，请使用`outerjoin()`而不是`join()`.

这个答案是对前一个答案的补充（帖木儿的答案）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-08T13:32:47.023

这是我所拥有的，ORM 风格：

```
from sqlalchemy.sql import select, false

stmt = (
    select([Beard, Moustache])
    .select_from(
        outerjoin(Beard, Moustache, false())
    ).apply_labels()
).union_all(
    select([Beard, Moustache])
    .select_from(
        outerjoin(Moustache, Beard, false())
    ).apply_labels()
)

session.query(Beard, Moustache).select_entity_from(stmt) 
```

这似乎可以自己工作，但似乎不可能与另一个选择表达式一起加入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-08T01:13:10.593

`LEFT OUTER JOIN`不幸的是，SQLAlchemy 只为as提供 API [`.outerjoin()`](https://docs.sqlalchemy.org/en/13/orm/query.html#sqlalchemy.orm.outerjoin)。如上所述[，](https://stackoverflow.com/a/54350080/12644151)我们可以`RIGHT OUTER JOIN`通过反转 ; 的操作数`LEFT OUTER JOIN`得到a 例如。`A RIGHT JOIN B`是一样的`B LEFT JOIN A`。在 SQL 中，以下语句是等价的：

```
SELECT * FROM A RIGHT OUTER JOIN B ON A.common = B.common;
SELECT * FROM B LEFT OUTER JOIN A ON A.common = B.common; 
```

但是，在 SQLAlchemy 中，我们需要查询一个类然后执行`join`. 棘手的部分是重写 SQLAlchemy 语句以反转表。例如，下面前两个查询的结果是不同的，因为它们返回不同的对象。

```
# No such API (rightouterjoin()) but this is what we want.
# This should return the result of A RIGHT JOIN B in a list of object A
session.query(A).rightouterjoin(B).all()   # SELECT A.* FROM A RIGHT OUTER JOIN B ...

# We could reverse A and B but this returns a list of object B
session.query(B).outerjoin(A).all()        # SELECT B.* FROM B LEFT OUTER JOIN A ...

# This returns a list of object A by choosing the 'left' side to be B using select_from()
session.query(A).select_from(B).outerjoin(A).all()   # SELECT A.* FROM B LEFT OUTER JOIN A ...

# For OP's example, assuming we want to return a list of beard object:
session.query(beard).select_from(moustache).outerjoin(beard).all() 
```

只需添加答案，您就可以`select_from`从[SQLAlchemy 文档](https://docs.sqlalchemy.org/en/13/orm/query.html#sqlalchemy.orm.query.Query.select_from)中找到使用方法。

# python - 在 Python 中解析巨大的、编码错误的 XML 文件

> ID：11400308
> 
> 赞同：11
> 
> 时间：2012-07-09T17:46:21.963
> 
> 标签：python, xml, encoding, iterparse

我一直在研究解析外部 XML 文件的代码。其中一些文件很大，高达千兆字节的数据。不用说，这些文件需要被解析为流，因为将它们加载到内存中效率太低，并且经常导致 OutOfMemory 麻烦。

我使用了 miniDOM、ElementTree、cElementTree 库，目前正在使用 lxml。现在我有一个工作的、非常节省内存的脚本，使用`lxml.etree.iterparse`. 问题是我需要解析的一些 XML 文件包含编码错误（它们宣传为 UTF-8，但包含不同编码的字符）。使用`lxml.etree.parse`时可以通过使用`recover=True`自定义解析器的选项来修复它，但`iterparse`不接受自定义解析器。（另见：[这个问题](https://stackoverflow.com/questions/2352840/parsing-broken-xml-with-lxml-etree-iterparse)）

我当前的代码如下所示：

```
from lxml import etree
events = ("start", "end")
context = etree.iterparse(xmlfile, events=events)
event, root_element = context.next() # <items>
for action, element in context:
    if action == 'end' and element.tag == 'item':
    # <parse>
    root_element.clear() 
```

`iterparse`遇到错误字符时出错（在这种情况下，它是 a `^Y`）：

```
lxml.etree.XMLSyntaxError: Input is not proper UTF-8, indicate encoding !
Bytes: 0x19 0x73 0x20 0x65, line 949490, column 25 
```

我什至不想解码这些数据，我可以放弃它。但是我不知道有什么方法可以跳过该元素 - 我尝试过`context.next`并`continue`在 try/except 语句中。

任何帮助，将不胜感激！

**更新**

一些附加信息：这是 iterparse 失败的行：

`<description><![CDATA:[musea de la photographie fonds mercator. Met meer dan 80.000 foto^Ys en 3 miljoen negatieven is het Muse de la...]]></description>`

根据 etree，错误发生在 bytes `0x19 0x73 0x20 0x65`。
根据 hexedit，`19 73 20 65`转换为 ASCII`.s e`
在`.`这个地方应该是一个撇号（foto's）。

我还发现[了这个问题](https://stackoverflow.com/questions/1325379/hexadecimal-0x19-is-an-invalid-character)，它没有提供解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T18:01:52.417

如果问题是实际的字符编码问题，而不是格式错误的 XML，最简单且可能最有效的解决方案是在文件读取点处理它。像这样：

```
import codecs
from lxml import etree
events = ("start", "end")
reader = codecs.EncodedFile(xmlfile, 'utf8', 'utf8', 'replace')
context = etree.iterparse(reader, events=events) 
```

这将导致非 UTF8 可读字节被替换为“？”。还有其他一些选择；有关更多信息，请参阅编解码器模块的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:43:38.220

由于问题是由*非法*XML 字符引起的，在本例中是 0x19 字节，我决定将它们去掉。[我在这个网站上](http://lethain.com/stripping-illegal-characters-from-xml-in-python/ "在 Python 中从 XML 中去除非法字符")找到了以下正则表达式：

```
invalid_xml = re.compile(u'[\x00-\x08\x0B-\x0C\x0E-\x1F\x7F]') 
```

我编写了这段代码，在保存 xml 提要的同时删除非法字节：

```
conn = urllib2.urlopen(xmlfeed)
xmlfile = open('output', 'w')

while True:
    data = conn.read(4096)
    if data:
        newdata, count = invalid_xml.subn('', data)
        if count > 0 :
            print 'Removed %s illegal characters from XML feed' % count
        xmlfile.write(newdata)

    else:
        break

xmlfile.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-01T00:37:06.123

我使用了一段类似的代码：

```
 illegalxml = re.compile(u'[\x00-\x08\x0b\x0c\x0e-\x1F\uD800-\uDFFF\uFFFE\uFFFF]') 
```

...

```
illegalxml.sub("?",mystring) 
```

...

但是，这不适用于所有可能的字符串（400+MB 字符串）。

对于最终解决方案，我使用如下解码/编码：

```
outxml = "C:/path_to/xml_output_file.xml"
with open(outxml, "w") as out:
    valid_xmlstring = mystring.encode('latin1','xmlcharrefreplace').decode('utf8','xmlcharrefreplace')
    out.write(valid_xmlstring) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-08T10:30:26.487

我的xml文件中的char“”也有类似的问题，这也是无效的xmlchar。这是因为在 xml 版本 1.0 中，不允许使用 �、 等字符。规则是不允许所有字符组合为正则表达式 '&#x[0-1]?[0-9A-E]'。我的目的是纠正一个巨大的 xml 文件中的无效字符，根据 Rik 的回答，我对其进行了如下改进：

```
import re

invalid_xml = re.compile(r'&#x[0-1]?[0-9a-eA-E];')

new_file = open('new_file.xml','w') 
with open('old_file.xml') as f:
    for line in f:
        nline, count = invalid_xml.subn('',line)
        new_file.write(nline) 
new_file.close() 
```

# solidworks - Solidworks 有像 Rhino 和 AutoCAD 这样的命令行吗？

> ID：11400314
> 
> 赞同：0
> 
> 时间：2012-07-09T17:46:44.900
> 
> 标签：solidworks

如果是这样，有人知道如何打开它吗？如果没有，有人知道管理愤怒情绪的好医生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:11:41.570

[这](http://help.solidworks.com/2012/English/solidworks/acadhelp/command_line.htm)是我所知道的唯一命令行。

# css - 背面可见性在 IE10 中不起作用 - 在 webkit 中工作正常

> ID：11400317
> 
> 赞同：5
> 
> 时间：2012-07-09T17:47:20.527
> 
> 标签：css, css-transitions, css-transforms, internet-explorer-10

我正在构建一个简单的纯 CSS '卡片翻转' 动画，它*必须*在 IE10 中工作，但遗憾的是我写的内容没有。

[此处为 jsFiddle 演示](http://jsfiddle.net/felixthehat/7FeEz/1/)或此处为[示例 html zip](https://www.dropbox.com/s/kbp8rh0sbh49ixe/backside%20vis%20test%20case.zip)

[我可以从他们的演示](http://ie.microsoft.com/testdrive/Graphics/hands-on-css3/hands-on_3d-transforms.htm)中看到背面可见性在 IE10 中有效，所以也许我只是忽略了一些愚蠢的事情，也许一双新的眼睛可能会有所帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T18:42:43.133

好吧，一些 Microsoft IE 开发人员看到了我的推文并已经加入了修复程序！

显然 IE10 不支持 preserve-3d，他们掀起了[这个 jsFiddle 演示](http://jsfiddle.net/reybango/ax2Mc/)

非常感谢[@reybango](https://twitter.com/reybango/)和[@sgalineau](https://twitter.com/sgalineau/)的帮助 - 非常感谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T17:24:23.777

我只将背面可见性应用于子元素，IE10 无论如何都会显示背面。删除 preserve-3d 会破坏 3d 动画的主要视觉功能之一，因此它并不是真正可行的解决方法。

不幸的是，@reybango 和@sgalineau 提到的演示将效果外观从 3d 旋转更改为简单的 2d 宽度变化，因此这也不是一个可行的解决方法。

底线是 IE10 需要升级以支持所写的 CSS 3d 动画规范。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T17:36:50.967

这似乎是[CSS3 - 3D Flip Animation - IE10 transform-origin: preserve-3d workaround的副本](https://stackoverflow.com/questions/13474210/css3-3d-flip-animation-ie10-transform-origin-preserve-3d-workaround/14327666#14327666)

当应用于元素本身时，背面可见性在 IE10 上有效（如果应用于父元素，它将不起作用）。您应该将它组合在同一个变换属性中，如下所示：

```
。背部{
  变换：透视（1000px）旋转Y（0度）；
}
。正面{
  变换：透视（1000px）旋转Y（180度）；
}

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T09:44:35.933

（这是为了评论为什么微软的 360° 转弯示例有效。）

首先看一下示例本身，MS 的解决方法从初始代码中删除了 preserve-3d transform-style 属性。

**结果 IE10 不支持 preserve-3d**，他们在 msdn 上建议了这样的解决方法：

[http://msdn.microsoft.com/en-us/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property](http://msdn.microsoft.com/en-us/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property)

将变换样式设置为默认的“平面”值，子元素将继承父旋转。因此，卡片正面/背面都旋转到 360°（= 0°），这里的技巧是背面将出现在顶部，因为它在 DOM 中稍后出现。

为了让这一点更加明显，我`opacity:0.5`在两个示例的背面都添加了，现在您可以看到真正发生了什么：

[http://jsfiddle.net/7FeEz/12/](http://jsfiddle.net/7FeEz/12/)

[http://jsfiddle.net/ax2Mc/71/](http://jsfiddle.net/ax2Mc/71/)

所以 MS 方式在某些场景下会起作用，但并非所有场景都没有真正支持 preserve-3d

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-03T23:28:54.343

这是我的解决方案。 `[http://jsfiddle.net/UwUry/531/](http://jsfiddle.net/UwUry/531/)`

 `我在 IE 11 和 Chrome 上试过。它就像一个翻盖盒。`

# z3 - 如何在用户理论插件中访问理论算术中的vars？

> ID：11400324
> 
> 赞同：1
> 
> 时间：2012-07-09T17:48:02.817
> 
> 标签：z3

在用户理论插件中，假设我有一个客户排序“T”，我在 T 上定义了一个带有“ `Z3_func_decl`”的函数“f”，它接受排序 T 的参数并返回排序 Int（排序由“ `Z3_mk_int_sort`”制成）。我对返回的 Int 值还有其他限制。

在搜索中，我想在一些回调（例如`new_assignment`或`new_eq`回调）中捕获 Int 返回值的具体值，以便我可以做出额外的断言来解决排序 T 的参数值。但问题是那些回调不会被调用在搜索中。

我看了一下`Z3_context`SAT解决方案。在理论算术中，我看到：

> vars: v0 #24 lo: -oo, up: 4, value: 0, occs: 0, atom: 1, int, non-base, shared: 0, activity: 0, unassigned: 0, rel: 1, def: #24

“#24”是我的函数，“up”中显示的“4”是我函数返回值的SAT解。

我的问题是如何在搜索中获得值“4”。我试图在回调的#24 的等价类中找到它，`final_check`但没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:13:26.600

不幸的是，你不能在 Z3 中做到这一点。一个理论无法访问其他理论中使用的内部数据结构。理论只知道共享项是否相等（不相等）。这个设计决策允许我们在不影响其他人的情况下改变理论的实现。算术理论就是一个很好的例子。我们将用更高效的实现替换当前的实现。新的实现将使用不同的数据结构。在上面的示例中， `lo`和`up`是 term 的已知下限和上限`#24`。`4`Z3 选择（上限）作为 的解释只是一个巧合`#24`。

而且，在Z3的当前版本中，模型构建是在Z3建立问题后开始的。因此，理论算术赋予的实际解释不能真正用于帮助其他理论。

# jquery - 如何使用 jQuery Checkboxs 选择然后打开和/或打印存储在内容系统中的文档（获取 .pdf 文档的 html 链接）

> ID：11400325
> 
> 赞同：0
> 
> 时间：2012-07-09T17:48:05.210
> 
> 标签：jquery, jquery-selectors, checkbox

我是这一切的菜鸟并且被卡住了！

我有一张像这样的桌子：

```
<tr class="req">
        <td><input name="checkbox" type="checkbox" id="Pform70" /></td>
            <td align="left" ><a     href="https://www.yadayada.com/uat088922.pdf" title="Form Title" id="Pform70" target=new>Pform70</a></td>
    <td>Required</td>
    <td>Form Title </td>
    <td>ksdjasdjf;alsdjfal; </td> 
```

所以 - 我想在表格上方有一个按钮，单击该按钮将打开所有已检查的文档或打印已检查的文档。

我一直在寻找，靠近，但还不够靠近。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:25:59.177

您可以将选定（选中）的项目下载到组合的 .zip 文件中。

首先，创建一个包含文件列表的表单：

```
<form action="download.php" method="get">
<table>
<tr>
  <td><input type="submit" name="mysubmit" value="Download!"></td>
</tr>
<tr class="req">
  <td><input type="checkbox" name="file[0]" id="Pform70" /></td>
  <td align="left"><a href="https://www.yadayada.com/uat088922.pdf" title="Form Title" id="Pform70" target=new>Pform70</a></td>
  <td>Required</td>
  <td>Form Title</td>
  <td>ksdjasdjf;alsdjfal;</td>
</tr>
</table>
</form> 
```

注意复选框名称是一个数组！

这是下载.php：

```
if (!empty($_POST['file'])) {
    // open zip
    $zip_path = '/path/to/created/download.zip';
    $zip = new ZipArchive(); 
    if ($zip->open($zip_path, ZIPARCHIVE::CREATE) !== TRUE) {
        die ("An error occurred creating your ZIP file.");
    }  
    // checkbox values dont matter because only checked boxes show up in POST data
    foreach ($_POST['file'] as $key => $val) {
        // generate filename to add to zip
        $filename = '/path/to/php/file' . $key . '.php';
        $zip->addFile($filename) or die ("ERROR: Could not add the file $filename");  
    }
    $zip->close();

    //===============
    // force download
    //===============
// assume you have a full path to file stored in $zip_path
if (!is_file($zip_path)) {
  die('The file appears to be invalid.');
}

$zip_path = str_replace('\\', '/', realpath($zip_path));
$filesize = filesize($zip_path);
$filename = substr(strrchr('/'.$zip_path, '/'), 1);
$extension = strtolower(substr(strrchr($zip_path, '.'), 1));

// use this unless you want to find the mime type based on extension
$mime = array('application/octet-stream');

header('Content-Type: '.$mime);
header('Content-Disposition: attachment; filename="'.$filename.'"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: '.sprintf('%d', $filesize));
header('Expires: 0');

// check for IE only headers
if (isset($_SERVER['HTTP_USER_AGENT']) && (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false))) {
  header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
  header('Pragma: public');
} else {
  header('Pragma: no-cache');
}

$handle = fopen($filepath, 'rb');
fpassthru($handle);
fclose($handle);

} // close $_POST check 
```

您可以在 php.net 文档中阅读有关[ZipArchive的更多信息。](http://us2.php.net/manual/en/class.ziparchive.php)

# javascript - 在 jQuery UI Draggable 延迟后启动拖动而无需移动鼠标？

> ID：11400326
> 
> 赞同：4
> 
> 时间：2012-07-09T17:48:05.730
> 
> 标签：javascript, jquery, jquery-ui, draggable

我有一个像这样的可拖动：

```
$(".tab li").draggable({
    revert: true,
    delay: 1000,
    opacity: .75,
    helper: "clone",
    appendTo: "body"
})
.bind("dragstart", this.doSomething)
.bind("dragstop", this.undoSomething); 
```

因此，在按住鼠标一秒钟后，就可以开始拖动了。只要您在 1 秒后移动鼠标，它就可以正常工作。移动鼠标后，dragstart 事件会立即按应有的方式发送。我想要的是“dragstart”在 1 秒后触发，即使您不拖动鼠标也是如此。

我知道我可以这样做：

```
.bind("mousedown", this.setSomeIntervalAndWait) 
```

但我需要访问作为 draggable() 的一部分创建的 ui.draggable 元素，因此 mousedown/mouseup 解决方案将不起作用。

如果不修改 jQueryUI 以在延迟而不是鼠标移动时触发事件，这是否可能？我可以使用超时来破解一些东西，克隆对象，定位它并在“dragstart”上删除它，但我希望有一些不那么复杂的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-24T08:55:04.007

在最新的 JQuery UI Draggable 中，现在有一个[延迟](http://api.jqueryui.com/draggable/#option-delay)选项。查看[演示](http://jqueryui.com/draggable/#delay-start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:02:14.807

答案很简单。JQuery UI 的可拖动交互不支持这一点，所以你要么需要修改 JQuery UI，要么做一些你已经暗示过的事情。我会选择两者中的后者，除非你知道这是你要经常重复使用的*东西*。我想说实现类似的最好方法是使用[`bind`](http://api.jquery.com/bind/)（pre-1.7）或[`on`](http://api.jquery.com/on/)（post-1.7）在 JQuery 中实现自定义事件处理程序。您甚至可以实现自己的小[JQuery 插件，](http://docs.jquery.com/Plugins/Authoring)该插件实现`draggable`但添加您的事件。

如果您想要比这更多的细节，或者想要一个如何编写这样一个插件的示例，请告诉我。

# jquery - 模拟 jQuery 偏移函数的回调？

> ID：11400327
> 
> 赞同：1
> 
> 时间：2012-07-09T17:48:06.723
> 
> 标签：jquery, callback, offset

我正在使用 jQuery`offset()`函数定位一个 DIV。为了避免 DIV 在不正确的位置闪烁，我在定位之前隐藏了 DIV，然后再次显示 DIV。但是，存在同步问题，在某些平台（例如 iPhone）上，我仍然可以看到闪存。模拟函数的回调函数的最佳方法是`offset()`什么？

```
$('div').hide();
y = Math.round(($(window).height() - $('div').outerHeight())/2);
$('div').offset({top : y});
$('div').fadeIn(); 
```

**编辑**

此外，如果禁用 JavaScript，此元素仍然可见，这一点很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:16:06.357

您可以`<div>`从一开始就将您的元素渲染到视口之外，然后在隐藏它之前重新定位它并继续设置它的偏移量并将其淡入：

### CSS：

```
.outside-viewport {
    position: absolute;
    left: -10000px;
} 
```

### Javascript：

```
var $div = $("div.outside-viewport");
$div.css({
    position: "relative",
    left: "0px"
}).hide().offset({
    top: ($(window).height() - $div.outerHeight()) / 2
}).fadeIn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:42:49.180

在这种情况下，jQuery 的偏移量的奇怪之处在于，Frederic 的上述建议是唯一有效恢复元素原始左偏移量的建议。jQuery 在隐藏元素和偏移方面存在一些问题。例如，如果您使用`position: static`，根据 CSS 规范是正确的，则左侧偏移量仍将是 -10000 像素，尽管该元素将在视口中可见。只是一个注释。我希望它会有用。:-)

# iphone - 如何在 UILabel 中插入图像，或者让它看起来像我一样？

> ID：11400329
> 
> 赞同：3
> 
> 时间：2012-07-09T17:48:17.840
> 
> 标签：iphone, ios, uilabel

我正在编写一个基于几何的应用程序。在应用程序的某一时刻，会有一个带有一些自定义单元格的 UITableView。这些单元格包含 UILabel。在这些标签的文本中，我想插入看起来像这两个三角形的符号：（[来源：][[wiley.com](https://media.wiley.com/Lux/73/258473.image0.jpg)][）][![图片](../Images/8007878f1d328c0c3cdf8301e102e1f0.png)](https://i.stack.imgur.com/gyDSC.jpg)

但是，由于我在任何 Apple 字体中都找不到这些符号，有没有办法在字符串中插入图像来代替符号？

这是我要做什么的（***非常）粗略的想法（实际的表不会是静态的）：***

![图2](../Images/c9af60bb8198a1869a212731a9370e67.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:29:20.873

好的，我明白你想要做什么。我认为，关键是继续向单元格添加控件，并在进行时计算宽度。

首先，我建议使用一种数据结构来保存您的单元格内容。一个简单的数组就可以完成这项工作。我通常将这些东西作为 ivar：

```
@interface LabelWithImagesViewController ()
{
    NSMutableArray *_cells;
}
@end 
```

然后用你想要的文本和图像填充这个数组。我正在做单行，但你可以为你需要的每一行重复。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _cells = [[NSMutableArray alloc] init];

    [_cells addObject:[[NSArray alloc] initWithObjects:
                       [UIImage imageNamed:@"triangle.png"],
                       @"CAT",
                       [UIImage imageNamed:@"semiequal.png"],
                       [UIImage imageNamed:@"triangle.png"],
                       @"DOG",
                       @"  If",
                       [UIImage imageNamed:@"triangle1.png"],
                       @"then",
                       [UIImage imageNamed:@"triangle2.png"],
                       nil]];
} 
```

然后，您需要创建您的单元格：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return _cells.count;
}

#define kEquationTag 100
#define kCellHeight 44

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"equationCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UIView *equationContainer;

    if (cell == nil)
    {
        // if we don't have a cell create it, including the frame to hold our custom stuff

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        equationContainer = [[UIView alloc] initWithFrame:cell.contentView.bounds];
        equationContainer.tag = kEquationTag;
        [cell.contentView addSubview:equationContainer];
    }
    else
    {
        // if we are dequeing one that already exists, let's get rid of the old custom stuff

        equationContainer = [cell.contentView viewWithTag:kEquationTag];
        for (UIView *view in equationContainer.subviews)
        {
            [view removeFromSuperview];
        }
    }

    // Configure the cell...

    NSArray *cellContents = [_cells objectAtIndex:indexPath.row];

    NSUInteger x = 0;
    UIFont *font = [UIFont systemFontOfSize:12.0];

    for (NSObject *obj in cellContents)
    {
        if ([obj isKindOfClass:[NSString class]])
        {
            NSString *text = (NSString *)obj;
            CGSize size = [text sizeWithFont:font];
            UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(x, (kCellHeight - size.height)/2.0, size.width, size.height)];
            label.text = text;
            label.font = font;
            [equationContainer addSubview:label];
            x += size.width;
        } 
        else if ([obj isKindOfClass:[UIImage class]])
        {
            UIImage *image = (UIImage *)obj;
            UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(x, (kCellHeight - image.size.height) / 2.0, image.size.width, image.size.height)];
            imageView.image = image;
            [equationContainer addSubview:imageView];
            x += image.size.width;
        }
    }

    return cell;
} 
```

这产生：

![在此处输入图像描述](../Images/c3ce13c6d2b601ebd3e71b62857ffa94.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:38:33.243

您可以使用所需的确切符号创建自己的字体。试试这个： http: [//glyphdesigner.71squared.com](http://glyphdesigner.71squared.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T18:14:04.097

1.  制作一个 UILabel 并为每个字母使用该 UILabel 的实例。
2.  使用一些关于图像视图矩形的几何逻辑来放置字母而不考虑大小......例如

    ```
     UILabel *aLetterLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 35, 35)];
        aLetterLabel.text = @"A";

        //centered top
        aLetterLabel.frame = CGRectMake((shapeImage.frame.origin.x +  (shapeImage.frame.size.width/2)), shapeImage.frame.origin.y, 35, 35);

        //centered
        aLetterLabel.frame = CGRectMake((shapeImage.frame.origin.x + (shapeImage.frame.size.width/2)), (shapeImage.frame.origin.y + (shapeImage.frame.size.height/2)), 35, 35);

        //cenetered bottom
        aLetterLabel.frame = CGRectMake((shapeImage.frame.origin.x + (shapeImage.frame.size.width/2)), (shapeImage.frame.origin.y+(shapeImage.frame.size.height-35)), 35, 35);

        //left center align
        aLetterLabel.frame = CGRectMake(shapeImage.frame.origin.x, (shapeImage.frame.origin.y + (shapeImage.frame.size.height/2)), 35, 35); 
    ```

把这些写得非常快，作为概念证明……随时修改，等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T17:52:41.990

您不能在 UILabel 中插入图像。但是你可以在你的 UITableView 的自定义单元格中添加一个 UIImageView ，然后在里面放一个 UIImage 。

# excel - 如何更改excel中的x轴标签？

> ID：11400337
> 
> 赞同：1
> 
> 时间：2012-07-09T17:48:43.237
> 
> 标签：excel

现在，我的绘图的 x 轴标签是：0、2、4、6、8、10。

我想将其更改为年份：2013、2014、2015 等...

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:56:31.373

我在这里做了很多假设，但是您应该指定轴的类别名称。例如：

```
ActiveSheet.ChartObjects(1).Chart.Axes(xlCategory, xlPrimary).CategoryNames = Range("A2:A25") 
```

# android - 将所有应用程序向右对齐

> ID：11400338
> 
> 赞同：0
> 
> 时间：2012-07-09T17:48:43.563
> 
> 标签：android, xml

我已经搜索了如何将应用程序对齐到右侧以及从右到左写入的文本。
我发现并成功做的唯一一件事是通过添加 EditText 和 Button 使文本从右到左书写`android:gravity="right"`
，但如果从左到右，它们仍然在行中排序。
activity_main.xml 文件 -

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:gravity="right"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <EditText android:id="@+id/text_message"
     android:gravity="right"
     android:layout_weight="1.0"
     android:layout_width="0dp"
     android:layout_height="wrap_content"
     android:hint="@string/text_message" />

    <Button android:layout_height="wrap_content"
     android:gravity="right"
     android:layout_width="wrap_content"
     android:text="@string/send_button"
     android:onClick="ButtonClicked" />

    <Button android:layout_height="wrap_content"
     android:gravity="right"
     android:layout_width="wrap_content"
     android:text="@string/delete_button"
     android:onClick="DeleteClicked" />

</LinearLayout> 
```

我在“排序是从左到右”的意思是 EditText 写在“发送”按钮之前，而“发送”按钮 id 写在“删除”按钮之前 - 所以显示的是
“[ ***_* ___** *x* ] [Send][Delete]" 而不是 "[Delete][Send][ ***_* ____** ]"，就像我想要的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:58:40.623

您可以使用代替`LinearLayout`，`RelativeLayout`并使用给您的按钮一些 id

```
android:id="@+id/your_button_id 
```

然后使用标签`android:layout_toRightOf`和`android:layout_toLeftOf`. 在你的情况下，是这样的：

```
<?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" >

<Button android:id="@+id/delete_button" 
 android:layout_height="wrap_content"
 android:layout_width="wrap_content"
 android:text="@string/delete_button"
 android:onClick="DeleteClicked" />

<Button android:id="@+id/send_button" 
 android:layout_height="wrap_content"
 android:layout_width="wrap_content"
 android:layout_toRightOf="@+id/delete_button"
 android:text="@string/send_button"
 android:onClick="ButtonClicked" />

<EditText android:id="@+id/text_message"
 android:layout_weight="1.0"
 android:layout_width="0dp"
 android:layout_toRightOf="@+id/send_button"
 android:layout_height="wrap_content"
 android:hint="@string/text_message" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:51:01.347

尝试使用

```
android:layout_gravity 
```

您也可以只使用 RelativeLayout 添加

```
android:align_ParentRight="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:22:34.243

改变

```
android:gravity="right" 
```

到

```
android:layout_gravity="right" 
```

# sharepoint - SharePoint：如何将业务数据列表中的筛选器与外部列表相结合

> ID：11400344
> 
> 赞同：0
> 
> 时间：2012-07-09T17:49:33.343
> 
> 标签：sharepoint, bcs

SharePoint 外部列表 Web 部件允许用户编辑/查看/删除列表中的项目，业务数据列表 Web 部件有一个过滤器允许用户搜索外部列表，但结果是只读的。我想知道编程或创建一个可扩展的过滤器，如业务数据中的过滤器来搜索外部列表，结果显示为可编辑的外部列表。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:01:17.843

尝试阅读这篇博文。它非常接近您想要实现的目标。

[http://arsalkhatri.wordpress.com/2012/01/07/external-list-with-bcs-search-filters-finders/](http://arsalkhatri.wordpress.com/2012/01/07/external-list-with-bcs-search-filters-finders/)

# session - 在 Stripes 中创建无会话页面

> ID：11400345
> 
> 赞同：1
> 
> 时间：2012-07-09T17:49:39.383
> 
> 标签：session, stripes, session-less

我有一个 Stripes 网站，我将拥有一个会获得大量点击的页面，并且我被要求确保当有人导航到该页面时，Stripes 不会创建用户会话。

有没有办法确保当用户进行某个操作时不会创建会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:53:03.577

您需要创建一个拦截器，并且在调用您不想创建会话的任何操作时。只需查看响应是否在标头中包含“SET-Cookie”，如果它是删除该标头内容。我希望你的问题会得到解决。

问候
基肖尔

# c# - MVC 中的非模型驱动返回页面

> ID：11400352
> 
> 赞同：0
> 
> 时间：2012-07-09T17:49:59.050
> 
> 标签：c#, asp.net-mvc-3

我正在创建我的第一个 MVC 网站。在网站上，我需要创建一个页面，允许用户从存储在我的模型数据库中的对象中进行选择，输入一些附加数据（在文本字段中），然后单击一个按钮并进行计算，返回一个结果表。这些结果将不会存储在数据库中。此外，此数据表可能会根据选择的对象而改变列数等。

使用 MVC 执行此操作的最佳方法是什么？它不是标准的 CRUD 操作，我研究的所有 MVC 教程都只真正涵盖了 CRUD 操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:54:40.377

在您的视图中，只需生成所需的 HTML 代码。在下文中，我假设`SelectedObject`是您的用户选择呈现为表格的对象。

```
<table>
@for (int row = 0; row < SelectedObject.Rows; row++) {
    <tr>
    @for (int col = 0; col < SelectedObject.Columns; col++) {
        <td>@SelectedObject.GetDataFor(row, col)</td>
    @}

    </tr>
@}
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:54:59.933

ASP.NET MVC 页面可以对任何类（包括 .Net 类）进行强类型化或完全非类型化，这没什么大不了的。

在你的位置，我会使用一个`DataTable`对象（来自 System.Data）。您还可以签署结构或将字典列表传递给视图，但要实用。

您的操作（在控制器处）：

```
[HttpPost]
public ActionResult DoMath(int yourArguments)
{
    System.Data.DataTable yourTabularResults = new System.Data.DataTable();

    //your magic

    return View(yourTabularResults);
} 
```

而你的观点：

```
@model System.Data.DataTable

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>DoMath</title>
</head>
<body>
    <div>
        @foreach (System.Data.DataRow currentLine in Model.Rows)
        {
            //do your job
        }
    </div>
</body>
</html> 
```

问候

# joomla2.5 - 如何在 Joomla 中创建新闻代码 XML 文件？

> ID：11400355
> 
> 赞同：-1
> 
> 时间：2012-07-09T17:50:21.340
> 
> 标签：joomla2.5, news-ticker

我得到了这个扩展，我只想知道如何从 XML 文件中获取新闻代码，以及我应该如何创建这个文件？

我试过这个，但它不工作。

XML 文件

[http://www.4shared.com/document/uNJ9sdmD/newsxml.html](http://www.4shared.com/document/uNJ9sdmD/newsxml.html)

扩展链接

[http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/6633?qh=YToxMDp7aTowO3M6NDoibmV3cyI7aToxO3M6MzoibmV3IjtpOjI7czo3OiJuZXduZXNzIjtpOjM7czo1OiInbmV3cyI7aTo0O3M6NToibmV3J3MiO2k6NTtzOjY6Im5ld2VseSI7aTo2O3M6NToibmV3cyciO2k6NztzOjY6Im5ld3MnLCI7aTo4O3M6NjoiJ25ldycsIjtpOjk7czo2OiInbmV3cyciO30%3D](http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/6633?qh=YToxMDp7aTowO3M6NDoibmV3cyI7aToxO3M6MzoibmV3IjtpOjI7czo3OiJuZXduZXNzIjtpOjM7czo1OiInbmV3cyI7aTo0O3M6NToibmV3J3MiO2k6NTtzOjY6Im5ld2VseSI7aTo2O3M6NToibmV3cyciO2k6NztzOjY6Im5ld3MnLCI7aTo4O3M6NjoiJ25ldycsIjtpOjk7czo2OiInbmV3cyciO30%3D)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:06:12.250

首先创建 XML 文件并将其插入正确的目录 /modules/mod_highlighter_gk4/xml --> 这是您需要插入文件的位置。您可以在该文件夹中找到一个名为 Sample 的示例 XML 文件，该文件准确地告诉您如何格式化 XML 文件。是这样的：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>

    <highlighter>    

        <item>

        <title>Title 1</title>

            <desc>Item description 1</desc>

            <link>http://item1.title.com</link>  

        </item>

<item>

        <title>Title 1</title>

            <desc>Item description 1</desc>

            <link>http://item1.title.com</link>  

        </item> 
```

在模块本身上，首先确保选择“数据源”上的 XML 文件。然后在 XML File 选项上输入您创建的 XML 文件的名称，它应该可以工作。

您也可以从他们的网站上找到更多信息。 [http://www.gavick.com/forums/highlighter.html](http://www.gavick.com/forums/highlighter.html)

# xml - XML 格式的问题

> ID：11400362
> 
> 赞同：2
> 
> 时间：2012-07-09T17:50:55.507
> 
> 标签：xml, jaxb

我正在创建一个通过 xml 与服务器通信的网站。在我的本地主机中，一切正常。虽然将我的网站而不是这种 xml 格式上传到服务器时：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
  <quser xmlns="http://www..." xmlns:atom="http://www.w3.org/2005/atom">              
   <username>name</username>
</quser> 
```

我正在服用这个：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
   < :quser xmlns: ="http://www2...." xmlns:atom="http://www.w3.org/2005/atom">
  < :username>readered</ :username>
  <:quser> 
```

我在我的模型中声明了以下 package-info.class

```
@javax.xml.bind.annotation.XmlSchema (
  namespace="http://www..",
  elementFormDefault=XmlNsForm.QUALIFIED,
  xmlns = { 
    @javax.xml.bind.annotation.XmlNs( prefix=" ", namespaceURI="http://www.."),
    @javax.xml.bind.annotation.XmlNs( prefix="atom" ,namespaceURI="http://www.w3.org/2005/atom")
   }
 )

  package model;
  import javax.xml.bind.annotation.*; 
```

正如我在我的本地主机中告诉你的那样工作得非常好，但是在服务器中即使我更改了前缀（只是为了测试我将它设置为前缀 =“xs”）也不会采用这些更改。只有在我的本地主机中采用它。如果您认为我在我的 loclhost 中所做的更改，当我在服务器上调试和上传代码时应该包含它们，那么它非常有线。

此外，我意识到我在 WEB-INF 中忘记了一些 JAXB 库。只是为了测试我将我的库插入到主程序库中。然后我在我的本地主机中使用了与服务器中相同的 xml 格式。所以我决定从这两个地方删除这些库。在此之后，在我的本地主机中一切正常，但在服务器中却没有。如果有人遇到或知道与此问题有关的事情，请给我一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:08:37.603

尝试删除前缀声明中的空格：

这

```
@javax.xml.bind.annotation.XmlNs( prefix="", namespaceURI="http://www..ckp"), 
```

代替

```
@javax.xml.bind.annotation.XmlNs( prefix=" ", namespaceURI="http://www..ckp"), 
```

# nhibernate - 无法解析属性：日期：使用 DateTimeOffset (NHibernate 3.2.0.4000)

> ID：11400363
> 
> 赞同：0
> 
> 时间：2012-07-09T17:51:00.977
> 
> 标签：nhibernate, linq-to-nhibernate

我最近在尝试访问`Date`属性的`DateTimeOffset`属性时从 NHibernate 得到了一个异常。

```
var v1 = nhSession.Query<MyType>.Where(o => o.DateTimeOffsetProperty.Date == DateTimeOffset.Now.Date).ToList(); 
```

我原以为这会“奏效”。这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:51:01.600

我创建了一个 HQL 生成器，它执行以下操作`BuildHql`：

```
return p_treeBuilder.MethodCall(
    "date"
  , new HqlExpression[] { (HqlExpression) p_visitor.Visit(p_expression) }
); 
```

这似乎有效，但我想知道这是否已经内置并且我错过了。谢谢！

# scala - 查看抽象参数的界限：一个关于排序的用例

> ID：11400368
> 
> 赞同：0
> 
> 时间：2012-07-09T17:51:27.223
> 
> 标签：scala

我有一个容器系列，形式为

```
trait Value {
  type Internal
  implicit def order:Internal => Ordering[Internal]
  def value:Internal
} 
```

我希望能够使用 Internal 类型的排序来为 Value 的特定子类型定义排序，例如：

```
object Value {

  implicit def order[V <: Value]:Ordering[V] = Ordering((_:V).value)

} 
```

但是，编译器说 V#Internal 没有可用的隐式排序，即使在 trait 中指定了这样的排序。

有没有办法实现我想要做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:38:46.690

你需要一个类型约束`Internal`来确保它有一个`Ordering`. 如果您定义`Value`为 a ，这很容易`class`：

```
abstract class Value[Internal: Ordering] {
  def value: Internal
} 
```

作为一个特征，我不相信直接应用这样的约束是可能的，但你可以要求`Ordering`提供一个合适的：

```
trait Value {
  type Internal
  def value: Internal
  implicit val ord: Ordering[Internal]
} 
```

并用作

```
class Foo extends Value {
  type Internal = Int
  def value = 42
  implicit val ord = Ordering[Internal]  // Ordering's apply method
} 
```

# vba - 使用VBA将行复制到excel中的另一个工作表

> ID：11400369
> 
> 赞同：0
> 
> 时间：2012-07-09T17:51:37.820
> 
> 标签：vba, excel

首先，我从未使用过 VBA（或 VB），所以请记住这一点。我正在尝试将一行复制到我的工作簿中的另一张纸上。因此，只要 sheet1 中第 2 行发生任何更改，则应将该行复制到 sheet2 的第 2 行中。如果在 sheet1 中修改了第 3 行，则应在 sheet2 上修改第 5 行。我希望 sheet2 上的每一行之间有一个空行。我将尝试使用 VBA 创建一个新表来放置在这个空行中。无论如何，我的 Selection.Paste 行出现错误。我对 VBA 的了解非常有限（价值一个小时），所以我可能完全不知道我想做的事情。

```
Private Sub Worksheet_Change(ByVal Target As Range)
 'Do not worry about column headers
  If Target.Row = 1 Then Exit Sub

  'On Error GoTo ErrHandler
  Application.EnableEvents = False 'This might be necessary?

  Sheet1.Rows(Target.Row).Select
  Selection.Copy
  Sheet1.Rows(Target.Row).Copy

  If Target.Row = 2 Then
    Sheet2.Rows(Target.Row).Select
    Selection.Paste
  Else
    Sheet2.Select
    Sheet2.Rows(Target.Row + Target.Row - 1).Select
    Selection.Paste
  End If

ErrHandler:
  Application.EnableEvents = True 'This might be necessary?
End Sub 
```

* * *

**编辑：**更改`Selection.Paste`为后`ActiveSheet.Paste`，它现在可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:09:07.700

编辑：添加处理多区域选择

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim a As Range, rw As Range
    For Each a In Selection.Areas
        For Each rw In a.Rows
            If rw.Row >= 2 Then
                rw.EntireRow.Copy Sheet2.Cells(2 + (rw.Row - 2) * 3, 1)
            End If
        Next rw
    Next a
End Sub 
```

# android - SQLite 布尔/日期数据类型（或关联）

> ID：11400372
> 
> 赞同：0
> 
> 时间：2012-07-09T17:51:47.023
> 
> 标签：android, sql, sqlite

我已经完成了研究，并且从我所读到的内容（SQLites 数据类型怪异除外）日期可以用整数、实数和文本表示，而布尔值可以用整数表示。

但是，我正在阅读一本 android 书籍，其中有一个使用 DATE 的示例，并且想知道是否对 Android 的 SQLite 实现进行了一些修改？

我在创建语句中为 DATE、TIME、DATETIME 和 BOOLEAN 输入什么实际数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:05:04.477

androids sqlite 实现中对 DATE 没有特殊处理。它遵循您可能在此处[http://www.sqlite.org/datatype3.html的官方 sqlite 文档中看到的相同关联规则](http://www.sqlite.org/datatype3.html)

希望有帮助。

# c# - 使用 LINQ 表示文件树的具有父子关系的自引用表

> ID：11400373
> 
> 赞同：1
> 
> 时间：2012-07-09T17:51:55.117
> 
> 标签：c#, database, linq, sql-server-2008, linq-to-entities

我有一个表示文件树结构的单个数据库表。

```
Files
- Id (int, primary key)
- Name
- ParentId (int, foreign key to Files.Id) 
```

如何编写一种方法来确保孩子的所有父母都不能将孩子的 Id 作为其 ParentId 以防止在显示树结构时出现无限循环。

另外，有没有更有效的方法来设计这个？

更新：我使用支持层次 id 的 sql server 2008，会有帮助吗？（我不确定 EF 是否支持它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:04:42.150

您可能会添加一个“级别”值，然后您只需要确保没有节点的父节点的级别大于或等于它自己的级别。添加节点时，您会将新的子节点设置为父节点级别 + 1。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:59:53.730

我看不出您如何使用 LINQ 有效地编写此代码 - 您将不得不进行太多的数据库查询。相反，您应该考虑编写一个存储过程来在数据库端检查它。

替代方法可能是每个元素不仅存储父 ID，而且存储从根元素一直到其自身的整个层次结构路径 - 请参阅[相关 SO 问题中的示例](https://stackoverflow.com/questions/5056655/adjacency-list-tree-how-to-prevent-circular-references)。然后，您的工作将只包括检查路径是否不包含两个相同的 ID 并拒绝具有此类路径的元素 - 这可以通过数据库端的触发器或应用程序中的某些验证器来完成。

**编辑：**

关于 HierarchyId - 它似乎不是在实体框架中使用它的内置方式，至少在 .NET 4.5 之前没有。您可能想查看[这个 SO question](https://stackoverflow.com/questions/3347860/is-there-a-practical-way-to-use-the-hierarchyid-datatype-in-entity-framework-4) - 它包含一个自定义实现，应该使您能够在实体框架中使用 HierarchyId。

# jquery - Tipsy 工具提示中的按钮未触发 onClick 事件

> ID：11400375
> 
> 赞同：1
> 
> 时间：2012-07-09T17:51:55.543
> 
> 标签：jquery, javascript-events, tipsy

我已经设置了这个（更新的）[JSFiddle](http://jsfiddle.net/vryAz/4/)，展示了我正在尝试做的事情，但基本上我认为这是一种事件冒泡的情况。我正在尝试定位（在工具提示中）一个按钮，单击该按钮将更改工具提示触发的输入值。我看到的问题是按钮“单击”事件永远不会触发。关于如何使这项工作的任何想法？

这是简单的代码（这是使用 jQuery 1.7.2 和 Tipsy 1.0.0a）：

```
<input type="text" title="<button class='Action'>Add Balance</button>" name="Balance"/>
<button class='Action'>Add Other Balance</button>

$(document).ready(function() {
    $('input[name="Balance"]').tipsy({
        trigger: 'focus',
        gravity: 'n',
        html: true
    });
    $('button.Action').click(function() {
        $('input[name = "Balance"]').val($(this).html());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:26:31.620

问题是单击工具提示中的按钮元素会导致输入发出一个“focusout”事件，该事件被tipsy捕获并在单击事件冒泡之前将其及其子元素从DOM中删除。

这是它工作的演示，但只是因为删除父醉酒元素被延迟：

HTML：

```
<input title="<button class='action'>Add Balance</button>" name="balance"/>
<button class='action'>Add Other Balance</button> 
```

JS：

```
$(document).ready(function() {
    $(this).on('click', '.action', function() {
        $('input[name=balance]').val($(this).html());
    });

    $('input[name=balance]').tipsy({
        trigger: 'focus',
        gravity: 'n',
        html: true,
        delayOut: 1000 // Delay allows 'click' to fire
    });
});​ 
```

（我冒昧地规范了你的类名）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:54:41.947

尝试在您的`title`属性中初始化 Button，它可能不会触发，因为`click()`您的按钮的函数在那里看不到按钮，而且我在该插件的文档中找不到回调函数。

这就是我的想法：

```
 function initButton() { 
          $('button.Action2').click(function() {
              $('input[name = "Balance"]').val($(this).html());
          });
         }

      <input type="text" title="<button class='Action2'>Add Balance</button><script>initButton();</script>" name="Balance"/>
      <button class='Action'>Add Other Balance</button>

      $(document).ready(function() {
          $('input[name="Balance"]').tipsy({
              trigger: 'focus',
              gravity: 'n',
              html: true
          });
          $('button.Action').click(function() {
              $('input[name = "Balance"]').val($(this).html());
          });
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:06:58.947

我相信当输入失去焦点时工具提示正在关闭。这发生在可以注册单击工具提示之前。

在这种情况下，您应该手动打开和关闭工具提示。

手动触发 Tipsy 的代码可以在这里找到：http: [//onehackoranother.com/projects/jquery/tipsy/](http://onehackoranother.com/projects/jquery/tipsy/)

**编辑：**我为你做的：http: [//jsfiddle.net/xJQLu/3/](http://jsfiddle.net/xJQLu/3/)

# eclipse - 导出 Eclipse 配置

> ID：11400376
> 
> 赞同：3
> 
> 时间：2012-07-09T17:51:58.587
> 
> 标签：eclipse

我投入了大量的时间、汗水、头发和粗俗的语言，让我的 32 位 Eclipse 安装按照我喜欢的方式进行配置，其中包含 Maven、MAT 和 TPCP 等大量插件。

现在是切换到 64 位的时候了。可以像导出/导入项目一样导出/导入 Eclipse 安装配置吗？

TIA,

仍在学习的史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:56:34.280

看看下面的向导...

文件 -> 导入 -> 安装 -> 从现有安装

文件 -> 导入 -> 安装 -> 从文件安装软件项

文件 -> 导出 -> 安装 -> 已安装的软件项到文件

第一个可能是最简单的方法。只需为自己获取一个新的基本 Eclipse，运行它并将该向导指向您的旧安装。

# android - 电池温度返回 null

> ID：11400385
> 
> 赞同：1
> 
> 时间：2012-07-09T17:52:19.860
> 
> 标签：android, android-layout, android-intent

我有个问题。:) 它很小，但如果有人能提供帮助，我们将不胜感激！

问题是我想要获取 android 设备的电池信息，但它返回 null。我已经做了所有正确的事情，但无法找出错误。:(

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.resources_battery);

    BroadcastReceiver batteryData = new BroadcastReceiver() {
        String tech,temp;
        int level;
        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            tech = intent.getStringExtra(BatteryManager.EXTRA_TECHNOLOGY);
            level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL,-1);
            temp = intent.getStringExtra(BatteryManager.EXTRA_TEMPERATURE);

            TextView technology = (TextView) findViewById(R.id.Appres_BatType);
            technology.setText("Current Technology : " + tech);
            TextView Tempreture = (TextView) findViewById(R.id.Appres_Battemp);
            Tempreture.setText("Current Battery Tempreature : " +temp);
        }
    };

    IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    registerReceiver(batteryData, filter);
} 
```

上面是我为获取温度而编写的代码，但它返回 null！请帮忙！

我将代码更改为此 bt 仍然返回零！

```
temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:11:52.930

`temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);`

是获取温度的正确方法。

这对我有用：

```
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.resources_battery);

BroadcastReceiver batteryData = new BroadcastReceiver() {
    String tech;
    int level,temp;
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        tech = intent.getStringExtra(BatteryManager.EXTRA_TECHNOLOGY);
        level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL,-1);
        temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);

        TextView technology = (TextView) findViewById(R.id.Appres_BatType);
        technology.setText("Current Technology : " + tech);
        TextView Tempreture = (TextView) findViewById(R.id.Appres_Battemp);
        Tempreture.setText("Current Battery Tempreature : " +temp);
    }
};

IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
registerReceiver(batteryData, filter);
} 
```

也许你碰巧有一个不能正确报告电池温度的设备？我的设备（Galaxy Nexus）报告：330（1/10 摄氏度，请参阅[此](https://stackoverflow.com/a/4860510/241189)问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:10:43.693

您只需将 temp 更改为 int 并使用您编写的最后一行

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.resources_battery);

    BroadcastReceiver batteryData = new BroadcastReceiver() {
    String tech;
    int level,temp;
        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            tech = intent.getStringExtra(BatteryManager.EXTRA_TECHNOLOGY);
            level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL,-1);
            temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE,-1);

            TextView technology = (TextView) findViewById(R.id.Appres_BatType);
            technology.setText("Current Technology : " + tech);
            TextView Tempreture = (TextView) findViewById(R.id.Appres_Battemp);
            Tempreture.setText("Current Battery Tempreature : " +temp);
        }
    };

    IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    registerReceiver(batteryData, filter);
} 
```

# java - 在我的循环中添加睡眠

> ID：11400386
> 
> 赞同：0
> 
> 时间：2012-07-09T17:52:22.580
> 
> 标签：java

我无法让它入睡，我希望它在继续之前暂停一秒钟。

```
public static void main(String[] args) {  
        //supply your own path instead of using this one 
        String path = "\\image.JPG";  
        for(;;)
            SPI.INSTANCE.SystemParametersInfo(     
                new UINT_PTR(SPI.SPI_SETDESKWALLPAPER),    
                new UINT_PTR(0),      
                path,          
                new UINT_PTR(SPI.SPIF_UPDATEINIFILE | SPI.SPIF_SENDWININICHANGE));
        } 
```

当我尝试添加 Thread.sleep(1000); 它给了我一个错误，无法访问的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:54:11.100

确保您将添加`sleep()`到 for 循环的内部，而不是外部。

你还需要抓住潜力`InterruptedException`。

```
for(;;)
    SPI.INSTANCE.SystemParametersInfo(     
        new UINT_PTR(SPI.SPI_SETDESKWALLPAPER),    
        new UINT_PTR(0),      
        path,          
        new UINT_PTR(SPI.SPIF_UPDATEINIFILE | SPI.SPIF_SENDWININICHANGE));

    try {
        Thread.sleep(1000l);
    } catch(InterruptedException e){}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:56:47.710

**试试这个......在 for 循环中添加 sleep 方法。**

```
public static void main(String[] args) {  
        //supply your own path instead of using this one 
        String path = "\\image.JPG"; 

        for(;;){

                try{
                    Thread.sleep(1000);
                    SPI.INSTANCE.SystemParametersInfo(     
                    new UINT_PTR(SPI.SPI_SETDESKWALLPAPER),    
                    new UINT_PTR(0),      
                    path,          
                    new UINT_PTR(SPI.SPIF_UPDATEINIFILE | SPI.SPIF_SENDWININICHANGE));
                    }catch(Exception ex){

                    }

          } 
```

# javascript - 为什么这个字符一直在我的数据库中弹出：Â保存其他特殊字符时？

> ID：11400390
> 
> 赞同：0
> 
> 时间：2012-07-09T17:52:34.803
> 
> 标签：javascript, jquery, sql, sql-server, firefox

似乎当我在我的数据库中添加任何特殊字符（如©和®）时，它会保存它，包括这个字符：`Â`，所以它像这样保存它`Â©`现在越来越多地弹出。

我可以认为当我保存数据时数据库正在这样做（但它似乎只是目前正在发生），也许是因为浏览器？由于我在将数据保存到数据库时没有对数据进行 HTMLEncode，但可能不是因为我自己无法亲自重现该问题，所以想知道其他人是否也遇到过同样的问题？

你认为这是网络浏览器做的吗？也许是因为通过 jQuery 提交表单而发生的？造成这种情况的罪魁祸首可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:57:04.120

这是由不匹配的编码引起的，通常应用程序的一部分使用 iso-8859-1 而另一部分使用 utf-8

检查您的数据库和单个表定义、您的网页内容编码和您的表单编码。确保它们始终使用相同的编码。我们端到端使用 utf-8。

* * *

我们使用的是 MySQL，而不是 SQL Server，所以我不知道细节。对于 MySQL，我们定义表的 DDL 文件通常以类似的结尾

```
 SOMEDATA VARCHAR(100),
    INDEX USER_ID
)
engine = InnoDB
default character set utf8
collate = utf8_general_ci 
```

并在所有/生成的页面中包含的通用标题中

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

在`<form>`标签中，您可以明确设置*接受字符集*

```
<form accept-charset="utf-8" (etc)> 
```

在 SO 上查看这个不完全相关的[问题](https://stackoverflow.com/questions/153527)

# xml - 使用 XQuery 基于 XML 数据创建有效的 Latex 文件

> ID：11400391
> 
> 赞同：1
> 
> 时间：2012-07-09T17:52:39.370
> 
> 标签：xml, xml-parsing, latex, xquery

我知道这个任务有点不正统，但我希望有人能够帮助我。我正在尝试基于产品上的 XML 文件使用 XQuery 创建一个有效的 Latex 文件。XML 文件 (xml/products.xml) 如下所示：

```
<?xml version="1.0"?>
<Products>
    <Maker name = "A">
        <PC model = "1001" price = "2114">
            <Speed> 2.66 </Speed>
            <RAM> 1024 </RAM>
            <HardDisk> 250 </HardDisk>
        </PC> 
```

这是我需要的乳胶输出：

```
\documentclass[]{article}

\begin{document}

\begin{center}
\begin{tabular}{| l | l |}
\hline
Price & Model \\ \hline
price value & model value \\ \hline

\end{tabular}
\end{center}

\end{document} 
```

我创建了以下（字符转义）XQuery 来生成所需的 Latex：

```
let $oc := "&#123;" (: for { :)
let $cc := "&#125;" (: for } :)
let $space := "&#32;" (: space :)
let $tab := "&#9;" (: tab :)
let $ampersand := "&#38;" (: ampersand :)

\\documentclass\[\]{$oc}article{$cc}

\\begin{$oc}document{$cc}

\\begin{$oc}center{$cc}
    \\begin{$oc}tabular{$cc}{$oc}| l | l |{$cc}
    \\hline
    Model{$ampersand}Price{$space}\\\\{$space}\\hline
    {for $pc in doc("xml/products.xml")/Products/Maker/PC
let $price:=data($pc/@price)
let $model:=data($pc/@model)
return
{$model}{$ampersand}{$price} \\\\ \\hline
}
\\end{$oc}tabular{$cc}
\\end{$oc}center{$cc}

\\end{$oc}document{$cc} 
```

我无法让查询工作.. :(。和往常一样，XQuery 没有提供太多调试信息。有没有更聪明的方法可以使用 XQuery 转义字符？或者直接打印文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:29:55.733

这是一种可能的解决方案：

```
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method "text";

concat("\documentclass[]{ article }

\documentclass[]{article}

\begin{document}

\begin{center}
\begin{tabular}{| l | l |}
\hline
Price &amp; Model \\ \hline
",
for $pc in doc("xml/products.xml")/Products/Maker/PC
let $price := data($pc/@price)
let $model := data($pc/@model)
return concat($model, " &amp; ", $price, " \\ \hline
"),

"\end{tabular}
\end{center}

\end{document}") 
```

请注意，您可能需要进一步修改从返回的数据`products.xml`以使其符合 LateX 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:22:24.187

我从 Christian 的方法中对 concat 进行了一些重组，现在它可以工作了。代码下方：

```
 declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
    declare option output:method "text";

    let $stringa:=string("
    \documentclass[]{article}
    \begin{document}
    \begin{center}
    \begin{tabular}{| l | l |} \hline
    Model &amp; Price \\ \hline
    ")

    return ($stringa),
        (
        for $pc in doc("xml/products.xml")/Products/Maker/PC
        let $price := data($pc/@price)
        let $model := data($pc/@model)

        return concat($model, " &amp; ", $price, " \\ \hline")
        ),
    (
    string("
    \end{tabular} 
    \end{center} 
    \end{document}
    ")
    ) 
```

# sql - 多个字段上的 Oracle 排名列

> ID：11400392
> 
> 赞同：4
> 
> 时间：2012-07-09T17:52:40.057
> 
> 标签：sql, oracle, ranking

我在对 Oracle 中的某些列进行排名时遇到了一些问题。我有两列需要排名——一个组 ID 和一个日期。

我想以两种方式对表格进行分组：

1.  按 DATETIME (RANK_1) 对每个 GROUP_ID 中的记录进行排名
2.  按 DATETIME、GROUP_ID (RANK_2) 对 GROUP_ID 进行排名

它应该如下所示：

```
GROUP_ID  |    DATE    |   RANK_1  |  RANK_2
----------|------------|-----------|----------
    2     |  1/1/2012  |      1    |    1
    2     |  1/2/2012  |      2    |    1
    2     |  1/4/2012  |      3    |    1   
    3     |  1/1/2012  |      1    |    2
    1     |  1/3/2012  |      1    |    3 
```

我已经能够做到前者，但无法弄清楚后者。

```
SELECT   group_id,
         datetime,
         ROW_NUMBER() OVER (PARTITION BY group_id ORDER BY datetime) AS rn,
         DENSE_RANK() OVER (ORDER BY group_id) AS rn2
FROM     table_1
ORDER BY group_id; 
```

这错误地排序了 RANK_2 字段：

```
GROUP_ID  |    DATE    |   RANK_1  |  RANK_2
----------|------------|-----------|----------
    1     |  1/3/2012  |     1     |    1
    2     |  1/1/2012  |     1     |    2
    2     |  1/2/2012  |     2     |    2
    2     |  1/4/2012  |     3     |    2
    3     |  1/1/2012  |     1     |    3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:59:27.320

假设您在表中没有实际的 id 列，您似乎希望按每个组中的最早日期排名第二。这将需要一个嵌套的子查询：

```
select group_id,  datetime, rn,
       dense_rank() over (order by EarliestDate, group_id) as rn2
from (SELECT group_id,  datetime, 
             ROW_NUMBER() OVER (PARTITION BY group_id ORDER BY datetime) AS rn, 
             min(datetime) OVER (partition by group_id) as EarliestDate
      FROM table_1
     ) t
ORDER BY group_id; 
```

# iphone - 尝试洗牌 NSMutableArray 时出错

> ID：11400395
> 
> 赞同：1
> 
> 时间：2012-07-09T17:52:48.153
> 
> 标签：iphone, xcode, ios5, nsmutablearray, shuffle

我正在尝试对 NSMutableArray 进行洗牌，以便每次有人加载视图时它的顺序都会混淆。

在我的`-(void)viewDidLoad`我把下面的代码（如其他用户的建议）：

```
NSMutableArray *shuffleTwo = [self.chosenTeamDict objectForKey:@"clubs"];

int random = arc4random() % [shuffleTwo count]; 
for (int i = 0; i < [shuffleTwo count]; i++) {
    [shuffleTwo exchangeObjectAtIndex:random withObjectAtIndex:i]; 
}

NSLog(@"%@", shuffleTwo); 
```

但是当我这样做并尝试运行该页面时，我收到以下错误：

```
2012-07-09 18:42:16.126 Kit-Quiz[6505:907] (null)
libc++abi.dylib: terminate called throwing an exception 
```

谁能建议一种改组这个数组的新方法，或者建议我如何避免这个错误..！？我正在为 iOS 5 构建，我正在使用 Xcode45-DP1。提前致谢！

**（编辑）**

我也试过这个方法，我得到了同样的错误：

```
NSMutableArray *shuffledArray = [[NSMutableArray alloc] init];
    NSMutableArray *standardArray = [self.chosenTeamDict objectForKey:@"clubs"];

    for(int s = 0; s < [standardArray count]; s++){
        int random = arc4random() % s;
        [shuffledArray addObject:[standardArray objectAtIndex:random]];
    }

    NSLog(@"%@", shuffledArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:34:39.310

试试 Fisher-Yates 洗牌。它是这样的：

```
int count = shuffledArray.count;

for(int i=count; i>0; i--) {

 int j = arc4random_uniform(count);

 [shuffledArray exchangeObjectAtIndex:j withObjectAtIndex:i];

} 
```

确保您的数组不是零并且所有条目都是分配的对象:)

资料来源：[Fisher-Yates Shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:05:06.377

```
NSMutableArray *standardArray = [self.chosenTeamDict objectForKey:@"clubs"];

int length = 10; // int length = [yourArray count];
NSMutableArray *indexes = [[NSMutableArray alloc] initWithCapacity:length];
for (int i=0; i<10; i++) [indexes addObject:[shuffledArray objectAtIndex:i]];
NSMutableArray *shuffle = [[NSMutableArray alloc] initWithCapacity:length];
while ([indexes count])
{
    int index = rand()%[indexes count];
    [shuffle addObject:[indexes objectAtIndex:index]];
    [indexes removeObjectAtIndex:index];
}
for (int i=0; i<[shuffle count]; i++) NSLog(@"%@", [shuffle objectAtIndex:i]);

NSLog(@"%@", shuffle); 
```

^^ 回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:17:39.413

首先，您确实应该启用异常断点。在左侧面板的 XCode 中，单击断点选项卡，单击左下角的“+”号 -> 异常断点 -> 完成。

~~我怀疑你的问题出在这里：~~

 ~~```
int random = arc4random() % [shuffleTwo count]; 
```~~ 

~~如果 [shuffleTwo count] 的计算结果为零（如果 shuffleTwo 为 nil），它将引发除以零异常。~~编辑：在 Objective-C 中似乎并非如此。

# c# - 如何运行 Doxygen Makefile？

> ID：11400399
> 
> 赞同：4
> 
> 时间：2012-07-09T17:53:01.903
> 
> 标签：c#, makefile, latex, doxygen

我创建了一个 .NET C# 项目，我使用类似于`///<summary>A summary...</summary>`我想使用 Doxygen 记录的块进行了评论。我已经设置了 Doxygen，它运行生成了大约 100 个 .tex 文件和一个 Makefile。

据我了解，Makefile 是将文档生成为 PDF 的关键，但是我没有让它工作。

`make -f Makefile`当我在 Doxygen LaTeX 输出目录中时，我正在使用 Mac 通过在终端中写入来执行 LaTeX 和 Doxygen 位。

```
all: refman.pdf

pdf: refman.pdf

refman.pdf: clean refman.tex
            pdflatex refman
        makeindex refman.idx
        pdflatex refman
        latex_count=5 ; \
        while egrep -s 'Rerun (LaTeX|to get cross-references right)' refman.log && [ $$latex_count -gt 0 ] ;\
            do \
              echo "Rerunning latex...." ;\
              pdflatex refman ;\
              latex_count=`expr $$latex_count - 1` ;\
            done

    clean:
        rm -f *.ps *.dvi *.aux *.toc *.idx *.ind *.ilg *.log *.out *.brf *.blg *.bbl refman.pdf 
```

运行时，我收到以下消息：

```
MacBook-Pro-13:latex sehlstrom$ make
rm -f *.ps *.dvi *.aux *.toc *.idx *.ind *.ilg *.log *.out *.brf *.blg *.bbl refman.pdf
make: *** No rule to make target `refman.tex', needed by `refman.pdf'.  Stop. 
```

我怎样才能让 Makefil 工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:51:01.030

`refman.tex`应该是由 Doxygen 创建的。我刚刚使用我安装的版本 doxygen 1.7.2 进行了测试，它创建了一个`refman.tex`.

确保您没有设置任何选项说这是一个不应有自己的索引的大型项目的组件。

# asp.net - 将超链接应用于图像

> ID：11400404
> 
> 赞同：2
> 
> 时间：2012-07-09T17:53:30.487
> 
> 标签：asp.net, css, image, hyperlink

```
.displayed1
{
    position: fixed;
    top: 275px;
    right: 341px;
} 
```

```
<img class="displayed1" src="Images/NewProjectCohesive02.jpg" alt="" /> 
```

如何`AddnewPage1.aspx`为图像添加超链接？图像是否必须在`<form id="form1" runat="server">`标签中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T17:55:09.700

将其包装在`<a>`标签中。

```
<a href="AddnewPage1.aspx">
    <img class="displayed1" src="Images/NewProjectCohesive02.jpg" alt="" />
</a> 
```

不需要修改 CSS，除非您愿意（并且大多数人都愿意）删除边框。此外，鉴于这似乎是一个重要的导航链接，请务必以`alt`可访问性的名称提供 -text。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:21:57.997

```
 <asp:HyperLink ID="hpr1" runat="server">
<img  src="img/bg-breadcrumbs-homebtn.png" />
</asp:HyperLink> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T12:56:43.663

（使用 Asp.net）

我做了类似的事情

```
<a href='<%#AdUr(DataBinder.Eval(Container.DataItem,"Title"), DataBinder.Eval(Container.DataItem,"AdId"))%>'>
    <asp:Image ID="Image1" ImageUrl='<%# Eval("ImageUrl") %>' runat="server" class="img-responsive" title='<%# Eval("Title")%>'/>
</a> 
```

> 请记住，对 Eval 使用单引号。

# python - 奇怪的文本连接

> ID：11400406
> 
> 赞同：0
> 
> 时间：2012-07-09T17:53:44.073
> 
> 标签：python, text

连接时得到奇怪的输出。当它使用这个时：

```
print 'sadasdadgdsfdajfhdsgsdkjhgsfjhdfdsfds'+'.323232600656520346403' 
```

它工作正常。

但是当我这样做时：

```
getReference = open('test.txt','r')

for line in getReference:#os.path.exists(''+line+'.txt')

    try:
        with open(''+line+'.txt') as f: pass
    except IOError as e:
        newURL ='http://www.intrat.th/'+''.join(line)+'.fsta'
        print newURL 
```

当我打印 newURL 时，它没有给我一行文本，而是在第二行有 .fsta 。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:59:31.527

这是因为`line`以`'\n'`, 换行符结尾。

解决此问题的一种方法是：

```
for line in getReference:
    line = line.strip()
    # more code manipulating line
    # print stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T17:59:53.113

听起来您正在阅读换行符。尝试以下操作：

```
getReference = open('test.txt','r')

for line in getReference:#os.path.exists(''+line+'.txt')
    line = line.rstrip('\n') # Strip the newline here

    try:
        with open(''+line+'.txt') as f: pass
    except IOError as e:
        newURL ='http://www.intrat.th/'+''.join(line)+'.fsta'
        print newURL 
```

请注意，换行符可能不适合您的操作系统，在这种情况下您可以这样做

```
import os
# all your code
line = line.rstrip(os.linesep)
# more code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:03:38.093

你的线：

```
for line in getReference: 
```

将遍历文件中的行，包括换行符 \n（和 \r）。因此，您可能正试图打开一个文件 'filename\n.txt'，这不是您的本意。

作为解决方案，使用条带：

```
with open(''+line.strip()+'.txt') as f: pass 
```

# java - 同时运行线程 swing gui 正在运行

> ID：11400416
> 
> 赞同：1
> 
> 时间：2012-07-09T17:54:24.947
> 
> 标签：java, multithreading, swing, swingworker

我有这堂课：

```
public class MyClass extends Observable implements Runnable
{
...
} 
```

我必须在摆动 gui 运行期间在后台执行此线程。这可能是最好的解决方案？如果我没有犯错，我就不能使用`SwingWorker`。对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:55:22.263

`SwingWorker`是专门为此目的而制作的。继续使用它，它会起作用的。首先阅读它的文档。

如果您想使用已有的课程，您也可以这样做。只需这样做：

`new Thread (new MyClass ()).start ();`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:59:56.600

**SwingWorker 是在 Java 中引入的，目的是同步 UI 线程工作和非 UI 线程工作，因为在 UI 线程上执行非 UI 工作会使 GUI 响应速度降低...** 确保只有您的 GUI 代码在 Event Dispatcher 线程中运行.

与**在 Android 中一样，我们有 AsyncTask<>**用于此目的......

# cordova - 在phonegap中使用蓝牙

> ID：11400420
> 
> 赞同：3
> 
> 时间：2012-07-09T17:54:33.737
> 
> 标签：cordova, bluetooth

我做了一些谷歌搜索，直到现在还没有找到一种在使用 phonegap 的设备上使用蓝牙的方法。

还有其他我应该看的 API/框架/平台吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:51:00.593

唯一的方法是使用（或创建）Phonegap 插件，该插件将处理与您的 Javascript 通信的原生 Android 类。

这是我几周前发现的一个[Github 项目，但我没有使用它。](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth)

[如何在 Android 中使用蓝牙](http://developer.android.com/guide/topics/connectivity/bluetooth.html)；
[如何创建 Phonegap 插件](http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)。

# jquery - 像滑块一样的过渡效果作为 div 淡入/淡出

> ID：11400427
> 
> 赞同：0
> 
> 时间：2012-07-09T17:55:04.087
> 
> 标签：jquery, css, css-transitions

你知道那里有一些很酷的滑块效果，有时会使用立方体过渡效果。例如，下一个图像由多个立方体组成，这些立方体在过渡结束时组合在一起。

好吧，我想知道...是否有某种 jQuery 插件使用此转换作为 div 淡入/淡出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:07:43.850

怎么样：

*   [裁缝师](http://activetuts.s3.amazonaws.com/freebies/003_pieceMaker/piecemaker/index.html)
*   [这个 3D CSS 立方体](http://www.paulrhayes.com/experiments/cube-3d/)
*   [另一个旋转立方体](http://www.kawa.net/works/js/animation/cube-e.html)
*   [或者不管这是什么](http://www.zachstronaut.com/lab/isocube.html)

# php - 计算要在 $.get() 中使用的时间传递变量

> ID：11400430
> 
> 赞同：1
> 
> 时间：2012-07-09T17:55:13.880
> 
> 标签：php, javascript, jquery, ajax

我正在尝试用一些信息更新我的数据库。其中一个关键信息是从页面首次加载到用户单击按钮已经过去了多少时间。我的代码如下所示：

```
<script>
function pauseVideo() {
    $.get("video_pause.php?pause=" + timePassed + "&videoid=<?php echo $_GET['sessionid']; ?>&sessionid=<?php echo $_GET['videoid']; ?>");
}
</script> 
```

和

```
<html>
<div id="pause" onclick="pauseVideo()">PAUSE</div>
</html> 
```

我的 PHP 很好，所以忽略它。我遇到问题的部分是“timePassed”。我需要这是自页面首次加载并且该人单击 PAUSE div 以来的时间量（以秒为单位）。

我想我需要在单击时运行一个函数来查找经过的时间，然后以某种方式在 $.get() 中使用该时间变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:02:07.887

当文档加载时，只需将当前时间保存在一个变量中：

```
$(document).ready(function() {
    var timeWhenLoaded = (new Date).getTime() / 1000;
}); 
```

然后，当点击暂停按钮时，计算已经过去的时间：

```
function pauseVideo() {
    var currTime = (new Date).getTime() / 1000;
    // time in seconds
    var timePassed = Math.floor(currTime - timeWhenLoaded);
    $.get("video_pause.php?pause=" + timePassed + "&videoid=<?php echo $_GET['sessionid'];     ?>&sessionid=<?php echo $_GET['videoid']; ?>");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:02:28.890

摆脱 HTML 中的 onclick，并删除现有功能，然后将其放在页面的 head 部分：

```
(function(){
    var loadTime = (new Date).getTime(); // Page started loading

    $(function(){
        // DOM fully loaded, so move the assignment here if that is what
        // you want to consider as the load time

        $('#pause').click(function(){
            $.get("video_pause.php?pause=" + Math.floor(((new Date).getTime() - loadTime)/1000) + "&videoid=<?php echo $_GET['sessionid']; ?>&sessionid=<?php echo $_GET['videoid']; ?>");
        });
    });

})(); 
```

另请注意，您永远不能信任服务器端的该变量。如果他们真的想的话，任何人都可以输入一个负数，甚至可以输入“pizza”这个词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T17:58:56.687

就像是：

```
var startTime = (new Date).getTime() / 1000;
function pauseVideo() {
    var curTime = (new Date).getTime() / 1000;
    var timePassed = Math.floor(curTime - startTime);
    $.get("video_pause.php?pause=" + timePassed + "&videoid=<?php echo $_GET['sessionid']; ?>&sessionid=<?php echo $_GET['videoid']; ?>");
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T18:01:06.737

如果具有以下代码的页面是在服务器端生成的，您可以将当前时间传递给脚本，如下所示：

```
<html>
  <div id="pause" onclick="pauseVideo('" + curTime +"')">PAUSE</div>
</html> 
```

（需要回显语法）

或将其放在隐藏字段中并将其传递回服务器。（并在php中进行计算）以这种方式，您可以获得自请求页面以来经过的时间......

# node.js - 创建 OAuth API 时的应用程序令牌/机密

> ID：11400435
> 
> 赞同：2
> 
> 时间：2012-07-09T17:55:28.930
> 
> 标签：node.js, facebook-graph-api, oauth

背景：我正在使用 node.js 和 express 来创建 API。我已经在我的 API 服务器中以标准的消费者/用户密钥/秘密方式实现了 OAuth（与 Twitter、Facebook 等相同的方式）。我希望第 3 方能够以与这些常见 API 相同的方式连接到我的 API。

通常，客户端会与应用程序令牌/秘密连接（例如，您以 Facebook 开发人员的身份创建 Facebook 应用程序，这些都提供给您）。但是，有时客户端无法为应用程序提供秘密，因为代码是以不安全的方式实现的。具体来说，我指的是 Javascript 库。例如，开发人员不希望在 Javascript 代码中公开他们的应用程序机密，因为它是明文并且可能被恶意用户读取。

我注意到 Facebook 避免了这个问题。开发人员只需向 Javascript 库提供应用程序令牌（不是秘密）。我不明白如何在不从根本上使我的库不安全的情况下为我的 API 提供类似的选项。即，如果 Javascript 客户端库向 API 发出请求而没有提供安全的令牌/秘密，那么 OAuth API 如何对这些请求进行身份验证？

从理智上讲，我能想到的最佳解决方案是通过 HTTPS 连接在 Javascript 客户端库和 API 服务器之间进行某种令牌切换，以便返回一个秘密供库使用。不过，我不太确定如何确保此交接以防止欺骗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:23:47.180

在大多数情况下，最好遵循标准而不是实现一些自定义方式。OAuth2[在最新草案 (28) 中指定了 4 种方法](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-28#page-8)来执行授权授予流程。*隐式*流程是您在 Facebook 上看到的流程。

正如标准所说：

> 在隐式授权流程期间发布访问令牌时，授权服务器不会对客户端进行身份验证。在某些情况下，可以通过用于将访问令牌传递给客户端的重定向 URI 来验证客户端身份。访问令牌可能会暴露给资源所有者或其他有权访问资源所有者的用户代理的应用程序。
> 
> 隐式授权提高了某些客户端（例如作为浏览器内应用程序实现的客户端）的响应能力和效率，因为它减少了获取访问令牌所需的往返次数。然而，这种便利性应该与使用隐式授权的安全隐患进行权衡，尤其是当授权码授权类型可用时。

它有一些安全缺陷。

但据我所知，其他方法对你不起作用，因为它们会将秘密暴露给客户端（第三方网站所有者）或资源所有者（用户），所以你应该坚持下去。

# css - Chrome 和 Firefox 中的 3D 变换 (rotateY) 的反应不同

> ID：11400436
> 
> 赞同：3
> 
> 时间：2012-07-09T17:55:39.060
> 
> 标签：css, css-transforms

我为页面标题中的徽标 div 创建了 CSS 3D 转换。悬停时，徽标会旋转。在 Chrome 中一切看起来都很好，但 Firefox 却完全不同。

我将变换原点移动到徽标 div 的左侧。当旋转 div 的右侧时，会“压缩”以获得视觉 3D 效果。在 Firefox 中，徽标 div 只会变小，但不会“压缩”，而且您看不到 3D 效果。

编码：

```
<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>test</title>
    <style>
        #header {
            width: 940px;
            margin: auto;
            background-color: blue;
            height: 350px;
            position: relative;
            -webkit-perspective: 800;
            -moz-perspective: 800;
        }

        #logo {
            width: 300px;
            height: 80px;
            background-color: red;
            position: absolute;
            top: 50px;
            left: 0px;
            -webkit-transition-duration: 0.25s;
            -webkit-transform-origin: 0% 50%;
            -webkit-transform-style: preserve-3d;
            -webkit-transform: rotate3d(0,1,0,0deg);
            -moz-transition-duration: 0.25s;
            -moz-transform-origin: 0% 50%;
            -moz-transform-style: preserve-3d;
            -moz-transform: rotate3d(0,1,0,0deg);

        }
        #logo:hover {
            -webkit-transition-duration: 0.5s;
            -webkit-transform: rotate3d(0,1,0,45deg);
            -moz-transition-duration: 0.5s;
            -moz-transform: rotate3d(0,1,0,45deg);
        }
    </style>
</head>
<body>
    <div id="header">
        <div id="logo"></div>
    </div>
</body>
</html> 
```

请尝试以下 JSFiddle：http: [//jsfiddle.net/4CN5g/](http://jsfiddle.net/4CN5g/)

知道我做错了什么吗？

# iphone - 使用 xCode 4.3.3 使用未声明的标识符“NSLineBreakByWordWrapping”

> ID：11400437
> 
> 赞同：6
> 
> 时间：2012-07-09T17:56:06.397
> 
> 标签：iphone, objective-c, ios, xcode4.3, font-size

我在 xCode 4.3.3 上得到“使用未声明的标识符 'NSLineBreakByWordWrapping'”，它没有出现在 beta 版本中。

它发生在这段代码上：

```
[text sizeWithFont:font constrainedToSize:textConstraintRect.size lineBreakMode: NSLineBreakByWordWrapping].height); 
```

我需要导入什么来解决这个问题？

请帮忙，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-09T17:34:26.167

或 `NSLineBreakMode.ByWordWrapping`迅速

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T18:00:40.087

改为使用`UILineBreakModeWordWrap`。

# c# - 如何确保我的基于 html 的网站或 Web 应用程序在所有浏览器上都能正常运行

> ID：11400440
> 
> 赞同：0
> 
> 时间：2012-07-09T17:56:14.083
> 
> 标签：c#, asp.net, .net, html

我想知道是否需要在 html 文件中进行某种方式或设置，以便我的基于 asp.net 网站/html 的网站在所有浏览器（IE/Firefox/Opera）中以正确的长度/高度尺寸正常工作...等等......什么设置以及我需要在哪里做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:17:22.670

转到[http://crossbrowsertesting.com/user](http://crossbrowsertesting.com/user)上的测试中心并运行实时测试。您将有多个浏览器和版本的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:18:18.800

真的没有一种方法可以检查所有浏览器的兼容性......

这样做的主要问题是每个浏览器都使用自己的 CSS3 标准变体。Gecko 和 webkit 浏览器似乎相当一致，但 IE 通常会在其中发挥作用，尤其是在版本之间。

老实说，您最好确保遵守标准并包含针对每个浏览器的浏览器引擎特定样式。

例如，如果您正在设置背景并且希望使用 CSS 样式的渐变，则可能需要执行以下操作：

```
.gradient-bg {
    background: #ececed;
    background: -moz-linear-gradient(top,  #ececed 0%, #fefefe 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ececed), color-stop(100%,#fefefe));
    background: -webkit-linear-gradient(top,  #ececed 0%,#fefefe 100%);
    background: -o-linear-gradient(top,  #ececed 0%,#fefefe 100%);
    background: -ms-linear-gradient(top,  #ececed 0%,#fefefe 100%);
    background: linear-gradient(top,  #ececed 0%,#fefefe 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ececed', endColorstr='#fefefe',GradientType=0 );
} 
```

这可确保我们解决不支持任何渐变转换的旧版浏览器，以及支持但以不同方式的各种版本（即 -ms-linear-gradient 与 filer：progid:DXImageTransform.Microsoft.gradient 或 -webkit -gradient 与 -webkit-linear-gradient）。另请注意，浏览器无法识别的任何 CSS 属性都将被忽略，并且浏览器的呈现将下降到下一个可识别的样式变体。

您为 CSS3 开发并让非正统的浏览器以非正统的方式呈现已成为越来越多的行业标准。

真正确定的唯一方法是在每个支持的浏览器中检查它并亲自查看。不过，请注意，虽然 IE 附带的开发人员工具允许您查看呈现的内容，就像在以前版本的 IE 中一样，但它仍然可能与实际（不兼容视图）版本有很大不同。

让 IE 在不同版本号上呈现相同（或接近）的最简单方法是通过 META 标签强制兼容。（以 IE7 模式呈现并支持 DOCTYPE 指令）。

长话短说...尝试坚持标准以使 webkit 和 gecko 兼容，然后在您偶然发现它们时解决 IE 问题。由于 IE 是唯一不属于其他 2 个类别的浏览器，因此您应该很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:02:27.487

使用允许您在多个浏览器（如 Adob​​e Browser Lab）中查看页面的服务。

# c# - 在 C# 中捕获另一个程序的客户区？

> ID：11400445
> 
> 赞同：1
> 
> 时间：2012-07-09T17:56:26.830
> 
> 标签：c#, winforms, process, screenshot, visual-c#-express-2010

我有一个列表视图，其中填充了正在运行的应用程序名称：

```
listView1.Items.Add(proc.MainWindowTitle); 
```

代码在 foreach 语句中。我尝试使用此代码获取所选项目（程序名称）并截取该程序的客户端窗口：

```
 public string selectedProgram;

    [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
    public static extern IntPtr GetForegroundWindow();
    [DllImport("user32.dll")]
    public static extern bool GetWindowRect(IntPtr hwnd, out Rectangle lpRect);

    private void button2_Click(object sender, EventArgs e)
    {
        Process[] process = Process.GetProcesses();
        foreach (var p in process)
        {
            selectedProgram = listView1.SelectedItems.ToString();
        }

        Rectangle bonds = new Rectangle();
        GetWindowRect(Handle, out bonds);
        Bitmap bmp = new Bitmap(bonds.Width, bonds.Height);

        using (var gfx = Graphics.FromImage(bmp))
        {
            gfx.CopyFromScreen(bonds.Location, Point.Empty, bonds.Size);
            pictureBox1.Image = bmp;
            Form2 frm2 = new Form2(this);
            frm2.Show();
            frm2.pictureBox1.Image = pictureBox1.Image;
        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:28:55.400

如果您描述它的哪些部分不起作用，这将有所帮助。

我不确定这是否是您的问题，但我看到您只是在第一个 for 循环中覆盖了一个变量（selectedProgram）

```
Process[] process = Process.GetProcesses();
foreach (var p in process)
{
    selectedProgram = listView1.SelectedItems.ToString();
} 
```

然后使用 Member 变量作为句柄，而不是该进程的窗口句柄 GetWindowRect(Handle, out bonding);

您需要调用才能从进程中获取窗口句柄。另外，一个进程不可能有多个窗口吗？您不需要使用 EnumWindows 和 GetWindowThreadProcessID() 的组合遍历指定进程的所有窗口（[如何从进程 ID 获取主窗口句柄？](https://stackoverflow.com/questions/1888863/how-to-get-main-window-handle-from-process-id)）

一旦你发现你得到了正确的进程窗口句柄（spy++ 应该在这方面有所帮助），你应该能够更好地了解什么不适合你

# c - c fgets 不等待输入

> ID：11400447
> 
> 赞同：0
> 
> 时间：2012-07-09T17:56:32.913
> 
> 标签：c, fgets

我的代码中有 2 个 fget，它们**都没有等待输入**……
这是第一个示例`fgets`……

```
printf("Insert path: ");
if(fgets(dirpath, BUFFGETS, stdin) == NULL){
    perror("fgets dir path");
    close(sockd);
} 
```

而且，正如我之前所写的，下一个 fgets 也没有等待我的输入:(
在第一个之前`fgets`我有 2 个`scanf("%ms", &string);`（如果这可能是麻烦的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:11:11.470

我认为 scanf 不会在换行符中读取。您可以尝试在 scanf() 之后使用额外的 fgets 先读取它。

# java - 当我添加 ，我得到一个“错误创建 bean”，“java.lang.IllegalMonitorStateException”

> ID：11400450
> 
> 赞同：1
> 
> 时间：2012-07-09T17:56:45.737
> 
> 标签：java, spring, annotations

我有一个简单的应用程序，但是当我尝试添加`<mvc:annotation-driven />`到我的 servlet 时，我收到了这个错误：

```
[09/07/12 12:09:45:703 EDT] 00000053 DispatcherSer E org.springframework.web.servlet.FrameworkServlet initServletBean Context initialization failed
                                 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': Invocation of init method failed; nested exception is java.lang.IllegalMonitorStateException

[09/07/12 12:09:45:718 EDT] 00000053 servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0100E: Uncaught init() exception created by servlet cm-dispatcher in application CM_ContractMaintenance: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': Invocation of init method failed; nested exception is java.lang.IllegalMonitorStateException 
```

我的调度程序 servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/aop
       http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Scans the classpath of this application for @Components to deploy as beans -->
    <context:component-scan base-package="ca.gc.ic.cipo.cm.web" />    

    <!-- Saves a locale change using a cookie -->
    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver" />

    <!-- Application Message Bundle -->
    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="messages" />
        <property name="cacheSeconds" value="0" />
    </bean>

    <!-- Resolves view names to protected .jsp resources within the /WEB-INF/views directory -->
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean> 

    <!-- Configures the @Controller programming model -->
    <mvc:annotation-driven />

</beans> 
```

我的 Web.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

    <display-name>Contract Maintenance Web Application</display-name>

    <!-- Reads request input using UTF-8 encoding -->
    <filter>
        <filter-name>characterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>characterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Handles all requests into the application -->
    <servlet>
        <servlet-name>cm-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/cm-dispatcher-servlet.xml
            </param-value>          
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>cm-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- Spring Security --> 
<!--    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
                  org.springframework.web.filter.DelegatingFilterProxy
                </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/</url-pattern>
    </filter-mapping>   
 -->

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener </listener-class>
    </listener>

    <error-page>
        <error-code>404</error-code>
        <location>/WEB-INF/jsp/404.jsp</location>
    </error-page>

    <error-page>
        <exception-type>java.lang.Exception
        </exception-type>
        <location>/WEB-INF/jsp/404.jsp</location>
    </error-page>

    <!-- Datasource definition section -->
    <resource-ref>
        <description>The datasource reference for the Contract Maintenance
            Application. There will be a corresponding reference bound in
            'ibm-web-bnd.xml'.</description>
        <res-ref-name>CMDatasource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
    </resource-ref>

</web-app> 
```

我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>cipo-parent</artifactId>
    <groupId>ca.gc.ic.cipo</groupId>
    <version>1.1</version>
  </parent>

  <groupId>ca.gc.ic.cipo.cm</groupId>
  <artifactId>cm-webapp</artifactId>
  <packaging>war</packaging>
  <version>1.1</version>
  <name>cm-webapp Maven Webapp</name>
  <url>http://maven.apache.org</url>

  <properties>
    <spring.version>3.1.1.RELEASE</spring.version>
    <spring.security.version>3.1.0.RELEASE</spring.security.version>

  </properties>

   <dependencies>
    <dependency>
        <groupId>ca.gc.ic.cipo.cm</groupId>
        <artifactId>cm-product-core</artifactId>
        <version>1.1</version>
    </dependency>          
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>        
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
    </dependency>
    <dependency>
      <groupId>commons-configuration</groupId>
      <artifactId>commons-configuration</artifactId>
      <version>1.6</version>      
    </dependency>
      <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>1.4</version>      
    </dependency>
    <dependency>
      <groupId>commons-lang</groupId>
      <artifactId>commons-lang</artifactId>
      <version>2.5</version>      
    </dependency>
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>1.1.1</version>      
    </dependency>

    <!-- Spring 3 dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!--  Reinject dependencies due to Spring Security -->
    <!--  Spring Aspect Oriented Programming (AOP) Framework --> 
    <dependency>         
        <groupId>org.springframework</groupId>         
        <artifactId>spring-aop</artifactId>         
        <version>${spring.version}</version>     
    </dependency>

    <!-- Spring Core Framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Spring Application Context --> 
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Spring JDBC  --> 
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!--  Spring Bean Factory and JavaBeans utilities -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Spring Core Framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!--  Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.4</version>
        <scope>runtime</scope>
    </dependency>
    <dependency> 
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <version>1.6.1</version>
    </dependency>
  </dependencies>

  <build>
    <finalName>cm-webapp</finalName>
  </build>
</project> 
```

帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:55:55.347

我看到您在 Websphere 上遇到此错误 - 我猜这是因为 Websphere 提供的 JSR 303 验证器实现可能与您在依赖项中拥有的休眠程序冲突。你可以尝试两件事 -

一种是在运行时部署中删除 hibernate-validator jar，这可能会强制验证器使用 IBM 提供的那个，

第二个如果第一个不起作用，将强制使用hibernate验证器。你可以这样做：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">

            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
                    <property name="providerClass" value="org.hibernate.validator.HibernateValidator"></property>
                </bean>
            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:37:27.633

假如说 ：

```
<context:component-scan base-package="ca.gc.ic.cipo.cm.web" /> 
```

是您的控制器所在的位置，请尝试将`<mvc:annotation-driven />`命令放在它之前。

这就是我在春季 3.0.5 上所做的。我认为它与 3.1 相同。

还要注意的是，我通常也将我的控制器放在`<context:component-scan`最后一个，毕竟 localresolver、viewresolver 等......春天太多的魔法有时会弄乱整个应用程序的初始化。

# android - Android 应用和网络应用 (appengine) 之间的 Google Drive 文件共享

> ID：11400456
> 
> 赞同：1
> 
> 时间：2012-07-09T17:57:08.660
> 
> 标签：android, google-app-engine, google-drive-api

我正在尝试从我的 android 应用程序和我的网站访问 Google Drive 文件。我使用了两个客户端 ID，一个用于 android 应用程序（已安装应用程序的客户端 ID），另一个用于网站（Web 应用程序的客户端 ID）。这些客户端 ID 属于同一个 google apis 项目。Android 和 Web 应用程序都可以正常工作。他们可以上传和列出文件。（他们的范围：[https](https://www.googleapis.com/auth/drive.file) ://www.googleapis.com/auth/drive.file = 对应用程序创建或打开的文件的按文件访问）

这是一个问题，从 Android 应用程序上传的文件在 Web 应用程序中不可见...

我猜即使 Android 和 Web 应用程序具有来自同一个 google apis 项目的客户端 ID，Google 也不认为它们是一种应用程序服务。

有没有办法解决这个问题？我想知道是否有一种方法可以将同一个 google apis 客户端 ID 用于 Web 和 Android 应用程序，或者授予从这两个应用程序读取和修改文件的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:38:34.667

这是 Android 的 OAuth 2.0 流程中的一个已知限制，将随着[Google Play 服务](https://developers.google.com/android/google-play-services/)的发布（即将推出）得到解决。

查看此 Google I/O 2012 会议以了解有关其工作原理的更多信息：[https ://developers.google.com/events/io/sessions/gooio2012/121/](https://developers.google.com/events/io/sessions/gooio2012/121/)

同时，您可以使用的一种解决方法是使用查询参数将[API 密钥](https://developers.google.com/console/help/#WhatIsKey)与每个请求一起传递。`?key=<API_KEY>`

# c# - 在gridview中格式化列的简洁方法？

> ID：11400458
> 
> 赞同：0
> 
> 时间：2012-07-09T17:57:20.573
> 
> 标签：c#, asp.net

我意识到这是一个简单的问题，但是尽管进行了搜索，但我找不到任何针对我的问题的具体内容。

我有一个填充了 9 列左右的网格视图。我想更改列名并编辑可见列的数量。所以而不是

```
| x | y | z |
  2   6   7 
```

我想要

```
|new x|new z|
   2     7 
```

我意识到我可以手动编辑列名并将它们设置为可见或不可见，但是有没有办法执行以下操作：if (column = y) then (display column) and (column name = new y)？

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:02:17.267

您可以处理[GridView.RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件以在绑定列时对其进行修改，并在此时应用您想要的任何更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:15:37.043

您可以在页面加载事件或网格加载中执行以下操作：

```
foreach(BoundField b in grid.Columns)
{
   if(b.HeaderText == 'y')
   {
      b.HeaderText = "new y";
   } else {
      b.Visible = false;
   }
} 
```

# jquery - 如何在 jQuery Datatables 分页中返回特定页面？

> ID：11400459
> 
> 赞同：20
> 
> 时间：2012-07-09T17:57:39.703
> 
> 标签：jquery

我在每一行都有一个数据和“编辑”按钮。当我单击该按钮时， /edit/ url 打开。到目前为止一切都很好。但如果我需要返回数据表，它从第一页开始。我能为此做些什么？

```
 $('#table').dataTable({
        "sDom" : 'rtFip>',
        'fnDrawCallback' : function() {
            $('input:checkbox, input:radio').checkbox();
        },
        'sPaginationType' : 'full_numbers',
        "bServerSide" : true,
        "sAjaxSource" : "{% url 'get_menu_list' %}"
  }); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-09T18:27:48.280

DataTables 可以选择将状态存储在 cookie 中。

```
$(document).ready(function() {
    $('#example').dataTable( {
        "stateSave": true
    } );
} ); 
```

[http://datatables.net/examples/basic_init/state_save.html](http://datatables.net/examples/basic_init/state_save.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-30T21:29:45.897

对于大型表，将状态存储在 cookie 中失败。此本地存储解决方案适用于大型表。

```
$(document).ready(function() {
    $('#example').dataTable( {
        "bStateSave": true,
        "fnStateSave": function (oSettings, oData) {
            localStorage.setItem( 'DataTables', JSON.stringify(oData) );
        },
        "fnStateLoad": function (oSettings) {
            return JSON.parse( localStorage.getItem('DataTables') );
        }
    } );
} ); 
```

来源：[http ://datatables.net/blog/localStorage_for_state_saving](http://datatables.net/blog/localStorage_for_state_saving)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T18:20:11.157

**如何在 jQuery Datatables 分页中返回特定页面？**

采用`fnPagingInfo`

*获取有关 DataTables 当前用于显示每个页面的分页设置的信息，包括显示的记录数、数据集中的起点和终点等。*

```
 $.fn.dataTableExt.oApi.fnPagingInfo = function ( oSettings )
      {
        return {
          "iStart":         oSettings._iDisplayStart,
          "iEnd":           oSettings.fnDisplayEnd(),
          "iLength":        oSettings._iDisplayLength,
          "iTotal":         oSettings.fnRecordsTotal(),
          "iFilteredTotal": oSettings.fnRecordsDisplay(),
          "iPage":          Math.ceil( oSettings._iDisplayStart / oSettings._iDisplayLength ),
          "iTotalPages":    Math.ceil( oSettings.fnRecordsDisplay() / oSettings._iDisplayLength )
        };
      };

      $(document).ready(function() {
      $('#example').dataTable( {
      "fnDrawCallback": function () {
      alert( 'Now on page'+ this.fnPagingInfo().iPage );
      }
      } );
      } ); 
```

来源：[http ://datatables.net/plug-ins/api](http://datatables.net/plug-ins/api)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-09T23:23:26.757

这是在[v1.10.7](https://datatables.net/examples/basic_init/state_save.html)中的操作方法：

```
$(document).ready(function() {
    $('#example').dataTable( {
        stateSave: true
     } );
} ); 
```

# c# - 在远程 sql 服务器上部署 .dll？

> ID：11400462
> 
> 赞同：2
> 
> 时间：2012-07-09T17:58:11.500
> 
> 标签：c#, sql, visual-studio-2010

我正在尝试创建一个程序集，但我的远程 sql 服务器无法访问我的 .dll 文件。

```
create assembly BarcodeSql 
from 'X:\test.dll' 
WITH PERMISSION_SET = SAFE 
```

我不知道如何将 test.dll 放在我的 sql 服务器上，但我知道我可以发送一个序列化的 dll 而不是 dll 的路径。如何序列化dll？我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T18:05:57.667

> 我正在尝试创建一个程序集，但我的远程 sql 服务器无法访问我的 .dll 文件。

这是因为它`X:\`在运行 SQL 实例的服务器上查找，而不是从运行 SQL 的位置。

> 如何序列化dll？

您可以在 CREATE ASSEMBLY 中指定网络路径：

```
create assembly BarcodeSql 
from '\\yourmachine\sharetox\test.dll' 
WITH PERMISSION_SET = SAFE 
```

或者，你真的可以序列化它。使用 PowerShell：

```
"0x" + [System.BitConverter]::ToString([System.IO.File]::ReadAllBytes("X:\text.dll")).Replace("-", "") 
```

这将打印出一些大的十六进制值。然后，您可以在创建程序集时使用 VARBINARY 文字：

```
create assembly BarcodeSql 
from 0x23456789
WITH PERMISSION_SET = SAFE 
```

其中 0x123456789 是 powershell 脚本的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:02:13.693

它只是简单的二进制表示。您可以使用任何 HEX 编辑器，或类似的东西：

```
public string GetAssemblyBits(string assemblyPath)
{
      StringBuilder builder = new StringBuilder();
      builder.Append("0x");

      using (FileStream stream = new FileStream(assemblyPath,
            FileMode.Open, FileAccess.Read, FileShare.Read))
      {
            int currentByte = stream.ReadByte();
            while (currentByte > -1)
            {
                  builder.Append(currentByte.ToString("X2",
CultureInfo.InvariantCulture));
                  currentByte = stream.ReadByte();
            }
      }

      return builder.ToString();
} 
```

此外，您可以从网络路径加载程序集。

```
CREATE ASSEMBLY assembly_name
[ AUTHORIZATION owner_name ]
FROM { <client_assembly_specifier> | <assembly_bits> [ ,...n ] }
[ WITH PERMISSION_SET = { SAFE | EXTERNAL_ACCESS | UNSAFE } ]
[ ; ]
<client_assembly_specifier> :: =
        '[\\computer_name\]share_name\[path\]manifest_file_name'
  | '[local_path\]manifest_file_name'

<assembly_bits> :: =
{ varbinary_literal | varbinary_expression } 
```

# c# - 选定项目的 WPF 触发器

> ID：11400463
> 
> 赞同：0
> 
> 时间：2012-07-09T17:58:11.123
> 
> 标签：c#, wpf, xaml, mvvm, listbox

我正在使用 MVVM 轻框架。在我的一个页面上，我有一个列表框，其中包含一个绑定列表和一个绑定的选定项目。我有一个样式应该突出显示该列表框中的选定项目。但是，直到我物理单击该项目才突出显示（刚绑定时它不会突出显示该项目）。

XAML：

```
<UserControl.Resources>
        <hartvm:ViewLocator x:Key="HartvilleLocator" d:IsDataSource="True" />
        <DataTemplate DataType="{x:Type Quotes:QuotePetSummaryItem}">
            <Views:QuoteSummaryItem DataContext="{Binding}" />
        </DataTemplate>
        <Style x:Key="ListboxItemStyle" TargetType="{x:Type ListBoxItem}">
            <Style.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"/>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/>
            </Style.Resources>
            <Setter Property="BorderBrush" Value="Red"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="False">
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Opacity" Value="40"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="Opacity" Value="100"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
    <UserControl.DataContext>
        <Binding Source="{StaticResource HartvilleLocator}" Path="QuoteSummary" />
    </UserControl.DataContext>
    <Border>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Border BorderBrush="Black" BorderThickness="0">
                <TextBlock TextWrapping="Wrap" Text="Quote Summary" Margin="5,0,0,0" FontSize="21.333" Foreground="{DynamicResource ControlHeaderBrush}" FontFamily="Verdana"/>
            </Border>
            <ScrollViewer d:LayoutOverrides="Height" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" Grid.Row="1" Margin="10,10,5,10">
                <telerik:RadBusyIndicator IsBusy="{Binding IsProcessing}">
<ListBox ItemsSource="{Binding DefaultList}" SelectedItem="{Binding SelectedDefault}" Background="{x:Null}" ItemContainerStyle="{StaticResource ListboxItemStyle}"> 

                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    </ListBox>
                </telerik:RadBusyIndicator>
            </ScrollViewer>
        </Grid>
    </Border>
</UserControl> 
```

代码（以编程方式选择列表框中的项目）：

```
public QuotePetSummaryItem SelectedDefault { get; set; }

private void SelectDefault()
        {
            if (DefaultList== null || DefaultList.First().Pet == null) return;

            SelectedDefault = DefaultList.First();

            MessengerService.Send(SelectionMessage.Create(SelectedDefault.SubDefault));
        } 
```

正在发送的消息并不重要，并且在另一个页面上做一些其他的工作。SelectedDefault 属性是此示例中唯一使用的属性。

有人知道我需要做什么才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:59:28.127

看起来绑定（因此您的视图）不知道所选项目属性已更改。

在 SelectedDefault 的设置器中，您需要使用 INotifyPropertyChanged 接口创建某种通知。

我只是快速浏览了 MVVM 灯光框架并根据示例判断，如果您的视图模型从 ViewModelBase 继承，则使用字段支持的属性并调用 RaisePropertyChanged：

```
 private QuotePetSummaryItem _selectedDefault;
    public QuotePetSummaryItem SelectedDefault
    {
        get { return _selectedDefault; }
        set
        {
            _selectedDefault = value;
            RaisePropertyChanged("SelectedDefault");
        }
    } 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:01:07.297

第一，您必须将所选项目的绑定模式设置为双向

```
<ListBox ItemsSource="{Binding DefaultList}" SelectedItem="{Binding SelectedDefault, Mode=TwoWay}" Background="{x:Null}" ItemContainerStyle="{StaticResource ListboxItemStyle}"> 
```

第二在您的视图模型中，您必须实现 INotifyPropertyChanged 并正确提升它。看看 Rock Counters 的回答。

如果这一切都不起作用，请检查您的 vs 输出窗口是否存在绑定错误。

# php - 输入值并选择返回数据

> ID：11400464
> 
> 赞同：0
> 
> 时间：2012-07-09T17:58:22.900
> 
> 标签：php, html

我正在尝试创建一个网页，用户可以在其中提交他们知道的信息并选择他们想要返回的信息。例如，如果他们知道提交的 ID 号，他们可以输入它并要求返回值是 ID 号和产品名称。

正在检索的信息存储在 MySQL 数据库中，html 页面布局有选择菜单、文本框和复选框（以便用户可以选择名称或输入其他信息，然后使用复选框进行选择他们想要返回的其他信息）。

这是相关的html：

```
<table><tr>
<form name="input" method="post" action="next.php">
<td width="120">Flowcell ID:<br />
<select name = "Flowcell_ID">
<option disabled="disabled" selected="selected">
Select...
</option>
<?php
$link = mysqli_connect("localhost","user","pass","db");
$query = "SELECT DISTINCT ID FROM table";
$result = mysqli_query($link, $query);
while ($row = mysqli_fetch_array($result)){
$id = $row['ID'];
echo "<option value=\"$id\">$id</option>";
}
mysqli_close($link);
?>
</select></td>
</tr><tr>
<td width="120">Name:<input type="text" name="Name" /></td>
</tr><tr>
<td width="120">Date:<input type="text" name="Date" /></td>
</tr><tr>
<td width="120">Group:<input type="text" name="Group" /></td>
</tr><tr>
<td width="120"><input type="checkbox" name="options[]" value="ID">ID</input></td>
<td width="120"><input type="checkbox" name="options[]" value="Name">Name</input></td>
<td width="120"><input type="checkbox" name="options[]" value="Date">Date</input></td>
<td width="120"><input type="checkbox" name="options[]" value="Group">Group</input></td>
</tr></table> 
```

到目前为止，我唯一的 php 是：

```
$id = $_POST['ID'];
$name = $_POST['Name'];
$date = $_POST['Date'];
$group = $_POST['Group']; 
```

我将如何生成一个看起来像的 MySQL 查询

```
SELECT [checked checkboxes] FROM table WHERE [information field] = [user-entered information] 
```

?

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:05:06.550

您可以增量构建查询：

```
$fields = array(
   'ID'   => 'id',
   'Name' => 'name',
   'Date' => 'date',
   'Group' => 'group',
);

$query = 'SELECT';  // Optional fields to be displayed may go here
$comma = ' ';       // and if they do, start with $comma = ', ';

$where = array();

foreach($fields as $post => $mysql)
{
    // here we have $post equal to 'ID', our POST field, and
    // $mysql equal to, say, 'Id' -- the MySQL field name.
    // Check whether options['ID'] is set. If so, we must get
    // the _POST[ID] field and check its contents against "Id" field in DB.
    if (in_array($post, $_POST['options']))
    {
        $query .= "$comma$mysql";
        $comma = ', ';
        // Add WHERE condition
        $where[] = "$mysql = '" . mysql_real_escape_string($_POST[$post]) . "'";
    }
}
// $comma, the separator between option fields, also doubles up as a check
// to see whether we have conditions.
// another possibility would be, "if (empty($where))"
if (' ' == $comma)
   die("You must select at least one checkbox!");

$query .= ' FROM table WHERE ';
// Build WHERE condition
$query .= '(' . implode(' AND ', $where).')';

// Other conditions may go here (e.g. " AND record_valid = 1 ")

$query .= ';'; 
```

# c++ - 试图从整个应用程序访问 QGLWidget

> ID：11400466
> 
> 赞同：1
> 
> 时间：2012-07-09T17:58:25.113
> 
> 标签：c++, opengl, qt4, qglwidget

我基本上想要做的是创建 a 的一个实例`QGLWidget`（或者更确切地说是 的派生类`QGLWidget`），将其添加到 a `QMainWindow`，然后`QGLWidget`从我的 QTCreator 程序中的任何位置访问 的渲染上下文，以便能够在任何地方调用裸 OpenGL我选择了。

我尝试过的事情：

1）创建一个`QGLWidget`被调用的子类`OGLWidget`并将其变成一个单例，然后尝试将单例类“OGLWidget”子类化。我认为这将使我能够访问 OGLWidget 单例正在使用的相同渲染上下文，但它不起作用。

2）使用构造函数`QGLWidget(QWidget * parent, QGLWidget * shared, Qt::WindowFlags)`。对于这个，我尝试将单例对象转换为 QGLWidget，然后在我将 QGLWidget 子类化到另一个名为“Display”的类中时将其粘贴在此构造函数中。我尝试在每个类 openGl 调用之前调用 makeCurrent ，但只有原始单例会绘制。我还检查了 isSharing 并返回 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:00:39.827

首先，虽然信号\插槽是 Qt 的一个强大而令人敬畏的特性，但由于增加的开销和渲染顺序问题，我永远不会在我的渲染例程中使用它们；尤其是后者。此外，没有必要按照您建议的方式进行。因此，在我看来，您将渲染例程分散到整个项目中的想法是一个非常糟糕的想法。我在自己的项目中所做的如下：

我的派生`QGLWidget`拥有一个`Renderer`作为单例实现的类。它包含几个函数中的所有 OpenGL 调用。我创建了一个系统，其中可绘制的所有内容都派生自同一个基类。当我想渲染时，我构建了一个渲染队列，我`priority_queue`用自定义排序函数实现了它。当是渲染帧的时候了，我只是不停地弹出并渲染，直到队列为空。使用事件驱动的渲染系统执行此操作，同时保持正确的渲染顺序可能会让您发疯。

为了完整起见，我的（简化的）QGLWidget 定义：

```
#include <QtOpenGL/QGLWidget>

#include "global.h"
#include "renderer.h"

/**
 * Derivation of QGLWidget.
 */
class Engine : public QGLWidget
{
    Q_OBJECT
private:
    Renderer* renderer;
private slots:
    void renderTimeout(); // my render-loop is timer based
    void onTap(QMouseEvent* qme);
    void onMove(QMouseEvent* qme);
protected:
    void initializeGL();
    void resizeGL(int w, int h);
    /* for debugging I use QPainter for drawing overlays, 
     * so I can't use PaintGL */
    void paintEvent(QPaintEvent *event); 
    void mousePressEvent(QMouseEvent* qme);
    void mouseMoveEvent(QMouseEvent* qme);
public:
    Engine( QWidget* parent = 0 );
    ~Engine();
signals:
    void tapOccurred(QMouseEvent* qme);
    void moveOccurred(QMouseEvent* qme);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:10:37.963

为什么不直接使用 Qt 的设计用途：使用信号和插槽？也许你的问题比我乍一看更复杂，但在我看来，如果你添加插槽`QGLWidget`并将它们连接到应用程序中的任何位置的信号，你就可以完成你想要的。例如，可以在`QMainWindow`. 然后这个槽可以调用一个实现`paintGL()`或`paintEvent()`更新`QGLWidget`. 像这样：

```
class MyQGLWidget : public QGLWidget {
// constructors and destructor...

protected:
    void paintGL();      // <-- implement this in any way you want if you use OpenGL
    void paintEvent();   // <-- or implement this one if you prefer using QPainter

public slots:
    void updateMyWindow();
}

void MyQGLWidget::updateMyWindow() {
    // Change some data here in any way you like
    // ...

    paintGL();
} 
```

# aptana - Aptana Studio 3 是否支持 ajax 提示？

> ID：11400467
> 
> 赞同：2
> 
> 时间：2012-07-09T17:58:27.610
> 
> 标签：aptana

我正在尝试使用这个工具。并且想知道 Aptana Studio 3 是否支持 jquery 的提示？所以它可以帮助我进行有效的编码。谢谢。

# excel - 基于日期的条件格式

> ID：11400471
> 
> 赞同：0
> 
> 时间：2012-07-09T17:58:30.937
> 
> 标签：excel, conditional-formatting

**尝试在 Excel 中设置工作时间卡，将日期放在工作表的左侧：**

2011 年 1 月 1 日星期五

2011 年 1 月 2 日星期六

2011 年 1 月 3 日星期日

**等等。我想将周末日期的行变灰，如下所示：**

2011 年 1 月 1 日星期五

```
Sat 1/2/11
Sun 1/3/11 
```

**有没有一种明显的方法可以使用条件格式来做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:03:50.887

当然，您可以使用该`WEEKDAY`函数来确定星期几，如下所示：

```
=WEEKDAY($A1,2)>5 
```

根据一周中的哪几天被视为周末，您可能需要修改第二个参数。[您可以在此处](http://office.microsoft.com/en-us/excel-help/weekday-function-HP010343015.aspx)找到有关该`WEEKDAY`函数（和第二个参数）的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:04:14.523

假设日期在 A 列中：

```
=IF(OR(WEEKDAY($A1)=1,WEEKDAY($A1)=7),1,0) 
```

读取如果工作日是星期日或星期六，则为 True（使用条件格式）

或者您可以修改相同的公式，使“工作日”从星期一开始，如下所示：

```
=IF(WEEKDAY($A1,2)>5,1,0) 
```

# python - 列表索引效率（python 2 vs python 3）

> ID：11400472
> 
> 赞同：27
> 
> 时间：2012-07-09T17:58:33.463
> 
> 标签：python, performance, indexing, osx-leopard

在回答另一个[问题](https://stackoverflow.com/q/11400163/748858)时，我建议使用`timeit`来测试用正整数与负整数索引列表之间的区别。这是代码：

```
import timeit
t=timeit.timeit('mylist[99]',setup='mylist=list(range(100))',number=10000000)
print (t)
t=timeit.timeit('mylist[-1]',setup='mylist=list(range(100))',number=10000000)
print (t) 
```

我用 python 2.6 运行了这段代码：

```
$ python2.6 test.py
0.587687015533
0.586369991302 
```

然后我用 python 3.2 运行它：

```
$ python3.2 test.py
0.9212150573730469
1.0225799083709717 
```

然后我挠了挠头，做了一点谷歌搜索，并决定在这里发布这些观察结果。

操作系统：OS-X (10.5.8) -- Intel Core2Duo

这对我来说似乎是一个非常显着的差异（超过 1.5 倍的差异）。有谁知道为什么 python3 这么慢 - 特别是对于这样一个常见的操作？

**编辑**

我在我的 Ubuntu Linux 桌面（Intel i7）上运行了相同的代码，并在 python2.6 和 python 3.2 上取得了可比的结果。这似乎是一个依赖于操作系统（或处理器）的问题（其他用户在 Linux 机器上看到了相同的行为——见评论）。

**编辑 2**

在其中一个答案中要求启动横幅，所以这里是：

```
Python 2.6.4 (r264:75821M, Oct 27 2009, 19:48:32) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin 
```

和：

```
Python 3.2 (r32:88452, Feb 20 2011, 10:19:59) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin 
```

**更新**

我刚刚从[http://www.python.org/download/安装了新版本的 python2.7.3 和 python3.2.3](http://www.python.org/download/)

在这两种情况下，我都采取了

> “Python xx3 Mac OS X 32 位 i386/PPC 安装程序（适用于 Mac OS X 10.3 到 10.6 [2]）”

因为我在 OS X 10.5 上。以下是新的时间安排（通过多次试验相当一致）：

蟒蛇2.7

```
$python2.7 test.py
0.577006101608
0.590042829514 
```

蟒蛇3.2.3

```
$python3.2 test.py
0.8882801532745361
1.034242868423462 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-09T18:24:18.240

这似乎是某些 Python 3.2 版本的产物。此时最好的假设是所有 32 位 Intel 版本都有减速，但没有 64 位版本。请继续阅读以了解更多详情。

您没有运行几乎足够的测试来确定任何事情。重复你的测试很多次，对于同一个测试，我得到的值从 0.31 到 0.54 不等，这是一个巨大的变化。

所以，我用`10x`数字和运行了你的测试`repeat=10`，使用了一堆不同的 Python2 和 Python3 安装。丢弃顶部和底部的结果，平均其他 8 个，然后除以 10（得到一个与您的测试等效的数字），这就是我所看到的：

```
 1\. 0.52/0.53 Lion 2.6
 2\. 0.49/0.50 Lion 2.7
 3\. 0.48/0.48 MacPorts 2.7
 4\. 0.39/0.49 MacPorts 3.2
 5\. 0.39/0.48 HomeBrew 3.2 
```

所以，看起来 3.2 实际上稍微快一点`[99]`，和`[-1]`.

但是，在 10.5 机器上，我得到了以下结果：

```
 1\. 0.98/1.02 MacPorts 2.6
 2\. 1.47/1.59 MacPorts 3.2 
```

回到原来的（Lion）机器上，我在 32 位模式下运行，得到了这个：

```
 1\. 0.50/0.48 Homebrew 2.7
 2\. 0.75/0.82 Homebrew 3.2 
```

因此，似乎 32 位才是最重要的，而不是 Leopard 与 Lion、gcc 4.0 与 gcc 4.2 或 clang、硬件差异等。这将有助于在 Leopard 下测试 64 位版本，使用不同的编译器等.，但不幸的是，我的 Leopard 盒子是第一代 Intel Mini（带有 32 位 Core Solo CPU），所以我无法进行该测试。

作为进一步的间接证据，我在 Lion 盒子上进行了一系列其他快速测试，看起来 32 位 3.2 比 2.x 慢了约 50%，而 64 位 3.2 可能比 2 快一点。 X。但如果我们真的想支持这一点，就需要有人挑选并运行一个真正的基准测试套件。

无论如何，此时我最好的猜测是，在优化 3.x 分支时，没有人在 32 位 i386 Mac 版本上投入太多精力。这实际上是他们做出的合理选择。

或者，或者，他们甚至没有在 32 位 i386 时期投入太多精力。这种可能性可以解释为什么 OP 在 linux 机器上看到 2.x 和 3.2 给出了相似的结果，而 Otto Allmendinger 在 linux 机器上看到 3.2 的速度与 2.6 相似。但由于他们都没有提到他们运行的是 32 位还是 64 位 linux，所以很难知道这是否相关。

我们还没有排除许多其他不同的可能性，但这似乎是最好的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T20:14:38.090

这是一个至少说明部分答案的代码：

```
$ python
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import timeit
>>> t=timeit.timeit('mylist[99]',setup='mylist=list(range(100))',number=50000000)
>>> print (t)
2.55517697334
>>> t=timeit.timeit('mylist[99L]',setup='mylist=list(range(100))',number=50000000)
>>> print (t)
3.89904499054

$ python3
Python 3.2.3 (default, May  3 2012, 15:54:42) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import timeit
>>> t=timeit.timeit('mylist[99]',setup='mylist=list(range(100))',number=50000000)
>>> print (t)
3.9906489849090576 
```

python3 没有旧的 int 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:24:11.557

Python 3`range()`是 Python 2 `xrange()`。如果要`range()`在 Python 3 代码中模拟 Python 2，则必须使用`list(range(num)`. 越大`num`，原始代码的差异就越大。

索引应该独立于列表中存储的内容，因为列表仅存储对目标对象的引用。引用是无类型的，并且都是相同的。因此，列表类型是一种同质的数据结构——从技术上讲。索引是指将索引值变成起始地址+偏移量。最多减去一次，计算偏移量非常有效。与其他操作相比，这是非常便宜的额外操作。

# objective-c - __strong 或 __weak （或其他）用于覆盖 -isEqual:? 时的参数

> ID：11400475
> 
> 赞同：0
> 
> 时间：2012-07-09T17:58:47.390
> 
> 标签：objective-c, automatic-ref-counting

我`- (BOOL) isEqual:(id)object`在一个自定义类中重写。

在、、 和4 个选项中，`__weak`我应该在方法签名的参数上使用哪一个？`__strong``__autoreleasing``__unsafe_unretained``isEqual:`

我认为这就是问题所在，因为当我尝试将我的类的实例添加到 a`NSMutableDictionary`时，我`EXC_BAD_ACCESS(code=2, address=0x10)`在方法的声明中得到了 a 。

换句话说，调试器获取的行`EXC_BAD_ACCESS`是：

```
- (BOOL) isEqual:(id __strong)object { 
```

在执行任何方法体之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:42:25.273

正确的答案是“如果您的访问权限不正确，那么您正在尝试读取或写入一个没有您认为其中包含的内容的区域。”，@Dustin Rowland 在评论中说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:40:41.823

默认情况下，ARC 使用`__strong`，这意味着参数在方法内使用期间通过保留/释放保留。为了导致`EXC_BAD_ACCESS`，一个对象（参数本身，或者在`isEqual:`实现内部的方法调用中使用的任何其他对象）在访问它时必须被过度释放。这不能通过更改限定符来解决。

旁注：但要小心，当您更改限定符时会看到任何变化。编译器优化可能决定跳过某些调用是安全的。例如，将以下代码添加到文件并查看用于归档的程序集（产品 -> 生成输出 -> 程序集文件）（使用 -Os）。

```
- (void)logObject:(id)o
{
    NSLog(@"%@", o);
}

- (void)call
{
    id o = [[NSObject alloc] init];
    [self logObject:o];
} 
```

尽管参数 of`logObject:`是默认值`__strong`，但在程序集输出中没有保留/释放。将参数更改为`-logObject:`、`__strong`或`__weak`给出完全相同的程序集输出`__unsafe_unretained`。`__autoreleasing`但是，如果您使用 the 复制该行，`NSLog`则不同类型限定符的汇编代码会发生变化。

# c# - 固定函数指针

> ID：11400476
> 
> 赞同：8
> 
> 时间：2012-07-09T17:58:51.777
> 
> 标签：c#, interop, c++-cli

我需要将托管回调传递给非托管 TCP 接收器。由于它是一个需要在应用程序的生命周期中存在的线程，我需要防止它被垃圾收集。我到处读到不需要固定函数指针，GCHandle.Alloc 将完成防止垃圾收集的工作。

但这是给定的吗？我已经看到托管此代码的 AppPool 因访问冲突而崩溃。为什么我不应该怀疑由于函数指针被垃圾回收而发生此错误的事实？

这篇[文章](https://stackoverflow.com/a/3366436/382795)支持了这个事实。

更新：这似乎大大减少了崩溃。这种方法有问题吗？

```
typedef void (__cdecl *ProcMessageFunc)(void* param, void* paramBuf, ULONG bufSize);
FuncDelegate^ fp = gcnew MessageFuncDelegate(this, &Handler); 
pin_ptr<MessageFuncDelegate^> pinnedFunctionPointer = &fp; 
ret = Receiver ((ProcMessageFunc)pinnedFunctionPointer); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T19:28:25.613

我完全按照您的建议做 - GCHandle.Alloc 在代表上，但没有固定 - 在许多不同的平台和 .NET 版本 2.0 - 4 上广泛使用时没有任何问题。比如：

```
 DelegateHandle = GCHandle.Alloc(xlDelegate);
 FunctionPointer = Marshal.GetFunctionPointerForDelegate(xlDelegate); 
```

`FunctionPointer`然后传递给本机代码，并保留`DelegateHandle`以供以后清理。

这似乎是最好的参考： http: [//msdn.microsoft.com/en-us/library/367eeye0](http://msdn.microsoft.com/en-us/library/367eeye0(v=vs.80).aspx) (v=vs.80).aspx 。

您指向的帖子中没有任何内容与此参考相矛盾-您确实需要保护委托免受垃圾收集，只是*不需要固定*。

# php - 如何将IP地址转换为国家？

> ID：11400479
> 
> 赞同：1
> 
> 时间：2012-07-09T17:59:08.467
> 
> 标签：php

我正在创建一个像 nytime.com 这样的新闻网站，但有多个国家（不同国家的新闻和语言不同）。

所以我需要将 IP 地址转换为国家，然后将用户重定向到适当的子域。例如，如果西班牙用户访问**mysite.com**，他将被重定向到**es.mysite.com**。

如果您愿意，您可以向我提出其他解决方案，但请记住它必须针对搜索引擎进行优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:02:53.760

您不能直接将 IP 转换为国家/地区。但是，您可以使用具有针对国家/地区的 IP/IP 范围的数据库，这是大多数网站的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:03:11.773

MaxMind 以适用于许多数据库和编程语言的格式或作为 Apache 插件出售这些数据。它并不总是正确的，但它可能尽可能准确。

[http://www.maxmind.com/app/ip-location](http://www.maxmind.com/app/ip-location)

这种方法而不是 JS 方法的优点是不会提示用户透露他们的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:02:50.280

[http://html5demos.com/geo/](http://html5demos.com/geo/)

这是一个很好的免费解决方案。

您可以为 php 地理定位付费，但价格昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:05:12.993

[http://software77.net/geo-ip/](http://software77.net/geo-ip/)

在右侧的边栏中，您可以下载数据库

有类似的数据库和服务，只需谷歌“ip to country”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T18:05:50.647

查看

*   [麦克斯迈德](http://www.maxmind.com)和
*   [IPinfoDB.com](http://api.ipinfodb.com/)

基本上，您需要一个数据库，您可以在其中比较手头的 IP 并找出它的国家/地区。Maxmind 为您提供自托管的数据库和代码示例，而 IPinfoDB 提供免费的 API 服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T18:07:36.793

没有内置的方法。互联网上有提供此类映射的网络服务。此类数据库“GeoIP 数据库”也可供本地使用。

但最好订阅更新的网络服务并使用它来获取位置。[Google 的 Client Location API](https://developers.google.com/loader/#ClientLocation)应该可以帮助您。

一些现代浏览器会向您发送用户位置。你可以用那个。但由于并非所有浏览器都遵循这一点，因此并不可靠。您可以查看w3.org 提供的[Geo Location API 。](http://dev.w3.org/geo/api/spec-source.html)

# python-2.7 - Scraperwiki 抓取查询：使用 lxml 提取链接

> ID：11400480
> 
> 赞同：0
> 
> 时间：2012-07-09T17:59:18.950
> 
> 标签：python-2.7, lxml, scraper, scraperwiki

我怀疑这是一个微不足道的查询，但希望有人可以帮助我解决我在尝试构建的刮板中使用 lxml 的查询。

[https://scraperwiki.com/scrapers/thisisscraper/](https://scraperwiki.com/scrapers/thisisscraper/)

我正在逐行阅读教程 3，到目前为止，我一直在尝试提取下一页链接。我可以使用 cssselect 来识别链接，但我不知道如何仅隔离 href 属性而不是整个锚标记。

任何人都可以帮忙吗？

```
def scrape_and_look_for_next_link(url):
    html = scraperwiki.scrape(url)
    print html
    root = lxml.html.fromstring(html) #turn the HTML into lxml object
    scrape_page(root)
    next_link = root.cssselect('ol.pagination li a')[-1]

    attribute = lxml.html.tostring(next_link)
    attribute = lxml.html.fromstring(attribute)

    #works up until this point
    attribute = attribute.xpath('/@href')
    attribute = lxml.etree.tostring(attribute)
    print attribute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:44:48.247

CSS 选择器可以选择*具有 href 属性*的元素，例如。`a[href]`但他们不能自己提取属性值。

从 cssselect 中获得元素后，您可以使用它`next_link.get('href')`来获取属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:30:07.987

```
link = link.attrib['href'] 
```

应该管用

# mysql - 为 MySQL 使用 2 台服务器

> ID：11400483
> 
> 赞同：0
> 
> 时间：2012-07-09T17:59:26.703
> 
> 标签：mysql, networking, dynamic, static

我的网站有 2 台服务器

*   网络服务器
    *   用于发送动态内容，主要使用 PHP 创建
    *   大量的 RAM 和快速的处理器，只有几 GB 的硬盘空间。

和一个

*   文件服务器
    *   用于发送静态内容、图像、视频等。
    *   几 TB 的硬盘空间，没有那么多的 RAM 和较慢的处理器。

我想使用 Web Server 的速度，但使用 File Server 的空间。但我听说 NFS 的开销会使它变得如此缓慢，这无关紧要......

我将使用 MySQL，我想知道我应该如何优化数据库，以便我可以将数据保留在文件服务器上，但要执行查询，并由 Web 服务器处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:06:09.290

根据我的经验，您收到的建议是正确的……在一个机器上运行 mysqld 并通过 NFS 使用远程服务器进行文件存储并不是很快（如果远程存储是 SAN，那将是另一回事）。

您可以减少访问数据库的次数，并通过在该层上缓存来利用 Web 服务器上的 RAM。考虑引入[memcached](http://memcached.org)之类的东西来帮助处理最昂贵的 MySQL 操作。

如果您的某些表很小但经常使用，您可以考虑在您的 Web 服务器上为这些表运行第二个 MySQL 实例。但请记住，您将有两个单独的数据库故障点需要管理（适当的备份、安全更新等）。

# macos - 错误：权限被拒绝（公钥）

> ID：11400487
> 
> 赞同：0
> 
> 时间：2012-07-09T17:59:34.540
> 
> 标签：macos, git, ssh, osx-lion

在[此](https://help.github.com/articles/error-permission-denied-publickey)帖子之后修复以下错误：

```
>> ssh -vT git@github.com
OpenSSH_5.6p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /Users/user/.ssh/config
debug1: Applying options for *
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
debug1: identity file /Users/user/.ssh/id_rsa type 1
debug1: identity file /Users/user/.ssh/id_rsa-cert type -1
debug1: identity file /Users/user/.ssh/id_dsa type -1
debug1: identity file /Users/user/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.1p1 Debian-5github2
debug1: match: OpenSSH_5.1p1 Debian-5github2 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'github.com' is known and matches the RSA host key.
debug1: Found key in /Users/user/.ssh/known_hosts:10
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/user/.ssh/id_rsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: /Users/user/.ssh/id_dsa
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

通过帖子确保我有一个密钥并且 SSH 正在使用它。我什至验证了公钥已附加到我的 github 帐户。不确定最后 3 行中的 -1 吗？看到所有相关的帖子，但没有帮助。

```
 debug1: identity file /Users/user/.ssh/id_rsa type 1
    debug1: identity file /Users/user/.ssh/id_rsa-cert type -1
    debug1: identity file /Users/user/.ssh/id_dsa type -1
    debug1: identity file /Users/user/.ssh/id_dsa-cert type -1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:56:42.193

我在做`ssh -T git@github.com`。我不得不这样做`ssh -T git@github.company's-github-account-name.com`。现在一切就绪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:12:55.020

似乎最有可能的问题是公钥实际上并未正确附加到您的 github 帐户。你能确认输出

```
ssh-keygen -y -f /Users/user/.ssh/id_rsa 
```

和你在 Github 里放的完全一样，如果你这样做了

```
ssh-keygen -y -f /Users/user/.ssh/id_rsa > tmp
ssh-keygen -l -f tmp 
```

..显示的指纹与[https://github.com/settings/ssh](https://github.com/settings/ssh)中显示的指纹之一完全匹配？

* * *

**编辑**：你确认了。看起来你做的一切都是正确的，那么。我想不出更多可能出错的地方。我想您可能得到了错误的远程主机（IP 是正确的，但恶意人员或行为不端的公司防火墙仍可能将数据包发送到错误的位置）。您可以通过查看您在 known_hosts 文件中存储的指纹来检查这一点：

```
ssh-keygen -F github.com > tmp
ssh-keygen -l -f tmp 
```

输出应以：

```
2048 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48 
```

如果是这样，那么我想这毕竟可能是github方面的问题。也许他们在接收您的公钥和将其传播到主 ssh 服务器之间存在某种延迟。您可能应该尝试您引用的页面底部的“联系人类”链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T02:58:22.873

可以使用以下命令对这个 GIT 问题“Git – Permission denied (publickey)”进行广泛的故障排除：

```
ssh -vT git@github.com 
```

1.  导航到主目录中的 .ssh 目录

    ```
    cd ~/.ssh 
    ```

2.  生成公钥/私钥 rsa 密钥对

    ```
    ssh-keygen 
    ```

3.  使用以下命令将 SSH 密钥复制到剪贴板

    ```
    cat id_rsa.pub | clip 
    ```

4.  导航到[https://github.com/中的 GIT 存储库](https://github.com/)

5.  转到帐户设置 -> SSH 密钥

6.  单击添加 SSH 密钥并存储密钥

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T18:07:32.410

我同意@Ava 发布的答案。使用`ssh -T git@github."company's_github_account".com`它对我有用。很多时候，我们没有意识到对于看似复杂的问题存在简单的解决方案。

# google-maps - 仅获取地理编码的 Google 地理编码服务

> ID：11400488
> 
> 赞同：0
> 
> 时间：2012-07-09T17:59:39.373
> 
> 标签：google-maps, google-geocoding-api

我们有一个药房搜索应用程序。我们正在尝试从用户那里获取输入地址，并在用户指定的半径中找到该地址周围的药房。我们计划对用户从第三方服务输入的地址进行地理编码。获得地理编码后，我们将在我们的数据库中搜索该地址附近的药店并显示结果。每个结果都会有一个链接，该链接将打开 maps.google.com 的新标签/窗口，显示该位置。

如果我们使用谷歌地理编码 API 服务来获取地理编码，他们会收费吗？我没有在我的 UI 上显示地图。这可以还是违反了谷歌条款？每天 2500 个请求是否也适用于这种情况？我看到 MapQuest 是一项仅返回地理编码的服务。

谢谢，阿维纳什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:44:45.917

仔细检查 Google 的服务条款，但通常他们会在您达到限制后开始拒绝您的 API 请求。如果您是屡犯者，他们可能会永久阻止您的 IP 使用他们的 API。限制在于您对 Geocoding API 的调用，与您是否使用他们的 maps api 显示地图无关。以下包括如何在这些限制内工作的策略：[https ://developers.google.com/maps/articles/geocodestrat](https://developers.google.com/maps/articles/geocodestrat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:54:05.233

[MapQuest](http://developer.mapquest.com)刚刚发布了他们的[Open Geocoding Web Service](http://open.mapquestapi.com/geocoding/)，它是使用[OpenStreetMap](http://www.openstreetmap.org)社区提供的数据构建的，并且（目前）对可以发出的地理编码请求的数量没有限制。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T18:09:55.560

实际上它是 25.000 应该绰绰有余;) [https://developers.google.com/maps/faq#usagelimits](https://developers.google.com/maps/faq#usagelimits)

# python - 如何从 Twisted 中的 datagramReceived 中获取多播组地址？

> ID：11400494
> 
> 赞同：3
> 
> 时间：2012-07-09T18:00:09.327
> 
> 标签：python, udp, twisted, multicast

这是来自 Twisted 的以下代码示例，用于处理接收多播。我目前正在收听具有相同客户端的许多组，并且我希望能够打印出某个数据报包来自哪个组。我认为这可以从 datagramReceived 的地址参数中接收；但是，这只给了我一个包含组绑定到的本地 ip 和端口的元组，而不是组本身的地址。

**问题：**如何在 Twisted 协议/API 中打印来自数据报的多播地址？

```
from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor

class MulticastPingClient(DatagramProtocol):

    def startProtocol(self):
        # Join the multicast address, so we can receive replies:
        self.transport.joinGroup("228.0.0.5")
        self.transport.joinGroup("229.0.2.11")
        self.transport.joinGroup("221.3.3.3")
        # Send to 228.0.0.5:8005 - all listeners on the multicast address
        # (including us) will receive this message.
        self.transport.write('Client: Ping', ("228.0.0.5", 8005))

    def datagramReceived(self, datagram, address):
        print "Datagram %s received from %s" % (repr(datagram), repr(address))

reactor.listenMulticast(8005, MulticastPingClient(), listenMultiple=True)
reactor.run() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:53:55.620

不幸的是，socket APIs Twisted wraps（通过 Python 的标准库）不提供这些信息。我建议为每个多播组使用单独的 DatagramProtocol，并为每个组监听不同的端口。尽管有人仍然可以将 UDP 数据报直接发送到该端口，但您无法将其与多播区分开来。

我有一个模糊的记忆，表明 recvmsg() API 确实提供了必要的信息，尽管我没有时间验证这一点。Twisted 12.1 有一个 recvmsg() 包装器的开头，所以这可能是一种可能的方式来将此功能添加到 Twisted（或您的代码）中，需要做更多的工作。

# jquery - jQuery click 的 IE7-8 问题

> ID：11400499
> 
> 赞同：-1
> 
> 时间：2012-07-09T18:00:33.617
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7

我真的不知道为什么 IE 会出现问题。它适用于 Chrome 和 IE9。这是我的脚本：

```
var utilityNav = function() {
$('#head-nav a').click(function(e) {
    e.preventDefault();

    $('#head-nav a').removeClass('head-link-active').next('div').removeClass('shadow').slideUp('fast').css('z-index', '7999');
    if ($(this).next('div').is(':hidden')) {
        var linkPos = $(this).position().left + $(this).width()/2 + 4;
        $(this).addClass('head-link-active');
        $(this).next('div').addClass('shadow').slideDown().css('left', linkPos + 'px').css('z-index', '8000');
    }
});
$('.utility-three').children('.utility-three-block').eq(1).addClass('borders');
}; 
```

我认为它在语法上没有任何问题，但我真的很感激一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:04:26.457

问题很可能与线路有关，

`e.preventDefault()`

对于 IE，您还需要添加，

`event.returnValue = false;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:55:59.877

最终成为与 bxSlider 的代码冲突。谢谢您的帮助。

# php - 用php编辑数组值

> ID：11400501
> 
> 赞同：0
> 
> 时间：2012-07-09T18:00:57.013
> 
> 标签：php, str-replace

我有这样的输出：

```
Array
(
    [0] => stdClass Object
        (
            [post] => john Has site <a href='http://www.mysite.com/events/info/4240'>this is a test</a>
            [date_created] => 1341853220
        )

    [1] => stdClass Object
        (
            [post] => jane Has site <a href='http://www.mysite.com/events/info/1'>test venue</a>
            [date_created] => 1341849999
        )

    [2] => stdClass Object
        (
            [post] => james Has site <a href='http://www.mysite.com/events/info/4240'>this is a test</a>
            [date_created] => 1341680695
        ) 
```

我想知道是否有任何方法可以得到这样的结果：

```
Array
(
    [0] => stdClass Object
        (
            [post] => john Has site this is a test
            [number] => 4240
            [date_created] => 1341853220
        )

    [1] => stdClass Object
        (
            [post] => jane Has site test venue
            [number] => 1
            [date_created] => 1341849999
        )

    [2] => stdClass Object
        (
            [post] => james Has site this is a test
            [number] => 4240
            [date_created] => 1341680695
        ) 
```

我想要的是消除 html 标记以及 url，只保留 url 末尾的名称和数字，以便我可以存储它并在以后使用它。我试图在 foreach 中使用 str_replace 但我找不到正确的方法来做到这一点，或者还有其他方法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:05:56.317

1.  使用 RegEx: 匹配 href `<a href='([^\']+?)'>`。

2.  `explode()`带有分隔符 ' ' 的匹配字符串`/`。

3.  获取最后一个元素`number`.

4.  构造一个带有剥离标签`post`和新元素的新对象数组`number`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:55:58.327

正如 Shubham 所说，您应该使用正则表达式。

使用 PHP 的[preg_match](http://nl3.php.net/preg_match)和以下模式，可以从帖子中检索所需的数据。之后可以创建一个具有所需结果的新数组。

`#(.+)<a[^>]+?([0-9]+)'>(.+)</a>#`

# java - @Secured 注释在 Autoproxy 的 AspectJ 模式下不起作用

> ID：11400503
> 
> 赞同：2
> 
> 时间：2012-07-09T18:01:05.643
> 
> 标签：java, spring, spring-security, aspectj

我试图让我的 Spring MVC 应用程序与 Spring @Secured 注释和 AspectJ 自动代理一起玩得很好，但它似乎没有代理或识别我的 @Secured 注释。我有一个这样的控制器：

```
@Controller
@RequestMapping("/")
public class ApplicationController {

    private ApplicationFactory applicationFactory;

    @Inject
    public ApplicationController(ApplicationFactory applicationFactory) {
        super();
        this.applicationFactory = applicationFactory;
    }

    @Secured("ROLE_USER")
    @ResponseBody
    @RequestMapping(method = GET)
    public Application getApplicationInfo() {
        return applicationFactory.buildApplication(this);
    }

} 
```

还有一个看起来像这样的 Spring Security XML：

代码：

```
 <security:global-method-security secured-annotations="enabled" mode="aspectj" proxy-target-class="true" />

  <security:http auto-config="true" use-expressions="true">
    <security:http-basic/>
  </security:http> 
```

上面是由一个 no-xml Spring @Configuration 组件加载的，如下所示：

```
@Configuration
@ComponentScan(basePackages = {"com.example"})
@EnableWebMvc
@ImportResource("classpath:security.xml")
public class ApplicationConfiguration extends WebMvcConfigurerAdapter {

} 
```

依次使用 Servlet 3.0 WebApplicationInitializer 加载：

```
public class SpringMvcInitializer implements WebApplicationInitializer {

    private final AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();

    public void onStartup(ServletContext servletContext) throws ServletException {
        context.register(ApplicationConfiguration.class);

        servletContext.addListener(new ContextLoaderListener(context));
        servletContext.addListener(new Log4jConfigListener());

        final DelegatingFilterProxy proxy = new DelegatingFilterProxy("springSecurityFilterChain", context);
        FilterRegistration.Dynamic filter = servletContext.addFilter("securityFilter", proxy);
        filter.addMappingForUrlPatterns(EnumSet.of(REQUEST), false, "/*");

        final DispatcherServlet servlet = new DispatcherServlet(context);
        ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", servlet);
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/*");
    }

} 
```

但是，Spring Security 没有检测到注释，我仍然可以在未经授权的情况下使用上面的安全端点。根据[Spring Security FAQ](http://static.springsource.org/spring-security/site/faq.html#faq-method-security-in-web-context)，这可能是因为`<global-method-security>`在错误的应用程序上下文中加载了元素，但我不知道如何使用上述 no-xml Spring 配置来确保这一点。

我错过了什么吗？我尝试将 @EnableAspectJAutoProxy(proxyTargetClass = true) 添加到我的应用程序配置中，但这也无济于事。无论如何有运行时编织还是我必须使用编译时编织来为我的应用程序启用基于注释的安全性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:45:32.863

在 Spring 中使用 AOP 时，您可以在两种 AOP 实现之间进行选择：

*   Spring AOP 实现不需要编织，但只适用于 Spring 管理的 bean，有[一定的局限性](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-proxying)

*   AspectJ AOP 实现可以适用于所有对象并且没有 Spring AOP 的限制，但需要编译时或加载时编织

`mode="aspectj"`告诉 Spring 使用 AspectJ 进行 AOP 实现，因此在您的情况下，如果没有编织，安全方面将无法工作。

术语“AspectJ 自动代理”与使用 AspectJ 作为 AOP 实现无关——它是一个允许您将 AspectJ API（而不是实现）与 Spring AOP 一起使用的特性。

因此，在您的情况下，您可以使用 Spring AOP 实现，因为控制器是 Spring bean，因此您应该删除`mode="aspectj"`. 另请注意，您的控制器应该有无参数构造函数——这是 Spring AOP 的限制之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T17:00:23.797

为了扩展@axtavt 的答案，该`mode="aspectj"`选项`global-method-security`特别要求您的代码已与模块中的 编织[`AnnotationSecurityAspect`](https://github.com/SpringSource/spring-security/blob/master/aspects/src/main/java/org/springframework/security/access/intercept/aspectj/aspect/AnnotationSecurityAspect.aj)在一起`spring-security-aspects`。

有一些[示例代码](https://github.com/SpringSource/spring-security/blob/master/samples/aspectj/src)演示了它的使用。它只包含一个安全 bean 和一些 Junit 测试，但代码是使用 AspectJ 编译器编译的。[应用程序上下文](https://github.com/SpringSource/spring-security/blob/master/samples/aspectj/src/main/resources/aspectj-context.xml)还显示了它与添加命名空间支持之前所需的内容（注释掉的 bean）相比有多简单。

# c# - 可以在派生类中覆盖抽象类而不在基类中实现吗

> ID：11400505
> 
> 赞同：4
> 
> 时间：2012-07-09T18:01:07.250
> 
> 标签：c#, oop, inheritance

我有一个`A`带有一个抽象方法的抽象类。

这个类被另一个`B`不应该实现抽象方法的类继承。

现在另一个类`C`需要从类继承`B`并实现类中定义的方法`A`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T18:02:58.793

`B`如果它不打算实现其基类的所有抽象成员，您还需要将类标记为抽象类。然后，只需在 class 中正常覆盖`C`。

例子：

```
public abstract class A
{
    public abstract void DoStuff();
}

public abstract class B : A
{
    // Empty
}

public class C : B
{
    public override void DoStuff()
    {
        Console.WriteLine("hi");
    }
} 
```

# html - CSS居中的div并排

> ID：11400510
> 
> 赞同：0
> 
> 时间：2012-07-09T18:01:38.763
> 
> 标签：html, css

我的页面有以下部分。
风格：

```
.featuredcontainer {

width: 450px;
height: 700px;
margin-left: auto;
margin-right: auto;
position: relative;
right: 160px;
top: 30px;
border: 1px groove grey;
}

.navcontainer
{
margin-left: auto;
margin-right: -8px;
position: relative;
top: 75px;
height: 600px;
width: 300px;
} 
```

和示例 HTML：

```
<div class="featuredcontainer">
content
</div>
<div class="lessonnavcontainer">
menu
</div> 
```

页面显示时。navcontainer 位于（应该如此）的右侧，但位于特色容器的下方。当我使用相对定位向上移动 navcontainer 时，它看起来正确，但页面底部有一堆空白空间。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:12:54.523

将导航和特色容器都放入另一个包装器 div。

**HTML**

```
<div class='wrapper'>
    <div class="navcontainer">
        menu
    </div>
    <div class="featuredcontainer">
        content
    </div>
</div> 
```

并摆脱所有的相对定位。对于此类基本布局问题，不建议使用相对定位。改用浮点数。包装器应该有一个固定的宽度，这允许它以margin: 0 auto 正确居中。

**CSS**

```
.wrapper{
    width:752px;
    margin: 0 auto;
    overflow:auto;
}
.featuredcontainer {
    width: 450px;
    height: 700px;
    float:left;
    border: 1px groove grey;
}
.navcontainer{
    float:left;
    height: 600px;
    width: 300px;
    background:#ff0;
} 
```

**JSFiddle** [http://jsfiddle.net/5w5SC/](http://jsfiddle.net/5w5SC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:13:49.503

用“包装器” div 围绕您的两个 div，如下所示：

```
<div id="wrapper">
    <div class="featuredcontainer">content</div>
    <div class="lessonnavcontainer">menu</div>
</div> 
```

然后将它们居中，向包装器添加边距：

```
#wrapper { margin: 0px auto; } 
```

然后让两个 div 并排，添加一个浮点数：

```
.featuredcontainer { float: left; }
.lessonavcontainer { float: left; } 
```

为了使居中工作，您需要在包装器上声明一个宽度：

```
#wrapper { width: 800px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:06:52.430

使用*浮动*属性。使用 float，css 可以将 div 水平放置在彼此相邻的位置。

```
.featuredcontainer {

width: 450px;
height: 700px;
margin-left: auto;
margin-right: auto;
position: relative;
right: 160px;
top: 30px;
border: 1px groove grey;
float: left;
}

.navcontainer
{
margin-left: auto;
margin-right: -8px;
position: relative;
top: 75px;
height: 600px;
width: 300px;
float: left;
} 
```

这是一个起点，尝试使用向左浮动或向右浮动，看看会发生什么。摆弄它，直到它看起来完全符合您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:12:42.213

要让它们并排，您需要在 CSS 中添加 float 属性。要让它们根据页面宽度调整大小，您需要为它们添加相对宽度。要将它们置于页面中心（水平），您需要将 div 放在 html 中相对定位的 div 中。这是一个小提琴。[http://jsfiddle.net/Ne5zs/](http://jsfiddle.net/Ne5zs/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T18:14:31.110

确保在任何浮动对象上引入 clearfix（[这种技术](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)[有](http://www.webtoolkit.info/css-clearfix.html) [很多](http://nicolasgallagher.com/micro-clearfix-hack/) [版本）；](http://perishablepress.com/new-clearfix-hack/) 然后使用 . 将它们的包含块元素居中。`margin: 0 auto`

# r - 运行后的 R 种子；国标；

> ID：11400511
> 
> 赞同：0
> 
> 时间：2012-07-09T18:01:44.113
> 
> 标签：r

情况是这样的：1）我有一个随机样本，但想知道是什么种子产生了结果。有什么办法可以查到吗？我知道你可以在运行之前设置它，但是在实验之后呢？2) 有没有人在创建模型拟合后尝试复制 gbm 拟合？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:23:05.263

你可以做类似的事情

```
mySeed <- set.seed(1234)
mySamp <- sample(1:1000, 10)
attr(mySamp, "seed") <- mySeed 
```

然后，您将始终能够使用`attr(mySamp, "seed")`. 在示例中，我正在修改整数向量 ( `mySamp`)，但同样的逻辑适用于`gbm`对象。

当然，在上面的示例中，如果您以后要检索它，则需要预先设置种子。没有那个或接近它的东西，我认为你不能在使用后取回种子。

# wordpress - WordPress 多站点

> ID：11400515
> 
> 赞同：0
> 
> 时间：2012-07-09T18:01:56.693
> 
> 标签：wordpress

我已经安装了 wordpress 多站点我使用主站点安装了 4 个其他站点

```
1 master 
   --subsite
   --subsite  
   --subsite
   --subsite 
```

我需要做的是在**子站点上发布的任何帖子都将在****主站点**上自动发布

 **谢谢古普雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:13:44.560

你需要一个插件，也许这个可以帮助：

[http://wordpress.org/extend/plugins/wordpress-mu-sitewide-tags/](http://wordpress.org/extend/plugins/wordpress-mu-sitewide-tags/)**

# c# - 我需要能够取消填充列表框

> ID：11400516
> 
> 赞同：0
> 
> 时间：2012-07-09T18:02:00.140
> 
> 标签：c#, silverlight, nullreferenceexception

我知道出了什么问题，我不知道如何解决。

我得到一个

> `NullReferenceException:`你调用的对象是空的。

我收到此错误是因为我有一个填充的 ListBox，当您在 ListBox 中选择一个文件名时，该文件的内容将显示在一个文本框中。

现在，我有一个取消填充按钮，可以清除 ListBox 中的所有文件，如果选择了一个文件，那么我会收到错误消息。

我希望能够单击取消填充按钮并清除两个框。

编码：

```
private void DE_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    myScaleTransform2.ScaleX = myScaleTransform2.ScaleX * .9833333333333333333333333333333333333333333333333333333333;
    myScaleTransform2.ScaleY = myScaleTransform2.ScaleY * .9833333333333333333333333333333333333333333333333333333333;
    lbz.Items.Clear();
}

private void lbz_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    tb1.Text = File.ReadAllText(lbz.SelectedItem.ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:06:31.193

您将不得不检查是否`SelectedItem`实际设置：

```
private void lbz_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if( lbz.SelectedItem != null ){
        tb1.Text = File.ReadAllText(lbz.SelectedItem.ToString());
    } else {
        tb1.Text = "No File Selected";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:32:38.273

```
private void lbz_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if( lbz.SelectedItem != null ){
        if(File.Exist(lbz.SelectedItem.ToString())){
            tb1.Text = File.ReadAllText(lbz.SelectedItem.ToString());
        }
        else
        {
            tb1.Text = "File is not exist in the selected Path";
        }
    } else {
        tb1.Text = "No File Selected";
    }
} 
```

请检查天气您的列表项是否包含文件路径？

# iphone - 我可以授予我的应用程序对用户 iCloud 中所有数据的权利吗？

> ID：11400517
> 
> 赞同：1
> 
> 时间：2012-07-09T18:02:04.790
> 
> 标签：iphone, macos, cloud, icloud, icloud-api

例如，权利字典中的存储容器键是否可能接受“*”或“/”，从而允许我访问该用户的 iCloud 中的任何和所有数据？

我不担心让这个应用程序被应用商店接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:37:26.417

不。

而且，即使可以，也没有任何方法可以枚举该数据。-[NSFileManager URLForUbiquityContainerIdentifier:] 和朋友要求你知道你要访问的容器。（您可以传递 nil，但这只会返回您可以访问的第一个容器，而不是所有容器的某个父容器。）

这是故意的。出于很好的理由，公共 API 并不意味着让您的应用程序干扰其他应用程序的存储（共享团队的相关应用程序除外）。您可能需要阅读Mac App Programming Guide 中的[iCloud Storage](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/iCloudStorage/iCloudStorage.html)（无需付费会员即可访问）。

那么，iCloud 首选项窗格是如何做到的呢？嗯，这是个秘密。据推测，它要么使用私有 API，要么只是以 API 无法做到的方式直接与 iCloud Web 服务对话。您大概可以对其进行逆向工程，但这是您能够做到这一点的唯一方法。

# php - 使用 jQuery 添加/删除选择列表 - selectID 未在 POST 中发送

> ID：11400519
> 
> 赞同：0
> 
> 时间：2012-07-09T18:02:10.517
> 
> 标签：php, jquery, forms, post, select

我正在使用该站点的代码：[使用 jQuery 添加/删除选择列表](http://www.designchemical.com/blog/index.php/jquery/create-add-remove-select-lists-using-jquery/)

我已经设置好显示部分，但是当我提交表单时，$_POST 中没有任何设置可以让我阅读用户的选择。

这是我设置的表格：

```
<?php
    <form id='setTasks' action='?action=ae&view=departmentTasks' method='post'>
        <table>
            <tr>
                <td valign='top'>
                    <select name='selectfrom' id='select-from' multiple size='5'>";
                        for ($i = 0; $i < count($unusedTasks); $i++)
                            echo "<option value='" . $unusedTasks[$i]['taskID'] . "'>" . $unusedTasks[$i]['taskName'] . "</option>";
                echo "</select>
                </td>
                <td valign='top'><a href='JavaScript:void(0);' id='btn-add'>Add &raquo;</a></td>
                <td valign='bottom'><a href='JavaScript:void(0);' id='btn-remove'>&laquo; Remove</a></td>
                <td>
                    <select name='selectto' id='select-to' multiple size='5'>";
                        for ($i = 0; $i < count($departmentTasks); $i++)
                            echo "<option value='" . $departmentTasks[$i]['taskID'] . "'>" . $departmentTasks[$i]['taskName'] . "</option>";
            echo "</select>
                </td>
            </tr>
            <tr>
                <td>
                    <input type='hidden' name='departmentID' value='" . $departmentID . "' />
                    <input type='hidden' name='submitFinal' value='1' />
                    <input type='submit' name='submitForm' value='Assign Tasks' />&nbsp;&nbsp;
                    <input type='button' value='Cancel' onclick='javascript:history.go(-1);' />
                </td>
            </tr>
        </table>
    </form>";
?> 
```

和功能：

```
$(document).ready(function() {
    $('#btn-add').click(function(){
        $('#select-from option:selected').each( function() {
            $('#select-to').append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");
                $(this).remove();
            });
    });
    $('#btn-remove').click(function(){
        $('#select-to option:selected').each( function() {
            $('#select-from').append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");
            $(this).remove();
        });
        }); 
    }); 
```

前端（前后移动项目）工作正常，但是当我执行 var_dump($_POST) 时，我没有从选择字段中获得任何信息。任何人都能够看到我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:07:41.397

您不会获得任何表单数据，因为选择列表仅发送*所选*项目。

一种解决方案：遍历所有选项并在发布前将它们设置为选中状态。

另一种解决方案：在发布之前将您需要的信息从选项复制到隐藏字段中。

# javascript - 主干视图无法访问 jQuery 选择器

> ID：11400523
> 
> 赞同：3
> 
> 时间：2012-07-09T18:02:20.903
> 
> 标签：javascript, jquery, backbone.js, backbone-views

我有一个处理注册组件的主干视图，因为这需要大量的表单访问我有想法将表单选择器存储在对象属性中。

```
define(["models/security/user", 'text!templates/security/registration.html'], function(SecurityUserModel, Template){

    var SecurityRegistrationView;

    SecurityRegistrationView = Backbone.View.extend({
        initialize: function(){
            this.model = new SecurityUserModel();
            this.model.bind("validated:valid", this.valid);
            this.model.bind("validated:invalid", this.invalid);

            Backbone.Validation.bind(this);

            this.render();
        },
        render: function(){
            $(this.el).append(Template);
        },
        events: {
            "submit form": "submit"
        },
        form: {
            "username": $("#_user_username")
            , "email": $("#_user_email")
            , "password": $("#_user_password")
        },
        submit: function(e){
            e.preventDefault();

            this.model.set("username", this.form.username.val());
            this.model.set("password", this.form.email.val());
            this.model.set("email", this.form.password.val());
            this.model.validate();

            // debug    
            console.log([this.form, this.form.username.val(), this.form.email.val()]);

            if (this.model.isValid) {
                this.model.save();
            }
        },
        valid: function(model, attrs){
            // error
            this.form.attrs[0].username.parent("div.control-group").addClass("success");
        },
        invalid: function(model, attrs){
            // error
            this.form.attrs[0].username.parent("div.control-group").addClass("error");
        }
    });

    return SecurityRegistrationView;
}); 
```

当我 console.log this.form 时，我得到一个看起来不错的对象，没有任何未定义或奇怪的东西：

```
[
Object
    email: e.fn.e.init[0]
        context: HTMLDocument
        selector: "#_user_email"
        __proto__: Object[0]
    password: e.fn.e.init[0]
        context: HTMLDocument
        selector: "#_user_password"
        __proto__: Object[0]
    username: e.fn.e.init[0]
        context: HTMLDocument
        selector: "#_user_username"
        __proto__: Object[0]
    __proto__: Object
] 
```

登录访问选择器 (this.form.username.val()) 的 jquery 函数失败，未定义。

为什么不能在属性上使用 jQuery 函数（$el 使用它）思考错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:32:06.250

您没有以正确的方式使用选择器。您需要将 jQuery 范围限定为您的视图，这样做：

```
invalidateForm: {
  "username": this.$("#_user_username"), 
  "email": this.$("#_user_email"),
  "password": this.$("#_user_password")
}, 
```

并且渲染必须是这样的：

```
render: function(){
  this.$el.append(Template);
  this.invalidateForm();
}, 
```

也使用 this.$el 代替 $(this.el) 以获得更高效的性能，它是视图元素的缓存版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:18:14.157

我认为问题是，在调用`form: {...}`之前进行评估`render`——并且您查询的 HTML 元素是在`render`.

也许您可以尝试**在渲染函数的最后**执行此操作：

```
this.form = {
            "username": $("#_user_username")
            , "email": $("#_user_email")
            , "password": $("#_user_password")
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:12:40.130

这是一个上下文问题，您可以像这样更新代码：

```
initialize: function(){
    _.bindAll(this, 'render', 'submit', 'valid','invalid');
    this.model = new SecurityUserModel();
    .....
} 
```

关于 _.bindAll ，你可以看到： [现在骨干网默认做 _.bindAll 了吗？](https://stackoverflow.com/questions/8568911/does-backbone-do-bindall-by-default-now) [https://stackoverflow.com/a/6396224/1303663](https://stackoverflow.com/a/6396224/1303663)

编辑：>>>>>>>>>>>>

对不起，我没有完全理解你的意思。你可以试试这个，我想这就是你想要的：

```
render: function(){
        $(this.el).append(Template);
        this.initform();
    },
.....
initform: function(){            
        this.form = {};
        this.form.username = $("#_user_username");
        this.form.email = $("#_user_email");
        this.form.password = $("#_user_password");
    }, 
```

没有其他变化

# php - 跟踪像素 - PHP 问题

> ID：11400528
> 
> 赞同：0
> 
> 时间：2012-07-09T18:02:35.270
> 
> 标签：php, mysql, magento, commission-junction

如果 qty = 0，我如何在此代码中添加一条语句，它会停止。

我从这里得到了这段代码，但它在最后一个之后显示了一个额外的项目。

例如

```
https://www.emjcd.com/u?CID=1521607&OID=100000393&TYPE=type&ITEM1=401000305964&AMT1=16.9900&QTY1=1&ITEM2=401000305964&AMT2=0.0000&QTY2=0**&TYPE=347774&CURRENCY=USD&METHOD=IMG 
```

它添加了**ITEM2=401000305964&AMT2=0.0000&QTY2=0**

虽然数据库和发票只有一项

```
 <?php
            $_customerId = Mage::getSingleton('customer/session')->getCustomerId();
            $lastOrderId = Mage::getSingleton('checkout/session')->getLastOrderId();
            $order = Mage::getSingleton('sales/order'); 
            $order->load($lastOrderId);
            $_totalData =$order->getData(); 
            $_sub = $_totalData['subtotal'];//USD ==> global_currency_code,base_currency_code order_currency_code
            // Incase if it is simple do this ==> https://www.emjcd.com/u?AMOUNT= $_sub; 
            //print_r($order); print_r($_totalData);

            $_order   = $this->getOrder();
            $allitems = $order->getAllItems();
            $index    = 1;
            $cjData   = "";//Needed format ==> &ITEM1=3214sku&AMT1=13.49&QTY1=1&ITEM2=6577sku&AMT2=7.99&QTY2=2&
            foreach($allitems as $item)
            {
              $cjData.="&ITEM".$index."=".$item->getSku()."&AMT".$index."=".$item->getPrice()."&QTY".$index."=".$item->getQtyToShip();
              $index++;
            }
        ?>
        <div style="display:none;">
            <img src="https://www.emjcd.com/u?CID=1&OID=<?php echo $this->getOrderId(); ?>&TYPE=3<?php echo $cjData; ?>&CURRENCY=USD&METHOD=IMG" height="1" width="20"> 
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:26:36.487

在开始 foreach 循环之前，您需要将 $index 变量设置为零 (0)。

当您在进入 foreach 循环之前将 $index 变量初始化为一 (1) 时，事实上您有一行将变量递增 1 会立即将总项目计数减 1，因为它会添加（至少) 为 1 的值（第一次通过时为 2）。这就是为什么如果关闭，您的价值会保留在 $index 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:05:50.093

休息呢？如果在追加 $cjData 之前数量为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:09:51.073

您可以使用简单的 if 语句，因此仅当数量不为 0 时才附加字符串。

```
foreach($allitems as $item)
{
    if ($item->getQtyToShip() != 0) {
        $cjData.="&ITEM".$index."=".$item->getSku()."&AMT".$index."=".$item->getPrice()."&QTY".$index."=".$item->getQtyToShip();
    }
    $index++;
} 
```

# php - websockets 是否适合与 PHP 一起使用？

> ID：11400541
> 
> 赞同：14
> 
> 时间：2012-07-09T18:03:16.097
> 
> 标签：php, html, sockets, websocket

我已经在互联网上的各个地方看到它提到 HTML5 websockets 不能很好地与 PHP 一起使用，PHP 本质上只适合与它们一起使用。另一方面，我看到多个关于使用 PHP 和 websockets 的教程，我注意到一些 PHP websocket 实现，例如[http://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)

那么有没有人有任何关于在 PHP 中使用 websockets 的确切信息。它们是否可以与 PHP 一起使用，与 Java 或 Python 相比，它们与 PHP 一起使用的优点/缺点是什么，为什么我读到很多人说它们不能很好地协同工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T19:25:40.703

问题是 WebSockets 是为长时间运行的线程/进程设计的，每个线程/进程都维护多个事件驱动的连接，而 PHP（以及它的 Apache 队列）是围绕短暂的单进程程序范式设计的（例如[`max_execution_time`，通常设置为 30 秒](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)，并且会话是单线程的）。

这并不是说用 PHP 编写 WebSockets 服务器实现是不可能的。我知道至少有一个项目确实[做到了这一点](http://code.google.com/p/phpwebsocket/)（但请注意，即使这个示例也是从命令行运行的，而不是通过`mod_php`. 但是很可能 WebSockets 的 PHP 实现与 PHP 最常用的廉价/共享主机的设置不兼容。

因此，虽然它可以在 PHP 中实现，但无论如何您最终都必须运行一个单独的服务器进程（来自 Apache），如果您使用的是允许单独的服务器进程的托管，那么编写 WebSockets 代码就更容易了专为事件驱动编程而设计。

如果您不打算为数以万计的并发双工连接提供服务，那么最好将 AJAX 和[SSE](http://www.w3.org/TR/eventsource/)与 PHP 后端结合使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T13:39:51.520

我最近尝试了 phpwebsocket，但此时它不起作用（php 5.4 和 chrome）代码指的是握手中的第二个密钥，该密钥在 rev 中不存在。websocket 协议的 13 我没有时间阅读 RFC 以了解这是怎么回事。

可以肯定的是，这个解决方案比长轮询的 AJAX 更优雅和反应灵敏，但 websockets 目前不稳定，我认为等待 w3c 宣布它稳定会更有趣。

# android - 媒体播放器空指针异常

> ID：11400542
> 
> 赞同：0
> 
> 时间：2012-07-09T18:03:16.610
> 
> 标签：android, pointers, null, media

我有一个非常奇怪的错误，我无法弄清楚发生了什么。在我的代码中，我通过 SoundsClass 使用媒体播放器，如下所示：

```
public class SoundsClass {

private int sound;
private Context mContext;
public SoundsClass(int sound, Context mContext) {
    this.sound=sound;
    this.mContext=mContext;
}

    public void clickOnAndroid() {

      switch(this.sound) {
      case R.raw.sound1:
        MediaPlayer mediaPlayer = MediaPlayer.create(mContext, R.raw.sound1);
        mediaPlayer.start();
        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
          public void onCompletion(MediaPlayer mp) {
              mp.release();
          }
      });

      break;
      case R.raw.sound2:

       mediaPlayer = MediaPlayer.create(mContext, R.raw.sound2);
       mediaPlayer.start();
     mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
         public void onCompletion(MediaPlayer mp) {
             mp.release();
         }
     });
    break;
    case R.raw.sound3:
       mediaPlayer = MediaPlayer.create(mContext, R.raw.sound3);
       mediaPlayer.start();
       mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
          public void onCompletion(MediaPlayer mp) {
              mp.release();
          }
      });
      break;
      }

    }
} 
```

所以，我在我的主要活动中使用这个类，如下所示：

```
 new SoundsClass(R.raw.sound1, getBaseContext()).clickOnAndroid(); 
```

在此活动的 2 个地方它工作正常，但第三个给出 NullPointerException，由 SoundsClass 中的行指向：

```
mediaPlayer.start(); 
```

知道为什么吗？我是否以错误的方式使用 MediaPlayer？

Logcat 是：

```
java.lang.NullPointerException
at com.testingapp.app.SoundsClass.clickOnAndroid(SoundsClass.java:42)
at com.testingapp.app.MainActivity$2.onClick(MainActivity.java:147)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

也许我应该补充一点，我经常调用这个 SoundsClass，中间没有或几乎没有停顿。有时我会得到：

```
bufferCount is to small and increased to 12. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:23:01.393

[http://developer.android.com/reference/android/media/MediaPlayer.html#create(android.content.Context,%20android.net.Uri,%20android.view.SurfaceHolder](http://developer.android.com/reference/android/media/MediaPlayer.html#create(android.content.Context,%20android.net.Uri,%20android.view.SurfaceHolder) )

如果创建失败，MediaPlayer.create 调用将返回 null。如果它找不到指定的媒体或媒体是无效格式，则会出现这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-25T16:14:28.103

这对我有用：

```
mediaPlayer = MediaPlayer.create(mContext, R.raw.sound1);
while(mediaPlayer == null) {
      mediaPlayer = MediaPlayer.create(mContext, R.raw.sound1);
} 
```

# opencv - Iplimage 到列表

> ID：11400544
> 
> 赞同：0
> 
> 时间：2012-07-09T18:03:24.350
> 
> 标签：opencv, c++-cli

我正在尝试将一组 iplimage 从 OpenCV 传递给另一个不使用 iplimage 但使用字节 [] 列表而不是通过 c++/cli 的程序（.net）。知道如何将 iplimage 添加/转换到 byte[] 列表吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:59:57.367

如果要从 iplimage.imageData 复制精确的像素，可以使用[Marshal.Copy](http://msdn.microsoft.com/en-us/library/ms146631.aspx) 将数据从`IntPtr`(imageData) 复制到托管数组 (byte[])。

但由于 imageData 未压缩，您可能希望使用`imencode`或将其压缩到中间缓冲区，然后使用上述代码[`cvEncodeImage`](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=#CvMat%2a%20cvEncodeImage%28const%20char%2a%20ext,%20const%20CvArr%2a%20image,%20const%20int%2a%20params%29)将其复制到 a中。`byte[]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:18:58.743

在做任何其他事情之前，花点时间了解[an`IplImage`是如何创建](https://stackoverflow.com/questions/11272005/working-with-real-time-data-bypassing-cvloadimage/11355217#11355217)的，以及它存储了什么样的信息。

然后，注意图像的像素可以通过成员 访问`imageData`，这是一个`unsigned char*`：

```
IplImage* image = cvLoadImage("starwars.jpg", 0);
int img_sz = image->width * image->height * image->nChannels;
unsigned char* data = (unsigned char*) malloc(img_sz);
memcopy(data, image->imageData, img_sz); 
```

您必须执行类似的过程才能将其转换为`byte[]`. 顺便说一句，这篇文章] [2](https://stackoverflow.com/questions/8187745/audio-output-with-video-processing-with-opencv/8191506#8191506)展示了（除其他外）如何将 an 转换`IplImage*`为 a `SDL_Surface*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:43:09.790

首先，我建议您尽可能切换到 OpenCV 的 C++ API - 与旧的 C 接口相比，它提供了更多的灵活性和功能。

在 C++ 接口中，执行上述任务的代码片段是：

```
cv::Mat image = cv::imread(imname);
uchar *ptr = (uchar*)image.data 
```

您可以在任何地方使用您的 ptr（一个 8 位无符号字节数据） - 请记住修改此数据将修改实际图像。如果您不希望发生这种情况，请使用 memcpy 获取数据的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T14:02:33.483

如果我理解正确，您可以搜索以下内容：

```
IplImage* image = cvLoadImage("image.bmp");
std::list<unsigned char*> bytes;
for (int i=0;i<image->height;i++)
 {
   bytes.push_back(image->imageData + image ->widthStep*i);
 } 
```

您可以测试它是否可以执行以下操作（我在此处访问第二行的第一个像素）：

```
std::list<unsigned char*>::iterator it = bytes.begin();
it++;
*(*it) = 22;
int a = *((unsigned char*)(image->imageData + image->widthStep*1)); 
```

我没有找到用新的 cv::Mat 对象做这样的事情的方法。您可以将图像转换为 std::vectors，但无法将图像转换为一行 std::vector/std::list。但是，如果您仍然使用 cv::Mat 类，您可以尝试该类也可以`cv::Ptr<Pixelformat>`访问行指针。

# php - 随机的 MySQL 错误？

> ID：11400546
> 
> 赞同：2
> 
> 时间：2012-07-09T18:03:34.897
> 
> 标签：php, mysql

我在网站上安装了一个方便的小脚本。在本地主机中时，永远不会有任何错误；然而，当我将它托管在我的 VPS 上时，我偶尔会随机出现 MySQL 错误，我认为它正在扼杀我的流量。这是因为VPS不好，还是有其他原因？

> 警告：mysql_fetch_row() 期望参数 1 是资源，在第 1383 行的 /home/freetrav/public_html/travian/GameEngine/Database/db_MYSQL.php 中给出的布尔值
> 
> 查询期间丢失与 MySQL 服务器的连接
> 
> 警告：mysql_connect() [function.mysql-connect]: 无法通过 /home/freetrav/public_html/travian/GameEngine/ 中的套接字 '/var/lib/mysql/mysql.sock' (2) 连接到本地 MySQL 服务器第17行的database/db_MYSQL.php 无法通过socket '/var/lib/mysql/mysql.sock'连接到本地MySQL服务器（2）
> 
> MySQL 服务器已经消失

所有这些都是纯粹随机的，没有一个是永久的。它们通常发生在同时打开多个页面时，它们会注销当前帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:05:47.763

听起来MySQL正在崩溃。如果您可以看到 mysqld 错误日志，则可以确认。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:06:14.660

这绝对是您的 VPS 上安装错误的 mysql 的标志。

您应该与您的托管服务提供商联系以解决此问题。

# c++ - c++11中XML元素类的基于循环实现的棘手范围

> ID：11400549
> 
> 赞同：2
> 
> 时间：2012-07-09T18:03:45.127
> 
> 标签：c++, foreach, c++11

我怎样才能使这样的事情与元素和属性的基于范围的循环一起工作？

```
#include <list>
#include "XMLAttribute.h"

namespace XML
{
    class Element
    {
        private:
            typedef std::list<Attribute> attribute_container;
            typedef std::list<Element> element_container;

        public:
            XMLElement();

            bool has_attributes() const;
            bool has_elements() const;
            bool has_data() const;

            const std::string &name() const;
            const std::string &data() const;

        private:
            std::string _name;
            std::string _data;

            attribute_container _attributes;
            element_container _elements;
    };
} 
```

我希望能够使用类似的东西：

```
for (XML::Element &el : element) { .. }
for (XML::Attribute &at : element) { .. } 
```

并阻止类似`for (auto &some_name : element) { .. } //XML::Element or XML::Attribute?`.

像这样实现它是个好主意还是应该改变我的设计？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:07:22.070

正确的答案是为 Element 节点提供返回子属性和元素范围的函数。因此，您可以这样做：

```
for(auto &element : element.child_elements()) {...}
for(auto &attribute : element.attributes()) {...} 
```

您的`child_elements`函数将返回某种存储两个迭代器的类型，例如[boost::iterator_range](http://www.boost.org/doc/libs/1_50_0/libs/range/doc/html/range/reference/utilities/iterator_range.html)。`attributes`同样会返回属性元素的范围。

# php - PHP中的推送通知

> ID：11400556
> 
> 赞同：9
> 
> 时间：2012-07-09T18:04:09.687
> 
> 标签：php, iphone, push-notification, apple-push-notifications

在尝试执行我的 php 脚本以向我的 iphone 发送推送通知后，我收到此错误。

我已经尝试了一切，但没有任何效果。我相信这意味着我`ck.pem`的错误，但我不确定是 key.pem 还是 cert.pem 错误。

请帮忙

**脚本**

```
 // This this a fake device id:
$deviceToken = '9870h8v088bj29u080af894jj67klfgcv9mmm79k8e4l23456h908743n093e359';

// fake password:
$passphrase = '123456';

// Put your alert message here:
$message = 'New Message';
   ////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
                           'ssl://gateway.sandbox.push.apple.com:2195', $err,
                           $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
                     'alert' => $message,
                     'sound' => 'default',
                     'badge' => '1'
                     );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp);

?> 
```

**错误**

```
Warning: stream_socket_client(): SSL operation failed with code 1\. OpenSSL Error messages:
error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown in     /Users/daveking/Desktop/App Certificates/simplepush.php on line 21

Warning: stream_socket_client(): Failed to enable crypto in /Users/daveking/Desktop/App Certificates/simplepush.php on line 21

Warning: stream_socket_client(): unable to connect to ssl://gateway.sandbox.push.apple.com:2195 (Unknown error) in /Users/daveking/Desktop/App Certificates/simplepush.php on line 21
Failed to connect: 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T19:01:22.133

你到底试过什么？

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12) [http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)

这是一个关于生成证书、制作 php 脚本等的很好的教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T12:47:33.967

可以在[http://blog.boxedice.com/2009/07/10/how-to-build-an-apple-push-notification-provider-server-tutorial/下找到描述这些步骤的良好链接](http://blog.boxedice.com/2009/07/10/how-to-build-an-apple-push-notification-provider-server-tutorial/)

一个很好的链接可以让您了解证书问题，请查看 Urban Airship：

[http://urbanairship.com/docs/keys.html](http://urbanairship.com/docs/keys.html)

关于批准，很高兴知道：

```
=>app signed with a dev cert = sandbox url & dev apns cert, app signed with

=>appstore/adhoc cert = prod url & prod apns cert 
```

在之前使用过开发应用程序的设备上使用 adhoc/appstore 应用程序也会导致跳板崩溃。（所以基本上需要两个设备）（待确认。）

重要提示：您必须保持与沙箱的连接，即您不能连接、发送推送、断开连接。如果你这样做了，Apple 可能会将你限制为可能的 ddos

从服务器触发推送通知的 PHP 示例脚本可能如下所示：

```
<?php

// from http://www.macoscoders.com/2009/05/17/iphone-apple-push-notification-service-apns/
// call: /apns/apns.php?message=Hello%20from%20macoscoders&badge=2&sound=received5.caf

$deviceToken = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa';                        

// Passphrase for the private key (ck.pem file)
// $pass = ;
// Get the parameters from http get or from command line

$message = $_GET['message'] or $message = $argv[1] or $message = 'Message sent ' . @date("H:i:s d/M/Y", mktime());
$badge = (int)$_GET['badge'] or $badge = (int)$argv[2] or $badge = 111;
$sound = $_GET['sound'] or $sound = $argv[3] or $sound = 'chime';

// Construct the notification payload
$body = array();
$body['aps'] = array('alert' => $message);
if ($badge)
    $body['aps']['badge'] = $badge;
if ($sound)
    $body['aps']['sound'] = $sound;
/* End of Configurable Items */

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'push/apns-dev.pem');

// assume the private key passphase was removed.
// stream_context_set_option($ctx, 'ssl', 'passphrase', $pass);
$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);

if (!$fp) {
    print "Failed to connect $err $errstr\n";
    return;
} else {
    print "Connection OK

";
}

$payload = json_encode($body);

// request one 
$msg = chr(0) . pack("n",32) . pack('H*', str_replace(' ', , $deviceToken)) . pack("n",strlen($payload)) . $payload;
print "sending message :" . $payload . "\n";

fwrite($fp, $msg);

fclose($fp);

?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-16T11:37:16.887

这里的工作代码：

```
<?php

$deviceToken = '8845ba7c41e95e12caea6381ea6f01b5cd7b59a52feb9005e0727a65a4105dc2a0';

$passphrase = '';

$message = 'Your message';

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

$body['aps'] = array(
    'alert' => array(
        'body' => $message,
        'action-loc-key' => 'Bango App',
    ),
    'badge' => 2,
    'sound' => 'oven.caf',
    );

$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

fclose($fp); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T19:05:09.447

您还可以查看[EasyAPNS 代码](http://www.easyapns.com/php-source)。

# image - 在matlab中显示多个图像，补丁覆盖在同一图中

> ID：11400561
> 
> 赞同：2
> 
> 时间：2012-07-09T18:04:26.310
> 
> 标签：image, matlab

我有一个用补丁覆盖的图像，我希望能够在同一个图形上显示多个图像，所有这些图像都具有不同的覆盖补丁。我尝试使用 subplot 命令，但它不起作用。我在下面定义了我的轴和父图。

```
hFig = figure;
hAx = axes('Parent',hFig);
hAx2 = axes('Parent',hFig);

fh = figure('units','pixels',...
          'position',[300 300 440 500],...
          'menubar','none',...
          'name','SliderTool',...
          'numbertitle','off',...
          'resize','off');

subplot(1,2,1) imshow(image1,'Parent','hAx');
patch(....,'parent', 'hAx');
subplot(1,2,2) imshow(image2,'Parent','hAx2');
patch(....,'parent', 'hAx2'); 
```

这是我想做的事情的基本想法，但由于某种原因我无法让它发挥作用。我是否错误地使用了把手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:05:22.813

我不完全确定这会解决你想要做的事情，但我认为它会给你指明正确的方向。

[子图选项](http://www.mathworks.com/help/techdoc/ref/subplot.html)

[Imshow/子图像选项](http://www.mathworks.com/help/toolbox/images/f10-43158.html#brbuwuj-4)

您可能还需要使用[Hold](http://www.mathworks.com/help/techdoc/ref/hold.html)来应用补丁而不替换您首先显示的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:11:42.530

你是否试图做这样的事情：

```
image1 = imread('street1.jpg');
image2 = imread('street2.jpg');

ha1 = subplot(1,2,1) ;
imshow(image1);    
X = get(ha1,'Xlim')/2;
Y = get(ha1,'Ylim')/2;    
patch(X([1 2 2 1]),Y([1 1 2 2]),'m','FaceAlpha',0.5,'parent', ha1 );

ha2 = subplot(1,2,2) ;
imshow(image2);
X = get(ha2,'Xlim')/2;
Y = get(ha2,'Ylim')/2;    
patch(X([1 2 2 1]),Y([1 1 2 2]),'b','FaceAlpha',0.3,'parent', ha2); 
```

# javascript - 为什么我不能用IE8点击这个？

> ID：11400563
> 
> 赞同：2
> 
> 时间：2012-07-09T18:04:34.553
> 
> 标签：javascript, jquery, css, internet-explorer, internet-explorer-8

我正在使用这个[库](http://code.google.com/p/exsited/source/browse/trunk/code/scripts/jquery.editableText.js?spec=svn7&r=7)来内联编辑和这个 css

```
.editableText:hover {
    outline: 1px dashed grey;
}
.editableToolbar:hover + * {    
    outline: 1px dashed grey;
}
.editableToolbar {
}
.editableToolbar a {
    display: block;
    float: left;
    height: 15px;
    margin: 2px;
    width: 17px;
}
.editableToolbar .edit {
    background: url("icons.png") repeat scroll 0 0 transparent;
}
.editableToolbar .save {
    background: url("icons.png") repeat scroll -16px 0 transparent;
}
.editableToolbar .cancel {
    background: url("icons.png") repeat scroll 25px 0 transparent;
} 
```

这是生成的html

```
<div class="editableToolbar">
  <a href="#" class="edit" style=""></a>
  <a href="#" class="save" style="display: none; "></a>
  <a href="#" class="cancel" style="display: none; "></a>
</div> 
```

这是我的jQuery

```
 $('.admin .playlist_name').editableText({
   newlinesEnabled: false
 }); 
```

并且在所有浏览器中都运行良好，但 IE8....我查看了文档模式并将其从 IE8 更改为 IE7，并且要编辑的 javascript 和 css 工作......关于不同模式正在做什么的任何想法这不工作

更新........这里是一个例子.. 使用电子邮件 user7@test.com 和密码 English1 登录到 qa.previewplaylist.com

在仪表板上，您将在名称 tr“QA Again 05.12”下看到一个图像，当您单击它时可以看到它允许您进行编辑...但是如果您登录并使用 IE8 执行相同操作，您将无法单击任何位置 –下面的图片会告诉你点击什么

![在此处输入图像描述](../Images/cef16a511ee4a7f10f96d6a3cf393932.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:11:09.650

很难知道您的问题是什么，因为您没有提及您是否收到错误或该网站的行为是否符合预期。根据目前的信息，我只能假设您没有将 jQuery 代码包装在`$(document).ready(function() {});`

```
$(document).ready(function() {
    $('.admin .playlist_name').editableText({
        newlinesEnabled: false
    });
}); 
```

# javascript - 确定 li 被点击的次数

> ID：11400566
> 
> 赞同：-1
> 
> 时间：2012-07-09T18:04:42.630
> 
> 标签：javascript, html-lists, double-click

我有这个 html 代码，其中我有很多 li 元素。在双击每个 li 元素时，会出现一个类似于 div 的窗口。该特定窗口出现的窗口数量与我单击该窗口的次数一样多。我的问题是，如何防止为特定的 li 元素打开多个窗口？

我可以在javascript中使用一些方法或函数来计算我点击特定li元素的次数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:10:04.350

创建一个以窗口/div ID 作为键的对象，如果打开，则将其设置为 true，如果“窗口”关闭，则将其设置为 false。

所以你只需要在值为 false 时显示窗口

```
openedWindows.li1 = false;
openedWindows.li2 = false;
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:09:53.813

为了与 DOM 轻松交互，我推荐库[jQuery](http://jquery.com/)。

如果您决定使用 jQuery，请使用以下命令：

```
$(document).ready(function() {
    var liClicked = [];
    $("li").dblclick(function() {
        if (liClicked.indexOf($(this).index()) != -1) return;
        liClicked.push($(this).index());
        alert("new click");
    });
}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-09T18:08:41.800

您是否将该功能绑定到 li 元素上？只需取消绑定特定元素以防止进一步弹出..或删除 onclick 属性内容，具体取决于代码....

例如：

```
function openWindow(obj){
//your code - fired by onclick passing 'this'

obj.onclick = null;

} 
```

# android - 使用大量 RAM 的 Android 应用程序

> ID：11400573
> 
> 赞同：1
> 
> 时间：2012-07-09T18:05:26.677
> 
> 标签：android, android-memory

我的 android 应用程序大小在设备上只有 5MB，但是当我运行应用程序时，它会使用大量 RAM，例如大约 12-18 MB（在 ics 设备上更多）。我试图为此找到一个解释，为什么我的应用程序使用大量 RAM，我还使用 parse 的推送服务。我的应用程序是图像密集型的，这可能是一个可能的原因。如何减少我的应用程序的 RAM 消耗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:22:30.893

原因很可能是您的应用程序是图像密集型的。总的来说，图像在 RAM 中占用的内存比在磁盘上要多得多。要查看图像将占用多少内存，请使用以下公式：

```
For ARGB images: memory(in bytes) = width * height * 4 
```

这是因为 ARGB 图像每个像素有 4 个通道。

```
For RGB images: memory(in bytes) = width * height * 3 
```

这是因为 RGB 图像每个像素有 3 个通道。

因此，要使用更少的内存，请尝试减小图像尺寸，或从不需要的图像中删除 alpha 通道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T18:12:03.007

设备上的 5MB 包含大量压缩数据。当您的应用程序运行时，压缩为 JPG 或 PNG 的图像之类的东西会被解码为相当大的位图。

例如，一个 300kB 的 PNG 有时会在内存中变成一个 6MB 的位图。

在 ICS 上，使用了更多内存，因为图像被复制以用于硬件加速。

要减少 RAM 消耗，请使用较小的图像（如较小的尺寸，而不是更多的压缩），减少您正在使用的视图数量，并确保您没有泄漏任何内存。

# sed - 从文本中删除一种字符串？

> ID：11400576
> 
> 赞同：2
> 
> 时间：2012-07-09T18:05:48.813
> 
> 标签：sed, notepad++

我有类似的行，我想删除第一个**...**行，*而不是唯一的行* `http://www.filefactory.com/file/a181d18/n/...nimal_2010_.rar`。

我考虑**相似的行**，直到第二个到达`...`我想删除第二个**相似的行**。我能怎么做？

```
http://rapidshare.com/files/152133956/2005_-_Candlemass.part1.rar (not delete)
http://rapidshare.com/files/152133956/2005...emass.part1.rar --> similar (delete)

http://www.filefactory.com/file/a181d18/n/...nimal_2010_.rar -->unique (not delete)

http://www.shragle.com/files/9baa908b/Bvdub-The_First_Day-%2528HN031%2529-2012.rar(not delete)
http://www.shragle.com/files/9baa908b/Bvdu...1%2529-2012.rar --> similar (delete) 
```

我在 Windows 上使用**sed**和**notepad++**

我尝试使用这个正则表达式：

```
Find what:         ((?<=\n)|^)([^\n]{40})([^\n]*\n)(.*\n)?\2[^\n]*($|\n)
Replace with:      \2\3\4 
```

它可以工作，但前提是这些行在另一行之下，但我也会有一个正则表达式，我以*随机*顺序检测这种类型的字符串。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:42:44.103

这可能对您有用（GNU sed）：

```
 sed ':a;$!N;/^\([^\n]*\)[^\n]*\n\1\.\.\./s/\n.*//;ta;P;D' file 
```

解释：

*   `:a`循环地名持有者
*   `$!N`除非最后一行，否则将换行符然后下一行添加到当前行。
*   `/^\([^\n]*\)[^\n]*\n\1\.\.\./`寻找附近重复的行。
*   `s/\n.*//`删除上一行。
*   `ta`如果最后一个替换为真 goto`a`
*   `P`在模式空间中打印第一行。
*   `D`删除模式空间中的第一行（除非为空，否则不获取下一行）

要匹配随机排序的字符串，请使用 awk。

```
awk '/\.\.\./{o=$0;sub(/\.\.\..*/,"");a[o]=$0;next}{b[$0]}END{for(x in a){for(y in b){if(y ~ a[x]){delete a[x]}}}for(x in a)print x;for(x in b)print x}' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:23:27.120

我建议获取 Cygwin（如果您还没有）然后运行`sort -u`​​. 这将对输入进行排序，然后删除任何重复的行。不过，这仅适用于顺序不重要的情况。

# python - pyplot放大

> ID：11400579
> 
> 赞同：31
> 
> 时间：2012-07-09T18:05:56.160
> 
> 标签：python, matplotlib, zooming

我正在尝试从 FITS 文件中绘制一些数据，我想知道是否有人知道如何关注绘图轴的某些区域？这是一些示例代码：

```
import pyfits
from matplotlib import pyplot as plt
from matplotlib import pylab
from pylab import *
#Assuming I have my data in the current directory
a = pyfits.getdata('fits1.fits')
x = a['data1'] # Lets assume data1 is the column: [0, 1, 1.3, 1.5, 2, 4, 8]
y = a['data2'] # And data2 is the column: [0, 0.5, 1, 1.5, 2, 2.5, 3]
plt.plot(x,y) 
```

我怎么能只从`[1.3 to 4]`x 轴绘制区域？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-09T19:07:08.290

在您的限制范围内使用该`plt.axis()`功能。

```
plt.axis([x_min, x_max, y_min, y_max]) 
```

其中`x_min`、`x_max`、`y_min`和`y_max`是两个轴的坐标范围。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-09T18:28:49.123

这个问题与您如何操作无关`pyfits`，而只是添加的问题

```
plt.xlim(1.3, 4.0) 
```

之前的代码`plt.show()`

# xcode - 推新导航控制器时无法关闭声音播放器

> ID：11400583
> 
> 赞同：0
> 
> 时间：2012-07-09T18:06:00.530
> 
> 标签：xcode, ios5, object, avaudioplayer

我正在播放可以通过以下方式打开和关闭的音频

IBAction //播放音频

```
NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
resourcePath = [resourcePath stringByAppendingString:@"/Apptrack.mp3"];
NSLog(@"Path to play: %@", resourcePath);
NSError* err;

//Initialize our player pointing to the path to our resource
player = [[AVAudioPlayer alloc] initWithContentsOfURL:
          [NSURL fileURLWithPath:resourcePath] error:&err];

if( err ){

    NSLog(@"Failed with reason: %@", [err localizedDescription]);
}
else{
    //set our delegate and begin playback
    player.delegate = self;
    [player play];
    player.numberOfLoops = -1; //(for continuous loop use -1, or any number for number of loops)
    player.currentTime = 1;
    player.volume = .5;

} 
```

IBAction 关闭声音播放器：//停止音频

```
 [player stop]; 
```

当我推到另一个视图控制器并再次返回时，该按钮不再用于停止音频并且它不断运行（循环大约 3 分钟长）。所以然后我尝试将其添加到上面的代码中：

```
 if ([self.player isPlaying] == YES) {
     [self.player stop];
    } else {
     [self.player play];
    } 
```

仍然没有，也许在编程方面更有经验的人可以指出我做错了什么的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:28:31.973

好的，我找到了一个解决方法，我添加`[player stop];`到按钮的 IBAction 推送到下一个视图控制器

# android - 在 XML 文件中使用 achartengine 定位图形

> ID：11400585
> 
> 赞同：1
> 
> 时间：2012-07-09T18:06:07.593
> 
> 标签：android, xml, achartengine

所以，我想制作一个可以读取多组数据并显示图表的应用程序。我的问题，不是加载图表本身，我已经让它工作了，但我想在特定的 UI 中显示图表。我想显示一个图表，下面有 6 个复选框和一个微调器。根据微调器选择的选项，6 个复选框会有所不同。

但是，我遵循了一些教程，它们甚至不需要 XML 文件。我怎样才能实现我的图表来拥有这个，或者我如何布局我希望来自 achartengine 的图表在 XML 文件中显示的位置。

我有的： ![在此处输入图像描述](../Images/3b2df520a5a22f6295de360a159c8d8c.png)

我想要什么（糟糕的绘画，但你明白了：D）：

![在此处输入图像描述](../Images/05544f3366a56d9e5c2517471ddedfae.png)

af 白色框应该是复选框。

另外.....我知道我真的应该用这个发布代码，但是这个图没有给出 xml 文件，它完全是在一个简单的 Java 类中完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:40:46.763

这是 AChartEngine 中的常见问题解答。可以在[这里](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a/4079692#4079692)找到解决方案。

演示项目中也有一个示例。[您可以在此处](http://code.google.com/p/achartengine/downloads/list)下载 ACE 演示。它还包括一些演示如何在 XML 布局中嵌入图表的代码。

# django - 保存模型时执行 X

> ID：11400587
> 
> 赞同：1
> 
> 时间：2012-07-09T18:06:09.540
> 
> 标签：django, orm, django-models, model, save

保存Django的模型时，X的正确方法是什么？让我试着解释一下。:)

例如，我有负责博客文章的模型。如果尚未设置，我想使用标题字段生成 slug 字段。它应该在模型保存之前发生。这就是我目前实现它的方式。

```
def save(self, *args, **kwargs):
    if self.slug == '':
        self.slug = slugify(self.title)
    super(Article, self).save(*args, **kwargs) 
```

还有其他方法吗？还有其他方法比这更好吗，怎么样？

感谢任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:31:19.903

最合适的方法是覆盖`clean`模型的方法：

```
from django.template import defaultfilters

class Article(models.Model):
    ...
    def clean(self):
        if self.slug.strip() == '':
            self.slug = defaultfilters.slugify(self.title)

        super(Article, self).clean() 
```

此方法将在模型保存之前调用，并且在任何唯一性检查完成之前，所以如果有问题，它仍然会被捕获。

[您可以在此处](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean)阅读有关模型的 clean 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:17:21.137

我会将其构建到输入表单中并使用 ModelAdmin 或 ModelForm。

管理表格：

```
from django.contrib import admin

class ArticleAdmin(admin.ModelAdmin):

    prepopulated_fields = {'slug': ('title', )} 
```

模型形式：

```
class ArticleForm(forms.ModelForm):

    class Meta:
        model = Article

    def clean_slug(self):
       if !self.cleaned_data['slug'] :
           self.cleaned_data['slug'] = slugify(self.title)
       return True 
```

再次在那个 clean_slug 中，您可能想先检查它是否是唯一的……如果不是，则将 slug 修改为唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:46:56.980

您也可以使用信号。使用 django 自带的 post save 信号。 [https://docs.djangoproject.com/en/dev/topics/signals/](https://docs.djangoproject.com/en/dev/topics/signals/)

# python - 遍历嵌套在字典中的列表

> ID：11400590
> 
> 赞同：1
> 
> 时间：2012-07-09T18:06:11.613
> 
> 标签：python, list, dictionary, for-loop

我有一个由 JSON 结果组成的 python 字典。该字典包含一个嵌套字典，其中包含一个包含嵌套字典的嵌套列表。还在我这儿？这是一个例子：

```
{'hits':{'results':[{'key1':'value1', 
                    'key2':'value2', 
                    'key3':{'sub_key':'sub_value'}},
                   {'key1':'value3',
                    'key2':'value4',
                    'key3':{'sub_key':'sub_value2'}}
                  ]}} 
```

我想从字典中得到的`sub_vale`是每个`sub_key`并将其存储在不同的列表中。无论我尝试什么，我都会不断出错。

这是我最后一次尝试：

```
inner_list=mydict['hits']['results']#This is the list of the inner_dicts

index = 0
    for x in inner_list:
        new_dict[index] = x[u'sub_key']
        index = index + 1

print new_dict 
```

它打印了前几个结果，然后开始返回原始字典中的所有内容。我无法理解它。如果我用语句替换该`new_dict[index]`行，`print`它将完美地打印到屏幕上。真的需要一些输入！

```
for x in inner_list:
    print x[u'sub_key'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:17:32.520

`x`是一本字典

在第一次迭代`for x in ...`

```
x={'key1':'value1', 
                'key2':'value2', 
                'key3':{'sub_key':'sub_value'}}, 
```

请注意，没有 key `sub_key`in`x`而是 in`x['key3']['sub_key']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:21:28.733

```
>>> dic={'hits':{'results':[{'key1':'value1', 
                    'key2':'value2', 
                    'key3':{'sub_key':'sub_value'}},
                   {'key1':'value3',
                    'key2':'value4',
                    'key3':{'sub_key':'sub_value2'}}
                  ]}}
>>> inner_list=dic['hits']['results']
>>> [x[y]['sub_key'] for x in inner_list for y in x if isinstance(x[y],dict)]
['sub_value', 'sub_value2'] 
```

如果你确定它`key3`总是包含 inner `dict`，那么：

```
>>> [x['key3']['sub_key'] for x in inner_list]
['sub_value', 'sub_value2'] 
```

不使用`List comprehensions`：

```
>>> lis=[]
>>> for x in inner_list:
    for y in x:
        if isinstance(x[y],dict):
            lis.append(x[y]['sub_key'])

>>> lis
['sub_value', 'sub_value2'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:24:07.620

在做了一些假设之后：

```
[e['key3']['sub_key'] for e in x['hits']['results']] 
```

要更改每个实例：

```
for e in x['hits']['results']:
 e['key3']['sub_key'] = 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T18:38:06.497

索引错误来自大于的`new_dict[index]`大小。`index``new_dict`

应该考虑列表理解。它通常更好，但有助于理解它是如何在循环中工作的。试试这个。

```
new_list = []
for x in inner_list:
    new_list.append(x[u'sub_key'])

print new_list 
```

如果您想坚持使用 dict，但使用 index 作为键，请尝试以下操作：

```
index = 0
new_dict = {}
    for x in inner_list:
        new_dict[index] = x[u'sub_key']
        index = index + 1

print new_dict 
```

好的，根据您在下面的评论，我认为这就是您想要的。

```
inner_list=mydict['hits']['results']#This is the list of the inner_dicts

new_dict = {}
for x in inner_list:
    new_dict[x['key2']] = x['key3']['sub_key']

print new_dict 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T18:38:19.013

您忘记了嵌套级别。

```
for x in inner_list:
    for y in x:
        if isinstance(x[y], dict) and 'sub_key' in x[y]:
            new_dict.append( x[y]['sub_key'] ) 
```

# ocaml - OCaml Mascot 无法从 .mli 文件中找到模块

> ID：11400594
> 
> 赞同：1
> 
> 时间：2012-07-09T18:06:33.150
> 
> 标签：ocaml

给定以下源文件：

```
(* /tmp/src/A.mli *)
val f : B.t -> B.t 
```

* * *

```
(* /tmp/src/A.ml *)
let f (x : B.t) = x 
```

* * *

```
(* /tmp/src/B.mli *)
type t 
```

* * *

```
(* /tmp/src/B.ml *)
type t = int 
```

我尝试运行[吉祥物](http://mascot.x9c.fr/examples.html)代码检查器，但它无法绑定从`.mli`文件引用的模块，尽管有`-I`标志。`.ml`它可以很好地解决来自文件的绑定。

`$ mascot.native -config mascot.cfg -I /tmp/src /tmp/src/{A,B}.{ml,mli} -html /tmp/out`
**`File "/tmp/src/A.mli", line 2, characters 8-11:`**
**`Error: Unbound module B`**
`loading configuration files...`
`configuring checks...`
`analyzing dependencies...`
`running checks...`
`reporting to "/tmp/out" with output "html"...`

`.ml`它可以很好地解决来自文件的绑定。

```
$ mascot.native -config mascot.cfg -I /tmp/src /tmp/src/{A,B}.ml -html /tmp/out
loading configuration files...
configuring checks...
analyzing dependencies...
running checks...
reporting to "/tmp/out" with output "html"... 
```

[我在手册](http://mascot.x9c.fr/distrib/mascot.pdf)中找不到任何解释*要分析的文件的*内容，但我相信 Mascot 应该在接口文件上运行，因为[示例](http://mascot.x9c.fr/examples.html)页面包含文档问题的示例：

> ```
> (** Module descriptoion. *)
> 
> type t
> (* This one is not actually documented
>    (bare comment instead of ocamldoc one). *) 
> ```

当我只提供源文件时，似乎没有运行接口检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:27:29.290

我遇到了同样的问题，`B`只能通过编译它的接口文件*并*在`B.cmi`当前目录中使 Mascot 找到模块，例如：

```
cd /tmp/src
ocamlc B.mli
mascot.native -config mascot.cfg {A,B}.{ml,mli} -html /tmp/out.html 
```

似乎没有命令行选项可以告诉 Mascot 在哪里寻找`.mli`/`.cmi`文件；如问题中所述，该`-I`标志不适用于此。

# sql-server - 在 SQL Server 2008 中解析字符

> ID：11400597
> 
> 赞同：2
> 
> 时间：2012-07-09T18:06:35.270
> 
> 标签：sql-server, sql-server-2008

我有一个名为 txt_Full_Path 的 SQL 列，其数据如下所示

```
E:/My_Users//kpa1/eOReport - VSD.mrk 
E:/My_Users//krishr9/Report.mrk 
E:/My_Users//kristc/AllPAS.mrk 
E:/My_Users//kukerm/v1.mrk      
E:/My_Users//ksnedike/abcdef.mrk 
```

第一次出现'//'从左向右移动后如何获取值？

这样我就可以在新列中获得这些值。

```
kpa1
krishr9
kristc
kukerm
ksnedike 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:11:23.390

```
DECLARE @x TABLE(y VARCHAR(64))

INSERT @x SELECT 'E:/My_Users//kpa1/eOReport - VSD.mrk' 
UNION ALL SELECT 'E:/My_Users//krishr9/Report.mrk' 
UNION ALL SELECT 'E:/My_Users//kristc/AllPAS.mrk' 
UNION ALL SELECT 'E:/My_Users//kukerm/v1.mrk'
UNION ALL SELECT 'E:/My_Users//ksnedike/abcdef.mrk';

SELECT y, part = SUBSTRING(y, 2, CHARINDEX('/', y, 2)-2)
FROM (SELECT y = SUBSTRING(y, CHARINDEX('//', y) + 1, 64) FROM @x) AS z; 
```

结果：

```
y                         part
------------------------  ----------
/kpa1/eOReport - VSD.mrk  kpa1
/krishr9/Report.mrk       krishr9
/kristc/AllPAS.mrk        kristc
/kukerm/v1.mrk            kukerm
/ksnedike/abcdef.mrk      ksnedike 
```

您还可能遇到没有尾随`/`字符的情况，例如`'E:/foo//bar'`- 如果是这样，那么：

```
SELECT y, part = SUBSTRING(y, 2, COALESCE(NULLIF(CHARINDEX('/', y, 2),0),66)-2)
FROM (SELECT y = SUBSTRING(y, CHARINDEX('//', y) + 1, 64) FROM @x) AS z; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:13:06.497

这很丑陋，但它有效：

```
SELECT SUBSTRING(YourValue, CHARINDEX('//', YourValue) + 2, 
    ABS(CHARINDEX('/', YourValue, CHARINDEX('//', YourValue) + 2) - 
        (CHARINDEX('//', YourValue) + 2)))    
FROM YourTable 
```

**编辑**

`ABS()`在最后一部分中添加了处理没有 .`/`之后的文件夹的功能`//`。

# c++ - 对类成员的引用的迭代器，简单且最好可重用

> ID：11400599
> 
> 赞同：0
> 
> 时间：2012-07-09T18:06:39.777
> 
> 标签：c++, iterator

请考虑以下样板类片段：

```
class ObjectA : public BaseObject
{
    DerivedMemberA a, a2, a3;
    DerivedMemberB b;
    DerivedMemberC c;
    // ...
}; 
```

这些`DerivedMember*`类型派生自一个公共`BaseMember`类，并且`ObjectA`（和类似`ObjectB`的，`ObjectC`...）将派生自`BaseObject`.

现在我想实现一个在公共`BaseObject`接口中的迭代器，它将迭代对派生类成员的引用（as `BaseMember&`）。

换句话说，使用如下：

```
BaseObject& b = someObject;
for (BaseObject::iterator it = b.begin(); it != b.end(); ++it)
{
    BaseMember& m = *it;
    // ...
} 
```

调用`ObjectA`将迭代`a`，`a2`...

解决这个问题的最佳方法是什么？最好避免对迭代器进行子类化。是否有任何现成的迭代器类或模板可以在那里重用？

我正在考虑实现一个虚拟成员函数，该函数将采用变量的数字“索引”并使用 a`switch`返回适当的引用；然后从索引保持迭代器中调用该成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:16:03.207

一个快速而肮脏的概念验证：

```
template <class Source, class Type>
class MyIterator : public std::iterator<std::input_iterator_tag, Type>
{
    typedef Type* (Source::*getter_method)(int n);

    Source& _inst;
    getter_method _getter;
    int _index;
    bool _end;
    Type* _curr_val;

public:
    MyIterator(Source& instance, getter_method method, bool end = false)
        : _inst(instance), _getter(method), _index(0), _end(end)
    {
        if (!end)
            ++*this;
    }

    void operator++()
    {
        assert(!_end);
        _curr_val = (_inst.*_getter)(_index++);

        if (!_curr_val)
            _end = true;
    }

    bool operator!=(MyIterator rhs)
    {
        return _end != rhs._end;
    }

    Type& operator*()
    {
        assert(!_end);

        return *_curr_val;
    }
}; 
```

使用如下实现的对象：

```
class BaseObject
{
protected:
    virtual BaseMember* iterator_getter(int n) = 0;

public:
    typedef MyIterator<BaseObject, BaseMember> iterator;

    iterator begin()
    {
        return iterator(*this, &BaseObject::iterator_getter);
    }

    iterator end()
    {
        return iterator(*this, &BaseObject::iterator_getter, true);
    }
}; 
```

和派生对象，如：

```
class ObjectA : public BaseObject
{
    // ...
protected:
    virtual BaseMember* iterator_getter(int n)
    {
        BaseMember* ret;

        switch (n)
        {
            case 0:
                ret = &a;
                break;
            case 1:
                ret = &a2;
                break;
            case 2:
                ret = &a3;
                break;
            // ...
            default:
                ret = 0;
        }

        return ret;
    } 
```

你怎么看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:16:38.270

C++ 没有任何自省的概念，因此基类绝对无法知道派生类中定义了哪些成员。

您可以做的最好的事情是在每个派生类中创建一个虚拟函数，以迭代其自己的成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:13:14.480

如果您使用数组来执行此操作，那将是最好的。您当前拥有的代码：

```
DerivedMemberA a, a2, a3;
DerivedMemberB b, b2;
DerivedMemberC c, c2; 
```

它几乎没有任何真正的结构。为什么不使用 DerivedMemberA 对象数组，而不是使用 3 个 DerivedMemberA 对象？B和C也一样。

——里根

# java - java - 使用返回数组中的元素

> ID：11400601
> 
> 赞同：1
> 
> 时间：2012-07-09T18:06:45.897
> 
> 标签：java, arrays

`get1()`方法返回一个数组。我确实得到了输出，但值`get1()`来自`[D@addbf1`

我的问题是有什么方法可以直接使用返回的数组来获取值`inf1[0]`并`inf1[1]`在输出语句中显示它？

我知道显示输出的其他方式。但我想知道我是否可以直接检索返回数组的元素。

```
class vehicle{
   double [] inf1 = new double[2];
   void set(double d, double s) {
     inf1[0]=d;
     inf1[1]=s;
   }
   double[] get1() {
     return inf1;
   }
}

public class calc2 {
   public static void main(String args[]) {
     vehicle ob = new vehicle();
     ob.set(56.24, 75);
     System.out.println("The time taken to cover "+ob.get1());
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:10:49.973

> 我的问题是有什么方法可以直接使用返回的数组来获取 inf1[0] 和 inf1[1] 中的值并在输出语句中显示出来？

当然：

```
double[] result = obj.get1();
System.out.println("Result: " + result[0] + "," + result[1]); 
```

或者：

```
System.out.println("Result: " + Arrays.toString(obj.get1()); 
```

这`[D@addbf1`只是调用数组*的结果。*`toString()`如果要获取数组中的值，通常只需使用数组索引表达式单独访问每个元素：`array[index]`

（尚不清楚您的问题是否真的是关于*访问*数组值，或者将数组转换为文本以用于显示目的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:11:16.047

`get1()`是的，您可以通过以下方法引用数组的元素：

`get1()[0]`将工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:12:02.123

尝试

```
System.out.println("The time taken to cover "+ob.get1()[0]); 
```

`ob.get1()`将返回您的数组，以便您现在可以使用`[index]`它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T18:17:40.080

您可以使用像 ArrayList 这样的集合类。

宣布 `ArrayList<double> inf1 = new ArrayList<double>();`

在 get1()

```
inf1.add(d);
inf1.add(s); 
```

在 calc2 中， `System.out.println("The time taken to cover "+ob.get1());`

# java - 使用 JDOM 2.0 针对 XSD 模式验证 XML 文件

> ID：11400603
> 
> 赞同：1
> 
> 时间：2012-07-09T18:06:55.253
> 
> 标签：java, xml-validation, jdom, jdom-2

我一直在寻找一个示例，说明如何在解析之前使用 JDOM 2.0 针对 XSD 模式验证 XML 文件。

我已经搜索了大约一个小时，但找不到可行的解决方案，并**允许我从应用程序代码内部提供 XSD 文件（位于本地文件系统上）的路径，而不是作为XML 文件中的一个属性**。

令我惊讶的是，Internet 上还没有一个易于访问的示例片段。如果您能在这里提供一份，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:16:16.550

使用 JDOM 2 很容易做到。你可以用 2 行代码来做到这一点：

```
SAXBuilder builder = new SAXBuilder(XMLReaders.XSDVALIDATING);
Document document = builder.build(new File("yourXmlFile.xml")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:19:19.237

尝试查看 XSDSchemaFactory：

[http://www.jdom.org/docs/apidocs/org/jdom2/input/sax/XMLReaderXSDFactory.html](http://www.jdom.org/docs/apidocs/org/jdom2/input/sax/XMLReaderXSDFactory.html)

有关此问题的更一般性讨论，请查看包文档：

[http://www.jdom.org/docs/apidocs/org/jdom2/input/sax/package-summary.html](http://www.jdom.org/docs/apidocs/org/jdom2/input/sax/package-summary.html)

有关动机/功能的一些信息，请参阅 wiki 页面：

[https://github.com/hunterhacker/jdom/wiki/JDOM2-Feature-SAX-Parsing-Updates](https://github.com/hunterhacker/jdom/wiki/JDOM2-Feature-SAX-Parsing-Updates)

如果您有更多问题，请在此处发表评论，或在 jdom-interest 邮件列表中留言。如果您觉得文档可以改进，请也对此发表评论。

# java - Java PipedInputStream PipedOutputStream 大小限制

> ID：11400604
> 
> 赞同：3
> 
> 时间：2012-07-09T18:06:57.640
> 
> 标签：java, pipeline

我正在使用java管道将数据（outstream）从解压缩模块（JavaUncompress类）传递到解析模块（处理程序类），文件很大，我想先解压缩文件并直接解析而不是保存解压缩文件然后解析。但是，它仅适用于小文件。当我输入一个 1G 文件时，似乎只有文件的一部分（比如 50000 行）从输出流到解析模块的输入流。

我尝试使用字符串来保存未压缩的文件，并且发生了同样的事情，字符串仅包含解压缩文件的一部分（与流水线版本相同的第 50000 行停止）。对发生的事情有任何想法吗？非常感谢。

## 这是我的管道代码：

```
 {
   PipedInputStream in = new PipedInputStream(); // to output
   final PipedOutputStream out = new PipedOutputStream(in); // out is something from other

   new Thread(
    new Runnable(){
        public void run(){ 
                JavaUncompress.putDataOnOutputStream(inFile,out); }
        }
        ).start();

   doc = handler.processDataFromInputStream(in);
   }

   public static void putDataOnOutputStream(String inZipFileName, PipedOutputStream out){

   try {
          FileInputStream fis = new FileInputStream(inZipFileName);
          //FilterInputStream ftis = new FilterInputStream;
          ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));
          ZipEntry entry;

          while((entry = zis.getNextEntry()) != null) {
             System.out.println("Extracting: " +entry);
             byte data[] = new byte[BUFFER];

             long len = entry.getSize();
             long blk = len/BUFFER;
             int  rem = (int)(len - blk*BUFFER);
             System.out.println(len+" = "+blk +"*BUFFER + "+rem);

             for(long i=0; i!=blk; ++i){
                 if ((zis.read(data, 0, BUFFER)) != -1) {
                     out.write(data);
                 }
             }

             byte dataRem[] = new byte[rem];
             if ((zis.read(dataRem, 0, rem)) != -1) {
                 out.write(dataRem);
                 out.flush();
                 out.close();
             }

          }
          zis.close();

       } catch(Exception e) {
          e.printStackTrace();
       }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T23:33:46.000

`PipedOutputStream.write()`如果相应`PipedInputStream`的得到超过 4096 或它后面的任何字节，将阻塞，但为什么要这样做呢？为什么不直接解压缩文件并在同一个线程中处理它？多线程没有优势，这只是一个毫无意义的复杂化。

在 Java 中，我在 15 年中只使用过一次管道，并且很快将其更改为队列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-19T11:27:10.930

我同意不使用 JDK 的 Pipes 实现，它们太混乱且完全同步，这是一个更快的 BlockingQueue 实现，它借助一个小缓冲区将对上下文切换的影响最小，阻塞队列是完美的对于单个生产者/消费者：

```
import java.io.IOException;
import java.io.OutputStream;
import java.util.concurrent.*;

public class QueueOutputStream extends OutputStream
{
  private static final int DEFAULT_BUFFER_SIZE=1024;
  private static final byte[] END_SIGNAL=new byte[]{};

  private final BlockingQueue<byte[]> queue=new LinkedBlockingDeque<>();
  private final byte[] buffer;

  private boolean closed=false;
  private int count=0;

  public QueueOutputStream()
  {
    this(DEFAULT_BUFFER_SIZE);
  }

  public QueueOutputStream(final int bufferSize)
  {
    if(bufferSize<=0){
      throw new IllegalArgumentException("Buffer size <= 0");
    }
    this.buffer=new byte[bufferSize];
  }

  private synchronized void flushBuffer()
  {
    if(count>0){
      final byte[] copy=new byte[count];
      System.arraycopy(buffer,0,copy,0,count);
      queue.offer(copy);
      count=0;
    }
  }

  @Override
  public synchronized void write(final int b) throws IOException
  {
    if(closed){
      throw new IllegalStateException("Stream is closed");
    }
    if(count>=buffer.length){
      flushBuffer();
    }
    buffer[count++]=(byte)b;
  }

  @Override
  public synchronized void write(final byte[] b, final int off, final int len) throws IOException
  {
    super.write(b,off,len);
  }

  @Override
  public synchronized void close() throws IOException
  {
    flushBuffer();
    queue.offer(END_SIGNAL);
    closed=true;
  }

  public Future<Void> asyncSendToOutputStream(final ExecutorService executor, final OutputStream outputStream)
  {
    return executor.submit(
            new Callable<Void>()
            {
              @Override
              public Void call() throws Exception
              {
                try{
                  byte[] buffer=queue.take();
                  while(buffer!=END_SIGNAL){
                    outputStream.write(buffer);
                    buffer=queue.take();
                  }
                  outputStream.flush();
                } catch(Exception e){
                  close();
                  throw e;
                } finally{
                  outputStream.close();
                }
                return null;
              }
            }
    );
  } 
```

# php - 需要对 MySQL 数据库进行复杂的 sql 查询

> ID：11400608
> 
> 赞同：1
> 
> 时间：2012-07-09T18:07:02.773
> 
> 标签：php, mysql, sql

我有以下数据库。一位用户可以撰写一篇或多篇文章。投票是多对多的。

用户写了一篇文章。任何人都可以为该职位投票，因此投票将保存在投票表中。

我需要在页面上显示所有帖子。在每个帖子上，需要显示帖子的作者、post_votes 和作者的投票。

我的桌子是：

```
Table: user

id | user_name
1  | John
2  | Sam
3  | Susan

Table: post

id | post_title | user_id
1  | Hello      | 1
2  | Sunday     | 1
3  | Monday     | 2
4  | Sun        | 1
5  | Sun        | 3

Table: votes

id | post_id

1  |  1
2  |  1
3  |  3
4  |  2
5  |  3
6  |  1 
```

我需要查询返回以下结果集：

```
post_id | post_votes | user_id | user_votes
1       | 3          | 1       | 4 
2       | 1          | 1       | 4
3       | 2          | 2       | 2  
4       | NULL       | 1       | 4    
5       | NULL       | 3       | NULL 
```

我尝试了各种组合，但我的大脑无法工作。此外，如果有更好的方法来设计数据库以便检索上述内容变得容易，那将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:13:26.450

这有点复杂。在这种情况下，您通常希望分别计算每个聚合列。在这种情况下，使用一个子查询获取帖子数，使用另一个子查询获取用户数。

```
select p.post_id, pv.post_votes, uv.user_id, uv.user_votes
from post p left outer join
     (select v.post_id, count(*) as post_votes
      from votes v
      group by v.post_id
     ) pv
     on p.id = pv.id left outer join
     (select p.user_id, count(*) as user_votes
      from votes v join
           post p
           on p.id = v.post_id
      group by p.user_id
     ) uv
     on p.user_id = uv.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:13:54.187

```
SELECT
  post.id,
  post.user_id,
  post_votes.total,
  user_votes.total
FROM
  post
LEFT JOIN
  (SELECT post_id, COUNT(*) as total FROM votes GROUP BY post_id) AS post_votes
    ON post_votes.post_id = post.id
LEFT JOIN
  (SELECT user_id, COUNT(*) as total FROM votes GROUP BY user_id) AS user_votes
    ON user_votes.user_id = post.user_id 
```

# mercurial - 有没有办法删除所有本地变更集以节省空间？

> ID：11400609
> 
> 赞同：2
> 
> 时间：2012-07-09T18:07:02.477
> 
> 标签：mercurial

换句话说，有没有办法将 hg 存储库恢复到您第一次对外部存储库执行 hg 克隆时存在的状态，并且在您进行拉取之前？

我试图在通过 FTP 传输服务器 VM 时节省空间，并且 hg 存储库存在于其他地方，因此没有理由转移它们。我想以这样一种方式设置服务器，即所有必须在另一端完成的操作就是 hg pull、hg update 并且它已准备好再次运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:55:12.897

听起来您想将克隆剥离到最低限度，并且仍然从原始存储库中恢复。为什么不完全删除本地副本并保留克隆路径列表以再次获取它们？

否则（假设您已经推送了任何您想要保留的内容）使用`strip`MercurialQueues 扩展中的命令，您可以`hg strip 0 --no-backup`使用`hg pull`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:01:45.957

不，不是在一个单一的善变命令中。一旦你运行了`hg pull`，mercurial 就不会记录拉动之前的状态。

但是，如果您在克隆时记录下变更集是什么（例如，只是将其写入某个未跟踪的文件），您可以非常有效地删除所有您不想要的变更集。请参阅[Mercurial：删除变更集](http://mercurial.selenic.com/wiki/EditingHistory#Basic_changeset_removal_with_clone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:47:37.433

如果自上次拉取后您尚未提交或运行任何其他更改存储库内部状态的命令，则可以运行[hg rollback](http://www.selenic.com/mercurial/hg.1.html#rollback)。

# web-applications - 将数据推送到客户端浏览器的 Web 应用程序

> ID：11400612
> 
> 赞同：0
> 
> 时间：2012-07-09T18:07:14.287
> 
> 标签：web-applications

目前我们有一个 Applet，它通过 FTP、Sockets 和 HTTP 消息与我们的硬件和服务器进行交互。有人问我是否可以放弃小程序，直接使用显示动态网页和 JavaScript 的浏览器。我不相信这是可能的，因为据我了解，浏览器只能显示对其发起的请求的响应，而我们的应用程序需要显示它从硬件获取的数据，这些数据仅在其传感器触发时发送。

我曾想过使用 AJAX 定期轮询硬件，但我相信同源安全限制会阻止我轮询具有不同地址的不同硬件设备。我可以通过让各种硬件设备将所有更新发送到服务器来解决此问题，但这将迫使我们对当前配置方式进行重大更改。还有一个性能问题——它是一个全国性的应用程序，每天有数百台设备产生数百万个事件。我必须能够在 3 秒内做出响应，因此我必须非常频繁地（1 秒或更短）轮询硬件以保持该性能水平。

那么我对 Web 应用程序的理解是否正确？

浏览器有没有办法显示**来自** 多个地址***的信息？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:12:06.363

有可能的。首先，您是对的，浏览器无法使用 AJAX 直接连接到其他服务器。如果这些其他服务器实际上是一些硬件设备，我会称之为优势。您需要一台服务器来接收所有流量。

然而，在现代浏览器和服务器中，您可以使用[comet](/questions/tagged/comet "显示标记为“彗星”的问题")、[web-socket](/questions/tagged/web-socket "显示标记为“网络套接字”的问题")和其他技术将数据从服务器推送到客户端。基本上，您在客户端上保持一个开放的 HTTP 连接，只要服务器有一些数据，它就会立即发送，没有任何延迟。与每隔几秒轮询一次相比，这是一项重大改进——您避免了延迟和系统上的额外负载。

在 Java 领域，您可以使用[servlet-3.0](/questions/tagged/servlet-3.0 "显示标记为“servlet-3.0”的问题")和[环境](/questions/tagged/atmosphere "显示标记为“气氛”的问题")来救援。

# unix - Bash Shell 循环遍历文件夹集

> ID：11400615
> 
> 赞同：0
> 
> 时间：2012-07-09T18:07:32.580
> 
> 标签：unix

我有一个文件夹列表。每个文件夹名称例如：

*   pippo1 包含文件 pippo1.txt，
*   pippo2 包含文件 pippo2.txt，
*   pippo3 包含文件 pippo3.txt 等。

我想进入第一个文件夹，从文件名 pippo1.txt 中删除数字然后退出，进入第二个名为 pippo2 的文件夹，其中包含文件 pippo2.txt，从文件名中删除 2 等等。我尝试了以下代码，但它不起作用！代码是：

```
for i in *
do
    cd $i
    ls *.txt | sed -e "s/[0-9]//g"
    cd ..
done 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:41:10.213

切换目录时，调用子 shell 是最好和最干净的。

重命名文件时，通常最好使用本地`rename`命令，或者获取一个。问题是有几个“标准”`rename`命令，分布更广的命令远不如基于 Perl 的命令强大。这种方法避免了`rename`，但并不完全可取：

```
for dir in *
do
    (
    cd "$dir"
    for file in *[0-9].txt
    do
        mv "$file" $(echo "$file" | sed 's/[0-9]\.txt$/.txt/')
    done
    )
done 
```

基于 Perl 的`rename`将正则表达式作为第一个参数并将其应用于文件名：

```
for dir in *
do
    (
    cd "$dir"
    rename 's/\d\.txt$/.txt/' *[0-9].txt
    )
done 
```

这个比较靠谱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:10:53.447

如果要求就这么简单，那么您只需使用 bash 替换即可：

```
for file in `find . -name 'pippo*.txt'`; do
    mv $file ${file/[0-9].txt/.txt}
done 
```

但是，这将在文件名中的多个单个数字上失败，例如`pippo999/pippo999.txt`. 这可以通过设置`extglob`选项来解决：

```
shopt -s extglob
for file in `find . -name 'pippo*.txt'`; do
    mv $file ${file/+([0-9]).txt/.txt}
done 
```

bash 文件 globbing 中的`+(...)`构造仅在`extglob`设置时可用。

不是使用循环遍历目录树 and `cd`，而是`find`用于获取所有相关文件的列表，然后循环遍历该文件名列表，其形式为：`./pippoN/pippoN.txt`. 重命名使用 bash[参数替换](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)来获取修改后的文件名。另请参见[文件名扩展](http://www.gnu.org/software/bash/manual/bashref.html#Filename-Expansion)。

请注意，文件或目录名称中的空格**会破坏这种方法**，首先使用`find`: 包含空格的路径将被拆分为围绕空格的多个标记，每个标记是列表迭代器中的单独结果。因此，如果您需要预测路径中的空格字符，那么这会变得有点复杂：

```
shopt -s extglob
IFS=$'\n'
for file in `find . -name 'pippo*.txt'`; do
    mv "$file" "${file/+([0-9]).txt/.txt}"
done 
```

在这里，我们引用了`mv`命令的文件名，它将正确处理空格，并且我们更改了字段分隔符`IFS`，以便 bash 不会将空格识别为单词边界。这将解决`find`循环迭代器中的问题。现在路径中的空格将被正确处理，因此 eg`./pippo 9/pippo9.txt`也将被重命名为：`./pippo 9/pippo.txt`。

# mysql - 带有两个时间戳的查询不起作用

> ID：11400618
> 
> 赞同：2
> 
> 时间：2012-07-09T18:07:43.820
> 
> 标签：mysql, timestamp

> **可能重复：**
> [MySQL CURRENT_TIMESTAMP 作为 DEFAULT](https://stackoverflow.com/questions/11400147/mysql-current-timestamp-as-default)

我正在尝试将表创建为

```
CREATE TABLE myTable1 
(
 id INT,
 date_validated TIMESTAMP,
 date_registered TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
); 
```

但是它不起作用。我得到错误

```
Incorrect table definition; there can be only one TIMESTAMP column 
with CURRENT_TIMESTAMP in DEFAULT or ON UPDATE clause 
```

当我切换两个时间戳语句（如下所示）时，它正在工作。

```
CREATE TABLE myTable1 
(
 id INT,
 date_registered TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, 
 date_validated TIMESTAMP
); 
```

知道为什么会这样吗？

这对我来说很奇怪，从来没有遇到过这样的问题。

## [用于检查查询的 sqlfiddle 演示](http://sqlfiddle.com/#!2/a1ef8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:12:23.767

TIMESTAMP 实际上*类似于*DATETIME，但您声明的第一个 TIMESTAMP 会自动初始化：

[http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

因此，当您第一次编写不带属性的 TIMESTAMP 时，MySQL 会在内部对其进行转换，并添加“DEFAULT CURRENT_TIMESTAMP”。当 MySQL 遇到您明确设置 CURRENT_TIMESTAMP 的第二个 TIMESTAMP 时，就会发生冲突。

但是，如果您在第一行中定义 CURRENT_TIMESTAMP，那么它是多余的 - 因为您在第二行中没有指定任何内容，所以第二行没有分配默认值并且不会发生冲突。

从上面的链接中，“它不必是自动初始化或更新为当前时间戳的表中的第一个 TIMESTAMP 列。但是，要为不同的 TIMESTAMP 列指定自动初始化或更新，您必须抑制第一。”

# java - 使用 Android 向 API 发送信息

> ID：11400623
> 
> 赞同：0
> 
> 时间：2012-07-09T18:08:10.083
> 
> 标签：java, android

我正在尝试联系 API 并获得响应。作为调试的一部分，我想确保正在记录响应，它应该是一个 xml 响应。

这是我所拥有的：

公共类 http 扩展 Activity {

```
public void httpMethod(){
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://site.com/api/");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("apikey", "0d4e122d20"));

        nameValuePairs.add(new BasicNameValuePair("ip", "65.82.126.103"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }

   TextView myTextView = (TextView) findViewById(R.id.myTextView);
   myTextView.setText(response);
}
} 
```

我正在尝试查看我得到的响应，但是该行中的可变响应

```
myTextView.setText(response) 
```

正在引发错误：

```
response cannot be resolved to a variable 
```

响应不是真正的 httpresponse 类型的变量吗？这里发生了什么...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:13:00.150

响应变量的范围仅在 try 块内。解决此问题的两种方法：

1) 将这些语句移到后面 `HttpResponse response = httpclient.execute(httppost);`

```
 TextView myTextView = (TextView) findViewById(R.id.myTextView);
   myTextView.setText(response); 
```

`HttpResponse`2）在尝试之外定义响应。

编辑：正如 WindyB 在您在 try 块之外定义时指定的那样，请确保`null`检查以避免`NullPointerException`.

阅读此[链接](http://www.java-made-easy.com/variable-scope.html)

# assembly - 在 x86 程序集中添加 0xFFFFFFFF

> ID：11400624
> 
> 赞同：5
> 
> 时间：2012-07-09T18:08:23.580
> 
> 标签：assembly, x86

我目前正在反转反汇编并偶然发现了一系列我不明白的指令：

给定一个对象指针在`esi`.

```
.text:00C20263                 cmp     dword ptr [esi+80h], 0
.text:00C2026A                 jnz     short loc_C2027D 
```

如您所见，如果成员`+0x80`不为 0（成员是整数），则代码跳转到`00C2027D`：

```
.text:00C2027D                 add     dword ptr [esi+80h], 0FFFFFFFFh
.text:00C20284                 jnz     short loc_C20291 
```

这两个指令是我不太明白的。首先，成员增加0xFFFFFFFF；但是由于成员不是0，这不会超过32位整数的最大值吗？`jnz`指令何时跳转？

有人能指出这两条指令的目的是什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T18:12:49.710

对于有符号变量，0FFFFFFFFh 与 -1 相同，因此这是从值中减去 1 并检查是否将其设为零。编译器通常会发出“加负值”而不是子指令，大概是因为它允许重用编译器逻辑进行加法和减法。

# java - Java 正则表达式转换

> ID：11400629
> 
> 赞同：1
> 
> 时间：2012-07-09T18:08:51.543
> 
> 标签：java, regex, string

> **可能重复：**
> [Java：如何在 Java 中解码 HTML 字符实体，如 HttpUtility.HtmlDecode？](https://stackoverflow.com/questions/994331/java-how-to-decode-html-character-entities-in-java-like-httputility-htmldecode)

我有一些以这种格式编码的特殊字符的字符串数据`&#039`

在这种情况下，编码是一个 ' 符号，一个单引号。

所以例子`"the citizen&#039s home"`应该看起来像`"the citizen's home"`但它没有。

不幸的是，这不是这样解释的，我需要为这些东西解析我的所有字符串并转换它们

第一：那个格式叫什么，这将帮助我找到一种转换方法

第二：你知道修复我的琴弦的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:12:04.340

无需重新发明轮子：Apache Commons Lang 的[StringEscapeUtils.unescapeHtml4(String)](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html#unescapeHtml4%28java.lang.String%29)就是您想要的。

> 将包含实体转义的字符串取消转义为包含与转义对应的实际 Unicode 字符的字符串。支持 HTML 4.0 实体。
> 
> 例如，字符串`"&lt;Fran&ccedil;ais&gt;"`将变为 `"<Français>"`
> 
> 如果一个实体无法识别，则将其单独放置，并逐字插入结果字符串中。例如`"&gt;&zzzz;x"`将成为`">&zzzz;x"`.

# orm - Doctrine2：对关联应用过滤器

> ID：11400634
> 
> 赞同：5
> 
> 时间：2012-07-09T18:09:06.340
> 
> 标签：orm, symfony, doctrine-orm

例如，如果我有：

```
class Parent {

/* ... */

/** One to Many association */
protected $children;

}

class Child
{
/* .. */
/** many to one association */
protected $parent;

/* name of child column */
protected $name;
} 
```

现在，假设父母，我想按孩子的名字过滤孩子。如果可能，以某种方式使用此过滤器执行 parent.getChildren() 会很好，但这是不可能的。

我希望它可能具有 getChildrenByName() 语法，但这个函数似乎不适合 ORM 类和它的存储库类。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T16:05:50.033

此功能允许您在获取关联时添加条件：

**使用关联：过滤集合**

*   [3.0 版](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#filtering-collections)
*   [2.7 版](https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/working-with-associations.html#filtering-collections)

# asp.net - HTTP 错误 400 - 由于 vb.net 中的 FileUpload 控制导致的错误请求

> ID：11400637
> 
> 赞同：2
> 
> 时间：2012-07-09T18:09:24.680
> 
> 标签：asp.net, vb.net, http

我有一个包含提交按钮和 FileUpload 控件的 Web 表单（.net 框架 4）。当我从 Visual Studio 2010 调试网站时，表单按预期显示。当我上传大小 > 438k 的文件时（根据我的观察。最大文件大小的实际值未知，但对于大小为 200K 的文件，它正在工作），单击按钮时出现以下错误。

```
Server Error in '/Dpp2012New' Application.
HTTP Error 400 - Bad Request.
Version Information: ASP.NET Development Server 10.0.0.0 
```

当我上传大小小于上述限制的文件时，代码照常运行。onclick 事件处理程序代码隐藏为：

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    If FileUpload1.HasFile Then
        MsgBox("Has file!")
    End If
End Sub 
```

通过网络（[this](https://stackoverflow.com/questions/5936571/how-to-make-the-asp-file-upload-control-accept-large-files) SO post）刮擦后，我在web.config中添加了这个：

```
 <system.web>
        <httpRuntime  maxRequestLength="102400" executionTimeout="360"/>
    </system.web> 
```

这应该解决了这个问题。但它没有。任何解决问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:13:53.177

请调试您的站点并检查您是否连接到数据库？我认为你没有连接。如果您在上传大文件时遇到问题，则必须将以下属性添加到您的 webconfig 文件中。

```
<system.web> 
<httpRuntime executionTimeout="110" maxRequestLength="20000" /> 
</system.web> 
```

maxRequestLength 是最大文件大小。

**更新答案：** 在不同的浏览器上运行您的网站，例如 google chrome、Internet Explorer。

# asp.net - MVP MVC 和 MVVM 的区别

> ID：11400640
> 
> 赞同：15
> 
> 时间：2012-07-09T18:09:42.387
> 
> 标签：asp.net, wpf, winforms, silverlight, design-patterns

伙计们，我浏览了许多链接/博客。我看到他们中的大多数人无法用外行语言清晰地交流，以及 MVP、MVVM 和 MVC 之间的技术差异。我知道每个角色代表什么，也曾为 MVP 工作过。但是真的不明白是否有人问我同样的问题。为什么我不能在 MvP 中使用控制器而不是 Presenter ？为什么在 MVVM 中查看模型而不是演示者，它有什么不同？我可以用一句话说“MVC 针对 ASP.NET 进行了优化，并且在 VS 中也有模板，MVP 针对 winforms 和针对 SL/WPF 的 MVVM 进行了优化，因为它支持内置绑定功能等”。但我觉得这不是我必须了解的，而是详细而深入的。有人可以通过详细的解释和用法以及选择一个的实际理由来阐明这一点。谢谢你们...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T18:54:09.997

我不能给你一个完整的答案，但是我确实很难学习其中的一些模式，并且可能能够让你了解一些主要差异。

我先学了MVVM，然后学了MVC。我知道 MVP 以及它在理论上是如何工作的，但是我从未真正用它构建过应用程序。

设计模式之间最大的区别似乎是由谁控制应用程序流程和逻辑。

在**MVVM**中，您的代码类 ( `ViewModels`) 是您的应用程序，而您`Views`的只是一个非常用户友好的界面，位于应用程序代码之上并允许用户与之交互。这意味着`ViewModels`他们的工作量很大，因为他们*是*您的应用程序，负责从应用程序流程到业务逻辑的所有事情。

使用**MVC**，您`Views`就是您的应用程序，而您`Controller`处理应用程序流程。应用程序逻辑通常在 中找到`ViewModels`，它们被认为是`M`MVC 中的一部分（旁注：`M`MVC 中的 不能被认为与`M`MVVM 中的相同，因为 MVC 的`M`层比 MVVM 的层包含更多的功能`M`）。给用户一个屏幕 ( `View`)，他们与之交互，然后向 提交一些内容`Controller`，然后`Controller`决定谁对数据做什么，`View`并向用户返回一个新的。

我没有使用过**MVP**，但是我对它的理解与 MVC 非常相似，但针对桌面应用程序而不是客户端/服务器应用程序进行了优化。它们是实际的`Views`应用程序，而`Presenter`处理应用程序事件和业务逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T12:17:09.797

在 MVC 中，您将模型视图控制器链接为三角形 在 MVP 中，您将模型视图演示器链接为线性 基本上 MVC 和 MVP 非常相似，但是使用 MVC 更简单，即使您已经内置了 MS 插件来创建和分离你的 MVC 提供了它的优势 有了 MVP，你的应用程序看起来就像一个通用的 ASP.NET 应用程序，这意味着：没有 Razor，没有 .cshtml 用于视图等，你必须自己处理结构。MVVM 通常用于 Silverlight/WPF，对于那些技术人员来说，它是最佳选择。MVVM 和 MVC 的思想非常相似。如果您使用淘汰赛，您还可以在 Web 应用程序的客户端应用 MVVM。

# java - Beagleboard XM 上的 Android 4.0 Ice Cream Sandwich 出现“MediaPlayer 因未处理的事件而消失”错误

> ID：11400642
> 
> 赞同：0
> 
> 时间：2012-07-09T18:09:46.317
> 
> 标签：java, android, android-4.0-ice-cream-sandwich

我在 Beagleboard XM 上使用 Android 4.0 Ice Cream Sandwich。我们正在尝试使用 VideoView 将视频文件从 sdcard 播放到 BeagleBoard。播放 30 分钟左右后出现以下错误

> MediaPlayer 离开了未处理的事件

这在 ICS 平板电脑上运行良好，但在 BeagleBoard 上会出现问题。此外，在`onCompletion`videoview 或任何地方，我没有使用 MediaPlayer 对象。没找到相关的。一些建议会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-14T15:57:14.733

只需在使用 MediaPlayer 对象后放置这些

```
mediaPlayer.reset();
mediaPlayer.release(); 
```

# android - OpenCV-Android 演示崩溃

> ID：11400643
> 
> 赞同：0
> 
> 时间：2012-07-09T18:09:46.660
> 
> 标签：android, opencv

我想用 OpenCV-Android 2.4.2 为 Android 开发一个图片识别应用程序。

我在我的手机（LG P500“擎天柱”）上使用 Android 4.0.4，但演示应用程序崩溃而没有错误。它只留下一个黑屏...

问题是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:34:55.027

看来您遇到[了这个错误](http://code.opencv.org/issues/1244)。它将在[2.5.0 版本](http://code.opencv.org/projects/opencv/issues?query_id=21)中修复。

您可以等待官方修复或使用此问题的非官方修复 - 请参阅[此讨论](https://groups.google.com/forum/?fromgroups#!topic/android-opencv/-Gr-cZpeB3s)。它帮助了我（我的设备是摩托罗拉 Defy）。

# c# - 列表框和要显示的项目的控制

> ID：11400651
> 
> 赞同：0
> 
> 时间：2012-07-09T18:10:16.243
> 
> 标签：c#, wpf, listbox

我告诉他们我尝试了什么。我有一个由属性 MVVM 模式 ObservableCollection<> 绑定的列表框，您可以在其中获得所有项目，大约 50 个元素。

他将列表框的尺寸设置为仅显示前 10 个项目，而我现在要做的是使用下一步按钮显示以下 10 个项目，所有这些都不使用列表框的滚动条。

我需要两个按钮，next 和 back，它将展示 10 到 10 的项目。

怎么做？。

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:13:23.917

silverlight 工具包包含一个分页控件。这听起来你需要什么。

# spring - SpringMVC getter setter 最佳实践

> ID：11400654
> 
> 赞同：0
> 
> 时间：2012-07-09T18:10:28.970
> 
> 标签：spring, spring-mvc

我有以下代码，我只是在使用 SpringMVC 的 PoC 上做...

```
@RequestMapping(value = "/getUser", method = RequestMethod.GET)
@ResponseBody
public User data(Locale locale, Model model, User user) {
    logger.info("getUser controller loaded...");
    return userService.getById(user.getId());

}

@RequestMapping(value = "/setUser", method = RequestMethod.GET)
@ResponseBody
public void data(Locale locale, Model model, User user) {
    logger.info("setUser controller loaded...");
    userService.addUser(user);
} 
```

如您所见，这会产生一个问题，因为两个方法签名相同。将这些拆分的最佳方法是什么，因为注释似乎是派生功能而不是方法名称。方法名称可以是任何东西吗？SpringMVC 中执行 setter 和 getter 控制器的最佳实践方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:26:51.510

不是真正的最佳实践，但这是我使用过的：

获取的方法名称 - `list`（对于列表）或`show`（对于项目）

集合的方法名称 -`update`或`create`基于您是更新项目还是创建新项目

方法名称可以是任何东西，它是`@RequestMapping`确保调用正确方法的注释，尽管拥有基于 REST 的映射方法被认为是一种好习惯 - 考虑说像用户这样的域，RESTFUL 控制器看起来像这样：

```
@RequestMapping("/users")
@Controller
public class UserController{

    @RequestMapping(produces="text/html")
    public String list(){

    }

    @RequestMapping(value="/{id}", produces="text/html")
    public String show(){

    }

    @RequestMapping(method=RequestMethod.POST, produces="text/html")
    public String create(@Valid User user, BindingResult bindingResult, Model model){

    }

    @RequestMapping(method=RequestMethod.PUT, produces="text/html")
    public String update(@Valid User user, BindingResult bindingResult, Model model){

    }

    @RequestMapping(value="/{id}", method=RequestMethod.DELETE, produces="text/html")
    public String delete(...){
    }

 } 
```

# jsp - JSP 片段如何将其依赖项包含到父级的 head 标记中？

> ID：11400655
> 
> 赞同：3
> 
> 时间：2012-07-09T18:10:31.637
> 
> 标签：jsp, include, fragment

我有一个名为 header.jsp 的 JSP 文件，它看起来像这样。

```
<%@ taglib prefix="c" uri="/c" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<!DOCTYPE html>
<html>
<head>
...
</head>
<body> 
```

然后我有一个看起来像这样的内容片段。

```
<jsp:include page="../header.jsp" />
My Page Content Here. 
```

如果该内容片段具有某些依赖项，例如 CSS 和 Javascript 包含必须进入 head 标签内，我如何将它们包含在其中？每个片段可能有自己的一组不同的 CSS 和 Javascript 文件，我不想将我可能使用的每个可能的 CSS 和 Javascript 文件都包含在每个页面的标题中。处理这个问题的正确方法是什么？我是一家初创公司的愚蠢实习生，所以请原谅我的无知。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:23:33.380

It's easy, you can do the following by using `<jsp:invoke />` tag instead of the `<include />` tag. It's new for jsp 2.0 and allows you to take some fragments from one page to another, making very easy the task of building templates. You can check a tutorial [here](https://stackoverflow.com/questions/1296235/jsp-tricks-to-make-templating-easier).

And this is the way to solve your problem: Create a tag folder and put this in it.

template.tag

```
<%@tag description="Main template of the page" pageEncoding="UTF-8" trimDirectiveWhitespaces="true" %>

<%@attribute name="header" fragment="true" required="false" %>
<html>
    <head>
        ...some css and javasctipt used on all the pages...
        <!-- Custom css and javascript for one page -->
        <jsp:invoke fragment="header"/>
    </head>
    <body>
        <jsp:doBody />
    </body>
</html> 
```

Use the previous template on your page by including the tag folder:

useOfTemplate.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8" %>

<%@taglib prefix="custom" tagdir="/WEB-INF/tags" %>

<custom:template>
    <jsp:attribute name="header">
        ...Here you can include your custom css and javascript for this page...
    </jsp:attribute>
    <jsp:body>
        ...here comes the info of the page...
    </jsp:body>
</custom:template> 
```

# javascript - angularjs ui tinymce 集成问题

> ID：11400659
> 
> 赞同：2
> 
> 时间：2012-07-09T18:10:45.843
> 
> 标签：javascript, debugging, angularjs

我在应用程序中集成[AngularJS UI tinymce](http://angular-ui.github.com/#directives-tinymce)时遇到问题，但是它在 jsbin 演示中运行良好：

[http://jsbin.com/itevos/2](http://jsbin.com/itevos/2)

但是在应用程序中，当我加载应用程序时收到此错误：

```
Uncaught TypeError: Cannot read property 'form' of null 
```

引用 tiny_mce_jquery_src.js:11955 的行号为：

```
var n = t.getElement().form; 
```

在应用程序中，我检查了所有 js/css 文件是否加载正常。这就是我所拥有的：

```
var app_htmleditor_module = angular.module('app_htmleditor', ['ui', 'components']).
    config(['$routeProvider', function($routeProvider) {
        $routeProvider.
            when('/', {
                templateUrl: getBaseURL() + 'public/tpl/app/htmleditor.htm',
                controller: HtmlEditorCtrl,
                reloadOnSearch:false
            }).
            otherwise( {redirectTo: '/'});
    }
]); 
```

和文本区域：

```
<textarea ui-tinymce ng-model="tinymce" id="{{fileUploaderID}}_html_tab" name="{{fileUploaderID}}_html_tab"></textarea> 
```

我尝试用`form`标签包装 textarea 但仍然收到相同的错误。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:00:54.137

@Dev555 这个指令有问题，但我知道我们最近更新了。如果还有问题，请告诉我们。顺便说一句，angular-ui 处于早期阶段，情况变化很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:21:03.217

我已经复制了你的代码并且工作正常，我唯一的区别是我只依赖于 ui

```
angular.module('amiguiAdmin', ['amiguiAdmin.directives', 'ui']) 
```

并且页面中也没有表单标签。

我希望这能帮到您。

问候

# sql - SQL server 2008 默认用户名

> ID：11400664
> 
> 赞同：2
> 
> 时间：2012-07-09T18:11:15.770
> 
> 标签：sql, database, sql-server-2008

我刚刚安装了一个新`Microsoft Visual Studio - 2010`的，这个工作室`SQL server`也

安装并在安装时我添加了密码，但我没有添加用户名。

所以我想知道 SQL Server 2008 使用的默认用户名是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:14:49.640

SQL Server 身份验证的默认用户是`sa`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:12:20.697

默认用户名是`sa`.

可以将其想象为`Administrator`Windows 上的`root`帐户或 UNIX 框上的帐户。使用它来创建另一个您将用于常规任务的管理员帐户，然后禁用它或为其设置一个非常长的密码并仅在必要时使用它。

# ms-access - 将日期数据作为文本导入 - 用于访问的制表符分隔符

> ID：11400666
> 
> 赞同：0
> 
> 时间：2012-07-09T18:11:18.717
> 
> 标签：ms-access, casting, import, csv

我有一个来自外部程序的制表符分隔的输出。其中一个字段是（不可协商的）是#/#，即 1/1、1/2、3/5 等（代表二分之一、五分之三等）。

Access 错误地将其解释为日期，需要将其解释为文本。如果我告诉访问将其存储为日期（查看表中的字段类型），它仍然无法正确导入。

如何在导入阶段告诉访问“将此字段解释为 TEXT”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:23:22.453

假设您使用的是导入向导，您应该能够为源文件中的每个字段指定数据类型。如果它是一个文本文件，您甚至可以为该文件创建一个“导入规范”，在其中指明要导入的字段及其数据类型。如果这将是您将来需要使用的文件格式，则可以保存导入规范以供将来使用。如果您使用 Docmd.TransferText 方法，您也可以通过 VBA 使用导入规范。

# php - 在 Drive SDK 上按文件夹获取文件列表

> ID：11400669
> 
> 赞同：17
> 
> 时间：2012-07-09T18:11:34.647
> 
> 标签：php, google-drive-api

我正在尝试构建一个 Web UI，供用户导航他/她的 Google Drive 并选择一个或多个文档，以便稍后在数据库中的网站中引用。我目前正在使用 PHP 构建 Web 界面。

我面临的问题是我找不到一个函数来按文件夹 ID 获取文件列表。

我尝试使用：

```
$service->children->listChildren($rootFolderId) 
```

…但这只会给出文件夹中文件的文件引用ID（所谓的子资源项），这意味着我必须遍历这些文件并为每个文件创建一个调用以获取所有元数据我需要我的用户界面。

很遗憾..

```
$service->files->list() 
```

..将列出我所有的文件，没有按文件夹过滤选项。

我想知道是否有一种有效的方法可以从对 Drive 服务器的一次调用中提取文件夹文件列表。我实际上记得能够通过旧的 Google DOC API 执行此任务。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-11T21:32:50.497

**注意这个答案使用 v2 API。新应用程序应写入 v3 API。**

现在[可以](https://developers.google.com/drive/release-notes#searching_for_child_folders_by_parent_id)使用 drive.files.list 端点列出属于特定文件夹的文件。

为此，您可以使用`?q=`查询参数，如下所示：

```
GET https://www.googleapis.com/drive/v2/files?q="'<FOLDER_ID>' in parents" 
```

在 PHP 中，这将是

```
$service->files->list(array('q' => "'<FOLDER_ID>' in parents")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T22:45:02.617

查询参数是否会   `<FOLDER_ID> in parents`   列出父级中具有此类 <FOLDER_ID> 的***文件和/或文件夹？***
在我看来，- 这是预期的结果。我问这个问题是因为，在上面的答案中，有人写道：

> ...列出属于特定文件夹的文件**。**

[关于搜索参数](https://developers.google.com/drive/search-parameters)的文档解释说：

> 这将查找ID 为 1234567 的父文件夹的所有子**文件夹。**

我将补充一点，可以通过向
`and mimeType='application/vnd.google-apps.folder'`
查询字符串添加类似内容来返回仅文件夹列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T09:15:08.553

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-03T10:18:59.393

现在很容易，不用担心。如果您想从特定文件夹中获取所有文件和文件夹，那么只需将此代码复制并粘贴到您的项目中，它将从特定文件夹中检索所有文件和文件夹。注意：您应该有自己的文件夹 ID

```
 List<File> result = new ArrayList<File>();
    Files.List request = null;

    try {
          request = mService.files().list();//plz replace your FOLDER ID in below line
          FileList files = request.setQ("'"+MyFoler_Id+"' in parents and trashed=false"").execute();
          result.addAll(files.getItems());          
          request.setPageToken(files.getNextPageToken());
        } 
      catch (IOException e)
      {
        System.out.println("An error occurred: " + e);
        request.setPageToken(null);
      } 
```

> **//打印出我们检索到的文件和文件夹标题。**

```
 for(File f:result)
  {
      System.out.println("My recvd data "+f.getTitle());
  } 
```

# jquery - 带有可点击框和过滤菜单的 jQuery Isotope

> ID：11400671
> 
> 赞同：1
> 
> 时间：2012-07-09T18:11:48.953
> 
> 标签：jquery, jquery-isotope

使用 jQuery [Isotope](http://isotope.metafizzy.co/)，我真的很想拥有一个名为[Centered Masonry](http://isotope.metafizzy.co/custom-layout-modes/centered-masonry.html)的演示页面上的系统，但是该页面的代码对于我来说有点复杂。但是，我在[提琴手](http://jsfiddle.net/desandro/S5vAG/2/light/)上找到了一些接近我所追求的东西，但它没有像 CM 演示页面上那样包含菜单/过滤器，有什么办法可以添加一个吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:58:02.233

万一其他人正在寻找答案，我发现[了这个](http://jsfiddle.net/jQVAg/4/)并且非常接近。

# qt - 如何从 QItemSelection 中删除索引或范围

> ID：11400674
> 
> 赞同：1
> 
> 时间：2012-07-09T18:11:58.347
> 
> 标签：qt, selection

我一直找不到像 QItemSelection.remove() 或 QItemSelection.deselect() 这样的东西。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:12:43.853

到目前为止，我发现这样做的最好方法是使用带有合并集的第二个选择来取消选择：

```
deselection = QItemSelection(curr_index, curr_index)  # Can I coin deselection? ;)
selection.merge(deselection, QItemSelectionModel.Deselect) 
```

# python - 如何判断是否安装了rosetta？

> ID：11400677
> 
> 赞同：4
> 
> 时间：2012-07-09T18:12:02.740
> 
> 标签：python, macos, operating-system, rosetta

我正在开发一个依赖于`rosetta`安装的 Python 脚本。Rosetta 是适用于 Mac OS X 的动态二进制转换器，它允许许多 PowerPC 应用程序无需修改即可在某些基于 Intel 的 Macintosh 计算机上运行。无论如何要检查操作系统以查看是否`rosetta`存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:21:38.157

*还没有安装 Rosetta，但如果我没记错的话，如果你只输入translate*（rosetta 命令行），它会给出某种使用屏幕。如果是这样，这样的事情应该可以工作。

```
if os.system("/usr/libexec/oah/translate > /dev/null 2>&1"):
  print "Not installed"
else:
  print "Installed" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:06:08.743

如果您真的只是想检查是否有可能运行具有 PPC 依赖性的东西，您可以松散地检查正在运行的 CPU 类型是 PPC 或正在运行的 OS X 版本 >= 10.4 和 < 10.7，因为这些是 OS X 版本在支持 Rosetta 的情况下，至少在 10.6 上，OS X 将在需要时自动提示用户安装 Rosetta（如果尚未安装）。请注意，Darwin 内核版本与 OS X 版本号不同，即 10.4 -> Darwin 8、10.5 -> 9 等：

```
>>> import os
>>> os.uname()
('Darwin', 'kitt.local', '11.4.0', 'Darwin Kernel Version 11.4.0: Mon Apr  9 19:32:15 PDT 2012; root:xnu-1699.26.8~1/RELEASE_X86_64', 'x86_64')
>>> un = os.uname()
>>> darwin_major_version = int(os.uname()[2].split('.')[0])
>>> cputype = un[4]
>>> can_run_ppc = cputype.startswith('ppc') or (darwin_major_version > 7 and darwin_major_version < 11)
>>> can_run_ppc
False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:17:47.227

没有官方的方法可以得到这个。

Rosetta 通过一个名为 /usr/libexec/oah/translate 的程序工作。正式地，这是一个可能会更改的实现细节，因此不应依赖。然而，我们知道它直到 10.7 才发生变化，当时罗塞塔被完全杀死，所以尽管有警告，但它是安全的。Maria Zverina 的答案适用于此（如果您添加路径），它可能是最简单的。或者，也许只是检查是否存在这样的文件而不是运行它。

或者，Rosetta 配备了 Intel 10.4-10.6（早期版本的操作系统仅支持 PPC，没有 Intel）。同样，正式地，您永远不应该依赖操作系统版本，而是使用适当的 API 来检查功能。但在这种情况下，似乎没有任何合适的 API，所以也许这是合适的。除了您不必使用 10.6 安装 Rosetta，因此这不会检测到关闭该复选框的用户。如果你想这样做：

```
import platform
release, versioninfo, machine = platform.mac_ver()
versionbits = [int(bit) for bit in release.split('.')]
rosetta = (versionbits < (10,7) and not machine.startswith('ppc')) 
```

（请注意，这也是“不好的”，因为在某些版本中，platform.mac_ver() 做了一些你不应该做的 hacky 事情——获取 OS X 版本位的正确方法是调用 Gestalt。但是 mac_ver()是标准库的一部分，所以至少你可以依靠它来尽可能好地做一些hacky的东西，并且它正在被广泛测试。）

If you're not actually after Rosetta, but whether you can run PPC either natively or via Rosetta, that's even simpler. All pre-10.7 versions that don't come with Rosetta are PPC; all 10.7+ versions can't run PPC period. So, just "release < '10.7'" does it. (Again, with the caveat that 10.6 can optionally skip Rosetta install.)

# oracle - 用于 Oracle TNS 条目的漂亮打印机？

> ID：11400681
> 
> 赞同：0
> 
> 时间：2012-07-09T18:12:04.560
> 
> 标签：oracle, pretty-print, tns

我有一些 TNS 条目被格式化为单个长行。有什么漂亮的打印机可用吗？这是我目前所拥有的一个例子。

```
(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = trac403-vip.pixar.com)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = tmpltest) (INSTANCE_NAME = tmpltest3))) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T09:22:14.450

干得好 ：）

```
(DESCRIPTION = 
  (ADDRESS = 
    (PROTOCOL = TCP)
    (HOST = trac403-vip.pixar.com)(PORT = 1521)
  ) 
  (CONNECT_DATA = 
    (SERVER = DEDICATED) 
    (SERVICE_NAME = tmpltest) 
    (INSTANCE_NAME = tmpltest3)
  )
) 
```

# mysql - 对来自两个单独表的 CONCATed 列使用 LIKE

> ID：11400690
> 
> 赞同：0
> 
> 时间：2012-07-09T18:12:35.377
> 
> 标签：mysql

我有这两个表，我希望能够使用 LIKE 将 brand.NAME 和 product.NAME 作为一个字符串进行搜索。我将 CONCAT 与 JOINS 结合使用并没有成功，所以这超出了我的工资等级。

这甚至可能吗？

**通缉行为**

在搜索“NIKE sh”时

结果：

```
NIKE Shoes
NIKE shirts 
```

**产品**

```
ID   | NAME   | brandID |
1    | Shoes  | 1       |
2    | pants  | 2       | 
3    | shorts | 3       |
4    | shirts | 1       | 
5    | socks  | 2       | 
```

**品牌**

```
ID   | NAME    |
1    | NIKE    |
2    | Adidas  |
3    | Hummel  | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:18:37.370

```
.. where Product.name like '%pattern%' or Brand.name like '%pattern%' 
```

那样有用吗？

话虽如此，OR 很昂贵，所以以野生字符开头的模式搜索也是如此。两者都会花费你不少钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:19:44.493

您必须加入这两个表，然后运行 ​​LIKE。一个警告：如果你做一个直接的 CONCAT，“Nike Shoes”永远不会匹配，因为你将拥有的是“NikeShoes”。

SELECT ... FROM Product JOIN Brand ON (Product.BrandId = Brand.Id) WHERE CONCAT(Product.name, ' ', Brand.name) LIKE '%ike Sho%';

编辑：也就是说，我同意其他海报 - 分别查看品牌和产品会更有优势。除非您有“类似谷歌”的搜索，用户可以在其中输入他喜欢的任何内容——但在这种情况下，我会尝试修改 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:21:16.143

初稿，瞎猜……

```
SELECT * FROM product
INNER JOIN brand
ON product.brandID = brand.id
WHERE product.name LIKE '%string%'
OR brand.name LIKE '%string%' 
```

**编辑**以匹配问题的变化......

```
SELECT * FROM product
INNER JOIN brand
ON product.brandID = brand.id
WHERE product.name + ' ' + brand.name LIKE '%string%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:22:03.680

```
SELCT * FROM 
(SELECT P.NAME + B.NAME AS product_brand
FROM product AS P
INNER JOIN brand as B
ON
P.brandID = B.ID) SQ
WHERE
SQ.product_brand like '%whatever%' 
```

# scala - 使用 Scala 生成代码

> ID：11400705
> 
> 赞同：13
> 
> 时间：2012-07-09T18:13:09.380
> 
> 标签：scala, code-generation, template-haskell

在 Scala 中使用 SBT 工具链时，是否可以编写一个任务来读取项目源代码的特殊部分以在编译时生成 scala 代码。

关于此的任何想法甚至文章/教程？我正在寻找类似于 Template Haskell 的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T18:49:14.673

[treehugger.scala](http://eed3si9n.com/treehugger/)是一个为代码生成而设计的库。

```
import treehugger.forest._
import definitions._
import treehuggerDSL._

val tree: Tree = Predef_println APPLY LIT("Hello, world!")

println(tree)
println(treeToString(tree)) 
```

上面的代码打印了两行：

```
Apply(Ident(println),List(Literal(Constant(Hello, world!))))
println("Hello, world!") 
```

treehugger 确实生成了一个 AST，但不符合 scalac 的 AST。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T18:17:34.543

Scala 2.10 对类似于复杂的编译时代码生成的宏具有实验性支持。有关更多详细信息，请参见[此处](http://scalamacros.org/documentation/gettingstarted.html)。

[Jason Zaugg 的macrocosm](https://github.com/retronym/macrocosm) git 存储库中有一些有趣的示例，以及[SLICK](https://github.com/slick)库，它是 ScalaQuery SQL DSL 的演变，使类型安全的数据库（和集合）查询能够以类似 LINQ 的方式表达。

而这个例子，来自[expecty](https://github.com/pniederw/expecty)断言库：

```
import org.expecty.Expecty

case class Person(name: String = "Fred", age: Int = 42) {
  def say(words: String*) = words.mkString(" ")
}

val person = Person()
val expect = new Expecty()

...
val word1 = "ping"
val word2 = "pong"

expect {
  person.say(word1, word2) == "pong pong"
} 
```

产量：

```
java.lang.AssertionError:

person.say(word1, word2) == "pong pong"
|      |   |      |      |
|      |   ping   pong   false
|      ping pong
Person(Fred,42) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-08T17:55:48.603

我最近做了一些研究。几乎有3个选项可用：

1.  字符串模板。
2.  环境保护狂
3.  Scala 宏

更多细节在这里：http: [//yefremov.net/blog/scala-code-generation/](http://yefremov.net/blog/scala-code-generation/)

# java - 如何在java中读取ico格式的图片？

> ID：11400707
> 
> 赞同：8
> 
> 时间：2012-07-09T18:13:15.713
> 
> 标签：java, image, ico

我有很多 .ico 格式的图片，我想在我的 Java SE 项目中使用它们，但它不知道格式。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T18:19:07.973

试用[image4j - Java 图像库](http://image4j.sourceforge.net/)

> image4j 库允许您在 100% 纯 Java 中读取和写入某些图像格式。
> 
> 目前支持以下格式：
> 
> *   BMP（Microsoft 位图格式 - 未压缩；1、4、8、24 和 32 位）
> *   ICO（Microsoft 图标格式 - 1、4、8、24 和 32 位 [XP 未压缩，Vista 压缩]）

使用该库，您可以轻松解码您的 ico 文件

```
List<BufferedImage> image = ICODecoder.read(new File("input.ico")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-02T15:16:59.267

[Apache Commons Imaging](https://commons.apache.org/proper/commons-imaging/)允许读写 ICO 文件：

```
 List<BufferedImage> images = Imaging.getAllBufferedImages(new File("input.ico")); 
```

它也支持几种流行的元数据格式（EXIF、IPTC 和 XMP）。

[TwelveMonkeys ImageIO](http://haraldk.github.io/TwelveMonkeys/)允许扩展 ImageIO API 以支持 ICO 和许多其他图像文件格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-24T06:27:40.747

使用 Apache Commons Imaging 1.0-alpha2 读取 ico 文件的提示：

将 ico 文件作为文件读取和将 ico 文件作为 byte[] 读取之间似乎存在差异：`Imaging.getAllBufferedImages(File)`读取 ico 文件，`Imaging.getAllBufferedImages(new ByteArrayInputStream(byte[] icoFileContent, yourIcoFilename)`也读取 ico 文件。`Imaging.getAllBufferedImages(byte[])`不读取相同的 ico 文件，但会抛出`ImageReadException`. 请参阅下面的代码。

```
 File icoFile = new File("bluedot.ico");

    // Works fine
    List<BufferedImage> images = Imaging.getAllBufferedImages(icoFile);
    Assert.assertFalse(images.isEmpty());
    ImageIO.write(images.get(0), "png", new File("bluedot.png"));

    // Also works fine
    byte[] icoFileContent = Files.readAllBytes(icoFile.toPath());
    images = Imaging.getAllBufferedImages(new ByteArrayInputStream(icoFileContent), "bluedot.ico");
    Assert.assertFalse(images.isEmpty());
    ImageIO.write(images.get(0), "png", new File("bluedot2.png"));

    // Throws an exception
    images = Imaging.getAllBufferedImages(icoFileContent); 
```

此外，这里是我如何创建 Apache Commons Imaging 1.0-alpha2 无法读取的 .ico 文件的指南`byte[]`（但可读取为`File`且可读取为`ByteArrayInputStream`）：

*   启动 GIMP（在我的例子中是 2.10.22 版）
*   窗口菜单“文件”>“新建...”
*   模板：[空]
*   宽度：48 像素
*   高度：48px
*   其余部分保持原样（见下面的截图）
*   画一些东西（例如一个蓝点）
*   窗口菜单“文件”>“导出为...”
*   文件名：“bluedot.ico”
*   图标详细信息：“4 bpp，1 位 alpha，16 槽调色板”
*   压缩 (PNG)：未选中
*   点击“导出”
*   `Imaging.getAllBufferedImages(byte[])`会抛出`org.apache.commons.imaging.ImageReadException: Can't parse this format.`
*   `Imaging.getAllBufferedImages(File)`将读取此文件。

[![用于创建 ico 文件的对话框](../Images/6281dcf3710664ef34c6cc2fab8e1b6e.png)](https://i.stack.imgur.com/cP91G.png)

# scheme - 如何找到加到 1.0 的最小正数会得到更大的值？

> ID：11400712
> 
> 赞同：7
> 
> 时间：2012-07-09T18:13:28.147
> 
> 标签：scheme, racket, numerical

在将一些 Fortran 翻译成 Scheme/Racket 时，我遇到了这个函数：

```
; EPSILON(X)      The  least  positive  number  that added
;                 to 1 returns a number that is greater than 1 
```

如何在 Scheme 中找到号码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T19:12:20.703

```
#lang racket/base

;; http://en.wikipedia.org/wiki/Machine_epsilon
;; approximates the machine epsilon

(require racket/flonum)

(define (compute-machine-epsilon)
  (let loop ([n 1.0])
    (define next-n (fl/ n 2.0))
    (if (fl= 1.0 (fl+ 1.0 next-n))
        n
        (loop next-n)))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T18:25:02.280

假设您使用的是 IEEE-754 浮点（在 Scheme 中可能不是这种情况，我不知道），那么[机器 epsilon](http://en.wikipedia.org/wiki/Machine_epsilon)是众所周知的：对于双精度算术，它是`1.11e-16`.

对于其他平台或浮点实现，维基百科显示了计算它的公式（在 Haskell 中）：

```
main = print . last . map (subtract 1) . takeWhile (/= 1) . map (+ 1) . iterate (/2) $ 1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T21:29:15.373

这不是一个新的答案——丹尼的代码让我觉得很难做这种事情……它可以简化为

```
(let loop ([n 1.0])
  (if (= 1 (+ 1 (/ n 2)))
    n
    (loop (/ n 2)))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-13T19:15:53.730

现有的答案是不必要的复杂，并可能导致不可移植的代码。

正确的答案是，如 Racket 的[math/flonum 包](https://docs.racket-lang.org/math/flonum.html)中所述，使用 epsilon.0 值，这对于当前机器是正确的，并且不需要您手动计算：

```
 (require math/flonum)  
 epsilon.0 
```

# grails - Grails 中 object.get() 与 object.read() 的优势

> ID：11400716
> 
> 赞同：26
> 
> 时间：2012-07-09T18:13:51.257
> 
> 标签：grails, grails-orm, read-write

我浏览了一些 Grails 文档，发现[了](http://grails.org/doc/latest/ref/Domain%20Classes/read.html)一些关于`read()`Grails 中的方法的信息。如果我理解正确，您可以从数据库中提取对象的“只读”版本，该版本仅在显式`save()`调用时保存。在我看来，`read()`只要您有一个您不希望更改的对象，您就应该使用调用。

但是你为什么不总是使用一个`read()`电话呢？由于无论如何该对象将被更改为读/写权限`save()`，因此仅读取对象而不是获取它不是更安全吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T19:46:34.990

你可能是对的 - 在大多数情况下它是等价的。但是 Hibernate 不需要您调用，`save()`因为它在刷新期间会进行脏检查，并且由于 Grails 使用“Open Session in View”拦截器，因此在每个请求结束时总会有刷新。这让那些在通过该实例检索的实例中进行更改的人感到惊讶，`get()`这意味着在呈现视图时只是临时的，但随后这些更改无论如何都会在没有`save()`调用的情况下持续存在。`read()`在那种情况下会更有意义。

一种性能优化是使用[http://grails.org/doc/latest/ref/Database%20Mapping/dynamicUpdate.html](http://grails.org/doc/latest/ref/Database%20Mapping/dynamicUpdate.html)仅将更改的字段推送到数据库。默认是推送所有字段，无论它们是否已更改，此后无需为每次更新生成新的 SQL。如果您`read()`的实例 Hibernate 不保留原始数据，则无法进行动态更新，因为无法知道哪些字段是脏的。

# jquery - CSS继承问题。请帮助CSS。

> ID：11400719
> 
> 赞同：2
> 
> 时间：2012-07-09T18:14:10.970
> 
> 标签：jquery, css, inheritance

我正在尝试将弹出菜单添加到来自[http://vtimbuc.net/](http://vtimbuc.net/)的现有手风琴菜单。代码在 JSFidle 上，有人可以告诉我如何在 a 标签下方设置边框（退出 > 冻结帐户 > 子 1 ）以及悬停时弹出菜单的不同背景（我的文件 > Skydrive > 子产品 1 .. ..)

我仍然是 CSS 的新手，我尝试了一些东西但没有任何运气，我认为这是因为我不熟悉的 CSS 继承

[http://jsfiddle.net/QhAu5/14/](http://jsfiddle.net/QhAu5/14/)

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:30:32.790

将颜色更改为您想要的任何颜色。

用于边框底部

```
ul.sub-menu li.sub_nav2 ul li a {
    border-bottom: 1px solid #000;
} 
```

对于背景颜色

```
ul.sub-menu li.sub_nav2 ul li a:hover {
    background-color: #f00;
} 
```

[http://jsfiddle.net/QhAu5/16/](http://jsfiddle.net/QhAu5/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:25:09.590

在“a”标签下方添加边框：

```
.sub_nav2 li {
    border-bottom:1px 'solid your color here';
} 
```

要更改弹出背景颜色：

```
.sub_nav2 li a:hover {
    background: 'your color here';
} 
```

# graph - 图表数据库朋友，喜欢，事件

> ID：11400720
> 
> 赞同：1
> 
> 时间：2012-07-09T18:14:11.607
> 
> 标签：graph, neo4j

我在一个社交网站上工作，对图形数据库非常陌生。我了解如何仅与朋友一起实现图形数据库。但是，诸如“喜欢”和“事件”之类的对象在图表上的什么位置适合，或者它们完全适合？我希望不仅可以查询朋友，还可以根据朋友的喜欢等对事件进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:05:48.433

对于 Neo4j 中的一些建模示例，请查看[http://docs.neo4j.org/chunked/snapshot/cypher-cookbook-path-tree.html](http://docs.neo4j.org/chunked/snapshot/cypher-cookbook-path-tree.html)以获得可以与事件的自定义类别相结合的时间索引结构，更一般地，域建模示例位于[http://docs.neo4j.org/chunked/snapshot/data-modeling-examples.html](http://docs.neo4j.org/chunked/snapshot/data-modeling-examples.html)。

此外，关于事件流，Rene Pickhardt 对 Graphity 进行了一些出色的研究，[http://www.rene-pickhardt.de/graphity-an-efficient-graph-model-for-retrieving-the-top-k-社交网络中用户的新闻提要/](http://www.rene-pickhardt.de/graphity-an-efficient-graph-model-for-retrieving-the-top-k-news-feeds-for-users-in-social-networks/)

# linux - 提示用户消息并读取输入，同时将其保存到日志文件

> ID：11400726
> 
> 赞同：0
> 
> 时间：2012-07-09T18:14:40.680
> 
> 标签：linux, bash, shell, input

我有需要执行以下操作的 shell 脚本： 1) shell 脚本需要将日志存储到日志文件中。2) shell 脚本需要提示用户消息并读取输入。

例子：

```
cat read-test.sh
echo -n "What is your name?"
read user_name 
```

执行此脚本：

```
./read-test.sh >> read-test.log 
```

预期用户提示：

```
What is your name?
rajiv 
```

当我执行这个脚本时

> ./read-test.sh

我得到了想要的输出。

但是当我执行这个脚本时

> ./read-test.sh >> 读取-test.sh

“你叫什么名字？” 保存到我不想的 read-test.log 文件中。

有什么方法可以向用户显示消息（“你叫什么名字？”）并读取输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:10:22.213

使用`-p`选项 with `read`，它会打印标准错误提示，让您完全摆脱该`echo`语句。

```
read -p "What is your name? " user_name 
```

由于提示写入标准错误，因此操作员不会将其包含在`read-test.log`其中`>>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:18:49.873

最佳答案取决于您为什么要这样重定向，但一种可能的快速解决方案是`echo`像这样更改您的行：

```
echo -n "What is your name?" > /dev/tty 
```

# c++ - 删除链接器依赖项

> ID：11400731
> 
> 赞同：1
> 
> 时间：2012-07-09T18:14:54.980
> 
> 标签：c++, c, linux, linker, g++

我正在使用 g++ 在 linux 上开发一个 c++ 应用程序。我的应用程序链接在一个共享库中，该库公开了我需要的简单 API。这个库在内部引用了大量额外的共享库。我必须找到每一个并将它们添加到我的 Makefile 以将它们链接起来。

我假设我的应用程序必须链接到主库所依赖的任何库。解决此链接要求的唯一方法是在其所有依赖项的静态库中编译主库吗？这是否适用于通过 dlopen/dlsym 使用插件模型？

泰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:16:27.583

> 解决此链接要求的唯一方法是在其所有依赖项的静态库中编译主库吗？

不可以。共享库本身可以链接到它所依赖的共享库。大多数链接器也会选择这些库，并将您的可执行文件链接到这些库，而无需您在链接器阶段提及它们。

在您的情况下，听起来共享库没有链接到它所需的库。[ldd](http://en.wikipedia.org/wiki/Ldd_%28Unix%29)工具在这方面很有用。

例如，假设您生成了这个共享库：

```
gcc -shared foo.o -o libfoo.so -lm 
```

现在`libfoo.so`链接到数学库（libm）。任何链接到 libfoo.so 的应用程序也将链接到 libm，即你只需要这样做

```
gcc -o prog main.o -lfoo 
```

另一方面，如果共享库未链接到 lib，但仅使用

```
 gcc -shared foo.o  -o libfoo.so 
```

链接应用程序时，您必须显式链接到 libm：

```
gcc -o prog main.o -lfoo -lm 
```

当您 dlopen() 共享库时，运行时链接器将加载共享库也链接到的所有库 - 除非它们已经加载。所以 - 如果你的 dlopen() 库没有链接到它所依赖的库，并且你的可执行文件也没有链接到这些库，dlopen() 将失败（除非你指定 RTLD_LAZY，在这种情况下事情稍后会失败）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:20:41.890

> 我假设我的应用程序必须链接到主库所依赖的任何库。

听起来好像您的应用程序正在直接使用这些符号（不仅仅是通过 API 共享库间接使用） ，*或者*共享库没有正确链接，因此它没有链接到它所依赖的库。如果在创建该共享库时，它的依赖项被链接到，`-l`那么在将您的应用程序链接到 API 库时，它将导致它们被自动链接到。

> 解决此链接要求的唯一方法是在其所有依赖项的静态库中编译主库吗？

这是一种方式，但不是唯一的方式。

> 这是否适用于通过 dlopen/dlsym 使用插件模型？

**只要插件正确链接到它们所依赖的库......**不，在这种情况下，链接器不可能知道您`dlopen`在运行时将使用哪些库，因此无法知道它们的依赖关系是什么，所以您不要不需要在链接时命名它们。如果事先不知道所有可能被加载的插件，这是不可能的。

如果插件库没有正确链接，您在尝试使用`dlopen`它们时会遇到同样的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T19:09:48.477

> 我假设我的应用程序必须链接到主库所依赖的任何库。解决此链接要求的唯一方法是在其所有依赖项的静态库中编译主库吗？

当然。没有办法解决：静态链接，或者在库运行时搜索路径中有库（正确的版本，如果不兼容 ABI）。

> 这是否适用于通过 dlopen/dlsym 使用插件模型？

不，为此，您需要在要从中加载它的路径中拥有共享库。

# .net - 如何删除或破坏数据结构或记录的实例？

> ID：11400734
> 
> 赞同：1
> 
> 时间：2012-07-09T18:15:15.137
> 
> 标签：.net, data-structures, record, null, delphi-prism

我有一个数据结构如下。

```
TJustCalGroup = record
    SigName,GroupName:string;
    RawMin,RawMax:LongInt;
end; 
```

我创建了一个记录或数据结构的实例，如下所示。

```
var ARecord := new TJustCalGroup; 
```

然后，我想删除该实例或将其标记为未使用。所以，我正在做以下事情。

```
ARecord := Nil; 
```

但是，它不起作用。它不断引发错误，“无法将 nil 分配给 TJustCalGroup。”

那么，那么你如何使它为零或空或释放它的内存呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:57:50.440

delphi prism（或 Oxygene）记录等效于[Struct](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)，结构（或记录）是值类型，并且始终在堆栈上分配（即使您使用 new 运算符），因此您不需要释放内存。

# jquery - 将选择列添加到 Infragistics Jquery IGGrid

> ID：11400735
> 
> 赞同：2
> 
> 时间：2012-07-09T18:15:16.023
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, infragistics, ignite-ui

我想在我的 iggrid 中添加一列，用于显示我的 sqlserver 数据库中的当前用户。正如通常所做的那样，该行将显示为 [ 'username' 'email' 'select' ] 使用 select 链接到另一个显示用户详细信息的 mvc3 视图。我可以很容易地使用表格来做到这一点，但是，我的上级只允许我使用 Infragistics Jquery IGGrid。尽管我进行了研究，但我还是不知所措。任何帮助将不胜感激。我当前的代码如下：

```
@(Html.Infragistics().Loader()
        .ScriptPath(Url.Content("../../Scripts/Infragistics/js/"))
        .CssPath(Url.Content("../../Content/Infragistics/css/"))
        .Theme("infragistics")
        .Render()
    )

    @(Html.Infragistics().Grid(Model.users)
        //.DataSourceUrl("MCMonthlyAcctTotal")
        .ID("grid").Width("auto").Height("500px")
        .LoadOnDemand(false)
        .AutoGenerateColumns(false)
        .Columns(column =>
        {
            column.For(x => x.FirstName).HeaderText("First Name");
            column.For(x => x.LastName).HeaderText("Last Name");
            column.For(x => x.Email).HeaderText("Email");
            column.For(x => x.Injected).HeaderText("Date Created");
            column.For(x => x.UserName).HeaderText("Username");
            column.For(x => x.Modified).HeaderText("Last Date Modified");
        })

        .Features(features =>
        {
            features.Paging().Type(OpType.Local).VisiblePageCount(5).ShowPageSizeDropDown(true).PageSize(10).PrevPageLabelText("Previous").NextPageLabelText("Next");
            features.Sorting().Mode(SortingMode.Single).ColumnSettings(settings =>
            {
                settings.ColumnSetting().ColumnKey("CustomerID").AllowSorting(true);
            });
            features.Selection().MouseDragSelect(true).MultipleSelection(false).Mode(SelectionMode.Row);
        })
         .Width("auto")
         .DataBind()
         .Render()
    ) 
```

我希望有人能帮我一把。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:52:17.770

听起来您正在尝试做一个“主细节”场景，其中一个网格显示用户，另一个显示当前选定用户的用户详细信息。这个对吗？如果是这样，我相信我在我的 SkyDrive 帐户中为您提供了解决方案，网址为[http://skydrive.live.com/redir?resid=E4CF03E23FE33AFE!129](http://skydrive.live.com/redir?resid=E4CF03E23FE33AFE!129)

希望它对你有帮助！

# wcf - 如何在 WCF 多线程中缓存

> ID：11400737
> 
> 赞同：0
> 
> 时间：2012-07-09T18:15:28.347
> 
> 标签：wcf, caching

因此，在我的 WCF 服务中，我将缓存一些数据，以便将来对服务进行的调用可以获得该数据。

WCF 中缓存数据的最佳方式是什么？怎么做呢？如果有帮助，WCF 服务是多线程的（并发模式是多的）并且 ReleaseServiceInstanceOnTransactionComplete 设置为 false。

检索此数据的第一次调用可能不存在，因此它将从某个源（可能是数据库，可能是文件，可能在任何地方）获取数据，但此后它应该缓存它并使其可用（理想情况下，使用过期系统物体）

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:31:19.010

当 SOA 应用程序使用的数据保存在对频繁事务不可扩展的存储中时，它就无法有效扩展。这是分布式缓存真正有用的地方。回到你的问题和 ErnieL 的回答，这里是这些解决方案的简要比较，

就 Memcached 而言，如果您的应用程序需要在一组机器上运行，那么您很可能会从分布式缓存中受益，但是如果您的应用程序只需要在单台机器上运行，那么您将不会受益使用分布式缓存的任何好处，使用内置的 .Net 缓存可能会更好。访问 memcached 缓存需要进程间/网络通信，与进程中的 .Net 缓存相比，这将产生较小的性能损失。Memcached 作为外部进程/服务工作，这意味着您需要在生产环境中安装/运行该服务。同样，.Net 缓存不需要此步骤，因为它们是在进程中托管的。

如果我们比较 NCache 和 Appfabric 的功能，NCache 的人对他们与 AppFabric 比较的功能范围非常有信心。关于这两种产品的比较，你可以在这里找到足够的材料，比如这个......

[http://distributedcaching.blog.com/2011/05/26/ncache-features-that-app-fabric-does-not-have/](http://distributedcaching.blog.com/2011/05/26/ncache-features-that-app-fabric-does-not-have/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:11:12.097

WCF 服务的一些最常见的解决方案似乎是：

*   [Windows AppFabric](http://msdn.microsoft.com/en-us/library/hh334305)
*   [内存缓存](http://memcached.org/)
*   [NCache](http://www.alachisoft.com/ncache/ncache-express.html)

尝试阅读[缓存解决方案](https://stackoverflow.com/questions/3011441/caching-solutions)

# php - 使用 md5 安全更加困难

> ID：11400740
> 
> 赞同：6
> 
> 时间：2012-07-09T18:15:41.147
> 
> 标签：php, hash, passwords

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我看到有人像这样编写密码哈希，

```
md5(uniqid(mt_rand('password', 15), true)); 
```

这是一种安全的方法吗？这甚至解决了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T18:20:51.747

不，这不是一种安全的方式。它是可破解的，在您的示例中，它是不可重复的。您必须将随机值与散列本身一起存储。如果数据库被破坏，那么暴力破解哈希变得非常简单。

您应该知道 MD5 和 SHA1 是 PHP 中可用的两种最弱的散列算法。

更好的是使用[`crypt()`](http://uk.php.net/manual/en/function.crypt.php)函数，with `CRYPT_BLOWFISH`or [PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)。

**更新**

此外，正如 PeeHaa 所提到的，它不起作用。将`mt_rand('password', 15)`导致`Warning: mt_rand() expects parameter 1 to be long, string given on line X`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T18:29:46.437

这不仅不安全，甚至不起作用。

`mt_rand`接受 2 个参数，一个最小值和一个最大值。

```
mt_rand('password', 15) 
```

这将转换`'password'`为 int ( )，然后返回和`0`之间的随机数。`0``15`

```
uniqid(mt_rand('password', 15), true) 
```

然后，这会生成一个唯一的 ID，并将上一步中的随机数添加到它之前：计算如下：

```
144ffb22886d58e1.82100749 
```

该字符串然后是 md5'd。

如您所见，此代码 100% 无用。原始密码被转换`0`并永远丢失，所以你所做的只是散列随机数，这是没有意义的。既然您有了哈希，就无法再次验证它。由于密码已转换，因此用户输入的任何内容都无关紧要。

所以，不，这个代码不安全，不要使用它。

就个人而言，我使用[phpass 库](http://www.openwall.com/phpass/)。它安全且易于使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T18:18:42.493

老实说，我什至不会使用 md5 作为存储密码的散列算法。我会考虑使用类似 bcrypt 的东西。另外我什至不明白你的例子是如何工作的，但无论如何，如果你想保护它，那么至少远离 md5、sha1 并从其他错误中学习并使用盐。

# java - Eclipse 与 Android (Java) 项目的合并问题

> ID：11400742
> 
> 赞同：1
> 
> 时间：2012-07-09T18:16:02.687
> 
> 标签：java, android, eclipse, svn

我正在使用 Eclipse + Subversion 进行 Android 开发。我曾经用广告创建我的应用程序的免费版本，而另一个没有广告的应用程序付费，所以我将它们保存在 subversion 的两个单独的分支中。

我发现的问题是，由于它们是 Google Play 和其他市场的两个不同应用程序，它们必须具有不同的包名称。所以我有，例如：

com.package.game com.package.gamefree

当我对游戏的免费版本进行一些更改并希望将它们与 subversion 合并到付费分支时，我发现自己遇到了麻烦，因为免费游戏的源文件在 com/package/gamefree 下，而在 com/ 下付费包/游戏

我最终做了一个“手动”合并，逐个源文件进行源文件的差异，但我还必须检查那些已添加到另一个目录中的文件和那些已被删除的文件。浪费时间。

那么，有什么方法可以让 subversion 知道一个分支中的 com/package/game 与另一个分支中的 com/package/gamefree 是“相同”目录？

非常感谢提前，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:31:15.410

我猜在这里，但也许你可以`trunk`在`com.package.gamefree`包中安装免费应用程序。

在分支上，您可以让另一个导入在主干上开发的一个作为依赖库，并用打包在下面的启动器类包装它`com.package.game`，添加许可证内容......

这样，您只需修改一次代码，并构建 2 个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:01:45.320

在深入谷歌搜索之后，我发现我更好的机会只有两个：

*   以任何方式使用 ANT，可在构建时自动切换免费版本和付费版本。
*   使用在两个版本之间共享的 Android 库项目。

我已经看到大多数使用 ANT 的人前一段时间都在这样做，因为缺少其他选项，但由于 Eclipse/ADT 上有 Android 库项目，因此这是此类事情的首选方式。即使在 Android 的开发文档中，也说：

[http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)

> 如果您正在创建一个同时存在免费和付费版本的应用程序。您将两个版本共有的应用程序部分移动到库项目中。两个依赖项目，具有不同的包名称，将引用库项目并仅提供两个应用程序版本之间的差异。

这对我来说似乎是最好的方法，因为我从未使用过 ANT，并且鉴于库选项，没有理由学习它。

所以我这样做了：我的项目现在被拆分为 MyGameCore，这是一个库项目，其中包含 MyGameFree 和 MyGamePay 项目的所有通用文件，现在只有最小的类需要具有不同的主包名称，因此 Google Play 知道它们是不同的应用程序，加上根据 Google Docs 无法将原始资产文件夹移动到库中。无论如何，这些都是二进制文件，当它们被更改时，我只是将它们从一个版本复制到另一个版本，这种情况并不常见。

所以从现在开始，大部分时间我只需要在 MyGameCore 项目上工作，所做的更改对 MyGameFree 和 MyGamePay 项目都有直接影响，而无需合并分支。

这将为我节省大量时间，并且我将从第一个代码行开始在我的进一步项目中使用它。

# installation - 无法使用 WIX 更新“PATH”环境变量

> ID：11400748
> 
> 赞同：11
> 
> 时间：2012-07-09T18:16:24.743
> 
> 标签：installation, wix, windows-installer, wix3.5

我已使用以下 wix 片段来更新“PATH”环境变量。

```
<DirectoryRef Id="MyDir">
   <Component Id ="setEnviroment" 
                           Guid=" xxxxx">
            <CreateFolder />
             <Environment Id="SET_ENV"
                                       Action="set"                                                                                          
                                         Name="PATH"
                                        Part="last"       
                                       Permanent="no" 
                                        System="yes" 
                         Value="[INSTALLLOCATION]" />
       </Component>
</DirectoryRef>
<Feature Id="Feature3" Title="3Feature"   
             Level="1" 
              Absent="disallow"
               AllowAdvertise="no">
           <ComponentRef Id="setEnviroment"/>
</Feature>
<InstallExecuteSequence>
    <WriteEnvironmentStrings/>
<InstallExecuteSequence/> 
```

这最初是有效的，但现在它不会更新环境变量。详细日志显示此操作的执行并返回值 1。重新启动机器后检查。在操作 FeaturePublish For Feature3 的日志中有垃圾值，但安装成功。请求您的帮助......非常感谢......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T13:18:04.733

我认为您正在使用 INSTALLLOCATION，您的意思是使用 INSTALLDIR。这是一个使用新应用程序的安装目录更新 PATH 环境变量的工作示例。

```
<Environment 
  Id="PATH" 
  Name="PATH" 
  Value="[INSTALLDIR]" 
  Permanent="yes" 
  Part="last" 
  Action="set" 
  System="yes" /> 
```

如果确实打算使用 INSTALLLOCATION 并在其他地方定义它，那么请发布您的其余代码，我们将进一步深入兔子洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-29T13:54:52.307

我需要使用 INSTALLFOLDER 来让它工作。

```
<Environment 
  Id="PATH" 
  Name="PATH" 
  Value="[INSTALLFOLDER]" 
  Permanent="yes" 
  Part="last" 
  Action="set" 
  System="yes" /> 
```

# c# - C# DispatcherHelper.CheckBeginInvokeOnUI 不会在 UnitTest 上运行

> ID：11400749
> 
> 赞同：3
> 
> 时间：2012-07-09T18:16:29.867
> 
> 标签：c#, unit-testing, mvvm, mstest

我在 C# 应用程序中为 mvvm 使用 DispatcherHelper.CheckBeginInvokeOnUI，我正在尝试用它运行 msTests。我从 UnitTest 进行的任何调用在`DispatcherHelper.CheckBeginInvokeOnUI(delegate { //do stuff });` 从单个 UnitTest 调用时都可以正常工作（当然，在调用 DispatcherHelper.Initialize() 之后）。

但是，当单元测试在更大的上下文中运行时会出现问题——如果我为该类运行所有测试（都不需要使用 DispatcherHelper）

在没有初始化 DispatcherHelper 的情况下，当它到达委托调用时，它会抛出一个空异常，正如预期的那样，所以我需要初始化。在 UnitTest 中初始化它有问题吗？我只是无法想象为什么它会在单个单元测试的上下文中工作，但仅此而已。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:47:02.157

编辑：真正的问题似乎是 MsTest 将 UnitTests 同时扔到不同的线程中只是为了让它们快速完成，并且调度程序的“初始化”具有以下代码：

```
Initialize()
{
    if (UIDispatcher != null)
    { return null }
    else // initialize
} 
```

这意味着您只能在不清除它的情况下对其进行一次初始化，并且最终只为该线程进行初始化。然而，由于单元测试都在不同的线程上，您最终会遇到问题，它将传递对 Dispatcher 的任何调用。我正在尝试找到一种“取消初始化”它的内置方法（从而将 UIDispatcher 设置回 null），但正如 Will 建议的那样，简单地编辑代码可能是最好的。

# forms - Dojo 表单提交问题

> ID：11400752
> 
> 赞同：0
> 
> 时间：2012-07-09T18:16:46.257
> 
> 标签：forms, zend-framework, dojo, dijit.form

所以这就是问题所在。我们有一些使用 Zend_Dojo_Form 创建的大型 dojo 表单。问题是验证在每个元素上工作时，对任何提交按钮都不起作用。由于标准布局的不灵活性，我们不得不使用视图脚本。

我以为我的整个工作都很好，直到我需要确保当您使用提交当前页面的快速链接从一个页面转到多页表单的页面时（带有验证）。

我注意到，当我在提交按钮上强制触发 click 事件时，没有发生验证（或者更确切地说，如果存在无效值，则不会阻止表单提交。这些值只是没有提交。）

所以我查看了一些教程，发现表单是通过调用来验证的

```
dijit.byId('form-id').validate(); 
```

或我正在寻找的捷径，主要是（最初）

```
dijit.byId('form-id').submit(); 
```

这两个都不是函数，因为 byId 返回未定义。这意味着我们的视图脚本——或者无论整个过程是什么——用 Zend 生成 dojo 表单无论如何都是部分巫术——实际上并没有生成 dojo 表单 dijit。

那么如何在视图脚本中做到这一点呢？例如，什么样的 php 调用或属性会附加到表单标记以使其被 Dojo 解释为表单 dijit 的基础？

这是视图脚本中的代码：

```
<form action="<?= $this->escape($this->element->getAction()) ?>"
      method="<?= $this->escape($this->element->getMethod()) ?>"
      id="case-record-form"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:47:55.313

这听起来与我遇到的问题非常相似。如果我通过回显表单来呈现表单，则验证有效，但在使用视图脚本时不会。我发现在使用 viewscript 时，Zend 不会将表单添加到它的 zendDijits 数组中，因此您必须手动完成。

添加类似：

```
$script = 'zendDijits.push({"id":"MyFormId","params":{"dojoType":"dijit.form.Form"}})';
$this->headScript()->appendScript($script); 
```

在视图的顶部。

# mysql - 我应该使用 MySql 还是 mongodb

> ID：11400753
> 
> 赞同：1
> 
> 时间：2012-07-09T18:16:47.890
> 
> 标签：mysql, ruby-on-rails-3, mongodb, devise

我正在构建一个社交网络（连接及其连接、消息和位置），在设计我们的后端 API 时，我在决定是使用关系数据库 (MySQL) 还是使用无 sql 系统 (MongoDB) 时有点困惑。有人对什么时候使用有什么看法吗？

PS：我正在为开发人员构建开发人员 API，以使用 oAuth 访问我们的系统。所以可扩展性和性能也是关键因素。Rails 3 + 设计（最有可能）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:23:46.577

这在很大程度上取决于您对哪种技术感到满意，您究竟想从中获得什么等等等等。

回到您的问题，并非所有数据都是相关的。因此，对于这些情况，NoSQL 可能会有所帮助。话虽如此，NoSQL 代表“不仅仅是 SQL”。它并不打算敲击或取代 MySQL。

SQL 或 MySQL 有几个非常大的优点：

1.  MySQL是强大的数学基础。
2.  声明性语法。
3.  结构化查询语言 (SQL) 中的一种著名语言。
4.  高度成熟且极其可靠的技术。MySQL 的存在远远超过了最古老的 noSQL。这是一项成熟的技术。Google Adsense 在 MySQL 上运行，Facebook 持久存储是 MySQL。这些例子表明了它的可靠性。
5.  由于技术成熟，人们已经优化了它。
6.  庞大的在线和开源社区，用于支持和提供与 noSQL 技术相反的功能（看看 Cassandra 发生了什么）

在我看来，当我选择一项技术时，上述所有问题对我来说都很重要。嘿，好吧，如果这是一个周日晚上的项目，你想在现实世界中产生很少的后果，那就做你想做的事，但如果它稍微严重一些，那么请考虑这些问题。

SQL 并没有消失（即使在 noSQL 中）。将此视为非此即彼的论点是错误的。NoSQL 是人们在合适时需要考虑的替代方案，仅此而已。

文档可以存储在非关系型数据库中，例如 CouchDB 甚至是 MySQL（它接近滥用但仍然存在）。关系数据库原则上可以成为一个非常好的 NOSQL 解决方案

看看这个[**热闹的视频**](http://highscalability.com/blog/2010/9/5/hilarious-video-relational-database-vs-nosql-fanbois.html/)。这为这个主题提供了不同的视角:)

![在此处输入图像描述](../Images/88855236032b78ba6279d44b1dbb82cb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:25:05.413

由于架构的灵活性和可扩展性/性能，我选择 MongoDB 作为我的“社交”应用程序。MongoDB 允许我调整我的架构，而无需进行剧烈的代码更改，并使读取/查找数据变得非常容易。

我也选择了 MongoDB 作为学习经验。我想知道这些“noSQL”数据库有什么大惊小怪的……现在我知道为什么了。在我看来，MongoDB 非常棒，对于需要可扩展性和性能的社交网络来说，绝对值得一看。Node.js 也是 API 的绝佳选择；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:27:10.207

两者都不。

使用网络/图形数据库，您不会后悔。我目前最喜欢的是 Neo4j。

[http://neo4j.org/](http://neo4j.org/)

注意：与 Neo4J 无关

我认为最新版本的 Neo4J 有一个 sql 接口，以防万一你需要 SQL 兼容性。否则，请使用他们的本地库来做你的杂事。它非常快。

如果您需要将 Graph 数据可视化，这将非常令人印象深刻地展示给您的老板，请使用 yEd 包。要将 neo4J 导出为 graphml 格式，请使用以下命令：

[将 Neo4j DB 转换为 XML？](https://stackoverflow.com/questions/2204440/convert-neo4j-db-to-xml)

您可以在 Neo4J 中前端处理您的关系，并使用关系数据库或 mongodb 进行后端处理。我也见过那些混合架构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:22:13.960

如果您的项目需要某些对象之间的实际关系，那么 MySql 就可以了。如果您存储的东西通常只有固有数据，例如用户向其他用户发送消息，那么文档样式数据库（例如 MongoDB）更有意义。

您可以在 mongo 中建立关系，但它们在关系数据库中更有意义。但是，如果您的大部分数据是用户固有的，那么 mongo 更有意义。

在您的情况下，文档类型的方案更有意义，其中每个用户都有一个连接用户列表和他们自己的个人属性，等等......

# mysql - 不亚于 MYSQL

> ID：11400757
> 
> 赞同：1
> 
> 时间：2012-07-09T18:17:10.877
> 
> 标签：mysql

以下是我的 sql 查询，我在其中尝试仅提取 dt_dischargedt 可以为 null 或者它们应该`NOT LESS THAN`是当前日期的那些记录，因此它只会显示那些没有出院的患者记录。请让我知道如何修改以下查询以完成我一直在尝试做的事情。

```
 SELECT *
       FROM z_census
       where 
       DATE_FORMAT(DATE_SUB(NOW(),INTERVAL 1 MONTH),'%m-%Y') NOT LESS THAN DATE_FORMAT(dt_dischargedt,'%m-%Y') OR dt_dischargedt IS NULL 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:19:36.683

为什么不尝试大于或等于？>= ?

# jquery - JQuery .ajaxStart 没有被调用

> ID：11400758
> 
> 赞同：0
> 
> 时间：2012-07-09T18:17:11.943
> 
> 标签：jquery

我正在使用 JQuery 1.7.2 并试图让一个“isDirty”标志在进行 ajax 调用时向用户抛出一条确认消息。如果用户单击确定，则应该发生 ajax 调用，如果他们取消确认消息，则不应发生 ajax 调用并将用户留在页面上。我的页面上有以下功能

```
...
$(function() {
    $(document).ajaxStart(function () {
        if (isDirty) {
            var status = confirm('You have unsaved changes! Are you sure you want to continue?');
            if (status) {
                isDirty = false;
            }
            return status;
        }
        return true;
    });
...
}); 
```

并且 .ajaxStart 永远不会被调用。如果我用 .AjaxSend 替换 .ajaxStart ，它会被调用，但如果我取消确认并且从函数返回“false”，它无论如何都会加载 ajax 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:38:10.737

创建一个 AJAX 查询并立即取消它不是一个好主意。您应该在创建 AJAX 查询之前进行测试。

我建议您创建一个自定义 AJAX 函数，包装 jQuery 函数，您可以在其中检查您的标志并在用户确认后启动查询。

```
var ajaxSecure = function() {
  if (isDirty) {
    var status = confirm('You have unsaved changes! Are you sure you want to continue?');
    if (status) {
      isDirty = false;
    } else {
      return null;
    }
  }
  return $.ajax(arguments);
}; 
```

然后使用您的 ajaxSecure() 而不是 $.ajax()。

# c# - 尝试替换 HTML 文档中的字符串并添加额外字符

> ID：11400759
> 
> 赞同：0
> 
> 时间：2012-07-09T18:17:13.107
> 
> 标签：c#, html, regex, replace

我想做的是打开一个文件并搜索“searchText”。我想用一个新链接替换文件中它的所有实例，这实际上只是带有锚链接的文件名，所以它不是打开 javascript，而是转到页面中的另一个点。

到目前为止，我所拥有的是：

```
private void writeNotes(){
        StreamReader reader = new StreamReader(openFileDialog1.FileName);
        string content = reader.ReadToEnd();

        reader.Close();

        string fileName = openFileDialog1.SafeFileName;
        string searchText = "<a class=\"x-fn\" href=\"javascript:void(0);\">";
        string replaceText = "<a class=\"x-fn\" href=\"" + fileName + "#fn" + "\">";

        content = Regex.Replace(content, searchText, replaceText);

        StreamWriter writer = new StreamWriter(openFileDialog1.FileName);
        writer.Write(content);
        writer.Close(); 
```

但是，在写入和关闭之后......我打开文件并没有进行任何更改。除此之外，我想做的是为每个替换实例添加一个在“#fn”之后计数的数字。所以，基本上，每次我用另一个替换 javascript 链接时，我希望它是：

```
<a class="x-fn" href="fileName#fn1"> 
```

然后当我替换 javascript 的第二个实例时，它显示为

```
<a class="x-fn" href="fileName#fn2"> 
```

等等...

我想我必须计算javascript出现的次数，替换它，并使用for循环遍历所有新链接并在最后添加#fn（n）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:30:55.493

您的问题是您有元字符（在这种情况下，“void（0）”中的打开和关闭括号）。不是表示文字的打开和关闭括号，而是创建一个正则表达式组，这会导致匹配失败。如果您使用反斜杠转义括号，它将按预期工作。

但是，由于您只是匹配字符串文字，因此您根本不需要使用正则表达式；使用起来会更快`string.Replace`。

至于你问题的第二部分，这有点棘手。据我所知，没有简单的方法可以做到这一点，因此最好的方法是在输入中查找您的搜索文本，然后`StringBuilder`随着您的前进建立 a ，增加一个计数变量。在下面的示例中，为简单起见，单词“the”被替换为“(0)”和“(1)”，但您可以很容易地根据您的问题调整它。

```
var content = "the quick brown fox jumped over the lazy dog";
var searchText = "the";
var sb = new StringBuilder();
var idx = -1; // will hold the index of our search text
var uncopiedIdx = 0; // the start index of what hasn't been copied yet
var replacementCount = 0;
while( (idx = content.IndexOf( searchText, idx+1 )) != -1 ) {
    // copy everything leading up to our search text
    sb.Append( content.Substring( uncopiedIdx, idx-uncopiedIdx ) );
    // copy the replacement text, with the replacement count
    var replacement = "(" + replacementCount++ + ")";
    sb.Append( replacement );
    // skip over the search text
    uncopiedIdx = idx + searchText.Length;
}
// copy everything after the last match
sb.Append( content.Substring( uncopiedIdx ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:14:13.127

您可以使用 MatchEvaluator 一次完成所有操作。
像这样的东西-

C＃

```
string content = 
 @"
     <a class=""x-fn"" href=""javascript:void(0);"">
     <a class='x-fn' href = ""javascript:void(0); "">
     <a href='javascript:void(0);' class=x-fn >
     <a class=""x-fn"" href=javascript:void(0); >
     <a 'hello' href=javascript:void(0); world class=x-fn >
  ";
 string fileName = "FILE";

 Regex jsRx =  new Regex(
  @"
     <a 
         (?=\s) 
         (?= 
             (?: [^>""']|""[^""]*""|'[^']*')*? (?<=\s)
             class \s*=
             (?:
                 (?> \s* (['""])  \s* x-fn  \s* \1 )         # (1) quote
               | (?> (?!\s*['""]) \s* x-fn  (?=\s|>)   )
             )
         )
         (?= 
             ( (?: [^>""']|""[^""]*""|'[^']*')*? ) (?<=\s)       # (2) - before 'href'
             href \s*=
             (?:
                 (?> \s* (['""])  \s* javascript:void\(0\); \s* \3   )   # (3) quote
               | (?> (?!\s*['""]) \s* javascript:void\(0\); (?=\s|>) )
             )
             ( (?> (?:"".*?""|'.*?'|[^>]?)+ ) )                  # (4) - after 'href'
         )
         (?> \s+ (?:"".*?""|'.*?'|[^>]*?)+ 
     >        
         ) (?<! /> )
  ", RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace | RegexOptions.Singleline);

 int counter = 0;
 string contentNew = jsRx.Replace( content, delegate(Match match)
 {
     return "<a" + match.Groups[2] + "href=\"" + fileName + "#fn" + (counter++) + "\"" + match.Groups[4] + ">";
 });

 Console.WriteLine( contentNew ); 
```

输出

```
<a class="x-fn" href="FILE#fn0">
<a class='x-fn' href="FILE#fn1">
<a href="FILE#fn2" class=x-fn >
<a class="x-fn" href="FILE#fn3" >
<a 'hello' href="FILE#fn4" world class=x-fn > 
```

# c# - Global.asax 仅在调试模式下运行

> ID：11400770
> 
> 赞同：2
> 
> 时间：2012-07-09T18:17:35.917
> 
> 标签：c#, .net, global-asax

我在 global.asax application_error 函数上有一个重定向。当我调试时，每个异常都由函数处理。当我在 Web 服务器上运行应用程序时，会出现 IIS 的错误默认页面。我有 IIS7 和 Visual Studio 2005。

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:43:12.037

*IIS 实际上还可以显示第四种错误页面。当您将 HTTP 错误配置为使用自定义错误页面并且 IIS 尝试呈现它时出现问题时，将返回此页面。*

*当 IIS 在演示应用程序中收到对给定页面的请求时，它会将其传递给 ASP.NET 运行时进行处理。运行时会生成一个响应，然后 IIS 会对其进行检查。如果响应具有作为错误状态代码的 HTTP 状态代码，IIS 可能会采取措施并替换此响应。- 如果existingResponse 设置为PassThrough，IIS 不采取任何行动，并且响应原样返回。- 如果existingResponse 设置为Replace，IIS 会根据errorMode 属性的值将响应替换为它自己的响应，因此它将替换为详细的、基本的或自定义的错误页面。- 如果existingResponse 设置为Auto，IIS 将用它自己的响应替换由ASP.NET 生成的响应，除非设置了称为SetStatus 标志的东西。（我将在本文后面讨论该标志。）*

[http://perspectivespace.com/error-handling-in-aspnet-mvc-3-part-2-custom](http://perspectivespace.com/error-handling-in-aspnet-mvc-3-part-2-custom)

# css - 背面可见性导致奇怪的文本混叠

> ID：11400771
> 
> 赞同：0
> 
> 时间：2012-07-09T18:17:36.040
> 
> 标签：css

我注意到 Webkit 中使用`backface-visibility`. 从图像（下图）中，顶部文本来自注释区域之外的段落 - 另一个在内部（下部文本更窄）。我相信我已经将问题追溯到`.flexslider .slides > li {display: none; -webkit-backface-visibility: hidden;}`背面可见性似乎与文本渲染有关。我已经尝试了几种方法来“重新添加”网站其余部分的内容，但到目前为止还没有这样的运气（例如 - 使用[这里](http://maxvoltar.com/archive/-webkit-font-smoothing/)的建议）。有什么建议么？谢谢。

![弹性滑块](../Images/f67a94673945c1b441c472df865c1dba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:29:26.820

`backface-visibility`之前给我造成了重大问题和问题，比如谷歌地图和表单。

最好的办法是在有问题的元素上强制禁用它。

```
.flexslider .slides > li {display: none; -webkit-backface-visibility: none !important;} 
```

# java - Spring Roo 创建控制器和视图

> ID：11400777
> 
> 赞同：0
> 
> 时间：2012-07-09T18:17:55.583
> 
> 标签：java, hibernate, spring-roo

我正在制作一个 Spring Roo 应用程序。我正在使用带有逆向工程 MSSQL DB 的休眠，我想创建一个名为 listtermianted 的不同版本的 list.jspx（类似但具有 WHERE 子句）。我需要采取哪些步骤来创建一个新视图，该视图填充了与刚刚根据 SQL 缩小范围的 list.jspx 相同的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:04:45.603

修改 roo 生成的 aj 文件不是一个好主意。roo 文档指出 roo 实际上可以删除此文件。可悲的是，我没有适合你的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:09:07.440

我能够弄清楚是否有人需要这样做。在 repsective jpa 活动记录文件中使用适当的 SQL 创建任何方法。在 controller_roo_controller.aj 创建一个方法（我只是复制了列表并重命名它并引用了我在 java 文件中创建的方法）。然后一定要在views.xml 中添加引用。最后在视图下创建实际文件。

# eventbrite - 通过 API 提取其他语言

> ID：11400778
> 
> 赞同：0
> 
> 时间：2012-07-09T18:17:56.393
> 
> 标签：eventbrite

Eventbrite SE 是否用英语以外的语言来词干？如果是这样，它们是什么语言，语言是如何确定的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:01:10.600

我在这里使用交互式文档进行了快速检查：http: [//developer.eventbrite.com/doc/events/event_search/](http://developer.eventbrite.com/doc/events/event_search/)

西班牙语词干提取似乎在许多情况下都有效——因为许多西班牙语单词是通过在末尾添加一个“s”来复数的。搜索“gato”和“gatos”都返回相同的结果列表。

据我了解，SOLR 的基本词干支持会自动尝试在大多数搜索关键字的末尾删除或添加字母“s”。我认为它对其他常见的英语单词扩展名也是如此，比如“ing”。

Eventbrite 非常关注 i18n，并支持国际活动。

我会尝试从您想要支持的语言中测试几个单词。如果您发现缺乏对特定语言词干的支持，请将您的反馈传递给 Eventbrite 支持团队。

# css - 需要帮助理解 css3 渐变和背景重复

> ID：11400785
> 
> 赞同：1
> 
> 时间：2012-07-09T18:18:22.883
> 
> 标签：css, sass, gradient, background-repeat

我在这里有一个[CodePen](http://codepen.io/CWSpear/pen/8-bit/4)，我正在尝试将我的 8 位小家伙变成 CSS3。

在第 89 行，我开始研究胡须。但这并不完全正确。

它目前正在重复 x 和 y，但它正在制作垂直条纹而不是我想要的圆点效果。如果您取消注释第 98 行 ( `background-repeat:repeat-x;`)，那么您会看到它具有正确的模式，但是它不会垂直重复（显然）（我希望 div 是任何高度，这仍然可以工作，你知道吗？ ）。我希望该模式在两个方向上正确重复。当它打开 repeat 或 repeat-y 时，它似乎重叠或其他东西。

在 中`color-stops()`，我最初使用`transparent`的不是`$face`颜色，但它使整个东西变成了红色。

要了解我想要达到的目标，请在此站点上参考我的头像。

[编辑] 我认为它更加复杂，因为我的图案不是直方格图案。这是重复的最小模式的特写：

![在此处输入图像描述](../Images/5fe2e778d8d451187b9f05e23c70697b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:58:28.263

问题是其中一个背景完全覆盖了另一个。其他人根本就看不见。我会试着弄清楚我会怎么做。

**更新** 所以..这并不容易。我认为可能的唯一方法是使用 Lea Verou 在这里所做的对角渐变 - [http://lea.verou.me/css3patterns/#checkerboard](http://lea.verou.me/css3patterns/#checkerboard)

问题是，如果你将尺寸缩小太多，它看起来就不会完美 - 这是我这样做的一个 tinkerbin - [http://tinkerbin.com/MQaHKuJI](http://tinkerbin.com/MQaHKuJI)

# java - 编辑文本左对齐

> ID：11400786
> 
> 赞同：0
> 
> 时间：2012-07-09T18:18:24.780
> 
> 标签：java, android

我正在为安卓手机构建一个数独解算器应用程序。

用户最初会看到一个起始页，要求他/她输入板尺寸（4*4、6*6 等）。之后开始一个新的活动并绘制具有所选尺寸的板。该板由区域形状的正方形组成`EditText`。我正在努力对齐该区域左侧的文本`EditText`。在该`EditText`区域中键入的文本略微向左对齐，但我希望文本位于角落。我该怎么做呢？我只使用javacode，而不是xml

```
import java.util.ArrayList;

import sudoku.androis.R;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Point;
import android.os.Bundle;
import android.text.Layout;
import android.view.Display;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.ViewGroup.MarginLayoutParams;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Gallery;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.ScrollView;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class SudokuUI extends Activity{

    int dim;
    EditText[][] board;
    ScrollView sv;
    RelativeLayout ll;
    int params;
    int boxHeight;
    int boxWidth;
    int textSize;
    Button neste;
    Button første;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        dim = getIntent().getExtras().getInt("key");
        TextView textview = new TextView(this);
        textview.setText(dim + "*" + dim + " brett");

        if(dim == 4) {
            params = 100;
            boxHeight = 2;
            boxWidth = 2;
            textSize = 20;
        }
        else if(dim == 6) {
            params = 70;    
            boxHeight = 2;
            boxWidth = 3;
            textSize = 20;
            }
        else if (dim == 9) {
            params = 50;    
            boxHeight = 3;
            boxWidth = 3;
            textSize = 12;
        }
        else if (dim == 12) {
            params = 40;
            boxHeight = 3;
            boxWidth = 4;
            textSize = 5;
        }
        else if(dim == 16){
            params = 30;
            boxHeight = 4;
            boxWidth = 4;
            textSize = 2;
        }

        sv = new ScrollView(this);
        ll = new RelativeLayout(this);
        ll.addView(textview);
        ll.setBackgroundDrawable(getResources().getDrawable(R.drawable.background1));
        //ll.addView(sv);

        board = new EditText[dim][dim];
        for(int i = 0; i < dim; i++) {
            for(int j = 0; j < dim; j++) {              
                board[i][j] = createEditText();
                //board[i][j].setTextSize(textSize);
                board[i][j].setBackgroundDrawable(getResources().getDrawable(R.drawable.square));
                board[i][j].setTextColor(Color.parseColor("#ff0000"));

                LinearLayout.LayoutParams marginParams = new LinearLayout.LayoutParams(board[i][j].getLayoutParams());
                int paramOne = 0;
                int paramTwo = 0;
                for(int b = 1; b <= boxHeight; b++) {
                    for(int c = 1; c <= boxWidth; c++) {
                        if(i == boxWidth*b){
                            paramOne = 6;
                        } else if(j == boxHeight*c) {
                            paramTwo = 6;
                        }
                    }
                }
                marginParams.setMargins((i)*params + paramOne, (j+1)*params + paramTwo,0,0);

                RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(marginParams);
                board[i][j].setLayoutParams(layoutParams);
                ll.addView(board[i][j]);
            }
        }
        neste = createNesteButton();
        neste.setText("Neste");

        LinearLayout.LayoutParams buttonPar = new LinearLayout.LayoutParams(neste.getLayoutParams());
        buttonPar.setMargins(220,550,0,0);

        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(buttonPar);
        neste.setLayoutParams(layoutParams);
        ll.addView(neste);

        første = createNesteButton();
        første.setText("Start");

        LinearLayout.LayoutParams buttonPar2 = new LinearLayout.LayoutParams(første.getLayoutParams());
        buttonPar2.setMargins(0,550,0,0);

        RelativeLayout.LayoutParams layoutParams2 = new RelativeLayout.LayoutParams(buttonPar2);
        første.setLayoutParams(layoutParams2);
        ll.addView(første);

        første.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                int[][] numbers = new int[dim][dim];
                for(int i = 0; i < dim; i++) {
                    for(int j = 0; j < dim; j++) {

                        try {

                            numbers[i][j] = Integer.parseInt(board[i][j].getText().toString());
                            validNumber(Integer.parseInt(board[i][j].getText().toString()));

                        } catch (NumberFormatException ne) {
                            numbers[i][j] = 0;

                        } catch (TooHighNumberException te) {
                            numbers[i][j] = 0;
                        }
                    }
                }
            }

        });

        ll.addView(sv);
        setContentView(ll);

    }

    public EditText createEditText(){

        final LayoutParams lparams;
        lparams = new LayoutParams(params,params);
        final EditText edittext = new EditText(this);
        edittext.setGravity(Gravity.FILL_HORIZONTAL);
        edittext.setLayoutParams(lparams);
        return edittext;
    }
    public Button createNesteButton() {

        final LayoutParams lparams;
        lparams = new LayoutParams(200, 80);
        final Button b = new Button(this);
        b.setLayoutParams(lparams);
        return b;
    }

    public void validNumber(int nr) throws TooHighNumberException {

        if(nr > dim || nr < 0) {
            throw new TooHighNumberException();
        }
    }

}

class TooHighNumberException extends Exception{ } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:22:32.340

设置 EditText 属性，**在 Eclipse 中，使用 Property 选项卡，将 Gravity 设置为 EditText 的左侧。**

```
android:gravity = "left"; 
```

# eclipse - Eclipse 是否有改进的 IDE？

> ID：11400790
> 
> 赞同：0
> 
> 时间：2012-07-09T18:18:39.107
> 
> 标签：eclipse, ide

我正在为 Eclipse 寻找一个现代的、高度可用的、单包 IDE/包装器（如果存在这样的东西）。可以为 Eclipse 提供包装器并添加一些样式、更好的界面、更好的代码突出显示等的东西。有什么建议吗？

编辑：-Java -寻找具有更多视觉功能和代码完成等的更好的“更漂亮”的 IDE。-应该能够在实时 Eclipse 安装中安装它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:41:13.927

就代码完成和重构功能而言，Eclipse 是最好的 IDE 之一。如果您关心的主要是样式，您可以使用 Preferences > Java > Editor > Syntax Coloring 菜单自定义语法着色。或者在这里查看[颜色主题](http://eclipsecolorthemes.org/)。

如果你想要一个不同的 Eclipse 皮肤，你可以[在这里](http://andrei.gmxhome.de/skins/index.html)试试。还有代码可视化插件和样式警告，但你需要具体说明你想要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:20:47.473

Aptana 还不错，[www.aptana.com](http://www.aptana.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:21:21.687

我不确定它是否会满足您的所有要求，但有[STS](http://www.springsource.com/developer/sts)。

# .net - Oracle ODP.NET 连接字符串：数据源中有什么？

> ID：11400794
> 
> 赞同：3
> 
> 时间：2012-07-09T18:18:56.317
> 
> 标签：.net, oracle

这是 ODP.NET 的 ConnectionStrings.com 字符串，很好，但什么是数据源？

> > 数据源=TORCL；用户ID=someUser；密码=son28dnn；

它是控制面板中的DSN吗？

服务器名称？

TNS 命名服务名称？

谢谢

卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:11:08.260

如果您将 ODP.NET 与 TNS 一起使用，它只不过是连接到 oracle 数据库的适配器之一。用于维护 TNS 条目的文件是 Tnsnames.Ora

tnsnames.ora 中的示例条目（文件的路径通常为 ORACLE_HOME\NETWORK\ADMIN）示例条目如下所示

```
TORCL=(DESCRIPTION=
(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)   (PORT=MyPort)))    
(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=MyOracleSID))) 
```

这里 TORCL 是数据源的别名，MyHost 是您的数据库服务器名称或 IP 地址，Port 是数据库侦听器端口，MyOracleSID 是您的 Oracle 服务

因此

```
Data Source=TORCL;User Id=myUsername;Password=myPassword; 
```

和

```
Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)  (PORT=MyPort)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=MyOracleSID)));User Id=myUsername;Password=myPassword; 
```

# iphone - 在 iOS 中获取 Google OAuth 被 Apple 接受

> ID：11400799
> 
> 赞同：11
> 
> 时间：2012-07-09T18:19:24.287
> 
> 标签：iphone, ios, oauth, app-store, appstore-approval

我开发了一个 iOS 应用程序，允许用户使用 OAuth 通过他们的 Google 帐户登录。

它因涉嫌违反 App Store Review Guidelines 11.13 被苹果拒绝：

`11.13 Apps that link to external mechanisms for purchases or subscriptions to be used in the app, such as a “buy" button that goes to a web site to purchase a digital book, will be rejected`

在询问更多信息时，苹果表示：

`To clarify, your app has been rejected for including means for users to acquire new Google accounts. Linking customers to a page where users may sign up or register new accounts, and then use those accounts to purchase service/server space to be used within the app, is not appropriate and must be removed before resubmitting your app.`

以下是侵权功能的截图：

![链接电子邮件帐户](../Images/5716692486a7539228a4df06dd8eb85d.png)

Gmail iOS 应用程序具有相同的屏幕，我找不到任何其他通过 OAuth 连接到 Google 的应用程序，所以我不知道如何解决这个问题。

有任何想法吗？

非常感谢！

**编辑：这是 Gmail 中相同违规屏幕的屏幕截图**

![Gmail 登录](../Images/b7c66a5769d8e8cd172a88fb637026fd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-16T08:32:18.227

## 编辑

谷歌终于添加了一个执行应用内登录的原生库。你可以在这里找到它[https://developers.google.com/identity/sign-in/ios/start](https://developers.google.com/identity/sign-in/ios/start)

## 原帖

这发生在几个用户身上，不幸的是，谷歌仍在“努力”寻找解决方案。

我强烈建议任何遇到此问题的人请在[官方论坛](https://code.google.com/p/google-plus-platform/issues/detail?id=900)中发表评论。它得到的关注越多，采取措施的机会就越大。以下是 Google 的一位员工所说的：

> 大家好——在 Google，我们的目标是让尽可能多的用户和开发者可以使用我们的服务。我们听到了极少数关于此类问题的报告，但这些应用程序开发人员似乎最终通过 Apple 的标准流程获得了发布的批准。
> 
> 同时，我们将继续致力于改进登录机制。我同意 Daniel 的观点，即不建议直接使用 GTMOauth2ViewControllerTouch 或等效的 UIWebView 技巧。

现在我使用的解决方案是从启动屏幕中删除登录并将其移动到我们应用程序内的菜单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:34:42.060

放置下面提到的链接而不是注册按钮：

[https://accounts.google.com/SignUp?service=mail&continue=https%3A%2F%2Fmail.google.com%2Fmail%2Fca%2F<mpl=default&hl=en](https://accounts.google.com/SignUp?service=mail&continue=https://mail.google.com/mail/ca/&ltmpl=default&hl=en)

此链接应在 iOS Safari 浏览器中打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:55:47.737

我也遇到了同样的事情，但服务不同（SmugMug）。在我的情况下，我与 SmugMug 合作，他们为我提供了一个没有注册按钮的 OAuth 授权页面。

几个月前，[Dropbox 也是如此](http://news.cnet.com/8301-13579_3-57425736-37/apple-reportedly-working-with-dropbox-on-rejected-apps/)。Dropbox 也最终暂时提供了一个没有注册按钮的登录页面，但他们与 Apple 有了更多的合作。

也许我们可以尝试让谷歌共同提供相同的服务。尽管我们是 iOS 开发人员，但我确信 Google 希望支持开发使用其平台的 iOS 应用程序。

您是否尝试过联系 Google？

# android - Android - 来电的程序化铃声更新第一次无法正常工作

> ID：11400804
> 
> 赞同：2
> 
> 时间：2012-07-09T18:19:40.983
> 
> 标签：android, ringtone

当我调用 RingtoneManager.setActualDefaultRingtoneUri 方法来设置来电时的新铃声并且这次播放旧铃声但新铃声在后面更新并下次播放时，我收到以下警告消息。

> W/BackupManagerService(61)：dataChanged 但没有参与者 pkg='com.android.providers.settings' uid=10037

**呼叫监听器**

```
class MyCallListener extends PhoneStateListener {

Uri newUri = null;
Uri oldUri = null;

Context context;

public MyCallListener(Context context) {
    this.context = context;
}

@Override
public void onCallStateChanged(int state, String incomingNumber) {
    Log.i("RandomRingtone:CallListener", "State : " + state);
    Log.i("RandomRingtone:CallListener", "IncomingNumber : "
            + incomingNumber);

    switch (state) {
    case TelephonyManager.CALL_STATE_RINGING:
        Log.i("RandomRingtone:CallListener", "Changing Ringtone");
        Log.i("RandomRingtone:CallListener",
                "Old Ringtone : "
                        + RingtoneManager.getActualDefaultRingtoneUri(
                                context, RingtoneManager.TYPE_RINGTONE));
        File k = new File("/sdcard/", "01 - Chinna Chinna.mp3");
        ContentValues values = new ContentValues();
        values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
        values.put(MediaStore.MediaColumns.TITLE, "My Song title");
        values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mpeg");
        values.put(MediaStore.Audio.Media.ARTIST, "Some Artist");
        values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
        values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
        values.put(MediaStore.Audio.Media.IS_ALARM, false);
        values.put(MediaStore.Audio.Media.IS_MUSIC, false);
        Uri uri = MediaStore.Audio.Media.getContentUriForPath(k
                .getAbsolutePath());
        // Line below is major because we need to delete old entry
        context.getContentResolver().delete(
                uri,
                MediaStore.MediaColumns.DATA + "=\"" + k.getAbsolutePath()
                        + "\"", null);
        newUri = context.getContentResolver().insert(uri, values);
        oldUri = RingtoneManager.getActualDefaultRingtoneUri(context,
                RingtoneManager.TYPE_RINGTONE);
        // On call you replace the ringtone with your own mUri
        RingtoneManager.setActualDefaultRingtoneUri(context,
                RingtoneManager.TYPE_RINGTONE, newUri);
        // Settings.System.putString(context.getContentResolver(),
        // Settings.System.RINGTONE, newUri.toString());
        Log.i("RandomRingtone:CallListener",
                "New Ringtone : "
                        + RingtoneManager.getActualDefaultRingtoneUri(
                                context, RingtoneManager.TYPE_RINGTONE));

        break;
    case TelephonyManager.CALL_STATE_IDLE:
        Log.i("RandomRingtone:CallListener", "Restore the default ringtone");
        Log.i("RandomRingtone:CallListener",
                "Old Ringtone : "
                        + RingtoneManager.getActualDefaultRingtoneUri(
                                context, RingtoneManager.TYPE_RINGTONE));

        // Restore the default ringtone
        RingtoneManager.setActualDefaultRingtoneUri(context,
                RingtoneManager.TYPE_RINGTONE, oldUri);
        // Settings.System.putString(context.getContentResolver(),
        // Settings.System.RINGTONE, oldUri.toString());
        Log.i("RandomRingtone:CallListener",
                "New Ringtone : "
                        + RingtoneManager.getActualDefaultRingtoneUri(
                                context, RingtoneManager.TYPE_RINGTONE));
        break;
    default:
        break;
    }

    super.onCallStateChanged(state, incomingNumber);
}
} 
```

**广播接收器**

```
public class StartServicesAtStartUp extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    Log.w("DEBUG", "StartServicesAtStartUp");
    TelephonyManager mTelephonyMgr = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    MyCallListener callListener = new MyCallListener(context);
    mTelephonyMgr
            .listen(callListener, PhoneStateListener.LISTEN_CALL_STATE);
    Log.w("DEBUG", "Call Listener Added....");
}
} 
```

**安卓清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.randomringtone"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <!--        <activity
        android:label="@string/app_name"
        android:name=".RandomRingtoneActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>  -->

    <!--
    <receiver android:name="MyPhoneReceiver" >
        <intent-filter >
            <action android:name="android.intent.action.PHONE_STATE" >
            </action>
        </intent-filter>
    </receiver>

    -->
    <receiver android:name="StartServicesAtStartUp" >
        <intent-filter >
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
</application>
</manifest> 
```

我被困在这个问题上。任何帮助表示赞赏。

提前致谢。

问候， 迪帕克

# sql - Oracle 运行总计

> ID：11400810
> 
> 赞同：3
> 
> 时间：2012-07-09T18:20:18.050
> 
> 标签：sql, oracle, aggregate-functions

使用 PLSQL 寻找具有 2 种不同类型小计的建议。

我需要提取一个数据集，其中包含 1) 唯一的人数和 2) 学分总数，作为一段时间内的运行总数。

原始数据：
这是交易数据——每次学生注册或课程时，都会插入一条记录，其中包含日期、学生 ID 和学分（以及课程编号和一堆其他相关数据）。每个学生每门课程一条记录。

```
STUDENT_ID   CREDITS   DATE
1            3         01-JAN-12
1            2         02-JAN-12
57           1         03-JAN-12
1            1         03-JAN-12 
```

处理后的数据：
这是老板需要看到的——它将用于以后的趋势（例如，查看今年的 Jan-01 与去年的 Jan-01 的对比情况等）。

```
UniqueHeadcount   SumCredits   Date
1                 3            01-JAN-12
1                 5            02-JAN-12
2                 7            03-JAN-12 
```

粗暴的方法是编写一堆单独的 SELECTS（每天一个），然后将它们联合在一起。例如：

```
SELECT
  COUNT(DISTINCT STUDENT_ID) as "UniqueHeadcount",
  SUM(CREDIT_HR) as "SumCredits",
  '01-JAN-12' as "DATE"
FROM
  REGISTRATIONS
WHERE
  TO_CHAR(DATE,'yyyymmdd') <= '20120101' 
GROUP BY
  '01-JAN-12'

UNION

SELECT
  COUNT(DISTINCT STUDENT_ID) as "UniqueHeadcount",
  SUM(CREDIT_HR) as "SumCredits",
  '02-JAN-12' as "DATE"
FROM
  REGISTRATIONS
WHERE
  TO_CHAR(DATE,'yyyymmdd') <= '20120102' 
GROUP BY
  '02-JAN-12'

UNION

... 
```

这很有效——结果是准确的——但正如你所看到的——这远非优雅——如果你必须这样做 365 天，那么……它是一头野兽。必须有更好的方法来做到这一点。

到目前为止，在我的搜索中，我已经了解了一个可以使用的“OVER”子句——就像这样：

```
SELECT
  COUNT(DISTINCT STUDENT_ID) OVER(ORDER BY TRUNC(RSTS_DATE) ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) "UniqueHeadcount",
  SUM(CREDIT_HR) OVER(ORDER BY TRUNC(RSTS_DATE) ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) as "SumCredits",
  TRUNC(RSTS_DATE) as "DATE"
FROM
  REGISTRATIONS 
```

这个查询是方式，方式更短（耶） - 但有两个重大问题，我还不能找到我的方式。首先是它对 COUNT DISTINCT 不起作用（显然是设计使然？）。所以我评论了一会儿，然后遇到了第二个问题：它忽略了 TRUNC() 函数。RSTS_DATE，虽然当您在其上运行 SELECT 时它似乎只是一个日/月/年的值，但实际上也包含时间，所以我得到的结果集不仅仅是简单地在日期上求和，而且随着时间的推移——因此，我处理的数据不是每天一条记录，而是每天返回数百条记录（每个单独的课程注册一条）。例如：

```
UniqueHeadcount   SumCredits   Date
1                 3            01-JAN-12
1                 5            02-JAN-12
2                 6            03-JAN-12 (hidden time: 07:32:27)
2                 7            03-JAN-12 (hidden time: 08:01:33) 
```

不是我所追求的。

所以我正在寻找专业知识——如果我到目前为止所解释的内容有意义的话——是否有另一种使用 OVER 子句的方法，或者我应该为此使用 PLSQL 的另一个特性？如果你不能告诉我，我在 PLSQL 方面并不强，但如果有人能给我一些指导——即使只是对谷歌的话，我会很感激你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:33:11.753

尝试这个：

```
WITH CRdata AS
(
    SELECT COUNT(DISTINCT STUDENT_ID) AS UniqueHeadcount,
    SUM(CREDIT_HR)                     AS SumCredits,
    TRUNC(RSTS_DATE) RSTS_DATE
     FROM REGISTRATIONS
    GROUP BY TRUNC(RSTS_DATE)
)
 SELECT SUM(UniqueHeadcount) OVER(ORDER BY RSTS_DATE ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS UniqueHeadcount,
  SUM(SumCredits) OVER(ORDER BY RSTS_DATE ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS  SumCredits, 
  RSTS_DATE 
  FROM CRdata 
```

# javascript - 仅在一个特定页面上使用脚本

> ID：11400811
> 
> 赞同：1
> 
> 时间：2012-07-09T18:20:18.203
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jQuery mobile 开发一个应用程序。我有一个脚本，我想在用户进入页面后启动它，并在他们离开后停止。

我用过：

```
$( document ).delegate("#myPage", "pagecreate", "", function() {
    //my script here
}); 
```

让脚本仅在用户输入“myPage”后运行。我怎样才能让脚本在他们离开“myPage”后停止？

编辑：我使用的是基于 ajax 的导航，所以它都是一个 HTML 文件。当有人进入新的子页面（#page）时，我正在尝试启动和停止脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:46:10.317

您可以将`pageshow`和`pagehide`事件用于特定的伪页面。像这样的东西：

```
$( document ).delegate("#myPage", "pageshow", function() {
    //start your code
}).delegate("#myPage", "pagehide", function() {
    //end your code
}); 
```

这是 jQuery Mobile 事件的文档，页面事件有一整节：http: [//jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

使用`pageshow`/`pagehide`的优点是代码也将在伪页面的后续视图上运行，而不仅仅是在第一个页面加载时。

# django - Django 或任何其他 Python 框架中的开源客户评论系统

> ID：11400815
> 
> 赞同：3
> 
> 时间：2012-07-09T18:20:42.763
> 
> 标签：django, open-source, comments, disqus, review

我想在 Django 中实现一个意见或客户评论系统、一种 Disqus 或模型评论，并在处理这些评论方面做一些额外的工作。

我已经在 github 上搜索和搜索了几个小时，这是一个处理客户评论、意见或评论的平台。似乎对 Django 中的原生评论存在很大争议。到目前为止，我读过很多好的，但也有很多不好的。

我想知道你们中的一些人是否知道类似于 Disqus 但开源的东西。

我正在搜索一些开源平台，因为在处理评论和分析评论的基础上还有很多工作要做（实际上我正在工作），我想切断从头开始开发整个管理系统的时间用户和评论，并专注于文本分析部分。

欢迎任何意见！最好的，

卢楚克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:39:06.673

看看 askbot（免责声明 - 我是 askbot 项目的联合创始人和开发人员）。

Askbot 是和本站一样的问答系统，只是[开源](https://github.com/ASKBOT/askbot-devel)，更灵活，对邮件的支持也更好。我们的项目仍在进行中，但我们进展很快。

# java - 在android中实现“检查应用程序是否来自后台”的最佳方法

> ID：11400821
> 
> 赞同：2
> 
> 时间：2012-07-09T18:21:07.017
> 
> 标签：java, android, android-lifecycle

我一直在阅读有关此主题的其他帖子中的答案，但我还没有找到所有方法中最好的方法。

这是我现在采用的方法，但我不知道它是否一直最糟糕（据我测试每一个都为我工作）或者是否有更好的方法。

```
public class FatherClass extends Activity {

private static int activities = 0;

public void onCreate(Bundle savedInstanceState, String clase) {
    super.onCreate(savedInstanceState);
}

protected void onRestart()
{
    super.onRestart();
    if(activities == 0){
        Log.i("APP","BACK FROM BACKGROUND");
    }
}

protected void onStop(){
    super.onStop();
    activities = activities - 1;
}

protected void onStart(){
    super.onStart();
    activities = activities + 1;
}

} 
```

说明：**onStart**是在活动“可见”时执行的，而**onStop**是在活动“不可见”时执行的。因此，当您的应用程序（它说应用程序不是活动）进入后台时，所有活动都是“不可见的”，因此它们会执行 onStop 方法，因此其背后的想法是每次活动开始时**添加一个**，每次**减去一个**隐藏了一个活动，因此如果变量“活动”的值为**0“零”**，这意味着在某个时间点开始的所有活动现在都不可见，因此当您的 APP 从后台返回并执行**onRestart**在“前面”的活动上的方法，您可以检查是来自后台还是只是重新启动活动。

我将不胜感激有关此主题的一些反馈。

# javascript - Javascript RegEx：验证时间

> ID：11400822
> 
> 赞同：2
> 
> 时间：2012-07-09T18:21:10.050
> 
> 标签：javascript, jquery, regex, time

我有一个秒表变量，可以按以下格式获取值： `HH:MM:SS`大部分时间。`'HH'`可以超过 24 小时 - 基本上是任何有效数字。

我对这个正则表达式的东西不是很好，但是能够写出对大多数情况都有好处的东西，但无法验证小时是否是个位数。前任。下面的正则表达式通过时间`1:10:09`，虽然它是无效的。有效小时部分应该是`01`.

```
//var stopWatchTime = '02:10:09'; //Valid
//var stopWatchTime = '00:10:09'; //Valid
//var stopWatchTime = '1234:10:09'; //Valid
//var stopWatchTime = ':10:09'; //Invalid
//var stopWatchTime = 'ax:10:09'; //Invalid
var stopWatchTime = '1:10:09'; //Invalid, should be 01:10:09\. 

if(!stopWatchTime .match(/^\d+:\d{2}:\d{2}$/)){
    alert('invalid time- ' + stopWatchTime);
}
else{
    alert('valid time - ' + stopWatchTime);
} 
```

我应该在正则表达式中进行什么更改以说它应该检查任何数字，但小时部分应该有 2 位或更多位？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T18:23:47.343

```
/^\d{2,}:\d{2}:\d{2}$/ 
```

将 + 更改为 {2,} 以允许它包含两个或更多字符

如果你想看看匹配和不匹配的东西，你可以在这里玩[http://regexr.com?31fu4](http://regexr.com?31fu4)

编辑：另外，如果您只想在小时/分钟部分匹配最多 59 个，请使用

```
^\d{2,}:(?:[0-5]\d):(?:[0-5]\d)$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:58:28.543

[http://gskinner.com/RegExr/?31fug](http://gskinner.com/RegExr/?31fug) `^\d{2,}(:[0-5]\d){2}$`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T08:52:26.790

```
// use this function to  validate time in HH:mm formate

function validate_time(time){
    var a=true;

    var time_arr=time.split(":");
    if(time_arr.length!=2){           
        a=false;
    }else{
        if(isNaN(time_arr[0]) || isNaN(time_arr[1])){                
            a=false;
        }
        if(time_arr[0]<24 && time_arr[1]<60)
        {

        } else{
            a=false;
        }         
    }
    return a;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-09T20:02:50.700

另一种解决方案可能是：

```
 $('#input-horaIni, #input-horaFin').blur(function () {
        var validTime = $(this).val().match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/);
        if (!validTime) {
            $(this).val('').focus().css('background', '#fdd');
        } else {
            $(this).css('background', 'transparent');
        }
    }); 
```

这对我有用...基于页面：[http ://www.mkyong.com/regular-expressions](http://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-20T17:22:10.047

这是我对此验证的回答！

```
function checkTimes(val){
val=new String(val);
if(val.length!=5){
    return false;
}
else{
    var hour=val.substring(0,2);
    var min=val.substring(3,5);
   if(val.substring(2,3)!==":") return false;
    if(isNaN(hour)) return false;
    if(isNaN(min)) return false;
    if(parseInt(hour)<24){
        if(parseInt(min)<60){
            return true;
        }
        else return false;

    }else return false;
}
} 
```

您可以将我的答案扩展到 8 个字符...

# c - 在 C 中将字符串分成两半的问题

> ID：11400828
> 
> 赞同：1
> 
> 时间：2012-07-09T18:21:28.440
> 
> 标签：c, string, pointers, split, strtok

我有一个包含空格的字符串，例如“print 2”或“print 3 test”。我正在尝试删除第一个参数 - 在这些示例中，打印。

我试过strtok（）：

```
char *test;
test = strtok(COMMAND, " ");
printf("%s\n", test); 
```

但是打印测试会出现段错误。我尝试制作一个函数，它在 main() 中运行良好，但是当从我需要它的函数调用时，它也会出现段错误。

```
char* split(char S[], int N) {
    printf("Running split() on %s\n", S);
    int Spaces = 1;
    int i = 0;
    for (i; i<strlen(S) && Spaces <=N; i++) {
        if (S[i] == ' ') {
            Spaces++;
        }
    }
    printf("split: %s\n", &S[i]);
    //return "0";
    return &S[i];
} 
```

我猜这是某种指针问题。命令被传递到 print 函数中，如下所示：

```
Print(File, Lines, COMMAND); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:31:57.513

我不知道您的测试样本中的 COMMAND 是什么，但是您应该测试 strtok 是否返回 null （当 strtok 找不到令牌时）。带有空指针的 printf 会给你一个 seg vault。

通常你从一个循环中调用 strtok： [http ://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:39:54.333

总是测试 strtok() 的返回值！

如果没有找到这样的字节（第二个参数），即。第一个参数指向的字符串中不存在标记，则返回空指针。

# c - 如何通过在 C 中传递变量名称来为变量设置值？

> ID：11400834
> 
> 赞同：2
> 
> 时间：2012-07-09T18:21:40.400
> 
> 标签：c, variables, pointers

```
char whatVar[] = "";

float phValue, ecValue, tempValue; 
```

我不确定这在 C 中是否可行。每个浮点值都将随机设置。我想根据 char whatVar 对应的内容来设置它们的值。例如，假设`char whatVar[] = "phValue";` 我如何指向 whatVar 中的变量名然后设置值？我想在不使用 if 条件或开关的情况下实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:26:15.853

不; 使用数组。将程序逻辑与变量名称联系起来是一个可怕的想法。变量名的存在可以帮助程序员了解代码在做什么。除此之外，不（也不应该）有任何意义。

相反，请使用索引/存储桶/映射/任何具有逻辑意义的集合。初学者完全按照自己的意愿去做是很常见的，但这几乎可以肯定是个坏主意。听起来你想要一个字符串-> 浮动映射或哈希表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T18:24:53.163

您将不得不*手动*`whatVar`实现对实际变量值的转换。C 语言没有这种直接的特性。

 *它可以通过`if/switch`梯子完成。或者它可以通过预先构建一个表来完成，该表将变量名称“投影”（映射）到变量地址（以及，如果需要，类型）。您将不得不手动搜索表格。它仍然会有`if`'s ，除非你为你的名字开发某种 [最小] 完美的散列函数（参见 Steve Jessop 的评论）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:24:01.143

为什么不 ？

```
if(strcmp(whatVar, "phValue") == 0)
{
   phvalue = 3; //some value
} 
```

等等等等。

编辑：如果不需要`if`s 和 the `switch`，那么我们可以在字符串表示之间使用某种`map`字符串作为键，将它们的变量作为值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T18:27:24.520

这超出了语言规范，我认为如果这是您希望在该语言中具有的功能，另一种具有这种功能的语言对您来说会更有用。

我能想到实现这一点的唯一方法是做一些预处理技巧，这似乎是个坏主意。使用这种方法，您将不会在代码中拥有 if's 它本身，而是一些非常难以维护的预处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T19:10:31.993

如果你真的想这样做，你可以使用这个`dlsym`函数（只要你访问的变量是全局的）。这是一个简单的例子：

```
 #include <dlfcn.h>
 #include <stdlib.h>
 #include <stdio.h>

 float phValue, ecValue, tempValue;  
 int main(int argc, char *argv[]) {
    int i;
    phValue = 0;
    ecValue = 0;
    tempValue  = 0;
    printf("Before:\n");
    printf("\tphValue = %f\n", phValue);
    printf("\tecValue = %f\n", ecValue);
    printf("\ttempValue  = %f\n", tempValue);

    for(i = 1; i < argc; i += 2) {
       float *varptr = (float *)dlsym(RTLD_MAIN_ONLY, argv[i]);
       *varptr = atof(argv[i+1]);
    }
    printf("\nAfter:\n");
    printf("\tphValue = %f\n", phValue);
    printf("\tecValue = %f\n", ecValue);
    printf("\ttempValue  = %f\n", tempValue);
 } 
```

还有一个演示：

```
 % gcc varname.c -ldl
 % ./a.out phValue 12.1 tempValue 4.3 ecValue 2.2
 Before:
    phValue = 0.000000
    ecValue = 0.000000
    tempValue  = 0.000000

 After:
    phValue = 12.100000
    ecValue = 2.200000
    tempValue  = 4.300000 
```*

# android - CENTER_CROP 不保持图像比例

> ID：11400835
> 
> 赞同：2
> 
> 时间：2012-07-09T18:21:41.577
> 
> 标签：android, imageview, crop

通过阅读 Android 文档，我期待一张具有这种布局的图片：

```
<ImageView
    android:id="@+id/avatar"
    android:layout_width="fill_parent"
    android:layout_height="150dip"
    android:adjustViewBounds="true"
    android:scaleType="centerCrop" /> 
```

填充布局（150 倾角的高度是唯一条件）没有任何扭曲：

> CENTER_CROP 统一缩放图像**（**保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或大于视图的相应尺寸（减去填充）。

这在手机上效果很好：

![在此处输入图像描述](../Images/c5136cc47016e968a334abec6497a4f6.png)

但在平板电脑上，图像完全失真：

![在此处输入图像描述](../Images/94c6d68815538bbfaa635b738b20808b.png)

怎么可能说：“请不要横向拉伸”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:25:30.300

我认为您将图像指定为背景而不是源。图像在手机上看起来也被拉伸了，CenterCrop 应该可以正常工作。

尝试使用 setImageBitmap 或“src”属性，让我知道它是否有效。

# cakephp-2.0 - 2 在 CakePHP 2.1 的一个函数中查找语句

> ID：11400836
> 
> 赞同：0
> 
> 时间：2012-07-09T18:21:46.877
> 
> 标签：cakephp-2.0

嗨，我目前正在做一个项目，想知道是否可以在 cakephp 中执行两个查找功能？例如，我正在制作一个体育新闻网站，并将新闻文章分组为头条新闻、新闻和标题。

我想要做的是检索头条新闻，这样我就可以将这些作为突出的故事突出显示，然后将下层作为一个较小的故事放在下面，然后头条新闻将是最不重要的。

这是我到目前为止所拥有的

```
 function latestnews() {

$articles =  $this->Article->find('all', 
    array('limit' =>3,
    'order' => 
        array('Article.date_created' => 'desc')));
    if(isset($this->params['requested'])) { 
         return $articles; 
         } 
            $this->set('articles', $articles); 

    $articler = $this->Article->find('all', 
        array('Article.type' => 'topstory',
            'Limit' => '1'
    )); 

        $this->set('articles', $articler);

} 
```

但是这似乎不起作用，它不限制 $articles 功能，而是回显表中的所有数据。

在视图中，我正在执行标准的 foreach 语句来回显数据，但我得到了一个未定义的变量错误。

我所说的是否可能，或者我应该创建不同的功能然后将它们用作元素？

感谢您提前输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:13:48.227

您可以将关联与自身动态绑定。试试这个代码：

```
function latestnews() {
    $this->Article->bindModel(array('hasMany' => array('TopStory' => array('className' => 'Article',
                                           'foreignKey' => false,
                                           'conditions' => array('Article.type' => 'topstory')
                                           ),
                               'Highlight' .....
                               )));
    $articles =  $this->Article->find('all',
                      array('limit' =>3,
                        'order' =>  array('Article.date_created' => 'desc')));
    if(isset($this->params['requested'])) {
        return $articles;
    }
    $this->set('articles', $articles);

    $articler = $this->Article->find('all',
                     array('Article.type' => 'topstory',
                           'Limit' => '1'
                           ));
    $this->set('articles', $articler);

} 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:54:34.617

@Arun 不，这似乎不起作用，我得到了这个错误，`Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Article.type' in 'where clause'`我也试图把它放在一个有自己功能的元素中，然后我得到了这个错误......

注意 (8)：未定义变量：数据 [APP/View/Elements/Articles/topstories.ctp，第 5 行] 警告 (2)：为 foreach() [APP/View/Elements/Articles/topstories.ctp,第 5 行] 注意 (8)：未定义属性：View::$Paginator [CORE/Cake/View/View.php，第 806 行] 致命错误：在 /Applications/ 中的非对象上调用成员函数 prev() XAMPP/xamppfiles/htdocs/kickoff/app/View/Elements/Articles/topstories.ctp 在第 21 行

控制器代码如下...

```
function topstories() {
    $this->paginate = array(
        'conditions' => array('Article.type' => 'topstory'),
    'limit' => 2,
    'order' => array(
        'date_created' => 'asc'
    )
    );
    $data = $this->paginate('Article');
    $this->set(compact('data'));

} 
```

我发现这个错误令人困惑，就好像我没有把它放在一个元素中，而是在一个视图中它完美地工作！但是在一个不太完美的元素中：S 关于为什么会这样的任何想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:05:49.250

我没有在一个函数中使用两种查找方法，而是选择简单地创建不同的函数并将它们用作元素，例如......

```
function premiershiptopstory() {

            $pltopnews = $this->Article->find('all', array(
                    'conditions' => array('Article.league' => 'premiership',
                    'Article.type' => 'topstory')));
                        if(!empty($this->request->params['requested'])) {
                        return $pltopnews;}
                        $this->set('article', $pltopnews);  

            } 
```

但是在视图中，您必须请求该操作，否则您将得到一个错误，请求该操作只需使用这行代码...

```
 <?php $pltopnews = $this->requestAction('/Articles/premiershiptopstory'); 
```

希望这对其他人有帮助！

# html - 锚链接在对象标签中不起作用

> ID：11400839
> 
> 赞同：0
> 
> 时间：2012-07-09T18:21:59.840
> 
> 标签：html, anchor, object-tag

new here 并且对象标签有问题。

我有一个嵌入在标签中的页面，它类似于传统的常见问题解答页面，因为我在顶部有一个链接列表，单击时应该跳转到每个部分的锚标记。

当单独加载外部页面时它可以完美运行，但是如果页面加载到对象标签中，则单击链接时不会发生任何事情。

我已经尝试了从 href="#name" 到 href="http://www.blah.com/blah.html#name" 的所有方法，但它仍然无法正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:36:35.597

使用`iframe`而不是`object`. 这使您可以将链接的目标指定为内联框架，例如`<a href="..." target="qa">...</a>`使用 with `<iframe name="qa" ...></iframe>`。

# android - 如何使用 Android 和 Java 或任何其他语言设置 Eclipse 内容辅助？

> ID：11400849
> 
> 赞同：0
> 
> 时间：2012-07-09T18:22:42.930
> 
> 标签：android, eclipse, content-assist

有谁知道你必须做些什么才能让内容辅助在 Eclipse 中工作？您是否必须指向某个文件或文件夹。我已经检查了首选项，并且所有这些提案复选框都被选中，所以这不是问题，并且 control_space 会显示内容辅助框，但它说没有默认提案。直到几周前，当我更改某些内容或更新软件时，它确实对我有用，但我不记得是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:31:03.747

几周前我遇到了类似的问题。我关注[了这个](http://www.mkyong.com/java/content-assist-ctrl-space-is-not-working-eclipse/)博客和[这个](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/editor/ref-preferences-content-assist.htm)文档。

希望它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:39:33.833

您是否尝试按照[另一个非常流行的答案](https://stackoverflow.com/a/908930/95033)中的建议**恢复默认设置**。即使选中了所有复选框，也可能会发生某种冲突。`Windows > Preferences > Java > Editor > Content Assist > Advanced`

# excel - 将主工作表中的过滤器应用于多个工作表

> ID：11400850
> 
> 赞同：2
> 
> 时间：2012-07-09T18:22:46.540
> 
> 标签：excel, vba

我正在尝试将主工作表中的过滤器应用于同一工作簿中的多个工作表。

例如。

工作簿中有 3 个工作表，每个工作表上有以下字段：

1.  国家

国家代码、国家名称

1.  销售量

国家代码、销售额

1.  存货

国家代码，InvAmount

当我按 FRA、JPN 和 USA 筛选 Country 表时，我希望 Sales 和 Inventory 表将自动遵循相同的筛选条件，并且仅显示 FRA、JPN 和 USA 行。

它似乎并不太复杂，但我一直在尝试使用 AdvancedFilter 方法在 VBA 中编码，几天没有运气！

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:41:52.577

我想你想要这样的东西，在我放置的每个工作表中插入你想要过滤的范围`xx`。替换`i, ii and iii`为 FRA、JPN 和 USA 的国家代码。

请注意，这是过滤国家代码而不是国家名称，因为它是通用字段。

```
Option Explicit
Sub Apply_Filter()

Dim ws As Worksheet

For Each ws In ThisWorkbook.Worksheets
    With ws
        .Range("xx").AutoFilter Field:=1, Criteria1:=Array("i", _
        "ii", "iii"), Operator:=xlFilterValues
    End With
Next

End Sub 
```

# android - Android 应用程序中 JNI C++ 堆的生命周期

> ID：11400853
> 
> 赞同：0
> 
> 时间：2012-07-09T18:22:50.893
> 
> 标签：android, java-native-interface, heap-memory

我正在重新设计我们的 Android 应用程序。这是一个复杂的应用程序，由许多活动组成。主 Activity 加载一个 JNI 本机库。该库在 C++ 堆上分配了许多结构。

如果应用在某个 subActivity 中关闭，并且主 Activity 由于内存不足而停止和卸载，那么 C++ 堆上的内存会发生什么情况？只要应用程序进程正在运行，这种情况是否会持续存在，或者当加载库的 Activity 消失时它会以某种方式被释放？

我想我对库中的全局 C 变量有类似的问题。它会在整个过程中持续存在吗？

谢谢。

# javascript - 带有事件操作排除的事件侦听

> ID：11400857
> 
> 赞同：1
> 
> 时间：2012-07-09T18:22:59.983
> 
> 标签：javascript, prototypejs

我在想要触发的输入上有一个更改事件，除非您单击列表项。基本上我调用一个函数来检查这个字段的变化，但是还有一个自动完成脚本，它在您选择的输入下方添加一个无序列表，当您单击一个项目以填充输入字段时触发更改（本质上是在添加新值之前触发）。这是javascript代码：

```
document.observe('dom:loaded',function() { 
    new Ajax.Autocompleter("search_input", "found_input", "someurl.jsp", {
        afterUpdateElement: updateSelectedItem,
        minChars: 2
    });
    if ($('search_input') != undefined) {
        $('search_input').observe('change', function(e, el) {
            if (e.explicitOriginalTarget.up(1) != undefined && e.explicitOriginalTarget.up(1).id != "found_input") {
                checkFunction(this.value);
            }
        });
    }
}); 
```

我在那里添加了explicitOriginalTarget，因为它适用于Mozilla 浏览器，但这不是跨浏览器解决方案。我还尝试添加一个变量，当您单击无序列表项时会添加该变量，但它会在 search_input 字段之后触发，因为它在 DOM 之后。

感谢您的帮助。

编辑：

你可以在这里看到一个小例子：http: [//jsfiddle.net/DfMYE/5/](http://jsfiddle.net/DfMYE/5/) 如果你开始输入“test”，你会看到一个下拉菜单，其中包含 2 个选项。当你点击一个时，它会触发 change 事件和 select 事件。如果我们单击选择列表，我想停止更改事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:26:00.290

这是我公认的骇人听闻的解决方案：http: [//jsfiddle.net/kkFsJ/1/](http://jsfiddle.net/kkFsJ/1/)

发生的情况是，通过单击自动完成选项，您正在模糊输入字段，因此提交您键入的任何值，并且在该字段上调度更改事件。这一切都在您能够*单击*（需要 mouseup）自动完成选项以触发该功能以用您选择的内容替换输入内容之前完成。这是你问题的根源。

我不完全理解的是为什么在您进行自动完成选择后，不会调用另一个更改事件（至少在 Safari 中）。我想知道以编程方式更改输入值是否不会触发更改事件。我可能应该知道是否是这种情况，但我需要对其进行测试。有任何想法吗？

所以 - 我所做的是子类化`Autocompleter.Local`该类并将`onClick`回调分配给每个 li 的*mousedown*事件。这似乎`onClick`在表单的模糊事件之前触发（因此触发更改）。然后我在输入字段上手动触发更改事件。

我仍然必须设置一个`changing`标志，以便`searchHandler`不会为单个自动完成选择多次调用回调。这发生在 Firefox 中。我推迟了这个回调的实际工作，让事件稳定下来，然后关闭`changing`标志。这是最恶心的部分，对不起。

需要注意的一点是，如果您选择自动完成选项，无论选择的值是否与输入字段中最初的值不同，都会触发更改事件。避免这种情况需要更多地修改自动完成器代码，如果你愿意，我会让你处理。此外，我只在 Mac 上的 FF 和 Safari 中对此进行了测试，因此如果要投入生产，请适当地进行测试和调整。

希望这能奏效，或者至少给你一些想法。如果您或其他任何人对这个问题有不同的看法（除了重写自动完成功能），我很想听听。

# java - Java：如何在 gpu 上调整图像大小

> ID：11400863
> 
> 赞同：2
> 
> 时间：2012-07-09T18:23:31.913
> 
> 标签：java, image, directx, rendering, gpu

我有一个应用程序需要调整很多大灰度图像（最多 4000 * 4000）的大小。我不想使用 java 图形，因为它适用于 CPU。有没有办法在 GPU 上执行类似于 directX9::StretchRect 的调整大小。在stretchRect 中，我只需一步即可调整大小和渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:13:41.380

缩放的问题使得它（有时）对并行化不那么友好（这就是人们使用 GPU 的原因）是缩放期间需要插值。更具体地说，对周围像素的颜色值进行平均以获得新像素的值（扩展时）或智能地将所有周围像素平均为您尝试并代表多个像素的单个颜色值（收缩时）。

这需要您知道给定像素周围的所有值，这意味着像素上方/下方/左侧/右侧的所有行都需要准备好读取。

我相信您可以在 GPU 上进行图像缩放，我只是认为您不会获得超并行化的高质量缩放，在这种情况下，在 CPU 上进行可能是您想要的。

如果您正在执行的图像缩放有一些独特的方面*可以*进行严重并行化，并且可以在没有围绕它们的图像数据的情况下平均每行或每组行，那么是的，这将是一个很好的推送到显卡。

# ruby-on-rails - 如何在 simple_form 数字字段中指定小数精度（Rails）

> ID：11400872
> 
> 赞同：17
> 
> 时间：2012-07-09T18:24:07.787
> 
> 标签：ruby-on-rails, decimal, simple-form

所以我在数据库中有一个精度为 2 的小数字段，用于货币。它工作正常，除非最后一个小数位以 0 结尾，即。799.90。当它显示在字段中时，它将改为将其剥离为 799.9。我知道`number_with_precision`，但我无法将那个辅助方法与 simple_form 数字字段一起使用，因为它只需要一个符号和 html 选项作为参数。

然后我想我需要创建一个自定义输入来扩展 simple_form 的默认 number_field，但是语法似乎没有很好的文档记录，所以我无法弄清楚如何调用`number_with_precision`这个自定义的定义输入。

我本质上想[用十进制精度做这个问题Formtastic number field的OP是什么？](https://stackoverflow.com/q/8857770/1459498)想用formtastic。谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-12T23:17:06.103

如果你可以用formtastic来做，根据我的经验，你通常可以用简单的形式来做。试试这个：

```
<%= f.input :sales_price, :input_html => {value: number_with_precision(f.object.sales_price, precision: 2) } %> 
```

如果使用 input_field，则不需要`:input_html`：

```
<%= f.input_field :sales_price, value: number_with_precision(f.object.sales_price, precision: 2) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-27T17:31:41.380

使用输入`step`属性：

```
<input type="number" step="0.01"> 
```

或使用简单形式：

```
<%= f.input :sales_price, input_html: { step: 0.0 } %> 
```

# android - 缩放图像还是让它做 Android？

> ID：11400874
> 
> 赞同：0
> 
> 时间：2012-07-09T18:24:08.947
> 
> 标签：android, android-layout, scale

我的应用程序中有几张图像。我认为我可以在 9patch 中提供所有按钮，但是如果显示尺寸发生变化，则必须调整一个中央图像的大小。所以我想知道在每种显示尺寸下获得正确图像尺寸（和纵横比）的最佳方法是什么。

一个简单的解决方案是：

```
LayoutParams lp = indicator.getLayoutParams();
lp.width = (int) (disW-(disW*0.04));
lp.height = (int) (disW-(disW*0.04));
indicator.setLayoutParams(lp); 
```

如果 displayWidth 为 320px，我的图像的宽度和高度将为 307px。除了缩放图像的质量之外，这工作得很好。但是图像质量可能很差，因为模拟器设备被拉伸了……我很快就会在真实设备上测试它。

另一种可能性是以编程方式缩放图像。为此，我使用[了本教程](http://developer.sonymobile.com/wp/2011/06/27/how-to-scale-images-for-your-android%E2%84%A2-application/)。

但我可以弄清楚如何保持纵横比。这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:27:14.713

您必须在问题中手动更改布局参数。

对于位图，您可以获得它们的宽度和高度属性，因此可以手动保持纵横比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:34:57.517

也许您可以使用`ImageView`和`android::scaleType="fitCenter"`作为`android::src`您的图像？

# jquery - 使用 jquery 向 ul 添加 id 和 class

> ID：11400875
> 
> 赞同：1
> 
> 时间：2012-07-09T18:24:11.637
> 
> 标签：jquery

如何向 div 内的主 ul 添加一个类和一个 id？

```
<div id"navcont">
  <ul>
    <li>One
      <ul>
        <li>Sub One</li>
      </ul>
    </li>
    <li>Two</li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:25:42.670

只需使用子选择器：

```
$('#navcont > ul').addClass('theClass').attr('id', 'theID'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T18:26:15.080

尝试这个：

```
$('#navcont > ul').attr("id", "some-id").addClass("some-class"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T18:26:20.220

```
$("#navcont > ul").addClass("myClass").attr("id", "myId"); 
```

这会将指定的类和 id 添加到所选 div 内的*任何*ul，但前提是该 ul 是 #navcont div 的子级。不会选择任何其他标签内的 ul 标签。如果要定位第一个选定的 ul 标记，可以指定：

```
$("#navcont > ul").eq(0).addClass("myClass").attr("id", "myId"); 
```

这将确保您只选择#navcont 中的第一个 ul。如果您在 div 中可能有多个 ul 标签，您应该考虑要定位哪些标签以及如何处理每个标签。

还要记住，虽然一个类可以多次使用，但 id 对于文档应该是唯一的，不能重复。如果您要处理多个 ul 标签并分配 id，则每个标签都应该是唯一的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T18:26:31.507

您可以为此使用第一个选择器，

```
$("#navcont ul:first") 
```

请注意，这将仅选择 DIv 中的第一个 UL 元素

# objective-c - 使用故事板在 UItableView 中添加 iAd 横幅

> ID：11400876
> 
> 赞同：2
> 
> 时间：2012-07-09T18:24:12.010
> 
> 标签：objective-c, ios, xcode, storyboard, iad

我没有设法让 iAd 在故事板中的 UITableViewController 中工作。

到目前为止，这基本上是我所做的：在故事板中，我在 UITableViewController 的场景底部拖动了一个 iAd 横幅视图。（我无法在视图本身中设置横幅，因为故事板阻止了它。我只能将 iAd 对象拖到第一响应者和 UITableViewController 的图标旁边。）

在 UITableViewController 的标题中，我有：

```
#import <UIKit/UIKit.h>
#import "ListViewController.h"
#import <iAd/iAd.h>

@interface ListViewController : UITableViewController <ADBannerViewDelegate>{
    bool bannerIsVisible;
}

@property (strong, nonatomic) IBOutlet ADBannerView *iAd;

@end 
```

在 UITableViewController 的实现中，我有：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  iAd.delegate = self;
  // iAd.frame = CGRectMake(0.0,200.0,iAd.frame.size.width,iAd.frame.size.height); // does not work
  //  self.tableView.tableFooterView = iAd;   // Display the banner at the middle of the screen (depending upon the number item of the table)

  // Do not know how to have the default banner to appear at the very bottom of the screen (behind the tab bar) when the view is loaded ?

} 

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
  NSLog(@"didFailToReceiveAdWithError");
  if (bannerIsVisible)
  {
    [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
    banner.frame = CGRectMake(0.0,350.0,banner.frame.size.width,banner.frame.size.height);
    [UIView commitAnimations];
    bannerIsVisible = NO;
  }
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
  NSLog(@"bannerViewDidLoadAd");
  if (!bannerIsVisible)
  {
    [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
    banner.frame = CGRectMake(0.0,317.0,banner.frame.size.width,banner.frame.size.height);
    [UIView commitAnimations];
    bannerIsVisible = YES;
  }
} 
```

这个想法是让横幅出现在屏幕底部，并在标签栏上方显示它是横幅加载成功。

我遇到的问题：通过这种配置，我可以看到有时会调用“didFailToReceiveAdWithError”方法，有时会调用“bannerViewDidLoadAd”方法，但在每种情况下都不会显示横幅。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-09T18:25:08.673

我知道我回答得太晚了，但对于那些可能会访问这个帖子来回答的人来说。这可能会帮助他们

在头文件中

```
#import <UIKit/UIKit.h>
#import "ListViewController.h"
#import <iAd/iAd.h>

@interface ListViewController : UITableViewController <ADBannerViewDelegate>

@property (nonatomic, strong) ADBannerView *bannerForTableFooter;
@property (nonatomic) BOOL bannershouldBeVisible;

@end 
```

在 .m 文件中

```
-(ADBannerView *)bannerForTableFooter
{
    if (!_bannerForTableFooter) {
        _bannerForTableFooter = [[ADBannerView alloc] initWithAdType:ADAdTypeBanner];
        _bannerForTableFooter.delegate = self;
    }
    return  _bannerForTableFooter;
} 
```

在 ViewDidLoad

```
self.bannerForTableFooter.backgroundColor = [UIColor clearColor]; 
```

然后添加这些 tableView 数据源方法

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    if (self.bannershouldBeVisible) {
        return self.bannerForTableFooter.frame.size.height;
    }
    else
    {
        return 0;
    }
}

-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    if (self.bannershouldBeVisible) {
        return self.bannerForTableFooter;
    }
    else
    {
        return [[UIView alloc] initWithFrame:CGRectZero];
    }
}

#pragma mark - iAd
-(void)bannerViewDidLoadAd:(ADBannerView *)bannerShown
{
    self.bannershouldBeVisible = YES;
    [self.tableView reloadData];
}

-(void)bannerView:(ADBannerView *)bannerShown didFailToReceiveAdWithError:(NSError *)error
{
    self.bannershouldBeVisible = NO;
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T01:15:20.713

你的问题很常见。它不是由于情节提要而发生，而是由于您使用的是`UITableViewController`. `UITableViewControllers`免费给你很多，但他们确实需要一些东西。其中一个“事情”是他们要求他们的观点是`UITableView`.

你有几个选择。这里有几个首选的。

1) 将您的 iAd 添加为`tableFooterView`. 这需要一些额外的工作才能在滚动时将其保持在屏幕上，如[我对这个问题的回答中所述](https://stackoverflow.com/a/9857798/927947)。

2）将您的`UITableViewController`子类转换为`UIViewController`子类。有趣的是，上面链接的问题的 OP 最终做了什么。本质上，您可以在为 iAd 制作动画时为（现在是子视图）tableView 的框架制作动画。然后它将按预期工作。我[在此答案](https://stackoverflow.com/a/8468144/927947)[中概述了在文件中转换为`UIViewController`子类`.xib`](https://stackoverflow.com/a/8468144/927947)的基本步骤，其中大部分应该适用于您。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-25T13:54:34.437

有更好的方法。从这里： [https ://github.com/romaonthego/RETableViewManager/issues/50](https://github.com/romaonthego/RETableViewManager/issues/50)

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGRect frame = self.iAd.frame;
    frame.origin.y = scrollView.contentOffset.y + scrollView.frame.size.height-_iAd.frame.size.height; // Move view to the bottom on scroll
    self.iAd.frame = frame;
    [scrollView bringSubviewToFront:self.iAd];
} 
```

**更新**。有更好的方法`iAd`在底部显示横幅，因为`iOS7`.

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.canDisplayBannerAds = YES;
...
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-28T17:04:27.813

从 iOS 7 开始，这些东西都不需要了。正如@Shmidt 在他的评论中所暗示的那样，您所要做的一切都`self.canDisplayBannerAds = true`在您的设置中`viewDidLoad`，其他一切都会自动处理。这也适用于 Table Views。

# ruby-on-rails - 覆盖设计注册#create而不复制/粘贴逻辑

> ID：11400877
> 
> 赞同：0
> 
> 时间：2012-07-09T18:24:18.313
> 
> 标签：ruby-on-rails, inheritance, devise

因此，我的应用程序中有自己的注册控制器，它为新注册的用户添加了角色分配

```
class RegistrationsController < Devise::RegistrationsController
  def create
    build_resource
    resource.role = Role.find_by_name('registered')
    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end
end 
```

有没有更简洁的方法可以为这个方法添加功能？我宁愿不必将设计的代码复制/粘贴到我的方法中，以使他们的逻辑与我的逻辑分开。

我想我可以通过回调在模型级别处理它，但我不确定最佳实践是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:26:54.190

最后只是将其重构为回调

```
class User < ActiveRecord::Base
  before_create :set_role

  private
  def set_role
    if self.role.nil?
      self.role = Role.find_by_name('registered')
    end
  end
end 
```

干净多了。完全摆脱了客户设计控制器。

# c# - 如何使用 RestSharp 发布请求

> ID：11400879
> 
> 赞同：45
> 
> 时间：2012-07-09T18:24:26.260
> 
> 标签：c#, windows-phone-7, restsharp

我正在尝试使用 RestSharp 客户端发布请求，如下所示我将身份验证代码传递给以下函数

```
public void ExchangeCodeForToken(string code)
{
    if (string.IsNullOrEmpty(code))
    {
        OnAuthenticationFailed();
    }
    else
    {           
        var request = new RestRequest(this.TokenEndPoint, Method.POST);
        request.AddParameter("code", code);
        request.AddParameter("client_id", this.ClientId);
        request.AddParameter("client_secret", this.Secret);
        request.AddParameter("redirect_uri", "urn:ietf:wg:oauth:2.0:oob");
        request.AddParameter("grant_type", "authorization_code");
        request.AddHeader("content-type", "application/x-www-form-urlencoded");

        client.ExecuteAsync<AuthResult>(request, GetAccessToken);
    }
}

void GetAccessToken(IRestResponse<AuthResult> response)
{
    if (response == null || response.StatusCode != HttpStatusCode.OK
                         || response.Data == null 
                         || string.IsNullOrEmpty(response.Data.access_token))
    {
        OnAuthenticationFailed();
    }
    else
    {
        Debug.Assert(response.Data != null);
        AuthResult = response.Data;
        OnAuthenticated();
    }
} 
```

但我得到了 response.StatusCode = Bad Request。任何人都可以帮助我如何使用 Restsharp 客户端发布请求。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-09T18:47:04.767

我的 RestSharp **POST**方法：

```
var client = new RestClient(ServiceUrl);

var request = new RestRequest("/resource/", Method.POST);

// Json to post.
string jsonToSend = JsonHelper.ToJson(json);

request.AddParameter("application/json; charset=utf-8", jsonToSend, ParameterType.RequestBody);
request.RequestFormat = DataFormat.Json;

try
{
    client.ExecuteAsync(request, response =>
    {
        if (response.StatusCode == HttpStatusCode.OK)
        {
            // OK
        }
        else
        {
            // NOK
        }
    });
}
catch (Exception error)
{
    // Log
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-15T07:59:20.350

这种方式对我来说很好：

```
var request = new RestSharp.RestRequest("RESOURCE", RestSharp.Method.POST) { RequestFormat = RestSharp.DataFormat.Json }
                .AddBody(BODY);

var response = Client.Execute(request);

// Handle response errors
HandleResponseErrors(response);

if (Errors.Length == 0)
{ }
else
{ } 
```

希望这可以帮助！（虽然有点晚了）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-07-24T07:30:52.413

截至 2017 年，我发布到休息服务并从中获得结果：

```
 var loginModel = new LoginModel();
        loginModel.DatabaseName = "TestDB";
        loginModel.UserGroupCode = "G1";
        loginModel.UserName = "test1";
        loginModel.Password = "123";

        var client = new RestClient(BaseUrl);

        var request = new RestRequest("/Connect?", Method.POST);
        request.RequestFormat = DataFormat.Json;
        request.AddBody(loginModel);

        var response = client.Execute(request);

        var obj = JObject.Parse(response.Content);

        LoginResult result = new LoginResult
        {
            Status = obj["Status"].ToString(),
            Authority = response.ResponseUri.Authority,
            SessionID = obj["SessionID"].ToString()
        }; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-09T10:18:46.813

最好在发布您的回复后使用 json，如下所示

```
 var clien = new RestClient("https://smple.com/");
  var request = new RestRequest("index", Method.POST);
  request.AddHeader("Sign", signinstance);    
  request.AddJsonBody(JsonConvert.SerializeObject(yourclass));
  var response = client.Execute<YourReturnclassSample>(request);
  if (response.StatusCode == System.Net.HttpStatusCode.Created)
   {
       return Ok(response.Content);
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-10T14:40:50.630

我添加了这个辅助方法来处理返回我关心的对象的 POST 请求。

*对于 REST 纯粹主义者，我知道，除了状态之外，POST 不应该返回任何东西。但是，我有大量的 id 集合，对于查询字符串参数来说太大了。*

**辅助方法：**

```
 public TResponse Post<TResponse>(string relativeUri, object postBody) where TResponse : new()
    {
        //Note: Ideally the RestClient isn't created for each request. 
        var restClient = new RestClient("http://localhost:999");

        var restRequest = new RestRequest(relativeUri, Method.POST)
        {
            RequestFormat = DataFormat.Json
        };

        restRequest.AddBody(postBody);

        var result = restClient.Post<TResponse>(restRequest);

        if (!result.IsSuccessful)
        {
            throw new HttpException($"Item not found: {result.ErrorMessage}");
        }

        return result.Data;
    } 
```

**用法：**

```
 public List<WhateverReturnType> GetFromApi()
    {
        var idsForLookup = new List<int> {1, 2, 3, 4, 5};

        var relativeUri = "/api/idLookup";

        var restResponse = Post<List<WhateverReturnType>>(relativeUri, idsForLookup);

        return restResponse;
    } 
```

# android - BroadcastReceiver 没有收到 Intent.ACTION_BATTERY_LOW

> ID：11400883
> 
> 赞同：3
> 
> 时间：2012-07-09T18:24:50.683
> 
> 标签：android, service, broadcastreceiver

我写了一个应用程序，当电量 lvl 为 15% 或低时会显示一个对话框。问题是，在一个论坛上，我收到一条消息说它在 Google Nexus S (I9023) 上不起作用。MIUI 2.3.7c。

接收器的代码是（它在清单中注册）：

```
if (intent.getAction().equals(Intent.ACTION_BATTERY_LOW))
    {
        try
        {
            context.startService(myIntent);
        }
        catch(Exception ex){Toast.makeText(context, "Problem with Starting a Service", Toast.LENGTH_LONG).show();}
    } 
```

在服务中，我使用过滤器 Intent.ACTION_BATTERY_CHANGED 注册接收器。服务代码是：

```
...
if (batteryLevel == mLowLevelAlarm)
{
    if (prefView.getBoolean(PREF_LOW_CHARGE_ON, true))
    {
         myIntent = new Intent(MyService.this, BatteryLow.class);
         myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         startActivity(myIntent);
    }
}
... 
```

任何人都可以帮助解决这个问题吗？谢谢

# vba - Dictionary object adding items before .add() is called

> ID：11400898
> 
> 赞同：5
> 
> 时间：2012-07-09T18:25:35.957
> 
> 标签：vba, scripting, dictionary, excel

I am using a dictionary object from the **MS Scripting Runtime library** to store a series of arrays and perform operations on the array cells as necessary. There is a for loop to go through the process of creating all of these entries. My issue is that when using the `.exists` property, it is returning `True` even before the item has been added.

Closer debugging indicates that the key is being added to the dictionary at the beginning of the for loop, even though no `.add` command is used and will not be used until the end of the loop.

I have tried a few different configurations, but here is a simple example that fails:

```
Dim dTotals As Dictionary
Set dTotals = New Dictionary

dTotals.CompareMode = BinaryCompare

For Each cell In rAppID
    If Not dTotals.Exists(cell) Then
    Set rAppIDCells = Find_Range(cell, rAppID)
    Set rAppIDValues = rAppIDCells.Offset(0, 6)
    dAppIDTotal = WorksheetFunction.Sum(rAppIDValues)
    dTotals.Add Key:=cell.Value, Item:=dAppIDTotal
    End If
Next cell 
```

Where each cell contains a string / unique id. At the If statement, the code is returning false, even on the first iteration.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-06T21:19:43.787

I had this problem manifest itself while debugging when I had a watch that attempted to return the "missing" key's item. Actually, further frustrated debugging had the same problem when I literally had a watch for the [scriptingdictonaryObject].exists() condtional); I suggest that the "missing" key is added because of the watch. When I removed the watch and instead created a temporary worksheet to copy the array to while running, the unwanted keys were no longer added.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-27T03:18:51.630

# ruby-on-rails - 执行“rails new APP_NAME”时出错

> ID：11400914
> 
> 赞同：1
> 
> 时间：2012-07-09T18:26:23.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby 1.9.3 和 Rails 3.2.1。

当我执行“rails new UtilitiesApp”时，出现此错误：

```
N:\UtilitiesApp>rails new UtilitiesApp
      create
      create  README.rdoc
      create  Rakefile
      create  config.ru
      create  .gitignore
      create  Gemfile
      create  app
      .
      .
      .
      create  tmp/cache/assets
      create  vendor/assets/javascripts
      create  vendor/assets/javascripts/.gitkeep
      create  vendor/assets/stylesheets
      create  vendor/assets/stylesheets/.gitkeep
      create  vendor/plugins
      create  vendor/plugins/.gitkeep
         run  bundle install
C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb:54
:in `stat': No such file or directory - L:/ (Errno::ENOENT)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/spec_
fetcher.rb:54:in `initialize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:253:in `new'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:253:in `fetch_all_remote_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:234:in `block in remote_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:231:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:231:in `remote_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:165:in `fetch_specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/source.rb:70:in `specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:176:in `block (2 levels) in index'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:175:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:175:in `block in index'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/index.rb:7:in `build'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:174:in `index'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:168:in `resolve'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:107:in `specs'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/definition.rb:102:in `resolve_remotely!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/installer.rb:43:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/installer.rb:8:in `install'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/cli.rb:219:in `install'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor/task.rb:22:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor.rb:263:in `dispatch'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/vendor/thor/base.rb:386:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/bin/bundle:13:in `<main>'
Fetching source index for https://rubygems.org/ 
```

这里发生了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:10:44.407

必须设置**HOMEDRIVE**环境变量

# ruby-on-rails - 如何在：collection 下拉/选择文本字段上设置默认的“选定值”？

> ID：11400915
> 
> 赞同：1
> 
> 时间：2012-07-09T18:26:23.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, collections, simple-form

我试图在下拉/选择文本字段中将某个值设为默认选择的值。我已经尝试了很多选择都无济于事。谁知道如何根据 Profile 模型中的值设置默认值？

```
= f.input_field :state_id,
                :label => "Your state",
                :collection => DataState.all,
                :default =>  [DataState.where(:id => @user.profile.state_id)],
                :style => "width: 110px !important" 
```

我使用 simple_form

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:07:59.127

您是否尝试过使用该`:selected`选项？

尝试更改：

```
:default =>  [DataState.where(:id => @user.profile.state_id)], 
```

为了

```
:selected =>  [DataState.where(:id => @user.profile.state_id)], 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:51:07.853

我认为，您必须提供 ID# 而不是整个对象

试试这个，

```
:default =>  [DataState.where(:id => @user.profile.state_id).id], 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:24:21.563

是的，用这个。有用：

```
:selected =>  [DataState.where(:id => @user.profile.state_id).first.id], 
```

# antlr - 需要 Antlr 多余的谓词吗？

> ID：11400921
> 
> 赞同：1
> 
> 时间：2012-07-09T18:26:42.463
> 
> 标签：antlr, predicate

我有一个文件，我想忽略其中的一部分。在 Lexer 中，我使用门控语义谓词来避免为文件中不感兴趣的部分创建标记。我的规则类似于以下内容。

```
A 
: {!ignore}?=> 'A' 
;
START_IGNORE
: 'foo' {ignore = true; skip();}
;
END_IGNORE
: 'oof' {ignore = false; skip();}
;
IGNORE
: {ignore}?=> . {skip();}
; 
```

但是，除非我将 START 和 END 更改为也使用语义谓词（如下所示），否则它不起作用..

```
A 
: {!ignore}?=> 'A' 
;
START_IGNORE
: {true}?=> 'foo' {ignore = true; skip();}
;
END_IGNORE
: {true}?=> 'oof' {ignore = false; skip();}
;    
IGNORE
: {ignore}?=> . {skip();}
; 
```

为什么我必须添加谓词？

编辑：我正在使用 antlr-3.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:54:38.920

> 为什么我必须添加谓词？

你没有。至少，不使用 ANTLR v3.3。我不知道*您*测试的准确程度，但不要使用 ANTLRWorks 的解释器或 Eclipse ANTLR IDE 插件。总是从命令行做一些小测试。

```
grammar T;

@parser::members {
  public static void main(String[] args) throws Exception {
    TLexer lexer = new TLexer(new ANTLRStringStream("A foo A B C oof A"));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    parser.parse();
  }
}

@lexer::members {
  private boolean ignore = false;
}

parse
 : (t=. 
     {System.out.printf("[\%02d] type=\%s text='\%s'\n", $t.getCharPositionInLine(), tokenNames[$t.type], $t.text);}
   )* EOF
 ;

A 
 : {!ignore}?=> 'A' 
 ;

START_IGNORE
 : 'foo' {ignore = true; skip();}
 ;

END_IGNORE
 : 'oof' {ignore = false; skip();}
 ;

IGNORE
 : {ignore}?=> . {skip();}
 ;    

SPACE
 : ' ' {skip();}
 ; 
```

像这样运行它：

```
java -cp antlr-3.3.jar org.antlr.Tool Tg
javac -cp antlr-3.3.jar *.java
java -cp .:antlr-3.3.jar TParser
```

这将打印以下内容：

```
[00] 类型=A 文本='A'
[16] 类型=A 文本='A'
```

即：从输入`"A foo A B C oof A"`以下：`"foo A B C oof"`是`skip`ped。

# vba - UInt64 - 不支持自动化类型

> ID：11400922
> 
> 赞同：0
> 
> 时间：2012-07-09T18:26:45.160
> 
> 标签：vba, sha512

我正在尝试在 VBA、Excel 2003 上实现 SHA512 算法。

这是我使用的基础： http: [//www.saphir2.com/sphlib/](http://www.saphir2.com/sphlib/)

我在 VBA 中使用 UInt64 (unsigned long) 时遇到问题。以下代码引发错误：`Variable Uses an Automation Type Not Supported`.

```
Sub Main()
       Dim notworking As UInt64
End Sub 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:36:14.417

vba 不支持无符号整数数据类型。我想你可能有一个用于 vb.net 的库。

# jasper-reports - JasperReports：即席、深入报告？

> ID：11400923
> 
> 赞同：0
> 
> 时间：2012-07-09T18:26:49.340
> 
> 标签：jasper-reports

我已经看到了一些关于*JasperReports*的向下钻取报告的问题。我正在尝试通过*Ad Hoc* JR 报告提供此功能。

目标是使用交互式图表或图像来引导移动特定数据表和/或链接回 Web 应用程序中的数据或页面。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:58:22.077

通过 Jasper Reports Server Pro 仅在交叉表报表上支持向下钻取，而表格报表不支持此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:00:10.700

基于 Web 的 Ad Hoc 报表设计器无法定义超链接以进行深入研究。您需要在 iReport 中编辑报告以添加类似的超链接。

# vb.net - vb.net 中从和到日期的自定义验证？

> ID：11400928
> 
> 赞同：0
> 
> 时间：2012-07-09T18:27:28.257
> 
> 标签：vb.net, date-format, customvalidator, custom-validators

我正在 vb.net 中开发 Web 应用程序，使用自定义验证如何验证起始日期和截止日期..

我需要验证 asp 中的日期：文本框中的日期应该是“dd/mm/yyyy”格式，并且我有两个日期，例如 from date 和 Todate。所以Todate不应该比开始日期少，谁能帮帮我，

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:53:55.653

这是 VB.Net 的做法。您可以修改它以适应 asp.net

```
Dim date1 As DateTime = "01/01/2000"
Dim date2 As DateTime = "07/09/2012"

Dim myDate As DateTime = InputBox("Date?")

If myDate >= date1 AndAlso myDate <= date2 Then
  MsgBox("Between")
Else
  MsgBox("Not between")
End If 
```

# c# - WCF REST 安全模拟

> ID：11400930
> 
> 赞同：1
> 
> 时间：2012-07-09T18:27:52.250
> 
> 标签：c#, wcf, security

我在 IIS7 中设置了启用 Windows 身份验证的网站。

我的服务中有 3 种方法，2 种方法需要 Windows 身份验证，1 种不需要。不使用的那个

```
[OperationBehavior(Impersonation = ImpersonationOption.Allowed)] 
```

其他 2 个正在使用

```
[OperationBehavior(Impersonation = ImpersonationOption.Required)] 
```

我的 web.config 看起来像：

```
<system.webServer>
<modules runAllManagedModulesForAllRequests="true">
  <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</modules>
<security>
  <authentication>
    <anonymousAuthentication enabled="true"/>
    <windowsAuthentication enabled="true" />
  </authentication>
</security>

 </system.webServer>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
          <serviceAuthorization impersonateCallerForAllOperations="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true" defaultOutgoingResponseFormat="Json" maxBufferPoolSize="2147483647"
                          maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" transferMode="Streamed">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </standardEndpoint>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

当我运行尝试执行设置为允许的方法并且我没有传递任何凭据时，它会失败并出现未经授权的错误。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:13:20.430

使用时仍需提供凭据 `[OperationBehavior(Impersonation = ImpersonationOption.Allowed)]`

[允许：如果凭据可用且 ImpersonateCallerForAllOperations 等于 true，则执行模拟。](http://msdn.microsoft.com/en-us/library/system.servicemodel.impersonationoption%28v=vs.90%29.aspx)

您是否尝试过将 ImpersonateCallerForAllOperations 设置为 false？

# objective-c - 按下按钮播放嵌入的 youtube 视频

> ID：11400931
> 
> 赞同：1
> 
> 时间：2012-07-09T18:28:05.130
> 
> 标签：objective-c, ios, cocoa-touch, youtube, youtube-api

是否可以在您的应用程序中嵌入 youtube 视频，而不是向用户显示可以触摸的预览缩略图，而是显示一个标准 UIButton，在触摸时将视频直接加载到实际的 youtube 播放器中。用户单击完成后，控件将返回到我的应用程序（就像嵌入式 web 视图一样）这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:33:41.857

使用 youtube 自定义 URL 方案。从[这里阅读](http://developer.apple.com/library/safari/#featuredarticles/iPhoneURLScheme_Reference/Articles/YouTubeLinks.html#//apple_ref/doc/uid/TP40007895-SW1)

例如

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=VIDEO_IDENTIFIER"]]; 
```

这种方法将带你离开你的应用程序并打开原生 Youtube 应用程序。我认为 youtube 播放器[选项](https://developers.google.com/youtube/player_parameters)中没有任何东西可以隐藏缩略图。对于不点击 UIWebView 的自动播放，请阅读[this](https://stackoverflow.com/questions/3010708/youtube-video-autoplay-on-iphones-safari-or-uiwebview) 和[this的](https://stackoverflow.com/questions/10385791/youtube-video-autoplay-inside-uiwebview)[答案](https://stackoverflow.com/questions/8141652/youtube-embeded-video-autoplay-feature-not-working-in-iphone)

# javascript - javascript获取页码以添加到锚标记中的href

> ID：11400935
> 
> 赞同：0
> 
> 时间：2012-07-09T18:28:25.557
> 
> 标签：javascript, html, anchor, hyperlink

我正在使用kentico 制作网站。在 kentico 中，我使用中继器来构建不同的页面。我的网站设置为显示 6 个左右的缩略图，如果您从主页单击缩略图，它会将您带到相应的子页面。我如何设置它是有一个全局变量并在每个缩略图加载后`i`加 1 。`i`这很有效，因此我们可以专注于链接本身的语法。我希望能够让 url 类似于 `page.com/page/subpage?1`数字 1 是变量的地方`i`。**我不太清楚如何将此（javascript）合并到 href 声明中。有没有办法做到这一点？**

我试过了： `<a href="/subpage?page= <script> type='text/javascript'>document.write(i);</script>">`我试着查找这个，但我找不到任何帮助的信息。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:35:37.573

您不能将脚本标签放在另一个标签的中间。相反，使用脚本编写整个锚标记。注意未转义的引用。

```
<script type='text/javascript'>
    document.write( "<a href='/subpage?page=" + i + "' > Link </a>" );
</script> 
```

# c# - File.Exists 由 tesseract 创建时为 false

> ID：11400937
> 
> 赞同：0
> 
> 时间：2012-07-09T18:28:33.163
> 
> 标签：c#, captcha, tesseract

我使用 tesseract 从验证码图像中获取文本。我使用此代码

```
Process p = new Process();
p.StartInfo.FileName = Server.MapPath("~/app/tesseract.exe");
p.StartInfo.Arguments = imgSavePath + " " + txtSavePath;
p.Start();
p.WaitForExit();
bool exist = File.Exists(txtSavePath); 
```

**txtSavePath**是在 Windows 资源管理器中创建的，我可以打开它并阅读其中的文本。但是**存在**变量是**false**。太奇怪了。谁能告诉我为什么？如何使用**StreamReader**读取创建文件中的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:10:55.633

Tesseract 将“.txt”扩展名附加到输出文本文件；所以在你的情况下，它应该是：

```
bool exist = File.Exists(txtSavePath + ".txt"); 
```

# html - 静音 HTML 5 视频和随机视频加载

> ID：11400939
> 
> 赞同：0
> 
> 时间：2012-07-09T18:28:36.103
> 
> 标签：html, audio, video, random, mute

三部分问题...

我在我的网站上使用[http://syddev.com/jquery.videoBG/index.html](http://syddev.com/jquery.videoBG/index.html)作为 HTML 5 视频背景。完美运行！但是我有一些额外的功能我想添加，但不太确定如何实现它。

1_ 我想添加一个按钮来静音/取消静音。我不擅长 jquery，所以我正在寻找的是我需要添加到现有代码中以实现它，以及我需要放在我想要实际按钮去的地方的东西。我猜我需要添加一些静音选项...

```
 $('.bg').videoBG({
    position:"fixed",
    zIndex:0,
    mp4:'_video/ClimbBG.mp4',
    ogv:'_video/ClimbBG.ogv',
    webm:'_video/ClimbBG.webm',
    poster:'_images/ClimbBG.jpg',
    opacity:1,
    fullscreen:true,

}); 
```

然后在我想要按钮的地方有一些功能/代码？

2_我希望每次加载网站时都有不同的随机视频加载。甚至可能在第一个完成后播放新的视频？示例...此站点在页面刷新时加载不同的视频 (cabine-time.com)

3_ 不是很重要，但我注意到很多使用视频背景的人在视频中都有小点（cabin-time.con 就是一个例子）。我猜这是为了减小文件大小？最有可能在 Final Cut 中完成？如何将其添加到我的视频中，它真的可以减小文件大小吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:52:38.840

不幸的是，VideoBG 不支持静音，所以你不能只是'添加静音选项'，你需要自己制作。

这里有一些让你开始的要点，编辑 videoBG.js，添加一个“静音”属性（[http://syddev.com/jquery.videoBG/jquery.videoBG.js](http://syddev.com/jquery.videoBG/jquery.videoBG.js)）

```
......
// video element
    var $video = $('<video/>');
    $video.css('position','absolute')
        .css('z-index',options.zIndex)
        .attr('poster',options.poster)
        .attr('muted',options.muted)
        .css('top',0)
        .css('left',0)
        .css('min-width','100%')
        .css('min-height','100%');
 .......
 // these are the defaults
$.fn.videoBG.defaults = {
        mp4:'',
        ogv:'',
        webm:'',
        poster:'',
        autoplay:true,
        loop:5,
        sclae:false,
        position:"absolute",
        opacity:1,
        textReplacement:false,
        zIndex:0,
        width:0,
        height:0,
        muted:false 
```

现在您可以添加`muted:true`到您的属性

# html - 如何将这两个放在同一行？（一个居中，一个右对齐）

> ID：11400942
> 
> 赞同：0
> 
> 时间：2012-07-09T18:28:42.360
> 
> 标签：html, css

我正在尝试将两组不同的文本对齐到同一行。

```
<h2 style="text-align:center">Only $4 for first-class shipping on all orders!</h2><span style="text-align:right">test</span>​ 
```

我试图让这些在同一条线上。我以为跨度标签做到了，但事实并非如此。当我把它放在一个 div 中时，它会下降一行，我需要它在同一行上。

[http://jsfiddle.net/MWDxC/](http://jsfiddle.net/MWDxC/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:32:36.563

您需要将 display:inline 放在该 H2 标记上，因为它是默认的块元素。

[http://jsfiddle.net/MWDxC/2/](http://jsfiddle.net/MWDxC/2/)

或者您可以将整个跨度标签移动到 H2 内，这样也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:35:02.480

您需要一个包装元素，更改显示并设置一个浮点数。然后它将起作用。

```
<div style="text-align:center;">
  <h2 style="display:inline;" >Only $4 for first-class shipping on all orders!</h2>
  <span style="float:right; display:block;">test</span>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:35:56.533

如果你想保持`<h2>`居中和`<span>`右边 - [http://jsfiddle.net/MWDxC/3/](http://jsfiddle.net/MWDxC/3/)

```
<header>
    <h2>Only $4 for first-class shipping on all orders!</h2>
    <span>test</span>
</header>

header {
    position: relative;
}

h2{
    text-align: center;
}

span {
    position: absolute;
    right: 0;
    top: 0;
} 
```

# r - 在 R 中读取大数据和逻辑回归

> ID：11400943
> 
> 赞同：3
> 
> 时间：2012-07-09T18:28:42.407
> 
> 标签：r, bigdata, regression, logistic-regression, read.table

情况：1GB CSV 文件，100000 行，4000 个自变量，1 个因变量。R 在 Windows Citrix 服务器上，具有 16GB 内存。

问题：我花了2个小时！去做：

```
read.table("full_data.csv", header=T, sep",") 
```

glm 进程崩溃，程序没有响应，我必须在任务管理器中将其关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:18:55.980

我经常求助于包`sqldf`在内存中加载大的 .csv。一个好的指针就[在这里](https://stackoverflow.com/a/1820610/986817)。

# c# - 访问 List 的数组元素在 foreach 循环中

> ID：11400945
> 
> 赞同：5
> 
> 时间：2012-07-09T18:28:53.397
> 
> 标签：c#, object, foreach

这就是我所拥有的：

```
List<object[]> markers = new List<object[]>();

object[] marker = new object[2];
marker[0] = new Vector2(1, 2);
marker[1] = new Vector4(1, 2, 3, 4);
markers.Add(marker);

foreach (var item in markers)
{
    int x = (Vector2)item[0].X; // Error: 'object' does not contain a definition
                                // for 'X' and no extension method 'X' accepting
                                // a first argument of type 'object' could be
                                // found (are you missing a using directive or
                                // an assembly reference?)
    // other stuff
} 
```

有没有办法在不失去代码可读性的情况下完成这项工作，或者我应该尝试使用类而不是对象数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:30:14.077

您需要这样做（运算符优先级问题）

```
((Vector2)item[0]).X; 
```

但是我不认为在同一个数组中有不同的对象类型是一个好习惯。这就是引入泛型 List 的原因（ArrayList 缺乏类型安全性）。

您的代码正在尝试执行以下操作：

```
ArrayList vectors = new ArrayList { new Vector2(22, 33), new Vector4(223, 43, 444, 33}}; 
```

这是在 .Net 2.0 之前。这引起了一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:33:45.567

我会编写类而不是使用内置结构`Vector2`，`Vector4`并让它们实现一个通用接口。这使您可以在声明数据结构时使用特定类型，而不是使用 type `object`。

尝试这样的事情：

```
public class MyVector2 : IVector {

    //...
}

public class MyVector4 : IVector {

    //...
}

public interface IVector {

} 
```

然后声明你的结构如下：

```
List<IVector> list = new List<IVector>();
IVector[] arr = new IVector[someSize]; 
```

如果类型`Vector2`和`Vector4`是一些自定义类型而不是`System.Windows.Vector2`和`System.Windows.Vector4`from 您可以对它们进行子类化并按照上述相同的方式进行操作：

```
public class MyVector2 : Vector2, IVector {

}

public class MyVector4 : Vector4, IVector {

} 
```

只是一个提议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:35:17.847

如果您使用的是 .NET 4 并且不想创建新类，则可以使用 Tuple：

```
List<Tuple<Vector2, Vector4>> markers = new List<Tuple<Vector2, Vector4>>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T18:35:19.857

你在做什么是可怕的。你为什么不编程到一个接口并遍历它的列表。那么你就不需要演员了，你可以根据你的合同做其他事情。在这种情况下，您并不真正知道哪个对象是vector2 或vector4。好吧，您可以找出来，但这真的很难看。

这将更加灵活、可扩展和可维护。我真的不知道你在做什么，但我会接受这个。

我会做如下事情：

```
interface IVector<T>
{
   List<T> Someobjectcollections
   void YourCommonOperation()

}

class Vector2 : IVector<Vector2>
{
 // override

}

class Vector4 : IVector<Vector4>
{
   // override
}

List<IVector> markers = new List<IVector>();

...

foreach (var item in markers)
{ 
     items.commonoperation();

      ....
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T18:36:57.037

您绝对应该重构它以使用类。基本上，您需要一个标记列表，每个标记可以包含一个或多个包含一个或多个数字的向量。这是在不使用继承的情况下实现它的简单方法：

```
public class Marker
{
    public List<Vector> { get; set; }
}

public class Vector
{
    public int[] Numbers { get; private set; }

    public Vector(params int[] numbers)
    {
        Numbers = numbers;
    }
} 
```

然后，您可以简单地使用`List<Marker>`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-09T19:29:47.273

我决定和 Tuple 一起去。感谢后来删除答案的海报的想法。你的英勇事迹将被铭记。

编辑：必须更改`Vector4`为`Color`（alpha 通道始终为 255）。

结果：

```
// declaration
List<Tuple<Vector2, Color>> markers = new List<Tuple<Vector2, Color>>();

// adding items
Tuple<Vector2, Color> marker = new Tuple<Vector2, Color>(
    new Vector2(x, y), Color.FromNonPremultiplied(250, 200, 150, 100));       
markers.Add(marker);

// retrieving item values
foreach (var item in markers)
{
    int x = item.Item1.X;
    int y = item.Item1.Y;
    Color mycolor = item.Item2;
} 
```

它可以工作，但我还没有测试 CPU 效率，如果这被证明比其他建议的解决方案慢，我会考虑使用它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T18:34:59.860

这里可能是一个很好的起点：

```
public class Markers
{
    public Vector2 V2 { get; set; }
    public Vector4 V4 { get; set; }

    public Markers() {}
} 
```

# mysql - SQL 选择计数超过一个喜欢

> ID：11400946
> 
> 赞同：2
> 
> 时间：2012-07-09T18:28:56.313
> 
> 标签：mysql, sql

如果它是一个计数条件，我知道如何让它工作。如何使其适用于多种条件？

```
SELECT count(TableName.DeviceName where DeviceName like 'AR%' ) as DEVICE_Type_A,
       count(TableName.DeviceName where DeviceName like 'R%' ) as DEVICE_Type_B,
       count(TableName.DeviceName where DeviceName like 'P%' ) as DEVICE_Type_C,
       count(TableName.DeviceName where DeviceName like 'AM%' ) as DEVICE_Type_D,
  FROM DB.TableName TableName
 WHERE TableName.DURATIONMIN > '180' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T18:50:02.237

你应该使用case语句！

```
SELECT count(case when DeviceName like 'AR%' then 1 end) as DEVICE_Type_A,
       count(case when DeviceName like 'R%' then 1 end) as DEVICE_Type_B,
       count(case when DeviceName like 'P%' then 1 end) as DEVICE_Type_C,
       count(case when DeviceName like 'AM%' then 1 end) as DEVICE_Type_D
FROM DB.TableName TableName
WHERE TableName.DURATIONMIN > '180' 
```

我留下了计数。就个人而言，我认为“总和”更清楚：

```
SELECT sum(case when DeviceName like 'AR%' then 1 else 0 end) as DEVICE_Type_A,
       sum(case when DeviceName like 'R%' then 1 else 0 end) as DEVICE_Type_B,
       sum(case when DeviceName like 'P%' then 1 else 0 end) as DEVICE_Type_C,
       sum(case when DeviceName like 'AM%' then 1 else 0 end) as DEVICE_Type_D
FROM DB.TableName TableName
WHERE TableName.DURATIONMIN > '180' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:32:38.597

您应该使用子选择：

```
SELECT 
    (SELECT count(*) form TableName.DeviceName where DeviceName like 'AR%' ) as DEVICE_Type_A,
    (SELECT count(*) from TableName.DeviceName where DeviceName like 'R%' ) as DEVICE_Type_B,
    (SELECT count(*) from TableName.DeviceName where DeviceName like 'P%' ) as DEVICE_Type_C,
    (SELECT count(*) from TableName.DeviceName where DeviceName like 'AM%' ) as DEVICE_Type_D,
FROM DB.TableName TableName
WHERE TableName.DURATIONMIN > '180' 
```

# php - 为特定帖子创建投票投票 wordpress

> ID：11400948
> 
> 赞同：1
> 
> 时间：2012-07-09T18:29:00.067
> 
> 标签：php, mysql, wordpress

我一直在寻找一个插件，尝试了很多我发现接近我要求的唯一插件是 WTI LIKE POST 。现在它具有为特定类别创建投票的选项，例如在其中排除选项。我希望仅为特定帖子做类似的事情。就像对我选择的特定帖子进行投票一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:34:54.780

试试 Wp 投票。您可以根据要求自定义相同的内容：

[http://wordpress.org/extend/plugins/wp-polls/](http://wordpress.org/extend/plugins/wp-polls/)

# android - HTTP Post 延迟到联机

> ID：11400950
> 
> 赞同：0
> 
> 时间：2012-07-09T18:29:24.563
> 
> 标签：android, service, http-post, offline

当有网络连接时，我目前拥有的代码成功地将数据提交到数据库。我的应用程序是一款可以在户外使用的应用程序，经常在手机服务很差的地方使用。

我的问题是在有活动网络连接之前延迟 HTTP Post 的最佳方法是什么？如果连接可用时没有警告连接，我应该创建一个运行的服务吗？传输的数据很小，大约一千字节，所以我可以让应用程序存储它，直到设备在线，然后提交数据。这看起来可行吗？

另一个更糟糕的选择是让应用程序存储数据并在每次启动时检查是否有任何数据仍在等待提交以及提交数据的活动连接。

我目前必须提交数据的代码如下。如果您对此有任何建议，也将非常受欢迎。

```
String setPost(Context context)
{

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(context.getResources().getString(R.string.url)); 

    try
    {
        List<BasicNameValuePair> nameValuePairs = new ArrayList<BasicNameValuePair>(22);

        nameValuePairs.add(new BasicNameValuePair("month", "7"));

        ... etc ...

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);

        InputStream is = response.getEntity().getContent();
        BufferedInputStream bis = new BufferedInputStream(is);
        ByteArrayBuffer baf = new ByteArrayBuffer(20);

        int current = 0;

        while ((current = bis.read()) != -1)
        {
            baf.append((byte)current);
        }

        Toast.makeText(context, "thank you for submitting!", Toast.LENGTH_LONG).show();

        return new String(baf.toByteArray());

    }
    catch (ClientProtocolException e)
    {
        Log.e(this.toString(), "fail: " + e);
        Toast.makeText(context, "submission failed :(\n please report the error below to developer\n" + e.toString(), Toast.LENGTH_LONG).show();
        return ("fail: " + e);
    }
    catch (IOException e)
    {
        Log.e(this.toString(), "fail: " + e);
        Toast.makeText(context, "submission failed :(\n please report the error below to developer:\n" + e.toString(), Toast.LENGTH_LONG).show();
        return ("fail: " + e);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:49:19.850

> 如果连接可用时没有警告连接，我应该创建一个运行的服务吗？

是的。使用 an`IntentService`来处理所有网络请求。当一个`Activity`想要上传/下载任何东西时，它会将其请求传递给`IntentService`. 如果没有网络连接，则请求排队并`IntentService`自行终止。

还要在 mainifest 中创建一个`BroadcastReceiver`注册的“侦听”网络连接更改。如果更改为“已连接”状态，它应该启动`IntentService`处理任何排队的网络请求并再次自行终止。

根据我的经验，它很有效并且效果很好。

# cloud-foundry - 在 cloudfoundry 中运行 rake 命令

> ID：11400952
> 
> 赞同：0
> 
> 时间：2012-07-09T18:29:39.473
> 
> 标签：cloud-foundry

我正在使用 cloudfoundry 部署 rails 3.1 应用程序。有没有办法运行常见的 rake 命令，例如 rake db:reset？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:32:10.810

这是他们论坛上的一个类似问题：http: [//support.cloudfoundry.com/entries/20160007-anyway-to-run-rake-db-seed-for-rails-app](http://support.cloudfoundry.com/entries/20160007-anyway-to-run-rake-db-seed-for-rails-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:43:58.840

您还可以推送应用程序的另一个实例，有目的地将应用程序类型设置为“独立”并绑定到相同的服务。然后将提示您运行命令，您可以将其设置为：

```
bundle exec rake VERBOSE=true QUEUE=default resque:work 
```

这个例子启动了一个 Resque worker，但是你可以很容易地启动一个不同的任务。

# android - Android dex 一个 JAR 文件，其中包含额外的非 .java 文件

> ID：11400960
> 
> 赞同：2
> 
> 时间：2012-07-09T18:30:14.623
> 
> 标签：android, build, jar, dex

我有一个 JAR 库，其中包含几个不同`/src`包中的一些非源代码文件（在这种情况下为 JSON 文件）当我将该 JAR 添加为对我的一个 Android 项目的依赖项并构建 apk 文件时，这些 JSON 文件不在apk 或 classes.dex（我跑了`dex2jar`，发现文件丢失了）

我怎么知道`dex`在输出中也包含这些 json 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:42:45.513

AFAIK，dex 文件仅用于保存 .class 文件（和字符串）。这是 dex 文件格式的（旧）描述。（我在谷歌的网站上找不到）[http://retrodev.com/android/dexformat.html](http://retrodev.com/android/dexformat.html)

当 google 在编译时解析你的依赖 jar 时，它只关注 .class 文件，因为这就是依赖的用途——你想在你的代码中使用的类，这些类没有在你的代码中定义。我不确定它是否会注意你在那些罐子里可能有的任何其他东西。

您要问的问题不是如何告诉 dex 包含 json 文件（它不能），而是如何将这些 json 文件放入您的 apk。不幸的是，如果它们存储在一个罐子里，我不知道有什么办法可以做到这一点，除非在 ant 中设置一些东西来手动解压罐子并自己移动文件。编译时 jar 依赖项并非旨在简单地将文件复制到项目包中。

# c# - 计时器的资源量有多大？

> ID：11400964
> 
> 赞同：5
> 
> 时间：2012-07-09T18:30:40.237
> 
> 标签：c#, timer

我正在运行这样的计时器：

```
 private void InitializeTimer()
    {
        Timer myTimer = new Timer();
        myTimer.Interval = 3000;
        myTimer.Enabled = true;
        myTimer.Tick += new EventHandler(TimerEventProcessor);
        myTimer.Start();
    } 
```

它将每 3 秒触发一次事件。我认为该事件不是很重，它是从文件中读取文本，将文本长度与文本框中的文本进行比较，如果文本框有更多字符，则会替换框中的文本。

但是计时器的资源量有多大？每 3 秒从文件中读取文本是不是一个坏主意（该文件是纯文本的日志文件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:34:12.603

Timer 是相当轻量级的，尽管它确实取决于您使用的计时器类型。每 3 秒触发一次计时器可能没什么大不了的，但如果您使用的是 Windows 窗体计时器，请确保您的 Tick 事件处理程序没有进行任何重要的处理，因为它发生在 UI 线程中。（例如，使用[`FileInfo.Length`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.length.aspx)而不是“读取”文件等来检查文件长度）

话虽如此，对于监视日志文件中的更改，[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)可能比使用计时器并不断地重新读取文件要好。除了在文件更改时立即通知您之外，它还可以让您不必不断地阅读文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:46:25.547

我认为它会像你制作的`TimerEventProcessor`处理程序一样重。虽然这`FileSystemWatcher`似乎是答案，但并非总是如此。我的建议是，在处理此处理程序之前，停止计时器并在处理完代码后重新启动它。

# java - 选择更新许多值的更好解决方案

> ID：11400968
> 
> 赞同：0
> 
> 时间：2012-07-09T18:30:55.690
> 
> 标签：java, mysql, database-design

我想根据不同情况更新列中的一些值.....该表具有以下详细信息，例如.....

```
 Date               date
                    period             int
                    subcode            varchar(3)
                    status_bits        varchar(100)
                    // status bits resemble an information based code based...the data usually stored are  2343211 where each value in digits represent an information..... 
```

***现在我必须根据不同的日期和时期更新这些值......现在考虑`java program`......***

我已将详细信息存储在java中的相应变量中，例如..

```
 java.util.Date date[];
                   int period[];
                   String subcode[];

                   // Here for an index i , they share the same values within a row..... 
```

如果我想以这样一种方式更新它，即我想为不同的日期、句点和子代码（组合）更改 varchar 中的第 5 个字母......现在..我目前的表现是这样的......

```
 Connection con;
     preparedStatement ps;
     String bitstatus;

     for(i=0; i < noofupdates; i++)
     {
           ps = con.prepareStatement("select status_bits from tablename where Date = ? AND period = ? AND subcode = ? limit 0,1");
           ps.setDate(1,date[i]);
           ps.setInt(2,period[i])'
           ps.setString(3,subcode[i]);

           rs=ps.executeQuery();
           while(rs.next())
           {

                 bitstatus = rs.getString(1);
                 // performed operation to update the bit.....
                 ps=con.prepareStatment("update status_bits correspondind to the same date,field and subcode");

                 ps.executeUpdate();
           }

     } 
```

**现在我假设您从程序中了解到我想根据位操作常见的不同日期和期间更新表中的 status_bits** ......现在我真的知道这些方法正在敲大量查询并严重影响mysql 性能...所以请通过提供一个替代想法来帮助我......有大约 1000 条记录要更新......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:35:34.800

您首先从数据库中读取一些数据（status_bits），然后根据检索到的记录数多次调用多个数据库。

相反，您为什么不编写一个存储过程，它将日期、期间和子代码作为参数并在 SP 本身中执行整个逻辑？

这样你就只有 1 个 DB 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:47:09.370

如果您知道要将 status_bits 字符串的第 5 位设置为给定（日期、期间、子代码）的特定值，则可以避免 SELECT 并仅执行更新。

**更新：**为了正确处理 status_bits 列中的现有值小于 4 个字符的情况，我们要确保在现有字符串只有 1 个字符长时替换第 5 个字符，而不是第 2 个字符。我们可以使用 CASE 表达式来进行测试。当我们至少有 4 个字符时，我们可以在前四个字符之后附加我们的（所需的）第 5 个字符。否则，我们需要将现有字符串“填充”为 4 个字符，然后再添加（所需的）第 5 个字符。（以前，该语句仅包含适用于长度至少为 4 个字符的现有字符串的表达式。）

```
UPDATE tablename
   SET status_bits = 
       CASE WHEN CHAR_LENGTH(status_bits >= 4
         THEN CONCAT(LEFT(status_bits,4), ?, SUBSTR(status_bits,6))
         ELSE CONCAT(RPAD(status_bits,4), ? )
         END
 WHERE `Date` = ? AND period = ? AND subcode = ? 
```

（如果不想更新所有匹配的行，可以添加 LIMIT 子句，但如果要更新所有匹配的行，则不需要。如果`(date,period,subcode)`是唯一的，则最多匹配一行。）

也可以根据其他条件设置 status_bits 的第 5 个位置，例如，通过将谓词添加到 where 子句或 SET 中的 CASE 表达式（或 IF 函数）。

```
UPDATE tablename
   SET status_bits = CONCAT(LEFT(status_bits,4)
                     , IF(SUBSTR(status_bits,1,1 = '1', ?, SUBSTR(status_bits,5,1))
                     , SUBSTR(status_bits,6))
 WHERE `Date` = ? AND period = ? AND subcode = ? 
```

相当于：

```
UPDATE tablename
   SET status_bits = CONCAT(LEFT(status_bits,4), ?, SUBSTR(status_bits,6))
 WHERE `Date` = ? AND period = ? AND subcode = ? 
   AND SUBSTR(status_bits,1,1) = '1' 
```

这种方法将您正在运行的查询数量减少一半（减少到数据库的往返次数）并避免您必须返回整个`status_bits`列。

（不幸的是，替换 varchar 列的第 5 个字符的 SQL 文本有点笨拙，因为 MySQL 没有`STUFF`SQL Server 提供的更紧凑的功能。）

* * *

**更新：**处理长度小于 4 个字符的现有 status_bits 字符串需要更复杂的表达式...）

```
UPDATE tablename
   SET status_bits = 
       CASE WHEN CHAR_LENGTH(status_bits) >= 4
            THEN CONCAT(LEFT(status_bits,4), ? , SUBSTR(status_bits,6))
            ELSE CONCAT(RPAD(status_bits,4,' '), ? )
       END
 WHERE `Date` = ? AND period = ? AND subcode = ? 
```

注意：在该 SQL 语句中，要放置在第 5 个位置的字符的值需要在两个单独的位置参数中提供。

笔记：

# javascript - Javascript JSON 语法

> ID：11400973
> 
> 赞同：1
> 
> 时间：2012-07-09T18:31:20.090
> 
> 标签：javascript

您好我正在尝试创建一个 JSON 文件，我想在其中存储不同文件的一些数据。问题是我无法弄清楚正确的语法。这是我到目前为止所拥有的：

```
var object = {
    "id-1" :[
                {
                    "type":"Corporate Website",
                    "tech":"HTML" ,"CSS" , "Javascript/jQuery"

                }
            ], 
    "id-2" :[

             ]
} 
```

我似乎在“技术”处遇到错误。如果这不是正确的，我该如何枚举多个元素？对于我在短时间内使用 javascript 的菜鸟问题，我感到很抱歉，但我仍然对语言。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T18:32:53.227

```
{
"id-1": [
    {
        "type": "Corporate Website",
        "tech": [
            "HTML",
            "CSS",
            "Javascript/jQuery"
        ]
    }
],
"id-2": []
} 
```

请注意“tech”的类似数组的语法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T18:32:31.237

Tech 应该是一个数组（括在方括号中）：

```
"tech": ["HTML", "CSS", "Javascript/jQuery"] 
```

来源：

> 数组是值的有序集合。数组以 [（左括号）开头，以 ]（右括号）结尾。值用 ,（逗号）分隔。

*   [http://www.json.org/](http://www.json.org/)

# c# - 如何通过 C++ 和 C# 中的键盘立即按下将来自用户的数据存储在我的变量中（不按回车键）

> ID：11400976
> 
> 赞同：0
> 
> 时间：2012-07-09T18:32:00.147
> 
> 标签：c#, c++, input

我不知道这是否可能是一个已经回答的问题，如果我想制作一个触摸打字程序，它应该是按键敏感的，我的意思是，每次我按下一个键，它都会与我的文本进行比较正在写。

现在我不能只做这样的事情：cin >> something; 或 Console.ReadLine(something); 在我按下回车键之前，这些都不起作用，这是我不想要的..

如何在 C++ && C# 中按照我想要的方式使输入工作？

ThanX 提前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:40:43.143

```
#include <iostream>
#include "conio.h"

using namespace std;

int main()
{
    char c;
    getch(c);
    cout << endl << c << endl;

    return 0;
} 
```

我相信 conio.h 已被弃用，但 getch() 是获得无缓冲、无回声字符按压的最简单方法之一。我在我制作的许多游戏中都使用过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:41:35.627

对于 C#：

尝试使用`Console.ReadKey`“获取用户按下的下一个字符或功能键”。

您可以查看 msdn 示例：

[http://msdn.microsoft.com/en-us/library/471w8d85.aspx](http://msdn.microsoft.com/en-us/library/471w8d85.aspx)

# image-processing - 如何用openCV检测圆圈组？

> ID：11400980
> 
> 赞同：1
> 
> 时间：2012-07-09T18:32:25.003
> 
> 标签：image-processing, opencv, object-recognition

我有一张像下面这样的照片。我想在图像中找到一组圆圈（它们的位置）。在下面的示例中，应该有三个组。背景是白色的或将是白色的。

（在源图像中不会有这样的矩形。我刚刚画了显示组应该是什么样的）

有可能找到吗？

![圆圈确实检测到](../Images/eef6bd799b00387fbe7cbfaf6f84d774.png)

这样的图片怎么样： ![示例 2](../Images/6cd51a7fe6e35e6846956f070b9b024b.png)

没有矩形的圆： ![示例 3](../Images/31be55765eb8d56074673a4f322cc1db.png)

![示例 4](../Images/e53b3af147c82487ce894e717c167701.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:36:58.473

`HoughCircles`您必须使用然后使用[聚类](http://en.wikipedia.org/wiki/Cluster_analysis)（[K-Means 算法](http://en.wikipedia.org/wiki/K-means_algorithm)）来识别圆圈。OpenCV 有 K-Means 实现：参见[example1](http://www.aishack.in/2010/08/k-means-clustering-in-opencv/)、[example2](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/kmeans.cpp?rev=4227)和[docs](http://opencv.willowgarage.com/documentation/cpp/clustering_and_search_in_multi-dimensional_spaces.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:23:13.260

HoughCircles 将可能的圆之间的距离作为其参数之一，然后再将它们视为单独的圆。只需不断调整此参数即可。只要您的圈子组比每组中的实际圈子相距更远，HoughCircles 就会将每个圈子视为同一“圈子”的一部分。

但是，如果您的圈子组重叠，那么这将不起作用。您必须以某种方式将每个组分开。也许如果一个组中的所有圆圈都在一条线上（就像你的图片中一样），那么基本的霍夫线检测会给你这些线 - 然后你可以检查靠近在一起的平行线，那些会指示每个组？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:35:52.587

1 - 只需反转图像，

2 - 然后扩大图像，使所有圆圈连接在一起，

3 - 找到轮廓，

4 - 找到边界框。

例如：

![在此处输入图像描述](../Images/a8fdfe491b07d56f2757460586024db7.png)

# http - tomcat的字符编码问题

> ID：11400989
> 
> 赞同：5
> 
> 时间：2012-07-09T18:32:59.497
> 
> 标签：http, tomcat, character-encoding

我在为 Web 应用程序进行字符编码时遇到问题。有一个弹出窗口使用用户输入查询数据库（按姓名搜索人）。问题是重音字符正在被转换成奇怪的字母，例如`ó => Ã³`. 这是一个非常标准的问题，但我无法弄清楚发生了什么。

**我做了什么？**

主要是遵循[这个](http://tech.top21.de/techblog/20100421-solving-problems-with-request-parameter-encoding.html;jsessionid=DAC7E8A568ED4EF9EB181BCDC785B010)。

*   在我的 tomcat 上设置第一个过滤器`(request&response).setCharacterEncoding("UTF-8");`
*   设置每一个字符编码参数`web.xml`。`server.xml``<?xml version='1.0' encoding='utf-8'?>`
*   在连接器中将 URIEncoding 更改为 UTF-8。使用萤火虫，我已经看到内容类型设置为`text/html; utf-8`获取帖子（主要是有问题的帖子）
*   将 jsp 上的元类型和 @page 更改为 UTF-8。

但是我仍然有同样的问题，虽然有些问题已经解决了，例如从服务器发送到客户端的一些重音字母显示正确。

我安装了 apache2.2 和 tomcat 6。

我不知道还能做什么，也不知道我应该在这里发布什么相关信息（如果你需要什么，请告诉我）......

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T19:07:16.950

确保在数据库和 JDBC 驱动程序级别也正确设置了编码。如何做到这一点取决于 DB 和 JDBC 驱动程序的品牌/版本。有关详细信息，请参阅 DB 和 JDBC 驱动程序特定文档。例如，对于 MySQL JDBC 驱动程序，您需要向 JDBC 连接 URL 添加两个特定参数。

顺便说一句，设置 XML 文件编码和元标记对 HTTP 请求/响应编码没有影响。对于基于 JSP/Servlet 的 Web 应用程序，只需最低限度地配置以下内容：

*   对于 HTTP GET 请求，在服务器级别进行配置。`URIEncoding`在 Tomcat 中，这是通过设置`<Connector>`Tomcat 的`server.xml`.

*   对于 HTTP POST 请求，请使用执行`ServletRequest#setCharacterEncoding()`.

*   对于 JSP 生成的 HTTP 响应，在每个 JSP 的基础上设置`pageEncoding`属性，或者更好的是，在应用程序范围内设置条目。`<%@page%>``<page-encoding>``web.xml`

*   对于 servlet 生成的 HTTP 响应（其中不涉及 JSP！），请使用`ServletResponse#setCharacterEncoding()`.

*   最后但同样重要的是，确保您的源代码文件也保存为 UTF-8。确切的配置取决于使用的编辑器。对于 Eclipse，您可以通过*Window > Properties > General > Workspace > Text File Encoding*来控制它。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-08T20:57:22.963

在 debian 用户的 java 选项中

```
/etc/default/tomcat7 
```

我把这个

```
set JAVA_OPTS=-Djavax.servlet.request.encoding=UTF-8 -Dfile.encoding=UTF-8 
```

那么默认情况下，所有编码似乎都被视为 UTF-8..

对我来说，这解决了问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-31T09:16:33.403

最后对我有帮助的是[这篇文章](http://www.noiden.co.kr/techstory/Page.do?titleLink=HTTP-request-parameter-with-UTF-8-encoding&articleId=66&accountId=dreamingduck)

我的总结：

在 server.xml 中将**“URIEncoding="UTF-8"**属性添加到您的连接器。例如，

```
<Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000"  redirectPort="8443" URIEncoding="UTF-8"/> 
```

然后为字符编码添加服务器端过滤器。在**带有 spring 的 tomcat**的情况下，将以下行添加到 web.xml：

```
<filter>
    <filter-name>charsetFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>charsetFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# javascript - 在 URL 中编码 JSON 时是否存在任何 XSS 威胁？

> ID：11400990
> 
> 赞同：4
> 
> 时间：2012-07-09T18:32:59.890
> 
> 标签：javascript, json, security, xss, urlencode

为了有一个 URL 友好的应用程序，我存储它的上下文在 URL 中有一个 JSON，它给出了类似的内容：

```
http://mysite.dev/myapppage/target#?context={%22attr1%22%3A{%22target_id-0%22%3A{%22value%22%3A%223%22%2C%22label%22%3A%22Hello%22}}} 
```

其中编码基本上下文：

```
{
"attr1":
    {
    "target_id-0":
        {
        "value": "3",
        "label": "Hello"
        }
    }
} 
```

我正在序列化我的对象：

```
JSON.stringify(context) 
```

我正在反序列化它：

```
var hashParamsElements = window.location.toString().split('?');
hashParamsElements.shift(); // we just skip the first part of the url
var hashParams = $.deparam(hashParamsElements.join('?'));
var contextString = hashParams.context;
var context = JSON.parse(contextString); 
```

上下文仅存储以读取变量，其中没有评估代码。有人能告诉我它是否是 XSS 安全的吗？

如果有威胁：我该如何避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:36:54.590

这种威胁来自使用不同的 JSON 解码方法，即`eval`和`new Function`. 它们直接执行 JS 代码，因此通过将代码放入 url（并链接到它）来允许非持久性 XSS 攻击。

`JSON.parse`没有这个问题，并且可以安全地抵御此类攻击。

[另见 (json.org)。](http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:48:44.407

`label`最终会被插入到某个 DOM 中吗？（即，`$('#something').html(context.attr1.target_id-0.label)`）

然后我可以输入`<script>...</script>`一个`label`，这就是你的 XSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:38:48.817

我看不出有任何威胁。它完全安全。`JSON.parse`不允许任何`function`运行。

另外，为什么要使用`?`. 如果您想给人一种“真实”网址的感觉，请改用 hashbang。

# java - 如何更改 JAR 文件中的通用 JAVA COFFEE CUP 图标

> ID：11400996
> 
> 赞同：2
> 
> 时间：2012-07-09T18:34:10.843
> 
> 标签：java, jar, icons

我可以更改 Frame（上、左）中的 JAVA COFFEE CUP 图标，但是如何更改 RUNNABLE JAR 文件的一般 JAVA COFFEE CUP 图片？是否有可能只更改一个 JAR 文件的文件图标？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:45:45.123

JAR 文件没有图标。是操作系统给了它一个图标。如果不更改所有 JAR 文件的图标，则无法更改一个 JAR 文件的图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:37:07.983

jar 文件上显示的图标取决于操作系统，操作系统将这种类型的文件识别为 java 文件并分配一个图标，

或者更快的方法是创建快捷方式，然后右键单击快捷方式并选择图标进行更改

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-09T18:35:16.187

解压 JAR 文件，它是一个 ZIP，找到图标文件，修改它，重新打包 JAR 文件。

# c++ - 编译时散列 C++0x

> ID：11400998
> 
> 赞同：5
> 
> 时间：2012-07-09T18:34:19.117
> 
> 标签：c++, compiler-construction, hash

使用 GCC 4.4（通常是 Android 和 IOS 可用的最大值）有一种方法可以对字符串进行编译时散列。

我们有一个将字符串键映射到资源的资源管理器。虽然查找速度很快，但散列和字符串创建速度很慢。就像是：

```
 ResourcesManager::get<Texture>("someKey"); 
```

花费大量时间分配字符串“someKey”，然后对其进行哈希处理。

我想知道是否有一个技巧可以在编译时使用它来散列它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T18:45:48.887

您必须实现正确的散列算法，但这可以使用 C++11 的 constexpr 函数来工作：

```
#include <iostream>

// Dummy hashing algorithm. Adds the value of every char in the cstring.
constexpr unsigned compile_time_hash(const char* str) {
    // Modify as you wish
    return (*str == 0) ? 0 : (*str + compile_time_hash(str + 1));
}   

int main() {
    unsigned some_hash = compile_time_hash("hallou");
    std::cout << some_hash << std::endl;
} 
```

然后你可能有一个重载，`ResourcesManager::get`它的结果是`compile_time_hash`（在这种情况下是无符号的）。

这显然取决于您应用的散列算法。使用 constexpr 实现类似 SHA* 的东西会非常痛苦。

请注意，您需要 GCC >= 4.6 或 clang >= 3.1 才能使用 constexpr。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:58:49.327

为了进行编译时散列，所有键都需要是编译时常量。

使用编译时常量进行索引的常用方法不是使用字符串，而是使用枚举类型。这具有根本不需要散列的优点，因为常量是连续的并且可以直接索引数组。

```
enum KeyType
{
    someKey,
    someOtherKey
};

ResourcesManager::get<Texture>(someKey); 
```

如果需要将键作为字符串获取，只需保留一个可以由枚举常量索引的字符串表。

```
static char * keyNames = 
{
    "someKey",
    "someOtherKey"
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:48:50.690

你总是可以编译一个程序来散列你的字符串并输出合适的源代码......

我自己，我实际上并没有对字符串进行散列，我只是枚举项目并输出带有枚举的头文件。很好很容易，没有冲突等。

# sql - 当用户语言不是英语时，使用 CONVERT 的 DATETIME/FLOAT 转换不一致

> ID：11400999
> 
> 赞同：1
> 
> 时间：2012-07-09T18:34:27.330
> 
> 标签：sql, sql-server-2008, sql-server-2005, localization

在使用德语表示与英语表示不同的值时，我在使用 SQL Server 2005 和 SQL Server 2008 时遇到了一些问题。服务器和操作系统以德语版本运行。

```
SET LANGUAGE deutsch;
SELECT 
    CONVERT(datetime, '31\. Dezember 1999') as a, 
    CONVERT(nvarchar, CONVERT(datetime, '31\. Dezember 1999')) as b, 
    CONVERT(float,'3.14159') as p,
    CONVERT(nvarchar, CONVERT(float,'3.14159')) as q; 
```

管理控制台中的输出是这样的：

```
a=1999-12-31 00:00:00.000   
b=Dez 31 1999 12:00AM
c=3,14159   
d=3.14159
dateformat=dmy 
```

这是不一致的。在 (a) 中，1999 年 12 月 31 日的*德语*表示被正确解析和显示（并且只有德语作品..）。使用 CONVERT 显式转换相同的日期会返回一个字符串，该字符串将*英语*日期格式与*德语*缩写月份名称混合在一起（如果仔细观察，它会显示“Dez 31”而不是“Dec 31”）。

*但是 p 从英文*表示法（小数点）的字符串转换为浮点数，但以*德文*表示法（使用十进制逗号）显示，而显式转换为 nvarchar再次产生*英文表示法的数字。*OTOH CONVERT() 不接受以德语表示法输入以转换为浮点数。

所以，我有一个 CONVERT 函数：

1.  它仅接受用于转换为*德语*表示法的日期时间的字符串。
2.  但只接受字符串转换为*英文*浮动。
3.  并将 datetime 值转换为 nvarchar 混合*German 和 English*。
4.  将浮点值转换为*英语*。

但我需要的是 SQL Server 2005、2008 中的一个函数，它将文本从当前用户语言转换为支持类型的值（日期时间、浮点数......）并将这些值转换回相对于当前用户的文本表示语。

这是什么功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:12:06.047

[设置语言](http://msdn.microsoft.com/en-us/library/ms174398.aspx)

> [s] 指定会话的语言环境。会话语言确定日期时间格式和系统消息。

[设置CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)函数120的样式参数支持与语言无关的转换。

至于浮点值的转换，看看[这些](https://stackoverflow.com/questions/9310007/converting-float-to-varchar-witch-correct-decimal-separator) [问题](https://stackoverflow.com/questions/1229147/sql-server-with-german-regional-settings)。

通常，您应该避免在数据库中使用特定于语言的格式，并在 UI 中实现它。